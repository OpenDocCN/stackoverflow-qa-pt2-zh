# StackOverflow 问答 14022000-14022999

# c# - 在 C# 中保护基类对象

> ID：14022000
> 
> 赞同：0
> 
> 时间：2012-12-24T13:25:42.837
> 
> 标签：c#

如何

```
 public class BaseAppConstants
    {
        public const string StLiveIdCookieName = "XYZ";
    }

public class AppConstants : BaseAppConstants
{

} 
```

如何进行更改，使用户无法直接访问他们只能像这样使用的基类 `AppConstants.StLiveIdCookieName;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:58:11.450

你应该要么

*   A) 将常量移动到应该使用的级别（即在其中声明它`AppConstants`并从中删除它`BaseAppConstants`）或者，

*   B）使用不同的修饰符使其不可访问并在其他类中提供访问器（即使用`protected`in`BaseAppConstants`并重新实现 in`AppConstants`类似的东西`public const string StLiveIdCookieName = BaseAppConstants.StLiveIdCookieName`- 但这种方式违背了常量的使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:28:15.330

如果您将基类中的属性设置为受保护，则它只能在派生类中使用。

```
public class BaseAppConstants
{
    protected const string StLiveIdCookieName = "XYZ";
} 
```

[在此处](http://msdn.microsoft.com/en-us/library/bcd5672a.aspx)阅读有关受保护的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:28:38.920

使用受保护的修饰符seee：

[http://msdn.microsoft.com/en-us/library/wxh6fsc7(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/wxh6fsc7(v=vs.71).aspx)

并进行详细解释

[http://msdn.microsoft.com/en-us/library/ba0a1yw2(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2(v=vs.71).aspx)

# delphi - 如何在 Delphi 中使用动画 PNG？

> ID：14022004
> 
> 赞同：11
> 
> 时间：2012-12-24T13:26:19.393
> 
> 标签：delphi, png, delphi-xe3, apng

如何在 Delphi 中使用动画 PNG？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-13T07:51:58.473

如果您仍在寻找解决方案，那么您可以在 [这里查看](http://imaginglib.sourceforge.net/index.php?page=down)我在哪里找到了可以解决您的问题的库。使用这个完整的库，您可以打开 APNG 文件，然后获取帧数等...

# django - Django在多对多表中没有条目

> ID：14022006
> 
> 赞同：0
> 
> 时间：2012-12-24T13:26:23.950
> 
> 标签：django, django-admin, many-to-many

我对 django 有一个问题，我真的无法理解。坚持了两天，一直在寻找源代码，但我找不到任何解释，希望有人比我更了解这一点！

我有两个模型，`Publication`就像`Article`这样

```
class Publication(models.Model):
    title = models.CharField(max_length=30)
    articles = models.ManyToManyField('Article',blank=True)

    class Meta:
        db_table = 'publications'

class Article(models.Model):
    headline = models.CharField(max_length=100)

    class Meta:
         db_table = 'articles' 
```

当我保存新文章时`Publication`，我想自动保存默认文章。我做了一个脚本来测试它，它工作正常。两个对象都在各自的表中创建，并且将一个条目写入`publications_articles`表中。正如预期的那样。

```
publication = Publication(title='The new exciting publication')
publication.save()
publication.articles.create(headline='The article that makes the pub so exciting') 
```

然而，这是棘手的部分。为了在管理员中保存 a 时具有相同的功能，`Publication`我确实覆盖了`save_model()`这样的功能。

```
class PublicationAdmin(admin.ModelAdmin):
    list_display = ['title']

    def save_model(self, request, obj, form, change):
        if not change:
            obj.save()
            obj.articles.create(headline='The article that makes this pub so exciting')
        else:
            obj.save() 
```

`Publication`在管理员中保存 a会同时创建 the`Publication`和 the`Article`但`publications_articles`表中没有将它们绑定在一起的条目！

有人请，请解释这种行为。我即将做一个原始的 sql-insert 只是为了完成它，但我想了解为什么实体之间没有建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:16:05.333

如果您在 . 结尾处通过代码进行调试`save_model`，您会注意到`save_related`紧随其后被调用。此方法检查输入的`Publication`表单是否有任何表单输入的相关数据。由于文章是通过代码添加的，因此它不会向`publications_articles`表中的数据库提交任何值。

在覆盖`save_model`方法结束时，您还会注意到`obj.articles.count()`返回 1 但此时尚未在表中插入任何值。

最好覆盖`save_related`：

```
def save_related(self, request, form, formsets, change):
    form.save_m2m()
    for formset in formsets:
        self.save_formset(request, form, formset, change=change)

    if not change and not formsets 
        form.instance.articles.create(headline='The article that makes this pub so exciting') 
```

# android - 尝试更改布局 xml 中视图的顺序时，FrameLayout 中的类转换异常？

> ID：14022007
> 
> 赞同：6
> 
> 时间：2012-12-24T13:26:24.110
> 
> 标签：android, android-layout, android-framelayout

这是我的布局文件

```
 <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="3">

    <WebView
        android:id="@+id/document_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

   <ProgressBar
        android:id="@+id/load_document_progress"
        android:layout_width="30dp"
        android:layout_gravity="center"
        android:layout_height="30dp"
        android:visibility="invisible"/>

    <Button
        android:id="@+id/start_btn"
        android:layout_width="90dp"
        android:layout_height="30dp"
        android:text="@string/start_btn_txt"
        android:textStyle="bold"
        android:textColor="#000000"
        android:layout_gravity="center"
        android:visibility="invisible"
        android:onClick="updatePresentationId"
        android:background="@drawable/border_radius"/>

</FrameLayout> 
```

这是有效的。但是当我必须改变元素的顺序时。我会得到**ClassCastException**。这是我的 logcat 跟踪。

> 12-24 18:33:58.131: E/AndroidRuntime(2089): 致命异常: main 12-24 18:33:58.131: E/AndroidRuntime(2089): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. zoho.showmote/com.zoho.showmote.android.activity.ShowDocuments}：java.lang.ClassCastException：android.widget.Button 无法转换为 android.widget.ProgressBar 12-24 18:33:58.131：E/AndroidRuntime（ 2089): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 12 -24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android. app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android.os.Handler.dispatchMessage(Handler.java:99) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在android.os.Looper.loop(Looper.java:137) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app.ActivityThread.main(ActivityThread.java:4424) 12-24 18: 33:58.131: E/AndroidRuntime(2089): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 java.lang.reflect.Method。调用（Method.java:511）12-24 18:33:58.131：E/AndroidRuntime（2089）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:784）12-24 18： 33:58.131: E/AndroidRuntime(2089): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 dalvik.system .NativeStart。main(Native Method) 12-24 18:33:58.131: E/AndroidRuntime(2089): Caused by: java.lang.ClassCastException: android.widget.Button 不能转换为 android.widget.ProgressBar 12-24 18:33 :58.131: E/AndroidRuntime(2089): at com.zoho.showmote.android.activity.ShowDocuments.getAllViews(ShowDocuments.java:50) 12-24 18:33:58.131: E/AndroidRuntime(2089): at com. zoho.showmote.android.activity.ShowDocuments.onCreate(ShowDocuments.java:39) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app.Activity.performCreate(Activity.java:4465) 12 -24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 12-24 18:33:58.131: E/AndroidRuntime(2089): 在 android.app .ActivityThread.performLaunchActivity(ActivityThread.java:1920) 12-24 18:33:58.131: E/AndroidRuntime(2089):... 11 更多

这是我的**活动**代码

```
public void getAllViews()
{
    **progressBar=(ProgressBar)findViewById(R.id.load_document_progress);**
    startButton=(Button)findViewById(R.id.start_btn);
    webView=(WebView)findViewById(R.id.document_id);
    userName=(TextView)findViewById(R.id.userNameTv);
    presentationName=(TextView)findViewById(R.id.presentation_name);
} 
```

我在这个方法的第一行得到了错误。我正在更改 Asyntask 的 onPreExecute 和 onPostExecute() 中视图的可见性。请帮助我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T13:30:56.610

当您更改小部件的顺序时。清理您的项目并重新构建它。

在 Eclipse 菜单中，项目 ---> 清理

# php - 一个while循环中的while循环逻辑上在PHP中不起作用

> ID：14022010
> 
> 赞同：0
> 
> 时间：2012-12-24T13:26:39.713
> 
> 标签：php, while-loop

我在我的 PHP 的另一个 while 循环中有这个 while 循环：

```
$selecty = mysql_query("SELECT * FROM followers WHERE userid='".$_SESSION['id']."'");

$rowsy = mysql_num_rows($selecty);

echo '<td>'. $table["username"]. '</td>';
echo '<td>';

while ($tables = mysql_fetch_assoc($selecty)) {
    if($tables['followerid']!=$table['id']) {
        echo '<a href="#" data-userid="'.$table['id'].'" class="follow">'.'</a>'; 
    } else {
        echo '<a href="#" data-userid="'.$table['id'].'" class="following">'.'</a>';
    }
}
echo '</td>';
echo "<tr>"; 
```

这更像是一个逻辑问题，以及嵌套的 while 循环是否是正确的方法。我想说的是，如果“用户关注者表”中的“followerid”与用户表中的“id”（来自上一个循环）不同 - 回显关注按钮，否则回显以下按钮.

这是工作文件，而我在关注者表中有数据但如果我没有显示（因为没有行） - 我如何在我的 PHP 中实现它？那么，如果“关注者表”中没有行，则回显关注按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:38:28.713

你可以尝试这样做

```
$selecty = mysql_query("SELECT * FROM followers WHERE userid='".$_SESSION['id']."'");

$rowsy = mysql_num_rows($selecty);

echo '<td>'. $table["username"]. '</td>';
echo '<td>';

while ($tables = mysql_fetch_assoc($selecty)) {
    if($tables['followerid']!=$table['id'] and $tables['followerid'] != '') {
        echo '<a href="#" data-userid="'.$table['id'].'" class="follow"></a>'; 
    } else if($tables['followerid'] =$table['id'] and $tables['followerid'] !='') {
        echo '<a href="#" data-userid="'.$table['id'].'" class="following"></a>';
    } else {
        echo what you like here when $tables['followerid'] = ''
    }
}

echo '</td>';
echo "<tr>"; 
```

编辑

```
 class="follow">'.'</a>'
                      ^------------you dont have to make point and single quotes here

   $selecty = mysql_query("SELECT * FROM followers WHERE    userid='".$_SESSION['id']."'");

 $rowsy = mysql_num_rows($selecty);
 echo '<table><tr>';
  echo '<td>'. $table["username"]. '</td></tr>';

 if ($tables['followerid'] !== ''){
 while ($tables = mysql_fetch_assoc($selecty)) {
 echo '<tr><td>';
if($tables['followerid']!=$table['id'] and $tables['followerid'] != '') {
    echo '<a href="#" data-userid="'.$table['id'].'" class="follow"></a></td></tr>'; 
} else if($tables['followerid'] =$table['id'] and $tables['followerid'] !='') {
    echo '<a href="#" data-userid="'.$table['id'].'" class="following"></a></td></tr>';
} else {
    echo "what you like here  </td></tr>";
}
}
}
else {

 echo "do your code here " ; 
}

echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:34:03.353

在“追随者”循环的开头放置一个布尔值（FALSE），这样如果它被交叉，则使其为 TRUE。如果您超出循环并且它仍然是 FALSE，那么无论如何添加按钮。

```
$trip = FALSE;

while ($tables = mysql_fetch_assoc($selecty)) {
  if($tables['followerid']!=$table['id']) {
    echo '<a href="#" data-userid="'.$table['id'].'" class="follow">'.'</a>'; 
  } else {
    $trip = TRUE;
    echo '<a href="#" data-userid="'.$table['id'].'" class="following">'.'</a>';
  }
}

if( !$trip ) echo '<a href="#" data-userid="'.$_SESSION['id'].'" class="follow">'.'</a 
```

# facebook - 如何从 Facebook 网页获取 LIKE 按钮 url

> ID：14022012
> 
> 赞同：1
> 
> 时间：2012-12-24T13:26:50.663
> 
> 标签：facebook, button, facebook-like

我想将 Facebook 上的 LIKE 按钮与其他网页同步。在我在 FB 上发布一些文章/视频之后，就有一个 LIKE 按钮。如何获取它的网址，以便我可以将其添加到具有相同文章/视频的其他网页？我想存档，当有人点击 FB 或该网页上的 LIKE 按钮时，他们将被计入同一个列表。

**示例：** 我需要使用什么 URL 来创建 LIKE 按钮，这会将人们添加到此列表中： http: [//www.facebook.com/browse/likes?id=386314241455183](http://www.facebook.com/browse/likes?id=386314241455183)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:43:32.977

我想你想在你的网页上放一个与相应的 Facebook 页面同步的按钮。检查此链接：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

向下滚动页面，然后转到 Step1 .. 在小部件中输入您的 facebook 页面的 URL（例如：[https](https://www.facebook.com/playbraindead) ://www.facebook.com/playbraindead ）并单击提交，它会给您代码（HTML，IFRAME等），您可以添加到您的网页和likebox 将同步！

# jquery - 如何使用标记它

> ID：14022016
> 
> 赞同：2
> 
> 时间：2012-12-24T13:27:08.793
> 
> 标签：jquery, jquery-ui, tag-it

我从 [这里](https://github.com/aehlke/tag-it)使用 tagit 库 我创建了正常工作的 tagit，我创建了如下数组：

```
 $("#name).tagit({
    itemName: "teamId",
    fieldName: "teamName",
    availableTags: array,
    allowSpaces:true,
    caseSensitive:false,
    removeConfirmation:true,
    placeholderText:"Tag Group..."
     });

           var a =["1","2","3","4"]; 
```

在使用标签时，所有选项都可以正确选择..我希望标签“4”在选择任何选项之前必须显示为默认选择我该怎么做..

**附加信息：**

源中有一个选项可用于创建新标签

```
 $("#myTags").tagit("createTag", "my-tag"); 
```

它也不适合我....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T16:23:43.430

如果我理解您的问题，有几个 javascript 错误可能会阻止您看到您希望看到的内容。

*   `Define the array before using it`. 其次，引用的数组命名为' `array`'，而定义的数组为' `a`'。
*   `"#name`--> 这缺少结束引号。
*   `$("#myTags").tagit("createTag", "my-tag");`在您尝试使用时，`id`您的`ul`is之前不工作。`'name'``createTag``myTags`

对于您的第一个问题，您可以使用以下其中一个：

（1 和 2 可能没有充分利用 tagit 库的潜力。）

**1)**已经使用元素“”初始化您的列表`4`。在你的 html 中有这样的东西：

```
<ul id="name">
   <li>4</li>
</ul> 
```

**2)**在您的 html 中创建元素“4”。

```
var array = ["1", "2", "3", "4"];
$('#name').append('<li>' + array[3] +'</li>'); 
```

**3)** `Use the createTag : $("#name").tagit("createTag", "4");`

完整的工作示例，使用了所有选项：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/tag-it.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#myTags").tagit();

        var array = ["1", "2", "3", "4"];
        $('#name').append('<li>' + array[3] +'</li>'); //Using Option 2
        $("#name").tagit({
            itemName: "teamId",
            fieldName: "teamName",
            availableTags: array,
            allowSpaces:true,
            caseSensitive:false,
            removeConfirmation:true,
            placeholderText:"Tag Group..."
        });
        $("#name").tagit("createTag", "NewTag");  //Using option 3
    });
</script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">
<link href="css/jquery.tagit.css" rel="stylesheet" type="text/css">
</head>
<body>
    <ul id="name">
       <li>0</li>  <!-- Using option 1 -->
    </ul>
</body>
</html> 
```

# django - Django模板中奇怪的for循环行为

> ID：14022018
> 
> 赞同：-1
> 
> 时间：2012-12-24T13:27:32.777
> 
> 标签：django, dictionary, for-loop, django-templates

我正在尝试`for`在我的模板中编写一个循环，如此处[所述](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)。

**视图.py：**

```
def simple_view(self, request):
    adictionary = {'first': 'this is the first value', 
                   'second': 'this is the second value', 
                   'third': 'this is the third value'}
    return render_to_response("index.html", 
                            {'adictionary': adictionary}, 
                            context_instance=RequestContext(request)) 
```

**索引.html：**

```
{% for key, value in adictionary %}
    {{ key }} : {{ value }} <br/>
{% endfor %} 
```

这是我对 HTML 输出的期望：

```
first : this is the first value
second : this is the second value
third : this is the third value 
```

这就是我得到的：

```
s : e 
t : h 
f : i 
```

这对你有意义吗？我要砸键盘了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:33:30.327

用于`adictionary.items`访问`key, val`

```
{% for key, value in adictionary.items %}
    {{ key }} : {{ value }} <br/>
{% endfor %} 
```

# .net - WCF。长时间的操作。正确的方法

> ID：14022028
> 
> 赞同：4
> 
> 时间：2012-12-24T13:28:33.260
> 
> 标签：.net, wcf

WCF 服务器上的一项操作正在工作大约 8(!!!) 小时......完成后我需要在客户端上显示此操作的结果。

与客户保持联系这么长时间可以吗？如果可以，24小时营业可以吗？还是像 [这样](https://stackoverflow.com/questions/2400263/wcf-windows-service-long-operations-callback-to-calling-module)使用 smth 更好？

我试图在 SO 上找到答案，但没有成功..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:42:25.763

在处理预计需要相当长的时间的操作时，异步总是要好得多（我个人声明操作“运行缓慢”的经验法则是，该操作需要大致花费普通用户点击所需的时间在慢速网页上“重新加载”，我估计大约需要 10 秒；我曾在一家公司工作，任何超过半秒的操作都被宣布为“慢速”）。

保持连接打开存在许多问题：

*   **超时**- 您必须将它们设置为八小时，这相当于出于所有实际目的禁用它们，至少就用户交互而言
*   **客户端重新启动**- 如果您的客户端正在等待来自服务器的同步响应，则报告结果将无法在客户端重新启动后继续存在
*   **中间进度报告**- 当一个操作运行几个小时时，它很可能由多个阶段组成。当您的操作经历多个阶段时，异步可让您报告完成百分比和一般操作过程。

这就是为什么您应该强烈倾向于在所有长时间运行的操作中使用双工通信。

# c# - 如何使用 C# 循环遍历 xml 元素以更新一个元素

> ID：14022030
> 
> 赞同：0
> 
> 时间：2012-12-24T13:28:37.157
> 
> 标签：c#, xml

> **可能重复：**
> [需要使用 C# 更新 XML 中的字符串值](https://stackoverflow.com/questions/7096647/need-to-update-a-string-value-in-xml-using-c-sharp)

我有一个如下所示的 xml 文件：

```
<MediaContent>
  <PublishInfo region="A"  publishState="NotPublished"  />
  <PublishInfo region="B"  publishState="Published"  />
<MediaContent/> 
```

我想循环遍历元素，以便可以将区域 B 的“publishState”更新为“未发布”。我只能更新区域 A 的 publishState。

谁能告诉我如何到达区域 B 并更新该区域的发布状态。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:35:45.257

一个简单的方法是使用 Linq2Xml。包括

```
 using System.Xml.Linq; 
```

像这样加载你的文件

```
 XDocument loaded = XDocument.Load(@"C:\test.xml"); 
```

然后查看此[链接中的“查询您的数据”部分](http://broadcast.oreilly.com/2010/10/understanding-c-simple-linq-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:35:20.573

[您可以使用LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)简单地做到这一点：

```
XDocument xdoc = XDocument.Load(path_to_xml);
// get PublishInfo elements with region B
var query = xdoc.Descendants("PublishInfo")
                .Where(pi => (string)pi.Attribute("region") == "B");
// update elements
foreach (var element in query)
    element.Attribute("publishState").Value = "NotPublished";
// save xml
xdoc.Save(path_to_xml); 
```

# php - USPS 运输标签

> ID：14022040
> 
> 赞同：0
> 
> 时间：2012-12-24T13:30:03.590
> 
> 标签：php, usps

我正在使用 USPS 运输标签 API。我的请求从 API 中得到了很好的响应。方法名称是`ExpressMailIntl`.

`labelimage`具有值的字段以加密格式从 API 返回。

如何将加密的字符串转换为图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:36:51.617

根据[交付确认 - USPS Web Tools™ 应用程序编程接口 - 用户指南 - 文档版本 8.1c (01/22/2012)](https://www.usps.com/webtools/htm/Delivery-Confirmation-v8-1c.htm)：

> 根据您的请求 ( `<ImageType>`)，返回的图像以 PDF 或 TIF 格式进行 Base64 编码。使用前必须对其进行解码。有关 Base64 编码和解码的更多信息，请参阅以下工作组网站：[网络工作组第 4.3.2.4 节](http://www.ietf.org/rfc/rfc1421.txt?number=1421)和网络工作[组第 6.8 节](http://www.ietf.org/rfc/rfc2045.txt?number=2045)。

关于base64编码的加密没有任何内容。

有关可以将 base64 解码为常用八位字节二进制文件的 PHP 函数，请参阅[`base64_decode`^(*文档*)](http://php.net/base64_decode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T06:24:15.123

您可以将其保存为 pdf。USPS 发送 pdf 格式的标签。

```
 $xml = new SimpleXMLElement($response);

 $label_img = $xml->DeliveryConfirmationLabel;

 $label_title = 'label.pdf';

 $file=fopen($label_title,"w");

 fwrite($file,base64_decode($label_img)); 
```

# java - 如何将 SQLiteOpenHelper 作为单个原子事务进行多次调用？

> ID：14022042
> 
> 赞同：2
> 
> 时间：2012-12-24T13:30:06.927
> 
> 标签：java, android, multithreading, sqlite, concurrency

我有一个`SQLiteOpenHelper`实现单例模式的类，并具有三种方法：`addLogs()`、`getLogs()`和`deleteLogs()`。`BroadcastReceiver`七个线程（由 a在某些时间表触发）访问数据库——其中六个仅使用`addLogs()`，另一个在完成之前使用`getLogs()`和调用。`deleteLogs()`

我的问题是，因为最后一个线程对 SQLite 数据库进行了两次不同的调用，所以其他线程`addLogs()`甚至可以在调用之前`deleteLogs()`调用，这会破坏我的输出。如何使一个线程将两个调用`SQLiteOpenHelper`视为单个原子事务？

我尝试过的：在 , 中创建一个静态`ReentrantLock`成员，并在事务之前和之后从七个线程中的每一个`SQLiteOpenHelper`调用`lock()`and 。`unlock()`即使最后一个线程仍然有锁，其他六个线程仍然可以通过，它在之前调用`getLogs()`并在之后释放`deleteLogs()`。

**更新：**这是访问这两种方法的第七个线程。

```
public class Uploader extends Thread {

    private Context context;

    public Uploader(Context context) {
        this.context = context;
    }

    @Override
    public void run() {
        Logger.d("STARTED: Uploader");
        DB db = DB.getInstance(context);
        List<JsonLog> logs = db.getLogs(); // FIRST CALL
        String json = new Gson().toJson(logs); // convert to JSON

        // connect to the server and upload
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(This.URL);
        post.setHeader("content-type", "application/json");
        try {
            Logger.d("to upload: " + json);
            StringEntity se = new StringEntity(json);
            post.setEntity(se);
            StatusLine status = client.execute(post).getStatusLine();
            // if upload is successful
            if (status.getStatusCode() == HttpStatus.SC_OK) {
                db.deleteLogs(); // SECOND CALL
            } else {
                Logger.d("Uploader failed. " + status.getStatusCode() + ": " + status.getReasonPhrase());
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        Logger.d("FINISHED: Uploader");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:35:35.507

SQLite 有事务`db.beginTransaction()`，`db.setTransactionSuccessful()`用于标记要提交的 Tx 并`db.endTransaction()`最终将 Tx 标记为完成。

因此，您可以在您的`getLogs()`操作中将`beginTransaction`其`deleteLogs`标记为已完成（并且成功）。

[Update] Now with your code snippet you probably would want to call `beginTransaction` before your 1st call and in a `finally` block, that adds to the `try-catch` block call into `endTransaction`. At the end of the `try` part if the status is ok, you would call `setTransactionSuccessful` (after the `delete` call.

# ios - 如何在 GCD 的 runloop 中安排事件

> ID：14022044
> 
> 赞同：2
> 
> 时间：2012-12-24T13:30:13.807
> 
> 标签：ios, grand-central-dispatch

我正在尝试连接到自定义 GCD 队列中的服务器。我就是这样做的。

```
- (void) initNetworkCommunication{
    if(!self.connQueue){
        self.connQueue = dispatch_queue_create("connection_queue", NULL);
    }

    dispatch_async(self.connQueue, ^(void) {
        if(self.inputStream ==nil && self.outputStream ==nil) {
            CFReadStreamRef readStream;
            CFWriteStreamRef writeStream;
            NSString *host= [[NSUserDefaults standardUserDefaults] objectForKey:@"ip_preference"];
            NSNumber *portNum = [[NSUserDefaults standardUserDefaults] objectForKey:@"port_preference"];

            int port = [portNum intValue];
            CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)host, port, &readStream, &writeStream);

            CFReadStreamSetProperty(readStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
            CFWriteStreamSetProperty(writeStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);  

            self.inputStream = (__bridge NSInputStream *)readStream;
            self.outputStream = (__bridge NSOutputStream *)writeStream;
            [self.inputStream setDelegate:self];
            [self.outputStream setDelegate:self];

            [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
            [self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

            [self.outputStream open];
            [self.inputStream open];
        } else {
            NSLog(@"persistant connection alerady opened");
            return;
        }
    });
} 
```

现在，如果我在 dispatch_sync 中编写这段代码，它会正确调用委托函数。

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent 
```

但是，当我使用我想要做的 dispatch_asynch 时，它不会调用我的委托函数。

从到目前为止我所读到的内容来看，GCD 队列有一个与之关联的运行循环，但这些不是由系统运行的，我们需要自己这样做。我在理论上理解这一点，但它是如何完成的。以某种方式与此相关的调度源？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T13:42:08.307

后添加此方法`[self.inputStream open];`

```
[[NSRunLoop currentRunLoop]run]; 
```

这使接收器进入一个永久循环，在此期间它处理来自所有附加输入源的数据。[查看有关RunLoops 的](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)苹果文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-05T02:49:25.560

另一种方式让`dispatch_get_main_queue`使用时继续运行`dispatch_async();`

# arrays - 检查大小为 n 的数组是否包含 0 到 n-1

> ID：14022054
> 
> 赞同：1
> 
> 时间：2012-12-24T13:31:34.900
> 
> 标签：arrays, sorting

这是我需要回答的问题：我的程序得到一个大小为 n 的数组，其中包含从 0 到 n-1 的数字。你可以假设我们没有得到低于 0 的数字或高于 n-1 的数字。

我需要检查数组是否包含 0 到 n-1 之间的所有数字，如果包含则返回 1。否则为 0。

例子：

大小为 5 的数组：`4,1,0,3,2`返回 1。

大小为 5 的数组：`4,1,0,3,1`返回 0（2 不在数组中）

我试图做的事情：

```
 int Ex4_bonus() //sort a using a single for loop, then iterate through it with another for loop to look 
{              // for a spot that doesnt equal the value inside it.
    int i,n,boolean=1,temp=0;
    int* a;
    printf("Enter the size of the array\n");
    scanf("%d",&n);
    a=input_array_dyn(a,n);
    printf("Enter numbers from 0-%d\n",n-1);
    for(i=0;i<n;i++)
        scanf("%d",&a[i]);
    for(i=0;i<n;i++)
    {
        if(a[i]!=i)
        {
            temp=a[a[i]];
            a[a[i]]=a[i];
            a[i]=temp;
        }
    }
    for(i=0;i<n;i++)
        if(a[i]!=i)
            boolean=0;
    printf("%d\n",boolean);
    return boolean;
    free(a);
} 
```

但它不适用于某些阵列。我哪里出错了，有没有更好的方法？您不能使用另一个数组，并且程序必须在 O(n) 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:37:59.870

计算 的总和`2**a[i]`。如果它不等于，`(2**n)-1`那么您缺少一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T11:53:16.963

```
public static boolean arrayCheck(int[] ints) {
for (int i = 0; i < ints.length; i++) {
  while (i != ints[i]) {
    int currPosVal = ints[i];
    if (currPosVal <= i || currPosVal >= ints.length) {
      return false;
    }
    int temp = ints[currPosVal];
    if (currPosVal == temp) {
      return false;
    }
    ints[i] = temp;
    ints[currPosVal] = currPosVal;
  }
}
return true; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-17T14:33:58.490

使用异或运算的特性。

C++：

```
bool solve(vector<int>& arr){
    int xor = 0;
    for (int i = 1; i < arr.size(); i++)
        xor ^= i;

    for (int  v: arr)
        xor ^= v;

    return xor == 0;
} 
```

或者：

```
bool solve(vector<int>& arr){
    int xor = 0;
    for (int i = 0; i < arr.size(); i++)
        xor ^= i^arr[i];

    return xor == 0;
} 
```

# c++ - wxTreeItemId 如何获取数据

> ID：14022057
> 
> 赞同：0
> 
> 时间：2012-12-24T13:32:17.753
> 
> 标签：c++, user-interface, wxwidgets

我试图创建我自己的存储额外数据的 wxTreeItemId 版本。缝在下面：

TreeItemId.h

```
#ifndef TREE_CTRL
#define TREE_CTRL

#include "wx/treectrl.h"
#include "Particle System.h"

class TreeItemId : public wxTreeItemId
{
public:
    TreeItemId(ParticleSystem* system);
private:
    ParticleSystem* particleSystem;
}; 
```

TreeItemId.cpp

```
TreeItemId::TreeItemId(ParticleSystem* system) 
: wxTreeItemId()
{
    particleSystem = system;

} 
```

我想使用一个事件来获取选定的 TreeItem，但我无法找到一种使用我的 treeItem 类而不是标准的方法。

我想做一些事情：

```
void TopRightPanel::OnSelChanged(wxTreeEvent& event)
{
    TreeItemId *item = (TreeItemId)event.GetItem();
} 
```

但这不起作用...任何建议将不胜感激。我需要使用我自己的 wxTreeItemData 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:23:36.593

您应该将您的数据对象从而`wxTreeItemData`不是`wxTreeItemId`. 假设你`MyItemData : public wxTreeItemData {};`有

```
wxTreeItemId itemId = event.GetItem();
MyItemData * data = (MyItemData *)m_MyTreeCtrl->GetItemData(itemId);
if(data) { /* Doo what you need here */ } 
```

为了设置项目数据，您需要使用[InsertItem()](http://docs.wxwidgets.org/trunk/classwx_tree_ctrl.html#a06e1e6b25a7121922412eea510bd3109)方法并在那里指定数据对象。或者对现有项目使用[SetItemData()](http://docs.wxwidgets.org/trunk/classwx_tree_ctrl.html#adb74a81b41ab25bd38884311bb4b3b46)并将项目 ID 和数据对象传递给此方法。

# html - 屏幕宽度一定百分比的填充

> ID：14022063
> 
> 赞同：1
> 
> 时间：2012-12-24T13:32:38.027
> 
> 标签：html, css, margin, percentage

我有一个主容器 div，我希望它从屏幕顶部精确地设置边距，例如`10%`屏幕宽度。这样我就不会遇到屏幕尺寸不均匀等问题。

我已经找到了一个肮脏的解决方法，即在 div 之前放置`1px by 1px`背景颜色的图像，然后将其设置为具有`10%`屏幕宽度的样式。但这看起来很脏，不是吗？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:48:48.693

与 Rubens 相同的解决方案，但不使用表格。我还放置了一些代码来处理您询问的上边距，但使用填充代替。

```
<html>
 <head>
 <title>...</title></head>
 <body>
  <div id="content">
   Your whole page comes here...
  </div>
 </body>
</html>

* {
    padding:0;
    margin:0;
}

html, body {
    height:100%;
}

body {
    padding:10% 0 0;
}

#content {
    width: 850px; // replace with your desired width
    margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:40:58.557

我发现非常优雅的解决方案是将页面插入表格中，从正文之后开始，并在正文之前终止。

你会有这个：

```
<html>
<head><title>...</title></head>
<body>
<table id="content"><tr><td>

    Your whole page comes here...

</td></tr></table>
</body>
</html> 
```

现在只需使用样式确定页面的大小：

```
#content {

    width: 850px;
    margin-left: auto;
    margin-right: auto;

} 
```

# java - 在 Spring MVC 3.0 中映射到要模型的对象列表

> ID：14022065
> 
> 赞同：1
> 
> 时间：2012-12-24T13:33:05.850
> 
> 标签：java, jsp, taglib

我的问题是如何使用 Spring taglib 在 jsp中**映射对象列表。**

```
public  class Book {
  private int bookId;
  private  String bookName;
  private   List<Page> pages;
} 
```

其中 Page 是另一个类。我正在将 Book 类的对象发送到 jsp 页面，并希望从 jsp 页面动态添加页面。我正在使用 Spring MVC 项目。**我怎样才能做到这一点**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:33:04.107

您可以使用 AJAX 调用来实现这一点。您可以将 JSON 对象发送到 server.ie 页面对象到服务器。

其他选择是...您可以使用代码创建动态文本框：此代码用于创建动态输入框...

```
function add(type) {
    //Create an input type dynamically.
    var element = document.createElement("input");
    //Assign different attributes to the element.
    element.setAttribute("type", type);
    element.setAttribute("name", type);
    var foo = document.getElementById("fooBar");
    //Append the element in page (in span).
    foo.appendChild(element);
} 
```

提示：您可以通过创建多个文本框将页面列表发送到服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:57:43.520

您可以对每个标签使用 JSTL 来遍历 jsp 上的所有页面对象

```
<c:forEach var="page" items="${book.pages}">
    <span>${page.anyAttributeOfPage}</span>
</c:forEach> 
```

假设您已将 book 添加为模型属性，例如

```
model.addAttribute("book",book); 
```

# android - 使 Datepicker 按钮看起来类似于 Google 日历应用中的按钮

> ID：14022069
> 
> 赞同：5
> 
> 时间：2012-12-24T13:33:36.597
> 
> 标签：android, android-layout, android-button, android-calendar, android-datepicker

我的应用程序应该有一个 Datepicker。要调用日期选择器片段，请按下按钮，然后出现浮动日期选择器。我的问题是该按钮看起来与用于接受数据的其他 UI 组件不相似。有什么方法可以使按钮的外观和功能类似于 Google 日历应用程序中的按钮？日期选择器按钮也动态显示选择的日期，并且也希望具有该功能。

供参考的选择：

**我当前的按钮：**

![在此处输入图像描述](../Images/1caacbc6206075af5accc56547a3a1d7.png)

**我想要实现的按钮类型：** ![在此处输入图像描述](../Images/77183860cf3b2e4d8f89b7a6e141c8e9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T14:16:03.287

我环顾四周，能够通过将以下代码放入 xml 代码中来改变外观：

```
style="@android:style/Widget.DeviceDefault.Light.Spinner" 
```

[以下](https://stackoverflow.com/questions/14024921/retrieve-and-set-data-from-dialogfragment-datepicker)是如何向按钮添加文本。

# php - 从我的联系表单发送电子邮件不起作用

> ID：14022070
> 
> 赞同：1
> 
> 时间：2012-12-24T13:33:54.980
> 
> 标签：php, html, wampserver

我想在我的网站上添加联系人，所以我在互联网上搜索了一个示例，我找到了这个示例：

```
http://www.html-form-guide.com/contact-form/php-email-contact-form.html 
```

我已经按照示例进行了操作，但它没有用，我的邮箱中没有电子邮件，但它在提交后将我重定向到感谢页面。

我已将contact-form-handler.php 更改为

```
<?php 
$errors = '';
$myemail = 'myEmail@yahoo.fr';//<-----Put Your email address here.
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
    $errors .= "\n Error: Invalid email address";
}

if( empty($errors))
{
    $to = $myemail; 
    $email_subject = "Contact form submission: $name";
    $email_body = "You have received a new message. ".
    " Here are the details:\n Name: $name \n Email: $email_address \n Message \n $message"; 

    $headers = "From: $myemail\n"; 
    $headers .= "Reply-To: $email_address";

    mail($to,$email_subject,$email_body,$headers);
    //redirect to the 'thank you' page
    header('Location: contact-form-thank-you.html');
} 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Contact form handler</title>
</head>

<body>
<?php
echo nl2br($errors);
?>

</body>
</html> 
```

我的contact.html文件：

```
<form method="POST" name="contactform" action="contact-form-handler.php"> 
            <p>
                <label for='name'>Your Name:</label> <br>
                <input type="text" name="name">
            </p>
            <p>
                <label for='email'>Email Address:</label> <br>
                <input type="text" name="email"> <br>
            </p>
            <p>
                <label for='message'>Message:</label> <br>
                <textarea name="message"></textarea>
            </p>
                <input type="submit" value="Submit"><br>
                </form>
<script language="JavaScript">
// Code for validating the form
// Visit http://www.javascript-coder.com/html-form/javascript-form-validation.phtml
// for details
var frmvalidator  = new Validator("contactform");
frmvalidator.addValidation("name","req","Please provide your name"); 
frmvalidator.addValidation("email","req","Please provide your email"); 
frmvalidator.addValidation("email","email","Please enter a valid email address"); 
</script> 
```

和其他页面contact-form-tank-you.html

```
<div id="body">
        <div class="content">
            <h1>Thank you!</h1>
Thank you for submitting the form. We will contact you soon!

        </div>
</div> 
```

我使用的程序是：htmp ,wampserver,php 5.3.10

**更新**

我打开了我的 php.ini，这是我发现的：

```
 [mail function]
    ; For Win32 only.
    ; http://php.net/smtp
    SMTP = smtp.yahoo.fr
    ; http://php.net/smtp-port
    smtp_port = 25

    ; For Win32 only.
    ; http://php.net/sendmail-from
    sendmail_from = myMail@yahoo.fr 
```

我已登录到 logs/appache_error 并发现此错误：

```
[Thu Dec 27 10:11:51 2012] [error] [client 127.0.0.1] PHP Warning:  mail() [<a href='function.mail'>function.mail</a>]: SMTP server response: 530 5.7.0 Must issue a STARTTLS command first. dm3sm56414314wib.9 in C:\\wamp\\www\\MyWebsitname\\en\\contact-form-handler.php on line 32, referer: http://localhost/MyWebsitname/en/contact.html 
```

所以我在互联网上搜索，我发现我应该添加

```
ini_set("SMTP","ssl://smtp.gmail.com");
ini_set("smtp_port","465"); 
```

但问题是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:42:34.630

mail() 函数有时不起作用的原因有很多，请阅读这篇文章 [PHP mail() doesn't work](https://stackoverflow.com/questions/6403746/php-mail-doesnt-work)

我强烈推荐使用 PHPMailer Library，它是免费的，易于使用，并且比原生的 php mail() 函数更可靠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:42:24.957

我认为您缺少电子邮件配置。

您可以在 php.ini 中进行配置，请参见此处的示例：[http ://www.quackit.com/php/tutorial/php_mail_configuration.cfm](http://www.quackit.com/php/tutorial/php_mail_configuration.cfm)

您将需要一个 SMTP 服务器，最简单的方法是使用像 mandrill (http://mandrill.com/) 这样的免费服务。注册一个帐户，您将看到 SMTP 详细信息。在您的 php.ini 中输入这些详细信息，电子邮件将通过 SMTP 服务器从 mandril 发送。

或者，您可以设置本地 SMTP 服务器，但我想这会更麻烦 :)

# mysql - mysql查询中的顺序

> ID：14022075
> 
> 赞同：1
> 
> 时间：2012-12-24T13:34:43.210
> 
> 标签：mysql, sql-order-by

我只想问一下我的查询/查询遇到的问题。例如，我从一个查询中得到以下结果，该查询是 4 个查询的联合：

```
alpha,alpha,alpha,bravo,bravo,bravo,charlie,charlie,charlie,delta,delta,delta 
```

我需要做什么才能使结果的顺序：

阿尔法，布拉沃，查理，三角洲，阿尔法，布拉沃，查理，三角洲，阿尔法，布拉沃，查理，三角洲？

如果这个问题之前可能已经在 stackoverflow 中得到回答，我深表歉意，因为我不知道这个问题的正确关键字来搜索数据库。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:37:46.530

您可以有一个类似于排序顺序的新列：

```
SELECT *
FROM
(
   SELECT acolumn, 1 AS sortorder FROM table1
   UNION ALL
   SELECT acolumn, 2              FROM table2
   UNION ALL
   SELECT acolumn, 3              FROM table3
   UNION ALL
   SELECT acolumn, 4              FROM table4
) u
ORDER BY aColumn, sortorder; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:38:24.160

您可以使用 distinct 关键字：

```
Select DISTINCT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:46:47.983

MySQL 可以按数字`(1>2>n)`或字母顺序排列`(a>b>x)`。数据的排序方式取决于要排序的类型。

Mahmouds 的回答是创建一个数字字段，您可以通过该字段对联合进行排序。

# activemq - Activemq 目标重命名

> ID：14022082
> 
> 赞同：1
> 
> 时间：2012-12-24T13:35:22.243
> 
> 标签：activemq

是否可以在 Activemq 中重命名目的地（队列或主题）？如果是，是否有可能在重命名之前不丢失其中包含的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:41:14.007

并不真地。

为什么不创建一个新的，然后将所有消息复制到新队列中？这可以通过 JMX 接口或仅通过在代码中移动消息来完成。

# c# - 如何使用户能够在 Windows Store 8 中移动屏幕图像？

> ID：14022085
> 
> 赞同：2
> 
> 时间：2012-12-24T13:35:40.583
> 
> 标签：c#, .net, windows-8, windows-runtime

我有一个关于 Windows Store 8 应用程序的简单直接问题。

假设我在屏幕上有一张桌子的照片。当用户按下“编辑”按钮时，他现在应该能够将屏幕上的图片移动到所需位置，直到他按下“完成”。

我需要使用哪个类来实现它？C# 中的简单代码示例也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:42:34.050

您需要处理 ManipulationDelta 事件。有关如何使用它的一些示例，请参阅[此页面。](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/hh465387.aspx)

示例... XAML

```
<Rectangle Name="TestRectangle" Width="200" Height="200" Fill="Blue" ManipulationMode="All"/> 
```

C＃

```
private TranslateTransform dragTranslation;

// Constructor
public MainPage()
{
    InitializeComponent();

    // Add handler for the ManipulationDelta event
    TestRectangle.ManipulationDelta += Drag_ManipulationDelta;
    dragTranslation = new TranslateTransform();
    TestRectangle.RenderTransform = this.dragTranslation;
}

void Drag_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{
    // Move the rectangle.
    dragTranslation.X += e.Delta.Translation.X;
    dragTranslation.Y += e.Delta.Translation.Y;
} 
```

# .htaccess - 将查询重定向到文件夹

> ID：14022093
> 
> 赞同：1
> 
> 时间：2012-12-24T13:36:30.123
> 
> 标签：.htaccess, mod-rewrite, redirect

我有以下网址：

[http://site.com/consulting/search.php?searchterm59](http://site.com/consulting/search.php?searchterm59)

并希望将其处理为 search.php 但 url 应该是这样的：

[http://site.com/consulting/search/searchterm59](http://site.com/consulting/search/searchterm59)

我也试过这个：

我试过这个

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/constulting/search\.php$
RewriteCond %{QUERY_STRING} ^([0-9]*)$
RewriteRule ^(.*)$ http://site.com/consulting/search/%1 [R=302,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/?$ search.php$1 [L,QSA]
RewriteRule ^/?$ search.php?%1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:26:45.040

用这个替换你的`$DOCUMENT_ROOT/.htaccess`代码：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

# for external redirect to /consulting/search/searchterm59
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(constulting/search)\.php\?([^\s&]+) [NC]
RewriteRule ^ /%1/%2? [R=302,L]

# for internal forward to /consulting/search.php?searchterm59
RewriteRule ^(constulting/search)/(.*)$ /$1.php?$2 [L,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:36:56.260

也许这就是你正在寻找的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  /(.*)/search.*
RewriteRule .*        %1/%{QUERY_STRING}?     [L,R=301] 
```

# android - 使用 Context 获取 LayoutInflater

> ID：14022094
> 
> 赞同：5
> 
> 时间：2012-12-24T13:36:48.890
> 
> 标签：android

这两者有什么区别吗？

1.  `inflater = (LayoutInflater) LayoutInflater.from(context);`
2.  `inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:42:09.010

目前还没有，正如您通过查看[源代码所看到](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/view/LayoutInflater.java)[的`LayoutInflater`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/view/LayoutInflater.java)那样。`from()`将抛出一个`Exception`而不是返回`null`，但除此之外它们是相同的。

就个人而言，我使用的`getLayoutInflater()`次数最多。

# html - 用于游戏 UI 的 Angular JS

> ID：14022097
> 
> 赞同：13
> 
> 时间：2012-12-24T13:37:09.183
> 
> 标签：html, user-interface, angularjs, game-engine, impactjs

我目前正在使用 html5 和 Impact JS 游戏引擎构建一个网页游戏。我想在画布/影响引擎的顶部覆盖 html 组件，并且我正在寻找一些有助于 ui/依赖注入/数据绑定等的框架。

所以我找到了 angular js，很高兴看到这么棒的框架，直到经过几天的研究，我在他们的[开发者指南](http://docs.angularjs.org/guide/overview)中遇到了这个小片段。

“游戏和 GUI 编辑器是非常密集和棘手的 DOM 操作的示例。这些类型的应用程序与 CRUD 应用程序不同，因此不适合 Angular。在这些情况下使用更接近裸机的东西，例如 jQuery可能更合适。”

这有点令人不安，部分原因是我似乎无法找到有关此声明的任何细节。如果我尝试使用 angular 来渲染/循环游戏引擎，那么是的，它可能不会很好，但作为 UI 层肯定应该没问题吗？

有没有人在这方面有经验，我需要做一些棘手的 UI 事情，如果不使用 Angular JS 之类的东西，我相信这需要更长的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:07:50.950

有一个插件可以覆盖 UI 元素

[叠加层](http://www.pointofimpactjs.com/plugins/view/38/overlays-menu-hud-ui-etc "叠加层")

# .net - SAML 工作原理的示例 POC

> ID：14022103
> 
> 赞同：-3
> 
> 时间：2012-12-24T13:37:31.820
> 
> 标签：.net, saml

我是一个新人，谁能给我一些关于 saml 工作原理的 poc 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T13:47:14.533

在询问有关 stackoverflow 的问题之前，请先浏览 Google。

**什么是 SAML：**
SAML 代表“安全断言标记语言”。它是一种基于 XML 的标准，用于在组织之间传递身份信息，用于在 Internet 域之间实现身份验证令牌和其他用户属性的安全传输。

**SAML 工作原理：**
您可以在[此处](http://blogs.softchoice.com/cloud/2012/06/26/saml-explained-exchanging-authentication-and-authorization-data-between-security-domains/)找到有关 SAML 工作的一些信息。

在安全域之间交换身份验证和授权数据：-

> 1.  IdP（身份提供者）和服务提供者之间建立信任关系。本质上，服务提供者拥有 IdP 生成的证书，并且从 IdP 到服务提供者的任何通信都必须使用此证书“签名”。没有证书很难伪造签名。
>     
>     
> 2.  用户使用其凭据登录 IdP。
>     
>     
> 3.  用户选择服务或服务提供商/SaaS 应用程序。
>     
>     
> 4.  IdP 返回 SAML 响应（由 IdP 使用其证书进行数字签名）
>     
>     
> 5.  浏览器获取此 SAML 响应并将其发布给服务提供者。服务提供商确认 SAML 响应已正确签名，如果是，则允许用户访问资源 - 通常是 SaaS 应用程序的欢迎页面。

使用此链接....
[http://searchsoa.techtarget.com/tip/How-SAML-works](http://searchsoa.techtarget.com/tip/How-SAML-works)，
[一个视频](http://www.youtube.com/watch?v=50ogFCF56qE)，
[一个教程](https://www.pingidentity.com/resource-center/SAML-Tutorials-and-Resources.cfm)
浏览上面的视频。该视频提供了有关 SAML 工作的良好信息。

# java - 如何在 Android 4.0+ 中禁用 EditText 视图中的软件键盘并使光标同时可见？

> ID：14022104
> 
> 赞同：1
> 
> 时间：2012-12-24T13:37:34.687
> 
> 标签：java, android, android-keypad

如何在`EditText`视图中禁用软件键盘并同时使其`cursor`可见？

我尝试了 stackoverflow 上的所有示例并得到了两种情况：

**1.键盘隐藏，光标隐藏**

**2.键盘显示，光标显示**

但我需要隐藏键盘和显示光标。怎么做？

我接下来做：

```
dialText.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(dialText.getWindowToken(), 0);

    }
});

dialText.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(dialText.getWindowToken(), 0);
        return false;
    }
}); 
```

并且键盘仍然没有隐藏，当我移动光标时，键盘又出现了。

**此问题仅适用于 Android 4.0+ 版本。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:51:39.057

在活动标签的清单文件中使用它：

```
<activity
        android:name=".ExampleActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" 
        android:windowSoftInputMode="stateHidden">
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:42:04.387

在焦点事件中做这些事情。您已经为 EditText 实现了焦点事件并检查 hasFocus 对象是否为真，然后显示键盘和光标，否则将其隐藏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:49:37.010

使用类的.实现`FocusListener`和隐藏键盘。`InputMethodManager``hideSoftInputFromInputMethod`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-10T19:16:06.847

```
View.OnTouchListener onTouchListener = new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                v.requestFocus();
                return true;
            }
        };

dialText.setOnTouchListener(onTouchListener); 
```

AndroidManifest.xml：

```
<activity    
    ... 
    android:windowSoftInputMode="stateAlwaysHidden"
    ...
</activity> 
```

# php - magento ：所有页面上的不需要的请求

> ID：14022108
> 
> 赞同：0
> 
> 时间：2012-12-24T13:37:56.313
> 
> 标签：php, magento, http-status-code-404

我的 magento（1.7.0.2 版）正在网站上的每个页面上的 /media/catalog/category/ 上发出 http 请求，我想取消该调用（返回 404，而不影响网站，但这是最后一个404 我明白了）。我首先搜索了我的主题，但查询仍然会在启用默认模板的情况下发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:57:10.460

我相信路径 /media/catalog/category/ 通常表明 Magento 正在尝试加载类别图像。您是否通过 CMS 检查过您的类别图片？

编辑：如果失败了，使用 firebug 对代码进行故障排除是个好主意。如果您浏览 HTML 源代码，您可以将鼠标悬停在任何图像标签上，它会显示是否有任何缺失。

# java - Perl 脚本在终端中运行，但在从 Java 程序调用时不运行

> ID：14022114
> 
> 赞同：6
> 
> 时间：2012-12-24T13:38:51.540
> 
> 标签：java, perl, runtime.exec

我正在运行一个用另一个字符串替换字符串的 Perl 脚本：

```
perl -pi.back -e 's/str1/str2/g;' path/to/file1.txt 
```

当我从终端运行此命令时，它会将`str1`给定文件中所有出现的`str2`. 当我从 java 运行它时，它确实访问了该文件，但没有发生替换：

```
Runtime.getRuntime().exec("perl -pi.back -e 's/str1/str2/g;' path/to/file1.txt"); 
```

*   我确定它访问了该文件（该文件似乎在 gedit 中编辑（需要重新加载））。
*   我尝试了 Java`ProcessBuilder`类，但结果相同。
*   当我使用`Runtime.exec()`或`ProcessBuilder`与其他命令（如`gedit newFile.txt`）一起使用时，它们运行良好。
*   具有讽刺意味的是，我从 java 打印了上面的 perl 命令并在终端中粘贴，替换操作完成！
*   使用这些命令不会出现异常或错误。（我使用 try and catch 来确保这一点）。
*   我还在 cmd 中使用了`/usr/bin/perl`代替`perl`来确保 perl cmd 被执行。

那么你认为问题是什么？

编辑：

我通过从 java 中的命令中删除引号解决了这个问题。感谢@ikegami 的帮助。所以工作版本是：

```
perl -pi.back -e s/str1/str2/g; path/to/file1.txt 
```

代替

```
perl -pi.back -e 's/str1/str2/g;' path/to/file1.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T14:27:23.133

`exec`用于`StringTokenizer`解析命令，该命令显然只是在空格上分割。

以以下 shell 命令为例（与您的类似但不同）：

```
perl -pi.back -e 's/a/b/g; s/c/d/g;' path/to/file1.txt 
```

为此，`StringTokenizer`产生以下命令和参数：

*   `perl`（命令）
*   `-pi.back`
*   `-e`
*   `'s/a/b/g;`
*   `s/c/d/g;'`
*   `path/to/file1.txt`

这是完全错误的。命令和参数应该是

*   `perl`（命令）
*   `-pi.back`
*   `-e`
*   `s/a/b/g; s/c/d/g;`（注意没有引号。）
*   `path/to/file1.txt`

您可以将上述内容传递给`exec(String[] cmdarray)`. 或者，如果您没有解析命令的选项，您实际上可以调用一个 shell 来为您解析它，方法是将以下内容传递给`exec(String[] cmdarray)`：

*   `sh`（命令）
*   `-c`
*   `perl -pi.back -e 's/a/b/g; s/c/d/g;' path/to/file1.txt`

# wordpress - wordpress 图库插件不会在线显示图库

> ID：14022115
> 
> 赞同：0
> 
> 时间：2012-12-24T13:38:58.967
> 
> 标签：wordpress, gallery, nextgen-gallery

我已经安装了两个不同的画廊插件（Slideshow Gallery 和 Nextgen-gallery）我需要它们，因为它们以不同的方式显示照片并且我需要它们用于不同的页面。我之前安装了“NextGen-gallery”，它工作正常。比我安装了“幻灯片库”，但是当我将短代码放入页面时，它什么也不显示！一片空白！我尝试在另一个网站上只留下“幻灯片画廊”插件，它确实出现了。

在网站上安装 2 个画廊插件有问题吗？我能做些什么来保持他们两个？提前致谢！

# javascript - 改变类元素的属性

> ID：14022119
> 
> 赞同：2
> 
> 时间：2012-12-24T13:39:24.657
> 
> 标签：javascript, html, css

我正在尝试更改 'img' 类中的 'im' 和 'desc' 类的属性。我将当前元素传递给 javascript 函数 mOver() 和 mDown()。当我将鼠标悬停在图像的边框上时以及它下面的文本应该改变。这是我的代码：

```
<html>
<head>
<style>
.img
    {
    margin:2px;
    border:1px solid #0000ff;
    height:90;
    width:110;
    float:left;
    text-align:center;
    }
.im
    {
    width:110px;
    height:90px;
    display:inline;
    margin:3px;
    border:1px solid #ffffff;
    }
.desc
    {
    text-align:center;
    font-weight:normal;
    width:120px;
    margin:2px;
    }
</style>
<script>
function mOver(a)
    {
    a.style.border="10px solid #0000ff";
    a.getElementByClassName("desc").innerHTML="Click on the image";
    }
function mDown(a)
    {
    a.style.border="1px solid #ffffff";
    a.getElementByClassName("desc").innerHTML="You have clicked already";
    }
</script>
</head>
<body>
<div class="img" onmouseover="mOver(this)" onmouseout="mDown(this)">
    <a target="_blank" href="abc.png">
    <img class="im" src="abc.png"></a>
    <div class="desc">ABC</div>
</div>
<div class="img" onmouseover="mOver(this)" onmouseout="mDown(this)">
    <a target="_ blank" href="def.png">
    <img class="im" src="def.png"></a>
    <div class="desc">DEF</div>
</div>
</body>
</html> 
```

图像下方的文本没有发生应有的变化。我认为这条线有问题

```
a.getElementByClassName("desc").innerHTML="You have clicked already"; 
```

我对javascript比较陌生，所以请让我知道这里出了什么问题。无论如何提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:43:12.163

它应该`getElementsByClassName`带有一个“s”。您还应该标记`innerHTML`要更改的元素的索引。如果要更改第一个元素，请执行以下操作：

```
a.getElementsByClassName("desc")[0].innerHTML = "You have clicked already"; 
```

由于数组是 0 索引的，因此这会更改该方法返回的数组中的第一个元素。

但是，如果您打算更改具有该类名的所有元素，那么您必须循环：

```
var elements = a.getElementsByClassName("desc");

for (var i = elements.length; i--;) {
    elements[i].innerHTML = "You have clicked already";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:44:21.303

您尝试使用的方法被调用`getElementsByClassName`（它期望找到多个元素而不是`getElementById`）并返回一个节点列表。因此，您的行应为：

```
a.getElementsByClassName("desc")[0].innerHTML="You have clicked already"; 
```

有关文档，请阅读**[MDN on NodeLists](https://developer.mozilla.org/en-US/docs/DOM/NodeList)**

# asp.net - 在 WebSocketContext 中正确处理 WebSocket

> ID：14022120
> 
> 赞同：4
> 
> 时间：2012-12-24T13:39:35.770
> 
> 标签：asp.net, websocket, dispose

在 ASP.NET 中，当您提供给[HttpContext.AcceptWebSocketRequest](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.acceptwebsocketrequest.aspx)的处理程序获得一个[AspNetWebSocketContext](http://msdn.microsoft.com/en-us/library/system.web.websockets.aspnetwebsocketcontext.aspx)时，您是否应该在完成后处理上下文的[WebSocket](http://msdn.microsoft.com/en-us/library/system.web.websockets.aspnetwebsocketcontext.aspx)？[还是在您调用WebSocket.CloseAsync](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket.closeasync.aspx)之后，Web 套接字是否会自动处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:30:26.767

您不应该处置 Web 套接字。事实上你不能。[AspNetWebSocket.Dispose](https://msdn.microsoft.com/en-us/library/system.web.websockets.aspnetwebsocket.dispose.aspx)总是抛出一个`NotSupportedException`. MSDN 文档的摘要和异常部分不正确。幸运的是，备注部分很有帮助：

> ASP.NET 自动调用 AspNetWebSocket 对象上的 Dispose 方法，以释放代码执行完成后剩余的任何资源。

# java - 获取 getDeclaredMethods() 以匹配可变参数方法

> ID：14022125
> 
> 赞同：2
> 
> 时间：2012-12-24T13:39:49.617
> 
> 标签：java, reflection, variadic-functions

我想`getDeclaredMethod()`用这个签名找到一个方法：

```
public void foo(String inArg1, Object... inArgs); 
```

使用此调用：

```
Class<?>[] argClasses = { String.class, Integer.class };
Method m = clazz.getDeclaredMethod("foo", argClasses); 
```

但它会产生一个`NoSuchMethodException`异常。但是，可以调用该方法（假设您以其他方式找到它）：

```
Object[] args = { "arg1", new Integer(2) };
m.invoke(instance, args); 
```

我可以用 将它们全部列出`getDeclaredMethods()`，然后尝试匹配自己的签名，但这似乎需要做很多工作。

我想做的事情应该是可能的吗？我只是错过了一些愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T13:44:07.470

可变参数参数只是数组的语法糖。该方法的签名是

```
foo(String, Object[]); 
```

并不是

```
foo(String, Integer); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T14:00:02.693

找到 foo 方法的唯一合法方法是

```
Class<?>[] argClasses = { String.class, Object[].class };
Method m = clazz.getDeclaredMethod("foo", argClasses); 
```

至于

```
Object[] args = { "arg1", new Integer(2) };
m.invoke(instance, args); 
```

这是很合法的，就像调用 foo 没有反射一样

```
foo("str", new Integer(2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T13:46:17.677

您应该将`varargs`其视为一个数组：

```
Class<?>[] argClasses = { String.class, Object[].class };
Method m = clazz.getDeclaredMethod("foo", argClasses); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T14:08:41.337

该方法可以被任何对象*调用，因为它被**声明*为接受对象。- 但是，因为它是用类型*声明*的，如果你不搜索确切的*声明*`Object`类型，你将找不到 via 。`getDeclaredMethod()`

 *但是，您应该能够遍历所有声明的方法并检查它们的[参数类型](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Method.html#getParameterTypes%28%29)以查看它们是否可以[从](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)您的给定类型分配，以找到所有可使用您的参数*调用的方法。*

例子：

```
Class[] signature = {String.class, Integer.class};
Method[] methods = someClass.getDeclaredMethods();

for ( Method m : methods ) {
  Class[] params = m.getParameterTypes();
  if ( params.length == signature.length ) {
    int i;
    for ( i = 0; i < signature.length && params[i].isAssignableFrom( signature[i] ); i++ ) {

    }
    if ( i == signature.length ) {
      System.out.println("Found matching method: " + m.getName());
    }
  }
} 
```

但是，我还没有检查`Object...`实际上*可以*分配哪些类型。我认为不是`Integer`，而是`Integer[]`因为可变参数被编译为数组。*

# android - Webview保存密码轮换问题

> ID：14022126
> 
> 赞同：5
> 
> 时间：2012-12-24T13:39:57.190
> 
> 标签：android, webview, android-webview

我的`WebView`里面有一个`DialogFragment`显示登录页面，用户输入用户名和密码后，提示保存密码，但是如果用户在那一刻旋转手机，`WebView`会崩溃，提示将隐藏给用户，因此无法重新输入/重写数据，`WebView`在这些功能中被禁用，并且在配置更改后仍然存在的这种特殊情况下`DialogFragment`，用户将无法提交数据，即使我再次更改配置，以及另一个问题是，在我重建所有内容之前，内部操作系统不再恢复，例如，我离开了`WebView`，当我重新创建它时，直到配置再次更改，键盘才会出现。

崩溃日志如下：

```
12-24 08:36:21.694: E/WindowManager(21235): Activity com.example.twitterlibraryservice.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@45aef418 that was originally added here
12-24 08:36:21.694: E/WindowManager(21235): android.view.WindowLeaked: Activity com.example.twitterlibraryservice.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@45aef418 that was originally added here
12-24 08:36:21.694: E/WindowManager(21235):     at android.view.ViewRoot.<init>(ViewRoot.java:255)
12-24 08:36:21.694: E/WindowManager(21235):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
12-24 08:36:21.694: E/WindowManager(21235):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
12-24 08:36:21.694: E/WindowManager(21235):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
12-24 08:36:21.694: E/WindowManager(21235):     at android.app.Dialog.show(Dialog.java:241)
12-24 08:36:21.694: E/WindowManager(21235):     at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
12-24 08:36:21.694: E/WindowManager(21235):     at android.webkit.WebView.onSavePassword(WebView.java:1065)
12-24 08:36:21.694: E/WindowManager(21235):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:431)
12-24 08:36:21.694: E/WindowManager(21235):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 08:36:21.694: E/WindowManager(21235):     at android.os.Looper.loop(Looper.java:143)
12-24 08:36:21.694: E/WindowManager(21235):     at android.app.ActivityThread.main(ActivityThread.java:4717)
12-24 08:36:21.694: E/WindowManager(21235):     at java.lang.reflect.Method.invokeNative(Native Method)
12-24 08:36:21.694: E/WindowManager(21235):     at java.lang.reflect.Method.invoke(Method.java:521)
12-24 08:36:21.694: E/WindowManager(21235):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-24 08:36:21.694: E/WindowManager(21235):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-24 08:36:21.694: E/WindowManager(21235):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑更正了`WebView`创建后要求焦点的键盘问题。

```
mWebView.requestFocus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:50:01.677

我猜你的 Activiy 不处理方向变化。因此，Android 操作系统正在扼杀您的 Activity 并创建一个具有新方向的新 Activity。

您可以尝试在 Activity 中调用`dimiss`DialogFragment 的方法`onPause`。

这可能会解决您的泄漏问题，但行为可能不是您所期望的。

# .net - C++ /CLI 自动包装器生成器

> ID：14022131
> 
> 赞同：12
> 
> 时间：2012-12-24T13:40:26.207
> 
> 标签：.net, interop, c++-cli

在我们的项目中，我们有大量的本机 C++ 代码，我们希望从用 .Net 编写的全新 UI 层重用这些代码。

我想使用 C++/CLI 来解决这个问题，并且我已经看到有一种非常直接且相当技术性的方法可以通过使用瘦托管类包装本机类来做到这一点。我希望能够找到一种工具来自动完成这项任务，因为在我看来，这确实是一个技术问题，没有很多必需的“人”思维。

有这样的工具为此使用显式 p/invoke - 请参阅[http://www.swig.org/Doc1.3/CSharp.html](http://www.swig.org/Doc1.3/CSharp.html)。问题是显式 p/invoke 更麻烦，性能效率更低。

有没有人熟悉这种工具？

此类工具尚不可用是否有内在原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T02:50:45.100

p/invoke 效率较低的原因是因为它必须是任何函数的非常通用的接口，只知道签名。您假设的包装器生成器不会表现得更好。

另一方面，编写自定义包装器类的开发人员有更多关于一起使用的函数的信息等等，因此可以避免许多缓慢和不必要的转换，例如通过将值直接存储在包装器内部而不是将它们转换为一些对 .NET 友好的格式。

所以并不是说这样的工具是不可能的，它几乎没有好处。如果您关心性能，则可以编写自己的包装器，并带有生命周期管理智能指针等。

当然，p/invoke 只提供对裸函数的访问。这就是 SWiG 应该提供帮助的地方，它可以通过裸导出函数公开任何 C++ 类接口。

我确实找到了一个可能是您正在寻找的工具的线索，尽管它听起来很狭窄：

*   [http://www.ogre3d.org/addonforums/viewtopic.php?f=8&t=4071](http://www.ogre3d.org/addonforums/viewtopic.php?f=8&t=4071)
*   示例输出：[http ://extramegablob.googlecode.com/svn/trunk/MOIS/MOIS/include/auto/MOISEffect.h](http://extramegablob.googlecode.com/svn/trunk/MOIS/MOIS/include/auto/MOISEffect.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:28:45.770

显式 p/invoke 不一定是坏事。这真的取决于。以下链接包含您可能有兴趣阅读的其他信息。正如他们在具体示例中所经历的那样，具有抑制安全性的 P/Invoke 比调用本机 DLL 的任何其他方法（包括 C++/CLI）都更快。

[http://rogue-modron.blogspot.com/2011/11/invoking-native.html](http://rogue-modron.blogspot.com/2011/11/invoking-native.html)

[http://ybeernet.blogspot.com/2011/03/techniques-of-calling-unmanaged-code.html](http://ybeernet.blogspot.com/2011/03/techniques-of-calling-unmanaged-code.html)

我们有一个您可能有兴趣使用的工具。它是 C++ DLL 的 C# 包装器生成器。仅支持 VS 编译的 C++ DLL。

使用该工具，您可以直接从 DLL 文件和 C++ 头文件生成 C# 包装库。它会生成一个包含所有 C# 类文件的 Visual Studio 项目。支持所有标准的 c++ 类、模板类、您自己的类。您不必编写一行代码。

请阅读以下链接中的详细信息。

[C#/.NET PInvoke 互操作 SDK](http://www.xinterop.com/index.php/2013/04/13/introduction-to-c-pinvoke-interop-sdk)

（我是该工具的作者）

# twitter-bootstrap - 在 twitter bootstrap 中，导航栏和导航药丸有什么区别？

> ID：14022135
> 
> 赞同：20
> 
> 时间：2012-12-24T13:41:15.640
> 
> 标签：twitter-bootstrap

我正在浏览 twitter bootstrap 的组件，我发现导航组件有两个单独的部分，一个是 Navbar，另一个是 Nav-pills/tabs 等。

Navbar 似乎与 nav-pills 非常相似，任何人都可以强调它们之间的区别以及何时使用它们中的任何一个，因为文档对此并不十分清楚。

**导航栏：**

> “首先，导航栏是静态的（不固定在顶部），包括对项目名称和基本导航的支持。将导航栏放在 .container 中的任何位置，它可以设置站点和内容的宽度”

![导航栏](../Images/78518aee88187972a03f0fb8ffcf1049.png)

**导航药片：**

![导航药丸](../Images/46011f1ef605852156d463a638cea9fa.png)

取自[引导文档](http://twitter.github.com/bootstrap/components.html)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-24T13:49:02.490

导航栏旨在对您网站的所有页面通用（“支持项目名称”是指向主页的链接），而导航药丸可能是特定于页面或部分的导航栏。

基本上，导航栏是独一无二的，它提供指向您网站主要部分的链接。导航丸可能会提供指向您的页面锚点的内部链接......

但这仍然是您的决定，具体取决于您对菜单渲染的偏好。

# asp.net - 带有 asp.net registeruser 控件的下拉列表

> ID：14022145
> 
> 赞同：1
> 
> 时间：2012-12-24T13:42:12.583
> 
> 标签：asp.net, drop-down-menu

我在我的 registeruser 代码中添加了一个下拉列表，以便我可以从我们的数据库中随机加载安全问题。

这是该代码；

```
<asp:CreateUserWizard ID="RegisterUser" runat="server" EnableViewState="false"
                      CancelDestinationPageUrl="RegistrationFailed.aspx" DisableCreatedUser="true"
                      ContinueDestinationPageUrl="Login.aspx" LoginCreatedUser="false">
    <LayoutTemplate>
        <asp:PlaceHolder ID="wizardStepPlaceholder" runat="server"></asp:PlaceHolder>
        <asp:PlaceHolder ID="navigationPlaceholder" runat="server"></asp:PlaceHolder>
    </LayoutTemplate>
    <WizardSteps>
        <asp:CreateUserWizardStep ID="RegisterUserWizardStep" runat="server">
            <ContentTemplate>
                <span class="failureNotification">
                    <asp:Literal ID="ErrorMessage" runat="server"></asp:Literal>
                </span>
                <asp:ValidationSummary ID="RegisterUserValidationSummary" runat="server" CssClass="failureNotification" 
                     ValidationGroup="RegisterUserValidationGroup"/>
                <div class="accountInfo">
                    <fieldset class="register">
                        <legend>Account Information</legend>
                        'All other fields removed for brevity
                        <p>
                            <asp:Label ID="QuestionLabel" runat="server" AssociatedControlID="Question">Select Security Question:</asp:Label>
                            <asp:DropDownList ID="Question" runat="server">
                            </asp:DropDownList><br />
                            <i style="font-size: .7em;">If you forget your password you will be asked the security question you choose here and prompted to enter the answer you specify below.</i>
                            <asp:RequiredFieldValidator ID="rfvSecurityQuestion" runat="server" ControlToValidate="Question" 
                                 CssClass="failureNotification" ErrorMessage="&laquo; [Required]" ToolTip="A security question is required." 
                                 ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>     
                        </p>
                         <p>
                            <asp:Label ID="Answerlabel" runat="server" AssociatedControlID="Answer">Security Answer:</asp:Label>
                            <asp:TextBox ID="Answer" runat="server" CssClass="textEntry"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="AnswerRequired" runat="server" ControlToValidate="Answer" 
                                 CssClass="failureNotification" ErrorMessage="&laquo; [Required]" ToolTip="Security answer is required." 
                                 ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                        </p>
                    </fieldset>
                    <p class="submitButton">
                        <asp:Button ID="CreateUserButton" runat="server" CommandName="MoveNext" Text="Create User" 
                             ValidationGroup="RegisterUserValidationGroup" CssClass="buttons" />
                    </p>
                </div>
            </ContentTemplate>
            <CustomNavigationTemplate>
            </CustomNavigationTemplate>
        </asp:CreateUserWizardStep>
    </WizardSteps>
</asp:CreateUserWizard> 
```

我正在尝试在后面的代码中将项目添加到该下拉列表中。智能感知没有看到任何带有问题 ID 的控件，但找到了 RegisterUser.Question，但我无法向其中添加列表项。

```
 Protected Sub Page_PreLoad(sender As Object, e As EventArgs) Handles Me.PreLoad

        Dim ddl As DropDownList = TryCast(FindControl(RegisterUser.Question), DropDownList)
        'If ddl Is Nothing Then MsgBox("nothing") ' for testing if ddl is found
        'Dim itemlist As New List(Of String)
        'itemlist = GetSecurityQuestionsforDDL()
        'For Each item As String In itemlist
        ddl.Items.Add(New ListItem("did this get added?"))
        'Next

End Sub 
```

页面加载，但下拉列表中没有问题。如何找到下拉控件以向其中添加列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:59:59.423

我不喜欢这个，因为它看起来很乱。以下是C#。您可以轻松地重写为 VB。我做了一个测试，成功找到了下拉列表。

```
DropDownList oDDL =
    (DropDownList)RegisterUser.FindControl("CreateUserStepContainer$Question"); 
```

从这里获得基本代码： [http ://romsteady.blogspot.com/2007/08/howto-find-controls-in-wizard.html](http://romsteady.blogspot.com/2007/08/howto-find-controls-in-wizard.html)

# mysql - 通过最新记录获得不同的结果

> ID：14022146
> 
> 赞同：1
> 
> 时间：2012-12-24T13:42:13.090
> 
> 标签：mysql

我的数据库中有以下内容`table`。

![在此处输入图像描述](../Images/acb97af6f13713121516943005035de1.png)

我正在尝试编写一个查询，该查询返回上表中的一些行。

返回名单：

1.  不应包含的重复项`Currency2_Id`
2.  如果发现有重复`Currency2_Id`，则返回最新记录

    对于上表中的示例，有两条记录具有`Currency2_Id = 7`. 这两个的最新记录是有的记录`Date = 2012-12-28`。
    所以我的最终结果应该是这样的。

![在此处输入图像描述](../Images/47477a6cd86392dfc5167d7a29d02ec0.png)

这是我尝试过的查询。

```
SELECT Id, Currency1_Id, Rate, Currency2_Id, Date 
FROM currency_ex_rate_txn
GROUP BY Currency2_Id
ORDER BY Date DESC 
```

但是我得到的结果集包含带有 and 的记录，`Currency2_Id = 7`而`Date = 2012-12-25`不是带有 and 的`Currency2_Id = 7`记录`Date = 2012-12-28`。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:44:34.890

尝试这个：

```
SELECT 
  c1.Id, 
  c1.Currency1_Id, 
  c1.Rate, 
  c1.Currency2_Id, 
  c1.`Date`
FROM currency_ex_rate_txn c1
INNER JOIN
(
    SELECT Currency2_Id, MAX(`date`) LatestDate
    FROM currency_ex_rate_txn
    GROUP BY Currency2_Id
) c2  ON c1.Currency2_Id = c2.Currency2_Id
     AND c1.`date`       = c2.LatestDAte
ORDER BY c1.`Date` DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:47:00.553

```
 SELECT Id, Currency1_Id, Rate, Currency2_Id, Date   
      FROM currency_ex_rate_txn c1 
             where Date = (select max(Date) from currency_ex_rate_txn c2 
                           where c2.Currency1_Id = c1.Currency1_Id); 
```

顺便说一句 - 使用保留字作为列名不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:46:03.803

希望这能解决你的问题
`SELECT Id, Currency1_Id, Rate, Currency2_Id, DATE FROM currency_ex_rate_txn WHERE Id IN (SELECT MAX(ID) FROM currency_ex_rate_txn GROUP BY Currency1_Id)`

# domain-driven-design - 使用 DDD 的可扩展性：使用 MEF 的 DDD 中的模块与有界上下文

> ID：14022147
> 
> 赞同：28
> 
> 时间：2012-12-24T13:42:20.190
> 
> 标签：domain-driven-design

Eric 在他的书中很少涉及**模块的主题。**他也没有通过示例讨论模块结构与有界上下文的关系。限界上下文是否包含模块或模块包含限界上下文？当应用程序具有 DDD 时，它的可扩展性有多容易？

在我们设计可扩展应用程序时，应用程序的结构非常重要。Microsoft MEF 框架可以从 dll 中自动发现模块/组件。

让我们举个例子。在电子商务应用程序中，我们可以有一个用于**支付处理**的有界上下文。支付处理可以是抽象的，因此我可以稍后使用更多支付处理器（如 Paypal 或 Payflow）扩展应用程序。目前我只有Paypal，几个月后我想整合Payflow。要集成 Payflow，我可以有一个实现**Payment Processing**接口的程序集（一个 dll） 。我可以将该 dll 放到应用程序中，MEF 会自动发现它。

这里的挑战是，为 PayFlow 支付处理创建的 dll 是一个模块，而不是有界上下文 (BC)。如果我将其创建为 BC，我们有两个 BC 用于**Payment Processing**。（为 Paypal 创建的 BC 和为 Payflow 创建的 BC）。如果我们使用限界上下文中的模块和限界上下文作为程序集 (dll) 构建应用程序，则模块可以作为文件夹而不是程序集驻留在 BC 中（您可以将其视为在 Visual Studio 中创建的 C# 库）。

我们如何使用 DDD 处理这个可扩展性问题？**Payment Processing** ，一个 BC和它下面的不同文件夹作为模块，一个用于 Paypal 等......还是我们需要在另一个 BC 中的 sub-BC？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-24T17:12:22.313

> Eric 在他的书中很少涉及模块的主题。他也没有通过示例讨论模块结构与有界上下文的关系。

是的，我同意模块和 BC 结构在书中没有得到足够的覆盖。我推荐[Vaughn Vernon 的 Implementation Domain-Driven Design](http://my.safaribooksonline.com/book/project-management/9780133039900)了解更多信息。

> 限界上下文是否包含模块或模块包含限界上下文？

BC 包含模块。模块就像一个轻量级的 BC，也属于泛在语言。

> 当应用程序具有 DDD 时，它的可扩展性有多容易？

这取决于你如何构建它。DDD 本身不会妨碍可扩展性。

> 付款处理，一个 BC 和它下面的不同文件夹作为模块，一个用于 Paypal 等......还是我们需要另一个 BC 中的子 BC？

我会将每个支付处理器集成建模为单个支付处理 BC 中的一个模块。此外，每个集成都是您的支付处理模型和第三方（例如 PayPal）之间的[ACL 。](http://www.markhneedham.com/blog/2009/07/07/domain-driven-design-anti-corruption-layer/)

> 还是我们需要在另一个 BC 中使用 sub-BC？

不，但这涉及到一个有趣的 sub-BC 概念。我不认为 sub-BC 是一个好主意，因为我认为分层组织可能会导致僵化的设计（例如，查看具有显式类型层次结构的 OOP - 可能会出现问题）。相反，选择具有更多 BC 的更扁平模型。此外，在您的情况下，可以使用模块来实现所需的结构。

# ruby - 通过 RVM 安装 Ruby 配置失败

> ID：14022151
> 
> 赞同：-8
> 
> 时间：2012-12-24T13:42:32.990
> 
> 标签：ruby, osx-lion, rvm

我正在尝试通过运行通过 RVM 安装 Ruby，`rvm install 1.9.3`但遇到了一堆错误：

> 运行出错`env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/kuzjaved/.rvm/usr`，请阅读`/Users/kuzjaved/.rvm/log/ruby-1.9.3-p327/yaml/configure.log`
> 
> 运行出错`make`，请阅读`/Users/kuzjaved/.rvm/log/ruby-1.9.3-p327/yaml/make.log`
> 
> 运行出错`env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/kuzjaved/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/kuzjaved/.rvm/usr`，请阅读`/Users/kuzjaved/.rvm/log/ruby-1.9.3-p327/configure.log`
> 
> 运行时出现错误`configure`。停止安装。

然后我尝试了：

```
rvm install 1.9.3 --with-gcc=clang 
```

这里也有同样的错误！发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:03:01.320

如果您想让整个过程更简单，请从[http://railsinstaller.org/](http://railsinstaller.org/)下载适用于 OSX 的**RailsInstaller**

它与完整 Rails 堆栈所需的所有常用包捆绑在一起；通用导轨安装涵盖了所有依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:45:41.357

获得[自制](http://mxcl.github.com/homebrew/)。然后

```
brew install ruby 
```

确保已安装 Xcode，以及所有命令行插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T15:38:42.830

RVM 不是唯一的 Ruby 版本管理器。还有很多其他的，看[这里](https://www.ruby-toolbox.com/categories/ruby_version_management)。还有[chruby](https://github.com/postmodern/chruby)，它不在该列表中。

要卸载 RVM，请运行`rvm implode`并重新启动终端。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T01:48:35.550

RVM 带有一个命令，它描述了您对 ruby​​ 的需求：

```
rvm requirements 
```

它应该在第一次安装 ruby​​ 时显示给您，但是如果您错过了它，您可以随时再次阅读它。

您发布的输出还包括其他日志文件的路径，您没有显示它们 - 我想有一些线索可以显示出什么是错误的。

最后我在这里为 RVM 用户提供在线支持：[http ://webchat.freenode.net/?channels=rvm](http://webchat.freenode.net/?channels=rvm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T06:55:56.813

```
$ rvm requirement
Unrecognized command line argument: 'requirement' ( see: 'rvm usage' ) 
```

我在 mpapis 答案中替换`rvm requirement`为的编辑`rvm requirements`已被迅速拒绝。我很抱歉不得不坚持。我正在使用最新版本`rvm 1.16.6`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T14:57:21.753

也许你可以尝试`rbenv`（在你应该摆脱 rvm 之前，启动命令`rvm implode`并从 ~/.bash_profile、~/.profile 或 ~/.bashrc 中删除 rvm 设置：

获取[Homebrew](http://mxcl.github.com/homebrew/)并启动以下命令：

```
brew install rbenv 
brew install ruby-build
echo 'eval "$(rbenv init -)"' >> ~/.bashrc 
```

从终端退出并重新打开它。然后你可以安装一个红宝石

```
rbenv install 1.9.3-p327 
```

或您喜欢的红宝石，从`rbenv install --list`

# objective-c - 尝试使用子视图中的按钮关闭presentingViewController

> ID：14022153
> 
> 赞同：0
> 
> 时间：2012-12-24T13:42:34.907
> 
> 标签：objective-c, ios, ipad

基本上我有两个xib，第一个是main `xib`，它包含一个触发`IBAction`调用的按钮：

```
UIViewController *overlaywindow = [[UIViewController alloc] initWithNibName:@"NewInvenView" bundle:nil];
overlaywindow.modalPresentationStyle = UIModalPresentationFormSheet;
overlaywindow.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentViewController:overlaywindow animated:YES completion:nil]; 
```

这会产生我想要的结果。

但是，在`NewInvenView.xib`我试图创建一个将自行关闭（并关闭 PresentingView）的按钮。我将按钮与 NewInvenViewController.h 链接并在 NewInvenViewController.m 中实现该方法。但是当我运行它时，它不起作用。

每当触发按钮时，都会调用该函数，但出现错误：

> 2012-12-24 20:33:50.984 Dokodemo [1467:907] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIViewController filterstock:]：无法识别的选择器发送到实例 0x21033990”...

我认为同样重要的是要注意，无论函数实现内部是什么，我都会收到错误。即使函数什么都不做

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:56:45.003

如果你用 navigationController 做翻转动画，那会很容易。

```
 -(void)goToNextView:(id)sender{

          NextView *info3 = [[NextView alloc]initWithNibName:@"NextView" bundle:nil];
            UINavigationController * nvc = [[UINavigationController alloc] initWithRootViewController:info3];

            info3.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            [self.navigationController presentModalViewController:nvc animated:YES];

        } 
```

// 如果您使用最新版本的 iOS 只需更改以下内容

`[self.navigationController presentViewController:nvc animated:YES completion:nil];`

在您的第二个视图控制器中，您可以使用它来关闭。

```
-(IBAction)goToPrevious:(id)sender

{

[self.navigationController dismissModalViewControllerAnimated:YES];

// For latest Version

// [self.navigationController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:04:31.397

我认为问题与 nib 文件有关。如果您检查错误消息，它会显示`-[UIViewController filterstock:]:`，这意味着该消息被发送到`UIViewController`not的对象`NewInvenViewController`。

确保从检查器窗格中的 nib 文件正确设置类。

# hbase - 用 Pig 连接 Hbase 表

> ID：14022155
> 
> 赞同：1
> 
> 时间：2012-12-24T13:42:54.113
> 
> 标签：hbase, apache-pig, emr

我正在尝试在 Amazon EMR 上使用 Pig 来加入两个 HBase 表。

```
Z = join Y by pid, X by id 
```

在我运行上面的代码后，它会抛出以下异常：

```
java.lang.IllegalArgumentException: This file system object (hdfs://10.116.57.150:9000) does not support access to the request path 'hbase://player_derived' You possibly called FileSystem.get(conf) when you should have called FileSystem.get(uri, conf) to obtain a file system supporting your path. 
```

有什么想法是错误的以及如何解决它？

# algorithm - 图的关键点：以最小点数和权重到达所有节点

> ID：14022156
> 
> 赞同：3
> 
> 时间：2012-12-24T13:43:10.370
> 
> 标签：algorithm, data-structures, graph

这是数据结构和算法课程的一个问题，所以我不是在寻找一个具体或完整的答案，但希望能帮助我看看我是否走在正确的轨道上（或者那些可以指出我正确的提示）追踪）

给定一个位置的无向图，其中节点是位置，道路是边（加权通过某条道路所需的时间），找到可以以最大权重到达所有节点的最小点数* 5\. *点是图表上的任何点。它们可以在边缘或节点上。从现在开始，我将它们称为临界点。

例如，如果我们有这个图表：

节点1->节点3（权重1）->节点2（权重7）

node2->node1(权重 7)->node4(w 1)->node7(w 8)

节点3->节点1(1)->节点4(2)->节点5(2)->节点6(2)

节点4->节点2(1)->节点3(2)->节点5(2)

节点5->节点3(2)->节点4(2)->节点7(3)

节点6->节点3(2)->节点7(5)

节点7->节点6(5)->节点5(3)->节点2(8)

那么关键点是：一个在节点 1 和 2 之间的边缘，节点 1 的权重为 2，节点 2 的权重为 5（注意它们的总和必须仍然等于 7，即节点 1 到 2 的原始权重)，第二个在节点 7 上。第一个临界点可以到达节点 1 到 6，最大权重为 5。只有节点 7 在权重 5 上无法到达，因此第二个临界点在节点 7 本身上。因此，从这两个权重为 5（或更少）的关键点可以到达整个图。

我的想法：为每个鼻子保留一个布尔“完成”，表明它可以或不能从已经找到的关键点之一到达。从某个节点开始。使用 BFS 并遍历图。在未完成的节点上，执行以下操作：

检查节点的邻接列表。忽略权重大于 10 的边，因为您无法放置到达您所在节点的临界点以及这些边所通向的节点。忽略通向“完成”节点的边。如果没有剩余边，则将与当前节点位置相同的临界点添加到临界点列表中。否则，检查剩余的最大权重边，并在该边上创建一个临界点：临界点的 2 个选项。从 curr_node 到 critical_point=5，从 critical_node 到相邻节点（边缘通向的节点）的权重是 edgeWeight-5，或者：从 crtical_point 到相邻节点的权重是 5，从 curr_node 到 critical_point 的权重是 edgeWeight-5。尝试两者并检查哪个关键点可以到达权重为 5 的更多节点。使用具有更多可到达节点的节点并将这些节点标记为已完成。

这里的问题是有效性证明。每个临界点有不止 2 个选项（当使用最大的权重边缘时），我只考虑 2 个。但另一方面，如果我考虑更多，我们会遇到复杂性问题，并且算法已经不是太优化。此外，我们可能需要在节点周围的边缘上放置多个临界点。该算法只放置一个或不放置并继续前进，因为我假设放置多个可能会放置比需要更多的点。

所以基本上，我不太确定从这里去哪里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:49:19.890

*以下内容来自我的头顶，欢迎您在推理中找到漏洞。*

看起来你手头有设置封面问题。即，给定集合覆盖问题的一个实例，可以构建您的问题的一个实例，这样解决后者也将解决前者。当然，集合覆盖问题是NP完全的。

这里是减少。给定一个全集 U 和它的某个子集的集合 S，它覆盖了所有的 U，构建一个S 的*最小子*集，它仍然覆盖了所有的 U。

我们如下构建图 G。U 的每个元素 u 是一个红色顶点。S 的每个元素 s 是一个蓝色顶点。如果 u \in s，我们用长度为 5 的边连接对应的顶点。如果 S 的两个元素 s_i 和 s_j 相交，我们用长度为 5 的边连接对应的顶点。没有其他边。

假设我们已经确定了 G 中的一组关键点 Q。如果 Q 中有任何非蓝色点，则将其删除并替换为最近的蓝色顶点（如果有多个，则替换为任意一个）。*可达顶点集不会变小。*因此，对于任何最小临界集，我们都可以构建一个只有蓝色的最小临界集，而只有蓝色的临界集是 U 的精确集覆盖。

# java - jconsole 和 jstat 输出的区别

> ID：14022162
> 
> 赞同：0
> 
> 时间：2012-12-24T13:43:38.997
> 
> 标签：java, jakarta-ee, memory-management

我在特定时间观察到 jstate 和 jconsole 的不同输出。

**Jstat输出：**

2012 年 12 月 24 日星期一 09:52:28 PM JST

时间戳 S0 S1 E **O** P YGC YGCT FGC FGCT GCT

938.9 91.19 69.22 **100.00** 99.98 66.60 153 20.799 6 2.271 23.070

**jConsole 输出：**

![在此处输入图像描述](../Images/bfa9df65d65efa27702aee287fe047c3.png)

在特定时间 jstat 显示**O**是 100 % 但 jconsole 不是。我不知道为什么？

任何人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T08:51:02.687

jstat的输出是Old Par中的GC。当Old Par'gc不能正常工作时，All Heap GC(Full gc)工作。Jconsole的输出是后者。这个网址也许可以解释 [http://javabook.compuware.com/content/memory/analyzing-java-memory.aspx](http://javabook.compuware.com/content/memory/analyzing-java-memory.aspx)

# python - 当您使用 py2exe 将其转换为 .exe 时，python 脚本是否更快？

> ID：14022166
> 
> 赞同：2
> 
> 时间：2012-12-24T13:43:58.253
> 
> 标签：python, windows-xp, py2exe, python-2.5

我真的不擅长编译程序，我只想知道如果我使用 py2exe 将其转换为 .exe，我的 python 2.5 程序是否会更快。如果它最终会变慢，我不想花很多时间尝试编译它。我的程序使用 OpenCV 和 PyAudio，但我认为这是它使用的唯一非纯 python 模块。谢谢！

注意：我认为这个问题不需要代码片段，但如果需要，请在评论中说明。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T13:51:52.087

不，不是。由于它只是一个包装器，它提供了运行代码所需的必要文件。使用 Cython 可以使您的程序运行得更快，因为它能够使用 C 编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:37:06.353

如果你想让你的程序更快，你首先要衡量它**为什么**慢。这意味着找出程序将时间花在*哪里。*为此使用可用的[分析器](http://docs.python.org/2/library/profile.html)之一。从链接的示例中可以看出，这并不难。

如果您知道程序将大部分时间花在哪里，您可以决定优化是否值得甚至可能。例如，如果您的程序已经使您的网络连接饱和，那么修补程序不会使其更快。

如果您将程序中最慢的代码添加到您的问题中，也许我们可以帮助您改进它。通常可以通过改进您使用*的算法来获得巨大的收益。*例如，如果您的代码对一长串数据进行相同的计算，通常很容易使用[multiprocessing.Pool](http://docs.python.org/2/library/multiprocessing.html)使其更快。如果你有一个 N 核 CPU，[`Pool.map()`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)它可以比普通的`map()`.

如果这还不够，可以在[pypy](http://pypy.org/)实现上运行很多标准的 Python 代码，这通常比 cpython 实现[更快](http://speed.pypy.org/)。

除了已经提到的 cython，您还可以使用用 C 编写的现有扩展，例如[numpy](http://www.numpy.org/)进行数值计算。当然，另一种选择是用 C 编写一个专门构建的扩展。

您的操作系统也很重要。[似乎](https://stackoverflow.com/questions/1842798/python-performance-on-windows)XP 上的 python 在文件访问上比在 Linux 上慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T18:03:54.527

我在 Windows Python 上工作了 2 个月，我必须说我不是很开心。如果你有任何 C 模块（除了标准库），你会遇到很大的问题来让它工作。

**速度和Linux差不多，但似乎慢了一点。** 请注意，py2exe 不是最好的。我遇到了 py2exe 问题，不得不使用 pyinstaller。它有一个更好的调试，它在 py2exe 没有的情况下工作

我最大的失望是 exe 大小，我有一个使用 lxml、suds 的简单程序，它有 7-8mb 大...

# javascript - 如何手动通过 Youtube API 发送消息？

> ID：14022170
> 
> 赞同：2
> 
> 时间：2012-12-24T13:44:19.407
> 
> 标签：javascript, variables, youtube-api, message

好的，这就是我想要做的，我想通过 Youtube 手动发送一条消息，使用 javascript。我试图找到在 Youtube API 中发送消息的最后一行代码，然后自己能够执行该代码。

我不想只输入

```
inbox.sendMessage(); 
```

进入 JavaScript 控制台。

以下是我目前所知道的：

处理消息的外部 js 文件：http: [//s.ytimg.com/yts/jsbin/www-inbox-vflCOzV-o.js](http://s.ytimg.com/yts/jsbin/www-inbox-vflCOzV-o.js)

开始发送消息的函数是

```
inbox.sendMessage(); 
```

当 this 被调用时，一个应用于变量 m.va 的函数被调用。该函数有 2 个重要部分： 收集消息输入值的部分：

```
var b=H("compose_message").value; 
```

（H是一个基本上相当于document.getElementById的函数）

第二个重要部分是函数发送编译信息时：

```
W(this,a,"send_message",h) 
```

上述函数编译 a 中的信息（主题、消息、附件等）并通过 .push 将它们发送到引用为 this.st 的数组中（调用 this.stpush(f)，f是编译的信息）。

以下是上述函数调用中信息的排列方式：

```
a.o = H("user_ext_ids").value;
a.p = H("compose_to").value;
a.V = this.a; (global variable unknown to me)
a.U = H("field_reference_video").value;
a.k = H("compose_subject").value;
a.e = H("compose_message").value; 
```

函数 W 将上面的内容编译成一个新变量： f 像这样：

```
f.to_user_external_ids = H("user_ext_ids").value;
f.to_users = H("compose_to").value;
f.in_reply_to = this.a; (global variable unknown to me)
f.video_id = H("field_reference_video").value;
f.subject = H("compose_subject").value;
f.message_text = H("compose_message").value; 
```

一旦函数 W 如上所述将信息编译为 f ，它就会将其推送到数组的末尾，我假设它是某种动作队列，或者是与其他动作一起发送的信息包。

这是推送信息的代码：

```
a.t.push({type:c,request:f}); 
```

这些是上述代码行的参考：

```
a = this.s; (Originally equalled this, when W was called by the first function, but is was changed to this at the beginning of W)
c = "send_message"; (I am guessing this is the part telling the script that the action is sending the message)
f - this is the compiled information that I mapped out above. 
```

我设法找到了 this.st 的设置，但我被困在了这个范围之外。

```
this.s=new pb(a); 
```

变量 s 设置为此函数。函数 pb(a) 可以通过 Ctrl-F'ing 找到：

```
function pb(a) 
```

与我在这里引用的大多数函数和变量一样。

在 pb(a) 的范围内，变量 this.t 被初始化：

```
this.t=[]; 
```

我还发现在同一个函数中 this.s=new pb(a); 发生时，this.s 涉及另一个函数，并且它是唯一一次在整个脚本中引用“this.s”（小 s，不是大写字母），除了 a=as; 这是它被引用的函数：

```
var c=R(R(R(R(R(R(R(R(R(R(this.s,"accept_message",this.v,this),"accept_messages",this.v,this),"block_user",this.v,this),"delete_message",this.v,this),"delete_messages",this.v,this),"display_messages",this.W,this),"ignore_message",this.v,this),"ignore_messages",this.v,this),"mark_as_spam",this.v,this),"send_message",this.Y,this); 
```

这是我所能得到的，现在我完全被难住了。任何帮助将不胜感激，我需要能够到达实际发送消息的最后一行代码，并且没有引用其他任何内容，因此我可以手动发送消息，JavaScript 独立于该脚本。

* * *

**问题：**你能帮我找到发送消息的最后一行代码，以便我可以手动发送消息，JavaScript 独立于这个 js 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:56:02.053

您在问一个关于对 YouTube 网络界面使用的 JavaScript 代码进行逆向工程以将其用于非预期目的的问题。

有一种使用 YouTube 数据 API 以编程方式发送消息的受支持方式：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_messages](https://developers.google.com/youtube/2.0/developers_guide_protocol_messages)

请不要尝试使用非官方机制发送消息。这可能是不可能的，如果可能的话，它可能会在未来的某个时候意外中断。

# json - NSJSONSerialization 不适用于 IOS 4.3

> ID：14022173
> 
> 赞同：1
> 
> 时间：2012-12-24T13:44:36.940
> 
> 标签：json, ios5, ios4, nsjsonserialization

我有一个早期运行 IOS 5 的项目。我必须让项目在 IOS 4.3 上运行。当我运行该项目时，我在以下书面方法中遇到了 2 个错误。
我得到的错误已被评论。任何可能的解决方案。我是 Iphone 新手。请帮助:)

此方法解析来自服务器的响应并转换为应用程序的模型表示。

```
+ (NSArray*) parseResponse:(NSData *) data {
  NSDictionary* json = nil;
Class jsonSerializationClass = NSClassFromString(@"NSJSONSerialization");
  if (data) {
  json = [NSJSONSerialization  // error: Use of undeclared identifier  
                              // 'NSJSONSerialization'
            JSONObjectWithData:data
            options:kNilOptions
            error:nil];
  }
   NSLog(@"Total contacts fetched: %u",[json[@"contacts"] count]);
   NSMutableArray *contacts =[[NSMutableArray alloc] init];
   for (NSInteger i=0;i<[json[@"contacts"] count];i++){ //error: Array subscript is not 
                                                     //interger
   NSLog(@"Name %@ ",json[@"contacts"][i][@"lastName"]);
    Contact *aContact=[[Contact alloc]initWithFirstName:json[@"contacts"][i] 
      [@"firstName"]
                                            andLastName:json[@"contacts"][i]
       [@"lastName"]
                                               andEmail:json[@"contacts"][i][@"email"] 
      andPhone:json[@"contacts"][i][@"phone"]];
    [contacts addObject:aContact];
   }
  return contacts;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:03:05.250

NSJSONSerialization is available only in iOS 5.0 and above.

Here is the documentation [NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

For earlier iOS versions, you could use [SBJsonParser](http://stig.github.com/json-framework/) or something else.

# ios - TTTAttributedLabel 和链接弹出框

> ID：14022175
> 
> 赞同：3
> 
> 时间：2012-12-24T13:45:19.013
> 
> 标签：ios, ipad, label, uipopovercontroller

是否可以检测`CGRect`链接文本或`CGPoint`位置，以显示点击链接的弹出框（在 ipad 上）`TTTAttributedLabel`？我需要在单击的链接上显示弹出框`TTTAttributedLabel`。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:15:11.210

您只能通过修改 TTTAttributedLabel 来支持此行为来做到这一点。

1）修改委托方法：

```
- (void)attributedLabel:(TTTAttributedLabel *)label
   didSelectLinkWithURL:(NSURL *)url
                atPoint:(CGPoint)point; 
```

2) 在`TTTAttributedLabel.m`源代码中，修改`touchesEnded:withEvent:`并抓取触摸点并将其传递给委托方法。

```
 switch (result.resultType) {
        case NSTextCheckingTypeLink:
            if ([self.delegate respondsToSelector:@selector(attributedLabel:didSelectLinkWithURL:atPoint:)]) {
                UITouch *touch = [touches anyObject];
                CGPoint touchPoint = [touch locationInView:self];
                [self.delegate attributedLabel:self didSelectLinkWithURL:result.URL atPoint:touchPoint];
                return; 
```

3) 在视图控制器中，您需要将该触摸点转换为与视图控制器视图的相对坐标：

```
#pragma mark TTTAttributedLabelDelegate
- (void)attributedLabel:(TTTAttributedLabel *)label
   didSelectLinkWithURL:(NSURL *)url 
                atPoint:(CGPoint)point
{
        CGPoint normalizedPoint = [self convertPoint:point fromView:label];        

        UIActionSheet *actionSheet = [[UIActionSheet alloc] ...
        [actionSheet showFromRect:CGRectMake(normalizedPoint.x, normalizedPoint.y-kSensibleOffset, 10, 10)
                           inView:label
                         animated:YES];
    }
#pragma mark - 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T23:11:45.907

您不想通过尝试跟踪位置来在手势级别执行此操作。既然你有一个链接，`openURL`当你拦截链接点击时，只需覆盖并做任何你想做的事情。更多细节在[这里](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)。

# php - PHP session_sava_path() 到 MySQL 表

> ID：14022177
> 
> 赞同：0
> 
> 时间：2012-12-24T13:45:39.337
> 
> 标签：php, session, mysqli

我一直在考虑为我的 PHP 应用程序创建自己的会话处理程序，仅仅是因为我想将会话数据存储在 MySQL 内存表中，而不是本地文件系统中。

我这样做有 4 个主要原因。

1.  MySQL 服务器是本地的，因此从内存中读取会更快。
2.  能够列出活跃用户
3.  使管理员无需登录和注销即可轻松读取和修改用户会话。
4.  能够在会话超时或会话中的用户“空闲”变量后运行脚本。

我似乎找不到任何简单的方法来做到这一点。

我可以使用 memcached，但它会导致服务器内存中的会话数据增加一倍。

有谁知道一种简单的方法，在运行时强制 PHP 使用 MySQLi 资源作为会话存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:52:04.987

实际上，Mysql 提供了一个 memcache 接口，它首先使用内存，然后可以持久化到真实的数据库表中。

在数据库服务器中创建表格后，可以通过 php.ini 简单地配置它（参见[此处](http://schlueters.de/blog/archives/152-Not-only-SQL-memcache-and-MySQL-5.6.html)）：

```
; when using the "memcache" extension:
session.save_handler=memcache
; when using the "memcached" extension:
; session.save_handler=memcached

session.save_path="tcp://localhost:11211" 
```

您可以在此处使用 PHP 示例对其进行概述：

*   [不仅是 SQL - memcache 和 MySQL 5.6](http://schlueters.de/blog/archives/152-Not-only-SQL-memcache-and-MySQL-5.6.html)（2011 年 4 月 14 日；作者 Johannes Schlüter）
*   [MySQL、Memcache、PHP 修订](http://schlueters.de/blog/archives/169-MySQL,-Memcache,-PHP-revised.html)（2012 年 9 月 30 日；作者 Johannes Schlüter）

# sql - 选择 2 个表之间的公共行和非公共行

> ID：14022181
> 
> 赞同：2
> 
> 时间：2012-12-24T13:45:50.043
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有 2 个名称`kcc_201`和`Kcc_300`.

**表 kcc_201 看起来像这样**

```
ClientMarketCode | WorkDate   | OverDraft
123              | 2012-12-12 | 34.5
456              | 2012-12-12 | 60
98               | 2012-12-12 | 80 
```

**表 kcc_300 看起来像这样**

```
ClientMarketCode | WorkDate   | DebitAmount
123              | 2012-12-12 | 80
456              | 2012-12-12 | 90
966              | 2012-12-12 | 100
100              | 2012-12-12 | 787 
```

我的问题是什么查询让我的所有客户行都具有相同的`ClientMarketCode`并`workdate`在 2 个表之间匹配，并且在不使用的情况下从 2 个表中检索不匹配的行`union`

什么查询让我得到这样的结果：

```
clientMarketcode | WorkDate   | OverDraft | DebitAmount
123              | 2012-12-12 | 34.5      | 80
456              | 2012-12-12 | 60        | 90
98               | 2012-12-12 | 80        | null
966              | 2012-12-12 | null      | 100
100              | 2012-12-12 | null      | 787 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:59:25.150

您可以使用`FULL OUTER JOIN`与此类似的：

```
select 
    coalesce(k2.ClientMarketCode, k3.ClientMarketCode) ClientMarketCode,
    coalesce(k2.WorkDate, k3.WorkDate) WorkDate,
    k2.OverDraft,
    k3.DebitAmount
from kcc_201 k2
full outer join kcc_300 k3
  on k2.ClientMarketCode = k3.ClientMarketCode
  and k2.WorkDate = k3.WorkDate; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6a914/10)

结果是：

```
| CLIENTMARKETCODE |   WORKDATE | OVERDRAFT | DEBITAMOUNT |
------------------------------------------------------------
|              123 | 2012-12-12 |        34 |          80 |
|              456 | 2012-12-12 |        60 |          90 |
|               98 | 2012-12-12 |        80 |      (null) |
|              966 | 2012-12-12 |    (null) |         100 |
|              100 | 2012-12-12 |    (null) |         787 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:58:38.747

```
select 

isnull(kcc_201.clientMarketcode,kcc_300.clientMarketcode),
isnull(kcc_201.WorkDate,kcc_300.WorkDate),
kcc_201.OverDraft,
kcc_300.DebitAmount

from  kcc_201
FULL JOIN kcc_300 on kcc_201.clientMarketcode=kcc_300.clientMarketcode
                     and kcc_201.WorkDate=kcc_300.WorkDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:21:55.343

简单，使用 FULL OUTER JOIN，

```
select nullif(k1.ClientMarketCode, k2.ClientMarketCode) as ClientMarketCode,
       nullif(k1.WorkDate, k2.WorkDate) as WorkDate,
       k1.OverDraft,
       k2.DebitAmount
from kcc_201 k1 full outer join kcc_300 k2 
on k1.ClientMarketCode = k2.ClientMarketCode
and k1.WorkDate = k2.WorkDate; 
```

# c - 无效的预处理令牌错误

> ID：14022182
> 
> 赞同：2
> 
> 时间：2012-12-24T13:45:53.210
> 
> 标签：c, token, c-preprocessor

我正在尝试编译一个包含 Middlc.h 的文件 Args.c。Middlc.h 错误给出以下错误。

```
enter code here
Middlc.h:23:1: error: pasting "*" and "ArgList" does not give a valid preprocessing token
Middlc.h:24:1: error: pasting "*" and "CandidateList" does not give a valid preprocessing token
Middlc.h:25:1: error: pasting "*" and "Decl" does not give a valid preprocessing token
Middlc.h:26:1: error: pasting "*" and "DeclList" does not give a valid preprocessing token
Middlc.h:27:1: error: pasting "*" and "ExcList" does not give a valid preprocessing token
Middlc.h:28:1: error: pasting "*" and "Field" does not give a valid preprocessing token
Middlc.h:29:1: error: pasting "*" and "FieldList" does not give a valid preprocessing token
Middlc.h:30:1: error: pasting "*" and "Identifier" does not give a valid preprocessing token
Middlc.h:31:1: error: pasting "*" and "IdentifierList" does not give a valid preprocessing token
Middlc.h:32:1: error: pasting "*" and "Interface" does not give a valid preprocessing token
Middlc.h:33:1: error: pasting "*" and "InterfaceList" does not give a valid preprocessing token
Middlc.h:34:1: error: pasting "*" and "Spec" does not give a valid preprocessing token
Middlc.h:35:1: error: pasting "*" and "SymbolTable" does not give a valid preprocessing token
Middlc.h:36:1: error: pasting "*" and "ScopedName" does not give a valid preprocessing token
Middlc.h:37:1: error: pasting "*" and "Type" does not give a valid preprocessing token
Middlc.h:38:1: error: pasting "*" and "TypeList" does not give a valid preprocessing token
Middlc.h:39:1: error: pasting "*" and "FileStack" does not give a valid preprocessing token 
```

即使解决了单个错误，它也会非常有帮助。我可以在此基础上解决其他的。

这是代码：

中间件

```
#ifndef _Middlc_h_
#define _Middlc_h_

/*
 * Main header file for Middlc.
 */

#define PY(x) printf x 

#define new(x) ((x##_t)malloc(sizeof(struct _##x##_t)))
#define TYPE_DECL(x) typedef struct _##x##_t *##x##_t

#include <sys/types.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

typedef enum { False, True } bool_t;

#define MAX_STRING_LENGTH 1024

TYPE_DECL(ArgList);
TYPE_DECL(CandidateList);
TYPE_DECL(Decl);
TYPE_DECL(DeclList);
TYPE_DECL(ExcList);
TYPE_DECL(Field);
TYPE_DECL(FieldList);
TYPE_DECL(Identifier);
TYPE_DECL(IdentifierList);
TYPE_DECL(Interface);
TYPE_DECL(InterfaceList);
TYPE_DECL(Spec);
TYPE_DECL(SymbolTable);
TYPE_DECL(ScopedName);
TYPE_DECL(Type);
TYPE_DECL(TypeList);
TYPE_DECL(FileStack);

#include "FileStack.h"
#include "SymbolTable.h"

#include "Modes.h"
#include "Decls.h"
#include "Types.h"
#include "Args.h"
#include "Candidates.h"
#include "Exceptions.h"
#include "Fields.h"
#include "Identifiers.h"
#include "Interfaces.h"
#include "Specs.h"
#include "ScopedNames.h"
#include "Parser.h"

#include "Globals.h"
#include "Errors.h"
#endif /* _Middlc_h_ */ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T13:52:39.653

线

```
#define TYPE_DECL(x) typedef struct _##x##_t *##x##_t 
```

应该

```
#define TYPE_DECL(x) typedef struct _##x##_t * x##_t 
```

（无托克粘贴`##`）。目前，预处理器试图将星号“粘合”到类似的名称上`SymbolTable_t`，从而生成不可解析的标识符`SymbolTable_t`。当您`##`省略时，编译器会将星号解析为单独的标记，从而修复错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:52:26.400

您需要删除 * 和 x 之间的 ## 。那是：

`#define TYPE_DECL(x) typedef struct _##x##_t * x##_t`

为什么你要做所有这些宏的东西当然是另一回事 - 使用“new”作为宏肯定不好 - 如果你以后想用 C++ 编译器编译你的代码会发生什么（例如，因为一些非常棒的 C++ 代码来了）。

# youtube-api - Youtube loadVideoById 的对象语法不起作用（在 iOS 设备上测试）

> ID：14022189
> 
> 赞同：1
> 
> 时间：2012-12-24T13:46:30.247
> 
> 标签：youtube-api

笔记！它不适用于 iPad 等 iOS 设备

[https://developers.google.com/youtube/iframe_api_reference#loadVideoById](https://developers.google.com/youtube/iframe_api_reference#loadVideoById)

loadVideoById 的对象语法似乎不起作用，我收到视频不可用的错误。有什么想法或想法吗？

**参数语法**

```
 player.loadVideoById(videoId:String, startSeconds:Number, suggestedQuality:String):Void 
```

**对象语法**

```
player.loadVideoById({videoId:String, startSeconds:Number, endSeconds:Number, suggestedQuality:String}):Void 
```

请参阅此处的示例链接； [http://dl.dropbox.com/u/13780885/loadvideobyid/index.html](http://dl.dropbox.com/u/13780885/loadvideobyid/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:52:41.977

这正在[https://code.google.com/p/gdata-issues/issues/detail?id=3937进行跟踪](https://code.google.com/p/gdata-issues/issues/detail?id=3937)

（通常，与 Stack Overflow 相比，该问题跟踪器更适合报告 API 错误。）

# asp.net - 是否可以从 asmx 生成 xsd

> ID：14022190
> 
> 赞同：3
> 
> 时间：2012-12-24T13:46:29.920
> 
> 标签：asp.net, xml, web-services

我有第三方公司提供的网络服务，网络服务将 xml 作为字符串返回，例如：

```
<string xmlns="http://www.BMS.co.il/">
<?xml version="1.0" encoding="utf-8"?>
 ..... 
```

是否有可能从 asmx 生成 XSD？然后我可以从中创建类，而不是手动解析这些东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:53:45.607

[XSD.Exe](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)将生成 xsd，然后您可以使用它来生成类，

```
 xsd file.xml [/outputdir:directory] 
```

*“如果您指定 XML 文件（.xml 扩展名），Xsd.exe 会从文件中的数据推断架构并生成 XSD 架构。输出文件与 XML 文件具有相同的名称，但扩展名为 .xsd。如果您指定 XML 架构文件（扩展名为 .xsd），Xsd.exe 会为与 XML 架构对应的运行时对象生成源代码。”*

还，

如果你有 wsdl（你必须有），那么你可以使用[WSDL.EXE直接从它生成类](http://msdn.microsoft.com/en-us/library/vstudio/7h3ystb6%28v=vs.100%29.aspx)

```
 wsdl http://hostServer/WebserviceRoot/WebServiceName.asmx?WSDL 
```

# java - 如何在本地启动我的 grails 应用程序？

> ID：14022192
> 
> 赞同：3
> 
> 时间：2012-12-24T13:46:49.743
> 
> 标签：java, spring, unix, grails

我的开发人员在我的本地机器上建立了一个基于 Grails/Spring 框架的应用程序。我不小心删除了他给我的 Unix exe 脚本，以便在我的浏览器中本地运行它，并且无法再访问该站点。不幸的是，直到假期结束后我才能与他取得联系，我需要访问这个网站尽快完成工作。

我现在的剧本是...

```
#!/bin/sh
grails -Dserver.port.https=443 -Dserver.port=80 run-app -https 
```

它只是返回错误。谁能帮我弄清楚如何在本地运行它。这是unix错误。

```
Last login: Mon Dec 24 08:34:43 on ttys000
/Users/admin/Projects/.... ; exit;
gio-2:~ admin$ /Users/admin/Projects/.... ; exit;
| Configuring classpath
| Error java.io.FileNotFoundException: /Users/admin/.grails/.slcache/.index (Permission    denied)
| Error     at java.io.FileOutputStream.openAppend(Native Method)
| Error     at java.io.FileOutputStream.<init>(FileOutputStream.java:192)
| Error     at java.io.FileWriter.<init>(FileWriter.java:90)
| Error     at   com.springsource.loaded.MethodInvokerRewriter.addToCacheIndex(MethodInvokerRewriter.java:326    )
| Error     at  com.springsource.loaded.MethodInvokerRewriter.rewrite(MethodInvokerRewriter.java:271)
| Error     at com.springsource.loaded.MethodInvokerRewriter.rewriteUsingCache(MethodInvokerRewriter.java:1 41)
| Error     at  com.springsource.loaded.TypeRegistry.methodCallRewriteUseCacheIfAvailable(TypeRegistry.java: 775)
| Error     at com.springsource.loaded.agent.SpringLoadedPreProcessor.preProcess(SpringLoadedPreProcessor.j ava:251)
| Error     at com.springsource.loaded.agent.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:89)
| Error     at sun.instrument.TransformerManager.transform(TransformerManager.java:169)
| Error     at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:365)
| Error     at java.lang.ClassLoader.defineClass1(Native Method)
| Error     at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
| Error     at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
| Error     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
| Error     at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
| Error     at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
| Error     at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
| Error     at java.security.AccessController.doPrivileged(Native Method)
| Error     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
| Error     at org.codehaus.groovy.tools.RootLoader.oldFindClass(RootLoader.java:152)
| Error     at org.codehaus.groovy.tools.RootLoader.loadClass(RootLoader.java:124)
| Error     at    org.codehaus.groovy.grails.cli.support.GrailsRootLoader.loadClass(GrailsRootLoader.java:43)
| Error     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
| Error     at org.codehaus.groovy.grails.cli.GrailsScriptRunner.main(GrailsScriptRunner.java:228)
| Error     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
| Error     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
| Error     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
| Error     at java.lang.reflect.Method.invoke(Method.java:597)
| Error     at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1231)
| Error     at org.codehaus.groovy.grails.cli.support.GrailsStarter.rootLoader(GrailsStarter.java:234)
| Error     at org.codehaus.groovy.grails.cli.support.GrailsStarter.main(GrailsStarter.java:262)
| Error Error executing script RunApp: /Users/admin/.grails/ivy-cache/resolved-org.grails.internal-grails-2.0.3.xml (Permission denied) (Use --stacktrace to see the full trace)
logout
[Process completed] 
```

我尝试使用 sudo 它给出了这个错误......

```
/Users/admin/Projects/... 2 ; exit;
gio-2:~ admin$ /Users/admin/Projects/... 2 ; exit;
Password:
| Configuring classpath
| Error /Users/admin does not appear to be part of a Grails application.
| Error The following commands are supported outside of a project:
add-proxy
clear-proxy
create-app
create-plugin
help
list-plugins
package-plugin
plugin-info
remove-proxy
set-proxy
 | Run 'grails help' for a complete list of available scripts.
 logout

 [Process completed] 
```

我不知道这是否有帮助，但我在 Users/admin/Tools 目录中有一个 grails-2.0.3 文件。同样，我没有设置任何这些，所以我真的不知道如何设置的输入/输出。我只需要能够通过 http 在我的本地服务器上看到它，这样我就可以完成我的前端工作。

这是有效的脚本...

```
#!/bin/sh 
cd /Users/admin/Projects/...
sudo grails -Dserver.port.https=443 -Dserver.port=80 run-app -https 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:06:36.363

要以管理员权限运行应用程序，请尝试：

```
sudo grails -Dserver.port.https=443 -Dserver.port=80 run-app -https 
```

消息说：

```
 Error /Users/admin does not appear to be part of a Grails application. 
```

因此，您不在正确的项目目录中运行该命令。

例如，你的项目目录是/Users/admin/workspace/myProject，你应该`cd`到那个路径。如果您的`ls`命令向您显示一些内容，例如：

```
application.properties scripts                test
src                    stacktrace.log         web-app
grails-app             target
lib                    target-eclipse 
```

然后你可以发出第一个 run-app 命令。

# javascript - 刷新页面后如何保持html表格不变

> ID：14022193
> 
> 赞同：-1
> 
> 时间：2012-12-24T13:46:53.553
> 
> 标签：javascript, html, javascript-events

我创建了一个网页，其中包含两个用于获取用户输入的文本框，以及一个用于将这些值作为新行添加到 html 表中的按钮。我已经使用**javascript**来执行此功能。这是我的代码：

**Javascript代码**

```
function addData(tableID)
{   
            var t = document.getElementById("timeslot").value;
            var m = document.getElementById("mon").value;

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createTextNode(t);
            element1.type = "label";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            var element2 = document.createTextNode(m);
            element2.type = "label";
            cell2.appendChild(element2);
} 
```

**HTML 代码**

```
 <input type='button' name='Add' value='Add' style='width:130px;padding:10px;' onclick="addData('timetable')"> 
```

此代码正常运行。但是当我刷新页面时，新添加的行正在消失，我的页面在我插入新行之前就变成了原来的样子。如何避免这种情况并在不更改新添加的字段的情况下保留我的表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:53:21.880

每次重新加载页面时静态或动态添加它。

# magento - 在magento中成功导入产品时调用函数

> ID：14022196
> 
> 赞同：3
> 
> 时间：2012-12-24T13:47:22.680
> 
> 标签：magento

您好，我正在使用 Advance 导入配置文件以编程方式在磁电机中导入产品，并且我想在整个导入完成后运行重新索引。我已经尝试挖掘magento，但是在导入完成后找不到任何正在调用的函数......

我找到了一个文件 process.phtml，它为每个 csv 行 /app/design/adminhtml/default/default/template/system/convert/profile 调用 ajax

所以我在根目录创建了一个文件并通过ajax调用它来导入每一行，但是它在Mysql中创建了一个死锁并且导入抛出错误SQLSTATE [40001]：序列化失败：1213尝试锁定时发现死锁；尝试重新启动事务。

```
function reIndexData(){
                        var url = '<?php echo str_replace("index.php/","",Mage::getBaseUrl()); ?>';
                         new Ajax.Request(url+'reindex.php', {
                          method: "post",
                          parameters: 'data',
                          onSuccess: function(transport) {}
                        });
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:35:16.357

有一个观察者叫

```
catalog_product_import_finish_before 
```

这应该允许您在每次导入产品时重新索引数据库

以下是有关 Magento 观察者的一些信息：

**什么是 Magento 观察者？**

观察者允许您查看（观察）程序中何时发生特定操作（例如，查看何时导入项目）。

一旦我们看到某个动作（例如正在导入的产品），Observer 允许我们注入和运行代码

**如何设置观察者？**

看到这个问题：[在 Magento 中设置观察者的正确方法是什么？](https://stackoverflow.com/questions/2048458/what-is-the-correct-way-to-set-up-an-observer-in-magento)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:46:47.423

您还可以在 Magento 的任何地方分派您的自定义事件，并调用您的方法来进行 reIndex 过程。

有关更多详细信息，请参阅这些[第一](https://stackoverflow.com/questions/1921057/custom-events-in-magento)和[第二](http://inchoo.net/ecommerce/magento/custom-magento-events-customer-first-order/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:38:37.657

走这条路.. app/code/core/Mage/Adminhtml/controllers/System/Convert

您会发现文件 ProfileController.php 有一个名为 batchFinishAction() 的函数，当导入配置文件完成时会调用该函数

呼……明白了！！谢谢大家的帮助。。

# php - 仅选择图像的特定部分

> ID：14022198
> 
> 赞同：18
> 
> 时间：2012-12-24T13:47:38.507
> 
> 标签：php, ocr

我在“光学字符识别”方面是全新的，需要更多信息和建议，因为我无法找到是否可以做我需要的事情。

我有以下任务：

1.  图像作为输入给出 - 它们将具有相同的结构 - 一些图标和公司符号和文本。
2.  只需选择文本，然后使用某些 OCR 库将其制作为文本。

是否可以使用一些 OCR php 库创建一个函数并只选择一些带有文本的区域？

如果 PHP 没有好的 OCR 库，你能推荐一些其他语言的吗？

下面的例子演示了我想要做什么（这只是一个例子，我并不是想用钱做一些违法的操作）：

这是示例图像：

![在此处输入图像描述](../Images/cd469d18c6d0a5fd5f04e93eb1c84d80.png)

这是输出（用红色矩形包围的文本）：

1.  这是所有公共和私人债务的法定货币
2.  L11180916G
3.  一元

欢迎所有文章和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-04T22:58:53.950

我不知道有任何 PHP 扩展实现了 OCR，但作为支持图像处理的通用脚本语言，PHP 是集成其他工具的绝佳选择。

[Tesseract 和 gocr](https://www.splitbrain.org/blog/2010-06/15-linux_ocr_software_comparison)都是 OCR 的开源命令行工具，都非常有效。但就像任何 OCR 软件包一样，可能会遇到与您提供的图像相似的图像。如果您的 PHP 代码可以将文本与文本区域隔离开来，那么您将获得更好的结果。您仍然需要进行一些数据清理 - 使用 php 拼写检查器。你会发现同样的误读模式不断出现——比如把“rn”读成“m”。您的 PHP 代码应该能够识别和处理大多数情况。

关于识别文本区域的问题 - 这取决于文档的真实程度。如果您使用 1 美元的钞票调整您的应用程序，它可能能够从许多钞票中读取序列号 - 但它不知道如何读取不同的钞票。有很多可用的图像识别工具，而且 cli 工具也很容易集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-05T16:38:26.183

您可以使用 Irfanview **32 位**，然后安装 KADMOS 插件：http: [//irfanview.info/plugins/kadmos/](http://irfanview.info/plugins/kadmos/)

Kadmos 的 DLL（至少对于插件而言）目前是 32 位的，这就是为什么它仅适用于 32 位版本的 Irfanview。

安装后，打开显示一些文本的图像，然后选择“选项 > 启动 OCR ...（插件）”菜单项。然后，您可以通过在其周围拖放一个矩形来选择一些文本，并且识别的文本将在一个窗口中弹出，您可以从中复制它。该插件仅供个人（非商业）使用，但让您看看 KADMOS 是否适合您的需求。

如果您有很多图片要批量处理，您可以获得 Kadmos DLL 的许可证。有关技术文档，请参阅：[http](http://www.best-ocr.com/handbuch/book/html/files.html) ://www.best-ocr.com/handbuch/book/html/files.html 有关许可问题，请将上述 URL 中的“files.html”替换为“dll_e.htm”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T09:07:33.667

您可以使用**Abbyy Cloud Ocr Sdk**
[https://cloud.ocrsdk.com/](https://cloud.ocrsdk.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-03T10:57:53.477

我会推荐：[https ://github.com/tesseract-ocr/tesseract](https://github.com/tesseract-ocr/tesseract)

PHP 可能不是这项工作的最佳工具，但如果您愿意，您可以随时从 PHP 中调用 tesseract，然后解析从中得到的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T15:50:24.980

老问题，但它可能对其他人有所帮助。试试 ClearImage SDK。

[http://www.inliteresearch.com/actions/download-proc.php?type=CI&id=](http://www.inliteresearch.com/actions/download-proc.php?type=CI&id=)

```
try {
    $Ci = new COM("ClearImage.ClearImage");
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

# c++ - 从 NumericVector 填充 C++ 数组的更好习惯用法

> ID：14022203
> 
> 赞同：10
> 
> 时间：2012-12-24T13:48:44.533
> 
> 标签：c++, r, rcpp

我`Rcpp`用来包装一个用类 C ++ 编写的算法（不是我写的）（据我所知，没有 STL，没有提升，没有任何东西）。[你可以在这里](http://people.sc.fsu.edu/~jburkardt/cpp_src/kmeans/kmeans.cpp)看到实现的算法（我正在包装`kmeans_w_03`）。因此，我`numeric`从 R 传入一个向量，然后需要将其转换为`double`数组。

目前我正在逐个元素地循环并从另一个元素中填充一个元素，如下所示：

```
SEXP testfn(SEXP weightvec, SEXP cluster_num_k){
    Rcpp::NumericVector weightR(weightvec) ;
    int point_num = weightR.size();
    double weight[point_num] ;
    for(int i = 0; i < point_num; ++i) {
      weight[i] = weightR[i];
    }
} 
```

但是对于单元素数值向量，我可以利用 Rcpp 的漂亮`as`转换功能：

```
int cluster_num = Rcpp::as<int>(cluster_num_k); 
```

但是，对长度 > 1 的数值向量尝试类似的操作会导致崩溃或错误，具体取决于语法的确切变体：

```
double weight[point_num] = Rcpp::as<double>(weightvec); 
```

我不一定介意循环，但我完全是新手，我怀疑有更好的方法。我已经阅读了 Rcpp-introduction、hadley 的 wiki 教程和 RcppExamples，但还没有找到任何可以解决这个问题的东西，但这并不意味着我没有错过它。我对 Doxygen Rcpp 文档的阅读是`as`可以转换为 STL 向量但不能转换为数组（但我很难阅读这些文档，所以我怀疑我错了）。如果是这样，我想我可以转换为向量，然后转换为数组....

所以我的问题是：有没有更好的（更少的代码行，更具表现力的代码，甚至可能是能够避免内存分配）的方式来将 a 转换`NumericVector`为 a `double[]`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T14:40:28.430

阿里，在前面的回答中，约翰提出了一个很好的观点。稍微扩展一下，这里有几个问题

*   您正在处理一个具有过时编码标准的库，它需要一个`double[]`或`*double`
*   您想使用更好的编码标准并利用[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)。

好吧，不要害怕，我们有一个简单的解决方案。像往常一样实例化`Rcpp::NumericVector X(weightvec);`，然后将其传递给您的函数`foo()`（或其他）

```
foo(X.begin()) 
```

它为您提供 required `double*`，如果需要，`X.size()`提供长度。因为你来自 R，所以当你之后返回 R 时，你不需要担心范围和生命周期。

如果您需要更明确，我还使用了 uglier `&(X[0])`。

此外，`Rcpp::as<>()`施法者也可以工作`std::vector<double>`，所以你可以做

```
std::vector<double> x = Rcpp::as<std::vector<double> >(weightvec); 
```

但除了转换为 C++ 类型之外，它在这里一无所获。

最后，如果 Josh 或其他 C 顽固分子在附近，所有这一切都利用了这样一个事实，即`SEXP`来自 R 的 you 保证具有连续的 C 指针，因此您也可以通过非常古老的学校`REAL(weightvec)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T14:15:32.767

编写一个不使用标准库（您所说的“STL”）的 C++ 程序并不是我认为的“常规 C++”。标准库是标准定义的语言的*一部分。*因此，使用标准中定义的工具并不是非常规的 C++。恰恰相反，我认为故意忽略这些设施本身就是非常规的。它使用 C++ 作为“更好的 C”，或“带有类的 C”。这没有抓住重点。

牢记这一点，当查看您的循环打算完成的任务时，我的第一个倾向是使用`transform`将源复制到目标，并将 a`vector`作为目标。

你也有一个中介在这里工作——你首先（似乎）复制`weightVec`到一个新构建`NumericVector`的 ，然后复制其中的元素——但是`NumericVector`被扔掉了。这对我来说似乎很浪费。

这是编写此代码时我会想到的基本模式：

```
vector<double> weight;
transform( weightVec.begin(), weightVec.end(), back_inserter(weight), converter() );
return weight; 
```

这里缺少一些语法位，如果不了解更多有关正在使用的组件，我无法填写。但考虑到你在做什么，哲学似乎是合理的。

例如，`SEXP`对象可能没有`begin()`或`end()`方法。但是，您已经直接`NumericVector`从`SEXP`对象构造 a，因此它`SEXP`可能具有模拟设施`begin()`，`end()`您可以采用甚至可能直接使用。

我在上面使用的`converter()`构造是函数、仿函数或 lambda（在 C++11 中）的占位符，它将单个`SEXP`元素转换为`double`. 同样，我不知道实现此操作所需的详细信息，但它必须是可能的，因为您已经以另一种方式执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T15:21:07.503

如果您的问题是如何将数据从 C++ 数组复制`Rcpp::NumericVector`到 C++ 数组，`transform()`这是一个很好的答案。但是，如果您想从中获取内部数组`Rcpp::NumericVector`，其中不包括任何复制，您可以执行与从中提取数组完全相同的操作`std::vector`：

```
double* arr = &vec[0]; 
```

其中 vec 是一个`Rcpp::NumericVector`。

# ruby-on-rails - 没有这样的列：以下多对多关联中的书签

> ID：14022206
> 
> 赞同：4
> 
> 时间：2012-12-24T13:49:06.830
> 
> 标签：ruby-on-rails, associations

我有一个`Post`和一个`User`模型。我正在尝试添加一种`Bookmark`模式，以便用户可以为帖子添加书签。我正在使用`join model`：

**架构.rb：**

```
create_table "bookmarks", :force => true do |t|
  t.integer  "bookmarker_id"
  t.integer  "bookmarked_id"
  t.datetime "created_at",    :null => false
  t.datetime "updated_at",    :null => false
end 
```

**书签.rb：**

```
class Bookmark < ActiveRecord::Base
  attr_accessible :bookmarked_id

  belongs_to :bookmarker, class_name: "User"
  belongs_to :bookmarked, class_name: "Post"

  validates :bookmarker_id, presence: true
  validates :bookmarked_id, presence: true
end 
```

**post.rb:**

```
has_many :bookmarks, :dependent => :destroy
has_many :bookmarkers, :through => :bookmarks 
```

**用户.rb：**

```
has_many :bookmarks, :dependent => :destroy
has_many :bookmarked_posts, :through => :bookmarks, source: :bookmarked 
```

我试图在终端中测试关联，但我得到了这个：

```
1.9.3-p0 :007 > user.bookmarks
  Bookmark Load (0.4ms)  SELECT "bookmarks".* FROM "bookmarks" WHERE "bookmarks"."user_id" = 1
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: bookmarks.user_id: SELECT "bookmarks".* FROM "bookmarks"  WHERE "bookmarks"."user_id" = 1 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:08:21.930

您没有指定foreign_key，异常明确表示

```
no such column: bookmarks.user_id 
```

只需添加

```
has_many :bookmarks, :foreign_key => 'bookmarker_id' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:20:24.273

没有外键书签

执行以下操作；

```
rails g migration add_user_id_to_bookmarks user_id:integer 
```

然后做

```
has_many :bookmarks, :foreign_key => 'bookmarker_id' 
```

# jquery - JQuery，选择什么不包含某些东西

> ID：14022208
> 
> 赞同：34
> 
> 时间：2012-12-24T13:49:12.883
> 
> 标签：jquery, contains

如果我想选择包含“pc”的内容，我会使用`$('tr:contains("pc")')`

但是我可以用什么来选择不包含“pc”的内容？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-24T13:50:53.217

使用 [:not() 选择器](http://api.jquery.com/not-selector/)，它是 jquery 框架的一部分。类似的东西`$('tr:not(:contains("pc"))')`应该可以解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T13:51:04.220

```
$('tr').not(':contains("pc")') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T13:51:04.200

```
$('tr:not(:contains("pc"))') // this can be used 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T08:18:41.880

$("tr:not(:contains("pc"))")

如果你在同一个句子中使用单引号和双引号混合，它就不起作用

# cpu-registers - 当我们已经有程序计数器寄存器时，为什么还需要堆栈指针寄存器？

> ID：14022212
> 
> 赞同：13
> 
> 时间：2012-12-24T13:49:44.567
> 
> 标签：cpu-registers

我对此感到困惑，因为如果我们已经有一个指针，那么我们可以轻松地指向下一条指令，我们可以轻松地指向返回上一个函数，那么为什么我们需要另一个堆栈指针寄存器来返回上一个函数或模块呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T13:56:26.250

程序计数器告诉 CPU 它在*哪里*。堆栈用于（除其他外）记录它所在的*位置*。

如果调用了一个函数，则该函数需要知道在完成后返回到哪里。这确实可能只是一个传入的地址，但如果该函数本身调用其他函数，或者甚至递归调用自身，那么它需要确保该地址不会丢失或被覆盖——所以它必须被存储。这样做的自然方法是将地址压入堆栈，并在需要时将其再次弹出。

当然，它还存储函数的本地状态，因为当程序下降到函数或从函数返回时，它也需要被推送和弹出。

并非所有处理器都必须有一个堆栈，但如果你在一个堆栈上做任何远程复杂的事情，你不可避免地会实现一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:02:26.740

程序保持下一条指令的位置，堆栈指针指向一个堆（堆栈），处理器存储信息以供以后使用，例如内部寄存器的值在跳转到子程序之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T22:11:55.597

SP 用于从堆栈寄存器中检索数据，在该寄存器中存储临时数据，例如任何操作或内容的双积，然后在断电之前将其恢复

而您所知道的PC保存下一条要执行的指令的地址..

# java - 从控制台获取应用程序到 GUI

> ID：14022213
> 
> 赞同：0
> 
> 时间：2012-12-24T13:49:54.190
> 
> 标签：java, user-interface, client-server

我正在学习用Java编写代码。我想用gui写简单的聊天。到目前为止，我的应用程序通过命令行工作。我有兴趣为客户端部分建立 gui。我无法将 gui 连接到它。我的问题是我是否必须为 gui 编写特殊类，然后在客户端类中构造这样一个对象并对其进行操作？特别是我在通过 gui 在客户端和服务器之间建立通信时遇到问题。我的客户端部分的命令行应用程序代码如下。我将不胜感激有关此事的任何建议。

```
public class Client {
    public static void main(String[] args) {
        try {
            Socket socket = new Socket("localhost", 4444);
            System.out.println("CLIENT: Server connected on port 4444");

            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            System.out.println("CLIENT: IN and OUT streams opened. Starting sending data...");

            ClientInputThread thread = new ClientInputThread(socket);
            thread.start();

            String serverResponse;
            while ((serverResponse = in.readLine()) != null) {
                System.out.println("Server: " + serverResponse);
                if (serverResponse.equals("koniec")) {
                    break;
                }
            } 
            System.out.println("CLIENT: Ending server connection. Closing client streams and socket.");
            out.close();
            in.close();
            socket.close();
            System.exit(0);
        } 
        catch (UnknownHostException e) {
            System.err.println("CLIENT: Trying to connect to unknown host: " + e);
            System.exit(1);
        } 
        catch (Exception e) {
            System.err.println("CLIENT: Exception:  " + e);
            System.exit(1);
        }
    }
} 
```

和

```
public class ClientInputThread extends Thread {
    private PrintWriter out;

    public ClientInputThread(Socket clientSocket) {
        try {
            out = new PrintWriter(clientSocket.getOutputStream(), true);
        } 
        catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    public void run() {
        try {    
            BufferedReader console = new BufferedReader(new InputStreamReader(System.in));
            String userInput="";    
            while (userInput != null) {
                userInput = console.readLine();
                out.println(userInput);
                out.flush();
                if (userInput.equals("koniec")) {
                    break;
                }
            }
            System.exit(0);
        } 
        catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:03:23.530

通常的做法是尽可能将您的逻辑与 GUI 分开。我会创建一个类（或多个类）来实现发送/接收消息部分（看起来你已经这样做了）。

这些类应该提供公共方法来发送/接收消息，并且可能能够注册侦听器并通知它们传入的消息。

然后编写一个 GUI 类，将其注册为服务器类的侦听器，并在`MessageReceived`事件发生后更新文本。可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)找到事件处理基础知识，[这里](https://stackoverflow.com/questions/6270132/create-a-custom-event-in-java)是创建和处理自定义事件的示例。

**例子**

```
//an interface that will let your server work with its listeners
interface MessageListener {
    public void messageSent();
}

class Server {
    List<MessageListener> listeners = new ArrayList<MessageListener>();

    //method to register listeners to be notified of incoming messages
    public void addListener(MessageListener toAdd) {
        listeners.add(toAdd);
    }

    public void sendMessage() {
        //code your logic here
        System.out.println("Message sent");

        // Notify everybody that may be interested.
        for (MessageListener hl : listeners)
            hl.messageSent();
    }

}

class GuiImplementation implements MessageListener {
    @Override
    public void messageSent() {
         System.out.println(message);
    }
} 
```

和主要课程：

```
class Test {
    public static void main(String[] args) {
        Server server = new Initiater();
        GuiImplementation gui = new Responder();

        //register gui as a listener for incoming/outgoing messages
        server.addListener(gui);

        //this will trigger the gui method to process incoming message
        server.sendMessage(); 
    }
} 
```

# php - PHP：如何在数组中生成所有可能的值组合？

> ID：14022215
> 
> 赞同：7
> 
> 时间：2012-12-24T13:50:14.767
> 
> 标签：php

> **可能重复：**
> [将采用数字或单词并找到所有可能组合的算法](https://stackoverflow.com/questions/1256117/algorithm-that-will-take-numbers-or-words-and-find-all-possible-combinations)

如果我有一个数组，例如：

```
array('a', 'b', 'c', 'd'); 
```

我将如何创建一个包含这 4 个值的所有可能组合的新数组，例如

```
aaaa, aaab, aaac, aaad ... dddb, dddc, dddd 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T14:03:21.987

这是另一种方式。

此函数以基数递增（[数组中的元素数]）

并使用 strtr 函数将字符换成字符串。

```
function everyCombination($array) {

    $arrayCount      = count($array);
    $maxCombinations = pow($arrayCount, $arrayCount);
    $returnArray     = array();
    $conversionArray = array();

    if ($arrayCount >= 2 && $arrayCount <= 36)
    {
        foreach ($array as $key => $value) {
            $conversionArray[base_convert($key, 10, $arrayCount)] = $value;
        }

        for ($i = 0; $i < $maxCombinations; $i++) {
            $combination    = base_convert($i, 10, $arrayCount);
            $combination    = str_pad($combination, $arrayCount, "0", STR_PAD_LEFT);
            $returnArray[]  = strtr($combination, $conversionArray);
        }

        return $returnArray; 
    }

    echo 'Input array must have between 2 and 36 elements';
} 
```

然后 ...

```
print_r(everyCombination(array('a', 'b', 'c', 'd'))); 
```

这似乎也比下面的递归示例快得多。

在我的服务器上使用 microtime() 此代码在 0.072862863540649 秒内运行

下面的递归示例需要 0.39673089981079 秒。

快 138%！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T13:59:39.487

您应该使用递归函数

```
function perm($arr, $n, $result = array())
{
    if($n <= 0) return false;
    $i = 0;

    $new_result = array();
    foreach($arr as $r) {
    if(count($result) > 0) {
        foreach($result as $res) {
                $new_element = array_merge($res, array($r));
                $new_result[] = $new_element;
            }
        } else {
            $new_result[] = array($r);
        }
    }

    if($n == 1) return $new_result;
    return perm($arr, $n - 1, $new_result);
}

$array = array('a', 'b', 'c', 'd');
$permutations = perm($array, 4);
print_r($permutations); 
```

# debugging - Chrome 是否有类似 Firefox 中的错误控制台？

> ID：14022220
> 
> 赞同：-3
> 
> 时间：2012-12-24T13:50:35.273
> 
> 标签：debugging, google-chrome, firefox, cross-browser

在 Firefox 中，如果出现 JavaScript 错误或类似错误，它会显示在错误控制台中。我的网站上有一个问题似乎只发生在 Chrome 中，我认为这是一个 JavaScript 错误。我找不到任何与 Firefox 中的错误控制台相关的远程信息。那么我该如何调试呢？（是的，我是 Web 开发的新手。）

编辑：我认为我的措辞不正确。我确实知道 Chrome 中的开发工具，但它们根本没有向我展示任何东西，至少我可以看到。控制台没有显示错误或警告，只有一个空白框。

再次编辑：发现这不是我想的那样的 javascript 错误，而是我在网站上使用的插件的问题。这可以解释为什么我在控制台中什么也没得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:55:18.903

是的....

它有一个控制台......

`CTRL`+ `SHIFT`+`I` **或** `F12`

不过实话说....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:55:58.187

Chrome 内置了开发工具 - 按 F12。Javascript 错误将在右下角显示为一个小红叉，您可以使用控制台/源选项卡进行调试。

# php - 使用 csv/xls 文件将数据插入 mysql 表

> ID：14022224
> 
> 赞同：0
> 
> 时间：2012-12-24T13:50:45.440
> 
> 标签：php, mysql

我正计划构建一个基于 CMS 的 Web 应用程序，用户可以在其中上传 CSV 或 XLS(X) 格式的每日报告，我的问题是，如何将该数据插入到 mysql 表中？提前谢谢我是新手php编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:59:00.233

**1).为mysql上传CSV**

```
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import="INSERT into tablename(item1,item2,item3,item4,item5) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]')";

        mysqli_query($import) or die(mysqli_error());
    } 
```

[在这里阅读更多](http://coyotelab.org/blog/php/upload-csv-and-insert-into-database-using-phpmysql)。

**2）。** 使用 PHP Excel Reader**上传 Exel 文件：**

[http://rackerhacker.com/2008/11/07/importing-excel-files-into-mysql-with-php/](http://rackerhacker.com/2008/11/07/importing-excel-files-into-mysql-with-php/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:57:34.817

以下是如何将数据从文件插入 MySQL DB：

```
LOAD DATA INFILE 'c:/myCSVFile.csv' INTO TABLE tablename 
```

查看 MySQL 页面以获取更多选项和详细信息： http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

这是一个很好的教程：[http ://www.zorrito.com/csv-vers-mysql-correspondance-des-colonnes/](http://www.zorrito.com/csv-vers-mysql-correspondance-des-colonnes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:55:12.877

您可以直接将 MYSQL 链接到它并使用以下 SQL 语法上传信息，而不是编写脚本来从 CSV 文件中提取信息。

要将 Excel 文件导入 MySQL，首先将其导出为 CSV 文件。从生成的 CSV 文件中删除 CSV 标头以及 Excel 可能放在 CSV 文件末尾的空数据。

然后，您可以通过运行将其导入 MySQL 表：

```
load data local infile 'uniq.csv' into table tblUniq fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(uniqName, uniqCity, uniqComments) 
```

这里的字段是数据需要放在其中的实际 tblUniq 表字段。包含的和终止的行是可选的，如果您有用双引号括起来的列（例如 Excel 导出等），则可以提供帮助。

# regex - 更多正则表达式问题 - 英国电话号码 - Bash

> ID：14022226
> 
> 赞同：0
> 
> 时间：2012-12-24T13:50:53.207
> 
> 标签：regex, bash, phone-number

我的正则表达式还有更多问题，这一次，我必须要求用户输入他们的电话号码，然后检查它是否正确。

我尝试了以下方法：

```
if [[ "$number" =~ ^[\(]?[\+44,0][1-9][0-9]{3}[\)]?[\ ]?[0-9]{6} ]]
then
    echo "YEP"
else
    echo "NOPE"
fi 
```

我也对稍微改变正则表达式感到一团糟......

这似乎适用于以下数字：

```
07384323455
(01273)277364
01677 336482 
```

但`+44`里面没有任何数字......

有什么我做的非常错误的事情或任何人可以提出的建议吗？

提前致谢，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:34:37.643

试试这个表达式：`^(?:\((?:\+44\d{4}|\d{5})\)|\+44\d{3}|\d{5}) ?\d{6}$`

演示+说明：[http ://regex101.com/r/lC5kM6](http://regex101.com/r/lC5kM6)

这是您表达的解释：regex101.com/r/gT5oT8（尝试找出您的错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:26:31.587

尝试以下

```
#!/bin/bash
for number in '07384323455' '(01273)277364' '01677 336482' '+447384323455' '(+447384)323455' '+7384323455' '(+437384)323455'
do
    if [[ "$number" =~ ^[\(]?(\\+44|0){1}[1-9]{1}[0-9]{3}[\)]?[\ ]?[0-9]{6} ]];
    then
        echo "YEP"
    else
        echo "NOPE"
    fi
done 
```

*输出*

```
YEP
YEP
YEP
YEP
YEP
NOPE
NOPE 
```

**解释**

*   `(\\+44|0){1}`- 匹配字符序列`+44`或`|`零`0`，捕获组匹配一次。

# matlab - 如何在 Matlab 中制作 Hovmuller 图？

> ID：14022242
> 
> 赞同：1
> 
> 时间：2012-12-24T13:52:10.040
> 
> 标签：matlab, plot, latitude-longitude

我有 12 个矩阵，其中包含从 0 到 99 的数字。每个矩阵都是 1446x1124 双倍，对应一个月。我也有纬度和经度矩阵，每个矩阵也是 1446x1124。我想知道如何制作一个 Hovmuller 图（经度与时间图或纬度与时间图），它表示 0 到 99 之间的给定数字在 12 个矩阵中的出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-14T13:07:05.497

这是一个使用[contourf](http://www.mathworks.com/help/matlab/ref/contourf.html)的示例。诀窍在于适当地对 3D 数组进行采样：

```
x=linspace(0,pi,20);
y=linspace(0,pi,10);
t=0:10:120;
[X3d,Y3d,T3d]=meshgrid(x,y,t);
[X2d,T2dx]=meshgrid(x,t);
[Y2d,T2dy]=meshgrid(y,t);

dat3d=7*sin(X3d)+5*cos(Y3d)+T3d/max(T3d(:))+rand(size(X3d));
dat2dx=7*sin(X2d)+5*cos(y(5))+T2dx/max(T2dx(:))+rand(size(X2d)); % at y(5)
dat2dy=7*sin(x(12))+5*cos(Y2d)+T2dy/max(T2dy(:))+rand(size(Y2d));  % at x(12)
%%
figure(1);clf
contourf(X2d,T2dx,dat2dx);
shading flat; colorbar
ylabel('Time (days)')
xlabel('X distance (km)')
%%
figure(2);clf
contourf(Y2d,T2dy,dat2dy);
shading flat; colorbar
ylabel('Time (days)')
xlabel('Y distance (km)')
%%
figure(3);clf
subplot(221)
contourf(squeeze(X3d(5,:,:)),squeeze(T3d(5,:,:)),squeeze(dat3d(5,:,:)));
shading flat; colorbar
ylabel('Time (days)'); xlabel('X distance (km)')
title('Hovmoller at y(5)')
subplot(222)
contourf(squeeze(Y3d(:,12,:)),squeeze(T3d(:,12,:)),squeeze(dat3d(:,12,:)));
shading flat; colorbar
ylabel('Time (days)'); xlabel('Y distance (km)')
title('Hovmoller at x(12)')
subplot(223)
contourf(squeeze(X3d(8,:,:)),squeeze(T3d(8,:,:)),squeeze(dat3d(8,:,:)));
shading flat; colorbar
ylabel('Time (days)'); xlabel('X distance (km)')
title('Hovmoller at y(8)')
subplot(224)
contourf(squeeze(Y3d(:,17,:)),squeeze(T3d(:,17,:)),squeeze(dat3d(:,17,:)));
shading flat; colorbar
ylabel('Time (days)'); xlabel('Y distance (km)')
title('Hovmoller at x(17)') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T08:51:42.623

假设您有一个 12x100 矩阵`M`，每个字段中都有出现次数，绘制它们非常简单。

```
M = rand(12,100);
plot(M) % Plots 100 lines
plot(M') % Plots 12 lines
plot(sum(M)) % Plots the sum of 100 lines
plot(sum(M')) % Plots the sum of 12 lines
contour(M) % Gives the contour plot
surf(M) % Gives the surface plot 
```

如果您不知道如何创建 M，我只会提示使用 2 个 for 循环不会太难。

# bash - 我写了这个脚本，但似乎我错过了一些语法

> ID：14022248
> 
> 赞同：0
> 
> 时间：2012-12-24T13:52:52.393
> 
> 标签：bash

当我运行这个脚本时：

```
#!/bin/bash
#This script distributes file/folders to all POP servers within the production environment.
echo "Are you willing to transfer a file or a directory? [Answer: file/dir]"
read answer
echo "Please enter a file name or a full path to the files/directories you want to distribute"
read locfile
echo "Please enter the destination path"
read destfile
if [-n $answer] then
        case "$answer" in
                file)
                        for srv in `cat ~/srv.lst`;
                        do echo "$srv:";
                        /usr/bin/scp $locfile $srv:$destfile;
                        done
                ;;
                dir)
                        for srv in `cat ~/srv.lst`;
                        do echo "$srv:";
                        /usr/bin/scp -r $locfile $srv:$destfile;
                        done
                ;;
                *)
                echo "Please check your input"
esac
fi 
```

我得到这个输出：

```
./distribute_files: line 26: syntax error near unexpected token `fi'
./distribute_files: line 26: `fi' 
```

我试过有没有其他的，但我似乎找不到问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:33:26.607

我使用 bash 成语重写了你的脚本：

```
#!/bin/bash

#This script distributes file/folders to all POP servers within the production environment.

echo "Are you willing to transfer a file or a directory? [Answer: file/dir]"
read -r answer
echo "Please enter a file name or a full path to the files/directories you want to distribute"
read -r locfile
echo "Please enter the destination path"
read -r destfile

if [[ -n "$answer" ]] then
    case "$answer" in
        file)
            while read -r srv; do
                [[ -n "$srv" ]] || continue
                echo "$srv:"
                /usr/bin/scp -- "$locfile" "$srv:$destfile"
            done < ~/srv.lst
            ;;
        dir)
            while read -r srv; do
                [[ -n "$srv" ]] || continue
                echo "$srv:"
                /usr/bin/scp -r -- "$locfile" "$srv:$destfile"
            done < ~/srv.lst
            ;;
        *)
            echo "Please check your input"
            ;;
    esac
fi 
```

发生了什么变化？更多引用（当文件名包含空格时，您的脚本迟早会中断）并使用 of`[[...]]`而不是 deprecated 和不太健壮（在 bash 中）`[...]`。我还使用`read`了该`-r`选项（因为不允许反斜杠转义任何字符）。我也改了

```
for svr in `cat ~/srv.lst`; do 
```

进入更成熟的

```
while read -r srv; do
    ...
done < ~/src.lst 
```

（像你做的那样循环 a真的被认为是*非常*`cat`糟糕的 bash 做法）。我必须包括一个守卫`[[ -n "$srv" ]]`来忽略空行。如果要处理评论，您可以在此处添加更复杂的内容...

我还添加`--`了`scp`，以防文件`$locfile`以连字符开头。那会令人困惑`scp`（它会认为这是一种选择）。这被认为是非常好的 shell 实践。

*正如您提到的生产环境*，我想我会这样做。（我经常害怕看到生产中使用的脚本）。

实际上，您的问题是关于`[...]`这里不需要的，因为您可以安全地将其包含在`case`as 中：

```
#!/bin/bash

#This script distributes file/folders to all POP servers within the production environment.

echo "Are you willing to transfer a file or a directory? [Answer: file/dir]"
read -r answer
echo "Please enter a file name or a full path to the files/directories you want to distribute"
read -r locfile
echo "Please enter the destination path"
read -r destfile

case "$answer" in
    "")
        true
        # Do whatever you like here
        ;;
    file)
        while read -r srv; do
            [[ -n "$srv" ]] || continue
            echo "$srv:"
            /usr/bin/scp -- "$locfile" "$srv:$destfile"
        done < ~/srv.lst
        ;;
    dir)
        while read -r srv; do
            [[ -n "$srv" ]] || continue
            echo "$srv:"
            /usr/bin/scp -r -- "$locfile" "$srv:$destfile"
        done < ~/srv.lst
        ;;
    *)
        echo "Please check your input"
        ;;
esac 
```

此外，像您这样的“交互式”脚本被认为是不好的做法（这让人想起老式家庭计算机上的旧 BASIC 程序吗？）。相反，您应该考虑在脚本中使用参数（练习留给读者）。

`$locfile`通过测试是否是 dir ，您可以完全摆脱 dir vs file 的事情。并通过使用(verbose) 选项摆脱`echo`告诉它正在执行哪个文件的那个：`scp``-v`

```
#!/bin/bash

#This script distributes file/folders to all POP servers within the production environment.

read -r -p "Please enter a file name or a full path to the files/directories you want to distribute" locfile
read -r -p "Please enter the destination path" destfile

ropt=""
if [[ -d "$locfile" ]]; then
    ropt='r'
fi

while read -r srv; do
    [[ -n "$srv" ]] && /usr/bin/scp -v$ropt -- "$locfile" "$srv:$destfile"
done < ~/srv.lst 
```

事实上，我越看你的脚本做什么，我就越觉得用户在终端中输入会更快：

```
$ while read -r srv; do [[ -n "$srv" ]] && /usr/bin/scp -v "myfile" "$srv:mydestfile"; done < ~/srv.lst 
```

（因为她将能够使用制表符完成文件名），而不是调用您的脚本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T08:23:50.180

代替：

```
if [-n $answer] then 
```

在“[”之后和“]”之前使用空格。如果您想在同一行中使用 'then'，请使用`;`：

```
if [ -n $answer ]; then 
```

或者：

```
if [ -n "$answer" ]
then 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T13:58:09.637

代替

```
if [-n $answer] then 
```

尝试

```
if [ -n $answer ]
then 
```

也就是说，在括号中使用空格，并将 放在`then`不同的行上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T13:58:17.577

`[`是一个命令，因此您需要尊重空格：

```
if [ -n $answer ]; then 
```

就像`cat-n file`或`echo-e foo`无效。

```
$ which [
/usr/bin/[ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T14:01:07.407

除此之外，请始终在 中引用您的 shell 变量`test -n`，因此请`if [ -n "$answer" ]; then`改用。

# vb.net - Webbrowser 类 DocumentComplete 事件未在类中触发（不在 WinForm 中）

> ID：14022253
> 
> 赞同：0
> 
> 时间：2012-12-24T13:53:19.283
> 
> 标签：vb.net, class, webbrowser-control

我`WebBrowser`在课堂上使用课堂。我正在尝试添加 webbrowser_documentcomplete 事件处理程序，但我发现该事件没有触发。请在下面找到我正在使用的代码。此代码适用于 Windows 窗体但不在课堂上。

```
Imports System.Windows.Forms

Imports System.Threading

Public Class GoogleSearch

    Dim WithEvents WBBrowser As New Windows.Forms.WebBrowser

    Dim TimCount As New System.Timers.Timer()

    Sub New(ByVal SearchParameter As String, ByVal ResultPage As Integer)

        TimCount.Interval = 2000
        TimCount.Enabled = False
        AddHandler TimCount.Elapsed, AddressOf TimCount_Tick

        WBBrowser.Visible = True
        WBBrowser.ScriptErrorsSuppressed = True

        AddHandler WBBrowser.DocumentCompleted, AddressOf WBBrowser_DocumentCompleted

        WBBrowser.Navigate("http://www.google.com", False)
    End Sub

    Private Sub TimCount_Tick(ByVal sender As Object, ByVal e As System.EventArgs)
        Try
            TimCount.Enabled = False
'Some code goes here

        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub WBBrowser_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.EventArgs)
        Try
            If WBBrowser.ReadyState <> Windows.Forms.WebBrowserReadyState.Complete Then
                Return
            Else
                TimCount.Start()
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:06:57.193

您的 DocumentCompleted 事件的签名是：

```
 (ByVal sender As Object, ByVal e As WebBrowserDocumentCompletedEventArgs) 
```

令编译器感到惊讶的是，编译器并没有对此犹豫不决。

# java - Eclipse：Java 已启动但返回退出代码 -1073741571

> ID：14022257
> 
> 赞同：2
> 
> 时间：2012-12-24T13:53:52.653
> 
> 标签：java, windows, eclipse

使用此消息加载任何 XML 布局时 Eclipse 正在关闭`Java was started but returned exit code -1073741571`

***我的eclipse.ini***

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256M
-showsplash
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms512m
-Xmx1024m
-Xss1024k
-Declipse.buildId=v21.0.0-519525 
```

![在此处输入图像描述](../Images/d504c2930abd8ccda3e946d5a085d403.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:30:16.967

我注意到列出的 VM 是：C:\Windows32\System\javaw.exe，我相信它是 Java 7 安装版本。我的配置使用的是较早安装的 JVM 之一（来自我的 Eclipse.ini）：

```
-vm
C:\Program Files\Java\jdk1.6.0_14\bin\..\jre\bin\client\jvm.dll 
```

也许您应该更新 Eclipse 以使用 1.6 版本的 Java 来运行。从 Eclipse readme.html（在 Eclipse 安装目录中找到）：

> ```
> Specifying the Java virtual machine 
> ```
> 
> 这是一个典型的 Eclipse 命令行：
> 
> ```
> eclipse -vm c:\jdk1.4.2\jre\bin\javaw 
> ```
> 
> 提示：在运行 Eclipse 时，明确指定要使用的 Java VM 通常是个好主意。如上图所示，这是通过“-vm”命令行参数实现的。如果不使用“-vm”，Eclipse 将查看 O/S 路径。当您安装其他基于 Java 的产品时，它们可能会更改您的路径，并可能导致您下次启动 Eclipse 时使用不同的 Java VM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:08:32.463

有时意味着工作区已损坏。

创建一个新的工作区并尝试一个 XML 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T05:23:31.933

感谢大家与我分享解决方案，似乎我损坏了 xml（我仍然不确定损坏的含义，但它迫使 IDE 崩溃）这是一个片段：

```
<com.android.example.EndlesScrollView...

    <FrameLayout...
        <LinearLayout... 
```

每次我尝试`Graphical layout`在 Eclipse 中使用视图时，IDE 都会崩溃，我所做的只是完全删除该 XML 并从头开始重新创建它，XML 标签似乎有问题，这会阻止`Graphical layout`正确显示正确的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T14:17:00.470

我遇到过同样的问题。我所做的克服很简单。我刚刚下载了一个 JRE 并将其放入 eclipse 的根文件夹中，因为 eclipse 默认在该位置查找 jre。就是这样....

# xml - 使用 xslt 删除 xml 和进程中的未知字符

> ID：14022258
> 
> 赞同：0
> 
> 时间：2012-12-24T13:53:57.127
> 
> 标签：xml, xslt

我有一个 xml，它有一个 char 未知符号，如 '�' 等我需要在处理 XSLT 时将其删除

我收到此错误`Character reference "&#56256" is an invalid XML character.`

# asp.net - asp.net MVC4 认为我在 Windows 8 中的 en-US 而不是 en-GB - 我该如何更改？

> ID：14022259
> 
> 赞同：1
> 
> 时间：2012-12-24T13:54:09.133
> 
> 标签：asp.net, asp.net-mvc-4

```
 <meta name="accept-language" 
      content="@System.Globalization.CultureInfo.CurrentCulture.Name" /> 
```

...返回 en-US 而不是 en-GB，这会影响我对 jQuery 的全球化覆盖。

我安装的唯一语言/地区是英国，所以我不确定 CurrentCulture.Name 是从哪里获取的。

任何人都可以帮忙吗？

谢谢，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:28:52.820

检查 web.config，全球化标签：

```
<globalization culture="any valid culture string"
               uiCulture="any valid culture string"/> 
```

在您的情况下，该值应为：

```
<globalization culture="en-GB"
               uiCulture="en-GB"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:20:20.707

柯克是对的——谷歌浏览器有自己的语言设置，而不是从底层操作系统中获取。

# mysql - MYSQL：替换电话号码以添加国家/地区代码

> ID：14022260
> 
> 赞同：0
> 
> 时间：2012-12-24T13:54:10.740
> 
> 标签：mysql, replace, phone-number

我有一张电话号码不正确的表格。
有些数字像：06xxxxxxxx
其他数字像：06-xxxxxxxx
我想要这样的数字：+316xxxxxxxx

我的表：
用户 ID、电话号码、国家

我当前的（非工作查询）查询：
UPDATE account_number am
SET am.phonenumber = REPLACE(am.phonenumber,'06','+316');

以上将不起作用，因为如果有人有像 +31611061111 这样的号码，它也会被替换为 +31611+3161111

我希望我的问题不要太复杂。
提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:00:03.473

试试这个

**首先，更新以06-**开头的数字。

```
UPDATE account_number am 
SET am.phonenumber = CONCAT('+316', SUBSTRING(am.phonenumber, 4)) 
WHERE am.phonenumber LIKE '06-%'; 
```

然后更新从**06**开始的那些。执行顺序在这里至关重要。

```
UPDATE account_number am 
SET am.phonenumber = CONCAT('+316', SUBSTRING(am.phonenumber, 3)) 
WHERE am.phonenumber LIKE '06%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:57:59.590

尝试类似的东西

```
UPDATE account_number am
SET am.phonenumber = '+316' + Substring(am.phonenumber,3,Length(am.phonenumber) - 2)
where am.phonnumber like '06%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:56:52.353

您可以使用`WHERE`子句匹配仅以 06 开头的数字，如果这是您所追求的。要实现这一点，请使用[LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

# php - PHP - 如何将 jquery dropdown.val() 插入 mysql 查询

> ID：14022266
> 
> 赞同：0
> 
> 时间：2012-12-24T13:55:06.630
> 
> 标签：php, jquery, mysql

我想问点什么。。

我陷入了与 jquery 结合的 sql 查询中，即 dropdown.val()..

```
 echo "<script type='text/javascript'>";

echo "$(document).ready(function () {

 $('#ddlstatename').change(function(){";

echo "alert ($('#ddlstatename').val());";

$result6 = mysql_query("SELECT companyname FROM tb_company com inner join tb_companyinfo std on com.stateid = std.stateid and com.companyid = std.companyid WHERE std.productid = 1 AND std.stateid = '"$('#ddlstatename').val()"'");

echo "});";

echo "});</script>"; 
```

我尝试弹出一个：`echo "alert ($('#ddlstatename').val());";`

它具有下拉列表中的值（dllstatename 是下拉列表 ID）..

但是当我将它插入到 sql 查询中时

```
$result6 = mysql_query("SELECT companyname FROM tb_company com inner join tb_companyinfo std on com.stateid = std.stateid and com.companyid = std.companyid WHERE std.productid = 1 AND std.stateid = '"$('#ddlstatename').val()"'"); 
```

我收到错误：`std.stateid = '"$('#ddlstatename').val()"'"..`

如何更改`$('#ddlstatename').val()`into sql 查询语句？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:03:56.340

PHP 是一种服务器端脚本语言，不能这样使用。否则，您可以提出 Ajax 请求！制作一个包含 mysql 查询的单独 php 文件并使用它：

```
$(document).ready(function () {
    $('#ddlstatename').change(function(){
    $.ajax({
        url : "file.php?state="+$(this).val(), // here name of the file in which you will save query
        method : POST,
        cache : false,
        success: function(data) { // anything echoed in php file will be stored in the variable data and you can operate with it like appending it to a div
            $("#mydiv").append(data);
        }
}); 
```

PHP文件：

```
$valuefromjs = $_REQUEST['state']; // you got variable containing the value of drop-down!

$result6 = mysql_query("SELECT companyname FROM tb_company com inner join tb_companyinfo std on com.stateid = std.stateid and com.companyid = std.companyid WHERE std.productid = 1 AND std.stateid = '$valuefromjs'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:00:03.740

不幸的是，您正在尝试用李子制作橙汁。

您不能在 JavaScript 中逻辑地使用 PHP。JavaScript 在浏览器级别执行，而 PHP 是基于服务器的语言。当访问页面时，PHP 将生成输出并将其发送到提供 JavaScript 的浏览器。

您需要做的是使用 JavaScript 监听下拉列表的更改，并将请求发送到服务器。一个完美的解决方案是使用[jQuery.post()](http://api.jquery.com/jQuery.post/)

为了清楚起见，您必须创建一个 PHP 页面来接收 POST/GET 请求，然后查询数据库。这将是您`$.post`请求的目标。

Javascript：

```
$.post('query.php', {dropdownval: $('#ddlstatename').val()}, function(response){
    console.log(response);
}, 'json'); 
```

PHP（查询.php）：

```
<?php

/// mysql_connect()..

$request = json_decode($_POST['dropdownval'], true);

$result6 = mysql_query("SELECT companyname FROM tb_company com inner join tb_companyinfo std on com.stateid = std.stateid and com.companyid = std.companyid WHERE std.productid = 1 AND std.stateid = '{$request['dropdownval']}'");

die(json_encode(mysql_fetch_assoc($result6))); 
```

# php - 使用 PHP 的邮件正文中的 MIME 信息

> ID：14022271
> 
> 赞同：4
> 
> 时间：2012-12-24T13:55:24.820
> 
> 标签：php, email, mime

我一直在尝试使用 PHP Mail 函数发送带有 HTML 正文和附件的电子邮件。如果没有附加文件，我会毫无问题地收到我的 HTML 电子邮件，但是当我尝试附加文件时，我的正文中包含所有 MIME 信息 - 以及附件，已编码。

这是不带附件的电子邮件功能的代码 - 效果很好：

```
 $this->to = $to;
        $this->subject = $subject;
        $this->message = $message;
        $this->headers = "From: " . Mailer::FROM_EMAIL . "\r\n";
        $this->headers .= "MIME-Version: 1.0\r\n";
        $this->headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

这是带有附件的电子邮件版本的代码：

```
 $this->to = $to;
        $this->subject = $subject;
        $this->attachment = 
                chunk_split(base64_encode(file_get_contents($attachment)));        

        //create a boundary string. It must be unique 
        //so we use the MD5 algorithm to generate a random hash        
        $boundary = md5(date('r', time()));                
        $this->headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com\r\n";        
        $this->headers .= "MIME-Version: 1.0\r\n ";
        $this->headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-$boundary\"\r\n"; 

        $this->message =    
"--PHP-mixed-$boundary
Content-Type: text/html; charset=\"ISO-8859-1\"

" . $message . "

--PHP-mixed-$boundary
Content-Type: application/pdf; name=\"test.pdf\" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

".$this->attachment ."
--PHP-mixed-$boundary--"; 
```

我正在使用此功能发送电子邮件：

```
public function send(){

    if (preg_match(Mailer::PATTERN, trim(strip_tags($this->to)))) { 
        $cleanedTo = trim(strip_tags($this->to)); 
    } else { 
        return FALSE; 
    }                 
    return mail ($cleanedTo, $this->subject, $this->message, $this->headers); 
} 
```

我创建 Mailer 对象如下：

```
$mailer = new Mailer("youremail@gmail.com", "test mail", "Some <b>old good</b> HTML email", 'pdf/test.pdf');
//$mailer = new Mailer("youremail@gmail.com", "test mail", "Some <b>old good</b> HTML email");

$mailer->send(); 
```

我收到的电子邮件是：

```
--PHP-mixed-e37929b72bbc6f8e3b37cf802619aac1
Content-Type: text/html; charset="ISO-8859-1"

Some <b>old good</b> HTML email

--PHP-mixed-e37929b72bbc6f8e3b37cf802619aac1
Content-Type: application/pdf; name="test.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment

JVBERi0xLjMKMSAwIG9iago8 ... FT0YK

--PHP-mixed-e37929b72bbc6f8e3b37cf802619aac1-- 
```

我想我真的很接近答案了，但是......我需要你的帮助才能找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:54:26.417

> ```
> $this->headers .= "MIME-Version: 1.0\r\n ";
> $this->headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-$boundary\"\r\n"; 
> ```

删除 MIME-Version 行中换行符后的空格。Content-Type 前面的这个尾随空格将使其成为前一行的延续。

顺便说一句：如果您的代码在 Linux/Unix 上运行，则仅在每行的末尾使用“\n”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:22:56.657

使用这个标题：

```
Content-Type:multipart/mixed; 
```

我也建议看这[门课](http://pastebin.com/m5zAPix3)

# iphone - NSMutableURLRequest 使用 POST 返回 null

> ID：14022272
> 
> 赞同：2
> 
> 时间：2012-12-24T13:55:26.297
> 
> 标签：iphone, ios, nsmutableurlrequest

根据标题，我相信当我添加 POST 请求时`NSMutableURLRequest`会返回？`null`我的服务器端已全部设置好，我能够`curl -F "test=test" 127.0.0.1`得到我想要的结果。

从下面的方法中可以看出，我已经放置了几个`NSLog`s 用于错误测试。和方法有效但`didReceiveResponse`未能调用。类似于我在使用 curl 时没有放置 POST 消息并且没有任何结果。由此，我认为我在方法中遗漏了一些东西。`connectionDidFinishLoading``didReceiveData``viewDidLoad`

我还在最底部添加了如何使用 json 编码从服务器发送响应。

所以我错过了什么吗？

```
- (void)viewDidLoad {
    NSString *yourPostString = [NSString stringWithFormat:@"test=test"];
    dataWebService = [NSMutableData data];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://127.0.0.1/"]];
    NSString *postLength =  [NSString stringWithFormat:@"%d", [yourPostString length]];

    [request addValue:@"text/html; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request addValue:postLength forHTTPHeaderField:@"Content-Length"];    
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[yourPostString dataUsingEncoding:NSUTF8StringEncoding]];

    myConnection = [NSURLConnection connectionWithRequest:request delegate:self];
    [myConnection start];  
}

 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse     *)response {
    [dataWebService setLength:0];
    NSLog(@"Received Response");   
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [dataWebService appendData:data];
    NSLog(@"working %@", data);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString = [[NSString alloc] initWithData:dataWebService encoding:NSUTF8StringEncoding];
    NSLog(@"Response: %@",responseString);
} 
```

这是发送响应功能。

```
function sendResponse($status = 200, $body = '', $content_type = 'text/html'){
    $status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status);
    header($status_header);
    header('Content-type: ' . $content_type);
    echo $body;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:53:33.017

请求`Content-Type`应设置为`application/x-www-form-urlencoded`

# c# - C# 重用 SQLCommand

> ID：14022273
> 
> 赞同：4
> 
> 时间：2012-12-24T13:55:28.310
> 
> 标签：c#, sql

如何重用 SQLCommand 进行多个查询？

例如

```
SqlCommand mycommand = new SqlCommand("SElect * from BKLAH", myConnection);
mycommand.ExecuteNonQuery(); 
```

现在我想再次使用 mycommand 但使用不同的 SQL 查询。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T13:57:29.340

您可以设置`CommandText`命令的属性，如下所示：

```
mycommand.CommandText = @"UPDATE BKLAH SET a = 5 WHERE id=@id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:58:17.327

我会在一个`USING`部分中使用它。

命令 1：

```
using (SqlCommand mycommand = new SqlCommand("SElect * from BKLAH", myConnection))
{
mycommand.ExecuteNonQuery();
} 
```

命令 2：

```
using (SqlCommand mycommand = new SqlCommand("SElect * from BKLAH2", myConnection))
{
mycommand.ExecuteNonQuery();
} 
```

# opengl-es - 硬编码 GLSL 纹理 sampler2D

> ID：14022274
> 
> 赞同：2
> 
> 时间：2012-12-24T13:55:38.200
> 
> 标签：opengl-es, glsl

在我的片段着色器中，我有这条线

```
gl_FragColor = texture2D(texture, destinationTextureCoordinate) * destinationColor; 
```

哪里`texture`是制服的类型`sampler2D`。在我的代码中，我总是将其设置为值“0”。

```
glUniform1i(_uniformTexture, 0); 
```

`glUniform1i`是否可以在片段着色器中跳过对硬核 0 的调用？我尝试替换`texture`为`0`，但它抱怨不是有效类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:48:07.333

我不完全确定您要达到的目标，但这里有一些想法：

`sampler2D`顾名思义，需要对 2D 纹理进行采样。它是一个特殊的 GLSL 变量，因此编译器`0`在输入`texture2D`.

除非您使用多个纹理，否则第二个参数`glUniform1i`应该始终是`0`（默认）。如果您只使用单个纹理，则可以跳过此调用，但最好保留它。

如果您只想传递值 0，为什么需要调用 texture2D？当然你可以做到`gl_FragColor = destinationColor`。这将根据顶点着色器输出为您的片段着色`gl_Position`。如果您不打算使用纹理（或者看起来如此），我不确定为什么要实现纹理。

编辑：将两个纹理正确发送到片段着色器的代码。

```
//glClear();

// Attach Texture 0
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _texture0);
glUniform1i(_uSampler0, 0);

// Attach Texture 1
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _texture1);
glUniform1i(_uSampler1, 1);

//glDrawArrays(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T15:14:52.090

您需要一个**布局**，如下所示：

```
#version 420
//#extension GL_ARB_shading_language_420pack: enable  Use for GLSL versions before 420.

layout(binding=0) uniform sampler2D diffuseTex; 
```

这样，您就可以绑定到**采样器制服 0**。我认为这就是你想要的。但请记住，当您绑定制服时，它们会从零开始获得增量值，因此请确定您要绑定的内容。通过`glUniform1i()`函数绑定统一变量的想法是确保代码的正确性。

来源：[http ://www.opengl.org/wiki/GLSL_Sampler#Version_4.20_binding](http://www.opengl.org/wiki/GLSL_Sampler#Version_4.20_binding)

# ios - 警报视图框架变形

> ID：14022276
> 
> 赞同：1
> 
> 时间：2012-12-24T13:55:57.763
> 
> 标签：ios, uitextfield, uialertview

我有一个帧大小（10、30、300、300）的警报视图。我里面还有一个文本字段。相对于警报视图，文本字段的框架为 (20, 125, 200, 50)。我的应用程序处于横向模式和纵向模式。它适用于纵向，但不适用于横向模式。它的高度自动减小，文本字段与“确定”和“取消”按钮重叠。

如何在两种模式下管理文本字段和警报视图的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:02:35.893

这听起来像是自定义警报视图？似乎警报视图的子视图启用了一些您可能不希望启用的自动调整大小选项。如果您已将其全部放在 .xib 文件中，您可能希望查看所有视图的以下选项：

![在此处输入图像描述](../Images/43bc475049f6267a379ff6ae4ca58507.png)

如果它都是程序化的，请确保设置正确的自动调整大小掩码。例如：

```
 view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:36:27.317

最好使用以下方法在警报视图中允许输入字段，而不是显式添加`UITextField`. 这也可以防止切换方向时的失真，

```
[yourAlertView setAlertViewStyle:UIAlertViewStylePlainTextInput]; 
```

您可以从该输入字段访问文本，如下所示，

```
NSString *alertViewInputString = [[yourAlertView textFieldAtIndex: 0] text]; 
```

浏览文档以获取其他可用的输入选项`UIAlertView`

# java - 硒 + JUnit。有多干？

> ID：14022282
> 
> 赞同：1
> 
> 时间：2012-12-24T13:56:37.627
> 
> 标签：java, unit-testing, selenium, junit, automated-tests

我的情况如下：

我有几个测试用例：

*   用户登录网站；
*   用户打开主页；
*   用户看到一些信息，不是那么重要，可能是一些表或 div 等。
*   用户转到帮助台页面。
*   用户转到 CustomPage。
*   用户在页面上看到一些自定义信息。
*   以及越来越多的其他案例。

我的任务是通过 Selenium Driver 和 JUnit 在不同用户（admin1、admin2、userWithoutAccess 等）下测试所有这些案例。

但是，目前，我没有为我的任务看到任何有效的解决方案:(

例如：

```
public class HelpDeskPageTest
{
    private static WebDriver driver;

    HelpDeskPage helpDeskPage;

    @BeforeClass
    public static void setUpClass()
    {
        driver = new FirefoxDriver();
        Utils.logon(driver, "admin", "1234");
    }

    @AfterClass
    public static void tearDownClass()
    {
      driver.quit();
    }

    @Before
    public void setUp()
    {
        helpDeskPage = HelpDeskPage.open(driver);
    }

    @Test
    public void helpDeskPageIsOpen()
    {
        assertTrue(channelBrowserPage.getTitle().equals("Google: Internal HelpDesk"));
    }
} 
```

这段代码有什么作用？此代码仅测试用户 admin 是否可以打开帮助台页面。此外，`HelpDeskPageTest`类可以包含许多其他测试方法，用于测试 HelpDesk Page 上的管理员操作。没关系。

你可以问我：那么，你是从哪里看出问题的呢？我的回答如下：

1.  如果我想为其他用户测试相同的功能（例如：）`admin2`。我该怎么做？我必须使用名称创建相同的测试类：`HelpDeskPageTestForAdmin2`，修改`@BeforeClass` 方法（登录为`admin2`），然后复制所有其他代码`HelpDeskPageTest`？但这直接违反了**DRY**原则！我怎样才能避免这种情况？
2.  站点包含许多不同的页面（`Login, Home, HelpDesk, CustomPage1, CustomPage2`...）。对于单独的页面，我制作了单独的测试类（`LoginPageTest`，，，`HomePageTest`）`HelpDeskPageTest`。所有测试类都是相互独立的。结果我花了很多时间来`@BeforeClass`实例`WebDriver`化（> 10秒）的方法。这么长！我怎样才能避免这种时间延迟？如何在所有睾丸内共享实例？

JUnit 如何帮助我解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:01:43.043

当然你需要某种参数化。哪一个，取决于你到底需要什么。如果您想使用相同的参数集运行测试类中的*所有*方法，那么您需要`@Parameters`. 然后你可以有你的参数，例如`"admin", "adminPassword"`，每个方法都将在这些参数可访问的情况下运行。

但是，如果您需要每个方法具有不同的参数集，那么：如果您在编译时知道所有参数，请检查[zohhak](https://code.google.com/p/zohhak/)。如果您想要来自文件或其他提供者的参数，请检查[junitParams](http://code.google.com/p/junitparams/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:12:27.897

您在这里所做的不是**单元测试**，而只是使用 junit 作为帮助程序来运行集成或系统测试。这很常见，并不是做错任何事的迹象。但这确实意味着应该忽略适用于使用 junit进行*单元测试的一般准则、特性和最佳实践。*

所以忘记每个测试的一个断言，以及像@Before 这样的大多数注释。只需为每个*测试用例*编写一个*方法*，可能在代表主题或功能的同一个测试类中。

 *所以：

@Test 无效 testLoginAndOut() ...

@Test testLoginAndOpenHelpDeskPage() ..

像往常一样使用通用例程（例如 void loginAUser(String name) 来防止重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:00:11.367

您可以通过在 Junit 中也作为 TestNg 动态传递来使用不同的数据重复您的测试。

使用[参数化](http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html)类，您可以实现这一点。

例如，请参见下面的帖子。

[http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/](http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:44:04.440

您可以使用带有 JUnit 的参数化测试来执行此操作，但您需要使用**JUnit 4.11**或更高版本。你可以看到[我在这里做的一个例子](https://github.com/djangofan/WebDriverTestingTemplate/blob/master/core/google/src/test/java/qa/webdriver/tests/GoogleTest.java)。

使用 Gradle，您的构建依赖项将如下所示：

```
dependencies {
    // stored at: %HOMEPATH%/.gradle/caches/artifacts-14/filestore
    compile group: 'org.sikuli', name: 'sikuli-api', version: '1.0.+'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '2.+'
    compile group: 'commons-collections', name: 'commons-collections', version: '3.+'
    compile group: 'junit', name: 'junit', version: '4.+'
    compile group: 'commons-lang', name: 'commons-lang', version: '2.+'
    compile group: 'commons-io', name: 'commons-io', version: '2.+'
} 
```*

# c# - iis7上的日期时间比较

> ID：14022289
> 
> 赞同：0
> 
> 时间：2012-12-24T13:57:06.280
> 
> 标签：c#, asp.net, iis-7

我正在创建一个 Web 应用程序，我需要在其中比较两个日期和时间（甚至第二个）。

我为此使用以下代码：

```
//Check for delete button
                DateTime dtmEndDate;
                DateTime.TryParse(dtCommunication.Rows[0]["DateEnd"].ToString(), out dtmEndDate);

                if (dtmEndDate<=DateTime.Now)
                {

                //}
                //if DateTime.Compare(DateTime.Now.ToLocalTime(),dtmEndDate.ToLocalTime()) >= 0)
                //{
                    btnSend.Visible = false;
                    btnBack.Visible = false;

                    btnDelete.Visible = true;
                    btnCancel.Visible = true;         
                } 
```

如果 EndDate 日期时间已经过去，那么它将进入 if 块。

这在本地工作正常，但是当我在服务器上上传代码时，它没有相应地工作。我怎么能处理这个？

示例：
dtmEndDate= 12/27/2012 7:00 PM
当前印度时间 =12/27/2012 8:00 PM
当前服务器时间=12/27/2012 8:30 AM

以上是场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:11:11.540

如果尝试失败，TryParse 将返回 false。

```
DateTime dtmEndDate;
if (DateTime.TryParse(dtCommunication.Rows[0]["DateEnd"].ToString(), out dtmEndDate))
{
   // okey dokey
}
else
{
   throw new SomeException(String.Format("{0} is not a valid date",dtCommunication.Rows[0]["DateEnd"].ToString());
} 
```

将是一个好的开始。猜测是 dateend 是空白的，不是日期，也不是应用程序设置格式的日期。查看 ParseExact 和 System.Globalisation 命名空间的 CultureInfo。

# php - PHP有内部缓存吗？

> ID：14022291
> 
> 赞同：0
> 
> 时间：2012-12-24T13:57:21.167
> 
> 标签：php, memcached

我想将编辑器内容保存 30 秒，然后将内容上传到服务器。如果浏览器有问题或关闭。用户可以在下次登录时恢复内容。

但我认为，如果将内容保存到 SQL 中，那就不好了。我想知道PHP是否有缓存功能。就像内存缓存一样。内容被放入缓存中，如果服务器重启，缓存可以清除。并且不需要用 SQL 编写。

那么，PHP 有缓存机制吗？或者你能给我一个处理内容的解决方案，必须快速运行并且服务器必须不需要压力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:06:03.100

客户端与 PHP 无关，当用户收到页面的输出时，所有的 PHP 都已转换。您可以*通过*使用 AJAX 将缓存数据推送到服务器来完成这个 PHP 的业务。因此，您需要两种解决方案：一种在客户端管理数据（例如，使用 Javascript），另一种在服务器端管理来自客户端的数据（使用 PHP）。

这是*如果*您仍然想使用 PHP，而您很可能不需要。无论如何，PHP 没有我知道的内置缓存实现，除了可能使用之外`$_SESSION`，您需要自己动手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:05:25.893

php 中没有标准的“内部”缓存。您必须使用自己的系统、html5 的 localStorage 或 memcached/任何其他插件。不过，绝对推荐使用 Memcached。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:28:18.700

PHP 确实具有固有的缓存实现。它被称为 APC（替代 PHP 缓存）。它应该在 php.ini 中打开。APC 当然是服务器端技术，与浏览器和 javascript 技术无关。使用 memcached 的原因与使用 memcached 的原因相同（以及其他一些原因） - 给 SQL Server 一些松弛。

# c - 带和不带大括号的 switch 语句

> ID：14022295
> 
> 赞同：1
> 
> 时间：2012-12-24T13:57:40.747
> 
> 标签：c, assembly

我只是写了一个简单的程序来学习c编程

```
 1 #include<stdio.h>
  2 
  3 int main()
  4 {
  5         int a = 5;
  6         switch(a)
  7         {
  8                 case 0:
  9                         {
 10                         ;
 11                         int a = 10;
 12                         printf("%d\n",a);
 13                         break;
 14                         }
 15                 default :
 16                         printf("%d",a);
 17 
 18         }
 19         return 0;
 20 } 
```

* * *

*输出：* **5** 当我忘记大括号时，它变成：

```
 8                 case 0:
  9                        
 10                         ;
 11                         int a = 10;
 12                         printf("%d\n",a);
 13                         break;
 14 
```

* * *

*输出：* **0**

我对此有点困惑，并尝试编译和调试：

* * *

```
-   1    0x000000000040051c <+0>:     push   %rbp                          |-   1    0x000000000040051c <+0>:     push   %rbp
|   2    0x000000000040051d <+1>:     mov    %rsp,%rbp                     ||   2    0x000000000040051d <+1>:     mov    %rsp,%rbp
|   3    0x0000000000400520 <+4>:     sub    $0x10,%rsp                    ||   3    0x0000000000400520 <+4>:     sub    $0x10,%rsp
|   4 => 0x0000000000400524 <+8>:     movl   $0x5,-0x8(%rbp)               ||   4 => 0x0000000000400524 <+8>:     movl   $0x5,-0x8(%rbp)
|   5    0x000000000040052b <+15>:    mov    -0x8(%rbp),%eax               ||   5    0x000000000040052b <+15>:    mov    -0x8(%rbp),%eax
|   6    0x000000000040052e <+18>:    test   %eax,%eax                     ||   6    0x000000000040052e <+18>:    test   %eax,%eax
|   7    0x0000000000400530 <+20>:    jne    0x40054f <main+51>            ||   7    0x0000000000400530 <+20>:    jne    0x40054f <main+51>
|   8    0x0000000000400532 <+22>:    movl   $0xa,-0x4(%rbp)               ||   8    0x0000000000400532 <+22>:    movl   $0xa,-0x4(%rbp)
    9    0x0000000000400539 <+29>:    mov    -0x4(%rbp),%eax               |    9    0x0000000000400539 <+29>:    mov    -0x4(%rbp),%eax
   10    0x000000000040053c <+32>:    mov    %eax,%esi                     |   10    0x000000000040053c <+32>:    mov    %eax,%esi
   11    0x000000000040053e <+34>:    mov    $0x400614,%edi                |   11    0x000000000040053e <+34>:    mov    $0x400614,%edi
   12    0x0000000000400543 <+39>:    mov    $0x0,%eax                     |   12    0x0000000000400543 <+39>:    mov    $0x0,%eax
   13    0x0000000000400548 <+44>:    callq  0x4003f0 <printf@plt>         |   13    0x0000000000400548 <+44>:    callq  0x4003f0 <printf@plt>
   14    0x000000000040054d <+49>:    jmp    0x400563 <main+71>            |   14    0x000000000040054d <+49>:    jmp    0x400563 <main+71>
   15    0x000000000040054f <+51>:    mov    -0x8(%rbp),%eax               |   15    0x000000000040054f <+51>:    mov    -0x4(%rbp),%eax              
   16    0x0000000000400552 <+54>:    mov    %eax,%esi                     |   16    0x0000000000400552 <+54>:    mov    %eax,%esi
   17    0x0000000000400554 <+56>:    mov    $0x400618,%edi                |   17    0x0000000000400554 <+56>:    mov    $0x400618,%edi
   18    0x0000000000400559 <+61>:    mov    $0x0,%eax                     |   18    0x0000000000400559 <+61>:    mov    $0x0,%eax
   19    0x000000000040055e <+66>:    callq  0x4003f0 <printf@plt>         |   19    0x000000000040055e <+66>:    callq  0x4003f0 <printf@plt>
   20    0x0000000000400563 <+71>:    mov    $0x0,%eax                     |   20    0x0000000000400563 <+71>:    mov    $0x0,%eax
   21    0x0000000000400568 <+76>:    leaveq                               |   21    0x0000000000400568 <+76>:    leaveq 
+  22 +--  2 lines: 0x0000000000400569 <+77>: retq   ----------------------|+  22 +--  2 lines: 0x0000000000400569 <+77>: retq   --------------------- 
```

有点不同但很重要：

```
$ diff with.txt without.txt 
15c15
<    0x000000000040054f <+51>:  mov    -0x8(%rbp),%eax
---
>    0x000000000040054f <+51>:  mov    -0x4(%rbp),%eax 
```

提前致谢。

* * *

**更新：** 我学到的一课`gcc -Wall`总是一个很好的做法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:16:41.443

因此，您必须真正努力做到这一点，因为如果代码中没有额外的分号，它将无法编译。这让我觉得这是为采访或类似的东西编造的人为例子。

在您的第二个示例中，变量 a（内部）在开关大括号 {} 处创建，但它没有在该级别初始化，因为初始化仅在案例 0：代码中。所以 a 的值是完全随机的（恰好为零）

无论哪种方式，糟糕的编码风格！如果您引入变量，请不要忘记在 case 语句中使用大括号。[在 g++ 中，您实际上得到一个错误“跳转到 case-label 与 'int a' 的初始化交叉]

所以，首先，`gcc -Wall`会给“未初始化的变量”一个警告。

如果我们考虑这个例子：

```
int a = 111;

int main()
{
    int a = 2;

    printf("a=%d\n", a);
} 
```

我认为没有人会争论“我们的意思是哪个”，对吧？

或者如果我们有：

```
 int main()
 {
    int x = 12;

    int a = 11;
    if(x == 12)
    {
         int a = 2;

         printf("a=%d\n", a);
    }

  } 
```

再一次，很明显这里发生了什么，对吧？

如果我们重写您的代码以显示实际发生的情况：

```
int main()
{
        int a = 5;
        switch(a)
        { 
           int a;
               case 0:
                a=10 ;
                        printf("%d\n",a);
                        break;
                default :
                        printf("%d",a);

        }
        return 0;
} 
```

现在，这在语义上与您在第二个变体中的代码相同。它只是看起来有点不同！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:11:48.887

如果没有'{}'，你只是跳过了内部变量'a'的初始化（尽管它仍然定义），所以你得到一个未初始化的'a'，在这种情况下，它是'0'。

顺便说一句，使用“{}”，它应该输出“5”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:53:55.647

我很欣赏在帖子中使用汇编，因为它有助于以更好的方式理解代码。

现在这里发生了什么。

让我们在案例中讨论这个问题

情况1 ：

```
#include<stdio.h>

int main()
{
    int a=5;

    switch(a)
    {
        case 0:
        {
            ;
            int a = 10;
            printf("%d in case 0\n",a);
            break;
            ;
        }
        default:
            printf("%d in default case\n",a);
            break;
    }
    return 0;
} 
```

案例 1 组装：

```
 .file   "test1.c"
    .section    .rodata
.LC0:
    .string "%d in case 0\n"
.LC1:
    .string "%d in default case\n"
    .text
.globl main
    .type   main, @function
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $32, %esp
    movl    $5, 28(%esp)
    movl    28(%esp), %eax
    testl   %eax, %eax
    jne .L6
.L3:
    movl    $10, 24(%esp)
    movl    $.LC0, %eax
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf
    jmp .L4
.L6:
    movl    $.LC1, %eax
    movl    28(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf
.L4:
    movl    $0, %eax
    leave
    ret 
```

case 1 o/p: root@local-host#./a.out 5 默认情况下

解释：这是预期的，因为您可以在程序集中看到该语句

```
movl    $5, 28(%esp) 
```

我们正在复制/移动 5 到 28(%esp) 位置

```
movl    28(%esp), %eax
testl   %eax, %eax its a switch equivalent 
```

在主标签中

这里 28(%esp) 只不过是 a (int a=5;) 的值

并且在 L3 所有 24(%esp) 用于存储值 10 请注意，此处使用 ebx 寄存器作为新的 a。而 L6 是默认情况现在看下面的语句 movl 28(%esp), %edx here 28(%esp) （它只是 a 的值）被复制到 o/p 因此我们的 o/p 符合预期.

案例二：

# 包括

int main() { int a=5;

```
switch(a)
    {
    case 0:
        ;
        int a = 10;
        printf("%d in case 0\n",a);
        break;
    default:
        printf("%d in default case\n",a);
        break;
    } 
```

返回0；}

案例 2 程序集： .file "test1.c" .section .rodata .LC0: .string "%d in case 0\n" .LC1: .string "%d in default case\n" .text .globl main .type main, @function main: pushl %ebp movl %esp, %ebp andl $-16, %esp subl $32, %esp movl $5, 28(%esp) movl 28(%esp), %eax testl %eax, %eax jne .L6 .L3: movl $10, 24(%esp) movl $.LC0, %eax movl 24(%esp), %edx movl %edx, 4(%esp) movl %eax, (%esp) call printf jmp .L4 .L6: movl $.LC1, %eax movl 24(%esp), %edx movl %edx, 4(%esp) movl %eax, (%esp) call printf .L4: movl $0, %eax leave ret

案例 2 o/p：默认情况下为 root@local-host#./a.out 134513723

一个垃圾值让我在这里也解释一下 28(%esp) 是 a 的值 现在仔细看看 L3 和 L6 标签 这是你在 24%esp 的代码中发现的内容 仅当情况 0 时才创建 a满足。由于不满足 0 的情况，24%esp 将不会被初始化，即 int a = 10;

我们将默认为 L6，我们正在尝试获取尚未初始化的 24%esp 值（但它是一个有效位置），因为我们还没有进入案例 0。这就是我们得到垃圾值的原因。

案例3：

# 包括

int main() { int a=5;

```
switch(a)
    {
    case 5:
        ;
        int a = 10;
        printf("%d in case 5\n",a);
    default:
        printf("%d in default case\n",a);
        break;
    } 
```

返回0；}

案例 3 程序集： .file "test1.c" .section .rodata .LC0: .string "%d in case 5\n" .LC1: .string "%d in default case\n" .text .globl main .type main, @function main: pushl %ebp movl %esp, %ebp andl $-16, %esp subl $32, %esp movl $5, 28(%esp) movl 28(%esp), %eax cmpl $5, %eax jne .L2 .L3: movl $10, 24(%esp) movl $.LC0, %eax movl 24(%esp), %edx movl %edx, 4(%esp) movl %eax, (%esp) call printf .L2 : movl $.LC1, %eax movl 24(%esp), %edx movl %edx, 4(%esp) movl %eax, (%esp) call printf movl $0, %eax leave ret

Case 3 o/p: root@local-host#./a.out 10 in case 0 10 in default case

在这里，您可以看到新的 a 在 24(%esp) 创建并在案例 5 处初始化，因此默认位置的值将相同。

在 L3 标签中 movl 24(%esp), %edx 在 L2 标签中 movl 24(%esp), %edx

因此使用相同的位置 24(%esp)，它在 cse 5 处创建和初始化，并流经默认值。

案例4：

# 包括

int main() { int a=5;

```
switch(a)
    {
    case 0:
        ;
        static int a = 10;
        printf("%d in case 0\n",a);
        break;
    default:
        printf("%d in default\n",a);
        break;
    } 
```

返回0；}

案例 4 程序集：.file "test1.c" .section .rodata .LC0: .string "%d in case 0\n" .LC1: .string "%d in default\n" .text .globl main .type main , @function main: pushl %ebp movl %esp, %ebp andl $-16, %esp subl $32, %esp movl $5, 28(%esp) movl 28(%esp), %eax testl %eax, %eax jne .L6 .L3: movl a.1706, %edx movl $.LC0, %eax movl %edx, 4(%esp) movl %eax, (%esp) call printf jmp .L4 .L6: movl a.1706, % edx movl $.LC1, %eax movl %edx, 4(%esp) movl %eax, (%esp) call printf .L4: movl $0, %eax leave ret .size main, .-main .data .align 4 。输入 a.1706, @object .size a.1706, 4 a.1706: .long 10 .ident "GCC: (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 4.4.5" .section .note.GNU-stack,"",@progbits

案例 4 O/p：默认为 root@local-host#./a.out 10

这是有道理的，因为静态类型是全局的并存储在数据部分中，因此在执行期间，全局值（即静态 int a）在数据部分中并初始化为 10。

案例5：

# 包括

int main() { int a=5;

```
switch(a)
    {
    case 0:
        {
        ;
        static int a = 10;
        printf("%d in case 0\n",a);
        break;
        }
    default:
        printf("%d in default\n",a);
        break;
    } 
```

返回0；}

案例 5 程序集： .file "test1.c" .section .rodata .LC0: .string "%d in case 0\n" .LC1: .string "%d in default\n" .text .globl main .type main , @function main: pushl %ebp movl %esp, %ebp andl $-16, %esp subl $32, %esp movl $5, 28(%esp) movl 28(%esp), %eax testl %eax, %eax jne .L6 .L3: movl a.1706, %edx movl $.LC0, %eax movl %edx, 4(%esp) movl %eax, (%esp) call printf jmp .L4 .L6: movl $.LC1, % eax movl 28(%esp), %edx movl %edx, 4(%esp) movl %eax, (%esp) call printf .L4: movl $0, %eax leave ret .size main, .-main .data .align 4 .type a.1706, @object .size a.1706, 4 a.1706: .long 10 .ident "GCC: (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 4.4.5" .section .note.GNU-stack,"",@progbits

案例 5 O/p：默认为 root@local-host#./a.out 5

这里由于'{'定界符，静态值在汇编程序阶段被限制在案例0中，默认情况仍然从28（％esp）获取值，这与汇编时的预期情况一样，案例0具有静态并且超出范围默认。

您可以通过删除中断和应用 '{' '}' 分隔符来尝试不同的格式

永远不要忘记根据范围和 wrto 汇编代码来查看它。

# android - 镜像（翻转）视图/进度条

> ID：14022298
> 
> 赞同：7
> 
> 时间：2012-12-24T13:57:59.593
> 
> 标签：android, android-widget, android-progressbar, material-components-android, progress-indicator

我有一个定制的圆形进度条，用于时钟上的秒计数器，我想翻转它，以便时钟逆时针计数。

在这里搜索解决方案，我发现了这个：

[从右到左进度条？](https://stackoverflow.com/questions/3877823/right-to-left-progressbar)

这显然适用于水平进度条，但我不能简单地将它旋转 180 度，因为这只会将时钟移动 180 度并且它仍然会顺时针滴答作响。

有没有其他方法可以镜像 ProgressBar 或任何视图？

编辑：

刚刚找到“android:rotationY”和等效的程序，但理想情况下这需要用于 2.2 及更高版本..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-04-02T11:00:43.407

我能够简单地使用XML`ProgressBar`中的属性进行翻转：`scaleX`

```
android:scaleX="-1" 
```

这也适用于其他`View`人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:34:39.707

以与水平进度条相同的方式扩展 ProgressBar，但在 onDraw 方法中，翻转画布而不是旋转它：

```
public class InverseProgressBar extends ProgressBar {

public InverseProgressBar(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public InverseProgressBar(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public InverseProgressBar(Context context) {
    super(context);
}

@Override
protected synchronized void onDraw(Canvas canvas) {
    canvas.scale(-1f, 1f, super.getWidth() * 0.5f, super.getHeight() * 0.5f);
    super.onDraw(canvas);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-08T10:06:44.980

是的。在较新版本的[材料设计库](https://github.com/material-components/material-components-android/releases)中，可以镜像圆形进度条：

*   在具有此属性的布局中

    ```
    app:indicatorDirectionCircular 
    ```

*   或以编程方式使用此方法

    ```
    setIndicatorDirection() 
    ```

请参阅[此处](https://material.io/components/progress-indicators/android#types)了解更多信息。

# php - 访问包含西班牙语字符的文件返回 404

> ID：14022300
> 
> 赞同：2
> 
> 时间：2012-12-24T13:58:08.920
> 
> 标签：php, apache, encoding, utf-8

我刚刚实现了一个新服务器，一切都很顺利，但是对 UTF-8 的支持似乎并没有完全发挥作用。

例如，我有以下照片：`José-Antonio.jpg`，浏览器将其输出为`Jos%C3%A9-Antonio.jpg`但尝试访问它，将返回`404`错误代码。

我确实在我的`/etc/httpd/conf/http.conf/`文件中尝试了以下两种设置，但似乎都不起作用：

```
#AddDefaultCharset UTF-8
AddDefaultCharSet ISO-8859-1 
```

那么有什么想法我还能尝试解决这个问题吗？顺便说一句，我正在运行一个 wordpress 网站。

# html - 将一个 Div 垂直居中在一个 Div 内

> ID：14022304
> 
> 赞同：1
> 
> 时间：2012-12-24T13:58:14.270
> 
> 标签：html, css

我编写了以下程序来从数据库中获取通知并显示它。情况是显示`div`里面`div.note` *垂直居中*。

我试过了`vertical-align: middle`，`vertical-align: center`但都失败了。我发现它们是用于表格单元格的。所以我选择了这个。

```
<?php
include("../common/config.php");
$query = "SELECT content FROM st_notifications";
$result = mysqli_query($dbc, $query) or die(mysqli_error($dbc));
while($row = mysqli_fetch_row($result))
{
    echo "<div class='note'><div style='word-wrap: break-word;'>".$row[0]."</div></div>";
}
?>
<script>
    $(function () {
        $(".note").each(function () {
            var note = $(this);
            var diff = 100 - ($("div", note).outerHeight() / 2);
            $("div", note).css({ 'margin-top': diff >= 0 ? diff : 0 });
        });
    });
</script> 
```

输出是这样的。

![在此处输入图像描述](../Images/7ceb14c458f7736a90631e0756f0f5e1.png)

的CSS`.note`是：

```
.note {
    height: 200px;
    width: 500px;
    margin: 25px auto 0px auto;
    background-color: #fff;
    padding: 10px;
    vertical-align: baseline;
    background-image: url(../images/notebg.png);
    background-size: 100% 100%;
} 
```

Chrome 调试器的输出是：

![在此处输入图像描述](../Images/f64f78bb53355bc410bf91eaf7f3d8eb.png)

您可以看到两个边距都不`100px`是相对分配的。

我读[了这个](https://stackoverflow.com/questions/7913613/vertically-center-a-div)。但不知道如何将其与我的问题联系起来

[这里](https://stackoverflow.com/questions/10279831/how-to-center-vertically-child-elements-inside-div)的解决方案似乎非常长。

有人能告诉我哪里错了吗？提前致谢。

PS：我通过直接调用元素并使用 each() 函数来尝试使用 jQuery，两者都给出了相同的结果。Chrome 中没有关于 JavaScript 或 PHP 的调试错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:02:03.933

用于`display: table-cell;`对齐嵌套的 div 垂直居中

[**演示**](http://jsfiddle.net/8QjZN/)

HTML

```
<div class="wrapper"><div class="inner">This is vertically centered</div></div> 
```

CSS

```
div.wrapper {
    display: table-cell;
    vertical-align: middle;
    height: 200px;
    width: 300px;
    background-color: #ff0000;
    text-align: center;
}

div.inner {
    display: inline-block; /* This is optional */
} 
```

如果`div`是固定的

方式 2[**演示**](http://jsfiddle.net/6nJuQ/)

HTML

```
<div class="container"><div class="float">This will work with fixed dimensions</div></div> 
```

CSS

```
.container {
    width: 500px;
    height: 300px;
    background: #eee;
    position: relative;
}

.float {
    position: absolute;
    height: 50px;
    width: 150px;
    left: 50%;
    top: 50%;
    margin-left: -75px; /* Half Of Width */
    margin-top: -25px; /* Half Of Height */
    border: 1px solid #aaa;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:08:07.290

将内部 div 的位置设置为绝对，顶部设置为 50%。使用 position 和 top,left 属性来获得正确的定位。如果有帮助，请尝试将您的父 div 的位置设为相对位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:01:30.053

**JQUERY 解决方案**

我正在使用我某天创建的这个功能：

```
/**
 * Permits to center an element vertically in its parent
 * The div to center must exist before calling this function
 * @param : element => div to center
 * @param : offset => offset to apply
 * @param : parent => center into a parent, by default, window size is used
 */
function centerDivVertically(element,offset,parent)
{
    parent = parent || null;

    var myOffset = (offset != null) ? offset : 0;
    var height = window.innerHeight ? window.innerHeight : $(window).height();

    //Align to the parent
    if(parent != null)
        height = $(parent).height();

    var elementHeight = height - $(element).height();
    $(element).css('top',(elementHeight/2)+myOffset + 'px');    
}

//Usage
centerDivVertically('#myDiv',0,null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:03:48.133

```
.outer {
    width: Xpx;
    height: Ypx;
    border: 1px solid red;
}
.inner {
    width: 50%;
    height: 50%;
    background: blue;
    margin: 0 auto;
    margin-top: 25%;
} 
```

演示： http: [//jsfiddle.net/maniator/tUX5Z/](http://jsfiddle.net/maniator/tUX5Z/) ​</p>

# android - 收到电子邮件后启动移动应用程序

> ID：14022323
> 
> 赞同：1
> 
> 时间：2012-12-24T14:00:03.060
> 
> 标签：android, notifications, arduino, email

我正在尝试通过电子邮件将 Arduino Leonardo 板连接到 Android 应用程序，Arduino 通过 Arduino 的 ASP.net Web 界面发送一封电子邮件，其中包含电子邮件正文中的特定文本。我正在尝试构建一个在收到“Arduino 电子邮件”后自动启动的移动应用程序，遗憾的是我对 Android 应用程序编码的经验不够。有人可以指出我，我应该寻找什么事件？

如果我的问题不够清楚，请告诉我，我可以提供更多信息。

# c# - 选择树视图节点

> ID：14022329
> 
> 赞同：0
> 
> 时间：2012-12-24T14:00:39.063
> 
> 标签：c#, .net, treeview, parent

我有一个 TreeNode，我需要允许用户只选择一个子节点作为父节点。例子：

```
-Car
---Ferrari
---Lamborghini
---Porsche

-Shoes
---Nike
---Puma
---Adidas 
```

我可以选择“法拉利”和“耐克”，但不能选择“汽车”或“鞋子”中的其他孩子。我怎样才能做到？
在我这样做之后，我需要像这样连接父母和孩子的文本：汽车：法拉利。
你能帮助我吗？
问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:13:35.870

如果您需要每棵树选择一个，我建议使用两个 TreeView。我还会质疑您是否需要使用 TreeViews 或者两个 ListBoxes 或 ComboBoxes 是否更合适。

如果你不知道你会有多少“树”，但你知道它们有多深，你可以使用两个或更多的 ListBoxes（或 ListViews）来显示一个列表列表：

```
Categories:
   Shoes: Nike
   Cars:  Ferrari
   Fruits: Apple (selected)

Selected Category (Fruits):
   Apple (selected)
   Orange
   Pear
   Kiwi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:19:37.043

您可以处理该`BeforeCheck`事件并清除兄弟复选框，例如：

```
private bool skipEvents = false; // this flag to avoid infinite recursion

void treeView1_BeforeCheck(object sender, TreeViewCancelEventArgs e)
{
    // if is a root (car or shoes), or it's a recursive call, just return
    if (skipEvents || e.Node.Parent == null) 
        return;
    skipEvents = true;
    foreach (TreeNode sibling in e.Node.Parent.Nodes)
    {
        // set the other siblings to unchecked
        if (sibling != e.Node)
            sibling.Checked = false;
    }
    skipEvents = false;
} 
```

这是一个连接所选父母和孩子的示例：

```
public string GetSelectionString()
{
    string categorySep = Environment.NewLine;
    string parentChildSep = " : ";
    StringBuilder sb = new StringBuilder();
    foreach (TreeNode root in this.treeView1.Nodes)
    {
        foreach (TreeNode node in root.Nodes)
        {
            if (node.Checked)
            {
                if (sb.Length > 0)
                    sb.Append(categorySep);
                sb.Append(root.Text);
                sb.Append(parentChildSep);
                sb.Append(node.Text);
                break;
            }
        }
    }
    return sb.ToString();
} 
```

例如，如果选择了 Ferrari 和 Puma，它会返回如下字符串：

```
Car : Ferrari
Shoes : Puma 
```

* * *

**根据评论编辑：**

此代码执行您在评论中提出的要求（选择/取消选择父母子女）：

```
private bool skipEvents = false; // this flag to avoid infinite recursion

void treeView1_BeforeCheck(object sender, TreeViewCancelEventArgs e)
{
    // if it's a recursive call, just return
    if (skipEvents)
        return;

    skipEvents = true;

    // it's a root (e.g. car or shoes) 
    if (e.Node.Parent == null)
    {
        // if root node is going to be checked, just cancel the action (i.e. block parent selection)
        if (!e.Node.Checked)
        {

            e.Cancel = true;
        }
    }
    else
    {
        foreach (TreeNode sibling in e.Node.Parent.Nodes)
        {
            // set the other siblings to unchecked
            if (sibling != e.Node)
                sibling.Checked = false;
        }
    }

    skipEvents = false;
}

void treeView1_AfterCheck(object sender, TreeViewEventArgs e)
{
    // if it's a recursive call, just return
    if (skipEvents)
        return;

    this.skipEvents = true;

    // it's a root (e.g. car or shoes) 
    if (e.Node.Parent == null)
    {
        // root node has been unchecked, so uncheck the children
        if (!e.Node.Checked)
        {
            foreach (TreeNode child in e.Node.Nodes)
                child.Checked = false;
        }
    }
    else
    {
        // if a child node has been checked --> check the parent
        // otherwise, uncheck the parent
        e.Node.Parent.Checked = e.Node.Checked;
    }

    this.skipEvents = false;
} 
```

**NB**
`TreeView`类有一个在 Vista/Windows7 中出现的关于复选框的[已知错误。](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/9d717ce0-ec6b-4758-a357-6bb55591f956/)
基本上，如果您双击一个复选框，它不会启动任何事件，因此这种管理将受到影响。要解决此问题，您可以使用本文中解释的类[而](https://stackoverflow.com/a/6130543/316644)不是`TreeView`.

# iphone - Xcode 图像背景交换设备依赖

> ID：14022330
> 
> 赞同：1
> 
> 时间：2012-12-24T14:01:06.363
> 
> 标签：iphone, objective-c, iphone-5

目前我在 XCode 的 Attribute Inspector 下的 Image View 中定义我的应用程序的背景图像。

![我在属性检查器中的视图](../Images/9aea365c32d16263a38d58db4c4c3752.png)

但是，当 iPhone 5 查看应用程序时，我想使用不同的背景——这是针对游戏应用程序的，因此某些屏幕上有我想延长的表格。我知道这已经写了很多，并且需要一些 if/then 语句。我的问题是：如果我已经使用属性检查器定义了背景图像，是否有代码可以覆盖我可以添加到我的 .h 和 .m 文件中的内容？

这就是我的想法：这是我要添加到我的 AppDelegate 文件中的代码：

```
#define IS_WIDESCREEN (fabs((double)[[UIScreen mainScreen]bounds].size.height - (double)568) < DBL_EPSILON)
#define IS_IPHONE ([[[UIDevice currentDevice]model] isEqualToString:@"iPhone"])
#define IS_IPOD   ([[[UIDevice currentDevice]model] isEqualToString:@"iPod touch"])
#define IS_IPHONE_5 (IS_IPHONE && IS_WIDESCREEN) 
```

这是我在 .m 文件中使用的代码：

```
if(IS_IPHONE_5) {

    } else {      

} 
```

所以这真的是我正在寻找的：

1.  我把这段代码放在哪里——我必须定义一个新的（无效）语句吗？
2.  我在 { } 之间使用什么代码来调用该新图像并告诉它显示为背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:07:31.277

只需获取您想要显示的图像，而不是您已经存在的“HomeBG-568h@2x.png”，大小为 640 x 1136，因此当设备是 iphone 5 时，xcode 将自动使用该图像，只要您的应用程序调用“HomeBG” .png”图像。希望有帮助！

# android - Google TV : 支持的 Android 设备 0 台设备

> ID：14022333
> 
> 赞同：4
> 
> 时间：2012-12-24T14:01:10.447
> 
> 标签：android, android-manifest, google-play, google-tv

[![apk 0 设备](../Images/2be5be05ee910122be3c42edf66733c2.png)](https://i.stack.imgur.com/7lEQd.png) [图片链接](https://postimg.cc/87CxrgxG)

这是我在谷歌播放端上传的谷歌电视应用程序清单我收到消息“支持 0 台设备”有人可以告诉我我做错了什么（我想定位 googleTV 设备）

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="*******"
    android:versionCode="12"
    android:versionName="1.081" >

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="17" 
        android:maxSdkVersion="17"/>

    <uses-feature android:name="android.hardware.touchscreen" android:required="false"/> 
    <uses-feature android:name="com.google.android.tv" android:required="true"/> 

    <application
        android:name=".App"
        android:icon="@drawable/logo_min"
        android:label="@string/app_name" >
        <activity
            android:name=".WelcomeActivity"
            android:label="@string/title_activity_main" > 
            <!-- android:screenOrientation="landscape" -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:50:24.353

您可能希望使用“aapt dump badging”查看，但看起来您的 APK 中的某些内容正在请求本机工具（图表中的本机平台）——也许是您包含的库？

可以肯定的是，使用任何原生内容都会使您目前无法在 Google TV 上被看到。

我也有点担心功能中的大写电视。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:10:24.027

我认为您的 minSdkVersion 需要为 11。

参考： [https ://developers.google.com/tv/android/docs/gtv_market_publishing_checklist](https://developers.google.com/tv/android/docs/gtv_market_publishing_checklist)

# c++ - 实例未在主函数中声明

> ID：14022334
> 
> 赞同：0
> 
> 时间：2012-12-24T14:01:23.773
> 
> 标签：c++, c++11, mingw

我在创建实例时遇到问题。这确实是微不足道的代码，并且总是可以正常工作，但是当我开始为 C++11 使用 MinGW 编译器时，发生了此错误。

main.cpp:16:35：错误：“myObjekt”未在此范围内声明

main.cpp:16:50：错误：预期的类型说明符 main.cpp:16:50：错误：

预期的 ';' main.cpp:20:12：错误：给定类型''参数

'删除'，预期的指针

```
 #include <iostream>
    #include "Objekt.h"

    int main(int argc, char** argv){

        std::cout << "Hi!" << std::endl;

        Colonisation::Objekt::Objekt* myObjekt = new Colonisation::Objekt::Objekt(5,4);
        std::cout << myObjekt->getXPosition() << std::endl;
        std::cout << myObjekt->getYPosition() << std::endl;

        delete myObjekt;

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:34:18.123

因此，以下内容应按预期工作：

```
int main(int argc, char** argv){

    std::cout << "Hi!" << std::endl;

    Colonisation::Objekt* myObjekt = new Colonisation::Objekt(5,4);
    std::cout << myObjekt->getXPosition() << std::endl;
    std::cout << myObjekt->getYPosition() << std::endl;

    delete myObjekt;

    return 0;
} 
```

# javascript - 使用本地 JSON 数据填充 ExtJS 3.4 组合框

> ID：14022335
> 
> 赞同：6
> 
> 时间：2012-12-24T14:01:24.960
> 
> 标签：javascript, json, extjs, extjs3

我正在使用 ExtJS 3.4，我需要使用以下数据填充组合框：

```
"[{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}]" 
```

它来自以前的 XMLHttpRequest，我将它存储在一个变量中，因此：

```
my_variable = "[{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}]" 
```

所以，我有以下 ExtJS 3.4 组合框：

```
cbxSelDomini = new Ext.form.ComboBox({
                            hiddenName: 'Domini',
                            name: 'nom_domini',
                            displayField: 'nom_domini',
                            valueField: 'cod_domini',
                            mode: 'local',
                            triggerAction: 'all',
                            listClass: 'comboalign',
                            typeAhead: true,
                            forceSelection: true,
                            selectOnFocus: true,
                            store: mystore
}); 
```

这个组合框应该从我命名为“mystore”的 Ext.data.Store 中获取数据：

```
store: mystore = new Ext.data.Store({
                                    autoload: true,
                                    reader: new Ext.data.ArrayReader(
                                        {
                                            idIndex: 0  // id for each record will be the first element
                                        }),
                                    data: dataprova,
                                    fields: [ 
                                                        {type: 'integer', name: 'cod_domini'},
                                                        {type: 'string', name: 'nom_domini'}
                                                    ]
                                    }), 
```

**我的第一个问题是，在第一个实例中，数据没有加载到 dataStore，甚至明确地告诉：mystore.loadData(my_variable);**

有人可以告诉我我做错了什么吗？在 fireBug 中，我收到诸如“this.data 未定义”、“this.reader 未定义”或“b 未定义”和“h 未定义”之类的错误。

当我将数据格式更改为 javascript 数组时，也会出现同样的错误，例如：

```
var dataexample = [[1, 'Sant Esteve de Palautordera'], [2, 'Parc Natural del Montseny']]; 
```

并在存储“数据”属性上调用 dataexample。

我完全迷路了...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T17:15:34.527

变量中的数据`my_variable`是 JSON 格式，所以`JsonReader`应该使用。要使用该阅读器，您可以简单地使用`JsonStore`. 例子：

```
var data = '[{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}]';

var mystore = new Ext.data.JsonStore({
    //autoload: true,
    fields: [ 
        {type: 'integer', name: 'cod_domini'},
        {type: 'string', name: 'nom_domini'}
    ]
});
mystore.loadData(Ext.decode(data)); // decode data, because it is in encoded in string

var cbxSelDomini = new Ext.form.ComboBox({
    hiddenName: 'Domini',
    name: 'nom_domini',
    displayField: 'nom_domini',
    valueField: 'cod_domini',
    mode: 'local',
    triggerAction: 'all',
    listClass: 'comboalign',
    typeAhead: true,
    forceSelection: true,
    selectOnFocus: true,
    store: mystore
}); 
```

工作样本：http: [//jsfiddle.net/Ajnw7/](http://jsfiddle.net/Ajnw7/)

# c# - WebService 中的 XML 和 SOAP over TCP 是有状态的吗？

> ID：14022338
> 
> 赞同：1
> 
> 时间：2012-12-24T14:01:29.890
> 
> 标签：c#, .net, wcf, web-services

TCP是一个有状态的协议，它可以维护客户端和服务器交互之间的状态。SOAP 保持通信中立性，可以在任何传输协议上使用，例如 HTTP、SMTP、TCP 或 JMS，所以如果我们使用 SOAP 作为数据交换协议并且它是通过 TCP 协议维护的，那么 WebService 是否会在执行时保持其状态与客户的互动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:06:55.270

取决于服务。使用 WCF，可以在使用 TCP 时创建有状态和无状态服务。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms733040.aspx](http://msdn.microsoft.com/en-us/library/ms733040.aspx)和 ServiceContractAttribute.SessionMode。

# tsql - Grails Project jdbc TSQL如何创建datetime2列

> ID：14022339
> 
> 赞同：0
> 
> 时间：2012-12-24T14:01:56.333
> 
> 标签：tsql, grails, jdbc

嗨，我有一个 Grails 项目，无论我在域类中提供的日期（`java.sql.Timestamp`，`java.util.Date`）数据类型，它总是`datetime`在 TransactSQL 数据库（Microsoft SQL Server 2008 R2）中创建一个列。我需要一个`datetime2`字段。

有人知道我可以使用 DomainClass 创建`datetime2`字段的数据类型吗？

我用这个：postgresql-9.0-801.jdbc4.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:12:49.580

在您的映射部分：

```
dateField(sqlType: 'datetime2') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:15:21.457

您可以使用映射来自定义数据库类型

```
class Address {

         Date  date

         static mapping = { date type: 'datetime2' } 

} 
```

# android - 如何使用片段制作标签（使用工厂内容）？

> ID：14022342
> 
> 赞同：1
> 
> 时间：2012-12-24T14:02:11.300
> 
> 标签：android, tabs, android-fragments

我正在尝试使用片段制作标签（使用工厂的内容）。在单击每个选项卡时，显示的内容是 "Content for tab with tag: (tag)" 。请在这里指导我。

这是我的项目：[http ://www.filedropper.com/androiduxframework](http://www.filedropper.com/androiduxframework)

这是我的日志：

```
12-26 13:06:51.768: D/AndroidRuntime(485): Shutting down VM
12-26 13:06:51.778: W/dalvikvm(485): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-26 13:06:51.808: E/AndroidRuntime(485): FATAL EXCEPTION: main
12-26 13:06:51.808: E/AndroidRuntime(485): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androiduxframework.pragya/com.androiduxframework.pragya.FirstActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.os.Looper.loop(Looper.java:123)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-26 13:06:51.808: E/AndroidRuntime(485):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 13:06:51.808: E/AndroidRuntime(485):  at java.lang.reflect.Method.invoke(Method.java:507)
12-26 13:06:51.808: E/AndroidRuntime(485):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-26 13:06:51.808: E/AndroidRuntime(485):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-26 13:06:51.808: E/AndroidRuntime(485):  at dalvik.system.NativeStart.main(Native Method)
12-26 13:06:51.808: E/AndroidRuntime(485): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-26 13:06:51.808: E/AndroidRuntime(485):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.Activity.setContentView(Activity.java:1657)
12-26 13:06:51.808: E/AndroidRuntime(485):  at com.androiduxframework.pragya.FirstActivity.onCreate(FirstActivity.java:14)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-26 13:06:51.808: E/AndroidRuntime(485):  ... 11 more
12-26 13:06:51.808: E/AndroidRuntime(485): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.androiduxframework.Tabs: make sure class name exists, is public, and has an empty constructor that is public
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
12-26 13:06:51.808: E/AndroidRuntime(485):  ... 20 more
12-26 13:06:51.808: E/AndroidRuntime(485): Caused by: java.lang.ClassNotFoundException: com.androiduxframework.Tabs in loader dalvik.system.PathClassLoader[/data/app/com.androiduxframework.pragya-2.apk]
12-26 13:06:51.808: E/AndroidRuntime(485):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-26 13:06:51.808: E/AndroidRuntime(485):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-26 13:06:51.808: E/AndroidRuntime(485):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-26 13:06:51.808: E/AndroidRuntime(485):  at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
12-26 13:06:51.808: E/AndroidRuntime(485):  ... 23 more
12-26 13:06:54.688: I/Process(485): Sending signal. PID: 485 SIG: 9 
```

请帮我纠正错误。谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:07:50.967

你可以看看下面的例子

[https://dl.dropbox.com/u/68130108/FragmentTabs.rar](https://dl.dropbox.com/u/68130108/FragmentTabs.rar)

# c# - AES 解密 - 将代码从 C# 移植到 Java

> ID：14022343
> 
> 赞同：2
> 
> 时间：2012-12-24T14:02:14.653
> 
> 标签：c#, java, encryption, aes

我正在尝试将以下代码从 C# 移植到 Java 中。我已经多次尝试尝试解密我的加密数据，但每次都会出现乱码。下面的代码使用 org.bouncycastle 库，不幸的是，C# 代码和 Java 代码之间似乎没有 1-1 映射。

我基本上知道三件事：

*   byte[] 文件 - 这包含我的加密文件。通常是一个相当大的字节数组。
*   byte[] 填充 - 每次都是 32**字节** ，似乎前 16 个字节被用作 IV。
*   byte[] aesKey - 每次都是 32**字节**，我不知道 C# 代码是如何使用这个数组的。

**原始 C# 代码**

```
 private byte[] decryptmessage(byte[] cmessage, byte[] iVector, byte[] m_Key)
    {
        {
        //// randomly generated number acts as inetialization vector
        m_IV = new byte[16];
        Array.Copy(iVector, 0, m_IV, 0, 16);

        // GenerateAESKey();
        KeyParameter aesKeyParam = ParameterUtilities.CreateKeyParameter("AES", m_Key);
        ParametersWithIV aesIVKeyParam = new ParametersWithIV(aesKeyParam, m_IV);

        IBufferedCipher cipher = CipherUtilities.GetCipher("AES/CFB/NoPadding");
        cipher.Init(false, aesIVKeyParam);
        return cipher.DoFinal(cmessage);
        }
    } 
```

**我在 Java 中的尝试**

```
 private static byte[] decryptMessage(byte[] file, byte[] iVector, byte[] aesKey) throws Exception {
    IvParameterSpec spec = new IvParameterSpec(Arrays.copyOfRange(iVector, 0, 16));
    SecretKeySpec key = new SecretKeySpec(Arrays.copyOfRange(aesKey, 0, 16), "AES");
    Cipher cipher = Cipher.getInstance("AES/CFB/NoPadding");
    cipher.init(Cipher.DECRYPT_MODE, key, spec);
    return cipher.doFinal(file);
  } 
```

PS：这是解密的最后一步。在这之前，我必须从我的加密文件中取出一些初始字节集，并使用 RSA 私钥对它们进行解密以获得这个 AES 密钥。

如果有人有一个链接/文档，我可以阅读它正确地解释了使用 AES 加密文件的整个过程，然后在密钥上使用 RSA 并在加密文件的开头使用 iv，我将非常高兴。我一直在盯着C#代码，我想看看有图的东西。

编辑：字节不是位。

EDIT2：将填充重命名为 iVector 以保持一致性和正确性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:44:16.707

在 C# 代码中，您使用 256 位（32 字节）初始化密钥，从而获得 AES-256。在 Java 代码中，您只使用 128 位（16 字节）并获得 AES-128。

所以修复可能是：

```
SecretKeySpec key = new SecretKeySpec(aesKey, "AES"); 
```

然后您可能会发现 Java 不想使用 256 位密钥（出于法律原因）。然后，您必须安装[Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 6](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)。

# javascript - 在 switch 语句中添加 html

> ID：14022344
> 
> 赞同：0
> 
> 时间：2012-12-24T14:02:19.657
> 
> 标签：javascript, jquery, html, switch-statement

我在下拉菜单中使用了一个 switch 语句

我想在每种情况下添加 html 代码，如链接、图像等。

index.html 中的标头标签

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" defer="defer">
    function showDetails(){
        var org = $("#org").attr("value");
        var div1 = $("#div1");

       switch(org)
        {
        case "1":
          div1.html("this is all about organization 1");
          break;
        case "2":
          div1.html("this is all about organization 2");
          break;
        case "3":
          div1.html("this is all about organization 3");
          break;
        default:
          div1.html("Select Organization");
        }
        $("#div2").fadeOut(300);
        div1.fadeIn(300);
    }

    function TerritoryDetails(){
        var terr = $("#terrSelect").attr("value");
        var div = $("#div2");
        div.fadeIn(300);
        $("#div1").slideUp(300); //hide organization (optional)
       switch(terr)
        {
        case "1":
          div.html("this is all about Territory 2");
          break;
        case "2":
          div.html("this is all about Territory 2");
          break;
        case "3":
          div.html("this is all about Territory 3");
          break;
        case "4":
          div.html("this is all about Territory 4");
          break;
        case "5":
          div.html("this is all about Territory 5");
          break;
        case "6":
          div.html("this is all about Territory 6");
          break;
        case "7":
          div.html("this is all about Territory 7");
          break;
        default:
          div.html("Select Territory");
        }
    }

    function cascadeSelect(parent, child){
            var childOptions = child.find('option:not(.static)');
                child.data('options',childOptions);

            parent.change(function(){
                childOptions.remove();
                child
                    .append(child.data('options').filter('.sub_' + this.value))
                    .change();
            })

            childOptions.not('.static, .sub_' + parent.val()).remove();

    }

    $(function(){
        cascadeForm = $('.cascadeTest');
        orgSelect = cascadeForm.find('.orgSelect');
        terrSelect = cascadeForm.find('.terrSelect');
        locSelect = cascadeForm.find('.locSelect');

        cascadeSelect(orgSelect, terrSelect);
        cascadeSelect(terrSelect, locSelect);
    });
</script> 
```

完整的代码在这里

[http://jsfiddle.net/5tmwg/5/](http://jsfiddle.net/5tmwg/5/)

我缺乏 javascript 和 jQuery 的经验

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:05:22.607

你在正确的道路上。

`this is all about organization 1`

`html`例如，您可以用代码替换这些字符串

```
`div1.html("<p style='color:#0066cc'>this is all about organization 1<p>");` 
```

# java - 加载简单 GWT 视图的异常

> ID：14022347
> 
> 赞同：0
> 
> 时间：2012-12-24T14:02:41.640
> 
> 标签：java, gwt

我有一个简单的`entrypoint`类，只加载一个面板

```
 public class TestUI implements EntryPoint
    {
        PanelA panelA = new PanelA();

        public void onModuleLoad()
        {
            final RootPanel rootPanel = RootPanel.get();

            rootPanel.add( panelA );
        }
    } 
```

这是面板B

```
 public class PanelB extends HTMLPanel
    {
        public PanelB()
        {
            super("Panel B");
            final PanelA panelA = new PanelA();
            Button btnNewButton = new Button("Go to panel A");
            btnNewButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    final RootPanel rootPanel = RootPanel.get();
                    rootPanel.clear();
                    rootPanel.add( panelA );
                }
            });
            add(btnNewButton);
        }

    } 
```

这是面板A

```
 public class PanelA extends HTMLPanel
    {
        public PanelA( )
        {
            super("Panel A");
            final PanelB panelB = new PanelB();
            Button btnNewButton = new Button("Go to panel B");
            btnNewButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    final RootPanel rootPanel = RootPanel.get();
                    rootPanel.clear();
                    rootPanel.add( panelB );
                }
            });
            add(btnNewButton);
        }
    } 
```

但是，当我尝试加载包含此入口点的页面时，它会失败并出现下面的异常跟踪。如果我将入口点中对面板 A 的引用替换为纯 HTML 面板，则它可以正常加载。我的简单面板有什么问题？我基本上是在尝试创建一个 GUI，我可以在其中在页面之间来回单击，我认为这将是实现该目标的第一步。

```
Exception in thread "Code server for stockwatcher from Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 com.google.gwt.dev.shell.BrowserChannel$RemoteDeathError: Remote connection lost
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:536)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Software caused connection abort: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
    at java.io.BufferedOutputStream.flush(Unknown Source)
    at java.io.DataOutputStream.flush(Unknown Source)
    at com.google.gwt.dev.shell.BrowserChannel$ReturnMessage.send(BrowserChannel.java:1310)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:533)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:37:41.670

您正在导致相互递归或循环依赖调用...这是详细分析...

在`TestUI` 您正在创建`PanelA`. **当你创建一个类的实例时会发生什么？** *它的构造函数被调用*。在这种情况下`PanelA`， 的构造函数被调用。在那里，您正在创建一个实例，`PanelB`因此`PanelB`将调用 ' 的构造函数。现在再次`PanelB`创建一个实例，`PanelA`因此它的构造函数被调用并且该过程无限重复。更好的编程技术应该避免这种循环依赖。避免这种情况，它将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:10:24.393

对于您正在创建的每个面板 A，您都会创建一个新的面板 B，它本身正在创建一个新的面板 A，它正在创建一个新的面板 B，它无限地继续。也许这就是问题所在。我认为您应该仅在 onClick-Event 中调用面板 B/面板 A 的构造函数。

# jquery - 获取 Null/Empty 数据时的 DataTable

> ID：14022351
> 
> 赞同：1
> 
> 时间：2012-12-24T14:03:06.603
> 
> 标签：jquery, jsp, spring-mvc, datatable

我正在使用`Spring MVC`and`DataTable with jQuery`来制作表格和相关的东西。

当没有数据可用时出现以下错误。

```
DataTables warning (table id='results'): Requested unknown parameter '1' from the data source for row 0 
```

我在互联网上搜索，发现列数可能不匹配，但事实并非如此。但是，是的，有时，数据为空/空，因此在 UI 中没有可呈现的内容。在这种情况下，我们甚至不显示表格。

但是这个错误总是出现。我刚刚启动 DataTables 并使用默认行为：

```
jq(document).ready( function(){
        jq("#results").dataTable();          
    }); 
```

我的表格代码是这样的：

```
<table border="1" style="font-size:12px;width: 868px; table-layout: fixed; word-wrap: break-word;border-collapse: collapse" id='results'>
<thead>
   <tr>
    <th>Batch Name</th>
    <th>Batch User</th>
    <th>Total URL Count</th>
    <th>Submitted URL Count</th>
    <th>Processed URL Count</th>
    <th>Submission Time</th>
    <th>Batch Status</th>
    <th>Download Link</th>
  </tr>
 </thead>
  <tbody id="orderbody">
   <tr id="pattern" style="display:none" >
    <td width="15%"><span  id="ibatchName">Batch Name</span></td>
    <td width="15%"><span  id="ibatchUser">Batch User</span></td>
    <td width="11%"><span  id="iTotalUrlCount" >Total URL Count</span></td>
    <td width="11%"><span  id="iSubmittedURLCount" >Submitted URL Count</span></td>
    <td width="11%"><span  id="iProcessedURLCount">Processed URL Count</span></td>
    <td width="11%"><span  id="iSubmissionTime" >Submission Time</span></td>
    <td width="11%"><span  id="ibatchStatus" >Batch Status</span></td>
    <td width="15%"><span  id="iDownloadLink" >Download Link</span></td>
    </tr>

    <c:choose>
    <c:when test="${  not empty batches}">
    <c:forEach var='batchDetail' items='${batches}'>
     <tr id="pattern0">
    <td>${batchDetail.batchName}</td>
    <td>${batchDetail.batchUser}</td>
    <td>${batchDetail.totalUrlCount}</td>
    <td>${batchDetail.submittedUrlCount}</td>
    <td>${batchDetail.processedUrlCount}</td>
    <td>${batchDetail.submissionTimeFormatted}</td>
    <td>${batchDetail.batchStatus}</td>
    <td>${batchDetail.downloadLink}</a></td>
   </tr>
    </c:forEach>    
    </c:when>

    <c:otherwise>
    <tr id="pattern0">
    <td colspan="8"><span class="batch_not_found">You are not authorized to see any of the batches. </span></td>
    </tr>
    </c:otherwise>
</c:choose>
   </tbody>   
  </table> 
```

我该怎么办？当没有获取数据时，有什么方法可以禁用此警告？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:13:03.177

我自己得到了答案！

```
<tr id="pattern0">
    <td colspan="8"><span class="batch_not_found">You are not authorized to see any of the batches. </span></td>
    </tr> 
```

是问题。DataTable 无法呈现它。把它移到桌子外面，它起作用了。

# node.js - 在node.js中使用强大的express时如何更改上传路径

> ID：14022353
> 
> 赞同：8
> 
> 时间：2012-12-24T14:03:07.447
> 
> 标签：node.js, file-upload, express, formidable

实际上我遇到了两个问题

**一、如何更改上传路径**

我的文件夹结构是这样的：

```
|__app.js
|__upload 
```

我的节点代码在 app.js 并从中启动，所以我想将上传图片上传到上传文件夹，我更改了路径：

```
var form = new formidable.IncomingForm;
form.uploadDir = "./upload"; 
```

好像上传成功了，但是我不知道文件在哪里，它不在上传文件夹中。

那么正确的路径名是什么？

**第二个问题是**

如果我不更改它，它可以正确上传到，`C:/Users/ADMINI~1/AppData/Local/Temp` 但它会在没有格式的情况下重命名，

那么如何获取上传格式并自行重命名？

**第三个问题是**

我还将处理程序绑定到`process`事件，例如

```
form.on('progress', function(bytesReceived, bytesExpected) {
    console.log(bytesReceived + ' ' + bytesExpected);
}); 
```

但它似乎不起作用，当上传日志什么都没有。为什么？我错过了什么吗？

这是我的所有代码：

```
app.post('/upload', function (req, res) {
    var form = new formidable.IncomingForm;
    // form.uploadDir = "./upload";
    console.log(form.uploadDir);

    form.parse(req, function(err, fields, files){
      if (err) return res.end('You found error');
      console.log(files.image);
    });

    form.on('progress', function(bytesReceived, bytesExpected) {
        console.log(bytesReceived + ' ' + bytesExpected);
    });

    form.on('error', function(err) {
        res.writeHead(200, {'content-type': 'text/plain'});
        res.end('error:\n\n'+util.inspect(err));
    });

    // res.end('Done');
    res.send("well done");

    return;
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T21:19:11.013

首先，您必须告诉您的应用您不希望`bodyParser`处理文件上传。

```
app.use(express.bodyParser()); 
```

相当于[_](http://www.senchalabs.org/connect/bodyParser.html) _

```
app.use(express.json());
app.use(express.urlencoded());
app.use(express.multipart()); 
```

删除最后一行以自己处理文件上传。在初始化表单时添加一些自定义选项

```
var form = new formidable.IncomingForm({ 
  uploadDir: __dirname + '/tmp',  // don't forget the __dirname here
  keepExtensions: true
}); 
```

现在你的代码应该可以工作了。

# android - Android 中是否有任何支持在不使用 zxing 库的情况下扫描和读取 QR 码？

> ID：14022358
> 
> 赞同：1
> 
> 时间：2012-12-24T14:03:21.020
> 
> 标签：android, qr-code, zxing

我们可以使用 zxing 库来验证和读取二维码。但是 Android 中是否有任何原生 API 支持？或者有没有其他API或方法可以扫描和读取Android中的二维码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:06:47.953

Android 没有原生支持扫描二维码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:15:47.820

除了使用 zxing 库之外，没有其他方法可以读取 Barcode。您可以使用这种称为[biggu 条码扫描器](http://bit.ly/scannerkitsdk-android-latest)的替代方案，它仅在内部使用 zxing 库。否则，您还有其他选择，即调用可以扫描 QR 码的活动。如果没有活动不可用，则它会重定向到 Play 商店并安装一个应用程序。对于第二个选项，也不需要 zxing 库。这是一个[例子](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# facebook-javascript-sdk - 我为我父亲和我创建了一个业务页面，我希望他能收到通知

> ID：14022363
> 
> 赞同：0
> 
> 时间：2012-12-24T14:03:51.160
> 
> 标签：facebook-javascript-sdk

我以为我为我父亲的钓鱼指南服务创建了一个商业页面很好（而且效果很好）但现在由于距离我很少参与他的业务，每个在 Facebook 上发表评论的人都认为我是我的父亲.. 当有人评论图片或向他发送消息时，他不会收到通知。我对此感到敬畏，因为它是我页面的一部分。有什么方法可以将他链接到业务页面，以便他也可以收到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:06:15.683

是的。如果您转到您的页面并单击“编辑页面”->“管理员角色”，您应该能够输入他的电子邮件或用户名并将他作为管理员添加到页面。然后他也应该收到通知

# xml - 在 XSD 中有多个具有不同 id 的 div

> ID：14022365
> 
> 赞同：0
> 
> 时间：2012-12-24T14:03:56.453
> 
> 标签：xml, xsd

目前我正在使用 XSD for XHTML 处理 XML 模式定义。我的 XHTML 的结构如下。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>
<div id="AAA">// (Required, maxnumber = 1)
   <div id="BBB">//  (Required, maxnumber = 1)
      <div id="CCC">...</div>// (Optional)
      <div id="DDD">...</div>// (Optional)
      <div id="EEE">...</div>// (Required, maxnumber = 1)
      <div id="FFF" class="IIII">...</div>// (Required, maxnumber = 1)
   </div>
</div>
</body>
</html> 
```

我需要检查 div 标签以了解我的 XHTML 的以下条件

*   检查是否出现了所有必需的 div 标签？
*   检查所有 div 标签是否按照示例代码中定义的顺序？
*   检查类属性是否只有 IIII 或 22222 值

我真的很感谢你的帮助。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:51:26.347

我想你会很失望，知道 3 个要求中只有一个可以实现！我会尽量详细解释原因！

`<div id="AAA"> // (Required, maxnumber = 1)`
**如何声明一个必需的元素：**用 minOccurs = "1" 和 maxOccurs = "1"声明元素`div`（即使你没有明确定义 minOccurs 和 maxOccurs 默认值是 1,1。所以这是可选的）

`<div id="CCC">...</div>// (Optional)`
**如何声明可选元素：**使用 minOccurs="0" 声明元素 'div'，使其外观为可选。

**但是基于属性值无法验证元素的外观！**不可能在同一父级下拥有与曾经需要和曾经可选的相同元素！
一种解决方法是例如使用 minOccurs = "3" 和 maxOccurs="10" 进行单一定义

```
<xs:element minOccurs="3" maxOccurs="10" name="div" type="div"/> 
```

这将强制 Document 至少出现 3 个`div`元素并限制最多 10 个！您可以通过设置使其无限`maxOccurs="unbounded"`。这样您就可以验证是否存在最小数量的 div 元素！

**回到你的问题：**

> 1.检查是否所有需要的div标签都出现了？

我已经回答过了。

> 2.检查所有div标签是否按照示例代码中定义的顺序？

再一次，这在 XSD 中是不可能实现的！对同一元素有多个定义会使它变得模棱两可！

> 3.检查类属性是否有IIII或22222值

只有这样才能实现使用枚举列表定义的 simpleType..

例子：

```
 <xs:attribute name="class" type="ClassType" use="optional" /> 
```

这应该在元素/复杂类型之外：

```
 <xs:simpleType name="ClassType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="IIII"/>
      <xs:enumeration value="2222"/>
    </xs:restriction>
  </xs:simpleType> 
```

# google-maps - 在 gmap 上突出显示一个国家的特定状态

> ID：14022368
> 
> 赞同：1
> 
> 时间：2012-12-24T14:04:34.890
> 
> 标签：google-maps, maps

我想将一个国家的特定状态显示为突出显示和阴影中的剩余区域。

我想像 [http://www.redfin.com/homes-for-sale#!disp_mode=M&lat=29.770534985365693&long=-95.21904093471284&market=houston&sf=1,2&v=8&zoomLevel=8一样实施](http://www.redfin.com/homes-for-sale#!disp_mode=M&lat=29.770534985365693&long=-95.21904093471284&market=houston&sf=1,2&v=8&zoomLevel=8)

我已经搜索过这个以及我所理解的，我需要为此使用覆盖。

我有一个问题，

我是否需要为边界提供 lat 和 lng，或者可以通过提供一些参数（如状态代码等）来实现。

任何显示阴影和高亮区域的例子都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:27:06.383

> 我需要为边界提供 lat 和 lng

您需要访问边界的坐标，然后在覆盖整个世界（或至少是感兴趣的区域）的多边形中使它们成为一个洞。

有以下选项：

*   [具有倒置多边形的 kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_nosidebar.html?lat=37.155939&lng=-79.497071&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/virginia_inverted_kml.xml)

[![弗吉尼亚州上空洞的 KML](../Images/1060cc878c24a15a879c4392844c8599.png)](https://i.stack.imgur.com/iso46.png)

*   [将倒置的 kml 导入 FusionTable 并在地图上显示](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_State_invert4_center2.html)（似乎不再起作用）

# opengl - OpenGL深度纹理伪影

> ID：14022370
> 
> 赞同：0
> 
> 时间：2012-12-24T14:04:46.077
> 
> 标签：opengl, framebuffer, render-to-texture, depth-buffer, shadow-mapping

我正在为我的小 3d 引擎实现阴影映射。但是，深度纹理中似乎存在伪影，可以通过使用纹理并观察阴影，或者在四边形上绘制深度纹理来看到。

这是在四边形上绘制深度纹理时的样子：

![](../Images/0eac8ca70533780d7959cd2ec3ed393c.png)

是的，那些白色的小矩形不应该在那里。

那么，可能是什么原因造成的呢？

打开glfw窗口：

```
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 4);
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 0);
glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
glfwOpenWindow(width, height,
               8, 8, 8, 8,
               24, 0, // 24 = depth buffer bits
               GLFW_WINDOW); 
```

创建深度帧缓冲区和纹理：

```
glGenFramebuffers(1, &depth_framebuffer_);

glGenTextures(1, &depth_texture_);
glBindTexture(GL_TEXTURE_2D, depth_texture_);
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, 512, 512, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

glBindFramebuffer(GL_FRAMEBUFFER, depth_framebuffer_);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depth_texture_, 0);

glDrawBuffer(GL_NONE);

if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
  exit(-1); 
```

渲染到深度纹理：

```
glBindFramebuffer(GL_FRAMEBUFFER, depth_framebuffer_);
glClear(GL_DEPTH_BUFFER_BIT);
render_objects();
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:12:27.357

> 那么，可能是什么原因造成的呢？

对我来说似乎是硬件问题。我有几个“死”的显卡，由于内存故障，它们表现出类似的模式。可以像损坏的焊盘一样简单，将显卡放入回流焊炉几秒钟就可以解决问题。也可能是一个死的 GPU 内存控制器。

# javascript - 禁止模式窗口在背景点击时关闭

> ID：14022373
> 
> 赞同：0
> 
> 时间：2012-12-24T14:04:56.653
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap，并且正在创建一个带有阴影背景的模式。我希望模态一直保持到我单击关闭，并且当有人单击背景时它**不会**关闭。

我找不到解决方案。我知道如何处理背景，但是没有背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T12:06:34.973

```
$('#myModal').modal({
  backdrop: 'static',
  show: false
})

// by default backdrop: true so just set it to static. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:00:26.087

在模态中，有一个称为背景的数据属性。您可以将其设置为 true 或 false：

```
data-backdrop="false" 
```

如果需要背景，也可以将其指定为静态，但单击时不应关闭。

另一个技巧是禁用背景并拥有具有以下属性的自己的背景，以便模式不会在单击时关闭。背景的CSS：

```
{
position:relative;
height:100%;
width:100%;
background:#000000;
opacity:0.2;
} 
```

# doctrine-orm - GeneratedValue策略之间的差异

> ID：14022374
> 
> 赞同：69
> 
> 时间：2012-12-24T14:05:10.007
> 
> 标签：doctrine-orm

在[Doctrine 文档](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html#annref-generatedvalue)`@GeneratedValue`中，他们提到注释存在一些不同的策略：

*   `AUTO`
*   `SEQUENCE`
*   `TABLE`
*   `IDENTITY`
*   `UUID`
*   `CUSTOM`
*   `NONE`

有人可以解释一下所有这些策略之间的区别吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-12-25T08:42:07.950

检查[最新的学说文档](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/basic-mapping.html#identifiers-primary-keys)

这是一个摘要：可能的生成策略列表：

**AUTO（默认）**：告诉 Doctrine 选择使用的数据库平台首选的策略。首选策略是`IDENTITY`MySQL、SQLite 和 MsSQL 以及`SEQUENCE`Oracle 和 PostgreSQL。这种策略提供了完全的可移植性。

**SEQUENCE：**告诉 Doctrine 使用数据库序列进行`ID`生成。此策略当前不提供完全可移植性。Oracle、PostgreSql 和 SQL Anywhere 支持序列。

**IDENTITY：**告诉 Doctrine 在数据库中使用特殊的标识列，在插入行时生成一个值。此策略目前不提供完全可移植性，并受以下平台支持：

*   MySQL/SQLite/SQL Anywhere =>`AUTO_INCREMENT`
*   微软 SQL =>`IDENTITY`
*   PostgreSQL =>`SERIAL`

**TABLE：**告诉 Doctrine 使用单独的表进行`ID`生成。这种策略提供了完全的可移植性。*该策略尚未实施！*

**NONE：**告诉 Doctrine 标识符是由您的代码分配并因此生成的。必须在将新实体传递给 EntityManager#persist 之前进行分配。`NONE`与完全放弃是一样的`@GeneratedValue`。

### 从 2.3 版开始：

**UUID：**告诉 Doctrine 使用内置的通用唯一标识符生成器。这种策略提供了完全的可移植性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-22T19:55:27.077

当然接受的答案是正确的，但它需要一个小的**更新**，如下所示：

根据[文档的](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html#annref-generatedvalue)**注释**部分：

> 此注解是**可选**的，仅在与@Id 结合使用**时才有意义。**如果未使用 @Id 指定此注释，则默认使用**NONE策略。**
> 
> 策略属性是**可选**的。

根据[文档的](http://docs.doctrine-project.org/en/latest/reference/basic-mapping.html#identifier-generation-strategies)**基本映射**部分：

> `SEQUENCE`: 告诉 Doctrine 使用数据库序列来生成 ID。此策略当前不提供完全可移植性。**Oracle**、**PostgreSql**和**SQL Anywhere**支持序列。
> 
> `IDENTITY`：告诉 Doctrine 使用数据库中的特殊标识列，在插入行时生成一个值。此策略目前不提供完全可移植性，并受以下平台支持：
> 
> *   **MySQL** / **SQLite** / **SQL Anywhere** (AUTO_INCREMENT)
> *   **MSSQL**（身份）
> *   **PostgreSQL**（串行）。

## 否决票

关于某人给出的反对意见，应该注意已添加**SQL Anywhere并且接受的答案需要进行小****更新**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-28T04:08:54.173

从程序员的角度来看，它们都达到了相同的结果：即为主键字段提供一个 UNIQUE 值。严格来说，还需要满足两个进一步的条件，即：密钥也必须是强制性的，而*不是 null*。

唯一的区别在于提供主键值的内部实现。此外，还需要考虑性能和数据库兼容性因素。不同的数据库支持不同的策略。

最容易理解的是`SEQUENCE`，这通常也是产生最佳性能优势的一种。在这里，数据库维护一个内部序列，其 nextval 由一个额外的 SQL 调用访问，如下所示：

```
SELECT nextval ('hibernate_sequence') 
```

在插入每个新行期间分配下一个值。尽管有额外的 SQL 调用，但对性能的影响可以忽略不计。使用`SEQUENCE`，可以使用`@SequenceGenerator`注释指定初始值（默认为 1）和分配大小（默认 = 50）：

```
@SequenceGenerator(name="seq", initialValue=1, allocationSize=100) 
```

该`IDENTITY`策略依赖于数据库通过在表中维护一个附加列来生成主键，每当插入新行时，该列的下一个值就会自动生成。每个类型层次结构都需要一个单独的标识生成器。

该`TABLE`策略依赖于一个单独的表来存储和更新每个新行插入的序列。它使用悲观锁来维护序列，因此是所有这些选项中最慢的策略。可能值得注意的是，`@TableGenerator`可以使用注解来指定此策略的生成器名称、表名称和模式：

```
@TableGenerator(name="book_generator", table="id_generator", schema="bookstore") 
```

使用 UUID 选项，持久性提供程序（例如 Hibernate）生成一个通用唯一 ID，其形式为：*'8dd5f315-9788-4d00-87bb-10eed9eff566'*。要选择此选项，只需在数据类型为 UUID 的字段声明上方应用 @GeneratedValue 注释即可；例如：

```
@Entity
public class UUIDDemo {

    @Id
    @GeneratedValue
    private UUID uuid;

    // ...
} 
```

最后，该`AUTO`策略是默认策略，使用此选项，持久性提供程序将为正在使用的数据库选择最佳策略。

# c# - 将 XML 节点附加到现有 XML 文件

> ID：14022382
> 
> 赞同：0
> 
> 时间：2012-12-24T14:06:14.930
> 
> 标签：c#, .net, linq-to-xml

我有以下格式的 XML

```
<Attachment>
 <AttachmentName>Top Nav Menu.docx</AttachmentName>
 <Subject>Attachment1</Subject>
 <Sender>JameelM@orioninc.com</Sender>
 </Attachment> 
```

我想在附件关闭节点之后附加另一个附件，如上所述。以下是我为编写 xml 文件而编写的代码

```
 var doc = new XDocument(

                new XDeclaration("1.0", "utf-16", "true"),

                new XProcessingInstruction("test", "value"),

                new XElement("Attachment",new XElement("AttachmentName", attachment.Name),
                                          new XElement("Subject", exchangeEmailInformation.Subject),
                                          new XElement("Sender", exchangeEmailInformation.Sender
                                          )));
            doc.Save(ConfigInformation.BackUpPath + FolderId[index]+"\\Attachments"+index+".xml"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:44:25.043

为您的附件创建根节点：

```
var doc = new XDocument(
    new XDeclaration("1.0", "utf-16", "true"),
    new XProcessingInstruction("test", "value"),
    new XElement("Attachments", 
        new XElement("Attachment", 
            new XElement("AttachmentName", attachment.Name),
            new XElement("Subject", exchangeEmailInformation.Subject),
            new XElement("Sender", exchangeEmailInformation.Sender)
    ))); 
```

当您决定附加另一个附件时，加载文档并将附件添加到根目录：

```
doc.Root.Add(new XElement("Attachment",
    new XElement("AttachmentName", attachment.Name),
    new XElement("Subject", exchangeEmailInformation.Subject),
    new XElement("Sender", exchangeEmailInformation.Sender)
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:29:15.860

我会使用 XMLSerializer 类。在那里，您可以像处理类一样处理您的 XML 文件。看看吧，你会喜欢的：）

加载 XML -> 在代码中使用类（修改、删除、添加）-> 序列化回 XML

# c# - HoughLinesP 参数！单元？

> ID：14022385
> 
> 赞同：1
> 
> 时间：2012-12-24T14:06:47.130
> 
> 标签：c#, opencv

我正在使用 OpenCV 2.4.2

这是来自 OpenCV 文档的引文

> C++: void HoughLinesP(InputArray image, OutputArray lines, double rho, double theta, int threshold, double minLineLength=0, double maxLineGap=0)
> 
> 参数：
> 
> **image** – 8 位单通道二进制源图像。该功能可以修改图像。
> 
> **线**- 线的输出向量。每条线由一个 4 元素向量 表示，其中 和 是每个检测到的线段的终点。
> 
> **rho** – 累加器的距离分辨率（以像素为单位）。
> 
> **theta** – 累加器的角度分辨率，以弧度为单位。
> 
> **threshold** – 累加器阈值参数。只有那些获得足够票数的行才会返回（）。
> 
> **minLineLength** – 最小行长度。比这短的线段被拒绝。
> 
> **maxLineGap** - 同一条线上的点之间的最大允许间隙以链接它们

我的问题是

**minLineLength**和**maxLineGap**是以像素为单位测量的吗？或者是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T16:19:00.637

Digging into an old Intel OpenCV manual, you can see that it describes LineLength as Pixels [http://opencv.jp/opencv-1.0.0_org/docs/opencvman_old.pdf](http://opencv.jp/opencv-1.0.0_org/docs/opencvman_old.pdf)

> It retrieves no more than linesNumber line segments; each of those must be not shorter than lineLength pixels.

Pixels seem to be the most logical here. Rho, the distance resolution of the accumulator is defined as being in Pixels.

The sample here shows a value of 30 being used:
[http://www.scribd.com/doc/77374092/155/cv-HoughLinesP](http://www.scribd.com/doc/77374092/155/cv-HoughLinesP)

# regex - Netbeans 可以使用正则表达式来制作我自己的“格式代码”功能吗？

> ID：14022389
> 
> 赞同：0
> 
> 时间：2012-12-24T14:07:03.940
> 
> 标签：regex, arrays, netbeans, formatting

我在 NetBeans 中搜索一个函数或“格式化代码”函数，以便以适当的方式在 PHP 中格式化我的数组。

例如：

```
$arr1 = array('allow',' => array('index', 'admin', 'view', 'create', 'update', 'delete'),' => array('@'),), array('deny', 'users' => array('*'),); 
```

^^ 很难读。因此，如果有要搜索的功能：

*   每次有 a`array(`后用.`'`替换它`array(\n'`。

或者

*   每次都有`,\s'\w+'`替换`=>`为`,\s'``,\s\n'`

有谁知道有这个插件吗？（顺便说一句，我不是正则表达式的明星，所以我只是在寻找 array() 格式问题。）

# javascript - 将 facebook javascript 函数存储在文件中并使用它们

> ID：14022394
> 
> 赞同：2
> 
> 时间：2012-12-24T14:07:40.930
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

嗨，我正在编写代码以通过 facebook 登录用户。我将所有函数与其他 javascript 函数一起存储在一个文件中。我尝试从另一个 javascript 函数调用登录函数并得到以下错误：未定义登录。这是 index.html 的代码

```
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
<script type="text/javascript" src="javascript.js"></script>
</head>
<body>
<div id="fb-root"></div>
<a href = "#" onClick = "sayhi();">Hi!</a>
</body>
</html> 
```

这是javascript.js

```
window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '213443452146381', // App ID from the App Dashboard
      channelUrl : '//http://abc.in/', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') 
    {
    alert('connected');
    } 
    else if (response.status === 'not_authorized') {
    alert('not_authorized');
    login();
    } else {
    alert('chillonly');
    login();
    }
    });

    function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            alert('connected');
            testAPI();
        } else {
           alert('not_connected_login');
           testAPI();
        }
    });
    }
    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        console.log('Good to see you, ' + response.name + '.');
    });
    }
    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
// ]]>

function sayhi()
{
alert('Hi');
login();
} 
```

我怀疑facebook jdk是否正在加载。请提出一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:18:40.470

该方法`login()`不可访问，因为它在本地范围内。

如果您想`function login() {`在该范围之外使用，则需要将其设为全局或某个全局命名空间的一部分。

改变

```
function login() { 
```

到

```
window.login = function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:21:49.530

1.  首先，将函数移出 window.fbAsyncInit。由于在本地范围内，它们无法访问。

2.  然后，您可以拥有一个仅在加载 JS-SDK 时设置为 true 的标志，并且您可以“阻止” **window.fbAsyncInit**之外的任何进程，直到设置该标志为止。就像是：

    ```
    var isLoaded = false;
    window.fbAsyncInit = function() 
    {
       isLoaded = true;
       ...
       ... 
    }

    function myFunc(myVar) 
    {
      if(isLoaded) 
      {
      // Do FB related stuff
      }
    } 
    ```

# c++ - BOOST_FOREACH 和一个向量

> ID：14022395
> 
> 赞同：2
> 
> 时间：2012-12-24T14:07:43.787
> 
> 标签：c++, boost, boost-foreach

我有一个场景向量，`vector<Scene>`。作为参考或不作为参考，迭代元素的正确方法是什么？

例如这个：

```
BOOST_FOREACH(Scene scene, mScenes)
{
       .....
} 
```

宏是在向量上的每次迭代中复制场景，还是在幕后使用参考？

那么它与此有什么不同：

```
BOOST_FOREACH(Scene& scene, mScenes)
{
       .....
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T14:10:23.803

`BOOST_FOREACH`行为与你告诉他的完全一样，按值、引用或 const 引用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T14:10:32.570

您的第一个示例*确实*复制了每个`Scene`. 最有可能的是，您想要第二个。使用第一个，您可以修改`scene`并且矢量将不受影响。如果您不修改向量，则应使用`const Scene& scene`. 如果是，请使用`Scene &`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T14:23:56.140

请注意，对于 C++11，您不需要使用 BOOST_FOREACH（一些返回一对迭代器的 boost 库除外）。

```
for(const Scene& scene: mScenes){} 
```

适用于 BOOST_FOREACH 的规则相同：您很可能希望使用 const &，很少使用 &，并且从不复制。

# objective-c - 显示技能树并与之交互的最佳方式是什么

> ID：14022396
> 
> 赞同：1
> 
> 时间：2012-12-24T14:07:47.213
> 
> 标签：objective-c, macos, cocoa

我正在尝试创建一个类似于此网站上的技能树界面的界面：http: [//www.pathofexile.com/passive-skill-tree](http://www.pathofexile.com/passive-skill-tree)。执行此操作并具有相同或相似的用户交互的最佳方式是什么？IE。您单击一个节点，它会激活或停用它。树的移动和放大它也会很好。在考虑要添加的功能时，想尽量远离 webView。在此先感谢只是想看看这样做的好方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:28:11.993

您可以使用 webView 并且几乎可以复制粘贴所呈现的网页 html 源代码并加载它。

但是，使用本机组件，您可以获得更好的性能，但它不会“复制”

原生组件： [iOS 的 IIViewDeckController](http://www.cocoacontrols.com/platforms/ios/controls/iiviewdeckcontroller)

[适用于 iOS](http://www.cocoacontrols.com/platforms/ios/controls/ihasapp) [的 iHasApp 适用于 iOS 的 iHasApp](http://www.cocoacontrols.com/platforms/ios/controls/ghsidebarnav)

那边还有更多。考虑它们的组合，

# javascript - 为什么 setTimeout 函数会永远执行？

> ID：14022405
> 
> 赞同：1
> 
> 时间：2012-12-24T14:08:26.137
> 
> 标签：javascript

我阅读了有关计时事件的信息。我很困惑`setTimeout`：我在 W3Schools 上有一个示例，它每 500 毫秒运行一次。我读到`setTimeout`它只工作一次。[关联](http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_clock)

```
<head>
  <script>
    function startTime() {
      var today=new Date();
      var h=today.getHours();
      var m=today.getMinutes();
      var s=today.getSeconds();
      document.getElementById('txt').innerHTML=h+":"+m+":"+s;
      setTimeout(function(){startTime()},500);
    }
  </script>
</head>
<body onload="startTime()">
  <div id="txt"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:09:32.247

该函数在内部重置计时器：

```
setTimeout(function(){startTime()},500); 
```

每次运行时，它所做的最后一件事就是安排另一个迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:13:33.920

setTimeout 函数只工作一次。查看您的代码。在 startTime 函数中，您将在 500 毫秒内再次调用相同的函数。如果您希望它只工作一次，请不要递归调用它。或者，如果您希望它重复一段时间，请改用 setInterval。此函数返回一个 id，您可以使用它随时停止它。

# html - 使用 css 定位图像的中心

> ID：14022407
> 
> 赞同：0
> 
> 时间：2012-12-24T14:08:33.663
> 
> 标签：html, css, image, positioning, center

假设我必须将图像 RIGHT 放置在适当的位置，但我需要它的 CENTER 位于该位置。我想将图像放置在 div 的左上角，所以我将图像放置在 div 中，将位置：相对于 div 和位置：绝对值设置为图像，然后将其顶部和左侧值设置为 0。它非常有效，但我需要该图像的中心位于左上角。我会手动设置顶部：-xpx，左侧：-ypx 但我没有图像大小的任何特定值（可能会有很大差异）。那么有什么办法可以说： position: absolute-but-i'm-talking-about-the-center; 顶部：0px；左：0px；？

真的非常感谢！

马泰奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:14:15.640

您可以使用 javascript 来获取图像的大小，然后设置所需的 css left 值。

请注意图像的加载方式，因为它们是异步的，因此在文档准备好时不一定可用。这意味着除非您正确处理图像，否则最终的宽度和高度尺寸将为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:58:20.750

No need to use Javascript, this can be done in CSS.

The required HTML: (you must change the div to an img obviously)

```
<div id="container">
  <div id="imgwrapper">
    <div id="img">Change this div-tag to an img-tag</div>
  </div>
</div> 
```

The required CSS:

```
#container
{
  position: absolute;
  left: 200px;
  top: 100px;
  height: auto;
  overflow: visible;
  border: 2px dashed green;
}
#imgwrapper
{
  position: relative;
  margin-left: -50%;
  margin-top: -50%;
  padding-top: 25%;
  border: 2px dashed blue;
}
#img
{
  display: block;
  width: 200px;
  height: 100px;
  border: 2px solid red;
} 
```

[Click here for a jsFiddle link](http://jsfiddle.net/K8S3L/)

The `margin-left: 50%;` obviously works when using the container div, because the width of the container will be exactly that of the content. (You might need to add `width: auto;`) But `margin-top: -50%;` will not work because the height of the container div will change with it, thus you need yet another wrapper div in which you use this `margin-top: -50%;` and then you need to fix this error it makes by using a positive percentage based padding. Obviously there may be other solutions to fix this, but the solution should be something like this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:20:51.787

您应该将图像包装在另一个块元素中，并在图像的左侧放置一个负数。

像这样的东西：

```
<div id="something">
  <div class="imagewrap">
    <img>
  </div>
</div> 
```

然后给#something 一个相对位置，.imagewrap 一个绝对位置，等等......并且`img`应该有一个相对位置`left:-50%`。顶部也一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:13:44.060

你有没有尝试过;

```
name_of_div_with_image {
display: block;
margin-left: auto;
margin-right: auto } 
```

试一试。

# php - Facebook批处理API不返回用户电子邮件ID

> ID：14022409
> 
> 赞同：0
> 
> 时间：2012-12-24T14:08:47.737
> 
> 标签：php, facebook, facebook-graph-api, facebook-login

我正在使用 FB 批处理 API 进行用户登录，这是 API 调用

```
$queries = array(

array('method' => 'GET', 'relative_url' => '/'.$user),
array('method' => 'GET', 'relative_url' => '/'.$user.'/home?limit=50'),
array('method' => 'GET', 'relative_url' => '/'.$user.'/friends'),
array('method' => 'GET', 'relative_url' => '/'.$user.'/photos?limit=6'),

);

// POST your queries to the batch endpoint on the graph.
try{
 $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');

 }catch(Exception $o){
 error_log($o);
}

//Return values are indexed in order of the original array, content is in ['body'] as a JSON
//string. Decode for use as a PHP array.

$user_info  = json_decode($batchResponse[0]['body'], TRUE);
$feed   = json_decode($batchResponse[1]['body'], TRUE);
$friends_list = json_decode($batchResponse[2]['body'], TRUE);
$photos   = json_decode($batchResponse[3]['body'], TRUE); 
```

当我打印 user_info 变量时`print_r($user_info)`，我得到了这个数组，但它没有给我用户**电子邮件 ID**。我不知道为什么？我浏览了文档但没有找到解决方案。如何实现这一点？
如果由于身份验证，我如何向 API 发送受信任的参数，并且身份验证仅适用于电子邮件地址而不适用于其他字段？

```
Array
(
[id] => 1000015567757
[name] =>Name
[first_name] => First name
[last_name] => Last name
[link] => http://www.facebook.com/sach.ch
[username] => sachtawa
[birthday] => 12/13/1987
[hometown] => Array
    (
        [id] => 1000015534545
        [name] => Patna, India
    )

[location] => Array
    (
        [id] => 106442706060302
        [name] => Pune, Maharashtra
    )

[gender] => male
[timezone] => 6
[locale] => en_US
[verified] => 1
[updated_time] => 2012-12-13T04:11:12+0000
) 
```

感谢您的关注

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:12:46.010

要阅读用户电子邮件，您需要适当的权限[https://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)

这意味着您必须明确要求获得阅读许可

# spring - Spring mvc 请求参数确实失败

> ID：14022410
> 
> 赞同：0
> 
> 时间：2012-12-24T14:08:57.420
> 
> 标签：spring, parameters, request

我想访问下拉电影过滤器。

我收到错误：描述指定的 HTTP 方法不允许用于请求的资源（不支持请求方法“GET”）。

```
@RequestMapping(value = "/articles", method = RequestMethod.POST)
        public String showArticles(@RequestParam ("dropdownFilmeFilter") String filter, Model model) {

            if (filter.equals("aufsteigend"))
                System.out.println("it runs");

            List<Article> article = (List<Article>) gd.findAll(Article.class);
            model.addAttribute("articles", article);
            return "articles";
        }

<div class="filmFilter">
        Filme: <c:out value="${ articles.size() }"></c:out>
        Sortieren 
        <form name="filter" action="articles" method="post">
            <select name="dropdownFilmeFilter">
            <option value="aufsteigend">Preis: aufsteigend</option>
            <option value="absteigend">Preis: absteigend</option>
            <option value="bewertung">Kundenbewertung</option>
            <option value="erscheinung">Erscheinungsdatum</option>
            </select>
            <input type="submit" name="mysubmit" value="OK" />
        </form>
    </div> 
```

# c# - C# 重新加载系统环境变量

> ID：14022411
> 
> 赞同：5
> 
> 时间：2012-12-24T14:09:00.077
> 
> 标签：c#, .net, environment-variables

当我启动 C# 进程时，系统环境变量会被其他一些进程更改。所以我想将环境重新加载到我的进程中，因为这个应用程序也启动了需要具有更新环境的子进程。这是我试图获取和设置环境变量的方式：

```
Dictionary<String,String> uservars= new Dictionary<String,String>();
  Dictionary<String, String> sysvars = new Dictionary<String, String>();
  foreach (System.Collections.DictionaryEntry de in System.Environment.GetEnvironmentVariables(EnvironmentVariableTarget.Machine))
    sysvars.Add(de.Key.ToString().ToUpper(),de.Value.ToString());

  foreach (System.Collections.DictionaryEntry de in System.Environment.GetEnvironmentVariables(EnvironmentVariableTarget.User))
  {
    uservars.Add(de.Key.ToString().ToUpper(), de.Value.ToString());
  }
  Dictionary<string, string> newdict = new Dictionary<string, string>();
  foreach (KeyValuePair<String, String> kvp in uservars)
  {
    if (sysvars.ContainsKey(kvp.Key))
    {
      newdict.Add(kvp.Key, kvp.Value + ";" + sysvars[kvp.Key]);
      sysvars.Remove(kvp.Key);
    }
    else
      newdict.Add(kvp.Key, kvp.Value);
  }
  foreach (KeyValuePair<string, string> kvp in sysvars)
    newdict.Add(kvp.Key, kvp.Value);

  foreach (KeyValuePair<string, string> kvp in newdict)
  {
    System.Environment.SetEnvironmentVariable(kvp.Key, kvp.Value);
  } 
```

问题是，我得到的环境变量与`System.Environment.GetEnvironmentVariables(EnvironmentVariableTarget.User)`我的应用程序启动时的变量相同。但这不是更新变量。

有没有办法直接从系统中获取这些变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:45:34.967

有3组环境变量——来自机器的全局变量、用户保存的变量和当前进程的变量

`Environment.SetEnvironmentVariable(key, value)`设置当前进程的变量，不改变全局或用户变量，读取当前进程需要用到的变量`Environment.GetEnvironmentVariables(EnvironmentVariableTarget.Process)`

当您运行子进程时，您的进程环境变量将被复制到子进程环境变量中。

更新（并回答评论）：

我想你误解了环境变量是如何工作的，它们只能用于在进程创建期间将数据从父进程传递给子进程，不能用于在进程之间传递数据。

这是环境变量的工作方式：

每个进程都有自己的环境变量私有副本，每个进程都可以随时更改该私有副本，这是一个私有副本，对系统的其余部分没有任何影响。

当一个进程启动另一个进程时，父进程的私有环境变量被复制到新的子进程，在该操作之后，新的子进程拥有一个不再连接到父进程的环境变量的私有副本。

注册表中存储了机器和用户环境变量，这些是在启动时传递给第一个进程的值（并且，为了保存重新启动，如果您发送正确的通知，Windows 资源管理器将在启动新进程时加载它们）进程的环境变量不会更改用户/机器设置，更改用户/机器设置不会影响任何正在运行的进程。

例如，运行两个命令 (cmd.exe) 窗口，在一个窗口中使用 SET 命令更改环境，然后在另一个窗口中运行 SET 命令，发现没有任何变化。

所以，没有“系统当前环境”这样的东西，如果一个进程改变了它的环境，另一个进程就没有办法发现和读取这个变化（除了使用让调试器读取其他进程内存的 API，但你真的不想去那里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:27:15.127

我相信如果您在创建新进程之前广播 WM_SETTINGCHANGED 消息，它将继承新的环境设置。因此，您需要 pInvoke Windows SDK PostMessage() 或 SendMessage() 函数。只需为 LPARAM 和 WPARAM 参数传递 0。

# entity-framework - 获取所有实现接口的实体

> ID：14022413
> 
> 赞同：3
> 
> 时间：2012-12-24T14:09:35.163
> 
> 标签：entity-framework

我有几个实现 IModel 接口的实体。我想从其实体实现此接口的所有表中获取记录。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:14:50.207

我找到了一个解决方案：

```
context.ObjectStateManager
       .GetObjectStateEntries(EntityState.Added /* All states here */)
       .Select(e => e.Entity)
       .OfType<IModel>()
       .ToList(); 
```

# c++ - char 指针的动态内存分配

> ID：14022416
> 
> 赞同：3
> 
> 时间：2012-12-24T14:09:59.247
> 
> 标签：c++, memory, gets

我有一个与 char 指针的动态内存分配有关的奇怪问题。我有类似的东西

```
char *input = new char; //1
gets(input) //2
char *dest = new char; //3
```

在第 3 步期间，我在运行时遇到堆损坏错误。仅当我输入的字符串长度超过 23 个字符时才会发生这种情况。

如果我不做任何新的操作，那么就没有问题。

如果我指定，此问题已解决

```
 char *input = new char[100]; 
```

但我希望输入根据用户的输入是动态的。

我不确定在这种情况下 24 字节的作用是什么。我不想限制为 100 个或一些 n 个字符...我在内存分配方面有点弱...有人可以解释这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:12:47.357

不，你不能那样做。您可以仅使用静态缓冲区或使用“cpp-way”，即：

```
std::string str;
std::getline(std::cin, str); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T14:15:39.303

您的程序在任何长度大于零的输入上表现出未定义的行为，因为`gets`添加了一个空终止符。程序不会崩溃多达 23 个字符的事实是一个不幸的巧合。

如果要动态分配缓冲区，请不要使用`gets`or `char`-based 输入；相反，将您的数据读入`std::string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T14:16:59.090

如果您不知道用户将输入什么长度并且您不想限制用户输入，那么您必须分配足够长度的缓冲区。您可以使用 STL 字符串，但它也会为您动态分配足够的内存，它只是将分配细节隐藏到您的程序中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T14:14:45.153

永远不要使用`gets()`（来自手册页）：

> 不检查缓冲区溢出

根据在那里输入的内容，您会遇到缓冲区溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T14:18:30.603

```
new char 
```

为一个字符分配内存。它可能在第二个字符之后失败（实际上甚至在第一个字符之后，因为你会得到一个 '\0' 字符。

如果您将问题标记为 C++，而不是 C，请使用 C++！这意味着使用 std::string

# android - popBackStackImmediate() 不工作

> ID：14022426
> 
> 赞同：1
> 
> 时间：2012-12-24T14:10:52.653
> 
> 标签：android, android-fragments

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    View h = getActivity().findViewById(R.id.gohome);
    h.setOnClickListener(new Button.OnClickListener() {
        @Override
        public void onClick(View arg0) {    
            new Thread(new Runnable() {
                public void run() {
                    Log.w("tt", "tttt");
                    if(MainActivity.fm.getBackStackEntryCount() > 1) {
                        try {
                            MainActivity.fm.popBackStackImmediate("tiles", 0);
                        }
                        catch(Exception e) {
                            Log.w("tt", "tttt" + e);
                        }
                    }
                    //((MainActivity)arg0.getContext()).toggle();      
                }
            }).start();
        }           
    });
} 
```

我的应用程序上有一个主页按钮。单击时，我想返回片段名称“tiles”，这是最底部的片段。但这不起作用...请帮助

# excel - 我们可以一次性从 ArrayList 对象中删除 `""` 条目吗？

> ID：14022427
> 
> 赞同：-1
> 
> 时间：2012-12-24T14:10:54.333
> 
> 标签：excel, vbscript, vba

只是出于好奇-有没有办法`""`从已使用范围分配值的 ArrayList 对象中删除条目？

```
 Dim ArrListChildDetails : Set ArrListChildDetails = CreateObject("System.Collections.ArrayList")

  ArrListChildDetails = Range("A4:E6") 'Is it possible?
  And If empty Strings("") there,can we remove it in one shot? 
```

请在这里指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:23:27.160

## [来自 MSDN 库的 ArrayList 参考](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)

*   `ArrListChildDetails.Clear`: 删除所有元素`ArrayList`

*   `Remove`：从 ArrayList 中删除特定对象的第一个匹配项。

*   `RemoveAt`: 移除 ArrayList 指定索引处的元素。

**选择对象，了解它们可以做什么，以及它们是否具有您需要的属性。**

# magento - 点击类别直接进入产品详情页面？

> ID：14022430
> 
> 赞同：2
> 
> 时间：2012-12-24T14:11:23.310
> 
> 标签：magento

在我的商店中，其中一个类别只有一种产品。每当用户在导航栏中单击此类别时，是否可以直接将用户带到该产品的产品详细信息页面？我想用一些代码来得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:38:20.893

将其放在产品网格中或在 /app/design/frontend/default/[template]/template/catalog/product/list.phtml 中列出 foreach 循环

```
<?php if ($_productCollection->count() == 1) {
$url = $_product->getProductUrl();
Mage::app()->getFrontController()->getResponse()->setRedirect($url); }
?> 
```

# javascript - ng-repeat 需要遍历 $scope 的子对象

> ID：14022433
> 
> 赞同：0
> 
> 时间：2012-12-24T14:11:42.833
> 
> 标签：javascript, angularjs

我被引导相信最好在作用域上使用子对象而不是直接添加到作用域......例如

```
$scope.model.mystuff 
```

好于

```
$scope.mystuff 
```

但是，当您执行此操作时，我使用 ne-repeat 的第一个非常简单的代码可以工作......

```
$scope.myStuff = [{},{},{}]

<div ng-repeat="things in myStuff">Test</div> 
```

如果我运行它，我会看到 Test 3 次。如果我执行以下操作...

```
$scope.model.myStuff = [{},{},{}]

<div ng-repeat="things in model.myStuff">Test</div> 
```

然后它根本不循环。我确定我只是误解了这一点，解决方案非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:51:19.417

下一次，如果你提供一个 jsfiddle，它可能会让事情变得更容易:)

问题似乎是你如何声明

```
$scope.model.myStuff = [{},{},{}] 
```

$scope.model 当时不存在，所以我只是快速将它添加到之前的行中，如下所示：

```
$scope.model = {}
$scope.model.myStuff = [{},{},{}] 
```

然后 ng-repeat 工作，输出测试 3 次

**jsfiddle**：http: [//jsfiddle.net/rtCP3/33/](http://jsfiddle.net/rtCP3/33/)

# java - Jython SOAP Web 服务

> ID：14022436
> 
> 赞同：0
> 
> 时间：2012-12-24T14:12:11.430
> 
> 标签：java, web-services, soap, web, jython

我想使用 jython 开发一个 SOAP Web 服务应用程序。Jython 将创建应用程序的服务器端并从另一个 java 应用程序调用方法。在 python soaplib 模块中实现了我想做的所有事情。我在互联网上搜索了几个小时，但我没有找到任何文档。我发现只有一件事是 wso/wsf api，但它没有足够的文档。

你对我的问题有什么想法吗？我应该使用哪个模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:35:57.207

[Pyramid 1.1 在 Jython 上运行良好](http://docs.pylonsproject.org/projects/pyramid/en/1.1-branch/narr/install.html#installing-pyramid-on-jython)。有各种 RPC 方法的插件，包括 JSON-RPC 和[SOAP](http://pypi.python.org/pypi/pyramid_soap/0.1)。总的来说，我对 Jython + Pyramid 作为一种处理 Java 库的 RPC 而不用 Java 编写所有内容的方式感到非常满意。

# css - CSS图像在不同分辨率下的不同位置？

> ID：14022437
> 
> 赞同：1
> 
> 时间：2012-12-24T14:12:21.657
> 
> 标签：css, position, resolution, absolute

好的，所以我用外部 CSS 制作了一个简单的网页，现在它在我的计算机上看起来很好，但是当我将它发送给我的朋友时，底部按钮不在一起？

我的显示器 [http://i.imgur.com/ektmF.png](http://i.imgur.com/ektmF.png)

好友监控 [http://i.imgur.com/RmB3t.png](http://i.imgur.com/RmB3t.png)

HTML 代码

```
 <body>

<style type="text/css">
body {
    overflow:hidden;     <!-- Setting body overflow to hidden -->
}

<!-- Background image -->

    </style>

    <div id="backgroundWrapper">
        <img src="background.png" />      
    </div>

    <!-- Home button -->   

    <div id="homebtn">
        <a href="..\home.html" onmouseover="SwapOut()" onmouseout="SwapBack()"><img name="homebtn" src="homebuttonup.png"/>   
        </a>
    </div>

    <!-- Shop Button -->

    <div id="shopbtn">
        <a href="shop.html" onmouseover="SwapOutshop()" onmouseout="SwapBackshop()"><img name="shopbtn" src="shopbuttonup.png"/>  
        </a>
    </div>
    </body> 
```

CSS 代码

```
 #backgroundWrapper{width:100%;height:100%;z-index:-1;position:absolute;}
     #backgroundWrapper img{width:100%;height:100%;z-index:-1; position:absolute;}
     #homebtn {width:100%;height:100%;z-index:1; position:absolute;top:90%; left:35.3%;}
     #shopbtn  {width:100%;height:100%;z-index:1;position:absolute; top:90%; left:50%;}
     #text {
     color:black;
     font-size:15;
     text-align:center;
     position:relative;
     top:20%;
     font-family:verdana;
     font-weight:bold;
     }
     #myform {
    position:absolute;
     left:10%;
     top:30%;

     }

      #submitbuttons {
    position:relative;
    text-align:center;
     top:80%;

     }

    body {
     margin-top: 0px;
     margin-right: 0px;
     margin-bottom: 0px;
     margin-left: 0px
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:14:39.753

您正在使用`position: absolute;`，因此您需要将子元素包装在`position: relative;`容器中，这样它们就不会在野外流出

例如

```
<div class="container">
   <div class="firstbtn"></div>
   <div class="secondbtn"></div>
</div>

<style>
   .container {
     position: relative;
     height: 200px;
     width: 500px;
   }

   .firstbtn {
     position: absolute;
       left: /* whatever */;
       top: /* whatever */;
   }

   .secondbtn{
     position: absolute;
       left: /* whatever */;
       top: /* whatever */;
   }
</style> 
```

所以现在两个按钮都不会流出容器元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:28:38.740

将此CSS更改为

```
#backgroundWrapper{width:100%; z-index:-1;position:absolute;}
#backgroundWrapper img{width:100%;height:100%;z-index:-1; position:absolute;}
#button-wrapper{width:30%; margin:0 auto;top:90%;z-index:1;}
#homebtn {position:relative;top:90%;float:left;}
#shopbtn  {float:right;} 
```

`#button-wrapper`相应地调整宽度创建`button-wrapper`并将两个 btns 放入 html

# silverlight - 将 Marshal.Copy 位图转换为等效的 Silverlight

> ID：14022442
> 
> 赞同：0
> 
> 时间：2012-12-24T14:12:54.963
> 
> 标签：silverlight, writeablebitmap

我在将现有组件的以下代码片段转换为 Silverlight 时遇到问题。

```
Bitmap bmp = new Bitmap(width, height);
BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.WriteOnly, PixelFormat.Format24bppRgb);
Marshal.Copy(data, 0, bmpData.Scan0, data.Length);
bmp.UnlockBits(bmpData); 
```

数据是`byte[]`和是所需的图像宽度和高度`width`。`height`

任何人都可以分享一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:13:20.533

```
using (MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length))
{
    BitmapImage im = new BitmapImage();
    im.SetSource(ms);
    this.imageControl.Source = im;
} 
```

# extjs - ExtJS 4：点击前在标准按钮中询问用户

> ID：14022443
> 
> 赞同：0
> 
> 时间：2012-12-24T14:13:00.143
> 
> 标签：extjs

在实际执行单击事件之前，我需要询问用户（使用标准 Ext.MessageBox.confirm 对话框），因为在 href 配置中设置了服务器的 php 场景。

当我单击按钮 ExtJS 首先调用 php 场景（在其他浏览器的窗口中 - 默认情况下），然后才显示 MessageBox 对话框。但是只有当他说“是”时，我才需要先询问用户并调用 php 场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:38:10.703

```
function   yoursMethod([config])
{
 // call you sripts there
 // check what a button you pressed and then call scenario
 // you can see [config] in documentation http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.MessageBox-method-show
 }

Ext.MessageBox.confirm({
   title: ' Sample ',
   msg: 'Message',
   fn: yoursMethod
}); 
```

# c# - 文化选择器不会影响 Orchard CMS 网站中的导航链接

> ID：14022445
> 
> 赞同：3
> 
> 时间：2012-12-24T14:13:20.913
> 
> 标签：c#, asp.net-mvc, orchardcms

当我们使用该`Culture Picker`模块创建多语言网站时，我们会创建一些内容项的翻译来完成它。

例如，我有两个页面，`AboutUS-ENG`并且`AboutUS-FA`. 第一个是英语，第二个是波斯语版本的同一页。页面的路线也不同（`/AboutUS-ENG`和`/AboutUS-FA`）。

在我的网站中，我有导航菜单，其中包含一些链接，这些链接引用了某些页面，例如`/AboutUS-ENG`选择英语文化时。

现在的问题是，当我将当前文化从文化选择器组合框更改为波斯语时，它应该更改为波斯语（`/AboutUS-FA`而不是`/AboutUS-ENG`）。但它不这样做，并显示一个链接到`/AboutUS-ENG`.

我该如何解决这个问题？请问有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:35:01.453

您需要启用本地化模块。然后您可以将“本地化”部分添加到“页面”内容类型。

完成此操作后，页面的编辑表单中会显示一个名为“+ 新翻译”的新链接。

您可以创建一个页面（例如英语），然后通过单击链接编辑此页面并创建此页面的翻译。然后，您在波斯语中创建第二个页面，该页面是英语页面的链接翻译。

现在使用文化选择器时，Orchard 应该会自动切换到本地化页面。

此外，菜单还不能在果园中本地化。这是解决方法：

*   您必须创建 2 个不同的菜单（一个是英文的，一个是波斯语的）。
*   您必须启用“文化层”模块
*   您创建了 2 个图层，一个用于英语，一个用于波斯语（请参阅文化层模块的文档）
*   您将英语菜单添加到英语图层，将波斯语菜单添加到波斯语图层

希望这可以帮助。

# javascript - 无法从指令访问控制器范围

> ID：14022446
> 
> 赞同：11
> 
> 时间：2012-12-24T14:13:27.990
> 
> 标签：javascript, angularjs

这是我的应用程序配置：

```
angular.module('myApp', ['myApp.directives', 'myApp.controllers', 'myApp.services']); 
```

这是我的控制器：

```
angular.module('myApp.controllers', [])
  .controller('MainCtrl', function ($scope) {
      $scope.name = 'world';
  }); 
```

这是我的指令：

```
var directives = angular.module('myApp.directives', []);

directives.directive("hello", function () {
    return function (scope, elm, attrs) {
        elm.text("hello, " + scope[attrs.name]);
    };
}); 
```

这是我的html：

```
<div ng-controller="MainCtrl">
    <h1 hello></h1>
</div> 
```

问题是角度将指令渲染为：

> 你好，未定义

代替：

> 你好世界

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T14:57:13.577

您正在访问`scope[attrs.name]`，但指令未提供该属性的值`name`

有2个选项：

1.  将指令更改为`elm.text("hello, " + scope['name']);` 这不是首选方式，因为它硬编码为范围属性名称

2.  将 html 更改为`<h1 hello name="name"></h1>`. 这更好，但我觉得它使用了冗余属性

我建议您将指令更改为`elm.text("hello, " + scope[attrs['hello']]);`

甚至更好`elm.text("hello, " + scope.$eval(attrs['hello']));`

这样你也可以从表达式中受益（例如`<h1 hello="name|uppercase"></h1>`：） **[演示](http://plnkr.co/edit/94K1ieIJUMXVfZQDi0I7?p=preview)**

这样 html 将是`<h1 hello="name"></h1>`

关于 attrs 参数：它只不过是从 dom 元素上存在的属性中获取的字符串映射。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-04T06:44:08.193

您可以做一些事情，在撰写本文时，Angular 中似乎没有记录（请参阅 Mark Rajcok 的评论：http://docs.angularjs.org/api/ng.$ro​​otScope.Scope [）](http://docs.angularjs.org/api/ng.$rootScope.Scope)。

从您的指令中：

```
scope.$parent.name 
```

如果您`console.log(scope)`对指令执行 a `scope`（从指令内），您将看到这些属性。

综上所述，我不知道这是否是“正确的”Angular 约定，因为这两者都没有记录，而且我还没有找到任何其他更好的文档来说明如何访问指令所在的控制器之内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T15:08:57.947

您可以使用`scope`. 看[http://jsfiddle.net/rPUM5/](http://jsfiddle.net/rPUM5/)

```
directives.directive("hello", function () {
    return function (scope, elm, attrs) {
        elm.text("hello, " + scope.name);
    };
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-06T01:34:58.030

我发现了另一个案例：

如果您正在访问来自 Ajax 请求正文的变量，那么您必须*等待该变量被设置*。

例如：

```
# in controller
$http.get('/preview').then( (response) ->
  $scope.tabs = response.data.tabs
  $scope.master_switch = '1'
  console.info 'after get response in controller'
)

# in directive
directive('masterSwitch', ->
  (scope, element, attrs) ->
    alert 'in directive!'   # will show before "after get response in controller"
    console.info scope.master_switch  # is undefined
    setTimeout( -> console.info(scope.master_switch), 50) # => 1 
```

# android - 检查 Android 上 openVPN 的 VPN 连接状态

> ID：14022453
> 
> 赞同：4
> 
> 时间：2012-12-24T14:14:06.997
> 
> 标签：android, vpn, openvpn

有什么方法可以获取 android 4.using openVPN 上的 VPN 连接状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:09:55.260

适用于 Android 的 OpenVPN 有多种实现方式。一种是官方的 OpenVPN Connect，另一种是适用于 Android 的 OpenVPN。后者（尚）不支持查询/广播已连接 VPN 的状态。欢迎使用补丁。我不知道官方的 OpenVPN Connect 应用程序。如果需要有关其客户的信息，我建议与他们联系。

# forms - 访问子表单可见性

> ID：14022455
> 
> 赞同：2
> 
> 时间：2012-12-24T14:14:30.040
> 
> 标签：forms, vba, ms-access, subforms

我有一个访问表单，其中包含从表中填充的表单名称的下拉列表。当有人从下拉列表中选择特定项目时，我希望能够显示相应的子表单中的 1 个。例如，我在下拉列表中有表格 1、表格 2、表格 3。我选择表格 2，然后出现子表格 2。我尝试访问 VBA 中的子窗体可见属性，但遇到了多个错误，它从来没有完全奏效。任何人都可以帮忙吗？

这是填充下拉列表的代码：

```
Private Sub Form_Load()

Dim dba As Database
Dim rst As Recordset
Dim SQL As String

Set dba = CurrentDb
Set rst = dba.OpenRecordset("tbl_Forms", dbOpenDynaset, dbSeeChanges)
SQL = "SELECT ListName FROM tbl_Forms"
Set rst = dba.OpenRecordset(SQL, dbOpenDynaset, dbSeeChanges)

Set rst = Nothing
Set dba = Nothing
End Sub 
```

对于我尝试的子表单可见性：

```
forms!mainform.Form1.visbile = false 
forms!mainform.Form2.visbile = false
forms!mainform.Form3.visbile = false

Select case dropdown
case 1 
forms!mainform.Form1.visbile = true 
forms!mainform.Form2.visbile = false
forms!mainform.Form3.visbile = false
case 2
forms!mainform.Form1.visbile = false
forms!mainform.Form2.visbile = true
forms!mainform.Form3.visbile = false
case 3 
forms!mainform.Form1.visbile = false
forms!mainform.Form2.visbile = false
forms!mainform.Form3.visbile = true
end select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:22:15.833

这是粗略的，但它应该给你一个开始。您可以使用所需子表单的字符串名称设置子表单容器的源对象。完成此操作后，您可以获取对 MS Access 定义的基本表单类的引用，并使用其中定义的属性和方法。

如果您愿意，您也可以获取对您的特定表单的引用，但这会变得更加复杂。

从这里开始，您将需要对其进行一些操作，以使其按照您想要的方式运行。

```
Option Compare Database
Option Explicit

Private currentSubformReference As Form

Private Sub cboSubForms_AfterUpdate()
    LoadSubform (cboSubForms)
    currentSubformReference.DividingLines = False
    currentSubformReference.ControlBox = False
    '  . . . Etc
End Sub

Private Sub LoadSubform(ByVal SubformName As String)

    'Set the SourceObject property of the subform/subreport
    ' container object on your form:
    Me.sfmContainer.SourceObject = SubformName

    ' Grab a reference to the Form that is used as the
    ' SourceObject (this will only get you access to the
    ' properties exposed by the MS Access Form Class):
    Set currentSubformReference = Me.sfmContainer.Form

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-29T09:53:24.070

在 Dropdown 中将三个值写为 Form1、Form2、Form3（或任何您的表单名称），然后编写代码：

```
forms!mainform.Form1.visbile = false 
forms!mainform.Form2.visbile = false
forms!mainform.Form3.visbile = false

With Me.    

Select case Me.DropDownName.Value
case "Form1" 
 With Me.MainFormName.Form
 .Form1.visbile = true 
 .Form2.visbile = false
 .Form3.visbile = false
 End With 
case "Form2" 
 With Me.MainFormName.Form
 .Form1.visbile = false 
 .Form2.visbile = true
 .Form3.visbile = false
 End With
  case "Form3" 
 With Me.MainFormName.Form
 .Form1.visbile = false 
 .Form2.visbile = false
 .Form3.visbile = true
 End With
  End Select  
  End With 
```

# math - 引导四旋翼飞行器朝向航路点

> ID：14022469
> 
> 赞同：0
> 
> 时间：2012-12-24T14:15:40.353
> 
> 标签：math, language-agnostic, vector, robotics

我正在研究四旋翼，我知道它的位置（a）我知道我想去哪里（b）所以我要做的是计算一个向量 c，

```
c = b - a
c = normalize(c) 
```

这给了我一个单位向量，它将把我带到我的目标。但是四旋翼可以在不旋转的情况下向任何方向移动，所以我试图做的是将该向量 c 旋转机器人的偏航角，然后将其拆分为它的 xy 分量并将它们作为滚动角和俯仰角传递给机器人问题是当偏航角为 0 度 (-+ 5) 这可行，但是当偏航角为 +90 或 -90 时，它会失败并转向错误的方向。我的问题是我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:16:29.297

没有做所有的研究来 100% 确定这个答案，但听起来你正在得到一个（一种？）[Gimbal Lock](http://en.wikipedia.org/wiki/Gimbal_lock)。解决这个问题的方法是使用[四元数](http://en.wikipedia.org/wiki/Quaternion)，因为它们不受 Gimbal Lock 的影响。

# objective-c - 内存管理和静态 CoreFoundation 变量

> ID：14022473
> 
> 赞同：0
> 
> 时间：2012-12-24T14:16:08.507
> 
> 标签：objective-c, memory-management, static, automatic-ref-counting, core-foundation

首先，我使用的是ARC。

例如，如果我有一个类看起来像这样：

```
static CFNumberRef numberRef = NULL;

+ (void)initialize {
    float myFloat = 28.37202;
    numberRef = CFNumberCreate(kCFAllocatorDefault, CFNumberFloatType, &myFloat);
} 
```

我将如何发布`numberRef`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:02:35.153

将它释放到您知道不再需要它的地方。我假设它是静态的，因为你有很多这样的类并且总是需要这个内存？我建议在`applicationWillTerminate`. 如果您没有很多类并且并不总是需要内存，那么可能不需要将其声明为静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:34:45.570

由于您使用的模式类似于创建和管理单例的方式，我想说您可以将您的对象视为实际的单例。这意味着您不需要释放它。（想一想——就我个人而言，我从未见过 Objective-C/Cocoa 中的单例实现会关心释放共享实例）。此行为与您需要对象在应用程序的整个生命周期内都处于活动状态这一事实一致。所以根本不要释放它——当进程终止时，内核会确保清理它获得的所有资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:23:16.060

所有 coreFoundation 默认都是`assign`-ed，所以它永远不会被保留，因此不需要释放。

需要明确的是，ARC 对 Core Foundation 对象没有任何影响。它不会尝试自动管理它们，因此您需要[手动管理](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)它们。

如果您通过 创造自己的记忆`calloc/malloc`，那么您需要`free`它们。

编辑 ：

问：我只是想清楚地理解这一点......即使使用 ARC，我们仍然需要担心执行 CFRelease() 以及其他类型的发布，例如 CGContextRelease(context);

答：正确。ARC 只处理 ObjC 对象。它对 Core Foundation 对象一无所知。

# class - 删除内部类

> ID：14022477
> 
> 赞同：1
> 
> 时间：2012-12-24T14:17:01.470
> 
> 标签：class, html

我有一个像

```
<div class="inner">
   <div class="inner">Hello</div>
</div> 
```

如何删除内部div的类？这意味着我的新结构将是

```
<div class="inner">
  <div>Hello</div>
</div> 
```

**编辑后**

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.inner .inner').removeClass('inner');
});
</script>
<div class="inner">
   <div class="inner">Hello</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:19:41.887

您可以使用 jQuery 来完成

```
$('.inner .inner').removeClass('inner'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:19:54.007

正如您所做的那样，只需删除构成属性和值的文本。

您是指以编程方式使用特定语言吗？如果有，请详细说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:26:05.347

尝试使用[jQuery](http://api.jquery.com/category/Manipulation/?rdfrom=http://docs.jquery.com/mw/index.php?title=Manipulation&redirect=no)，它很容易解决您的需求。

# java - 解析成双精度异常

> ID：14022482
> 
> 赞同：0
> 
> 时间：2012-12-24T14:18:07.077
> 
> 标签：java, parsing, exception

我编写了以下代码来获取用户的输入并将其解析为加倍以进行进一步计算。问题是这个程序`java.lang.NumberFormatException`在编译时给了我这个错误`java.lang.Double.parseDouble(Unknown Source)`。我不知道为什么会产生这个错误。所以我的问题是：

*   这个错误的原因是什么？
*   为什么我在编译时出现异常。在 C++ 中，如果出现问题，我会在运行时出现异常。我无法理解 Java 的这种行为。

这是代码：

笔记：

被乘数和乘数是 JTextField

```
public void TakeInput()
{
     double a,b;
    String input1="1",input2="1";

    input1=Multiplicand.getText();
    input2=Multiplier.getText();

    a=Double.parseDouble(input1);// converting string input to double
    b=Double.parseDouble(input2);
   ....
} 
```

当我在 Eclipse 中单击运行或播放按钮时，出现此异常。所以这就是为什么我无法为这些文本字段提供任何输入

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:29:27.333

> 当我在 Eclipse 中单击运行或播放按钮时，出现此异常。

您的初始值`Multiplicand`和`Multiplier`必须是有效值`double`才能`Double.parseDouble`不抛出`NumberFormatException`.

请注意，如果您希望将每个值设置`JTextField`为`1`您可以执行以下操作：

```
Multiplicand.setText("1");
Multiplier.setText("1"); 
```

此外，`NumberFormatException`是运行时或*未经检查*的异常。您可以将您的分配包装在一个`try/catch`块中，以便您可以优雅地处理此异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:29:03.970

parseDouble 声明检查异常 NumberFormatException。这意味着您的方法 TakeInout 需要声明它将如何处理这个问题。要么你的方法必须声明它可以抛出异常，要么你需要在 parseDouble 周围放置 try/catch 块。

[您可以在此处](http://www.javapractices.com/topic/TopicAction.do?Id=129)阅读有关差异的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:37:40.767

确保`input1=Multiplicand.getText();`是一个可以实际解析为`Double`. 如果它可能出错（例如用户输入值），请将该行包装在一个`try/catch`块中：

```
public void takeInput() {
    String input1="1", input2="1";
    input1 = Multiplicand.getText();
    input2 = Multiplier.getText();
    System.out.println("'" + input1 + "', '" + input2 + "'"); //log inputs
    double a, b;
    try {
        a = Double.parseDouble(input1);// converting string input to double
        b = Double.parseDouble(input2);

    }
    catch (NumberFormatException nfe) {
        //either
        return;
        //or something like:
        a = 0;
        b = 0;
        //and continue
    }

   ....
} 
```

# c# - 使用 LinqtoEntities lambda C# 选择项目

> ID：14022486
> 
> 赞同：3
> 
> 时间：2012-12-24T14:19:24.483
> 
> 标签：c#, .net, linq, entity-framework, lambda

我在 Visual Studio 2012 中使用实体框架代码优先技术这是我的上下文

```
public class BakingWebContext : DbContext
{
        public DbSet<Recipe> Recipes { get; set; }
        public DbSet<Category> Categories { get; set; }
} 
```

我有一个类别类

```
public class Category
{
        [Key]
        public int CategoryId { get; set; }
        [Required]
        public string Name { get; set; }
        public string Description { get; set; }
        public string ImageUrl { get; set; }

        public virtual ICollection<Recipe> Recipes { get; set; }

} 
```

它包含食谱的虚拟集合

```
public class Recipe
{
        [Key]
        public int RecipeId { get; set; }
        [Required]
        public string Title { get; set; }
        public string Description { get; set; }
        public bool IsCompanyRecipe { get; set; }
} 
```

我正在尝试返回所有类别，包括仅使用 C# 中的 Lambda 表达式将**IsCompanyRecipe**标记为**true的食谱**

到目前为止，我有这个

```
var query = categories.Where(c => c.Recipes.Count > 0).SelectMany(r => r.Recipes.Where(re => re.IsCompanyRecipe == true)); 
```

它返回`IEnumerable<Recipe>`所有公司食谱的列表，但我想返回一个`IEnumerable<Category>`包含所有食谱的列表，在哪里`IsCompanyRecipe == true`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T14:22:46.733

```
var query = (from c in categories
         from r in c.Recipes
         where r.IsCompanyRecipe == true
         select c); 
```

# java - 在 Java 中以编程方式设置 Linux 环境变量

> ID：14022487
> 
> 赞同：11
> 
> 时间：2012-12-24T14:19:33.160
> 
> 标签：java, linux

我可以通过`RunTime`类运行 Linux 命令。有没有办法以编程方式从 Java 设置 Linux 全局环境？

我想通过 Java 模拟以下 Linux 命令语句

```
root@machine:/tmp# export TEST=v2 
```

我使用了 ProcessBuilder 如下，但 TEST 变量没有改变。

```
ProcessBuilder pb = new ProcessBuilder("/bin/bash","-c","export TEST=v3" + "&& exec"); 
```

更新：实际上我的最终目标是使用 EMAIL_NAME 环境作为电子邮件地址，当我的应用程序和机器都启动并停止时，这些操作将发送到 EMAIL_NAME。在那种情况下，我知道不可能在纯 Java 代码上设置 linux 全局环境。所以我有一个解决方法是 EMAIL_NAME 将保存在一个文件中，它将由 linux 脚本或 java 代码更新或读取。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T14:22:10.350

环境变量在设置时仅可用于由设置变量的进程生成的进程，因此如果您真的要求设置一个会影响整个系统的变量，那么不。在 Linux 中，您根本无法以交互方式真正做到这一点。您可以做的最好的事情是更改系统启动文件之一以包含所述变量，以便您*将来*执行的任何操作都将包含该变量。

如果您只是想通过一些变量集运行多个进程，那么[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)允许您为使用它生成的进程[设置环境](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#environment%28%29)。为多个进程重用一个环境是非常简单的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T14:24:59.253

当您说“Linux 全局环境”时，您是指 Linux 环境变量吗？如果是这样，我认为答案是否定的。因为这不是java问题。当一个进程设置环境变量时，它只能影响它自己和它的子进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T15:04:30.743

您可以通过 java 将变量更新到 /etc/profile

```
if(System.getProperty("TEST", "").equalsIgnoreCase(""))
{
    Runtime.getRuntime().exec(new String[]{"bash","-c" ,"echo 'export TEST=v2' >> /etc/profile"}) ;

    /// Also update the System Variable for current process
    System.setProperty("TEST","v2") ;
} 
```

这将从下次登录或您明确来源时生效。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-24T14:23:53.877

我在 bash 中使用这行代码

```
echo -e PATH=\"/usr/lib/jvm/java-7-openjdk-i386/bin:\$PATH\" >> $HOME/.profile 
```

with 连接本地用户的路径

# c++ - 混合 typedef 和 CRTP？

> ID：14022493
> 
> 赞同：4
> 
> 时间：2012-12-24T14:19:59.830
> 
> 标签：c++, templates, c++11, metaprogramming, crtp

考虑以下示例：

```
#include <iostream>
#include <iostream>
#include <type_traits>

template<typename Type, template<typename> class Crtp>
class Base
{
    public:
        typedef int value;

        // f1: OK
        // Expected result: casts 4.2 to Base<Type, Crtp>::value
        value f1() {return 4.2;}

        // f2: NOT OK
        // Expected result: casts 4.2 to Crtp<Type>::value
        // But f2 does not compile: no type named 'value' 
        // in 'class Derived<double>'
        typename Crtp<Type>::value f2() {return 4.2;} 
};

template<typename Type>
class Derived : public Base<Type, Derived>
{
    public:
        typedef Type value;
};

int main()
{
    Derived<double> a;
    std::cout<<a.f1()<<std::endl;
    std::cout<<a.f2()<<std::endl;
    return 0;
} 
```

如何解决这个问题（类`Derived`中的 typedef 未知`Base`）？

编辑：我发现了一个非常简单的技巧。有人可以向我解释为什么以下内容有效而以前的版本无效吗？这个技巧适用于标准 C++11 还是因为编译器的工作方式（这里是 g++ 4.7.1）而起作用？

```
#include <iostream>
#include <iostream>
#include <type_traits>

template<typename Type, template<typename> class Crtp>
class Base
{
    public:
        typedef int value;
        value f1() {return 4.2;}
        template<typename T = Crtp<Type>> typename T::value f2() {return 4.2;}
};

template<typename Type>
class Derived : public Base<Type, Derived>
{
    public:
        typedef Type value;
};

int main()
{
    Derived<double> a;
    std::cout<<a.f1()<<std::endl;
    std::cout<<a.f2()<<std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:25:09.340

`value_getter`您必须使用在定义之前声明的包装类（这里是） `Base`。然后，您可以在定义之前对其进行专门化`Derived`：

```
template<typename T>
struct value_getter;

template<typename Type, template<typename> class Crtp>
class Base
{
    public:
        typedef int value;

        value f1() {return 4.2;}

        // in 'class Derived<double>'
        typename value_getter<Crtp<Type> >::value f2() {return 4.2;} 
};

template<typename Type>
class Derived;

template<typename Type>
struct value_getter<Derived<Type> > {
    typedef Type value;
};

template<typename Type>
class Derived : public Base<Type, Derived>, public value_getter<Derived<Type> >
{
    public:
}; 
```

它并不完全漂亮，但至少它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:08:59.023

您的技巧有效，因为 f2 现在在实际使用它之前不会被实例化，此时 Derived 类已经完成。

在您的特定示例中，我可能只建议这样做：

```
#include <iostream>
#include <iostream>
#include <type_traits>

template<typename Type, template<typename> class Crtp>
class Base
{
    public:
        typedef int value;

        value f1() {return 4.2;}

        Type f2() {return 4.2;} 
};

template<typename Type>
class Derived : public Base<Type, Derived>
{
    public:
        typedef Type value;
};

int main()
{
    Derived<double> a;
    std::cout<<a.f1()<<std::endl;
    std::cout<<a.f2()<<std::endl;
    return 0;
} 
```

但是您的真实代码可能有其他需求，这使得它变得不切实际。

# php - 杂货店 CRUD 连接表

> ID：14022501
> 
> 赞同：1
> 
> 时间：2012-12-24T14:21:16.777
> 
> 标签：php, mysql, codeigniter, grocery-crud

需要一些帮助来建立产品和数量之间的关系。

```
Table1: Products
Columns: id , code, unit, name, size , cost , price 
```

-

```
Table2: qty_products
Columns: id , product_id , warehouse_id , quantity 
```

这里的产品之间的关系是`id`来自`products`和`product_id`来自`qty_products`

对此结果的简单查询是：

```
SELECT p.id, p.code, p.unit, p.name, p.size, p.cost, p.price, s.quantity, s.warehouse_id FROM products p
INNER JOIN qty_products s ON s.product_id = p.id 
```

这个结果我需要翻译成 Grocery CRUD。

```
function products()
    {
$crud = new grocery_CRUD();
$crud->set_table('products');
$crud->set_relation('column','table','column');
$output = $crud->render();
$this->_products($output);
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:52:09.300

正如作者在此[论坛帖子](http://www.grocerycrud.com/forums/topic/264-join-tables/#entry1018)中所述，无法直接执行此操作：

> 实际上，对于杂货店 CRUD 来说，对表进行连接和海关查询似乎很明显，但目前它仍然不是可用的功能。

他的建议是使用[set_model](http://www.grocerycrud.com/documentation/options_functions/set_model)函数，该函数允许通过扩展grocery_CRUD_Model 来执行所需的SELECT/JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:26:20.427

是的，Grocery CRUD 还不支持加入新表的选项，所以我解决了它创建一个新模型，在这里查看结果和解决方案。

[链接到解决方案](http://grocerycrud.com/forums/topic/1181-how-can-insert-mutiple-items)

# php - AppFog 上的 PHP OAuth

> ID：14022509
> 
> 赞同：0
> 
> 时间：2012-12-24T14:22:10.710
> 
> 标签：php, oauth, appfog

我正在尝试在 AppFog 上运行 PHP 应用程序，但我在 AppFog 日志中看到此错误：

```
 PHP Fatal error:  Class 'OAuth' not found 
```

有谁知道是否可以在 AppFog 上启用[OAuth 扩展？](http://pecl.php.net/package/oauth)

更新：afaik 现在无法在 AppFog 上启用特定的 PHP 扩展。我今天切换到 PagodaBox，它允许您在应用程序配置文件中指定额外的 PHP 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:25:17.493

您需要通过他们的支持路线或谷歌小组询问 appFog。我怀疑它，因为它是一个扩展，但取决于它是否需要构建它可能是可能的。都是php的源码吗？如果是这样，您不能下载它，然后通过“af update appname”将其上传到您的应用程序并包含所需的文件吗？

# c++ - c ++：'->'的无效类型参数

> ID：14022514
> 
> 赞同：2
> 
> 时间：2012-12-24T14:23:00.117
> 
> 标签：c++

尝试将对象插入到`table`包含结构类型数组的 (struct)时，我收到此消息`ObjectLink`。结构：

```
typedef struct ObjectLink {
    void *key;
    struct Object *next;
} ObjectLink;

typedef struct Object {
    void *key;
    ObjectLink *top;
} Object;

typedef struct Table{
    ObjectLink *linkedObjects;
    int size, originalSize;
    HashFcn hfun;
    PrintFcn pfun;
    ComparisonFcn fcomp;
} Table; 
```

失败的代码（在所有分配和 if 语句上）：

```
Boolean InsertObject(TableP table, ObjectP object)
{

    int i = table->hfun(object, table->size);
    if (table->linkedObjects[i]->key == NULL)
    {
        table->linkedObjects[i]->key = object;
    } else
    {
        table->linkedObjects[i]->next->key = object;
    }

    return TRUE;
} 
```

我在[以前的问题](https://stackoverflow.com/questions/4983010/invalid-type-argument-of-c-structs)中搜索过，但这没有帮助。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T14:25:21.507

既然`linkedObjects`是指针，`linkedObjects[i]`就是对象本身。运算符仅适用于`->`指针；当您有 时`struct`，您需要使用常规点运算符`.`进行字段访问：

```
table->linkedObjects[i].key = object;
//                     ^--- Here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T14:25:32.143

数组下标运算符`[]`定义为：`E1[E2] == *((E1)+(E2))`. 使用`->`，您试图取消引用一个不存在的指针（因为您已经使用 operator 取消引用了您的指针`[]`）。所以正确的解决方案是：

```
table->linkedObjects[i].next->key = object; 
```

代替：

```
table->linkedObjects[i]->next->key = object; 
```

`linkedObjects[i]`是 type `ObjectLink`，不需要取消引用它。

# php - 前送我到手机

> ID：14022517
> 
> 赞同：0
> 
> 时间：2012-12-24T14:23:20.053
> 
> 标签：php, javascript

就是这样，我只知道当您登录手机时，您应该被发送到 mobil.navn.dk。仅当您使用 iphone 或 ipad 或其他手机时。然后就这样做。如果您在浏览器上，则应该无法登录 navn.dk 的浏览器页面。

我试过这样做：

```
<script type="text/javascript">
if (screen.width<800) {
    window.location="http://mobil.mebe.dk/";
}
</script> 
```

我在这里试过这个：

```
<?php
            function detect_mobile()
            {
                if(preg_match('/(alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte)/i', $_SERVER['HTTP_USER_AGENT']))
                    header('Location: http://mobil.navn.dk/');
                else
                    header('Location: http://www.navn.dk/');
            }
        ?> 
```

JavaScript 在我看来似乎太过时了，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:36:40.677

实际上有很简单的方法来检测你想要检测的设备，你可以这样做：

```
if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobile') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'android')) {
   echo "You are running a mobile webbrowser!"; 
```

您可以根据需要添加“如果”任意数量的设备，以便您可以轻松地以您需要的方式进行调整。

# web-services - RestSharp 示例在最新版本中不起作用

> ID：14022519
> 
> 赞同：0
> 
> 时间：2012-12-24T14:23:33.190
> 
> 标签：web-services, rest, restsharp

我第一次尝试使用 RestSharp，但我发现的所有示例都不适用于当前版本。例如，入门示例会导致以下错误：

> `'RestSharp.RestClient'`不包含 for 的定义，也找不到接受第一个类型参数的`'Execute'`扩展方法（您是否缺少 using 指令或程序集引用？）`'Execute'``'RestSharp.RestClient'`

有谁知道我在哪里可以找到使用 RestSharp 103.x 的工作示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:01:42.867

根据[GitHub 问题](https://github.com/restsharp/RestSharp/issues/152) `Execute`方法在某些平台上不可用。您可能必须使用不同的 RestSharp DLL 或使用`ExecuteAsync`方法。

# asp.net-mvc - Entity Framework TPC 继承（现在请拍我）

> ID：14022522
> 
> 赞同：4
> 
> 时间：2012-12-24T14:23:44.440
> 
> 标签：asp.net-mvc, migration, asp.net-mvc-scaffolding

我正在尝试基于[http://www.schema.org](http://www.schema.org)上定义的实体使用 Code First 和迁移来构建实体模型和数据库。底线是所有实体都继承自实体“事物”。

迁移会构建数据库，但任何对数据库进行种子设定的尝试都会失败。

一切都继承自 Thing：

```
 namespace Entities.Models
    {
                public class Thing
                {
                    public Thing()
                    {            
                        Id = Guid.NewGuid();
                        Name = String.Empty;
                    }

                    public Guid           Id               { get; set; }
                    public virtual string Name             { get; set; }

                }

            public class Person : Thing
            {
                public Person()
                    : base()
                {
                    Friends = new List<Person>();
                }

                public string GivenName { get; set; }
                public string FamilyName { get; set; }
                public string Email { get; set; }

                public virtual ICollection<Person> Friends { get; set; }
            }

            public class Event : Thing
            {
                public Event()
                    : base()
                {
                    Attendees = new List<Person>();
                }

                public virtual ICollection<Person> Attendees { get; set; }
                public TimeSpan Duration { get; set; }
                public DateTime? endDate { get; set; }
                public DateTime? StartDate { get; set; }

            }

        public class ThingMap : EntityTypeConfiguration<Thing>
        {
            public ThingMap()
            {
                // Primary Key
                this.Property(t => t.Id)
                    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

                // Properties
                this.Property(t => t.Name)
                    .IsOptional()
                    .HasMaxLength(200);

                // Table & Column Mappings
                this.ToTable("entity_Thing");
          }
       }
    public class PersonMap : EntityTypeConfiguration<Person>
    {
        public PersonMap()
        {
            // Properties
            this.Map<Person>(t =>
            {
                t.MapInheritedProperties();
                t.ToTable("entity_Person");
            });

            // Table & Column Mappings
        }
    }

    public class EventMap : EntityTypeConfiguration<Event>
    {
        public EventMap()
        {
            // Properties
            this.Map<Event>(t =>
            {
                t.MapInheritedProperties();
                t.ToTable("entity_Event");
            });

            // Table & Column Mappings
        }
    }

    public class CitriusSpotsContext : DbContext
    {
        static CitriusSpotsContext()
        {
            Database.SetInitializer<CitriusSpotsContext>(null);
        }

        public CitriusSpotsContext()
            : base("Name=CitriusSpotsContext")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new ThingMap());
            modelBuilder.Configurations.Add(new PersonMap());
            modelBuilder.Configurations.Add(new EventMap());
        }

        public DbSet<Thing> Things { get; set; }
        public DbSet<Person> People { get; set; }
        public DbSet<Event> Events { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:00:21.250

我目前正在使用类似的模型，我知道这个答案很晚，但它可能会有所帮助。

首先，TPH、TPT 和 TPC 是在我们的数据库中*建模继承的机制。*如果我们不需要为多态查询、更新或保存建模继承，我们不需要遵循 TP* 约定。

让我重申一下。TPH、TPT 和 TPC 是*可选*的数据库继承建模策略。如果我们的应用程序不需要多态查询、更新或插入，我们不需要遵循 TP* 约定。

我的基本项目设置与您的非常相似。在我的项目中，我有一个抽象类，项目中的*每个*类都继承自该类。它被命名`XModelBase`，我相信它对应于您的`Thing`课程。

我使用这个抽象类来实现一些将我的 biz 规则验证连接到实体框架的验证机制的基本方法。该类还确保为每个实体捕获审计值，并且该类包含其他通用属性 (KeyId)，并为通用流程提供原型/模板。

我们的模型之间唯一真正的区别是，当您使用数据类型作为主键时，my`XModelBase`将 a`int`作为主键的数据类型（所有类随后都会继承）`Guid`。

如果我是正确的，您和我将永远不需要执行如下查询：

**场景一：**

```
var query = from t in context.Things select t; 
```

这种类型的查询在我们的场景中没有意义。为什么我们要选择数据库中的每个对象？我们不会也不会

我们也永远不会通过我们的抽象类保存对象，例如：

**场景二：**

```
var person = new Person() {Email = "something@somewhere.com"};
context.Things.Add(person); 
```

相反，我们只是这样做：

**场景 3：**

```
var person = new Person() {Email = "something@somewhere.com"};
context.People.Add(person); 
```

由于我们不需要容纳`Scenario 1`or `Scenario 2`，因此我们不需要`Things`成为单独的基表 (TPT)。我们也不需要或不想以 TPC 的不可见多态方式访问或保存我们的子类表；因此，当您考虑它时，我们真的永远不需要以下属性：

```
public DbSet<Thing> Things { get; set; } 
```

当我们想要/需要对多态关联建模时，我们只需要在我们的对象上下文中使用这个 DbSet 属性。

从我们的上下文中删除该属性并摆脱我们对基类的模型配置是*继承自由*的第一步。

接下来，我们将从`MapInheritedProperties()`子类模型配置中删除 ，因为继承的属性将自动映射。我们只是留下我们`.ToTable`的子类对象的名称。

同样，我有一个`int`基`XModelBase`类主键，所以我可以简单地用如下`[Key]`属性标记它：

```
[Key]
public int KeyId { get; set; } 
```

但是因为我没有`DbSet`为我的`XModelBase`类创建表或使用，所以所有继承的子类都将具有独立的自动递增主键，这些主键`[Key]`在我的 `XModelBase`类中配置了这个属性。

如果我正确理解了您的问题，这些信息应该会为您指明正确的方向，但如果我没有解决您的问题，我很想知道您最终是如何解决这些问题的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T19:27:37.597

似乎您正在使用代码优先的方法，并且您正在尝试将架构生成为 c# 类。

要使用代码优先，您的基类必须从 DbContext 继承，然后您可以为数据库通信构建适当的方法。

在您的情况下，Thing 应该从 DbContext 继承，因为它将是您的存储库，然后您可以开始创建您的实体。

实体是简单的对象类，因此您可以从任何其他类继承它们。一个示例结构可能是这样的：

```
class Thing : DbContext
{
    public DbSet<Product> Products { get; set; }
}

class Product
{
    public int Id { get; set; }
    public int ProductName { get; set; }
} 
```

如需更多信息，[请访问 http://weblogs.asp.net/scottgu/archive/2010/07/23/entity-framework-4-code-first-custom-database-schema-mapping.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/23/entity-framework-4-code-first-custom-database-schema-mapping.aspx)和[http://www。 codeproject.com/Articles/318010/Entity-Framework-Code-First-Let-s-Try-It](http://www.codeproject.com/Articles/318010/Entity-Framework-Code-First-Let-s-Try-It)

希望这会有所帮助。

# jquery - 如何停止 jQuery 的任何进程来更改 document.location

> ID：14022524
> 
> 赞同：0
> 
> 时间：2012-12-24T14:23:47.467
> 
> 标签：jquery, ajax, abort

对于一个小项目，我有一个页面，我实现了一个长时间请求（2 分钟），超时时间为 1 毫秒（只需要启动进程异步，我不需要任何备份），并且每 5 秒调用一次 AJAX。

我想做一个按钮来取消所有 AJAX 调用，并更改 document.location。

我使用 xhrPool 脚本尝试取消所有 AJAX 调用，然后调用 document.location 行。但是，当我单击按钮时，脚本似乎被一些待处理的 AJAX 调用阻塞，用户（我）需要等待大约 20-30 秒，太长了。

这是我的脚本：

```
$.xhrPool = [];
$.xhrPool.abortAll = function() {
    $(this).each(function(idx, jqXHR) {
        jqXHR.abort();
    });
    $.xhrPool = [];
};

$.ajaxSetup({
    beforeSend: function(jqXHR) {
        $.xhrPool.push(jqXHR);
    },
    complete: function(jqXHR) {
        var index = $.xhrPool.indexOf(jqXHR);
        if (index > -1) {
            $.xhrPool.splice(index, 1);
        }
    }
});

function toTime(c) {
    var str = '';
    if (c > 59) {
        str = Math.floor(c/60) + 'm ';
        c %= 60;
    }
    if (c > 0)
        str = str + c + 's';
    return str;
}

function updateProgress() {
    $('.progress .bar').animate({
        width: count*4
    }, {duration:1000, easing: 'linear'});
    $('.progress .bar').html(toTime(count));
}

function timer() {
    updateProgress();
    if (count > 0) {
        if ((count % 5) == 0) {
            $.ajax({
                url: '/?act=verifyStatus',
                timeout: 5000
            }).done(function(data){
            if (data == 'OK')
                document.location = '/?act=found';
            });
        }
    } else {
        document.location = '/?act=nodelivers';
    }
    count--;
    setTimeout('timer()', 1000);
}

$(function(){
    $('.cancel').click(function(){
        $.xhrPool.abortAll();
        document.location = '/?act=form';
    });
    $.ajax({
        url: '/?act=doContact',
        timeout: 1
    });
    timer();
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:13:49.623

就像 FAngel 所说，第一个长进程是阻塞其他请求！

所以，在这个过程中，我只是添加了 session_write_close(); 在最后一次会话访问之后，现在一切正常！

谢谢 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:53:50.637

只需添加一个将全局变量状态设置为“运行”或“停止”的按钮，然后在每次调用之前检查该变量的状态？然后根据需要重定向。

# linux - 如何使用 awk 将文件的某个字段更改为大写？

> ID：14022529
> 
> 赞同：6
> 
> 时间：2012-12-24T14:24:27.077
> 
> 标签：linux, bash, awk

我有一个这样的文本文件：

```
1 http http 3 4 5 
2 dns dns 4 
3 ftp ftp 4 5 6 8 
```

我希望输出是这样的：

```
1 HTTP http 3 4 5 
2 DNS dns 4 
3 FTP ftp 4 5 6 8 
```

我想将第二个字段从小写更改为大写，并且只有第二个字段。

请注意，某一行中的字段数不是固定的。

我可以使用来实现这个目标`awk`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T14:30:11.650

你当然可以。就是这样：

```
awk '$2 = toupper($2)' file 
```

结果：

```
1 HTTP http 3 4 5
2 DNS dns 4
3 FTP ftp 4 5 6 8 
```

从手册：

> 降低（str）
> 
> > 返回字符串 str 的副本，其中 str 中的所有大写字符都转换为对应的小写字符。非字母字符保持不变。
> 
> 上层（str）
> 
> > 返回字符串 str 的副本，其中 str 中的所有小写字符都转换为对应的大写字符。非字母字符保持不变。

* * *

我假设给定您的示例数据，它将至少包含三列，并且您讨论的变量组件适用于包含单词之后的列。如果我错了，您可以简单地添加条件：

```
awk 'NF>1 { $2 = toupper($2) }1' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:37:48.133

```
perl -F -ane '$F[1] = lc($F[1]);print "@F"' your_file 
```

# android - 无法在模拟器上启动测试应用

> ID：14022530
> 
> 赞同：1
> 
> 时间：2012-12-24T14:24:42.397
> 
> 标签：android, emulation, avd

我对 AVD 有这些配置：

![在此处输入图像描述](../Images/fc989c38401e1e9d57e3ab43bf3f0738.png)

并安装了 min SDK API 10

![在此处输入图像描述](../Images/1809c8a4dbc8092d4ef9252875233aab.png)

应用程序清单是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这只是一个测试应用程序，刚刚创建。

所以，当我运行应用程序时，它会尝试在上面的 AVD 上运行，并在模拟器上给出这些错误：

```
The application Package Access Helper(process.com.android.defcontainer) has stopped unexpectedly. Please try again 
```

还有更多这样的错误说：

**sdksetup 停止工作**

**时钟停止工作**

…………

**日志猫：**

```
12-24 14:25:12.089: I/dalvikvm(405): Unable to open or create cache for /system/app/Phone.apk (/data/dalvik-cache/system@app@Phone.apk@classes.dex)
12-24 14:25:12.169: D/AndroidRuntime(405): Shutting down VM
12-24 14:25:12.169: W/dalvikvm(405): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-24 14:25:12.189: E/AndroidRuntime(405): FATAL EXCEPTION: main
12-24 14:25:12.189: E/AndroidRuntime(405): java.lang.RuntimeException: Unable to instantiate application com.android.phone.PhoneApp: java.lang.ClassNotFoundException: com.android.phone.PhoneApp in loader dalvik.system.PathClassLoader[/system/app/Phone.apk]
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.LoadedApk.makeApplication(LoadedApk.java:466)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3260)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.ActivityThread.access$2200(ActivityThread.java:117)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.os.Looper.loop(Looper.java:123)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-24 14:25:12.189: E/AndroidRuntime(405):  at java.lang.reflect.Method.invokeNative(Native Method)
12-24 14:25:12.189: E/AndroidRuntime(405):  at java.lang.reflect.Method.invoke(Method.java:507)
12-24 14:25:12.189: E/AndroidRuntime(405):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-24 14:25:12.189: E/AndroidRuntime(405):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-24 14:25:12.189: E/AndroidRuntime(405):  at dalvik.system.NativeStart.main(Native Method)
12-24 14:25:12.189: E/AndroidRuntime(405): Caused by: java.lang.ClassNotFoundException: com.android.phone.PhoneApp in loader dalvik.system.PathClassLoader[/system/app/Phone.apk]
12-24 14:25:12.189: E/AndroidRuntime(405):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-24 14:25:12.189: E/AndroidRuntime(405):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-24 14:25:12.189: E/AndroidRuntime(405):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.Instrumentation.newApplication(Instrumentation.java:942)
12-24 14:25:12.189: E/AndroidRuntime(405):  at android.app.LoadedApk.makeApplication(LoadedApk.java:461)
12-24 14:25:12.189: E/AndroidRuntime(405):  ... 11 more
12-24 14:25:12.289: W/ActivityManager(70): Process com.android.phone has crashed too many times: killing!
12-24 14:25:12.330: W/DropBoxManagerService(70): Dropping: system_app_crash (1630 > 0 bytes)
12-24 14:25:12.509: W/ActivityManager(70): Activity pause timeout for HistoryRecord{408f4388 com.android.sdksetup/.DefaultActivity}
12-24 14:25:12.729: I/ActivityManager(70): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.android.sdksetup/.DefaultActivity } from pid 0
12-24 14:25:13.079: D/dalvikvm(405): GC_CONCURRENT freed 480K, 54% free 2696K/5831K, external 716K/1038K, paused 6ms+57ms
12-24 14:25:13.962: W/ActivityManager(70): Launch timeout has expired, giving up wake lock!
12-24 14:25:21.707: W/ActivityManager(70): Activity idle timeout for HistoryRecord{408f4388 com.android.sdksetup/.DefaultActivity}
12-24 14:25:22.843: W/ActivityManager(70): Activity idle timeout for HistoryRecord{406d47a0 com.android.sdksetup/.DefaultActivity}
12-24 14:25:27.899: D/skia(70): purging 45K from font cache [6 entries]
12-24 14:25:28.029: D/dalvikvm(70): GC_EXPLICIT freed 415K, 56% free 4455K/9991K, external 1492K/1828K, paused 135ms
12-24 14:25:31.741: W/ActivityManager(70): Activity destroy timeout for HistoryRecord{408f4388 com.android.sdksetup/.DefaultActivity}
12-24 14:25:33.209: D/dalvikvm(296): GC_EXPLICIT freed 1K, 55% free 2583K/5703K, external 716K/1038K, paused 132ms
: E/(): Device disconnected 
```

如何解决这个问题？

谢谢你

# jquery - 注意未定义的变量

> ID：14022533
> 
> 赞同：-4
> 
> 时间：2012-12-24T14:25:00.257
> 
> 标签：jquery, php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) [注意：未定义的变量，但它已定义](https://stackoverflow.com/questions/14022290/notice-undefined-variable-but-its-defined)

当我正常包含文件并加载页面时，它工作正常，但是当我使用**jquery**在页面中加载文件时，它会出现此错误，我正在使用**@include** '...';

index.php 加载它没有错误

> 注意：未定义的变量：第 42 行 C:\wamp\www\webex\files\exhange.php 中的 name_2

当我更改内容然后用 jquery 将其加载回来时，它会给出错误

```
content.load('files\exchange.php').hide().fadeIn('slow'); hideLoading(); 
```

包含的文件包含从 db 检索信息的查询，变量 name_2 是该查询的结果

```
$query = mysql_query('SELECT name FROM exchange'); if (!$query)
{ die(); $error = mysql_error(); } 
else { $row = mysql_fetch_assoc($query); $name_2 = $row['name']; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:29:49.030

尝试像这样使用

```
$name_2 = $row[0]['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:30:34.420

`$query = mysql_query('SELECT name FROM exchange'); if (!$query) { die(); $error = mysql_error(); } else { $row = mysql_fetch_assoc($query); $name_2 = $row['name']; }`

`$name_2`仅在`else`执行时才设置，并且由于它在 {} 内，因此它只存在于那些 {} 内。

您可能希望`$name_2= ''`在查询之前添加。（是的，我自己做过几次，想知道为什么它不像我预期的那样工作！）

# sql - 在表格中搜索 doc_names 并与 Codes Table 进行比较？

> ID：14022540
> 
> 赞同：1
> 
> 时间：2012-12-24T14:25:25.547
> 
> 标签：sql

基本上，我正在尝试查看 file_place 表并找到所有在 codes_document_names 表中具有特定 ID 的文档名称。

```
SELECT DOC_NAME 
FROM FILE_PLACE 
WHERE  LINKED_ID = 140145 
 and DOC_NAME like (select distinct document_name from codes_document_names) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:27:36.623

你不想用`LIKE`，​​你可以用`IN`：

```
SELECT DOC_NAME 
FROM FILE_PLACE 
WHERE  LINKED_ID = 140145 
 and DOC_NAME IN (select document_name 
                  from codes_document_names) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/91053/3)

您还应该能够使用 a`JOIN`而不是`IN`：

```
select DOC_NAME
from FILE_PLACE f
inner join codes_document_names d
  on f.DOC_NAME = d.document_name
where LINKED_ID = 140145 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/91053/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:32:38.013

@Bluefeet 稍微改进了你的答案，

```
SELECT DOC_NAME 
FROM FILE_PLACE 
WHERE  LINKED_ID = 140145 
 and lower(DOC_NAME) IN (select distinct 
     lower(document_name) from codes_document_names) 
```

# redhat - 卸载一个 REPO [yum]

> ID：14022542
> 
> 赞同：2
> 
> 时间：2012-12-24T14:25:35.763
> 
> 标签：redhat, yum

我使用的是 RedHat 6.3 系统。

*   我在安装 php-mcrypt 时遇到问题
*   因此，我将 epel 版本更新为 6.5。
*   yum update 说（错误：尝试检查您的路径并重试）
*   有防火墙，所以我禁用了它
*   我想重新安装 repo，所以我删除了 epel.repo 和 epel-testing.repo
*   并尝试再次安装它，出现以下消息

信息：

```
Setting up Install Process
Examining epel-release-6-5.noarch.rpm: epel-release-6-5.noarch
epel-release-6-5.noarch.rpm: does not update installed package. 
```

有什么我想念的吗？

另外，当我尝试通过 rpm 安装 repo 时

```
rpm -i epel-release-6-5.noarch.rpm 
warning: epel-release-6-5.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY
package epel-release-6-5.noarch is already installed 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T06:14:03.173

从你得到的错误和到目前为止你执行的步骤来看，在我看来你没有卸载 RPM，所以它仍然在 RPM 数据库中。尝试运行：

```
rpm -qa | grep epel 
```

或者

```
rpm -qi epel-release-6-5 
```

看看你得到了什么。如果其中任何一个返回与您安装的 RPM 相关的详细信息，那么您将需要实际删除 RPM，然后重新安装它，仅删除文件将无法完成这项工作。如果这没有返回输出，那么您的 RPM 数据库可能有问题，在这种情况下，我建议您删除 /var/lib/rpm/__db*（仅在备份这些文件之后）。然后使用以下命令重建 rpm 数据库（作为特权用户）：

```
rpm --rebuilddb 
```

那应该重建和更新数据库。

# ruby - ruby delay_job - 堆栈级别太深

> ID：14022543
> 
> 赞同：3
> 
> 时间：2012-12-24T14:25:35.947
> 
> 标签：ruby, debugging, delayed-job

从延迟作业运行时，我经常遇到堆栈级别太深的错误。

我得到这个类似的错误是延迟工作的很多地方，但是当我在控制台中逐行运行相同的代码时，它工作正常......

```
Mon Dec 24 2012 01:21:39 stack level too deep
Mon Dec 24 2012 01:21:39 /usr/lib/ruby/1.8/date/format.rb:157
:in `emit'/usr/lib/ruby/1.8/date/format.rb:171
:in `emit_w'/usr/lib/ruby/1.8/date/format.rb:176
:in `emit_n'/usr/lib/ruby/1.8/date/format.rb:244
:in `strftime'/usr/lib/ruby/1.8/date/format.rb:218
:in `gsub'/usr/lib/ruby/1.8/date/format.rb:218
:in `strftime'/usr/lib64/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_support/core_ext/date/conversions.rb:58
:in `to_s'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/quoting.rb:61
:in `quoted_date'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/quoting.rb:29
:in `quote'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:236
:in `quote'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2392
:in `quote_bound_value'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2352
:in `replace_bind_variables'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2352
:in `gsub'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2352
:in `replace_bind_variables'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2320
:in `sanitize_sql_hash_for_conditions'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:2231
:in `sanitize_sql'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1494
:in `merge_conditions'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1492
:in `each'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1492
:in `merge_conditions'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1804
:in `add_conditions!'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1687
:in `construct_finder_sql'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1548
:in `find_every'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:1505
:in `find_initial'/usr/lib64/ruby/gems/1.8/gems/activerecord-2.3.5/lib/active_record/base.rb:613
:in `find'/home/myapp/apps/myapp/releases/20121130183323/app/models/api_call.rb:20
:in `log'/home/myapp/apps/myapp/releases/20121130183323/lib/twitter_logger.rb:258
:in `log_to_db'/home/myapp/apps/myapp/releases/20121130183323/lib/twitter_logger.rb:138
:in `old_user_timeline'/home/myapp/apps/myapp/releases/20121130183323/lib/twitter_logger.rb:130
:in `user_timeline'/home/myapp/apps/myapp/releases/20121130183323/lib/influencer_helper.rb:1349
:in `safely_get_user_timeline'/home/myapp/apps/myapp/releases/20121130183323/lib/twitter_helper.rb:711
:in `store_followers_tweets'/home/myapp/apps/myapp/releases/20121130183323/lib/delayed_store_follower_tweets.rb:30
:in `perform'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:215
:in `invoke_job'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:93
:in `run_with_lock'/usr/lib/ruby/1.8/timeout.rb:67
:in `timeout'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:93
:in `run_with_lock'/usr/lib/ruby/1.8/benchmark.rb:308
:in `realtime'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:92
:in `run_with_lock'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:153
:in `reserve_and_run_one_job'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:152
:in `each'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:152
:in `reserve_and_run_one_job'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:199
:in `work_off'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:198
:in `times'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/job.rb:198
:in `work_off'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/worker.rb:28
:in `start'/usr/lib/ruby/1.8/benchmark.rb:308
:in `realtime'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/worker.rb:27
:in `start'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/worker.rb:24
:in `loop'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/worker.rb:24
:in `start'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/command.rb:68
:in `run'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/command.rb:46
:in `daemonize'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/application.rb:249
:in `call'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/application.rb:249
:in `start_proc'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/daemonize.rb:197
:in `call'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/daemonize.rb:197
:in `call_as_daemon'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/application.rb:253
:in `start_proc'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/application.rb:293
:in `start'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/controller.rb:70
:in `run'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons.rb:195
:in `run_proc'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/cmdline.rb:109
:in `call'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons/cmdline.rb:109
:in `catch_exceptions'/usr/lib64/ruby/gems/1.8/gems/daemons-1.1.4/lib/daemons.rb:194
:in `run_proc'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/command.rb:45
:in `daemonize'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/command.rb:43
:in `times'/home/myapp/apps/myapp/releases/20121130183323/vendor/gems/delayed_job-1.8.4/lib/delayed/command.rb:43
:in `daemonize'script/delayed_job:5 
```

代码太多，无法包含在此论坛中。

所以我要明确的问题是：

1.）经过研究，我怀疑我只是没有足够的堆栈空间。我看到我可以使用 ulimit 来提高它，但我不知道如何让这个 ulimit 延迟工作，我在我的 shell (.bashrc) 中提高了 ulimit 但这似乎没有帮助。谁能确认我的堆栈空间不足以及如何解决？（这是我得到这个想法的地方：http: [//dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror](http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror)）

2.) 如果它不是 ulimit，它可能是什么，我该如何调试它......我在这个堆栈中看不到任何递归或循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:05:33.867

如果您有某种无限循环，增加堆栈空间不会解决您的问题。

上周我遇到了一个与 delay_job 相关的类似堆栈级别太深的问题。事实证明，这是一个已知问题，在我的案例中与 psych gem（用于 YAML 序列化）有关。当延迟作业将作业排队时，它会将给定对象序列化为 YAML 并将其存储在数据库中，此时我遇到了堆栈溢出。

您的问题可能有完全不同的根本原因（无法从堆栈跟踪中分辨出来），但可能值得一试[https://github.com/collectiveidea/delayed_job/issues/349](https://github.com/collectiveidea/delayed_job/issues/349)

对我来说，解决方案在评论中：[https](https://github.com/collectiveidea/delayed_job/issues/349#issuecomment-5391754) ://github.com/collectiveidea/delayed_job/issues/349#issuecomment-5391754 （即将encode_with方法添加到正在序列化的对象的类中。）

# internet-explorer - SVG：Internet Explorer 和指针事件

> ID：14022544
> 
> 赞同：0
> 
> 时间：2012-12-24T14:25:35.970
> 
> 标签：internet-explorer, svg

我正在尝试实现一个小的 SVG 脚本，它将帮助我在 IE 上实现指针事件。由于我对 SVG 的了解为零，我想问一下是否有人可以帮助我。

我需要在 div 上方放置一个 GIF，将指针事件设置为无，这样当点击 GIF 时，div 会收到点击。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:10:42.027

指针事件仅适用于现代浏览器，不适用于 IE。SVG 直到 IE9 才在 IE 中工作，如果这很重要的话，尽管它在任何其他浏览器中工作了十年或更长时间。

# javascript - IE 10 中的 Telerik DatePicker 无法正常工作

> ID：14022545
> 
> 赞同：13
> 
> 时间：2012-12-24T14:25:41.427
> 
> 标签：javascript, asp.net, telerik

在我的 ASP.NET 站点中，我使用 Telerik 控件绑定日期和时间选择器，它在除 IE 10 之外的所有浏览器中运行良好，然后我运行脚本调试器它说 js 错误：

> SCRIPT5007：无法获取未定义或空引用 Telerik.Web.UI.WebResource.axd 的属性“documentElement”，第 166 行字符 2

任何人都知道，如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T11:46:26.980

我添加到我的 web.config (system.webServer) 行：

```
<httpProtocol>
  <customHeaders>
    <clear />
    <add name="X-UA-Compatible" value="IE=9" />
  </customHeaders>
</httpProtocol> 
```

它解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T05:20:27.277

[在这里](http://www.telerik.com/community/forums/aspnet-ajax/general-discussions/getting-a-unable-to-get-property-documentelement-of-undefined-or-null-reference-error.aspx)找到了解决方案

在标签内插入以下代码`<head>`，

`<meta http-equiv="x-ua-compatible" content="IE=9">`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T23:22:15.033

在 Telerik 论坛中重新发布我的回复：

对于像我们这样的人，在这个时候恢复兼容模式或升级都不是好的解决方案，我们有一个 JavaScript 补丁，它依赖于 jQuery。

```
$(function(){
    if (typeof(window.$telerik.getLocation) == 'function' && Sys.Browser.agent == Sys.Browser.InternetExplorer && Sys.Browser.version == 10) {
        window.$telerik.getLocation = function(a)
        {
            if (a === document.documentElement) {
                return new Sys.UI.Point(0, 0);
            }
            var offset = $(a).offset();        
            return new Sys.UI.Point(offset.left, offset.top);
        }
    }
}); 
```

一个潜在的问题是，当日期或时间选择器元素淡出时，您可以看到它后面的 iframe，其中包含无样式的单词“false”。如果您决定使用此补丁，请记住并注意一些事情。

在我们的调查过程中，我们还注意到这个版本的 RadDatePicker 在 IE11 上运行良好，只是在 IE10 上不行。

原始帖子可以在这里找到：[http ://www.telerik.com/community/forums/aspnet-ajax/general-discussions/getting-a-unable-to-get-property-documentelement-of-undefined-or-null -reference-error.aspx](http://www.telerik.com/community/forums/aspnet-ajax/general-discussions/getting-a-unable-to-get-property-documentelement-of-undefined-or-null-reference-error.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T13:03:59.217

您收到此错误是因为您似乎使用的是较早版本的 Telerik。如果您面向现代浏览器（例如 IE 10），则应考虑升级到最新的 Telerik 版本。

**[由于 Telerik dll 版本 = 2009.2.826.35，IE 10 中的](http://www.telerik.com/community/forums/aspnet-ajax/general-discussions/error-in-ie-10-due-to-telerik-dlls-version-2009-2-826-35.aspx)**参考错误**** 

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T20:36:32.763

ihorko 的答案对我来说很好。在 windows 2008 服务器 (IIS 7) 上执行 ihorko 建议的操作。如果您在 Windows 2003 服务器 (IIS 6) 上工作，请使用：

cscript adsutil.vbs 设置 w3svc/HttpCustomHeaders "X-Powered-By: ASP.NET" "X-UA-Compatible: IE=9"

您可以将该行放在一个 bat 文件中并从 de c:\inetpub\adminscripts 文件夹中运行它

Telerik 套件的升级并不是支付账单和复制一个新的 dll 那么简单。新版本的行为确实有些不同，应该进行测试。使用 Telerik 表单装饰器时布局可能会发生变化（早期的边距“错误”已解决，但当通过代码更正时，此更正将导致升级后布局失真）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-05T10:06:25.573

我在为我的 DNN6 网站寻找解决方案时发现了这篇文章。错误几乎相同

> SCRIPT5007：无法获取未定义或空引用的属性“documentElement”

我尝试了 ihorko 建议的解决方案并编辑了我的 web.config，但它对我不起作用。因此，让我与您分享我为解决此问题所做的工作： [http ://www.40fingers.net/WeblogsNews/Weblogs/tabid/58/ID/123/language/nl-NL/DotNetNuke-6-and-Internet-Explorer -10.aspx](http://www.40fingers.net/WeblogsNews/Weblogs/tabid/58/ID/123/language/nl-NL/DotNetNuke-6-and-Internet-Explorer-10.aspx)

对我来说很棒！**

# java - Java - 部分修改文件

> ID：14022554
> 
> 赞同：0
> 
> 时间：2012-12-24T14:27:23.783
> 
> 标签：java, file, io, aes

我正在开发 AES 256 位文件加密工具。它现在的工作方式是：

将整个文件读入字符串，加密字符串，删除旧文件，然后将加密的字符串输出到旧文件对象中。

这适用于小文件，但如果您要尝试加密大文件，例如比堆空间 java 也可以访问的大文件，您会收到错误。长话短说，我怎样才能一次读取一 MB 的文件，作为字符串，加密该字符串，然后将该 MB 写入临时文件？这将允许对大文件进行加密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:43:55.880

不需要临时文件。只需使用文件流（FileInputStream 和 FileOutputStream）。流式 I/O 正是为处理块中的长文件而创建的。如果你想读/写字符串，你可以使用 FileReader/Writer。[有一个例子](http://www-users.york.ac.uk/~mal503/lore/pkencryption.htm)：

```
 public void decrypt(File in, File out) throws IOException, InvalidKeyException {
    aesCipher.init(Cipher.DECRYPT_MODE, aeskeySpec);
    CipherInputStream is = new CipherInputStream(new FileInputStream(in), aesCipher);
    FileOutputStream os = new FileOutputStream(out);

    int i;
    byte[] b = new byte[1024];
    while((i=is.read(b))!=-1) {
            os.write(b, 0, i);
    } 
```

# c++ - 寻找功率的算法，即 n^p

> ID：14022559
> 
> 赞同：4
> 
> 时间：2012-12-24T14:27:51.057
> 
> 标签：c++, c, algorithm, math

寻找**n^p**的算法是：

```
unsigned long long power(unsigned n, unsigned p)
{
    unsigned long long x=1, y=n;
    while(p > 0)
    {
        if(p&1) x *= y;
        y *= y;
        p >>= 1;
    }
    return x;
} 
```

有人可以解释这个算法背后的逻辑/数学。我知道它可以工作并针对一些测试用例（试运行）进行了解决。我的意思是它是如何工作的，以及这与一般的幼稚方法相比如何有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:29:14.387

这是[*通过平方求幂*](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)：这`>>= 1`是一种奇特的书写方式`/= 2`。

它背后的想法是，如果`p`是偶数，你可以取`n^(p/2)`它并平方它；当`p`是奇数时，`p-1`必须是偶数，因此您可以取`n^((p-1)/2)`，对其进行平方，然后将结果乘以`n`以补偿您在平方之前`1`减去的结果。`p`

# javascript - javascript中的setTimeout与setInterval

> ID：14022565
> 
> 赞同：2
> 
> 时间：2012-12-24T14:28:28.473
> 
> 标签：javascript, jquery

嗨，我们可以将 setInterval 更改为 setTimeout 函数吗，它工作正常我想知道它可以用 setTimeout 完成吗

```
<head>
<script type="text/javascript">
$(function() {
    var current = $('#counter').text();
    var endvalue = 50
    $('a').click(function() {
        setInterval(function() {
            if (current === endvalue) {

            } else {
                current++;
                $('#counter').text(current)
            }
        }, 50)
    })
})
</script>
</head>
<body>
<div id="counter">0</div>
<a href="#">Click</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:32:28.870

使用函数来包含 setTimeout，并在函数内调用它

```
$(function() {
    var current = $('#counter').text();
    var endvalue = 50;

    function timeoutVersion() {
        if (current === endvalue) {return false;} else {
            current++;
            $('#counter').text(current);
        }
        setTimeout(timeoutVersion, 50);
    }

    $('a').click(function() {
        timeoutVersion();
    })
})​ 
```

[现场演示](http://fiddle.jshell.net/3nzhd/show/)| [来源](http://jsfiddle.net/3nzhd/)

但是，在完成后清除`setInterval`with会更好`clearInterval`：

```
$(function() {
    var current = $('#counter').text();
    var endvalue = 50
    $('a').click(function() {
        var storedInterval = setInterval(function() {
            if (current === endvalue) {
                clearInterval(storedInterval);
            } else {
                current++;
                $('#counter').text(current)
            }
        }, 50)
    })
})​ 
```

[现场演示](http://fiddle.jshell.net/3nzhd/1/show/)| [来源](http://jsfiddle.net/3nzhd/1/)

* * *

要回答您的问题 - 是的，您可以`setInterval`通过`setTimeout`对您使用的代码进行一些小的更改来更改`setInterval`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:40:43.743

当你使用`setInterval()`执行一个函数时说，每 1000 毫秒，也就是 1 秒，无论函数执行多长时间，该函数将每 1000 毫秒触发一次，而如果你尝试对 执行相同操作`setTimeout()`，如果函数正在执行，比如说 500 毫秒，那么执行函数之间的总时间间隔将是 1500 毫秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:41:41.357

是的，您可以使用 setTimeout 递归调用相同的函数来获得 setInterval 的效果。请注意，在 setTimeout 中，如果您以递归方式使用它，则必须手动检查以停止循环。但是 setInterval 函数返回一个 id，您可以使用它调用 clearInterval 函数以在需要时停止它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:44:20.093

我总是推荐使用bobince 更好`setTimeout`地`setInterval` [解释的原因](https://stackoverflow.com/a/731625/322395)虽然我的答案接近 extramaster 的，但我不提倡使用间隔来清除它。一种更简单的方法是一旦达到目标就不要调用下一次超时

**[现场演示](http://jsfiddle.net/loktar/Aa7YU/)**

```
 $(function() {
    var current = $('#counter').text();
    var endvalue = 50;

    function increment() {
        if (current !== endvalue) {
            current++;
            $('#counter').text(current)
            setTimeout(increment, 50);
        }

    }

    $('a').click(function() {
        increment();
    })
})​; 
```

# desktop-application - SoundCloud 桌面共享工具包坏了？

> ID：14022566
> 
> 赞同：0
> 
> 时间：2012-12-24T14:28:36.523
> 
> 标签：desktop-application, soundcloud

我在 Renoise 插件中使用 SoundCloud 桌面共享工具包。它让我们 Renoise 用户直接上传到 SoundCloud。又名：

*   [https://github.com/soundcloud/soundcloud-win-sharing](https://github.com/soundcloud/soundcloud-win-sharing)
*   [https://github.com/soundcloud/soundcloud-mac-sharing](https://github.com/soundcloud/soundcloud-mac-sharing)

这些页面上的说明说：

*如果您打算使用 Windows 版本，则必须将重定向 URI 设置为“http://connect.soundcloud.com/desktop”，因此通常最好使用这个。*

直到最近，这一直运行良好。现在该 URL 给出了 404，破坏了该工具。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:59:57.660

该功能暂时中断。现在已经修好了。见上面保罗的评论。（1 月 18 日）。

# android - 如何在 AndEngine 中的图像上放置文本？

> ID：14022567
> 
> 赞同：2
> 
> 时间：2012-12-24T14:28:36.267
> 
> 标签：android, andengine

我是使用 andengine 的 android 游戏开发的新手。

我正在开发一个游戏，我必须使用许多不同颜色的球。

我想要提高游戏性能的是，我应该以编程方式在不同的球上写随机数？

是否可以在 andengine 中将球添加为图像并以编程方式将数字放在其顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:32:40.933

AndEngine 中有一个类叫做`Text`

`Text`对象的行为类似于实体，可以作为子对象附加到场景或另一个实体

首先，您必须创建一个`Font`

```
Font mFont = FontFactory.create(this.getFontManager(), this.getTextureManager(), 256, 256, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32);
mFont.load(); 
```

现在创建一个文本对象并将文本添加到球实体

```
Text text = new Text(0,0, font,"1");
ball.attachChild(text); 
```

[这](http://stuartmct.co.uk/2012/07/16/andengine-creating-and-using-text/)是一篇可能对您有更多帮助的博客文章

# objective-c - 以简单文本形式读取 PDF 文件

> ID：14022570
> 
> 赞同：0
> 
> 时间：2012-12-24T14:28:47.647
> 
> 标签：objective-c, ios, pdf

> **可能重复：**
> [在 iOS 中从 pdf 文档中读取文本和图像](https://stackoverflow.com/questions/5732219/reading-text-and-images-from-a-pdf-document-in-ios)

我正在尝试访问我的 ios 应用程序中的一些 .pdf 文件并阅读其中的文本，我稍后会在 UITextView 中显示这些文本。我能够使用 UIWebView 从 .txt 文件、.doc 文件以及 .rtf 文件中提取文本。但不确定如何处理 .pdf 文件。请如果有人可以帮助我解决这个问题。我只是不想在 webview 中显示 pdf，而是希望在其中包含文本内容以进行进一步操作。

# php - PHP - 获取路径的文件扩展名

> ID：14022573
> 
> 赞同：0
> 
> 时间：2012-12-24T14:28:54.450
> 
> 标签：php

这会抓取路径的文件扩展名吗？它构成了文件上传脚本的一部分，该脚本继续检查 $end 是“jpg”而不是其他东西。考虑到我下面的内容，可以绕过它吗？

```
$temp = strlen($path);
$end = $path[$temp-3] . $path[$temp-2] . $path[$temp-1]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T14:30:57.597

看看： http: [//php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)

> 混合路径信息（字符串 $path [, int $options = PATHINFO_DIRNAME | PATHINFO_BASENAME | PATHINFO_EXTENSION | PATHINFO_FILENAME ]）

```
<?php
$path_parts = pathinfo('/www/htdocs/inc/lib.inc.php');

echo $path_parts['dirname'], "\n";    # returns: /www/htdocs/inc
echo $path_parts['basename'], "\n";   # returns: lib.inc.php
echo $path_parts['extension'], "\n";  # returns: php
echo $path_parts['filename'], "\n";   # returns: lib.inc  | since PHP 5.2.0
?> 
```

或者您可以设置标志以仅获取扩展名，如下所示：

```
$extension = pathinfo('/www/htdocs/inc/lib.inc.php', PATHINFO_EXTENSION);
echo $extension; # prints `php` to the screen. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:34:39.797

如果您想确保上传的图片有效，请不要依赖文件结尾，因为文件结尾可能会被篡改。您可以使用 PHP 图像函数来确保文件确实是图像，例如：

```
function is_image($path) {
    $a = getimagesize($path);
    $image_type = $a[2];

    if(in_array($image_type , array(IMAGETYPE_GIF , IMAGETYPE_JPEG ,IMAGETYPE_PNG , IMAGETYPE_BMP)))
    {
         return true;
    }
    return false;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:32:18.783

试试这个，

```
$ext = pathinfo('abc.jpeg' ,PATHINFO_EXTENSION); 
```

# c++ - 浮点 RGB 值与颜色的 ubyte RGB 值

> ID：14022574
> 
> 赞同：4
> 
> 时间：2012-12-24T14:29:02.307
> 
> 标签：c++, graphics

（ubyte 是无符号字符）

在例如颜色类中为 RGB 值使用浮点值有什么意义？它是否提供更高的准确性？空间呢？使用 float 与 ubyte 的性能优势/障碍是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T14:35:45.243

临：

*   做数学时不需要转换为浮点数
*   当按顺序应用多个处理步骤时，更准确地保留中间值
*   具有*更大*的动态范围和分辨率
*   float 是 GPU 等的自然格式

缺点：

*   需要更多存储空间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T14:50:12.343

在所有可能的情况下，它确实提供了更高的精度。如另一个答案中所述，不必来回转换也有好处，这反过来又会导致丢失中间结果 - 假设您有一个浮点数为 1.0（一个字节为 255）的像素，并且你乘以 0.65。然后将其转换回整数，即 166.75 - 但我们向下舍入到 166。所以我们失去了 0.75。如果我们做一些进一步的数学运算，错误可能会变得更大......当然，如果某个中间步骤导致我们的值（方式）超过 255（1.0）或低于 0（0.0），则完全有可能保留新的值一段时间，然后在需要时“修复它”。

当然，您不能（通常）在更小的空间中存储更多数据，因此典型的浮点数是字节的 4 倍。一些 GPU 具有 16 位浮点数，其中包含 11 位尾数和 4-5 位指数，这使得它们适用于大多数类型的简单像素数学。但它仍然是大小的两倍，但不是“精确度”的两倍（我的一位同事花了很多时间试图获得一个使用 16 位浮点数的算法来匹配 32 位浮点数的结果，但从未完全实现） .

# javascript - 将 libxmljs XML 写入文件

> ID：14022577
> 
> 赞同：1
> 
> 时间：2012-12-24T14:29:17.420
> 
> 标签：javascript, node.js, libxml-js

我有一个 libxmljs XML 对象。我想把它写到一个文件中；到目前为止，这是我所拥有的。

```
var libxml = require('libxmljs');
var xml =  '<?xml version="1.0" encoding="UTF-8"?>' +
           '<root>' +
               '<child foo="bar">' +
                   '<grandchild baz="fizbuzz">'+
            '<blah>grandchild content<inblah>blah blah</inblah></blah>' +
            '<blah1>grandchild content blah2</blah1>'+
           '</grandchild>' +
               '</child>' +
             '</root>';

var xmlDoc = libxml.parseXml(xml);
//..... do some changes to xmlDoc
console.log(xmlDoc.toString()); 
```

我想写入`xmlDoc`一个单独的文件。如`result.xml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T13:15:56.690

使用 node.js 中内置的 fs 模块。像这样：

```
var js = require('fs');
var libxml = require('libxmljs');
var xml =  '<?xml version="1.0" encoding="UTF-8"?><root>foobar</root>';

var xmlDoc = libxml.parseXml(xml);
//..... do some changes to xmlDoc
fs.writeFile('test.xml', xmlDoc.toString(), function(err) {
  if (err) throw err;
  console.log('Wrote XML string to test.xml'); 
}); 
```

您可以在此处进一步了解 fs 模块：[http ://nodejs.org/api/fs.html#fs_fs_readfile_filename_options_callback](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_options_callback)

# javascript - Object.getOwnPropertyNames(window) 不在数组中返回 setTimeout

> ID：14022582
> 
> 赞同：3
> 
> 时间：2012-12-24T14:29:53.570
> 
> 标签：javascript

`Object.getOwnPropertyNames(window)`不会在返回的数组中返回 setTimeout 值。

这里有什么问题？

之后我想检查 setTimeout 属性的属性描述符对象，但`Object.getOwnPropertyDescriptor(window,"setTimeout")`返回未定义。

```
 var windowProp = Object.getOwnPropertyNames(window);

    for(var i=0; i< windowProp.length; i++){
    console.log(windowProp[i]);}
    // i don't see setTimeout in the console output

    Object.getOwnPropertyDescriptor(window,"setTimeout")
    //undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:54:20.310

那是因为`setTimeout`不在**那个**名单上。

我看到的（在 Chrome [在此页面上]）：

```
Date
EventEmitter
RegExp
adzerk2_inline_ly45m8gua792qbvm
careers_adselector
moveScroller
Function
encodeURIComponent
TypeError
ados_loadFIframe
_gat
careers_cssurl
PR_SHOULD_USE_CONTINUATION
decodeURIComponent
Number
i
sanitizeAndSplitTags
adFeedbackCastVote
adzerk2_html_rpcn4bbtg94kbrvw
genuwine
ados
Boolean
azScriptExtensionLoad
quantserve
eval
StackExchange
PR
isNaN
Array
styleCode
CTIsPlayback
unescape
external
zshow
tagRendererRaw
cssLinkLoad
apiCallbacks
Markdown
scriptSrc
NaN
escape
RangeError
adzerk2_func_fi5lor1t31ib0xu6
v8Intl
careers_leaderboardcssurl
azInitExtension
Object
EvalError
URIError
_gaq
parseFloat
isFinite
careers_companycssurl
uh
gauth
adzerk2_func_d1qd3ryzl0aanl1m
azScriptSRCLoad
_qevents
document
azLoad
decodeURI
__qc
windowProp
tagRenderer
undefined
prettyPrintOne
azHtmlLoad
azScriptInlineLoad
votesCast
SyntaxError
initFadingHelpText
Generator
showFadingHelpText
careers_adurl
jQuery
Infinity
String
prettyPrint
top
zItems
parseInt
JSON
WinterBash
azRegisterExtension
ReferenceError
cssLoad
Math
profileLink
encodeURI
window
Error
location
prepareEditor
initTagRenderer
gaGlobal
chrome
$
ados_frameLoaded
webkitAudioContext
webkitRTCPeerConnection
webkitMediaStream
WebSocket
webkitNotifications
WebKitSourceBufferList
WebKitSourceBuffer
WebKitMediaSource
SharedWorker
DeviceOrientationEvent
MediaController
HTMLSourceElement
TimeRanges
MediaError
HTMLVideoElement
HTMLMediaElement
HTMLAudioElement
Audio
TrackEvent
TextTrackList
TextTrackCueList
TextTrackCue
TextTrack
HTMLTrackElement
localStorage
sessionStorage
applicationCache
OfflineAudioCompletionEvent
AudioProcessingEvent
webkitAudioPannerNode
MediaStreamEvent
RTCIceCandidate
IceCandidate
RTCSessionDescription
SessionDescription
SQLException
CloseEvent
webkitStorageInfo
webkitIDBTransaction
webkitIDBRequest
webkitIDBObjectStore
webkitIDBKeyRange
webkitIDBIndex
webkitIDBFactory
webkitIDBDatabaseException
webkitIDBDatabase
webkitIDBCursor
webkitIndexedDB
Notification
webkitIntent
WebKitIntent
WebKitMutationObserver
webkitURL
URL
WebKitBlobBuilder
FileReader
FileError
FormData
SVGFilterElement
SVGFETurbulenceElement
SVGFETileElement
SVGFESpotLightElement
SVGFESpecularLightingElement
SVGFEPointLightElement
SVGFEOffsetElement
SVGFEMorphologyElement
SVGFEMergeNodeElement
SVGFEMergeElement
SVGFEImageElement
SVGFEGaussianBlurElement
SVGFEFuncRElement
SVGFEFuncGElement
SVGFEFuncBElement
SVGFEFuncAElement
SVGFEFloodElement
SVGFEDropShadowElement
SVGFEDistantLightElement
SVGFEDisplacementMapElement
SVGFEDiffuseLightingElement
SVGFEConvolveMatrixElement
SVGFECompositeElement
SVGFEComponentTransferElement
SVGFEColorMatrixElement
SVGFEBlendElement
SVGComponentTransferFunctionElement
SVGVKernElement
SVGMissingGlyphElement
SVGHKernElement
SVGGlyphRefElement
SVGGlyphElement
SVGFontFaceUriElement
SVGFontFaceSrcElement
SVGFontFaceNameElement
SVGFontFaceFormatElement
SVGFontFaceElement
SVGFontElement
SVGAltGlyphItemElement
SVGAltGlyphElement
SVGAltGlyphDefElement
SVGSetElement
SVGMPathElement
SVGAnimateTransformElement
SVGAnimateMotionElement
SVGAnimateElement
SVGAnimateColorElement
SVGZoomAndPan
SVGViewSpec
SVGViewElement
SVGUseElement
SVGUnitTypes
SVGTSpanElement
SVGTRefElement
SVGTransformList
SVGTransform
SVGTitleElement
SVGTextPositioningElement
SVGTextPathElement
SVGTextElement
SVGTextContentElement
SVGSymbolElement
SVGSwitchElement
SVGSVGElement
SVGStyleElement
SVGStringList
SVGStopElement
SVGScriptElement
SVGRenderingIntent
SVGRectElement
SVGRect
SVGRadialGradientElement
SVGPreserveAspectRatio
SVGPolylineElement
SVGPolygonElement
SVGPointList
SVGPoint
SVGPatternElement
SVGPathSegMovetoRel
SVGPathSegMovetoAbs
SVGPathSegList
SVGPathSegLinetoVerticalRel
SVGPathSegLinetoVerticalAbs
SVGPathSegLinetoRel
SVGPathSegLinetoHorizontalRel
SVGPathSegLinetoHorizontalAbs
SVGPathSegLinetoAbs
SVGPathSegCurvetoQuadraticSmoothRel
SVGPathSegCurvetoQuadraticSmoothAbs
SVGPathSegCurvetoQuadraticRel
SVGPathSegCurvetoQuadraticAbs
SVGPathSegCurvetoCubicSmoothRel
SVGPathSegCurvetoCubicSmoothAbs
SVGPathSegCurvetoCubicRel
SVGPathSegCurvetoCubicAbs
SVGPathSegClosePath
SVGPathSegArcRel
SVGPathSegArcAbs
SVGPathSeg
SVGPathElement
SVGPaint
SVGNumberList
SVGNumber
SVGMetadataElement
SVGMatrix
SVGMaskElement
SVGMarkerElement
SVGLineElement
SVGLinearGradientElement
SVGLengthList
SVGLength
SVGImageElement
SVGGradientElement
SVGGElement
SVGException
SVGForeignObjectElement
SVGEllipseElement
SVGElementInstanceList
SVGElementInstance
SVGElement
SVGDocument
SVGDescElement
SVGDefsElement
SVGCursorElement
SVGColor
SVGClipPathElement
SVGCircleElement
SVGAnimatedTransformList
SVGAnimatedString
SVGAnimatedRect
SVGAnimatedPreserveAspectRatio
SVGAnimatedNumberList
SVGAnimatedNumber
SVGAnimatedLengthList
SVGAnimatedLength
SVGAnimatedInteger
SVGAnimatedEnumeration
SVGAnimatedBoolean
SVGAnimatedAngle
SVGAngle
SVGAElement
SVGZoomEvent
XPathException
XPathResult
XPathEvaluator
Storage
ClientRectList
ClientRect
MimeTypeArray
MimeType
PluginArray
Plugin
MessageChannel
MessagePort
XSLTProcessor
XMLHttpRequestException
XMLHttpRequestUpload
XMLHttpRequest
XMLSerializer
DOMParser
XMLDocument
EventSource
RangeException
Range
NodeFilter
Blob
FileList
File
Worker
Clipboard
WebKitPoint
WebKitCSSMatrix
WebKitCSSRegionRule
WebKitCSSKeyframesRule
WebKitCSSKeyframeRule
EventException
WebGLContextEvent
SpeechInputEvent
StorageEvent
TouchEvent
XMLHttpRequestProgressEvent
WheelEvent
WebKitTransitionEvent
WebKitAnimationEvent
UIEvent
TextEvent
ProgressEvent
PageTransitionEvent
PopStateEvent
OverflowEvent
MutationEvent
MouseEvent
MessageEvent
KeyboardEvent
HashChangeEvent
ErrorEvent
CustomEvent
CompositionEvent
BeforeLoadEvent
Event
DataView
Float64Array
Float32Array
Uint32Array
Int32Array
Uint16Array
Int16Array
Uint8ClampedArray
Uint8Array
Int8Array
ArrayBuffer
DOMStringMap
WebGLUniformLocation
WebGLTexture
WebGLShaderPrecisionFormat
WebGLShader
WebGLRenderingContext
WebGLRenderbuffer
WebGLProgram
WebGLFramebuffer
WebGLBuffer
WebGLActiveInfo
TextMetrics
ImageData
CanvasRenderingContext2D
CanvasGradient
CanvasPattern
Option
Image
HTMLUnknownElement
HTMLAllCollection
HTMLCollection
HTMLUListElement
HTMLTitleElement
HTMLTextAreaElement
HTMLTableSectionElement
HTMLTableRowElement
HTMLTableElement
HTMLTableColElement
HTMLTableCellElement
HTMLTableCaptionElement
HTMLStyleElement
HTMLSpanElement
HTMLSelectElement
HTMLScriptElement
HTMLQuoteElement
HTMLProgressElement
HTMLPreElement
HTMLParamElement
HTMLParagraphElement
HTMLOutputElement
HTMLOptionElement
HTMLOptGroupElement
HTMLObjectElement
HTMLOListElement
HTMLModElement
HTMLMeterElement
HTMLMetaElement
HTMLMenuElement
HTMLMarqueeElement
HTMLMapElement
HTMLLinkElement
HTMLLegendElement
HTMLLabelElement
HTMLLIElement
HTMLKeygenElement
HTMLInputElement
HTMLImageElement
HTMLIFrameElement
HTMLHtmlElement
HTMLHeadingElement
HTMLHeadElement
HTMLHRElement
HTMLFrameSetElement
HTMLFrameElement
HTMLFormElement
HTMLFontElement
HTMLFieldSetElement
HTMLEmbedElement
HTMLDivElement
HTMLDirectoryElement
HTMLDataListElement
HTMLDListElement
HTMLCanvasElement
HTMLButtonElement
HTMLBodyElement
HTMLBaseFontElement
HTMLBaseElement
HTMLBRElement
HTMLAreaElement
HTMLAppletElement
HTMLAnchorElement
HTMLElement
HTMLDocument
Window
Selection
ProcessingInstruction
EntityReference
Entity
Notation
DocumentType
CDATASection
Comment
Text
Element
Attr
CharacterData
NamedNodeMap
NodeList
Node
Document
DocumentFragment
DOMTokenList
DOMSettableTokenList
DOMImplementation
DOMStringList
DOMException
StyleSheetList
RGBColor
Rect
CSSRuleList
Counter
MediaList
CSSStyleDeclaration
CSSStyleRule
CSSPageRule
CSSMediaRule
CSSImportRule
CSSFontFaceRule
CSSCharsetRule
CSSRule
WebKitCSSFilterValue
WebKitCSSTransformValue
CSSValueList
CSSPrimitiveValue
CSSValue
CSSStyleSheet
StyleSheet
performance
console
devicePixelRatio
styleMedia
parent
opener
frames
self
defaultstatus
defaultStatus
status
name
length
closed
pageYOffset
pageXOffset
scrollY
scrollX
screenTop
screenLeft
screenY
screenX
innerWidth
innerHeight
outerWidth
outerHeight
offscreenBuffering
frameElement
event
crypto
clientInformation
navigator
toolbar
statusbar
scrollbars
personalbar
menubar
locationbar
history
screen 
```

尝试`Window.prototype`改用：

```
var windowProp = Object.getOwnPropertyNames(Window.prototype);

for(var i=0; i< windowProp.length; i++){
console.log(windowProp[i]);}

Object.getOwnPropertyDescriptor(Window.prototype,"setTimeout")
//object 
```

这是它返回的内容：

```
toString
webkitPostMessage
postMessage
close
blur
focus
ondeviceorientation
onwebkittransitionend
onwebkitanimationstart
onwebkitanimationiteration
onwebkitanimationend
onsearch
onreset
onwaiting
onvolumechange
onunload
ontimeupdate
onsuspend
onsubmit
onstorage
onstalled
onselect
onseeking
onseeked
onscroll
onresize
onratechange
onprogress
onpopstate
onplaying
onplay
onpause
onpageshow
onpagehide
ononline
onoffline
onmousewheel
onmouseup
onmouseover
onmouseout
onmousemove
onmousedown
onmessage
onloadstart
onloadedmetadata
onloadeddata
onload
onkeyup
onkeypress
onkeydown
oninvalid
oninput
onhashchange
onfocus
onerror
onended
onemptied
ondurationchange
ondrop
ondragstart
ondragover
ondragleave
ondragenter
ondragend
ondrag
ondblclick
oncontextmenu
onclick
onchange
oncanplaythrough
oncanplay
onblur
onbeforeunload
onabort
getSelection
print
stop
open
showModalDialog
alert
confirm
prompt
find
scrollBy
scrollTo
scroll
moveBy
moveTo
resizeBy
resizeTo
matchMedia
setTimeout
clearTimeout
setInterval
clearInterval
webkitRequestAnimationFrame
webkitCancelAnimationFrame
webkitCancelRequestAnimationFrame
atob
btoa
addEventListener
removeEventListener
captureEvents
releaseEvents
getComputedStyle
getMatchedCSSRules
webkitConvertPointFromPageToNode
webkitConvertPointFromNodeToPage
dispatchEvent
webkitRequestFileSystem
webkitResolveLocalFileSystemURL
openDatabase
TEMPORARY
PERSISTENT
constructor
Object 
```

# javascript - 未捕获的类型错误：无法设置空 HTML5 Javascript 的“fillStyle”属性

> ID：14022583
> 
> 赞同：1
> 
> 时间：2012-12-24T14:30:00.883
> 
> 标签：javascript, html, canvas, methods, typeerror

我正在用 JavaScript 玩 HTML5 画布元素。现在，当我创建一个外部文件时，我可以使用内部 JavaScript 在画布上绘制形状，我得到一个`Uncaught Type Error`. 我想做的就是通过一个外部文件在我的画布上画一个矩形。

这是我的 HTML：

```
<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>FireBlaster</title>
</head>

<body style="background:#111111">
    <div id="inner">
        <button id="drawSquareBtn" type="button">Draw Square</button>
        <canvas id="myCanvas" width="600px" ; height="400px;" style=" dispaly:block; background:#000000; margin:8% 25%;"></canvas>
    </div>
    <script type="text/javascript" src="game.js"></script>
</body>

</html> 
```

这是我的 JavaScript：

```
//JavaScript Document
var canvasBg = document.getElementById('myCanvas');
var ctx = canvasBg.getContext('2D');

function drawSquare() {

    alert('your pressed a button!');
    ctx.fillStyle = "#0A0AFF";
    ctx.fillRect(200, 150, 150, 50);
}
var drawSquareBtn = document.getElementById('drawSquareBtn');
drawSquareBtn.addEventListener('click', drawSquare, false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:34:00.357

d in`getContext("2d")`需要小写。

**[现场演示](http://jsfiddle.net/loktar/XMMCn/)**

```
// Changed d to lower case
var ctx = canvasBg.getContext('2d'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T05:48:41.813

错误的 ： - `var ctx = canvasBg.getContext('2D');`

对 ： - `var ctx = canvasBg.getContext('2d');`

`D`资本不创建实例。

# twig - symfony 2.1：使用 PHP 脚本和 Twig 插入图像

> ID：14022585
> 
> 赞同：0
> 
> 时间：2012-12-24T14:30:11.043
> 
> 标签：twig, symfony-2.1

使用简单的 PHP，我们可以插入由 PHP 脚本生成的图像，例如：

```
<img src="image_script.php"> 
```

我们如何使用 Symfony 和 Twig 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:13:54.263

你可以在 Symfony2 和 twig 中做到这一点，就像在普通的 php 中一样：

```
<img src="{{ path("img_action") }}" alt="" /> 
```

其中`img_action`是返回图像的操作的路由名称。

在该操作中，创建一个新`Response`实例，将其内容设置为图像，将内容类型标头设置为适当的 MIME 类型，然后设置`return`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:51:05.170

我认为你应该看看 LiipImagineBundle ：

[https://github.com/liip/LiipImagineBundle](https://github.com/liip/LiipImagineBundle)

此捆绑包允许您创建调整大小图像的缓存。

# php - 编码不适当的字符

> ID：14022592
> 
> 赞同：0
> 
> 时间：2012-12-24T14:30:36.903
> 
> 标签：php, encoding, utf-8, decoding, utf8-decode

我怎样才能打印出代码中写的内容？`ışık hğzmesi`是用代码编写的，我想将它再次打印为`ışık hğzmesi`. 我在下面尝试过关于 utf-8 编码的方法，但它们不起作用。我的代码编辑器设置也是 utf-8。

```
<?php
    $t = 'ışık hğzmesi';
    echo utf8_encode($t);

result:Ã„Â±Ã…ÂŸÃ„Â±k hÃ„ÂŸzmesi
?>

<?php
    $t = 'ışık hüzmesi';
    echo utf8_decode(($t));

//result:???k hüzmesi
?>

<?php
    $t = 'ışık hüzmesi';
    echo urlencode($t);

//result:%C4%B1%C5%9F%C4%B1k+h%C3%BCzmesi
?>

<?php
    $t = 'ışık hüzmesi';
    echo urldecode(urlencode($t));

//result:Ä±ÅŸÄ±k hÃ¼zmesi
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:33:27.673

源文件的物理编码是 UTF-8，因此字符串已经是 UTF-8。永远不要使用`utf8_encode`.

```
<?php
header("Content-Type: text/html; charset=UTF-8");
$t = 'ışık hğzmesi';
echo $t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:33:45.490

将此作为代码中的第一件事：

```
header('Content-Type: text/html; charset=utf-8'); 
```

# jquery - Remove line from html table with jquery

> ID：14022599
> 
> 赞同：-3
> 
> 时间：2012-12-24T14:31:39.837
> 
> 标签：jquery

I have a html table :

```
<table>
 <tr >
  <td>name 1</td>
  <td>-</td>
  <td>-</td>
  <td>-</td>
</tr>
 <tr >
  <td>name 2</td>
  <td>-</td>
  <td>158,5</td>
  <td>-</td>
</tr>
</table> 
```

I want to remove/hide lines where all values are eq to "-", what's the best way to do it ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:37:24.873

This is easier if you add an id to your table, to avoid getting rows from other tables...

```
<table id="Example">
    ... 
```

So here is an example...

```
$('#Example tr').each( function () {
    var self = $(this);
    var allEmpty = true;
    $('td', self).each( function () {
        if ($(this).text() !== '-') {
            allEmpty = false;
        }
    });

    if (allEmpty) {
        self.hide();
    }
}); 
```

This deletes a row where ALL fields are exactly `-`. You can modify this with more custom logic if you need it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:41:33.090

Use

```
$("button").click(function () {
    $("td").remove(":contains('-')");
});​ 
```

To delete the td with "-"

[Link](http://jsfiddle.net/XNDj4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:42:14.100

```
$('tr').each(function() {
    var self = $(this);
    var EmptyCheck = true;
    $('td:not(:eq(0))', self).each(function() {
        if ($(this).text() !== '-') {
            EmptyCheck = false;
            console.log($(this));
        }
    });

    if (EmptyCheck) {
        self.hide();
        EmptyCheck = true;
    }
});​ 
```

Fiddle - [http://jsfiddle.net/atif089/LWPbj/](http://jsfiddle.net/atif089/LWPbj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:37:55.323

You can use `filter` method.

```
$('table td').filter(function(){
   var txt = this.textContent || this.innerText;
   return txt === '-';
}).hide(); 
```

[http://jsfiddle.net/4snwH/](http://jsfiddle.net/4snwH/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T14:42:47.127

Try this one.

```
$("table tr td").each(function(){

if($(this).html() == "-")
{
   $(this).css('display','none'); // if you want to hide
   $(this).remove(); // if you want to remove
}

}); 
```

# java - java.lang.ClassCastException: [B 不能转换为 java.lang.String

> ID：14022602
> 
> 赞同：7
> 
> 时间：2012-12-24T14:31:49.920
> 
> 标签：java, jpa, jpa-2.0, openjpa, blueprint-osgi

我用字段 LoginId 和 Password 编写了一个实体类。

我正在加密密码并使用 AES_ENCRYPT 将其存储在数据库中。

我只想检索已解密的密码。所以，我在 OPen JPA 2.0 中使用 AES_DECRYPT 使用 NAtiveQueryis。

我写的查询是：

```
Query q = em.createNativeQuery("select AES_DECRYPT(l.password,?2) from loginDetails l where l.loginID = ?1");
q.setParameter(1, loginId);
q.setParameter(2, getKey());
String s = q.getSingleResult(); 
```

但我得到以下异常：

```
java.lang.ClassCastException: [B cannot be cast to java.lang.String
at com.rcs.chef.validation.UserValidation.decryptedPasswordForID(UserValidation.java:99)
at com.rcs.chef.validation.UserValidation.validateUser(UserValidation.java:81)
at com.rcs.chef.validation.UserValidation.activate(UserValidation.java:72)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:226)
at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:824)
at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:636)
at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:724)
at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:64)
at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:219)
at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:147)
at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:640)
at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:331)
at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:227) 
```

我什至试过这个：

```
Query q = em.createNativeQuery("select AES_DECRYPT(l.password,?2) from loginDetails l where l.loginID = ?1");
q.setParameter(1, loginId);
q.setParameter(2, getKey());
List<Object> s = q.getResultList();  

String s1 = null;
for(Object o : s){
    s1= (String) o;
} 
```

即使在这里，我也会遇到与以下相同的异常：

```
java.lang.ClassCastException: [B cannot be cast to java.lang.Object 
```

你能告诉我查询和处理请求的错误是什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T14:50:49.663

类似的问题：[“[B”是什么Java类型？](https://stackoverflow.com/questions/4606864/what-kind-of-java-type-is-b)

MySQL`AES_DECRYPT`不返回 a*而是*`String`返回一个字节数组，用“[B”表示。将结果转换为`byte[]`并从中构建您的字符串。

看起来您甚至不需要解密密码；你只是想`validateUser`，对吧？- 在这种情况下，正如其他人所指出的，应该使用安全哈希。

您可以使用 MySQL 轻松做到这一点，因为它已经提供了必要的[功能](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_sha1)：MD5（被认为是不安全的）、SHA1（几乎是标准的）和 SHA2（甚至比 SHA1 更安全）。

所以你的方案基本上可能看起来像：

`insert into loginDetails (..., passwordHashSalt, passwordHash) values ( ..., ?1, SHA1(CONCAT( ?1, ?2 )) )`，其中`?1`设置为唯一的“salt”，例如用户名本身，并且`?2`是实际密码。请注意，盐也必须存储在数据库中，并且“必须”对每个用户/密码都是唯一的；因此，用户名是一个自然的选择。

然后，要验证给定的密码，您可以执行以下操作：

`select 'OK' from loginDetails where ... and passwordHash = SHA1(CONCAT( passwordHashSalt, ?1 ))``?1`，要验证的密码在哪里。

有关更多信息，请在 Internet 上搜索“密码哈希”，例如参见[此处](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)或[此处](http://crackstation.net/hashing-security.htm)。

如果需要，这些散列操作也可以在您的数据库客户端代码中完成。

# c# - 如何在 C# 中使用 MapReduce 加入 2 个集合？

> ID：14022606
> 
> 赞同：2
> 
> 时间：2012-12-24T14:32:09.230
> 
> 标签：c#, mongodb, mapreduce

为了加入两个数据集，我尝试通过以下方式[将此示例转换为 C#：](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)

如果你们中的任何人可以建议适当的代码修改以实现与示例相同的结果，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:11:27.653

产生与[此](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)示例相同结果的解决方案如下：

```
class Program
{
    static void Main(string[] args)
    {
        var connectionString = "mongodb://localhost";
        var client = new MongoClient(connectionString);
        var server = client.GetServer();
        var database = server.GetDatabase("mr_demo");
        var cLifeExpectancy = database.GetCollection("life_expectancy");
        var cEconomicAssistance = database.GetCollection("us_economic_assistance");

        var options = new MapReduceOptionsBuilder();
        options.SetOutput(MapReduceOutput.Inline);

        options.SetOutput(MapReduceOutput.Reduce("result"));
        var result = cLifeExpectancy.MapReduce(life_expect_map, r, options);
        result = cEconomicAssistance.MapReduce(us_econ_map, r, options);

        foreach (var record in result.GetResults())
        {
            Console.WriteLine(record);
        }
    }

    private static string life_expect_map =
        @"function() {
            // Simply emit the age and 0 for the dollar amount.
            // The dollar amount will come from the other collection.
            emit(this.country, {life_expectancy: this.age, dollars: 0});
        }";

    private static string us_econ_map =
        @"function() {
            // The data set contains grant amounts going back to 1946\.  I
            // am only interested in 2009 grants.
            if (this.FY2009 !== undefined && this.FY2009 !== null) {
                emit(this.country_name, {
                    dollars: this.FY2009,
                    life_expectancy: 0
                });
            }
        }";

    private static string r =
        @"function(key, values) {
            var result = {dollars: 0, life_expectancy: 0};

            values.forEach(function(value) {
                // Sum up all the money from all the 2009 grants for this
                // country (key)
                result.dollars += (value.dollars !== null) ? value.dollars : 0;
                // Only set life expectancy once
                if (result.life_expectancy === 0 &&
                value.life_expectancy !== null
                ) {
                    result.life_expectancy = value.life_expectancy;
                }
            });

            return result;
        }";
} 
```

# list - 如何使用 sqldatareader 添加列表

> ID：14022608
> 
> 赞同：0
> 
> 时间：2012-12-24T14:32:19.120
> 
> 标签：list, arraylist, sqldatareader

我正在做一个程序，我使用了一个具有 4-5 个属性的类

```
public class Car
{
    public string Make;
    public string Model;
    public int Year;
    public int Doors;
    public string Colour;
    public float Price;
} 
```

现在从 sql 查询中，我想填充 List 的值并返回相同的值..

```
List<Car> lrs = null;

while (rdr.Read())
                        {
                            lrs = new List<LocationResult>{ new LocationResult{Make=(string)rdr["Make"], Model=null, Year=null, Doors=null, Colour=null, Price=null}};
                        } 
```

除了上述运行完成后 lrs 只包含最后一行 sql 之外，代码一切正常。每次都会被while循环覆盖。那么我应该如何继续添加新行..

如果我做..

```
lrs.add("") - it only accepts one parameter .... 
```

任何帮助不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:44:32.877

```
List<Car> lrs = new List<Car>();

while (rdr.Read()) {

  Car c = new Car();
  c.Model = rdr. ... /* get model from reader...*/;
  c.Make = rdr. ... /* get make from reader...*/;
  /* ... */

  lrs.add(c);
} 
```

# php - Web框架的状态机？

> ID：14022616
> 
> 赞同：1
> 
> 时间：2012-12-24T14:32:46.720
> 
> 标签：php

我最近开始学习状态机，我有一个问题：可以使用有限状态机对 Web 框架的工作流程进行建模吗？

我认为这是一种可能性的原因是，在接收请求和传递信息之间，肯定存在一组状态（初始化请求、路由请求、分派和显示信息 - 以非常简化的形式）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:17:12.207

没有任何用处。

您描述的工作流程实际上只是请求处理中的一组阶段。虽然这在技术上可能符合状态机的定义，但所涉及的转换在很大程度上都是无条件的（每个阶段总是转换到下一个阶段，除非发生错误），因此将其建模为状态机并不是特别有用。

# android - Android 相当于苹果的 MDM

> ID：14022618
> 
> 赞同：0
> 
> 时间：2012-12-24T14:33:10.057
> 
> 标签：android, ios, mdm

我听说 Apple 在 iOS 中内置了 MDM 功能，它使服务器能够向其注册的设备发送一组 MDM 命令。

我的问题 - 在 Android 中是否有类似的东西。也许通过 GCM？

或者换一种说法：我是否必须在设备上编写客户端应用程序才能远程管理它？

谢谢！

编辑：我实际上需要的只是对手机进行基本查询的能力：硬件、操作系统版本、运营商......类似的东西。也许还有已安装应用程序的列表。我所说的 MDM 是指移动设备管理。但实际上我需要的只是上面提到的获取方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:02:47.390

Android有多任务处理，iOS没有。使用 Android，您可以编写一个可以直接管理设备的应用程序。iOS 不允许这样做，您需要使用他们提供的 MDM 框架。这具有无法规避的局限性。

您可以像 APNS 一样使用 C2DM 来访问设备，但这仍会与客户端应用程序对话。现在已被 GCM 取代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T05:06:04.913

答案是肯定的。Android 确实有与 Apple 的 MDM 相当的功能。

当今市场上有许多[移动设备管理解决方案](http://www.mobiledevicemanagement.io/mobile-device-management-comparison/)可以完成 Apple 的 MDM 所做的一切。

MDM 可以提供有关您提到的所有内容的信息，并且可以做更多事情。它也可以提供有关每个任务和位置的报告。

# javascript - 从加载的 WebView 获取页面标题

> ID：14022623
> 
> 赞同：0
> 
> 时间：2012-12-24T14:33:31.803
> 
> 标签：javascript, iphone, webview, label, self

我正在尝试将 UILabel pageTitle 更改为 UIWebView 上显示的页面标题。我没有返回任何警告或错误，它只是没有改变。

**视图控制器.h**

```
@interface ViewController : UIViewController <UITextFieldDelegate, UIWebViewDelegate, UIActionSheetDelegate> {
    UIWebView *_webView;
    UILabel *_pageTitle;

}

@property (nonatomic, retain) IBOutlet UIWebView *webView;
@property (nonatomic, retain) IBOutlet UILabel *pageTitle;

@end 
```

**视图控制器.m**

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

    self.pageTitle.text = [_webView stringByEvaluatingJavaScriptFromString:@"document.title"];
    [_webView setDelegate:self];

} 
```

**IB截图**

![IB截图](../Images/68da5bc7a882c29917422f0726488603.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:35:42.337

您应该`[_webView setDelegate:self];`在`viewdidLoad`/下调用，`loadView`以便它可以调用 UIWebViewDelegate

# image - OpenGL：渲染图像 3D 点云

> ID：14022629
> 
> 赞同：4
> 
> 时间：2012-12-24T14:34:31.973
> 
> 标签：image, opengl, 3d, 2d, point

我有一个带有颜色的（x，y，z）点云，并使用glDrawArray（）在openGL窗口中呈现。现在我有一个相机姿势，我想渲染这个相机姿势中的点，它基本上是在给定相机内部参数（例如焦距等和 [R|t] ）的情况下投影这个相机参考框架中的所有 3D 点。

我想知道是否有一种简单的方法来渲染此图像，而不是编写一个循环所有点并将它们投影到图像平面并给我颜色的代码片段。OpenGL 是否具有某种内置功能来完成这项工作？我想知道的另一件事是是否还有一个函数可以告诉帧中哪些点是可见的，而不是循环遍历所有 N 个 3D 点。有没有类似的东西可以有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:53:26.720

除非您将点分配给诸如[BSP 树](https://en.wikipedia.org/wiki/Binary_space_partitioning)之类的东西，否则您将不得不遍历它们以查看它们是否可见。

但是，通过使用某种空间层次结构，您可以快速确定哪些点**不**可见。例如，如果您将空间划分为 10 x 10 x 10 的单元格网格并将点分配给其中一个单元格，则您可以检查每个单元格的边界框以确定该单元格是否可见。因此，如果您有 100,000 个点，您将有 1,000 个单元格，并且（假设您的点是均匀分布的）您将检查 6 个点（框的角）而不是每个单元格的 100 个点。

您可以快速确定哪些单元格是完全可见或完全不可见的，然后您只需检查那些部分可见的单元格的内容。

通过扩展层次结构，您的顶级单元格包含更多较小的单元格，而不是您可以处理较大点云的点。

您还可以改变单元格的大小，使它们都包含相同数量的点。

# c# - 访问从控制器传递的数据

> ID：14022634
> 
> 赞同：1
> 
> 时间：2012-12-24T14:35:15.703
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我是学习 asp.net MVC 的新手，我试图从我认为的控制器访问一些数据。这是我的代码：

```
public ActionResult Index(string subcategory)
{
    List<Object> products = db.ListOfProducts(subcategory);

    return View(products);
} 
```

我知道在将 LIST 传递到 VIEW 之后，应该有某种方法可以访问 VIEW 中的数据，但我似乎无法弄清楚如何。通常，当我基于模型创建视图时，我知道通过使用模型对象可以访问我需要的数据，但通常顶部有一个关于模型的定义，在我的情况下没有。

那么如何在我的视图中访问 LISTS 数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:44:32.140

将此添加到视图顶部以定义模型类型：

```
@model List<Object> 
```

您可能需要将其命名为：

```
@using Systems.Collections.Generic;
@model List<Object> 
```

或者

```
@model Systems.Collections.Generic.List<Object> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:44:57.677

是的，只需通过添加到您的视图来创建一个强类型视图

```
 @model IList<Products> 
```

之后你可以像这样迭代你的模型：

```
@foreach(var prod in Model)
{
   //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:46:17.697

您的 Views 文件夹中应该有一个名为 Index 的对应视图（在与您的控制器名称匹配的子文件夹中 - 因此，如果您的控制器被调用`HomeController`，您将需要视图文件夹下的“主”文件夹）如果您还没有您可以通过右键单击文件夹并单击“添加视图”来创建视图。

确保您在视图顶部有一个声明，内容如下：

```
@model Systems.Collections.Generic.List<object> 
```

您现在应该能够通过`Model`视图的属性访问您的数据。

# visual-studio - 在 TFS 中向 WIT 添加的字段未显示在现有工作项中

> ID：14022635
> 
> 赞同：0
> 
> 时间：2012-12-24T14:35:34.890
> 
> 标签：visual-studio, templates, tfs, customization, workitem

我们计划使用 TFS 2012，但是，我们的流程不是 100% 定义的，因此工作项及其属性会发生变化。我开始使用 Bug 工作项类型进行测试，并创建了一个 Bug 项。然后我导出 bug 模板，添加一个名为“support ticket id”的字段，然后将工作项类型重新导入 TFS。我创建的新错误项按预期显示此新字段，但现有错误项未显示此字段。我是否也必须执行一些特殊的操作来更新现有项目？我在 VS2012 中做了所有事情，而不是从命令行。

谢谢，

维姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:14:55.147

实际上，在项目级别刷新是我需要做的所有事情。由于某种原因无法从服务器重新连接，然后在项目级别进行刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T02:49:25.683

您可能需要清除客户端缓存。我原以为刷新按钮会这样做，但明天会确认。

您可以在此处找到 Team Explorer 版本的缓存：

`%LOCALAPPDATA%\Microsoft\Team Foundation\<version>\Cache`

# ios - iPad导航栏自定义高度

> ID：14022638
> 
> 赞同：4
> 
> 时间：2012-12-24T14:35:49.860
> 
> 标签：ios, ipad, height, uinavigationbar

我正在为有视力障碍的人创建一个应用程序，所以我需要在屏幕上有更大的控件。有没有办法让导航栏更高，导航按钮更大？

我已经看到这个问题被问了几次，没有明确的答案。Apple 的[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)声明“不要以编程方式指定导航栏的高度”，因此我认为它不被支持也不推荐。除了从头开始设计之外，还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:37:17.133

有时我需要让导航栏出现故障。

我正在隐藏栏，我正在使用一个看起来像本机栏的组件，它可以具有自定义高度！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:43:23.717

我不完全确定如何去做，但我建议继承 UINavigationBar。请查看[此问题](https://stackoverflow.com/questions/2133257/iphone-how-set-uinavigationbar-height)的答案以获得一些想法。

它适用于 iPhone，但也适用于 iPad。

# javascript - 鸡蛋计时器Javascript

> ID：14022640
> 
> 赞同：1
> 
> 时间：2012-12-24T14:35:52.417
> 
> 标签：javascript

我正在寻找创建一个鸡蛋计时器应用程序，用户通过各种表单选择标签传入值。通过这样做，他们设置了计时器，当我尝试这样做时，我得到一个 NaN 错误。在下文中，我有我目前正在使用的 javascript 和一些 HTML，但不是全部。

```
<html>
<head>
<script language = "javascript" type = "text/javascript">

var minutes

var miuntes=setInterval(timer, 1000); //1000 will  run it every 1 second

function timer(m)
{
  minutes = m;
  minutes=minutes-1;
  if (minutes <= 0)
  {
     clearInterval(minutes);
     //counter ended, do something here
     return;
  }

 document.getElementById("txt").innerHTML=minutes + "minutes"; // watch for spelling
}

function checktimer()
{

var checkbox1 = form.preference.value;
var checkbox2 = form.eggsize.value;
var checkbox3 = form.suacepansize.value;

if(checkbox1 == 1 && checkbox2 == 1 && checkbox3 == 1)
{
m = 3;
s = 0;
}

timer(m);
}

</script>

</head>
<body>
<div id = "txt"> </div>

    <form id="form" onclick ="checktimer()">

    <div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 1 </h2></div>
    <div class="question-text"><h6>How do you like your egg? </h6> </div>
    <select id="prefernce" name ="preference">
  <option value="1">Soft</option>
  <option value="2">Medium</option>
  <option value="3">Hard</option>
</select>

    </div> <!--Ends the question div-->

<div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 2 </h2></div>
    <div class="question-text"><h6>What size is your egg? </h6> </div>
    <select id="eggsize" name = "eggsize">
  <option value="1">Small</option>
  <option value="2">Medium</option>
  <option value="3">Large</option>
</select>

    </div> <!--Ends the question div-->

    <div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 3 </h2></div>
    <div class="question-text"><h6>What size is the saucepan? </h6> </div>
    <select id="saucepansize" name = "suacepansize">
  <option value="1">Small</option>
  <option value="2">Medium</option>
  <option value="3">Large</option>
</select>

    </div> <!--Ends the question div-->

        <div class = "question">
            <input type="submit" id="button" name="submit" value = "Go" onclick="checktimer()"/> <br/> 
        </div>

    </form>

    </div>  <!--Ends the main form div-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:01:26.210

我做了一些改变。

1.  我将`onclick`事件移动到一个`onsubmit`事件，并从函数返回 false 以阻止表单提交。
2.  因为间隔在页面加载时运行，所以它会立即自行清除 - 所以我从 onsubmit 处理程序开始间隔
3.  我重命名了间隔变量以避免两个称为“分钟”的变量（尽管一个拼写错误）
4.  我已经省略了`m`参数，因为您有全局分钟变量

注意：目前，它以每秒一分钟的速度倒计时 - 您需要将分钟数乘以 60 并以秒为单位倒计时，或者每分钟仅触发一次间隔。

完整调整后的脚本是：

```
<html>
<head>
<script type="text/javascript">
var minutes = 0;
var interval;

function timer() {
  minutes = minutes - 1;

  document.getElementById("txt").innerHTML= minutes + " minutes"; // watch for spelling

  if (minutes <= 0) {
     //counter ended, do something here
     window.clearInterval(interval);
     return;
  }
}

function checktimer() {
    var checkbox1 = form.preference.value;
    var checkbox2 = form.eggsize.value;
    var checkbox3 = form.suacepansize.value;

    if(checkbox1 == 1 && checkbox2 == 1 && checkbox3 == 1) {
        minutes = 3;
        s = 0;
    }

    interval = setInterval(timer, 1000);

    return false;
}

</script>

</head>
<body>
<div id = "txt"> </div>

    <form id="form" onsubmit="return checktimer()">

    <div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 1 </h2></div>
    <div class="question-text"><h6>How do you like your egg? </h6> </div>
    <select id="prefernce" name ="preference">
  <option value="1">Soft</option>
  <option value="2">Medium</option>
  <option value="3">Hard</option>
</select>

    </div> <!--Ends the question div-->

<div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 2 </h2></div>
    <div class="question-text"><h6>What size is your egg? </h6> </div>
    <select id="eggsize" name = "eggsize">
  <option value="1">Small</option>
  <option value="2">Medium</option>
  <option value="3">Large</option>
</select>

    </div> <!--Ends the question div-->

    <div class = "question">
    <div class="circle"> <h2 class = "whiteh2"> 3 </h2></div>
    <div class="question-text"><h6>What size is the saucepan? </h6> </div>
    <select id="saucepansize" name = "suacepansize">
  <option value="1">Small</option>
  <option value="2">Medium</option>
  <option value="3">Large</option>
</select>

    </div> <!--Ends the question div-->

        <div class = "question">
            <input type="submit" id="button" name="submit" value = "Go"/> <br/> 
        </div>

    </form>

    </div>  <!--Ends the main form div-->

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:49:05.873

```
var miuntes = setInterval(timer, 1000); 
```

您没有`timer`使用任何参数设置函数，这使得它所采用的变量`m`具有 value `undefined`。当`undefined`用于数字算术时，它会返回`NaN`从而解释您的问题。要为函数设置参数，请将`timer`调用包装在函数表达式中：

```
var miuntes = setInterval(function() {
    timer( ... );
}, 1000); 
```

替换`...`为您希望函数采用的数字`timer`。

您在该变量声明中也拼错了*分钟。*而且您还缺少结束`</script>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:50:47.410

改变

```
var miuntes=setInterval(timer, 1000); 
```

到

```
var minutes=setInterval(timer, 1000); 
```

并尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:06:53.600

这是其他答案完整性的倒计时

```
function countDown(m, el, callback) {
    var count = m * 60 * 1000;
    var d = new Date(0, 0, 0, 0, 0, 0);
    d.setTime(count);

    function down(t) {
        if (count > 0) {
            count -= 1000;
            d.setTime(count);
            document.getElementById(el).innerHTML = (d.getHours() - 1) + ":" + d.getMinutes() + ":" + d.getSeconds();
        } else {
            clearInterval(inter);
            callback();
        }
    }

    var inter = setInterval(down, 1000);
}

countDown(1, "Time", function () { // 1\. the minutes , 2\. the element which will be updated , 3\. a callback function when the timer finished
    alert("Timer Ended");
}); 
```

这是一个[JSBin](http://jsbin.com/ohiyaw/1/edit)

所以总而言之

```
<head>
    <script language="javascript" type="text/javascript">
        function timer(m, el, callback) {
            var count = m * 60 * 1000;
            var d = new Date(0, 0, 0, 0, 0, 0);
            d.setTime(count);

            function down(t) {
                if (count > 0) {
                    count -= 1000;
                    d.setTime(count);
                    document.getElementById(el).innerHTML = (d.getHours() - 1) + ":" + d.getMinutes() + ":" + d.getSeconds();
                } else {
                    clearInterval(inter);
                    callback();
                }
            }

            var inter = setInterval(down, 1000);
        }

        function checktimer() {

            var checkbox1 = form.preference.value;
            var checkbox2 = form.eggsize.value;
            var checkbox3 = form.suacepansize.value;

            if (checkbox1 == 1 && checkbox2 == 1 && checkbox3 == 1) {
                m = 3;
                s = 0;
            }

            timer(m, "txt", function () {
                alert("Egg finished")
            });

        }
    </script>
</head>

<body>
    <div id="txt"></div>
    <form id="form" onclick="checktimer()">
        <div class="question">
            <div class="circle">
                 <h2 class="whiteh2"> 1 </h2>
            </div>
            <div class="question-text">
                <h6>How do you like your egg? </h6> 
            </div>
            <select id="prefernce" name="preference">
                <option value="1">Soft</option>
                <option value="2">Medium</option>
                <option value="3">Hard</option>
            </select>
        </div>
        <!--Ends the question div-->
        <div class="question">
            <div class="circle">
                 <h2 class="whiteh2"> 2 </h2>
            </div>
            <div class="question-text">
                <h6>What size is your egg? </h6> 
            </div>
            <select id="eggsize" name="eggsize">
                <option value="1">Small</option>
                <option value="2">Medium</option>
                <option value="3">Large</option>
            </select>
        </div>
        <!--Ends the question div-->
        <div class="question">
            <div class="circle">
                 <h2 class="whiteh2"> 3 </h2>
            </div>
            <div class="question-text">
                <h6>What size is the saucepan? </h6> 
            </div>
            <select id="saucepansize" name="suacepansize">
                <option value="1">Small</option>
                <option value="2">Medium</option>
                <option value="3">Large</option>
            </select>
        </div>
        <!--Ends the question div-->
        <div class="question">
            <input type="button" id="button" name="submit" value="Go" onclick="checktimer()"
            />
            <br/>
        </div>
    </form>
    </div>
    <!--Ends the main form div-->
</body> 
```

​​​​​</p>

这是另一个[JSBin](http://jsbin.com/ekoton/1/edit)

我将格式*（例如计时器的 2 个数字填充）*和准备好鸡蛋的时间留给你

# html - 如何在不使用 !important 的情况下自定义 twitter bootstrap 的各种输入大小？

> ID：14022644
> 
> 赞同：31
> 
> 时间：2012-12-24T14:36:44.887
> 
> 标签：html, css, forms, twitter-bootstrap

Bootstrap 的输入大小仅按宽度扩展，而按钮按高度和字体大小扩展。（见图）我正在尝试自定义输入以按高度和字体大小扩展。（注意：他们正在为下一个版本修复这个问题，但我迫不及待地等待）

![在此处输入图像描述](../Images/fb7e6d05bcad0f14b0dd02605768ed28.png)

到目前为止，我只能通过使用`!important`hack 覆盖输入 css 来实现这一点。我想`!important`不惜一切代价避免使用，因为这是一种糟糕的做法。

目前，这是我用于扩展`.input-large`. 当我删除它时它不起作用`!important`。我认为这是因为输入的优先级高于类（我觉得这绝对是愚蠢的，但如果我错了，请纠正我）。

```
.input-large {
width: 210px;
height: 44px !important;
margin-bottom: 10px !important;
line-height: 30px !important;
padding: 11px 19px !important;
font-size: 17.5px !important;
} 
```

有什么方法可以在**不删除默认输入样式**且不**声明`!important`**的情况下实现这一点？

这是一个小提琴：http: [//jsfiddle.net/xryQK/](http://jsfiddle.net/xryQK/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-24T14:38:41.177

除了使用`!important`，您可以使用*[属性选择器](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors)*来覆盖默认值，因为它比简单地使用`class`. 不擅长特异性概念？参考[这篇](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)文章。

为了计算您的选择器的特异性，您可以使用[这个](http://specificity.keegan.st/)网站。

^([1])使用`class[attr=class]`

```
.input-large[class="input-large"] {
    width: 400px;
} 
```

或者

^([2])使用`tag[attr=class]`

```
input[class="input-large"] {
    width: 400px;
} 
```

如果你在正确的地方使用它，使用`!important`它并不是一种糟糕的做法。

* * *

请注意，上面的选择器，^([1])将使**所有元素** `width`都`400px`具有`class`of`input-large`并且在选择器^([2])的情况下，它将设置`width`为具有of`400px`的**所有`input`**元素，因此如果需要，您可以调用*多个类*，即在标签上并使用下面的选择器..`class``input-large`*`.class.class``input`*

 *```
.input-large.input-large-altered {
    width: 400px;
} 
```

因此，这将选择设置了这两个类的**任何**元素，如果您想要更具体，并且只想设置`input type="text"`比您总是可以编写更具体的选择器，例如

```
input[type="text"].input-large.input-large-altered {
   width: 400px;
} 
```

所以上面的将**只**针对其属性持有的元素`input`并且**同时**具有两个类，即`type``value``text` **`.input-large` `.input-large-altered`**

 **[**演示**](http://jsfiddle.net/xryQK/1/)

[**演示 2**](http://jsfiddle.net/xryQK/2/)

[**演示 3**](http://jsfiddle.net/xryQK/557/)（多类）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T14:44:53.480

AFAIK，您只需将自己的自定义 CSS 放在引导程序之后

例子：

```
... Some codes here ...

<link type="text/css" rel="stylesheet" href="bootstrap.css">
<style>
.input-large {
    width: 210px;
    height: 44px;
    margin-bottom: 10px;
    line-height: 30px;
    padding: 11px 19px;
    font-size: 17.5px;
}
</style>

... another code ... 
```

抱歉，我忘了删除不需要`!important` 的`!important`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T08:18:03.647

如果您正在使用引导程序 .less 文件

一个简单的解决方案是添加一个额外的条目，例如：

```
.form-fatter {
  // Set font for forms
  label,
  input,
  button,
  select,
  textarea {
    // Increase the default with 20%
    #font > .shorthand(@baseFontSize*1.2,normal,@baseLineHeight*1.2); 
  }
} 
```

在你的 html

```
<form class="form-horizontal form-fatter">
...
</form> 
```***

# c++ - 如何使“自己的”C++ 字符串类在绑定中自动转换为 python 字符串

> ID：14022647
> 
> 赞同：3
> 
> 时间：2012-12-24T14:37:11.827
> 
> 标签：c++, python, boost, boost-python

C++ 代码

```
class MyOwnString; // assume this implements a string class.

class HasMyOwnString // simple example that uses it
{
 private:
MyOwnString m_name;
int m_age;

  public:
HasMyOwnString( MyOwnString const& name, int age ) :
  m_name( name ), m_age( age )
{
}

MyOwnString name() const
{
    return m_name;
}

int age() const
{
    return m_age;
}
};

class HasStdString
{
   private:
std::string m_name;
int m_age;

   public:
HasStdString( std::string const& name, int age ) :
  m_name( name ), m_age( age )
{
}

std::string name() const
{
    return m_name;
}

int age() const
{
    return m_age;
}
};

BOOST_PYTHON_MODULE(test_cpp)
{
using namespace boost::python;
using boost::noncopyable;

class_<HasMyOwnString>( "HasMyOwnString", init<MyOwnString, int>() )
    .def( "name", &HasMyOwnString::name )
    .def( "age", &HasMyOwnString::age );

class_<HasStdString>( "HasStdString", init<std::string, int>() )
    .def( "name", &HasStdString::name )
    .def( "age", &HasStdString::age );
} 
```

假设已包含所有相关标题。以上内容确实构建到了 python .pyd 中。

现在这是我想要使用的 Python：

```
myStdStringTest = test_cpp.HasStdString( "UsesStdString", 1 )
name = myStdStringTest.name()
age = myStdStringTest.age()

print( name, age, type(name) )

myOwnStringTest = test_cpp.HasMyOwnString( "UsesOwnString", 2 )

name = myOwnStringTest.name()
age = myOwnStringTest.age()

print( name, age, type(name) ) 
```

Python 工作的第一部分，即HasStdString。它知道如何自动将 Python str 输入转换为 std::string 以使绑定起作用。

第二部分未能预期 MyOwnString。

1.  MyOwnString 有一个来自 const char * 的隐式构造函数
2.  我尝试了各种方法，加入了一些 boost 的重载，但找不到任何有效的方法。

我搜索了 boost 的代码，看看它们是如何让 str 自动转换为 std::string 的。operator.hpp 中的宏没有任何意义。builtin_converters.hpp 中的宏确实有意义，但它们似乎以其他方式进行所有转换（除了它们在我的 1.50.0 版本中存在编译器错误）并且没有解决问题。

本质上，我试图向 Python 公开的 API 有自己的字符串类。好吧，它已经够糟糕了，我无法改变它。但我希望 Python 用户不会注意到这一点，并且我希望等效的 Python API 在 C++ 代码中使用“自定义”字符串的任何地方都使用 Python 字符串。我想在一个地方定义转换，然后让它在我绑定函数的任何地方工作。

（为了那些想要 MyOwnString 实现的人，我在这里做了我自己的）

```
class MyOwnString
{
public:
    MyOwnString() 
      : m_internal()
    {
        init();
    }

    MyOwnString( const char * val ) 
        : m_internal()
    {
        init();
        assign( val, strlen( val ) );
    }

    MyOwnString( MyOwnString const& other )
        : m_internal()
    {
        init();
        assign( other.c_str(), other.m_len );
    }

    MyOwnString( const char * val, size_t len )
        : m_internal()
    {
        init();
        assign( val, len );
    }

    ~MyOwnString()
    {
        cleanup();
    }

    const char * c_str() const
    {
        return m_data;
    }

    size_t size() const
    {
        return m_len;
    }

    bool empty() const
    {
        return m_len == 0;
    }

    void clear()
    {
        cleanup();
        m_internal[0] = '\0';
    }

    MyOwnString & operator=( MyOwnString const& other )
    {
        assign( other.c_str(), other.m_len );
        return *this;
    }

    MyOwnString & operator=( const char * val )
    {
        assign( val, strlen(val) );
        return *this;
    }

private:

    void init()
    {
        m_data = m_internal;
        m_capacity = 0;
        m_len = 0;
    }

    void cleanup()
    {
        if( m_data != m_internal )
        {
            delete [] m_data;
            m_capacity = 0;
            m_data = m_internal;
        }
    }

    void assign( const char * text, size_t len ) // length not including null
    {
        if( len < EInternalSize ) // it fits into internal buffer
        {
            memcpy( m_internal, text, len );
            m_internal[len]='\0';
            cleanup(); // if we have dynamically allocated data remove it
            m_len = len;
        }
        else if( m_capacity > len ) // fits into already assigned buffer
        {
            memcpy( m_data, text, len );
            m_internal[len]='\0';
            m_len = len;
        }
        else
        {
            // We need to allocate. Do that before we delete any existing buffer

            char * buf = new char[ len + 1 ];
            memcpy( buf, text, len );
            buf[len] = '\0';

            cleanup(); // if there was a buffer there remove it
            m_data = buf;
            m_capacity = len + 1;
            m_len = len;
        }
    }

    enum { EInternalSize = 16 };
    size_t m_len;
    size_t m_capacity;
    char m_internal[EInternalSize];
    char * m_data;
}; 
```

总结一下这个问题：

我需要在我的绑定中添加什么以允许 HasMyOwnString 的绑定按原样工作，同时提供的 Python 也可以工作......

（我不介意更改 HasMyOwnString 中的 init 部分，我希望任何其他不需要我提供参数类型的函数都可以工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:47:18.930

答案在[Boost.Python 的常见问题解答](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/v2/faq.html#custom_string)中得到了解答。

您需要实现和注册合适`custom_string_to_python_str`的和`custom_string_from_python_str`功能。

# symfony - 表单验证失败

> ID：14022648
> 
> 赞同：0
> 
> 时间：2012-12-24T14:37:14.563
> 
> 标签：symfony, symfony-forms

Symfony 2，以下代码：

```
namespace frontend\mainBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Validator\Constraints\Email;
use Symfony\Component\Validator\Constraints\Length;
use Symfony\Component\Validator\Constraints\Collection;

class ContactForm extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('subject', 'text');
        $builder->add('email', 'email');
        $builder->add('message', 'textarea');
    }

    public function getName()
    {
        return 'contact';
    }
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $collectionConstraint = new Collection(array(
            'name' => new Length(array("min" => 5)),
            'email' => new Email(
                array('message' => 'Invalid email address')
            ),
            'message' => new Length(array("min" => 5))
        ));

        $resolver->setDefaults(array(
            'constraints' => $collectionConstraint
        ));
    }
} 
```

DefaultController.php

```
 public function contactAction(Request $request)
{

  $form = $this->createForm(new ContactForm());  
if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

    if ($form->isValid()) {
        // perform some action, such as saving the task to the database
    break;
        //return $this->redirect($this->generateUrl('task_success'));
    }
}
return $this->render('frontendmainBundle:Default:contact.html.php', array(
    'form' => $form->createView()
));
} 
```

联系人.html.php

```
<form action="contact" method="post" <?php echo $view['form']->enctype($form) ?> >
    <?php echo $view['form']->widget($form) ?>

    <input type="submit" />
</form> 
```

当我提交带有主题、电子邮件和消息（'test'、'test@test.com'、'message text'）的表单时，出现以下错误。

缺少此字段。主题 此字段不是预期的。（我猜是邮箱）

我的代码中确实有一条错误消息（'无效的电子邮件地址'）这也不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:54:02.193

在`setDefaultOptions`您有**名称**而不是**主题的约束**

# html - 使用 html 交互流式传输音频

> ID：14022653
> 
> 赞同：1
> 
> 时间：2012-12-24T14:37:51.857
> 
> 标签：html, audio-streaming

最终我需要有这样的东西[，](http://www.earbits.com/play#station/editor-s-picks-editors-eclectic-mix)一个流媒体音频，但是当一首歌改变时，它也会改变照片和文字。

为了播放 mp3 文件，我查看了几个示例，例如：

[http://tympanus.net/codrops/2010/07/26/music-portfolio-template/](http://tympanus.net/codrops/2010/07/26/music-portfolio-template/)

[http://mediaelementjs.com/](http://mediaelementjs.com/)

现在我也找到了这个类：

[http://navarr.me/ytaudio/](http://navarr.me/ytaudio/)

播放来自 youtube url 的音频。

实际上，我更喜欢从 youtube 下载所有 mp3，以避免在我自己的服务器上加载所有 mp3。但总体目标就像是播放歌曲并控制与歌曲一起播放的图像和文本。我通常在我的问题中发布代码，所以我不知道从哪里开始，我不是要求为我完成代码，只是需要一个关于如何解决这个问题的想法。

谢谢

附言。希望这不是错误的发布..：S

# java - 读取道具文件条目的正则表达式未正确捕获组

> ID：14022662
> 
> 赞同：0
> 
> 时间：2012-12-24T14:39:26.900
> 
> 标签：java, regex

我必须解析具有键值对的属性文件，并且某些行可能会被注释（！或 # ，两者都是有效的）。

例：

```
key1 val1
Key2 val2
#key3 val3
 # key4 val4
# It does not have = symbol
# Spaces can be any where.
... 
```

如果没有注释行，则将键和值读取为匹配器的组值。我使用了以下 RegEx 和代码片段，但它没有按预期捕获键和值：

```
 String inputs[] = {
            "key1 val1",
            "Key2 val2",
            "#key3 val3",
            " # key4 val4"              
    };

    Pattern PATTERN = Pattern.compile("^(\\s*[^#!]\\s*)(\\w*)\\s+(\\w*).*$");
    for (int i = 0; i < inputs.length; i++) {

        System.out.println("Input: " + inputs[i]);
        Matcher matcher = PATTERN.matcher(inputs[i]);
        if(matcher.matches()) {
            int groupCount = matcher.groupCount();
            if(groupCount > 0) {
                for (int j = 1; j <= groupCount; j++) {
                    System.out.println(j + " " +  matcher.group(j));
                }
            } else {
                System.out.println(matcher.group());
            }

        } else {
            System.out.println("No match found.");
        }
        System.out.println("");
    } 
```

这是输出：

```
Input: key1 val1
1 k
2 ey1
3 val1

Input: Key2 val2
1 K
2 ey2
3 val2

Input: #key3 val3
No match found.

Input:  # key4 val4
No match found. 
```

我的想法是：

```
^           - Start of line
(\\s*[^#!]\\s*) - space(s) followed by NO # or ! followed by space(s) 
(\\w*)      - Key
\\s+        - spaces(s)
(\\w*)      - Value
.*          - Anything
$           - End of line 
```

请帮助我了解这里出了什么问题。为什么它将键的第一个字符作为一个组捕获？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:43:16.087

您不必检查是否有 # 或 !。你可以简单地做：`/^(?<key>\w+)\s*(?<value>.*)/gm`

Javafied 正则表达式：（`^(?<key>\\w+)\\s*(?<value>.*)`使用多行选项）

演示+说明：[http ://regex101.com/r/aM0xK1](http://regex101.com/r/aM0xK1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:49:49.320

我不会给你解决方案，但我会给你问题的答案：

`(\\s*[^#!]\\s*)`<- 这就是为什么要捕获第一个字符。你有两个选择：

1.  使用非捕获组`(?:Hi, im a non capturing group)`（参见`(?: )`）

    Ps：使用非捕获组会增加正则表达式的内部指针，所以这不是你想要的。所以最好使用第二个选项。

2.  使用lookbehind并观察X之前的字符是否是`#!`

作为第三种解决方案，使用 Java 属性文件[和这个漂亮的例子。](http://www.mkyong.com/java/java-properties-file-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:51:26.280

```
Input: key1 val1
1 k
2 ey1
3 val1 
```

根据您的正则表达式，这是正确的。

```
(\\s*[^#!]\\s*) this is the group1\. 
```

这意味着，匹配单个字符，而不是#，而不是！。字符前后可能有空格。所以对于你的道具文件的第一行。“k”是字符。

您可能要检查负面的外观。它是零宽度断言。

例如像这样：（第 2 组将是关键）

```
^\s*(?!<#|!)\s*(\w*)..... 
```

希望能帮助到你...

# ajax - primefaces 模板 ajax 状态

> ID：14022664
> 
> 赞同：2
> 
> 时间：2012-12-24T14:39:54.433
> 
> 标签：ajax, templates, jsf, primefaces, facelets

如何制作包含 ajax 状态以供全球使用的 primefaces 模板。

到目前为止，这就是我所做的。

模板/default.xhtml（Facelets 模板）

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="./../resources/css/default.css" rel="stylesheet" type="text/css" />
    <link href="./../resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
    <title>Facelets Template</title>
</h:head>

<h:body>

    <div id="top">
        <ui:insert name="top">
            <!--modal ajax status here-->
            <p:ajaxStatus onstart="statusDialog.show();" oncomplete="statusDialog.hide();"/>  

            <p:dialog modal="true" widgetVar="statusDialog" header="Loading"   
                      draggable="false" closable="false">  
                <p:graphicImage value="../resources/images/ajax-loader-square.gif" />  
            </p:dialog>
            <!--modal ajax status end-->
        </ui:insert>
    </div>

    <div id="content" class="center_content">
        <ui:insert name="content">Content</ui:insert>
    </div>

    <div id="bottom">
        <ui:insert name="bottom">Bottom</ui:insert>
    </div>

</h:body> 
```

login.xhtml（Facelets 模板客户端）

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html">

    <body>

        <ui:composition template="./../../template/default.xhtml">

            <ui:define name="top">
                top
            </ui:define>

            <ui:define name="content">
                <h:form id="form1"> 

                    <p:focus context="form1"/> 

                    <table style="width: 200px; border: solid;">
                        <tbody>
                            <!--output msg here-->
                            <tr>
                                <td>
                                    <p:messages />
                                </td>
                            </tr>
                            <!--output msg end-->

                            <!--input here-->
                            <tr>
                                <td>
                                    <p:outputLabel for="txtUname" value="Username:" />
                                    <p:inputText id="txtUname" value="#{loginController.username}" size="20" required="true" requiredMessage="Username is required!" maxlength="45"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p:outputLabel for="txtPass" value="Password:" />
                                    <p:password id="txtPass" value="#{loginController.password}" size="20" required="true" requiredMessage="Password is required!"/>
                                </td>
                            </tr>
                            <!--input end-->

                            <tr>
                                <th>
                                    <!--ajax submit-->
                                    <p:commandButton value="Login" update="form1" actionListener="#{loginController.validateAccount()}"/>
                                </th>
                            </tr>
                        </tbody>
                    </table>
                </h:form> 
            </ui:define>

            <ui:define name="bottom">
                bottom
            </ui:define>

        </ui:composition>

    </body>
</html> 
```

登录控制器.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controllers;

import java.io.IOException;
import java.util.List;
import javax.faces.FacesException;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;
import util.NewHibernateUtil;

/**
 *
 * @author burhan
 */
@ManagedBean
@RequestScoped
public class LoginController {

    private String username;
    private String password;

    /**
     * Creates a new instance of LoginController
     */
    public LoginController() {
    }

    private String redirect(String targetPage) {

        FacesContext ctx = FacesContext.getCurrentInstance();

        ExternalContext extContext = ctx.getExternalContext();
        String url = extContext.encodeActionURL(ctx.getApplication().getViewHandler().getActionURL(ctx, targetPage));

        try {

            extContext.redirect(url);
        } catch (IOException ioe) {
            throw new FacesException(ioe);

        }
        return null;

    }

    public void validateAccount() {
        if (!validateAccount(username, password)) {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Invalid username or password!", "WARNING"));
            username = "";
            password = "";
            return;
        }

        redirect("/views/home.xhtml");

    }

    public boolean validateAccount(String username, String password) {
        Session session = NewHibernateUtil.getSessionFactory().getCurrentSession();
        Transaction tx = session.beginTransaction();

        Query q = session.createQuery(""
                + "SELECT COUNT(entity) "
                + "FROM "
                + "UserCatalog entity "
                + "WHERE "
                + "entity.username = :uname "
                + "AND "
                + "entity.password = MD5(:pass) "
                + "AND "
                + "entity.active = TRUE "
                + "");
        q.setParameter("uname", username);
        q.setParameter("pass", password);

        List list = q.list();

        tx.commit();

        if (Integer.parseInt(list.get(0).toString()) == 0) {
            return false;
        }

        return true;
    }

    /**
     * @return the password
     */
    public String getPassword() {
        return password;
    }

    /**
     * @param password the password to set
     */
    public void setPassword(String password) {
        this.password = password;
    }

    /**
     * @return the username
     */
    public String getUsername() {
        return username;
    }

    /**
     * @param username the username to set
     */
    public void setUsername(String username) {
        this.username = username;
    }
} 
```

但是ajax状态似乎没有出现。

注意：所有方法都正常工作，显示目标页面至少需要 2 秒。当我单击命令按钮时，我可以在我的 google chrome 浏览器选项卡上看到加载圈。但不是ajax状态。它仅在我将 ajax 状态标记放置到每个页面时才有效（即使没有 global="true" 属性），但它会破坏模板的目的，并且我有很多带有命令按钮的 xhtml 页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T22:53:41.910

只要模板子级没有为此声明任何内容，`<ui:insert>`模板主控中的任何内容都会成为*默认*`<ui:define>`内容。`<ui:insert>`如果您打算将 ajax 状态内容放在*每个*模板子级上，您需要将其放在外部，也包括那些`<ui:define>`声明为`top`.

```
<!--modal ajax status here-->
<p:ajaxStatus onstart="statusDialog.show();" oncomplete="statusDialog.hide();"/>  

<p:dialog modal="true" widgetVar="statusDialog" header="Loading"   
          draggable="false" closable="false">  
    <p:graphicImage value="../resources/images/ajax-loader-square.gif" />  
</p:dialog>
<!--modal ajax status end-->

<ui:insert name="top">
    Some default top content.
</ui:insert> 
```

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

# vba - 如何将一个单元格格式复制到该单元格旁边的所有单元格？

> ID：14022666
> 
> 赞同：0
> 
> 时间：2012-12-24T14:39:59.190
> 
> 标签：vba, excel, vbscript

你能告诉我如何在第 1 行中复制单元格的颜色、字体和样式吗？但不是单元格的内容。我编写了下面的代码，但它使用第一个单元格数据复制了上面的所有内容，这是我没想到的。

```
 ob3.Range("A1").Copy
    ob3.Range("A1").EntireRow.PasteSpecial(-4163) 'xlValues 
```

请在这里指导！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:42:48.500

尝试以下操作：

```
ob3.Range("A1").Copy 
ob3.Range("A1").EntireRow.PasteSpecial (xlPasteFormats) 
Application.CutCopyMode = False 
```

我在这里看到 Scott 的观点 :) 您可以自行设置数字，也可以使用 a`const`通过工作表使用此格式。

```
Const xlPasteFormats = -4122 
Const xlPasteValues = -4163

ob3.Range("A1").Copy
ob3.Range("A1").EntireRow.PasteSpecial xlPasteFormats 
```

# c# - 自定义网站消息系统教程

> ID：14022667
> 
> 赞同：-1
> 
> 时间：2012-12-24T14:40:20.547
> 
> 标签：c#, asp.net, message

我是一个 asp.net/c# 新手，试图在网站的用户之间创建一个非常基本的消息传递系统。这个想法是建立一个非常基本的消息系统，让管理员可以选择向用户发送消息、删除旧消息、在有未读消息时通知用户等。

我（令人惊讶地）很难找到有关该主题的相关教程，并希望这里的某些内容可以将我引导到正确的位置。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:48:58.183

这是一个使用 ASP.NET Web 表单的聊天应用程序。它很长，但是很透彻，应该可以帮助您入门。

[http://www.codeproject.com/Articles/27384/Build-a-Web-Chat-Application-using-ASP-Net-3-5-LIN](http://www.codeproject.com/Articles/27384/Build-a-Web-Chat-Application-using-ASP-Net-3-5-LIN)

## 更新

私人消息系统非常简单。您需要连接的组件如下所示。

1.  某种类型的持久存储（例如 Microsoft SQL Server）
2.  支持线程的数据库模式（即引用自身以进行回复的表）。这将使创建变得容易，您只需引用另一个`pm`回复即可，因此您将获得自然的线程层次结构。
3.  某种类型的 ORM 来访问数据库，我将推荐[Dapper](http://code.google.com/p/dapper-dot-net/)。这是 Stack Overflow 使用的，坦率地说，它是我用过的最快和最完整的 API ——当我说我**用过很多**时相信我！
4.  某种类型的身份验证系统（例如*[用于 Intranet 的 Windows](http://weblogs.asp.net/scottgu/archive/2006/07/12/Recipe_3A00_-Enabling-Windows-Authentication-within-an-Intranet-ASP.NET-Web-application.aspx)*或*[用于 Internet 的表单](http://www.asp.net/web-forms/videos/authentication/using-basic-forms-authentication-in-aspnet)*）。
5.  用于列出、创建和查看消息的 Web 表单。为了简单起见，只需制作三种不同的 Web 表单。此 Web 表单将利用当前登录的用户来确定要列出的 PM。

# windows - windows git https通过代理服务器克隆无法写入文件

> ID：14022669
> 
> 赞同：1
> 
> 时间：2012-12-24T14:40:34.617
> 
> 标签：windows, https, github, clone, proxy-server

在通过我的公司代理服务器通过 sysinternal 克隆存储库的过程中，我可以看到它尝试编写 git 存储库但失败了。但是，创建了 .git 目录，但大部分是空目录。

`git config --globlal http.proxy ...`我已经用“ ”和“ ”设置了我的代理服务器配置`git config --global https.proxy ...`。
由于我连接到 git（我被提示输入我的帐户/密码），我知道代理设置有效。

从 Sysinternal 我可以看到错误为

```
Query Open C:\Users\myUser\https:\github.com\myGitAccount\source.git\.git  FAST IO DISALLOWED
CreateFile C:\Users\myUser\https:\github.com\myGitAccount\source.git\.git NAME INVALID Denied Access: Read Attributes. Disposition: 
```

Github 验证了 repo 没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:47:28.083

https 访问的 GitHub 存储库的 git 克隆应该是：

```
git clone https://github.com/aUserName/aRepoName.git 
```

如果你想缓存你的 GitHub 凭证，它应该在定义 HOME 的会话中进行，如“ [Git - 如何`.netrc`在 Windows 上使用文件保存用户和密码](https://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password/6031266#6031266)”中所述。

对于代理，另请参阅“[与 github 同步](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)”。

# tags - 根据使用次数更改标签云内标签的背景颜色

> ID：14022670
> 
> 赞同：1
> 
> 时间：2012-12-24T14:40:37.130
> 
> 标签：tags, wordpress

有没有一种方法可以根据标签的使用次数在 wordpress中设置不同`background-color`的标签。`tag cloud`

示例：使用较多的标签会以较深的颜色显示

使用较少的标签将以较浅的颜色显示

我知道`font-size`可以更改为

```
add_filter('widget_tag_cloud_args','set_cloud_tag_size');
    function set_cloud_tag_size($args) {
      $args = array('smallest'    => 14, 'largest'    => 20);
      return $args;
    } 
```

如何实现`background-color`标签的类似行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:13:08.297

[wp_tag_cloud()](http://codex.wordpress.org/Function_Reference/wp_tag_cloud)`TAG CLOUD`是接受字体大小数组的小部件的内置 wordpress 方法。您将需要在您的主题中编写一个自定义方法来处理更改`background-color`而不是`font-size`.

编写此方法应该非常简单，并且与上述方法类似。您很可能会在其中找到代码`wp-includes/widgets.php`。

# php - Windows Azure PDT eclipse PHP 设置

> ID：14022672
> 
> 赞同：1
> 
> 时间：2012-12-24T14:40:41.927
> 
> 标签：php, windows, eclipse, azure

我只是从使用 PHP SDK 的 Windows Azure 开始。[我使用这个链接](http://www.windowsazure4e.org/download/)在 Eclipse 中安装了 Azure 插件。让我的计算和存储模拟器运行起来。现在，当我尝试使用下面显示的选项运行新项目时，什么也没有发生！

![截屏](../Images/81e5a389016a2f81c10f1679946ebe26.png)

当我尝试选择特定脚本并将其作为“PHP Windows Azure Page”运行时，我收到此错误：

> Development Fabric 尚未完全启动

请注意，我更改了 Zend 的端口号，并且我的计算和存储模拟器工作正常。我仍然收到此错误。任何帮助将不胜感激...

# jquery - jqGrid根据文本长度调整列大小

> ID：14022676
> 
> 赞同：2
> 
> 时间：2012-12-24T14:41:11.373
> 
> 标签：jquery, jqgrid

我试图弄清楚如何根据其内容调整网格的列。这仅适用于特定列。到目前为止，我所做的是通过循环遍历行并比较内容的长度来调整 colModel。

如果内容超过了之前已知的长度，它会再次调整 colModel。它看起来像这样。

```
 // Get rowId's and get find the longest content
        $.each(grid.jqGrid('getDataIDs'), function(row, rowid) {
            // Loop through the specified columns
            $.each(abo_fields, function(colid, column) {
                var abo = grid.jqGrid('getCell', rowid, column);
                var new_width = abo.length * 8;
                var current = grid.jqGrid('getColProp', column);
                if(current['width'] < new_width) {
                    grid.jqGrid('setColProp', column, {width:new_width});
                }                    
            });
        }); 
```

colModel 在我请求 getColProp 时进行了调整。当我使用 grid.trigger('reloadGrid'); 该列似乎与原始 colModel 中指定的相同。我也尝试通过 jquery 调整 CSS，但这也没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:09:49.673

所以我在 colModel 选项中做了更多的挖掘，发现了以下内容：

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acolmodel_options)

> 以下是在构建网格时无法动态更改的选项（如果更改，它们将不起作用或将导致网格错误）。对于其中一些选项，有一些方法可用于更改值。

```
name
width
resizable
label (method avail.) 
```

jqGrid wiki 在您真正需要的时候也会说以下内容。请记住，完成此操作后，网格中构建的任何逻辑都将消失。

> 使用当前设置重新加载网格。这意味着如果数据类型是 xml 或 json，则会向服务器发送一个新请求。此方法应应用于已构建的网格。注意这个方法不会改变 HEADER 信息，也就是说 colModel 的任何改变都不会受到影响。您应该使用 gridUnload 重新加载具有不同 colModel 的新配置。仅当 loadonce: false 时才有效！

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

跳这对其他人也有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T08:36:47.060

以下是我如何根据文本内容实现可变列宽 - 将其添加到 gridComplete 事件中：

```
$('#parent').append('<span id="widthTest" />');

                gridName = this.id;

                $('#gbox_' + gridName + ' .ui-jqgrid-htable,#' + gridName).css('width', 'inherit');
                $('#' + gridName).parent().css('width', 'inherit');

                var columnNames = $("#" + gridName).jqGrid('getGridParam', 'colModel');
                var thisWidth;

                // Loop through Cols
                for (var itm = 0, itmCount = columnNames.length; itm < itmCount; itm++) {

                    var curObj = $('[aria-describedby=' + gridName + '_' + columnNames[itm].name + ']');

                    var thisCell = $('#' + gridName + '_' + columnNames[itm].name + ' div');
                    $('#widthTest').html(thisCell.text()).css({
                            'font-family': thisCell.css('font-family'),
                            'font-size': thisCell.css('font-size'),
                            'font-weight': thisCell.css('font-weight')
                        });
                    var maxWidth = Width = $('#widthTest').width() + 24;                    
                    //var maxWidth = 0;                      

                    // Loop through Rows
                    for (var itm2 = 0, itm2Count = curObj.length; itm2 < itm2Count; itm2++) {
                        var thisCell = $(curObj[itm2]);

                        $('#widthTest').html(thisCell.html()).css({
                            'font-family': thisCell.css('font-family'),
                            'font-size': thisCell.css('font-size'),
                            'font-weight': thisCell.css('font-weight')
                        });

                        thisWidth = $('#widthTest').width();
                        if (thisWidth > maxWidth) maxWidth = thisWidth;                        
                    }                    

                    $('#' + gridName + ' .jqgfirstrow td:eq(' + itm + '), #' + gridName + '_' + columnNames[itm].name).width(maxWidth).css('min-width', maxWidth);

                }

                $('#widthTest').remove(); 
```

一个工作示例：

[http://jsfiddle.net/Ba5yK/17/](http://jsfiddle.net/Ba5yK/17/)

我希望有人觉得这很有用。

问候，

保罗

# c# - 有什么工具可以在 .NET 程序执行时查看变量的存储位置？是在栈上还是堆上？

> ID：14022680
> 
> 赞同：25
> 
> 时间：2012-12-24T14:42:01.320
> 
> 标签：c#, .net, vb.net, memory-management

很久以前，我想知道变量（值类型或引用类型）将存储在哪里。它会在堆栈还是堆上？

我也读过[Eric Lippert 的文章](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)。

出于好奇，我想要交叉验证我所理解的内容。任何工具都存在吗？或者我会以任何方式知道，在执行 .NET 程序时，哪些变量会存储在堆栈中？哪个存储在堆上？

谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-24T16:33:06.380

考虑按堆栈和堆划分存储是一种方便的抽象，可以很好地为您服务。但更复杂的是，.NET 程序中有 6 个不同的变量存储位置。

这里选择的工具是调试器，它可以准确地显示变量存储的位置。这确实需要深入了解机器代码的工作原理。使用 Debug + Windows + Disassembly 查看机器码。查看程序的发布版本并更改允许即使在调试代码时也能优化代码的设置也很重要。工具 + 选项，调试，常规，取消勾选“在模块加载时抑制 JIT 优化”选项。您现在将看到机器代码在您的用户机器上执行的方式。

你必须事先知道的事情才能理解这一切：

*   引用类型的对象存储在 GC 堆上。存储引用的变量具有与值类型值相同的存储选择。

*   值类型值或对象引用有六个可能的存储位置：

    *   如果变量是引用类型的成员，它们将存储在 GC 堆中
    *   *如果变量声明为静态*，则它们存储在 AppDomain 的加载器堆中
    **   如果变量是 [ThreadStatic]，它们将存储在线程本地存储中*   如果变量是方法参数或局部变量，它们可以存储在堆栈帧中*   如果变量是方法参数或局部变量，它们可以存储在 CPU 寄存器中*   针对 x86 抖动，可以将 Single 或 Double 类型的变量存储在 FPU 堆栈中。*

 *后三个要点是它变得复杂的地方，以及为什么您需要查看机器代码来找出它们的存储位置。它是高度实现特定的，抖动的*类型很*重要。并且受您是否启用抖动优化器的影响很大。在这里做出正确的选择对性能非常重要。粗略的轮廓（跳过 ARM 抖动）：

*   前两个方法参数存储在 x86 抖动的 CPU 寄存器中，包括实例方法的*this的值。*x64 抖动使用 4 个寄存器。浮点处理器寄存器用于在 x86 上传递 Single 和 Double 类型的变量，在 x64 上传递 XMM 寄存器

*   函数返回值在 CPU 寄存器中返回，如果它适合，则使用 E​​AX 或 RAX 寄存器，如果它是浮点值，则返回 ST0。如果它不适合，则调用者在堆栈帧上为该值保留空间并传递一个指向它的指针

*   抖动优化器寻找机会将局部变量存储在 CPU 寄存器中。如果由于寄存器用完而被迫这样做，它可能会将寄存器溢出回堆栈帧。

这些实现细节有许多可观察到的副作用：

*   获取存储在 cpu 寄存器中的局部变量会使代码难以调试。调试器对存储位置的了解不够。这是 Debug 构建存在的主要原因，它抑制了优化，因此您可以轻松检查局部变量，调试器确实知道用于变量的堆栈帧槽
*   您无法检查方法的返回值，这给调试带来了极大的不便。调试器对抖动选择的存储位置知之甚少，无法可靠地找到该值。编辑：在 VS2013 中修复
*   由于变量被优化以存储在 cpu 寄存器中，因此您可能难以调试线程问题。在循环或 if() 语句中测试值会产生寄存器中值的副本，而不是存储在内存中的值。特别是 x86 抖动问题和*volatile*关键字的原因，该关键字抑制了这种优化
*   您可以初始化指向局部变量的指针，而无需固定它。与存储在 GC 堆中的变量可能会被垃圾收集移动并因此需要固定不同，局部变量具有固定的存储地址，该地址在整个方法体中都有效
*   为堆栈帧分配的空间量由抖动决定。然而，可以自己分配一个块，C# *stackalloc*关键字支持它。这是您可以直接分配的最快内存
*   Having floating point values stored in an FPU register causes floating point accuracy problems. While it is stored in the FPU, a value is stored with 80 bit precision. But when it is spilled to memory, it is truncated to 32 or 64 bit precision. The unpredictability of when this spill occurs (plus the different strategy of the x64 jitter) produces floating point results that can be different with small changes producing large differences in the calculation result if the calculation loses a lot of significant digits.*

# c# - NancyFx 如何访问底层 tcp 连接

> ID：14022682
> 
> 赞同：0
> 
> 时间：2012-12-24T14:42:05.507
> 
> 标签：c#, http, nancy

我正在破解 NancyFx 框架并尝试实现面向连接的 NTLM 身份验证，如此处[所述](http://davenport.sourceforge.net/ntlm.html#appendixB)：

> NTLM 是面向连接的，而不是面向请求的。因此，对“/index.html”的第二次请求不会携带任何身份验证信息，服务器将不会请求任何身份验证信息。如果服务器检测到与客户端的连接已断开，则对“/index.html”的请求将导致服务器重新启动 NTLM 握手。

这意味着我需要跟踪这个特定的连接是否已经过身份验证。但现在我看不到任何机制如何从`NancyModule`实例访问这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:58:38.447

你不能 - Nancy 托管不可知论者，并且能够在没有任何网络的情况下运行，所以这是不可能的。它也不能很好地与 HTTP 配合使用——尽管您已经保持活动状态，但通常您可能不应该将其视为持久连接。

您能否对第一个请求进行身份验证，然后存储一个 cookie，以便每个会话仅进行一次身份验证？

# java - 访问多维数组时抛出 NullPointerException

> ID：14022684
> 
> 赞同：-1
> 
> 时间：2012-12-24T14:42:07.410
> 
> 标签：java, multidimensional-array

我正在尝试制作一个需要你放置块的游戏，类似于 Minecraft。但是，我在尝试制作一个多维数组来存储放置的块的 x 和 y 坐标时遇到了一些麻烦。代码如下；

```
public Block[][] blocks = new Block[maxBlockX][maxBlockY]; 
```

它给了我一个空指针异常。例外情况如下；

```
Exception in thread "main" java.lang.NullPointerException
    at net.lojana.src.World.loadWorldAsReg(World.java:16)
    at net.lojana.client.SpriteCraft.display(SpriteCraft.java:45)
    at Run.main(Run.java:5) 
```

它`loadWorldAsReg()`在我的 World 类中引用了以下方法。方法在这里。

```
public void loadWorldAsReg() {
    for (int x = 0; x < maxBlockX; x += 20) {
        for (int y = 0; y < maxBlockY; y += 20) {
            blocks[x][y].draw();
        }
        }
} 
```

它还引用了以下方法。

```
public void draw() {
    getTexture().bind();
    shapes.drawSquare(new Point(x, y), new Point(x + 20, y + 20));
} 
```

有谁知道如何解决这个特殊的错误？非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:45:00.373

您的数组中充满了`null`s。

您需要`Block`首先为数组中的每个元素创建一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:47:16.293

改成这样：

```
public void loadWorldAsReg() {
    for (int x = 0; x < maxBlockX; x += 20) {
        for (int y = 0; y < maxBlockY; y += 20) {
        blocks[x][y] = new Block();
        blocks[x][y].draw();
    }
    }
} 
```

在使用对象之前调用构造函数。`Block()`假设您的代码有一个，我使用了默认构造函数。如果构造函数需要，请包含参数。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:55:12.573

写入`Block[][] blocks = new Block[maxBlockX][maxBlockY]`将创建一个大小为 maxBlockX * maxBlockY 的二维数组，其中仅包含空值。

新的 DATA_TYPE[size1][size2] 只会填写 PRIMITIVE 数据类型的默认值。所以 new int[2][1] 将创建一个数组 [[0],[0]] 并且 new Block[2][1] 将创建 [[null],[null]]。

只需正确初始化您的块，您将被设置。

```
Block[][] blocks = new Block[maxBlockX][maxBlockY];
for (int i=0; i<blocks.length; i++)
  for (int j=0; j<blocks[0].length; j++)
    blocks[i][j] = new Block(); 
```

您还可以通过检查 loadWorld 函数来避免绘制错误（空）数据。这也可能让你的生活更轻松，不知道：

```
public void loadWorldAsReg() {
  for (int x = 0; x < maxBlockX; x += 20) {
    for (int y = 0; y < maxBlockY; y += 20) {
      if (blocks[x][y] != null)
        blocks[x][y].draw();
    }
  }
} 
```

# html5-video - 如何在 html5 视频播放器中加载动态字幕

> ID：14022685
> 
> 赞同：0
> 
> 时间：2012-12-24T14:42:09.713
> 
> 标签：html5-video, subtitle

我需要一些关于带有动态字幕的 html5 视频播放的帮助

这是html

视频html

```
<video 
   width="998" 
   height="545" 
   id="videoplayer" 
   controls 
   src="zzz_f817951280x720.m4v" type="video/mp4">
         <track id="subtitleid" srclang="en" default="" label="ინგლისური"></track>
</video> 
```

字幕转换器html

```
<ul>
   <li><a href="0" class="subtitle_clicker selected">off</a></li>
   <li><a class="subtitle_clicker" id="s15"
            href="Uploads/Subtitles/test_a1ee4c.srt">rus</a></li>
   <li>∙&lt;a class="subtitle_clicker" id="s16"
            href="Uploads/Subtitles/test_797ed1.srt">eng</a></li>                                    
</ul> 
```

和js

```
$(document).ready(function () {

 $('.subtitle_clicker').live('click', function (e) {
        e.preventDefault();
        SubtitleChager($(this));
    });
});

function SubtitleChager(_this) {
    if ($('.x-player .player-view video').attr("width")) {
        $('.subtitle_clicker.selected').removeClass('selected');
        $('#subtitleid').removeAttr('src');
        if (_this.attr("href") == '0') {
            $('#subtitleid').removeAttr('src');
        }
        else {
            $('#subtitleid').attr('src', _this.attr("href"));
        }
        $(_this).addClass('selected');
    }
} 
```

当我尝试更改字幕时，我只是在 attr src 中更改 sustitle url，这两个字幕相互重叠

那么如何删除旧字幕并插入新字幕？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T12:41:08.747

添加了一个名为 Track 的新标签（仅在 Chrome 和 IE10 中可用）

请查看 WebVTT - [http://www.html5rocks.com/en/tutorials/track/basics/](http://www.html5rocks.com/en/tutorials/track/basics/)

微软也开始使用名为 TTML 的 XML 格式的字幕，这两者之间也有一些很好的比较 - [http://www.balisage.net/Proceedings/vol10/html/Tai01/BalisageVol10-Tai01.html](http://www.balisage.net/Proceedings/vol10/html/Tai01/BalisageVol10-Tai01.html)

# magento - Magento 1.7 类别页面描述未出现

> ID：14022698
> 
> 赞同：2
> 
> 时间：2012-12-24T14:43:23.563
> 
> 标签：magento, magento-1.7

我有一个奇怪的问题：我的网站上有几个类别和子类别。在管理类别中，我煞费苦心地插入了 SEO 的描述和元描述。然而，在前端，一些分类页面显示的描述和元描述很好；其他人根本没有在产品上方显示描述块；如果我在浏览器中进入查看源代码，我会将元描述视为默认站点元描述，而不是类别页面的特定元描述。

我已清除所有缓存和会话数据，但问题仍然存在。有任何想法吗？

谢谢。-TM值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:47:37.333

管理员 - 系统 - 索引管理 - 类别平面数据 - 重新索引数据。那应该这样做。

# c++ - 用于表示多图的良好数据结构 (C++)

> ID：14022701
> 
> 赞同：11
> 
> 时间：2012-12-24T14:43:30.103
> 
> 标签：c++, data-structures, graph

描述无向多图（针对速度和内存进行了优化）的最佳数据结构是什么？

边列表是不合适的，因为在我的代码中经常发生获取顶点的邻居。

邻接列表不好，因为我必须保留有关已访问边的信息，并且当访问从 1 到 3 的边时（例如，我正在遍历 1 的邻居并找到通向 3 且具有权重的边`w`），我必须在 3 的邻居列表中找到相同的边缘才能将其标记为已访问，这很慢。

我已经考虑过邻接矩阵，当每个单元格在`set<Edge>`哪里`Edge`是一个结构，该结构表示有关是否访问顶点、边的权重等信息。但是，当`graph[0][1][i]`访问时，我不能在 的边中设置相同`graph[1][0]`的边没有线性搜索。

表示多图时有什么好的方法和技术吗？我不想要第三个库解决方案，例如`boost::AdjacencyList`；我必须自己写。

编辑：抱歉造成误解。这是大学的练习，我只能使用标准库来做。该图有约束： 0 < n ≤ 300 - 顶点数 0 < m ≤ 20000 - 边数 1 ≤ w ≤ 500

我的内存限制为 32 MB，时间限制为 0.5 秒（我必须使用 DFS 遍历）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:09:23.170

一个有点复杂但提供高效本地操作的表示如下

```
struct Link;

struct Node
{
    Link *firstIn, *lastIn, *firstOut, *lastOut;
    ... node data ...
};

struct Link
{
    Node *from, *to;
    Link *prevInFrom, *nextInFrom, *prevInTo, *nextInTo;
    ... link data ...
}; 
```

基本上每个`Node`都有两个双链表，一个用于传入链接，一个用于传出链接。每个都`Link`知道开始和结束`Node`，并且还具有包含它的两个列表的 prev 和 next 指针（“from”节点中的传出列表和“to”节点中的传入列表）。

使用这种方法，您可以获得`O(1)`节点和链接的创建和销毁，`O(inbound_deg(node))`以查找哪些链接正在到达一个节点，`O(outbound_deg(node))`哪些链接正在离开一个节点。该结构还支持同一对节点之间的多个连接以及多个循环。

所需的空间是每个节点和每个链接的固定数量，但开销可以确定也可以不取决于应用程序（每个节点 4 个指针，每个链接 6 个指针）。使用简单列表而不是双链表，开销变为每个节点 2 个指针和每个链接 4 个指针，但链接删除变得`O(outbound_deg(from) + inbound_deg(to))`不再是恒定的。

另请注意，所示结构不是缓存友好的，并且在现代台式计算机中可能是一种更“蛮力”的方法，例如指针向量而不是双向链表可以提供更好的速度，具体取决于列表的大小是以及你改变图形结构的频率。

甚至可以拆分链接对象以将前向链接数据嵌入到“from”节点中，而将反向指针保留在“to”节点中。

```
struct Node
{
    struct OutgoingLink
    {
        Node *to;
        int incoming_index;
        ... link data ...
    };

    struct IncomingLink
    {
        Node *from;
        int outgoing_index;
    };

    std::vector<OutgoingLink> outgoing_links;
    std::vector<IncomingLink> incoming_links;

    ... node data ...
}; 
```

如果您大部分时间都在正向遍历链接，并且如果链接没有添加到现有节点，那么更好的是只使用一个内存块来存储节点和传出链接数据，但不幸的是，这并不容易C++ 支持。

在 C 中它会是

```
typedef struct TOutgoingLink
{
    struct TNode *to;
    int incoming_index;
    ... link data ...
} OutgoingLink;

typedef struct TIncomingLink
{
    struct TNode *from;
    int outgoing_index;
} IncomingLink;

typedef struct TNode
{
    ... node data ...
    int num_incoming_links;
    int num_outgoing_links;
    IncomingLink *incoming_links;   // separate array
    OutgoingLink outgoing_links[1]; // embedded array starting here
} Node; 
```

用于`malloc(sizeof(Node) + (num_outgoing_links-1)*sizeof(OutgoingLink))`为节点分配空间。

使用这种方法，节点及其传出链接的所有数据都将位于相邻的内存位置。

# asp.net - 更改 SqlDataSource SelectCommand

> ID：14022706
> 
> 赞同：0
> 
> 时间：2012-12-24T14:44:18.403
> 
> 标签：asp.net, gridview, sqldatasource

我有`SqlDataSource`一个网格视图。我想改变`SelectCommand`那个`SqlDataSource`。

我的选择命令是：

```
select *   
from JobLog 
where UserName = @username 
  and PrinterName = @printer 
  and TimeSubmitted between @from and @to 
```

我想`@username`用文本框替换 and ...。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:55:56.657

在您的 SQLDataSource 中，将 SqlParameter 添加到其中。为要用于查询的每个文本框添加一个。例子：

```
<SelectParameters>
    <asp:ControlParameter Name="UserName" ControlID="txtUserName" />
</SelectParameters> 
```

# html - 如何在输入文本类型中添加不同的文本框

> ID：14022708
> 
> 赞同：0
> 
> 时间：2012-12-24T14:44:21.207
> 
> 标签：html, css, forms, input, textinput

如何像在 facebook 中那样使用 css 在输入文本类型中添加不同的文本框并增加字体？

我在其中一个网站上找到了这段代码，但那不起作用请看看你是否可以帮助我我想在表格中使用圆角框

```
.tb5 {
    background: url(images/rounded.gif) no-repeat top left;
    height: 22px;
    width: 230px;
}
.tb5a {
    border: 0;
    width:220px;
    margin-top:3px;
} 
```

我想使用[https://www.facebook.com/](https://www.facebook.com/)注册表单上的圆角框，而不是默认输入框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:48:23.497

您可以使用 CSS 设置文本输入的样式：

```
input[type=text] {
    font-size: 2em;
} 
```

您也可以更改其他属性，例如边框。

```
input[type=text] {
    font-size: 2em;
    border-radius: 0.5em;
} 
```

您可以[在 caniuse.com 上查看浏览器支持](http://caniuse.com/#search=border-radius)。

# jquery - jQuery将元素值传递给下拉选项文本

> ID：14022713
> 
> 赞同：1
> 
> 时间：2012-12-24T14:44:32.270
> 
> 标签：jquery, option, nodes

div 容器：

```
<div id="count"><span>Apple:</span>4</div> 
```

表单下拉列表：

```
<select id="list" size="6">
  <option selected="selected">Any Number</option>
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5+</option>
</select> 
```

我想将选项列表与水果数量联系起来。如果 div 容器的值为“Apple:4”，则选择“Option 4”，如果 div 值更改为“Pear:3”，则应选择“Option 3”，以此类推。

这是我到目前为止在 jQuery 中所做的：

```
var optionObject = document.getElementById('list');
var countValue = document.getElementById("count").childNodes[2].nodeValue;

for(var i=0; i<optionObject.length; i++){                        
   if(optionObject.options[i].text == countValue.trim()){
        optionObject.options[i].selected = true;
        break;
   }
} 
```

执行后没有任何反应，有人可以看看代码吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:49:08.973

```
​var a = $('#count').text();
a = a.substr(a.length - 1, a.length);
$('#list option:eq('+a+')').prop('selected','selected');
​ 
```

小提琴 - [http://jsfiddle.net/atif089/DYg96/1/](http://jsfiddle.net/atif089/DYg96/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:50:42.227

```
$('#list option:eq('+($('#count').text().split(':').pop())+')').prop('selected','selected'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:52:56.863

它有效，只需将第二行更改为：

```
var countValue = document.getElementById("count").childNodes[1].nodeValue; 
```

工作的[jsFiddle](http://jsfiddle.net/9QUsL/)。

考虑一下，如果你让它适用于数字 > 5 ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:57:57.740

[http://jsfiddle.net/3pjbb/3/](http://jsfiddle.net/3pjbb/3/)

我建议这样使用它：

```
var countValue = $.trim($('#count').text().match(/(\d+)/g));
$('#list').val(countValue);​ 
```

# c++ - 在 C 和 C++ 中使用 char* 获取字符串输入

> ID：14022720
> 
> 赞同：4
> 
> 时间：2012-12-24T14:45:38.423
> 
> 标签：c++, c, string, input

> **可能重复：**
> [从输入中读取带有空格字符的字符串？](https://stackoverflow.com/questions/6282198/reading-string-from-input-with-space-character)

我在将字符串（技术上的字符数组）作为输入时遇到问题。假设我有以下声明：

```
 char* s; 
```

我必须使用这个字符指针输入一个字符串，直到我点击“输入”，请帮忙！提前谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T15:06:05.410

在 C 和 C++ 中，您都可以使用该`fgets`函数，该函数将字符串读取到新行。例如

```
char *s=malloc(sizeof(char)*MAX_LEN);
fgets(s, MAX_LEN, stdin); 
```

会做你想做的（在C中）。在 C++ 中，代码类似

```
char *s=new char[MAX_LEN];
fgets(s, MAX_LEN, stdin); 
```

C++ 也支持`std::string`类，它是一个动态的字符序列。有关字符串库的更多信息：[http](http://www.cplusplus.com/reference/string/string/) ://www.cplusplus.com/reference/string/string/ 。如果您决定使用字符串，那么您可以通过以下方式读取整行：

```
std::string s;
std::getline(std::cin, s); 
```

**在哪里可以找到：**该`fgets`过程可以在标题中找到`<string.h>`，或者`<cstring>`对于 C++。该`malloc`函数可以在`<stdlib.h>`C 和`<cstdlib>`C++ 中找到。最后，在文件中可以找到`std::string`带有`std::getline`函数的类`<string>`。

**建议（针对 C++）：**如果您不确定使用哪一个，C 风格的字符串或`std::string`，根据我的经验，我告诉您字符串类更易于使用，它提供更多实用程序，而且速度也快得多比 C 风格的字符串。这是*C++ 入门*的一部分：

```
As is happens, on average, the string class implementation executes considerably
faster than the C-style string functions. The relative average execution times on
our more than five-year-old PC are as follows:

    user            0.4   # string class
    user            2.55  # C-style strings 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:49:57.793

首先是将输入输入到这个字符串中，你必须分配内存。之后，您可以使用 get 或 fgets 或 scanf

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T15:21:07.297

您可以使用 cin>>variable_name; 如果输入没有空格。对于带空格的输入，在 c++ 中使用gets(variable_name)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T14:53:13.650

如果您考虑 C++，`cin.getline()`可能会有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T15:47:18.960

`s`应该在开始填写之前分配

1）如果您事先不知道输入字符串的大小，您可以使用`realloc`

```
char* s = calloc(1,sizeof(char));
char t;
int len;
while(scanf("%c", &t)==1)
{
  if(t== '\n')
     break;
   len = strlen(s);
   s= realloc(s,len+1);
   *(s+len) = t;
   *(s+len+1) = '\0';
} 
```

2）现在如果您事先知道输入字符串最大长度的大小，您可以通过以下方式将您的字符串直接读入带有 scanf 的 char 数组：

```
char s[256] // Let's assume that the max length of your input string is 256

scanf("%[^\r\n]",s) // this will read your input characters till you heat enter even if your string contains spaces 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T15:32:35.260

嗯，因为OP已经声明：

*我必须使用这个 char 指针输入一个字符串，直到我点击“enter”*

我想我会试一试，这是一个动态缓冲区，使用`malloc`和`realloc`使用指针。但是，它可能包含错误，但要点就在那里！挑剔的一边...

抱歉，如果代码确实看起来很糟糕... ::)

```
char *ptr = NULL, *temp_ptr = NULL;
int c = 0, chcount = 0, enter_pressed = 0;
do{
   c = fgetc(stdin);
   if (c != '\n' || c != -1){
     chcount++;
     if (ptr == NULL){
         ptr = malloc(sizeof(char) + chcount + 1);
         if (ptr != NULL) ptr[chcount] = c;
         else printf("ABORT!\n");
     }else{
         temp_ptr = realloc(ptr, chcount + 1);
         if (temp_ptr != NULL){
            ptr = temp_ptr;
            ptr[chcount] = c;
         }else{
            // OK! Out of memory issue, how is that handled?
            break;
         }
     }
   }else{
      enter_pressed = 1;
   }
}while (!enter_pressed);
ptr[chcount] = '\0'; // nul terminate it! 
```

# entity-framework - EF：实体中的依赖注入

> ID：14022721
> 
> 赞同：2
> 
> 时间：2012-12-24T14:45:41.827
> 
> 标签：entity-framework

我正在使用 EntityFramework 并且我的实体有一些依赖项。问题是：如何在实体框架中注入依赖项？

# java - Android：我们可以一次为 Grid-view 项目设置多个标签吗？

> ID：14022727
> 
> 赞同：1
> 
> 时间：2012-12-24T14:46:23.173
> 
> 标签：java, android, android-gridview

我们可以为网格视图单元格项目设置多个标签吗？比如我们可以为单项设置“手机”、“电话”、“通讯”标签吗？我已经尝试获取项目数组，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:07:00.167

给定一个`View`named `v`，将一个`ArrayList<String>`named`a`与其`v`标签关联起来，调用`v.setTag(a)`。

给定一个`View`named `v`，要检索一个`ArrayList<String>`from`v`作为它的标签，调用`(ArrayList<String>)v.getTag()`。

# android - 如何避免自定义用户设置影响应用中的字体大小

> ID：14022732
> 
> 赞同：6
> 
> 时间：2012-12-24T14:47:20.333
> 
> 标签：android

我想避免用户对字体的设置偏好影响我的应用程序中各种 TextView 等的字体大小。

什么是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:53:07.610

> 我想避免用户对字体的设置偏好影响我的应用程序中各种 TextView 等的字体大小。

只有当用户觉得更大（或者可能更小）的字体可以改善他们对设备的使用时，他们才会改变他们的字体比例。`sp`您的应用程序应通过使用文本大小的单位进行调整以匹配。如果您的应用拒绝满足他们的要求，用户可能会不喜欢您的应用。

> 什么是最好的方法？

不要使用`sp`单位来表示文本大小，并准备好在 Play 商店中接受负面评论。

# flash - 根据经过的秒数计算用户分数

> ID：14022736
> 
> 赞同：0
> 
> 时间：2012-12-24T14:48:01.857
> 
> 标签：flash, actionscript

我有一个简单的问答游戏，它通过使用 score = 100 - ((100*answerTime)/60); 计算用户的分数；公式。

当我用计时器在屏幕上显示用户的分数时，它会显示为 100、99、97...

有没有办法更流畅地向用户显示这个分数？像 100, 99, 98 我在网上搜索过，但最接近的答案是用于 Flash 动画的贝塞尔曲线算法。

下面是示例代码：

```
private function TimerHandler(e:TimerEvent):void
    {
        var ticks:int = e.target.currentCount;
        var score:int = CalculateScore(ticks);
        trace("Elapsed time: " + ticks + ", score: " + score);

        if(ticks == 59)
        {
            trace("Time out! User got 0 points on this question");
            e.target.stop();
        }
    }

private function CalculateScore(answerTime:uint):int
{
    return 100 - ((100*answerTime)/60);
} 
```

在构造函数中：

```
var tmr:Timer = new Timer(1000);
tmr.addEventListener(TimerEvent.TIMER,TimerHandler);
tmr.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:43:25.643

问题是您必须在 59 次失误中折扣 100 分，然后每圈必须折扣超过 1 分。我的建议是将计时器设置为 600 毫秒，然后您将在一分钟内走完 100 次。

# asp.net-mvc - VB.net 通过强类型模型和列表来查看

> ID：14022739
> 
> 赞同：1
> 
> 时间：2012-12-24T14:48:11.643
> 
> 标签：asp.net-mvc, vb.net

现在刚学习 ASP.NET、VB.Net、MVC。
我的意图是将模型传递给视图。我有一个简单的字符串案例的成功测试代码。我认为我今天绊倒的地方在于当前的视图模型是一个对象列表。我得到的错误是“传递到字典中的模型项的类型是'MVC_Test1.Geocode_Google_Results[]'，但是这个字典需要一个'MVC_Test1.Geocode_Google_Results'类型的模型项。” 因此，以我有限的理解，似乎我正在传递一个对象列表（如预期的那样），但视图模型类型是用于创建列表的简单对象类型。

在许多示例中，响应都是用 C# 编写的。这些集中在 For Each 方法上（这是我对如何进行这项工作的第一个想法）。我已经尝试过了，但最终在 For Each ... AS object 子句中出现了对象类型错误。

我找到了一个 www 示例，它表明它应该作为一个数组来处理，如下所示： For I as integer = 0 to Model.Results.Count 这使我能够构建代码，但随后在运行时导致上面提到的对象类型错误而不是在构建时。

继续阅读，有几个主题似乎调用@model IEnumerable 作为一种方法。这只是使 viewdata 和模型对象在完成时未定义：

```
 @Modeltype IEnumberable MVC_Test1.Geocode_Google_Results 
```

或者

```
 @Model IEnumberable MVC_Test1.Geocode_Google_Results 
```

我怀疑我应该知道一些简单/基本的东西才能使这一切正常工作。这似乎直截了当地提出了一个设计问题，没有一个结构良好的答案。

如果可以在 VB.net 的上下文中解释答案，那对我会更有帮助。我有时确实使用其中一种网络 C# 到 VB.net 转换器进行翻译，因此任何响应都比没有好。

谢谢，

详情如下：

我有一个简单的课程：

```
Public Class Geocode_Google_Results
    Public Property Results As New List(Of ManyGeocodeCoordinates)
    'Methods
    'Add to list
    Public Sub AddResults(Address, Latitude, Longitude)
        Results.Add(New ManyGeocodeCoordinates() With {.Address = Address, .latitude = Latitude, .longitude = Longitude})
    End Sub
End Class

Public Class ManyGeocodeCoordinates
     Public Property Address As String
     Public Property latitude As Double
     Public Property longitude As Double
End Class 
```

然后我填充一些数据：

```
 For x As Integer = 1 To resultCount
        ManyResults(x) = New Geocode_Google_Results
        ManyResults(x).AddResults(results.Elements("result").Elements("formatted_address").Value, results.Elements("result").Elements("geometry").Elements("location").Elements("lat").Value, results.Elements("result").Elements("geometry").Elements("location").Elements("lng").Value)

    Next 
```

然后我传递给视图：

```
 ElseIf resultCount = 1 Then
        ' Send the user to the results page...Default View Page
        Return View(ManyResults) 
```

然后我有一个测试视图：

```
@Modeltype MVC_Test1.Geocode_Google_Results
@Code
    ViewData("Title") = "httptest"
End Code

<h2>httptest</h2>
Default single address view
@model.Results(0).Address   <br />
@model.results(0).latitude <br />
@model.results(0).longitude <br /> 
```

在 IE 中运行此程序时，我收到关于对象列表与模型类型对象的上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:55:14.197

在继续阅读和实验之后，我发现了。

视图模型（类）是一个单一的对象。当我用数据填充类的实例时，我毫无疑问地使用了从对象数组上下文中提取的数组表示法。但是，该类不是对象数组。此功能由作为对象列表的属性提供。

因此，将数据分配为 Manyresults(x) 是不正确的。

需要分配的数据为

```
ManyResults.AddResults(results.Elements("result").Elements("formatted_address").Value, results.Elements("result").Elements("geometry").Elements("location").Elements("lat").Value, results.Elements("result").Elements("geometry").Elements("location").Elements("lng").Value) 
```

同样，在视图中，模型数据通过以下形式访问：

```
@Model.Results(0).Address 
```

在我的示例中，当返回多个结果时，将使用 Model.Results(n).Address，其中 n 是您要查找的结果维度。Model.results.count 将用于确定视图模型中有多少结果。

# c++ - C2065 未声明的标识符

> ID：14022743
> 
> 赞同：0
> 
> 时间：2012-12-24T14:48:42.217
> 
> 标签：c++, directx

我有一个问题，但我不知道为什么。我正在学习 DirectX [。](http://www.directxtutorial.com/Lesson.aspx?lessonid=11-4-2)我用[它](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)来配置解决方案。

这是我的代码：

标题：

```
#include <d3d11.h>
#include <d3dx11.h>
#include <d3d10.h>
#include <d3dx10.h>
#include <dxgi.h>
#include <Windows.h>
#include <windowsx.h>

#pragma comment (lib, "d3d11.lib")
#pragma comment (lib, "d3dx11.lib")
#pragma comment (lib, "d3dx10.lib")

    class HelloWorld
    {
    private: 
        IDXGISwapChain* swapchain;             
        ID3D11Device* dev;                     
        ID3D11DeviceContext* devcon; 

        LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

    public:
        void InitD3D(HWND hWnd);    
        void CleanD3D(void);  
        int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
    };
} 
```

和 cpp：

```
#include "HelloWorld.h"

void InitD3D(HWND hWnd)
{
    DXGI_SWAP_CHAIN_DESC scd;

    ZeroMemory(&scd, sizeof(DXGI_SWAP_CHAIN_DESC));

    scd.BufferCount = 1;
    scd.BufferDesc.Format = DXGI_FORMAT_B8G8R8A8_UNORM;
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    scd.OutputWindow = hWnd;
    scd.SampleDesc.Count = 4;
    scd.Windowed = TRUE;

    D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_HARDWARE,
        NULL, NULL, NULL, NULL, 
        D3D11_SDK_VERSION, &scd, &swapchain, &dev, NULL, &devcon);
}

void CleanD3D(void)
{
    swapchain->Release();
    dev->Release();
    devcon->Release();
}

LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
    case WM_DESTROY: 
        {
            PostQuitMessage(0);
            return 0;
        }break;
    }

    return DefWindowProc(hWnd, message, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    HWND hWnd;
    WNDCLASSEX wc;

    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = "WindowClass1";

    RegisterClassEx(&wc);

    RECT wr = {0, 0, 400, 400};
    AdjustWindowRect(&wr, WS_OVERLAPPEDWINDOW, FALSE);

    hWnd = CreateWindowEx(NULL,
        "WindowClass1",
        "First windowed program",
        WS_OVERLAPPEDWINDOW,
        300,
        300,
        wr.right - wr.left,
        wr.bottom - wr.top,
        NULL,
        NULL,
        hInstance,
        NULL);

    ShowWindow(hWnd, nCmdShow);

    MSG msg = {0};

    while(true)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);

            if(msg.message == WM_QUIT)
            {
                break;
            }
        }
        else
        {

        }
    }

    return msg.wParam;
} 
```

但是在编译过程中，我遇到了一个 C2065 错误：swapchain、dev 和 devcon。

我尝试了几件事，但没有任何效果。

如果有人可以帮助我，将不胜感激！

普克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:01:48.837

`Init3D`考虑为您的函数添加一个类限定符。

```
void InitD3D(HWND hWnd)
{
   ... 
```

应该：

```
void HelloWorld::InitD3D(HWND hWnd)
{
    ... 
```

注意：其他函数也存在类似问题，您很快就会发现您的 WndProc 需要一些特殊处理才能连接到您的 C++ 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:02:15.247

看起来您已经将 C++“HelloWorld”类与 C 风格的函数混合在一起。

作为第一步，我建议您简单地删除标头，并将当前私有变量设为 .cpp 静态。

一旦你完成了这项工作，你就可以将它封装在一个类中。要将您的函数转换为方法，您需要在 .cpp 中这样命名它们，例如

```
void HelloWorld::InitD3D(HWND hWnd) 
```

# android-listview - ListView 不显示数据库项目

> ID：14022748
> 
> 赞同：0
> 
> 时间：2012-12-24T14:49:10.610
> 
> 标签：android-listview, android-cursoradapter

我整天工作以显示我的项目在我的数据库中，但我不能。我有一个包含一些项目的单表数据库，我想在 ListActivity 中显示它们。

这是我的代码：

**布局（activity_cars）：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button 
    android:id="@+id/btnNewCar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/btnNewCar" />

<ListView 
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="0dip"  >
</ListView> 
```

**列表活动：**

```
public class CarsActivity extends ListActivity {

private CarListAdapter carListAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cars);

    CarDbLoader carDbLoader = new CarDbLoader(getApplicationContext());
    carDbLoader.open();

    Cursor c = carDbLoader.fetchAll();
    c.moveToFirst();

    carListAdapter = new CarListAdapter(this, c);
    setListAdapter(carListAdapter);
} 
```

}

**列表适配器：**

```
public class CarListAdapter extends CursorAdapter {

public CarListAdapter(Context context, Cursor c) {
    super(context, c);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final LayoutInflater inflater = LayoutInflater.from(context);
    View row = inflater.inflate(R.layout.car_list_row, null);
    bindView(row, context, cursor);
    return row;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    Car car = CarDbLoader.getCarByCursor(cursor);
    TextView tv = (TextView)view.findViewById(R.id.rowText);
    tv.setText(car.toString());
} 
```

}

我确定我的表中有项目......但我真的不知道这个活动没有显示项目的原因是什么。请帮助找出并制作正确的来源。

谢谢 nad 结婚圣诞节！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:53:42.370

为什么你将listview的高度设置为0dip？

```
<ListView 
   android:id="@android:id/list"
   android:layout_width="wrap_content"
   android:layout_height="0dip"  > // Why 0 dip? Try "fill_parent" or "match_parent"
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:07:55.307

你为什么要在这里调用 bindView() 呢？我认为这没有必要，可能会导致一些错误。

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final LayoutInflater inflater = LayoutInflater.from(context);
    View row = inflater.inflate(R.layout.car_list_row, null);
    bindView(row, context, cursor);//Why do you call bindView() here?
    return row;
} 
```

# javascript - 无法在 Jquery 中执行 show() 方法

> ID：14022749
> 
> 赞同：0
> 
> 时间：2012-12-24T14:49:23.487
> 
> 标签：javascript, jquery, html

我有类似的东西：

```
<div id="id1">
    //some code 1

    <div id = "id2">
    //some code 2

    </div>
</div> 
```

现在，我使用以下命令隐藏所有块：

```
$("#id1").hide(); 
```

但是，当我尝试显示内部块时，使用以下命令：

```
$("#id2").show(); 
```

但这不起作用！

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T14:50:33.343

当父元素被*隐藏*时，它的所有子元素也被*隐藏*。

如果您只想显示带有 ' `id2`' id 的元素，您可以这样做：

```
$('#id1').children(':not(#id2)').hide();  //Hiding all children except '#id2'  
$('#id1').show(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T14:51:07.787

如果`id1`是隐藏的，不管是否`id2`可见。它不会显示，因为它的父级是隐藏的。这适用于所有后代元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:58:28.810

**不，这是不可能的`display:none`**（这就是这样`.hide()`做的）。`display:none`隐藏元素，因此不会显示任何子元素。

`display`如果您能够从 using 切换到，这可能与您想要的一致`visibility`。

```
#id1 {visibility: hidden;}
#id2 {visibility: visible;} 
```

查看工作小提琴：http: [//jsfiddle.net/vLYnk/2/](http://jsfiddle.net/vLYnk/2/)

使用 javascript，您可以使用：

```
$("#id1").css('visibility', 'hidden');
$("#id2").css('visibility', 'visible'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:04:44.190

创建一个元素并复制它然后显示它。

```
var element = jQuery('#id2').clone();
element.appendTo('some element'); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-24T14:52:24.287

如果要显示它，则需要将内部 div 移出。类似的东西

```
$("#id2").parents(":visible").appendTo($("#id2")) 
```

# sql - 外键可以为空吗？

> ID：14022750
> 
> 赞同：11
> 
> 时间：2012-12-24T14:49:31.007
> 
> 标签：sql, oracle, database-design, foreign-keys, data-integrity

在我们的数据库项目中，我们有一个表`Sale`，它有一个主键和两个独占外键： `Vehicle_ID`和`Piece_ID`. 例如，如果我们出售一辆车，我们需要`Vehicle_ID`外键但不需要`Piece_ID`。我们可以将 NULL 放入`Piece_ID`，外键可以为空吗？或者有没有办法完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T17:37:21.813

主键的列（或列）必须为 NOT NULL。一条记录不能由 NULL 唯一标识。因此，外键引用端的 ID 列必须定义为 NOT NULL。

然而，外键关系是可选的，这是一个合理的设计决策，表示它的方式是使键的引用端是可选的，即允许 NULL。

在数据建模术语中，您所描述的是一个（排他的）弧：“一个表......具有两个或多个外键，其中一个且只有一个可以是非空的。” 在逻辑建模中，弧线是完全可以接受的，但有强烈的意见支持将它们作为单独的表来实现。在您的场景中，这将是一个通用`Sale`表加上两个子类型表，`VehicleSale`并且`PieceSale`.

分表实现的优点是：

*   更容易执行外键约束；
*   更容易添加与（例如）车辆销售相关的额外列，这些列不适用于计件销售；
*   使用额外的子类型更容易扩展模型；
*   更清晰的数据模型，可以简化应用开发。

然而，优势并非都是单向的。虽然很容易确保 a`Sale`适用于 a`VehicleSale`或 a`PieceSale`但不能同时适用于两者，但强制执行 a`Sale` *必须*有子记录的规则实际上变得非常棘手。

因此，普遍的建议是排他弧是错误的，这通常是好的建议。但这并不像有些人说的那么清楚。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T17:36:41.123

## 回答：

是的，您可以这样做 - 使 FK 本身可以为 NULL，但添加一个 CHECK 以确保其中一个包含非 NULL 值。

## 阐述：

FK 可以为 NULL，它模拟 1..0:N 关系。换句话说，“子”行*可以*（但不是必须）有“父”行。

NOT NULL 外键模拟 1:N 关系。换句话说，每个孩子都*必须*有一个父母。

当 FK 是复合¹并且其至少一个字段可以为 NULL 时，以特殊方式处理 NULL 和非 NULL 值的混合：

*   如果 FK 为 MATCH FULL，则*所有*值都必须为 NULL，或者所有值必须为非 NULL 并匹配某个父行。
*   如果 FK 是 MATCH PARTIAL，则只有那些非 NULL 值必须匹配某些父行（NULL 被忽略）。
*   如果 FK 是 MATCH SIMPLE，则要么所有值都是非 NULL 并且必须匹配某个父行，要么至少有一个 NULL 值（在这种情况下，非 NULL 不需要匹配）。

[大多数 DBMS 默认为 MATCH SIMPLE（除了MS Access](http://www.upsizing.co.uk/Art10_MultiPartkeys.aspx)的显着例外），并且大多数 DBMS 不支持默认值。

* * *

*¹你在这里没有 - 只是为了完整性而提及它。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T16:20:02.450

Depending on what you mean by "exclusive foreign keys", you might be thinking of vehicles and pieces as two subclasses of some larger superclass, call it saleable items.

If you use a design pattern called "class table inheritance", you will have three tables, one for the superclass, and one for each subclass table. If in addition, you use a design called "shared primary key", you can use the same primary key for all three tables.

This would enable your Sale table to have a single foreign key, Saleable_Item_Id, that references the Saleable_Item table and also either the Vehicle or the Piece table, depending on the case. This could work out better for you than the existing design.

google "class table inheritance" and "shared primary key" for more details.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:53:56.427

如果您有一个空外键，Oracle 不应该抱怨。

您是否遇到了一些错误？

# android - 将字符串数组从活动一传递到活动二，从字符串数组中获取值并相应地更改布局

> ID：14022754
> 
> 赞同：0
> 
> 时间：2012-12-24T14:49:50.487
> 
> 标签：android, arrays, eclipse, string

从哪里开始.. 我是 android 新手，正在尝试为 android 创建一个显示时间表（5 天 8 小时）的小应用程序，这些应用程序将显示为 40 个正方形的表格。用户可以通过选择日期（从微调器）、时间（微调器）、添加注释（最多 15 个字符）并选择背景颜色来添加事件。所有这些都必须添加到字符串数组并发送到主要活动。从那里通过从该字符串数组中获取日期和时隙值，相应的正方形将使用来自同一字符串数组的文本和背景颜色进行更新。我已经尝试解决这个问题大约四天了，但我无法理解这个问题......这是一些代码：主要活动：

```
package com.tt;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button settings = (Button)findViewById(R.id.settings);

        Intent a = getIntent();
        String[] add = a.getStringArrayExtra("strings");

        setContentView(R.layout.activity_main);
        TextView detail = (TextView)findViewById(R.id.m1);
        //detail.setText(notes);

        settings.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent i = new Intent(v.getContext(),Settings.class);
                startActivityForResult(i,0);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

添加事件：

```
package com.tt;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;
import android.app.Activity;
import android.content.Intent;

public class Add extends Activity implements OnClickListener, OnCheckedChangeListener {
    String[] DOW;
    String[] time;
    String  clr;
    EditText nts;
    boolean click = true;
    Button save;
    RadioGroup days;
    RadioGroup times;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add);
        initialize();

        DOW = getResources().getStringArray(R.array.DOW);
        Spinner s1 =(Spinner)findViewById(R.id.spinner1);
        ArrayAdapter<String>adapter = new      ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item,DOW);
        s1.setAdapter(adapter);
        s1.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?>arg0,View arg1, int arg2, long arg3) {
                int index = arg0.getSelectedItemPosition();
                Toast.makeText(getBaseContext(), "Chosen Day of the Week is     "+ DOW[index], Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onNothingSelected(AdapterView<?>arg0){
                // nothing
            }
        });
        time = getResources().getStringArray(R.array.time);
        Spinner s2 = (Spinner)findViewById(R.id.spinner2);
        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item,time);
        s2.setAdapter(adapter2);
        s2.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?>arg0,View arg1, int arg2, long arg3) {
                int index = arg0.getSelectedItemPosition();
                Toast.makeText(getBaseContext(), "Time is set to "+ time[index], Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // nothing
            }
        });
    }
    private void initialize() {
        save = (Button)findViewById(R.id.save);
        save.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                String notes = nts.getText().toString();
                String day = DOW.toString();
                String tim = time.toString();
                //String color = clr.

                Bundle b = new Bundle();
                /*bag.putString("key1", day);
                //bag.putString("key2",tim);
                //bag.putString("key3", notes);
                //bag.putString("key4", color);*/

                /*String[] added = new String[4];
                added[0]=day;
                added[1]=tim;
                added[2]=color;
                added[3]=notes;*/

                //b.putStringArray("key",added);
                String[] added = new String[] {day, tim, notes};
                //b.putStringArray("key", new String[]{day, tim, notes});
                Intent a = new Intent(Add.this, MainActivity.class);
                a.putExtra("strings",added);
                startActivity(a);
            }
        });
        nts = (EditText) findViewById(R.id.notes);
        //days.setOnCheckedChangeListener((OnCheckedChangeListener) this);
        //times.setOnCheckedChangeListener((OnCheckedChangeListener) this);
    }

    @Override
    public void onClick(View arg0) {
        // nothing
    }

    @Override
    public void onCheckedChanged(RadioGroup arg0, int arg1) {
        switch(arg1) {
        case R.id.blue:
            clr = "blue";
            break;
        case R.id.green:
            clr = "green";
            break;
        case R.id.yellow:
            clr = "yellow";
            break;
        case R.id.red:
            clr = "red";
            break;
        }
    }
} 
```

***更新***

对...我已经将字符串数组缩减为一个字符串...这是假设发送数据的代码：

```
 private void initialize() 
{
    save = (Button)findViewById(R.id.save);
    nts = (EditText) findViewById(R.id.notes);
}   
    public void onClick(View arg0) 
        {
            String notes = nts.getText().toString();
            //String day = DOW.toString();
            //String tim = time.toString();

            Bundle b = new Bundle();
            b.putString("AddedNote", notes);
            Intent a = new Intent(Add.this, MainActivity.class);
            a.putExtras(b);
            startActivity(a);
            /*String[] added = new String[] {notes};
            a.putExtra("strings",added);
            */
        }; 
```

而“接收者”：

```
 public class MainActivity extends Activity
{
String gotNotes;
TextView notes;
   @Override
    public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialize();
    Button settings = (Button)findViewById(R.id.settings);
    Bundle gotPackage = getIntent().getExtras();
    gotNotes = gotPackage.getString("AddedNote");
    if (gotNotes != "")
    {
    notes.setText(gotNotes);
    }
    else{}

    settings.setOnClickListener(new OnClickListener()
    {

          public void onClick(View v)
         {
              Intent i = new Intent(v.getContext(),Settings.class);
              startActivityForResult(i,0);
         }

    });

   }

    private void initialize() 
   {
    // TODO Auto-generated method stub
    notes = (TextView)findViewById(R.id.m1);
}

@Override
    public boolean onCreateOptionsMenu(Menu menu) 
   {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

    }

  } 
```

我得到的结果是由行的 java.lang.nullpointerexception 引起的：

```
 gotNotes = gotPackage.getString("AddedNote"); 
```

“接收者”活动的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:43:14.900

这取决于你的活动 android:launchMode，我怀疑你有 singleTask 或类似的。在这种情况下，您应该覆盖 onNewIntent，您应该使用字符串数组接收意图。

另一种解决方案是将数据存储在共享首选项中，如果需要，您可以将其序列化为 JSON 对象。

```
protected void onNewIntent(Intent intent) {
   String[] add = a.getStringArrayExtra("strings");
} 
```

# java - Google App Engine (Java) 日志记录级别 1.7.4 降低

> ID：14022755
> 
> 赞同：1
> 
> 时间：2012-12-24T14:49:55.533
> 
> 标签：java, google-app-engine

我正在尝试降低我的开发环境的噪音水平。我尝试将`logging.properties`文件中的日志记录级别设置为，`.level=SEVERE`但我仍然收到如下日志：

```
Dec 24, 2012 2:47:16 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Dec 24, 2012 2:47:16 PM com.google.apphosting.utils.config.AppEngineWebXmlReader     readAppEngineWebXml
INFO: Successfully processed C:\Ws\testproject\war\WEB-INF/appengine-web.xml
Dec 24, 2012 2:47:16 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\Ws\apphosting\war\WEB-INF/web.xml 
```

有谁知道如何减少这些**INFO**日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:59:21.113

您必须将以下语句添加到您的`/war/WEB-INF/logging.properties`：

```
com.your_package_name.your_app_name.server.level = SEVERE 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T03:05:20.843

`logging.properties`请注意下面显示的默认文件的第二行。它指出*所有 App Engine 日志记录都是通过 java.util.logging 进行*的。

```
# A default java.util.logging configuration.
# (All App Engine logging is through java.util.logging by default).
#
# To use this configuration, copy it into your application's WEB-INF
# folder and add the following to your appengine-web.xml:
#
# <system-properties>
#   <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
# </system-properties>
#

# Set the default logging level for all loggers to WARNING
.level = WARNING 
```

您可以在此处[找到相关](https://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html)**文档**。查看字段摘要部分以了解所有可能性。

# jquery - jQuery 滚动事件仅在 chrome 中触发一次

> ID：14022759
> 
> 赞同：1
> 
> 时间：2012-12-24T14:50:27.823
> 
> 标签：jquery, html, google-chrome

我正在开发一个 jQuery 悬停滚动导航。我将`scrollLeft`and`scrollTop`方法与`.mouseover()`and结合使用`.mouseout()`。在 Chrome/Safari 中，一切似乎都运行良好。我注意到意外的行为。主要是滚动事件似乎只触发一次。我不确定是什么原因造成的，或者是否有办法解决这个问题。

无论如何，这是我的代码和网站链接，因此您可以自己查看行为。任何帮助都会很棒。

网址： http: [//www.derekhutchinson.com](http://www.derekhutchinson.com)

```
var delay = false;
function Movehorizonal(speed, ammount) {
    var curpos = $('body,html').scrollLeft();
    $("body,html").animate({
        scrollLeft: curpos + ammount
    }, speed);
    delay = setInterval(function() {
        //console.log("tick_horizontal");
        var curpos = $('body,html').scrollLeft();
        $("body,html").animate({
            scrollLeft: curpos + ammount
        }, speed);
    }, speed);
}

$(function() {

    var speed = 400;
    $('#goLeft').mouseover(function() {
        Movehorizonal(speed, -200);
    });
    $('#goLeft').mouseout(function() {
        $("body,html").stop();
        clearInterval(delay);
        delay = false;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:59:17.440

似乎 Google Chrome 和其他浏览器都在不同元素中具有滚动值.. `$('body').scrollLeft();`似乎只适用于 webkit 浏览器，而`$('html').scrollLeft();`不能

所以，更换

```
var curpos = $('body,html').scrollLeft(); 
```

和

```
var curpos = Math.max($('body').scrollLeft(), $('html').scrollLeft()); 
```

和

```
var curpos = $('body,html').scrollTop(); 
```

和

```
var curpos = Math.max($('body').scrollTop(), $('html').scrollTop()); 
```

它按预期工作

JS：

```
function Movehorizonal(speed, ammount) {
    var curpos = Math.max($('body').scrollLeft(), $('html').scrollLeft());
    $("body,html").animate({
        scrollLeft: curpos + ammount
    }, speed);
    delay = setInterval(function() {
        //console.log("tick_horizontal");
        var curpos = Math.max($('body').scrollLeft(), $('html').scrollLeft());
        $("body,html").animate({
            scrollLeft: curpos + ammount
        }, speed);
    }, speed);
}

function Movevertical(speed, ammount) {
    var curpos = Math.max($('body').scrollTop(), $('html').scrollTop());
    $("body,html").animate({
        scrollTop: curpos + ammount
    }, speed);
    delay = setInterval(function() {
        //console.log("tick_vertical");
        var curpos = Math.max($('body').scrollTop(), $('html').scrollTop());
        $("body,html").animate({
            scrollTop: curpos + ammount
        }, speed);
    }, speed);
} 
```

[现场演示](http://jsfiddle.net/pnSLD/1/show/)| [来源](http://jsfiddle.net/pnSLD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:59:36.653

尝试将事件从 mouseover/mouseout 更改为 mouseenter/mouseleave。

另外，您的“延迟”变量是否在范围更广的某处声明？

最后，“amount”用一个“m”拼写。

# ios - GPUImage内存警告

> ID：14022770
> 
> 赞同：0
> 
> 时间：2012-12-24T14:51:39.200
> 
> 标签：ios, gpuimage

在图像上应用 GPUImage 过滤器时，我遇到了一个奇怪的问题。我正在尝试在图像上应用不同的过滤器，但在应用 10-15 个过滤器后，它会给我内存警告，然后崩溃。这是代码：

```
sourcePicture = [[GPUImagePicture alloc] initWithImage:self.m_imageView.image smoothlyScaleOutput:YES];

            GPUImageBrightnessFilter *bright=[[GPUImageBrightnessFilter alloc]init];
            [bright setBrightness:0.4];
            GPUImageFilter *sepiaFilter = bright;

            [sepiaFilter prepareForImageCapture];
            [sepiaFilter forceProcessingAtSize:CGSizeMake(640.0, 480.0)]; // This is now needed to make the filter run at the smaller output size
            [sourcePicture addTarget:sepiaFilter];
            [sourcePicture processImage];
            UIImage *sep=[sepiaFilter imageFromCurrentlyProcessedOutputWithOrientation:3];

            self.m_imageView.image=sep;
            [sourcePicture removeAllTargets]; 
```

如果有人遇到同样的问题，请提出建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:49:59.380

由于您没有使用 ARC，因此您似乎在多个地方泄漏了内存。通过在之前没有释放价值的情况下不断分配，你正在创造你的泄漏。这是一篇关于内存管理的好文章。[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

检查以确保我已注释的那些点被正确释放，然后再次检查，如果您正在添加的 15 个过滤器中的每一个都有两个潜在的泄漏点，那么您正在创建可能是 30 个泄漏点。

编辑：我还为您添加了两个潜在的修复程序，但请确保您正确管理您的内存，以确保您在其他地方没有任何问题。

```
//--Potentially leaking here--
sourcePicture = [[GPUImagePicture alloc] initWithImage:self.m_imageView.image smoothlyScaleOutput:YES];

//--This may be leaking--     
GPUImageBrightnessFilter *bright=[[GPUImageBrightnessFilter alloc]init];              
[bright setBrightness:0.4];

GPUImageFilter *sepiaFilter = bright; 
//--Done using bright, release it;
[bright release];                           
[sepiaFilter prepareForImageCapture];
[sepiaFilter forceProcessingAtSize:CGSizeMake(640.0, 480.0)]; // This is now needed to make the filter run at the smaller output size
[sourcePicture addTarget:sepiaFilter];
[sourcePicture processImage];
UIImage *sep=[sepiaFilter imageFromCurrentlyProcessedOutputWithOrientation:3];

self.m_imageView.image=sep;
[sourcePicture removeAllTargets];
//--potential fix, release sourcePicture if we're done --
[sourcePicture release]; 
```

# php - 连接表 INSERT 语句

> ID：14022772
> 
> 赞同：0
> 
> 时间：2012-12-24T14:51:43.833
> 
> 标签：php, html, join, phpmyadmin

我有 3 张桌子。tbl_info、tbl_trainings 和 tbl_infotrainings，其中 tbl_infotrainings 用于连接 tbl_info 和 tbl_trainings。

tbl_trainings 接受多个复选框值。tbl_trainings 包含：

```
+------+-----------+
|  id  |  training |
+------+-----------+ 
```

tbl_infotrainings 包含：

```
+------+-----------+---------------+
|  id  |  info_id  |  training_id  |
+------+-----------+---------------+ 
```

我的问题是插入新信息时。这是我使用的代码：

用于插入 tbl_info 的 id（工作正常）

```
$sql3 = "INSERT INTO tbl_infotrainings (info_id) (SELECT id FROM tbl_info)"; 
```

用于插入 tbl_training 的 id（有错误）

```
$sql4 = "INSERT INTO tbl_infotrainings (training_id) (SELECT id FROM tbl_trainings)"; 
```

数据库中所需的输出将是：

```
+------+-----------+------------+
|  id  |  info_id  |  training  |
+------+-----------+------------+
|  1   |    1      |     1      |
+------+-----------+------------+
|  2   |    1      |     2      |
+------+-----------+------------+
|  3   |    1      |     3      |
+------+-----------+------------+ 
```

这是完整的代码：

```
if($_POST["Submit"]=="Submit"){
$sql1="INSERT INTO tbl_info VALUES ('NULL', '$fname', '$mname', '$lname', '$street', '$barangay', '$city', '$number', '$month', '$day', '$year', '$status' , '$spouse', '$dependent')";
$result1=mysql_query($sql1);
$sql3 = "INSERT INTO tbl_infotrainings (info_id) (SELECT id FROM tbl_info)";
$result3=mysql_query($sql3);
$sql4 = "INSERT INTO tbl_infotrainings (training_id) (SELECT id FROM tbl_trainings)";
$result4=mysql_query($sql4);
    for ($i=0; $i<sizeof($checkbox);$i++){
$sql2="INSERT INTO tbl_trainings VALUES ('NULL', '".$checkbox[$i]."')";
$result2=mysql_query($sql2);    
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:07:42.290

不要`'NULL'`用作（我假设）id 的文本值`AUTO_INCREMENT`——只需使用`NULL`关键字。

```
...
    $sql1 = "INSERT INTO tbl_info VALUES (NULL, '$fname', '$mname', '$lname', '$street', '$barangay', '$city', '$number', '$month', '$day', '$year', '$status' , '$spouse', '$dependent')"; // NULL not 'NULL'
    ...
    $sql2 = "INSERT INTO tbl_trainings VALUES (NULL, '".$checkbox[$i]."')"; // NULL not 'NULL'
... 
```

# iphone - 为 5.0 准备 iOS 应用程序并在 iPhone 和 iPad 上可用

> ID：14022775
> 
> 赞同：0
> 
> 时间：2012-12-24T14:52:18.250
> 
> 标签：iphone, ios, xcode, ipad

我正准备将我的第一个 iOS 应用程序提交到应用程序商店，我有两个问题。我已经在这里和苹果开发者文档中搜索了答案。我确定我错过了它，所以如果有人能指出正确的方向，我将非常感激。

1.  我使用的是 Xcode 4.2.1，所以部署目标是 iOS 5.0。我的应用会因为不是 6.0 的目标而被拒绝吗？我应该使用最新版本的 Xcode 吗？

2.  该应用程序是为 iPhone 设计的，但我希望它也可以在 iPad 上使用，并具有 2 倍放大功能。如果我将 Targeted Device Family 更改为 iPhone/iPad，我是否可以在两台设备上提交它以供购买/下载，还是我需要做更多的工作才能使其与 iPad 兼容？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:58:15.080

1.  您的应用不会因为定位到以前的 iOS 版本而被拒绝。事实上，这是一件好事。部署目标只是 iOS 的最低支持版本，这意味着它也可以在较新的版本上运行。我相信很多开发者（包括我自己）选择以 iOS 5 为目标以支持更广泛的设备——以及那些更新固件有点慢的人。

2.  所有 iPhone 应用程序都可以在 iPad 上以放大模式运行。你不必做任何特别的事情。事实上，您不应该更改您的目标设备系列，因为您并没有真正针对 iPad，而只是针对 iPhone。

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:55:17.157

1.  部署目标是支持的**最低**版本。你不会因为你放在那里的东西而被拒绝。

2.  如果目标设备系列是 iPhone，则 iPad 将具有 2 倍放大功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:57:37.670

祝贺你的第一个应用程序！

对于第一个问题，不，部署目标仅定义了您的应用程序支持的最低版本 - 例如，如果您的最低版本为 iOS 5.0，则具有 5.0 及更高版本（包括 6.x）的用户将能够安装该应用程序并使用它。

其次，您无需更改设备目标系列即可在 iPad 上使用放大功能。事实上，通过将其更改为 iPhone/iPad，建议您拥有两个不同“版本”的应用程序，一个用于 iPhone，一个用于 iPad。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:58:27.557

您无需编写任何代码即可使您的应用程序在 iPad 上运行。您的应用程序将作为 iPhone / iPod Touch 应用程序出现在 App Store 中，iPad 用户将能够下载并使用 2 倍缩放。

我建议您提交应用程序并继续编码。这样你将继续编码，你会看到你的应用程序是否被拒绝。如果它被拒绝，您将能够在做大工作之前对其进行更改。

# sql - SQL UPDATE（不能更新超过 1 个字段）

> ID：14022778
> 
> 赞同：1
> 
> 时间：2012-12-24T14:52:31.447
> 
> 标签：sql

```
String sql = `"UPDATE User Set address = '" + address +"' 
and  userType  '" + userType +"' WHERE useridNric = '" + id + "'";` 
```

//这不起作用（2 个字段）。ODBC 状态它缺少运算符。

`String sql = "UPDATE User Set address = '" + address +"' WHERE useridNric = '" + id + "'";`//但这是有效的（1个字段）

希望你们可以为这两个领域提供帮助。一直在尝试使用引号但不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:53:28.750

您应该`AND`用逗号替换`,`以分隔字段分配，否则它是语法错误（如果分配可以解释为比较，则为逻辑错误）：

```
String sql = "UPDATE User Set address = '" + address +
             "',  userType  ='" + userType +
             "' WHERE useridNric = '" + id + "'"; // <<== Rewrite with parameters 
```

不用说，您应该使用参数化 SQL 来避免 SQL 注入攻击的可能性：

```
String sql = "UPDATE User Set address = @address, userType = @userType "+
             "WHERE useridNric = @id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:54:12.400

更新多个字段时，请使用逗号分隔它们：

```
String sql = "UPDATE User Set address = '" + address +
                         "', userType ='" + userType +
           "' WHERE useridNric = '" + id + "'"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T14:54:32.933

用于`,`在更新查询中分隔列，如下所示：

```
 String sql = "UPDATE User Set address = '" + address + 
                "' , userType '" + userType + 
                 "' WHERE useridNric = '" + id + "'"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T14:56:56.120

在用户类型之后你不需要等号吗

```
String sql = "UPDATE User Set address = '" + address +"', userType = '" + userType +"' WHERE useridNric = '" + id + "'"; 
```

# powershell - Powershell 在 Where $_ -like $Var 中扩展变量

> ID：14022780
> 
> 赞同：0
> 
> 时间：2012-12-24T14:52:56.397
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-1.0

好的，我正在尝试执行以下操作：

简化示例：

```
$Var = "MyProduct*MyProduct"
$List += "MyProduct 11 MyProduct"
$List += "YourProduct 11 YourProduct"
$List += "SomethingElse"
$NewVar = $List | Where {$_ -like "$Var"} 
```

我希望扩展 $Var 中的“*”，然后检查它是否像“$_”这样它会识别出 var 中有一个通配符并根据它获得结果..有没有办法做到这一点?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:06:35.673

$list 不是一个数组，每次你添加到它时你实际上是在连接它。您可以从单个项目数组开始，使用一元逗号运算符（这只是一种方法），现在每次添加都会添加一个新的数组项：

```
PS> $List = ,"MyProduct 11 MyProduct"
PS> $List += "YourProduct 11 YourProduct"
PS> $List += "SomethingElse"
PS> $list
MyProduct 11 MyProduct
YourProduct 11 YourProduct
SomethingElse

PS> $List -like $var
MyProduct 11 MyProduct 
```

# actionscript-3 - 如何在 XSD 中使用 complexTypes 设计列表

> ID：14022784
> 
> 赞同：0
> 
> 时间：2012-12-24T14:53:05.630
> 
> 标签：actionscript-3, xsd, schema

我在将 AS3 类转换为 XML 时遇到问题。有一个列表 -**项目：**具有可能类的数组

```
class ImageVO extends BaseSceneElementVO
class ShapeVO extends BaseSceneElementVO 
```

需要转换：

```
<xs:element name="items" type="imageList"/> 
```

在哪里：

```
<xs:complexType name="imageList">
<!-- here i'm hesitate-->
    <xs:choice>
        <xs:element name="Image" type="Image" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="Shape" type="Shape" minOccurs="0" maxOccurs="unbounded" />
    </xs:choice>
</xs:complexType>

    <xs:complexType name="Image">
        <xs:complexContent>
            <xs:extension base="BaseSceneElement">
                <xs:sequence>
                    <xs:element .../>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>

    <xs:complexType name="Shape">
        <xs:complexContent>
            <xs:extension base="BaseSceneElement">
                <xs:sequence>
                    <xs:element .../>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>

    <xs:complexType name="BaseSceneElement">
        ...
    </xs:complexType> 
```

如果我将**ShapeVO**和**ImageVO**放入数组中，我将得到下一个结果

```
<items>
      <Image/>
      <Image/>
      <Shape/>
      <Shape/>
</items> 
```

ig 每个对象都在**Image**和**Shape**中转换。我需要设计 XSD 结构，但我不知道怎么做。

我试着在[这里](http://www.ibm.com/developerworks/xml/library/ws-tip-xsdchoice/index.html)做，但没有意义。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T02:04:32.437

我假设您想要一个与您的类匹配的 XSD，即扩展 BaseSceneElementVO 的多态选择列表；这将与您提供的示例 XML 相匹配。

在您的 XSD 中（您犹豫的部分）：

```
<xs:choice>
    <xs:element name="Image" type="Image" minOccurs="0" maxOccurs="unbounded" />
    <xs:element name="Shape" type="Shape" minOccurs="0" maxOccurs="unbounded" />
</xs:choice> 
```

这是**列表的选择**：`<Image>`元素列表**或**元素列表`<Shape>`- 所以不是混合它们的列表，它将是 only`<Image>`或 only的列表`<Shape>`。但是为了匹配您的类并验证您的示例 XML，您需要一个**选项列表**，如下所示：

```
<xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element name="Image" type="Image" />
    <xs:element name="Shape" type="Shape" />
</xs:choice> 
```

总结使用表达式符号的符号：你有`i*|s*`，但你需要`(i|s)*`。

顺便说一句：您也可以使用*替换组*，但这些不太清楚，有点少见，而且我知道并非所有工具都支持它们。

# javascript - 尝试在 HTML 错误上使用 textContent 时出错。“无法设置未定义的属性‘textContent’”

> ID：14022788
> 
> 赞同：2
> 
> 时间：2012-12-24T14:53:25.247
> 
> 标签：javascript, windows-8, windows-applications

认为我在这里遗漏了一些明显的出血，希望能提供任何帮助。提前致谢。

我有以下代码但是当我运行它时它会中断并说 .textContent 不能应用于 queryString 因为 queryString 是未定义的。

然而，让我感到震惊的是，如果我在这一行之前中断代码并查看 queryString 它存储的是正确的值，即`".titlearea .pagetitle"`. 为什么这不在后续行中翻译？

JSON 对象被转换为返回我希望使用的两个属性的对象。一个名为的属性`termName`和另一个名为的属性`definition`。我想用这些参数的值替换两个 HTML 元素的 textContent。

我已将`termName`和的值存储`definiton`在一个名为 的数组中`content`。我在`for...in`循环中这样做。

然后我想遍历这个数组并用数组中的相关值替换相关的 HTML 元素`content`。这是第二个`for`循环。

我基本上希望该行被解释为：

document.querySelector(".titlearea .pagetitle").textContent = xxxx;

其中 xxxx 是`queryResult[i]`值。

这是完整的代码。

```
var searchTerm = JSON.parse(Result.responseText);
var DefDiv = ".titlearea .pagetitle";
var DescDiv = ".titlearea .pagesubtitle";
var holder = [DefDiv, DescDiv];
var content = [];
var x;

// Push the query into an array
for (x in searchTerm.terms[0].term) {
    content.push(x);
}

var displayResult = function(queryResult) {

    for (var i = 0; i <= holder.length; i++) {
        var queryString = holder[i];

        document.querySelector(queryString).textContent = queryResult[i];
    }
};

displayResult(content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:55:34.697

~~您将此标记为 Windows 8，因此我假设您使用的是某种形式的 Internet Explorer。问题是，某些版本的 IE 不支持`querySelector`或`querySelectorAll`. 我认为这是你的问题。尝试记录这两种方法，看看它说了什么。如果它返回`undefined`，则该浏览器中没有对这些方法的本机支持。~~

* * *

所以事实证明这是因为你在使用`<=`循环终止条件的一部分时循环，而不是`<`我之前指出的，但不确定这是问题的原因。很高兴我能帮上忙。

# haskell - Control.Applicative.Lift 有什么用？

> ID：14022791
> 
> 赞同：21
> 
> 时间：2012-12-24T14:53:39.767
> 
> 标签：haskell, monads, monad-transformers, applicative

我在最近的一篇博文中写到[`transformers`](http://hackage.haskell.org/package/transformers)，有人问“人们使用[Control.Applicative.Lift](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Applicative-Lift.html)做什么？” 我无法回答这个问题，所以我向 StackOverflow 回应了这个问题 - 有什么*用* [`Control.Applicative.Lift`](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Applicative-Lift.html)？

我在包中看到了一个使用它的示例，但我似乎无法完全解析它的作用。有谁知道野外的任何其他例子？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T15:02:07.697

[Lift](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/src/Control-Applicative-Lift.html#Lift)是一个相对较新的贡献：

```
data Lift f a = Pure a | Other (f a) 
```

也就是说，给定一个 functor ，您可以通过与纯值`f`组合来获得一个新的 functor 。`f`

包本身给出了一个例子：

```
-- | An applicative functor that collects a monoid (e.g. lists) of errors.
-- A sequence of computations fails if any of its components do, but
-- unlike monads made with 'ErrorT' from "Control.Monad.Trans.Error",
-- these computations continue after an error, collecting all the errors.
type Errors e = Lift (Constant e)

-- | Report an error.
failure :: Monoid e => e -> Errors e a
failure e = Other (Constant e) 
```

然而，我不知道这个的任何野外用途。

# java - 没有 GUI 的简单 Java 计算器

> ID：14022793
> 
> 赞同：0
> 
> 时间：2012-12-24T14:53:42.790
> 
> 标签：java, command-line-interface, calculator

我正在尝试制作一个可以计算输入总和的计算器。

例子：

我尝试过这样的事情......

```
import java.util.*;

public class Calc {

String sum; 

     public static void main(String[]args){

            Scanner sum = new Scanner(System.in);

            System.out.println("Please enter a sum: ");

            double newsum = Integer.parseInt(sum);  

            sum.close();               

            System.out.println(newsum);

     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:00:59.753

将所有内容都转换为字符串表达式后，您可以使用内置的 javascript 引擎来评估表达式。

```
import java.util.Scanner;
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine;

public class Example {
    public static void main(String[] args) throws Exception {
        System.out.println("Please enter an expression: ");
        String toEval = new Scanner(System.in).next();
        ScriptEngineManager mgr = new ScriptEngineManager();
        ScriptEngine jsEngine = mgr.getEngineByName("JavaScript");
        System.out.println(jsEngine.eval(toEval));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:59:06.827

您可以为此使用 ANTLR。[您可以在此处](http://www.antlr.org/works/help/tutorial/calculator.html)找到示例计算器。

**编辑**

如果您使用 ANTLR，您将来可以**很容易地**添加更多功能，例如括号的使用、一些计算方法（例如 round、sin、cos）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:06:53.047

我不知道你在使用 java 方面有多先进，但如果你是为了好玩、学习和调查以获得最佳解决方案，也许值得考虑一种设计模式：即这种设计模式：http: [//sourcemaking.com/ design_patterns/interpreter](http://sourcemaking.com/design_patterns/interpreter) 至少是为了好玩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:10:17.473

请看看[这篇](http://www.beyondlinux.com/2011/08/07/3-method-to-evaluate-expressions/)有不同表达评估技巧的好文章。它还包含对*Jexel的引用，这在***数学表达式**中已经足够好了，下面是一个简短的示例：

```
JexlEngine jexl = new JexlEngine();
Expression func = jexl.createExpression("x1*x2-x3");
MapContext mc = new MapContext();
mc.set("x1", 5);
mc.set("x2", 3);
mc.set("x3", 2);
System.out.println(func.evaluate(mc)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T15:13:16.367

这不适用于括号，我还没有测试过，但是这样的解决方案可能有效

```
for(int i = 0; i < equation.length; i++) {
    char c = equation.charAt(i);
    if(c == '*' || c == '/') {        // Operators with highest precedence
        double op1 = getNumBeforeIndex(i);
        double op2 = getNumAfterIndex(i, equation);
        double answer;

        switch(c) {                  // Perform sum
        case '*':
            answer = op1 * op2;
            break;
        case '/':
            answer = op1 / op2;
            break;
        }
    equation = replaceSumWithAnswer(i, equation, answer);
    }        
} 
```

然后对 + 和 - 执行相同的操作。

对于 'getNumBeforeIndex' 和 'getNumAfterIndex'，您需要从给定的索引循环，直到找到一个非数字字符。您还必须记住允许小数点和负数。

'replaceSumWithAnswer' 方法必须获取第一个操作数开头的索引，然后是第二个操作数的最后一个索引，然后用答案替换子字符串。

希望这可以为您指明正确的方向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T16:10:26.037

嗯，这是一个简单的问题，但答案有点复杂。**如果不对表达式的语法**做任何假设，您就无法像这样解析表达式。是中缀/后缀/前缀。它使用括号吗？加法是可交换的吗？乘法是左结合还是右结合？* 和 + 符号的实际含义是什么？

在构建计算器时需要做出许多决定，因此 Java 编程语言没有任何开箱即用的评估支持。如果您希望进行具有标准含义的操作，请使用一些库。如果您希望有一些非标准行为，请编写自己的语法。如果您将使用括号，则需要**拉-推自动机**来实现它，可能与**LL1 语法**结合使用。

但是，当你问这种问题时，我想你是 Java 和编程的新手。我不建议您尝试它，您需要一些自动机和语法理论的基础知识。

我在自学Java时也遇到了这个问题，我通过输入程序作为windows计算器解决了这个问题。该程序包含一个汇总当前结果的寄存器，并且在每次操作后程序都会向用户查询下一个结果（您也可以使用非常简单的解析器来做到这一点 - 但请记住，计算器不会识别运算符的优先级）。

# symfony - symfony2 编辑/删除与 FOS 用户相关的实体“团队”时未定义的索引

> ID：14022799
> 
> 赞同：2
> 
> 时间：2012-12-24T14:54:19.413
> 
> 标签：symfony, doctrine

我建立了一个 Symfony2 项目，安装了 Sonata 和 FOS 用户包

我生成了一个扩展 BaseUser 的自定义用户类。这是一个摘录：

```
namespace Application\Sonata\UserBundle\Entity;

use Sonata\UserBundle\Entity\BaseUser as BaseUser;
use Doctrine\ORM\Mapping as ORM;

class User extends BaseUser {
  ..
  /**
   * @ORM\ManyToOne(targetEntity="MyProject\UserBundle\Entity\Team", inversedBy="members")
   * @ORM\JoinColumn(type="integer", name="team_id", referencedColumnName="id", nullable=true)
   */
  protected $team;

  public function setTeam(\MyProject\UserBundle\Entity\Team $team)
  {
     $this->team = $team;
  }

  public function getTeam()
  {
    return $this->team;
  } 
```

我还有一个可以容纳一些用户的实体“团队”。这是一个摘录：

```
class Team {
  /**
   * @ORM\OneToMany(targetEntity="Application\Sonata\UserBundle\Entity\User", mappedBy="team")
   */

  protected $members;

  public function setMembers(\Doctrine\Common\Collections\ArrayCollection $members)
  {
     $this->members = $members;
  }

  public function getMembers()
  {
     return $this->members;
  } 
```

我使用 Sonata Admin 包来做基本的 CRUD。创建一个有一些用户的团队是没有问题的

```
<?php
class TeamAdmin extends Admin {
  protected function configureFormFields(FormMapper $formMapper)
  {
    $formMapper

        ->add('members', 'entity', array(
                'required' => FALSE,
                'class' => 'ApplicationSonataUserBundle:User',
                'property' => 'username',
                'label' => 'Team members',
                'multiple' => TRUE,
            ))
    ;
  } 
```

当我进入团队的编辑屏幕或删除时，问题就出现了。

> 注意：未定义索引：/Users/sven/projects/MyProject/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php 行 1575 中的团队

我阅读了十几个有关此错误的线程，但它们都告诉我我在注释中使用了正确的字段名称和列名称。这是否与扩展 BaseUser 类有关？

对此的任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:43:06.650

您是否放入`$this->members = new ArrayCollection()`了 Team 实体的 __construct() ？

# php - Ajax 响应出错了

> ID：14022801
> 
> 赞同：6
> 
> 时间：2012-12-24T14:54:29.297
> 
> 标签：php, jquery, ajax, zend-framework, post

任务：当我从选择标签客户（我有客户ID）中选择时，它必须将请求输入数据库并返回所有客户字段。然后它必须自动填充一些输入。我尝试制作 ajax+jQuery。阿贾克斯不错。它现在正在工作！

这是JS：

我想通了：

```
<script>
$(document).ready(function() {
    $('#customer_load').change(function() {
        $.ajax({
            url: '<?= $this->url(array('action' => 'ajax', 'controller' => 'baza')) ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                    // list of request parameters 
                    'customer_id':  $(this).attr('value')
            },
            success: function(data) {
                    //alert(data.current_discount);
                    $('#extra_discount').val(data.extra_discount);
                    $('#current_discount').val(data.current_discount);
                    $('#customer_number').val(data.customer_id);
            }
        });
    });
}); 
```

PHP 初始化：

```
$this->_helper->AjaxContext()->addActionContext('add', 'json')->initContext('json'); 
```

阿贾克斯动作：

```
$id= $this->_getParam('customer_id');
$result = $this->_customers->fetchSelected($id);
$this->view->customers = $result;
$this->_helper->json($result); 
```

html:

```
<select name="customer_id" id="customer_load" style="width:300px;">
   <option value="0">Выберите заказчика</option>
      ?php foreach ($this->customers as $cus): ?>
   <option value="<?= $cus['customer_id'] ?>"" <?php if ($cus['customer_id'] == $this->form_data['customer_id']) echo "selected"; ?> ><?= $cus['lastname'] . " " . $cus['name'] ?></option>
   <?php endforeach; ?>
    <option value="new" onclick="NewCustomer()">Новый заказчик</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:49:31.330

从您的帖子很难理解问题是在客户端还是服务器端......在您的第一个示例中，您没有`customer_id`在 ajax 请求中使用，并且您不需要将值转换`Number`为 javascript。

在下面使用 AJAX 请求：

```
$(document).ready(function(){
   $.ajax({
     url: <?= $this->url(array('action' => 'add', 'controller' => 'baza')) ?>,
     type: 'POST',
     dataType: 'json',
     data: {
        // list of request parameters 
        'customer_id': $('select[name=customer_id] option:selected').val(),
     },
     success: function(results){
         // analyze your response and add custom logic
         console.debug(result);
     }
   });
}); 
```

根据您的 PHP 代码，您将事情复杂化了。在操作顶部添加您的检查并在您尝试使其工作时将它们注释掉（这样您可以`baza/add`直接在浏览器中测试），一旦您得到它的工作取消注释和测试。使用[JSON 视图助手](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.json)输出 json。

```
 public function addAction() 
   {
        // checks/validation/etc

        // do some processing...               
        $result = $this->_customers->fetchSelected($id);

        // Send the JSON response:
        $this->_helper->json($result);
   } 
```

# android - Proguard 在导出导出签名的应用程序包时忽略 -assumenosideeffects

> ID：14022803
> 
> 赞同：1
> 
> 时间：2012-12-24T14:55:05.347
> 
> 标签：android, proguard

Ubuntu 12.04

Intellij IDEA 12 社区版

开发工具包 16

安卓 4.1.2

使用一项活动创建了测试项目：

```
public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public void onResume(){
        super.onResume();
        android.util.Log.d("0000", "start MyActivity");
    }
} 
```

**项目属性**

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt

# Project target.
target=android-16 
```

**proguard-project.txt**

```
-assumenosideeffects class android.util.Log {
    public static int d(...);
    public static int w(...);
    public static int i(...);
} 
```

主要目标：从应用程序的发布版本中删除日志，不工作

步骤：构建 -> 生成签名的 APK... 将签名的 apk 安装到设备 LogCat 后显示所有日志：

```
12-24 15:59:08.773: DEBUG/0000(2074): start MyActivity 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:00:23.370

IntelliJ 中的“Build -> Generate signed APK...”选项似乎没有运行 ProGuard，因此它不会优化或混淆应用程序。您可以改为运行“ant release”。

# c# - C# Windows 窗体显示 Facebook 评论

> ID：14022806
> 
> 赞同：1
> 
> 时间：2012-12-24T14:55:16.160
> 
> 标签：c#, winforms, facebook-comments

我想在我的 c# 应用程序中添加[facebook 插件 - 评论。](https://developers.facebook.com/docs/reference/plugins/comments/)（不适用于 asp.net）但是，我无法将生成的 HTML5 编码放入我的程序中的 webBrowser。

```
string fb_comments = "<html><body><div id=\"fb-root\"></div><script>....</script><form id=\"form1\" runat=\"server\"><div class=\"fb-comments\" data-href=\"https://www.facebook.com\" data-width=\"446\" data-num-posts=\"2\"></div></form></body></html>";
DisplayHtml(fb_comments); 
```

你能给我建议什么方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:04:21.867

IMO 你真的不想用 a`WebBrowser`来与 Facebook 集成。他们有一个可以使用的 API。[这是一个教程](http://codesamplez.com/programming/facebook-api-access-token-using-c-sharp)，它将让您开始连接到 API，然后只需利用 API 来获得您想要的东西。

您需要的范围有点广，因为需要更多信息，例如 API 密钥，以及您要访问的确切信息。但这会让你开始。

# javascript - 将事件重新发送到页面

> ID：14022809
> 
> 赞同：2
> 
> 时间：2012-12-24T14:55:44.240
> 
> 标签：javascript, events, mouseevent

我正在做一个大项目，需要将事件重新发送到页面。

让我解释 ：

一个盒子`<div>`在这样的图像`<img>`上：

```
 <div>
   <div id="box"></div>
   <img>
 </div> 
```

一旦用户点击`box`，它会移动到另一个位置，但图像必须同时点击，这两个元素必须同时点击。（解释原因很长）

也许可以将事件重新发送到同一位置，或者可以在当前鼠标位置创建另一个事件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:58:05.043

你可以试试这个：

```
$('selectorA').on('eventType', function(e){
    $('selectorB').trigger(e); // the SAME event
}); 
```

并且没有 jQuery：

```
element.onSomeEvent = function(e){
   otherElement.dispatchEvent(e); // the SAME event
}; 
```

[上的文档`dispatchEvent`](https://developer.mozilla.org/en-US/docs/DOM/element.dispatchEvent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:00:07.000

为什么不调用`click`图像上的方法？

```
function OnclickOfBox()
{
    document.getElementById('imageID').click();
} 
```

如果您需要捕获并传递`event`参数，则可以相当简单地完成。

# javascript - css javascript cookie 记住 div 切换状态

> ID：14022811
> 
> 赞同：0
> 
> 时间：2012-12-24T14:55:55.187
> 
> 标签：javascript, cookies

我对 javascript 相当陌生，似乎在使用 cookie 时遇到了问题。我发现很多帖子都有类似的问题，但是当我开始阅读答案时，我变得越来越困惑。我什至尝试跟随 youtube tuorials，但似乎找不到能正确解释它的人。在过去的 3 个小时里，我一直坚持这一点，我现在不能放弃。

我有一个可以切换为可见或不可见的 div。我为此使用了一个javascript函数。

```
function exp_col(x, y){
 x = document.getElementById(x);
 y = document.getElementById(y);

if (x.style.display == "block") {
    x.style.display = "none";
    y.src = "images/layout/plus.png";
} else {
    x.style.display = "block";
    y.src = "images/layout/minus.png";
}} 
```

当用户切换 div 时，我希望能够记住这一点并保持 div 的状态相同，即使他们转到不同的页面。有人告诉我我需要饼干，但我似乎无法制作一个有效的。我不确定我是否正确理解它们。我知道他们成对存储信息，如名称-值，但我不明白如何使用它来做我想做的事。我在哪里设置cookie？我该如何设置？我如何使用它来做我想做的事？我现在真的很困惑，希望能得到一些帮助。

[切换@ http://hello-world.cu.cc](http://hello-world.cu.cc)的实时示例

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:51:31.153

这是您可能需要的粗略示例

```
<html>
<head>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
   <script type="text/javascript" src="jquery.cookie.js"></script>
    <script type="text/javascript">
        $(function(){
            var toggle=$('.toggle');
            var inner=toggle.find('.inner');
            if($.cookie('divState')=='visible')
                inner.show();
            else
                inner.hide();
            toggle.find('a').click(function(){
                if(inner.is(':visible'))
                    $.cookie('divState', 'hidden');
                else
                    $.cookie('divState', 'visible');
                inner.toggle();
            });
        });
    </script>
    <style type="text/css">
        div
        {
            padding: 2px;
            border: 1px solid #ccc; width: 300px
        }
    </style>
</head>
<body>
    <div class="toggle">
        <a>Click me</a>
        <div class="inner">
            Some text <br />
            Some text <br />
            Some text <br />
            Some text <br />
            Some text <br />
            Some text <br />

        </div>
    </div>
</body>
</html> 
```

单击“单击我”并多次更新页面-您将记住该 div 状态。它存储在 cookie 中。

如果不介意，我使用 jquery。我试图展示的只是工作流程。如果您不能使用 jquery，那么将示例转换为本机 javascript 非常容易。

现场演示 - [http://jsfiddle.net/CQFJ4/](http://jsfiddle.net/CQFJ4/)

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:03:15.503

设置 cookie 很简单：

```
document.cookie="mydiv=block"; 
```

您可以在此处查看有关读取和擦除 cookie 的示例： [http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# c# - 包含所有 Linq to SQL

> ID：14022815
> 
> 赞同：0
> 
> 时间：2012-12-24T14:56:25.137
> 
> 标签：c#, linq-to-sql

> **可能重复：**
> [LINQ 2 SQL 查询不适用于函数调用](https://stackoverflow.com/questions/3770512/linq-2-sql-query-does-not-work-with-a-function-call)

我有以下问题，我需要 Linq to SQL 一个 ContainsAll 方法。但我的代码不起作用......这是代码：这是我的 ContainsAll 方法：

```
public static bool Contains<T>(this IEnumerable<T> coll, IEnumerable<T> items) {
    bool res = true;
    foreach (var item in items) {
        res &= coll.Contains(item);
    }
    return res;
} 
```

这是我调用查询的方法：

```
public List<User> GetAllUsers(int offset, int count, User currentUser) {
    log.Debug("get all users between " + offset + " and " + count);
    IEnumerable<Group> groups = currentUser.Groups;
    var data = from usr in ManagerUser
                where usr.Groups.Contains(groups)
                orderby usr.ID
                select usr;
    return data.Skip(offset).Take(count).ToList();
} 
```

这是我收到的例外：

```
System.NotSupportedException wurde nicht von Benutzercode behandelt.
  HResult=-2146233067
  Message='LINQ to Entities' erkennt die Methode 'Boolean Contains[Group](System.Collections.Generic.IEnumerable`1[Knerdprod.Manager.DatabaseConnection.Group], System.Collections.Generic.IEnumerable`1[Knerdprod.Manager.DatabaseConnection.Group])' nicht, und diese Methode kann nicht in einen Speicherausdruck übersetzt werden.
  Source=System.Data.Entity
  StackTrace:
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.DefaultTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       bei System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       bei System.Data.Objects.ELinq.ExpressionConverter.Convert()
       bei System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
       bei System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
       bei System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
       bei System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
       bei System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       bei System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       bei System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       bei Knerdprod.Manager.DatabaseConnection.DatabaseModelEntities.GetAllUsers(Int32 offset, Int32 count, User currentUser) in c:\Users\Kirk\Documents\Visual Studio 2012\Projects\Azure\Video und Statsmanager\DatabaseConnection\UserModelEntities.cs:Zeile 272.
       bei Knerdprod.Manager.WebServiceDatabaseMapper.Connectors.UserConnector.GetUserList(Int32 offset, Int32 count, User user) in c:\Users\Kirk\Documents\Visual Studio 2012\Projects\Azure\Video und Statsmanager\WebServiceDatabaseMapper\Connectors\UserConnector.cs:Zeile 57.
       bei UserRestService.UserManagementService.GetUserList(String accesstoken, Int32 offset, Int32 count) in c:\Users\Kirk\Documents\Visual Studio 2012\Projects\Azure\Video und Statsmanager\RestServices\User\UserManagementService.svc.cs:Zeile 119.
       bei UserRestService.UserManagementService.GetUserListJson(String accesstoken, Int32 offset, Int32 count) in c:\Users\Kirk\Documents\Visual Studio 2012\Projects\Azure\Video und Statsmanager\RestServices\User\UserManagementService.svc.cs:Zeile 206.
       bei SyncInvokeGetUserListJson(Object , Object[] , Object[] )
       bei System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
       bei System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
  InnerException: 
```

有人有想法吗？

克纳德

# c++ - c++网络/套接字编程

> ID：14022823
> 
> 赞同：-1
> 
> 时间：2012-12-24T14:57:20.650
> 
> 标签：c++, linux, network-programming

我一直在互联网上搜索以找到有关 C++ 套接字编程的教程。我找到了其中的一些，但它们都没有真正帮助我制作我可以使用的服务器。

我希望用 C++ 制作一个可以发送和接收*数据包*的服务器，但是我能找到的所有教程/示例都是关于发送/接收*字符串*的。

我在 C++ 方面的经验一般。我正在使用带有 Ubuntu (Linux) 的计算机。

如果有人可以向我解释我如何制作一个发送/接收*包*而不是字符串的服务器，或者向我指出一个很好的教程来解释我如何，最好是使用 POSIX-api，它会非常棒并且对我有很大帮助。

-小岛

*编辑*

（我显然说的是“包裹”，但我的意思是“包裹”）

所以，假设我想要一个 Java 游戏，比如 MineCraft，并用 C++ 编写它的服务器。根据 MinecraftCoalition，（Java）客户端发送包含数据的“数据包”。我想知道，我如何接收（或解释）这些数据包？

[MineCraft 联盟参考](http://www.wiki.vg/Protocol "MineCraft 联盟参考")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:18:19.503

如果通过*包*你在谈论一个二进制数据块，那么它很简单，但你必须知道你正在发送的架构的[字节序](http://en.wikipedia.org/wiki/Endianness)- 这可能与接收器不同，这可能意味着数据未正确重建。

你最好看看像[Boost.Asio](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)这样的东西，它会大步向前，并且是专门为 C++ 量身定做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:25:39.783

如果你想发送原始数据（一个 char 数组），C 字符串的区别是微妙的（你必须记住终止的 '\0'）。这就是为什么大多数文档不会真正发挥作用的原因。

我的建议是：

1.  选择一种将数据转换为二进制格式的方法（boost::serialize，协议缓冲区是不错的选择，但不是唯一的选择）。
2.  选择一些抽象库，如 boost.Asio 甚至 zmq（同样还有其他选择）。

我不相信（但这是个人观点，可能不共享）大多数用例都需要处理原始套接字，并且一些 C++ 抽象总是令人愉快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:05:02.413

套接字将仅发送和接收字节数组。转换为字符串很容易，因此通常以它为例。您可以将这些字节数组转换为您的包的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:56:22.803

尝试[http://www.linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)获取基本的客户端-服务器教程。

# c# - MongoDB 的序列化设置

> ID：14022825
> 
> 赞同：1
> 
> 时间：2012-12-24T14:57:32.343
> 
> 标签：c#, json, mongodb, serialization

有没有办法只序列化我的对象的私有字段，它在 MongoDB中具有**DataMember属性？**

```
string json = 
    item.ToJson(
        new MongoDB.Bson.IO.JsonWriterSettings() 
        { 
            GuidRepresentation = GuidRepresentation.Standard, 
            Indent = false, 
            OutputMode = MongoDB.Bson.IO.JsonOutputMode.JavaScript 
        }
     ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:04:35.670

要防止公共字段被序列化，请使用[BsonIgnore](http://api.mongodb.org/csharp/1.0/html/0b6cf485-682b-cbdf-25b4-b28401824c78.htm)属性：

```
public class Car
{
    public string Brand;

    public string Model;

    [BsonIgnore]
    public double Price;
} 
```

在上面的示例代码中，当类被序列化时，价格字段将被忽略。

# php - php preg分割一个字符串

> ID：14022828
> 
> 赞同：0
> 
> 时间：2012-12-24T14:57:55.930
> 
> 标签：php, regex, preg-split

我有一个数字字符串，我需要从右边开始将其分成 2 组，但不超过 3 组。

要理解，这 3 组是“铜”、“银”和“金”，起始值是合成货币金额。例如：

10 -> 10 铜

1010 -> 10 银和 10 铜

102030 -> 10 金、20 银和 30 铜

1234567891010 -> 123456789 金 10 银 10 铜

如何在php中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:06:52.913

我只需将 String 转换为 int 就像[这里](http://www.phpf1.com/tutorial/php-string-to-int.html)一样，然后做一些算术运算。

设 x 为数字

```
r1 = x % 10000;
gold = x / 10000;
copper = r1 % 100;
silver = r1 / 100; 
```

所以你有你的所有信息。

where`%`表示取[模](http://php.net/manual/en/language.operators.arithmetic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:15:36.640

使用正则表达式：

```
$items = array('12', '1234', '123456', '1234567891234');

foreach ($items as $item)
{
    echo $item;

    preg_match('/^(?:(?<gold>\d*)(?<silver>\d\d))?(?<copper>\d\d)$/', $item, $result);

    foreach ($result as $key => $value)
    {
        if (is_int($key))
        {
            unset($result[$key]);
        }
    }
    var_dump($result);
} 
```

# javascript - JavaScript/Ajax：如果 XMLHttpRequest() 在 x 秒后失败，则继续

> ID：14022834
> 
> 赞同：0
> 
> 时间：2012-12-24T14:58:07.530
> 
> 标签：javascript, ajax, xmlhttprequest, seconds

[重要的是要注意：我事先做了研究，看到有人问过类似的问题，但没有什么适合我的需要。]

我使用以下 JavaScript/Ajax 代码`tracker`每 120 秒刷新一次 iframe ()。如果由于某种原因刷新失败（例如没有互联网连接），它会将页面重定向到`Tracker2.html`.

```
<script type=text/javascript>
setInterval(function(){
var rq = new XMLHttpRequest();
rq.open('GET', document.getElementById('tracker').src, true);
rq.onreadystatechange = function() {
    if(rq.readyState === 4) {
        if(rq.status === 200) {
        } else {
    window.location.href = "Tracker2.html";
        }
    }
}; 
rq.send(null);
    document.getElementById("tracker").src+="";
},120000);
</script> 
```

我的问题是，使用`XMLHttpRequest`，大约需要 45-60 秒才能“确认”没有互联网连接（= 刷新 iframe 失败），然后它才会重定向到`Tracker2.html`.

理想情况下，我想只等待 5 秒，如果 5 秒后，跟踪器的 iframe 没有响应，则重定向。

基本上，我不需要它等待 45-60 秒来意识到没有互联网连接 - 这是一个内部网络，只需要半秒来确认是否有网络连接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:15:09.613

您可以在我编辑了您的代码的 setInterval 中添加一个 setTimeout。

```
setInterval(function(){
var rq = new XMLHttpRequest();
rq.open('GET', document.getElementById('tracker').src, true);
rq.onreadystatechange = function() {
    if(rq.readyState === 4) {
        if(rq.status === 200) {
            clearTimeout(cancel);
        } else {
            window.location.href = "Tracker2.html";
        }
    }
}; 
rq.send(null);
var cancel = setTimeout(function(){
    window.location.href = "Tracker2.html";
}, 5000);

    document.getElementById("tracker").src+="";
},120000); 
```

# java - 如何在 Spring 中加载资源并将其内容用作字符串

> ID：14022839
> 
> 赞同：66
> 
> 时间：2012-12-24T14:58:37.177
> 
> 标签：java, spring

如何加载 Spring 资源内容并使用它来设置 bean 属性或将其作为参数构造函数传递？

该资源包含自由文本。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2017-12-01T10:51:38.083

在一行中尝试阅读 test.xml：

```
String msg = StreamUtils.copyToString( new ClassPathResource("test.xml").getInputStream(), Charset.defaultCharset()  ); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-24T14:58:37.177

```
<bean id="contents" class="org.apache.commons.io.IOUtils" factory-method="toString">
    <constructor-arg value="classpath:path/to/resource.txt" type="java.io.InputStream" />
</bean> 
```

此解决方案需要 Apache Commons IO。

@Parvez 建议的另一个解决方案，没有 Apache Commons IO 依赖项是

```
<bean id="contents" class="java.lang.String">
    <constructor-arg>
        <bean class="org.springframework.util.FileCopyUtils" factory-method="copyToByteArray">
            <constructor-arg value="classpath:path/to/resource.txt" type="java.io.InputStream" />
        </bean>     
    </constructor-arg>
</bean> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-25T09:40:12.667

只需阅读它：

```
 try {
        Resource resource = new ClassPathResource(fileLocationInClasspath);
        BufferedReader br = new BufferedReader(new InputStreamReader(resource.getInputStream()),1024);
        StringBuilder stringBuilder = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            stringBuilder.append(line).append('\n');
        }
        br.close();
        return stringBuilder.toString();
    } catch (Exception e) {
        LOGGER.error(e);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-24T15:09:55.553

这是一种不使用任何外部库的方法。spring 提供的默认值。environment.properties 文件包含键值对...使用 ${key} 引用每个值

在我的示例中，我保留了数据库道具

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list value-type="org.springframework.core.io.Resource">
            <value>classpath:environment.properties</value>

        </list>
    </property>
</bean>
<bean id="mySQLdataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${JDBC.driver}" />
    <property name="url" value="${JDBC.URL}" />
    <property name="username" value="${JDBC.username}" />
    <property name="password" value="${JDBC.password}" />
</bean> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-12-06T12:30:31.820

2021 年更新。

您可以使用 Spring 的`Resource`接口来获取文本文件的内容，然后使用`StreamUtils.copyToString(resource.getInputStream(), Charset.defaultCharset());`来获取文本。

一个例子如下：

```
 @Value("classpath:appVersionFilePath")
    private Resource resource;

    @GetMapping(value = "/hello")
    public HttpResult<String> hello() throws IOException {
        String appVersion = StreamUtils.copyToString(resource.getInputStream(), Charset.defaultCharset());
        // ...
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-21T08:14:19.477

[daoway 的](https://stackoverflow.com/users/1127650/daoway)回答非常有帮助，按照[Adrian](https://stackoverflow.com/users/1210071/adrian-ber)的评论，我正在添加一个类似于 daoway 的代码的配置片段

```
<bean id="contents" class="org.springframework.core.io.ClassPathResource">
    <constructor-arg value="path/to/resource.txt"/>
</bean> 
```

从你的组件

```
 @Autowired
    private Resource contents;

    @PostConstruct
    public void load(){
        try {
            final InputStream inputStream = contents.getInputStream();
                //use the stream 
            BufferedReader br = new BufferedReader(new InputStreamReader(inputStream ,1024);
            StringBuilder stringBuilder = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                stringBuilder.append(line).append('\n');
            }
            br.close();
     }catch (IOException e) {
            LOGGER.error(message);
     }
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-05T18:15:06.520

**春天**

```
 private String readResource(String fileName){
    ResourceLoader resourceLoader = new DefaultResourceLoader();
    Resource resource = resourceLoader.getResource("resourceSubfolder/"+fileName)
    try{
         Reader reader = new InputStreamReader(resource.getInputStream());
         return FileCopyUtils.copyToString(reader);
    } catch (IOException e){
         e.printStackTrace();
    }
    return null;
    } 
```

# codeigniter - 使用可选参数重新映射 codeigniter 索引方法

> ID：14022845
> 
> 赞同：2
> 
> 时间：2012-12-24T14:58:54.310
> 
> 标签：codeigniter, remap, codeigniter-routing

在我的 codeigniter 控制器中，我只有带有可选参数的索引函数。如果存在参数，我加载一个视图，否则我加载另一个视图。我使用这个 _remap 函数：

```
function _remap($method){
    $param_offset = 2;

    // Default to index
    if ( ! method_exists($this, $method))
    {
        // We need one more param
        $param_offset = 1;
        $method = 'index';
    }

    // Since all we get is $method, load up everything else in the URI
    $params = array_slice($this->uri->rsegment_array(), $param_offset);

    // Call the determined method with all params
    call_user_func_array(array($this, $method), $params);
} 
```

问题是，当我检查索引函数中的参数时，它的值始终等于 0，这是我设置为默认值的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:11:59.367

这是该[`_remap()`](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)函数的原始签名：

```
function _remap($method, $params = array()); 
```

查看`$params`数组而不是使用`URI`库，你就可以开始了。

# git - Git“泄漏”分支？

> ID：14022851
> 
> 赞同：7
> 
> 时间：2012-12-24T14:59:20.297
> 
> 标签：git, version-control, git-branch, branching-and-merging, git-merge

我们通常在新分支上进行功能开发，然后在主分支上进行错误修复。这一次，由于某种原因，其中一个功能分支出现了泄漏，它在不应该出现的情况下被合并回 master。

从截图中，你可以看到我们有特性分支 sms_open 和 121217。121217 应该在我们的 sprint 之后合并到 master 中，然后 sms_open 分支有更长的时间估计，因此需要在未来的版本中推回。我无法弄清楚为什么 sms_open 提交 609129d 被合并回。我看到在 75e845b 发生了不需要的合并，但这样做的开发人员否认 sms_open 被合并回来。有没有办法以任何方式验证这一点？

仅供参考，这里使用的 git 工具是 Mac OS 的 SourceTree。

![源码树截图](../Images/a15d1b7e41ad9ad57e2966a569f42376.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T15:41:53.600

当您从 开始向下追踪绿色线时`121217`，您可以看到它连接到`sms_open`。这意味着历史`121217`基于`sms_open`（它是其父提交之一）。

因此，无论是谁启动了`121217`分支，都基于它`sms_open`而不是`master`（可能是错误的）。这可能是 commit 的作者`e70759c`。

当在 Git 中合并一个分支时，所有从分支到合并的提交，但还不是被合并到的分支的一部分，都将成为结果的一部分。这就是为什么 的提交`sms_open`也被合并的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:10:23.103

该屏幕截图中有一些可疑之处。像“Merge branch 'xxx'”这样的消息是合并到**master**时的默认消息。

有提交 c8cb6 这意味着蓝线是主线。但随后有 75e8 表示黄线是主线。不幸的是，其他消息是匿名的，因此对了解正在发生的事情没有帮助。哪个提交来自哪个开发人员尤其重要。- 在我看来，好像有人在 master 上工作，后来重命名了那个分支。（但我没有足够的细节可以告诉。）

如果历史记录没有意义，则可能涉及快进合并或强制推送，尤其是 ff-merge 是卑鄙的，因为它根本没有记录在历史记录中。

如果您可以访问您的官方 git 存储库，那里的 reflogs 可能会提示您谁推送了什么以及何时推送。

# jquery - 在 jquery 中创建表和标签

> ID：14022856
> 
> 赞同：0
> 
> 时间：2012-12-24T15:00:10.010
> 
> 标签：jquery, html-table

我在 jquery 中有这段代码：

```
$(document).ready(
function () {
    var reservations = [{
        "HotelId": "01",
        "HotelName": "ספא וילג' הוטל",
        "ReservNum": "0166772",
        "Guest Name": "רוני לוי",
        "Room": "323",
        "Type": "SUIT",
        "Rooms": "1",
        "Board": "HBDB",
        "Status": "CN",
        "Pax": "2,0,0,0",
        "Arrival": "07/08/12",
        "Departure": "12/08/12",
        "AgentDesc": "FIT",
        "AgentCode": "FIT",
        "Group": null,
        "Balance": "0",
        "Requests": "",
        "Remarks": "1424 ש ח חצי פנסיון+2טיפולים",
        "Fit/Group": "FIT",
        "ReturnGuestName": "רוני לוי",
        "StatusColor": "LightGreen"
    },
{
    "HotelId": "01",
    "HotelName": "ספא וילג' הוטל",
    "ReservNum": "0166778",
    "Guest Name": "ולדה קאטם",
    "Room": "028",
    "Type": "LOCK",
    "Rooms": "1",
    "Board": "BLUE",
    "Status": "IH",
    "Pax": "2,0,0,0",
    "Arrival": "07/08/12",
    "Departure": "07/08/12",
    "AgentDesc": "מנויים חמת גדר",
    "AgentCode": "001",
    "Group": null,
    "Balance": "0",
    "Requests": "",
    "Remarks": "761 ש ח כ+ט+א*2",
    "Fit/Group": "FIT",
    "ReturnGuestName": "",
    "StatusColor": "LightCoral"
}];

var tbody = $('#reservations tbody');
var props = ["ReservNum", "Guest Name", "Status", "Arrival", "Departure", "Type"];
$.each(reservations, function (i, reservation) {
    var tr = $('<tr>');
    $.each(props, function (i, prop) 
    {
        if (reservation[prop] == "CN") 
        {
            $('<td class="CN">').html(reservation[prop]).appendTo(tr);
        }
        else if (reservation[prop] == "IH")
        {
            $('<td class="IH">').html(reservation[prop]).appendTo(tr);
        }
        else 
        {
            $('<td>').html(reservation[prop]).appendTo(tr);
        }
    });
    tbody.append(tr);
});
}); 
```

在循环中我有这一行：

```
 $('<td class="CN">').html(reservation[prop]).appendTo(tr); 
```

这在 html 中创建了我：`<td class="CN"> CN </td>`

我想更改它，因为我想在 html 中制作这一行： `<td><img class="CN"> CN </td>`

我已经尝试做：

```
$('<td><img class="CN">').html(reservation[prop]).appendTo(tr); 
```

但它不做这项工作。

有人知道我需要在代码中更改什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:04:04.583

```
$('<td><img class="CN" />'+reservation[prop]+'</td>').appendTo(tr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:05:05.190

尝试替换这一行：

```
$('<td class="CN">').html(reservation[prop]).appendTo(tr); 
```

有了这个：

```
 $('<td><img class="CN">').html(reservation[prop]).appendTo(tr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:05:12.040

在函数中添加您想要的标签`html`：

```
$('<td class="CN">').removeClass('CN').html('<img class="CN">'+reservation[prop]).appendTo(tr); 
```

但是这个 HTML 代码是无效的，`img`标签是用来定义图像的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:06:17.140

你能做一个jsfiddle吗？试试这个

```
$('<td><img class="CN">').append(reservation[prop]).appendTo(tr); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-24T15:07:49.790

试试这个：

```
$('td.CN').append('<img class="CN"');
$('td.CN').append.html(reservation[prop]).appendTo(tr); 
```

# mysql - Mysql：沿数据转储数据库

> ID：14022859
> 
> 赞同：39
> 
> 时间：2012-12-24T15:00:13.060
> 
> 标签：mysql, sql, dump

我还想使用 unix 命令行沿表模式和表数据转储我的数据库。

我用了 。

```
mysqldump -d -u root  -p frontend > frontend.sql 
```

但上面的命令只转储模式而不是数据库中的数据。

请帮助我如何将数据库连同数据一起转储。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-24T15:03:35.483

```
backup: # mysqldump -u root -p[root_password] [database_name] > dumpfilename.sql 
```

这会做，

如果您的要求是单独转储数据，请执行此操作，

导出到文件（仅限数据）

```
mysqldump -u [user] -p[pass] --no-create-db --no-create-info mydb > mydb.sql 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-24T15:13:09.193

备份：#

```
mysqldump -u root -p[password] [database_name] > dumpfilename.sql 
```

恢复：＃

```
mysql -u root -p[password] [database_name] < dumpfilename.sql 
```

[参考：] [http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/](http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-12-07T09:16:20.240

你只需`-d`要从你的`mysqldump`命令中删除

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-10T09:20:38.717

mysqldump 提供了许多选项来从您的数据库构建正确的备份：

```
mysqldump [options] db_name [tbl_name ...]
mysqldump [options] --databases db_name ...
mysqldump [options] --all-databases 
```

在这里您可以找到有关如何 mysqldump 的更多详细信息：

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-14T07:04:03.417

从 .sql 转储文件恢复数据库

> mysql -u [yourusername] -p [password] [nameofthedatabase] < /pathtoyoursqldumpfile.sql

使用 mysqldump 从数据库创建备份。

> mysqldump -u [您的用户名] -p [密码] [数据库名称] > /pathtoyoursqldumpfile.sql

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-30T21:18:46.773

你错过了 --no-data=False

例如

mysqldump -d -u root 前端 --no-data=False -p > frontend.sql

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-24T15:02:49.667

我认为您需要的命令将是 mysqldump。尝试以下操作：

```
mysqldump -u root -p -h localhost frontend < frontend.sql 
```

# python - Python 字典很慢（二维哈希表）

> ID：14022864
> 
> 赞同：1
> 
> 时间：2012-12-24T15:01:10.067
> 
> 标签：python, dictionary, hashtable

我想使用二维数组作为哈希表，在 C 中，它就像：
`hash[1][2] = 1`

在 Python 中，我尝试过：

```
hash = {}
hash[1,2] = 1 
```

但事实证明**速度很慢**。

那么如何在 Python 中高效地实现一个二维哈希表呢？

**更新：**

我的程序是一个计算繁重的程序。由于 Python dict 动态分配内存，我可以看到程序在运行时正在等待内存分配，而 CPU 使用率时而低时而高。

C 风格的二维数组应该没问题，但我不知道如何在 Python 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:03:58.477

您的代码是否正常取决于您的用例。如果你想要类似的东西，即这样你就可以在不接触其他元素的情况下`hash[1][2]`进行迭代，元组键*不是*一个好的解决方案。在这种情况下，你最好这样做：`hash[x]``hash[y]`

 *```
from collections import defaultdict
hash = defaultdict(dict)
hash[1][2] = 1 
```

这使得`hash`包含其他 dicts 的 dict 代替具有复合（元组）键的单个 dict。使用`defaultdict`is 主要是为了避免`hash.setdefault(1, {})`调用创建 subdicts，以防它们尚不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:06:37.063

你用复合键做了1级dict：

```
arr = { (1,2): "a", (1,3): "b" } 
```

另一种选择是 2 级字典：

```
arr = { 1: { 2: "a", 3: "b" }} 
```

还有一个是使用例如 numpy.array()，IIRC 它不能是稀疏的。

scipy 有可能有用的稀疏 marix 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:05:31.790

如果您遵循以下代码，您可以执行类似于 C 的操作：

```
a={}
a[1]={}
a[2]={} 
```

现在 'a' 是模拟您的用例的字典字典。现在您可以将其用作：

```
a[1][1] = anyVal;
a[1][2] = otherVal;
a[2][1] = anotherVal; 
```

等等等等……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:04:02.413

如果可能的键集很小，您还可以使用列表列表。这是一个非常简单的马尔可夫生成器，它使用输入语料库中的字符对来创建新的“句子”。请注意 list-of-lists 的初始化`markov_pairs`，这是使用 Python 列表获取 2D 数组的方式。

```
import random
import string
all_letters = string.ascii_uppercase + string.ascii_lowercase

corpus = """Lorem ipsum dolor sit amet, consectetur 
            adipisicing elit, sed do eiusmod tempor incididunt ut 
            labore et dolore magna aliqua. Ut enim ad minim veniam, 
            quis nostrud exercitation ullamco laboris nisi ut 
            aliquip ex ea commodo consequat. Duis aute irure dolor 
            in reprehenderit in voluptate velit esse cillum dolore 
            eu fugiat nulla pariatur. Excepteur sint occaecat 
            cupidatat non proident, sunt in culpa qui officia 
            deserunt mollit anim id est laborum."""
# normalize all spaces to single spaces
corpus = ' '.join(corpus.split())

# initialize 2-D array for sequence tally
markov_pairs = [[0]*256 for i in range(256)]

# make sure every letter and space has at least *some* probability of following
# any other letter
for sublist in markov_pairs:
    for i in range(len(sublist)):
        if chr(i) in all_letters+' ':
            sublist[i] += 1

# pairwise iterate over input corpus, updating markov pairs with observed pairs
it = iter(corpus)
last = next(it)
for c in it:
    markov_pairs[ord(last)][ord(c)] += 10000
    last = c

# function to guess a next character, given a starting character, based on the
# frequencies found in the input corpus
def getNext(pairs, from_):
    probs = pairs[ord(from_)]
    num = random.randint(0,sum(probs))
    # reorder probs so highest weights are up front
    for p,c in sorted(((p,chr(i)) for i,p in enumerate(probs) if p),reverse=True):
        num -= p
        if num <= 0: break
    return c

# generate some new text based on the corpus
for i in range(20):
    ret = []
    last = random.choice("ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    while last in (all_letters+' '):
        ret.append(last)
        last = getNext(markov_pairs, last)
    print ''.join(ret) 
```

版画（有点像拉丁和图雷特综合症的混合体）：

```
NEx quite eria nalorunorein ulag Utalidor eniqum atet
SPllalalad nsiqudont intret
RCve ollat rim don epored lonidolid im cuatempt esepiaent furiutautr lit m vehenise vex nst
Wveta cet at mp icur e co anorepit pidomodor ng ala
Lorurim
Fm dorisseiuimondedor nid lunor
HJcupter Excarcuro don itaboffuitese cosensest emm cim e ct vonut s cosudodisir
Habocinim issit nia iat uininolla iatere e a aulict catenipa pont
Sgiteps a t cor
PRRfinsmabommo dupagnit norer olulaboi mipit
Exearicat ites e ngn ptrequmpa n uiuia imema cuause dont
Ex inod in amost met
Ae s cutes ia
CKx fint m e cor olllulalicun sedoreuipa ciuam
Oorolatrenor cum a is d Dum e edocipit m cimont eum lliofinsit aret am elorellisterexereminidit elolititresuntexelimomp poisudinisenorute a abolor ex ont
BZt ret taenorenat miqururcon Duit sea ca vexexeserurisulollat
Tlit aboceda qupriut m cualllupip cad d s dect
Ohet em uidid iam it d edollat a ssicaruir idor d unon n e e colaum funsiabontiataboressusia ffise Dum vororeruisedor redeit aupos cat epom ipt
GDust
Hyalorunofit d qur enser 
```*

# r - 日志答案的差异

> ID：14022870
> 
> 赞同：1
> 
> 时间：2012-12-24T15:02:00.287
> 
> 标签：r

我试图在 R 中尝试对数对数图，但是当我获取特定值的对数时，我没有得到一致的答案，例如：

```
In R:
> log(192.4)
[1] 5.259577

On my phone:
2.28

On a web scientific calculator
I get: 2.2842050677018 
```

是什么导致了 R 和其他计算器之间的不一致？哪一个是正确的使用？

[我用的科学计算器](http://web2.0calc.com/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:05:47.883

与许多其他编程语言一样，R 计算自然对数，即使用`e`带函数的基数`log()`。如果你想要以 10 为底的对数，你需要使用`log10()`：

```
log(192.4)
[1] 5.259577

log10(192.4)
[1] 2.284205 
```

这以及更多内容都记录在帮助中`?log`

# objective-c - 绘制自定义上下文

> ID：14022872
> 
> 赞同：1
> 
> 时间：2012-12-24T15:02:11.033
> 
> 标签：objective-c, ios, drawing, core-graphics, graphicscontext

我实际上是在尝试在视图上画线。为了在每次绘制之前不清除上下文，我知道我必须创建自己的上下文才能绘制它。

我找到了这种创建上下文的方法：

```
CGContextRef MyCreateBitmapContext (int pixelsWide,
                                int pixelsHigh)
{
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    bitmapBytesPerRow   = (pixelsWide * 4);
    bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

    colorSpace = CGColorSpaceCreateDeviceRGB();
    bitmapData = calloc( bitmapByteCount, sizeof(int) );
    if (bitmapData == NULL)
    {
        fprintf (stderr, "Memory not allocated!");
        return NULL;
    }
    context = CGBitmapContextCreate (bitmapData,
                                     pixelsWide,
                                     pixelsHigh,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedLast);
    if (context== NULL)
    {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
        return NULL;
    }
    CGColorSpaceRelease( colorSpace );

    return context;
} 
```

但我的问题是：我怎样才能使用这个上下文来避免每次都清理我的视图？

**编辑** *（在@Peter Hosey 的回答之后）* **：**

我尝试做类似的事情：

```
- (void)drawRect:(CGRect)rect {
    // Creation of the custom context
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    CGContextDrawImage(context, CGRectMake(0, 0, self.frame.size.width, self.frame.size.height), cgImage);
    CGImageRelease(cgImage);
    if (isAuthorizeDrawing) {
         [self drawInContext:context andRect:rect]; // Method which draw all the lines sent by the server
         isAuthorizeDrawing = NO;
    }

    // Draw the line
    [currentDrawing stroke];
} 
```

我还将 UIView 的 clearsContextBeforeDrawing 设置为 NO。

当我缩放时（isAuthorizeDrawing 设置为 YES 以重绘所有正确缩放的线条），线条不会消失，但是当我尝试绘制新线条时（isAuthorizeDrawing 设置为 NO 以便在每次 setNeedsDisplay 调用时不重绘所有内容），所有的线条都消失了，绘图速度真的很慢..：/

难道我做错了什么 ？

**编辑 2**

这是我的绘图方法：

```
-(void)drawInContext:(CGContextRef)context {
    for (int i = 0; i < self.drawings.count; ++i) {
        Drawing* drawing = [self.drawings objectAtIndex:i];

        CGContextSetStrokeColorWithColor(context, drawing.colorTrait.CGColor);
        CGContextSetLineWidth(context, 1.0);

        CGContextMoveToPoint(context, [[drawing.points objectAtIndex:0] CGPointValue].x * self.zoomScale, [[drawing.points objectAtIndex:] CGPointValue].y * self.zoomScale);

        for (int i = 1; i < drawing.points.count; i++) {
            CGContextAddLineToPoint(context, [[drawing.points objectAtIndex:i] CGPointValue].x * self.zoomScale, [[drawing.points objectAtIndex:i] CGPointValue].y * self.zoomScale);
        }

        CGContextStrokePath(context);
    }
}

-(void)drawRect:(CGRect)rect {
    if (isRedrawing) {
        [self drawInContext:UIGraphicsGetCurrentContext()];
        isRedrawing = NO;
    }

    [[UIColor redColor] set];
    [currentPath stroke];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:33:24.463

您的上下文为您保留了所有绘图。

当您绘制到由视图提供的上下文时（即，在 内`drawRect:`），视图要么每次都在创建一个新的上下文，要么它已经删除了上下文的内容，例如摇动 Etch-a-Sketch。无论哪种方式，你都会得到一个（至少实际上）没有被绘制的上下文。

当您绘制到上下文中时，假设*您*在两次使用之间没有做任何事情来擦除它，那么您绘制到其中的所有内容都会堆积起来。

这样做的一个后果是，您需要注意绘制状态，如当前的转换矩阵、剪切路径等，因为在绘制会话之间没有重置这些参数。这可能很有用，具体取决于您在做什么，但无论哪种方式，您都需要了解它并做出相应的计划。

大概你想不时地向用户展示你到目前为止所绘制的内容（即，何时`drawRect:`发生）。为此，[请让位图上下文创建其内容的图像](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGBitmapContext/Reference/reference.html#//apple_ref/c/func/CGBitmapContextCreateImage)并将[该图像绘制](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextDrawImage)到[当前（UIKit 提供的）上下文中](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsGetCurrentContext)。

或者，只是[告诉视图在每次绘制之前不要清除自己](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/clearsContextBeforeDrawing)，并且根本不用费心管理自己的位图上下文。

# iphone - 我在一个视图上有两个表，一个是自定义表，另一个是简单表如何在两个表上显示数据？

> ID：14022876
> 
> 赞同：0
> 
> 时间：2012-12-24T15:02:53.460
> 
> 标签：iphone, objective-c, ipad, cocoa-touch, ios-simulator

我有两个表视图。

一种是简单的，另一种是定制的。我通过 JSON 获取值。我一次发出一个 JSON 请求，但是当我同时调用简单表和自定义表的 JSON 请求时，它会在自定义表上显示数据，但之后突然加载简单表，但它隐藏了第一个自定义表的数据桌子。

有谁知道为什么会这样？

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    if (tableView==self.table) {
        return 1;
    }
    else if(tableView==self.clearificationTable){
        return 1;
    }
    return 0;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if (tableView==self.table) {
        return [reminderArrayList count];
    }
    else if(tableView==self.clearificationTable) {
        return [taskListArray count];
    }
    return 0;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath{
    if (tableView==self.table) {
        UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:@"MyCell"];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
        if (cell == nil){
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
        }
        cell.textLabel.text=[reminderArrayList objectAtIndex:indexPath.row];
        newCell=cell;
     }
     else if (tableView==self.clearificationTable) {
        static NSString *CellIdentifier=@"Cell";
        StaffDahsBoardCustom *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell==nil) {
            [[NSBundle mainBundle]loadNibNamed:@"StaffDahsBoardCustom" owner:self options:nil];
        }
        cell=custom;
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
        cell.taskListlbl.text=[taskListArray objectAtIndex:indexPath.row];
        cell.tasktypelbl.text=[tasktypeArray objectAtIndex:indexPath.row];
        cell.completelbl.text=[NSString stringWithFormat:@"%@",[completeArray objectAtIndex:indexPath.row]];
        cell.incompletelbl.text=[NSString stringWithFormat:@"%@",[incompleteArray objectAtIndex:indexPath.row]];
        cell.nalbl.text=[NSString stringWithFormat:@"%@",[NaArray objectAtIndex:indexPath.row]];
        cell.returnlbl.text=[ReturneDateArray objectAtIndex:indexPath.row];
        newCell=cell;        
    }
    return newCell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:07:05.503

使用表的标签值。

```
firstTable.tag=1;

secondTable.tag=2; 
```

# java - iTEXT 中的错误（java 版本）

> ID：14022883
> 
> 赞同：-3
> 
> 时间：2012-12-24T15:03:58.573
> 
> 标签：java, encryption, cryptography, itext, digital-signature

当我尝试编写此代码时，它编译得很好，但在运行时会出错（我使用的是 iTEXT 5.3.5 -> [http://sourceforge.net/projects/itext/files/](http://sourceforge.net/projects/itext/files/)）：

```
PdfPKCS7 pkcs7 = af.verifySignature(name); 
```

错误是：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/bouncycastle/tsp/TimeStampTokenInfo
    at com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2312)
    at com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2265)
    at VerifyDoc2.<init>(VerifyDoc2.java:23)
    at VerifyDoc2.main(VerifyDoc2.java:35)
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.tsp.TimeStampTokenInfo
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 4 more
Java Result: 1 
```

有没有人知道我做错了什么。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:13:44.623

尝试将充气城堡库添加到您的类路径中。例如

*   bcprov-jdk16-1.46.jar
*   bctsp-jdk16-1.46.jar

[您可以从这里](http://www.bouncycastle.org/java.html)下载 bouncycastle 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:17:33.670

抛出此异常是因为`iText`在您的类路径中找不到必要的 BouncyCastle-Classes。

您需要添加 BouncyCastle 库，您可以[在此处下载](http://www.bouncycastle.org/latest_releases.html)

另外，请将您的一些 SO 问题标记为已回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:40:21.790

这是答案：

我必须使用下面这个 jar ------

bcpkix-jdk15on-1.47.jar bcprov-jdk15on-1.47 bctsp-jdk15-1.46.jar itextpdf-5.3.5.jar junit-4.11.jar xmlworker-1.2.1.jar

我不知道为什么会发生以及为什么会解决它，但它确实有效……如果有人从中得到帮助，请给我加号。我投票失败，现在我不能再发布任何主题了。

# jquery - 显示 jQuery 对话框的有效方法

> ID：14022884
> 
> 赞同：0
> 
> 时间：2012-12-24T15:03:58.507
> 
> 标签：jquery

我网站上的用户目前通过单击一个链接来查看一个人的详细信息，该链接将他们重定向到一个新页面，该页面使用 PHP 和 MySQL 显示该人的详细信息。我想更改它，以便在单击链接时，他们会在链接旁边显示的弹出窗口中看到详细信息。

在 jQuery 工具提示中显示这些细节将过于局限，因为最终我打算让用户与弹出窗口中的内容进行交互。

当页面加载太慢时，还会为每个链接添加一个对话框，因为页面上可能有 30 个或更多链接。页面完成加载前 2 秒或更长时间的延迟是不可接受的。我网站上的链接通常是在循环中创建的。

是否可以仅为单击的链接创建一个对话框？

我目前正在研究一种使用 jQuery Ajax 以及 jQuery 位置和对话框函数的方法。我希望解决方案尽可能轻量和简单，并避免任何页面刷新。

下面的代码显示了我想出的。当使用 Ajax 从数据库请求数据时，此代码甚至无法发布输入数据。

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
</head>
<body>
<?php
// Shows the links
for($id=0;$id<=80;$id++){
    echo("<a id='link$id' onclick=showPopup($id)>Click me at $id</a><br/>");
}
?>
<script>
function showPopup(id){
    // Gets input needed to return database records for the link clicked
    var myObj={};
    myObj["database"]="ajaxdb";
    myObj["sql"]="select * from names"; // A where clause here would be specific to the link
    var input = JSON.stringify(myObj);
    // Gets the data to show in the dialog using Ajax
    $.post('return_rows.php',input,function(data){
        // Data would be formated here before being assigned to the div
        // ....
        // ....
        $('div#dialog'+id).html(data);
    });
    // Shows the dialog using jQueryUI
    $(function() {
        $('a#link'+id).ready(function(){
        $('#dialog'+id).dialog();
            // Positions opened dialog relative to the clicked link.
            $('#dialog'+id).dialog('widget').position({
                my: 'right top',
                at: 'left bottom',
                of: 'a#link'+id
            });
        });
    });
    document.write("<div id='dialog'+id title='Title of dialog'+id></div>");
}
</script>
</body>
</html> 
```

任何帮助获得有效的解决方案将不胜感激。但是请注意，我既不熟悉 Ajax 也不熟悉 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:10:53.967

您可以使用[AJAX](http://api.jquery.com/jQuery.ajax/)为特定链接请求数据。让 URL 返回一个[JSON](http://www.json.org/)对象，然后使用 jQuery 将其附加到正文中。

# 例如

```
function get_user_information(){
    $.ajax({
    url: url_that_returns_user_data.php,
    dataType: json,
    success: function(data){
        // parse the json data and append it to the body here
    },
    return false; // To avoid reloading the page
});
} 
```

# sql-server - 如何将这种日期字符串转换为 sql server 上的大整数？

> ID：14022896
> 
> 赞同：-2
> 
> 时间：2012-12-24T15:05:11.447
> 
> 标签：sql-server, date, casting, bigint

好的，这就是我将日期保留为字符串的愚蠢方式

```
23.12.2012 21:24:31 
```

现在在一个选择查询中，我想将它们转换为 BigInt 并进行搜索

```
casted version : "20121223212431" 
```

像下面

```
select * from myTable where cast(datestring as bigint) > 20111223212431 
```

我如何在 sql server 上将这种字符串转换为 BigInt ？

编辑 - 为什么这个查询不起作用

```
 select (convert(datetime,LastMoveTime,104)) as myTime from myTable
where myTime < DATEADD(day,-366,GETDATE()) 
```

**错误：列名“myTime”无效。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:08:18.023

首先，最好只修复要使用的架构`DATETIME`。

如果你不能这样做，你可以使用一个`CONVERT`表达式来转换`DATETIME`。你只需要找到正确的格式。（如果您的字符串值尚未采用[受支持的格式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，您可能需要做一些工作......）毕竟，这就是值 - 为什么要使用 BigInt 呢*？*

请注意，如果您更正架构以使用适当的数据类型，则它可能比必须在整个地方进行转换更有效*。*例如，字符串列上的索引对这种查询没有多大帮助，而如果您可以将其更改为索引`DATETIME`值，则索引可以完成大部分工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:20:01.627

您不应该这样做，请参阅 John Skeet 的帖子，但是

```
declare @dt datetime
select @dt='20121223 21:24:31'

Select Cast(Convert(Varchar(25),@dt,112)+Replace(Convert(Varchar(25),@dt,108),':','') as BigInt) 
```

# facebook - 如何使用 facebook auth 保护 wcf 服务？

> ID：14022897
> 
> 赞同：2
> 
> 时间：2012-12-24T15:05:27.110
> 
> 标签：facebook, wcf, security, authentication, oauth

我正在构建移动应用程序（使用 PhoneGap/Cordova）。为了使用我的应用程序，客户端必须通过 facebook 进行身份验证。

我想使用该 facebook 身份验证机制来保护我的 wcf 服务。我正在考虑这样使用它：

首次注册：

1.  客户端登录 facebook 并获取访问令牌
2.  客户端将其访问令牌发送到我的 wcf 服务
3.  在我的服务中，我扩展了访问令牌（以获取长期令牌），并将其存储在数据库中，并为新成员创建一条新记录
4.  我使用扩展令牌和成员 ID 向客户端发送响应
5.  客户端将令牌和成员 ID 存储在其移动设备中

当客户端进入应用程序时：

1.  客户重定向到 faceebok
2.  如果 facebook 的身份验证失败（可能是由于各种原因），他会重新授权我的应用程序。
3.  Facebook 使用新令牌将客户端重定向回我的应用程序
4.  如果令牌未更改（与设备中存储的令牌相比），则中断。
5.  客户端向我的 wcf 服务发送旧令牌 + 新令牌
6.  wcf 将接收到的旧令牌与 db 中存储的令牌（使用成员 ID）进行比较以识别客户端，如果不相等则引发异常。
7.  在我的服务中，我扩展了访问令牌（以获得长期令牌），并将其存储在数据库中
8.  我使用扩展令牌向客户端发送响应
9.  客户端用其移动设备中的新令牌覆盖旧令牌

对于从我的移动应用程序到我的 wcf 服务的每个请求：

1.  客户端发送请求，它传递的第一个参数是他存储在设备中的 facebook 令牌。第二个参数是成员ID。
2.  wcf 将接收到的令牌与 db 中存储的令牌（使用成员 ID）进行比较以识别客户端，如果不相等则引发异常。
3.  处理请求

最后，我使用 facebook 令牌来识别客户。此外，我可以使用 SSL 在网络级别进行保护。这是一个好方法吗？谢谢您的帮助。

# c - Vxworks RTP 项目中 pthread_create 的 ENOSYS 错误

> ID：14022915
> 
> 赞同：1
> 
> 时间：2012-12-24T15:06:59.727
> 
> 标签：c, vxworks

下面是我用来在 Vxworks 的 RTP 项目中测试线程功能的简单代码

```
#define NUM_THREADS 2 

void *PrintHello(void *threadid) 
{ 
    long tid = 0;   
    tid = (long)threadid;
    printf("Hello World! It's me, thread #%ld!\n", tid);
    pthread_exit(NULL); 
    return NULL;
} 

int main ()
{ 
  int rc;   
  long t;   
  pthread_t threads[NUM_THREADS];   
  pthread_attr_t attr;

  pthread_attr_init(&attr);

  for(t=0; t<NUM_THREADS; t++)  
  {     
    printf("In main: creating thread is : %ld\n", t);   
    rc = pthread_create(&threads[t], &attr, PrintHello, (void *)t); 
    if (rc) printf("ERROR; return code from pthread_create() is : %d\n", rc);   
    //pthread_join(threads[t],NULL);    
  } 
  pthread_exit(NULL);   
  return 0;
} 
```

输出 ：

```
In main: creating thread is : 0 ERROR; return code from pthread_create() is : 71 
In main: creating thread is : 1 ERROR; return code from pthread_create() is : 71 
```

错误“71”点对应于“ENOSYS”错误代码，根据搜索发现 Vxworks 内核中未启用 POSIX 线程组件。

[vxWorks pthreads](https://stackoverflow.com/questions/7760846/vxworks-pthreads)帖子也与此相关。但我不确定我需要在哪个文件中启用“INCLUDE_POSIX_PTHREAD_SCHEDULER”组件（configRtp.mk/*.cdf 文件）。请提供有关如何将 POSIX 线程组件添加到内核的详细步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-11T12:44:57.520

您可以通过修改内核配置将组件添加到内核。最简单的方法是在工作台中打开 VxWorks Image Project，然后双击“Kernel Configuration”。这应该会启动组件配置编辑器，如下所示。

您可以使用“查找”（至少在 Windows 上为 Ctrl-F）按组件名称进行搜索。

[![组件配置](../Images/0d6c11dd8e48d7244374f73354962198.png)](https://i.stack.imgur.com/TBdEs.png)

# jaxb - GlassFish 的 JAXB 实现

> ID：14022917
> 
> 赞同：0
> 
> 时间：2012-12-24T15:07:37.830
> 
> 标签：jaxb, glassfish

我在尝试将我的 Web 应用程序部署到 GlassFish 3.1.2 时遇到了问题。看起来有 JAXB 库冲突：我的应用程序使用 v.1 JAXB 实现，而 AFAIK，GlassFish 3.1.2 包含它自己的 v2 JAXB 实现。这种重叠会导致部署期间失败吗？在这种情况下如何行动？

异常消息：

> 原因：rpt.engine.util.EngineException：javax.xml.bind.JAXBException：提供程序 com.sun.xml.bind.ContextFactory_1_0_1 无法实例化：javax.xml.bind.JAXBException - 带有链接异常：[java.lang .NoSuchFieldError: theInstance]
> - 带有链接异常：[javax.xml.bind.JAXBException - 带有链接异常：[java.lang.NoSuchFieldError: theInstance]] 在 javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:160)在 javax.xml.bind.ContextFinder.find(ContextFinder.java:308) 在 javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:446) 在 javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:409 ) 在 javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:313)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:16:18.030

这看起来像是与 Glassfish 3.1.2 捆绑的 JAXB 版本（即 2.2.5）存在问题。
您可以尝试手动升级捆绑的 JAXB 版本：

*   [在http://jaxb.java.net/](http://jaxb.java.net/)下载新版本（完整包）

*   备份文件**/GLASSFISH_HOME/glassfish/lib/jaxb-osgi.jar**和**/GLASSFISH_HOME/glassfish/lib/endorsed/jaxb-api-osgi.jar**

*   将文件**jaxb-osgi.jar**和**jaxb-api-osgi.jar**从**new-version.zip/lib 提取**到**/GLASSFISH_HOME/glassfish/lib/**和**/GLASSFISH_HOME/glassfish/lib/endorsed/**

# javascript - 当我调用 JSON 数组时返回未定义？

> ID：14022920
> 
> 赞同：1
> 
> 时间：2012-12-24T15:08:02.883
> 
> 标签：javascript, arrays, json

我正在尝试在另一个 JSON 数组中创建一个 JSON 数组。
我认为我做对了，但是当我调用第二个数组时，它返回未定义。

JSON文件：

```
var files = [
    {"Files" : [
        {"file1" : "file1"},
        {"file2" : "file2"},
        {"file3" : "file3"}
    ]},

    {"Texts" : [
        {"file4" : "file4"},
        {"file5" : "file5"},
        {"file6" : "file6"}
    ]}
]; 
```

当我尝试此命令时，它可以工作-

```
console.log(files[0]); // Works, returns the array 
```

但是当我尝试这个命令时它不起作用 -

```
console.log(files[0][1]); // Not working, return undefined 
```

我希望这将返回 file2。

我做错了什么？

编辑：脚本从服务器获取 JSON 文件，脚本需要遍历 JSON。因此，将名称（文件、文本、文件 1、文件 2 等）视为未知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:09:30.547

```
console.log(files[0]["Files"])  // will return array with file 1-3
console.log(files[0]["Texts"])  // will return array with file 4-6 
```

或者

```
console.log(files[0].Files)  // will return array with file 1-3
console.log(files[0].Texts)  // will return array with file 4-6 
```

在你的例子`files[0][1]`中，像这样为 json 工作

```
var files = [
    [
        {"file1" : "file1"},
        {"file2" : "file2"},
        {"file3" : "file3"}
    ],
    [
        {"file4" : "file4"},
        {"file5" : "file5"},
        {"file6" : "file6"}
    ]
]; 
```

编辑
在这种情况下，您可以使用下一个`for-loop`

```
for (var key in files[0])
{
   files[0][key] // here key is "Files", this will return files 1-3       
}​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T15:09:49.270

这：

```
console.log(files[0]); 
```

不记录**数组，****它**是数组的第一个元素的对象。要获取内部数组，您必须获取该对象的“文件”属性：

 **```
console.log(files[0].Files[1]); 
```

这将记录的不仅仅是字符串“file2”，而是整个对象，`{ file2: "file2" }`. 在 JavaScript 中，具有字符串属性名称的对象属性不能通过数字索引访问。也就是说，在对象中：

```
{ "foo": "hello world" } 
```

根本没有`[0]`财产。JavaScript 中的数组也是对象，可以具有以字符串命名的属性，但它们与数字索引属性的集合是分开的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T15:10:06.790

数组位于 Files 属性内：

```
console.log(files[0].Files[0]);
console.log(files[0].Files[1]); 
```**

# e-commerce - 货到付款激活仅管理员（未启用前端）- Magento？

> ID：14022921
> 
> 赞同：7
> 
> 时间：2012-12-24T15:08:12.517
> 
> 标签：e-commerce, magento-1.7, magento-1.6, magento

我现在正在使用 magento 一段时间。我想知道是否可以启用**货到付款选项**仅供管理员使用。我想用它作为商店取货...

因此，这种方式只能在管理面板中为那些想要商店取货的人创建手动订单。

我不希望它显示在 Magento 前端商店中。

大家可以帮帮我吗？？？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T15:38:46.337

有很多方法可以实现这一点，但它们需要熟悉 Magento 生态系统。我不鼓励使用 CSS 向最终用户隐藏它，因为稍微了解 CSS 的人可以轻松地取消隐藏它并免费获得购买您的产品的权限。

我还建议不要覆盖核心文件（即使您没有编辑它们），因为这将导致将来出现升级问题。

## 坚实的方式：

我最喜欢的方法是启用 Check/Money order 方法，并为自己创建一个小模块，像这样。前面的考虑在这里都没有任何影响。

### /app/etc/modules/Company_Module.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Module>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Payment/>
            </depends>
        </Company_Module>
    </modules>
</config> 
```

### /app/code/local/Company/Module/etc/config.xml

```
<?xml version="1.0"?>
<config>
<modules>
    <Company_Module>
        <version>0.0.1</version>
    </Company_Module>
</modules>

<global>
    <models>
        <Company_Module>
            <class>Company_Module_Model</class>
        </Company_Module>
    </models>
    <events>
        <payment_method_is_active>
            <observers>
                <company_module>
                    <type>singleton</type>
                    <class>Company_Module/Observer</class>
                    <method>paymentMethodIsActive</method>
                </company_module>
            </observers>
        </payment_method_is_active>
    </events>
</global>

</config> 
```

### /app/code/local/Company/Module/Model/Observer.php

```
<?php

class Company_Module_Model_Observer
{
    public function paymentMethodIsActive($observer)
    {
        $instance = $observer->getMethodInstance();
        $result = $observer->getResult();

        if ($instance->getCode() == "checkmo") {
            if (Mage::app()->getStore()->isAdmin()) {
                $result->isAvailable = true;
            } else {
                $result->isAvailable = false;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T11:58:15.173

要隐藏在前端，必须将受保护的 $_canUseCheckout = false 设置为 false；到您的付款方式。

要在管理端显示，必须将受保护的 $_canUseInternal = true 设置为 true；到您的付款方式。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-24T15:19:11.490

一种非常简单的方法，但可能不是最干净的方法：

1.  为商店启用**货到付款**。
2.  使用 CSS 从前端隐藏它。

使用 CSS 来实现这一点会向公众隐藏选项，但不会阻止熟悉 CSS 的 Web 开发人员找到它并下达货到付款订单 - 尽管我想不出有人会故意这样做的任何原因因为他们不会通过下订单来取得太多成就。

**编辑 ：**

要隐藏货到付款，请将其添加到您的 CSS：

```
input#p_method_cashondelivery { display: none; }
label[for=p_method_cashondelivery] { display: none; } 
```

# arrays - 将一个简单的整数数组绑定到 MVC3 中的 DropDownList

> ID：14022923
> 
> 赞同：0
> 
> 时间：2012-12-24T15:08:15.483
> 
> 标签：arrays, asp.net-mvc-3, integer, html.dropdownlistfor, html-select

我的视图模型如下：

```
public class ClassificationCalculatorIndexViewModel
{
    public bool PlacementYear { get; set; }
    public int[] Credit { get; set; } // List of Integers
    public int selectedCredit { get; set; } // Somewhere to store selected integer
    public List<YearOfStudy> StudyYear { get; set; }
} 
```

我正在努力将 Integer 数组绑定到我的 Razor 视图中的 DropDownList 辅助对象，我正在执行以下操作：

```
@Html.DropDownListFor(Model.selectedCredit, Model.Credit) 
```

但是遇到错误，我尝试了谷歌搜索，但没有发现任何相同的性质:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:19:59.723

我认为您需要下拉以`selectedCredit`填充来自`Credit`财产的物品：

```
@Html.DropDownListFor(m => m.selectedCredit, new SelectList(Model.Credit)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:14:19.960

您需要`SelectList`使用`int[]`.

# ios - iOS 6：链接器警告/图标错误

> ID：14022925
> 
> 赞同：1
> 
> 时间：2012-12-24T15:08:23.963
> 
> 标签：ios, testing, frameworks, icons

我正在完成我的第一个应用程序'，在构建时没有警告，并且在我的 iPhone 上正确运行。我尝试设置一个图标，在我的应用程序摘要中添加图片 57x57 .png 和 114x114 .png ，但它只出现在模拟器上，而不出现在我的 iPhone 上！我试图继续使用 info.plist，但我没有更改任何内容：/ 我有一个警告，我不知道如何解决：

“警告：复制捆绑资源构建阶段包含此目标的 Info.plist 文件‘iNiveau PRO/iNiveau PRO-Info.plist’。”

其次，我尝试运行测试，并得到 4 个错误（当我只是在我的 iphone 上运行时它们没有出现），我也不知道如何修复：

> 架构 i386 的未定义符号：“_AVMediaTypeVideo”，引用自：-[NiveauViewController setTorchOn:] in NiveauViewController.o “_CGAffineTransformMakeRotation”，引用自：-[MenuViewController viewDidLoad] in MenuViewController.o -[NiveauViewController viewDidLoad] in NiveauViewController.o -[ LenkhoViewController.o“_OBJC_CLASS_$_AVCaptureDevice”中的 LenkhoViewController viewDidLoad]，引用自：NiveauViewController.o 中的 objc-class-ref ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）

因为我看到它可能是 framekors 的问题，但我在我的文件中正确添加了框架，例如在 NiveauViewController.h 中：--> #import < AVFoundation/AVFoundation.h >

非常感谢 ！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:41:26.580

包括框架头文件是不够的。您应该选择您的项目目标，选择摘要，并在“链接框架和库”部分添加 AVFoundation 框架以进行链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:47:50.440

您需要将您的项目实际链接到这些框架。在 Xcode 左侧的“Project Navigator”中单击您的项目，选择您的目标，选择摘要选项卡，然后向下滚动，直到看到“Linked Frameworks and Libraries”部分。单击加号图标。

看起来您需要添加 AVFoundation.framework 和 QuartzCore.framework。

![在此处输入图像描述](../Images/850d1a66d62dcb8118f90db5cda18d2f.png)

那么就图标困境而言，没有更多信息很难说，但是您是否验证过您的图标被命名为“Icon.png”和“Icon@2x.png”并且它们真的是57x57和114x114？

# javascript - 处理多个 x-tag

> ID：14022928
> 
> 赞同：1
> 
> 时间：2012-12-24T15:08:42.370
> 
> 标签：javascript, x-tag

***注意：*** 此问题基于旧版本的 Mozilla x-tag。

在我的项目中，我使用的是[Mozilla x-tag](http://x-tags.org/)。我创建了这个名为 x-master 的标签。我的 index.html 中有两个这样的标签：

```
<div id="page-one" data-role="page">
<x-master id="x-one" data-src="source1"></x-master>
</div>
<div id="page-two" data-role="page">
<x-master id="x-two" data-src="source2"></x-master>
</div> 
```

xtag 组件如下所示：

```
(function(window, document, undefined) {
var jsonurl;

xtag.register('x-master', {
onCreate : function() {
jsonurl = this.getAttribute('data-src');
},
methods : {
getContent : function(){
$.getJSON(jsonurl, function(data){ console.log(jsonurl); };
}
}
})(this, this.document); 
```

**我的问题：** 当我为 id x-one 调用 getContent 方法时，它会打印：source2\. 我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T15:31:12.837

我建议使用最新版本的 X-Tag - 规范在标准化过程的后期阶段发生了变化，该版本已经很旧了。现在为 X-Tag 提供的 API 将与最终规范兼容，并且现在可以在所有主要浏览器中使用，一直到 IE9：http: [//x-tags.org/](http://x-tags.org/)

以下是使用 X-Tag 的内置功能优化后的代码：

```
xtag.register('x-master', {
    accessors: {
        src: {
            attribute: {},
            set: function(src){
                // Using the attribute <--> accessor auto-linkage feature of 
                // X-Tag, both your created lifecycle event and getContent method
                // become unnecessary. If src is present on creation, or changed
                // at any time, your setter is automatically executed. Simply set
                // the src property/attribute and it will do your AJAX call.
                $.getJSON(src, function(){ ... })
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:12:26.760

在这部分：

```
onCreate : function() {
jsonurl = this.getAttribute('data-src'); 
```

每次 x-master 初始化时，jsonurl 都会从当前 x-master 分配一个值。这就是为什么你总是得到最后一个元素的 data-src 的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T15:19:21.840

使`jsonurl`对象的 a 属性，而不是所有 x-master 共享的变量。

```
var props = function() {
    var jsonurl;

    return { 
        onCreate: function() {
            jsonurl = this.getAttribute('data-src');
        },

        methods: {
            getContent: function() {
                $.getJSON(jsonurl, function(data) {
                    console.log(jsonurl);
                };
            }
        }
    };
};

xtag.register('x-master', props()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T10:14:31.770

解决这个问题的方法是使用 jsonurl 创建一个对象。感谢[Florian Margaine](https://stackoverflow.com/questions/14022928/handling-multiple-x-tags#answer-14023031)让我找到了正确的解决方案。

这该怎么做：

> ```
> (function(window, document, undefined) { 
> function props() {
>     this.jsonurl; 
> }
> 
> xtag.register('x-master', {
>     onCreate : function() {
>        this.props = new props();
>        this.props.jsonurl = this.getAttribute('data-src');
> },
>     methods : {
>         getContent : function(){
>              $.getJSON(this.props.jsonurl, function(data){ console.log(jsonurl); };
>         }
> }
> })(this, this.document); 
> ```

# opengl - GLSL 属性重复

> ID：14022929
> 
> 赞同：0
> 
> 时间：2012-12-24T15:08:47.787
> 
> 标签：opengl, attributes, glsl

如何使用除数“重复” GLSL 属性？例如，我有一个立方体（用于实例渲染），我想为 6 个面（12 个三角形）中的每一个设置法线。如果我将属性除数设置为 2，并且我有 4 个实例，它只会在数组中提供的 2 之后停止采用法线！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:06:12.047

实例化不是强制 OpenGL 允许您使用任意属性索引渲染网格的方法。您只能通过实例化渲染重复属性，并且只会重复每个不可分割的属性。

如果要给每个面法线，则该面内的每个顶点必须具有相同的法线，重复。

# python - pyserial 读取烧瓶中的串口（可能使用 gevent）

> ID：14022933
> 
> 赞同：2
> 
> 时间：2012-12-24T15:09:00.563
> 
> 标签：python, flask, pyserial, server-sent-events

我正在构建一个需要读取（并继续读取）它正在运行的机器的串行端口的网络服务器。
目的是能够读取条形码扫描仪，并使用服务器发送的事件来使用读取的条形码更新浏览器。

我正在使用烧瓶来做到这一点。我浏览了一下，有些实现只需要烧瓶，有些人说我需要一个像 Gevent 这样的异步库，还有一些人甚至说我需要 Gevent 和某种队列，比如 Redis 或 RabbitMQ。

我试图将我的代码基于我在 stackoverflow 上找到的一个非常简单的[示例](https://stackoverflow.com/questions/12232304/how-to-implement-server-push-in-flask-framework)。我大部分时间都在工作，但我遇到了一些问题；

*   在 Chrome 中存在跨域错误，通过添加 Access-Control-Allow-Origin 标头，我可以让它在 FireFox 中工作，但 Chrome 仍然无法工作。只有FF支持SSE跨域对吗？我需要它来支持 CORS，因为浏览器需要从单独的机器加载条形码数据。
*   每条消息后，浏览器都会在控制台中显示条形码，但随后会关闭连接，大约 3 秒后才再次打开。这似乎起源于 Flask，它给了我数据然后就停止了。
*   另外，我想知道这将如何在负载下执行。我的意思是，flask 为文本/事件流 mimetype 保持连接打开。如果有多个客户端连接，过一会会不会阻塞flask，因为所有的连接都会饱和？

我的代码如下（为清楚起见缩短了）

服务器端：

```
from flask import Flask
import flask
import serial

app = Flask(__name__)
app.debug = True

def event_barcode():
    ser = serial.Serial()
    ser.port = 0
    ser.baudrate = 9600
    ser.bytesize = 8
    ser.parity = serial.PARITY_NONE
    ser.stopbits = serial.STOPBITS_ONE
    ser.open()
    s = ser.read(7)
    yield 'data: %s\n\n' % s

@app.route('/barcode')
def barcode():
    newresponse = flask.Response(event_barcode(), mimetype="text/event-stream")
    newresponse.headers.add('Access-Control-Allow-Origin', '*')
    return newresponse

if __name__ == '__main__':
    app.run(port=8080, threaded=True) 
```

客户端：

```
 <!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv=Content-Type content="text/html; charset=utf-8">
    <title>TEST</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script>

        $(document).ready(function(){
            if (!!window.EventSource) {
                console.log('SSE supported.');
                var source = new EventSource('http://localhost:8080/barcode');

                source.addEventListener('message', function(e) {
                  console.log(e.data);
                }, false);

                source.addEventListener('open', function(e) {
                  console.log('Connection was opened.');
                }, false);

                source.addEventListener('error', function(e) {
                  if (e.readyState == EventSource.CLOSED) {
                    console.log('Connection was closed.');
                  }
                }, false);

            } else {
                console.log('SSE notsupported.');
            }
        });

    </script>
</head>

<body>

</body>
</html> 
```

我在这里查看了更多信息：http: [//www.socketubs.net/2012/10/28/Websocket_with_flask_and_gevent/](http://www.socketubs.net/2012/10/28/Websocket_with_flask_and_gevent/) [http://sdiehl.github.com/gevent-tutorial/#chat-server](http://sdiehl.github.com/gevent-tutorial/#chat-server)

我希望有人能解决我的问题，并可能为我指出一些解决方案，解决跨域和 3 秒延迟问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:53:45.257

以下是一些可能会有所帮助的要点（我一直打算基于 'django-sse' 发布类似'flask-sse' 的东西）：

[https://gist.github.com/3680055](https://gist.github.com/3680055)

[https://gist.github.com/3687523](https://gist.github.com/3687523)

也很有用 - [https://github.com/jkbr/chat/blob/master/app.py](https://github.com/jkbr/chat/blob/master/app.py)

“RedisSseStream”类使用 redis 作为后端在线程之间进行通信（尽管 gevent 可以做到这一点？），并“监听”redis 发布事件。

虽然“PeriodicSseStream”不需要redis，但它无法在烧瓶线程之间进行通信，即使用来自另一个响应的信息；如果没有 redis 之类的东西，单独的线程（流和为另一个用户服务的线程）无法通信。

正如 Janus 所说，生成器只返回一个结果——它必须产生多个结果，在这种情况下，它必须封闭在一个循环中，在每次串行轮询后无限产生；您还需要决定什么会限制轮询，它会受时间限制（定期轮询）还是其他限制（例如，如果读取串行端口已经花费了一段时间）？

我不太了解 sse 的性能，或者它的支持程度（以及跨域），但是如果您考虑[socket.io](http://socket.io/)，您可以使用[它](http://warmcat.com/_wp/2010/11/01/libwebsockets-html5-websocket-server-library-in-c/)来提高 web-socket[性能吗？](http://drewww.github.com/socket.io-benchmarking/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T14:41:43.523

回答我自己的问题

1.  似乎目前确实只有 Firefox 支持 SSE 的 CORS -> [文章](http://blog.iamnoahcooper.com/2012/05/server-sent-events-theys-niiice/)
2.  在 Janus Troelsen 的帮助下，我想出了如何保持连接打开并跨行发送多个条形码（见下面的代码）
3.  从性能上看，我似乎只能建立一个连接，但这可能是因为我只有一个串口，后续连接无法再打开串口。我认为它可以在烧瓶中工作，但是使用 socketio 和 gevents 的东西会表现得更好，因为它更适合这项工作。[这里](http://vinyll.scopyleft.fr/socketio-with-gevent-using-flask/)有一篇有趣的文章。

对于代码：

```
import flask
import serial
from time import sleep

app = flask.Flask(__name__)
app.debug = True

def event_barcode():
    messageid = 0
    ser = serial.Serial()
    ser.port = 0
    ser.baudrate = 9600
    ser.bytesize = 8
    ser.parity = serial.PARITY_NONE
    ser.stopbits = serial.STOPBITS_ONE
    ser.timeout = 0
    try:
        ser.open()
    except serial.SerialException, e:
         yield 'event:error\n' + 'data:' + 'Serial port error({0}): {1}\n\n'.format(e.errno, e.strerror)
         messageid = messageid + 1
    str_list = []
    while True:
        sleep(0.01)
        nextchar = ser.read()
        if nextchar:
            str_list.append(nextchar)
        else:
            if len(str_list) > 0:
                yield 'id:' + str(messageid) + '\n' + 'data:' + ''.join(str_list) + '\n\n'
                messageid = messageid + 1
                str_list = []

@app.route('/barcode')
def barcode():
    newresponse = flask.Response(event_barcode(), mimetype="text/event-stream")
    newresponse.headers.add('Access-Control-Allow-Origin', '*')
    newresponse.headers.add('Cache-Control', 'no-cache')
    return newresponse

if __name__ == '__main__':
    app.run(port=8080, threaded=True) 
```

因为我想支持多种浏览器，所以 SSE 不是我现在要走的路。我将研究 websockets 并尝试从中工作。

# android - Android Cipher 加密/解密

> ID：14022934
> 
> 赞同：4
> 
> 时间：2012-12-24T15:09:04.993
> 
> 标签：android, encryption

我正在使用密码来加密和解密消息：

```
public String encrypt(String string) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException {
  cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec);
  byte[] stringBytes = string.getBytes("UTF-8");
  byte[] encryptedBytes = cipher.doFinal(stringBytes);
  return android.util.Base64.encodeToString(encryptedBytes, android.util.Base64.DEFAULT);
}

public String decrypt(String string) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException {
  cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);
  byte[] stringBytes = android.util.Base64.decode(string.getBytes(), android.util.Base64.DEFAULT);
  byte[] decryptedBytes = cipher.doFinal(stringBytes);
  return new String(decryptedBytes,"UTF-8");
} 
```

出于某种原因，尽管我使用 Base64 对字符串进行编码和解码，但我仍然收到此错误：

> javax.crypto.IllegalBlockSizeException：最后一个块在解密中不完整

我究竟做错了什么？

**编辑：**

这是我的 JSONObject - 我正在尝试解密“m”：

```
{"m":"Cu7FR2be0E6ZP2BrZaLU2ZWQSfycNg0-fPibphTIZno\r\n"} 
```

奇怪的是，该错误仅出现在 Android 中。我的服务器是用 Java 编写的，我使用的是 Apache Base64 编码器，它工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:34:13.573

您的代码对我来说似乎没问题，您可以尝试在解码之前添加“UTF-8”。

```
byte[] stringBytes = android.util.Base64.decode(string.getBytes("UTF-8"), android.util.Base64.DEFAULT); 
```

**编辑**

这是一个示例安全实用程序类，它使用 BouncyCastle 和基于密码的 AES 加密进行加密/解密。

```
public class SecurityUtils {

public static final String KEY_DERIVATION_ALGORITHM = "PBKDF2WithHmacSHA1";

private static final String CIPHER_ALGORITHM = "AES/CBC/PKCS5Padding";

private static final String DELIMITER = "]";

private static final int KEY_LENGTH = 256;

private static final int ITERATION_COUNT = 1000;

private static final int SALT_LENGTH = 8;

private static SecureRandom random = new SecureRandom();

static {
    Security.addProvider(new org.spongycastle.jce.provider.BouncyCastleProvider());
}

public static String encrypt(Context context, String plaintext)
        throws Exception {
    byte[] salt = generateSalt();
    return encrypt(plaintext, getKey(salt, getPassword(context)), salt);
}

private static String encrypt(String plaintext, SecretKey key, byte[] salt)
        throws Exception {
    try {
        Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM, "BC");

        byte[] iv = generateIv(cipher.getBlockSize());
        IvParameterSpec ivParams = new IvParameterSpec(iv);

        cipher.init(Cipher.ENCRYPT_MODE, key, ivParams);
        byte[] cipherText = cipher.doFinal(plaintext.getBytes("UTF-8"));

        if (salt != null) {
            return String.format("%s%s%s%s%s",
                    new String(Base64.encode(salt)), DELIMITER, new String(
                            Base64.encode(iv)), DELIMITER, new String(
                            Base64.encode(cipherText)));
        }

        return String.format("%s%s%s", new String(Base64.encode(iv)),
                DELIMITER, new String(Base64.encode(cipherText)));
    } catch (Throwable e) {
        throw new Exception("Error while encryption", e);
    }
}

public static String decrypt(Context context, String ciphertext)
        throws Exception {
    return decrypt(ciphertext, getPassword(context));
}

private static String decrypt(String ciphertext, String password)
        throws Exception {
    String[] fields = ciphertext.split(DELIMITER);
    if (fields.length != 3) {
        throw new IllegalArgumentException("Invalid encypted text format");
    }
    try {
        byte[] salt = Base64.decode(fields[0]);
        byte[] iv = Base64.decode(fields[1]);
        byte[] cipherBytes = Base64.decode(fields[2]);

        SecretKey key = getKey(salt, password);
        Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM, "BC");
        IvParameterSpec ivParams = new IvParameterSpec(iv);
        cipher.init(Cipher.DECRYPT_MODE, key, ivParams);
        byte[] plaintext = cipher.doFinal(cipherBytes);
        String plainrStr = new String(plaintext, "UTF-8");

        return plainrStr;
    } catch (Throwable e) {
        throw new Exception("Error while decryption", e);
    }
}

private static String getPassword(Context context) {

    return "My secret password";
}

private static SecretKey getKey(byte[] salt, String password)
        throws Exception {
    try {
        KeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt,
                ITERATION_COUNT, KEY_LENGTH);
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(
                KEY_DERIVATION_ALGORITHM, "BC");
        byte[] keyBytes = keyFactory.generateSecret(keySpec).getEncoded();
        return new SecretKeySpec(keyBytes, "AES");
    } catch (Throwable e) {
        throw new Exception("Error while generating key", e);
    }
}

private static byte[] generateIv(int length) {
    byte[] b = new byte[length];
    random.nextBytes(b);

    return b;
}

private static byte[] generateSalt() {
    byte[] b = new byte[SALT_LENGTH];
    random.nextBytes(b);

    return b;
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T15:27:54.363

您需要先转换 Base-64。

CODEED = encrypt(Base64.encode(MYSTRING, Base64.DEFAULT));

MYSTRING = Base64.decode(解密(CODEED), Base64.DEFAULT);

这是一个链接[http://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html](http://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html)

# javascript - onmouseover="document.getElementById 用于多个 div

> ID：14022939
> 
> 赞同：0
> 
> 时间：2012-12-24T15:09:41.110
> 
> 标签：javascript, html

我有一个快速的问题。我正在制作某种简单的图片库。我有一个 div 里面有一张图片。当我将 div 悬停时，另一个小 div 将从 display:none 变为 displaye:block，因此它以一半不透明度显示在图像上方。此 div 包含有关图像的一些信息

编码：

```
<div class="box col6" 
onmouseover="document.getElementById('onhover').style.display = 'block';" 
onmouseout="document.getElementById('onhover').style.display = 'none';">

<div id="onhover" style="display:none;">THIS IS THE DIV THAT WILL SHOW UP ON HOVER OF BOX COL6</div>

<img src="img/final.png" width="762" height="601">
</div> 
```

这一切都很好。但现在我想对带有图像的多个 div 执行此操作。仅仅复制这个 div 是行不通的，因为 onmouseover 和 out 不知道他们要更改哪个“onhover” div。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:12:44.513

使用一些 CSS 魔法：

```
<div class="box col6">
    <div class="onhover">
        THIS IS THE DIV THAT WILL SHOW UP ON HOVER OF BOX COL6
    </div>
    <img src="img/final.png" width="762" height="601">
</div> 
```

CSS

```
.box .onhover {display: none;}
.box:hover .onhover {display: block;} 
```

演示：http: [//jsfiddle.net/maniator/SLfK7/](http://jsfiddle.net/maniator/SLfK7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:13:41.717

复制粘贴代码后，为所有悬停 div 设置不同的 id。

例子：

```
<div class="box col6" 
onmouseover="document.getElementById('onhover1').style.display = 'block';" 
onmouseout="document.getElementById('onhover1').style.display = 'none';">

<div id="onhover1" style="display:none;">THIS IS THE DIV THAT WILL SHOW UP ON HOVER OF BOX COL6</div>

<img src="img/final.png" width="762" height="601">
</div>

<div class="box col6" 
onmouseover="document.getElementById('onhover2').style.display = 'block';" 
onmouseout="document.getElementById('onhover2').style.display = 'none';">

<div id="onhover2" style="display:none;">THIS IS THE DIV THAT WILL SHOW UP ON HOVER OF BOX COL6</div>

<img src="img/final.png" width="762" height="601">
</div> 
```

现在可以使用了。有唯一的ID。

# ios - Cocos2d 触摸调度程序导致对象保留

> ID：14022940
> 
> 赞同：4
> 
> 时间：2012-12-24T15:09:42.610
> 
> 标签：ios, cocos2d-iphone, touch, dealloc

cocos2d 有问题。我做了一个接收触摸的类。类是一个子类，`CCLayer`看起来`init`像这样：

```
- (id)initWithFrame:(CGRect)frameSize
{
    self = [super init];
    if (self)
    {
        frame = frameSize;
        size = frame.size;
        origin = frame.origin;
        [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
    }
    return self;
} 
```

所以一切都保持简单。`frame`,`size`并且`origin`是类变量，但现在这无关紧要。所以我注册了我的班级女巫`touchDispatcher`，这让我可以处理触摸。触摸处理是这样完成的：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    return YES;
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    //Some touch logic which i need.
} 
```

并在`dealloc`我发布所有保留的信息并从`touchDispatcher`. 但`dealloc`从未调用过。如果我不注册，`touchDispatcher`就会`dealloc`被正确调用。如果重要的话，这个类作为一个子类添加到另一个 CCLayer 子类中，并且在那个类中`dealloc`我发布了这个。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T15:40:39.297

要澄清 giorashc 的答案，请执行此操作。：

```
- (void)onEnter {
    [super onEnter];
    [[CCDirector sharedDirector].touchDispatcher addTargetedDelegate:self priority:0 swallowsTouches:YES];
}

- (void)onExit {
    // called before the object is removed from its parent
    // force the director to 'flush' its hard reference to self
    // therefore self's retain count will be 0 and dealloc will
    // be called.
    [super onExit];
    [[CCDirector sharedDirector].touchDispatcher removeDelegate:self];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T15:22:02.077

您自己说过：触摸调度程序保留了您的图层对象，因为您将其用作代理`addTargetedDelegate`。**因此，您必须从其他地方**从调度程序中取消注册您的层，否则最终版本将永远不会被调用（因此`dealloc`不会被调用）。

简而言之：如果委托是同一个对象，请不要从 dealloc 方法中取消注册触摸调度程序

# php - php中的base64编码/解码

> ID：14022948
> 
> 赞同：3
> 
> 时间：2012-12-24T15:10:21.843
> 
> 标签：php

我已经在我的站点中实现了 cookie 机制。我想存储的所有 cookie 都在一个数组中，它们的 TTL、值、名称......

当我想设置cookie时，我序列化标签，然后我gzcompress最后我base64_encode

```
base64_encode(gzcompress(serialize($array))) 
```

我的问题是有时，当我得到 cookie 时

```
$_COOKIE[name] 
```

base64_encoded 字符串全部为小写字符。

所以我的问题是： - 所有字符都可能是小写格式（base64_encoded）

或者也许我做错了什么，但问题并没有一直出现，我无法重现该错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T15:48:55.753

是的，Base64 编码的字符串可以全部小写。这种情况发生的概率（对于随机输入数据，压缩数据非常近似）约为 (36 / 64) ^(4 *N* / 3)，其中*N*是以字节为单位的输入长度，因此 4 *N* / 3 是近似值输出的长度（不包括填充）。

碰巧，(36 / 64) ⁴ ≈ 0.100113 非常接近 1 / 10，因此，一个非常好的近似值，随机 Base64 字符串不包含大写字母的概率每四个下降 10 倍个字符的长度。

因此，例如，一个随机的 8 个字符的 Base64 字符串（对应于一个随机的 6 个字节的输入）有大约 1% 的机会不包含大写字母，而一个随机的 12 个字符的 Base64 字符串（对应于一个随机 9 字节输入）约为 0.1%，依此类推。

# c# - 尝试在动态生成的 html 标记上应用样式属性

> ID：14022959
> 
> 赞同：0
> 
> 时间：2012-12-24T15:12:15.727
> 
> 标签：c#, asp.net, css, webforms

这是一个已知问题/问题，无法在动态（代码隐藏）生成的 Html 标记上使用硬编码（标准）CSS 样式设置？

在我目前正在处理的项目中，我正在生成 html 标记，针对说未排序列表项的每个元素（...源是数据库查询结果）

出于说明目的，我只会画出这个想法，我认为它已经完成了很多......

```
collection = some sql query results returned  as `List<string>` type

counter  = 0

foreach item in collection 
someHtmlString = String.Format("<li  id='{0}_{1}'> {0}</li> ",  item, counter)
counter ++ 
```

因此，对于进入 for/foreach 循环的每个项目，我正在*制造*一组特定的 css 和 html 属性，通常它被划分为进入循环的列表项的子集，就像在这种情况下通常为每个元素分配一个类，所以碰巧我有*一堆*属性，随着需要更具体的设计甚至更多......其他属性作为javascript事件但主要是样式，

说 10 x css 属性，设置说 3 或 4 种类型的设置，这意味着在我的代码中看到足迹不再那么有趣了

在我现在可以考虑从文件中读取 css 样式设置之前的一步（使用`System.IO`）， **我确实尝试**通过它们所属的位置在样式 .css 文件中应用这些属性，但正如我注意到的那样，这些样式与硬编码的 html 标记相反，**无法将**属性应用于从代码/文件生成的代码。`style.css`

所以我想知道，如果你想避免后面代码中的那一堆行，除了从一个单独的文件中读取它（比如我能想到的 coma sepertaed），然后解析它，还有哪些选择：

说一个*txtfile* - 每行都是 P *​​roperty*， *value*。

就像在字典中一样，因此您可以将其直接从文件中读取/加载到代码中，

```
dictionary<string, string> StyleDict = new dictionary<string, string>();

styleDict.add(styleProperty, some value);
 ...etc' (10 lines like this, x 3 or 4 times , as each could be a css class  i could use) 
```

我想我已经没有想法了，将样式应用于生成的 HtmlMarkup 的正确方法是什么？（是我做错了什么还是已知问题？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:01:49.400

正如 Zack T. 建议的那样，您可以使用他展示的方法应用样式：

`someHtmlString = String.Format("<li id='{0}_{1}' class='listItem'>{0}</li>", item, counter);`

现在您抱怨这些样式不适用。为此，您需要检查定义是否呈现在HTML`Style`标记内的标记下。`Head`或者外部`CSS`文件的链接应该放在您的`Head`标签内。下面的示例代码片段

```
<html>
<head>
<style type="text/css">
    .listItem
    {
        background-color:Red;
    }
</style>
</head>
<body></body>
</html> 
```

# c# - 当我导航到其他页面时，这是更改母版页中超链接颜色的正确方法吗？

> ID：14022960
> 
> 赞同：0
> 
> 时间：2012-12-24T15:12:16.663
> 
> 标签：c#, asp.net, master-pages

当我导航到其他页面时，我正在尝试更改母版页中超链接的颜色。

这是我认为可以工作的母版页 page_load 中的代码。

```
 if(!IsPostBack)
    {
    if(Session["Clicked"]=="HyperLink1"){HyperLink1.Style.Add("color", "#009900")};
    if(Session["Clicked"]=="HyperLink2"){HyperLink2.Style.Add("color", "#009900")};
    if(Session["Clicked"]=="HyperLink3"){HyperLink3.Style.Add("color", "#009900")};
    if(Session["Clicked"]=="HyperLink4"){HyperLink4.Style.Add("color", "#009900")};
    if(Session["Clicked"]=="HyperLink5"){HyperLink5.Style.Add("color", "#009900")};
    } 
```

然后在每个页面中，我在该页面的 page_load 下写了类似的内容。

```
if(!IsPostBack)
  {
      Session["Clicked"]="HyperLink3";
  } 
```

我得到一个“预期的;” 当我运行这个错误。但坦率地说，我尝试了很多来摆脱它。我知道这是非常简单的事情，但我找不到它。这甚至是更改超链接颜色的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:15:55.120

分号用于语句而不是括号

```
 if(!IsPostBack)
{
if(Session["Clicked"]=="HyperLink1"){HyperLink1.Style.Add("color", "#009900");}
if(Session["Clicked"]=="HyperLink2"){HyperLink2.Style.Add("color", "#009900");}
if(Session["Clicked"]=="HyperLink3"){HyperLink3.Style.Add("color", "#009900");}
if(Session["Clicked"]=="HyperLink4"){HyperLink4.Style.Add("color", "#009900");}
if(Session["Clicked"]=="HyperLink5"){HyperLink5.Style.Add("color", "#009900");}
} 
```

这就是为什么你会被期待`;`

ASP 超链接

`<asp:HyperLink id="homelink" CssClass="linkstuff" runat="server">`

```
.linkstuff a:visited{
      color: #009900;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:15:39.140

正确的方法是使用样式表：

```
a:visited {
     color: #009900;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T15:16:08.897

对于常规超链接来说，这似乎是一个巨大的过度杀伤力。你有什么理由不使用 CSS ":visited" 选择器？

在您的 CSS 定义中，添加

```
a:visited
{
color: #009900;
} 
```

# html - css 删除继承的列表样式

> ID：14022965
> 
> 赞同：2
> 
> 时间：2012-12-24T15:13:01.640
> 
> 标签：html, css, html-lists

我有这样的css代码

```
<ul class="simple-list">                                
    <li>
      <ul>
        <li>Paper</li>
        <li>Pen</li>
     </ul>
    </li>
    <li>
      <ul>
        <li>Paper</li>
        <li>Pencil</li>
     </ul>
    </li>
</ul> 
```

现在当我使用这样的风格

```
.simple-list li {
border-bottom: 1px solid #EEE;
display: block;
} 
```

它也会影响所有子 li 元素。有人能告诉我如何让它只影响第一个 li 元素。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:14:14.587

像这样：

```
.simple-list li:first-child { 
```

您可以[在 caniuse.com 上查看对第一个孩子的支持](http://caniuse.com/#search=first-child)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:15:48.810

您是指 .simple-list 的直接 li 子级（即第一级）吗？还是只是第一个？如果只有你想要的直系子女

```
.simple-list > li 
```

对于您想要@Steve Fenton 上面的答案的第一个

# c# - .NET Charting 自定义标签位置

> ID：14022975
> 
> 赞同：2
> 
> 时间：2012-12-24T15:13:46.497
> 
> 标签：c#, asp.net, mschart, axis-labels

有没有办法改变.Net图表中轴标签的位置？我有以下图表： ![在此处输入图像描述](../Images/41be38b97a0c11da7265c9356a02bb7e.png)

现在，我禁用了标签，但我希望它看起来像这样：

![在此处输入图像描述](../Images/94836416a1af445547948ad5196f47e9.png)

有没有办法让它做到这一点？我有自定义标签，我想在图表上使用这些标签。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:32:48.970

从一些研究来看，一种潜在的方法是设置标签的 YValue，例如：

```
<Points>               
  <asp:DataPoint AxisLabel="1" YValues="14" />
  <asp:DataPoint AxisLabel="2" YValues="14" />
  <asp:DataPoint AxisLabel="3" YValues="14" />
<Points/> 
```

或者，这不提供您可以尝试查看[LabelStyle](http://msdn.microsoft.com/en-us/library/dd489245.aspx)的解决方案。

我希望这有帮助！

# css - 位置跟随 前面的左边

> ID：14022977
> 
> 赞同：1
> 
> 时间：2012-12-24T15:14:09.143
> 
> 标签：css

我有两个`div`s 彼此相邻，想将第二个`div`放在第一个的左侧`div`。我无法更改这些`div`s 的顺序。

[这是一个 jsfiddle](http://jsfiddle.net/NvmUm/)来说明我所拥有的。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:17:08.933

[http://jsfiddle.net/NvmUm/2/](http://jsfiddle.net/NvmUm/2/)

```
display: inline-block; 
```

并使用浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:17:58.423

添加`float:right`到第一个 div，`float:left`到第二个，并将容器的宽度限制为子项的总宽度

[http://jsfiddle.net/NvmUm/1/](http://jsfiddle.net/NvmUm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:19:16.837

使用定位。将两个 div 的位置都设为绝对位置。第二个左边为0，第一个左边为100px；

```
position:absolute;
left:102px; //whatever needed 
```

对于这两个课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T15:29:58.643

您可以添加 float:right 主要和拇指。但是您可能需要添加第三个外部 div 才能定位这两个。

```
#container {
    background-color: lavender;

}
#outer {
    float:left;
    width:400;
}
#main {
    border: 2px solid green;
    height: 300px;
    width: 300px;
    float:right;
}

#thumbs {
    border: 2px solid blue;
    height: 100px;
    width: 100px;
    float:right;
}
​

<html>
    <body>
        <div id="container">
            <div id="outer">
                <div id="main">
                    1st div
                </div>
                <div id="thumbs">
                    2nd div
                </div>
            <div>
        </div>
    </body>
</html>​ 
```

# performance - Matlab Pre-allocation vs. no allocation，第二个更快，为什么呢？

> ID：14022979
> 
> 赞同：0
> 
> 时间：2012-12-24T15:14:14.447
> 
> 标签：performance, matlab

大约三个月前，我在 Matlab 中运行一个示例，发生了一些奇怪的事情。今天，当我测试我的另一个问题（[如何对单元格的元素进行排序？](https://stackoverflow.com/questions/14021238/how-can-i-sort-the-elements-of-a-cell)）的答案时，又发生了。这是关于Matlab中的预分配。让我解释一下：

`ones(100,100)`考虑这个测试代码，我们在其中尝试以三种方式创建矩阵 ( )：

1.  没有预分配（声明`I=[]`）
2.  带预分配（声明`I=zeros(100,100)`）
3.  根本没有分配（我什么都不声明）

代码：

```
N=1000;
sum0=0;sum1=0;sum2=0;
for q=1:N

    % No pre-allocating
    tic
    I=[];
    for i=1:100
        for j=1:100
            I(i,j)=1;
        end
    end
    a=toc;sum0=sum0+a;

    % with pre-allocation
    tic
    I=zeros(100,100);
    for i=1:100
        for j=1:100
            I(i,j)=1;
        end
    end
    a=toc;sum1=sum1+a;

    % if nothing is declared, I call it no-allocation
    tic
    for i=1:100
        for j=1:100
            I(i,j)=1;
        end
    end
    a=toc;sum2=sum2+a;
end 
```

结果是：

```
sum0 =1.53790886830589    //no pre-allocation
sum1 = 0.127538555877912  //with pre-allocation
sum2 = 0.120887850271473  //no allocation 
```

第三种方法（我不写`I=[]`or的地方`I=zeros(100,100)`）是最好的方法！这也发生在我之前的[问题](https://stackoverflow.com/questions/14021238/how-can-i-sort-the-elements-of-a-cell)中。（见更新部分）

**这种方法与第一种和第二种方法有什么区别？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:19:04.880

第三次运行循环时，`I`工作空间中已经存在。因此，循环与第二个循环一样快，只是您不再调用`zeros`。

我建议在计算时间（或在每个循环之前调用；感谢@EitanT）时`I`替换第二次`J`和`K`第三次以避免错误。`clear I`

**编辑**作为替代方案，您可以使用隐式预分配，在其中向后循环，以便您分配的第一个元素定义整个数组：

```
for i=100:-1:1
    for j=100:-1:1
       I(i,j) = 1;
    end
end 
```

# mysql - MySql - 使用外键约束创建表`SortOrder`？

> ID：14022983
> 
> 赞同：1
> 
> 时间：2012-12-24T15:14:45.717
> 
> 标签：mysql, foreign-keys

这是一个可供任何其他需要使用它的表使用的表。因此，想象一下大量的使用。

```
delimiter $$

CREATE TABLE `sortorder` (
  `sortOrderId` int(11) NOT NULL AUTO_INCREMENT,
  `sortOrder` tinyint(4) NOT NULL,
  PRIMARY KEY (`sortOrderId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

需要什么来确保该表可以处理向其抛出的任何负载？

`tinyint datatype`例如，如果我在菜单中有 10 个选项卡或 5 个缩略图等，我只能想象需要一个`sortOrder`，那么您可以看到我们在这里不需要大的 INT 数据类型。

我需要学习和做的另一件事是在此表上设置外键约束。

例如，如果`image`表删除了一条记录，`sortOrderId`则需要在`sortorder`表中删除匹配记录。

这是怎么做到的？

ALTER TABLE 排序代码：

```
ALTER TABLE sortorder ADD FOREIGN KEY fk_sortorder; 
```

CREATE TABLE 排序代码：

```
... 
```

**编辑：`image`使用`sortOrderId`列的表。我必须确保如果在表中删除了一条记录`image`- 在表中删除了相应的记录`sortorder`。

```
delimiter $$

CREATE TABLE `image` (
  `imageId` int(11) NOT NULL AUTO_INCREMENT,
  `imageFileName` varchar(45) DEFAULT NULL,
  `imagePath` varchar(255) DEFAULT NULL,
  `imageTitle` varchar(100) DEFAULT NULL,
  `imageAlt` varchar(100) DEFAULT NULL,
  `imageWidth` int(11) DEFAULT NULL,
  `imageHeight` int(11) DEFAULT NULL,
  `classId` int(11) DEFAULT NULL,
  `imageSizeId` tinyint(4) NOT NULL,
  `isImageEnabled` bit(1) DEFAULT b'0',
  `sortOrderId` int(11) DEFAULT NULL,
  PRIMARY KEY (`imageId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:17:54.840

使该表快速使用[索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)的关键，如果它们具有高基数，您将选择和排序。如果您认为此键的差异很大，您可能应该在 sortOrder 上添加键。

* * *

要获得`cascade delete`你将需要这个：

```
ALTER TABLE sortorder
   add CONSTRAINT fk_sortOrderId
     FOREIGN KEY (sortOrderId)
     REFERENCES image(sortOrderId)
     ON DELETE CASCADE 
```

* * *

我认为对 的索引`sortOrder`不会很有效。这是由于组成索引的 BTree 数据结构的性质所致。如果您考虑一下，大多数值`sortOrder`可能是低数字 1-10。几乎没有差异，指数的好处就会下降。

使用复合索引似乎会更好。

```
CREATE INDEX `sort_index` on `sortorder` (`sortOrderId`, `sortOrder`) 
```

您必须在运行时监控性能才能真正感受到这是充分利用数据库的正确方法，我只是猜测。

# jax-ws - JAX-WS SEI - 如何保留客户端发送的日期值

> ID：14022984
> 
> 赞同：1
> 
> 时间：2012-12-24T15:14:48.387
> 
> 标签：jax-ws

我们有一个向我们的客户公开的 JAX-WS SEI，并且请求中有一个 XMLGregorianCalendar 字段。问题是当客户端发送带有 UTC 的日期时，服务层中的代码会将日期转换为其本地时区，从而导致日期错误。

例如，当在 EST 中运行的客户端将 2012-12-27-05:00 发送到在 CST 中运行的服务器时，在服务器上它会转换为 2012-12-26。我们希望值为 2012-12-27。我有以下将 XMLGregorianCalendar 转换为日期的代码。

```
Date convertedDate = xmlGregorianCalendar.toGregorianCalendar().getTime(); 
```

我想知道如何保存客户发送的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:06:33.963

在“getTime”方法中，真正转换到本地时区的是您自己的代码。正如您在调试中看到的那样，您的“xmlGregorianCalendar”仍然具有客户端发送的原始时间和时区（至少如果 Web 服务参数类型是“XmlGregorianCalendar”，就好像它是“Date”一样，转换确实会发生在代码后面的服务层）。

我遇到过同样的问题，即使我在这里试图帮助你，我还没有找到一个很好的解决方案。但我找到了一个：

```
import java.util.Calendar;
import java.util.Date;
import javax.xml.datatype.XMLGregorianCalendar;

...

public Date webserviceDateToJavaDateKeepingOriginalTime(XMLGregorianCalendar webserviceDate) {

    Calendar calendar = Calendar.getInstance();
    calendar.set(
            webserviceDate.getYear(),
            webserviceDate.getMonth(),
            webserviceDate.getDay(),
            webserviceDate.getHour(),
            webserviceDate.getMinute(),
            webserviceDate.getSecond());

    return calendar.getTime();
} 
```

到现在为止，它解决了我的问题，保持了客户的时间。我相信将来我会被迫做一些事情，比如在数据库中存储客户端时区以及它的日期和时间，所以我将能够在 UI 中显示原始时间或转换后的时间（到本地时间）一个，这将取决于场景。

我建议你阅读[这篇文章](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:30:31.020

我很久以前就找到了答案，但忘记发布我的答案。我现在发帖是因为它可能对将来的其他人有所帮助。

我评论了我上面的代码并添加了以下内容，

```
private Date getDate(XMLGregorianCalendar xmlGregorianCalendar) {

    /*
     * Date convertedDate = xmlGregorianCalendar.toGregorianCalendar()
     * .getTime(); return convertedDate;
     */

    Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
    cal.set(xmlGregorianCalendar.getYear(),
            xmlGregorianCalendar.getMonth() - 1, xmlGregorianCalendar
                    .getDay());
    return cal.getTime();

} 
```

# javascript - 如何将 VideoElement currentTime 传递给 Angularjs 的控制器

> ID：14022985
> 
> 赞同：1
> 
> 时间：2012-12-24T15:14:49.377
> 
> 标签：javascript, angularjs

我有一个 id="videoElement" 的 VideoElement 在哪里

```
$('#videoElement')[0].currentTime; 
```

给我播放视频的时间。

在我的控制器上，我有一个方法

```
setTime(time) 
```

其中 time 是视频元素 currentTime 值的值。

我怎样才能将这个值传递给它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:50:31.493

找到了一种方法来做到这一点（在马修的评论之后，因为我的解决方案最初是将控制器绑定到视图）：

```
app.directive('currentVideoPlayTime', function () {
var linker = function (scope, element, attrs) {
    element.bind('timeupdate', function () {
        scope.currentPlayTime = element[0].currentTime;
    });
};

return {
    restrict:'A',
    link:linker
} 
```

});

# css - CSS中的浮动图像

> ID：14022994
> 
> 赞同：0
> 
> 时间：2012-12-24T15:15:52.910
> 
> 标签：css

以下 html 和 css 格式排列我的图像，以便通过浮动每行有九个。然而，每一行的末尾都有一个很大的间隙（但可能不足以容纳另一个图像，因此新行开始）：

HTML：

```
<div id = "body">

<div class="img">
  <a href="">
  <img src="" width="110" height="90">
  </a>
  <div class="desc"></div>
</div>

<div class="img">
  <a href="">
  <img src="" width="110" height="90">
  </a>
  <div class="desc"></div>
</div>
</div>

//This is repeated many times so that there are 4 rows of nine images 
```

CSS：

```
div.img
  {
  margin:2px;
  border: 2px solid #000000;
  height:auto;
  width:auto;
  float:left;
  text-align:center;
  }
div.img img
  {
  display:inline;
  margin:8px;
  }

div.desc
  {
  text-align:center;
  font-weight:normal;
  width:120px;
  margin:5px;
  } 
```

我的第一个问题是我如何“移动”每一行的第一张图像，以便画廊在屏幕上是对称的。我的第二个问题涉及如何确保这种形式（9x4）在每个浏览器（每个屏幕宽度）中都是相同的？

目前我一直在使用一个固定的容器（以像素为单位）来填充我自己的屏幕。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:23:47.783

而不是使用`float: left`，`display: inline-block`在容器 div 上使用。这使您可以将图像居中：

```
#body {
  text-align: center;            
}
div.img
{
  display: inline-block;
  ....
} 
```

[http://jsfiddle.net/xzH7R/1/](http://jsfiddle.net/xzH7R/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:25:35.630

将所有 div 放在一个父 div 中（或每行 4 个父 div，最重要的是一个）。对于内部 div，将位置指定为绝对位置，以便它们相对于父容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:27:45.960

您可以在外部容器中使用 padding-left 将第一个图像向右移动一点。

您必须以百分比指定所有尺寸，以便屏幕以不同的分辨率正确缩放。

最好的方法是为每个元素（div、img 等）提供不同颜色的边框，并查看这些边框如何相互对齐。

# css - 使 div (display: table) 匹配外部容器的高度宽度最小高度

> ID：14022999
> 
> 赞同：0
> 
> 时间：2012-12-24T15:16:07.353
> 
> 标签：css, html-table

我需要容器宽度最小高度来保存可变大小的内容，但同时我需要内容在父容器内垂直对齐。

**JS 小提琴：http:** [//jsfiddle.net/mr_goodcat/n5Pq3/6/](http://jsfiddle.net/mr_goodcat/n5Pq3/6/)

**HTML：**

```
<table class="mainLayout">
    <tr>
        <td>
            <div class="contentLayout">
                <div class="tbl">
                    <div class="tcell">
                        <div class="inner">
                            CONTENT
                        </div>    
                    </div>
                </div>
            </div>
        </td>                             
    </tr>
    <tr>
        <td>
            BOTTOM
        </td>          
    </tr>
</table> 
```

**CSS：**

```
body, html {
  background-color: lightgreen;
  height: 100%;
  width: 100%;
}

.mainLayout {
    height: 100%;
    width: 100%;
}

.contentLayout {
    width: 100%;    
    min-height: 200px;    
    border: 1px solid red;   
    display: block;
}

.tbl {
     height: 100%;
    width: 100%;
    display: table;
}

.tcell {
    width: 100%;
    height: 100%;
    background: purple;
    display: table-cell;    
    text-align: center;
    vertical-align: middle;
}

.inner {
    display: inline-block;    
} 
```

想要在红色正方形（最小高度容器）内对齐紫色框。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:49:32.110

试试这个[http://jsfiddle.net/n5Pq3/30/](http://jsfiddle.net/n5Pq3/30/)这是 webkit 的一个已知问题。解决方法是使用

```
position:relative; //on parent 

position:absolute; // on child 
```

想要了解更多细节，请点击此链接... [https://bugs.webkit.org/show_bug.cgi?id=26559](https://bugs.webkit.org/show_bug.cgi?id=26559)