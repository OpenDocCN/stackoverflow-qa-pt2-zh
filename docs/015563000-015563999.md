# StackOverflow 问答 15563000-15563999

# java - 观察者模式与 MVC

> ID：15563005
> 
> 赞同：11
> 
> 时间：2013-03-22T04:56:29.760
> 
> 标签：java, model-view-controller, design-patterns, observer-pattern

我想知道观察者模式和 MVC 之间有什么区别。我在学校有一些用 Java 编写 MVC 程序的经验，但没有观察者模式的经验。（有人告诉我观察者模式意味着我在 Java 中使用了 Observer 类......我认为这不是一个好的答案。）

请帮我解决以下问题，非常感谢lottttt。

1.  它们之间有什么区别？观察者模式不为控制器使用单独的类？

2.  观察者模式和MVC有什么关系？我听到了两个不同的版本。

    *   第一个版本是，MVC 是一种架构，而观察者模式是一种设计模式。它们看起来很相似，因为 MVC 使用观察者模式。
    *   第二个版本是，观察者模式和 MVC 是两种不同的设计模式。
3.  是否可以只使用其中之一？如果是这样，在什么情况下，您会使用其中一种，为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T05:17:04.613

1.  您说得对，MVC 更像是一种架构风格而不是一种设计模式，这里很好地讨论：[MVC 是一种设计模式还是架构模式](https://stackoverflow.com/questions/1866821/is-mvc-a-design-pattern-or-architectural-pattern)

我希望这也能回答你的另外两个问题。

观察者设计模式是一种行为模式，当我们想要在对象 x 发生变化时通知对象（比如 x）的所有依赖项时使用它。好读： http: [//www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)

并且它们都密切相关，正如您从 MVC 图中看到的 MVC - 例如：“视图”的更改必须通知“模型”和“控制器”实现此类功能的一种有效方法是观察者设计模式。

好读：[http ://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

```
In fact the observer pattern was first implemented in Smalltalk's MVC based user 
interface framework. 
```

希望这可以帮助！

![在此处输入图像描述](../Images/08a094c56e36db553088e2ef0b1a9c92.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T05:07:28.887

有很多与您提出的问题相关的文章。MVC 对我来说是一种架构模式，它也“包含”观察者模式。我相信如果一个人真的在不同的实际项目实现中研究 MVC 模式，那么其中的设计模式不止一种。

要么放大，要么缩小。

# android - 如何在 viewpagerindicator 内的相对布局中实现 pulltorefresh？

> ID：15563007
> 
> 赞同：2
> 
> 时间：2013-03-22T04:56:34.647
> 
> 标签：android, viewpagerindicator

我有一个扩展相对布局的类。我在 viewpage 指示器的片段中调用这个类。

```
public class rl_latest_news extends RelativeLayout 
private PullRefreshContainerView mContainerView;
private TextView mRefreshHeader;
{public rl_latest_news(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.layout_latest_news, this, true);
mContainerView = (PullRefreshContainerView) findViewById(R.id.container1);
        mRefreshHeader = new TextView(context);
        mRefreshHeader.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        mRefreshHeader.setGravity(Gravity.CENTER);
        mRefreshHeader.setText(" Pull to refresh...");
        mContainerView.setRefreshHeader(mRefreshHeader);
        mContainerView.setOnChangeStateListener(new OnChangeStateListener() {
            public void onChangeState(PullRefreshContainerView container,
                    int state) {
                switch (state) {
                case PullRefreshContainerView.STATE_PULL:
                    mRefreshHeader.setText(" Pull to refresh ");
                    break;
                case PullRefreshContainerView.STATE_RELEASE:
                    mRefreshHeader.setText(" Release to refresh ");
                    break;              
                case PullRefreshContainerView.STATE_LOADING:{
                    mRefreshHeader.setText("Loading...");
                    new Thread(new Runnable() {
                        public void run() {
           //calling asynchronous task inside this
}
} 
```

视图指示器工作正常。但问题是我无法在其中执行拉动刷新。布局不会向下移动，而且它只刷新一次。

# cakephp - Cakephp 2.x 管理员登录不起作用，登录重定向也是如此

> ID：15563012
> 
> 赞同：1
> 
> 时间：2013-03-22T04:57:07.197
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我已经为我的管理面板完成了管理路由。现在的 url 是*localhost/app/admin*。

现在我有 2 个表管理员和用户。

我为登录*localhost/app/admin/admins/login*创建了一个 url 。

该页面提示输入用户名和密码。

但问题是当使用 loginredirect 在 appcontroller 中创建组件时，它被重定向到*localhost/app/admin/users/login*。我不知道为什么。我什至尝试更改登录重定向路径，但没有任何效果。

这是我的 appcontroller.php ：

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'admins', 'action' => 'add'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
    )
);

public function beforeFilter() {
    $this->Auth->allow('index', 'view');
} 
```

即使我删除了用户表，它也会重定向到用户登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:55:06.897

听起来您的 Auth 组件不起作用。不要将身份验证重定向添加到 components 变量中，而是将它们放在您的 beforeFilter() 中。你的 appController 应该是：

```
 public $components = array('Auth','Session');

    public function beforeFilter()
{
    $this->Auth->loginRedirect = array('action' => 'add', 'controller' => 'admins');
    $this->Auth->logoutRedirect = array('controller' => 'pages', 'action' => 'display', 'home');
    $this->Auth->authError = 'You are not allowed to see that.';

} 
```

你登录成功了吗？如果是这样，请检查 routes.php 以确保您正确路由。这可以通过尝试手动导航到 example.com/admins/add 来测试。

# java - 摇摆，Jtable，JDBC

> ID：15563014
> 
> 赞同：0
> 
> 时间：2013-03-22T04:57:18.940
> 
> 标签：java, swing, jdbc, jtable, resultset

```
 package com.officelog.manager;

  import java.awt.*;
  import javax.swing.*;
  import java.util.*;

  public class AdminControl implements Runnable{
public static void main(String[] args) {
    new AdminControl();
}

Thread t = null ;
int hour ,minute,second ;
int year,month,day ;
int Month ;

private static JFrame frame = new JFrame("Admin_Control");
static JPanel panel = new JPanel();
JLabel label,name,date,time;
JTable table ;
JScrollPane scrollpane ;
public AdminControl() {
    frame.setBounds(100, 100, 700, 600);
    frame.setResizable(false);
    frame.add(panel);

    panelSetUp();

    frame.setVisible(true);

}
private void panelSetUp() {
    panel.setLayout(null);
    panel.setBackground(Color.lightGray);
    panel.setBorder(BorderFactory.createBevelBorder(1,Color.white,   Color.white));

    time = new JLabel();
    panel.add(time);
    time.setBounds(20, 25, 70, 25);

    date = new JLabel();
    panel.add(date);
    date.setBounds(20, 75, 70, 25);

    t = new Thread(this);
    t.start();

    name = new JLabel("Name:");
    panel.add(name);
    name.setBounds(20,50,50,25);

    label = new JLabel("SuperUser");
    panel.add(label);
    label.setBounds(60, 50, 70, 25);
    label.setForeground(Color.blue);

    tableSetUp();
    JMenuBar menuBar = new JMenuBar();
    frame.add(menuBar,BorderLayout.NORTH);
    menuBar.setBorder(BorderFactory.createBevelBorder(1, Color.gray, Color.gray));

    JMenu file = new JMenu("File");
    menuBar.add(file);

    JMenu source = new JMenu("Source");
    menuBar.add(source);
}
public void run(){
    try{
        while(true){
            Calendar now = Calendar.getInstance();
            hour = now.get(Calendar.HOUR_OF_DAY);
            minute = now.get(Calendar.MINUTE);
            second = now.get(Calendar.SECOND);

            year = now.get(Calendar.YEAR); 

            Month = now.get(Calendar.MONTH);
            month = Month + 1;

            day = now.get(Calendar.DATE);
            displayDateTime();
            time.repaint();
            date.repaint();
            t.sleep(1000);
        }
        }catch(Exception e){
        e.printStackTrace();
    }
}

public void displayDateTime(){
    time.setText(hour+":"+minute+":"+second);
    date.setText(day+"/"+month+"/"+ year);
}

private void tableSetUp(){
    int row ;

    Object [][] data ={
            {new Integer(5),"Deepak","Deepak"
                ,"2013-21-03"
            }
    };
    String columnNames []={"EmployeeID" , "EmployeeName",
            "EmployeePassword","CreatedOn"};
    table = new JTable(data , columnNames);
    scrollpane = new JScrollPane(table);
    panel.add(scrollpane);
    scrollpane.setBounds(50, 200, 600, 100);
    table.setBounds(50, 100, 600, 100);
    table.setForeground(Color.BLUE);
    table.setGridColor(Color.pink);

} 
```

任何人都可以告诉我如何将数据插入到数据库中的 JTable 中。这是我的代码不完整。我创建了一个表，但我不知道如何将数据从网格格式的数据库中插入其中，以便可以编辑表中的数据并在数据库中更新它。感谢您的时间和考虑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:37:31.330

好吧，将 JTable 列名保存为 a`String Array`并将数据保存为`two dimensional array of any type`. 您可以通过从数据库中检索数据来填充数据数组。

以下链接有一个示例（无数据库）

[http://www.roseindia.net/java/example/java/swing/ScrollableJTable.shtml](http://www.roseindia.net/java/example/java/swing/ScrollableJTable.shtml)

以下是Oracle指南，非常好。

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# svn - 删除 .svn 文件夹是否与“svn export”相同？

> ID：15563016
> 
> 赞同：1
> 
> 时间：2013-03-22T04:57:34.480
> 
> 标签：svn

从概念上讲，我相信从项目中删除所有 .svn 文件夹与“svn export”相同。如果我不想保留项目的历史记录，我可以删除所有 .svn 文件夹。但在我做之前我想确认一下。

所有 Stack Overflow 帖子都谈到了保留历史记录和使用 rsvndump 等工具。但我不想保留，我很好奇，为什么我最好使用“svn export”？还是我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:10:33.800

结果将是相同的。采用

```
svn export 
```

如果您不需要历史记录，因为它比

```
svn checkout
remove .svn  files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T11:22:13.500

导出创建没有 (.svn) 文件的项目副本。是的，如果您不想保留历史记录，.svn 导出是一个不错的选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T05:32:48.070

我在我的项目文件夹上运行了一个`find -type d -name '.svn' -exec rm -rfv {} \;`，做了一个提交，它工作得很好。

我还做了`svn export`一个不同的项目并提交了。它工作得很好。

编辑：我从不在签入文件夹中工作。我改为将所有文件复制到另一个名为`workinprogress`. 当我需要签入时，我使用 meld 进行比较，以便我逐个文件，逐行了解我正在提交的内容。这也有助于我为我的签到做笔记。我在我的 workinprogress 文件夹中运行了上述测试。

# batch-file - 有 for 循环引用 findstr 结果，向下移动两行以获取变量

> ID：15563018
> 
> 赞同：0
> 
> 时间：2013-03-22T04:57:42.790
> 
> 标签：batch-file, cmd

我有两个代码，但第 5 部分在与第 4 部分不同的文件中抓取了错误的变量。

part4 使用 var4，part5 使用 var5。我希望 var5 在 "skip=2 tokens=2 delims==" 下被抓取 2 行，但由于某种原因，在第 5 部分中引用 findstr 时我不能跳过行。第 5 部分是所有需要更改的部分，第 4 部分很好。

**所以从本质上讲，我如何让 part5 在 part4 的 findstr 下方获取变量两行？**

```
SETLOCAL ENABLEDELAYEDEXPANSION

:part4
set var4=
findstr /m "Ship sunk!" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\*.clg" "C:\Users\P         Ditty\Documents\SH3\data\cfg\Backups_SCR2\Log_*.cfg"
if not errorlevel 1 (
for /f "tokens=4 delims==,|" %%D in ('findstr "Ship sunk!" "C:\Users\P Ditty\Documents\SH3       \data\cfg\Backups_SCR2\*.clg" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\Log_*.cfg"') do (
set var4=!var4!%%D
 goto :eof
)
)

:part5
findstr "Ship sunk!" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\*.clg" "C:\Users\P  Ditty\Documents\SH3\data\cfg\Backups_SCR2\Log_*.cfg"
if not errorlevel 1 (
for /f "skip=2 tokens=2 delims==" %%E in ('findstr "Ship sunk!" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\*.clg" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\Log_*.cfg"')  do     (
set var5=
set var5=!var5!%%E
goto :eof
)
) 
```

例子：

如果第 4 部分发现“船沉了！” 在这个文件中（沉船！在第一行）：

```
asdfasfdasdfShip sunk! asdfjaslkjf;ajfa;
aksdfjklasjflk; fnwerawra
Date=19400112 
```

我希望第 5 部分将变量设为 19400112（“日期 =”之后的第三行）。“Date=”之后的部分在 part4 变量下面两行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:06:38.793

虽然我不完全理解您的代码，但我可以在上面看到这些详细信息：

*   在第 4 部分中，您`findstr`首先执行以了解目标文本是否存在于文件中，然后再次执行以获取某些数据（我不知道这是*什么*数据）。您可能`findstr`只需执行一次即可完成这两项任务。

*   你说你想要 part5**在 part4 的 findstr 下**两行抓取一行，但是你没有以任何方式将 part4 的结果连接到 part5 内！`"skip=2`part5 与 part4 的 findstr 没有关系（skip=2 与什么有关？默认为第一行）。你需要从part4中获取一个*行号*，然后在part5中作为“skip=”使用，并附加一个“+2行”，即“+1 skip”。

下面的批处理文件在您的示例数据文件上实现此过程：

```
@echo off
:part4
set var4=
rem Get the LINE NUMBER where the findstr happen
for /f "tokens=1 delims=:" %%D in ('findstr /N "Ship sunk!" "inputFile.txt"') do (
   set var4=%%D
)
:part5
rem Get the number of two lines below (that is, skip=line+1)
set /A skip=var4+1
rem If text found in part4
if defined var4 (
   rem Get that line from the file (NOT from findstr)
   for /f "skip=%skip% tokens=2 delims==" %%E in (inputFile.txt) do (
      set var5=%%E
      goto continue
   )
)
:continue
echo %var5% 
```

安东尼奥

# xml - xpath 来识别唯一元素

> ID：15563019
> 
> 赞同：1
> 
> 时间：2013-03-22T04:57:51.460
> 
> 标签：xml, xpath

这个问题可能反映了我对 Xpath 知识的完全无知，但我仍然敢问。我的 xml 结构类似于：

```
<record>
<data>
<type>student</type>
<name>Kevin</name>
</data>

<data>
<type>teacher</type>
<name>Matt</name>
</data>
</record> 
```

我如何编写xpath来选择老师Matt？“//record/data/name”是否总是返回它匹配的第一个/最后一个/所有/未保证的记录？

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:48:30.747

`//record/data/name`将匹配`name`您的示例 XML 中的两个元素。

要专门匹配教师，您应该添加一个谓词：

`/record/data[type='teacher']/name`

如果您有多个“老师”，它将匹配所有这些。你可以进一步缩小范围......

这将匹配第一个老师：

`(/record/data[type='teacher']/name)[1]`

这将匹配第一个名为“Matt”的老师：

`(/record/data[type='teacher']/name[.='Matt'])[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:15:31.413

```
/record/data[type='teacher']/name 
```

**[X 路径语法](http://www.w3schools.com/xpath/xpath_syntax.asp)**

# php - Laravel 4 Artisan 命令

> ID：15563020
> 
> 赞同：0
> 
> 时间：2013-03-22T04:57:55.397
> 
> 标签：php, command-line-interface, laravel, laravel-4

我在使用 Laravel 4 的工匠时遇到了一些麻烦。当运行基本

```
php artisan key:generate 
```

我收到此错误：

```
[InvalidArgumentException] There are no commands defined in the "key" namespace 
```

我已经在几个地方阅读并使用以下命令更新了作曲家：

```
php composer.phar update 
```

但这会返回：

```
Nothing to install or update 
```

问题仍然存在。

*任何帮助将不胜感激。谢谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T09:32:50.373

查找文件 vendor/laravel/framework/src/Illuminate/Foundation/Console/KeyGenerateCommand.php - 这是定义 key:command 的地方。

然后，查找 vendor/laravel/framework/src/Illuminate/Foundation/Providers/KeyGeneratorServiceProvider.php - 这是该命令注册以与 artisan 一起使用的位置。

很可能在您的安装中出现了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:53:59.550

尝试先更新作曲家本身

```
php composer.phar self-update 
```

然后更新你的作曲家包

```
php composer.phar update 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T03:33:37.873

你在`Laravel`4 中生成密钥了吗？该过程与 L3 有所不同，因为您不会删除“您的密钥在此处！！！” 此文件中的文本。

```
app/config/app.php 
```

您将文本留在那里，然后工匠在上面写字。

您可能已经知道这一点并面临不同的问题。

# android - 如何将图片对象转换为位图对象，Android

> ID：15563021
> 
> 赞同：9
> 
> 时间：2013-03-22T04:58:01.887
> 
> 标签：android, imageview, type-conversion, image

如何将图片转换为位图，我在代码中尝试的内容不起作用。关于如何做到这一点的任何想法？我想在 Picture 对象中获取图像并将该图像放入名为 imageOne 的 ImageView 中。

```
 showBitmap.setOnClickListener(new View.OnClickListener() {
        @Override
            public void onClick(View v) {

            Picture picture = wv.capturePicture();

           Bitmap bm = Bitmap.createBitmap(picture.getWidth(), 
                   picture.getHeight(), 
                   Bitmap.Config.RGB_565); 
   Canvas c = new Canvas(bm); 
   picture.draw(c);

   imageOne.setImageBitmap(bm);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T05:55:49.530

添加这个：

```
//Convert Picture to Bitmap
private static Bitmap pictureDrawable2Bitmap(Picture picture) {
    PictureDrawable pd = new PictureDrawable(picture);
    Bitmap bitmap = Bitmap.createBitmap(pd.getIntrinsicWidth(), pd.getIntrinsicHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    canvas.drawPicture(pd.getPicture());
    return bitmap;
} 
```

参考：[Android - 如何将图片从 webview.capturePicture() 转换为 byte[] 并返回位图](https://stackoverflow.com/questions/10273646/android-how-to-convert-picture-from-webview-capturepicture-to-byte-and-bac)

然后修改你的代码如下：

```
showBitmap.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Picture picture = wv.capturePicture();
        Bitmap bm = pictureDrawable2Bitmap(picture); 
        imageOne.setImageBitmap(bm);
    }
}); 
```

# iphone - iPhone 5 优化

> ID：15563022
> 
> 赞同：0
> 
> 时间：2013-03-22T04:58:09.507
> 
> 标签：iphone, objective-c, xcode

我在“viewDidLoad”中使用此代码来检查应用程序是否在 iPhone 5 或普通 iPhone 上运行。

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic

        [_backgr setImage:[UIImage imageNamed:@"usefull_i4.png"]];
        [scrollView setFrame:CGRectMake(16, 69, 291, 349)];
        [_backgr setFrame:CGRectMake(0, 0, 320, 480)];

    }
    if(result.height == 568)
    {
        // iPhone 5
        [_backgr setImage:[UIImage imageNamed:@"usefull_i5.png"]];
        [scrollView setFrame:CGRectMake(15, 111, 295, 349)];
        [_backgr setFrame:CGRectMake(0, 0, 320, 568)];

    }
} 
```

它不起作用。:( 仅当我将 !here 从 iPhone 3.5 更改为 iPhone 4 时，此代码才有效[。1](http://i.stack.imgur.com/OzdVU.jpg)

我也将此代码用于另一个 ViewController 并且效果很好。我不使用自动布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:01:40.043

Try this macro : (in .pch file)

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

Example :

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    if(IS_IPHONE_5)
    {
         // code
    }
} 
```

# ember.js - Ember js 多级深度命名空间

> ID：15563026
> 
> 赞同：1
> 
> 时间：2013-03-22T04:58:19.310
> 
> 标签：ember.js

```
App.ApplicationRoute = Ember.Route.extend({
    setupController: function(){
        this.controllerFor('App.Namespace1.Object1').set('model', model);
    }    
});

App.Namespace1.Object1Controller = Ember.ObjectController.extend({}); 
```

*这有效*

```
App.ApplicationRoute = Ember.Route.extend({
    setupController: function(){
        this.controllerFor('App.Object1').set('model', model);
    }    
});

App.Object1Controller = Ember.ObjectController.extend({}); 
```

这是我看到的错误。

```
Error: assertion failed: You are trying to look up a controller that you did 
not define, and for which Ember does not know the model.

This is not a controller for a route, so you must explicitly define the controller 
(Minerva.Namespace1Object1Controller) or pass a model as the second parameter to 
`controllerFor`, so that Ember knows which type of controller to create for you.
http://localhost:8090/EmberApplication/js/vendor/ember-1.0.0-pre.2.js
Line 53 
```

EmberJS 是否支持多层次的命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:41:29.483

好消息！我刚刚删除了我的旧答案，因为仔细检查代码`Ember.Resolver`表明以下应该是可能的：

```
this.controllerFor('App/Namespace1/object1') 
```

（约定是在小写的路由上下文中引用控制器）

# windows - how to compile libnet for python 2.7 on windows

> ID：15563037
> 
> 赞同：0
> 
> 时间：2013-03-22T04:59:25.927
> 
> 标签：windows, python-2.7, cygwin, libnet

I have python 2.7 on windows xp, I need libnet but it's not supported for python 2.7 . I tried to compile it using cygwin, as I don't use python on cygwin gnu and I could not compile it using mingw32, is there any way to install mingw32 in the gnu of cygwin. I read some about VC compile but I totally didn't understand. I need it for w3af framework[which need scapy [which need libnet - and python 2.7]] trying to make w3af framework run on windows [because it is not supported anymore on win]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:24:41.507

你可以试试这个：

1.  安装 Python 2.5 和 dnet 模块 [https://code.google.com/p/libdnet/downloads/detail?name=dnet-1.12.win32-py2.5.exe&can=2&q=](https://code.google.com/p/libdnet/downloads/detail?name=dnet-1.12.win32-py2.5.exe&can=2&q=) 您可以在其他机器上执行此操作。
2.  将位于 c:\python25\lib\site-packages\ 的文件名“dnet-1.12-py2.5.egg-info”修改为“dnet-1.12-py2.7.egg-info”
3.  通过 Ultraedit 或相关工具打开 dnet 的二进制文件：dnet.pyd 位于 c:\python25\lib\site-packages\（我使用的是 winhex）
4.  找到字符串“python2.5.dll”，根据我的经验，地址为0x00019cD1，将十六进制值从“35”更改为“37”，字符串将变为“python2.7.dll”
5.  将该修改后的文件复制到 python2.7 文件夹的同一位置 (c:\python27\lib\site-packages)

它适用于我的机器：Windows8，Python2.7.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T16:47:21.847

我创建了一个 GNU makefile 来为 MSVC 构建它。它在[这里](https://gist.github.com/gvanem/7d10b3c9e519ad388721) 仅使用 Python 2.7 进行了测试。

# ember.js - How to refresh the return value from myHelper method?

> ID：15563038
> 
> 赞同：0
> 
> 时间：2013-03-22T04:59:35.130
> 
> 标签：ember.js, handlebars.js, ember-data

I have following handlebar and helper method

Handlebar

```
{{myHelper grp.group_name optionBinding=data}} 
```

where data looks like => Object {Eastern Group: 1} and grp.group_name = 'Eastern Group'
Helper

```
Ember.Handlebars.registerBoundHelper('myHelper', function(value, options) {
  console.log(options);
  var map = options.hash.optionBinding;

  return map[value];
}); 
```

since I am using registerBoundHelper-- with every change in data (which is a key/value object) return from myHelper should also refresh ?

Following is as per guide published at [http://emberjs.com/api/classes/Ember.Handlebars.html#method_registerBoundHelper](http://emberjs.com/api/classes/Ember.Handlebars.html#method_registerBoundHelper)

> Bound hash options are also supported. Example:
> 
> {{repeat text countBinding="numRepeats"}}
> 
> In this example, count will be bound to the value of the numRepeats property on the context. If that property changes, the helper will be re-rendered.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:24:21.277

我认为您以错误的方式访问绑定。按照您提到的 API 链接，您的实现必须如下所示：

```
Ember.Handlebars.registerBoundHelper('myHelper', function(value, options) {
  console.log(options);
  var map = options.hash.option; //don't use Binding at the end

  return map[value];
}); 
```

当您使用帮助程序并指定属性“optionBinding”时，您是在告诉 ember 创建从值到属性“option”的绑定。因此，当您想要访问该值时，您必须只使用“选项”。

# ruby - Ruby test and assign variable

> ID：15563041
> 
> 赞同：-4
> 
> 时间：2013-03-22T05:00:02.613
> 
> 标签：ruby

Based on what I have read about the `||=` operator in Ruby, I would expect that the following line of code should assign the variable `a` (an as yet unassigned variable) in the example to `5`.

```
a |= "-----n-".index /n/ 
```

Just evaluating `"-----n-".index /n/` on its own gives you `5`.

However, after executing the above line, `a` is set to `true`.

The following sets `b` to `false`, whereas I would expect that `b` should be `nil`:

```
b |= "-----n-".index /o/ 
```

Can you please explain this to me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:09:50.537

发生这种情况是因为`a |= expr`脱糖到`a = a | expr`. 在右手边，`a`最初是`nil`。

该表达式等效于`a = nil | expr`，如果参数为非零，则返回 true（有关详细信息，请参阅[有关**nil#|**](http://www.ruby-doc.org/core-2.0/NilClass.html#method-i-7C)的文档）。您可能打算写`a ||= expr`的是 desured to `a = a || expr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:04:20.903

`||=`并且`|=`是不同的运营商。你谈论一个，但使用另一个。注意！

```
a ||= "-----n-".index(/n/) # => 5
b ||= "-----n-".index(/o/) # => nil

c |= "-----n-".index(/n/) # => true
d |= "-----n-".index(/o/) # => false 
```

# algorithm - 什么时候双向链表比单链表更有效？

> ID：15563043
> 
> 赞同：51
> 
> 时间：2013-03-22T05:00:13.843
> 
> 标签：algorithm, linked-list

今天在接受采访时被问到这个问题。

除了回答反转列表以及向前和向后遍历之外，面试官一直在强调其中的一些“基本”内容。我放弃了，当然在面试后做了一些研究。似乎双链表中的插入和删除比单链表更有效。我不太确定双向链表如何更有效，因为很明显需要更改更多引用。有人能解释一下背后的秘密吗？老实说，我做了很多研究，但未能理解我的主要问题是双链表仍然需要 O(n) 搜索。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-22T05:57:19.130

只要您满足于始终在头部或某些已知元素之后插入，插入显然在单链表中工作较少。（也就是说，您不能在已知元素之前插入，但请参见下文。）

另一方面，删除比较棘手，因为您需要在要删除的元素之前知道该元素。

一种方法是使删除 API 与要删除的元素的前身一起工作。这反映了插入 API，它采用将成为新元素前身的元素，但它不是很方便，而且很难记录。不过，这通常是可能的。一般来说，您通过遍历列表到达列表中的一个元素。

当然，你可以从头开始搜索列表，找到要删除的元素，这样你就知道它的前身是什么了。这假设删除 API 包括列表的头部，这也很不方便。此外，搜索速度非常慢。

几乎没有人使用但实际上非常有效的方法是将单链表迭代器定义为指向迭代器当前目标之前的元素的指针。这很简单，只比直接使用指向元素的指针慢一个间接，并且使插入和删除都快速。缺点是删除一个元素可能会使其他迭代器无效，这很烦人。（它不会使被删除元素的迭代器无效，这对于删除一些元素的遍历来说很好，但这并没有多大的补偿。）

如果删除不重要，也许是因为数据结构是不可变的，单链表提供了另一个非常有用的属性：它们允许结构共享。单链表可以很高兴地成为多个头的尾部，这对于双链表来说是不可能的。出于这个原因，单链表传统上一直是函数式语言选择的简单数据结构。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-21T14:53:06.943

这是一些让我更清楚的代码......拥有：

```
class Node{
      Node next;
      Node prev;
} 
```

**删除单链表中的节点**-O(n)-

您不知道哪个是前一个节点，因此您必须遍历列表直到找到它：

```
deleteNode(Node node){
    prevNode = tmpNode;
    tmpNode = prevNode.next;

    while (tmpNode != null) {
        if (tmpNode == node) {
            prevNode.next = tmpNode.next;
        }
        prevNode = tmpNode;
        tmpNode = prevNode.next;
    }
} 
```

**删除双链表中的一个节点**-O(1)-

您可以像这样简单地更新链接：

```
deleteNode(Node node){
    node.prev.next = node.next;
    node.next.prev = node.prev;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-22T05:57:39.330

以下是我对双向链表的看法：

*   您可以在两端准备好访问\插入。

*   它可以同时作为队列和堆栈工作。

*   节点删除不需要额外的指针。

*   您可以应用 Hill-Climb 遍历，因为您已经可以访问两端。

*   如果您正在存储数值，并且您的列表已排序，您可以为中位数保留一个指针/变量，然后使用统计方法可以高度优化搜索操作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-22T05:04:24.283

如果要删除链表中的元素，则需要将前一个元素链接到下一个元素。使用双向链表，您可以随时访问这两个元素，因为您拥有指向这两个元素的链接。

这假设您已经有一个指向您需要删除的元素的指针，并且不涉及搜索。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-21T15:40:59.070

'除了回答反转列表以及向前和向后遍历之外，还有一些“基本”的东西'。

似乎没有人提到：在双向链表中，只需拥有一个指向已删除元素的指针，就可以重新插入已删除的元素。参见 Knuth 的 Dancing Links 论文。我认为这是非常基本的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-01T02:48:18.400

*   因为双向链表可以立即访问列表的开头和结尾，所以它们可以在 O(1) 的任一侧插入数据，也可以在 O(1) 的任一侧删除数据。因为双向链表可以在 O(1) 时间内在末尾插入数据并在 O(1) 时间内从前面删除数据，所以它们为队列提供了完美的底层数据结构。Queeus 是项目列表，其中数据只能在末尾插入并从开头删除。队列是抽象数据类型的一个例子，我们可以在底层使用数组来实现它们。现在，由于队列在末尾插入并从开头删除，因此数组仅与底层数据结构一样好。虽然数组在末尾插入是 O(1)，但从头开始删除是 O(N)。另一方面，双向链表，在末尾插入和从开头删除都是 O(1)。这就是使它非常适合用作队列的底层数据结构的原因。

*   LRU缓存设计中使用了双向链表，因为我们需要经常删除最近最少的项目。删除操作更快。

*   DLL 用于需要前后导航的导航系统。浏览器也使用它来实现被访问网页的后退和前进导航，即后退和前进按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-06T05:35:39.360

```
Doubly Linked list is more effective than the Singly linked list when the location of the element to be deleted is given.Because it is required to operate on "4" pointers only & "2" when the element to be deleted is at the first node or at the last node.

struct  Node {

       int  Value;
       struct Node  *Fwd;
       struct Node  *Bwd;
);

Only the below line of code will be enough to delete the element ,If the element to be deleted is not in the first or last node.

X->Bwd->Fwd = X->Fwd; X->Fwd->Bwd = X->Bwd ; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-22T04:06:57.453

**单链表**vs**双链表**vs**动态数组**：

在比较三种主要数据结构时，在查看时间复杂度时，双向链表在所有主要任务和操作中都是最有效的。对于双向链表，它在所有操作中以恒定时间运行，除了仅按索引访问，它在线性时间 (n) 运行，因为它需要遍历每个节点以获取所需的索引。当涉及到插入、删除、第一个、最后一个、连接和计数时，双向链表以恒定时间运行，而动态数组以线性时间 (n) 运行。

在空间复杂度方面，动态数组只存储元素，因此时间复杂度恒定，单链表存储每个元素的后继，因此线性空间复杂度（n），最糟糕的是双向链表存储每个元素的前驱和后继，因此也是线性空间复杂度，但 (2*n)。

除非您的资源/空间非常有限，否则动态数组或单链表可能会更好，但是，如今，空间和资源越来越丰富，因此双链表以更多空间为代价要好得多。

# javascript - 提交表格或模拟输入/返回被按下

> ID：15563045
> 
> 赞同：0
> 
> 时间：2013-03-22T05:00:31.063
> 
> 标签：javascript, jquery, forms, submit

我知道，使用 jQuery，可以选中复选框，但我们可以提交表单。不处理提交/提交的数据，而是模拟点击提交按钮——或者如果可能的话按下回车键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:02:05.490

是的，这是可能的，你甚至不需要按钮：

```
$("form").submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:19:04.113

```
$('#submit_btn_id').click(function() {
    $('#form_id').submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:24:25.307

如果您有提交按钮，那么您可以在其他事件的代码中使用触发器来模拟。

```
 $('#submit_button_id').trigger('click'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:50:37.777

当然，但是您需要指定要模拟动作的偶数。我想你希望它是按下回车键 .. 代码将是

```
$(document).keypress(function(e){
if (e.which == 13){
    $("#submit").trigger('click');
}
});

$("#submit").click(function(){

  // do your stuff
 }) 
```

# html - Aligning the Cell Columns of 2 tables beside each other together

> ID：15563050
> 
> 赞同：0
> 
> 时间：2013-03-22T05:00:52.677
> 
> 标签：html, css, visual-studio

I have 2 tables beside each other Tested within the element of one bigger table I have to align the columns elements of these 2 tables to display in a single line . . I havent been able to achieve it with valign or vertical-align . . Please help

![Table Alignment](../Images/da00cffad0b82de466da67a5a7a2983e.png)

```
<style type="text/css">
    .FieldLabel {
        padding: 2px;
        width: 180px;
    }

    .Head {
        text-align: left;
        font-weight: bold;
        font-size: 20px;
    }

    .auto-style1 {
        width: 420px;
        vertical-align: top;
    }

    .auto-style2 {
        width: 420px;
        vertical-align: inherit;
    }
</style>
<div id="TXN_SAMPLES_createForm1">
<table>
<tr>
    <td colspan="2" class="Head">Request Details
    </td>
</tr>
<tr>
    <td style="width: 500px">
<table>
    <tr>
        <td class="FieldLabel">Lead Src Code
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {Lead_Lead_Source_CODE}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Request Date
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {REQUEST_DATE}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Customer
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {CUST_NAME}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Product
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {PROD_NAME}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">DG/Non-DG
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {DG_NONDG}
            </div>
        </td>
    </tr>
</table>
</td>
<td class="auto-style2">
<table>
    <tr>
        <td class="FieldLabel">.
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">.
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Country
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {COUNTRY}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Division
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {DIVISION}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel"></td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
</table>
</td>
<td style="width: auto">
<table style="float: right">
    <tr>
        <td class="FieldLabel"></td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel"></td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel"></td>
        <td>
            <div class="FieldPlaceholder DataOnly">
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Quantity (Kg)
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {QTY}
            </div>
        </td>
    </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td colspan="2" class="Head">Sample Details
        </td>
    </tr>
<tr>
<td style="width: 500px">
<table>
<tr>
    <td class="FieldLabel">Dispatch Date
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {DISPATCH_DATE}
        </div>
    </td>
</tr>
<tr>
    <td class="FieldLabel">Lot No.
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {LOT_NO}
        </div>
    </td>
</tr>
    <tr>
        <td class="FieldLabel">AWB No.
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {AWB_NO}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Dispatch Mode
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {DISPATCH_MODE}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Freight (THB)
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {FREIGHT}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Additional Cost
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {ADDITIONAL_COST}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Receipt Conformation
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {RECEIPT_CONFORMATION}
            </div>
        </td>
    </tr>
    <tr>
        <td class="FieldLabel">Reason for Delay
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {REMARK}
            </div>
        </td>
</tr>
    </table>
    </td>
<td class="auto-style1">
<table>
    <tr>
        <td class="FieldLabel">Shipment Date
        </td>
        <td>
            <div class="FieldPlaceholder DataOnly">
                {SHIPMENT_DATE}
            </div>
        </td>
    </tr>
    <tr>
    <td class="FieldLabel">Packing
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {PACKING}
        </div>
    </td>
</tr>
<tr>
    <td class="FieldLabel">Process Time (days)
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {Process_Time}
        </div>
    </td>
</tr>
<tr>
    <td class="FieldLabel">Courier Service
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {COURIER}
        </div>
    </td>
</tr>
<tr>
    <td class="FieldLabel">Weight Charged
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {WEIGHT_CHARGEDBY_COURIER}
        </div>
    </td>
</tr>
<tr>
    <td class="FieldLabel">Lead Id
    </td>
    <td>
        <div class="FieldPlaceholder DataOnly">
            {Lead_Id}
        </div>
    </td>
</tr>
    </table>
    </td>
</tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:08:59.467

问题是您的主桌子宽度小于您放入的三张桌子。所以第三张桌子`Quantity`越来越挤了。我添加了边框颜色以更好地理解整个事情。

[http://jsfiddle.net/btevfik/Hkcsr/](http://jsfiddle.net/btevfik/Hkcsr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:20:44.807

避免使用表格来创建布局。[在这里](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)阅读。

现在，如果您想使用包含表单元素的 div 创建两个列式布局，请参阅我的这个简单的 html 标记：

像这样创建一个容器 CSS 类：

```
.table-container
{
    margin: 2px;
    border: 1px solid #e7e7e7;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    width: auto;
    height: auto;
    position: relative;
}

.property-row
{
  margin: 5px;
  overflow: hidden;
}
.property-name
{
  width: 150px;
  text-align: right;
  padding: 5px;
  color: #777777;
  vertical-align: middle;
  float: left;
} 
```

并像这样使用它：

```
 <div class="table-container float-left mediumPercentWidth">
     <div class="property-row">
        <div class="property-name">
          <label>Lead Src Code</label>
       </div>
        <div>
           <input type="text" class="mediumPercentWidth" />
        </div>
     </div>
  </div> 
```

我在[这里创建了一个示例](http://codepen.io/manishmishra256/pen/zpEjH)。

在这个lookout中，如何使用 css property 并排放置两个 div `float:left`。如何在大多数地方仅定义百分比宽度，以使其具有流畅的布局。注意标记的模式。

# php - Create a custom node in drupal by PHP

> ID：15563051
> 
> 赞同：2
> 
> 时间：2013-03-22T05:00:54.630
> 
> 标签：php, drupal, drupal-modules

I have a created a PHP file that takes parameters from URL and creates a drupal node in drupal 7

CODE:

```
include_once './includes/bootstrap.inc';
define('DRUPAL_ROOT', getcwd());
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$node=new stdClass;
$node->title='ABCD';
$node->type='order';
$node->language=LANGUAGE_NONE;
$node->uid=1;
$node->field_name['und'][0]['value']='ABC';
$node->field_contact['und'][0]['value']='1234567890';
$node->field_addr['und'][0]['value']='LMNOPQRST';
$node->field_email['und'][0]['value']='abc@abc.com';
$node->field_orderdetails['und'][0]['value']='fgheghfgjhgfhj';
$node->field_transaddr['und'][0]['value']='hdfghwgfhwgj';
$node->field_outletid['und'][0]['value']='MCK01';
node_save($node);

?> 
```

Do i need to specify in drupal about this node creation through PHP?..

I am new to drupal.Thank in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:31:38.777

您的代码足以创建节点。以下是微调的一些更改：

```
include_once './includes/bootstrap.inc';
define('DRUPAL_ROOT', getcwd());
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$node = new stdClass();
$node->type = 'order';
node_object_prepare($node); // Prepare node object with default values. 

$node->title = 'ABCD';
$node->language = LANGUAGE_NONE; // LANGUAGE_NONE is a constant with value "und".
$node->uid = 1;
$node->field_name[LANGUAGE_NONE][0]['value']='ABC';
$node->field_contact[LANGUAGE_NONE][0]['value']='1234567890';
$node->field_addr[LANGUAGE_NONE][0]['value']='LMNOPQRST';
$node->field_email[LANGUAGE_NONE][0]['value']='abc@abc.com';
$node->field_orderdetails[LANGUAGE_NONE][0]['value']='fgheghfgjhgfhj';
$node->field_transaddr[LANGUAGE_NONE][0]['value']='hdfghwgfhwgj';
$node->field_outletid[LANGUAGE_NONE][0]['value']='MCK01';

node_save($node); 
```

但是，无需将此片段用作外部文件。Drupal 充满了[钩子](http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7)和/或您可以实现[`hook_cron`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7)在维护期间执行您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T12:03:10.753

您的代码非常好。只有您需要做的是在特定事件（在菜单上，或任何节点添加/编辑/删除事件）触发它。

# gwt - 当模块打包为 pom 时，在 maven 中跳过 GWT 编译

> ID：15563057
> 
> 赞同：5
> 
> 时间：2013-03-22T05:01:30.477
> 
> 标签：gwt, gwt-maven-plugin

我试图在另一场战争中重用组装好的 gwt 编译。为此，我尝试将当前 maven 模块的包装从`war`更改为`pom`. 然后我计划使用 maven-assembly-plugin 压缩 gwt 的模块 js 输出，然后在另一个 war 模块中使用它。

我尝试将包装标签从[Validation sample](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/pom.xml)`<packaging>war</packaging>`中 `<packaging>pom</packaging>`的 pom.xml更改为。gwt-maven-plugin 从不进入编译。相反，它跳过了编译！！！！！！

1.  **`What is happening?`**
2.  **`Is this expected?`**
3.  **`Is there any workaround?`**

![在此处输入图像描述](../Images/d8afd377864a457d22bc655040f40293.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:22:14.237

要将多个 gwt 编译的模块连接到一个文件中，使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)`.war`非常容易

1.  将所有 gwt 示例打包为习惯 (.war)，然后安装它们，`mvn install`或者`mvn deploy`如果您有私有 maven 存储库。
2.  创建一个类型为 的空 maven 模块`war`，没有代码，但具有 maven 文件夹结构，您可以在此处放置所需的任何其他内容，例如全局`src/main/webapp/index.html`.
3.  将新模块配置为使用`maven-dependency-plugin`如下所示的内容，然后运行`mvn package`：

    ```
    <dependency>
        <groupId>my.group</groupId>
        <artifactId>example1</artifactId>
        <version>...</version>
        <type>war</type>
    </dependency>
    ...
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-dependency-plugin</artifactId>
      <executions>
        <execution>
          <id>unpack-gwt-examples</id>
          <phase>prepare-package</phase>
          <goals>
            <goal>unpack-dependencies</goal>
          </goals>
          <configuration>
            <includeGroupIds>my.group</includeGroupIds>
            <includes>**/example1/**</includes>
            <outputDirectory>${project.build.directory}/${project.artifactId}-${project.version}</outputDirectory>
          </configuration>
        </execution>
      </executions>
    </plugin> 
    ```

最后，与 gwt-maven-plugin 相关，与任何其他 maven 插件一样，选择 pom-packaging 生命周期的适当阶段（打包、安装或部署）就足够了：

```
 ...
  <packaging>pom</packaging>
  ...
     <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        ...
        <configuration>
        ...
        </configuration>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>compile</goal>
                </goals>
            </execution>
        </executions>
      </plugin> 
```

不幸的是，gwt-maven-plugin 特别禁止在打包为 pom 时进行编译，请查看[CompileMojo.java 的 #269 行](https://github.com/gwt-maven-plugin/gwt-maven-plugin/blob/master/src/main/java/org/codehaus/mojo/gwt/shell/CompileMojo.java#L269)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:05:36.543

您可以将可重用模块（您在评论中作为*示例*提到）创建为没有入口点的单独 GWT 项目。将它们打包`jar`并添加以下内容作为[资源](http://maven.apache.org/pom.html#Resources)：

1.  客户端源代码
2.  最终编译所需的其他资源项（图像、xml 文件等）

像这样的东西：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            ...
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/java</directory>
            <includes>
                <include>**/services/**</include>
                <include>**/client/**</include>
                <include>**/public/**</include>
                <include>**/*.gwt.xml</include>
            </includes>
        </resource>
    </resources>
</build> 
```

就是这样，您可以在任何其他 GWT 项目中重用它。`pom.xml`当您这样做时，您只需`import`在`*.gwt.xml`.

至于 Maven 的行为，似乎是正确的。[`pom`包装](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Default_Lifecycle_Bindings_-_Packaging_pom)正在经历`package`和阶段`install`和`deploy`

> 默认情况下，编译目标配置为在“准备包”阶段执行，以尽可能晚地运行。

您可以更改插件执行的阶段，但我认为这是有风险的，因为您无法确切知道在该`package`阶段何时会编译您的代码。

# actionscript-3 - webcam resolution on mac

> ID：15563059
> 
> 赞同：0
> 
> 时间：2013-03-22T05:01:43.023
> 
> 标签：actionscript-3, apache-flex, actionscript, air, flex4

I have an adobe air app that runs on windows. I got it running on Mac but the webcam resolution is bad. Im using logitech quickcam pro 9000\. on windows it is HD. in mac, it looks like a cheap webcam. surprisingly, the built in apple photo booth software displays a much better resolution using the same webcam. im using mac osx lion. is there hope? I dont see a mac driver for this particular webcam.

My code:

```
camera = Camera.getCamera();    
camera.setQuality(0, 100); 
camera.setMode(640, 480, 30, true);
camera.setMotionLevel(100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:27:26.687

请检查我对这个类似问题的回答

[如何使用 AS3 提高相机的质量？](https://stackoverflow.com/questions/6339398/how-to-increase-the-quality-of-the-camera-using-as3/6340091#6340091)

尝试从相机中获取最大尺寸并将质量设置为最高值。希望有帮助。

PS：短代码

```
 private function connectCamera():void 
    {
        cam.setMode(640, 480, 25); 
        cam.setQuality(0,100);
        vid             = new Video();
        vid.width       = cam.width;
        vid.height      = cam.height; 
        vid.attachCamera(cam);
        addChild(vid);    

        stage.addEventListener(MouseEvent.CLICK, clickHandler);
    }

    private function clickHandler(e:MouseEvent):void 
    {

        return;

        switch (cam.width) {
            case 160:
                cam.setMode(320, 240, 10); 
                break;
            case 320:
                cam.setMode(640, 480, 5); 
                break;
            default:
                cam.setMode(160, 120, 15); 
                break;
        } 
        removeChild(vid);           
        connectCamera();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:38:07.820

您好尝试将视频宽度和高度设置为 camera.width 和 camera.height 属性还将 FPS 设置为 15 我认为 30 FPS 对于相机来说太多了。

# orchardcms - Orchard throws 'The model item passed into the dictionary is of type Part but this dictionary requires a model of type VM

> ID：15563062
> 
> 赞同：0
> 
> 时间：2013-03-22T05:02:06.910
> 
> 标签：orchardcms, orchardcms-1.6

This is an editor for WebShop Global Settings. I needed to extend the editor with a ViewModel. It worked fine before I started but now crashes with the above error when it's invoked. What am I doing wrong?

Here's the driver:

```
public class WebShopSettingsPartDriver : ContentPartDriver<WebShopSettingsPart>
{
    private readonly ISiteService _siteService;
    private readonly IWebshopSettingsService _webshopSettings;
    protected override string Prefix { get { return "WebShopSettings"; } }

    private const string shapeName = "Parts_WebShopSettings_Edit";       
    private const string templateName = "Parts/WebShopSettings";    

    public WebShopSettingsPartDriver(IWebshopSettingsService webshopSettings, ISiteService siteService)
    {
        _webshopSettings = webshopSettings;
        _siteService = siteService;
    }

    protected override DriverResult Editor(WebShopSettingsPart part, dynamic shapeHelper)
    {
        var settings = _siteService.GetSiteSettings().As<WebShopSettingsPart>();

        var model = new WebShopSettingsVM
        {
            WebShopSettings = settings,
            ShippingProducts = _webshopSettings.ShippingProductRecords()
        };

        return ContentShape(shapeName,
            () => shapeHelper.EditorTemplate(TemplateName: templateName, Model: model, Prefix: Prefix)).OnGroup("WebShop");
    }
} 
```

}

Here is the Handler:

```
 public class WebShopSettingsPartHandler : ContentHandler {

    public WebShopSettingsPartHandler(IRepository<WebShopSettingsRecord> repository) {
        T = NullLocalizer.Instance;

        Filters.Add(new ActivatingFilter<WebShopSettingsPart>("Site"));
        Filters.Add(StorageFilter.For(repository));
        OnGetContentItemMetadata<WebShopSettingsPart>((context, part) => context.Metadata.EditorGroupInfo.Add(new GroupInfo("WebShop")));
    }
} 
```

And here is the first line of the View (which is in Views\EditorTemplates\Parts\WebShopSettings.cshtml):

```
@model Cascade.WebShop.ViewModels.WebShopSettingsVM 
```

The Placement.ini file has the following entry:

```
<Place Parts_WebShopSettings_Edit="Content:0" /> 
```

Here is the ViewModel:

```
public class WebShopSettingsVM
{
    public IEnumerable<ShippingProductRecord> ShippingProducts{ get; set; }

    [Required]
    public int? ShippingProductRecordId { get; set; }

    public WebShopSettingsPart WebShopSettings { get; set; }

    // Expose all the properties of the Part directly on the VM

    [Required]
    public string AdministratorEmailAddress
    {
        get { return WebShopSettings.AdministratorEmailAddress; }
        set { WebShopSettings.AdministratorEmailAddress = value; }
    }
    [Required]
    public string ContinueShoppingUrl
    {
        get { return WebShopSettings.ContinueShoppingUrl; }
        set { WebShopSettings.ContinueShoppingUrl = value; }
    }
    // and so on...
} 
```

After Bertrand's suggestion below I updated the View to:

```
@using Cascade.WebShop.ViewModels
@using Cascade.WebShop.Models
@{
    var vm = Model.Model as WebShopSettingsVM;
}
<fieldset>
    <legend>@T("Webshop")</legend>
    <div>
        <label for="@Html.FieldIdFor(x=>vm.AdministratorEmailAddress)">@T("Administrator email address")</label>
        @Html.TextBoxFor(x=>vm.AdministratorEmailAddress, new { @class = "textMedium" })
        @Html.ValidationMessage("AdministratorEmailAddress", "*")
... 
```

Insights and suggestions greatly appreciated -- I simply can't see what's wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:21:18.240

驱动程序的第二个副本，名称略有不同，位于“Helpers”目录中。毫不奇怪，我没有注意到这一点。'Helper' 驱动程序提供一个零件，而'正确' 驱动程序提供一个 VM。两者都被解雇了，因此无论我使用 VM 还是使用第 1 部分或其他两个驱动程序都会引发异常。

删除虚假驱动程序解决了这个问题。对不起伯特兰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:39:25.493

模型仍然是形状。删除指令，然后访问 Model.Model 以访问您的视图模型：Model 是形状，Model.Model 是形状上名为 Model 的属性。

只需将 Model.Model 转换为视图模型的类型。

# python - 如何安装 .sh 脚本？

> ID：15563064
> 
> 赞同：0
> 
> 时间：2013-03-22T05:02:17.730
> 
> 标签：python, shell

我写了一个名为“installcms.sh”的脚本，我把它放在/root

这是我的脚本

```
apt-get install python-setuptools python-imaging >> installcms.log > 2>&1

easy_install pip >> installcms.log > 2>&1

pip install django django-cms south django-appmedia >> installcms.log > 2>&1

django-admin.py startproject djangocmsproject >> installcms.log > 2>&1

cd djangocmsproject

rm settings.py

rm urls.py

cp /root/settings.py settings.py >> installcms.log > 2>&1

cp /root/urls.py urls.py >> installcms.log > 2>&1

mkdir templates

cd templates

cp /root/example.html example.html >> installcms.log > 2>&1

cd ..

python manage.py syncdb --all >> installcms.log > 2>&1

python manage.py migrate --fake >> installcms.log > 2>&1

python manage.py runserver >> installcms.log > 2>&1 
```

* * *

当我尝试使用命令“/root/installcms.sh”执行我的脚本时

我收到此错误

```
****/root/installcms.sh: line 2: syntax error near unexpected token `2'**

**/root/installcms.sh: line 2: `apt-get install python-setuptools python-imaging >> installcms.log > 2>&1'**** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:06:09.633

这：

```
>> installcms.log > 2>&1 
```

应该：

```
>> installcms.log 2>&1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:07:04.373

从错误消息中，您的脚本不正确。

以下重定向无效：`>> installcms.log > 2>&1`

它应该是：`>> installcms.log 2>&1`

您可以查看[http://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)以进一步解释重定向在 bash 中的工作原理

（我假设您的默认 shell 是 bash，但其他 shell 中的重定向应该是相同的）

# asp.net - 如何在所有现有节点中升级新添加的属性？

> ID：15563068
> 
> 赞同：1
> 
> 时间：2013-03-22T05:02:41.343
> 
> 标签：asp.net, deployment, umbraco

我们正在管理一个拥有超过 2000 个节点的 umbraco 站点。我们最近在我们的一种主文档类型中添加了一个新属性，因为它是一个新属性，现有节点没有属性值。我们必须更新值在部署新更改之前，在每个节点中删除该属性。手动更新值非常困难，因为它需要很多时间。我们计划使用一次性升级 aspx 页面或用户控件来完成这项工作。有没有人遇到过这种情况？如何制作一次性升级页面？任何帮助，将不胜感激 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:01:24.507

我相当确定这不在核心中，并且没有为此目的创建一个包。但是创建一个包含 razor (cshtml) 脚本的宏非常简单，该脚本会更新特定节点的所有后代的单个属性：

类似的东西（仅来自 2 级课程的记忆）：

```
var nodes = @Model.DescendantsOrSelf(-1); //-1 is the root node
foreach (var node in nodes)
{
  Document doc = new Document(node.Id);
  doc.getProperty("yourProperty").Value = "xxx"; // the getProperty looks wrong, I know
  doc.Publish(new User(0));  //User 0 is the admin user
  umbraco.library.UpdateDocumentCache(doc.Id);
} 
```

这个很棒的包[http://our.umbraco.org/projects/developer-tools/content-maintenance-dashboard-package](http://our.umbraco.org/projects/developer-tools/content-maintenance-dashboard-package)进行了大规模更新，但上次我检查它并没有更新单个字段 - 但它现在可能会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:41:45.650

如果您转到以下网址，我会认为重新发布 xml 缓存应该这样做：

/umbraco/dialogs/republish.aspx?xml=true

# c# - How to read values separated by semi colon in a sharepoint user profile?

> ID：15563069
> 
> 赞同：0
> 
> 时间：2013-03-22T05:02:54.430
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

I have a field named Responsibility in a user profile on sharepoint site which contains value like "abc; def; ghi". I want to read these values into an array. When i am using [propertyconstants.responsibility].value only abc is being read. How to read abc, def and ghi separately?

My code is:

```
string xpUser = up[PropertyConstants.Responsibility].Value.ToString();
string[] expUser = xpUser.Split(';'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:17:10.313

我假设你有这样的东西

```
string xpUser =  "abc; def; ghi"; 
```

你想要 abe, def & ghi 分别然后这样做

```
string[] arrayUser = xpUser.Split(';');
foreach(string user in arrayUser)
{
   //Do what you want with **user** , now this user will have values that you want 1 by 1
   //if you see the value of user, 1st time you will get abc, 2nd time def , 3rd time ghi
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:19:46.853

你的回答似乎暗示你想用标记“;”分割（因为你说你想要“abc”而不是“abc”）

这是一个演示这样做的单元测试。

```
 [Test]
 public void SplitStringByString()
 {
    string input = "abc; def; ghi";
    string[] expected = new[] {"abc", "def", "ghi"};

    var result = input.Split(new [] { "; " }, StringSplitOptions.None);

    Assert.That(result, Is.EquivalentTo(expected));
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:46:03.593

感谢大家的帮助。

我终于能够找到解决方案

```
 var strUser = up.GetProfileValueCollection(PropertyConstants.Responsibility); 
```

# jquery - jquery组合框上的调用方法

> ID：15563070
> 
> 赞同：1
> 
> 时间：2013-03-22T05:03:04.370
> 
> 标签：jquery, autocomplete, combobox

仍在尝试找出 jQuery。我正在使用带有组合框的自动完成小部件。我需要在页面加载和选择另一个组合框时显示下拉列表。所以，我试图在组合框代码上添加自动完成搜索方法，但我不知道如何。我尝试过的方法不起作用。这是我尝试过的最后一件事。你会看到我在底部添加了搜索功能。谢谢您的帮助。

我现在收到此错误：

> 未捕获的错误：无法在初始化之前调用自动完成的方法；试图调用方法“搜索”

这是我的调用代码：

```
$("select").combobox();
$("select").combobox("search",""); 
```

这是我的小部件代码：

```
(function( $ ) {
$.widget( "ui.combobox", {
  _create: function() {
    var self = this;
    var select = this.element.hide(),
      selected = select.children( ":selected" ),
      value = selected.val() ? selected.text() : "";
    var input = $( "<input />" )
      .insertAfter(select)
      .val( value )
      .autocomplete({
        delay: 0,
        minLength: 0,
        source: function(request, response) {
          var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
          response( select.children("option" ).map(function() {
            var text = $( this ).text();
            if ( this.value && ( !request.term || matcher.test(text) ) )
              return {
                label: text.replace(
                  new RegExp(
                    "(?![^&;]+;)(?!<[^<>]*)(" +
                    $.ui.autocomplete.escapeRegex(request.term) +
                    ")(?![^<>]*>)(?![^&;]+;)", "gi"),
                  "<strong>$1</strong>"),
                value: text,
                option: this
              };
          }) );
        },
        select: function( event, ui ) {
          ui.item.option.selected = true;
          self._trigger( "selected", event, {
            item: ui.item.option
          });
        },
        change: function(event, ui) {
          if ( !ui.item ) {
            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
            valid = false;
            select.children( "option" ).each(function() {
              if ( this.value.match( matcher ) ) {
                this.selected = valid = true;
                return false;
              }
            });
            if ( !valid ) {
              // remove invalid value, as it didn't match anything
              $( this ).val( "" );
              select.val( "" );
              return false;
            }
          }
        }
      })
      .addClass("ui-widget ui-widget-content ui-corner-left");

    input.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li></li>" )
        .data( "ui-autocomplete-item", item )
        .append( "<a>" + item.label + "</a>" )
        .appendTo( ul );
    };

    $( "<button> </button>" )
    .attr( "tabIndex", -1 )
    .attr( "title", "Show All Items" )
    .insertAfter( input )
    .button({
      icons: {
        primary: "ui-icon-triangle-1-s"
      },
      text: false
    })
    .removeClass( "ui-corner-all" )
    .addClass( "ui-corner-right ui-button-icon" )
    .click(function() {
      // close if already visible
      if (input.autocomplete("widget").is(":visible")) {
        input.autocomplete("close");
        return;
      }
      // pass empty string as value to search for, displaying all results
      input.autocomplete("search", "");
      input.focus();
    });
  },
  search: function(value) {
    this.element.autocomplete("search", value);
    this.element.focus();
  },
  destroy: function() {
    this.input.remove();
    this.button.remove();
    this.element.show();
    $.Widget.prototype.destroy.call( this );
  }
});
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:16:19.553

这是因为您的`search`方法试图在未使用`autocomplete`的`select`元素上使用，`autocomplete`而不是动态添加的`input`元素

```
(function($) {
    $.widget("ui.combobox", {
        _create : function() {
            var self = this;
            var select = this.element.hide(), selected = select
                    .children(":selected"), value = selected.val() ? selected
                    .text() : "";
            var input = $("<input />").insertAfter(select).val(value)
                    .autocomplete({
                        delay : 0,
                        minLength : 0,
                        source : function(request, response) {
                            var matcher = new RegExp($.ui.autocomplete
                                            .escapeRegex(request.term), "i");
                            response(select.children("option").map(function() {
                                var text = $(this).text();
                                if (this.value
                                        && (!request.term || matcher.test(text)))
                                    return {
                                        label : text
                                                .replace(
                                                        new RegExp(
                                                                "(?![^&;]+;)(?!<[^<>]*)("
                                                                        + $.ui.autocomplete
                                                                                .escapeRegex(request.term)
                                                                        + ")(?![^<>]*>)(?![^&;]+;)",
                                                                "gi"),
                                                        "<strong>$1</strong>"),
                                        value : text,
                                        option : this
                                    };
                            }));
                        },
                        select : function(event, ui) {
                            ui.item.option.selected = true;
                            self._trigger("selected", event, {
                                        item : ui.item.option
                                    });
                        },
                        change : function(event, ui) {
                            if (!ui.item) {
                                var matcher = new RegExp("^"
                                                + $.ui.autocomplete
                                                        .escapeRegex($(this)
                                                                .val()) + "$",
                                        "i"), valid = false;
                                select.children("option").each(function() {
                                            if (this.value.match(matcher)) {
                                                this.selected = valid = true;
                                                return false;
                                            }
                                        });
                                if (!valid) {
                                    // remove invalid value, as it didn't match
                                    // anything
                                    $(this).val("");
                                    select.val("");
                                    return false;
                                }
                            }
                        }
                    }).addClass("ui-widget ui-widget-content ui-corner-left");

            this.input = input;
            input.data("ui-autocomplete")._renderItem = function(ul, item) {
                return $("<li></li>").data("ui-autocomplete-item", item)
                        .append("<a>" + item.label + "</a>").appendTo(ul);
            };

            $("<button> </button>").attr("tabIndex", -1).attr("title",
                    "Show All Items").insertAfter(input).button({
                        icons : {
                            primary : "ui-icon-triangle-1-s"
                        },
                        text : false
                    }).removeClass("ui-corner-all")
                    .addClass("ui-corner-right ui-button-icon").click(
                            function() {
                                // close if already visible
                                if (input.autocomplete("widget").is(":visible")) {
                                    input.autocomplete("close");
                                    return;
                                }
                                // pass empty string as value to search for,
                                // displaying all results
                                input.autocomplete("search", "");
                                input.focus();
                            });
        },
        search : function(value) {
            this.input.autocomplete("search", value);
            this.input.focus();
        },
        destroy : function() {
            this.input.remove();
            this.button.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery);

$("select").combobox();
$("select").combobox("search",""); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/D4SFv/)

# jquery - SQL Server、jQgrid：寻呼机和搜索工具不起作用

> ID：15563076
> 
> 赞同：0
> 
> 时间：2013-03-22T05:03:36.490
> 
> 标签：jquery, sql-server-2008, jqgrid

总的来说，我对 jQuery 和 Javascript 非常陌生，所以我很难理解它是如何工作的。我正在使用 jQgrid 来显示 SQL Server 中运行的数据库中的某些行，我已经能够显示表中的信息，并且能够降序或升序排序，甚至显示更多记录。唯一不工作的是分页和搜索工具，我真的不明白为什么它不工作，因为我理解一旦它加载数据，它在本地操作它并且它不需要做对服务器的任何更多请求。会是什么呢？另外，我进行了研究，发现有一个名为“editurl”的变量，我不太了解它的用途。

这是我的 JavaScript 代码

```
jQuery(document).ready(function() {
        var myGrid = $("#mygrid").jqGrid({
            url:'admanagerjson.php',
            datatype: 'json',
            mtype: 'GET',
            colModel: [
                {name:'Sucursal', index:'Sucursal', width:20}, 
                {name:'Pedido', index:'Pedido', width:50}, 
                {name:'PedidoAdpro', index:'PedidoAdpro', width:50},
                {name:'FechaPedido', index:'FechaPedido', width:80, align:'right'}, 
                {name:'Cancelado', index:'Cancelado', width:20}, 
                {name:'FECHA_ACT', index:'FECHA_ACT', width:80, align:'right'}, 
                {name:'FechaEntrega', index:'FechaEntrega', width:80, align:'right'}, 
                {name:'PorcDesc', index:'PorcDesc', width:50, align:'right'},
                {name:'PC', index:'PC', width:50, sortable:false},
                {name:'Cliente', index:'Cliente', width:50, align:'right'},
                {name:'Nombre', index:'Nombre', width:150, align:'right'}, 
                {name:'ComoPaga', index:'ComoPaga', width:80, align:'right'}, 
                {name:'Articulo', index:'Articulo', width:80, sortable:false},
                {name:'Descripcion', index:'Descripcion', width:80, sortable:false},
                {name:'logo', index:'logo', width:80, sortable:false},
                {name:'linea', index:'linea', width:80, sortable:false},
                {name:'TotalArtPsos', index:'TotalArtPsos', width:80, sortable:false},
                {name:'PorcDesc', index:'PorcDesc', width:80, sortable:false},
                {name:'Cantidad', index:'Precio', width:80, sortable:false},
                {name:'Precio', index:'Precio', width:80, sortable:false},
                {name:'PComision', index:'PComision', width:80, sortable:false},
                {name:'Comision', index:'Comision', width:80, sortable:false},
                {name:'Asesor', index:'Asesor', width:80, sortable:false},
                {name:'Equipo', index:'Equipo', width:80, sortable:false},
                {name:'Refactura', index:'Refactura', width:80, sortable:false},
                {name:'quincena', index:'quincena', width:80, sortable:false},
                {name:'mes', index:'mes', width:80, sortable:false},
                {name:'anio', index:'anio', width:80, sortable:false},
                {name:'LineNum', index:'LineNum', width:80, sortable:false},
                {name:'SlpCode', index:'SlpCode', width:80, sortable:false},
                {name:'codigoLinea', index:'codigoLinea', width:80, sortable:false},
                {name:'U_Tipo', index:'U_Tipo', width:80, sortable:false},
                {name:'ModeloNegocio', index:'ModeloNegocio', width:80, sortable:false},
                {name:'EstatusAsesor', index:'EstatusAsesor', width:80, sortable:false},
                {name:'EstatusPedido', index:'EstatusPedido', width:80, sortable:false},
                {name:'U_Sucursal', index:'U_Sucursal', width:80, sortable:false}
            ],
            pager: '#mypager',
            rowNum: 10,
            rowList: [10, 20, 500],
            viewrecords: true,
            autowidth: true,
            sortname: 'Pedido',
            sortorder: 'desc'

        });
        myGrid.jqGrid('navGrid','#mypager',{edit:false,add:false,del:false,search:true});
    });` 
```

这是我的 php：

```
 $page = $_GET['page'];// get the requested page
        $limit = $_GET['rows'];// get how many rows we want to have into the grid
        $sidx = $_GET['sidx'];// get index row - i.e. user click to sort
        $sord = $_GET['sord']; // get the direction if(!$sidx)*/
        if(!$sidx) $sidx =1;
        // connect to the database
        $db = odbc_connect($dsn, $dbuser, $dbpassword) or die("Connection Error: " . odbc_error()); 
        $result = odbc_exec($db, "SELECT COUNT(*) AS count FROM Publi_vwAdmgrPedidos"); 
        $row = odbc_fetch_array($result); 
        $count = $row['count'];
        if( $count > 0 ) {
             $total_pages = ceil($count/$limit);
        }
        else {
             $total_pages = 0;
        }
        if ($page > $total_pages) $page=$total_pages;
        $start = $limit*$page - $limit; // do not put $limit*($page - 1)
        if($start <0) $start = 0; 
        $SQL = "SELECT TOP $limit * FROM Publi_vwAdmgrPedidos ORDER BY $sidx $sord";
        $result = odbc_exec($db, $SQL) or die("Couldn't execute query.".odbc_error());
        $response->page = $page;
        $response->total = $total_pages;
        $response->records = $count;
        $i=0;
        while($row = odbc_fetch_array($result)) {
         $response->rows[$i]['id']=$row['Pedido'];
         $response->rows[$i]['cell']=array($row['Sucursal'],
                                            $row['Pedido'],
                                            $row['PedidoAdpro'],
                                            $row['FechaPedido'],
                                            $row['Cancelado'],
                                            $row['FECHA_ACT'],
                                            $row['FechaEntrega'],
                                            $row['PorcDes'],
                                            $row['PC'],
                                            $row['Cliente'],
                                            $row['Nombre'],
                                            $row['ComoPaga'],
                                            $row['Articulo'],
                                            $row['Descripcion'],
                                            $row['logo'],
                                            $row['linea'],
                                            $row['TotarArtPsos'],
                                            $row['PorcDesc'],
                                            $row['Cantidad'],
                                            $row['Precio'],
                                            $row['PComision'],
                                            $row['Comision'],
                                            $row['Asesor'],
                                            $row['Equipo'],
                                            $row['Refactura'],
                                            $row['quincena'],
                                            $row['mes'],
                                            $row['anio'],
                                            $row['LineNum'],
                                            $row['SlpCode'],
                                            $row['codigoLinea'],
                                            $row['U_Tipo'],
                                            $row['ModeloNegocio'],
                                            $row['EstatusAsesor'],
                                            $row['EstatusPedido'],
                                            $row['U_Sucursal']);
         $i++;

        }
        echo json_encode($response);
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:09:34.723

这`editurl`是您为 jqGrid 的内联编辑功能执行创建、更新、删除功能的 URL。即当您在网格上编辑记录时，请求被发送到`editurl`处理。

您必须`$page`在查询中使用变量来获取请求的页面并将其数据作为 JSON 返回。请记住，对于每个页面，jqGrid 都要求服务器返回该页面，但在所有情况下，您只返回第一页。

您的查询可能类似于：

```
$SQL = "SELECT TOP $limit * FROM
(SELECT ROW_NUMBER()  OVER ( ORDER BY $sidx $sord)
as id_column, * FROM Publi_vwAdmgrPedidos) 
as table1 where table1.id_column >  ($page-1)*$limit "; 
```

**免责声明**：我没有检查查询，确保它没有错误。

**编辑：**

您可以在您的 URL 中检查这些参数以获取搜索条件。您必须从数据库中自行搜索（因为您没有使用本地数据）

```
searchField
searchString
searchOper 
```

# php - 生成人口热图：Mapreduce？

> ID：15563077
> 
> 赞同：2
> 
> 时间：2013-03-22T05:03:37.047
> 
> 标签：php, google-maps, hadoop, mapreduce, postgis

我有一个 MySQL 表包含

*   （亿）美国位置的纬度/经度坐标
*   居住在该地点一平方英里半径内的人数

**问题：**在 Google 地图或 Openstreetmaps 上生成并覆盖热图后，必须在地图上鼠标光标所在的任何位置确定居住在平方英里半径内的人数。*（可以使用使用相邻数据点的简单平均）*

你如何生成这样的热图？是否推荐使用 Mapreduce？

![在此处输入图像描述](../Images/4da66f6ac5f0e85afb4eb13f199a99a2.png)

## 最初的想法

**热图必须在服务器端预渲染**

*将所有必要的点下载到浏览器上然后生成热图客户端可能是一个问题：必须从数据库中检索大量坐标（大量数据库负载）并传输到浏览器（大型数据集），此外浏览器必须处理生成热图的大量点。这太慢了，所以我想我们必须在服务器端预渲染热图并检索热图图块以在地图上重叠。*

**更好的选择：处理服务器端，渲染客户端**

我们可以通过将靠近的点聚集成单个点和权重/偏差来简化数据，而不是完全渲染热图服务器端并提供图像切片，然后将这些较小的简化点数据数据集（通过 JSON）发送到用于客户端渲染热图的浏览器（使用[heatmapjs](http://www.patrick-wied.at/static/heatmapjs/)）。发送 lat/lng 点而不是图像块将使应用程序/网站更具响应性。

这也将允许我们直接从 Javscript 读取热图强度值并在 Javascript/jQuery中实现悬停弹出框*（见上图） 。*如果我们改为将热图图块发送到浏览器，则不确定如何执行此操作。

**映射/减少？**

我们可能需要将作业（处理 1 亿个数据点）拆分为更小的块，并跨多个节点生成热图。这将每月进行一次。让几个节点生成热图让我想到了 mapreduce 和 hadoop，尽管我以前没有使用过它们。

**现有解决方案**

gheat 按需生成热图，因此对于我们的目的来说太慢了。然而，我们仍然需要一个瓦片服务器来处理我们预渲染的热图瓦片，也许我们可以使用 OSM 瓦片服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:57:06.330

要回答这个问题，我们必须首先考虑 map/reduce 非常适合的问题类型。map/reduce 的最佳问题是那些可以分解为可以单独解决的小子问题的问题。考虑此类问题的一个很好的类比可能是考虑 SQL`GROUP BY`构造，它有效地将结果集分成多个块并在每个块上计算一个聚合函数：如果您可以想象通过 a `GROUP BY`（尽管数据集大小）解决问题，那么它可能非常适合 map/reduce。

您的具体问题需要将数据划分为地理空间区域，然后为每个区域计算某种聚合。然后，您会将这些区域渲染为可叠加在 Google 地图上的二维平铺图像。

解决此问题的一种自然方法是从一个`map`函数开始，该函数接受来自数据源的行流，其中包括地理空间点（纬度/经度）和计数。函数的约定`map`是发出表单的元组`(key, value)`，因此在这种情况下，您的映射器需要“简化”该点以创建一个键——也就是说，降低其准确性，以便几个相邻点将共享相同的值-- 并将该值与当前点的人口一起返回。这是一些伪代码：

```
function map(row):
    key = simplify_point(row.point) # implementation of this function TBD by you
    emit(key, row.population_count) 
```

这将生成一个包含以下项目的中间数据集：

```
| key           | value |
| 37.78,-122.43 | 2303  |
| 37.78,-122.43 | 2009  |
| 37.78,-122.43 | 3001  |
| 37.78,-122.43 | 1238  |
| 37.79,-122.43 | 1343  |
| 37.79,-122.43 | 3005  |
| 37.79,-122.43 | 2145  |
| 37.79,-122.43 | 1536  | 
```

请注意，每个不同的键现在都有多个与其关联的值。该`reduce`函数的任务是获取一组具有相同键的值，并生成一个代表整个数据组的*单个值。*在不知道您手头问题的细节的情况下，我将假设确定每个组中的总人口就足够了，我们可以通过简单地将所有值相加来实现。一个`reduce`函数接收一个键和一个在映射器输出中具有该键的所有值的*列表*，因此我们的 reducer 可以看起来像这样简单（再次，在伪代码中）：

```
function reduce(key, population_counts):
    sum = 0
    for value in population_counts:
        sum = sum + value
    emit(key, sum) 
```

对于上面的示例结果集，这将导致以下最终结果：

```
| key           | value |
| 37.78,-122.43 | 8551  |
| 37.79,-122.43 | 8029  | 
```

然后，您可以获取这组较小的点和值，并将它们渲染为地图上不同颜色的区域，从而创建可视化热图。

尽管为了简单起见，我在这里使用了简单的整数计数，但实际上任何类型都可以用作值，因此您可以使用特定类或数组的实例，或者在给定单行数据时可以生成的任何其他值一次。在您的屏幕截图中，您显示了一个悬停提示，它给出了合并以产生给定数据点的记录数，您可以通过让减速器不仅求和而且同时计算行数，并在某种对象中一起返回两者或数据结构。

上面概述了 map/reduce 操作的逻辑工作流程，并描述了一种使用 map/reduce 创建热图的方法。我确定我没有完全解决您的问题，但是如果您可以在我上面描述的工作流程中界定您的问题，那么它可能非常适合 map/reduce 解决方案。我还专注于 map/reduce 的理论，而不是 Hadoop 中的具体实现，但希望您可以轻松地将我描述的概念映射到 Hadoop 提供的构造上。

# iphone - 如何从 iPhone 应用程序将图像共享到 Twitter

> ID：15563079
> 
> 赞同：0
> 
> 时间：2013-03-22T05:03:44.320
> 
> 标签：iphone

我在我的应用程序中使用 twitter+OAuth 和 MGTwitterengine 并成功向 twitter 发表评论。但现在我的问题是使用

[https://upload.twitter.com/1/statuses/update_with_media.json](https://upload.twitter.com/1/statuses/update_with_media.json)。我搜索了许多网站并通过使用此直接上传到 twitter api 获取源代码

[https://upload.twitter.com/1/statuses/update_with_media.json](https://upload.twitter.com/1/statuses/update_with_media.json)。这里的代码如下。

```
-(void)UploadimageToTwitter
{

    //NSString *boundary = @"----------------------------991990ee82f7";
    // NSURL *finalURL = [NSURL URLWithString:@"http://upload.twitter.com/1.1/statuses/update_with_media.json"];

    NSString *accessTokenKey = kOAuthaccessTokenKey;

NSString *secretTokenKey = kOAuthsecretTokenKey;

    NSURL *finalURL = [NSURL URLWithString:@"http://upload.twitter.com/1/statuses/update_with_media.json"];

    /*if (!finalURL) 
     {
     return nil;
     }*/

    OAConsumer *consumer = [[OAConsumer alloc] initWithKey:kOAuthConsumerKey secret:kOAuthConsumerSecret];
    //Shearing picture on twitter with Oauth without any third party api.

    OAToken *token = [[OAToken alloc] initWithKey:accessTokenKey secret:secretTokenKey]; //Set user Oauth access token and secrate key

    //OAConsumer *consumer = [[OAConsumer alloc] initWithKey:ConsumerToken secret:ConsumerSecrateKey]; // Application cosumer token and secrate key

    OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:finalURL consumer:consumer token:token realm: nil signatureProvider:nil];

    [theRequest setHTTPMethod:@"POST"];
    [theRequest setTimeoutInterval:120];
    [theRequest setHTTPShouldHandleCookies:NO];

    // Set headers for client information, for tracking purposes at Twitter.
    [theRequest setValue:DEFAULT_CLIENT_NAME    forHTTPHeaderField:@"X-Twitter-Client"];
    [theRequest setValue:DEFAULT_CLIENT_VERSION forHTTPHeaderField:@"X-Twitter-Client-Version"];
    [theRequest setValue:DEFAULT_CLIENT_URL     forHTTPHeaderField:@"X-Twitter-Client-URL"];

    NSString *boundary = @"--0246824681357ACXZabcxyz";// example taken and implemented.
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [theRequest setValue:contentType forHTTPHeaderField:@"content-type"];

    // NSMutableData *body = [NSMutableData dataWithLength:0];
    NSMutableData *body=[NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //status
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition:form-data; name=\"status\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"status\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    //[body appendData:[[NSString stringWithFormat:@"%@",status] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"%@",@"Latest Uploading"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n"]dataUsingEncoding:NSUTF8StringEncoding]];

    //[body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //media

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition:form-data; name=\"media_data[]\"; filename=\"sunflower.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    //[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"media[]\"; filename=\"index.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"Content-Type:application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]]; 
    UIImage *image1=[UIImage imageNamed:@"sunflower.jpg"];
    NSData *imageData = UIImageJPEGRepresentation(image1, 1.0); 

    // [body appendData:[[NSString stringWithString:[UIImageJPEGRepresentation(image, 1.0) base64EncodingWithLineLength:0]] dataUsingEncoding:NSUTF8StringEncoding]];
    // [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    //[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // [body appendData:[[NSString stringWithString:@"Honeymoon uploads image\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // --------------------------------------------------------------------------------
    // modificaiton from the base clase
    // our version "prepares" the oauth url request
    // --------------------------------------------------------------------------------
    [theRequest prepare];
    NSString *oAuthHeader = [theRequest valueForHTTPHeaderField:@"Authorization"];
    [theRequest setHTTPBody:body];

    NSHTTPURLResponse *response = nil;
    NSError *error = nil;

    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response error:&error];
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSLog(@"oAuthHeader = %@ =",oAuthHeader);
    NSLog(@"ResponsString = \n%@",responseString);
} 
```

使用此代码我得到响应字符串如下

```
{"errors":[{"message":"Internal error","code":131}]} 
```

这是服务器错误或我的错误。真的不知道我在上面的代码中哪里错了。

如果有人知道答案，请指导我。您的帮助挽救了我的生命，因为过去三个月我一直在使用 Twitpic、yfrog 和现在的 post/update_with_media 等三种不同的 api 搜索上述任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:09:14.863

```
NSString *status = tweetText.text;

TWRequest *sendTweet;
if(image1 == nil)
{
    sendTweet = [[TWRequest alloc] 
                            initWithURL:[NSURL URLWithString:@"https://api.twitter.com/1/statuses/update.json"] 
                            parameters:[NSDictionary dictionaryWithObjectsAndKeys:status, @"status", nil]
                            requestMethod:TWRequestMethodPOST];
}
else 
{
    sendTweet = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"]  
                            parameters:[NSDictionary dictionaryWithObjectsAndKeys:status, @"status",image1,@"media" , nil]
                            requestMethod:TWRequestMethodPOST];

    [sendTweet addMultiPartData:[tweetText.text dataUsingEncoding:NSUTF8StringEncoding] withName:@"status" type:@"multipart/form-data"];

    [sendTweet addMultiPartData:UIImagePNGRepresentation(image1) withName:@"media" type:@"multipart/png"];
}

sendTweet.account = self.account;
[sendTweet performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if ([urlResponse statusCode] == 200) 
    {
        dispatch_sync(dispatch_get_main_queue(), 
        ^{
            [self displayText:@"Tweet Done"];
        });
    }
    else 
    {
        NSLog(@"Problem sending tweet: %@", error);
    }
}]; 
```

希望此代码对您有用，对我有用，在此您可以仅发布图像和文本。祝你好运

# asp.net - 连接到在 IIS 上运行的 aspx 代码隐藏中的 COM 接口？

> ID：15563083
> 
> 赞同：4
> 
> 时间：2013-03-22T05:04:16.820
> 
> 标签：asp.net, windows, iis, com, atl

我创建了一个 Windows 服务（一个基于 Visual Studio ATL 向导的 exe），它公开了一个 COM 接口。作为进程内服务器或 Windows 服务运行没有问题。我需要一个 Windows 服务，因为我需要一些进程在 IIS 访问之外可用。

我一直在创建一些网页 (aspx/C#) 来调用我的服务，并且在 Visual Studio .NET 开发服务器中测试一切正常。现在，我正在尝试将网页推送到 IIS 7（在 Windows 7 上运行）以进行进一步测试。但是，当页面在 IIS 下运行时，对我的 COM 接口的调用都失败并出现错误

“由于以下错误，检索组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。”

我已验证该服务是：

*   在 HKCR\Clsid\ 下向 Windows 注册（注意，我注册了运行“myservice.exe /RegServer”，因为 regsvr32.exe 仅适用于 dll）
*   myservice.exe 具有 IIS_IUSRS 用户的读取和执行权限
*   是一个 64 位的 exe（所以应该在默认的 IIS 应用程序池空间中加载）
*   在 .NET 开发服务器调试器（但不是 IIS）中运行良好

任何想法为什么这不起作用？与 exe vs dll 中包含的 COM 接口有关吗？

IIS 调用 Windows 服务中公开的 COM 接口的任何可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:04:16.557

我相信您需要在 DCOM Config 下授予对站点应用程序池进程的访问权限才能使用您的 COM 对象。

*   转到组件服务
*   > 计算机 > 我的电脑 > DCOM 配置分支
*   在列表中找到您的服务的 AppID 或名称。右键单击它并选择属性。
*   打开安全选项卡
*   选择启动和激活权限并选择自定义。
*   授予应用程序池进程（可能是 ASPNET，但检查您站点的 IIS 应用程序池属性）以下内容：本地启动和本地激活。

如果这能解决您的问题，请告诉我们。

顺便：

```
> is a 64bit exe (so should load in the default IIS app-pool space) 
```

这并不完全正确。应用程序池是 ISS 控制的进程。无论如何，您的服务都在其自己的单独进程上运行。因此，您的服务与 IIS 应用程序池无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:46:14.443

It looks very much like a security/permissions problem - so first make sure that whatever user the IIS worker is running under has sufficient rights and in particular check that your ASPNET group has permission to use COM (I think it doesn't by default).

**EDIT** - after posting that, I did find another post that might help - [take a look here too](https://stackoverflow.com/a/14970156/2065121)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:09:41.627

多谢你们。我非常感谢您的回复。您的信息为我指明了正确的方向。问题确实是安全\权限问题。为了使问题更加复杂，每当我重建我的服务时，我为 IIS_IUSRS 设置的权限都会从 exe 中清除，因此我看到的一些故障是由于 service.exe 上的简单权限造成的。因此，如果您在开发期间开始看到间歇性错误访问您的 COM 对象，那么请在重新构建后检查您的 exe 的权限！我希望这对其他人有所帮助。

为了完成，这是我解决问题的方法：

*   将我的服务应用程序池的“身份”更改为“LocalSystem”（因为我的 COM 在系统帐户下运行的 Windows 服务中 - 大多数人不需要此级别）（IIS 管理器 | 应用程序池 | 右键单击​​您的应用程序池 | 高级设置 | 身份

# python - 编写一个接受两位数 # 的程序，将其分解

> ID：15563089
> 
> 赞同：5
> 
> 时间：2013-03-22T05:04:27.940
> 
> 标签：python

我目前正在使用 Python 创建一个程序，该程序接受用户输入的两位数，并将在单行上输出这些数字。

例如：我的程序会从用户那里得到一个数字，让我们使用 27

我希望我的程序能够打印“第一个数字是 2”和“第二个数字是 7”我知道我将不得不使用模块 (%)，但我对此很陌生，有点困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:06:32.107

尝试这个：

```
val = raw_input("Type your number please: ")
for i, x in enumerate(val, 1):
    print "#{0} digit is {1}".format(i, x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:13:14.350

从您的问题中不清楚您是要`%`用于字符串替换还是`%`用于余数。

为了完整起见，在整数上使用模运算符的数学方法如下所示：

```
>>> val = None
>>> while val is None:
...   try:
...     val = int(raw_input("Type your number please: "))
...   except ValueError:
...     pass
... 
Type your number please: potato
Type your number please: 27
>>> print 'The first digit is {}'.format(val // 10)
The first digit is 2
>>> print 'The second digit is {}'.format(val % 10)
The second digit is 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:14:12.703

把这两位数字想象成一个字符串。这样更容易抓住每个数字。使用 str() 会将整数更改为字符串。模数允许您将这些字符串放入您的文本中。

假设用户在名为 num 的变量中输入 27，代码为：

```
print 'The first digit is %s and the second digit is %s' % (str(num)[0], str(num)[1]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:01:29.967

Python的另一种编码方式：

```
val = raw_input("Type your number please: ")
for i in list(val):
    print i 
```

注意：`val`读作字符串。对于整数操作，请`list(str(integer-value))`改用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-23T08:01:08.840

```
two_digit_number = input("Type a two digit number: ")
print("The first digit is " + two_digit_number[0] + " The second digit is " + 
two_digit_number[1]) 
```

你不需要模块来解决这个问题。

# java - Javascript 相对于 InspectElement 问题的优势？

> ID：15563090
> 
> 赞同：0
> 
> 时间：2013-03-22T05:04:39.107
> 
> 标签：java, javascript, ajax, jakarta-ee

我们可以隐藏通过 InspectElement 提供给最终用户的代码吗？我们非常新，正在开发基于 javascript 和 java 技术的新产品。近 70% 完成了产品。我们在基于 javascript 的表单中做了很多问题（计算）。问题是最终用户可以轻松修改这些计算，并导致数据库中的信息错误。我们无法为所有这些表单编写服务器端验证 (70)。

# iphone - 'ImageEditorViewController' 没有可见的@interface 声明选择器'initWithImageAndSaveName:saveName:'

> ID：15563108
> 
> 赞同：1
> 
> 时间：2013-03-22T05:06:03.957
> 
> 标签：iphone, xcode

这几天我一直在搞砸。我是 xcode 的新手.. 但只是不明白为什么我不断收到此错误。我已经尝试过......我希望有人可以帮助我。感谢您的时间

```
- (void)longPressAction:(UILongPressGestureRecognizer *)gestureRecognizer
{
    CGPoint touchLocation = [gestureRecognizer locationInView:self.webView];

    NSString *javascript = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).src", touchLocation.x, touchLocation.y];
    NSString *imageUrl = [self.webView stringByEvaluatingJavaScriptFromString:javascript];

    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]];
    UIImage *image = [UIImage imageWithData:imageData];

    // Show the editor
    ImageEditorViewController *editView = [[ImageEditorViewController alloc] initWithImageAndSaveName:image saveName:[imageUrl lastPathComponent]];
    [self.navigationController pushViewController:editView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:11:08.340

在 .h 文件中查找“ `ImageEditorViewController`”，并查看其中是否有“ `initWithImageAndSaveName:saveName:'`”的方法声明。

还要确保将 ImageEditorViewController.h 文件导入到包含“ `longPressAction`”方法的 .m 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:11:38.857

它只是想告诉您不存在具有该名称的方法。有两个地方可以编写该方法。一种是在@interface 和@end 之间的头文件中。另一个位置是将它放在 .m 文件的 @implementation 和 @end 部分之间。我会推荐后者，除非您计划将此类子类化并让另一个类使用该方法。只在@implementation 中声明它，然后在您自己的方法中私下引用它，这样会更简洁一些。

但是，基本上，为了保持简短和简单，该方法当前不存在，如果您想使用它，您需要实现它。

# ios - 如何在 iOS 中使用 vDSP 将声音文件转换为 FFT

> ID：15563109
> 
> 赞同：0
> 
> 时间：2013-03-22T05:06:08.450
> 
> 标签：ios, cocoa-touch, accelerate-framework, vdsp

我是音频框架的新手，但经过一段时间的搜索，我发现了 iOS api 提供的用于数字信号处理的 Accelerate 框架。在我的项目中，我想将声音文件转换为 fft，以便我可以使用 fft 比较两个声音。那么我应该如何进行呢？我已经浏览了苹果 aurio touch 示例应用程序，但他们没有使用加速框架。任何人都可以帮我将声音文件转换为 fft，然后使用相关性进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:16:33.750

FFT 是一头复杂的野兽，不是可以在单个文本框中全面讨论的东西（我知道有成就的工程师已经参加了多个学期的课程，研究归结为傅里叶变换分析的主题）。由于 Accelerate 框架任务的性质，它也是一个重要的讨论话题。

我建议阅读[Mike Ash 的关于 FFT 的星期五问答](http://www.mikeash.com/pyblog/friday-qa-2012-10-26-fourier-transforms-and-ffts.html)，其中他介绍了 vDSP 函数的一些基本用法，以获取 FFT 值，作为起点。

有关卷积和互相关的讨论，请参阅[此 DSP Stack Exchange 答案](https://dsp.stackexchange.com/questions/736/how-do-i-implement-cross-correlation-to-prove-two-audio-files-are-similar)。

# php - SQL 选择是否基于另一个表匹配

> ID：15563114
> 
> 赞同：0
> 
> 时间：2013-03-22T05:06:24.620
> 
> 标签：php, sql, select

我有两张桌子 safe_customers safe_link

两者都有一个 Id 放置以在查找中相互匹配。

safe_customers "ID" 和 safe_link "SecondID"

我想要一个查询，仅当**PHP $var**与safe_link 中的**“FirstID”**匹配并且两个表中表示 ID 的字段匹配时才选择 safe_customers 中的行。

**安全客户**

```
--Name---ID---Age---Date

--Bob--- 33---32---10-32-90

--Kalr--- 21---22---10-2-90

--Bob--- 58---32---10-12-33 
```

**安全链接**

```
--FirstID---SecondID---

--   10   ---   21  ---

--   11   ---   33  ---

--   54   ---   58  --- 
```

因此**，如果 $var**为**10**，它将返回 safe_customers 中**ID 为 21的行**

```
--Kalr--- 21---22---10-2-90 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:11:54.297

尝试这个：

```
Select sc.* From safe_customers sc
Inner JOin safe_link sl on sc.ID=sl.secondId
Where sl.FirstID=@FirstID 
```

@FirstID 是你的 PHP $var

**编辑：**

如果要合并两个查询的结果，请执行以下操作：

```
Select sc.* From safe_customers sc
Inner JOin safe_link sl on sc.ID=sl.secondId
Where sl.FirstID=@FirstID
Union
Select * From safe_customers Where Name= 'Bob' and Age=32 
```

# django - Django 复制对象

> ID：15563120
> 
> 赞同：1
> 
> 时间：2013-03-22T05:06:53.120
> 
> 标签：django

我正在尝试在我的白板中实现评论功能。该功能允许学生对彼此的图片进行评论。

我有一个应用程序，学生可以在其中创建虚拟白板并在白板内发布与家庭作业相关的图片。

当用户点击查看特定图片下的评论时。该评论确实出现在该特定图片上，但相同的评论出现在它不假设的所有图片上。

我一直在尝试找出一种实现评论功能的方法，这是我唯一的想法。我怎么能解决这个重复问题，因为我一直在想办法把图片和评论联系起来。

看看白板 >

[http://imageshack.us/photo/my-images/836/90792660.jpg/](http://imageshack.us/photo/my-images/836/90792660.jpg/)

我的 whiteboard.html

```
 {% if picture %}
 <ul>
    {% for pet in picture %}

        {% if pet.image %}

    <a href ="{% url world:LikePicture pet.id %}"><br>
        <img src= "{{ pet.image.url }}" style="cursor:pointer"></a>
 <br>
    </a>
 </li>
        {% endif %}

 <br>
 <a href="{% url world:CommentCreator pet.id %}">View Comment</a><br/>
      {% for c in comment %}
           <br>{{ c.body }}</li>
           <br>{{ c.created}}</li>
           <br>{{ c.user}}</li>
 {% endfor %}
 {% endfor %}
                </ul>
 {% endif %} 
```

我的观点.py

```
 def Boat(request ,animal_id):
         if not request.user.is_authenticated():
             return HttpResponseRedirect(reverse('world:LoginRequest'))

    picture = Picture.objects.filter(whiteboard=animal_id)

    return render(request,'whiteboard.html',{'picture':picture})

 def CommentCreator(request,picture_id):
     p = Picture.objects.get(pk=picture_id)
     comment = Comment.objects.filter(picture=p)
     Whiteboard = WhiteBoard.objects.get(whiteboard=p)
     the_id = board.id
     picture = Picture.objects.filter(whiteboard=the_id)

     return render(request,'whiteboard.html',{'picture':picture,'comment':comment}) 
```

我的模型.py

```
 class WhiteBoard(models.Model):

     user = models.ForeignKey(User)
     name = models.CharField(max_length=100)
     picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
     def __unicode__(self):
         return self.name

 class Picture(models.Model):
     user = models.ForeignKey(User)
     Whiteboard = models.ForeignKey(WhiteBoard,blank=False,null=False,related_name='board')
     image = models.FileField(upload_to="images/",blank=True)
     description = models.TextField()
     is_primary = models.BooleanField(default=False)

     def __unicode__(self):
         return self.description
 class Comment(models.Model):
     created = models.DateTimeField(auto_now_add=True)
     user = models.ForeignKey(User)
     body = models.TextField()
     picture = models.ForeignKey(Picture) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:16:07.707

```
<a href="{% url world:CommentCreator pet.id %}">View Comment</a><br/>

{% for c in comment %}
    {% ifequal c.picture.id pet.id %}
        <br>{{ c.body }}</li>
        <br>{{ c.created}}</li>
        <br>{{ c.user}}</li>
    {% endifequal %}
{% endfor %} 
```

# php - 在整个 php 中使用包含而不是每个函数

> ID：15563124
> 
> 赞同：0
> 
> 时间：2013-03-22T05:07:11.633
> 
> 标签：php

我对php很陌生，我习惯于编写.net，我发现包含很难理解，并希望有人能帮助我理解如何在文件中正确使用包含一次，而不是在每个函数中..

以以下为例

```
<?php
include 'test.php';

function test($a)
{
 echo $value_from_test_php;
}
?> 
```

上面的代码似乎不起作用......但是下面的代码

```
<?php

function test($a)
{
 include 'test.php'

echo $value_from_test_php;
}
?> 
```

我很难弄清楚如何使文件中的所有函数都包含在内，而不是将其包含在每个函数中，非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:11:04.820

困扰你的是变量的范围，而不是包含，在 PHP 中，通常包含用于每个页面上包含公共页面/标记的地方，例如页脚、页眉等

有4种

*   `include`
*   `include_once`
*   `require`
*   `require_once`

唯一的区别是`include`如果出现问题会抛出一个错误，并将继续执行脚本，其中`require`将停止进一步的执行

您将在这里获得所有内容，包括 - [PHP 文档](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:09:18.697

这完全取决于您正在使用的文件中的内容`include`！我永远不会建议`include`在函数内部使用（或循环，或几乎任何带括号的东西）。请记住，被包含的文件的内容实际上只是“插入”位置，就在`include`语句所在的位置。所以无论你在什么范围内（全局、类、函数等）`include`，都是将在其中声明其内容的范围。

将完整的类和函数定义放在文件中，并将`include`它们放在将要使用它们的文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:10:48.820

第一个示例不起作用，因为您使用全局范围内的变量，如果您想使用它，请替换`$value_from_test_php`为`$GLOBALS['my_var_name']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T05:10:56.740

您的问题与包含无关，而是与[变量范围](http://php.net/manual/en/language.variables.scope.php)有关。默认情况下，在函数外部定义的变量在函数内部不可用。

如果不确切知道您要做什么，很难提出最佳解决方案，但是文档（上面链接）应该可以帮助您入门。

# hadoop - Pig：完成 UDF 后执行任务

> ID：15563125
> 
> 赞同：2
> 
> 时间：2013-03-22T05:07:13.973
> 
> 标签：hadoop, apache-pig

在 Hadoop 中，我有一个看起来像这样的 Reducer，用于将数据从先前的映射器转换为一系列不`InputFormat`兼容类型的文件。

```
protected void setup(Context context) {
    LocalDatabase ld = new LocalDatabase("localFilePath");
}

protected void reduce(BytesWritable key, Text value, Context context) {
    ld.addValue(key, value)
}

protected void cleanup(Context context) {
    saveLocalDatabaseInHDFS(ld);
} 
```

我正在用 Pig 重写我的应用程序，但无法弄清楚如何在 Pig UDF 中完成此操作，因为没有清理功能或其他任何东西来表示 UDF 何时完成运行。这怎么能在猪身上做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:31:54.017

我会说你需要编写一个[`StoreFunc`](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/StoreFunc.html)UDF，包装你自己的自定义 OutputFormat - 然后你就可以在输出格式的`RecordWriter.close()`方法中关闭。

但是，这将为每个 reducer 在 HDFS 中创建一个数据库，因此如果您希望将所有内容都放在一个文件中，则需要使用单个 reducer 运行或运行辅助步骤以将数据库合并在一起。

*   [http://pig.apache.org/docs/r0.10.0/udf.html#load-store-functions](http://pig.apache.org/docs/r0.10.0/udf.html#load-store-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:56:40.893

如果您希望在 UDF 结束时运行某些内容，请使用 finish() 调用。这将在您的 UDF 处理完所有记录后调用。每个 mapper 或 reducer 都会调用一次，与 reducer 中的清理调用相同。

# mysql - 从表中选择，直到找到给定值

> ID：15563127
> 
> 赞同：4
> 
> 时间：2013-03-22T05:07:24.780
> 
> 标签：mysql

我已经搜索了很长时间，但似乎找不到适合我的东西，因为每个类似的问题都是关于达到某一列的总和。

我正在寻找一种方法来搜索表中所有具有多个公共列值的记录 - 它们不是表中的连续记录，但当考虑到公共值时它们必须是连续记录 - 并检索所有记录直到一个特定的列具有不同的值。

给定数据：

```
PrimaryID   SecondaryID   TertiaryID   Limit       DateTime
   12            9             4           1       2013-03-22 00:00:14
   11            9             4           1       2013-03-22 00:00:13
   10           54            11           0       2013-03-22 00:00:12
    9            9             4           1       2013-03-22 00:00:11
    8            9            23           1       2013-03-22 00:00:10
    7            9             4           1       2013-03-22 00:00:09
    6            9             4           0       2013-03-22 00:00:08
    5            9            16           0       2013-03-22 00:00:07
    4           72            32           0       2013-03-22 00:00:06
    3            9             4           1       2013-03-22 00:00:05
    2            9             4           1       2013-03-22 00:00:04
    1            9             4           0       2013-03-22 00:00:03 
```

我正在尝试检索具有 SecondaryID=9 和 TertiaryID=4 的记录，直到 Limit=0（按 DateTime DESC 排序）。

使用 PrimaryID 12 作为起点，我希望得到以下结果：

```
PrimaryID   SecondaryID   TertiaryID   Limit       DateTime
   12            9             4           1       2013-03-22 00:00:14
   11            9             4           1       2013-03-22 00:00:13
    9            9             4           1       2013-03-22 00:00:11
    7            9             4           1       2013-03-22 00:00:09 
```

并以 PrimaryID 3 为起点：

```
PrimaryID   SecondaryID   TertiaryID   Limit       DateTime
    3            9             4           1       2013-03-22 00:00:05
    2            9             4           1       2013-03-22 00:00:04 
```

目前我正在检索 SecondaryID=9 和 TertiaryID=4 的每个结果，然后在 PHP 中对其进行循环 - 目前有数百个结果（并且每周都在增长），在生产中工作太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:53:59.147

我意识到我一直在以错误的方式进行此查询。

而不是从数据中的给定点“向后计数”以查看 Limit 何时首次按顺序变为 =1，而是需要查找上一次出现的 Limit=0，然后向前查询直到我的初始 PrimaryID。

涵盖我需要的所有内容的结果查询是

```
SELECT * FROM table1 WHERE SecondaryID='9' AND TertiaryID='4' AND `Limit`='1' AND PrimaryID<='3' AND `DateTime`>= (SELECT `DateTime` FROM table1 WHERE SecondaryID='9' AND TertiaryID='4' AND `Limit`='0' AND PrimaryID<='3' ORDER BY `DateTime` DESC LIMIT 1) ORDER BY `DateTime` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:13:48.417

查询将是

```
SELECT * FROM table_name 
WHERE PrimaryID <= 12(your_id) AND SecondaryID=9 and TertiaryID=4 AND Limit=1 
ORDER BY DateTime DESC 
```

它已经过测试并且可以正常工作

# jquery - 拖放到密码和确认密码字段中的值显示为纯文本

> ID：15563130
> 
> 赞同：2
> 
> 时间：2013-03-22T05:08:04.610
> 
> 标签：jquery, passwords, placeholder

我在注册页面中使用占位符。在那个密码和确认密码字段中。如果我们将一些值拖放到密码字段中，密码字段不会加密并且它正在显示该值。

![在此处输入图像描述](../Images/c29692c7e2512e38ea0a1e5b220170b3.png)

在 regForm 中，

```
->add('password','password',array('property_path'=>false,'attr'=>array('placeholder'=>'Password'))) 
->add('confirmPassword','password',array('property_path'=>false,'attr'=>array('placeholder'=>'Confirm password')))

In twigtemplate,

{{ form_widget(form.password) }}

{{ form_widget(form.confirmPassword) }} 

$(function() {
    // Invoke the plugin
    $('input, textarea').placeholder();
    var html;
    if (html) {
    $('<p class="note">' + html + '</p>').insertAfter('form');
    }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:11:06.460

检查您将输入字段类型定义为“密码”

```
<input type="password"> 
```

# java - 检索java TreeMap的所有叶子节点

> ID：15563133
> 
> 赞同：1
> 
> 时间：2013-03-22T05:08:15.007
> 
> 标签：java, map, binary-tree, treemap

有没有办法检索 Java 的所有叶节点`TreeMap`？

我有一个`TreeMap`这样的

```
TreeMap<String, FooBar> myTree = new TreeMap<String, FooBar>(new Comparator<String>() {
  public int compare(String o1, String o2)
  {
    int b1 = Integer.parseInt(o1, 2);
    int b2 = Integer.parseInt(o2, 2);
    return (b1 > b2 ? 1 : (b1 == b2 ? 0 : -2));
  }
}); 
```

如何获取这棵树的所有叶子节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:35:24.780

这对我来说没有多大意义。存储在叶子上的元素取决于 TreeMap 的实现如何平衡树。

但是，假设您出于某种原因需要这样做。要真正做到这一点，您需要做一些小技巧：编写一个封装在其中的类，该类`java.util`可以访问`TreeMap`.

经过一番挖掘，我发现JDK中默认的树实现是一棵红黑树，它的`Entry`实现如下所示：

```
static final class Entry<K,V> implements Map.Entry<K,V> {
    K key;
    V value;
    Entry<K,V> left = null;
    Entry<K,V> right = null;
    Entry<K,V> parent;
    boolean color = BLACK;

    .... 
```

似乎没有任何直接的方法可以找到根源。但是，如果你能抓住其中一个`Entry`，你可以遍历父节点一直到根，然后以任何你想得到叶子的方式[遍历树](http://en.wikipedia.org/wiki/Tree_traversal)`Entry`（ where`left == null`和`right == null`）。中序遍历将保留已排序的顺序。

但是，重申一下，我看不出你有什么好的理由要这样做。您还需要在`java.util`包中执行此操作才能调查这些`Entry`ies。但这里是代码，为了好玩。（如果不覆盖 JVM 上的安全限制，您将无法执行此操作。）

```
package java.util;

import java.util.TreeMap.Entry;

public class TreeMapHax {

    static <K,V> List<Entry<K, V>> getLeafEntries(TreeMap<K, V> map) {      
        Entry<K, V> root = map.getFirstEntry();
        while( root.parent != null ) root = root.parent;

        List<Entry<K,V>> l = new LinkedList<Entry<K,V>>();
        visitInOrderLeaves(root, l);
        return l;
    }

    static <K,V> void visitInOrderLeaves(Entry<K, V> node, List<Entry<K, V>> accum) {       
        if( node.left != null ) visitInOrderLeaves(node.left, accum);       
        if( node.left == null && node.right == null ) accum.add(node);      
        if( node.right != null ) visitInOrderLeaves(node.right, accum);
    }

    public static void main(String[] args) {
        TreeMap<String, Integer> map = new TreeMap<String, Integer>();

        for( int i = 0; i < 10; i++ )
            map.put(Integer.toString(i), i);

        System.out.println(getLeafEntries(map));
    }

} 
```

# java - org.xml.sax.SAXParseException 使用 XPATH 解析 XMl

> ID：15563140
> 
> 赞同：1
> 
> 时间：2013-03-22T05:08:39.660
> 
> 标签：java, xml, xpath

我正在尝试使用 XPATH 从 XML 中获取值。我收到以下异常：

```
 [Fatal Error] books.xml:4:16: The prefix "abc" for element "abc:priority" is not bound.
Exception in thread "main" org.xml.sax.SAXParseException; systemId: file:///D:/XSL%20TEST%20APP%20BACK%20UP/XMLTestApp/books.xml; lineNumber: 4; columnNumber: 16; The prefix "abc" for element "abc:priority" is not bound.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at javax.xml.parsers.DocumentBuilder.parse(Unknown Source)
    at xpath.XPathExample.main(XPathExample.java:18) 
```

我收到此错误是因为我的 XML 与正常的 XML 有点不同（请参见下文）：

```
<?xml version="1.0" encoding="UTF-8"?>
<inventory>
    <Sample>
    <abc:priority>1</abc:priority>  
    <abc:value>2</abc:value>        
    </Sample>
</inventory> 
```

这是我从上述 XML 中获取值的代码（Java）：

```
import java.io.IOException;
    import org.w3c.dom.*;
    import org.xml.sax.SAXException;
    import javax.xml.parsers.*;
    import javax.xml.xpath.*;

    public class XPathExample {

      public static void main(String[] args) 
       throws ParserConfigurationException, SAXException, 
              IOException, XPathExpressionException {

        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        domFactory.setNamespaceAware(true); // never forget this!
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse("books.xml");

        XPathFactory factory = XPathFactory.newInstance();
        XPath xpath = factory.newXPath();
        XPathExpression expr 
         = xpath.compile("//Sample/*/text()");////book/Sample[author='Neal Stephenson']/title/text()

        Object result = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) result;
        for (int i = 0; i < nodes.getLength(); i++) {
            System.out.println(nodes.item(i).getNodeValue()); 
        }

      }

    } 
```

如果我删除分号，我永远不会收到此错误。

是否可以使用 XPATH 从上述 XML 中获取内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:22:31.363

“*是否可以使用 Xpath 从上面提到的 XML 中获取内容？* ” - 我不这么认为。此 XML 格式不正确。

从规范（[http://www.w3.org/TR/REC-xml-names/#ns-qualnames](http://www.w3.org/TR/REC-xml-names/#ns-qualnames)）：

> Prefix 提供了限定名称的命名空间前缀部分，并且**必须与命名**空间声明中的命名空间 URI 引用相关联。[定义：LocalPart 提供限定名称的本地部分。]

为了用它做任何事情，我认为你必须添加一个命名空间声明。

**例子**

```
<inventory xmlns:abc="x">
    <Sample>
        <abc:priority>1</abc:priority>  
        <abc:value>2</abc:value>        
    </Sample>
</inventory> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:21:59.317

尝试不使用此行：

```
 domFactory.setNamespaceAware(true); // never forget this! 
```

尽管在没有命名空间意识的情况下运行通常是一个坏主意，但在这种特定情况下，这是有道理的，因为输入文件就是这样。

# jar - 具有类依赖关系的 JRuby 类路径问题

> ID：15563143
> 
> 赞同：1
> 
> 时间：2013-03-22T05:09:02.120
> 
> 标签：jar, jruby

我在 my_project/java/classes 中有一些编译的代码。我在 my_project/java/lib 中也有该代码的所有库作为 jars。

出于某种原因，我无法使该库中的 jar 可用，以便 java 类可以访问它们。

详情：[https ://gist.github.com/anonymous/5219067](https://gist.github.com/anonymous/5219067)

如您所见，我可以与我尝试导入的库进行交互。它肯定在那里，并且在类路径上。

我现在也尝试过几次都没有成功，尝试使用多种方式构建一个“胖”jar，其中包含捆绑在其中的所有依赖项，主要是 Eclipse 的导出，其中依赖项打包在 jar 中，并且 jar 索引显示它有正如错误所示，所有作为 matlabcontrol/** 的依赖项都包含 InvokationException 类。

当我在 Program.java 文件中导入它给我带来麻烦的类时，然后在调用相同的 Matlab.initialize() 函数时，我得到了另一个类的错误。所以我想知道我是否没有正确构建类，所以“import 'matlabcontrol.*”没有得到正确解决。

# c++ - 生成没有重复的字符串排列

> ID：15563146
> 
> 赞同：3
> 
> 时间：2013-03-22T05:09:13.573
> 
> 标签：c++, algorithm, set

我编写了一个通用程序来生成字符串排列但删除重复的情况。为此，我使用 .

```
void permute(char *a,int i, int n,set<char*> s)
{
    if(i==n)
    {
        if(s.find(a)==s.end()){
            cout<<"no dublicate"<<endl;
            cout<<a<<endl;
            s.insert(a)
        }
    }
    else{
        for(int j=i;j<n;j++)
        {
            swap(a[i],a[j]);
            permute(a,i+1,n,s);
            swap(a[i],a[j]);
        }
    }
}

int main()
{
    char a[]="aba";
    set <char*> s;
    permute(a,0,3,s);
    return 0;
} 
```

但结果并不如预期。它打印所有排列。谁能帮我解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:10:04.270

首先，您按值传递`set<> s`参数，这会丢弃您的每个插入，因为它仅在本地副本中完成`s`。但是，即使您将其更改为通过引用传递，它也不起作用，因为每次插入相同的 char* 值时，只会完成一次插入。为了使您的代码正常工作，我建议将您的函数原型更改为

```
void permute(string a,int i, int n,set<string>& s) 
```

这一切正常。

**更新：**带有描述的小改动的源代码

```
void permute(string a,int i, int n,set<string>& s)
{
    if(i==n)
    {
        if(s.find(a)==s.end()){
            cout<<"no dublicate"<<endl;
            cout<<a<<endl;
            s.insert(a);
        }
    }
    else{
        for(int j=i;j<n;j++)
        {
            swap(a[i],a[j]);
            permute(a,i+1,n,s);
            swap(a[i],a[j]);
        }
    }
}

int main()
{
    string a ="aba";
    set <string> s;
    permute(a,0,3,s);
    return 0;
} 
```

# java - 使用两个 DateFormat 将 Gson 转换为 json

> ID：15563155
> 
> 赞同：32
> 
> 时间：2013-03-22T05:09:52.047
> 
> 标签：java, gson

我的服务器 JSON 返回两种不同类型的 DateFormat。"MMM dd, yyyy" 和 "MMM dd, yyyy HH:mm:ss"

当我使用以下内容转换 JSON 时，这很好：

```
Gson gson = new GsonBuilder().setDateFormat("MMM dd, yyyy").create(); 
```

但是当我想要详细的日期格式并将其更改为此时，它会抛出异常 com.google.gson.JsonSyntaxException: Mar 21, 2013

```
Gson gson = new GsonBuilder().setDateFormat("MMM dd, yyyy HH:mm:ss").create(); 
```

gson 有没有办法为其 Json 转换处理两种不同的 DateFormat ？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-08-20T14:12:50.477

我面临着同样的问题。这是我通过自定义反序列化的解决方案：

```
new GsonBuilder().registerTypeAdapter(Date.class, new DateDeserializer());

private static final String[] DATE_FORMATS = new String[] {
        "MMM dd, yyyy HH:mm:ss",
        "MMM dd, yyyy"
};

private class DateDeserializer implements JsonDeserializer<Date> {

    @Override
    public Date deserialize(JsonElement jsonElement, Type typeOF,
            JsonDeserializationContext context) throws JsonParseException {
        for (String format : DATE_FORMATS) {
            try {
                return new SimpleDateFormat(format, Locale.US).parse(jsonElement.getAsString());
            } catch (ParseException e) {
            }
        }
        throw new JsonParseException("Unparseable date: \"" + jsonElement.getAsString()
                + "\". Supported formats: " + Arrays.toString(DATE_FORMATS));
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-02T19:39:53.007

虽然答案已被接受，但我想分享一个类似但更可扩展的解决方案。你可以在[这里找到要点](https://gist.github.com/jromero/9312366)。

DateDeserializer.java

```
public class DateDeserializer<T extends Date> implements JsonDeserializer<T> {

    private static final String TAG = DateDeserializer.class.getSimpleName();

    private final SimpleDateFormat mSimpleDateFormat;
    private final Class<T> mClazz;

    public DateDeserializer(SimpleDateFormat simpleDateFormat, Class<T> clazz) {
        mSimpleDateFormat = simpleDateFormat;
        mClazz = clazz;
    }

    @Override
    public T deserialize(JsonElement element, Type arg1, JsonDeserializationContext context) throws JsonParseException {
        String dateString = element.getAsString();
        try {
            T date = mClazz.newInstance();
            date.setTime(mSimpleDateFormat.parse(dateString).getTime());
            return date;
        } catch (InstantiationException e) {
            throw new JsonParseException(e.getMessage(), e);
        } catch (IllegalAccessException e) {
            throw new JsonParseException(e.getMessage(), e);
        } catch (ParseException e) {
            throw new JsonParseException(e.getMessage(), e);
        }
    }
} 
```

然后将不同的格式注册为...

```
sGson = new GsonBuilder()
                    .registerTypeAdapter(Event.EventDateTime.class,
                            new DateDeserializer<Event.EventDateTime>(
                                    Event.EventDateTime.DATE_FORMAT, Event.EventDateTime.class))
                    .registerTypeAdapter(Event.StartEndDateTime.class,
                            new DateDeserializer<Event.StartEndDateTime>(
                                    Event.StartEndDateTime.DATE_FORMAT, Event.StartEndDateTime.class))
                    .registerTypeAdapter(Event.SimpleDate.class,
                            new DateDeserializer<Event.SimpleDate>(
                                    Event.SimpleDate.DATE_FORMAT, Event.SimpleDate.class))
                    .create(); 
```

然后将每种格式映射到一个类...

```
public class Event {

    @SerializedName("created")
    private EventDateTime mCreated;

    //@SerializedName("updated")
    private EventDateTime mUpdated;

    ...

    @SerializedName("start")
    private ConditionalDateTime mStart;

    @SerializedName("end")
    private ConditionalDateTime mEnd;

    public static class ConditionalDateTime {
        @SerializedName("dateTime")
        private StartEndDateTime mDateTime;

        @SerializedName("date")
        private SimpleDate mDate;

        public SimpleDate getDate() {
            return mDate;
        }

        public StartEndDateTime getDateTime() {
            return mDateTime;
        }

        /**
         * If it is an all day event then only date is populated (not DateTime)
         * @return
         */
        public boolean isAllDayEvent() {
            return mDate != null;
        }
    }

    public static class EventDateTime extends Date {
        public static final SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
    }

    public static class StartEndDateTime extends Date {
        public static final SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZZZZZ");
    }

    public static class SimpleDate extends java.util.Date {
        public static final SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T19:54:00.337

自定义反序列化是必要的。一个不错的解决方案是使用 Apache Commons DateUtil，它可以一次处理多种日期格式。此外，JodaTime API 可能具有类似的功能。

# netbeans - 在 netbeans 中创建 midp 项目时出错

> ID：15563157
> 
> 赞同：1
> 
> 时间：2013-03-22T05:10:00.490
> 
> 标签：netbeans, midp

我想在 netbeans 中创建一个 midp（移动信息设备配置文件）项目。我遵循其官方网站上给出的指南。当我运行项目时，它给出如下错误...

> 连接设备 4 失败！原因：Emulator 4 在等待注册时终止！D:\java mobile projects\MyHelloMIDlet\nbproject\build-impl.xml:782：执行失败，错误代码为 1。BUILD FAILED（总时间：2 秒）

我已按照此链接中的说明正确配置了 Netbeans：

[http://netbeans.org/kb/docs/javame/quickstart.html#reqs](http://netbeans.org/kb/docs/javame/quickstart.html#reqs)

# mysql - 从 mysql 在 magento 中创建大量产品

> ID：15563159
> 
> 赞同：0
> 
> 时间：2013-03-22T05:10:34.493
> 
> 标签：mysql, magento

有没有什么短而快的方法可以从 mysql 中创建大量的 magento 产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:55:26.457

我的脚本允许将 csv 转换为 SQL 查询。它还没有创建产品、图像、关系，但允许导入大部分其他数据。一分钟 100000 个产品[https://github.com/ShaurmaLab/MagentoImport](https://github.com/ShaurmaLab/MagentoImport)

关注我们并尽快关注更新

# html - HTML5 画布比例计算

> ID：15563160
> 
> 赞同：1
> 
> 时间：2013-03-22T05:10:39.097
> 
> 标签：html, canvas, scale

我正在为游戏引擎开发关卡编辑器，我希望能够放大/缩小。

所以我尝试了`ctx.scale(1.1, 1.1)`但我不知道如何再次扩展它。我试过`ctx.scale(0.9, 0.9)`了，但我认为它不正确。

我在stackoverflow上尝试了google以及其他问题，但没有任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:18:16.243

好的，我通过实验弄清楚了：P

首先，确定一个衡量标准的因素。比如`1.1`
如果你 scale in `1.1`，你需要将其`1/(1*1.1)`缩放到再次缩小。

# iphone - 无法在 UITextField 中编辑文本

> ID：15563169
> 
> 赞同：2
> 
> 时间：2013-03-22T05:11:10.473
> 
> 标签：iphone, ipad, uitextfield

在我的应用程序中，当我尝试编辑（输入一些文本）`UITextField`时，光标只是闪烁，但没有输入任何字符，除了退格（只有当我有一些初始文本时才可能）、返回和切换字符类型。

这就是我声明的方式`UITextField`

```
 txtmail =[[UITextField alloc]init];
            [txtmail setFrame:CGRectMake(288, 51,264, 31)];
            [txtmail setBorderStyle:UITextBorderStyleRoundedRect];
            [txtmail setText:[NSString stringWithFormat:@"%@",appDelegate.Email]];
            [txtmail setFont:[UIFont fontWithName:@"TimesNewRoman" size:14]];
            txtmail.textColor =[UIColor grayColor];
            txtmail.delegate=self;
            [testScroll addSubview:txtmail]; 
```

在我的 .h 文件中，我给出了这样的

```
 @interface pot: UIViewController<UITextFieldDelegate>
{
    UITextField *txtmail;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:16:45.843

只需用你的那个类的方法替换这个方法，

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    return YES;
}    
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    return YES;
} 
```

# java - Java Android mysql 连接不适用于 4.0

> ID：15563177
> 
> 赞同：0
> 
> 时间：2013-03-22T05:11:56.460
> 
> 标签：java, android, mysql

我正在开发一个应用程序，当我在尝试连接到 MySQL DB 时使用 Android 2.3.3 时它工作正常。然后我用 Android 4.0 进行了测试，它给了我这个异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server 
```

提示似乎在这行代码上，就像我上面所说的，它适用于 2.3.3 而不是 4.0：

```
conn = DriverManager.getConnection(DB_URL, USER, PASS); 
```

我什至尝试在我的三星 Galaxy S3 上运行该应用程序，看看它是否可以正常工作，但没有成功。它没有崩溃，只是抛出了上述异常。有谁知道为什么要这样做。如果我没有提供足够的信息，请让我知道我还需要指定什么以使这一点更清楚。

我正在使用的 mysql 连接器在这里：

```
mysql-connector-java-5.1.23-bin.jar 
```

我希望这有助于试图找出问题所在。

代码：

```
...
static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";
...

try {
        // STEP 2: Register JDBC driver
        Class.forName(JDBC_DRIVER);

        // STEP 3: Open a connection
        conn = DriverManager.getConnection(DB_URL, USER, PASS);  << here is the exception it is telling me. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:51:35.433

从 Android 4.x 开始，不再允许在 UI 线程上进行网络操作。这是为了使 UI 整体响应更快，并防止“应用程序无响应”错误。由于 mySQL 对远程服务器的访问是网络操作，因此这很可能是罪魁祸首。因此，您需要将代码从 UI 线程移至[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或工作线程。

# iphone - XCode Instruments 使用 Core Animation 影响 FPS

> ID：15563178
> 
> 赞同：1
> 
> 时间：2013-03-22T05:12:11.997
> 
> 标签：iphone, ios, objective-c, core-animation, instruments

我正在开发一个游戏（在 Cocos2d 和 Box2d 中的 iOS 上）。当我在我的设备（iPhone 5）上调试时，我得到了 35 到 50 FPS - 但是当我使用 Instruments 并分析 Core Animation FPS 时，它总是 60 正负 1 FPS。

谁能想到对此的解释？

# css - CSS动画背景不适用于整个页面

> ID：15563179
> 
> 赞同：0
> 
> 时间：2013-03-22T05:12:22.157
> 
> 标签：css, animation, background

所以我最近发现了 CSS3 真正令人兴奋的动画特性，并在我的网站背景中应用了一个动画：

[http://ryanhammond.us/](http://ryanhammond.us/)

我的问题是动画仅适用于加载时在浏览器窗口中可见的页面部分。如果您转到上面的链接并向下滚动，您会明白我的意思，背景图像在网站的顶部是动画的，但当您向下滚动页面时不会...

有谁知道解决这个问题的方法，以便 bg 动画适用于整个页面？

以下是我的 CSS 代码的相关部分：

```
body
{
background-image:url('images/patterntest2.jpg');
background-repeat:repeat;
-webkit-animation:bgscroll 20s infinite linear;
   -moz-animation:bgscroll 20s infinite linear;
    -ms-animation:bgscroll 20s infinite linear;
     -o-animation:bgscroll 20s infinite linear;
        animation:bgscroll 20s infinite linear;
}

/*////////////////////////////////////////////////
--------------------------------------------------
*   Animations
-------------------------------------------------- 
////////////////////////////////////////////////*/

@-webkit-keyframes bgscroll {
from {background-position:0 0;}
to {background-position:0 -520px;}
}

@-moz-keyframes bgscroll {
from {background-position:0 0;}
to {background-position:0 -520px;}
}

@-ms-keyframes bgscroll {
from {background-position:0 0;}
to {background-position:0 -520px;}
}

@-o-keyframes bgscroll {
from {background-position:0 0;}
to {background-position:0 -520px;}
}

@keyframes bgscroll {
from {background-position:0 0;}
to {background-position:0 -520px;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:11:56.827

使用 Chrome，它对我来说也很好用。但如果你有问题，我想你可以尝试设置

```
background-size: cover; 
```

也许这会解决你的问题。

# php - 如何在 PHP 中找到结果后停止继续 strpos()

> ID：15563182
> 
> 赞同：1
> 
> 时间：2013-03-22T05:12:40.267
> 
> 标签：php

嘿伙计们，我正在使用以下内容：

```
$pos1 = strpos($currentStatus, '#');
$pos2 = strpos($currentStatus, '#', $pos1 + strlen('#')); 
```

如果它发现第一个标签然后寻找第二个标签，那么它的作用是获取第二个标签......所以它抓住了它，我将它存储到变量中并打印出来......问题？当我打印出来时，我得到了字符串的其余部分，例如：

```
$code = "Hi lets have #funfgs and than more #funny yup yup";
$pos1 = strpos($code , '#');
$pos2 = strpos($code , '#', $pos1 + strlen('#'));

echo substr($code , $pos2); 
```

结果：`#funny yup yup`

所以我想要带有连接词的主题标签，其余的被扔掉......我该怎么做呢？

大卫

编辑：

我想要的是：`#funny`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:18:35.203

您担心的答案是使用[`preg_match`function](http://php.net/manual/en/function.preg-match.php)。

所以，为了你的使用

```
$code = "Hi lets have #funfgs and than more #funny yup yup";
$pos1 = preg_match( "/.*#(\S+)/", $code , $match );
print_r( $match[1] ); 
```

* * *

您也可以`#`为您的比赛添加 。以下是你的做法：

```
$pos1 = preg_match( "/.*(#\S+)/", $code , $match );
echo $match[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:24:42.540

尝试这个 ：

```
$code = "Hi lets have #funfgs and than more #funny yup yup";

preg_match_all('/#(?P<hash>\w+)/',$code,$match);

echo "<pre>";
print_r($match['hash']); 
```

在这里，`#`您可以从数组中选择任何单词后获得所有单词`$match['hash']`

对于您的问题中提到的情况，请使用`echo $match['hash'][1];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:22:11.963

您可以使用爆炸功能：

```
$code = "Hi lets have #funfgs and than more #funny yup yup";
$pos1 = strpos($code , '#');
$pos2 = strpos($code , '#', $pos1 + strlen('#'));

$hashtag = explode(' ', substr($code , $pos2));

echo $hashtag[0]; 
```

# javascript - 是否可以从同一数组的函数内部引用“实时父”函数的变量？

> ID：15563183
> 
> 赞同：0
> 
> 时间：2013-03-22T05:12:48.690
> 
> 标签：javascript

我完全意识到这段代码在 javascript 的本质上有点奇怪，但是看看它：

```
var arr = [
    function () {
    this.b = "hello";
        //or var b = "hello";
        arr[1]();
    },
    function () {
        var str = RealtimeParentFunc.b;
        alert(str);
        // want to get "hello"
    }
];
// want to get "hello"!
arr[0](); 
```

也许这是不可能的，但我想知道是否有办法做到这一点。如何获取调用同一数组中的函数的数组函数的变量？

**更新**
我不得不回到这个问题并决定发布更新：当然我不能`arr[i]`从内部引用，但我必须强调上面的代码不应该太字面意思：它只是一个演示我想要什么；但是，如果我有一个先前在代码中定义的小型“辅助”功能，看起来我可以做我想做的事：

```
var a = function (i, v) {
        return arr[i]()[v];
    };
var arr = [
function () {
    var h = "hello, ";
    var n = a(2, "n");
    return {
        "h": h+n
    }
}, function () {
    var h = a(0, "h");
    alert(h)
}, function () {
    return {
        "n": "your name"
    }
}];
arr[1](); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:23:00.880

您不能同时定义一个数组并访问它的值，因为在创建时，`arr2`它还不存在。

直到到达最后的分号，才会`[ function(){ .. }, function(){ .. }]`创建数组并将其设置为。因此，在定义它时您无法引用。`arr2``;``arr2[1]()`

关于这一点，您可以做的是先定义数组，然后`.push()`将函数定义到其中，但您仍然限于按顺序执行：

```
var arr2 = [];

arr2.push(
function () {
    var b = "hello";
    //arr2[1](); // CAN'T DO THIS since arr2[1] doesn't exist
    return {
        b: b
    };
});
arr2.push(
function () {
    var str = arr2[0]().b;
    alert(str);
    // want to get "hello"
});
// want to get "hello"!
arr2[0]();
arr2[1](); 
```

见工作小提琴：http: [//jsfiddle.net/amyamy86/5k57X/](http://jsfiddle.net/amyamy86/5k57X/)

# android - Android NDK arm-linux-androideabi-g++：错误

> ID：15563186
> 
> 赞同：1
> 
> 时间：2013-03-22T05:13:14.317
> 
> 标签：android, eclipse, android-ndk

我正在尝试编译使用 L2CAP 蓝牙配置文件的 android-NDK 项目。当我在 eclipse 中使用 android-ndk-r8d-windows 和 android-sdk-4.2 进行编译时，出现以下错误

```
arm-linux-androideabi-g++: error: libbluetooth.so: No such file or directory
make: *** [obj/local/armeabi/libl2cap_BTComm.so] Error 1 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T15:46:08.303

自上次回复以来已经一年多了，但我认为答案是使用 g++ 的 -l 选项将带有 lib 的目录添加到 g++ 的搜索路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T13:40:07.127

在使用 ndk-build 构建 ndk 项目时，我在 Ubuntu 12.04 中遇到了同样的问题。
问题是缺少 g++ 编译器。安装 GNU C++ 编译器后，它现在可以工作了。

有趣的是，当我重新编译整个项目时，它又得到了同样的抱怨。（在我使用 cygwin 和 ubuntu 编译同一个项目并且它正在工作之前）

# javascript - 理解 Backbone / Javascript 中的“this”

> ID：15563188
> 
> 赞同：2
> 
> 时间：2013-03-22T05:13:21.540
> 
> 标签：javascript, backbone.js

我试图了解如何使用 Backbone 创建对象和方法。我从这样的事情开始：

```
Person = (function () {
  return Backbone.Model.extend({
    defaults: {
      name: 'jon' 
    },

    changeName: function (newName) {
     console.log(newName);
      this.name = newName;
    }
  });

})();

var p1 = new Person();
console.log(p1.get('name'));
p1.changeName("samanatha");
console.log(p1.get('name')); 
```

我不明白的是，为什么我的 p1.name 属性没有改变。我认为它与 this.name 中的“this”有关，因为我仍在试图掌握“this”的工作原理，但我认为我错过了其他东西，`this.name = newName`而且`name=newName`两者都不起作用。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T05:20:04.103

`name`包含在模型的属性中：`p1.attributes.name`. 这就是您使用`get()`. 如果要更改`name`，可以执行以下操作之一：

```
p1.set("name", "samantha")

p1.set({"name": "samantha"}) 
```

通过传入一个对象，后者允许您一次设置多个属性。

根据[文档](http://backbonejs.org/#Model-attributes)：

```
Please use set to update the attributes instead of modifying them directly. 
```

这样 Backbone 就可以做一些事情，比如`change`当你改变一个属性时触发一个事件，或者当你调用`toJSON()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:27:38.550

```
...
changeName: function (newName) {
 console.log(newName);
  this.name = newName;
}
... 
```

应该

```
...
changeName: function (newName) {
 console.log(newName);
  this.set ({'name': newName});
}
... 
```

[http://backbonejs.org/#Model-set](http://backbonejs.org/#Model-set)

# iphone - 如何根据数字做动作

> ID：15563190
> 
> 赞同：-3
> 
> 时间：2013-03-22T05:13:28.077
> 
> 标签：iphone, objective-c

我正在尝试在我的游戏中开一家商店。我有一个动态更新的标签

玩家拥有的金额。我的问题是我需要弄清楚某种类型的 if

声明所以如果玩家有足够的钱，做 x。如果没有，做你。我的钱标签是

现金金额。如果有人可以帮我写一个 if 语句，如果玩家有

足够的钱，如果他们不这样做，我将非常感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:19:37.243

假设 X = 250
玩家金钱 = Y

```
if (Y>=X) {
       //then your player have enough money
       //do your x here
    } else {
        //then your player does not have enough money
        //do your y here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:31:02.853

我假设您遇到的问题是您不知道如何确定标签中的金额。

如果是这样，您所要做的就是将其转换为整数，如下所示：

```
int val = [cashAmount.text intValue]; 
```

然后用它`val`来确定玩家是否有足够的。

# facebook-graph-api - 页面/用户创建的未来事件的 FQL 查询意外失败？

> ID：15563192
> 
> 赞同：1
> 
> 时间：2013-03-22T05:13:34.150
> 
> 标签：facebook-graph-api, facebook-c#-sdk, facebook-fql

我有一个 FQL 查询，我的网站用它来拉取各种用户或页面的活动事件，并将它们显示在地图上。这在去年运作良好。

```
SELECT eid, update_time
FROM event
WHERE creator = 139074072804205 
    AND (end_time >= now() OR (end_time = 'null' AND start_time >= now()))
    AND eid IN (SELECT eid FROM event_member WHERE uid = 139074072804205) 
```

但是，在过去 2 个月的某个时候，查询已停止工作，并返回以下错误：

```
{
  "error": {
  "message": "An unknown error has occurred.", 
  "type": "OAuthException", 
  "code": 1
  }
} 
```

任何人都可以阐明可能发生的事情吗？我在上面的示例中查询的页面是公开的，并且至少有 6 个公开事件。

[https://www.facebook.com/USCSEATTLE/events](https://www.facebook.com/USCSEATTLE/events)

我注意到的唯一怪癖是，如果我删除子句中的`creator = 139074072804205`条件`WHERE`，查询会返回结果......但当然它会返回页面已回复的所有未来事件，而不是页面创建的事件。

**编辑：**

似乎这是自 2013 年 3 月以来的一个已知错误。 [https://developers.facebook.com/bugs/501594683237232](https://developers.facebook.com/bugs/501594683237232)

# javascript - Facebook 墙贴不显示提要对话框

> ID：15563195
> 
> 赞同：2
> 
> 时间：2013-03-22T05:13:53.910
> 
> 标签：javascript, jquery, facebook-graph-api

我想在成功登录后在用户的墙上发帖，但我不想显示提要对话框弹出窗口来询问发布权限。我想默默发布。我已经看到 FB.api 提供了一种发布方式，但它不会像锚标记那样呈现 html 标记等。这是我的代码

```
 function postToFeed(){
            // calling the API ...              
            var obj = {
                method: 'feed',
                redirect_uri: 'url to website',
                link: 'link to website',
                picture: 'live picture url',
                name: "",
                caption: "",
                description:""
            };

            function callback(response) {
                document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
            }

            FB.ui(obj, callback);
        } 
```

我遵循了[Facebook 开发者代码](https://developers.facebook.com/docs/reference/dialogs/feed/)

# ruby - 当操作数之一为 nil 时，按位或返回布尔值

> ID：15563200
> 
> 赞同：2
> 
> 时间：2013-03-22T05:14:25.257
> 
> 标签：ruby

为什么按位或在这里返回一个布尔值。在所有运算符中，我最不希望按位运算符。

```
nil | 5 # => true
nil | 0 # => true
nil | true # => true
nil | false # => false
nil | nil # => false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:17:45.940

在同一主题中找到[答案:)](https://stackoverflow.com/a/15563154/125816)

原来[NilClass#|](http://www.ruby-doc.org/core-2.0/NilClass.html#method-i-7C) 被覆盖：

```
false | obj → true or false
nil | obj → true or false
Or—Returns false if obj is nil or false; true otherwise. 
```

# iphone - 什么将是取代自我的最佳方式

> ID：15563206
> 
> 赞同：0
> 
> 时间：2013-03-22T05:15:48.783
> 
> 标签：iphone, ios, objective-c, xcode, self

我有这段代码很好用，但出于好奇，我该如何替换`self`这个方法中的单词？顺便说一句，这是一个导航应用程序，并且一直在尝试各种方法来替换它。

视图控制器1

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

这是我尝试过的一种方法，

```
UIViewController *vc;

    vc = [[Viewcontroller1 alloc] initWithNibName:nil bundle:nil];
    [vc.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T05:20:14.990

无法更换`self`。因为在JAVA中`self`是一个`keyword`like 。`this` `keyword`

**简而言之**Apple/iOS 没有证明任何人都可以更改它的任何类型的功能。

* * *

```
 **EDIT** 
```

* * *

**从您的代码：**

```
UIViewController *vc;

    vc = [[Viewcontroller1 alloc] initWithNibName:nil bundle:nil];
    [vc.navigationController popViewControllerAnimated:YES]; 
```

`Viewcontroller1`创建对象并导航到另一个**viewController**以写入的最佳方式

```
Viewcontroller1 *objVC = [[Viewcontroller1 alloc] init]; 
[self.navigationController pushViewController: objVC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:37:48.807

您错误地解释了下面的代码行。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这条线基本上是做什么的。它确实从 viewController 中删除了当前 NavigationViewControlelr 的（即 self.navitionController ）堆栈

堆栈——基本上当你创建任何`viewController`和那个`view Controller`到.`navigationController``navigation controller``viewController``Stack``ViewController in stack's Way`

关于你下面的代码行

```
 UIViewController *vc;

 vc = [[Viewcontroller1 alloc] initWithNibName:nil bundle:nil];
 [vc.navigationController popViewControllerAnimated:YES]; 
```

为什么你要创建 ViewController 从 navigationViewController 中删除。它会增加内存开销

和关于更换`self`. 你不能 `self`像上面所说的'iPatel'那样替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:46:32.593

当您说要替换`self`为“一个对象或某物”时，`self` *是*一个对象。self 一词指的是函数所在类的当前实例。您无法替换`self`，因为那样您就不会引用 UIViewController 子类的当前实例。

为什么您的示例不起作用：

```
UIViewController *vc;

    vc = [[Viewcontroller1 alloc] initWithNibName:nil bundle:nil];
    [vc.navigationController popViewControllerAnimated:YES]; 
```

是因为它正在引用`Viewcontroller1`该类的新实例。弹出框不会出现，因为您没有将它添加到当前的视图控制器中；您正在将它添加到另一个从未显示的实例中。

# java - 在类中设置值不起作用

> ID：15563207
> 
> 赞同：0
> 
> 时间：2013-03-22T05:15:57.480
> 
> 标签：java, class, methods

我有一门课叫做货币

```
public class Monetary
{
    double value;
    String type;

    public Monetary()
    {
        value = 0;
        type = "";
    }

    public double getValue()
    {
        return value;
    }

    public void setValue(double x)
    {
        x = this.value;
    } 
```

我正在测试 get 和 set 方法，所以我制作了一个测试类，如下所示

```
 public class test 
{
    public static void main(String [] args)
    {

        double test = 5000;

        Monetary testM = new Monetary();

        testM.setValue(5000);

        System.out.println(testM.getValue());

    }
} 
```

问题是java打印的结果不是5000.0，而是0。我不明白为什么会这样。这些方法不正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:17:27.247

问题出在`setValue`方法上：

```
public void setValue(double x) {
    x = this.value;
} 
```

您正在为参数分配属性的当前值，它应该是向后的：

```
public void setValue(double x) {
    this.value = x;
} 
```

请注意，即使这样做，您也会得到类似的输出`5000.0000000...`。为了修复结果，您可以使用[`String#format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)or [`System.out.printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)：

```
System.out.println(String.format("%.2f", testM.getValue())); 
```

或者

```
System.out.printf("%.2f\n", testM.getValue()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:17:26.223

在您的代码中，您正在分配`value`to 参数`x`，它应该是相反的。

```
public void setValue(double x){
    this.value = x;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:17:42.210

尝试这个：

```
public void setValue(double x)
{
    this.value = x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T05:17:42.997

```
public void setValue(double x){
        this.value = x;
} 
```

您正在为传递的参数分配`x`默认值`value`。你必须做完全相反的事情。`value`用传递的值分配`x`。

因此，`this.value = 5000`这不是发生，而是发生`x = 0`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T05:19:43.850

您正在为参数 (double x) 分配 int 值的值，因为您是返回值，所以它什么都不做，所以您想要做的是

```
public class Monetary
{
double value;
String type;

public Monetary()
{
    value = 0;
    type = "";
}

public double getValue()
{
    return value;
}

public void setValue(double x)
{
    value = x;//change this
} 
```

# linux - Playframework 2.1.0 Apache 2 部署 CentOS 6

> ID：15563214
> 
> 赞同：2
> 
> 时间：2013-03-22T05:16:25.367
> 
> 标签：linux, apache, deployment, playframework, playframework-2.1

我使用 Playframework 2.1 开发了一个 Web 应用程序，我想将它部署在一个只有 128MB RAM 内存的 VPS 中。我希望我可以在其他网站上使用相同的 VPS（使用 Apache 2），但我不知道该怎么做。我有 play 项目和另一个仅使用 html 部署在同一个 VPS 上的网站。就像我在标题中所说的那样，我使用的是 CentOS 6（但如果最好的话，我可以使用其他操作系统，比如 Ubuntu）。

换句话说，我需要帮助将虚拟服务器、代理等配置到同一台机器上的不同网站。我已经看过 Play Documentation，但这还不够……如果有人可以提供帮助，我将不胜感激。

谢谢

# apache2 - 具有动态服务器的 apache2 FastCGI 通信中止了第一次读取空闲超时

> ID：15563217
> 
> 赞同：4
> 
> 时间：2013-03-22T05:16:36.317
> 
> 标签：apache2, fastcgi, mod-fastcgi, apache2-module, flup

**总结：**无法运行任何最简单的“Hello World”FastCGI 脚本，任何请求总是以超时终止。似乎服务器和 FastCGI 脚本之间根本没有通信（使用动态 FastCGI 脚本）。

# 环境

*   Ubuntu 精确版 (12.04)
*   包裹`apache2.2-bin`
*   包裹`apache2-mpm-prefork`
*   包裹`libapache2-mod-fastcgi`
*   包裹`libfcgi-perl`
*   包裹`python-flup`
*   多个站点配置为虚拟主机`127.0.0.1`
*   存在一个`/var/lib/apache2/fastcgi`目录，由 拥有`www-data`，所有人（所有者、组和其他人）都可以读取
*   存在一个`/var/lib/apache2/fastcgi/dynamic`由 拥有的目录，该目录`www-data`仅限于所有者（只读、可写和`www-data`仅可访问）
*   `/var/lib/apache2/fastcgi/`目录下存在inode/socket文件

# FastCGI 相关配置：

该目录`/etc/apache2/mods-enabled/`包含对`fastcgi.conf`和`fastcgi.load`(`mod_fastcgi`已启用) 的引用。

该文件`fastcgi.conf`包含以下内容（保持不变，我没有编辑它）：

```
<IfModule mod_fastcgi.c>
  AddHandler fastcgi-script .fcgi
  #FastCgiWrapper /usr/lib/apache2/suexec
  FastCgiIpcDir /var/lib/apache2/fastcgi
</IfModule> 
```

中的相关配置文件`/etc/apache2/sites-enabled/`包含以下内容（关于 FastCGI 特定配置的其他任何地方都没有）：

```
<DirectoryMatch /fcgi-bin>
   Options +ExecCGI
   <FilesMatch "^[^\.]+$">
      SetHandler fastcgi-script
   </FilesMatch>
</DirectoryMatch> 
```

# 测试虚拟主机上的测试材料：

存在一个`fcgi-bin/test-perl.fcgi`其内容是（该文件可以被所有人执行，并且可以被所有者和组读取）：

```
#!/usr/bin/perl

use CGI::Fast qw(:standard);
    $COUNTER = 0;
    while (new CGI::Fast) {
    print header;
    print start_html("Fast CGI Rocks");
    print
        h1("Fast CGI Rocks"),
        "Invocation number ",b($COUNTER++),
            " PID ",b($$),".",
        hr;
        print end_html;
    } 
```

存在一个`fcgi-bin/test-python.fcgi`其内容是（该文件可以被所有人执行，并且可以被所有者和组读取）：

```
#!/usr/bin/python

def myapp(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return ['Hello World!\n']

try:
    from flup.server.fcgi import WSGIServer
    WSGIServer(myapp).run()
except:
    import sys, traceback
    traceback.print_exc(file=open("errlog.txt","a")) 
```

# 问题

虽然`fcgi-bin/test-perl.fcgi`和都`fcgi-bin/test-python.fcgi`在从命令行执行时正常运行，但在调用时似乎都不起作用，例如 as`http://test.loc/fcgi-bin/test-perl.fcgi`或`http://test.loc/fcgi-bin/test-python.fcgi`.

什么都没有发生，经过一段时间的延迟，我得到一个错误 500，并且 Apache 错误日志包含多个条目，如下所示：

```
[<date>] [error] [client <IP>] FastCGI: comm with (dynamic) server "/<…&gt;/fcgi-bin/<script>.fcgi" aborted: (first read) idle timeout (30 sec), referer: <referrer>
[<date>] [error] [client <IP>] FastCGI: incomplete headers (0 bytes) received from server "<…&gt;/fcgi-bin/<script>.fcgi", referer: <referrer> 
```

我花了几个小时在网上搜索试图了解它为什么不起作用，最后决定放弃并在这里寻求一些帮助。

欢迎任何指针和检查列表。随意询问您可能认为相关或值得检查的任何缺失细节。

享受美好的一天。

- 编辑 -

# 问题更新

在[我自己对自己问题的回答中](https://stackoverflow.com/a/15565267/279335)，我提到了一个奇怪的案例，事情看起来突然好起来了，没有任何理由。后来我发现这只是部分好。

在相同的虚拟主机中，使用完全相同的服务器配置，一些完全相同（并且具有完全相同的访问权限）的脚本会根据它们的位置而失败。

作为其余部分，以下是站点配置中的内容：

```
<DirectoryMatch /fcgi-bin>
   Options +ExecCGI
   <FilesMatch "^[^\.]+$">
      SetHandler fastcgi-script
   </FilesMatch>
</DirectoryMatch> 
```

有了上述，只有脚本`/fcgi-bin`被处理为 FastCGI 脚本。但我在其他地方也有一些（仍在测试中）：一进`/cgi-bin`一进`/`（即在`public_html`目录中）。为此，`.htaccess`包含以下条目：

```
Options +ExecCGI
AddHandler fastcgi-script .fcgi 
```

因此，另外两个 FastCGI 脚本应该与 in 中的一样工作`/fcgi-bin`，但它们没有，并且在当时，它们总是以连接超时终止，就像第一个`/fcgi-bin`那样。

这让我觉得`mod_fastcgi`模块可能有问题（已知错误？其他？）。到目前为止，这个模块似乎是相当随机的。

-- 编辑 2 --

第一次编辑中的上述内容是我的错误：该组对其他脚本有误，它必须是`www-data`，但不是。有什么问题吗，请坚持我给出的答案，即尝试查看`FastCgiConfig`，看看它是否解决了任何问题，或者至少它是否支持超时选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:46:26.250

I will answer my own question, as it seems to be working now. However, the epilogue still looks weird.

Although the default configuration should be OK, I still wanted to review [the “Module mod_fastcgi” document](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html) again. As I only wanted a dynamic FastCGI, I focused on the `FastCgiConfig` directive only, thus on purpose not going into `FastCgiServer` and `FastCgiExternalServer` directives.

As there was no `FastCgiServer` at all in the default `fastcgi.conf` file, I started to try to set‑up my own. For a first test, I wanted to use the `-appConnTimeout` option, at least to request the server to not wait so much long before it returns me an Error 500.

So I just added this in the site configuration (I did not touch `fastcgi.cong`), in the same file where virtual hosts are configured:

```
FastCgiConfig -appConnTimeout 2 
```

This was to tell the server to wait no more than 2 seconds, instead of the 30 seconds it was waiting. I tried to invoked a FastCGI script to see if at least this configuration was working. I expected to get an error in a 2 seconds delay, but instead, the script ran without error.

What's weird, is that I then tried to remove this option, to check if it was just that addition which was just missing to make FastCGI scripts working. But after I commented‑out the option, it was still working, and the same after a full reboot.

Can't tell more, that looks weird, but this is the only thing I did, I did not edit anything else. I can just suggest people who may encounter a similar issue, to just try the above.

Sorry, if I can't explain what it did exactly. I really would like to know. It just working now, but I don't know why.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T06:46:32.873

#############

fastcgi.conf FastCgiWrapper 关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T08:28:20.377

peng.rl 的回答解决了我的问题。

我的 ceph radosgw 根本无法获得 apache 的输入。设置 FastCgiWrapper Off 后，我可以在 wireshark 中捕获数据。

# jquery - 如何在jquery中获取文本字段的数组id的值

> ID：15563219
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:17:06.707
> 
> 标签：jquery

> 我想在 jquery 中获取/设置文本字段输入的值

```
eg.
<input type="text" name="qty[0][0]"  id="qty[0][0]"> 
<input type="text" name="qty[0][1]"  id="qty[0][1]"> 
<input type="text" name="qty[0][2]"  id="qty[0][2]"> 
<input type="text" name="qty[0][3]"  id="qty[0][3]"> 
<input type="text" name="qty[0][4]"  id="qty[0][4]"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:18:24.250

尝试使用下面的代码。

```
$('input[id^="qty"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:18:35.493

你实际上问了两个不同的事情。

> 如何在jquery中获取文本字段的数组id的值

您可以使用[map()](http://api.jquery.com/jQuery.map/)来获取 ids 数组

**[现场演示](http://jsfiddle.net/kCZKT/)**

```
$('[id^=qty]').map(function(){    
     return this.id;
}).get(); 
```

> 我想在 jquery 中获取/设置文本字段输入的值

**[现场演示](http://jsfiddle.net/kCZKT/1/)**

```
$('[id^=qty]').each(function(idx, item){
    this.value = idx;
    alert(this.value);
}); 
```

要访问单个输入，您可以将 eq 与选择器一起使用。

**[现场演示](http://jsfiddle.net/kCZKT/2/)**

```
$('[id^=qty]').eq(0).val("1");
$('[id^=qty]').eq(1).val("2");

alert($('[id^=qty]').eq(0).val());
alert($('[id^=qty]').eq(1).val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:18:58.673

您的 id 属性值不符合[标准](http://www.w3.org/TR/html401/types.html#type-name)

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

获取 Id 数组

```
var array = $('input[id^=qty]').map(function(i, v){
    return v.id;
}).get() 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/uTPWm/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T05:19:02.393

尝试`val()`单输入..

```
 $('input[id^="qty"]').val('test');  //set

 $('input[id^="qty"]').val();  //get 
```

对于数组中的多个输入值，请使用 map()

```
 var array = $('input[id^="qty"]').map(function(index, value){
    return value.id;
 }).get(); 
```

# c# - C# 中的泛型是否与 C++ 中的处理方式相同？

> ID：15563233
> 
> 赞同：0
> 
> 时间：2013-03-22T05:18:14.553
> 
> 标签：c#, c++, generics

我知道在 C++ 中，泛型实际上并不存在，但您可以使用`template`. 当您构建代码时，编译器会预处理代码并生成一个新代码，其中将泛型值替换为对象声明中指定的实际值，然后才是真正编译的新代码。例如，假设我们有`A`如下类：

```
template<class T>
class A
{
    T f();
}; 
```

然后在我们拥有的代码中的其他地方`A<int> a;`。编译的实际代码是：

```
class A
{
    //Replaces T by int in the pre-processing
    int f();
}; 
```

在整个介绍之后，让我们进入正题。

**我的问题是：**

*   C# 对待泛型的方式与 C++ 相同吗？如果没有，那怎么办？
*   它们是特殊类型吗？
*   它们是在运行时还是在编译时解决的？
*   激活寄存器中为泛型类型保留了多少空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T05:22:13.813

这是一个非常广泛的主题，可以通过以下方式更好地解释：

[http://msdn.microsoft.com/en-us/library/c6cyy67b.aspx](http://msdn.microsoft.com/en-us/library/c6cyy67b.aspx)

总结（来自上面链接的 MSDN 文章）：

*   C# 泛型不提供与 C++ 模板相同的灵活性。例如，不能在 C# 泛型类中调用算术运算符，但可以调用用户定义的运算符。

*   C# 不允许非类型模板参数，例如模板 C {}。

*   C# 不支持显式特化；也就是说，特定类型的模板的自定义实现。

*   C# 不支持部分特化：类型参数子集的自定义实现。

*   C# 不允许将类型参数用作泛型类型的基类。

*   C# 不允许类型参数具有默认类型。

*   在 C# 中，泛型类型参数本身不能是泛型，尽管构造类型可以用作泛型。C++ 确实允许模板参数。

*   C++ 允许代码可能对模板中的所有类型参数都无效，然后检查用作类型参数的特定类型。C# 要求类中的代码以这样一种方式编写，即它可以与任何满足约束的类型一起使用。例如，在 C++ 中，可以编写一个对类型参数的对象使用算术运算符 + 和 - 的函数，这将在使用不支持这些运算符的类型实例化模板时产生错误。C# 不允许这样做；唯一允许的语言结构是那些可以从约束中推导出来的结构。

一般来说，尽管它们在大多数情况下共享相似的语法和用途，但在用法和功能上存在许多很大的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T05:30:12.357

关于如何解析 C++ 模板存在误解。在 C++ 中，模板会被处理两次（注意：“预处理”一词是为预处理器保留的，与模板完全无关）。

在第一次处理时，非依赖名称被解析，而依赖名称未被解析：

```
int x;

template <typename T> foo() {
    x;    // <-- resolved in phase 1
    T::x; // resolved in phase 2, depends on "T"
} 
```

实例化时进入阶段 2。例如：

```
struct Frob {
    int x;
};

int main () {
    foo<Frob>();
} // <-- instantiation happens right before the '}' 
```

此外，C++ 模板是在每个函数的基础上延迟实例化的。这意味着并非类模板中的所有内容都必须是可解析的。仅实例化实际使用的函数，这意味着仅对已*使用*的成员函数进入阶段 2。

这使得模板比 C# 风格的泛型更通用：当你实例化一个类模板时，实例化的类型只需要支持模板的一个子集。

在 C# 中，泛型被急切地解决了。“实例化”类型必须支持泛型类*仅可能使用的**所有内容*，这对多功能性提出了相当严格的限制。

 *你已经知道了，但两者都是截然不同的概念。泛型是一种运行时构造，并且具有反射和自修改代码，C# 语言*必须具有*很强的可解析性。模板是一种编译时构造（注意：不是 _preprocessing 构造！），支持具有类型和非类型参数的图灵完备的元编程，以及在急切和惰性实例化之间的强大折衷。

两者都有自己的特点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:23:06.143

.NET 泛型的实现是一种混合。

当泛型类被编译成 MSIL 时，它被编译成单个泛型类型定义。

当客户端使用泛型类时，.NET 运行时为简单类型参数（bool、int 等）编译类的机器代码的单独副本，但不会为不同的对象类型生成单独的代码；他们都共享对象的代码。*

# ruby - 以有效的方式将字符串拆分为多个部分

> ID：15563251
> 
> 赞同：1
> 
> 时间：2013-03-22T05:19:11.417
> 
> 标签：ruby, arrays

我的代码在这里

```
str = "Early in his first term in office, Obama signed into law economic stimulus legislation in response"
arr= str.split(" ")
set_element= arr.each_cons(2).to_a
sub_str = set_element.map {|i| i.join(' ')} 
```

如果我有一个很大的字符串，比如非常大的字符串，那么这个过程需要 6.50 秒，因为我想要这种类型的结果

```
sub_str= ["Early in", "in his", "his first", "first term", "term in", "in office,", "office, Obama", "Obama signed", "signed into", "into law", "law economic", "economic stimulus", "stimulus legislation", "legislation in", "in response"] 
```

是否有可能以有效的方式进行任何其他方式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T06:13:04.640

使用扫描而不是拆分，您可以直接获取单词对。

```
s.scan(/\S+(?:\s+\S+)?/) 
```

编辑：只是为了向自己保证这是相对有效的，我做[了一点 micro-benchmark](https://gist.github.com/dbenhur/5219395)。以下是迄今为止看到的答案的结果：

```
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-linux]
10 times on string of size 2284879
                 user     system      total        real
original     4.180000   0.070000   4.250000 (  4.272856)
sergio       2.090000   0.000000   2.090000 (  2.102469)
dbenhur      1.050000   0.000000   1.050000 (  1.042167) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:45:05.547

```
set_element = arr.each_cons(2).to_a 
```

上面的行创建了大量您不需要的临时对象。试试这个，应该更快：

```
str = "Early in his first term in office, Obama signed into law economic stimulus legislation in response"
arr = str.split(" ")
sub_str = arr.each_with_object([]).with_index do |(el, memo), idx|
  if idx % 2 == 0
    memo << el
  else
    memo.last << ' ' << el
  end

end

sub_str # => ["Early in", "his first", "term in", "office, Obama", "signed into", "law economic", "stimulus legislation", "in response"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:35:13.220

你可以试试这个。少一步:)

```
arr= str.scan(/\S+/)
s = []
arr.each_with_index { |x, i| s << (x + " " + arr[i + 1]) if arr[i+1] } 
```

# java - mysql数据库中带有tinyint列的休眠句柄？

> ID：15563253
> 
> 赞同：0
> 
> 时间：2013-03-22T05:19:27.540
> 
> 标签：java, mysql, spring, hibernate

在我的 Hibernate Application 中，有一个字段`Active`是布尔类型。我的 Hibernate Bean 类专栏

```
 @Column(name = "ACTIVE")
@Type(type = "org.hibernate.type.YesNoType")
private boolean active;
//Setter and getter  methods 
```

在我的服务类书面代码中......

```
public void createUser(UserVO userVO) throws Exception {
    --------
    userVO.setActive(false);//setting false..
    ----
    ------//Database insert Code hear..
} 
```

但我得到了例外听到..

```
 Caused by: java.sql.BatchUpdateException: Incorrect integer value: 'N' for column 'ACTIVE' at row 1
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2045)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1468)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 50 more
Caused by: java.sql.SQLException: Incorrect integer value: 'N' for column 'ACTIVE' at row 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1997)
    ... 53 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:54:06.667

从[休眠类型文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html)：

> org.hibernate.type.YesNoType
> 
> 将布尔值映射到 JDBC CHAR 类型为 ('N' | 'n') = false, ('Y' | 'y' ) = true

所以表列类型（tinyint）不适合保存你的值。将其设为 char 或 varchar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:02:45.053

对于您的问题，这里有两种解决方案，

1，如果类型 ACTIVE 列是 {tinyint}，则应在代码中使用短数字，例如。

```
userVO.setActive(Short.valueOf("0")); 
```

2、如果你必须在你的代码中使用布尔类型，请`change the type of ACTIVE column to {char}`

祝你好运！

# forms - 关于将信息添加到相关实体的 MS CRM 表单的方法的建议

> ID：15563258
> 
> 赞同：2
> 
> 时间：2013-03-22T05:19:47.457
> 
> 标签：forms, dynamics-crm, odata, microsoft-dynamics

我想在发票表单上显示相关帐户记录的信息。这些字段是只读的，用于为创建或编辑发票的用户显示信息。
从这个角度来看，它似乎比我更投入。
1) 要在 CRM 表单上显示其他 html，我需要使用 iframe - 我不能只添加一个带有 id 的文本框，然后使用 javascript 进行填充。
2）然后要从相关帐户记录中获取信息，我需要再次查找，返回字段并显示它。

要进行查询，我将进行 ODATA 调用。

我在正确的轨道上吗？或者我是否过于复杂化了，是否有更简单更直接的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:22:23.273

不，据我所知，不幸的是，您并没有过于复杂。

如果您希望避免使用 iframe（我会这样做），我可以建议一些肮脏的技巧（或 hack，如果您愿意的话） -
将文本属性添加`new_dummy`到发票实体，并将其添加到发票表单中。
该字段不会被发票实体读取或写入，而只会给您一个占位符来填充您将使用 JS 检索的帐户数据。
（是的，这很丑陋，我知道 :)）

# django - 在管理员中列出对象时的 django 预取

> ID：15563259
> 
> 赞同：5
> 
> 时间：2013-03-22T05:19:47.640
> 
> 标签：django, django-forms, django-admin

我有以下型号：

```
class UserProfile(models.Model):
  name = models.CharField()
  info = models.OneToOneField(UserInfo, related_name='user')

class UserInfo(models.Model):
  def __unicode__(self):
    return self.user.__unicode__() + self.age
  age = models.IntegerField()

class Ticket(models.Model):
  userinfo = models.ForeignKey(UserInfo) 
```

问题现在出现在工单管理界面中。Ticket 的 userinfo 字段呈现为下拉菜单。如果数据库中有很多 UserInfo，每个人都会对数据库 (UserProfile) 进行一次调用以生成其名称。

我如何告诉管理员（或任何小部件）在呈现 UserInfo 下拉列表时预取相关的 UserProfile？

我正在寻找类似的东西

```
info = models.OneToOneField(UserInfo, related_name='user', prefetch_in_bulk=True) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T08:49:47.407

我想出了一种方法来做到这一点：

```
class TicketAdminForm(forms.ModelForm):
  class Meta:
    model = Ticket
  userinfo = forms.ModelChoiceField(queryset=UserInfo.objects.prefetch_related('user').all())

class TicketAdmin(admin.ModelAdmin):
  form = TicketAdminForm

admin.site.register(Ticket, TicketAdmin) 
```

现在所需的模型被预取为一个 sql 查询而不是多个查询。

# java - 需要把B和W放在对应的棋盘格上

> ID：15563265
> 
> 赞同：0
> 
> 时间：2013-03-22T05:20:13.963
> 
> 标签：java, chess

我已经接近了，但我就是想不通。我在 Java 方面不是很好。我知道缺少的 B 和 W 在那里，只是它们与背景颜色相同。如果有人可以提供帮助，那就太好了。

```
public class checktest2 { 

    public static void main(String[] args) { 
        int N = 8;
        StdDraw.setXscale(0, 8);
        StdDraw.setYscale(0, 8);

        for (int i = 0; i < 8; i++) {
            for (int j = 0; j < 8; j++) {
                if ( (i % 2) == (j % 2) )
                    StdDraw.setPenColor(StdDraw.WHITE);
                else 
                    StdDraw.setPenColor(StdDraw.BLACK);
                StdDraw.filledSquare(i + 0.5, j + 0.5, 0.5);
            }

            for (int j = 0; j < 8; j++) {

                  if ( (i % 2) == (j % 2) )
                    StdDraw.text(i + 0.5, j + 0.5, "W");
                  else
                    StdDraw.text(i + 0.5, j + 0.5, "B");
            }

        }
        StdDraw.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:55:02.277

Right, if you try to display a black character on a black background, that is going to be really hard to read.

Why don't you just select slightly different colors for the squares, so the "pieces" stand out better. Just like other programs do for their chess graphics.

Check this page, for example:

[http://www.tim-mann.org/xboard.html](http://www.tim-mann.org/xboard.html)

# c# - 无法将类型“ServiceReference1.StockData[]”隐式转换为 Systems.Collections.Generic.List

> ID：15563269
> 
> 赞同：3
> 
> 时间：2013-03-22T05:20:37.820
> 
> 标签：c#, asp.net, .net, wcf

我正在尝试使用 WCF 服务，该服务返回表单中的自定义列表`List<StockData>`。

这是来自的方法签名`IService.cs`：

```
 [OperationContract]
     List<StockData> orderStockData(string compName1, string compName2, string compName3); 
```

但是当我尝试通过服务参考在我的网站中引用它时：

```
List<StockData> list = new List<StockData>();
list = myProxy.orderStockData(txtinput1.Text, txtinput2.Text, txtinput3.Text); 
```

我收到以下错误：

> 无法将类型“ServiceReference1.StockData[]”隐式转换为 Systems.Collections.Generic.List

解决这个问题的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T05:23:17.323

当您添加对您的站点的引用时，然后在`DataType`==>下`Collection Type`指定`System.Array`, *（这也是默认值）*，这就是您的代理返回给您一个数组而不是列表的原因。

![在此处输入图像描述](../Images/eb9fc106a1999a8e7e7414e175762f83.png)

添加对 Web 服务的引用时，转到高级并指定`System.Collection.Generic.List`，您将获得与合同中相同的返回类型。

但是，如果您不想这样做，您仍然可以使用 Array 并将其转换为 List 使用`ToList`

**编辑：**

像：

```
List<StockData> list = new List<StockData>();
list=(myProxy.orderStockData(txtinput1.Text, txtinput2.Text, txtinput3.Text)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:25:35.467

您应该使用`IList<StockData>`，因为`StockData[]`实现了这个接口，它应该使一切正常。

此外，您不需要调用`new List<T>()`，因为您会立即用另一个值覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:02:47.787

如果您希望代理使用`List<T>`或，您可以更改服务引用设置`T[]`。

要更改设置，请在解决方案资源管理器中右键单击项目中的服务引用。挑选`"Configure Service Reference"`。在`"Collection type"`挑选`System.Collections.Generic.List`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T12:43:14.007

我正在查看这篇文章，之前我也遇到过类似的错误，但上述答案都没有解决这个问题。

*对*我有用的是`var`如下所示

```
//List<StockData> list = new List<StockData>(); // no need of this

var list=myProxy.orderStockData(txtinput1.Text, txtinput2.Text, txtinput3.Text).Tolist(); 
```

# jquery-ui - 显示正常复选框的 jQuery UI 复选框按钮

> ID：15563274
> 
> 赞同：1
> 
> 时间：2013-03-22T05:21:00.253
> 
> 标签：jquery-ui, checkbox

HTML：

```
<input id="1" type="checkbox" checked="checked" />
<label for="1">Online</label> 
```

jQuery：

```
$(function () {
    $('input[type=checkbox]').button();
}); 
```

在浏览器中呈现时，它会同时显示传统的复选框和下方的按钮。我可以点击任何一个，他们将切换复选框。这是浏览器中的 HTML：

```
<input id="1" type="checkbox" checked="checked" class="ui-helper-hidden-accessible">
<label for="1" class="ui-state-active ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Online</span></label> 
```

当我在 jsfiddle 中输入相同的内容时，它可以完美运行，只需获取切换按钮。所以我很茫然是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:29:11.880

你的 jQuery 选择器是错误的。您需要将 " 添加到类型中，如下所示：

```
$('input[type="checkbox"]').button(); 
```

# sql - Oracle SQL：从字符串的初始部分中删除特定数字

> ID：15563280
> 
> 赞同：1
> 
> 时间：2013-03-22T05:21:35.437
> 
> 标签：sql, string, oracle, numbers

我有一个字母数字字符串。我也有一个号码。该字符串将始终以此数字开头。如何将此数字与字符串分开并获取字符串的剩余部分？

例如字符串 => 21fgggg21.lkkk 和数字 => 21

结果=> fgggg21.lkkk

或者

字符串=> 215699898.55fff 和数字=> 2

结果=> 15699898.55fff

任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:35:52.890

```
substr(string, length(number)+1) 
```

或者

```
regexp_replace(string, '^'||number) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:41:40.703

你也可以使用`REGEXP_REPLACE`. 要从字符串的开头删除 '21'：

```
SELECT REGEXP_REPLACE('21fgggg21.lkkk', '^21') FROM DUAL;

REGEXP_REPLA
------------
fgggg21.lkkk 
```

要从字符串的开头删除 '2'：

```
SELECT REGEXP_REPLACE('215699898.55fff', '^2') FROM DUAL;

REGEXP_REPLACE
--------------
15699898.55fff 
```

通过解释...

1.  插入符号 (^) 表示“锚定到字符串的开头”。
2.  `^21`表示“匹配字符串开头的 21”。
3.  `REGEXP_REPLACE`有一个可选的第三个参数来替换匹配的字符串。因为您只想删除匹配的字符串，所以您可以省略参数，它将其替换为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:28:17.047

如果您只是想选择它，您可以使用 substr 和 instr 的组合。

```
substr(string, instr(string, 'number') + 1, len(string)) 
```

您的结果基本上应该是在数字所在位置之后开始的字符串。

# c# - 如何动态实现时间（或带时间的日期）范围的输入？

> ID：15563289
> 
> 赞同：0
> 
> 时间：2013-03-22T05:22:19.597
> 
> 标签：c#, wpf, data-binding, collections, .net-4.0

我想通过动态添加时间范围（每个、多个、范围的对）来增强我的 C# .NET 4.0**多线程WPF 应用程序。** 用户输入的倍数（从 0 到 N）时间范围应该是： `BeginTime+EndTime`

*   显示，即呈现给用户（我的想法是关于一个或两个相互依赖的列表框）
*   CRUD-ed（创建-读取-更新-删除）

我浏览了 3d 方广告`TimePicker`，`DataTimePicker`创建了我自己的自定义和用户控件来实现`TimePicker`和`DateTimePicker`控制……但仍然无法决定如何更好地进行。

使用什么会**更好**- a`custom control`或 a`user control`以及在哪个组合/组合中（哪个控制在哪个组合内 - ListBox、ListView 等）？哪个基础集合，模型？

我将不胜感激有关如何实施它的任何建议

**更新：**
如果这有助于理解......
我有一个在证券交易所交易的 WPF 应用程序，但用户应该能够选择可定制的多个时间段以进行实时和仿真（显示买卖订单但不发送到证券交易所）交易。好吧，这有点复杂，因为在不同的时间段使用不同的算法，但问题是我想给用户输入可配置时间段的可能性。

这在一段时间内，现在是通过硬编码完成的，无需任何用户交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:46:52.110

您可以使用Extended WPF Toolkit™ 中的`DateTimePicker`和/或： [http](http://wpftoolkit.codeplex.com/) ://wpftoolkit.codeplex.com/ 。`DateTimeUpDown`

对于时间范围，请使用 Jani Giannoudis 的 .NET 时间周期库：http: [//www.codeproject.com/Articles/168662/Time-Period-Library-for-NET](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)

编辑：

对于 UI 安排，您可以使用`ListBox`绑定到`ObservableCollection<TimePeriod>`

```
<ListBox Name="listBox">
    <ListBox.ItemTemplate >
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <xctk:DateTimePicker Value="{Binding Start}" Format="ShortTime" />
                <xctk:DateTimePicker Value="{Binding End}" Format="ShortTime" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

public class TimePeriod
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
}

void Window_Loaded(object sender, RoutedEventArgs e)
{
    ObservableCollection<TimePeriod> collection = new ObservableCollection<TimePeriod>();
    collection.Add(new TimePeriod {Start = DateTime.Now - TimeSpan.FromHours(5), End = DateTime.Now});
    collection.Add(new TimePeriod {Start = DateTime.Now, End = DateTime.Now + TimeSpan.FromHours(5)});
    listBox.ItemsSource = collection;
} 
```

# jquery - Mini jQuery 脚本使 div 消失而不是替换其内容

> ID：15563291
> 
> 赞同：1
> 
> 时间：2013-03-22T05:22:26.453
> 
> 标签：jquery, html, toggle

我刚刚开始使用 Javascript 和 jQuery，所以如果这是一个非常愚蠢的问题，请不要生气。我们应该`div`通过绑定一个`toggle`函数来替换 a 的内容，但是当我运行它时，整个`div`“缩小”了。我究竟做错了什么？小脚本是

```
function highlight(evt){
    $('#evtTarget').toggleClass('highlighted');
}

function func_1(evt){
    $('#evtTarget').html("CLICK!!");
}

function func_2(evt){
    $('#evtTarget').html("CLACK!!");
}

$(function(){
    $('#evtTarget').hover(highlight,highlight);
    $('#evtTarget').toggle(func_1,func_2);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:27:18.043

[`toggle`](http://api.jquery.com/toggle/)显示或隐藏元素，它不会在两种任意状态之间切换（**更新：**正如@sberry 在评论中指出的那样，它曾经在最高 1.8 的版本中表现得像你想要的那样）。

当您使用`function`参数调用它时（如文档所示，它对于任何一个用例都不是有效参数），它的行为就像在没有参数的情况下调用它一样（即显示是否隐藏，如果显示则隐藏）。由于 div 在开始时是可见的，因此它们被隐藏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:32:47.403

请参阅此切换文档：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

如果您想替换悬停时的内容..您应该用下面的代码替换您的行；

```
function onhover(evt){
 $('#evtTarget').toggleClass('highlighted');
$('#evtTarget').html("hover in!!");
}

function onhoverout(evt){
 $('#evtTarget').toggleClass('highlighted');
$('#evtTarget').html("hover out!!");
}

$(function(){
    $('#evtTarget').hover(onhover,onhoverout);
//below toggle is not suggested to use like this.
    $('#evtTarget').toggle(func_1,func_2);
}); 
```

' 希望它有所帮助。如果我错了，请纠正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:33:23.323

这是一个固定版本：http: [//jsfiddle.net/NZjvJ/3/](http://jsfiddle.net/NZjvJ/3/)

`.toggle()`显示/隐藏元素。我不认为那是你想要的。

```
function highlight(evt){
    $('#evtTarget').toggleClass('highlighted');
}

function func_1(evt){
    if( $('#evtTarget').html() !== 'CLICK!!' ) $('#evtTarget').html("CLICK!!");
    else $('#evtTarget').html("CLACK!!");
}

$(function(){
    $('#evtTarget').hover(highlight,highlight);
    $('#evtTarget').click(func_1);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T05:38:53.260

`toggle()`您希望使用的功能已被弃用，如此处所述[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

该功能现在已替换为在`show()`和之间切换的功能`hide()`。[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

你想要的是这样的：

```
function highlight(evt){
    $('#evtTarget').toggleClass('highlighted');
}
function func_1(evt){
    $('#evtTarget').html("CLICK!!");
    $('#evtTarget').unbind('click',func_1);
    $('#evtTarget').click(func_2);
}

function func_2(evt){
    $('#evtTarget').html("CLACK!!");
    $('#evtTarget').unbind('click',func_2);
    $('#evtTarget').click(func_1);
}
$('#evtTarget').hover(highlight,highlight);
$('#evtTarget').click(func_1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T05:27:47.157

你想做的是在 document.ready 中使用切换..切换..如果隐藏则显示 div 否则隐藏它...所以现在我敢打赌你的 evtTarget 在 document.ready 上是可见的，因此切换功能隐藏了它...（没有其他事件调用切换来再次显示隐藏的 div）

您需要的是一个用于切换的事件，例如单击、悬停或保持任何事件....

```
$(function(){
   $('#someDiv').click(function(){
      $('#evtTarget').toggle(func_1,func_2);
   });
}); 
```

# .htaccess - .htaccess url重写问题将不同的url指向相同的位置

> ID：15563293
> 
> 赞同：1
> 
> 时间：2013-03-22T05:22:39.177
> 
> 标签：.htaccess, url-rewriting

例如，我有一个网站，我想将不同的 URL 指向相同的位置

```
www.something.com/usa/?abc=4&test=34&size=small
www.something.com/denmark/?abc=4&test=34&size=small&abc2=4&test2=34&size2=small 
```

应该指向 www.something.com/index.php?abc=4&test=34&size=small www.something.com/index.php?abc=4&test=34&size=small&abc2=4&test2=34&size2=small

等等

是的，我确实需要跟踪请求来自哪个国家

查询字符串参数可以有任意数量的不同参数

到目前为止我所拥有的是

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^([0-9a-zA-Z]+)/?$ index.php?domain=$1 [NC,L] 
</IfModule> 
```

如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:45:28.607

您可以使用以下代码（QSA 很重要）

```
RewriteEngine On
RewriteBase /
RewriteRule (?!^index\.php$)^([^/]*)/?$ /index.php?domain=$1 [NC,L,QSA] 
```

请记住，上述规则将转发每个尚未`/index.php`到的URI，`/index.php`并在现有查询字符串中附加一个新的查询参数`domain=country`。

# html - 使用导致问题的插件将 html 复制到 wordpress

> ID：15563295
> 
> 赞同：1
> 
> 时间：2013-03-22T05:23:01.500
> 
> 标签：html, css, wordpress, jquery-ui

我使用了一个名为 embedit 的插件在我的 wordpress 中使用自定义 html、javascript 和 CSS。原始代码如下所示：

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/ui-darkness/jquery-ui.css" />
    <style>
    .calculator>td{
    border-bottom: 0px;
    border-top: 0px;
    }
    input.dark[type=text] {
        transition: all 0.25s ease-in-out;
        -webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        border-radius:8px;
        -webkit-border-radius:8px;
        -moz-border-radius:8px;
        border:1px solid rgba(31, 161, 5, 1);
        text-align: center;
    background: #000000;
    behavior: url(/pie/PIE.htc);
        color: #10c90d;
        height: 20px;
        width: 35px;
    }
    #container { 
        width:300px;
        height:320px;
        z-index:4;
            -webkit-transform: rotate(10deg) skew(0,0) translate(0%,-5px);
        -moz-transform: rotate(10deg) skew(0,0) translate(0%,-5px);
        -o-transform: rotate(10deg) skew(0,0) translate(0%,-5px);
        transform: rotate(10deg) skew(0,0) translate(0%,-5px);

      font-family: 'Oxygen Mono', Tahoma, Arial, sans-serif;
    }
    input[type=text].dark:focus {
        box-shadow: 0 0 9px rgba(31, 161, 5, 1);
        -webkit-box-shadow: 0 0 9px rgba(31, 161, 5, 1); 
        -moz-box-shadow: 0 0 9px rgba(31, 161, 5, 1);
    }
    .report{
        margin-top:-100px;
        margin-left:70%;
    }
    .main{
    background: rgb(0,155,5); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwOWIwNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwNDY4MTkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(#9BD91A, #54750E); /* FF3.6+ */
    background: -webkit-gradient(#9BD91A, #54750E); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(#9BD91A, #54750E); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(#9BD91A, #54750E); /* Opera 11.10+ */
    background: -ms-linear-gradient(#9BD91A, #54750E); /* IE10+ */
    background: linear-gradient(#9BD91A, #54750E); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9BD91A', endColorstr='#54750E',GradientType=0 ); /* IE6-8 */
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    color:#ffffff;
    border-color: #000000;
    border-width: 100px;
    -webkit-box-shadow: inset 2px 2px 21px 21px rgba(0, 0, 0, .4);
     box-shadow: inset 2px 2px 21px 21px rgba(0, 0, 0, .4); 
    -moz-box-shadow: inset 2px 2px 21px 21px rgba(0, 0, 0, .4); 
    width: 100%;
    }
    .pointer{
    cursor: pointer;
    }
    .half{
    width: 50%;
    }
    .full{
    width: 100%;
    }

     .tape{
        position: relative;
        top:-40px;
        left:50px;
        width: 130px;
        height: 35px;
        background-color:#fff;
        opacity:0.6;
        border-left: 1px dashed rgba(0, 0, 0, 0.1);
        border-right: 1px dashed rgba(0, 0, 0, 0.1);
        -webkit-box-shadow: 0px 0px 1px 0px #cccccc;
        -moz-box-shadow: 0px 0px 1px 0px #cccccc;
        box-shadow: 0px 0px 1px 0px #cccccc;
        -webkit-transform: rotate(-2deg) skew(0,0) translate(0%,-5px);
        -moz-transform: rotate(-2deg) skew(0,0) translate(0%,-5px);
        -o-transform: rotate(-2deg) skew(0,0) translate(0%,-5px);
        transform: rotate(-2deg) skew(0,0) translate(0%,-5px);
    }
    .paper {
        padding:25px 25px 40px;
        margin:0 auto 20px auto;
        align:center;   
        line-height:1.5;
        border:0;
        border-radius:3px;
        background: #F9EFAF;
        background: -webkit-linear-gradient(#F9EFAF, #F7E98D);
        background: -moz-linear-gradient(#F9EFAF, #F7E98D);
        background: -o-linear-gradient(#F9EFAF, #F7E98D);
        background: -ms-linear-gradient(#F9EFAF, #F7E98D);
        background: linear-gradient(#F9EFAF, #F7E98D);
        box-shadow:0 4px 6px rgba(0,0,0,0.1);
        transition:box-shadow 0.5s ease;
        font-smoothing:subpixel-antialiased;
        width:220px;
        height:260px;
    }
    .calculator{
      font-family: 'Oxygen Mono', Tahoma, Arial, sans-serif;
      height: 700px;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    </head>
    <body>
    <div class="calculator">
    <div  class="main">
    <h1>Solar Payback Calculator</h1>
    <table>
    <form><tr><td colspan="9"><h2>Roof Size</h2></td></tr><tr><td>
    Width: </td><td class="pointer" onclick="subtractwidth();">-   </td><td colspan="2" width="500"><div id="slider1"></div></td><td class="pointer" onclick="addwidth();">   +    </td><td>
    Length: </td><td class="pointer" onclick="subtractlength();">-   </td><td colspan="2" width="500"><div id="slider2"></div></td><td class="pointer" onclick="addlength();">  
+</td></tr><tr><td></td><td></td><td>
    <input type="text" id="roof_width" onKeyUp="calculate();" class="slider_input1 dark" value="0"/>m</td><td></td><td></td><td></td><td></td><td>
    <input type="text" id="roof_length" onKeyUp="calculate();" class="slider_input2 dark" value="0"/>m</td></tr>
    <tr><td>
    Electricity Bill: </td><td class="pointer" onclick="subtractbill();">-   </td><td colspan="7" width="500"><div id="slider3"></div></td><td onclick="addbill();" class="pointer">  
+</td></tr><tr><td></td><td></td><td>
    £<input type="text" id="electricity_bill" onKeyUp="calculate();" class="slider_input3 dark" value="0"/></td></tr>
    </form>
    </table>
    <table class="full"><tr><td>
    <table class="half">
    <tr><td>Area of the roof: </td><td></td><td><span id="roof_area"></span><span id="unit_area"></span></td></tr>
    <tr><td>Number of Solar Panels: </td><td></td><td><span id="no_solar_panel"></span></td></tr>
    <tr><td>System Cost: </td><td></td><td><span id="system_cost"></span></td></tr>
    <tr><td>Annual System Output: </td><td></td><td><span id="system_output"></span></td></tr>
    <tr><td>FIT Estimate: </td><td></td><td><span id="fit_estimate"></span></td></tr>
    </table></td>
    <td><table class="half">
    <tr><td>Export FiT: </td><td></td><td><span id="export_fit"></span></td></tr>
    <tr><td>Savings from using Solar Energy: </td><td></td><td><span id="savings"></span></td></tr>
    <tr><td>Total Annual Yields: </td><td></td><td><span id="total_annual_yield"></span></td></tr>
    <tr><td>Payback time in years: </td><td></td><td><span id="payback_time"></span></td></tr>
    <tr><td>Profit over 20 years: </td><td></td><td><span id="profit"></span></td></tr>
    </table></td></tr>
    </table>

    <script>
    $("#slider1").slider({
        range: "min",
        value: 0,
        step: 0.01,
        min: 0,
        animate: true,
        max: 10,
        slide: function( event, ui ) {
            $( ".slider_input1" ).val( ui.value );
             calculate();
            //$( ".slider_input" ).val(  ui.value );
        }

       });

    $(".slider_input1").change(function () {
        var value = this.value
        $("#slider1").slider("value", parseInt(value));
                 calculate();
    });
    $("#slider2").slider({
        range: "min",
        value: 0,
        step: 0.01,
        min: 0,
        animate: true,
        max: 10,
        slide: function( event, ui ) {
            $( ".slider_input2" ).val( ui.value );
             calculate();
            //$( ".slider_input" ).val(  ui.value );
        }

       });

    $(".slider_input2").change(function () {
        var value = this.value
        $("#slider2").slider("value", parseInt(value));
                 calculate();
    });
    $(".slider_input2").change(function () {
        var value = this.value
        $("#slider2").slider("value", parseInt(value));
                 calculate();
    });
    $("#slider3").slider({
        range: "min",
        value: 0,
        step: 1,
        min: 0,
        animate: true,
        max: 3000,
        slide: function( event, ui ) {
            $( ".slider_input3" ).val( ui.value );
             calculate();
            //$( ".slider_input" ).val(  ui.value );
        }

       });

    $(".slider_input3").change(function () {
        var value = this.value
        $("#slider3").slider("value", parseInt(value));
                 calculate();
    });

    var calculate = function(){

    var roof_length = document.getElementById('roof_length').value;
    var roof_width = document.getElementById('roof_width').value;
    var electricity_bill= document.getElementById('electricity_bill').value;
    roof_length = parseInt(roof_length);
    roof_width = parseInt(roof_width);
    electricity_bill = parseInt(electricity_bill);
    if (roof_length<0 || roof_width<0 || electricity_bill<0){
    roof_length = Math.abs(roof_length);
    roof_width = Math.abs(roof_width);
    electricity_bill = Math.abs(electricity_bill);
    document.getElementById('roof_length').value=roof_length;
    document.getElementById('roof_width').value=roof_width;
    document.getElementById('electricity_bill').value=electricity_bill;
    }
    var roof_area = roof_length*roof_width;
    roof_area = roof_area.toFixed(2);
    if(isNaN(roof_area)){
    document.getElementById('roof_area').innerHTML="Invalid Input";
    document.getElementById('unit_area').innerHTML="";
    }else{
    document.getElementById('roof_area').innerHTML=roof_area;
    document.getElementById('unit_area').innerHTML=" m<sup>2</sup>";
    }
    var no_solar_panel = roof_area/1.676675;
    no_solar_panel = Math.floor(no_solar_panel);
    if(isNaN(no_solar_panel)){
    document.getElementById('no_solar_panel').innerHTML="Invalid Input";
    }else if(no_solar_panel<16){
    document.getElementById('no_solar_panel').innerHTML=no_solar_panel;
    }else{
    var no_solar_panel = 16;
    document.getElementById('no_solar_panel').innerHTML=no_solar_panel;
    }

    var system_cost = no_solar_panel*500;
    if(isNaN(system_cost)){
    document.getElementById('system_cost').innerHTML="Invalid Input";
    }else{
    document.getElementById('system_cost').innerHTML="£" + system_cost;
    }

    var system_output = no_solar_panel*256;
    if(isNaN(system_output)){
    document.getElementById('system_output').innerHTML="Invalid Input";
    }else{
    document.getElementById('system_output').innerHTML=system_output + " kWh";
    }

    var fit_estimate = (system_output*0.1544);
    fit_estimate = fit_estimate.toFixed(2);
    if(isNaN(fit_estimate)){
    document.getElementById('fit_estimate').innerHTML="Invalid Input";
    }else{
    document.getElementById('fit_estimate').innerHTML="£" + fit_estimate;
    }
    var annual_electricity_used = electricity_bill/0.18;
    if(system_output>annual_electricity_used){
    var left_over = system_output-annual_electricity_used;
    left_over = left_over.toFixed(2);
    }else{
    var left_over = 0;
    }

    var export_fit = left_over*0.045;
    export_fit = export_fit.toFixed(2);
    if(isNaN(export_fit)){
    document.getElementById('export_fit').innerHTML="Invalid Input";
    }else{
    document.getElementById('export_fit').innerHTML="£" + export_fit;
    }
    if(left_over>0){
    var savings = annual_electricity_used*0.18;
    savings = savings.toFixed(2);
    }else if(left_over<=0){
    var savings = system_output*0.18;
    savings = savings.toFixed(2);
    }

    if(isNaN(savings)){
    document.getElementById('savings').innerHTML="Invalid Input";
    }else{
    document.getElementById('savings').innerHTML="£" + savings;
    }
    savings = parseInt(savings);
    fit_estimate = parseInt(fit_estimate);
    export_fit = parseInt(export_fit);
    var total_annual_yield = (savings+fit_estimate)+export_fit;
    if(isNaN(total_annual_yield)){
    document.getElementById('total_annual_yield').innerHTML="Invalid Input";
    }else{
    document.getElementById('total_annual_yield').innerHTML="£" + total_annual_yield;
    }
    var payback_time = system_cost/total_annual_yield;
    payback_time = Math.ceil(payback_time);
    if(isNaN(payback_time)){
    document.getElementById('payback_time').innerHTML="Invalid Input";
    }else{
    document.getElementById('payback_time').innerHTML=payback_time + " Years";
    }

    var profit = (total_annual_yield*20)-system_cost;

    if(isNaN(profit)){
    document.getElementById('profit').innerHTML="Invalid Input";
    }else{
    document.getElementById('profit').innerHTML="£" + profit;
    }
    if(isNaN(roof_width) || isNaN(roof_length) || isNaN(electricity_bill)){
    document.getElementById('report').innerHTML='<h1>Invalid Input</h1>';
    }else{

    document.getElementById('report').innerHTML='<div id="container"><div class="paper"><div class="tape"></div><h1>Report:</h1><span class="report-content">With your roof size of <span id="report_roof_area">_____</span> m<sup>2</sup>, you can fit <span id="report_no_solar_panel">_____</span> solar panels for £<span id="report_system_cost">_____</span>.<br />Saving you £<span id="report_savings">____</span> each year on your bill!<br />Making £<span id="report_total_annual_yield">_____</span> each year and £<span id="report_profit">____</span> profit over 20 years.</span></div><!--end paper--></div><!--end container-->';
    document.getElementById('report_roof_area').innerHTML=roof_area;
    document.getElementById('report_no_solar_panel').innerHTML=no_solar_panel;
    document.getElementById('report_system_cost').innerHTML=system_cost;
    document.getElementById('report_savings').innerHTML=savings;
    document.getElementById('report_total_annual_yield').innerHTML=total_annual_yield;
    document.getElementById('report_profit').innerHTML=profit;
    }
    }

    var subtractwidth = function(){

    var roof_width = document.getElementById('roof_width').value;
    roof_width = parseInt(roof_width);
    var roof_width = roof_width-1;
    document.getElementById('roof_width').value=roof_width;
    }
    var addwidth = function(){
    var roof_width = document.getElementById('roof_width').value;
    roof_width = parseInt(roof_width);
    var roof_width = roof_width+1;
    document.getElementById('roof_width').value=roof_width;
    calculate();
    }
    var subtractlength = function(){
    var roof_length = document.getElementById('roof_length').value;
    roof_length = parseInt(roof_length);
    var roof_length = roof_length-1;
    document.getElementById('roof_length').value=roof_length;
    calculate();
    }
    var addlength = function(){
    var roof_length = document.getElementById('roof_length').value;
    roof_length = parseInt(roof_length);
    var roof_length = roof_length+1;
    document.getElementById('roof_length').value=roof_length;
    calculate();
    }
    var subtractbill = function(){
    var electricity_bill= document.getElementById('electricity_bill').value;
    electricity_bill = parseInt(electricity_bill);
    var electricity_bill = electricity_bill-10;
    document.getElementById('electricity_bill').value=electricity_bill;
    calculate();
    }
    var addbill = function(){
    var electricity_bill= document.getElementById('electricity_bill').value;
    electricity_bill = parseInt(electricity_bill);
    var electricity_bill = electricity_bill+10;
    document.getElementById('electricity_bill').value=electricity_bill;
    calculate();
    }
    document.getElementById('roof_length').value=0;
    document.getElementById('roof_width').value=0;
    document.getElementById('electricity_bill').value=0;
    </script>

    </div>
    <div class="report" id="report">
    <div id="container"><div class="paper"><div class="tape"></div><h1>Please Input Values</h1></div><!--end paper--></div><!--end container-->
    </div>
    </div>
    </body>

</html> 
```

如果没有 wordpress，它看起来像：[http](http://www.asifslab.com/solarpanel.html) ://www.asifslab.com/solarpanel.html 但是当我将它添加到 wordpress 时，它看起来像：bit.ly/Yvn2vv 不幸的是，jquery-ui 滑块不起作用，并且样式在一团糟。此外，html 不适合内容区域（报告覆盖页脚）。如何解决这个问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:28:58.630

您的 wordpress 网站的 CSS 应用于您使用插件添加的自定义 HTML 代码，这就是样式都搞砸的原因，也可能是滑块不起作用的原因（我没有验证这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:32:10.383

不要使用插件，而是使用 iframe。

```
<iframe src="http://www.asifslab.com/solarpanel.html"> 
```

并应用一些样式。（调整这些以满足您的需求。）

```
iframe { 
    width: 100%;
    margin: auto;
    height: 600px;
    display: block;
} 
```

# [演示](http://jsfiddle.net/haSf4/1/)

澄清您的问题是什么；你有两组没有考虑到彼此的风格。因此，Wordpress 覆盖小部件上的样式存在问题。将它放在 iframe 中可以使所有内容保持独立，因此小部件不会影响博客样式，而博客也不会影响小部件。和谐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:38:07.870

正如 gotson 所说，您的 wordpress 主题中的 css 会覆盖您自定义页面上的某些内容。您可能希望使用带有前缀的唯一类而不是使用通用标签，并在与您使用的 wordpress 模板相同的固定宽度容器中创建它。

```
#sp_Container{ //apply style } 
```

代替

```
#container{ //apply style } 
```

另外，请确保针对该容器内的每个声明。

```
#sp_Container .class1{ //apply style }
#sp_Container .class2{ //apply style }
#sp_Container .class3{ //apply style } 
```

PS 容器需要一个位置：relative；所以你可以确保结果注释不会离它太远（如果它被设置在一个位置：绝对;）。

# android - 使用 Async Task 和 BaseAdapter 解析 Json

> ID：15563299
> 
> 赞同：1
> 
> 时间：2013-03-22T05:23:40.773
> 
> 标签：android, json, android-asynctask, baseadapter, android-adapter

我正在访问[http://graph.facebook.com/xyz](http://graph.facebook.com/xyz)并在`ListView`. 我不知道如何调用`doInBackground`BaseAdapter 的结果。

```
public class FbMainActivity extends Activity {
Button b;
ListView lv;
DefaultHttpClient client;
HttpGet get;
HttpResponse response;
HttpEntity entity;
ArrayList<FBAccount> al;
MyAdapter adapter;
TextView tv1, tv2, tv3;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fb_main);
    b = (Button) findViewById(R.id.bFAce);
    tv1 = (TextView) findViewById(R.id.textView1);
    tv2 = (TextView) findViewById(R.id.textView2);
    tv3 = (TextView) findViewById(R.id.textView3);

    lv = (ListView) findViewById(R.id.list);
    al = new ArrayList<FBAccount>();
    adapter = new MyAdapter();
    lv.setAdapter(adapter);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            MyOperation operation = new MyOperation();
            operation.execute();
        }
    });
}

private class MyOperation extends AsyncTask<String, Void, String> {
    ProgressDialog dialog = new ProgressDialog(FbMainActivity.this);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog.setMessage("Loading....");
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        client = new DefaultHttpClient();
        get = new HttpGet("http://graph.facebook.com/somename");
        try {
            response = client.execute(get);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        entity = response.getEntity();
        InputStream is = null;
        try {
            is = entity.getContent();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));
        StringBuffer buffer = new StringBuffer();
        String line = null;
        do {
            try {
                line = reader.readLine();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            buffer.append(line);
        } while (line != null);
        String str = buffer.toString();
        FBAccount account;
        JSONObject object;
        try {
            object = new JSONObject(str);
            String id = object.getString("id");
            String name = object.getString("name");
            String gender = object.getString("gender");

            account = new FBAccount();
            account.setId(id);
            account.setName(name);
            account.setGender(gender);

            al.add(account);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        adapter.notifyDataSetChanged();
        return str;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        dialog.dismiss();

    }
}

private class MyAdapter extends BaseAdapter {

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return al.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return al.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        LinearLayout layout = (LinearLayout) getLayoutInflater().inflate(
                R.layout.cust_layout, null);

        String id = al.get(position).getId();
        String name = al.get(position).getName();
        String gender = al.get(position).getGender();
        tv1.setText(id);
        tv2.setText(name);
        tv3.setText(gender);
        return layout;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:21:27.160

您需要在 getView() 方法中初始化文本视图...

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.row_student_sms, parent, false);
    YourModelClass model = al.get(position);

    final TextView tv1 = (TextView) rowView.findViewById(R.id.textView1);
    tv1.setText(model.getId());

    TextView tv2 = (TextView) rowView.findViewById(R.id.textView2);
    tv2.setText(model.getName());

    TextView tv3 = (TextView) rowView.findViewById(R.id.textView3);
    tv2.setText(model.getGender());

    return rowView;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:28:56.683

从 api 获取数据后更新 ListView 的使用`onPostExecute`方法。`adapter.notifyDataSetChanged()`通过调用内部`onPostExecute`而不是更改您的代码`doInBackground`：

```
 @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

       // update listView here

      adapter.notifyDataSetChanged();

      dialog.dismiss();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:59:07.930

您在活动中错误地初始化了`TextView`。它应该在您`getView`的适配器方法中，并且应该使用您的`LinearLayout layout`实例访问它，如下所示：

尝试如下：

> ```
>  @Override
>     public View getView(final int position, View convertView, ViewGroup parent) {
>       LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>    View m_view = inflater.inflate(R.layout.cust_layout, parent, false);
>        tv1 = (TextView)m_view.findViewById(R.id.textView1);
>        tv2 = (TextView)m_view.findViewById(R.id.textView2);
>        tv3 = (TextView)m_view.findViewById(R.id.textView3);
>    return m_view;
>   } 
> ```

# javascript - 使用javascript将html表导出到excel

> ID：15563301
> 
> 赞同：2
> 
> 时间：2013-03-22T05:24:01.533
> 
> 标签：javascript, excel, export-to-excel, html-table

我尝试使用此[Gist](https://gist.github.com/insin/1031969)中给出的代码将我的 html 表导出到 excel 中。但是导出后，当我打开文件时，它会在 excel 中显示演示页面的 html 代码。任何人都可以请提供用于将 html 表导出到 excel 的正确 javascript 示例（也应该在办公室 Calc 中打开）。

编辑：附上图片截图。

![附上图片截图。](../Images/ff2e79f53d8a4d231fac19942123d026.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-30T16:13:22.693

这是我制作的一个功能。

在您不想在 Excel 中显示的元素上添加“删除”类。

```
function exportExcel(id,name){ //<table> id and filename
    var today = new Date();
    var date = ('0'+today.getDate()).slice(-2)+"-"+('0'+(today.getMonth()+1)).slice(-2)+"-"+today.getFullYear();

    var file_name = name+"_"+date+".xls"; //filename with current date, change if needed
    var meta = '<meta http-equiv="content-type" content="text/html; charset=UTF-8" />';
    var html = $("#"+id).clone();

    html.find('.remove').remove(); //add the 'remove' class on elements you do not want to show in the excel
    html.find('a').each(function() { //remove links, leave text only
        var txt = $(this).text();
        $(this).after(txt).remove();
    });
    html.find('input, textarea').each(function() { //replace inputs for their respectives texts
        var txt = $(this).val().replace(/\r\n|\r|\n/g,"<br>");
        $(this).after(txt).remove();
    });
    html.find('select').each(function() { //replace selects for their selected option text
        var txt = $(this).find('option:selected').text();
        $(this).after(txt).remove();
    });
    html.find('br').attr('style', "mso-data-placement:same-cell"); //make line breaks show in single cell
    html = "<table>"+html.html()+"</table>";

    var uri = 'data:application/vnd.ms-excel,'+encodeURIComponent(meta+html);
    var a = $("<a>", {href: uri, download: file_name});
    $(a)[0].click();
} 
```

在事件中调用它，例如：

```
$("#export_button").click(function(e){
    exportExcel("table_id", "filename");
}); 
```

# javascript - Express + Passport + Redis 会话？

> ID：15563305
> 
> 赞同：3
> 
> 时间：2013-03-22T05:24:29.453
> 
> 标签：javascript, node.js, redis, connect, passport.js

迄今为止，我一直在为我的 Express 会话使用默认的 MemoryStore。一切都很好，除了所有会话数据在重新启动之间丢失。所以我试图让我的会话与 Redis 和 Connect-Redis 一起工作。

这是我的代码中与 Redis 的会话配置有关的部分：

```
var express = require( "express" ),
    app = module.exports = express(),
    passport = require( "./passport" ),
    http = require( "http" ),
    RedisStore = require( "connect-redis" )( express ),
    redis = require( "redis" ).createClient();

app.configure(function(){

    app.set( "passport", passport );
    app.use( express.cookieParser());
    app.use( express.session({
         secret: "I can haz working sessions?",
         store: new RedisStore({ client: redis })
    }));
    app.use( passport.initialize() );
    app.use( passport.session() );
    ... 
```

当我运行这个应用程序时，没有错误。但是，当我尝试登录时，虽然它执行了初始登录，但我只是不断地跳回登录屏幕。就好像护照无法设置cookie，或者设置后无法读取cookie。

作为参考，以下是我在护照​​中用于序列化/反序列化会话的功能：

```
passport.serializeUser(function( user, done ) {
    done( null, {
        id : user.id,
        type : user.type,
        firstname: user.firstname,
        lastname: user.lastname
    });
});

passport.deserializeUser(function( user, done ) {
    done( null, user );
}); 
```

关于我哪里出错的任何建议？护照 serializeUser / deserializeUser 是否需要修改才能与 redis 一起使用？还是我错过了其他东西？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T11:20:40.497

一种可能性：也许您的应用无法连接到 Redis？我发现当我的redis-server没有运行时，我遇到了你描述的症状（静默设置cookie失败）。

除了检查它是否正在运行之外，还要确保您的 Node 服务器可以真正连接到它——也就是说，没有防火墙规则将您拒之门外。

祝你好运！

# c# - 调用 System.Windows.Forms.Form 构造函数时，用于 .NET 的 Python 静默失败

> ID：15563309
> 
> 赞同：3
> 
> 时间：2013-03-22T05:25:08.930
> 
> 标签：c#, python, .net, python.net

## C# 代码

我将以下**C#**代码编译到名为“ **MinimalFormsApp.dll** ”的库中

```
using System;
using System.Drawing;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsTest
{
    public static class CreateACoolWindow
    {
        public static void Main(string[] args)
        {
            CreateWindow();
        }

        public static void CreateWindow()
        {
            Thread winFormsThread = new Thread(new ThreadStart(StartFormApplication));
            winFormsThread.SetApartmentState(ApartmentState.STA);
            winFormsThread.Start();
            Console.WriteLine("Started thread");
        }

        private static void StartFormApplication()
        {
            Application.EnableVisualStyles();
            Console.WriteLine("EnableVisualStyles");
            Application.SetCompatibleTextRenderingDefault(false);
            Console.WriteLine("SetCompatibleTextRenderingDefault");
            FormSubClass dmw = new FormSubClass();
            Console.WriteLine("Created window object");
            Application.Run(dmw);
        }
    }

    public class FormSubClass : Form
    {
        public FormSubClass()
        {
            Console.WriteLine("FormSubClass Constructor called");
            InitializeComponent();
        }

        private void InitializeComponent()
        {
            Console.WriteLine("Starting component init......");
            this.SuspendLayout();
            this.AutoScaleDimensions = new SizeF(6F, 13F);
            this.AutoScaleMode = AutoScaleMode.Font;
            this.ClientSize = new Size(300, 500);
            this.Name = "FormSubClass";
            this.Text = "FormSubClass";
            this.ResumeLayout(false);
            this.PerformLayout();

        }
    }
} 
```

## Python代码

使用**Python for .NET**和 Python 2.7 for x86 我尝试从这个 C# 库调用 CreateWindow() 方法。

我的python代码如下：

```
import clr
clr.AddReference("MinimalFormsApp")

from WindowsFormsTest import CreateACoolWindow
CreateACoolWindow.CreateWindow()

#Print some output
print "Mary had a little lamb,"
print "it's fleece was white as snow;"
print "and everywhere that Mary went",
print "her lamb was sure to go." 
```

## 控制台输出

这是 Python 在控制台上打印的内容

> 启动线程
> Mary 有一只小羊羔，EnableVisualStyles
> SetCompatibleTextRenderingDefault
> 
> 它的羊毛像雪一样白；
> 玛丽所到之处，她的小羊一定会去。
> FormSubClass 构造函数调用

可以看出，它没有打印“Starting component init......”，也没有打印“Created window object”，也没有实际创建Window。Python 程序结束并且不产生错误消息说明为什么没有创建窗口。

如果我从另一个 C# 程序调用相同的 C# 库，那么所有内容都会按预期打印并创建窗口。

***有谁知道为什么 Python for .NET 在 Forms 构造函数上静默失败？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T17:11:14.740

在寻找另一个问题时偶然发现了这个问题。我有点晚了，但我想我可以深入了解为什么会有类似问题的人发生这种情况。

当 CPython 解释器跟踪线程时，它将它们分为三类。

*   普通的
*   守护进程
*   外星人

Normal 用于通过 threading 模块启动的常规 python 线程。当任何这些或主线程正在运行时，解释器不会退出。

同样，守护线程是通过线程模块启动的线程；但是，它们已被标记为守护进程。在他们的情况下，解释器在退出之前不会等待他们终止。

最后，外来线程是在与 CPython 相同的进程中启动但不是由任何 python 代码启动的线程。解释器知道这些但不知道如何等待它们，因此将它们视为守护线程，并且在退出之前不等待它们终止。

为了更好地处理 Windows 上的线程（加上没有 GIL），请查看 IronPython。它可能会更慢，但它只是更好地处理这样的 .NET 交互，因为它作为本机 .NET 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:01:06.250

当 Python 中的主线程终止时，它也会终止在 .NET 中运行的所有内容。

在上面给出的示例中，在将文本打印到终端后，主 Python 线程终止之前，窗口还没有时间绘制。

在新的 python 线程中启动 .NET 调用将阻止此操作。

# twitter-bootstrap - AngularJS：当 ng-options 属性与 ng-repeat 一起使用时，bootstrap-select 未正确显示

> ID：15563314
> 
> 赞同：2
> 
> 时间：2013-03-22T05:25:45.623
> 
> 标签：twitter-bootstrap, angularjs

我正在使用 bootstrap-select ( [https://github.com/silviomoreto/bootstrap-select](https://github.com/silviomoreto/bootstrap-select) ) 来显示选择元素。由于某些原因，当我将它与 ng-options 和 ng-repeat 一起使用时，它没有正确显示。

这是我的代码：

```
<ul>
    <li ng-repeat="category in categories">
        <select class="select" ng-model="status" ng-options="obj.Id as obj.Name for obj in statuses"></select>
     </li>
</ul> 
```

这就是我所拥有的 ![在此处输入图像描述](../Images/437b5fc311c073d52b155f6cd69245a7.png)

请注意，<div/> 没有添加到选择控件的正下方。

有人试图解决这个问题吗？我可以以某种方式重新初始化我的选择元素吗？请指教。谢谢你。

**更新：** 这是将相同的选择放在 ng-repeat 之外时的外观。：

![在此处输入图像描述](../Images/884c753cf734c44836ea7368dd5df4ae.png)

您可以看到 select 元素实际上是不可见的（黄色框），而是将 <div/> 呈现在 select 元素的正下方，这正是用户在页面上看到的内容。这就是我在最初的问题中提到 <div /> 时的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-11T01:16:10.747

这是因为单击的事件侦听`.dropdown-toggle`器不存在。它是引导 javascript 包的一部分，因此，您必须找到一种解决方法。

```
angular.module('MyModule', []).directive('selectpicker', function () {
    return {
        restrict: 'CA',
        link: function (scope, elem) {
            angular.element(elem).selectpicker();
            angular.element('button.dropdown-toggle').on('click', function () {
                console.log('clicked')
            });
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T14:09:17.933

对不起，迟到的答案。我希望你找到你的答案:) 我不知道这是否是完美的角度答案，但它对我有用

首先我创建了一个指令并为页面完成加载创建了一个监听器

```
angular.module("selectBox", []).directive('selectBox', function() {
 return {
  restrict: 'E',
  link: function() {
   return $(window).bind("load", function() {
    //this will make all your select elements use bootstrap-select
    return $('select').selectpicker();
   });
  }
 };
}); 
```

并在您的模板中添加

```
<select-box></select-box> 
```

希望这会有所帮助:)

# android - Android将数组读入TextView

> ID：15563316
> 
> 赞同：1
> 
> 时间：2013-03-22T05:26:10.197
> 
> 标签：android, arrays, textview

我有这段代码。我正在尝试读取数组的元素并将其显示在 android 的 textview 中。如果我只使用 print 语句纯 java 而不是 android sdk，则代码显示正确的内容。我一直在试图弄清楚一段时间。有什么帮助吗？

```
 package com.example.trivia;

      import java.io.File;
      import java.io.IOException;
      import java.util.Random;
      import java.util.Scanner;

      import android.app.Activity;
      import android.os.Bundle;
      import android.os.CountDownTimer;
      import android.widget.Button;
      import android.widget.TextView;

public class PlayActivity extends Activity {
  String [][]array;
  String [][] questionsArray;
  int []playindexArray = new int[50];
  TextView timer, questions;
  Button answerA, answerB, answerC, answerD;
  String show = "Buttons and Question";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_play);
    timer = (TextView) findViewById(R.id.timer); 
    questions = (TextView) findViewById(R.id.questions);
    answerA = (Button) findViewById(R.id.buttonA);
    answerB = (Button) findViewById(R.id.buttonB);
    answerC = (Button) findViewById(R.id.buttonC);
    answerD = (Button) findViewById(R.id.buttonD);

//countdowntimer
    CountDownTimer count = new CountDownTimer(32000, 1000) {
         public void onTick(long millisUntilFinished) {
             timer.setText("TIME REMAINING: " + millisUntilFinished / 1000);

         }
         public void onFinish() {
             timer.setText("TIME UP!");
         }
      };
      count.start();
              try {
        readCSV();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

  public void readCSV() throws IOException{
        array = new String[117][6];
        String delimiter = ",";
        int row =0;
        File file = new File("questions1.csv");
        Scanner sc = new Scanner(file);     

        while (sc.hasNextLine()) 
        {
           String line = sc.nextLine();
           String [] temp = line.split(delimiter);
           for(int i = 0; i< temp.length; i++){
              array[row][i] = temp[i];   
            }
           row++;
         }
        questionsArray = new String[117][6];
        questionsArray = array;
        questions.setText(questionsArray[0][2]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:43:01.163

您的代码中没有`TextView`。也没有`setText`方法。最简单的`TextView`作品是这样的

```
TextView textView = (TextView) findViewById(R.id.id_of_your_textview);
text.setText("your text"); 
```

显示您首先尝试过的相关代码。然后显示你得到的错误。这将加快您获得所需内容的过程。

# c++ - 在两个节点上提升 ptree 迭代

> ID：15563317
> 
> 赞同：2
> 
> 时间：2013-03-22T05:26:20.757
> 
> 标签：c++, boost, boost-propertytree

我有一个这样的 xml

```
<examples>
<example>
<test name="img">testme</test>
<test name="img1">testme1</test>
<test name="img1">testme2</test>
</example>
<example>
<test name="text">testme</test>
<test name="text">testme1</test>
<test name="text">testme2</test>
</example>
</examples> 
```

我试过这段代码它只提取第一个示例节点

```
ptree ptree;
        read_xml(doc_path, ptree);

        BOOST_FOREACH(ptree::value_type & value, ptree.get_child("examples.example")){
           cout<<value.second.get("<xmlattr>.name", "")<<endl;
           cout<<value.second.data()<<endl; 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T07:15:57.457

ptree.equal_range 方法具有您正在寻找的行为。请注意，我那里有几块 C++11 - 你需要一个现代编译器。

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>
#include <sstream>

const char xml[] = R"(<examples>
<example>
<test name="img">testme</test>
<test name="img1">testme1</test>
<test name="img1">testme2</test>
</example>
<example>
<test name="text">testme</test>
<test name="text">testme1</test>
<test name="text">testme2</test>
</example>
</examples>)";

int main(int argc, char **argv)
{

    boost::property_tree::ptree ptree;
    std::istringstream xml_str(xml);
    read_xml(xml_str, ptree);

    auto example_range = ptree.get_child("examples").equal_range("example");

    for( auto it = example_range.first; it != example_range.second; ++it )
    {
        auto test_range = it->second.equal_range("test");
        for( auto test_it = test_range.first; test_it != test_range.second; ++test_it )
        {
            std::cout << test_it->second.get("<xmlattr>.name","") <<std::endl;
            std::cout << test_it->second.data() << std::endl;
        }
    }

    return 0;
} 
```

# ios - iOS 6 - 何时实例化（创建类的对象），何时不实例化？

> ID：15563319
> 
> 赞同：1
> 
> 时间：2013-03-22T05:26:31.040
> 
> 标签：ios, object, initialization, instantiation

我试图更好地理解实例化过程。我知道有些类需要先分配和初始化（我必须创建类的对象）才能使用它们，例如 NSMutableArray。但是，我遇到了在使用它们之前不需要实例化的类，例如 NSDate 和 UIImage。

例如，在我可以使用它之前，我总是像这样实例化 NSMutableArray：

```
NSMutableArray *myArray = [[NSMutableArray alloc]init]; 
```

使用 UIImage 我可以跳过实例化并执行以下操作：

```
UIImage *i = [UIImage imageNamed:@"image.png"]; 
```

对于何时可以只使用类而不实例化以及何时必须实例化，是否有任何规则或提示？我想看看是否有一种快速的方法来了解这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:28:17.217

一般来说，我自己的经验法则是，如果对象仅在该方法内生效并且不在该方法的范围之外使用，我将在实例化新对象之前为自动释放的对象使用创建 API。

但是，如果您需要在方法范围之外的任何其他位置访问该对象，则*必须*实例化它并保留内存并保留。

在上面的示例中，如果您将“ `UIImage * i`”放入图像视图中或仅在一个方法中对其进行处理，那么“ `imageNamed`”是非常合适的。

如果您需要为`UIImage * i`方法范围之外的任何内容保留“”，请改用它的指定初始化程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:31:20.747

无论哪种情况，您总是在实例化一个对象。只是`UIImage`该类提供了一些静态的便利方法，隐藏了相当丑陋的 alloc/init 过程。Even `NSMutableArray`has `[NSMutableArray arrayWithCapacity:numItems]`which 仍然在其中执行“alloc”，“init”，但也设置了初始容量（出于性能原因）。最好的方法是仔细阅读文档，寻找静态类方法，或者查看自动完成是否有任何以你正在制作的东西开头的方法，例如`[UIImage image...]`和`[NSDate date...]`

# arm - 如何获取寄存器地址：ARM Cortex A8？

> ID：15563320
> 
> 赞同：3
> 
> 时间：2013-03-22T05:26:31.707
> 
> 标签：arm, cpu-registers, cortex-a8

我想获取 ARM Cortex a8 的协处理器寄存器的物理地址，例如 c9-User Enable Register (USEREN)。

我怎么才能得到它 ？

谢谢 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T07:31:29.937

并非所有寄存器都需要存在于内存地址中。协处理器寄存器就是一个很好的例子。协处理器是独立的执行单元，大多数时候访问它们的寄存器的唯一方法是通过[mcr / mrc 之](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204h/Cihfifej.html)类的指令。

# jquery - 原型转换的 jQuery 扩展

> ID：15563322
> 
> 赞同：2
> 
> 时间：2013-03-22T05:27:16.273
> 
> 标签：jquery, prototypejs

我正在尝试将下面的 jQuery 扩展转换为类似原型的扩展：

```
$.some = function(array, cmp_bool, context) {
    if (Array.prototype.some) {
        return array.some(cmp_bool, context);
    } else {
        if (context) {
            cmp_bool = $.proxy(cmp_bool, context);
        }
        return !!($.grep(array, cmp_bool).length)
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:21:36.633

PrototypeJS 已经将其内置到核心中。

Array 对象类型混合在 Enumerable 方法中 - 它具有具有`some()`完全相同参数的方法（没有数组作为第一个参数，因为您对 Array 实例进行操作）

所以鉴于这些

```
var testit = function(t){
    return t < 10;
}
var myArray = [1, 2, 3, 7, 10]; 
```

您提供的 jQuery 扩展是这样调用的

```
$.some(myArray,testit);
//or noConflict() mode
jQuery.some(myArray,testit); 
```

并且像这样调用内置的 PrototypeJS 方法

```
myArray.some(testit); 
```

** Enumerable 方法是此处链接 `some()`的方法的别名[http://api.prototypejs.org/language/Enumerable/prototype/any/](http://api.prototypejs.org/language/Enumerable/prototype/any/)`any()`

# jquery - 将扬声器设置为自动播放和随机播放？

> ID：15563329
> 
> 赞同：1
> 
> 时间：2013-03-22T05:27:58.567
> 
> 标签：jquery, html5-audio

我偶然发现了一个很棒的 HTML5 音频播放器[Speakker](http://www.speakker.com/)，但我不知道是否可以将其设置为自动播放 + 随机播放。有没有人试过这个？或者通过jquery的任何解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:33:32.177

为ayto玩...

```
<audio autoplay="autoplay" controls="controls">  
    <source src="file.ogg" />  
    <source src="file.mp3" />       
</audio> 
```

for shuffle 通过使用随机数概念使用 jquery 动态地提供音频源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:39:00.777

根据我对您的问题的理解，可能以下是您的答案。

在 HTML 中

```
<audio  id="audio-player" name="audio-player" src="../../Content/telephonRing.mp3" ></audio> 
```

在jQuery中

```
 $("#audio-player")[0].play();//To play
      $("#audio-player")[0].pause(); //To pause

//For Ringtone will repeat
      $("#audio-player")[0].addEventListener('ended', function () {
                    this.currentTime = 0;
                    this.play();
                }, false); 
```

# php - 使用 row() 和 row_array() 等函数的说明

> ID：15563333
> 
> 赞同：0
> 
> 时间：2013-03-22T05:28:27.010
> 
> 标签：php, codeigniter

我正在阅读页面[https://www.codeigniter.com/user_guide/database/results.html](https://www.codeigniter.com/user_guide/database/results.html) 并且我阅读了如果`$row = $query->first_row()`这给出了`object` ，如果`we want this as array`那么我们必须使用 `$row = $query->first_row('array')`并且这是`ok`.

但是，我们可以替换这些功能吗？

```
$row = $query->row(); //for object 
```

并 `$row = $query->row_array(); //for array`
使用`different parameter`.

此外，如果这些函数具有类似的参数，`index,class`那么我们可以使用上面的`functions`类似

```
$row = $query->row(array('index'=>5,'type'=>'array','class'=>'Users'));
 //for array mentioned type here
$row = $query->row(array('index'=>5,'type'=>'object','class'=>'Users'));
 //for object mentioned type here 
```

需要一些**指导**。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:19:33.290

`to a single function with different parameter.`我认为您在这里要求修改核心系统文件..这根本不好...为什么？因为如果您稍后需要更新您的 codeigniter 版本怎么办...您需要更新您的核心文件，这反过来将替换您修改后的代码...。

无论如何..这两个函数（行和行数组）之间的唯一区别是..`row`将数据作为对象`row_array()`返回，而在数组中返回.....

row() 的作用是在对象中获得单个结果...

> 此函数返回单个结果行。如果您的查询不止一行，它只返回第一行。结果作为对象返回。

例子

```
 $query=$this->db->query('select * from table where id= "1"');
 $row=$query->row() //these returns i object
 $row=$query->row_array() //this returns in array.. 
```

但是，您可以将两个可选参数传递给 row() 函数..一个是特定行返回的行号...如果没有提到它返回第一行..第二个是用于实例化该行的类的名称..您可以浏览指南..了解更多信息

# javascript - 使用 Html5 输入标签的相机捕获

> ID：15563336
> 
> 赞同：17
> 
> 时间：2013-03-22T05:28:49.647
> 
> 标签：javascript, html

我正在使用下面的代码行来从我的 Web 应用程序调用相机。

```
<input type="file" id="capture" accept="image/*; capture=camera" style="visibility:hidden;"> 
```

使用它，当应用程序在 iOS6 中打开时，我可以弹出“选择现有照片”和“拍照”选项。但我想直接打开相机捕捉而不是弹出这个然后选择“拍照”选项。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-03T14:52:02.723

```
<input type="file" name="file" accept="image/*" capture="camera" /> 
```

在 Android 上的 Chrome 中工作（至少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:13:30.887

恐怕出于安全/隐私原因，按照规范这是不可能的：

> 用户代理不应启用任何用于媒体捕获的设备，例如麦克风或摄像头，直到完成提供隐式同意的用户交互。

[http://www.w3.org/TR/capture-api/#security](http://www.w3.org/TR/capture-api/#security)

另一种方法是使用[getUserMedia](http://www.w3.org/TR/mediacapture-streams/ "获取用户媒体")。这仍然会显示一个请求用户权限的对话框，但在某些浏览器中，用户可以在授予对域的访问权限后选择隐藏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T15:01:32.487

你在安卓上用的是什么浏览器？此页面表明它不适用于 Chrome，但应适用于 Android 浏览器和 iOS Safari。它没有特别提到适用于 Android 的 Chrome。我在我的 LG G6 手机上使用 Chrome 浏览器测试了标签，但它不起作用。我无法测试 Android 浏览器——我的手机上似乎没有它。

[https://caniuse.com/#feat=html-media-capture](https://caniuse.com/#feat=html-media-capture)

# java - 仅重定向一次 HTML 页面

> ID：15563337
> 
> 赞同：1
> 
> 时间：2013-03-22T05:28:50.547
> 
> 标签：java, javascript, html, spring, jsp

我有使用 JSP 的 Spring 应用程序。我需要重定向一页，但只需要一次。这是由于 spring 安全性 - 一旦用户访问此页面，我需要调用重定向以将他注销，但要留在同一页面上。有什么办法，只能通过java、html或js来做到这一点吗？或者也许我问错了 - 一定有某种方法，如何做到这一点，但我不是很喜欢前端技术，所以我很高兴，如果有人可以发布一些代码来告诉我，如何做到这一点工作..谢谢:)

所以用例：用户输入 mywebsite.com/login -> 如果他已经登录，我需要调用重定向以将他注销 -> 应该出现相同的站点，但现在没有重定向。

PS：我无法将用户重定向到另一个站点 - 它必须是具有相同源代码的同一个站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:33:13.987

如果我了解您的用例，我宁愿注销用户作为登录操作的一部分（即排除注销过程，并从注销操作和登录操作中调用它）。

如果这不可行（而且我没有理由不这样做），我将专注于“如果他登录则重定向”部分而不是“仅重定向一次”部分 - 前者很容易检查假设您正在使用某种会话来跟踪登录状态，几乎不需要对您的代码进行任何修改。

免责声明：我对 Sprint 几乎一无所知，这些都是非常笼统的评论，应该适用于任何经典的 web 应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T05:34:33.133

您可以使用过滤器。

```
@Override
    public void doFilter(ServletRequest arg0, ServletResponse arg1, FilterChain arg2) throws IOException, ServletException {
            HttpServletRequest test1=    (HttpServletRequest) arg0;

         test1.getRequestURL()); it gives  http://localhost:8081/applicationName/menu/index.action
         test1.getRequestURI()); it gives applicationName/menu/index.action
         String pathname = test1.getServletPath()); it gives //menu/index.action

        if(pathname.equals("//menu/index.action")){ 
            arg2.doFilter(arg0, arg1); // call to urs servlet or frameowrk managed controller method

            // in resposne 
           HttpServletResponse httpResp = (HttpServletResponse) arg1;
           RequestDispatcher rd = arg0.getRequestDispatcher("another.jsp");  redirect to another page at response time 
           rd.forward(arg0, arg1);

    } 
```

不要忘记 `<dispatcher>FORWARD</dispatcher>`在 web.xml 中放入过滤器映射如果您不想使用过滤器，您可以从 urs 控制器方法重定向到另一个 jsp。

# android - 所选项目不应再次出现在微调器中以供选择

> ID：15563341
> 
> 赞同：2
> 
> 时间：2013-03-22T05:29:00.213
> 
> 标签：android, android-spinner, android-custom-view

我有这些物品的微调器

```
<string-array name="spnr_browse_array">
        <item>Browse By</item>
        <item>Category</item>
        <item>Subject</item>
        <item>Author</item>
    </string-array> 
```

当我单击微调器时，它会显示下拉列表，通常如图所示。 ![在此处输入图像描述](../Images/59781e2b491be1abdc636c1f687fc84d.png)

现在我真正想要的是，当它被选中时，“Browse By”项目不应该再次出现在下拉列表中，它应该看起来像这样..

![在此处输入图像描述](../Images/e373c907d8c6a548eaa233576e448163.png)

所以我怎么能做到这一点，这是否可能在微调器中实现。请为此告知其他替代方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:32:52.223

你可以加

```
android:prompt="Browse By" 
```

在微调器的 xml 文件中。它将显示为这些项目列表的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:39:23.433

您可以通过设置其属性将文本设置`Browse By`为布局中微调器的标题，如下所示`android:prompt`。

> ```
>  <Spinner
>       android:id="@+id/spinner"
>       android:layout_width="wrap_content"
>       android:layout_height="wrap_content"
>       android:prompt="Browse By" <---- Check here.
>       /> 
> ```

# quartz-2d - 如何使用CGContextDrawImage？

> ID：15563343
> 
> 赞同：2
> 
> 时间：2013-03-22T05:29:16.743
> 
> 标签：quartz-2d, cgcontextdrawimage

我需要一些使用 CGContextDrawImage 的帮助。我有以下代码将创建一个位图上下文并将像素数据转换为 CGImageRef。现在我需要使用 CGContextDrawImage 显示该图像。我不太清楚我应该如何使用它。以下是我的代码：

```
- (void)drawBufferWidth:(int)width height:(int)height pixels:(unsigned char*)pixels
    {
     const int area = width *height;
     const int componentsPerPixel = 4;
     unsigned char pixelData[area * componentsPerPixel];

     for(int i = 0; i<area; i++)
     {
          const int offset = i * componentsPerPixel;
          pixelData[offset] = pixels[0];
          pixelData[offset+1] = pixels[1];
          pixelData[offset+2] = pixels[2];
          pixelData[offset+3] = pixels[3];
     }

     const size_t BitsPerComponent = 8;
     const size_t BytesPerRow=((BitsPerComponent * width) / 8) * componentsPerPixel;
     CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
     CGContextRef gtx = CGBitmapContextCreate(pixelData, width, height, BitsPerComponent, BytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);
     CGImageRef myimage = CGBitmapContextCreateImage(gtx);

     //What code should go here to display the image?

     CGContextRelease(gtx);
     CGImageRelease(myimage);

} 
```

任何帮助或示例代码都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:49:03.887

创建一个名为：MyDrawingView.h 的文件

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface MyDrawingView : UIView
{
}

@end 
```

现在创建一个名为：MyDrawingView.m 的文件

```
#import "MyChartView.h"

@implementation MyDrawingView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        // Write your initialization code if any.

    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    // Create Current Context To Draw
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIImage *image = [UIImage imageNamed:@"image.jpg"];
    // Draws your image at given poing
    [image drawAtPoint:CGPointMake(10, 10)];
} 
```

// 现在在你的视图中使用它

```
 #import "MyChartView.h"    

 MyDrawingView *drawView = [[MyDrawingView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
 [self.view addSubview:drawView];

 // whenever you want to update that view call
 [drawView setNeedsDisplay]; 
```

// 这是你处理（绘制）图像的方法

```
- (void)drawBufferWidth:(int)width height:(int)height pixels:(unsigned char*)pixels
{
    const int area = width *height;
    const int componentsPerPixel = 4;
    unsigned char pixelData[area * componentsPerPixel];

    for(int i = 0; i<area; i++)
    {
        const int offset = i * componentsPerPixel;
        pixelData[offset] = pixels[0];
        pixelData[offset+1] = pixels[1];
        pixelData[offset+2] = pixels[2];
        pixelData[offset+3] = pixels[3];
    }

    const size_t BitsPerComponent = 8;
    const size_t BytesPerRow=((BitsPerComponent * width) / 8) * componentsPerPixel;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef gtx = CGBitmapContextCreate(pixelData, width, height, BitsPerComponent, BytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);
    CGImageRef myimage = CGBitmapContextCreateImage(gtx);

    // Convert to UIImage
    UIImage *image = [UIImage imageWithCGImage:myimage];

    // Create a rect to display
    CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);

    // Here is the Two Snnipets to draw image
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Transform image
    CGContextTranslateCTM(context, 0, image.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // Finaly Draw your image
    CGContextDrawImage(context, imageRect, image.CGImage);

    // You can also use following to draw your image in 'drawRect' method
    //    [[UIImage imageWithCGImage:myimage] drawInRect:CGRectMake(0, 0, 145, 15)];

    CGContextRelease(gtx);
    CGImageRelease(myimage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T15:50:26.587

如果还有其他人在处理这个问题，请尝试将以下代码插入 Ereka 的代码中。Dipen 的解决方案似乎有点过分了。在注释“//此处显示图像应使用什么代码”之后，输入以下代码：

```
CGRect myContextRect = CGRectMake (0, 0, width, height);
CGContextDrawImage (gtx, myContextRect, myimage);
CGImageRef imageRef = CGBitmapContextCreateImage(gtx);
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
UIImageView *imgView = [[UIImageView alloc] initWithImage:finalImage];
[self.view addSubview:imgView]; 
```

# android - 创建一个半透明的“对话活动”

> ID：15563344
> 
> 赞同：0
> 
> 时间：2013-03-22T05:29:20.027
> 
> 标签：android

我有一个对话框样式的活动，它出现在我在 Android 应用程序中的主要活动上。我怎样才能让背景变得半透明？不透明，但半透明——比如 70% 不透明。我尝试将此主题应用于活动：

```
 <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
<item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
      </style> 
```

以及对此的几种变体，但对话活动仍然显示为 100% 不透明。此外，活动本身（及其上显示的元素）的布局 xml，指定背景为“#70000000”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:40:46.167

对于完全透明的对话框，您可以使用它：

步骤 1> 在 'res' 下的 'values' 文件夹中创建一个 colors.xml 文件并添加以下行..

```
<drawable name="transparent">#00000000</drawable> 
```

步骤 2> 在 'res' 下的 'values' 文件夹中创建一个 styles.xml 文件以及以下几行...</p>

```
<style name="Transparent">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowAnimationStyle">
@android:style/Animation.Translucent
</item>
<item name="android:windowBackground">@drawable/transparent</item>
<item name="android:windowNoTitle">true</item>
<item name="android:colorForeground">#fff</item>
</style> 
```

（我猜标签和属性是不言自明的......）

Step 3> 其实就是这样……………………</p>

让我们将其添加到对话框中......

第 4 步> 使用以下几行创建一个类……</p>

```
public class DialogBox extends Dialog {

    public DialogBox(Context context, int theme) {
        super(context, theme);
        setContentView(R.layout.dialog);
        okButton = (Button) findViewById(R.id.dialog_OkButton);
        setListeners();
    }
} 
```

（确保为对话框创建布局）

步骤 5> 接下来创建一个活动类，如下所示……。

```
public class T_Temp extends Activity {

    private DialogBox dialog;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        dialog = new DialogBox(this, R.style.Transparent);
        dialog.show();
    }
} 
```

或者您可以使用它来使对话框具有吸引力以添加模糊效果....

看看这个：有接近 30% 的透明度......

```
 dialog = new AlertDialog.Builder(WordCube.this)  
    .setTitle(WordCube.this.getResources().getString(R.string.app_name))  
    .setMessage(s)  
    .setIcon(R.drawable.logo)  
    .setPositiveButton(R.string.btn_close, null)  
    .show(); 
```

下面显示了添加模糊和消除背景变暗所需的代码（因为我认为背景光线充足时模糊看起来更好）。

```
view plaincopy to clipboardprint?
WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();  
lp.dimAmount=0.0f;  
dialog.getWindow().setAttributes(lp);  
dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
```

# iphone - 要显示的图像数组

> ID：15563346
> 
> 赞同：0
> 
> 时间：2013-03-22T05:29:39.480
> 
> 标签：iphone, ios, arrays, uiimage

我有一个示例代码可以从下面的代码中在 gridview 中显示图像......但它为所有图像显示相同的图像......方法如下......

```
- (MMGridViewCell *)gridView:(MMGridView *)gridView cellAtIndex:(NSUInteger)index
{
MMGridViewDefaultCell *cell = [[MMGridViewDefaultCell alloc] initWithFrame:CGRectNull];
cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", index];
    cell.imageView.image = [UIImage imageNamed:@"cell-image.png"];
 // this needs to be change load from the array
}

- (NSInteger)numberOfCellsInGridView:(MMGridView *)gridView
{
return 64;
} 
```

现在我有一个图像数组，需要放入该`cellAtIndex`方法，但是我应该怎么做才能将所有图像转换为数组中的那个..

数组就像

```
-(void)viewDidLoad{
_imageDatas = [DelegateClass mag]._imageData;
_finaImages = [[NSMutableArray alloc]init];
}
_finaImages = [[NSMutableArray alloc]init];
for (int i = 0; i < [_imageDatas count]; i++) {

    [_finaImages addObject:[self loadImage:i]];
}

- (UIImage *)loadImage:(int)index {
@try {
    UIImage* image = [[UIImage alloc] initWithData:[_imageDatas objectAtIndex:index]] ;

    return image;
 }
@catch (NSException *exception) {
    NSLog(@"ImageFullScreenViewController - loadImage Exception Name = %@ Exception Reason = %@",[exception name],[exception reason]);
  } 
```

如何将数据从下面的数组转换为上面的 imageView.image

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:32:52.867

尝试这个

```
- (MMGridViewCell *)gridView:(MMGridView *)gridView cellAtIndex:(NSUInteger)index
{
MMGridViewDefaultCell *cell = [[MMGridViewDefaultCell alloc] initWithFrame:CGRectNull];
cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", index];
    cell.imageView.image =[imagesArray objectAtIndex: index];
 // this needs to be change load from the array
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:33:05.677

替换这个：

```
cell.imageView.image = [UIImage imageNamed:@"cell-image.png"]; 
```

和：

```
cell.imageView.image = (UIImage *)[_finaImages objectAtIndex:index]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:33:01.310

```
- (MMGridViewCell *)gridView:(MMGridView *)gridView cellAtIndex:(NSUInteger)index
{
    MMGridViewDefaultCell *cell = [[MMGridViewDefaultCell alloc] initWithFrame:CGRectNull];
    cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", index];
    // Use this
    cell.imageView.image = [self loadImage:index];
} 
```

# javascript - 在 RequireJS 中总是需要某些依赖项

> ID：15563348
> 
> 赞同：2
> 
> 时间：2013-03-22T05:29:56.740
> 
> 标签：javascript, requirejs

我正在做一个**项目**，`Backbone`我正在加载RequireJS 。`jQuery``Underscore``Backbone`

 **我发现自己在所有模块中一遍又一遍地输入这种模式：

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) { ... 
```

有没有一种方法或解决方法可以让所有模块都可以使用这 3 个库，而无需明确要求它们，这样我就可以专注于需要额外的东西？

我想在脚本标签中加载这个依赖堆栈，并为我的模块和额外的依赖使用 RequireJS，但我`JamJS`不得不自己连接 jquery、下划线和主干，从而失去了编译功能。

**编辑：**

请参阅[Backbone Boilerplate](https://github.com/tbranyen/backbone-boilerplate)：他们也在使用 JamJS，但他们不需要每个文件的主干、下划线、jquery。不知何故，它对所有人都可用。

他们需要`config.js`带有 RequireJS 的标记中的文件。这导出 require.config 的东西，然后委托给`main.js`. 在 main 中，他们可以神奇地访问**Backbone**！

中间发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:19:47.217

如评论中所述，我有一个沙箱。这是咖啡脚本中的示例：

```
define [
  "core"
  "jquery"
  "extensions/backbone"
  "underscore"
], (core, $, backbone, underscore) ->

  util: 
    underscore: underscore
  mvc:
    Model: backbone.Model
    Collection: backbone.Collection
    View: backbone.View
    Events: backbone.Events
    Router: backbone.Router 
```

这让我可以做

```
define ["sandbox"], (sandbox) -> class View extends sandbox.mvc.View 
```

这类似于[AuraJS 项目中使用的沙箱和](https://github.com/aurajs/aura#sandbox)[外观模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#facadepatternjavascript)的实现，它的好处是......

> 它允许您公开 JavaScript 库中可以安全使用的部分，而不是公开整个 API。这在团队工作时特别有用。

此外，将来如果我想从 BaseView 类而不是直接从 Backbone.View 扩展所有视图，我只需要更改沙箱中的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:20:27.430

您好，您可以使用[SHIM 配置进行全局访问](http://requirejs.org/docs/api.html#config-shim)

从那里获取的示例：

```
shim: {
    'backbone': {
        //These script dependencies should be loaded before loading
        //backbone.js
        deps: ['underscore', 'jquery'],
        //Once loaded, use the global 'Backbone' as the
        //module value.
        exports: 'Backbone'
    }, 
```**

# c# - ASP.NET Web 服务忽略 [NonSerialized] 挂钩

> ID：15563349
> 
> 赞同：0
> 
> 时间：2013-03-22T05:30:06.247
> 
> 标签：c#, asp.net, serialization, soap

我正在尝试使用 C# 在 ASP.NET 中实现 SOAP 服务，这样我就可以使用 Flex 来使用它——但这是下一步。我遇到的问题是我正在尝试与在类中有一个`XmlNamespaceManager`字段的服务器端类进行通信`[Serializable]`：

```
[Serializable]
public class Site {
...
public XmlNamespaceManager xmlNS;
...
} 
```

我尝试将`[NonSerialized]`钩子附加到有问题的字段上，但我的 SOAP 服务似乎没有遵守我的指示。这是服务：

```
public class DotNetWikiService : WebService
{

    [WebMethod]
    public Article doWork(Site ws, String title)
    {
        Page thePage = new Page(ws, title);
        thePage.Load();

        if (thePage.Exists() == false)
        {
            return new Article(title, "Wiki page contents are empty.");
        }

        return new Article(title, thePage.text);
    }
} 
```

这是我尝试运行 .asmx 文件时遇到的错误：

> 要实现 XML 可序列化，从 IEnumerable 继承的类型必须在其继承层次结构的所有级别上都有 Add(System.Object) 的实现。System.Xml.XmlNamespaceManager 未实现 Add(System.Object)。

现在，我知道`XmlNamespaceManager`s 是不可序列化的，所以我试图指出这一点，但是出了点问题，我不知道该怎么办。

请帮忙？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:33:14.877

我已经设法重现了您的问题，并且在我的小测试中似乎已经解决了它...

我最初遇到了与您相同的错误，但这里重要的不是错误，而是堆栈跟踪。这是我得到的一个小片段，我希望你会看到类似的东西：

```
System.Xml.Serialization.TypeScope.GetEnumeratorElementType(Type type, TypeFlags& flags) +1354352
System.Xml.Serialization.TypeScope.ImportTypeDesc(Type type, MemberInfo memberInfo, Boolean directReference) +5553239 
```

所以我们在这里得到一个提示，正在使用的序列化器是基于堆栈跟踪中引用的命名空间的[XmlSerializer 。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)`System.Xml.Serialization`但是，如果我们看一下`[NonSerialize]` [属性](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)，我们可以在注释中看到它适用于 BinaryFormatter 和 SoapFormatter，但当我们想要使用 XmlSerializer 类时则不适用。在这种情况下，我们必须使用[此](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)属性。

这样做会将您对此公共成员的定义变为：

```
[XmlIgnore]
public XmlNamespaceManager xmlNS; 
```

我做了一个小测试类：

```
[Serializable]
public class Site
{
    public string X { get; set; }

    [XmlIgnore]
    public XmlNamespaceManager xmlNS;
} 
```

并从服务方法返回：

```
 [WebMethod]
    public Site HelloWorld()
    {
        Site toReturn = new Site();
        toReturn.X = "hello world";

        return toReturn;
    } 
```

运行它，它出现在浏览器中。测试了该方法，它以 SOAP 结构返回“hello world”。

# java - 如何在 Java 代码中动态生成和检索 JSON？

> ID：15563351
> 
> 赞同：0
> 
> 时间：2013-03-22T05:30:16.357
> 
> 标签：java, json

我有一个用例，我们必须将不同的 JSON 发送到不同的服务器。

区别仅在于 JSON 键之间，键携带的含义相同，数据也相同。

例如，服务器 XYZ 希望以这种格式发送 JSON 数据：

```
{ "firstName":"Sam", "lastName":"Jones"} 
```

现在服务器 ABC 希望以这种格式发送 JSON 数据：

```
{ "fName":"Sam", "lName":"Jones"} 
```

名字和姓氏数据是通过 POJO 填充的。

那么，我该如何实现呢？我不想用 if-else 条件弄乱代码。

但是 wnat 有一些东西可以像动态加载的模板一样工作并创建 JSON 数据并将其检索回 POJO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:36:16.527

您应该创建两个 POJO。每个服务器一个。每个 POJO 可以有不同的属性名称来满足每个服务器的要求。

或者 POJO 可以具有相同的属性名称，但被注释以生成不同的 JSON 属性。像 Jackson 这样的 JSON 库可以使用[JsonProperty](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/annotate/JsonProperty.html)注释来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:26:00.027

这个策略怎么样？

# 1.定义要用作通用的接口..

```
interface People{
    public String getRegularFirstName();
    public String getRegularLastName();
} 
```

# 2.定义每个POJO，实现接口

//“{“firstName”：“Sam”，“lastName”：“Jones”}的类

```
class PeopleData2 implements People{
    private String firstName;
    private String lastName;

    public String getRegularFirstName(){
        return firstName;
    }
    public String getRegularLastName(){
        return lastName;
    }
    //getter setter here..
} 
```

//“{“fName”：“Sam”，“lName”：“Jones”}的类

```
class PeopleData1 implements People{
    private String fName;
    private String lName;

    public String getRegularFirstName(){
        return fName;
    }
    public String getRegularLastName(){
        return lName;
    }
    //getter setter here..
} 
```

# 3\. 让每个 json 格式都配得上每个 POJO 类..

这不是动态策略，因为它需要在新格式出现时添加类。但这将有助于系统可扩展性

# firebase - 在 FirebaseAuthClient 实例执行上一次调用的回调之前调用该方法是否安全？

> ID：15563352
> 
> 赞同：0
> 
> 时间：2013-03-22T05:30:22.790
> 
> 标签：firebase

还是会导致错误？

例子：

```
authClient = new FirebaseAuthClient(baseRef, function(error, user) { ... });

// Try to log in...
authClient.login('password', {email: 'some_email', password: 'some_password'});

// Before the callback from the previous line of code executes...
// Oh wait, I forgot to signup in the first place, let me do that:
authClient.createUser('some_email', 'some_password', function(error, user) { ... }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:10:00.430

虽然在前一个方法完成之前调用这些方法是*安全*的，因为您不会破坏损坏的数据，也不会引发异常，但您可能会看到一些意外（和不确定）的行为，具体取决于用户的状态帐户和会话。

例如，如果检测到现有会话（通过查看浏览器 cookie 和 localStorage），`FirebaseAuthClient`将尝试恢复它，这涉及快速验证步骤。在该步骤完成之前调用`login`将产生不同的效果，具体取决于用户的帐户状态。

继续该示例，如果帐户存在且凭据正确，您将覆盖现有会话，并且您的回调将被调用两次（一次用于现有会话，一次用于新会话）。如果帐户不存在，或者凭据不正确，您可能会先收到一个正确会话的回调，然后在收到错误凭据后出现错误。

了解更多有关您的特定用例和所需用户体验的信息可能会有所帮助，因此我们可以确定构建代码的最清晰方法。希望有帮助！

# android - TTS - 泄露的 ServiceConnection

> ID：15563361
> 
> 赞同：4
> 
> 时间：2013-03-22T05:31:34.823
> 
> 标签：android

我在我的应用程序中使用 TTS。在 onPuase 方法中，我使用以下代码来停止引擎。问题是每当我暂停活动说使用主页按钮时，我都会收到错误，因为我已粘贴在 log cat 部分。我从日志猫（活动 com.example.DragDrop.PlaySeries 已泄漏 ServiceConnection ）中了解到问题是由于某些泄漏造成的。但是，问题并没有停止我的应用程序或干扰任何功能。但我想知道这个问题的严重性以及如何避免这种情况？

请帮忙

```
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();   
    Log.i("PlaySeries", "In pause play series");
    if(tts !=null){
        Log.i("PlaySeries", "In pause play series");
        tts.stop(); 
    //  tts.shutdown();
    }
}

@Override
protected void onDestroy() {  
    //Close the Text to Speech Library
    if(tts !=null){
        Log.i("PlaySeries", "In pause play series");
        tts.stop(); 
        tts.shutdown();
    }
    super.onDestroy();
} 
```

并在 onCreate

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.series);

    tts = new TextToSpeech(this,this);
} 
```

## 日志猫

```
 03-22 10:46:45.205: E/ActivityThread(3881): Activity com.example.DragDrop.PlaySeries has leaked ServiceConnection android.speech.tts.TextToSpeech$Connection@2bbe5960 that was originally bound here03-22 10:46:45.205: E/ActivityThread(3881): android.app.ServiceConnectionLeaked: Activity com.example.DragDrop.PlaySeries has leaked ServiceConnection android.speech.tts.TextToSpeech$Connection@2bbe5960 that was originally bound here03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): android.app.ServiceConnectionLeaked: Activity com.example.DragDrop.PlaySeries has leaked ServiceConnection android.speech.tts.TextToSpeech$Connection@2bbe5960 that was originally bound here03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 03-22 10:46:45.205: E/ActivityThread(3881): 
 03-22 10:46:45.205: E/ActivityThread(3881): 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T06:09:12.843

只要有这个代码`onDestroy`

```
@Override
protected void onDestroy()
{
    super.onDestroy();

    tts.shutdown();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-31T22:48:45.397

当我将 TTS 对象设为静态时，我遇到了类似的错误（因此即使设备旋转，TTS 也会继续说话）。当设备旋转时触发泄漏，因此屏幕在纵向和横向模式之间切换。

有一段时间我很困惑，因为该错误仅在一些运行早期版本 Android 的旧设备上报告。但是，一旦我发现了修复程序，我怀疑该问题对所有设备和版本都很常见，但可能在较新的型号上被掩盖了。

修复是用应用程序上下文初始化 TTS 对象，而不是当前（活动）上下文。

这是我的代码 `tts = new TextToSpeech(getApplicationContext(), this);`

完整的差异可在以下网址获得： [http ://code.google.com/p/android-tts-experiments/source/detail?r=b879fd1042151cbebc736b89a9fb660c895081ea](http://code.google.com/p/android-tts-experiments/source/detail?r=b879fd1042151cbebc736b89a9fb660c895081ea)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-11T12:15:08.287

这是我在活动外部/服务中的 TTS 交钥匙解决方案......

如果你不能使用 onDestroy，只需听它说完然后关闭并停止 TTS。使用应用程序上下文来防止泄漏。给你。

```
 import android.content.Context;
import android.os.Build;
import android.speech.tts.TextToSpeech;
import android.speech.tts.UtteranceProgressListener;
import android.util.Log;

import java.util.Locale;

/**
 * Created by acopp
 * Date: 1/11/2017.
 * Time: 6:11 AM
 * You have permission to use this file for any reason that is not for evil doing
 */

class SpeakThis{
    private Context mContext;
    private TextToSpeech mTextToSpeech;
    private String mTextToSpeak = "";
    private boolean mSpeechAvailable = false;

    SpeakThis(String text,Context context){
        mTextToSpeak = text;
        mContext = context.getApplicationContext();//THIS WILL FIX THE LEAK  THANKS TO JulianHarty

        mTextToSpeech = new TextToSpeech(mContext, mTextToSpeechListener);
        mTextToSpeech.setOnUtteranceProgressListener(mUtteranceListener);//NO ON DESTROY NEEDED JUST LISTEN FOR UTTERANCE STATUS
    }

    void talk(String talkThis){
        mTextToSpeak = talkThis;
        if(mSpeechAvailable){
            speak();
        }else{
            mTextToSpeech = new TextToSpeech(mContext, mTextToSpeechListener);
            mTextToSpeech.setOnUtteranceProgressListener(mUtteranceListener);
            mTextToSpeech.setSpeechRate(0.75f);
            mTextToSpeech.setPitch(1.2f);
        }
    }

    private TextToSpeech.OnInitListener mTextToSpeechListener = new TextToSpeech.OnInitListener() {
        @Override
        public void onInit(int status) {
            if (status == TextToSpeech.SUCCESS) {
                int result = mTextToSpeech.setLanguage(Locale.US);
                if (result == TextToSpeech.LANG_MISSING_DATA ||
                        result == TextToSpeech.LANG_NOT_SUPPORTED) {
                    Log.e("TTS","SPEECH NOT AVAILALBE");
                    mSpeechAvailable = false;

                } else {
                    if(mTextToSpeak.length() > 2){
                        speak();
                    }
                    mSpeechAvailable = true;
                }
            } else {
                Log.e("TTS", "Initilization Failed!");
                mSpeechAvailable = false;
            }

        }
    };

    private void speak() {

        if (mTextToSpeak.length() > 0) {
            try {
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                    mTextToSpeech.speak(mTextToSpeak, TextToSpeech.QUEUE_ADD,null,"toastText");
                } else {
                    //noinspection deprecation
                    mTextToSpeech.speak(mTextToSpeak, TextToSpeech.QUEUE_ADD, null);
                }
            } catch (Exception ignore) {

            }
        }
    }

    private UtteranceProgressListener mUtteranceListener = new UtteranceProgressListener() {
        @Override
        public void onStart(String s) {
        }

        @Override
        public void onDone(String s) {//STOP AND SHUTDOWN TTS WHEN COMPLETED TALKING
            try {
                mTextToSpeech.stop();
                mTextToSpeech.shutdown();
            } catch (Exception ignore) {
            }
        }

        @Override
        public void onError(String s) {

        }
    };
} 
```

# oracle11g - oracle 11g 中的审计跟踪设置

> ID：15563363
> 
> 赞同：1
> 
> 时间：2013-03-22T05:31:50.340
> 
> 标签：oracle11g, audit-trail

我想知道如何查看 oracle 11g 审计设置。

我需要检查它是否启用。

我读了 audit_trail 会有所帮助，但是当我运行查询“select * from audit_trail”时，它返回无效表错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:02:29.390

您可以通过以下方式查看审核状态

```
SHOW parameter audit_trail 
```

或者

```
SELECT name, value FROM v$parameter WHERE name = 'audit_trail'; 
```

如果设置为`none`然后审核是否关闭，其他任何内容都打开。

有关此值的选择的更多信息，请参见[此处](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams017.htm#REFRN10006)。

# cakephp - CakePHP 在安装时是否在数据库中创建表？

> ID：15563365
> 
> 赞同：0
> 
> 时间：2013-03-22T05:32:02.753
> 
> 标签：cakephp, cakephp-2.1

这是我第一次在 localhost 上安装和使用 CakePHP。我已经完成了安装 CakePHP 所需的所有步骤。安装后我检查了我的数据库，它没有显示我的数据库中的任何表。是有问题还是 CakePHP 在安装时没有插入任何表格？

以下是我的 CakePHP 状态：

> 您的 PHP 版本是 5.2.8 或更高版本。
> 
> 您的 tmp 目录是可写的。
> 
> FileEngine 用于核心缓存。要更改配置编辑 APP/Config/core.php
> 
> 您的数据库配置文件存在。
> 
> Cake 能够连接到数据库。
> 
> CakePHP：快速开发 php 框架（默认） 0 查询占用 ms Nr Query Error Affected Num. 行数（毫秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:38:14.203

一个典型的 Cake 工作流程是

1.  [按照建模和数据库约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)创建表

2.  [使用 bake](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html)生成应用程序代码

3.  优化应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:15:17.270

基本安装后，您可以使用 Bake 控制台设置和创建数据库。见[http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:34:19.497

不，没有错。CakePHP 不会为您创建任何表，因为它不知道您的应用程序将使用哪些表。

# android - Android 首次启动新活动

> ID：15563370
> 
> 赞同：0
> 
> 时间：2013-03-22T05:32:17.437
> 
> 标签：android, android-intent, ocr

Android 应用程序问题：我有 MainActivity，当您按下按钮时，它会通过 Intent 和 startActivity 打开相机（OCR）。问题是当我在安装后第一次按下手机中的按钮时，它被阻止了。然后，在第一次之后，它完美地工作......

顺便说一句，当我尝试在 android 模拟器中执行应用程序时，它只给我一个错误：“打开跟踪文件时出错：没有这样的文件或目录”我不知道这个错误是否与我在移动设备中的问题有关. 这是 MainActivity 的意图

```
 Button2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            try {
                Intent i = new Intent(getApplicationContext(), CaptureActivity.class);
                startActivityForResult(i, REQUEST_CODE);
            } catch (Exception e) {
            }

        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
        if (data.hasExtra("ocrResult")) {
            EditText.setText(data.getExtras().getString("ocrResult"));

        } else if (resultCode == RESULT_CANCELED) {
        }
    }
} 
```

在这里，您有将结果发送到 MainActivity 的 OCR 代码

```
public void onClick(View v) {
    finish();
}

public void finish() {
    Intent data = new Intent();
    data.putExtra("ocrResult", ocrResultView.getText());
    setResult(RESULT_OK, data);
    super.finish();
} 
```

最后，清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="edu.sfsu.cs.orange.ocr"
          android:installLocation="auto" 
          android:versionName="0.5.13" 
          android:versionCode="32"
          >
  <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="13"/>

  <supports-screens android:xlargeScreens="true"
                    android:largeScreens="true"
                    android:normalScreens="true"
                    android:smallScreens="true" />
  <uses-feature android:name="android.hardware.camera.autofocus" />
  <uses-feature android:name="android.hardware.camera.flash" android:required="false" />
  <uses-feature android:name="android.hardware.camera"/>
  <uses-feature android:name="android.hardware.screen.landscape"/>

  <application android:icon="@drawable/ic_launcher"
               android:label="@string/app_name">

     <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

    <activity android:name=".CaptureActivity"
              android:screenOrientation="landscape"
              android:configChanges="orientation|keyboardHidden|screenSize"
              android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
              android:windowSoftInputMode="stateAlwaysHidden"              
              >

    </activity> 

    <activity android:name="edu.sfsu.cs.orange.ocr.PreferencesActivity"> </activity>

  </application>
  <uses-permission android:name="android.permission.CAMERA"/>
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
</manifest> 
```

非常感谢！！

# css - 如何在 Jquery mobile 中自定义 UL 元素

> ID：15563387
> 
> 赞同：0
> 
> 时间：2013-03-22T05:33:25.453
> 
> 标签：css, jquery-ui, jquery-mobile

我在列表视图中使用数据过滤器，我想更改 ul 搜索框的高度。

```
<ul id="practiceList" data-role="listview"  data-split-theme="b" data-filter="true" data-filter-placeholder="Choose the item" data-filter-theme="e" data-divider-theme="e" data-dividertheme="f" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" data-inset="true"></ul> 
```

CSS

```
 #page1.ui-content, #practiceList{
    min-height : 100%;
    height     : 100%;
    margin     : 5px;
    padding    : 0;
}
#practiceList.ui-li {
    height : 70px;
}
#practiceList.ui-header .ui-title {margin-right:20px;margin-left:20px;} 
```

我可以使用 UL (id="practicelist") 将 LI 元素自定义到列表视图。但我无法自定义 UL 元素。在这里我需要更改占位符的高度和宽度，即搜索框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:44:25.760

您可以覆盖默认的 jquery 移动样式。

```
.ui-input-search input.ui-input-text {
      height: 70px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:55:14.150

您还可以使用纯 css 自定义 jquery mobile 中元素的高度和宽度......事情是 jquery mobile 为设计提供了环境意味着 css 被动态嵌入到您的 html 代码中......所以你可以定义 css通过在 css 中使用**父或子技术...**

例如，

```
#page ul.ui-listview { /*Your Style*/ }
#page ul.ui-listview li.ui-li { /*Your Style*/ } 
```

等等...

# iphone - iOS 中的电话间隙集成

> ID：15563394
> 
> 赞同：0
> 
> 时间：2013-03-22T05:34:25.543
> 
> 标签：iphone, cordova, integration

我几乎已经开发了iphone应用程序，但是对于某些屏幕我需要使用java脚本中已经制作的功能，所以我想到了使用Phone gap，是否可以在已经存在的项目中添加它。

建议我与您的专家回答谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:46:24.723

我认为将 phonegap 与本机应用程序集成是不可能的。

如果您只需要在您的原生应用程序中使用 javascript、html 和 css，我的建议是您为什么要寻找 Phonegap ？改用[**UIWebView**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

# python - （Python Scipy）如何展平一个 csr_matrix 并将其附加到另一个 csr_matrix？

> ID：15563396
> 
> 赞同：3
> 
> 时间：2013-03-22T05:34:31.350
> 
> 标签：python, xml, nlp, scipy, classification

我将每个 XML 文档表示为 csr_matrix 格式的特征矩阵。现在我有大约 3000 个 XML 文档，我得到了一个 csr_matrices 列表。我想将这些矩阵中的每一个展平为特征向量，然后我想将所有这些特征向量组合成一个 csr_matrix，将所有 XML 文档表示为一个，其中每一行是一个文档，每一列是一个特征。

实现此目的的一种方法是通过此代码

```
X= csr_matrix([a.toarray().ravel().tolist() for a in ls]) 
```

其中 ls 是 csr_matrices 的列表，但是，这是非常低效的，因为有 3000 个文档，这简直就是崩溃！

换句话说，我的问题是，如何展平该列表“ls”中的每个 csr_matrix 而不必将其转换为数组，以及如何将展平的 csr_matrices 附加到另一个 csr_matrix 中。

请注意，我在 Scipy 中使用 python

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:53:24.810

为什么你`csr_matrix`对每个 XML 都使用，也许最好使用`lil`，`lil_matrix`支持 reshape 方法，这里是一个例子：

```
N, M, K = 100, 200, 300
matrixs = [sparse.rand(N, M, format="csr") for i in xrange(K)]
matrixs2 = [m.tolil().reshape((1, N*M)) for m in matrixs]
m1 = sparse.vstack(matrixs2).tocsr()

# test with dense array
#m2 = np.vstack([m.toarray().reshape(-1) for m in matrixs])
#np.allclose(m1.toarray(), m2) 
```

# javascript - qtip2模态对话框不隐藏

> ID：15563398
> 
> 赞同：1
> 
> 时间：2013-03-22T05:34:32.160
> 
> 标签：javascript, jquery, qtip2

我正在使用 qtip2 进行警报、确认、对话功能。现在我想作为（blockui插件）阻止页面视图，直到某些进程完成（例如ajax启动等）。为此，我正在使用以下代码

```
function blockPageDialog(content, title) {

    /* 
    * mainbody is the id of the body section of html
    */
    $('#mainbody').qtip(
                {
                    content: {
                        text: '<img src="/Content/images/ajax-loader.gif"/>'

                    },
                    position: {
                        my: 'center', at: 'center', // Center it...
                        target: $(window) // ... in the window
                    },
                    show: {
                        ready: true, // Show it straight away
                        modal: {
                            on: true, // Make it modal (darken the rest of the page)...
                            blur: false, // ... but don't close the tooltip when clicked
                            escape: false //dont hide on escape button 
                        }
                    },
                    hide: true, // We'll hide it maunally

                    style: {
                        classes: 'qtip-shadow qtip-rounded qtip-dialogue', // Optional shadow...
                        widget: true //themeroller
                    },

                    events: {
                        // Hide the tooltip when any buttons in the dialogue are clicked
                        render: function (event, api) {
                            // $('button', api.elements.content).click(api.hide);

                        }
                        // Destroy the tooltip once it's hidden as we no longer need it!
                        , hide: function (event, api) { api.destroy(); }
                    }
                });
} 
```

我把上面的函数称为

```
blockPageDialog(imageToShowProcessing ); 
```

这是按预期阻止页面。

现在我想隐藏/销毁在进程完成时创建的阻塞对话框（例如 ajax 完成）或在按钮单击时创建的不是对话框的一部分（这就是为什么我在对话框中注释了按钮的代码）。

我尝试了以下事情

```
$('#mainbody').qtip('hide');

$('#mainbody').qtip('api').hide(); 
```

两者都不起作用。

我正在使用 jquery 1.9.1, qtip2 update (2.1) 来解决`$.browser` 错误

请指导我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:52:56.587

尝试`$('#mainbody').qtip('destroy');`

# c# - 需要我的列表框从列表中更新

> ID：15563403
> 
> 赞同：1
> 
> 时间：2013-03-22T05:34:40.460
> 
> 标签：c#, list, listbox, refresh, datasource

我将 listbox1 设置为使用名为“serverList”的列表的数据源。当我跑

```
public void button2_Click(object sender, EventArgs e)
{

if (folderPath != "\\realmlist.wtf" && folderPath != "none")
{
    serverList.Add(newServer);
    listBox1.DataSource = serverList;
    File.WriteAllText(folderPath, "Set realmlist " + newServer);
}
} 
```

第一个字符串输入并显示在列表框中就好了，但是当我尝试将另一个字符串添加到列表中时，它不会显示在列表框中，但实际上在列表中。我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:38:56.710

分配 DataSource 后，您应该绑定数据，即 listBox1.DataBind()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:39:30.983

如果winform应用程序

```
 BindingSource source=new BindingSource();
    source.DataSource=serverList;
    listBox1.DataSource = source; 
```

如果不是你必须使用`listBox1.DataBind()`

# php - 我该如何纠正这个警告错误我得到

> ID：15563406
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:34:59.303
> 
> 标签：php, mysql

如何纠正我在函数中遇到的这个错误，下面是我的错误

```
Warning: mysql_query() expects parameter 2 to be resource, null given in C:\xampp\htdocs\how are things\15_06_widget_corp-final\includes\functions.php on line 40
Database query failed: 
```

第 40 行的代码是这样的

```
$subject_set = mysql_query($query, $connection); 
```

这是我的功能代码

```
function get_all_subjects($public = true) {
        global $connection;
        $query = "SELECT * 
                FROM subjects ";
        if ($public) {
            $query .= "WHERE visible = 1 ";
        }
        $query .= "ORDER BY position ASC";
        $subject_set = mysql_query($query, $connection);
        confirm_query($subject_set);
        return $subject_set;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:38:55.343

它需要`$connection`参考与 mysql 服务器的连接。
尝试

```
 $connection = mysql_connect('host','user','pass'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:44:18.683

您必须分配`$connection`给一个

```
mysql_connect() 
```

功能

无论如何，您不应该再使用 mysql 函数，因为它们已被弃用。您可以改用[PDO](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)。

# oracle11g - 在 oracle 11g 中收缩永久表空间

> ID：15563408
> 
> 赞同：5
> 
> 时间：2013-03-22T05:35:11.040
> 
> 标签：oracle11g

我需要在 oracle 11g 中缩小表空间。它不是临时表空间，我不能丢失该表空间中的数据。我的其他表空间之一空间不足，因此我必须重新分配该表空间的剩余大小。收缩不适用于永久表空间。数据文件的当前大小是 1150MB，我希望它是 256MB

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T10:36:54.690

您可以调整文件大小，因此：-

```
ALTER DATABASE DATAFILE '/your/path/your_file01.dbf' RESIZE 256M; 
```

当然如果你已经使用了超过 256M 的空间，那么你会得到一个错误

```
ORA-03297: file contains used data beyond requested RESIZE value 
```

然后您可以使用此查询查看可以调整数据文件大小的最小大小：

```
SELECT  CEIL((NVL(e.hwm, 1) * 8192)/1024/1024) as "Mb"
FROM
    dba_data_files f
LEFT
JOIN    (SELECT file_id, max(block_id + blocks - 1) hwm FROM dba_extents GROUP BY file_id) e ON f.file_id = e.file_id
WHERE
    f.file_name = '/your/path/your_file01.dbf'
/ 
```

*如果您的表空间块大小不是 8192，请先更改该值。另请注意，查询将需要很长时间才能运行 - 这是正常的 - 或者您可以使用许多人喜欢的试错技术并一次调整它的大小，直到它出错。

# php - fb:explicitly_shared=true 不工作

> ID：15563412
> 
> 赞同：0
> 
> 时间：2013-03-22T05:35:28.023
> 
> 标签：php, javascript, facebook-opengraph

```
FB.api("me/bookvote:download", "post", {
    book: "http://mysite/auction_details.php?name='.$item_details["name"].'&auction_id='.$item_details["auction_id"].'&fb:explicitly_shared=true",

}, //Missing a , here? 
```

代码在上面，我正在尝试使用 url 参数 fb:explicitly_shared=true 但它只显示在我的活动提要中，如何正确发布数据？

我也试过这个没有运气

```
FB.api("me/bookvote:download", "post", {
    book: "http://mysite/auction_details.php?name='.$item_details["name"].'&auction_id='.$item_details["auction_id"].'",
fb:explicitly_shared="true"  
}, //Missing a , here? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T12:50:10.527

在你的对象中有一个错误。

因为`:`将键与值分开，所以您必须将 fb:explicitly_shared 放入`'`或`"`将整个字符串作为键。

试试这个：

```
FB.api("me/bookvote:download", "post", {
  'fb:explicitly_shared' : 'true'  
} 
```

# django - Django 使用自定义信号发送邮件

> ID：15563413
> 
> 赞同：2
> 
> 时间：2013-03-22T05:35:35.557
> 
> 标签：django, django-views, django-signals

在我的示例中，信号函数是在 models.py 中创建的。而不是这个，我认为可以使用自定义信号概念。

我用于信号功能的 models.py 是

```
class Book(models.Model):
    [..........]

def send_update(sender, instance, created, **kwargs):
    if instance.author_name:
        message = "Book is updated"
        subject = "Updates"
        send_mail(subject, message, your_email,
            [instance.email,])

post_save.connect(send_update, sender=Book) 
```

views.py 是

```
if request.POST:
        form = BookForm(request.POST)

        if form.is_valid():
            cd = form.cleaned_data
            form.save()
            return redirect('/index/')
    return render_to_response('addbook.html',{ 'form':form },context_instance=RequestContext(request)) 
```

取而代之的是，我们如何使用 signals.py 文件创建自定义信号来发送邮件。

我正在尝试在实践中学习这一点，一个例子将帮助我做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T08:42:44.773

**信号.py**

```
from django.db.models.signals import post_save
from app.models import Book

def send_update(sender, instance, created, **kwargs):
    if instance.author_name:
        message = "Book is updated"
        subject = "Updates"
        send_mail(subject, message, your_email,
            [instance.email,])

post_save.connect(send_update, sender=Book) 
```

通过将信号导入应用程序的`__init__.py`文件来注册信号。这将允许`import models`from `signals.py`。

`__init__.py`

```
import signals 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:43:22.960

Define your signal and receiver in `signals.py`:

```
from django.dispatch import Signal

post_update = Signal(providing_args = ['instance'])

def send_update(...):
    ....

post_update.connect(send_update, sender = Book) 
```

In `views.py`, send the signal right after you save the form:

```
instance = form.save()
post_update.send(sender = Book, instance = instance) 
```

# c++ - 追逐指针方法失败

> ID：15563414
> 
> 赞同：0
> 
> 时间：2013-03-22T05:35:45.560
> 
> 标签：c++, arrays, pointers, memory-management

我正在尝试修改 char 数组（“1,204,342,544”）以最有效的方式删除所有逗号。我正在使用追逐指针方法来解决这个问题。我已经用 C++ 实现了解决方案，但我的代码似乎失败了。我需要一些帮助来查找/纠正我的错误。另外请建议是否有更好（更有效的方法）来实施相同的解决方案。

我知道它在 Python 中真的很简单！

```
arr = "1,234,34,54"
print arr.replace(',','') 
```

在 C++ 中使用追逐指针（高效方式）

```
#include <iostream>
using namespace std;

char* removeCommas(char* arr) {
    char *curr = arr; // pointer to current position
    char *tail = arr; // tail pointer

    while (curr) {
        if (*curr != ',') {
            if (curr != tail) {
                *tail = *curr;
            }
            curr ++;
            tail ++;
        }
        else {
            curr ++;
        }
    }
    *tail = '\0';
    return arr;
}

int main() {
    char arr[] = "1,204,342,544";    
    removeCommas(arr);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:42:08.997

我不知道是否还有其他问题，但首先突出的是：

```
while (curr) 
```

由于我没有在代码中`NULL`或`nullptr`任何地方看到任何分配，我看不出这怎么可能是正确的。所以我假设您可能打算检查空字符，而不是空指针。

```
while (*curr) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:46:05.803

```
string s = "1,204,342,544";
s.erase( remove( s.begin(), s.end(), ',' ), s.end() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T15:52:47.823

```
char* removeCommas(char* arr) {
        char *curr = arr; // pointer to current position
        char *tail = arr; // tail pointer

        while(1){
                switch(*tail=*curr++){
                        case '\0':
                                return arr;
                        case  ',':
                                continue;
                        default:
                                tail++;
                }
        }
} 
```

# sql - 计算百分比sql server的值

> ID：15563415
> 
> 赞同：0
> 
> 时间：2013-03-22T05:35:50.293
> 
> 标签：sql, sql-server

我有这张桌子。

```
 orderid  processid uid   user     processdesc  companyname     ordervalue perwet  orgid
   1    1   16  Damayanti   Enquiry Synechron   33000   10.00   NULL
   1    2   4   Meghana Requirement Synechron   33000   10.00   NULL
   1    3   5   Yogini  Proposal FollowUp   Synechron   33000   10.00   NULL
   1    4   5   Yogini  Order   Synechron   33000   20.00   NULL
   1    5   4   Meghana Vendor Management   Synechron   33000   10.00   NULL
   1    6   1   anaghantech Collection  Synechron   33000   20.00   NULL
   2    1   4   Meghana Enquiry test    100000  10.00   NULL
   2    2   4   Meghana Requirement test    100000  10.00   NULL
   2    3   5   Yogini  Proposal FollowUp   test    100000  10.00   NULL
   2    4   4   Meghana Order   test    100000  20.00   NULL
   2    5   4   Meghana Vendor Management   test    100000  10.00   NULL
   2    6   1   anaghantech Collection  test    100000  6.67    NULL
   2    6   4   Meghana Collection  test    100000  6.67    NULL
   2    6   16  Damayanti   Collection  test    100000  6.67    NULL
   5    1   16  Damayanti   Enquiry FASTER HYDRAULICS PVT. LTD. 700000  10.00   NULL
   5    2   16  Damayanti   Requirement FASTER HYDRAULICS PVT. LTD. 700000  10.00   NULL
   5    3   16  Damayanti   Proposal FollowUp   FASTER HYDRAULICS PVT. LTD. 700000  10.00   NULL
   5    4   16  Damayanti   Order   FASTER HYDRAULICS PVT. LTD. 700000  20.00   NULL 
```

我想在此表中再添加一列

喜欢`perwet/100 * ordervalue`

使用下面给出的查询

```
SELECT a.orderid, 
       b.processid, 
       b.uid, 
       d.username, 
       c.processdesc, 
       a.companyname, 
       b.ordervalue, 
       b.perwet, 
       b.orgid 
FROM   ordermaster a, 
       temp_calpoints1 b, 
       process c, 
       userinfo d 
WHERE  a.orderid = b.orderid 
       AND c.processid = b.processid 
       AND d.uid = b.uid 
ORDER  BY b.orderid, 
          b.processid, 
          b.uid; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:46:14.347

您可以使用 VIEW 而不是向表中添加新列：

```
CREATE VIEW dbo.MyView
AS
SELECT a.orderid, 
       b.processid, 
       b.uid, 
       d.username, 
       c.processdesc, 
       a.companyname, 
       b.ordervalue, 
       b.perwet, 
       b.orgid,

       MyField = b.perwet / 100 * b.ordervalue

FROM   ordermaster a, 
       temp_calpoints1 b, 
       process c, 
       userinfo d 
WHERE  a.orderid = b.orderid 
       AND c.processid = b.processid 
       AND d.uid = b.uid 
```

# google-maps - 多边形坐标更改/编辑/移动事件（谷歌地图 V3）

> ID：15563420
> 
> 赞同：6
> 
> 时间：2013-03-22T05:36:05.153
> 
> 标签：google-maps, google-maps-api-3

由于 Google maps v3.11，可以将`draggable`属性设置为`Polygon`,`Circle`和`Rectangle`. 例如，`new google.maps.Polygon({ draggable: true })`。

对于`Circle`和`Rectangle`，有 和 之类的事件，`radius_changed`我们可以在有任何变化时进行订阅。`center_changed``bounds_changed`

但是对于`Polygon`，我们只能订阅`set_at`,`insert_at`和`remove_at`的事件`polygon.getPath()`。

因此，在我拖动多边形后会出现问题，多边形的位置已更改/编辑/移动，但没有事件监听此更改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-20T05:51:13.527

有一个更好的方法来实现这一点，如果你想听路径位置的变化和路径中的新点，这里是代码：

```
place_polygon = new google.maps.Polygon({/*...*/});
var place_polygon_path = place_polygon.getPath()
google.maps.event.addListener(place_polygon_path, 'set_at', polygonChanged);
google.maps.event.addListener(place_polygon_path, 'insert_at', polygonChanged);

function polygonChanged(){
    console.log('Changed');
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-22T05:58:38.493

“天灾”事件如何？

这[对我有用](http://www.geocodezip.com/v3_GoogleEx_polygon-simple_draggable.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T20:32:22.053

正如上面提到的答案，我们可以使用`dragstart`/`dragend`事件在拖动过程中获取初始位置和最后位置，然后更新更新多边形的路径坐标 ( `polygonPath`)。

我们可以这样做：

```
let posInit: ILatLng;
let posLast: ILatLng;

this.area.addListener('dragstart', (event) => {
  posInit = event.latLng.toJSON();
});
this.area.addListener('dragend', (event) => {
  posLast = event.latLng.toJSON();
  polygonPath.forEach((p) => {
    p.lat += posLast.lat - posInit.lat;
    p.lng += posLast.lng - posInit.lng;
  });
}); 
```

# python-2.7 - 如何在每次创建 msi 期间动态更改 wix 中的产品版本

> ID：15563425
> 
> 赞同：0
> 
> 时间：2013-03-22T05:36:33.513
> 
> 标签：python-2.7, wix, wix3.7

我有一个脚本，我在其中将产品的版本号设置为变量“PRODUCTVERSION”，即

```
PRODUCTVERSION= subprocess.check_output('svnversion c:\sandbox -n', shell=False) 
```

我想将此变量“PRODUCTVERSION”作为 msbuild 属性传递给 wix。下面是我尝试过的代码，但最终出现错误消息，

```
light.exe : error LGHT0001: Illegal characters in path. 
```

这是我的脚本，

```
def build(self,projpath):
    PRODUCTVERSION= subprocess.check_output('svnversion c:\sandbox -n', shell=False)
    arg1 = '/t:Rebuild'
    arg2 = '/p:Configuration=Release'
    arg3 = '/p:Platform=x86'
    arg4 = '/p:ProductVersion=%PRODUCTVERSION%'
    p = subprocess.call([self.msbuild,projpath,arg1,arg2,arg3]) 
```

我的 wix 项目中的属性在哪里，

```
<PropertyGroup>
  <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
  <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
  <ProductVersion>$(ProductVersion)</ProductVersion>
  <ProjectGuid>{d559ac98-4dc7-4078-b054-fe0da8363ad0}</ProjectGuid>
  <SchemaVersion>2.0</SchemaVersion>
  <OutputName>myapp.$(ProductVersion)</OutputName>
  <OutputType>Package</OutputType>
  <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  <WixVariables>Version=$(ProductVersion)</WixVariables>
</PropertyGroup> 
```

我想将我的输出名称显示为 'myapp-2.0.PRODUCTVERSION' ，其中 PRODUCTVERSION 是我从 python 脚本中获得的版本号。请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:32:42.603

[文档](http://wix.sourceforge.net/manual-wix3/light.htm)表明，对于 ProductVersion Light 期望 xxxx 格式的内容

如果您想使用版本命名您的 MSI，我一直使用构建后命令来重命名文件，因此...

```
 <Target Name="AfterBuild">
    <Copy SourceFiles=".\bin\$(Configuration)\$(OutputName).msi" DestinationFiles=".\bin\$(Configuration)\$(OutputName)_v%(myVersionNumer).msi" />
    <Delete Files=".\bin\$(Configuration)\$(OutputName).msi" />
  </Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:32:10.390

```
def build(self,projpath):
    PRODUCTVERSION = subprocess.check_output('svnversion c:\my path\to svn\ -n', shell=False)
    arg1 = '/t:Rebuild'
    arg2 = '/p:Configuration=Release'
    arg3 = '/p:Platform=x86'
    arg4 = '/p:ProductVersion=%s' %(PRODUCTVERSION)
    proc = subprocess.Popen(([self.msbuild,projpath,arg1,arg2,arg3,arg4]), shell=True, 
                    stdout=subprocess.PIPE) 
    while True:
        line = proc.stdout.readline()                        
        wx.Yield()
        if not line: break
    proc.wait() 
```

并在 wixproject 中将上述参数作为 MSBuild 属性在构建后传递，

```
<Target Name="AfterBuild">
<Copy SourceFiles=".\bin\$(Configuration)\$(OutputName)-$(ProductVersion).msi" DestinationFiles=".\bin\$(Configuration)\$(OutputName)-$(ProductVersion).msi" />
<Delete Files=".\bin\$(Configuration)\$(OutputName).msi" />
</Target> 
```

# jquery - 删除嵌套的 jquery 不工作

> ID：15563426
> 
> 赞同：0
> 
> 时间：2013-03-22T05:36:35.327
> 
> 标签：jquery, html, addremoveprograms

我有以下 <-div-> 嵌套

```
<div id="smallbox">
<ul class="nolist2 formstyle">
<li>
  <div class="span4"><strong>Vehicle Data</strong></div>
</li>
<li>
  <div class="span3"><strong>Coverage<span class="red">*</span></strong></div>
  <div class="span4"><?php echo form_dropdown('coverage',$list_coverage , set_value('coverage', $coverage),'style="width:150px"'); ?></div>
</li>
<li>
  <div class="span3"><strong>Owner<span class="red">*</span></strong></div>
  <div class="span4"><?php echo form_input($owner,'','class="pageRequired" title="Required"'); ?></div>
</li>
</ul>
</div> 
```

如果使用追加按钮“ADD_B”推送并在类中添加增量“no”，则将添加此嵌套的 <-div-> 块

```
<div class="smallbox1">
:
</div> 
```

如果按钮“REMOVE_B”按下，我尝试删除最后一个嵌套的 div，但无法使用

> $("#remove_b").live("click",function () { $("smallbox"+no).remove(); });

没有是最后一个当前号码有人可以帮助我吗？

谢谢，弗兰斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:38:28.950

你错过了`.`这里 $(".smallbox"+no)

```
$("#remove_b").live("click",function () { $(".smallbox"+no).remove(); }); 
```

不推荐使用 live`.on`

```
$("#remove_b").on('click', '#remove_b', function() { $(".smallbox"+no).remove(); }); 
```

# c - GCC 优化删除了函数序言和结语

> ID：15563427
> 
> 赞同：5
> 
> 时间：2013-03-22T05:36:37.357
> 
> 标签：c, optimization, gcc, assembly, x86

取一个空程序

```
//demo.c

int main(void)
{

} 
```

以默认优化编译程序。

```
gcc -S  demo.c -o dasm.asm 
```

我得到的汇编输出为

```
//Removed labels and directive which are not relevant

main:

pushl   %ebp                  // prologue of main
movl    %esp, %ebp            // prologue of main
popl    %ebp                  // epilogue of main
ret 
```

现在在 -O2 优化下编译程序。

```
gcc -O2 -S  demo.c -o dasm.asm 
```

我得到了优化的程序集

```
main:

rep
ret 
```

在我最初的搜索中，我发现优化标志*-fomit-frame-pointer*负责删除序言和结尾。

[我在gcc 编译器手册](http://gcc.gnu.org/onlinedocs/gcc-4.4.2/gcc/Optimize-Options.html)中找到了有关该标志的更多信息。但无法理解手册给出的以下原因，用于删除序言和结尾。

> 不要将帧指针保存在不需要的函数的寄存器中。

有没有其他办法，提出上述原因？

`"rep"`指令的原因是什么，出现在-02优化？

为什么 main 函数不需要堆栈帧初始化？

如果框架指针的设置不是在主函数中完成的，那么谁来做这个工作？

它是由操作系统完成的还是硬件的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T05:43:36.820

编译器变得越来越聪明，它知道您不需要将堆栈帧指针存储在寄存器中，因为您放入 main() 函数的任何内容都不会使用堆栈。

至于rep ret：

> 这是原理。处理器尝试获取接下来要执行的几条指令，以便它可以开始解码和执行它们的过程。它甚至通过跳转和返回指令来做到这一点，猜测程序接下来会去哪里。
> 
> AMD 在这里说的是，如果 ret 指令紧跟在条件跳转指令之后，他们的预测器无法确定 ret 指令的去向。预取必须停止，直到 ret 实际执行，然后才能再次开始向前看。
> 
> “rep ret”技巧显然可以解决这个问题，并让预测器完成它的工作。“rep”对指令没有影响。

来源：某论坛，google一句找到。

需要注意的一点是，没有序言并不意味着没有堆栈，您仍然可以轻松地推送和弹出，只是复杂的堆栈操作会很困难。

没有序言/结尾的函数通常被称为**裸**函数。黑客非常喜欢使用它们，因为当你跳转到它们时它们不会污染堆栈，我必须承认我知道它们除了优化之外没有其他用途。在 Visual Studio 中，它是通过以下方式完成的：

```
__declspec(naked) 
```

# django - Django [Pinax] 中的 NoReverseMatch 错误

> ID：15563428
> 
> 赞同：0
> 
> 时间：2013-03-22T05:37:04.340
> 
> 标签：django, django-views

我基于 pinax-social 的 Django 项目无法加载其中包含`{% url home %}`的任何页面，并显示如下：

```
NoReverseMatch at /account/login/
Reverse for 'home' with arguments '()' and keyword arguments '{}' not found. 
```

对 url 进行硬编码可以解决问题，只有主页 ReverseMatch 失败。

这是我的 urls.py：

```
from django.conf import settings
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from .views import *
from NEOreka.models import *
from .forms import SignupForm
from django.views.generic.simple import direct_to_template

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns("neo.views",
    url(r"^neo/(?P<neo_id>\d+)/$", "neo_info"),
)

urlpatterns += patterns("",
    url(r"^$", "neo.views.home"),
)
urlpatterns += patterns("", 
    url(r"^admin/", include(admin.site.urls)),
    url(r"^account/signup/$", SignupView.as_view(), name="account_signup"),
    url(r"^account/", include("account.urls")),
    )
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:48:15.277

好的，我测试了这个，它可以工作。我希望它也能在你身边工作。

```
 {% url neo.views.home %} 
```

# laravel - 在 Laravel 中，我应该将非公共 data.json 文件放在哪个文件夹中？

> ID：15563430
> 
> 赞同：4
> 
> 时间：2013-03-22T05:37:12.930
> 
> 标签：laravel, laravel-3

我有另一个系统会在我的 Laravel 站点/文件夹结构的*某个地方放入一个 data.json 文件。*

我只希望 Laravel 能够读取 json 文件（即用户无法通过在浏览器中输入 url 来查看它）。

**这个文件应该放在哪里？**

我目前在将其放入应用程序/模型文件夹或应用程序/[新文件夹]之间犹豫不决。我的 webroot 设置为公用文件夹，因此您无法通过浏览器访问应用程序文件夹。

如果它在那里，我假设我将能够在 php 中读取它，但不能在 javascript 中读取它（这没关系）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T06:25:34.667

只需在 app/ 目录中创建一个新文件夹。那是外人看不到的。正如您所说，所有可见的内容都在公共文件夹中。如果您创建一个新文件夹，您可以通过设置 composer.json 来自动加载它。

# javascript - Javascript - 无法实例化同一对象的多个实例

> ID：15563435
> 
> 赞同：2
> 
> 时间：2013-03-22T05:37:41.023
> 
> 标签：javascript, oop

我正在尝试实例化同一对象的多个实例。第一次实例化工作正常，但是当我尝试初始化另一个对象时，我得到了这个错误，

`Uncaught TypeError: Object #<draw> has no method 'width'`

这是[小提琴](http://jsfiddle.net/Odyss3us/GB4JM/)，这是我的代码：

```
function halo() {
  var width = 720, // default width
      height = 80; // default height

  function draw() {
    // main code
    console.log("MAIN");
  }

  draw.width = function(value) {
    if (!arguments.length) return width;
    width = value;
    return draw;
  };

  draw.height = function(value) {
    if (!arguments.length) return height;
    height = value;
    return draw;
  };

  return draw;
}

var halo = new halo();
halo.width(500);

var halo2 = new halo();
halo2.width(300); 
```

总之，我的目标是实例化同一“类”的多个实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T05:46:03.833

您正在重新定义`halo`cunstructor：

```
var halo = new halo(); // <-- change variable name to halo1
halo.width(500);

var halo2 = new halo();
halo2.width(300); 
```

固定版本：http: [//jsfiddle.net/GB4JM/1/](http://jsfiddle.net/GB4JM/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T06:04:07.623

我会建议一些结构更像这样的东西：

```
Halo = (function() {
  function Halo(width, height) {
    this.width = width || 720; // Default width
    this.height = height || 80; // Default height
  }

  Halo.prototype = {
    draw: function() {
      // Do something with this.width and this.height
    }
  };

  return Halo;
})();

var halo = new Halo(500, 100);
halo.draw();

var halo2 = new Halo(300, 100);
halo2.draw(); 
```

# php - 当网站是 ajaxyfi 时使用 ajax 上传 wordpress 文件

> ID：15563440
> 
> 赞同：0
> 
> 时间：2013-03-22T05:38:07.833
> 
> 标签：php, javascript, jquery, wordpress

我在上传任何文件时遇到问题。我的 word press 网站正在使用[Ajax Page Loader](http://wordpress.org/extend/plugins/ajax-page-loader-15/) Plugin.So 表单提交时页面没有刷新..

我在**print_r($_FILES);**`PHP`中的 functions.php 中的代码没有任何价值；

 **但是当我打印任何字符串时，`echo();`它正在打印，但为什么**print_r($_FILES);** 没有得到任何价值。

**HTML 表单**

```
<form id="career_form" name="career_form" enctype="multipart/form-data">
    <span id='errfrmMsg' style='margin:0 auto;'></span>
    Upload : <input id="career_resume" class="field" style="height: 25px;" type="file" name="career_resume" multiple /></td>
    <input type="hidden" name="action" value="career" />
    <input id="submit_button" onclick="submit_career();" type="button" value="Send" />
</form> 
```

**查询**

```
function submit_career()
{
    jQuery.post(the_ajax_career.ajaxurl_career,
        jQuery("#career_form").serialize(),
            function(response_from_the_action_function){
                jQuery("#errfrmMsg").html(response_from_the_action_function).css({"display":"block"});
            }
        );
} 
```

**functions.php 中的 PHP 代码**

```
wp_register_script("ajax-career", get_bloginfo('template_directory')."/js/custom_js.js", array( "jquery"));
    wp_enqueue_script('ajax-career');
    wp_localize_script("ajax-career","the_ajax_career", array("ajaxurl_career" => admin_url("admin-ajax.php")));
    // add actions
    add_action( "wp_ajax_career", "ajax_action_career" );
    add_action( "wp_ajax_nopriv_career", "ajax_action_career" );

    function ajax_action_career(){ 

        //Nothing getting in this print_r($_FILES) function;

        foreach ($_FILES["career_resume"]["error"] as $key => $error) {
            if ($error == UPLOAD_ERR_OK) {
                $name = $_FILES["career_resume"]["name"][$key];
                move_uploaded_file( $_FILES["career_resume"]["tmp_name"][$key], "uploads/" . $_FILES['career_resume']['name'][$key]);
            }
        }
    } 
```**

# java - 如何防止我的 ArrayList 在 Java GUI 中重置？

> ID：15563442
> 
> 赞同：0
> 
> 时间：2013-03-22T05:38:13.367
> 
> 标签：java, swing, login, arraylist, store

我有一个具有用户登录功能的程序，该功能提示创建用户名和密码，稍后将其存储到两个不同的 ArrayList 中。我添加了一个在创建帐户后直接进入登录的按钮，并且登录工作正常。但是，如果我关闭 GUI 并尝试使用以前的登录信息直接登录，则无法识别用户名/密码。我的 ArrayLists 是否正在重置，或者我的代码中是否有错误？

这是我的登录类的缩短版本：

```
public class OptionGUI extends JPanel  implements ActionListener
{
   ArrayList<String>passworddatabase= new ArrayList();
   ArrayList<String> usernamedatabase= new ArrayList();
   JButton newaccount = new JButton("Create a new account");
   JButton login= new JButton("Login");
   public int response;
  public OptionGUI()
  {

    newaccount.setVerticalTextPosition (AbstractButton.CENTER);
    newaccount.setHorizontalTextPosition(AbstractButton.LEADING);
    newaccount.setActionCommand("create");

    login.setVerticalTextPosition(AbstractButton.CENTER);
    login.setHorizontalTextPosition(AbstractButton.TRAILING);
    login.setActionCommand("login");
    login.setEnabled(true);

    newaccount.addActionListener(this);
    login.addActionListener(this);

    add(newaccount);
    add(login);
   }
  public void actionPerformed(ActionEvent e)
  {
   {
       if ("create".equals(e.getActionCommand()))
      {

        newaccount.setEnabled(true);
        login.setEnabled(false);

        JPanel logininfo= new JPanel();
        JLabel usernameLbl= new JLabel("Choose a username:");
        JLabel passwordLbl= new JLabel("Choose a password:");
        JTextField username= new JTextField();
        JPasswordField password= new JPasswordField();

        logininfo.add(usernameLbl);
        logininfo.add(username);
        logininfo.add(passwordLbl);
        logininfo.add(password);

        logininfo.setVisible(true);

        int input2 = JOptionPane.showConfirmDialog(frame,logininfo, "Create your account:"
                            ,JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        char[] enteredPassword= password.getPassword();
        char[] enteredPassword2= passwordconfirm.getPassword();
        String newusername= username.getText();
        String newpassword= String.valueOf(enteredPassword);
        String newpassword2= String.valueOf(enteredPassword2);

        String[] options = { "Login", "Cancel" };
        response = JOptionPane.showOptionDialog(null, "Your account has been successfully created! Please login to continue.", "Confirmation",JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options,options[0]);                    

            }
        passworddatabase.add(newpassword);
        usernamedatabase.add(newusername);

        }
       if ("loginbutton".equals(e.getActionCommand())|| response==0)
       {  
        login.setEnabled(true);
        newaccount.setEnabled(false);
        JPanel panel= new JPanel();
        panel.setLayout(new GridLayout(2,2));
        JLabel usernameLbl = new JLabel("Username:");
        JLabel passwordLbl = new JLabel("Password:");
        JTextField username = new JTextField();
        JPasswordField passwordFld = new JPasswordField();

        panel.add(usernameLbl);
        panel.add(username);
        panel.add(passwordLbl);
        panel.add(passwordFld);

        panel.setVisible(true);

        int input = JOptionPane.showConfirmDialog(frame, panel, "Enter your password:"
                            ,JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        String inputPassword= String.valueOf(passwordFld);
        String inputUsername= username.getText();

        for(int i=0; i < passworddatabase.size(); i++) 
        {
         if (passworddatabase.get(i).contains(inputPassword))
        {
           JOptionPane.showMessageDialog(null, "Welcome to AIR Ticket Reservation!");
         }

        else
         {   JOptionPane.showMessageDialog(null, "The username or password you entered does not exist.", "Error",
                                    JOptionPane.ERROR_MESSAGE);
                }
            }                
        }
    }
}
    } 
```

这是我的司机：

```
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import javax.swing.JPasswordField;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.JDialog;
import java.awt.GridLayout;
import java.util.Arrays;
import java.awt.EventQueue;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.AbstractButton;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

public class Driver 
{
   public static void main(String[] args)
    { 

        JFrame option= new JFrame ("Ticket Reservation");
        option.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        option.setSize(500,300);
        option.setLocationRelativeTo(null);
        OptionGUI newContentPane= new OptionGUI();
        option.setContentPane(newContentPane);

        option.setVisible(true);
    }             
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:44:47.577

`OptionGUI newContentPane= new OptionGUI();`创建一个新`OptionGUI`实例。

在你的`OptionGUI`课堂上，你给出了一小段这样的代码：-

```
ArrayList<String> passworddatabase= new ArrayList();
ArrayList<String> usernamedatabase= new ArrayList(); 
```

因此，每次您关闭并再次打开它时，它都会创建一个新实例`OptionGUI`，这会将您的两个`ArrayList`s 初始化为`new ArrayList()`（空数组列表）。

# android - 如何在 dp 中将最小宽度像素转换为 Android 最小宽度

> ID：15563447
> 
> 赞同：1
> 
> 时间：2013-03-22T05:38:31.077
> 
> 标签：android

我有 7" 平板电脑，分辨率为 600*1024。我对该设备的观察是，

*   对角线分辨率=169 dpi
*   对角线分辨率=113 dp
*   Android 分辨率桶 = HDPI
*   宽度 * 高度 = 400 dp * 682 dp
*   最小宽度 = 400 dp

但如果我使用`config.smallestScreenWidthDp`它返回最小宽度为 600 dp。但我得到了 400 dp。如何计算这 600 px 到 dp？

**我的计算：**

设备实际最小宽度=`600 px`

设备是 HDPI。因此，将 px 值除以 MDPI 比例因子`1.50`。

我得到了答案`600/1.5= 400 dp`

# bash - Crontab 无法转储基地

> ID：15563451
> 
> 赞同：0
> 
> 时间：2013-03-22T05:38:43.183
> 
> 标签：bash, shell, cron

我的 crontabfile 有一行

```
* * * * * root /home/pk1/Templates/dump.sh 
```

我的转储.sh

```
#!/bin/sh
mysqldump --host=localhost --user=root --password=toor mba_new | gzip > /home/pk1/Templates/`date +"webt-backup_%m-%d-%y"`.gz 
```

如果我在 bash sh dump.sh 中编写 - 一切正常，但 cronjob 不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:45:04.203

你的 crontab 行是错误的，root 在这里无关。它应该是这样的：

```
* * * * * /home/pk1/Templates/dump.sh 
```

如果您尝试以 root 身份运行此命令，那么您必须使用`sudo`，或在用户的 crontab 中安装此 cron 行`root`（不建议这样做，您永远不应该以 root 身份定期运行任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:42:22.937

在 crontab 中写道`sh /home/pk1/Templates/dump.sh`，一切正常

# jquery - C:\fakepath 在 IE 中获取 jquery 而不是在 Firefox 中？

> ID：15563467
> 
> 赞同：0
> 
> 时间：2013-03-22T05:39:38.263
> 
> 标签：jquery, html

这是我的文件上传 onchange 事件：

```
 <input type='file' onchange="readURL(this);" id="loadfile" /> 
```

这是我必须显示文件完整路径的文本字段。

```
<script type="text/javascript">

function readURL(input) {
        if ($.browser.msie) {
            alert( input.value);
        }
        else {
             alert(input.value);
        }
} 
```

这是解决我问题的javascript。但是在警报值中给了我 IE7,IE8,IE9,IE10

```
C:\fakepath\test.csv 
```

Mozilla 给了我：

```
test.csv 
```

那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:57:58.357

在 SO 中已经提出了同样的问题。问题在[这里](https://stackoverflow.com/questions/15563435/javascript-cannot-instantiate-multiple-instances-of-the-same-object)

由于浏览器中的新安全限制，您只能在 IE 中获取完整路径，而没有机会在 Mozilla 中获取完整路径。

希望 IE 也能隐藏完整路径。

# javascript - 拖动碰撞

> ID：15563481
> 
> 赞同：0
> 
> 时间：2013-03-22T05:40:45.130
> 
> 标签：javascript, collision-detection, kineticjs, collision

我对 CANVAS 和 Kineticjs 都很陌生，但我觉得我正在尝试的事情应该比我想象的要容易得多。基本上这就是我到目前为止所拥有的：

我尝试使用的代码是从[kineticjs 停止拖动到与另一个](https://stackoverflow.com/questions/14750048/kineticjs-stop-drag-to-a-shape-when-overlaps-with-another)解决方案重叠但无法使其工作的形状。

请检查实时 jsfiddle[代码](http://jsfiddle.net/qHkYR/2/)

```
var isRectCollide = function(target, box) {
  if (target.x - target.width  >= box.x + box.width  &&
  target.y - target.height >= box.y + box.height &&
  target.x + target.width  <= box.x + box.width  &&
  target.x + target.height <= box.y - box.height )
    return false;
  else
    return true;
} 
```

这样做的想法是让粉红色方块可拖动但被橙色框阻挡，一旦在橙色框周围拖动并且粉红色框“接触”蓝色框并且应该会弹出。

我不确定使用 kineticjs 是否是实现这一点的最简单方法？

任何想法、提示或帮助我都会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:57:52.800

是的，因为 KineticJS 没有碰撞测试，所以你必须自己做。

这是任意 2 个 kineticJS 矩形之间的碰撞测试：

```
function theyAreColliding(rect1, rect2) {
  return !(rect2.getX() > rect1.getX()+rect1.getWidth() || 
           rect2.getX()+rect2.getWidth() < rect1.getX() || 
           rect2.getY() > rect1.getY()+rect1.getHeight() ||
           rect2.getY()+rect2.getHeight() < rect1.getY());
} 
```

下面是你如何调用盒子和障碍物之间的碰撞测试：

```
if( theyAreColliding(box,obstacle){
      // obstacle is blocking box
      alert("You are being blocked!");
} 
```

下面是你如何调用盒子和目标之间的碰撞测试：

```
if( theyAreColliding(box,target){
      // box touched the goal
      alert("Goal!");
} 
```

为了阻止盒子直接穿过障碍物，你必须给盒子一个自定义的拖动函数，如下所示：

```
dragBoundFunc: function(pos){
    if(theyAreColliding(box,obstacle){
        // box is touching obstacle
        // don't let box move down
        return({ x:pos.x, y:obstacle.getY()-1 });
    } else{
        // box is not touching obstacle
        // let it move ahead
        return({ x:pos.x, y:pos.y });
    }
} 
```

您可以在演示中看到它是如何工作的：http: [//www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/)

**[编辑：指定每个代码的去向]**

我将这些部分放在下面的工作片段中。我确实发现了一件不幸的事情。用户可以足够快地拖动粉色框以穿过障碍物——KineticJS 的反应速度不够快，无法阻止非常快速的拖动。

还有——哎呀。我在上面的 theyAreColliding 函数中更正了一些缺少的括号。

dragBoundFunc 作为盒子构造函数的补充（见下面的代码）。

您可以通过在盒子的“dragmove”处理程序中进行测试来测试用户是否有目标，如下所示：

```
 box.on('dragmove', function() {
    if (theyAreColliding(box, target)) {
        // box touched the goal
        alert("Goal!");
    }      
  }); 
```

这是代码和小提琴：http: [//jsfiddle.net/uCAys/](http://jsfiddle.net/uCAys/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
body {
    margin: 0px;
    padding: 20px;
}
canvas {
    border: 1px solid #777;
}
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta2.js"></script>
    <script>
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 300,
            height: 300
        });
        var layer = new Kinetic.Layer();

        //Dragable Pink box
        var box = new Kinetic.Rect({
            x: 100,
            y: 50,
            width: 100,
            height: 50,
            fill: 'pink',
            stroke: 'black',
            strokeWidth: 2,
            draggable: true,
            // this causes box to be stopped if contacting obstacle
            dragBoundFunc: function(pos){
                if(theyAreColliding(box,obstacle)){
                    // box is touching obstacle
                    // don't let box move down
                    return({ 
                        x: pos.x, 
                        y: Math.min( obstacle.getY()-box.getHeight()-1, pos.y)
                    });
                } else{
                    // box is not touching obstacle
                    // let it move ahead
                    return({ x:pos.x, y:pos.y });
                }
            } 
        });

      box.on('dragmove', function() {
        if (theyAreColliding(box, target)) {
            // box touched the goal
            box.setX(100);
            box.setY(50);
            alert("Goal!");
        }      
      });

        // End goal blue box
        var target = new Kinetic.Rect({
            x: 100,
            y: 200,
            width: 100,
            height: 50,
            fill: 'blue',
            stroke: 'black',
            strokeWidth: 2
        });

        // Obstacle/blocker orange box
        var obstacle = new Kinetic.Rect({
            x: 125,
            y: 145,
            width: 50,
            height: 30,
            fill: 'orange',
            stroke: 'black',
            strokeWidth: 2
        });

        function theyAreColliding(rect1, rect2) {
            return !(rect2.getX() > rect1.getX() + rect1.getWidth() ||  //
                     rect2.getX() + rect2.getWidth() < rect1.getX() ||  // 
                     rect2.getY() > rect1.getY() + rect1.getHeight() ||   //
                     rect2.getY() + rect2.getHeight() < rect1.getY());  //
        }

        layer.add(box);
        layer.add(obstacle);
        layer.add(target);
        stage.add(layer);

    </script>
  </body>
</html> 
```

# css - 如何让 HTTPS 域拉入 CSS 数据？

> ID：15563483
> 
> 赞同：3
> 
> 时间：2013-03-22T05:41:11.083
> 
> 标签：css, ruby-on-rails, ruby, https, cross-browser

我在 IE8 中遇到了一些问题，当我访问[https://www.myapp.com](https://www.myapp.com)时，我收到一条安全警告，上面写着：

```
Security Warning: "Do you want to view only the webpage content that was delivered securely?" 
```

我的 CSS 文件似乎被阻止了，因为当我选择“是”时，没有样式。

我在主页和内部页面上查看了我的页面源，这就是我发现的：

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/active_admin.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/comments.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/sessions.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/static_pages.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

如何使 HTTPS 在我的 CSS 文件中呈现而没有安全警告？我是初学者，所以即使查看了各种文件，我也不确定在哪里可以找到要更改的数据。

另外，如果有人熟悉的话，我正在使用 Bootstrap-sass ruby​​ gem。在我的 CSS 文件中，我有`@import "bootstrap";`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T05:43:50.413

**对外部资源**使用以下形式的[协议相关链接](http://paulirish.com/2010/the-protocol-relative-url/)。[他们](http://url.spec.whatwg.org/#concept-scheme-relative-url)将确保在需要时通过 https 提供这些资源。（例如，如果在外部脚本库中链接）

 **```
//domain.com/external/resource 
```

也使用相同的路径相对绝对样式来请求您的 css 中的资源。

```
.elem{ background: url(/path/to/something.png); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:43:29.043

打开您的`CSS`文件并`absolute url`在其中查找任何通过`HTTP`. 当任何元素加载到`HTTP URL`. 很可能您的 CSS 文件包含来自硬编码为 HTTP 的完整 url 的任何背景或任何图像。即使`jquery`有源文件，也必须链接 HTTPS**

# java - 素数构造函数

> ID：15563489
> 
> 赞同：0
> 
> 时间：2013-03-22T05:41:41.527
> 
> 标签：java, factorization

我正在制作两个类，构造类和主要方法，我从用户输入中读取一个数字并吐出数字的主要分解，代码使用 Java。

例如：
输入号码：150
5
5
3
2

但是，对于我的程序，我得到了完整的因素列表。

示例：
输入号码：150
150
75
50
25
5
3
1

我将如何改变它以获得主要因素？

主要方法：

```
import java.util.*;

public class FactorPrinter
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        System.out.print("Enter a integer: ");
        String input1 = scan.nextLine();
        int input = Integer.parseInt(input1);
        FactorGenerator factor = new FactorGenerator(input);
        System.out.print(factor.getNextFactor());

        while (!factor.hasMoreFactors())
        {
            System.out.print(factor.getNextFactor());
        }
     }  
} 
```

这是我的课：

```
public class FactorGenerator 
{
    private int num;
    private int nextFactor;

    public FactorGenerator(int n)
    {
        num = nextFactor = n;
    }

    public int getNextFactor()
    {
        int i = nextFactor - 1 ;

        while ((num % i) != 0)
        {
            i--;
        }

        nextFactor = i;
        return i;
    }

    public boolean hasMoreFactors()
    {
        if (nextFactor == 1)
        {
            return false;
        }
        else
        {
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:23:42.550

@Bohemian 已删除答案的更正版本：

```
for (int i = 2; input > 1 && i <= input; i++)
{
    if (input % i == 0)
    {
        System.out.print(i+" ");
        do
        {
            input /= i;
        } while (input % i == 0);
    }
} 
```

有更快的算法，例如 Knuth *The Art of Computer Programming,* Vol I, #4.5.4 algorithm C，它源自 Fermat，但请注意他的网站上有一个重要的更正。他给出了一个很好的测试值，`8616460799L`因为它有两个相当大的素因数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:03:10.773

您可以添加一个方法来检查返回的因素是否是主要因素：尝试这样的事情：

```
public bool isPrime(int number) {
    int i;
    for (i=2; i*i<=number; i++) {
        if (number % i == 0) return false;
    }
    return true;
} 
```

您可以将其用作：

```
 public class FactorPrinter
{
    public static void main(String[] args)
    {
        //your initial code

        while (!factor.hasMoreFactors())
        {
            int nextFactor= factor.getNextFactor()

            if(isPrime(nextFactor))
           {
            System.out.print();
           }
        }
     }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-21T14:33:27.927

以下方法将打印给定数字的素数。它也包含一些优化。

```
public static void primeFactors(int n) {
    if (n <= 1) {
        return;
    }
    while (n % 2 == 0) {
        System.out.println(2);
        n = n / 2;
    }
    while (n % 3 == 0) {
        System.out.println(3);
        n = n / 3;
    }
    for (int i = 5; i * i <= n; i += 6) {
        while (n % i == 0) {
            System.out.println(i);
            n = n / i;
        }
        while (n % (i + 2) == 0) {
            System.out.println(i + 2);
            n = n / (i + 2);
        }
    }
    if (n > 3) {
        System.out.println(n);
    }
} 
```

# iphone - 放大和缩小云地图时地图标记不会移动

> ID：15563491
> 
> 赞同：1
> 
> 时间：2013-03-22T05:42:01.820
> 
> 标签：iphone, ios, cloudmade

我正在使用云制作的地图，一切对我来说都很好。

我唯一的问题是，当我放大或缩小地图时，地图标记不会随地图移动。

源代码如下所示：

```
id cmTilesource = 
    [[[RMCloudMadeHiResMapSource alloc] initWithAccessKey:@"ABCDEF" styleNumber:78603] autorelease];

[[[RMMapContents alloc] initWithView:mapView tilesource: cmTilesource] autorelease]; 
```

# php - 通过 php 加载显示 sql 十六进制值的 HTML 表单

> ID：15563496
> 
> 赞同：0
> 
> 时间：2013-03-22T05:42:22.957
> 
> 标签：php, html, sql, css, forms

我正在尝试动态加载一个表单，该表单将从 sql 数据库中的行数填充。数据返回十六进制颜色、名称和价格。我想在表单和 POST 上向用户显示颜色和名称，我想发送附加到该特定颜色的价格。我花了一整天的时间试图弄清楚这一点。

任何帮助将不胜感激！

编辑：（这是我到目前为止所拥有的

这是我所拥有的一个例子：http: [//hruska-schuman.com/test2/feedback_form.php](http://hruska-schuman.com/test2/feedback_form.php)

代码：

```
 $query = "SELECT 
     `name`,
     img,
     price
     FROM `gutter`";

            try 
            { 
                    $stmt = $db->prepare($query); 
                $stmt->execute();
            } 
            catch(PDOException $ex) 
            { 
                die("Failed to run query: " . $ex->getMessage()); 
            } 

           $rows = $stmt->fetchAll();  

        $form = 
        '<ol id="selectable" name="selectable">';

        foreach($rows as $row):
        $prices[] = htmlentities($row['price'], ENT_QUOTES, 'UTF-8');
        $form .= '<li class="ui-widget-content" style="background:#'.htmlentities($row['img'], ENT_QUOTES, 'UTF-8').'">'.htmlentities($row['name'], ENT_QUOTES, 'UTF-8').'    Price: '.htmlentities($row['price'], ENT_QUOTES, 'UTF-8').'</li>'; 
        endforeach;

         $form .=' </ol>';

    ?>
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Hruska Gutter Estimator</title>
    <link rel="stylesheet" href="../extras/selecttable/development-bundle/themes/base/jquery.ui.all.css">
    <script src="../extras/selecttable/development-bundle/jquery-1.9.1.js"></script>
    <script src="../extras/selecttable/development-bundle/ui/jquery.ui.core.js"></script>
    <script src="../extras/selecttable/development-bundle/ui/jquery.ui.widget.js"></script>
    <script src="../extras/selecttable/development-bundle/ui/jquery.ui.mouse.js"></script>
    <script src="../extras/selecttable/development-bundle/ui/jquery.ui.selectable.js"></script>
    <link rel="stylesheet" href="../extras/selecttable/development-bundle/demos/demos.css">

    <style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #000000; }
    #selectable .ui-selected { background: #000000; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <SCRIPT type="text/javascript">

          function isNumberKey(evt)
          {
             var charCode = (evt.which) ? evt.which : event.keyCode
             if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
                }

             return true;
          }

       </SCRIPT>
    <script type="text/javascript">
    $(function() {
        $( "#selectable" ).selectable({
            stop: function() {
                var result = $( "#select-result" ).empty();
                $( ".ui-selected", this ).each(function() {
                    var index = $( "#selectable li" ).index( this );
                    result.append( "" + ( index + 1) );
                    return index;
                });
            }
        });
    });
    </script>
</head>

<body>
<h1>New Gutter Estimator!</h1>
<form action="sendmail.php" method="post">

<table>
<tr>
<td>Gutter Color:</td>
<td>
<?php echo $form; ?>
<span id="select-result" name="result">none</span>
<span id="select-result" name="price"><?php echo $prices; ?></span>
</td>
</tr>

<tr>
<td>Board Feet:</td>
<td>
<input type="txtChar" onkeypress="return isNumberKey(event)" name="spouts" value="" maxlength="120" />
</td>
</tr>

<tr>
<td>Number of Spouts:</td>
<td>
<input type="txtChar" onkeypress="return isNumberKey(event)" name="board_feet" value="" maxlength="120" />
</td>
</tr>

<tr>
<td>E-mail to Recieve Estimate:</td>
<td>
<input type="text" name="email_address" value="" maxlength="120" />
</td>
</tr>

<tr>
<td>Additional Comments:</td>
<td>
<textarea rows="10" cols="50" name="comments"></textarea>
</td>
</tr>

<tr><td>&nbsp;</td>
<td>
<input type="submit" value="Get Your Free Estimate!" />
</td>
</tr>
</table>
</form>
</body>
</html> 
```

使用 JQuery UI 选择表：http: [//jqueryui.com/selectable/](http://jqueryui.com/selectable/)

我只是不知道如何获取选定的索引并发布“$prices[selectedIndex]”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:09:18.423

您应该`data-`对颜色元素使用自定义属性（如属性）。

```
 $form .= '<li class="ui-widget-content" style="background:#'.
    htmlentities($row['img'], ENT_QUOTES, 'UTF-8').'"
data-price=".$row['price'].">'.
    htmlentities($row['name'], ENT_QUOTES, 'UTF-8').
    '    Price: '.htmlentities($row['price'], ENT_QUOTES, 'UTF-8').
    '</li> 
```

那么在你的js中你可以做这样的事情：

```
 $(function() {
        $( "#selectable" ).selectable({
            stop: function() {
                var result = $( "#select-result" ).empty();
                $( ".ui-selected", this ).each(function() {
                    var price = $( "#selectable li" ).attr('data-price');
                    result.append( "" + ( price ) );
                    // or you can set it directly to an input / hidden input
                   $('#price-input').val(price);
                    return price;
                });
            }
        });
    }); 
```

哪里`#price-input`可能是隐藏的输入`form`：

```
<input type="hidden" name="selectedPrice" /> 
```

当然，您也可以`radio`为此使用输入。

# c# - 预期 1 实际 0

> ID：15563501
> 
> 赞同：-3
> 
> 时间：2013-03-22T05:42:53.980
> 
> 标签：c#, asp.net, .net, spring.net

我正在开发一个 Spring .net 应用程序。

我有一个带有字段的登录页面 - LoginID 密码

登录时 - 候选人填写表格，因此在登录后我检查候选人是否已经填写表格，然后从数据库中获取值并显示在表格字段中。现在，当候选人没有填写表格时，它的数据库为空行，因此它给了我上述错误..请告诉我应该如何解决这个错误。

我尝试检查 obj 是否为 null 但它没有转到下一行检查 obj 是否为 NULL 它立即抛出上述异常

它在 PAGE_LOAD 函数异常的第 6 行给出错误：EmptyResultDataAccessException 被捕获 不正确的结果大小预期 1 实际 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:06:37.337

正如我上面所说，我从未使用过 Spring.NET，但是查看文档我相信您可能使用了错误的`AdoTemplate`类方法。 `QueryForObject`，根据文档，将`使用 IRowMapper 执行将结果集映射到对象的查询。如果查询不只返回一个对象，则会引发异常。

在您的示例中，如果用户未注册，则他们不会在数据库中，因此将返回 0 个结果。因此错误`Incorrect Resultsize Expected 1 Actual 0`。

尝试使用该`QueryWithRowMapper`方法，因为它是（再次根据文档）以下方法之一`Mapping result sets to objects`：

```
return (CandidateSession)template.QueryWithRowMapper(CommandType.StoredProcedure, "spGetCandidateSession", candidateMapper, parameters); 
```

如果强制转换`CandidateSession`没有失败，我希望返回一个空对象。

同样，我从未在 Spring.NET 中工作过，所以这是基于对文档的粗略阅读。希望它至少能让你走上正确的道路。

# c++ - C/C++中函数指针的问题

> ID：15563503
> 
> 赞同：1
> 
> 时间：2013-03-22T05:43:05.050
> 
> 标签：c++, c, function-pointers

我最近正在阅读 Linux 内核。我发现在很多情况下他们使用结构“typedef xxx f(xxx)”，但我不明白它是如何工作的。（类似函数指针的东西？）

这是我的测试代码。

```
#include<stdio.h>
typedef int Myfunc(int);
typedef int (*point_to_myfunc)(int);
static Myfunc example;
static int example(int a){
    printf("example a=%d\n", a);
    return 1;
}
static void example2(Myfunc* f){
    printf("example2\n");
    f(2);
}
static void example3(int (*)(int));
static void example3(int (*point_to_Myfunc)(int)){
    printf("example3\n");
    point_to_Myfunc(3);
}
int main(){
    point_to_myfunc f=&example;
    example2(f);
    example3(f);
    return 0;
} 
```

谁能给我一个简短的解释？谢谢~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:16:12.123

```
#include <stdio.h>
typedef int Myfunc(int); 
```

`Myfunc`是类型的名称；它是一个接受`int`参数并返回`int`.

```
typedef int (*point_to_myfunc)(int); 
```

`point_to_myfunc`是一个指向函数的指针，它接受一个`int`参数并返回一个`int`. 您还可以：`typedef Myfunc *ptr_to_myfunc;`如果您愿意（同一类型的另一个名称）。

```
static Myfunc example; 
```

这表示'存在一个名为'`example`类型的函数`Myfunc`'。

```
static int example(int a)
{
    printf("example a=%d\n", a);
    return 1;
} 
```

这是一个可能的实现`example`。您不能使用 typedef 名称来喜欢`Myfunc`该类型函数的定义。

```
static void example2(Myfunc *f)
{
    printf("example2\n");
    f(2);
} 
```

这是一个接受指向 a 的指针的函数`Myfunc`。该行`f(2);`调用参数 2 指向的函数并忽略返回值。

```
static void example3(int (*)(int)); 
```

这声明`example3`为一个函数，该函数接受一个指向一个函数的指针，该函数接受一个`int`参数并返回一个`int`结果。它可以写成`static void example3(point_to_myfunc);`or `static void example3(ptr_to_myfunc);`or `static void example3(Myfunc *);`。

```
static void example3(int (*point_to_Myfunc)(int))
{
    printf("example3\n");
    point_to_Myfunc(3);
} 
```

这是`example3`.

```
int main(void)
{
    point_to_myfunc f = &example;
    example2(f);
    example3(f);
    return 0;
} 
```

这个程序有一个变量`f`，它是一个函数的指针。有趣的是，您可以：

```
 point_to_myfunc f2 = example;
    point_to_myfunc f3 = *example; 
```

等等。它们的意思都是一样的。

您还可以使用以下方法调用它们：

```
 (*f2)(101);
    (**f3)(103); 
```

初始化的标准符号既不使用`&`也不使用`*`。如果你是一个老派的 C 程序员，你可以使用`(*f2)(101)`符号来调用函数指针；在 C89 标准之前，这是调用函数指针的唯一方法。现代风格往往是`f2(101);`相反的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:49:33.183

```
typedef int Myfunc(int); 
```

这意味着 Myfunc 是一个函数类型，它接受一个 int 参数并返回一个 int。

这一行：

```
static Myfunc example; 
```

和说的一样

```
static int example(int); 
```

前向声明示例函数。

这样做的一个用途是更清楚地说明一组特定的功能用于特定目的。

```
typedef char CharacterConverter(char);

extern CharacterConverter make_upper_case;
extern CharacterConverter make_lower_case;

extern void process_string(char *s,CharacterConverter *f);
    // easier to see that make_upper_case and make_lower_case are valid arguments. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:01:54.740

Vaughn Cato 是正确的，此外，

```
typedef int (*point_to_myfunc)(int); 
```

定义了一个函数指针，表示point_to_myfunc是一个类型，我们可以这样使用它：

```
point_to_myfunc f=&example; 
```

现在 f 就像 example() 一样，我们可以 f() 来调用方法 example

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T05:53:56.003

typedef 在定义类型时很有用。

例如： `char *a, b;`定义了一个指针“a”和一个char b。 `char *a, *b`定义了两个 char 指针。如果使用 typedef，就很清楚了：

```
typedef char* PCHAR;
PCHAR a,b; 
```

现在，a 和 b 都是 char 指针。

```
typedef int Myfunc(int);
typedef int (*point_to_myfunc)(int); 
```

这两行定义了一对，一个函数格式和一个可以指向函数的指针类型，所以在使用时会更清楚更明显。

# jquery - 切换动态创建的 div

> ID：15563507
> 
> 赞同：5
> 
> 时间：2013-03-22T05:43:11.377
> 
> 标签：jquery, html, toggle

我正在编写自己的轻量级博客平台（我正在尝试学习 PHP 和 jQuery，所以我不只是想使用 Wordpress）。使用 PHP，我有一个分页系统，每页显示 5 篇博客文章。在我的 while 循环中，我想要一个链接，上面写着“发表评论”，点击它时，将打开一个 DIV，其中有一个文本框来输入评论。我正在使用的当前代码在页面上打开了所有 5 个评论 DIV。我需要能够为每个评论 DIV 提供一个唯一 ID（基于我假设的博客文章的 ID）并将其放在我的 jquery 切换功能中，以便在单击链接时只打开一个评论 DIV，而不是所有他们。谁能帮帮我吗？

这是我的 jQuery，它在页面上打开了所有切换的 div：

```
<script type="text/javascript"> 
   $(document).ready(function() {  
     $(".toggleCommentBox").click(function() {
       $(".commentBox").toggle()
     });  
   });      
</script> 
```

这是我的 while 循环中的代码，它显示了博客文章和链接：

```
<a href = "#" class = "toggleCommentBox">Leave a Comment</a>

<div class = "commentBox" style = "display:none;">
    ...Form stuff in here
</div> 
```

我不需要评论框 div 中的表单内容的帮助，我只需要 jQuery 的帮助以使页面上的 5 个评论框中的每一个都独一无二，并且所有这些框都可以单独切换，而不是一个链接打开所有5 在页面上切换 DIV，就像现在发生的那样。任何人都可以给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T05:53:42.573

尝试这样的事情

```
<script type="text/javascript"> 
 $(document).ready(function() {  
 $(".toggleCommentBox").each(function{

   var getId = $(this).attr('getId');
   $(this).click(function(){

        $("#commentBox"+getId).toggle();
     })
  })
}); 
```

```
<a href = "#" class = "toggleCommentBox" getId='1' >Leave a Comment</a>

<div class = "commentBox" style = "display:none;" id="commentBox1">
...Form stuff in here
</div> 
```

希望你明白我想说什么

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T05:45:45.483

使用 jquery 下一个函数：

```
<script type="text/javascript"> 
   $(document).ready(function() {  
     $(".toggleCommentBox").click(function() {
       $(this).next(".commentBox").toggle()
     });  
   });      
</script> 
```

[http://api.jquery.com/next/](http://api.jquery.com/next/)

# html - 仅使用 CSS 和 HTML 在悬停时显示

> ID：15563512
> 
> 赞同：1
> 
> 时间：2013-03-22T05:43:39.247
> 
> 标签：html, css

`div`悬停锚标签时如何显示孩子？当光标悬停锚标记时，我想显示一个`div`with 类。`botm`这是我正在使用的确切方案，所以请保持标签的顺序相同：

HTML：

```
<a> Hover me!</a>
<div class="faraz"> sdjfg 
<div class="dikha">Stuff shown on hover</div>
<div class="botm"></div>
</div> 
```

CSS：

```
div {
display: none;
}

a:hover ~ .faraz > .botm {
display: block;
background-color: RED;
height: 250px;
width: 960px;
}
.botm {
background-color: #0CC;
height: 50px;
width: 100%;
position: fixed;
top: 90px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:49:46.700

目标 div 的父级是隐藏的，因此无法显示。也向父母展示，一切都会奏效。

```
a:hover ~ .faraz{
    display:block;
} 
```

[http://jsfiddle.net/r2Zyp/](http://jsfiddle.net/r2Zyp/)

# machine-learning - Weka 中的分类器选项灰显

> ID：15563524
> 
> 赞同：3
> 
> 时间：2013-03-22T05:44:36.623
> 
> 标签：machine-learning, data-mining, classification, weka

我有缺失值的数字数据。我想在 Weka 中使用朴素贝叶斯分类器对数据进行分类，但该选项显示为灰色。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T09:33:33.393

如果分类器显示为灰色，则表示它不支持您想要执行的任务类型。这可能是由于特征的类型或您想要进行的预测类型。

在您的情况下，您可能正在尝试预测数字而不是分类属性。

# report - BIRT 工具可以替代 BI Publisher 生成报告吗？

> ID：15563525
> 
> 赞同：0
> 
> 时间：2013-03-22T05:44:40.110
> 
> 标签：report, reporting, birt, bi-publisher

我正在使用 Oracle BI Publisher 通过我的 java webservice 调用生成报告。我的输入源是 XML 文件，设计模板是 RTF。当我在 XML 文件中有大量数据时，它有时会导致内存不足。

因此，计划为 BI 发布者提供一些替代方案。

BIRT 能满足我的要求吗？

如果没有，还有其他替代报告工具可以满足我的要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:27:16.423

在任何这样的问题中，都有很多变数。回答有关 BIRT 问题的最简单方法是在[http://www.eclipse.org/birt/phoenix/](http://www.eclipse.org/birt/phoenix/)下载该软件并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:00:38.917

问题似乎有点明显，并且您的 XML 包含的信息比系统可以处理的要多（XML 处理可能会占用大量内存），可能使用直接对数据库进行查询的报告引擎会帮助您缓解这个问题，但是我建议您在切换之前进行详尽的测试。

# hbase - 当为任一行键、列族、列限定符调用 get 时，hbase 会返回什么

> ID：15563526
> 
> 赞同：0
> 
> 时间：2013-03-22T05:44:41.397
> 
> 标签：hbase

当为任一行键、列族、列限定符调用 get 时，hbase 会返回什么

1.  当用它返回的内容调用时`get ( ROW_KEY1 )`，它是否返回所有`CFs`然后各自的`CQs`
2.  调用时`get ( ROW_KEY, CF)`是否返回所有`CQs`....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:04:09.813

对于 (1)，它将返回所有列族和列限定符。对于 (2)，它将返回指定列族的所有列限定符。

# android - 将图像作为 Base64.encodeToString 从 android 发送到 c# 如何获取该图像

> ID：15563531
> 
> 赞同：0
> 
> 时间：2013-03-22T05:45:08.530
> 
> 标签：android, c#-4.0, android-file

从我的 android 应用程序中，我将图像发送到 C# 服务器，将其转换为 Base64

```
@Override
public void onPictureTaken(byte[] data, Camera camera) 
    {
    String image = Base64.encodeToString(data, Base64.DEFAULT);
    sendtoserver(image);
    } 
```

从服务器端我收到了一个字符串，但不知道如何转换它并保存它。为了帮助我得到这个字符串，告诉我如何转换它并将它保存在 C#

```
/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:48:49.220

你试过用`Convert.FromBase64String(string s)`吗？

来源：http: [//msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)

**更新**（发布在此处而不是在评论中，因为代码会显示得更好）您的 Base64 表示不正确。对于您在评论中给出的图像，Base64 表示的长度为 339801 个字符。

我使用以下代码生成 Base64 表示：

```
string path = @"C:\1XlqZF2.jpg";
Image img = Image.FromFile(path);
byte[] arr;
using (MemoryStream ms = new MemoryStream())
{
  img.Save(ms, ImageFormat.Jpeg);
  arr =  ms.ToArray();
}

String b64 = Convert.ToBase64String(arr); 
```

你正在使用什么`Base64`类？我在 MSDN 上找不到。

# visual-studio-2010 - Azure 从 GTE Cyber Trust 全局根迁移到巴尔的摩 Cyber Trust 根

> ID：15563532
> 
> 赞同：2
> 
> 时间：2013-03-22T05:45:10.670
> 
> 标签：visual-studio-2010, c#-4.0, azure, azure-sql-database, azure-blob-storage

我是 Azure 的新手，我正在使用 SQL AZURE 作为一个小型 VM 云服务实例上的数据库运行一个 Web 应用程序（ASP.Net、4.0、C#），我还使用 Azure blob 存储来保存我的文件和图像，我想知道这次迁移将如何影响我的应用程序，我必须采取哪些预防措施才能使我的应用程序在迁移后不会关闭。

# android - 错误打开首选项找不到文件夹'tools...le-windows-x86\sdk\tools\'。在安卓 SDK 中？

> ID：15563533
> 
> 赞同：-2
> 
> 时间：2013-03-22T05:45:19.750
> 
> 标签：android, kindle-fire

当我开始 Eclipse 它给出了错误

```
<"Location of the android sdk not has been step in the preference"> 
```

之后，当我点击打开`preference`按钮时询问`preference`路径...

```
<Could not find folder 'tools...le-windows-x86\sdk\tools\'.> 
```

请帮助我陷入困境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:57:04.020

首先确保你下载了 Android sdk，我推荐使用 developer.android 的[ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)。
现在，在 Eclipse 中，在菜单栏中，单击`Window`> ，`Preferences`然后单击`Android`，并在右侧窗格下`SDK location`确保输入 sdk 的正确路径。

# c# - PSD文件未正确调整大小

> ID：15563534
> 
> 赞同：3
> 
> 时间：2013-03-22T05:45:24.890
> 
> 标签：c#, image-resizing, imageresizer

我正在尝试使用[http://imageresizing.net/将 PSD 图像批量调整为 jpg](http://imageresizing.net/)

PSD 图像未正确转换。

![在此处输入图像描述](../Images/bbbfca93ccf38ef5f81c96da6757d797.png)

帮助

我添加了对 psdcomposer 和 freeImage 的引用并使用它。

![在此处输入图像描述](../Images/3a1458151807e41ebe82bedc22f95bff.png)

```
ImageResizer.Configuration.Config c = new ImageResizer.Configuration.Config();
//PsdReader psReader = new PsdReader();
ImageResizer.Plugins.PsdComposer.PsdComposerPlugin composer = new ImageResizer.Plugins.PsdComposer.PsdComposerPlugin();
//ImageResizer.Plugins.Wic.InteropServices.ComTypes.ExifColorSpace.sRGB
//ImageResizer.Plugins.Wic.InteropServices.MemoryIStream wic = new ImageResizer.Plugins.Wic.InteropServices.MemoryIStream(); 
ImageResizer.Plugins.FreeImageDecoder.FreeImageDecoderPlugin freeImage = new ImageResizer.Plugins.FreeImageDecoder.FreeImageDecoderPlugin();

//psReader.Install(c);
composer.Install(c);
//freeImage.Install(c); 
```

我正在传递以下参数： `scale=both&mode=max&ignoreicc=false&dpi=72&width=1280&height=1280`

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:30:41.550

### 您需要指定应该处理图像的管道。FreeImage 和 PsdComposer 是互斥的。

FreeImage 从 .PSD 文件渲染嵌入的位图，而 PsdComposer 将重新渲染 PSD 中的所有图层（一种更昂贵且不太准确但更灵活的方法）。

### 用于`decoder=freeimage`使用 PSD 的预渲染版本。

# javascript - 在页面加载之前是否有任何用于加载器图像的 jquery 插件？

> ID：15563535
> 
> 赞同：0
> 
> 时间：2013-03-22T05:45:26.907
> 
> 标签：javascript, jquery, html

我为插件做了很多谷歌，但我没有得到。如果您知道任何插件，请告诉我。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:01:33.467

它被称为`pagepreloader`。

[***`Plugin`***](http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/)

[***`Example`***](http://www.gayadesign.com/scripts/queryLoader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:57:06.733

我认为使用[精灵](http://css-tricks.com/css-sprites/)或[base64](http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html)编码图像会更容易（替代解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:04:26.037

你不需要任何插件来试试这个简单..图像标签必须在身体标签旁边

```
<body>
<div id="loading"><img src="img/ajax-loader.gif"></div>
 .
 .
 .

</body> 
```

并将其放在脚本标签中

```
$(window).load(function(){
$("#loading").hide(); 
}); 
```

用于加载 div 的 css

```
#loading {
    background-color: white;
    height: 100%;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 9999;
} 
```

# android - 如何将一个应用程序带到另一个当前正在运行的应用程序前面？

> ID：15563549
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:46:06.363
> 
> 标签：android, android-intent, android-activity, launching-application

**我有一个 android 应用程序，我在其中处理了设备的 Home 按钮单击。当我的应用程序使用Service**运行时，当用户单击 Home 按钮时，我使应用程序自动重新启动。当用户在运行我的应用程序时单击主页按钮时，会显示默认主屏幕，然后再次显示活动。但我的问题是从主屏幕显示我的应用程序的最后一个活动需要很长时间。即，主屏幕显示了很长时间。因为这个用户可以从主屏幕启动任何其他应用程序并且我的应用程序在background.ie，在启动另一个应用程序后按 BACK 按钮时，可以查看我的应用程序。是否可以避免这种延迟并将我的应用程序带到该启动的应用程序的前面？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:48:39.047

将`Home button`代码放入您的`AsyncTask` `doinBackground()`或您可以使用`Handler`. 这将帮助您减少加载`activity`. 有关如何使用 AsyncTask 和 Handler 的更多信息，请查看此链接：[Android 后台处理](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:48:28.523

我在我的服务中实现了一个**倒数计时器**`onStick`，它在. 当我的活动进入前台时，`onNewIntent`我向服务发送一条消息以取消**倒数计时器**。效果很好。

# javascript - 动态加载 JQuery 但 highcharts 失败

> ID：15563554
> 
> 赞同：2
> 
> 时间：2013-03-22T05:46:31.477
> 
> 标签：javascript, jquery, highcharts

我不是一个真正的 javascript 程序员，但我已经为这个问题苦苦挣扎了很长时间 - 任何帮助将不胜感激。

在下面的 jsfiddle - 如果从框架和扩展选项卡中选择 Jquery，highcharts 图表可以正常工作。但代码的重点是我需要动态加载不同的 jquery 版本 - 将图表用作各种小部件。但是将其更改为无库（纯 JS）图表不会加载。

[http://jsfiddle.net/hgera000/JcVLQ/3/](http://jsfiddle.net/hgera000/JcVLQ/3/)

我从这里得到的大部分代码：http: [//alexmarandon.com/articles/web_widget_jquery/](http://alexmarandon.com/articles/web_widget_jquery/)

非常感谢

```
(function() {

// Localize jQuery variable
var jQuery;

/******** Load jQuery if not present *********/
if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.7.2') {
var script_tag = document.createElement('script');
script_tag.setAttribute("type","text/javascript");
script_tag.setAttribute("src",
    "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
if (script_tag.readyState) {
  script_tag.onreadystatechange = function () { // For old versions of IE
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
          scriptLoadHandler();
      }
  };
 } else {
  script_tag.onload = scriptLoadHandler;
 }
// Try to find the head, otherwise default to the documentElement
(document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
// The jQuery version on the window is the one we want to use
  jQuery = window.jQuery;
  main();
}

/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
// Restore $ and window.jQuery to their previous values and store the
// new jQuery in our local jQuery variable
jQuery = window.jQuery.noConflict(true);
// Call our main function
 main(); 
  }

   /******** Our main function ********/
    function main() {

     var chart;
     jQuery(document).ready(function($) { 

    /******* Load CSS *******/
    var css_link = $("<link>", { 
        rel: "stylesheet", 
        type: "text/css", 
        href: "style.css" 
    });
    css_link.appendTo('head');          

    /******* Load HTML *******/

        chart = new Highcharts.Chart({
             credits: {
                 enabled: true,
                 text: '',
                 href: ''
             },
             chart: {
                 renderTo: 'bm-container',
                 events: {
                     click: function () {
                         window.open('http://www.betmetrix.com', '_blank')
                     },
                 },
                 backgroundColor: '#FFFFFF',
                 zoomType: 'xy',
                 type: 'line',
                 marginLeft: 40,
                 marginRight: 40,
                 marginBottom: 40,
             },
             title: {
                 text: 'Election Worm',
                 x: -5,
                 style: {
                     color: '#000000',
                     fontWeight: 'bold',
                     fontSize: '17pt'
                 }
             },
             subtitle: {
                 text: 'Estimated Probability of Victory',
                 x: -5,
                 style: {
                     color: '#000000',
                     //fontWeight: 'bold',
                     fontSize: '13pt'
                 }
             },
             xAxis: {
                 type: 'datetime',
                 minRange: 7 * 24 * 3600000, // 1 week
                 dateTimeLabelFormats: {
                     second: '%H:%M:%S',
                     minute: '%H:%M',
                     hour: '%H:%M',
                     day: '%e %b',
                     week: '%e %b',
                     month: '%b \'%y',
                     year: '%Y'
                 },
                 //max: lnp[lnp.length-1][0]+604800000,
                 //tickInterval: 24*3600*1000*120,
                 //showFirstLabel: false,
                 minTickInterval: 1 * 24 * 3600000, //1 day
                 //maxTickInterval: 1 * 24 * 3600000*365, //30 day
                 startOnTick: false,
                 labels: {
                     style: {
                         color: '#969696',
                         //fontWeight: 'bold',
                         fontSize: '11pt'
                     }
                 }
             },
             yAxis: [{
                 //LHS axis
                 title: {
                     text: '%',
                     align: 'high',
                     rotation: 0,
                     offset: 10,
                     style: {
                         color: '#969696',
                         //fontWeight: 'bold',
                         fontSize: '11pt'
                     }
                 },
                 labels: {
                     style: {
                         color: '#969696',
                         //fontWeight: 'bold',
                         fontSize: '11pt'
                     }
                 },
                 showLastLabel: false,
                 showFirstLabel: false,
                 minRange: 3,
                 minTickInterval: 1,
                 min: 0,
                 max: 100,
                 opposite: false,
                 startOnTick: true,
                 //tickInterval: 5,
                 allowDecimals: false
             }, {
                 //RHS axis
                 title: {
                     text: '%',
                     align: 'high',
                     rotation: 0,
                     offset: 20,
                     style: {
                         color: '#969696',
                         //fontWeight: 'bold',
                         fontSize: '11pt'
                     }
                 },
                 linkedTo: 0,
                 labels: {
                     style: {
                         color: '#969696',
                         //fontWeight: 'bold',
                         fontSize: '11pt'
                     }
                 },
                 showLastLabel: false,
                 minTickInterval: 1,
                 minRange: 3,
                 showFirstLabel: false,
                 startOnTick: true,
                 min: 0,
                 max: 100,
                 opposite: true,
                 //tickInterval: 10,
                 allowDecimals: false
             }],
             tooltip: {
                 xDateFormat: '%d-%b-%Y %l%P', //'%d-%b-%Y %l%P'
                 valueSuffix: '%',
                 valueDecimals: 1
                 //formatter: function () {
                 //  return this.x + '<br/><b>' + this.series.name + ':' + '</b>' + this.y + '%';
                 //}
             },
             legend: {
                 enabled: false
                 //    layout: 'vertical',
                 //    align: 'right',
                 //    verticalAlign: 'left',
                 //   x: -20,
                 //   y: 10,
                 //    borderWidth: 0
             },
             series: [{
                 name: 'Coalition',
                 data: lnp,
                 marker: {
                     enabled: false
                 },
                 yaxis: 0
             }, {
                 name: 'ALP',
                 data: alp,
                 marker: {
                     enabled: false
                 },
                 yaxis: 0
             }],
             exporting: {
                 enabled: false
             }
         });

  });
}

})(); // We call our anonymous function immediately 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:11:32.440

尽管 alexmarandon.com 网络小部件教程提到了其他库，但您的情况可能更适合全动态“链式加载”方法。一旦 jquery 动态加载完成，不要直接转到 main()，而是继续并动态链接加载 Highcharts。再添加一个函数，删除对 Highcharts.js 的静态外部引用，然后用调用此 chainLoadHighchharts() 函数替换对 scriptLoadHandler() 的调用，然后该函数本身将传递给原始 scriptLoadHandler()。

```
 function chainLoadHighCharts() {
    var Highcharts;
    /********  Ok, /now/ dynamically load up highchart too... *********/
    if (window.Highcharts === undefined) {
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type", "text/javascript");
        script_tag.setAttribute("src",
            "http://code.highcharts.com/highcharts.js");
        if (script_tag.readyState) {
            script_tag.onreadystatechange = function () { // For old versions of IE
                if (this.readyState == 'complete' || this.readyState == 'loaded') {
                    scriptLoadHandler(); //here is the call that was orginally called directly from the jquery dynamic load.
                }
            };
        } else {
            script_tag.onload = scriptLoadHandler;
        }
        // Try to find the head, otherwise default to the documentElement
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
    } else {
        scriptLoadHandler();

        //  script_tag.setAttribute("src","http://code.highcharts.com/modules/exporting.js");
    }
} 
```

仍然需要一点点收紧，但它在 jsfiddle 上运行对我来说没有错误。

[http://jsfiddle.net/JcVLQ/5/](http://jsfiddle.net/JcVLQ/5/)

# java - 提高 Java 的计算能力

> ID：15563556
> 
> 赞同：1
> 
> 时间：2013-03-22T05:46:32.767
> 
> 标签：java, eclipse, math, equation, capacity

所以我不确定这是 Eclipse、Java 还是我的计算机的问题。我想做的基本上是*2^57885161-1*。但是，遗憾的是，Eclipse 输出的所有内容都是“Infinity”。我的推断是 Java 对计算方程的最大值设置了限制，Eclipse 会这样做，或者我的计算机无法处理它所需的计算能力。

如果是 Java 或 Eclipse，有没有办法可以补救这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T05:50:25.170

对于非常大的数字，请使用 java.math.BigDecimal（或 java.math.BigInteger）类。

可能发生的情况是您使用的是 int 或 double，而对于 Java 中的这些数据类型，这个数字太大了。使用可以任意长的 BigDecimal，将在给定时间内解决您的问题。

**编辑**- 以前我写过“java.util.BigDecimal”，这是错误的包。

# java - Java - Mergesort 没有正确选择数据透视

> ID：15563557
> 
> 赞同：0
> 
> 时间：2013-03-22T05:46:33.837
> 
> 标签：java

只是练习一些排序算法。我尝试实现递归合并排序，但似乎为每个递归调用获取一个新的枢轴似乎存在问题。

我觉得我的代码应该可以工作......但我是使用 ArrayList 作为数据结构的新手......并且只有数组方面的经验。我需要一个动态大小的数组，所以我使用的是 ArrayList。

它只是不断吐出 pivot = 1 直到溢出：

```
pivot: 1
pivot: 1
pivot: 1
pivot: 1
pivot: 1
...
Exception in thread "main" java.lang.StackOverflowError 
```

**代码：**

```
 import java.util.*;

public class Sorts{
    static Sorts run;               
    List<Integer> initialList = new ArrayList<Integer>();

    public Sorts() {

        //List<Integer> initialList = new ArrayList<Integer>();

        initialList.add(1);
        initialList.add(4);
        initialList.add(8);
        initialList.add(2);
        initialList.add(3);
        initialList.add(7);
        initialList.add(9);

        System.out.print("List of values: (");
        for (int value: initialList) {
            System.out.print(value);
        }
        System.out.println(")");

        //output sorted array
        System.out.println("Sorted list: " + mergeSort(initialList));                                                          
    }

    public List<Integer> mergeSort(List<Integer> list) {                               
        if (list.size() <= 1) {
            return list;
        }

        //after each recursion, generate two new sub lists
        List<Integer> left = new ArrayList<Integer>();
        List<Integer> right = new ArrayList<Integer>(); 

        //generate new pivot for each new list
        int middle = list.size()/2;
        System.out.println("middle: " + middle);

        int i = 0;
        for (int x: list) {
            if (i < middle) {
                left.add(x);
            }
            else {
                right.add(x);
            }
            i++;
        }

        //call mergeSort, passing in each new sublist (left, right)
      left = mergeSort(left);
      right = mergeSort(right);

       return mergeLists(left, right);
     }

    public List<Integer> mergeLists (List<Integer> left, List<Integer> right) {
        List<Integer> sortedList = new ArrayList<Integer>();
        int i = 0;
        while (left.size() > 0 || right.size() > 0) {
            if (left.size() > 0 && right.size() > 0) {
                if (left.get(i) <= right.get(i)) {
                    sortedList.add(left.get(i));
                }
                else {
                    sortedList.add(right.get(i));
                }
            }
            else if (left.size() > 0) {
                sortedList.add(left.get(i));
            }
            else if (right.size() > 0) {
                sortedList.add(right.get(i));
            }
        }

        for (int value : sortedList) {
            System.out.println(value);
        }
        return sortedList;
    }

    public static void main(String []args){
        run = new Sorts();
    }
} 
```

有什么想法吗？我是否错误地使用了 ArrayList？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:55:43.547

问题是您以错误的方式拆分列表：

```
for (int i: initialList) {
    if (i < pivot) {
        left.add(i);
    }
    else {
        right.add(i);
    }
} 
```

`i`是 中的元素`initialList`，而不是元素的索引。将其更改为：

```
int i = 0;
for (int x: initialList) {
    if (i < pivot) {
        left.add(x);
    }
    else {
        right.add(x);
    }
    i++;
} 
```

对于任何不赞成投票的人：我已经对此进行了测试并工作了:)。

另外，你的`merge`算法有问题。您应该在对元素进行排序时合并两个列表，但您只是插入 left 的值，然后插入 right 的值（但可能用于测试目的）。

* * *

根据您的编辑，现在您在获取枢轴时遇到了一个新问题：

```
int pivot = list.get(list.size()/2); 
```

这应该是您在原始代码中发布的：

```
int pivot = initialList.size()/2; 
```

请注意，人们可能会告诉您一些奇怪的建议，因为`pivot`它在[QuickSort](http://en.wikipedia.org/wiki/Quicksort)中使用，而您只是在[MergeSort](http://en.wikipedia.org/wiki/Mergesort)`middle`中使用or`mid`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T06:01:43.850

看看[http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

您无需与枢轴进行比较，它不是您正在实施的分区排序。只需将列表一分为二，就像这样。

```
left = list.sublist(0, pivot);
right = list.sublist(pivot, list.length()) 
```

# android - 从 google play 获取应用内商品价格

> ID：15563558
> 
> 赞同：1
> 
> 时间：2013-03-22T05:46:42.103
> 
> 标签：android, android-billing

我参考这个链接

```
http://developer.android.com/training/in-app-billing/list-iab-products.html 
```

亲爱的大家，我必须从 google play 显示我的应用的应用内产品的价格。虽然我试图从 google play 获取价格，如上面的链接所示......有一个错误

```
" for (String thisResponse : responseList) { " 
```

告诉那个

```
"Type mismatch: cannot convert from element type Object to String". 
```

我该如何解决这个错误？或者我可以通过什么方式从 google play 获得应用内产品价格？

这是我的代码。

```
 ArrayList skuList = new ArrayList();
    skuList.add("000001");
    skuList.add("gas");
    Bundle querySkus = new Bundle();
    querySkus.putStringArrayList("ITEM_ID_LIST", skuList);
    String mPackagePrice;

    try {
        Bundle skuDetails = mService.getSkuDetails(3, 
                   getPackageName(), "inapp", querySkus);

        int response = skuDetails.getInt("RESPONSE_CODE");
        if (response == 0) {
           ArrayList responseList 
              = skuDetails.getStringArrayList("DETAILS_LIST");

           for (String thisResponse : responseList) {

              JSONObject object = new JSONObject(thisResponse);
              String sku = object.getString("productId");
              String price = object.getString("price");
              if (sku.equals("000001")) mPackagePrice = price;
           }
        }

    } catch (RemoteException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T02:42:36.683

就像“323go”一样，它会解决你的问题，但是之后，如果你使用的是 Eclipse，它会要求你用 try/catch 包围这个部分来处理 jsonException：

```
 } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } 
```

他们你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:05:22.983

你不能离开`ArrayList`通用：

```
ArrayList<String> skuList = new ArrayList<String>(); 
```

和

```
ArrayList<String> responseList = ... 
```

# google-chrome - 是否有命令行来部署 chrome 扩展以加快开发速度？

> ID：15563562
> 
> 赞同：1
> 
> 时间：2013-03-22T05:47:04.143
> 
> 标签：google-chrome, deployment, google-chrome-extension

[http://developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)

在文档中，

它指示我们必须每次都打开 chrome:extesion 页面并加载我们自己的扩展

有什么方法可以使用命令行，这样我可以做得更快吗？（mac 操作系统或 linux）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:08:42.063

查看[chrome.runtime.reload()](https://developer.chrome.com/extensions/runtime.html#method-reload)。我自己没有使用过它，但我想你可以在方便的地方放置一个按钮并用它触发该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T21:15:53.677

我正在与一个 Chrome 扩展程序合作的团队发现了以下 CHROME_RUN.py`Python`脚本：

```
cwd = sys.path[0]
CHROME_EXTENSION_DIR = cwd + "/Chrome-Extension"
TEMP_DIR = tempfile.mkdtemp()
TEMP_CHROME_PROFILE = TEMP_DIR + "/Chrome-Temp-Profile"

ccUrl = "PAGE_TO_OPEN.HTML"

if not os.path.exists(TEMP_DIR):
os.makedirs(TEMP_DIR)

FULL_CHROME_ARGS = "-user-data-dir=" + TEMP_CHROME_PROFILE + " --load-extension=" + CHROME_EXTENSION_DIR + " \"" +  ccUrl + "\"";

if _platform == "win32":
    os.system("BUILD_CHROME_PROJECT.py")
    os.system("start chrome " + "-user-data-dir=" + TEMP_CHROME_PROFILE + " --load-extension=" + CHROME_EXTENSION_DIR + " \"" +  ccUrl + "\"")
elif _platform == "darwin":
    os.system("python BUILD_CHROME_PROJECT.py")
    os.system("open /Applications/Google\ Chrome.app --args " + "-user-data-dir=" + TEMP_CHROME_PROFILE + " --load-extension=" + CHROME_EXTENSION_DIR + " \"" +  ccUrl + "\"")
elif _platform == "linux" or _platform == "linux2":
    os.system("./BUILD_CHROME_PROJECT.py")
    os.system("chromium " + "-user-data-dir=" + TEMP_CHROME_PROFILE + " --load-extension=" + CHROME_EXTENSION_DIR + " \"" +  ccUrl + "\"")
shutil.rmtree(TEMP_DIR) 
```

它与 OSX、Windows 和 Linux 兼容。

如果您正在寻找提供 Chrome 的实际参数，如下所示：

```
FULL_CHROME_ARGS = "-user-data-dir=" + TEMP_CHROME_PROFILE + " --load-extension=" + CHROME_EXTENSION_DIR + " \"" +  ccUrl + "\""; 
```

它将创建一个临时配置文件并使用提供的 URL 启动 Chrome。此版本的 Chrome 类似于 FireFox 如何将浏览器实例沙箱化以进行插件测试（新鲜、干净的浏览器实例，包括浏览历史记录、缓存等）

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-23T12:56:33.397

进入扩展页面，按ctrl+R，原来的扩展会自动重新加载，不需要再做任何导入操作。

# javascript - JSON 绑定到 Javascript 对象

> ID：15563565
> 
> 赞同：1
> 
> 时间：2013-03-22T05:47:14.420
> 
> 标签：javascript, jquery, json

总而言之，我看到了很多关于如何在 SO 中将 json 解析为 js 对象（或将 json 转换为 js 对象）的示例。但是我没有看到将 json 绑定到已定义的 js 对象的示例。现在我在尝试制作时遇到了一些麻烦。请帮我检查一下。谢谢。

到目前为止我所做的如下所示：

```
top=function()
{
   this.encoding ='';
   this.nodes=[];
   this.lastid='';
   //I don't how to defined the attributes key in json which is a object.
   //I think there should exist a parse and toJson function; 
   //this.parse= function(jsonstring){...}; 
   //this.toJson=function(){var jsonstr=....;return jsonstr;};
};

group=functon()
{
   this.id='';
   this.type='';
   this.subnodes=[];
   this.tagname='';
   //....
} 
```

`top`是包含不确定数的根，`block`其中自包含对象。

Json 由 Jackson 生成，如下所示。

```
{
"nodes": [
    {
        "type": "group",
        "id": 11,
        "tagName": "blockrow",
        "prefix": "aa",
        "cutomTag": null,
        "attributes": {
            "width": "12"
            //...more
        },
        "subNodes": [
            {
                "type": "group",
                "id": 111,
                "tagName": "blockcol",
                "prefix": "aa",
                "cutomTag": null,
                "attributes": {
                    "width": "4"
                },
                "subNodes": [
                    {
                        "type": "group",
                        "id": 1111,
                        "tagName": "section",
                        "prefix": "aa",
                        "cutomTag": null,
                        "attributes": {
                            "title": "NewSection",
                            "width": "12"
                        },
                        "subNodes": [
                            {
                                "type": "leaf",
                                "id": 11111,
                                "tagName": "message",
                                "prefix": "aa",
                                "cutomTag": null,
                                "attributes": {
                                    "key": "aa_login_success"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "type": "group",
                "id": 112,
                "tagName": "blockcol",
                "prefix": "aa",
                "cutomTag": null,
                "attributes": {
                    "width": "4"
                },
                "subNodes": [
                    {
                        "type": "group",
                        "id": 1121,
                        "tagName": "section",
                        "prefix": "aa",
                        "cutomTag": null,
                        "attributes": {
                            "title": "NewSection",
                            "width": "12"
                        },
                        "subNodes": [
                            {
                                "type": "leaf",
                                "id": 11211,
                                "tagName": "message",
                                "prefix": "aa",
                                "cutomTag": {
                                    "type": "cutomTag",
                                    "beginPos": 20,
                                    "endPos": 50,
                                    "id": -1
                                },
                                "attributes": {
                                    "key": "aa_login_failed"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "type": "group",
                "id": 113,
                "tagName": "blockcol",
                "prefix": "aa",
                "cutomTag": null,
                "attributes": {
                    "width": "4"
                },
                "subNodes": null
            }
        ]
    },
    {
        "type": "group",
        "id": 12,
        "tagName": "blockrow",
        "prefix": "aa",
        "cutomTag": null,
        "attributes": {
            "width": "12"
        },
        "subNodes": [
            {
                "type": "group",
                "id": 121,
                "tagName": "blockcol",
                "prefix": "aa",
                "cutomTag": null,
                "attributes": {
                    "width": "6"
                },
                "subNodes": null
            },
            {
                "type": "group",
                "id": 122,
                "tagName": "blockcol",
                "prefix": "aa",
                "cutomTag": null,
                "attributes": {
                    "width": "6"
                },
                "subNodes": null
            }
        ]
    }
],
"version": 1,
"encoding": "unicode",
"lastId": 1 
```

}

我想象的那种代码如下所示：

```
var curTop= new top(); 
curTop.parse(jsonstring);
//manipulate the curTop object...
//...
var jsonStr=curTop.toJson();
//convert object to json. 
```

我希望到目前为止我解决问题的方向是正确的，如果不正确，我希望你给我一些意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:50:48.447

您应该在原型上定义函数：

```
top.prototype.parse= function(jsonstring){...}; 
```

这样它们在实例之间共享。`this.variable`您可以通过语法访问当前实例的成员。

有关原型如何工作的更多信息，您可以查看：[https ://stackoverflow.com/a/4778408/390330](https://stackoverflow.com/a/4778408/390330)

您的完整功能将类似于：

```
top.prototype.parse= function(jsonstring){
    var data = JSON.parse( json_string );
    this.encoding = data.encoding; 
    // etc. 
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:56:53.307

试试这个..这是一种将字符串转换为对象的方法..

```
 var response = eval('(' + data + ')'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:53:46.970

试试这个代码..

```
var arr_from_json = JSON.parse( json_string ); 
```

# sql - 如何在 SQL 中按任意条件排序

> ID：15563567
> 
> 赞同：12
> 
> 时间：2013-03-22T05:47:25.607
> 
> 标签：sql, sql-server, tsql

我有下表：

```
CREATE TABLE Bable
    (
     id int identity primary key, 
     name varchar(20), 
     about varchar(30)
    );
INSERT INTO Bable (name,about) VALUES
('ООО Name Firm 1','texttexttexttext'),
('ООО Name Firm 2','texttexttexttext'),
('ООО Name Firm 3','texttexttexttext'),
('ООО Name Firm 4','texttexttexttext'),
('ООО Name Firm 5','texttexttexttext'),
('ООО Name Firm $1','texttexttexttext'),
('ООО Name Firm $2','texttexttexttext'),
('ООО Name Firm $3','texttexttexttext'),
('ООО Name Firm 6','texttexttexttext'),
('ООО Name Firm 7','texttexttexttext') 
```

我可以编写如下查询：

```
SELECT * FROM Bable WHERE about = 'texttexttexttext' 
```

如何更改此查询以返回排序的结果，使得名称包含“$”的那些首先出现，然后是那些没有的，然后每个组按`name`升序排序？

**[表结构在这里](http://sqlfiddle.com/#!3/14d86)**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T05:50:33.977

```
SELECT *
FROM   Bable
ORDER  BY CASE WHEN name LIKE '%$..' THEN 0 ELSE 1 END,
          Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/d1514/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:58:50.650

你可以这样做`charatindex`

```
SELECT * FROM Bable WHERE about = 'texttexttexttext'
Order by Case When CHARINDEX('$',name)>0 Then 0 Else 1 End,name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T06:07:15.323

```
 select * from Bable 
order by charindex('$',name,0) desc, name asc 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/d1514/3)

# ios - 在 Twitter 完成块中推送 UIViewController 的大量时间

> ID：15563570
> 
> 赞同：0
> 
> 时间：2013-03-22T05:47:41.583
> 
> 标签：ios, api, twitter

运行此代码时...

```
-(IBAction)loginWithTwitter:(id)sender {
NSLog(@"Logging in with twitter");
ACAccountStore *accountStore = [[ACAccountStore alloc]init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
    if (error) {
        [self showError:error];
        return;
    }

    if (granted) {
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        if ([accountsArray count] > 1) {
            NSLog(@"Multiple twitter accounts");
        }

        ACAccount *twitterAccount = [accountsArray objectAtIndex:0];
        NSLog(@"%@", twitterAccount);

        [self pushMainController];
    }
}];
} 
```

在实际调用之前有 5-10 秒的延迟`pushMainController`，即使帐户信息几乎立即被记录（在预授权之后）。但是，如果我`pushMainController`在块之后移动呼叫，它会立即发生，唯一的问题是用户当时不一定登录。我知道由于网络连接等变量，一个块可能需要一秒钟才能得到响应，但是有人可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:51:18.683

完成块未在主队列上完成。您需要确保您的 UI 代码在主线程上完成：

```
[accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
    if (error) {
        [self showError:error];
        return;
    }

    if (granted) {
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        if ([accountsArray count] > 1) {
            NSLog(@"Multiple twitter accounts");
        }

        ACAccount *twitterAccount = [accountsArray objectAtIndex:0];
        NSLog(@"%@", twitterAccount);

        dispatch_async(dispatch_get_main_queue(), ^{
            [self pushMainController];
        });
    }
}]; 
```

您可能还需要结束`showError`通话。

# python - python“in”语句是否自动返回为真

> ID：15563576
> 
> 赞同：6
> 
> 时间：2013-03-22T05:48:15.217
> 
> 标签：python, python-2.7

在学习如何使用`in`语句使`if`语句更好地工作的过程中，我编写了一些不必要的复杂代码。在代码片段之后我有两个问题。

```
answer = ['Yes', 'yes', 'YES']
answer2 = ['No', 'no', 'NO']
ans = raw_input()
for i in range(0, 3):
    if ans in answer[i]:
        print "Yes!"
    elif ans in answer2[i]:
        print "No!"
    else:
        print "Don't know what that means" 
```

第一个问题：我认为`if n in listname:`自动返回 True 或 False。有谁知道是不是这样？

第二个问题：上面的代码返回 3 行，这取决于 if`ans`实际上是在`answer`or中`answer2`。我试图通过像这样替换相关部分来消除它：

`if ans in answer[i] == True:`

这具有使代码仅输出`else:`语句的奇怪效果。`if ans in answer[i]:`那么任何人都可以向我解释python如何解释和之间的区别`if ans in answer[i] == True:`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T06:19:14.877

要以相反的顺序回答您的问题，显式比较`True`对您不起作用的原因是 Python 没有按照您预期的方式解释表达式。Python 解析器对比较表达式有特殊处理，因此您可以将它们链接在一起并获得合理的结果，如下所示：

```
>>> "a" == "a" == "a"
True 
```

请注意，Python 必须将整个事情视为一个操作，因为如果将其分成两个操作，无论哪种方式都不会得到相同的结果：

```
>>> ("a" == "a") == "a"
False
>>> "a" == ("a" == "a")
False 
```

它们的行为不同，因为括号中的部分首先被评估并返回`True`，但是`True != "a"`整个表达式返回 false。

根据权利，上述内容实际上根本不应该对您的程序产生任何影响。不幸的是，Python`in`通过相同的机制进行处理，`==`因此当您将它们链接在一起时，它们被解释为像上面这样的序列，因此 Python 实际上按如下方式评估它：

```
>> "a" in ["a"] == True
False
>>> ("a" in ["a"]) and ("a" == True)
False 
```

这很古怪，可以说是违反直觉的，但不幸的是它就是这样工作的。要获得您想要的行为，您需要使用括号强制 Python 分别评估第一部分：

```
>>> ("a" in ["a"]) == True
True 
```

综上所述，这`== True`是多余的，因为正如您所怀疑的那样，表达式已经返回一个布尔值，并且该`if`语句可以按原样评估它。

现在回到您的另一个问题，我相信您要做的是根据用户输入的内容获取一行输入并产生相应的输出行。您可以将`in`运算符应用于字符串和列表以查看字符串是否在列表中，这样您就可以`for`完全消除循环：

```
answer = ['Yes', 'yes', 'YES']
answer2 = ['No', 'no', 'NO']
ans = raw_input()
if ans in answer:
    print "Yes!"
elif ans in answer2:
    print "No!"
else:
    print "Don't know what that means" 
```

这首先测试输入是否匹配 中的任何字符串`answer`，然后测试相同`answer2`。当然，您可以实现类似的效果，但也支持其他形式`YeS`，例如只需将输入转换为小写并将其与小写形式进行比较：

```
if ans.lower() == "yes":
    print "Yes!"
# (and so forth) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T06:13:28.643

至于 和 之间的区别`ans in answer[i]`，`ans in answer[i] == True`很简单：Python 将后一种形式扩展为`ans in answer[i] and answer[i] == True`，这当然是 False ，因为字符串不等于`True`。

一个更简单的例子可能有助于说明这一点：

```
>>> a = [1, 2, 3]
>>> 2 in a
True
>>> 2 in a == True
False
>>> 2 in a and a == True
False
>>> (2 in a) == True
True
>>> 2 in a == [1, 2, 3]
True
>>> 2 in a and a == [1, 2, 3]
True 
```

注意添加括号是如何改变行为的——这类似于扩展`1 < x < 5`，而不是`(1 < x) < 5`.

作为旁注，通常认为显式检查`True`or的风格很差`False`- 最好简单地编写`if x in y`.

# android - Android - 如何从 res 文件夹中打开不同的文件？

> ID：15563577
> 
> 赞同：1
> 
> 时间：2013-03-22T05:48:15.747
> 
> 标签：android, file, relative-path

好的，到目前为止，我发现的所有答案似乎都是由不知道答案的人回答的……这应该是一个简单的答案（免费代表为你）：

我在 res/raw/ 中有一个名为 overworld_a.tmx 的文件

我需要使用路径作为字符串加载它，然后将文件名添加到字符串中，因为它会有所不同。

像这样：

```
 String mapName = "overworld_a.tmx";
    try {
        TMXMapReader mapReader = new TMXMapReader();
        map = mapReader.readMap("raw/"+mapName);
    } catch (Exception e) {
        System.out.println("Error while reading the map:\n" + e.getMessage());
        return;
    } 
```

问题是，这显然行不通......简单的问题是，该文件的相对路径是什么？

如果这是不可能的：

复杂的问题是，如何从 res 文件夹及其子文件夹中打开不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:02:51.380

您可以`overworld_a.tmx`从`res/raw`dir 读取为：

**1.**用于从原始文件夹`openRawResource`读取`overworld_a.tmx`：`InputStream`

```
String mapName = "overworld_a"; //<< just pass name without file extension 

resID = getResources().getIdentifier(mapName, "raw", getPackageName());
InputStream inputStream = getResources().openRawResource(resID); 
```

**2.**`ByteArrayOutputStream`从`inputStream`：_

```
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
//... your code for reading byteArray from inputStream 
```

**3.**传递`byteArrayOutputStream`给`mapReader.readMap`：

```
 TMXMapReader mapReader = new TMXMapReader();
 map = mapReader.readMap(byteArrayOutputStream);
//..... 
```

# javascript - 延迟加载图像会破坏 loadHTMLString

> ID：15563579
> 
> 赞同：0
> 
> 时间：2013-03-22T05:48:25.733
> 
> 标签：javascript, html, objective-c, image, wordpress

我正在从博客中提取 JSON 数据，然后使用帖子的 url 来加载帖子内容，并且只加载内容。

截至目前，它可以很好地加载帖子内容，但不会加载图像。我认为这是因为该博客有一个延迟加载插件。我需要该网站的插件，但有没有办法我仍然可以加载图像而无需加载整个网页？

```
<img src="http://www.blog.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="actual_imageurl" width="320" height="480" />

<noscript><img src="actual_imageurl" width="320" height="480" /></noscript> 
```

修复它的另一种方法是强制 webView 加载，`<noscript>`但我也无法弄清楚。

# android - 如何在android中发送带有图像作为附件的邮件？

> ID：15563583
> 
> 赞同：5
> 
> 时间：2013-03-22T05:48:48.657
> 
> 标签：android, image, email, gmail, email-attachments

在我的 android 应用程序中，我需要发送带有图像作为附件的邮件。我已完成发送邮件。但是如何将带有图像的邮件作为邮件的附件发送。这里我发布了代码发送邮件。请帮助我将图像作为附件发送到以下代码中。

这是代码-

```
public class MailImageFile extends javax.mail.Authenticator {

        public MailImageFile(){}

 public void Mail(String user, String pass) {
    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator()           {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("abc@gmail.com", "pqr123%");
        }
        });
    try {
        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("abc@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,     InternetAddress.parse("xyz@gmail.com"));
        message.setSubject("Testing Subject");
        message.setContent("Hi...", "text/html; charset=utf-8");

        Transport.send(message);

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:32:12.150

```
 public class MailImageFile extends javax.mail.Authenticator {

            public MailImageFile(){}

     public void Mail(String user, String pass) {
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator()           {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("abc@gmail.com", "pqr123%");
            }
            });
        try {
            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("abc@gmail.com"));
            message.setRecipients(Message.RecipientType.TO,     InternetAddress.parse("xyz@gmail.com"));
    message.setContent(_multipart);
            message.setSubject("Testing Subject");
            message.setContent("Hi...", "text/html; charset=utf-8");

            Transport.send(message);

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        } 
```

//[在这里得到这个解决方案](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

```
 private Multipart _multipart; 
_multipart = new MimeMultipart(); 

public void addAttachment(String filename,String subject) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 
    _multipart.addBodyPart(messageBodyPart);

    BodyPart messageBodyPart2 = new MimeBodyPart(); 
    messageBodyPart2.setText(subject); 

    _multipart.addBodyPart(messageBodyPart2); 
} 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:05:52.323

试试这个代码：

```
Intent myEmailIntent = new Intent(android.content.Intent.ACTION_SEND);
        myEmailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Email Subject");
        myEmailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{"sendersemailaddreass@gmail.com"});

        myEmailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"your email message");
        //message type
        myEmailIntent.setType("text/plain");
        File myAttachmentfile = getFileStreamPath("path of the file that you want to attach Eg: image");
        myEmailIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
        //attachment type
        myEmailIntent.setType("image/jpeg");
        myEmailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+myAttachmentfile.getAbsolutePath()));
        startActivityForResult(Intent.createChooser(myEmailIntent, "SENDER NAME"),101); 
```

//这是您将图像或任何文件附加到电子邮件的方式

```
emailIntent.putExtra(Intent.EXTRA_STREAM, "your file path"); 
```

让我知道它是否对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:06:55.890

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
emailIntent.setType("image/png");

ArrayList<Uri> uris = new ArrayList<Uri>();

uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.file1));
uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.file2));

emailIntent.putExtra(Intent.EXTRA_STREAM, uris));

startActivity(emailIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-26T19:27:56.757

这肯定会帮助您在不使用意图的情况下附加图像。

```
Multipart multipart = new MimeMultipart();

MimeBodyPart attachPart = new MimeBodyPart();
String attachFile = "/storage/emulated/0/pic.jpg";//picture location

DataSource source = new FileDataSource(attachFile);
attachPart.setDataHandler(new DataHandler(source));
attachPart.setFileName(new File(attachFile).getName());

//Trick is to add the content-id header here
attachPart.setHeader("Content-ID", "image_id");
multipart.addBodyPart(attachPart);

//third part for displaying image in the email body
attachPart = new MimeBodyPart();
attachPart.setContent("<h1>Attached Image</h1>" +
        "<img src='cid:image_id'>", "text/html");
multipart.addBodyPart(attachPart);
//Set the multipart message to the email message
message.setContent(multipart);

Transport.send(message);
System.out.println("Done"); 
```

# android - 想要视频和库都在 android 的画廊中

> ID：15563588
> 
> 赞同：0
> 
> 时间：2013-03-22T05:49:19.120
> 
> 标签：android, android-intent

从库中选择时`file`，仅列出照片。还应显示视频文件。

我正在使用此代码

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_PICTURE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:57:54.587

使用以下选择图像和视频。

```
Intent mediaChooser =new Intent(Intent.ACTION_GET_CONTENT);
//comma-separated MIME types
mediaChooser.setType("video/*, images/*");
startActivityForResult(mediaChooser,IMAGE_PICK); 
```

# r - 奇怪的错误：PredictMat(object$smooth[[k]], data) 中的错误：，“by”变量必须与平滑参数具有相同的维度

> ID：15563589
> 
> 赞同：1
> 
> 时间：2013-03-22T05:49:19.347
> 
> 标签：r, statistics, mgcv

我在 mgcv 中遇到错误，我不知道它来自哪里。设置如下：我有一个名为“MI”的拟合 GAM 对象和一个“预测数据”向量（具有预测变量的默认值）。我通过以下函数将其输入 predict.gam(object, newdata = whatever) ：

```
makepred = function(varstochange,val){
     for (i in 1:length(varstochange)){
         if (varstochange[i] == "pot.trial"){j=1}
         if (varstochange[i] == "year"){j=2}
         if (varstochange[i] == "crop.legume"){j=3}
         if (varstochange[i] == "crop.fruit"){j=4}
         if (varstochange[i] == "feedstock"){j=5}
         if (varstochange[i] == "BCAR.imp"){j=8}
         if (varstochange[i] == "INAR.imp"){j=9}
         if (varstochange[i] == "bcph.imp"){j=10}
         if (varstochange[i] == "phi.imp"){j=11}
         if (varstochange[i] == "htt.imp"){j=12}
         if (varstochange[i] == "bc.prc.C.imp"){j=13}
         if (varstochange[i] == "CEC.imp"){j=14}
         if (varstochange[i] == "soc.imp"){j=15}
         if (varstochange[i] == "sand.imp"){j=16}
         if (varstochange[i] == "clay.imp"){j=17}
         if (varstochange[i] == "abslat.imp"){j=18}
         preddat[j] = val[i]
         }
     predict.gam(MI,newdata=preddat,se.fit=TRUE)
     } 
```

然后我做出如下预测：

```
a = makepred(c("phi.imp","bcph.imp","year"),c(4.5,7.25,1))
b = makepred(c("phi.imp","bcph.imp","year"),c(5.5,7.25,1))
c = makepred(c("phi.imp","bcph.imp","year"),c(6.5,7.25,1))
d = makepred(c("phi.imp","bcph.imp","year"),c(7.5,7.25,1))
makepHplot(a,b,c,d,title="1st harvest, BC pH = 7.25") 
```

其中“makepHplot”是我制作的不同功能。

这工作了相当长的一段时间。然后我在模型中添加了一些数据并稍微更改了规范。现在我收到此错误消息：

```
1> a = makepred(c("bcph.imp","year"),c(7.5,1))
Error in PredictMat(object$smooth[[k]], data) :
   `by' variable must be same dimension as smooth arguments 
```

我从来没有收到过旧型号的这条消息（现在仍然没有）。
怎么了？我不知道错误消息是什么意思，我不知道新的拟合模型是什么导致了这个问题。键入“PredictMat”对我没有帮助，谷歌也没有。问题不在于所有变量都不在预测数据中。

将不胜感激这里的任何帮助。

（为在 R-help 上的交叉发帖道歉）

还值得注意的是，我在输入缺失数据后多次拟合此模型，然后使用鲁宾规则组合输出。但这不应该是相关的——我使用任何一个组成拟合模型，而不是组合版本都会得到同样的错误

**已解决的问题：** 问题在于“triid”是一个因子变量，其水平不包括“1”。当我将 preddat 中的 triid 设置为其他内容时，它可以工作。我设置模型的方式，将随机效应与虚拟 =0 交互，这个变量没有效果，但 mgcv 仍然需要它来进行预测。

# sharepoint - Sharepoint 2010 - 自定义文档 ID 提供程序 - 生成文档 ID - 但 /_layouts/DocIdRedir.aspx?ID=ID 不起作用

> ID：15563594
> 
> 赞同：1
> 
> 时间：2013-03-22T05:49:43.257
> 
> 标签：sharepoint

我使用自定义文档 ID 提供程序。当新文件上传到其中一个库时，可能会生成文档 ID。库的 Document ID 列根据 Document ID Provider 中的逻辑显示正确的文档 ID。但是，如果我浏览到`/_layouts/DocIdRedir.aspx?ID=<<NEWID>>`我会收到以下错误消息

> “操作成功完成” 在此网站集中找不到 ID 为 <> 的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:13:10.360

要结束这个问题，这是一个计时器作业问题。除了更改计时器执行延迟之外，没有什么可以做的。

# dynamics-crm-2011 - 如何在 ms 动态 CRM 中的 Ribbon 中添加示例按钮

> ID：15563596
> 
> 赞同：0
> 
> 时间：2013-03-22T05:49:50.113
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

我是 CRM 新手，现在我只想在功能区中添加一个名为 sample 的示例按钮，我已经导出了“自定义 XML”，从这里如何添加自定义 id、命令 id 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:41:16.203

有几个演练应该可以帮助您：

*   [这个](http://garethtuckercrm.com/2011/01/18/how-to-view-ribbon-definitions-in-crm-2011-3/)
*   [这个](http://nishantrana.wordpress.com/2010/11/04/adding-my-first-custom-button-in-crm-2011/)
*   而[这个](http://blog.tallan.com/2011/06/24/microsoft-dynamics-crm-2011-adding-and-removing-buttons-from-the-ribbon/)

[CodePlex](http://crmvisualribbonedit.codeplex.com/)上也有类似的工具，它可以帮助您以图形方式执行此操作，而不是弄乱 XML。

*警告，前面的意见*

我记得当我刚接触 Dynamics CRM 时，最初帮助我的是使用来自社区的工具，直到我对事物有所了解并可以深入了解平台的更多内容。可能值得通过这样的列表[来](http://everythingcrm.net/2012/08/16/revised-list-of-useful-dynamics-crm-2011-tools-utilities-scripts-controls/)查看是否有可以帮助您完成 CRM 旅程的东西。

# python - 查找在 Python 中搜索的字符串的行号

> ID：15563597
> 
> 赞同：0
> 
> 时间：2013-03-22T05:49:51.967
> 
> 标签：python, string, search

```
 def c1():
        logfile = open("D:\myfile.txt", 'r')
        for num1, line in enumerate(logfile):
                if "request=100" in line:
                    print num1
                    return True
        return False

    def c2():
        logfile = open("D:\myfile.txt", 'r')
        for num2, line in enumerate(logfile):
                if "response=200" in line:
                    print num2
                    return True
        return False    

    if c1() == True and c2() == True:
        print "Test Case Passed"  
    else:
        print "Test Case Failed" 
```

在上面的代码中，不存在检查行号以便 request=100 和 response=200 位于同一行的情况。我需要的。

另外，我只想在满足以下条件时将结果打印为“通过”...

```
- both c1 and c2 are True
- both "request=100" and "response=200" should fall in same line 
- if any other line also consist of "request=100" and "response=200" then that also should be counted 
```

如果出现以下情况，结果为“失败”：

```
- if any one line which consists of "request=200" and "response=200"
- if any one line which consists of "request=100" and "response=100" 
- or any case in which no line should have apart from "request=100" and "response=200" 
```

考虑“myfile”具有以下数据：

```
request=100 XXXXXXXXXXXXXXXXXXXXXXXXXXXX \n
XXXXXXXXXXXXXXXX response=200 XXXXXXXXX \n
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \n
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \n
XXXX request=100 XXXXX response=200 XXXXXXXXXXX \n
XXXXXXX request=200 XXXXXX response=100 XXXXXXX \n
XXXXXXXX request=100 XXXX response=100"         \n 
```

在上面的文件中，result 是 Fail 因为 request 和 response 除了需要的值之外有不同的值。只有第 5 行具有正确的值，因此结果失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:11:31.967

如果我理解正确，您应该将两个条件放在一个循环中，并继续循环直到到达行尾，或者遇到具有条件的另一行：

```
def are_they_on_the_same_line():
    logfile = open("D:\myfile.txt", 'r')
    intermediate_result = False
    for num1, line in enumerate(logfile):
            if "request=100" in line and "response=200":
                if intermediate_result == True:
                    return False
                intermediate_result = True
    return intermediate_result 
```

除了您提到的失败条件之外，还有其他条件会失败。但你提到的两者并不相互排斥。

编辑：不等待这是错误的，从例子来看。我无法理解你的情况。也许它可以帮助您获得一个想法，如果没有，请用另一个例子阐明条件。

# opengl - 如何将多个对象分组以将它们作为一个单元旋转？

> ID：15563601
> 
> 赞同：5
> 
> 时间：2013-03-22T05:50:31.967
> 
> 标签：opengl, graphics, opengl-es, 3d, transformation

我需要一些关于 OpenGL 中旋转任务的最佳方法的指示。我知道如何使用四元数在 3D 空间中旋转对象，我可以翻译它们，一切都很好。

但我想知道将不同对象的集合视为单个实体以进行旋转的最佳方法。例如，假设您有一张桌子，上面有物品。每个都有自己的平移和旋转，但现在我想旋转整个桌子和上面的所有东西，同时让房间里的其他物体保持原位。这意味着桌子外边缘的物体会旋转并围绕桌子的中心平移，而中心的物体可能会旋转但不会保持原位，或者根本不会平移太多，这取决于它们与桌面的距离。旋转轴。

似乎一个相当不雅的方法是单独旋转和平移桌子上的每个对象，以及桌子本身，知道旋转轴在哪里。也许这是唯一的好方法，但有没有一种技术可以为此目的“组合”不同的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:23:31.817

您正在寻找的是转换层次结构。桌面上的对象是相对于桌面定位的，或者换句话说是在桌面的坐标系中。因此，让我们指定`M_Desk`为定义桌子位置及其局部坐标系的变换。接下来让我们来看看`M_Pencilbox`站在桌子上的铅笔盒相对于桌子的变换。并且铅笔盒中的铅笔将相对于铅笔盒放置。

所以铅笔经历了一系列的转变。请记住，在 OpenGL 使用的列主要符号中，事物“流动”通过从最后一个转换到第一个（或写下来时从右到左）的转换链。

例如，每个变换`M_Desk`都是一个 4×4 矩阵，可以按通常的方式构造：旋转、平移、缩放等。

因此，要转换铅笔的顶点，您将应用以下转换

```
… · M_Desk · M_Pencilbox · v_Pencil 
```

当然，桌子本身可能与不同的东西有关，比如房间。在该转换链的最开始将是视图转换。因此，我们在这里有效地构建了一个模型视图矩阵。

就现代 OpenGL 而言，每次遇到转换层次结构中的分支（想想文件系统中的目录）时，您都会创建迄今为止构建的转换链的副本，这样您就不必从头开始对于每个分支。

如果您需要进一步澄清，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:23:48.043

这通常是通过使用某种包含变换层次结构的场景图来完成的。

一个简单的最小版本是有一个树，其中每个节点都包含一个对象、一个变换和一个子节点列表。变换是相对于父节点的。

所以桌子上的对象将是桌子本身的孩子。

任何给定对象的变换是该对象的变换与其在树中的所有父对象的串联。有很多方法可以做到这一点，但“老派”的 GL 功能为此提供了一个矩阵堆栈。您在一个节点的局部矩阵中相乘，为该节点绘制几何图形，递归地绘制所有子节点，然后将矩阵弹出。

# ios - 为用户想要的主叫号码打开拨号盘

> ID：15563603
> 
> 赞同：3
> 
> 时间：2013-03-22T05:50:36.070
> 
> 标签：ios

我想在用户单击通话按钮时打开拨号盘，然后用户输入电话号码并拨打电话

我知道我们可以这样打电话

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://2135554321"]]; 
```

但我想打开拨号盘，然后让用户输入号码并按通话按钮拨打电话

如果这是不可能的，那么想做一些事情，比如我的应用程序直接打开到 dail pad 然后用户调用它，然后它应该重定向到我的应用程序

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T05:58:41.120

不，您不能在 iOS 中执行此操作。iPhone SDK 不让您直接访问从应用程序拨打号码。实现此目的的一种方法是获取文本字段

```
textfield.keyboardType = UIKeyboardTypePhonePad; 
```

和

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel://%@",textfield.text]]]; 
```

您必须查看输入数字的格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T05:53:01.487

为什么不创建一个具有“ `UITextField`”的 UIView，并且当文本字段出现时，将键盘设置为仅数字（即与拨号盘几乎相同）。

一旦他们输入完号码，您*就*可以拨打`openURL`上面的“”行。

# android - 放置另一个元素后剩余空间中的元素居中

> ID：15563605
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:50:47.477
> 
> 标签：android

在我的`android`应用程序中，我有一个带有一个`ImageView`和两个微调器的工具栏。我希望它`ImageView`与屏幕左侧齐平，并且两者`spinners`间隔均匀，水平居中在剩余空间中（不是水平居中在屏幕上，而是水平居中在`ImageView`放置后剩余的空间中。什么是实现这一目标的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:00:36.797

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <ImageView
        android:id="@+id\img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id\img"
        android:orientation="vertical"
        android:layout_gravity="center_horizontal" >
        <Spinner
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <Spinner
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>
</RelativeLayout> 
```

相对布局固定图像和微调器（作为一个组）的相对位置。线性布局通过设置布局重力来设置微调器并在布局内水平居中。

我假设您希望它们一个在另一个之上。如果您希望它们并排，请更改方向。

# django - 最喜欢的 Django 查询

> ID：15563609
> 
> 赞同：0
> 
> 时间：2013-03-22T05:51:04.633
> 
> 标签：django

我一直在试图弄清楚如何查询特定类别的最喜欢的白板

目前我一直在查询特定类别的所有白板对象。我的一个解决方案是按喜欢的数量由董事会查询，但我就是想不出一种方法来查询它

目前我可以检索特定类别的所有白板对象的示例，现在如何检索特定类别的最喜欢的白板。

有人可以帮我创建可以查询该类别中最喜欢的板的功能，这样我就可以从逻辑上理解我以后如何创建自己的板。谢谢

```
class WhiteBoard(models.Model):
    ENGLISH = 'ENGLISH'
    MATH = 'MATH'
    SCIENCE = 'SCIENCE'
    BIOLOGY = 'BIOLOGY'
    CATEGORY = (
        (ENGLISH , 'English'),
        (MATH, 'Math'),
        (SCIENCE, 'Science'),
        (BIOLOGY, 'Biology'),
    )
    Category =models.CharField(max_length=30,choices=CATEGORY)
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

class LikeBoard(models.Model):
    user = models.ForeignKey(User)
    Whiteboard = models.ForeignKey(WhiteBoard)
    created = models.DateTimeField(auto_now_add=True) 
```

我的观点.py

```
def WhiteBoardFinder(request):
    form = WhiteBoardFinderForm(request.POST)
    fo = WhiteBoardFinderForm()
    if form.is_valid():
        Category = form.cleaned_data['Category']
        Whiteboard = WhiteBoard.objects.filter(Category=Category)
        return render(request,"boardfinder.html",{"board":board,"fo":fo})
    return render(request,"boardfinder.html",{"fo":fo}) 
```

boardfinder.html

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ fo.as_p }}
    <input type = "submit" value= "Find Board" />
</form>

{% if board %} 
<ul>  
    {% for b in board %}         
    <li><a href ="{% url world:Boat b.id %}">{{ b.name }}</li>
    {% if b.picture %}
    <br><img src="{{ b.picture.image.url }}">
    {% endif %}
    {% endfor %}
</ul>
{% endif %} 
```

我的表格.py

```
class BoardFinderForm(forms.ModelForm):
    class Meta:
        model = WhiteBoard
        fields = ('Category',) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:30:01.507

**模型.py**

```
class WhiteBoard(models.Model):
    ENGLISH = 'ENGLISH'
    MATH = 'MATH'
    SCIENCE = 'SCIENCE'
    BIOLOGY = 'BIOLOGY'
    CATEGORY = (
        (ENGLISH , 'English'),
        (MATH, 'Math'),
        (SCIENCE, 'Science'),
        (BIOLOGY, 'Biology'),
    )
    Category =models.CharField(max_length=30,choices=CATEGORY)
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

    @property    
    def count_likes(self):
        return LikeBoard.objects.filter(whiteboard=self).count()

class LikeBoard(models.Model):
    user = models.ForeignKey(User)
    whiteboard = models.ForeignKey(WhiteBoard) //modified because of conflict
    created = models.DateTimeField(auto_now_add=True) 
```

**视图.py**

```
def WhiteBoardFinder(request):
    form = WhiteBoardFinderForm(request.POST)
    fo = WhiteBoardFinderForm()
    if form.is_valid():
        Category = form.cleaned_data['Category']
        whiteboard = WhiteBoard.objects.filter(Category=Category)

        categories = WhiteBoard.objects.values_list('Category', flat=True).distinct()
        whites = sorted(whiteboard, key=lambda x: x.count_likes, reverse=True)

        return render(request,"boardfinder.html",{
            "board":board,"fo":fo, "categories": categories, "whites": whites})
    return render(request,"boardfinder.html",{"fo":fo}) 
```

**模板**

```
{% for category in categories %}
    {{ category }}<br/>
    {% for white in whites %}
        {% if white.Category == category %}
        {{ white }} - {{ white.count_likes }},
        {% endif %}
    {% endfor %}<br/>
{% endfor %} 
```

# javascript - 为什么设置 document.domain 不能允许 AJAX 请求到父域？

> ID：15563611
> 
> 赞同：7
> 
> 时间：2013-03-22T05:51:15.923
> 
> 标签：javascript, ajax, cross-domain

我有两个文件，domain.com/test2.php：

```
<div id="testDiv"></div>

<script src="http://domain.com/packages/jquery.js"></script>
<script>$("#testDiv").load("http://domain.com/test3.php", {var1:1, var2:2});</script> 
```

和 domain.com/test3.php：

```
<b>var1: <?php echo $var1; ?> , var2: <?php echo $var2; ?></b> 
```

在这种情况下，domain.com/test2.php 的输出 **`var1: 1 , var2: 2`**与预期的一样，但现在假设我想在子域中创建一个 test2.php。为了阻止跨域脚本的问题，我会在 sub.domain.com/test2.php 的开头添加这个额外的行：

```
<script>document.domain = "domain.com";</script> 
```

这个额外的行阻止了跨域错误的出现，但现在文件不再输出**`var1: 1 , var2: 2`**. 为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T18:18:15.860

该`document.domain`机制旨在允许帧之间的客户端通信，而不是客户端到服务器的通信。如果您有一个包含来自页面的`example.com`框架和另一个包含来自页面的框架，那么除非后者设置为您在示例中显示的那样，`foo.example.com`否则两者无法访问彼此的 DOM 。`document.domain``example.com`

跨域 AJAX 请求的现代首选机制是[跨域资源共享](http://www.w3.org/TR/cors/)，或“CORS”。此机制涉及让目标资源返回一个特殊的 HTTP 响应标头，指示允许跨域请求。在您的场景中，您将`test3.php`返回以下 HTTP 响应标头：

```
Access-Control-Allow-Origin: sub.domain.com 
```

在 PHP 中，您可以按如下方式执行此操作：

```
header("Access-Control-Allow-Origin: sub.domain.com"); 
```

您还可以将此标头值设置为仅允许来自*任何*`*`来源的跨域请求，但请注意，这将允许来自您无法控制的站点的请求。

 *来自客户端 JavaScript 库的请求通常还包括`X-Requested-With`不在 CORS 允许的标准集中的附加标头，因此可能需要通过附加响应标头显式允许此标头：

```
Access-Control-Allow-Headers: X-Requested-With 
```

CORS 仅在现代浏览器中受支持。对于较旧的浏览器，常见的约定是使用[JSON-P](http://en.wikipedia.org/wiki/JSONP)，这是一种利用一个服务器上的页面能够从另一台服务器加载和执行脚本文件这一事实的技巧。该技术要求目标资源是调用页面中函数的有效 JavaScript 程序，因此它不像 CORS 那样优雅和无缝，但它应该可以在任何支持 JavaScript 的浏览器中工作。*

# iphone - 无法在横向模式下从相机以正确的格式显示图像

> ID：15563614
> 
> 赞同：10
> 
> 时间：2013-03-22T05:51:24.517
> 
> 标签：iphone, ios, ipad, ios-simulator, uiimagepickercontroller

我正在使用 Ios6 中的 iPad 应用程序，当我们单击右栏按钮时，我正在执行如下操作：

```
-(IBAction)camerabuttonAction:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    picker.delegate = self;

   self.popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
   [self.popoverController presentPopoverFromRect:CGRectMake(50, -250, 500, 300) inView:appDelegate.splitview.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
} 
```

我的问题是，当我处于景观模式时，如果我单击按钮。每次使用后相机以纵向模式显示（图像以反向模式显示）。但是，如果我摇动 iPad，它会在 LandScape 中显示，即方向正确。

看下面的图片

当我处于风景模式时，如果我单击按钮，相机会显示如下图像：

![在此处输入图像描述](../Images/621d823c4663706413ff7f245cb01c54.png)

如果我摇晃 iPad，相机会显示如下图像：

![在此处输入图像描述](../Images/3bb92f4f6cdf6228f49ffe538d894c7a.png)

我已经尝试了很多并用谷歌搜索，但我没有找到任何解决方案。它正在消磨我的时间，所以如果有人对此进行了研究，请指导我并发布示例代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T11:03:50.950

我在我的项目中遇到了同样的问题，我尝试了以下方法并为我工作

**我的代码：**

```
- (UIImage *)scaleAndRotateImage:(UIImage *)image {
    int kMaxResolution = 640; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = roundf(bounds.size.width / ratio);
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = roundf(bounds.size.height * ratio);
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-26T11:00:11.850

您可以尝试对您的 imagePickerController 进行转换

```
imagePickerController.view.transform = CGAffineTransformMakeRotation(-M_PI/2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T07:56:34.820

我在 Google 搜索中研究了您的问题，并得到了一些结果或可能性，例如以下几点：-

**结果 1**

一些答案说它是一个 iOS 6 错误，所以你不能像下面的问题一样修复它：-

[iPad相机弹出框预览错误的旋转和缩放](https://stackoverflow.com/questions/14766523/ipad-camera-popover-preview-wrong-rotation-and-scale)

**结果 2**

我不认为我们可以控制相机的方向。相机方向属性是内置的，它会随着设备的方向而变化。

[iPad相机方向人像模式？](https://stackoverflow.com/questions/11448231/ipad-camera-orientation-portrait-mode)

**结果 3**

您可以在中心管理缩放的实时 iPhone 相机视图，物理移动选择器框架。通过波纹管代码：-

```
[picker.view setFrame:CGRectMake(xOffset,yOffset,picker.view.frame.size.width,picker.view.frame.size.height)]; 
```

希望你得到真正的解决方案。关于这个错误或问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:50:21.623

我将在这里尝试一个很好的猜测，因为我自己还没有这样做......

您是否尝试过创建 UIImagePickerController 的子类并从 ViewController（它是超类）实现 interfaceOrientation 的方法？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T11:20:44.877

请试试这个

```
[popController presentPopoverFromRect:CGRectMake(1024, 
  self.view.bounds.origin.y + (self.view.bounds.size.height / 2), 1, 1) 
inView:self.view 
permittedArrowDirections:UIPopoverArrowDirectionRight 
animated:YES]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-18T18:48:55.063

我有一个只有 ipad 应用程序的横向模式，我吓坏了，因为我阅读了所有这些帖子，但我使用这个非常简单的代码拍照，它非常适合我唯一的横向应用程序。重要的是，我不会从库中选择图像，我只是拍摄照片并将其放在其他图像上，它非常适合我。

```
if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {

        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker
                                animated:YES completion:nil];
       // [imagePicker release];
        newMedia = YES;
    }

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self.popoverController dismissPopoverAnimated:true];
  //  [popoverController release];

    NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];
    [self dismissViewControllerAnimated:YES completion:nil];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info
                          objectForKey:UIImagePickerControllerOriginalImage];

        imageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
                                           self,
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
    else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
} 
```

# mips - 在 MIPS 中合并字节同时排除 MSb

> ID：15563615
> 
> 赞同：1
> 
> 时间：2013-03-22T05:51:32.933
> 
> 标签：mips, midi

在 MIPS 汇编语言中，如何仅组合最右边的 7 位字节？例如，如果我有 1001 1100 和 0110 1100，则将它们组合在一起而忽略它们的最高有效位将是 (00)00 1110 0110 1100。

我需要这个来计算来自 midi 文件的实际增量时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:09:17.023

尝试这个

```
.text
LBU $t0, byte0
LBU $t1, byte1
ANDI $t0, 0x7f   # mask to 7 bits
ANDI $t1, 0x7f
SLL  $t1, $t1, 7
OR   $s0, $t1, $t0
.data
byte0: .byte 0x9c
byte1: .byte 0x6c 
```

# jquery - 文件存在时处理 Uploadify 情况

> ID：15563616
> 
> 赞同：0
> 
> 时间：2013-03-22T05:51:35.113
> 
> 标签：jquery, uploadify

有一个非常烦人的问题，当他们尝试上传已经存在的文件时无法通知用户。当它发现文件存在时，它会按照我的意愿执行并且不会覆盖但是我无法弄清楚如何让用户知道。我有一个经典的 ASP 版本的代码正在运行。上传对话框/进度条出现然后很快消失，因为我有这些设置：

```
'multi'          : false,
'auto'           : true, 
```

我希望做这样的事情：

```
onDuplicaetDetected:   function () {
                   alert('upload failed because the file is a duplicate') 
```

这会给我一个 JS 错误提示。甚至：

```
'duplicateFound' : function() {
self.location='duplicateDetected.asp?reload=t';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:31:07.433

谷歌搜索给我这个链接[http://www.uploadify.com/documentation/uploadifive/oncheck/](http://www.uploadify.com/documentation/uploadifive/oncheck/)

所以，看起来你需要*onCheck*事件，你的代码应该是这样的

```
$(function() {
    $('#file_upload').uploadify({
        'checkScript'  : '/checkFileExists.asp',
        'uploadScript' : '/upload.asp',
        'onCheck'      : function(file, exists) {
            if (exists) {
                alert('upload failed because the file is a duplicate')^;
            }
        }
    });
}); 
```

# ant - Ant resourcecount，我如何计算属性中存在的逗号分隔数

> ID：15563627
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:52:33.743
> 
> 标签：ant, properties, count

我的 xml 不起作用：

当我在命令行中运行 ant compile -Dmodules=a,b,c

我的构建文件需要计算模块参数中有多少个模块，使用for循环一一编译

```
<target name="count_modules">
    <resourcecount property="count">
        <tokens>
            <concat>
                <filterchain>
                    <tokenfilter>
                        <stringtokenizer delims=","/>
                    </tokenfilter>
                </filterchain>
                <propertyresource name="modules" />
            </concat>
        </tokens>
    </resourcecount>
    <echo message="count is ${count}" />
</target> 
```

count 将始终返回 1
[echo] 计数为 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:21:15.053

[propertyresource](http://ant.apache.org/manual/Types/resources.html#propertyresource)将向[concat](http://ant.apache.org/manual/Tasks/concat.html)任务返回单个资源，该任务旨在对文件等资源进行操作。

这段复杂的逻辑最好用内联[脚本](http://ant.apache.org/manual/Tasks/script.html)代替。

```
<project name="myproject" default="count_modules">

    <property name="modules" value="a,b,c"/>

    <target name="count_modules">
        <script language="javascript"><![CDATA[
            modules = project.getProperty("modules");
            project.setProperty("count", modules.split(",").length);
        ]]></script>

        <echo message="Number of modules: ${count}"/>
    </target>

</project> 
```

## 运行子模块构建

[for 任务](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)不是核心 ant 的一部分，它是名为 ant-contrib 的扩展的[一部分](http://ant-contrib.sourceforge.net/)。我的建议是在调用子模块构建时使用[subant 任务。](http://ant.apache.org/manual/Tasks/subant.html)以下答案有一些简单和高级的使用示例：

*   [自动化构建过程的 Ant 脚本](https://stackoverflow.com/questions/13785975/ant-script-to-automate-the-build-process/13786739#13786739)

# html - CSS继承子属性

> ID：15563635
> 
> 赞同：1
> 
> 时间：2013-03-22T05:53:23.193
> 
> 标签：html, css

我想给 header-bottom 赋予边框颜色。边框颜色应该与其子字体颜色相同。请找到 html 代码并建议我继续进行。

```
<header>
  <div class="cblt-panel">
     <header>
          <a href="HomePage;jsessionid=9Z1DRLtK8FfgmVDhysv4fk8LKjj1rTpSpJcS99dvcbffT4KTZ9tN!91184445">
             <div class="header-wrapper header"> 
                <h1 class="dealer-name">Airport Chevrolet Cadillac</h1>
             </div>
          </a>

     </header>

   </div>
</header> 
```

在上面的标记中，我想将外部标题标签的边框底部颜色设置为与子 h1 标签的字体颜色相同。可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:05:08.720

我不认为你可以通过纯 CSS 来实现它。如果你能够使用 jQuery，那就很简单了：

```
var h1Color = $('.dealer-name').css('color');
$('header:eq(0)').css('border-bottom-color', h1Color); 
```

演示：http: [//jsfiddle.net/S9svs/](http://jsfiddle.net/S9svs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:06:08.957

不，这是不可能的：在 CSS 中，父母永远不会从孩子那里继承。

您可以只使元素的边框颜色*与其自己的*内容颜色（文本颜色）相同，即根本不设置边框颜色。但是要在孩子身上使用颜色集，您需要 JavaScript。

更好的策略是组合设置，以便您只需将标题元素的颜色和封闭元素的颜色设置为相同的值。但是，这些设置需要在单独的规则中完成，例如`header { border-color: #060; } h1 { color: #060; }`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:48:16.227

The funny thing is that `border-color`, if not set, uses the `color` property to define it's color, so in some occasions you may be able to do the opposite. eg:

```
header {
    color:red;
    border-bottom: 2px solid;
}

header a,header h1 {
    color:inherit;
} 
```

DEMO: [http://jsfiddle.net/brTTT/](http://jsfiddle.net/brTTT/)

In the demo, hover to see the color change by just changeing the `header` `color` property.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:12:21.390

如果您确实想动态地执行此操作，那么您必须为其使用**css 预处理器语言**...

喜欢[少 CSS](http://lesscss.org/)

在这里，您可以动态定义 css 并像在 javascript 中一样使用它...

例如，

```
@color:#000;
header { border-bottom-color:@color; }
header h1 { color:@color; } 
```

# r - 从另一个包导入 S3 方法

> ID：15563640
> 
> 赞同：15
> 
> 时间：2013-03-22T05:53:51.107
> 
> 标签：r, package

我正在尝试`predict`从另一个包中导入 S3 方法`pls`。我有一个使用这些预测值的函数。问题是，在编译包时：

```
Error : object 'predict' is not exported by 'namespace:pls' 
```

我把[这个要点](https://gist.github.com/sebastian-c/5219249)放在一起作为一个最小的例子，它突出了我的问题并包含以下 R 文件：

```
#' Test function
#' 
#' @importFrom pls predict
#' 
#' @export

myfunc <- function(x){
  stopifnot(class(x) == "mvr")
  predict(x)*2
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T06:05:54.947

总结这一点，因为原来的（下面）现在已经过时并且在某些地方是错误的或误导的。

**最接近的问题是pls**包`predict`中没有命名函数；有一些未导出的 S3 方法，但没有。所以你不能导入这个。泛型存在于**stats**包中，您需要从那里导入，如下所述。**`predict``predict``predict`**

 ****您的包需要具有正确的`Depends: pls`方法才能对 R 可用。您可以专门导入**pls中的任何内容。**`DESCRIPTION``predict`

 **您还需要从**stats**`predict`命名空间导入泛型，所以添加

 **```
#' @importFrom stats predict 
```

因为这将在你的包命名空间中导入泛型。您还需要添加`Imports: stats`到您的`DESCRIPTION`文件以表明您需要**stats**包；以前，我们不必声明对 R 附带的一组基本包（即 R 附带的非推荐包）的依赖关系。

* * *

### 原来的

这里的主要问题是**pls**没有定义函数/方法`predict`。它为泛型提供了几种方法`predict`，但不提供泛型本身。

如果需要，您需要从**stats**包中导入泛型 - 我不确定您是否这样做，因为您没有创建需要或基于泛型构建的函数。至少你需要

```
#' @importFrom stats predict 
```

尽管您可能需要/想要导入整个**stats**命名空间 - 取决于您的包在您当前正在处理的功能之外做什么。

另一个问题是`predict.mvr`不是**从****pls**命名空间导出的

```
> require(pls)
Loading required package: pls

Attaching package: ‘pls’

The following object(s) are masked from ‘package:stats’:

    loadings

> predict.mvr
Error: object 'predict.mvr' not found
> pls::predict.mvr
Error: 'predict.mvr' is not an exported object from 'namespace:pls'
> pls:::predict.mvr
function (object, newdata, ncomp = 1:object$ncomp, comps, type = c("response", 
    "scores"), na.action = na.pass, ...) 
```

因此，您不能只导入它。因此，您的包需要`Depends: pls`按`DESCRIPTION`顺序排列才能找到正确的`predict`方法。********

# java - “错误格式：需要原始字节”尝试在椭圆曲线加密中加密

> ID：15563643
> 
> 赞同：1
> 
> 时间：2013-03-22T05:54:21.307
> 
> 标签：java, cryptography, jce, elliptic-curve

我正在尝试这个代码（见下面的代码）我从网络得到椭圆曲线地穴。

它得到这个错误。我在输出中打印了一些额外的细节。

**java.security.InvalidKeyException：格式错误：需要原始字节**

我试图用谷歌搜索以原始格式生成密钥的解决方案。也搜索了这个异常。但无法为此找到解决方案。请让我知道如何解决这个问题。

## 输出

```
SunEC
EC
provider=SunJCE version 1.7
X.509 public key Sun EC public key, 163 bits
  public x coord: 7394977086669700979165868162456208526218668043895
  public y coord: 2664471862515380615682451494306474660059347182278
  parameters: sect163r2 [NIST B-163] (1.3.132.0.15)
private key Sun EC private key, 163 bits
  private value:  2968492174805105628259044284910042424560235657309
  parameters: sect163r2 [NIST B-163] (1.3.132.0.15)
SunJCE version 1.7
java.security.InvalidKeyException: Wrong format: RAW bytes needed
    at com.sun.crypto.provider.CipherCore.getKeyBytes(CipherCore.java:499)
    at com.sun.crypto.provider.CipherCore.init(CipherCore.java:422)
    at com.sun.crypto.provider.CipherCore.init(CipherCore.java:386)
    at com.sun.crypto.provider.DESCipher.engineInit(DESCipher.java:186)
    at javax.crypto.Cipher.init(Cipher.java:1210)
    at javax.crypto.Cipher.init(Cipher.java:1153)
    at core.elliptic.TestECC.main(TestECC.java:43) 
```

## 代码

```
package com.elliptic;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.PrivateKey;
import java.security.Provider;
import java.security.PublicKey;
import java.security.Security;
import java.security.spec.ECGenParameterSpec;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;

public class TestECC {

    public static void main(String args[]) {
        try {
            Provider p[] = Security.getProviders();
            Provider p1 = Security.getProvider("SunEC");
            System.out.println(p1.getName());
            KeyPairGenerator kpg = KeyPairGenerator.getInstance("EC", "SunEC");
            System.out.println(kpg.getAlgorithm());

            Cipher cipher = Cipher.getInstance("DES");
            System.out.println("provider=" + cipher.getProvider());

            ECGenParameterSpec ecsp = new ECGenParameterSpec("sect163r2");

            kpg.initialize(ecsp);
            KeyPair kyp = kpg.genKeyPair();
            PublicKey pubKey = kyp.getPublic();
            System.out.println(pubKey.getFormat() + " public key " + pubKey);

            PrivateKey privKey = kyp.getPrivate();
            System.out.println("private key " + privKey);

            System.out.println(cipher.getProvider());

            cipher.init(Cipher.ENCRYPT_MODE, pubKey);

            String cleartextFile = "cleartext.txt";
            String ciphertextFile = "ciphertextECIES.txt";

            byte[] block = new byte[64];
            FileInputStream fis = new FileInputStream(cleartextFile);
            FileOutputStream fos = new FileOutputStream(ciphertextFile);
            CipherOutputStream cos = new CipherOutputStream(fos, cipher);

            int i;
            while ((i = fis.read(block)) != -1) {
                cos.write(block, 0, i);
            }
            cos.close();

            // Decrypt

            String cleartextAgainFile = "cleartextAgainECIES.txt";

            cipher.init(Cipher.DECRYPT_MODE, privKey, ecsp);

            fis = new FileInputStream(ciphertextFile);
            CipherInputStream cis = new CipherInputStream(fis, cipher);
            fos = new FileOutputStream(cleartextAgainFile);

            while ((i = cis.read(block)) != -1) {
                fos.write(block, 0, i);
            }
            fos.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

# java - 无法使用从数据库打印 和

> ID：15563644
> 
> 赞同：2
> 
> 时间：2013-03-22T05:54:32.837
> 
> 标签：java, jsp, taglib, struts-1

我正在开发一个小型 Struts 1.2.4 电话簿应用程序。该应用程序在单个 JSP 中包含用于添加、搜索和编辑/删除数据的表单。我的问题在于显示在执行通配符搜索时获得的 ResultSet。这是程序的流程：

1.  用户输入搜索字符串。

2.  请求被传递给 DispatchAction 类的 search() 方法，该方法又调用“模型”类的 searchContact(String name , HttpServletRequest request) 方法。

3.  该方法使用 PreparedStatement 对 DB 执行 SELECT 查询，该语句返回一个结果集，其值放在 ArrayList<PhoneBook> 中。PhoneBook 类是一个 JavaBean，它有两个字段 'c_name' 和 'p_num' ，带有 getter 和 setter。

4.  logic:bean 和 logic:iterate 标签用于打印 JSP 中 ArrayList<PhoneBook> 的内容。

**在 JSP 中：**

```
 <html:form action="/PhoneBookAction.do" method="post"  >

        <table>
            <tr>
                <td>Name</td>
                <td><html:text property="name"/></td>
            </tr>
        </table>
        <br>
        <html:submit property="method" value="Search"/>

        <br><br><br>

        <table align="center" border="2" bordercolor="royal blue">
            <thead>
                <tr>
                    <td><b> Select </b></td>
                    <td><b> Name </b></td>
                    <td><b> Phone Number </b></td>
                </tr>
            </thead>

            <logic:iterate id="search_resId" name="phonebookform" property="search_res">
                <tr>
                    <td> <bean:write name="search_resId" property="c_name" /> </td>
                    <td> <bean:write name="search_resId" property="p_num" /> </td>
                </tr>
            </logic:iterate>
        </table>

    </html:form> 
```

这通常会给出“在任何范围内找不到 Bean”错误，或者什么也不打印。我尝试了一些类似线程中建议的修复程序，但它们似乎都不起作用。期待解决方案。谢谢你。

# c++ - 使用对话框以图形方式检索用户输入

> ID：15563648
> 
> 赞同：2
> 
> 时间：2013-03-22T05:54:58.720
> 
> 标签：c++, visual-studio, winapi, visual-c++, dialog

我不是 C++ 新手，但这是我第一次开发 Win32 程序。它必须是图形的，所以我一直在尝试使用输入/对话框来获取用户输入，但没有成功。

我[在 MSDN 上阅读了这个主题](http://msdn.microsoft.com/en-us/library/hh298434%28v=vs.85%29.aspx)并发现它很有帮助，但是我收到了一个关于`IDD_PASSWORD`并且`IDE_PASSWORD`没有被定义的错误。声明它们`resource.h`并给出任意值（如 110、111）不会产生任何结果。我尝试修改自动生成的关于框的其他尝试，修改后也没有产生任何结果，我注意到如果我将`IDD_ABOUTBOX`in的值`resource.h`从 103 更改，这也不起作用。我也尝试在资源视图下使用 .rc，但仍然没有结果。

所以我想知道资源框模板是否有我必须使用的预定义常量，如果有，因为我也搜索过，或者是否有另一种方法可以在窗口应用程序中获取用户输入。我只想获得一个整数，仅此而已。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:00:21.087

分配给资源的数字没有什么神奇之处。这些数字是代码实际用于识别资源的数字。Visual Studio 仅允许您通过使用 C 宏（即`#define`）为这些数字分配符号名称，以使您的代码更易于阅读。这些值都是按照`resource.h`约定在文件中定义的，尽管您可以手动修改该文件，但通常不应该这样做 - 让 Visual Studio 资源编辑器为您处理。

您遇到的问题是，您实际上必须首先*创建*这些资源，然后数字才有意义。当您创建一个新的 Win32 项目时，Visual Studio 将自动创建一个关于框对话框并为其指定符号 ID `IDD_ABOUTBOX`。但是，`IDD_PASSWORD`在新项目中默认不会创建这样的对话框，并且 Windows 中也没有内置对话框。

您可以使用对话框编辑器（Visual Studio 的资源编辑器的一部分）自己创建此对话框，这很容易做到，因为它允许您在所见即所得的对话框上拖动控件。当您向项目资源添加新对话框时，您可以选择将其命名为您喜欢的任何名称。您可以`IDD_PASSWORD`根据需要使用或任何其他名称。将根据算法自动分配数字 ID；通常使用最低的可用数字。

您链接到的文章假设您已经使用符号名称向项目添加了一个对话框`IDD_PASSWORD`（这可能是作者的错误）。它向您展示的只是当它作为项目资源的一部分存在时如何显示该对话框。

仅通过阅读 MSDN 文档来学习 Win32 编程会有些困难。我强烈建议买一本解释得更清楚、更合乎逻辑的书。规范文本是 Charles Petzold 的[Programming Windows, 5th Edition](https://rads.stackoverflow.com/amzn/click/com/157231995X)。请注意，您需要确保获得第 5 版，因为[较新的版本偏离了它们的 Win32 根源并开始谈论完全不相关的东西，例如 C# 和 Silverlight](http://blogs.msdn.com/b/oldnewthing/archive/2012/05/17/10306079.aspx)。

[如果您绝对必须通过反复试验和 MSDN 来学习，请从此处](http://msdn.microsoft.com/en-us/library/26ewt5yf.aspx)开始阅读对话框资源。

# php - Mysql with PHP - 从数据库返回值？

> ID：15563649
> 
> 赞同：1
> 
> 时间：2013-03-22T05:55:06.130
> 
> 标签：php, mysql

我正在关注关于 mysql 和 php 的视频教程，某行代码让我有点困惑：

```
 <?php

            $result = mysql_query("SELECT * FROM subjects", $connection);
                if(!$result){
                die("Database query failed: " .mysql_error());
                    }

                while($row = mysql_fetch_array($result)){
                echo $row["Menu_Name"]." ".$row["position"]."<br/>";
                    }
                    ?> 
```

我想真正了解这段代码在做什么，所以让我看看我是否明白了。基本上，它在我的屏幕上所做的是返回存储在我的表主题中的各种项目并将它们显示在它们的位置。它通过在两个数组中返回它们来做到这一点，一个是 [menu-name] 存储每个项目的文本，另一个是 [position] 存储它们出现的顺序。所以，我的 while 循环遍历这个数组并输出。但这就是我不明白的。$row 做了什么以及它如何设法通过和循环。我可能离这里很远，希望有人能对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:58:33.673

`mysql_query`发送 MySQL 查询。`mysql_query()`向与指定关联的服务器上的当前活动数据库发送唯一查询（不支持多个查询）。如果用户无权访问查询引用的表，`mysql_query()`也会失败并返回。`FALSE`

`mysql_fetch_array`以关联数组、数值数组或两者的形式获取结果行。返回与获取的行相对应的字符串数组，或者`FALSE`如果没有更多行。

最后一件事，如果您想知道函数发生了什么，请尝试参考文档。它在大多数情况下都有帮助。

*根据您提出的问题，我想您应该学习基本的 MYSQL 和 PHP 课程。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:57:43.107

这些不是两个数组。那是一个多维数组

```
while($row = mysql_fetch_array($result)){ 
```

当您运行该行代码时，它会从结果列表中抓取一整行并将其分配给名为`$row`. 然后，您可以像您写的那样给您的索引名称以从中获取数据

```
$row["Menu_Name"] 
```

包含来自数据库的某些值`Menu_Name`的数组索引也是如此。`$row`由于此语句存在于循环中，因此它将遍历返回结果的所有行并对每一行执行相同的操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:03:19.203

这一行正在逐行检索表记录。这实际上是一个表示表记录的数组。

```
 $row = mysql_fetch_array($result) 
```

现在，这个数组由表字段名称索引。因为您的查询是“选择 *”，这意味着它正在检索所有字段。

所以，

```
$row["Menu_Name"] 
```

具有当前行的表“subjects”的字段“Menu_Name”的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:13:00.150

查看教程示例[http://www.devmanuals.com/tutorials/php/phpmysql/php-mysql-fetch-array-example.html 。](http://www.devmanuals.com/tutorials/php/phpmysql/php-mysql-fetch-array-example.html)它可能会清除您的疑问

# android - 在 SQLITE 中将字符串转换为日期

> ID：15563656
> 
> 赞同：2
> 
> 时间：2013-03-22T05:55:53.430
> 
> 标签：android, sqlite

我可以`SQLITE`使用 strtime 函数将日期格式转换为任何格式的字符串，即

```
select  strftime('%Y-%d-%m-%Y', '2012-09-13 12:44:22'); 
```

但我有格式的字符串`dd-MM-yyyy`，如何转换为`yyyy-MM-dd`格式，`sqlite`以便在日期比较中使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T06:19:14.163

使用这样的东西：

```
select datetime(substr(col, 7, 4) || '-' || substr(col, 4, 2) || '-' || substr(col, 1, 2)) from table; 
```

其中*col*是*表*中日期为 yyyy-MM-dd 格式的列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T06:09:39.660

你可以试试这个

```
String date = "23-03-2013";
try {
    SimpleDateFormat format = new SimpleDateFormat(""dd-MM-yyyy");

    SimpleDateFormat df2 = new SimpleDateFormat("yyyy-MM-dd");

   date = df2.format(format.parse(str));

} catch (java.text.ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-07T22:37:26.510

我有一个类似的问题，日期字符串输入不一致，因此月、日和年的长度不一致。以下是我将格式不一致的 M/D/YYYY 字符串转换为格式一致为 YYYY-MM-DD 的日期所做的操作：

```
 SELECT "DISP DATE", DATE(year||'-'||month||'-'||day) as dt_frmtd 
    FROM 
    (
    SELECT *
, CASE WHEN LENGTH(substr("DISP DATE", 1, instr("DISP DATE",'/')-1)) = 2 
       THEN substr("DISP DATE", 1, instr("DISP DATE",'/')-1)
       ELSE '0'|| substr("DISP DATE", 1, instr("DISP DATE",'/')-1)
       END as month
, CASE WHEN LENGTH(substr(substr("DISP DATE", instr("DISP DATE",'/')+1), 1, instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')-1)) = 2
       THEN substr(substr("DISP DATE", instr("DISP DATE",'/')+1), 1, instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')-1)
       ELSE '0'|| substr(substr("DISP DATE", instr("DISP DATE",'/')+1), 1, instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')-1)
       END AS day           
, CASE WHEN LENGTH(substr(substr("DISP DATE", instr("DISP DATE",'/')+1), instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')+1)) = 4
       THEN substr(substr("DISP DATE", instr("DISP DATE",'/')+1), instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')+1)
       ELSE '20'|| substr(substr("DISP DATE", instr("DISP DATE",'/')+1), instr(substr("DISP DATE", instr("DISP DATE",'/')+1),'/')+1)
       END AS year 
    FROM DISP 
    ) 
```

# java - 如何使用java将文件从ftp服务器下载到本地机器

> ID：15563658
> 
> 赞同：2
> 
> 时间：2013-03-22T05:56:30.000
> 
> 标签：java, ftp, download

我想从 FTP 服务器下载一个 zip 文件到我的本地机器。

那个 .zip 文件夹结构就像*a\b\c\d.zip*。

请帮我这样做

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:03:23.993

以下帖子/博客/链接说明了如何使用 Apache Commons Net 下载文件

[http://www.mysamplecode.com/2012/03/apache-commons-ftpclient-java-example_16.html](http://www.mysamplecode.com/2012/03/apache-commons-ftpclient-java-example_16.html)

[http://www.dreamincode.net/forums/topic/32031-ftp-in-java-using-apache-commons-net/](http://www.dreamincode.net/forums/topic/32031-ftp-in-java-using-apache-commons-net/)

希望能帮助到你。

# jquery - 如何用每次出现的数组元素替换 Div 文本

> ID：15563659
> 
> 赞同：0
> 
> 时间：2013-03-22T05:56:30.347
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-3, asp.net-mvc-2

数组包含以下元素 1.abc 2.def 3.ghi

div 文本

```
this is abc - def some text 
```

我想用`<p> abc</p>`这样的方式替换每次出现所以最终的字符串如下所示。

```
this is <p>abc</p> - <p>def</p> some text 
```

我有一个数组元素。我必须在 div 中添加一些文本。我想使用没有循环的正则表达式用 div 文本替换 arrary 元素的每个出现。我使用两种方法完成了如下操作

**方法 #1 使用 Grep**

```
jQuery.grep(Words, function (val) {
    if (val != null && val != '') {
        Str = Str.replace(val, "<span class='abc'>" + val + "</span>");
    }
}); 
```

**方法 #2 使用循环。**

```
$.each(Words, function (keyIndex, val) {
    if (val != null && val != '')
         Str = Str.replace(val, "<span class='abc'>" + val + "</span>");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:15:55.027

关于什么

```
var string = 'this is abc - def some text ';
var array = ['abc', 'def', 'ghi'];

var regex = new RegExp('\\b' + array.join('\\b|\\b') + '\\b', 'g');

var as =string.replace(regex, function(a, b){
    return '<p>'+a+'</p';
});
console.log(as) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/68Jrc/)

# php - Laravel：使链接对客人不可见

> ID：15563663
> 
> 赞同：0
> 
> 时间：2013-03-22T05:56:55.910
> 
> 标签：php, laravel

我正在使用 L3 制作一个网站，以便客人无需登录即可发表评论，然后会有管理员登录。我有一个菜单栏，供客人和管理员使用，但在管理员登录时，菜单栏应该有更多选项。在我的布局上，这就是我所拥有的；

```
<div class="nav-collapse collapse" id="main-menu">
            <ul class="nav" id="main-menu-left">

                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Contact Us<b class="caret"></b></a>
                    <ul class="dropdown-menu" id="swatch-menu">
                        <li>{{HTML::link('posts/contact','Leave a coment')}}</li>
                        <li>{{HTML::link('posts/location','Grt Our Locations')}}</li>
                        @if (Session::has('permission'))
                        <li>{{HTML::link('posts/review','Review Posts')}}</li>                            
                        <li>{{HTML::link('posts/list','List all Posts')}}</li>
                        @endif
                    </ul>
</div> 
```

在我的管理员控制器上，我创建了一个 Session 以使帖子/评论和帖子/列表只能由管理员访问。这就是我所拥有的

```
public function post_login()
{
    $email = Input::get('email');
    $password = Input::get('password');

    $credentials = array
        ('username' => $email,
        'password' => $password);

    if (Auth::attempt($credentials))
    {
        Session::put('permission', 'admin');
        return Redirect::to('admin/index');
    } else
    {
        Session::flash('status_error', 'Your email or password is invalid - please try again.');
        return Redirect::to('admin/login');
    }
} 
```

这工作正常，除了客人将鼠标悬停在菜单栏上时可以看到管理链接（即他们可以看到“评论帖子”和“列出所有帖子”。他们无法访问页面（他们被重定向）到管理员登录页面）。我的问题是，我如何使这些链接对客人不可见，但在登录时对管理员可见？客人和管理员都必须使用相同的布局。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:12:16.997

您应该使用以下方法而不是 Session：

```
@if (Auth::user())
    <a href="#">Admin</a>
@endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:37:11.283

您似乎已经登录过一次，然后再次退出以测试该站点。看起来您在退出时没有清除“权限”会话。

# c# - 如何在 C# 中在没有背景颜色（透明）的 MDI 表单上显示标签

> ID：15563664
> 
> 赞同：-1
> 
> 时间：2013-03-22T05:56:56.360
> 
> 标签：c#, winforms, mdi

我在我的应用程序中放置了一个 MDI 表单。我已经为 MDI 表单提供了背景图像，我想在 MDI 表单上显示标签，还想添加一些图片按钮。

那么，我应该如何删除该背景颜色，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:18:07.013

您不能将子控件（如标签）添加到 MDI 父窗体。它只是行不通。MDI 父窗体旨在包含的唯一内容是子 MDI 窗体。

如果您希望背景可见，则应使用常规形式。MDI 的唯一目的是让您的父窗口充当其他子窗口的容器。这是一种相当过时的设计模式，微软和大多数其他供应商很久以前就停止在他们的软件中使用这种设计模式，因为它会让用户感到困惑。

如果您放弃 MDI 并使用常规窗体，您可以添加任何您想要的 Label、Button 和 PictureBox 控件。要使它们透明，您可以启用它们的`Transparent`属性。这并不总是按预期工作，因为 WinForms 不支持真正的透明度，但在我看来，它可以很好地满足您描述的用途。

# d3.js - D3直方图刷特定数据点

> ID：15563670
> 
> 赞同：3
> 
> 时间：2013-03-22T05:57:18.903
> 
> 标签：d3.js

我对 D3 有点陌生，所以如果这是微不足道的，我深表歉意。

我想创建一个直方图，允许用户刷过直方图的某些部分，并在与直方图分开的表格中显示所有选定的数据点。基本上，我想使用“画笔”在 D3中创建（ [http://square.github.com/crossfilter/ ）。](http://square.github.com/crossfilter/)我见过的所有示例都有条形图而不是直方图。通过在直方图可视化中创建画笔，我无法得到任何工作。这是可能的还是我应该将条形图重新制作成伪直方图？

谢谢！

# algorithm - 保龄球算法随机击倒球瓶和一些有双倍机会的球瓶

> ID：15563674
> 
> 赞同：0
> 
> 时间：2013-03-22T05:57:28.670
> 
> 标签：algorithm, math, random, probability

问题是保龄球系统，问题的措辞是：

> 应用程序将随机选择被击倒的引脚数，有双倍机会选择数字 7、8、9 和 10。

我实施的方式类似于

所以我想出了这样的事情：

```
pins = [0,0,0,0,0,0,0,0,0,0] // (1 for pin knocked down / 0 for pin standing)

for(i=0; i<pins.length; i++)

    if(pins[i]==0): //pin isn't already down

        if(i<6) 
            if(random(0~100) < 50):
                pins[i] = 1 //knock down
        else
            if(random(0~100) < 66):
                pins[i] = 1 //knock down

ex: [0,1,0,1,0,0,1,1,1,1] // 6 pins knocked down. 
```

所以我只是对引脚 0-6 和 2/3 对引脚 7-9 做 1/2 的概率，我只是对阵列中的所有元素求和，以知道许多引脚已被丢弃。

但我意识到我从来没有得到一个罢工或零，所以我开始怀疑我是否做错了。

假设所有 pin 的机会均等，我可以只做 pinsDropped = random(0,10) 并且我最终会得到罢工 (10) 9% 的机会和 0 个 pin 掉落。但是我有 4 个引脚有双倍的机会被丢弃，我应该更频繁地获得罢工。

我做错了什么？

* * *

## 更新：

是的，我很讨厌概率。与其他人交谈后，有人指出我也很讨厌阅读问题的措辞。我完全误解了这个问题。当它说`randomly choose the number of pins knocked down`和`double the chance to numbers 7,8,9,10`。

这意味着我更有可能击倒 10 个引脚而不是 6 个引脚。

7针、8针、9针和10针。不是引脚 7、引脚 8、引脚 9 和引脚 10。

我对自己的愚蠢感到非常沮丧。

所以我把这件事复杂化了很多，

```
function try(pins, prob) {
    if (prob > pins)
        prob = pins;
    aleat = mt_rand(0, pins+prob);
    if (aleat > pins)
        aleat -= prob;
    return aleat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:11:26.123

> 应用程序将随机选择被击倒的引脚数，引脚 7、8、9 和 10 有双倍的机会。

问题描述：

*   我们总共有 10 个引脚。

*   引脚 7、8、9 和 10 有双倍机会。

*   我们总共有 (6 * 1) + (4 * 2) = 6 + 8 = 14 次机会。

*   A = { 1, 2, 3, 4, 5, 6 } ; a 在 A 中

*   B = { 7, 8, 9, 10 } ; b 在 B 中

*   P(a) = 1/14

*   P(b) = 2P(a) = 2/14 = 1/7

建议的解决方案（Java）：

代码：

```
ArrayList<byte> pins = new ArrayList<byte>();
pins.addAll({1,2,3,4,5,6,7,8,9,10});

while (pins.size() > 0)
{
    /** pre-trial **/

    PinsExperiment.trial(pins);

    /** post-trial **/
} 
```

课程：

```
class PinsExperiment
{
    public static byte getChances(ArrayList<byte> pins)
    {
        byte c = 0;

        for (byte b : pins)
        {
            if (b <= 6) c += 1;
            else c += 2;
        }

        return c;
    }

    public static void trial(ArrayList<byte> pins)
    {
        byte chances = getChances(pins);

        byte r = Math.ceil(Math.random(0,chances));

        byte n = 0;

        for (byte b : pins) if (b <= 6) n++;

        if (r <= n) pins.remove(pins.get(r-1));
        else pins.remove(pins.get(((r-n)/2)-1)+n);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:00:01.370

简单的回答：

```
def randomChoose():
    x = randint(1,14);
    if x<=7:
        return x;
    else:
        return 6+ (x-5)/2; 
```

# android - 共享首选项，如何创建一个名为 fileNames 的首选项？

> ID：15563683
> 
> 赞同：0
> 
> 时间：2013-03-22T05:58:08.903
> 
> 标签：android, sharedpreferences

我已经读到您可以创建多个共享首选项文件，但我不知道如何。这就是我通常使用共享首选项的方式。

```
SharedPreferences get;
SharedPreferences.Editor save;

get = PreferenceManager.getDefaultSharedPreferences(context);
save = PreferenceManager.getDefaultSharedPreferences(context).edit(); 
```

这使得文件名为`package.name_preferences.xml`. 那么如何创建文件`package.name_fileNames.xml`以及如何写入和读取文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:05:11.360

在活动上使用 getSharedPreferences(String name, int mode) 而不是使用首选项管理器。

# html - 我可以为 github 页面创建多个存储库吗？

> ID：15563685
> 
> 赞同：143
> 
> 时间：2013-03-22T05:58:22.063
> 
> 标签：html, github, github-pages

我创建了一个用于在 github 上托管博客的[存储库](https://github.com/brickcap/brickcap.github.com)。有什么方法可以创建更多来托管多个博客？我是否仅限于一个托管存储库（因为*username.github.com*只能使用一次？）

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-03-22T06:22:52.533

您可以`https://<username>.github.io`通过发布到名为“username.github.io”的存储库的主分支来发布一个站点（替换您的实际用户名）。

您还可以将每个 GitHub 项目的附加站点发布到`https://<username>.github.io/<project>`. 项目设置让您[选择要发布的分支和目录](https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)。

[GitHub Pages 文档](https://help.github.com/articles/user-organization-and-project-pages)中提供了更好的描述，包括使用自定义域名的选项。

（[从 2013 年 4 月开始](https://github.com/blog/1452-new-github-pages-domain-github-io)，`username.github.com`现在都是`username.github.io`）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-12-01T14:39:30.473

不，您不受限制，可以在一个帐户中拥有多个 GitHub Pages 站点。创建另一个 GitHub 存储库并将您的站点文件推送到 gh-pages 分支。这将导致该站点托管在 tshepang.github.io/repo-name

现在，将另一个文件“CNAME”推送到同一个存储库和分支，并用movies.tshepang.net 填充它。登录到您的 DNS 主机并添加 CNAME 以指向“tshepang.github.io”（就像原始站点一样）。

这将允许您在不同的域上拥有看似两个不同的站点。这不适用于在 github.io 本身中有两个或多个子域。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-01-26T17:12:44.713

如果您对代码重复感到满意，则可以在具有**子页面**的同一存储库中托管多个页面。

我的网站的最新版本托管在[http://username.github.io/REPONAME](http://username.github.io/REPONAME) 这是我的根存储库结构的屏幕截图，我在其中托管了我的网站的最新版本：

[![存储库根文件夹](../Images/48258af0a372d1194274203c25db0202.png)](https://i.stack.imgur.com/hBbH2.png)

**在文件夹“2.4.0”内，我可以托管同一页面的以前版本，**然后可以访问：[http](http://username.github.io/REPONAME/2.4.0) ://username.github.io/REPONAME/2.4.0 这是文件夹 2.4.0 的结构： [![存储库文件夹 2.4.0](../Images/212937716d453fe50a78d4db63d5ce8b.png)](https://i.stack.imgur.com/ENwMs.png)

使用主页面中子页面的这种方法，您可以在一个主页面中托管多个子页面。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-04T07:18:16.117

**您只能`one`为每个 GitHub 帐户创建用户或组织站点。项目网站，无论是由组织还是用户帐户拥有，都是`unlimited`.**

# GitHub 页面站点

GitHub Pages 站点分为三种类型：
`project`、`user`和`organization`。项目站点连接到托管在 GitHub 上的特定项目，例如 JavaScript 库或配方集合。用户和组织站点连接到特定的 GitHub 帐户。

要发布用户站点，您必须创建一个由您的用户帐户拥有的名为 的存储库`<user>.github.io`。要发布组织站点，您必须创建一个由名为 的组织拥有的存储库`<organization>.github.io`。除非您使用自定义域，否则用户和组织站点可在`http(s)://<username>.github.io`或`http(s)://<organization>.github.io.`

项目站点的源文件存储在与其项目相同的存储库中。除非您使用自定义域，否则项目站点可在`http(s)://<user>.github.io/<repository>`或上找到`http(s)://<organization>.github.io/<repository>`。

GitHub Pages 站点的发布源是存储站点源文件的分支和文件夹。如果您的存储库中存在默认发布源，GitHub Pages 将自动从该源发布站点。用户和组织站点的默认发布源是存储库默认分支的根。项目站点的默认发布源是`gh-pages`分支的根。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-13T23:44:07.293

如果您不想为不同的站点创建单独的存储库，而只想托管它们，我找到了一种解决方法。在您的 io 存储库中，在您的主分支上创建一个 index.html 文件，该文件充当链接到您的其他站点（子目录） index.html 文件的目录。username.github.io 主分支似乎是启用托管的登录页面，因此如果它没有看到链接到您的单独项目的索引文件，它将不会注册您的子目录。在此之后，您需要的只是您想要查看的任何项目的 URL。io 基本上就像一个巨大的单一网站，上面有你所有的单独项目。当然，如果您希望拥有单独的存储库，那么 gh-pages 是您的最佳选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-06T13:36:59.387

今天我创建了另一个站点，而不是创建分支 gh-pages 我在存储库设置中配置了主分支-> GitHub 页面部分选择源作为主（或您想要的任何其他分支）。您将在同一部分中获得站点链接，在我的屏幕截图中，我已删除站点链接。

[![在此处输入图像描述](../Images/ad8f8c348d922e27540ddf347214c6be.png)](https://i.stack.imgur.com/Waih2.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-04T23:40:57.900

这行得通，但 ssl 仍然是我需要弄清楚的东西。就我而言，GoDaddy 是我的域所在的位置 (url1.xyz)，名称服务器指向 Cloudflare。然后在 Cloudflare 中，A 记录指向 Github Pages。这是网站 1，运行良好。对于网站 2，我使用网站 2 文件（例如 url1.xyz/static/website2/）在我的 gh-pages 存储库中直接创建一个子域 - 然后我在 Cloudflare 中创建一个子域（subdomain.url1.xyz）。然后创建从子域到包含第二个网站的子目录的页面规则（url 转发），例如 subdomain.url1.xyz >> mask forward >> url1.xyz/static/website2/ .. 然后在 GoDaddy 我可以配置 url2.co .uk 屏蔽转发到 subdomain.url1.xyz ，它呈现网站 2 例如 url1.xyz/static/website2/

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-25T17:33:50.467

只是为了补充上面的内容。使用一个 github 用户帐户（https://< username >.github.io），我们仍然可以拥有多个使用不同自定义域（例如：domain1.com、domain2.com、domain3.com）托管的静态内容网站，我们只需创建为每个域创建一个新的存储库，并将 A 记录指向 github 页面 IP 和 CNAME 记录指向 <用户名>.github.io

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-10-22T13:12:33.760

您可以在您的 github 帐户中创建多个博客。

1.  可以在您的用户名下创建一个存储库。将您的代码推送到分支`gh-pages`，您可以在`<username>.github.io`

2.  可以在您的组织下创建另一个。为此，您必须首先创建您的组织。在此组织下创建一个新存储库并将您的代码推送到`gh-pages`. 你可以看到你的网站`<organization-name>.github.io`

3.  您还可以为每个项目创建，该站点将在`<username>.github.io/<repository>`

有关 github 页面的更多信息，请参阅[此内容。](https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages)

# android - 更改图像时更改文本

> ID：15563687
> 
> 赞同：0
> 
> 时间：2013-03-22T05:58:22.433
> 
> 标签：android, text, android-view

我有一个水平滚动视图，其中包含图像数组列表和滚动视图下方的文本字段，我如何在水平滚动视图中更改图像时更改文本。

```
For Example: If the image will show image2 the text will also texted with text2 next when i will scroll the image2 to image3 the text will also move from text2 to text3 
```

**这里图像只会滚动，文本视图将保持固定，它只会用图像更改名称**

我已经尝试了所有可能性，但我没有得到：

在这里，我在放置图像的视图项目中使用了适配器类：

```
public View getView(int position, View convertView, ViewGroup parent) {

            vi=convertView;

            if(convertView==null){
                vi = LayoutInflater.from(parent.getContext()).inflate(R.layout.screen, null);

               position_pin = position;

              Holder.images=(ImageView) vi.findViewById(R.id.image);
              Holder.textview=(TextView) vi.findViewById(R.id.name);

             Holder.images.setImageResource(imageIds[position]);
           Holder.text.setText(name);//here name is String 

             vi.setTag(Holder);   

            }

                        return vi;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:09:46.103

实现滚动视图侦听器并根据我们可以显示文本的位置获取位置..

ExampleScrollView exampleScrollView = (ExampleScrollView) findViewById(R.id.example_scroll_view);

示例ScrollView.setOnScrollViewListener（新的OnScrollViewListener（）{

```
public void onScrollChanged( ExampleScrollView v, int l, int t, int oldl, int oldt ) { 
    Log.d( "Scroller", "I changed!" ); 
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:25:40.493

只需将标题寻呼机指示器与视图寻呼机集成。

```
 ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);
ImagePagerAdapter adapter = new ImagePagerAdapter();
viewPager.setAdapter(adapter);
TitlePageIndicator titleIndicator = (TitlePageIndicator)findViewById(R.id.titles);
titleIndicator.setViewPager(viewPager); 
```

[您可以在https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)找到标题寻呼机指示器的库项目

# arr - ARR 请求无法路由，因为它已达到 Max-Forwards 限制。服务器可能在请求路由拓扑中自引用自身

> ID：15563688
> 
> 赞同：8
> 
> 时间：2013-03-22T05:58:29.053
> 
> 标签：arr

我有两台安装了 IIS 7.5 的 Windows 2008 R2 标准服务器（Server1 和 Server2）。在 Server1 上，我安装了 Web Farm Framework 2.2 并创建了一个服务器 Farm“myFarm.com”。我还在 Server1 上安装了 ARR。

在服务器场中，我添加了 Server2 和 Server1 作为辅助服务器。我已经用默认选项配置了 ARR。负载平衡被配置为“轮询，以便请求可以随机到达两个服务器。

为了测试我的设置，我创建了一个 Test.ASPX 页面并将其部署在两个服务器中。这是一个简单的页面，它返回执行服务器页面的 serverName。这样我就知道负载平衡是否有效。

然后我打开 Internet Exlorer 并尝试从托管 Web Farm 和 ARR 的 server1 浏览我的 Test.ASPX 页面。每次我点击页面请求时都只会转到 Server2。我让我的 server2 在 webfarm 中运行不正常，以检查 Server1 是否处理请求。当我尝试在浏览器中点击 Test.aspx 时，我惊讶地添加了以下错误：

**无法路由该请求，因为它已达到 Max-Forwards 限制。服务器可能在请求路由拓扑中自引用自身。**

从错误消息看来，当我的 server2 不可用时，ARR 正在向 Server1 发送请求，Server1 再次将请求发送给自身，从而导致环回。我找不到阻止此环回的方法。

我在搜索后发现的一个解决方案是，我不应该将 Server1 添加到 Web 场，因为它托管 ARR，但我只有两台服务器，我不想只为 ARR 使用一台服务器。

一旦我标记我的 server2 健康请求开始由 server2 执行。

有人可以建议应该配置什么来解决这个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-02T15:32:17.303

我最近遇到了同样的问题，这是对我有帮助的配置（按照 Cedric 在另一篇文章中的建议）。

因此，您可以执行以下操作：

*   在您的网站配置中，为 Server2 添加额外的绑定，例如，添加到端口 88（即，您应该能够通过导航到 获得响应`http://Server2:88/Test.ASPX`）。
*   在您的服务器场配置中，为您的路由添加条件（路由规则 -> URL 重写）以避免处理转到端口 88 的请求：

![URL重写配置](../Images/f4cad87970a0c56e4e000524754c9e63.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T21:07:34.107

如果您在端口 80 上配置 ARR 并在另一个端口上配置您的网络场，您可以进行自我参考 ARR 并避免获得最大转发限制：例如 8080

因此，当 ARR 将请求路由到自身时，他将在另一个端口上执行此操作，因此避免转发并再次转发请求。

享受 ：-）

# c# - 无法在 Visual Studio 2012 Ultimate SP1 x64 中创建或打开网站

> ID：15563698
> 
> 赞同：12
> 
> 时间：2013-03-22T05:59:14.650
> 
> 标签：c#, c++, asp.net, .net, visual-studio

在我的 Visual Studio Professional 2012 中尝试创建或打开网站时出现错误。

一个对话框出现在我面前，上面写着

> 必须在打开或创建 Web 项目之前安装 Web 开发人员工具选项。您可以通过修复 Microsoft Visual Studio 安装并确保在可选组件列表中选中“Web 开发人员工具”来安装此选项

我在 64 位操作系统上使用 Windows 7 Ultimate Service Pack 1，并且已经安装了 Web Developer Tools。

请你帮助我好吗。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T06:11:34.080

1.  转到`Control Panel`-> `Programs and Features`-> 选择您的 Visual Studio 版本并点击“ `Change`”。

![在此处输入图像描述](../Images/e58b411b2cda43a2d47bfe1b8fd8acbc.png)

2.  单击修改并启用`Web Developer Tools`

![在此处输入图像描述](../Images/8bbd6dc77c674e3b6860067999a04731.png)

4.  使能够`Web Developer Tools`

![在此处输入图像描述](../Images/4d0d221a143296ed47945444ee3c5803.png)

3.  点击`Update`

# asp.net-mvc - 如何在 mvc4 中获取 Selected 下拉列表值并根据选择需要填充另一个下拉列表

> ID：15563701
> 
> 赞同：0
> 
> 时间：2013-03-22T05:59:24.837
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我的jquery是这样的

```
<script type="text/javascript">$(document).ready(function(){
$("#drpId").change(function(e) {
    firstDDLValue = $("#drpId").val();
    $.post('@Url.Action("GetDataForSecond", "Login")', { fstValue: firstDDLValue }, function (e) {
        var select = $("#secondDDLID");
        select.empty();
        $.each(result, function (index, Data) {
            select.append($('<option/>', {
                value: result.Value,

            }));
        });
    });
});
}); 
```

我的控制器代码是

```
 public JsonResult GetDataForSecond(string fstValue)
    {
        Domain obj = new Domain();
        var data = obj.LoadSubDomain(fstValue); return Json(data, JsonRequestBehavior.AllowGet); 
```

在数据中，我得到了第二个下拉列表的所有值，但考虑到它没有约束力。我的视图代码就是这样

```
 <div class="editor-field">
        @{
var data = ViewBag.MyData;
            <select name="drpId" id="drpId">
                <option value="yourvalue">Select DomainName </option>
                @foreach (var te in data)
                {
                    <option>@te.DomainName</option>

                }
            </select>
        }
        @Html.ValidationMessageFor(model => model.DomainName)
    </div>
    <div class="editor-field">
        <select name="secondDDLID" id="secondDDLID">
            <option value="yourvalue"></option>
        </select>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:27:09.633

做这个：

在您的视图中添加此脚本：

```
$("#drpId").change(function () {
        firstDDLValue = $("#drpId").val();
        $.post('@Url.Action("GetDataForSecond", "Login")', { fstValue: firstDDLValue }, function (result) {
            var select = $("#secondDDLID");
            select.empty();
            $.each(result, function (index, Data) {
                select.append($('<option/>', {
                    value: Data.Value,
                    text: Data.Text
                }));
            });
        });
    }); 
```

以及在控制器中绑定第二个 ddl 的方法：

```
 public JsonResult GetDataForSecond(string fstValue)
    {
        Domain obj = new Domain();
        var result = obj.LoadSubDomain(fstValue);
        IList < SelectListItem > Data = new List<SelectListItem>();
        for (int i = 0; i < result.Count; i++)
        {
           Data.Add(new SelectListItem()
            {
                Text = result[i].Name,
                Value = result[i].Name,
            });
        }
        return Json(Data, JsonRequestBehavior.AllowGet);
    } 
```

# types - Ocaml：为什么是这些类型？

> ID：15563702
> 
> 赞同：1
> 
> 时间：2013-03-22T05:59:34.097
> 
> 标签：types, ocaml

嗨，有人可以解释一下为什么这些类型如下所述吗？我知道它们必须是 int ，因为`x+y+z`参数的数量（即`->`）对我来说似乎是任意的。

```
let f x y z = x+y+z in f 1 2 3      // int
let f x y z = x+y+z in f 1 2        // int -> int
let f x y z = x+y+z in f            // int -> int -> int -> int 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:12:30.717

稍微扩展一下valtron的答案。一旦你了解了`f`. 正如 valtron 所说，它的类型是`int -> int -> int -> int`. 从根本上说，这是一个函数的类型，它接受一个`int`并返回一个类型的函数`int -> int -> int`。所以如果你只是传递`1`给`f`（你在你的例子中没有这样做），你会得到一些类型的东西`int -> int -> int`。

以类似的方式，如果你将 an 传递`int`给这个返回的函数，你会得到一个 type 的函数`int -> int`。这是您在示例中所做的事情：`f 1 2`正是这样做的：它传递`1`给`f`，然后传递`2`给返回的函数`f`。第二个函数调用返回一些 type `int -> int`，正如顶层显示的那样。

同样，在后面指定三个值`f`会返回一个 type 的值`int`。这就是您的第一个示例中发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:03:52.393

的类型`f`，正如您定义的那样，是`int -> int -> int -> int`。由于柯里化，您提供的每个参数都会减少`f`表达式的类型。`int`例如，`f 1 2`is `int -> int`，一个接受一个 int 并返回一个 int 的函数，因为`x`and是用and`y`柯里化的，所以它们不再是参数了。`1``2`

# c# - 如何操作值以用作参数

> ID：15563703
> 
> 赞同：0
> 
> 时间：2013-03-22T05:59:39.743
> 
> 标签：c#, filter

嗨，我有一个选择和一个文本类型输入。这些控件用于过滤数据网格中的列表。选择控件具有以下选项：LastName、MiddleName、FirstName、Gender、City 和 StudentID。然后我收到了这个查询：

```
SELECT * FROM Student
WHERE ( LastName LIKE '%' + @LastName + '%' OR @LastName = '' )
AND ( MiddleName LIKE '%' + @MiddleName + '%' OR @MiddleName = '' )
AND ( FirstName LIKE '%' + @FirstName + '%' OR @FirstName = '' )
AND ( Gender LIKE '%' + @Gender + '%' OR @Gender = '' )
AND ( City LIKE '%' + @City + '%' OR @City = '' )
AND ( StudentID LIKE '%' + @StudentID + '%' OR @StudentID = '' ) 
```

例如，用户选择名字，然后输入“James”。这可以读作“给我名字是‘詹姆斯’的学生名单。” 在我的控制器中，我认为的唯一方法是使用 If..Else If 或 Switch 条件。是这样的：

```
string lastName = String.Empty;
string middleName = String.Empty;
and so on..

if(dropdown == "Lastname")
{
lastName = textbox_value;
}
else if(dropdown == "Middlename")
{
middleName = textbox_value;
}
and so on.. 
```

然后我有方法将值作为参数传递给我的 sql 查询。

```
resultList = GetRecord(lastName, middleName, firstName, gender, city, studentID); 
```

我现在的问题是，有什么比使用 If..Else 和 Switch 更好、最干净、最简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:12:19.040

您需要在某个地方决定它，或者在您的控制器中，或者您可以将它委托给另一个类，但将它委托给另一个帮助类将承担责任。所以我想说，你可能会想到下面的设计

```
 public class ParameterSelector
{

    private Dictionary<string,Action> _dictActionMap = new Dictionary<string, Action>();
    public ParameterSelector()
    {
        PopulateDictionaryWithActions();
    }

    private void PopulateDictionaryWithActions()
    {
        _dictActionMap.Add("LastName", () => lastName = txtBox_Value);
        _dictActionMap.Add("MiddleName", () => middleName = txtBox_Value);
    }
 } 
```

**和使用**

```
main()
{
  if(_dictActionMap.ContainsKey(dropdown))
      _dictActionMap[_dictActionMap]();
} 
```

为了避免ifs和switches，我使用了带有相关动作的字典，这种方法有其自身的缺点，例如，我们定义了一些不必要的动作来处理switch / ifs的部分，它给人一种我们已经摆脱了ifs / switch的感觉但是要权衡内存要求，因此永远不要使可以简单处理的事情复杂化。

所以我会说在你的情况下使用 Ifs/Switch 没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:05:36.413

您可以查看使用[switch（C# 参考）](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.100%29.aspx)语句。

> switch 语句是一个控制语句，它从候选列表中选择要执行的 switch 部分。

# html - 背景没有进入ie8

> ID：15563709
> 
> 赞同：0
> 
> 时间：2013-03-22T06:00:23.483
> 
> 标签：html, css, internet-explorer, cross-browser

当我把导航背景图片放在ie8 ie7 中时是不会进来的。其他浏览器都正常。我已经添加了下面的代码。谁能帮我解决这个问题？/

```
<nav class="navigation">
        <ul>
            <li><a href="http://www.ticketstosrilanka.co.uk/" >Home</a></li>
            <li><a  href="cheap-flights-to-colombo-sri-lanka.php">Flights</a></li>
            <li><a href="destination.php" class="active">Travel Guide</a></li>
            <li><a href="holidaytours.php">Tours & Holidays</a></li>
            <li><a href="aboutus.php">About us</a></li>
            <li><a href="contactus.php">Contact Us</a></li>
        </ul>
    </nav>

.navigation {
    margin: 0px 0;  
    font: bold 12px/18px "Helvetica Neue", Helvetica, Arial, sans-serif;
    text-transform: uppercase;
    color: #444;
    width:100%;
    background: url("../images/menubg.png")repeat-x scroll left top transparent;
    -webkit-box-shadow: 0 1px rgba(255,255,255,1) inset;

}

.navigation:after {
    clear: both;
    content: ".";
    display: block;
    height: 0;
    visibility: hidden;
}

.navigation ul {    
    float: left;
    border-radius: 0px;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.07);
    -webkit-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.07);
    overflow: hidden;

}

.navigation li {
    float: left;
    border-style: solid; 
    border-width: 1px;
    border-color: #BABABA #BABABA #BABABA #FFF;
    box-shadow: 0 1px rgba(255,255,255,1) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,1) inset;
    background: #F7F7F7; /* Old browsers */
    background: -moz-linear-gradient(top, #F7F7F7 0%, #EDEDED 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F7F7F7), color-stop(100%,#EDEDED)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* IE10+ */
    background: linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F7F7F7', endColorstr='#EDEDED',GradientType=0 ); /* IE6-9 */    
}

.navigation li:hover, navigation li.current {
    box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    border-color: #262626 !important;
    background: #4D4D4D; /* Old browsers */
    background: -moz-linear-gradient(top, #4D4D4D 0%, #262626 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4D4D4D), color-stop(100%,#262626)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* IE10+ */
    background: linear-gradient(top, #4D4D4D 0%,#262626 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4D4D4D', endColorstr='#262626',GradientType=0 ); /* IE6-9 */
}

.navigation a {
    display: block;
    padding: 10px 15px;
    color: #444;
    text-decoration: none;
    text-shadow: 0 1px #FFF;
}
.navigation  a.active{
    box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    border-color: #262626 !important;
    background: #4D4D4D; /* Old browsers */
    background: -moz-linear-gradient(top, #4D4D4D 0%, #262626 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4D4D4D), color-stop(100%,#262626)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* IE10+ */
    background: linear-gradient(top, #4D4D4D 0%,#262626 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4D4D4D', endColorstr='#262626',GradientType=0 ); /* IE6-9 */
    color:#fff;
}

.navigation a:hover, #navigation li.current a {
    color: #FFF;
    text-shadow: 0 1px #000;
}

.navigation li:first-child {
    border-left-color: #BABABA;
    border-radius: 0px 0 0 0px;
}

.navigation li:last-child {
    border-radius: 0 0px 0px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:09:28.423

现在添加这个

```
 .navigation {
        background: url("../images/menubg.png") repeat-x left top; // add this line
background: url("../images/menubg.png")repeat-x scroll left top transparent; // remove this line
    } 
```

**[现场演示](http://jsfiddle.net/teCGK/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:57:38.817

只需添加`float: left;`到您的`.navigation`this 可能会解决您的问题，如果没有，请尝试添加

`* html .navigation{height: 1%;}`

# django - 如何解决此错误 ImproperlyConfigured: settings.DATABASES 配置不正确。请提供 ENGINE 值。

> ID：15563711
> 
> 赞同：0
> 
> 时间：2013-03-22T06:00:47.540
> 
> 标签：django

写了一个名为“installcms.sh”的脚本，我把它放在/root

这是我的脚本

```
apt-get install python-setuptools python-imaging >> installcms.log 2>&1
easy_install pip >> installcms.log 2>&1
pip install django django-cms south django-appmedia >> installcms.log 2>&1
django-admin.py startproject djangocmsproject >> installcms.log 2>&1
cd djangocmsproject
rm settings.py
rm urls.py
cp /root/settings.py settings.py >> installcms.log 2>&1
cp /root/urls.py urls.py >> installcms.log 2>&1
mkdir templates
cd templates
cp /root/example.html example.html >> installcms.log 2>&1
cd ..
python manage.py syncdb --all >> installcms.log 2>&1
python manage.py migrate --fake >> installcms.log 2>&1
python manage.py runserver >> installcms.log 2>&1 
```

## 当我尝试使用命令“/root/installcms.sh”执行我的脚本时

我收到此错误

```
ImproperlyConfigured: settings.DATABASES is improperly configured. Please
supply the ENGINE value. Check settings documentation for more details. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:25:40.463

我猜最可能的错误是您`settings.py`的错误；具体来说，dict 中定义的一个或多个数据库`DATABASES`缺少`ENGINE`配置值。

查看[Django 文档](https://docs.djangoproject.com/en/dev/ref/settings/#databases)，了解数据库配置的示例。

# iphone - 仅从目录中获取图像文件

> ID：15563714
> 
> 赞同：1
> 
> 时间：2013-03-22T06:00:55.963
> 
> 标签：iphone, ios, objective-c

我将图像文件存储在缓存目录中。稍后我想从缓存目录中获取所有图像文件列表。我正在使用以下代码来获取所有文件。

```
[fileManager contentsOfDirectoryAtPath:pathForCacheDirectory error:&error] 
```

如何从中分离图像文件。图像文件可以是任何格式。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:23:57.087

```
// Store your supported image Extensions
NSArray *extensionList = [NSArray arrayWithObjects:@"jpg", @"jpeg", @"png", @"gif", @"bmp", nil];

// Grab the content Directory
NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:pathForCacheDirectory error:&error];

NSMutableArray *listOfImageFiles = [NSMutableArray arrayWithCapacity:0];

// Check for Images of supported type
for(NSString *filepath in contents){
    if ([extensionList containsObject:[filepath pathExtension]])
    {
        // Found Image File
        [listOfImageFiles addObject:filepath];
    }
}
NSLog(@"Lisf of Image Files : %@",listOfImageFiles); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:05:26.173

一种残酷的方法是枚举您认为它是图像的所有扩展。更好的方法是使用 UTI，检查这个[Get the type of a file in Cocoa](https://stackoverflow.com/questions/5814463/get-the-type-of-a-file-in-cocoa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:11:39.280

您可以使用扩展名过滤文件。

```
 NSArray *contents = [fileManager contentsOfDirectoryAtPath:pathForCacheDirectory error:&error];
    for(NSString *filepath in contents){
       if ([[filepath pathExtension] isEqualToString: @"png"]) {
            // Your code
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T06:27:16.680

试试这个，希望这会有所帮助。

```
 NSArray * contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:YOURPATH error:NULL];
    NSMutableArray * onlyImages = [[NSMutableArray alloc]init];
    for (NSString * contentPath in contents) {
        NSString * lastPath = [contentPath pathExtension];

        if ([lastPath isEqualToString:@"jpg"] || [lastPath isEqualToString:@"jpeg"] || [lastPath isEqualToString:@"png"] ||  /* any other */ ) {
            [onlyImages addObject:contentPath]; // only images
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T06:04:51.593

看到这个并检查：

```
CFStringRef fileExtension = (CFStringRef) [file pathExtension];
CFStringRef fileUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, fileExtension, NULL);

if (UTTypeConformsTo(fileUTI, kUTTypeImage)) NSLog(@"It's an image");
else if (UTTypeConformsTo(fileUTI, kUTTypeMovie)) NSLog(@"It's a movie");
else if (UTTypeConformsTo(fileUTI, kUTTypeText)) NSLog(@"It's text");
else  NSLog(@"It's audio"); 
```

# dbi - [perl]如何强制 perl 在我自己的路径中使用模块？

> ID：15563715
> 
> 赞同：2
> 
> 时间：2013-03-22T06:00:56.263
> 
> 标签：dbi, perl

我想让 perl 在我自己的路径中使用 DBI 模块（假设 /home/users/zdd/perl5/lib/DBI），但系统也有一个 DBI 模块，即 /usr/lib/perl5/lib/DBI . 当我在脚本中编写以下代码时，perl 默认使用系统路径，如何强制它使用我路径下的路径？

```
use lib './perl5/lib/DBI';
use DBI;

sub test {
....
} 
```

/usr/lib/perl5/lib/DBI 已添加到我的 bash 配置文件中的 PATH 环境变量中，它被许多脚本使用，所以我无法禁用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T06:07:53.043

主`DBI`模块的文件位于`./perl5/lib`. 所以你的路径没有指向它。

该`DBI`文件夹包含 的子模块`DBI`，例如`DBI::Foo`（`::`in 模块名称是您的模块目录结构的表示）。

尝试使用`./perl5/lib`作为您的库。

此外，如果当前目录不是您认为的那样，则使用相对路径将失败。如果您有疑问，请[调用`cwd`](http://perldoc.perl.org/Cwd.html)您的脚本以查看当前目录是什么。

出于调试目的，使用以下方法可能会有所帮助：

```
no lib '[main Perl module library path here]'; 
```

这样你就可以确定你只使用你的自定义模块路径。任何找不到模块都会导致错误，而不是静默使用系统版本。

**更新：**有关更多信息，请参阅[Perldoc on`use lib`](http://perldoc.perl.org/lib.html) . Perl*将*使用您首先指定的库。如果没有，则表明它实际上并未在您给定的位置找到该模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:16:38.183

In addition to what dan1111 suggested, I would also recommend you print out `@INC` (just before your `use DBI` statement) and dump `%INC` (just after your `use DBI` statement) to see what your script is doing. That may help you debug the issue.

# jquery - 加载弹出表单后，背景滚动应该隐藏

> ID：15563725
> 
> 赞同：-1
> 
> 时间：2013-03-22T06:02:01.597
> 
> 标签：jquery, popup, ruby-on-rails-3.2, scroll

在 rails 3.2.9 中，我使用的是 twitter 引导插件。我正在尝试加载一个弹出表单，在加载此表单时，背景滚动应该隐藏，并且在关闭此表单滚动后应该像往常一样工作。

我努力了

```
document.body.style.overflow = "hidden"; 
```

隐藏滚动但弹出表单将显示一半（对于大表单）。

```
document.body.style.overflow = "visible"; 
```

关闭弹出表单后将正常工作。即使我尝试过

```
$(window).unbind('scroll'); 
```

但这将在弹出表单加载时起作用，但在关闭表单滚动后将不起作用

```
$(window).bind('scroll'); 
```

这个命令。

请提出一些解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:10:42.217

试试这个代码..当弹出加载

```
$("body").css("overflow", "hidden"); 
```

弹出关闭时

```
 $("body").css("overflow", "auto"); 
```

# wpf - 如何将 WPF UserControl 最大化为 Frame 的宽度？

> ID：15563726
> 
> 赞同：0
> 
> 时间：2013-03-22T06:02:31.593
> 
> 标签：wpf, user-controls, window, frame

我有一个带有堆栈面板和框架的窗口。保存我的菜单的堆栈面板。在选择菜单时，我正在框架内加载我的用户控件。

但问题是 UserControl 显示在框架的中心并且没有最大化。

谁能帮我将我的 UserControl 最大化到 Frame 的宽度并调整 UserControl 中所有控件的大小？

这是我的 xaml 文件...

用户控制：

```
<UserControl x:Class="PosWp.Categorys"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
             HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
             d:DesignHeight="400" d:DesignWidth="700" Loaded="UserControl_Loaded">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ButtonStyleDictionary.xaml"></ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Width="700">
        <StackPanel  Margin="0,0,0,0" Height="Auto" Width="Auto">
            <TabControl Name="Tabs1" TabStripPlacement="top"  BorderThickness="0"   BorderBrush="#CC684331" Margin="0,0,0,0">
                <TabControl.Background>
                    <RadialGradientBrush>
                        <GradientStop Color="Gray" Offset="0"/>
                        <GradientStop Color="Gray" Offset="0"/>
                        <GradientStop Color="Gray" Offset="0"/>
                        <GradientStop Color="Gray" Offset="0"/>
                    </RadialGradientBrush>
                </TabControl.Background>
                    <TabItem Header="Category" Name="GridCat" IsSelected="False" Visibility="Hidden">                                 
                                <Grid Height="280" Width="671">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="200*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="23"></RowDefinition>
                                        <RowDefinition Height="34" />
                                        <RowDefinition Height="143" />
                                        <RowDefinition Height="50*"></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <DataGrid IsReadOnly="True" AutoGenerateColumns="False" AlternatingRowBackground="Beige"   Height="142"  Grid.ColumnSpan="2" FontWeight="Bold" HorizontalAlignment="Center"   Margin="0,0,206,0" Name="dgCategory"  VerticalAlignment="Top" Width="460" Grid.RowSpan="3"  SelectionChanged="dgCategory_SelectionChanged">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Binding="{Binding Path=CategoryCode}" Header="Category"  Width="200" ></DataGridTextColumn>
                                            <DataGridTextColumn Binding="{Binding Path=Categoryname}" Header="CategoryName" Width="250" ></DataGridTextColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <Button x:Name="Create" Template="{StaticResource Create}"  Height="30" HorizontalAlignment="Left"  Grid.Row="3" Margin="40,0,0,0" Click="Create_Click"  VerticalAlignment="Top" Width="75" />
                                    <Button x:Name="Edit" Template="{StaticResource Edit}" Height="30" HorizontalAlignment="Left" Grid.Row="3" Margin="120,0,0,0"  Click="Edit_Click" VerticalAlignment="Top" Width="75"  />
                                    <Button x:Name="Delete" Template="{StaticResource Delete}" Height="30" HorizontalAlignment="Left" Grid.Row="3" Grid.Column="1" Click="Delete_Click" Margin="0,0,0,0"   VerticalAlignment="Top" Width="75" />
                                    <Button x:Name="Exit" Template="{StaticResource Exit}" Height="30" HorizontalAlignment="Left" Grid.Row="3" Grid.Column="1" Click="Exit_Click" Margin="80,0,0,0"   VerticalAlignment="Top" Width="78" />
                        <Label Content="Category Master" FontWeight="Bold"  Grid.ColumnSpan="2" Height="28" HorizontalAlignment="Left" Margin="167,-39,0,0" Name="lblgrid" VerticalAlignment="Top" Width="136" />
                    </Grid>
                    </TabItem>             

                    <TabItem Header="Category" Name="Cat"  Visibility="Hidden">
                        <Grid Height="280" Width="689">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="250"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="70"></RowDefinition>
                                <RowDefinition Height="70"></RowDefinition>
                                <RowDefinition Height="70"></RowDefinition>
                                <RowDefinition Height="*"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Label Content="CategoryCode" FontWeight="Bold" FontSize="12" Name="lblCatcode" Width="110" Margin="0,29,0,16" Height="25" HorizontalAlignment="Right"></Label>
                            <Label Content="CategoryName" FontWeight="Bold" FontSize="12" Grid.Row="1" Name="lblCatName" Width="110" Margin="0,22,0,23" HorizontalAlignment="Right"></Label>
                            <TextBox Name="txtCatcode" Grid.Column="1" Width="170" HorizontalAlignment="Left" Margin="0,28,0,17" Height="25"></TextBox>
                            <TextBox Name="txtCatName" Grid.Column="1" Grid.Row="1" Width="170" HorizontalAlignment="Left" Margin="0,22,0,0" Height="25" VerticalAlignment="Top"></TextBox>
                            <Button x:Name="Save" Template="{StaticResource Save}" Grid.Column="1" Grid.Row="2" Margin="5,0,0,0" HorizontalAlignment="Left" Click="Save_Click"  Width="85" Height="30" ></Button>
                            <Button x:Name="Update" Template="{StaticResource Update}" Visibility="Hidden" Grid.Column="1" Grid.Row="2" Margin="5,0,0,0" Click="Update_Click" HorizontalAlignment="Left"  Width="85" Height="30" ></Button>
                            <Button x:Name="Remove" Template="{StaticResource Remove}" Visibility="Hidden" Grid.Column="1" Grid.Row="2" Margin="5,0,0,0" Click="Remove_Click" HorizontalAlignment="Left"  Width="85" Height="30"></Button>
                            <Button x:Name="Close" Template="{StaticResource Close}" Grid.Column="1" Grid.Row="2" Margin="95,0,0,0" HorizontalAlignment="Left"   Height="30" Click="Close_Click"  Width="85"></Button>
                        <Label Content="Category Master" FontWeight="Bold"  Grid.ColumnSpan="2" Height="28" HorizontalAlignment="Left" Margin="167,-39,0,0" Name="lblcategory" VerticalAlignment="Top" />
                    </Grid>
                    </TabItem>                    
                </TabControl>
        </StackPanel>
    </ScrollViewer>
</UserControl> 
```

窗口xml：

```
<Window x:Class="PosWp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="650" ResizeMode="CanResize" WindowState="Maximized" WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Background" Value="CornflowerBlue" />
            <Setter Property="Height" Value="22" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid Height="{TemplateBinding Height}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1.8*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Rectangle Grid.RowSpan="2" RadiusX="7" RadiusY="7" Fill="{TemplateBinding Background}">
                                <Rectangle.Stroke>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Offset="0" Color="Black" />
                                        <GradientStop Offset="1" Color="HotPink" />
                                    </LinearGradientBrush>
                                </Rectangle.Stroke>
                            </Rectangle>

                            <Rectangle Margin="3,1" RadiusX="3" RadiusY="3">
                                <Rectangle.Fill>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Offset="0" Color="#dfff" />
                                        <GradientStop Offset="1" Color="#0fff" />
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                            <ContentPresenter Grid.RowSpan="3" Margin="13,2,13,4" HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid>
        <Grid.Background>
            <RadialGradientBrush>
                <GradientStop Color="#FFF3F3F3" Offset="0"/>
                <GradientStop Color="#FFEBEBEB" Offset="0"/>
                <GradientStop Color="#FFDDDDDD" Offset="0"/>
                <GradientStop Color="#FF28BCE6" Offset="0"/>
            </RadialGradientBrush>
        </Grid.Background>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="321*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>

        </Grid.RowDefinitions>

        <ScrollViewer Grid.Column="0" Height="Auto" Width="Auto"  >
            <StackPanel Grid.Column="0" Height="Auto"  Orientation="Vertical" ScrollViewer.VerticalScrollBarVisibility="Auto">

                <StackPanel HorizontalAlignment="Left" Grid.Column="0"  Height="Auto" Width="220" >
                    <Expander Header="Master" HorizontalAlignment="Left" Grid.Column="0" FontWeight="Bold" Width="200" Height="Auto" >
                        <StackPanel ScrollViewer.VerticalScrollBarVisibility="Auto" >
                            <StackPanel HorizontalAlignment="Left" Height="Auto" Width="200" >
                                <Button Content="Category"  Margin="10,0,0,0"  Name="btnMasCat" Click="btnMasCat_Click"/>
                                <Button Content="Department" Margin="10,0,0,0" Name="btnMasDep" Click="btnMasDep_Click" />
                                <Button Content="Employee" Margin="10,0,0,0" Name="btnMasEmp"   Click="btnMasEmp_Click" />
                                <Button Content="Kitchen" Margin="10,0,0,0" Name="btnMasKit" Click="btnMasKit_Click"/>
                                <Button Content="PayMode" Margin="10,0,0,0" Name="btnMasPay" Click="btnMasPay_Click"/>
                                <Button Content="Modifier" Margin="10,0,0,0" Name="btnMasMod" Click="btnMasMod_Click"/>
                                <Button Content="PosMaster" Margin="10,0,0,0" Name="btnMasPos" Click="btnMasPos_Click"/>
                                <Button Content="Session" Margin="10,0,0,0" Name="btnMasSession" Click="btnMasSession_Click"/>
                                <Button Content="Table" Margin="10,0,0,0" Name="btnMasTable" Click="btnMasTable_Click"/>
                                <Button Content="Tax" Margin="10,0,0,0" Name="btnMasTax" Click="btnMasTax_Click"/>
                                <Button Content="Discount" Margin="10,0,0,0" Name="btnMasDis" Click="btnMasDis_Click"/>
                                <Button Content="ItemMaster" Margin="10,0,0,0" Name="btnMasItem" Click="btnMasItem_Click"/>
                                <Button Content="Shift" Margin="10,0,0,0" Name="btnMasShift" Click="btnMasShift_Click"/>
                                <Button Content="User" Margin="10,0,0,0" Name="btnMasUser" Click="btnMasUser_Click"/>
                                <Button Content="RoomMaster" Margin="10,0,0,0" Name="btnMasRoom" Click="btnMasRoom_Click"/>
                                <Button Content="Unit" Margin="10,0,0,0" Name="btnMasUnit" Click="btnMasUnit_Click"/>
                            </StackPanel>
                        </StackPanel>

                    </Expander>
                    <Expander Header="Transaction" HorizontalAlignment="Left" FontWeight="Bold" Width="200" Height="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <StackPanel ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <StackPanel HorizontalAlignment="Left" Width="200" ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <Button Content="BookigTable" Margin="10,0,0,0" Name="btnBooking" Click="btnBooking_Click"/>
                                <Button Content="Button B" Margin="10,0,0,0" />
                                <Button Content="Button C" Margin="10,0,0,0" />
                                <Button Content="Button D" Margin="10,0,0,0" />
                                <Button Content="Button E" Margin="10,0,0,0" />
                            </StackPanel>
                        </StackPanel>
                    </Expander>
                    <Expander Header="Report" HorizontalAlignment="Left" FontWeight="Bold" Width="200" ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <StackPanel ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <StackPanel HorizontalAlignment="Left"  Width="200" ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <Button Content="Category" Margin="10,0,0,0"   Name="btnRepCat" Click="btnRepCat_Click"/>
                                <Button Content="Department" Margin="10,0,0,0" Name="btnRepDep" Click="btnRepDep_Click"/>
                                <Button Content="Employee" Margin="10,0,0,0" Name="btnRepEmp" Click="btnRepEmp_Click"/>
                                <Button Content="Kitchen" Margin="10,0,0,0" Name="btnRepKit" Click="btnRepKit_Click"/>
                                <Button Content="PayMode" Margin="10,0,0,0" Name="btnRepPay" Click="btnRepPay_Click"/>
                                <Button Content="Modifier" Margin="10,0,0,0" Name="btnRepMod" Click="btnRepMod_Click"/>
                                <Button Content="PosMaster" Margin="10,0,0,0" Name="btnRepPos" Click="btnRepPos_Click"/>
                                <Button Content="Session" Margin="10,0,0,0" Name="btnRepsession" Click="btnRepsession_Click"/>
                                <Button Content="Table" Margin="10,0,0,0" Name="btnRepTable" Click="btnRepTable_Click"/>
                                <Button Content="Tax" Margin="10,0,0,0" Name="btnRepTax" Click="btnRepTax_Click"/>
                                <Button Content="Discount" Margin="10,0,0,0" Name="btnRepDis" Click="btnRepDis_Click"/>
                                <Button Content="ItemMaster" Margin="10,0,0,0" Name="btnRepItem" Click="btnRepItem_Click"/>
                                <Button Content="Shift" Margin="10,0,0,0" Name="btnRepShift" Click="btnRepShift_Click"/>
                                <Button Content="User" Margin="10,0,0,0" Name="btnRepUser" Click="btnRepUser_Click"/>
                                <Button Content="RoomMaster" Margin="10,0,0,0" Name="btnRepRoom" Click="btnRepRoom_Click"/>
                                <Button Content="Unit" Margin="10,0,0,0" Name="btnRepUnit" Click="btnRepUnit_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Expander>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <Frame Grid.Column="1"  NavigationUIVisibility="Hidden"   Margin="0,0,0,0" Name="frame1"  >
            <Frame.Background>
                <RadialGradientBrush >
                    <GradientStop Color="#FFF3F3F3" Offset="0"/>
                    <GradientStop Color="#FFEBEBEB" Offset="0"/>
                    <GradientStop Color="#FFDDDDDD" Offset="0"/>
                    <GradientStop Color="#FF28BCE6" Offset="0"/>
                </RadialGradientBrush>
            </Frame.Background>            
        </Frame>
    </Grid>    
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:14:40.053

当您将 frame1 的内容设置为 UserControl 的实例时，它将采用框架的大小。您觉得它没有被最大化的原因是因为您在 UserControl 中设置了元素的高度和宽度（如 ScrollViewer 宽度）。只需将 UserControl 的背景设置为某种颜色，在运行时您会看到它占用了框架的大小。但是用户控件中的内容并没有占用用户控件的大小。

WPF 布局与 Winforms 不同，专门设置所有控件的高度和宽度不是一个好习惯。控件根据其内容呈现自己。

# android - Android：对所有版本的 android 应用相同的外观和感觉？

> ID：15563739
> 
> 赞同：2
> 
> 时间：2013-03-22T06:03:32.213
> 
> 标签：android

在这里，我将解释整个应用程序，我从 ActionBar 样式生成器创建了 ActionBar，并将该样式添加到我的应用程序中。我正在使用 SherLockLibrary 来支持所有 android 版本。我确实应用了清单文件中的样式，例如 android:theme="@style/Theme.Customtheme"。但是在 >3.0 的版本和 <3.0 的版本上，ui 的外观和感觉是不同的，您可以在下面的图 2 和图 3 中看到。我希望所有版本的 android 具有相同的外观和感觉。我在清单中写下了我自己的风格，但没有表现出相同的外观和感觉。在我的应用程序中，有四个类第一个活动扩展了 SherlockFragmentActivity，另外两个是扩展了 SherlockListFragment 的片段。

任何人都有其他选择来做上述事情，请为我提供很好的解决方案来解决 android 版本的兼容性和外观问题。
我看了很多，我在 stackoverflow 上问了 2 次问题，但没有得到正确的答案。我可能无法提出完美的问题，所以我希望有人能给我完美的答案。提前致谢

在这里，我附上外观。图1我想要的原始样式，图2 4.2版本的视图，图3 2.3.3版本的视图

![在此处输入图像描述](../Images/19a90a0fef812f0550b012a51fda47dd.png)

以下是清单文件

```
<activity
     android:name="com.example.customactivity.CustomActivity"
     android:label="@string/projects"
     android:theme="@style/Theme.Customtheme" >
            .
            . 
```

以下是堆叠标签的布局

```
 <TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
          />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"
            />
       <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

以下是主要活动代码

```
public class CustomActivity extends SherlockFragmentActivity {
TabHost tHost;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_custom);

        tHost = (TabHost) findViewById(android.R.id.tabhost);
        tHost.setup();

        TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {
                FragmentManager fm =   getSupportFragmentManager();
                ResidentialFragment resdentialFragment = (ResidentialFragment) fm.findFragmentByTag("residential");
                CommercialFragment commercialFragment = (CommercialFragment) fm.findFragmentByTag("commercial");
                FragmentTransaction ft = fm.beginTransaction();

                if (resdentialFragment!=null) {
                    ft.detach(resdentialFragment);
                }       
                /** Detaches the commercialfragment if exists */
                if (commercialFragment!=null) {
                    ft.detach(commercialFragment);
                }
                /** If current tab is residential */
                if(tabId.equalsIgnoreCase("residential")){

                    if(resdentialFragment==null){
                        /** Create residentialFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new ResidentialFragment(), "residential");
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(resdentialFragment);
                    }

                }else{    /** If current tab is apple */
                    if(commercialFragment==null){
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new CommercialFragment(), "commercial");
                     }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(commercialFragment);
                    }
                }
                ft.commit();
            }
        };

        /** Setting tabchangelistener for the tab */
        tHost.setOnTabChangedListener(tabChangeListener);

        /** Defining tab builder for residential tab */
        TabHost.TabSpec tSpecResidential = tHost.newTabSpec("residential");
        tSpecResidential.setIndicator("Residential");
        tSpecResidential.setContent(new DummyTabContent(getBaseContext()));
        tHost.addTab(tSpecResidential);

        /** Defining tab builder for commercial tab */
        TabHost.TabSpec tSpecComm = tHost.newTabSpec("commercial");
        tSpecComm.setIndicator("Commercial");
        tSpecComm.setContent(new DummyTabContent(getBaseContext()));
        tHost.addTab(tSpecComm);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T06:19:10.840

你见过这个吗？并且 tabhost 已被贬低。使用操作栏选项卡。[http://wptrafficanalyzer.in/blog/adding-navigation-tabs- contains-listview-to-action-bar-in-android/](http://wptrafficanalyzer.in/blog/adding-navigation-tabs-containing-listview-to-action-bar-in-android/)

当然要支持所有版本，将上面的替换为sherlock活动。

# android - 在表格行中添加单选按钮并检测android中的按钮点击

> ID：15563741
> 
> 赞同：-1
> 
> 时间：2013-03-22T06:03:40.230
> 
> 标签：android, database, radio-button

我在表格行中添加一个动态`radiobutton`显示数据的行。`db`我想通过单击来编辑行`radiobutton`。如何识别`radiobutton`点击了哪一行？

```
String selquery = "select * from student";
Cursor cursor = StudentDB.rawQuery(selquery,null) ;
if(cursor != null){
    if ((cursor != null && cursor.getCount()< 1))
    {
        cursor.close();
    }else{

        int numberOfRecords = cursor.getCount();
        cursor.moveToFirst();
        TableLayout table = (TableLayout)dialog.findViewById(R.id.datatablellayout);
        for(int i=0;i< numberOfRecords;i++){
            // Inflate your row "template" and fill out the fields.
            TableRow row = (TableRow)LayoutInflater.from(SampleDbAct.this).inflate(R.layout.tablewithrow, null);
            ((TextView)row.findViewById(R.id.datatable_name)).setText(cursor.getString((cursor.getColumnIndex("name"))));
            ((TextView)row.findViewById(R.id.datatable_rno)).setText(cursor.getString((cursor.getColumnIndex("roll_number"))));
            ((TextView)row.findViewById(R.id.datatable_place)).setText(cursor.getString((cursor.getColumnIndex("place_name"))));
            ((TextView)row.findViewById(R.id.datatable_class)).setText(cursor.getString((cursor.getColumnIndex("class"))));
            ((TextView)row.findViewById(R.id.datatable_email)).setText(cursor.getString((cursor.getColumnIndex("e_mail"))));
            ((RadioButton)row.findViewById(R.id.radio_btn)).setText(cursor.getString((cursor.getColumnIndex("e_mail"))));
            table.addView(row);

            /*System.out.println("You have entered the Name as:" +cursor.getString((cursor.getColumnIndex("name")))+":");
            System.out.println("You have entered the Roll No as:" +cursor.getString((cursor.getColumnIndex("roll_number"))));
            System.out.println("You have entered the Class as:" +cursor.getString((cursor.getColumnIndex("class"))));
            System.out.println("You have entered the place as:" +cursor.getString((cursor.getColumnIndex("place_name"))));
            System.out.println("You have entered the email as:" +cursor.getString((cursor.getColumnIndex("e_mail"))));*/

            if(!cursor.isLast())
                cursor.moveToNext();
        }
        table.requestLayout();
        cursor.close();
    }
}

StudentDB.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:07:41.823

您可以通过使用 button.setOnClickListener 设置其 onClickListener 来检测单选按钮的点击。当监听器被调用时，它会传入被触摸的视图。如果仅视图还不够，您可以使用视图的标记传递一些信息，以确定行的数据（通常是数组索引或生成行的对象），使用 setTag() 和 getTag()。

# python - 如何确定用于不使用自动增量的列的 id

> ID：15563743
> 
> 赞同：0
> 
> 时间：2013-03-22T06:03:51.327
> 
> 标签：python, database, sqlite, identity

我创建了 4 个表并使用 id 将它们链接在一起。现在我如何确定使用什么作为 id？

表创建

```
import sqlite3 as lite

queries = []

queries.append([''.join('CREATE TABLE Movie',
            '(id INTEGER PRIMARY KEY,',
            'title INTEGER,',
            'genre INTEGER,',
            'cost INTEGER)')])

queries.append([''.join('CREATE TABLE Title',
            '(id INTEGER,',
            'English TEXT,',
            'Spansih TEXT,',
            'French TEXT)')])

queries.append([''.join('CREATE TABLE Genre',
            '(id INTEGER,',
            'Action INTEGER,',
            'Comedy INTEGER,',
            'Drama INTEGER',
            'Romance INTEGER)')])

queries.append([''.join('CREATE TABLE Cost',
            '(id INTEGER,',
            'Base INTEGER,',
            'Shipping INTEGER,',
            'Total INTEGER)')]) 
```

添加行

```
title_id = None # How do i determines these?
genre_id = None # Should I just use Integer Primary Key for each table id? 
cost_id = None # But then how do I get those id values to put into 

queries.append('''INSERT INTO Movies 
            (title, genre, cost) VALUES(%d, %d, %d)''' %
            (titile_id, genre_id, cost_id))

queries.append('''INSERT INTO Title
            (id, English) VALUES(%d, %s)''' %
            (title_id, 'Movie 1'))

queries.append('''INSERT INTO Genre
            (id, Action, Comedy) VALUES(%d, %d. %d)''' %
            (genre_id, 1, 1,))

queries.append('''INSERT INTO Cost
            (id, Base, Shipping, Total) VALUES(%d, %d, %d, %d)''' %
            (cost_id, 50, 8, 58))

for q in queries:
    print q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:14:58.047

```
genre_id = None # Should I just use Integer Primary Key for each table id? 
```

每个表的`id`应该是`INTEGER PRIMARY KEY`.

```
title_id = None # How do i determines these?
cost_id = None # But then how do I get those id values to put into 
```

在电影之前插入标题和成本。省略手动设置 id（即`INSERT INTO Cost(Base, Shipping, Total) VALUES (..., ..., ...)`改为）。运行插入后立即使用`cursor.lastrowid`获取最新的自动生成的 id。

# java - 有没有办法在 Java 中执行不安全的代码（禁用安全管理器）？

> ID：15563744
> 
> 赞同：9
> 
> 时间：2013-03-22T06:03:51.763
> 
> 标签：java, treemap, securitymanager, package-private

*请不要发布“你不应该这样做”的答案。我不打算在生产代码中使用它，而只是为了一些黑客的乐趣。*

在回答[这个问题](https://stackoverflow.com/a/15563410/586086)时，我想运行一些任意不安全的 Java 代码来取乐。有问题的代码只涉及查找 Java 的**叶**节点`TreeMap`。

运行以下代码会导致

```
Exception in thread "main" java.lang.SecurityException: Prohibited package name: java.util 
```

根据[这个问题](https://stackoverflow.com/q/762459/586086)，我可以`System.setSecurityManager(null)`用来绕过大部分这些限制。但我不能这样做，因为加载我的类时会弹出错误。

我已经知道在禁用安全管理器后我可以使用反射来做所有我想做的事情。但这会使代码更难看。**核心 Java 开发人员如何编写他们的单元测试，例如，如果他们不能将东西打包到`java.util`.**

我也尝试过`-Djava.security.manager=...`，但是当我将它设置为 时，这会导致 JVM 初始化错误`null`，而且我不确定我还能将它设置为什么。有任何想法吗？

```
package java.util;

import java.util.TreeMap.Entry;

public class TreeMapHax {

    static <K,V> List<Entry<K, V>> getLeafEntries(TreeMap<K, V> map) {      
        Entry<K, V> root = map.getFirstEntry();
        while( root.parent != null ) root = root.parent;

        List<Entry<K,V>> l = new LinkedList<Entry<K,V>>();
        visitInOrderLeaves(root, l);
        return l;
    }

    static <K,V> void visitInOrderLeaves(Entry<K, V> node, List<Entry<K, V>> accum) {       
        if( node.left != null ) visitInOrderLeaves(node.left, accum);       
        if( node.left == null && node.right == null ) accum.add(node);      
        if( node.right != null ) visitInOrderLeaves(node.right, accum);
    }

    public static void main(String[] args) {
        TreeMap<String, Integer> map = new TreeMap<String, Integer>();

        for( int i = 0; i < 10; i++ )
            map.put(Integer.toString(i), i);

        System.out.println(getLeafEntries(map));
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:59:30.490

简单地回答你的问题，没有通常的方法

java.* 中的类不受安全管理器的限制，它们受类加载器的限制。

做你想做的事，你需要找到一种方法来破解 jvm。或者就像你提到的那样，通过反思来做。或者只是在您自己的包中创建树图的副本（源克隆）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:58:43.267

我认为您可以尝试为您的自定义 Java 包创建 jar 并将其放入 $JRE_HOME/lib/ext 并看到魔法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:33:06.413

如果您创建了一个自定义[java.lang.SecurityManager](http://hg.openjdk.java.net/jdk6/jdk6/jdk/raw-file/2d585507a41b/src/share/classes/java/lang/SecurityManager.java)并删除了所有安全逻辑，并将其编译到自定义 JVM 中，您应该能够通过将“java.security.manager”属性设置为自定义管理器来引用它。

[由于启动器在您的程序启动](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/ffa98eed5766/src/share/classes/sun/misc/Launcher.java)之前读取该属性，因此您必须将自定义 SecurityManager 放在 JVM 认可的类路径中，而不是您自己的程序中（例如捆绑在核心[rt.jar](http://www.findjar.com/class/java/lang/SecurityManager.html)文件中）。

回答您关于核心开发人员如何处理此问题的问题：此类测试可能会针对自定义 JVM 运行，因为它们不遵守生产 JVM 的传统安全性。可以在[此处](http://hg.openjdk.java.net/jdk7/jsn/jdk/file/fa4df2d26d9b/test/java/rmi/activation/ActivationSystem/stubClassesPermitted/StubClassesPermitted.java)找到此类存根的一个示例。

# scala - akka 向远程参与者发送闭包

> ID：15563746
> 
> 赞同：7
> 
> 时间：2013-03-22T06:03:54.780
> 
> 标签：scala, akka, actor

**背景**

我想向远程演员发送闭包。远程参与者应该对其数据运行闭包并发回结果。 *可能是不可取的，但出于好奇，这就是我现在想做的*

但是我观察到，如果一个闭包是作为匿名函数创建的，它也会捕获外部对象并尝试对其进行编组，如果外部对象不可序列化，则会失败，就像在这种情况下一样。

```
class Client(server: ActorRef) extends Actor {

  var every = 2

  override def preStart() = {
    println("client started. sending message....")
    server ! new Message((x) => x % every == 0)
  }

} 
```

上面的代码在调用远程参与者时会产生异常。我可以在方法中定义一个局部变量`preStart()`

`val every_ = every`

并使用它代替演员成员变量。但我觉得这是一种解决方法而不是解决方案。如果关闭更复杂一点，我将不得不非常小心。

另一种方法是定义一个继承自的类`Function1[A,B]`并将其实例作为闭包发送。

```
class MyFunc(every : Int) extends Function1[Int,Boolean] with Serializable {

  def apply(v1 :Int) : Boolean = {
    v1 % every == 0
  }  
}

server ! new Message(new MyFunc(every)) 
```

但这将闭包定义与使用它的地方分开，并违背了使用函数式语言的整个目的。并且也使得定义闭包逻辑更加困难。

**具体查询**

当我从本地定义的闭包创建实例时，有没有办法可以推迟定义主体`Function1.apply`并分配主体？`apply``MyFunc`

例如

```
server ! new Message(new MyFunc(every){ // not valid scala code
  x % every == 0
}) 
```

`every`局部变量在哪里？

基本上我想结合这两种方法，即将一个对象发送`Function1`到远程参与者，其主体由在创建实例`Function1`的地方定义的匿名函数定义。`Function1`

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T18:03:07.440

当然，你可以将行为发送给演员，但这被认为是一种不好的做法，你的问题是对问题的一个很好的回答：“为什么”。

正如 BGR 指出的那样，[文档](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Actor_Best_Practices)中有关于此问题的特殊部分，但没有示例。

因此，当您将闭包作为消息发送时，您会发送一些额外的“隐式”状态。正如文档中所说，它可能不是可变的，但即使在这种情况下，它也会产生问题。

scala 的问题在于它不是严格意义上的函数式语言——它是多范式语言。换句话说，您可以将功能范式代码与命令式代码并排。没有这样的问题，例如haskell，它是纯函数式的。

如果您的“特定查询”，我会建议您使用一组预定义的函数。这完全等同于带有闭包的变体，但语法有点啰嗦。由于您在运行时不生成代码，因此您使用的所有函数都在有限集合中定义，并且（看起来）按值参数化。这使您的代码不像闭包那样灵活，但最终它将是等效的情况。

所以，作为我所有帖子的主旨：如果你要将行为发送给演员，它应该是坚如磐石的原子（意思是没有任何依赖关系）

# wordpress - 获取 wordpress 类别子项的 slug 和 id

> ID：15563749
> 
> 赞同：0
> 
> 时间：2013-03-22T06:04:08.637
> 
> 标签：wordpress, categories, children

我得到了我的类别孩子之一的蛞蝓和 id。

不知道如何从所有孩子那里获取蛞蝓和身份证。

```
$incat = get_category_by_slug("my-category");

    foreach((get_the_category()) as $inchild):

      if (cat_is_ancestor_of($incat, $inchild)):

         $my_category_name = strtolower( str_replace(" ", "-", $inchild->slug) );
         $my_category_id = $inchild->cat_ID;

      endif;

    endforeach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:36:51.337

您可以使用

`get_categories('child_of=X')`;

其中“X”是您的父类别名称..

它将返回一个可以通过 foreach 操作的数组。

有关更多信息，您可以结帐 - [http://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)

# android - 如何使用 iText 将背景图像设置为 PDF 页面？

> ID：15563750
> 
> 赞同：1
> 
> 时间：2013-03-22T06:04:25.037
> 
> 标签：android, itext

我`iText`用于创建`pdf`，我需要将背景图像设置为第一`pdf` 页但图像是高分辨率的，如何在不降低图像质量的情况下设置背景图像。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T13:45:20.640

可以通过将图像设置在绝对位置并将页面大小设置为背景图像来解决此问题，并且不要忘记将图像放在正确的 dpi 文件夹中:)

```
private void setBackground(Document document) {
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    Bitmap bitmap = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.background_img);
    bitmap.compress(Bitmap.CompressFormat.JPEG , 100, stream);
    Image img;
    try {
        img = Image.getInstance(stream.toByteArray());
        img.setAbsolutePosition(0, 0);

        document.add(img);
    } catch (BadElementException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (DocumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

# ksh - 数组+=值在 ksh 中不起作用？

> ID：15563753
> 
> 赞同：2
> 
> 时间：2013-03-22T06:04:38.103
> 
> 标签：ksh

我在某处读到 ksh 的数组支持`+=`追加新元素，但我试过了，但它不起作用：

```
[ksh] # arr=(a b c d)
[ksh] # arr+=e
[ksh] # echo ${arr[*]}
ae b c d
[ksh] # 
```

为什么会`arr[0]`变成`ae`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:15:36.390

要将元素添加到数组中，应该是这样的：

```
arr+=(e) 
```

通过这样做`arr+=e`，它将添加到数组的第一个元素。这是因为只有名称`arr`指向数组本身的第一个元素：

```
$ arr=(a b c d)
$ echo ${arr[0]}
a
$ echo $arr
a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T06:45:07.747

是`arr+=(e)`。任何未指定索引的简单赋值总是引用第零个元素。

请注意，这是一个微不足道的案例，事情可能会变得更加复杂。`+=`根据上下文的不同，简单赋值和复合赋值有不同的行为，并且在 bash、ksh93 和 zsh 之间也有不同，因此很容易混淆。

[http://wiki.bash-hackers.org/syntax/arrays#storing_values](http://wiki.bash-hackers.org/syntax/arrays#storing_values)

# java - 查找单个字符串中每个单词的平均字符

> ID：15563756
> 
> 赞同：1
> 
> 时间：2013-03-22T06:04:44.827
> 
> 标签：java

我有点卡在这个问题上。我试图在一个字符串中存储 1 个或多个单词，找到所有单词组合的长度，然后将其除以单词数以找到平均值。我需要在 while 循环中执行此操作（这是作业的目标）

当我输入“Hello my name is”时，它返回的长度为

```
Result:  
5  
2  
4  
2 
```

但我想要的是添加这些结果，然后将其除以单词的数量

```
5+2+4+2 = 13  
13/4 = 3.25 
```

这是我到目前为止所拥有的：

```
Scanner in = new Scanner(System.in);

int counter = 0;
double sum = 0;

while (in.hasNext()) {
    String word = in.next();
    double totalchar = word.length();
    sum = totalchar + sum;
    counter++;

    double average = 0;
    if (counter > 0) {
        average = sum / counter;

    }
    System.out.println(average);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:12:48.137

只需将`average`计算和打印移出`while`循环：

```
while (in.hasNext()) {
    String word = in.next();
    if (word.equals("exit")) {
        break;
    }
    double totalchar = word.length();
    sum = totalchar + sum;
    counter++;
}
double average = 0;
if (counter > 0) {
    average = sum / counter;
}
System.out.println(average); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:18:47.377

也许这对您有帮助：您必须从while 循环**之外**
移动计算， 否则每次都会计算和打印！ `average`

 **我也改进了一点。（你不需要每次都加倍）

```
Scanner scanner = new Scanner(System.in);

int sum = 0;
int counter = 0;

while (in.hasNext())
{
    sum += in.next().length();
    counter++;
}

double average = 0.0;
if (counter > 0)
    average = sum / counter;

System.out.println(average); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:21:22.003

请参阅下面的增强版本：

```
 int counter = 0;
    int sum = 0; // not yet needed to be of type double
    String word = null;

    while (in.hasNext()) {
        word = in.next();
        sum += word.length();
        counter++;
    }

    double average = 0;
    if (counter > 0) {
        average = sum / counter;
    }
    System.out.println(average); 
```

当它们将在循环中重新分配时，请**在外部**声明变量。

将您的计数器检查放在循环内是不好的，因为您将一遍又一遍地创建平均值以及检查计数器是否为 0。
这样，它会减慢您的处理周转时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T06:37:16.350

以下示例使用 BufferedReader：

```
import java.util.*;
import java.io.*;
class WordAmount {
public static void main(String... args) throws IOException{
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
String line = "";

while((line=br.readLine())!=null) {
   if(line.length() > 0) {
   String[] words = line.split(" ");
   int totalWords = words.length;
   int totalChars = 0;
   System.out.println("Number of words: "+totalWords);
   for(int i=0;i<words.length;i++) {
      System.out.println("Length 0f "+words[i]+" : "+words[i].length());
      totalChars += words[i].length();
   }
   System.out.println("Average count :"+ ((double)totalChars/totalWords));
  }
}
}
} 
```**

# c# - 使用itextsharp合并各种组件以在c#中创建pdf

> ID：15563759
> 
> 赞同：0
> 
> 时间：2013-03-22T06:04:47.430
> 
> 标签：c#, itextsharp

我在 C# 中有一个面板，其中包含各种组件，如图片框和数据网格视图。我希望创建一个包含整个 datagridview 和图片框的 pdf。目前，只有 datagridview 或图片框出现在 pdf 中。将两者合并在一起是不可能的。我正在使用 iTextSharp 创建 pdf。我的代码如下..

```
 string strFileName;

        string FontPath = "C:\\WINDOWS\\Fonts\\simsun.ttc,1";

        int FontSize = 12;

        ///

        Boolean cc = false;
        SaveFileDialog savFile = new SaveFileDialog();
        savFile.AddExtension = true;
        savFile.DefaultExt = "pdf";
        savFile.Filter = "PDF Document|*.pdf|*.pdf|";

        savFile.ShowDialog();

        if (savFile.FileName != "")
        {
            strFileName = savFile.FileName;
        }
        else
        {
            MessageBox.Show("export stop", "export stop", MessageBoxButtons.OK, MessageBoxIcon.Information);
            return;
        }

        iTextSharp.text.Image jpg= iTextSharp.text.Image.GetInstance(Properties.Resources.templete3, System.Drawing.Imaging.ImageFormat.Png);

        jpg.ScaleToFit(750, 850);
        jpg.SetAbsolutePosition(0, 0);

        // Page site and margin left, right, top, bottom is defined
        Document pdfDoc = new Document(PageSize.A4);//, 10f, 10f, 10f, 0f);

        //If you want to choose image as background then,

        PdfWriter writer = PdfWriter.GetInstance(pdfDoc, new FileStream(strFileName, FileMode.Create));

        BaseFont baseFont = BaseFont.CreateFont(FontPath, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);

        iTextSharp.text.Font font = new iTextSharp.text.Font(baseFont, FontSize);

        pdfDoc.Open();

        PdfPTable table = new PdfPTable(dataGridView1.Columns.Count);

        for (int j = 0; j < dataGridView1.Columns.Count; j++)
        {
            table.AddCell(new Phrase(datagridview[j, 0].Value.ToString(), font));
        }

        table.HeaderRows = 1;

        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            for (int j = 0; j < dataGridView1.Columns.Count; j++)
            {
                try
                {
                    table.AddCell(new Phrase(dataGridView1[j, i].Value.ToString(), font));
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                    cc = true;
                }
            }
        }

        pdfDoc.NewPage();

        pdfDoc.Add(jpg);

        pdfDoc.Add(table);
        pdfDoc.Close();

        Process.Start(strFileName);

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:54:56.100

这不是一个答案（还）。您的代码似乎是一个更大项目的一部分，并且有很多与特定问题无关的无关代码。诊断此类问题的第一步是删除所有不必要的内容，以便我们可以实际重现您的问题。下面是这样做的尝试。

该代码首先根据您告诉我们的内容创建一个示例环境。首先，它创建一些示例数据并将其添加到`DataGridView`. 然后它将现有图像加载到`PictureBox`. 然后它将这两个控件添加到新创建的`Panel`. 在这些步骤之后，它会创建一个 PDF，从 中获取图像，`PictureBox`从表格中获取数据并将所有这些添加到 PDF 中。有关详细信息，请参阅代码中的注释。当我运行此代码时，我会在我的 PDF 中得到一个表格和一个图像。

如果您运行此代码，请**开始一个全新的项目 - 不要使用您现有的项目**。我怎么强调都不过分。不要选择此代码的一部分来运行，开始一个新项目并将其用于您的代码，并且仅将其用于您的代码。如果这可行，那么希望您可以开始比较工作代码和非工作代码之间的差异。

此代码在 VS Express 2012 For Windows Desktop 中针对 iTextSharp 5.4.0 进行了测试。

```
using iTextSharp.text;
using iTextSharp.text.pdf;
using System;
using System.Collections.Generic;
using System.Drawing;
using System.IO;
using System.Windows.Forms;

namespace WindowsFormsApplication20 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }
        //Used for our sample data
        public class Person {
            public string FirstName { get; set; }
            public string LastName { get; set; }
        }

        private void Form1_Load(object sender, EventArgs e) {
            //Sample image, set to a PNG
            var sampleImagePath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "sample.png");
            //Full path to the PDF to export
            var exportFilePath = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf");

            //Next we're going to create all of the basic controls per the OP's scenario

            //Create some sample data to put into our DGV
            var P1 = new Person() { FirstName = "Alice", LastName = "Cooper" };
            var P2 = new Person() { FirstName = "Bob", LastName = "Dole" };
            var People = new List<Person>(new Person[] { P1, P2 });

            //Create our sample DataGridView
            var dataGridView1 = new DataGridView();
            dataGridView1.AutoGenerateColumns = true;
            dataGridView1.DataSource = People;
            dataGridView1.Location = new Point(0, 0);

            //Create our sample PictureBox
            var PB = new PictureBox();
            PB.Load(sampleImagePath);
            PB.Location = new Point(400, 0);
            PB.SizeMode = PictureBoxSizeMode.AutoSize;

            //Create our sample panel and give it room to show everything
            var panel = new Panel();
            panel.AutoSize = true;
            panel.Dock = DockStyle.Fill;

            //Add the above controls to our DGV
            panel.Controls.Add(dataGridView1);
            panel.Controls.Add(PB);
            //Add the DGV to the form
            this.Controls.Add(panel);

            //Basic PDF creation here, nothing special
            using (var fs = new FileStream(exportFilePath, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (var pdfDoc = new Document(PageSize.A4)) {
                    using (var writer = PdfWriter.GetInstance(pdfDoc, fs)) {
                        pdfDoc.Open();

                        //Get our image (Code is mostly the OP's)
                        iTextSharp.text.Image jpg = iTextSharp.text.Image.GetInstance(PB.Image, System.Drawing.Imaging.ImageFormat.Png);
                        jpg.ScaleToFit(750, 850);
                        jpg.SetAbsolutePosition(0, 0);

                        //Create our table
                        var table = new PdfPTable(dataGridView1.Columns.Count);

                        //Add the headers from the DGV to the table
                        for (int j = 0; j < dataGridView1.Columns.Count; j++) {
                            table.AddCell(new Phrase(dataGridView1.Columns[j].HeaderText));
                        }

                        //Flag the first row as a header
                        table.HeaderRows = 1;

                        //Add the actual rows from the DGV to the table
                        for (int i = 0; i < dataGridView1.Rows.Count; i++) {
                            for (int j = 0; j < dataGridView1.Columns.Count; j++) {
                                table.AddCell(new Phrase(dataGridView1[j, i].Value.ToString()));
                            }
                        }

                        //Add our image
                        pdfDoc.Add(jpg);
                        //Add out table
                        pdfDoc.Add(table);
                        pdfDoc.Close();
                    }
                }
            }
        }
    }
} 
```

# android - 以编程方式添加具有纯色和描边的渐变

> ID：15563761
> 
> 赞同：3
> 
> 时间：2013-03-22T06:05:00.717
> 
> 标签：android, colors, drawable, gradient, shape

目前我正在使用此代码添加颜色：

```
ShapeDrawable drawable = new ShapeDrawable(new OvalShape());
drawable.getPaint().setColor(color); 
```

现在我需要将一些渐变颜色与描边一起应用（如不同颜色的边框）。我将此设置为按钮的背景。

这是我所期待的，我需要以编程方式进行。

![在此处输入图像描述](../Images/3cba541f9625fe787f3a369d10a74ec9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:14:44.523

像这样添加[RadialGradient](http://developer.android.com/reference/android/graphics/RadialGradient.html)`drawable`：

```
Shader shader = new RadialGradient(x, y, radius, color0, color1, Shader.TileMode.REPEAT);
drawable.getPaint().setShader(shader); 
```

显然，您可以互换[LinearGradient](http://developer.android.com/reference/android/graphics/LinearGradient.html)、[SweepGradient](http://developer.android.com/reference/android/graphics/SweepGradient.html)和任何参数。

以下是添加笔画的方法：

```
drawable.getPaint().setStrokeWidth(3);
drawable.getPaint().setColor(Color.WHITE);
drawable.getPaint().setStyle(Paint.Style.FILL_AND_STROKE); 
```

[嗯，我想我必须使用GradientDrawable](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)推迟到@StinePike ：

```
GradientDrawable gd = new GradientDrawable();
gd.setColor(Color.RED);
gd.setCornerRadius(10);
gd.setStroke(2, Color.WHITE);
gd.setShape(GradientDrawable.OVAL); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T06:16:05.450

使用[GradientDrawable](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html&ei=9vZLUd3VMc3HrQei7YCQDA&usg=AFQjCNEgJapsy1ctT8WcuMTHCcuu2zb0UQ&sig2=j6exONYPFxkgO0pTkHtEAA&bvm=bv.44158598,d.bmk)创建渐变

或者

你可以看到这个[答案](https://stackoverflow.com/a/4381192/931982)

# java - 如何使用java在文本文件中添加标题行

> ID：15563770
> 
> 赞同：0
> 
> 时间：2013-03-22T06:05:38.163
> 
> 标签：java, file-io

我需要在现有文本文件中添加标题行，有没有办法在不影响任何其他文件格式或结构的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:10:29.553

读取文件，添加标题并保存文件：

```
try{
    BufferedReader in = new BufferedReader(new FileReader(yourFile));
    String header = "Your Header";
    String content = "";
    while (in.ready()) {
      content += in.readLine();
    }
    in.close();

    String output = header + System.getProperty("line.separator") + content;

    FileWriter fstream = new FileWriter(YourOutputFile);
    BufferedWriter out = new BufferedWriter(fstream);
    out.write(output);  
    out.close();

  }catch (IOException e){
    System.err.println("Error: " + e.getMessage());
  } 
```

# yii - Yii ClistView 分页不起作用

> ID：15563775
> 
> 赞同：0
> 
> 时间：2013-03-22T06:06:06.673
> 
> 标签：yii, pagination

我的 Clistview 分页无法正常工作。我尝试了一切但仍然没有成功。这是我的模型函数：

```
public function getallone()
{
    $criteria = new CDbCriteria;
    $criteria->select   =   "t.id"; 
    $criteria->condition = "t.featured=1 AND t.status = 1";
            return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
                'pagination' => array('pageSize' => 25),

    ));
} 
```

我仍然每页只有 10 个项目，但我想要 25 个。我尝试了 2 个项目，但它也不起作用。有什么问题吗？没找到。

这是我的视图代码：

```
<?php $this->widget('zii.widgets.CListView', array(
        'dataProvider'=>$model->getallone(),
        'itemView'=>'_allone',

        'enablePagination' => true,
        )); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:35:59.853

尝试使用`CArrayDataProvider`

这是怎么做的：

```
public function actionIndex() {
        $command = Yii::app()->db->createCommand("
            SELECT u.id as u_id, u.link as u_link, u.title as u_title, u.description as u_description, u.public as u_public, u.created as u_created, u.status as u_status, w.id as w_id, w.domain as w_domain, w.status as w_status
            from url as u
            left join website as w
                on w.id = u.website_id
            where u.title!='null' and u.status = 1 and w.status = 1 and u.public = 1;
            ");
        $news = $command->queryAll();
        $dataProvider = new CArrayDataProvider($news, array(
                    'id' => 'user',
                    'keyField' => 'u_id',
                    'sort' => array(
                        'defaultOrder' => 'u_id desc',
                    ),
                    'pagination' => array(
                        'pageSize' => 10,
                    ),
                ));
        $model_website = Website::model()->findAllByAttributes(array('status' => 1), array('limit' => 30, 'order' => 'id desc'));
        $this->render('index', array(
            'model_website' => $model_website,
            'dataProvider' => $dataProvider,
        ));
    } 
```

和 clistview：

```
 $this->widget('zii.widgets.CListView', array(
        'dataProvider' => $dataProvider,
        'template' => "{summary}\n{pager}\n{items}\n{summary}\n{pager}",
        'itemView' => '_index',
        'pager' => array(
            'maxButtonCount' => 10,
        ),
            )
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:03:16.790

你应该试试这个以获得更好的分页选项

```
$condition='type=:type';
$dataArray[':type']=$type;
$dataProvider=new CActiveDataProvider('modelname', array(
        'criteria'=>array(
         'select'=>'*',
            'condition'=>$condition,
            'params'=>$dataArray,
            'order'=>'id DESC',
            'offset'=>($page-1)*$limit,
            'limit'=>$limit,
         ),
        'pagination'=>array(
            'pageSize'=>$limit,

    ),
    ));

  $totalActivity= $dataProvider->getTotalItemCount(); 
```

[http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider)供参考

# mysql - SQL：从两列中选择值并显示为一列

> ID：15563783
> 
> 赞同：0
> 
> 时间：2013-03-22T06:06:52.663
> 
> 标签：mysql, sql, sql-server-2008

`LATITUDE`并且`LATITUDE`是我的两列。

我必须将这两列合并为一列。

我必须将这两列组合为点值。

我试过这个..,

```
SELECT `LATITUDE`, (LATITUDE) + ' ' + LONGITUDE+) AS point
FROM incident_google 
```

但它不工作。

如何将这两列合并为一列？

```
EX: LATITUDE= 38.8994816000000014,LONGITUDE=-76.9785097000000036 
```

我需要作为

```
(38.8994816000000014,76.9785097000000036) as point 
```

并为此说出答案..，

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:15:23.320

使用如下，

```
 SELECT LATITUDE, concat(LATITUDE,',' ,LONGITUDE) AS point FROM incident_google 
```

参考：[http ://www.tutorialspoint.com/mysql/mysql-concat-function.htm](http://www.tutorialspoint.com/mysql/mysql-concat-function.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:09:29.077

在mysql中

```
select CONCAT(LATITUDE, ",", LONGITUDE) as point FROM incident_google 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:11:16.680

尝试这个：

```
SELECT LATITUDE, '('+Convert(varchar(30),LATITUDE) + ',' + Convert(varchar(30),LONGITUDE)+')' AS point FROM incident_google 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:15:55.310

选择 '(' + convert(varchar(50),LATITUDE) + ',' + convert(varchar(50),LONGITUDE) + ')' 作为 Point FROM event_google

# assembly - 了解汇编的一般原因是什么？

> ID：15563785
> 
> 赞同：1
> 
> 时间：2013-03-22T06:06:55.110
> 
> 标签：assembly, operating-system, x86, mips, interrupt-handling

[当我RTFM](http://www.altera.com/literature/hb/nios2/n2cpu_nii51003.pdf)时，AFAIK 中断处理必须在汇编中实现。

> eret 指令用于在预异常地址处恢复执行。

这个原因是否也可以推广到 x86，即无论芯片是什么，您都无法编写没有汇编指令的操作系统？这是实际结果还是理论上证明？汇编语言和其他语言之间是否存在一些导致这种差异的主要差异？我推测汇编语言没有所谓的[BNF](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)，这是真的吗？是不是说汇编语言没有所谓的上下文无关文法，汇编语言不是用yacc、bison、flex、lex实现的，而是更像是按照硬件芯片来实现的？

我正在使用的低级代码看起来像这样，我想知道为什么它不能在 C（或 Java 等）中完成，因为这些结果似乎与 2 个图灵完整实现可以解决相同的问题相矛盾，所以如果语言 A 是图灵完备且语言 B 也是图灵完备的，那么 A 能够解决的任何问题也可以用语言 B 解决。

请如果你能教我这些概念，因为我认为我可以自己学习个别指令，但我不知道如何回答关于汇编编程的一般问题，例如被问到为什么我用汇编而不是 C 来做，那么为什么用 C而不是 OOP 等等。

```
################################################################
#
# Definitions for important devices and addresses in this system.
#

# Uart_0 at 0x860

.equ de2_uart_0_base,0x860

# Timer_1 at 0x920, interrupt index 10 (mask 2^10 = 0x400)

.equ de2_timer_1_base,0x920
.equ de2_timer_1_intmask,0x400

# Timeout value for 0,1 ms tick-count interval (CHANGED in every version)

.equ de2_timer_1_timeout_value,4999

# Required tick count per time-slice, meaning
# the number of timer-interrupts before a thread-switch is performed

.equ oslab_ticks_per_timeslice,100

# Interrupt address at 0x800020

.equ de2_nios2_interrupt_address,0x800020

#
# End of device-address definitions
#
################################################################

################################################################
#
# Definition of variables for keeping system time etcetera.
#

.data
.align 2
.global oslab_internal_globaltime
oslab_internal_globaltime:  .word 0

# Definition of variable for remembering the number of
# timer-interrupts since the last thread-switch

.data
.align 2
.global oslab_internal_tickcount
oslab_internal_tickcount:   .word 0

# Definition of system (interrupt) stack, sp, and gp

.data
.align 2
oslab_internal_gp:  .word 0
oslab_internal_sp:  .word 0
oslab_system_stack: .fill 256,1,0
oslab_system_stacktop:

# Definition of the end-of-timeslice message.

oslab_internal_yield_message:
                    .asciz "\n#### Thread yielded after using %d tick%c."

#
# End of system-time variable definitions.
#
################################################################

################################################################
#
# Interrupt handling code.
#

# Stub for interrupt handler

.text
oslab_internal_stub:
    movia   et,oslab_exception_handler
    jmp     et

# The interrupt handler

oslab_exception_handler:
    # Check source of exception, following the procedure
    # described in the Nios II Processor Reference Handbook.

    rdctl   et,estatus      # Check ESTATUS
    andi    et,et,1         # Test EPIE
    beq     et,r0,oslab_exception_was_not_an_interrupt
    rdctl   et,ipending     # Check IPENDING
    beq     et,r0,oslab_exception_was_not_an_interrupt

    # If control comes here, we have established that the
    # exception was caused by an interrupt.
    # Subtract 4 from ea, so that the interrupted instruction
    # will be re-run when we return.

    subi    ea,ea,4

    # Check the source of the interrupt.
    # Possible source No. 1: Timer_1 (currently the only source).

    rdctl   et,ipending
    andi    et,et,de2_timer_1_intmask
    bne     et,r0,oslab_timer_1_interrupt

    # If control comes here, we have an interrupt from an unknown source.
    # This condition is IGNORED in this version of OSLAB.

    eret

oslab_exception_was_not_an_interrupt:

    # Test if the interrupted instruction was a TRAP

    subi    sp,sp,4         # PUSH r8 (instruction 1)
    stw     r8,0(sp)        # PUSH r8 (instruction 2)

    movia   r8,0x003b683a   # binary code for TRAP
    ldw     et,-4(ea)       # Load interrupted instruction
    cmpeq   et,et,r8        # Compare to binary code for TRAP

    # Result from comparison is now in et.

    ldw     r8,0(sp)        # POP r8 (instruction 1)
    addi    sp,sp,4         # POP r8 (instruction 2)

    # Use the comparison result in et as branch condition.
    # The value in et will also be used later, to tell if the
    # exception was a trap or an interrupt.

    bne     et,r0,oslab_trap_handler

    # If control comes here, we have an exception which was not a TRAP.
    # This should not normally happen.
    # However, someone writing programs for the OSLAB micro-operating system
    # could perhaps use unimplemented instructions. To catch unimplemented
    # instructions, we insert a BREAK instruction here. This will stop execution
    # unless the program is run through the debugger.

    break 0
    eret

oslab_timer_1_interrupt:

    # Acknowledge the timer_1 interrupt.

    movia   et,de2_timer_1_base
    stw     r0,0(et)

    # Save contents of R8, to get a free register for
    # temporary values.

    subi    sp,sp,4
    stw     r8,0(sp)        # PUSH r8

    # Increase system clock.

    movia   r8,oslab_internal_globaltime
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Increase tick counter.

    movia   r8,oslab_internal_tickcount
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Restore original contents of R8.

    ldw     r8,0(sp)        # POP r8
    addi    sp,sp,4

    # Check value of tick counter,
    # against the required number of ticks per time-slice.
    # Note: oslab_ticks_per_timeslice is an assembler constant,
    # and not a variable. Hence, no load/store-instructions here.

    subi    et,et,oslab_ticks_per_timeslice

    # If the result from the subtraction is zero (or perhaps positive),
    # then it is time to switch threads.

    bge     et,r0,oslab_time_to_switch

    # If we fall-through here, then we have had one of those many
    # timer interrupts on which we should not switch threads.
    # Return to caller.

    eret

oslab_time_to_switch:

    # This code will now fall-through into the TRAP handler
    # which performs a context switch.
    #
    # We will print out a message for each timer interrupt.
    # To be able to tell that we had a timer interrupt, and not
    # a TRAP, we set et to zero.

    movi    et,0

oslab_trap_handler:

    # Save registers r1 through r23, plus fp, gp, ra and ea

    .set noat               # R1 is used here.
    subi    sp,sp,108       # Make room for all registers. 
    stw     r1, 4(sp)       # R1 is saved in slot 1, not slot 0.
    stw     r2, 8(sp)
    stw     r3,12(sp)
    stw     r4,16(sp)
    stw     r5,20(sp)
    stw     r6,24(sp)
    stw     r7,28(sp)
    stw     r8,32(sp)
    stw     r9,36(sp)
    stw    r10,40(sp)
    stw    r11,44(sp)
    stw    r12,48(sp)
    stw    r13,52(sp)
    stw    r14,56(sp)
    stw    r15,60(sp)
    stw    r16,64(sp)
    stw    r17,68(sp)
    stw    r18,72(sp)
    stw    r19,76(sp)
    stw    r20,80(sp)
    stw    r21,84(sp)
    stw    r22,88(sp)
    stw    r23,92(sp)
    stw    r26,96(sp)
    stw    r28,100(sp)
    stw    r31,104(sp)
    stw     ea,0(sp)        # Special case, saved in slot 0.

    mov     r4,sp           # Copy stack pointer to param1 register
    movia   sp,oslab_system_stacktop     # Use system stack instead

    # Test et to see if this was a timeout event or a TRAP.

    beq     et,r0,oslab_not_a_trap

    # If this was a trap event, we fall through here.
    # Our simplified printf is used to print a message,
    # saying that the previous thread yielded parts of its time-slice.

################################################################
#
#   The following code prints a nice message. Nothing more.
#   This code saves and restores all registers it uses.
#   You can safely ignore the following code, up to
#   (but NOT including) the label oslab_not_a_trap.
#
    subi    sp,sp,4         # Contents of r4 must be preserved.
    stw     r4,0(sp)        # PUSH r4.

    movia   r4,oslab_internal_yield_message
    movia   r5,oslab_internal_tickcount
    ldw     r5,0(r5)
    movi    r6,0            # Gold-plating: check if 1 tick or several ticks.
    subi    et,r5,1         # Do not print the s if only 1 tick.
    beq     et,r0,oslab_no_plural_ticks
    movi    r6,'s'          # If 0 ticks, or 2 or more ticks, print the s.
oslab_no_plural_ticks:
    call    printf

    ldw     r4,0(sp)        # POP r4
    addi    sp,sp,4
#
#   This comment marks the end of the code for printing a nice message.
#   Now comes other code, which is potentially much more interesting.
#
################################################################

    # Move on to thread-switch code.

oslab_not_a_trap:

    # Clear tick counter, since we are going to switch threads.

    movia   et,oslab_internal_tickcount
    stw     r0,0(et)

    # Now it is time to execute the thread-switch code.
    # We use the more general callr, rather than call.

    movia   et,oslab_internal_threadswitch
    callr   et              # Call thread switch routine written in C

    mov     sp,r2           # Copy return value to stack pointer
                            # Yes, the system stack pointer is lost,
                            # but who cares? We will not need it any more.

    # restore registers
    ldw     r1, 4(sp)
    ldw     r2, 8(sp)
    ldw     r3,12(sp)
    ldw     r4,16(sp)
    ldw     r5,20(sp)
    ldw     r6,24(sp)
    ldw     r7,28(sp)
    ldw     r8,32(sp)
    ldw     r9,36(sp)
    ldw    r10,40(sp)
    ldw    r11,44(sp)
    ldw    r12,48(sp)
    ldw    r13,52(sp)
    ldw    r14,56(sp)
    ldw    r15,60(sp)
    ldw    r16,64(sp)
    ldw    r17,68(sp)
    ldw    r18,72(sp)
    ldw    r19,76(sp)
    ldw    r20,80(sp)
    ldw    r21,84(sp)
    ldw    r22,88(sp)
    ldw    r23,92(sp)
    ldw    r26,96(sp)
    ldw    r28,100(sp)
    ldw    r31,104(sp)
    ldw     ea,0(sp)        # Special case
    addi    sp,sp,108

    eret                    # Return from exception

#
# End of exception handling code.
#
################################################################

################################################################
#
# Startup code.
#
# When the system is started, Altera-supplied code initializes the
# Nios II CPU and cache memories, and then calls alt_main.
#

.global alt_main
alt_main:
    wrctl   status,r0       # Disable interrupts.
    wrctl   ienable,r0      # Clear all bits in IENABLE.

    # Now copy the stub.

    movia   r8,oslab_internal_stub
    movia   r9,de2_nios2_interrupt_address
    ldw     r10,0(r8)
    stw     r10,0(r9)
    ldw     r10,4(r8)
    stw     r10,4(r9)
    ldw     r10,8(r8)
    stw     r10,8(r9)

    # Initialize timer_1.

    movia   r8,de2_timer_1_base
    movia   r9,de2_timer_1_timeout_value
    srli    r10,r9,16
    stw     r10,12(r8)      # Write periodh
    andi    r10,r9,0xffff
    stw     r10,8(r8)       # Write periodl
    movi    r10,7           # Continuous, interrupt on timeout, and start
    stw     r10,4(r8)

    # Initialize CPU for interrupts from timer_1.

    movi    r10,de2_timer_1_intmask
    wrctl   ienable,r10
    movi    r10,1
    wrctl   status,r10

    # Call to main. Do not jump, main is a subroutine,
    # and may execute a ret instruction.

    subi    sp,sp,4
    stw     ra,0(sp)        # PUSH r31
    movia   r8,main
    callr   r8
    ldw     ra,0(sp)        # POP r31
    addi    sp,sp,4

    # If main returns, we will return directly to the routine
    # that called us (that called alt_main).

    ret

#
# End of startup code.
#
################################################################

################################################################
#
# Helper functions for initialization and thread handling.
#

.text
.align 2
.global oslab_internal_get_gp
oslab_internal_get_gp:
    mov     r2,gp
    ret

.global oslab_begin_critical_region
oslab_begin_critical_region:
    wrctl   status,r0
    ret

.global oslab_end_critical_region
oslab_end_critical_region:
    movi    r8,1
    wrctl   status,r8
    ret

.global oslab_get_internal_globaltime
oslab_get_internal_globaltime:
    movia   r2,oslab_internal_globaltime
    ldw     r2,0(r2)
    ret

.global oslab_get_internal_tickcount
oslab_get_internal_tickcount:
    movia   r2,oslab_internal_tickcount
    ldw     r2,0(r2)
    ret

.global oslab_yield
oslab_yield:
    trap
    ret

#
# End of helper functions.
#
################################################################
#
# ********************************************************
# *** You don't have to study the code below this line ***
# ********************************************************
#
################################################################
#
# A simplified printf() replacement.
# Implements the following conversions: %c, %d, %s and %x.
# No format-width specifications are allowed,
# for example "%08x" is not implemented.
# Up to four arguments are accepted, i.e. the format string
# and three more. Any extra arguments are silently ignored.
#
# The printf() replacement relies on routines
# out_char_uart_0, out_hex_uart_0,
# out_number_uart_0 and out_string_uart_0
# in file oslab_lowlevel_c.c
#
# We need the macros PUSH and POP - definitions follow.

# PUSH reg - push a single register on the stack

.macro PUSH reg
    subi sp,sp,4    # reserve space on stack
    stw  \reg,0(sp) # store register
.endm

# POP  reg - pop a single register from the stack

.macro POP  reg
    ldw  \reg,0(sp) # fetch top of stack contents
    addi sp,sp,4    # return previously reserved space
.endm

.text
.global printf
printf:
    PUSH    ra      # PUSH return address register r31.
    PUSH    r16     # R16 will point into format string.
    PUSH    r17     # R17 will contain the argument number.
    PUSH    r18     # R18 will contain a copy of r5.
    PUSH    r19     # R19 will contain a copy of r6.
    PUSH    r20     # R20 will contain a copy of r7.
    mov     r16,r4  # Get format string argument
    movi    r17,0   # Clear argument number.
    mov     r18,r5  # Copy r5 to safe place.
    mov     r19,r6  # Copy r6 to safe place.
    mov     r20,r7  # Copy r7 to safe place.
asm_printf_loop:
    ldb     r4,0(r16)   # Get a byte of format string.
    addi    r16,r16,1   # Point to next byte
    # End of format string is marked by a zero-byte.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,92    # Check for backslash escape.
    bne     r9,r0,asm_printf_backslash
    cmpeqi  r9,r4,'%'   # Check for percent-sign escape.
    bne     r9,r0,asm_printf_percentsign
asm_printf_doprint:
    # No escapes present, just print the character.
    movia   r8,out_char_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_backslash:
    # Preload address to out_char_uart_0 into r8.
    movia   r8,out_char_uart_0
    ldb     r4,0(r16)   # Get byte after backslash
    addi    r16,r16,1   # Increase byte count.
    # Having a backslash at the end of the format string
    # is illegal, but must not crash our printf code.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,'n'   # Newline
    beq     r9,r0,asm_printf_backslash_not_newline
    movi    r4,10       # Newline
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_newline:
    cmpeqi  r9,r4,'r'   # Return
    beq     r9,r0,asm_printf_backslash_not_return
    movi    r4,13       # Return
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_return:
    # Unknown character after backslash - ignore.
    br      asm_printf_loop
asm_printf_percentsign:
    addi    r17,r17,1   # Increase argument count.
    cmpgei  r8,r17,4    # Check against maximum argument count.
    # If maximum argument count exceeded, print format string.
    bne     r8,r0,asm_printf_doprint
    cmpeqi  r9,r17,1    # Is argument number equal to 1?
    beq     r9,r0,asm_printf_not_r5 # beq jumps if cmpeqi false
    mov     r4,r18      # If yes, get argument from saved copy of r5.
    br      asm_printf_do_conversion
asm_printf_not_r5:
    cmpeqi  r9,r17,2    # Is argument number equal to 2?
    beq     r9,r0,asm_printf_not_r6 # beq jumps if cmpeqi false
    mov     r4,r19      # If yes, get argument from saved copy of r6.
    br      asm_printf_do_conversion
asm_printf_not_r6:
    cmpeqi  r9,r17,3    # Is argument number equal to 3?
    beq     r9,r0,asm_printf_not_r7 # beq jumps if cmpeqi false
    mov     r4,r20       # If yes, get argument from saved copy of r7.
    br      asm_printf_do_conversion
asm_printf_not_r7:
    # This should not be possible.
    # If this strange error happens, print format string.
    br      asm_printf_doprint
asm_printf_do_conversion:
    ldb     r8,0(r16)   # Get byte after percent-sign.
    addi    r16,r16,1   # Increase byte count.
    cmpeqi  r9,r8,'x'   # Check for %x (hexadecimal).
    beq     r9,r0,asm_printf_not_x
    movia   r8,out_hex_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_x:
    cmpeqi  r9,r8,'d'   # Check for %d (decimal).
    beq     r9,r0,asm_printf_not_d
    movia   r8,out_number_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_d:
    cmpeqi  r9,r8,'c'   # Check for %c (character).
    beq     r9,r0,asm_printf_not_c
    # Print character argument.
    br      asm_printf_doprint
asm_printf_not_c:
    cmpeqi  r9,r8,'s'   # Check for %s (string).
    beq     r9,r0,asm_printf_not_s
    movia   r8,out_string_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_s:
asm_printf_unknown:
    # We do not know what to do with other formats.
    # Print the format string text.
    movi    r4,'%'
    movia   r8,out_char_uart_0
    callr   r8
    ldb     r4,-1(r16)
    br      asm_printf_doprint
asm_printf_end:
    POP     r20
    POP     r19
    POP     r18
    POP     r17
    POP     r16
    POP     ra
    ret

#
# End of simplified printf() replacement code.
#
################################################################
.end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:24:01.940

## 为什么要组装？

[组装通常与芯片的ISA](http://en.wikipedia.org/wiki/Instruction_set)具有 1:1 的关系。汇编指令通常具有以下形式：

```
<opcode> <lhs>,<rhs> 
```

这在尽可能低的级别上工作，因此程序员可以处理各个处理器功能。

汇编仍然需要一个汇编程序才能由处理器运行。[汇编器](http://en.wikipedia.org/wiki/Assembler_%28computing%29#Assembler)将符号汇编转换为处理器可以理解的二进制表示。

这类似于编译器的工作方式。在最高级别，编译器通常将源代码转换为[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，并从那里生成代码，这些代码可能是汇编、另一种语言的代码或机器代码。

## 为什么不是高级语言？

理论上可以为任何语言编写编译器以生成任意机器代码。这意味着理论上您还可以处理汇编可以访问的任何指令（例如中断），只要您的编译器知道如何解释您的更高级别的代码。

正如在[这个答案](https://stackoverflow.com/questions/12187269/access-processor-interrupts-with-c-and-x86-and-x64-architectures)中一样，大多数操作系统都会为您处理中断，并用信号将它们抽象出来。但是没有什么能阻止您自己处理它们，例如，[Arduino 使这](http://playground.arduino.cc/Code/Interrupts)在 C++ 中成为可能。然而，问题是操作系统不允许任何程序访问中断，特别是因为某些中断需要特权[CPU 模式](http://en.wikipedia.org/wiki/CPU_modes)。

此外，没有什么可以阻止您使用 OO 语言（或函数式等）来实现像内核这样的低级语言，但是语言越复杂，生成高效的机器代码就越困难，当您构建其他软件将在其上运行的软件，它需要尽可能快。您将无法使用诸如垃圾收集（这在许多 OO 语言中很常见）之类的某些功能，因为在您之后没有什么可以清理的。

## 为什么选择 C？

OO 本身并没有使它变慢的固有特性，而汇编也没有使它变快的固有特性。当您确切知道代码在做什么时，为处理器编写代码会更容易。

当你用 C 语言编写时，你只比汇编高一级。它足够高级，可以为您提供函数、结构和变量等概念，但又足够低级，您可以对生成的代码做出合理的假设。事实上，反汇编程序是优化 C 代码的好方法。尝试使用 Java 之类的东西来做到这一点！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:44:22.520

编程语言倾向于避免或最多平均化它们运行的​​处理器的能力。大多数系统上都有一些操作是必需的（从中断返回就是一个很好的例子），但不能直接用高级语言实现。有一些解决方案，一个是编译器特定的指令，在函数声明中加入一些单词中断的味道会告诉一些编译器这个函数是特殊的并且需要被包装以便它可以是一个中断处理程序，即通常不同于正常功能的框架。

因为永远不会有通用的汇编语言/指令集，你无法创建通用的高级语言特性来匹配硬件，这没有意义，仅仅用几行汇编来解决这些问题是如此微不足道，即使有一个通用指令集，我怀疑高级语言会在这些功能上浪费任何精力。

即使使用 C，也需要一定程度的引导，可能设置堆栈指针，将 .data 放在正确的位置，将 .bss 清零等。有趣的是，Cortex-M 处理器内核已经将一些东西硬编码到硬件中，这样你就可以创建几乎没有汇编的应用程序，除了 C 代码之外，只需要向量表，并且通常该向量表只是 asm 指令，但该表中可能没有 asm 指令。如果/当编译器的调用约定发生变化时，突然之间硬件不匹配并且您遇到问题，因此任何人都可以猜测它会存在多长时间。因为这些是微控制器而不是更高级别的系统，所以该解决方案无法转换。

# c++ - 如何在不使用 make 文件的情况下运行 ac 代理示例程序？

> ID：15563788
> 
> 赞同：0
> 
> 时间：2013-03-22T06:07:00.253
> 
> 标签：c++, apache, messagebroker, qpid

我想在不使用 make 文件的情况下在 apache qpid c++ 代理中运行一个 helloworld 示例。如果是这样，如何继续以及我需要包含哪些库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:11:01.787

make 是一种自动化构建步骤的工具。你可以在 Makefile 中做的所有事情也可以在命令行上完成。

我不知道apache和qpid有什么特别之处。你应该检查你的编译器和链接器手册。

最后使用 gcc 构建 hello_world 就像 gcc hello_world.c -o hello_world 一样简单

这就是全部。

# javascript - 用javascript编写html时引用问题

> ID：15563792
> 
> 赞同：0
> 
> 时间：2013-03-22T06:07:35.777
> 
> 标签：javascript, jquery, html, quotations

我正在用javascript编写一个html结构，单击链接时需要返回它。我有这样的

```
 return '<div class="contactForm">'+
'<input type="text" name="contactName" onBlur="if (this.value == "") {this.value == "Name";}" onFocus="if ((this.value == "") || (this.value == "Name")) {this.value = "";};" value="Name" style="">'+ 
```

当我在页面上看到它时，`onBlur`属性显示为**红色**并且引号放错了位置。我在页面上看到它是这样的。

```
 <input name="contactName" onblur="if (this.value == " ")="" {this.value="Name" ;}"="" onfocus="if ((this.value == " ||="" (this.value="=" "name"))="" ;};"="" value="Name" style="" type="text"> 
```

如何编写返回部分以便在 HTML 页面中正确使用它？我相信这是由于引号放错了位置。我在页面源代码中看到了这个错误，在**期望属性名称时看到了引号**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:20:42.097

您需要使用 \\\: 对字符串内的引号进行双重转义，一次用于字符串本身，一次用于内联 JavaScript。

```
return '<div class="contactForm">'+
    '<input type="text" name="contactName" onBlur="if (this.value == \\\"\\\") {this.value == \\\"Name\\\";}" onFocus="if ((this.value == \\\"\\\") || (this.value == \\\"Name\\\")) {this.value = \\\"\\\";};" value="Name" style="">'+ 
```

如果你想让它更易读，你可以使用只需要转义一次的单引号。

```
return '<div class="contactForm">'+
    '<input type="text" name="contactName" onBlur="if (this.value == \'\') {this.value == \'Name\';}" onFocus="if ((this.value == \'\') || (this.value == \'Name\')) {this.value = \'\';};" value="Name" style="">'+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:21:45.110

```
var element = '<div class="contactForm">';
element += '<input type="text" name="contactName" onBlur="if (this.value == \'\') {this.value == \'Name\';}" onFocus="if ((this.value == \'\') || (this.value == \'Name\')) {this.value = \'\';};" value="Name" style="">';
element += '</div>';

return element; 
```

# php - 使用mysql数据库在php中获取格式化日期

> ID：15563795
> 
> 赞同：-6
> 
> 时间：2013-03-22T06:07:47.140
> 
> 标签：php, mysql, sql

我想从 mysql 数据库中获取 php 格式的日期，例如 2013 年 3 月 21 日上午 11:21

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:11:27.110

您可以使用 MySQL 的内置函数`DATE_FORMAT()`

```
SELECT DATE_FORMAT(NOW(), '%D %M %Y %h:%i%p') 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9407)
*   [日期格式（）](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

输出

```
╔═════════════════════════╗
║     FORMATTED_DATE      ║
╠═════════════════════════╣
║ 22nd March 2013 06:07AM ║
╚═════════════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:11:56.620

您可以使用`DATE_FORMAT`MySQL 功能。

**例子**

```
DATE_FORMAT(NOW(),'DATEFORMATE') // DATEFORMATE can be %b %d %Y %h:%i %p 
```

**或者**

```
STR_TO_DATE('$date', 'DATEFORMATE') 
```

**如何在查询中使用**

```
SELECT STR_TO_DATE('YOUR DATE FIELD','DATEFORMAT') FROM table;

SELECT DATE_FORMAT(NOW(),'DATEFORMAT') FROM table; 
```

***[`DATEFORMATE Options`](http://davidwalsh.name/format-date-mysql-date_format)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:12:22.367

为什么不使用[MySQL 的 DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)？

对于您的示例，将其添加到您的 MySQL 查询中：

```
DATE_FORMAT(my_date, '%e %M %Y %h:%i %p') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T06:13:43.400

利用`DATE_FORMAT()`

```
SELECT * FROM table DATA_FORMAT(NOW(), '%D %M %Y %h:%i%p') 
```

[DATE_FORMAT](http://www.w3schools.com/sql/func_date_format.asp)教程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T06:10:18.160

您的数据库列是什么格式的？如果是 UNIX 时间戳，只需将其输入`date`. 如果它是日期列（格式为“YYYY-MM-DD”或“YYYY-MM-DD HH:MM:SS”），请将其输入`strtotime`，然后输入`date`。

所以，假设它是一个日期列，你会想要做这样的事情：

```
$column_value = "2013-03-01 00:00:00";    // Get this from your database however you like

$formatted_date = date("jS F Y H:i A", strtotime($column_value)); 
```

关于如何使用`date`格式化的文档在[PHP 文档中。](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T06:12:00.690

尝试这个 ：

```
$date   = date from databse // some thing like 2013-03-22 11:38:00

$dt     = new DateTime($date);
echo $dt->format('jS  F Y g:ia'); 
```

输出 ：`22nd March 2013 11:38am`

参考：[http ://www.php.net/manual/en/datetime.format.php](http://www.php.net/manual/en/datetime.format.php)

# jquery - jquery如何仅在更新隐藏输入值后运行函数

> ID：15563799
> 
> 赞同：1
> 
> 时间：2013-03-22T06:08:14.147
> 
> 标签：jquery

捷径，试试这个小提琴：http: [//jsfiddle.net/purushagovinda/VJfkx/](http://jsfiddle.net/purushagovinda/VJfkx/)

* * *

我有一个我想要正确的 jquery 代码块，以便它设置隐藏输入元素的值**（**从更改`value="keywords"`为到另一个文件 - 一个取决于隐藏输入值的文件。`value="furniture"`**`refresh_itemListerWithSearchResultsReturn();`**

 **我的代码现在成功设置了隐藏输入的值，然后触发函数，但是，在触发时，函数仍然认为隐藏输入值 =“关键字”。这让我觉得我想这样做：

```
$("#myHiddenInput").val('furniture'); 
```

...但是该行 ^^^ 有一个回调函数，我将`refresh_itemListerWithSearchResultsReturn()`函数调用*粘贴*在 .val() 回调中。所以，作为一个相对的菜鸟，我在这里查找：

[http://api.jquery.com/val/](http://api.jquery.com/val/)

...但看不到如何使用`.val();`回调函数。该文档页面上的示例显示`.val()`了一个函数调用，但该函数用于确定`val()`值本身将使用什么，而不是像我需要的那样触发回调。

对我有什么建议吗？

* * *

代码实际上如下所示：

```
$("#products_furniture_furnitureType_options > li").each(function() {
 $(this).click(function(e) {
  [snip]
  $("#dp_searchForWhichItemType_listRefresh").val('products');
  $('#bit_products_productType').val('furniture');

  $("#bit_products_productType").val("furniture").change(function(){
    alert("'#bit_products_productType' is changed now 2");
    $.refresh_itemListerWithSearchResultsReturn('itemList', false, false);
  });

  [snip]
 });
}); 
```

我也试过这个：

```
$("#products_furniture_furnitureType_options > li").each(function() {
 $(this).click(function(e) {
  [snip]
  $("#dp_searchForWhichItemType_listRefresh").val('products');
  $('#bit_products_productType').val('furniture');

  $("#bit_products_productType").change(function(){
    alert("'#bit_products_productType' is changed now 2");
    $.refresh_itemListerWithSearchResultsReturn('itemList', false, false);
  });

  [snip]
 });
}); 
```

...并且还尝试将`$("#bit_products_productType").change(function(){`to 移到`$('#bit_products_productType').val('furniture');`...

...但在任何情况下`alert("'#bit_products_productType' is changed now 2");`都不会触发。

这应该可以帮助你们集中注意力，并能够帮助我：http: [//jsfiddle.net/purushagovinda/VJfkx/](http://jsfiddle.net/purushagovinda/VJfkx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:15:16.713

你可以这样做

```
$("#myHiddenInput").val("product").change(function(){
  alert("value is changed now");
}); 
```

check : [.change()](http://api.jquery.com/change/) - 将事件处理程序绑定到“更改”JavaScript 事件，或在元素上触发该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:52:31.090

javascript 在单个线程上运行。如果您`reload function`在下一条语句上触发，您可以确定该值已经更新（不需要回调函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:16:39.660

试试这个代码...

```
 $('#hiddenfieldid').live('change', function() {  
        function1(); 
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:22:17.163

Yu 可以使用[.change](http://docs.jquery.com/Events/change)事件来满足您的要求。

```
$("#myHiddenInput").change(function() {
    alert($(this).val());
}); 
```**

# r - 向 ggplot2 热图添加缺失因子水平

> ID：15563803
> 
> 赞同：3
> 
> 时间：2013-03-22T06:08:41.603
> 
> 标签：r, ggplot2, heatmap

我有一个基于 ggplot2 的热图，可以显示某些因素的出现次数。但是，不同的数据集有时没有某些因素的实例，这意味着它们各自的热图看起来会有所不同。为了使并排比较更容易，我想添加缺失的级别。不幸的是，我没有成功。

所以，我有如下数据：

```
> head(numRules)
  Job Generation NumRules
1   0          0        2
2   0          1        1
3   0          2        1
4   0          3        1
5   0          4        1
6   0          5        1
> levels(factor(numRules$NumRules))
[1] "1" "2" "3" 
```

我使用以下代码来呈现一个漂亮的热图，它计算所有作业的每代规则数：

```
ggplot(subset(numRules, Generation < 21), aes(x=Generation, y=factor(NumRules))) + 
   stat_bin(aes(fill=..count..), geom="tile", binwidth=1, position="identity") + 
   ylab('Number of Rules') 
```

[所有作业的按生成规则数计数的热图](http://cs.gmu.edu/~mcoletti/numrules.png)

所以热图是说大多数时候运行对于给定的一代只有一个规则，但有时你会得到两个，在极少数情况下你会得到三个。

现在，对于给定的一代，一组完全不同的运行实际上可能具有零规则。但是，进行并排比较会有点混乱，因为一个热图的 y 轴具有 [1,3] 中的规则数，而另一个可能在 [0,2] 中。我想做的是标准化热图，以便它们*都*具有（0,1,2,3）中的因子级别，而不管规则的数量。例如，我想重新渲染上面的热图以包含零规则行，即使在该特定数据帧中没有这样的实例。

我已经用各种 R 咒语来解决这个问题，包括设置休息时间和音阶等等，但无济于事。我的直觉是有一个简单的解决方案，但我找不到它。

**更新**：

如果我在调用中手动指定级别，`factor`我确实会为零规则添加一行：

`ggplot(subset(numRules, Generation < 21), aes(x=Generation, y=factor(NumRules,levels=c("0","1","2","3")))) + stat_bin(aes(fill=..count..), geom="tile", binwidth=1, position="identity") + ylab('Number of Rules')`

这产生[了这个](http://cs.gmu.edu/~mcoletti/numrules2.png)。

不幸的是，正如您所看到的，这个新行没有正确着色。到达那里！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:15:05.163

如果`NumRules`您感兴趣的只是因素的水平，那么您可以通过仅指定`drop=FALSE`in来解决此问题`scale_y_discrete()`：

```
numRules = read.table(text="  Job Generation NumRules
1   0          0        2
2   0          1        1
3   0          2        1
4   0          3        1
5   0          4        1
6   0          5        1", header=TRUE)

numRules$NumRules = factor(numRules$NumRules, levels=c(1, 2, 3))

ggplot(subset(numRules, Generation < 21), aes(x=Generation, y=NumRules)) +
  scale_y_discrete(drop=FALSE) +
  stat_bin(aes(fill=..count..), geom="tile", binwidth=1, position="identity") +
  ylab('Number of Rules') 
```

结果：

![显示的所有因素](../Images/23168ed801921ab29ecc3e6776fbad19.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:54:08.543

在这种情况下，更改数据会更容易。首先，读取您的数据。然后将变量设置`NumRules`为具有所有必要级别（从 0 到 3）的因子

```
numRules = read.table(text="  Job Generation NumRules
1   0          0        2
2   0          1        1
3   0          2        1
4   0          3        1
5   0          4        1
6   0          5        1", header=TRUE)

numRules$NumRules = factor(numRules$NumRules, levels=c(0, 1, 2, 3)) 
```

现在计算 和 的每个组合出现在您的数据中的次数`NumRules`，`Generation`并将`table()`其保存到某个对象。

```
tab<-table(numRules$NumRules,numRules$Generation)
tab

    0 1 2 3 4 5
  0 0 0 0 0 0 0
  1 0 1 1 1 1 1
  2 1 0 0 0 0 0
  3 0 0 0 0 0 0 
```

使用`melt()`库中的函数`reshape2`使该表为长格式并更改列名

```
library(reshape2)
tab.long<-melt(tab)
colnames(tab.long)<-c("NumRules","Generation","Count") 
```

使用新数据框绘制数据`geom_tile()`并将其设置`fill=`为包含实际计数的列。

```
ggplot(tab.long, aes(x=Generation, y=NumRules,fill=Count)) +
    geom_tile() +
  ylab('Number of Rules') 
```

![在此处输入图像描述](../Images/50d2a74cc9539021ee8c70882156a9d6.png)

# nxbre - NxBRE- 在一个规则中访问多个

> ID：15563807
> 
> 赞同：1
> 
> 时间：2013-03-22T06:09:00.673
> 
> 标签：nxbre

我有两个 .NET 对象，Employee 和 Department。在 .xbre 文件中，我需要设置如下条件，

如果 Employee.EmpID 是 X 并且 Department.DeptID 是 Y 然后做一些事情。所以在给定的规则中，我需要访问两个对象（员工和部门）并验证条件。

如果我使用`<ObjectLookup>`，那么我知道我可以传递一个对象和字段（`Employee.EmployeeID`或`Department.DeptID`），我们可以同时访问它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:25:13.610

您走在正确的轨道上：您需要使用两个`<ObjectLookup>`构造来提取两个值并将它们存储在两个不同的变量中，例如：

```
<ObjectLookup id="EmployeeID" objectId="Employee" member="EmployeeID" />
<ObjectLookup id="DeptID" objectId="Department" member="DeptID" /> 
```

# android - 单击膨胀的线性布局内的 TextView

> ID：15563808
> 
> 赞同：4
> 
> 时间：2013-03-22T06:09:01.343
> 
> 标签：android, layout-inflater

我有一个膨胀的线性布局，其中包含 2 个 TextView。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv_m"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/ll_borders"
    android:tag="m"
    android:text="m" />

<TextView
    android:id="@+id/tv_q"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/ll_borders"
    android:tag="q"
    android:text="q" />
</LinearLayout> 
```

我想要的是，当这个线性布局被膨胀时，我想得到`TEXTVIEW`我点击的唯一一个。例如，如果我点击“ `tv_m`”，那么它只会返回我的文本`tv_m`。
可能它很简单，但我没有办法解决它。所以我需要帮助。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:14:59.820

膨胀布局后，得到如下的 textview 对象

```
LinearLayout layout = inflater.inflate(<your layout name>, null);
TextView textView1 = layout.findViewById(R.id.tv_m));
TextView textView2 = layout.findViewById(R.id.tv_q));
String selectedText;
textView1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
             selectedText = textView1.getText().toString();
    }
}); 
```

同样，您也可以为 textView2 放置侦听器。selectedText 将是您想要的最终字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T06:10:56.367

您需要为文本视图设置点击侦听器。然后，当单击一个时，它会在您的代码中调用一个函数，将被触摸的视图传递给它。然后你可以在上面调用 getText 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T06:22:10.760

这是代码，只需检查一下：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout lt = (LinearLayout) findViewById( R.id.linearLayout );
    LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
    View view = inflater.inflate(your xml to be inflate, null, false);
    lt.addView(view);

    TextView tv_m = (TextView)view.findViewById( R.id.tv_m);
    TextView tv_l = (TextView)view.findViewById( R.id.tv_l);

   tv_m.setOnClickListener(new View.OnClickListener() {  
   @Override         
    public void onClick(View v) {     

       tv_m.getText(); // to get the value written on text view
       }      }); 
} 
```

# sql - SQL Server 2005 中出现系统错误 85

> ID：15563811
> 
> 赞同：0
> 
> 时间：2013-03-22T06:09:15.033
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用以下代码从 SQL Server 执行批处理文件：

```
exec sp_configure 'show advanced options', '1'
reconfigure
exec sp_configure 'xp_cmdshell','1'
reconfigure

exec xp_cmdshell '" D:\network.bat"' 
```

并且`neywork.bat`包含以下命令

```
rem disconnect and re-set upn network drive connection
net use z: /d /yes
net use z:\\mlisfile07 
```

此处`z:`映射到其他路径，但在输出中显示为

> *找不到网络连接
> 系统错误 85 已发生*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:13:10.070

您在驱动器号和网络路径之间缺少一个空格：

```
net use z: \\mlisfile07
         ~~~ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:06:15.320

可能的原因是您登录的 SQL-SERVER 用户没有管理权限。

请查看： http: [//support.microsoft.com/kb/253821](http://support.microsoft.com/kb/253821)。

# google-chrome - 如何使用 PC 浏览器进行移动通信？

> ID：15563814
> 
> 赞同：2
> 
> 时间：2013-03-22T06:09:26.503
> 
> 标签：google-chrome, bluetooth, websocket, wifi

我想做一个可以用手机控制的HTML5游戏。那么手机端和PC端的浏览器如何通信呢？

我想到以下几种方式：

1.  蓝牙 这可能是最简单的使用方式。但是我搜索发现Chrome去年提出了蓝牙API提案，但现在只能在Chrome dev上使用，这意味着我不能让游戏对所有人都流行。

2.  WiFi 我不知道如何使用 WiFi 信息在浏览器上设置主机。如果是这样，我可以将我的手机连接到 WiFi。这被认为比 web socket 更快，因为它是本地网络。

3.  Web Socket 有很多关于如何使用它的信息。但是由于这个使用广域网，它被认为是较慢的，是我最后的选择。

那么，有谁知道如何通过前两种方式实现这一目标？

# javascript - 使用 jquery 动画制作滚动条滚动的最简单方法

> ID：15563817
> 
> 赞同：0
> 
> 时间：2013-03-22T06:09:37.270
> 
> 标签：javascript, jquery

我想制作一个 div 滚动条来滚动带有缓动动画的内容。是否可以在几行代码中使用 jquery？

[http://jsfiddle.net/aHVpA/](http://jsfiddle.net/aHVpA/)

```
$(".motorcycles-wrapper").animate({scroll: '+=50'}, 1000, 'easeOutQuad'); 
```

这是html代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>

<script language="javascript">
$(".motorcycles-wrapper").animate({scroll: '+=50'}, 1000, 'easeOutQuad');

</script>
</head>
<style>
.motorcycles-wrapper {
    height:170px;
    background-color:#000;
    width:200px;
    overflow:scroll;
    overflow-y:hidden;
}
</style>
<body>
<div class="views-field views-field-view motorcycles-wrapper">        <div class="field-content motorcycles-field"><div class="view view-ye-slide-show view-id-ye_slide_show view-display-id-block view-of-motorcycle view-dom-id-7f69086a9234de4a24878c146bdc52ac">

      <div class="view-content">
      <table class="views-view-grid cols-4">
  <tbody>
          <tr class="row-1 row-first row-last">
                  <td class="col-1 col-first">

  <div class="views-field views-field-title">        <span class="field-content"><a href="/mysite/node/47">Falcone</a></span>  </div>  
  <div class="views-field views-field-uc-product-image">        <div class="field-content"><a href="/mysite/node/47"><img typeof="foaf:Image" src="http://localhost/mysite/sites/default/files/styles/thumbnail/public/45c857_df2173694b2e1cc56e443a4103f02ede.jpg" width="100" height="100" alt=""></a></div>  </div>          </td>
                  <td class="col-2">

  <div class="views-field views-field-title">        <span class="field-content"><a href="/mysite/node/45">V7 Special</a></span>  </div>  
  <div class="views-field views-field-uc-product-image">        <div class="field-content"><a href="/mysite/node/45"><img typeof="foaf:Image" src="http://localhost/mysite/sites/default/files/styles/thumbnail/public/45c857_57fbe09be65ba8c265ee621184267e45.jpg" width="100" height="100" alt=""></a></div>  </div>          </td>
                  <td class="col-3"> <div class="views-field views-field-title">        <span class="field-content"><a href="/mysite/node/45">V7 Special</a></span>  </div>  
  <div class="views-field views-field-uc-product-image">        <div class="field-content"><a href="/mysite/node/45"><img typeof="foaf:Image" src="http://localhost/mysite/sites/default/files/styles/thumbnail/public/45c857_57fbe09be65ba8c265ee621184267e45.jpg" width="100" height="100" alt=""></a></div>  </div> 
                      </td>
                  <td class="col-4 col-last"> <div class="views-field views-field-title">        <span class="field-content"><a href="/mysite/node/45">V7 Special</a></span>  </div>  
  <div class="views-field views-field-uc-product-image">        <div class="field-content"><a href="/mysite/node/45"><img typeof="foaf:Image" src="http://localhost/mysite/sites/default/files/styles/thumbnail/public/45c857_57fbe09be65ba8c265ee621184267e45.jpg" width="100" height="100" alt=""></a></div>  </div> 
                      </td>
              </tr>
      </tbody>
</table>
    </div>

</div></div>  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:00:39.820

您需要使用`scrollTop`或`scrollLeft`取决于您想要滚动的方向。

```
$(".motorcycles-wrapper").animate({
    scrollTop: "+=50"
    }, 1000); 
```

^ 这将向下滚动 50。

```
$(".motorcycles-wrapper").animate({
    scrollLeft: "+=50"
    }, 1000); 
```

^ 这将向右滚动 50。

# perl - 在 Perl 中打印哈希

> ID：15563826
> 
> 赞同：5
> 
> 时间：2013-03-22T06:10:35.377
> 
> 标签：perl, hash

我想知道下面的代码为什么打印“2/8”。

```
#!/usr/bin/perl
#use strict;
#use warnings;
%a = ('a'=>'dfsd','b'=>'fdsfds');
print %a."\n"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T06:16:28.727

您通过将其与字符串 '\n' 连接来在[标量上下文中打印哈希](http://perldoc.perl.org/perldata.html#Scalar-values)

> 如果您在标量上下文中评估哈希，则如果哈希为空，则返回 false。如果有任何键/值对，则返回 true；更准确地说，返回的值是一个字符串，由已使用的桶数和分配的桶数组成，用斜杠分隔。

`2/8`表示在分配的**8**个桶中，有**2 个**已被触及。考虑到您只插入**了**2 个值，到目前为止它做得很好:)

该值显然没有用，除了评估散列函数的表现如何。用于`print %a;`打印其内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T06:21:29.743

正如@Dark..所提到的，您正在标量上下文中打印哈希。

如果您真的想打印哈希，请使用 Data::Dumper

```
use Data::Dumper;
...
...
print Dumper(%a); 
```

例如：

```
use Data::Dumper; 
my %hash = ( key1 => 'value1', key2 => 'value2' ); 
print Dumper(%hash); # okay, but not great 
print "or\n"; 
print Dumper(\%hash); # much better 
```

和输出：

```
$VAR1 = 'key2'; 
$VAR2 = 'value2'; 
$VAR3 = 'key1'; 
$VAR4 = 'value1'; 
or 
$VAR1 =    { 
             'key2' => 'value2', 
             'key1' => 'value1' 
           }; 
```

# linux - 如何使用case语句调用函数？

> ID：15563843
> 
> 赞同：0
> 
> 时间：2013-03-22T06:11:51.010
> 
> 标签：linux, bash, shell

嗨，我已经使用此代码从给定路径中查找 .java 文件，并从输出文件的路径生成 .java 文件列表，并计算每个 java 文件中制表符和空格的总数。现在我需要编写函数中的两个while循环并在case语句中调用该函数，如何做到这一点？

代码：

```
#!/bin/sh
    #
    output=/home/user/Desktop/file-list.txt
    path=/home/user/Desktop
    find $path -type f -name \*.java > $output
    echo "Generating files list..."
    echo "Done"

    while IFS= read file
    do 
        if [ -f "$file" ]; then
            spaces=$(tr -cd '\s' < "$file"  | wc -c);
            echo "$spaces spaces in file $file" >> "/home/user/Desktop/space-count.txt"
        fi
    done < "$output"
    echo "Space Count Done!"

    while IFS= read file
    do 
        if [ -f "$file" ]; then
            tabs=$(tr -cd '\t' < "$file"  | wc -c);
            echo "$tabs tabs in file $file" >> "/home/user/Desktop/tab-count.txt"
        fi
    done < "$output"
    echo "Tab Count Done!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:38:54.147

这是一个大小写的例子，但是可以将字符的名称传递给函数，从而消除对字符进行大小写的需要。

```
function count_char
{
    flist=$1
    ch=$2

    case $ch in
       " ")  chName=space;;
       "\t") chName=tab;;
    esac

    while IFS= read file
    do 
        if [ -f "$file" ]; then
            tot=$(tr -cd $ch < "$file"  | wc -c);
            echo "$tot $chName in file $file" >> "/home/user/Desktop/tab-count.txt"
        fi
    done < "$flist"   
}

# setup code, find command here
# ....

count_char $output " "
count_char $output "\t" 
```

# php - 应用多时区的最佳方法是什么？

> ID：15563845
> 
> 赞同：2
> 
> 时间：2013-03-22T06:11:57.920
> 
> 标签：php, codeigniter, timezone

我正在努力在 Codeigniter(2.0) 中应用会话基础时区。

设想：

用户登录系统后，我使用 lat/lon 检测时区 ID 并将其设置为会话变量，然后将 set_timezone() 调用到每个控制器的构造函数中。

例如一个自动加载的帮助文件：

```
function set_timezone($timeZoneId='')
{
  if($timeZoneId!="")
  {
    date_default_timezone_set($timeZoneId);
    mysql_query("SET SESSION time_zone = '".$timeZoneId."'");
  }
} 
```

我的问题是我不想调用`set_timezone()`每个控制器的构造函数。我想要的是全局调用而不是每个控制器的构造函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:24:49.303

您应该创建一个父控制器，称为[`MY_Controller`](http://codeigniter.tv/a-10/Extending-the-core-MY_Controller-and-beyond)所有其他控制器的扩展。在该类的构造函数中，您可以调用`set_timezone`. 使用此解决方案，时区将在所有子控制器中自动设置。

您`MY_Controller`应该存储在其中，`application/core`并且看起来应该是这样的：

```
class MY_Controller extends CI_Controller
{
  function __construct()
  {
    parent::__construct();
    $this->set_timezone();
  }

  function set_timezone($timeZoneId='')
  {
    // Your code
  }
} 
```

现在所有其他控制器都应该扩展`MY_Controller`而不是`CI_Controller`. 例如：

```
class WelcomeController extends MY_Controller
{
  function __construct()
  {
    // This will call the constructor of MY_Controller,
    // which in turn sets the timezone:
    parent::__construct();
  }

  // Rest of your functions...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:15:54.403

另一种方式是，

您可以在库中定义它。您可以创建一个库并在库中定义此函数，然后在应用程序的任何位置调用它。不要忘记在 AutoLoad 中加载库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:24:48.610

正如 Nikitas 所说，创建一个如下所示的库文件并将库文件包含在 autoload.phpb 中

```
 class Timezoneconvert
   {
       function set_timezone($timeZoneId='')   {
            $this->obj =& get_instance();
            $this->obj->load->database();
          if($timeZoneId!="")
            date_default_timezone_set($timeZoneId);
            $this->obj->db->query("SET SESSION time_zone = '".$timeZoneId."'");
          }
    }
   } 
```

在 autoload.php 中

```
$autoload['libraries'] = array('Timezoneconvert'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:54:14.963

我有一个使用钩子的解决方案。1.启用配置中的钩子 2.将其设置为 hooks.php

```
class HookMyHandler {
    function post_controller_constructor() {
        $this->ci = & get_instance();

        //my method name

    }
} 
```

# css - 如何仅应用 Kendo 树视图父节点的样式

> ID：15563848
> 
> 赞同：4
> 
> 时间：2013-03-22T06:12:20.183
> 
> 标签：css, kendo-treeview

我的应用程序中有剑道树视图，我只想应用剑道树视图父节点的样式。如何为树视图的父节点应用字体粗体等样式？我的树视图代码是

```
var tree= $("#treeview").kendoTreeView({
  checkboxes: {
    checkChildren: true
  },
  dataSource: [{        
     id: 2, text: "select all", expanded: true,
     items: [
        { id: 3, text: "ABH" },
        { id: 4, text: "VFG" },
        { id: 5, text: "VFGT" },
        { id: 6, text: "GTYUJ" },
        { id: 7, text: "GHJ" }
     ]
   }]
 }).data("kendoTreeView"); 
```

这是[JSfiddle](http://jsfiddle.net/RHh67/85/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T08:27:53.197

尝试在脚本中配置它。

```
 .k-top.k-bot {font-weight: bold;} 
```

# wpf - WPF Tabcontrol：查找创建以显示所有选项卡标题的行数

> ID：15563858
> 
> 赞同：0
> 
> 时间：2013-03-22T06:12:50.690
> 
> 标签：wpf, tabcontrol

我有一个显示选项卡控件的对话框，我有所有逻辑来找出最大的 tabitem，然后这个大小用于调整我的对话框的大小。如果我有单行选项卡项目，这一切都很好，如果创建了多行，那么我无法正确计算高度，因为我不知道创建了多少行选项卡。

如何找出为呈现所有选项卡而创建的行数？

更新：

`SizeToContent = SizeToContent.WidthAndHeight;`当我希望对话框自动调整大小时工作，现在我也想要一个固定大小的对话框，在这里，我想覆盖我的 tabitem 内容的大小（对话框高度 - tabcontrol 下面的按钮 - tabrows 的数量 * tab 行高度)，所以问题仍然存在。

此外，`SizeToContent`在我的对话框底部留下一行，当您尝试调整对话框大小时它会消失，我尝试使视觉效果无效，但它没有帮助，有什么想法吗？

# java - Java 泛型 - T in 的子类；T out 的同一个子类

> ID：15563867
> 
> 赞同：1
> 
> 时间：2013-03-22T06:13:48.320
> 
> 标签：java, generics

这正式成为我的头脑！

我想要做的是将一个类型传递给一个方法，然后返回相同的类型。正是这个：

```
public <T> T get(T in) {
    return in;
} 
```

只有我希望 T 成为抽象基类的子类，而不仅仅是任何旧类。有点像这样：

```
public <T extends BaseClass> T get(<T extends BaseClass> in) {
    return in;
} 
```

但众所周知；它不是这样工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:16:20.063

还没有尝试过，但这不起作用吗？

```
public <T extends BaseClass> T get(T in) {
    return in;
} 
```

# jsf - 如何从 DropDown 加载 a4j:outputPanel( ) 在 Richfaces 中使用 ajax 调用？

> ID：15563874
> 
> 赞同：0
> 
> 时间：2013-03-22T06:14:47.460
> 
> 标签：jsf, richfaces

这与richfaces 4.0有关

我的网页中有两个下拉菜单。在第一个 DropDown 上选择项目时，第二个 DropDown（以前不可见）很容易在网页上呈现。

在第二个下拉菜单中选择项目时，我想呈现一个单独的面板（无法做到这一点）。

问题是从第一个下拉列表中选择项目后，我可以在网页上成功呈现第二个 DropDown ，但是当我选择第二个 dropDown item 时没有呈现面板。

我的代码如下：

```
 <rich:panel header="Select Operation" style="margin-top: 20px;  height: 110px">
            <h:panelGrid columns="1">
                <h:form>
                    <h:panelGrid columns="4">
                        <h:outputLabel value="Operation: " style="font-size: small; font-weight: 900"/>
                        <h:selectOneMenu style="margin-left: 10px; width: 150px" value="#{adminBean.currentType}">                                
                            <f:selectItem itemValue="0" itemLabel="" />
                            <f:selectItem itemValue="1" itemLabel="Add New User" />
                            <f:selectItem itemValue="2" itemLabel="Manage Balance" />
                            <f:selectItem itemValue="3" itemLabel="Manage Account" />
                            <a4j:ajax event="valueChange" render="second" execute="@this" />                                
                        </h:selectOneMenu>

                        <h:form>
                            <a4j:outputPanel id="second" layout="block">
                                <h:outputLabel value="Type : " style="margin-left: 130px; font-size: small; font-weight: bold;" rendered="#{not empty adminBean.currentType}"/>
                                <h:selectOneMenu style="margin-left: 10px; width: 150px" value="#{adminBean.currentItem}" rendered="#{not empty adminBean.currentType}">
                                    <f:selectItem itemValue="0" itemLabel="" />
                                    <f:selectItem itemValue="1" itemLabel="Participant" />
                                    <f:selectItem itemValue="2" itemLabel="Administrator" />
                                    <a4j:ajax event="valueChange"  render="rep"  execute="@this" />   
                                </h:selectOneMenu>

                            </a4j:outputPanel>                            
                        </h:form>
                    </h:panelGrid>
                </h:form>

            </h:panelGrid>

        </rich:panel>                

        <rich:panel style="margin-top: 20px; min-height: 500px">

            <a4j:outputPanel id="rep">

                <rich:panel rendered="#{not empty adminBean.currentItem}" header="Add Customer">

                    <h:panelGrid columns="2">
                        <a4j:commandButton value="Add New" style="width: 70px"></a4j:commandButton>
                        <a4j:commandButton value="Delete" style="margin-left: 10px; width: 70px"></a4j:commandButton>
                    </h:panelGrid>

                    </rich:panel>
                   </a4j:outputPanel>
            </rich:panel> 
```

如上所述，我希望在从 second 选择项目时呈现 id="rep" 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:59:12.243

你有两个问题：

*   您有嵌套的表单，导致 HTML 无效。
*   您应该为您的组件提供 ID。

这应该是固定的代码（请注意，我删除了所有不必要的属性以使页面作为样式工作）：

```
<rich:panel id="pnlContainer">
    <h:panelGrid columns="1" id="grdSingleCol">
        <h:form id="frmData">
            <h:panelGrid columns="4" id="grdData">
                <h:selectOneMenu value="#{adminBean.currentType}">
                    <f:selectItem itemValue="0" itemLabel="" />
                    <f:selectItem itemValue="1" itemLabel="Add New User" />
                    <f:selectItem itemValue="2" itemLabel="Manage Balance" />
                    <f:selectItem itemValue="3" itemLabel="Manage Account" />
                    <a4j:ajax render="second" execute="@this" />
                </h:selectOneMenu>

                <a4j:outputPanel id="second" layout="block">
                    <h:selectOneMenu value="#{adminBean.currentItem}">
                        <f:selectItem itemValue="0" itemLabel="" />
                        <f:selectItem itemValue="1" itemLabel="Participant" />
                        <f:selectItem itemValue="2" itemLabel="Administrator" />
                        <!-- check how to render components outside the form -->
                        <a4j:ajax render=":pnlRepContainer:rep" execute="@this" />
                    </h:selectOneMenu>
                </a4j:outputPanel>
            </h:panelGrid>
        </h:form>
    </h:panelGrid>
</rich:panel>

<rich:panel id="pnlRepContainer">
    <a4j:outputPanel id="rep">
        <rich:panel rendered="#{not empty adminBean.currentItem}"
            header="Add Customer">
            <h:panelGrid columns="2">
                <a4j:commandButton value="Add New" />
                <a4j:commandButton value="Delete" />
            </h:panelGrid>
        </rich:panel>
    </a4j:outputPanel>
</rich:panel> 
```

# html - iframe 中的内容何时加载？

> ID：15563883
> 
> 赞同：0
> 
> 时间：2013-03-22T06:15:30.603
> 
> 标签：html

```
<iframe src="http://someramdomlink/wxy" 
style="border:0px #FFFFFF none;" name="myiFrame"
scrolling="no" frameborder="1"  height="60px" width="468px"></iframe> 
```

* * *

问题1）
我在网页中放置了一个iframe，那么iframe中的链接什么时候加载？它是已经加载到服务器中还是在用户使用 iframe 打开特定页面时加载？
问题2）
另外我在iframe中放置了一个iframe，我的意思是我在页面[http://some-ramdom-link.com/xyz](http://some-ramdom-link.com/xyz)中放置了一个iframe这个iframe也会被加载吗？它是这样工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:19:18.203

1.  它在浏览器请求时加载，尚未加载到服务器中。
2.  是的，您可以在 iframe 中拥有 iframe

# c# - 如何打印文本框的内容

> ID：15563886
> 
> 赞同：14
> 
> 时间：2013-03-22T06:15:46.110
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-store-apps

如何在 Metro 应用程序中打印 TextBox 的内容？我已经阅读[了 MSDN 上的这个快速入门指南](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465204.aspx)和许多在线教程，但是它们非常复杂并且**不适用于 TextBox 控件，*只能使用 RichTextBox*控件**。

我们如何从 Metro 应用程序中的 TextBox 控件进行打印？甚至可能吗？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T13:38:37.840

**更新 1**

我创建了一个帮助类来简化打印文本框内容。您可以通过[NuGet](https://www.nuget.org/packages/WinRT.TextboxPrintHelper/)添加助手类。如果你想增强我现有的帮助类，请在[GitHub 上fork](https://github.com/Xyroid/WinRT.TextboxPrintHelper)

* * *

在这里，我为您提供了MSDN 中[修改后的打印示例](https://skydrive.live.com/redir?resid=9E70869A1583FA52!903&authkey=!APb_AIjhFwf3S0E)。我已经放了文本框，你可以写任何东西并且会被打印出来。请注意，我没有完成打印文本框文本的示例，它与格式（粗体、斜体、下划线、颜色）完全相同。我设置了硬编码的打印格式。您可以制作自己的格式。

Stack Overflow 在回答中有字符限制，我的代码太长，所以发布 CodePaste.net 链接。

XAML：[http ://codepaste.net/9nf261](http://codepaste.net/9nf261)

CS：[http ://codepaste.net/q3hsm3](http://codepaste.net/q3hsm3)

请注意，我使用了一些图像，所以将图像放在“图像”文件夹中

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T13:52:51.597

我刚刚创建了一个带有文本框 (textBox1) 和一个按钮 (button1) 的小型 winforms 应用程序。代码隐藏如下：

```
public partial class Form1 : Form
{
    public Form1()
    {
           InitializeComponent();
    }

    private void PrintDocumentOnPrintPage(object sender, PrintPageEventArgs e)
    {
        e.Graphics.DrawString(this.textBox1.Text, this.textBox1.Font, Brushes.Black, 10, 25);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        PrintDocument printDocument = new PrintDocument();
        printDocument.PrintPage += PrintDocumentOnPrintPage;
        printDocument.Print();
    }
} 
```

单击按钮即可完成打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T17:32:55.467

我敦促你在[这里检查我的问题](https://stackoverflow.com/questions/20596378/why-is-my-windows-store-app-not-showing-anything-in-the-print-preview/20597484#20597484)在其中我说明了一种最简单的情况，在这种情况下您可以从页面上打印一些内容（并且您可以将该代码添加到您当前拥有的任何页面上 - 只需将我使用的示例文本框的文本替换为您想要的任何内容）。他们使用富文本框的原因是因为它可以检测到文本何时溢出页面，因此他们使用该信息与另一个富文本框创建一个新页面，直到不再发生溢出。无论如何，您可以使用自己的字符串解析器将文本拆分到不同的页面上。本质上，在 Windows 8 应用程序中打印将打印您想要的任何 UIElement，因此您几乎可以通过 XAML 以编程方式对齐您的页面，并按照您为任何其他 Windows 应用程序设置样式的方式来设置它的样式。说真的，检查问题，这将是一个巨大的帮助。我花了几个小时将 PrintSample 破解为最简单的情况，直到我弄清楚它是如何工作的。重新发明轮子没有意义，利用我的努力为您服务，这就是 Stack 的全部意义所在。干杯!

编辑：为方便起见，伙计们，我将在这里提出代码。

第 1 步：将此代码添加到带有文本框的页面。

```
 protected PrintDocument printDocument = null;
        protected IPrintDocumentSource printDocumentSource = null;
        internal List<UIElement> printPreviewElements = new List<UIElement>();
        protected event EventHandler pagesCreated;

        protected void PrintTaskRequested(PrintManager sender, PrintTaskRequestedEventArgs e)
        {
            PrintTask printTask = null;
            printTask = e.Request.CreatePrintTask("C# Printing SDK Sample", sourceRequested =>
            {
                printTask.Completed += async (s, args) =>
                {
                    if (args.Completion == PrintTaskCompletion.Failed)
                    {
                        await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, async () =>
                        {
                            MessageDialog dialog = new MessageDialog("Something went wrong while trying to print. Please try again.");
                            await dialog.ShowAsync();
                        });
                    }
                };
                sourceRequested.SetSource(printDocumentSource);
            });
        }

        protected void RegisterForPrinting()
        {
            printDocument = new PrintDocument();
            printDocumentSource = printDocument.DocumentSource;
            printDocument.Paginate += CreatePrintPreviewPages;
            printDocument.GetPreviewPage += GetPrintPreviewPage;
            printDocument.AddPages += AddPrintPages;
            PrintManager printMan = PrintManager.GetForCurrentView();
            printMan.PrintTaskRequested += PrintTaskRequested;
        }

        protected void UnregisterForPrinting()
        {
            if (printDocument != null)
            {
                printDocument.Paginate -= CreatePrintPreviewPages;
                printDocument.GetPreviewPage -= GetPrintPreviewPage;
                printDocument.AddPages -= AddPrintPages;
                PrintManager printMan = PrintManager.GetForCurrentView();
                printMan.PrintTaskRequested -= PrintTaskRequested;
            }
        }

        protected void CreatePrintPreviewPages(object sender, PaginateEventArgs e)
        {
            printPreviewElements.Clear();
            PrintTaskOptions printingOptions = ((PrintTaskOptions)e.PrintTaskOptions);
            PrintPageDescription pageDescription = printingOptions.GetPageDescription(0);
            AddOnePrintPreviewPage(pageDescription);
            if (pagesCreated != null)
            {
                pagesCreated.Invoke(printPreviewElements, null);
            }
            ((PrintDocument)sender).SetPreviewPageCount(printPreviewElements.Count, PreviewPageCountType.Intermediate);
        }

        protected void GetPrintPreviewPage(object sender, GetPreviewPageEventArgs e)
        {
            ((PrintDocument)sender).SetPreviewPage(e.PageNumber, printPreviewElements[e.PageNumber - 1]);
        }

        protected void AddPrintPages(object sender, AddPagesEventArgs e)
        {
            foreach (UIElement element in printPreviewElements)
            {
                printDocument.AddPage(element);
            }
            ((PrintDocument)sender).AddPagesComplete();
        }

        protected void AddOnePrintPreviewPage(PrintPageDescription printPageDescription)
        {
            TextBlock block = new TextBlock();
            block.Text = "This is an example.";
            block.Width = printPageDescription.PageSize.Width;
            block.Height = printPageDescription.PageSize.Height;
            printPreviewElements.Add(block);
        }
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            RegisterForPrinting();
        }

        protected override void OnNavigatedFrom(NavigationEventArgs e)
        {
            UnregisterForPrinting();
        } 
```

第 2 步：将 block.Text 替换为您想要的文本。

第 3 步：使用打印按钮显示打印 UI：

```
 private async void PrintDocument(object sender, RoutedEventArgs e)
        {
            await Windows.Graphics.Printing.PrintManager.ShowPrintUIAsync();
        } 
```

第 4 步：将 RequestedTheme="Light" 放入您的 App.xaml 中，您就完成了。注意：可能能够在此 XAML 类中按照您想要的方式设置文本框的样式，而不必设置整个应用程序的主题。

第 5 步（稍后）：您可能需要考虑添加自己的新页面检测逻辑，该逻辑会不断调用该方法以创建新页面。

第 6 步（现在）：与 M$ 负责让我们挣扎的人打架。

# httpwebrequest - 将 HttpWebRequest 发送到特定服务器，而不是一个 DNS 自动解析到

> ID：15563891
> 
> 赞同：0
> 
> 时间：2013-03-22T06:16:05.687
> 
> 标签：httpwebrequest, ip, web-farm

我知道我们在网络农场中的生产服务器的 IP 地址。我想将 httpwebrequest 发送到特定服务器。例如，我希望请求 www.example.com 访问 IP 10.102.180.21 并测量响应时间。我将继续这个，对于其余的服务器也是如此。

```
 HttpWebRequest requs = (HttpWebRequest)WebRequest.Create("http://10.102.180.21");
        requs.Host= "www.exmaple.com"; 
```

经过一番研究，我做了上面的代码。这是对的吗？。创建请求后，我想验证我的请求连接到什么服务器。请指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T21:11:33.490

编辑服务器上的主机文件以覆盖域解析到的 ip。

将此行放入您的主机文件中：

```
10.102.180.21 www.example.com 
```

在 Windows 上，您的主机文件位于此处：

```
c:\windows\system32\drivers\etc\hosts 
```

在 linux 和 mac 上，您的 hosts 文件位于此处：

```
/etc/hosts 
```

# android - 如何在安卓设备中检查电话服务是否启用？

> ID：15563893
> 
> 赞同：1
> 
> 时间：2013-03-22T06:16:09.083
> 
> 标签：android, phone-call, telephonymanager

我想知道如何在不同的设备上检查电话服务是否启用，我有 Micromax Funbook(p300) Tablet(Android 4.0.3)，其中没有呼叫服务，我正在使用下面的代码检查

```
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);   
if (tm.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE) {
    Log.v("TAG", "No calling service");
}else{
    Log.v("TAG", "calling service");
} 
```

但这不起作用。它总是`calling service`只给出消息。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:22:12.943

如果平板电脑不支持通话服务，谷歌播放将不允许该应用程序安装在该平板电脑上。Google Play 在内部检查您的设备支持的权限以及应用程序要求的权限，如果它们不匹配，则应用程序将显示为与您的设备不兼容。编辑：因此，当然，您不需要检查该设备是否支持呼叫......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:24:05.343

试试这个，如果设备没有进行语音通话的功能，那么它一定不是电话。

```
TelephonyManager tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
String ableToMakePhoneCalls = tm.getVoiceMailNumber(); 

//check device for voicemail number (null means no voicemail number).
if(ableToMakePhoneCalls == null)
{ 
     //If the device does not have voicemail, then it must not be a phone. So it can't call. 
} 
```

# asp.net - 如何从数据表中选择特定数据？

> ID：15563896
> 
> 赞同：0
> 
> 时间：2013-03-22T06:16:13.437
> 
> 标签：asp.net, datatable

我有三个选择语句，

```
select 1 from tbl1;  
select 2 from tbl2; 
select 3 from tbl3; 
```

在我的前端，我使用 a`Datatable`从 sql 中检索值。

```
 datatable dt = new datatable(); dt = obj.funcgetval();
 gridview.DataSource = dt; gridview.Databind(); 
```

我想从数据表中选择特定数据，就像我们使用的数据集中一样，我们`ds.tables[0]`如何在数据表中应用相同的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:18:08.613

您可以使用`Rows`和的组合`Columns`来读取/写入数据表的特定单元格。

```
dataTable.Rows[rowsIndex].Column["ColumnName"] = "SomeValue";
string strValue = dataTable.Rows[rowsIndex].Column["ColumnName"].ToString(); 
```

遍历*数据*表

```
foreach(DataRow row in dt.Rows)
{ 
    string name = row["name"].ToString();
    string description = row["description"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:21:13.787

如果要选择任何行，请使用

```
DataRow dr=dt.Rows[Rowindex]; 
```

如果您想获取任何列值，那么

```
object obj=dt.Rows[Rowindex][columnindex]; 
```

或者

```
object obj=dt.Rows[Rowindex]["ColumnName"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:22:20.820

这应该适合你：

```
dt.Rows[rowindex]["ColumnName"].ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:33:08.013

如果你想从数据表中选择特定的单元格值，你可以使用..

```
dt.Rows[row index]["Column name"].TOString(); 
```

就像如果你想从列中选择**第一**行值说**名称**然后使用

```
dt.Rows[1]["Name"].TOString(); 
```

如果你想选择特定的行本身，你可以`Select`使用`filtercondition`.

```
 string FilterCond = ur condition;
 DataRow[] myrow = dt.Select(FilterCond); 
```

# cron - 在linux中指定时间运行脚本

> ID：15563900
> 
> 赞同：0
> 
> 时间：2013-03-22T06:16:32.080
> 
> 标签：cron, webdriver

我已经创建了脚本，现在我希望它们在指定时间自动运行，我该怎么做？

我正在使用 Ubuntu 和 JAVA 编写脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:21:03.003

您可以使用`crontab`在特定时间连续执行此操作。

要编辑 crontab 条目，请以 root 用户 (su – root) 登录并执行 crontab -e，如下所示。默认情况下，这将编辑当前登录用户的 crontab。

```
root@dev-db# crontab -e 
```

**为特定时间安排作业**

> cron 的基本用法是在特定的时间执行一个作业，如下图所示。这将在 6 月 10 日上午 8 点 30 分执行完整备份 shell 脚本（完整备份）。

请注意，时间字段使用 24 小时格式。因此，早上 8 点使用 8，晚上 8 点使用 20。

```
30 08 10 06 * /home/ramesh/full-backup 
```

更多示例[在这里](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)，crontab utils 可以在[这里找到](http://www.thegeekstuff.com/2011/12/crontab-command/)

# cakephp-2.3 - CakePHP 2.3 Method onlyAllow 不存在

> ID：15563902
> 
> 赞同：1
> 
> 时间：2013-03-22T06:16:38.347
> 
> 标签：cakephp-2.3

今晚尝试删除记录时出现奇怪的错误：

```
Method onlyAllow does not exist

Error: An Internal Error Has Occurred.
Stack Trace

APP/Controller/VendorsController.php line 136 → CakeRequest->__call(string, array)
APP/Controller/VendorsController.php line 136 → CakeRequest->onlyAllow(string, string)
[internal function] → VendorsController->delete(string)
CORE/Cake/Controller/Controller.php line 485 → ReflectionMethod->invokeArgs(VendorsController, array)
CORE/Cake/Routing/Dispatcher.php line 186 → Controller->invokeAction(CakeRequest)
CORE/Cake/Routing/Dispatcher.php line 161 → Dispatcher->_invoke(VendorsController, CakeRequest, CakeResponse)
APP/webroot/index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

无法弄清楚发生了什么 - 删除方法直接从蛋糕烘烤中取出。我唯一的猜测是 http 文档根目录的权限太紧了，但这似乎有点牵强。没有 httpd 错误。使用管理员前缀和不使用管理员前缀都会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:28:19.343

我遇到了同样的问题。经过一番挖掘，我意识到我已经改变了我的环境以使用更新版本的 CakePHP (2.3.0)。但是，我正在烘焙的项目是（2.2.3）。所以，看起来在 Cake 2.2.x 和 2.3.x 之间他们改变了一些东西。

为了修复在我的 2.2.x 项目中使用 2.3 烘焙的控制器，我最终从控制器的删除功能中删除了这一行......

```
$this->request->onlyAllow('post', 'delete'); 
```

然后我将其替换为函数顶部的以下内容......

```
if (!$this->request->is('post')) {
    throw new MethodNotAllowedException();
} 
```

注意：您可以通过查看 /lib/Cake/VERSION.txt 文件找到您的应用程序使用的 CakePHP 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:45:28.403

似乎 Vendor 是一个保留字。重命名控制器、模型和视图工作正常。

# php - 有一堆图片，需要拼凑成一张大图（像拼图一样）

> ID：15563907
> 
> 赞同：1
> 
> 时间：2013-03-22T06:16:46.120
> 
> 标签：php

我得到了一堆图像（总共 225 个）。他们的名字的例子：

```
4n27e.png
4n28e.png
4n29e.png
4n30e.png
5n12e.png
5n25e.png
5n26e.png
5n27e.png
5n28e.png 
```

我需要从所有这些图像中形成一张大图。例如，第一行图像将是 4n27e（第二个图像 4n28e，第三个图像 4n29e 等等）。第二行图像将从 5n12e 开始（第二个图像 5n25e 等等）。我需要寻找什么方法来解决这个问题？

注意：我只需要使用 php 和一些 javascript 来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:26:23.730

逻辑测试用例，您可以将 替换为`echo`标签`img`，和/或使用`div`.

```
<?php
$images=array();
$images[]="4n27e.png";
$images[]="4n28e.png";
$images[]="4n29e.png";
$images[]="4n30e.png";
$images[]="5n12e.png";
$images[]="5n25e.png";
$images[]="5n26e.png";
$images[]="5n27e.png";
$images[]="5n28e.png";

echo "<table border='1'>";
$oldIndex=0;
$row=1;
foreach($images as $image)
{
    if(substr($image,0,1)!=$oldIndex)
    {
    if($row>1){echo "</tr>";}

    echo "<tr>";
    $oldIndex=substr($image,0,1);
    $row++;
    }
    echo "<td>$image</td>";

}

echo "</table>";

?> 
```

# android - 无法在 android 设备的 facebook 页面中看到类似选项

> ID：15563908
> 
> 赞同：2
> 
> 时间：2013-03-22T06:16:51.260
> 
> 标签：android, ios, facebook

我正在尝试从我的应用程序在 android 和 ios 中打开一个 facebook 页面。在 ios 中，页面显示**LIKE**按钮，但在 android 中，它显示**SUBSCRIBE**按钮。谁能告诉我如何在android中将其更改为喜欢按钮。我已经给出了下面的截图。![安卓截图](../Images/a2de8e0c7bdefab6fe025610949d4284.png)

![ios截图](../Images/ff25fdf31c4fe5e20009d9814107e24d.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T06:10:41.780

通过使用 URL`fb://page/pageID`而不是解决了这个问题`fb://profile/pageID`

# java - “未使用局部变量的值”的多个实例

> ID：15563912
> 
> 赞同：0
> 
> 时间：2013-03-22T06:17:21.530
> 
> 标签：java, eclipse, swing, jbutton, chess

我正在学习Java并尝试制作国际象棋游戏。我要做的第一件事是将框架设置为板，然后使用 8x8 的 JButton 网格在板上制作正方形，但似乎我的一些代码根本没有被使用。

我的框架将加载，但没有添加任何按钮，我用来存储每个正方形位置的数组没有被使用，显然我想要添加按钮的网格也没有。我几乎修改了代码的每个部分，但无法弄清楚。

我已经添加了 Eclipse 在引号中给出警告的地方 //"like this"

这是我的棋盘类：

```
import java.awt.GridLayout;
import java.io.*;
import javax.swing.ImageIcon; //"the import is never used"
import javax.swing.JFrame;
import javax.swing.JButton; //"the import is never used"
import Logic.ChessSquare;

public class ChessBoard {

    //chess board constructor
    public ChessBoard() throws IOException {

        //create grid and grid dimensions
        GridLayout grid = new GridLayout(8,8); //"the value of the local variable grid is never used"

        //create frame and set specifications of frame
        JFrame frame = new JFrame();
        frame.setVisible(true);
        frame.pack();
        frame.setTitle("I should have started this sooner");
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        //initialise 3D array
        int[][] square; //"the value of the local variable square is never used"

        //create 64 instances of ChessSquare and assign each square as an element in the 3D array
        for (int i = 0; i < 8; i++){
            for(int l = 0; l < 8; l++){
                ChessSquare chessSquare = new ChessSquare(i, l);
                square = new int[i][l];
                frame.add(chessSquare);
            }
        }

    }

    public static void main(String[] args) throws IOException{
        new ChessBoard();
    }

} 
```

这是我的 ChessSquare 课：

```
package Logic;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;

//chess square class, 1 instance of which for each square in the grid
@SuppressWarnings("serial")
public class ChessSquare extends JButton {

    //instance variables for position and piece
    public int posX;
    public int posY;
    public String selectedPiece;

    //constructor for chess squares, loads image and adds to new JButton
    public ChessSquare(int x, int y) throws IOException {
                BufferedImage buttonIcon = ImageIO.read(new File("E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg"));
                JButton button = new JButton(new ImageIcon(buttonIcon)); //"the value of the local variable button is never used"
                setVisible(true);
                }

    //accessor method for position
    public void squarePos(int x, int y){
        this.posX = x;
        this.posY = y;
    }

} 
```

先感谢您。

PS 当我改变 frame.add(chessSquare); 到 frame.add(ChessSquare); （如下所示）警告消失，但随后出现错误“ChessSquare 无法解析为变量”

```
//create 64 instances of ChessSquare and assign each square as an element in the 3D array
for (int i = 0; i < 8; i++){
    for(int l = 0; l < 8; l++){
        ChessSquare chessSquare = new ChessSquare(i, l);
        square = new int[i][l];
        frame.add(ChessSquare);
    }
} 
```

Ryan，这是更新后的代码，我将上面的旧代码留作比较：

国际象棋广场：

```
package Logic;

import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;

//chess square class, 1 instance of which for each square in the grid
@SuppressWarnings("serial")
public class ChessSquare extends JButton {

    //instance variables for position and piece
    public int posX;
    public int posY;
    public String selectedPiece;

    //constructor for chess squares, loads image and adds to new JButton
    public ChessSquare(int x, int y) throws IOException {
                BufferedImage buttonIcon = ImageIO.read(new File("E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg"));
                this.setIcon((Icon) buttonIcon);
                setVisible(false);
                }

    //accessor method for position
    public void squarePos(int x, int y){
        this.posX = x;
        this.posY = y;
    }

} 
```

棋盘：

```
import java.awt.GridLayout;
import java.io.*;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JButton;
import Logic.ChessSquare;

public class ChessBoard {

    //chess board constructor
    public ChessBoard() throws IOException {

        //create grid and grid dimensions
        GridLayout grid = new GridLayout(8,8);

        //create frame and set specifications of frame
        JFrame frame = new JFrame();
        frame.setVisible(true);
        frame.setLayout(grid);
        frame.pack();
        frame.setTitle("I should have started this sooner");
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        //create 64 instances of ChessSquare and assign each square as an element in the 3D array
        for (int i = 0; i < 8; i++){
            for(int l = 0; l < 8; l++){
                ChessSquare chessSquare = new ChessSquare(i, l);
                int[][] square = new int[i][l];
                frame.add(chessSquare);
            }
        }

    }

    public static void main(String[] args) throws IOException{
        new ChessBoard();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:23:49.677

好的，从顶部开始，您的“从不使用导入”，意味着在该文件中，您不使用这些导入，因此可以安全删除它们，除非您打算在该文件中使用它们，这通常在您使用 eclipse 时发生导入该项目，但后来决定不使用它。（即删除它）

其次，正如我在编辑之前所说，您的网格布局未添加到您的 jframe

第三，您的正方形说“从未使用过该值”，但这是eclipse的错误，实际上您实际上是在使用它，这只是说因为它是在for循环内部初始化的。

`chesssquare`在你的最后一个框中，添加而不是类名是正确的`ChessSquare`

这可能是我目前能做的最好的事情了。玩得开心！

编辑：

您也`JButton button`遇到同样的问题，您没有在其他任何地方使用它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:47:01.977

自从我写 Swing 以来已经有一段时间了，但我会试一试......

```
GridLayout grid = new GridLayout(8,8); //"the value of the local variable grid is never used" 
```

构建`GridLayout`是不够的，你还必须使用它。例如`frame.setLayout(grid);`

```
int[][] square; //"the value of the local variable square is never used" 
```

真的不是这样。您可能应该删除该行和初始化它 64 次的错误行。

```
JButton button = new JButton(new ImageIcon(buttonIcon)); //"the value of the local variable button is never used" 
```

`ChessSquare`是一个`JButton`。您无需在此处创建另一个。相反，您应该调用类似`this.setIcon(new ImageIcon(buttonIcon));`

同样，我的 Swing 有点生疏了，但我猜这些答案很接近。

# android - GoogleJsonResponseException: 404 Not Found using google apps endpoint engine backend

> ID：15563913
> 
> 赞同：6
> 
> 时间：2013-03-22T06:17:22.463
> 
> 标签：android, google-app-engine, google-cloud-endpoints

我按照下面的教程进行操作。

[https://developers.google.com/eclipse/docs/running_and_debugging_2_0](https://developers.google.com/eclipse/docs/running_and_debugging_2_0)

这基本上为我现有的应用程序添加了一个 GAE 后端。然后我尝试下面的示例，在本地开发服务器上运行它，我得到下面发生的异常

```
Note result = endpoint.insertNote(note).execute(); 
```

叫做。

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found 
```

我的代码如下。

```
package com.cloudnotes;

import java.io.IOException;
import java.util.Date;

import android.os.AsyncTask;
import android.content.Context;
import com.cloudnotes.noteendpoint.Noteendpoint;
import com.cloudnotes.noteendpoint.model.Note;
import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.http.HttpRequest;
import com.google.api.client.http.HttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory;

import android.os.Bundle;
import android.app.Activity;

import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

      new EndpointsTask().execute(getApplicationContext());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class EndpointsTask extends AsyncTask<Context, Integer, Long> {
        protected Long doInBackground(Context... contexts) {

          Noteendpoint.Builder endpointBuilder = new Noteendpoint.Builder(
              AndroidHttp.newCompatibleTransport(),
              new JacksonFactory(),
              new HttpRequestInitializer() {
              public void initialize(HttpRequest httpRequest) { }
              });
      Noteendpoint endpoint = CloudEndpointUtils.updateBuilder(
      endpointBuilder).build();
      try {
          Note note = new Note().setDescription("Note Description");
          String noteID = new Date().toString();
          note.setId(noteID);

          note.setEmailAddress("E-Mail Address");      
          Note result = endpoint.insertNote(note).execute();
      } catch (IOException e) {
        e.printStackTrace();
      }
          return (long) 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-16T13:59:23.560

如果您使用空参数调用该方法并且该方法不接受空参数，则另一个可能的 404 原因。

我在使用 4 个字符串参数的方法时遇到了类似的问题，我为其中一个发送了 null，我得到的只是一个愚蠢的 404。

开发（本地）服务器上出现 404 的另一个可能原因是您有一个带有一些奇怪字符（例如 url）的参数，如果开发（本地）服务器在应用程序引擎上运行正常，则无法正确处理事件服务器。可能的解决方案：使用简单的 java 对象代替多个参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-05T04:40:59.010

此问题的另一个可能原因是未在 appengine-web.xml 中设置正确的 applicationId：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>APPLICATION_ID_HERE</application> 
```

...

```
</appengine-web-app> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-11T12:01:43.950

这归结为应用引擎默认版本与您部署的不同。转到此处： [https](https://appengine.google.com/deployment?app_id=s~your-project-id) ://appengine.google.com/deployment?app_id=s~your-project-id 并更改您的默认版本

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-11T05:11:24.830

我有同样的问题，这就是我解决它的方法。

**一点背景知识**
我有两个版本的 API 部署到 App Engine，我相信应该没问题。管理控制台没有显示任何问题，在日志文件中部署 API 的第 2 版后，我得到了**200 OK**代码。

```
/_ah/spi/BackendService.getApiConfigs 200 118ms 8kb 
```

但无论我尝试什么，我总是收到**404 Not Found**错误。

我不确定问题出在哪里，但我认为 App Engine 的 Web 服务器正在将所有请求重定向到版本 1。这可能是因为两个版本的 web.xml 中都有以下设置。

```
<servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
</servlet-mapping> 
```

**解决方案**
我删除了版本 1 并重新部署了版本 2。然后一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-23T16:04:38.323

发生这种情况是因为您的部署后端未完全部署。只需重新部署您的后端并确保您收到消息部署成功。您可以在首页标题上查看详细部署过程。另外，您可以通过访问 url 进行测试以检查：

```
https://developers.google.com/apis-explorer/?base=https://[YOUR_PROJECT_ID].appspot.com/_ah/api#p/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-05T08:01:10.187

尝试将您的插件和依赖库更新到最新版本。请参阅[https://stackoverflow.com/a/37639701/857346](https://stackoverflow.com/a/37639701/857346)。

# javascript - 如何修改 JavaScript 对象名称？

> ID：15563914
> 
> 赞同：2
> 
> 时间：2013-03-22T06:17:31.357
> 
> 标签：javascript, object, jscript

在 JavaScript 中，我有以下代码：

```
var rights = {
    'One': [ 1, 1, 0],
    'Two': [ 1, 0, 0],
    'Three': [ 0, 1, 1 ]
}; 
```

和印刷：

```
for (item in rights) Response.Write(item + ' = ' + rights[item] + '<br />'); 
```

此外，我可以通过以下方式访问对象中的任何元素：

```
rights['One'] or rights[0] 
```

但是我怎样才能遍历这个对象，使索引小写，使其变为如下：

```
var rights = {
    'one': [ 1, 1, 0],
    'two': [ 1, 0, 0],
    'three': [ 0, 1, 1 ]
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:27:43.533

您不能直接更改密钥。您可以获取键及其值，使用小写键值设置新键，然后删除原始键。

```
var rights = {
    'One': [ 1, 1, 0],
    'Two': [ 1, 0, 0],
    'Three': [ 0, 1, 1 ]
};

for (var key in rights) {
    var keyLower = key.toLowerCase();
    // if key is not already lower case
    if (keyLower !== key) {
        var temp = rights[key];
        delete rights[key];
        rights[keyLower] = temp;
    }
}

// all keys in the rights object will now be lowercase 
```

工作演示：http: [//jsfiddle.net/jfriend00/U9vFQ/](http://jsfiddle.net/jfriend00/U9vFQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:19:47.463

```
for (var key in rights) {

key = key.toLowerCase();

} 
```

这是小提琴：http: [//jsfiddle.net/btevfik/JBAXr/](http://jsfiddle.net/btevfik/JBAXr/)

* * *

好的，这实际上并没有更新密钥。只是给你小写的钥匙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:27:00.017

```
var fieldNames = [];
for (item in rights) { fieldNames.push(item); }
for(i = 0; i < fieldNames.length; i++) {
    var fieldName = fieldNames[i];
    var value = rights[fieldName];
    delete rights[fieldName];

    rights[fieldName.toLowerCase()] = value;    
} 
```

# c++ - 处理刚性对象跟踪中的随时间漂移问题？

> ID：15563917
> 
> 赞同：3
> 
> 时间：2013-03-22T06:17:37.580
> 
> 标签：c++, opencv, tracking, object-detection, drift

我正在跟踪一个可以缓慢移动或长时间（72 小时）静止不动的刚性物体。大多数方法的一个缺点是随着时间的推移误差累积导致偏离对象。

有避免这种情况的标准方法吗？对象可以并且将在 3 个维度上移动/旋转。

我目前正在使用 SIFT+RANSAC 类型匹配来查找角点，然后在假设某种星座匹配会消除漂移的情况下匹配它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:22:50.537

我明白你现在的意思了。如果相机静止，则目标物体在相机上的投影应始终处于相同的近似 2d 坐标（如果物体静止）。在第一帧中，记住投影的 2d 坐标。对于其余帧，随着时间的推移在（当前 2d 坐标 - 初始第一帧坐标）上创建一个低通滤波器，以滤除位置上的小误差。在某个阈值之后，考虑移动的对象。

# file-io - clojure 的读取文件结构，即 with-open 和 clojure.java.io/reader，对于频繁访问是否足够高效？

> ID：15563919
> 
> 赞同：0
> 
> 时间：2013-03-22T06:17:52.100
> 
> 标签：file-io, clojure, bufferedreader, streamreader

[假设我用with-open 和 clojure.java.io/reader](http://clojuredocs.org/clojure_core/clojure.java.io/reader)编写了一个函数来解析 txt 文件中的数据，然后我编写了另一个函数来多次调用 reader 函数以处理数据，例如

```
(defn grabDataFromFile [file patternString]   
     (let [data (atom [])]
        (with-open [rdr (clojure.java.io/reader file)] 
         (doseq [line (line-seq rdr)] 
           (if  (re-matches  (re-pattern  patternString) line) (swap! data conj line))))
        @data))

(defn myCalculation [file ]
  (let [data1 (grabDataFromFile file "pattern1")
        data2 (grabDataFromFile file "pattern2")
        data3 (grabDataFromFile file "pattern3")]
    ;calculations or processes of data1, data2, data3....)) 
```

我的问题是，在这个 myCalculation 函数中，底层代码是否足够聪明，可以用 clojure reader 只打开一次文件，并一次性获取所需的所有数据？还是它打开和关闭文件的次数与函数 grabDataFromFile 的调用次数一样多？（在这个例子中，3）

一个后续问题是，如果读者不够聪明，并且我必须故意将“解析器”代码与“处理”代码分开，我该怎么做才能加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:44:58.140

`grabDataFromFile`每次调用时都会打开和关闭阅读器（退出时）。底层代码不可能那么聪明，以至于一个函数可以在没有一些明确提供的信息的情况下检测其调用者的上下文。

接受另一个函数，`grabDataFromFile`它是您在每一行上运行的解析器逻辑（或者它可以是您想要在每一行上执行的任何函数）

```
(defn grabDataFromFile [file patternString process-fn]   
  (with-open [rdr (clojure.java.io/reader file)] 
    (doseq [line (line-seq rdr)] 
      (process-fn line))))

(defn myCalculation [file]
  (let [patterns [["pattern1" (atom [])]
                  ["pattern2" (atom [])]
                  ["pattern3" (atom [])]]
        pattern-fns (map (fn [[p data]]
                           (fn [line]
                             (if  (re-matches (re-pattern  p) line)                              
                               (swap! data conj line)))) patterns)
        pattern-fn (apply juxt pattern-fns)]
    (grabDataFromFile file pattern-fn)
    ;perform calc on patterns atoms
    )) 
```

# android - 如何在 Android 设备中检测来电？

> ID：15563921
> 
> 赞同：151
> 
> 时间：2013-03-22T06:17:55.770
> 
> 标签：android, android-intent, android-permissions, incoming-call

我正在尝试制作一个应用程序，例如，当电话打到我想检测号码时。以下是我尝试过的，但它没有检测到来电。

我想`MainActivity`在后台运行我的，我该怎么做？

`manifest`我已经在文件中给予了许可。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

我还应该在清单中提供什么吗？

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_layout);
   }

   public class myPhoneStateChangeListener extends PhoneStateListener {
       @Override
       public void onCallStateChanged(int state, String incomingNumber) {
           super.onCallStateChanged(state, incomingNumber);
           if (state == TelephonyManager.CALL_STATE_RINGING) {
               String phoneNumber =   incomingNumber;
           }
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2013-03-22T06:23:32.057

这是我用来执行此操作的：

显现：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>

<!--This part is inside the application-->
    <receiver android:name=".CallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver> 
```

我的基本可重复使用呼叫检测器

```
package com.gabesechan.android.reusable.receivers;

import java.util.Date;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;

public abstract class PhonecallReceiver extends BroadcastReceiver {

    //The receiver will be recreated whenever android feels like it.  We need a static variable to remember data between instantiations

    private static int lastState = TelephonyManager.CALL_STATE_IDLE;
    private static Date callStartTime;
    private static boolean isIncoming;
    private static String savedNumber;  //because the passed incoming is only valid in ringing

    @Override
    public void onReceive(Context context, Intent intent) {

        //We listen to two intents.  The new outgoing call only tells us of an outgoing call.  We use it to get the number.
        if (intent.getAction().equals("android.intent.action.NEW_OUTGOING_CALL")) {
            savedNumber = intent.getExtras().getString("android.intent.extra.PHONE_NUMBER");
        }
        else{
            String stateStr = intent.getExtras().getString(TelephonyManager.EXTRA_STATE);
            String number = intent.getExtras().getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            int state = 0;
            if(stateStr.equals(TelephonyManager.EXTRA_STATE_IDLE)){
                state = TelephonyManager.CALL_STATE_IDLE;
            }
            else if(stateStr.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)){
                state = TelephonyManager.CALL_STATE_OFFHOOK;
            }
            else if(stateStr.equals(TelephonyManager.EXTRA_STATE_RINGING)){
                state = TelephonyManager.CALL_STATE_RINGING;
            }

            onCallStateChanged(context, state, number);
        }
    }

    //Derived classes should override these to respond to specific events of interest
    protected abstract void onIncomingCallReceived(Context ctx, String number, Date start);
    protected abstract void onIncomingCallAnswered(Context ctx, String number, Date start);
    protected abstract void onIncomingCallEnded(Context ctx, String number, Date start, Date end);

    protected abstract void onOutgoingCallStarted(Context ctx, String number, Date start);      
    protected abstract void onOutgoingCallEnded(Context ctx, String number, Date start, Date end);

    protected abstract void onMissedCall(Context ctx, String number, Date start);

    //Deals with actual events

    //Incoming call-  goes from IDLE to RINGING when it rings, to OFFHOOK when it's answered, to IDLE when its hung up
    //Outgoing call-  goes from IDLE to OFFHOOK when it dials out, to IDLE when hung up
    public void onCallStateChanged(Context context, int state, String number) {
        if(lastState == state){
            //No change, debounce extras
            return;
        }
        switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:
                isIncoming = true;
                callStartTime = new Date();
                savedNumber = number;
                onIncomingCallReceived(context, number, callStartTime);
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                //Transition of ringing->offhook are pickups of incoming calls.  Nothing done on them
                if(lastState != TelephonyManager.CALL_STATE_RINGING){
                    isIncoming = false;
                    callStartTime = new Date();
                    onOutgoingCallStarted(context, savedNumber, callStartTime);                     
                }
                else
                {
                    isIncoming = true;
                    callStartTime = new Date();
                    onIncomingCallAnswered(context, savedNumber, callStartTime); 
                }

                break;
            case TelephonyManager.CALL_STATE_IDLE:
                //Went to idle-  this is the end of a call.  What type depends on previous state(s)
                if(lastState == TelephonyManager.CALL_STATE_RINGING){
                    //Ring but no pickup-  a miss
                    onMissedCall(context, savedNumber, callStartTime);
                }
                else if(isIncoming){
                    onIncomingCallEnded(context, savedNumber, callStartTime, new Date());                       
                }
                else{
                    onOutgoingCallEnded(context, savedNumber, callStartTime, new Date());                                               
                }
                break;
        }
        lastState = state;
    }
} 
```

然后使用它，只需从它派生一个类并实现一些简单的功能，无论您关心哪种调用类型：

```
public class CallReceiver extends PhonecallReceiver {

    @Override
    protected void onIncomingCallReceived(Context ctx, String number, Date start)
    {
        //
    }

    @Override
    protected void onIncomingCallAnswered(Context ctx, String number, Date start)
    {
        //
    }

    @Override
    protected void onIncomingCallEnded(Context ctx, String number, Date start, Date end)
    {
        //
    }

    @Override
    protected void onOutgoingCallStarted(Context ctx, String number, Date start)
    {
        //
    } 

    @Override 
    protected void onOutgoingCallEnded(Context ctx, String number, Date start, Date end)
    {
        //
    }

    @Override
    protected void onMissedCall(Context ctx, String number, Date start)
    {
        //
    }

} 
```

此外，您可以在我的[博客](http://gabesechansoftware.com/is-the-phone-ringing/#more-8)上看到我写的关于代码为何如此的文章。要点链接：[https ://gist.github.com/ftvs/e61ccb039f511eb288ee](https://gist.github.com/ftvs/e61ccb039f511eb288ee)

编辑：更新为更简单的代码，因为我已经重新编写了该类以供自己使用

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-22T06:21:50.273

```
private MyPhoneStateListener phoneStateListener = new MyPhoneStateListener(); 
```

注册

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE); 
```

并注销

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-06-13T10:11:01.167

使用 Android P - Api Level 28： [您需要获得 READ_CALL_LOG 权限](https://developer.android.com/reference/android/telephony/TelephonyManager#ACTION_PHONE_STATE_CHANGED)

**限制访问通话记录**

Android P 将`CALL_LOG`、`READ_CALL_LOG`、`WRITE_CALL_LOG`和`PROCESS_OUTGOING_CALLS`权限从`PHONE`权限组移动到新`CALL_LOG`权限组。该组使用户可以更好地控制和查看需要访问电话敏感信息的应用程序，例如读取电话记录和识别电话号码。

要从 PHONE_STATE 意图操作中读取数字，**您需要`READ_CALL_LOG`权限和`READ_PHONE_STATE`权限**。要从中读取数字`onCallStateChanged()`，您现在`READ_CALL_LOG`只需要权限。您不再需要该`READ_PHONE_STATE`权限。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-03-01T00:20:36.097

[更新： Gabe Sechan](https://stackoverflow.com/a/15564021)发布的非常棒的代码不再有效，除非您明确要求用户授予必要的权限。您可以在主要活动中放置一些代码来请求这些权限：

```
 if (getApplicationContext().checkSelfPermission(Manifest.permission.READ_PHONE_STATE)
            != PackageManager.PERMISSION_GRANTED) {
        // Permission has not been granted, therefore prompt the user to grant permission
        ActivityCompat.requestPermissions(this,
                new String[]{Manifest.permission.READ_PHONE_STATE},
                MY_PERMISSIONS_REQUEST_READ_PHONE_STATE);
    }

    if (getApplicationContext().checkSelfPermission(Manifest.permission.PROCESS_OUTGOING_CALLS)
            != PackageManager.PERMISSION_GRANTED) {
        // Permission has not been granted, therefore prompt the user to grant permission
        ActivityCompat.requestPermissions(this,
                new String[]{Manifest.permission.PROCESS_OUTGOING_CALLS},
                MY_PERMISSIONS_REQUEST_PROCESS_OUTGOING_CALLS);
    } 
```

[另外：正如Gabe 帖子](https://stackoverflow.com/questions/15563921/how-to-detect-incoming-calls-in-an-android-device#comment43477765_15564021)下方的评论中提到的那样，您必须向接收器添加一小段代码，`android:enabled="true`以便在应用程序当前未在前台运行时检测来电：

```
 <!--This part is inside the application-->
    <receiver android:name=".CallReceiver" android:enabled="true">
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-06-27T23:02:49.730

只是为了更新 Gabe Sechan 的答案。如果您的清单要求获得 READ_CALL_LOG 和 READ_PHONE_STATE 的权限，onReceive 将调用**TWICE**。其中一个有 EXTRA_INCOMING_NUMBER，另一个没有。你必须测试哪个有它，它可以以任何顺序发生。

[https://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED](https://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-22T06:27:19.057

这可能会对您有所帮助，并添加要求权限

```
public class PhoneListener extends PhoneStateListener
{
    private Context context;
    public static String getincomno;

    public PhoneListener(Context c) {
        Log.i("CallRecorder", "PhoneListener constructor");
        context = c;
    }

    public void onCallStateChanged (int state, String incomingNumber)
    {

        if(!TextUtils.isEmpty(incomingNumber)){
        // here for Outgoing number make null to get incoming number
        CallBroadcastReceiver.numberToCall = null;
        getincomno = incomingNumber;
        }

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:

            break;
        case TelephonyManager.CALL_STATE_RINGING:
            Log.d("CallRecorder", "CALL_STATE_RINGING");
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:

            break;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-06-22T04:27:36.727

我修复了[**Gabe Sechan**的答案](https://stackoverflow.com/a/15564021/4826457)，我使用了以下代码并且它工作正常。我注意到当接收者意图具有“ **incoming_number** ”键时，我可以获得电话号码。所以我过滤了传入的意图并使用**EXTRA_INCOMING_NUMBER**和**EXTRA_PHONE_NUMBER**来获取电话号码。

```
public class ChangeCallStateListener extends BroadcastReceiver {

    private static String lastState = TelephonyManager.EXTRA_STATE_IDLE;
    private static Date callStartTime;
    private static boolean isIncoming;
    private static String savedNumber;  //because the passed incoming is only valid in ringing

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("CallObserver", "CallReceiver is starting ....");

        List<String> keyList = new ArrayList<>();
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            keyList = new ArrayList<>(bundle.keySet());
            Log.e("CallObserver", "keys : " + keyList);
        }

        if (keyList.contains("incoming_number")) {
            String phoneState = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
            String phoneIncomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            String phoneOutgoingNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

            String phoneNumber = phoneOutgoingNumber != null ? phoneOutgoingNumber : (phoneIncomingNumber != null ? phoneIncomingNumber : "");

            if (phoneState != null && phoneNumber != null) {
                if (lastState.equals(phoneState)) {
                    //No change, debounce extras
                    return;
                }
                Log.e("CallObserver", "phoneState = " + phoneState);
                if (TelephonyManager.EXTRA_STATE_RINGING.equals(phoneState)) {
                    isIncoming = true;
                    callStartTime = new Date();
                    //
                    lastState = TelephonyManager.EXTRA_STATE_RINGING;
                    if (phoneNumber != null) {
                        savedNumber = phoneNumber;
                    }

                    onIncomingCallStarted(context, savedNumber, callStartTime);
                } else if (TelephonyManager.EXTRA_STATE_IDLE.equals(phoneState)) {

                    if (lastState.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
                        //
                        lastState = TelephonyManager.EXTRA_STATE_IDLE;
                        onMissedCall(context, savedNumber, callStartTime);
                    } else {
                        if (isIncoming) {
                            //
                            lastState = TelephonyManager.EXTRA_STATE_IDLE;
                            onIncomingCallEnded(context, savedNumber, callStartTime, new Date());
                        } else {
                            //
                            lastState = TelephonyManager.EXTRA_STATE_IDLE;
                            Log.d("CallObserver", "onOutgoingCallEnded called !! : ");
                            onOutgoingCallEnded(context, savedNumber, callStartTime, new Date());
                        }

                    }
                } else if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(phoneState)) {
                    if (lastState.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
                        isIncoming = true;
                    } else {
                        isIncoming = false;
                    }
                    callStartTime = new Date();
                    savedNumber = phoneNumber;
                    //
                    lastState = TelephonyManager.EXTRA_STATE_OFFHOOK;
                    onOutgoingCallStarted(context, savedNumber, callStartTime);
                }
            }
        }

    }

    protected void onIncomingCallStarted(Context ctx, String number, Date start) {
        Log.d("CallObserver", "onIncomingCallStarted  :  " + " number is  : " + number);
    }

    protected void onOutgoingCallStarted(Context ctx, String number, Date start) {
        Log.d("CallObserver", "onOutgoingCallStarted  :  " + " number is  : " + number);
    }

    protected void onIncomingCallEnded(Context context, String number, Date start, Date end) {
    }

    protected void onOutgoingCallEnded(Context context , String number, Date start, Date end) {
    }

    protected void onMissedCall(Context context, String number, Date start) {
    }

} 
```

*   不要忘记获得运行时许可。

    ```
     <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
    ```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-28T11:58:26.237

这是一个简单的方法，可以避免使用`PhonestateListener`和其他并发症。
所以在这里我们接收到来自 android 的 3 个事件，例如`RINGING`,`OFFHOOK`和`IDLE`. 为了获得所有可能的调用状态，我们需要定义我们自己的状态，如`RINGING`, `OFFHOOK`, `IDLE`, `FIRST_CALL_RINGING`, `SECOND_CALL_RINGING`。它可以处理电话中的每个状态。
请以我们正在接收来自 android 的事件的方式思考，我们将定义我们的 on call 状态。查看代码。

```
public class CallListening  extends BroadcastReceiver {
    private static final String TAG ="broadcast_intent";
    public static String incoming_number;
    private String current_state,previus_state,event;
    public static Boolean dialog= false;
    private Context context;
    private SharedPreferences sp,sp1;
    private SharedPreferences.Editor spEditor,spEditor1;
    public void onReceive(Context context, Intent intent) {
        //Log.d("intent_log", "Intent" + intent);
        dialog=true;
        this.context = context;
        event = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        incoming_number = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
        Log.d(TAG, "The received event : "+event+", incoming_number : " + incoming_number);
        previus_state = getCallState(context);
        current_state = "IDLE";
        if(incoming_number!=null){
            updateIncomingNumber(incoming_number,context);
        }else {
            incoming_number=getIncomingNumber(context);
        }
        switch (event) {
            case "RINGING":
                Log.d(TAG, "State : Ringing, incoming_number : " + incoming_number);
            if((previus_state.equals("IDLE")) || (previus_state.equals("FIRST_CALL_RINGING"))){
                    current_state ="FIRST_CALL_RINGING";
                }
                if((previus_state.equals("OFFHOOK"))||(previus_state.equals("SECOND_CALL_RINGING"))){
                    current_state = "SECOND_CALL_RINGING";
                }

                break;
            case "OFFHOOK":
                Log.d(TAG, "State : offhook, incoming_number : " + incoming_number);
                if((previus_state.equals("IDLE")) ||(previus_state.equals("FIRST_CALL_RINGING")) || previus_state.equals("OFFHOOK")){
                    current_state = "OFFHOOK";
                }
                if(previus_state.equals("SECOND_CALL_RINGING")){
                    current_state ="OFFHOOK";
                    startDialog(context);
                }
                break;
            case "IDLE":
                Log.d(TAG, "State : idle and  incoming_number : " + incoming_number);
                if((previus_state.equals("OFFHOOK")) || (previus_state.equals("SECOND_CALL_RINGING")) || (previus_state.equals("IDLE"))){
                    current_state="IDLE";
                }
                if(previus_state.equals("FIRST_CALL_RINGING")){
                    current_state = "IDLE";
                    startDialog(context);
                }
                updateIncomingNumber("no_number",context);
                Log.d(TAG,"stored incoming number flushed");
                break;
        }
        if(!current_state.equals(previus_state)){
            Log.d(TAG, "Updating  state from "+previus_state +" to "+current_state);
            updateCallState(current_state,context);

        }
    }
    public void startDialog(Context context) {
        Log.d(TAG,"Starting Dialog box");
        Intent intent1 = new Intent(context, NotifyHangup.class);
        intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent1);

    }
    public void updateCallState(String state,Context context){
        sp = PreferenceManager.getDefaultSharedPreferences(context);
        spEditor = sp.edit();
        spEditor.putString("call_state", state);
        spEditor.commit();
        Log.d(TAG, "state updated");

    }
    public void updateIncomingNumber(String inc_num,Context context){
        sp = PreferenceManager.getDefaultSharedPreferences(context);
        spEditor = sp.edit();
        spEditor.putString("inc_num", inc_num);
        spEditor.commit();
        Log.d(TAG, "incoming number updated");
    }
    public String getCallState(Context context){
        sp1 = PreferenceManager.getDefaultSharedPreferences(context);
        String st =sp1.getString("call_state", "IDLE");
        Log.d(TAG,"get previous state as :"+st);
        return st;
    }
    public String getIncomingNumber(Context context){
        sp1 = PreferenceManager.getDefaultSharedPreferences(context);
        String st =sp1.getString("inc_num", "no_num");
        Log.d(TAG,"get incoming number as :"+st);
        return st;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-22T21:04:12.370

@Gabe Sechan，感谢您的代码。它工作正常，除了`onOutgoingCallEnded()`. 它永远不会被执行。测试手机是三星 S5 & Trendy。我认为有2个错误。

1：缺少一对括号。

```
case TelephonyManager.CALL_STATE_IDLE: 
    // Went to idle-  this is the end of a call.  What type depends on previous state(s)
    if (lastState == TelephonyManager.CALL_STATE_RINGING) {
        // Ring but no pickup-  a miss
        onMissedCall(context, savedNumber, callStartTime);
    } else {
        // this one is missing
        if(isIncoming){
            onIncomingCallEnded(context, savedNumber, callStartTime, new Date());                       
        } else {
            onOutgoingCallEnded(context, savedNumber, callStartTime, new Date());                                               
        }
    }
    // this one is missing
    break; 
```

2：如果在函数末尾，`lastState`则不更新。`state`它应该被替换为这个函数的第一行

```
public void onCallStateChanged(Context context, int state, String number) {
    int lastStateTemp = lastState;
    lastState = state;
    // todo replace all the "lastState" by lastStateTemp from here.
    if (lastStateTemp  == state) {
        //No change, debounce extras
        return;
    }
    //....
} 
```

另外，我已经按照您`lastState`的`savedNumber`建议加入了共享偏好。

刚刚使用上述更改对其进行了测试。至少在我的手机上修复了错误。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-23T03:22:01.320

请使用以下代码。它将帮助您获取带有其他呼叫详细信息的来电号码。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/call"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

private static final int MISSED_CALL_TYPE = 0;
private TextView txtcall;

@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txtcall = (TextView) findViewById(R.id.call);

    StringBuffer sb = new StringBuffer();
    Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI, null,
            null, null, null);
    int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER);
    int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE);
    int date = managedCursor.getColumnIndex(CallLog.Calls.DATE);
    int duration = managedCursor.getColumnIndex(CallLog.Calls.DURATION);
    sb.append("Call Details :");
    while (managedCursor.moveToNext()) {
        String phNumber = managedCursor.getString(number);
        String callType = managedCursor.getString(type);
        String callDate = managedCursor.getString(date);
        Date callDayTime = new Date(Long.valueOf(callDate));
        String callDuration = managedCursor.getString(duration);
        String dir = null;
        int dircode = Integer.parseInt(callType);
        switch (dircode) {

        case CallLog.Calls.OUTGOING_TYPE:
            dir = "OUTGOING";
            break;

        case CallLog.Calls.INCOMING_TYPE:
            dir = "INCOMING";
            break;

        case CallLog.Calls.MISSED_TYPE:
            dir = "MISSED";
            break;
        }
        sb.append("\nPhone Number:--- " + phNumber + " \nCall Type:--- "
                + dir + " \nCall Date:--- " + callDayTime
                + " \nCall duration in sec :--- " + callDuration);
        sb.append("\n----------------------------------");
    }
    managedCursor.close();
    txtcall.setText(sb);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

并在您的清单请求中获得以下权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.READ_LOGS"/> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-01T06:03:41.760

您需要一个 BroadcastReceiver ，`ACTION_PHONE_STATE_CHANGED`这将在电话状态从空闲、响铃、摘机改变时调用您的接收者，以便从以前的值和您可以检测到的新值是否是传入/传出呼叫。

所需的许可是：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

但是，如果您还想在该广播中接收 EXTRA_INCOMING_NUMBER，则需要另一个权限：“android.permission.READ_CALL_LOG”

代码是这样的：

```
val receiver: BroadcastReceiver = object : BroadcastReceiver() {
    override fun onReceive(context: Context, intent: Intent) {
        Log.d(TAG, "onReceive")
    }
}

override fun onResume() {
    val filter = IntentFilter()
    filter.addAction("android.intent.action.PHONE_STATE")
    registerReceiver(receiver, filter)
    super.onResume()
}

override fun onPause() {
    unregisterReceiver(receiver)
    super.onPause()
} 
```

在接收器类中，我们可以通过读取这样的意图来获取当前状态：

```
intent.extras["state"] 
```

extras 的结果可能是：

> RINGING -> 如果您的手机正在响铃
> 
> 摘机 -> 如果您正在与某人通话（来电或去电）
> 
> IDLE -> 如果通话结束（呼入或呼出）

使用 PHONE_STATE 广播，我们不需要使用 PROCESS_OUTGOING_CALLS 权限或已弃用的 NEW_OUTGOING_CALL 操作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-24T13:40:03.027

[请参阅Gabe Sechan](https://stackoverflow.com/a/15564021/17848716)的答案。如前所述，在拨出呼叫的情况下，我们有以下状态更改：IDLE -> OFFHOOK -> IDLE。在 Gabe 的原始答案中，`savedNumber`仅当电话状态变为 RINGING 时才设置，这对于拨出电话不是真的。`savedNumber`当电话状态变为 OFFHOOK 时也设置的一个小修复：

```
case TelephonyManager.CALL_STATE_OFFHOOK:
    if(lastState != TelephonyManager.CALL_STATE_RINGING){
        //IDLE to OFFHOOK for example.
        isIncoming = false;
        callStartTime = new Date();
        savedNumber = number;
        onOutgoingCallStarted(context, savedNumber, callStartTime);
    }
... 
```

此修复程序允许将拨打的号码传递给拨出呼叫方法，就像传入号码传递给传入呼叫或未接呼叫方法一样。

# oracle - 找不到符号符号：方法 getDBTransaction()

> ID：15563930
> 
> 赞同：2
> 
> 时间：2013-03-22T06:18:25.997
> 
> 标签：oracle, oracle-apps, oracleapplications

我试图从 OA Framework 调用并发程序。这是代码。但我收到以下错误：

错误：：

```
cannot find symbol symbol : method getDBTransaction() location: class _myclass OADBTransaction tx = (OADBTransaction)getDBTransaction(); 
```

这是方法：

```
public int submitCPRequest(String headerId) {

try {

OADBTransaction tx = (OADBTransaction)getOADBTransaction();
java.sql.Connection pConncection = tx.getJdbcConnection();
ConcurrentRequest cr = new ConcurrentRequest(pConncection);

String applnName = "PO"; //Application that contains the concurrent program
String cpName = "XXMY Concurrent program name "; //Concurrent program name
String cpDesc = "Concurrent Program Description"; // concurrent Program description

// Pass the Arguments using vector
// Here i have added my parameter headerId to the vector and passed the vector to the concurrent program

Vector cpArgs = new Vector();
cpArgs.addElement(headerId);
// Calling the Concurrent Program

int requestId = cr.submitRequest(applnName, cpName, cpDesc, null, false, cpArgs);
tx.commit();

return requestId;

} catch (RequestSubmissionException e) {
OAException oe = new OAException(e.getMessage());
//oe.setApplicationModule(this);
throw oe;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T03:50:57.047

代替

```
OADBTransaction tx = (OADBTransaction)getOADBTransaction();
java.sql.Connection pConncection = tx.getJdbcConnection(); 
```

我试过了

```
OracleConnection pConncection = null;
pConncection = (OracleConnection)TransactionScope.getConnection(); 
```

和工作。它可能会帮助某人。

# java - 在实时应用程序中使用调度程序运行多个作业

> ID：15563940
> 
> 赞同：0
> 
> 时间：2013-03-22T06:19:02.963
> 
> 标签：java, scheduled-tasks, scheduling, quartz-scheduler

谁能帮我在“Quartz”或“Quartz+Spring”之间选择哪个调度程序在实时应用程序中同时运行多个作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:23:45.330

我更喜欢[TimerTask](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)类。

参考本教程

[http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/](http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:24:24.093

Quartz 可以在没有 Spring 的情况下运行多个作业。如果您想要 Spring 带来的特性，请使用 Spring。我会使用 Spring，因为 Spring 是一个很棒的集成框架，可以很容易地将 Quartz 等技术集成到应用程序中。

# sql - 需要 SQL Server 查询

> ID：15563943
> 
> 赞同：-1
> 
> 时间：2013-03-22T06:19:14.273
> 
> 标签：sql, sql-server

我有两张桌子，一张用于`users`，另一张用于`projects`。

`users`and与and`projects`相关联`userid``projectid`

项目是不同的项目类型，从 1 到 100

我的问题是我需要一个查询来查找用户是否拥有三种项目类型 19,20,21

我的脚本返回所有分配给项目的用户 as `19,20,21`，但我需要找出用户是否拥有所有这三个项目

对于用户 21 是基础项目，如果该用户存在 19 和 20 项目，则需要从 19 和 20 中选择最新的项目创建日期

在这方面需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:21:48.810

要选择最新日期，您可以执行如下查询：

```
DECLARE @LatestDate DATETIME

SELECT @LatestDate = MAX(Dates) -- your column with the date stored.
FROM project -- I would guess your dates are stored here
WHERE projectid IN (19, 20) 
```

但是在缺乏信息的情况下很难写出正确的答案

# magento - Magento 1.7 - 无法为支票/汇票销售创建发票

> ID：15563949
> 
> 赞同：1
> 
> 时间：2013-03-22T06:19:26.200
> 
> 标签：magento, magento-1.7

我有一个 Magento 商店，在 1.7.0.2 上运行。

如果付款方式是支票/汇票，我无法将订单从待处理或处理中移至完成。

基本上，在创建发票屏幕上，单击页面底部的 [提交发票] 按钮不会执行任何操作。没有错误，没有 JavaScript 警告，什么都没有。

我尝试了 3 种不同的浏览器，它出现在实时站点和我的登台站点上。

信用卡订单在发货后自动移至完成，在创建发票时通过选择“离线捕获”将采购订单移至完成，但使用“支票/汇票”支付的订单仍然无法使用我创建发票的所有能力。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-17T22:22:25.863

我不知道这是否与您的问题有关，但我遇到了同样的问题。查看页面源代码后，我看到提交发票按钮没有 onclick 事件。

我所做的，这几乎不是一个解决方案，但对我有用的是添加另一个按钮，在单击时添加正确的“onclick”。我称之为“验证发票”。

编辑文件 /app/design/adminhtml/default/default/template/sales/order/invoice/create/items.phtml

在第 124 行，就在上面`<?php echo $this->getChildHtml('submit_button') ?>`

我补充说：

```
<button onclick="$$('div .submit-button').invoke('writeAttribute','onclick','$(\'edit_form\').submit()');alert('Done');">Validate Invoice</button> 
```

点击“验证发票”按钮，即可提交发票。

同样，这几乎不是一个解决方案，但它绝对适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T13:17:23.710

检查您在 magento admin 中启用的付款方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T08:49:45.033

您使用的是什么浏览器和操作系统？我的一个客户也遇到过同样的问题，他们使用资源管理器和窗口。然后我在 Mac 上尝试了 Chrome 并成功了。

# django - Django 总是使用 nginx 返回错误 404

> ID：15563952
> 
> 赞同：2
> 
> 时间：2013-03-22T06:19:33.653
> 
> 标签：django, nginx, fastcgi

我对 Django 有疑问。应用程序的 url 配置如下所示：

```
urlpatterns = patterns(
    '',
    url(r'^api/', include(api_urls.getUrls())),
    url(r'^api/vk.com/buy.coins/$', VkPaymentsView.as_view()),
    url(r'^api/admin/', include(admin.site.urls)),
    url(r'^api-testing/((?P<method_code>[\w\./-]+?)/)?$', TestingView.as_view()),
) 
```

我尝试请求正确的网址：

```
http://example.com/api-testing/ 
```

但我有一个 404 错误：

```
Page not found (404)
Request Method: GET
Request URL:    http://example.com/api-testing// 
```

我看到一个额外的斜线，这可能是问题的原因吗？

使用 nginx 以 FastCGI 模式启动应用程序：

```
python manage.py runfcgi method=threaded host=localhost port=9001 pidfile=$RUNFILES_PATH/$SITE.pid 
```

这是 nginx 中的 fastcgi 参数：

```
fastcgi_param SCRIPT_NAME $fastcgi_script_name;
fastcgi_param SCRIPT_FILENAME /var/www/$domain/$fastcgi_script_name;
fastcgi_param DOCUMENT_ROOT $document_root;

fastcgi_param PATH_INFO $fastcgi_script_name;
fastcgi_param REQUEST_METHOD $request_method;
fastcgi_param REQUEST_URI $uri;
fastcgi_param QUERY_STRING $query_string;
fastcgi_param CONTENT_TYPE $content_type;
fastcgi_param CONTENT_LENGTH $content_length;
fastcgi_pass_header Authorization;
fastcgi_intercept_errors off;

fastcgi_param GATEWAY_INTERFACE CGI/1.1;
fastcgi_param SERVER_SOFTWARE nginx;

fastcgi_param REMOTE_ADDR $remote_addr;
fastcgi_param REMOTE_PORT $remote_port;
fastcgi_param SERVER_ADDR $server_addr;
fastcgi_param SERVER_PORT $server_port;
fastcgi_param SERVER_NAME $server_name;
fastcgi_param SERVER_PROTOCOL $server_protocol;

proxy_set_header X-Forwarded-Host $server_name;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $remote_addr;

fastcgi_param REDIRECT_STATUS 200; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:42:39.787

我找到了解决方案。问题出在 FastCGI 参数`SCRIPT_NAME`中。我在 Django 位置指令中添加了`fastcgi_param SCRIPT_NAME ''`。问题消失了。

```
location @django {
    fastcgi_pass localhost:9001;
    fastcgi_read_timeout 600;
    fastcgi_send_timeout 600;
    include fastcgi_params;
    fastcgi_param SCRIPT_NAME '';
} 
```

# java - 为什么我不断收到 I/O 异常？

> ID：15563953
> 
> 赞同：0
> 
> 时间：2013-03-22T06:19:35.513
> 
> 标签：java, exception, io

我创建了代码来访问我下载的文件，但这不是作业想要的。它希望我使用此处给出的 URL 访问信息。我不确定为什么我不断收到 IO 异常。

```
public static void main(String[] args) throws Exception{

    int test = 0;
    int sum = 0;
    int i = 0;
    try{
    java.net.URL url = new java.net.URL("http://cs.armstrong.edu/liang/data/Scores.txt");
    Scanner input = new Scanner(url.openStream());
    while (input.hasNext()){
        int score = input.nextInt();
        sum += score;
        i++;
    }
    }
    catch(java.net.MalformedURLException ex){
        ex.printStackTrace();
    }
    catch(java.io.IOException ex){
    System.out.println("I/O Errors: no such file");
    }

    int avg = sum / i;
    System.out.println("The average is: " + avg);
    System.out.println("The sum is: " + sum);

} 
```

堆栈跟踪

```
java.net.SocketException: Invalid argument: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.net.NetworkClient.doConnect(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.<init>(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at readfile.main(readfile.java:15) 
```

线程“主”java.lang.ArithmeticException 中的异常：/在 readfile.main(readfile.java:30) 处为零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:44:04.713

代码完全没问题。只需添加以下部分以在连接之前设置代理详细信息。

```
//The follwing settings is needed for Connecting to internet from Local Network
System.getProperties().put("http.proxyHost", "ip.add.of.proxy");
System.getProperties().put("http.proxyPort", "80");
System.getProperties().put("http.proxyUser", "user_name"); // Your username
System.getProperties().put("http.proxyPassword", "*************"); // your password 
```

并且还将下面的代码移动到**try catch**块中，否则如果连接失败，您将得到`divide by zero`异常。

```
int avg = sum / i;
System.out.println("The average is: " + avg);
System.out.println("The sum is: " + sum); 
```

# iphone - 如何获取 UItableViewCell 的附件类型？

> ID：15563956
> 
> 赞同：0
> 
> 时间：2013-03-22T06:19:44.603
> 
> 标签：iphone, ios, cocoa-touch, uitableview

请检查下面的代码..

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   // I may use this object to maintain check state.
    ab_user_info *obj = nil;
    obj = [self.listData objectAtIndex: [indexPath row]];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    [contact_table reloadData]; 
} 
```

根据上面的代码，我已经检查了我点击的所有表格，我应该怎么做才能再次取消选中，我知道我应该将附件类型更改为无，但是什么时候，我怎么知道以前它被检查过？是否有任何 API 可以告诉我们单元格的辅助类型。

我已经在其他表格视图中通过在我的模态 obj 中添加一个额外的成员来跟踪选中和未选中的单元格，但是我只是想知道有什么办法没有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:23:22.607

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:21:20.143

**tableView 是一个 Data Presenter 视图对象**

TableView 仅用于“显示”数据，它不是数据的管理器或跟踪器。您需要在后端跟踪数据的属性。我的意思是，如果您想跟踪哪些行被选中或未选中，它不能由 TableView 管理，您需要使用 NSArray 或任何其他对象类型来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:22:54.510

试试下面的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // I may use this object to maintain check state.
        ab_user_info *obj = nil;
        obj = [self.listData objectAtIndex: [indexPath row]];

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }else{
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
        }

    } 
```

# jquery - JQuery 不透明度过滤器

> ID：15563958
> 
> 赞同：0
> 
> 时间：2013-03-22T06:19:47.627
> 
> 标签：jquery, opacity

我有一个简单的脚本，如果它们与选择不匹配，基本上将无序列表项的不透明度项调整为 0.1。

```
$('ul.filter li a').click(function() {
    var getvalue = $(this).attr('rel');
    $('.portfolioThumbs li.all').animate({opacity:0.1});
    $('.portfolioThumbs li.'+getvalue).animate({opacity:1});
    return false;
}); 
```

我怎样才能添加或修改它，所以那些 0.1 的不透明度项目你不能点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:35:13.270

使用[指针事件](https://developer.mozilla.org/en/docs/CSS/pointer-events)css 属性。

```
$('ul.filter li a').click(function() {
    var getvalue = $(this).attr('rel');
    $('.portfolioThumbs li.all').animate({opacity:0.1}).css('pointer-events', 'none');
    $('.portfolioThumbs li.'+getvalue).animate({opacity:1}).css('pointer-events', 'auto');;
    return false;
}); 
```

注意：`pointer-events`对于 HTML 元素，仅 Chrome 2.0+、Firefox 3.6+ 和 Safari 4.0+ 支持，IE 和 Opera 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:23:57.867

当你设置不透明度时，也许只是添加一个类

`$('.portfolioThumbs li.all').animate({opacity:0.1}).addClass('addedClass');`

进而

```
$('.portfolioThumbs li.addedClass').click(function(e) {
    e.preventDefault();
}); 
```

或者你可以简单地阻止点击而不添加额外的类（因为他们有一个）

```
$('.portfolioThumbs li.all').click(function(e) {
    e.preventDefault();
}); 
```

顺便说一句，你为什么要阻止点击 li 项目.. 在这些 li 中是否有一个锚标签你想阻止点击？

# jquery - 使用鼠标滚轮缩放到 svg 中的特定区域

> ID：15563967
> 
> 赞同：1
> 
> 时间：2013-03-22T06:20:24.657
> 
> 标签：jquery, svg, zooming, mousewheel

我在我的 asp.net 站点中嵌入了一个简单的 svg 地图。我想使用鼠标滚轮缩小和放大该地图。

我使用 mousewheel.js 在一定程度上实现了缩放功能。

但问题是，我无法让地图缩放到特定区域。相反，整个地图都在增长。

SVG

```
<div id="divmap">
    <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" version="1.1">
  <circle cx="100" cy="50" r="40" stroke="black"
  stroke-width="2" fill="red"/>
</svg>     
</div> 
```

JS

```
$(document).ready(function () { 
$("#divmap").bind('mousewheel', function (event, delta) {
                var divheight = $('svg').height();
                if ((divheight - 50) > 100) {
                    var delta_px = delta > 0 ? "+=50" : "-=50";
                    if (delta < 10) {
                        var options = { height: delta_px, width: delta_px };
                        $('svg').css({
                            width: delta_px,
                            height: delta_px

                        });                        
                    }
                }
     });
}); 
```

[http://jsfiddle.net/Tjq8X/1/](http://jsfiddle.net/Tjq8X/1/)

如何像我们在谷歌地图中那样实现对特定区域的缩放？

# android - 创建套接字时参数无效

> ID：15563976
> 
> 赞同：1
> 
> 时间：2013-03-22T06:21:06.767
> 
> 标签：android, c, network-programming

我在创建套接字时遇到问题，配置如下所述，代码：

```
sid = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
```

错误详情 ：`Number - 22, String - Invalid argument`

错误不是很一致。在 10 次运行中，这将发生 3 - 4 次。该代码是为 Android 操作系统编译的（对于 MAC 和 Windows 平台，它适用于 10 个中的 10 个）。请提出可能的原因并解决此问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T08:29:53.850

请检查您的可执行文件运行的目录/路径的权限。请参阅此链接以获取类似的错误并在 Windows 上修复

[http://social.msdn.microsoft.com/Forums/en-US/wsk/thread/3076a9cd-57a0-418d-8de1-07adc3b486bb/](http://social.msdn.microsoft.com/Forums/en-US/wsk/thread/3076a9cd-57a0-418d-8de1-07adc3b486bb/)

# ruby - 在 ruby 的类实例中运行带有参数的传递过程

> ID：15563978
> 
> 赞同：-1
> 
> 时间：2013-03-22T06:21:09.283
> 
> 标签：ruby, proc

这个例子有点做作，但它来自一个测试，所以它只是以这种方式工作，并将帮助我弄清楚如何在实际的库中使用它。我有一个 lambda，定义如下：

```
l = lambda { |v| process(v) } 
```

我想将它传递给一个对象并让 proc 在该对象的上下文中运行。该对象可能如下所示：

```
class LambdaRunner
  def process(v)
    puts v
  end
  def run(proc)
    # code to run proc in the context of the object
  end
end 
```

我熟悉使用 instance_eval 运行 proc 的解决方案。

```
instance_eval(&proc) 
```

但这不起作用，因为我需要将值传递给proc。我已经管理了类似工作解决方案的东西，但感觉很hacky并且容易出错。

```
self.class.class_eval do
  define_method(:runner, &proc)
end
runner('hi from lambda runner') 
```

所有其他方法都已满足`undefined method process`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:28:09.393

请参阅[instance_exec](http://ruby-doc.org/core-1.9.3/BasicObject.html#method-i-instance_exec)的文档（向后移植到 1.8.7）。假设您的 proc 接受一个参数`|v|`，您可能会在`LambdaRunner`.

```
  定义运行（过程）
    instance_exec(v_value, &proc)
  结尾

```

顺便说一句，在没有 Ruby 的版本中`#instance_exec`，你的 hack 基本上是实现它的唯一方法。这就是我为没有反向移植方法的旧红宝石[**实现它的方式。**](https://github.com/kputnam/stupidedi/blob/master/lib/ruby/instance_exec.rb)

# iphone - How to change the cell with selected color when pressing and holding on to the button

> ID：15563988
> 
> 赞同：0
> 
> 时间：2013-03-22T06:21:49.353
> 
> 标签：iphone, ios, ipad

I have an application in which I have two buttons on a tableView and the remaining as cells. I have been using backgroundimage view for my cells. like this `

```
 UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"cell_with_arrow.png"]];
            [cell setBackgroundView:img];
            [img release]; 
```

then i am changing the selected background color as

```
UIView *violetColor = [[UIView alloc] init];
  violetColor.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"trans.png"]];
        cell.selectedBackgroundView = violetColor;
        [violetColor release]; 
```

everything working fine for me in cells,but in my two cells I have added two buttons. when selecting and holding this button also I need to change my selected background color of the background cell in which that button is added. I was done it but the problem the cell background color is changing only when I am releasing my tap on the button. not when I am holding on to that button.I need to change that also when i am holding on to it. I am doing now like this

```
UIView *contentView = (UIView *)[sender superview];
    UITableViewCell *cell = (UITableViewCell *)[contentView superview];
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

  [self tableView:self.tableView didSelectRowAtIndexPath:indexPath]; 
```

in the button action. But in the cells when I am holding the color changes, not with button why? can anybody help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:39:14.567

You can use `UIControlEventTouchDown` event of the button to achieve your requirement instead of `UIControlEventTouchUpInside`.

Hope this is helpful to you.

# android - 无法在活动的包含布局中设置图像视图的来源

> ID：15563996
> 
> 赞同：0
> 
> 时间：2013-03-22T06:22:11.723
> 
> 标签：android, include, android-imageview

我分别创建了两个 XML 布局和 Activity。

1.  XML 文件 A 包含一个带有指向 Activity A 的图像视图的布局。
2.  一个 XML 文件 B，其中我包含了 XML A 并使活动 B 扩展了活动 A
    在活动 A oncreate 中，我为 XML 文件 A 设置了图像源。但它没有设置图像源，也没有出现任何错误。请帮帮我

这是我的代码
Xml A

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MasterBaseLayOut"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/imagebutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_alignParentLeft="true" />   
</RelativeLayout> 
```

XML B

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<include
    android:id="@+id/Master"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/xmlA" />
    <Button
        android:id="@+id/btn1"
        android:onClick="btn1_onclick"
        android:text="@string/title_1"/>
</RelativeLayout> 
```

活动一

```
public class ActivityA extends Activity{

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.XMLA);
    ImageButton img1 =(ImageButton)findViewById(R.id.imagebutton);

    img1.setBackgroundResource(R.drawable.imgtest);

}
} 
```

活动 B

```
public class ActivityB extends ActivityA {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.XmlB);

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:46:52.230

这就是你所拥有的：

**ActivityA 扩展了 ActivityB**

这应该是：

**ActivityB 扩展了 ActivityA**

此外，您应该考虑按“Ctrl + Shift + F”来格式化您的代码，这只是一个小提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:27:01.093

艰难你没有代码，但我假设你没有在 Activity B 中获取 imageView。所以在 Activity B 的 onCreate() 方法中，使用 super 关键字调用 Activity A 的 onCreate，很可能你会得到带有源图像的 imageview。

```
public void onCreate(Bundle b) {
super.onCreate(b);
} 
```