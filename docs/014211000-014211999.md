# StackOverflow 问答 14211000-14211999

# c++ - C++ INT32_MAX 未在此范围内声明

> ID：14211005
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:30:24.910
> 
> 标签：c++

```
INT32_MAX was not declared in this scope 
```

对此有什么解决方案（C++ 中发生错误）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:33:44.797

`INT32_MAX`中定义`<stdint.h>`。你需要：

```
#include <stdint.h> 
```

在有问题的源文件中。

# java - 最佳实践：测试接口合同合规性？

> ID：14211009
> 
> 赞同：6
> 
> 时间：2013-01-08T08:30:50.193
> 
> 标签：java, testing, interface, junit

假设定义了接口

```
interface Foo {
  int getBaz();
  void doBar();
} 
```

进一步假设合约规定每次调用 doBar 时 baz 都会递增。（好的，这是一段人为的代码，但在这里坚持我）

现在我想提供一个可以提供给 Foo 实现者的单元测试，以便他们可以验证他们是否满足所有合同条件。

```
class FooTest {
  protected Foo fooImpl;

  @Test
  public void int testBazIncrement()
  {
    int b = fooImpl getBaz();
    fooImpl.doBar();
    Assert.assertEquals( b+1, fooImpl.getBaz();
  }
} 
```

将测试提供给 Foo 的实施者的最佳实践是什么？在我看来，他们需要一种机制来调用 FooTest 并提供 Foo 或 FooFactory 来构造 Foo 实例。此外，如果有很多测试（想想大接口），那么我想将所有这些测试放在一个 FooTest 类中。

是否有关于如何实施此类测试的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:40:08.413

这是依赖注入的教科书示例。如果你使用 Spring 作为 DI 容器，你可以在`fooImpl`

```
@Inject
protected Foo fooImpl; 
```

您的测试需要使用 注释`@RunWith(SpringJUnit4ClassRunner.class)`，并且由接口提供者来配置 Spring 及其实现。

如果没有 DI 容器，您只需创建一个包含所有测试的抽象测试类和一个提供实现对象的抽象方法。

```
protected abstract Foo createFoo(); 
```

由实现提供者对测试进行子类化并实现抽象方法。

```
class FooImplTest extends FooTestSuper {

@Override
protected Foo createFoo() {
    return new FooImpl();
} 
```

如果您有多个测试，请考虑 JUnit 的`@Suite`注释。它与 Spring 测试运行器兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T09:48:05.003

经过深思熟虑和一些死胡同，我开始使用以下模式：

在下面的：

*   [INTERFACE] 指被测试的接口。
*   [CLASS] 是指被测试接口的实现。

构建接口测试，以便开发人员可以测试实现是否符合接口和随附文档中规定的合同。

被测试的主要项目使用 [INTERFACE]ProducerInterface 的实例来创建被测试对象的实例。[INTERFACE]ProducerInterface 的实现必须跟踪测试期间创建的所有实例，并在请求时关闭所有实例。有一个 Abstract[INTERFACE]Producer 可以处理大部分功能，但需要 createNewINTERFACE 实现。

**测试**

接口测试被标记为 Abstract[INTERFACE]Test。测试通常扩展 Abstract[INTERFACE]ProducerUser 类。此类处理在测试结束时清理所有图表，并为实现者提供一个挂钩以插入他们的 [INTERFACE]ProducerInterface 实现。

一般来说，实现一个测试需要几行代码，如下例所示，新的 Foo 图实现正在测试中。

```
 public class FooGraphTest extends AbstractGraphTest {

        // the graph producer to use while running
        GraphProducerInterface graphProducer = new FooGraphTest.GraphProducer();

        @Override
        protected GraphProducerInterface getGraphProducer() {
                return graphProducer;
        }

        // the implementation of the graph producer.
        public static class GraphProducer extends AbstractGraphProducer {
                @Override
                protected Graph createNewGraph() {
                        return new FooGraph();
                }
        }

} 
```

**套房**

测试套件被命名为 Abstract[INTERFACE]Suite。套件包含几个测试，用于对被测对象的组件进行所有测试。例如，如果 Foo.getBar() 返回 Bar 接口的实例，则 Foo 套件包括对 Foo 本身的测试以及运行 Bar 测试 Bar。运行套件比运行测试要复杂一些。

套件是使用 JUnit 4 @RunWith(Suite.class) 和 @Suite.SuiteClasses({ }) 注释创建的。这有几个开发人员应该知道的影响：

1.  套件类在运行期间不会被实例化。
2.  测试类名称必须在编码时（而不是运行时）已知，因为它们在注释中列出。
3.  测试的配置必须在类加载的静态初始化阶段进行。

为了满足这些要求，Abstract[INTERFACE]Suite 有一个静态变量来保存 [INTERFACE]ProducerInterface 的实例和一些抽象测试的本地静态实现，这些实现通过返回“get[INTERFACE]Producer()”方法静态实例。然后在 @Suite.SuiteClasses 注释中使用本地测试的名称。这使得为​​ [INTERFACE] 实现创建 Abstract[INTERFACE]Suite 的实例相当简单，如下所述。

```
 public class FooGraphSuite extends AbstractGraphSuite {

        @BeforeClass
        public static void beforeClass() {
                setGraphProducer(new GraphProducer());
        }

        public static class GraphProducer extends AbstractGraphProducer {
                @Override
                protected Graph createNewGraph() {
                        return new FooGraph();
                }
        }

} 
```

注意 beforeClass() 方法是用@BeforeClass 注释的。@BeforeClass 导致它在类中的任何测试方法之前运行一次。这将在套件运行之前设置图形生成器的静态实例，以便将其提供给随附的测试。

**未来** 我希望通过使用 java 泛型可以实现进一步的简化和删除重复代码，但我还没有达到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:47:10.143

为什么不只拥有一个从单元测试*InterfaceImplATest*、*InterfaceImplBTest*等中调用的*InterfaceTester呢？*

 *例如

```
@Test
public void testSerialisation()
{
  MyObject a = new MyObject();

  ...

  serialisationTester.testSimpleRoundTrip(a);

  serialisationTester.testEdgeCases(a);

  ... 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T08:35:11.047

你可以实现一个 testDataFactory 来定义你的对象，或者使用 GSon 来创建你的对象（我个人喜欢 GSon，它清晰而快速，你很快就会学会它）。对于测试实现，我建议编写更多测试而不是单个测试。通过这种方式，单元测试可以是独立的，您可以将您的问题隔离在一个封闭的结构中。

[声纳](http://www.sonarsource.org/)

Sonar 是一个对您有很大帮助的工具，可以对您的代码进行分析。您可以从声纳前端看到您的应用程序是如何测试的：

[声纳单元测试](http://www.sonarsource.org/sonar-to-manage-unit-tests-and-improve-code-coverage/)

如您所见，Sonar 可以向您显示您的代码在哪里进行了测试

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T14:12:28.607

以下是我对如何进行合格的单元测试的一些想法：

首先，尝试让你的实现类完全测试，这意味着它的所有方法都应该被 UT 覆盖。当您需要重构代码时，这样做会为您节省大量时间。对于您的情况，它可能是：

```
class FooTest {
    protected Foo fooImpl;

    @Test
    public void testGetBaz() {
    ...
    }

    @Test
    public void testDoBar() {
    ...
    } 
```

}

你会发现你需要检查你的类的内部状态，这并没有错，因为 UT 应该是一种白盒测试。

其次，所有方法都应该单独测试，而不是相互依赖。在我看来，对于您上面发布的代码，它看起来不仅仅是功能测试或集成测试，但它也是必要的。

第三，我认为使用 spring 或其他容器为您组装目标对象不是一个好习惯，这会使您的测试运行相对缓慢，尤其是在需要运行大量测试时。你的类本质上应该是 pojo，如果你的目标对象真的很复杂，你可以在测试类的另一个方法中完成组装。

第四，如果某个类的父接口真的很大，将测试方法分成几组是你应该做的。[这里](http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0)有更多信息。*

# directory - 从字符串转换为 long 类型在 vb.net 中是无效错误

> ID：14211010
> 
> 赞同：1
> 
> 时间：2013-01-08T08:30:51.557
> 
> 标签：directory, vb.net-2010

限制特定用户对文件夹的访问。使用 vb.net.In 变量传递 username 和 pwd 。但在那一行我得到了上面提到的错误。变量mailid和pwd包含一些像xx和yy这样的值

```
code
----
Dim FolderPath As String = "D:\ABC\2011\TAccount\HA\" 'Specify the folder here
Dim UserAccount As String = mailid \ pwd

 Dim FolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(FolderPath)
 Dim FolderAcl As New DirectorySecurity
 FolderAcl.AddAccessRule(New FileSystemAccessRule(UserAccount, FileSystemRights.FullControl, InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Deny))

 FolderInfo.SetAccessControl(FolderAcl) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:48:45.737

尝试将您的线路更改为以下......

```
Dim UserAccount As String = mailid & "\" &  pwd 
```

基本上，我可以理解它正在将您的字符串声明作为 SUM 并尝试将 mailid BY pwd 划分，因此它认为它是一个字符串并试图将其转换为一个数字。

# sql-server - SQL Server 中的每条记录都有唯一的字段吗？

> ID：14211011
> 
> 赞同：1
> 
> 时间：2013-01-08T08:30:55.320
> 
> 标签：sql-server, vb.net, unique, uniqueidentifier

我在 Visual Studio - VB.NET 中工作。

我的问题是我想删除 SQL Server 中的特定行，但我拥有的唯一唯一列是自动递增的标识。

我的工作过程：
1.我在列中添加一行（标识正在递增，但我不知道数字）
2.我想删除上一行

每条新记录都有一个唯一的 ID 吗？我的表可能有 2 条完全相同的记录，只是顺序（身份）不同。

任何想法如何处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T08:42:38.487

SQL Server[有一些函数](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)可以返回为最后一行生成的 ID，每个函数都有自己的特定优势和劣势。

基本上：

*   `@@IDENTITY`如果您不使用触发器，则可以使用
*   `SCOPE_IDENTITY()`适用于您明确调用的代码。
*   `IDENT_CURRENT(‘tablename’)`适用于所有范围内的特定表。

在几乎所有情况下`SCOPE_IDENTITY()`都是您需要的，并且使用它是一个好习惯，与其他选项相反。[此处](https://stackoverflow.com/questions/42648/best-way-to-get-identity-of-inserted-row)
还提供了有关这些方法的优缺点的很好的讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:15:40.337

> > 我想删除上一行

那是你的问题。SQL 中没有“前一行”这样的概念。前面这个词意味着顺序，顺序仅适用于查询，通过添加 ORDER BY 子句来实现。**表没有顺序**。您需要将其改写为“我需要删除满足 <t​​his> 条件的记录。”。这听起来像是迂腐的胡言乱语，但在你承认问题之前，你永远不会找到解决方案。

寻找一种方法来解释插入的标识列的值，然后从中减去 1，这是有很多问题的。在并发下是不正确的。存在回滚时这是不正确的。在 ETL 作业之后它是不正确的。总体而言，永远不要期望单调增加的身份，它们可以自由地跳过间隙，并且您的代码在存在间隙时应该是正确的。

# asp.net-mvc - 为什么安装 Foolproof Validation 后我的设计时视图脚手架不再工作？

> ID：14211012
> 
> 赞同：1
> 
> 时间：2013-01-08T08:31:03.827
> 
> 标签：asp.net-mvc, asp.net-mvc-4, foolproof-validation

我最近将[MVC Foolproof Validation](http://foolproof.codeplex.com/workitem/18815)添加到一个新的 MVC4 应用程序中，现在每次我尝试使用“添加视图”向导构建视图时，我都会收到以下异常 [为简洁而缩短]：

C:\Projects2012\Comair.RI\Comair.RI.UI\CodeTemplates\AddView\CSHTML\Details.tt(0,0) ：错误：运行转换：System.TypeInitializationException：'Foolproof.ContingentValidationAttribute' 的类型初始化程序抛出了一个例外。---> System.IO.FileNotFoundException：无法加载文件或程序集“System.Web.Mvc，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

**注意：**我发现只需在视图模型中注释掉 Foolproof 属性，然后重新编译，就可以让脚手架再次工作。然后我可以取消注释 Foolproof 的东西，它似乎工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:55:36.317

Foolproof 引用 .net 3.5 和 MVC 2\. 下载源代码[http://foolproof.codeplex.com/SourceControl/changeset/view/94877](http://foolproof.codeplex.com/SourceControl/changeset/view/94877)，更改引用，重新编译并将新的 Foolproof dll 添加到您的应用程序中。

（当我这样做时，我必须对项目 xml 进行一些更改，因为下载的文件中没有包含一些位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T05:55:01.087

您需要在系统上安装 ASP.NET MVC 2。

您可以从这里下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=22079](http://www.microsoft.com/en-us/download/details.aspx?id=22079)

# c# - 通过javascript使用回调将图像发送到服务器

> ID：14211015
> 
> 赞同：-2
> 
> 时间：2013-01-08T08:31:12.090
> 
> 标签：c#, asp.net, callback

当我尝试执行代码时，我试图通过回调方法将图像保存在服务器上我得到异常演示代码示例：[http ://catalog.codeproject.com/Articles/17193/Upload-Images-Using-C-JavaScript-and- ASP-NET-2-0-C](http://catalog.codeproject.com/Articles/17193/Upload-Images-Using-C-JavaScript-and-ASP-NET-2-0-C)

> 流 s = File.OpenRead(returnValue); 在cs文件中我得到异常文件未找到

```
 <input id="File1" runat="server"  onchange="PopulateList(this)" name="File1" type="File" />

<script language="javascript" type="text/javascript">

    var counter = 1;
    var newPath = '';
    var filePath = '';

    function PopulateList(obj) {
        // Upload the image to the server folder 
        filePath = obj.value;
        // calls the server's method using client callbacks    
        CallServer(obj.value, '');
    }

    function ReceiveServerData(rValue) {

        // The new path will contain the path of the image which is inside the server's folder 
        newPath = rValue;
        alert(newPath);
        //CreateNestedElements();

    }
</script> 
```

**在 Cs 文件中**

```
protected string returnValue = String.Empty;

protected void Page_Load(object sender, EventArgs e)
{
    string[] filePaths = null;

    //HtmlInputHidden hiddenControl = (HtmlInputHidden)Page.FindControl("list");
    //if (!String.IsNullOrEmpty(hiddenControl.Value))
    //{
    //    filePaths = hiddenControl.Value.Split('|');

    //    //SaveFilesToDB(filePaths);

    //}

    // register the callback script 

    string sbReference = ClientScript.GetCallbackEventReference(this, "arg", "ReceiveServerData", "context");

    string cbScript = String.Empty;

    // check if the script is already registered or not 

    if (!ClientScript.IsClientScriptBlockRegistered("CallServer"))
    {

        cbScript = @" function CallServer(arg,context) { " + sbReference + "}";

        ClientScript.RegisterClientScriptBlock(this.GetType(), "CallServer", cbScript, true);

    }
}

public string GetCallbackResult()
{
    string fileName = System.IO.Path.GetFileName(returnValue);

    string path = Server.MapPath("Images/");
    string fullPath = path + fileName;

    Stream s = File.OpenRead(returnValue);

    byte[] buffer = new byte[s.Length];
    s.Read(buffer, 0, (int)s.Length);

    int len = (int)s.Length;

    s.Dispose();
    s.Close();

    FileStream fs = new FileStream(fullPath, FileMode.Create);
    fs.Write(buffer, 0, len);

    Bitmap bmp = new Bitmap(fs);

    if (System.IO.Path.GetExtension(returnValue).Equals(".gif"))
    {
        bmp.Save(fs, ImageFormat.Gif);
    }
    else
    {
        bmp.Save(fs, ImageFormat.Jpeg);
    }

    bmp.Dispose();

    fs.Dispose();
    fs.Close();                      

    return "Images/" + fileName;
}

public void RaiseCallbackEvent(string eventArgument)
{
    if (!String.IsNullOrEmpty(eventArgument))
    {
        returnValue = eventArgument;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:09:26.400

不幸的是，您链接的[代码项目文章](http://catalog.codeproject.com/Articles/17193/Upload-Images-Using-C-JavaScript-and-ASP-NET-2-0-C)完全是垃圾 - 只有当您使用与客户端和服务器相同的机器并且仅在 Internet Explorer 中，该代码才能工作。在其他情况下，您一定会遇到异常，因为已发送到服务器的文件路径将是客户端计算机上的本地文件路径，并且不会出现在服务器计算机上（`File.OpenRead`由于路径在服务器上无效而导致失败） .

我不确定你想要达到什么 - 如果你想异步上传文件，你会发现很多插件或示例。例如，您可能使用 AJAX 工具包[的 AsyncFileUpload](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)控件。

# c# - 员工 ID 的正则表达式，有一些限制

> ID：14211025
> 
> 赞同：-7
> 
> 时间：2013-01-08T08:31:58.393
> 
> 标签：c#, .net, regex

**问题陈述：**

我正在尝试构建一个正则表达式，它在下面提到的正则表达式中接受两个连续的特殊字符，例如：`/_`或`\\`或`./`或`--`或`\-`或特殊字符（）的任何其他组合：`./\_-`

```
^[a-zA-Z0-9\d]{1}[a-zA-Z0-9\d._/\-]{0,49}$ 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:47:04.637

mlorbetske 的正则表达式可以稍微重写以删除条件正则表达式的使用。我还从正则表达式中删除了多余`0-9`的部分，因为它已被`\d`.

```
^[a-zA-Z\d](?:[a-zA-Z\d]|(?<![._/\\\-])[._/\\\-]){0,49}$ 
```

如果前面的字符不是特殊字符，则该部分`(?:[a-zA-Z\d]|(?<![._/\\\-])[._/\\\-])`匹配字母数字字符或特殊字符`.`, `_`, `/`, 。我还使组 non-capturing ，因为似乎正则表达式仅用于验证。`\``-``(?:pattern)`

我利用零宽度否定后向断言`(?<!pattern)`来断言前面的字符不是特殊字符之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:02:39.217

这个正则表达式似乎符合您的要求

```
^[a-zA-Z0-9\d](?(?<=[\._/\\-])[a-zA-Z0-9\d]|[a-zA-Z0-9\d\._/\\\-]){0,49}$ 
```

例子

```
Regex.IsMatch("a-12--3", Pattern);    //false
Regex.IsMatch("a-12-3", Pattern);     //true 
```

我使用了[条件](http://www.regular-expressions.info/conditional.html) `(?true|false)`语法来表示如果前面的字符（在进入中间组之前）是标点字符之一，那么它后面只能有非标点字符，否则允许任何指定的字符。

`(?<=expression)`语法是一个[零宽度的正向look-](http://www.regular-expressions.info/lookaround.html) behind 。

# ios - 当所有单元格都是静态的时将单元格添加到 UITableView（在情节提要中设计）

> ID：14211031
> 
> 赞同：1
> 
> 时间：2013-01-08T08:32:13.560
> 
> 标签：ios, uitableview

我有`UITableView`5 个部分。所有部分都包含 2 个静态单元格。我想要实现的是在用户点击某个按钮时将一个新单元格插入我的一个部分。我知道如何在`UITableView`仅包含动态单元格时添加带有动画的单元格，我不知道如何使用 100% static 来执行此操作`UITableView`。

关键是在我的一个单元格中，我有一个文本输入和一个按钮。用户点击按钮后，必须验证输入内容。如果验证失败，那么我想添加一个带有错误信息的额外单元格。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:02:23.350

Here you able to find how to add static cells using story board.Show configure table view as static cells and create outlets according to your app design.

![enter image description here](../Images/df5bf6b85768e55afd627eeb3042cad5.png)

# vbscript - ADO CursorLocation 属性如何工作？

> ID：14211035
> 
> 赞同：2
> 
> 时间：2013-01-08T08:32:23.850
> 
> 标签：vbscript, ado

我刚刚被介绍到 ADO 的ADO *CursorLocation****属性***。现在我得到了它的定义。*`CursorLocation Property`*

 *CursorLocation 属性设置或返回一个长整型值，指示游标服务的位置。默认值为`AdUseServer`。

基本上，我正在寻找有关此属性的任何深入知识。如果有人有请分享。在什么情况下我必须考虑它以及它在现实世界的编程中是如何工作的？

同样，以下两个如何工作以及它们的目的是什么？

*   objConnection.CursorLocation
*   objRecordset.CursorLocation

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:51:02.267

[从基础](http://msdn.microsoft.com/en-us/library/office/aa141422%28v=office.10%29.aspx)开始您的研究：

> 服务器游标引擎由 OLE DB 提供程序和数据库引擎本身提供
> 
> 客户端游标引擎是一个 OLE DB 服务组件，它缓冲指定的记录并将其复制到临时表中，该表存储在本地内存中，如果记录数足够大，则存储在磁盘上。

由于在网上搜索“cursorlocation adUseClient adUseServer”会得到孤立的信息片段（其中一些是可疑的），因此请使用一本书 - 例如[Roff ADO](http://shop.oreilly.com/product/9781565924154.do) - 来获取将您关于光标位置的知识应用于您的特定问题所需的背景/上下文。*

# php - 标签/关键字链接更改出去的位置

> ID：14211037
> 
> 赞同：2
> 
> 时间：2013-01-08T08:32:29.973
> 
> 标签：php, wordpress

将标签和关键字出站链接更改为与查看网站按钮相同是否容易？

如果是，您介意与我分享信息吗？

![](../Images/27a69fab35e4229873ccd581eb247444.png)

我从按钮获得了链接代码，但需要找到标签的位置：

```
<?php $PPTDesign->CustomFields($post,""); ?> 
```

# javascript - 激活链接上的快捷键

> ID：14211039
> 
> 赞同：0
> 
> 时间：2013-01-08T08:32:39.030
> 
> 标签：javascript, jquery

我想在链接上激活“ctrl+f1”快捷键？我正在使用脚本！

即当我在它开始下载的链接上按“ctrl+f1”时，我希望这个动作在页面加载时自动发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:40:01.460

```
$(function(e){
   //e is event control from you can track which event fired from keyboard
   if(e.ctrlKey && e.keyCode == 112)
   {
      //do your desired action here.
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:42:05.473

我假设您不需要将其作为页面上的链接，而只是一个从 URL 开始下载的函数，我的意思是在特定页面上，此组合键将开始下载。

也就是说，有一些可用的库可以让你创建这样的函数......

```
shortcut.add("Ctrl+F1", function() {
    // code to begin download, probably a location.href = "blah blah blah";
}); 
```

所需的库和所有代码都[在这里](http://www.openjs.com/scripts/events/keyboard_shortcuts/)。进入这里太啰嗦了，但这将为您提供所需的东西。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-08T08:34:43.533

把你的代码放在 $(function(){ //你的代码在这里 });

您的代码将在您的页面加载后立即执行。

# msbuild - MSDeploy - 无法使用 msbuild 生成的批处理文件进行部署

> ID：14211040
> 
> 赞同：0
> 
> 时间：2013-01-08T08:32:44.357
> 
> 标签：msbuild, nant, msdeploy

使用 Visual Studio 2012 设置的项目已停止。我正在寻找一种使用团队城市自动进行网络部署的方法，我偶然发现了这篇精彩的文章

[http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html)

我能够使用 msbuild 为我的网站（登录）创建一个包，它创建了以下工件

```
PackageTmp
Login.deploy.cmd
Login.deploy-readme.txt
Login.SetParameters.xml
Login.SourceManifest.xml
Login.zip 
```

接下来我想做的是，在使用 Nant 内置的 peek 功能进行一些 xml 转换之后，我只想通过 Nant 调用 Login.deploy.cmd。为了测试这个批处理文件，我使用以下参数运行了这个文件

> login.deploy.cmd /T

产生以下输出

```
=========================================================
SetParameters from:
"C:\Soft\Nant\nant-0.92\bin\LogIn\LogIn\obj\Debug\Package\Login.SetParameters.xm
l"
You can change IIS Application Name, Physical path, connectionString
or other deploy parameters in the above file.
-------------------------------------------------------
 Start executing msdeploy.exe
-------------------------------------------------------
 "C:\Program Files\IIS\Microsoft Web Deploy V3\\msdeploy.exe" -source:package='C
:\Soft\Nant\nant-0.92\bin\LogIn\LogIn\obj\Debug\Package\Login.zip' -dest:auto,in
cludeAcls='False' -verb:sync -disableLink:AppPoolExtension -disableLink:ContentE
xtension -disableLink:CertificateExtension -setParamFile:"C:\Soft\Nant\nant-0.92
\bin\LogIn\LogIn\obj\Debug\Package\Login.SetParameters.xml"  -whatif
Info: Adding sitemanifest (sitemanifest).
Info: Creating application (Default Web Site/Login_deploy)
Info: Adding virtual path (Default Web Site/Login_deploy)
Info: Adding directory (Default Web Site/Login_deploy).
Info: Adding file (Default Web Site/Login_deploy\About.aspx).
Info: Adding directory (Default Web Site/Login_deploy\Account).
Info: Adding file (Default Web Site/Login_deploy\Account\ChangePassword.aspx).
Info: Adding file (Default Web Site/Login_deploy\Account\ChangePasswordSuccess.a
spx).
Info: Adding file (Default Web Site/Login_deploy\Account\Login.aspx).
Info: Adding file (Default Web Site/Login_deploy\Account\Register.aspx).
Info: Adding file (Default Web Site/Login_deploy\Account\Web.config).
Info: Adding directory (Default Web Site/Login_deploy\bin).
Info: Adding file (Default Web Site/Login_deploy\bin\LogIn.dll).
Info: Adding file (Default Web Site/Login_deploy\bin\LogIn.pdb).
Info: Adding file (Default Web Site/Login_deploy\Default.aspx).
Info: Adding file (Default Web Site/Login_deploy\Global.asax).
Info: Adding file (Default Web Site/Login_deploy\Login.aspx).
Info: Adding directory (Default Web Site/Login_deploy\Scripts).
Info: Adding file (Default Web Site/Login_deploy\Scripts\jquery-1.4.1-vsdoc.js).

Info: Adding file (Default Web Site/Login_deploy\Scripts\jquery-1.4.1.js).
Info: Adding file (Default Web Site/Login_deploy\Scripts\jquery-1.4.1.min.js).
Info: Adding file (Default Web Site/Login_deploy\Site.Master).
Info: Adding directory (Default Web Site/Login_deploy\Styles).
Info: Adding file (Default Web Site/Login_deploy\Styles\Site.css).
Info: Adding file (Default Web Site/Login_deploy\Web.config).
Info: Adding ACL's for path (Default Web Site/Login_deploy)
Info: Adding ACL's for path (Default Web Site/Login_deploy)
Total changes: 27 (26 added, 0 deleted, 1 updated, 0 parameters changed, 549895
bytes copied) 
```

日志说它已经创建了一个名为 Login_deploy 的虚拟目录，但是当我从 inet 管理器中检查它时，我没有看到任何具有此名称的虚拟目录。

我在这里有点困惑。欢迎任何建议。

编辑

我还尝试使用以下命令行参数手动调用 msdelpoy exe

```
msdeploy.exe 
-source:package=’Login.zip‘ 
-dest:auto 
-verb:sync 
-disableLink:AppPoolExtension 
-disableLink:ContentExtension 
-disableLink:CertificateExtension 
-allowUntrusted 
-retryAttempts=2 
-setParam:’IIS Web Application Name’=’TargetWebApp‘ 
```

这给出了以下错误

```
Error: Unrecognized argument 'Web'. All arguments must begin with "-".
Error count: 1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T20:36:26.757

尝试运行这个：

```
login.deploy.cmd /Y 
```

/T 开关用于测试，/Y 开关将实际安装包。

# python - 我可以在 wxPython 的 wx.grid.Grid 中加速优化 GridCellAttr 的使用吗？

> ID：14211042
> 
> 赞同：0
> 
> 时间：2013-01-08T08:32:55.207
> 
> 标签：python, wxpython, wxwidgets, wxgrid

我正在制作一个 Windows 应用程序`wx.grid.Grid`，它可以处理非常大的 Microsoft Excel 文档。目前，它会很快打开一个包含 17 列和 12 000 多行的文件，并且我可以流畅地滚动。（这是一个对来自自定义表类的数据进行操作的虚拟表。）

无论如何，当我使用自定义网格单元属性对象时，问题就开始了，例如：

```
grid.SetAttr(row, col, SomeGridCellAttr('#FF0000')) 
```

一旦一行中的每个单元格都具有自定义网格单元格属性，网格的性能就可以达到 99.9% 的水平。如果我每 3 秒重绘 1 次，我很幸运，而不是平滑滚动。我通过使用来修复了大多数这些实例`grid.SetColAttr`，这将性能恢复到了之前的平滑度，但有***一种***情况不起作用。应用程序遍历列中的每个单元格（12 000 个单元格），对数据执行一些处理，并根据结果应用自定义网格单元格属性。一旦完成，网格将成为一个缓慢的噩梦。

有没有办法消除这种可怕的性能损失并保留自定义单元格属性？我怀疑对于了解网格内部工作原理及其单元属性的人来说，答案非常简单。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:08:11.810

设置单元格属性会将新`GridCellAttr`的添加到`GridCellAttrProvider`. 随着列表的增长，查找单元格的特定属性（通过遍历列表并比较坐标）变得越来越慢。

您可以尝试通过实现自己的`PyGridTableBase.SetAttr`和`GetAttr`（例如使用 dict）来加速它：

**编辑：**更新代码以允许覆盖属性并模拟默认实现属性所有权。

```
class MyTable(wx.grid.PyGridTableBase):
    atts = {}

    def Hash(self,row,col):
        #FIXME: assumes a constant number of rows and rows > cols
        return col + row * self.GetNumberRows()

    def SetAttr(self,attr,row,col):
        HASH = self.Hash(row, col)
        if HASH in self.atts:
            # decrement usage count of existing attr
            self.atts[HASH].DecRef()
        #assign new attribute
        self.atts[HASH] = attr

    def GetAttr(self,row,col,kind):
        HASH = self.Hash(row, col)
        if HASH in self.atts:
            attr = self.atts[HASH]
            attr.IncRef() # increment reference count
            return attr
        return None 
```

要允许设置整个行和列，您还必须实现：

```
 def SetRowAttr(self,attr,row):
        for col in range(self.GetNumberCols()):
            attr.IncRef() # increment reference count for SetAttr
            self.SetAttr(attr,row,col)
        attr.DecRef() # attr passed to SetRowAttr no longer needed

    def SetColAttr(self,attr,col):
        for row in range(self.GetNumberRows()):
            attr.IncRef() 
            self.SetAttr(attr,row,col)
        attr.DecRef() 
```

**注意：**当传递一个`GridCellAttr`to时`Set*Attr()`，默认实现将取得该属性的所有权。要重用相同的属性（例如，存储在类变量中），您必须在将其传递给方法之前`Clone()`对其或增加其使用计数（ ） （克隆可能会增加内存消耗）。`IncRef()``Set*Attr()`

上面的示例缺少适当的属性删除：`SetAttr()`可以检查 None 属性并减少指定坐标处的引用计数，然后从 dict 中删除条目。 `SetCol/RowAttr()`可以通过为 row 和 col 添加 dicts 来优化，类似于`SetAttr()`. `GetAttr()`然后可以检查行和col dict中的现有条目，并将属性与单元格dict中的属性合并/覆盖（这是默认实现使用的原则）。为了正确清理 dict(s)，请`DecRef`在之前调用每个条目`.clear()`。

[`wx.grid.GridCellAttrProvider`](http://wxpython.org/docs/api/wx.grid.GridCellAttrProvider-class.html) 或者，您可以从`PyGridTableBase.SetAttrProvider()`. 但是，这将阻止对表的直接访问。

# java - 使用 Jackson Parser 从 JSON 代码中获取属性

> ID：14211043
> 
> 赞同：1
> 
> 时间：2013-01-08T08:32:58.403
> 
> 标签：java, json, jackson

我想使用[Jackson JSON parser](http://jackson.codehaus.org/)解析 JSON 字符串。我要解析的 JSON 代码包含一个数组，其中有一个对象。从这个对象中，我想提取`text`and`retweet_count`属性：

```
[
    {
        "created_at": "Tue Jan 08 08:19:58 +0000 2013",
        "id": 288560667345178600,
        "text": "test tweet",
        "source": "web",
        "truncated": false,
        "user": {
            "id": 941802900,
            "id_str": "941802900",
            "location": ""
        },
        "contributors": null,
        "retweet_count": 0,
        "favorited": false,
        "retweeted": false
    }
] 
```

我尝试使用以下代码来做到这一点：

```
JsonFactory f = new JsonFactory();
JsonParser jp = f.createJsonParser(str);

boolean first = true;

while (jp.nextValue() != JsonToken.END_ARRAY) {
    Tweet tweet = new Tweet();
    while (jp.nextToken() != JsonToken.END_OBJECT) {
        String fieldName = jp.getCurrentName();
        jp.nextToken();

            if (fieldName.equals("text")) {
            tweet.setText(jp.getText());
        } else if (fieldName.equals("retweet_count")) {
            tweet.setRetweetCount(jp.getValueAsLong());
        }
    }
} 
```

但是，我没有得到预期的结果。我认为问题在于在“推文”对象内部，我有另一个“用户”对象，当解析器遇到`}`用户对象时，它认为它是`}`整个推文对象的。你能告诉我如何解决这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:56:19.370

您尝试使用 Streaming API 而不是树模型或数据绑定是否有特殊原因？后两者可能会导致更简单的代码。例如：

```
@JsonIgnoreProperties(ignoreUnknown=true) // so we only include ones we care about
public class Tweet {
    String text;
    int retweet_count;
}

ObjectMapper mapper = new ObjectMapper(); // reusable (please reuse, expensive to create)
Tweet tweet = mapper.readValue(json, Tweet.class);

System.out.println("Tweet with text '"+tweet.text+"', retweet count of "+tweet.retweet_count); 
```

与数据绑定。并使用树模型：

```
ObjectNode root = mapper.readTree(json);
String text = root.path("text").getText();
// and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T16:56:57.947

这是可以工作的更新代码。您需要考虑`user`fieldName 并单独对其进行解析，因此`}`不会将 user 对象视为根对象的结尾

```
while (jp.nextValue() != JsonToken.END_ARRAY) {
    Tweet tweet = new Tweet();
    while (jp.nextToken() != JsonToken.END_OBJECT) {
        String fieldName = jp.getCurrentName();
        jp.nextToken();

        if (fieldName.equals("user")) {
            //Here the current token in BEGIN_OBJECT
            while (jp.nextToken() != JsonToken.END_OBJECT) {
              //You can use the user properties here
            }
        } else if (fieldName.equals("text")) {
            tweet.setText(jp.getText());
        } else if (fieldName.equals("retweet_count")) {
            tweet.setRetweetCount(jp.getValueAsLong());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:35:17.137

您可能应该按照 StaxMan 的建议执行并在对象中正确建模您的数据，但我知道获取所需数据的最快方法类似于下面的代码示例。

```
List<Map<String, Object>> val = readValue(json, new TypeReference<List<Map<String, Object>>>() { });
for (Map<String, Object>> map : val) {
  String tweet = map.get("text");
  Integer retweetCount = map.get("retweet_count");
} 
```

# java - 如何只打开我的应用程序的一个实例

> ID：14211044
> 
> 赞同：0
> 
> 时间：2013-01-08T08:33:08.183
> 
> 标签：java, android

我在这段代码周围找到了

```
android:launchMode="singleTask" 
```

它正在工作，但是当我打开我的应用程序的另一个实例时，旧的实例被删除并创建了新的实例，我希望旧的实例保持活力，而新的实例将转向旧实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:35:49.033

如果活动被系统销毁，当你打开应用程序时，你的活动的一个新实例将被创建。如果它只是暂停/停止，您将恢复“旧”活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:36:24.303

尝试`android:launchMode="singleInstance"`在您的清单中使用活动，看看这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:40:16.550

当您通过后退按钮退出活动时（以及通过其他方式，但不是通过按主页按钮），它会被销毁并在您下次访问时重新创建。但是，您可以将实例数据保存在您将在 onCreate 方法中获得的 savedInstanceState 中。

# phpmyadmin - phpMyAdmin 是否有任何键盘快捷键列表？

> ID：14211048
> 
> 赞同：17
> 
> 时间：2013-01-08T08:33:21.370
> 
> 标签：phpmyadmin, keyboard-shortcuts

我正在尝试为 phpMyAdmin 找到一些键盘快捷键。
要执行任何查询，我必须使用鼠标，单击一个按钮，然后返回键盘。
即使在文档页面上，我也找不到任何快捷方式列表。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-04T00:51:06.357

`Ctrl + Enter`适用于我无需使用鼠标即可提交 SQL 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:51:02.910

我认为 PHPMyAdmin 没有短键，但 MysqlWorkBench 中有一些短[键](http://dev.mysql.com/downloads/workbench/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-02T16:46:57.517

如果您查看左下角，您应该有一个名为“控制台”的选项卡，它将在您的浏览器中打开一个类似控制台的界面，并允许您（主要）使用键盘与系统交互。

[![在此处输入图像描述](../Images/fb0dcd792cac3a3d51ec0531b417253b.png)](https://i.stack.imgur.com/sNvMS.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-23T12:01:51.000

目前 phpMyAdmin 支持以下快捷键：

k - 切换控制台

h - 转到主页

s - 打开设置

`d + s`- 转到数据库结构（前提是您在数据库相关页面中）

`d + f`- 搜索数据库（前提是您在数据库相关页面）

`t + s`- 转到表格结构（前提是您在表格相关页面中）

`t + f`- 搜索表格（前提是您在表格相关页面）

退格 - 带您到旧页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-20T16:46:31.333

最近他们增加了对快捷方式的支持。请参考[https://docs.phpmyadmin.net/en/latest/intro.html#shortcut-keys](https://docs.phpmyadmin.net/en/latest/intro.html#shortcut-keys)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-12T08:14:44.037

按 T​​ab，然后按 Enter。

按 T​​ab 将光标移动到分隔符字段并在该字段中按 Enter 执行查询。(phpMyAdmin 3.4.11)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-27T17:06:09.777

`Alt+Enter`也适用于运行查询。并使用`Backspace`去旧页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-11T12:23:31.673

最新版本的 PHPMyAdmin 支持 `Ctrl + Enter`和`Ctrl+Shift+Enter`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-15T06:03:20.277

您还可以在创建列时使用 shift 和箭头键在列之间移动，因此您不必多次使用鼠标或 tab。

因此，如果显示多列，并且您在名字字段中，则按 shift 和向下箭头将带您到第二列

# javascript - 自动触发关闭 lightbox_me

> ID：14211061
> 
> 赞同：0
> 
> 时间：2013-01-08T08:33:50.050
> 
> 标签：javascript, jquery, lightbox

我正在尝试将[lightbox_me](http://buckwilson.me/lightboxme/)用作消息警报，但是在几秒钟后关闭元素时遇到了一些问题。这可能吗？

这是我的代码

```
$('#message').lightbox_me({
    centered: true,
    closeSelector: "#close-message", 
    overlayCSS:{background: 'black', opacity: .8},
    onLoad: function() { 
        $('#message').find('input:first').focus()
        $ele.lightbox_me();
        }
}); 
```

在敦力的帮助下最终使用了这个，谢谢

```
// test message
$('#message').lightbox_me({
    centered: true,
    overlayCSS:{background: 'black', opacity: .8},
    onLoad: function() { 
        $('#message').find('input:first').focus()
        setTimeout(lightbox, 5000);
        function lightbox() {
            $('#message').trigger('close');
        }
    }   
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:49:57.840

试试这个：

```
setTimeout(function(){
    $('#lightbox_elem_id').trigger('close');
}, seconds*1000); 
```

# jquery - jQuery如何遍历自动完成并设置标题并在悬停时显示

> ID：14211063
> 
> 赞同：0
> 
> 时间：2013-01-08T08:33:52.030
> 
> 标签：jquery, autocomplete

我如何遍历由 jquery 自动完成插件创建的动态列表...我需要遍历列表中的每个元素并设置菜单中列出的每个值的标题...标题应与产品名称相同姓名...

这样做的原因是因为列表中的某些文本使用隐藏

**溢出：隐藏；**风格...

因此，当用户将鼠标悬停在任何元素上时，javascript 必须将产品的当前名称设置为 tile 属性..以便在悬停时显示完整的产品名称...

我怎样才能做到这一点....

到目前为止我尝试过的代码，

```
 jQuery.each(availableTags, function(index,value) {
             this.attr().title = document.getElementById("#").innerHtml;
         }); 
```

还有这个，

```
 jQuery.each("#autocompid", function(index,value) {
             var value = $(this).val();
             $("#autocompid ul li").attr(title,value));
         }); 
```

和我这样的自动完成...

[http://jsfiddle.net/fewds/HwchC/8/](http://jsfiddle.net/fewds/HwchC/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:38:54.190

绑定自动完成后尝试此代码

```
$("#autocompid").data("autocomplete")._renderItem = function (ul, item) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append($("<a/>").html(item.label).attr("title", item.label))
                .appendTo(ul);
        }; 
```

_renderItem 是一个自动完成插件的功能，我们在这里覆盖了该功能。

# asp.net - 服务器标签的格式不正确。将参数传递给javascript函数时

> ID：14211065
> 
> 赞同：0
> 
> 时间：2013-01-08T08:33:59.827
> 
> 标签：asp.net

嗨，在调用 JavaScript 函数时总是遇到麻烦，参数值是绑定到 gridview 的值。我遵循[SO Thread](https://stackoverflow.com/questions/9157738/javascript-server-tag-not-well-formed)但不能用于传递`this`参数。下面是我在我的 aspx 页面中使用的语句。

```
onblur="return ValidateText(this,'<%# Eval("vehicleId") %>')" 
```

但这给了我解析错误`The server tag is not well formed.`我应该如何在设计中调用这个函数（而不是从后面的代码）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T08:50:38.667

这可行，但似乎是一个 HACK，因为我删除了封闭引号（反 XHtml）

```
 onblur=<%# String.Format("return ValidateText(this, '{0}')", Eval("VehicleID")) %> 
```

问题是具有`" "" "`或`' '' '`作为字符串的一部分。

这样做更好（我希望在标记中更容易），在代码隐藏中，例如 RowDataBound 或 ItemDataBound

```
 control.Attributes["onblur"] = String.Format("return ValidateText(this, '{0}')", rowValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:46:01.873

我认为问题是最外层的双引号`"`，将其更改为单引号`'`。

```
onblur='return ValidateText(this,'<%# Eval("vehicleId") %>')' 
```

**更新**

尝试`string.Format()`按照您所指的 SO 问题中所述使用..

```
onblur='<%# System.String.Format("return ValidateText(this, \"{0}\")", Eval("vehicleId")) %>' 
```

# c - 在不运行 x 的情况下在 linux 上显示图像

> ID：14211066
> 
> 赞同：8
> 
> 时间：2013-01-08T08:34:05.000
> 
> 标签：c, raspberry-pi, raspbian

有谁知道通过命令行或 C 显示图像的方法？我可以在不使用 omxplayer 运行 X 的情况下正常运行视频，但我还想通过 C 或我可以从 shell 运行的东西来显示图像而无需加载桌面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:51:45.597

[SVGAlib](http://www.svgalib.org/jay/beginners_guide/beginners_guide.html)可能是您正在寻找的 - 一个无需 X11 即可工作的 C 图形库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:13:12.803

[fbi](https://www.kraxel.org/blog/linux/fbida/)，一个帧缓冲图像查看器，可能会为您解决问题。

否则，您可以尝试[使用 JPEG 到 ASCII](http://csl.sublevel3.org/jp2a/)来粗略查看 JPEG 图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:03:31.863

您可以查看在许多平台上运行良好的[SDL 。](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=33&t=13789)

如果你想做一些更有趣的事情，试试[PyGame](http://www.raspberrypi-tutorials.co.uk/raspberry-pi-game-programming-part-1/)，用它在屏幕上显示/动画位图非常容易（它在 python 中，在 RaspberryPi 上得到很好的支持）。

# html - 部署的 asp.net MVC 应用程序中出现意外的 URL

> ID：14211067
> 
> 赞同：0
> 
> 时间：2013-01-08T08:34:16.800
> 
> 标签：html, asp.net-mvc

我已将我的 asp.net MVC 应用程序部署到生产环境，它按预期工作。但是，当在 IE 中使用 F12 查看正在向服务器发出的网络请求时，我看到使用以下格式发送的请求：

```
http://172.16.10.2/VMSWebTest/(F(pZPg-rE4Nghw1pU6TbKBwuNIeLCVHnerv1BO7BG3hZlmLxqretATeKFdrZU2b9Qr_rg2-wieUwZOJ9PkcwWdRzRSP_oUEI5mdmd4vzbrqbM1))/Tiers 
```

而不是这种格式：

```
http://172.16.10.2/VMSWebTest/Tiers 
```

URL 的 (F(pZPg-rE4Nghw1pU6TbKBwuNIeLCVHnerv1BO7BG3hZlmLxqretATeKFdrZU2b9Qr_rg2-wieUwZOJ9PkcwWdRzRSP_oUEI5mdmd4vzbrqbM1)) 部分来自哪里？为什么？它的目的是什么？

我注意到这似乎只适用于 IE，因为使用 Chrome 时请求 url 符合预期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:47:54.250

您可能是 ASP.NET 无法识别 IE10 的错误的受害者，请参阅此答案中的建议： [IE10 User-Agent 导致 ASP.Net 不发送 Set-Cookie (IE10 not setting cookies)](https://stackoverflow.com/questions/6983732/ie10-user-agent-causes-asp-net-to-not-send-back-set-cookie-ie10-not-setting-coo)

具体来说，有一个可用的修补程序：http: [//support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)

# c# - 实体框架日期时间函数

> ID：14211069
> 
> 赞同：0
> 
> 时间：2013-01-08T08:34:24.540
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我正在尝试根据两个日期时间按日期过滤。`MinTime`并且`MaxTime`在 SQL 中都是可以为空的 DateTimes，我想根据这些进行过滤，但我收到了一个错误：

`This function can only be invoked from LINQ to Entities`

```
public static IEnumerable<ExclusionRule> GetExclusionRules(AppointmentTypes? apptType, string resourceName, TimeSpan? minTime, TimeSpan? maxTime, DayOfWeek? day) {
    using (var db = new BusinessObjectContainer()) {
        db.ExclusionRules.MergeOption = MergeOption.NoTracking;
        var items = db.ExclusionRules;
        int intDay = day.HasValue ? (int) day.Value : -1,
            intApptType = apptType.HasValue ? (int)apptType.Value : -1;
        var filteredApptType = apptType.HasValue ? items.Where(i => !i.t_AppointmentType.HasValue|| i.t_AppointmentType == intApptType) : items;
        var filteredResource = string.IsNullOrWhiteSpace(resourceName) ? filteredApptType : filteredApptType.Where(i => !string.IsNullOrEmpty(i.ResourceName) && resourceName.ToLower().Equals(i.ResourceName.ToLower()));

        IEnumerable<ExclusionRule> filteredMinDate;
        if (minTime.HasValue) {
            filteredMinDate = filteredResource.Where(i => (!i.MinTime.HasValue) || (EntityFunctions.CreateTime(i.MinTime.Value.Hour, i.MinTime.Value.Minute, 0) >= minTime.Value));
        } else {
            filteredMinDate = filteredResource;
        }

        IEnumerable<ExclusionRule> filteredMaxDate;
        if (maxTime.HasValue) {
            // this throws the exception
            filteredMaxDate = filteredMinDate.Where(i => (!i.MaxTime.HasValue) || EntityFunctions.CreateTime(i.MaxTime.Value.Hour, i.MaxTime.Value.Minute, 0) <= maxTime.Value);
        } else {
            filteredMaxDate = filteredMinDate;
        }
        var filteredWeekDay= day.HasValue ? filteredMaxDate.Where(i => !i.t_DayOfWeek.HasValue|| i.t_DayOfWeek == intDay) : filteredMaxDate;
        return filteredWeekDay.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:54:10.007

您`EntityFunctions`在`IEnumerable<ExclusionRule>`. 但是您只能在具有实体框架查询提供程序的 IQueryable 上使用它。因此，您应该从`IQueryable<ExclusionRule>`（从 EF）开始，或者只是`DateTime`以常规.Net 方式创建 s。

^(* Entity Framework 6 中的[DbFunctions](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions.aspx)。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:58:36.800

MinTime.Value.Hour 等可能必须在查询中执行，在我看来，您正在.Net 内存中执行它们。这就是你得到错误的原因。

LINQ 到实体：http: [//msdn.microsoft.com/en-us/library/bb386964.aspx](http://msdn.microsoft.com/en-us/library/bb386964.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:22:13.407

`This function can only be invoked from LINQ to Entities`

`EntityFunctions`仅适用于 LINQ to Entities 查询。

该类`EntityFunctions`包含公开规范函数以在 LINQ to Entities 查询中使用的方法。[http://msdn.microsoft.com/en-us/library/dd456873.aspx](http://msdn.microsoft.com/en-us/library/dd456873.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:00:07.610

我通过`.ToList()`在 DateTime 过滤之前调用来解决这个问题。这会将所有内容都拉入 .NET，因此可以在那里进行查询。

由于我的数据库中的项目数量相对较少，这不是问题。

# java - 如何制作包含点集合的 JScrollPane？

> ID：14211071
> 
> 赞同：2
> 
> 时间：2013-01-08T08:34:43.493
> 
> 标签：java, swing, scroll, jscrollpane

我意识到还有另一个与“无限”JScrollPanes 相关的问题，但是我认为我正在寻找的是一些微妙不同的东西。

基本上，我有一组可以向任何方向拖动的对象，并且滚动视口的范围应始终包含所有这些对象的边界矩形。换句话说，文档没有固定的“来源”。因此，如果您将一个对象拖到左侧，离开屏幕边缘，那么视口范围应该在负方向扩展以包含该对象的新位置。（它也应该在您拖动时自动滚动，但我意识到这是一个单独的问题。）

我不确定如何使用 JScrollPane API 来执行此操作，它似乎希望您设置底层组件的首选大小，但似乎没有该组件的偏移量或原点的概念。（底层的 JViewport 似乎可以做到，但我无法真正弄清楚 JViewport API。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:44:57.380

滚动窗格和视口实际上与它无关。您需要做的是更改视口视图的首选大小，并让滚动窗格/视口负责其余部分。

基本上，您需要做的是计算组件上的最宽和最高点并使视口无效，以强制重新计算其布局要求。

为自己创建一个自定义组件（使用`JPanel`例如）并覆盖该`getPreferredSize`方法。此方法应返回组件所需的大小。

当尺寸要求发生变化时，请致电`revalidate()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:45:30.107

好的，事实证明，简单的答案是滚动窗格不能滚动到负坐标。正如@MadProgrammer 建议的那样，您需要做的是维护一个单独的偏移坐标，即一个点。偏移量存储整个文档的上/左坐标。渲染单个对象时，设置 Graphics2D 对象的变换，使它们向下和向右移动偏移量，以便所有对象都在正数坐标处绘制，即使实际上它们可能位于负坐标处. 同样，在计算滚动窗格的preferredSize 时，将偏移量添加到文档的宽度和高度。滚动条事件的坐标也需要适当偏移。

这使您可以保持文档边界不受限制为正数的错觉，并且文档的边界可以在任何方向无限扩展。

# java - 使用 C++ 编写的 Java 读取共享内存数据

> ID：14211076
> 
> 赞同：6
> 
> 时间：2013-01-08T08:34:53.290
> 
> 标签：java, c, ipc, shared-memory

我有一个 C/C++ 应用程序，它在 Unix 的共享内存中写入数据。现在我想通过使用 Java 的程序读取共享内存数据。

程序应该读取共享内存数据。有可能吗？

如果可能的话，需要一个小的实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T08:41:03.800

看看[这个](http://www.codeproject.com/Articles/2460/Using-Memory-Mapped-Files-and-JNI-to-communicate-b)codeproject 项目（对于 Windows）：

> 使用内存映射文件和 JNI 在 Java 和 C++ 程序之间进行通信

或者，[这个](http://www.downloadplex.com/Linux/Developer-Tools/Components-Libraries/clipc-for-linux_406179.html)库：

> CLIPC 是一个开源 Java 库，它为开发人员提供了 Java 发行版中可能缺少或难以使用的进程间通信 (IPC) 功能。

# c++ - QDomDocument 无法在文本中打开带有 & 的内容

> ID：14211078
> 
> 赞同：1
> 
> 时间：2013-01-08T08:34:57.603
> 
> 标签：c++, xml, qt

我的问题如下：

我打开一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<A>
  <C>A</C>
  <D>212</D>
  <E>Test1 & Test2</E>
</A> 
```

不能像下面这样设置内容：

```
xmlFile->open(QIODevice::ReadOnly|QIODevice::Text;

 QDomDocument doc("mydocument");
 if (!doc.setContent(xmlFile, &msg, &line, &col)) {
       qDebug()-><<"Failure in Column: "<<(QString)col<<"  Line: "+(QString)line;
       return false;
   } 
```

如果我从 XML 文件中删除 & 我可以设置内容。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:16:17.307

这是无效的 XML。您应该用实体替换 &`&amp;` 例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<A>
<C>A</C>
<D>212</D>
<E>Test1 &amp; Test2</E>
</A> 
```

[您可以使用在线验证服务](http://validator.w3.org/#validate_by_input)验证 XML

[XML 预定义实体的列表](http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent)。

# php - PHP中初始化数组的性能影响-哪种方法更快

> ID：14211079
> 
> 赞同：0
> 
> 时间：2013-01-08T08:34:59.093
> 
> 标签：php, arrays, performance

以下两个哪个更快？唯一的区别是显式`array()`初始化。

```
$fields['a'] = 1;
$fields['b'] = 2; 
```

对比

```
$fields = array();
$fields['a'] = 1;
$fields['b'] = 2; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T08:38:23.460

与其担心性能，不如编写合理、易读的代码。这要好得多：

```
$fields = array();
$fields['a'] = 1;
$fields['b'] = 2; 
```

与此相比：

```
$fields['a'] = 1;
$fields['b'] = 2; 
```

您可能会节省几分之一秒的机器；但是您肯定会浪费阅读您代码的人的宝贵时间。他/她将不得不滚动浏览您的代码以找到`$fields`初始化的位置以及它是否已经包含一些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:04:22.967

微基准没有意义，`focus on more readable code`但出于教育目的，这是最快的

```
$array = array('a' => 1,'b' => 2); // fastest PHP 5.4
$array = ['a' => 1,'b' => 2]; // fastest PHP 5.5 
```

[见基准](http://codepad.viper-7.com/1zifCR)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T08:40:16.733

**注意：**这些数字因硬件而异

`0.0000109672546386720`没有 array() 的秒数；

**VS**

`0.0000090599060058594`秒数与数组（）；（快点！）

但使用 array() 更好；似乎更符合逻辑。

# html - 将嵌套元素定位到其直接父级

> ID：14211080
> 
> 赞同：0
> 
> 时间：2013-01-08T08:34:59.343
> 
> 标签：html, css, positioning

不知道我在这里做错了什么，但假设我有两个 div 和一个 h1 元素（或 P1），看起来像这样：

```
<div class="wrapper">
 <div class="top">
    <h1>Content header</h1>
 </div>
</div> 
```

我希望我的元素出现在内部 div 的“中心中间”，即它的直接父级。为了实现这一点，我给它一个 margin-top:50% 和一个 margin-left:50% 的理解，这将使它完全朝向 div 的中心中间。但是，虽然它确实把它带到了中间，但它并没有把它完全带到中心。事实上，它似乎将自己定位于相对于外部 div 的位置，即带有类包装器的那个。

我在这里使用 jsfiddle 重新创建了这个：

[http://jsfiddle.net/KLRsN/](http://jsfiddle.net/KLRsN/)

我指定选择器是错误的还是我的定位本身不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:19:07.957

- 上面的答案并不完全正确，因为文本仍然不会完全垂直居中。

```
.wrapper{
  margin:5px;
  max-height:250px;
  min-height:250px;/*not required only height:250px will do*/
  border:1px solid green;
}

.content
{
  margin:5px;
  border:1px solid black;
  height:100px;/*you have to give the parent element a height and a width within which you wish to center*/
  width:100px;
  position:relative;/*giving it a position relative so that anything inside it will be positioned absolutely relative to this container*/
  text-align:center;/*aligning the h1 to the center*/
}
.content h1{
border:1px solid black;
 position:absolute;
top:50%;
  left:50%;
  line-height:50px;
  width:50px;
    margin-left:-25px;/*half the width of the h1 so that it exactly centers*/
  margin-top:-25px;/*half the height of the h1 so that it exactly centers*/
} 
```

解释：

-ever 元素`html`采用矩形框的形式，因此应用`margin-top:50%`将该框的顶部与父元素的 50% 对齐，而不是框内的文本。- 这就是文本与中心不完全对齐的原因。

- 还必须为父元素（您希望在其中居中 h1）提供宽度和高度。

做你正在寻找的正确方法是使用绝对和相对定位。

- 给出相对的`.container`位置值和`h1`绝对的值

- 通过给 h1 一个宽度和高度，然后我们应用一个等于宽度一半的负左边距和一个等于一半高度的负上边距，以便文本完全居中。

*   还可以了解更多关于定位的信息 - 查看以下[链接](http://www.w3.org/TR/CSS2/visuren.html#positioning-scheme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:20:25.467

如果要在中间显示文本内容，可以使用 text-align:center ，或者可以将宽度应用于 h1 标签并使用 margin:auto。要将其垂直放置在中间，请使用相对位置和 top:50% 。试试这个 CSS

```
.wrapper{
   height:250px;
   min-height:250px;
   border:1px solid green;
  }

 .content{
  position:relative;
  top:50%;
   border:1px solid black;
 }
 .content h1{
   border:1px solid blue;
   margin:auto;
   width:100px;
   background:red
 } 
```

希望能帮助到你

# wpf - 使用属性绑定条件启用混合动画

> ID：14211086
> 
> 赞同：1
> 
> 时间：2013-01-08T08:35:24.727
> 
> 标签：wpf, storyboard, expression-blend

我正在使用混合 4，我正在尝试使用带有条件的 ControlStoryBoardAction 播放一些 StoryBoard：如果我的 UC 中的特定边框元素的宽度大于 250。

我设置了下一个配置： ![设置数据绑定](../Images/a602f1d4eabb4cf3f2465f395e49b4f8.png)

![配置 ControlStoryBoardAction](../Images/15674ccd77a55cad50decf740a4afdf2.png)

当我运行我的应用程序时，我收到以下错误：

“OpeningViewModel”类型的 LeftOperand 不能与运算符“GreaterThan”一起使用。来源=Microsoft.Expression.Interactions

我做错了什么？如何使用元素属性条件启动 StoryBoard？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:53:15.510

我发现我做错了什么。当您选择要绑定的属性值时，您需要通过“元素属性绑定...”来完成。我使用了“数据绑定”，这就是它引发异常的原因。

![在此处输入图像描述](../Images/68f0464699eedaa6168a7a75129b6bd1.png)

# performance - 如何以最大性能标准化 CUDA 中的矩阵列？

> ID：14211093
> 
> 赞同：7
> 
> 时间：2013-01-08T08:35:55.630
> 
> 标签：performance, matrix, cuda, thrust, cublas

如何有效地标准化 CUDA 中的矩阵列？

我的矩阵以列为主，典型大小为 2000x200。

该操作可以用以下matlab代码表示。

```
A = rand(2000,200);

A = exp(A);
A = A./repmat(sum(A,1), [size(A,1) 1]); 
```

这可以通过 Thrust、cuBLAS 和/或 cuNPP 有效地完成吗？

包括 4 个内核的快速实现如下所示。

想知道这些是否可以在 1 或 2 个内核中完成以提高性能，尤其是对于 cublasDgemv() 实现的列求和步骤。

```
#include <cuda.h>
#include <curand.h>
#include <cublas_v2.h>
#include <thrust/device_vector.h>
#include <thrust/device_ptr.h>
#include <thrust/transform.h>
#include <thrust/iterator/constant_iterator.h>
#include <math.h>

struct Exp
{
    __host__ __device__ void operator()(double& x)
    {
        x = exp(x);
    }
};

struct Inv
{
    __host__ __device__ void operator()(double& x)
    {
        x = (double) 1.0 / x;
    }
};

int main()
{
    cudaDeviceSetCacheConfig(cudaFuncCachePreferShared);
    cublasHandle_t hd;
    curandGenerator_t rng;
    cublasCreate(&hd);
    curandCreateGenerator(&rng, CURAND_RNG_PSEUDO_DEFAULT);

    const size_t m = 2000, n = 200;
    const double c1 = 1.0;
    const double c0 = 0.0;

    thrust::device_vector<double> A(m * n);
    thrust::device_vector<double> sum(1 * n);
    thrust::device_vector<double> one(m * n, 1.0);

    double* pA = thrust::raw_pointer_cast(&A[0]);
    double* pSum = thrust::raw_pointer_cast(&sum[0]);
    double* pOne = thrust::raw_pointer_cast(&one[0]);

    for (int i = 0; i < 100; i++)
    {
        curandGenerateUniformDouble(rng, pA, A.size());

        thrust::for_each(A.begin(), A.end(), Exp());

        cublasDgemv(hd, CUBLAS_OP_T, m, n,
                &c1, pA, m, pOne, 1, &c0, pSum, 1);

        thrust::for_each(sum.begin(), sum.end(), Inv());

        cublasDdgmm(hd, CUBLAS_SIDE_RIGHT, m, n, pA, m, pSum, 1, pA, m);
    }

    curandDestroyGenerator(rng);
    cublasDestroy(hd);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:41:15.460

我将 M2090 上 3 种方法的性能与 CUDA 5.0 进行了比较。

1.  [173.179 us] cublas 实现如问题所示
2.  [733.734 us]`thrust::reduce_by_key`来自@talonmies的纯推力实现
3.  [1.508 ms] 纯推力实现`thrust::inclusive_scan_by_key`

![A_{2,000 x 200} 上的性能](../Images/fc948ab726a8f98e6e0d5ceda2857686.png "A_{2,000 x 200} 上的性能")

可以看出，

1.  在这种情况下，cublas 的性能最高；
2.  both `thrust::reduce_by_key`&`thrust::inclusive_scan_by_key`启动多个内核，这会导致额外的开销；
3.  `thrust::inclusive_scan_by_key`与 相比，向 DRAM 写入的数据要多得多`thrust::reduce_by_key`，这可能是内核时间更长的原因之一；
4.  cublas 和推力方法之间的主要性能差异是矩阵列求和。推力较慢可能是因为`thrust::reduce_by_key`旨在减少具有不同长度的段，但`cublas_gemv()`只能适用于固定长度的段（行/列）。

当矩阵 A 大到可以忽略内核启动开销时，cublas 方法仍然表现最好。A_{20,000 x 2,000} 上的分析结果如下所示。

![A_{20,000 x 2,000} 上的性能](../Images/3b85d9274a21e746dc2821b928883e91.png "A_{20,000 x 2,000} 上的性能")

将第一个`for_each`操作与`cublasSgemv`@talonmies 指示的调用融合可能会进一步提高性能，但我认为应该使用手工编写的内核而不是`thrust::reduce_by_key`.

3 种方法的代码如下所示。

```
#include <cuda.h>
#include <curand.h>
#include <cublas_v2.h>
#include <thrust/device_vector.h>
#include <thrust/device_ptr.h>
#include <thrust/transform.h>
#include <thrust/reduce.h>
#include <thrust/scan.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/iterator/discard_iterator.h>
#include <thrust/iterator/permutation_iterator.h>
#include <math.h>

struct Exp: public thrust::unary_function<double, double>
{
    __host__ __device__ double operator()(double x)
    {
        return exp(x);
    }
};

struct Inv: public thrust::unary_function<double, double>
{
    __host__ __device__ double operator()(double x)
    {
        return (double) 1.0 / x;
    }
};

template<typename T>
struct MulC: public thrust::unary_function<T, T>
{
    T C;
    __host__ __device__ MulC(T c) :
        C(c)
    {
    }
    __host__ __device__ T operator()(T x)
    {
        return x * C;
    }
};

template<typename T>
struct line2col: public thrust::unary_function<T, T>
{
    T C;
    __host__ __device__ line2col(T C) :
            C(C)
    {
    }

    __host__ __device__ T operator()(T i)
    {
        return i / C;
    }
};

int main()
{
    cudaDeviceSetCacheConfig(cudaFuncCachePreferShared);
    cublasHandle_t hd;
    curandGenerator_t rng;
    cublasCreate(&hd);
    curandCreateGenerator(&rng, CURAND_RNG_PSEUDO_DEFAULT);

    const size_t m = 2000, n = 200;
    const double c1 = 1.0;
    const double c0 = 0.0;

    thrust::device_vector<double> A(m * n);
    thrust::device_vector<double> B(m * n);
    thrust::device_vector<double> C(m * n);
    thrust::device_vector<double> sum1(1 * n);
    thrust::device_vector<double> sum2(1 * n);
    thrust::device_vector<double> one(m * n, 1);

    double* pA = thrust::raw_pointer_cast(&A[0]);
    double* pB = thrust::raw_pointer_cast(&B[0]);
    double* pSum1 = thrust::raw_pointer_cast(&sum1[0]);
    double* pSum2 = thrust::raw_pointer_cast(&sum2[0]);
    double* pOne = thrust::raw_pointer_cast(&one[0]);

    curandGenerateUniformDouble(rng, pA, A.size());

    const int count = 2;

    for (int i = 0; i < count; i++)
    {
        thrust::transform(A.begin(), A.end(), B.begin(), Exp());
        cublasDgemv(hd, CUBLAS_OP_T, m, n, &c1, pB, m, pOne, 1, &c0, pSum1, 1);
        thrust::transform(sum1.begin(), sum1.end(), sum1.begin(), Inv());
        cublasDdgmm(hd, CUBLAS_SIDE_RIGHT, m, n, pB, m, pSum2, 1, pB, m);
    }

    for (int i = 0; i < count; i++)
    {
        thrust::reduce_by_key(
                thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m)),
                thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m)) + A.size(),
                thrust::make_transform_iterator(A.begin(), Exp()),
                thrust::make_discard_iterator(),
                sum2.begin());
        thrust::transform(
                A.begin(), A.end(),
                thrust::make_permutation_iterator(
                        sum2.begin(),
                        thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m))),
                C.begin(),
                thrust::divides<double>());
    }

    for (int i = 0; i < count; i++)
    {
        thrust::inclusive_scan_by_key(
                thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m)),
                thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m)) + A.size(),
                thrust::make_transform_iterator(A.begin(), Exp()),
                C.begin());
        thrust::copy(
                thrust::make_permutation_iterator(
                        C.begin() + m - 1,
                        thrust::make_transform_iterator(thrust::make_counting_iterator(0), MulC<int>(m))),
                thrust::make_permutation_iterator(
                        C.begin() + m - 1,
                        thrust::make_transform_iterator(thrust::make_counting_iterator(0), MulC<int>(m))) + n,
                sum2.begin());
        thrust::transform(
                A.begin(), A.end(),
                thrust::make_permutation_iterator(
                        sum2.begin(),
                        thrust::make_transform_iterator(thrust::make_counting_iterator(0), line2col<int>(m))),
                C.begin(),
                thrust::divides<double>());
    }

    curandDestroyGenerator(rng);
    cublasDestroy(hd);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T03:43:47.557

您应该能够将第一个`for_each`操作与`cublasSgemv`调用融合为一个`reduce_by_key`调用。如果您将函子定义/重新定义为：

```
struct Accessor : public thrust::unary_function<int,int>
{
    int lda;
    __host__ __device__ Accessor(int _lda) : lda(_lda) {};
    __host__ __device__ int operator()(const int& idx)
    {
        return idx/lda;
    }
};

struct Exp : public thrust::unary_function<double,double>
{
    __host__ __device__ double operator()(const double& x)
    {
        return exp(x);
    }
};

struct Inv : public thrust::unary_function<double,double>
{
    __host__ __device__ double operator()(const double& x)
    {
        return double(1.0) / x;
    }
}; 
```

然后，您可以将标准化输出计算为

```
Accessor columns(m);
thrust::reduce_by_key(
        thrust::make_transform_iterator(thrust::make_counting_iterator(int(0)), columns),
        thrust::make_transform_iterator(thrust::make_counting_iterator(int(m*n)), columns),
        thrust::make_transform_iterator(A.begin(), Exp()),
        thrust::make_discard_iterator(),
        sum.begin());

thrust::for_each(sum.begin(), sum.end(), Inv());

cublasDdgmm(hd, CUBLAS_SIDE_RIGHT, m, n, pA, m, pSum, 1, pA, m); 
```

[免责声明：所有代码在浏览器中编写且未经测试，使用风险自负]

除了减少内核调用的数量外，使用花哨的迭代器还消除了对大型单位矩阵的需要，这应该减少内存占用和内存事务的总数来进行求和和求幂运算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T23:24:59.640

您可以通过以下方式使用[ArrayFire](http://www.accelereyes.com/arrayfire/c/)

```
array A = randu(2000, 2000);
A = exp(A);
A /= tile(sum(A, 0), A.dims(0), 1); 
```

你也可以在推力中做到这一点。但是，如果您要使用矩阵（而不是普通向量），则必须在 for 循环中进行，这不会那么有效。

**免责声明**我是 Accelereyes 的一名开发人员，从事 arrayfire 工作。

**编辑**我正在根据要求生成新的基准。

**编辑**`exp`由于这个基准，我们在代码中发现了性能错误。我们正在审查和修复它。

# node.js - Node.js 集群的主进程中的内存泄漏

> ID：14211102
> 
> 赞同：5
> 
> 时间：2013-01-08T08:36:29.847
> 
> 标签：node.js, memory-leaks

**问题解决了，只需`silent`从 中删除属性`cluster.setupMaster`，就不会出现内存泄漏问题，谁能告诉我为什么会这样？**

我正在做一个由 完成的项目`Node.js`，当我添加`cluster`以利用多 CPU 时，事情变得很奇怪。

我`fork()`从主进程工作进程，问题是我的工作进程工作得很好，没有内存泄漏问题，但主进程有它。

使用的主进程代码`cluster`是：

```
var cluster = require('cluster');
var numCPU = require('os').cpus().length;

cluster.setupMaster({
        exec : '../worker/worker.js',
        silent : true
});

if(cluster.isMaster){
    for(var i=0; i< numCPU;i++){
        cluster.fork();
    }
} 
```

# c - C HTTP 流服务器以流式传输音频分贝级别

> ID：14211105
> 
> 赞同：1
> 
> 时间：2013-01-08T08:36:45.337
> 
> 标签：c, linux, multithreading, alsa, decibel

嗨，我用 C 语言编写了一个分贝电平计，它不断读取 Linux alsa 并在 STDOUT 中输出分贝电平数字。

现在，我想通过 HTTP 查看并将实时数据流式传输到客户端，并使用适当的 js+html 装饰，它的行为就像一个噪音计，带有图形和指针。

因此，我想知道是否有人可以指导我将它们集成到能够实时为多个客户端提供服务的 HTTP 流服务器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:01:15.063

您可以使用多个 C 库。一些 C 库提供 HTTP 服务器功能，例如[libonion](http://www.coralbits.com/libonion/)或[libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)。其他库提供 HTTP 客户端功能，例如[libcurl](http://curl.haxx.se/libcurl/)

所有人都在使用一些事件循环，例如[libev](http://software.schmorp.de/pkg/libev.html)、[libevent](http://libevent.org/)或至少一些多路复用系统调用，如[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)

您还可以使您的应用程序成为 FASTCGI 应用程序。

阅读[Advanced Linux Programming](http://advancedlinuxprogramming.com/)应该会有所帮助。

# jquery - 如何在 jQuery 中处理嵌套事件

> ID：14211115
> 
> 赞同：2
> 
> 时间：2013-01-08T08:38:03.510
> 
> 标签：jquery, events, nested

我有一个

```
<span class="fold"></span> 
```

由 a 处理

```
$('.fold').click(function (event) { ... }); 
```

现在点击事件通过我想分配相同的事件处理程序的ajax添加新的“折叠”类。这可能吗？如果可以，我会在逻辑中的哪个位置“重新”添加我的点击处理程序？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T08:39:30.947

如果您要动态添加需要处理程序的元素，请使用如下委托的事件处理程序：

```
$(document).on('click', '.fold', function(e) {
    // do stuff
}); 
```

请注意，为了获得最佳性能，您应该用元素被附加到的元素`document`的选择器替换。`.fold`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T08:38:52.143

写吧：

```
$(".fold").on("click", function(event){
  //write code
}); 
```

更新：对于动态附加的元素，请写下：

```
$(document).on('click', '.fold', function(e) {
    // write code
}); 
```

# unity3d - 如何在unity3D中立即获取游戏对象的位置

> ID：14211118
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:38:23.483
> 
> 标签：unity3d

我创建了一款游戏，玩家可以将动物拖上来并将其扔出围栏以防御僵尸的家园。它在 iPhone 和三星 Galaxy 上运行完美，但当应用程序在一些速度不快的手机上运行时hardware.here弹出问题：直到动物被拖出围栏一段距离，然后他意识到它已经必须改变状态（当动物被拖过围栏时，它会改变飞行状态）

```
void Update()
{
    if (animal.transform.position.y > fence.transform.position.y)
        Debug.Log("Change to fly state");
} 
```

这种问题怎么解决，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:28:46.950

地狱在那里，

我不确定我是否完全理解了这个问题，但是在手机上，就像在任何平台上一样，性能问题可能会破坏游戏，那是因为您创建的更新功能没有时间再运行一个 cicle（由于低framerate ），从而产生你的问题。

我的建议是首先检查你的游戏是否真的有必要在那些低端上执行，有时它只是不值得工作。

如果您确定需要在它们上运行游戏，我建议您运行分析器并执行优化。

不久前我写了一篇关于此事的博客文章，如果你有兴趣看看： [http ://blog.breakfingers.com/post/29838128841/fighting-for-frames-mobile-optimization](http://blog.breakingfingers.com/post/29838128841/fighting-for-frames-mobile-optimization)

希望它可以使用。

# javascript - Foursquare api中的最大结果数？

> ID：14211120
> 
> 赞同：2
> 
> 时间：2013-01-08T08:38:25.210
> 
> 标签：javascript, foursquare

我正在使用foursquare 场地搜索API 来使用javascript 获取搜索结果。

但我只得到 50 个结果。

如何获得超过 50 个结果（例如，大约 100 或 200 个）？

使用的api：https://api.foursquare.com/v2/venues/search?query=Hotels&ll=40.70590473669712,-73.9780035&limit=50&radius=3200&client_id=clinetid&client_secret=clientsecret

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:41:56.543

Foursquare 的 API 有 50 个结果限制，*但是*，您可以通过使用附近的点获得更多可能重叠的结果，如下所示：

```
https://api.foursquare.com/v2/venues/search?ll=100.100,-30.010&limit=50
https://api.foursquare.com/v2/venues/search?ll=100.110,-30.110&limit=50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:43:54.787

您可以通过参数告诉 Foursquare API 返回更多结果（最多 500 个）`limit`，如此[处所述。](https://developer.foursquare.com/docs/venues/herenow)

# android - 如何控制XML文件中包含标签的内容显示和消失？

> ID：14211121
> 
> 赞同：0
> 
> 时间：2013-01-08T08:38:25.163
> 
> 标签：android

我正在使用以下代码来控制要显示的 XML 文件中包含标签的内容，但对消失一无所知，

```
<include
        android:id="@+id/right2"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="10"
        layout="@layout/detailedinfo" /> 
```

如何让它显示和消失？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:42:30.797

```
<include 
    android:id="@+id/right2"
    android:visibility="visible"/> 
```

在代码中使用这个：

```
findViewById(R.id.right2).setVisibility(View.GONE);

findViewById(R.id.right2).setVisibility(View.VISIBLE); 
```

# c++ - 在 V8 中定义通用访问器回调

> ID：14211125
> 
> 赞同：1
> 
> 时间：2013-01-08T08:38:47.363
> 
> 标签：c++, v8

我目前正在集成 V8，我希望每次访问对象的任何属性时都能收到通知。我知道如何使用 SetAccessor 方法为单个属性定义访问器：

```
void v8::ObjectTemplate::SetAccessor    (   Handle< String >    name,
    AccessorGetter      getter,
    AccessorSetter      setter = 0,
    Handle< Value >     data = Handle< Value >(),
    AccessControl   settings = DEFAULT,
    PropertyAttribute   attribute = None     
) 
```

我想知道是否也可以在 v8 中定义一个通用访问器，每次访问对象的任何属性时都会调用它？类似于前面提到的 SetAccessor 但没有 name 参数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:13:55.497

您正在寻找的方法[`SetNamedPropertyHandler`](http://code.google.com/p/v8/source/browse/trunk/include/v8.h?r=13335#2447)在`v8::ObjectTemplate`类上被调用。您可以通过这种方式捕获和拦截（甚至阻止创建）对象上的任何属性。

# java - 如何防止 JTree 的默认 Cut 事件？

> ID：14211130
> 
> 赞同：0
> 
> 时间：2013-01-08T08:38:53.893
> 
> 标签：java, swing, jtree, keystroke

我要做的是防止在 JTree 上剪切/复制/粘贴，因为我希望所有节点移动都通过拖放完成。

在处理程序的 canImport 和 importData 方法中已经阻止了复制和粘贴，但我想不出如何阻止 Cut。

此外，所有这些都不起作用：

```
Tree.getActionMap().put( "cut", null );

InputMap inputMap = Tree.getInputMap(JComponent.WHEN_FOCUSED);
inputMap.put(KeyStroke.getKeyStroke('X', java.awt.event.InputEvent.CTRL_MASK), null);

ActionMap actionMap = Tree.getActionMap();
actionMap.put("cut", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:55:42.270

这对我有用：

```
ActionMap actionMap = tree.getActionMap();
actionMap.remove("cut");
actionMap.getParent().remove("cut");
actionMap.remove("copy");
actionMap.getParent().remove("copy");
actionMap.remove("paste");
actionMap.getParent().remove("paste"); 
```

# objective-c - 将日期和时间与 nsstring 分开的最佳方法是什么

> ID：14211135
> 
> 赞同：1
> 
> 时间：2013-01-08T08:39:32.090
> 
> 标签：objective-c, ios, cocoa-touch

我有一个`NSStirng`包含`2013-01-08 07:52:00 +0000`. 我想将日期和时间分开`NSStrings`。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:00:29.070

来自服务器的格式是否一致？

您是否需要将日期和时间用于排序等...或进行时间添加或只是显示它们？

如果您只是显示它们并且字符串的格式不会改变，那么您可以这样做......

```
//assumption 1: the format is <date>space<time>space<timezone>
//assumption 2: the only purpose is to display the values sent from the server.

NSString *dateString = @"2013-01-08 07:52:00 +0000";
NSArray *components = [dateString componentsSeparatedByString:@" "];
NSString *date = components[0];
NSString *time = components[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T10:20:56.350

首先要做的是将您的日期字符串转换为`NSDate`：

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss Z"];
NSDate * date = [formatter dateFromString: @"2013-01-08 07:52:00 +0000"]; 
```

然后您可以使用格式化程序再次反转该过程并返回日期和时间。您可以根据需要调整每个的格式。

```
[formatter setTimeStyle:NSDateFormatterShortStyle];  // Get the time only
[formatter setDateStyle:NSDateFormatterNone];
NSString * timeString = [formatter stringFromDate: date];

[formatter setTimeStyle:NSDateFormatterNone];
[formatter setDateStyle:NSDateFormatterShortStyle];  // Get the date only
NSString * dateString = [formatter stringFromDate: date]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:55:02.720

试试下面的代码，

```
 NSString *maindateString = @"2013-01-08 07:52:00 +0000";
    NSDateFormatter *myFormat = [[NSDateFormatter alloc] init];
    [myFormat setDateFormat:@"yyyy-mm-dd hh:mm:ss Z"];
    NSDate *mainDateDate = [myFormat dateFromString:maindateString];
    [myFormat setDateFormat:@"yyyy-mm-dd"];
    NSString *stringDate = [myFormat stringFromDate:mainDateDate]; 
```

检查`NSString` **stringDate**并且有你需要的:-)

编辑：要获取时间字符串，请添加以下代码：

```
 NSDateFormatter *myFormat2 = [[NSDateFormatter alloc] init];
    [myFormat2 setDateFormat:@"HH:mm:ss"];
    NSString *stringTime = [myFormat2 stringFromDate:mainDateDate];
    NSLog(@"%@",stringTime); 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T08:43:50.860

请从该字符串创建一个日期：

[NSString 到 NSDate](https://stackoverflow.com/questions/1353081/nsstring-to-nsdate)

然后使用这些（或将它们转换回字符串）。那是节省。

无论如何，您应该在 NSString 之前有一个 NSDate - 是吗？为什么不保留那个？

# objective-c - 使用线程化核心数据的现代方式

> ID：14211139
> 
> 赞同：0
> 
> 时间：2013-01-08T08:39:58.017
> 
> 标签：objective-c, ios, core-data

在过去，我们按照[Apple 的要求](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)使用 coredata ，`NSManagedObjectContext`每个线程一个，用于`NSNotificationCenter`观察`NSManagedObjectContextDidSaveNotification`，然后将更改合并回来。[Apple 在其示例代码](http://developer.apple.com/library/ios/#samplecode/ThreadedCoreData/Introduction/Intro.html)中向我们展示了正确的方式。

但是，它有点冗长，您必须编写一堆代码才能使其工作。iOS 5 附带了新方法`performBlock:`和`performBlockAndWait:`for `NSManagedObjectContext`. 现在可以将单个传递`NSManagedObjectContext`给所有线程，并使用`performBlock:`或`performBlockAndWait:`包装所有与coredata相关的代码，这应该会更容易，也不会让人头疼，但人们似乎并没有经常谈论这种新方式，甚至苹果本身， iOS 文档的“Concurrency with Core Data”章节和“ThreadedCoreData”示例代码仍然推荐`NSManagedObjectContext`每个线程一个。

所以我想知道，`performBlock(AndWait):`让人们不使用它有什么缺点吗？还是我说的“新方式”只是一个糟糕的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:08:54.743

实际上，`NSManagedObjectContext`每个线程只能有一个仍然是正确的。

如果您仔细阅读[此](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/_index.html)内容：

> 专用队列 (NSPrivateQueueConcurrencyType)。
> 
> 上下文创建和管理私有队列。您无需创建和管理与上下文关联的线程或队列，而是在这里上下文拥有队列并为您管理所有细节（前提是您使用如下所述的基于块的方法）。

这意味着`NSPrivateQueueConcurrencyType`上下文还为您处理操作队列，但您不能在不同线程之间共享该上下文。如果您需要从 UI 访问上下文，这尤其相关，这需要第二个 type 上下文`NSMainQueueConcurrencyType`。

因此，您可能会遇到这样的情况，即 new`performBlock:`和`performBlockAndWait:`操作使多线程访问 Core Data 变得更容易（例如，获取远程数据和更新数据库的长时间运行的任务），但最终，大局保持不变：一个每个线程的上下文。

我认为最好记住这一点以避免丑陋的惊喜。

至于合并更改，您可以使用`NSManagedObjectContextDidSaveNotification`旧的限制模型（您处理线程或操作队列），也可以使用较新的父子上下文关系，`saveContext`将更改从子上下文推送到父上下文。（感谢 flexaddicted 对父子上下文的评论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:20:23.220

> 现在可以将单个传递`NSManagedObjectContext`给所有线程，并使用`performBlock:`或`performBlockAndWait:`包装所有相关的 coredata

你这是什么意思？新的 Core Data 东西的目标，除其他外，它是创建一个父子关系，其中客户端级别的更改可以轻松地直接拉到父级。**每个线程都有自己的上下文**。显然，关于`NSManagedObject`s 的限制仍然存在。当你需要在线程之间共享对象时，你需要共享它们`NSManagedObjectID`的s。

与前一种方法的不同之处在于`performBlock`（及其同步版本）让您不必担心线程环境。使用它们来做事，Core Data 会为你管理事情。

例如，关于您的问题，我不会在旧的 Core Data 项目中使用新东西，因为它们需要重新组织代码。显然，这完全取决于项目有多大。但是如果你开始一个新项目，你应该尝试一下。他们非常具有挑战性！

# extjs - 如何在javascript中解析一个json对象

> ID：14211140
> 
> 赞同：1
> 
> 时间：2013-01-08T08:39:59.497
> 
> 标签：extjs, ext4

我有两个 JSON 对象，我必须在 ExtJs 网格中显示这是我的网格，我从 Servlet 获得的数据我得到一个空的网格

```
//getting the response from Servlet

 var proxy=new Ext.data.HttpProxy({url:'LoginServlet'}); // this is the Servlet

var reader=new Ext.data.JsonReader( //store 

 {

 },[
     {name:'username',mapping:'username'}, //field s of Grid
     {name:'password'}//

   var store=new Ext.data.Store({  //data Store 

  proxy:proxy, //proxy
  reader:reader,//
  root:"obj" //
   });

   store.load(); //loding the store

   var grid=new Ext.grid.GridPanel({   //creating the Grid panel

   store:store,//
   columns:[

       {header:"username",width:60,dataIndex:'username'}, //setting 
       {header:"password",width:60,dataIndex:'password'}
   ],
   renderTo:Ext.getBody(),
   width:420, //
   height:200 
```

# php - 检查字符串中的字符

> ID：14211142
> 
> 赞同：0
> 
> 时间：2013-01-08T08:40:06.570
> 
> 标签：php, string, character

如何在php上检查字符串中的每个字符？

例如我有这个字符串。

```
$a = "sd qwerty utr"; 
```

我想知道字符串的第一个并获取前 3 个字符，然后我想获取字符串的最后 4 个字符。

输出将是`"sd qwe utr"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:45:26.177

有两种方法（您的问题与您的描述不符）：

1.  您可以使用索引单独获取每个字符：

    ```
    $a = "sd qwerty utr";
    $firstchar = $a[0];
    // etc 
    ```

2.  您可以使用[`substr()`](http://php.net/manual/en/function.substr.php)来获取字符串的片段：

    ```
    $a = "sd qwerty utr";
    $part = substr($a, 0, 3);    // first 3 chars of string 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:43:21.783

```
$a = substr($a, 0, 3) . substr($a, -4); 
```

见这里： http: [//php.net/manual/de/function.substr.php](http://php.net/manual/de/function.substr.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:58:19.950

```
$a = "sd qwerty utr";

$first=substr($a, 0, 2);

$sec=substr($a, 3, 3);

$third=substr($a, 10, 3);

echo $first." ".$sec." ".$third; 
```

这将为您提供所需的输出....

有关更多参考，请查看 php`substr()`手册......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:35:45.930

要从您的示例中生成输出，您可以试试这个

```
<?php
$a = "sd qwerty utr";
$ab=explode(' ',$a);
foreach($ab as $i=>$parts)
$ab[$i]=substr($parts,0,3);
$a=implode(' ',$ab);
echo $a;
?> 
```

# google-apps-script - 在谷歌电子表格中搜索和替换数据

> ID：14211144
> 
> 赞同：2
> 
> 时间：2013-01-08T08:40:11.230
> 
> 标签：google-apps-script, google-sheets

为什么我的脚本不起作用？它不搜索数据。消息显示已完成，但床单看起来没有变化。我可以帮助谁？

```
function SearchReplaceInFormula() { //begin work

 var pattern = Browser.inputBox("Enter the search string:"); //text on label
 var replacement = Browser.inputBox("Enter the replacement string:"); //text on label
  if (pattern == "" && replacement == "") // empty 
 {
 Browser.msgBox("Nothing to search and or replace"); 
 return;
  }
//
  var formula = SpreadsheetApp.getActiveRange().getValues(); //get a data all range
  var range = SpreadsheetApp.getActiveRange(); //get range
  var crows = range.getNumRows(); //last rows
  var ccols = range.getNumColumns(); //last columns
  var row = 0; //
  for (row = 1; row <= crows; row++)//
  {
  for (col=1; col <= ccols; col++) //
  {
 var cell = range.getCell(row, col);
 var formula = cell.getValues(); //may be getValue
 var updated = formula; //update
 while(-1 != updated.indexOf(pattern)) //what -1
 {
   updated = updated.replace(pattern, replacement); //replace before update
 }
 if (formula != updated)
 {
   cell.setFormula(updated) //set vales?
 }
  }
 }   
  Browser.msgBox("Done replacing " + pattern + " with " + replacement); //shows always
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:19:40.943

我重新编写了您的代码并添加了一个菜单选项，以便可以轻松访问它。

**更新：2013**年 9 月 1 日添加了一段额外的代码来检查是否有更改（数组比较）。
还包括电子表格的一个工作示例：[在谷歌电子表格中搜索和替换数据](https://docs.google.com/spreadsheet/ccc?key=0AluAYY6ZHeWYdEk4NTF1aldKNDBWYlVmd2sxSVB4N0E)

```
function onOpen() {
  // get active spreadsheet
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // create menu
  var menu = [{name: "Searh/Replace", functionName: "SearchReplaceInFormula"}];

  // add to menu
  ss.addMenu("Extra's", menu);  
}

function SearchReplaceInFormula() {
  // set parameters
  var pattern = Browser.inputBox("Enter search string:"); 
  var replacement = Browser.inputBox("Enter replacement string:"); 

  // inform user if nothing was entered
  if(pattern == "" && replacement == "") {
    Browser.msgBox("Nothing to search and or replace");
    return;
  }

  // get ranges and data
  var dataRange = SpreadsheetApp.getActiveRange().getValues();
  var copyRange = dataRange;
  var range = SpreadsheetApp.getActiveRange(); 
  var ccols = dataRange[0].length, crows = dataRange.length; 

  // itterate through data
  for (var i=0; i<crows; i++) { 
    for (var j=0; j<ccols; j++) {      
      if(copyRange[i][j].indexOf(pattern) != -1) {
        copyRange[i][j] = copyRange[i][j].replace(pattern, replacement);
      }
    }
  }

  // set changed values
  range.setValues(dataRange);

  // check if array's are equal
  var equal = arraysEqual(copyRange, dataRange);

  // inform user what happend
  if(equal == true) {
    Browser.msgBox("No matches found...");
  } else {
    Browser.msgBox("Done replacing " + pattern + " with " + replacement); 
  }
}

function arraysEqual(arr1, arr2) {
  if(arr1.length !== arr2.length)
    return false;

  for(var i = arr1.length; i--;) {
    if(arr1[i] !== arr2[i])
      return false;
  }
  return true;
} 
```

# ruby - 如何返回并修复 IRB 中的语法？

> ID：14211150
> 
> 赞同：2
> 
> 时间：2013-01-08T08:40:27.253
> 
> 标签：ruby, irb

每当我不小心在 IRB 中输入了错误的语法时，我就永远无法回头修复它，它不断地提供新的命令行。

例如：

```
1.9.3p194 :035> justin.find{|key,value|key=='phone_number
1.9.3p194 :036> justin.find{|key,value|key=='phone_number'}
1.9.3p194 :037>
1.9.3p194 :038>
1.9.3p194 :039> 
```

在我修正了语法中的错字后，如示例中的 :036 行所示，它不会执行该方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:49:32.280

每个人都指出了原因，没有人回答这个问题。

使用**Control + C**结束错误的行。

当然，如果不执行，它就会有错误。

进入新行后，您可以使用向上键在历史记录中搜索以进行编辑。

顺便说一句，奇怪的是你 irb 没有以任何方式告诉你你的行没有被执行：

如您所见，我的 irb 提示输入特殊字符以结束命令（可能如果我有多个括号/引号等，它将指向第一个：

```
irb(main):001:0> justin.find{|key,value|key=='phone_number
irb(main):002:1' ^C

   (Up Key)

irb(main):002:0> justin.find{|key,value|key=='phone_number'
irb(main):003:1> 
```

Windows 版本 (ruby 1.9.3p327 (2012-11-10) [i386-mingw32] 我在工作中得到了什么 :( ) 但我确定我在 Gentoo 和 Suse 中得到了类似的东西

编辑：

来自右侧的相关帖子。您可以获得更好的提示传递作为选项

irb --prompt inf-ruby

[如何获得“irb(main):001:0>”提示而不是“>>”](https://stackoverflow.com/questions/520099/how-do-i-get-the-irbmain0010-prompt-instead-of?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:10:37.877

忽略此答案中堆栈溢出的语法突出显示。这是误导。

线

```
justin.find{|key,value|key=='phone_number 
```

包含以 . 开头的多行字符串的开头`phone_number`。由于你还没有完成它——通过输入第二个`'`——IRB 礼貌地等待你完成字符串。进入

```
justin.find{|key,value|key=='phone_number'} 
```

因为第二行导致完成您已经开始的字符串，输入方法调用或局部变量`phone_number`，然后添加另一个字符串的开头，现在以`}`. 此时 IRB 看到的代码看起来像

```
justin.find{|key,value|key=="phone_number\njustin.find{|key,value|key=="phone_number'} 
```

它还没有完成——因为最后一个字符串没有终止——所以 IRB 等待更多的输入。

随后的每一个

```
justin.find{|key,value|key=='phone_number'} 
```

让你留在这个循环中。

Ruby 不会打断你并告诉你有语法错误。原因是 IRB 以每条线¹为基础运作，而您在技术上还没有完成这条线。实际上，表达式中的字符串中有换行符，但代码中没有换行符会导致表达式终止。

现在我希望你的问题的答案是显而易见的。为了让 IRB 退出循环，请输入

```
' 
```

* * *

¹*每个表达式*会更精确，但在此答案的上下文中，*每行是令人满意的。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T11:03:34.003

我在行号后面有一个撇号：

```
1.8.6 :200 > justin.find{|key,value|key=='phone_number
1.8.6 :201'> 
```

看看您是否可以配置提示，以便您了解 IRB 在继续语句的情况下期望什么。另请参阅[什么是“如果/除非”等](https://stackoverflow.com/questions/13837722/what-is-the-class-of-if-unless-etc/13839206#13839206)

# xml - 使用 xml/xslt 将数据显示为 2 列

> ID：14211153
> 
> 赞同：0
> 
> 时间：2013-01-08T08:40:33.847
> 
> 标签：xml, xslt, multiple-columns

xml 数据：
布伦南在 2008 年退出了对间谍机构最高职位的考虑，原因是有人质疑他与乔治·W·布什政府期间使用的严厉审讯技术有关。当共和党人就奥巴马政府机密信息的泄露向他施压时，他肯定会再次面临民主党人对这个问题的质疑。

预期结果：内容显示在 2 列中，如[http://jackbu.host22.com/t.jpg](http://jackbu.host22.com/t.jpg)

请在下面找到我的评论。我已在此处附加了 xml/xsl 文件链接。

# java - GridBagLayout：在一条垂直线上对齐 JPanel

> ID：14211156
> 
> 赞同：0
> 
> 时间：2013-01-08T08:40:51.403
> 
> 标签：java, swing, jpanel, gridbaglayout

> **可能重复：**
> [GridBagLayout 中的对齐问题](https://stackoverflow.com/questions/14202442/alignment-issue-in-gridbaglayout)

请看下面的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestForm extends JFrame
{
    private JLabel firstLabel, secondLabel, thirdLabel, fourthLabel, fifthLabel;

    private JTextField firstTxt, secondTxt, thirdTxt, fourthTxt, fifthTxt;

    private JPanel centerPanel;
    private JPanel southPanel;
    private JLabel comboLabel;
    private JComboBox percentageCombo;
    private JLabel endTargetLabel;
    private JLabel mustLoseLabel;

    private GridBagLayout mainLayout = new GridBagLayout();
    private GridBagConstraints mainCons = new GridBagConstraints();

      public TestForm()
      {
        //Declaring instance variables  
        firstLabel = new JLabel("First: ");
        secondLabel = new JLabel("Second: ");
        thirdLabel = new JLabel("Third: ");
        fourthLabel = new JLabel("Fourth: ");
        fifthLabel = new JLabel("Fifth: ");        
        comboLabel = new JLabel("Select System Performance: ");

        firstTxt = new JTextField(7);
        secondTxt = new JTextField(7);
        thirdTxt = new JTextField(7);
        fourthTxt = new JTextField(7);
        fifthTxt = new JTextField(7);

        endTargetLabel = new JLabel("Your End Target Performance is: ");
        mustLoseLabel = new JLabel("Sammple Performance You Must Lose: ");  

        percentageCombo = new JComboBox();
        percentageCombo.addItem("No Value is Set");

       this.setLayout(mainLayout);
        mainCons.gridy = 1;
        mainCons.gridx = 1;
        mainCons.anchor = GridBagConstraints.NORTH;
        this.add(createNorthPanel(),mainCons);

        mainCons.anchor = GridBagConstraints.WEST;
        mainCons.gridy = 2;
        mainCons.gridx = 1;
        mainCons.anchor = GridBagConstraints.CENTER;
        mainCons.insets = new Insets(15,0,0,0);
        this.add(createCenterPanel(),mainCons);

        mainCons.anchor = GridBagConstraints.SOUTH;
        mainCons.gridy = 3;
        mainCons.gridx = 1;
        this.add(createSouthPanel(),mainCons);

        this.setTitle("The Test Form");
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private JPanel createNorthPanel()
    {
        JPanel northPanel = new JPanel();

        northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout());

        JLabel logoLabel = new JLabel();
        logoLabel.setIcon(new ImageIcon(getClass().getResource("/images/TESTING-LOGO.gif")));

        northPanel.add(logoLabel);

        return northPanel;
    }

    private JPanel createCenterPanel()
    {
        centerPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        centerPanel.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(firstLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(firstTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,10,0,0);
        centerPanel.add(secondLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(secondTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(thirdLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(thirdTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,10,0,0);
        centerPanel.add(fourthLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(fourthTxt,gbc);

        gbc.gridx = 5;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,7,0,0);
        centerPanel.add(fifthLabel,gbc);

        gbc.gridx = 6;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(fifthTxt,gbc);

        centerPanel.setBorder(BorderFactory.createTitledBorder("The Testing Form"));
        centerPanel.validate();

        return centerPanel;

    }

     private JPanel createSouthPanel()
    {
        southPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        southPanel.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        southPanel.add(comboLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        southPanel.add(percentageCombo,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,0,0,0);
        southPanel.add(endTargetLabel,gbc);

        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,0,0,0);
        southPanel.add(mustLoseLabel,gbc);

        southPanel.setBorder(BorderFactory.createTitledBorder("See Your End Target "));

        return southPanel;
    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new TestForm();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这是我使用此代码时得到的

![在此处输入图像描述](../Images/3667d9b7c0e2b4642000a84c4476206b.png)

但是，我需要以下

1.  southPanel 和 centerPanel 都应该出现在一条垂直线上。在这里，southPanel 与 centerPanel 不在同一行，它更靠右对齐
2.  两个面板都应该向左移动一点（如图所示）
3.  两个面板应具有相同的大小
4.  面板尺寸太小。它们应该比现在大一点，同时不改变其组件的空间和对齐方式。

![在此处输入图像描述](../Images/2c95d7f5137162097b5aac16523f7578.png)

如果您知道至少一个问题的答案，请提供帮助。我也附上徽标。

![在此处输入图像描述](../Images/5afc949c4f1abfe15fb2134ceedf41f2.png)

注意：从代码中删除更多元素不会产生原始问题。这就是为什么这段代码有点大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T08:50:36.823

您需要为每个面板分配更多“权重”，这将迫使它们在给定空间内对齐。

![在此处输入图像描述](../Images/a46ab356930ba3847cc25f50b56394dc.png)

```
this.setLayout(mainLayout);
mainCons.gridy = 1;
mainCons.gridx = 1;
mainCons.anchor = GridBagConstraints.NORTHWEST;
mainCons.weightx = 1;
this.add(createNorthPanel(), mainCons);

mainCons.anchor = GridBagConstraints.WEST;
mainCons.weightx = 1;
mainCons.gridy = 2;
mainCons.gridx = 1;
mainCons.insets = new Insets(15, 0, 0, 0);
this.add(createCenterPanel(), mainCons);

mainCons.anchor = GridBagConstraints.SOUTHWEST;
mainCons.weightx = 1;
mainCons.gridy = 3;
mainCons.gridx = 1;
this.add(createSouthPanel(), mainCons); 
```

作为一个侧节点，您实际上可以使用相同的实例`GridBagConstraints`并仅更改您需要的那些值，这使您的代码更易于阅读（更不用说减少您需要输入的数量；））

您可能想看看[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T08:51:47.367

最简单的解决方案是`BorderLayout`为您的 JFrame 选择并添加您的 3 个面板，北、中和南，并带有约束`BorderLayout.NORTH, BorderLayout.CENTER`和`BorderLayout.SOUTH`.

否则，您需要修改您的`mainCons`：

```
mainCons.weightx = 1.0;
mainCons.anchor = GridBagConstraints.WEST; 
```

`anchor`并且`fill`总是要求`weightx`和/或`weighty`设置为大于 0 的值。

如果您希望两个面板具有相同的“宽度”，您还可以设置

```
mainCons.fill = GridBagConstraints.HORIZONTAL; 
```

# javascript - 如何使用由 aaData js 数组启动的 dataTables 中的选项？

> ID：14211160
> 
> 赞同：0
> 
> 时间：2013-01-08T08:41:08.713
> 
> 标签：javascript, jquery, arrays, datatables

我已经用这样的`aaData`对象和选项初始化了我的数据表：

```
$('#dataTable').dataTable(dataTableObj, {
    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": true,
    "bSort": false,
    "bInfo": false,
    "bAutoWidth": false
}); 
```

浏览器呈现我的表格，但没有激活选项。我已经尝试了每一种组合，但根本没有从我的桌子上得到任何回应。

PS。我的桌子很好用。特别是有大量数据（23 列和超过 1000 行）。
**编辑：**
谢谢大家。该问题通过将主对象切片为 jquery dataTables 的 2 个不同对象来解决。它需要`aaData`and `aoColumns`，用于数据和列标题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:58:47.140

我自己解决了它（并为此感到自豪：D）。

为 jquery dataTables分解`dataTableObj`为 2 个不同的对象。它需要 aaData 和 aoColumns，用于数据和列标题！像这样的东西：

```
$('#dataTable').dataTable({
    "aaData": dataCnt,
    "aoColumns": columnsHd
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:32:45.397

请尝试按照以下代码使用数据表

```
$('#dataTable').dataTable({
    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": true,
    "bSort": false,
    "bInfo": false,
    "bAutoWidth": false
}); 
```

# python - Python ImportError：没有名为 psycopg2 的模块

> ID：14211161
> 
> 赞同：2
> 
> 时间：2013-01-08T08:41:11.773
> 
> 标签：python, django, psycopg

我正在尝试在 CentOS 5.8 系统上安装 Django 和 PostgreSQL。

它最初有 Python 2.4，我添加了 remi 存储库来安装 Python 2.6。这很好用，而且我似乎都在工作；如果我输入“python”，它是 2.4 版本，如果我输入`python2.6`它是 2.6 版本。

当我尝试运行时`python2.6 manage.py runserver`，我收到错误：

> 错误：没有名为 psycopg 的模块

从 Python 命令行：

```
Python 2.6.8 (unknown, Nov  7 2012, 14:47:34)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-52)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import psycopg2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named psycopg2 
```

跑步

```
python -c 'import sys; print sys.path'
['', '/usr/lib/python2.6/site-packages', '/var/lib/pgsql/.local/lib/python/site-packages', '/var/lib/pgsql/.local/lib/python', '/usr/local/browsershots-read-only/shotserver/shotserver04', '/usr/lib/python24.zip', '/usr/lib/python2.4', '/usr/lib/python2.4/plat-linux2', '/usr/lib/python2.4/lib-tk', '/usr/lib/python2.4/lib-dynload', '/usr/lib/python2.4/site-packages', '/usr/lib/python2.4/site-packages/Numeric', '/usr/lib/python2.4/site-packages/gtk-2.0'] 
```

看起来我有一个 2.4 和 2.6 互连的混乱系统。

如果我找到 psycopg，我会在 2.4 站点包中获得一个共享对象：

```
/usr/lib/python2.4/site-packages/psycopgmodule.so 
```

并且仅在 2.6 中提供。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:56:49.463

IMO 你应该看看[virtualenv](http://www.virtualenv.org/en/latest/)。这将帮助您创建一个隔离环境，您可以在其中安装自己的软件包。

程序是：

*   安装虚拟环境
*   初始化环境（例如使用`source ...`命令）
*   创建一个新环境（使用默认选项将创建一个干净的 AFAIK）
*   使用安装 psycopg`pip`

高温高压

# android - 安卓中的搜索功能

> ID：14211163
> 
> 赞同：0
> 
> 时间：2013-01-08T08:41:21.443
> 
> 标签：android, android-layout

我有一个列表视图并在其上应用搜索功能，使用以下内容：

```
inputSearch.addTextChangedListener(new TextWatcher() {
@Override
public void onTextChanged(CharSequence s, int start,int before, int count) {
      // TODO Auto-generated method stub
      // When user changed the Text
      LabelUser.this.arrayAdapter.getFilter().filter(s);
}
@Override
public void beforeTextChanged(CharSequence s, int start,int count, int after) {
     // TODO Auto-generated method stub
}
@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
    System.out.println("count"+s);
}}); 
```

在编辑文本中输入字符后，临时列表视图的索引会发生变化，我使用以下方法得到错误记录：

```
list.setOnItemClickListener(new OnItemClickListener() {
 @Override
public void onItemClick(AdapterView<?> arg0, View v,int position, long id) {
    // TODO Auto-generated method stub
    String selectedFromList = (list.getItemAtPosition(position).toString());
    Constants.LABELID = labelIdArray[(int) id];  
    System.out.println("id.LABELID"+id); 
    System.out.println("id.selectedFromList"+selectedFromList);
    startActivity(new Intent("com.example.mysampleapp.DASHBOARDTAB"));
}}); 
```

我想在应用搜索后获取临时列表视图，以便我可以从原始列表视图中获取正确的索引，或者任何人都可以建议我如何从过滤列表视图适配器后选择的列表视图中获取字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:58:35.103

如果它的自定义列表视图在每一行中都有一个 TextView，那么您可以像这样在 listView.onItemClick 中获取所选列表项的字符串，其中 v 是视图

```
TextView Selecteditem = (TextView) v.findViewById(R.id.textView_listitem);
String mText = Selecteditem.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:51:46.540

您可以将 arraylist 或数组传递给您的 listview 适配器，然后您可以检查 arraylist 或数组，如果您的话在其中。然后打电话`listview.setSelection(your_arraylist_current_position);`

```
for(int i=0;i<arralist.size();i++)
{
    if(arraylist.get(i).startwith(searchingword))
      {
        listview.setSelection(i);
       }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:02:33.233

出色地！我做过同样的事情，但方式与你的不同。

以下是粗略的步骤： - 当 EditText 中的文本发生更改时，您可以搜索列表并创建一个包含搜索项的临时 List(ArrayList)。- 然后通过调用将 ListView 适配器设置为临时列表 `listView.setAdapter(temporaryList);` - 另外，为例如 isSearchOn 定义一个标志。当 EditText 中的内容发生变化，而不是 "" 时，使 isSearchOn = true 否则为 false。- 另一方面，在 onItemClick 中，

```
if(isSearchOn)
   {
      //search temporaryList
   }
   else
   {
      //search originalList
   } 
```

这样，您将始终获得正确的项目。希望这可以帮助。

# javascript - 如何使用javascript访问div中的元素

> ID：14211164
> 
> 赞同：0
> 
> 时间：2013-01-08T08:41:21.963
> 
> 标签：javascript

> **可能重复：**
> [从 JavaScript 访问 DIV 元素](https://stackoverflow.com/questions/12248617/access-div-element-from-javascript)

我有一个 HTML 代码，如：

```
<div id="headerlist" >
<h3> Enrollment Efficiency</h3>
</div> 
```

我必须访问元素注册效率

我正在尝试：

```
var headerlist = document.getElementsById('headerlist');
alert("the value of headerlist is "+ headerlist.firstChild); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:43:42.383

只是一个错字。它是`getElementById()`（那里没有复数`s`）。

```
var headerlist = document.getElementById('headerlist'); 
```

An`id`在整个文档中应该是唯一的，因此这个函数应该只返回一个元素。如果*可以*匹配多个元素，例如 with `getElementsByName()`，则存在复数`s`。

**编辑**

正如@Cerbrus 所述：该`firstChild`属性仅指向第一个子元素，而不是其内容。

在这里备注：

1.  您的`firstChild`示例中的 只是一个空白文本节点。如果您想使用下一个非空白节点[`firstElementChild`](https://developer.mozilla.org/en-US/docs/DOM/Element.firstElementChild)（[大多数现代浏览器都支持](http://www.quirksmode.org/dom/w3c_core.html#t81)）。

2.  要显示内容，请使用类似[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)or的东西[`textContent`](https://developer.mozilla.org/en/docs/DOM/Node.textContent)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T08:42:55.420

功能`getElementByid`是单数，不是复数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T08:48:12.923

就像其他人所说，删除`s`from `getElementsById`--> `getElementById`。

此外，将返回分隔and`firstChild`的 textNode 。试试这个：`div``h3`

```
function getFirstChild(element) {
    do { 
        element = element.firstChild;
    } while (element && element.firstChild!== 1);
    return element;
}
// Usage: getFirstChild(headerlist); 
```

导致：

```
var headerlist = document.getElementById('headerlist');
console.log("the value of headerlist is ", getFirstChild(headerlist).innerHTML); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T08:58:29.180

可能您想访问内部 HTML 元素的数据。所以这是你的代码如何实现它

**[检查这里](http://jsfiddle.net/kbAvM/)**

您可以通过以下方式访问父元素的所有子元素。

```
<!DOCTYPE html>
<html>
<body>
<div id="amu">
<div id="a"> aa </div>
<h1>aaaa </h1>
<h3> bbbb </h3>
</div>

<div onclick="check()"> click Me </div>
</body>
<script>
function check() {
var childNodeArray = document.getElementById('amu').getElementsByTagName('*');
alert(childNodeArray.length);
for (i=0; i < childNodeArray.length; i++)
alert(childNodeArray[i].innerHTML);
}
</script>
</html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T08:46:40.323

在 jQuery 中尝试此代码（javascript 中的库）

```
alert($("#headerlist").eq(0).text()); 
```

[演示](http://jsfiddle.net/GDNJM/)

# python - 反转ID

> ID：14211166
> 
> 赞同：0
> 
> 时间：2013-01-08T08:41:32.520
> 
> 标签：python

我正在使用以下代码获取更改 ID，然后进行循环...我需要反转我在文件 change_ids.txt 中获得的 ID。我需要一些关于反转的最佳方法的想法？请提供您的想法.

```
with open(timedir + "/change_ids.txt", "wb") as f:
    check_call("ssh -p 29418 company.com "
        "gerrit query --commit-message --files --current-patch-set "
        "status:open project:platform/vendor/com-proprietary/code branch:master |"
        "grep refs |"
        "cut -f4 -d'/'",
            shell=True,   # need shell due to the pipes
            stdout=file)  # redirect to a file
 for line in open(timedir + "/change_ids.txt"):
#code 
```

change_ids.txt 包含

```
210717
210716
210715
210714
210713 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:45:40.737

这将从下到上处理行：

```
for line in reversed(list(open(timedir + "/gerrit_ids.txt"))):
    ... 
```

# c++ - libxml2 是否维护文档顺序？

> ID：14211171
> 
> 赞同：1
> 
> 时间：2013-01-08T08:42:06.597
> 
> 标签：c++, c, xml, libxml2

IIRC，有两种 XML 解析器：DOM 和 SAX。SAX 需要从上到下解析 XML 文档，而无需任何形式的重新排序（并且是基于事件的），而**我认为**允许重新排序 DOM。

那是对的吗？并且可能会读取`xmlDocPtr`返回`xmlReadFile`的错误（我假设`libxml2`是 SAX 或 DOM；它可能是它自己的东西）。

例如：

```
<!-- original document, in order -->
<xml>
    <element>1</element>
    <element>2</element>
    <element>3</element>
</xml>

<!-- document as it appears in memory (DOM) -->
<xml>
    <element>3</element>
    <element>1</element>
    <element>2</element>
</xml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:47:01.283

libxml2 支持 DOM 和 SAX 解析。它的 DOM 解析器实际上是建立在它的 SAX 解析器之上的。因此 DOM 输出将保持文档顺序。我从未听说过 DOM 解析器重新排序 XML 节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:21:08.410

> 而我认为允许重新排序的 DOM。

XML 规范说 XML 元素的顺序很重要，因此任何 XML API 都应该保持元素的顺序。

作为旁注，一次排序不重要是为了对属性进行排序，例如`<termdef id="dt-dog" term="dog"/>`可以作为`<termdef term="dog" id="dt-dog"/>`

[http://www.w3.org/TR/REC-xml/#sec-starttags](http://www.w3.org/TR/REC-xml/#sec-starttags)

# svg - 仅查看 svg 圆的弧

> ID：14211172
> 
> 赞同：1
> 
> 时间：2013-01-08T08:42:16.073
> 
> 标签：svg, jquery-animate, jquery-svg, svg-animate

我有一个[圆](http://jsfiddle.net/chrisfrisina/rvVWF/)，里面有一个边界环（绿色和静态），还有一些“脉冲”外圆（蓝色）。我将如何解决这个问题，只让静态圆圈内的“脉冲圆圈”部分可见？

我还包括了用于呈现 HTML 的 JS 供您参考，但它不会在 JSFiddle 中生成 SVG。

我认为 SVG 中存在图层，但考虑到我如何构建其他圆圈的渲染，这并不是很有帮助。 `快速回顾一下它的工作方式。`

 `1.  用橙色渐变绘制背景圆，并在其上放置同心圆。
2.  画出绿色的静态圆圈。
3.  将四个脉冲放在笛卡尔平面的基点上。
4.  动画脉冲。

我知道我可以在主圆圈的边界内测量一次点击，所以我希望我可以将脉冲的动画（可能是一种 hacky 方式）限制在绿色圆圈内。

也许放在顶部的其他圆圈具有反向填充或其他东西？只是吐出想法，因为我已经尝试了我所知道的一切并且找不到任何其他示例或想法研究。

可能会帮助您帮助我想到实现此目的的方法的相关文章：

[如何计算（圆的）弧的 SVG 路径](https://stackoverflow.com/questions/5736398/how-to-calculate-the-svg-path-for-an-arc-of-a-circle)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:00:37.220

如果我理解正确，您希望将脉冲圆圈限制在绿色非脉冲圆圈的内部。这可以使用剪辑路径来完成：

```
<defs>
  <!-- ... -->
  <!-- Here we define the clip path, using the non-pulsing circle -->
  <clipPath id="ringClip">
    <use xlink:href="#ring-circle"/>
  </clipPath>
</defs>
<g>
  <!-- other content -->
  <!-- We put all pulsing circles into a group, 
       applying the clip path to them as a whole -->
  <g clip-path="url(#ringClip)">
    <!-- pulsing circles -->
  </g>
  <circle id="ring-circle"><!-- more attributes --></circle>
</g> 
```

[试试 jsFiddle](http://jsfiddle.net/8dng4/)`

# php - 带有 securimage 验证码的 jquery ajax 表单

> ID：14211173
> 
> 赞同：0
> 
> 时间：2013-01-08T08:42:19.937
> 
> 标签：php, jquery, ajax

我想输入 securimage 的验证码，但我的代码有问题。它不读取检查验证码是否正确的条件，而只是保存数据并忽略验证码。这是我的 jquery 代码，可让我将数据保存在数据库中而无需重新加载

```
(function() {

    if($('#contactform').length) {

        var $form = $('#contactform'),
        $loader = '<img src="images/preloader.gif" alt="Loading..." />';
        $form.append('<div class="hidden" id="contact_form_responce">');

        var $response = $('#contact_form_responce');
        $response.append('<p></p>');

        $form.submit(function(e){

            $response.find('p').html($loader);

            $.post("php/contact-send.php", $("#contactform").serialize(), function(response) {

                $response.find('img').remove();
                $response.find('p').removeClass().addClass('success type-2');
                $response.find('p').append('Your email has been sent!');
                $form.find('input:not(input[type="submit"], button), textarea, select').val('').attr( 'checked', false );
                $response.delay(1500).hide(400);

            });

            e.preventDefault();

        });             
    }
})();
/* end Contact Form */ 
```

这是我处理我的数据的 php 代码

```
require_once "../includes/database.php";
session_start();
    include_once $_SERVER['DOCUMENT_ROOT'] . '/pcf/securimage/securimage.php';
    $securimage = new Securimage();
    if ($securimage->check($_POST['captcha_code']) == false) {  
        echo "<script language='javascript' type='text/javascript'>alert('Invalid Captcha!')</script>";
        echo "<script language='javascript' type='text/javascript'>window.open('contact.php?alink=c','_self')</script>";
        exit;
    }
    $cname=$_POST['name'];
    $cemail=$_POST['email'];
    $cmessage=$_POST['message'];
    $date=date("Y-m-d");    
            $sql = "INSERT INTO messages (sendername,senderemail,message,datesent) VALUES (:name,:email,:message,:date)";
            $qry = $db->prepare($sql);
            $qry->execute(array(':name'=>$cname,':email'=>$cemail,':message'=>$cmessage,':date'=>$date)); 
```

# objective-c - 使用 Restkit 正确映射 json

> ID：14211182
> 
> 赞同：0
> 
> 时间：2013-01-08T08:43:14.760
> 
> 标签：objective-c, json, post, mapping, restkit

我有以下 JSON

```
{

    "data": {
        "status": 200,
        "message": "OK",
        "text": "Succesvol ingelogd.",
        "user": {
            "cu_id": 1,
            "cu_status_id": 0,
            "cu_company_id": 1,
            "cu_function_id": 1,
            "cu_department_id": 1,
            "cu_email": "info@sanmax.be",
            "cu_first_name": "First",
            "cu_last_name": "Last",
            "cu_phone_intern": "",
            "cu_mobile_phone": "",
            "cu_street": "",
            "cu_number": "",
            "cu_bus": "",
            "cu_postalcode": "",
            "cu_location": "",
            "cu_country": "",
            "cu_birthdate": "0000-00-00",
            "cu_picture": "",
            "cu_comment": "",
            "cu_ison_reminder_email": 0,
            "cu_ison_reminder_app": 0,
            "cu_ison_reminder_web": 0,
            "cu_first_use": 1
        },
        "company": {
            "c_id": 1,
            "c_name": "Sanmax",
            "c_phone": "089 68 06 39",
            "c_fax": "089 856 929",
            "c_website": "www.sanmax.be"
        },
        "function": {
            "cf_id": 1,
            "cf_name": "Developer"
        },
        "department": {
            "cd_id": 1,
            "cd_name": "Development"
        },
        "statuses": [
            {
                "cs_id": 3,
                "cs_company_id": 1,
                "cs_name": "Bezet",
                "cs_default": 1,
                "cs_image": ""
            },
            {
                "cs_id": 1,
                "cs_company_id": 1,
                "cs_name": "Online",
                "cs_default": 0,
                "cs_image": ""
            },
            {
                "cs_id": 2,
                "cs_company_id": 1,
                "cs_name": "Offline",
                "cs_default": 0,
                "cs_image": ""
            },
            {
                "cs_id": 4,
                "cs_company_id": 1,
                "cs_name": "Afwezig",
                "cs_default": 0,
                "cs_image": ""
            }
        ]
    }

} 
```

如果我只有一个对象，我知道我应该如何映射。这里我有一个数据对象。如果一切正常，我在数据对象中得到一个 data.status 200，但我也得到一个 userObject、一个 companyObject、一个 functionObject、一个 departmentObject 和一个 statusObject（其中还包含其他对象）。

但如果我没有得到 200 data.status 代码，假设我得到了 404 data.status 代码。我只得到一个状态码和一条消息。

我应该如何在restkit中映射它？

任何帮助，亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:05:27.803

如果出现错误，服务器不应以状态 200 响应。因此，据我所知，这永远不会映射到 RestKit 0.20 中的错误。

# android - 如何在具有默认文本的android中共享文本内容

> ID：14211187
> 
> 赞同：1
> 
> 时间：2013-01-08T08:43:43.840
> 
> 标签：android

嗨，我想分享一个默认内容以及用户想要分享的文本：

```
 Intent sendIntent = new Intent();
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_TEXT, " - You're using App v. 10.2");
    sendIntent.setType("text/plain");
    startActivity(sendIntent); 
```

我想要的是这样的：
USER TEXT HERE
- You're using App v. 10.2

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:47:37.150

试试这个，

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent .setType("text/html");
sendIntent .putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml("<p>USER TEXT HERE.</p> <br \> <p>- You're using App v. 10.2</p>"));
startActivity(Intent.createChooser(sendIntent ,"Share using")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:32:13.957

请检查此代码。它运作良好。

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.setType("*/*");
shareIntent.putExtra(Intent.EXTRA_TEXT, "Body text of the new status");    
startActivity(Intent.createChooser(shareIntent, "Share image using")); 
```

# jquery - 单击时查找特定类

> ID：14211190
> 
> 赞同：1
> 
> 时间：2013-01-08T08:43:58.957
> 
> 标签：jquery, dom, element, this

我有两个 div 容器：

```
<!-- button1 -->
<div class="voted">
    <span>name</span>
    <div class="button">Vote</div>
</div>

<!-- button2 -->
<div class="vote">
    <span>name</span>
    <div class="button">Vote</div>
</div> 
```

然后在使用jquery时：

```
$('.button').click(function(){
    // if button2 was clicked:
    var test = $(this).parent().attr("class"); // How do I obtain the other element?
    alert(test); // this should be outputted "voted"
}); 
```

我想使用类似`$(this)`功能的东西来获取另一个元素。我将如何获得“投票”？我这样做的原因是因为我有一个脚本，它会在两个按钮之间切换，所以当用户点击时`button1`，我希望他们获得类`button2`，反之亦然。

**编辑**

所以我有两个按钮（比较两个人），最初，他们应该有相同的 class `vote`。但是我有 jQuery 代码，当用户单击一个按钮时，该类更改为`voted`. 现在，我想检查一下，当用户单击“其他”按钮（尝试为第二个人投票）时，他们不能因为已经有`voted`课程，或者他们已经按下了第一个按钮。

我知道我可以检查我的整个页面是否`voted`存在，但我已经设置了一些检查，当用户点击他们投票的初始投票人时，他们可以收回投票（这会将 div 类更改回`vote`）。

我的整个前提是：如果用户已经投票给某人，则不允许用户投票给另一个人。

很抱歉描述太长了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:40:32.770

我解决了我想做的事情

```
var voted = $(".voted").not($(this).parents(".voted")).attr("class"); 
```

这使我可以检查是否存在已投票的类，但它不会检查按下的 $(this) 是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:48:58.640

```
$(this).parent().prev().children('.button'); 
```

这使您可以引用包含父级上一个兄弟姐妹的子级的 jQuery 对象，该对象具有类“按钮”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:49:14.223

你可以使用`siblings`方法。

```
$('.button').click(function(){
  var $this = $(this).parent();
  var c1 = $this.prop('class');
  var c2 = $this.siblings('div').prop('class');
  // console.log('class 1: ' + c1 + ', class 2: ' + c2)
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T08:51:09.857

```
$(function(){
        $('.button').click(function () {
            // if button2 was clicked:
            var test = $(this).parent().attr("class"); // How do I obtain the other element?
            alert(test); // this should be outputted "voted"
        });
    }); 
```

这段代码对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T08:53:21.440

我不确定您到底想实现什么，但如果您想做的就是在类之间切换，那么您可以使用`toggleClass`

```
$('.button').click(function(){ 
   $(this).toggleClass('vote').toggleClass('voted'); 
}); 
```

您始终可以针对特定的类名（'vote'）进行测试以获取另一个类（'voted'）。有什么东西可以阻止你假设硬编码的类名吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T08:55:34.653

看来你想上第一个 div 的课

```
$('.button').click(function(){
      var test = $('div:first').attr("class"); // this will give first div's class
      alert(test); // this should be outputted "voted"
    }); 
```

**[演示](http://jsfiddle.net/q5LWN/)**

# mvvm - 如何使用 knockout.js 观察 jqgrid 数据？

> ID：14211192
> 
> 赞同：4
> 
> 时间：2013-01-08T08:44:19.437
> 
> 标签：mvvm, jqgrid, knockout.js, knockout-2.0, jqxgrid

我正在使用 knockout.js 创建 jqgrid 并使用 observableArray 填充数据。（使用 Knockout-jqGridBinding 插件）jqgrid 数据的数组：

```
var initialData = [{
    id: ko.observable(1),
    name: ko.observable("Well-Travelled Kitten"),
    sales: ko.observable(352),
    price: ko.observable(75.95)
}];

function viewModel() {
    var self = this;
    self.items = ko.observableArray(result);
}
ko.applyBindings(new viewModel()); 
```

**HTML**

```
 <table>
     <tbody data-bind="foreach: items">
    <tr>
        <td><input data-bind="value: id"/></td>
        <td><input data-bind="value: name"/></td>
        <td><input data-bind="value: sales"/></td>
        <td><input data-bind="value: price"/></td>
    </tr>    
     </tbody>
   </table>
    <table id="items" data-bind="grid: { data: items }" >
    <thead> 
        <tr> 
        <th data-field="actions" style="width:27px;" data-sortable="false"></th>
        <th data-field="name" width="150px" data-editable="true">Item Name</th> 
        <th data-field="sales" data-editable="true">Sales Count</th> 
        <th data-field="price" data-editable="true">Price</th> 
        </tr> 
    </thead> 
    </table> 
```

现在它填充 jqgrid 中的数据，如果我更改外部数据，它也会反映在网格中，但是当我使用“cellEdit”更改 jqgrid 中的数据时，它不会反映。

# linkedin - 我可以使用 LinkedIn API 或只是我的第一级和第二级连接搜索任何个人资料吗？

> ID：14211198
> 
> 赞同：0
> 
> 时间：2013-01-08T08:44:57.613
> 
> 标签：linkedin

我正在使用 Linked IN JS Api。并编写了一个非常简单的人员搜索，我可以根据他们的名字和姓氏搜索人。但结果仅来自我的第一级和第二级连接。我的朋友创建了一个新的个人资料，但他无法通过我开发的界面进行搜索。因为他没有任何联系。我不在这里共享代码，因为我首先想了解可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:55:24.223

您是否尝试过使用带有关键字的人员搜索而不是带有名字和姓氏的人员？

# vba - 从 java 脚本以编程方式访问 vba 不起作用

> ID：14211200
> 
> 赞同：3
> 
> 时间：2013-01-08T08:45:03.273
> 
> 标签：vba

目前，我们有一个运行的报告

*   用户触发报告
*   报告以 xml 格式处理和保存
*   报告完成后，用户可以选择下载报告
*   当用户单击下载时，将调用 Web 服务。
    1.  此 Web 服务打开空白的 Excel 书
    2.  从单独的 xml 模块（位于服务器中）复制宏
    3.  宏处理完成的 xml 报告并将其显示在工作表中

使用 Excel 2002 (SP 3) 时，这一切都可以正常工作。

*我们的工作站计划从 XP 升级到 Windows 7。Windows 7 附带 Excel 2010。* 我在 infra 团队提供的测试机中尝试了整个步骤。

测试时，我们发现 xml 模块中的宏没有被复制到 excel 2010 中。没有错误，也没有警告。

我做了一些搜索，发现需要勾选“信任对 VBA 项目对象模型的访问”。尝试这样做但无济于事。

如果有任何不清楚或需要更多信息，请告诉我。

**编辑 1** 这是 JS 打开 excel + 添加工作簿 + 添加模块的方式：

```
xlApp = new ActiveXObject("Excel.Application");
//Add a workbook
xlBook = xlApp.Workbooks.Add;

// This loads the modules into XL from the reporter_modules
var xlMod;
xlMod = xlBook.VBProject.VBComponents.Add(1);
xlMod.CodeModule.AddFromString(xmlModule.childNodes(i).text); 
```

由于 Excel 2002 中只有 .xls，因此在任何地方打开 excel 时代码都不会提及扩展名。你知道如何实现吗？

谢谢，遇见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:14:38.993

您可以在保存时指定文件类型。这与您发布的代码位于不同的部分。excel 将允许您将 Vba 模块添加到 .xlsx，但会在保存时发出警告（您的 java 代码无疑会抑制）。我不知道 java 语法，但在 Vba 中它是

```
ActiveWorkbook.SaveAs "C:\ron.xlsm", fileformat:=52 
```

52 是 excel 使用的文件类型常量。你可以看到更多细节@http [://www.rondebruin.nl/saveas.htm](http://www.rondebruin.nl/saveas.htm)

# vb.net - 调试VS2010编译器初始化错误？

> ID：14211203
> 
> 赞同：2
> 
> 时间：2013-01-08T08:45:18.223
> 
> 标签：vb.net, visual-studio-2010, web-services

今天早上，在重新开始工作并尝试在我们内部的 Web 服务上“构建网站”时，我遇到了这个问题：

```
------ Build started: Project: C:\...\SyncWcfService\, Configuration: Debug Any CPU ------
Validating Web Site

vbc : Fatal (0,0): error BC2000: compiler initialization failed unexpectedly: Unable to find required file 'Microsoft.VisualBasic.dll'.
Validation Complete 
```

这是我第一次加载项目，但另一位同事也有同样的问题，他在上个月成功运行它。

存在很多文件副本（也有很多不同的版本），并且存在于 GAC 中： 全局程序集缓存包含以下程序集：

> Microsoft.VisualBasic，版本=8.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a，处理器架构=MSIL

清理和重建不起作用。也没有删除所有临时文件，谷歌也没有显着帮助（它建议重新安装 .net 框架，但问题至少出现在两台机器上，这让我觉得不太可能是框架问题）。详细的诊断构建只产生上面的输出。

我不知所措。有人有什么想法吗？

**更新：** Procmon 报告：

```
09:00:41.5420355
devenv.exe
5588
CreateFile
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\vbc : Fatal
NAME NOT FOUND
Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a 
```

这有点帮助（感谢 Jeremy），但这似乎表明它正在尝试创建一个名为“vbc：Fatal”的文件。我从来没有发现与 Microsoft.VisualBasic.dll 有任何关系

**更新：**这似乎是由清除 web.config 中的程序集引起的。

如果我`<clear />`从编译-> 程序集中删除该行，错误就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:24:51.770

查看 web.config 的编译部分。有什么不寻常的吗？

尝试将整个编译部分替换为：

```
<compilation debug="false" strict="false" explicit="true" targetFramework="4.0" /> 
```

项目是否验证？

是这样，将有问题的行一一添加，直到错误再次出现。

# iphone - iPod 视频文件夹中的视频

> ID：14211209
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:45:51.107
> 
> 标签：iphone, ios, xcode, ipad, video

如何从 iPhone/iPod 的默认视频应用程序中获取视频？

我没有找到任何方法来访问 iPhone/iPod 中默认视频应用程序中存储的视频。

请建议我访问这些视频的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:29:51.007

终于我得到了答案:)

MPMediaPropertyPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:[NSNumber numberWithInteger:MPMediaTypeMovie] forProperty:MPMediaItemPropertyMediaType];

```
MPMediaQuery *query = [[MPMediaQuery alloc] init];
[query addFilterPredicate:predicate];

NSArray *items = [query items];
NSURL *url = [[NSURL alloc]init];
for (MPMediaItem* item in items)
{
    NSString* title = [item valueForProperty:MPMediaItemPropertyTitle];

     url = [item valueForProperty:MPMediaItemPropertyAssetURL];
    NSLog(@"url %@",url);
} 
```

# android - Json 不使用 HttpPost

> ID：14211217
> 
> 赞同：0
> 
> 时间：2013-01-08T08:46:39.113
> 
> 标签：android, json, entity, http-post

我正在使用此代码将其发送到我的 php 文件。该文件看起来像这样。

```
file_put_contents('dump.txt', "POST: \n" . print_r($_POST, true) . "\n\n\n GET: \n" . print_r($_GET, true)); 
```

我正在发送这样的json：

```
public void postData(String url,JSONObject json) {
        // TODO Auto-generated method stub
        HttpClient httpclient = new DefaultHttpClient();
        String object = "?data=" +json.toString();
        System.out.println("object:" + object);

        try {

            HttpPost httppost = new HttpPost(url.toString());
            httppost.setHeader("Content-type", "application/json");
            System.out.println("url:" + url.toString());
            StringEntity se = new StringEntity(object); 
            System.out.println("json:" + json.toString());

            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
            httppost.setEntity(se); 

            HttpResponse response = httpclient.execute(httppost);
            String temp = EntityUtils.toString(response.getEntity());
            System.out.println("response:" + response);

            int statusCode = response.getStatusLine().getStatusCode();
            System.out.println("Statuscode " + statusCode);

            if(statusCode==200)
            {
                    Toast.makeText(LbsGeocodingActivity.this,
                                            "Verstuurd",
                                            Toast.LENGTH_LONG).show();

            }
            else if(statusCode!=200) {

                            Toast.makeText(this, statusCode, Toast.LENGTH_LONG).show();
            }

           /* try {
                String responseBody = EntityUtils.toString(response.getEntity());
        Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();
        } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        }*/

        } catch (ClientProtocolException e) {

        } catch (IOException e) {
        }

    } 
```

日志文件是这样的：

```
01-08 09:36:00.278: I/System.out(1124): object:?data={"id":"69403","timestamp":"08-01-2013 09:36:00","longitude":"-122.084095","latitude":"37.422005"}
01-08 09:36:00.298: I/System.out(1124): json:{"id":"69403","timestamp":"08-01-2013 09:36:00","longitude":"-122.084095","latitude":"37.422005"}
01-08 09:36:01.038: I/System.out(1124): response:org.apache.http.message.BasicHttpResponse@412d1b38
01-08 09:36:01.038: I/System.out(1124): Statuscode 200 
```

但我在 dump.txt 中得到一个空文件

```
POST: 
Array
(
)

 GET: 
Array
(
) 
```

**编辑**

setEntity（或附近的某个地方）出了点问题，因为当我已经将 ?data= 粘贴到 url 中时，我从 PHP 文件中得到了这个：

```
POST: 
Array
(
)

 GET: 
Array
(
    [data] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:54:39.140

尝试

```
String object = "?data=" +URLEncoder.encode(json.toString(), "UTF-8"); 
```

# c# - .net 中的快速十六进制到二进制转换方法

> ID：14211219
> 
> 赞同：-5
> 
> 时间：2013-01-08T08:46:42.657
> 
> 标签：c#, binary, hex

我正在用 C#.net 开发一个应用程序。我必须做一个快速的十六进制到二进制转换。我所做的是...

```
rtpPTypeNum = string.Join(string.Empty, udp.Payload.ToHexadecimalString().Substring(2, 2).Select(C => Convert.ToString(Convert.ToInt32(C.ToString(), 16), 2).PadLeft(4, '0'))).Substring(1, 7); 
```

我已经检查了它的性能，但这对我来说还不够好。

`udp.Payload.ToHexadecimalString()`返回一串十六进制数字。

在这个转换中，我必须进行大约 9000 次迭代。

你能给我一个更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T08:50:38.337

谷歌上的最高结果给了我：

```
return Convert.ToString(Convert.ToInt32(hexValue, 16), 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:02:33.040

如果您希望您的号码很长，您可以试试这个 Convert.ToString(Convert.ToInt64(hexstring, 16), 2);

# java - 在 Android 中预缓存布局

> ID：14211220
> 
> 赞同：1
> 
> 时间：2013-01-08T08:46:43.493
> 
> 标签：java, android, android-layout

我有一个 DialogFragment，当用户单击 Activity 中的按钮时显示。

问题是片段布局稍微复杂，需要加载一些资源。这会在第一次显示对话框时产生一点延迟，但在第一次显示后会立即显示（我想那是因为资源和布局膨胀被缓存了）。

因为很可能用户点击了我想预缓存的按钮，以避免第一次延迟。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:06:37.190

您可以尝试查找您的片段是否已加载？

```
yourFragment yourFrag = (YourFragment)getSupportFragmentManager().findFragmentById(R.id.your_fragment);

if (yourFrag == null) {
    YourFragment newFragment = new YourFragment();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.fragment_container, YourFragment);
    transaction.addToBackStack(null);
    transaction.commit();
} 
```

# xna - 当前cpu和gpus的high poly范围是多少

> ID：14211221
> 
> 赞同：0
> 
> 时间：2013-01-08T08:46:45.463
> 
> 标签：xna, directx, unity3d, game-engine

在当前时间与当前市场上可用的 cpu 和 gpu。哪种游戏模型被定义为高多边形？例如，在一个示例游戏中，拥有最少 24000 个三角形的模型是否合适？我知道有些模型不需要更多的多边形。但是多少poly会影响cpu性能呢？我以为有面部剔除，所以很多面部都不会被渲染。

换句话说，一个引人注目的游戏模型中三角形的平均值是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:43:09.857

据[CGSociety](http://forums.cgsociety.org/archive/index.php/t-295589.html)称：

> 在电影中，重要的人物模型，以及像船或咕噜这样的物体，必须承受非常近的镜头，数量高达数百万，60 的情况并不少见。这一切都与使用对象的上下文有关。
> 
> * * *
> 
> 我的想法是，只要某些东西工作正常、高效并且在给定的时间内可以渲染，就可以了。我不认为真的有某种分水岭数。
> 
> * * *
> 
> 30,000 = 高
> 
> 20,000 = 在那里
> 
> 低于 15,000 = 好的
> 
> 6,000 = 不错
> 
> 很大程度上取决于你的管道。如果您的设置速度很慢，为 3,000，那么您需要按比例缩小以提高效率。

[维基百科](http://en.wikipedia.org/wiki/Low_poly#Low_poly_as_a_relative_term)对相反的情况说同样的话，一个低多边形模型：

> 没有定义低多边形网格的阈值；低多边形始终是一个相对术语，并且取决于（除其他因素外）： - 设计网格的时间以及用于什么硬件 - 最终网格中所需的细节 - 相关对象的形状和属性
> 
> 随着计算能力不可避免地增加，可以使用的多边形数量也增加了。

[Dash 提供的链接](http://www.rsart.co.uk/2007/08/27/yes-but-how-many-polygons/)也是在游戏中找出多边形的一个很好的方法。似乎 2007-2008 年的平均游戏每个角色有 10000-25000 个多边形。

> GTA IV，Xbox 360/PS3，2008 Story Characters – 8-10,000 个多边形，带有多个 256×256/512×512 漫反射、镜面反射和法线贴图
> 
> 失落的星球，X360/PC，2007 Wayne – 12392 个多边形（但最后是 17765 个多边形以兼容运动模糊效果）
> 
> 神秘海域：德雷克的财富，PS3，2007 年主要角色 - 约 20,000-30,000 个多边形

所以，答案是，这个问题没有真正的答案！这一切都取决于您如何使用游戏、使用游戏的环境、您计划使用的系统硬件等因素。术语“低多边形”和“高多边形”都与这些和其他因素相关。基本上，如果它有足够的多边形来满足您的高清标准需求并且仍然满足效率需求，那么您就很好。

# c# - 为什么实体框架尝试将 Guid id 转换为十进制？

> ID：14211225
> 
> 赞同：4
> 
> 时间：2013-01-08T08:47:16.970
> 
> 标签：c#, entity-framework

这是我第一次遇到这样的问题，我在网上找不到任何关于它的信息。

下面的代码运行良好

```
Exception_Perimetre = dc.Exception_Perimetre
                      .Where(x => x.Con_Con_Id == ConId
                               && x.Exp_Date_Debut <= date 
                               && x.Exp_Date_Fin >= date)
                      .ToArray(); 
```

但在随机使用后，它会抛出以下异常：

> 属性“Exp_Id”到“Exception_Perimetre”无法设置为值“十进制”。您必须为该属性分配一个“Guid”类型的非空值。

原始值类型是 Guid 但由于某种原因实体框架尝试将其转换为十进制...

有关信息，如果我在 IIS 上使用 Windows 身份连接，它运行良好。我更改为匿名连接后开始失败，希望这部分可以帮助某人找到解决方案；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:23:43.190

当从多个线程使用相同的上下文时会出现此问题。DbContext 和 ObjectContext 不是线程安全的，不应在多个线程中使用。我的猜测是，您的上下文是由诸如 StructureMap 之类的 IoC 提供程序返回的，并且依赖项设置不正确，无法为所有请求返回相同的上下文。

为什么当身份验证设置为 Windows 身份时这会起作用？因为每个用户使用的连接字符串本质上是不同的，所以用户之间没有共享相同的打开连接。当您切换到匿名时，突然之间每个用户看起来都一样，因此上下文最终共享同一个共享连接池。

这只是间歇性出现的原因是由于多线程问题。基本上发生的事情是连接正在交还请求 X 的读取器，但正在被请求 Y 消耗。请求 Y 期望列序号 1 是 Guid，但请求 X 的列是十进制。

同样，我相信您的解决方法是解决您的 IoC 配置，或者您正在返回 Context 的一个实例。

我希望这有助于澄清事情。

# shell - 在使用 curl POST 到 url 时定义变量

> ID：14211231
> 
> 赞同：0
> 
> 时间：2013-01-08T08:48:05.723
> 
> 标签：shell, curl

定义的正确语法是什么： $data 为：

```
 {\"username\":\"[$username]\",\"password\":\"[$password]\",\"webdata\": [$syntax]}" \ 
```

并将其替换为我的 shell 脚本

```
 result=$(curl -D - -k -m 10  -H "Content-type: application/json; charset=UTF-8" \
            -d "{\"username\":\"[$username]\",\"password\":\"[$password]\",\"webdata\":   [$syntax]}" \
     https://${host}/api 2>/dev/null |head -1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:29:47.193

我将假设 bash (>=3.0); 您之前设置了 $username、$password 和 $syntax。一个简单的选择是：

```
 printf -v data '{"username":"[%s]","password":"[%s]","webdata":[%s]}"' \
   "$username" "$password" "$webdata" 
```

（curl 的“-d”隐含 ASCII，如果使用任何多字节 UTF-8 字符，您将遇到麻烦。使用 --data-binary 和/或将您的请求写入文件可能更健壮，并且使用“--data-binary @request.tmp”加载它。）

# c# - 通过 AppSettings 保存 XML 位置

> ID：14211236
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:48:24.767
> 
> 标签：c#

我是一名应用程序设计师学生，正在寻求一些指导。

我想为我的实习制作一个应用程序，它需要允许用户通过一个文本框添加 XML 文件，该文本框只需要在您第一次运行应用程序或检测到新的 XML 文件时出现。

当它第一次运行时，它必须有一个将位置保存到 appsettings 中的选项。

你们能给我一些关于如何实现这一点的提示吗？

这不是家庭作业，我的实习生问我是否能够做出一些让他们的工作更轻松的东西。

没有教科书或分类。如果有我会咨询的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:54:40.347

[AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)属性可能是您正在寻找的。[您可以使用GetSection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx)方法在 AppSettings 中添加新条目。

# zend-framework2 - zend framework 2 禁用整个应用程序的视图

> ID：14211239
> 
> 赞同：0
> 
> 时间：2013-01-08T08:48:53.410
> 
> 标签：zend-framework2, zend-view

我目前正在 Zend 2 中开发后端应用程序，我需要禁用整个应用程序的视图。如果我可以在初始化阶段禁用它，我会非常高兴。这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:33:34.147

```
namespace YourModule;

use Zend\Mvc\MvcEvent;

class Module
{
    public function onBootstrap(MvcEvent $e)
    {
        $sharedEvents        = $e->getApplication()->getEventManager()->getSharedManager();
        $sharedEvents->attach('Zend\Mvc\Controller\AbstractActionController','dispatch', 
             function($e) {
                $response = $e->getResponse();
        $response->sendContent();
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:24:40.133

是的，这是可能的。在操作中使用以下代码来隐藏视图。

```
return $this->getResponse(); 
```

# mysql - 在 MySQL 5.5.25 中无法设置 max_allowed_pa cket

> ID：14211241
> 
> 赞同：6
> 
> 时间：2013-01-08T08:48:59.573
> 
> 标签：mysql, database

我无法在 MYSQL 命令提示符中设置“max_allowed_pa​​cket”变量，尽管我可以通过将“max_allowed_pa​​cket=100M”行插入 my.ini 文件来设置此值。为什么我有以下警告？

```
mysql> SHOW VARIABLES LIKE 'max_allowed_packet';
+--------------------+---------+
| Variable_name      | Value   |
+--------------------+---------+
| max_allowed_packet | 1048576 |
+--------------------+---------+
1 row in set (0.00 sec)

mysql> warnings
Show warnings enabled.
mysql> set global max_allowed_packet=123456000;
Query OK, 0 rows affected, 1 warning (0.00 sec)

Warning (Code 1292): Truncated incorrect max_allowed_packet value: '123456000'
mysql> SHOW VARIABLES LIKE 'max_allowed_packet';
+--------------------+---------+
| Variable_name      | Value   |
+--------------------+---------+
| max_allowed_packet | 1048576 |
+--------------------+---------+
1 row in set (0.00 sec)

mysql> 
```

我也尝试过更小的尺寸，如下所示。

```
mysql> set global max_allowed_packet=123456;
Query OK, 0 rows affected, 1 warning (0.00 sec)

Warning (Code 1292): Truncated incorrect max_allowed_packet value: '123456'
mysql>

mysql> set session max_allowed_packet=123456;
ERROR 1621 (HY000): SESSION variable 'max_allowed_packet' is read-only. Use SET GLOBAL to assign the value
Warning (Code 1292): Truncated incorrect max_allowed_packet value: '123456'
Error (Code 1621): SESSION variable 'max_allowed_packet' is read-only. Use SET GLOBAL to assign the value 
```

**MySQL 版本**

```
 mysql> SHOW VARIABLES LIKE "%version%";
+-------------------------+------------------------------+
| Variable_name           | Value                        |
+-------------------------+------------------------------+
| innodb_version          | 1.1.8                        |
| protocol_version        | 10                           |
| slave_type_conversions  |                              |
| version                 | 5.5.25                       |
| version_comment         | MySQL Community Server (GPL) |
| version_compile_machine | x86                          |
| version_compile_os      | Win64                        |
+-------------------------+------------------------------+
7 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:47:13.030

我注意到您必须使用 1024 的倍数才能接受这些值：

值 2048001 失败：

```
mysql> set global max_allowed_packet=2048001;
Query OK, 0 rows affected, 1 warning (0.00 sec)

Warning (Code 1292): Truncated incorrect max_allowed_packet value: '2048001' 
```

但是 2048000 的值有效：

```
mysql> set global max_allowed_packet=2048000;
Query OK, 0 rows affected (0.00 sec) 
```

该[手册](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_allowed_packet)说明了以下内容，但“四舍五入”似乎无法按设计工作：

> 该值应为 1024 的倍数；非倍数向下舍入到最接近的倍数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:34:56.647

[http://bugs.mysql.com/bug.php?id=22891](http://bugs.mysql.com/bug.php?id=22891)和[http://bugs.mysql.com/bug.php?id=32223](http://bugs.mysql.com/bug.php?id=32223) 的结论是 max_allowed_pa​​cket 应该只是一个启动参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-28T04:28:06.960

[答案 1](https://stackoverflow.com/a/15111324/5791928) 和[答案 2](https://stackoverflow.com/a/15111324/5791928)很好，请检查一下。除此之外，当我们启动 MySQL 服务器时，我们会得到一个**全局默认** `max_allowed_packet`值，当初始化到服务器的连接时，这个全局默认`max_allowed_packet`值被复制到一个**局部** `max_allowed_packet`变量（只读）并由连接用于其操作。

所以基本上每次服务器重启后你都需要输入

> 设置全局 max_allowed_pa​​cket=1048576000；

删除所有连接并启动新连接，以便反映这个新的全局值，现在您可以插入 blob。

# asp.net - Microsoft Excel 应用程序无法访问文件“...”

> ID：14211246
> 
> 赞同：1
> 
> 时间：2013-01-08T08:49:10.100
> 
> 标签：asp.net, excel, iis-7

我不知道我做错了什么。
我执行了以下步骤：要解决此问题，请按照以下步骤操作

3.  转到“开始”->“运行”并输入“taskmgr”
4.  转到任务管理器中的进程选项卡并选中“显示所有用户的进程”
5.  如果列表中有任何“Excel.exe”条目，请右键单击该条目并选择“结束进程”
6.  关闭任务管理器。
7.  转到“开始”->“运行”并输入“services.msc”
8.  如果它正在运行，请停止自动执行 Excel 的服务。
9.  转到“开始”->“运行”并输入“dcomcnfg”
10.  这将打开组件服务窗口，展开“控制台根”->“计算机”->“DCOM 配置”
11.  在组件列表中找到“Microsoft Excel 应用程序”。
12.  右键单击条目并选择“属性”
13.  转到属性对话框上的“身份”选项卡。
14.  选择“交互式用户”。
15.  单击“确定”按钮。
16.  切换到服务控制台
17.  启动服务自动化 Excel
18.  测试你的应用

    再次化。

但我收到另一个错误 - 关于“检索具有 CLSID 的组件的 COM 类工厂”。我喜欢这个链接[http://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91?prof=required](http://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91?prof=required)

但这没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:05:52.883

请原谅我的严厉回答，但您的问题是您在服务器环境中使用 EXCEL。它从来没有被建立来支持这一点。微软不建议这样做，因为有许多未解决的问题。使用像 EPPLUS 这样的库来操作 excel 文件会更好（而且更稳定，速度更快几个数量级）。

# cucumber - Selenium webdriver 无法在基于 capybara 的框架中打开网页

> ID：14211253
> 
> 赞同：0
> 
> 时间：2013-01-08T08:49:50.910
> 
> 标签：cucumber, capybara, selenium-webdriver

我正在尝试使用水豚和使用黄瓜的硒网络驱动程序启动网页。浏览器已启动，但无法加载 url。下面是我的`env.rb`文件

```
begin require 'rspec/expectations'; 
rescue LoadError; 
require 'spec/expectations'; 
end

require 'capybara'
require 'capybara/dsl'
require 'capybara/cucumber'
require 'capybara/session'
require 'selenium-webdriver'

Capybara.register_driver :selenium do |app|

    profile = Selenium::WebDriver::Firefox::Profile.new

    profile["network.proxy.type"] = 1 # manual proxy config
    profile["network.proxy.http"] = "proxybank.icici.net"
    profile["network.proxy.http_port"] = 8080

    profile.native_events = true 

    Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile)

  end

app_host = "https://mobilebanking.icici.com"

Capybara.app_host = app_host

Capybara.run_server = true

Capybara.default_driver = :selenium 
```

* * *

我得到的错误如下

```
D:\cucumberproject>cucumber
In Steps.rb file
Feature: My first feature

  Scenario: launch google page # features\google.feature:4

*** LOG addons.manager: Application has been upgraded

*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi-utils: Opening database
*** LOG addons.xpi-utils: Creating database schema
*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
*** Blocklist::_loadBlocklistFromFile: blocklist is disabled
*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed
in app-global
*** LOG addons.xpi: New add-on {20a82645-c095-46ed-80e3-08825760534b} installed
in winreg-app-global
*** LOG addons.xpi: New add-on jqs@sun.com installed in winreg-app-global
*** LOG addons.xpi: Updating database with changes to installed add-ons
*** LOG addons.xpi-utils: Updating add-on states
*** LOG addons.xpi-utils: Writing add-ons list
*** LOG addons.manager: shutdown
*** LOG addons.xpi: shutdown
*** LOG addons.xpi-utils: shutdown
*** LOG addons.xpi-utils: Database closed
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found

  Given I launch the browser # features/step_definitions/google_steps.rb:5
      Timeout::Error (Timeout::Error)
      C:/Ruby192/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill'
      C:/Ruby192/lib/ruby/1.9.1/net/protocol.rb:134:in `rbuf_fill'
      C:/Ruby192/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
      C:/Ruby192/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:2211:in `read_status_line'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:2200:in `read_new'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:1183:in `transport_request'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:1169:in `request'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:1162:in `block in request'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:627:in `start'
      C:/Ruby192/lib/ruby/1.9.1/net/http.rb:1160:in `request'
      ./features/step_definitions/google_steps.rb:9:in `/^I launch the browser$/
'
      features\google.feature:5:in `Given I launch the browser'

Failing Scenarios:
cucumber features\google.feature:4 # Scenario: launch google page

1 scenario (1 failed)
1 step (1 failed)
1m14.891s
*** LOG addons.manager: shutdown
*** LOG addons.xpi: shutdown 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:53:52.077

**编辑：** `server_boot_timeout`已在 Capybara 2 中*删除。*

**对于 Capybara 2**
您可以尝试放置 a`wait.until`并查看是否有帮助。您将需要`require 'selenium-webdriver'`在文件的顶部。

更改以下行：

```
Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile) 
```

对此：

```
capybara_driver = Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile)
driver = capybara_driver.browser

wait = Selenium::WebDriver::Wait.new(:timeout => 300)
wait.until { driver.title.downcase.start_with? "my page title" } 
```

如果这不起作用，您也可以尝试使用普通的旧红宝石睡眠。

```
sleep(5.minutes) 
```

**对于 Capybara < 2**
尝试增加`Capybara.server_boot_timeout`值。`env.rb`在您的文件中使用以下内容（如果不存在则添加该行） 。

```
Capybara.server_boot_timeout = 300 # 5 mins 
```

不要将其与`Capybara.default_wait_time`运行测试时实际使用的错误相混淆。这两个属性也都取值在`seconds`.

在调用实际的 Web 驱动程序之前更新这些值。可能就在所有`require`声明之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:44:42.757

如果您使用`app_host`=“ [https://mobilebanking.icici.com](https://mobilebanking.icici.com) ”

`Capybara.app_host = app_host`

然后你必须设置`Capybara.run_server`为`false`. 这是因为如果`Capybara.run_server`是，`true`那么它将在您机器上的默认 ROR 服务器上托管应用程序，然后从浏览器中点击 localhost 以打开 Web 应用程序。

因此，设置`Capybara.run_server = false`应该`env.rb`可以解决问题。

# google-apps-script - 在 Google Apps 脚本中使用电子表格功能？

> ID：14211254
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:49:51.277
> 
> 标签：google-apps-script, google-sheets

我目前正在使用 Google 电子表格中的工作/时间日志。我正在计算我花了多少时间工作。

我有一个单元格，其中包含以“时间值”数字表示的工作小时数。

例如，13:30 小时表示为`0.559`。我想将其表示为`13,5`.

在单元格的功能中，我可以`HOUR(0.559)`获取小时数。但我想使用我的自定义函数（由于单元格中的表达式很长），比如`HoursToDecimal(0.559)`

现在，我不能`HOUR()`在我的函数中使用该函数，因为它说它没有定义？我该如何使用它？

```
function HoursToDecimal(hours_in)
{
  return (INT(hours_in)*24+HOUR(hours_in)+MINUTE(hours_in)/60);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:19:26.317

我不明白您的自定义功能应该如何工作。GApps 将日期/时间值存储为天数和天数的小数部分。如果您在单元格中输入时间（例如 13:30），Google 会将其显示为时间，但会在内部将其转换为一天的一小部分（13.5 / 24 = 0.5625）

要将其转换为小时，只需乘以 24：

```
hoursworked = timeworked * 24; 
```

根据您的喜好舍入和/或截断。

# tridion - 在 Tridion 2009 上配置自定义解析器

> ID：14211255
> 
> 赞同：2
> 
> 时间：2013-01-08T08:49:54.957
> 
> 标签：tridion, tridion2009

有传言说（例如，请参阅[发布最终发布许多组件并耗尽内存](https://stackoverflow.com/questions/11023424/publishing-ends-up-publishing-many-components-and-runs-out-of-memory)）自定义解析器在 Tridion 2009 中可用。我的问题：如何在没有 TridionContentManager.config 的情况下配置一个？还是我完全偏离了轨道，并且 2009 是否带有此配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:23:57.880

在我 2009 年的测试系统上，它就在那里（与 2011 年在同一位置）。

`<Tridion Home>/config/Tridion.ContentManager.config`

# sql - 导出前的 SQL 平均数据

> ID：14211258
> 
> 赞同：1
> 
> 时间：2013-01-08T08:49:59.650
> 
> 标签：sql, csv, export, average

不是 SQL 新手，也不是专家，但这对我来说太复杂了，我无法弄清楚。

我有一个大型数据集，我需要在将数据导出到 .csv 文件之前对一些样本进行平均。我需要将数据平均为例如 20Hz 数据样本并将其导出到 .csv 文件。我真的很想在 sql 中执行此操作，以便我可以针对来自最终用户的不同数据 pr 请求构建多个不同的查询。所有人都必须使用平均功能。我的数据集的 .csv 转储可能如下所示。

```
 TimeStamp;Ds01;Ds02;Ds03;Ms01;Ms02
2012-11-16 07:24:11.0250 +00:00;4.18527784986003000000;9.94218092211272000000;2.31807112793595000000;249.34515570476700000000;-0.05185083571517050000
2012-11-16 07:24:11.0790 +00:00;5.61238782234661000000;10.29512074186070000000;2.47669503367129000000;249.34515570476700000000;-0.00729058410636121000
2012-11-16 07:24:11.1320 +00:00;4.15225189079078000000;10.68445062998030000000;2.58478777829982000000;249.34515570476700000000;0.10729292003057700000
2012-11-16 07:24:11.1860 +00:00;4.59751952718327000000;10.49899281165300000000;1.99555049965409000000;249.34515570476700000000;0.01339810414058600000
2012-11-16 07:24:11.2400 +00:00;5.19004408695513000000;9.79530534495047000000;1.95512557076862000000;249.34515570476700000000;-0.12028265068584200000
2012-11-16 07:24:11.2930 +00:00;4.77508262476736000000;11.18075855042080000000;2.57731795448403000000;249.34515570476700000000;0.01976385437041590000
2012-11-16 07:24:11.3470 +00:00;4.59557682370861000000;10.11536257279660000000;3.04659865067615000000;249.34515570476700000000;0.07228129376651260000
2012-11-16 07:24:11.4010 +00:00;3.88066194503305000000;9.86326270154796000000;3.01144653860183000000;249.34515570476700000000;0.06352838720049650000
2012-11-16 07:24:11.4540 +00:00;3.55234505781520000000;11.20268027835550000000;2.73813886722402000000;249.34515570476700000000;0.05716263697066660000
2012-11-16 07:24:11.5080 +00:00;4.78324197936095000000;10.46567178519230000000;1.01744298118624000000;249.34515570476700000000;0.05954979330685280000
2012-11-16 07:24:11.5620 +00:00;4.03063865327694000000;10.96987152768940000000;1.79606226363236000000;249.34515570476700000000;-0.01126917800000490000
2012-11-16 07:24:11.6150 +00:00;5.20636279614228000000;10.03381374487960000000;2.13659834935230000000;249.34515570476700000000;0.00544091635329865000
2012-11-16 07:24:11.6690 +00:00;4.52758220209545000000;10.86289349536830000000;1.82374455189088000000;249.34515570476700000000;0.03408679238753320000
2012-11-16 07:24:11.7230 +00:00;4.21014445433570000000;9.75233875819858000000;2.85150442866369000000;249.34515570476700000000;0.14787457774574300000
2012-11-16 07:24:11.7760 +00:00;4.48484272565288000000;10.72873252040820000000;2.51140774434468000000;249.34515570476700000000;0.02055957314914460000
2012-11-16 07:24:11.8300 +00:00;4.60762158525151000000;9.75628466922681000000;2.87655030851664000000;249.43409815763600000000;-0.05901230472372910000
2012-11-16 07:24:11.8840 +00:00;4.11145511782289000000;9.80407403612444000000;3.28607241418242000000;249.43409815763600000000;0.07228129376651260000
2012-11-16 07:24:11.9370 +00:00;5.81986855344050000000;9.38142312154414000000;2.31367711392666000000;249.43409815763600000000;-0.03991505403423940000
2012-11-16 07:24:11.9910 +00:00;5.19198679042979000000;9.17755105175183000000;2.31367711392666000000;249.43409815763600000000;0.02453816704278830000 
```

所以我需要的是这样一个不错的输出

```
2012-11-16 07:24:11.0000 +00:00;4.18527784986003000000;9.94218092211272000000;2.31807112793595000000;249.34515570476700000000;-0.05185083571517050000
2012-11-16 07:24:11.2000 +00:00;5.61238782234661000000;10.29512074186070000000;2.47669503367129000000;249.34515570476700000000;-0.00729058410636121000
2012-11-16 07:24:11.4000 +00:00;4.15225189079078000000;10.68445062998030000000;2.58478777829982000000;249.34515570476700000000;0.10729292003057700000
2012-11-16 07:24:11.6000 +00:00;4.59751952718327000000;10.49899281165300000000;1.99555049965409000000;249.34515570476700000000;0.01339810414058600000
2012-11-16 07:24:11.8000 +00:00;5.19004408695513000000;9.79530534495047000000;1.95512557076862000000;249.34515570476700000000;-0.12028265068584200000
2012-11-20 07:24:12.0000 +00:00;10.21270965034590000000;3.40336791376326000000;-1.90150052518475000000;331.83395934740000000000;0.06511982475795400000 
```

唷....我不知道从哪里开始？有人有什么好主意/代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:35:56.767

假设 MS-SQL（并且在澄清之前不关注导出端） - 这应该将您的日期分组为 200 毫秒：

```
SET DATEFORMAT YMD

IF OBJECT_ID('tempdb..#dates') IS NOT NULL DROP TABLE #dates
SELECT '2012-11-16 07:24:11.025' as [date],4.18527784986003000000 as figure1,9.94218092211272000000 as figure2,2.31807112793595000000 as figure3,249.34515570476700000000 as figure4,-0.05185083571517050000 as figure5 INTO #dates
UNION ALL SELECT '2012-11-16 07:24:11.079',5.61238782234661000000,10.29512074186070000000,2.47669503367129000000,249.34515570476700000000,-0.00729058410636121000
UNION ALL SELECT '2012-11-16 07:24:11.132',4.15225189079078000000,10.68445062998030000000,2.58478777829982000000,249.34515570476700000000,0.10729292003057700000
UNION ALL SELECT '2012-11-16 07:24:11.186',4.59751952718327000000,10.49899281165300000000,1.99555049965409000000,249.34515570476700000000,0.01339810414058600000
UNION ALL SELECT '2012-11-16 07:24:11.240',5.19004408695513000000,9.79530534495047000000,1.95512557076862000000,249.34515570476700000000,-0.12028265068584200000
UNION ALL SELECT '2012-11-16 07:24:11.293',4.77508262476736000000,11.18075855042080000000,2.57731795448403000000,249.34515570476700000000,0.01976385437041590000
UNION ALL SELECT '2012-11-16 07:24:11.347',4.59557682370861000000,10.11536257279660000000,3.04659865067615000000,249.34515570476700000000,0.07228129376651260000
UNION ALL SELECT '2012-11-16 07:24:11.401',3.88066194503305000000,9.86326270154796000000,3.01144653860183000000,249.34515570476700000000,0.06352838720049650000

SELECT 
DATEADD(ms,0- DATEPART(ms,date) % 200,date) as date_group
,AVG(figure1) as figure1
,AVG(figure2) as figure2
,AVG(figure3) as figure3
,AVG(figure4) as figure4
,AVG(figure5) as figure5
FROM #dates
GROUP BY DATEADD(ms,0- DATEPART(ms,date) % 200,date) 
```

# java - 如何在 2 个战争文件之间共享价值？

> ID：14211259
> 
> 赞同：-2
> 
> 时间：2013-01-08T08:50:10.270
> 
> 标签：java

如何在多个 war 文件之间共享值（登录用户名）。这 2 个 war 文件在 JBoss 和 Weblogic 上都部署了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:55:21.870

如果您要共享配置值，有几种方法：最简单的方法是两个系统都可以通过文件系统或数据库访问的文件。

如果您在两个系统之间共享活动状态（例如 Web 会话），您可以使用数据库或[共享缓存](http://java-source.net/open-source/cache-solutions)。

或者，您可以让两个系统通过某种 API（例如通过 HTTP 调用）相互通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:36:41.120

使用[Webservice](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/)我们可以轻松地进行通信。

# shell - 每个用户的 SSH MOTD

> ID：14211260
> 
> 赞同：1
> 
> 时间：2013-01-08T08:50:17.760
> 
> 标签：shell, unix, ubuntu, ssh, remote-access

连接到 ssh 后，您会收到一条由 /etc/motd 提供的欢迎消息。现在我希望每个用户都有这些消息，但我不能编辑 /etc/motd.

所以我想知道 ~/.ssh/motd 是否有可能使这些消息存储在用户目录中。这会很棒，因为每个用户都应该对给定的路径结构有自己的说明。

有人知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:56:15.010

“每日消息”是一种向所有用户发送消息的廉价方式。如果您想针对个人用户，您有以下选项：

1.  给他们发一封电子邮件。
2.  编辑登录脚本（查看`/etc/profile`Bourne shell）并添加一行，在特定路径中查找每个用户的消息并显示该消息。例子：

    ```
    test -e /var/motd/$LOGNAME && cat /var/motd/$LOGNAME 
    ```

第二种方法的优点是您可以定义使用哪个路径（因此您可以使用您可以编写的路径；如果您不会编写`/etc/motd`，那么您也无法编辑任何内容`~/.ssh/`）。

当然，您需要进行`root`设置。

# version-control - 通过 ssh 推送后如何强制 rhodecode 使缓存无效

> ID：14211261
> 
> 赞同：2
> 
> 时间：2013-01-08T08:50:17.730
> 
> 标签：version-control, mercurial, paster, rhodecode

我正在运行一个 rhodecode 实例进行代码审查等。但是当我通过 ssh 推送时，rhodecode 看不到变更集（除非我从 hgweb 手动提取）。

我是否需要 mercurial 中的传入钩子或其他东西才能使 rhodecode 正常工作？

**编辑**：

通过添加钩子`incoming.rhodecode = python:rhodecode.lib.hooks.log_push_action`，我得到了堆栈跟踪：

```
remote:   File "/usr/share/mercurial-server/hg-ssh", line 91, in <module>
remote:     dispatch.dispatch(request(['-R', repo, 'serve', '--stdio']))
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 65, in dispatch
remote:     return _runcatch(req)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 88, in _runcatch
remote:     return _dispatch(req)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 741, in _dispatch
remote:     cmdpats, cmdoptions)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 514, in runcommand
remote:     ret = _runcommand(ui, options, cmd, d)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 831, in _runcommand
remote:     return checkargs()
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 802, in checkargs
remote:     return cmdfunc()
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/dispatch.py", line 738, in <lambda>
remote:     d = lambda: util.checksignature(func)(ui, *args, **cmdoptions)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/util.py", line 472, in check
remote:     return func(*args, **kwargs)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/commands.py", line 5211, in serve
remote:     s.serve_forever()
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/sshserver.py", line 94, in serve_forever
remote:     while self.serve_one():
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/sshserver.py", line 112, in serve_one
remote:     rsp = wireproto.dispatch(self.repo, self, cmd)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/wireproto.py", line 351, in dispatch
remote:     return func(repo, proto, *args)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/wireproto.py", line 629, in unbundle
remote:     lock.release()
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/lock.py", line 143, in release
remote:     callback()
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/localrepo.py", line 2452, in runhooks
remote:     source=srctype, url=url)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/localrepo.py", line 386, in hook
remote:     return hook.hook(self.ui, self, name, throw, **args)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/hook.py", line 181, in hook
remote:     r = _pythonhook(ui, repo, name, hname, hookfn, args, throw) or r
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/hook.py", line 38, in _pythonhook
remote:     obj = __import__(modname)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/demandimport.py", line 95, in _demandimport
remote:     return _import(name, globals, locals, fromlist, level)
remote:   File "/usr/local/lib/python2.7/dist-packages/rhodecode/lib/hooks.py", line 35, in <module>
remote:     from rhodecode.lib.utils import action_logger
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/demandimport.py", line 114, in _demandimport
remote:     mod = _origimport(name, globals, locals)
remote:   File "/usr/local/lib/python2.7/dist-packages/rhodecode/lib/utils.py", line 55, in <module>
remote:     from rhodecode.model.db import Repository, User, RhodeCodeUi, \
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/demandimport.py", line 114, in _demandimport
remote:     mod = _origimport(name, globals, locals)
remote:   File "/usr/local/lib/python2.7/dist-packages/rhodecode/model/db.py", line 147, in <module>
remote:     class RhodeCodeSetting(Base, BaseModel):
remote:   File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/ext/declarative.py", line 1343, in __init__
remote:     _as_declarative(cls, classname, cls.__dict__)
remote:   File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/ext/declarative.py", line 1082, in _as_declarative
remote:     class_mapped = _is_mapped_class(base)
remote:   File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/util.py", line 696, in _is_mapped_class
remote:     manager = attributes.manager_of_class(cls)
remote:   File "/usr/local/lib/python2.7/dist-packages/mercurial/demandimport.py", line 87, in __getattribute__
remote:     return getattr(self._module, attr)
remote: AttributeError: 'module' object has no attribute 'manager_of_class'
abort: unexpected response: empty string 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:02:28.510

RhodeCode 使用 post-push 挂钩来使存储库的缓存无效，并将 push/pull 事件存储在它的日志中。你可以做一些事情来克服这个问题。

*   禁用 vcs_full_cache，并将缓存过期时间调低到某个较低的数值（例如 60 秒）
*   通过 SSH 推送时调用正确的 RhodeCode 钩子，我认为这是最合适的解决方案

# java - 编写一个在字符流 inputsupplier 和 outputsupplier 之间传递的过滤器

> ID：14211265
> 
> 赞同：1
> 
> 时间：2013-01-08T08:50:58.793
> 
> 标签：java, design-patterns, guava

我想编写一个 grep 类型的过滤器，它将 Guava Charstreams InputSupplier 作为输入并使用 Charstreams OutputSupplier 作为其输出。如果它们满足特定的正则表达式，它应该只将行从 inputsupplier 传递到 outputsupplier。

这样做的正确设计模式/范式是什么？

我猜你会做这样的线路过滤器：

```
InputSupplier<InputStreamReader> ris = CharStreams.newReaderSupplier(....
CharStreams.readLines(ris, new LineProcessor<.... 
```

并实现 LineProcessor 方法。

但是 LineProcessor.getResult() 应该返回什么 - 只是失败的成功？我应该在周围功能中使用“最终”输出供应商吗？

还是我使用了完全错误的 api/方法！！

一些伪代码来演示最好的方法将不胜感激。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:36:20.123

[CharStreams.readLines](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/io/CharStreams.java?r=d5de86dc98b759183762543e3e977743e781d923)返回一个`List<String>`. 因此，根据源代码，它要求 LineProcessor 累积行然后返回结果。在我看来，您的 LineReader 可以如下所示

```
new LineProcessor<List<String>>() {

    List<String> result = Lists.newArrayList();

    public boolean processLine(String line) {
      if (line matches regex){
        result.add(line.trim());
      }

      return true;//continue processing

    }

    public List<String> getResult() {return result;}

  }); 
```

# asp.net - 从启用单个缓存的数据源访问 asp.net gridview 主数据和详细数据

> ID：14211268
> 
> 赞同：0
> 
> 时间：2013-01-08T08:51:16.203
> 
> 标签：asp.net, caching, data-binding, gridview

有没有办法在一次访问数据库中获取主行和详细行的数据并正确缓存它们？

我希望在第一次扩展任何行时不必连接到数据库，因此我必须将主数据和详细信息绑定到启用缓存的单个数据源。我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:58:26.710

一般来说，是的，这是可能的。您可以创建一个 DataSet，用所需的数据填充它并将其保存到缓存中。使用 Page_Load 事件从缓存中获取数据并设置 GridView 的 DataSource。请参阅[缓存应用程序数据](http://msdn.microsoft.com/en-us/library/6hbbsfk6%28v=vs.71%29.aspx)

# eclipse-plugin - Eclipse Indigo 3.7 的标准插件项目不适用于 Aptana studio 3（Windows 平台）

> ID：14211271
> 
> 赞同：0
> 
> 时间：2013-01-08T08:51:23.937
> 
> 标签：eclipse-plugin, eclipse-rcp, aptana, aptana3, eclipse-indigo

作为一名开发人员，我在 Eclipse indigo 3.7 上创建了一个插件项目，其中包含向导的标准模板“Plugin with a view”。我通过标准导出向导将插件项目导出到 jar 文件。然后我想在 Aptana studio 3（Windows 平台）上测试它，所以我把它放在 dropins 文件夹中。午餐后 Aptana studio 3 我希望在 Windows > Show view -> Other> Simple 类别中找到插件的视图，但我找不到 Simple 类别。我对插件文件夹中的 jar 文件进行了相同的测试，结果相同。通过以下配置，我可以找到插件的视图：

```
Eclipse Indigo 3.7 ( on Windows platform)
Eclipse Indigo 3.7 with aptana plugin (on Windows platform)
Eclipse indigo 3.7 (on Ubuntu 12.04)
Eclipse Indigo 3.7 with aptana plugin (on Ubuntu 12.04)
Aptana studio 3 ( on Ubuntu 12.04) 
```

仅使用 Aptana studio 3（在 Windows 上）我找不到插件。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:19:39.617

尝试使用`-clean`属性启动目标 Eclipse 平台。还要查看您的插件的依赖关系，并确保如果您的依赖关系中提到了版本，它们在目标平台上可用（如果需要，您可以简单地删除版本）

# php - 如何守护一个要与暴发户一起运行的php脚本

> ID：14211281
> 
> 赞同：6
> 
> 时间：2013-01-08T08:52:10.990
> 
> 标签：php, ubuntu, upstart

我有一个作为 cron 作业运行的 PHP 脚本。该脚本使用数据库来查看它是否有任何事情要做，并确保它的兄弟尚未运行。

我想使用[upstart](http://upstart.ubuntu.com/getting-started.html)将 PHP 脚本作为守护进程运行。

我已经将我的`/etc/init/super-mailer.conf`文件设置为：

```
description "super mailer"
author "Rob Nugen"

start on startup
stop on shutdown
respawn

exec sudo -u www-data php -f /var/www/super-mailer/scripts/mailer.php 
```

我执行`sudo start super-mailer`并运行一次。

但是，它不会再次运行。为什么不？

我也试过`exec sudo`用

```
script
    sudo -u www-data php -f /var/www/clubberia-mailer/scripts/mailer.php
end script 
```

我需要将我的 PHP 脚本更改为循环吗？我如何告诉暴发户继续启动脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:19:42.850

守护进程是一种在被告知之前不会停止的程序。但是，您的脚本会自行终止。所以是的，您需要在脚本中创建一个循环，每次都会重新运行它。

但是，请记住，只创建一个循环并一次又一次地执行您的脚本，可能会使其消耗许多 CPU 周期。因此，您可能会考虑在每次迭代中调用类似[usleep的函数，以减少守护进程的 CPU 消耗。](http://php.net/manual/en/function.usleep.php)因此，例如，您让脚本每 2 秒运行一次。

# asp.net-mvc-3 - ASP.NET MVC 3.0 网站占用 1.5 GB 内存

> ID：14211282
> 
> 赞同：0
> 
> 时间：2013-01-08T08:52:12.097
> 
> 标签：asp.net-mvc-3

我在 ASP.NET MVC 3.0 中使用 NHibernate 开发了一个网站，它部署在服务器上，现在我的 IT 基础设施团队通知说，即使没有用户点击，该网站也占用了高达 1.5 GB 的内存 (RAM)。

我向他们询问了服务器/IIS 错误，以检查是否有任何 URL 失败，并询问了 ASP.NET MVC 3.0 网站的最低内存基准。

谁能告诉我应该检查什么，为什么这个网站会占用这么多的备忘录？

或者对于 ASP.NET MVC 3.0 网站是否正常。

此类网站的最低限制是多少？

**编辑：**

IT Infra 团队给了我[这个文件。](http://www.sendspace.com/file/8om18y)谁能告诉我有什么问题

# node.js - Node.js 是否适合以下场景？

> ID：14211287
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:52:35.877
> 
> 标签：node.js, rest, webserver

我正在构建一个运行在 Unix 机器上的 web 服务器，场景如下：

*用户可以用他/她的手机拍照并上传到服务器，然后服务器将运行一个图像处理可执行文件来处理图像（识别图像）并将结果返回给用户的手机。*

node.js 适合这种场景吗？还是其他技术适合？

我主要关心的是并发性。图像处理可执行文件是一个用 C++ 编写的应用程序，我只想从 node.js 调用该应用程序并返回结果。然而，node.js 不是多线程的，对吧？这意味着上传的图像必须一个接一个地处理。可以并行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:46:05.890

Node.JS 可以使用 C 扩展在后台工作。（许多像hiredis这样的模块也编译为C）。

Node.JS 是事件驱动的，这也是它是单线程的原因。它非常适合做一些有 I/O 或网络延迟的并发任务，因为它是单线程的，它不需要等待第一个操作完成后再执行另一个操作。

Node.JS 不适合的是 CPU 密集型操作，如图像处理和提供静态文件。您可以通过 fork 一个新进程来扩展节点（节点有集群库可以做到这一点。）但是您必须有一个通道来自己在每个进程之间进行通信。我推荐使用 redis 来处理中心数据。

# android - 用另一个替换 SherlockFragment

> ID：14211288
> 
> 赞同：0
> 
> 时间：2013-01-08T08:52:37.263
> 
> 标签：android, android-fragments, actionbarsherlock

我正在使用 Jake Wharton 的 TabPageIndicator 和 ViewPager。每个选项卡都是从 SherlockFragment 扩展而来的片段。在一个片段中，单击项目时，我想在同一选项卡内用另一个片段替换当前片段。从视觉上看，当前片段消失了，没有抛出异常，但我得到了新片段应该在的空白空间。
我用来替换片段的代码是：

```
 SherlockFragment frag = new AboutFragment();
 getSherlockActivity().getSupportFragmentManager()
 .beginTransaction().setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE)
 .replace(R.id.pager_content, frag, "dialogAbout")
 .hide(this)
 .addToBackStack(null)
 .commit(); 
```

替换它的正确方法是什么？

我的 main_activity xml 如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <com.viewpagerindicator.TabPageIndicator
        android:id="@+id/indicator"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="#000000" />
   <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
        <FrameLayout android:id="@+id/pager_content"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
     </android.support.v4.view.ViewPager>   
</LinearLayout> 
```

在我的 MainActivity 中，我将适配器设置为 viewPager。Adapter 从 FragmentPagerAdapter 扩展而来，如下所示：

```
private class MyAdapter extends FragmentPagerAdapter {

     public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        index = position % CONTENT.length;  
        switch (index) {
        case FRAG_TAG_DEPOSIT:
            return new DepositFragment();
        case FRAG_TAG_HISTORY:
            return new HistoryFragment();
        case FRAG_TAG_LOCATIONS:
            return new LocationsFragment();
        case FRAG_TAG_SETTINGS:
            return new SettingsFragment();
        default:
            return null;
        }

    }

    @Override
    public CharSequence getPageTitle(int position) {
       return getString(CONTENT[position % CONTENT.length]).toUpperCase();
    }

    @Override
    public int getCount() {
        return CONTENT.length;
    }
 } 
```

我在这里不明白的是 - 从适配器返回的片段放置在哪个容器中？我没有特别通知放在哪里，我只是说明哪个片段应该放在哪个位置。这可能是更换失败的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:57:20.633

由于您使用 ViewPager 加载片段，因此无需手动更改片段。只需使用`setCurrentItem`这样的方式设置要切换到的片段，其中`num`是要切换到的片段的索引。

```
viewPager.setCurrentItem(num); 
```

# javascript - 克隆节点上的 DOM 操作

> ID：14211289
> 
> 赞同：1
> 
> 时间：2013-01-08T08:52:43.693
> 
> 标签：javascript, html, dom

我有一个与 DOM 操作相关的查询。我通过克隆整个文档节点然后对克隆的副本执行操作来对网页中的 DOM 节点执行一些操作。

我在 DOM 上执行的一项特定操作是更改“img”标签的“src”属性。当我这样做时，我在浏览器中该页面的控制台中看到 404 错误（404（未找到））。我设置的路径不存在，但由于我在克隆副本上执行操作，我认为它不应该显示任何错误。我在这里做错了吗？有没有办法避免显示此错误？

下面提供了代码片段：

```
//code snippet

var doc = document.documentElement.cloneNode(true);
var allNodes = doc.getElementsByTagName('*');

//for loop to interate through the node

//When an img node is found
node.src = "some_image.png"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:31:21.387

从评论...

我不明白为什么它不应该加载。因为 var img = new Image(); img.src = "aa.png" 也会加载图像，即使图像未附加到 DOM 上。（这种方法经常用在 HTML5 Canvas 的使用中）

即使在定义 src 后将图像添加到路径中，也不会找到该图像，因为浏览器只会发送 1 次对该文件的请求。

# android - 手动启动/停止接收器并将参数传递给接收器

> ID：14211291
> 
> 赞同：3
> 
> 时间：2013-01-08T08:52:52.883
> 
> 标签：android, broadcastreceiver, android-service

我的项目很简单。它有一个`activity`和一个`broadcast receiver`。从我的应用程序中，我希望能够**发送短信**和**接收短信**。这很好用。

但现在我想将一些数据从视图传递给接收器。想象一个简单的`checkbox`，我想把它的值传递给`receiver`.

所以这是我的应用程序的基本生命周期：

1.  启动应用
2.  按发送短信
3.  接收器以参数启动并发送短信
4.  接收者收到一条短信并停止。

接收者：

```
<receiver android:name=".SmsReceiver"> 
    <intent-filter android:priority="1000"> 
       <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
    </intent-filter> 
</receiver> 
```

[活动：](http://dpaste.com/867749/)
[接收者：](http://dpaste.com/867753/)

我试图传递一个值，但它似乎被忽略了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:25:39.577

1.  `BroadcastReceiver`你不能在任何你想要的时候开始和停止。只有在执行`BroadcastReceiver`时才活着。`onReceive()`
2.  要发送广播，您应该使用`sendBroadcast(this.service)`而不是`startService(this.service);`
3.  将其更改为后，`sendBroadcast(this.service)`您将收到**两个**广播（第一个来自您`sendBroadcast()`，第二个来自`SmsManager`）。这绝对不是您想要的，因为在第一种情况下，您将能够获得您的`checked`参数，但`SmsMessage`在第二种情况下反之亦然。
4.  您可以将此`checked`参数存储在中`SharedPreferences`，然后检索它`onReceive()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:36:36.180

使用自定义意图广播来实现当前流量。将您的代码更改为：

**第1步 ：**

`SMS_RECEIVED`在 Manifest 中注册一个自定义 Intent为：

```
<receiver android:name=".SmsReceiver"> 
    <intent-filter android:priority="1000"> 
       <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
       <action android:name="xx.xxx.xxx.intent.action.SMS_STATUS_ACTION" />
    </intent-filter> 
</receiver> 
```

**第2步 ：**

```
public class SmsReceiver extends BroadcastReceiver {
  public static final String STATUS_INTENT = 
                  "xx.xxx.xxx.intent.action.SMS_STATUS_ACTION";
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
            if (arg1.getAction().equals(SmsReceiver.STATUS_INTENT)) {

                    // get value here sended from Activity 
             }
            else{
                    // Check for SMS_RECEIVED Action here
              }
    }

} 
```

**第 3 步：**

从您的活动中发送价值，使用`sendBroadcast`：

```
public static final String STATUS_INTENT = 
                         "xx.xxx.xxx.intent.action.SMS_STATUS_ACTION";
@Override
    public void onClick(View v) {

        int checked = 0;

        if(this.param.isChecked()){
            checked = 1;
        }
        // put value here
        Intent intent = new Intent();
            intent.putInt("param", checked);
            intent.setAction(CUSTOM_INTENT);
            sendBroadcast(intent);
     } 
```

# asp.net - System.Byte[] 在gridview 中显示而不是图像？

> ID：14211292
> 
> 赞同：4
> 
> 时间：2013-01-08T08:52:54.637
> 
> 标签：asp.net, image, system, byte

嗨，我有一个页面可以让我上传照片。然后当我点击上传...照片已被批准。但是当我想在gridview中显示它时。图像必须出现的列给了我“System.Byte []”而不是图像。帮助 ：）

这是我的代码：

```
<%@ Page Language="C#" Debug="true" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>
<%@ Import Namespace= "System.Data.OleDb" %>

<script runat="server" type="text/c#">
protected void btnUpload_Click(object sender, EventArgs e)

{
    {
   byte[] imageSize = new byte
                 [FileUpload1.PostedFile.ContentLength];
  HttpPostedFile uploadedImage = FileUpload1.PostedFile;
  uploadedImage.InputStream.Read
     (imageSize, 0, (int)FileUpload1.PostedFile.ContentLength);
 // Create SQL Connection 
  OleDbConnection con = new OleDbConnection();
  con.ConnectionString = ConfigurationManager.ConnectionStrings["recordsConnectionString"].ConnectionString;
 // Create SQL Command 
 OleDbCommand cmd = new OleDbCommand();
 cmd.CommandText = "INSERT INTO PendingRecords([Image])" + " VALUES (@Image)";
 cmd.CommandType = CommandType.Text;
 cmd.Connection = con;

 OleDbParameter UploadedImage = new OleDbParameter
              ("@Image", OleDbType.VarBinary, imageSize.Length);

 UploadedImage.Value = imageSize;
 cmd.Parameters.Add(UploadedImage);
 con.Open();
 cmd.ExecuteNonQuery();  
 GridView1.DataSourceID = "";
 GridView1.DataSource = SqlDataSource1;
 GridView1.DataBind();
 con.Close();
 }
}
</script>

<form id="form1" runat="server">
<div>
<asp:FileUpload ID="FileUpload1" runat="server"/>
<asp:Label ID="lblMessage" runat="server">
</asp:Label>
<asp:Button ID="btnUpload" runat="server" 
            OnClick="btnUpload_Click" Text="Upload"/>
</div>
<asp:GridView runat="server" id="GridView1" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" DataKeyNames="ID">
        <Columns>
            <asp:boundfield DataField="ID" HeaderText="ID" ReadOnly="True" InsertVisible="False" SortExpression="ID">
            </asp:boundfield>
            <asp:boundfield DataField="Image" DataFormatString="{0}" HeaderText="Image" SortExpression="Image">
            </asp:boundfield>
            <asp:boundfield DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName">
            </asp:boundfield>
        </Columns>
</asp:GridView>
<asp:SqlDataSource runat="server" id="SqlDataSource1" ProviderName="<%$ ConnectionStrings:recordsConnectionString.ProviderName %>" ConnectionString="<%$ ConnectionStrings:recordsConnectionString %>" SelectCommand="SELECT * FROM [PendingRecords]" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
        <asp:parameter Name="ID" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
    </InsertParameters>
</asp:SqlDataSource>
</form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T09:07:59.677

我可能会为您提供一个不需要太多更改的小解决方案。恕我直言，有点乱。

将您的图像绑定字段替换为下面的此模板字段。

```
 <asp:TemplateField>
            <HeaderTemplate>Image</HeaderTemplate>
            <ItemTemplate>
                <img src='data:image/jpg;base64,<%# Eval("Image") != System.DBNull.Value ? Convert.ToBase64String((byte[])Eval("Image")) : string.Empty %>' alt="image" height="100" width="200"/>
            </ItemTemplate>
        </asp:TemplateField> 
```

# java - 为什么一个 ceil 函数给出不同的答案？

> ID：14211293
> 
> 赞同：0
> 
> 时间：2013-01-08T08:52:55.477
> 
> 标签：java

我想在简单的计算中使用 ceil `Math.ceil`。但是，`Math.ceil(3/2)`出1.0，`Math.ceil(1.5)`而出2.0，这是为什么呢？我应该自己纠正这个以使上限操作`3/2`成为 2.0 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T08:56:24.347

第一种情况等于`Math.ceil(1)`因为`3/2`是整数除法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:00:46.593

3/2 将返回 int 所以我不会携带浮点值。但是（1.5）是浮点型。
Java 中的 3/2=1 所以 Math.ceil(1)=1.0
所以 Math.ceil(3/2) 将返回 1.0。
和 Math.ceil(1.5) 返回 2.0

# asp.net - 如何让 IIS 告诉我服务器上有哪些错误？

> ID：14211294
> 
> 赞同：1
> 
> 时间：2013-01-08T08:52:56.903
> 
> 标签：asp.net

![在此处输入图像描述](../Images/e43654a194c3377ce7359da0d7fc000a.png)

我需要的只是查看错误，更改设置以便远程查看。

这是我的 Web.Config 文件

![在此处输入图像描述](../Images/83c8aa12335331a4d71cb085844e131c.png)

帮助？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:55:47.690

对于在网站中显示错误：启用要显示的错误，然后自定义本地或远程。

因此，如果“将错误发送到浏览器”也不起作用，则设置如下：

**错误页面 -> 500 -> 编辑功能设置 -> “详细错误”**

或者试试

```
<configuration>
<system.webServer>
    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true"/>
</system.webServer>
<system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:57:32.933

您必须将 customErrors 模式设置为“关闭”，如第一个屏幕截图中的消息所述。删除默认重定向可能会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T09:15:16.450

您是否考虑过使用[Elmah（错误日志记录模块和处理程序）来获得更好的远程日志查看机制，通过 NuGet 或按照](http://code.google.com/p/elmah/)[此处](http://haacked.com/archive/2007/07/24/securely-implement-elmah-for-plug-and-play-error-logging.aspx)的说明很容易实现。我使用 Elmah 很长时间了，并建议这样做。

# javascript - 向 Create 方法添加功能

> ID：14211299
> 
> 赞同：-1
> 
> 时间：2013-01-08T08:53:24.167
> 
> 标签：javascript, extjs, extjs4

祝大家有美好的一天。正如标题中所说，我想为 Ext.create 方法添加一些逻辑，但我不明白该怎么做。你怎么看它，也许这是不好的方式，你有另一种方法。谢谢回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:05:46.627

对于那些真正想要覆盖[Ext.create](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-create)的人：

```
Ext.create = (function(){
    var original = Ext.create;
    return function() {
        // custom logic
        // call the original Ext.create()
        return original.apply(Ext, arguments);
    };
})();
//created by Renku 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:12:57.267

如果您需要覆盖该`Ext.create`功能，您可以简单地

```
Ext.create = function() {
    // your new logic here
} 
```

**注意：**如果您这样做，该方法的原始实现将丢失，因此您必须提供包含默认行为的逻辑才能使`Ext`组件仍然工作。

如果这是一个好主意，取决于你要做什么。但我怀疑这是否真的有必要，并且可能有更好的方法 - 但正如所说，这取决于并且不能根据您帖子中的信息说。

# jquery - jQuery动画通过图片

> ID：14211300
> 
> 赞同：1
> 
> 时间：2013-01-08T08:53:27.907
> 
> 标签：jquery, html, css

我正在学习 jquery 来制作一些很酷的动画。现在我被分配了一个关于图片的任务，它扩展、收缩和不透明度也发生了变化，最后它隐藏了。

这是我的代码：

```
function play_pic1()
{
    var div = $("#img");
    div.animate({width:0},2000);
    div.animate({width:1100,opacity:0},4000);
    div.animate({opacity:1},4000);
    div.hide(4000);
}

$(document).ready(function(){
         play_pic1();
         play_pic1();       
}); 
```

问题是它只适用于一张图片，当我尝试插入第二张图片时，第二张图片变成静态的。

我使用了循环和函数，但没有任何帮助。请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:55:05.597

您可以将要设置动画的元素作为函数的参数传递，例如

```
function play_pic1(element)
{
    var div = $(element);
    div.animate({width:0},2000)
       .animate({width:1100,opacity:0},4000)
       .animate({opacity:1},4000)
       .hide(4000);
}

$(document).ready(function(){
         play_pic1("#img1");
         play_pic1("#img2");       
}); 
```

* * *

在 OP 澄清之后：如果您需要对不同元素进行顺序动画，您可以`Deferred objects`像这样使用

**示例 JSBin**：http: [//jsbin.com/ilisug/1/edit](http://jsbin.com/ilisug/1/edit)

```
function animate(el)
{
    var div = $(el);
    return div.animate({width:0},2000)
       .animate({width:300,opacity:0},2000)
       .animate({opacity:1},2000)
       .hide(2000);
}

$(document).ready(function(){

    var dfd = $.Deferred(), 
        chain = dfd;

    var slide = ['#el1', '#el2', '#el3'];

    $.map(slide, function(el) {
        chain = chain.pipe(function() {
            return animate(el).promise();
        });
    });

    chain.done(function() {
       alert('done')
    });

    return dfd.resolve();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:56:04.413

那是因为您无法通过一个 ID 检索所有 div ：在 HTML 文档中只能出现一次 id 。

您应该使用一个类 ( `<div class=img></div>`) 并替换

```
var div = $("#img"); 
```

和

```
var div = $(".img"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T08:56:15.383

```
var div = $("#img"); 
```

上面的声明说只有#img 会被引用。当您动态添加图像时，您将不得不稍微修改您的代码。尝试将 ID 传递给此函数并对其应用动画。就像是

```
function play_pic1(id)
{
    var div = $(id);
    div.animate({width:0},2000);
    div.animate({width:1100,opacity:0},4000);
    div.animate({opacity:1},4000);
    div.hide(4000);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T08:57:26.007

将`#img`仅适用于第一张图片，您必须将选择器作为参数传递给`play_pic1()`

```
function play_pic1(elem)
{
    var div = $(elem);
    //your code here
}

$(document).ready(function(){
         play_pic1("#img"); //pass the img selector to play_pic1
         play_pic1("#img2");       
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T09:03:29.730

我认为您的问题是，对多个元素使用 sameID`#img`只会影响第一个元素。

相反，您可以使用类`.img`和此代码：

```
function play_pic1(){
 $(".img").each(function(){
   var div = $(this);
   div.animate({width:0},2000);
   div.animate({width:1100,opacity:0},4000);
   div.animate({opacity:1},4000);
   div.hide(4000); 
 });
}

$(document).ready(function(){
   play_pic1();     
}); 
```

尝试使用类`$(".img")`

# javascript - Node.js：错误 GET http://undefined/socket.io/1/?t=1357634942292

> ID：14211301
> 
> 赞同：1
> 
> 时间：2013-01-08T08:54:10.043
> 
> 标签：javascript, node.js

我正在运行 Node.js 应用程序，在加载 url 时出现如下错误：

```
 GET http://undefined/socket.io/1/?t=1357634942292 
```

在尝试发送消息时会产生另一个错误，即

未捕获的类型错误：对象 # 没有方法“发送”

编辑：我使用了一个函数

```
 client.broadcast.send({ announcement: client.sessionId + ' connected' }); 
```

现在出现的错误是 TypeError:Property 'broadcast' of object # is not a function

任何人都可以帮我解决这里可能出了什么问题吗？

干杯吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:09:26.293

如何共享客户端初始化代码？

我猜你的 io.connect 方法被称为错误。你`io.connect();`在需要的地方做它：`io.connect("http://yourdomain.tld");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T19:37:53.663

你找到遮篷了吗？我最好的提示是检查您是否指定了 io.connect('localhost:6666') 或您设置站点的任何位置，如[那个问题](https://stackoverflow.com/questions/15437156/http-domain-local-socket-io-1-t-1363363318728-moved-permanently)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T10:04:54.623

[参考这个](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/) 对你有帮助。谢谢

# html - 如何在没有任何文件扩展名的情况下获取用户友好的 URL？

> ID：14211303
> 
> 赞同：4
> 
> 时间：2013-01-08T08:54:29.997
> 
> 标签：html, url, web, webserver

很长一段时间以来，我一直想知道人们如何在没有文件扩展名（例如“.html”或“.apsx”）的情况下设法让他们的 URL 正常工作。

以这个网站为例：

```
http://www.axongarside.com/Communication
http://www.axongarside.com/Communication/Compleat
http://www.axongarside.com/Brand
http://www.axongarside.com/Brand/K3-Group 
```

他们是如何做到这一点的？我能想到的唯一方法是为每个页面创建一个新目录并在每个目录中都有一个索引页面，但这对于更大的网站来说将是一个巨大的麻烦。还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:08:09.917

三种最常见的方法是：

*   使用索引页（即只需创建一个目录并将`index.html`文件放入其中）。
*   使用重写引擎（例如 Apache 的[mod_rewrite](http://httpd.apache.org/docs/2.4/rewrite/)）将 URL 映射到不同的文件（这是 PHP 领域的常用方法）。
*   使用为您处理 URL 的前端控制器脚本（这是 MVC 框架的常用方法）。

后一种方法会在 Apache 服务器配置中使用类似的东西：

```
WSGIDaemonProcess example processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup example
WSGIScriptAlias / /hosts/example.com/application/wsgi.py 
```

或者

```
SetHandler fcgid-script
Alias / /hosts/example/application.fcgi/ 
```

对于分别使用 WSGI (Python) 或 FastCGI（跨语言，该特定示例取自我正在编写的 Perl 应用程序）的脚本。

URL 格式将由脚本本身处理，不同的框架对问题采取不同的方法。

在 Catalyst 中，这是通过[为子例程名称提供属性来](http://search.cpan.org/~hkclark/Catalyst-Manual-5.9006/lib/Catalyst/Manual/Intro.pod#Action_types)完成的。

Dancer 有自己的[路由处理器语法](https://metacpan.org/module/Dancer::Tutorial#Our-first-route-handler)。

Web::Simple 使用[子程序原型](http://search.cpan.org/dist/Web-Simple/lib/Web/Simple.pm#Web::Simple_match_specifications)。

Django 使用[一个包含模式列表的单独文件](https://docs.djangoproject.com/en/dev/topics/http/urls/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:04:40.350

如果您使用的是 Apache，您可以使用 .htaccess 文件来删除 .html 扩展名，如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

要从 url 中删除 .html 扩展名，只需链接到没有 .html 的页面

```
<a href="http://www.mysite.com/page">linkhere</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:07:52.077

如果您使用的是 Apache HTTP Server，您应该检查[mod_rewrite](https://www.google.com/search?q=modrewrite&oq=modrewrite&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8#hl=en&safe=off&tbo=d&sclient=psy-ab&q=mod%20rewrite%20user%20friendly%20urls&oq=mod_rewrite%20user%20friendl&gs_l=serp.3.0.0i30l2.7976.11287.0.12234.15.14.1.0.0.0.106.1364.10j4.14.0.les;..0.0...1c.1.a2m6-zyyaC4&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1357316858,d.ZG4&fp=2246e513cc5097bd&biw=1280&bih=920)功能。IIS 也有类似的 URL 重写功能。

# c# - 如果注册了 DispatcherUnhandledException，则在 Control.LayoutUpdated 中发生异常后堆栈溢出

> ID：14211306
> 
> 赞同：5
> 
> 时间：2013-01-08T08:54:43.353
> 
> 标签：c#, wpf

最近，我遇到了一个问题，我仍然很头疼。在一个应用程序中，我注册了一个调度程序异常处理程序。在同一个应用程序中，第三方组件 ( `DevExpress Grid Control`) 在`Control.LayoutUpdated`. 我希望调度程序异常处理程序被触发一次。但相反，我得到了堆栈溢出。我制作了一个没有第三方组件的示例，并发现它发生在每个 WPF 应用程序中。

```
 using System;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Threading;

    namespace MyApplication
    {
        /* App.xaml

            <Application 
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                x:Class="MyApplication.App"
                Startup="OnStartup" 
            />

        */
        public partial class App
        {
            private void OnStartup(object sender, StartupEventArgs e)
            {
                DispatcherUnhandledException += OnDispatcherUnhandledException;
                MainWindow = new MainWindow();
                MainWindow.Show();
            }
            private static void OnDispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
            {
                MessageBox.Show(e.Exception.Message);
                e.Handled = true;
            }
        }

        public class MainWindow : Window
        {
            private readonly Control mControl;

            public MainWindow()
            {
                var grid = new Grid();
                var button = new Button();

                button.Content = "Crash!";
                button.HorizontalAlignment = HorizontalAlignment.Center;
                button.VerticalAlignment = VerticalAlignment.Center;
                button.Click += OnButtonClick;

                mControl = new Control();

                grid.Children.Add(mControl);
                grid.Children.Add(button);

                Content = grid;
            }

            private void OnButtonClick(object sender, RoutedEventArgs e)
            {
                mControl.LayoutUpdated += ThrowException;
                mControl.UpdateLayout();
                mControl.LayoutUpdated -= ThrowException;
            }

            private void ThrowException(object sender, EventArgs e)
            {
                throw new NotSupportedException();
            }
        }
    } 
```

有什么办法可以防止这种行为？它发生在 .NET 框架 3.0、3.5、4.0 和 4.5 上。我不能只包装事件处理程序`try-catch`，`LayoutUpdated`因为它位于第三方组件中，而且我认为不应该发生堆栈溢出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:00:43.403

我认为[Florian GI](https://stackoverflow.com/users/1658676/florian-gl)对消息框的看法是正确的，但是如果您在该方法中执行了其他操作（或什么都不做，即只是设置`Handled`为`true`）而不是消息框，`OnDispatcherUnhandledException`它仍然会永远循环并且不会到达该`mControl.LayoutUpdated -= ThrowException;`行。

所以我想我会用 dotPeek 稍微窥探一下代码......

当您调用`UpdateLayout`控件时，最终它会到达方法`ContextLayoutManager.UpdateLayout`，并且该方法的片段如下所示：

```
// ... some code I snipped
bool flag2 = true;
UIElement element = (UIElement) null;
try
{
    this.invalidateTreeIfRecovering();
    while (this.hasDirtiness || this._firePostLayoutEvents)
    {

        //... Loads of code that I think will make sure 
        // hasDirtiness is false (since there is no reason 
        // for anything remaining dirty - also the event is
        // raised so I think this is a safe assumption

        if (!this.hasDirtiness)
        {
          this.fireLayoutUpdateEvent();
          if (!this.hasDirtiness)
          {
            this.fireAutomationEvents();
            if (!this.hasDirtiness)
              this.fireSizeChangedEvents();
          }
        }
        //... a bit more
        flag2 = false;
    }
}
finally
{
    this._isUpdating = false;
    this._layoutRequestPosted = false;
    //... some more code
    if (flag2)
    {
       //... some code that I can't be bothered to grok
      this.Dispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, (Delegate) ContextLayoutManager._updateLayoutBackground, (object) this);
    }
}

// ... and for good measure a smidge more code 
```

我要赌一把，并建议 _`firePostLayoutEvents`标志在你的情况下是真的。

唯一`_firePostLayoutEvents`设置为 false 的地方是在`fireAutomationEvents`方法中，所以让我们假设在`fireAutomationEvents`方法结束之前的某个地方抛出了异常（我猜是`fireLayoutUpdateEvent`方法），所以这个标志不会被设置为 false。

但是，当然，finally 在循环之外，所以它不会永远循环（如果是这样，你就不会得到 StackOverflowException）。

对，继续，所以我们正在调用`UpdateLayoutBackground`函数，它实际上只是调用`NeedsRecalc`所以让我们看一下......

```
private void NeedsRecalc()
{
  if (this._layoutRequestPosted || this._isUpdating)
    return;
  MediaContext.From(this.Dispatcher).BeginInvokeOnRender(ContextLayoutManager._updateCallback, (object) this);
  this._layoutRequestPosted = true;
} 
```

Rightyho，那是调用 UpdateLayoutCallback，所以眯着眼睛看...

```
private static object UpdateLayoutCallback(object arg)
{
  ContextLayoutManager contextLayoutManager = arg as ContextLayoutManager;
  if (contextLayoutManager != null)
    contextLayoutManager.UpdateLayout();
  return (object) null;
} 
```

哦哦，这很有趣——它又来电`UpdateLayout`了——因此，我会冒一个稍微有根据的猜测，那就是你的问题的根本原因。

因此，我认为您对此无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:28:59.310

我不太确定以下内容，但也许这是对正确方向的猜测。

在 MSDN 中它说：

> 但是，LayoutUpdated 也可能在对象生命周期的运行时发生，原因有很多：属性更改、窗口大小调整或显式请求（UpdateLayout 或 ApplyTemplate）。

所以在 MessageBox 显示后它也可能被触发？

如果是这种情况，MessageBox 将通过未处理的异常打开，这会触发 LayoutUpdated-EventHandler，这会再次引发未处理的异常。这将导致无限循环，并在一段时间后导致堆栈溢出。

如果您没有在 LayoutUpdated-EventHandler 中抛出未处理的异常，而是调用 MessageBox.Show() 方法，它也会以无限循环结束，这可以证明我的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T20:01:38.023

我意识到我迟到了四年多，但也许有人会觉得这很有用......

在调用`MessageBox.Show()`. 只要有任何与布局相关的工作要做，就会触发该`LayoutUpdated`事件，这比您预期的要频繁得多。在显示消息框时它将继续触发，如果任何触发错误的条件继续存在，则会引发新的异常，并且您的处理程序将显示越来越多的消息框。并且因为`MessageBox.Show()`是阻塞调用，所以它不会从调用堆栈中消失，直到它返回。处理程序的后续调用将被越来越深地推入调度程序的调用堆栈，直到它溢出。

你真的有两个不同的问题：

1.  您显示崩溃对话框的代码是可重入的。

2.  在显示崩溃对话框时，您的应用程序会继续在调度程序线程上引发异常。

您可以使用不可重入队列解决第一个问题。不要立即显示崩溃对话框，而是让您的处理程序将异常放入队列中。**仅当**您尚未在堆栈的更远处处理队列时，才让您的处理程序处理队列。这可以防止同时显示多个崩溃对话框，并且应该防止调用堆栈增长太深，从而避免堆栈溢出问题。

要解决第二个问题，您可能应该在看到第一个异常后（并且在显示崩溃对话框之前）立即关闭应用程序的违规部分。或者，您可以设计一种方法来过滤掉重复的异常并确保相同的错误不会同时出现在队列中。但考虑到异常发生的速度有多快，我会选择第一个选项。

请记住，您需要解决**这两个问题**。如果您不解决第二个问题，您最终可能会`StackOverflowException`以`OutOfMemoryException`. 或者，您将一个接一个地显示无数个崩溃对话框。不管怎样，都会很糟糕。

# xml - 如何在 Excel 2011 for Mac 中解析 XML？

> ID：14211308
> 
> 赞同：2
> 
> 时间：2013-01-08T08:54:46.053
> 
> 标签：xml, excel, vba, macos, parsing

我有一些 VBA 代码用于从**Excel (2007, 2010)**访问各种基于 XML 的 Web API ，并且刚刚遇到了一个在 Mac 上运行**Excel 2011**的用户。我开发的代码依赖于对 MS XML 6.0 的引用，这在 Mac 上显然不可用。

这[似乎是](http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macexcel/in-excel-2011-what-vba-references-replace-the/ac8b4604-4d74-4e78-989e-ec6c301a5f08?msgId=deffe985-93df-4560-b796-9569aea70931)其他人遇到但没有解决的问题。

1.  有谁知道 Mac 上 MS XML 6.0 的替代品或解决方法？
2.  用户是否可以只下载并安装相关的 .dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:42:51.933

我看到你的第一个问题已经回答了。对于您的第二个问题：不，Mac 用户不能只安装适当的 .dll。DLL 是一个动态链接库，它为 Windows 应用程序提供特定的功能。OS X 和 Excel:Mac 都不能处理 DLL 文件，就像 OS X 不能处理 Windows 可执行的 .exe 文件一样。如果重写代码以使其跨平台工作不可行，您可以要求您的 Mac 用户通过虚拟化应用程序或通过双引导进入 Windows 来运行 Excel 2010。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:23:03.193

一种跨平台解决方案是使用*[像这样](http://numbers.brighterplanet.com/2011/01/06/using-web-services-from-excel/)*的 QueryTable ，这肯定比为 mac 滚动您自己的 xml 处理程序更好。

# xcode - 如何使用 pkgbuild 在 Xcode 中创建 kext 安装程序

> ID：14211312
> 
> 赞同：2
> 
> 时间：2013-01-08T08:55:11.883
> 
> 标签：xcode, kernel-extension, pkgbuild

我了解 PackageMaker 现在已弃用。我们现在应该使用 pkgbuild/productbuild。

但是，我似乎找不到为 kext 创建安装程序的示例。我希望将包构建为我的 kext Xcode 项目构建步骤的一部分。所以任何 bash/脚本文件都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-23T07:33:19.720

[对于一般情况，这个答案](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re)是一个非常好的指南。

具体来说，对于一个 kext，在 Product -> Archive 步骤之后，要生成组件 plist，我发现我需要“cd”到构建的存档包目录中：

```
cd ~/Library/Developer/Xcode/Archives/2013-12-22/my-kext\ 22-12-2013\ 22.57.xcarchive 
```

然后，`pkgbuild --analyze`步骤如下所示：

```
pkgbuild --analyze --root ./Products/ my-kext.plist 
```

`RootRelativeBundlePath`生成的 plist 应该在密钥下包含一个看起来合理的 kext 安装目标。（通常`/System/Library/Extensions/my.kext`，或者如果代码签名并且对于 10.9+ 应该是`/Library/Extensions/my.kext`）如果没有，请在 Xcode 中修复您的 kext 目标的安装位置。

安装 kexts 时要注意的主要事项是正确获取权限并刷新 kext 缓存。pkgbuild 似乎默认将 kext 安装为 root，所以这很好。要强制刷新 kext 缓存，您需要更新修改的时间`/System/Library/Extensions`（或者`/Library/Extensions`如果这是您要安装的位置）。您想在完全安装 kext**后**执行此操作，因此您需要一个安装后脚本。为其创建一个目录，例如 ./scripts 并创建一个名为“postinstall”的文件，其内容为：

```
#!/bin/sh
touch /System/Library/Extensions 
```

然后使其可执行：

```
chmod +x postinstall 
```

您现在可以使用以下命令为您的 kext 构建通用包：

```
pkgbuild --root ./Products/ --scripts ./scripts/ --component-plist my-kext.plist my-kext.pkg 
```

对于定制、协同设计等，请按照 catlan 链接答案中的说明进行操作 - 你无法击败他们！

# vb.net - VB.NET HttpRequest 异常标头部分

> ID：14211313
> 
> 赞同：0
> 
> 时间：2013-01-08T08:55:15.253
> 
> 标签：vb.net, exception, file-upload, httprequest

我正在尝试使用以下代码上传文件，但是当我上传文件时会引发异常： Header section has more than 10240 bytes (也许它没有正确终止)

我尝试这样做但不起作用：[WebRequest POST with the file and parameters](https://stackoverflow.com/questions/1874410/webrequest-post-with-both-file-and-parameters)

```
Dim boundary As String = "---------------------------" & DateTime.Now.Ticks.ToString("x")
Dim newLine As String = System.Environment.NewLine
Dim boundaryBytes As Byte() = Encoding.ASCII.GetBytes(newLine & "--" & boundary & newLine)
Dim request As Net.HttpWebRequest = Net.WebRequest.Create(uri)

request.ContentType = "multipart/form-data; boundary=" & boundary
request.Method = "POST"
request.KeepAlive = True

Using requestStream As IO.Stream = request.GetRequestStream()
    Dim formDataTemplate As String = "Content-Disposition: form-data; name=""{0}""{1}{1}{2}"

    For Each key As String In otherParameters.Keys

        requestStream.Write(boundaryBytes, 0, boundaryBytes.Length)

        Dim formItem As String
        Dim formItemBytes As Byte()

        If key = "file" Then
           formItemBytes = StreamFile(otherParameters(key))
        Else
            formItem = String.Format(formDataTemplate, key, newLine, otherParameters(key))
            formItemBytes = Encoding.UTF8.GetBytes(formItem)
        End If

        requestStream.Write(formItemBytes, 0, formItemBytes.Length)

    Next key

    requestStream.Write(boundaryBytes, 0, boundaryBytes.Length)

    Dim headerTemplate As String = "Content-Disposition: form-data; name=""{0}""; filename=""{1}""{2}Content-Type: {3}{2}{2}"
    Dim header As String = String.Format(headerTemplate, fileParameterName, filePath, newLine, contentType)
    Dim headerBytes As Byte() = Encoding.UTF8.GetBytes(header)
    requestStream.Write(headerBytes, 0, headerBytes.Length)

    Using fileStream As New IO.FileStream(filePath, IO.FileMode.Open, IO.FileAccess.Read)

        Dim buffer(4096) As Byte
        Dim bytesRead As Int32 = fileStream.Read(buffer, 0, buffer.Length)

        Do While (bytesRead > 0)

            requestStream.Write(buffer, 0, bytesRead)
            bytesRead = fileStream.Read(buffer, 0, buffer.Length)

        Loop

    End Using

    Dim trailer As Byte() = Encoding.ASCII.GetBytes(newLine & "--" + boundary + "--" & newLine)
    requestStream.Write(trailer, 0, trailer.Length)

End Using

Dim response As Net.WebResponse = request.GetResponse() 
```

**编辑：**

我尝试了两种选择但不起作用：

```
Dim headerTemplate As String = "Content-Disposition: form-data; name=""{0}""; filename=""{1}""{2} Content-Type: {3}{2}{2}" 

Dim headerTemplate As String = "Content-Disposition: form-data; name=""{0}""; filename=""{1}""{2}" & newLine & "Content-Type: {3}{2}{2}" 
```

# c# - 使用 StringBuilder 显示 HTML 代码而不是纯文本

> ID：14211319
> 
> 赞同：0
> 
> 时间：2013-01-08T08:55:36.343
> 
> 标签：c#, html, winforms, stringbuilder

问题：如何使用使用 html 代码格式化的字符串生成器创建表？
使用 appendformat 发送电子邮件有效。但是当仅以窗口形式显示时，它
只会以明文形式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:01:50.740

这个问题不是很清楚，但我会尝试：

如果要在 Windows 窗体中显示格式化的 HTML，则必须使用 WebBrowser 控件。如果您想编辑邮件（或回复/转发），您需要使用 RichText 控件并将 HTML 转换为 RTF，将其放入您的富文本编辑器中，并在完成后从 RTF 转换为 HTML。

```
var webBrowser = new WebBrowser();
webBrowser.CreateControl(); 
webBrowser.DocumentText = <HTMLSTRING>;
while(_webBrowser.DocumentText != <HTMLSTRING>
{    
    Application.DoEvents();
} 
webBrowser.Document.ExecCommand("SelectAll", false, null);
webBrowser.Document.ExecCommand("Copy", false, null);
<RichTextControl>.Paste(); 
```

从 RTF 转换为 HTML 似乎有点棘手，但不是太多：http: [//blogs.msdn.com/b/jmstall/archive/2006/10/20/rtf_5f00_html.aspx](http://blogs.msdn.com/b/jmstall/archive/2006/10/20/rtf_5f00_html.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:06:23.500

```
using System;
using System.Net;

class Program
{
    static void Main()
    {
    string a = WebUtility.HtmlEncode("<html><head><title>T</title></head></html>");
    string b = WebUtility.HtmlDecode(a);

    Console.WriteLine("After HtmlEncode: " + a);
    Console.WriteLine("After HtmlDecode: " + b);
    }
} 
```

# ffmpeg - 带有 -ss 选项的 FFmpeg 命令在 .flv 文件上失败

> ID：14211325
> 
> 赞同：7
> 
> 时间：2013-01-08T08:56:01.203
> 
> 标签：ffmpeg

我正在使用 FFmpeg 使用以下命令从视频中提取屏幕截图

```
/usr/bin/ffmpeg -ss 15 -y -i test.flv -vcodec mjpeg -vframes 1 -an -f rawvideo test.png 
```

但命令失败。响应的最后 3 行是

```
frame=    0 fps=  0 q=0.0 Lsize=       0kB time=00:00:00.00 bitrate=   0.0kbits/s
video:0kB audio:0kB global headers:0kB muxing overhead -nan%
Output file is empty, nothing was encoded (check -ss / -t / -frames parameters if used) 
```

请注意，该命令对其他视频类型（3gp、mp4）成功运行。

此外，当我将“-ss 15”选项替换为“itsoffset 15”时，它也可以使用 flv 文件成功运行。

有人知道为什么 -ss 选项不适用于 .flv 文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-01T00:11:40.687

在较新版本的 ffmpeg 中，`-ss`and`-t`选项必须在`-i [filename]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:39:06.030

这可能是语法问题。以下应该可以正常工作：

`/usr/bin/ffmpeg -ss 15 -y -i test.flv -frames:v 1 -an test.png`

请注意，我删除了编解码器和格式参数。我认为在 png continuer 上强制 mjpeg 是不明智的，flv 不是 rawvideo 格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T13:31:36.340

你需要设置视频格式选项`(EX: -preset ultrafast -s 1366x768 -r 10 -b:v 555k -crf 45 -vcodec libx264 -threads 0 -pix_fmt yuv420p)`

我在从视频中剪切部分时遇到了同样的问题，`-c:v copy`只是给出了提到的警告并且没有任何反应。

# sql-server - 如何在单引号内创建临时表

> ID：14211328
> 
> 赞同：0
> 
> 时间：2013-01-08T08:56:09.403
> 
> 标签：sql-server, sql-server-2008, temp-tables

我尝试在单引号内创建一个临时表，它显示错误，它无法识别表`#newtable`......它只支持`##table`（全局临时表）但我不想要一个全局临时表，我只想知道背后的原因是什么解释请。

```
 select 
     column1, column2, column3, ##newtable.columnid as ShipProfile,
     row_number() over (order by Id) as ''RowNumber'' 
 into 
     ##TempProduct 
 from 
     Product 
 left join 
     ##newtable on Product.columnId = ##newtable.ColumnId 
 where 
     MerchantId= ' + convert(varchar(20), @MerchantID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:01:27.367

To quote from the famous [The Curse and Blessings of Dynamic SQL](http://www.sommarskog.se/dynamic_sql.html):

> Next thing to observe is that the dynamic SQL is not part of the stored procedure, but constitutes its own scope. Invoking a block of dynamic SQL is akin to call a nameless stored procedure created ad-hoc. This has a number of consequences:
> 
> ...
> 
> *   Temp tables created in the dynamic SQL will not be accessible from the calling procedure since they are dropped when the dynamic SQL exits. (Compare to how temp tables created in a stored procedure go away when you exit the procedure.) The block of dynamic SQL can however access temp tables created by the calling procedure.

So you can either define the temp table (`create table #outertemp (col1 INT Primary KEY ...)`) in the stored procedure where you execute the string (*not* in the string itself!) or you can use global temp tables inside your dynamic SQL.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-09T14:22:33.777

您可以`create table #outertemp (col1 INT Primary KEY ...))`在执行字符串的存储过程中定义临时表（而不是在字符串本身中！），也可以在动态 SQL 中使用全局临时表。

# youtube-api - 使用 v2 的 YouTube API 获得对我的任何视频的最新评论的最简单方法是什么？

> ID：14211336
> 
> 赞同：0
> 
> 时间：2013-01-08T08:56:52.447
> 
> 标签：youtube-api

[正如问题如何在 YouTube API 版本 3 中获取评论中](https://stackoverflow.com/questions/13489329/how-do-i-fetch-comments-in-version-3-of-the-youtube-api)指出的那样？，目前无法使用 YouTube API 版本 3 获取视频评论。现在我正在尝试使用版本 2 来解决这个问题。

我想要的是对我上传的任何视频的最新评论，换句话说，就是我所有视频的“聚合”评论源中的最新评论。

似乎唯一的方法就是获取所有视频，然后为每个视频打电话以获取评论。对于数百个上传的视频，这在 API 调用数量和完成总时间方面变得非常昂贵。

有没有更简单和/或更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:30:11.990

当视频收到新评论时，无法通过 API 获得“通知”，因此您将不得不进行一些投票。给定视频 id 的评论提要，例如[https://gdata.youtube.com/feeds/api/videos/fhWaJi1Hsfo/comments?v=2](https://gdata.youtube.com/feeds/api/videos/fhWaJi1Hsfo/comments?v=2) for video id `fhWaJi1Hsfo`，默认情况下按时间倒序排序，所以最后一个添加的评论应始终位于条目列表的首位。

请求数百个视频的评论提要，即使您每天这样做几次，听起来也不会产生不合理的流量。不过，如果您确实遇到任何配额问题，您应该遵循[这篇博文中概述的最佳实践。](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)

# c++ - 编译 Allegro 5.0.8 - 静态链接 (Code::Blocks 12.11, MinGW 4.7.1, Windows 7)

> ID：14211337
> 
> 赞同：2
> 
> 时间：2013-01-08T08:57:01.170
> 
> 标签：c++, mingw, codeblocks, allegro, allegro5

在 Windows 7 上安装 Code::Blocks 12.11（分配有 MinGW 4.7.1）后，我尝试编译简单的 Allegro 5 示例。关于它的唯一（官方？）教程（有点旧）：
[http ://wiki.allegro.cc/index.php?title=Allegro_5_Tutorial](http://wiki.allegro.cc/index.php?title=Allegro_5_Tutorial)
[http://wiki.allegro.cc/index.php?title=Windows_Vista， _Code::Blocks_10.05_and_Allegro_5](http://wiki.allegro.cc/index.php?title=Windows_Vista,_Code::Blocks_10.05_and_Allegro_5)

# 问题一：

我找到了 allegro-5.0.8-mingw-4.5.0.7z。MinGW 4.7.1 有版本吗？

# 问题2：

错误：
mingw32-g++.exe：错误：无法识别的命令行选项“-static-libstdc++”

# 问题 3：

如果我删除链接选项 -static-libstdc++，则会出现另一个错误：
c:/program files (x86)/codeblocks/mingw/bin/../lib/gcc/mingw32/4.7.1/../../.. /../mingw32/bin/ld.exe：找不到-lgcc_eh

# 问题4：

liballegro-5.0.8-monolith-static-mt.aa 是所有 allegro .a 文件的单一替代品吗？它是否也包含 extern mingw .a 依赖项？找到所有这 30 个 .a 文件并配置正确顺序的“游戏玩法”是可怕的。它提醒反模式[http://en.wikipedia.org/wiki/Sequential_coupling](http://en.wikipedia.org/wiki/Sequential_coupling) :)

感谢您的回答。

# asp.net - 无法解决“索引超出数组范围”

> ID：14211338
> 
> 赞同：0
> 
> 时间：2013-01-08T08:57:10.783
> 
> 标签：asp.net, arrays, visual-studio-2010, c#-4.0

我正在使用 ASP.NET 使用 C#。我对这个错误很熟悉，但这次我无法解决它。我在这样的下拉列表中有文本：

> राम कुमार सिंह 8s2w8r

```
here राम कुमार सिंह is the name in HINDI while 8s2w8r is users' ID. 
```

我需要将这两个值分开并需要将它们作为会话变量传递。我正在使用的逻辑在代码中进行了描述。

```
 public string reverse(string s)
        {
            char []temp=s.ToCharArray();
            Array.Reverse(temp);
            return (temp.ToString());
        }

        string dropdowntextreversed=reverse(DropDownList1.Text);
        char []delim=new char[]{' '};
        string []parts=dropdowntextreversed.Split(delim,2);
        string family_head_uid = reverse(parts[0]);
        string family_head = reverse(parts[1]);
        Session.Add("family_head", family_head);
        Session.Add("family_head_uid", family_head_uid);
        Response.Redirect("/WebForm1.aspx"); 
```

我总是得到一个错误，因为索引超出了数组的范围！我不明白这一点，因为我将字符串分成两部分，所以它应该有部分 [0] 和部分 [1]。请建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:01:16.383

您将字符串分成**MAXIMUM** 2 个部分，但如果只有一个部分，您可能会得到一个部分。

阅读本[文档](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)

尝试断言`parts.Length is == 2`或仅在有两个元素时访问元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:20:31.990

试试这个[链接](https://stackoverflow.com/questions/2245581/array-tostring)。因为我认为`temp.ToString()`which 将返回`System.Char[]`而不是您正在寻找的值存在问题。改用[string.join](http://www.dotnetperls.com/string-join)会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:25:36.280

使用以下反向方法：

```
public string reverse(string s)
{
    return String.Join(String.Empty, s.ToCharArray().Reverse());
} 
```

# .net - 处理强行终止（中止）的进程

> ID：14211339
> 
> 赞同：1
> 
> 时间：2013-01-08T08:57:17.200
> 
> 标签：.net, process

假设我有一个基于外部条件执行某些活动的进程，它可以随着时间的推移而修改，例如基于存储在数据库中的数据。如果这样的进程随后被强制终止并重新启动，数据将不一致 - 例如，有关服务状态的信息将不充分或部分同步的数据分支将是多余的。

如何处理这种情况？我应该在进程启动时检查一些有线不一致并在主逻辑开始之前对数据进行规范化，还是我可以检测到中止信号然后进行清理？我不担心进程获得的资源，但它已经能够执行未完成的更改（尽管在进程新启动时可以大量检测到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:04:18.490

此类问题一般通过以下方式解决：

1.  将您的流程拆分为几个小动作
2.  确保每个动作都是[幂等](http://en.wikipedia.org/wiki/Idempotence)的，这意味着它可以多次执行而不改变第一次执行的结果
3.  一个动作成功完成后，提升整个过程的状态。

像这样，您始终可以从最后一次成功执行的操作之后的操作开始重新启动该过程，然后从那里继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:11:57.110

您没有提及您的进程做什么或它维护的那种状态，例如您是否正在写入数据文件，在数据库中插入/更新/删除行？

如果您正在谈论的可能不一致的数据存储在数据库中，则处理此问题的通常方法是确保您的所有数据更改都在代表原子工作单元的事务中处理。

这样，如果进程在处理事务的过程中被终止，数据库将检测到这一点并自动撤消到该点所做的更改，将您的状态恢复到之前的（一致的）时间点。

因此，使用事务应该确保数据库状态始终保持一致，并且应该需要最少的一致性检查。

# python - 使用 python/PIL 自动裁剪图像

> ID：14211340
> 
> 赞同：33
> 
> 时间：2013-01-08T08:57:17.213
> 
> 标签：python, image, image-processing, python-imaging-library, crop

谁能帮我弄清楚我的图像自动裁剪脚本中发生了什么？我有一个具有大透明区域/空间的 png 图像。我希望能够自动裁剪该空间并留下必需品。原始图像有一个正方形的画布，最好是矩形的，只封装分子。

这是原始图像： ![原始图像](../Images/b1cfc96e60e22d67706a22c50f7e6c11.png)

做一些谷歌搜索，我发现了 PIL/python 代码，据报道它可以工作，但是在我手中，运行下面的代码会过度裁剪图像。

```
import Image
import sys

image=Image.open('L_2d.png')
image.load()

imageSize = image.size
imageBox = image.getbbox()

imageComponents = image.split()

rgbImage = Image.new("RGB", imageSize, (0,0,0))
rgbImage.paste(image, mask=imageComponents[3])
croppedBox = rgbImage.getbbox()
print imageBox
print croppedBox
if imageBox != croppedBox:
    cropped=image.crop(croppedBox)
    print 'L_2d.png:', "Size:", imageSize, "New Size:",croppedBox
    cropped.save('L_2d_cropped.png') 
```

输出是这样的：![脚本的输出](../Images/200ee8d5b606b99e9214653b0841f054.png)

任何更熟悉图像处理/PLI 的人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-08T09:30:26.617

安装[枕头](https://pypi.org/project/Pillow/)

```
pip install Pillow 
```

并用作

```
from PIL import Image

image=Image.open('L_2d.png')

imageBox = image.getbbox()
cropped = image.crop(imageBox)
cropped.save('L_2d_cropped.png') 
```

当您按 搜索边界时`mask=imageComponents[3]`，您仅按蓝色通道搜索。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-08T09:21:59.043

您可以使用 numpy，将图像转换为数组，查找所有非空列和行，然后从这些创建图像：

```
import Image
import numpy as np

image=Image.open('L_2d.png')
image.load()

image_data = np.asarray(image)
image_data_bw = image_data.max(axis=2)
non_empty_columns = np.where(image_data_bw.max(axis=0)>0)[0]
non_empty_rows = np.where(image_data_bw.max(axis=1)>0)[0]
cropBox = (min(non_empty_rows), max(non_empty_rows), min(non_empty_columns), max(non_empty_columns))

image_data_new = image_data[cropBox[0]:cropBox[1]+1, cropBox[2]:cropBox[3]+1 , :]

new_image = Image.fromarray(image_data_new)
new_image.save('L_2d_cropped.png') 
```

结果看起来像 [![裁剪图像](../Images/825d69642b1148761207fc667007711e.png)](https://i.stack.imgur.com/bwkWt.png)

如果有任何不清楚的地方，请询问。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-02-04T07:57:57.217

我测试了这篇文章中回答的大部分答案，但是，我最终得到了自己的答案。我使用了蟒蛇python3。

```
from PIL import Image, ImageChops

def trim(im):
    bg = Image.new(im.mode, im.size, im.getpixel((0,0)))
    diff = ImageChops.difference(im, bg)
    diff = ImageChops.add(diff, diff, 2.0, -100)
    #Bounding box given as a 4-tuple defining the left, upper, right, and lower pixel coordinates.
    #If the image is completely empty, this method returns None.
    bbox = diff.getbbox()
    if bbox:
        return im.crop(bbox)

if __name__ == "__main__":
    bg = Image.open("test.jpg") # The image to be cropped
    new_im = trim(bg)
    new_im.show() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-23T11:00:41.333

这是另一个使用[pyvips](https://pypi.python.org/pypi/pyvips)的版本。

```
import sys
import pyvips

image = pyvips.Image.new_from_file(sys.argv[1])
left, top, width, height = image.find_trim(threshold=2, background=[255, 255, 255])
image = image.crop(left, top, width, height)
image.write_to_file(sys.argv[2]) 
```

pyvips 修剪器对摄影图像很有用。它执行中值过滤，减去背景，找到超过阈值的像素，并删除该集合之外的第一行和最后一行和列。中值和阈值意味着它不会被 JPEG 压缩之类的东西所抛弃，因为噪声或不可见的压缩伪影会混淆其他修剪器。

如果您不提供`background`参数，它将使用 (0, 0) 处的像素。`threshold`默认为 10，这对于 JPEG 来说是正确的。

它在[8k x 8k 像素的 NASA 地球图像](https://eoimages.gsfc.nasa.gov/images/imagerecords/79000/79790/city_lights_asia_night_8k.jpg)上运行：

```
$ time ./trim.py /data/john/pics/city_lights_asia_night_8k.jpg x.jpg
real    0m1.868s
user    0m13.204s
sys     0m0.280s
peak memory: 100mb 
```

前：

[![地球在收获前的晚上](../Images/e5566ea92bd9f129c56e1d8655b9cf10.png)](https://i.stack.imgur.com/4bMKz.jpg)

后：

[![收割后的地球](../Images/3d11c0801eabd9e6372303e4c7d6c2a3.png)](https://i.stack.imgur.com/oalTI.jpg)

这里有[一篇博文，里面有更多的讨论](http://libvips.blogspot.co.uk/2014/02/trim-auto-crop-with-ruby-vips.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-08T21:08:58.037

最近看到这篇文章，注意到 PIL 库发生了变化。我用openCV重新实现了这个：

```
import cv2

def crop_im(im, padding=0.1):
    """
    Takes cv2 image, im, and padding % as a float, padding,
    and returns cropped image.
    """
    bw = cv2.cvtColor(im, cv2.COLOR_BGR2GRAY)
    rows, cols = bw.shape
    non_empty_columns = np.where(bw.min(axis=0)<255)[0]
    non_empty_rows = np.where(bw.min(axis=1)<255)[0]
    cropBox = (int(min(non_empty_rows) * (1 - padding)),
                int(min(max(non_empty_rows) * (1 + padding), rows)),
                int(min(non_empty_columns) * (1 - padding)),
                int(min(max(non_empty_columns) * (1 + padding), cols)))
    cropped = im[cropBox[0]:cropBox[1]+1, cropBox[2]:cropBox[3]+1 , :]

    return cropped

im = cv2.imread('testimage.png')
cropped = crop_im(im)
cv2.imshow('', cropped)
cv2.waitKey(0) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-06T08:16:30.497

这是对 snew 回复的改进，它适用于透明背景。`mathematical morphology`我们可以让它在白色背景（而不是透明）上工作，使用以下代码：

```
from PIL import Image
from skimage.io import imread
from skimage.morphology import convex_hull_image
im = imread('L_2d.jpg')
plt.imshow(im)
plt.title('input image')
plt.show()
# create a binary image
im1 = 1 - rgb2gray(im)
threshold = 0.5
im1[im1 <= threshold] = 0
im1[im1 > threshold] = 1
chull = convex_hull_image(im1)
plt.imshow(chull)
plt.title('convex hull in the binary image')
plt.show()
imageBox = Image.fromarray((chull*255).astype(np.uint8)).getbbox()
cropped = Image.fromarray(im).crop(imageBox)
cropped.save('L_2d_cropped.jpg')
plt.imshow(cropped)
plt.show() 
```

[![在此处输入图像描述](../Images/2bf5f9f2d2e04c524c8d30ec91658bac.png)](https://i.stack.imgur.com/zxtm5.png) [![在此处输入图像描述](../Images/0031b0ab2763e7213f0f791808e662c2.png)](https://i.stack.imgur.com/2EWS5.png) [![在此处输入图像描述](../Images/ff7608b617bff6286da3d083f5fa1974.png)](https://i.stack.imgur.com/aXFxP.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-10T19:19:05.180

`pilkit`已经包含用于自动裁剪的处理器`TrimBorderColor`。像这样的东西应该工作：

```
from pilkit.lib import Image
from pilkit.processors import TrimBorderColor

img = Image.open('/path/to/my/image.png')
processor = TrimBorderColor()
new_img = processor.process(img) 
```

[https://github.com/matthewwithanm/pilkit/blob/b24990167aacbaab3db6d8ec9a02f9ad42856898/pilkit/processors/crop.py#L33](https://github.com/matthewwithanm/pilkit/blob/b24990167aacbaab3db6d8ec9a02f9ad42856898/pilkit/processors/crop.py#L33)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-29T20:30:10.660

我知道这篇文章很旧，但由于某种原因，没有一个建议的答案对我有用。所以我从现有答案中破解了我自己的版本：

```
import Image
import numpy as np
import glob
import shutil
import os

grey_tolerance = 0.7 # (0,1) = crop (more,less)

f = 'test_image.png'
file,ext = os.path.splitext(f)

def get_cropped_line(non_empty_elms,tolerance,S):
    if (sum(non_empty_elms) == 0):
        cropBox = ()
    else:
        non_empty_min = non_empty_elms.argmax()
        non_empty_max = S - non_empty_elms[::-1].argmax()+1
        cropBox = (non_empty_min,non_empty_max)
    return cropBox

def get_cropped_area(image_bw,tol):
    max_val = image_bw.max()
    tolerance = max_val*tol
    non_empty_elms = (image_bw<=tolerance).astype(int)
    S = non_empty_elms.shape
    # Traverse rows
    cropBox = [get_cropped_line(non_empty_elms[k,:],tolerance,S[1]) for k in range(0,S[0])]
    cropBox = filter(None, cropBox)
    xmin = [k[0] for k in cropBox]
    xmax = [k[1] for k in cropBox]
    # Traverse cols
    cropBox = [get_cropped_line(non_empty_elms[:,k],tolerance,S[0]) for k in range(0,S[1])]
    cropBox = filter(None, cropBox)
    ymin = [k[0] for k in cropBox]
    ymax = [k[1] for k in cropBox]
    xmin = min(xmin)
    xmax = max(xmax)
    ymin = min(ymin)
    ymax = max(ymax)
    ymax = ymax-1 # Not sure why this is necessary, but it seems to be.
    cropBox = (ymin, ymax-ymin, xmin, xmax-xmin)
    return cropBox

def auto_crop(f,ext):
    image=Image.open(f)
    image.load()
    image_data = np.asarray(image)
    image_data_bw = image_data[:,:,0]+image_data[:,:,1]+image_data[:,:,2]
    cropBox = get_cropped_area(image_data_bw,grey_tolerance)
    image_data_new = image_data[cropBox[0]:cropBox[1]+1, cropBox[2]:cropBox[3]+1 , :]
    new_image = Image.fromarray(image_data_new)
    f_new = f.replace(ext,'')+'_cropped'+ext
    new_image.save(f_new) 
```

# xna - 在 xna 游戏中保持不同分辨率的像素纵横比

> ID：14211345
> 
> 赞同：1
> 
> 时间：2013-01-08T08:57:31.880
> 
> 标签：xna, pixel

我目前正在使用 XNA 4 开发一款老式游戏。我的图形资产基于 568x320 分辨率（16/9 比例），我想更改我的窗口分辨率（例如 1136x640）并且我的图形在不拉伸的情况下进行缩放，即他们保持像素方面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:41:51.530

哦，天哪 ！！！！我懂了 ！只需在 spriteBatch.Begin 方法中提供 SamplerState.PointClamp 即可保持酷炫的像素视觉效果 <3

```
spriteBatch.Begin(SpriteSortMode.Immediate,
                    BlendState.AlphaBlend, 
                    SamplerState.PointClamp,
                    null,
                    null,
                    null,
                    cam.getTransformation(this.GraphicsDevice)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:16:44.693

您可以使用 a`RenderTarget`来实现您的目标。听起来您不想根据每个可能的屏幕尺寸进行相应的渲染，因此，如果您的图形不依赖于鼠标等其他图形功能，那么我将使用 a`RenderTarget`并将所有像素数据绘制到该尺寸，然后再绘制将其绘制到实际屏幕上，允许屏幕拉伸它。

这种技术也可以用在其他方面。我使用它在我的游戏中绘制对象，因此我可以轻松更改旋转和位置，而无需计算对象的每个精灵。

例子：

```
void PreDraw() 
    // You need your graphics device to render to
    GraphicsDevice graphicsDevice = Settings.GlobalGraphicsDevice;
    // You need a spritebatch to begin/end a draw call
    SpriteBatch spriteBatch = Settings.GlobalSpriteBatch;
    // Tell the graphics device where to draw too
    graphicsDevice.SetRenderTarget(renderTarget);
    // Clear the buffer with transparent so the image is transparent
    graphicsDevice.Clear(Color.Transparent);

    spriteBatch.Begin();
    flameAnimation.Draw(spriteBatch);
    spriteBatch.Draw(gunTextureToDraw, new Vector2(100, 0), Color.White);

    if (!base.CurrentPowerUpLevel.Equals(PowerUpLevels.None)) {
        powerUpAnimation.Draw(spriteBatch);
    }
    // DRAWS THE IMAGE TO THE RENDERTARGET
    spriteBatch.Draw(shipSpriteSheet, new Rectangle(105,0, (int)Size.X, (int)Size.Y), shipRectangleToDraw, Color.White);

    spriteBatch.End();
    // Let the graphics device know you are done and return to drawing according to its dimensions
    graphicsDevice.SetRenderTarget(null);
    // utilize your render target
    finishedShip = renderTarget;
} 
```

请记住，在您的情况下，您将`RenderTarget`使用 568x320 的尺寸进行初始化并根据该尺寸进行绘制，而不必担心任何其他可能的尺寸。一旦你给`RenderTarget`spritebatch 绘制到屏幕上，它会为你“拉伸”图像！

编辑：

对不起，我浏览了这个问题并错过了你不想“拉伸”你的结果。这可以通过`RenderTarget`根据图形设备将最终绘制到您指定的尺寸来实现。

# sql - 如何从 SQL Server 中的字符串中删除空格字符

> ID：14211346
> 
> 赞同：35
> 
> 时间：2013-01-08T08:57:35.193
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在尝试从 SQL 中的字符串中删除空格，但`LTRIM`函数`RTRIM`似乎不起作用？

柱子：

```
[ProductAlternateKey] [nvarchar](25) COLLATE Latin1_General_CS_AS NULL 
```

询问：

```
select REPLACE(ProductAlternateKey, ' ', '@'),
       LEN(ProductAlternateKey),
       LTRIM(RTRIM(ProductAlternateKey))      AS LRTrim,
       LEN(LTRIM(RTRIM(ProductAlternateKey))) AS LRLen,
       ASCII(RIGHT(ProductAlternateKey, 1))   AS ASCIIR,
       ASCII(LEFT(ProductAlternateKey, 1))    AS ASCIIL,
       ProductAlternateKey
from DimProducts
where ProductAlternateKey  like '46783815%' 
```

结果：

```
|  COLUMN_0 | COLUMN_1 | LRTrim | LRLen | ASCIIR | ASCIIL | PRODUCTALTERNATEKEY |
---------------------------------------------------------------------------------
|  46783815 |        8 | 46783815|     8|   53   |   52   |            46783815 |
| 46783815  |        10|46783815  |   10|   10   |   52   |           46783815  | 
```

`LTRIM`如果并且`RTRIM`不起作用，它可以是其他符号吗，例如“Enter”？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-08T09:34:41.760

使用`ASCII(RIGHT(ProductAlternateKey, 1))`您可以看到第 2 行中最右边的字符是换行符或 Ascii 字符 10。

这**不能**使用标准`LTrim` `RTrim`函数删除。

但是，您可以使用`(REPLACE(ProductAlternateKey, CHAR(10), '')`

您可能还需要考虑回车和制表符。这三个（换行符、回车符和制表符）是常见的罪魁祸首，可以通过以下方式删除：

```
LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(ProductAlternateKey, CHAR(10), ''), CHAR(13), ''), CHAR(9), ''))) 
```

如果您遇到更多无法使用上述方法删除的“空白”字符，请尝试以下一项或全部操作：

```
--NULL
Replace([YourString],CHAR(0),'');
--Horizontal Tab
Replace([YourString],CHAR(9),'');
--Line Feed
Replace([YourString],CHAR(10),'');
--Vertical Tab
Replace([YourString],CHAR(11),'');
--Form Feed
Replace([YourString],CHAR(12),'');
--Carriage Return
Replace([YourString],CHAR(13),'');
--Column Break
Replace([YourString],CHAR(14),'');
--Non-breaking space
Replace([YourString],CHAR(160),''); 
```

此潜在空白字符列表可用于创建函数，例如：

```
Create Function [dbo].[CleanAndTrimString] 
(@MyString as varchar(Max))
Returns varchar(Max)
As
Begin
    --NULL
    Set @MyString = Replace(@MyString,CHAR(0),'');
    --Horizontal Tab
    Set @MyString = Replace(@MyString,CHAR(9),'');
    --Line Feed
    Set @MyString = Replace(@MyString,CHAR(10),'');
    --Vertical Tab
    Set @MyString = Replace(@MyString,CHAR(11),'');
    --Form Feed
    Set @MyString = Replace(@MyString,CHAR(12),'');
    --Carriage Return
    Set @MyString = Replace(@MyString,CHAR(13),'');
    --Column Break
    Set @MyString = Replace(@MyString,CHAR(14),'');
    --Non-breaking space
    Set @MyString = Replace(@MyString,CHAR(160),'');

    Set @MyString = LTRIM(RTRIM(@MyString));
    Return @MyString
End
Go 
```

然后您可以按如下方式使用：

```
Select 
    dbo.CleanAndTrimString(ProductAlternateKey) As ProductAlternateKey
from DimProducts 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:00:13.677

在这种情况下，前缀/后缀中的不是空格。
第一行看起来不错。对第 2 行的内容执行以下操作。

```
ASCII(RIGHT(ProductAlternateKey, 1)) 
```

和

```
ASCII(LEFT(ProductAlternateKey, 1)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T09:00:24.480

正文后可能有2个空格，请确认。你可以使用`LTRIM`和`RTRIM`功能也对吗？

```
LTRIM(RTRIM(ProductAlternateKey)) 
```

也许额外的空间不是普通空间（ASCII 32，软空间）？也许它们是“硬空间”，ASCII 160？

```
ltrim(rtrim(replace(ProductAlternateKey, char(160), char(32)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:29:48.953

看起来像隐形字符-

```
ALT+255 
```

尝试这个

```
select REPLACE(ProductAlternateKey, ' ', '@')
--type ALT+255 instead of space for the second expression in REPLACE 
from DimProducts
where ProductAlternateKey  like '46783815%' 
```

拉吉

编辑：根据 ASCII() 结果，尝试`ALT+10`- 使用数字键盘

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T09:22:08.733

这个怎么样？

```
CASE WHEN ProductAlternateKey is NOT NULL THEN
CONVERT(NVARCHAR(25), LTRIM(RTRIM(ProductAlternateKey))) 
FROM DimProducts
where ProductAlternateKey  like '46783815%' 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-09-23T15:49:22.437

**使用 SQL 列数据删除换行符**

```
Update a set  a.CityName=Rtrim(Ltrim(REPLACE(REPLACE(a.CityName,CHAR(10),' '),CHAR(13),' ')))
,a.postalZone=Rtrim(Ltrim(REPLACE(REPLACE(a.postalZone,CHAR(10),' '),CHAR(13),' ')))  
From tAddress a 
inner Join  tEmployees p  on a.AddressId =p.addressId 
Where p.MigratedID is not null and p.AddressId is not null AND
(REPLACE(REPLACE(a.postalZone,CHAR(10),'Y'),CHAR(13),'X') Like 'Y%' OR REPLACE(REPLACE(a.CityName,CHAR(10),'Y'),CHAR(13),'X') Like 'Y%') 
```

# performance - 如何更快地解码 JPEG 文件？

> ID：14211347
> 
> 赞同：4
> 
> 时间：2013-01-08T08:57:38.590
> 
> 标签：performance, delphi, delphi-xe2, jpeg

Delphi 的默认 JPEG 库非常慢。如何提高其性能？我需要更快地保存和加载 jpeg 图像。

我只测试了 Jpeg.TJPEGImage

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:27:46.623

您可以使用 libJpeg 或 libJpegTurbo。后者绝对是非常快的。

从单位：

```
{
libJPEG Header conversion by Steffen Xonna. (21-03-2008)

http://www.dev-center.de/index.php?cat=header&file=libjpeg

Below you find an copy from the original libJPEG header.

/* jpeglib.h
 *
 * Copyright (C) 1991-1998, Thomas G. Lane.
 * This file is part of the Independent JPEG Group's software.
 * For conditions of distribution and use, see the accompanying README file.
 *
 * This file defines the application interface for the JPEG library.
 * Most applications using the library need only include this file,
 * and perhaps jerror.h if they want to know the exact error codes.
 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:13:26.437

我们有一个 JPEG 解压缩器，它将每秒解压缩超过 350 兆像素（如果在代码中重新启动标记，则超过 700 兆像素）。每秒还可提取超过 3000 个缩略图。这不包括将压缩代码读入内存的时间。看看 www.instantimage.com。也非常可靠，可以解压缩许多 Microsoft windows 软件不会解压缩的 JPEG 图像。

# c - 自己的 strcmp 函数 - 非标准字符

> ID：14211349
> 
> 赞同：1
> 
> 时间：2013-01-08T08:57:49.657
> 
> 标签：c, strcmp

我目前正在编写一个小排序功能。我只能使用 stdio 库，所以我编写了我自己的 strcmp 函数。

```
int ownstrcmp(char a[], char b[])
{
   int i = 0;

   while( a[i] == b[i] )  
   {

      if( a[i] == '\0' ) 
        return 0;
      ++i;
   }

   return  ( a[i] < b[i]) ? 1 : -1;
} 
```

这对我很有用。但是有一个小问题：我可以为“非标准字符”做什么？像 "ä,ü,ß 它们的十进制 ASCII 值大于普通字符，因此它对字符串 'example' 进行排序在 'ääää' 后面。我已经阅读了有关语言环境的信息，但我唯一可以使用的库是`stdio.h`。有吗这个问题的“简单”解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:03:34.660

您需要知道字符所在的编码，并确保正确处理字符串。如果编码是多字节的，您必须开始读取（和比较）单个字符，而不是字节。

此外，在国际上比较字符的方式*因语言环境而异，*没有单一的解决方案。在某些语言中，'ä' 排序在 'z' 之后，在某些语言中它紧挨着 'a' 排序。

实现这一点的一种简单方法当然是创建一个包含每个字符的相对顺序的表，如下所示：

```
unsigned char character_order[256];

character_order[(unsigned char) 'a'] = 1;
character_order[(unsigned char) 'ä'] = character_order[(unsigned char) 'a'];
/* ... and so on ... */ 
```

然后，不是减去字符的编码值（不再可以用作字符排序顺序的“代理”），而是比较这些`character_order`值。

以上假设是单字节编码，即Latin-1 之类的，因为数组大小只有256。

`unsigned char`还要注意使用字符文字索引时的强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:08:33.933

你的问题有点含糊。首先，带有元音变音的字符如何表示取决于您的编码。例如，我的计算机的区域设置为希腊语，这意味着我用希腊字符代替了那些特殊的拉丁字符。据我所知，你不能假设这样的事情。

其次，您的问题的答案取决于您的陈述。您还在使用“`char`每个字符一个”表示吗？如果是这样，上面的代码可能仍然有效。

如果您使用多重`char`表示，例如`char`每个字符两个 s，您应该更改代码，以便在*两个连续* `char`的 s 是时退出`\0`。

通常，您可能想了解如何实现`wchar_t`及其功能系列（特别`wcscmp`是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:20:54.657

对于德语，变音符号 ä,ö,ü 和 ß 将按照它们的“扩展”形式进行排序：

```
ä -> ae
ö -> oe
ü -> ue
ß -> ss 
```

为了根据标准获得排序规则，您可以在比较之前扩展字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:14:48.070

如果您使用的是[ISO/IEC_8859-16](https://en.wikipedia.org/wiki/ISO/IEC_8859-16)编码，这是德语的正常编码，那么将您转换`char`为`unsigned char`.

这样，字符可以在 0-255 的区间内表示，适用于该标准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:56:08.110

在 UTF8 下，这可以提供帮助，遵循您的代码

```
if ((a[i] > 0) ^ (b[i] > 0))
    return a[i] > 0 ? 1 : -1;
else
    return a[i] < b[i] ? 1 : -1; 
```

但是你必须检查像这样的案例`ownstrcmp("ab", "abc");`

`strcmp()`此外，您的代码不像`<string.h>`

大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

我会这样做：

```
int ownstrcmp(char a[], char b[])
{
    int i = 0;

    while(a[i] == b[i]) {
        if (a[i] == 0) return 0;
        ++i;
    }
    if ((a[i] == 0) || (b[i] == 0))
        return a[i] != 0 ? 1 : -1;
    if ((a[i] > 0) ^ (b[i] > 0))
        return a[i] < 0 ? 1 : -1;
    else
        return a[i] > b[i] ? 1 : -1;
} 
```

# c++ - 通过包含访问函数与声明静态

> ID：14211354
> 
> 赞同：2
> 
> 时间：2013-01-08T08:58:08.203
> 
> 标签：c++, oop, static, include

我有一个要包含在另一个 cpp 文件中的头文件。我想知道如果我这样写头文件有什么区别，

```
#include <iostream>
#include <string>
using namespace std;

string ret()
{
return "called";
} 
```

====================================

```
#include <iostream>
#include <string>
using namespace std;

static string ret()
{
return "called";
} 
```

`ret()`无论如何我都可以访问该功能！那么，静电有什么用呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:06:46.107

这是你展示的一个非常邪恶的头文件。

1.  **永远不要**放入`using namespace std;`头文件。这会强制包括标头在内的任何人都`std`在全局命名空间中拥有所有内容。

2.  使用某种形式的包含守卫。

3.  `static`使函数在`.cpp`包含它的位置之外不可见。这意味着每个`.cpp`包含标头的内容都将拥有自己的函数副本。`static`仅当您特别需要此行为时才应使用（非成员）函数。

4.  如果您不使用`static`，您应该将定义从头文件移动到源文件中（如果您希望它定义一次），或者声明函数`inline`（如果可能，它的代码将被内联到每个调用站点上）。如果您不执行上述任何一项操作，如果您在多个源文件中包含标头，则会出现多个定义错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:06:55.370

第一个头文件定义了一个`ret`在包含它的每个翻译单元中使用外部链接调用的函数。如果在同一个程序中链接了多个这样的 TU，则这是不正确的。

第二个头文件定义了一个`ret`在包含它的每个翻译单元中使用内部链接调用的函数。这意味着每个 TU 都有自己的函数的私有副本（具有不同的地址），无论有多少链接在一起。

使用头文件共享代码的正确方法有以下三种：

*   具有内部链接的函数（如在您的第二个标头中，或在 C++11 中将其放在无名命名空间中）。
*   具有外部链接的内联函数（替换`static`为`inline`）。的意思`inline`是，虽然程序中函数只有一个副本，但是每一个使用函数的TU都包含了它的定义。
*   在头文件中声明函数，并在其中准确定义一个 .cpp 文件（例如 ret.cpp）。

在 C++03 中有第四种方式：

*   在无名命名空间中具有外部链接的函数

我相信这在 C++11 中仍然可用，但在 C++11 中，无名命名空间中的函数默认具有内部链接。我不知道在 C++11 中使无名命名空间中的函数具有外部链接的任何用途。因此，就函数而言，无名命名空间是提供函数内部链接的好方法。

您使用哪一种取决于您的需求。第三个选项意味着您可以在不重新编译调用代码的情况下更改函数的定义，尽管您仍然需要重新链接可执行文件，除非该函数位于 dll 中。

如果出现以下情况，前两个 (`static`或`inline`) 的行为会有所不同：

*   该函数包含`static`局部变量，
*   您比较`ret`不同 TU 中的函数指针，
*   你检查你的可执行文件大小或符号表，
*   不同的 TU 中函数的定义是不同的（可能是由于不同的#defines），如果函数有外部链接是禁止的，如果是内部的则不是。

否则，它们几乎相同。

根据标准，`inline`也暗示编译器应该优化对该函数的调用以快速执行（这实际上意味着在调用站点内联代码）。大多数编译器大部分时间都会忽略这个提示。如果他们将一个`static`非`inline`函数评估为内联的好候选者，他们会很乐意内联它，如果他们评估一个函数是内联的不好候选者，他们将很乐意避免内联`inline`函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:09:33.517

使用头卫。

不要在头文件中使用“使用命名空间”。（实际上，不要在头文件中使用“using”。使用完全限定的标识符。）

并使用标头来*声明*函数，而不是*定义*它们。您将希望代码`ret()`只出现在生成的可执行文件中*一次*。您可以通过将 的定义（代码）`ret()`放入 .cpp 文件中来实现这一点。**一个**.cpp 文件，而不是多个文件（通过包含定义）。

头文件列出了函数的*声明*`ret()`，以便其他代码“知道”该函数存在、它采用哪个参数以及它返回什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T09:15:43.850

如果您在头文件中定义 c++ 方法`static`，则每个翻译单元（包含该头文件的每个 .cpp 文件）将具有这些静态方法的不同版本 - 它们将不具有相同的地址空间。因此，您的程序的大小将不必要地增加。

另外，为了清楚起见：

将方法定义为`static`仅在 .cpp 文件中意味着该方法具有静态链接，并且只能从同一 .cpp 文件中的其他方法访问。

# spring - XMLViewresolver 给出 404: Not found 异常

> ID：14211355
> 
> 赞同：0
> 
> 时间：2013-01-08T08:58:09.593
> 
> 标签：spring, spring-mvc, resolver

我正在尝试熟悉 XMLViewResolver，因此我将以下内容包含在 m *-servlet.xml 中：

```
<bean class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="location">
        <value>/WEB-INF/spring-views.xml</value>
    </property> 
    <property name="order" value="0" />
</bean> 
```

Spring-views.xml 看起来像这样（只是一个片段）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean id="insertEntryForm" class="org.springframework.web.servlet.view.JstlView">
    <property name="url" value="/WEB-INF/views/admin/insertEntryForm.jsp"></property>
</bean>
.... 
```

当我尝试加载这个 jsp 时，它给了我以下错误：

```
"NetworkError: 404 Not Found - http://localhost:8080/LiteratureVisualization/admin/insertEntryForm.html" 
```

我怎么解决这个问题？我想使用 XMLViewResolver，因为我可以单独映射多个文件夹（在视图目录内）......或者有不同的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:00:17.773

如果您的项目中有`web.xml`配置文件，请检查 XML 文件是否包含在上下文参数中：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/application-context.xml
        /WEB-INF/application-security.xml
        /WEB-INF/spring-pdf-views.xml
    </param-value>
</context-param> 
```

我在集成 iText 库时遇到了同样的问题，我必须在此处包含 XML 文件。

# node.js - 在 Express/Connect 中解析签名 cookie 的便捷方法？

> ID：14211356
> 
> 赞同：1
> 
> 时间：2013-01-08T08:58:09.643
> 
> 标签：node.js, cookies, express, connect

将 node.js 与 Express 一起使用。这个问题也与 Connect 有关，因为那是有问题的 Express 子组件。

我通过 socket.io 从客户端收到一个签名的 cookie。然后我取它的值，格式如下：

s:sessionID.signature

目前要验证这一点，我必须手动要求 cookie-signature 模块并使用它的 unsign 方法，这需要我从这个字符串中 .slice(2) s: ，感觉很笨拙。

有没有方便的方法？我觉得我应该能够做类似的事情：

mySessionID = express.unsignCookie(thisCookie, forThisSessionIDKey, withThisSecret);

但是不存在这样的方法......我错过了什么吗？

哦，顺便说一句，由于在 socket.io 中，我无法访问 res/req ......这就是为什么我必须首先从客户端的 cookie 传递会话 ID ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T04:18:28.547

这是我最终找到的解决方案。在 socket.js 中：

```
var parseSignedCookie = connect.utils.parseSignedCookie;

...

socket.on('taste:cookie', function (data, callback) {
   var sid = data.sid;
   sid = parseSignedCookie(sid['connect.sid'], "mySecret"); 
```

# reporting-services - SSRS 使用 List Control 生成多页报告

> ID：14211359
> 
> 赞同：0
> 
> 时间：2013-01-08T08:58:17.977
> 
> 标签：reporting-services, listcontrol

我必须创建一个由几个页面组成的报告，每个页面都包含一个表格。报表数据集如下所示：

```
Col1 | Col2 | Col3 | ...
-----+------+------+----
Val1 | xxxx | xxxx | ...
Val1 | xxxx | xxxx | ...
Val1 | xxxx | xxxx | ...
Val2 | xxxx | xxxx | ...
Val2 | xxxx | xxxx | ... 
```

对于该数据，报告应该有两页（一页用于 Val1，一页用于 Val2）。在每一页上都应该有一个表格，其中包含 Col2、Col3 等的相应值。

我正在尝试使用带有表或子报表的列表控件来解决这个问题。我遇到的问题是该列表对 Val1 重复 3 次，对 Val2 重复 2 次（不能在 Col1 上指定 DISTINCT）。

您能告诉我使用带有表或子报表的列表控件是正确的方法吗？我应该使用两个不同的数据集还是有办法使用单个数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:34:55.763

我已经这样实施了报告：

*   只需要一个数据集（如上例所示）
*   报表需要两个报表：MainReport 和 SubReport
*   MainReport：引用使用存储过程和数据的共享数据集。它包含一个在 Col1 上具有 RowGrouping 的列表控件。每行都包含一个 SubReport 引用并将当前 Col1 值传递给它。
*   子报表：使用相同的存储过程，但作为嵌入数据集而不是作为共享数据集（共享数据集检索导致错误）。数据集由 Col1 值过滤以等于 MainReport 的参数。子报表包含一个使用该数据集数据的表格。

在我的实现中，MainReport 有一个在每个页面上重复的报告标题。或者，您可以在列表控件上定义标题并指定它在每一页上重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:40:24.653

以下步骤可能更容易，因为它不需要额外的包含列表：

1.  根据需要添加表格
2.  基于 Col1 的组
3.  [在组的每个实例之前添加分页符](http://msdn.microsoft.com/en-us/library/dd207058.aspx)（参见最后一节）
4.  [在每一页上重复组标题](http://msdn.microsoft.com/en-us/library/dd207045.aspx)

作为旁注，我认为步骤 2 也可以在您当前拥有的列表上执行，也可以有效地解决您遇到的问题。如果您拥有的不仅仅是 Col1 中每个值的表格（标题、图像、图例等），这可能是首选选项。

# java - 如何比较从java到mysql的日期

> ID：14211363
> 
> 赞同：1
> 
> 时间：2013-01-08T08:58:26.603
> 
> 标签：java, mysql, jakarta-ee, jpa, ejb

嗨，我想知道我们如何将 java 中的当前日期与 mysql 中存储的日期进行比较。

存储在 MySQL 中的日期是`2013-01-04 13:15:00`

当我通过获取当前日期在java中比较这个日期时

```
Date date = new Date(); 
```

然后写一个查询，如果存储在 MySQL 中的日期小于当前显示结果。但查询返回 0 结果。

```
select model from abc model where model.abcStartDate >= date and model.abcEndDate &gt;= date 
```

在 MySQL 中，开始日期和结束日期都是时间戳数据类型。

下面是EJB实体类

```
@Entity
@Table(name = "abc_table", uniqueConstraints = {})
public class ABCClass implements java.io.Serializable {

private static final long serialVersionUID = -1924961655993587546L;

// Fields
private Date abcStartDate;
private Date abcEndDate;

// Constructors

/** default constructor */
public ABCClass() {
}

@OrderBy(value="3")
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "abc_start_date", unique = false, nullable = false, insertable = true, updatable = true, length = 19)
public Date getabcStartDate() {
    return this.abcStartDate;
}

public void setabcStartDate(Date abcStartDate) {
    this.abcStartDate = abcStartDate;
}

@OrderBy(value="4")
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "abc_end_date", unique = false, nullable = false, insertable = true, updatable = true, length = 19)
public Date getabcEndDate() {
    return this.abcEndDate;
}

public void setabcEndDate(Date abcEndDate) {
    this.abcEndDate = abcEndDate;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:03:23.100

One of right approach - use parametrized query in java Use prepared statement with query

```
select model from abc model where model.abcStartDate <= ? and model.abcEndDate >= ? 
```

And then set first and second params to new Date() in your java code. In this case you can compare not only current date, but any java Date you have

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:30:12.057

如果要使用**PreparedStatement**比较 SQL 查询中的日期：

```
String query="select model from abc model where model.abcStartDate >= ? and model.abcEndDate <=?;";
PreparedStatement stmnt = conn.preparedStatement(query);
stmnt.setTimestamp(1, new java.sql.Timestamp(Calender.getInstance().getTime()));
stmnt.setTimestamp(2, new java.sql.Timestamp(Calender.getInstance().getTime()));
stmnt.executeQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:09:29.513

您必须将日期与时间进行比较：
将 java.sql.Timestamp 用于 util.Date。它会为它工作。
例如：
java.sql.Timestamp t = new Timestamp(Date.getTime());

# c# - Parallel.For 中的变量

> ID：14211370
> 
> 赞同：4
> 
> 时间：2013-01-08T08:58:55.867
> 
> 标签：c#, multithreading, task-parallel-library

所以我有 3 个嵌套的 for 循环，内部的两个循环做的很少。我想将最外面的循环转换为并行循环。

我的问题是：

如果我在循环中有一个变量，则该变量用作临时值持有者并在每个循环中采用一个新值。当并行开始时我需要担心那个变量吗？

我的意思是所有线程都会覆盖同一个变量吗？

```
 for (int i = 0; i < persons.number; i++) //Loop all the people
    var Dates = persons[i].Appointments.bydate(DateStep); 
```

我需要担心并行循环中的 Dates 变量吗？

抱歉我的问题格式不正确，但这只是我的第二个问题，我要到那里了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T09:02:38.437

简而言之：没有。

因为这个变量是在循环内限定的，所以无论如何都会为循环的每次迭代重新分配它。它不是在不同线程之间共享的值。

您应该担心的唯一变量是循环之外的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:04:16.747

`Dates`将是每个循环迭代的本地，因此每个线程将在其自己的堆栈上拥有一个私有副本。没有干扰。

不过要小心在循环外声明的变量。

# math - 对于一个立方体，给定 8 个顶点坐标，如何获得 12 条边的坐标对？

> ID：14211373
> 
> 赞同：0
> 
> 时间：2013-01-08T08:59:16.870
> 
> 标签：math, geometry, coordinates

我想了一会儿这个问题，谷歌搜索“边缘”或“顶点”并没有返回任何有用的信息。

是的，对于三次方来说非常简单，但对于 3D 中的任意形状来说并不那么容易。例如凹形体。您可能会发现一些对角线，但它不是边缘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:59:16.870

这个问题的通用术语称为[Convex Hull](http://en.wikipedia.org/wiki/Convex_hull)

广泛应用于GIS

[https://gis.stackexchange.com/questions/1200/concave-hull-definition-algorithms-and-practical-solutions](https://gis.stackexchange.com/questions/1200/concave-hull-definition-algorithms-and-practical-solutions)

最著名的算法是由 ACM 的 Graham Scan 完成的

```
GRAHAM_SCAN(Q)

Find p0 in Q with minimum y-coordinate (and minimum x-coordinate if there are ties).
Sorted the remaining points of Q (that is, Q ? {p0}) by polar angle in counterclockwise order with respect to p0.
TOP [S] = 0                ? Lines 3-6 initialize the stack to contain, from bottom to top, first three points.
PUSH (p0, S)
PUSH (p1, S)
PUSH (p2, S)
for i = 3 to m             ? Perform test for each point p3, ..., pm.
    do while the angle between NEXT_TO_TOP[S], TOP[S], and pi makes a nonleft turn  ? remove if not a vertex
                do POP(S)
         PUSH (S, pi)
return S 
```

[http://en.wikipedia.org/wiki/Graham_scan](http://en.wikipedia.org/wiki/Graham_scan)

[http://www.personal.kent.edu/~rmuhamma/Compgeometry/MyCG/ConvexHull/GrahamScan/grahamScan.htm](http://www.personal.kent.edu/~rmuhamma/Compgeometry/MyCG/ConvexHull/GrahamScan/grahamScan.htm)

有趣的事实：凸或凹壳有专利：

[https://stackoverflow.com/a/2241263/41948](https://stackoverflow.com/a/2241263/41948)

# javascript - 对键上的 JavaScript 对象进行排序

> ID：14211374
> 
> 赞同：0
> 
> 时间：2013-01-08T08:59:17.633
> 
> 标签：javascript, arrays

> **可能重复：**
> [按键排序 JavaScript 对象](https://stackoverflow.com/questions/5467129/sort-javascript-object-by-key)

```
{
    "0": 3900,
    "1": 42,
    "10": 135,
    "2": 5,
    "3": 20,
    "4": 33,
    "5": 24,
    "6": 35,
    "7": 56,
    "8": 60,
    "9": 147
} 
```

如何根据键整数类型对 javascript 键进行排序。对于上述给定的输入，最终输出的格式应为

```
{
0: 39,
1: 42,  
2: 5,
3: 20,
4: 33,
5: 24,
6: 35,
7: 56,
8: 60,
9: 147,
10: 135,
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:01:26.450

That's an JavaScript Object. They can't be sorted.

For example, no matter what order you place your elements in, in the code, Google Chrome will automatically sort them when you log the object.

```
var obj = {
    "0": 3900,
    "1": 42,
    "10": 135,  // See? not sorted.
    "2": 5,
    "3": 20,
    "4": 33,
    "5": 24,
    "6": 35,
    "7": 56,
    "8": 60,
    "9": 147
}
for(key in obj){
    console.log(key, obj[key]);
} 
```

Output:

```
0 3900
1 42
2 5
3 20
4 33
5 24
6 35
7 56
8 60
9 147
10 135  // Suddenly, without our intervention, the object got sorted by the browser. 
```

So, what I am trying to say is: It's browser-dependent. You can't sort objects. It depends on the browser implementation how the object will be iterated over.

Now, in this specific case, I think it's a better idea to just use an array, since the keys are sequential numbers, any way:

```
var arr = [3900, 42, 5, 20, 33, 24, 35, 56, 60, 147, 135]; 
```

You can access this the same way as you would access your object (`arr[5] == 24`), and as an added bonus, it has a `.length`!

# autohotkey - 如何输入（按住LButton）？

> ID：14211380
> 
> 赞同：1
> 
> 时间：2013-01-08T08:59:43.847
> 
> 标签：autohotkey

我正在尝试（按住左键 1 秒）使其右键单击。这是我得到的：

```
 LButton::
    MouseClick, right, , , 1, 0, D
    Sleep 0
    MouseClick, right, , , 1, 0, U
return 
```

如何将“LButton”输入改为“Hold LButton for 1 seconds”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:29:25.743

这个怎么样...

```
LButton::
StartTime := A_TickCount ; Set the timer
KeyWait, LButton ; Wait for release of mousebutton
ElapsedTime := A_TickCount - StartTime ; Calculate elapsed time
if (ElapsedTime > 1000)
    Click, Right ; when longer than 1000 ms
    Click, Left  ; when shorter than 1000 ms
return 
```

缺点是您不能再使用鼠标来突出显示文本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:50:38.233

干得好：

```
#Persistent 
#SingleInstance Force
#NoEnv
SetBatchLines, -1

global timeDown = 0

SetTimer, checkLeftClick,25

checkLeftClick:
    if(  GetKeyState("LButton" , "P") )
    {
        timeDown += 25
    }
    else
    {
        timeDown = 0
    }

    if(timeDown > 1000)
    {
        MouseClick , left , , , , ,U
        Click,Right
        timeDown = 0
    }

return 
```

# android - ProgressDialog 上更平滑、更快的旋转

> ID：14211383
> 
> 赞同：3
> 
> 时间：2013-01-08T09:00:02.177
> 
> 标签：android

我的 ProgressDialog 有一个自定义动画，它是这样设置的：

```
pd.setIndeterminateDrawable(c.getResources().getDrawable(R.anim.progress_animation)); 
```

`progress_animation`是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:interpolator="@android:anim/linear_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:toDegrees="358" >

    <shape
        android:innerRadiusRatio="3"
        android:shape="ring"
        android:thicknessRatio="8"
        android:useLevel="false" >
        <size
            android:height="48dip"
            android:width="48dip" />

        <gradient
            android:centerColor="#4c737373"
            android:centerY="0.50"
            android:endColor="#E66A0F"
            android:startColor="#4c737373"
            android:type="sweep"
            android:useLevel="false" />
    </shape>

</animated-rotate> 
```

这会给我一个橙色的纺车，但这似乎比 ProgressDialog 中的默认纺车“更慢”或更迟钝。我尝试将`android:toDegrees`360 设置为 358，但没有运气。我还启用了硬件加速。无论如何我可以让这个动画更流畅，或者更快？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-29T04:15:45.477

使用“旋转”而不是“动画旋转”并更改 android:toDegrees 应该让它更快。

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@android:anim/linear_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="2160" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-31T08:29:33.197

这对我有用：

在 drawable(created) 处创建 my_progress_indeterminate.xml。load_spool.png 是要旋转的图像。

```
 <?xml version="1.0" encoding="utf-8"?>
  <rotate xmlns:android="http://schemas.android.com/apk/res/android"
     android:drawable="@drawable/load_spool"
     android:pivotX="50%"
     android:pivotY="50%"
     android:fromDegrees="0"
     android:toDegrees="2160">
  </rotate> 
```

布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

 <ProgressBar
    android:id="@+id/progressBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:indeterminateDrawable="@drawable/my_progress_indeterminate" />

 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:51:55.960

try android:toDegrees="1080" i my case it works .... just try this

# javascript - 在 selectyze 插件中滚动

> ID：14211388
> 
> 赞同：0
> 
> 时间：2013-01-08T09:00:20.337
> 
> 标签：javascript, jquery

在替换标准选择框（下拉菜单）的 jQuery 插件 selectyze （[https://github.com/alpixel/Selectyze](https://github.com/alpixel/Selectyze)）中，有一个小“问题”，这有点烦人，我希望有人可能有解决方案。

**问题**

当展开列表然后将指针指向一个选项并滚动列表滚动到底部时，当继续滚动页面时也开始滚动。

**例子**

[http://demos.myjqueryplugins.com/selectyze/](http://demos.myjqueryplugins.com/selectyze/)

展开选择菜单，然后滚动。

**代码**

[https://github.com/alpixel/Selectyze](https://github.com/alpixel/Selectyze)

我希望有人可能知道在选择框中滚动时要编辑什么以使页面滚动停止。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:53:24.530

我已经使用[它](https://stackoverflow.com/a/12090055/669677)并扩展了 Selectyze js 事件。

让我们试试：

[http://jsbin.com/ododut/5/](http://jsbin.com/ododut/5/)

# c# - C# object array = null，不释放内存

> ID：14211389
> 
> 赞同：3
> 
> 时间：2013-01-08T09:00:22.530
> 
> 标签：c#, memory

在我做的项目中是内存泄漏。我重写了所有的函数来修复一些，但还剩下一个：

该程序有一个面板对象数组，每次我放入一个新面板时它都会增长。当它达到 400 个面板时，它会删除最旧的面板以释放一些内存。

我不明白的是：

```
tempPanels = new Panel[panels.Length];
Array.Copy(panels, 1, tempPanels, 0, panels.Length - 1);//delete the oldest history log (the first of the array)
panels = null; //empty object array
panels = new Panel[tempPanels.Length + 1]; //set new length
tempPanels.CopyTo(panels, 0);//restore panels 
```

当我使用上面的代码时，内存使用量仍在不断增加......有人可以解释为什么我必须在将面板设置为空之前先处理面板吗？

```
tempPanels = new Panel[panels.Length];
Array.Copy(panels, 1, tempPanels, 0, panels.Length - 1);//delete the oldest history log (the first of the array)
panels[0].Dispose();
panels = null; //empty object array
panels = new Panel[tempPanels.Length + 1]; //set new length
tempPanels.CopyTo(panels, 0);//restore panels 
```

提前致谢！

编辑@史蒂夫 B：
程序创建一个新面板：`panel currentPanel;`
当有一个新面板时，我声明 currentPanel：`currentPanel = new Panel();`
之后我调用此函数：setCurrentPanelConfiguration：

```
public void setCurrentPanel()
{
  currentPanel.Name = "panel" + panels.Length;
  currentPanel.Size = new System.Drawing.Size(485, 75);
  currentPanel.BackColor = Color.Transparent;
} 
```

为了修复滚动错误，我使用了一个面板 HistoryPanel，我在其中放置了 currentPanel：

```
HistoryPanel.Controls.Add(currentPanel); 
```

然后我添加所有控件：用户名、当前时间和头像。

为了保存面板，我在创建空间后将其添加到阵列面板中，如上所示：
`panels[panels.Length-1] = currentPanel;`

我使用数组是因为历史记录显示最新的数组。为此，每次我必须将所有面板向下移动 80 像素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T09:02:29.130

Because setting something to `null` does not dispose of it, it just dereferences it - the garbage collector isn't monitoring your assignments to check for your `null` references, it does it when it wants (all else being equal) or when explicitly told to do so.

In short, because `null` and memory management are different things.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:07:12.747

除了格兰特托马斯所说的，你为什么不使用`List<Panel>`更容易管理的 a 呢？

代码将如下所示（假设`panels`声明为`List<Panel>`）：

```
Panel p = panels[0];
panels.RemoveAt(0);  // This removes the first element

p.Dispose(); // This disposes of the element 
```

如果你想保留你的代码，它应该如下所示：

```
tempPanels = new Panel[panels.Length];
Array.Copy(panels, 1, tempPanels, 0, panels.Length - 1);//delete the oldest history log (the first of the array)

// Dispose of every element in the array
for (int i = 0; i < panels.Length; i++)
    panels[i].Dispose();

// The following line is unneccessary, as the variable is re-assigned anyway
// panels = null; //empty object array

panels = new Panel[tempPanels.Length + 1]; //set new length
tempPanels.CopyTo(panels, 0);//restore panels 
```

# android - WCF 服务响应延迟

> ID：14211392
> 
> 赞同：1
> 
> 时间：2013-01-08T09:00:42.997
> 
> 标签：android, wcf, rest, response, fiddler

我有一个 WCF Rest 服务，我用 Fiddler 进行了测试，因为我在 Android 移动设备上遇到了缓慢的性能。我不是服务器端的专家，但我看到服务器在写回响应之前有延迟。我复制了 Fiddler 结果。可能是什么问题呢？

```
== TIMING INFO ============
ClientConnected:     09:26:06.907
ClientBeginRequest:  09:26:06.907
GotRequestHeaders:   09:26:06.907
ClientDoneRequest:   09:26:06.907
Determine Gateway:   0ms
DNS Lookup:          0ms
TCP/IP Connect:      1222ms
HTTPS Handshake:     0ms
ServerConnected:     09:26:08.130
FiddlerBeginRequest: 09:26:08.130
ServerGotRequest:    09:26:08.131
ServerBeginResponse: 09:26:44.151
GotResponseHeaders:  09:26:44.151
ServerDoneResponse:  09:26:44.151
ClientBeginResponse: 09:26:44.151
ClientDoneResponse:  09:26:44.151

Overall Elapsed:     00:00:37.2441302

The response was buffered before delivery to the client. 
```

服务托管为 WebServiceHost2。

服务方式：

```
[OperationContract]
[WebInvoke(UriTemplate = "Test/PostData", Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
Stream PostTestData(Stream data);

public Stream PostTestData(Stream data)
        {
            try
            {
                Thread.Sleep(1000);
            }
            catch (Exception ex)
            {
                ex.Log(ex.Message);
            }
            return null;
        } 
```

# javascript - derby - 更改时自动“刷新”

> ID：14211408
> 
> 赞同：2
> 
> 时间：2013-01-08T09:01:40.653
> 
> 标签：javascript, node.js, derbyjs

我正在尝试使用 derbyjs，但无法弄清楚这些使用订阅的实时更新是如何工作的。

目前，该应用程序只是尽可能基本的帖子标题列表和末尾的文本字段，人们可以在其中添加新帖子：

```
<Title:>
  Sample derby app

<Header:>
  <!-- This is a component defined in the /ui directory -->
  <ui:connectionAlert>

<Body:>
  <h1>Posts</h1>
  <app:postList>
  <input type="text" value="{_fieldValue}"><input type="button" value="add" x-bind="click:add">

<postList:>
    {{#each posts}}
        <app:post>
    {{/}}

<post:>
    <div>{{title}}</div> 
```

该应用程序只有“/”路由，它应该订阅所有帖子。相反，回调只是在第一次从数据库加载帖子时被调用，而不是在任何更改时调用：

```
// Derby routes can be rendered on the client and the server
get('/', function(page, model, params) {
    model.subscribe(model.query("posts").allPosts(), function(err, posts) {
        page.render({
            posts:posts.get()
        })
    })
})

// CONTROLLER FUNCTIONS //

ready(function(model) {
    this.add = function(){
        model.set("posts."+model.id(),{title:model.get("_fieldValue")});
        model.set("_fieldValue","");
    }
}) 
```

“getAllPosts()”-motif 在服务器 index.js 文件中定义：

```
store.query.expose("posts","allPosts",function(){
    return this;
}); 
```

当前发生的情况是，当我按下“添加”按钮时，一个新帖子被添加到数据库中，但我只能在手动页面刷新后在列表中看到该帖子。如果我在 2 个单独的选项卡中打开页面 2 次并在一个选项卡中添加新帖子，则新帖子不会自动显示在另一个选项卡中。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:33:11.660

为了进行实时绑定，您需要使用单括号。

尝试更改`<postList:>`为：

```
<postList:>
    {#each posts as :post}
        <app:post>
    {/each}

<post:>
    <div>{:post.title}</div> 
```

我还添加`as :post`以确保路径正确。这避免了您可能遇到的许多错误。

如果这不能解决问题或者您还有其他问题，请在 freenode 上加入 #derbyjs 并向我发送消息（switz）。

# azure - Keyset does not exist exception with deployment on windows server 2012 on Azure

> ID：14211410
> 
> 赞同：1
> 
> 时间：2013-01-08T09:01:43.410
> 
> 标签：azure, windows-server-2012

I got a problem with upgrading my deployment to windows server 2012, my deploy works fine with osfamily=2 and compiled with .net4, but failed at .net4.5 and osfamily=3,

the exception I saw when remote to the vm is "Keyset does not exist", seems to related to some certificates. My program using the certificates to encrypt some stream and should be able to using this certs to decode this stream after I deploy it. I checked the certs on vm, it is installed fine, in the right place. So I suspect this is an issue with the different secure policy with 2012 that prevent my role to get the key in the certs.

this blocks me for a while so Thank a lot for any clue!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:53:15.543

Keyset 不存在通常是指当您的程序尝试访问证书的私钥并且由于私钥不存在或无权访问它而无法访问时出现错误

您需要在证书存储中找到有问题的证书，验证它是否包含私钥（将显示在证书的属性中）

![证书属性](../Images/d8cfd43e4f736c4970ce948d9247feff.png)

然后通过右键单击证书存储中的证书并选择：所有任务->管理私钥来验证您的进程/应用程序池是否有权访问私钥。从那里，确保将足够的用户添加到允许列表中

![添加权限](../Images/bcc677534bc253bd35a154e5c00a3583.png)

希望这可以帮助

# opencv - 连接字符的分割

> ID：14211413
> 
> 赞同：6
> 
> 时间：2013-01-08T09:01:55.193
> 
> 标签：opencv, image-segmentation

如果字符连接，我如何分割？我只是尝试使用带距离变换的分水岭[（http://opencv-code.com/tutorials/count-and-segment-overlapping-objects-with-watershed-and-distance-transform/](http://opencv-code.com/tutorials/count-and-segment-overlapping-objects-with-watershed-and-distance-transform/)）来查找组件的数量，但它似乎表现不佳。

1.  它要求对象在一个阈值之后被分离，以便表现良好。

话虽如此，我怎样才能有效地分割字符呢？需要帮助/想法。

![微连接](../Images/fe62dc962d26d68c9a591c26a753f3ed.png) 附件是二值图像的例子。

![紧密相连](../Images/d773da1a74a66571f3bb4dbad60c3562.png)一个高度连接的例子。

答：

@mmgp 这是我的 o/p

![英国石油公司](../Images/fb31d03bf058f3bda277414d6817d46d.png) ![o/p](../Images/67c3bff5e42d1476db90aaf26d63c638.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T05:30:50.183

我相信这里有两种方法：1）重做导致您现在拥有这些图像的二值化步骤；2）根据图像大小考虑不同的可能性。让我们关注给定问题的第二种方法。

在您的最小图像中，只有两个数字连接，并且仅在考虑 8 连接时才会发生。如果您将图像处理为 4 连接，则无需执行任何操作，因为没有两个连接的组件应该分开。这如下所示。只有在考虑 8 连通性时，才可以通过找到与另一个点相连的点来简单地获得正确的图像。在这种情况下，只有两个这样的点，通过删除它们，我们断开了两个数字“1”。

![在此处输入图像描述](../Images/430bb49d739b1ccabb85ab3d63be2c28.png)     ![在此处输入图像描述](../Images/6dfe6b45c5050031127b9d67825ecb8e.png)

在您的其他图像中，情况不再如此。而且我没有一种简单的方法可以应用于它，可以应用于较小的图像而不会使它变得更糟。但是，实际上，我们可以考虑将两个图像放大到某个共同的大小，使用最近邻插值，这样我们就不会从二进制表示中移动。通过调整两个图像的大小，使其宽度等于 200，并保持纵横比，我们可以将以下形态学方法应用于它们。首先做一个细化：

![在此处输入图像描述](../Images/4f51746d09c5c4c3313e85d5b3dc9bce.png)

现在，可以看出，形态分支点是连接您的数字的点（在最左边的数字“六”处还有另一个，将被处理）。我们可以提取这些分支点并使用 2*height+1 的垂直线（高度来自您的图像）应用形态闭合，因此无论该点在哪里，它的闭合都会产生一条完整的垂直线。由于您的图像不再那么小，这条线不需要是 1 点宽，实际上我考虑了一条 6 点宽的线。由于某些分支点在水平方向上很接近，因此此关闭操作会将它们连接在同一条垂直线上。如果一个分支点不靠近另一个分支点，那么执行侵蚀将删除一条垂直线。并且，通过这样做，我们消除了与左侧数字六相关的分支点。应用这些步骤后，我们得到以下左图。从中减去原始图像，我们得到右侧的图像。

![在此处输入图像描述](../Images/5cf8d38e530c95367933196c8bbfdcd7.png)     ![在此处输入图像描述](../Images/534350ac711b9487c4348524dc04e75f.png)

如果我们将这些相同的步骤应用于“8011”图像，我们将得到与开始时完全相同的图像。但这仍然是好的，因为应用删除仅在 8 连通性中连接的点的简单方法，我们可以像以前一样获得分离的组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:19:34.333

为此，通常使用“涂抹算法”。也称为游程平滑算法 (RLSA)。这是一种将黑白图像分割成块的方法。[您可以在此处](http://books.google.nl/books?id=xyB1ufkoeLEC&pg=PA169&lpg=PA169&dq=run%20length%20smoothing%20algorithm&source=bl&ots=7DJON164kO&sig=Mz80KCm6_gKf4V-Oa5i9QQ4bQNY&hl=en&sa=X&ei=923tUI36D4a1hAeP8ICABQ&redir_esc=y#v=onepage&q=run%20length%20smoothing%20algorithm&f=false)找到一些信息或在互联网上四处寻找算法的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:11:52.837

不确定我是否想帮助您解决验证码，但一个想法是使用[侵蚀](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)。根据您必须使用的像素数量，它可能能够在不破坏字符的情况下充分分离字符。这可能最好用作其他一些分割算法的预处理步骤。

# python - Celery: Executing a task after another task, but return the result of the first task

> ID：14211414
> 
> 赞同：1
> 
> 时间：2013-01-08T09:02:03.460
> 
> 标签：python, celery

Sometimes I need to run task B after task A, but return the result of task A. Looking at the docs, I have tried to ([Avoid launching synchronous subtasks](http://docs.celeryproject.org/en/latest/userguide/tasks.html#avoid-launching-synchronous-subtasks))

So I would use a chain, like this:

```
@celery.task
def A():
    return 5

@celery.task
def B():
    return 2

def do_all():
    chain = A.s() | B.s()
    chain()
    return result_of_A 
```

But this would not work. In my case I need:

*   B does not have any parameter. It does not accept the result of A
*   B must be executed *after* A completes
*   I do not need to wait for B to complete, and I do not need its result (B must be async?)
*   How do I return the result of A in do_all? (A must be sync?)

Is it possible to implement this with chains or any other subtasks primitives?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T19:19:26.063

我无法用原语来做这件事。可能有一个。但是另一种可行的方法是，使用任务 A 中的`on_success`or`after_return`处理程序来启动任务 B。如果您还使用该`ignore_result`选项，那么任务 B 的调用将是真正的即发即弃。

# objective-c - 如何使用自动布局在其父视图的一半中启动视图？

> ID：14211422
> 
> 赞同：13
> 
> 时间：2013-01-08T09:02:22.600
> 
> 标签：objective-c, ios, cocoa, autolayout

我在视图中有一个视图：

```
+--------------+
|              |
|       +-----+|
|       |     ||
|       +-----+|
+--------------+ 
```

我希望内部视图始终从外部视图的中间水平开始，并将整个剩余的一半跨越到右边缘：

```
innerView.frame.size.width = outerView.frame.size.width/2;
innerView.frame.origin.x = outerView.frame.size.width/2; 
```

我如何使用自动布局来表达这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-07T18:53:17.623

您实际上可以在 IB/Storyboards 中做到这一点，早在 Xcode 5.1（可能更早）

1.  在视图和超级视图之间创建宽度约束
2.  将其关系设置为“相等”
3.  将其设置为“0”
4.  **将其乘数设置为“2:1”或“1:2”**（取决于约束中的项目顺序）

显然，IB 只允许将乘数设置为整​​数或比率，而不是浮点数。这是一个更清晰的屏幕截图

![宽度一半的约束设置它是父级](../Images/cc8b982898253e766d9c060a9c514a4e.png)

注意：如果“第一项”和“第二项”翻转，则比例为“2：1”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T16:22:14.703

我不认为你可以在 Interface Builder 中做到这一点，但通过在代码中创建约束很容易做到这一点。

您的第一个方程式正是我表达约束的方式。第二个等式可能有效，但将原点与宽度联系起来很奇怪。它们是不同的数量。相反，只需将 innerView 的右侧固定到 outerView 的右侧。

我们使用属性`NSLayoutAttributeTrailing`而不是`NSLayoutAttributeRight`，因此您的界面在本地化 RTL 时会正确翻转。

```
// innerView.width = outerView.width * 0.5
NSLayoutConstraint *widthConstraint = [NSLayoutConstraint constraintWithItem:innerView
                             attribute:NSLayoutAttributeWidth
                             relatedBy:NSLayoutRelationEqual
                                toItem:outerView
                             attribute:NSLayoutAttributeWidth
                            multiplier:0.5
                              constant:0];

// innerView.trailing = outerView.trailing
NSLayoutConstraint *rightConstraint = [NSLayoutConstraint constraintWithItem:innerView
                             attribute:NSLayoutAttributeTrailing
                             relatedBy:NSLayoutRelationEqual
                                toItem:outerView
                             attribute:NSLayoutAttributeTrailing
                            multiplier:1.0
                              constant:0];

[outerView addConstraints:@[widthConstraint, rightConstraint]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:19:39.897

您可以放入父视图的中间并删除界面构建器中的所有自动布局设置。如果您旋转它，它将始终处于同一位置事件。

# excel - Excel互操作中工作表和工作表之间的区别

> ID：14211437
> 
> 赞同：13
> 
> 时间：2013-01-08T09:03:57.763
> 
> 标签：excel, c#-4.0, interop

在 excel COM interop (C#) 中，有什么区别：

```
_sheet = (Excel._Worksheet)_wb.Worksheets["SheetName"]; 
```

和

```
_sheet = (Excel._Worksheet)_wb.Sheets["SheetName"]; 
```

?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T09:09:33.303

工作表可以包含其他“工作表”而不是工作表 - 工作表不是唯一的可能性。例如。那里的表格只包含图表，但没有单元格。它们今天使用的不多。因此，要保存，最好坚持 Worksheets 属性，因为这只会为您提供具有文档格式的工作表。如果运气不好，工作表可能包含与您的期望不同的工作表。我怀疑是否还有很多“非工作表”存在，但你永远不知道，微软可能会引入更多的工作表变体。

# xaml - 用户控件中的动态内容 [Metro 应用，xaml]

> ID：14211444
> 
> 赞同：0
> 
> 时间：2013-01-08T09:04:23.750
> 
> 标签：xaml, dynamic, user-controls, microsoft-metro

这几天我正在接近 Metro App 开发，所以请温柔。

我创建了一个用户控件——一些按钮和文本块——加载到我的应用程序的每个页面中。我希望 texblocks 根据所选页面动态更改：例如，用户控件的 texblocks 之一是页面标题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:34:07.107

您可以通过查找要添加的用户控件的子项来获取简单的代码。

xml代码

```
xmlns:newPage="using:TestApp" 
```

在 mainpage.xaml 中添加这样的页面：

```
<newPage:TestPage x:Name="pageNew"></newPage:TestPage> 
```

然后从主页后面的代码，即 mainpage.xaml.cs

```
public mainpage(){ 
```

初始化组件（）；var newPageContent = pageNew.Content; //这里的内容会给你usercntrl的immidiete孩子}

现在你可以输入 cast like `(Grid)newPageContent = pageNew.content; var TextBlockFirst = newPageContent.children[0];`

等等:)请检查建议是否有帮助:)

# c# - LINQ 错误 - 不支持方法“Sum”

> ID：14211446
> 
> 赞同：4
> 
> 时间：2013-01-08T09:04:28.920
> 
> 标签：c#, linq, linq-to-entities

我有以下 linq -

```
var quantity = (from p in context.StoreInventory
                         where p.BookId== BookId
                                && p.StoreAddress == StoreAddress
                         select p).Sum(i => i.Quantity); 
```

我收到错误 -

> 不支持“求和”方法

谁能告诉我原因和需要的更改。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T09:09:04.410

```
var quantity = (from p in context.StoreInventory
                         where p.BookId== BookId
                                && p.StoreAddress == StoreAddress
                         select p.Quantity).Sum(); 
```

这应该有效 - 对`'Quality'`列执行求和，该列是使用`select`语句获取的。那是因为`Sum(expression)`LINQ to Entities 不支持，但标准支持`Sum()`。

整个工作应该由数据库完成，因此应用程序不会检索任何行 - 只是单个数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:05:35.653

在调用 Sum 之前使用[Enumerable.ToList将查询转换为集合。](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

```
var quantity = (from p in context.StoreInventory
                         where p.BookId== BookId
                                && p.StoreAddress == StoreAddress
                         select p).ToList().Sum(i => i.Quantity); 
```

**编辑**：这将带来所有行并将应用总和，这不是有效的方式。由于您需要汇总数量，您可以选择数量而不是行。

```
var quantity = (from p in context.StoreInventory
                         where p.BookId== BookId
                                && p.StoreAddress == StoreAddress
                         select p.Quantity).Sum(); 
```

# javascript - 浏览器刷新后保持历史记录的Javascript问题？

> ID：14211447
> 
> 赞同：0
> 
> 时间：2013-01-08T09:04:38.213
> 
> 标签：javascript

```
var _history = new Array();
var _index=-1;
function updateHistory(shapeparam)
{
    _index = _index + 1;    
    _history.splice(_index,_history.length);
    _history.push(shapeparam);
} 
```

从上面的代码中，我可以在不刷新的情况下维护历史记录，它工作正常。即使在刷新后我也想使这些值可用，请帮助我是否可以使用 javascript cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:22:40.900

```
var _history = getCookie("history");
_history=_history?_history.split(","):[];
var _index=-1;
function updateHistory(shapeparam)
{
    _index = _index + 1;    
    _history.splice(_index,_history.length);
    _history.push(shapeparam);
    setCookie("history",_history.join(","));
} 
```

# php - .htacces 中的 RewriteRule 以匹配我的 GET 参数需求

> ID：14211449
> 
> 赞同：0
> 
> 时间：2013-01-08T09:04:40.877
> 
> 标签：php, .htaccess

在我们的项目中，我们开始使用 .htaccess 来美化 url。一切都很好，直到我发现我们的 facebook 登录不想工作，因为 fb 返回的 GET 参数无法在我们的代码中捕获。

```
RewriteRule ^social/facebook$ /index.php/?action=social&authsocial=facebook 
```

这条规则打破了我需要的一切。它`http://www.mydomain.com/index.php/?action=social&authsocial=facebook`变为`http://www.mydomain.com/social/facebook`.

所以它解析了 2 个 GET 参数。但是当我使用 facebook 登录时，它们会返回一堆 GET 参数。我怎么能制定规则，这会导致这样的事情 `http://www.mydomain.com/social/facebook?param1=12&qqq=13`？

基本上保持现在的第一部分，但不要像旧样式那样添加恒定的 GET 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:10:48.907

您需要附加查询字符串。`[QSA]`您可以通过在末尾添加来实现它`RewriteRule`：

```
RewriteRule ^social/facebook$ /index.php/?action=social&authsocial=facebook [QSA,L] 
```

[从文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

> 修改查询字符串
> 
> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用 [QSA] 标志。

# android - Android以前的通知不能用新通知代替

> ID：14211453
> 
> 赞同：2
> 
> 时间：2013-01-08T09:04:50.777
> 
> 标签：android, notifications

下面我使用3个类

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.clendar);

    time = ( TimePicker ) findViewById( R.id.tpEventTime );
    date = ( DatePicker ) findViewById( R.id.dpEventDate );      
    title = ( EditText ) findViewById ( R.id.etEventTitle );
    description = ( EditText ) findViewById ( R.id.etEventDescription );
    header = ( TextView ) findViewById ( R.id.txtMenuHeader );
    header.setText( R.string.calendar );
    back = ( Button ) findViewById( R.id.tabs_back );
    home = ( Button ) findViewById ( R.id.tabs_home );
    back.setOnClickListener( this );
    home.setOnClickListener( this );

    //---Button view---
    Button btnOpen = ( Button ) findViewById( R.id.btEventDone );
    btnOpen.setOnClickListener( new View.OnClickListener() {

        public void onClick(View v) {  

            String strT = title.getText().toString();
            String strDes = description.getText().toString();

            // check if user did not input anything
            if( strT.isEmpty() || strDes.isEmpty() ){

                Toast.makeText( getBaseContext(), "You have blank fields!", Toast.LENGTH_SHORT ).show();

            }
            else{

            //---use the AlarmManager to trigger an alarm---
            AlarmManager alarmManager = ( AlarmManager ) getSystemService( ALARM_SERVICE );                 

            //---get current date and time---
            Calendar calendar = Calendar.getInstance();       

            //---sets the time for the alarm to trigger---
            calendar.set( Calendar.YEAR, date.getYear() );
            calendar.set( Calendar.MONTH, date.getMonth() );
            calendar.set( Calendar.DAY_OF_MONTH, date.getDayOfMonth() );                 
            calendar.set( Calendar.HOUR_OF_DAY, time.getCurrentHour() );
            calendar.set( Calendar.MINUTE, time.getCurrentMinute() );

            //---PendingIntent to launch activity when the alarm triggers---                    
            Intent i = new Intent( CalendarEvent.this, DisplayNotification.class );

            year = calendar.get( Calendar.YEAR );
            month = calendar.get( Calendar.MONTH );
            day = calendar.get( Calendar.DAY_OF_MONTH );

            hour = calendar.get( Calendar.HOUR );
            minute = calendar.get( Calendar.MINUTE );

            int intMonth = month + 1;
            String strMonth = "";
            String strDay = "";

            if(month < 10){

                strMonth = "0" + intMonth;
            }
            if(day < 10){

                strDay  = "0" + day ;
            }

            //Date d = new Date(year, month, day);
            //SimpleDateFormat dateFormatter = new SimpleDateFormat(
                        //    "MM-dd-yyyy");
            //String strDate = dateFormatter.format(d);
            String strTitle = title.getText().toString();
            String strDescription = description.getText().toString();
            String strDate = strMonth + "-" + strDay + "-" + String.valueOf( year );

            StringBuilder sb = new StringBuilder();
            if(hour >= 12){                      
              sb.append(hour-12).append( ":" ).append(minute).append(" PM");
            }else{
              sb.append(hour).append( ":" ).append(minute).append(" AM");
            }
            String strTime = sb.toString();

            //---assign an ID of 1---
            i.putExtra( "NotifID", notifID ); 
            i.putExtra( "Title", strTitle );
            i.putExtra( "Description", strDescription );
            i.putExtra( "Date", strDate  );
            i.putExtra( "Time", strTime );

            PendingIntent displayIntent = PendingIntent.getActivity(
                getBaseContext(), notifID, i, 0 );               

            //---sets the alarm to trigger---
            alarmManager.set( AlarmManager.RTC_WAKEUP, 
                calendar.getTimeInMillis(), displayIntent );
            finish();
        }

        }
    }); 

} 
```

**报警详情：**

```
EditText title, description, date, time;
Button done;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alarmdetails);  

    //---look up the notification manager service---
    NotificationManager nm = ( NotificationManager ) 
        getSystemService( NOTIFICATION_SERVICE );

    title = ( EditText ) findViewById ( R.id.etDetailTitle );
    description = ( EditText ) findViewById ( R.id.etDetailDescription );
    date = ( EditText ) findViewById ( R.id.etDetailDate );
    time = ( EditText ) findViewById ( R.id.etDetailTime );
    done = ( Button ) findViewById ( R.id.btnAlarmDone );

    done.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
        }
    });

    //---cancel the notification---
    nm.cancel( getIntent().getExtras().getInt( "NotifID" ) ); 

    Date d = new Date();
    SimpleDateFormat dateFormatter = new SimpleDateFormat(
                    "MM-dd-yyyy hh:mm");
    String strDate = dateFormatter.format(d);

    String strTitle = getIntent().getExtras().getString( "Title" );
    String strDescription = getIntent().getExtras().getString( "Description" );
    strDate = getIntent().getExtras().getString( "Date" );
    String strTime = getIntent().getExtras().getString( "Time" );
    title.setText( strTitle );
    description.setText( strDescription );
    date.setText( strDate );
    time.setText( strTime );

}
} 
```

**显示通知：**

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

//---get the notification ID for the notification; 
// passed in by the NotifyActivity---
int notifID = getIntent().getExtras().getInt( "NotifID" );
String strTitle = getIntent().getExtras().getString( "Title" );
String strDescription = getIntent().getExtras().getString( "Description" );
String strDate = getIntent().getExtras().getString( "Date" );
String strTime = getIntent().getExtras().getString( "Time" );

//---PendingIntent to launch activity if the user selects 
// the notification---
Intent i = new Intent( DisplayNotification.this, AlarmDetails.class );
i.putExtra( "NotifID", notifID );  
i.putExtra( "Title", strTitle );
i.putExtra( "Description", strDescription );
i.putExtra( "Date", strDate );
i.putExtra( "Time", strTime );

PendingIntent detailsIntent = 
    PendingIntent.getActivity(this, 0, i, 0);

NotificationManager nm = ( NotificationManager )
    getSystemService( NOTIFICATION_SERVICE );
Notification notif = new Notification(
    R.drawable.ic_launcher, 
    "iHealthFirst: Notification!",
    System.currentTimeMillis() );

CharSequence from = "iHealthFirst - New Notification";
CharSequence message = "This is your alert, click to view";        
notif.setLatestEventInfo(this, from, message, detailsIntent);
notif.flags = Notification.FLAG_INSISTENT;
notif.defaults |= Notification.DEFAULT_SOUND;

//---100ms delay, vibrate for 250ms, pause for 100 ms and
// then vibrate for 500ms---
notif.vibrate = new long[] { 100, 250, 100, 500};        
nm.notify( notifID, notif );

//---destroy the activity---
finish();
}

} 
```

首次创建通知时，它可以工作。但是当我创建另一个时，之前的通知仍然显示。我怎样才能显示另一个通知？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:06:55.833

在创建新的之前，您可以[更新当前的](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)或[取消已发布的。](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Removing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:15:30.710

您可以使用相同的通知 ID 替换以前的通知。

```
nm.notify( notifID, notif ); 
```

这里对所有通知使用相同的**notifID**，因此您可以将任何整数值作为notifID

# ios - 我可以在 UIWebview 上有类似于 UILabel Truncate Text 的东西吗？

> ID：14211454
> 
> 赞同：1
> 
> 时间：2013-01-08T09:05:14.037
> 
> 标签：ios, uiwebview

我可以在 UIWebview 上使用 UILabel 截断文本类似功能吗？

所以我想截断尾部的文本，例如

> abcdefghijklmnopqrstuvwxyz1234567890

变成

> abcdefghijkl...

我的 UIWebview 只有一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:14:41.677

可以通过向 Web 内容添加一些 CSS 来完成（例如[Truncate String with Ellipsis](http://css-tricks.com/snippets/css/truncate-string-with-ellipsis/ "用省略号截断字符串")中的这个 CSS ）。

```
.truncate {
    width: 250px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

否则，为什么不将 a`UILabel`与 an 一起使用`NSAttributedString`？

# php - 从维基百科获取文章的第一段

> ID：14211456
> 
> 赞同：-1
> 
> 时间：2013-01-08T09:05:29.063
> 
> 标签：php, web-scraping, wikipedia, wikipedia-api

从维基百科获取好莱坞一词的文章第一段的正确方法是什么？结果，`$result`变量包含[页面的第一段](http://en.wikipedia.org/wiki/Hollywood)

> 好莱坞是美国加利福尼亚州洛杉矶的一个地区，位于洛杉矶市中心的西北偏西。[2] 由于其作为电影制片厂和电影明星的历史中心的名声和文化身份，好莱坞这个词经常被用作美国电影的转喻。尽管大部分电影产业已经分散到周边地区，如西洛杉矶、圣费尔南多和圣克拉丽塔山谷，但重要的辅助产业，如剪辑、特效、道具、后期制作和灯光公司仍留在好莱坞，因为做派拉蒙影业的外景。

如果它包含 HTML 标签是可以的（甚至比纯文本更好）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:04:56.640

我不知道 Kohana 是什么，但是要获取某个 Wikipedia 页面的 HTML 文本，您可以使用[API](https://www.mediawiki.org/wiki/API)。

例如，要获取好莱坞文章第一部分的 HTML，您可以使用如下查询：

[http://en.wikipedia.org/w/api.php?format=xml&action=query&prop=revisions&titles=Hollywood&rvprop=content&rvsection=0&rvparse](http://en.wikipedia.org/w/api.php?format=xml&action=query&prop=revisions&titles=Hollywood&rvprop=content&rvsection=0&rvparse)

这是 XML 格式，但 JSON 也是一种选择。

此外，这将返回整个第一部分（包括信息框），而不仅仅是第一段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:08:32.970

您可以使用[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)库轻松解析网页中的 HTML：

```
include('inc/simple_html_dom.php'); // this line should be replaced with the Kohana way of including the library

// Create DOM from URL
$html = file_get_html('http://en.wikipedia.org/wiki/Hollywood');

// Get the first paragraph
$p = $html->find('p', 0);

echo $p->innertext; // Prints <b>Hollywood</b> is a district in (...) 
```

我从未使用过 Kohana，但似乎[至少有 2 个用于 Simple HTML DOM 的 Kohana 模块](https://www.google.nl/search?q=kohana%20simplehtmldom)，因此在您的项目中使用该库应该很容易。

# database - 如何跟踪用户访问？

> ID：14211457
> 
> 赞同：1
> 
> 时间：2013-01-08T09:05:29.233
> 
> 标签：database, jakarta-ee, memcached

我有一个 Java EE Web 应用程序。第一页有 4 个选项卡。我想跟踪每个用户对每个选项卡的访问次数。

页面中有一个按钮，每当用户单击该按钮时，应根据访问频率对选项卡进行重新排序。当用户再次登录系统时，选项卡应根据这些访问重新排序。

我如何保持这个计数？

如果我将它保存在数据库中，那么我必须为每次访问调用数据库。我可以为此使用 memcached 对象吗？我应该什么时候将计数保存在数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:10:04.577

您可以将信息保存在数据库中，`UserVistsTable(UserID, TadID, VisitCount)`并在登录时为用户读取信息，在工作期间您使用内存中的信息并在注销时再次将更新的信息保存在数据库中。

# python - 我可以为简单的 ERP 系统选择哪个 Python Web 框架？

> ID：14211459
> 
> 赞同：0
> 
> 时间：2013-01-08T09:05:36.457
> 
> 标签：python, mysql, web-frameworks, erp

我想创建一个简单的 ERP 系统，其中包括库存系统、员工工资单、用户电子邮件系统、报告和小型服务台应用程序。我想让它成为一个基于浏览器的应用程序。

哪个 Python Web 框架将支持我的要求，并且易于开发和使用 MySQL。将来可能需要对其进行扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:07:44.507

[**Django**](https://docs.djangoproject.com/en/1.4/)将最适合您的要求

# c# - 不同windows azure部署环境中的不同日期格式

> ID：14211460
> 
> 赞同：3
> 
> 时间：2013-01-08T09:05:37.463
> 
> 标签：c#, datetime, azure, cultureinfo, regional-settings

我在 Windows Azure 中有两个环境（部署）。在一种环境（比如 D env）中，声明

```
DateTime.Now.ToString("dd/mm/yyyy") 
```

返回 `"08-01-2013"`

在另一个环境中（比如 E env）它返回`"08/01/2013"`

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:24:21.780

我认为您的环境附加设置是不同的。

你的 D 环境使用日期附加设置使用`-`，你的 E 环境使用 将`/`你的日期格式更改为`dd.MM.yyyy`环境 E。

对于 Windows 7，请按照`Control Panel-->Language and Region-->Change the date, time and number format-->Additional Settings--> Date`

![在此处输入图像描述](../Images/9c61fe3ed6d17737908c7c34a0d96c6d.png)

如果您想对代码部分进行一些更改，可以[`CultureInfo.InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)在代码中使用属性。

> 不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关。您可以在对 CultureInfo 实例化方法的调用中使用空字符串 ("") 按名称指定不变区域性。CultureInfo.InvariantCulture 还检索不变区域性的一个实例。它几乎可以用在 System.Globalization 命名空间中需要文化的任何方法中。

假设您想在`CultureInfo`两种环境中都使用法语。

```
CultureInfo frFr = new CultureInfo("fr-FR");
string s = DateTime.Now.ToString("dd/mm/yyyy", frFr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:48:20.007

您正在使用`ToString`使用当前设置的重载`Culture`。格式字符串中的斜杠字符被视为当前区域性的日期字段分隔符的替换字符。

如果要使用显式日期格式字符串，还请使用显式格式提供程序。在这种情况下，我建议使用 ; 中的格式`InvariantCulture`。例如

```
using System.Globalization;
...
var x = DateTime.Now.ToString("dd/mm/yyyy", CultureInfo.InvariantCulture); 
```

您还可以修改格式字符串以使用显式斜杠，方法是将其括在单引号中。这会阻止解析器尝试查找文化替换字符：

```
var x = DateTime.Now.ToString("dd'/'mm'/'yyyy"); 
```

# c++ - 在析构函数中显示对象名称

> ID：14211462
> 
> 赞同：1
> 
> 时间：2013-01-08T09:05:45.510
> 
> 标签：c++, object, constructor, destructor

FileTwo.h 内部

```
 #include"iostream"
    using namespace std ;
    class FileTwo{
    public:
      FileTwo(){
        cout<<"constructor for";//Here want to show the object for which the constructor has been called
      }
    ~Filetwo(){
      cout<<"Destructor for ";//Here want to show the object for which the destructor has been called 
    }; 
```

main.cpp 内部

```
#include"Filetwo.h" 

int main(){
  FileTwo two ;
  return 0;
} 
```

我知道这个示例程序非常小，所以我们可以找出调用了构造函数和析构函数的对象。但是对于大项目有没有办法知道对象名称？提前致谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:10:25.177

除非您为对象命名，否则这是不可能的。像这样的东西：

```
#include <iostream>
#include <string>
using namespace std;
class FileTwo {
  public:
    FileTwo(const std::string &myName) : name(myName){
      cout<<"constructor for" << name;//Here want to show the object for which the constructor has been called
    }
    ~Filetwo(){
      cout<<"Destructor for " << name;//Here want to show the object for which the destructor has been called 
    }

  private:
    std::string name;
}; 
```

然后将 main 更改为：

```
#include"Filetwo.h" 
int main(){
  FileTwo two("two 11");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:53:43.803

有可能的。如果您的编译支持`__PRETTY_FUNCTION__`或`__func__`（请参阅[this](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)），那么您可以这样做：

```
#include <iostream>
using namespace std;
class FileTwo{
  public:
    FileTwo(){
      cerr<<"constructor for "<< __PRETTY_FUNCTION__ <<" at "<<&(*this)<<endl;
    }
    ~FileTwo(){
      cerr<<"Destructor for "<< __PRETTY_FUNCTION__ <<" at "<<&(*this)<<endl;
    }
};

int main(){
  FileTwo two;
  return 0;
} 
```

请注意，我还打印以`cerr`确保此输出立即刷新并且在程序崩溃时不会丢失。此外，由于每个对象都有一个唯一的`*this`指针，我们可以使用它来查看特定对象何时被制造或被杀死。

上述程序在我的电脑上的输出是：

```
constructor for FileTwo::FileTwo() at 0x7fff641cde40
Destructor for FileTwo::FileTwo() at 0x7fff641cde40 
```

请注意，这`__func__`是一个 C99 标准标识符。C++0x 以“实现定义的字符串”的形式增加了支持。

`__FUNCTION__`是一些编译器支持的预标准扩展，包括 Visual C++（参见[文档](http://msdn.microsoft.com/library/b0084kay.aspx)）和 gcc（参见[文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)）。

`__PRETTY_FUNCION__`是一个 gcc 扩展，它做同样的事情，但更漂亮。

[这个问题](https://stackoverflow.com/questions/4384765/whats-the-difference-between-pretty-function-function-func)有更多关于这些标识符的信息。

根据您的编译器，这可能会返回类的名称，尽管它可能会有些混乱。

```
#include <iostream>
#include <typeinfo>

using namespace std;
class FileTwo{
  public:
    FileTwo(){
      cerr<<"constructor for "<< typeid(*this).name() <<" at "<<&(*this)<<endl;
    }
    ~FileTwo(){
      cerr<<"Destructor for "<< typeid(*this).name() <<" at "<<&(*this)<<endl;
    }
};

int main(){
  FileTwo two;
  return 0;
} 
```

如果您试图获取实例化类的变量的名称（`two`在您的情况下），那么据我所知，没有办法做到这一点。以下将模拟它：

```
#include <iostream>
#include <string>

using namespace std;
class FileTwo{
  public:
    FileTwo(const std::string &myName) : myName(myName) {
      cerr<<"constructor for "<< myName <<" at "<<&(*this)<<endl;
    }
    ~FileTwo(){
      cerr<<"Destructor for "<< myName <<" at "<<&(*this)<<endl;
    }
  private:
    std::string myName;
};

int main(){
  FileTwo two("two");
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:26:30.337

无法命名对象，您所能做的就是创建一个私有变量来保存名称。

```
using namespace std;
class myClass
{
    private:
    string className;

    public:
    ~myClass()
    {
        cout<<this->className;
    }
}; 
```

你可以为你的变量创建setter和getter。

```
void SetName(string name)
{
   this->className = name;
}

string GetName()
{
   return this->className;
} 
```

# asp.net - 输出缓存不起作用.net4.0

> ID：14211464
> 
> 赞同：3
> 
> 时间：2013-01-08T09:06:01.590
> 
> 标签：asp.net, .net-4.0, outputcache

我们正在使用 .net framework 4.0 开发一个 asp.net 站点。我们试图为它合并输出缓存。
但不幸的是，它不起作用。后来我们发现删除微软安全更新`KB2656351`可以解决问题。
我想知道是否有其他方法可以在不删除更新的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:37:52.400

仅当您安装上述更新并且响应中有 cookie 时，才会出现此问题。不管 cookie 是否包含在请求中。找到了解决此问题的解决方法。我创建了一个自定义 HTTPModule 并将所有可用的 cookie 从响应（包括新添加的 cookie）复制到[`Context.Items`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx). 然后清除响应中可用的所有 cookie。

在下一步中，读取存储在 Context.items 中的对象并添加回响应。因此，当输出缓存提供程序尝试缓存页面时，响应中没有 cookie。所以它照常工作。然后将 cookie 添加回来。

```
 public void Init(HttpApplication context)
    {
        context.PostReleaseRequestState += new EventHandler(OnPostReleaseRequestState);
        context.PostUpdateRequestCache += new EventHandler(OnPostUpdateRequestCache);
    }

    public void OnPostReleaseRequestState(Object source, EventArgs e)
    {
        HttpApplication application = (HttpApplication)source;
        HttpContext context = application.Context;
        HttpCookieCollection cookieCollection = new HttpCookieCollection();
        foreach (string item in context.Response.Cookies)
        {
            HttpCookie tempCookie = context.Response.Cookies[item];

            HttpCookie cookie = new HttpCookie(tempCookie.Name) { Value = tempCookie.Value, Expires = tempCookie.Expires, Domain = tempCookie.Domain, Path = tempCookie.Path };
            cookieCollection.Add(cookie);
        }
        context.Items["cookieCollection"] = cookieCollection;
        context.Response.Cookies.Clear();
    }

    public void OnPostUpdateRequestCache(Object source, EventArgs e)
    {
        HttpApplication application = (HttpApplication)source;
        HttpContext context = application.Context;
        HttpCookieCollection cookieCollection = (HttpCookieCollection)context.Items["cookieCollection"];
        if (cookieCollection != null)
        {
            foreach (string item in cookieCollection)
            {
                context.Response.Cookies.Add(cookieCollection[item]);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:13:14.197

[此处](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_update/kb2656351-security-update-for-microsoft-net/2a26d36c-bff3-4271-a248-2c40c977e62b?msgId=3fe479df-80e4-40e8-811c-68b4f1172b38)报告了此更新的一些问题，并且修复了 .net Framework 4 工作。可能是因为.net Framework坏了或者是framework和IIS的安装顺序导致了ASP.Net的注销，所以需要专门注册ASP.Net，有时会出现这些问题。

我建议修复 .Net 框架，并单独注册 ASP.Net 以查看是否有效。

# perl - 如何仅删除评论语法？

> ID：14211468
> 
> 赞同：1
> 
> 时间：2013-01-08T09:06:08.477
> 
> 标签：perl

我想从 XML 文件中收集所有标签。如何仅删除评论语法？

XML 文件：

```
<xml>
<contrib-group>
<contrib contrib-type="author">
<name>
<surname>Holt</surname>
<given-names> Maurice<!--<xref ref-type="fn" rid="fnI_1"><sup>1</sup></xref>--></given-names>
</name>
</contrib>
</contrib-group>
</xml> 
```

我需要输出为：

```
<xml>
<contrib-group>
<contrib contrib-type="author">
<name>
<surname>Holt</surname>
<given-names> Maurice<xref ref-type="fn" rid="fnI_1"><sup>1</sup></xref></given-names>
</name>
</contrib>
</contrib-group>
</xml> 
```

如何删除评论.. 不删除包含？

脚本：

```
#!/usr/bin/perl
use warnings;
use strict;
use XML::Twig;

open(my $output , '>', "split.xml") || die "can't open the Output $!\n";
my $xml = XML::Twig->new( twig_handlers => { xref => sub{comments => 'drop'} } );
$xml->parsefile("sample.xml");
$xml->print($output); 
```

我做不到......我怎样才能`<!-- -->`只删除而不删除包含？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:26:00.727

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::Twig;

open my $output , '>', 'split.xml' or die "Can't open: $!\n";
my $xml = XML::Twig->new( comments      => 'process',       # Turn on comment processing
                          twig_handlers =>
                              { '#COMMENT' => \&uncomment }
                        );
$xml->parsefile('sample.xml');
$xml->print($output);

sub uncomment {
    my ($xml, $comment) = @_;
    $comment->set_outer_xml($comment->text);                # Replace the comment with its contents.
} 
```

# mysql - MySQL 唯一性和索引

> ID：14211475
> 
> 赞同：1
> 
> 时间：2013-01-08T09:06:27.213
> 
> 标签：mysql, indexing

如果我在 2 列中有一个 UNIQUE，我还需要为每列添加一个 INDEX 吗？

或者 UNIQUE 是否也 INDEX 两列？

注意：许多查询都需要数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:07:33.603

当您在列上声明`unique`约束时，它会自动为其添加索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:09:26.300

`UNIQUE`是一个索引***和***一个约束。

# ajax - ajax 代码中的问题，30 秒后不刷新页面

> ID：14211482
> 
> 赞同：0
> 
> 时间：2013-01-08T09:06:59.667
> 
> 标签：ajax, jquery

在这里有人的帮助下，我用代码做到了这一点。我需要重新加载一个div而不刷新它..

这是代码：

```
function LoadContent()
{
    $('#lista').load('pagination.php');
}
$(document).ready(function(){
    LoadContent(); //load contentent when page loads
    setTimeout('LoadContent()',30000); //schedule refresh
}); 
```

但这不起作用..有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:12:00.570

不需要 document.ready() 来加载函数，您只需调用该函数。

```
 LoadContent(); //load contentent when page loads
    setTimeout('LoadContent()',30000); //schedule refresh
    function LoadContent()
    {
        $('#lista').load('pagination.php');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:44:59.153

尝试以下操作， int = setInterval(function() {LoadContent();}, 30000);.. 如果你想随时停止刷新，你可以通过 int = window.clearInterval(int);

# android - 如何在android中的图像上放置按钮？

> ID：14211484
> 
> 赞同：15
> 
> 时间：2013-01-08T09:07:07.783
> 
> 标签：android, android-layout, custom-controls

我想创建一个这样的自定义视图。![在此处输入图像描述](../Images/1333c133bf3b18ed764d329276f0bb1e.png)

我尝试了以下

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/customView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/sample_image" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|top"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|bottom"
        android:text="Button" />

</FrameLayout> 
```

我怎样才能创建这样的视图？我怎样才能像这样在图像视图上放置按钮？

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T09:15:45.683

你可以尝试使用相对布局来做到这一点，

对于btn1；

```
android:layout_alignParentTop="true"
android:layout_alignParentRight="true" 
```

对于btn1；

```
android:layout_alignParentBottom="true"
android:layout_alignParentRight="true" 
```

[编辑 1]

为按钮使用边距留出空间，android:layout_margin="20dp"

![在此处输入图像描述](../Images/7ade5c0785337b87d2282b8bb39955c9.png)

示例布局

```
<RelativeLayout android:layout_width="300dp"
    android:layout_height="300dp">

    <ImageView
        android:id="@+id/img"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffaadd" 
        android:layout_margin="20dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:text="btn1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"       
        android:text="btn2" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:23:11.787

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_weight="1"
    android:padding="60dp"
    android:src="@drawable/abs__ab_stacked_solid_dark_holo" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="30dp"
    android:background="@drawable/ic_launcher" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="32dp"
    android:layout_marginTop="102dp"
    android:background="@drawable/ic_launcher" />
</RelativeLayout> 
```

![快照](../Images/83385fd3d00e2602f2271ac4d9d8cdf7.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:08:53.197

使用[相对布局](http://developer.android.com/guide/topics/ui/layout/relative.html)。这将允许您在屏幕上重叠不同的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:09:18.010

这是我一直使用的教程[http://www.learn-android.com/2010/01/05/android-layout-tutorial/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/) 你应该找到你需要的。这是很好的解释，所以你不应该有任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-15T04:50:16.807

这是我的编程解决方案，适用于不同尺寸的设备。我有三个按钮，我必须将它们定位在图像 1080x1920 的正确位置 (157,927)、387,927)、(617,927)

```
 final ImageView iv = (ImageView)findViewById( R.id.imageView );
    iv.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        public void onGlobalLayout() {
            // Once data has been obtained, this listener is no longer needed, so remove it...
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                iv.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            } else {
                iv.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            }
            RectF bounds = new RectF();
            Drawable drawable = iv.getDrawable();
            if (drawable != null) {
                iv.getImageMatrix().mapRect(bounds, new RectF(drawable.getBounds()));
            }
            float x = bounds.left;
            float y = bounds.top;
            float new_width = bounds.right - x;
            float new_height = bounds.bottom - y;
            int original_width = 1080;
            int original_height = 1920;

            int x1 = (int) (x + (new_width*157/original_width));
            int x2 = (int) (x + (new_width*387/original_width));
            int x3 = (int) (x + (new_width*617/original_width));
            int newY = (int) (y + (new_height*927/original_height));

            enroll.setX(x1);
            ccfront.setX(x2);
            verify.setX(x3);
            enroll.setY(newY);
            ccfront.setY(newY);
            verify.setY(newY);
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T04:54:34.570

这为我解决了

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src = "@drawable/basic"
        android:layout_alignParentTop="true"
        android:layout_alignRight="@+id/button1"
        android:layout_alignEnd="@+id/button1" />

    <ImageButton
        android:id="@+id/button1"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:text="btn1"
        android:background="@drawable/ic_cancel_black"/>

 </RelativeLayout> 
```

# cocoa - 如何将sql数据库连接到xcode？

> ID：14211486
> 
> 赞同：-3
> 
> 时间：2013-01-08T09:07:12.157
> 
> 标签：cocoa

我需要知道我们如何将 sql developer 与 Xcode 4.5 连接起来。
任何人都可以帮助我一步一步的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:38:16.180

您需要在某个系统上设置数据库。

创建服务器实例，它可以是任何基于 apache、tomcat、java 的服务器。

使用 web-services/xml/json 将您的程序连接到该服务器。

从服务器获取和发布/接收数据到您的可可应用程序。

# excel - VBA Excel 如何使用密码保护隐藏和取消隐藏功能区上的选项卡？

> ID：14211488
> 
> 赞同：-1
> 
> 时间：2013-01-08T09:07:29.943
> 
> 标签：excel, vba

> **可能重复：**
> [在 Excel 2007 中隐藏工作表（使用密码）或在 Excel 中隐藏 VBA 代码](https://stackoverflow.com/questions/4043468/hiding-a-sheet-in-excel-2007-with-a-password-or-hide-vba-code-in-excel)

我有一组带有宏的 excel 表。现在我想隐藏**Review**和**Developer**之类的选项卡，这样用户就不能对代码进行修改。我知道**File->Options->Customize Ribbon->Select Tab->Enable\Disable->Click Ok**隐藏选项卡，但任何用户都可以使用相同的过程取消隐藏选项卡。所以我想要一种替代方法来限制用户取消隐藏隐藏的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:11:56.657

嗯，最好直接保护 VBA 文件，所以用户需要密码才能修改它们。这应该在 VBA 编辑器的左侧属性菜单中找到

# java - GWT 左右键移动按钮

> ID：14211496
> 
> 赞同：1
> 
> 时间：2013-01-08T09:07:52.220
> 
> 标签：java, gwt, button

我在垂直面板中有很多按钮，我可以使用 tab 键从每个按钮移动，但我不能使用键盘向上、向下、向右或向左移动。启用此功能的命令是什么？thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:49:43.113

```
VerticalPanel panel =//;
panel.addDomHandler(new KeyUpHandler() {
  @Override
  public void onKeyUp(KeyUpEvent event) {
    switch (event.getNativeKeyCode()) {
    case KeyCodes.KEY_LEFT:
      //...
    case KeyCodes.KEY_RIGHT:
    }
  }
}, KeyUpEvent.getType()); 
```

# django - @login_decorator 在 Django 中没有按预期工作？

> ID：14211499
> 
> 赞同：0
> 
> 时间：2013-01-08T09:08:01.907
> 
> 标签：django, decorator

我在每个视图中都使用 @login_decorator('/​​login/') 。每当我尝试访问其他 URL 时，它都会重定向到登录页面。URL变成这样：

```
http://127.0.0.1:8000/login/?next=/upload_file/ 
```

现在，当我输入正确的用户名、密码并单击提交时，什么也没有发生。我仍然在具有相同 URL 的同一页面上。

这是我的form.html：

```
<form action="/login/" method="post">
{% csrf_token %}
Username: <input type="text" name="username" />
Password: <input type="password" name="password" />
<input type="Submit"> 
```

视图.py：

```
def login_upload(request):
    try:
        if request.method == 'POST':
            usern = request.POST['username']
            unames = ''.join(usern)
            passwo = request.POST['password']
            s = ''.join(passwo)
            h = hashlib.sha1(s).hexdigest()
            db = MySQLdb.connect(user='root', db='galaxy', passwd='devil', host='localhost')
            cursor = db.cursor()
            cursor.execute("SELECT id, username, password FROM galaxy_user where username=%s and password=%s", (unames, h))
            id, compareu, comparep = zip(*cursor.fetchall())
            db.close()

            return HttpResponseRedirect('/upload_file/')
    except ValueError:
            return render_to_response('login.html',  context_instance=RequestContext(request)) 
```

网址.py：

```
urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),
    url(r'^upload_file/', 'fileupload.views.upload_file'),
    url(r'^sync/', 'fileupload.views.sync'),
    url(r'^login_upload/', 'fileupload.views.login_upload'),
    url(r'^upload_file_form', 'fileupload.views.upload_file_form' ),
    url(r'^book_list', 'fileupload.views.book_list'),
    url(r'^backend/', 'fileupload.backend.show_files')
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:11:47.390

您需要在表单中输入“下一个”值

```
<form action="/login/" method="post">
  {% csrf_token %}
  Username: <input type="text" name="username" />
  Password: <input type="password" name="password" />

  <input type="hidden" name="next" value="{{ next }}" />

<input type="Submit"> 
```

# java - 如何使用struts2在jqgrid中显示两个表数据-jqgrid插件和hibernate

> ID：14211501
> 
> 赞同：1
> 
> 时间：2013-01-08T09:08:25.850
> 
> 标签：java, jquery, hibernate, jqgrid, struts2

我正在使用 Struts 2.3.7、struts2-jquery-grid-plugin-3.5.0 和休眠 3.6。我想显示`jqgrid`来自两个不同表的数据。

我的问题是我必须在一个中显示两个表数据`jqgrid`。前三`jqgrid`列由`Issue`表填充，最后一列`name="assignedTo"`由`Issue_Tracker`表填充。如何显示最后一列中的数据，即`assignedTo`。任何帮助都会被挪用。

**我的 jqgrid 是**

```
<sjg:grid
    id="gridtable"
    caption="Issue-Summary"
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    gridModel="gridModel"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="true"
    reloadTopics="reloadGrid"
>
    <sjg:gridColumn name="issue_id"  id="issueId"  index="id" title="Issue-ID" formatter="integer"  sortable="false"/>
    <sjg:gridColumn name="issue_description" index="id" title="Issue-Details"  sortable="false"/>
    <sjg:gridColumn name="issue_raised_date" index="date" title="Issue-Date"  formatter="date"  sortable="false"/>

    <sjg:gridColumn name="assignedTo"  index="assigned" title="Assigned To"  sortable="false"/>
</sjg:grid> 
```

**我有pojo的：**

问题.java

```
public class Issue implements Serializable
{
private Integer issue_id;
private String  issue_description;
private Date issue_raised_date;

getters and setters 
```

**另一个pojo是**

Issue_Tracker.java

```
public class Issue_Tracker implements Serializable
{  
     private Integer issue_id;
     private String assignedTo; 
```

**和My Dao如下显示jqgrid中的Issue列表**

```
public List<Issue> showHelpDeskIssues(DetachedCriteria dc, int from, int size)
{

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
     try
      {

        Criteria criteria = dc.getExecutableCriteria(session);
        criteria.setFirstResult(from);
        criteria.setMaxResults(size);
        criteria.add(Restrictions.eq("status","Escalate To"));

        return criteria.list();
      }
      catch (HibernateException e)
      {
        e.printStackTrace();
        throw e;
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:56:04.187

您可以使用两个表的组合列在 DB 中创建视图。为该视图创建 PoJo 和映射类并轻松执行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:22:18.387

您可以像这样在 pojo 中为另一个 pojo 创建一个集合

```
public class Issue implements Serializable
{
private Integer issue_id;
private String  issue_description;
private Date issue_raised_date;
private Set<Issue_Tracker> issue_Tracker;

public Set<Issue_Tracker> getIssue_Tracker() {
  return issue_Tracker;
}
public void setIssue_Tracker(Set<Issue_Tracker> issue_Tracker) {
  this.sidUserSites = issue_Tracker;
 }
} 
```

现在您可以通过问题 pojo 访问 Issue_Tracker pojo。您需要使用连接查询

# linux - 在 UNIX 中将文件的内容附加到另一个文件的开头

> ID：14211504
> 
> 赞同：9
> 
> 时间：2013-01-08T09:08:37.537
> 
> 标签：linux, shell, unix

我知道

```
cat file1 >> file2 
```

会将 file1 的内容附加到 file2 的末尾。另一方面，如何将 file1 的内容附加到文件 2 的开头，而不是结尾？

实际上，我有一个主文件 M，目录 D 中有几个其他文件。我想将文件 M 的内容附加到目录 D 中所有文件的开头。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T09:10:17.310

对于您可以执行的每个文件：

```
cat MASTER file >> file.tmp 
```

然后将 file.tmp 移到文件上。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T09:12:08.433

做就是了：

```
cat file1 file2 > tmp && mv tmp file2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T09:23:56.053

您将不得不使用一个临时文件并在合并后重命名它。

例子：

```
echo -e "a\nb\nc" > LETTERS
echo -e "1\n2\n3" > NUMBERS 
cat NUMBERS LETTERS > TMP
mv TMP LETTERS
cat LETTERS 
```

您的命令可能类似于：

```
for file in $( find -name "*.java" ); do cat PREPEND ${file} > ${file}.tmp; mv ${file}.tmp ${file}; done 
```

# https - 基于 SSL 的 JNDI UnknownHostException

> ID：14211510
> 
> 赞同：1
> 
> 时间：2013-01-08T09:09:08.640
> 
> 标签：https, jboss, jndi, naming

大家好，感谢任何阅读这篇文章的人。

我一直在苦苦挣扎，试图将我的客户端-服务器 JNDI 查找的通信从 http 更改为 https。

我正在使用 JBoss 4.2.0 并且升级它目前不是一个选项。

我在客户端所做的是按照 jboss 手册中的建议更改 url。

```
 System.setProperty("javax.net.ssl.trustStore", "C:/Program Files (x86)/localhost.truststore");
    System.setProperty("javax.net.ssl.trustStoreType", "JKS");
    System.setProperty("javax.net.ssl.trustStorePassword", "opensource");       
    System.setProperty(HTTPSClientInvoker.IGNORE_HTTPS_HOST,"true");

    jndiProperties.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.HttpNamingContextFactory");

jndiProperties.put(Context.PROVIDER_URL, "https://"+serverIp+":8443/invoker/JNDIFactory"

    final Context context = new InitialContext(jndiProperties);

    T facade = (T) context.lookup(facadeName);
    return facade; 
```

以前的网址是：

```
jndiProperties.put(Context.PROVIDER_URL, "jnp://"+serverIp+":1099"); 
```

而 contextfactory 是

```
jndiProperties.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory"); 
```

serverIp 是用户输入的真实服务器。我不想使用网络主机名，因为我的服务器中没有 dns 服务器。

我对 jnp url 和 jnp 命名工厂没有任何问题，但是当我尝试通过 SSL 访问时，Jboss 代码`HTTPNamingContextFactory.getNamingServer(URL providerURL)`用客户端无法识别的主机名覆盖我的 ip。

它从服务器进行一些编组，并获取在我的 linux 服务器主机文件中定义的第一个主机条目。

HttpInvokerProxy 最终通过从服务器写入 externalURLValue 来做到这一点，即：

```
"https://myhost:8443/invoker/JMXInvokerServlet". 
```

我的客户端不知道如何处理这个“myhost”，它需要服务器的真实 IP，我最初在客户端的 JNDI 属性中提供了该 IP。

我唯一能做的就是编辑客户端 windows 系统主机文件中的主机文件，并添加一个带有真实 IP 的条目 myhosts，但这当然是

不是生产环境的解决方案，因为我不能要求我的用户进行此类修改。

所以我在客户端得到了这个异常：

javax.naming.CommunicationException：操作失败[根异常是java.rmi.ServerException：IOE；嵌套异常是：

```
java.net.UnknownHostException: myhost 
```

我的服务器的 deploy/http-invoker.sar/META-INF/jboss-service.xml 在下面，如果我尝试将 useHostName 设置为 false，那么将使用 localhost ip

127.0.0.1 而不是 myhost，这没有任何帮助，因为我只需要保留我最初提供的 ip。

我是 JBoss 的新手，所以我将不胜感激任何关于我做错了什么的答案，以及如何在不升级 JBOSS 的情况下解决这个问题。

谢谢你

```
 <?xml version="1.0" encoding="UTF-8"?>

    <!DOCTYPE server>

    <!-- $Id: jboss-service.xml 26202 2004-11-29 16:54:36Z starksm $ -->

<server>

  <!-- The HTTP invoker service configration

  -->

  <mbean code="org.jboss.invocation.http.server.HttpInvoker"

    name="jboss:service=invoker,type=https">

     <!-- Use a URL of the form http://<hostname>:8080/invoker/EJBInvokerServlet

      where <hostname> is InetAddress.getHostname value on which the server

      is running.

      -->

     <attribute name="InvokerURLPrefix">https://</attribute>

     <attribute name="InvokerURLSuffix">:${https.port}/invoker/EJBInvokerServlet</attribute>

     <attribute name="UseHostName">true</attribute>

  </mbean>

   <!-- Expose the Naming service interface via HTTP -->

   <mbean code="org.jboss.invocation.http.server.HttpProxyFactory"

      name="jboss:service=invoker,type=http,target=Naming">

      <!-- The Naming service we are proxying -->

      <attribute name="InvokerName">jboss:service=Naming</attribute>

      <!-- Compose the invoker URL from the cluster node address -->

      <attribute name="InvokerURLPrefix">https://</attribute>

      <attribute name="InvokerURLSuffix">:${https.port}/invoker/JMXInvokerServlet</attribute>

      <attribute name="UseHostName">true</attribute>

      <attribute name="ExportedInterface">org.jnp.interfaces.Naming</attribute>

      <attribute name="JndiName"></attribute>

      <attribute name="ClientInterceptors">

          <interceptors>

             <interceptor>org.jboss.proxy.ClientMethodInterceptor</interceptor>

             <interceptor>org.jboss.proxy.SecurityInterceptor</interceptor>

             <interceptor>org.jboss.naming.interceptors.ExceptionInterceptor</interceptor>

             <interceptor>org.jboss.invocation.InvokerInterceptor</interceptor>

          </interceptors>

      </attribute>

   </mbean>

   <!-- Expose the Naming service interface via clustered HTTP. This maps

   to the ReadOnlyJNDIFactory servlet URL

   -->

   <mbean code="org.jboss.invocation.http.server.HttpProxyFactory"

      name="jboss:service=invoker,type=http,target=Naming,readonly=true">

      <attribute name="InvokerName">jboss:service=Naming</attribute>

      <attribute name="InvokerURLPrefix">http://</attribute>

      <attribute name="InvokerURLSuffix">:8080/invoker/readonly/JMXInvokerServlet</attribute>

      <attribute name="UseHostName">true</attribute>

      <attribute name="ExportedInterface">org.jnp.interfaces.Naming</attribute>

      <attribute name="JndiName"></attribute>

      <attribute name="ClientInterceptors">

          <interceptors>

             <interceptor>org.jboss.proxy.ClientMethodInterceptor</interceptor>

             <interceptor>org.jboss.proxy.SecurityInterceptor</interceptor>

             <interceptor>org.jboss.naming.interceptors.ExceptionInterceptor</interceptor>

             <interceptor>org.jboss.invocation.InvokerInterceptor</interceptor>

          </interceptors>

      </attribute>

   </mbean>

</server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:12:06.020

您是否检查了属性 java.rmi.server.hostname、tomcat.proxyName 和 tomcat.sslProxyName 的值？（您可以使用 JMXConsole 中的 SystemProperties MBean 检查它们的值）。

我不知道 HTTP Inovker Servlet 从哪里获取服务器名称，但它可能会使用这些属性之一。尝试将它们定义为您希望它使用的 ip，但要小心，因为它可能会改变其他服务/应用程序的行为。

# ruby-on-rails - rails active admin interface : has_many - 从包含 has_many 的模型中选择，而不是从包含 belongs_to 的模型中选择

> ID：14211514
> 
> 赞同：0
> 
> 时间：2013-01-08T09:09:26.897
> 
> 标签：ruby-on-rails, ruby, activeadmin

我有这两个模型（jst示例来解释你）：

## 研究所.rb

名称类型：（如学校、学院）

rb 文件 :
attr_accessible :name, :type, :user_id属于_to
:user

## 用户.rb

姓名

rb 文件：
attr_accessible :name
has_many :institutes

从活动管理员中，我可以在创建或编辑机构时选择用户。但是，我想要做的是，在编辑或创建用户时，它应该显示一个选项来选择用户学习的尽可能多的机构。

概念：单个用户将在学校、学院学习。在创建用户的同时，我们应该可以选择他就读的所有机构。不必去他学习的每一个机构来选择他。

这只是一个例子，在我的例子中，一个机构可以容纳一个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:57:18.323

当用户被实例化时，通过构建机构（构建 2 个机构）为机构使用嵌套表单。当你用完研究所时，也可以使用 jquery 的东西来添加更多的研究所。

# twitter-bootstrap - 如何构建 Twitter 引导程序

> ID：14211515
> 
> 赞同：6
> 
> 时间：2013-01-08T09:09:27.033
> 
> 标签：twitter-bootstrap, makefile

我正在尝试从源代码构建 Bootstrap。当我尝试运行`make`命令时，它会引发以下错误。

```
Running JSHint on javascript...             â Done
/bin/sh: 1: recess: not found
make: *** [build] Error 127 
```

这是我到目前为止所做的

1.  克隆引导存储库`git clone git://github.com/twitter/bootstrap.git`
2.  安装 npm`apt-get intall npm`
3.  少安装`npm install -g less`
4.  安装 jshint`npm install -g jshint`
5.  安装制作`apt-get install make`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:58:35.397

由于 Twitter 的[代码指南](https://github.com/mdo/code-guide)，您缺少了让 CSS 代码保持[清洁](http://twitter.github.com/recess/)的包装器。

只需按照Bootstrap 源中的[README.md文件中的说明进行操作即可。](https://github.com/twitter/bootstrap/blob/master/README.md)请参阅“开发人员”[部分](https://github.com/twitter/bootstrap/blob/master/README.md#developers)（在官方[Bootstrap 站点](http://twitter.github.com/bootstrap/extend.html#compiling)中也有相同的信息）：

```
npm install recess connect uglify-js jshint -g 
```

# spring - 使用 Spring AOP，如何在异常发生时拦截它？

> ID：14211516
> 
> 赞同：0
> 
> 时间：2013-01-08T09:09:27.827
> 
> 标签：spring, exception, aop, intercept

像这样的一些代码：

```
public class A {

    @Autoware
    private B b;  

    public void a() {
        //AAA: some logic process that maybe throw exception
        b.b();
    }

}

public class B {

    public void b() {
        //BBB: some logic process maybe also throw exception
    }

} 
```

Aa() 和 Bb() 中的两个异常都需要被拦截，所以我使用 @AfterThrowing 注释来做到这一点。但问题是，当我在其他代码中调用 Aa() 并且 Bb() 中发生异常时，Advice 将执行两次！因为在 Bb() 中发生的异常正在传播给它的调用者 Aa()。

**我不能**默默地吞下异常，因为我使用spring-amqp，上面的代码在消费者端，我需要一些基于消费者发生的异常的消息处理。

@Around 也不起作用，因为我无法吞下抛出的异常。

那么，我怎样才能在异常发生时拦截它呢？忽略它的传播。

非常感谢任何回复。

# c# - 在VSpackage的ToolWindow中获取解决方案名称

> ID：14211525
> 
> 赞同：0
> 
> 时间：2013-01-08T09:09:45.567
> 
> 标签：c#, .net, visual-studio, envdte, vspackage

我是 Visual Studio 可扩展性框架的新手，可以使用 VSPackage 扩展。我想在 MyToolWindow 类中调用的用户控件中获取 DTE 对象。

我尝试了以下所有可能性：

1.`EnvDTE80.DTE2 dte2; dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0"); string solutionPath=dte2.Solution.FullName;`

上面的试验只给出了打开的视觉工作室的第一个实例的解决方案路径。对于 EX：如果打开 Math1.sln 和 Math2.sln，则只有 Math1.sln 路径分配给 solutionPath。

1.  从[MSDN](http://msdn.microsoft.com/en-us/library/bb165322%28v=vs.90%29.aspx)链接中，无法在 button1.click 中识别“this.GetService”（我在这里遗漏了什么）

一旦获得 DTE 对象，我就可以很容易地获得当前实例的解决方案名称。

我必须能够在单击用户控件内的按钮内获得适当的 EnvDTE80.DTE 对象。此用户控件在 MyToolWindow.cs 中调用

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:35:29.277

首先，这`Marshal.GetActiveObject("VisualStudio.DTE.10.0")`是有问题的，因为它只会给你`DTE`一个随机的 Visual Studio 实例。`DTE`您可以通过`GetService`调用获得正确的实例。然后只需枚举`DTE.Solution.Properties`，其中一个属性应该是解决方案名称。可能`DTE.Solution.Properties.Item("Name")`，尽管我目前无法检查。

至于您的“无法识别GetService”，方法是在`IServiceProvider`哪个`ToolWindowPane`实现上定义的。如果你想在你的控件中使用它，你应该将工具窗口实例传递给你的控件。例子：

```
public class MyToolWindow: ToolWindowPane {
    void SomeMethod() {
        var myControl = new MyControl(this);
    }
}

public class MyControl: UserControl {
    public MyControl(IServiceProvider serviceProvider) {
        // Now you can call serviceProvider.GetService
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:50:30.520

我在所有自制扩展中都使用了一个抽象的 VsPackage 类；我以这种方式获取应用程序实例......

```
using EnvDTE80;
using Microsoft.VisualStudio.Shell;
using Microsoft.VisualStudio.Shell.Interop;

public abstract class VsPackage : Package
{
    ...

    protected DTE2 GetApplication()
    {
        return this.GetService(typeof(SDTE)) as DTE2; 
    }

    ...
} 
```

# wordpress - 通过apache服务器上的IP地址访问子域

> ID：14211526
> 
> 赞同：0
> 
> 时间：2013-01-08T09:09:49.693
> 
> 标签：wordpress

我已经在当前驻留在未传播域上的子域上安装了 WordPress。（只能通过 IP 地址访问。）我是否可以通过 IP 访问任何已创建的子域，例如：subdomain.mysite.com/wp-admin，或者我必须等到域已经传播？

这是我的第一个问题，如果我没有充分解释我自己，我很抱歉。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:55:23.893

您可以使用`http://[IP]/~[username]/[domain.tld]/`通过 IP 访问您的站点。

`[IP]`您的服务器的 IP在哪里，并且`[username]`是您的托管站点的用户名。`[domain.tld]`是您在其上映射子域的文件夹的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:57:11.747

您可以使用匿名代理进行检查吗？

我使用[http://anonymouse.org/anonwww.html](http://anonymouse.org/anonwww.html)来检查网站，因为在澳大利亚通常需要更长的时间才能传播到这里。

**请注意：**您只能检查它的存在，您不会使用它通过后端进行站点修改。最好在域传播后完成。

希望这可以帮助 ;）

# iphone - 在 Objective-C 上缩放 UIScrollview

> ID：14211527
> 
> 赞同：2
> 
> 时间：2013-01-08T09:09:53.443
> 
> 标签：iphone, objective-c, uiscrollview, zooming

在我正在进行的一个项目中，我有一个`UIScrollView`有很多按钮和标签的按钮和标签，这些按钮和标签类似于电影院座位，用户可以点击它们来选择座位供他们购买。可以缩放`UIScrollView`吗？我已经声明了`UIScrollViewDelegate`，将 设置`delegate`为 self ，设置了最小和最大缩放比例，但是我遇到了`viewForZoomingInScrollView`和`scrollViewDidEndZooming`方法的问题。我试图在该`viewForZoomingInScrollView`方法上返回我的滚动视图，但它崩溃了。

这是一些代码：

```
- (void) renderSeatMapOnScreen
{    
    int x_offset_row = 10;
    int y_offset_row = 25;
    int x_offset_col = 30;
    int y_offset_col = 0;
    int scrollview_w = 0;
    int scrollview_h = 0;

    NSString *row_name = @"";
    int tag_index  = 0;

    NSMutableArray *seat_map_table = [seat_map_xml seats_map]; 
    NSString *seat_available_str = [seat_avail_xml seat_available];

    HideNetworkActivityIndicator();

    NSLog(@"Seats available = %@", seat_available_str);

    NSArray *seats_avail = [seat_available_str componentsSeparatedByString:@";"];

    int ROW_COL_OFFSET = 25;

    for (int row = 0; row < [seat_map_table count]; row++)
    {
        UILabel * rowlabel = [[UILabel alloc] init];
        rowlabel.frame = CGRectMake(x_offset_row , y_offset_row, 22, 22);

        SeatMapDeclaration *rowmap = [seat_map_table objectAtIndex:row];
        rowlabel.text = rowmap.rows;
        [scrollview addSubview:rowlabel];

        row_name = [NSString stringWithFormat:@"%@", rowmap.rows];

        NSArray *seat = [rowmap.rowmap componentsSeparatedByString:@";"];
        NSLog(@"row[%i] = %@", row, rowmap.rowmap);

        if (row == 0)
        {
            scrollview_w = [seat count] * ROW_COL_OFFSET + y_offset_row;
            total_column = [seat count];
            total_row = [seat_map_table count];
        }

        x_offset_col = 30 ;
        y_offset_col = y_offset_row ;

        for (int column = 0; column < [seat count]; column++)
        {
            if (([[seat objectAtIndex:column] rangeOfString:@"a("].location != NSNotFound)
               || ([[seat objectAtIndex:column] isEqualToString:@""]))
            {
                CGRect myImageRect = CGRectMake(x_offset_col, y_offset_col, 22, 22);
                UIImageView *imageView = [[UIImageView alloc] initWithFrame:myImageRect];
                [imageView setImage:[UIImage imageNamed:@"noseat.png"]];
                [scrollview addSubview:imageView];
            }
            else if ([[seat objectAtIndex:column] rangeOfString:@"b("].location != NSNotFound)
            {
                CGRect myImageRect = CGRectMake(x_offset_col, y_offset_col, 22, 22);
                UIImageView *imageView = [[UIImageView alloc] initWithFrame:myImageRect];
                imageView.image = [UIImage imageNamed:@"noseat.png"];
                [scrollview addSubview:imageView];
            }
            else
            {
                NSString *status = [NSString stringWithFormat:@"%@%@", row_name, [seat objectAtIndex:column]];

                BOOL matchedFound = NO;
                for (int i = 0; i < [seats_avail count]; i++)
                {
                    if ([[seats_avail objectAtIndex:i] isEqualToString:status])
                    {
                        matchedFound = YES ;
                        break ;
                    }
                }

                if (matchedFound == YES)
                {
                    UIButton * seat_btn = [UIButton buttonWithType:UIButtonTypeCustom];
                    [seat_btn setBackgroundImage:[UIImage imageNamed:@"seatavailable.png"] forState:UIControlStateNormal];
                    [seat_btn setBackgroundImage:[UIImage imageNamed:@"seatactive.png"] forState:UIControlStateSelected];
                    seat_btn.frame = CGRectMake(x_offset_col, y_offset_col, 22, 22);
                    tag_index = [[seat objectAtIndex:column] intValue];
                    [seat_btn setTitle:[seat objectAtIndex:column] forState:UIControlStateNormal];
                    seat_btn.titleLabel.font = [UIFont fontWithName:@"Helvetica" size:12.0];
                    seat_btn.tag = tag_index + row * 100;
                    [seat_btn addTarget:self
                                 action:@selector(checkboxButton:)
                       forControlEvents:UIControlEventTouchUpInside];
                    [scrollview addSubview:seat_btn];

                }
                else
                {
                    CGRect myImageRect = CGRectMake(x_offset_col, y_offset_col, 22, 22);
                    UIImageView *imageView = [[UIImageView alloc] initWithFrame:myImageRect];
                    imageView.image = [UIImage imageNamed:@"seat_not_available.png"];
                    [scrollview addSubview:imageView];
                }
            }

            x_offset_col += ROW_COL_OFFSET ;

            NSString *data = @"";
            [seatControl addObject:data];
        }
        y_offset_row += ROW_COL_OFFSET;
    }

    UILabel *screenlabel = [[UILabel alloc] init];
    screenlabel.frame = CGRectMake((scrollview_w-300)/2, 3, 300, 15);
    screenlabel.text = @"Screen";
    screenlabel.backgroundColor = [UIColor blackColor];
    screenlabel.textColor = [UIColor whiteColor] ;
    screenlabel.font = [UIFont fontWithName:@"Helvetica" size:10.0];
    screenlabel.textAlignment = UITextAlignmentCenter;
    [scrollview addSubview:screenlabel];

    scrollview_h = y_offset_row + ROW_COL_OFFSET;
    // Adjust scroll view
    [scrollview setContentSize:CGSizeMake(scrollview_w, scrollview_h )];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    NSLog(@"1");

    return scrollview;
}

- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
    NSLog(@"2");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:24:25.820

在：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
  NSLog(@"1");

  return scrollview;
} 
```

你不应该返回它`UIScrollView`本身，而是你想要滚动/缩放的子视图。

如果您有很多子视图，我建议为您返回的所有子视图创建一个容器视图`viewForZoomingInScrollView`；而不是将您的座位添加到滚动视图本身，然后将它们添加到容器视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:19:43.547

如果你想放大到某个座位中`UIScrollView`，你应该使用[`zoomToRect: animated:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/zoomToRect%3aanimated%3a)。您可以指定要放大到的某个矩形（即座位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:35:41.540

缩放仅在您实现 viewForZoomingInScrollView: 委托回调时有效。

```
UIImageView *tempImage = [[UIImageView alloc]initWithImage:[UIImage imageWithData:data]];
self.imageView = tempImage;

scrollView.contentSize = CGSizeMake(imageView.frame.size.width , imageView.frame.size.height);
scrollView.maximumZoomScale = 1;
scrollView.minimumZoomScale = .37;
scrollView.clipsToBounds = YES;
scrollView.delegate = self;
[scrollView addSubview:imageView];
scrollView.zoomScale = .37;

-(UIView *) viewForZoomingInScrollView:(UIScrollView *)inScroll {
  return imageView;
} 
```

# python - 我可以使用 os.mkdir() 在运行时创建具有动态名称的目录吗？

> ID：14211532
> 
> 赞同：3
> 
> 时间：2013-01-08T09:10:15.743
> 
> 标签：python, python-2.7

我必须通过几个请求从网上下载文件。每个请求的下载文件必须放在与请求编号同名的文件夹中。

例如：

我的脚本现在正在运行以下载请求号 87665 的文件。所以所有下载的文件都将放在目标文件夹`Current Download\Attachment87665`中。那么我该怎么做呢？

到目前为止我已经尝试过：

```
my_dir = "D:\Current Download"
my_dir = os.path.expanduser(my_dir)
if not os.path.exists(my_dir):
    os.makedirs(my_dir) 
```

但它不符合我原来的要求。知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T09:13:53.283

只需事先创建一条路径，通过[`os.path.join`](http://docs.python.org/2/library/os.path.html#os.path.join)：

```
request_number = 82673

# base dir
_dir = "D:\Current Download"       

# create dynamic name, like "D:\Current Download\Attachment82673"
_dir = os.path.join(_dir, 'Attachment%s' % request_number)

# create 'dynamic' dir, if it does not exist
if not os.path.exists(_dir):
    os.makedirs(_dir) 
```

# extjs - 商店未加载到 sencha touch

> ID：14211538
> 
> 赞同：1
> 
> 时间：2013-01-08T09:10:26.770
> 
> 标签：extjs, sencha-touch

我正在使用下面的代码来存储来自 ajax 请求的数据，但它没有在商店中装载数据，所以请让我知道我做错了什么。

这是我的商店课程：

```
 Ext.define("Por.store.Notes", {
    extend: "Ext.data.Store",
        config: {
     storeId: 'Notes',
        model: "Por.model.Note",

    }
}); 
```

这是我的模型课：

```
 Ext.define("Por.model.Note", {
    extend: "Ext.data.Model",
    config: {
        idProperty: 'id',
        fields: [
            { name: 'id', type: 'string' },
            { name: 'content_name', type: 'string' },
            { name: 'kind', type: 'string' },
            { name: 'company_name', type: 'string' },
         { name: 'note', type: 'string' },
            { name: 'attext', type: 'string' },
            { name: 'cid', type: 'string' },
            { name: 'category', type: 'string' },
         { name: 'file_extension', type: 'string' },
            { name: 'mime_image', type: 'string' },
            { name: 'ciid', type: 'string' },
            { name: 'citem_name', type: 'string' },
         { name: 'attach', type: 'string' },
            { name: 'cryptic', type: 'string' },
            { name: 'url', type: 'string' },
            { name: 'is_socialsites_share_ok', type: 'string' },
         { name: 'skey', type: 'string' },
            { name: 'lookup_id', type: 'string' },
            { name: 'lookup_kind_name', type: 'string' },
            { name: 'rid', type: 'string' },
         { name: 'content', type: 'string' },
            { name: 'clip_wm', type: 'string' },
            { name: 'vid_wm', type: 'string' },
            { name: 'flash_clip', type: 'string' },
         { name: 'module_num', type: 'string' },
            { name: 'itemtype', type: 'string' }
        ],

    }
}); 
```

这是我正在触发的 ajax 请求：

```
 Ext.Ajax.request({
            url: url,
            scope: this,
         callback: callbackFn

           success: function(response) {

                 var responseData = Ext.JSON.decode(response.responseText);
                 var store = Ext.getStore('Notes');
           store.setData(responseData);
           store.sync();    

            },

    failure:function(response){
        alert(response.status);
    }
        }); 
```

这是我的看法：

```
Ext.define("Por.view.NotesListContainer", {
    extend: "Ext.Container",
    alias: "widget.noteslistcontainer",

    initialize: function () {

        this.callParent(arguments);

        var notesTitle = {
        xtype: 'panel',
           html:'<div style = " text-align:center; padding-top:10px;" >First Data</div>'
        };

        var notesData = {
        xtype: 'panel',
           html:'<div style = " padding-left:15px;">Personalized Content for ARP</div>'
        }; 
```

这是我的列表视图：

```
 var notesList = {
            xtype: "noteslist",
            store: Ext.getStore("Notes"),
            listeners: {
                itemtap: { fn: this.onNotesListDisclose, scope: this }
            }
        };

        this.add([notesTitle,notesData, notesList]);
    },
    onNewButtonTap: function () {
        console.log("newNoteCommand");
        this.fireEvent("newNoteCommand", this);
    },
    onNotesListDisclose: function(dv, index, item, record) {
        console.log("editNoteCommand");
        this.fireEvent('editNoteCommand', this, record);
    },
    config: {
        layout: {
            type: 'vbox'
        }
    }
});

Ext.define("Por.view.NotesList", {
    extend: "Ext.dataview.List",
    alias: "widget.noteslist",
    config: {
        loadingText: "Loading Notes...",
        emptyText: "<div class=\"notes-list-empty-text\">No notes found.</div>",
        onItemTap: true,
        itemTpl:'<div ><div style="font-size:14px;color: #5090D0;font-weight:bold;">{content_name}</div><div style = 

"clear:both;"></div></div><div><p style="font-size:12px;"> <span style="font-weight:bold;font-size:14px;"><b>Type:  </b></span> {company_name} 

</p></div><div><p style="font-size:12px;"><span style="font-weight:bold;font-size:14px;border:1px solid red;">Account:  </span> 

{lookup_kind_name} </p></div></div>'        
    }
}); 
```

这是json数据：

```
{
"data": [{
    "id": "56636",
    "content_name": "Ray Zor interview",
    "kind": "0",
    "company_name": "The Gillette Company",
    "note": "<b>Business Problem<\/b> d\r\n* Inadequate collaboration infrastructure\r\n* 100% year over year growth\r\n* Lost sales due to service issues \r\n\r\n<b>Solution<\/b>\r\n* Apollo suite v7 with Oracle add-in\r\n* AppAccelerator for SQL\r\n* Solution Consulting engagement\r\n\r\n<b>Results<\/b>\r\n* 30% in time to market process\r\n* 25% improvement in customer sat scores\r\n* Better utilization of existing IT staff",
    "attext": null,
    "cid": null,
    "category": "Listen",
    "file_extension": "rref",
    "mime_image": null,
    "ciid": null,
    "citem_name": null,
    "attach": null,
    "cryptic": "48737f98c5172",
    "url": null,
    "is_socialsites_share_ok": null,
    "skey": null,
    "lookup_id": "-1",
    "lookup_kind_name": "Recorded Audio Reference",
    "rid": "56636",
    "content": "a wma is loaded to this topic",
    "clip_wm": "48738147342c1.wma",
    "vid_wm": "",
    "flash_clip": "",
    "module_num": 0,
    "itemtype": "listen"
}]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:30:41.057

你还没有定义`proxy`和`reader`for `Por.store.Notes`。定义这些配置，如 -

```
Ext.define("Por.store.Notes", {
    extend: "Ext.data.Store",
    config: {
        storeId: 'Notes',
        model: "Por.model.Note",
        proxy: {
            type: "ajax",
            url : url,
            reader: {
                type: "json",
                rootProperty: "data"
            }
        }
    }        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:25:40.537

要么放在`autoLoad: true`店里

或者

```
store.load({
    callback: function(records, operation, success) {
        // the operation object contains all of the details of the load operation
        console.log(records);
    },
    scope: this
}); 
```

# django - Django：QuerySet 对象没有属性

> ID：14211551
> 
> 赞同：0
> 
> 时间：2013-01-08T09:11:05.300
> 
> 标签：django, views, attributeerror

`AttributeError: 'QuerySet' object has no attribute 'ratings'`在我看来，当我试图做这样的事情时，我得到了一个：

```
def index(request):
    thing_list = Thing.ratings.cumulative_score()
    return render(request, 'index.html', {'thing_list':thing_list}) 
```

我的模型：

```
from ratings.models import Ratings

class Thing(models.Model):
    user = models.ForeignKey(User)
    ...
    rating = Ratings() 
```

在使用[django-simple-ratings](https://github.com/coleifer/django-simple-ratings)应用程序时。该[链接](https://github.com/coleifer/django-simple-ratings/blob/master/ratings/models.py#L206)引用`cumulative_score`了该模块中定义的位置。如何使用累积分数？谢谢你的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:24:22.777

您已`ratings`在视图中引用，但将 manager 属性定义为`rating`(no 's')。

# android - Android SlidingMenu 将适配器添加到菜单

> ID：14211555
> 
> 赞同：1
> 
> 时间：2013-01-08T09:11:25.153
> 
> 标签：android, android-menu

我正在与专业人士合作[`Sliding Menu`](https://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=https://github.com/jfeinstein10/SlidingMenu&ei=jN_rUJOJNMmE4ASOoIC4BQ&usg=AFQjCNER7vbHLh9TiZOQ-uzShLNvJoP86A&bvm=bv.1357316858,d.bGE)，需要专业人士的帮助！我想用`ListView`适配器添加到菜单（布局）。我看到了演示应用程序，它构建于`Fragment`，但我的应用程序`extends SlidingActivity`和我无法理解如何操作`MenuView`

**MainActivity.class**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // MainView, MenuView
    setContentView(R.layout.main);
    setBehindContentView(R.layout.main_menu);

    //SlidingMenu
    mMainMenu = (ListView) findViewById(R.id.main_menu);
    mMenuAdapter = new MenuAdapter(this, R.id.menu_adapter_title);
    mMainMenu.setAdapter(mMenuAdapter);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:47:00.457

我找到了答案，它仅适用于 ArrayAdapter！如果有帮助，那就是我的代码

```
private void populate() {

    ListView lv = (ListView) findViewById(R.id.main_menu);
    String[] menu = {"Главная","Кино","Театры","Вечеринки","Концерты","Выставки","Рестораны","Магазины","Фотографии","Каталог","Погода"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.main_menu_adapter, R.id.menu_adapter_title, menu);
    lv.setAdapter(adapter);

} 
```

然后调用它`setBehindContentView`

# ms-access - 仅在 MS Access 2003 报告中打印非空字段

> ID：14211563
> 
> 赞同：1
> 
> 时间：2013-01-08T09:11:58.323
> 
> 标签：ms-access

我正在尝试生成一个报告，其来源是一个表单，并且只打印不为空的字段。

为此，我为每个字段设置了两个文本框。它们都是可调整大小的（可以缩小/增长）。第一个文本框用于标题，其来源是

```
=IIf([record] Is Null,"","Caption:") 
```

第二个是记录值本身。如果记录为空，则两个文本框的值都是“”和空，它们不会出现，也不会在表单中占用任何空间。

两个问题：

1.  这似乎不是最聪明的方法。有人有更好的主意吗？
2.  该报告还包含复选框，并且此方法仅在我在生成报告之前选中/取消选中至少一个复选框时才有效。否则无论如何都会出现所有字幕。这很奇怪——有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:33:54.933

这仅适用于打印预览，而不适用于 MS Access 2010 报告或布局视图。您将需要控制上的 Can Shrink 来缩小差距。在 Access 2010 中，“*_Label”是分配给控件标签的默认名称。

```
Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)
Dim ctl As Control

    For Each ctl In Me.Controls
        If ctl.ControlType = acLabel And ctl.Name Like "*_Label" Then
            ctl.Visible = Not IsNull(ctl.Parent)

            ''Bound checkboxes are never null, so hide false
            If ctl.Parent.ControlType = acCheckBox Then
                ctl.Visible = ctl.Parent
                ctl.Parent.Visible = ctl.Parent
            End If

        End If
    Next

End Sub 
```

# perl - 在 perl 中使用代码块进行警告和打印的奇怪行为

> ID：14211570
> 
> 赞同：1
> 
> 时间：2013-01-08T09:12:11.020
> 
> 标签：perl

程序：testblocks.pl

```
#!/usr/bin/perl
use strict;
use warnings;

print "Hi";

BEGIN {
        warn "BEGIN";
}
END {
        warn "END";
}
INIT {
        warn "INIT";
}
CHECK {
        warn "CHECK";
}
UNITCHECK {
        warn "UNITCHECK";
}

print "Hello"; 
```

输出：

```
BEGIN at testblocks.pl line 8\. 
CHECK at testblocks.pl line 17\. 
INIT at testblocks.pl line 14\. 
UNITCHECK at testblocks.pl line 20\. 
END at testblocks.pl line 11\. 
HiHello 
```

现在，如果我`\n`在下面的打印语句中使用

```
print "Hi\n";
...
print "Hello\n"; 
```

输出是：

```
BEGIN at testblocks.pl line 8.
CHECK at testblocks.pl line 17.
INIT at testblocks.pl line 14.
Hi 
UNITCHECK at testblocks.pl line 20.
Hello 
END at testblocks.pl line 11. 
```

我无法理解这里的问题。任何意见或建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:15:43.827

它看起来像一个打印缓冲区问题。当您在打印中包含换行符时，缓冲区会立即刷新。在您的第一种情况下，如果没有换行符，它们会在它们已满或程序退出时被刷新。

正如[dgw](https://stackoverflow.com/users/1137055/dgw)评论的那样，由于`warn`转到 STDERR 并打印到 STDOUT，它们也不在同一个缓冲区中。

# wso2 - WS02 BAM - 小工具生成工具

> ID：14211572
> 
> 赞同：1
> 
> 时间：2013-01-08T09:12:23.987
> 
> 标签：wso2, wso2bam

我按照[教程](http://docs.wso2.org/wiki/display/BAM200/Gadget+Generation+Tool)在 WSO2 BAM 版本 2.0.1 中创建简单小工具。在这个版本中，如教程所示，我可以看到

1.条形图

2.表格由小工具生成工具支持。

只是想知道小工具生成工具支持其他图表，如饼图、直方图等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:12:43.023

目前，小工具生成工具仅支持条形图和表格。但是您可以使用您喜欢的所有 UI 组件创建自己的[BAM 仪表板。](http://docs.wso2.org/wiki/display/BAM200/BAM+Dashboard)BAM 仪表板的错误修复版本可从 BAM 2.0.1 获得。你也可以试一试。

# python - 任何获取“data_files”根目录的python函数？

> ID：14211575
> 
> 赞同：28
> 
> 时间：2013-01-08T09:12:30.383
> 
> 标签：python, setup.py

对于使用“setup.py”构建安装包的开发人员来说，这应该是一个非常常见的问题，之前应该问过这个问题，但我在任何地方都找不到正确的答案。

在 setup.py

```
from distutils.core import setup
setup(
    ....,
    ....,
    data_files=[('MyApp/CBV', ['myapp/data/CBV/training.cbv', 'myapp/data/CBV/test.cbv'])],
    ....,
    ....,
    ) 
```

sudo python setup.py install 的结果

```
running install
running build
running build_py
running build_scripts
running install_lib
running install_scripts
changing mode of /usr/local/bin/MyApp_trainer to 755
changing mode of /usr/local/bin/MyApp_reference_updater to 755
changing mode of /usr/local/bin/MyApp_predictor to 755
changing mode of /usr/local/bin/reference_updater to 755
running install_data
creating /usr/local/MyApp/CBV
copying MyApp/data/CBV/training.cbv -> /usr/local/MyApp/CBV
copying MyApp/data/CBV/test.cbv -> /usr/local/MyApp/CBV
running install_egg_info
Removing /usr/local/lib/python2.7/dist-packages/MyApp-0.1.0.egg-info
Writing /usr/local/lib/python2.7/dist-packages/MyApp-0.1.0.egg-info 
```

使用上面的结果观察，“/usr/local”是“data_files”根目录。除了硬编码之外，是否有任何 Python 函数可以给我这个“data_files”根目录？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T09:14:34.827

默认情况下，当以 root 身份安装包时，列表中的*相对*目录名称将根据（对于纯 Python 库）或（对于具有已编译扩展名的库）`data_files`的值进行解析，因此您可以根据该值检索文件. 从[文档](https://docs.python.org/3/distutils/setupscript.html#installing-additional-files)中引用：[`sys.prefix`](http://docs.python.org/3/library/sys.html#sys.prefix)[`sys.exec_prefix`](http://docs.python.org/3/library/sys.html#sys.exec_prefix)[`distutils`](https://docs.python.org/3/distutils/setupscript.html#installing-additional-files)

> 如果*directory*是相对路径，则相对于安装前缀进行解释（Python`sys.prefix`用于纯 Python 包，`sys.exec_prefix`用于包含扩展模块的包）。

因此，对于您的示例，您将在`os.path.join(sys.prefix, 'MyApp', 'CBV')`.

但是，最好使用该[`importlib.resources`库](https://docs.python.org/3/library/importlib.html#module-importlib.resources)（Python 3.7 及更高版本）来加载包数据。您确实希望软件包中包含您的数据文件，以使其发挥最佳作用。这意味着您*不会*使用`data_files`，而是在 MANIFEST.in 文件和 set`include_package_data=True`中列出文件模式，或者在 中列出文件模式`package_data`，请参阅在 setuptools 文档中[*包含数据文件。*](https://setuptools.readthedocs.io/en/latest/setuptools.html#including-data-files)

对于早期的 Python 版本，您可以使用[`pkg_resources`模块资源 API](https://setuptools.readthedocs.io/en/latest/pkg_resources.html#resourcemanager-api)执行相同的操作来加载数据文件（它是`setuptools`库的一部分，为此目的）。

然后，您可以直接从包中将此类资源文件加载到字符串中`resource_string()`，例如：

```
try:
    from importlib.resources import read_text
except ImportError:
    from pkg_resources import resource_string as read_text

foo_config = read_text(__name__, 'foo.conf') 
```

# pdf - 是否有允许将 FDF 合并到 PDF 并支持 Javascript 计算字段的 API 或 SDK？

> ID：14211581
> 
> 赞同：3
> 
> 时间：2013-01-08T09:13:18.337
> 
> 标签：pdf, fdf

我们有一个程序，它通过将 FDF 文件中的数据与 PDF“模板”合并，然后展平表单域以创建最终的 PDF 文档来生成 PDF。除了一件事之外，CutePDF 没有问题......

其中一个模板有一个计算日期字段，当 PDF 更新时，该字段由少量 Javascript 设置。但是，CutePDF 不支持 PDF 文档中的 Javascript。

我研究过其他产品，但功能列表中很少提及 APi 是否支持 Javascript 计算字段。

有谁知道允许将 FDF 合并到 PDF 并且还支持 Javascript 计算字段的 API 或 SDK？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:43:14.127

我自己的调查结果：

*   [CutePDF](http://www.cutepdf.com/Solutions/FormSDK2.asp)：将 FDF 合并到 PDF，但不支持计算字段
*   [Debenu 快速 PDF 库](http://www.quickpdflibrary.com/products/quickpdf/index.php)：既不是 FDF 也不是计算字段
*   [PDF-XChange Viewer Pro](http://www.tracker-software.com/product/pdf-xchange-viewer-pro-sdk)：支持 Javascript 但不支持 FDF，虽然支持非常有用
*   [PDFExpress](http://www.accusoft.com/pdfxpress.htm)：支持 XFDF（仅注释）但不支持 FDF
*   Adobe PDF 库（通过 Datalogics）：完全难以理解，不支持任何一个选项
*   Adobe PDF 库（通过 Adob​​e）：没有回答询问

# c# - 条形图系列回发查询

> ID：14211583
> 
> 赞同：2
> 
> 时间：2013-01-08T09:13:27.220
> 
> 标签：c#, asp.net, charts

我对回发属性有疑问。我有一个图表（下面的代码），其中包含从数据源中提取的三个系列。

all series display fine but I've enabled the bars in the chart to respond to the click event and when items from the first series is selected, everything works fine. 但是，我尝试提取第二个或第三个系列的 x 值，这应该是 x 轴上的值，但我得到的只是 0。有人有任何解决方案吗？

谢谢。

```
<asp:Chart ID="CTStatusCategory" runat="server" DataSourceID="DSLegislationCodeSummary" 
        BackColor="#FAEBD7" onclick="CTStatusCategory_Click">
        <Series>
            <asp:Series Name="Pending with Authority" XValueMember="LegislationCategoryCode" 
                YValueMembers="P" PostBackValue="#VALX,#VALY" IsValueShownAsLabel="true"  ChartType="StackedColumn" YAxisType="Primary" ToolTip="#SERIESNAME : #VALY" >
            </asp:Series>
            <asp:Series Name="Yes" XValueMember="LegislationCategoryCode" YValueMembers="Y" ChartType="StackedColumn" IsValueShownAsLabel="true" PostBackValue="#VALX,#VALY" ToolTip="#SERIESNAME : #VALY">
            </asp:Series>                 
            <asp:Series Name="In-Progress" XValueMember="LegislationCategoryCode" YValueMembers="I" ChartType="StackedColumn" IsValueShownAsLabel="true" PostBackValue="#VALX,#VALY" ToolTip="#SERIESNAME : #VALY">
            </asp:Series>
        </Series>
         <ChartAreas>
            <asp:ChartArea Name="ChartArea1" Area3DStyle-Enable3D="false" >
                <AxisX LineColor="DarkGray">
                    <MajorGrid LineColor="LightGray" />
                </AxisX>
                <AxisY LineColor="DarkGray">
                    <MajorGrid LineColor="LightGray" />
                </AxisY>
                <Area3DStyle Enable3D="True" WallWidth="5" LightStyle="Realistic"></Area3DStyle>
                 <Position Height="80" Width="100" X="0" Y="20" />
            </asp:ChartArea>
            </ChartAreas>
            <Legends>
                <asp:Legend BackColor="#FAEBD7" >
                </asp:Legend>
            </Legends>
    </asp:Chart> 
```

C# 代码

```
protected void CTStatusCategory_Click(object sender, ImageMapEventArgs e)
    {
        String dd = e.PostBackValue;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T12:54:46.870

我有一个堆积柱形图，当单击底部项目以外的任何堆栈项目时，PostBackValue 总是返回“0”。底部项目似乎按预期返回#VALX。将 PostBackValue 从 #VALX 更改为 #AXISLABEL 解决了这个问题。

# ant - Ant，Sonar - 0% 的代码覆盖率

> ID：14211584
> 
> 赞同：2
> 
> 时间：2013-01-08T09:13:30.100
> 
> 标签：ant, sonarqube

我对蚂蚁声纳任务有疑问。此任务以成功结束，但不运行单元测试并且不显示代码覆盖率。

测试任务

```
 <target name="test" depends=".....">
    <path id="classpath">
        <fileset dir="test/lib" includes="**/*.jar"/>
        <fileset dir="lib" includes="**/*.jar"/>
        <pathelement location="......."/>
    </path>

    <mkdir dir="build/tests"/>
    <javac srcdir="test/src" destdir="build/tests" includes="**/*.java" debug="${debug}" deprecation="${deprecation}" optimize="${optimize}" nowarn="${nowarn}" fork="true">
        <classpath refid="classpath"/>
    </javac>
    <copy todir="build/tests">
        <fileset dir="test/src" excludes="**/*.java"/>
    </copy>

<jacoco:coverage destfile="target/jacoco.exec" xmlns:jacoco="antlib:org.jacoco.ant">
     <junit printsummary="yes" fork="true" haltonfailure="false" showoutput="true" failureproperty="test.failed">
            <formatter type="xml"/>
         <classpath refid="classpath"/>
            <classpath>
                <pathelement location="build/tests"/>
         </classpath>
            <test name="com........MainTestSuite" todir="build"/>
     </junit>
</jacoco:coverage>
    <fail message="Test failure detected, check test results." if="test.failed"/>
</target> 
```

和声纳任务：

```
<target name="sonar" depends="build">
    <property name="sonar.tests" value="test" />
    <property name="sonar.libraries" value="" />
    <property name="sonar.surefire.reportsPath" value="sonarWorkDir" />

    <!-- The following properties are required to use JaCoCo: -->
    <!-- 1\. Tells Sonar to run the unit tests -->
    <property name="sonar.dynamicAnalysis" value="true" />
    <!-- 2\. Tells Sonar which "tests" targets to run -->
    <property name="sonar.jacoco.antTargets" value="test" />
    <!-- 3\. Tells Sonar to use JaCoCo as the code coverage engine -->
    <property name="sonar.core.codeCoveragePlugin" value="jacoco" />

    <!-- Execute Sonar -->
    <sonar:sonar key="${JOB_NAME}" version="${VERSION}" xmlns:sonar="antlib:org.sonar.ant">
        <sources>
            <path location="...../src" />
        </sources>

         <binaries>
            <path location="build/....." />
        </binaries>

    </sonar:sonar>
</target> 
```

在声纳任务运行之前，我收到警告 10:00:20.290 WARN ospjJaCoCoPlugin - 未收集覆盖信息。也许您忘记在编译的类中包含调试信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:38:22.470

我建议你：

*   使用最新版本的 Sonar Ant 任务（从我在您的脚本中可以看到，您使用的是旧语法）

*   查看我们的[示例 Ant 项目](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant)以找出您的问题所在。最有可能的是，您正在寻找以下示例：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant/ut-ant-jacoco-runTests](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant/ut-ant-jacoco-runTests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T18:17:07.940

有点晚了，但我最近才遇到这个问题，在互联网上找不到简单的解决方案。相反，为了解决它，我只是听取了堆栈跟踪的建议。`Coverage information was not collected. Perhaps you forget to include debug information into compiled classes?`

然后回到我的 ant 文件并确保源文件（不是测试）正在调试模式下编译。显然，jacoco 插件需要额外的信息（如行号）来计算代码覆盖率。更改 ant 文件后，您最终应该会在声纳中看到代码覆盖率。

```
<javac srcdir="${source.dir}" target="1.6" source="1.6" destdir="${build.classes.dir}" debug="on">
    ...
</javac> 
```

此外，请确保包含以下声纳属性：

```
sonar.binaries=build/classes
sonar.tests=junit/tests
sonar.dynamicAnalysis=reuseReports
sonar.junit.reportsPath=build/test-reports
sonar.java.coveragePlugin=jacoco
sonar.jacoco.reportPath=build/test-reports/jacoco.exec 
```

因此，您可能想要删除`sonar.antTargets`并将`sonar.dynamicAnalysis`' 值更改为`reuseReports`

# java - 如何验证连接池返回的连接对象？

> ID：14211586
> 
> 赞同：1
> 
> 时间：2013-01-08T09:13:32.423
> 
> 标签：java, jdbc, jboss, connection-pooling

我正在对 JBOSS AS.Code 中配置的数据源进行 jndi 查找，如下所示。

> 初始上下文 = 新初始上下文（道具）；
> 
> dataSource = (DataSource)initialContext.lookup(bundle.getString("jndiName"));
> 
> 连接 = dataSource.getConnection();

这段代码放在 servlet 的 doPost 中。我也安全地打电话

> 连接.close()

使用连接对象后。

我的数据源配置有以下条目

```
<min-pool-size>1</min-pool-size>
<max-pool-size>1</max-pool-size> 
```

根据我对连接池的理解，每次我向 servlet 发出请求时，`datasource .getConnection()`调用都会返回相同的连接对象（因为我已将最小和最大池大小指定为 1，并且调用关闭并不会完全关闭数据库连接）。

现在我如何验证是否返回了相同的连接对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:26:27.267

你实际上不能确定它是同一个连接。可能与数据库连接有问题，因此必须创建另一个连接。为什么要验证连接？也许你可以保存哈希值并比较它们？

# ruby-on-rails-3 - Rails 的 Apache 重写规则

> ID：14211587
> 
> 赞同：1
> 
> 时间：2013-01-08T09:13:34.940
> 
> 标签：ruby-on-rails-3, apache

我试图在 apache 中重写一个 url，但它没有像我预期的那样工作。这是我在本地环境中定义的方式

```
 Allow from all
  Satisfy Any
  RewriteEngine On
  RewriteOptions Inherit
  RewriteRule ^(.*/)?email/?$ /api/v1/email [R=permanent,L] 
```

我在路径中的 mycompany.conf 文件中定义了这个重写条件

/etc/apache2/其他

即将到来的网址是“POST /items/50d42529dbc38e3d580002ff/email HTTP/1.1”500 18750

我想将 /email 重定向到另一个路径，例如 /api/v1/email

我已经为 /items/50d42529dbc38e3d580002ff/email 定义了一个 Rails 路由路径，如下所示

匹配 'items/:id/email' => 'items#email', :as => :email_item, :via => :post

我的问题是基于重写规则，它应该转到 api/v1/path 并且不应该转到我在路由中定义的 rails 路径。它不像我想的那样工作。

我想知道我的重写规则是否正确，而且我没有在 .httaccess 文件中定义。我包含了 mycompany.conf 文件 httpd.conf 所以我认为它没有问题。

请在这个问题上帮助我。提前致谢。

# hibernate - 检查另一个 Set 中的 Set 是否包含对象

> ID：14211588
> 
> 赞同：0
> 
> 时间：2013-01-08T09:13:35.300
> 
> 标签：hibernate, hibernate-criteria

我有一个与此类似的数据模型：

```
class User { public long id; }
class UserGroup { public Set<User> members; }
class UserGroupAccess { public String access; public UserGroup userGroup; }

class Document {
  public User owner;
  public String publicAccess;
  public Set<UserGroupAccess> userGroupAccessses;
} 
```

逻辑是这样的：

```
1\. If owner = user then allow access
2\. If publicAccess ilike r% allow access
3\. If on of the userGroupAccesses have access ilike r%
    AND the user is in the userGroup attached to it, then allow access 
```

我目前的查询是：

```
criteria.createAlias( "userGroupAccesses", "u" );
Disjunction root = Restrictions.disjunction();
root.add( Restrictions.ilike( "publicAccess", "r%" ) );
root.add( Restrictions.eq( "owner", currentUser ) );

Conjunction ugAccess = Restrictions.conjunction();
ugAccess.add( Restrictions.ilike( "u.access", "r%" ) );
root.add( ugAccess );

criteria.add( root ); 
```

这几乎给了我我想要的，期待检查附加到你的用户组是否包含当前用户。

我一直在尝试不同的方法，例如：

```
criteria.createAlias( "u.userGroup.members", "member" );
ugAccess.add( Restrictions.eq("member", currentUser) ); 
```

但这不起作用。

有什么想法我应该在这里调查吗？

更新：使用 JB Nizet 概述的方法，我得到了这个：

```
criteria.createAlias( "userGroupAccesses", "u" );
criteria.createAlias( "u.userGroup", "ug" );
criteria.createAlias( "ug.members", "member" );

Disjunction root = Restrictions.disjunction();
root.add( Restrictions.ilike( "publicAccess", "r%" ) );
root.add( Restrictions.eq( "user", currentUser ) );

Conjunction ugAccess = Restrictions.conjunction();
ugAccess.add( Restrictions.ilike( "u.access", "r%" ) );
ugAccess.add( Restrictions.eq( "member.uid", currentUser.getUid() ) );
root.add( ugAccess );

criteria.add( root ); 
```

这似乎有效，但它实际上删除了 or 的前两个部分，因此它仅适用于连词内的内容。

这里的正确方法是什么？我需要拆分成子查询吗？

解决了：

```
criteria.createAlias( "userGroupAccesses", "u", JoinType.LEFT_OUTER_JOIN );
criteria.createAlias( "u.userGroup", "ug", JoinType.LEFT_OUTER_JOIN );
criteria.createAlias( "ug.members", "member", JoinType.LEFT_OUTER_JOIN ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:50:30.247

您不能在 Criteria 查询中链接这样的属性。尝试

```
criteria.createAlias("u.userGroup", "userGroup");
criteria.createAlias("userGroup.members", "member");
ugAccess.add(Restrictions.eq("member", currentUser)); 
```

# php - 如何在 Magento 产品页面中显示交付方式（运输方式）

> ID：14211589
> 
> 赞同：0
> 
> 时间：2013-01-08T09:13:42.967
> 
> 标签：php, magento, web, e-commerce, shopping-cart

我有一个磁电商店，我有一个自定义要求。

我有自己的模板，我需要在产品页面上显示交货方式。

通常在结帐页面上可用的运输方式。但我需要在产品页面上添加它。

请帮助我或指导我这样做。

非常感谢乌曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:07:39.230

afaik 是与地址相关的运输方式。没有地址 - 没有送货方式。

但如果你调查一下，`Mage_Checkout_Block_Onepage_Shipping_Method_Available`你可以从

```
Mage::getStoreConfig('carriers/*/title'); 
```

所以打电话

```
Mage::getStoreConfig('carriers'); 
```

遍历所有运营商，收集标题并检查它们是否已激活。

看看

```
app/code/core/Mage/Checkout/Block/Onepage/Shipping/Method/Available.php:40
Mage_Checkout_Block_Onepage_Shipping_Method_Available::getShippingRates() 
```

# c# - 用户界面、XP 上的 WPF ICommand.Execute

> ID：14211591
> 
> 赞同：3
> 
> 时间：2013-01-08T09:13:52.070
> 
> 标签：c#, wpf, icommand

我的WPF 应用程序中有一个`UserControl`inside 。`Window`

```
 <StackPanel Orientation="Horizontal" Margin="5">
        <Button Command="{Binding AddFileCommand}" />
    </StackPanel> 
```

在模型中，我声明并初始化了一个`AddFileCommand`变量：

```
public ICommand AddFileCommand { get; set; }

public XXXModel()
{
    AddFileCommand = new DelegateCommand(o => true, AddFile);
} 
```

最好的解决方案是使用`ICommand`s 而不是`Click`事件。

在 Windows XP 下，单击此按钮不会触发 AddFile(object parameter) 函数。在 Windows Vista/Windows 7 上，它就像一个魅力。直接从代码调用`ICommand.Execute()`也可以在 XP 下工作。

我尝试更新 .NET 框架（该项目使用 .NET 4.0），但仍然缺少代码。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T07:12:17.220

正如@ta.speot.is 所提到的，[**DelegateCommand**](http://msdn.microsoft.com/en-us/library/ff654427.aspx)构造函数将第一个参数作为要调用的**Action<T>** ，第二个参数是引用 CanExecute()的**Func<T, bool> 。**

您的`Execute`方法将执行**Func<T, bool>**，而不是**Action<T>**。它不能在一个操作系统上运行，也不能在另一个操作系统上运行。

# javascript - 在javascript中使用单引号传递变量

> ID：14211594
> 
> 赞同：0
> 
> 时间：2013-01-08T09:14:08.557
> 
> 标签：javascript, regex

我在链接上有一个 onClick 调用：

```
<a onClick="fomateName('Andrew Dsouza')"> //this is working good 
```

问题是 fomateName 中的变量将包含单引号，而我的 fomateName 采用一个变量，例如

var a='Andrew D'souza'. 需要用单引号 Ex 格式化存在的变量；

```
<a onClick="fomateName('a')"> which turns to 

<a onClick="fomateName('Andrew D'souza')"> //this is not working ,because present of single quote 
```

任何想法如何在 javascript 中传递带有正确引号的文本。

单引号实际上不是名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:15:06.860

尝试：

```
<a onClick="fomateName('Andrew D\'souza')"> <!-- this will work --> 
```

`\`使用反斜杠转义 '

假设你有这样的功能=>

```
function fomateName(txt){
    alert(txt);
} 
```

并从锚点调用它=>

```
<a onClick="fomateName('Andrew D\'souza')"> <!-- this will alert "Andrew D'souza" --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:16:24.090

用反斜杠转义引号。

```
<a onClick="fomateName('Andrew D\'souza')">
//this is not working ,because present of single quote 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:15:22.610

你可以用反斜杠转义引号..

```
fomateName('Andrew D\'souza'); 
```

无论如何这应该有效：

```
var name = "Andrew D'souza";
fomateName(name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:15:36.200

您可以将其用双引号括起来，如下所示：

```
 <a onClick="fomateName("Andrew D'souza")"> //this is not working ,because present of single quote 
```

没关系，刚刚意识到它已经有双引号，是的，使用反斜杠进行转义，如下所示：

```
 <a onClick="fomateName('Andrew D\'souza')"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T09:15:54.657

尝试这个。使用`backslash`- 它将避免引号中断

```
<a onClick="fomateName('Andrew D\'souza')"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T09:15:55.850

您可以使用转义字符

```
<a onclick="formateName('AdrewD\'souza')"> 
```

# xcode - Xcode 项目中更改的文件夹结构未反映在 Git 存储库中

> ID：14211596
> 
> 赞同：3
> 
> 时间：2013-01-08T09:14:14.317
> 
> 标签：xcode, git

我有一个受版本控制的 Xcode 项目。我已经根据类的功能（例如模型、视图、控制器等）将项目导航器中的类分组到文件夹中。但是，这些文件夹结构对我的机器来说似乎是本地的，并且不会反映在我自己的本地 git 存储库中，或者如果我从另一台机器上执行 git pull，我创建或组织我的类的文件夹不会出现。那么，如何让所做的更改（将类组织到文件夹中）反映在本地和远程存储库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:17:38.060

试试这个

```
# modified, new and deleted files
git add -A 
```

[**参考**](http://github.com/svnpenn/dotfiles/blob/master/.gitconfig)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:29:46.410

我发现在本地存储库中手动添加文件夹或目录对我有用。在存储库中创建文件夹，`git add folder_name/`以实际跟踪并将其添加到存储库中。然后可以将文件移动到此文件夹中。根据您移动它的方式，您可能需要执行`git rm <file_name>`和`git add </folder_name/file_name>`。

# python - 如何对列表列表进行分组

> ID：14211597
> 
> 赞同：1
> 
> 时间：2013-01-08T09:14:22.363
> 
> 标签：python

我有一个看起来像这样的列表：

```
list=[
 ('2013-01-04', u'crid2557171372', 1),
 ('2013-01-04', u'crid9904536154', 719677),
 ('2013-01-04', u'crid7990924609', 577352),
 ('2013-01-04', u'crid7990924609', 399058),
 ('2013-01-04', u'crid9904536154', 385260),
 ('2013-01-04', u'crid2557171372', 78873)
] 
```

问题是具有 dup id 但计数不同的第二个 col。我需要一个可以汇总计数的列表，因此列表看起来像这样。python中是否有group by cluase？

```
list=[
     ('2013-01-04', u'crid9904536154', 1104937),
     ('2013-01-04', u'crid7990924609', 976410),
     ('2013-01-04', u'crid2557171372', 78874)
    ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:18:50.930

让我们命名您的列表`a`而不是`list`（`list`在 Python 中是一个非常有用的函数，我们不想掩盖它）：

```
import itertools as it

a = [('2013-01-04', u'crid2557171372', 1),
     ('2013-01-04', u'crid9904536154', 719677),
     ('2013-01-04', u'crid7990924609', 577352),
     ('2013-01-04', u'crid7990924609', 399058),
     ('2013-01-04', u'crid9904536154', 385260),
     ('2013-01-04', u'crid2557171372', 78873)]

b = []
for k,v in it.groupby(sorted(a, key=lambda x: x[:2]), key=lambda x: x[:2]):
    b.append(k + (sum(x[2] for x in v),)) 
```

`b`就是现在：

```
[('2013-01-04', u'crid2557171372', 78874),
 ('2013-01-04', u'crid7990924609', 976410),
 ('2013-01-04', u'crid9904536154', 1104937)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:28:43.050

我认为没有任何内置工具可以完全满足您的要求。`defaultdict`但是，使用模块中的 a 很容易自己推出`collections`：

```
from collections import defaultdict

counts = defaultdict(int)
for date, crid, count in lst:
    counts[(date, crid)] += count

new_lst = [(date, crid, count) for (date, crid), count in counts.items()] 
```

这只需要线性运行时间，所以如果你的数据集很大，它可能比`groupby`需要`O(log n)`运行时间排序的实现要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:33:01.963

“漫长”的道路：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> r = defaultdict(list)
>>> for i in l:
...    d[i[1]] += i[2]
...    r[i[0]].append(d)
... 
>>> results = []
>>> for i,v in r.iteritems():
...     for k in v[0]:
...         results.append((i,k,v[0][k]))
... 
>>> results
[('2013-01-04', u'crid9904536154', 1104937),
 ('2013-01-04', u'crid2557171372', 78874),
 ('2013-01-04', u'crid7990924609', 976410)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:07:21.013

一种极简的方法：

```
from pandas import *
a = [('2013-01-04', u'crid2557171372', 1),
     ('2013-01-04', u'crid9904536154', 719677),
     ('2013-01-04', u'crid7990924609', 577352),
     ('2013-01-04', u'crid7990924609', 399058),
     ('2013-01-04', u'crid9904536154', 385260),
     ('2013-01-04', u'crid2557171372', 78873)]

DataFrame(a).groupby([0,1]).sum().reset_index() 
```

**出去：**

```
 0               1        2
0  2013-01-04  crid2557171372    78874
1  2013-01-04  crid7990924609   976410
2  2013-01-04  crid9904536154  1104937 
```

# linux - 如何从 ubuntu 11.04 中删除 java5？

> ID：14211598
> 
> 赞同：1
> 
> 时间：2013-01-08T09:14:22.660
> 
> 标签：linux, ubuntu-11.04, java-5

我想从我的 ubuntu 11.04 系统中完全删除 java5。在执行 java -version 时，它显示 -

```
java version "1.5.0"
gij (GNU libgcj) version 4.4.5
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我怎样才能删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:21:25.550

如果要完全删除该 java 版本，则需要删除包含它的包，请参阅包含以下内容的包列表：

```
sudo dpkg --get-selections | grep jre 
```

通过这种方式，您可以查看`jre`已安装的软件包。然后您可以使用以下命令删除软件包：

```
sudo apt-get remove old_jre_package 
```

无论如何，**更好的解决方案**是制作更多`JDK`版本，在 Ubuntu 中很容易做到。您可以使用该`update-alternatives`命令。因此，您可以安装另一个并使用替代工具`JDK`在版本之间切换：`jdk`

```
sudo update-alternatives --config java
sudo update-alternatives --config javac 
```

有关更多选项，请参见手册页`man update-alternatives`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T06:23:39.677

是的，更好的解决方案是使用“update-alternatives”命令制作更多的 JDK 版本。

之后，您还可以使用该命令设置 PATH。

> 导出 JAVA_HOME=/usr/lib/jvm/jdk1.7.0_11 或 /usr/lib/jvm/jdk1.6.0_38 导出 PATH=$JAVA_HOME/bin:$PATH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:18:03.333

您可以通过运行此命令搜索系统中的所有 jre 包

```
sudo aptitude search jre 
```

使用此命令删除它

```
sudo apt-get remove sun-java6-jre sun-java6-plugin sun-java6-fonts 
```

您也可以尝试使用此命令删除系统中的所有 java 文件

```
sudo aptitude remove '~njava' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:41:52.000

您应该尝试脚本[oab java](https://github.com/flexiondotorg/oab-java6)。

# c# - colspan 不扩展列长度

> ID：14211601
> 
> 赞同：0
> 
> 时间：2013-01-08T09:14:36.790
> 
> 标签：c#, asp.net, html

我正在使用使用 html 表的 C# ASP.NET。问题出现在我正在使用的这个特定面板上，即使我的其他面板 colspan 属性除了这个面板之外，我的其他面板正常工作，我的表格内的列也没有扩展。

以下是一些屏幕截图来解释正在发生的事情。

![在此处输入图像描述](../Images/3541e4f8f7a63481ab8c6b02b211f956.png)

![在此处输入图像描述](../Images/be2c75c56efe41b42632f1db3ead03c5.png)

即使我将 colspan 设置为该列不会扩展的任何值。另外我知道这个面板中有两个表，我有两个表是有原因的，所以这不是一个错误。基本上我希望左按钮保持在面板的左侧，其次我希望右按钮（“下一步”）尽可能位于页面的右侧。

有什么想法为什么会发生这种情况，或者是否有更好的解决方案来解决这个问题？

顺便说一句，我正在使用 Google Chrome 来测试这是否为问题增加了任何价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:21:24.253

当第二个表中只有 1 行时，不确定为什么要使用 ColSpan。要实现您的期望，请执行以下操作：

在第二个表中设置 Width="100%"

在返回按钮的第一个“td”中，包括“align=left”

在下一个按钮的第二个“td”中，包括“align="right"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:20:28.513

`colspan`适用于多行；你错误地期待它

```
<table id="tblButtons" runat="server">
  <tr>
    <td colspan="3">
      column that covers three columns
    </td>
    <td align="right">
      right button
    </td>
  </tr>
  <tr>
    <td>
      column 1
    </td>
    <td>
      column 2
    </td>
    <td>
      column 3
    </td>
    <td>
      column 4
    </td>
  </tr>
</table> 
```

td 将涵盖第 1、2、3 列`colspan="3"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:21:40.893

`colspan`仅更改单元格占用的表格中的列数，而不更改实际的宽度。使用`style="width:..."`（或在 CSS 中设置）设置宽度。现在发生的事情是你的桌子被分成一百零一个假想部分（左边有一百个部分，右边有一个）。

正确使用示例`colspan`：

```
<table>
    <tr>
        <td colspan="2">
            Hello world
        </td>
    </tr>
    <tr>
        <td>
            Left
        </td>
        <td>
            Top
        </td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:21:09.147

您的页面中没有 100 列，因此该值相对毫无价值。您可以（并且应该）使用 CSS 来实现所需的宽度。要让表格本身填满页面，您需要在其中添加一个`style="width:100%;"`，然后您的单元格将展开以拆分差异。

# sql - 通过多对多获得独特的 1:1 结果是可能的

> ID：14211609
> 
> 赞同：2
> 
> 时间：2013-01-08T09:14:49.630
> 
> 标签：sql

好的，希望标题没有误导

我有（在其他列中）以下信息

```
PO_NUMBER                    PO_TRACKING_NO
-------------------------------------------
321A                            C100
321A                            C100
321A                            C102
321B                            C100
321B                            C012
321C                            C012 
```

我需要编写代码以便匹配一次`PO_NUMBER`，`PO_TRACKING_NO`消除任何其他结果......但`PO_TRACKING_NO`仍然可以引用其他`PO_NUMBER`并且`PO_NUMBER`可以引用其他`PO_TRACKING_NO`......所以使用上表，我想要下面的结果

```
PO_NUMBER                  PO_TRACKING_NO
-----------------------------------------    
321A                          C100
321A                          C102
321B                          C100
321B                          C012
321C                          C012 
```

一切都必须通过查询完成，我从视图中获取此信息，我不允许编辑/更改表/视图（尽管在这种情况下我不认为这会是一个问题）

编辑：抱歉文本没有以整洁的形式出现，试图格式化它:( [我在这里很新]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:16:15.950

如果您的表格中只有两列，可以`DISTINCT`为您提供帮助，

```
SELECT DISTINCT PO_NUMBER, PO_TRACKING_NO
FROM tableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:31:08.803

A`DISTINCT`应该可以工作，但 a`GROUP BY`只会为您提供更多信息：

```
SELECT 
 [PO_NUMBER], 
 [PO_TRACKING_NO],
 COUNT(*) AS [Occurrences]
FROM [VW_TRAFFIC_PO_SIDE]
GROUP BY 
 [PO_NUMBER], 
 [PO_TRACKING_NO]
ORDER BY
 [PO_NUMBER], 
 [PO_TRACKING_NO] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T09:32:31.650

只需像这样使用 DISTINCT ：

```
SELECT DISTINCT PO_NUMBER, PO_TRACKING_NO
FROM YourTable 
```

# c# - c# mono获取线程的cpu使用情况

> ID：14211612
> 
> 赞同：1
> 
> 时间：2013-01-08T09:15:14.233
> 
> 标签：c#, linux, process, mono, cpu-usage

我怎样才能获得我的应用程序的运行线程的 cpuload。
我的应用程序在 linux 上运行，而不是在 windows 上运行。

我将单声道更新到版本 3.0.2。
现在我可以获得正确的“ `Process.GetCurrentProcess().Threads`”线程数，但没有`ProcessThread`对象可用于读取“ `TotalProcessorTime`”

我可以做些什么来计算我正在运行的应用程序的 cpu 使用/线程？

我可以获得正在运行的线程的 linux-process-id 吗？如果可以的话，我可以读取 proc 目录结构，但我找不到任何方法。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:57:48.723

显然，该`Process.Threads`属性目前仅[部分实施](https://github.com/mono/mono/commit/ef6313d9c43e75db627984bf28206e099086de3b)：

```
// This'll return a correctly-sized array of empty ProcessThreads for now.
int error;
return new ProcessThreadCollection(new ProcessThread[GetProcessData (pid, 0, out error)]); 
```

不确定您在获取进程 ID 时遇到了什么麻烦，这段代码[似乎](http://ideone.com/tqRTHU)对我有用：

```
using System;
using System.Diagnostics;
using System.IO;

class MainClass
{
    static void Main(string[] args)
    {
        int pid = Process.GetCurrentProcess().Id;
        DirectoryInfo taskDir = new DirectoryInfo(String.Format("/proc/{0}/task", pid));
        foreach(DirectoryInfo threadDir in taskDir.GetDirectories())
        {
            int tid = Int32.Parse(threadDir.Name);
            Console.WriteLine(tid);
        }
    }
} 
```

# asp.net - 无法在 Visual Studio 2012 中访问 Asp.Net 配置

> ID：14211614
> 
> 赞同：0
> 
> 时间：2013-01-08T09:15:21.283
> 
> 标签：asp.net, visual-studio-2010, visual-studio-2012

在 Visual Studio 2010 中，对于每个 ASp .Net 项目，无论是 mvc 还是 webforms，我都可以从解决方案资源管理器访问 Asp .Net 配置管理网站，以从网站创建/删除用户和角色。

使用 Visual Studio 2012，我似乎找不到该选项。

它是否需要配置的会员提供者？为此，我正在使用自定义成员资格提供程序。我只配置了成员资格和角色提供者。我是否也需要配置配置文件提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:32:21.123

原来我可以在名为 ASP.Net 配置的项目菜单中找到这个选项。

# asp.net-mvc-4 - 将所有模型属性写入视图，而无需为每个属性执行此操作

> ID：14211616
> 
> 赞同：0
> 
> 时间：2013-01-08T09:15:23.760
> 
> 标签：asp.net-mvc-4

我有一个用于列出项目的页面，并且我在每个项目中都有锚点来编辑它。

所以当我点击编辑链接时，它会带我到编辑页面，其中有保存按钮和取消按钮。

我想要它，当我单击保存按钮时，它会带我进入确认页面，其中包含确定和取消按钮。

我知道在asp.net mvc中你可以通过这个将模型发送到视图中

```
return View("Edit", model); 
```

然后在视图中像这样编写每个模型属性是明智的

```
@Html.EditorFor( model => model.name )
@Html.EditorFor( model => model.description )
//more properties here... 
```

这样在我单击保存按钮后，我可以将模型放回控制器中

但是在编辑页面之后，我只需要在确认页面中查看一个问题我是否必须像这样手动编写它

```
@Html.HiddenFor( model => model.name )
@Html.HiddenFor( model => model.description )
//more properties here... 
```

在 asp.net mvc 中是否有一条无忧的功能可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:26:52.413

你可以使用`@Html.EditorForModel()`助手。但是，此方法将生成默认 UI 元素，例如文本框。您可以提供将产生隐藏输入的自定义模板。

# sql - 在sql server中插入单引号和双引号

> ID：14211622
> 
> 赞同：1
> 
> 时间：2013-01-08T09:15:44.853
> 
> 标签：sql, sql-server-2005

我一直在.NET前端使用不同的字体，所以在插入sql server时经常遇到引号和双引号。所以我在sql server上插入单引号和双引号的值时遇到问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:17:36.753

> 一直在 .NET 前端使用不同的字体

使用.Net 中的[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。您似乎正在连接字符串以形成插入查询。

# javascript - 三.js如何获取网格的位置？

> ID：14211627
> 
> 赞同：8
> 
> 时间：2013-01-08T09:15:57.157
> 
> 标签：javascript, three.js

使用下面的代码，网格的位置返回为`(0, 0, 0)`但不是。那么在渲染过程之后计算位置向量吗？

```
me.scene.add(objMesh); //me is a project class
objMesh.updateMatrixWorld(true);
alert(objMesh.position.x + ',' + objMesh.position.y + ',' + objMesh.position.z); 
```

objMesh 是从 objfile 创建的，它被正确添加到场景中并且质心大约是 (-8, 3, 0) 但 objMesh 的位置向量是 (0, 0, 0) 我们必须先自动计算一些东西还是应该计算它手动从网格的几何顶点？

`http://81.214.75.32:8181/admin`是网址

该网站是土耳其语，所以我将翻译 UI 项目

在站点中有“Dosya”菜单项打开菜单项并选择“Proje Aç”在该对话框中出现一个对话框选择MUTFAK_1场景将出现在该场景中，每个网格位置都是（0,0,0）是可能的： )

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T13:44:44.177

`object.position`始终是对象的本地。如果你想获得世界空间中的位置，你需要从`object.matrixWorld`.

试试这个：

```
scene.add(objMesh);
scene.updateMatrixWorld(true);
var position = new THREE.Vector3();
position.getPositionFromMatrix( objMesh.matrixWorld );
alert(position.x + ',' + position.y + ',' + position.z); 
```

r58

* * *

### 更新：

该功能`getPositionFromMatrix()`已重命名为`setFromMatrixPosition()`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-08T22:46:47.480

要查找世界空间中几何质心的位置，请尝试以下操作：

```
objMesh.geometry.computeBoundingBox();

var boundingBox = objMesh.geometry.boundingBox;

var position = new THREE.Vector3();
position.subVectors( boundingBox.max, boundingBox.min );
position.multiplyScalar( 0.5 );
position.add( boundingBox.min );

position.applyMatrix4( objMesh.matrixWorld );

alert(position.x + ',' + position.y + ',' + position.z); 
```

r58

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T09:27:05.130

是的。在与 mrdoob 交谈后，我意识到对象的 .position 对它们自己来说是本地的。我的情况是在考虑顶点的情况下找到我的网格的中心点。下面是获取来自答案 #447 ( [https://github.com/mrdoob/three.js/issues/447](https://github.com/mrdoob/three.js/issues/447) )的质心的代码

```
geom.centroid = new THREE.Vector3();
for (var i = 0, l = geom.vertices.length; i < l; i++) {
    geom.centroid.addSelf(geom.vertices[i]);
}
geom.centroid.divideScalar(geom.vertices.length); 
```

现在我们有了几何的质心......

根据[https://github.com/mrdoob/three.js/wiki/Migration](https://github.com/mrdoob/three.js/wiki/Migration)更新，`.addSelf`已重命名为`.add`r55 之后

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T10:01:02.210

```
alert(objMesh.matrixWorld.getPosition().x + ',' + objMesh.matrixWorld.getPosition().y + ',' + objMesh.matrixWorld.getPosition().z); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T11:47:58.220

根据[这篇文章](https://groups.google.com/forum/#!topic/comp.graphics.api.opengl/38uSOm3FIps)，网格的重心 C 可以通过以下方式找到

C = [所有 (A*R) 的总和] / [所有 A 的总和]
A = (面的面积 * 2)
R = 面质心 = 构成面的顶点的平均值

这是three.js中的代码

```
function calculateCenterOfMass( mesh ){

    var centroid = new THREE.Vector3();

    // centroid = centroidNominator / centroidDenominator;
    var centroidNominator = new THREE.Vector3(); 
    var centroidDenominator = 0;

    for(var i = 0; i < mesh.geometry.faces.length; i++){

        var Pi = mesh.geometry.faces[i].a;
        var Qi = mesh.geometry.faces[i].b;
        var Ri = mesh.geometry.faces[i].c;

        var a = new THREE.Vector3(mesh.geometry.vertices[Pi].x, mesh.geometry.vertices[Pi].y, mesh.geometry.vertices[Pi].z);
        var b = new THREE.Vector3(mesh.geometry.vertices[Qi].x, mesh.geometry.vertices[Qi].y, mesh.geometry.vertices[Qi].z);
        var c = new THREE.Vector3(mesh.geometry.vertices[Ri].x, mesh.geometry.vertices[Ri].y, mesh.geometry.vertices[Ri].z);

        var ab = b.clone().sub(a);
        var ac = c.clone().sub(a);

        var cross = new THREE.Vector3();
        cross.crossVectors( ab, ac );

        var faceArea = cross.lengthSq() / 2;
        var faceCentroid = new THREE.Vector3( (a.x + b.x + c.x)/3, (a.y + b.y + c.y)/3, (a.z + b.z + c.z)/3 );

        if (!isNaN(faceArea)){
            centroidNominator.add(faceCentroid.multiplyScalar(faceArea));
            centroidDenominator += faceArea;
        }
    }

    centroid = centroidNominator.divideScalar(centroidDenominator);

    return centroid;
} 
```

# c - 在 C 中使用筛法列出最多 20 亿个素数

> ID：14211628
> 
> 赞同：3
> 
> 时间：2013-01-08T09:16:00.393
> 
> 标签：c, arrays, segmentation-fault, primes, sieve-of-eratosthenes

我尝试使用 Sieve Eratosthenes 方法列出最多 20 亿个素数。这是我用的！

我面临的问题是，我无法超过 1000 万个数字。当我尝试时，它显示“分段错误”。我在网上找了找原因。有些网站说，这是编译器本身的内存分配限制。有人说，这是硬件限制。我正在使用安装了 4GB RAM 的 64 位处理器。请建议我列出它们的方法。

```
#include <stdio.h>
#include <stdlib.h>

#define MAX 1000000
long int mark[MAX] = {0};

int isone(){
   long int i;
   long int cnt = 0;
   for(i = 0; i < MAX ; i++){
      if(mark[i] == 1)
         cnt++;
   }
   if(cnt == MAX)
      return 1;
   else
      return 0;
}

int main(int argc,char* argv[]){
   long int list[MAX];
   long int s = 2;
   long int i;
   for(i = 0 ; i < MAX ; i++){
      list[i] = s;
      s++;
   }
   s = 2;
   printf("\n");

   while(isone() == 0){
      for(i = 0 ; i < MAX ; i++){
         if((list[i] % s) == 0)
            mark[i] = 1;
      }
      printf(" %lu ",s);
      while(mark[++s - 2] != 0);
   }

   return 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:21:59.023

`long int mark[1000000]`做堆栈分配，这不是你想要的内存量。尝试`long int *mark = malloc(sizeof(long int) * 1000000)`分配堆内存。这将使您超过约 1 百万个数组元素。

记住`free`记忆，如果你不再使用它。如果您不知道 malloc 或 free，请阅读功能的手册页（手册），可通过任何 linux 终端`man 3 malloc`或`man 3 free`在任何 linux 终端上使用。（或者你可以只是谷歌`man malloc`）

编辑：让它`calloc(1000000, sizeof(long int))`有一个初始化为 0 的数组，这可能更好。

此外，您可以将数组的每个元素用作位掩码，以便能够为每位存储一个标记，而不是每个 sizeof(long int) 字节。我建议使用固定宽度的整数类型，例如`uint32_t`数组元素，然后将数组的第 ' 个元素中的第`(n % 32)`' 位设置`(n / 32)`为 1，而不是仅将第 n 个元素设置为 1。

您可以使用以下方法设置整数的第 n 位`i`：

```
uint32_t i = 0;
i |= ((uint32_t) 1) << n 
```

假设您从 0 开始计数。

这使您对数字 n 的 uint32_t 位掩码数组进行设置操作：

```
mask[n / 32] |= ((uint32_t)1) << (n % 32) 
```

为 32 位类型节省了 99% 以上的内存。玩得开心 :D

此处使用的另一种更高级的方法是素数轮因式分解，这基本上意味着您事先将 2,3 和 5（甚至可能更多）声明为素数，并且在掩码数组中仅使用不能被其中一个整除的数字. 但这是一个非常先进的概念。

但是，我用大约 15 行代码（也用于投影仪）用 C 语言编写了 2 和 3 的轮因式分解的素数筛，因此可以有效地实现这些东西；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:01:47.167

最直接的改进是切换到表示奇数的位。因此，要覆盖`M=`20 亿个数字或 10 亿个几率，您需要 1000/8 = 1.25 亿字节 =~ 120 MB 内存（仍然使用`calloc`函数在堆上分配它们）。

位置上的位`i`将代表数字`2*i+1`。因此，当标记一个素数的倍数时`p`，即`p^2, p^2+2p, ..., M`，我们`p^2=(2i+1)^2=4i^2+4i+1`在位置上用一个位表示`j=(p^2-1)/2=2i(i+1)`，并且在它上面的下一个倍数`p`在位置增量处`p=2i+1`，

```
for( i=1; ; ++i )
  if( bit_not_set(i) )
  {
      p=i+i+1;
      k=(p-1)*(i+1);
      if( k > 1000000000) break;
      for( ; k<1000000000; k+=p)
         set_bit(k); // mark as composite
  }
// all bits i>0 where bit_not_set(i) holds, 
// represent prime numbers 2i+1 
```

下一步是切换到适合您的缓存大小的较小**段中工作。**这应该加快速度。您只需要为 20 亿平方根以下的素数（即 44721）保留内存区域。

首先，筛选这个较小的区域以找到那里的素数；然后将这些素数写入一个单独的`int`数组；然后使用这个素数数组来筛选每个段，可能将找到的素数打印到`stdout`或其他任何内容。

# java - Java Util Logger 写入同步

> ID：14211629
> 
> 赞同：2
> 
> 时间：2013-01-08T09:16:02.763
> 
> 标签：java, logging, synchronization, java.util.logging

通常在应用程序（以 Web 应用程序为例）中，我们有一个在启动期间创建的记录器实例。它甚至可以是一个单例，这并不重要。重要的是整个应用程序有 1 个实例。我们使用 java.util.logger

现在想象一下，您有来自两个不同用户的两个请求，它们引发了异常，我们正在记录那些写入日志文件的请求。这两个不同请求中对日志文件的写入是否以某种方式同步？或者我们是否需要显式同步它们，因为我发现在极少数情况下我们得到的日志都混合在 tomcat 日志文件中的两个请求之间？

我并不完全关心这里的因果关系，只是分离两条日志消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:19:35.157

您不需要任何同步，引用[JavaDoc 的`Logger`](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Logger.html)：

> Logger 上的所有方法都是多线程安全的。

请注意，来自不同线程的单独调用仍然可以交错。这只是意味着您不会让一条消息被另一条消息打断和分割。

# google-maps - 计算两点之间的近似距离

> ID：14211630
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:07.963
> 
> 标签：google-maps

我正在尝试计算两点之间相对于谷歌地图上的路线图的近似距离。75% 的时间点不在一条直线上，它们在路线图上形成一个三角形。我正在考虑直角和钝角。由点创建的线是斜边。

让我们取由点形成的线：“x”
其他两条线：“y”和“z”
假设 y 和 z 相等

现在，为了获得最佳效果，我采用了前面所述的两个选项：

选项1：

```
y = x(sin 45)/(sin90)
Total Distance = 2y 
```

选项 2：

```
y = x(sin 30)/(sin120)
Total Distance = 2y 
```

通过获取距离的所有坐标来计算距离。它与两者不同，大约为 10% 至 20%。

在几乎所有情况下，第二个都提供了使用谷歌地图车辆距离检查的最佳价值。

有没有更好的选择来获得最大的准确性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:58:47.643

你试过Haversine公式吗？

这是：

```
dlon = lon2 - lon1
  dlat = lat2 - lat1
  a = (sin(dlat/2))^2 + cos(lat1) * cos(lat2) * (sin(dlon/2))^2
  c = 2 * atan2(sqrt(a), sqrt(1-a)) 
  d = R * c 
```

# javascript - 使用 RequireJS 时，我应该将我的脚本放在 Yeoman 项目的什么位置？

> ID：14211632
> 
> 赞同：3
> 
> 时间：2013-01-08T09:16:11.180
> 
> 标签：javascript, requirejs, yeoman

所以我才刚刚开始使用 Yeoman。我只是设置了一个基本项目，但我不确定将我的脚本放在哪里。我应该把东西放在提供的 app.js 中吗？或者我应该制作自己的文件并将它们添加到某处的某个构建脚本中还是在某处需要它们？任何建议表示赞赏。

我也不明白 app.js 文件中这个的目的：

```
define([], function() {
return 'Hello from Yeoman!';
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T11:49:45.950

好的，所以您选择在您的项目中使用 RequireJS。RequireJS 允许您将代码分解为**模块**- 不仅可以提高代码的整洁度（减少意大利面条式代码），还可以消除全局命名空间的混乱。

如果您查看**main.js**文件，您会注意到以下内容：

```
require(['app'], function(app) {
  //use app here
  console.log(app);
}); 
```

这样做是将**app.js**包含到您的主 javascript 文件中并运行它。

现在，我认为您感到困惑的地方是 RequireJS 引入的新语法 - 但基本上**每个文件都**形成一个[闭包并具有自己的范围](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)。

想象一下：

如果您没有使用 RequireJs 来分隔文件，并且所有代码都在**一个文件**中。它看起来像这样：

```
function app () {
    return 'Hello from Yeoman!';
}

console.log(app()); 
```

您可以在**app.js**中编写任何您想要的内容，只要它使用所需的 RequireJS 语法包装即可：

```
define([], function() {
    //Start writing your code here
}); 
```

这将包含在**main.js**中并编译成一个文件用于生产。

目前 Yeoman 的文档有点少，所以如果您热衷于编写模块化 JavaScript ，我建议您前往 RequireJS 站点并[阅读他们的文档。](http://requirejs.org/docs/start.html)

如果您不想要/不需要此功能，则在初始化新的 Yeoman 项目时始终可以选择不包含 RequireJS。

希望有帮助:)

# javascript - 如何将 Google Chart 与 csv 中的数据一起使用

> ID：14211636
> 
> 赞同：13
> 
> 时间：2013-01-08T09:16:15.930
> 
> 标签：javascript, csv, google-visualization

我有一个看起来像这样的 csv 文件：

```
week,value1,value2
1,2,3
2,7,9 
```

我想使用谷歌图表绘制它的堆积图（周是我的 x（水平）值，values1 和 values2 是两组 y）。不幸的是，我没有找到任何简单的方法来做到这一点。这可能与我在 js 中完全是个菜鸟有关。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-21T19:38:00.953

[jquery-csv 库](https://github.com/typeiii/jquery-csv)提供了将 csv 字符串转换为数组供（`google.visualization.arrayToDataTable()`他们的示例[在这里](https://typeiii.github.io/jquery-csv/examples/google-visualization.html)）使用的能力。为了使这项工作，将 jquery.csv.js 添加到您的服务器（在下面的示例中，我假设它与您的 HTML 位于同一文件夹中）并在您的`<head>`. 以下是一个简单的脚本，您可以添加到您的脚本中`<head>`以开始使用。我假设一个散点图，但这个过程适用于[这里](https://developers.google.com/chart/interactive/docs/gallery)的任何图表。您还需要一个`<div>`with`id="chart"`才能正常工作。

```
// load the visualization library from Google and set a listener
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

// this has to be a global function
function drawChart() {
   // grab the CSV
   $.get("example.csv", function(csvString) {
      // transform the CSV string into a 2-dimensional array
      var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});

      // this new DataTable object holds all the data
      var data = new google.visualization.arrayToDataTable(arrayData);

      // this view can select a subset of the data at a time
      var view = new google.visualization.DataView(data);
      view.setColumns([0,1]);

     // set chart options
     var options = {
        title: "A Chart from a CSV!",
        hAxis: {title: data.getColumnLabel(0), minValue: data.getColumnRange(0).min, maxValue: data.getColumnRange(0).max},
        vAxis: {title: data.getColumnLabel(1), minValue: data.getColumnRange(1).min, maxValue: data.getColumnRange(1).max},
        legend: 'none'
     };

     // create the chart object and draw it
     var chart = new google.visualization.ScatterChart(document.getElementById('chart'));
     chart.draw(view, options);
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-11T22:19:50.127

我一直在寻找一段时间，并在谷歌小组讨论中找到了解决方案。 [https://groups.google.com/forum/#!topic/google-visualization-api/cnXYDr411tQ](https://groups.google.com/forum/#!topic/google-visualization-api/cnXYDr411tQ)

我已经尝试过了，它有效！

在这种情况下，我们必须指定 csv 文件的标头类型。

```
var queryOptions = {
    csvColumns: ['number', 'number', 'number' /* Or whatever the columns in the CSV file are */],
    csvHasHeader: true /* This should be false if your CSV file doesn't have a header */
}
/* csvUrl is the path to your csv */    
var query = new google.visualization.Query(csvUrl, queryOptions);
query.send(handleQueryResponse);

function handleQueryResponse(response) {

    if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }

    var data = response.getDataTable();

    var chart = new google.visualization.ColumnChart(document.getElementById('your div'));
    // Draw your chart with the data table here.
    // chart.draw(view, queryOptions);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:16:58.050

您使用哪种服务器端脚本语言（php、asp）？

一种选择是从保存在 Google Drive 中的电子表格中导入数据，[请参阅此处](http://www.farinspace.com/saving-form-data-to-google-spreadsheets/)以获取基于 PHP 的从 Google Docs 中保存和提取数据的示例。这将使您能够更新电子表格，并且图表将自动绘制新数据。

# php - 查找未引用的字符串并使用正则表达式引用它们

> ID：14211639
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:28.907
> 
> 标签：php, preg-match

我面前有一个网站，其中包含 2500 个会话变量，其中大部分都标有不带引号的标签（显然不是我的工作......）。例如

```
$_SESSION[var] 
```

而不是

```
$_SESSION['var'] 
```

现在，我必须更改所有 2500 个以确保它们有引号。我知道我将不得不编写一些 PHP 来遍历每个文件并检查每个会话变量。我可能会使用 preg_match 但我不确定我需要的正则表达式。当我找到没有报价的那些时，我将不得不去 str_replace ，除非有人能想到更好的方法？

有人知道吗？不能手动执行此操作，它可能会杀了我！:) 干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:19:08.420

尝试：

```
$yourCodeWhereYouNeedToReplace = file_get_contents('awfulCode.php'); //:P
preg_replace_callback('/_SESSION\[(\w+)\]/',
                      function ($matches)
                      { return '_SESSION[\''.$matches[1].'\']'; },
                      $yourCodeWhereYouNeedToReplace); 
```

**编辑：**如果`\[(\w+)\]`你想用`[key]`.`['key']`

# ios - 如何访问 UICollectionView 中页眉或页脚的特定实例？

> ID：14211641
> 
> 赞同：3
> 
> 时间：2013-01-08T09:16:38.510
> 
> 标签：ios, uitableview, ios6, uicollectionview, uicollectionviewcell

我可以调用`collectionView:cellForItemAtIndexPath:`以获取特定单元格，以便随时修改该单元格——例如，更新其标签。我说的是 on 的类实例方法`UICollectionView`，而不是`UICollectionViewDataSource`方法。

但是，页眉/页脚似乎没有类似的方法。`collectionView:viewForSupplementaryElementOfKind`将返回页眉/页脚的唯一实例，而不是提供已分配的实例。因此，我无法获取指向标头的指针以更新（例如）标签。我被迫重新加载该部分并在`collectionView:viewForSupplementaryElementOfKind`方法体中对其进行修改。

是否有适当的方法来获取指向特定页眉/页脚的指针，而无需使用自定义对象缓存或标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:57:40.193

据我所知，没有（直到 iOS 6 才有对 , 的等效调用`UITableView`）`footer/headerViewForSection`。

如果我不得不猜测为什么这是不可能的，我会说这是因为在某些布局中`UICollectionView`会自动重新布局并调整补充视图，因此“即时”调整视图内容可能会出现问题。但是，假设`UICollectionView`没有像复制视图那样做任何有趣的事情，您可能应该能够将补充视图保存在一个单独的数组中并以这种方式修改它们——也就是说，不能保证这不会引入一些奇怪或奇怪的行为（对于您对使用标签并进入集合视图层次结构的建议）。

所以简短的回答是否定的——API 中没有支持此功能的方法。如果您有一个引人注目的用例，那么可能值得通过 Apple 的错误报告器提交功能请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T00:20:22.207

另一种可能的解决方案是让标题视图监听`NSNotification`您广播的内容，然后关心的内容可以根据您拥有的任何标准进行自我更新。

或者给他们一个标签并使用`viewWithTag:`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-02T19:58:24.887

正确的做法是更新数据源中的数据模型对象，然后调用`[myCollectionView reloadData]`. 这将触发您的集合视图再次请求数据并根据需要更新其子视图。

# jquery - $.ajax 请求没有详细信息错误（跨域）

> ID：14211642
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:43.860
> 
> 标签：jquery, ajax

有什么提示吗？这是我的代码：

```
var url = window.CANILE_BASE_URL + 'v2/canile/?location_lat=' + lat + '&location_lng=' + lng;
$.ajax({
    type: 'GET',
    dataType: 'json',
    url: url,
    beforeSend: function (xhr) {
        alert(1);
        var accessToken = localStorage.getItem('accessToken');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
    }
}).success(function (res) {
    console.log(res);
}).fail(function (res) {
    console.log(res);
}); 
```

这是萤火虫的回应： ![在此处输入图像描述](../Images/c890df13d1ed1a147c3eec46c2147334.png)

# android - android 键盘对 UI 的影响

> ID：14211643
> 
> 赞同：1
> 
> 时间：2013-01-08T09:16:45.953
> 
> 标签：android, user-interface, keyboard

在我的 android 应用程序中，我有 edittext ，在专注于它（触摸输入文本）之后，键盘正在打开并压缩我的 listView 的背景。如何解决这个问题？在哪里可以阅读有关键盘对 UI 影响的更多信息？谢谢

问候海克·纳哈佩蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:31:49.923

`Manifest.xml`您可以在文件中指定键盘的行为。

我建议您阅读有关[configChanges](https://developer.android.com/guide/topics/manifest/activity-element.html#config)和[windowSoftInputMode](https://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)的文档。

您可能希望使用该`adjustPan`选项来解决压缩问题。

> **adjustPan** : Activity 的主窗口没有调整大小来为软键盘腾出空间。[...]

# xml - 将 60MB XML 文件上传到 Umbraco 节点会导致无限循环

> ID：14211646
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:55.210
> 
> 标签：xml, file-upload, umbraco

我在 Umbraco 内容节点上有一个文件上传字段，网站后端的用户可以上传一个 60MB 的 XML 文件，然后由服务器处理。处理部分工作正常。

问题是它上传了大约 30% 的文件（根据 Chrome 中的状态栏），但随后又从 0% 开始上传。它在一个循环中继续执行此操作至少四次。

我的第一个想法是服务器超时，但我在 web.config 中的设置应该允许一个小时，最多 2GB。

```
<system.web>
    <httpRuntime executionTimeout="3600" maxRequestLength="2097151" requestValidationMode="2.0" requestPathInvalidCharacters="&lt;,>,:" />
</system.web> 
```

还有什么我在这里想念的吗？或者 Umbraco 如何处理大型 XML 文件有什么奇怪的地方吗？

**编辑：**设法在 IE7 中上传文件而没有任何问题（我知道，对吗？），但我仍然遇到 Chrome 的问题，它上升到 30%，然后又回到 0%。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T12:20:15.203

如果您运行 IIS7+，您还需要指定 maxAllowedContentLength（默认为 30000000 字节）：

```
<system.webServer>        
  <security>
    <requestFiltering>
      <requestLimits maxAllowedContentLength="60000000" />
    </requestFiltering>
  </security>
</system.webServer> 
```

# javascript - nokia map 'nokia.places.search.manager.findPlaces' 功能超过 20 个结果？

> ID：14211647
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:56.257
> 
> 标签：javascript, here-api

使用诺基亚地图“nokia.places.search.manager.findPlaces”我得到多达 20 个地点搜索结果。如何获得更多结果？

我的诺基亚功能：

nokia.places.search.manager.findPlaces({ searchTerm: term, searchCenter: searchCenterN, didYouMean: 5 });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:14:56.913

看起来您目前最好的选择是使用如图所示的**限制**参数。默认为 20 个位置，但可以扩展到 100 个。

```
 searchManager.findPlacesByCategory({
        category: category,
        onComplete: processResults,
        searchCenter: searchCenter,
        limit: 50,
    }); 
```

还有一个隐藏在结果集中的**下一个**URI，它访问 RESTful Places API，但在 2.2.3 API 中似乎还没有任何用于处理该数据的公共函数。

这是一个基于 API Explorer 示例的完整工作示例：http: [//developer.here.net/apiexplorer/examples/api-for-js/places-search/places-search-by-category.html](http://developer.here.net/apiexplorer/examples/api-for-js/places-search/places-search-by-category.html)

您需要获取自己的免费[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)才能使其正常工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- 
    Example from Nokia Maps API Playground, for more information visit http://api.maps.nokia.com
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9"/>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <title>Nokia Maps API Example: Search by category</title>
        <meta name="description" content="Search by category"/>
        <meta name="keywords" content="search, services, places, category"/>
        <!-- For scaling content for mobile devices, setting the viewport to the width of the device-->
        <meta name=viewport content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <!-- By default we add ?with=all to load every package available, it's better to change this parameter to your use case. Options ?with=maps|positioning|places|placesdata|directions|datarendering|all -->
        <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.3/jsl.js?with=all"></script>
        <!-- JavaScript for example container (NoteContainer & Logger)  -->
        <style type="text/css">
            html {
                overflow:hidden;
            }

            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                width: 100%;
                height: 100%;
                position: absolute;
            }

            #mapContainer {
                width: 80%;
                height: 80%;
                left: 0;
                top: 0;
                position: absolute;
            }
            #progress {
                width: 80%;
                height: 10%;
                left: 0;
                top: 80%;
                position: absolute;
            }
            #buttons {
                width: 80%;
                height: 10%;
                left: 0;
                top: 90%;
                position: absolute;
            }
        </style>
    </head>
    <body>
        <div id="mapContainer"></div>
        <div id="progress"></div>
        <div id="buttons">
        <a onClick="search1();return false;" href="#">Find 20 Places</a> 
        <a onClick="search2();return false;" href="#">Find 50 Places</a> 
        </div>
        <script type="text/javascript" id="exampleJsSource">
/*  Set authentication token and appid 
*   WARNING: this is a demo-only key
*   please register on http://api.developer.nokia.com/ 
*   and obtain your own developer's API key 
*/
nokia.Settings.set("appId", "YOUR APP ID"); 
nokia.Settings.set("authenticationToken", "YOUR TOKEN");

// Get the DOM node to which we will append the map
var mapContainer = document.getElementById("mapContainer");
// Create a map inside the map container DOM node
var map = new nokia.maps.map.Display(mapContainer, {
    // Initial center and zoom level of the map
    center: [52.51, 13.4],
    zoomLevel: 10,
    components: [       
        new nokia.maps.map.component.Behavior()
    ]
});

var searchCenter = new nokia.maps.geo.Coordinate(52.51, 13.4),
    searchManager = nokia.places.search.manager,
    resultSet;

var resultDataJF;   

// Function for receiving search results from places search and process them
var processResults = function (data, requestStatus, requestId) {
    var i, len, locations, marker;

    resultDataJF = data;
    if (requestStatus == "OK") {
        // The function findPlaces() and reverseGeoCode() of  return results in slightly different formats
        locations = data.results ? data.results.items : [data.location];
        // We check that at least one location has been found
        if (locations.length > 0) {
            // Remove results from previous search from the map
            if (resultSet) map.objects.remove(resultSet);
            // Convert all found locations into a set of markers
            resultSet = new nokia.maps.map.Container();
            for (i = 0, len = locations.length; i < len; i++) {
                marker = new nokia.maps.map.StandardMarker(locations[i].position, { text: i+1 });
                resultSet.objects.add(marker);
            }
            // Next we add the marker(s) to the map's object collection so they will be rendered onto the map
            map.objects.add(resultSet);
            // We zoom the map to a view that encapsulates all the markers into map's viewport
            map.zoomTo(resultSet.getBoundingBox(), false);
        } else { 
            alert("Your search produced no results!");
        }
    } else {
        alert("The search request failed");
    }
};

// Binding of DOM elements to several variables so we can install event handlers.
var progressUiElt = document.getElementById("progress");

 search1 = function(){
// Make a place search request
var category = "eat-drink";
progressUiElt.innerHTML = "Looking for places in the '" + category + "' category...'";
searchManager.findPlacesByCategory({
    category: category,
    onComplete: processResults,
    searchCenter: searchCenter
});
}

search2 = function(){
// Make a place search request
var category = "eat-drink";
progressUiElt.innerHTML = "Looking for places in the '" + category + "' category...'";
searchManager.findPlacesByCategory({
    category: category,
    onComplete: processResults,
    searchCenter: searchCenter,
    limit: 50,
});
}

        </script>
    </body>
</html> 
```

# java - 使用 javax.sql.Datasource 并在 Websphere 上托管应用程序时出现 IllegalArgumentException

> ID：14211648
> 
> 赞同：0
> 
> 时间：2013-01-08T09:16:58.910
> 
> 标签：java, spring, hibernate, spring-mvc

当我尝试使用 javax.sql.DataSource 从基于 spring 的应用程序执行存储过程时，我收到“非法参数异常”

堆栈跟踪如下。

```
Caused by: org.springframework.aop.AopInvocationException: AOP configuration seems to be invalid: tried calling method [public abstract java.sql.Connection javax.sql.DataSource.getConnection() throws java.sql.SQLException] on target [com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource@4582a8fc]; nested exception is java.lang.IllegalArgumentException: object is not an instance of declaring class
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
    at $Proxy115.getConnection(Unknown Source)
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:84)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2009)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1292)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:732)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1367)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1333)
    ... 45 more
Caused by: java.lang.IllegalArgumentException: object is not an instance of declaring class
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)
    ... 56 more 
```

源代码如下。

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Types;
import java.util.HashMap;
import java.util.Map;

import javax.sql.DataSource;

import oracle.sql.ARRAY;
import oracle.sql.ArrayDescriptor;

import org.apache.log4j.Logger;
import org.springframework.jdbc.core.SqlOutParameter;
import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.core.SqlTypeValue;
import org.springframework.jdbc.object.StoredProcedure;

public class CERBulkUploadSP extends StoredProcedure{

    private final Logger log = Logger.getLogger(this.getClass().getName());

    public CERBulkUploadSP(DataSource dataSource, String storedProcName) {

        // Run the Parent
        super(dataSource, storedProcName);

        if (log.isInfoEnabled()) {
            log.info("CERA Processes Stored Procedure Name : "+ storedProcName);
        }

        // Declare the Parameter Details
        declareParameter(new SqlParameter("THE_ARRAY", Types.ARRAY, "CER.GL_ENTRY_TYPE_ARRAY"));
        declareParameter(new SqlParameter("INCIDENT_DIM_ID", Types.NUMERIC));
        declareParameter(new SqlParameter("INS_USER", Types.VARCHAR));
        declareParameter(new SqlOutParameter("P_STATUS", Types.VARCHAR));

        // Compile the SP
        compile();
    }

    public boolean execute(final BaseViewBean baseViewBean$Session, final long incidentDimId, final String loginUser, final String identifier) throws Exception {

        boolean returnVal = false;
        Map<String, Object> inParams = new HashMap<String, Object>();
        log.info("Setting up the Stored Procedure Params");

        inParams.put("THE_ARRAY", new SqlTypeValue() {
            public void setTypeValue(PreparedStatement cs, int index, int sqlType, String typeName) throws SQLException {
                Connection con = cs.getConnection();
                ArrayDescriptor des = ArrayDescriptor.createDescriptor("CER.GL_ENTRY_TYPE_ARRAY", con);
                ARRAY a = new ARRAY(des, con, baseViewBean$Session.getExcelRecLst().toArray());
                cs.setObject(1, (Object)a);
            }
        });
        inParams.put("INCIDENT_DIM_ID", incidentDimId);
        inParams.put("INS_USER", loginUser);
        inParams.put("P_STATUS", identifier);

        if (log.isDebugEnabled()) {
            log.debug("Executing the CERA Stored Procedure ");
        }

        Map out = execute(inParams);

        log.info("output size is --------------------->>>>>>>>>> "+out.size());
        for(Object o : out.keySet()){
            log.info((String)out.get(o));
            returnVal = Boolean.parseBoolean((String)out.get(o));
        }

        if (log.isDebugEnabled()) {
            log.info("Output from CERA Stored Procedure :" + out);
        }
        return returnVal;
    }
} 
```

bean定义如下。

```
<bean id="cerBulkUploadSp" class="com.****.CERBulkUploadSP">
    <constructor-arg index="0">
        <ref bean="ceraDataSource" />
    </constructor-arg>
    <constructor-arg index="1">
        <value>CER.GL_PROCESS_BULK_ENTRIES</value>
    </constructor-arg>      
</bean>

<bean id="processDao" class="com.****.ProcessDaoImpl">
        <property name="storedProcedure">
            <ref bean="cerBulkUploadSp"/>
        </property>
        <property name="hibernateTemplate" > <ref bean="ceraHibernateTemplate"/></property>
    </bean> 
```

类路径：com/*****/hibernate

```
 <property name="hibernateProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.use_sql_comments">true</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle9Dialect</prop>
            <prop key="hibernate.jdbc.batch_size">20</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop> 
        </props>
    </property>

    <property name="dataSource"> <ref bean="ceraDataSource" />
    </property>
</bean> 
```

我的 JNDI 配置如下。

```
<bean id="ceraDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>jdbc/CERDS</value>
    </property>
    <property name="lookupOnStartup">
        <value>false</value>
    </property>
    <property name="cache">
        <value>true</value>
    </property>
    <property name="proxyInterface">
        <value>javax.sql.DataSource</value>
    </property>
</bean> 
```

我的类路径中的罐子如下。

```
JaxrpcComponent300V5.jar                        
ajaxtags-1.2-beta3.jar                          
ajaxtags-1.3-beta-rc7.jar                       
antlr.jar                                       
aopalliance.jar                                 
asm-commons.jar                                 
asm-util.jar                                    
asm.jar                                         
aspectjrt.jar                                   
aspectjweaver.jar                               
bsf.jar                                         
castor-anttasks.jar                             
castor-codegen.jar                              
castor-xml.jar                                  
cglib-nodep-2.1_3.jar                           
classes12.jar                                   
commons-beanutils.jar                           
commons-chain.jar                               
commons-codec.jar                               
commons-collections.jar                         
commons-dbcp.jar                                
commons-digester.jar                            
commons-fileupload.jar                          
commons-httpclient.jar                          
commons-io.jar                                  
commons-jxpath.jar                              
commons-lang.jar                                
commons-logging.jar                             
commons-pool.jar                                
commons-validator.jar                           
displaytag-1.2.jar                              
displaytag-export-poi-1.2.jar                   
displaytag-portlet-1.2.jar                      
dom4j-1.5.2.jar                                 
dom4j-1.6.1.jar                                 
ehcache.jar                                     
ejb3-persistence.jar                            
hibernate-annotations.jar                       
hibernate-entitymanager.jar                     
hibernate-validator.jar                         
hibernate3.jar                                  
ibatis.jar                                      
jakarta-oro.jar                                 
jamon.jar                                       
javassist.jar                                   
jaxb-api.jar                                    
jboss-archive-browsing.jar                      
jericho-html-2.4.jar                            
jsr173_1.0_api.jar                              
jta.jar                                         
juh-3.2.1.jar                                   
juh.jar                                         
jurt-3.2.1.jar                                  
jurt.jar                                        
list.txt                                        
log4j.jar                                       
mvel.jar                                        
poi-3.8-20120326.jar                            
poi-excelant-3.8-20120326.jar                   
poi-ooxml-3.8-20120326.jar                      
poi-ooxml-schemas-3.8-20120326.jar              
poi-scratchpad-3.8-20120326.jar                 
psecWsClient500.jar                             
quartz-all.jar                                  
ridl.jar                                        
spring-agent.jar                                
spring-aop.jar                                  
spring-aspects.jar                              
spring-beans.jar                                
spring-context-support.jar                      
spring-context.jar                              
spring-core.jar                                 
spring-jdbc.jar                                 
spring-jms.jar                                  
spring-mock.jar                                 
spring-modules-validation.jar                   
spring-orm.jar                                  
spring-security-acl.jar                         
spring-security-catalina.jar                    
spring-security-core-tiger.jar                  
spring-security-core.jar                        
spring-security-ntlm.jar                        
spring-security-openid.jar                      
spring-security-portlet.jar                     
spring-security-taglibs.jar                     
spring-tomcat-weaver.jar                        
spring-tx.jar                                   
spring-web.jar                                  
spring-webmvc-portlet.jar                       
spring-webmvc-struts.jar                        
spring-webmvc.jar                               
struts-core.jar                                 
struts-el.jar                                   
struts-extras.jar                               
struts-faces.jar                                
struts-scripting.jar                            
struts-taglib.jar                               
struts-tiles.jar                                
unoil.jar                                       
unoloader.jar                                   
urlprocessingfilter300V5.jar                    
velocity.jar                                    
xbean.jar                                       
xerces-2.2.1.jar 
```

当在 tomcat 上本地运行应用程序并将数据源表示为 oracle 连接时它运行良好，但是当我将代码部署到托管我们所有应用程序的 Websphere 服务器上时，我遇到了这个问题。任何人都可以让我知道如何解决同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:52:29.840

您的类路径中有旧的 Oracle JDBC 驱动程序：`classes12.jar`. 这适用于[Oracle 10.2 和 JDK 1.2/1.3](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html) - 我怀疑这是您的环境。其他 JAR 也可能包含`javax.sql.*`类（不是全部都知道）。

您是否也曾将 WebSphere Classloader 模式从 PARENT_FIRST（默认）切换到 PARENT_LAST？

# html - HTML：如何使用 AngularJs 填充第一行是父行和后续行是子行的行

> ID：14211649
> 
> 赞同：3
> 
> 时间：2013-01-08T09:17:00.163
> 
> 标签：html, json, angularjs, html-table

我有一个像这样的Angular Js

```
function Ctrl($scope) {
      $scope.gardens = [
        {garden:'1', trees: ["a", "b", "c", "d"]},
        {garden:'2', trees: ["e", "f", "g", "h"]},
        {garden:'3', trees: ["i", "k", "l", "m"]}
      ];
} 
```

现在我想将它显示在一个 html 表中，如下所示：

```
|花园|树木|
|1 |
| |一个 |
| |b |
| |c |
...
|2 |
| |e |
| |f |
| |g |

```

我可以使用 DOM 手动执行此操作，但使用 AngularJS 没有解决方案。

（我对 html 代码的尝试：

```
<table ng-app="" ng-controller="Ctrl">
  <tr ng-repeat="garden in gardens">
    <td>{{garden.garden}}</td>
  </tr>
</table> 
```

)

请帮忙！

约翰尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:40:15.993

你可以这样做：

[http://jsfiddle.net/ffVeu/](http://jsfiddle.net/ffVeu/)

这是一个基础，只需使用它来生成更漂亮的 HTML ;)

HTML

```
<div ng-app>
  <table ng-controller="Ctrl">
    <tr>
      <th>Garden</th>
      <th>Tree</th>
    </tr>
     <tr ng-repeat="garden in gardens">        
        <td class="firstColumn">{{garden.garden}}</td>
        <td>
          <table>
            <tr ng-repeat="tree in garden.trees"><td>
          {{tree}}
              </td>
            </tr>
          </table>
        </td>        
     </tr>
  </table>
</div> 
```

CSS（丑陋，只是为了显示结果，不要用这个...）

```
</style> <!-- Ugly Hack due to jsFiddle issue: http://goo.gl/BUfGZ --> 
<link rel="stylesheet" 
 href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
<script 
 src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js">
</script>
<style>
.done-true {
  text-decoration: line-through;
  color: grey;
}

.firstColumn{
vertical-align: top;
}

table, tr, td { 
  padding: 2px;  
  margin: 20px;
  text-align: center;
}

th {
    background-color: silver;
  color: white;
  font-weight: bold;
  padding: 10px;
}
tr{
  border: 1px solid silver;
}

tr tr{
  border: none;
} 
```

# php - 连接数据库时出现空指针异常

> ID：14211655
> 
> 赞同：0
> 
> 时间：2013-01-08T09:17:36.373
> 
> 标签：php, android, mysql, login

嗨，我是 android 新手，我正在开发一个应用程序，通过连接到 mysql 数据库来检查登录凭据。

这是我遇到的错误，它出现在模拟器中。

java.lang.NullPointerException

这是我的代码。

登录活动.java

```
import android.app.Activity;
import java.util.ArrayList;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LoginActivity extends Activity {
    EditText un,pw;
    TextView error;
    Button ok;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    un=(EditText)findViewById(R.id.email_address);
    pw=(EditText)findViewById(R.id.password);
    ok=(Button)findViewById(R.id.login_button);
    error=(TextView)findViewById(R.id.tv_error);
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = 
            new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    ok.setOnClickListener(new View.OnClickListener() {

    @Override

    public void onClick(View v) {
    // TODO Auto-generated method stub
    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
    postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));

    //String valid = "1";
    String response = null;
    try {
    response = CustomHttpClient.executeHttpPost("http://engiguide.com/check.php", postParameters);  //Enetr Your remote PHP,ASP, Servlet file link
    String res=response.toString();
    // res = res.trim();
    res= res.replaceAll("\\s+","");
    //error.setText(res);
    if(res.equals("1"))
    error.setText("Correct Username or Password");
    else
    error.setText("Sorry!! Incorrect Username or Password");

    } catch (Exception e) {

    un.setText(e.toString());
    }}
    });
}
} 
```

CustomHttpClient.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URI;
import java.util.ArrayList;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.params.ConnManagerParams;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;

public class CustomHttpClient {
/** The time it takes for our client to timeout */
public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
/** Single instance of our HttpClient */
private static HttpClient mHttpClient;
/**
* Get our single instance of our HttpClient object.
*
* @return an HttpClient object with connection parameters set
*/
private static HttpClient getHttpClient() {
if (mHttpClient == null) {
mHttpClient = new DefaultHttpClient();
final HttpParams params = mHttpClient.getParams();
HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);
}
return mHttpClient;
}
/**
* Performs an HTTP Post request to the specified url with the
* specified parameters.
*
* @param url The web address to post the request to
* @param postParameters The parameters to send via the request
* @return The result of the request
* @throws Exception
*/
public static String executeHttpPost(String url, ArrayList postParameters) throws Exception {
BufferedReader in = null;
try {
HttpClient client = getHttpClient();
HttpPost request = new HttpPost(url);
UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
request.setEntity(formEntity);
HttpResponse response = client.execute(request);
in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String line = "";
String NL = System.getProperty("line.separator");
while ((line = in.readLine()) != null) {
sb.append(line + NL);
}
in.close();
String result = sb.toString();
return result;
} finally {
if (in != null) {
try {
in.close();
} catch (IOException e) {
e.printStackTrace();
}}}}
public static String executeHttpGet(String url) throws Exception {
BufferedReader in = null;
try {
HttpClient client = getHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI(url));
HttpResponse response = client.execute(request);
in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String line = "";
String NL = System.getProperty("line.separator");
while ((line = in.readLine()) != null) {
sb.append(line + NL);
}
in.close();
String result = sb.toString();
return result;
} finally {
if (in != null) {
try {
in.close();
} catch (IOException e) {
e.printStackTrace();
}}}}} 
```

这是用于连接 mysql 数据库的 php 代码。

```
<?php
$un=$_POST['username'];
$pw=$_POST['password'];
//connect to the db
$user = ‘username’;
$pswd = ‘password’;
$db = ‘loginactivity’;
$conn = mysql_connect(‘localhost’, $user, $pswd);
mysql_select_db($db, $conn);
//run the query to search for the username and password the match
$query = “SELECT * FROM userpass WHERE username = ‘$user’ AND password = ‘$pswd’”;
$result = mysql_query($query) or die(“Unable to verify user because : ” . mysql_error());
//this is where the actual verification happens
if(mysql_num_rows($result) > 0)
    echo 1;  // for correct login response
else
    echo 0; // for incorrect login response
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:37:54.900

```
Please try this:

      String response = null;
        try {
        response = CustomHttpClient.executeHttpPost("http://engiguide.com/check.php", postParameters);  //Enetr Your remote PHP,ASP, Servlet file link
        String res=response.toString();
        // res = res.trim();
        res= res.replaceAll("\\s+","");
        //error.setText(res);
        if(res.equals("1"))
        error.setText("Correct Username or Password");
        else
        error.setText("Sorry!! Incorrect Username or Password");

            } catch (Exception e) {
    //the exception is caused in above code or from the server communication print the logs to //get the exact location
        e.printStackTrace();

        un.setText(e.toString());
        }}
        }); 
```

这将为您提供完整的堆栈跟踪并帮助您确定空指针。请检查 logcat 是否有异常。

# android - 如何获取 android 设备中存在的文件的更新日期和时间？

> ID：14211656
> 
> 赞同：0
> 
> 时间：2013-01-08T09:17:35.983
> 
> 标签：android

如何更新 Android 设备 sd 卡上存在的文件的日期和时间？我怎样才能以编程方式获得相同的结果？

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:29:14.610

我想它会帮助你

```
File file = new File(filePath);
Date lastModDate = new Date(file.lastModified());
Log.i("File last modified @ : "+ lastModDate.toString()); 
```

`lastModified`你可以从[这里](http://developer.android.com/reference/java/io/File.html#lastModified%28%29)阅读更多

问候海克·纳哈佩蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:32:17.483

只需检查目录的存在..

```
public long lastModified () 
```

返回上次修改此文件的时间，以 1970 年 1 月 1 日午夜以来的毫秒数为单位。**如果文件不存在，则返回 0。**

所以只需检查您的文件是否存在..

**代码：**

从文件中获取上次修改日期，

```
File file = new File("Your file path");
Date lastModDate = new Date(file.lastModified());
Log.i("File last modified : "+ lastModDate.toString()); 
```

将上次修改日期设置为文件..

```
try{

    File file = new File("/mnt/sdcard/temp.txt");

    //print the original last modified date
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    Log.i("Original Last Modified Date : " , ""+sdf.format(file.lastModified()));

    //set this date 
    String newLastModified = "01/06/2012";

    //need convert the above date to milliseconds in long value 
    Date newDate = sdf.parse(newLastModified);
    file.setLastModified(newDate.getTime());

    //print the latest last modified date
    Log.i("Lastest Last Modified Date : ", ""+sdf.format(file.lastModified()));

    }catch(ParseException e){
        e.printStackTrace();
    } 
```

我希望这能帮到您。

# ruby-on-rails-3 - 如何在 Rails 中修复这个 XSS

> ID：14211659
> 
> 赞同：1
> 
> 时间：2013-01-08T09:17:38.017
> 
> 标签：ruby-on-rails-3, security, escaping, xss

我不知道它是否算作 XSS，但它会导致错误

我有一个 image_tag 并且`:alt`标签是由用户生成的

但是，使用`sanitize`//对此无济于事（来自`h`OWASP-[此处](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#XSS_Locator)）`html_escape`

```
';alert(String.fromCharCode(88,83,83))//';alert(String.fromCharCode(88,83,83))//";
alert(String.fromCharCode(88,83,83))//";alert(String.fromCharCode(88,83,83))//--
></SCRIPT>">'><SCRIPT>alert(String.fromCharCode(88,83,83))</SCRIPT> 
```

做的时候

```
:alt => (the string above) 
```

图像的输出搞砸了

有没有办法修复这个 XSS？

我正在使用最新的导轨，红宝石

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:37:03.890

由于 Rails 3.2.8 以及[CVE-2012-3464](https://groups.google.com/forum/#!msg/rubyonrails-security/kKGNeMrnmiY/r2yM7xy-G48J)的修复，Rails 转义助手转义双引号和单引号。

如果您实际上使用的是正确的版本，则应该没问题。

```
>> ERB::Util.h '\';alert(String.fromCharCode(88,83,83))//\';alert(String.fromCharCode(88,83,83))//";alert(String.fromCharCode(88,83,83))//";alert(String.fromCharCode(88,83,83))//--></SCRIPT>">\'><SCRIPT>alert(String.fromCharCode(88,83,83))</SCRIPT>'
=> "&#39;;alert(String.fromCharCode(88,83,83))//&#39;;alert(String.fromCharCode(88,83,83))//&quot;;alert(String.fromCharCode(88,83,83))//&quot;;alert(String.fromCharCode(88,83,83))//--&gt;&lt;/SCRIPT&gt;&quot;&gt;&#39;&gt;&lt;SCRIPT&gt;alert(String.fromCharCode(88,83,83))&lt;/SCRIPT&gt;" 
```

（注意：上述原始字符串中的反斜杠需要存在，以便 Ruby 正确解析字符串，然后逐字逐句地包含单引号。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:13:24.327

你可以通过过滤器来修复它“'和>这三个字符就足够了

# .htaccess - 为 codeigniter 启用 htaccess 文件

> ID：14211661
> 
> 赞同：0
> 
> 时间：2013-01-08T09:17:42.823
> 
> 标签：.htaccess, codeigniter, apache2, opensuse

我正在尝试让 htaccess 在 codeigniter 项目上工作，但该模块无法正常工作，我不知道如何启用重写模块。已阅读 htaccess。操作系统是 Opensuse 12.2。

我在 default-server.conf 中有这个指令

别名 /safememoirs/ /home/gabriele/Web/safememoirs/

选项 索引 MultiViews AllowOverride None 命令允许，拒绝 全部允许

但我不明白

A) 如何启用模块 B) 我应该将 .htaccess 指令 ID 放在 default-server.conf 或站点目录中的什么位置？C）这是针对本地主机的，当我上网时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:38:59.930

我不明白你的问题是什么，但这是我的 htaccess 文件，用于删除 url 中的 index.php。它应该放在根文件夹中。

```
RewriteBase /

RewriteEngine on
RewriteCond $1 !^(index\.php|images|js|bjs|plugins|css|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# html - html/css定位三个文本框

> ID：14211663
> 
> 赞同：1
> 
> 时间：2013-01-08T09:17:54.657
> 
> 标签：html, css, textbox, inline

我目前正在尝试编写自己的投资组合网站并努力定位三个文本框。在我的网站上，我希望将页面左侧、中间和右侧的框全部排成一行。

我尝试了不同的方法，例如将每个文本框单独放置`div`并尝试定位它们，但它们仅位于下方，而不是彼此相邻，将 css 规则内联。我还尝试将这些框作为列表并尝试将它们内联。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:24:05.037

尝试这个

```
<div id="con">
    <div class="float">Hello</div>
    <div class="float">World</div>
</div> 
```

和CSS

```
.float { float:left; width:100px; height:100px; background:yellow; } 
```

在此处检查[JSFiddle](http://jsfiddle.net/shabeer90/ZNmE5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:30:53.460

你的 html 是这样的：

```
<div></div>
<div></div>
<div></div> 
```

和CSS：

```
div{width:30%;margin:1%;border:1px solid blue; float:left; height:100px;} 
```

这是一个示例：http: [//jsfiddle.net/795T4/](http://jsfiddle.net/795T4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:21:42.227

也许这

```
.foo
{
  float: left;
  width: 33%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:27:33.617

有一些像这样的html

```
<ul class="portfolio">
    <li><input id="txtBox1" type="text"></li>
    <li><input id="txtBox2" type="text"></li>
    <li class="last"><input id="txtBox3" type="text"></li>
</ul> 
```

和 css 沿线

```
.portfolio{
    margin:10px auto;
    width:1000px

}
.portfolio li{
    float:left;
    display:block;
    width:330px;
    height:200px;
    background-color:#e4e4e4;
    margin-right:15px
}
.portfolio .last{
    margin-right:0
} 
```

这是基于固定宽度的站点，我会使用无序列表`<ul>`，因为从语义上讲，您有一个包含 3 个框的列表。

# entity-framework-4 - 性能影响：实体表引用与该表引用的列表

> ID：14211664
> 
> 赞同：0
> 
> 时间：2013-01-08T09:17:54.643
> 
> 标签：entity-framework-4

我正在使用实体框架并为具有远程数据访问的应用程序开发架构。回到正题，我在数据库中查询一条记录（比如基于 itemcode）。现在我将得到结果集，我应该将它作为列表或集合返回还是简单地作为实体对象返回。我正在使用实体对象，但我的老板说我应该使用 List。他认为，返回结果作为一个实体也返回整个表结构。快速建议将不胜感激。

```
List<Employee> lstemployee = GetRecordByCode(itemCode) 
```

或者

```
Employee emp = GetRecordByCode(itemCode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:11:41.107

有什么不同？如果`itemCode`是唯一键，您将获得一个`Employee`对象或包含相同`Employee`对象的列表。你永远不会归还整张桌子。只有当`GetRecordByCode`你`context.Employees.ToList()`在.`Where``ToList()`

如果`itemCode`不是唯一的，您甚至必须使用列表。

# css - 字体不适用于野生动物园

> ID：14211668
> 
> 赞同：1
> 
> 时间：2013-01-08T09:18:04.900
> 
> 标签：css, safari, font-face

我在我的项目中使用@font-face 规则。这是我在我的css中使用的：

```
@font-face
{
    font-family: 'BHoma';
    src: url('fonts/BHoma.eot?#') format('eot'),
    url('fonts/BHoma.woff') format('woff'), 
    url('fonts/BHoma.ttf') format('truetype');
} 
```

除 Safari 外，所有浏览器都可以正常加载。字体位于名为 fonts 的文件夹中，该文件夹与 css 文件位于同一文件夹中，并且网站的语言是波斯语。我不知道如何调试这个问题。谁能指出需要做什么才能使它们适用于 Safari？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T15:40:54.523

将 @charset "UTF-8" 添加到 cssfile 的顶部。

# javascript - 使用 jQuery() 添加元素

> ID：14211669
> 
> 赞同：0
> 
> 时间：2013-01-08T09:18:09.177
> 
> 标签：javascript, jquery, html, appendto

我试图将 appendTo() 元素添加到文档中。我有：

```
 jQuery('<div/>', {
                        id: "1",
                        style: "float:right;",  
                        rel: data.uploadFileList[0].id,
                        onmouseover: ""                            
                    }.addClass("delete")                            
                        ).appendTo($("[id='"+value+"']").find('#'+parameter));  

                    jQuery('<a/>', {
                        href: url,
                        rel: "lightbox"
                    }).addClass("icon")
                    .appendTo($("[id='"+value+"']").find('#'+parameter)); 
```

我可以在一个 jQuery() 中做些什么吗？一个一个地添加两个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:24:19.680

追加为 jQuery 元素数组。利用：

```
$([$('<div >', {
    id: "1",
    style: "float:right;",  
    rel: data.uploadFileList[0].id,
    onmouseover: ""                            
}), $('<a/>', {
    href: url,
    rel: "lightbox"
})]).appendTo($("[id='"+value+"']").find('#'+parameter)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:23:56.177

当您的 JS 中包含所有这些 HTML 时，它往往会变得混乱。我会使用一个模板并立即将整个模板附加到元素上。基本结构：

```
<script type="template/javascript" id="MyTemplate">                         
       <p>Hello {{name}}</p>                        
 </script>

<script>
var html = $("#MyTemplate").html()
                           .replace(/{{name}}/,name);
$("#someDiv").append(html);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:26:44.753

如果你真的想要一个简单的陈述，你可以这样做

```
$('#'+parameter).append(
   '<div id=1 style="float:right;" rel="'+data.uploadFileList[0].id+'" class=delete></div>'
   + '<a href="'+url+'" rel="lightbox" class=icon></a>'
); 
```

但这真的是一种进步吗？

请注意，我认为您的复杂元素搜索的第一部分并不是一个条件，而是多余的（一个 id 只能在文档中出现一次）。

# c# - AjaxToolKit 自动完成扩展器只是不工作

> ID：14211671
> 
> 赞同：0
> 
> 时间：2013-01-08T09:18:12.023
> 
> 标签：c#, asp.net, ajax, autocomplete, autocompleteextender

所以我现在花了 4 天时间研究和尝试在 StackOverflow 和其他网站上可以找到的所有内容。而且我只是无法让我的 Ajax AutoCompleteExtender 工作。我正在为 .NET 4.5 使用 VS 2012 和 ASP.NET 和 C# 构建这是我的代码：

~/仪表板/Default.aspx

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

   <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolKit" %>

   <ajaxToolKit:ToolkitScriptManager ID="ScriptManager1" runat="server">
       <Services>
           <asp:ServiceReference Path="~/Dashboard/AutoComplete2.asmx" />
       </Services>
   </ajaxToolKit:ToolkitScriptManager>

   <asp:TextBox ID="CarMake_TextBox" runat="server"></asp:TextBox>

   <ajaxToolKit:AutoCompleteExtender 
       ID="CarMake_AutoCompleteExtender" runat="server"
       Enabled="true"
       ServicePath="AutoComplete2.asmx"
       ServiceMethod="GetCarMakeList"
       TargetControlID="CarMake_TextBox"
       MinimumPrefixLength="1" FirstRowSelected="True"
       >
   </ajaxToolKit:AutoCompleteExtender>

</asp:Content> 
```

~/Dashboard/AutoComplete2.asmx.cs (C#)

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace CDC.Dashboard
{
    /// <summary>
    /// Summary description for AutoComplete2
    /// </summary>
    [WebService(Namespace = "http://websiteleaders.com/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
    [System.Web.Script.Services.ScriptService]
    public class AutoComplete2 : System.Web.Services.WebService
    {
        [System.Web.Services.WebMethod]
        [System.Web.Script.Services.ScriptMethod]
        public string[] GetCarMakeList(string prefixText, int count)
        {
            string sql = "Select DISTINCT Make from Car_Makes_Models Where Make LIKE @prefixText";
            SqlDataAdapter da = new SqlDataAdapter(sql, "Data Source=localhost\\SQLEXPRESS;Initial Catalog=CDC;Integrated Security=True");
            da.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 50).Value = prefixText + "%";
            DataTable dt = new DataTable();
            da.Fill(dt);
            string[] items = new string[dt.Rows.Count];
            int i = 0;
            foreach (DataRow dr in dt.Rows)
            {
                items.SetValue(dr["Make"].ToString(), i);
                i++;
            }
            return items;
        }
    }
} 
```

我一辈子都无法让它发挥作用。当我尝试通过 Web 浏览器运行 Web 服务并输入值时，它会正确检索所需的信息并将它们作为字符串数组返回。但似乎 AutoCompleteExtender 只是没有触发。

值得注意的是，我第一次尝试时，它奏效了。然后在任何后续尝试之后它没有。我傻眼了。如果我用 IE 运行它，我会收到关于使用 AJAX ScriptManager（我已经在使用）和 4.0 脚本的错误消息。我已经正确安装和引用了 AJAX 工具包，是的，它确实支持 .NET v4.5，这是我的目标框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T14:54:52.177

使用 AjaxControlToolkit**版本 4.1.60919**它会正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:30:14.737

您是否尝试将 bin 文件夹中的 ajaxcontroltoolkit.dll 替换为最新版本？我发现有时 VS 有时会用参考副本覆盖 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:56:47.690

尝试使用下面的代码片段，使用`ScriptManager`而不是`ToolkitScriptManager`

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
            <Scripts>
                <asp:ScriptReference Name="AjaxControlToolkit.Common.Common.js" Assembly="AjaxControlToolkit" />
                <asp:ScriptReference Name="AjaxControlToolkit.ExtenderBase.BaseScripts.js" Assembly="AjaxControlToolkit" />
            </Scripts>
</asp:ScriptManager> 
```

参考[asp.net论坛](http://forums.asp.net/t/1228497.aspx)

还要检查 的版本`AjaxControlToolkit.dll`，应该是`3.5`或更多而不是`1.0`

检查我对[AjaxControlToolkit.CommonToolkitScripts 错误](https://stackoverflow.com/a/5192453/468718)的回答，该错误解决了其他用户在不同的 .NET 框架场景中遇到类似问题的问题。

# java - 如何在Android中保存数据库？

> ID：14211685
> 
> 赞同：0
> 
> 时间：2013-01-08T09:19:42.100
> 
> 标签：java, android, database, sqlite

我是 android 开发的新手，我正在尝试制作一个简单的应用程序，我可以在其中添加和查看我的记录。我可以成功添加数据并在表格中查看它们，每当我运行程序时它都会起作用。（我正在关注[本教程](https://www.youtube.com/watch?v=9ew_Ajpqwqg&list=EC2F07DBCDCC01493A)）但是每次我关闭 Eclipse 并尝试添加新数据并查看它们时，我之前输入的信息都消失了。好像当我关闭 Eclipse 时，它​​并没有保存我的数据库。这是我正在关注的示例代码。

```
package com.example.hotornot;

import java.sql.Statement;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Example {

public static final String KEY_ROWID = "id";
public static final String KEY_NAME = "name";
public static final String KEY_NUM = "number";

public static final String DATABASE_NAME = "dbTry";
public static final String DATABASE_TABLE = "tblSamp";
public static final int DATABASE_VERSION = 1;

public DbHelper ourhelper;
public final Context ourcontext;
public SQLiteDatabase ourdatabase;

 class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub
        arg0.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID + " INTEGER, " + KEY_NAME + " NULL, " + KEY_NUM + " NULL);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        // TODO Auto-generated method stub
        arg0.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
        onCreate(arg0);

    }

}

public Example(Context c)
{
    ourcontext = c;     
}

public Example open() throws SQLException
{
    ourhelper = new DbHelper(ourcontext);
    ourdatabase = ourhelper.getWritableDatabase();
    return this;
}

public void close()
    {
        ourhelper.close();
    }

public long createEntry(String name, String num)
{
    // TODO Auto-generated method stub

    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, name);
    cv.put(KEY_NUM, num);
    return ourdatabase.insert(DATABASE_TABLE, null, cv);        
}

public  String getData() 
{
    // TODO Auto-generated method stub

    String[] columns = new String[]{ KEY_ROWID,KEY_NAME, KEY_NUM};
    Cursor c = ourdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iNum = c.getColumnIndex(KEY_NUM);

    for (c.moveToFirst(); ! c.isAfterLast(); c.moveToNext()){
    result = result + c.getString(iRow) + " " +c.getString(iName) + " " + c.getString(iNum) + "\n";

    }
    return result;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:24:37.770

您必须覆盖现有数据库或卸载应用程序

请检查您的代码

on Activity onCreate 事件检查是否存在 db 文件如果存在不要覆盖并跳过该过程肯定会得到旧记录

# android - 我们可以在 html 锚标记中指定 java 活动路径以将 java 活动与 html 一起使用吗？

> ID：14211687
> 
> 赞同：0
> 
> 时间：2013-01-08T09:19:44.657
> 
> 标签：android, cordova

我想使用锚标记从 html 中按下链接来调用 java 活动。那有可能吗.. 如果没有，任何人都可以建议我如何从 html 索引页面调用 java 活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:17:24.730

您要做的是编写一个插件。从您的锚标记中，您可以调用插件的[JavaScript 接口](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)。然后通过我们用来在 JavaScript 和 Java 之间进行通信的 cordova.exec 方法，您的[Java Plugin 方法](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)将被调用。

# c++ - 对 FCGI 概念感到困惑

> ID：14211689
> 
> 赞同：1
> 
> 时间：2013-01-08T09:19:59.890
> 
> 标签：c++, c, fastcgi

我目前正在尝试实现一个在 linux 上运行的小型 FastCGI 多线程应用程序。我使用来自[fastcgi.com](http://www.fastcgi.com/drupal/)的库。现在我不确定我是否真的理解网络服务器和我的应用程序之间的 FCGI 通信如何工作的概念。

首先，我在我的应用程序中创建一个新套接字。我返回文件描述符。

```
int socketIn = 0;
struct sockaddr_un local;
int length = 0;
int value = 1;

memset(&local, 0, sizeof(local));

local.sun_family = AF_UNIX;

strcpy(local.sun_path, socketPath);

length = strlen(local.sun_path) + sizeof(local.sun_family);

/* delete old unix socket */
if(-1 == unlink(socketPath))
{
    switch (errno)
    {
        case ENOENT:
        {
        }break;

        default:
        {
            printf("\n[Error]\tCould not remove old socket.");
            return -1;
        }
    }
}

/* create new socket */
if (-1 == (socketIn = socket(AF_UNIX, SOCK_STREAM, 0))) 
{
    printf("\n[Error]\tCould not create socket.");
    return -2;
}

/* bind socket */
if (-1 == bind(socketIn, (struct sockaddr *)&local, length)) 
{
    printf("\n[Error]\tCould not bind socket.");
    return -4;
}

return socketIn; 
```

之后我初始化 FCGI 库：`FCGX_Init();`

现在我开始创建我的线程：

```
#define THREAD_COUNT 2

static int counts[THREAD_COUNT];

struct thread_data{
   int  thread_id;
   int  fcgiSocket;
};

struct thread_data thread_data_array[THREAD_COUNT];

int main(int argc, char** argv) 
{
   int i;
   pthread_t id[THREAD_COUNT];
   for (i = 1; i < THREAD_COUNT; i++)
   {
      thread_data_array[i].thread_id = i;
      thread_data_array[i].fcgiSocket = fcgi.fcgiSocket;
      pthread_create(&id[i], NULL, doit, &thread_data_array[i]);
   }

   thread_data_array[0].thread_id = 0;
   thread_data_array[0].fcgiSocket = fcgi.fcgiSocket;

   doit((void *)&thread_data_array[0]);

   return 0;
} 
```

最后我的线程代码：

```
static void *doit(void *a)
{
    struct thread_data *my_data;
    my_data = (struct thread_data *) a;
    int rc, i;
    pid_t pid = getpid();
    FCGX_Request request;
    char *server_name;

    FCGX_InitRequest(&request, my_data->fcgiSocket, 0);

    for (;;)
    {
        static pthread_mutex_t accept_mutex = PTHREAD_MUTEX_INITIALIZER;
        static pthread_mutex_t counts_mutex = PTHREAD_MUTEX_INITIALIZER;

        /* Some platforms require accept() serialization, some don't.. */
        pthread_mutex_lock(&accept_mutex);
        rc = FCGX_Accept_r(&request);
        pthread_mutex_unlock(&accept_mutex);

        if (rc < 0)
            break;

        server_name = FCGX_GetParam("SERVER_NAME", request.envp);

        FCGX_FPrintF(request.out,
            "Content-type: text/html\r\n"
            "\r\n"
            "<title>FastCGI Hello! (multi-threaded C, fcgiapp library)</title>"
            "<h1>FastCGI Hello! (multi-threaded C, fcgiapp library)</h1>"
            "Thread %d, Process %ld<p>"
            "Request counts for %d threads running on host <i>%s</i><p><code>",
            my_data->thread_id, pid, THREAD_COUNT, server_name ? server_name : "?");

        pthread_mutex_lock(&counts_mutex);
        ++counts[my_data->thread_id];
        for (i = 0; i < THREAD_COUNT; i++)
            FCGX_FPrintF(request.out, "%5d " , counts[i]);
        pthread_mutex_unlock(&counts_mutex);

        FCGX_Finish_r(&request);
    }

    return NULL;
} 
```

现在我担心我使用的套接字。3 个线程都将写入同一个套接字。使用多线程 FCGI 应用程序是否有其他或更好的方法来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T18:05:14.067

我正在回复一个旧帖子，但也许其他人可以从中受益。

> “现在我担心我使用的套接字。3 个线程都会写入同一个套接字。”

没什么可担心的！

根据 Fast CGI 规范，每个请求都有关联的 ID，当线程将响应写回套接字时，它会将其服务的请求的 ID 关联起来。因此，即使线程以不同的顺序写入，Web 服务器也知道哪个响应是针对哪个请求的。规范在这里 -

[http://www.fastcgi.com/drupal/node/6?q=node/22](http://www.fastcgi.com/drupal/node/6?q=node/22)

只要消息的大小小于 PIPE_BUF，就可以保证对套接字的写入是原子的。libfcgi 将写入大小限制为 PIPE_BUF。您可以在以下文件中检查 -

[http://www.fastcgi.com/mod_fastcgi/mod_fastcgi.h](http://www.fastcgi.com/mod_fastcgi/mod_fastcgi.h)

```
#define FCGI_MAX_MSG_LEN  PIPE_BUF 
```

希望这个解释能消除疑虑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:24:32.303

您可以创建一个处理所有套接字通信的新线程，并让其他线程将它们的消息放入从套接字线程读取的共享队列中。

# php - PHP 5.4 中的非法字符串偏移

> ID：14211691
> 
> 赞同：0
> 
> 时间：2013-01-08T09:20:16.127
> 
> 标签：php, drupal-6

以下代码适用于使用 PHP 5.3 的计算机，但不适用于 PHP 5.4：

```
function __clone() {
  $this->changed = TRUE;
  foreach ($this->conditions as $key => $condition) {
    if (
    $condition['field']
    instanceOf QueryConditionInterface) {
      $this->conditions[$key]['field'] = clone($condition['field']);
    }
  }
} 
```

`$condition`在这两种情况下都没有“字段”偏移量，但在 PHP 5.3 中，库继续工作而没有抱怨，但是在 PHP 5.4 中给出了以下警告消息：

```
Warning: Illegal string offset 'field' in DatabaseCondition->__clone() 
```

不久之后，库（来自 Drupal6）停止工作。

知道如何解决这个问题吗？

`isset($condition['field'])`即使它是框架的核心库，我是否应该使用它？

# c# - SQLite 准备好的语句在 SQLiteDateReader 上不起作用？

> ID：14211692
> 
> 赞同：3
> 
> 时间：2013-01-08T09:20:17.377
> 
> 标签：c#, sqlite, prepared-statement

这是我的代码

```
SQLiteConnection connection = new SQLiteConnection("Data Source=userData.dat;version=3;");
connection.Open();

SQLiteCommand cmd = connection.CreateCommand();

cmd.CommandText = "SELECT * FROM tags WHERE tags_tags LIKE '%@tags_tags%' ORDER by tags_id DESC LIMIT 0, 100";
cmd.Parameters.Add("@tags_tags", DbType.String);
cmd.Parameters["@tags_tags"].Value = tags;

SQLiteDataReader reader = cmd.ExecuteReader();
var _sql = cmd.CommandText;
MessageBox.Show(_sql);//still shows "SELECT * FROM tags WHERE tags_tags LIKE '%@tags_tags%' ORDER by tags_id DESC LIMIT 0, 100" 
```

我也用过`cmd.Parameters.AddWithValue`，但没用……
错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:29:46.837

 ~~连接字符串中的参数，例如

```
LIKE '%' || @tags_tags || '%' 
```

 ~~您用单引号将参数括起来，从而使其成为一个值。删除单引号并连接参数值的百分比符号。

```
LIKE @tags_tags 
```

在你的参数中，

```
cmd.Parameters["@tags_tags"].Value = '%' + tags + '%'; 
```~~~~

# macos - Nginx + PHP-FPM 在 Mountain Lion 上非常慢

> ID：14211693
> 
> 赞同：6
> 
> 时间：2013-01-08T09:20:17.787
> 
> 标签：macos, nginx, php

我已经在运行 ML 的 MacBook 上使用 PHP-FPM 设置了 Nginx。它*工作*正常，但当我在浏览器中运行页面时，连接需要 5 到 10 秒。甚至以下 PHP 脚本：

```
<?php
die(); 
```

连接大约需要 5 秒钟。我正在使用 Chrome，我在状态栏中收到“正在发送请求”消息大约 7 秒。如果我再次刷新它似乎立即工作，但如果我离开它大约 10 秒，它会再次“睡眠”。就好像 nginx 或 PHP 会进入休眠状态，然后需要很长时间才能再次醒来。

编辑：这也会影响服务器上的静态文件，因此这似乎是 DNS 或 nginx 的问题。

谁能帮我弄清楚是什么原因造成的？

nginx.conf

```
worker_processes 2;

events {
   worker_connections 1024;
}

http {
    include mime.types;
   default_type text/plain;
   server_tokens off;
   sendfile on;
   tcp_nopush on;
   keepalive_timeout 1;
   gzip on;
   gzip_comp_level 2;
   gzip_proxied any;
   gzip_types text/plain text/css text/javascript application/json application/x-javascript text/xml application/xml application/xml+rss;

   index index.html index.php;

   upstream www-upstream-pool{
      server unix:/tmp/php-fpm.sock;
   }

  include sites-enabled/*;
} 
```

php-fpm.conf

```
[global]
pid = /usr/local/etc/php/var/run/php-fpm.pid
; run in background or in foreground?
; set daemonize = no for debugging
                         daemonize = yes

include=/usr/local/etc/php/5.4/pool.d/*.conf 
```

池.conf

```
[www]
user=matt
group=staff
pm = dynamic
pm.max_children = 10
pm.start_servers = 5
pm.min_spare_servers = 5
pm.max_spare_servers = 10
pm.max_requests = 500
listen = /tmp/php-fpm.sock
;listen = 127.0.0.1:9000
php_flag[display_errors] = off 
```

网站可用/cft

```
server {
   listen 80;
   server_name cft.local;
   root /Users/matt/Sites/cft/www;
   access_log /Users/matt/Sites/cft/log/access.log;
   error_log /Users/matt/Sites/cft/log/error.log;
   index index.php;

   location / {
      try_files $uri $uri/ /index.php?$args;
   }

   include fastcgi_php_default.conf;
} 
```

fastcgi_php_default.conf

```
fastcgi_intercept_errors on;

location ~ .php$
    {
    fastcgi_split_path_info ^(.+.php)(/.+)$;

    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  QUERY_STRING       $query_string;
    fastcgi_param  REQUEST_METHOD     $request_method;
    fastcgi_param  CONTENT_TYPE       $content_type;
    fastcgi_param  CONTENT_LENGTH     $content_length;

    fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
    fastcgi_param  REQUEST_URI        $request_uri;
    fastcgi_param  DOCUMENT_URI       $document_uri;
    fastcgi_param  DOCUMENT_ROOT      $document_root;
    fastcgi_param  SERVER_PROTOCOL    $server_protocol;
    fastcgi_param  HTTPS              $https if_not_empty;

    fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
    fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;

    fastcgi_param  REMOTE_ADDR        $remote_addr;
    fastcgi_param  REMOTE_PORT        $remote_port;
    fastcgi_param  SERVER_ADDR        $server_addr;
    fastcgi_param  SERVER_PORT        $server_port;
    fastcgi_param  SERVER_NAME        $server_name;

    fastcgi_param PATH_INFO         $fastcgi_path_info;
    fastcgi_param PATH_TRANSLATED   $document_root$fastcgi_path_info;

    fastcgi_read_timeout 300;

    fastcgi_pass www-upstream-pool;

    fastcgi_index index.php;
}

fastcgi_param  REDIRECT_STATUS    200; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T14:07:49.380

一个原因可能是 - 正如上面已经怀疑的那样 - 您的服务器运行良好，但 DNS 查找有问题。

这么长的时间通常是由try + timeout引起的，然后以其他方式重试，工作，缓存。

缓存工作请求将解释为什么您的第二个 http 请求很快。

我几乎可以肯定，这是由 DNS 查找引起的，它尝试查询无法访问的服务，在超时后放弃，然后尝试工作服务并将结果缓存几分钟。

> Apple 最近对操作系统处理“.local”名称解析请求的方式进行了重大更改，这可能会对 Active Directory 身份验证和 DFS 解析产生不利影响。
> 
> 在处理“.local”请求时，Mac OS 现在会发送多播 DNS (mDNS) 或广播，然后等待该请求超时，然后才能将信息正确发送到 DNS 服务器。在大多数情况下，由此引起的延迟会导致身份验证失败。

[http://www.thursby.com/local-domain-login-10.7.html](http://www.thursby.com/local-domain-login-10.7.html)

他们提供将超时设置为尽可能小的值，显然仍然是 1 秒 - 并不真正令人满意。

我建议使用 localhost 或 127.0.0.1 或尝试[http://test.dev](http://test.dev)作为本地域

/etc/hosts

```
127.0.0.1 localhost test.dev 
```

**编辑** 在 OSX`.local`中似乎确实是为 LAN 设备保留的 tld。使用上面建议的另一个域将定义。解决这个问题

[http://support.apple.com/kb/HT3473](http://support.apple.com/kb/HT3473)

**编辑 2** 找到这篇很棒的文章，它准确地描述了您的问题以及如何解决它

[http://www.dmitry-dulepov.com/2012/07/os-x-lion-and-local-dns-issues.html?m=1](http://www.dmitry-dulepov.com/2012/07/os-x-lion-and-local-dns-issues.html?m=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T16:17:24.280

我在您的配置中看不到任何会导致此行为的内容。由于 Nginx 的配置看起来不错，并且这会影响静态和 CGI​​ 请求，我怀疑这是系统问题。

一个可能值得调查的问题是问题是否是由服务器上的 IPv6 协商引起的。

如果您使用环回 (127.0.0.1) 作为侦听地址，请查看`/etc/hosts`并确保存在以下行：

```
::1    localhost6.localdomain6 localhost6
::1    site.local cft.local 
```

如果这不能解决问题，恐怕您需要查看更高级的诊断，可能在 Nginx 实例上使用[strace或类似的。](http://www.thegeekstuff.com/2011/11/strace-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:25:12.537

（这开始是一个评论，但它有点长）

这里有一些非常糟糕的东西 - 但我在你的配置中没有看到任何明显的东西来解释它。我首先会在请求进行时查看 top 和 netstat，并在处理请求后检查您的日志（网络服务器和系统）。如果这仍然没有显示任何内容，那么下一站将是捕获所有网络流量 - 如此长的延迟最有可能的原因是 ident / DNS 查找失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:07:11.180

除非有任何与配置相关的问题，否则它可能是编译问题。

我建议你从 OS X 开源包管理器 homebrew 安装 nginx。

如果您还没有自制软件（每个开发人员都应该！），您可以[从这里获取它，](http://mxcl.github.com/homebrew/)或者只是在终端中运行它：

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)" 
```

然后运行

`brew install ngnix`

并且 ngnix 将从 homebrew 存储库中部署。显然，您需要确保首先删除了旧的 nginx 副本。

我推荐这个的原因是 homebrew 为每个需要它的开源库提供了许多 OS X 特定的补丁，并且被社区大量使用和测试。我过去在 OS X 上使用过 homebrew 的 nginx，没有任何问题可言。

# c++ - 通过多个线程访问向量？

> ID：14211696
> 
> 赞同：0
> 
> 时间：2013-01-08T09:20:21.053
> 
> 标签：c++, multithreading, mutex

如何保护向量 v 不崩溃？还有一个问题，为什么它还没有崩溃，不是吗？

```
#include <Windows.h>
#include <thread>
#include <vector>
#include <algorithm>
#include <iostream>

using namespace std;

vector<int> v;

void a()
{
    while (true)
    {
        v.push_back(1);
        Sleep(100);
    }
}

void b()
{
    while (true)
    {
        if (!v.empty())
        {
            v.erase(v.begin());
        }
        Sleep(100);
    }
}

void c()
{
    while (true)
    {
        v.push_back(1);

        Sleep(100);
    }
}

int main()
{
    thread(&a).detach();
    thread(&b).detach();
    thread(&c).detach();

    while (true)
    {

        for (int i = 0; i < v.size(); i++)
        {
            v[i]++;
        }

        cout << v.size() << endl;

        if (!v.empty())
            v.erase(v.begin());

        Sleep(100);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:35:49.223

要从多个线程访问一个向量，您需要添加 std::mutex，惯用的方法是实现 RAII，请参见下面的演示代码：

```
#include <mutex>
#include <thread>

class raii_vector
{
public:
  raii_vector() {  }
  void Add() 
  { 
    std::lock_guard<std::mutex> lock(m_);
    v_.push_back(1);
  }

  void Remove() 
  { 
    std::lock_guard<std::mutex> lock(m_);
    if (!v_.empty())
    {
        v_.erase(v_.begin());
    }
  }

private:
  std::mutex       m_;
  std::vector<int> v_;
};

raii_vector rv;

void a()
{
  while (true)
  {
    rv.Add();
    std::cout << "adding " << std::endl;
    std::chrono::milliseconds dura( 100 );
    std::this_thread::sleep_for( dura );
  }
}

void b()
{
  while (true)
  {
    std::cout << "removing " << std::endl;
    rv.Remove();
    std::chrono::milliseconds dura( 100 );
    std::this_thread::sleep_for( dura );
  }
}

int main(int argc, char* argv[])
{
  std::thread t1(a);
  std::thread t2(b);

  t1.join();
  t2.join();

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:55:04.687

当想要使用来自多线程的向量等数据结构时，我发现[英特尔线程构建模块库](http://threadingbuildingblocks.org/ "英特尔线程构建模块")非常有用。

# maven - 如何配置 Maven 项目以将快照和版本部署到 Nexus？

> ID：14211697
> 
> 赞同：29
> 
> 时间：2013-01-08T09:20:21.680
> 
> 标签：maven, deployment, nexus

如何配置 Maven 项目以将快照和版本部署到 Nexus？

```
<distributionManagement>
    <repository>
        <id>InternalReleases</id>
        <name>Internal Releases</name>
        <url>http://192.168.16.232:8081/nexus/content/repositories/releases/</url>
    </repository>
    <repository>
        <id>InternalSnapshots</id>
        <name>Internal Snapshots</name>
        <url>http://192.168.16.232:8081/nexus/content/repositories/snapshots/</url>
    </repository>
</distributionManagement> 
```

此配置在带有 m2e 1.2 的 Eclipse 3.8 中创建错误

```
Project build error: Non-parseable POM D:\Workspaces\W\Parent\pom.xml: Duplicated tag: 'repository' (position: START_TAG 
 seen ... 
```

我希望在 pom 的版本后缀为 -SNAPSHOT 时将工件部署到 InternalSnapshots 存储库，并在 RELEASE 时部署到 InternalReleases 存储库。这应该使用相同的 pom.xml 文件并执行相同的`mvn deploy`命令。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-08T09:51:09.350

您需要区分发布和快照存储库。`<distributionManagement>`只允许一个`<repository>`和一个`<snapshotRepository>`孩子。

[http://maven.apache.org/pom.html#Distribution_Management](http://maven.apache.org/pom.html#Distribution_Management)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-08T14:24:52.267

`pom.xml`配置示例

```
<!-- http://maven.apache.org/pom.html#Distribution_Management -->
<distributionManagement>
    <snapshotRepository>
        <id>InternalSnapshots</id>
        <name>Internal Snapshots</name>
        <url>http://192.168.16.232:8081/nexus/content/repositories/snapshots/</url>
    </snapshotRepository>
    <repository>
        <id>InternalReleases</id>
        <name>Internal Releases</name>
        <url>http://192.168.16.232:8081/nexus/content/repositories/releases/</url>
    </repository>
</distributionManagement> 
```

`.m2/settings.xml`默认 Nexus 安装的片段

```
<server>   
    <id>thirdparty</id>   
  <username>deployment</username>
  <password>deployment123</password>
</server>
<server>
  <id>InternalReleases</id>
  <username>deployment</username>
  <password>deployment123</password>
 </server>  
<server>
  <id>InternalSnapshots</id>
  <username>deployment</username>
  <password>deployment123</password>
 </server> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T14:49:30.990

你可以两者都做。

添加`maven-release-plugin`2.5.3

运行以下命令：

```
mvn deploy clean:release release:prepare release:perform 
```

# php - 在我的 Wordpress 网站上更改头像位置时遇到问题

> ID：14211703
> 
> 赞同：0
> 
> 时间：2013-01-08T09:20:37.547
> 
> 标签：php, avatar, avatars

所以我使用的是别人制作的脚本。WordPress 网站。

我想更改默认上传位置：

```
mysite.com/wp-content/themes/theme_name/images/avatar/avatarnamehere20.jpg 
```

至：

```
mysite.com/images/avatar/avatarnamehere20.jpg 
```

无论如何，这是第一个场景的工作代码：

**处理上传的代码**

```
if(isset($_FILES['image']))
        $avatar    = $_FILES['image'];
$save_to = "/images/avatar";

    $logo_results = tgt_resize_image($avatar['tmp_name'] ,$save_to,150,150,$avatar['type'], get_the_author_meta('display_name', $user_ID));
        if ($logo_results === false)
        {
            global $errors;
            $errors .= __("Error: We can't upload your avatar", 'ad')."<br>";
        }
        else{
            $avatar = get_user_meta($user_ID,'tgt_image',true);
            if(file_exists(TEMPLATEPATH . $avatar) && $avatar != '/images/avatar.png')
    unlink(TEMPLATEPATH . $avatar);
            $avatar = $logo_results;
            update_user_meta($user_ID,'tgt_image',$avatar);
        } 
```

**函数 tgt_resize_image**

```
function tgt_resize_image($ipath, $tdir, $twidth, $theight, $image_type, $name_image){
try{
    $simg = '';
    //check image type
    $type_arr = array('image/jpg', 'image/jpeg', 'image/pjpeg');
    if (in_array($image_type, $type_arr))
    {
        $simg = imagecreatefromjpeg($ipath);
    }
    elseif($image_type == 'image/png'){
        $simg = imagecreatefrompng($ipath);
    }
    elseif($image_type == 'image/gif'){
        $simg = imagecreatefromgif($ipath);
    }
    else return false;

    $currwidth = imagesx($simg);   // Current Image Width
    $currheight = imagesy($simg);
   /* if ($twidth == 0) $twidth = $currwidth;
    if ($theight == 0) $theight = $theight;*/

    $dimg = imageCreateTrueColor($twidth, $theight);   // Make New Image For Thumbnail

    $name_image .= rand(1, 100);
    $name_image = sanitize_file_name($name_image);

/*if($image_type == IMAGETYPE_GIF ) {
imagealphablending($dimg, false);
imagesavealpha($dimg,true);
$transparent = imagecolorallocatealpha($dimg, 255, 255, 255, 127);
imagefilledrectangle($dimg, 0, 0, $twidth, $theight, $transparent);
imagecolortransparent  ( $dimg, $transparent);
} elseif( $image_type == IMAGETYPE_PNG ) {
// These parameters are required for handling PNG files.
imagealphablending($dimg, false);
imagesavealpha($dimg,true);
$transparent = imagecolorallocatealpha($dimg, 255, 255, 255, 127);
imagefilledrectangle($dimg, 0, 0, $twidth, $theight, $transparent);
 }*/

    imagecopyresampled ($dimg, $simg, 0, 0, 0, 0, $twidth, $theight, $currwidth, $currheight);
    //imagecopyresized($dimg, $simg, 0, 0, 0, 0, $twidth, $theight, $currwidth, $currheight);   // Copy Resized Image To The New Image (So We Can Save It)
   // imagejpeg($dimg, TEMPLATEPATH . "$tdir/" . $name_image . '.jpg');   // Saving The Image
   $link =  $tdir . '/' . $name_image;
    if (in_array($image_type, $type_arr))
    {
        imagejpeg($dimg, TEMPLATEPATH . "$tdir/" . $name_image . '.jpg');
        $link .= '.jpg';
    }
    elseif($image_type == 'image/png'){
        imagepng($dimg, TEMPLATEPATH . "$tdir/" . $name_image . '.png');
        $link .= '.png';
    }
    elseif($image_type == 'image/gif'){
        imagegif($dimg, TEMPLATEPATH . "$tdir/" . $name_image . '.gif');
        $link .= '.gif';
    }
}
catch (exception $e){
    imagedestroy($simg);   // Destroying The Temporary Image
    imagedestroy($dimg);   // Destroying The Other Temporary Image
    return false;
}

imagedestroy($simg);   // Destroying The Temporary Image
imagedestroy($dimg);   // Destroying The Other Temporary Image
return $link;

// wp_attachment_is_image()
} 
```

我曾尝试更改代码。我设法让 mysql 字段正确更新，但文件根本不会上传。所以页面试图显示图像但它不存在。

这就是我得到的：

```
if(isset($_FILES['image']))
        $avatar    = $_FILES['image'];
    //$save_to = "/images/avatar";
    $save_to = site_url('/') . 'images/avatar';

    $logo_results = tgt_resize_image($avatar['tmp_name'] ,$save_to,150,150,$avatar['type'], get_the_author_meta('display_name', $user_ID));
        if ($logo_results === false)
        {
            global $errors;
            $errors .= __("Error: We can't upload your avatar", 'ad')."<br>";
        }
        else{
            $avatar = get_user_meta($user_ID,'tgt_image',true);
            if(file_exists(site_url('/')  . $avatar) && $avatar != '/images/avatar.png')
    unlink(site_url('/') . $avatar);
            $avatar = $logo_results;
            update_user_meta($user_ID,'tgt_image',$avatar);
        }

//wp_redirect( get_bloginfo('url').'/?author='.$current_user->ID );
wp_redirect(get_author_posts_url($user_ID));
    exit; 
```

在 tgt_resize_image 函数中，我将 TEMPLATEPATH 更改为 site_url('/') 但这不起作用。

任何帮助表示赞赏！我会奖励帮助我的人，因为这很令人沮丧！

如果您需要来自任何地方的更多信息或代码，请告诉我。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:15:19.753

好的，我找到了答案！

函数中：tgt_resize_image

imagejpeg、imagepng 和 imagegif 正在保存图像文件。

TEMPLATEPATH 指向 WP 模板位置。

使用 site_url() 将不起作用，因为它现在将指向 Web 位置 (mysite.com)。

我不得不用 $_SERVER['DOCUMENT_ROOT'] 替换 TEMPLATEPATH 并且它最终工作正常。

祝你好运！

# sql - 仅选择具有指定年份数据的月份

> ID：14211704
> 
> 赞同：0
> 
> 时间：2013-01-08T09:20:42.937
> 
> 标签：sql

我想要一个查询，它只选择那些具有指定年份数据的月份，但我不太确定如何实现这一点。这是我到目前为止所得到的：

```
select MONTH(DateRaised) as 'Month'
from Complaints
where
    (select COUNT(*)
     from Complaints
     where YEAR(DateRaised) = 2000) > 0
group by MONTH(dateraised)
order by MONTH(dateraised) 
```

因此，如果我的数据在 2000 年 5 月、8 月和 12 月有投诉，那么我只想`5, 8 and 12`出现在我的查询中，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:22:58.350

```
select MONTH(DateRaised) as 'Month'
from Complaints
where YEAR(DateRaised) = 2000
ORDER BY MONTH(dateraised) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:23:24.740

```
select DISTINCT MONTH(DateRaised) AS 'Month'
from Complaints
where YEAR(DateRaised) = 2000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:23:25.093

```
SELECT MONTH(DateRaised) as 'Month', COUNT(*) AS count
FROM Complaints
WHERE YEAR(DateRaised) = 2000
GROUP BY MONTH(dateraised)
ORDER BY MONTH(dateraised) 
```

# iphone - 从字符串 iOS 中删除字符

> ID：14211706
> 
> 赞同：3
> 
> 时间：2013-01-08T09:20:53.580
> 
> 标签：iphone, objective-c, ios, encoding, character

我有一个用于解析新闻的 XML。新闻有描述。我`NSString`用来在`UILabel`.

但是，描述是这样的：

```
Bad news for Windows&#8217; the researches show that Windows&#8217; for years.... 
```

它与那些不需要的字符一起显示在`UILabel`. 每个字符串中的数字都在变化。他们不一样。

我想删除开头的字符`&#`和后面的数字。我怎样才能做到这一点？我应该使用哪种字符串编码格式？

非常感谢。

编辑：我不只有一个字符串。如果我从这个中删除 ’ ，那么另一个中可能会有 ᶺ 。它不会被删除。

我也可以删除 字符和数字。但是当我这样做时，在像“1980 年，乔布斯告诉我们要৬ 做某事”这样的字符串中，输出将是“在，乔布斯告诉我们要做某事”1980 也会消失，但我不想那。这也是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:55:32.543

这些是 ASCAII 符号，因此您需要使用 utf-8 字符串。检查此[链接](http://www.ascii.cl/htmlcodes.htm)

所以使用这行代码

```
NSString *resultString = [NSString stringWithUTF8String:myAsciiString]; 
```

# angularjs - es5-shim 或 chrome 框架，用于使 Angular 应用程序在 IE 中工作

> ID：14211707
> 
> 赞同：3
> 
> 时间：2013-01-08T09:20:53.940
> 
> 标签：angularjs, google-chrome-frame

我正在开发丰富的前端应用程序，供运行 IE 8 及更高版本的用户使用。我使用 angular.js 作为我的前端框架。

我目前看到使用 es5shim 或 google chrome 框架的两种选择。我无法辨别的是两者之间的差异。

据我了解，es5-shim monkey 对 js 引擎进行了修补，并且更轻巧，因为它不需要用户下载和安装。

与 es5-shim 相比，chrome frame 提供了什么，推荐使用哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:55:52.567

Google Chrome Frame 是一个应用程序，需要用户安装，es5-shim 是 JavaScript 代码，你只需要包含它。

如果你想在 IE 中使用 AngularJS，你应该阅读这个：[http](http://docs.angularjs.org/guide/ie) ://docs.angularjs.org/guide/ie 。简而言之，包括 es5-shim（可选但非常有用）和 JSON polyfill。

# java - 从 yyy-MM-dd 字符串中获取月份

> ID：14211710
> 
> 赞同：0
> 
> 时间：2013-01-08T09:20:57.960
> 
> 标签：java, android, date

我有一个从 JSON 获得的日期字符串“2012-01-26”。

我现在必须检查月份和年份是否与当前年份一样，而不是在 ListView 中显示数据。

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-DD");
  try {
      Calendar c = Calendar.getInstance(); 
      c.setTime(dateFormat.parse(event_start_date));
      int month = c.get(Calendar.MONTH);
      System.out.println(c.get(Calendar.YEAR));
      System.out.println("month is"+month);
 } 
```

年份值始终正确，但月份始终为零。我想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:24:35.367

您正在使用日历的实例获取月份。

```
int month = c.get(Calendar.MONTH); 
```

所以你会得到当前月份（即一月）它意味着0。所以结果是正确的。

检查[这个](http://developer.android.com/reference/android/app/DatePickerDialog.html#onDateChanged%28android.widget.DatePicker,%20int,%20int,%20int%29)。

month - 为与[Calendar](http://developer.android.com/reference/java/util/Calendar.html)兼容而设置的月份 (0-11) 。

如果您想要 的月份`event_start_date`，那么您根本不必使用日历的实例。

您可以使用

```
int month = event_start_date.getMonth(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-21T08:37:48.330

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:23:55.483

月份从 0 开始 - 这意味着您将获得 1 月。来自 Calendar.java：

```
public final static int JANUARY = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T09:24:10.013

月份是从零开始的（一月 = 0），因此您必须添加一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T09:28:04.200

阅读java文档；）

MONTH 它说：

```
Field number for get and set indicating the month. This is a calendar-specific value. The first month of the year is JANUARY which is 0; the last depends on the number of months in a year. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T09:25:44.990

这是因为日历中的月份从 0（一月）开始，一直持续到 11（十二月）

# c# - 数据输入的最大字符串长度指南

> ID：14211713
> 
> 赞同：0
> 
> 时间：2013-01-08T09:21:09.987
> 
> 标签：c#, wpf, string, sql-server-ce

所以我正在构建一个新的 WPF 应用程序，并从我的第一个数据输入屏幕开始。您通常为字符串字段设置什么最大长度？我在上一个应用程序中发现了一些字段太短。

字符串字段将通过实体框架持久化到 sql server compact db。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:44:02.613

StackOverfow 上还有其他一些帖子讨论这个问题。您可能会发现这个最有帮助：[数据库字段的标准长度列表](https://stackoverflow.com/questions/20958/list-of-standard-lengths-for-database-fields)。

如果您知道该字段用于名字，那么您知道没有超过 200 个字符的名字，那么不要让它大于那个。正如您在上面链接的帖子中看到的那样，有一个指向目录的链接，表明名字通常不超过 35 个字符。

您不知道它们将包含什么的字段，例如自由文本（描述等），只需将它们设置为尽可能大。安全总比后悔好！

# c# - MVP没有实现接口方法

> ID：14211718
> 
> 赞同：1
> 
> 时间：2013-01-08T09:21:28.030
> 
> 标签：c#, asp.net, interface, mvp

我是 MVP 设计模式的新手，所以我正在遵循[本指南](http://www.codeproject.com/Articles/31210/Model-View-Presenter#MVPModelViewPresenterthesolution)‏</p>

因此，我正在尝试重新创建 a 指南`LoginModule`（仅用于尝试新模式）。现在的事情是我做的一切都与指南中的一样，但我仍然遇到了接口实现问题。我将在下面附上我的代码：

**演示者类**

```
public class UserPresenter
{
    AuthenticateView iObjAuthView;
    public void add(AuthenticateView ObjAuthView)
    {
        iObjAuthView = ObjAuthView;
    }

    public void Authenticate(User _model)
    {
        if (_model.UName == "" && _model.UPassword == "")
        {
            iObjAuthView.ResponseOnAuthenticate(AuthEnums.Authorized);
        }
        else if (_model.UName == "" && _model.UPassword != "")
        {
            iObjAuthView.ResponseOnAuthenticate(AuthEnums.InCorrectPassWord);
        }
        else
        {
            iObjAuthView.ResponseOnAuthenticate(AuthEnums.UserNotFound);
        }
    }
} 
```

**接口类**

```
public interface AuthenticateView
{
      void ResponseOnAuthenticate(AuthEnums _authEnum);
} 
```

**UIpage(aspx页面)**

```
public partial class login : System.Web.UI.Page, AuthenticateView
{
    private UserPresenter objPresenter = new UserPresenter();
    protected void Page_Load(object sender, EventArgs e)
    {
        objPresenter.add(this);
    }

    protected void LoginBtn_Click(object sender, EventArgs e)
    {
        objPresenter.Authenticate(new StockBO.User(EmailBox.Text, PasswordBox.Text));
    }

    public void Auth(AuthEnums _auth)
    {
        Label3.Text = _auth.ToString();
    }
} 
```

在 UI 页面上，编译器会抛出一个错误，表明我没有实现`ResponseToAuthenticate`接口中定义的方法。所以最后一次，我试图找出问题所在。

是指南错了还是我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:30:49.467

正如错误所述，您必须遵守实施`interface AuthenticateView`暗示的合同。

添加你的方法`ResponseOnAuthenticate(authEnum) { //... }`，`class login`你应该没问题。

附带说明：对类名使用 Pascal 大小写（按约定）

# php - mysql比较2个数组

> ID：14211719
> 
> 赞同：0
> 
> 时间：2013-01-08T09:21:29.153
> 
> 标签：php, mysql, sql, database

我在下面有示例 sql 查询：

```
    选择..
    FIND_IN_SET((选择 cat_id
    FROM mydb.table_categories
    WHERE cat_name LIKE "%Pets%"),b.categories_id)

```

显示mysql错误。

此示例查询：

```
    （选择 cat_id
    FROM mydb.table_categories
    WHERE cat_name LIKE "%Pets%")

```

返回 (25,260) 的结果，我想比较它是否在 b.categories_id 中找到，其中 b.categories id 包含 (9,25,257,300)

也就是说我们可以这样使用find_in_set吗？find_in_set((25,260),(9,25,257,300))？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:22:36.847

尝试使用`GROUP_CONCAT`

```
SELECT ....
     FIND_IN_SET((SELECT GROUP_CONCAT(cat_id)
                  FROM   mydb.table_categories
                  WHERE cat_name LIKE "%Pets%"),b.categories_id)
FROM.... 
```

或者，您仍然可以在这个上使用`JOIN`or`IN`子句。比使用好得多`GROUP_CONCAT`。*您可以发布具有所需结果的样品日期吗？*

# xades4j - 忽略未签名的属性

> ID：14211729
> 
> 赞同：0
> 
> 时间：2013-01-08T09:22:00.260
> 
> 标签：xades4j

在验证包含 的签名`UnsignedProperties`时，我得到了以下异常：

```
Caused by: xades4j.xml.unmarshalling.PropertyUnmarshalException: Unsupported properties were found
    at xades4j.xml.unmarshalling.FromXmlUnsupportedUSPLimiter.convertFromObjectTree(FromXmlUnsupportedUSPLimiter.java:44)
    at xades4j.xml.unmarshalling.FromXmlUnsupportedUSPLimiter.convertFromObjectTree(FromXmlUnsupportedUSPLimiter.java:26)
    at xades4j.xml.unmarshalling.UnmarshallerModule.convertProperties(UnmarshallerModule.java:64)
    at xades4j.xml.unmarshalling.DefaultQualifyingPropertiesUnmarshaller.unmarshalProperties(DefaultQualifyingPropertiesUnmarshaller.java:72)
    at xades4j.verification.XadesVerifierImpl.verify(XadesVerifierImpl.java:168) 
```

是否有一个选项可以忽略那些验证，而不是抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:19:36.517

抛出异常是因为您的签名中的*某些*未签名属性不受支持。目前没有关闭该检查的选项，因为签名验证将不完整......

# java - 典型的 log4j 布局

> ID：14211731
> 
> 赞同：2
> 
> 时间：2013-01-08T09:22:11.063
> 
> 标签：java, log4j

我想知道是否有可以与 log4j 一起使用的典型 log4j 典型 ConversionPattern 布局。目标是快速设置可用的 log4j。

我选择了这个参数；还有其他一些有用的吗？

控制台附加程序

```
%d %p [%t] %c{2} (%F:%L) %x - %m%n
Date Priority [OutputName] Category (File:Line) DiagnosticContext - SuppliedMessage/n 
```

文件附加器

```
%d %p %c{2} - %m%n
Date Priority Category - SuppliedMessage/n 
```

这是 log4j 模式参数 [https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:28:01.863

模式布局的存在是为了灵活，让每个人都可以对其进行调整以匹配他/她的需求，因此无论您觉得适合自己，都会做得很好，请注意：确保您了解您提出的性能影响（请注意所有[https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)上的“警告：正在生成调用方位置信息……” 。[这](http://bobah.net/d4d/source-code/misc/log4j-configuration-and-usage)是我的典型用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:51:23.280

我通常设置2个appender

*   一个控制台，按信息级别过滤，应该实时查看，以了解“现在发生了什么”，级别+类别+消息，**没有**日期，**没有**文件/行

*   一个文件，用于分析/调试，带有附加信息：日期（iso格式，易于排序），线程（在多线程上下文中非常重要），文件和行（应该很昂贵，但通常不是问题），有时自定义MDC 的属性

# javascript - 在 jQuery fadeIn 中使用“this”变量？

> ID：14211737
> 
> 赞同：3
> 
> 时间：2013-01-08T09:22:22.033
> 
> 标签：javascript, jquery, this

我正在尝试使用 ajax 制作一个按钮，该按钮将收藏该线程。但它只能在收藏的线程上淡入和淡出收藏的图像。

我收到以下错误： `Uncaught SyntaxError: Unexpected token this`

这就是我的代码第 11 行： `$(this + ' .is_favorited').fadeIn("slow");`

这是完整的 Javascript 源代码：

```
$(".do_favorite").live("click", function() {
    var item = $(this).closest(".box");
    var content = $(this).attr('data-id');
    alert(content);
    $.post( 'ajax.favorite.php?sid=' + content + '',
        $(this).serialize(),
        function(data) {
            if (data == "1") {
                // Favorite it
                $(this + ' .not_favorited').fadeOut("slow", function (
                    $(this + ' .is_favorited').fadeIn("slow");
                ));
            }else if (data == "2") {
                // Un-Favorite it
                $(this + ' .is_favorited').fadeOut("slow", function (
                    $(this + ' .not_favorited').fadeIn("slow");
                ));
            }else {
                alert("DER SKETE EN FEJL DU");
            }
        }
    );
    return false;
}); 
```

希望有人能帮我解决这个问题，因为我真的需要使用`this`，让它只褪色点击的那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:23:19.267

您需要在选择器`this`中作为[**上下文**](http://api.jquery.com/jQuery/)传入或使用**[find()](http://api.jquery.com/find/)**函数`$(this)`。

改变

```
 $(this + ' .is_favorited').fadeOut("slow", function ( 
```

至

```
$('.is_favorited', this).fadeOut("slow", function ( 
```

使用在上下文后面调用的[find()方法。](http://api.jquery.com/find/)

```
$(this).find('.is_favorited').fadeOut("slow", function ( 
```

**编辑**

如果您想在 post 函数中引用带有类 do_favorite 的事件源元素，那么您可以将其放入某个临时变量中，因为您无法`this`在其中引用`post`

```
$(".do_favorite").live("click", function() {
    var item = $(this).closest(".box");
    var content = $(this).attr('data-id');
    alert(content);
    do_favorite_OBJECT = $(this);
    $.post( 'ajax.favorite.php?sid=' + content + '',
        do_favorite_OBJECT.serialize(),
        function(data) {
            if (data == "1") {
                // Favorite it
                $('.not_favorited', do_favorite_OBJECT).fadeOut("slow", function (
                    $('.is_favorited', do_favorite_OBJECT).fadeIn("slow");
                ));
            }else if (data == "2") {
                // Un-Favorite it
                $('.is_favorited', do_favorite_OBJECT).fadeOut("slow", function (
                    $('.not_favorited', do_favorite_OBJECT).fadeIn("slow");
                ));
            }else {
                alert("DER SKETE EN FEJL DU");
            }
        }
    );
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:23:56.980

你可以写成：

```
$(this).find('.not_favorited') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:25:29.103

像这样保存你的“这个”

```
 $(".do_favorite").live("click", function() {
        var me = $(this);
        var item = me.closest(".box");
        var content = me.attr('data-id');
        alert(content);
        $.post( 'ajax.favorite.php?sid=' + content + '',
        me.serialize(),
        function(data) {
            if (data == "1") {
            // Favorite it
            me.find(' .not_favorited').fadeOut("slow", function (
                me.find('.is_favorited').fadeIn("slow");
            ));
            }else if (data == "2") {
            // Un-Favorite it
            me.find('.is_favorited').fadeOut("slow", function (
                me.find('.not_favorited').fadeIn("slow");
            ));
            }else {
            alert("DER SKETE EN FEJL DU");
            }
        }
        );
        return false;
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T09:33:31.883

只需使用：

```
$(this).find('.not_favorited') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T09:25:03.643

利用：

```
$(".is_favorited", this); 
```

或者

```
$(this).find(".is_favorited"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T09:27:37.443

`this`回调内部`$.post`不是您认为的 HTML 元素。您需要在调用之前将元素保存在变量中`$.post`。

# security - 使用 WSS 进行身份验证然后使用 WS 进行数据是否有意义？

> ID：14211739
> 
> 赞同：1
> 
> 时间：2013-01-08T09:22:36.447
> 
> 标签：security, ssl, websocket

我正在使用 websockets 做一些工作，需要解决安全问题。从我所读到的内容来看，显然 SSL 在我的情况下是最好的方法，所以 WSS 是要走的路（这不是问题，只是事实陈述）。

服务器可能会将大量数据流式传输到客户端。这些数据不是私人的或敏感的，所以我不担心有人会嗅到这些数据。我主要担心的是 WS 连接已被验证，因为在服务器上接收命令可能是有害和破坏性的。客户必须是可信的。

服务器将是一个处理能力有限的嵌入式设备。所以我的观点是数据可以通过WS明文传输。

所以我的方法是让客户端通过 wss 连接到服务器，进行身份验证并请求会话密钥。然后客户端将断开 wss 连接，然后通过 ws 连接到服务器，并传递从之前的 wss 连接接收到的会话密钥。如果连接立即传递有效的会话密钥（会话密钥具有适当的到期时间），服务器将仅接受 ws 连接。每个客户端仅允许通过 ws 进行一次连接尝试，并在成功的 wss 连接上进行重置。

所以我的问题是这种方法是否合理，或者我的方法是否会有一些严重的漏洞。我仅限于ws和wss，我在服务器上使用node.js和websocket-node，在客户端使用纯javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:41:20.933

这听起来相当合理（假设服务器到客户端确实不是秘密）。但是，我会建议一些变化：

*   只需保持从客户端到服务器的两个 WebSocket 连接。第一个是 wss，用于令牌交换和客户端到服务器命令（您提到的可能有害）。如果第一个连接断开或超时，则 ws 连接也应终止。
*   不允许任何客户端通过 ws 连接来服务器命令/控制。
*   确保除了超时之外，令牌只能使用一次。否则，攻击者可以嗅探 ws 连接并尝试重放令牌以获得连接。

您还需要确保您的初始 wss 连接是经过授权的（不仅仅是加密的）。换句话说，服务器需要能够验证客户端是它所说的那个人并且有权建立这个连接。此外，如果 ws 连接真的只是用于未受保护的服务器到可以被嗅探的客户端数据，那么如果攻击者能够成功建立连接，那也不是世界末日，因为他们只是用尽了带宽和服务器 CPU （再次假设客户端到服务器的命令仅限于 wss 连接）。

另外，我会尝试将服务器到客户端的连接作为 ws 和 wss 进行基准测试。额外的 CPU 负载可能比您预期的更容易忍受（某些嵌入式设备也具有 SSL/TLS 卸载硬件）。

# sql - 计算sql原因中的时间差

> ID：14211742
> 
> 赞同：1
> 
> 时间：2013-01-08T09:22:51.113
> 
> 标签：sql, postgresql

我的表有三列。它们是 id、time1 和 time2。数据库是postgresql 9.1。

现在我想获取符合条件的 id `time2 - time1 < 72hrs`。

如何在 where 原因中编写 sql？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:30:27.503

你的意思是“时间” `timestamp`，我假设..

```
SELECT id
FROM   tbl
WHERE  time2 - time1 < interval '72h'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:30:50.603

可以减去 Postgresql 时间以产生间隔。您可以将其与以小时为单位的间隔进行比较。这是文档[http://www.postgresql.org/docs/9.1/static/functions-datetime.html](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:33:23.710

```
SELECT * 
FROM theTable
WHERE time2 - time1 < interval '72 hours'; 
```

将返回两个时间戳之间的差异小于 72 小时的所有行。

# activerecord - Flash Media Server 不播放录制的视频

> ID：14211743
> 
> 赞同：0
> 
> 时间：2013-01-08T09:22:51.393
> 
> 标签：activerecord, live-streaming, flash-media-server, playing

它使用这种方法完美地记录到服务器：

```
liveStream.publish("test", "record"); 
```

但是当我想这样玩时：

```
at NetStream.Record.Stop handler

var vd:Video = new Video(cameraWidth, cameraHeight);
vd.attachNetStream(liveStream);
liveStream.play("test");
addChild(vd); 
```

有时它播放得很好，但通常它不播放并且什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:44:56.740

我解决了我的问题。

在我将元数据添加到“NetStream.Publish.Start”处理程序中录制的视频之前，如下所示：

```
 case "NetStream.Publish.Start":
var metaData:Object = new Object(); 
metaData.title = "test"; 
metaData.width = cameraWidth; 
metaData.height = cameraHeight; 
liveStream.send("@setDataFrame" , "onMetaData", metaData);
    break; 
```

并更改了“NetStream.Record.Start”而不是“NetStream.Publish.Start”。现在它对我来说很好。

我认为如果您想播放任何录制的流，当您的直播流触发“Netstream.Record.Start”时，可以添加元数据。

# python - 如何撤消 wx.grid.Grid.SetColAttr？

> ID：14211748
> 
> 赞同：3
> 
> 时间：2013-01-08T09:23:06.957
> 
> 标签：python, wxpython, wxwidgets

我有一个网格应用程序，例如，可以将列标记为超级重要。完成后，我使用`Grid.SetColAttr`更改列的颜色。但是，当用户删除标志时，我似乎无法撤消`SetColAttr`. 使用而不是属性对象再次调用它`None`会导致 Python 神秘地崩溃而没有错误消息，并且遍历所有单元格并调用`SetAttr(row, col, None)`对列的颜色没有影响。我猜那是因为列属性覆盖了单元格属性`None`。

那么如何撤消单元格属性更改呢？我假设我必须`SetColAttr`使用“默认”网格属性进行调用，但我什至不知道网格是否具有默认单元格属性或如何获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:01:49.193

问题是`SetColAttr`只有`SetRowAttr`。`SetAttr(row,col,None)`工作（重置单个单元格）。但是，由于这些属性存储在不同的列表（单元格/行/列）中，`SetAttr()`因此对列或行属性没有影响。

在内部，`wxGridTableBase::SetColAttr()`尝试将属性的种类 ( [`wxGridCellAttr::SetKind()`](http://docs.wxwidgets.org/trunk/classwx_grid_cell_attr.html#acc28e22664b1e4d390448c556993c440)) 分配给提供的参数。如果是`None`，它会尝试调用 None 对象（实际上是空指针）上的方法，这会导致崩溃。

`SetColAttr()`您可以通过直接调用来绕过该分配`wxGridCellAttrProvider`（这也将绕过对有效 GridCellAttrProvider 的检查，并且不会清除属性缓存）：

```
self.grid.GetTable().GetAttrProvider().SetColAttr(None,column) 
```

这可能会在属性缓存中留下痕迹，从而导致单元格未被重置。要清除缓存，请调用`SetAttr()`：

```
self.grid.SetAttr(-1,-1,None) # use invalid coordinates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:24:59.583

您可以获取默认的单元格背景颜色和文本颜色和字体（GetDefaultCellFont、GetDefaultCellBackgroundColour 等）并在此基础上进行设置。我找不到任何东西来获得列的默认属性。也许通过获取单元格的默认值，您可以使用它们来设置列的。

我还发现这个简洁的答案有点相关，可以帮助你弄清楚：

[淡入/淡出 wxpython 网格单元格的背景颜色](https://stackoverflow.com/questions/3985305/fade-in-out-the-background-color-of-wxpython-grid-cell)

您还应该阅读 wxPython wiki 上的 wxGrid wiki 页面：[http ://wiki.wxpython.org/wxGrid](http://wiki.wxpython.org/wxGrid)

# jquery - 在jQuery中隐藏列表项

> ID：14211751
> 
> 赞同：1
> 
> 时间：2013-01-08T09:23:21.503
> 
> 标签：jquery, asp.net-mvc, drop-down-menu

我想在 jquery 中隐藏列表项，但如果我这样做，它会失败，

```
$(Name + "-myList option[value=" + selectedItem + "]").hide(); //fails 
```

但是这两个选项如何禁用和删除工作：

```
$(Name + "-myList option[value=" + selectedItem + "]").attr("disabled", "disabled");

$(Name + "-myList option[value=" + selectedItem + "]").remove(); 
```

这是我的列表代码

```
<select id="myList" class="DropDownList Test" name="List">                                           
    <option value="selectid" selected="selected">--Please Select--</option> 
    <option value="test1">a</option> 
    <option value="test2">b</option> 
    <option value="test3">c</option>               
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:28:05.867

`.hide()`不会隐藏该项目，因为`.hide()`通过将内联 css 添加`display:none`到元素来工作。几乎所有浏览器都不允许设置选项元素的样式。

禁用该选项不会删除或隐藏该选项，但会使其显示为灰色且无法选择。如果您稍后需要重新启用该选项，可以轻松切换禁用属性。

`remove()`完全从 DOM 中删除元素，因此如果您使用这种方法，您需要重新创建它`$('#mylist').append( new Option('text','value'));`才能再次显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:25:34.347

您可以像这样使用 jQuery [:selected选择器：](http://api.jquery.com/selected-selector/)

```
$(Name + "-myList option :selected").attr("disabled", "disabled");
$(Name + "-myList option :selected").remove(); 
```

这将使获取所选项目更容易。

至于隐藏该项目，看起来@PassKit 已经解释了为什么`.hide()`不起作用。

# android - 如何优雅地处理 Android 中 AsyncTask 中的异常？

> ID：14211755
> 
> 赞同：11
> 
> 时间：2013-01-08T09:23:31.143
> 
> 标签：android, exception-handling

我有一个*AsyncTask*在后台进行 SQLite 数据库迁移（创建或升级）。假设以某种方式在 doInBackground 中抛出了*IOException 或 SQLiteException*，*并且*应用*程序*继续运行毫无意义，因为数据库状态可能未处于所需状态。我有点困惑在这种情况下该怎么做。

 **我正在考虑让应用程序尽快崩溃并显示带有错误消息的对话框，但我不确定如何在*doInBackground*中执行此操作，因为：

1.  此函数不在 UI 线程中执行，所以我不知道是否可以显示对话框。
2.  我不知道如何访问*AsyncTask*中的当前活动，所以我无法*完成（）*它。
3.  我想以某种方式将异常抛出到上层并让活动处理它，但这是不可能的，因为*doInBackground*没有将*IOException*列为检查异常。

有人对如何优雅地处理这种情况有建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T09:36:57.213

您不能在非 ui 线程中显示对话框。您可以将活动引用传递给异步任务。要处理这种情况，您可以尝试在 doInBackground 中捕获异常并在 onPostExecute 中重新抛出它

例如

```
private class MyAsyncTaskTask extends AsyncTask<...> {

     private Activity ownerActivity;
     private Exception exceptionToBeThrown;

     public MyAsyncTaskTask(Activity activity) {
         // keep activity reference
         this.ownerActivity = activity;
     }

     protected Long doInBackground(...) {
         try {
             ...
         } catch (Exception e) {
             // save exception and re-thrown it then. 
             exceptionToBeThrown = e;
         }
     }

     protected void onPostExecute(...) {
         // Check if exception exists.
         if (exceptionToBeThrown != null) {
             ownerActivity.handleXXX();
             throw exceptionToBeThrown;
         }
     }
 } 
```

如果您的异步任务在 Acvitiy 类中，那么您可以直接访问它，例如，

```
public class MyActivity extends Activity {
    ...
    AsyncTask<...> task = new AsyncTask<...>() {
        public void onPostExecute(...) {
            // Access activity directly
            MyActivity.this.xxx()
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:36:55.757

每次在 doInBackground 中发生此类异常时，将一个唯一字符串返回给 onPostExecute。并在 onPostExecute 显示一个 AlertDialog 显示适当的消息并要求重试或其他什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-01T02:47:49.467

我的处理方法。

```
/**
 * Created by Daniel on 02/04/2016.
 */
public abstract class AsyncTaskEnhanced<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {

    // Avoids cyclic calls.
    private boolean onPostExecuteCalled = false;
    private Exception exception;

    @Override
    protected final Result doInBackground(Params... params) {

        try {

            return this.doInBackgroundWithFaultTolerance(params);
        } catch (Exception exception) {

            this.exception = nre;
        }

        return null;
    }

    @Override
    protected final void onPostExecute(Result result) {

        if (this.onPostExecuteCalled) return;

        this.onPostExecuteCalled = true;

        super.onPostExecute(result);

        this.onPostExecuteWithFaultTolerance(result, this.exception);
    }

    protected abstract Result doInBackgroundWithFaultTolerance(Params... params) throws Exception;

    protected abstract void onPostExecuteWithFaultTolerance(Result result, Exception ex);

} 
```**

# android - 无法在android中使用动画更改布局

> ID：14211768
> 
> 赞同：0
> 
> 时间：2013-01-08T09:24:06.903
> 
> 标签：android, layout, slide

我想使用`TranslateAnimation`.

**我的 XML 就像**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/buttonsld"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/textsld"
    android:text="slideup" />

<LinearLayout
    android:id="@+id/layoutsld2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/buttonsld2"
    android:layout_below="@+id/buttonsld"
    android:background="@drawable/iz"
    android:orientation="vertical" >
</LinearLayout>

<LinearLayout
    android:id="@+id/layoutsld3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/buttonsld2"
    android:layout_below="@+id/buttonsld"
    android:background="@drawable/fon"
    android:orientation="vertical"
    android:visibility="gone" >
</LinearLayout>

<Button
    android:id="@+id/buttonsld2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="slidedown" />

</RelativeLayout> 
```

我的代码就像

```
 private int x= 0;

buttonslideup.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (x == 0) {
                    lin_lay2.setVisibility(View.GONE);
                    lin_lay3.setVisibility(View.VISIBLE);
                     Animation slide = new TranslateAnimation(0, 0, 100, 0);
                     slide.setDuration(1000);
                     slide.setFillAfter(true);

                     lin_lay3.startAnimation(slide);
                    x = 1;
                } else {
                    lin_lay3.setVisibility(View.GONE);

                    lin_lay2.setVisibility(View.VISIBLE);
                     Animation slide = new TranslateAnimation(0, 0,
                     100, 0);

                     slide.setDuration(1000);
                     slide.setFillAfter(true);
                     lin_lay2.startAnimation(slide);
                    x = 0;
                }

            }
        }); 
```

但是当我使用它时，起初，`lin_lay3`滑动并进入屏幕并没有问题，但是当我再次单击按钮时，`lin_lay2`滑动，但它在后面`lin_lay3`，我看不到`lin_lay2`。

我想要的是`layouts`通过单击来更改这些`button`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:36:11.590

您在单击按钮时开始另一个活动并查看活动布局的动画。只需将此代码放在starActivity(intent) 之后。

```
overridePendingTransition(R.anim.slide_in_top, R.anim.slide_out_bottom); 
```

slide_in_top.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/slideanim"
    android:fromYDelta="-100%p"
    android:toYDelta="0" /> 
```

slide_out_bottom.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/slideanim"
    android:fromYDelta="0"
    android:toYDelta="100%p" /> 
```

在 value 文件夹中，创建 integer.xml 并放入

```
<item name="slideanim" format="integer" type="integer">1000</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-23T15:10:32.463

在 on create 中，我们需要输入：

```
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

# javascript - 从扩展中的 javascript 访问 chrome.history 并更改正在查看的页面

> ID：14211771
> 
> 赞同：4
> 
> 时间：2013-01-08T09:24:12.143
> 
> 标签：javascript, google-chrome-extension, browser-history, reddit

~~我的目标是创建一个按钮，单击该按钮会删除 reddit 上已访问其链接的父 div。由于安全问题，无法从非特权 javascript 中检测到访问的链接状态，因此，我尝试了 chrome 扩展。但是，这似乎也不起作用，因为即使是从具有历史权限的扩展调用的 javascript 也会返回“未捕获的类型错误：无法调用未定义的方法‘搜索’。” 因此，我仍在寻找一种方法来做到这一点。~~

**2013 年 1 月 8 日更新**

~~我非常接近让这个工作，但是，我无法在内容脚本中获得 n_results 以准确反映其在后台脚本中的状态。有任何想法吗？最新代码如下。~~

**2013 年 1 月 8 日更新**

它正在工作！如果您需要执行上述操作，请参见下文。

**清单.json**

```
{
  "name": "Never The Same (NTS) Reddit",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Previously visited links are deleted.",
  "browser_action": {"default_icon": "icon.png"},
  "permissions": ["history","tabs"],
  "content_scripts": [
      {
          "run_at": "document_end",
          "matches": ["http://www.reddit.com/*"],
          "js": ["jquery-1.8.3.min.js", "ntsreddit_content.js"]
      }
  ],
  "background": {"scripts": ["ntsreddit_background.js"]}
} 
```

**ntsreddit_background.js**

```
chrome.extension.onMessage.addListener(
    function (request, sender) {
        chrome.history.getVisits({"url": request.url},
        function (visits) {
            if (visits.length > 0) {
                chrome.tabs.sendMessage(sender.tab.id, {
                    "url": request.url
                });
            };
        });
    }); 
```

**ntsreddit_content.js**

```
$("div.thing a.title").each(
    function(index, value) {
        chrome.extension.sendMessage({"url": value.href});
    });

chrome.extension.onMessage.addListener(function (message) {
    anchor=$('a[href^="' + message.url + '"][class~="title"]')
    if (anchor.length > 0) {
        anchor.closest(".thing").remove();
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:30:03.687

内容脚本有一些限制。他们**不能**使用 chrome.* API（除了[chrome.extension](https://developer.chrome.com/extensions/extension.html)的一部分），您`chrome.history`在**bookmarklet.js**中的代码将始终是`undefined`

## 编辑：

在对您的脚本进行了一些更改后，我开始运行它。

### 变化

*   Chrome API(s) 是异步的，您应该只在回调返回后进行进一步的逻辑计算
*   sendResponse() 方法已弃用

**ntsreddit_background.js**

移动`tabs.sendMessage()`以处理 chrome API 的异步性质并消除了已弃用的 API

```
chrome.extension.onMessage.addListener(

function (request, sender) {
    console.log(sender.tab);
    n_results = -1;

    console.log(request.link);

    chrome.history.getVisits({
        url: request.link
    },

    function (visits) {
        console.log(visits.length);
        n_results = visits.length;
        chrome.tabs.sendMessage(sender.tab.id, {
            "result": n_results
        });
    });

}); 
```

**ntsreddit_content.js**

添加了一个监听器来处理从后台页面收到的响应

```
var firstlink = "https://www.google.co.in/";

chrome.extension.sendMessage({
    "link": firstlink
});
chrome.extension.onMessage.addListener(function (message, sender) {
    console.log(message.result);
}); 
```

我希望这能解决你的问题。

# mysql - mysql 创建视图 - 过滤重复的行

> ID：14211773
> 
> 赞同：1
> 
> 时间：2013-01-08T09:24:13.300
> 
> 标签：mysql, sql, sqlite, sql-view

我的用户分布在 5 个数据库的用户表中。看起来像这样：

```
db1.user
id  token  app  lang  last_update
XX  1      a    en    11:00
XX  2      a    en    12:00

db2.user
id  token  app  lang  last_update
XX  1      b    en    12:00
XX  2      a    en    16:00

db3.user
… 
```

现在我需要一个视图中的所有用户，它应该看起来像这样（令牌和应用程序一起是主键）：

```
view db.user_all
id  token  app  lang  last_update
XX  1      a    en    11:00
XX  1      b    en    12:00
XX  2      a    en    16:00 
```

我试图联合一切：

```
create view `db`.`user_all` AS 
SELECT * FROM `db1`.`user` union 
SELECT * FROM `db2`.`user` 
```

结果如下所示：

```
view db.user_all
id  token  app  lang  last_update
XX  1      a    en    11:00
XX  2      a    en    12:00
XX  1      b    en    12:00
XX  2      a    en    16:00 
```

我的 sql 语句删除了重复的行，但如果 last_update 不同，我在结果视图中得到了一个重复的用户。如何解决这个问题？我需要所有数据，也需要最新的 last_update。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:36:39.977

试试这个：

```
CREATE VIEW user_intermediate AS
SELECT * FROM db1 UNION ALL SELECT * FROM db2
ORDER BY last_update DESC
;

CREATE VIEW user_all AS
SELECT *
FROM user_intermediate
GROUP BY app, token
; 
```

假设 App 和 Token 作为用户键，user_all 视图应该具有两个表中具有最新 last_update 的不同用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:31:08.173

尝试将 DISTINCT 与 MAX 一起使用，如下所示：

```
SELECT DISTINCT id,  token,  app,  lang,  max(last_update) FROM (
    SELECT * FROM `db1`.`user` union 
    SELECT * FROM `db2`.`user`
)
GROUP BY id, token, app, lang 
```

您可能需要在最后一个括号后使用别名。

* * *

**更新**

显然，MYSQL 在视图中不能有子查询，因此您必须将其创建为存储过程，而不是[http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

# java - 如何在 Jtextpane 中使用户无法编辑某些文本？

> ID：14211778
> 
> 赞同：2
> 
> 时间：2013-01-08T09:24:21.583
> 
> 标签：java, swing, jtextpane

我在我的应用程序中使用 Jtextpane。我需要在 jtextpane 中添加一些标签，例如 [PKG-MEDIA]。我希望用户不要编辑这个标签，而他可以在 jtextpane 中编辑其他文本。

```
 public static void main(String args[]) {
    JFrame j = new JFrame("Hello!");
    j.setSize(200, 200);
    JTextPane k = new JTextPane();
    k.setFont(new Font("Akshar Unicode Regular", Font.PLAIN, 17));
    k.setText("this is a test code [PKG-MEDIA]. I want to make this tag [PKG-1234] not editable");
    j.add(k);
    j.setVisible(true);
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T09:38:07.523

使用`DocumentFilter`. 您可以检查在位置编辑发生时是否允许插入（或删除）

例如看[这个](http://www.java2s.com/Tutorial/Java/0260__Swing-Event/CustomDocumentFilter.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T09:30:49.077

要达到这个效果，需要实现`StyledDocument`（尝试扩展`DefaultStyledDocument`）。在那里，维护一个不可编辑的文本部分列表，并拒绝在其中更改`insertString()`它们`remove()`

例如，当`offset`位于其中一个不可编辑的范围内时，只需`insertString()`从不进行更改即可返回。

当用户尝试删除文本时，仅删除受保护范围内的文本`remove()`

# tridion - 仅在门户服务器中管理页面时的 SiteEdit 自定义

> ID：14211780
> 
> 赞同：4
> 
> 时间：2013-01-08T09:24:23.567
> 
> 标签：tridion, tridion-content-delivery, siteedit

页面仅在 Portal 服务器中进行管理。业务用户在创建新内容时将没有上下文。组件表示是通过 Web 服务直接检索的，而不是通过 SDL Tridion 页面。

请让我们知道如果页面仅通过 portlet 在门户服务器中管理，我们如何自定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:04:01.787

这应该可以正常工作，您只需要确保您的 DCP（动态组件演示文稿使用 SiteEdit 标记包装，该标记将 isQueryBased 属性设置为 true。类似以下内容应该可以工作。

```
<div>
<!-- Start SiteEdit Component Presentation: 
   {"ID" : "CP0", "ComponentID" : "tcm:1-123", "ComponentTemplateID" : "tcm:1-234-32",
   "ComponentVersion" : 3, "IsQueryBased" : true, "SwapLabel" : "main" } -->
   Your CP code here
</div> 
```

然后您的门户将需要输出 SiteEdit 页面设置指令，但将在 HTML 底部的结束`</body>`标记之前使用不存在的页面 URI（我使用空 URI tcm:0-0-0）。像这样的东西：

```
<!-- SiteEdit Settings: { "PageID" : "tcm:0-0-0", "PageVersion" : 23, 
"TargetTypeID" : "tcm:0-1-65538", "ComponentPresentationLocation" : 1} --> 
```

如果您需要更多信息，请指定您的 SDL Tridion 版本（以及您使用的 SiteEdit 版本），并描述您用于创建 DCP 的模板技术。

您可能还想阅读这篇[文章](http://sdltridionworld.com/articles/portal-integrations.aspx)，这取决于您的门户是如何设置的，这让您可以很好地了解哪些 SiteEdit 功能可以开箱即用并进行自定义。

# android - TradeMark(TM) 标志在设备上显示为问号

> ID：14211783
> 
> 赞同：3
> 
> 时间：2013-01-08T09:24:28.237
> 
> 标签：android, ascii

我正在显示附加到文本的商标符号（™）作为对话框的标题。它在模拟器中运行良好。但是，当我在设备中运行相同的程序时，它会显示为问号（？）。任何想法为什么会发生以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T09:28:48.910

**已编辑**

你可以这样做：

```
<string name="trademark_symbol">&#8482;</string>
<string name="app_name">My Application &#8482;</string> 
```

在您的布局编辑器中尝试此操作，您将看到该符号。

# json - 使用 chimera.json 将 JSON 数组作为参数传递

> ID：14211790
> 
> 赞同：0
> 
> 时间：2013-01-08T09:24:41.940
> 
> 标签：json, delphi, delphi-xe2

我是使用 Delphi XE2 进行 JSON 和 php 和 IOS 开发的新手。

我想解析我从 php 脚本
[http://returnjson.ap01.aws.af.cm/returnjson.php获得的 JSON 数组](http://returnjson.ap01.aws.af.cm/returnjson.php)

当它打开时，我得到的数组为

```
 [{"cname":"MAAO"},{"cname":"MAIM"}] 
```

我已经从[http://arcana.sivv.com/chimera](http://arcana.sivv.com/chimera)安装了这个解析器， 这里有一个代码示例

```
 procedure TForm1.Button3Click(Sender: TObject);
 var
  i : integer;
  obj : IJSONObject;
  begin
 obj := JSON('{"firstname":"leonard",'+
          ' "lastname":"nimoy",'+
          ' "email":['+
          '   "spock@enterprise.com",'+
          '   "lazydude@mars.com"]'+
          '}');
  Writeln(obj['firstname']);
  for i := 0 to obj.Arrays['email'].count-1 do
 begin
   Writeln(obj.Arrays['email'][i]);
  // StringGrid1.Cells[0,i]:=obj.Arrays['email'][i];
 end;

 obj['lastname'] := 'shatner';
 writeln(obj.AsJSON);
 ReadLn;
 end; 
```

谁能告诉我如何将 json 数组从 [http://returnjson.ap01.aws.af.cm/returnjson.php](http://returnjson.ap01.aws.af.cm/returnjson.php) 传递到 `obj : IJSONObject;`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:39:55.057

您需要使用某种方式从网络服务器获取数据。我使用[TMS](http://www.tmssoftware.com/site/)网络软件组件。我不使用 XE2，所以不确定是否有本地组件来执行此操作。

我使用他们的 webdata 组件来做类似的事情。在表单上放置一个 webdata 组件，然后是示例中的代码：-

```
with webdata1.Data.Add do
begin
  scanfirst := '<span id="yfs_l10';
  scanfrom := '">';
  scanto := '</';
  url := 'http://finance.yahoo.com/q?s='+quotes+'&d=v1';
end;
end;

  webdata1.Execute;

  for i := 1 to stringgrid1.RowCount - 1 do
  begin
     stringgrid1.Cells[2,i] := webdata1.Data.Items[i - 1].Data;
  end; 
```

# javascript - 如何在提交按钮之前添加确认框？

> ID：14211792
> 
> 赞同：2
> 
> 时间：2013-01-08T09:24:46.380
> 
> 标签：javascript, html

**添加确认框**

这是我的代码，我想为其添加一个确认框。

我有一个带有两个`submit`按钮的表单。我需要他们的确认框，然后发送到下一页。我怎样才能做到这一点？这是确认框的代码，我怎样才能把它放在我的表格中？

```
onclick="return confirm('Are you sure?');" 
```

我的表单.jsp

```
<form id="form1" name="form1" method="post" action="">
    <p>&nbsp;</p>
    <p align="center">Enter your choice:-
    <label> <br />
    <label>
       <input type="submit" name="Submit" value="delete" onclick="this.form.action='logi.jsp?flag=1&act=1';this.form.submit();" />
    </label>
    <br />
    </br>
    <label>
        <input type="submit" name="Submit" value="Delete" onclick="this.form.action='delete1.jsp?flag=1&act=1';this.form.submit();" />
    </label>
    <br/>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:38:03.073

在按钮类上试试这个

```
$('.class').appendTo('body')
  .html('<div><h6>Yes or No?</h6></div>')
  .dialog({
  modal: true, title: 'message', zIndex: 10000, autoOpen: true,
  width: 'auto', resizable: false,
  buttons: {
      Yes: function () {
          doFunctionForYes();
          $(this).dialog("close");
      },
      No: function () {
          doFunctionForNo();
          $(this).dialog("close");
      }
  },
  close: function (event, ui) {
      $(this).remove();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:26:55.563

试试这个

```
<form id="form1" name="form1" method="post" action="/your/url.xyz" onsubmit="return confirm('bla bla');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:30:57.520

```
<input type="submit" name="Submit" value="Delete" onclick='confirm(this,"delete1.jsp?flag=1&act=1")' />
<input type="submit" name="Submit" value="delete" onclick='confirm(this,"logi.jsp?flag=1&act=1")' />

function confirm(this,foo1)
{
var foo = confirm('Are you sure?');
if (foo) {this.form.action=foo1;this.form.submit();}
else {alert('Try Later');}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:33:34.957

以下代码段是解决方案。您需要删除`this.form.submit()`，因为按钮是提交按钮，默认情况下它们提交。

只需添加`onsubmit=" return window.confirm('Are you sure?');"`到表单并`this.form.submit()`从提交按钮中删除。

```
<form id="form1" name="form1" method="post" action="" onsubmit=" return window.confirm('Are you sure?');">
                        <p>&nbsp;</p>
                        <p align="center">Enter your choice:-
                            <label> <br />

         <label>
           <input type="submit" name="Submit" value="delete" onclick="this.form.action='logi.jsp?flag=1&act=1';" />
            </label>
                                <br />

                            </br>
                   <label>
                 <input type="submit" name="Submit" value="Delete" onclick="this.form.action='delete1.jsp?flag=1&act=1';" />
           </label>
                                <br/>

                        </div></form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T09:36:45.623

```
See this code confirm box works in this way and one sugesstion your code need a lot pf improvement

<html>
<head>
<script>
function disp_confirm()
{
var r=confirm("Press a button!")
if (r==true)
  {
  alert("You pressed OK!")
  }
else
  {
  alert("You pressed Cancel!")
  }
}
</script>
</head>
<body>

<input type="button" onclick="disp_confirm()" value="Display a confirm box">

</body>
</html> 
```

# bash - 基于字符串比较的过滤

> ID：14211795
> 
> 赞同：1
> 
> 时间：2013-01-08T09:24:51.130
> 
> 标签：bash, awk, cygwin

我有一个包含多列的文件。我正在尝试过滤掉前两个字段中具有相同值的记录。这两个字段都包含文本值。这是我正在使用的命令：

```
cat input_file | awk -F'\t' '{if($1==$2) print $1 $2}' 
```

当我运行这个命令时，我只得到那些字段中的值为数字的行。该文件包含几行，这些行在两个非数字字段中具有相同的值。如何强制 awk 进行字符串比较？

另外，我还有其他方法可以做到这一点吗？（我是 Unix 环境的新手，不知道太多技巧......不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:29:52.057

如果要过滤掉前两列相同的所有行，只需使用空格`awk '$1!=$2' file`作为`awk`默认字段分隔符，默认操作是打印。

```
$ cat file
1       1        col3   line1
two     two      col3   line2
three   3        col3   line3           
four4   four4    col3   line4

$ awk '$1!=$2' file
three   3        col3   line3           

$ awk '$1==$2' file
1       1        col3   line1
two     two      col3   line2
four4   four4    col3   line4 
```

字段*类型*无关紧要，`cat`也不需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:30:00.877

纯重击

```
while read x y
do
  [ $x = $y ] && echo $x $y
done < input_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:48:04.620

你实际上是在做正确的，除了你已经添加了`-F'\t'`这给你带来的问题。在 awk 中，字段分隔符 FS 的默认值是一个包含单个空格“”的字符串。

所以你需要删除它`-F'\t'`。

例如，见下文：

```
> cat temp
1       1 random text
some some random text
some more random text

> nawk '{if($1==$2){print}}' temp
1       1 random text
some some random text

> nawk -F'\t' '{if($1==$2){print}}' temp
> 
```

我还不确定为什么第二个命令不起作用。但是是的，你需要删除它`-F`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:48:35.577

我以 sudo_O 的例子为例

```
[sgeorge@sgeorge-ld ~]$ cat s
1       1        col3   line1
two     two      col3   line2
three   3        col3   line3           
four4   four4    col3   line4
[sgeorge@sgeorge-ld ~]$ cat s | perl -lane '$F[0] == $F[1] && print'
1       1        col3   line1
two     two      col3   line2
four4   four4    col3   line4 
```

# network-programming - 如何使用 Windows 应用商店应用程序（C# 和 Xaml）获取局域网中的所有 IP 地址

> ID：14211798
> 
> 赞同：1
> 
> 时间：2013-01-08T09:25:13.197
> 
> 标签：network-programming, windows-runtime, windows-store-apps

我目前正在开发 Windows Store 应用程序，我一直在尝试获取连接在 LAN 中的机器的 IP 地址列表，但我无法获得，因为我可以找到网络接口类但在 GetAllNetworkInterfaces () 不存在于 Windows Store Apps 框架的 .net 中，请任何人指导我以任何其他方式获取在 LAN 中连接的 Windows Store Apps 的 IP 地址。以下链接中的 GetAllNetworkInterfaces() 方法示例

[http://www.mindstick.com/Blog/149/Retriving%20network%20device%20information%20in%20center](http://www.mindstick.com/Blog/149/Retriving%20network%20device%20information%20in%20center)代码在这里

如果您可以向我提供与此相关的任何有用的链接，那将是最有帮助的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:02:13.847

WSA 中的网络信息可在`Windows.Networking.Connectivity`.

[+信息](http://www.c-sharpcorner.com/UploadFile/99bb20/accessing-network-profile-information-in-windows-store-apps/)

[++信息](http://msdn.microsoft.com/en-us/library/windows/apps/br207308.aspx)

在知道可用的接口和 LAN 适配器的 IP 后，您应该尝试发送 ICMP（填充 ARP 表）或 RARP 直接[+info](https://stackoverflow.com/questions/1148778/how-do-i-access-arp-protocol-information-through-net) ，我不知道 ARP 表或发送 RARP 的接口是否可以从 WSA 访问。祝你好运！

# jenkins - Nant 错误显示在 Jenkins 的工作摘要中

> ID：14211799
> 
> 赞同：0
> 
> 时间：2013-01-08T09:25:18.840
> 
> 标签：jenkins, build-process, build-automation, nant

我之前使用 CCNet 进行构建，并且有一个聪明的插件可以解析来自 NAnt 的错误并将其显示在构建摘要中。现在我尝试搬到詹金斯并遇到问题。我希望在给定构建的摘要中显示错误，但不知道如何执行此操作。当 NAnt 发生错误时，目前唯一的解决方案是：转到控制台输出并手动查找错误。也许有人知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:19:46.700

根据您正在构建的内容，有各种插件可能会有所帮助：

*   [违规插件](https://wiki.jenkins-ci.org/display/JENKINS/Violations)
*   [警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)
*   [日志解析器插件](https://wiki.jenkins-ci.org/display/JENKINS/Log+Parser+Plugin)

完整列表可以在[Jenkins 插件页面上找到](https://wiki.jenkins-ci.org/display/JENKINS/Plugins)

# backbone.js - BackboneJS - 设置父/继承视图的 'el'

> ID：14211811
> 
> 赞同：0
> 
> 时间：2013-01-08T09:26:01.447
> 
> 标签：backbone.js

所以我试图`<table>`在 Backbone 中抽象我的工作，所以我创建了一个扩展我的“基本视图”的“表格视图”。因此，当我需要一个新表时，我可以扩展“表视图”并希望将“表视图”指向我希望它呈现的 DOM 元素，即。像这样：

```
app.Views.quotesList = app.Views.table.extend({
    template: '#tmpl-table',

    initialize: function(){
        this.collection = new Backbone.Collection([
          {name: "Tim", age: 5},
          {name: "Ben", age: 26},
          {name: "Rob", age: 55}
        ]);
    },

    render: function() {
        var that = this;
        var template = Handlebars.compile( $(this.template).html() );
        $(this.el).html(template({id: 'quotes'}));

        this.table = this.$('#table-quotes');
        this.thead = this.table.find('thead tr');
        this.tbody = this.table.find('tbody');

        var template = Handlebars.compile( $('#table-heading').html() );
        that.thead.append(template(that.collection.first().toJSON()));

        var template = Handlebars.compile( $('#table-row').html() );
        that.collection.each(function(model){
            that.tbody.append(template(model.toJSON()));
        });
        return this;
    },

}); 
```

我想将大部分通用代码移到表格视图中：

```
app.Views.table = app.Views.base.extend({

        initialize: function(){

        }

    }); 
```

那么我将如何告诉“表视图”从“quotesList 视图”中渲染哪个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:39:14.840

除非我误解了您在此处追求的内容，否则您仍然应该能够在`el`构造子视图时传入，即使它继承自表视图：

```
new app.Views.quotesList({ el: $('#foo') }) 
```

只要您将它传递给初始化程序，它就会在您调用`render()`或使用它的任何其他东西时设置，即使它`render()`是由父（表）视图定义的。

# sql - GROUP BY 子句 - 不适用于 Blackberry 7.0 的 HSQLDB

> ID：14211813
> 
> 赞同：0
> 
> 时间：2013-01-08T09:26:02.547
> 
> 标签：sql, hsqldb

我在 Blackberry 7.0 的应用程序中使用了带有 Group By Clause 的 HSQL 查询。

我尝试了以下查询：

```
SELECT Cus.cus_id,Cus.cus_last_name,Inv.inv_id,Sum(Inv.inv_due_amt) as ACCOUNT
FROM Customer as Cus,Invoice as Inv
Where Cus.cus_id=Inv.cus_id 
GROUP BY Cus.cus_last_name; 
```

我越来越`"Not in aggregate function or group by clause error"`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:31:12.697

Cus.cus_id 和 Inv.ind_id 列必须位于聚合函数或 GROUP BY 子句中。我怀疑你想要：

```
SELECT 
  Cus.cus_id,Cus.cus_last_name,Inv.inv_id,Sum(Inv.inv_due_amt) as ACCOUNT 
FROM 
  Customer as Cus,Invoice as Inv 
Where 
  Cus.cus_id=Inv.cus_id 
GROUP BY 
  Cus.cus_last_name, Cus.cus_id, Inv.inv_id 
```

但是我不确定这会给你真正想要的分组。这可能是您想要的更多：

```
SELECT 
  Cus.cus_id,Cus.cus_last_name,Sum(Inv.inv_due_amt) as ACCOUNT 
FROM 
  Customer as Cus,Invoice as Inv 
Where 
  Cus.cus_id=Inv.cus_id 
GROUP BY 
  Cus.cus_last_name, Cus.cus_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:31:26.393

所有非聚合列都应该是 GROUP BY 子句的一部分。尝试这个

```
SELECT Cus.cus_id,Cus.cus_last_name,Inv.inv_id,Sum(Inv.inv_due_amt) as ACCOUNT
FROM Customer as Cus,Invoice as Inv
Where Cus.cus_id=Inv.cus_id 
GROUP BY Cus.cus_id,Cus.cus_last_name,Inv.inv_id 
```

# r - R中的逻辑测试 - 分组数据的解决方案

> ID：14211821
> 
> 赞同：0
> 
> 时间：2013-01-08T09:26:37.680
> 
> 标签：r, grouping

在与我的一位朋友交谈后，我不确定我执行简单测试操作的解决方案是否非常适合在 R 中编程的方式。我对 r 很陌生，所以我可以使用一些反馈如何正确学习而不是编写大量代码。

我的目标只是根据不同的范围对列中的值进行分组。所以我做的是以下内容：

```
 #create a test df
    a<-factor(c("a","b","c","d","e","f","g"))
    b<-c(1,2,NA,4,5,6,7)
    c<-factor(c("a","a","a","d","e","f","a"))
    d<-c(1,7,1,7,2,5,4)
    df.abcd<-data.frame(a,b,c,d)
    df.abcd

    # apply groups in new column based on values in d 
    # groups are 0-2, 3-5, 6-7
    df.abcd$groups<-
      ifelse(df.abcd$d>-1&df.abcd$d<=2,"0-2",
             ifelse(df.abcd$d>2&df.abcd$d<=5,"3-5",
                    ifelse(df.abcd$d>5&df.abcd$d<=7,"6-7","outside the defined Ranges" 
                    )

             )
      ) 
```

所以这个解决方案对我来说效果很好，但它有很多代码和很多 ifelse 东西。也许应该有一个更优雅的解决方案。

我的朋友告诉我，R 的设计目的不是在数据帧中做这么多工作（在我的例子中，我应用了一个新列），而是直接处理新对象。所以他建议像将组创建为像 Group1<- 这样的对象。由于我自己学习 R，而且我没有教授教我以正确的方式去做（边做边学），我不想避免反对语言的逻辑（如果有这样的事情）。

所以任何帮助和解释将不胜感激。最好的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:31:56.163

您可以使用`cut()`它，然后调整您的因子水平：

```
df.abcd$groups <- cut(df.abcd$d, c(0,2,5,7))
levels(df.abcd$groups) <- c("0-2", "3-5", "6-7", "Outside the defined range")
df.abcd$groups[is.na(df.abcd$groups)] <- max(levels(df.abcd$groups)) 
```

或者你可以使用索引向量，例如如果你不想分割一个连续的范围：

```
df.abcd$groups[df.abcd$d>-1 & df.abcd$d<=2] <- "0-2"
df.abcd$groups[df.abcd$d>2 & df.abcd$d<=5] <- "3-5"
df.abcd$groups[df.abcd$d>5 & df.abcd$d<=7] <- "6-7"
df.abcd$groups[is.na(df.abcd$groups)] <- "Outside the defined range"
df.abcd$groups <- as.factor(df.abcd$groups) 
```

一般来说，循环和/或堆叠大量 ifelse 不是一个好主意。尽可能使用索引向量和内置 R 函数。

# php - zend framework 1.11 无法访问phpthumb库

> ID：14211831
> 
> 赞同：0
> 
> 时间：2013-01-08T09:27:13.170
> 
> 标签：php, zend-framework

我正在开发一个 zend 框架 1.11 站点并使用 phpthumb 作为缩略图。突然它应用说

```
Warning: include_once() [function.include-once]: Unable to access /var/www/vhosts`/ege.org/httpdocs/application/library/PhpThumb/ThumbLib.inc.php in /var/www/vhosts/ege.org/httpdocs/application/controllers/PageController.php on line 95` 
```

页面控制器第 95 行是

```
 include_once '../library/PhpThumb/ThumbLib.inc.php'; 
```

该应用程序运行良好。现在这个问题突然出现了。注意：这适用于我的 windows devlopment 服务器，但不适用于生产 linux 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:09:36.840

在经典的 Zend 应用程序中可以工作：

```
include_once APPLICATION_PATH . '/library/PhpThumb/ThumbLib.inc.php'; 
```

请记住，Linux 系统是区分大小写的。

# vim - 如何使 Vim 的缩进在其他软件中看起来一致？（例如 Textmate、textwrangler）

> ID：14211833
> 
> 赞同：0
> 
> 时间：2013-01-08T09:27:19.353
> 
> 标签：vim, macvim, indentation

我使用 MacVim 来编辑我的代码。在Vim、Emacs 和 textedit中缩进**看起来很不错。**但是它们在Textmate2，textwrangler**中看起来很糟糕。**

**如何使 Vim 的缩进在其他软件中看起来一致？（例如 Textmate、textwrangler）？**

这是我关于 Tap 的 vim 设置：

```
"auto indent of new line accoring to the previous line
set autoindent 
"smart indent for c program
set smartindent
" add tab of new line
set smarttab
" define smarttab length
set shiftwidth=4 
```

![vim](../Images/7c3fc0a02466f2efe622cfbf1fa8c467.png) ![emacs](../Images/b6e7c381b11561ab1a2ec79cdd636986.png) ![文本编辑](../Images/71dd62210bf78153acede4c24f36863c.png) ![同学](../Images/f40562af9e082aa1dbbc34d506e9a0e8.png) ![文本](../Images/7d1e8f29c219c0acd0ca685de65a2c04.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:33:23.633

看起来这些程序并不都以相同的方式解释选项卡。确保它在所有文本编辑器中看起来都相同的最简单方法是仅使用空格：

```
set tabstop=4
set shiftwidth=4
set expandtab 
```

您可能还想使用`:retab`. 结帐[将制表符转换为空格](http://vim.wikia.com/wiki/Converting_tabs_to_spaces)以获取更多信息。

# jsf - 如何在 JSF 中保存上传的文件

> ID：14211843
> 
> 赞同：21
> 
> 时间：2013-01-08T09:27:53.943
> 
> 标签：jsf, file-upload, save

我在 JSF 中上传一个文件。我`<t:inputFileUpload>`为此使用了 Tomahawk，但同样的问题也适用于 PrimeFaces`<p:fileUpload>`和 JSF 2.2`<h:inputFile>`等。

我有以下支持 bean 代码：

```
private UploadedFile uploadedFile; // +getter+setter

public String save() throws IOException {
    String name = uploadedFile.getName();
    System.out.println("File name: " + name);

    String type = uploadedFile.getContentType();
    System.out.println("File type: " + type);

    long size = uploadedFile.getSize();
    System.out.println("File size: " + size);  

    InputStream stream = uploadedFile.getInputStream();
    byte[] buffer = new byte[(int) size];  
    stream.read(buffer, 0, (int) size);  
    stream.close();  
} 
```

我能够获取文件名、类型和大小，但无法将此文件保存在特定路径。我想不出保存上传文件的正确方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-08T11:44:15.860

上传文件的`getInputStream()`方法代表文件内容。

```
InputStream input = uploadedFile.getInputStream(); 
```

您需要将其复制到文件中。您应该首先在本地磁盘文件系统上准备一个文件夹，用于存储上传的文件。例如，`/path/to/uploads`（在 Windows 上，这将与服务器运行在同一个磁盘上）。请注意，您**绝对不应**使用硬编码路径或 Web 相对路径将文件存储在扩展的 WAR 文件夹甚至 IDE 项目的文件夹中，或者`getRealPath()`出于此处提到的原因[Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page)。

然后，您需要自动生成文件名。否则，当其他人稍后上传巧合同名的文件时，它将被覆盖。您可以使用[`Files#createTempFile()`](http://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createTempFile-java.nio.file.Path-java.lang.String-java.lang.String-java.nio.file.attribute.FileAttribute...-)工具来获取自动生成的文件名。

```
Path folder = Paths.get("/path/to/uploads");
String filename = FilenameUtils.getBaseName(uploadedFile.getName()); 
String extension = FilenameUtils.getExtension(uploadedFile.getName());
Path file = Files.createTempFile(folder, filename + "-", "." + extension); 
```

如有必要，可以根据本问答中所示的几种方法之一对上传路径进行参数化：[在 servlet 应用程序中保存上传文件的推荐方法](https://stackoverflow.com/questions/18664579/recommended-way-to-save-uploaded-files-in-a-servlet-application)。它`FilenameUtils`是 Apache Commons IO 的一部分，您应该已经在类路径中拥有它，因为它是 Tomahawk 文件上传组件的依赖项。

最后，只需将上传的文件流式传输到该文件（假设 Java 7）：

```
try (InputStream input = uploadedFile.getInputStream()) {
    Files.copy(input, file, StandardCopyOption.REPLACE_EXISTING);
}

System.out.println("Uploaded file successfully saved in " + file); 
```

然后，要下载它，最简单的方法是注册`/path/to/uploads`为新的 webapp 上下文或虚拟主机，以便所有这些文件都可以通过 URL 获得。另请参阅[使用 <h:graphicImage> 或 <img> 标签从 webapps/webcontext/deploy 文件夹外部加载图像](https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-16T06:19:55.127

PrimeFaces 使用两个文件上传解码器来上传 p:fileupload 的内容

1.  NativeFileUploadDecoder
2.  CommonsFileUploadDecoder

NativeFileUploadDecoder 是默认的上传解码器，它需要 servlet 容器 3.0。因此，如果您的 servlet 容器小于 3，那么它将无法与您一起使用。还有一些应用服务器限制使用多部分内容

因此，如果由于任何原因您对本机上传解码器有问题，您必须使用另一个解码器，即“CommonsFileUploadDecoder”

CommonsFileUploadDecoder 依赖于 Apache 公共库，因此您必须将**commons-fileupload 和 commons-io jar**放在类路径中，版本取决于您的 primefaces 版本，但 1.3 和 2.2 分别适用于我。

要使用 CommonsFileUploadDecoder 你必须使用过滤器

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

**仅等待过滤器将不起作用**，因为在过滤器内部它会检查上传器是否未提供，并且它至少检测到 JSF 2.2，因此它将绕过对默认解码器“Native”的请求，然后它也不适用于您

要强制过滤器使用通用解码器，您必须将以下上下文参数放入 web.xml

```
<context-param>
<param-name>primefaces.UPLOADER</param-name>
   <param-value>commons</param-value>
</context-param> 
```

# ember.js - Ember js 状态处理

> ID：14211844
> 
> 赞同：0
> 
> 时间：2013-01-08T09:27:53.847
> 
> 标签：ember.js

我对 Ember 真的很陌生，我有一些问题和疑问。

我使用此函数从单个表行中获取信息

```
click: function(e) {
   var element = $(e.target).closest("td");  
   App.person = element.text().trim();
   var router;
   router = this.get('controller.target.router');
   router.transitionTo('newRoute');
   } 
```

我已将变量绑定`Person`到文本字段：

```
{{view Ember.TextField valueBinding="App.Person"}} 
```

当我单击表格元素时，它会转换到`newRoute`并用所选条目填充文本字段。但是当我再次点击表格时，什么也没有发生。

我想要的是动态更改文本字段的内容。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:14:06.980

如果您想要动态更改文本字段的内容，则不需要路由器转换。如果您将字段绑定到默认上下文（控制器）而不是使用全局变量（如`App.person`.

```
{{view Ember.TextField valueBinding="person"}} 
```

然后在你的点击fx中，你可以修改值：

```
click: function(e) {
  text = this.get('controller.person');
  this.set('controller.person', text.trim();
} 
```

其他一些需要注意的事项：

*   `App.person`尽可能避免全局引用。该框架应该允许您通过局部变量访问所需的一切。*从 click fx 访问控制器的方式是 ember 方式*的一个示例。如果您无法在没有全局参考的情况下找到一种方法，请在 StackOverflow 上寻求帮助。
*   尽量避免通过 DOM 元素访问模型数据，例如`$(e.target).closest("td");`
*   如果您确实需要从视图代码开始转换，则无需访问路由器。假设您使用的是最新的 ember，您可以致电`this.get('controller').transitionTo('newRoute')`

# java - SQL：比较两个表

> ID：14211846
> 
> 赞同：0
> 
> 时间：2013-01-08T09:27:57.223
> 
> 标签：java, sql, netezza

嗨，我有这种情况，我很震惊。

我有两个表，表 A 和表 B，它们有一个共同的主键（panelist_id），并且对于每个 panelist_id，都有许多 entity_id。

我想检查表中是否存在每个 panelist_id 和相同的 entity_ids。

注意：有很多 panelist_id，每个 panelist_id 都有很多 entity_id。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:36:22.183

要选择仅在其中一个表中可用的 panelist_id/entity_id 元组，请尝试执行以下操作：

```
select panelist_id, entity_id from
(
  select panelist_id, entity_id from a
  union all
  select panelist_id, entity_id from b
)
group by panelist_id, entity_id
having count(*) = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:34:17.073

```
Select A.panelist_id from tableA as A inner join tableB as B
on A.panelist_id=B.panelist_id
GROUP BY A.panelist_id
HAVING COUNT(DISTINCT A.entity_id)=COUNT(DISTINCT B.entity_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:46:10.443

我不能确切地知道你在问什么，如果你只想知道每个 Entity_ID/Panelist_ID 元组是否存在于一个或两个表中，那么这将起作用：

```
SELECT  Panelist_ID, 
        Entity_ID,
        CASE WHEN COUNT(A) > 0 AND COUNT(B) > 0 THEN 'Both Tables'
            WHEN COUNT(B) = 0 THEN 'Table A'
            WHEN COUNT(A) = 0 THEN 'Table B'
        END AS Status
FROM    (   SELECT  Panelist_ID, Entity_ID, 1 AS A, NULL AS B
            FROM    A
            UNION ALL
            SELECT  Panelist_ID, Entity_ID, NULL AS A, 1 AS B
            FROM    B
        ) T
GROUP BY Panelist_ID, Entity_ID; 
```

如果您想知道每个表中的元组相同的 panelist_ID，并且一个表中不存在另一个表中不存在的元组，您将需要使用此：

```
SELECT  *
FROM    A
        FULL JOIN B
            ON A.Panelist_ID = B.Panelist_ID
            AND A.Entity_ID = B.Entity_ID
WHERE   A.Entity_ID IS NOT NULL
AND     B.Entity_ID IS NOT NULL; 
```

或者，如果您想知道一个表中存在的元组而不是另一个表中的元组，您可以使用：

```
SELECT  *
FROM    A
        FULL JOIN B
            ON A.Panelist_ID = B.Panelist_ID
            AND A.Entity_ID = B.Entity_ID
WHERE   A.Entity_ID IS NULL
OR      B.Entity_ID IS NULL; 
```

**编辑**

根据关于只需要验证临时表与永久表相同的评论，您可以使用`EXISTS`：

```
SELECT  *
FROM    PermanentTable p
WHERE   NOT EXISTS 
        (   SELECT  1
            FROM    TempTable t
            WHERE   p.Panelist_ID = t.Panelist_ID
            AND     p.Entity_ID = t.Entity_ID
            ... More conditions to help find if entries are missing from temp table
        ) 
```

# yii - 自定义 CButtonColumn

> ID：14211847
> 
> 赞同：0
> 
> 时间：2013-01-08T09:27:58.637
> 
> 标签：yii, cbuttoncolumn

我使用 CButtonColumn 看起来像这样：

```
 <?php $this->widget('zii.widgets.grid.CGridView', array(
             'id'=>'user-grid',
             'dataProvider'=>$model->search(),
             'filter'=>$model,
             'pager' => array(
                 'firstPageLabel' => '&lt;&lt;', 
                 ),
             'columns'=>array(
                 'username',
                 'name',
                 'email',
                 'creationDate',
                 array(
                         'class' => 'CButtonColumn',
                         'template' => '{change} {view}',
                         'button' => array(
                            'change' => array(
                                'url' => 'aaaaaaaa',
                            ),
                     ),
                 )
             ),
         )); ?> 
```

我得到了一个错误：

> 使用未定义的常量 aaaaaaaa - 假定为 'aaaaaaaa'

如何正确自定义 CButtonColumn？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:33:49.780

```
'url'=>'Yii::app()->createUrl("your_controller/action")', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:30:01.337

尝试

```
'url' => '"aaaaaaaa"' 
```

反而

# c# - 一页上有多个 GridView

> ID：14211851
> 
> 赞同：4
> 
> 时间：2013-01-08T09:28:03.963
> 
> 标签：c#, asp.net, .net, webforms

我正在用 C# 创建一个应用程序。我创建了一个页面，其中有 5 个链接。每个链接都会打开一个不同的页面，其中有一个`GridView`.

我可以在一个页面上制作所有这些网格吗？即，当我单击时`link1`，页面上只会出现与该链接对应的网格，而当我单击时`link2`，只会出现网格`link2`？只有激活的链接的网格应该是可见的，而所有其他的网格都是隐藏的。

有人可以帮助我如何或从哪里开始吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:19:10.700

由于您在标签中指定了 web 表单，多视图控件会让您感到惊奇。为每个 gridview 声明一个具有不同视图的多视图控件。希望这会有所帮助。

用法

**标记**

```
 <form id="form1" runat="server">

    <asp:LinkButton ID="LinkButton1"  Text="Link1" runat="server" OnClick="LinkButton1_Click">LinkButton</asp:LinkButton>
    <br>
    <asp:LinkButton ID="LinkButton2" runat="server" Text="Link2" OnClick="LinkButton2_Click">LinkButton</asp:LinkButton></br>

<asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">

    <asp:View ID="View1" runat="server" >

        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>

    </asp:View>

      <asp:View ID="View2" runat="server">
      <asp:GridView ID="GridView2" runat="server">
    </asp:GridView>
</asp:View>
</asp:MultiView>

</form> 
```

**代码背后**

```
 protected void LinkButton1_Click(object sender, EventArgs e)
    {
        //retrieve data
        GridView1.DataBind();
        MultiView1.ActiveViewIndex=0;
     }

    protected void LinkButton2_Click(object sender, EventArgs e)
    {
         //retrieve data
        GridView1.DataBind();
        MultiView1.ActiveViewIndex=1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:00:37.820

正如 Abide Masaraure 所指出的那样，我的解决方案并不是那么优雅。我建议你按照他的回答。

但是您也可以将每个gridview 放在不同的div 中，并在这些div 中设置属性**“runat=server”**。

对于每个链接，您可以使用 asp.net 链接按钮（因为该元素具有 html 链接的默认外观）。

您的 aspx 代码将与此类似：

```
<asp:LinkButton runat="server" id="lnkButton_1" text="Link 1" OnClick="lnkButton_1_Click"/>
<asp:LinkButton runat="server" id="lnkButton_2" text="Link 2" OnClick="lnkButton_2_Click"/>
<asp:LinkButton runat="server" id="lnkButton_3" text="Link 3" OnClick="lnkButton_3_Click"/>
<asp:LinkButton runat="server" id="lnkButton_4" text="Link 4" OnClick="lnkButton_4_Click"/>
<asp:LinkButton runat="server" id="lnkButton_5" text="Link 5" OnClick="lnkButton_5_Click"/>

<div runat="server" id="divGrid_1" Visible="false">
   <asp:GridView runat="server" id="grid_1"></asp:GridView>
</div>

<div runat="server" id="divGrid_2" Visible="false">
   <asp:GridView runat="server" id="grid_2"></asp:GridView>
</div>

<div runat="server" id="divGrid_3" Visible="false">
   <asp:GridView runat="server id="grid_3"></asp:GridView>
</div>

<div runat="server" id="divGrid_4" Visible="false">
   <asp:GridView runat="server" id="grid_4"></asp:GridView>
</div>

<div runat="server" id="divGrid_5" Visible="false">
   <asp:GridView runat="server" id="grid_5"></asp:GridView>
</div> 
```

您的 aspx.cs（代码隐藏）代码将像这样：

```
protected void lnkButton_1_Click(object sender, EventArgs E)
{
   divGrid_1.Visible = true;
   divGrid_2.Visible = false;
   divGrid_3.Visible = false;
   divGrid_4.Visible = false;
   divGrid_5.Visible = false;

   LoadGridView_1();
} 
```

并且对于每个链接按钮事件单击，您可以将对应的 div 的可见性设置为 true，将其他的设置为 false，然后调用加载对应的 gridview 的方法。

我希望我已经帮助了你。

此致。

# c - 读取文件时出现运行时错误：运行时检查失败 #2 - 变量“delta_c”周围的堆栈已损坏

> ID：14211853
> 
> 赞同：0
> 
> 时间：2013-01-08T09:28:06.523
> 
> 标签：c, visual-studio-2010, runtime-error

使用 C 读取文件时出现奇怪的运行错误，错误消息是“运行时检查失败 #2 - 变量 'delta_c' 周围的堆栈已损坏。” 我正在使用视觉工作室 2010

这是我运行错误的代码的简化版本（即使在这个简化版本上我也遇到了运行错误）

```
#include "stdafx.h"

typedef struct {
    unsigned short dx;  
    unsigned short dy;
    unsigned char  dr;  
    unsigned short ext; 
    unsigned char delta_c; 
} Delta;

typedef struct {
    unsigned char   region;     
    unsigned char   delta_num;  
    Delta       delta[8];   
} MNTDATSTRUCT;
int ReadAr(const char* mntfile, MNTDATSTRUCT *p)   
{
    FILE *fp = fopen(mntfile, "r");

    fscanf(fp, "%u",&p->delta_num);
    for (int i=0; i<p->delta_num; ++i) {
        unsigned short dx, dy, ext;
        unsigned char delta_c;
        fscanf(fp,"%u%u%u%u", &dx, &dy, &ext, &delta_c);
        p->delta[i].dx = dx;
        p->delta[i].dy = dy;
        p->delta[i].ext = ext;
        p->delta[i].delta_c = delta_c;

    }
    fclose(fp);
    return 0;
}

int main()
{
    MNTDATSTRUCT p;
    ReadAr("F:\\projects\\test_c++\\Debug\\tt.bpm",&p);
    return 0;
} 
```

我计划读取的数据文件（即 tt.bpm）如下所示：

```
1 
1 2 10 13 
```

请注意，由于某些原因，结构 Delta 的某些字段未显示在数据文件（无符号字符博士）上。也适用于 struct MNTDATSTRUCT 中的无符号字符区域

当我尝试运行代码时，Visual Studio 将停止在第 33 行（就在从 ReadAr 返回 0 之后），并弹出运行时错误消息：运行时检查失败 #2 - 变量“delta_c”周围的堆栈已损坏。 "，尽管在监视窗口中，MNTDATSTRUCT *p 已被属性填充。

我很好奇这种情况。谁能给我一些建议？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:36:37.760

您需要`h`为短整数添加修饰符并使用`hh`字符。

```
fscanf(fp, "%hhu",&p->delta_num);
…
fscanf(fp,"%hu%hu%hu%hhu", &dx, &dy, &ext, &delta_c); 
```

# delphi - 哪些图标资源与 Windows 8 相关？

> ID：14211854
> 
> 赞同：1
> 
> 时间：2013-01-08T09:28:22.537
> 
> 标签：delphi, delphi-4

哪些图标资源与 Windows 8 最相关？我目前在 res 文件中有最大的图标 48x48 x256 颜色，我应该为 Win8 有一个更大的图标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:13:42.150

自 Vista 以来，这方面没有任何变化，至少对于桌面应用程序而言。换句话说，您已经过时了 5 年。;-)

[为 Vista 引入](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511280.aspx)的指南仍然有效。对于应用程序图标，指南说：

> **应用程序图标和控制面板项目：**全套包括 16x16、32x32、48x48 和 256x256（代码在 32 和 256 之间缩放）。

256px 图标应该是压缩的 PNG 图标。Delphi 4 资源编译器不支持此类图标。例如，您可以使用 MS 资源编译器，`rc.exe`.

# c# - 将 var 从 Razor MVC 传递到 JQuery

> ID：14211858
> 
> 赞同：1
> 
> 时间：2013-01-08T09:28:47.237
> 
> 标签：c#, jquery, razor, asp.net-mvc-4

我有一个项目列表，所有项目都有一个“单击此处获取更多信息”链接。通过此链接，我想打开一个模式弹出窗口并在其中显示详细信息。我的问题是，如何将 id 传递给相关的模式弹出窗口。

目前我有以下代码： -

列表中的每个项目都将具有以下内容：-

```
<a href="#" class="modal_link" data-id="@item.ExpId">Click here for more info.</a> 
```

在我的 jquery 中，我有以下内容：-

```
 var id = $(".modal_link").attr("data-id");
alert(id);

$(document).ready(function () {
    $('.modal_block').click(function (e) {
        $('#tn_select').empty();
        $('.modal_part').hide();
    });

    $('.modal_link').click(function (e) {
        $('.modal_part').show();
        var context = $('#tn_select').load('/Experience/ShowExpDetail?id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    });

}); 
```

但是 id 始终未定义。

我怎样才能通过这个变量？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:37:23.027

由于您希望在`id`单击时提供每个链接的 ，因此您需要使用从 获取的自引用，`this`如下所示：

```
$('.modal_link').on('click', function (e) {
    e.preventDefault();
    $('.modal_part').show();

    var id = $(this).attr('data-id');
    var context = $('#tn_select').load('/Experience/ShowExpDetail?id=' + id, function () {
        initSelect(context);
    });
}); 
```

你的`load()`电话对我来说并不完全正确，但我必须看看剧本的其余部分才能知道......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:30:41.967

把这些线移到 `var id = $(".modal_link").attr("data-id"); alert(id);` 里面 `$(document).ready(function () {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:33:01.887

```
 $('.modal_link').click(function (e) {

 alert($(this).attr('id'));
        $('.modal_part').show();
        var context = $('#tn_select').load('/Experience/ShowExpDetail?id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    }); 
```

# c# - 根据输入的 URL 验证文本框

> ID：14211860
> 
> 赞同：1
> 
> 时间：2013-01-08T09:29:08.460
> 
> 标签：c#, validation, asp.net-mvc-4, foolproof-validation

我正在尝试根据输入的 URL 验证两个文本框，这些文本框用于职称和军衔。

通常，对于我创建的大多数路线，仅需要三个 URL 当前需要军衔，而在类似的项目中，我使用已添加到视图模型的 MVC Foolproof Validation 添加了 RequiredIf 注释，在这种情况下我曾尝试使用注释，但因为我正在从域模型项目进行验证，所以万无一失的验证不起作用。

我目前使用以下代码在域模型中部分实现了自定义验证作为处理程序类：

```
 if (paymentDetailsForm.UseRankInsteadOfJobTitle)
        {
            if (paymentDetailsForm.Rank == null)
            {
                yield return new ValidationResult(Resources.JobRankRequired);
            }
        } 
```

本质上，我创建了一个名为 UseRankInsteadOfJobTitle 的布尔值，根据输入的 URL 将其设置为 true 或 false。

将此值设置为 true 或 false 我在控制器中使用了此代码：

```
if ((programme.Code == "AMAC") || (programme.Code == "AMACD") || (programme.Code == "AMACR"))
        {
            ViewData["UseRankInsteadOfJobTitle"] = true;
        }
        else
        {
            ViewData["UseRankInsteadOfJobTitle"] = false;
        } 
```

然后在视图上创建了一个隐藏字段：

```
@Html.Hidden("UseRankInsteadOfJobTitle", @ViewData["UseRankInsteadOfJobTitle"]) 
```

然后生成以下 HTML：

**对于错误值**

```
<input data-val="true" data-val-required="The Boolean field is required." id="UseRankInsteadOfJobTitle" name="UseRankInsteadOfJobTitle" type="hidden" value="False" /> 
```

**对于真实值**

```
<input data-val="true" data-val-required="The Boolean field is required." id="UseRankInsteadOfJobTitle" name="UseRankInsteadOfJobTitle" type="hidden" value="True" /> 
```

目前没有显示职位或军衔的验证消息，我需要一种方法来确定 USERankInsteadOfJobTitle 的值是真还是假。

我曾尝试使用 formCollection 类来获取隐藏字段的值，但到目前为止这还没有奏效。

任何有关如何执行此操作或验证这些文本框的更好方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:42:36.580

你试过用`Request["Fieldname"]`吗？

也许像`someBoolean = Request["UseRankInsteadOfJobTitle"]`什么？

# c# - 如何在fillCommand中使用？

> ID：14211863
> 
> 赞同：0
> 
> 时间：2013-01-08T09:29:24.100
> 
> 标签：c#, ado.net, sqlcommand

我想`using` 用于`sql command`：

```
using(SqlCommand command = new SqlCommand("usp_UpdateUser", _sqlConnection, _sqlTransaction))
{
   ....
} 
```

但在`FillCommand(ref command)`我得到例外：

`Cannot pass command as ref or out variable because it is using variable.`

我的代码是：

```
SqlCommand command = new SqlCommand("usp_UpdateUser", _sqlConnection,  
          _sqlTransaction);

command.CommandType = CommandType.StoredProcedure;
command.Parameters.Add(new SqlParameter("@Id", SqlDbType.Int)).Value = Id;

FillCommand(ref command);
try
{
     command.ExecuteNonQuery();
}
catch
{
     throw;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:40:40.657

自从

```
FillCommand 
```

是您编写的函数并且您将其用作`void`函数，您可以修改它以使其返回命令而不是将其作为`ref`参数传递。

使用这样的东西：

```
using(SqlCommand command = FillCommand("usp_UpdateUser", _sqlConnection, _sqlTransaction, CommandType.StoredProcedure))
{
   ...
} 
```

# spring - 春天有没有比 Tiles 更好的方法来处理模板？

> ID：14211865
> 
> 赞同：0
> 
> 时间：2013-01-08T09:29:35.630
> 
> 标签：spring, spring-mvc

如今，网站通常被划分为可重用的模板，这些模板在不同的网页之间呈现。例如，一个包含页眉、页脚、菜单等的网站。这些项目在整个网站中保持不变，并赋予它一个共同的外观和感觉。在每个网页中硬编码是非常困难的，如果以后需要更改，那么所有页面都需要修改。因此我们使用模板化机制。我们创建一个通用的页眉、页脚、菜单页面，并将其包含在每个页面中。我们在 Spring 中找到了足以满足上述需求的瓷砖。但是有没有比 Spring 中的瓷砖更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:42:13.927

如果您正在寻找一个相当直接的 Tiles 交换，那么您可以看看[Sitemesh](http://wiki.sitemesh.org/display/sitemesh/Home)。我们已经使用这个相当成功的一段时间了。模板功能可以应用于 Spring Web 或 JSF 实现（即使后者提供了一些其他方法）。

但我怀疑您更倾向于寻找摆脱简单模板的方法，对吧？

# spring-mvc - Spring MVC 中的验证器

> ID：14211866
> 
> 赞同：1
> 
> 时间：2013-01-08T09:29:43.820
> 
> 标签：spring-mvc, bean-validation

我们在 Spring MVC 中使用@Min、@Max、@NotNull 等注释进行服务器端验证。这些注释应该放在模型类中。假设我想在需要时应用这样的注释，我不想在模型类中应用这样的注释。

例如。

我有一个类 Person，其属性为 Name、Gender、Email。如果我将@NotNull 注释放在电子邮件属性上，那么它将在全球范围内应用，如果我的要求发生变化，例如在我的系统中有两个人 Student 和 Teacher 并且对于教师注册电子邮件是可选的，但对于 Student 它不为空，那么我怎么能做到这一点。

在上述示例的情况下，我可以动态应用验证注释吗？

如果 UserRegistration 是针对教师的，那么电子邮件是可选的。

如果 UserRegistration 是针对学生的，那么电子邮件是强制性的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:13:22.930

为了实现这种行为，我建议使用动态激活的组。看看我下面的例子。

`Person.java`：

```
class Person {

    @NotNull(groups = StudentChecks.class)
    @Email
    private email;

    // other members with getters/setters

    public interface StudentChecks {
    }
} 
```

在这种情况下，只有在激活组`@NotNull`时才会执行约束。`StudentChecks`要按条件激活验证组，Spring 提供了特殊的注释`@Validated`。

`StudentController.java`：

```
@Controller
public class StudentController {

    @RequestMapping(value = "/students", method = RequestMethod.POST)
    public String createStudent(@Validated({Person.StudentChecks.class}) Person student, BindingResult result) {
        // your code
    }

} 
```

您可以在此处找到更多详细信息：

*   [验证组](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-usingvalidator.html#validator-usingvalidator-validationgroups)
*   [@Validated 注解的 Javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/annotation/Validated.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:48:57.453

您将需要实现自己的验证器并将其注册到您的控制器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:58:22.753

这是使用 bean 验证提出的问题之一。事实上，它们实际上是在全球范围内应用的。

一个常见的问题是更新具有@before 或@after 注释的日期的实体导致无效更新，实际上这些不应该被检查。

解决此问题的常用方法是使用 DTO 或数据传输对象，而不是直接在控制器中接受模型对象，而是为该操作创建一个专门的类（您可以在其他操作中重用它。这样您还可以断开您的从你的软件实际做的模型,它更安全,因为spring只是绑定你扔给他的所有东西.例如,如果一个用户对象有一个管理标志,如果这个管理标志被发布并设置为true,spring会很乐意填充它在您的模型对象中。使用 DTO，您可以复制您需要的字段并忽略其余部分。

# playframework - 调用 Controller.notFound() 通过 onHandlerNotFound 但不考虑结果

> ID：14211870
> 
> 赞同：2
> 
> 时间：2013-01-08T09:29:49.473
> 
> 标签：playframework, playframework-2.0

在玩！框架 2.0.4，我遇到了 404 状态代码处理的问题。在`Global.java`中，我将重写`onHandlerNotFound`以返回自定义模板：

```
@Override
public Result onHandlerNotFound(RequestHeader header) {
   return Controller.notFound(views.html.not_found.render());
} 
```

它适用于未知路线，但如果我`Controller.notFound()`从请求中调用，它不会返回任何内容。

我尝试过深入调试，它通过控制器方法，然后通过`onHandlerNotFound`，所以它应该返回正确的`Result`.

所以我的问题是，这是正确的行为吗？`notFound()`如果是这样，除了重复前面的代码之外，如何将每个语句干净地重定向到正确的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:37:22.703

`Controller.notFound()`基本上返回一个 HTML 404 响应对象（如`new Object()`）。它为您设置标题，可能还有其他一些东西。（它的 javadoc 说：“生成 404 NOT_FOUND 简单结果”）

而`Global.onHandlerNotFound()`更像是一个`try {} catch(HandlerNotFoundException() {}`.

如果你打电话`Controller.notFound()`，你应该知道你在做什么。您甚至可以将一些内容传递给它以在页面上再次显示。（你在你的 中做什么`onHandlerNotFound`）。

如果你真的想执行`Global.onHandlerNotFound`，为什么不直接调用呢？否则，如果您通常不调用`Controller.notFound()`但只是`notFound()`在`YourController`您也可以覆盖此方法并调用`Global.onHandlerNotFound()`.

要明确回答您的问题，是的，这是正确的行为。这是两个不同的东西。

# r - 了解 R 中的“重新排序”如何工作

> ID：14211872
> 
> 赞同：2
> 
> 时间：2013-01-08T09:29:57.010
> 
> 标签：r, ggplot2

`/tmp/thefile.csv`给定（CSV 文件）中的以下数据：

```
AA,12
AB,1
BA,2 
```

和以下`R`代码：

```
v = read.csv('/tmp/thefile.csv', header=F)
library('ggplot2')
v$V3 = reorder(v$V1, v$V2)
ggplot(v, aes(x=v$V3, y=v$V2), stat='identity') + geom_bar(fill='dark grey', stat="identity") 
```

该图按升序显示条形图，这正是我想要的。如果没有这`reorder`条线，该图将根据因子按字母顺序显示。

然而：

```
> v
  V1  V2  V3
1 AA  12  AA
2 AB   1  AB
3 BA   2  BA 
```

显示顺序仍然是字母顺序。如何`ggplot`知道数字顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:34:19.260

如果您查看，`v$V3`您会得到以下 ( `print`) 输出：

```
[1] AA AB BA
attr(,"scores")
AA AB BA 
12  1  2 
Levels: AB BA AA 
```

在最低行中，您可以找到指定的级别顺序。

使用以下功能可以更轻松地获得此信息`levels`：

```
levels(v$V3)
[1] "AB" "BA" "AA" 
```

该函数`reorder`不会更改向量中的值（或其顺序），而是设置（更改）`levels`和`scores`属性以指示因子水平的顺序：

```
attributes(v$V3)
$levels
[1] "AB" "BA" "AA"

$class
[1] "factor"

$scores
AA AB BA 
12  1  2 
```

# objective-c - stringWithFormat：格式化字符串不是字符串文字

> ID：14211881
> 
> 赞同：0
> 
> 时间：2013-01-08T09:30:29.483
> 
> 标签：objective-c

我遇到了一个相当奇怪的问题`stringWithFormat:`。我创建一个字符串并将其分配给警报面板。

但出于某种原因，Xcode 说格式字符串不是字符串文字，即使它是？任何人都可以解释一下吗？

![在此处输入图像描述](../Images/434b1d1406df0dfef7e91f035925eec1.png)

标头声明：

```
APPKIT_EXTERN void NSBeginCriticalAlertSheet(NSString *title, NSString *defaultButton, NSString *alternateButton, NSString *otherButton, NSWindow *docWindow, id modalDelegate, SEL didEndSelector, SEL didDismissSelector, void *contextInfo, NSString *msgFormat, ...) NS_FORMAT_FUNCTION(10,11); 
```

**编辑：**看着标题声明，它来找我。我在变量`nil`之后缺少了一个。`msgFormat`Xcode 的警告虽然令人困惑 - 它应该是`missing sentinel in function call`相反的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:46:54.243

用这个

```
 NSString *localizedStr=[NSString stringWithFormat:@"bla bla %@ bla bla",_dev.name];
    NSString *_warning = NSLocalizedString(localizedStr);

    /*code for alert sheet 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:53:40.847

我认为问题在于您尝试在`NSString`执行相同操作的方法中传递带有参数的 a 。所以`NSBeginCriticalAlertSheet`实际上是在寻找另一个参数。

如果你把它放在另一个中`NSString stringWithFormat:`，它会使用文字字符串而不是尝试解析它。

所以在你的`NSBeginCriticalAlertSheet`:`_warning`应该替换为

```
[NSString stringWithFormat:@"%@", _warning] 
```

另请参阅[warning-format-not-a-string-literal-and-no-format-arguments](https://stackoverflow.com/questions/1677824/warning-format-not-a-string-literal-and-no-format-arguments)了解更多信息。

# java - jqgrid：添加行

> ID：14211889
> 
> 赞同：0
> 
> 时间：2013-01-08T09:30:53.310
> 
> 标签：java, jsp, servlets, jqgrid

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。

我正在使用 JQGRID 以表格格式显示数据。我还想要在 JQGRID 中添加、编辑、删除的功能。到目前为止，我已经完成了编辑、删除功能。

现在我想要添加功能，问题是当我点击默认`Add`按钮时，它只显示`DESCRIPTION`设置的字段，`editable:true`而不显示其他两个不可编辑的字段。我没有将它们设置为可编辑，因为它们是主键，我不希望它们被编辑。

所以我的问题是有什么方法可以在用户单击添加后将不可编辑的列设置为可编辑。

以下是我的源代码：

```
jQuery("#list10_d2").jqGrid({
                height: "100%",
                url:'ProtocolJGridServChildStages?q=2&action=protStages',
                datatype: "xml",
                 colNames:['Sr. No.','PROTOCOL_ID',  'STAGE_ID',  'DESCRIPTION'],
                 colModel:[{name:'srNo',index:'srNo', width:35,sortable:true},
                           {name:'PROTOCOL_ID',index:'PROTOCOL_ID', width:100,sortable:false},
                           {name:'STAGE_ID',index:'STAGE_ID', width:100,sortable:false},
                           {name:'DESCRIPTION',index:'DESCRIPTION', width:150,sortable:false,editable:true}
                           ],
                rowNum:5,
                rowList:[2,4,10],
                pager: '#pager10_d2',
                sortname: 'PROTOCOL_ID',
                viewrecords: true,
                sortorder: "asc",
                multiselect: true,
                editurl: "ProtocolJGridServChildStages?action=protocolStageEdit",
                caption:"CRM_PROT_STAGES",
                onSelectRow: function(ids)
                {
                    if(ids && ids!==lastsel)
                    {               
                        var ret = jQuery("#list10_d2").jqGrid('getRowData',ids);
                        protID = ret.PROTOCOL_ID;
                        stageID = ret.STAGE_ID;

                        jQuery("#list10_d2").jqGrid('setGridParam',{editurl:'ProtocolJGridServChildStages?action=protocolStageEdit&protID='+protID+'&stageID='+stageID});
                        jQuery('#list10_d2').jqGrid('restoreRow',lastsel);
                        jQuery('#list10_d2').jqGrid('editRow',ids,true);
                        lastsel=ids;
                    }
                }
            }).navGrid('#pager10_d2',{add:true,edit:true,del:true},{width:400,height:200},{width:500,mtype:'POST', url: 'ProtocolJGridServChildStages', addData:{action:'protocolStageAdd',protID: function () {return protID;}, stageID: function(){return stageID;}}, closeOnSubmit: true},{mtype: 'POST',url: 'ProtocolJGridServChildStages',delData: {action: 'protocolStageDelete',protID: function () {return protID;}, stageID: function(){return stageID;}}});
            jQuery("#ms1").click( function() {
                var s;
                s = jQuery("#list10_d2").jqGrid('getGridParam','selarrrow');
                alert(s);
            }).navGrid('#page',{edit:true,add:true,del:true}); 
```

提前致谢...

**编辑：**

```
.navGrid('#pager10_d2',{add:true,edit:true,del:true},{width:400,height:200},{width:500,mtype:'POST', url: 'ProtocolJGridServChildStages',beforeShowForm: function(){var cm = $('#list10_d2').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=true; cm = $('#list10_d2').jqGrid('getColProp',"STAGE_ID");  cm.editable=true; alert("before");}, addData:{action:'protocolStageAdd',protID: function () {return protID;}, stageID: function(){return stageID;}}, closeOnSubmit: true},{mtype: 'POST',url: 'ProtocolJGridServChildStages',delData: {action: 'protocolStageDelete',protID: function () {return protID;}, stageID: function(){return stageID;}}}); 
```

**编辑**

```
 }).navGrid('#pager10_d2',{add:true,edit:true,del:true},
                    {closeOnEscape:true, recreateForm: true, width:400,height:200},
                    {closeOnEscape:true, recreateForm: true, beforeShowForm: function(formId){var cm = $('#list10_d2').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=false; var cm2 = $('#list10_d2').jqGrid('getColProp',"STAGE_ID");  cm2.editable=true; alert("before");}, addData:{action:'protocolStageAdd',protID: function () {return protID;}, stageID: function(){return stageID;}},width:500,mtype:'POST', url: 'ProtocolJGridServChildStages',closeOnSubmit: true},
                    {closeOnEscape:true, recreateForm: true, mtype: 'POST',url: 'ProtocolJGridServChildStages',delData: {action: 'protocolStageDelete',protID: function () {return protID;}, stageID: function(){return stageID;}}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:44:32.007

在 click 函数中使用以下内容

```
$("#list10_d2").jqGrid('setCell',rowid,cellname, '', {editable:true});

list10_d2.trigger("reloadGrid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:55:18.097

试试这个

在 beforeShowForm 事件中

添加此代码

```
var cm = $('#list10_d2').jqGrid('getColProp',"PROTOCOL_ID"); 
```

里面添加选项

```
 {   cm.editable=true;} 
```

里面添加选项

```
 {cm.editable=false; } 
```

# c# - 包含额外的文件来构建项目但不修改项目文件

> ID：14211896
> 
> 赞同：0
> 
> 时间：2013-01-08T09:31:07.263
> 
> 标签：c#, .net, msbuild

我想编写自定义 msbuild 项目文件 a.proj 来调用项目文件 Project1/Project1.csproj 和 Project2/Project2.csproj。我不想更改 csproj，因为它们是由 VS 生成的。

我想在编译 Project1.csproj 和 Project2.csproj 时注入额外的源文件 abc.cs

这不起作用。你能建议这样做的方法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
    <Compile Include="abc.cs" />
</ItemGroup>
    <MSBuild Projects="Project1/Project1.csproj" />
    <MSBuild Projects="Project2/Project2.csproj" />
</Project> 
```

# ios6 - ios6中的自定义图标不显示在设备中

> ID：14211903
> 
> 赞同：1
> 
> 时间：2013-01-08T09:31:23.183
> 
> 标签：ios6, icons

我认为我的问题很简单，但是我搜索了stackover并找不到，可能是因为我不知道如何使用关键字。

问题在 IOS6 中，我开发了一个具有自定义图标的应用程序，它在模拟器中显示正常，但在真实设备上它仍然显示系统给出的旧图标。我不明白为什么会发生这种情况，谢谢你的帮助如果你能给我一个链接到这个网站上的答案，也谢谢你。：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:45:06.447

从您的设备中删除您的应用程序并重新安装 ipa。

# wdk - 用于读取超过 1 kb 文件的 FltReadFile 函数

> ID：14211909
> 
> 赞同：0
> 
> 时间：2013-01-08T09:31:50.343
> 
> 标签：wdk, minifilter, windows-kernel

我正在使用 WDK 的 FltReadFile 函数来读取文件。我只能读取 1kb 文件。如何读取超过 1kb 的文件？谢谢你。

```
offset.QuadPart = bytesRead = 0;
    status = FltReadFile( Instance,
                          FileObject,
                          &offset,
                          length,
                          buffer,
                          FLTFL_IO_OPERATION_NON_CACHED |
                          FLTFL_IO_OPERATION_DO_NOT_UPDATE_BYTE_OFFSET,
                          &bytesRead,
                          NULL,
                          NULL ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T05:04:09.983

You are using the flag `FLTFL_IO_OPERATION_DO_NOT_UPDATE_BYTE_OFFSET` which tells that do not update the current file position after reading a file (which generally happens).

If this flag is set, the `offset` parameter suggests to read from specified position by `offset` in the file.

So in your case, you have specified `offset=0` and `length=1024`, it is correctly reading - `1 to 1024` - 1KB bytes from file. If you do same call again without changing `offset` parameter it will read same 1KB bytes.

Documentation from [FltReadFile](http://msdn.microsoft.com/en-in/library/windows/hardware/ff544286%28v=vs.85%29.aspx) look at *ByteOffset* parameter documentation.

> ByteOffset [in, optional] Pointer to a caller-allocated variable that specifies the starting byte offset within the file where the read operation is to begin.
> 
> If this offset is supplied, or if the FLTFL_IO_OPERATION_DO_NOT_UPDATE_BYTE_OFFSET flag is specified in the Flags parameter, FltReadFile does not update the file object's CurrentByteOffset field.

# java - android中每个月的本地通知

> ID：14211919
> 
> 赞同：3
> 
> 时间：2013-01-08T09:32:34.693
> 
> 标签：java, android, eclipse

我正在使用以下代码

```
AlarmManager service = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(this, AlarmReceiver.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pending = PendingIntent.getBroadcast(this, 0, i,PendingIntent.FLAG_CANCEL_CURRENT);
Calendar cal = Calendar.getInstance();
// Start 30 seconds after boot completed
cal.add(Calendar.SECOND, 30);
//
// Fetch every 30 seconds
// InexactRepeating allows Android to optimize the energy consumption
service.setInexactRepeating(AlarmManager.RTC_WAKEUP ,cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY , pending);

// service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
// REPEAT_TIME, pending); 
```

在我的代码中，我希望它在一天的间隔后工作，并为 AlarmReceiver 服务进行广播。

但是我希望这在恰好一个月后发生。例如，如果一个人在 1 月 3 日安装应用程序，则下一个警报将在 2 月 3 日发生，依此类推。我怎么能把一个月的间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:40:11.007

请使用以下代码。它与您当前的代码没有太大区别。

```
AlarmManager service = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(this, AlarmReceiver.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pending = PendingIntent.getBroadcast(this, 0, i,PendingIntent.FLAG_CANCEL_CURRENT);
    Calendar cal = Calendar.getInstance();
    // Start 1 month after boot completed
    cal.add(Calendar.MONTH, 1);
    //
    // Fetch every 1 month
    // InexactRepeating allows Android to optimize the energy consumption
    service.setInexactRepeating(AlarmManager.RTC_WAKEUP ,cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY , pending); 
```

# java - Java 不必要的图像叠加

> ID：14211920
> 
> 赞同：2
> 
> 时间：2013-01-08T09:32:42.523
> 
> 标签：java, image, swing, paint, paintcomponent

您好 Java 开发人员，

到目前为止，我从未遇到过这种情况。这个场景是：（

为了让读者理解这个场景，让我们有这个插图。）

我们有这个`Box.png`并`Circle.png`声明：

```
private final URL IMG1_DIRECTORY = Main.class.getResource("/res/Box.png");
private final URL IMG2_DIRECTORY = Main.class.getResource("/res/Circle.png"); 
```

在我们的构造函数下：

```
try {
    box = ImageIO.read(IMG1_DIRECTORY);
} catch (Exception e) {
    // Our catchblock here
}

try {
    circle= ImageIO.read(IMG2_DIRECTORY);
} catch (Exception e) {
    // Our catchblock here
}

currentImg = box; 
```

使用该`paint`方法，将框绘制到我们`JPanel`的`Illustration 1`.

```
@Override
public void paint(Graphics g) {
    g.drawImage(currentImg, DEFAULT_LOCATION, DEFAULT_LOCATION, null);
} 
```

通过某个事件，`mousePressed`在这个例子中图像将被改变。

```
@Override
public void mousePressed( MouseEvent e ) {
        currentImg = circle;
        repaint();
} 
```

所需的输出显示在我们的`Illustration 2`. 不幸的是，结果恰好是`Illustration 3`.
问题是：
- 为什么结果恰好是两个图像相互重叠？
- 另一件事，如果我有一个代码可以将图像重新绘制为圆形（ From `Illustration 3`），那么该框只会覆盖`circle`图像。

![在此处输入图像描述](../Images/d6c94fba564d7b84a4429170f46300c8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T09:40:07.363

覆盖`paintComponent()`（不是`paint()`方法）。

称呼`super.paintComponent(g)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T09:41:01.723

1.  你没有调用`super.paint`，除了一大堆其他重要的东西之外，它还清除了图形上下文
2.  您应该很少需要覆盖`paint`，通常首选使用paintComponent，但请确保您调用`super.paintComponent`

图形上下文是共享资源，并且倾向于在重绘之间重用，这意味着，因为您在绘制时没有清除图形上下文，所以您拥有先前的“状态”，然后绘制

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:41:30.167

你需要重新粉刷屏幕。Java 一直在痛苦，直到您告诉它不要这样做或告诉它重新启动。

`super.paintComponent(g);`

将允许重置。或者，您只需在要空白的部分上重新绘制一个正方形

`g.clearRect(x,y,width,height)`

会让你清除一个左上角为 x,y 的矩形

更新此代码

```
@Override
public void paint(Graphics g) {
g.drawImage(currentImg, DEFAULT_LOCATION, DEFAULT_LOCATION, null);
} 
```

以允许更改。你也应该骑过paintComponent

# python - 强制 GIL 不切换线程

> ID：14211925
> 
> 赞同：3
> 
> 时间：2013-01-08T09:32:46.050
> 
> 标签：python, multithreading, profiling, gil

我正在分析一些多线程[CPython](https://en.wikipedia.org/wiki/CPython)代码。
为了测量执行特定代码段所需的时间，我想强制[GIL（全局解释器锁）](https://en.wikipedia.org/wiki/Global_Interpreter_Lock)**不在**该段的线程之间切换。如何才能做到这一点？

**更新：**
假设以下伪代码：

```
some_code_1()
make_the_interpreter_not_change_thread()
take_start_time()   # time critical
code_to_profile()   # time critical
take_end_time()     # time critical
release_the_interpreter()
some_code_2() 
```

我担心的是解释器会在“时间关键”分析期间切换线程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T09:45:17.620

GIL 不切换线程。GIL 是一个互斥体，可以防止多个线程同时执行字节码。因此，为了防止线程切换，您需要寻找其他地方。

您可以调用[`sys.setcheckinterval()`](http://docs.python.org/2/library/sys.html#sys.setcheckinterval)一个非常大的值来防止在分析您的代码时切换。

每当您调用`sys.setcheckinterval(count)`当前的“计数器”时，都会将其重置为新值，因此一旦您调用它，至少`count`字节码指令都不允许进行线程切换。

# inversion-of-control - Unity IoC 泛型类

> ID：14211927
> 
> 赞同：0
> 
> 时间：2013-01-08T09:32:56.613
> 
> 标签：inversion-of-control, unity-container

我有以下 UnitOfWork 类：

```
public class UnitOfWork<TContext> : IUnitOfWork where TContext : IContext, new()
{
    private readonly IContext _context;

    public UnitOfWork()
    {
        _context = new TContext();
    }

    public UnitOfWork(IContext context)
    {
        _context = context;
    }
    ...
} 
```

我想使用 Unity 将它注册到 IoC 容器，但我不知道该怎么做。我试图做这样的事情：

```
var container = new UnityContainer();

container.RegisterType(typeof(UnitOfWork<>), new InjectionConstructor(new GenericParameter ("TContext")));
... 
```

但它没有用。知道怎么做吗？

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:45:26.293

您没有发布 Resolve 方法（或其他依赖于 UnitOfWork 的对象），但在解决时，您必须指定类型。 `container.Resolve(typeof(UnitOfWork<>))`不能工作。

如果您尝试解析`UnitOfWork<ContextImplmentation>`并且`ContextImplemenation`在容器中注册了一个实例，您将获得一个`UnitOfWork<ContextImplmentation>`注入了该上下文实现值的实例。

如果您没有注册（或以某种方式覆盖）该类型的任何内容，您将收到错误消息，因为 Unity 不知道要使用 IContext 的哪个特定实现。

# java - 我无法移动 Java 中的哪个程序的应用程序

> ID：14211936
> 
> 赞同：-6
> 
> 时间：2013-01-08T09:33:35.677
> 
> 标签：java, widget

![错误](../Images/0d2808102fc9728c0ce4dc0d49e4a153.png)

我有一个错误，我无法移动或编辑应用程序。

我的错误是什么，我认为它正在运行，但我遇到了问题。

显示位于顶部左侧的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:36:51.537

我猜你确实设置`undecorated(true)`了，这就是你不能移动应用程序的原因。

此方法将删除标准操作，例如最小化、调整大小和关闭。即使这样，它也会禁用每个框架顶部的拖放栏。只需注释掉这一行，它将再次可移动

希望这是您正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:37:49.050

> 我无法移动或编辑应用程序。

我所能看到的只是一个警告，您有一个未定义 serialVersionUID 的 Serializable 类。如果你关心我怀疑你不应该关心的话，Eclipse 应该对此有一个快速修复。您可以关闭警告。

# mysql - utf8_unicode_ci utf16_unicode_ci utf32_unicode_ci

> ID：14211937
> 
> 赞同：0
> 
> 时间：2013-01-08T09:33:42.067
> 
> 标签：mysql, unicode, encoding

MySql中的utf8_unicode_ci、utf16_unicode_ci和utf32_unicode_ci有什么区别？

有性能差异吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:04:45.737

utf8_unicode_ci utf16_unicode_ci utf32_unicode_ci 是排序规则类型。您可以根据需要以及您的字符集类型进行选择。例如，如果您使用的是 utf8，那么您需要使用 utf8_unicode_ci（或 utf8_collat​​ion 系列中的任何其他），对于 utf16，您应该使用 utf16_unicode_ci 等等。

[对于来自SO post here](https://stackoverflow.com/questions/496321/utf8-utf16-and-utf32)的不同字符集类型参考

> UTF-8 的优势在于 ASCII 是最流行的字符。在这种情况下，大多数字符每个只占用一个字节。仅包含 ASCII 字符的 UTF-8 文件具有与 ASCII 文件相同的编码也是有利的。
> 
> UTF-16 在 ASCII 不占优势的地方更好，它主要使用每个字符 2 个字节。UTF-8 将开始为高阶字符使用 3 个或更多字节，而 UTF-16 在大多数情况下仅保留 2 个字节。
> 
> UTF-32 将覆盖所有可能的字符，每个字符 4 个字节，这使得它非常臃肿，我想不出使用它有什么好处。

希望能帮助到你...

# c# - 使用 C# 更改 Excel 单元格格式

> ID：14211939
> 
> 赞同：1
> 
> 时间：2013-01-08T09:33:49.577
> 
> 标签：c#, excel, formatting, cell

我有一个 C# 程序。一种方法是创建一个excel表，用数据填充它，格式化数据并保存为xls文件。对于格式化，我使用了类似的代码

```
oSheet.get_Range("F1", "P1").EntireColumn.NumberFormat = "#.##0,00 €";
oSheet.get_Range("F50", "F50").Formula = "=summe(F1:F49)"; 
```

它工作没有问题。

最近我做了一些其他的程序更改（与这个特定的方法无关）并构建了一个新的 exe。现在单元格格式不起作用。我不得不将代码更改为

```
oSheet.get_Range("F1", "P1").EntireColumn.NumberFormat = "#,##0.00 $";
oSheet.get_Range("F50", "F50").Formula = "=sum(F1:F49)"; 
```

让格式化再次起作用。即使我撤消所有更改并重建 exe，格式化仍然无法正常工作。如果我重建 exe，有​​人可以解释为什么旧代码不再工作吗？

我在用，

*   视觉工作室 2010
*   .Net 框架 4
*   办公室2003

提前致谢。

# javascript - 在 chrome 中，当用户在我的网站中拖动缩略图时，它如何显示完整大小的图像 url？

> ID：14211941
> 
> 赞同：0
> 
> 时间：2013-01-08T09:33:48.993
> 
> 标签：javascript, css, html, google-chrome

我们显示缩略图以节省带宽。

但是，当用户将缩略图拖到另一个浏览器选项卡时，我们希望显示完整大小的图像。

图片不是链接。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:35:41.833

只需将图像作为完整尺寸图像的链接即可。然后它应该在拖动缩略图时打开链接，打开全尺寸图像。

编辑：例如。

```
<a href="large-image1.jpg"><img src="thumbnail1.jpg" /></a> 
```

# linux - 从 expect/tcl 向 perl 脚本传递多个参数

> ID：14211942
> 
> 赞同：2
> 
> 时间：2013-01-08T09:33:53.587
> 
> 标签：linux, perl, tcl, expect

我对下面的脚本有一些麻烦。

```
proc checkUser {userip} {
    set search "show users | include "
    set search_cmd [concat $search $userip]
    exp_send "$search_cmd\r"

    expect {
        -re "Vi.*" {

            set oui "uei.opennms.org/services/passiveServiceStatus"
            set host "localhost"
            set iface "--interface $userip"
            set service "--service Test"
            set parm1 "--parm 'passiveNodeLabel [getNodeName $userip]'"
            set parm2 "--parm 'passiveIpAddr $userip'"
            set parm3 "--parm 'passiveServiceName Test'" 
            set parm4 "--parm 'passiveStatus Up'"

            send_user [ exec perl /opt/opennms/bin/send-event.pl $oui,$host,$iface,$service,$parm1,$parm2,$parm3,$parm4 ]
            #send_user [ exec [pwd]]

        }
    }
} 
```

整个 Expect 脚本执行没有错误，但是调用的 perl 脚本似乎没有执行，但是当我在 bash 中使用相同的参数运行 perl 脚本时，它会执行它应该做的事情。

这是从 Expect 中调用 perl 脚本的正确方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:58:32.410

编写的程序会将参数作为一个大参数传递给 Perl 脚本，参数之间用逗号分隔。虽然这通常是合法的，但它可能不是 Perl 程序想要的！取而代之的是，在两者之间放置空格，以便这些值在 Tcl 级别是单独的参数，并且它们也将在 Perl 级别成为单独的命令行参数：

```
exec perl /opt/opennms/bin/send-event.pl $oui $host $iface $service $parm1 $parm2 $parm3 $parm4 
```

此外，似乎每个 Tcl 变量都有多个参数，并且您试图在其中使用 shell 引用。那就*更不对了*。你最好写这样的代码：

```
expect {
    -re "Vi.*" {
        set oui "uei.opennms.org/services/passiveServiceStatus"
        set host "localhost"

        send_user [ exec perl /opt/opennms/bin/send-event.pl $oui $host \
                --interface $userip \
                --service "Test" \
                --parm "passiveNodeLabel [getNodeName $userip]" \
                --parm "passiveIpAddr $userip" \
                --parm "passiveServiceName Test" \
                --parm "passiveStatus Up" ]
    }
} 
```

每个参数字在 Tcl 中都是它自己的字；我已经加入了反斜杠换行符以使事情更清晰。我们使用双引号，这样它们可以在处理替换的同时嵌入空格，但是如果你需要一些奇怪的东西，那么请放入`{`大括号`}`或使用反斜杠。

# html5-canvas - 动力学对象内的内容

> ID：14211943
> 
> 赞同：1
> 
> 时间：2013-01-08T09:33:53.410
> 
> 标签：html5-canvas, kineticjs

有什么方法可以在不覆盖 drawFunc 的情况下将一些内容（图像、其他图形）推送到 Kinetic.js 图形中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:27:17.963

基本上不，您必须扩展框架，以便您可以将事物组合在一起。

或者只是使用：

```
Kinetic.Group(); 
```

将事物组合成一个对象。

# android - 在 Nexus 10 (Android 4.2.1) 上 touchmove 后 Touchend 不触发

> ID：14211944
> 
> 赞同：3
> 
> 时间：2013-01-08T09:33:58.657
> 
> 标签：android, touch-event

我使用的是 Nexus 10，据我所知，touchend 事件曾经在 touchmove 之后触发。然而，现在情况似乎并非如此。我可以按预期捕获、触摸开始和触摸结束，也可以触摸移动。但是，如果我创建了一个 touchmove，则 touchend 事件现在似乎被取消并且根本无法访问。这是预期的行为吗？

# android - 点击按钮后如何在android中播放视频

> ID：14211945
> 
> 赞同：0
> 
> 时间：2013-01-08T09:34:08.730
> 
> 标签：android, android-videoview

我正在尝试在 android 中设计简单的代码以在单击按钮后播放视频，但我遇到了未知问题。我现在的项目文件如下。我现在一头雾水。请指出一件事或解决这个问题。再次感谢！

```
public class VideoActivity extends Activity {
    VideoView video;
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        play = (Button)findViewById(R.id.button1);

        play.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {

               VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
               myVideoView.setVideoPath("/mnt/usb_storage/vivek.3gp");
               myVideoView.setMediaController(new MediaController(this));
               myVideoView.requestFocus();
               myVideoView.start();
           }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:45:23.517

```
btnPlay.setOnClickListener(new View.OnClickListener() 
            {
                @Override
                public void onClick(View v) 
                {
                    try 
                    {
                        videoView.setVideoPath(videoPath);
                        videoView.setMediaController(new MediaController(Applicaion Context or YourActivity.this));
                        videoView.start();

                    }
                    catch (Exception e) 
                    {
                        e.printStackTrace();
                        System.out.println("Error in btnInfo Click -->"+e.toString());
                    }
                }
            });
            //BtnPlay 
```

# wordpress - 在wordpress中将非www重定向到www

> ID：14211946
> 
> 赞同：0
> 
> 时间：2013-01-08T09:34:11.467
> 
> 标签：wordpress

我想使用 wordpress 管理系统（而不是通过 htaccess）重定向到 www。我似乎无法在设置-> 常规下找到它。

这是屏幕：

![在此处输入图像描述](../Images/08496709de571d45eed3e5e315be34a4.png)

这是我的顶级菜单

![在此处输入图像描述](../Images/66f0e122a61ecc20dcde726cfeacf193.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:46:48.443

似乎您正在使用**WordPress 网络**站点，因为 URL 选项在该屏幕上不可用

对于这种情况，您必须从**网络管理员**和**网络设置**部分管理所有这些选项

请查看网络管理部分的快照 ![在此处输入图像描述](../Images/4afcdbd892a88f41934f413d66e06c0c.png)

# python - Windows 应用商店应用程序中的 Python

> ID：14211949
> 
> 赞同：9
> 
> 时间：2013-01-08T09:34:14.720
> 
> 标签：python, windows-runtime, windows-store-apps, microsoft-metro, winjs

Windows Store 应用[Python 3 For Metro](http://apps.microsoft.com/windows/en-us/app/python-3-for-metro/82f0c953-93d4-461c-893f-c298b0d919d2)声称它允许用户编辑和运行 Python 文件（我无法让它工作）。这怎么可能在沙箱中实现？我可以从我的 JavaScript 应用程序运行文件（比如`test.py`在桌面上）吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T02:12:37.643

> 这怎么可能在沙箱中实现？

我已将 Python 解释器移植到 WinRT 以实现这一目标。它现在不再使用 Win32 API，而是使用 WinRT API（特别是用于从用户的 Documents 文件夹中读取文件）。

> 我可以从我的 JavaScript 应用程序运行一个文件（比如桌面上的 test.py）吗？

原则上，是的。您需要从我的应用程序中获取 python33.dll，将其包装为 WinRT 组件，然后调用它。它实际上已经是一个 WinRT 组件，但不公开任何 Python API。看

[http://hg.python.org/sandbox/loewis/file/ee9f8c546ddd/win8app/python33](http://hg.python.org/sandbox/loewis/file/ee9f8c546ddd/win8app/python33)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:48:00.430

基本上，您需要做的是根据 Metro 规则编写一个 C++“shell”应用程序，然后在该 C++ 应用程序中托管 Python 解释器。再次，清理 Python 代码库，使其在 Metro 沙箱中运行。

然后，您可以更进一步，让 C++ shell 将 WinRT 库公开给 Python 环境。可能有一种方法可以让 Python 公开 WinRT 对象，但这需要大量工作。

您将无法直接从 JavaScript 调用 Python - 您需要中间有一个 WinRT 组件。

这是很多工作，并且需要在 C 语言中进行一些相当低级的工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-08T10:00:34.483

你有两个选择：

*   将 python.exe 添加到您的 PATH 中，然后在终端中输入包含您的 test.py 的文件夹并使用当前安装运行 python.exe test.py

*   你可以按照[这篇文章](http://www.aaronstannard.com/post/2012/08/17/How-to-Setup-a-Proper-Python-Environment-on-Windows.aspx)的第 1 步和第 2 步从头开始安装一个全新的 python

如果您能提供更多信息，我们可以为您提供更好的帮助。

> 我可以从我的 JavaScript 应用程序运行一个文件（比如桌面上的 test.py）吗？

这可能是您真正的问题，您对这句话的意思是什么？通常答案是“不，你不能”

# c++ - 使自定义 Directshow 更适合接受参数

> ID：14211953
> 
> 赞同：0
> 
> 时间：2013-01-08T09:34:20.727
> 
> 标签：c++, visual-c++, directshow, graphedit

我创建了一个 CTransformFilter，用于调整输出视频的大小。它使用我在代码中给出的默认值。

是否可以让这个过滤器接收值，我的意思是当我在我的代码中创建这个过滤器的实例时，是否可以传递值，比如

调整大小->宽度 = 100

调整大小-> 高度 = 50

这里 Resizer 是过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:40:46.567

您想在过滤器上实现“私有接口”，然后控制应用程序将使用它与过滤器进行通信。

有关类似问题中讨论的详细信息，请参阅[使用 dll 文件中的过滤方法。](http://social.msdn.microsoft.com/Forums/en/windowsdirectshowdevelopment/thread/8144aec3-49ee-4caf-a815-f0e7619ff180)

# javascript - Mozilla Firefox - 设置 iframe 的内容不起作用

> ID：14211956
> 
> 赞同：0
> 
> 时间：2013-01-08T09:34:41.700
> 
> 标签：javascript, asp.net, firefox, frame, mozilla

我很难尝试使用 Firefox 浏览器设置 iframe 的内容。在我的代码中，我有一个标签，我在页面加载事件的代码隐藏中为其设置了内容

```
<asp:Label ID="lbnAdd" runat="server" />
lbnAdd.Text = "<iframe style=\"display:none;\" id=\"myIframe\" frameborder=\"0\" scrolling=\"no\" height=\"380px\" width=\"745px\"></iframe>";

ClientScript.RegisterClientScriptBlock(this.GetType(), "Test", "<script type='text/javascript'>function MyTest() { document.getElementById('myIframe').style.display=\"block\"; frames['myIframe'].location.href = 'myURL'; } </script>"); 
```

我必须说这在 IE8、Chrome 和 Opera 中完美运行，但在 Mozilla 中却不行。Javascript 提醒我 frames['myIframe'] 在 Firefox 中未定义，而在其他浏览器中它是对象。这可能是什么解释，有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:37:59.040

`frames["myIframe"].location`期望一个`name="myIframe"`

你只有一个身份证。

如果你也给它一个名字或使用`document.getElementById("myIframe").src=...`它应该可以工作

# c++ - 等待函数和 CloseHandle 依赖

> ID：14211958
> 
> 赞同：0
> 
> 时间：2013-01-08T09:34:46.157
> 
> 标签：c++, winapi, memory-leaks, thread-safety, wait

我决定使用`Wait Functions` *（WaitForSingleObject、WaitForMultipleObject 等）*来正确退出线程。在这种情况下，问题是我是否需要**显式调用 CloseHandle**（线程句柄）以避免**内存泄漏**或等待函数自行清理并关闭句柄？如果`CloseHandle`需要显式调用，我可以再次调用“ **CreateThread**（相同的线程句柄）吗？我可以再次调用**GetExitCodeThread** **()**吗？”

注意：一个 StackOverFlow 问题回答了我，第二部分*说我不能再次调用 GetExitCode*，但它没有说明在等待函数后调用 CloseHandle 是否会导致内存泄漏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:14:45.573

为避免内存泄漏，您必须调用`CloseHandle`. 使用诸如`GetExitCodeThread`或`WaitForSingleObject`在 a`HANDLE`已关闭之后的函数会导致未定义的行为。它有时可能会起作用，但在其他情况下它可能会崩溃或返回错误的答案。正如[破坏自己：关闭手柄然后使用它](https://devblogs.microsoft.com/oldnewthing/20120926-00/?p=6493)

> 虽然 WaitForSingleObject 确实在给定无效参数时返回 WAIT_FAILED，但句柄回收意味着任何无效句柄都可以突然再次变为有效（但引用不相关的对象）。

因此，通常最好这样做：

```
CloseHandle(handle);
handle = INVALID_HANDLE_VALUE; 
```

这意味着任何尝试使用句柄的操作都会失败并显示相应的错误代码。

正确清理句柄后，就可以安全地使用它来创建另一个线程。

```
handle = CreateThread(...); 
```

它现在是分配给新线程的句柄，您可以`GetExitCodeThread`再次调用，直到使用`CloseHandle`.

# c++ - 使用指向类的指针作为枚举常量是否可以接受？

> ID：14211960
> 
> 赞同：0
> 
> 时间：2013-01-08T09:35:19.790
> 
> 标签：c++

假设我有一些全局对象：

```
MyClass* a = new MyClass()
MyClass* b = new MyClass()
MyClass* c = new MyClass() 
```

代表所有有意义的状态`MyClass`

是否有充分的理由不按如下方式从它们中形成枚举？

```
enum MyEnum {
    A = (int) a,
    B = (int) b,
    C = (int) c
} 
```

这样在其他代码中，我可以传递枚举，并将其转换：`(MyClass*) (MyEnum::A)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:41:01.980

那是行不通的。枚举数只能用常量表达式来初始化，而你的变量,`a`绝对不是。`b``c`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:41:06.033

enum 值是编译时常量，其中 new 的返回值是运行时值，因此您甚至不能这样做（另外，您可能会在转换为 int 时丢失一些数据）。如果可能的话，我认为 SO 就这是否是一个好主意进行冗长的讨论是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:18:13.343

正如其他人已经说过的那样，这是不可能的。但是您可以使用单例模式实现类似的效果，例如：

```
class MyClass
{
public:
    enum MyEnum { A, B, C };

    static MyClass* getAInstance()
    {
        static MyClass* a = new MyClass();
        return a;
    }

    static MyClass* getBInstance()
    {
        static MyClass* b = new MyClass();
        return b;
    }

    static MyClass* getCInstance()
    {
        static MyClass* c = new MyClass();
        return c;
    }

    static MyClass* getInstance(MyEnum instance)
    {
        switch(instance)
        {
        case A:
            return getAInstance();
        case B:
            return getBInstance();
        case C:
            return getCInstance();
        }
    }
}; 
```

所以`(MyClass*) (MyEnum::A)`你会写而不是`MyClass::getInstance(MyClass::A)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:43:28.653

我很好奇：为什么你需要这个实现？顺便说一句，如果你需要一些 for 循环，我建议你使用带有函数指针的向量/数组。

# c# - 在两个 windows phone 设备之间同步

> ID：14211961
> 
> 赞同：0
> 
> 时间：2013-01-08T09:35:20.327
> 
> 标签：c#, windows-phone-7

我有一个项目，其中我必须创建一个 Windows 移动应用程序，它在两个 Windows 手机之间同步文件，前提是两部手机之间的连接应该通过 WiFi。

作为这个应用程序开发领域的新手，我不知道从哪里开始以及从哪里开始。是否有任何示例应用程序可以在不涉及任何数据库的情况下在两部手机之间同步数据。我应该使用什么 API。我参考了[这个网站](http://channel9.msdn.com/Series/Windows-Phone-7-Development-for-Absolute-Beginners)上的一些教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:44:35.463

如果没有两部手机之间的服务器，这将是不可能的。Microsoft 非常严格，不会让您访问 WiFi 连接。实际上，您必须将其中一部手机用作 WiFi 热点，而将另一部手机用作客户端，而这对于 WP 应用程序绝对是不可能的。

我建议编写两个手机都连接到的 Windows 服务（看看 WCF）。该服务必须完成以下所有工作：

*   等待电话请求与他们合作
*   当手机要同步数据时处理请求
*   让第二部手机知道有新数据要接收
*   将数据传输到第二部手机

实际上，您必须处理此类服务（例如安全性）的更多要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:41:45.953

然而，有一个解决方案，因为 Rudy Huyn 使用没有服务器的连接 Wifi 连接了几个 Windows 手机[http://www.youtube.com/watch?feature=player_embedded&v=rl0VHkoOHTA](http://www.youtube.com/watch?feature=player_embedded&v=rl0VHkoOHTA) 但我不知道如何..

# forms - Lazarus - 子模态形式无响应

> ID：14211966
> 
> 赞同：2
> 
> 时间：2013-01-08T09:35:43.417
> 
> 标签：forms, modal-dialog, lazarus

这只是一个更大项目的一部分。我在表单上有一个文本框，当单击它旁边的命令按钮时，我想调出一个看起来与文本框对齐的表单。这个想法是让它看起来像一个下拉框。但唯一的问题是，这个“下拉”是另一种形式和模态的。

这是我到目前为止所做的，表格显示很好。

```
procedure TfrmSetupTaxes.cmdChangeParentClick(Sender: TObject);
var
  Res : Integer;
  frmPopUp : TForm;

begin
  frmPopUp := TfrmTreePopUp.Create(nil);

  frmPopUp.Parent := Self;
  frmPopUp.Top:= self.rp.Top + self.EditItemCat.Top +
                 self.txtSelParentName.Top + self.txtSelParentName.Height + 3;
  frmPopUp.Left:= self.rp.Left + self.EditItemCat.left + self.txtSelParentName.Left;

  Res := frmPopUp.ShowModal;
end; 
```

注意：“rp”是一个面板，“EditITemCat”是一个标签页。这些仅用于定位。

现在，这是我的问题...

虽然表格出现了，但它似乎被冻结了。它不响应，父窗体也不响应。由于我在 IDE 上，因此我将其关闭。

有人可以告诉我我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:35:21.040

您缺少的是模态的工作方式。当应用程序中有模态窗口时，您无法与其他窗口交互，因为这些其他窗口被禁用。

当您调用`ShowModal`frmPopup 时，由于上述原因，TfrmSetupTaxes 表单被禁用。由于您已将 frmPopup 设为 frmSetupTaxes 的子项，因此它也会被禁用。

你不能通过使用模态来锻炼这个设计，你必须设计另一种机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:46:22.190

这是最好的发现之一，至少对我来说是这样；）

经过大量的挖掘和指导，我意识到它超出了我的范围。我想不出适用于各种操作系统（至少是 Windows 和 Ubuntu）的“正确”方式。

最后我聘请了一位专家（不，不是来自任何论坛网站）并付钱给他给我看。并希望它可以帮助其他开发人员，我认为最好将其发布在这里。

在回答之前，我需要非常感谢 Sertac-Akyuz，他向我展示了某些事情是不可能的。我还通过他们的链接发现有**一些**解决方案，但它们不符合我的需求。

现在，在回答之前，这是我必须遵守的规则。

1.  我不应该使用任何 Windows 特定的函数或 API，因为我希望能够在 Windows 和 Ubuntu 之间移植我的工作（至少现在是这样）。

2.  没有使用 MDI 表格。再次出于跨平台的原因。

3.  没有使用第三方插件或产品。

现在答案...

```
procedure TfrmSetupTaxes.cmdChangeParentClick(Sender: TObject);
var
  Res : Integer;
  frmPopUp : TForm;
  pt: TPoint;
begin

  frmPopUp := TfrmTreePopUp.Create(self);

  pt := txtSelParentName.ClientToScreen(Point(0, 0));

  frmPopUp.Top := pt.y + txtSelParentName.Height;
  frmPopUp.Left := pt.x;

  Res := frmPopUp.ShowModal;

end; 
```

就是这样！

关键在于没有设置弹出窗口的父属性。然后使用 ClientToScreen （我什至没有梦想使用的功能）。它完美地完成了这项工作。

# codeigniter - 更新 Codeigniter 中的多行

> ID：14211967
> 
> 赞同：9
> 
> 时间：2013-01-08T09:35:45.577
> 
> 标签：codeigniter, sql-update

我一直在环顾四周，但我还没有找到答案。如果您知道答案，请提供帮助。

如何更新 CI 中的多行？

在我的 MySQL 中：

我有列名：

```
ID, Settings Name, Settings Value ( Settings Name is Unique ) 
```

我有 ff 数据：

```
ID = 1, Settings Name = "Hello" , Settings Value = "True"
ID = 2, Settings Name = "World", Settings Value = "Good" 
```

和更多 ...

我也有一个表格，`Settings Value`但我不知道如何在数据库上更新它。如何更新当前的`True`和更新的。`Hello``Settings Name``Good``World`

我听说过，`insert_batch()`但有`update_batch()`吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-08T09:47:23.683

你在使用活动记录吗？

是的，有一个更新批次：[$this->db->update_batch();](https://www.codeigniter.com/userguide3/database/query_builder.html#updating-data)

```
$data = array(
array(
  'ID' => 1 ,
  'Settings Name' => 'Hello' ,
  'Settings Value' => 'True'
),
array(
  'ID' => '2' ,
  'Settings Name' => 'World' ,
  'Settings Value' => 'Good'
)
);    

$this->db->update_batch('mytable', $data, 'where_key'); 
```

从文档中：

> 第一个参数将包含表名，第二个是值的关联数组，第三个参数是 where 键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T09:48:27.493

`update_batch()` [CodeIgniter](http://ellislab.com/codeigniter/user-guide/database/active_record.html#update)中确实有一个可用的方法。

您可以像这样使用它作为示例：

```
$data = array(
    array(
        'ID' => 1,
        'Settings Name' => 'Hello',
        'Settings Value' => 'True'
    ),
    array(
        'ID' => 2,
        'Settings Name' => 'World',
        'Settings Value' => 'Good'
    )
);
$this->db->update_batch('tableName', $data, 'id'); 
```

所以你有一个数组数组，孩子们基本上保存数据库中每一行的数据。for的第一个参数`update_batch()`是数据库表的名称，第二个是`$data`变量，第三个是要在`WHEN`子句中使用的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:53:38.527

这是执行此操作的简单 php 代码。

```
<?php
function basic_update($uwi='') {
$this->load->database();
$data = array(
'ID' => 1,
'Settings Name' => 'Hello',
'Settings Value' => 'True'  
);
$this->db->where('ID', '1');
$this->db->update('<table name>', $data);
$data1 = array(
    'ID' => 2,
    'Settings Name' => 'World',
    'Settings Value' => 'Good'
    );
    $this->db->where('ID', '2');
    $this->db->update('<table name>', $data1);
} 
```

在 $this->db->where('ID', '1'); ID 是您的表字段，1 是值。在数组中第一个参数将包含表名，第二个参数是值的关联数组

# c - 用另一个结构初始化结构，这可能吗？

> ID：14211969
> 
> 赞同：2
> 
> 时间：2013-01-08T09:35:50.680
> 
> 标签：c, casting, structure

我想知道，是否可以通过结构2初始化结构1。我对铸造的概念也很陌生。此代码的输出必须为零。请指导。谢谢！

```
#include<stdio.h>

typedef struct student
{
 int roll_id[10];
 int name_id[10];
 int postn;
} student;

typedef struct exams
{
int subject[10];
int area;
}exams;

int main()
{
 exams e= { {0} };
 student *pptr= (student*)&e;
 printf (" %d\n", pptr->name_id[9]);
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:39:37.433

类比很简单：
你买了一个苹果，然后***假装***它是一个橙子。
只要你把它当作可吃的东西吃，你就可以吃它，但如果你咬着它期待得到橙汁，你最终会失望的。

用你的两个结构和你的编译器替换 Apple & Orange。

结构只不过是一块内存，通常被不同的*数据类型*占用。
编译器实现可以在这些类型之间添加**[填充字节](https://stackoverflow.com/questions/5397447/struct-padding-in-c)**，结构中的第一种类型除外。
由于您的两种结构的第一种类型是相同的（*10 个整数的数组*）。将结构伪装`exam`成其他类型`student`会起作用，但如果您尝试访问第一种类型以外的任何其他数据类型，则会导致**Undefined Behavior**。

未定义的行为是您在代码中得到的。

**底线：**
你不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:02:32.620

首先，在您的代码中，您不是通过结构2 初始化结构1，而只是将结构2 的指针伪装成结构1 的指针。

`exams`结构实例显然（更不用说奇怪的对齐设置）比 student 占用更少的内存`instance`。访问`pptr->name_id[9]`可以很好地导致阅读过去的专用区域`e`。现在这一切都取决于您的编译器、您的计算机等等。这意味着最好避免为了自己的利益而深入研究这些细节。

> 此代码的输出必须为零

也许是如果您正在从未分配的堆栈区域（过去`e`）读取并且在您的设置堆栈中填充零，然后将其移交给正在运行的线程。

请在您的 C 书籍中阅读更多关于强制转换和自动记忆以及实例和指针的内容。要纠正您的代码，确实有很多事情要说。在您对该主题进行更多研究之后，您最好提出更具体的问题。祝你好运

# json - 从本地 ftp 服务器读取 Json 文件

> ID：14211970
> 
> 赞同：0
> 
> 时间：2013-01-08T09:35:53.467
> 
> 标签：json, parsing

我是一个名为 File1.js 的 json 文件，存储在我的本地服务器中。我想读取 json 文件内容并想在另一个文件中显示数据。我尝试过使用 javascript 编码，但它不能正常工作。

下面是我的示例 json 文件的编码。请帮助我编写将数据写入另一个文件的编码。我可以使用 php 解析数据并显示，还是可以继续使用 javascript？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSON Sample</title>
  </head>
  <body>
    <div id="placeholder"></div>
    <script src="ftp://devapp@ftp.appdevelopmentindia.in/www/new.js"></script>
    <script>
    $.getJSON('data.json', function(data) {
      var output="<ul>";
      for (var i in data.users) {
        output+="<li>" + data.users[i].firstName + " " + data.users[i].lastName + "--"       
         + data.users[i].joined.month+"</li>";
      }

      output+="</ul>";
      document.getElementById("placeholder").innerHTML=output;
    });
    </script> 
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:01:14.407

好像你在 for 循环中犯了一些错误。您在 data.users 中使用 for i，实际上您应该说，i 在 data.users.length 中。试试这个代码：

```
 $.getJSON('data.json', function(data) {
      var output="<ul>";
      for (var i=0; i < data.users.length; i++ ) {
        output+="<li>" + data.users[i].firstName + " " + data.users[i].lastName + "--"       
         + data.users[i].joined.month+"</li>";
      }

      output+="</ul>";
      document.getElementById("placeholder").innerHTML=output;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:50:17.033

如果这是您的完整 HTML，那么可能是因为您没有包含 jquery.js 文件。

# javascript - Meteor.js/javascript iPhone 点击输入滞后

> ID：14211971
> 
> 赞同：2
> 
> 时间：2013-01-08T09:35:55.947
> 
> 标签：javascript, meteor

我不确定这是 Meteor.js 特定的问题，但这里有：

我在[http://numbersdemo.meteor.com/](http://numbersdemo.meteor.com/)创建了一个演示。如果您在桌面浏览器中尝试演示（我只在 Mac 上的 Chrome 中尝试过），它运行良好，来自按钮的输入会立即显示在结果中。**但如果你在 iPhone 上试用它，它就不是那么即时了。这就是我需要的！**

是否可以？

是 Meteor.js 问题还是只是移动 Safari 中的 javascript/HTML？

以下是该应用程序的所有 .js。正如你所看到的，根本没有数据库连接，只是一个会话，所以数据库不是问题。

```
if (Meteor.isClient) {

  Meteor.startup(function () {
    Session.set('buttonsResult', 0);
  });

  Template.numbersThing.result = function () {
    return Session.get('buttonsResult');
  };

  Template.numbersThing.events({
    'mousedown .button' : function (event) {
      var prevInput = Session.get('buttonsResult'),
      newInput = prevInput + '' + $(event.currentTarget).text();
      Session.set('buttonsResult', newInput);
    },
    'mousedown .reset' : function () {
      Session.set('buttonsResult', 0);
    }
  });

}

if (Meteor.isServer) {
  Meteor.startup(function () {

  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:57:28.900

您是否尝试过使用 touchstart 之类的事件而不是 mousedown？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T14:57:38.550

尝试使用[**FastClick**](https://github.com/ftlabs/fastclick)，它可以消除点击链接时的 300 毫秒延迟时间。

# oracle11g - 如何从 oracle 存储过程返回动态游标

> ID：14211972
> 
> 赞同：3
> 
> 时间：2013-01-08T09:35:55.170
> 
> 标签：oracle11g

我有 2 个表，其中 ID 字段很常见。

我正在获取游标中第一个表的所有记录。然后我想做的是，根据游标中的每个 ID，我想从第二个表中获取值，然后返回。

我该怎么做...请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:59:40.927

家庭作业？

这是基本的 SQL。通常你会加入这两个表。

```
begin
  for r_row in (select b.*
                  from tab1 a 
                       inner join tab2 b
                               on b.id = a.id)
  loop
    null; -- do whatever
  end loop;
end;
/ 
```

如果您有一个现有的光标并且无法更改它

例如 where`your_cursor`只是返回一`ID`列。

```
begin
  open your_cursor;
  loop
    fetch your_cursor into v_id;
    exit when your_cursor%notfound;
    for r_row in (select * from tab2 b where b.id = v_id)
    loop
      null; -- do whatever here.
    end loop;
  end loop;
end;
/ 
```

编辑：根据评论：

一些样本数据：

```
SQL> create table table1 (id number primary key, name varchar2(20));

Table created.

SQL> create table table2 (id number, col1 varchar2(20), col2 varchar2(20));

Table created.

SQL> insert into table1 values (1, 'test');

1 row created.

SQL> insert into table1 values (2, 'foo');

1 row created.

SQL>
SQL> insert into table2 values (1, 'John', 'Smith');

1 row created.

SQL> insert into table2 values (1, 'Peter', 'Jones');

1 row created.

SQL> insert into table2 values (1, 'Jane', 'Doe');

1 row created.

SQL> insert into table2 values (2, 'Nina', 'Austin');

1 row created.

SQL> insert into table2 values (2, 'Naman', 'Goyal');

1 row created.

SQL> commit;

Commit complete. 
```

创建一个类型来保存返回结构。请注意数据类型需要与表的数据类型匹配`table1`并且`table2`（%type 不起作用，因此请确保它们匹配）

```
SQL> create type my_obj as object (
  2    id number,
  3    name varchar2(20),
  4    col1 varchar2(20),
  5    col2 varchar2(20)
  6  );
  7  /

Type created.

SQL> create type my_tab as table of my_obj;
  2  /

Type created. 
```

现在创建你的函数（如果在你的真实代码中，你可以把它放在一个包中）。

```
SQL> create function function1
  2    return my_tab pipelined
  3  is
  4  begin
  5    for r_row in (select t1.id, t1.name, t2.col1, t2.col2
  6                    from table1 t1
  7                         inner join table2 t2
  8                                 on t1.id = t2.id)
  9    loop
 10      pipe row(my_obj(r_row.id, r_row.name, r_row.col1, r_row.col2));
 11    end loop;
 12  end;
 13  /

Function created.

SQL>
SQL> select *
  2    from table(function1);

        ID NAME                 COL1                 COL2
---------- -------------------- -------------------- --------------------
         1 test                 John                 Smith
         1 test                 Peter                Jones
         1 test                 Jane                 Doe
         2 foo                  Nina                 Austin
         2 foo                  Naman                Goyal 
```

如果需要，您可以将输入传递给该函数，例如`table(function1('a', 'b'));`等。

# c# - 从 URL 获取主机域？

> ID：14211973
> 
> 赞同：177
> 
> 时间：2013-01-08T09:36:02.250
> 
> 标签：c#, string, url, httpwebrequest, uri

如何从字符串 URL 获取主机域？

GetDomain 有 1 个输入“URL”，1 个输出“域”

示例 1

```
INPUT: http://support.domain.com/default.aspx?id=12345
OUTPUT: support.domain.com 
```

示例 2

```
INPUT: http://www.domain.com/default.aspx?id=12345
OUTPUT: www.domain.com 
```

示例 3

```
INPUT: http://localhost/default.aspx?id=12345
OUTPUT: localhost 
```

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2013-01-08T09:37:51.220

您可以使用`Request`对象或`Uri`对象来获取 url 的主机。

使用[**Request.Url**](https://msdn.microsoft.com/en-us/library/system.web.httprequest.url.aspx)

```
string host = Request.Url.Host; 
```

使用[**Uri**](http://msdn.microsoft.com/en-us/library/system.uri.host.aspx)

```
Uri myUri = new Uri("http://www.contoso.com:8080/");   
string host = myUri.Host;  // host is "www.contoso.com" 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-01-08T09:41:01.607

试试这样；

```
Uri.GetLeftPart( UriPartial.Authority ) 
```

> 为 Uri.GetLeftPart 方法定义 URI 的各个部分。

* * *

> [http://www.contoso.com/index.htm?date=today](http://www.contoso.com/index.htm?date=today) --> [http://www.contoso.com](http://www.contoso.com)
> 
> [http://www.contoso.com/index.htm#main](http://www.contoso.com/index.htm#main) --> [http://www.contoso.com](http://www.contoso.com)
> 
> nntp://news.contoso.com/123456@contoso.com --> nntp://news.contoso.com
> 
> 文件：//服务器/文件名.ext --> 文件：//服务器

```
Uri uriAddress = new Uri("http://www.contoso.com/index.htm#search");
Console.WriteLine("The path of this Uri is {0}", uriAddress.GetLeftPart(UriPartial.Authority)); 
```

[`Demo`](http://ideone.com/SOgBUK)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-01-08T09:39:17.597

使用[Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类并使用[Host](http://msdn.microsoft.com/en-us/library/system.uri.host.aspx)属性

```
Uri url = new Uri(@"http://support.domain.com/default.aspx?id=12345");
Console.WriteLine(url.Host); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-07-12T05:59:49.143

尝试以下语句

```
 Uri myuri = new Uri(System.Web.HttpContext.Current.Request.Url.AbsoluteUri);
 string pathQuery = myuri.PathAndQuery;
 string hostName = myuri.ToString().Replace(pathQuery , ""); 
```

示例 1

```
 Input : http://localhost:4366/Default.aspx?id=notlogin
 Ouput : http://localhost:4366 
```

示例 2

```
 Input : http://support.domain.com/default.aspx?id=12345
 Output: support.domain.com 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-03-27T16:33:26.897

最好的方法，正确的方法是使用`Uri.Authority`字段

像这样加载和使用 Uri：

```
Uri NewUri;

if (Uri.TryCreate([string with your Url], UriKind.Absolute, out NewUri))
{
     Console.Writeline(NewUri.Authority);
}

Input : http://support.domain.com/default.aspx?id=12345
Output : support.domain.com

Input : http://www.domain.com/default.aspx?id=12345
output : www.domain.com

Input : http://localhost/default.aspx?id=12345
Output : localhost 
```

如果你想操作 Url，使用 Uri 对象是一个很好的方法。 [https://msdn.microsoft.com/en-us/library/system.uri(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.uri(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-21T19:48:41.920

```
 var url = Regex.Match(url, @"(http:|https:)\/\/(.*?)\/"); 
```

输入=“https://stackoverflow.com/questions/”；

输出 = "https://stackoverflow.com/";

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-08T09:37:59.313

试试这个

```
Console.WriteLine(GetDomain.GetDomainFromUrl("http://support.domain.com/default.aspx?id=12345")); 
```

它将输出 support.domain.com

或者试试

```
Uri.GetLeftPart( UriPartial.Authority ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T09:42:59.540

您应该将您的字符串构造为[URI](http://msdn.microsoft.com/en-us/library/txt7706a.aspx)对象，并且[权限](http://msdn.microsoft.com/en-us/library/system.uri.authority.aspx)属性返回您需要的内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-12T00:04:01.540

```
 public static string DownloadImage(string URL, string MetaIcon,string folder,string name)
    {
        try
        {
            WebClient oClient = new WebClient();

            string LocalState = Windows.Storage.ApplicationData.Current.LocalFolder.Path;

            string storesIcons = Directory.CreateDirectory(LocalState + folder).ToString();

            string path = Path.Combine(storesIcons, name + ".png");

            //si la imagen no es valida ej "/icon.png"
            if (!TextBoxEvent.IsValidURL(MetaIcon))
            {
                Uri uri = new Uri(URL);
                string DownloadImage = "https://" + uri.Host + MetaIcon;

                oClient.DownloadFile(new Uri(DownloadImage), path);
            }
            //si la imagen tiene todo ej https://www.mercadolibre.com/icon.png
            else
            {
                oClient.DownloadFile(new Uri(MetaIcon), path);
            }

            return path;
        }
        catch (Exception ex)
        {
            return ex.ToString();
        }
    } 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2015-03-27T16:20:38.443

WWW 是一个别名，所以如果你想要一个域就不需要它。这是我从字符串中获取真实域的小函数

```
private string GetDomain(string url)
    {
        string[] split = url.Split('.');
        if (split.Length > 2)
            return split[split.Length - 2] + "." + split[split.Length - 1];
        else
            return url;

    } 
```

# java - 我如何阅读和打印 Lucene index 4.0

> ID：14211974
> 
> 赞同：2
> 
> 时间：2013-01-08T09:36:08.753
> 
> 标签：java, lucene

我想从我的索引器文件中读取索引。

所以我想要的结果是每个文档的所有条款和 TF-IDF 的数量。

请为我建议一些示例代码。谢谢 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T17:25:02.300

首先是获取文件列表。另一种方法可能是遍历索引项，但该方法`IndexReader.terms()`似乎已从 4.0 中删除（尽管它存在于 中`AtomicReader`，这可能值得一看）。我知道获取所有文档的最佳方法是简单地按文档 ID 遍历文档：

```
//where reader is your IndexReader, however you go about opening/managing it
for (int i=0; i<reader.maxDoc(); i++) {
    if (reader.isDeleted(i))
        continue;
    //operate on the document with id = i ...
} 
```

然后你需要一个所有索引词的列表。我假设我们对存储字段不感兴趣，因为您想要的数据对他们没有意义。为了检索您可以使用的术语`IndexReader.getTermVectors(int)`。请注意，我实际上并没有检索文档，因为我们不需要直接访问它。从我们离开的地方继续：

```
String field;
FieldsEnum fieldsiterator;
TermsEnum termsiterator;
//To Simplify, you can rely on DefaultSimilarity to calculate tf and idf for you.
DefaultSimilarity freqcalculator = new DefaultSimilarity()
//numDocs and maxDoc are not the same thing:
int numDocs = reader.numDocs();
int maxDoc = reader.maxDoc();

for (int i=0; i<maxDoc; i++) {
    if (reader.isDeleted(i))
        continue;
    fieldsiterator = reader.getTermVectors(i).iterator();
    while (field = fieldsiterator.next()) {
        termsiterator = fieldsiterator.terms().iterator();
        while (terms.next()) {
            //id = document id, field = field name
            //String representations of the current term
            String termtext = termsiterator.term().utf8ToString();
            //Get idf, using docfreq from the reader.
            //I haven't tested this, and I'm not quite 100% sure of the context of this method.
            //If it doesn't work, idfalternate below should.
            int idf = termsiterator.docfreq();
            int idfalternate = freqcalculator.idf(reader.docFreq(field, termsiterator.term()), numDocs);
        }
    }
} 
```

# c++ - Qt5 内存使用取决于窗口大小？

> ID：14211976
> 
> 赞同：1
> 
> 时间：2013-01-08T09:36:16.883
> 
> 标签：c++, qt, window, mingw, qt5

我是 Qt 的新手，所以也许这只是愚蠢的问题......

我有简单的演示应用程序。主文件

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

和 mainwindow.cpp

```
#include "mainwindow.h"

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{
}

MainWindow::~MainWindow()
{

} 
```

当我启动应用程序时，内存使用量约为 2MB ...当我最大化窗口时，使用量约为 10MB。为什么会发生这种情况以及如何解决这个问题？我以为 Qt 使用 WinAPI 来创建窗口？

PS我使用Qt的静态构建（发布构建不是调试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:46:57.847

你没有内存泄漏，更大的窗口需要更多的绘图，这需要更多的内存来绘制。使用 Qt5 时会更加明显，因为大部分绘图已移至 OpenGL，而 OpenGL 对内存的要求更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:45:28.417

这不是 Qt 问题。

打开notepad++并最大化它，你会看到内存使用率更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:58:53.767

我的猜测是，这可能至少部分是由双缓冲引起的（窗口越大，缓冲区域越大）。

如今，10 MB 的内存并不是很多，所以如果您知道自己没有任何内存泄漏，请不要担心。

# sql - SSRS 和 SQL Server 数据库在不同的服务器上

> ID：14211978
> 
> 赞同：15
> 
> 时间：2013-01-08T09:36:28.637
> 
> 标签：sql, database, reporting-services

是否可以将 SSRS 和 SQL Server 数据库安装在不同的服务器上，还是应该将这两个安装在同一台服务器上？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-23T14:00:56.260

为了在您的应用程序服务器上安装 Reporting Services，您必须使用 SQL-Server 许可证。您可以只安装 SQLServer 的 Reporting Services 部分，但它在技术上仍然是 SQL Server 应用程序的一部分，并且需要在该处理器上使用许可证。

所以是的，您可以将它安装在另一台服务器上。
是的，您只能安装高级服务，但这仍然算作完整服务器，因此需要完整许可证。

是的，您可以在另一台服务器上免费安装 Express Edition（带有高级服务）。
但是...快递版 SSRS 无法访问非本地主机数据库（快递和网络版的技术限制）。
您可以尝试使用链接服务器来规避这一点，但是您需要复制每个使用的存储过程、视图、表等，所以这是一个不切实际的混乱。

因此，您的问题的答案是：**从技术上讲，是的 - 但实际上不是，不是没有其他许可证**。
额外安装每月将花费 1,000 美元以上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T10:03:23.250

是的，您可以在不同的服务器上安装 SSRS 和 SQL Server 数据库。虽然默认安装会尝试同时安装两者，但您可以选择单独安装它们。

MSDN 链接：

[安装 Reporting Services 的注意事项](http://msdn.microsoft.com/en-us/library/ms143736%28v=sql.100%29.aspx)

[安装 SQL Server 报告服务](http://msdn.microsoft.com/en-us/library/ms143736%28v=sql.90%29.aspx)

来自 MSDN 文章[安装报告服务的注意事项](http://msdn.microsoft.com/en-us/library/ms143736%28v=sql.100%29.aspx)：

> 在功能选择页面中选择数据库引擎服务来托管报表服务器数据库。*Reporting Services 需要 SQL Server 2005 或 SQL Server 2008 数据库引擎的本地或远程实例来托管报表服务器数据库。*如果将数据库引擎实例与 Reporting Services 同时安装，则可以通过安装默认配置来消除安装后任务，该配置会自动创建和配置报表服务器数据库。除了托管报表服务器数据库外，SQL Server 关系数据库还可以作为报表和模型的数据源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-03T12:03:26.417

您可以在新服务器中安装 SSRS，但要执行此操作，您需要为该其他服务器提供新许可证。

来自 Microsoft SQL Server 2014 许可指南：

*“单个 SQL Server 2014 许可证的软件组件不能分开用于多个 OSE。如果这些组件在主数据库服务器以外的服务器上运行，则它们所在的每个附加 OSE 都需要一个附加许可证。 “*

下载指南的链接：

[http://go.microsoft.com/fwlink/?LinkId=230678](http://go.microsoft.com/fwlink/?LinkId=230678)

# matlab - MatLab 积分结果格式

> ID：14211980
> 
> 赞同：0
> 
> 时间：2013-01-08T09:36:35.590
> 
> 标签：matlab

我一直在尝试将一个函数与 matlab 集成，但它一直给我带来奇怪的结果。

```
>> syms w x;
>> w = 0.8335*(cosh(52.42*x)-cos(52.42*x)-sinh(52.42*x)+sin(52.42*x));
>> int(w, 0, 1)
>> (1667*sinh(2621/50))/104840 ... /*Some long expression*/ 
```

它没有给我一些最终的数值，而是与`sinh(2621/50)`. 我是否使用了错误的功能？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:41:24.297

如果您想获得数值，您可以评估结果表达式。请注意， sinh(2621/50) 只是一个数字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T10:33:08.083

我无权访问符号工具箱，但如果您想要精确控制输出，似乎函数`vpa()`（[mathworks 可变精度算术](http://www.mathworks.se/help/symbolic/vpa.html)）是评估表达式的替代方法。

例如`vpa(int(w, 0, 1),5)`会给你 5 个有效数字。

# jquery - 页面上需要在花式框窗口中打开的几个链接

> ID：14211985
> 
> 赞同：0
> 
> 时间：2013-01-08T09:36:44.033
> 
> 标签：jquery, fancybox

我有一个包含多个链接的页面。这些链接中的每一个都应该在一个花式框窗口中打开。HTML的结构是这样的：

```
<a href="#inline" class="fancybox"> Link 1 </ a>
<div id="inline"> Content for link 1 that opens in a fancybox window </ div>

<a href="#inline" class="fancybox"> Link 2 </ a>
<div id="inline"> Content for link 2 that opens in a fancybox window </ div>

<a href="#inline" class="fancybox"> Link 3 </ a>
<div id="inline"> Content for link 3 that opens in a fancybox window </ div> 
```

通过单击任何链接将打开一个花式框窗口，但并不总是具有正确的内容。这并不奇怪，因为所有内容 div 都具有相同的 ID。在fancybox窗口中为每个链接打开正确内容的最佳解决方案是什么？

编辑：我认为我的问题已经解决了。我使用下面的代码：

```
<a href="#1" class="fancybox"> Link 1 </ a>
<div class="inline" id="1"> Content for link 1 that opens in a fancybox window </ div>

<a href="#2" class="fancybox"> Link 2 </ a>
<div class="inline" id="2"> Content for link 2 that opens in a fancybox window </ div>

<a href="#3" class="fancybox"> Link 3 </ a>
<div class="inline" id="3"> Content for link 3 that opens in a fancybox window </ div> 
```

这段代码正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:41:53.800

页面上的 1 个以上的元素不应使用相同`ID`的元素。如果您想应用类似`CSS`的样式或将多个元素绑定到 javascript，您应该使用类似的`class`。

像[这个小提琴一样的东西](http://jsfiddle.net/WZeB5/)

### 示例代码

```
<a class="fancy_link" id="link_1" href="#!">Content</a>
<a class="fancy_link" id="link_2" href="#!">Content</a>
<a class="fancy_link" id="link_3" href="#!">Content</a> 
```

# android - 带有 Android MediaPlayer 的音频流确实支持姜饼（Android 2.3）

> ID：14211990
> 
> 赞同：1
> 
> 时间：2013-01-08T09:36:54.690
> 
> 标签：android, android-mediaplayer

Android`MediaPlayer`流式音频不支持`gingerbread(Android 2.3)`os `version`。

此示例代码适用于`android 4.0(ICS)`版本。但同样的样本不支持`Android 2.3`.

```
MediaPlayer radioPlayer = new MediaPlayer();
radioPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);                              
radioPlayer.setDataSource("http://usa8-vn.mixstream.net:8138");  // set Sample url

radioPlayer.prepareAsync();                 
radioPlayer.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T10:59:12.540

**Android 媒体播放器支持姜饼中的音频流。**

你没有检查不玩的原因。

> 我建议你实现**onErrorListener**和**onPreparedListener**。并在**onPrepare**`mediaplayer.start();`内部调用。

 **```
public void initMusicPlayer(){
        //set player properties
        player.setAudioStreamType(AudioManager.STREAM_MUSIC);
        //set listeners
        player.setOnPreparedListener(this);
        player.setOnCompletionListener(this);
        player.setOnErrorListener(this);
    } 
```

**笔记。**

如果您的流以 https 开头，请将其替换为 http 用于姜饼。

可能是姜饼不支持这种格式。看看[**这个。**](http://developer.android.com/guide/appendix/media-formats.html)**

# asp.net - IIS 和静态内容？

> ID：14211992
> 
> 赞同：49
> 
> 时间：2013-01-08T09:37:02.810
> 
> 标签：asp.net, http, caching, iis-7, header

根据[Ultra-Fast ASP.NET：第 3 章 - 缓存](https://books.google.com/books?id=aIs8drBVdaoC&lpg=PA63&ots=BMvOxuwGIm&dq=%22Files%20that%20the%20browser%20retrieves%20from%20the%20server%20should%20be%20stored%20in%20the%20browser%E2%80%99s%20cache%20as%20long%20as%20possible%20to%20help%20minimize%20server%20round-trips.%22&pg=PA63&redir_esc=y#v=onepage&q=%22Files%20that%20the%20browser%20retrieves%20from%20the%20server%20should%20be%20stored%20in%20the%20browser%E2%80%99s%20cache%20as%20long%20as%20possible%20to%20help%20minimize%20server%20round-trips.%22&f=false)：

> 浏览器从服务器检索的文件应尽可能长时间地存储在浏览器的缓存中，以帮助最大程度地减少服务器往返次数。

*   但是 IIS 是如何知道*静态内容*实际上是什么以及不是什么？

    它只是图像、CSS、JS*而不是*ASPX、ashx ......？

    *我在 IIS 中哪里*可以看到什么已经被认为是*静态*的，什么*不是*？

*   如果页面已声明为`<%@ OutputCache`header（不带`location`），情况会怎样？它内部的`images`,`CSS`和`JS`源文件是否*也*以相同的属性缓存输出？

*   作为最佳实践，我应该将未来一年设置为最长到期时间。我应该使用它作为网站上所有静态内容的默认值

所以我这样做了：

![设置通用 HTTP 响应标头](../Images/e6c23eed28a9e819be40d8baffd3ffc9.png)

但后来，按 后`OK`，我*找不到任何*显示我的摘要菜单：我已经*向谁*放置了响应头（在本例中：`css`文件夹）。

*目前*，为了看到该文件夹​​已应用响应标头 - 我必须**再次**`css`转到该`css`文件夹​​ Http Response Header Set Common Headers然后我看到它。它没有写在 web.config 中。 **`-->``-->``-->`**

 ***但是*，如果我为文件（`Login.aspx`例如）执行此操作：我确实在 web.config 中看到了它：

```
<configuration>
    <location path="Login.aspx">
        <system.webServer>
            <staticContent>
                <clientCache cacheControlMode="UseExpires" cacheControlMaxAge="1.00:00:00" httpExpires="Fri, 15 Feb 2013 00:00:00 GMT" />
            </staticContent>
        </system.webServer>
    </location>
</configuration> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-11T01:15:42.557

我理解你的情况。有时它会混淆 IIS 如何处理文件。IIS 6 与 IIS 7 也不同，经典应用程序池和集成模式应用程序池也不同。我的经验主要是使用 IIS 7.5 上的集成应用程序池，所以这是我可以最准确地评论的环境。

## 第一个问题

> 但是 IIS 怎么知道什么是静态内容，什么不是呢？
> 
> 它只是 images ， css ， js 而不是 ASPX ， ashx ......？
> 
> 我在 IIS 中哪里可以看到什么已经被认为是静态的，什么不是？

您可以通过导航到您的网站来检查 IIS 中的文件处理程序列表，然后单击“处理程序映射”。默认情况下，这些是从 .Net 基础 web.config 继承的，该基础 web.config 位于不同的位置，具体取决于您的 .Net 框架版本。

*   C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\web.config
*   C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\web.config

如果所请求的文件尚未显式映射到另一个处理程序，则它属于一个捕获所有处理程序 ( `*`) 作为最后一个选项 ( `System.Web.DefaultHttpHandler`)，该选项确定它是静态文件还是目录浏览请求。所以静态文件只是没有绑定到另一个处理程序的文件。例如，您会看到在此默认处理程序之前`*.aspx`已经映射到。`System.Web.UI.PageHandlerFactory`因此它将由该处理程序处理，而不是被视为静态文件。如果您删除了该映射，您可以在技术上将 *.aspx 作为静态文件提供（如果您真的想要）（只是为了证明它是如何工作的）。

`System.Web.StaticFileHandler`但是您也可以通过在 web.config 的 httpHandlers 部分中添加一个条目，将文件扩展名映射到IIS 中，从而将文件类型显式列为静态文件。例如：

```
<configuration>
  <system.webServer>
    <handlers>
      <add name="StaticHandler" verb="*" path="*.zip" type="System.Web.StaticFileHandler" preCondition="integratedMode" />
    </handlers>
  </system.webServer>
</configuration> 
```

此示例使用config 部分，因此它适用于以**集成模式**`<system.webServer>`运行的应用程序池。

 **## 第二个问题

> 使用 <%@ OutputCache header(without location) 声明页面的情况如何。里面的图像、css、js src 文件是否也使用相同的属性缓存输出？

不，因为页面作为单独的请求（甚至可能由单独的处理程序）作为服务器，它可以具有完全不同的缓存标头/提示。从缓存的角度来看，主机页面和它可能使用的资源是不相关的。

事实上，您甚至可能希望 *.html 的缓存期更短，*.jpg 或 *.png 的缓存期更长？需要考虑的事情。

## 第三个问题

> 作为最佳实践，我应该将未来一年设置为最长到期时间。我应该将其用作网站上所有静态内容的默认值

嗯......我可能不会去一年。一个月怎么样？我会制定这样的全球政策：

```
<configuration>
  <system.webServer>
    <staticContent>
      <!-- Set expire headers to 30 days for static content-->
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00" />
    </staticContent>
  </system.webServer>
</configuration> 
```

这与您在上面显示的示例相同，但不在`<location>`元素内，而是在根`<configuration>`元素中，因此它是默认策略。这同样适用于以**集成模式**运行的应用程序池。有时还需要开启：

```
<configuration>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <!-- stuff -->
        </modules>
    </system.webServer>
<system.webServer> 
```

这只是确保通过尊重上述配置元素的托管静态文件处理程序处理静态文件。

## 编辑地址评论

您在上面发布的配置对话框的文档位于此处：[Configure the HTTP Expires Response Header (IIS 7)](http://technet.microsoft.com/en-us/library/cc770661%28v=ws.10%29.aspx)

[显然这些设置保存在](https://stackoverflow.com/questions/8635884/iis7-settings-file-locations)C:\Windows\System32\inetsrv\config\applicationHost.config

我没有 IIS7，现在个人在 IIS 7.5 上开发。因此，如果您可以验证此位置是否准确，请发表评论！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:25:34.170

1.  静态内容是 IIS 读取并发送到浏览器而无需任何处理的内容。在那里，您可以设置 IIS 以包含一些`Cache-Control Header`以将其缓存在客户端浏览器计算机上。
2.  您可以通过直接设置 IIS 来完成该操作，`web.config`如您所说，通过命令进行操作。您在 web.config 上添加并涉及 IIS 的命令与 asp.net 本身无关，但 IIS 和 IIS 将他的配置保存在不同的文件中，因此当您更改缓存控制标头时直接在IIS 你在 web.config 上看不到它们。
3.  现在，对于图像、CSS、JavaScript 和其他类似文件等静态内容，[他们说您可以通过添加 10 年到期来遵循“永不过期”政策。](http://developer.yahoo.com/performance/rules.html#expires)
4.  这里的问题是，如果您不能更改静态文件的内容，例如，如果您缓存一个 10 年的 javascript 文件，并且您对其进行了小的更改，那么您需要 ether 更改文件名，ether 到在它的末尾添加一些参数。
5.  现在，`<%@ OutputCache`控件上的控件被引用到服务器缓存而不是客户端，实际上所做的是将控件的渲染缓存在服务器上，以便下次您要求它不要浪费时间再次渲染它但读取它来自缓存 - 仍将其发送到浏览器。

您还可以阅读此答案以了解更多信息：[IIS（动态和静态）缓存、OutPutCache 和浏览器缓存之间有什么区别](https://stackoverflow.com/questions/9663756/what-are-difference-between-iis-dynamic-and-static-cache-outputcache-and-brows/9663814#9663814)****

# php - array_intersect 总是计算为假

> ID：14211996
> 
> 赞同：0
> 
> 时间：2013-01-08T09:37:20.173
> 
> 标签：php, arrays, if-statement, intersect

我的代码总是进入“else-part”，即使应该返回“if-part”。当我删除“else-part”时，它会返回“if-part”。

```
 foreach ($messageRepo as $oMessage) {
    $messageTag = $oMessage->getMessageTags(); // get tags from all messages   
    $storeTagsUnseri = unserialize($messageTag); // unserialize tags given by the user
    $storeTagsUnseri = (array)($storeTagsUnseri);        

    if (array_intersect($messageTagsArray,$storeTagsUnseri)) {  //if tags from user matches tags from DB messages
      $messageToTag[] = $oMessage->getMessageText();     // get the message text from the DB message and store it in array
      $messageCrdate[] = $oMessage->getCrdate();

      $allMessagesArray = array_flip(array_combine($messageToTag,$messageCrdate));
      return $allMessagesArray;
    } else {
      $allMessagesArray[] = "flummi";
      return $allMessagesArray;
    }    
  } 
```

即使 array_intersect 为真，此代码也始终返回 $allMessageArray 0 => "flummi"。

也许 if(array_intersect) 根本不可能？是否有另一种方法来检查一个数组中的任何内容是否与另一个数组中的匹配？

谢谢你的帮助！

**编辑**

```
 foreach ($messageRepo as $oMessage) {
    $messageTag = $oMessage->getMessageTags(); // get tags from all messages   
    $storeTagsUnseri = unserialize($messageTag); // unserialize tags given by the user
    $storeTagsUnseri = (array)($storeTagsUnseri);        

    if (array_intersect($messageTagsArray,$storeTagsUnseri)) {  //if tags from user matches tags from DB messages
      $messageToTag[] = $oMessage->getMessageText();     // get the message text from the DB message and store it in array
      $messageCrdate[] = $oMessage->getCrdate();

      $allMessagesArray = array_flip(array_combine($messageToTag,$messageCrdate)); 
    }      
  }

  if (!empty($allMessagesArray)) {
      return $allMessagesArray;
  } else {
      return $allMessagesArray[] = "error";
  }

} 
```

这现在有效......但我猜不是很好的编码。^^

# java - 如何从列表中投射 to List or List? Possible Duplicate: 问问题

> ID：14211999
> 
> 赞同：3
> 
> 时间：2013-01-08T09:37:22.297
> 
> 标签：java, list, casting

> **Possible Duplicate:** [How do you cast a List of objects from one type to another in Java?](https://stackoverflow.com/questions/933447/how-do-you-cast-a-list-of-objects-from-one-type-to-another-in-java)

Searched the internet a little, and found no nice way of doing it... My solution now is:

```
public class A {}
List<Object> obj = new ArrayList<Object>();
obj.add(new A());
// Ugly solution here:
List<A> a = (List<A>) (List) obj; 
```

But this is quite ugly and gets a warning. No "official" way of doing this?

EDIT: To the guys who closed this: I was aware of the solution posted in [How do you cast a List of objects from one type to another in Java?](https://stackoverflow.com/questions/933447/how-do-you-cast-a-list-of-objects-from-one-type-to-another-in-java) It is the same as the one I posted in my question (just adding the `<?>` after the first cast does exactly the same) I Was looking for something more "clean". In the direction of using the `Class<?> clazz = listobj.get(0).getClass` way of getting the class and casting to the correct class at runtime (but no idea if something like that works... Eclipse doesn't seem to like it anyway...)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T09:41:47.230

```
List<Object> obj = new ArrayList<Object>();
obj.add(new A()); 
```

It is not the right way to write code. Basically you are creating a generic List and adding Object to it and it type unsafe and keep any Object type.

```
List<Object> obj = new ArrayList<Object>();
obj.add(new A());
obj.add(new String("str"));
obj.add(1); 
```

It is recommended to create type-safe `List` like `List<A> obj = new ArrayList<A>();`

you can do this in such a way -

```
public <T>List<T> castCollection(List srcList, Class<T> clas){
    List<T> list =new ArrayList<T>();
    for (Object obj : srcList) {
    if(obj!=null && clas.isAssignableFrom(obj.getClass()))
        list.add(clas.cast(obj));
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T09:38:29.363

那么为什么你的列表没有被声明为

```
List<A> obj = new ArrayList<A>(); 
```

开始？

做你想做的事真的很危险。您的意思是您的列表包含`A`s 及其子类。但因为它最初是一个`Object`s 列表（即任何东西）。以后你可能会得到一个令人讨厌的惊喜。

该编译器错误的真正含义是您在某个地方遇到了设计问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:41:13.020

Perhaps the issue is that you want to put objects of different (but inheritance-related) types into the list? In that case, you read the [Generics Tutorial](http://docs.oracle.com/javase/tutorial/java/generics/), especially the parts about `<? extends Something>` and `<? super Something>`

Cheers,