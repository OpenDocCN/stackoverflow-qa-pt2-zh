# StackOverflow 问答 15990000-15990999

# vb.net - 保存记住我按钮？(VB.net)

> ID：15990010
> 
> 赞同：2
> 
> 时间：2013-04-13T16:22:04.370
> 
> 标签：vb.net, visual-studio, outlook, outlook-addin

当我想到使用单选按钮设置“记住我”时，我正在制作一个电子邮件程序。我在想它可以保存在“textbox4”、“textbox5”和“textbox6”中输入的内容。这可能吗？

编辑：

我的朋友告诉我这种方法可行，但似乎不起作用：

```
Private Sub RadioButton1_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton1.CheckedChanged
    TextBox4.Text = (TextBox4.Text)
    TextBox5.Text = (TextBox5.Text)
    TextBox6.Text = (TextBox6.Text)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:46:12.757

放弃你被告知的内容并尝试这个

使用一个字符串变量来保存这个会话的数据，就像这样

```
 Dim box1 as string
    Dim box2 as string
    Dim box3 as string

Private Sub RadioButton1_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton1.CheckedChanged

    Call SaveInput() 
    'OR
    Call SaveInputToFile()
    ' OR BOTH

End Sub

Public Sub Saveinput()

   box1 = TextBox4.Text
   box2 = TextBox5.Text
   box3 = TextBox6.Text 

End Sub 
```

如果您想将其保存到文件中以供其他会话使用

```
Public Sub SaveinputtoFile()

  Dim writer As System.IO.StreamWriter = New System.IO.StreamWriter("FilePath",  False)

    writer.write(TextBox4.Text)
    writer.writeline()
    writer.write(TextBox5.Text)
    writer.writeline()
    writer.write(TextBox6.Text)
    writer.writeline()
    writer.dispose() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:02:34.223

首先，如果您要使用 RadioButtons，您需要拥有多个单选按钮，可能需要一个复选框。您可以使用项目用户设置在应用程序使用之间保持存储。您需要转到您的项目设置选项卡并创建设置，它应该看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/MOvvY.png)

你会像这样实现它

```
Public Class Form1

   Private Sub RadioButton1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles RadioButton1.CheckedChanged

        My.MySettings.Default.TextBox4 = TextBox4.Text
        My.MySettings.Default.TextBox5 = TextBox5.Text
        My.MySettings.Default.TextBox6 = TextBox6.Text
        My.MySettings.Default.Save()

    End Sub

    Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        TextBox4.Text = My.MySettings.Default.TextBox4
        TextBox5.Text = My.MySettings.Default.TextBox5
        TextBox6.Text = My.MySettings.Default.TextBox6
    End Sub
End Class 
```

# javascript - 使用 JQuery 遍历样式数据

> ID：15990013
> 
> 赞同：2
> 
> 时间：2013-04-13T16:22:43.467
> 
> 标签：javascript, jquery, css

我可以像这样使用 JQuery 访问我的 CSS：

```
alert($(".sliver1").css('width')); 
```

控制台报告“this”的 .css 属性未定义：

```
var sliver = "sliver";

        $("section").each(function()
        {
            if(this.className.indexOf(sliver) !== -1)
            {
                alert(this.css('width'));
            }
        }); 
```

如何访问找到的元素的 CSS？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:25:55.027

你使用jQuery的`.css`错误。用这个：

```
$("section").css('width'); 
```

将`;`when 放入`alert()`. 根据需要更改属性`width`。

使用时`.each()`，需要 jQuery 选择器`$(this)`，`.css('width')`因为`.css()`它是一个 jQuery 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:29:52.150

试试 $(this).css('width'); 那应该工作。

# jquery-ui - 未捕获的类型错误：对象 [object HTMLInputElement] 没有方法“prop”

> ID：15990014
> 
> 赞同：1
> 
> 时间：2013-04-13T16:22:51.147
> 
> 标签：jquery-ui, jquery

当我尝试通过jquery检查设置单选按钮时..它给了我一个错误

> 未捕获的类型错误：对象 [object HTMLInputElement] 没有方法“prop”

```
var sub="twoWheeler";
if (vehicleType == sub) {
       alert("asdasd");
       window.opener.document.getElementById("radios1").prop("checked");
}else{

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:25:28.963

`getElementById`返回一个 DOM 元素引用（在您的情况下为 an [`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)），也就是说，它没有[`.prop()`](http://api.jquery.com/prop/)属于[jQuery objects](http://api.jquery.com/Types/#jQuery)的方法。

除此之外，您的代码不会产生任何副作用，因为`.prop()`使用单个参数调用仅仅是一个 getter，并且您没有将其分配给任何东西。要设置元素的`checked`属性，您可以使用：

```
window.opener.document.getElementById("radios1").checked = true; 
```

以上是纯 JS，问题是用 jQuery 标记的，但此时使用它只会让你在处理 2 个不同的窗口对象时变得更加困难。

* * *

`#radios1`假设 jQuery 包含在您可以使用的同一页面中：

```
window.opener.$('#radios1').prop('checked', true); 
```

[演示](http://jsfiddle.net/pTAYn/3/)（可能需要启用弹出窗口）

或者，如果 jQuery 仅包含在运行上述代码的页面中，则可以使用[上下文选择器](http://api.jquery.com/jQuery/#jQuery1)：

```
$('#radios1', window.opener.document).prop('checked', true); 
```

[演示](http://jsfiddle.net/pTAYn/4/)（可能需要启用弹出窗口）

但是在这种情况下，jQuery 只会让事情变得更加混乱 IMO。如果您在两个页面中都有 jQuery，那么两者都可以工作。纯 JS 不仅更快，而且对我来说似乎更干净。

# c# - 动态生成 8 位 Unicode 到字符

> ID：15990022
> 
> 赞同：3
> 
> 时间：2013-04-13T16:23:13.107
> 
> 标签：c#, unicode, character

我将动态显示 Unicode，

例如，我知道`"\U00020001"`会显示一个字符。（下面的变量“standard_format”）。但是，我只能直接显示整个字符串（`"\U00020001"`）。

我想知道如何将该字符串显示为一个字符。

![图片参考](https://i.stack.imgur.com/5nhfb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:18:14.107

如果你写`"\U0002B695"`的整个字符串将被识别为一个转义序列。然而， in `"\\U0002B695"`only`\\`将被识别为 的转义序列`\`。我不知道以这种方式构建字符串文字然后像编译器那样解析它的方法。

为了获取字符串，您需要将十六进制值转换为 int，然后将其转换为字符串：

```
string txt_unicodePoint = "2B695";

int value = int.Parse(txt_unicodePoint, System.Globalization.NumberStyles.HexNumber);
string result = char.ConvertFromUtf32(value).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:36:57.657

我相信你想要的是`Char.Parse(string s)` [http://msdn.microsoft.com/en-us/library/system.char.parse.aspx](http://msdn.microsoft.com/en-us/library/system.char.parse.aspx) 你会把你的转义序列“\U000 ...”字符串传递给它

# hibernate - 如何为student.userAccount.role等多个级别的类进行绑定？

> ID：15990038
> 
> 赞同：0
> 
> 时间：2013-04-13T16:24:01.563
> 
> 标签：hibernate, jakarta-ee, spring-mvc, jstl, one-to-one

我想知道如何为多级类映射执行弹簧绑定。
我将举一个例子并解释我的问题。

假设我有一个类层次结构，它说**学生**(POJO) 有一个用户帐户(POJO) 并且用户帐户有一个**角色（在 UserAccount** **POJO 中****定义**的属性）我想使用 JSTL 在 JSP 中显示**角色**。

 ******所以我有学生和用户帐户的一对一映射我在后端使用 Spring MVC 和 Hibernate。

我尝试在互联网上搜索解决方案，但我真的找不到任何有用的链接。

我想做基于表单的弹簧绑定。

```
<form:input path = "${student.userAccount.role}" /> 
```

这是我不确定的，因为我在网上的任何地方都找不到工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:12:38.293

制作表格`commandName=student`并更改路径参考

```
<form:form id="frm" commandName="student" action="/MyController" method="POST">
<form:input path = "userAccount.role" /> 
```

假设它们已在控制器中正确添加到模型中。******

# security - 我应该如何处理注册表单中的重复电子邮件地址？

> ID：15990040
> 
> 赞同：0
> 
> 时间：2013-04-13T16:24:13.190
> 
> 标签：security, web-applications

我了解，对于忘记密码的表单，从安全角度来看，最好不要透露电子邮件地址是否存在。相反，您可以发布一条消息，例如“谢谢。如果我们有使用此地址的用户，我们将发送一封电子邮件”。

在您希望确保两个用户不能使用相同的电子邮件地址注册但又不想透露用户当前是否使用电子邮件地址存在的注册表单中应该如何处理此安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:30:43.207

我从未见过拒绝承认任何用户是否拥有指定电子邮件地址的网站。通常的做法是让用户知道所提供的电子邮件地址是否与任何用户匹配。

重新表述您的第二个问题：“我如何告诉用户他们的注册请求不被允许而不告诉他们原因”？我也从未见过网站这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:05:33.987

用户名应该是唯一的（可能是电子邮件 - 在这种情况下，电子邮件是唯一的）此外，为了以安全的方式启用密码恢复，您应该确保每个用户在注册期间提供一个电子邮件地址（可能是不是唯一的。在这种情况下，可能同一个用户注册了多次）

在密码恢复（忘记我的密码用例）期间，用户应提供用户名，然后您将密码发送到用户在注册期间提供的电子邮件。如果用户名是电子邮件 - 请务必在用户注册期间收集其他信息。例如，电话号码。请在恢复密码前要求提供电话号码

附加提示：使用验证码。

# image-processing - 检测线性与非线性滤波器

> ID：15990044
> 
> 赞同：1
> 
> 时间：2013-04-13T16:24:22.707
> 
> 标签：image-processing

我看到有很多可用的滤波器，例如中值滤波器、拉普拉斯滤波器、梯度滤波器……我们如何区分它们是线性滤波器还是非线性滤波器？
非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:50:44.237

线性系统具有以下特性：

*   叠加
*   1 级的同质性

要了解图像中的[叠加](http://en.wikipedia.org/wiki/Superposition_principle)`n`，请考虑对图像区域进行操作的高斯滤波器。如果您分别对每个`n`区域应用高斯并将结果值相加，则总和将与您按`n`像素相加区域中的值并仅应用一次高斯时相同。但是，当您应用中值滤波器时，这*并不总是成立*，因为中值滤波器是在对区域内的像素重新排序后选择的。

要了解图像中的[同质性](http://en.wikipedia.org/wiki/Homogeneous_function)，请再次考虑对图像中的单个区域进行操作的高斯滤波器。应用高斯滤波器并获得结果值`p`。现在在该区域内，将每个像素乘以一个常数`c`并重新应用相同的高斯滤波器以获得结果值`q`。你会发现`q = c * p`。这*并不总是适用*于中值滤波器。

作为快速测试，如果过滤阶段涉及对正在操作的图像区域进行一些修改（包括排序），则过滤器是非线性过滤器。作为一种不太快速的测试，应用叠加和同质性原则对过滤器进行分类。

# java - Java EDT 和生成对话

> ID：15990048
> 
> 赞同：2
> 
> 时间：2013-04-13T16:24:44.280
> 
> 标签：java, swing, model-view-controller, joptionpane, event-dispatch-thread

我正在尝试学习 Swing 的复杂性，并阅读了大量有关事件调度​​线程的内容。我明白这是为了什么，但是我正在努力解决以下概念：

我有一个以正常方式调用的 JFrame：

```
public class Controller {
GUITopLevel gui = new GUITopLevel(this);

public void initiate() {        
    SwingUtilities.invokeLater(
            new Runnable() {
                @Override
                public void run() {
                    gui.init();
                }
            }
    );
}

public void menuCatch(JMenuItem eventSource) {
    JOptionPane.showMessageDialog(gui.topLevelFrame, eventSource.getActionCommand());
}
} 
```

我想从 gui 生成 JDialogs（因此代码）：

```
public class GUITopLevel implements FrontOfHouse {    
JFrame topLevelFrame;

Controller control;

GUITopLevel(Controller c) {
    control = c;
}

@Override
public void GUI() {        
    // Create an action
    MenuAction action = new MenuAction(control);

    // Create the Frame
    topLevelFrame = new JFrame();

    // Create the menu bar
    JMenuBar menuBar = new JMenuBar();
    JMenu file = new JMenu("File");
    JMenu edit = new JMenu("Edit");

    JMenuItem file1 = new JMenuItem();
    JMenuItem file2 = new JMenuItem();
    JMenuItem file3 = new JMenuItem();

    JMenuItem edit1 = new JMenuItem();

    // Set the actions
    file1.setAction(action);
    file2.setAction(action);
    file3.setAction(action);
    edit1.setAction(action);

    // Add the menu items
    file.add(file1);
    file.add(file2);
    file.add(file3);

    edit.add(edit1);

    // Set the text
    file1.setText("Import Diagrams");
    file2.setText("Settings");
    file3.setText("Exit");
    edit1.setText("Cut");
    // Add the menus together
    menuBar.add(file);
    menuBar.add(edit);

    // Set size and add menu bar
    topLevelFrame.setSize(600,400);
    topLevelFrame.setJMenuBar(menuBar);

    topLevelFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

@Override
public void init() {
    GUI();
    //topLevelFrame.pack();
    topLevelFrame.setVisible(true);
}
} 
```

当一个菜单项被点击时，这在控制器中被调用：

```
public void menuCatch(JMenuItem eventSource) {
    JOptionPane.showMessageDialog(gui.topLevelFrame, eventSource.getActionCommand());
 } 
```

与`gui`JOptionPane 的父容器一样，并且已使用`invokeLater`.

抱歉，如果这是重复的 - 我似乎无法找到这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:55:06.920

您的问题提出了两个关键问题：

*   Swing GUI 对象应*仅*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)(EDT) 上构建和操作。这个[例子](https://stackoverflow.com/a/8616169/230513)是典型的，使用`EventQueue.invokeLater()`. 特别注意在EDT 上运行的`actionPerformed()`方法。`Timer`相反，您`GUITopLevel`似乎是在初始线程上实例化的，而不是在您的`Runnable`.

*   模态对话框将阻止来自同一应用程序的其他窗口的用户输入，但 EDT 会继续运行。在[示例](https://stackoverflow.com/a/8616169/230513)中，在方法中添加一个对话框以`run()`查看效果。

    ```
    public void run() {
        ...
        f.setVisible(true);
        JOptionPane.showMessageDialog(dt, TITLE);
    } 
    ```

另请参阅此[Q&A](https://stackoverflow.com/a/3072979/230513)和此[Q&A](https://stackoverflow.com/q/8169964/230513) on MVC in Swing。

# android - 如何实现可以在 Android 中的任何其他应用程序上显示的弹出叠加层

> ID：15990049
> 
> 赞同：35
> 
> 时间：2013-04-13T16:24:49.420
> 
> 标签：android, user-interface

如何为可以显示在任何其他应用程序上的应用程序实现弹出覆盖。

Facebook 在其新的 Facebook Messenger 版本中实现了一个非常相似的功能，称为 Chatheads。我真的很惊讶地看到这是有可能的。在图像上，您会在另一个应用程序上看到一个聊天头（右侧的狗）。

![Facebook Messenger 的 Chathead 优于其他应用程序](https://i.stack.imgur.com/hWk4r.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-20T06:54:04.887

完整的源代码在这里：[http ://www.piwai.info/chatheads-basics](http://www.piwai.info/chatheads-basics)
**注意：**你需要`<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />`

```
public class ChatHeadService extends Service {

  private WindowManager windowManager;
  private ImageView chatHead;

  @Override public IBinder onBind(Intent intent) {
    // Not used
    return null;
  }

  @Override public void onCreate() {
    super.onCreate();

    windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

    chatHead = new ImageView(this);
    chatHead.setImageResource(R.drawable.android_head);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.TYPE_PHONE,
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
        PixelFormat.TRANSLUCENT);

    params.gravity = Gravity.TOP | Gravity.LEFT;
    params.x = 0;
    params.y = 100;

    windowManager.addView(chatHead, params);
  }

  @Override
  public void onDestroy() {
    super.onDestroy();
    if (chatHead != null) windowManager.removeView(chatHead);
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-13T21:58:21.513

[这](https://play.google.com/store/apps/details?id=tk.eatheat.floatingexample&hl=en)是浮动“聊天头”样式覆盖的最小、简单和通用示例。

它使用以下代码使事物浮动：

```
windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
chatHead = new ImageView(this);
chatHead.setImageResource(R.drawable.floating);
final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.WRAP_CONTENT,
    WindowManager.LayoutParams.WRAP_CONTENT,
    WindowManager.LayoutParams.TYPE_PHONE,
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
    PixelFormat.TRANSLUCENT); 
```

完整的源代码可以在[这里](https://github.com/EatHeat/FloatingExample)找到（在 Apache 许可下）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-28T03:36:27.070

我知道发布答案已经很晚了，无论如何我都会将其发布给正在寻求答案的其他人

[Android浮动图像](https://github.com/k0shk0sh/AndroidFloatingImage)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-12T08:24:00.907

如果您想要类似 Messenger 的行为，则有一个库：[Bubbles](https://github.com/txusballesteros/bubbles-for-android)。

如果您更喜欢自己实现它，请按照其他人的建议查看窗口管理器。您还可以查看[Bubbles](https://github.com/txusballesteros/bubbles-for-android)的源代码以获得灵感。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T11:17:29.670

每个 Activity、对话框和服务都附有一个窗口。Facebook 保持服务在后台运行，并在他们获取窗口管理器对象的服务中

`windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);`

添加视图时创建所需的布局参数

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.WRAP_CONTENT,
    WindowManager.LayoutParams.WRAP_CONTENT,
    WindowManager.LayoutParams.TYPE_PHONE,
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
    PixelFormat.TRANSLUCENT); 
```

现在通过以下方法将您的视图添加到窗口管理器

```
windowManager.addView(yourView, params); 
```

# sockets - 在手机上运行服务器，使用蜂窝连接

> ID：15990050
> 
> 赞同：5
> 
> 时间：2013-04-13T16:24:50.187
> 
> 标签：sockets

我很想知道，是否可以在手机上运行服务器并将手机的移动连接用作外部IP？我见过很多用于安卓手机的服务器（web、ftp 等），但其中很多都说它将通过 wifi 托管服务器。我想知道这些类型的服务器是否可以使用移动连接来托管他们的文件？

AFAIK，手机有IP地址，没有防火墙。

编辑：这不是讨论使用蜂窝连接是否谨慎，只是是否可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T16:32:57.667

虽然在电话上托管服务器在技术上是可行的，但如果没有服务提供商（电信）的特殊安排，它就不太可能可用。电话与互联网之间有一个或多个防火墙和 NAT 设备。对于大多数手机公司来说，这些都被配置为阻止与手机的传入连接，因此您的服务器不可用。对于某些公司，可以做出特殊安排以允许此类访问。与开放互联网相比，这些安排更经常使用安全的子网络进行。请注意，一旦允许传入连接，您就无法控制带宽使用，因为人们可以并且将会敲击您的 IP 地址。

附言。请注意，我在上面说“大多数”，因为我很少看到允许传入连接的电信公司。他们通常会很快解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:33:59.690

是的，这是可能的，只要您的移动连接提供商不阻止这种流量。可能需要“公共服务”的外部 IP。它与普通 PC 没有任何不同 - 只要您的软件设置正确，您就可以自由使用。

但是，使用外部 IP 可能非常不方便。如果您想私下使用某些东西，您只需在手机上设置 VPN（大多数 Android 手机开箱即用即可）。这样你就可以在设备之间自由连接，只要你有一个电话可以连接的 VPN 服务器。

另一种选择是做一个反向隧道；这可以用 PC 上的大多数 SSH 软件来完成，但我真的不知道 Android 的进展如何。该选项的好处是 SSH 流量似乎很少被阻止 - 我从来没有发生过这种情况。

# java - Slick2d | 以同样的速度拍摄

> ID：15990051
> 
> 赞同：2
> 
> 时间：2013-04-13T16:24:50.540
> 
> 标签：java, slick2d

## 问题：

我成功地在我的小游戏中实现了一个射击机制，但是有一个问题。
如果我的光标离玩家更远，子弹的速度会更快，如果光标离玩家更近，子弹的速度会更慢。

所以我的问题是：*我怎样才能让子弹总是以相同的速度运行？*

**链接：**

> [***游戏（完）***](https://www.dropbox.com/s/dhvf5vbqj25sgyw/game.jar)

**代码（来自 Shot.java）：**

```
public Shot(World world, Camera camera, float x, float y, int width, int height, Color color, float targetX, float targetY) {
    super(world, camera, x, y, width, height, color);

    this.targetX = targetX;
    this.targetY = targetY;

    dx = targetX - x;
    dy = targetY - y;
}

@Override
public void render(GameContainer gc, Graphics g) {
    g.setColor(color);
    g.fillOval(x - camera.getX(), y - camera.getY(), width, height);
}

@Override
public void update(GameContainer gc, int delta) {
    x += dx * delta * .005f;
    y += dy * delta * .005f;
} 
```

**我做的！这是我的解决方案（感谢*Axis*的帮助）：**

```
float dx, dy;
Vector2f vector;

public Shot(World world, Camera camera, float x, float y, float targetX, float targetY, int width, int height, Color color) {
    super(world, camera, x, y, width, height, color);

    dx = targetX - x;
    dy = targetY - y;

    vector = new Vector2f(dx, dy).normalise();
}

@Override
public void render(GameContainer gc, Graphics g) {
    g.setColor(color);
    g.fillOval(x - camera.getX(), y - camera.getY(), width, height);
}

@Override
public void update(GameContainer gc, int delta) {
    x += vector.getX() * delta * 0.8f;
    y += vector.getY() * delta * 0.8f;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:56:36.803

首先，我建议切换到向量类，而不是将所有内容拆分为 x 和 y。从长远来看，它将为您节省大量时间。

你需要做的就是改变

```
public Shot(World world, Camera camera, Vector2 pos, int width, int height, Color color, Vector2 target) {
    super(world, camera, pos, width, height, color);
    this.target = target

    //dx = targetX - x; get rid of this
    //dy = targetY - y; and this

//add a vector called direction

this.direction = (target - pos).Normalize();
}

@Override
public void update(GameContainer gc, int delta) {

pos += direction * delta * bulletSpeed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:37:31.667

你的问题在这里：

```
public Shot(World world, Camera camera, float x, float y, int width, int height, Color color, float             targetX, float targetY) {
    super(world, camera, x, y, width, height, color);
    this.targetX = targetX;
    this.targetY = targetY;

    dx = targetX - x;
    dy = targetY - y;
} 
```

你的子弹速度取决于与目标的距离。使其成为一个常数值。

# javascript - 使用 this 压缩多次点击和提交功能

> ID：15990054
> 
> 赞同：1
> 
> 时间：2013-04-13T16:25:19.510
> 
> 标签：javascript, jquery, html, this

我在单个页面上创建了一个游戏，并且我有 10 个点击功能，这些功能在包含表单的多个 div 上触发。div 里面是玩家必须填写的问题。我已经能够使用这行代码来定位每个单独的表单：`var answer1 = $('form[name="form1"] >input:text').val()`这样每个表单都会改变`.. [name="form2"]..`等等。我之前在[这里](https://stackoverflow.com/questions/15949886/multiple-jquery-click-functions-on-multiple-forms-on-same-page)的另一篇文章中问过。所以html如下：

```
<div class = "clickbox clickbox1"></div>
<div class = "riddlebox riddlebox1">
//question
<form name="form1">
<input type="text"  value=""/>
</form> 
</div> 

<div class = "clickbox clickbox2"></div>
<div class = "riddlebox riddlebox2">
//question
<form name="form2"> 
<input type="text"  value=""/>
</form> 
</div> 
```

和处理它的Jquery：

```
$( ".clickbox1" ).click(function() {
  var answered = false;
  $( ".riddlebox1" ).show();
  $('form[name="form1"]').submit(function () {
    var answer1 = $('form[name="form1"] >input:text').val().toLowerCase();
    if (answer1 == //do some checks &&(!answered) ){ 
        answered=true;
        points++;
        $('form[name="form1"] >input:text').val(""); 
    }
return false;
  }); 
}); 
```

我有 10 个这样的功能。我试图将所有这些浓缩成一个函数。我是否需要在`this`每次单击 div 时创建一个实例，以便我可以识别该实例的新属性？例如，answered = false 并分配输入文本值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:45:39.463

我不知道您所说的“创建一个实例`this`”是什么意思。在javascript中，`this`是一个引用某个对象的特殊变量，它引用的对象取决于当前函数的调用方式。

在 jQuery 事件处理程序中，`this`变量指的是触发事件的元素（在这种情况下，是被点击的元素：）`clickbox1`。

如果您想要一个事件处理程序而不是 10 个不同的事件处理程序（这确实是个好主意！），您的事件处理程序应该使用该`this`变量来确定要操作的内容。

所以首先，我们希望为所有`clickbox`. 有两种不同的方法可以做到这一点：我们可以将处理程序添加到所有`div.clickbox`元素，或者我们可以将委托事件处理程序添加到 DOM 更高层的元素。这就是我所说的第二个意思：

```
$(document).on('click', '.clickbox', function() {}); 
```

to 的第二个参数`on`是一个过滤器，它指示应该处理哪些传播的事件。

现在我们想让你的处理函数通用化，因为它用于`this`查找相关元素，而不是使用硬编码索引，如`.riddlebox1`：

```
$(document).on('click', '.clickbox', function() {
   // inside this function, "this" refers to the clicked div
  var answered = false;
  // find the riddlebox which comes after the clicked clickbox
  var $riddlebox = $(this).next(".riddlebox").show();
  $riddlebox.children("form").submit(function () {
    // inside this function, "this" refers to the form
    var $textbox = $(this).find('>input:text');
    var answer1 = $textbox.val().toLowerCase();
    if (answer1 /* do some checks*/ ){ 
        answered=true;
        points++;
        $textbox.val(""); 
    }
    return false;
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:46:36.833

您应该将单个处理程序附加到所有类似元素，然后`this`在处理程序内使用引用。

将单个处理程序附加到具有类“clickbox”的所有元素，以打开具有类“riddlebox”的下一个元素。像这样的东西：

```
$('.clickbox').click(function () {
    $(this).next('.riddlebox').show();
}); 
```

然后将处理程序附加到表单提交事件。我认为您无需等到显示表单即可执行此操作。也就是说，它不必在上面的点击处理程序中。

```
$('form').submit(function () {
    var $form = $this;
    var answer = $form.find('input').val().toLowerCase();
    f (answer == //do some checks && $form.data('answered')){ 
        $form.data('answered', true);
        points++;
        $form.find('input').val('');
    }
    return false;
}); 
```

请注意如何使用该`.data()`方法来跟踪表单的问题是否已被回答。

[**jsfiddle 演示**](http://jsfiddle.net/john_s/yZUE9/)

# php - 性能：搜索值并返回子数组的键

> ID：15990059
> 
> 赞同：2
> 
> 时间：2013-04-13T16:25:38.913
> 
> 标签：php, performance

给定一个数组，如：

```
$nouns = array(
    "man" => array("men"),
    "octopus" => array("octopi", "octopuses"),
    "ox" => array("oxen")
); 
```

由大约 3000 个单复数对组成，例如，如何通过调用最有效地获得单数（键）`array_search_loosely($nouns, "men")`？

然后我希望收到一个值为“man”的数组。

我尝试了四种不同的方法：

**原创**（使用功能`array_is_assoc`，这是不言自明且与情况无关的）

```
function array_search_loosely($array, $values, $compare_keys = false) {
  $values = is_array($values) ? $values : array($values);
  foreach($array as $item_key => $item) {
    if (is_array($item)) {
      $return_key = true;
      foreach($values as $value_key => $value) {
        if (!in_array($value, $item)) {
          $return_key = false;
          break;
        }
        elseif($compare_keys === true and array_is_assoc($values)) {
          if (!in_array($value_key, array_keys($item, $value))) {
            $return_key = false;
            break;
          }
        }
      }
      if ($return_key === true) {
        $item_keys[] = $item_key;
      }
    }
    elseif(!is_array($values)) {
      if ($item === $values) {
        $item_keys[] = $item_key;
      }
    }
  }
  return (isset($item_keys))? $item_keys : false;
} 
```

**第二种方法**：

```
function array_search_loosely($array, $values, $compare_keys = false) {
    $keys = array_keys(array_filter($array, function($item) use ($values, $compare_keys) {
        return (!is_array($item) and $item === $values) or (is_array($item) and each_in_array($item, array_create($values), $compare_keys));
    }));
    return !empty($keys) ? $keys : false;
}

function each_in_array($array, $values, $compare_keys = false) {
    return $compare_keys === false ? count(array_uintersect($values, $array, function($item1, $item2) { return $item1 === $item2 ? 0 : ($item1 > $item2 ? 1 : -1); })) == count($values) : count(array_uintersect_assoc($values, $array, function($item1, $item2) { return $item1 === $item2 ? 0 : ($item1 > $item2 ? 1 : -1); })) == count($values);
} 
```

我选择使用`array_uintersect`, 也允许数组`$items`，因为如果我要使用 array_intersect，将为每个数组生成通知`$item`。此选项也允许`each_in_array()`检查数组`$values`。

此外，第三个可选参数`$compare_keys`与这种情况无关，但在我使用该函数的其他情况下。

第三种和第四种方法是前一种方法的混合。在这一点上，我原来的方法仍然是最快的，但是当我在几百或几千个单词上运行我的函数时，操作仍然会花费几十秒。关于如何提高在这种情况下获得复数单数的性能的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:58:23.967

输出：

![输出](https://i.stack.imgur.com/y3abv.png) 资源：

```
<!DOCTYPE html>
<html>
    <body>
        <?php
            $nouns = array  (
                                "data" => array("data"),
                                "datum" => array("data"),
                                "man" => array("men"),
                                "octopus" => array("octopi", "octopuses"),
                                "ox" => array("oxen"),
                                "hippopotamus" => array("hippopotami", "hippopotamuses")
                            );

            function find_singular($nouns, $search)
            {
                foreach($nouns as $noun => $values)
                {
                    if(in_array($search, $values))
                    {
                        $found[] = $noun;
                    }
                }
                if(!empty($found))
                {
                    $n = count($found);
                    if($n > 1)
                    {
                        echo "<strong>$search</strong> has $n singular forms: <em>";
                        print_r(implode('</em> and <em>', $found).'</em><br />');
                    }
                    else
                    {
                        echo "<b>$search</b> is the plural of <em>$found[0]</em><br />";
                    }
                }
                else
                {
                    echo "<b>$search</b> was not found.<br />";
                }
            }

            find_singular($nouns, "men");
            find_singular($nouns, "octopi");
            find_singular($nouns, "data");
            find_singular($nouns, "oxen");
            find_singular($nouns, "octopuses");
            find_singular($nouns, "hippopotami");
            find_singular($nouns, "kittens");
        ?>
    </body>
</html> 
```

希望这可以帮助！

编辑：这样做的目的是什么？我猜您正在为 Web 或应用程序界面创建字典应用程序。只要您打算实现搜索功能，我认为您将无法避免循环。您是否将整个字典存储在 PHP 数组中？我假设您是因为 XML 和 mysql 查询会花费更多时间。我唯一的其他建议是将字典拆分为您可以管理的尽可能多的数组（每个字母可能有几十个），或者编写一个脚本从现有的字典数组或平面文件中生成这些，然后在您的搜索框，类似于谷歌的预测搜索，但不是在输入搜索字符串时显示可能的结果，而是在后台默默地缩小要搜索的数组。我在某处有一个脚本可以执行此操作，如果这听起来可行，可以将其挖掘出来。基本上，不是搜索整个字典（我见过一个超过 1200 万字的字典！），在键入、发送和处理关键字时，循环周期可能会少得多。硬件也浮现在脑海中——服务器的硬盘、处理器和内存速度将占大部分。我还听说 C++ 更适合字典搜索，对于 PHP 开发人员来说不会太陌生。硬件也浮现在脑海中——服务器的硬盘、处理器和内存速度将占大部分。我还听说 C++ 更适合字典搜索，对于 PHP 开发人员来说不会太陌生。硬件也浮现在脑海中——服务器的硬盘、处理器和内存速度将占大部分。我还听说 C++ 更适合字典搜索，对于 PHP 开发人员来说不会太陌生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:08:11.930

```
$search = 'men';
$found  = '';

foreach($nouns AS $noun => $values){
   if(in_array($search, $values){
        echo 'Found what we\'re looking for.';
        $found = $nouns[$noun];
   }

}

print_r($found); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:35:39.827

您当前格式的地图不适合进行查找。您还需要反转它：

```
$invert = array(
  'men' => 'man',
  'octopi' => 'octopus',
  'octopuses' => 'octopus',
  'oxen' => 'ox',
); 
```

# zend-framework2 - 如何将站点地图 XML 文件传递 给 Zend Framework 2 中的站点地图视图助手？

> ID：15990062
> 
> 赞同：0
> 
> 时间：2013-04-13T16:25:54.127
> 
> 标签：zend-framework2, sitemap, viewhelper

我生成了一个`sitemap.xml`文件并想从中创建一个站点地图：

```
<?php
$this
    ->navigation()
    ->sitemap()
    ->setFormatOutput(true)
    ->setMaxDepth(2)
;
echo $this->navigation()->sitemap();
?> 
```

如何在站点地图视图助手中设置文件的路径？

# c# - 拉取后无法加载项目：“预期为'ENCODING'，但发现'utf-8'。”

> ID：15990064
> 
> 赞同：20
> 
> 时间：2013-04-13T16:25:59.713
> 
> 标签：c#, wpf, git, visual-studio-2012

从 git 拉取项目（WPF 应用程序）后，

我收到此错误：

![在此处输入图像描述](https://i.stack.imgur.com/ouLaw.jpg)

可能是什么原因造成的？在拉动它之前它工作得很好（其他人致力于该项目）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-14T17:17:14.363

我的 .csproject 文件中似乎有一些未关闭的标签。

奇怪的是，上面的错误被报告了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-06T20:52:27.127

查看您的 .csproj 扩展文件搜索：<<<<<< 或 ====== 或 >>>>>>>> 并将其删除。

还要检查您的 web.config 文件中的这些符号，如果它们存在，也将它们删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-12T16:55:09.310

我有同样的问题，我只是缺少一个结束标签。

[http://www.w3schools.com/xml/xml_validator.asp](http://www.w3schools.com/xml/xml_validator.asp) <试试这个

编辑 - 尝试在编辑器中打开您的 .csproj 并查找丢失的标签。如果您卸载项目然后编辑您的项目，则可以通过 Visual Studio 执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T07:30:02.137

我有一些奇怪的下划线，我正在使用工具 Git Extensions，也许这个工具添加了这些行。我在 notepad++ 中比较了一个旧版本并看到了这个。它没有在 Visual Studio 中显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T16:48:02.967

这个论坛真的帮助了我。非常感谢。在我的情况下，我的队友合并了代码，并且在 .csproj 中缺少结束标记，因为我们有 >。我在 Visual Studio 中打开了 .csproj。将结束标记编辑为 /> 并保存文件并重新加载项目，这很好。

# android - 在android通话期间获取语音流

> ID：15990070
> 
> 赞同：0
> 
> 时间：2013-04-13T16:26:29.387
> 
> 标签：android, wifi, call, voice

我在 java 桌面应用程序和 android 应用程序之间有 wifi 连接。我需要在通话期间将对方的声音转移到桌面端，并将我的声音从桌面的麦克风转移到对方。我该怎么做？如何获取调用的输入和输出流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:52:49.797

您无法处理 gsm 通话数据（既不能通过上行链路发送也不能通过下行链路接收）。如果满足您的要求，我认为您可以尝试 sip 呼叫。

# php - PDO 绑定值作为 INT？

> ID：15990074
> 
> 赞同：0
> 
> 时间：2013-04-13T16:27:11.163
> 
> 标签：php, pdo

```
$query = "SELECT :option FROM `site`.`fish` WHERE `fishid`=:fishid";
    if ($stmt = $connect->prepare($query)){
        $stmt->bindValue(':option', $option, PDO::PARAM_INT);
        $stmt->bindValue(':fishid', $fishid, PDO::PARAM_INT);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        echo '<pre>', print_r($rows, true), '</pre>';
    } 
```

以下返回

```
Array
(
    [0] => Array
        (
            [id] => id
        )

) 
```

我希望它返回 [id]=>7 它与我的 BindValues 有关...它们不被识别为数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:34:53.120

使用准备好的语句，您尝试做的事情是不可能的。

您不能将要选择的列作为参数传递给准备好的语句。该语句将评估为如下内容：

```
SELECT 'id' ... 
```

什么会给你一个字符串'id'而不是列的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:47:50.953

这源于对预准备语句中的占位符如何工作的常见误解：它们不是简单地替换为字符串，而是执行生成的 SQL。相反，要求“准​​备”语句的 DBMS 会针对如何执行该查询提出完整的查询计划，包括它将使用哪些表和索引，无论您如何填写占位符，这都是相同的。

`SELECT name FROM my_table WHERE id = :value`无论您替换什么，计划都是相同的`:value`，但`SELECT name FROM :table WHERE id = :value`无法计划看似相似的计划，因为 DBMS 不知道您实际上要从哪个表中选择。

您的表单查询`SELECT :value FROM my_table`只能是因为占位符表示文字值而不是列名 - 设置`:value`为字符串`'hello'`将等效于`SELECT 'hello' FROM my_table`并且只返回`'hello'`结果集中每一行的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:14:27.273

The column name is not a SQL variable (SQL does not support having variables at that place), but it is just a string in PHP:

```
$option = (string) $option;

switch ($option) 
{
    case "id": 
        break;

    default:
        throw new InvalidArgumentException(
        sprintf("Invalid identifier: '%s'", $option)
    );
}

if (false !== strpos($option, "`")) 
{
    throw new InvalidArgumentException(
        sprintf("Invalid column name: '%s'", $option)
    );
}

$query = sprintf("SELECT `%s` FROM `site`.`fish` WHERE `fishid`=:fishid", $option);

if ($stmt = $conn->prepare($query))
{
    $stmt->bindValue(':fishid', $fishid, PDO::PARAM_INT);
    $stmt->execute();
    ... 
```

# android - 导入 com.google.android.gms 无法解析

> ID：15990075
> 
> 赞同：80
> 
> 时间：2013-04-13T16:27:11.920
> 
> 标签：android, google-maps, import

我是 Android 开发的新手。按照[本教程](http://www.vogella.com/articles/AndroidGoogleMaps/article.html%22this%20tutorial%22)`The import com.google.android.gms cannot be resolved`，当我将代码写入以下内容时出现错误`MainActivity.java`：

```
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions; 
```

通过搜索各种修复，我确保尝试了这些：

*   我已经通过 Android SDK 管理器下载了特定 API 级别的 Google API。
*   我检查了 Google API 作为项目构建目标。
*   我已将`<uses-library android:name="com.google.android.maps" />` 行添加到标签`AndroidManifest.xml`的子项中。`<application>`
*   `Project->Clean...`我通过选择并从头开始构建项目来清理项目。
*   我`.jar`通过右键单击我的项目来包含地图文件，转到构建路径并添加外部存档，在我的 SDK 中定位它：`android-sdk-windows\add-ons\addon_google_apis_google_inc_8\libs\maps`

不幸的是，以上都没有帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-04-08T08:25:24.687

另一种方法是让 Eclipse 为您完成导入工作。将鼠标悬停在`com.google.android.gms`无法解析的导入上，然后在弹出菜单的底部选择**Fix project setup...**选项，如下所示。然后它会提示导入谷歌播放服务库。选择它，你应该很高兴。

![在此处输入图像描述](https://i.stack.imgur.com/8OUlc.png)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-13T16:32:14.180

> 我检查了 Google API 作为项目构建目标。

这无关紧要，就像 Maps V1 一样，而您正在尝试使用 Maps V2。

> 我通过右键单击我的项目来包含地图的 .jar 文件，转到构建路径并添加外部存档，在我的 SDK 中定位它：android-sdk-windows\add-ons\addon_google_apis_google_inc_8\libs\maps

这是双重错误的。

首先，**永远不要在 Android 项目中手动修改构建路径**。如果您这样做，充其量只会在运行时崩溃，因为您认为您放入项目中的 JAR（通过手动构建路径更改）不在您的 APK 中。对于普通的第三方JAR，把它放在`libs/`你的项目目录下，它会自动将它添加到你的构建路径中*，*并将其内容添加到你的APK文件中。

但是，Maps V2 不是 JAR。它是一个包含 JAR 的 Android 库项目。您需要整个库项目。

您需要将`android-sdk-windows\add-ons\addon_google_apis_google_inc_8`项目导入 Eclipse，然后将其[作为对 Android 库项目的引用](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)添加到您的应用程序中。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-07-02T15:55:35.137

根据我的经验（Eclipse）：

1.  将 google-play-services_lib 添加为项目并从我的应用程序中引用它。
2.  删除了所有手动添加的罐子
3.  在我的项目的“libs”文件夹中添加了 google-play-services.jar。
4.  我遇到了一些大问题，因为我搞砸了 Order 和 Export 选项卡，所以工作解决方案是（按此顺序）：src、gen、Google APIs、Android Dependencies、Android Private Libraries（只有这个被检查为导出）。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-09-06T13:25:33.700

在我的情况下或全部使用 android studio

你可以导入谷歌播放服务

放在你的`build.gradle`

```
compile 'com.google.android.gms:play-services:7.8.0' 
```

或最新版本的播放服务取决于您观看此答案的时间

> 更具体的导入

请查看这个单独的 gradle 导入

[https://developers.google.com/android/guides/setup](https://developers.google.com/android/guides/setup)

**谷歌地图**

```
com.google.android.gms:play-services-maps:7.8.0 
```

> 可能发生错误

如果您在将项目与 gradle 文件同步时遇到错误

[![在此处输入图像描述](https://i.stack.imgur.com/EEBZa.png)](https://i.stack.imgur.com/EEBZa.png)

确保安装最新更新

1- Android 支持存储库。

2- Android 支持库。

3-谷歌存储库。

4-谷歌播放服务。

[![在此处输入图像描述](https://i.stack.imgur.com/Hd7wb.png)](https://i.stack.imgur.com/Hd7wb.png)

***您可能需要重新启动您的 android studio 才能响应***

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-06-04T04:36:46.120

请注意，将 google-play-services_lib 项目导入 IDE 后，您还需要将 google-play-services.jar 添加到： Project=>Properties=>Java build path=>Libraries=>Add JARs

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-20T08:31:28.330

以上解决方案应该可以解决您的问题。如果没有，请确保您使用 SDK 管理器更新您的 Android sdk 并安装最新的 lib 项目，然后再次重复上述步骤。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-10T11:25:44.090

再一次确保这 2 件事正确发生仅此而已。（对于 ECLIPSE 用户）

1) 从 --> C:\Users(your-username)\android-sdks\extras\google\google_play_services\libproject\google-play-services_lib\libs\ **google-play-services.jar复制 jar 文件**

2）右键单击项目->构建路径->添加外部存档-> **google-play-services.jar**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-09T20:19:13.500

在 Android Studio 中转到：文件 -> 项目结构... -> 通知（最后一个条目） -> 检查 Google Cloud Messaging

等待几秒钟，你就完成了:) import com.google.android.gms.gcm.GcmListenerService 应该正确解决

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-04T12:29:09.080

我也有同样的问题。通过使用最新的 sdk 工具版本进行编译来解决它。（播放服务、构建工具等）。示例 build.gradle 如下所示以供参考。

```
 apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion "23.0.1"

    defaultConfig {
        applicationId "com.abc.bcd"
        minSdkVersion 14
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.google.android.gms:play-services:8.4.0'
    compile 'com.android.support:appcompat-v7:23.0.1'
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-18T19:23:46.793

假设您正在使用 ECLIPSE：

右键单击项目属性 ANDROID

如果您检查了 ANDROID 版本，则必须将其更改为 GOOGLE API。选择与您项目的目标版本兼容的 GOOGLE APIS 版本。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-12-19T14:51:14.910

在我的情况下，只有在我添加`gcm.jar`到 lib 文件夹之后，它才开始工作。它在这里：`C:\adt-bundle-windows-x86_64-20131030\sdk\extras\google\gcm\gcm-client\dist`

所以`google-play-services.jar`没有工作...

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-05-08T18:59:01.513

我遇到了同样的问题，所以我决定如下更改导入行的愚蠢 API

```
import com.google.android.gms.maps.model.LatLng; 
```

# arrays - 循环布尔值：不等于 NA

> ID：15990077
> 
> 赞同：1
> 
> 时间：2013-04-13T16:27:37.847
> 
> 标签：arrays, r, loops, boolean

我想计算数组中不是“NA”的值。

例如我有

```
array<-c(NA,NA,NA,NA,NA,4,-5.5463) 
```

我认为这会起作用，但它没有：

```
counter<-0
for(i in 1:length(array)){
if(array[i]!=na){
counter<-counter+1
}
} 
```

我如何计算这个数组中不是“NA”的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:29:19.630

使用`is.na`和`sum`。`!`代表“不” ：

```
> sum(!is.na(array))
[1] 2 
```

您还可以使用`table`，如：

```
> table(is.na(array))

FALSE  TRUE 
    2     5 
```

或者，正如@Arun 在评论中建议的那样：

```
> length(na.omit(array))
[1] 2 
```

# php - CodeIgniter - 使用 .html 链接创建表单

> ID：15990079
> 
> 赞同：0
> 
> 时间：2013-04-13T16:27:46.950
> 
> 标签：php, codeigniter, codeigniter-2

我想创建一个包含 5 个页面的简单网站，其中包含 2 个简单的联系我们表格。

链接应该是`www.yoursite.com/contact.html`，提交后应该去`www.yoursite.com/success.html`。请帮忙，我已经搜索了很多，但找不到任何东西

[编辑]

我对不同的表单有不同的控制器，但在链接中我不想要控制器名称，而只想要视图 name.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:09:19.983

如果您只想更改 URL 的外观，那么您可以使用[CodeIgniter 的 routing](http://ellislab.com/codeigniter/user-guide/general/routing.html)。您很可能还想`index.php`从 URL 中删除，更多信息可在[CodeIgniter 的用户指南](http://ellislab.com/codeigniter/user-guide/general/urls.html)中找到。

例如，如果您有一个控制器，其名称为加载联系表单视图`Contact`的`index()`函数，以及`success()`加载成功页面视图的另一个函数：

*   然后，这条路线`application/config/routes.php`会将 URL 映射`www.yoursite.com/contact.html`到您的`Contact`控制器。

    `$route['contact.html'] = "contact";`

*   该路由将映射`www.yoursite.com/success.html`到控制器`success()`内的功能。`Contact`

    `$route['success.html'] = "contact/success";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:42:34.747

如果您出于某种原因希望您的 Codeigniter URL 附加“.html”，您应该修改您的`application\config\config.php`文件并更改

```
$config['url_suffix'] = ''; 
```

至

```
$config['url_suffix'] = '.html'; 
```

您可以[在此处](http://ellislab.com/codeigniter/user-guide/general/urls.html)查看更多信息。

# r - R 用于解决线性规划问题

> ID：15990082
> 
> 赞同：6
> 
> 时间：2013-04-13T16:27:55.980
> 
> 标签：r, lpsolve

我正在寻找一个很好的 R 包来解决线性规划模型。我对默认值很满意`lpSolve::lp`，但没有办法得到**阴影和降价**。我需要这些以及完整性约束。

样品型号：

```
A = rbind(
    c(0.5, 0.2, 0.2),
    c( -1,   1,   0),
    c(  0,   1,  -1),
    c( -1,  -1,  -1),
    c( -1,   0,   0),
    c(  0,  -1,   0),
    c(  0,   0,  -1)
)
b = c(5, 0, 0, -13, 0, 0, 0)
c_ = c(8.4, 6, 9.2)
(signs = c('=', rep('<=', 6)))

res = lpSolve::lp('min', c_, A, signs, b,  all.int = TRUE)

# Objective function
res
# Variables
res$solution

# Shadow prices???
# Reduced prices??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:36:04.907

搜索

```
sos::findFn("integer shadow reduced") 
```

... 返回指向 Benchmarking 包的链接，说明它将提供双重价值（影子价格）。

[http://finzi.psych.upenn.edu/R/library/Benchmarking/html/Benchmarking-package.html](http://finzi.psych.upenn.edu/R/library/Benchmarking/html/Benchmarking-package.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T13:18:54.443

正如评论中所说，[**文档的第 4 页**](http://cran.r-project.org/web/packages/lpSolve/lpSolve.pdf)讨论了这一点。这是文档的摘录：

```
# Get sensitivities
lp ("max", f.obj, f.con, f.dir, f.rhs, compute.sens=TRUE)$sens.coef.from
## Not run: [1] -1e+30 2e+00 -1e+30
lp ("max", f.obj, f.con, f.dir, f.rhs, compute.sens=TRUE)$sens.coef.to
## Not run: [1] 4.50e+00 1.00e+30 1.35e+01

# Right now the dual values for the constraints and the variables are
# combined, constraints coming first. So in this example...

lp ("max", f.obj, f.con, f.dir, f.rhs, compute.sens=TRUE)$duals
## Not run: [1] 4.5 0.0 -3.5 0.0 -10.5

# ...the duals of the constraints are 4.5 and 0, and of the variables,
# -3.5, 0.0, -10.5\. Here are the lower and upper limits on these:

lp ("max", f.obj, f.con, f.dir, f.rhs, compute.sens=TRUE)$duals.from
## Not run: [1] 0e+00 -1e+30 -1e+30 -1e+30 -6e+00
lp ("max", f.obj, f.con, f.dir, f.rhs, compute.sens=TRUE)$duals.to
## Not run: [1] 1.5e+01 1.0e+30 3.0e+00 1.0e+30 3.0e+00 
```

# java - 正则表达式从段落中查找包含特定单词（java）的句子

> ID：15990083
> 
> 赞同：1
> 
> 时间：2013-04-13T16:27:59.747
> 
> 标签：java, regex

我有一个单词列表：**dog**、**cat**、**leopard**。

我正在尝试在 Java 中提出一个正则表达式，以从包含任何单词的长段落中提取句子（不区分大小写）。句子以`.` `?`或`!` 有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T23:27:47.097

# 假设

*   句子必须以**大写**字母开头，中间没有行终止符 [.?!]。
*   关键字匹配不区分大小写。但是，子字符串匹配无效。
*   关键字可能出现在句子的任何地方（开始、结束或中间）。
*   支持引号和**非正式**的双标点。如果不需要，请使用第二个正则表达式。

```
public class SentenceFinder {

    public static void main(String[] args) {
        String paragraph = "I have a list of words to match: dog, cat, leopard. But blackdog or catwoman shouldn't match. Dog may bark at the start! Is that meow at the end my cat? Some bonus sentence matches shouldn't hurt. My dog gets jumpy at times and behaves super excited!! My cat sees my goofy dog and thinks WTF?! Leopard likes to quote, \"I'm telling you these Lions suck bro!\" Sometimes the dog asks too, \"Cat got your tongue?!\"";
        Pattern p = Pattern.compile("([A-Z][^.?!]*?)?(?<!\\w)(?i)(dog|cat|leopard)(?!\\w)[^.?!]*?[.?!]{1,2}\"?");
        Matcher m = p.matcher(paragraph);
        while (m.find()) {
            System.out.println(m.group());
        }
    }
    /* Output:
       I have a list of words to match: dog, cat, leopard.
       Dog may bark at the start!
       Is that meow at the end my cat?
       My dog gets jumpy at times and behaves super excited!!
       My cat sees my goofy dog and thinks WTF?!
       Leopard likes to quote, "I'm telling you these Lions suck bro!"
       Sometimes the dog asks too, "Cat got your tongue?!"
    */
} 
```

如果“引用？！”，则简化正则表达式 （或非正式标点符号）不是必需的：
`"([A-Z][^.?!]*?)?(?<!\\w)(?i)(dog|cat|leopard)(?!\\w)[^.?!]*?[.?!]"`

获取那些不以大写字母开头的句子（如果输入可能有这样的错别字）：
`"(?i)([a-z][^.?!]*?)?(?<!\\w)(dog|cat|leopard)(?!\\w)[^.?!]*?[.?!]"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T17:47:48.547

以下假设句子以大写字母开头，并且 句子中除了结尾之外`.`没有`!`或。`?`

```
String str = "Hello. It's a leopard I think. How are you? It's just a dog or a cat. Are you sure?";
Pattern p = Pattern.compile("[A-Z](?i)[^.?!]*?\\b(dog|cat|leopard)\\b[^.?!]*[.?!]");
Matcher m = p.matcher(str);

while (m.find()) {
    System.out.println(m.group());
}
// It's a leopard I think.
// It's just a dog or a cat. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:20:12.443

这应该这样做。你只需要在中间填写你想要的单词。例子：

你好，我是一只狗，我喜欢做事？不要把我的软弱当仁慈。我的树皮胜过飞跃的咬伤！所以收养我而不是另一种动物。像一只猫。

火柴：

你好，我是一只狗，我喜欢做事？我的树皮胜过飞跃的咬伤！像一只猫。并这样做 (?i) 忽略大小写。我没有把它放进去，因为我真的不记得语法但是别人写的

```
"(?=.*?\\.)[^ .?!][^.?!]*?(dog|cat|leapord).*?[.?!]" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T16:41:40.910

试试这个正则表达式

```
 str.matches("(?i)(^|\\s+)(dog|cat|leopard)(\\s+|[.?!]$)"); 
```

(?i) 是一种特殊的结构，表示*不区分大小写*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T17:40:27.127

. *（猫|狗|豹）。*(\.|\?|\!)$ 并且您应该使用 java.util.regex.Pattern 的 CASE_INSENSITIVE 选项。

# rust - 为什么 rust 解析器需要 fn 关键字？

> ID：15990084
> 
> 赞同：5
> 
> 时间：2013-04-13T16:28:18.600
> 
> 标签：rust

我一直在阅读有关 rust 的博客，例如，这个关闭让我想知道：

```
fn each<E>(t: &Tree<E>, f: &fn(&E) -> bool) {
if !f(&t.elem) {
    return;
}

for t.children.each |child| { each(child, f); }
} 
```

为什么不能：

```
each<E>(t: &Tree<E>, f: &(&E) -> bool) {
if !f(&t.elem) {
    return;
}

for t.children.each |child| { each(child, f); }
} 
```

也许我在班级系统上遗漏了一些可以防止这种情况的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-14T04:24:23.063

它使编译器、语法高亮程序、shell 脚本和人类（即每个人）的解析更加复杂。

例如， with`fn`接受`foo`一个有两个`int`参数且不返回任何内容的函数，并`bar`接受一个指向 2 `int`s元组的指针

```
fn foo(f: &fn(int, int)) {}
fn bar(t: &(int, int)) {} 
```

没有`fn`，两者的参数都变为`&(int, int)`并且编译器无法区分它们。当然可以提出其他规则，因此它们的编写方式不同，但几乎可以肯定，这些规则与仅使用`fn`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-25T23:22:05.610

一些 fn 可能看起来无关紧要，但这有一个附带好处，即使用 'grep' 非常容易浏览 rust 代码。要查找函数 'foo' 的定义，只需 grep "fn\sfoo"。要查看源文件中的主要定义，只需 grep 查找“(fn|struct|trait|impl|enum|type)”。

这在 rust 缺少 IDE 的早期阶段非常有用，并且可能确实以其他方式简化了语法。

使语法不像 C++ 那样模棱两可是一个主要目标，它使泛型编程更容易（您不必按照特定顺序在编译单元中引入如此多的定义来正确解析它），并且应该使未来的工具更容易。与当前 C++ IDE 必须处理的许多问题相比，自动插入“fn”的功能非常简单。

# javascript - 检查前 3 个或 4 个后，电话 ReGex 也接受字母

> ID：15990095
> 
> 赞同：0
> 
> 时间：2013-04-13T16:29:01.613
> 
> 标签：javascript, regex, phone-number

我在堆栈溢出中发现了这个很棒的正则表达式，并添加了我的手机验证所需的其他格式。但现在我被要求允许以下内容：

```
(555)YOU-RULE
(555) MEI-YOUN
(555)YOURULE
555YOURULE
555 YOU RULE
555-YOU-RULE 
```

上面的所有内容都带有 1。鉴于我在下面没有字母数字的解决方案，我不确定如何做到这一点

只有数字：

```
 var formats = "(999)999-9999|999-999-9999|(999) 999-9999|1(999) 999-9999|1(999)999-9999|999 999 9999|999.999.9999|1.999.999.9999|9999999999";
  var r = RegExp("^(" +
       formats
         .replace(/([\(\)])/g, "\\$1")
         .replace(/9/g,"\\d") +
       ")$");
    phoneOK = r.test(phone); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:46:58.977

有更好的方法可以做到这一点，但对于那些不熟悉正则表达式的人来说不太容易理解。所以如果你想继续使用这种方法，你应该首先了解这里发生了什么。

您正在将自定义语法转换为正则表达式，您需要关注的是`9`您要转换为任何数字，您需要允许它是任何数字或字母。

这种转换发生在第 5 行：

```
.replace(/9/g,"\\d") + 
```

`\d`是任何数字的术语，所以我们必须让它表示任何数字或字母。最简单的方法可能是将其更改为`[\dA-Z]`. 我在这里假设您只需要大写字母，如果您还想要小写字母，请将其更改为: `[\dA-Za-z]`。

```
.replace(/9/g,"[\\dA-Z]") + 
```

但是，查看您的示例，您似乎也只需要前三位数字。这将需要一个新规则。让我们调用它`0`并相应地更新格式：

```
var formats = "(000)999-9999|000-999-9999|(000) 999-9999|1(000) 999-9999|1(00)999-9999|000 999 9999|000.999.9999|1.000.999.9999|0009999999"; 
```

现在在第 5 行之后添加转换：

```
.replace(/0/g,"\\d") + 
```

您会注意到它与旧的第 5 行相同。

所以我们总共得到：

```
var formats = "(000)999-9999|000-999-9999|(000) 999-9999|1(000) 999-9999|1(00)999-9999|000 999 9999|000.999.9999|1.000.999.9999|0009999999";
var r = RegExp("^(" +
   formats
     .replace(/([\(\)])/g, "\\$1")
     .replace(/9/g,"[\\dA-Z]")
     .replace(/0/g,"\\d") +
   ")$");
phoneOK = r.test(phone); 
```

# java - 如何自定义 android 默认类（datepicker、numpicker 等）

> ID：15990096
> 
> 赞同：1
> 
> 时间：2013-04-13T16:29:01.630
> 
> 标签：java, android, class, datepicker

我想为 android 制作一个自定义日期选择器，我需要`datepicker.class`在`android.widget package`. 事实上，我想更改太阳回历的年份和**月份** 。

`datepicker.java`我在[http://alvinalexander.com/java/jwarehouse/android/core/java/android/widget/DatePicker.java.shtml](http://alvinalexander.com/java/jwarehouse/android/core/java/android/widget/DatePicker.java.shtml)中找到了源代码 - 但我不知道如何更改并用默认的 android 类替换它. 有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T23:03:58.757

这样做的肮脏方法是复制 datepicker 类的源代码，并将其重命名/修改为您自己的回历日历类。然后，您可以导入或扩展这个新类以使用您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T09:07:01.253

您可以使用在其上实现 jalali 日期的自定义视图 [https://github.com/alibehzadian/PersianDatePicker](https://github.com/alibehzadian/PersianDatePicker) 您可以复制其上的类、布局、值并将它们粘贴到您的项目中，现在您有了 jalali 日期 jsut 的日期选择器按照提供的链接上的使用说明进行操作

# c# - 可取消的后台工作人员，但不违反 SRP

> ID：15990097
> 
> 赞同：1
> 
> 时间：2013-04-13T16:29:05.553
> 
> 标签：c#, .net, backgroundworker, single-responsibility-principle

在`backgroundworker`. 由于（[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)），测量不应该**知道**它正在另一个线程中运行。`SRP`

让我们考虑一下这个例子：

```
void MeasurementWorker(object sender, DoWorkEventArgs e)
{
   Measurement measurement = new Measurement();
   measurement.Execute();
} 
```

如何允许取消测量这样的模式？

编辑：`Measurement.Execute`现在是长期运行的测量方法，它应该是可以取消的，但它不`SRP`应该与线程上下文相冲突。例如在没有线程上下文的情况下进行一些测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:58:27.937

就像我在评论中所说的那样，我会使用 TPL 来解决这个问题。这是一个在不违反 SRP 的情况下允许取消的解决方案：

将 .NET Framework Ba​​ckgroundWorker 包装在您自己的实现和接口 ICancellable 的类中，如下所示：

```
public interface ICancellable
{
    bool CancellationPending {get;}
}

public class BackgroundWorkerWrapper : ICancellable
{
    private BackgroundWorker _realWorker;

    public BackgroundWorkerWrapper(BackgroundWorker realWorker)
    {
        _realWorker = realWorker;
    }

    public bool CancellationPending 
    {
        get { return _realWorker.CancellationPending; }
    }
} 
```

在您的 DoWork 处理程序中执行以下操作：

```
void MeasurementWorker(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    ICancellable cancellable = new BackgroundWorkerWrapper(worker);
    Measurement lastMeasurement = new Measurement();
    lastMeasurement.Execute(cancellable);
} 
```

现在在您的测量中，您可以使用 CancellationPending 属性检查是否以干净的方式请求取消。

你说的话？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:31:47.003

如果你希望你的测量处理是可取消的，你必须让它知道某种取消标志。另一种方法是以不合规的方式取消它（中止），但这是非常不鼓励的，因为您可能会在重要的事情中间停止处理，而没有机会清理或释放资源。

而不是`BackgroundWorker`您可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，然后代码可能如下所示：

```
CancellationTokenSource cts = new CancellationTokenSource();
Task tsk = Task.Factory.StartNew(() =>
                                      {
                                          Measurement measurement = new Measurement();
                                          measurement.Execute(cts.Token);
                                      }, 
                                      cts.Token, 
                                      TaskCreationOptions.LongRunning,
                                      TaskScheduler.Default); 
```

哪里`Execute`可能看起来像这样：

```
public void Execute(CancellationToken ct)
{
    ct.ThrowIfCancellationRequested();

    while (true)
    {
        // processing
        // ...

        // need to cancel?
        ct.ThrowIfCancellationRequested();
    }
} 
```

要取消在主线程中调用它：

```
cts.Cancel(); 
```

你会得到`TaskCancelledException`，但这是意料之中的。

或者，如果您不希望出现异常，请使用以下版本的`Execute`. 它并不严格按照 TPL 指南，但如果您不使用条件[延续](http://msdn.microsoft.com/en-us/library/dd321405.aspx)，它会正常工作。

```
public void Execute(CancellationToken ct)
{
    if (ct.IsCancellationRequested)
        return;

    while (true)
    {
        // processing
        if (ct.IsCancellationRequested)
            return;
    }
} 
```

# angularjs - angularjs路由单元测试

> ID：15990102
> 
> 赞同：41
> 
> 时间：2013-04-13T16:29:23.920
> 
> 标签：angularjs, unit-testing, jasmine, angularjs-routing

正如我们在[http://docs.angularjs.org/tutorial/step_07](http://docs.angularjs.org/tutorial/step_07)中看到的，

```
angular.module('phonecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});
}]); 
```

路由测试建议使用e2e测试，

```
 it('should redirect index.html to index.html#/phones', function() {
    browser().navigateTo('../../app/index.html');
    expect(browser().location().url()).toBe('/phones');
  }); 
```

但是，我认为“$routeProvider”配置是使用单个函数 function($routeProvider) 完成的，我们应该能够在不涉及浏览器的情况下进行单元测试，因为我认为路由功能不需要浏览器 DOM。

例如，
当 url 为 /foo 时，templateUrl 必须为 /partials/foo.html 且控制器为 FooCtrl
当 url 为 /bar 时，templateUrl 必须为 /partials/bar.html 且控制器为 BarCtrl

它是一个简单的功能IMO，它也应该在一个简单的测试，一个单元测试中进行测试。

我用谷歌搜索并搜索了这个 $routeProvider 单元测试，但还没有运气。

我想我可能会从这里借一些代码，但还不能，[https://github.com/angular/angular.js/blob/master/test/ng/routeSpec.js](https://github.com/angular/angular.js/blob/master/test/ng/routeSpec.js)。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-07-31T16:40:08.143

为什么不断言路由对象配置正确？

```
it('should map routes to controllers', function() {
  module('phonecat');

  inject(function($route) {

    expect($route.routes['/phones'].controller).toBe('PhoneListCtrl');
    expect($route.routes['/phones'].templateUrl).
      toEqual('partials/phone-list.html');

    expect($route.routes['/phones/:phoneId'].templateUrl).
      toEqual('partials/phone-detail.html');
    expect($route.routes['/phones/:phoneId'].controller).
      toEqual('PhoneDetailCtrl');

    // otherwise redirect to
    expect($route.routes[null].redirectTo).toEqual('/phones')
  });
}); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-04-13T22:27:36.887

我认为您应该能够像这样测试 $routeProvider ：

```
angular.module('phonecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});
}]);

it('should test routeProvider', function() {
  module('phonecat');

  inject(function($route, $location, $rootScope) {

    expect($route.current).toBeUndefined();
    $location.path('/phones/1');
    $rootScope.$digest();

    expect($route.current.templateUrl).toBe('partials/phone-detail.html');
    expect($route.current.controller).toBe(PhoneDetailCtrl);

    $location.path('/otherwise');
    $rootScope.$digest();

    expect($location.path()).toBe('/phones/');
    expect($route.current.templateUrl).toEqual('partials/phone-list.html');
    expect($route.current.controller).toBe(PhoneListCtrl);

  });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-22T09:02:22.673

结合前面的两个答案，如果您想将路由器测试为一个成功路由到它应该路由的黑匣子（而不是控制器本身配置），无论路由可能是：

```
// assuming the usual inject beforeEach for $route etc.
var expected = {};
it('should call the right controller for /phones route', function () { 
    expected.controller = $route.routes['/phones'].controller;
    $location.path('/phones');
    $rootScope.$digest();
    expect($route.current.controller).toBe(expected.controller);
});

it('should redirect to redirectUrl from any other route', function () {
    expected.path = $route.routes[null].redirectTo;
    $location.path('/wherever-wrong');
    $rootScope.$digest();
    expect($location.path()).toBe(expected.path);
}); 
```

# facebook - 将 Facebook 访问令牌存储在数据库中是否有意义？

> ID：15990106
> 
> 赞同：2
> 
> 时间：2013-04-13T16:29:42.507
> 
> 标签：facebook, web

我最近不得不将 Facebook 身份验证集成到现有应用程序中，并拥有自己的用户概念。我创建了一个单独的类，称为 FacebookAccount，它连接到我系统中的特定用户。

我最初是保存访问令牌并检查它们，而不是 Facebook id。然后，我偶然意识到访问令牌实际上是多么不可靠。它们会随着时间而改变，而 Facebook id 应该始终保持不变。

问题来了——我是否应该关心存储访问令牌？如果它们真的是瞬态的，比如某种会话 id，时不时地在变化，那么存储它们根本没有意义，对吧？我只需要 Facebook id。我将简单地将访问令牌保留在浏览器会话中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:34:06.973

如果需要，您可以将其用于离线访问。一些应用程序（尤其是移动应用程序）即使在离线时也需要 Facebook 登录（例如 Spotify）。它们可能会存储令牌和到期日期，并允许您在未连接到互联网的情况下使用该应用程序。

在您的情况下，存储它并在获得旧令牌后用新令牌替换它可能是有意义的，这样您就可以重用 API 并从数据库中传递它。

# php - 选择语句中的 PHP SQL 查询错误

> ID：15990108
> 
> 赞同：-4
> 
> 时间：2013-04-13T16:29:46.400
> 
> 标签：php

```
$id = $_POST['idn'];
$con=mysqli_connect("localhost","root","xyz","patient");
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
$query = "SELECT count(*) FROM record WHERE ID='$id'";
$count = mysql_result(mysql_query($query),0);
if($count > '0')
{
id exist
}
else
{
add id & record 
} 
```

这里的错误是什么，它不检查 ID 是否存在并添加重复的 ID，其中 ID 为 RC50001 RC50002...... ID 定义为表中的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:33:12.677

不要使用`LIKE`，使用`=`，您正在寻找完全匹配的对象，`ID`因此`=`在这种情况下使用正确的比较运算符：

```
$query = "SELECT * FROM `record` WHERE `ID` = '$id' LIMIT 0 , 300"; 
```

`$id`在将其插入查询之前，您应该验证其格式是否符合您的预期。此外，您应该使用[`MySQLi`](http://www.php.net/manual/en/mysqli.construct.php)or[`PDO`](http://www.php.net/manual/en/pdo.construct.php)扩展而不是那个`mysql`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:38:39.930

如果您只是检查 ID 是否已在数据库中使用，则仅返回 ID 已使用的次数而不是返回每条匹配记录会更有效。

注意：这是使用 MySQLi，因为 mysql_* 函数将在下一个 PHP 版本中被弃用（已经在 beta 中）。您需要将所有`mysql_*()`功能更新为`mysqli_*()`.

```
$query = "SELECT COUNT(*) AS IDCount FROM `record` WHERE `ID` = '$id'";
$result = mysqli_query($query) or die("Couldn't execute ID check query.");
$row = mysqli_fetch_assoc($result);

if($row['IDCount'] > 0)
{
    echo "ID already exists<br />";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T18:51:30.600

我认为你可以使用 while 循环在数据库中搜索匹配的 id，而不是单独使用 if-else 语句。

样本 ：

```
if($row != 0)
{ 
  while ($row = mysql_fetch_assoc($query)
  {
     $row['id'];
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T16:37:09.970

让您的代码回显您的查询，然后在 MySQL 工作台或 PHPMyAdmin 等工具中对其进行测试。

如果您正在寻找一个ID，那将是准确的。您要小心在语句中使用 LIKE。例如。如果有人查找 id='1' 它会返回一条记录。id LIKE '%1%' 返回所有包含“1”的记录。

这安全多了。特别是因为根据您的示例，您没有对 ID 做任何事情。

```
<?php
  $query = "SELECT count(*) FROM record WHERE ID='$id'";
  $count = mysql_result(mysql_query($query),0);
  if($count > '0'){
    echo "ID already exists<br>";
  } else {
    echo($query);        
    die();
  }  
?> 
```

我没有测试过，但*应该*使用类似这样的东西，或者 MySQLi 语句，但你需要学习这种风格的编码方式。

```
<?php
    try {
        $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
        $query = "SELECT count(*) FROM record WHERE ID='$id'";
                    //Checking for no results.
        if(!empty($dbh->query($query))){
          echo "ID already exists.";
        } else {
          echo "ID does not exist.";
        }  
        $dbh = null;
    } catch (PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }

?> 
```

哦，是的，记住：

> **警告：**如果您的应用程序没有捕获从 PDO 构造函数抛出的异常，则 zend 引擎采取的默认操作是终止脚本并显示回溯。此回溯可能会显示完整的数据库连接详细信息，包括用户名和密码。您有责任明确地（通过 catch 语句）或通过 set_exception_handler() 隐式地捕获此异常。

# java - 将图像文件插入 MySql DB

> ID：15990111
> 
> 赞同：0
> 
> 时间：2013-04-13T16:30:01.433
> 
> 标签：java, mysql, jsp

我正在尝试通过从用户获取文件来将图像文件插入 MySql DB。在插入文件时，代码工作正常，但在将文件转换为 Blob 格式时，我得到一个`java.io.FileNotFoundException`这是我的 JSP 代码：

```
File img= new File(request.getParameter("rfile"));
String accno=request.getParameter("raccno");
String reportname=request.getParameter("reportname");
String date=request.getParameter("rdate");
PreparedStatement pt2=null;
pt2= connection.prepareStatement("insert into reportuser(Account_No,date,report_name,report_image)"+ "values(?,?,?,?)");
pt2.setString(1, accno);
pt2.setString(2, date);
pt2.setString(3, reportname);
pt2.setBinaryStream(4, (InputStream) fiss, (int) (img.length()));
pt2.executeUpdate();InputStream fiss=new FileInputStream(img); 
```

异常报告如下：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /add_report.jsp at line 12
9: String reportname=request.getParameter("reportname");
10: String date=request.getParameter("rdate");
11: File img= new File(request.getParameter("rfile"));
12: InputStream fiss=new FileInputStream(img); 
```

紧随其后的是：

```
root cause
java.io.FileNotFoundException: logo.png (The system cannot find the file specified)
    java.io.FileInputStream.open(Native Method)
    java.io.FileInputStream.<init>(FileInputStream.java:138)
    org.apache.jsp.add_005freport_jsp._jspService(add_005freport_jsp.java:78)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:53:22.337

您不能在 Web 应用程序中执行此操作：

```
File img = new File(request.getParameter("rfile")); 
```

从异常消息中，您可以看到您的应用程序正在尝试在其当前文件夹中查找文件。这与您添加的图像的位置不同，尤其是当 Web 应用程序运行在与 Web 浏览器不同的计算机上时。

澄清：如果您的 webapp 与您的 web 浏览器在同一台计算机上运行，​​则提交完整文件路径 ( `c:\my_images\photo_of_me.jpg`) 将起作用，因为 JVM 可以访问它。但只能通过完整的文件名。如果您的 webapp 在另一台计算机上，添加文件的唯一方法是使用 Commons FileUpload 接受文件上传。

您可能打算做的是“上传”图像并将其保存到数据库中。为此，您需要使用[Apache Commons FileUpload](http://commons.apache.org/proper/commons-fileupload/)。

# windows - Cmd 树到 Json

> ID：15990113
> 
> 赞同：2
> 
> 时间：2013-04-13T16:30:21.143
> 
> 标签：windows, json, command-line, tree

我有一个带有文件夹结构的文本文件：

```
+---A Momentary Lapse of Reason
+---A Saucerful of Secrets
+---Animals
+---Atom Heart Mother
+---Delicate Sound Of Thunder
+---Echoes- The Best of Pink Floyd
|   +---Echoes- The Best of Pink Floyd Disc 1
|   \---Echoes- The Best of Pink Floyd Disc 2
+---Is There Anybody out There- The Wall- Live 1980-1981 Disc 1
+---Is There Anybody out There- The Wall- Live 1980-1981 Disc 2
\---Works 
```

`windows CMD`我是通过使用`tree`命令收到的。我想知道是否有一种简单的方法可以将此结构转换为`json`?

对于这样的事情，手动执行并不难，但我需要为`12TB`文件夹执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:20:07.890

好的，我对 JSON 不太熟悉。我查看了[这个](https://stackoverflow.com/q/11194287/2098699)线程并编写了一个批处理脚本。请让我知道，如果我可以改进。

```
@echo off &setlocal
if "%~1"=="" (set "root=.") else set "root=%~1"
set "pre0=                                    "

pushd %root%
echo(data = [
call:dirtree "%CD%" "1" "1"
popd
echo(];
goto:eof

:dirtree
setlocal
call set "pre=%%pre0:~-%~2%%
set /a ccount=%~3
set /a tcount=%~2+2
set /a dcount=0
for /d %%i in (*) do set /a dcount+=1
echo( %pre%{
echo(  %pre%"type": "folder",
echo(  %pre%"name": "%~nx1",
set "fpath=%~f1"
set "fpath=%fpath:\=/%"
echo(  %pre%"path": "%fpath%",
echo(  %pre%"childno": %ccount%,
if %dcount% equ 0 echo(  %pre%"subchilds": %dcount%
if %dcount% gtr 0 (
    echo(  %pre%"subchilds": %dcount%,
    echo(  %pre%"children": [
    for /d %%i in (*) do (
        for /f %%j in ('call echo "%%dcount%%"') do (
            cd "%%i"
            call:dirtree "%%i" "%tcount%" "%%j"
            cd ..
        )
        set /a dcount-=1
    )
    echo(  %pre%]
)
if %ccount% equ 1 (echo  %pre%}) else echo( %pre%},
endlocal
goto:eof 
```

用法：`tree2json [startfolder] [>file.txt]`

# android - 通过相机按钮唤醒手机

> ID：15990119
> 
> 赞同：0
> 
> 时间：2013-04-13T16:31:10.433
> 
> 标签：android

我想通过相机按钮唤醒我的手机，因为我的电源按钮太小了。

我在这里找到了一些获取相机按钮事件的代码：

```
public class CameraReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if (Intent.ACTION_CAMERA_BUTTON.equals(intent.getAction())) {
        // Wake up phone
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        WakeLock wakeLock = pm.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "TAG");
        wakeLock.acquire();

    }
} 
```

}

我是不是走错路了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:41:54.997

在您的方法中使用[abortBroadcast()](http://developer.android.com/reference/android/content/BroadcastReceiver.html#abortBroadcast%28%29)`onReceive()`方法。

在清单中添加

```
<receiver android:name=".CameraReceiver" >
    <intent-filter android:priority="10000">         
        <action android:name="android.intent.action.CAMERA_BUTTON" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>            
</receiver> 
```

[您将在此答案](https://stackoverflow.com/a/6543792/931982)中看到详细信息

# javascript - 图像编辑器移动设备上的织物

> ID：15990120
> 
> 赞同：2
> 
> 时间：2013-04-13T16:31:11.613
> 
> 标签：javascript, html, canvas, fabricjs

我想在 javascript 中制作一个简单的图像编辑器（拖动、旋转、调整大小）。它必须在平板电脑和手机上工作。

面料似乎很快。唯一的问题是旋转/调整大小不直观（有时您单击并没有任何反应）。有谁知道在 Fabric 中有一个解决方案。

或者有没有其他快速的平台来创建一个快速的编辑器

[织物示例旋转调整大小](http://fabricjs.com/bounding-rectangle/)

# angularjs - 从控制器将对象传递给 angularjs 指令

> ID：15990122
> 
> 赞同：9
> 
> 时间：2013-04-13T16:31:27.393
> 
> 标签：angularjs, angularjs-directive

试图让我了解 AngularJS 指令。我需要将一个完整的对象从我的主控制器传递给指令。请参阅下面的代码和 jsfiddle：http: [//jsfiddle.net/graphicsxp/Z5MBf/4/](http://jsfiddle.net/graphicsxp/Z5MBf/4/)

```
<body ng-app="myApp">
<div ng-controller="MandatCtrl">
    <div person myPerson="mandat.person"></div>

    <span>{{mandat.rum}}</span>
    <span>{{mandat.person.firstname}}</span>

</div> 
```

和脚本：

```
var myApp = angular.module("myApp", []);

myApp.controller("MandatCtrl", function ($scope) {
$scope.mandat = { rum: "15000", person: { id: 1408, firstname: "sam" } };
});

myApp.directive("person", function () {     
return {
    scope: {
        myPerson: "="
    },
    template: 'test: <div ng-model="myPerson"><input type="text" ng-model="firstname" /></div>'
}
}); 
```

好的，绑定适用于mandat.rum 和mandat.person.firstname。

但是，我试图将 mandat.person 传递给指令，但它不起作用。我知道我一定做错了什么，问题是什么？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T16:55:55.340

请参阅下面的工作副本

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>

  <link rel="stylesheet" href="style.css">
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
      <span>{{mandat.rum}}</span>
      <span>{{mandat.person.firstname}}</span>
    <input type="text" ng-model="mandat.person.firstname" />
    <my-directive mandateperson="mandat.person" >

      </my-directive>
    <script type="text/javascript">
        var app = angular.module('plunker', []);

        app.controller('MainCtrl', function ($scope) {
            $scope.mandat = { name: "John", surname: "Doe", person: { id: 1408, firstname: "sam" } };
        });

        app.directive('myDirective', function () {
            return {
                restrict: 'E',
                template: "<div><span>{{mandateperson.id}}<span><input type='text' ng-model='mandateperson.firstname' /></div>",
                replace: true,
                scope: { mandateperson: '=' }
                }
            }
        )
    </script>
</body>
</html> 
```

# iphone - 如何向 iOS 应用程序添加新字符串以进行本地化？

> ID：15990124
> 
> 赞同：2
> 
> 时间：2013-04-13T16:31:35.227
> 
> 标签：iphone, ios, localization

我已经本地化了我的应用程序并设置了 Localization.string 文件。

现在我想添加新的字符串，如何让相应的文件自动获取新的字符串？还是我必须手动添加它们？

只是不确定我应该如何组织我的翻译人员，以便能够看到有新的字符串要翻译，而不必手动跟踪它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:26:35.267

我不认为有一种自动的方法来管理它们。

我们所做的是在英文资源字符串的末尾添加“//New”或“//Changed”，我们的翻译人员在添加其他无数版本时将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:59:41.677

我们实际上在添加项目的日期上放置了一个 \ 标记，以便让翻译人员知道什么是新的以及何时添加。

我们要做的另一件事是利用一个工具，该工具使用 Google 的 api 服务将我们的英语 localizable.strings 文件自动翻译成目标语言。虽然 Google 的翻译并不完美，但它们对我们的翻译人员来说是一个很好的开始。这确实启动了我们的翻译过程。 [链接到 Apple Store 应用程序](https://itunes.apple.com/us/app/generate-localizable-strings/id572287184?ls=1&mt=12)。

# android - Android：包含的布局不填充父宽度

> ID：15990125
> 
> 赞同：0
> 
> 时间：2013-04-13T16:31:44.397
> 
> 标签：android, include

我有一个主要布局，其中包含两个内部布局。我将包含的布局的宽度指定为 match_parent 但它们不占据父级的整个宽度。

我可能在每个内部 LinearLayout 中有更多组件，例如三个左按钮和三个右按钮。下面是我的代码的简化示例

请参见下面的示例： main_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="5dp"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.95" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_weight="0.8"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp" >

            <include layout="@layout/child_layout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_weight="0.2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp" >

            <include layout="@layout/child_layout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </TableRow>
    </TableLayout>

    <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:layout_weight="0.05"
         android:gravity="center"
         android:orientation="vertical">  

        <Button
           android:layout_width="80dp"
           android:layout_height="40dp"
           android:textSize="14sp"
           android:textStyle="bold"
           android:text="Bottom" />
    </LinearLayout>

</LinearLayout> 
```

child_layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/leftLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <Button
            android:layout_width="80dp"
            android:layout_height="40dp"
            android:textSize="14sp"
            android:textStyle="bold"
            android:text="Left" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/rightLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

       <Button
           android:layout_width="80dp"
           android:layout_height="40dp"
           android:textSize="14sp"
           android:textStyle="bold"
           android:text="Right" />
    </LinearLayout>

</RelativeLayout> 
```

请注意，图像中的左右按钮是重叠的。![在此处输入图像描述](https://i.stack.imgur.com/lrZWC.png). 如何扩展包含的布局以填充父级的整个宽度，以便左右按钮出现在左右两侧。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:37:35.677

在您的`child` `layout`中，取出您的`LinearLayouts`然后将它们分配给父母的左右

```
 <Button
        android:layout_width="80dp"
        android:layout_height="40dp"
        android:textSize="14sp"
        android:textStyle="bold"
        android:text="Left"
        android:layout_alignParntLeft="true" />

   <Button
       android:layout_width="80dp"
       android:layout_height="40dp"
       android:textSize="14sp"
       android:textStyle="bold"
       android:text="Right" 
       android:layout_alignParntRight="true"/> 
```

如果我明白你想要什么，那么这应该可以。这将使它们位于左侧和右侧，但取决于您是否希望它们位于同一“行”或彼此上方或下方，那么您可以设置其他属性

[相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)

`LinearLayout`在需要时可以非常简单和有用，但使用`RelativeLayout`can 经常消除嵌套`LinearLayout`的 s 和无用`ViewGroup`的 s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:44:43.767

您还可以摆脱几个 LinearLayouts 和 RelativeLayout 并改为这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
       android:layout_width="80dp"
       android:layout_height="40dp"
       android:textSize="14sp"
       android:textStyle="bold"
       android:text="Left" />

    <LinearLayout
       android:layout_width="0dp"
       android:layout_height="wrap_content"
       android:layout_weight="1"
       android:orientation="vertical" />

    <Button
       android:layout_width="80dp"
       android:layout_height="40dp"
       android:textSize="14sp"
       android:textStyle="bold"
       android:text="Right" />
</LinearLayout> 
```

# powershell - 从另一个函数中使用“0”参数调用“开始”的 PowerShell 异常

> ID：15990133
> 
> 赞同：2
> 
> 时间：2013-04-13T16:33:11.917
> 
> 标签：powershell

我正在编写我的第一个 Powershell 脚本并且来自 C# 我很困惑，我的代码如下：

```
function Run(
[string] $command,
[string] $args,
[Ref] [string] $stdout,
[Ref] [string] $stderr
)
{  
    $p1 = New-Object System.Diagnostics.Process
    $p1.StartInfo = New-Object System.Diagnostics.ProcessStartInfo;
    $p1.StartInfo.FileName = $command
    $p1.StartInfo.Arguments = $arguments
    $p1.StartInfo.CreateNoWindow = $true
    $p1.StartInfo.RedirectStandardError = $true
    $p1.StartInfo.RedirectStandardOutput = $true
    $p1.StartInfo.UseShellExecute = $false

    $p1.Start()
    $p1.WaitForExit()
}

$p = New-Object System.Diagnostics.Process
$p.StartInfo = New-Object System.Diagnostics.ProcessStartInfo;
$p.StartInfo.FileName = "ping"
$p.StartInfo.Arguments = "142.553.22242.2"
$p.StartInfo.CreateNoWindow = $true
$p.StartInfo.RedirectStandardError = $true
$p.StartInfo.RedirectStandardOutput = $true
$p.StartInfo.UseShellExecute = $false

$p.Start()
$p.WaitForExit()
$code = $p.ExitCode
$stderr = $p.StandardError.ReadToEnd()
$stdout = $p.StandardOutput.ReadToEnd()

Run("ping","208.67.222.222","","") 
```

$p.Start() 有效，但由于某种原因，传递给 Run 函数的参数被忽略并且 $p1 失败。请问我做错了什么？

```
Exception calling "Start" with "0" argument(s): "The system cannot find the file specified"
At C:\Users\Administrator\Desktop\logtofile.ps1:27 char:5
+     $p1.Start()
+     ~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : Win32Exception

Exception calling "WaitForExit" with "0" argument(s): "No process is associated with this object."
At C:\Users\Administrator\Desktop\logtofile.ps1:28 char:5
+     $p1.WaitForExit()
+     ~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : InvalidOperationException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-25T20:28:35.583

我没有尝试从函数内部启动进程，但我遇到了同样的错误。我花了几分钟才意识到这是我最喜欢的浪费时间的方法之一：UAC 陷阱。我没有使用“以管理员身份运行”启动 PowerShell。您必须具有管理员权限并运行代码以启动/停止/修改您不拥有的进程，并且此错误消息在这方面完全没有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T17:22:48.210

您必须按如下方式调用 run：

```
Run "ping","208.67.222.222","","" 
```

放在括号之间将其作为单个数组参数传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T04:04:12.540

```
function Demo  {
    param (
        $fileName,$Arguments
    )

    $p = New-Object System.Diagnostics.Process
    $p.StartInfo = New-Object System.Diagnostics.ProcessStartInfo
    $p.StartInfo.FileName = $fileName
    $p.StartInfo.RedirectStandardError = $true
    $p.StartInfo.RedirectStandardOutput = $true
    $p.StartInfo.UseShellExecute = $false
    $p.StartInfo.Arguments = $Arguments
    $p.Start() | Out-Null
    $p.WaitForExit()

    $stdout = $p.StandardOutput.ReadToEnd()
    $stderr = $p.StandardError.ReadToEnd()
    Write-Host "stdout: $stdout"
    Write-Host "stderr: $stderr"
    Write-Host "exit code: " + $p.ExitCode
}

Demo "getmac" " /v" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-22T13:08:07.470

我在服务上的 start() 函数中出现此错误，因为同事在 Windows 服务窗口中将该服务设置为“禁用”。将其设置回“手动”修复它。

# c# - 以新形式加载搜索结果

> ID：15990138
> 
> 赞同：0
> 
> 时间：2013-04-13T16:33:58.703
> 
> 标签：c#, forms, search

我一直在努力理解`ArrayList`，但我的搜索功能的最后一部分遇到了问题。

我有一个数组列表设置为从`StreamReader`. 数据包含许多与团队有关的属性，例如他们的名称和徽标的图像路径。

然后，我创建了一个搜索，该搜索通过数组列表扫描用户通过文本框输入的特定字符串。

然后，我创建了一个 if 语句，如果该搜索返回 true，则打开一个新表单。

我希望新表单根据搜索的数据加载团队的每个属性。例如，如果我搜索“Liverpool”，它会找到经理姓名、体育场名称以及新表格中搜索的名称。我不知道该怎么做。

我真正能想到的唯一工具是`load.event`过程，但我找不到很多关于将它链接到数组列表的信息。

```
 private void btn_Search_Click(object sender, EventArgs e)
    {
        foreach (Object obj in allTeams)
        {
            Team = (Team)obj;
            if (team.teamName.ToUpper() == nameToMatch.ToUpper()) //case insensitive search.
            {
                FormTeam frmTeam = new FormTeam(Team); //windows form that displays team info.
                frmTeam.Visible = true;
                break; 
            }
        }

    } 
```

以上是我的搜索功能。（我没有使用过`List<T>`，因为要求所有内容都必须存储在`ArrayList`.）

我想要实现的目标是可能的吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:47:18.013

首先，您在那里缺少一个变量名。我想你的意思是

```
foreach (Object obj in allTeams)
    {
        Team t = (Team)obj;
        if (t.teamName.ToUpper() == nameToMatch.ToUpper()) //case insensitive search.
        {
            FormTeam frmTeam = new FormTeam(t); //windows form that displays team info.
            frmTeam.Visible = true;
            break; 
        }
    } 
```

但是为什么不使用类型化的泛型 List，不必进行所有这些愚蠢的转换。

但是您的问题是“我怎样才能将搜索到的内容传递给新表单”，对吗？我会将 FormTeam 的构造函数更改为类似的东西`FormTeam(Team t, string nameToMatch)`，并将值本地保存在 TeamForm 中，以便您可以进行突出显示或其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:41:10.877

如果您需要搜索诸如 teamName 之类的字符串，最好使用 a`Dictionary<string,Team>`而不是a 之类的东西`Arraylist`。然后你就可以做

```
Team t = dic[nameToMatch.ToUpper()]; 
```

其中 dic 是`Dictionary<string,Team>`包含所有团队的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:45:49.523

此外，您可能希望在 ArrayList 上使用 Linq

```
foreach(var team in allTeams.OfType<Team>())
{
    if(team.TeamName.Equals(nameToMatch, StringComparison.InvariantCultureIgnoreCase))
    { 
      frmTeam = new FormTeam(Team); 
      Aplication.Run(frmTeam); // or frmTeam.Show();
      break;
    }
} 
```

在 TeamForm 类的构造函数中，您只需将 TeamObject 中的所有值分配给表单上的字段。

```
public FormTeam (Team team)
{
    teamName.Text = team.TeamName;   // label or something
    teamPlayerCount.text = team.PlayerCount.ToString();
    ...

} 
```

# jpa - 如何使 CriteriaBuilder 加入自定义“开启”条件？

> ID：15990141
> 
> 赞同：36
> 
> 时间：2013-04-13T16:34:04.070
> 
> 标签：jpa, jpa-2.0, criteria-api

我想使用 CriteriaBuilder 查询我加入 2 个表的位置。在 MySQL 中，我尝试进行的查询如下所示：

```
SELECT * FROM order
LEFT JOIN item
ON order.id = item.order_id
AND item.type_id = 1 
```

我想获得所有订单，如果他们有 #1 类型的项目，我想加入这个项目。但是，如果没有找到 #1 类型的项目，我仍然想获得订单。我不知道如何用 CriteriaBuilder 来做这个。我所知道的只是：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Order> cq = cb.createQuery(Order.class);
Root<Order> order = cq.from(Order.class);
Join<Order, Item> item = order.join(Order_.itemList, JoinType.LEFT);
Join<Item, Type> type = order.join(Item_.type, JoinType.LEFT);
cq.select(order);
cq.where(cb.equal(type.get(Type_.id), 1)); 
```

这个查询被破坏了，因为它在 MySQL 中产生了这样的结果：

```
SELECT * FROM order
LEFT JOIN item
ON order.id = item.order_id
WHERE item.type_id = 1 
```

结果将仅包含类型为#1 的订单。没有的订单被排除在外。如何使用 CriteriaBuilder 创建第一个示例中的查询？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-06-23T14:03:15.670

可以使用方法`2.1`从**JPA**的版本开始`on``Join<Z, X> on(Predicate... restrictions);`

方法如下：

```
Root<Order> order = cq.from(Order.class);
Join<Order, Item> item = order.join(Order_.itemList, JoinType.LEFT);
item.on(cb.equal(item.get(Item_.type), 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:57:17.233

我认为这与这个问题中提出的问题相同。看起来在 CriteriaBuilder 中是不可能的。在 Hibernate Criteria API 中是可能的，但这可能对您没有帮助。

[JPA Criteria API：LEFT JOIN 上的多个条件](https://stackoverflow.com/questions/11081955/jpa-criteria-api-multiple-condition-on-left-join/11092067#11092067)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T18:52:52.833

我知道这个问题已经提出了很长时间，但最近遇到了同样的问题，我从 Oracle 论坛找到了这个解决方案，我复制并粘贴了以防万一链接不再可用。

> MiguelChillitupaArmijos 29-abr-2011 1:41 (en respuesta a 840578) 认为你应该使用类似的东西：

```
em.createQuery("SELECT DISTINCT e.Id" +
                    " from Email e " +
                    " left join e.idEmailIn e2 *with* e2.responseType = 'response'" +
                    "     where e.type = 'in' and e.responseMandatory = true").getSingleResult(); 
```

这是链接。

[JPA 标准：带有 AND 条件的 LEFT JOIN](https://community.oracle.com/thread/2179735)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T22:07:20.750

如果您将 Hibernate 3.6 与 JPA 2.0 一起使用，则有一个解决方法。这不是更好的解决方案，但它对我来说非常完美。

我已经用@Where hibernate 注释复制了实体。这意味着每次你使用这个实体的连接时，hibernate 都会在生成的 SQL 的连接语句上添加额外的条件。

例如，最初我们有以下示例：

```
@Entity
@Table(name = "PERSON")
public class Person {

    @Id
    @Column(name = "PERSON_ID")
    private Long id;

    @Id
    @Column(name = "PERSON_NAME")
    private String name;

   @OneToMany(mappedBy = "person", fetch = FetchType.LAZY)
   private Set<Address> addresses;

}

@Entity
@Table(name = "ADDRESS")
public class Address {

    @Id
    @Column(name = "ADDRESS_ID")
    private Long id;

    @Id
    @Column(name = "ADDRESS_STREET")
    private String street;

   @ManyToOne
   @JoinColumn(name = "PERSON_ID")
    private Person person;

} 
```

为了在条件加入上添加额外的条件，我们需要复制地址 @Entity 映射，添加 @Where 注释 @Where(clause = "ADDRESS_TYPE_ID = 2")。

```
@Entity
@Table(name = "ADDRESS")
@Where(clause = " ADDRESS_TYPE_ID = 2")
public class ShippingAddress {

    @Id
    @Column(name = "ADDRESS_ID")
    private Long id;

    @Id
    @Column(name = "ADDRESS_STREET")
    private String street;

   @OneToOne
   @JoinColumn(name = "PERSON_ID")
    private Person person;

} 
```

此外，我们需要为新实体添加重复映射关联。

```
@Entity
@Table(name = "PERSON")
public class Person {

    @Id
    @Column(name = "PERSON_ID")
    private Long id;

    @Id
    @Column(name = "PERSON_NAME")
    private String name;

   @OneToMany(mappedBy = "person", fetch = FetchType.LAZY)
   private Set<Address> addresses;

   @OneToOne(mappedBy = "person")
   private ShippingAddress shippingAddress;

} 
```

最后，您可以在您的条件中使用与此特定实体的联接：

```
PersonRoot.join(Person_.shippingAddress, JoinType.LEFT); 
```

Hibernate Snippet SQL 应该是这样的：

```
 left outer join
        address shippingadd13_ 
            on person11_.person_id=shippingadd13_.person_id 
            and (
                shippingadd13_.ADDRESS_TYPE_ID = 2 
            ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T21:10:40.117

在 Hibernate 4.3 版本中支持 ON 子句，任何人都知道在使用 ON 子句进行外部联接时，附加自定义条件的参数索引与现有映射过滤器的索引之间是否存在参数索引问题？

以下面的 Person 实体类为例，假设我正在添加此过滤器以限制地址类型，并且启用过滤器以填充 IN 子句。当我在 ON 子句中添加附加条件（例如使用 'street' 列）时，IN 子句的参数索引将导致问题 [2]。是已知问题吗？

[1] @Filter(name = "addressTypes", condition = "ADDRESS_TYPE in (:supportedTypes)")

[2] 原因：错误 22018：BIGINT 类型的字符串格式无效。私人设置地址；

# sql - SQL 查询未显示正确的数据

> ID：15990143
> 
> 赞同：0
> 
> 时间：2013-04-13T16:34:14.963
> 
> 标签：sql, contains

我有这张桌子：

```
Recipe = (idR, recipeTitle, prepText, cuisineType, mealType)
Ingredient = (idI, ingrDesc)
RecipIngr = (idR*, idI*) 
```

我正在尝试显示包含蜂蜜或芥末成分的 idR 和食谱标题。这是我的查询

```
select idr, recipetitle
from recipe
where idr IN (select idr from recpingr where idi =
(select distinct idr from ingredient where ingrdesc like '%honey%'))
INTERSECT
select idr, recipetitle
from recipe
where idr IN (select idr from recpingr where idi =
(select distinct idr from ingredient where ingrdesc like '%mustard%'))
ORDER BY idr; 
```

由于某种原因，这不会显示正确的数据，我不知道我做错了什么。有什么帮助吗？我的查询有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:43:49.573

像这样的帮助？

```
SELECT r.idr, r.recipetitle
FROM recipe r
INNER JOIN recipingr ring
    ON ring.idr = r.idr
INNER JOIN ingredient ing
    ON ing.idi = ring.idi
WHERE ing.ingrdesc LIKE '%honey%'
OR ingrdesc LIKE '%mustard%'
ORDER BY r.idr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:44:14.567

我认为你过度设计了它。为什么不这样：

```
select idr, recipetitle
from recipe r join recipInbg ri on r.idr = ir.idr
join ingredient i on ri.idI = i.idI
where ingrdesc like '%honey%'
or ingrdesc like '%mustard%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:45:35.963

干得好：

```
select r.idr, r.recipeTitle from recipe r, ingredient i, recipIngr ri
    where r.idR=ri.idR and ri.idI=i.idI and 
    (i.ingrDesc like '%honey%' or i.ingrDesc like '%mustard%') 
```

# c++ - 快速排序实现崩溃

> ID：15990144
> 
> 赞同：0
> 
> 时间：2013-04-13T16:34:19.480
> 
> 标签：c++, algorithm, quicksort

所以我正在实施快速排序，一旦我启动程序就会出错。我认为从逻辑上讲，一切都应该没问题。我认为问题出在交换函数内，因为如果我将其注释掉，它不会崩溃。

```
#include <iostream>

using namespace std;

void swap1(int& x, int& y)
{
    int tmp = x;
    x = y;
    y = x;
}

int partition(int arr[], int cof, int length)
{
    int x = arr[length];
    int j = cof -1;
    for(int i = cof; length-1; i++ )
    {
        if(arr[i] <= x)
        {
            i++;
            swap1(arr[i], arr[j]);

        }
        swap1(arr[i+1], arr[length]);
    }
    return j++;
}

void quick_sort(int arr[], int cof, int length)
{
    if(cof < length)
    {
        int q = partition(arr, cof, length);
        quick_sort(arr,cof, q-1);
        quick_sort(arr,q+1, length);
    }
}

int main()
{
    int arr[]={1, 3, 2, 5, 4};
    quick_sort(arr, 1, 5);
    for(int i = 0; i < 5; i++)
    {
        cout << arr[i] << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T16:38:23.407

崩溃的主要原因！

你的情况`for`很奇怪：

```
for(int i = cof; length-1; i++ ) 
```

应该

```
for(int i = cof; i<length-1; i++ )
                 ^^ 
```

并更正您的交换功能：

```
void swap1(int& x, int& y)
{
    int tmp = x;
    x = y;
    y = tmp; // <-- use tmp
} 
```

和许多其他错误...

例如，您`arr[length]`多次触摸超出范围。

另外，数组从`0`not开始`1`（见`quick_sort(arr, 1, 5);`：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:35:47.177

好吧，你的交换函数是*错误*的，但它没有任何东西会导致崩溃。注释掉它时看不到任何崩溃的原因是您的程序在`swap1`不是程序的一部分时永远不会写入内存。

这是您的交换功能供参考：

```
void swap1(int& x, int& y)
{
    int tmp = x;
    x = y;
    y = x;
} 
```

请注意，分配后不要*使用。* `tmp`我想你希望最后一行是：

```
y = tmp; 
```

编辑：您的程序也有其他错误。例如，`arr[length]`不是您创建的数组的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T16:38:33.157

我相信这条线导致你的崩溃 -

```
int partition(int arr[], int cof, int length)
{
    int x = arr[length]; 
```

您可能需要将其更改为

```
int partition(int arr[], int cof, int length)
{
    int x = arr[length-1]; 
```

在您的示例`main`函数中，您正在创建一个长度为 5 的数组，您将 5 传递给 quick_sort 函数，该函数调用长度为 5 的分区。然后您`arr[5]`在分区代码中执行，但数组的最后一个元素是 4，因为数组是基于零的索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T16:37:01.627

你做错了交换。将其更改为：

```
void swap1(int& x, int& y)
{
    int tmp = x;
    x = y;
    y = tmp;
} 
```

您也有错误`arr[length]`，索引错误。您的交换功能是非常特殊的交换，而不是此时交换元素导致`x`两者`y`具有相同的值`y`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T16:43:44.497

改变交换乐趣。至：

```
void swap1(int& x, int& y)

{
    int tmp = x;
    x = y;
    y = tmp;        <========= here
} 
```

当然，这不是您问题的根源。这个循环：

```
for (int i = cof; length-1; i++ ) 
```

看起来像永无止境的故事.. 将条件更新为您想要的任何内容。

# master - Msp430 i²c 模块和库

> ID：15990147
> 
> 赞同：2
> 
> 时间：2013-04-13T16:34:42.237
> 
> 标签：master, gyroscope, i2c, msp430, slave

我有一个项目，它有一个 MSP430G2553 主设备和一个三轴数字输出陀螺仪 ITG-3200 分线从属设备。ITG3200 使用 i²c 协议进行通信，所以我一直在 Msp 上检查 i²c 模块的使用情况。作为初学者，我下载了 TI I²c示例，可在[http://www.ti.com/lsds/ti/microcontroller/16-bit_msp430/msp430_software_landing.page](http://www.ti.com/lsds/ti/microcontroller/16-bit_msp430/msp430_software_landing.page)中找到TMP100 温度传感器作为从设备。这是示例代码。

```
//******************************************************************************
//  MSP430G2xx3 Demo - USCI_B0 I2C Master to TMP100, Set P1.0 if Temp > 28C
//
//  Description: I2C interface to TMP100 temperature sensor in 9-bit mode.
//  Timer_A CCR0 interrupt is used to wake up and read the two bytes of
//  the TMP100 temperature register every 62ms. If the temperature is greater
//  than 28C, P1.0 is set, else reset. CPU is operated in LPM0\. I2C speed
//  is ~100kHz.
//  ACLK = n/a, MCLK = SMCLK = TACLK = BRCLK = default DCO = ~1.2MHz
//
//         /|\           /|\ /|\
//          |   TMP100   10k 10k     MSP430G2xx3
//          |   -------   |   |   -------------------
//          +--|Vcc SDA|<-|---+->|P1.7/UCB0SDA    XIN|-
//          |  |       |  |      |                   |
//          +--|A1,A0  |  |      |               XOUT|-
//             |       |  |      |                   |
//          +--|Vss SCL|<-+------|P1.6/UCB0SCL   P1.0|---> LED
//         \|/  -------          |                   |
//
//  D. Dang
//  Texas Instruments Inc.
//  February 2011
//   Built with CCS Version 4.2.0 and IAR Embedded Workbench Version: 5.10
//******************************************************************************
#include <msp430.h>

unsigned int RxByteCtr;
unsigned int RxWord;

int main(void)
{
  WDTCTL = WDTPW + WDTHOLD;                 // Stop WDT
  P1DIR |= BIT0;                            // P1.0 output
  P1SEL |= BIT6 + BIT7;                     // Assign I2C pins to USCI_B0
  P1SEL2|= BIT6 + BIT7;                     // Assign I2C pins to USCI_B0
  UCB0CTL1 |= UCSWRST;                      // Enable SW reset
  UCB0CTL0 = UCMST + UCMODE_3 + UCSYNC;     // I2C Master, synchronous mode
  UCB0CTL1 = UCSSEL_2 + UCSWRST;            // Use SMCLK, keep SW reset
  UCB0BR0 = 12;                             // fSCL = SMCLK/12 = ~100kHz
  UCB0BR1 = 0;
  UCB0I2CSA = 0x4e;                         // Set slave address
  UCB0CTL1 &= ~UCSWRST;                     // Clear SW reset, resume operation
  IE2 |= UCB0RXIE;                          // Enable RX interrupt
  TACTL = TASSEL_2 + MC_2;                  // SMCLK, contmode

  while (1)
  {
    RxByteCtr = 2;                          // Load RX byte counter
    UCB0CTL1 |= UCTXSTT;                    // I2C start condition
    __bis_SR_register(CPUOFF + GIE);        // Enter LPM0, enable interrupts
                                        // Remain in LPM0 until all data
                                        // is RX'd

    if (RxWord < 0x1d00)                    // >28C?
      P1OUT &= ~0x01;                       // No, P1.0 = 0
    else
      P1OUT |= 0x01;                        // Yes, P1.0 = 1

    __disable_interrupt();
    TACCTL0 |= CCIE;                        // TACCR0 interrupt enabled
    __bis_SR_register(CPUOFF + GIE);        // Enter LPM0, enable interrupts
                                        // Remain in LPM0 until TACCR0
                                        // interrupt occurs
    TACCTL0 &= ~CCIE;                       // TACCR0 interrupt disabled
  }
}

#pragma vector = TIMER0_A0_VECTOR
__interrupt void TA0_ISR(void)
{
  __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
}

// The USCIAB0TX_ISR is structured such that it can be used to receive any
// 2+ number of bytes by pre-loading RxByteCtr with the byte count.
#pragma vector = USCIAB0TX_VECTOR
__interrupt void USCIAB0TX_ISR(void)
{
  RxByteCtr--;                              // Decrement RX byte counter

  if (RxByteCtr)
  {
    RxWord = (unsigned int)UCB0RXBUF << 8;  // Get received byte
    if (RxByteCtr == 1)                     // Only one byte left?
      UCB0CTL1 |= UCTXSTP;                  // Generate I2C stop condition
  }
  else
  {
    RxWord |= UCB0RXBUF;                    // Get final received byte,
                                        // Combine MSB and LSB
    __bic_SR_register_on_exit(CPUOFF);      // Exit LPM0
  }
} 
```

我建立了相同的电路，其中 SDA 和 SCL 上的 2 个 10k 上拉，将从地址更改为 0x69 或 0x68，这是设备用户指南中给出的陀螺仪地址。由于我还没有建立任何监控，我用示波器检查了 SCL 和 SDA 上的脉冲。我没想到会在 SDA 上看到任何东西，但我想知道为什么我什至看不到 SCL 总线上的任何时钟周期。它要么始终处于 3.3V（MSP 内部 vcc）上，要么有时接近 1V（0.80~）。即使我移除陀螺仪、SDA 和 SCL 总线，我在 P1.6 端口上也看不到任何脉冲。有任何想法吗？

另外，如果有人知道这个设备的库，比如 arduino，我真的很想使用它而不是尝试检查所有寄存器和中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:20:57.340

我知道这个线程已经低调了一段时间。在我挖了很多东西并工作了一个月之后，我想出了最后一个干净的代码。我遇到了另一个问题，我将在这里粘贴。

我有这段代码，我一直在研究通过 I2C 总线连接 ITG-3200 陀螺仪从属设备和 MSP430G2553 主设备。它昨天工作正常，但不知何故今天它不工作。我尝试在没有陀螺仪 ACK 的情况下尽可能多地进行调试，但似乎进入 LPM TX 中断后从未发生过，因此它卡在了 LPM 中。你能看看我遗漏的东西吗？我试图尽可能地清理代码，它可能看起来有点复杂，但请随时询问任何功能。

```
/* --COPYRIGHT--,
 * Copyright (c) 2013, Barışcan Kayaoğlu
 * All rights reserved.
 *
 * --COPYRIGHT--*/
//******************************************************************************
//  MSP430G2xx3 I2C Demo - USCI_B0 I2C Master TX/RX single byte from ITG-3200
//  gyroscope.
//
//  Description: This demo connects a MSP430Gxx3 launchpad to ITG-3200 via
//  USCI_B0 I2C module. The launchpad act as a master and itg-300 act as a
//  slave. Master reads 6 byte consecutively and send it to the vitual COM
//  Port on Usb with USCI_A0 Uart module. DCO = 1MHz
//
//                                /|\  /|\
//                  ITG-3200      10k  10k     MSP430G2xx3
//                   slave         |    |        master
//             -----------------   |    |     -----------------
//            |              SDA|<-|----+---->|P1.7/UCB0SDA     |
//            |              CLK|<-|-.GND     |                 |
//            |              GND|<-|-'        |                 |
//            |              SCL|<-+--------->|P1.6/UCB0SCL     |
//            |              VCC|<--.         |      P1.1/UCA0TX|-------> COM Port (9600 baud)
//            |              VIO|<--'3.3V     |                 |
//            |              INT|             |                 |
//  Barışcan Kayaoğlu
//  May 2013
//  Built with CCS Version 5.3.0.00090
//******************************************************************************
#include <msp430g2553.h>

int TXByteCtr; // This counter used for counting bytes before the stop condition
char xRate_L;  // Variable to hold X_Low register value
char xRate_H;  // Variable to hold X_High register value
char yRate_L;  // Variable to hold Y_Low register value
char yRate_H;  // Variable to hold Y_High register value
char zRate_L;  // Variable to hold Z_Low register value
char zRate_H;  // Variable to hold Z_High register value
int i2c_State; // This counter held the state machine condition of I2C
int Rx = 0;    // Flag for the interrupt vector. 1 for Receive 0 for Transmit
int init = 0;  // Flag for the interrupt vector. 1 for Writing to gyro for config 0 for reading

//Gyro configuration addresses
char WHO_AM_I = 0x00;   // Gyro register where it helds the slave address 0x69 | 0x68
char SMPLRT_DIV= 0x15; // Gyro register where it helds the divider value for sample rate
char DLPF_FS = 0x16;  // Gyro register where it helds the low pass filter config

//Gyro Memory addresses;
char GYRO_XOUT_H = 0x1D;
char GYRO_XOUT_L = 0x1E;
char GYRO_YOUT_H = 0x1F;
char GYRO_YOUT_L = 0x20;
char GYRO_ZOUT_H = 0x21;
char GYRO_ZOUT_L = 0x22;
char TEMP_OUT_H = 0x1B;
char TEMP_OUT_L = 0x1C;
char itgAddress = 0x69;

//Gyro configuration constants
char DLPF_CFG_0 = 1<<0;        // 1
char DLPF_CFG_1 = 1<<1;       // 10
char DLPF_CFG_2 = 1<<2;      // 100
char DLPF_FS_SEL_0 = 1<<3;  // 1000
char DLPF_FS_SEL_1 = 1<<4; //10000

void init_I2C(void);
void Transmit(void);
void Receive(void);
void initUart(void);
void initGyro(void);

int main(void)
{
  WDTCTL = WDTPW + WDTHOLD;                 // Stop WDT
  BCSCTL1 = CALBC1_1MHZ;                    // Set DCO to 1Mhz
  DCOCTL = CALDCO_1MHZ;
  //__delay_cycles(15000);                  // Wait gyro to wake up
  P1SEL |= BIT1 + BIT2 + BIT6 + BIT7;       // Assign I2C pins to USCI_B0 // Assign Uart pins to USCI_A0
  P2SEL |= BIT1 + BIT2 + BIT6 + BIT7;       // Assign I2C pins to USCI_B0 // Assign Uart pins to USCI_A0
  init_I2C();
  initUart();
  initGyro();
  init = 0;                                 // Flag to reading from configuration writing

  while(1) {
      switch(i2c_State) {
          case 0: // Wait state
            __delay_cycles(8000); // 10 ms
            i2c_State++;
            break;
          case 1: // Read X_High state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 2: // Read X_Low state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 3: // Read Y_High state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 4: // Read Y_Low state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 5: // Read Z_High state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 6: // Read Z_Low state
            Rx = 0; // Receive flag = transmit
            TXByteCtr = 1; // TXByteCtr 1 for sending register address and stop
            Transmit();  // I2C start condition with Write operation

            Rx = 1; // Receive flag = receive
            Receive();  // I2C start condition with Read operation
            i2c_State++;
            break;
          case 7:
            UCA0TXBUF = 0x58; // X
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x3A; // :
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = xRate_H;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = xRate_L;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x09; // tab
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            i2c_State++;
            break;
          case 8:
            UCA0TXBUF = 0x59; // Y
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x3A; // :
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = yRate_H;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = yRate_L;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x09; // tab
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            i2c_State++;
            break;
          case 9:
            UCA0TXBUF = 0x5A; // Z
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x3A; // :
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = zRate_H;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = zRate_L;
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x5C; // \
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            UCA0TXBUF = 0x6E; // n
            while (!(IFG2&UCA0TXIFG));                // USCI_A0 TX buffer ready?
            i2c_State = 0;
            break;
      } // End of state machine
  }
} // End of Main

 void readX_H() {
      if(Rx == 1){                              // Master Recieve
          xRate_H = UCB0RXBUF;                  // Get RXBuffer value to xRate_H
      }

      else {                                     // Master Transmit
          if (TXByteCtr) {                       // TX byte counter = 1 : send gyro address
              UCB0TXBUF = GYRO_XOUT_H;           // Load TX buffer // request from X_High register
              TXByteCtr--;                       // Decrement TX byte counter
          }
          else {                                      // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void readX_L() {
      if(Rx == 1){                              // Master Recieve
          xRate_L = UCB0RXBUF;                  // Get RXBuffer value to xRate_L
      }

      else {                                     // Master Transmit
          if (TXByteCtr) {                       // TX byte counter = 1 : send gyro address
              UCB0TXBUF = GYRO_XOUT_L;           // Load TX buffer // request from X_Low register
              TXByteCtr--;                       // Decrement TX byte counter
          }
          else {                                      // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void readY_H() {
      if(Rx == 1) {                              // Master Recieve
          yRate_H = UCB0RXBUF;                   // Get RXBuffer value to yRate_H
      }

      else {                                         // Master Transmit
          if (TXByteCtr) {                           // TX byte counter = 1 : send gyro address
              UCB0TXBUF = GYRO_YOUT_H;               // Load TX buffer // request from Y_High register
              TXByteCtr--;                           // Decrement TX byte counter
          }
          else {                                        // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                      // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                       // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void readY_L() {
      if(Rx == 1){                              // Master Recieve
          yRate_L = UCB0RXBUF;                  // Get RXBuffer value to yRate_L
      }

      else {                                     // Master Transmit
          if (TXByteCtr) {                       // TX byte counter = 1 : send gyro address
              UCB0TXBUF = GYRO_YOUT_L;           // Load TX buffer // request from Y_Low register
              TXByteCtr--;                       // Decrement TX byte counter
          }
          else {                                      // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void readZ_H() {
      if(Rx == 1){                              // Master Recieve
          zRate_H = UCB0RXBUF;                  // Get RXBuffer value to zRate_H
      }

      else {                                     // Master Transmit
          if (TXByteCtr) {                       // TX byte counter = 1 : send gyro address
              UCB0TXBUF = GYRO_ZOUT_H;           // Load TX buffer // request from Z_High register
              TXByteCtr--;                       // Decrement TX byte counter
          }
          else {                                      // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void readZ_L() {
      if(Rx == 1){                              // Master Recieve
          zRate_L = UCB0RXBUF;                   // Get RXBuffer value to zRate_L
      }

      else {                                     // Master Transmit
         if (TXByteCtr)  {                       // TX byte counter = 1 : send gyro address
             UCB0TXBUF = GYRO_ZOUT_L;            // Load TX buffer // request from Z_Low register
             TXByteCtr--;                        // Decrement TX byte counter
         }
         else {                                       // Tx byte counter = 0 : register address sent
              UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
              IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX interrupt flag
          }
      }
  }

  void initGyro(void) {
    TXByteCtr = 2;  // 2 bytes will occur. First register address send, Second Data send
    init = 1;       // config flag to 1 : Sending Divider value
    Transmit();     // Start condition with Writing mode
    init = 2;       // config flag to 2 : Sending Low pass filter value
    TXByteCtr = 2;  // Restart byte counter
    Transmit();     // Start condition with Writing mode
  }

  void init_I2C(void) {
      UCB0CTL1 |= UCSWRST;                      // Enable SW reset
      UCB0CTL0 = UCMST + UCMODE_3 + UCSYNC;     // I2C Master, synchronous mode
      UCB0CTL1 = UCSSEL_2 + UCSWRST;            // Use SMCLK, keep SW reset
      UCB0BR0 = 10;                             // fSCL = 1Mhz/10 = ~100kHz
      UCB0BR1 = 0;
      UCB0I2CSA = itgAddress;                   // Slave Address is 069h
      UCB0CTL1 &= ~UCSWRST;                     // **Initialize USCI state machine**
      IE2 |= UCB0RXIE + UCB0TXIE;               // Enable RX and TX interrupt
  }
  void initUart(void) {
      UCA0CTL1 |= UCSSEL_2;                     // Use SMCLK
      UCA0BR0 = 104;                            // 1MHz 9600
      UCA0BR1 = 0;                              // 1MHz 9600
      UCA0MCTL = UCBRS0;                        // Modulation UCBRSx = 1
      UCA0CTL1 &= ~UCSWRST;                     // **Initialize USCI state machine**
  }
  void Transmit(void){
      while (UCB0CTL1 & UCTXSTP);             // Ensure stop condition got sent
      UCB0CTL1 |= UCTR + UCTXSTT;             // I2C TX with start condition
      __bis_SR_register(CPUOFF + GIE);        // Enter LPM0 w/ interrupts
  }
  void Receive(void){
        while (UCB0CTL1 & UCTXSTP);             // Ensure stop condition got sent
        UCB0CTL1 &= ~UCTR ;                     // Clear I2C TX flag
        UCB0CTL1 |= UCTXSTT;                    // I2C start condition
        while (UCB0CTL1 & UCTXSTT);             // Start condition sent?
        UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
        __bis_SR_register(CPUOFF + GIE);        // Enter LPM0 w/ interrupts
  }

  void twosCompToDecimal() {

  }

#pragma vector = USCIAB0TX_VECTOR       // USCI TX interrupt vector. I2C module share RX and TX interrupts.
__interrupt void USCIAB0TX_ISR(void)    // This will occur either when RXBuffer is full or TXBuffer is sent.
{
    if(init == 1) {                 // Gyro writing for configuration. Sending LPF register address
        if (TXByteCtr == 2) {       // byte counter = 2 : sending register address
            UCB0TXBUF = DLPF_FS;    // Low pass filter value register address to TXBuffer
            TXByteCtr--;            // Decrement TX byte counter
        }
        else if(TXByteCtr == 1) {                                       // byte counter = 1 : sending config value
              UCB0TXBUF = (DLPF_FS_SEL_0|DLPF_FS_SEL_1|DLPF_CFG_0);     // config value to TXBuffer
              TXByteCtr--;                                              // Decrement TX byte counter
        }
        else {                                      // byte counter = 0 : stop condition
            UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
            IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX int flag
            __bic_SR_register_on_exit(CPUOFF);      // Exit LPM0
        }
    }
    else if(init == 2) {                // Gyro writing for configuration. Sending Sample Rate Divider register address
        if (TXByteCtr == 2) {           // byte counter = 1 : sending config value
            UCB0TXBUF = SMPLRT_DIV;     // Sample Rate Divider value to TXBuffer
            TXByteCtr--;                // Decrement TX byte counter
        }
        else if(TXByteCtr == 1) {           // byte counter = 1 : sending config value
            UCB0TXBUF = 9;                  // config value to TXBuffer
            TXByteCtr--;                    // Decrement TX byte counter
        }
        else {                                      // byte counter = 0 : stop condition
            UCB0CTL1 |= UCTXSTP;                    // I2C stop condition
            IFG2 &= ~UCB0TXIFG;                     // Clear USCI_B0 TX int flag
            __bic_SR_register_on_exit(CPUOFF);      // Exit LPM0
        }
    }
    else {  // Gyro Reading operation.
      switch(i2c_State) {
          case 1: // Read X High
              readX_H();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
          case 2: // Read X Low
            readX_L();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
          case 3: // Read Y High
            readY_H();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
          case 4: // Read Y Low
            readY_L();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
         case 5: // Read Z High
            readZ_H();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
         case 6: // Read Z Low
            readZ_L();
            __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
              break;
      }
  }

} 
```

# python - 如何使用 Django 设置 MongoDB

> ID：15990152
> 
> 赞同：1
> 
> 时间：2013-04-13T16:35:39.320
> 
> 标签：python, django, mongodb, django-nonrel, django-mongodb-engine

我已经学习了许多关于如何使用 MongoDB 设置 Django 项目的教程，但在运行测试命令时仍然遇到相同的错误：

```
python manage.py runsever 
```

这是我一直关注的链接：

[http://www.allbuttonspressed.com/blog/django/2010/05/MongoDB-backend-for-Django-nonrel-released](http://www.allbuttonspressed.com/blog/django/2010/05/MongoDB-backend-for-Django-nonrel-released)

以下是我从上述命令中得到的错误：

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x10d266210>>
Traceback (most recent call last):

File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
self.validate(display_num_errors=True)

File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
num_errors = get_validation_errors(s, app)

File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 23, in get_validation_errors
from django.db import models, connection

File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 40, in <module>
backend = load_backend(connection.settings_dict['ENGINE'])

File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)

File "/Library/Python/2.7/site-packages/django/db/utils.py", line 92, in __getitem__
backend = load_backend(db['ENGINE'])

 File "/Library/Python/2.7/site-packages/django/db/utils.py", line 24, in load_backend
return import_module('.base', backend_name)

 File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)

File "build/bdist.macosx-10.8-intel/egg/django_mongodb_engine/__init__.py", line 13, in <module>

AttributeError: 'tuple' object has no attribute 'insert' 
```

我不知道为什么这不起作用，理想情况下我只想要一个专门用于存储 JSON 文档的数据库设置。是否有更简单的替代方法可以将 Django 与另一个非常适合存储 JSON 信息的数据库连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:53:29.570

为了澄清：

INSTALLED_APPS 应该是元组。

他得到`AttributeError: 'tuple' object has no attribute 'insert'`是因为 mongodb 没有正确处理元组 INSTALLED_APPS。mongodb 中的默认值是插入列表。这已经修复了，但现在它已经消失了。

有以下建议：

*   将您的 settings.INSTALLED_APPS 更改为列表而不是元组。（这对我不利）
*   通过添加补丁来更正他们的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T12:09:33.573

有一个名为 djongo 的新包，用于完全支持 mongoDB：- [https://nesdis.github.io/djongo/](https://nesdis.github.io/djongo/)

你不能在你的venv中安装ist：

```
pip install djongo 
```

# php - Bootstrap Widgets tblistview：如何不显示项目总数？

> ID：15990154
> 
> 赞同：0
> 
> 时间：2013-04-13T16:35:40.740
> 
> 标签：php, activerecord, twitter-bootstrap, yii, yii-extensions

我正在尝试修改使用 Yii boostrap 和 CactiveDataprovider 构建的表，该表工作正常，但它还会自动显示找到的所有项目的计数，如何禁用显示此计数

这是当前的视图逻辑

```
$this->widget('bootstrap.widgets.TbListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
    'viewData'=>array('page'=>$page),
    'itemsTagName'=>'table',
    'itemsCssClass'=>'items table table-striped table-condensed',
    'emptyText'=>'<i> Sorry, there are no active items to display</i>',
                  )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:26:27.103

您需要添加这一行：

```
'template' => "{sorter}\n{items}\n{pager}", 
```

TbListView 从 CListView 扩展而来，它使用模板变量来控制布局。见：[http ://www.yiiframework.com/doc/api/1.1/CListView#template-detail](http://www.yiiframework.com/doc/api/1.1/CListView#template-detail)

默认模板是`"{summary}\n{sorter}\n{items}\n{pager}"`{summary} 显示计数的地方。所以如果你删除它，计数将不会显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T18:28:17.160

您可能指的是：[示例](http://screencast.com/t/QkYjqIDX)

如果是这样，请根据需要设置模板属性。

您需要删除`summary`文本。

`pages`代表分页

`items`代表...项目列表

```
<?php
$this->widget('zii.widgets.CListView', array(
    'dataProvider' => $dataProvider,
    'template' => "{summary}\n{pager}\n{items}\n{summary}\n{pager}",
    'itemView' => '_index',
    'pager' => array(
        'maxButtonCount' => 10,
    ),
        )
);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T18:33:37.233

这很容易。把适当的摘要文本设置为假。

```
<?php $this->widget('bootstrap.widgets.TbListView',array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view_mercado',
    'summaryText'=>false //make it for hide summary text
)); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:26:02.647

我从离线来源获得了这个替代答案，为了完整起见，在此处发布。
Ionut-flavius-Pogacian 和frostyterrier 方法都有效，并且是更好的解决方案，因为定义模板可以更好地控制小部件的行为，而不是像下面的答案那样仅仅定义 summaryText

Tblistview 没有记录在 Yii-bootstrap 文档中，但是扫描源代码似乎它是 Yii 中 CListview 类的包装器。

CListview 扩展了具有 summaryText 属性的 CBaseListView。将空白数据传递给它，删除默认情况下处于活动状态的计数。

[http://www.yiiframework.com/doc/api/1.1/CBaseListView#template-detail](http://www.yiiframework.com/doc/api/1.1/CBaseListView#template-detail)

SummaryText 具有以下可用变量

```
{start}: the starting row number (1-based) currently being displayed 
{end}: the ending row number (1-based) currently being displayed 
{count}: the total number of rows
{page}: the page number (1-based) current being displayed, available since version 1.1.3
{pages}: the total number of pages, available since version 1.1.3 

{start} {end} and {count} are visible by default 
```

代码可以修改为

```
$this->widget('bootstrap.widgets.TbListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
    'viewData'=>array('page'=>$page),
    'itemsTagName'=>'table',
    'itemsCssClass'=>'items table table-striped table-condensed',
    'emptyText'=>'<i> Sorry, there are no active items to display</i>',
    'summaryText'=>''
                  )); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T17:04:27.007

使用 CSS 怎么样？很简单

# java - 可终止的线程观察者

> ID：15990159
> 
> 赞同：1
> 
> 时间：2013-04-13T16:36:08.687
> 
> 标签：java, concurrency

有五种从属算法和一种主算法。在每个主算法的迭代中，这五个从属算法并行工作（它们都实现了`Runnable`接口），当其中一个完成时，它会通知其他算法以便它们也终止，并且在所有这些完成后，主算法开始后处理。通知过程基于观察者模式。每个从属算法都实现`Terminatable`了接口，并有一个指向一个`TerminationObserver`类的链接，该类包含一个可运行的列表并具有这样一个方法：

```
 public synchronized void terminateAll() {
    for (Terminatable terminatable : terminatables) {
        if (!terminatable.isTerminated()) {
            terminatable.terminate();
        }
    }
 } 
```

每个从属算法都是一组迭代，因此通过设置一个`terminated`布尔变量来执行终止，该变量`true`是停止迭代条件的一部分。下面是从属算法类的概述：

```
public class SlaveAlgorithm {

   /**
    * Process the algorithm.
    */    
   public void run() {
       try {
           threadBarrier.await();

           while (!stopConditionMet()) {
               performIteration()
           }

           // whether it is terminated by other algorithm or
           // the stop conditions met
           if (!isTerminated()) {  
              terminate();
              terminateOthers();
           }

       } catch (Exception e) {
        throw new RuntimeException(new AlgException(e));
       }
   }

   /**
    * Tests whether the algorithms is terminated.
    */
   public boolean isTerminated() {
       return terminated;
   }

   /**
    * Terminates the algorithm execution and
    * causes other algorithms to terminate as well.
    */
   public void terminate() {
       terminated = true;
   }

   /**
    * Removes the current algorithm form the termination observer's list
    * and requests the termination of other algorithms, left in the termination    observer.
    */
   private void terminateOthers() {
       terminationObserver.remove(this); // eliminate the already terminated process from the list
       terminationObserver.terminateAll();
   }
} 
```

一切正常，但这似乎不是“最佳实践”。可能有一些我看不到的陷阱，或者可能有一些其他众所周知的做法来做我需要的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:07:36.633

您应该将`terminateOthers()`决策留给 the`TerminationObserver`而不是`SlaveAlgorithm`。你应该有这样的东西：

```
public class SlaveAlgorithm {
  public void run() {
    try {
      threadBarrier.await();

      while (!stopConditionMet() && !isTerminated()) {
        performIteration()
      }
      done();
    }
    catch ...
  }

  /**
   * If not terminated notify observer the processing is done.
   */
  private void done() {
    if (!isTerminated()) {  
      terminationObserver.notifyDone(this)
    }
  } 
```

观察者应该这样做：

```
public class TerminationObserverImpl {
  private void notifyDone(SlaveAlgorithm slave) {
    remove(slave); // Remove it from the list.
    terminateAll(); // Go through the list and terminate each slave.
  }
  ... 
```

# objective-c - 在 UITableView 中禁用 1 个单元格的删除

> ID：15990160
> 
> 赞同：0
> 
> 时间：2013-04-13T16:36:10.730
> 
> 标签：objective-c, c, uitableview, cocoa-touch, uikit

我有一个 UITableView。它在需要的地方从地址簿中提取信息。我还以编程方式将底部单元格设置为加载地址簿的按钮。

我的问题是当我允许用户通过向右滑动来删除一行时，它会显示我作为按钮制作的最后一个单元格。有没有办法不允许仅在 1 个单元格上显示删除功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:42:59.197

`tableView:canEditRowAtIndexPath:`在表视图中实现`dataSource`并返回`NO`您不想删除的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:42:38.913

您必须仅对可以删除的单元格执行`[UITableViewDelegate tableView:editingStyleForRowAtIndexPath:]`并返回。`UITableViewCellEditingStyleDelete`返回`UITableViewCellEditingStyleNone`无法删除的单元格。

# c# - C# | XP 机器上的 WebPermission-Exception

> ID：15990169
> 
> 赞同：0
> 
> 时间：2013-04-13T16:36:42.423
> 
> 标签：c#, networking, permissions, windows-xp

我正在编写一个小型 C# 客户端，它每 5 秒检查一次本地服务器上的主页。在 Windows-7-VM 上它可以工作，但如果我尝试在 XP 虚拟机上运行客户端，我会得到`System.Net.WebPermission`-Exception。两个 VM 具有相同的网络设置（WinXP-IP= `10.0.1.100`， Win7-IP= `10.0.1.101`），并且它们的网络适配器设置为桥接网络（在 Win7-VM 中客户端工作）

我的代码：

```
private string GetPageContent(string url)
{
    WebClient client = new WebClient();
    string output = client.DownloadString(url);
    client.Dispose();
    return output;
} 
```

WebClient 尝试下载的 URL 如下所示 `http://10.0.1.25/info.php`

这是 Windows XP 特有的问题还是我必须添加一些权限？

# html - 网站在大多数浏览器上无法正确缩放，大多数元素放错了位置

> ID：15990170
> 
> 赞同：0
> 
> 时间：2013-04-13T16:36:46.753
> 
> 标签：html, css, web, zooming

我目前正在使用 HTML 和 CSS 构建一个网站。

我有一个与缩放有关的小问题。当页面被缩小时，大多数元素都会变得混乱和不合适。

使用的浏览器：

*   谷歌浏览器
*   苹果浏览器
*   歌剧

更何况，当在 27 英寸屏幕上从 Safari 浏览时，它变得更加糟糕。

**索引.html**

```
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <title>Arrow-TvSeries - Home</title>
            <link rel="stylesheet" type="text/css" href="style.css">
        <meta property="fb:admins" content="{793705343}"/>
    </head>     
    <body>
    <center>
        <table>
            <tr>
                <td align="center">
                    <div id="fb-root"></div>
                    <script>(function(d, s, id) {
                      var js, fjs = d.getElementsByTagName(s)[0];
                      if (d.getElementById(id)) return;
                      js = d.createElement(s); js.id = id;
                      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=80504353315";
                      fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));</script>
                    <div id="fb-root"></div>
                        <script>
                          window.fbAsyncInit = function() {
                            // init the FB JS SDK
                            FB.init({
                              appId      : '793705343',                                 // App ID from the app dashboard
                              channelUrl : '//www.arrow-tvseries.com/channel.html', // Channel file for x-domain comms
                              status     : true,                                    // Check Facebook Login status
                              xfbml      : true                                     // Look for social plugins on the page
                              cookie      : true,                                   // enable cookies to allow the server to access the session
                              oauth       : true                                    // enable OAuth 2.0
                            });

                            // Additional initialization code such as adding Event Listeners goes here
                          };
                          // Load the SDK asyncchronously
                          (function(d, s, id){
                             var js, fjs = d.getElementsByTagName(s)[0];
                             if (d.getElementById(id)) {return;}
                             js = d.createElement(s); js.id = id;
                             js.src = "//connect.facebook.net/en_US/all.js";
                             fjs.parentNode.insertBefore(js, fjs);
                           }(document, 'script', 'facebook-jssdk'));
                        </script>

                        <ui:composition xmlns="http://www.w3.org/1999/xhtml"
                        xmlns:fb="http://www.facebook.com/2008/fbml"
                        xmlns:f="http://java.sun.com/jsf/core">
<!--website-->
                    <div id="hood_image">
                            <br/><br/><br/></br></br></br><img src="images/oli_arrow4.png" align="right"/>
                    </div>
                    <div id="sitewrapper">
                        <div id="header"></div>
                        <div id="line"></div>
                        <div id="menu">
                            <br><a href="index.html">Home</a> | <a href="cast.html">Cast</a> | <a href="episodes.html">Episodes</a>
                        </div>
                <!--content-->
                        <div id="content">
                            <div id="episodecontent">
                                <table border="0">
                                    <tr>
                                        <td>
                                            <img id="episodeimg" src="images/Next-Episode.png"/>
                                        </td>
                                        <td>
                                            <p style="color: white"><b>Title:</b> Home Invasion<br/><b>Date:</b> 24th April 2013</p>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="division1">
                                <p>After a violent shipwreck, billionaire playboy Oliver Queen was 
                                missing and presumed dead for five years before being discovered 
                                alive on a remote island in the Pacific. When he returns home to 
                                Starling City, his devoted mother Moira, much-beloved sister Thea, 
                                and best friend Tommy welcome him home, but they sense Oliver has 
                                been changed by his ordeal on the island. While Oliver hides the 
                                truth about the man he's become, he desperately wants to make amends 
                                for the actions he took as the boy he was. Most particularly, he 
                                seeks reconciliation with his former girlfriend, Laurel Lance.</p><br/>

                                <p>As Oliver reconnects with those closest to him, he secretly creates 
                                the persona of Arrow a vigilante to right the wrongs of his family, 
                                fight the ills of society and restore Starling City to its former glory. 
                                By day, Oliver plays the role of a wealthy, carefree and careless 
                                philanderer he used to be - flanked by his devoted chauffeur/bodyguard, 
                                John Diggle - while carefully concealing the secret identity he turns 
                                to under the cover of darkness. However, Laurel's father, Detective 
                                Quentin Lance, is determined to arrest the vigilante operating in his 
                                city. Meanwhile, Oliver's own mother, Moira, knows much more about the 
                                deadly shipwreck than she has let on and is more ruthless than he 
                                could ever imagine.</p><br/>

                                <p style="font-size: 20px"><b>I n t r o d u c t i o n</b></p><br/>

                                <p>At the beginning of each episode, with the exception of "Pilot", the 
                                first episode of the series, a voiceover of Oliver Queen describes 
                                briefly the hardships that Oliver faced on Lian Yu. He states that 
                                as he returned, he set out to fulfill his father's dying wish.</p><br/>

                                <p>"My name is Oliver Queen. For five years I was stranded on an 
                                island with only one goal: survive. Now I will fulfill my father's 
                                dying wish. To use the list of names he left me and bring down those 
                                who are poisoning my city. To do this, I must become someone else. 
                                I must become... something else."</p>

                                <div id="video" align="middle">
                                    <iframe width="640" height="360" 
                                        src="http://www.youtube.com/embed/xZrFSsc6CpI?autoplay=1" 
                                        frameborder="1" allowfullscreen>
                                    </iframe>
                                    <!--?autoplay=1-->
                                </div>
                                <div>
                                    <script type="text/javascript"><!--
                                        google_ad_client = "ca-pub-8938167182852335";
                                        /* Home paga bottom */
                                        google_ad_slot = "9919170802";
                                        google_ad_width = 468;
                                        google_ad_height = 60;
                                        //-->
                                    </script>
                                    <script type="text/javascript"
                                        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                                    </script>
                                </div>
                                <div style="float: right; font-size: 9px;">
                                    <p><br/><br/>Most of the information about this Tv-Show is taken from <a href="http://http://www.imdb.com/title/tt2193021/?ref_=sr_1" target="new">IMDB.COM</a></p>
                                </div>
                            </div>
                            <div id="division2">
                                <div class="fb-comments" data-href="http://www.arrow-tvseries.com" data-width="200" 
                                    data-num-posts="10" data-colorscheme="dark">
                                </div>
                                <div class="fb-like" data-href="http://www.arrow-tvseries.com" data-send="false" 
                                    data-width="220" data-show-faces="true" data-font="arial">
                                </div><br/>
                                <div><br/>
                                    <p><b>You may also like:</b></p>
                                </div>
                                <div>
                                    <script type="text/javascript"><!--
                                        google_ad_client = "ca-pub-8938167182852335";
                                        /* First Ad */
                                        google_ad_slot = "7105305203";
                                        google_ad_width = 120;
                                        google_ad_height = 600;
                                        //-->
                                    </script>
                                    <script type="text/javascript"
                                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                                    </script>
                                </div>
                                <div>
                                    <br/><br/><a href="http://www.imdb.com"><img src="images/imdb.png" alt="IMDB" width="100" /></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </center>
</body> 
```

**样式.css**

```
a:link    {color:#fff;} /* unvisited link */
a:visited {color:#fff;} /* visited link */
a:hover   {color:#2e6402;} /* mouse over link */
a:active  {color:#fff;} /* selected link */

#table{
padding-top: 30px;
padding-bottom: 30px;
z-index: 100;
}

#header{
background-position: center;
position: relative;
background-image:url('images/logo_bg.png');
background-repeat:no-repeat;
border-radius: 25px;
height: 331px;
width: 1300px;
padding-top: 0px;
padding-left: 0px;
padding-right: 0px;
z-index: -3;
/*border:2px solid;*/
display:block;
margin: 0 auto 0 auto;
}

#line{
width: 1290px;
height: auto;
background-color: white;
padding-top: 1px;
margin: 0 auto 0 auto;
}

body{
background-color: black;
}

#sitewrapper{
width: 1300px;
height: 100%;
padding-left: 0px;
padding-top: 3px;
padding-right: auto;
margin: 0 auto 0 auto;
}

p{
text-align: justify;
font-family: arial;
padding-left: 0px;
margin: 0 auto 0 auto;
color: white;
}

p2{
text-align: justify;
font-family: arial;
padding-left: 0px;
color: green;
margin: 0 auto 0 auto;
}

#menu{
width: 1250px;
height: auto;
color: white;
padding-top: 0px;
padding-right: 100px;
padding-bottom: 0px;
font-size: 120%;
/*border:2px solid;*/
text-align: right;
font-family: arial;
z-index: 31;
position: relative;
margin: 0 auto 0 auto;
}

#episodeimg{
width: 250px;
float: left;
padding-top:0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 10px;
margin: 0 auto 0 auto;
}

#episodecontent{
width: 55%;
float: auto;
margin: 0 auto 0 auto;
}

#hood_image{
float: left;
width: 30%;
height: auto;
position: fixed;
z-index: 1;
padding-left: 0px;
}

#content{
float: right;
width: 85%;
position: absolute;
padding-top: 0px;
padding-left: 0px;
padding-right: 0px;
z-index: 5;
margin: 0 auto 0 auto;
/*border:2px solid;*/
}

#division1{
position: relative;
float: left;
height: 100%;
width: 700px;
color: white;
padding-top: 30px;
padding-left: 20%;
padding-right: 0px;
padding-bottom: 10px;
z-index: 30;
margin: 0 auto 0 auto;
/*border:2px solid;*/
}

#division2{
float: right;
height: 100%;
width: 20%;
/*padding-top: 0px;
padding-left: 0px;
padding-right: 0px;*/
color: white;
border:2px solid;
margin: 0 auto 0 auto;
z-index: 1000;
overflow: hidden;
position: relative;
}

#video{
padding-top: 50px;
padding-left: 0%;
padding-right: 0%;
padding-bottom: 100px;
/*border:2px solid;*/
}

#footer{
/*background-color: red;*/
height: 10px;
width: 100%;
color: black;
background-color: white;
display:block;
} 
```

**本网站链接：**

www.arrow-tvseries.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:56:59.250

这里有一些事情需要考虑。`#sitewrapper`需要有`position:relative`你想要`#content`的绝对定位来定位它相对于它的父元素而不是文档。这会改变你的布局。

下一部分是使用 use `width: 85%`on `#content`。这限制并推动了 facebook 的整合。请考虑将其设置为 100%。这将使 facebook 框浮动到文本的右侧。

有许多不同的方式来布局和定位元素，这可能不是最佳解决方案，这些更改应该使它在缩放时不会移动（在 chrome 中测试）。

您可能还需要考虑其他一些事情。尝试在[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)验证 css，它会指出一些错误。

# ios - UINavigationBar 没有出现

> ID：15990179
> 
> 赞同：1
> 
> 时间：2013-04-13T16:37:57.167
> 
> 标签：ios, objective-c, xcode, uinavigationbar, xib

我不明白为什么没有出现导航栏。

例如，我尝试像这样添加导航栏：

```
1) File -> new project -> single view application -> storyboard -> viewcontroller -> attributes inspector -> Top Bar -> Navigation Bar. 
```

它出现在情节提要上，但在应用程序在模拟器上运行时不出现

我也不明白为什么它不显示为子视图 In `viewDidLoad`：

```
UINavigationBar *navBar = [[UINavigationBar alloc] init];

[self.view addSubview:navBar]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:53:21.077

这不是您将导航栏添加到 Storyboard 中的视图的方式。

执行此操作的正常方法是在故事板中选择您的视图控制器，然后在菜单中选择“编辑器”，然后选择“嵌入”=>“导航控制器”。

您应该会看到一个导航控制器，带有一个连接到原始视图控制器的箭头。

然后，选择新出现的导航控制器，检查检查器中的“是初始视图控制器”复选框，然后中提琴，这应该可以满足您的需求。

而且你没有自定义你的导航栏`UINavigationBar`。相反，您可以通过更改视图控制器的`navigationItem`.

在您的视图控制器中`viewDidLoad:`，尝试以下操作：

```
self.navigationItem.title = @"My Title";
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem: UIBarButtonSystemItemCamera target: self action: @selector( whatEverMethod: )]; 
```

您应该会在视图控制器中看到一个右栏按钮和一个标题。

--

“属性检查器”=>“顶栏”的作用是向您展示视图嵌入导航控制器*时*的外观。它实际上并没有为您添加导航栏。

如果您仔细观察，您会发现“顶部栏”选项位于名为“模拟指标”的部分中。（它们只是模拟的，并没有真正添加到您的视图中）

# powershell - 在函数内从 Write-Host 写入的变量的奇怪顺序

> ID：15990185
> 
> 赞同：0
> 
> 时间：2013-04-13T16:38:36.373
> 
> 标签：powershell

使用我的以下代码，Write-Host 似乎以一种奇怪的方式输出变量（至少对我来说来自 C#）。

代码在这里

```
function Run(
[string] $command,
[string] $args
)
{
    Write-Host 'from function - command is:' $command '.args is: ' $args
}

$cmd = "ping"
$args = "208.67.222.222"
Write-Host 'from main - command is:' $cmd '.args is: ' $args
Run("ping","208.67.222.222") 
```

输出在这里

```
from main - command is: ping .args is:  208.67.222.222
from function - command is: ping 208.67.222.222 .args is: 
```

正如我所料，如何`Write-Host`从 main 工作，但在函数内它同时输出所有变量？我该如何纠正这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:19:39.347

函数中的 $args 是一个自动变量。它是一个数组，包含传递给函数的所有参数。

为您的 IP 地址变量使用除 $args 之外的其他内容。

# jquery - 删除克隆行不起作用的jQuery

> ID：15990187
> 
> 赞同：0
> 
> 时间：2013-04-13T16:38:45.540
> 
> 标签：jquery, clone

我正在写一些允许添加和删除新行的东西，可以删除原始行，但不能删除克隆的行。这是我的 JS：

```
(function( $ ) {

  $.fn.addVarRow = function() {

    // Bind it to a click event
    $(this).click(function(e) {

        e.preventDefault();

        // Set some variables
        var $this = $(this);
        var $target = $('#newVarTable tbody tr:last');
        var $newRow = $target.clone();

        $target.after($newRow);

    })
  }

  $.fn.removeVarRow = function() {

    // Bind it to a click event
    $(this).click(function(e) {

        e.preventDefault();

        // remove row
        $(this).closest('tr').remove();

        return false;

    });
  };

})( jQuery );

jQuery(document).ready(function ($) {

    // Bind the click for adding a row
    $('#addVarRow').addVarRow();
    $('.removeVarRow').removeVarRow();

}); 
```

这是我的行：

```
 <!-- !Repeat me: Start -->
        <tr>
            <td>
                <input type="text" id="varSKU[]" name="varSKU[]" value="" style="width: 99%" placeholder="ie Product number, AB01234">
            </td>
            <td>
                <input type="text" id="varD1[]" name="varD1[]" value="" style="width: 99%" placeholder="ie 'Red'">
            </td>
            <td>
                <input type="text" id="varD2[]" name="varD2[]" value="" style="width: 99%" placeholder="ie 'Large'">
            </td>
            <td><a href="#removeRow" class="removeVarRow">Remove</a></td>
        </tr>
        <!-- Repeat me: End --> 
```

我不明白为什么，欢迎任何建议！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:48:46.990

当您创建新行时，它是动态的，并且没有`removeVarRow`方法，只有`.removeVarRow`您运行时页面上存在的元素`removeVarRow`才有删除方法，因为它不适用于未来的元素那堂课。

您需要将点击处理程序添加到委派的非动态父级，或者在创建新行时添加。

```
(function($) {
   $.fn.addVarRow = function() {
       return this.each(function() {
           $(this).on('click', function(e) {
               e.preventDefault();
               var $target = $('#newVarTable tbody tr:last'),
                   $newRow = $target.clone(false);

               $target.after($newRow);

               /* add a click handler to the newly created element */
               $newRow.find('.removeVarRow').on('click', function(e) {
                   e.preventDefault();
                   $(this).closest('tr').remove();
               });
            });
       });
   };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:59:45.583

在我看来， addVarRow 和 removeVarRow 不适用于新创建的行。这些功能基本上是点击绑定。如果它们未应用于新行，则单击它们不会做任何事情。

我会尝试修改 addVarRow 中的以下代码：

```
$target.after($newRow).addVarRow().removeVarRow(); 
```

这将 1\. 创建一行，2\. 绑定“点击时的新行”，3\. 绑定“点击时删除行”

到新创建的行。

# windows-phone-8 - 如何通过再次单击应用程序图标来恢复 WP8 应用程序

> ID：15990188
> 
> 赞同：0
> 
> 时间：2013-04-13T16:38:52.503
> 
> 标签：windows-phone-8, resume

我正在为 Windows Phone 8 编写一个没有 XAML 的 C++ DirectX 应用程序。

首先我使用win键或长按返回键挂起应用程序。然后单击图标，应用程序将重新启动而不是恢复。

与商店中的许多游戏和默认模板立方体 DirectX 示例应用程序相同。

但是Gameloft的游戏Asphalt 7，当我点击图标时，它恢复了游戏（它没有加载就恢复了，所以我确定它恢复了，它没有重述）

如何通过单击图标恢复应用程序。

还有一个问题，我如何将我的应用程序声明为游戏（它将在“XBOX GAME”中列出）。我以前以为提交的时候会声明。但是当我测试了很多xap文件时，我发现它是在xap文件中声明的，而不是在应用商店中定义的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:25:58.117

您可以通过实施“快速应用恢复”来实现这一目标。[您可以在此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579(v=vs.105).aspx)的 MSDN 上阅读有关此内容的信息。

关于游戏分类的问题之前已在[wp 7/8 的 How to make an app appear in games (xbox) 部分中讨论过](https://stackoverflow.com/questions/15291720/how-to-make-an-app-appear-in-games-xbox-section-of-wp-7-8)。

# mono - 嵌入式单声道 + app.config

> ID：15990190
> 
> 赞同：2
> 
> 时间：2013-04-13T16:39:01.837
> 
> 标签：mono

我在 c++ 程序中嵌入了单声道并加载了一个需要 app.config 的 dll。我收到这种错误，有人知道如何使用嵌入式单声道发送** .config 吗？*

堆栈跟踪：

```
System.Configuration.ConfigurationErrorsException: Error Initializing the configuration system. ---> System.ArgumentException: The 'ExeConfigFilename' argument cannot be null.
  at System.Configuration.ExeConfigurationHost.CheckFileMap (ConfigurationUserLevel level, System.Configuration.ExeConfigurationFileMap map) [0x00000] in <filename unknown>:0 
  at System.Configuration.ExeConfigurationHost.InitForConfiguration (System.String& locationSubPath, System.String& configPath, System.String& locationConfigPath, IInternalConfigRoot root, System.Object[] hostInitConfigurationParams) [0x00000] in <filename unknown>:0 
  at System.C[] hostInitConfigurationParams) [0x00000] in <filename unknown>:0 
  at System.Configuration.ConfigurationManager.OpenExeConfigurationInternal (ConfigurationUserLevel userLevel, System.Reflection.Assembly calling_assembly, System.String exePath) [0x00000] in <filename unknown>:0 
  at System.Configuration.ClientConfigurationSystem.get_Configuration () [0x00000] in <filename unknown>:0 onfiguration.InternalConfigurationSystem.InitForConfiguration (System.String& locationConfigPath, System.String& parentConfigPath, System.String& parentLocationConfigPath) [0x00000] in <filename unknown>:0 
  at System.Configuration.Configuration..ctor (System.Configuration.InternalConfigurationSystem system, System.String locationSubPath) [0x00000] in <filename unknown>:0 
  at System.Configuration.InternalConfigurationFactory.Create (System.Type typeConfigHost, System.Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T23:42:22.843

自我回答：你不能（截至 2013 年 4 月 30 日）。要启用此行为，我必须更改单声道的框架源 mono/mcs/class/corlib/system/appdomain.cs ：

```
public AppDomainSetup SetupInformation {
    get {
        return SetupInformationNoCopy; // newline
        //  AppDomainSetup setup = getSetup (); //old
        //  return new AppDomainSetup (setup); //old
    }
} 
```

# css - 表格内的 CSS 边距

> ID：15990193
> 
> 赞同：6
> 
> 时间：2013-04-13T16:39:31.363
> 
> 标签：css, margin

我正在尝试在表格内应用右边距但没有运气

```
<html>
  <style>
    input,select {
      width: 100%;
      margin-right: 15px;
      background: red;
    }
  </style>
  <body>
    <table border="2" color="red" width="100%">
       <tr>
         <td width="25%"><input type="text" /></td>
         <td width="25%"><select><option>foobar</option></select></td>
         <td width="25%"><input type="text" /></td>
         <td width="25%"><input type="text" /></td>
       </tr>
       <tr>
         <td width="25%"><input type="text" /></td>
         <td width="25%"><input type="text" /></td>
         <td width="25%"><select><option>foobar</option></select></td>
         <td width="25%"><input type="text" /></td>
       </tr>
    <table>
  </body>
</html> 
```

**示例：http:** [//jsfiddle.net/3reat/](http://jsfiddle.net/3reat/)

只有使用 CSS 才能定义 100% - 15px 的边距？

[http://jsfiddle.net/3reat/2/](http://jsfiddle.net/3reat/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:48:57.480

尝试 css3 计算

（例如）

```
margin: calc(100% - 15px);
margin: -webkit-calc(100% - 15px);
margin: -moz-calc(100% - 15px); 
```

参考：[https ://developer.mozilla.org/en-US/docs/CSS/calc](https://developer.mozilla.org/en-US/docs/CSS/calc)

# twitter-bootstrap - Vimeo 嵌入视频无法在 Android 上播放？

> ID：15990194
> 
> 赞同：0
> 
> 时间：2013-04-13T16:39:33.903
> 
> 标签：twitter-bootstrap, video, mobile, vimeo, fitvids

当我使用[FitVids.js](https://github.com/davatron5000/FitVids.js)在[Twitter Bootstrap 容器中嵌入](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)[100 Riffs（摇滚简史）](https://vimeo.com/43426940)以进行响应式调整大小时：

```
<div class="span12" id="video">
    <iframe src="https://player.vimeo.com/video/43426940?title=0&amp;byline=0&amp;portrait=0" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    <p class="text-center">Isn't the placeholder video awesome?</p>
</div> 
```

它在桌面上运行良好，但在 Android（CM 10.1 Nightly，Android 4.2.2）浏览器上运行异常：

*   *Google Chrome* - 音频播放开始，但视频播放没有
*   *Mozilla Firefox* - 音频和视频播放不启动

然而，该播放器在 Vimeo 自己的移动网站上运行良好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:59:36.680

事实证明，这是Vimeo 播放器的一个[已知问题。](https://vimeo.com/forums/help/topic:101891)我希望它很快得到修复。对于它的价值，股票/ASOP 浏览器工作正常。

**更新**：截至 2013 年 7 月 26 日，Vimeo 已为大多数设备修复了此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T20:10:53.590

我刚刚制作了一个 jQuery 插件，它以某种小方式帮助缓解这个问题。一探究竟。

[https://github.com/JacobBennett/Android-Vimeo-Fix](https://github.com/JacobBennett/Android-Vimeo-Fix)

# eclipse - 在 Eclipse IDE 中调试 Scala

> ID：15990195
> 
> 赞同：2
> 
> 时间：2013-04-13T16:39:34.587
> 
> 标签：eclipse, scala, ide

我安装了 scala for eclipse 插件。当我用鼠标悬停在调试时，我看不到运行时值。相反，我只是变量的类型。请注意，当我添加手表时，我可以看到值，但我希望能够在悬停时在工具提示中看到值。这可能吗？我需要做什么？

# java - 从另一个线程访问值

> ID：15990201
> 
> 赞同：1
> 
> 时间：2013-04-13T16:40:24.447
> 
> 标签：java, multithreading, kinect, simple-openni

我的问题是：*如何从另一个线程访问值？*

我有两个 .java 文件，Main.java 和 TrackHands.java

**主.java**

```
/**
 * This is the main class, it is used to start the program. The only use of this
 * is to make everything more organized.
 */
package Kinect;

//import processing.core.PApplet;
/**
 * @author Tony Nguyen <Tony.Nguyen@HvA.nl>
 *
 */
public class Main
{

    public static void main(String _args[])
    {  
        Thread trackHands = new Thread(new TrackHands());
        trackHands.start();
    }
} 
```

**TrackHands.java**

```
/*
 * This uses the normal Java layout to track the user and prints out the coordinates of the left and right hand
 */
package Kinect;

import SimpleOpenNI.*;
import processing.core.PApplet;
import processing.core.PVector;

/**
 * @author Tony Nguyen <Tony.Nguyen@HvA.nl>
 * @version 1.0
 */
public class TrackHands extends PApplet implements Runnable
{

    private int handLeftX, handLeftY = 0; // Holds the coordinates of the left hand
    SimpleOpenNI kinect = new SimpleOpenNI(this); // kinect object

    /**
     * Constructor Takes no parameters
     */
    public TrackHands()
    {
    }

    /**
     * run This will be executed when the thread starts
     */
    @Override
    public void run()
    {
        IntVector userList = new IntVector(); // Make a vector of ints to store the list of users        
        PVector leftHand = new PVector(); // Make a vector to store the left hand
        PVector convertedLeftHand = new PVector();

        kinect.enableDepth();
        kinect.enableUser(SimpleOpenNI.SKEL_PROFILE_ALL);
        kinect.setMirror(true);

        while (true)
        {
            kinect.update();

            kinect.getUsers(userList); // Write the list of detected users into the vector

            if (userList.size() > 0) // Checks if a user is found
            {
                int userId = userList.get(0); // Get first user

                if (kinect.isTrackingSkeleton(userId)) // If successfully calibrated
                {
                    kinect.getJointPositionSkeleton(userId,
                            SimpleOpenNI.SKEL_LEFT_HAND, leftHand); // Put the position of the left hand into that vector

                    kinect.convertRealWorldToProjective(leftHand,
                            convertedLeftHand);

                    this.handLeftX = round(convertedLeftHand.x);
                    this.handLeftY = round(convertedLeftHand.y);
                }
            }
        }

    }

    // User-tracking callbacks!
    public void onNewUser(int userId)
    {
        System.out.println("Start pose detection");
        kinect.startPoseDetection("Psi", userId);
    }

    public void onEndCalibration(int userId, boolean successful)
    {
        if (successful)
        {
            System.out.println("  User calibrated !!!");
            kinect.startTrackingSkeleton(userId);

        } else
        {
            System.out.println("  Failed to calibrate user !!!");
            kinect.startPoseDetection("Psi", userId);
        }
    }

    public void onStartPose(String pose, int userId)
    {
        System.out.println("Started pose for user");
        kinect.stopPoseDetection(userId);
        kinect.requestCalibrationSkeleton(userId, true);
    }
} 
```

我尝试使用 getter 和 setter 将 TrackHands.java 中的值获取到另一个线程中。尝试创建对象并将值作为参数传递，但是我的程序不会在`run()`方法中使用这些新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:52:57.090

要从中获取值`TrackHands`，请使用`get`访问设置在`run()`

```
class TrackHands {
    Object output;

    public void run() {
        while(true) {
            output = new Object();
        }
    }

    public Object getOutput() {
        return output;
    }
} 
```

传入`TrackHands`您的消费者对象并使用它来调用 get`getOutput()`方法。

传入值有点棘手，因为您可能会导致[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。尝试这样的事情

```
class TrackHands {
    Object input = null;
    public boolean setInput(Object input) {
        if(this.input == null) {
            this.input = input;
            return true;
        } else {
            return false;
        }
   }
} 
```

当您的`run()`方法使用`input`时，将其设置为 null 以便另一个线程可以传入另一个输入。您的生产者线程将使用此循环来传递输入：

```
public void sendInput(TrackHands th, Object input) {
    boolean done = false;
    while(!done) {
        done = th.setInput(input);
    }
} 
```

这将继续尝试传递，`input`直到成功。

`setInput`使用`synchronized`关键字，以便一次只有一个线程可以调用此方法，否则您将获得竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:14:35.453

我的一个朋友解决了我的问题。

我要感谢所有帮助我的人！

**主.java**

```
/**
 * This is the main class, it is used to start the program. The only use of this
 * is to make everything more organized.
 */
package Kinect;

//import processing.core.PApplet;
/**
 * @author Tony Nguyen <Tony.Nguyen@HvA.nl>
 *
 */
public class Main
{

    public static void main(String _args[])
    {
//        PApplet.main(new String[]
//                {
//                    Sensor.class.getName()
//                });

        ValueStore valueStore = new ValueStore(); // ADDED THIS LINE
        Thread trackHands = new Thread(new TrackHands(valueStore)); // ADDED THIS LINE
        trackHands.start();
    }
} 
```

TrackHands.java

```
/*
 * This uses the normal Java layout to track the user and prints out the coordinates of the left and right hand
 */
package Kinect;

import SimpleOpenNI.*;
import processing.core.PApplet;
import processing.core.PVector;

/**
 * @author Tony Nguyen <Tony.Nguyen@HvA.nl>
 * @version 1.0
 */
public class TrackHands extends PApplet implements Runnable
{

    private int handLeftX, handLeftY, handRightX, handRightY = 0; // Holds the coordinates of the left hand
    SimpleOpenNI kinect = new SimpleOpenNI(this); // kinect object
    private ValueStore valuesStore; // ADDED THIS LINE

    /**
     * Constructor Takes no parameters
     */
    public TrackHands()
    {
    }

    public TrackHands(ValueStore valuesStore)
    {
        this.valuesStore = valuesStore;
    }

    /**
     * run This will be executed when the thread starts
     */
    @Override
    public void run()
    {
        IntVector userList = new IntVector(); // Make a vector of ints to store the list of users        
        PVector leftHand = new PVector(); // Make a vector to store the left hand
        PVector rightHand = new PVector(); // Make a vector to store the right hand
        PVector convertedLeftHand = new PVector(); // Make a vector to store the actual left hand
        PVector convertedRightHand = new PVector(); // Make a vector to store the actual right hand

        kinect.enableDepth();
        kinect.enableUser(SimpleOpenNI.SKEL_PROFILE_ALL);
        kinect.setMirror(true);

        while (true)
        {
            kinect.update();

            kinect.getUsers(userList); // Write the list of detected users into the vector

            if (userList.size() > 0) // Checks if a user is found
            {
                int userId = userList.get(0); // Get first user

                if (kinect.isTrackingSkeleton(userId)) // If successfully calibrated
                {
                    kinect.getJointPositionSkeleton(userId,
                            SimpleOpenNI.SKEL_LEFT_HAND, leftHand); // Put the position of the left hand into that vector

                    kinect.getJointPositionSkeleton(userId,
                            SimpleOpenNI.SKEL_RIGHT_HAND, rightHand); // Put the position of the left hand into that vector

                    kinect.convertRealWorldToProjective(leftHand,
                            convertedLeftHand);

                    kinect.convertRealWorldToProjective(rightHand,
                            convertedRightHand);

                    this.handLeftX = round(convertedLeftHand.x);
                    this.handLeftY = round(convertedLeftHand.y);
                    this.handRightX = round(convertedRightHand.x);
                    this.handRightY = round(convertedRightHand.y);

                    valuesStore.setHandValues(handLeftX, handLeftY, handRightX, handRightY); // ADDED THIS LINE
                }
            }
        }

    }

    // User-tracking callbacks!
    public void onNewUser(int userId)
    {
        System.out.println("Start pose detection");
        kinect.startPoseDetection("Psi", userId);
    }

    public void onEndCalibration(int userId, boolean successful)
    {
        if (successful)
        {
            System.out.println("  User calibrated !!!");
            kinect.startTrackingSkeleton(userId);

        } else
        {
            System.out.println("  Failed to calibrate user !!!");
            kinect.startPoseDetection("Psi", userId);
        }
    }

    public void onStartPose(String pose, int userId)
    {
        System.out.println("Started pose for user");
        kinect.stopPoseDetection(userId);
        kinect.requestCalibrationSkeleton(userId, true);
    }
} 
```

然后添加一个类来存储值，以便另一个类可以访问它。

**值存储.java**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Kinect;

/**
 *
 * @author Tony Nguyen <Tony.Nguyen@HvA.nl>
 */
public class ValueStore
{

    private int leftX, leftY, rightX, rightY = 0;

    public void setHandValues(int leftX, int leftY, int rightX, int rightY)
    {
        this.leftX = leftX;
        this.leftY = leftY;
        this.rightX = rightX;
        this.rightY = rightY;
    }

    public int getLeftX()
    {
        return this.leftX;
    }
} 
```

# android - 使用 AsyncTask 为 Viewpager 加载数据时冻结

> ID：15990204
> 
> 赞同：2
> 
> 时间：2013-04-13T16:40:51.957
> 
> 标签：android, android-asynctask, android-fragments, android-viewpager, adapter

在我的代码中，我有一个带有按钮的活动，该按钮使用 viewpager 调用另一个活动，其中包含三个片段。

```
//...
ViewPager pager = (ViewPager) findViewById(R.id.pager);

ViewPagerAdapter adapterViewPager = new ViewPagerAdapter(getSupportFragmentManager());
        adapterViewPager.addFragment(new FragmentOne());
        adapterViewPager.addFragment(new FragmentTwo());
        adapterViewPager.addFragment(new FragmentThree());

        pager.setOffscreenPageLimit(4);
        pager.setAdapter(adapterViewPager);

//.. 
```

在页面/片段上，有一个从互联网加载数据（图像和文本）的列表视图，使用 AsyncTask 加载此数据

```
public class FragmentOne extends Fragment{

//...
    public class loadEntries extends AsyncTask<String, Void, String>{

        //...

        public String doInBackground(String... urls){
            String url = urls[0];

            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return xml;
        }

        public void onPostExecute(String xml){
            try{
                entrieList = new ArrayList<HashMap<String, String>>();

                Document doc = getDomElement(xml); 

                NodeList nl = doc.getElementsByTagName(KEY_ENTRIE);

                for (int i = 0; i < nl.getLength(); i++) {

                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);

                    map.put(KEY_ID_ENTRIE, getValue(e, KEY_ID_ENTRIE));
                    map.put(KEY_IMAGE_ENTRIE,getValue(e, KEY_IMAGE_ENTRIE));
                    map.put(KEY_TEXT_ENTRIE, getValue(e, KEY_TEXT_ENTRIE));

                    entrieList.add(map);
                }
                theListViewAdapter();

            } catch (Exception e) {
                // Exception
            }
        }
    }
//... 
```

在我用来加快 ViewHolder 进程的每个 ListView 适配器中：

```
//...
  public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.row_gallery_web, null);
        holder = new ViewHolder();
        holder.text_one = (TextView)vi.findViewById(R.id.titleImageItemGalleryWeb); 
        holder.image_row=(ImageView)vi.findViewById(R.id.imageItemGalleryWeb);

        HashMap<String, String> items = new HashMap<String, String>();
        items = data.get(position);

        try { 
            String textentrie = new String(items.get(FRG_gallery_web.KEY_TITLE_IMAGE).getBytes("ISO-8859-1"));
            holder.text_one.setText(android.text.Html.fromHtml(textentrie));
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();}

        imageLoader.DisplayImage(items.get(FRG_gallery_web.KEY_URL_IMAGE), holder.image_row);
        return vi;
    } 
```

**这是我的问题：**

当我按下调用包含 viewpager 的活动的按钮时，加载片段时一切都冻结了。后台进程工作正常，因为我可以正确读取日志。为了更好地解释它，如果我按下调用包含 viewpager 的活动的按钮，在屏幕上显示一个进度条，这也会冻结。

除了每个片段的主体之外，我正在其他线程中从互联网加载数据。

充电时死机是什么原因？

我很感激任何帮助。

谢谢你。问候

# java - 如何为 android 2.3 制作相机应用程序？

> ID：15990206
> 
> 赞同：-3
> 
> 时间：2013-04-13T16:41:15.003
> 
> 标签：java, android, camera

我正在寻找一个教程来创建一个带有适用于 android 2.3 的相机 api 的应用程序。如果我对 java 和 eclipse 没有太多经验，我该怎么做呢？

我只想用它来用应用程序拍照。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:48:02.487

这是 Vogella 的基本教程。他很容易理解并且非常详细。链接是[Android Camera API - Tutorial](http://www.vogella.com/articles/AndroidCamera/article.html)

不过需要注意的是，如果您对 java 不太了解并且有 eclipse 的经验，那么您不应该立即投入到 android 应用程序中。如果你犯了一个简单的错误，你可能会花很多时间试图找出你错在哪里。

我不想阻止任何人学习编程或新技术方面的任何新东西，只要对你所处的水平以及你可以用你的时间完成什么保持现实。您希望从投入学习的时间中获得最大收益。

# java - 游戏物理 - 摩擦

> ID：15990209
> 
> 赞同：0
> 
> 时间：2013-04-13T16:41:26.973
> 
> 标签：java, physics

我非常简单的问题是：我将如何实施摩擦？我尝试的任何方法似乎都不起作用。

哦，还有`speedX`= 1。

这是我的代码：

```
public void update() {
    x += velocityX;
}

public void keyPressed(KeyEvent e) {
    int key = e.getKeyCode();

    if (key == KeyEvent.VK_RIGHT)
        vx = xSpeed;

    if (key == KeyEvent.VK_LEFT)
        vx = -xSpeed;
}

public void KeyReleased(KeyEvent e) {
    int key = e.getKeyCode();

    if (key == KeyEvent.VK_RIGHT)
        vx = 0;

    if (key == KeyEvent.VK_LEFT)
        vx = 0;
} 
```

编辑：

现在，一旦玩家停下来，他就会放慢速度（这很好），但他并没有完全停下来。

```
if (key == KeyEvent.VK_RIGHT) {
        vx = 0.20 * vx;

        if (vx < 0.2)
            vx = 0;

        playerAction = "still";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:56:46.950

摩擦力是与速度相反的力。如果你正在处理力，重力或电场或火箭发动机或更神秘的东西，只需将总力加一，计算为速度乘以某个系数。您可以花哨并使其大小与速度的平方或立方成正比，以获得不同的效果。然后像往常一样计算速度和位置。

如果您不处理力和 F=ma，而是使用仅基于速度的更简单的物理类型（这在视频游戏中很常见），则需要逐渐降低该速度。对于每个时间步，计算 new_velocity = 0.99 * current_velocity。使用任何可以提供适当减速的系数。同样，您可以花哨并以某种方式将速度平方来改变物体减速的感觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:08:33.570

[考虑到具有恒定法向力](http://en.wikipedia.org/wiki/Friction#Dry_friction)的两个表面之间的摩擦力，通常假定摩擦力是恒定力，这会线性减慢物体的速度。其他摩擦力（如空气阻力）通常也具有线性和二次项。如果你想在两个表面之间使用摩擦，你可以这样做：

```
if (vx > 0) vx += -friction / mass;
if (vx < 0) vx +=  friction / mass; 
```

我还包括了足以满足`F = m * a`加速度的质量。如果还有其他力作用在物体上，情况会稍微复杂一些，因为如果物体停止移动，只有在剩余的力超过摩擦力时，它才会再次开始移动。

顺便说一句，如果你想让它在数值上更正确，你可以在模拟中添加一个时间步长：`vX += accelerationX * timeStep;`和`x += vX * timeStep;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-08T01:38:18.147

我曾担任游戏 AI 工程师。这通常涉及制作游戏玩法和物理。我最近不得不自己回答这个问题。这就是我发现这个的原因。这是我的解决方案。我的问题可能与您的问题有些不同，但我的挑战是无论我使用什么帧速率都让它工作。这是我的解决方案：

```
speed -= (speed * (1 - friction)) / fps; 
```

摩擦力始终是介于 0 和 1 之间的浮点数，1 表示无摩擦，0 表示基本上无限摩擦。这确保了与每秒帧数成正比的摩擦力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T18:49:48.780

如果`u`,`m`和`g`in`Ff=umg`对于表面摩擦力的公式是恒定的，那么 a in`F=ma`也将是一个常数。也因为`a = deltaV/s`这意味着速度等于加速度乘以时间（`as=deltaV`）。这意味着对于每个时间间隔，`deltaV`如果相同，`Ff`则保持相同。速度变化只有在不移动时才会停止（`v=0`）。所以我认为最好的方法是检测它是否在移动并应用常数`deltaV`（对于相反的方向）并且在`v`达到零时不应用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-13T16:46:10.757

摩擦力是一种力量，可以减慢您拥有的任何正在移动的物体。所以你需要有一个类似后台线程的东西，它不断地查看所有对象的速度，并慢慢地将每个速度降低到零。

# html - HTML & CSS 布局

> ID：15990211
> 
> 赞同：2
> 
> 时间：2013-04-13T16:41:33.117
> 
> 标签：html, css

我已尝试在下图中对 HTML 布局进行编码，但结果似乎无法正常工作。任何有关该错误的帮助将不胜感激。

HTML：

```
 <header>
       <h1>Header</h1>
       <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam pharetra rutrum tem <br> por. Curabitur at rhoncus orci. Donec ante velit, scelerisque vitae tincidunt sit amet.</p>
    </header>
    <section>
       <h2>Heading</h2>
       <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
       <h2>Heading</h2>
       <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
    </section> 
```

CSS：

```
body {
font-family: 'open sans';
text-align: center;
color: #333;
}

section {
display: block;
}

h1, h2 {
font-weight: 300;
} 
```

所需布局：

![在此处输入图像描述](https://i.stack.imgur.com/TDGgU.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:45:05.147

您应该按标题将您的部分分成两部分，以便您可以分别浮动它们：

```
<header>
   <h1>Header</h1>
   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam pharetra rutrum tem <br> por. Curabitur at rhoncus orci. Donec ante velit, scelerisque vitae tincidunt sit amet.</p>
</header>
<section>
   <article>
      <h2>Heading</h2>
      <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
   </article>
   <article>
      <h2>Heading</h2>
      <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
   </article>
</section> 
```

对于你的 CSS：

```
body {
    font-family: 'open sans';
    text-align: center;
    color: #333;
}

section {
    display: block;
    overflow: hidden;
}

section > article {
    box-sizing: border-box;
    float: left;
    width: 50%;
}

h1, h2 {
    font-weight: 300;
} 
```

我建议使用，因为当您向元素`box-sizing: border-box`添加填充时它不会破坏布局。`<article>`

在这里看小提琴 - [http://jsfiddle.net/teddyrised/XPGb7/](http://jsfiddle.net/teddyrised/XPGb7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:47:59.047

您需要将您的部分包装成两个 div 块：

```
<section>
    <div>
         <h2>Heading</h2>

        <p>Lorem ipsum dolor sit amet, consectetur.
            <br>Curabitur at rhoncus orci. Lorem ipsumm.</p>
    </div>
    <div>
         <h2>Heading</h2>

        <p>Lorem ipsum dolor sit amet, consectetur.
            <br>Curabitur at rhoncus orci. Lorem ipsumm.</p>
    </div>
</section> 
```

因此，您可以应用以下样式：

```
section > div {
    display: inline-block;
    width: 45%;
} 
```

[http://jsfiddle.net/samliew/8XJ7F/3/](http://jsfiddle.net/samliew/8XJ7F/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:46:26.600

将您的内容包装在左右容器中：

```
 <header>
       <h1>Header</h1>
       <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam pharetra rutrum tem <br> por. Curabitur at rhoncus orci. Donec ante velit, scelerisque vitae tincidunt sit amet.</p>
    </header>
    <section>
      <div class="left">
       <h2>Heading</h2>
       <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
      </div>
      <div class="right">
       <h2>Heading</h2>
       <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
      </div>
    </section> 
```

并应用以下样式

```
body {
font-family: 'open sans';
text-align: center;
color: #333;
}

section {
display: block;
}

h1, h2 {
font-weight: 300;
}
.left, .right{
  width: 50%;

}
.left{
 float: left; 
}
.right {
  float: right;
} 
```

工作示例：http: [//jsbin.com/aragem/1/](http://jsbin.com/aragem/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-18T06:37:13.523

这将起作用：

**html：**

```
 <header>
           <h1>Header</h1>
           <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam pharetra rutrum tem <br> por. Curabitur at rhoncus orci. Donec ante velit, scelerisque vitae tincidunt sit amet.</p>
        </header>
        <section>
          <div class="left">
           <h2>Heading</h2>
           <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
          </div>
          <div class="right">
           <h2>Heading</h2>
           <p>Lorem ipsum dolor sit amet, consectetur. <br> Curabitur at rhoncus orci. Lorem ipsumm.</p>
          </div>
        </section> 
```

**CSS：**

```
body {
font-family: 'open sans';
text-align: center;
color: #333;
}

section {
display: block;
}

h1, h2 {
font-weight: 300;
}
.left, .right{
  width: 50%;

}
.left{
 float: left; 
}
.right {
  float: right;
} 
```

# android - Android DiskLruCache 支持的版本？

> ID：15990212
> 
> 赞同：0
> 
> 时间：2013-04-13T16:41:34.397
> 
> 标签：android, android-lru-cache

我有一个简单的问题。我正在开发一个从远程服务器（通过http）加载图像的应用程序。我正在寻找一种缓存这些照片的好方法，并且我已经阅读了有关 LruCache 和 DiskLruCache 的信息。我对第二个非常感兴趣，因为它提供了诸如，如果有人打电话给您并且应用程序关闭，此缓存将允许您在不连接任何地方的情况下取回照片，而 LruCache 仅在应用程序打开时才会这样做。所以这是我的问题：Android 2.3.X 手机能否与 DiskLruCache 配合使用？我希望我的应用程序也可以在“旧”手机上运行，​​而不仅仅是 Android 3.0 上的手机。谢谢

# objective-c - 从 Codeigniter 向 AFNetworking 请求数据

> ID：15990219
> 
> 赞同：1
> 
> 时间：2013-04-13T16:42:03.567
> 
> 标签：objective-c, codeigniter, afnetworking, nsurlrequest

我用 Codeigniter 框架构建了一个简单的网站 (www.imlecturer.arkmon.co.uk)。它根据搜索表单显示人员列表。我的 json 搜索请求是`index.php/find/findemp`. 搜索字段名称是`firstname`和`dept`。现在我想使用 AFNetworking 从 iPhone 发送搜索请求，并显示与表格视图相同的列表，我将从中发送请求以获取更多详细信息 (url: `/index.php/find/display/23`)。我在 iPhone 中有这段代码：

```
NSURL *url = [NSURL URLWithString:@"http://www.imlecturer.arkmon.co.uk/index.php/find/findemp"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation;
operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *req, NSHTTPURLResponse *response, id jsonObject) {

...cell.textLabel.text = [tweet objectForKey:@"firstName"]; 
```

这显示错误并显示整个数据库

```
Error Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type {(
"text/json",
"application/json",
"text/javascript"
)}, got text/html" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:57:40.377

是的，解决方案是按照 Keith Smiley 的建议更改应用程序中的接收器，或者按照本教程和本教程创建自己的[JSON](http://browse-tutorials.com/tutorial/converting-codeigniter-query-json)生成[器](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)。

# antlr - 将一种语言的语法（用 ANTLR 编写）转换为形式语言/数学符号

> ID：15990221
> 
> 赞同：1
> 
> 时间：2013-04-13T16:42:05.463
> 
> 标签：antlr, formal-languages, formal-methods

在我目前的项目中，我的老板分配了一项将领域特定语言的语法（用 ANTLR 编写）表达为正式语言/符号的工作。例如，以下是一小段语法代码。

```
 vocabSpec : 'resources' ':' resources_def ;   // Resource definition 

     resources_def :
          'sensors' ':'   (sensor_def)+   // Sensor definition
          'actuators' ':' (actuator_def)+  // Actuator definition       
         ;

     sensor_def:
        CAPITALIZED_ID  
        (sensorMeasurement_def ';')* ;

      sensorMeasurement_def : 'generate' lc_id ':'  CAPITALIZED_ID ;

    // Actuator definition : Actuator name, actions and its parameters 

      actuator_def: CAPITALIZED_ID  (action_def ';')* ;

      action_def: 'action' CAPITALIZED_ID '(' (parameter_def)? ')'  ;

      parameter_def :  lc_id ':'  CAPITALIZED_ID (',' parameter_def )?  ;

      lc_id: ID ;

      ID  : 'a'..'z'  ('a'..'z' | 'A'..'Z' )* ;

      CAPITALIZED_ID: 'A'..'Z' ('a'..'z' | 'A'..'Z' )*; 
```

据我所知，任何语言的 ANTLR 语法本身就是一个正式的规范。我不知道——我怎样才能指定这个语法是正式的方式。您能否给我一些将上述语法写入正式规范/数学符号的指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:23:10.213

是的，ANTLR 语法是一个正式的系统。以此为基础，你就可以板着脸宣布胜利了。

他可能想要 ANTLR 语法以外的东西。而且，理所当然地，ANTLR 语法中用于构建树等的注释只是混淆了这个问题，各种前瞻也是如此。因此，在您的情况下，我会删除所有注释，并可能将语法重新转换为 IEEE EBNF（请参阅[http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)）。您可以将他指向该网页，并声明您拥有“纯上下文无关语法”。

# python - 错误“元组”对象没有属性“curselection”

> ID：15990237
> 
> 赞同：0
> 
> 时间：2013-04-13T16:43:27.887
> 
> 标签：python, sqlite, list, tkinter, tuples

所以这是我的代码的一部分，

```
def infoButton():
    conn = sqlite3.connect("sqlite.db")
    book = conn.cursor()

    listBox=(a,b,c,d,e,f,g)
    index = listBox.curselection()[0]
    event = listBox.get(index) 
```

a,b,c,d 是 []list 并具有来自“book”表 sqlite 数据库的数据。

然后我把它们放在一个列表框（Tkinter）中，现在我想选择它们并打印出 a,b,c,d,...[list] 中的数据。

但是当我使用按钮命令并且当我调用它时（单击它）它显示

```
>>>return self.func(*args)
>>>........................
>>>index = listBox.curselection()[0]</p>
>>>AttributeError: 'tuple' object has no attribute 'curselection' 
```

有什么办法可以做到这一点。（对不起，我只是一个初学者，如果你不清楚我的问题，请问我）谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:49:41.443

```
listBox=(a,b,c,d,e,f,g) 
```

您将元组分配给`listBox`变量。要将项目添加到列表框使用`insert`方法：

```
for item in ["one", "two", "three"]:
    listBox.insert(END, item) 
```

所以，你有 listBox 与`n`项目：

```
0: 'a b 1  2  3'
1: 'c d some_other_data'
2: ...
n: ... 
```

和一些`List`包含`n`项目的列表：

```
0: ["a","b", 1, 2, 3]
1: ["c","d", some_other_data]
2: ...
n: ... 
```

用户在列表框中选择某行并按下按钮“信息”。您想要获取`List`与列表框中所选行相对应的变量中的项目。如果选定的行是`'c d some_other_data'`，则`infoButton()`打印`["c","d", some_other_data]`。正确的？你的问题对我来说还是有点不清楚。

# php - 更改 PHP 中的字符

> ID：15990238
> 
> 赞同：-1
> 
> 时间：2013-04-13T16:43:30.510
> 
> 标签：php, replace, character

我在替换字符时遇到问题，我不知道该怎么做。在斯洛伐克，我们有带有插播的字符。

如何在输入时更改（例如á）html 代码。如果我有一个类似 Áno 的字符串（翻译为是），我如何将 á 更改为字符串处的 html 代码。

我想在像 :-) 这样的微笑会变成图像的地方进行输入。或者我的插入字符到 html 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:49:55.877

您可以将`strtr`其用于此类目的。我不知道你必须用笑脸等解决什么问题，所以我会给你一个德语变音符号的例子（但不是 HTML 实体，而是标准 ASCII 字符）：

```
$string = strtr($string, array('ä' => 'ae', 'ö' => 'oe', 'ü' => 'ue')); 
```

当然，您也可以使用 HTML 实体代替`ae`etc，您只需查找它们即可。

## 编辑

从你的更新来看（我想在微笑的地方输入：-）会变成图像。或者我在 html 代码中插入的字符。）我想你想同时**使用** `htmlentities`和`strtr`。

`htmlentities`将确保正确显示所有非 ASCII 字符。也看看UTF-8。使用 UTF-8，您不必翻译捷克语字符。

并将`strtr`用适当的 HTML 代码替换您的笑脸。

# html - 降低悬停时的不透明度

> ID：15990243
> 
> 赞同：0
> 
> 时间：2013-04-13T16:44:06.970
> 
> 标签：html, css, hover, opacity

我在一个标签中有三个 div。

```
<nav>
    <div id="home">
        <p>Home</p>
    </div>
    <div id="about">
        <p>About Me</p>
    </div>
    <div id="contact">
        <p>Contact</p>
    </div>
</nav> 
```

我想制作 3 个按钮，在悬停时将其不透明度更改为 1，但我最终没有成功。首先，我将导航的不透明度声明为 0.3，然后在悬停时将其不透明度设置为 1。但悬停时它保持为 0.3。我认为 :hover 伪选择器更具体，所以它们会覆盖旧值，但它们没有。这是CSS代码：

```
#home, #about, #contact {
    text-align: center;
    color: #eedd33;
    display: inherit;
    padding-top: 0px;
    font-family: Tahoma;
    border-right: solid 1px black;
    height: 50px;
    vertical-align: middle;
    padding: 10px;
}

#home:hover, #about:hover, #contact:hover {
    opacity: 1;
} 

nav {
    border: solid 2px black;
    display: inline-block;
    background: orange;
    border-radius: 7px;
    opacity: 0.3;
} 
```

如果你想要的话，我可以发布图片来说明我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:46:51.867

导航的不透明度由子代继承。即使它们的值为 1，它们也只会显示 0.3 的不透明度。将孩子的不透明度定义为 0.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:51:42.853

只需为每个内部 div 创建一个通用类或将 CSS 选择器更改为如下所示：

```
nav > #home:hover,
nav > #about:hover,
nav > #contact:hover {
    opacity: 1;
} 
```

这是 JSFiddle [http://jsfiddle.net/rZgzL/](http://jsfiddle.net/rZgzL/)

# java - Java中的接口Comparable比较什么？

> ID：15990257
> 
> 赞同：-3
> 
> 时间：2013-04-13T16:45:20.300
> 
> 标签：java, compareto

我想知道 Java 中 Comparable 接口的比较。假设我有两个节点，每个节点只有一个实例变量。node1.compareTo(node2) 是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:56:02.927

[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)是一个接口，因此它不包含任何逻辑。一个具体的类`implement Comparable`必须实现`.compareTo()`方法，详见[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)。

实现此接口意味着您希望该类能够将自己与另一个实例进行比较，并返回一个数值，表示它应该被认为是“大于”还是“小于”传入的实例。这通常与集合中的排序一起使用.

例如：

```
public class Node implements Comparable<Node> {

    private int id;
    private String name;

    public int compareTo(Node other) {
       return (this.id < other.id ) ? -1 : (this.id > other.id) ? 1 : 0;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:55:40.660

首先，阅读[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)。

> 该接口对实现它的每个类的对象进行了总排序。这种排序称为类的自然排序，类的 compareTo 方法称为其自然比较方法。

[compareTo()](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)方法的文档：

> 将此对象与指定对象进行比较以进行排序。返回负整数、零或正整数，因为此对象小于、等于或大于指定对象。

这是一个示例：

```
public class MyComparable implements Comparable< MyComparable >{

   private int value;

   @Override
   public int compareTo( MyComparable other ) {
      return this.value - other.value;
   }

   public MyComparable( int i ) {
      value = i;
   }

   public static void main( String[] args ) {
      MyComparable _12    = new MyComparable( 12 );
      MyComparable _42    = new MyComparable( 42 );
      MyComparable _12bis = new MyComparable( 12 );
      System.out.println( _12.compareTo( _42 ));
      System.out.println( _42.compareTo( _12 ));
      System.out.println( _12.compareTo( _12bis ));
   }
} 
```

它输出：

```
-30
30
0 
```

*   -30 (<0) 表示 12 < 42，不足为奇
*   30 (>0) 表示 42 > 12，ok
*   0 (=0) 表示 12 等于 12，看起来是正确的

# java - Maven - 无法执行 JAR

> ID：15990258
> 
> 赞同：18
> 
> 时间：2013-04-13T16:45:28.260
> 
> 标签：java, maven, jar, manifest

在构建了一个示例 mvn 项目后，我添加了我的`org.restlet`依赖项和 Java 代码。

然后，我通过`mvn install`. 最后，我在尝试运行 JAR 时遇到了错误。

```
vagrant$ java -jar target/my-app-1.0-SNAPSHOT.jar 
Failed to load Main-Class manifest attribute from
target/my-app-1.0-SNAPSHOT.jar 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-13T16:51:17.333

您需要使用在清单中设置主类`maven-jar-plugin`

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <mainClass>com.someclass.Main</mainClass>
                </manifest>
            </archive>
        </configuration>
    </plugin> 
```

取自[这里](http://docs.codehaus.org/pages/viewpage.action?pageId=72602)。

**编辑**

如果你想用依赖项打包生成的 jar，你可以使用这个

```
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
    <archive>
      <manifest>
        <mainClass>fully.qualified.MainClass</mainClass>
      </manifest>
    </archive>
    <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
  </configuration>
  <executions>
    <execution>
      <id>make-assembly</id>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

取自[这里](https://stackoverflow.com/a/574650/2071828)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T16:52:22.733

如果您的 jar 中没有清单，则调用 java -jar 将不起作用。

如果您没有清单，请使用此命令：

```
java -cp foo.jar full.package.name.ClassName 
```

# ios - 是否可以使用页面视图控制器仅转动屏幕的一部分？

> ID：15990260
> 
> 赞同：0
> 
> 时间：2013-04-13T16:45:31.813
> 
> 标签：ios

我想将我的屏幕（在 iPhone 上）分成上下两部分。我想以编程方式为屏幕下半部分的转动设置动画。

我只是在 Xcode 中快速使用页面视图控制器模板，但是 IB 不允许我更改作为模板一部分提供的子视图控制器中的主视图的大小（我打算进行实验将其尺寸减小到屏幕的下半部分）。

这是否可以实现让页面仅在屏幕的一部分上显示动画？

（适用于 iOS5 和 6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:39:28.870

对的，这是可能的。部分卷页是呈现模态视图的一种方式。通常，页面卷曲的程度由模态视图控制器上的视图决定（仅将视图放在下半部分，并且只卷曲到一半）。有很多问题详细说明了如何绕过恰好半个视图卷曲，但这里是[更常见的链接](https://stackoverflow.com/questions/6983161/uimodaltransitionstylepartialcurl-half-page)之一。

# android - Android 不可阻挡的应用程序

> ID：15990263
> 
> 赞同：1
> 
> 时间：2013-04-13T16:45:37.813
> 
> 标签：android, permissions

如何制作安卓应用。通过程序从安卓手机中的“应用程序设置”势不可挡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:47:57.610

出于安全原因，这是绝对不可能的。阅读[此](https://stackoverflow.com/questions/9477606/disabling-force-stop-button-in-android)内容以获取更多信息。

# scala - scalaz效果中的简单控制流

> ID：15990264
> 
> 赞同：5
> 
> 时间：2013-04-13T16:45:37.977
> 
> 标签：scala, scalaz, scalaz7

拿这个简单的代码：

```
var line = "";

do {
  println("Please enter a non-empty line: ")
  line = readLine()
} while (line.isEmpty())

println("You entered a non-empty line: " + line) 
```

它绝对不是特别优雅，尤其是不幸的范围界定`line`——然而，我认为它很容易阅读。

现在尝试将其直接转换为scalaz效果，我想出了：

```
def nonEmptyLine: IO[String] = for {
   _ <- putStrLn("Please enter a non-empty line:")
   line <- readLn
   r <- if (line.isEmpty()) nonEmptyLine else IO(line)
}  yield r

(for {
  line <- nonEmptyLine
  _ <- putStrLn("You entered a non-empty line: " + line)
} yield ()).unsafePerformIO 
```

这让我觉得我错过了一些东西，因为这根本不像是一种改进？我缺少一些更高阶的控制流吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:01:04.250

`for`您可以通过跳过符号并使用组合器 `*>`并将`>>=`所有内容连接在一起来使这个（至少可以说）更漂亮：

```
import scalaz._, Scalaz._, effect._, IO._

val prompt = putStrLn("Please enter a non-empty line:")

def report(line: String) = putStrLn("You entered a non-empty line: " + line)

def nonEmptyLine: IO[String] = prompt *> readLn >>= (
  (line: String) => if (line.isEmpty) nonEmptyLine else line.point[IO]
) 
```

接着：

```
scala> (nonEmptyLine >>= report).unsafePerformIO
Please enter a non-empty line:
You entered a non-empty line: This is a test. 
```

不过，总的来说，我不确定您是否应该期望使用编写的代码`scalaz.effect`比直接的命令式解决方案更简洁或更容易阅读。

# groovy - 将 Groovy 闭包注入到充当属性的 Expando

> ID：15990270
> 
> 赞同：1
> 
> 时间：2013-04-13T16:45:58.957
> 
> 标签：groovy, closures, expando

我有一个扩展 Expando 并注入动态属性的类。

```
class Dynamo extends Expando {
}

Dynamo dynamic = [ firstName: 'bob', lastName: 'dobbs' ] 
```

我想创建一个动态属性*fullName*评估为*"$lastName, $firstName"*。

虽然它确实可以做到这一点：

```
dynamic.fullName = { "$lastName, $fullName" } 
```

它需要一个 call() 或隐式调用 with () 来返回字符串，否则它只是给出闭包 toString()

```
assert dynamic.fullName() == 'dobbs, bob' 
```

**通行证**

但

```
assert dynamic.fullName == 'dobbs, bob' 
```

**失败**，因为计算结果为闭包的 toString

我总能做到这一点

```
Dynamo dynamic = [ firstName: 'bob', lastName: 'dobbs', fullName: 'dobbs, bob' ] 
```

但这并不干燥......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:13:55.380

For parameterless methods, Groovy needs parenthesis. I can think of two solutions:

**Solution 1:** Metaclass the getter `getFullName`:

```
Dynamo dynamo = [ firstName: 'bob', lastName: 'dobbs' ]

dynamo.metaClass.getFullName = { "$lastName, $firstName" }

assert dynamo.fullName == 'dobbs, bob' 
```

* * *

**Solution 2:** Hook into the property getters with `getProperty`:

```
Dynamo dyn2 = [ firstName: 'john', lastName: 'doe' ]
dyn2.metaClass.getProperty = { String property ->
    if (property == "fullName") { 
        "${delegate.lastName}, ${delegate.firstName}" 
    } 
}

assert dyn2.fullName == 'doe, john' 
```

# c# - 从csv获取数据到字典c#

> ID：15990272
> 
> 赞同：0
> 
> 时间：2013-04-13T16:46:05.503
> 
> 标签：c#

我需要从 csv 获取数据到字典，但是当我尝试编译此代码时，我收到错误“已添加具有相同键的项目”。怎么做 ？`

```
 Dictionary<string, string> dic = new Dictionary<string, string>();

    public void AddToDic()
     {
         string line = "";
         using (StreamReader sr = new StreamReader(@"words.txt")) 
         {
              while (sr.Peek() != -1)
             {
                 line = line + sr.ReadLine();                
                 string[] splitted = line.Split(' ');
                 dic.Add(splitted[0], splitted[1]);  //ERROR An item with the same key has already been added.        
             }
          }

    }

    //text in words.txt is like: "car auto" newline "water voda" etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:51:49.490

尝试以下检查：

```
if(!dic.ContainsKey(splitted[0])
    dic.Add(splitted[0], splitted[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:58:46.600

由于您没有向我们显示您尝试解析的文件的内容，我们只能猜测。这是我的猜测（后面是一个解决方案）：

*   文件的每一行包含两个单词
*   第一个词应该成为字典的键
*   该文件可能多次包含相同的关键字

由于字典需要唯一的键，并且文件可能多次包含相同的键，因此每个键可以有多个值。所以更好的数据结构可能是：`Dictionary<string, string[]>`.

您可以使用`File.ReadLines`或`File.ReadAllLines`读取文件的行，然后使用 LINQ 将其转换为字典：

```
Dictionary<string, string[]> result =
    File.ReadLines("words.txt")
        .Select(line => line.Split(' '))
        .GroupBy(arr => arr[0])
        .ToDictionary(gr => gr.Key,
                      gr => gr.Select(s => s[1]).ToArray()); 
```

说明：读取一行后，将其拆分为`string[]`. 结果按将成为字典键的第一个单词分组。每个组都是一个`IEnumerable<string[]>`，并且只有每个数组中的第二个值被选择到结果中。

顺便说一句：如果您替换`ReadLines`为`ReadAllLines`文件将立即读取，然后在处理之前将其关闭。`ReadLines`逐行读取并在处理过程中保持文件打开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T16:53:39.277

字典键必须是唯一的

```
if(!dic.ContainsKey(splitted[0]))
   dic.Add(splitted[0], splitted[1]);  //ERROR An item with the same key 
```

将阻止错误发生，但可能不是您想要的行为。想想你想如何处理重复的键（文件加载失败，只存储你看到的第一个键，只存储你看到的最新的，如果发生冲突，在键名的末尾附加一个计数器）

# android - 在 Android 中实现日历同步功能

> ID：15990275
> 
> 赞同：0
> 
> 时间：2013-04-13T16:46:12.350
> 
> 标签：android, android-calendar

我正在开发一个应用程序，以使 android 日历与服务器上的日历同步，因为我发现有一个 Account Manager API 可以在您的设备上同步日历和联系人，但我对如何实现它的实现方式为零服务器上的日历，以便它自动与 android 设备上存在的日历同步，如果可能的话，您能帮我了解服务器和客户端的实现吗？请分享一些代码示例，以便我可以在脑海中了解同步过程.

客户经理 api 真的是我需要的，还是我需要一些不同的方法来获得相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:15:25.463

你需要的是一个同步适配器来管理你的服务器和安卓设备之间的同步。

请参阅[Sample SyncAdapter 项目](https://android.googlesource.com/platform/development/+/master/samples/SampleSyncAdapter/)以了解同步适配器的概念。

我写了一篇关于[如何使用 Android 的 CalendarContract 内容提供程序](http://www.grokkingandroid.com/androids-calendarcontract-provider/)的博文，并且在 Android 的网站上也有一个[很好的指南，](http://developer.android.com/guide/topics/providers/calendar-provider.html)其中也简要介绍了同步适配器。

[需要AccountManager](https://developer.android.com/reference/android/accounts/AccountManager.html) API 在设备上创建一个帐户，然后可以使用该帐户登录到您的服务器。

# sql - 在 apex 脚本文件中创建超类型和子类型对象时出错

> ID：15990282
> 
> 赞同：1
> 
> 时间：2013-04-13T16:46:34.963
> 
> 标签：sql, database, object, oracle9i

我创建了一个 person 类型的对象，我想创建一个名为 student typ 的子类型，但是当我尝试使用以下脚本在脚本文件中执行此操作时出现错误：

* * *

```
CREATE TYPE person_typ AS OBJECT(
first_name         VARCHAR2(30),
last_name          VARCHAR2(30),
dob                DATE,
telephone_Number   VARCHAR2(20),
mobile_Number      VARCHAR2(15),
address_Line1      VARCHAR2(25),
address_Line2      VARCHAR2(25),
city               VARCHAR2(30),
town               VARCHAR2(30),
postcode           VARCHAR2(8))
NOT FINAL;

CREATE TYPE student_typ UNDER person_typ(
student_Number    VARCHAR2(20),
student_Email    VARCHAR2(30))
; 
```

显示的错误是：

```
Error at line 13: PLS-00103: Encountered the symbol "CREATE" 0.03 seconds 
```

# php - 有没有办法在 PHP 中按表名分隔 MySQL 查询结果？

> ID：15990284
> 
> 赞同：2
> 
> 时间：2013-04-13T16:46:38.590
> 
> 标签：php, mysql, sql

例子：

```
SELECT chapter.id, book.title, book.author FROM chapter 
INNER JOIN book ON (chapter.book = book.id) 
```

获取该查询后，我想得到这样的东西：

```
Array
(
    [0] => Array
        (
            [chapter] => Array
                (
                    [id] => 1
                )

            [book] => Array
                (
                    [title] => Lorem Ipsum
                    [author] => John Doe
                )

         )

) 
```

更好的是，**stdClass**对象。

好吧，经过一段时间的搜索和工作，我找到了一种通过使用[php-sql-parser](https://code.google.com/p/php-sql-parser/)解析 SQL 语句来做我想做的事情的方法，但这对于我的问题来说确实不是一个好的解决方案。

我对此有特定的原因，解决方案将对我的项目大有裨益。虽然我真的不认为有更简单的方法可以做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:08:14.920

一种方法是命名（别名）结果集的列，以便您的 PHP 代码知道在哪里“归档”它们，例如，表和列拆分为`:`：

```
SELECT chapter.id as `chapter:id`, book.title as `book:title`, book.author as `book:author` ... 
```

然后，当从 PDO/mysqli 检索结果时，您可以拆分结果键以了解存储数据的位置：

```
$formatted_row = array();
foreach ( $db_row as $column_alias => $value )
{
     list($table, $column) = explode(':', $column_alias);
     $formatted_row[$table][$column] = $value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:01:42.850

该`fetch_fields()`功能将为您提供所需的信息。剧本

```
<?php
$sql = "
SELECT u.user, h.db, RAND() x FROM mysql.user u
LEFT JOIN mysql.host h ON h.host = u.host
";
$conn = new mysqli('localhost', 'root', '', 'mysql');
$stmt = $conn->query($sql);
$fields = $stmt->fetch_fields();
print_r($fields); 
```

产生以下输出：

```
Array(
    [0] => stdClass Object(
            [name] => user
            [orgname] => User
            [table] => u
            [orgtable] => user
            [def] => 
            [db] => mysql
            ...
        )
    [1] => stdClass Object(
            [name] => db
            [orgname] => Db
            [table] => h
            [orgtable] => host
            [def] => 
            [db] => mysql
            ...
        )
    [2] => stdClass Object(
            [name] => x
            [orgname] => 
            [table] => 
            [orgtable] => 
            [def] => 
            [db] => 
            ...
        )
) 
```

因此您可以使用`db`and`orgtable`字段来确定每个字段来自哪个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T23:22:48.923

```
$query         = $myPdoInstance->prepare('SELECT lorem FROM ipsum...');
$metaData      = array();
$data          = new stdClass;
$i             = 0;
$tablesIdField = 'id';

$query->execute();

while ($columnsMeta = $query->getColumnMeta($i++)) {
    $metaData[] = $columnsMeta;
}

foreach ($query->fetch(PDO::FETCH_NUM) as $key => $columnValue) {

    $currentTable = $meta[$key]['table'];

    if (!isset($data->{$currentTable})) {
        $data->{$currentTable} = new stdClass;
    } elseif (!is_object($data->{$currentTable})) {
        $prev                                    = $data->{$currentTable};
        $data->{$currentTable}                   = new stdClass;
        $data->{$currentTable}->{$tablesIdField} = $prev;
    }

    $data->{$currentTable}->{$meta[$key]['name']} = $columnValue;
} 
```

这是我所做的一个**非常简单的例子。**这对我的项目来说是一个很好的解决方案。我在我的项目中使用的代码太复杂了，并且实现了类，我无法在此处发布它。

所以，如果这个例子中有任何语法错误，我很抱歉！

# unix - 使用 for 循环并将变量传递给命令

> ID：15990290
> 
> 赞同：1
> 
> 时间：2013-04-13T16:47:11.987
> 
> 标签：unix, grep

我有两个文件，table1.txt 和 table2.txt，第一列都包含字符 chr1、chr2、chr3。我想迭代一个命令，以便它从两个表中 greps 只包含 chr1、chr2、chr3 之一的行，并将表的这个子集（比如所有带有 chr1 的行）传递给另一个命令（比如 cat，它接受两个表作为输入）。然后将输出保存为文件（例如 new_chr1.txt 用于对 chr1 行进行操作）。

以下是两个表的虚拟表示：

表1.txt：

```
chr1    5   55  1
chr1    14  62  1
chr1    47  97  1
chr2    4   52  1
chr2    20  70  1
chr2    25  75  1
chr3    3   52  1
chr3    6   56  1
chr3    10  60  1 
```

表2.txt：

```
chr1    0       199
chr1    200     399
chr1    400     599
chr2    600     799
chr2    800     999
chr2    1000    1199
chr3    1200    1399
chr3    1400    1599
chr3    1600    1799 
```

我尝试了以下代码：

```
for i in chr1 chr2 chr3
mkfifo table1
mkfifo table2
grep -w $i table1.txt > table1 &
grep -w $i table2.txt > table2 &
cat table1 table2 > new_$i.txt
done 
```

以下是从我的屏幕复制的，以显示我在每个阶段遇到的错误：

```
for i in chr1 chr2 chr3
mkfifo table1
-bash: syntax error near unexpected token `mkfifo'
mkfifo table2
grep -w $i table1.txt > table1 &
[5] 1969
grep -w $i table2.txt > table2 &
[6] 1970

cat table1 table2 > new_$i.txt
[5]   Exit 1                  grep -w $i table1.txt > table1
[6]   Exit 1                  grep -w $i table2.txt > table2
done
-bash: syntax error near unexpected token `done' 
```

我无法弄清楚出了什么问题。`for`如果我只是在没有循环和没有的情况下运行上述命令`mkfifo`，并通过指定要匹配的模式（比如 chr1），它工作正常。知道如何进行这项工作吗？

顺便说一句，在我的实际代码中，我必须`cat`在两个`grep`ed 文件上运行另一个命令，而不是 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:50:21.637

`for`循环需要 a来`do`启动循环体：

```
for i in chr1 chr2 chr3
do
    mkfifo table1
    mkfifo table2
    grep -w $i table1.txt > table1 &
    grep -w $i table2.txt > table2 &
    wait          # Make sure the grep commands are complete before using the results
    cat table1 table2 > new_$i.txt
done 
```

可能还有其他问题，但这就是您收到“ `-bash: syntax error near unexpected token `mkfifo'`”错误的原因（该`done`错误是因为它认为您还没有进入`for`循环）。

顺便说一句，您应该`wait`在启动循环中的最终命令之前使用，以确保`grep`操作完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:56:26.910

您可以通过以下方式实现相同的目的：

```
for i in chr1 chr2 chr3
do
        grep -hw $i table[12].txt > new_$i.txt
done 
```

它同时抓取 table1.txt 和 table2.txt。停止在`-h`每一行上打印文件名。

如果您想单独执行它们，您可以将 table2 的输出附加`>>`：

```
grep -w $i table1.txt > new_$i.txt
grep -w $i table2.txt >> new_$i.txt 
```

# ios - CGAffineTransformRotate 的弧度值出错

> ID：15990293
> 
> 赞同：1
> 
> 时间：2013-04-13T16:47:17.960
> 
> 标签：ios, objective-c, uiview, rotation, uiviewanimation

当我旋转踏板时，我正在尝试旋转自行车车轮。

当我逆时针旋转时，没有问题。

但是当我顺时针旋转大约 2-3 秒时，图像开始以快速逆时针旋转。

当我尝试记录 angleInRadians 值时：逆时针旋转时，angleInRadians 值最多从 -0.05 变化到 -0.1。angleInRadians 值在开始时将在 0.05 到 0.1 之间，但突然值变为 -6.1，-6.2 类似的值。请参阅下面的日志。

我改变了图像的锚点。我不确定这是否重要。

对不起我的英语和格式不好

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    self.PedalTurn.layer.anchorPoint = CGPointMake(0.5, 0.6);
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint center = CGPointMake(CGRectGetMidX(self.PedalTurn.bounds), CGRectGetMidY(self.PedalTurn.bounds));
    CGPoint currentPoint = [touch locationInView:self.PedalTurn];
    CGPoint previousPoint = [touch previousLocationInView:self.PedalTurn];
    CGFloat angleInRadians = atan2f(currentPoint.y - center.y, currentPoint.x - center.x) - atan2f(previousPoint.y - center.y, previousPoint.x - center.x);
    self.PedalTurn.transform = CGAffineTransformRotate(self.PedalTurn.transform, angleInRadians);
}

Angle in radians: 0.110071
Angle in radians: 0.0984247
Angle in radians: 0.107355
Angle in radians: 0.118767
Angle in radians: 0.121201
Angle in radians: 0.112823
Angle in radians: 0.0899732
Angle in radians: 0.0883234
Angle in radians: 0.105448
Angle in radians: 0.0884745
Angle in radians: 0.0983613
Angle in radians: 0.108684
Angle in radians: 0.119307
Angle in radians: 0.108768
Angle in radians: 0.111302
Angle in radians: 0.145414
Angle in radians: -6.14848
Angle in radians: -6.13048
Angle in radians: -6.12109
Angle in radians: -6.14578
Angle in radians: -6.13917
Angle in radians: -6.11675
Angle in radians: -6.13025
Angle in radians: -6.15015
Angle in radians: -6.14989
Angle in radians: -6.15097
Angle in radians: -6.14732
Angle in radians: -6.15547
Angle in radians: -6.136
Angle in radians: -6.13241 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:10:53.650

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T05:00:22.530

atan2 的极限是 pi，所以当你达到 pi 的阈值（圆圈左侧的水平）时，发生的是你的 lastTouch 在第二象限真的接近 180 度，而你当前的触摸在第三象限真的接近-180度。在 atan2 [http://en.wikipedia.org/wiki/Atan2](http://en.wikipedia.org/wiki/Atan2)上阅读此处。

根据您的 angleInRadians，179.99 - (-179.99) = 359.98，或大约 2pi，即 ~6.28。因此，当您达到该阈值时，您实际上添加了接近 2pi，这就是大约 6.xxx 的来源。

# java - 通知管理器

> ID：15990295
> 
> 赞同：0
> 
> 时间：2013-04-13T16:47:26.373
> 
> 标签：java, android, notifications

我想为我的应用创建通知

它告诉我构造函数 Notification(,,) 已弃用

并且方法 .setLatestEventInfo() 也已弃用

我应该怎么做？

这是类代码：

```
public class ReminderService extends WakeReminderIntentService {

public ReminderService() {
    super ("ReminderService");
}

@Override
void doReminderWork(Intent intent) {
    long rowid = intent.getExtras().getLong(ReminderProvider.COLUMN_ROWID);

    NotificationManager mgr = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    Intent notificationIntent = new Intent (this, ReminderEditActivity.class);
    notificationIntent.putExtra(ReminderProvider.COLUMN_ROWID, rowid);
    PendingIntent Pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT);
    Notification note=new Notification(android.R.drawable.stat_sys_warning, getString(R.string.notify_new_task_message), System.currentTimeMillis());
    note.setLatestEventInfo(this, getString(R.string.notify_new_task_title), getString(R.string.notify_new_task_message), Pi);
    note.defaults |= Notification.DEFAULT_SOUND;
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    int id = (int) ((long) rowid);
    mgr.notify(id, note);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:57:38.783

为此使用 NotificationCompat.Builder。[http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-20T19:05:33.223

```
NotificationCompat.Builder mBuilder =
new NotificationCompat.Builder(this)
.setSmallIcon(R.drawable.notification_icon)
.setContentTitle("My notification")
.setContentText("Hello World!")
.setContentIntent(pendingIntent); 
```

尝试类似的东西

# javascript - 查找数组中具有特定值的所有索引

> ID：15990299
> 
> 赞同：1
> 
> 时间：2013-04-13T16:47:55.157
> 
> 标签：javascript, jquery, arrays

我正在做一些显示或隐藏数字的事情，具体取决于列表上的复选框是否被选中。

为此，我需要首先收集一个仅包含已选中复选框的数组，以便稍后使用它们的值与列表进行比较。

为了做到这一点，我在 jQuery 的帮助下编写了一个小函数：

```
var findIndexesWithValue = function(arr, val) {
    //Find the correct indexes and put them in an array, for later use.
    var indexArray = [];

    $.grep(arr, function(elementOfArray, indexInArray) {
        //Get all indexes where the value corresponds
        if (arr[indexInArray] === val) {
            indexArray.push(indexInArray);
        }
    });

    return indexArray;
}; 
```

对于那些不熟悉的人：http `$.grep`: [//api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

我的问题是：我在这里重新发明轮子吗？我这样做是因为`indexOf()`只返回遇到值的第一个索引，而不是全部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:00:43.070

`$.grep`对于这种情况，这并不是最好的 jQuery 数组方法。

`$.map`将更有效地工作

```
var indexArray = $.map(arr, function(elementOfArray, indexInArray) {
        return elementOfArray == val ? indexInArray : null;
});

console.log( indexArray); 
```

演示：http: [//jsfiddle.net/x8qgq/1/](http://jsfiddle.net/x8qgq/1/)

# java - Maven 3.0.5 + Windows 8 + jdk 7 问题

> ID：15990306
> 
> 赞同：1
> 
> 时间：2013-04-13T16:48:09.967
> 
> 标签：java, maven, windows-8, java-7

我试图弄清楚我的行家发生了什么。前几天我切换到 Windows 8，发现使用 maven 构建应用程序有问题（请参阅底部的失败消息）：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.400s
[INFO] Finished at: Sat Apr 13 18:36:56 CEST 2013
[INFO] Final Memory: 18M/178M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project Example: Could not resolve dep
endencies for project 
(Here are lots of libs)
Could not transfer artifact com.sun.xml.bind:jaxb-impl:pom:2.2.4-1 from/to central (
http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org
 refused: connect: Address is invalid on local machine, or port is not valid on
remote machine -> [Help 1] 
```

当切换到 java 6 时，一切工作正常。我什至禁用了 Windows 防火墙，但没有任何成功。也许有人遇到过这个问题？

这是我的环境：

*   视窗 8 x64
*   JDK 7u17（同时检查 x86 和 x64）
*   Maven 3.0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:16:24.963

好吧，答案看起来很简单，我很尴尬，但是...... 正如我在上面所写的，我禁用了防火墙/防病毒，但没有任何效果。但是，我没有将 java 添加为我的防病毒软件的例外，事实证明，它正在扫描我的应用程序，并且如果它被禁用，则不允许某些访问事件...。这很奇怪，但在 AV 中添加一个例外会有所帮助。抱歉打扰了……

# r - 了解警告信息

> ID：15990308
> 
> 赞同：0
> 
> 时间：2013-04-13T16:48:13.783
> 
> 标签：r

我的代码如下：

```
m<-c(9,17,33,65,129,257,513)
results<-matrix(,7,5)
results[,1]<-m

#methods
trap<-function(a,b,m,func)
{
  h=(b-a)/(m-1)
  x<-seq(a,b,h)
  y<-function(x) { 
    z<-eval(parse(text=func)) 
    return(z) 
  }
  result<-h*(0.5* y(x[1]) + sum(y(x[2:(length(x)-1)]))+ 0.5*y(x[length(x)]) )
  result
} 
```

当我运行以下命令时：`trap(0,5,results[,1],"x^2")` 我得到了预期的输出，但我也得到了一条令人讨厌的警告消息：

```
Warning messages:  
1: In if (n < 0L) stop("wrong sign in 'by'
argument") :   the condition has length > 1 and only the first element
will be used  
2: In if (n > .Machine$integer.max) stop("'by' argument
is much too small") :   the condition has length > 1 and only the
first element will be used  
3: In 0L:n : numerical expression has 7
elements: only the first used  
4: In (0L:n) * by :   longer object
length is not a multiple of shorter object length 
5: In if (by > 0)
pmin(x, to) else pmax(x, to) :   the condition has length > 1 and only
the first element will be used 
```

所以我开始试图理解发生了什么，似乎一切都指向这一点：`x<-seq(a,b,h)`但我的序列永远不应该是负数，它应该总是创建一个大于 1 的长度（我不确定其他警告消息的含义） .

有人可以帮助我理解此消息，以便我可以更正我被警告的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:11:05.493

You can trigger errors so that traceback() will be available for debugging of warnings, athough that is mprobably not needed here;

```
 options(warn=2) # usual setting is 1 
```

Type this to see what your function is seeing for the arguments:

```
> c(a=0, b=5,m= results[,1])
  a   b  m1  m2  m3  m4  m5  m6  m7 
  0   5   9  17  33  65 129 257 513 
```

So that's where the first warning about `seq( , , by=.)` getting an excessively long argument comes from, (since `h` will be as long as the 'm' argument was. I think that mostly explains the other warnings as well. I do not know of a way to get the warn() mechanism to skip the first or up to the n-th waring but if you dropped into the browser you could do that:

```
?browser 
```

You could also search SO for best practices for [r] debugging

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:29:35.283

你确定你得到了预期的输出吗？无论我怎么读`?seq`，看起来“by”参数应该是一个数字，而不是你的例子中的向量。这就是您收到讨厌警告的原因，因为`h`不是单个数字而是向量。

你得到的序列`seq(a,b,h)`很奇怪：

```
> seq(a,b,h)
[1] 0.00000000 0.31250000 0.31250000 0.23437500 0.15625000 0.09765625 0.05859375
[8] 4.37500000 2.50000000 
```

我认为`seq`它是为生成单调序列而设计的，但是从你的例子中得出的结果既不是单调的，也没有任何意义......

你真的确定最终的结果是你所期望的吗？无论如何，这看起来像是对 的滥用`seq`，除非我遗漏了什么。

# database - 预定义的 ORACLE PL/SQL 异常在哪里？

> ID：15990310
> 
> 赞同：2
> 
> 时间：2013-04-13T16:48:22.877
> 
> 标签：database, oracle, plsql, oracle11g

在哪里可以找到所有预定义 ORACLE PL/SQL 异常的完整列表？

我看过 SQLCODE:-942 和 SQLCODE:-02289 是不存在的序列和表的异常代码。但是无论我找不到任何官方文件来解释上述两个错误代码。所以问题是这些 oracle 预定义的异常吗？因为我想用这两个错误代码来捕捉这两种类型的异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T18:17:47.597

您使用了“异常”一词，但看起来您是在询问错误代码值，特别是 SQLCODE。我会尝试回答这两个问题。:-)

要查找数据库中定义的预定义异常，您可以查看 SYS.STANDARD 包。这是定义标准异常的地方，例如 NO_DATA_FOUND 和 TOO_MANY_ROWS。如果您对捕获特定的 SQLCODE 感兴趣，这是一个很好的地方，因为它可能使您不必定义自定义异常并使用`PRAGMA EXCEPTION_INIT`.

要查找错误代码值的完整列表，包括 SQLCODE、编译器错误等，您应该查看您正在使用的数据库版本的 Oracle 数据库错误消息手册版本。在上面的回复中，@Mat 引用了[11.1 手册](http://docs.oracle.com/cd/B28359_01/server.111/b28278/toc.htm)。可在[此处](http://docs.oracle.com/cd/E11882_01/server.112/e17766/toc.htm)找到 11.2 手册。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:19:39.873

我能找到的最接近的是[10g PDF](http://docs.oracle.com/cd/B19306_01/server.102/b14219.pdf)。我能找到的 11g 的唯一错误代码列表是[HTML 文档](http://docs.oracle.com/cd/E11882_01/server.112/e17766/toc.htm)。对我来说，这两个列表都不包含 ORA-00942 代码让我感到很奇怪，尽管它很容易解释。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-29T21:03:03.033

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261.pdf](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261.pdf)，这是 Oracle 数据库 PL/SQL 语言参考手册，查找预定义的 PL/SQL 异常。

# android - Android ALTER SQL 数据库 - 无法打开/读取台式电脑

> ID：15990311
> 
> 赞同：-4
> 
> 时间：2013-04-13T16:48:38.200
> 
> 标签：android, sqlite, alter

在使用`ALTER TABLE`向表中添加列后，我无法使用许多`SQLite`编辑器或浏览器在 Windows 下打开数据库。似乎问题出在 SQLite 版本上。他们支持。

是否有可以打开修改过的数据库的工具`ALTER TABLE`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:48:38.200

是的，

我在搜索工具 2 小时后发现 - SQLiteSpy（免费 - 阅读许可证）

链接： [http :](http://www.yunqa.de/delphi/doku.php/products/sqlitespy/index) [//www.yunqa.de/delphi/doku.php/products/sqlitespy/index http://download.cnet.com/SQLiteSpy/3000-2065_4-75451503.html](http://download.cnet.com/SQLiteSpy/3000-2065_4-75451503.html)

# jsf - 更新primefaces的行编辑数据表并将其保存在数据库中

> ID：15990314
> 
> 赞同：1
> 
> 时间：2013-04-13T16:48:47.550
> 
> 标签：jsf, primefaces, ejb

我正在使用prime faces 3.4.2，并且正在尝试使用行编辑数据表更新包含另一个对象列表的实体。我的问题是，当我验证更改时，实体的简单属性在数据库中更新，但列表没有。我不知道如何将整个对象保存在数据库中。

在这里你可以找到编辑页面：

`

```
<p:panel style="width:1000px;  ;font: lighter 70.5% Arial, Helvetica, sans-serif ; " header="Informations Générales">
        <p:growl id="growl" showDetail="true" sticky="true" style="font-size: small;"  />  
            <h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel value="Société" />
                <p:inputText id="custSoc" value="#{CustomerCtrl.selectedCust.company}"/>

                <h:outputLabel value="Secteur d'activité" />
                <p:inputText id="custActivite" value="#{CustomerCtrl.selectedCust.secteurActivite}"  />

                <h:outputLabel value="Nom du propriétaire" />
                <p:inputText id="custprop" value="#{CustomerCtrl.selectedCust.proprietaire}"  />
           </h:panelGrid>

        <p:tabView id="tabView">    
            <p:tab title="Coordonnées">

<p:growl id="messages" showDetail="true"/>  

<p:dataTable var="cu" value="#{CustomerCtrl.selectedCust.coordonnee}" id="carList" editable="true">  

    <f:facet name="header">  
       Coordonnées  
    </f:facet>  

        <p:columnGroup type="header">  
        <p:row>  
            <p:column colspan="5" headerText="Adresses"  />                    
            <p:column colspan="5" headerText="Contacts" />  

        </p:row>  

        <p:row>  
            <p:column headerText="Num" style="width:2cm"/>  
            <p:column headerText="Rue/Avenue" style="width:3cm"/>  
            <p:column headerText="Code postal" style="width:2cm" />                   
            <p:column headerText="Ville" style="width:2.5cm" /> 
            <p:column headerText="Pays" style="width:2.5cm" />
            <p:column headerText="Fixe" style="width:2cm"/>
            <p:column headerText="Mobile" style="width:2cm"/>
            <p:column headerText="Fax" style="width:2cm"/>
            <p:column headerText="E-mail" style="width:3.7cm"/>
            <p:column headerText=" " />

        </p:row>
        </p:columnGroup>

    <p:ajax event="rowEdit" listener="#{CustomerCtrl.onEdit}" update=":form:messages" />  
    <p:ajax event="rowEditCancel" listener="#{CustomerCtrl.onCancel}" update=":form:messages" />  

    <p:column headerText="Num">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.number}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.number}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column> 

    <p:column headerText="Rue/Avenue">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.street}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.street}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>  

    <p:column headerText="Code postal">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.zipcode}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.zipcode}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column> 

     <p:column headerText="Ville">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.city.text}" />  
            </f:facet>  
            <f:facet name="input">  
                <h:selectOneMenu value="#{cu.city.text}" style="width:100%">  
                    <f:selectItems value="#{CustomerCtrl.cityList}" style="width:100%" 
                        var="city"   
                        itemLabel="#{city}"  
                        itemValue="#{city}" />  
                </h:selectOneMenu>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>  

     <p:column headerText="Pays" >  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.country.text}" style="width:100%" />  
            </f:facet>  
            <f:facet name="input">  
                <h:selectOneMenu value="#{cu.country.text}" style="width:100%">  
                    <f:selectItems value="#{CustomerCtrl.countryList}"  style="width:100%"
                        var="color"   
                        itemLabel="#{color}"  
                        itemValue="#{color}" />  
                </h:selectOneMenu>  
            </f:facet>  
        </p:cellEditor>  
    </p:column> 

    <p:column headerText="Fixe">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.phone}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.phone}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>

    <p:column headerText="Mobile" >  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.mobile}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.mobile}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>

    <p:column headerText="Fax" >  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.fax}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.fax}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>

    <p:column headerText="E-mail" >  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cu.email}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cu.email}" style="width:90%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>

    <p:column style="width:6%">  
        <p:rowEditor />  
    </p:column>  

</p:dataTable>

           </p:tab>
           <p:tab title="Compte">
                <h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel value="Login"  />
                <p:inputText id="userLogin" value="#{CustomerCtrl.selectedCust.login}"  />

                <h:outputLabel value="Mot de passe"  />
                <p:password id="userpass" value="#{CustomerCtrl.selectedCust.password}"  />
                </h:panelGrid>
            </p:tab>
              <p:tab title="Applications">
                <h:panelGrid columns="2" cellpadding="5">

                </h:panelGrid>
            </p:tab>
              <p:tab title="Interventions">
                <h:panelGrid columns="2" cellpadding="5">   
                </h:panelGrid>
            </p:tab>

            </p:tabView> 
```

```
 </p:panel>
      <br/> 
```

`

这是我的托管豆：`@ManagedBean(name = "CustomerCtrl") @ViewScoped public class CustomerController implements Serializable {

```
/**
 * 
 */
private static final long serialVersionUID = 1L;

private int idSelected;

private Customer selectedCust ;

private Coordonnee selectedCoord = new Coordonnee();

private Coordonnee filteredCoord = new Coordonnee();

private List<Customer> filteredCusts;

private int cityId;

private int countryId;

private List<SelectItem> cityList = new ArrayList<SelectItem>();

private List<SelectItem> countryList = new ArrayList<SelectItem>();

private List<Customer> custmrs = new ArrayList<Customer>();

private List<Coordonnee> coordonnees = new ArrayList<Coordonnee>();

private Coordonnee selectedCustomerCoordonne;

@EJB
private SettingsBean settingBean;

public CustomerController() {
    if (selectedCust != null) {
        coordonnees = (List<Coordonnee>) settingBean.FindCoordonneeByCustomer(selectedCust.getId());
    }
}

public void createCustomer() {
    System.out.println("hello createCustomer");
    System.out.println("selectedcust :"+selectedCust.getCompany());
    System.out.println("selectedcustCoordonnee 1 :"+selectedCustomerCoordonne);
    if(selectedCust==null){
        System.out.println("entré");
        selectedCust= new Customer();
        System.out.println("nouvelle instance créé");
        settingBean.createCustomer(selectedCust);
        settingBean.createCoordonnee(selectedCustomerCoordonne);
        System.out.println("Nouveau client " + selectedCust.getCompany() + " ajoutée");
    }
    else{
        System.out.println("editer");
        selectedCust.setCoordonnee(coordonnees);
        settingBean.editCustomer(selectedCust);
        System.out.println("client " + selectedCust.getCompany() + " édité");   
    }
}

public List<Customer> getCustmrs() {
    custmrs = settingBean.findAllCustomers();
    return custmrs;
}

public void setCustmrs(List<Customer> custmrs) {
    this.custmrs = custmrs;
}

public void preRenderView() {
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance()
            .getExternalContext().getSession(true);
}

public Customer getSelectedCust() {
    if (selectedCust == null) {
        selectedCust = (Customer) FacesContext.getCurrentInstance()
                .getExternalContext().getSessionMap().get("selectedCust");
        System.out.println("Par session");
        if (selectedCust == null) {
            selectedCust = new Customer();
            selectedCust.setCoordonnee(new ArrayList<Coordonnee>());
        } else
        selectedCust.setCoordonnee(settingBean
                .FindCoordonneeByCustomer(selectedCust.getId()));

    }
    return selectedCust;
}

public void setSelectedCust(Customer selectedCust) {
    this.selectedCust = selectedCust;
}

public List<Customer> getFilteredCusts() {
    return filteredCusts;
}

public void setFilteredCusts(List<Customer> filteredCusts) {
    this.filteredCusts = filteredCusts;
}

public List<Coordonnee> getCoordonnees() {
    if (selectedCust != null) {
        coordonnees = (List<Coordonnee>) settingBean.FindCoordonneeByCustomer(selectedCust.getId());
    }
    return coordonnees;
}

public void setCoordonnees(List<Coordonnee> coordonnees) {
    this.coordonnees = coordonnees;
}

public void setCustomerToEdit(Customer customerToEdit) {
}

public String removeCustomer() {
    if (selectedCust != null) {
        System.out.println("in delete");
        String selected = selectedCust.getCompany();
        System.out.println("supprimer " + selected + "");
        custmrs.remove(selectedCust);
        settingBean.removeCustomer(selectedCust);
        System.out.println("client supprimé");
    }
    return "";
}

    public String removeCustomercoordonnee() {
    if (selectedCustomerCoordonne != null) {
        System.out.println("coordonne in delete");
        String selected = selectedCustomerCoordonne.getEmail();
        System.out.println("supprimer " + selected + "");
        settingBean.removeCustomerCoordonnee(selectedCustomerCoordonne);
        System.out.println("coordonne supprimé");
    }
    return "";
}

public String editCustomer() {
    if (selectedCust != null) {
        FacesContext.getCurrentInstance().getExternalContext()
                .getSessionMap().put("selectedCust", selectedCust);
        System.out.println("selected "
                + FacesContext.getCurrentInstance().getExternalContext()
                        .getSessionMap().get("selectedCust"));
    }
    return "customeradd.xhtml?faces-redirect=true";

}

public int getCityId() {
    return cityId;
}

public void setCityId(int cityId) {
    this.cityId = cityId;
}

public int getCountryId() {
    return countryId;
}

public void setCountryId(int countryId) {
    this.countryId = countryId;
}

public List<SelectItem> getCityList() {
    cityList = new ArrayList<SelectItem>();
    List<City> Listcity = settingBean.findAllCity();
    for (City c : Listcity) {
        cityList.add(new SelectItem(c.getId(), c.getText()));
    }
    return cityList;
}

public void setCityList(List<SelectItem> cityList) {
    this.cityList = cityList;
}

public List<SelectItem> getCountryList() {
    cityList = new ArrayList<SelectItem>();
    List<Country> Listcountry = settingBean.findAllCountry();
    for (Country c : Listcountry) {
        countryList.add(new SelectItem(c.getId(), c.getText()));
    }
    return countryList;
}

public void setCountryList(List<SelectItem> countryList) {
    this.countryList = countryList;
}

public int getIdSelected() {
    return idSelected;
}

public void setIdSelected(int idSelected) {
    this.idSelected = idSelected;
}

public Coordonnee getSelectedCustomerCoordonne() {

    return selectedCustomerCoordonne;
}

public void setSelectedCustomerCoordonne(
        Coordonnee selectedCustomerCoordonne) {
    this.selectedCustomerCoordonne = selectedCustomerCoordonne;
}

public Coordonnee getSelectedCoord() {
    return selectedCoord;
}

public void setSelectedCoord(Coordonnee selectedCoord) {
    this.selectedCoord = selectedCoord;
}

public Coordonnee getFilteredCoord() {
    return filteredCoord;
}

public void setFilteredCoord(Coordonnee filteredCoord) {
    this.filteredCoord = filteredCoord;
}

public void onEdit(RowEditEvent event) {  
    FacesMessage msg = new FacesMessage("Cliquer sur enregistrer pour valider la modification", ((Coordonnee) event.getObject()).getCustomer().getCompany());  

    FacesContext.getCurrentInstance().addMessage(null, msg);  
}  

public void onCancel(RowEditEvent event) {  
    FacesMessage msg = new FacesMessage("Modification annulée", ((Coordonnee) event.getObject()).getCustomer().getCompany());  

    FacesContext.getCurrentInstance().addMessage(null, msg);  
} 
```

}`

请帮我保存这两个对象。

# c# - 更新命令在特定页面上不起作用

> ID：15990315
> 
> 赞同：0
> 
> 时间：2013-04-13T16:48:55.097
> 
> 标签：c#, asp.net, sql, sql-server-2008, sql-update

我在我拥有的页面上遇到了更新命令的问题。我有 4 个网格视图和 4 个详细信息视图，它们都不会使用更新命令进行更新。我可以插入和删除，但更新不起作用。更新按钮不会导致回帖，它只是坐在那里。

我创建了一个新页面并添加了一个详细信息视图并将其连接到同一个数据库和同一个表，并且在该页面中，更新命令运行良好。我什至将命令查询复制并粘贴到另一页上的详细信息视图中，但没有成功。

我在想是按钮的问题，但为什么默认的更新链接按钮不起作用？

我正在使用 ASP.NET、C# 和 SQL Server 2008。

我确实注意到工作的详细信息视图上的更新按钮显示：`javascript:__doPostBack('DetailsView1$ctl02','')`在状态栏上。

但是不起作用的更新按钮显示了这一点：`WebForm_PostBackOptions("ctl00$ContentPlaceHolder1$DetailsView2$ctl02", "", true, "", "", false, true))`

**这是有效的详细信息视图的代码**

```
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
DataKeyNames="WorkshopName,WorkshopBeginingDate,WorkshopLocation" 
DataSourceID="SqlDataSource1" Height="50px" Width="125px">
<Fields>
<asp:BoundField DataField="WorkshopName" HeaderText="WorkshopName" 
ReadOnly="True" SortExpression="WorkshopName" />
<asp:BoundField DataField="WorkshopBeginingDate" 
HeaderText="WorkshopBeginingDate" ReadOnly="True" 
SortExpression="WorkshopBeginingDate" />
<asp:BoundField DataField="WorkshopEndingDate" HeaderText="WorkshopEndingDate" 
SortExpression="WorkshopEndingDate" />
<asp:BoundField DataField="WorkshopLocation" HeaderText="WorkshopLocation" 
ReadOnly="True" SortExpression="WorkshopLocation" />
    <asp:CommandField ShowEditButton="True" />
    </Fields>
</asp:DetailsView> 
```

**这是一个不起作用的代码**

```
 <asp:DetailsView ID="DetailsView2" runat="server" AutoGenerateRows="False" 
                                    DataKeyNames="WorkshopName,WorkshopBeginingDate,WorkshopLocation" 
    DataSourceID="SqlDataSource20" Height="50px" Width="125px">
    <Fields>
    <asp:BoundField DataField="WorkshopName" HeaderText="WorkshopName" 
    ReadOnly="True" SortExpression="WorkshopName" />
    <asp:BoundField DataField="WorkshopBeginingDate" 
    HeaderText="WorkshopBeginingDate" ReadOnly="True" 
    SortExpression="WorkshopBeginingDate" />
    <asp:BoundField DataField="WorkshopEndingDate" HeaderText="WorkshopEndingDate" 
    SortExpression="WorkshopEndingDate" />
    <asp:BoundField DataField="WorkshopLocation" HeaderText="WorkshopLocation" 
    ReadOnly="True" SortExpression="WorkshopLocation" />
    <asp:CommandField ShowEditButton="True" />
    </Fields>
    </asp:DetailsView>

**This is the SQL Data source code for the one that doesn't work, it is also the same on the one that works, except for the Datasource ID.**

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConflictDetection="CompareAllValues" 
        ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>" 
        DeleteCommand="DELETE FROM [tblWorkshop] WHERE [WorkshopName] = @original_WorkshopName AND [WorkshopBeginingDate] = @original_WorkshopBeginingDate AND [WorkshopLocation] = @original_WorkshopLocation AND (([WorkshopEndingDate] = @original_WorkshopEndingDate) OR ([WorkshopEndingDate] IS NULL AND @original_WorkshopEndingDate IS NULL))" 
        InsertCommand="INSERT INTO [tblWorkshop] ([WorkshopName], [WorkshopBeginingDate], [WorkshopEndingDate], [WorkshopLocation]) VALUES (@WorkshopName, @WorkshopBeginingDate, @WorkshopEndingDate, @WorkshopLocation)" 
        OldValuesParameterFormatString="original_{0}" 
        SelectCommand="SELECT [WorkshopName], [WorkshopBeginingDate], [WorkshopEndingDate], [WorkshopLocation] FROM [tblWorkshop]" 
        UpdateCommand="UPDATE [tblWorkshop] SET [WorkshopEndingDate] = @WorkshopEndingDate WHERE [WorkshopName] = @original_WorkshopName AND [WorkshopBeginingDate] = @original_WorkshopBeginingDate AND [WorkshopLocation] = @original_WorkshopLocation AND (([WorkshopEndingDate] = @original_WorkshopEndingDate) OR ([WorkshopEndingDate] IS NULL AND @original_WorkshopEndingDate IS NULL))">
        <DeleteParameters>
            <asp:Parameter Name="original_WorkshopName" Type="String" />
            <asp:Parameter DbType="Date" Name="original_WorkshopBeginingDate" />
            <asp:Parameter Name="original_WorkshopLocation" Type="String" />
            <asp:Parameter DbType="Date" Name="original_WorkshopEndingDate" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="WorkshopName" Type="String" />
            <asp:Parameter DbType="Date" Name="WorkshopBeginingDate" />
            <asp:Parameter DbType="Date" Name="WorkshopEndingDate" />
            <asp:Parameter Name="WorkshopLocation" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter DbType="Date" Name="WorkshopEndingDate" />
            <asp:Parameter Name="original_WorkshopName" Type="String" />
            <asp:Parameter DbType="Date" Name="original_WorkshopBeginingDate" />
            <asp:Parameter Name="original_WorkshopLocation" Type="String" />
            <asp:Parameter DbType="Date" Name="original_WorkshopEndingDate" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:00:53.940

After weeks of researching I decided to remove all the ajax from my page, and update started working beautifully. Apparently the some code was conflicting with the update command on the page.

I had researched the issue for weeks, readded the datasource many times but no success. My last resource was to remove all of the ajax from the page and magically everything worked.

# java - 通过聚合警告来调试 Pig UDF

> ID：15990318
> 
> 赞同：0
> 
> 时间：2013-04-13T16:49:14.407
> 
> 标签：java, hadoop, apache-pig

我正在尝试在我的 Pig UDF 中使用 warn() 方法，如下所示：

```
public class MyUDF extends EvalFunc<Tuple> {

    public Tuple exec(Tuple input) throws IOException {

        boolean condition = true;         
        while(condition) {
            // Some business logic
            warn("There was a problem", PigWarning.UDF_WARNING_1);
        }
    }

} 
```

当我在本地使用此 UDF 运行我的 pig 脚本时，我从未在作业结束时看到这些警告聚集。

如何配置 pig 以查看聚合警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:48:25.323

So I figured out that in local mode, you'll never see aggregated warnings. You need to be in MapReduce mode to see them!

# assembly - 正确的编译器术语

> ID：15990321
> 
> 赞同：0
> 
> 时间：2013-04-13T16:49:21.290
> 
> 标签：assembly, compiler-construction, linker, preprocessor, terminology

我正在编写一个由四个独立程序组成的编译器：预处理器、汇编编译器、汇编器（NASM）和链接器（ld）。

在写这篇文章时，我在表达我所指的编译器的确切部分时遇到了一些问题；即，当我只键入“编译器”时，它可能意味着由单个命令（如 GCC）调用的整个程序链，或将翻译单元转换为 NASM 的实际编译器。

这里的正确术语是什么？我应该将内部（“真实”）编译器称为“翻译器”还是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-03T02:39:10.103

我想说的是，与其寻找“正确”的术语（最好是主观的），不如寻找一致的术语并尽早解释这些术语的含义。

例如*，*将整个事物称为工具链，并将其每个组件称为更具体的事物：

> 此包中包含的 xyzzy 工具链由四个组件组成：
> 
> *   预处理器；
> *   编译器；
> *   汇编器；和
> *   链接器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:57:09.837

我不会让它太复杂。您应该直截了当，将 to-assembly 编译器称为编译器。GCC 代表 GNU Compiler Collection，所以当你想引用整个程序集时，我会说“编译器系统”之类的东西。

# ruby-on-rails - 在私有控制器方法中返回 redirect_to

> ID：15990326
> 
> 赞同：3
> 
> 时间：2013-04-13T16:49:41.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

前言：我正在使用设计进行身份验证。

我试图阻止未经授权的用户查看、编辑或更新其他用户的信息。我最担心的是用户将 DOM 中的表单修改为另一个用户的 ID，填写表单，然后单击更新。我已经在 SO 上专门阅读过类似下面的内容应该可以工作，但事实并非如此。SO 上的一篇文章建议将该`validate_current_user`方法移至公共领域，但这也不起作用。

有什么明显的我做错了吗？或者是否有更好的方法来解决我正在尝试做的事情，无论是使用设计还是其他东西？

我的`UsersController`样子是这样的：

```
class UsersController < ApplicationController
  before_filter :authenticate_admin!, :only => [:new, :create, :destroy]
  before_filter :redirect_guests

  def index
    redirect_to current_user unless current_user.try(:admin?)

    if params[:approved] == "false"
      @users = User.find_all_by_approved(false)
    else
      @users = User.all
    end
  end

  def show
    @user = User.find(params[:id])
    validate_current_user
    @user
  end

  def new
    @user = User.new
  end

  def edit
    @user = User.find(params[:id])
    validate_current_user
    @user
  end

  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, :notice => 'User was successfully created.' }
      else
        format.html { render :action => "new" }
      end
    end
  end

  def update
    @user = User.find(params[:id])

    validate_current_user

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, :notice => 'User was successfully updated.' }
      else
        format.html { render :action => "edit" }
      end
    end
  end

  private

  def redirect_guests
    redirect_to new_user_session_path if current_user.nil?
  end

  def validate_current_user
    if current_user && current_user != @user && !current_user.try(:admin?)
      return redirect_to(current_user)
    end
  end

end 
```

该`authenticate_admin!`方法如下所示：

```
 def authenticate_admin!
    return redirect_to new_user_session_path if current_user.nil?

    unless current_user.try(:admin?)
      flash[:error] = "Unauthorized access!"
      redirect_to root_path
    end
  end 
```

**编辑** —— **你是什么意思“它不起作用？”**

为了帮助澄清，当我尝试“破解”另一个用户的帐户时出现此错误：

> 在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，并且每个操作最多调用一次。另请注意，重定向和渲染都不会终止操作的执行，因此如果您想在重定向后退出操作，则需要执行“redirect_to(...) and return”之类的操作。

如果我将方法代码内联在各个控制器操作中，它们*确实可以*工作。但是，我不想这样做，因为它不干。

我还应该指定我已经尝试过：

```
def validate_current_user
  if current_user && current_user != @user && !current_user.try(:admin?)
     redirect_to(current_user) and return
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-08T02:29:46.147

如果您考虑一下，`return`在私有方法中只是退出方法并将控制权传递回控制器 - 它不会退出操作。如果您想退出该操作，您必须再次返回

例如，你可以有这样的东西：

```
class PostsController < ApplicationController
  def show
    return if redirect_guest_posts(params[:guest], params[:id])
    ...
  end

  private

  def redirect_guest_post(author_is_guest, post_id)
    redirect_to special_guest_post_path(post_id) if author_is_guest
  end
end 
```

如果 params[:guest] 存在且不为 false，则私有方法返回一些真实的内容，并且 #show 操作退出。如果条件失败，则返回 nil，然后操作继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:20:47.190

您正在尝试并且希望在每次操作之前授权用户。我建议您使用标准 gem，例如 CanCan 或 declarative_authorization。

继续采用这种方法，您最终可能会重新发明轮子。

如果您决定使用 cancan，您所要做的就是在ability.rb 文件中添加权限（由 rails cancan:install 生成）

可以 [:read,:write,:destroy], :role => "admin"

而在控制器中只需添加 load_and_authorize_resource （可以过滤）。它将检查用户是否具有当前操作的权限。如果用户没有权限，那么它会抛出一个 403 禁止期望，可以在 ApplicationController 中捕获并适当处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:10:09.077

尝试，

```
before_filter :redirect_guests, :except => [:new, :create, :destroy] 
```

应该管用。

这是因为您在 authenticate_admin 中使用了两次重定向！和 redirect_guests 用于新建、创建和销毁操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:28:41.597

“在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，并且每个操作最多调用一次。”

这就是错误的原因。在`show`方法中，如果您既不是该帐户的所有者也不是管理员，您将面临两个操作：`redirect_to`和`render`

我的建议是将所有重定向逻辑放入`before_filter`

# mahout - 启动 hadoop 后，我无法启动 mahout ..！

> ID：15990330
> 
> 赞同：-2
> 
> 时间：2013-04-13T16:49:51.157
> 
> 标签：mahout

**启动 Mahout 时，我收到这样的错误消息**

> root@fazil-VPCEB45FG:/usr/local/mahout/bin# ./mahout
> 
> hadoop 二进制文件不在 PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin 中，在本地运行
> 
> 初始化虚拟机时出错
> 
> 无法为对象堆保留足够的空间
> 
> 无法创建Java虚拟机。

**我已经安装了openjdk0.6，mahout是否支持openjdk**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:11:49.233

There's no OpenJDK 0.6 -- you mean 1.6\. Yes Java 6 is supported, as you see in the project documentation. This does not seem to have anything to do with Mahout as it's an error from the JVM itself. The error itself says the problem: you requested a heap that's too large. So, I'd go see what heap you requested in Hadoop config and check it. This is the kind of info you should post in a question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:04:06.270

这正是错误消息中所说的

> 无法为对象堆保留足够的空间

检查您的 hadoop 配置文件：`hadoop-env.sh`以及 `mapred-site.xml`通过参数为 JVM 分配内存的任何属性，`Xmx`如果您没有足够的物理内存，请降低值。如果您有足够的内存并且在 64 位操作系统上运行 java，则需要添加一个`-d64`java 选项来强制执行 64 位模式（在某些情况下默认情况下不会这样做）

编辑：对于独立模式（您的情况），如果它是 64 位操作系统，只需使用正确的 Xmx 值和 -d64

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T16:49:28.517

您正在运行的 mahout 文件中的 JAVA_HEAP_MAX 参数应该降低。我下载的 mahout 版本是 3GB。

# web-services - Liferay 自定义网络服务

> ID：15990331
> 
> 赞同：0
> 
> 时间：2013-04-13T16:49:53.597
> 
> 标签：web-services, liferay, portlet

**我对Liferay**和**Lyferay 网络服务**的使用有一些疑问。

我已经阅读了 Liferay 文档，特别是关于 Liferay 中 Web 服务的开发（或使用）的第 11 章和第 12 章[（开发/文档）](http://www.liferay.com/it/documentation/liferay-portal/6.1/development) ......但是这个文档看起来并不完整（在网络上搜索）您可以找到有关使用 Liferay 的不同方法）。

所以，这是我的问题/疑虑......

假设您在 Liferay 中开发您的 portlet .. 这样我就可以与 Liferay 的“*核心*”进行交互，还可以编写将在 Liferay 上的 web 应用程序的前端。例如，我可以使用 Liferay API 在我的 webapp 中对用户进行身份验证。

如果我想通过我的移动应用程序在我的网络应用程序中访问身份验证系统？我没疯……我也想用原生代码开发自己的移动应用程序。在这种情况下，我希望有一个 REST 服务来与 Liferay 交互。我认为，在这种情况下，我必须将我的网络应用程序（portlet）的所有功能也公开为网络服务

比如...我们可以推理关于用户认证..我认为你可以： 1.使用webservice原生Liferay从外部访问。2\. E'possibile 编写我自己的网络服务。在这种情况下，我将不得不编写一个实际上是 Web 服务的 portlet？何时实施[CAS](http://www.liferay.com/it/community/wiki/-/wiki/Main/Developing+a+Custom+Authentication+System)可能更方便？

1.  Liferay 在用户会话方面工作（对于经过身份验证的用户）？在这种情况下，我们将以某种方式提供用户名和密码。如果成功，我将有一个令牌或会话 ID？在这里我可以阅读：

> 要使用凭据调用 AXIS Web 服务，您将使用以下 URL 语法：
> 
> ```
> http://" + userIdAsString + ":" + password + "@[server.com]:[port]/api/secure/axis/" + serviceName 
> ```

我真的不明白是否应该这样做只是为了在登录期间授权 untente

我可能很困惑，但 Liferay 的官方文档现在不是我的朋友：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T17:08:49.830

是的，您想在本机移动应用程序中使用自定义 portlet 服务...

我为此写了非常简单的博客：请点击以下链接：

[http://integrating-java.blogspot.in/2014/04/liferay-mobile-sdk-custom-services-part_4.html](http://integrating-java.blogspot.in/2014/04/liferay-mobile-sdk-custom-services-part_4.html)

通过这种方式，您可以在移动本机应用程序中使用您的 portlet 的自定义服务。

最好的部分是，如果您使用 Liferay mobile sdk 直接服务调用就足够了，您不必经过身份验证过程。

# jquery - 在隐藏的 div 中显示 div

> ID：15990337
> 
> 赞同：0
> 
> 时间：2013-04-13T16:50:04.297
> 
> 标签：jquery, css, html, selector

我在一个 div 中有两个 div，我想一次只显示一个

```
<div class="songContent">
    <div id="song1"> song 1 </div>
    <div id="song2"> song 2</div>
</div> 
```

我正在使用此函数从另一个元素触发事件：（将字符串作为参数传递给函数，例如： songId = song1 ）

```
function showSong(songId){  
    $('.songContent div').hide();
    var sel = '#'+songId;
    $(sel).show()
    $( sel +' div').show()
    alert(sel);             //debugging
} 
```

任何帮助将不胜感激，谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T16:52:49.953

像这样的东西？

```
function showSong(songId){
    $('#'+songId).show().siblings().hide();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:04:18.180

如果您在开始时一次只显示一个，您可以简单地使用切换。

```
$('#show').click(function(){
       $('div[id^=song]','#songContent').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:53:54.037

```
function showSong(songId){  
    $('.songContent div').hide();
    $('div[id=' + songId + ']').show();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T16:53:56.173

如果您构建一个看起来像 的选择器字符串`#song1 div`，它将找不到您的`song1`div。你需要类似的东西`div#song1`。

例子：

```
function showSong(songId){  
    $('.songContent div').hide();
    var sel = '#'+songId;
    $( 'div' + sel).show()
} 
```

但是 by-id 选择器本身 ( `sel`) 应该可以用作选择器。

# php - php函数参数未保留传入的完整字符串

> ID：15990339
> 
> 赞同：0
> 
> 时间：2013-04-13T16:50:10.650
> 
> 标签：php, function-parameter, texttrimming

我有一个 PHP 函数，它在回显一个字符串时会丢失一些传递给它的字符。为什么会发生这种情况？

我通过：`$vhkvdov#jqlydk#p*_L#1qrlws|ufqh#KWLZ#1hwdgsX`

它返回：`#jqlydk#p*_L#1qrlws|ufqh#KWLZ#1hwdgsX`

这是我的 PHP 代码：

```
<?php
function display($str) {
    echo $str;
}
display("$vhkvdov#jqlydk#p*_L#1qrlws|ufqh#KWLZ#1hwdgsX");
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T16:51:38.447

如果你有`$`你的字符串使用单引号：

```
display('$vhkvdov#jqlydk#p*_L#1qrlws|ufqh#KWLZ#1hwdgsX'); 
```

否则 PHP 会尝试将其`$vhkvdov`用作变量名并用它的内容替换它，因为我期望没有设置变量，所以什么都不是

[字符串上的 PHP 参考](http://php.net/manual/en/language.types.string.php)

* * *

**注意**：在开发过程中，我会`error_reporting`在 php.ini 中设置为

```
error_reporting=E_ALL | E_NOTICE; 
```

和

```
display_errors=On 
```

或者

```
log_errors=On
error_log=PATH/TO/YOUR/LOG.file ; make sure this is writable by the web server 
```

要**查看**如下错误消息：

> PHP 注意：未定义变量：vhkvdov in

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:53:46.263

问题是您使用**双引号**，这使 PHP 解释 PHP 变量的内部字符串。

考虑以下示例：

```
$friend = "foo";
echo "hello $friend";
// Output: hello foo 
```

如果您不希望 PHP 解释字符串内容，请改用**单引号。**

```
$friend = "foo";
echo 'hello $friend';
// Output: hello $friend 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:53:34.373

阅读此内容以帮助澄清发生这种情况的原因：

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

具体来说：

> 当用双引号或 heredoc 指定字符串时，会在其中解析变量。

这是您的代码发生的情况：

> 如果遇到美元符号 ($)，解析器将贪婪地获取尽可能多的标记来形成有效的变量名。将变量名括在花括号中以明确指定名称的结尾。

这是一个例子：

```
<?php
$juice = "apple";

echo "He drank some $juice juice.".PHP_EOL;
// Invalid. "s" is a valid character for a variable name, but the variable is $juice.
echo "He drank some juice made of $juices.";
?> 
```

上面的示例将输出：

> 他喝了一些苹果汁。
> 
> 他喝了一些果汁。

当你使用单引号时，你会避免这个问题，因为字符串是乱写的：

```
// Outputs: This will not expand: \n a newline
echo 'This will not expand: \n a newline';

// Outputs: Variables do not $expand $either
echo 'Variables do not $expand $either'; 
```

# ios - 两个 Web 视图，两个选项卡，单击 tab1/webview 中的链接，打开 tab2/webview 中的链接

> ID：15990340
> 
> 赞同：0
> 
> 时间：2013-04-13T16:50:13.980
> 
> 标签：ios, webview, tabcontrol

标题说明了一切。我已经花了三天时间试图弄清楚。我使用过协议和委托。我只是想在选项卡之间传递数据，同时在选项卡二中打开链接。而且我非常接近弄清楚，但我现在的问题是，当我使用时：

```
 self.tabBarController.selectedViewController
    = [self.tabBarController.viewControllers objectAtIndex:1]; 
```

它切换到选项卡 2，但没有打开链接。我已经物理单击选项卡 2，然后物理单击选项卡 1，然后单击链接。

如果有人可以给我最简单的方法来解决我的问题，我已经准备好浪费我投入的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:20:10.420

由于某些术语，很难理解您的问题，但如果我理解正确的话。我解决将链接从一个 UIWebview 传递到另一个的方法是利用[UIWebview 的委托方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)。具体来说，我会从第一个 UIWebview 上的以下调用中获取 url。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

（你可以从 NSURLRequest 中获取 url，或者只是传递整个请求）

我会将它传递给新加载的 tabbarController 和新的 UIWebview。使用类似以下的东西：

```
[secondWebview loadRequest:requestSavedFromFirstWebView]; 
```

. 目前还不清楚你到底在哪里挂断电话。

至于将数据从 UITabbar 中的一个选项卡传递到另一个选项卡。我们需要有关您的设置的更多信息（正如评论中指出的那样）。如果您可以在第二个视图控制器上为请求设置公共属性，那么您可以在调用 viewDidAppear 方法时加载它。

# objective-c - 如何获得正确方向的全屏边界？

> ID：15990342
> 
> 赞同：0
> 
> 时间：2013-04-13T16:50:22.887
> 
> 标签：objective-c, orientation, bounds, cgrect

伙计们。我有这样的问题：我的视图需要全屏显示。所以我用

```
[_activityIndicator setFrame:[[UIScreen mainScreen] applicationFrame]]; 
```

它的工作完美，但仅限于纵向视图。如果我的应用程序也必须在横向环境下工作怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:55:05.170

你的应用有一个根视图控制器，它会随着设备旋转而旋转。所以根据根视图控制器的视图来设置你的框架。使用它的*边界*，而不是它的框架。

您可以通过主窗口获取对根视图控制器的引用。您可以通过共享应用程序获取对主窗口的引用：

```
UIWindow* theWindow = [[UIApplication sharedApplication] keyWindow];
UIViewController* rvc = theWindow.rootViewController;
UIView* mainView = rvc.view;
UIActivityIndicatorView* act = 
    [[UIActivityIndicatorView alloc] initWithFrame: mainView.bounds];
[mainView addSubview: act]; 
```

然后在属性中保留对活动指示器的引用并将其设置为旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:53:58.097

要获取当前屏幕边界，我使用：

```
CGRect screenBoundsDependOnOrientation()
{
    CGRect screenBounds = [UIScreen mainScreen].bounds ;
    CGFloat width = CGRectGetWidth(screenBounds)  ;
    CGFloat height = CGRectGetHeight(screenBounds) ;
    UIInterfaceOrientation interfaceOrientation = [UIApplication sharedApplication].statusBarOrientation;

    if(UIInterfaceOrientationIsPortrait(interfaceOrientation)){
        screenBounds.size = CGSizeMake(width, height);
    }else if(UIInterfaceOrientationIsLandscape(interfaceOrientation)){
        screenBounds.size = CGSizeMake(height, width);
    }
    return screenBounds ;
} 
```

# date - 苦于日期格式，想要 YYYY-MM-DD

> ID：15990343
> 
> 赞同：4
> 
> 时间：2013-04-13T16:51:14.100
> 
> 标签：date, sas

作为 SAS 的绝对初学者，我很快就遇到了日期格式的问题。

我有一个数据集，其中包含三种日期的交易：BUSDATE、SPOTDATE、MATURITY。每笔交易都用两行表示，我想要第 1 行的 BUSDATE 和 SPOTDATE，但第 2 行的 MATURITY。

在原始集合中，日期采用 YYYY-MM-DD 格式。

```
DATA masterdata;
SET sourcedata(rename(BUSDATE=BUSDATE2 SPOTDATE=SPOTDATE2 MATURITY=MATURITY2));

BUSDATE=BUSDATE2;
SPOTDATE=SPOTDATE2;

IF TRANS_TYPE='Swap' THEN;
MATURITY=SPOTDATE;

RUN; 
```

问题是，这会返回类似于 17169 的内容（我猜这是从某个日期开始的天数）。

我怎样才能让它以 YYYY-MM-DD 格式输出 - 或者这种方法是错误的；我应该先将日期变量转换为某种 SAS 日期格式吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T17:29:17.703

如果您有有效的 SAS 日期，只需将[FORMAT](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000197961.htm)语句添加到您的 DATA STEP。

```
Format busdate spotdate maturity yymmdd10\. ; 
```

SAS 日期是数字变量。它们代表自 1960 年 1 月 1 日以来的天数。您使用 FORMAT 来显示日期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T04:42:21.460

添加到 CarolinaJay 的答案中，您通常希望将它们保留为数字格式，因为您可以对它们进行数学运算（例如“自 X 日以来的天数”）。但是，如果由于某种原因您需要一个字符变量，您可以这样做：

```
date_As_char=put(datevar,YYMMDD10.); 
```

顺便说一句，YYMMDD10 实际上会按照您的要求为您提供 YYYY-MM-DD；如果您想要不同的分隔符，请参阅[http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000589916.htm（YYMMDDxw](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000589916.htm) . 格式） - 如果您输入字母在最后一个 D 之后，对于某些字母，您会得到不同的分隔符。比如，YYMMDDn10。不给你分隔符，或 YYMMDDs10。给你斜线。YYMMDDd10。给你破折号，就像省略字母一样。这个概念也适用于 MMDDYY 格式，我认为还有其他一些。

# sql - 从 PostgreSQL 中选择日期（时间戳）作为字符串（字符），注意 NULL 值

> ID：15990344
> 
> 赞同：19
> 
> 时间：2013-04-13T16:51:14.453
> 
> 标签：sql, postgresql, select, postgresql-9.1

我想选择一个日期（我的列是时间戳类型）。但是当列中的日期为 NULL 时，我想返回一个空字符串。这个怎么做？我写了这个：

```
SELECT
   CASE WHEN to_char(last_post, 'MM-DD-YYYY HH24:MI:SS') IS NULL THEN ''
      ELSE to_char(last_post, 'MM-DD-YYYY HH24:MI:SS') AS last_post END
   to_char(last_post, 'MM-DD-YYYY HH24:MI:SS') AS last_post, content
FROM topic; 
```

但它向我显示了一些错误，不知道为什么：

```
ERROR:  syntax error at or near "as"
LINE 1: ...ELSE to_char(last_post, 'MM-DD-YYYY HH24:MI:SS') AS last_po...
                                                            ^ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T16:56:57.703

使用该`COALESCE()`函数是最好的方法，因为它只是在 NULL 的情况下交换一个替代值。可读性也大大提高。:)

```
SELECT COALESCE(to_char(last_post, 'MM-DD-YYYY HH24:MI:SS'), '') AS last_post, content FROM topic; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:56:40.850

你把你`AS`的情况下？

尝试：

```
SELECT
   CASE WHEN last_post IS NULL THEN ''
     ELSE to_char(last_post, 'MM-DD-YYYY HH24:MI:SS') END AS last_post,
   content
FROM topic; 
```

我还没有尝试过查询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T16:57:10.343

```
select coalesce(to_char(last_post, 'MM-DD-YYYY HH24:MI:SS'), '') as last_post, content
from topic; 
```

# php - 从一个 php 页面获取数据并将其回显到另一个页面

> ID：15990352
> 
> 赞同：1
> 
> 时间：2013-04-13T16:51:56.217
> 
> 标签：php, session, echo

我需要简单地从一个页面中获取数据，在一个条件下，然后在另一个页面上回显它。这是我的代码和其他不起作用的尝试。

```
<?php
session_start;

/* connect to database */
$db = mysql_connect("localhost", "root", "root");
if (!$db)
    die('could not connect');

mysql_select_db('androidp2p')
    or die("could not select database");

/* variables */
$from = mysql_real_escape_string($_POST['from']); 
$to = mysql_real_escape_string($_POST['to']);
$message = mysql_real_escape_string($_POST['message']);

/* conditional code */
if ($_POST['to'])
{
    /* user wants to send a message */
    $query = "INSERT INTO messages (fromuser, touser, message) VALUES ('$from', '$to', '$message')";

    mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    echo "ok. Messages have been saved.";
}
else 
{
    /* user wants to retrieve his messages*/
    $query = "SELECT * FROM messages WHERE touser='$from'";

    /* echo1 */
    echo $query;

    $result = mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    $mailbox = array();

    while($row = mysql_fetch_assoc($result)){
    $mailbox[] = $row;
    }

    /* echo2 */
    echo "{ \"mailbox\":".json_encode($mailbox)." }";

    $name = "{ \"mailbox\":".json_encode($mailbox)." }";

    /* echo3 */
    echo $name;

    $_SESSION['myValue']=$name;
}

?> 
```

在下一个名为 test.php 的 php 页面上：

```
<?php

session_start;
echo $_SESSION['myValue'];

?> 
```

我的 logcat 显示我在所有三个回显中都获得了数据，但 test.php（即 page2）上仍然没有显示任何内容。

我也试过：

尝试 1： 在第 1 页中：

```
session_start();
$_SESSION['myValue']=$name; 
```

在 page2 中使用：

```
session_start();
echo $_SESSION['myValue']; 
```

尝试 2：在第 1 页中：

```
session_start();
$_SESSION['name'] = $name ; 
```

在 page2 中使用：

```
session_start();
$name = $_SESSION['name']; 
```

尝试 3： 在第 1 页中：

```
header("Location: test.php?name=".$name); 
```

在 page2 中使用：

```
$name = $_GET['name'] ; 
```

但是 test.php 上没有显示任何内容（在最后一次尝试中，我收到了一堆警告，也许还有错误）。我究竟做错了什么？

这是我的 logCat：

04-13 14:46:22.564: I/RESPONSE(4591): SELECT * FROM messages where touser='r' 04-13 14:46:22.564: I/RESPONSE(4591): { "mailbox":[{" id":"117","fromuser":"qw","touser":"r","message":"zx","timestamp":"2013-04-13 01:30:59"}] }

现在上面我想让你看到 touser 是 r。这个进入数据库的条目是我想要的，即字段“touser”包含值“r”的所有条目。

现在，这是我的 test.php 页面：

{ "邮箱":[{"id":"123","fromuser":"r","touser":"","message":"","timestamp":"2013-04-13 13:41 :23"},{"id":"122","fromuser":"r","touser":"","message":"","timestamp":"2013-04-13 13:30: 53"}]}

如您所见，它返回了 fromuser 为 r 的所有条目。两人为什么会矛盾？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:15:51.610

不完全确定你在问什么，但也许这会有所帮助。

在 /* 条件代码的开头 */

使用 isset 条件....

```
<?php
session_start();

/* connect to database */
$db = mysql_connect("localhost", "root", "root");
if (!$db)
    die('could not connect');

mysql_select_db('androidp2p')
    or die("could not select database");

/* variables */
$from = mysql_real_escape_string($_POST['from']); 
$to = mysql_real_escape_string($_POST['to']);
$message = mysql_real_escape_string($_POST['message']);

/* conditional code */
if (isset ($_POST['to']))
{
    /* user wants to send a message */
    $query = "INSERT INTO messages (fromuser, touser, message) VALUES ('$from', '$to', '$message')";

    mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    echo "ok. Messages have been saved.";
}
else 
{
    /* user wants to retrieve his messages*/
    $query = "SELECT * FROM messages WHERE touser='$from'";

    /* echo1 */
    echo $query;

    $result = mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    $mailbox = array();

    while($row = mysql_fetch_assoc($result)){
    $mailbox[] = $row;
    }

    /* echo2 */
    echo "{ \"mailbox\":".json_encode($mailbox)." }";

    $name = "{ \"mailbox\":".json_encode($mailbox)." }";

    /* echo3 */
    //echo $name; no need to echo

    $_SESSION['myValue']=$name;
}

?> 
```

# perl - 在 Linux 上重新运行 CPAN 配置？

> ID：15990356
> 
> 赞同：2
> 
> 时间：2013-04-13T16:52:18.660
> 
> 标签：perl, cpan

我在 CPAN 进行初始配置时不小心中断了它，现在我无法再次启动它。

我收到错误

```
Error while requiring CPAN::MyConfig: CPAN/MyConfig.pm did not return a true value at /usr/share/perl/5.14/CPAN/HandleConfig.pm line 507 
```

如果我什至无法打开 cpan shell，有什么方法可以重新运行配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:55:26.523

删除文件`CPAN/MyConfig.pm`（或者，最好将其移动到某处；您可能想查看它）。

然后再试一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T17:03:22.537

正如乔纳森所说，把那个文件移开可以让你继续。虽然更好的是使用“cpan minus”：[http ://search.cpan.org/dist/App-cpanminus/lib/App/cpanminus.pm](http://search.cpan.org/dist/App-cpanminus/lib/App/cpanminus.pm)

它使用起来更快、更简单，并且具有许多惊人的功能。

[https://github.com/miyagawa/cpanminus](https://github.com/miyagawa/cpanminus)

# django - Django CreateView 模型表单

> ID：15990358
> 
> 赞同：1
> 
> 时间：2013-04-13T16:52:24.523
> 
> 标签：django, django-forms, django-class-based-views

我是 Django CBV 的新手，我正在尝试正确使用它。

我想让用户创建一个测验，用户选择一个主题、一个级别和一个主题以及基于这些选择，我从数据库中抽取 10 个问题并用它创建测验。因此，用户会看到一个包含 3 个选择字段的表单，但实际上该模型包含更多字段。

我使用基于测验的 ModelForm 并排除了一些字段。问题是一旦用户选择了一个主题、一个级别和一个章节并在之后保存它们，我不知道如何绘制问题。

这是测验模型：

```
class Quizz(models.Model):

    user = models.ForeignKey(User)
    date_started = models.DateTimeField('date started')
    questions = models.ManyToManyField(Question, through = 'QuestionStatus')
    level = models.ForeignKey(Level, null = True)
    subject = models.ForeignKey(Subject, null = True)
    chapter = models.ForeignKey(Chapter, null = True)
    grade = models.IntegerField(default = 0)
    finished = models.BooleanField(default = False) 
```

表格 ：

```
class QuizzCreateForm(forms.ModelForm):
    class Meta:
        model = Quizz
        fields = ('subject', 'level', 'chapter') 
```

和观点：

```
class QuizzCreate(CreateView):
    model = Quizz        
    form_class = QuizzCreateForm 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:24:52.257

我发现其中一种方法是将我的业务逻辑放在 view 的 form_valid 形式中，它可以按我的意愿工作。

# javascript - 如何将 js 变量传递给 @Model.MyModel (MVC4)

> ID：15990363
> 
> 赞同：2
> 
> 时间：2013-04-13T16:52:50.493
> 
> 标签：javascript, jquery, razor

这是我的模型

```
public class AddressBook
{
    public string UserId { get; set; }
    public IList<Address> Addresses { get; set; }
    public AddressBook()
    {
        UserId = "";
        Addresses = new List<Address>();
    }
}

public class Address
{
    public string Company { get; set; }
    public string Title { get; set; }
    public string FName { get; set; }
    ...
 } 
```

控制器使用地址列表构建地址簿。主页使用 AddressBook 模型 (@model mymodel.AddressBook)，我可以使用 Model.Addresses[index] 访问不同的地址。

在页面上，我显示了地址列表，每个地址都带有一个编辑按钮（为了清楚起见，我去掉了 html 代码）：

```
@model mymodel.AddressBook
...
@for (int i = 0; i < Model.Addresses.Count; i++)
{
    @Model.Addresses[i].Company
    @Model.Addresses[i].FName
    ...
    @:<input type="image" src="/images/edit.gif" onclick="addressEdit('@i'); return false;" title="Edit" />

} 
```

当用户单击编辑按钮时，我调用 javascript addressEdit 并将所选地址的索引传递给它。

```
<script type="text/javascript">
    function addressEdit(index) {
        $('#FName').val('@Model.Addresses[index].FName');
        $('#Addr1').val('@Model.Addresses[index].Company');
        ...
    }
</script> 
```

问题出在 jQuery 行 $('#FName').val('@Model.Addresses[index].FName'); 变量索引在 VS2012 中以红色下划线显示，消息“当前上下文中不存在名称‘索引’”。

你如何传递“索引”上的值来提取我需要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:59:41.960

好吧，记住这是客户端代码。所以*最好*看的地方是客户端生成了什么。这意味着注释掉您的 javascript 事件并查看实际呈现的内容以了解正在发生的事情。

当您这样做时，您将看到帮助程序根据您的模型名称自动生成名称和 ID。请记住，`name`输入上的属性允许在帖子上进行模型绑定。

所以，考虑到所有这些，我认为这将是这样的：

```
function addressEdit(index) {
 $('#FName').val($("#Addresses_"+index+"__FName").val());
 //..etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:05:17.700

将您的元素包装在具有某些类名的跨度中。将循环中的所有内容也包装为 div。我还将`onclick`从标记中删除该方法，因为我们将以不[显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式进行操作。

```
@for (int i = 0; i < Model.Addresses.Count; i++)
{
  <div class='entry'>
     <span class='spanAddress'> @Model.Addresses[i].Company </span>
     <span class='spanFName'> @Model.Addresses[i].FName </span>       
     <img src="/images/edit.gif" class='editLink' />
  </div>
} 
```

现在在你的 javascript

```
$(function(){

  $(".editLink").click(function(e){

     e.preventDefault();
     var _this=$(this);
     var fname=_this.closest("div.entry").find(".spanFName").html();      
     var add=_this.closest("div.entry").find(".spanAddress").html();    

     $('#FName').val(fname);
     $('#Address').val(add);

  });  

}); 
```

# javascript - 使用 jQuery/Javascript 更改选择选项的简单（st）方法？

> ID：15990372
> 
> 赞同：0
> 
> 时间：2013-04-13T16:53:30.030
> 
> 标签：javascript, jquery

如何让 javascript 或 jquery 在表单的选择区域中选择某个选项？使用 jquery 的 .attr/.prop？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:57:04.783

```
$("#idOfElement").val("DesiredValue"); 
```

在我看来很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:58:43.757

`$('select option:eq(X)').attr('selected',true);`

将 X 替换为所需的：

[http://jsfiddle.net/4jBfs/1/](http://jsfiddle.net/4jBfs/1/)

# java - 如何将参数传递给 ScheduledThreadPoolExecutor？

> ID：15990378
> 
> 赞同：0
> 
> 时间：2013-04-13T16:53:53.107
> 
> 标签：java, multithreading, scheduledexecutorservice

我如何将参数传递给 ScheduledThreadPoolExecutor？

我有以下代码。你会注意到我已经声明了一个变量'num'，它作为一个参数传递给了exampleFunction()。exampleFunction 包含一个 ScheduledThreadPoolExecutor。我希望能够在 public void run() 中使用变量“num”。有什么办法可以做到吗？

```
 class Test {
     ...
     int num;
     exampleFunction(num);
     ...

     public void exampleFunction(num) {
         ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
         exec.schedule(new Runnable() {
             public void run() {
                 ...do something here...
                 ...something with 'num' here...
                 ...i get an error when i try to use 'num' here
             }
         }, 10, TimeUnit.SECONDS);
     }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:56:01.497

您是否尝试更改`exampleFunction(num)`为`exampleFunction(final int num)`？由于 run 方法在内部类中，所有外部绑定都必须是 final 的。

```
public void exampleFunction(final int num) { // final int here
     ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
     exec.schedule(new Runnable() {
         public void run() {
             ...do something here...
             ...something with 'num' here...
             ...i get an error when i try to use 'num' here
         }
     }, 10, TimeUnit.SECONDS);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T16:56:12.307

要么制作`num` `final`或`static`（或从`static`方法访问），要么创建自己的`Runnable`.

```
class MyRunnable implements Runnable {
    int num;

    public MyRunnable(int num) {
        this.num = num;
    }

    public void run() { ... }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:55:58.917

声明变量 num `final`，您将能够在`Run()`方法中使用它。

改写这个

```
final int num; 
```

# c++ - 函数不读取二维数组的 [i][0] 行

> ID：15990382
> 
> 赞同：0
> 
> 时间：2013-04-13T16:54:19.600
> 
> 标签：c++, arrays

考虑以下数组：

```
arr[0][0] = 5.42; // val
arr[0][1] = (int)1;    // freq
arr[1][0] = 41.45;
arr[1][1] = (int)1; // freq
arr[2][0] = 10.55;
arr[2][1] = (int)1;// freq
arr[3][0] = 78.55;
arr[3][1] = (int)1;// freq 
```

它应该代表一个（非累积）频率表。所以每个值的频率为 1。

现在考虑以下函数：

```
 const int SIZE = 1;
    double standardDeviation(double list[][SIZE], double mean, int size) {
    double sumSquared = NULL;
    double sum = NULL;
    double sumFx = NULL;
    int sumFreq = NULL;
    for(int i = 0; i < size; i++)
        sumFreq += list[i][1]; 

    return sumFreq;
    } 
```

（显然缺少一些代码）但是在当前代码中，我的目标是返回频率的总和，应该是 4，但它只返回索引为 [i][0] 的数组成员的值 - 基本上，价值。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:59:11.990

您的数组没有被正确访问，因为您有：

```
const int SIZE = 1; 
```

你需要这样：

```
const int SIZE = 2; 
```

顺便说一句，这些初始化都没有意义：

```
double sumSquared = NULL;
double sum = NULL;
double sumFx = NULL;
int sumFreq = NULL; 
```

`NULL`是`0`，是的，但从语义上讲，它旨在用于指示空指针，并且这些变量都不是指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:59:05.040

参数声明为`double list[][1]`。

所以`list[i][1]`越界了。

# android - 在 setContentView 后对布局进行更改会出现空白屏幕

> ID：15990383
> 
> 赞同：0
> 
> 时间：2013-04-13T16:54:19.903
> 
> 标签：android, android-layout

我有一个在片段中单击 listView 项目时调用的 Activity。我的问题是，即使我对布局进行了更改（设置 textviews 的文本等）并调用 setContentView，活动屏幕仍然是空白的。

从到处使用的 Log.i 中，在 logcat 中，我可以看到所有数据并且它被正确设置，所以这不是问题。

我的问题是如何做到这一点，以便我所做的更改显示在屏幕上/如何使用新数据刷新布局。

```
public class SemListViewActivity extends Activity
{
    JSONObject recdJson=new JSONObject();
    JSONArray ar;
    ArrayList<HashMap<String, String>> keyslist;
    TextView semTCredits, semSession, semGPA;
    ListView semList;
    SemListAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        Log.i("Info Tag Sem","Inside Sem");

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sem_details_listview_layout);

        //LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //View v = inflater.inflate(R.layout.sem_details_listview_layout,null);

        ar = new JSONArray();
        keyslist = new ArrayList<HashMap<String, String>>();
        try
        {
            recdJson = GlobalVars.semJSON;
            Log.i("Info Tag Sem","Got the JSON");
            ar = recdJson.getJSONArray("seminfo");
            Log.i("Info Tag Sem","assigning JSON Array");
            for (int i = 0; i < ar.length(); i++)
            {
                JSONObject jObject = ar.getJSONObject(i);
                HashMap<String, String> map = new HashMap<String, String>();
                Log.i("Info Tag Sem","jObject Init"+i);
                Log.i("Info Tag Sem",jObject.toString());
                Log.i("Info Tag Sem",jObject.getString("subcode"));
                map.put("subcode", jObject.getString("subcode"));
                map.put("sub", jObject.getString("sub"));
                map.put("credits", jObject.getString("credits"));
                map.put("grade", jObject.getString("grade"));

                keyslist.add(map);
            }
            Log.i("Info Tag Sem","Done with Hashmapping");

            semTCredits = (TextView)findViewById(R.id.semTCredits);
            semSession = (TextView)findViewById(R.id.semSession);
            semGPA = (TextView)findViewById(R.id.semGPA);

            Log.i("Info Tag Sem","Set the textviews");

            semTCredits.setText("Total Credits: " + recdJson.getString("credits"));
            semSession.setText("Session: " + recdJson.getString("session"));
            semGPA.setText("Semester GPA: " + recdJson.getString("gpa"));

            semList = (ListView)findViewById(R.id.semlist);

            adapter = new SemListAdapter(this, keyslist);
            semList.setAdapter(adapter);

            Log.i("Info Tag Sem","Put the content");

            setContentView(R.layout.sem_details_listview_layout);

        } catch (JSONException e)
        {
            e.printStackTrace();
            Log.i("Info Tag Sem","Nothing happened ");
        }

    }

} 
```

这是相关的xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/semTCredits"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/semSession"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textIsSelectable="true" />

    <TextView
        android:id="@+id/semGPA"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textIsSelectable="true" />

    <ListView
        android:id="@+id/semlist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

抱歉，如果这个问题是重复的，我不知道如何表达我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:58:31.427

你打`setContentView()`了两次电话，第二次打电话：

```
 Log.i("Info Tag Sem","Put the content");

        setContentView(R.layout.sem_details_listview_layout);

    } catch (JSONException e) 
```

删除您在上面所做的所有更改...只需将其删除。

# ios - APNs 开发和生产证书问题

> ID：15990384
> 
> 赞同：0
> 
> 时间：2013-04-13T16:54:24.873
> 
> 标签：ios, apple-push-notifications

所以，我已经用推送通知完成了无数个 ios 应用程序，但我从未遇到过这样的情况：

过去，当我下载 APNS 证书（开发或生产）时，它在我的钥匙串中显示为：

苹果开发IOS推送服务：com.YYY.ZZZZZZZZ

其中 YYY.ZZZZZZZ 是包标识符。但是，现在证书在钥匙串中显示为：

苹果开发IOS推送服务：XXXXXXXXX:XXXXXXXXX

其中 XXXXXXXXXX 是我们的苹果开发者团队 ID。它对我下载的每个证书都执行此操作，甚至是那些曾经正确显示的证书，这使得无法区分一个与另一个。奇怪的是，证书标题在开发人员门户中看起来很正确。

此外，当我点击右下角的刷新按钮时，我注意到 X-Code 在 Organizer > Provisioning 屏幕中崩溃，但这可能是一个红鲱鱼。

有没有人遇到这个并提出解决方案？在过去的几天里，我在 Apple 开发者论坛上看到了其他关于此的投诉，但没有看到任何解决方案，我希望常驻的 stackoverflow 天才能够来救援......

**更新** 要修复 XCode 刷新错误，请在终端中运行此命令（根据Apple的[这篇文章）：](https://devforums.apple.com/message/796388#796388)

```
mkdir ~/Library/Developer/Xcode/OldPortalDBs; mv ~/Library/Developer/Xcode/connect1.apple.com* ~/Library/Developer/Xcode/OldPortalDBs 
```

但是，bizzaro world apns 证书问题仍然存在。

**更新二** 您可以在钥匙串证书的上下文菜单中“获取信息”以查看捆绑标识符，这使得找到您正在寻找的那个更容易一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:21:38.550

[APNs 证书在登录钥匙串中看起来不同](https://stackoverflow.com/questions/15959117/apns-certificates-look-different-in-login-keychain)如果这是您问题的答案，那么我要求您在发布之前做一些研究。

# ruby-on-rails - 使用 has_many 关系保存记录

> ID：15990389
> 
> 赞同：0
> 
> 时间：2013-04-13T16:55:13.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 新手，对 has_one 和 has_many 关系有点困惑。

我有两个模型 - 用户和位置。

每个用户都有一个位置，一个位置可以属于许多用户。

所以，我以这种方式创建了它：

```
class User < ActiveRecord::Base
  belongs_to :location
end

class Location < ActiveRecord::Base
  has_many :users
end 
```

现在当我想创建一个新用户并保存位置时，我应该怎么做？是这样吗？？？

```
@user = User.new
@user.name = params[:name]

@loc = Location.new
@loc.zip = params[:zip]
@loc.save

@user.location = @loc
@user.save 
```

这是不对的，对我不起作用。任何帮助或指示将不胜感激。

rails 书籍仅指定如何创建这些关联。不是关于如何保存这些关联的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:33:40.600

更改`save`为`save!`引发异常，看看什么不适合你。

另一种方法是

```
@loc = Location.create!(:zip => params[:zip])
@user.create!(:name => params[:name], :location_id => @loc.id) 
```

你可能会喜欢接收像`params[:users][:name]`参数这样的东西，因为例如，如果属性比名称多，你可以做

```
@user.create(params[:user]) 
```

# android - 将 Facebook 访问令牌传递到评论框

> ID：15990398
> 
> 赞同：8
> 
> 时间：2013-04-13T16:55:58.257
> 
> 标签：android, html, authentication, android-webview, facebook-apps

我有一个使用 Facebook 身份验证的 Android 应用程序，所以我知道用户访问令牌。在 Android 应用程序中，我有一个带有 WebView 的屏幕，该屏幕使用 Facebook[评论框](http://developers.facebook.com/docs/reference/plugins/comments/)从服务器加载页面。

服务器页面（在 webView 中加载）：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            .fb_ltr{height:100% !important; overflow-y: scroll;}
            #u_0_1{position:absolute !important;}
        </style>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;

                js = d.createElement(s); js.id = id;
                js.src = "http://connect.facebook.net/he_IL/all.js#xfbml=1&appId=MY_APP_ID";
                fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
        </script>

    <div class="fb-comments" data-href="MY_URL" data-width="470" data-num-posts="10"></div>

    </body>
</html> 
```

当我用 WebView 打开那个屏幕时，我需要再次登录到 FaceBook。
有没有办法通过 WebView 传递访问令牌（或其他参数）？
注意：如果 WebView 不可能，我也可以更改 HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T16:26:30.267

不，不可能在您的本机应用程序中获取访问令牌并在 web 视图中为该用户创建登录会话 -

如果您需要用户使用 Facebook 的基于 Web 的服务，例如社交插件，他们更有可能在主要设备浏览器（例如 Safari 或 Chrome）上登录 Facebook，因此您可以考虑打开它而不是 web 视图?

# c#-4.0 - System.OutOfMemoryException 错误

> ID：15990404
> 
> 赞同：0
> 
> 时间：2013-04-13T16:56:12.583
> 
> 标签：c#-4.0, sql-server-2008-r2, crystal-reports-xi

我们正在开发一个富客户端应用程序，其中许多线程正在运行以及使用第三方控件，在运行应用程序 1 小时后它开始给出“System.OutOfMemoryException”错误，除非并且直到我们重新启动应用程序，我搜索了很多网站寻求帮助，但没有给出具体和具体的理由。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:01:00.250

这听起来很不言自明，你的系统没有足够的内存。如果您仍在以 32 位运行应用程序，那么迁移到 64 位可能会解决问题。我最近在 server-2008-r2 上遇到了这个问题，迁移到 64 位确实解决了我的问题。但是，如果您已经是 64 位，那么服务器可能没有足够的物理内存。在这种情况下，您需要添加更多内存，或者想办法让您的应用程序减少内存占用。可能有可能被丢弃的对象，它保留了对等的引用，如果是这种情况，您应该尝试分析以尝试确定占用最多内存的对象。除此之外，应用程序是否使用任何非托管 DLL，例如用 C++ 或类似语言编写的 COM 对象。也许托管框架之外存在内存泄漏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:00:48.420

我建议使用分析器来识别和查找高内存消耗的来源。

# .htaccess - .htaccess 文件的 MIME 类型是什么？

> ID：15990406
> 
> 赞同：1
> 
> 时间：2013-04-13T16:56:23.307
> 
> 标签：.htaccess, mime-types

有人知道 Apache 的目录相关配置文件格式 (.htaccess) 的官方 MIME 类型是什么吗？Web 上充斥着关于使用 mod_mime/.htaccess 添加 MIME 类型的关键字共享问题的答案，但事实并非如此。我唯一想知道的是此类文件的 MIME 类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:13:40.517

根据 Caja（MATE Desktop 的文件管理器），.htaccess 文件的 MIME 类型是“application/x-extension-htaccess”。

# email - 在 cPanel 中管理 3 个域：电子邮件、重定向到 AWS 和另一个域

> ID：15990408
> 
> 赞同：0
> 
> 时间：2013-04-13T16:56:33.153
> 
> 标签：email, dns, amazon-web-services, cpanel

我有这些域名（虚构名称）：

> *   www.myponey.ca
> *   www.unicorn.ca
> *   www.unicorn.com

cPanel Accelerated 2 中的所有活动。cPanel 中的主要域是 www.myponey.ca，我想做的是：

> 1.  能够在前 2 个域的 cPanel 中使用电子邮件
> 2.  让 www.unicorn.ca 指向 Amazon Web Services (AWS) 上的服务器
> 3.  创建一个指向 AWS 上的服务器的子域，如 magic.unicorn.ca
> 4.  将 www.unicorn.com 重定向到 www.unicorn.ca

我从创建附加域开始，但遇到了很多问题，我不确定这是现在的正确方法。甚至不确定这是否可以在 cPanel 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:00:21.187

在我的托管公司的帮助下，我们能够解决所有问题。必须再添加 1 个附加域，必须更改电子邮件中的 MX 条目以及某些域的高级区域编辑器中的一些更改。如果有人遇到同样的问题，请联系您的托管公司！这一切都可以完成

# c - 如何使用 strcpy 将值存储在常量变量中？

> ID：15990417
> 
> 赞同：1
> 
> 时间：2013-04-13T16:57:04.557
> 
> 标签：c, data-structures, struct, unions

我**从在线练习测试中找到了这个示例代码，**该语句如何 `strcpy(e1.name, "K");`有效，但该语句`e1.age=10;`无效？任何原因。请澄清。

观察`o/p`Gcc 为：`K 0 0.000000`

```
#include<stdio.h>
#include<stdlib.h>

struct employee
{
    char name[15];
    int age;
    float salary;
};
const struct employee e1;

int main()
{
    strcpy(e1.name, "K"); // How strcpy is being used to store values in a    
                          // constant variable e1 .
    //e1.age=10; // not valid 
    printf("%s %d %f", e1.name, e1.age, e1.salary);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:10:32.803

当您访问`age`时，编译器知道那`e1`是`const`并禁止写入。

另一方面，当您调用`strcpy`时，会将指针传递给在（标准）库中实现的函数。因为它只是一个内存地址，所以这个库只会执行它的写操作。

这是不允许的，因为指针实际上是一个`const`对象的内存地址。编译器会告诉你这是不允许的，只会产生一个警告。严格来说，这个警告应该是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:11:01.943

To answer your first question, strcpy is storing the given name in the name field by iterating through the char array as well as the characters of the string literal, saving a copy of each. When the end of the source string is reached, a null char should be found and copied over to the destination. The null char indicates the end of the string, and it is very important that it is copied over. If it is not, your program may read past the end of the array, leading to segfaults or exposing you to buffer overrun attacks. In your case, since the name array has a length of 15, you should not copy over names longer than 14 characters.

The biggest problem with this code is the use of a union instead of a struct. Unions work like structs, but the memory for each field is saved in the same location. For this reason, you should only set one of the fields.

# java - 图像定位（Google Maps Android API v2）

> ID：15990424
> 
> 赞同：1
> 
> 时间：2013-04-13T16:57:35.260
> 
> 标签：java, android, image, google-maps, overlay

**背景资料**

*   正在使用 Google Maps Android API v2
*   image.png 如下图所示：

![图 1.0：灰色椭圆代表建筑结构，浅橙色空间是角落的图像](https://i.stack.imgur.com/VPQ5G.png)

**问题**

不支持矢量图形；因此，将图像设置为 GroundOverlay 的一部分可以工作。

但是，该`positionFromBounds()`方法根据西南和东北边界定位图像。

因此，建筑结构的位置不正确，因为使用图像的角而不是实际的建筑表示。

如何将图像更精确地放置在地图上？

# c++ - QString 在 QVector 内存泄漏

> ID：15990426
> 
> 赞同：3
> 
> 时间：2013-04-13T16:57:40.643
> 
> 标签：c++, qt, qstring

为什么当我按如下方式填充 QVector 时：

```
QVector< QPair<qint32, QString> > vector(10000000);
QString temp;
for (int i = 0; i < 10000000; ++i)
{
   temp = QString::fromUtf8("Vasya");
   vector.replace(i, qMakePair(i, temp));
} 
```

我的程序使用 470 MB 的 RAM，并且当这样：

```
QVector< QPair<qint32, QString> > vector(10000000);
QString temp2 = "Vasya";
for (int i = 0; i < 10000000; ++i)
{
    vector.replace(i, qMakePair(i, temp2));
} 
```

它只有 90 MB 的 RAM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:13:49.773

Because internally `QString` is optimized to share memory of const objects. First case needs allocate memory each time when `fromUtf8` invoked. On opposite second case always can reuse memory from existing const `temp2`

# ruby - Ruby - 从多个套接字读取（irc bot）

> ID：15990429
> 
> 赞同：0
> 
> 时间：2013-04-13T16:57:55.810
> 
> 标签：ruby, multithreading, sockets, irc, connection

我正在尝试制作一个连接到多个服务器的 IRC 机器人，但我无法同时读取所有套接字。

我当前的代码：

```
    #!/usr/bin/ruby
    需要“插座”

    服务器 = [“irc.chat4all.org”]

    def 连接（服务器、端口、计数）
            提出“连接到#{server} ...”
                    @socket[count] = TCPSocket.open(服务器，端口)
                    说（“尼克链接集线器”，计数）
                    说（“用户链接集线器 0 * 链接集线器”，计数）
                    读取数据（计数）
    结尾

    def 说（味精，计数）
            @socket[count.to_i].puts msg.to_s
    结尾

    def say_channel（味精，计数）
            @socket[count.to_i].puts("PRIVMSG #test :"+msg.to_s)
    结尾

    def read_data（计数）
            直到@socket[count].eof? 做
                    msg = @socket[count].gets
                    放味精
                    如果 msg.match(/^PING :(.*)$/)
                            说（“乒乓球 #{$~[1]}”，计数）
                            说（“加入#test”，计数）
                            下一个
                    结尾
                    如果 msg.match(/`test/)
                            say_channel("正在连接 efnet...", count)
                            线程.new {
                            连接（“irc.efnet.nl”，6667，计数）
                            }
                    结尾
            结尾
    结尾

    连接 = []
    计数 = 0
    @socket = []
    servers.each 做 |server|
            连接（服务器，6667，计数）
            计数 += 1
    结尾

```

问题是当我发送命令'`test'时，它连接到efnet，但即使我在线程中运行新连接，它也不会再读取另一个套接字。我只想同时从两个套接字读取。（变量'count'是套接字号）

谁能帮我吗？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:58:39.897

为此，您需要并行性。

```
pids = []
servers.each do |server|
    pids << fork do
      connect(server, 6667, count)
      count += 1
    end
end
pids.each{|pid| Process.wait pid} 
```

您可能想阅读有关进程、线程和其他操作系统主题的信息。

# c# - 什么时候不使用接口作为返回类型？

> ID：15990432
> 
> 赞同：0
> 
> 时间：2013-04-13T16:58:05.997
> 
> 标签：c#

我读过使用接口作为返回类型来减少耦合通常是一个好主意。什么时候使用接口作为返回类型是个坏主意

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T17:02:36.007

当您不应该将接口用作返回类型时，有两种一般情况：

*   当您的调用者需要*无法*通过接口获得的类功能时，以及
*   当您的类是对返回接口提出额外要求的框架的一部分时（例如，与 WCF 一起使用的类）。

在所有情况下，当您可以使用接口作为返回类型时，最好使用一个。

# java - 在终止的代码上使用 JUnit

> ID：15990433
> 
> 赞同：4
> 
> 时间：2013-04-13T16:58:12.640
> 
> 标签：java, junit, junit4

我正在尝试测试给定的 java 应用程序，为此我想使用 JUnit。

我面临的问题如下：一旦我尝试测试的代码完成它的工作，它的调用`System.exit()`就会关闭应用程序。虽然它也阻止了我的测试完成，因为它关闭了 JVM（我假设）。

有没有办法在不修改原始代码的情况下解决这个问题？最初我尝试从新线程启动应用程序即时测试，尽管这显然没有太大区别。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T23:14:00.210

您可以使用[系统规则](http://stefanbirkner.github.io/system-rules/)：“用于测试代码的 JUnit 规则集合`java.lang.System`。”

在他们的规则中，你有`ExpectedSystemExit`，下面是一个如何使用它的例子。我相信这是一个非常干净的解决方案。

```
import org.junit.Rule;
import org.junit.Test;
import org.junit.contrib.java.lang.system.Assertion;
import org.junit.contrib.java.lang.system.ExpectedSystemExit;

public class SystemExitTest {
    @Rule
    public final ExpectedSystemExit exit = ExpectedSystemExit.none();

    @Test
    public void noSystemExit() {
        //passes
    }

    @Test
    public void executeSomeCodeAFTERsystemExit() {
        System.out.println("This is executed before everything.");
        exit.expectSystemExit();
        exit.checkAssertionAfterwards(new Assertion() {
            @Override
            public void checkAssertion() throws Exception {
                System.out.println("This is executed AFTER System.exit()"+
                " and, if exists, the @org.junit.After annotated method!");
            }
        });
        System.out.println("This is executed right before System.exit().");
        System.exit(0);
        System.out.println("This is NEVER executed.");
    }

    @Test
    public void systemExitWithArbitraryStatusCode() {
        exit.expectSystemExit();
        System.exit(0);
    }

    @Test
    public void systemExitWithSelectedStatusCode0() {
        exit.expectSystemExitWithStatus(0);
        System.exit(0);
    }

    @Test
    public void failSystemExit() {
        exit.expectSystemExit();
        //System.exit(0);
    }

} 
```

如果您使用 Maven，您可以将其添加到您的`pom.xml`：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
</dependency>
<dependency>
    <groupId>com.github.stefanbirkner</groupId>
    <artifactId>system-rules</artifactId>
    <version>1.3.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T01:01:08.637

`System.exit(status)`实际上将调用委托给*Runtime*类。继续此关闭请求之前的*运行时*`checkExit(status)`调用JVM 的当前*SecurityManager可以通过抛出**SecurityException*来防止即将关闭。

通常，*SecurityManager*需要确定当前线程是否具有由当前安全策略定义的关闭权限，但由于我们需要从这个退出调用中恢复，我们只需抛出一个*SecurityException*，我们现在必须捕获它我们的 JUnit 测试用例。

在您的 JUnit 测试类中，在方法中设置一个*SecurityManager*`setUP()`：

```
 securityManager = System.getSecurityManager();
    System.setSecurityManager(new SecurityManager() {
        @Override
        public void checkExit(int status) {
            super.checkExit(status); // This is IMPORTANT!
            throw new SecurityException("Overriding shutdown...");
        }
    }); 
```

*再次将SecurityManager*`tearDown()`替换为我们之前保存的实例。不这样做会阻止 JUnit 现在关闭！:)

 *参考资料： http:
[//docs.oracle.com/javase/1.5.0/docs/api/java/lang/SecurityManager.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SecurityManager.html)
[http://docs.oracle.com/javase/1.5.0/docs/api/java /lang/SecurityManager.html#checkExit(int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SecurityManager.html#checkExit(int))

> SecurityManager 类包含许多名称以单词 check 开头的方法。在这些方法执行某些潜在敏感操作之前，这些方法由 Java 库中的各种方法调用。这种检查方法的调用通常如下所示：

```
 SecurityManager security = System.getSecurityManager();
     if (security != null) {
         security.checkXXX(argument,  . . . );
     } 
```

> 因此，安全管理器有机会通过抛出异常来阻止操作完成。如果操作被允许，安全管理器例程会简单地返回，但如果操作不被允许，则抛出 SecurityException。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-13T17:26:40.010

System.exit() 除了调用应用程序作为单独的进程（在您的 JVM 之外）运行之外，没有其他办法。

您可以从单元测试中执行此操作，并观察从它返回的错误级别。这是否对通过测试提供足够的反馈取决于您的判断。*

# javascript - startDate 在 FullCalendar 插件中显示两次

> ID：15990434
> 
> 赞同：0
> 
> 时间：2013-04-13T16:58:26.943
> 
> 标签：javascript, jquery

我正在为我的一个项目使用 FullCalendar 插件。当用户单击日历的一个区域时，它会显示一个带有输入和约会按钮的弹出窗口。当用户单击“约会”按钮时，`makeAppointment`会调用函数，我只是回`startDate`显到控制台。

当用户第一次单击约会按钮时，它会记录选定的日期和时间。当用户选择“第二个日期和时间”并单击弹出窗口上的约会按钮时，它会显示两个日期和时间，即一个以前的日期和时间和一个当前选择的日期和时间。第三次和第四次也是如此。**为什么它有这种行为，我该如何解决？**

这是我的代码

```
var Calendar = {
    init: function () {
        $('#calendar').fullCalendar({
            defaultView: 'agendaWeek',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaWeek,agendaDay',
                ignoreTimezone: false
            },
            select: this.select
        });
    },

    select: function (startDate, endDate, allDay, jsEvent, view) {
        Calendar.Dialog.init(startDate, endDate);
    },

    Dialog: {
        init: function (startDate, endDate) {
            this.show();
            $('.overlay').on('click', function () { Calendar.Dialog.close() });
            $('#appointmentButton').on('click', function () { Calendar.Dialog.makeAppointment(startDate, endDate) });
        },

        //show and close functions are here

        makeAppointment: function (startDate, endDate) {
            console.log(startDate);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:26:47.637

尝试先检查Dialog是否已经初始化，否则不要再做。

```
 var Calendar = {
    init: function () {
        $('#calendar').fullCalendar({
            defaultView: 'agendaWeek',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaWeek,agendaDay',
                ignoreTimezone: false
            },
            select: this.select
        });
    },

    initialized: false,

    select: function (startDate, endDate, allDay, jsEvent, view) {
        if (this.initialized === false) {
            this.initialized = true;
            Calendar.Dialog.init(startDate, endDate);
        }
    },

    Dialog: {
        init: function (startDate, endDate) {
            this.show();
            $('.overlay').on('click', function () { Calendar.Dialog.close() });
            $('#appointmentButton').on('click', function () { Calendar.Dialog.makeAppointment(startDate, endDate) });
        },

        //show and close functions are here

        makeAppointment: function (startDate, endDate) {
            console.log(startDate);
        }
    }
} 
```

# c++ - 从 node.js C++ 绑定访问 JSON.stringify

> ID：15990445
> 
> 赞同：10
> 
> 时间：2013-04-13T16:59:15.810
> 
> 标签：c++, json, node.js

我正在编写 node.js 绑定，我想从 v8::Object 实例生成 JSON 字符串。我想用 C++ 来做。由于 node.js 已经有了`JSON.stringify`，我想使用它。但我不知道如何从 C++ 代码中访问它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T18:08:57.513

You need to grab a reference to the global object, and then grab the stringify method;

```
Local<Object> obj = ... // Thing to stringify

// Get the global object.
// Same as using 'global' in Node
Local<Object> global = Context::GetCurrent()->Global();

// Get JSON
// Same as using 'global.JSON'
Local<Object> JSON = Local<Object>::Cast(
    global->Get(String::New("JSON")));

// Get stringify
// Same as using 'global.JSON.stringify'
Local<Function> stringify = Local<Function>::Cast(
    JSON->Get(String::New("stringify")));

// Stringify the object
// Same as using 'global.JSON.stringify.apply(global.JSON, [ obj ])
Local<Value> args[] = { obj };
Local<String> result = Local<String>::Cast(stringify->Call(JSON, 1, args)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T09:27:14.267

从 OP 的发布开始，一些节点 API 已经发生了变化。假设 node.js 版本为 7.7.1，代码将转换为以下内容；

```
std::string ToJson(v8::Local<v8::Value> obj)
{
    if (obj.IsEmpty())
        return std::string();

    v8::Isolate* isolate = v8::Isolate::GetCurrent();
    v8::HandleScope scope(isolate);

    v8::Local<v8::Object> JSON = isolate->GetCurrentContext()->
        Global()->Get(v8::String::NewFromUtf8(isolate, "JSON"))->ToObject();
    v8::Local<v8::Function> stringify = JSON->Get(
        v8::String::NewFromUtf8(isolate, "stringify")).As<v8::Function>();

    v8::Local<v8::Value> args[] = { obj };
    // to "pretty print" use the arguments below instead...
    //v8::Local<v8::Value> args[] = { obj, v8::Null(isolate), v8::Integer::New(isolate, 2) };

    v8::Local<v8::Value> const result = stringify->Call(JSON,
        std::size(args), args);
    v8::String::Utf8Value const json(result);

    return std::string(*json);
} 
```

基本上，代码`JSON`从引擎获取对象，获取对该对象函数`stringify`的引用，然后调用它。代码相当于javascript；

```
var j = JSON.stringify(obj); 
```

其他基于 v8 的替代方案包括使用`JSON`该类。

```
auto str = v8::JSON::Stringify(v8::Isolate::GetCurrent()->GetCurrentContext(), obj).ToLocalChecked();
v8::String::Utf8Value json{ str };
return std::string(*json); 
```

# c++ - 试图了解我的冒泡排序方法出了什么问题

> ID：15990447
> 
> 赞同：1
> 
> 时间：2013-04-13T16:59:29.460
> 
> 标签：c++, sorting, bubble-sort

我不确定为什么我的代码不起作用。它们都打印相同的值而不是对它们进行排序。输出没有改变，数组似乎仍然没有排序。有什么想法可以解决这个问题吗？我想知道为什么。

```
 void BSort::BubbleSort()
{   int temp =0;
     for(int index = 0; index < sizes; index++){
        for(int index2 = 0; index2 < sizes-1; index2++ ){
            if(Array1[index2] > Array1[index2+1]){
                 temp = Array1[index2];
                 Array1[index2] = Array1[index2+1];
                 Array1[index2+1] = temp;           }
        }
     }

}

/*************************************************************************/
//---------------------------  BubbleSort2( )  --------------------------//
/*************************************************************************/

void BSort::BubbleSort2()
{ 
     int temp =0;
     for(int index = 0; index < sizes-1; index++){
        for(int index2 = sizes-1; index2 > index; index2--){
            if( Array2[index2] < Array2[index2-1]){
                 temp = Array2[index2];
                 Array2[index2] = Array2[index2-1];
                 Array2[index2-1] = temp;           
        }
        }
     }
}

/*************************************************************************/
//-----------------------------  CombSort( )  ---------------------------//
/*************************************************************************/

void BSort::CombSort() {
int temp = 0;   
int tempsize =sizes;
int index2;
while((tempsize = int(tempsize/1.3)) >1){
    for(int index = sizes-1; index >= tempsize; index--){
        index2 = index-tempsize;
        if(Array3[index] < Array3[index2]){
            temp = Array3[index];
            Array3[index] = Array3[index2];
            Array3[index2] = temp;
        }   
    }
    bool testcase = true;
    for(int in = 0; in < sizes; in++){
        for(int in2 =sizes-1,testcase = false; in2 > in; in2--){
            if(Array3[in2] < Array3[in2-1])
            { temp = Array3[in2];
                Array3[in2] = Array3[in2-1];
                Array3[in2-1] = temp;
                testcase = true;
            }
        }
    }
}

} 
```

主文件

```
#include<iostream>

#include<cstdlib>

#include "BSort.h"
using namespace std;

int main(void)
{

       int a[] = {-2, 88, 6, -1, 10, 15, 3, 12, -11, 9, 33, 21, 4, 7, 45, 55, 62, 18, 0, 20};

        BSort S(a,20);

        cout << endl << " Display Array elements before sorting";
        S.DisplayListElements();

        // Calling bubble sort
        S.BubbleSort();
        S.BubbleSort2();
        S.CombSort();

        cout << endl << endl << " Display Array elements Increasing order After BubbleSort";
        S.DisplayListElements();

        system("pause");
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:01:53.517

试试这个..基本上在每次迭代之后你需要运行内部循环比外部变量少一个......主要是因为它已经排序

```
 void BSort::BubbleSort()
{   int temp =0;
     for(int index = 0; index < sizes; index++){
        for(int index2 = 0; index2 < sizes-index; index2++ ){
            if(Array1[index2] > Array1[index2+1]){
                 temp = Array1[index2];
                 Array1[index2] = Array1[index2+1];
                 Array1[index2+1] = temp;           }
        }
     }

} 
```

# c++ - 如何使用两个预编译头文件。一种用于托管代码，另一种用于非托管代码。xxx.pch 不是有效的预编译头文件

> ID：15990454
> 
> 赞同：4
> 
> 时间：2013-04-13T17:00:02.960
> 
> 标签：c++, visual-c++, precompiled-headers

我混合了 C++ 项目（托管和非托管）。非托管正在使用许多库，例如 boost。它们都包含在 stdafx.h 文件中。我试图有两个单独的预编译头文件，一个是托管的（stdafx.h），一个是非托管的（stdafxManaged.h）。但是，当我从托管代码中包含 stdafxManaged.h 时，我收到一条错误消息：

> 错误 C2855：命令行选项“/clr”与预编译头文件不一致

因此，我为 stdasfManaged.cpp 打开公共语言运行时支持 (/clr) 并收到以下错误：

> 错误 C1852：'Debug\xxx.pch' 不是有效的预编译头文件

其中 xxx 是项目的名称，对于项目中的所有非托管 .cpp 文件，它都显示为错误。

有谁知道如何修复此错误或有任何指向教程的链接，该教程告诉您如何为混合代码设置多个预编译头文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T15:57:50.243

这实际上是可能的。确保 /clr 对 .cpp 文件处于活动状态，并且预编译头文件和预编译头输出文件设置与常规 stdafx.h 和 $(TargetName).pch 不同。

# javascript - 如何在 node.js 中将 derby.js 与 express.js 集成？

> ID：15990455
> 
> 赞同：4
> 
> 时间：2013-04-13T17:00:05.077
> 
> 标签：javascript, node.js, express, real-time-updates, derbyjs

我正在为我的 Node 应用程序使用[express](http://www.expressjs.com/)框架。我需要一些实时更新，例如 facebook 中的通知。我需要的是集成[derby.js](http://www.derbyjs.com/)（它是构建在 express 之上的框架），仅用于 express App 中的实时通知触发。我怎样才能完成这项任务？

**我正在使用**的 Expressjs语法****

 **```
app.get('/', function(req, res){
   //other things as fetch query 
   res.render('index', { notificationcount : 0 });
}); 
```

以上内容将从数据库中获取通知计数并显示在视图中。

**用于实时更新的**Derbyjs示例语法****

 **```
app.view.make('Body'
, 'Notications: <div>{notificationcount}</div>'
);
app.get('/', function (page, model) {
  // Subscribe specifies the data to sync
  model.subscribe('notificationcount', function () {
    page.render();
  });
}); 
```

我需要的只是来自 derby 的快速渲染视图页面需求中的一个部分（带有通知计数的框）。这样该框将根据数据库的实时更新进行更新。

我们如何在 express 中集成 derby 视图？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:30:22.880

Derby 是一个用于构建实时应用程序的全功能 alpha 框架。似乎您只需要少量实时来实现特定功能。我建议只使用 socket.io 或 sockjs - 无需为一个小用例集成整个框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T21:06:19.567

好吧，不确定你在哪里买的语法，但是

*   将 {notificationcount} 更改为 {{notificationcount}} ...

并正确呈现页面

```
page.render('index', { notificationcount : 0 }); 
```

每当您的模型更改时，站点都会实时更改。您应该安装并研究示例 :: [https://github.com/codeparty/derby-examples](https://github.com/codeparty/derby-examples)****

# python - 列表与字典列表

> ID：15990456
> 
> 赞同：13
> 
> 时间：2013-04-13T17:00:29.357
> 
> 标签：python, arrays, list, math, dictionary

在 Python 中，使用列表列表与使用字典相比是否有任何优点/缺点，更具体地说是在使用它们进行数值运算时？我正在编写一类函数来解决我的线性代数类的简单矩阵运算。我正在使用字典，但后来我看到它`numpy`使用列表列表，所以我想它一定有一些优势。

示例：`[[1,2,3],[4,5,6],[7,8,9]]`相对于`{0:[1,2,3],1:[4,5,6],2:[7,8,9]}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T17:04:45.387

当字典的键是`0`, `1`, ..., 时`n`， a`list`会更快，因为不涉及散列。只要键不是这样的顺序，您就需要使用`dict`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-13T17:17:07.737

我认为这在很大程度上取决于您计划如何使用这种结构。

Python 的字典（和大多数字典一样）默认是无序的。如果您打算像这样迭代您的数据，则不应使用字典：

```
for list in dict.keys():
    for elem in list:
        # Logic 
```

同样，使用带有键 1、2、3 ... 的字典也没有多大意义，因为它们除了索引之外没有什么价值。由于散列过程，字典也占用了更多的内存空间。

如果您计划按元素访问项目（听起来像您想要的那样），您仍然需要使用列表。在 O(1) 的列表中查找索引，与在字典中相同。唯一的区别是当您查找某个键值而不是索引时（这将比在字典中更快）。

当您有某种**键值关系**映射时，您真的应该只考虑使用字典，其中需要搜索有意义的键以检索相关值。这听起来不像是其中一种情况。坚持使用列表列表。

* * *

[这并不是说字典是一种糟糕的数据结构。Ruby 和 Python 向我介绍了它们，它们对于上述任何映射问题都非常有用（我发现我遇到了很多）。它们仅对特定类别的问题有用，而这不是其中之一。]

# opennms - OpenNMS 被动节点日志扫描

> ID：15990463
> 
> 赞同：0
> 
> 时间：2013-04-13T17:01:27.713
> 
> 标签：opennms

我想设置 OpenNMS 监控系统，OpenNMS 服务器将在其中完成所有工作，因为我无法修改必须扫描的节点。我可以虽然 ssh 和 ftp 到那些节点。我正在考虑使用一些将 ssh 和尾日志的插件。关于我可以使用的插件的任何建议或如何编写我自己的插件的好教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:33:03.503

当您拥有对节点的 snmp 访问权限时，Opennms 处于最佳状态。Snmp 将使您能够监控、收集和绘制图表，如果没有它，我相信您将需要创建一个自定义收集器来收集和绘制有用的信息，如果这是您的目标。有一些标准的收集器： [http ://www.opennms.org/wiki/Docu-overview#Data_Collection](http://www.opennms.org/wiki/Docu-overview#Data_Collection)

[http://www.opennms.org/wiki/Documentation:Features_DataCollection](http://www.opennms.org/wiki/Documentation:Features_DataCollection)

关于收集数据的通用方法，您可以使用期望脚本或者，您可以在客户端（如果您具有相关访问权限）上编写一些脚本，以收集可以由服务器检索的数据。只要您保管好您的密钥，就可以使用基于密钥的 SSH 连接来减轻身份验证负担。

# mysql - 中间行意外插入新数据

> ID：15990467
> 
> 赞同：0
> 
> 时间：2013-04-13T17:02:26.957
> 
> 标签：mysql, insert, row

我只是在我的网站中插入带有表单的数据，通常数据将插入到最后一行中，例如：auto_increment name

```
1 a
2 b
3 c
4 d
5 e 
```

但是，当我上次插入新数据时，它插入到表格的中间行，看起来像：

```
17 data17
30 data30
18 data18
19 data19
20 data20 
```

已插入表中间行的最新数据（data30）。它很少发生在我身上（仍然发生）为什么会发生这种情况？以及我将来如何防止这件事发生？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:12:51.233

What you see is the result returned by the engine. It is hardly a matter which recod is fetched early and which later as it depends on a lot of issues. For one, dont think your database table to be a sequential file like FoxPro. It is way more sophisticated than that. Next, for every query that returns data use a Order by clause to avoid these instances.

So always use:

```
select columns from table order by column 
```

The above will ensure you get the data the way you need and not be surprised when the DB engine finds a later record in cache while fetches an older record from a slow media in another database file. If you read the basics of RDBMS concepts then these things are discussed as also you need to study how MySQL internally works.

I found this great article that discusses the many wonderful features of a modern database query engine. [http://thinkingmonster.wordpress.com/mysql/mysql-architecture/](http://thinkingmonster.wordpress.com/mysql/mysql-architecture/)

Although the entire article discusses the topic very well but you may pay extra attention to the section that talks about `Record Cache`.

# javascript - 将突出显示的文本保存到字符串

> ID：15990468
> 
> 赞同：2
> 
> 时间：2013-04-13T17:02:32.270
> 
> 标签：javascript, html, web-applications, highlight

我正在制作一个将屏幕分成两个窗口的 Web 应用程序，一侧是基于 Web 的文本编辑器，另一侧只是一个普通窗口。我正在尝试找到一种方法，让用户在浏览器端突出显示一些文本，然后将突出显示的文本自动保存到一个字符串中，然后我就可以在其中操作该字符串。

有人有什么想法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:33:27.503

```
 function getSelectionText() {
            var text = "";
            if (window.getSelection) {
                text = window.getSelection().toString();
            } else if (document.selection && document.selection.type != "Control") {
                text = document.selection.createRange().text;
            }
            return text;
        }
        $(document).ready(function (){
           $('div').mouseup(function (e){
               alert(getSelectionText())
           })
        });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>
        Hello, this is a highlight text test
    </div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T18:32:16.813

所以你在这里有两个步骤。

1.  捕获 mouseup 事件。
2.  返回选定的文本。

可以通过 js 调用访问在文档上选择的任何文本：

```
window.getSelection() 
```

但这是特定于浏览器的。因此，您可以使用此代码片段来涵盖从所有浏览器中抓取选定的文本。

```
function getSelectedText () {
    var txt = ''
    if (window.getSelection) {
        txt = window.getSelection();
    } else if (document.getSelection) {
        txt = document.getSelection();
    } else if (document.selection) {
        txt = document.selection.createRange().text;
    }
    return txt;
} 
```

我假设您正在使用像 jQuery 这样的库。这样可以帮助处理 mouseup 事件。您可能不想捕获整个文档的选择。所以你可以绑定到你需要的任何元素。像我的jsfiddle在这里：http: [//jsfiddle.net/xh799/](http://jsfiddle.net/xh799/)

# configuration - 如何让 AWSStats 生成静态 HTML 文件？

> ID：15990475
> 
> 赞同：0
> 
> 时间：2013-04-13T17:02:52.987
> 
> 标签：configuration, debian, awstats

我想让 AWStats 在运行 Debian 4.4.5-8 和 Apache 2 的网络服务器上运行。

有几个网站都有自己的配置文件，类似这样：

```
Include "/etc/awstats/awstats.model.conf"
LogFile="/var/customers/logs/myname-example.com-access.log"
LogType=W
LogFormat = 1
LogSeparator=" "
SiteDomain="example.com"
HostAliases="*.example.com"
DirData="/www/myname/awstats/example.com/" 
```

我期望将 HTML 文件写入 /www/myname/awstats/example.com/ 然后我可以通过 Apache 访问它。但是，当我运行[/usr/share/awstats/tools/buildstatic.sh](http://www.nsds.com/software/dist/awstats/debian-buildstatic.sh.txt)时，会发生 .txt 文件被写入该目录，而我想要的 HTML 文件被写入 /var/cache/awstats。/tmp 中的错误文件仍然为空。

为什么会发生这种情况，如何让它按我想要的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T18:50:09.237

Web 服务器不应该直接读取 DirData。它由 awstats.pl 使用。

事实是 /var/cache/awstats 在 buildstatic.sh 中是硬编码的，因此您必须更改提及它的两行：

```
mkdir -p /var/cache/awstats/$c/$Y/$m/ 
```

和

```
-dir=/var/cache/awstats/$c/$Y/$m/ >$TMPFILE 2>&1 
```

# clojure - 如何对以下转换进行建模

> ID：15990481
> 
> 赞同：0
> 
> 时间：2013-04-13T17:03:34.310
> 
> 标签：clojure

我有一个数据哈希图，键是字符串描述，值是整数权重。

`{:a 2 :b 3 ......}`

我需要将哈希转换为向量的向量。每个内部向量都包含映射条目。

`[[[:a 2][:b 3]...][......]]`

每个内部向量都是根据一些规则构建的。例如，所有重量的总和不应超过某个值

通常，这对于将哈希转换为映射条目向量向量的 reduce 来说似乎是一个很好的案例。但是，我可能需要多次迭代哈希，因为我可能需要重新洗牌内部向量之间的条目，以便所有向量总和为某个 num。

关于我应该如何建模问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:36:36.033

好吧，对于初学者来说，Clojure 映射已经是向量序列。所以`reduce` 不需要：

```
=> (for [e {:a 1 :b 2}] e)
([:a 1] [:b 2]) 
```

不要将其视为“迭代”，您应该采用定义一个函数的方法，该函数接受您的输入向量并返回一个带有调整的新序列。递归调用此函数，直到达到您需要的总和。

# emacs - 在新的 gui 窗口中打开新文件或通过拆分窗口

> ID：15990482
> 
> 赞同：32
> 
> 时间：2013-04-13T17:03:41.813
> 
> 标签：emacs, window, file-browser

emacs 如何在新的 gui 窗口中打开新文件？以及如何通过拆分窗口使其打开？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-13T19:49:47.390

Emacs 将 gui 窗口称为“框架”，带有框架的分区称为“窗口”。

您可以使用 . 在新框架中打开文件`C-x 5 f`。您可以使用 . 在同一框架中的不同窗口中打开文件`C-x 4 f`。

# windows - Windows中的Emacs，gpg错误

> ID：15990483
> 
> 赞同：0
> 
> 时间：2013-04-13T17:04:00.960
> 
> 标签：windows, emacs, elisp, gnupg

我在 Windows 上使用 emacs。每当我希望使用 epa-encrypt-file 加密文件内容时，都会出现以下错误：

```
Searching for program: Permission denied, gpg 
```

我该如何纠正？

**编辑**

我将 gpg 安装在与 .emacs 相同的位置，并将其添加到 .emacs：

```
(when (string-equal system-type "windows-nt")
  (setq exec-path
'(
"e:/GnuPG/"
)
 )) 
```

现在显示的错误是：

```
peculiar error: "Can't decrypt", "Exit" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:13:22.927

(setq explicit-shell-file-name "C:/Program Files (x86)/Git/bin/bash.exe") (setq shell-file-name explicit-shell-file-name) (add-to-list ' exec-path "C:/Program Files (x86)/Git/bin")

请参阅 [Windows、Emacs、Git Bash 和 shell-command](https://stackoverflow.com/questions/16676750/windows-emacs-git-bash-and-shell-command)

# javascript - 在同一数组的另一个元素中插入元素

> ID：15990486
> 
> 赞同：0
> 
> 时间：2013-04-13T17:04:09.680
> 
> 标签：javascript, jquery

我一直在寻找没有运气的解决方案。我有一个 JSON 对象：

```
arr = [
{
    "id": "1",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "2",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "3", 
    "dataId" : "", 
    "rel": ""   
}, 
{
    "id": "4",
    "dataId" : "1", 
    "rel": ""   
}]; 
```

我需要一种用 javascript 操作这个数组的方法（允许使用 jquery），所以当“arr[a].dataId”与“arr[b].id”匹配时，取“arr[a]”元素并插入“ arr[b]" 创建一个新数组，如下所示：

```
newArr = [
{
    "id": "1",
    "dataId" : "", 
    "rel" : [
        {
            "id": "4",
            "dataId" : "1"  
        }
    ]
}, 
{
    "id": "2",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "3", 
    "dataId" : "", 
    "rel": ""   
} 
```

];

我希望你明白我在问什么，任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:48:27.260

试试这个：

```
var arr = [
{
    "id": "1",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "2",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "3", 
    "dataId" : "", 
    "rel": ""   
}, 
{
    "id": "4",
    "dataId" : "1", 
    "rel": ""   
}];
$(arr).each(function(index,value){
     if(value.dataId)
     {
         $(arr).each(function(ind,val){
             if(val.id==value.dataId)
             {
                 if(val.rel)
                 {
                     val.rel.push({"id":value.id,"dataId":value.dataId});
                 }
                 else
                 {                   
                     val.rel=[{"id":value.id,"dataId":value.dataId}];                     
                 }
             }
         });
     }
});
console.log(arr); 
```

**小提琴** [http://jsfiddle.net/7g23B/](http://jsfiddle.net/7g23B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:32:46.997

这个确实移动了元素，并且在迭代数组时不操纵数组。也不需要扩展 Array.prototype。一个缺点是您将在数组中找到漏洞（元素的索引不会从 0 到 length-1），但据我所知，这在您的用例中并不重要。

```
var arr = [
{
    "id": "1",
    "dataId" : "", 
    "rel": ""
}, 
{
    "id": "2",
    "dataId" : "3", 
    "rel": ""
}, 
{
    "id": "3", 
    "dataId" : "", 
    "rel": ""   
}, 
{
    "id": "4",
    "dataId" : "1", 
    "rel": ""   
}];

var indexesToMoveMap = {};

$.each(arr, function(outerIndex, outerElem) {
    if (outerElem.dataId) { 
        $.each(arr, function(innerIndex, innerElem) {
            if (innerElem.id === outerElem.dataId) {
                indexesToMoveMap[outerIndex] = innerIndex;
            }
        });
    }
});

$.each(indexesToMoveMap, function(indexToMove, indexToMoveTo) {
    arr[indexToMoveTo].rel = arr[indexToMoveTo].rel || [];
    arr[indexToMoveTo].rel.push(arr[indexToMove]);
    delete arr[indexToMove];
});

console.log(arr); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T17:37:42.440

像这样的东西？

```
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function(from, to) {
  var rest = this.slice((to || from) + 1 || this.length);
  this.length = from < 0 ? this.length + from : from;
  return this.push.apply(this, rest);
};

var arr = [
{
    "id": "1",
    "dataId" : "", 
    "rel": []
}, 
{
    "id": "2",
    "dataId" : "", 
    "rel": []
}, 
{
    "id": "3", 
    "dataId" : "", 
    "rel": []   
}, 
{
    "id": "4",
    "dataId" : "1", 
    "rel": []   
}];

var index = 0;
for ( var m = 0; m < arr.length; m++ ) {
    for ( var i = 0; i < arr.length; i++ ) {

       if ( arr[index].id === arr[i].dataId ) {
             arr[index].rel.push (arr[i]);  
             arr.remove(i);
       }

    }
    index++;
}

console.log(JSON.stringify(arr, null, 4)) 
```

# regex - 带有加号运算符的bash中的if语句正则表达式

> ID：15990495
> 
> 赞同：5
> 
> 时间：2013-04-13T17:04:56.930
> 
> 标签：regex, bash, if-statement

我确信这是一个简单的疏忽，但我没有看到它，而且我不确定为什么这个正则表达式匹配得比它应该的要多：

```
#!/bin/bash
if [[ $1 =~ ([0-9]+,)+[0-9]+ ]]; then
{
  echo "found list of jobs"
}
fi 
```

这是输入看起来像“02,48,109,309,183”。匹配就好

但是，它也匹配没有最终数字而是“09,28,34”的输入

最后是否应该`[0-9]+`指示最终字符至少为 1+ 数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T17:08:50.187

您必须为输入的开始 ( `^`) 和结束 ( `$`) 添加标记：

```
#!/bin/bash
if [[ $1 =~ ^([0-9]+,)+[0-9]+$ ]]; then
    echo "found list of jobs"
fi 
```

否则它匹配`09,28,34,`，因为它匹配 from `0`until `4`，忽略后面的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T17:09:15.770

您的正则表达式只需匹配*字符串中的某个*位置，而不是从头到尾。要使其匹配整个字符串，请使用`^`和`$`元字符：

```
#!/bin/bash
if [[ $1 =~ ^([0-9]+,)+[0-9]+$ ]]; then
  echo "found list of jobs"
fi 
```

（顺便说一下，你不需要`{`and`}`在 Bash 中定义一个块，这是`then`and的工作`fi`）

# ember.js - 动作助手，类似于 evt.target

> ID：15990496
> 
> 赞同：0
> 
> 时间：2013-04-13T17:04:59.030
> 
> 标签：ember.js

在 ivoked 控制器方法中是否有一些对 DOM elem 的引用，在其上声明了 {{action}} 助手？

或者我怎样才能获得对该 DOM 元素的引用？

这是代码示例。

1.  视图中的代码，例如**标签**或**按钮上的操作**

    ```
    <div class="view">
        {{view Ember.Checkbox checkedBinding="isCompleted" class="toggle"}}
        <label {{action editingA on="doubleClick"}}>{{title}}</label>
        <button class="destroy" {{action deleteAction}}></button>
    </div> 
    ```

2.  控制器中的代码，如您所见，我在双击标签后尝试**关注****一些**元素

     **```
    App.TodoController = Ember.ObjectController.extend({

        isEditing: false,

        editingA: function() {
            this.set('isEditing', true);
            // $(this).focus();
            // How to get reference to label DOM elem
        },

        updateAction: function() {
            var todo = this.get('model');

            this.get('store').commit();

            this.set('isEditing', false);
        }

    }); 
    ```** 

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:08:11.030

我的问题的解决方案在**[Ember.View](http://emberjs.com/api/classes/Ember.View.html)** API 文档中被完整地描述，在名为RESPONDING **TO BROWSER EVENTS**的部分中。

当我需要引用 DOM 元素时，应该创建自定义视图，其中声明了 {{action}} 助手。引用作为第一个参数传递给被调用的方法。

这是示例代码：

```
AView = Ember.View.extend({
  click: function(event){
    // will be called when when an instance's
    // rendered element is clicked
  }
}); 
```**

# asp.net-mvc - 为 XLSX 内的每一行添加一个复选框，然后在上传时删除

> ID：15990498
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:05:08.640
> 
> 标签：asp.net-mvc, excel, checkbox, xlsx

因此 ATM 用户可以下载 xlsx 文档，并向其中添加新记录，将其上传到更新数据库的应用程序（使用新记录）

我想在 excel 文档中添加一个选项。像一个复选框（在每一行的开头）或类似的东西，如果在再次上传文档时选中它，它将从数据库中删除该记录。

我知道逻辑以及如何删除记录，但我不确定如何包含复选框之类的内容并将其与每个单独的行相关联？

有人有想法么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T23:23:50.317

您可以使用复选框，但您需要使用“xlsm”（启用宏的工作簿）来插入它们。（你可以在没有[vba](/questions/tagged/vba "显示标记为“vba”的问题")的情况下做到这一点，但手动插入复选框并配置它们不会很有趣）

复选框可以“链接”到工作簿中的单元格。您需要为每一行添加一个复选框，并将链接的单元格设置为该行上的另一个单元格（最好是同一列）。

您还可以通过取消复选框并仅将一列设置为 true（或任何非空值）并让您的应用程序解释它以删除记录来使其更简单。

这两种方法都要求您有一个额外的列。

任何方法都需要一个额外的列或另一个具有单列的工作表来跟踪每行的状态。

# hadoop - Hadoop错误停止作业减少过程

> ID：15990503
> 
> 赞同：0
> 
> 时间：2013-04-13T17:05:31.343
> 
> 标签：hadoop

我已经在我的两节点集群设置上运行了几次 Hadoop 作业（字数统计示例），到目前为止它运行良好。我不断收到一个 RuntimeException ，它使 reduce 过程停止在 19%：

```
 2013-04-13 18:45:22,191 INFO org.apache.hadoop.mapred.Task: Task:attempt_201304131843_0001_m_000000_0 is done. And is in the process of commiting
    2013-04-13 18:45:22,299 INFO org.apache.hadoop.mapred.Task: Task 'attempt_201304131843_0001_m_000000_0' done.
    2013-04-13 18:45:22,318 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
    2013-04-13 18:45:23,181 WARN org.apache.hadoop.mapred.Child: Error running child
    java.lang.RuntimeException: Error while running command to get file permissions : org.apache.hadoop.util.Shell$ExitCodeException: 
    at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)
at org.apache.hadoop.util.Shell.run(Shell.java:182)
at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)
at org.apache.hadoop.util.Shell.execCommand(Shell.java:461)
at org.apache.hadoop.util.Shell.execCommand(Shell.java:444)
at org.apache.hadoop.fs.FileUtil.execCommand(FileUtil.java:710)
at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.loadPermissionInfo(RawLocalFileSystem.java:443)
at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.getOwner(RawLocalFileSystem.java:426)
at org.apache.hadoop.mapred.TaskLog.obtainLogDirOwner(TaskLog.java:267)
at org.apache.hadoop.mapred.TaskLogsTruncater.truncateLogs(TaskLogsTruncater.java:124)
at org.apache.hadoop.mapred.Child$4.run(Child.java:260)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1149)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

    at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.loadPermissionInfo(RawLocalFileSystem.java:468)
at org.apache.hadoop.fs.RawLocalFileSystem$RawLocalFileStatus.getOwner(RawLocalFileSystem.java:426)
at org.apache.hadoop.mapred.TaskLog.obtainLogDirOwner(TaskLog.java:267)
at org.apache.hadoop.mapred.TaskLogsTruncater.truncateLogs(TaskLogsTruncater.java:124)
at org.apache.hadoop.mapred.Child$4.run(Child.java:260)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1149)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

有没有人知道可能导致这种情况的原因？

**编辑：自己解决了。** 如果其他人遇到同样的问题，这是由主节点上的 etc/hosts 文件引起的。我没有输入从节点的主机名和地址。这就是我的主机文件在主节点上的结构：

```
 127.0.0.1   MyUbuntuServer
    192.xxx.x.xx2   master
    192.xxx.x.xx3   MySecondUbuntuServer
    192.xxx.x.xx3   slave 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T07:58:27.527

这里描述了一个类似的问题：http: [//comments.gmane.org/gmane.comp.apache.mahout.user/8898](http://comments.gmane.org/gmane.comp.apache.mahout.user/8898)

那里的信息可能与其他版本的hadoop有关。它说：

> java.lang.RuntimeException：运行获取文件权限的命令时出错：java.io.IOException：无法运行程序“/bin/ls”：错误=12，空间不足

他们的解决方案是通过**mapred.child.java.opts* *-Xmx1200M更改堆大小**

另请参阅：[https ://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/BHGYJDNKMGE](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/BHGYJDNKMGE)

HTH，阿夫纳

# ios - 使用缓存的 UIView 在 tableView:willDisplayCell:forRowAtIndexPath 中设置单元格背景视图：

> ID：15990504
> 
> 赞同：5
> 
> 时间：2013-04-13T17:05:31.580
> 
> 标签：ios, objective-c, cocoa-touch

这是我设置自定义分组表视图单元格背景的解决方案：

```
- (UIView *)top
{
    if (_top) {
        return _top;
    }

    _top = [[UIView alloc] init];
    [_top setBackgroundColor:[UIColor blueColor]];

    return _top;
}

// dot dot dot

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;

    if (maxRow == 0) {
        [cell setBackgroundView:[self lonely]];
    } else if (row == 0) {
        [cell setBackgroundView:[self top]];
    } else if (row == maxRow) {
        [cell setBackgroundView:[self bottom]];
    } else {
        [cell setBackgroundView:[self middle]];
    }
} 
```

显然它没有按预期工作，这将我带到这里，但是当我*不*使用缓存视图时它确实有效：

```
UIView *background = [[UIView alloc] init];

if (maxRow == 0) {
    [background setBackgroundColor:[UIColor redColor]];
} else if (row == 0) {
    [background setBackgroundColor:[UIColor blueColor]];
} else if (row == maxRow) {
    [background setBackgroundColor:[UIColor yellowColor]];
} else {
    [background setBackgroundColor:[UIColor greenColor]];
}

[cell setBackgroundView:background]; 
```

* * *

***更新：***在乔纳森指出我不能对多个单元格使用同一个视图之后，我决定遵循表格视图模型，它有一个可重复使用的单元格队列。对于我的实现，我有一个可重复使用的背景视图队列 (`_backgroundViewPool`)：

```
@implementation RootViewController {
    NSMutableSet *_backgroundViewPool;
}
- (id)initWithStyle:(UITableViewStyle)style
{
    if (self = [super initWithStyle:style]) {
        _backgroundViewPool = [[NSMutableSet alloc] init];

        UITableView *tableView = [self tableView];
        [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
    }

    return self;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 6;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    if (section == 0) {
        return 1;
    }

    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    [[cell textLabel] setText:[NSString stringWithFormat:@"[%d, %d]", [indexPath section], [indexPath row]]];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIView *backgroundView = [cell backgroundView];
    [_backgroundViewPool addObject:backgroundView];
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;
    UIColor *color = nil;

    if (maxRow == 0) {
        // single cell
        color = [UIColor blueColor];
    } else if (row == 0) {
        // top cell
        color = [UIColor redColor];
    } else if (row == maxRow) {
        // bottom cell
        color = [UIColor greenColor];
    } else {
        // middle cell
        color = [UIColor yellowColor];
    }

    UIView *backgroundView = nil;

    for (UIView *bg in _backgroundViewPool) {
        if (color == [bg backgroundColor]) {
            backgroundView = bg;
            break;
        }
    }

    if (backgroundView) {
        [backgroundView retain];
        [_backgroundViewPool removeObject:backgroundView];
    } else {
        backgroundView = [[UIView alloc] init];
        [backgroundView setBackgroundColor:color];
    }

    [cell setBackgroundView:[backgroundView autorelease]];
} 
```

除非您滚动得非常快，否则它可以工作。一些背景视图消失了！我怀疑背景视图仍在多个单元格中使用，但我真的不知道发生了什么，因为一旦重复使用背景视图就应该从队列中删除，从而无法使用背景视图在多个可见单元格中。

* * *

自从我发布这个问题以来，我一直在研究这个问题。当前在线分组表格视图单元格的自定义背景视图的解决方案不能令人满意，它们不使用缓存视图。此外，我不想使用 XJones 和 jszumski 提出的解决方案，因为一旦考虑到可重用的自定义单元格（例如，文本字段单元格、开关单元格、滑块单元格），它就会变得很麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T02:52:23.437

您是否考虑过对“孤独”、“顶部”、“底部”和“中间”情况使用 4 个单独的单元标识符，并`backgroundView`在初始化单元时仅设置一次？这样做可以让您利用`UITableView`自己的缓存和重用，而无需必须在其之上编写一个实现。

* * *

**更新**：一个分组`UITableViewController`子类的实现，它使用最少数量的单元重用标识符重用背景视图（Espresso 的用例）。 `tableView:willDisplayCell:forRowAtIndexPath:`并`tableView:didDisplayCell:forRowAtIndexPath:`执行繁重的工作以应用或回收每个背景视图，并且池化逻辑在`backgroundViewForStyle:`.

```
typedef NS_ENUM(NSInteger, JSCellBackgroundStyle) {
    JSCellBackgroundStyleTop = 0,
    JSCellBackgroundStyleMiddle,
    JSCellBackgroundStyleBottom,
    JSCellBackgroundStyleSolitary
};

@implementation JSMasterViewController {
    NSArray *backgroundViewPool;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // these mutable arrays will be indexed by JSCellBackgroundStyle values
    backgroundViewPool = @[[NSMutableArray array],  // for JSCellBackgroundStyleTop
                           [NSMutableArray array],  // for JSCellBackgroundStyleMiddle
                           [NSMutableArray array],  // for JSCellBackgroundStyleBottom
                           [NSMutableArray array]]; // for JSCellBackgroundStyleSolitary
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 2) {
        return 1;

    } else if (section == 3) {
        return 0;
    }

    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger section = indexPath.section;
    NSInteger row = indexPath.row;

    static NSString *switchCellIdentifier = @"switchCell";
    static NSString *textFieldCellIdentifier = @"fieldCell";
    static NSString *textCellIdentifier = @"textCell";

    UITableViewCell *cell = nil;

    // apply a cached cell type (you would use your own logic to choose types of course)
    if (row % 3 == 0) {
        cell = [tableView dequeueReusableCellWithIdentifier:switchCellIdentifier];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:switchCellIdentifier];

            UISwitch *someSwitch = [[UISwitch alloc] init];
            cell.accessoryView = someSwitch;

            cell.textLabel.text = @"Switch Cell";
        }

    } else if (row % 3 == 1) {
        cell = [tableView dequeueReusableCellWithIdentifier:textFieldCellIdentifier];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:textFieldCellIdentifier];

            UITextField *someField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 80, 30)];
            someField.borderStyle = UITextBorderStyleRoundedRect;
            cell.accessoryView = someField;

            cell.textLabel.text = @"Field Cell";
        }

    } else {
        cell = [tableView dequeueReusableCellWithIdentifier:textCellIdentifier];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:textCellIdentifier];

            cell.textLabel.text = @"Generic Label Cell";
        }
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.text = [NSString stringWithFormat:@"[%d, %d]", section, row];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];

    return cell;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    // apply a cached background view
    JSCellBackgroundStyle backgroundStyle = [self backgroundStyleForIndexPath:indexPath tableView:tableView];
    cell.backgroundView = [self backgroundViewForStyle:backgroundStyle];
}

- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    JSCellBackgroundStyle backgroundStyle = [self backgroundStyleForIndexPath:indexPath tableView:tableView];
    NSMutableArray *stylePool = backgroundViewPool[backgroundStyle];

    // reclaim the background view for the reuse pool
    [cell.backgroundView removeFromSuperview];

            if (cell.backgroundView != nil) {
            [stylePool addObject:cell.backgroundView];
            }

    cell.backgroundView = nil; // omitting this line will cause some rows to appear without a background because they try to be in two superviews at once
}

- (JSCellBackgroundStyle)backgroundStyleForIndexPath:(NSIndexPath*)indexPath tableView:(UITableView*)tableView {
    NSInteger maxRow = MAX(0, [tableView numberOfRowsInSection:indexPath.section] - 1); // catch the case of a section with 0 rows

    if (maxRow == 0) {
        return JSCellBackgroundStyleSolitary;

    } else if (indexPath.row == 0) {
        return JSCellBackgroundStyleTop;

    } else if (indexPath.row == maxRow) {
        return JSCellBackgroundStyleBottom;

    } else {
        return JSCellBackgroundStyleMiddle;
    }
}

- (UIView*)backgroundViewForStyle:(JSCellBackgroundStyle)style {
    NSMutableArray *stylePool = backgroundViewPool[style];

    // if we have a reusable view available, remove it from the pool and return it
    if ([stylePool count] > 0) {
        UIView *reusableView = stylePool[0];
        [stylePool removeObject:reusableView];

        return reusableView;

    // if we don't have any reusable views, make a new one and return it
    } else {
        UIView *newView = [[UIView alloc] init];

        NSLog(@"Created a new view for style %i", style);

        switch (style) {
            case JSCellBackgroundStyleTop:
                newView.backgroundColor = [UIColor blueColor];
                break;

            case JSCellBackgroundStyleMiddle:
                newView.backgroundColor = [UIColor greenColor];
                break;

            case JSCellBackgroundStyleBottom:
                newView.backgroundColor = [UIColor yellowColor];
                break;

            case JSCellBackgroundStyleSolitary:
                newView.backgroundColor = [UIColor redColor];
                break;
        }

        return newView;
    }
}

@end 
```

尽管您可以很容易地将所有视图转储到一个重用池中，但它会使一些循环逻辑复杂化，并且这种方式更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:21:38.110

首先，我会检查为什么需要这种缓存。如果这是一个性能问题，我会检查问题确实是视图，而不是像太多混合层这样的其他问题！

关于缓存，有几种方法。至少想到三个：

1.  对于四个背景中的每一个，注册一个自己的单元重用标识符。然后根据重用标识符设置背景视图。
2.  为背景视图使用自己的缓存，并从那里重用背景视图。
3.  对所有单元格的背景视图使用相同的类，并仅在它们上设置内容。

第一个解决方案很容易实现，但它存在`UITableView`最终持有大量不需要的单元用于重用的风险。此外，如果您需要更多类型的单元格，则必须为每种类型/背景组合提供单元格。

虽然第二种解决方案重用了单元格背景，但您必须为它们编写自己的缓存，并在必要时设置/取消设置背景。

第三种解决方案仅在背景视图可以配置为显示相应单元格的背景时才有效。它只会重用内容，而不是背景视图本身。

这是第二个解决方案测试的早期屏幕截图：

![显示自定义分组表视图的屏幕截图](https://i.stack.imgur.com/qn6Pb.png)

这是实现：

```
@implementation RootViewController
{
    NSMutableDictionary *_backgroundViews;
}

- (void)viewDidLoad
{
    _backgroundViews = [NSMutableDictionary dictionary];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 100;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return section / 10 + 1;
}

- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundView = nil;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    if (!cell.backgroundView || ![cell.backgroundView isKindOfClass:[UIImageView class]]) {
        NSInteger section = [indexPath section];
        NSInteger row = [indexPath row];
        NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;
        NSString *imageName = nil;
        UIEdgeInsets insets = UIEdgeInsetsZero;
        if (maxRow == 0) {
            // single cell
            imageName = @"singlebackground";
            insets = UIEdgeInsetsMake(12, 12, 12, 12);
        } else if (row == 0) {
            // top cell
            imageName = @"topbackground";
            insets = UIEdgeInsetsMake(12, 12, 0, 12);
        } else if (row == maxRow) {
            // bottom cell
            imageName = @"bottombackground";
            insets = UIEdgeInsetsMake(0, 12, 12, 12);
        } else {
            // middle cell
            imageName = @"middlebackground";
            insets = UIEdgeInsetsMake(0, 12, 0, 12);
        }

        NSMutableSet *backgrounds = [_backgroundViews objectForKey:imageName];
        if (backgrounds == nil) {
            backgrounds = [NSMutableSet set];
            [_backgroundViews setObject:backgrounds forKey:imageName];
        }

        UIImageView *backgroundView = nil;
        for (UIImageView *candidate in backgrounds) {
            if (candidate.superview == nil) {
                backgroundView = candidate;
                break;
            }
        }
        if (backgroundView == nil) {
            backgroundView = [[UIImageView alloc] init];
            backgroundView.image = [[UIImage imageNamed:imageName] resizableImageWithCapInsets:insets];
            backgroundView.backgroundColor = [UIColor whiteColor];
            backgroundView.opaque = YES;
        }
        cell.backgroundView = backgroundView;
    }

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    [[cell textLabel] setText:[NSString stringWithFormat:@"[%d, %d]", [indexPath section], [indexPath row]]];

    return cell;
} 
```

如果您想查看它，这里是我使用的图像（仅非视网膜且太大，但嘿，这只是一个示例）：

*   单一背景.png：

    ![单一背景.png](https://i.stack.imgur.com/tK27s.png)

*   顶部背景.png：

    ![顶部背景.png](https://i.stack.imgur.com/MnRdn.png)

*   中间背景.png：

    ![中间背景.png](https://i.stack.imgur.com/hri6Z.png)

*   底部背景.png：

    ![底部背景.png](https://i.stack.imgur.com/JqtZC.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:50:39.767

**编辑 - 使用图像作为背景视图**

鉴于您对我的回答的评论，您似乎想在单元格的背景视图中显示图像。目前尚不清楚这些图像是作为资源编译到您的应用程序中还是从服务中下载的。`UIImage`无论如何，您可以在多个实例中使用同一个`UIImageView`实例。因此，当您创建单元格时，您可以动态创建一个新`UIImageView`的用作背景视图，然后根据单元格的 indexPath将`image`属性设置为适当的。`UIImage`

如果图像被编译到您的应用程序中，则`[UIImage imageNamed:@""]`使用 iOS 实现的缓存并且性能会很好。如果您正在下载图像（可能在后台线程上），那么您将需要为图像数据实现磁盘和/或内存缓存。

**原始答案**

当您将单元格配置为`tableView:cellForRowAtIndexPath:`使用中时，单元格标识符以使用内置缓存`tableView`来缓存具有各种背景视图的单元格。

就像是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *singleCellID = @"single";
    static NSString *firstCellID = @"first";
    static NSString *middleCellID = @"middle";
    static NSString *lastCellID = @"last";

    NSString *cellID = nil;

    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;
    UIColor *color = nil;

    if (maxRow == 0) {
        // single cell
        cellID = singleCellID;
    } else if (row == 0) {
        // top cell
        cellID = firstCellID;
    } else if (row == maxRow) {
        // bottom cell
        cellID = lastCellID;
    } else {
        // middle cell
        cellID = middleCellID;
   }

   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID forIndexPath:indexPath];

   if (cell == nil) {
       if (cellID == singleCellID) {
           // create single cell
           cell = ...
           cell.backgroundView = ...
       }
       else if (cellID == firstCellID) {
           // create first cell
           cell = ...
           cell.backgroundView = ...
       }
       else if (cellID == lastCellID) {
           // create last cell
           cell = ...
           cell.backgroundView = ...
       }
       else {
           // create middle cell
           cell = ...
           cell.backgroundView = ...
       }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:35:56.340

[编辑]好的，所以，就您使用自定义背景视图而言，我认为您应该在`tableView:cellForRowAtIndexPath:`方法中将背景视图分配给单元格的 .backgroundView 属性，并且不要使用您自己的视图缓存机制，因为表格视图会缓存整个单元格它是子视图 - 您在创建单元格时分配背景视图，稍后只需使用适当的值更新它的背景颜色（在您的情况下，基于索引路径）。

此外，这只是一个建议，您的背景视图可能会被单元格的其他内容遮盖（例如，您向 .contentView 添加了一些内容） - 尝试将单元格/contentView .alpha 值设置为 0.5 以便能够看穿它。代码仍然相关 - 每次 UITableView 需要新单元格在屏幕上显示时调用此方法

```
- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell = nil;
    static NSString* identifer = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:identifer];
    if(cell==nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifer];
        cell.backgroundView = [YourCustomView new];//assign your custom background view here
    }
    cell.textLabel.text = [NSString stringWithFormat:@"%d",indexPath.row];
    //update background view's color based on index path row
    if(indexPath.row==0)
        cell.backgroundView.backgroundColor = [UIColor redColor];
    else if(indexPath.row==1)
        cell.backgroundView.backgroundColor = [UIColor yellowColor];
    else
        cell.backgroundView.backgroundColor = [UIColor blueColor];
    return cell;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T02:05:48.923

自从我使用 tableviews 以来已经有一段时间了，但我隐约记得遇到过这个问题。我相信对 tableView:willDisplayCell:forRowAtIndexPath: 方法的调用是线程化的。当用户滚动速度非常快时，可以同时拨打多个电话。在这种情况下，给定您当前的代码，可能会为多个单元格分配相同的视图，这将导致出现空格。

如果你使用@synchronized(anObject){} 来防止多个线程同时运行相同的代码，你应该能够防止这个问题。

```
@synchronized (self) {
    UIView *backgroundView = nil;

    for (UIView *bg in _backgroundViewPool) {
        if (color == [bg backgroundColor]) {
            backgroundView = bg;
            break;
        }
    }

    if (backgroundView) {
        [backgroundView retain];
        [_backgroundViewPool removeObject:backgroundView];
    } else {
        backgroundView = [[UIView alloc] init];
        [backgroundView setBackgroundColor:color];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T16:11:48.673

根据我对苹果[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier%3aforIndexPath%3a)的理解，当一个单元格**出**列时，它仍然具有您之前设置的所有视图和设置。

因此，如果您将背景视图设置为单元格，则它在出队时仍会存在，如果它是新单元格，则不会有背景视图。

我相信您 **不需要后台视图池**，因为操作系统会为您处理它，因此您可以在重用单元格时**重用 BG**视图并`willDisplayCell:`仅在

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSInteger section = [indexPath section];
  NSInteger row = [indexPath row];
  NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;
  UIColor *color = nil;

  if (maxRow == 0) {
    // single cell
    color = [UIColor blueColor];
  } else if (row == 0) {
    // top cell
    color = [UIColor redColor];
  } else if (row == maxRow) {
    // bottom cell
    color = [UIColor greenColor];
  } else {
    // middle cell
    color = [UIColor yellowColor];
  }

  UIView *backgroundView = nil;

  //***This is the different part***//

  if (cell.backgroundView != nil) {
    NSLog(@"Old Cell, reuse BG View");
    backgroundView = cell.backgroundView;
  } else {
    NSLog(@"New Cell, Create New BG View");
    backgroundView = [[UIView alloc] init];
    [cell setBackgroundView:[backgroundView autorelease]];
  }

  [backgroundView setBackgroundColor:color];  
} 
```

像这样也不需要代码`didEndDisplayingCell:`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-13T17:32:16.857

您不能同时使用两次视图，当您有超过 3 个单元格时会发生这种情况。表的重用机制应该足够了。

我不确定你为什么要从单元格中单独处理背景视图。无论如何，我更改了您的代码，以便没有缺少 backgroundViews 的错误：

笔记！我确实使用了ARC。

```
static NSString *identifierSingle = @"single";
static NSString *identifierTop = @"top";
static NSString *identifierBtm = @"btm";
static NSString *identifierMid = @"mid";

@implementation RootViewController {
    NSMutableDictionary *_backgroundViewPool;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    if (self = [super initWithStyle:style]) {
        _backgroundViewPool = [[NSMutableDictionary alloc] init];

        UITableView *tableView = [self tableView];
        [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"cell"];
    }

    return self;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 6;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    if (section == 0) {
        return 1;
    }

    return 10;
}

- (NSString *)tableView:(UITableView *)tableView identifierForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;

    if (maxRow == 0) {
        // single cell
        return identifierSingle;
    } else if (row == 0) {
        // top cell
        return identifierTop;
    } else if (row == maxRow) {
        // bottom cell
        return identifierBtm;
    } else {
        // middle cell
        return identifierMid;
    }
}

- (UIColor *)tableView:(UITableView *)tableView colorForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSInteger maxRow = [tableView numberOfRowsInSection:section] - 1;
    UIColor *color = nil;

    if (maxRow == 0) {
        // single cell
        color = [UIColor blueColor];
    } else if (row == 0) {
        // top cell
        color = [UIColor redColor];
    } else if (row == maxRow) {
        // bottom cell
        color = [UIColor greenColor];
    } else {
        // middle cell
        color = [UIColor yellowColor];
    }
    return color;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *colorIdentifier = [self tableView:tableView identifierForRowAtIndexPath:indexPath];
    NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    [[cell textLabel] setText:[NSString stringWithFormat:@"[%d, %d]", [indexPath section], [indexPath row]]];
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];

    NSMutableSet *set = [self backgroundPoolForIdentifier:colorIdentifier];
    UIView *backgroundView = [set anyObject];;

    if (backgroundView) {
        [set removeObject:backgroundView];
    } else {
        backgroundView = [[UIView alloc] init];
        [backgroundView setBackgroundColor:[self tableView:tableView colorForRowAtIndexPath:indexPath]];
    }

    [cell setBackgroundView:backgroundView];

    return cell;
}

#pragma mark - Table view delegate

- (NSMutableSet *)backgroundPoolForIdentifier:(NSString *)identifier {
    NSMutableSet *set = [_backgroundViewPool valueForKey:identifier];
    if (!set) {
        set = [[NSMutableSet alloc] init];
        [_backgroundViewPool setValue:set forKey:identifier];
    }
    return set;
}

- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    [[self backgroundPoolForIdentifier:cell.reuseIdentifier] addObject:cell.backgroundView];
}

@end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T14:52:08.417

您的原始实现不起作用，因为`cellForRowAtIndexPath:`您有时会返回一个 nil 对象。UITableView 框架然后将该 *cell 对象传递给`willDisplayCell:(UITableViewCell*)`.

```
ie: 

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
....
return cell;

// cell maybe nil 
```

如果您确实更喜欢使用自己的缓存机制，则可以简单地返回一个普通的 UITableViewCell 对象，如果可用则出队，或者如果没有可重用的对象，则创建一个新对象。

```
ie:

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  static NSString *CellIdentifier = @"Cell";
  return [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath] 
        || [UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]
        ;
} 
```

然后，“视图只能添加到 1 个超级视图限制”导致您的缓存视图出现跳跃。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-22T18:11:26.743

尝试了几件事来做到这一点，但最终对这个非常基本的解决方案感到满意，我知道这并不是一个真正迷人的解决方案，但它给了我流畅的滚动，如果你愿意，你可以试试这个：

```
NSMutableArray *_viewArray;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    #define kTotalNoOfRows 1000
        _viewArray = [[NSMutableArray alloc] initWithCapacity:kTotalNoOfRows];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
   for (int i = 0; i < kTotalNoOfRows; i++) {
        UIView * backGroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

        if (kTotalNoOfRows == 0)
            [backGroundView setBackgroundColor:[UIColor redColor]];
        else if (i == 0)
            [backGroundView setBackgroundColor:[UIColor greenColor]];
        else if (i == (kTotalNoOfRows - 1))
            [backGroundView setBackgroundColor:[UIColor blueColor]];
        else
            [backGroundView setBackgroundColor:[UIColor yellowColor]];

        [_viewArray addObject:backGroundView];        
    }

    return kTotalNoOfRows;
}

- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell = nil;
    static NSString* middleCell = @"middleCell";
    cell = [tableView dequeueReusableCellWithIdentifier:middleCell];
    if(cell==nil) {
        NSInteger maxRow = [tableView numberOfRowsInSection:indexPath.section] - 1;
        if (maxRow != 0 && indexPath.row != 0 && indexPath.row != maxRow) {
            middleCell = nil;
        }
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:middleCell];
        cell.backgroundView = [_viewArray objectAtIndex:indexPath.row];//assign your custom background view here
        [cell.textLabel setBackgroundColor:[UIColor clearColor]];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"%d",indexPath.row];
    return cell;
} 
```

另外我想提一下我到这里的旅程；所以我尝试过的是

*   创建了一个视图字典：

    ```
    UIView * _topView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UIView * _bottomView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UIView * _middleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UIView * _lonelyView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [_topView setBackgroundColor:[UIColor redColor]];
    [_bottomView setBackgroundColor:[UIColor greenColor]];
    [_middleView setBackgroundColor:[UIColor blueColor]];
    [_lonelyView setBackgroundColor:[UIColor yellowColor]];
    _viewDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                     _topView, @"topView",
                                     _bottomView, @"bottomView",
                                     _middleView, @"middleView",
                                     _lonelyView, @"lonelyView", nil]; 
    ```

*   使用 unarchiver 返回这些视图的副本

    ```
    - (UIView *) getBackgroundViewWith : (NSInteger) maxRow currentRow : (NSInteger) row{
        if (maxRow == 0) {
            return (UIView *)[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[_viewDictionary valueForKey:@"lonelyView"]]];//[[_viewDictionary valueForKey:@"lonelyView"] copy];
        } else if (row == 0) {
            return (UIView *)[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[_viewDictionary valueForKey:@"topView"]]];//[[_viewDictionary valueForKey:@"topView"] copy];
        } else if (row == maxRow) {
            return (UIView *)[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[_viewDictionary valueForKey:@"bottomView"]]];//[[_viewDictionary valueForKey:@"bottomView"] copy];
        } else {
            return (UIView *)[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[_viewDictionary valueForKey:@"middleView"]]];//[[_viewDictionary valueForKey:@"middleView"] copy];
        }
        return nil;
    } 
    ```

但它崩溃了，同时用`SIGBART`. 就这样放弃了。

# ruby-on-rails - Heroku 在 Rails 上使用 Ruby 的问题，

> ID：15990505
> 
> 赞同：1
> 
> 时间：2013-04-13T17:05:40.983
> 
> 标签：ruby-on-rails, ruby, heroku, pg

很抱歉，我知道很多人都问过类似的问题，但在我看到的所有不同答案中，都没有有效的答案。[我正在关注本教程： http](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book) ://ruby.railstutorial.org/ruby-on-rails-tutorial-book 。这是我的应用程序：[https](https://github.com/melki/first_app) ://github.com/melki/first_app 这是我的 Gemfile：

```
# A sample Gemfile
source "https://rubygems.org"
# gem "rails"
ruby '1.9.3'
gem "heroku"
gem  'rails', '3.2.13'
group :development do
 gem 'sqlite3'
end
group :production do
  gem 'pg'
  gem 'thin'
end 
```

这是一个简单的...

这是我来自 Heroku 的日志：

```
 2013-04-13T17:37:27.600820+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T17:37:27.600820+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T17:37:27.600820+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T17:37:28.895845+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T17:37:28.909457+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T17:47:24.873811+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T17:47:26.701802+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 37586`
2013-04-13T17:47:28.040408+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T17:47:28.039667+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T17:47:28.039914+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T17:47:28.040065+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T17:47:28.039990+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T17:47:28.040166+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T17:47:28.039836+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T17:47:28.040332+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T17:47:28.040244+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T17:47:29.402379+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T17:47:29.416139+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T17:48:34.162437+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by melchior.toldi@gmail.com
2013-04-13T17:48:36.892769+00:00 heroku[run.2268]: Awaiting client
2013-04-13T17:48:36.892769+00:00 heroku[run.2268]: Starting process with command `bundle exec rake db:migrate`
2013-04-13T17:48:37.791304+00:00 heroku[run.2268]: State changed from starting to up
2013-04-13T17:48:40.807677+00:00 heroku[run.2268]: Process exited with status 1
2013-04-13T17:48:40.842046+00:00 heroku[run.2268]: State changed from up to complete
2013-04-13T17:49:37.705672+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T17:49:38.049712+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T17:57:36.956393+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 8234`
2013-04-13T17:57:34.713361+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T17:57:38.537721+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T17:57:38.537721+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T17:57:39.927361+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T17:57:43.593400+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T18:07:55.320873+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T18:07:58.034529+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 4633`
2013-04-13T18:07:59.616225+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T18:07:59.616225+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T18:08:01.041217+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T18:08:01.026363+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T18:08:15.278264+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="188.167.200.167" dyno= connect= service= status=503 bytes=
2013-04-13T18:08:16.189360+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="188.167.200.167" dyno= connect= service= status=503 bytes=
2013-04-13T18:08:16.328385+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="188.167.200.167" dyno= connect= service= status=503 bytes=
2013-04-13T18:10:14.449584+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="64.237.39.250" dyno= connect= service= status=503 bytes=
2013-04-13T18:18:27.461322+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T18:18:29.173061+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 33230`
2013-04-13T18:18:30.386288+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T18:18:30.386381+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T18:18:30.386562+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T18:18:30.386957+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T18:18:30.386476+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5
.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T18:18:30.386866+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T18:18:30.386765+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T18:18:30.386129+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T18:18:30.386674+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T18:18:31.676857+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T18:18:31.684586+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T18:29:07.524843+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T18:29:09.507194+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 26133`
2013-04-13T18:29:11.221741+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T18:29:11.221817+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T18:29:11.221566+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T18:29:11.221968+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T18:29:11.221373+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T18:29:11.221892+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T18:29:11.221662+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T18:29:11.222059+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T18:29:11.222137+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T18:29:12.554083+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T18:29:12.547227+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T18:29:35.422394+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T18:29:35.704799+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T18:29:39.570979+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T18:29:39.851899+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T18:39:46.195056+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-13T18:39:47.796625+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 34436`
2013-04-13T18:39:48.942222+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-13T18:39:48.942148+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-13T18:39:48.941907+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `read': No such file or directory - config.ru (Errno::ENOENT)
2013-04-13T18:39:48.942636+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-04-13T18:39:50.103490+00:00 heroku[web.1]: Process exited with status 1
2013-04-13T18:39:48.942560+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-04-13T18:39:50.115132+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-13T18:39:48.942473+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-13T18:39:48.942070+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:32:in `load'
2013-04-13T18:39:48.942380+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-13T18:39:48.942306+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-13T18:40:30.990826+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes=
2013-04-13T18:40:31.347409+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=radiant-river-7942.herokuapp.com fwd="82.247.99.235" dyno= connect= service= status=503 bytes= 
```

当我输入时：Heroku ps

```
melki@melkunix:~/rails_projects/first_app$ heroku ps
=== web: `bundle exec rails server -p $PORT`
web.1: crashed 2013/04/13 18:46:03 (~ 5m ago) 
```

当我这样做时：

> heroku 运行 rake db:migrate

我得到：

```
melki@melkunix:~/rails_projects/first_app$ heroku run rake db:migrate
Running `rake db:migrate` attached to terminal... up, run.9445
rake aborted!
can't activate rails (= 2.3.14), already activated rails-3.2.13\. Make sure all dependencies are added to Gemfile.
/app/vendor/bundle/ruby/1.9.1/gems/bundler- 1.3.2/lib/bundler/rubygems_integration.rb:224:in `block in replace_gem'
/app/config/boot.rb:60:in `load_rails_gem'
/app/config/boot.rb:54:in `load_initializer'
/app/config/boot.rb:38:in `run'
/app/config/boot.rb:11:in `boot!'
/app/config/boot.rb:114:in `<top (required)>'
/app/Rakefile:4:in `require'
/app/Rakefile:4:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/rake_module.rb:25:in `load'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/rake_module.rb:25:in     `load_rakefile'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:589:in `raw_load_rakefile'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:89:in `block in load_rakefile'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:88:in `load_rakefile'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:72:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
(See full trace by running task with --trace) 
```

这是带有错误消息的应用程序：[http ://radiant-river-7942.herokuapp.com/](http://radiant-river-7942.herokuapp.com/)

如果这对您有帮助，我会随时按照您的意愿处理任何其他文件。原谅我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:34:50.037

问题在于您的 Gem 文件。删除 Gemfile.lock 并运行 bundle install 并推送代码并运行迁移。

您已经安装了 rails 2 并且刚刚将 rails 3 添加到了 Gem 文件中，而没有

```
bundle update 
```

# jquery - jQuery 克隆 - 检查相等性

> ID：15990508
> 
> 赞同：0
> 
> 时间：2013-04-13T17:06:06.063
> 
> 标签：jquery

在我的网站上，我在页面加载时克隆了一个 div 的内容，然后检查内容是否发生了变化。

```
originalStepOrder = $('#org').clone();
console.log(originalStepOrder[0] == $('#org')[0]); 
```

我希望当我没有对 div 的内容进行任何更改时，最后一行代码会返回 true，但它返回 false。

我也试过

```
console.log(originalStepOrder.is($('#org')); 
```

这也返回false。

如何检查两个 div 是否具有相同的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:10:14.580

哎呀，发布得太早了——我能找出答案。这最终为我工作：

```
$('#org').html()==originalStepOrder.html() 
```

# python - 使用 Python 的 Launchctl 最小工作示例

> ID：15990512
> 
> 赞同：4
> 
> 时间：2013-04-13T17:06:16.627
> 
> 标签：python, macos, launchd

我想使用launchd每分钟运行一个python脚本。我的 plist 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.turtle.script.plist</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/bin/python</string>
        <string>/Users/turtle/Desktop/turtle.py</string>
        <string>/Users/turtle/Desktop/data/data.txt</string>
    </array>
    <key>StartInterval</key>
    <integer>60</integer>
</dict>
</plist> 
```

这个 plist 文件看起来不错，因为我得到以下信息：

```
plutil -lint com.turtle.script.plist
com.turtle.script.plist: OK 
```

当我从命令行运行该脚本时，该脚本有效：

```
/usr/bin/python /Users/turtle/Desktop/turtle.py /Users/turtle/Desktop/data/data.txt 
```

我通过以下方式加载此 plist：

```
 launchctl load -w -F com.turtle.script.plist 
```

我也试过：

```
sudo launchctl load -w -F com.turtle.script.plist 
```

我加载了这个作业，python 脚本应该把一个文件写到磁盘上。然而，从来没有产生过文件。我检查了这份工作：

```
sudo launchctl list | grep com.turtle.script.plist 
```

输出是：

```
- 1 com.turtle.script.plist 
```

任何人都可以帮助解决问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T18:29:47.110

听起来脚本内部存在一些环境依赖性 - 本质上，它假设它运行的环境在您手动运行时是正确的，但在 launchd 运行时却不是。在对脚本一无所知的情况下，很难指出这可能是什么，但我可以建议一些事情来看看：

*   `sudo launchctl`不是更强大的版本`launchctl`，它做了一些明显不同的事情。你需要弄清楚你想要哪一个，然后使用它。

    当您`launchctl`作为普通用户（例如`launchctl load`）运行时，它会与您的 launchd 用户实例交互以管理启动代理——在您的用户会话中以您的用户身份运行的项目。

    当您`launchctl`以 root 身份运行时（例如`sudo launchctl load`），它与 launchd 的系统实例交互以管理启动守护进程——在系统上下文中以 root 身份运行的项目。

    您必须根据此脚本的功能来决定哪个是合适的。

*   检查 system.log（您可以使用 Console 实用程序来查看它，或者`tail -f /var/log/system.log`）并查看它是否包含任何内容来指示脚本失败的原因。

*   将条目添加到 launchd .plist 以记录脚本的输出，并查看其中是否包含任何错误消息或出现问题的其他指示：

    ```
    <key>StandardOutPath</key>
    <string>/tmp/turtle.out</string>
    <key>StandardErrorPath</key>
    <string>/tmp/turtle.err</string> 
    ```

    编辑脚本以添加调试输出可能会有所帮助，因此您可以详细了解它的工作原理（/不工作）。

*   脚本是否依赖于特定的工作目录和/或环境变量？如果是这样，请将适当的`WorkingDirectory`和/或`EnvironmentVariables`项目添加到 .plist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:21:40.000

尝试写入`/tmp`任何用户都可以写入的内容。即更改`/Users/turtle/Desktop/data/data.txt`为`/tmp/my_data.txt`如果那是您的输出文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T10:23:30.927

您的 .plist 文件位于`~/Library/LaunchAgents`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>local.tf.check_up</string>
    <key>Program</key>
    <string>/Users/tf/.bin/check_up.py</string>
    <key>RunAtLoad</key>
    <true/>
    <key>StandardErrorPath</key>
    <string>/tmp/local.tf.check_up.stderr</string>
    <key>StandardOutPath</key>
    <string>/tmp/local.tf.check_up.stdout</string>
    <key>StartInterval</key>
    <integer>60</integer>
    <key>WorkingDirectory</key>
    <string>/tmp/</string>
</dict>
</plist> 
```

你的脚本`/Users/tf/.bin/check_up.py`：

```
#!/opt/local/bin/python

f = open('/Users/tf/Desktop/test.txt', 'a')
f.write('hello again 4\n')
f.close() 
```

请注意，我使用`python`的是 MacPorts，它位于`/opt/local/bin/`. 如果您使用不同的 python 解释器，请将上面的行替换为任何`$ which python`返回值。

确保您的脚本是可执行的，并且只有您具有写入权限：

```
$ chmod 755 ~/.bin/check_up.py 
```

测试脚本：运行它并查看它是否正常工作：

```
$ ~/.bin/check_up.py 
```

加载 LaunchAgent：

```
$ launchctl load ~/Library/LaunchAgents/local.tf.check_up.plist 
```

# ruby-on-rails - 在表单中使用非关联模型数据

> ID：15990520
> 
> 赞同：0
> 
> 时间：2013-04-13T17:07:39.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations, form-for

是否可以在没有关联的情况下访问其他模型属性？例如，我想通过使用夹具模型属性的表单创建 Prediciton 记录

```
<%= form_for @prediction do |f| %>
<%= f.fields_for :fixtures, @fixtures do |builder| %>

<%= builder.text_field :home_team %> VS <%= builder.text_field :away_team %><%= f.text_field :home_score %><%= f.text_field :away_score %><br>

<% end %>
<% end %> 
```

在不关联两个模型的情况下如何获得夹具模型的属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:03:58.503

如果您创建关联，会容易得多。如果您不打算创建关联，例如在您使用不受模型支持的视图并且您正在从中拉入并修改各种模型（假设我正在制作）的情况下，您可以执行类似于此的操作：

首先确保为您计划针对各种模型使用的任何方法设置 routes.rb。

预测模型

```
@fixtures = Fixture.all 
```

或特定属性示例

```
@fixtures = Fixture.select([:home_team, :away_team, :home_score, :away_score]).all 
```

以上是如果您正在更新其他模型记录。您还需要修改 create 方法。

您希望从 form_for 更改为 form_tag 的视图：

```
form_tag('/predictions') do 
```

希望这能让你朝着正确的方向前进。

# ruby-on-rails - 带有载波和多态关联的 Rails 上传表单

> ID：15990521
> 
> 赞同：2
> 
> 时间：2013-04-13T17:07:49.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphism, carrierwave, polymorphic-associations

我正在尝试使用多态关联来减少文件管理在简单的 Rails 应用程序中的重复性。我正在使用carrierwave来处理文件上传。这是我到目前为止所拥有的：

**应用程序/上传程序/file_uploader.rb**

```
class FileUploader < CarrierWave::Uploader::Base
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
end 
```

**应用程序/模型/附件.rb**

```
class Attachment < ActiveRecord::Base
  mount_uploader :file, FileUploader
  belongs_to :attachable, polymorphic: true
end 
```

**应用程序/模型/photo.rb**

```
class Photo < ActiveRecord::Base
  attr_accessible :caption, :attachment
  has_one :attachment, as: :attachable
end 
```

我可以在 Rails 控制台中处理这个问题：

```
$ rails console
> photo = Photo.new
> attachment = Attachment.new
> attachment.file = File.open('tmp/demo.png')
> photo.attachment = attachment
> photo.save
> photo.attachment
=> #<Attachment id: 3, file: "demo.png", attachable_id: 5, attachable_type: "Photo", created_at: "2013-04-13 16:56:31", updated_at: "2013-04-13 16:56:31"> 
```

所以我的问题实际上出在照片控制器中：

```
ActiveRecord::AssociationTypeMismatch in PhotosController#create
Attachment(#70310274945400) expected, got ActionDispatch::Http::UploadedFile(#70310271741380)` 
```

非常感谢您对此的任何帮助。我可能对多态关联没有最大的了解。

更新

接受@manoj 的建议，我编辑了照片表单以嵌套附件：

```
<%= f.fields_for :attachment do |attachment_f| %>
    <%= attachment_f.file_field :file %>
<% end %> 
```

当我尝试提交表单时，我现在收到此错误：

```
ActiveRecord::AssociationTypeMismatch (Attachment(#70135925415240) expected, got ActiveSupport::HashWithIndifferentAccess(#70135923190420)):
app/controllers/photos_controller.rb:43:in 'new'
app/controllers/photos_controller.rb:43:in 'create' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T17:51:35.023

后参数应该是这样的

```
params => { "photo" => 
               { :attachment_attribute => 
                  {:file => ActionDispatch::Http::UploadedFile}
               }
          } 
```

但你的帖子参数很可能是

```
params => { "photo" => { :attachment => ActionDispatch::Http::UploadedFile}} 
```

您的视图应该包含 fields_for 来处理模型中的嵌套。您必须为附件模型的属性“文件”创建一个文件字段

```
<%=form_for @photo do |photo_f|%>
  ....
  <%=photo_f.fields_for :attachment do |attachment_f|%>
     <%= attachment_f.file_field :file%>
  <%end%>
  ....
<%end%> 
```

更新

```
<%=photo_f.fields_for :attachment_attributes do |attachment_f|%> 
```

在照片模型中添加这些，

```
accepts_nested_attributes_for :attachment
attr_accessible ..., :attachment_attributes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T12:36:07.147

```
<%=form_for @photo do |photo_f|%>
 ....
 <%=photo_f.fields_for :attachment_attributes do |attachment_f|%>
  <%= attachment_f.file_field :file %>
 <%end%>
 ....
<%end%> 
```

# android - 如何设置固定表格布局或网格布局？

> ID：15990522
> 
> 赞同：0
> 
> 时间：2013-04-13T17:08:03.377
> 
> 标签：android

我正在为自己制作一个简单的游戏，比如海战，我想设置固定的 10x10 字段。
尝试过 GridLayout - 无法设置行数
尝试过 GridView - 给我兼容库的错误

我应该用什么来制作固定的 10x10 字段，支持点击单元格？像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/X1hmW.png)

# php - 带有 PHP 怪异的串口读取

> ID：15990525
> 
> 赞同：1
> 
> 时间：2013-04-13T17:08:19.463
> 
> 标签：php, python, serial-port, raspberry-pi

我有一个已经用 PHP 编写的项目。我需要从串口读取数据。我想保持从串行端口读取与项目其余部分相同的语言的能力。

我发现了一门很多人似乎都遇到问题的课程。php_serial.class.php 基于示例，这是我为它编写的测试。使用 RFID 读卡器作为串行输入。

```
#!/usr/bin/php
<?php

// Include the class to read the serial line.
include ("php_serial.class.php");

// Let's start the class
$serial = new phpSerial;

$serial->deviceSet("/dev/ttyAMA0");
$serial->confBaudRate(9600);
$serial->confParity("none");
$serial->confCharacterLength(8);
$serial->confStopBits(1);
// We can change the baud rate, parity, length, stop bits, flow control
#$serial->confFlowControl("none");

// Check if we can open the serial line.  Otherwise die.
if(!$serial->deviceOpen()) die("unable to open device");

stream_set_timeout($serial->_dHandle, 10);

$rfid_key = FALSE;

// Start the loop to keep checking the
while(!$rfid_key)
{
    $read = $serial->readPort();

    // Array to store eachvalue of the RFID tag
    $ascii_read  = array();

    for($i = 0; $i < strlen($read); $i++)
    {
        $ascii_read[] = ord($read[$i]);
        if(count($ascii_read) == 14 && $ascii_read[0] == 2 && $ascii_read[13] == 3)
        {
            $rfid_key = implode("", $ascii_read);
            break;
        }
    }

    // If the key is empty then sleep for 1 second.
    if(!$rfid_key)
    {
        sleep(1);
    }
}

print_r($rfid_key);
print "\n\n"; 
```

如果我运行脚本，它将等待输入，如果我在天线上闪烁一个 RFID 标签，它就会失败。

然后我决定看看是不是php，所以我写了一个python脚本。

```
import serial
serialport = serial.Serial("/dev/ttyAMA0", 9600, timeout=0.5)
response = serialport.readlines(None)
print response 
```

如果我将标签放在天线上并运行脚本，然后将标签拉开，我会得到它在该时间跨度内读取的标签实例的数量。告诉我 RFID 阅读器可以与 RaspberryPi 配合使用。

现在这是真正奇怪的部分。如果我在执行 python 代码后返回并执行 php 代码，那么它可以工作。这使我相信它与在 Python 中完成的串行端口的实例化有关，该串行端口在之后执行 php 代码时会一直存在。然后我剥离python代码以实例化串行端口并退出，并且如预期的那样，php代码可以工作。

所以，我的问题是。WTF 是 python 做的 php 代码不是吗？我不是串行总线的专家，而且对 atm 很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:33:54.440

好的，我找到了解决方案。问题不是 php 脚本，而是为 /dev/ttyAMA010 设置的选项

经过大量研究，我发现运行命令`/bin/stty -F /dev/ttyAMA010`向我显示了串行线的当前状态。在重新启动后运行它给了我这个作为输出。

```
speed 9600 baud; line = 0;
-brkint -imaxbel 
```

然后运行 ​​python 脚本看看有什么不同。

```
speed 9600 baud; line = 0;
min = 0; time = 0;
-brkint -icrnl -imaxbel
-opost
-isig -icanon -iexten -echo -echoe -echok -echoctl -echoke 
```

然后我系统地包含每个配置选项并刷新我的页面，直到它工作。最后我发现我需要 2 个选项才能让 php 串行脚本工作。

```
stty -F /dev/ttyAMA0 -isig
stty -F /dev/ttyAMA0 -icanon 
```

# python - os.walk 查找文件问题的路径（Python 2.7）

> ID：15990530
> 
> 赞同：0
> 
> 时间：2013-04-13T17:08:55.003
> 
> 标签：python, os.walk

我刚刚开始使用 python 2.7 并使用以下代码来确定文件的路径：

```
import os, fnmatch

#find the location of sunnyexplorer.exe
def find_files(directory, pattern):
    for root, dirs, files in os.walk(directory):
        for basename in files:
            if fnmatch.fnmatch(basename, pattern):
                filename = os.path.join(root, basename)
                yield filename

for filename in find_files('c:\users','*.sx2'): 
    print ('Found Sunny Explorer data in:', filename) 
```

在我尝试使用该路径并注意到错误之前，一切似乎都运行良好。该程序将路径报告为：

```
c:\users\woody\Documents\SMA\Sunny Explorer 
```

而正确的路径是：

```
c:\users\woody\My Documents\SMA\Sunny Explorer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:57:00.737

自 Vista 以来的所有 MS Windows 版本都`C:\Users\%username%\Documents`默认存储用户的文档。

但是，它们还包括一个[NTFS 连接点](http://en.wikipedia.org/wiki/NTFS_junction_point) `C:\Users\%username%\My Documents`，该连接点指向同一位置以实现向后兼容性。

问题是，据我了解，您不能使用标准 POSIX 调用的连接点，因此如果没有一些特定于 Windows 的扩展模块，Python 将无法使用它们。

另请参阅superuser.com 上的[此问题](https://superuser.com/questions/194500/how-to-link-my-documents-folder-to-the-logical-documents-folder-in-windows-7)。

# c# - HttpWebRequests 变慢或超时

> ID：15990532
> 
> 赞同：0
> 
> 时间：2013-04-13T17:09:18.750
> 
> 标签：c#, windows, multithreading, networking

**介绍**

我正在制作一个为代理 ips/端口抓取文件/网站的应用程序。该实现纯粹是异步的，以使其以我想要的速度流动。该应用程序的全部目的是找到“活着”的代理。

为了检查代理是否还活着，我正在创建`HttpWebRequest`一个特定的网站，如果成功，它是活着的，如果不是，那么就死了。

**问题**

一个例子：

第一次运行：

1.  使用 30k 代理爬取文本文件。
2.  `HttpWebRequest`对每个代理做一个，检查它是否“活着”。
3.  找到 30 个存活的代理。

第二次运行：

1.  使用 30k 代理爬取相同的文本文件。
2.  `HttpWebRequest`对每个代理做一个，检查它是否“活着”。
3.  找到 0 个存活的代理。

如果我等待大约 10 分钟，那么第二次运行将产生大约 30 个还活着的代理。否则，它只会在它们上超时，并将它们标记为已死。

正如您可能已经知道的那样，我的问题是为什么第二次运行不会产生与第一次运行相同或接近的结果。

我改变了以下内容：

`ServicePointManager.DefaultConnectionLimit = int.MaxValue`， 和`ServicePointManager.MaxServicePoints = int.MaxValue`

这是我的网络的基本限制，还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:15:32.603

您是否确定要关闭第一个 Web 请求？

# php - 无法让 PHP 的 openssl_encrypt 与 C 中 aes_encrypt 的输出相匹配

> ID：15990544
> 
> 赞同：4
> 
> 时间：2013-04-13T17:10:37.103
> 
> 标签：php, c, encryption, openssl, aes

我不是专业的程序员，所以请多多包涵……

我有一个我正在使用的应用程序，不幸地将密码以明文形式存储在 MySQL 中，这是我不想要的。由于该程序确实使用了 OpenSSL 库，因此我可以访问 aes 函数。

下面我拼凑了使用这些函数加密测试字符串并使用 MD5 对其进行哈希处理的演示代码（因为加密的文本是二进制的）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <openssl/aes.h>
#include <openssl/md5.h>

char *str2md5(const char *str, int length) {
    int n;
    MD5_CTX c;
    unsigned char digest[16];
    char *out = (char*)malloc(33);

    MD5_Init(&c);

    while (length > 0) {
        if (length > 512) {
            MD5_Update(&c, str, 512);
        } else {
            MD5_Update(&c, str, length);
        }
        length -= 512;
        str += 512;
    }

    MD5_Final(digest, &c);

    for (n = 0; n < 16; ++n) {
        snprintf(&(out[n*2]), 16*2, "%02x", (unsigned int)digest[n]);
    }

    return out;
}

int main(int argc, char* argv[]) {
        AES_KEY aesKey_;
        unsigned char userKey_[16];
        unsigned char in_[16];
        unsigned char out_[16];

        strcpy(userKey_,"1234567890abcdef");
        strcpy(in_,"texttoencrypt");

        fprintf(stdout,"Original message: %s\n", in_);
        AES_set_encrypt_key(userKey_, 128, &aesKey_);
        AES_encrypt(in_, out_, &aesKey_);

        char *output = str2md5(out_, strlen(out_));
        fprintf(stdout,"MD5 of Encrypted message: %s\n", output);

        AES_set_decrypt_key(userKey_, 128, &aesKey_);
        AES_decrypt(out_, in_,&aesKey_);
        fprintf(stdout,"Recovered Original message: %s\n", in_);
        return 0;
} 
```

这输出：

```
Original message: texttoencrypt
MD5 of Encrypted message: 3675b450ae0415e5a8521b9bb7ee01ba
Recovered Original message: texttoencrypt 
```

现在在 PHP 中，我使用此代码生成各种 AES-128 加密字符串，类似地，对结果进行 MD5 处理：

```
<?php

$methods = openssl_get_cipher_methods();

$plain = "texttoencrypt";
$password = "1234567890abcdef";

foreach ($methods as $method) {

        if (preg_match('/AES-128/', $method)) {
                $encrypted = openssl_encrypt($plain, $method, $password);
                $decrypted = openssl_decrypt($encrypted, $method, $password);
                echo $method . ' : ' . md5($encrypted) . ' ; ' . $decrypted . "\r\n";
        }
}
?> 
```

输出：

```
AES-128-CBC : 08d6f8e2ae21a7a506fabf91adcc3b63 ; texttoencrypt
AES-128-CFB : ce10ea28d7607bd6514e478e025e47c6 ; texttoencrypt
AES-128-CFB1 : 6adde484b8bee26f9b1ca7856634586d ; texttoencrypt
AES-128-CFB8 : aea100f1473c0a3d6380dd0f28585e19 ; texttoencrypt
AES-128-ECB : 08d6f8e2ae21a7a506fabf91adcc3b63 ; texttoencrypt
AES-128-OFB : ce10ea28d7607bd6514e478e025e47c6 ; texttoencrypt 
```

不幸的是，我没有与 C 代码生成的 3675b450ae0415e5a8521b9bb7ee01ba 匹配。我已经尝试了我在 PHP 手册页和 SE 上看到的几乎所有评论，但找不到匹配项。

我不能修改 C 代码，只能修改 PHP ......所以任何关于如何让 PHP 匹配 C 输出的指针都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:14:42.790

```
 AES_encrypt(in_, out_, &aesKey_);

 char *output = str2md5(out_, strlen(out_)); 
```

谁负责空终止`out`，所以`strlen`按预期工作？当然不是`AES_encrypt`。

此外，`strcpy(userKey_,"1234567890abcdef");`您正在将`17`数据字节（您必须计算空终止符）复制`16`到`char`.

# jquery - 函数 jquery 之外的 gettig 值

> ID：15990548
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:10:45.723
> 
> 标签：jquery, function, output

我有这个代码：http: [//jsfiddle.net/jevniky/v3x5B/](http://jsfiddle.net/jevniky/v3x5B/)

```
<form id="form">
        <input type="text" value="500" id="amount">
        <input type="radio" name="time" value="7">7
            <input type="radio" name="time" value="14" checked>14
            <input type="radio" name="time" value="21">21
            <input type="radio" name="time" value="28">28
      </form>

  amount:<br>
  <p id="amountDisp"></p>
  time:<br>
  <p id="timeDisp">14</p>  
  result:<br>
  <p id="result"></p> 
```

和脚本：

```
$(document).ready(function () {
   $("input[name=time]").change(function time() {
       var time = this.value;
       $("#timeDisp").text(time);
   });
   $("#amount").keyup(function amount() {
      var amount = $("#amount").val();
      $("#amountDisp").text(amount);
      }).keyup();

}); 
```

而且我不知道如何获取这些变量（时间、数量）并进行一些计数。例如时间+金额。我该怎么做？因为我什至无法在其他任何地方显示它们。只有内部函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:16:42.780

确实没有理由将这些值存储在持久变量中。只要您想要它们，只需从它们的来源获取它们：

```
$("input[name=time]:checked").val() 
```

和

```
$("#amount").val() 
```

或者，如果您希望它们采用纯数字形式：

```
var time = parseInt($("input[name=time]:checked").val(), 10);
var amount = parseInt($("#amount").val(), 10); 
```

以下是在任一值更改时更新总数的代码：

```
$(document).ready(function () {
    function calc() {
        var total = parseInt($("input[name=time]:checked").val(), 10) + parseInt($("#amount").val(), 10);
        $("#result").html(total);
    }

   $("input[name=time]").click(function() {
       var time = this.value;
       $("#timeDisp").text(time);
       calc();
   });
   $("#amount").userChange(function amount() {
      var amount = $("#amount").val();
      $("#amountDisp").text(amount);
       calc();
    });
    calc();

}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/8gRr9/](http://jsfiddle.net/jfriend00/8gRr9/)

仅供参考，此代码使用我的 userChange jQuery 插件（jsFiddle 中的源代码），它检测到对文本字段（不仅仅是键）的大量更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:46:23.547

您还可以使用 JQuery 在时间输入框的更改事件中添加时间输入字段的值和选项选中复选框。要使用 JQuery 在文本框中放置值，请在其选择器之后使用 .val()。小提琴示例在这里：http: [//jsfiddle.net/cbqps/2/](http://jsfiddle.net/cbqps/2/)

例如，将结果更改为输入文本框（如果要在文本框中显示时间和金额的总和）：

```
 <input type="text" id="result"></input> 
```

然后修改函数如图：

```
$(document).ready(function () {
   $("input[name=time]").change(function time() {
       var time = this.value;
       var amount = $("#amount").val();
       var result = parseInt(time,10) + parseInt(amount,10);
       $("#timeDisp").text(time);
       $("#result").val(result);
   });
   $("#amount").keyup(function amount() {
      var amount = $("#amount").val();
      $("#amountDisp").text(amount);
      }).keyup();

}); 
```

# c# - 为什么绑定到 MinWidth 不起作用？

> ID：15990549
> 
> 赞同：0
> 
> 时间：2013-04-13T17:10:49.553
> 
> 标签：c#, xaml, windows-runtime, windows-store

在我的应用程序中，我创建了模板控件。现在我想将 MinWidth 绑定到依赖属性。例如在我的 xaml 我有

```
<ColumnDefinition  Width="Auto" MinWidth="{TemplateBinding ColumnWidth}"/> 
```

在我的代码中

```
public double ColumnWidth
{
    get { return (double)GetValue(ColumnWidthProperty); }
    set { SetValue(ColumnWidthProperty, value); }
}

public static readonly DependencyProperty ColumnWidthProperty =
    DependencyProperty.Register(
        "ColumnWidth", typeof(double), typeof(Schedule), new PropertyMetadata(200)); 
```

不幸的是，它不起作用，我不知道为什么。MinWidth 始终为 0。也许有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:50:27.233

我不知道为什么`TemplateBinding`在你的情况下不起作用，但你总是可以用这样的常规替换它`Binding`：

```
<ColumnDefinition MinWidth="{Binding ColumnWidth,
                             RelativeSource={RelativeSource Mode=TemplatedParent}}"/> 
```

* * *

我已经在自定义控件的 ControlTemplate 中对此进行了测试。`TemplateBinding`行不通，`Binding`行。

# javascript - PhoneGap iOS: picture date gives current date

> ID：15990555
> 
> 赞同：2
> 
> 时间：2013-04-13T17:11:04.190
> 
> 标签：javascript, html, ios, cordova, ios6

I choose a picture (or video) from the library of the phone, using this:

```
navigator.camera.getPicture(PictureSuccess, err,{
      allowEdit: false,
      sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
      destinationType: Camera.DestinationType.FILE_URI,
      mediaType: Camera.MediaType.ALLMEDIA
}); 
```

Then, after the picture is chosen, I do this in `PictureSuccess(fileURI)` to get to the [FileEntry](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileEntry) and retrieve the file date:

```
window.resolveLocalFileSystemURI(fileURI, function(fileEntry) {

      fileEntry.getMetadata(function(meta){

              console.log(meta.modificationTime);

      }, err);  
}, err); 
```

The console output is the current date instead of the the file date on iOS. On Android phones though, the output is the correct image date. I think iOS modifies the files before giving the picture to my app.

My question is: have you encountered the same problem and did you manage to find a workaround?

(using PhoneGap 2.5.0 and iOS 6.1.2)

Documentation:

*   [FileEntry](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileEntry)
*   [Metadata](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#Metadata)
*   [camera.getPicture](http://docs.phonegap.com/en/2.5.0/cordova_camera_camera.md.html#camera.getPicture)

# vb.net - The process cannot access the file[VB.Net]

> ID：15990558
> 
> 赞同：0
> 
> 时间：2013-04-13T17:11:26.900
> 
> 标签：vb.net

I'm trying to save a file, then crypt is and delete the temporary uncrypted file. This is my encryption sub, the error line occurs on the last line.

```
Sub EncryptFile(ByVal sInputFilename As String, _
              ByVal sOutputFilename As String, _
              ByVal sKey As String)

    Dim fsInput As New FileStream(sInputFilename, _
                                FileMode.Open, FileAccess.Read)
    Dim fsEncrypted As New FileStream(sOutputFilename, _
                                FileMode.Create, FileAccess.Write)

    Dim DES As New DESCryptoServiceProvider()

    'Set secret key for DES algorithm.
    'A 64-bit key and an IV are required for this provider.
    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey)

    'Set the initialization vector.
    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    'Create the DES encryptor from this instance.
    Dim desencrypt As ICryptoTransform = DES.CreateEncryptor()
    'Create the crypto stream that transforms the file stream by using DES encryption.
    Dim cryptostream As New CryptoStream(fsEncrypted, _
                                        desencrypt, _
                                        CryptoStreamMode.Write)

    'Read the file text to the byte array.
    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)
    'Write out the DES encrypted file.
    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Close()
    System.IO.File.Delete(sInputFilename)
End Sub 
```

Can anyone help me out with this? I can't figure out what I am doing wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:15:10.710

`fsInput.Close()`之前使用`System.IO.File.Delete(sInputFilename)`

希望这可以帮助

# assembly - 检查 PCSpim 的 Yes/No 输入

> ID：15990560
> 
> 赞同：0
> 
> 时间：2013-04-13T17:11:54.720
> 
> 标签：assembly, input, character, pcspim

我正在尝试找出检查 PCSpim 汇编语言中用户输入的最佳方法，以进行编程分配。基本上，我会提示用户输入他们是否希望按升序显示。如果他们输入“Y”，则显示将按升序排列，但如果他们输入“N”，它将按降序打印。

是否可以将“Y”和“N”存储到寄存器中以检查他们的答案，还是必须是存储在寄存器中的数字？

其他想法也值得赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:10:46.090

如果你正在阅读一个字符，你大概会得到 ascii 代码。因此，您应该将输入与 和 的 ascii 代码进行`Y`比较`N`。根据您的汇编程序，您可能能够编写常量，例如`'Y'`或`'N'`。否则，您将不得不在一些 ascii 图表中查找代码。

# python - How to install python 2.7.4 on OSX Mountain Lion

> ID：15990561
> 
> 赞同：3
> 
> 时间：2013-04-13T17:12:11.983
> 
> 标签：python, osx-mountain-lion

I tried installing python 2.7.4 by overwriting the native Apple's installation of python 2.7 by following [this link](http://wolfpaulus.com/jounal/mac/installing_python_osx) (wolfpaulus.com), and as a result both easy_install and pip no longer work.

[This link](https://discussions.apple.com/thread/3842421?start=0&tstart=0) (apple.com) suggests the native Apple bundle should never be deleted.

Is it possible to restore python 2.7 supplied by Apple without reinstalling OSX? Is there a definitive guide to upgrading python to 2.7.4 on OSX Lion? For instance, before breaking my set up I could install bumpy, django into 2.7.4, but matplotlib refused to install to anything but 2.7, either from binaries or source.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:43:11.297

您永远不应该删除`/System/Library`or中的任何内容`/usr`（除了`/usr/local`）。安装在这些位置的文件由 Apple 作为 OS X 的一部分进行管理。在最坏的情况下，您可能会致命地损坏您的 OS X 系统；充其量，您的所有更改都可能会被下一次软件更新抹去。特别是对于 Python，您刚刚清除了 Apple 提供的 Python 扩展，而这些扩展在其他地方是不可用的。更新像 Python 这样的系统组件的正确方法是将新版本安装在不同的位置，就像 python.org Python 安装程序在 中所做的那样`/Library/Frameworks`，然后通过修改你的 shell 来管理访问`PATH`环境变量。不幸的是，Apple 无法轻松安装被错误删除的 OS X 的各个组件。要正确恢复已删除的所有系统 Python，最简单的方法是重新安装 OS X 本身。

当您安装另一个版本的 Python 时，您还应该使用它来安装其他版本的`pip`或`easy_install`. 通常，每个 Python 版本都应该有自己的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:17:43.083

替换苹果默认的python安装绝对不是一个好主意。如果你已经完成了，那么你可以尝试使用以下命令

“ brew install python --framework ”

R

# php - 如何在 Zend Framework 2 中呈现站点地图 XML 文件？

> ID：15990562
> 
> 赞同：2
> 
> 时间：2013-04-13T17:12:27.310
> 
> 标签：php, zend-framework2, sitemap

是否已经实现了从 XML 文件创建 (HTML) 站点地图的机制？

我正在使用[`Python`脚本](http://sitemap-generators.googlecode.com/)生成站点地图，并希望将我的站点地图（的一部分）作为 HTML 列表播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:31:05.247

使用 simple_xml 很容易：

```
$xmlFile = 'sitemap.xml';

if (!file_exists($xmlFile)) {
    throw new \Exception("File does not exist");
}

$xml = simplexml_load_file($xmlFile);

echo "<ul class=\"sitemap\">";
foreach($xml as $url) {
    echo "<li>" . $url->loc . "</li>";
}
echo "</ul>"; 
```

# cocos2d-iphone - 为什么我的变量没有在 Cocos2d 中设置？

> ID：15990569
> 
> 赞同：0
> 
> 时间：2013-04-13T17:13:29.777
> 
> 标签：cocos2d-iphone

在我的 GameManager 单例对象中，我创建：

```
// Load levels
        // Create array property to store level objects
        self.levels = [[[NSMutableArray alloc] init] autorelease];
        //Create 2 level objects with spawnRates
        Level *level1 = [[[Level alloc] initWithLevelNum:1 spawnRate:10000 bgImageName:@"Icon.png"] autorelease];
        Level *level2 = [[[Level alloc] initWithLevelNum:2 spawnRate:10000 bgImageName:@"Icon.png"] autorelease];
        Level *level3 = [[[Level alloc] initWithLevelNum:3 spawnRate:80 bgImageName:@"Icon.png"] autorelease];
        Level *level4 = [[[Level alloc] initWithLevelNum:4 spawnRate:80 bgImageName:@"Icon.png"] autorelease];
        Level *level5 = [[[Level alloc] initWithLevelNum:5 spawnRate:2 bgImageName:@"Icon.png"] autorelease];
        Level *level6 = [[[Level alloc] initWithLevelNum:6 spawnRate:1 bgImageName:@"Icon.png"] autorelease];
        //Put level objects into array property
        [_levels addObject:level1];
        [_levels addObject:level2];
        [_levels addObject:level3];
        [_levels addObject:level4];
        [_levels addObject:level5];
        [_levels addObject:level6];
        //Set current level index to 0
        self.curLevelIndex = 0; 
```

更进一步，我实现了由层调用的方法，如下所示：

```
- (Level *)curLevel {
    NSLog(@"curLevelIndex is %d", _curLevelIndex);
    //returns object at current level index where at start, first slot [0] = spawnrate = 1
    return [_levels objectAtIndex:_curLevelIndex];
}

- (void)restartGame {
    _curLevelIndex = 0;
    [self nextLevel];
}

- (void)levelComplete {
    NSLog(@"curLevel spawnRate is %d", [self curLevel].spawnRate);

    //Increase currentlevelindex
    _curLevelIndex++;

    if (_curLevelIndex >= [_levels count]) {
        _curLevelIndex = 0;
        NSLog(@"resetting levels");
    } else {
        //make it faster
        //NSLog(@"current level %d", [[_levels objectAtIndex:_curLevelIndex].spawnRate ];
        NSLog(@"new level %d", _curLevelIndex);
    }

} 
```

请原谅所有的 NSLogs，但我疯了，试图找出为什么我的 spawnRate 没有被改变。在我的游戏更新方法中，我这样做：

```
if (timeSinceLastRateBump > 3) {
        NSLog(@"DIFFICULTY INCREASES NOW>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");
        [[GameManager sharedGameManager] levelComplete];
        timeSinceLastRateBump = 0;
    } 
```

这或多或少地被称为每秒。现在我在我的 NSLog 中得到了这个：

```
2013-04-13 11:08:22:489 MZ[1408:3079] target added to _targets
2013-04-13 11:08:23:489 MZ[1408:3079] target added to _targets
2013-04-13 11:08:24:472 MZ[1408:3079] DIFFICULTY INCREASES NOW>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
2013-04-13 11:08:24:473 MZ[1408:3079] curLevelIndex is 1
2013-04-13 11:08:24:474 MZ[1408:3079] curLevel spawnRate is 0
2013-04-13 11:08:24:475 MZ[1408:3079] new level 2
2013-04-13 11:08:24:509 MZ[1408:3079] target added to _targets
2013-04-13 11:08:25:506 MZ[1408:3079] target added to _targets
2013-04-13 11:08:26:522 MZ[1408:3079] target added to _targets
2013-04-13 11:08:27:490 MZ[1408:3079] DIFFICULTY INCREASES NOW>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
2013-04-13 11:08:27:491 MZ[1408:3079] curLevelIndex is 2
2013-04-13 11:08:27:493 MZ[1408:3079] curLevel spawnRate is 0
2013-04-13 11:08:27:494 MZ[1408:3079] new level 3
2013-04-13 11:08:27:523 MZ[1408:3079] target added to _targets
2013-04-13 11:08:27:856 MZ[1408:3079] Globals called. Points: 1
2013-04-13 11:08:27:856 MZ[1408:3079] Globals leaving. Points: 2
2013-04-13 11:08:28:539 MZ[1408:3079] target added to _targets 
```

这证明 curLevelIndex 从 0 增加到 1 到 2。但是 spawnRate 保持在 0。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:27:54.807

在您的 levelComplete 例程中，而不是：

```
 NSLog(@"new level %d", _curLevelIndex); 
```

做 ：

```
Level* current = [self curLevel];
NSLog(@"current level no : %d , spw rate : %f",current.levelNumber,current.spawnRate]; 
// *** WAG for the  getters. 
```

和日志上的断点。如果电流为零，请弄清楚。如果没有，请检查 var 并查看该对象中的生成率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:34:51.253

在代码中：

```
NSLog(@"curLevel spawnRate is %d", [self curLevel].spawnRate); 
```

%d 用于双精度值，而不是浮点数。将其更改为 %f。

# ajax - is_front_page() doesnt work in ajax theme

> ID：15990570
> 
> 赞同：1
> 
> 时间：2013-04-13T17:13:32.240
> 
> 标签：ajax, wordpress

i am trying to add the below code in an ajax wordpress theme in order to show a div only in front page

```
<?php wp_reset_query(); ?>
<?php if(is_home() || is_front_page()): ?>
 <!-- Do the things here... -->
<?php else: ?>
 <!-- Else part goes here...  -->
<?php endif;  ?> 
```

unfortonatly it doesnt work when accessing from menu to other pages for example :

HOME-->SECOND PAGE--> THIRD PAGE

it works only if i access direct to an other page : for example :

www.example.com/secondpage

do you know any solution on this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:23:54.927

Check [this article](http://www.wpexplorer.com/wordpress-homepage-conditional/) on how to properly use `is_front_page` and `is_home` functions.

Basically you should use this code:

```
if ( is_front_page() && is_home() ){
    // Default homepage
} elseif ( is_front_page()){
    //Static homepage
} elseif ( is_home()){
    //Blog page
} else {
    //everything else
} 
```

# java - Java中JSON字符串中的HTML

> ID：15990575
> 
> 赞同：2
> 
> 时间：2013-04-13T17:13:55.220
> 
> 标签：java, html, json, string, gson

我想将一个名为的**Java**类保存`MyClass`到一个文本文件中，并且我想使用*JSON*对该类进行编码以用于文件写入目的，而不是实现`Serializable`接口。此外，为了保存课程，我想使用 Google 的[Gson](https://sites.google.com/site/gson)库，尤其是[`JsonWriter`](http://google-son.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonWriter.html)课程。例如，该类`MyClass`定义如下：

```
public class MyClass{
 String html;    
 public MyClass(){}
} 
```

如上例所示，`MyClass`有一个`String`名为 的字段`html`，显然必须包含*HTML 代码*。

我可以通过使用 JSON 将类保存到文本文件中吗，`JsonWriter`或者我应该对`html`字段进行编码或执行类似的操作（例如调用`URLEncode`-like 函数），然后再将其提供给`JsonWriter`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:58:26.710

由于转义新行/引号等可能会使这有点棘手，为什么不直接使用[XStream](http://xstream.codehaus.org/)将对象转换为 XML 并将 HTML 包装在 CDATA 部分中呢？Json 没有[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)部分的等效项。

# lisp - 在 Elisp 中，如何将值动态分配给也动态选择的变量（以 let 形式。）

> ID：15990583
> 
> 赞同：2
> 
> 时间：2013-04-13T17:15:01.653
> 
> 标签：lisp, elisp

我有一个已知变量列表和带有 nil 参数列表的相应函数，在它内部它使用已知的非参数（或全局）变量。

例如

```
(defun funA ()
  (message "%s" varA))

(defun funB ()
  (message "%s" varB))

...

(setq alist
      '((varA . funA)
        (varB . funB)
        ...
        )) 
```

alist 中的类似元素可以动态添加/删除。

我想在另一个函数中运行所有这些函数，其中已知变量的值以 LET 形式动态分配。

```
(defun call-each-fun-of-alist ()
  (dolist (e alist)
    (let (( (car e)  (read-from-minibuffer "value: ") ))
      (funcall (cdr e))))) 
```

（是的，它会抛出错误，但我想要类似的东西，可能没有 EVAL）

对于 alist 的已知元素（就像我首先可以做的那样

```
(let ((varA (read-from-minibuffer "value: ")))
  (funcall (cdr (assoc 'varA alist)))) 
```

但是 alist 是动态更新的，我要运行 alist 中的所有函数，相应变量的值将动态出现。

请让我知道如何定义

```
call-each-fun-of-alist 
```

（不一定，但没有在 call-each-fun-of-alist 中调用 EVAL，如果没有 EVAL 是不可能的，我也想知道它。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:57:09.487

你可以用`letf`（`cl-letf`在最近的 Emacs 中）来做到这一点。它绑定值，`let`但允许“位置”或“通用变量”以及简单的变量名称。

```
(defun call-each-fun-of-alist ()
  (cl-dolist (e alist)
    (cl-destructuring-bind (variable . function) e
      (cl-letf (((symbol-value variable)
                 (read-from-minibuffer
                  (format "value for %s: "
                          variable))))
        (funcall function))))) 
```

请注意，这将失败并出现错误，除非`alist`之前已使用`defvar`. 在 Elisp 手册中查找“广义变量”以获取更多信息。

另一种解决方案是使用`cl-progv`，它采用变量名称和值的并行列表来动态绑定：

```
(defun call-each-fun-of-alist ()
  (cl-dolist (e alist)
    (cl-destructuring-bind (variable . function) e
      (cl-progv
          (list variable)
          (list (read-from-minibuffer
                 (format "value for %s: "
                         variable)))
        (funcall function))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:50:16.890

在 Common Lisp 中，这是由`PROGV`给定变量符号的变量的动态绑定提供的。

GNU Emacs 应该`PROGV`在其 Common Lisp 仿真中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T18:23:49.877

这就是你所需要的——不需要`progv`或破坏绑定的东西：

```
(defun call-each-fun-of-alist (alist)
  (dolist (e  alist)
    (set (car e) (read-from-minibuffer "value: "))
    (funcall (cdr e))))

(defvar my-alist '((varA . funA) (varB . funB)))
(call-each-fun-of-alist my-alist) 
```

`let`或者，如果您出于某种原因真的想查看绑定：

```
(defun call-each-fun-of-alist (alist)
  (dolist (e  alist)
    (eval `(let ((,(car e)  (read-from-minibuffer "value: ")))
             (funcall (cdr e)))))) 
```

# c# - 如何正确定义类以将它们序列化为 XML？

> ID：15990587
> 
> 赞同：1
> 
> 时间：2013-04-13T17:15:11.070
> 
> 标签：c#, xml, xml-serialization, xmlserializer, xml-deserialization

我正在使用非确定性有限自动机构建一个应用程序，它必须保存它并从文件中读取它。我用 [XmlTags] 尝试了几十种不同的方法，但它仍然给我错误。你能告诉我应该如何定义类以由 XML 序列化程序序列化吗？

```
 public class state
    {
        [XmlAttribute]
        public string name
        { get; set; }

        public List<transition> transitions
        { get; set; }

        public state()
        {
        }
        public state(string Name)
        {
            name = Name;
        }

        public void addTransition(string Letter, state NextState)
        {
            bool found = false;
            foreach (transition tr in this.transitions)
            {
                if (tr.letter.Equals(Letter))
                {
                    tr.nextStates.Add(NextState);
                    found = true;
                    break;
                }
                if (found == false)
                {
                    transitions.Add(new transition(Letter, NextState));
                }
            }
            if (found == false)
            {
                transitions.Add(new transition(Letter, NextState));
            }
        }
    }
    public class transition
    {
        [XmlAttribute]
        public string letter
        { get; set; }
        public List<state> nextStates
        { get; set; }

        public transition()
        {
        }
        public transition(string Letter, state NextState)
        {
            letter = Letter;
            nextStates = new List<state>();
            nextStates.Add(NextState);
        }
    }

    public class automaton
    {
        public List<state> states
        { get; set; }

        public automaton()
        {
        }
        public bool isState(string StateName)
        {
            foreach (state st in states)
                if (st.name.Equals(StateName)) return true;
            return false;

        }
        public state getState(string StateName)
        {
            foreach (state st in states)            
                if (st.name.Equals(StateName)) return st;
            return new state(StateName);
        }
    }  

public class XMLReader
    {
        public static void NFAToXML(automaton Automaton, string Filename)
        {
            XmlSerializer serializer = new XmlSerializer(typeof(automaton));
            TextWriter textWriter = new StreamWriter(@Filename);
            serializer.Serialize(textWriter, Automaton);
            textWriter.Close();
        }
        public static automaton XMLToNFA(string Filename)
        {
            XmlSerializer deserializer = new XmlSerializer(typeof(List<state>));
            TextReader textReader = new StreamReader(Filename);
            automaton automaton = new automaton();
            automaton.states= (List<state>)deserializer.Deserialize(textReader);
            textReader.Close();
            return automaton;
        }

    } 
```

我希望我的 XML 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
<automaton xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <state name="q0" type="initial" >
        <transition letter="0">
          <state name="q1"></state>
          <state name="q3"></state>
        </transition>
        <transition letter="1">
          <state name="q0"></state>
          <state name="q2"></state>
        </transition>
    </state>
    <state name="q1">
        <transition letter="0">
        </transition>
        <transition letter="1">
          <state name="q3"></state>
        </transition>
    </state>
    <state name="q2" type="accepting">
        <transition letter="0">
          <state name="q1"></state>
        </transition>
        <transition letter="1">
          <state name="q0"></state>
          <state name="q2"></state>
        </transition>
    </state>
    <state name="q3">
        <transition letter="0">
          <state name="q1"></state>
        </transition>
        <transition letter="1">
          <state name="q1"></state>
          <state name="q2"></state>
        </transition>
    </state>
</automaton> 
```

请帮助，我试图以多种方式改变它，但没有成功......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:32:52.460

状态有一个转换列表，每个转换都有一个状态列表。

这会在序列化时导致循环引用。如果您检查捕获的异常的 InnerException 对象，它应该会告诉您这一点。

您需要解决这个问题，例如只编写实例的 ID，或者使用支持引用的序列化程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:26:39.540

我可以看到的主要错误（没有编译器）是列表：要在没有包装元素的情况下创建列表，请使用 XmlElementAttribute：

```
 [XmlElement("transition")]
 public List<transition> transitions { get; set; } 
```

您也需要在“状态”上使用它 -`[XmlElement("state")]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:16:39.077

如果您知道所需的 XML，则有一个简单的技巧：

*   将文件另存为 foo.xml
*   在 vs 命令提示符下，执行`xsd foo.xml`生成 foo.xsd
*   现在在同一个属性中执行`xsd foo.xsd /classes`以生成 foo.cs

foo.cs 文件现在具有与您的 XML 匹配的 ac# 模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:23:38.987

您需要`[Serializable]`在您的类上定义属性以序列化/反序列化类对象。[有关详细信息，请参阅此处](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)的链接。

```
[Serializable()]        
public class State
{ } 
```

# c++ - 精神语法的理解

> ID：15990588
> 
> 赞同：0
> 
> 时间：2013-04-13T17:15:16.320
> 
> 标签：c++, boost, boost-spirit

在浏览文档时，我读到了

对于用逗号分隔的一串双打，我们可以这样（我理解）

`double_ >> * (',' >> double_)`或者`double_ %`

但是下面的表达式是什么意思。它应该将逗号分隔的字符串拆分为一个向量并且它可以工作。如果有人能澄清一下，我将不胜感激。我对`-`运营商感到困惑我相信它是一个差异运营商，但我无法弄清楚它在这里的作用

`*(qi::char_ - ',') % ','`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T18:06:03.143

`*(char_ - ',')`表示“匹配零个或多个字符，但 ','”，也可以这样写：`*~char_(",")`. 另一方面，`*char_`仅表示“匹配零个或多个字符”。

要理解为什么需要排除，只需尝试使用和不使用它：

```
#include <string>
#include <boost/spirit/home/qi.hpp>
int main()
{
    using namespace boost::spirit::qi;
    std::vector<std::string> out1, out2;
    std::string s = "str1, str2, str3";
    bool b = parse(s.begin(), s.end(), *~char_(",") % ",", out1); // out1: ["str1", "str2", "str3"]
    b = parse(s.begin(), s.end(), *char_ % ",", out2); // out2: ["str1, str2, str3"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:00:42.467

你真的需要阅读[EBNF](http://www.cl.cam.ac.uk/~mgk25/iso-14977.pdf)标准来理解 Boost.Spirit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:21:16.040

`qi::char_ - ','`匹配所有字符，但`,`要防止内部表达式过于贪婪。

# r - R中的绘图结果不一致

> ID：15990594
> 
> 赞同：4
> 
> 时间：2013-04-13T17:15:39.963
> 
> 标签：r, charts, plot

I'm experimenting with plot in R and I'm trying to understand why it has the following behaviour.

I send a table into the plot function and it gives me a very nice variwidth graph which is quite insightful. However, after I reorder the columns of the table and send it to plot again, I get an odd scatter plot. What has happened in the re-ordering and how can I avoid this?

```
smoke <- matrix(c(51,43,22,92,28,21,68,22,9),ncol=3,byrow=TRUE)
colnames(smoke) <- c("High","Low","Middle")
rownames(smoke) <- c("current","former","never")
smoke <- as.table(smoke)
plot(smoke)  # This gives me a variwidth plot
smoke = smoke[,c("Low", "Middle", "High")] # I reorder the columns
plot(smoke)  # This gives me a weird scatter plot 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T17:28:09.650

对此进行调查的方法是对“smoke”的两个实例执行 str()：

```
> str(smoke)
 table [1:3, 1:3] 51 92 68 43 28 22 22 21 9
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:3] "current" "former" "never"
  ..$ : chr [1:3] "High" "Low" "Middle"

> str( smoke[,c("Low", "Middle", "High")] )
 num [1:3, 1:3] 43 28 22 22 21 9 51 92 68
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:3] "current" "former" "never"
  ..$ : chr [1:3] "Low" "Middle" "High" 
```

第一个是表格对象，而第二个是矩阵。您也可以在两者上都完成 class() 并获得更紧凑的答案。要了解为什么这很重要，还请查看

```
methods(plot) 
```

....并看到有一种`plot.table*`方法。'*' 表示它不是“可见的”，您需要查看需要使用的代码：

```
getAnywhere(plot.table) 
```

正如 Ananda 所展示的，您可以将表类恢复到该烟雾对象，然后让调度系统将对象发送到`plot.table*`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T17:21:06.903

当您对列重新排序时，您将“烟雾”类从“表”更改为“矩阵”，因此根据输入返回不同默认结果的绘图返回了不同的绘图。

尝试：

```
plot(as.table(smoke)) 
```

# c - 无法找出指针中的错误？

> ID：15990602
> 
> 赞同：-3
> 
> 时间：2013-04-13T17:16:17.643
> 
> 标签：c, pointers

```
#include <stdlib.h>
int main(void)
{
    int* x;
    int* y;
    x = malloc(sizeof(int));
    *x = 42;
    *y = 13;
    y = x;
    return 0;
} 
```

错误在哪一行，为什么..？我不能将指针分配给另一个指针。是的，这里没有打印任何内容..实际上这是我的作业问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:19:01.953

`y`在为它分配值之前，您需要为其分配内存。

```
 y = malloc(sizeof(int));
 *y = 13 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T17:19:19.163

错误就在这里：`*y = 13;`问题是`y`以前没有分配（即未定义的行为）。

交换

```
*y = 13;
y = x; 
```

到

```
y = x;
*y = 13; 
```

解决问题。显然，内存泄漏的问题`malloc(sizeof(int))`依然存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T17:18:01.493

`y`是一个野指针，你没有分配`13`任何东西。你也需要`malloc()`它。

要么使用`malloc`像

```
y = malloc(sizeof(int));
*y = 13; 
```

或制作`y`一个堆栈变量，如

```
int y = 0;
...
y = *x; //copy value from x to y by dereferencing x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:09:02.103

当你使用指针时，你必须明白一件事：你实际上并没有在堆栈中分配内存，你只是创建了一个指向某个东西的指针。那个东西可以是任何东西，但我们并不真正关心。我们只需要初始化它，我们通过让它指向某个东西来做到这一点。有两种方法，第一种是使其指向堆栈变量，第二种是使其指向堆栈中的位置，您使用`malloc()`.

第一种方式：

```
int x; //you create a stack variable
int *ptr; //you create a type int pointer
ptr=&x; //you make ptr point to the adress where 'x' is 
```

第二种方式：

```
int *ptr; //you create a type int pointer
*ptr=malloc(sizeof(int)); you allocate memory for one int 
```

上面代码的问题是您没有分配内存`int *y`，但您尝试在那里保存一个数字。

你的代码可以这样写

```
#include <stdlib.h>
int main(void)
{
 int* x;
 int* y;
 x = malloc(sizeof(int));
 y = malloc(sizeof(int));
 //now both pointers point to a place in memory so you can actually save data on them
 *x = 42;
 *y = 13;
 y = x;
 return 0;
} 
```

这里的问题是，当你指向 y 时`x`，你失去了`y`指向的地方，你在内存中留下了不可用的分配位置。所以在`y`指向之前`x`你可以使用`free()`。

```
*y=13;
free(y);
y=x; 
```

# python - 循环遍历python中的巨大范围

> ID：15990605
> 
> 赞同：1
> 
> 时间：2013-04-13T17:16:42.347
> 
> 标签：python, algorithm, python-2.7, large-data

我如何（有效地）循环遍历 Python 中的巨大范围？每当我尝试运行类似 -

```
for x in range(105, 10000000000000):
    #do stuff 
```

它需要永恒的时间才能完成。我已经尝试了很多类似`iter`,的方法`set`，`xrange`但仍然没有成功。是否有任何外部模块可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:33:59.263

鉴于范围，我认为可以肯定地说，几乎无论你做什么或如何做，都需要一段时间。

更具体地说，您正在执行循环的大约 1E+13 次迭代。使用不错的代码和合理的快速处理器，您可能每秒可以执行大约 4E+9 条指令（例如，在 2 GHz 时每个时钟周期 2 条指令）。这显然是不准确的，但现在让我们继续下去，看看我们会在哪里结束。

因此，即使我们假设循环的每次迭代只需要执行一条单周期指令，它也将花费大约：1E+13/4E+9 = 2.5E3 秒 = ~42 分钟。鉴于您在循环内做一些工作，并且循环本身有一些开销，我们显然将在每次迭代中执行不止一条机器代码指令。如果我们每次迭代必须执行 1000 条指令（可能是一个合理的初步近似值，因为你没有告诉我们你在做什么），那么我们正在寻找大约 600-700 小时要执行的循环。

底线：改变你代表你的范围的方式可能会有所帮助，但如果你需要在这么大的范围内进行迭代，那么就无法避免需要一段时间的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:25:56.827

假设您有一个 3GHz 处理器，并且您只需要一个周期来处理该范围内的每个条目，您将需要约 3,333 秒（约 1 小时）来处理它。

这使我认为您所做的事情从根本上是错误的。也许你应该重组你的问题。

# ruby-on-rails - Rails 模板输出间距

> ID：15990608
> 
> 赞同：0
> 
> 时间：2013-04-13T17:17:03.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 application.html.erb 我有：

```
 <%= stylesheet_link_tag "application", :media => "all" %>>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %> 
```

输出如下：

```
 <link href="/assets/css-reset.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/globals.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-2.3.1/css/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/home_screen.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery-1.9.1.min.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.js?body=1" type="text/javascript"></script>
<script src="/assets/home_screen.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="wvpCKeGQlyowV18CYU4V2Vn7f+IxHTK0zSkB2XVGajc=" name="csrf-token" /> 
```

如何为此类结果添加输出间距？

```
 <link href="/assets/css-reset.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/globals.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/bootstrap-2.3.1/css/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/home_screen.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery-1.9.1.min.js?body=1" type="text/javascript"></script>
  <script src="/assets/application.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.js?body=1" type="text/javascript"></script>
  <script src="/assets/home_screen.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
  <meta content="wvpCKeGQlyowV18CYU4V2Vn7f+IxHTK0zSkB2XVGajc=" name="csrf-token" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:28:28.610

你可以试试

```
stylesheet_link_tag("application", :media => "all").split("\n").join("\n  ") 
```

但你真的认为这值得麻烦吗？

你可以看到你的 HTML 用 firebug 或其他东西正确缩进。这也是获取网页时要加载的更多字节。

# android - 将按钮添加到 LinearLayout 时出错

> ID：15990611
> 
> 赞同：0
> 
> 时间：2013-04-13T17:17:18.773
> 
> 标签：android, button, android-linearlayout

我必须以编程方式将按钮添加到线性布局。但程序力量关闭。这是我正在尝试的代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_remove_contact);

        LinearLayout ll = (LinearLayout) findViewById(R.id.vertic);
        Button button = new Button(this.getApplicationContext());
        LinearLayout.LayoutParams params = (LayoutParams) button.getLayoutParams();
        params.weight = 1;
        button.setText("MR. ABC");
        button.setLayoutParams(params);
        ll.addView(button, params);

    } 
```

这是 LogCat：

```
04-13 22:16:44.484: D/dalvikvm(12596): GC_EXTERNAL_ALLOC freed 70K, 50% free 2698K/5379K, external 2013K/2108K, paused 53ms
04-13 22:16:46.000: D/AndroidRuntime(12596): Shutting down VM
04-13 22:16:46.000: W/dalvikvm(12596): threadid=1: thread exiting with uncaught exception (group=0x40015578)
04-13 22:16:46.011: E/AndroidRuntime(12596): FATAL EXCEPTION: main
04-13 22:16:46.011: E/AndroidRuntime(12596): java.lang.RuntimeException: Unable to start activity ComponentInfo{maju.project.tourguide/maju.project.tourguide.RemoveContact}: java.lang.NullPointerException
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.os.Looper.loop(Looper.java:123)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at java.lang.reflect.Method.invoke(Method.java:507)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at dalvik.system.NativeStart.main(Native Method)
04-13 22:16:46.011: E/AndroidRuntime(12596): Caused by: java.lang.NullPointerException
04-13 22:16:46.011: E/AndroidRuntime(12596):    at maju.project.tourguide.RemoveContact.onCreate(RemoveContact.java:31)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 22:16:46.011: E/AndroidRuntime(12596):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-13 22:16:46.011: E/AndroidRuntime(12596):    ... 11 more 
```

任何人都可以指出问题吗？提前致谢

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/car_wallpaper"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:id="@+id/vertic"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Your Emergency Contacts"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#FFFF" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:21:15.723

在这里 ：

```
 Button button = new Button(this.getApplicationContext()); //<<< 
```

您正在传递`Application`用于创建无效上下文的动态按钮的上下文，因为您正在将 Button 添加到当前`Activity`布局，因此您需要传递当前`Activity`上下文以创建 Button。将您的代码更改为：

```
 Button button = new Button(this);
     LinearLayout.LayoutParams params = 
          new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
                                      LinearLayout.LayoutParams.WRAP_CONTENT);
     params.weight = 1;
     button.setText("MR. ABC");
     button.setLayoutParams(params);
     .... 
```

或者

```
Button button = new Button(Your_Current_Activity.this);
..... 
```

并确保您 `vertic`在传入的当前 Activity 布局中有一个带有 id 的布局`setContentView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:58:11.463

NullPointerException 的原因是因为这一行：

```
LinearLayout.LayoutParams params = (LayoutParams) button.getLayoutParams(); 
```

在这里你得到**`params = null`**了，因此在下一行你得到了异常。

如果你想`LayoutParams`在你的按钮中使用，那么你首先需要初始化它。这是您的修改代码：

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_remove_contact);

    LinearLayout ll = (LinearLayout) findViewById(R.id.vertic);
    Button button = new Button(this.getApplicationContext());
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.weight = 1;
    button.setText("MR. ABC");
    button.setLayoutParams(params);
    ll.addView(button, params);
} 
```

# c# - 如何在 C# 中的结构列表中进行二进制搜索？

> ID：15990631
> 
> 赞同：-2
> 
> 时间：2013-04-13T17:19:41.590
> 
> 标签：c#, list, search, structure, binary-search

我想问一下如何在有 50,000 个结构的 List 中实现二进制搜索。

**我按单词**对这个列表进行排序，例如**listSub.OrderBy(s => s.word);**

```
public struct SubItem
{
    public string word;
    public int count;

    public SubItem(string word, int count)
    {
        this.word = word;
        this.count = count;
    }
} 
```

我不知道如何在**List** < **SubItem** > 中进行二进制搜索。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:01:00.333

二分查找的关键是中心项左侧的所有项都小于中心项，而右侧的所有项都大于中心项。另一个关键是列表的任何给定部分本身都表现为排序列表，因此该属性仍然适用。所以你不断地把列表分成两半，直到你找到你的元素。这通常通过递归来完成，以空列表作为元素不存在于列表中的基本情况。

这里有一些伪代码可以帮助您入门：

```
find (list, start, end, target) {
     if (start > end)  // this is called a base case, look into recursion
        return -1

     center = (end - start) / 2

     if list[center] == target    // this is also a base case
          return center;

     else if list[center] > target
          return find(list, start, center-1, target)

     else 
          return find(list, center+1, end, target)

} 
```

我们会像这样运行它：

```
list = [ 1 , 3, 7, 9, 12, 15, 17, 21, 28 ]
// need to find the target in the list
find(list, 0, list.length - 1, 3); 
```

这将首先查看 12，它比我们的目标大，然后它将列表分成两半，查看较小一半的中间 3 并找到它，并返回它的索引。它在越来越大的列表上往往更有益。

我说它使用递归，这意味着两件事：它会调用自己，直到找到答案，当它找到答案时，它会停止调用自己。您稍后可能会发现两种主要的递归，但最重要的部分是这两个：递归步骤（调用自身）和基本情况（当它停止调用自身时）。没有这两个部分，某些东西就不是递归的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-19T16:06:12.027

使用数组列表。它有一个名为 BinarySearch 的方法。

# ios - 验证州和邮政编码的有效方法

> ID：15990634
> 
> 赞同：0
> 
> 时间：2013-04-13T17:20:05.220
> 
> 标签：ios, objective-c, cocoa-touch, validation

我正在寻找一种简单的方法来验证州和邮政编码（仅限美国）。显然有很多方法可以做到这一点。我有邮政编码：

```
- (BOOL)validateZipCode
{
    bool returnValue = false;
    NSString *zipcodeExpression = @"^[0-9]{5}(-/d{4})?$"; //U.S Zip ONLY!!!
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:zipcodeExpression options:0 error:NULL];

    NSTextCheckingResult *match = [regex firstMatchInString:ZipCodeTextField.text options:0 range:NSMakeRange(0, [ZipCodeTextField.text length])];
    if (match)
    {
       returnValue = true;
    }
   return returnValue;
 } 
```

仅列出所有州和缩写词并仅比较用户输入以检查匹配是否很常见？这似乎很多。

我想我正在寻找替代品。我还听说过一些框架，当用户输入邮政编码时，会自动生成城市和州。有谁知道这样的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:27:00.290

我在您的应用程序中预先加载了州名和缩写的简单 plist 文件就足够简单了。您的正则表达式将验证字符串是否代表有效的邮政编码。

如果您需要实际验证邮政编码和州属是否匹配，那将需要更多数据。

快速的谷歌搜索应该会显示一些您可以用来从邮政编码中获取状态的网络服务。邮政编码有时会更改（至少添加新的）。您可以在您的应用程序中提供州/邮政编码数据库文件。但是您需要一种方法来不时更新数据库，而无需提交应用程序的更新。

更新：快速浏览一下[Wikipedia 邮政编码页面](http://en.wikipedia.org/wiki/ZIP_code)会发现，一些邮政编码跨越多个州。

# python - 在 Python 中查找英文维基百科中两篇文章之间的最短路径

> ID：15990639
> 
> 赞同：11
> 
> 时间：2013-04-13T17:20:20.210
> 
> 标签：python, algorithm, dijkstra

问题：

> 在英文维基百科中找到两篇文章之间的最短路径。如果存在文章 C(i) 并且文章 A 中存在指向文章 C(1) 的链接，文章 C(1) 中存在指向文章 C(2) 的链接，则文章 A 和 B 之间存在路径，.. .，在文章 C(n) 中是指向文章 B 的链接

我正在使用 Python。下载维基百科文章的网址：

1.  [http://en.wikipedia.org/wiki/Nazwa_artykułu](http://en.wikipedia.org/wiki/Nazwa_artyku%C5%82u)
2.  [http://en.wikipedia.org/w/index.php?title?Nazwa_artykułu&printable=yes](http://en.wikipedia.org/w/index.php?title?Nazwa_artyku%C5%82u&printable=yes)
3.  维基百科 API

我已经编辑了我的源代码，但是当我将这些文章包含在代码中时它仍然不起作用，谁能告诉我我在这里搞砸了什么？

这是我的代码：

```
import urllib2
import re
import xml.etree.ElementTree as ET

text = ET.fromstring(F_D.text.encode('UTF-8'))
text = ET.fromstring(P.text.encode('UTF-8'))
F_D=requests.get('http://en.wikipedia.org/wiki/Ant_colony_optimization_algorithms')
P=requests.get('http://en.wikipedia.org/wiki/Wikipedia:Unusual_articles')  
links = text.findall('.//*[@id=”mw-content-text”]/p/a')

links=E_D

E_D = graph_dict
E_D[start] = 0

for vertex in E_D:
    F_D[vertex] = E_D[vertex]
    if vertex == end: break

    for edge in graph[vertex]:
        path_distance = F_D[vertex] + graph[vertex][edge]
        if edge in F_D:
            if path_distance < F_D[edge]:
                #raise ValueError,
            elif edge not in E_D or path_distance < E_D[edge]:
                E_D[edge] = path_distance
                [edge] = vertex
return (F_D,P)

def Shortest_Path(graph,start,end):
  F_D,P = D_Algorithm(graph,start,end)
  path = []
  while 1:
    path.append(end)
    if end == start: break
    end = P[end]
  path.reverse()
  return path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:18:19.907

我们正在研究图探索……你为什么要考虑 Dijkstra 算法？？？恕我直言...改变方法。

首先，您需要一个好的启发式函数。对于您扩展的每个节点，您需要估计该节点与目标/目标节点的距离。现在......你如何计算启发式是这里真正的挑战。您可能会在当前 wiki 页面和您的目标页面之间进行关键字映射。匹配的百分比可能会为您提供估计值。或者...尝试猜测两个页面之间内容的相关性。我有一种预感......也许神经网络可以帮助你。但是，这也可能不表示最佳估计。我不确定。一旦找到合适的方法，请使用 A* 搜索算法。

搜索和探索启发式功能，不要去广度优先搜索，你最终会在广阔的维基百科世界中无处可去！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T19:59:01.553

鉴于维基百科上的文章数量，计算最短的时间将花费无法承受的时间（我的假设 - 我没有尝试过）。

真正的问题是在两篇文章之间找到一条可接受且有效的短路径。

处理此类问题的算法与[旅行商问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)有关。这可能是一个很好的起点。

IIRC google 或 yahoo bots 使用[Ant Colony 优化](http://en.wikipedia.org/wiki/Ant_colony_optimization_algorithms)来获得最短可接受的优化时间。您可以查看这个 SO 问题：[我在哪里可以了解有关“蚁群”优化的更多信息？](https://stackoverflow.com/questions/444671/where-can-i-learn-more-about-ant-colony-optimizations)

我个人也喜欢在一定时间内找到可接受的最优值的[遗传算法方法。](http://en.wikipedia.org/wiki/Genetic_algorithm)

我刚刚看过那张[图片](http://en.wikipedia.org/wiki/File:EnwikipediaGom.PNG)，它将 2013 年 en.wikipedia.com 的文章数量设置为 4.000.000。确实比我想象的要少得多。

**编辑**：我首先说这是一个 NP-Hard 问题，评论者解释说不是。

# java - Jlist 使用动作监听器更新内容

> ID：15990642
> 
> 赞同：0
> 
> 时间：2013-04-13T17:20:48.993
> 
> 标签：java, swing, actionlistener, jlist

我有一个包含两个面板的 Jframe。在一个名为“panelA”的面板中，用户通过从 JCombobox 中选择一个项目来选择一个类别，然后单击“更新按钮”。然后我有另一个名为“panelB”的面板，其中包含一个 Jlist，它显示了从“panelA”中选择的类别中的现有项目的列表。

我有一个模型类，它使用观察者模式执行应用程序的逻辑部分。在单击模型类的按钮后，我使用面板A 中的动作侦听器发送更改，模型类完成工作并准备一个包含过滤数据的列表。然后我需要一些如何在 panelB 上的 Jlist 内容上显示过滤数据。

现在我的问题是我不知道 Jlist 类的哪个方法更新了 Jlist 的内容。或者说我不知道​​Jlist类中的哪个方法改变了Jlist中的datalist。我只需要一个线索。抱歉，如果我的问题不专业，我对 Java 和编程很陌生。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:50:42.003

如果你想要一个可变大小`JList`，你应该用 初始化它`JList(ListModel)`，使用允许向列表添加新元素的列表模型（如[`DefaultListModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html)）。

然后你可以像这样添加新元素：

```
DefaultListModel model = (DefaultListModel)list.getModel();
model.addElement(element); 
```

如果您使用的是 Java 7，请使用泛型：

```
DefaultListModel<MyClass> model = (DefaultListModel<MyClass>)list.getModel();
model.addElement(element); 
```

`MyClass`列表元素的位置在哪里`class`。

# c++ - 模板和朋友运算符*

> ID：15990643
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:20:53.940
> 
> 标签：c++, templates, operators, friend

我有模板向量（我自己的模板不是 STL）。我有问题`friend operator*`。问题是结果是随机数而不是整数的乘积。

```
#include <iostream>
#include <limits>

using namespace std;

template<typename T,int Roz>
class Vector{
public:
T tab[Roz];
T get(int i)
{
    return tab[i];
}
void set(T val,int i)
{
    tab[i]=val;
}

friend Vector operator* (Vector & a, const int & b){
      Vector<T,Roz> w;

      for(int i=0;i<Roz;++i)
      {
          cout<<a.get(i)<<" ";
          w.set(i,a.get(i)*b);
      }
        cout<<endl;
      for(int i=0;i<Roz;++i)
      {
          cout<<w.get(i)<<endl;;
      }

      return w;
}
};

int main()
{
Vector<int,6> w;
w.set(2,0);
w.set(3,1);
w.set(5,2);
w.set(5,3);
w.set(5,4);
w.set(5,5);
cout<<w.get(0)<<" "<<w.get(1)<<" "<<w.get(2)<<" "<<w.get(3)<<" "<<w.get(4)<<" "<<w.get(5)<<endl;
Vector<int,6> zz=w*3;
cout<<w.get(0)<<" "<<w.get(1)<<" "<<w.get(2)<<" "<<w.get(3)<<" "<<w.get(4)<<" "<<w.get(5)<<endl;
cout<<w.get(0)<<" "<<w.get(1)<<" "<<w.get(2)<<" "<<w.get(3)<<" "<<w.get(4)<<" "<<w.get(5)<<endl;
cout<<zz.get(0)<<" "<<zz.get(1)<<" "<<zz.get(2)<<" "<<zz.get(3)<<" "<<zz.get(4)<<" "<<zz.get(5)<<endl;
return 0;
} 
```

对于超出输出值的代码是：

```
2 3 5 5 5 5 5

2 3 1 5 5 5 5 <----- one insted of five!! Is the same vector after multiply!

8 <---------- 2*3 is not 8

1976963470

1976963426 <--------n/c

2

0

0

2 3 1 5 5 5

2 3 1 5 5 5

8 1976963470 1976963426 2 0 0 
```

结果是随机数而不是向量。我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:24:33.700

你正在做：

```
w.set(i, a.get(i) * b) 
```

因此，您将索引作为第一个参数传递，将值作为第二个参数传递。但是您的函数`set()`声明为：

```
void set(T val, int i) 
```

其中第一个参数是值，第二个参数是位置。看起来你正在交换论点。

# doctrine-orm - 教义2安全

> ID：15990650
> 
> 赞同：1
> 
> 时间：2013-04-13T17:21:22.310
> 
> 标签：doctrine-orm, sql-injection

我使用 Doctrine2 ORM 在 Symfony2 框架中编写服务器应用程序。现在我需要保护我的数据库免受 SQL 注入。我读到了一点，我知道doctrine2prepared statements可以防止我的应用程序受到SQL注入攻击。但这对我来说是 100% 的吗？真的没有可能攻击我的服务器应用程序吗？如果有什么办法，我该如何防御呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:04:01.220

当您在任何地方继续使用 Doctrine 时，您的所有语句都将通过 Doctrine 得到保护。我认为没有人可以回答：“有 100% 的安全性”。

但是当有一个已知的与 Doctrine 相关的安全问题时，我很确定它会很快得到修复，因为有很多用户在使用它，并且有很多开发人员为它做出了贡献。

# excel - 我的查找文本匹配部分的公式有什么问题？

> ID：15990652
> 
> 赞同：0
> 
> 时间：2013-04-13T17:21:28.530
> 
> 标签：excel, formula

这个公式有什么问题？我一遍又一遍地尝试不同的公式，但我不知道我做错了什么。

`=IF(((ISERROR(INDEX(Voids!$B:$B,MATCH("*"&$A5,Voids!$A:$A),"",(INDEX(Voids!B:B,MATCH($A18&"*",Voids!A:A,2) ))`)

我正在一张纸上寻找部分匹配或半匹配的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:27:33.373

我假设你想要这样的东西

`=IF(ISERROR(VLOOKUP("*"&$A5,Voids!$A:$B,2,0)),"",VLOOKUP("*"&$A5,Voids!$A:$B,2,0))`

使用`"*"&$A5`意味着公式需要匹配A5在末尾的值，如果它可以在任何地方切换到`"*"&$A5&"*"`

如果您有 Excel 2007 或更高版本，您可以使用 IFERROR 来简化，即

`=IFERROR(VLOOKUP("*"&$A5,Voids!$A:$B,2,0),"")`

# php - 使用 PHP foreach 构建样式表

> ID：15990653
> 
> 赞同：3
> 
> 时间：2013-04-13T17:21:36.333
> 
> 标签：php, foreach

好的 - 所以我正在创建一个动态 CSS 样式表，我想用一个数组来设置它。

首先让我说我不是 PHP 专家，但我对它有一定的了解。

这是我非常基本的数组。

```
$visual_css = array (
    array(
        "selector"  => "body",
        "property"  => "background",
        "value"     => "#FFF",
        "property2" => "color",
        "value2"    => "#000",
        "type"      => "css"
    )
); 
```

所以我们有一个选择器和两个带值的属性。

我现在想创建样式表，但由于缺乏 PHP 知识，我遇到了问题。

```
foreach ($visual_css as $value) {
    switch ($value['type']) {
        case "css":

            // Open selector
            echo ( !empty($value['selector']) ? $value['selector'] . '{' : null );

            foreach ($value as $key => $item) {
                foreach ($value as $key2 => $item2) {
                    //Match only the id's against the key
                    if (preg_match('/^property/i', $key) && preg_match('/^value/i', $key2)) {
                        // First property
                        echo ( !empty($item) ? $item . ':' : null );
                            echo ( !empty($item2) ? $item2 . ';' : null );
                    }
                }

            }

            // Close selector
            echo ( !empty($value['selector']) ? '}' : null );

        break;
    }
} 
```

现在我知道这段代码不正确，因为它在样式表中输出以下内容：

```
body{background:#FFF;background:#000;color:#FFF;color:#000;} 
```

这是期望的结果：

```
body{background:#FFF;color:#000;} 
```

所以基本上，我希望能够创建无限数量的属性和值，并在它们后面加上一个递增的数字，并让代码把它写出来。

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T17:27:29.647

所以我的方法使用多维数组而不是平面数组将选择器的属性嵌套在子数组中。通过这种方式，您的方法更加简洁，首先循环遍历第一层，然后遍历每个父级的子级并为每个属性/值对组成 CSS。它还使迭代变得轻而易举，而不必检查键的值来定位您所在的对。如果你需要不同的输出格式，你的迭代代码可以决定，它应该被排除在结构之外

```
$visual_css = array (
    'body'  => array(
        'background'    => '#FFF',
        'color'         => '#000'
    )
);

$output = '';
foreach($visual_css as $k => $properties) {
    if(!count($properties))
        continue;

    $temporary_output = $k . ' {';

    $elements_added = 0;

    foreach($properties as $p => $v) {
        if(empty($v))
            continue;

        $elements_added++;

        $temporary_output .= $p . ': ' . $v . '; ';
    }

    $temporary_output .= "}\n";

    if($elements_added > 0)
        $output .= $temporary_output;
}

echo $output;
// body {background: #FFF; color: #000; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:32:41.063

在您的示例中，您在这段代码中循环了两次相同的数组：

```
foreach ($value as $key => $item) {
    foreach ($value as $key2 => $item2) { 
```

如果您以更合乎逻辑的方式构建数据，您也可以制作更简洁的循环代码。我建议您将具有每个属性和值的数组构造为单独的子数组，例如：

```
$visual_css = array(
    array(
        'selector' => 'body',
        'properties' => array(
            'background' => '#fff',
            'color' => '#000'
        )
    )
    // ... etc ...
); 
```

然后你可以像这样轻松地循环它：

```
foreach ($visual_css as $selector)
{
    echo $selector['selector'].' { ';
    foreach ($selector['properties'] as $name => $value)
    {
        echo $name.': '.$value.'; ';
    }
    echo ' } ';
} 
```

# python - tkinter：是否可以将来自不同 tkinter 程序的 GUI 连接在一起并轻松地在它们之间导航？

> ID：15990659
> 
> 赞同：2
> 
> 时间：2013-04-13T17:21:58.890
> 
> 标签：python, user-interface, tkinter

我想构建一些 tkinter GUI 应用程序，然后将它们水平或垂直堆叠在一起。我还想在它们连接后轻松浏览应用程序，以便我可以随时专注于它们。

我的一个想法是，我可以有一个像框架容器这样的网页，带有滚动条，然后将其他应用程序的 GUI 拖到其中，以便我可以滚动浏览它们。

要附加窗口，我知道也许我可以通过进程信息获取单个应用程序的窗口，但我只想确保是否有内置或更好的方法来做我想做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T18:26:39.333

看到您没有大写 tkinter，我将假设您正在使用 Python 3。如果是这样，我可以想到两个选项：使用 tkinter 框架/网格几何管理器放置每个小部件侧并排，并使用 tkinter.ttk Notebook 拥有多个应用程序选项卡。如果您在滚动部分上死心塌地，您也可以创建一个可滚动的 tkinter 框架，但从其他 Stackoverflow 页面看来，没有本地方法可以做到这一点。

[tkinter.ttk 笔记本示例](https://stackoverflow.com/questions/16514617/python-tkinter-notebook-widget)

# python - Python中的语法错误试图计算复杂的利息

> ID：15990660
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:22:01.240
> 
> 标签：python

在这里，我有以下尝试以计算复杂的利息和抵押贷款利息为例。但是，它在 TotalMonthsMortgage = TotalMonthsMortgage - 1.0 上给出了语法错误，标记第一个 TotalMonthsMortgage / 左侧的那个 / 如果我引用它，它标记下一行 AlreadyPaidAmount = AlreadyPaidAmount+TotalAmountMortgage/TotalMonthsMortgage 标记左侧的 AlreadyPaidAmount。我做错了什么，因为我自己找不到错误？

```
## Complicated interest is the bank interest for example charged for mortgage loans

TotalAmountMortgage = float(raw_input('Enter the total amount of the mortgage to be taken:')) ##this is Principal
TotalYearsMortgage = float(raw_input('Enter the number of total years of the mortgage to be taken:'))
TotalMonthsMortgage = float(TotalYearsMortgage*12.0)
TotalYearsFixedInterest = float(raw_input('Enter the number of years with fixed interest mortgage to be taken:'))
TotalMonthsFixedInterest = 12.0*TotalYearsFixedInterest
FixedInterest = float(raw_input('Enter fixed interest for the mortgage to be taken:'))
FloatingInterest =  float(raw_input('Enter floating interest for the mortgage to be taken:'))
PoolInterestPaid = 0.0
MonthlyPayment = 0.0
AlreadyPaidAmount = 0.0
FixedPayment = float(TotalAmountMortgage/TotalMonthsMortgage)
TotalPayment = float
while (TotalMonthsMortgage-TotalMonthsFixedInterest)>0:
   MonthlyPayment = FixedPayment+(TotalAmountMortgage-((FixedPayment*TotalMonthsFixedInterest+AlreadyPaidAmount))*FloatingInterest/1200
   TotalMonthsMortgage = TotalMonthsMortgage - 1.0
   AlreadyPaidAmount = AlreadyPaidAmount+TotalAmountMortgage/TotalMonthsMortgage
TotalPayment = (TotalAmountMortgage*FixedInterest*TotalMonthsFixedInterest)/TotalMonthsMortgage+(TotalAmountMortgage*TotalMonthsFixedInterest)/TotalMonthsMortgage+PoolInterestPaid
print TotalPayment                                              ##This is the total amount to be paid
print (TotalPayment - TotalAmountMortgage)                      ##This is the amount of intererst to be paid over time
print (TotalPayment - TotalAmountMortgage)/TotalMonthsMortgage  ##This is the amount of monthly payment 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:23:47.483

前一行的括号太多，最后可能也需要一个：

```
MonthlyPayment = FixedPayment + (
    TotalAmountMortgage - (
         (FixedPayment * TotalMonthsFixedInterest + AlreadyPaidAmount)
    ) * FloatingInterest / 1200)
         ----------------------^ 
```

为了说明问题，我不得不将这条线分成多行，您可能希望这样做以至少使您的代码具有可读性。

因为 Python*允许*您在使用括号时将表达式拆分为多行，所以 Python 无法检测到您何时*忘记*了右括号，直到下一行代码。这同样适用于方括号 ( `[]`) 和花括号 ( `{}`)。

因此，当您遇到语法错误时，经验法则是也查看*前一行。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:24:10.213

您在这一行缺少一个括号：

```
 MonthlyPayment = FixedPayment+(TotalAmountMortgage-((FixedPayment*TotalMonthsFixedInterest+AlreadyPaidAmount))*FloatingInterest/1200 
```

最后放一个近乎的括号，你应该很高兴。

# android - Android：保存在多项选择列表视图中选择的项目

> ID：15990664
> 
> 赞同：0
> 
> 时间：2013-04-13T17:22:22.720
> 
> 标签：android, listview

我试图了解从该代码中保存所选列表视图项的位置。使用对话框，您有一个“确定/取消”按钮选项，这可能与列表一起使用吗？理想情况下，我将在提交时将来自四个不同列表的数据存储到数据库中。在下图中，我想将前三个项目保存到数据库中，甚至是一个数组。

```
package com.example.lifebyfourlists;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends ListActivity{
    String [] seven = { 
            "Dark Leafy Greens" , 
            "Nuts", 
            "Carrots",
            "Green Tea", 
            "Whole Grains", 
            "Fruits"};

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        ListView lstView = getListView();
        lstView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        lstView.setTextFilterEnabled(true);
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, seven));
    }

    public void onListItemClick(ListView parent, View v, int position, long id){
        Toast.makeText(this, "You have selected " + seven[position], Toast.LENGTH_SHORT).show();
    }
} 
```

![截屏](https://i.stack.imgur.com/q3ldB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:29:19.497

> 我试图了解从该代码中保存所选列表视图项的位置。使用对话框，您有一个“确定/取消”按钮选项，这可能与列表一起使用吗？

您可以使用[`getCheckedItemIds()`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemIds%28%29)或编写自定义适配器来跟踪选定的行。

# elasticsearch - 如何从 ElasticSearch 中获取详细的结果输出

> ID：15990665
> 
> 赞同：0
> 
> 时间：2013-04-13T17:22:27.973
> 
> 标签：elasticsearch, dsl

当我做这样的查询时：

```
curl 'http://localhost:9200/xenforo/_search?q=message:test' 
```

我得到以下结果：

```
{
    "took": 3,
    "timed_out": false,
    "_shards": {
        "total": 5,
        "successful": 5,
        "failed": 0
    },
    "hits": {
        "total": 1,
        "max_score": 12.816886,
        "hits": [
            {
                "_index": "xenforo",
                "_type": "post",
                "_id": "1778114",
                "_score": 12.816886
            }
        ]
    }
} 
```

显示了重要的 _id，但我将如何获得更多信息，如日期、用户和节点信息。

这是我的一些映射信息，我认为重要的部分显示：

```
curl -X GET 'http://localhost:9200/xenforo/_mapping?pretty=true'
{
  "xenforo113" : {
    "post" : {
      "_source" : {
        "enabled" : false
      },
      "properties" : {
        "date" : {
          "type" : "long",
          "store" : "yes"
        },
        "discussion_id" : {
          "type" : "long",
          "store" : "yes"
        },
        "message" : {
          "type" : "string"
        },
        "node" : {
          "type" : "long"
        },
        "thread" : {
          "type" : "long"
        },
        "title" : {
          "type" : "string"
        },
        "user" : {
          "type" : "long",
          "store" : "yes"
        }
      }
    }, 
```

我假设我需要进行 DSL 查询，但我不知道哪个命令会在结果中显示我想要的其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:46:04.327

由于您已禁用 _source，因此您必须要求提供明确的字段：

```
curl 'http://localhost:9200/xenforo/_search -d '{
    "fields" : ["user", "date", "node"],
    "query" : {
        "match" : { "message" : "test" }
    }
}' 
```

请参阅[文档](http://www.elasticsearch.org/guide/reference/api/search/fields/)。

# list - 仅删除唯一元素

> ID：15990666
> 
> 赞同：4
> 
> 时间：2013-04-13T17:22:30.557
> 
> 标签：list, prolog, prolog-dif

有很多关于如何删除重复和类似问题的资源，但我似乎无法找到任何关于删除独特元素的资源。我正在使用 SWI-Prolog，但我不想使用内置插件来实现这一点。

也就是说，调用`remove_unique([1, 2, 2, 3, 4, 5, 7, 6, 7], X).`应该很高兴导致`X = [2, 2, 7, 7]`.

显而易见的解决方案是

```
count(_, [], 0) :- !.
count(E, [E | Es], A) :-
  S is A + 1,
  count(E, Es, S).
count(E, [_ | Es], A) :-
  count(E, Es, A).

is_unique(E, Xs) :-
  count(E, Xs, 1).

remove_unique(L, R) :- remove_unique(L, L, R).
remove_unique([], _, []) :- !.
remove_unique([X | Xs], O, R) :-
  is_unique(X, O), !,
  remove_unique(Xs, O, R).
remove_unique([X | Xs], O, [X | R]) :-
  remove_unique(Xs, O, R). 
```

应该很快就会明白为什么这不是一个理想的解决方案：`count`is `O(n)`and so is `is_unique`as it just uses `count`. `fail`当我们找到多个元素但最坏的情况仍然是 时，我可以通过 ing 来改进这一点`O(n)`。

那么我们来`remove_unique`。对于每个元素，我们检查当前元素是否`is_unique`在`O`. 如果测试失败，该元素将被添加到下一个分支的结果列表中。运行中`O(n²)`，我们得到了很多推论。虽然我认为我们不能在最坏的情况下加快速度，但我们能比这种幼稚的解决方案做得更好吗？我可以清楚地看到的唯一改进是`count`一旦识别出 >1 个元素就更改为失败的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-04T09:12:11.963

与and[`tpartition/4`](https://stackoverflow.com/a/29867514/4609915)一起使用 ，我们定义如下：[`if_/3`](https://stackoverflow.com/a/27358600/4609915)[`(=)/3`](https://stackoverflow.com/a/27358600/4609915)`remove_unique/2`

```
删除唯一（[]，[]）。
remove_unique([E|Xs0], Ys0) :-
   tpartition ( = (E), Xs0, Es, Xs),
    if_ (Es = [], Ys0 = Ys, append ([E|Es], Ys, Ys0)),
   remove_unique(Xs, Ys)。

```

这是 OP 给出的示例查询：

```
?- remove_unique([1,2,2,3,4,5,7,6,7], Xs). 
Xs = [2,2,7,7].                       % succeeds deterministically 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:28:08.783

只要您不知道列表以任何方式排序，并且您想保持非唯一元素的顺序，在我看来您无法避免进行两次传递：首先计算出现次数，然后选择只有重复的元素。

如果您使用（自平衡？）二叉树在第二遍期间计算出现次数和查找怎么办？绝对不是 O(n²)，至少...

# codeblocks - 在代码块中构建 pjsip 项目时出现此错误

> ID：15990670
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:23:08.107
> 
> 标签：codeblocks, pjsip

> gcc -Wall -g -c /Users/prateek/Documents/pjsip/main.c -o obj/Debug/main.o g++ -o bin/Debug/pjsip obj/Debug/main.o
> 架构x86_64的未定义符号：“_hex_string_to_octet_string”，引用自：main.o中的_main“_pj_caching_pool_destroy”，引用自：main.o中的_main“_pj_caching_pool_init”，引用自：main.o中的_main“_pj_getopt_long”，引用自：_get_snd_options在 main.o 中 _main 在 main.o "_pj_gettimeofday" 中，引用自：main.o "_pj_inet_ntoa" 中的 _print_stream_stat，引用自：main.o "_pj_init" 中的 _main，引用自：main.o "_pj_log_3" 中的 _main，引用来自：main.o 中的 _app_perror main.o 中的 _get_snd_options main.o 中的 _dump_pool_usage "_pj_log_get_level"，引用自：main 中的 _app_perror。o main.o 中的_get_snd_options main.o "_pj_ntohs" 中的_dump_pool_usage，引用自：main.o 中的_main "_pj_optarg"，引用自：main.o 中的_get_snd_options main.o 中的_main "_pj_optind"，引用自：main 中的_get_snd_options .o _main in main.o "_pj_optopt"，引用自：_get_snd_options in main.o "_pj_pool_create"，引用自：_main in main.o "_pj_pool_factory_default_policy"，引用自：_main in main.o "_pj_pool_get_capacity"，引用自： main.o 中的_dump_pool_usage "_pj_pool_get_used_size"，引用自：main.o 中的_dump_pool_usage "_pj_pool_release"，引用自：main.o 中的_main"_pj_rand”，引用自：main.o 中的_create_stream “_pj_shutdown”，引用自：main.o 中的_main “_pj_sockaddr_in_init”，引用自：main.o 中的_create_stream _main.o 中的_main “_pj_str”，引用自：main 中的_create_stream .o _main in main.o "_pj_strerror"，引用自：_app_perror in main.o "_pj_time_val_normalize"，引用自：_print_stream_stat in main.o "_pjmedia_codec_mgr_find_codecs_by_id"，引用自：_main in main.o "_pjmedia_codec_mgr_get_codec_info"，引用自： _main in main.o "_pjmedia_codec_mgr_get_default_param"，引用自：_main in main.o "_pjmedia_codec_register_audio_codecs"，引用自：main.o "_pjmedia_endpt_create" 中的_init_codecs，引用自：main.o "_pjmedia_endpt_destroy" 中的_main，引用自：main.o "_pjmedia_endpt_get_codec_mgr" 中的_main，引用自：main.o "_pjmedia_master_port_create" 中的_main，引用自: _main in main.o "_pjmedia_master_port_destroy"，引用自：_main in main.o "_pjmedia_master_port_start"，引用自：_main in main.o "_pjmedia_port_destroy"，引用自：_main in main.o "_pjmedia_snd_port_connect"，引用自：_main在main.o“_pjmedia_snd_port_create”中，引用自：main.o中的_main“_pjmedia_snd_port_create_player”，引用自：main.o 中的_main "_pjmedia_snd_port_create_rec"，引用自：main.o 中的_main "_pjmedia_snd_port_destroy"，引用自：main.o 中的_main "_pjmedia_stream_create"，引用自：main.o 中的_create_stream "_pjmedia_stream_destroy"，引用自: _main in main.o "_pjmedia_stream_get_port"，引用自： _main in main.o _print_stream_stat in main.o "_pjmedia_stream_get_stat"，引用自： _print_stream_stat in main.o "_pjmedia_stream_get_transport"，引用自： _main in main.o "_pjmedia_stream_start" ，引用自：main.o 中的_main "_pjmedia_transport_srtp_create"，引用自：_create_stream in main.o "_pjmedia_transport_srtp_start"，引用自：_create_stream in main.o "_pjmedia_transport_udp_create"，引用自：_create_stream in main.o "_pjmedia_wav_player_port_create"，引用自：_main in main.o "_pjmedia_wav_writer_port_create"，引用自：_main in main.o ld：未找到架构 x86_64 collect2 的符号：ld 返回 1 个退出状态main.o ld 中的 _main：未找到体系结构 x86_64 collect2 的符号：ld 返回 1 个退出状态main.o ld 中的 _main：未找到体系结构 x86_64 collect2 的符号：ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:28:37.640

好像您忘记链接到某个库。您应该在“构建选项”->“链接器设置”中告诉链接器有关此库的信息。

我没有你的代码，所以我只能猜测，但我认为你正在尝试使用 pjmedia 而不链接到它。

# c - 如何在 C 中将 char* 拆分为子字符串？

> ID：15990680
> 
> 赞同：2
> 
> 时间：2013-04-13T17:23:44.653
> 
> 标签：c, string, split, char, substring

我有这样的文字：

```
char* str="Hi all.\nMy name is Matteo.\n\nHow are you?" 
```

我想通过 "\n\n" 将字符串拆分为这样的数组：

```
char* array[3];
array[0]="Hi all.\nMy name is Matteo."
array[1]="How are you?"
array[2]=NULL 
```

我已经尝试了 strtok 函数，但它没有正确拆分字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:00:16.817

```
#include <stdio.h>
#include <string.h>

int main(){
    char *str="Hi all.\nMy name is Matteo.\n\nHow are you?";
    char *array[3];
    char *ptop, *pend;
    char wk[1024];//char *wk=malloc(sizeof(char)*(strlen(str)+3));
    int i, size = sizeof(array)/sizeof(char*);
/*
array[0]="Hi all.\nMy name is Matteo."
array[1]="How are you?"
array[2]=NULL
*/
    strcpy(wk, str);
    strcat(wk, "\n\n");
    for(i=0, ptop=wk;i<size;++i){
        if(NULL!=(pend=strstr(ptop, "\n\n"))){
            *pend='\0';
            array[i]=strdup(ptop);
            ptop=pend+2;
        } else {
            array[i]=NULL;
            break;
        }
    }
    for(i = 0;i<size;++i)
        printf("array[%d]=\"%s\"\n", i, array[i]);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:30:33.830

strtok() 函数适用于一*组*单字符分隔符。您的目标是用两个字符分隔符分隔，因此 strtok() 不适合。

您可以通过使用 strchr 查找换行符的循环扫描输入字符串，然后检查下一个字符是否也是换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T18:28:02.767

基于`strstr`函数的更通用的方法：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    char* str="Hi all.\nMy name is Matteo.\n\nHow are you?\n\nThanks";
    char **result = NULL;
    unsigned int index = 0;
    unsigned int i = 0;
    size_t size = 0;
    char *ptr, *pstr;
    ptr = NULL;
    pstr = str;

    while(pstr) {
        ptr = strstr(pstr, "\n\n");
        result = realloc(result, (index + 1) * sizeof(char *));
        size = strlen(pstr) - ((ptr)?strlen(ptr):0);
        result[index] = malloc(size * sizeof(char));
        strncpy(result[index], pstr, size);
        index++;
        if(ptr) {
            pstr = ptr + 2;
        } else {
            pstr = NULL;
        }
    } ;

    for(i = 0; i < index; i++) {
        printf("Array[%d] : >%s<\n", i, result[i]);
    }
    return 0;
} 
```

# firebase - Firebase 聊天 - 删除旧消息

> ID：15990681
> 
> 赞同：12
> 
> 时间：2013-04-13T17:23:47.407
> 
> 标签：firebase

我现在创建了一个只有 1 个房间、私人消息、审核和一切的聊天，一切都很好！当我测试聊天时，我意识到每次在聊天中输入的所有消息都已保存，如果你有很多人使用聊天，它会很快在你的 Firebase 中占用相当多的空间。

为了给你一个我正在寻找的例子，让我向你展示我如何处理私人消息：

当 John 向 Bob 发送私人消息时，该消息将同时添加到 John 和 Bobs 的私人消息列表中，如下所示：

```
/private/John <-- Message appended here
/private/Bob <-- Message appended here 
```

这是一个火力基地如何在聊天中显示 2 条消息和 2 条私人消息的示例：

```
{
  "chat" : {
    "516993ddeea4f" : {
      "string" : "Some message here",
      "time" : "Sat 13th - 18:20:29",
      "username" : "test",
    },
    "516993e241d1c" : {
      "string" : "another message here",
      "time" : "Sat 13th - 18:20:34",
      "username" : "Test2",
    }
  },
  "private" : {
    "test" : {
      "516993f1dff57" : {
        "string" : "Test PM reply!",
        "time" : "Sat 13th - 18:20:49",
        "username" : "Test2",
      },
      "516993eb4ec59" : {
        "string" : "Test private message!",
        "time" : "Sat 13th - 18:20:43",
        "username" : "test",
      }
    },
    "Test2" : {
      "516993f26dbe4" : {
        "string" : "Test PM reply!",
        "time" : "Sat 13th - 18:20:50",
        "username" : "Test2",
      },
      "516993eab8a55" : {
        "string" : "Test private message!",
        "time" : "Sat 13th - 18:20:42",
        "username" : "test",
      }
    }
  }
} 
```

反过来也是如此。现在，如果 Bob 在哪里断开连接，Bob 的私人消息列表将被删除，但 John 仍然能够看到他与 Bob 的对话，因为他获得了列表中所有消息的副本。如果 John 在 Bob 之后断开连接，Firebase 将被清理，他们的对话将不再存储。

有没有办法通过常规聊天来实现这样的目标？向所有使用聊天的用户推送消息似乎不是一个好的解决方案（？）。或者是否有可能以某种方式使 Firebase 仅保留最新的 100 条消息？

我希望这是有道理的！

亲切的问候

附言。非常感谢 Firebase 团队迄今为止提供的所有帮助，我非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T03:47:21.733

有几种不同的方法可以解决这个问题，有些方法比其他方法更复杂。最简单的解决方案是让每个用户只阅读最新的 100 条消息：

```
var messagesRef = new Firebase("https://<example>.firebaseio.com/message").limit(100);
messagesRef.on("child_added", function(snap) {
  // render new chat message.
});
messagesRef.on("child_removed", function(snap) {
  // optionally remove this chat message from DOM
  // if you only want last 100 messages displayed.
}); 
```

您的消息列表仍将包含所有消息，但不会影响性能，因为每个客户端只要求最后 100 条消息。另外，如果要清理旧数据，最好将每条消息的优先级设置为消息发送时间的时间戳。然后，您删除所有超过 2 天的消息：

```
var timestamp = new Date();
timestamp.setDate(timestamp.getDate()-2);
messagesRef.endAt(timestamp).on("child_added", function(snap) {
  snap.ref().remove();
}); 
```

希望这可以帮助！

# jquery - jquery 和 coffeescript .keyup 触发器

> ID：15990683
> 
> 赞同：0
> 
> 时间：2013-04-13T17:23:52.403
> 
> 标签：jquery, coffeescript

尝试使用 jQuery（最好是 Coffeescript）更改值`.keyup`以`#submitter_email`拥有`#submitter_first_name + "." + #submitter_last_name`.

只是为了清楚起见：
当`#submitter_first_name`value = "Bob" 和
When `#submitter_last_name`value = "Evans" 然后
`#submitter_email`value = "Bob.Evans"

对不起，伙计们-这里的问题是如何做到这一点？

这是我提出的在逻辑上对我有意义的代码，但显然不正确：

```
jQuery ->
a = $("#submitter_first_name").val
b = $("#submitter_last_name").val
c = $("#submitter_email").val
a.keyup, b.keyup ->
c.val a + "." + b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:27:57.263

您正在尝试将事件绑定到这些输入的值。尝试这个：

```
jQuery ->
    a = $("#submitter_first_name")
    b = $("#submitter_last_name")
    c = $("#submitter_email")

    a.add(b).keyup -> (
        c.val a.val() + "." + b.val()
    ) 
```

这个小提琴适用于上述咖啡脚本生成的代码。[http://jsfiddle.net/yuHbp/](http://jsfiddle.net/yuHbp/)。

# objective-c - 计算所有可能的数字组合

> ID：15990684
> 
> 赞同：0
> 
> 时间：2013-04-13T17:24:09.177
> 
> 标签：objective-c

我有 9 个标记为 1-9 的图块，并带有相应的值。牌 1=1，牌 6=6，等等。用户可以按下等于骰子总和的牌。当他们按下确认移动时，那些故事就不能再使用了。

我需要计算每个可能的数字组合，以检查用户是否可以再次访问。目前我正在这样计算它，但我确信必须有更好的方法。 `allTiles`包含仍可用于计算的图块。

检查所有组合的最佳方法是什么？

```
- (void) getCombinations {

NSMutableArray *combinations = [[NSMutableArray alloc] init];

for (int i = 0; i < [allTiles count]; i++) {
    for (int j = i + 1; j < [allTiles count]; j++) {
        for (int k = i+2; k < [allTiles count]; k++) {
            TileView *first = [allTiles objectAtIndex:i];
            TileView *second = [allTiles objectAtIndex:j];
            TileView *third = [allTiles objectAtIndex:k];
            NSNumber *total = [NSNumber numberWithInt:first.getTileValue + second.getTileValue];
            NSNumber *total2 = [NSNumber numberWithInt:
                                first.getTileValue +
                                second.getTileValue +
                                third.getTileValue];
            [combinations addObject:[NSNumber numberWithInt:first.getTileValue]];
            [combinations addObject:[NSNumber numberWithInt:second.getTileValue]];
            [combinations addObject:[NSNumber numberWithInt:third.getTileValue]];
            [combinations addObject:total];
            [combinations addObject:total2];
        }
    }
}
if ([combinations containsObject:[NSNumber numberWithInt:[self diceTotal]]]) {
    NSLog(@"STILL COMBINATION AVAILABLE");
}
else {
    NSString *message = [NSString stringWithFormat:@"Your score: %i", player1Score];
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"No more combinations left."
                          message: message
                          delegate:self
                          cancelButtonTitle:@"Go to player2"
                          otherButtonTitles: nil];
    [alert show];
    [alert release];
}
} 
```

这是我的方法不起作用的场景之一的屏幕截图。 ![在此处输入图像描述](https://i.stack.imgur.com/bMo47.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T18:44:12.000

在您的示例中，玩家可以使用四个图块。是否包含瓦片是二元选择（是或否），在这个例子中有 4 个这样的选择，因此有 2×2×2×2 = 2 ⁴种可能的瓦片组合。通常，有 2 ^(*n 个*)组合，其中有*n 个*可用的图块。

检查总和为目标的组合的最简单方法是简单地枚举从 0 到 2 ^(*n*)的整数。对于每个整数*i*，以二进制形式写入*i*并将对应于二进制表示的 1 的图块的图块值相加。

我们将在本地数组中缓存 tile 值，以避免`tileValue`一遍又一遍地发送消息。

```
static int selectedNumbersSum(unsigned int selector, int const *numbers) {
    int sum = 0;
    for (int i = 0; selector != 0; i += 1, selector >>= 1) {
        if (selector & 1) {
            sum += numbers[i];
        }
    }
    return sum;
}

static BOOL tilesCanMakeTarget(NSArray *tiles, int target) {
    NSUInteger count = tiles.count;
    int numbers[count];
    for (int i = 0; i < count; ++i) {
        numbers[i] = [tiles[i] tileValue];
    }

    for (unsigned int step = 0, maxStep = 1 << count; step < maxStep; ++step) {
        if (selectedNumbersSum(step, numbers) == target)
            return YES;
    }
    return NO;
}

- (void)checkForEndOfPlayer1Turn {
    if (tilesCanMakeTarget(allTiles, self.diceTotal)) {
        NSLog(@"STILL COMBINATION AVAILABLE");
    } else {
        NSString *message = [NSString stringWithFormat:@"Your score: %i",
            player1Score];
        UIAlertView *alert = [[UIAlertView alloc]
            initWithTitle:@"No more combinations left."
            message:message delegate:self cancelButtonTitle:@"Go to player 2"
            otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
} 
```

顺便说一句，我们通常不以`get`. 您的`getCombinations`方法可能应该被调用`checkCombinations`（或类似的方法），因为它甚至不是吸气剂。你的`getTileValue`方法应该被调用`tileValue`。

# asp.net - 如何在 asp.net 中只显示时间？

> ID：15990688
> 
> 赞同：-2
> 
> 时间：2013-04-13T17:24:37.620
> 
> 标签：asp.net, vb.net, time

这是我现在的代码：

```
Sub Page_Load
    lbl1.Text="The date and time is " & now()
End Sub 
```

我想修改`now()`为只显示时间，不显示日期。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:22:06.687

应该是

```
Sub Page_Load
    lbl1.Text = String.Format("The date and time is {0:t}", DateTime.Now)
End Sub 
```

或`{0:T}`用于“长时间模式”。[这是一个模式列表](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

# c++ - std::thread 为什么对象被复制两次？

> ID：15990689
> 
> 赞同：6
> 
> 时间：2013-04-13T17:24:43.700
> 
> 标签：c++, c++11

为什么在下面的示例代码中，对象被复制了两次？根据线程类的文档构造函数将所有参数复制到线程本地存储，因此我们有理由进行第一次复制。第二个呢？

```
class A {
public:
    A() {cout << "[C]" << endl;}
    ~A() {cout << "[~D]" << endl;}
    A(A const& src) {cout << "[COPY]" << endl;}
    A& operator=(A const& src) {cout << "[=}" << endl; return *this;}

    void operator() () {cout << "#" << endl;}
};

void foo()
{
    A a;
    thread t{a};
    t.join();
} 
```

上面的输出：

```
[C]
[COPY]
[COPY]
[~D]
#
[~D]
[~D] 
```

编辑：是的，添加移动构造函数后：

```
A(A && src) {cout << "[MOVE]" << endl;} 
```

输出是这样的：

```
[C]
[COPY]
[MOVE]
[~D]
#
[~D]
[~D] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:19:19.263

对于您想要移动或避免复制的任何内容，首选移动构造函数和`std::move`.

**但是为什么这不会自动发生在我身上？**

在 C++ 中移动是保守的。它通常只会在您明确编写`std::move()`. 这样做是因为移动语义如果超出非常明确的情况，可能会破坏旧代码。出于这个原因，自动移动通常仅限于非常谨慎的情况。

为了避免在这种情况下出现副本，您需要`a`通过 using来转移`std::move(a)`（即使将其传递给`std::thread`）。它第一次复制的原因是因为 std::thread 不能保证在您完成构造 std::thread 后该值将存在（并且您没有明确地将其移入）。因此，它会做安全的事情并制作副本（不获取您传入的内容的引用/指针并存储它：代码不知道您是否会使其保持活动状态）。

同时拥有一个移动构造函数和使用`std::move`将允许编译器最大限度地有效地移动你的结构。如果您使用 VC++（是否使用 CTP），则必须显式编写移动构造函数，否则 MSVC 将（甚至有时错误地）声明并使用 Copy 构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-13T14:56:09.700

该对象被复制两次，因为该对象无法*移动*。该标准不要求这样做，但这是合法行为。

实现内部发生的情况是，它似乎正在按照标准的要求对参数进行衰减复制。但它不会将 decay_copy 复制到最终目的地；它将它放入一些内部的，可能是堆栈的存储中。然后它将对象从该临时存储移动到线程内的最终位置。由于您的类型不可移动，因此它必须执行复制。

如果您使您的类型可移动，您会发现第二个副本变成了移动。

为什么一个实现会这样做，而不是直接复制到最终目的地？可能有许多依赖于实现的原因。在堆栈上构建一个函数+参数可能更简单`tuple`，然后将其移动到最终目的地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:07:25.417

尝试：线程 t{std::move(a)};

# asp.net - 如何在 IIS 7.5 上使用不同的绑定访问多个网站

> ID：15990690
> 
> 赞同：0
> 
> 时间：2013-04-13T17:24:45.813
> 
> 标签：asp.net, iis, iis-7, iis-6, iis-7.5

如何从我的 ipv4 地址访问托管在本地 IIS 7.5 上的不同网站（使用不同的绑定）？

我的 system32\drivers\etc\host 文件将绑定名称映射到 127.0.0.1

在 IIS 中，我有正常的“默认网站”。它的绑定主机名是空的，设置为所有未分配的 IP 地址和端口 80。在我的网络上，我可以使用服务器 ipv4 地址访问此站点，如下所示：`http://192.168.2.1/mySubSite/index.html`其中 mySubSite 是“默认网站”的子文件夹。我也可以使用本地访问它`http://localhost/mySubSite/index.html`

如果我使用与“默认网站”相同的绑定但使用主机名（例如“site2”）在 IIS 中设置第二个网站，我可以使用`http://site2/mySubSite/index.html`.

如何像使用 ip 地址访问“默认网站”一样访问网络上的第二个站点？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:52:31.153

最简单的方法是更改​​每个网站上的端口绑定。这需要最少的配置，您可以将网站放置在您想要的任何端口上（我推荐超过 1024 的端口......最大为 65000）

例如，您的默认站点将自动位于端口 80。将站点 2 放在端口 2000 上。然后您可以像上面一样访问您的默认站点，并且您可以使用类似的 url 访问站点 2，例如`http://192.168.2.1:2000/mySubSite/index.html`. 请注意，端口是在 url 中使用末尾的 :[port] 指定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-02T18:21:09.303

是的，您可以在同一个 IP 地址和端口上拥有多个站点。它被称为域名绑定。

打开 ISS 并转到您的第一个默认站点（一个可运行的站点），然后转到编辑绑定。默认情况下，您会看到它声明“http: Port 80 IP Address *”

注意主机名是空白的吗？在这里，您可以将域名绑定到该确切端口。在您的两个站点绑定上填写域名。这意味着当有人从那个确切的域名进来时，它也知道将流量转发到哪里。如果端口 80 入站不匹配这两个域名中的任何一个，它将默认为 w/e 站点没有绑定，例如“默认站点”。

# c - 按元素添加两个数组

> ID：15990692
> 
> 赞同：0
> 
> 时间：2013-04-13T17:24:51.303
> 
> 标签：c

```
{0, 0, 0, 1} + {5} = {5, 0, 0, 1} 
```

我想按照我上面在 ONE LOOP 中描述的方式添加这些数组的元素。我怎样才能做到这一点？我只能提出以下解决方案：

```
for(int i = 0; i < 4; i++)
{
   outcomes = a[i] + b[i];
} 
```

其中 a 和 b 是第一个数组，“结果”是结果数组。但这会中断程序的执行，因为数组的大小不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:22:17.947

1.  找到两个数组的长度。
2.  创建较长数组长度的“结果”数组，将较长数组的内容复制到它。

`

```
for(int i = 0; i < sizeof(smaller_array_length); i++)       
    { 

            outcomes[i] = a[i] + b[i]; 

    } 
```

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:31:21.040

将两个列表中较长的一个复制到您的结果列表（如果您可以覆盖较长的列表，则可以省略），然后遍历较短的列表并添加值。在下文中，我假设它`a`长于`b`：

```
memcpy(outcomes, a, LEN_A * sizeof(TYPE_OF_LIST_ELEMENTS);
for (i = 0; i < LEN_B; i++)
    outcomes[i] += b[i]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T18:31:01.057

根据您想要的结果的大小循环，然后测试以处理比任一（或两者）输入更长的情况：

```
for (int i = 0; i < LENGTH(outcomes); i++) {
    if (i < LENGTH(a)) {
        if (i < LENGTH(b) {
            outcomes[i] = a[i] + b[i];
        } else {
            outcomes[i] = a[i];
        }
    } else {
        if (i < LENGTH(b) {
            outcomes[i] = b[i];
        } else {
            outcomes[i] = 0;
        }
    }
} 
```

如果您知道某些情况不会发生，您可以忽略它们——因此，如果`LENGTH(outcomes) == max(LENGTH(a), LENGTH(b))`，您不需要最后一种情况`else`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T18:44:56.167

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define c2d(c) (c-'0')
#define d2c(c) (c+'0')

char* add(char *a, char *b){
    int alen, blen;
    int i, carry=0;
    char *wk;

    alen=strlen(a);
    blen=strlen(b);
    if(alen<blen){
        alen ^= blen;blen ^= alen;alen ^= blen;//swap
        wk = a ; a = b ; b = wk;
    }
    wk = (char*)malloc(sizeof(char)*(alen+2));
    wk[alen+1]=wk[alen]='\0';
    for(i=0;i<alen;++i){
        int sum = c2d(a[i])+(i<blen ? c2d(b[i]): 0)+carry;
        wk[i] = d2c(sum % 10);
        carry = sum / 10;
    }
    if(carry){
        wk[i++]='1';
    }
    return wk;
}

int main(){
    char *a1="0001";
    char *a2="5";
    char *a3="99";
    char *a4="02";
    char *a5="51";
    printf("{%s}+{%s}={%s}\n", a1, a2, add(a1,a2));
    printf("{%s}+{%s}={%s}\n", a2, a1, add(a2,a1));
    printf("{%s}+{%s}={%s}\n", a3, a3, add(a3,a3));
    printf("{%s}+{%s}={%s}\n", a4, a5, add(a4,a5));
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-13T17:28:39.523

首先将长数组的值复制到结果数组中，然后执行

```
for(int i = 0; i < shortArrayLength; i++)
    {
       outcomes[i] = a[i] + b[i];
    } 
```

# jquery - 画布保存图像和电子邮件

> ID：15990696
> 
> 赞同：0
> 
> 时间：2013-04-13T17:25:39.310
> 
> 标签：jquery, html, canvas, imaging

我们在“ [http://dev.ejuicysolutions.com/custom_shirt_designer/](http://dev.ejuicysolutions.com/custom_shirt_designer/) ”有一个定制产品设计工具。当用户完成文本格式等...他们将单击打印按钮，他们可以在其中进行打印，但我们需要将功能从打印扩展到“保存图像，如 Canvas 中所示”，然后通过电子邮件发送该图像。可以发送电子邮件，但我们面临的主要问题是图像被保存在服务器上，但所有其他格式（如文本）都没有被保存。任何一个脚本都只是使用样式放置文本等......在画布上方......任何想法，如何实现？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:36:14.133

如果我理解这一点，您需要将画布内容导出到图像，处于用户完成工作时的状态？画布内部有一个导出功能。canvas.toDataURL()。这样你得到一个base64图像，默认是png格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:16:54.890

看起来文本只是添加到画布顶部的 HTML，因此不会使用 .toDataURL() 进行编码

如果您使用 HTML 电子邮件，您可以保存 CSS / HTML，然后在 png 顶部重新应用它（将 png 设置为背景图像）

或者使用[画布文本](http://www.html5tutorial.info/html5-canvas-text.php)而不是 HTML，然后它将成为 .png 的一部分

# javascript - Javascript 画布未在 Firefox 中显示

> ID：15990698
> 
> 赞同：0
> 
> 时间：2013-04-13T17:25:42.583
> 
> 标签：javascript, firefox, html5-canvas

我曾几次遇到过这个问题，但我似乎无法找到可靠的答案或解决方案。

我创建了一个站点，它使用两个相互叠加的画布，它们在 Chrome 中正确显示，但在 Firefox 中只有一个画布会显示。这是我的代码：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">

var interval;
    var width, height;

// ------------- SETUP ----------------------    
    window.onload = function() {
        width = document.width;
        height = document.height;
    setupC1();
        setupC2();
}

function setupC1(){
    canvas1 = document.createElement("canvas");
    canvas1.width = document.width;
    canvas1.height = document.height;
        canvas1.style.position = "absolute";
        canvas1.style.top = "0px";
        canvas1.style.left = "0px";
        canvas1.style.zIndex = "-2";
    document.body.appendChild(canvas1);
    ctx = canvas1.getContext("2d");
        interval = setInterval(draw, 50);
}

    function setupC2(){
    canvas2 = document.createElement("canvas");
    canvas2.width = "399";
    canvas2.height = "274";
        canvas2.style.position = "absolute";
        canvas2.style.top = (window.innerHeight/2)-100 +"px";
        canvas2.style.left = (window.innerWidth/2)-200 +"px";
        canvas2.style.zIndex = "-1";
    document.body.appendChild(canvas2);
    ctx2 = canvas2.getContext("2d");
        interval = setInterval(gun, 50);
}

// ------------- DRAW ----------------------     
    function draw() {

    var x = Math.round(Math.random()*window.innerWidth);
    var y = Math.round(Math.random()*window.innerHeight);
    function rndColor() {
        return '#' + ('00000' + (Math.random() * 16777216 << 0).toString(16)).substr(-6);
    }
    //draw here

        ctx.strokeStyle=rndColor();

        ctx.beginPath();
        ctx.moveTo(window.innerWidth/2, window.innerHeight/2);
        ctx.lineTo(x, y);
        ctx.closePath();
        ctx.stroke();            

    }

function gun(){
    ctx2.fillStyle="#000000";
        ctx2.strokeStyle="#000000";
        ctx2.beginPath();
        ctx2.moveTo(51, 28);
        ctx2.lineTo(66, 28);
        ctx2.lineTo(71, 19);
        ctx2.lineTo(75, 19);
        ctx2.lineTo(77, 28);
        ctx2.lineTo(191, 28);
        ctx2.lineTo(191, 30);
        ctx2.lineTo(238, 30);
        ctx2.lineTo(238, 28);
        ctx2.lineTo(350, 28);
        ctx2.lineTo(355, 23);
        ctx2.lineTo(358, 28);
        ctx2.lineTo(368, 28);
        ctx2.lineTo(368, 36);
        ctx2.lineTo(373, 36);
        ctx2.lineTo(374, 59);
        ctx2.lineTo(368, 59);
        ctx2.lineTo(368, 69);
        ctx2.lineTo(371, 69);
        ctx2.lineTo(371, 77);
        ctx2.lineTo(368, 80);
        ctx2.lineTo(368, 95);
        ctx2.lineTo(265, 102);
        ctx2.lineTo(265, 153);
        ctx2.lineTo(164, 153);
        ctx2.lineTo(169, 141);
        ctx2.lineTo(249, 141);
        ctx2.lineTo(249, 103);
        ctx2.lineTo(198, 106);
        ctx2.bezierCurveTo(192, 106, 195, 135, 200, 137);
        ctx2.lineTo(194, 139);
        ctx2.bezierCurveTo(190, 136, 178, 108, 180, 106);
        ctx2.lineTo(169, 143);
        ctx2.lineTo(156, 156);
        ctx2.lineTo(157, 176);
        ctx2.lineTo(143, 190);
        ctx2.lineTo(144, 208);
        ctx2.lineTo(129, 222);
        ctx2.lineTo(129, 242);
        ctx2.lineTo(120, 242);
        ctx2.lineTo(120, 255);
        ctx2.lineTo(42, 246);
        ctx2.lineTo(48, 233);
        ctx2.lineTo(37, 231);
        ctx2.lineTo(25, 220);
        ctx2.lineTo(75, 113);
        ctx2.bezierCurveTo(75, 90, 55, 85, 46, 83);
        ctx2.closePath();
        ctx2.fill();
        ctx2.stroke();
}
</script>
</head>

<body>
</body>
</html> 
```

我觉得我可能听说过使用负 z-index 的潜在 Firefox 问题，这真的是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:06:54.180

规范中的文档对象没有`width`or`height`属性，因此`document.width`以 undefined 结尾，`document.height`. 因此，您将 canvas1 设置为宽度和高度为 0，这是 undefined 转换为的数字。

您可能想要使用[https://developer.mozilla.org/en-US/docs/DOM/document.width#Alternatives](https://developer.mozilla.org/en-US/docs/DOM/document.width#Alternatives)和[https://developer.mozilla.org/en-US/docs中列出的内容之一/DOM/document.height#Alternatives](https://developer.mozilla.org/en-US/docs/DOM/document.height#Alternatives)

# android - 是否可以在对话框中设置正负按钮？

> ID：15990699
> 
> 赞同：0
> 
> 时间：2013-04-13T17:25:50.760
> 
> 标签：android, button, dialog

我的 android 应用程序中有一个对话框，我想在对话框中设置正/负按钮。它是一个对话框，而不是一个警报对话框。我知道我实际上可以使用 AlertDialog，但我想知道在对话框中是否可以使用相同的方法。如果有可能，我感谢大家举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:34:34.430

你可以在对话框中添加任何你想要的东西。举个例子

```
dialog = new Dialog(this);
dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Custom Dialog");

Button dialog_btn = (Button) dialog.findViewById(R.id.dialog_button);
dialog_btn.setOnClickListener(new View.OnClickListener() 
{
    // TODO:
} 
```

这`custom_dialog`是具有按钮的对话框的自定义布局`dialog_button`。同样，您可以添加任何小部件并进行处理。

# javascript - 如何正确使用父元素

> ID：15990700
> 
> 赞同：0
> 
> 时间：2013-04-13T17:25:50.817
> 
> 标签：javascript, jquery, html

如何正确使用以下语法。访问顶级父标签的表单方法

我想做这样的事情

```
var a = ($(this).parent()).parent();
var form = $(a+" #modal-form-tag form"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:34:00.380

ID 必须是唯一的，所以就`$("#modal-form-tag form")`足够了。

如果您打算使用类来允许具有该标识符的多个元素，请尝试：

```
$(this.parentNode.parentNode).find(".modal-form-tag form") 
```

请注意，上面使用了一些[Vanilla JS](http://vanilla-js.com/)来避免额外的函数调用。

为了进一步扩展，如果你的容器有一些独特的特性，比如类名（对于这个例子，我假设`class="somecontainer"`），你可以这样做：

```
$(this).parent(".somecontainer").find(".modal-form-tag form") 
```

`parent`这将消除链接调用中涉及的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:30:48.660

`a.find('#modal-form-tag form')`?

# javascript - 是否可以在 javascript 应用程序中创建和管理多个DOMS？

> ID：15990701
> 
> 赞同：0
> 
> 时间：2013-04-13T17:25:55.580
> 
> 标签：javascript, dom, jquery-mobile, kendo-mobile

我们正在尝试混合像 JQuery Mobile 这样喜欢在运行时控制 DOM 的框架。

我们希望允许框架根据需要管理 DOM，但是当我们在 Javascript 应用程序中切换框架时，我们可以杀死以前的 DOM 并创建一个新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:30:39.683

奇怪的问题：p。好吧，可以创建一个能够管理所有内容的 javascript 框架。您只需要一个加载第一个文件的 index.html，不需要其他任何东西。javascript没有限制。首先，您只需要 document.createElement、node.appendChild 和 node.removeChild。我不知道这个答案是否对您有帮助，因为我真的不明白这里的问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:46:50.157

您可以使用[`jQuery.parseHTML()`](http://api.jquery.com/jQuery.parseHTML/)函数创建一组 DOM 元素，这些元素可以在某些时候插入（或不插入）到文档中。解析后的结构可以使用 jQuery 进行操作，也可以传递给其他库进行操作（尽管我不确定这有多简单，具体取决于您要使用的其他库......）。

# python - 使用 FileField 和 nginx 上传文件只会抛出错误？

> ID：15990716
> 
> 赞同：0
> 
> 时间：2013-04-13T17:27:56.677
> 
> 标签：python, django, nginx, uwsgi

我是 Django 新手，我正在学习如何使用 django 处理上传文件，我对文档做了同样的事情，但是我的 nginx 只是抛出了错误，

这是我的views.py：

```
@csrf_exempt
def upload_view(request):
    if request.method == 'POST':
        form = UploadItemForm(request.POST, request.FILES)
        if form.is_valid():
            return HttpResponse('successfully uploaded')
        else:
            return HttpResponse('upload failed')
else:
    if request.user.is_authenticated():
        form = UploadItemForm()
        return render(request, 
            'design/upload.html', 
            {'form': form,
            'username': request.user.username})
    else:
        return HttpResponse("you have to login") 
```

模型.py

```
class Item(models.Model):
    name = models.CharField(max_length = 100)
    description = models.TextField(max_length = 1000)
    uploadfile = models.FileField()

class UploadItemForm(ModelForm):
    class Meta:
        model = Item 
```

我的模板：

```
<form enctype="multipart/form-data" method="post" action="/design/">
 {% csrf_token %}
 {{ form.as_p }}

<input type="submit" value="upload" />
</form> 
```

如果我上传一些基于文本的文件（大小非常小），一切正常，当上传其他格式或大型 csv 文件时，代码失败

```
form = UploadItemForm(request.POST, request.FILES) 
```

nginx 说

> 抱歉，您要查找的页面目前不可用。请稍后再试。

我用的是nginx+uwsgi+django，那和uwsgi和nginx的设置有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:20:36.423

啊，我解决了。不知什么原因。似乎，当请求大小超过某个阈值时，nginx 会将数据放在 client_body_temp/ 目录中，出于某种原因（我不知道），我设置中的这个目录是 root 只读的？？？？更改权限，然后一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:29:00.523

有关其他信息：

```
client_max_body_size 4M; //4mb
default_type text/plain; //file format 
```

以下是函数列表：http: [//nginx.org/en/docs/http/ngx_http_core_module.html](http://nginx.org/en/docs/http/ngx_http_core_module.html)

另请阅读此论坛： http: [//forum.slicehost.com/index.php?p= /discussion/1714/nginx-413-when-uploading-file-1mb-or-larger/p1](http://forum.slicehost.com/index.php?p=/discussion/1714/nginx-413-when-uploading-file-1mb-or-larger/p1)

# java - 使用 Androids Google Maps API 查找路线

> ID：15990721
> 
> 赞同：9
> 
> 时间：2013-04-13T17:28:22.013
> 
> 标签：java, android, google-maps, google-maps-api-3, google-maps-api-2

我希望能够使用适用于 Android的**Google Maps API显示两个****用户定义的**地理点之间的路线。我还希望能够让用户选择要显示的路线类型，无论是步行、骑自行车、汽车等。此外，我希望能够计算使用这条路线所需的时间和距离。我尝试在网上搜索并查看其他 stackoverflow 问题，但无济于事。我该怎么办？我怎么能**编码**这个。

 ******// - - 编辑 - - //**

**我还想获取交通信息，例如繁忙的路线，拥堵等。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T08:31:44.890

这里有一些代码可以帮助你。

```
String url= 
"http://maps.googleapis.com/maps/api/directions/json?origin=" 
+ origin.latitude + "," + origin.longitude +"&destination=" 
+ destination.latitude + "," + destination.longitude + "&sensor=false"; 
```

要使用 androidhttpclient 获取数据，请执行以下操作：

```
HttpResponse response;
HttpGet request;
AndroidHttpClient client = AndroidHttpClient.newInstance("somename");

request = new HttpGet(url);
response = client.execute(request);

InputStream source = response.getEntity().getContent();
String returnValue = buildStringIOutils(source);

return returnValue; 
```

其中 buildStringIOUtils 是：

```
private String buildStringIOutils(InputStream is) {
    try {
        return IOUtils.toString(is, "UTF-8");
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

然后，您可以使用以下内容从 JSON 响应中提取实际的折线：

```
JSONObject result = new JSONObject(returnValue);
JSONArray routes = result.getJSONArray("routes");

                    long distanceForSegment = routes.getJSONObject(0).getJSONArray("legs").getJSONObject(0).getJSONObject("distance").getInt("value");

                    JSONArray steps = routes.getJSONObject(0).getJSONArray("legs")
                            .getJSONObject(0).getJSONArray("steps");

                    List<LatLng> lines = new ArrayList<LatLng>();

                    for(int i=0; i < steps.length(); i++) {
                        String polyline = steps.getJSONObject(i).getJSONObject("polyline").getString("points");

                        for(LatLng p : decodePolyline(polyline)) {
                            lines.add(p);
                        }
                    } 
```

其中方法 decodePolyline 是这样的：

```
 /** POLYLINE DECODER - http://jeffreysambells.com/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-java **/
    private List<LatLng> decodePolyline(String encoded) {

        List<LatLng> poly = new ArrayList<LatLng>();

        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng p = new LatLng((double) lat / 1E5, (double) lng / 1E5);
            poly.add(p);
        }

        return poly;
    } 
```

然后，您可以使用以下命令将折线添加到地图中：

```
Polyline polylineToAdd = mMap.addPolyline(new PolylineOptions().addAll(lines).width(3).color(Color.RED)); 
```

要更改模式，请将其添加到 url（请参阅[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)）：&mode=YOUR_MODE

驾驶（默认）指示使用道路网络的标准行车路线。

步行请求通过人行道和人行道（如果有）的步行路线。

骑自行车请求通过自行车道和首选街道（如果有）的自行车路线。

交通通过公共交通路线（如果可用）请求方向。

编辑：关于“我还想获取交通信息，例如繁忙的路线、拥堵等”。我还没有研究过这个，但我的代码应该能让你很好地开始。

编辑 2：在 google 方向 api 中找到：“对于行车路线：商业地图客户可以指定离开时间以接收考虑当前交通状况的行程持续时间。离开时间必须设置为当前时间的几分钟内。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-21T05:01:34.560

**使用 Wrapper 库的 Android Google Maps Routing 示例代码**

使用 Android Studio Gradle 入口：

```
compile 'com.github.jd-alexander:library:1.1.0' 
```

**MainActivity.java**

```
import android.Manifest;
import android.content.pm.PackageManager;
import android.graphics.Color;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.v4.app.ActivityCompat;
import android.support.v4.app.FragmentActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.directions.route.Route;
import com.directions.route.RouteException;
import com.directions.route.Routing;
import com.directions.route.RoutingListener;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.LatLngBounds;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
import com.google.android.gms.maps.model.Polyline;
import com.google.android.gms.maps.model.PolylineOptions;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class MainActivity extends FragmentActivity implements OnMapReadyCallback, LocationListener, GoogleMap.OnMarkerClickListener, RoutingListener {

    private GoogleMap mMap = null;
    private LocationManager locationManager = null;
    private FloatingActionButton fab = null;
    private TextView txtDistance, txtTime;

    //Global UI Map markers
    private Marker currentMarker = null;
    private Marker destMarker = null;
    private LatLng currentLatLng = null;
    private Polyline line = null;

    //Global flags
    private boolean firstRefresh = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
        Constants.POINT_DEST = new LatLng(18.758663, 73.382025);        //Lonavala destination.
        //Load the map fragment on UI
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
        txtDistance = (TextView)findViewById(R.id.txt_distance);
        txtTime = (TextView)findViewById(R.id.txt_time);
        fab = (FloatingActionButton)findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                MainActivity.this.getRoutingPath();
                Snackbar.make(v, "Fetching Route", Snackbar.LENGTH_SHORT).show();
            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        firstRefresh = true;
        //Ensure the GPS is ON and location permission enabled for the application.
        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (!PermissionCheck.getInstance().checkGPSPermission(this, locationManager)) {
            //GPS not enabled for the application.
        } else if (!PermissionCheck.getInstance().checkLocationPermission(this)) {
            //Location permission not given.
        } else {
            Toast.makeText(MainActivity.this, "Fetching Location", Toast.LENGTH_SHORT).show();
            try {
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 5000, 0, this);
            } catch(Exception e)
            {
                Toast.makeText(MainActivity.this, "ERROR: Cannot start location listener", Toast.LENGTH_SHORT).show();
            }
        }
    }

    @Override
    protected void onPause() {
        if (locationManager != null) {
            //Check needed in case of  API level 23.

            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            }
            try {
                locationManager.removeUpdates(this);
            } catch (Exception e) {
            }
        }
        locationManager = null;
        super.onPause();
    }

    @Override
    protected void onStop() {
        super.onStop();
    }

    @Override
    public void onMapReady(GoogleMap googleMap)
    {
        mMap = googleMap;
        //mMap.getUiSettings().setZoomControlsEnabled(true);
        mMap.getUiSettings().setCompassEnabled(true);
        mMap.getUiSettings().setAllGesturesEnabled(true);
        mMap.setOnMarkerClickListener(this);
    }

    /**
     * @desc LocationListener Interface Methods implemented.
     */

    @Override
    public void onLocationChanged(Location location)
    {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        currentLatLng = new LatLng(lat, lng);
        if(firstRefresh)
        {
            //Add Start Marker.
            currentMarker = mMap.addMarker(new MarkerOptions().position(currentLatLng).title("Current Position"));//.icon(BitmapDescriptorFactory.fromResource(R.drawable.location)));
            firstRefresh = false;
            destMarker = mMap.addMarker(new MarkerOptions().position(Constants.POINT_DEST).title("Destination"));//.icon(BitmapDescriptorFactory.fromResource(R.drawable.location)));
            mMap.moveCamera(CameraUpdateFactory.newLatLng(Constants.POINT_DEST));
            mMap.animateCamera(CameraUpdateFactory.zoomTo(15));
            getRoutingPath();
        }
        else
        {
            currentMarker.setPosition(currentLatLng);
        }
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onProviderDisabled(String provider) {}

    /**
     * @desc MapMarker Interface Methods Implemented.
     */

    @Override
    public boolean onMarkerClick(Marker marker)
    {
        if(marker.getTitle().contains("Destination"))
        {
            //Do some task on dest pin click
        }
        else if(marker.getTitle().contains("Current"))
        {
            //Do some task on current pin click
        }
        return false;
    }

    /**
     *@desc Routing Listener interface methods implemented.
     **/
    @Override
    public void onRoutingFailure(RouteException e)
    {
        Toast.makeText(MainActivity.this, "Routing Failed", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onRoutingStart() { }

    @Override
    public void onRoutingSuccess(ArrayList<Route> list, int i)
    {
        try
        {
            //Get all points and plot the polyLine route.
            List<LatLng> listPoints = list.get(0).getPoints();
            PolylineOptions options = new PolylineOptions().width(5).color(Color.BLUE).geodesic(true);
            Iterator<LatLng> iterator = listPoints.iterator();
            while(iterator.hasNext())
            {
                LatLng data = iterator.next();
                options.add(data);
            }

            //If line not null then remove old polyline routing.
            if(line != null)
            {
                line.remove();
            }
            line = mMap.addPolyline(options);

            //Show distance and duration.
            txtDistance.setText("Distance: " + list.get(0).getDistanceText());
            txtTime.setText("Duration: " + list.get(0).getDurationText());

            //Focus on map bounds
            mMap.moveCamera(CameraUpdateFactory.newLatLng(list.get(0).getLatLgnBounds().getCenter()));
            LatLngBounds.Builder builder = new LatLngBounds.Builder();
            builder.include(currentLatLng);
            builder.include(Constants.POINT_DEST);
            LatLngBounds bounds = builder.build();
            mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 50));
        }
        catch (Exception e) 
        {
            Toast.makeText(MainActivity.this, "EXCEPTION: Cannot parse routing response", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onRoutingCancelled() 
    {
        Toast.makeText(MainActivity.this, "Routing Cancelled", Toast.LENGTH_SHORT).show();
    }

    /**
     * @method getRoutingPath
     * @desc Method to draw the google routed path.
     */
    private void getRoutingPath()
    {
        try
        {
            //Do Routing
            Routing routing = new Routing.Builder()
                    .travelMode(Routing.TravelMode.DRIVING)
                    .withListener(this)
                    .waypoints(currentLatLng, Constants.POINT_DEST)
                    .build();
            routing.execute();
        }
        catch (Exception e)
        {
            Toast.makeText(MainActivity.this, "Unable to Route", Toast.LENGTH_SHORT).show();
        }
    }

} 
```

**常量.java**

```
/**
 * @class Constants
 * @desc Constant class for holding values at runtime.
 */
public class Constants
{

    //Map LatLong points
    public static LatLng POINT_DEST = null;

} 
```

**活动地图.xml**

```
<android.support.design.widget.CoordinatorLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:map="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"

android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/viewA"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.1"
        android:orientation="horizontal">

        <fragment
            android:id="@+id/map"
            android:name="com.google.android.gms.maps.SupportMapFragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:context="com.packagename.MainActivity" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/viewB"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.9"
        android:gravity="center|left"
        android:paddingLeft="20dp"
        android:background="#FFFFFF"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp"
            android:text="Distance ?"
            android:paddingTop="3dp"
            android:paddingLeft="3dp"
            android:paddingBottom="3dp"
            android:id="@+id/txt_distance" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="17dp"
            android:paddingLeft="3dp"
            android:text="Duration ?"
            android:id="@+id/txt_time" />

    </LinearLayout>

</LinearLayout>

<android.support.design.widget.FloatingActionButton
    android:id="@+id/fab"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="16dp"
    android:clickable="true"
    android:src="@android:drawable/ic_dialog_map"
    app:layout_anchor="@id/viewA"
    app:layout_anchorGravity="bottom|right|end"/>

</android.support.design.widget.CoordinatorLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T17:53:55.860

试试[Google Directions API](https://developers.google.com/maps/documentation/directions/?hl=de)。这是一项网络服务，它以 JSON 格式提供转弯指南，其中包含从 A 点到 B 点的汽车、公交或步行的所有信息。

遵循随机评论中的链接进行编码。****

# html - ul 的显示：inline-block 不工作和其他错误

> ID：15990723
> 
> 赞同：0
> 
> 时间：2013-04-13T17:28:26.920
> 
> 标签：html, css

我有这个 html 代码：

```
<header>
    <a href="index.html">Mira's place</a><br>
    <h2>&#8220;<span id="quote">If nothing, then this.</span>&#8221;</h2>
        <ul>
            <li><a href="#">Home</a>
            <li><a href="#">Games</a>
            <li><a href="#">Pixel Art</a>
            <li><a href="#">Contact</a>
        </ul>
</header> 
```

这个CSS

```
::selection {
    background: #D7DD22;
    }
::-moz-selection {
    background: #D7DD22;
}
html {
    background-color: #002240;
    font-family: "Geo", sans-serif;
    margin: 0;
}
header {
    background-color: #001629;
    margin: 0 -10px 0 -10px;
}
header a:first-child {
    color: #FF628C;
    font-size: 56px;
}
header h2 {
    color: #80FFBB;
}
ul {
    padding: 5px;
    background-color: #eee;
    display: inline-block;
}
p {
    color: white;
} 
```

这是我的 jsfiddle [http://jsfiddle.net/Xd7WF/1/](http://jsfiddle.net/Xd7WF/1/)。

我不明白为什么，但我`display: inline-block`的`ul`. 它不像预期的那样彼此相邻。我`first-child`的也不工作。它会影响其他`a`人的。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:30:30.220

您需要`inline-block;`在`<li>`元素上使用 display 代替

[http://jsfiddle.net/Xd7WF/2/](http://jsfiddle.net/Xd7WF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:32:39.527

您希望`<li>`元素内联，而不是`<ul>`. 因此，您将该值设置为`<li>`元素。

```
li {
    display: inline-block;
} 
```

# javascript - 使用 Jquery 的 .closest 访问音频元素不起作用？

> ID：15990727
> 
> 赞同：0
> 
> 时间：2013-04-13T17:28:42.753
> 
> 标签：javascript, jquery, html, audio

我使用`.each()`and在每个类元素之前`before()`自动插入一个带有类的音频元素以`'pipe1'`实现悬停效果，`'product_name'`因为单个音频元素不能重叠自身，因此每个按钮都需要自己的声音效果。

我知道插入有效，因为当我检查页面时，我看到了元素。直接访问时播放的元素，但现在使用`.closest()`它不起作用。任何帮助是极大的赞赏。

以下是我使用 Firefox 的“检查元素”生成的 HTML：

```
<audio class="pipe1">
  <source src="/frontshift/audio/pipe1.mp3"></source>
  <source src="/frontshift/audio/pipe1.ogg"></source>
</audio>
<span class="product_name">Product</span> 
```

我正在使用的所有代码都在相同的 .hover 效果中激活，即`$(".product_name").hover()`

以下代码成功播放音频：

```
$(".pipe1")[0].currentTime = .04;
$(".pipe1")[0].play(); 
```

以下代码不会：

```
$(this).closest(".pipe1").currentTime = .04;
$(this).closest(".pipe1").play(); 
```

以下警报出现未定义：

```
alert($(this).closest(".pipe1").attr("class")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T17:35:02.097

`.closest()`选择祖先，选择以前的兄弟使用`.prev()`

```
var audio = $(this).prev(".pipe1")[0];
audio.currentTime = .04;
audio.play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:35:14.573

您需要从 jQueryObject 获取 DOM 节点：

```
$(this).closest(".pipe1").get(0).currentTime = 0.4 
```

或使用类似数组的行为：

```
$(this).closest(".pipe1")[0].currentTime = 0.4 
```

您确定上下文 ( `this`) 是指音频标签内的元素吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:36:17.233

是的，你应该使用`$(this).prev('.pipe1');`

# math - 圈复杂度（Vg） - 最小或最小独立路径的最小数量？

> ID：15990729
> 
> 赞同：0
> 
> 时间：2013-04-13T17:28:53.963
> 
> 标签：math, graph, cyclomatic-complexity

我认为 Vg = 独立路径的最小数量，但今天我看到我的一位老师的演示，它说：Vg 等于或大于独立路径的数量。是真的？我确信在计算 cyclomatix 复杂度时，它始终是独立路径的最小可能数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:59:47.833

详细说明here

结构化测试：使用圈复杂度度量的测试方法

[http://hissa.nist.gov/HHRFdata/Artifacts/ITLdoc/235/title.htm](http://hissa.nist.gov/HHRFdata/Artifacts/ITLdoc/235/title.htm)

# sql-server - 使用 PK 和 FK 创建数据库和表

> ID：15990735
> 
> 赞同：0
> 
> 时间：2013-04-13T17:29:31.710
> 
> 标签：sql-server, sql-server-2008

在需要帮助时，我必须使用具有主键和外键的特定表构建一个新数据库。我还有一个插入 Microsoft SQL Server 查询文件 (.sql)，如下所示：

```
print('Insertion des données dans la table Candidats ....')
go
insert into Candidats values (1,10,1)
.......
insert into Candidats values (30,40,1)
go

print ('Insertion des données dans la table Partis ....')
go
insert into Partis values('Parti Liberal', 3000)
.......
insert into Partis values('Independant',100)
go

print('Insertion des données dans la table Resultats ....')
go
insert into Resultats values (1,1,500)
.......
insert into Resultats values (30,1,25)
go

print('Insertion des données dans la table Circonscriptions ....')
go
insert into Circonscriptions values ('Montreal', 3000, 4)
.......
insert into Circonscriptions values ('sabloVille', 1,null)
go

print('Insertion des données dans la table Electeurs ....')
go
insert into Electeurs values ('Paolo Lebeau', '38 Ste-catherine', 100)
.......
insert into Electeurs values ('Bob Lavigne', '4 Stuplate',400)
go 
```

有了这个，我需要创建数据库和表。

我只是不知道从哪里开始。

我尝试直接在 SQL SERVER 2008 中创建数据库，然后创建表，然后创建具有标题和 NULL 条件的列。

之后，我运行了 .sql 文件，每次打印命令都出现错误。

然后我尝试分配主键和外键，没有用，然后我删除了 PK，当我运行 .sql 文件时，一切都可以插入，但是我没有 PK，无法添加它们。

我想我正在做某事，我需要一步一步的过程......我是开始处理 .sql 文件还是 SQL 上的数据库？我需要帮助，请......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:13:18.060

一张一张地处理这张表。构建一个包含所有约束的完整表，看看你是否可以添加它的所有行。如果是，请尝试下一张表；如果不是，则调试表的错误消息，直到它独立工作。

当每个表单独工作时，开始组合它们，首先按照原始 SQL 文件中给出的顺序。由于存在 PK-FK 关系，因此可能的 120 种不同顺序中可能只有一种有效。在某种程度上，您可以从 PK-FK 关系中读取依赖关系，这将消除不可能的顺序。

如果出现特定的错误情况，请在此处回电，对于这个社区来说，这比“它坏了，请帮助”类型的问题更容易处理。

这个过程称为**调试**，是每个程序员工作的一个组成部分。如果你们都变得更好，并且通过更长远的眼光更好地避免它，你就会成为一个更高级的开发人员；但这仅来自重复执行任务的经验。

阿基米德对亚历山大说：“殿下没有通往知识的王道。”

# java - 无法将 2 个图像并排呈现正在更改的原始图像

> ID：15990748
> 
> 赞同：1
> 
> 时间：2013-04-13T17:30:50.960
> 
> 标签：java, image, graphics, awt

我正在尝试创建一个可以打开两个具有相同尺寸的 jpeg 的程序，并创建一个新的 jpeg，将这两个图像并排放置，而不改变枯萎图像。

创建新图像的代码是这样的：

```
public static Picture sumPicturesHorizontally(Picture left, Picture right) {

    BufferedImage newImage = new BufferedImage(
            left.getWidth() + right.getWidth(), 
            left.getHeight(), 
            left.getImage().getType());

    Graphics2D g = (Graphics2D) newImage.getGraphics();
    g.drawImage(left.getImage(), 0, 0, null);
    g.drawImage(right.getImage(), left.getWidth(), 0, null);

    Picture p = new Picture(newImage);
    return p;
} 
```

（图片只是我的一个包含 BufferedImage 和该图像尺寸的包装类）

在大多数情况下，这是可行的。但是，输出的图像不仅仅是并排的左右图像，似乎有些东西正在修改左右图像之间的边界。

我有一个黄色方块和一个红色方块；我的源图像是 1 恒定颜色。但是，总和图像在新边框周围有一些原始图像中没有的伪影。这是我正在谈论的放大屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/tvm7A.png)

如果我在源图像上缩放到相同级别，我不会在边缘看到相同的伪影。我希望它是黄色的边缘，然后只是红色。不应该有不同深浅的黄色和红色。是否有一些配置可以让它以这种方式运行，或者有不同的渲染方法？
另外，我通常不使用图形，这种边缘融合有什么名称吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:46:21.750

你的代码没问题

并且您没有缩放的图像也可以并且没有伪影

您所做的“缩放”级别中的唯一问题

当您进行缩放时，您将需要获得原始图像中没有的额外像素

这个像素是通过算法计算出来的，这个算法使用两种颜色（红色和黄色像素）之间边缘周围的相邻像素来计算缩放图像中的新像素

* * *

看这张图片：它对特定部分进行缩放，你可以看到像正方形，但在原始图像中你可以看到这是很小的像素

![在此处输入图像描述](https://i.stack.imgur.com/5yn2J.jpg)

* * *

注意：这就是为什么当您购买相机时需要询问其分辨率的原因，因为当分辨率提高时，即使您放大到这个级别，图像质量也会提高。

* * *

**我使用了您的代码，这是输出：**

1-![在此处输入图像描述](https://i.stack.imgur.com/G4Rei.jpg)

这是没有任何缩放且没有伪影的两个图像

2-![在此处输入图像描述](https://i.stack.imgur.com/kfjct.png)

这是放大后的两张图片，在这里我可以看到神器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:10:51.880

在使用 JDK7 的 Windows 7 上工作正常。发布您的 SSCCE，以便我们准确了解您是如何测试的。

这是我使用的 SSCCE：

```
import java.awt.*;
import java.awt.image.*;
import javax.swing.*;

public class MergeImageSSCCE extends JPanel
{
    public MergeImageSSCCE()
    {
        setLayout( new FlowLayout() );
        int size = 100;

        Image left = createImage(size, Color.YELLOW);
        Image right = createImage(size, Color.RED);
        Image merged = merge(left, right);

        add( new JLabel( new ImageIcon(left) ) );
        add( new JLabel( new ImageIcon(right) ) );
        add( new JLabel( new ImageIcon(merged) ) );
    }

    public static Image createImage(int size, Color color)
    {
        BufferedImage image = new BufferedImage(size, size, BufferedImage.TYPE_INT_RGB);
        Graphics2D g = image.createGraphics();
        g.setColor( color );
        g.fillRect(0, 0, size, size);
        g.dispose();

        return image;
    }

    public static Image merge(Image left, Image right)
    {
        BufferedImage merged = new BufferedImage(
            left.getWidth(null) + right.getWidth(null), left.getHeight(null), BufferedImage.TYPE_INT_RGB);
        Graphics2D g = (Graphics2D) merged.getGraphics();
        g.drawImage(left, 0, 0, null);
        g.drawImage(right, left.getWidth(null), 0, null);

        return merged;
    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("MergeImageSSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new MergeImageSSCCE() );
        frame.setSize(250, 250);
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:42:32.293

我在网上找到了这个：

```
System.Drawing.Image thumbnail = new Bitmap(width, height, PixelFormat.Format32bppArgb);
Graphics graphic = Graphics.FromImage(thumbnail);

graphic.CompositingQuality = CompositingQuality.HighQuality;
graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
graphic.PixelOffsetMode = PixelOffsetMode.Half; 
```

# localization - 是否有语言的 google webfont 子集要求列表？

> ID：15990749
> 
> 赞同：2
> 
> 时间：2013-04-13T17:30:59.107
> 
> 标签：localization, subset, google-font-api

例如：

土耳其语 ( **tr_TR** ) 需要**latin-ext**子集。

是否有针对哪种语言需要哪些 google webfonts 子集的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:59:18.263

谷歌没有公开记录这一点，但现实的假设是，“拉丁语（拉丁语）”是指拉丁语 1，更准确地说是 windows-1252 字符集（= ISO Latin 1，又名 ISO 8859-1，带有一些标点符号添加）。

除此之外的任何拉丁字母都是“拉丁扩展（latin-ext）”，如果有的话——大多数谷歌字体并不涵盖*所有*拉丁字母。

Windows-1252 和 ISO 8859-1 旨在涵盖（大多数字符）西欧和北欧语言。有关详细信息，请参阅[ISO 拉丁字母对欧洲语言的覆盖范围](http://www.cs.tut.fi/~jkorpela/8859.html)。对于用拉丁字母书写的非欧洲语言（例如印度尼西亚语），Windows-1252*可能就足够了，但这只是巧合。*

# jquery - jQuery：从函数中包含的 $.Deferred 获取解析

> ID：15990752
> 
> 赞同：0
> 
> 时间：2013-04-13T17:31:08.587
> 
> 标签：jquery, deferred

如果我在一个函数中有一个带有多个链式承诺的 $.Deferred，并且我调用了该函数，我怎么知道该 Deferred 何时解决？例如：http: [//jsfiddle.net/5AWK4/](http://jsfiddle.net/5AWK4/)

```
jQuery(function($){
    var $div = $('<div>hello world</div>').appendTo('body');

    var test = (function(){
        var dfd = new $.Deferred();
        dfd.then(function(){
            return $div.animate({width:300}, 5000, 'swing', function(){return $div.append('<br>line 1');});
        })
        .then(function(){
            return $div.append('<br>line 2');
        });
        return dfd.resolve();
    });

    $.when(test()).then(function(){
        $div.append('<br>line 3');
    });

}); 
```

当我运行该代码时，我有以下内容：

你好世界
第 3
行 第 1
行 第 2 行

我期待的是在我的函数返回的 Deferred 解决后显示 «line 3»。我试图在函数中只返回 dfd ，并且调用 test().resolve() 但它也不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:48:26.210

首先，您创建一个 Deferred 对象，然后返回该 Deferred 对象的 Promise，然后在某个异步方法完成后，您解决该 Promise，如下所示：

```
jQuery(function($){
    var $div = $('div');

    var test = (function(){
        var dfd = new $.Deferred();
        $div.animate({width:300}, 5000, 'swing', function(){
            dfd.resolve(); //line 3 will printed now, i.e. before line 1
            $div.append('<br>line 1'); //line 1 will be printed after the promise has been resolved
        });
        return dfd.promise();
    });

    $.when(test()).then(function(){
        $div.append('<br>line 3');
    });
}); 
```

[**小提琴**](http://jsfiddle.net/5AWK4/2/)

现在，`append()`是一个同步操作，所以它不需要承诺，并且 animate 有它自己的内置回调，所以你可以通过这样做来实现同样的效果：

```
jQuery(function($){
    var $div = $('div');

    var test = function(elem, callback){
        elem.animate({width:300}, 5000, 'swing', function(){
            callback();
        });
    };

    test($div, function() {
        $div.append('<br>line 1');
        $div.append('<br>line 2');
        $div.append('<br>line 3');
    });
}); 
```

[**小提琴**](http://jsfiddle.net/5AWK4/3/)

# javascript - JSONP jQuery中的回调函数

> ID：15990753
> 
> 赞同：1
> 
> 时间：2013-04-13T17:31:16.347
> 
> 标签：javascript, jquery, json, wordpress, opera

我正在使用一些 jQuery 脚本从 Flickr 和 YouTube 获取 JSON 提要，并在我的 WordPress 网站上从它们生成 HTML 对于我使用的 Flickr

```
<!-- Script to grab photos from Flickr feed -->
<script type="text/javascript">
// Set variables needed for query
var URL = "http://api.flickr.com/services/feeds/photos_public.gne";
var ID = "<?php echo get_option('of_flickrid') ?>";
var jsonFormat = "&lang=en-us&format=json&jsoncallback=?";

var ajaxURL = URL + "?id=" + ID + jsonFormat;
// Get the last photos of the flickr account, parse it into HTML code
$.getJSON(ajaxURL, function(data){
     var htmlString = "<h1><?php echo get_option('of_photostext') ?></h1>";

    // Now start cycling through our array of Flickr photo details
    $.each(data.items, function(i,item){

        // I only want the ickle square thumbnails
     var sourceSquare = (item.media.m).replace("_m.jpg", "_s.jpg");

        // Here's where we piece together the HTML
        htmlString += '<a href="' + item.link + '" target="_blank">';
        htmlString += '<img title="' + item.title + '" src="' + sourceSquare;
        htmlString += '" alt="'; htmlString += item.title + '" class="rounded"/>';
        htmlString += '</a>';
        if(i === 11){
            return false;
        }
    });

    // Pop our HTML in the #images DIV
    $('#photos').html(htmlString);

}); // End getJSOON
</script>
<!-- End of Script to grab photos from Flickr feed --> 
```

对于 YouTube：

```
<!-- Script to grab videos from YouTube feed -->
<script type="text/javascript">
// Set variables needed for query
var URL = "https://gdata.youtube.com/feeds/api/users/";
var UserName = "<?php echo get_option('of_youtubeid') ?>";
var jsonFormat = "/uploads?v=2&alt=jsonc&max-results=2&jsoncallback=?";
// Construct the JSON feed of the YouTube user's channel
var ajaxURL = URL + UserName + jsonFormat;
// Get the last videos of the YouTube account, parse it into HTML code
$.getJSON(ajaxURL, function(data){
     var htmlString = "<h1><?php echo get_option('of_videostext') ?></h1>";

    $.each(data.data.items, function(i,item){       
        // Here's where we piece together the HTML
        htmlString += '<iframe class="videos" type="text/html" width="640" height="390" src="http://www.youtube.com/embed/';
        htmlString += item.id;
        htmlString += '?autoplay=0" frameborder="0"></iframe>';
    });

    // Pop our HTML in the #videos DIV
    $('#videos').html(htmlString);
});
</script>
<!-- End of Script to grab videos from YouTube feed --> 
```

这些脚本在除 Opera 之外的所有浏览器中运行良好。

当我从 YouTube JSON 链接中删除回调函数时，它可以在 Opera 上运行，但在 IE 上停止，反之亦然。世界上可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:38:22.717

您不需要将查询字符串附加到您的 URL 以进行 jQuery AJAX 调用。[使用文档中描述](http://api.jquery.com/jQuery.getJSON/)的数据参数。这是一个例子：

```
$.getJSON('myURL.php', { param1: value1, param2: value2 }, function(data) {
    //handle my data here
    alert(data);
}); 
```

对于您的情况，我会为 Flickr 尝试以下代码：

```
<!-- Script to grab photos from Flickr feed -->
<script type="text/javascript">
// Set variables needed for query
var URL = "http://api.flickr.com/services/feeds/photos_public.gne";
var ID = "<?php echo get_option('of_flickrid') ?>";

// Get the last photos of the flickr account, parse it into HTML code
$.getJSON(URL + "?id=" + ID, { lang: 'en-us', format: 'json', jsoncallback: '?' } function(data){
     var htmlString = "<h1><?php echo get_option('of_photostext') ?></h1>";

    // Now start cycling through our array of Flickr photo details
    $.each(data.items, function(i,item){

        // I only want the ickle square thumbnails
     var sourceSquare = (item.media.m).replace("_m.jpg", "_s.jpg");

        // Here's where we piece together the HTML
        htmlString += '<a href="' + item.link + '" target="_blank">';
        htmlString += '<img title="' + item.title + '" src="' + sourceSquare;
        htmlString += '" alt="'; htmlString += item.title + '" class="rounded"/>';
        htmlString += '</a>';
        if(i === 11){
            return false;
        }
    });

    // Pop our HTML in the #images DIV
    $('#photos').html(htmlString);

}); // End getJSOON
</script>
<!-- End of Script to grab photos from Flickr feed --> 
```

对于 YouTube：

```
<!-- Script to grab videos from YouTube feed -->
<script type="text/javascript">
// Set variables needed for query
var URL = "https://gdata.youtube.com/feeds/api/users/";
var UserName = "<?php echo get_option('of_youtubeid') ?>";

// Get the last videos of the YouTube account, parse it into HTML code
$.getJSON(URL + UserName + "/uploads", { v: 2, alt: 'jsonc', max-results: 2, jsoncallback: '?' } function(data){
     var htmlString = "<h1><?php echo get_option('of_videostext') ?></h1>";

    $.each(data.data.items, function(i,item){       
        // Here's where we piece together the HTML
        htmlString += '<iframe class="videos" type="text/html" width="640" height="390" src="http://www.youtube.com/embed/';
        htmlString += item.id;
        htmlString += '?autoplay=0" frameborder="0"></iframe>';
    });

    // Pop our HTML in the #videos DIV
    $('#videos').html(htmlString);
});
</script>
<!-- End of Script to grab videos from YouTube feed --> 
```

# c++ - 静态和共享库链接器错误

> ID：15990760
> 
> 赞同：1
> 
> 时间：2013-04-13T17:31:42.120
> 
> 标签：c++, linker, static-libraries

我正在使用 NDK（Android 的本机编译器工具）。因此，情况如下所示：

```
Static boost → Shared helpers
                       ↓
                  Shared Game 
```

`Helpers`是一些用于游戏开发的共享库。shared`game`是一个包含在 java 代码中的库（作为本地库加载）。Helpers lib 在内部使用 boost，链接器在这里很好。共享游戏通过 helpers api 使用 boost 但编译失败。

链接器无法解析 boost_system 库中的某些符号。所以，我确实喜欢这样：

```
Static boost → Shared helpers
     |                  ↓
     +----------- → Shared Game 
```

现在它编译得很好。怎么了？我认为我可以将 boost 链接到助手并在共享游戏中使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:58:09.930

没有错误。正如您所说，您希望`shared game`仅使用`shared helpers`由`shared helpers`动态库导出的 API。您的错误是`shared game`仍然依赖于一些裸露的 Boost API，这些 API 显然不是由`shared helpers`. 这就是为什么您也必须明确地将 Boost 链接到`shared game`，以便正确解析这些 Boost 符号。

如果你想从 Boost API 中完全抽象出来并消除这种依赖，那么你必须`shared game`通过扩展来包装这个 Boost API（你需要）`shared helpers`（当然不要忘记从中导出这个*包装*的 API `shared helpers`）。

# java - 双链表中的冒泡排序 - 空指针错误

> ID：15990761
> 
> 赞同：1
> 
> 时间：2013-04-13T17:31:46.963
> 
> 标签：java, sorting, bubble-sort, doubly-linked-list

```
protected void sortHorseList(int iHorseCount)
{
    int i = 0;
    Horsie currentNode = head;
    Horsie auxNode = new Horsie();
    boolean foundChange = true;
    while(foundChange)
    {
        foundChange = false;
        for(i=0; i<iHorseCount-1; i++)
        {
            if (currentNode.getHorseValue() > currentNode.getNext().getHorseValue())
            {
                auxNode.setHorseValue(currentNode.getHorseValue());
                currentNode.setHorseValue(currentNode.getNext().getHorseValue());
                currentNode.getNext().setHorseValue(auxNode.getHorseValue());
                foundChange = true;
            }
            currentNode = currentNode.getNext();
        }
    }
} 
```

此代码在运行主程序时**显示空指针错误。**我是数据结构的新手，我希望在你们的帮助下解决这个问题！请教我如何在**双向链表中使用****冒泡排序**...HEEELP！

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:42:43.580

当您到达列表的末尾时，您不会检查下一个元素是否存在。因此，当您尝试访问它的值时，您会得到空引用异常。你的内部循环应该看起来像

```
 Horsie currentNode = head;
   Horsie nextNode = currentNode != null ? currentNode.getNext() : null;
   while (currentNode != null && nextNode != null)
    {
        if (currentNode.getHorseValue() > nextNode.getHorseValue())
        {
            currentNode = Swap(head,currentNode,nextNode);
            foundChange = true;
        }
        else
        {
            currentNode = nextNode;
        }
        nextNode = currentNode.getNext();
    } 
```

Where`Swap(Horsie current, Horsie next)`交换列表中 和 的位置`current`，如果是头节点`next`，则可选地更新头。`current`

我还要注意，您*确实*希望交换列表中的节点，而不是交换节点之间的值，除非您确定您的列表包含对节点对象的唯一引用。如果你不这样做，你就会冒着让其他类持有的对象意外变异的风险，因为你在排序过程中改变了它的值。**

# android - Android：为什么要回收 Mapactivity？

> ID：15990763
> 
> 赞同：1
> 
> 时间：2013-04-13T17:32:03.997
> 
> 标签：android, mapactivity, recycle

我从另一个活动开始一个 MapActivity **ONCE！** 当我想离开 MapActiivty（谷歌地图）时，他重新加载了地图...... LogCat 说：

MapActivity(13290)：回收调度程序 android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@41e24c30

MapActivity(13290)：回收地图对象。

当我在重新加载后退出时，他正确地离开了应用程序......

我能做些什么？

# oracle - 在 Oracle SQL Developer 中添加新的 Varchar2 字段

> ID：15990765
> 
> 赞同：1
> 
> 时间：2013-04-13T17:32:18.850
> 
> 标签：oracle

我是甲骨文的新手。我需要将 varchar2 字段添加到长度为 50 字节的现有表中。

我像这样右键单击表格：
![在此处输入图像描述](https://i.stack.imgur.com/EqJgi.jpg)

...然后我到达了这个领域：
![在此处输入图像描述](https://i.stack.imgur.com/Hphd2.png)

我不知道在这里做什么。我期待看到类似于模式设计GUI 视图中的“类型”、“大小”和“单位”提示（我将分别输入~varchar2、45 和字节）。我不知道如何处理精度和比例字段；我以为那些是为了数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T18:42:15.517

您正在添加一列。给它一个名称（“列名”）、一个类型（从“数据类型”下拉列表中选择）和一个​​长度（“精度”）。如果它是 NUMBER 类型，您可以给它一个比例（小数点右侧的位置）。在您的具体示例中，为您的列命名，将数据类型下拉列表保留为 VARCHAR2，并指定 50 表示精度。

# php - 使用 PHP GD 生成的图像 - 如何与浏览器的中心对齐？

> ID：15990768
> 
> 赞同：1
> 
> 时间：2013-04-13T17:32:35.323
> 
> 标签：php, gd

希望你们都做得很好。

我有一个使用 PHP GD 创建和编辑的图像，我使用以下代码将其发送到浏览器，但它显示完全与浏览器的左侧对齐，我尝试将 css 行为直接添加到 img 标签但没有发生了所以我想这永远不会起作用，因为它是一个显示图像的 php 标头，有没有办法在相同的代码中将图像与浏览器的中心对齐让我们说使用边距 0 自动对齐 div 的方式？如您所见，我仍然是 GD 的新手，所以这是我的代码，我真的很感激朋友们：

```
<?php
$nombre=$_POST['nombre'];
  //Set the Content Type
header('Content-type: image/jpeg'); 

  // Create Image From Existing File
  $jpg_image = imagecreatefromjpeg('fabian.jpg');
      // get image dimensions
list($img_width, $img_height,,) = getimagesize("fabian.jpg");

  // Allocate A Color For The Text
  $white = imagecolorallocate($jpg_image, 255, 255, 255);

  // Set Path to Font File
  $font_path = 'fabian.TTF';

  // Set Text to Be Printed On Image
  $text =strtoupper($nombre);

  // Print Text On Image
  //imagettftext($jpg_image, 75, 0, 50, 400, $white, $font_path, $text);

 // find font-size for $txt_width = 80% of $img_width...
$font_size = 1; 
$txt_max_width = intval(0.8 * $img_width);    

do {

$font_size++;
$p = imagettfbbox($font_size,0,$font_path,$text);
$txt_width=$p[2]-$p[0];
// $txt_height=$p[1]-$p[7]; // just in case you need it

} while ($txt_width <= $txt_max_width);

// now center text...
$y = $img_height * 0.9 ;// baseline of text at 90% of $img_height
$x = ($img_width - $txt_width) / 2;

imagettftext($jpg_image, $font_size, 0, $x, $y, $white, $font_path, $text);

  // Send Image to Browser
  imagepng($jpg_image);

 // Clear Memory
  imagedestroy($jpg_image);

?> 
```

非常感谢您的建议！祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:37:31.143

看起来您只是在提供的代码中输出图像文件。无法在此代码中指定任何浏览器应如何显示图像。

如果某处有单独的 HTML 代码显示此图像，则应在此处指定与外观和定位相关的任何内容。因此，它变成了一个关于如何使图像居中的 HTML/CSS 问题，并且与 PHP 或 GD 没有任何关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:36:15.663

您将需要添加`display: block;`到您的 CSS 规则以使其集中。

但是，如果您只是在浏览器中请求图像，那么实际上没有办法解决它，因为您需要知道浏览器窗口的尺寸，而这些尺寸在服务器端是不可用的。

# python - 在仅使用 __unicode__ 方法的 Django 模型上调用 str() 会为特殊字符返回不同的编码

> ID：15990772
> 
> 赞同：2
> 
> 时间：2013-04-13T17:32:46.450
> 
> 标签：python, django, django-1.5

当调用`str()`返回字段中带有特殊字符的 Django 模型对象时，在这种情况下，字符**é**将按`\xc3\xa9`预期返回`\xe9`。问题是什么？

我正在使用 Django 1.5.1，`#coding=utf-8`并且`from __future__ import unicode_literals`按照[django 文档中的建议](https://docs.djangoproject.com/en/1.5/ref/unicode/#general-string-handling)。

我只实现了`__unicode__`方法而不是`__str__`方法，因为[Django`__unicode__`在调用`str()`](https://docs.djangoproject.com/en/1.5/ref/unicode/#choosing-between-str-and-unicode).

这是一个代码示例（不是真正的生产代码）。

测试.py

```
# coding=utf-8
from __future__ import unicode_literals
from django.test import TestCase
from unicodebug.models import MyModel

class TestMyModel(TestCase):
    def test_mymodel_str(self):
        mymodel = MyModel(name='Chéri')
        self.assertEqual(str(mymodel), 'Chéri')

    def test_mymodel_unicode(self):
        mymodel = MyModel(name='Chéri')
        self.assertEqual(unicode(mymodel), 'Chéri') #  using unicode() works fine! 
```

模型.py

```
# coding=utf-8
from __future__ import unicode_literals
from django.db import models

class MyModel(models.Model):
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name 
```

运行测试时在终端中输出。

```
(venv)frecon test$ python manage.py test unicodebug
Creating test database for alias 'default'...
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py:501: UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
  if not first == second:

F.
======================================================================
FAIL: test_mymodel_str (unicodebug.tests.TestMyModel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "unicodebug/tests.py", line 10, in test_mymodel_str
    self.assertEqual(str(mymodel), 'Chéri')
AssertionError: 'Ch\xc3\xa9ri' != u'Ch\xe9ri'

----------------------------------------------------------------------
Ran 2 tests in 0.001s

FAILED (failures=1)
Destroying test database for alias 'default'... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:35:24.100

`str()`必须对 unicode 值进行*编码*以生成 Pyton 字节字符串，它将使用默认编码 ( `sys.defaultencoding`) 进行。您必须将后者`UTF8`显式设置为，因为默认情况下设置为`ASCII`.

您看到的是模型返回的 Unicode 值的 UTF-8 编码。如果您希望您的测试通过，您必须对该值进行*解码*以匹配您与之比较的 Unicode 值，或者对另一个值*进行编码：*

```
self.assertEqual(str(mymodel), 'Chéri'.encode('utf8')) 
```

或者

```
self.assertEqual(str(mymodel).decode('utf8'), 'Chéri') 
```

简短演示：

```
>>> from __future__ import unicode_literals
>>> b'Ch\xc3\xa9ri' == 'Chéri'.encode('utf8')
True
>>> b'Ch\xc3\xa9ri'.decode('utf8') == 'Chéri'
True 
```

你可能想阅读 Python 和 Unicode：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

# java - 在 Guice 的模块配置中关联 FXML 和控制器

> ID：15990777
> 
> 赞同：6
> 
> 时间：2013-04-13T17:33:21.330
> 
> 标签：java, dependency-injection, javafx-2, guice, fxml

在我的 Guice 模块中，我想关联 FXML 文件和它们的控制器，目前它看起来像这样：

```
public class GuiceModule extends AbstractModule 
{   
    @Override
    protected void configure()
    {
        // associate controllers and fxml files
        bind(MainController.class).toInstance((MainController)loadController("/main.fxml"));
        bind(SubController.class).toInstance((SubController)loadController("/content.fxml"));
    }

    protected Object loadController(String url)
    {
        InputStream fxmlStream = null;
        try
        {
            fxmlStream = getClass().getResourceAsStream(url);
            FXMLLoader loader = new FXMLLoader();
            loader.setLocation(getClass().getResource(url));

            loader.setControllerFactory(new Callback<Class<?>, Object>() {

                public Object call(Class<?> clazz) { // clazz because class is a reserved word
                    return injector.getInstance(clazz); // PROBLEM: no access to the injector here
                }
            });

            loader.load(fxmlStream);
            return loader.getController();
        }

        // [..] exception handling

    }
}**strong text** 
```

但是在该`loadController(String url)`方法中，我遇到了该行的问题：

```
return injector.getInstance(clazz); // PROBLEM: no access to the injector here 
```

如何`getInstance`从 Guice 模块中访问 Guice 的方法？那是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T16:04:40.600

我是**fx-guice**的作者，这是一个可用于在 JavaFX 应用程序中使用 Guice 的开源库。该库使用 Apache License v2 获得许可，可以通过中央[Maven 存储库](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.cathive.fx%22%20AND%20a%3A%22fx-guice%22)获得。

尽管它可能*无法回答*您的确切问题，但我建议您查看我的项目，该项目捆绑了很多示例：
项目主页：→  [http://github.com/cathive/fx-guice/](http://github.com/cathive/fx-guice/)

我的框架的主要思想是：不是扩展“javafx.application.Application”，而是扩展“com.cathive.fx.GuiceApplication”。然后，您可以在任何需要的地方简单地 @Inject "GuiceFXMLLoader" 实例，并可以使用这些特殊的 FXMLLoader 实例来加载您的 UI 定义。在您的 FXML 控制器类中，您可以根据需要混合使用 @Inject 和 @FXML 注释。
→  [http://bit.ly/139fKQV](http://bit.ly/139fKQV)

我的框架还提供了一系列有关“Guicified”JavaFX 组件的功能，这些组件将 Java 类和单个 FXML 文件绑定在一起（使用特殊注释：“@FXMLComponent”）。我写了一个简短的“计算器”示例，其来源可以从 Github 页面获得（见上文）。代码的相关部分可以在这里找到：
CalculatorAppPane.java: →  [http://bit.ly/10YMVoM](http://bit.ly/10YMVoM)
CalculatorAppPane.fxml: →  [http://bit.ly/13loYv8](http://bit.ly/13loYv8)

希望有帮助。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T02:07:46.757

**我将建议将控制器与FXML**文件相关联的多种方法之一，我会假设您在**FXML文件中使用*****fx:controller***标记。

 **出于演示目的，我将实现一个托管在[github](https://github.com/tarrsalah/stackoverflow.guice.fx)上的演示应用程序，在舞台中间有一个按钮。

![在此处输入图像描述](https://i.stack.imgur.com/nJzfH.png)

```
Demo__
     |___ App.java
     |___ AppModule.java
     |___ IController.java
     |___ Controller.java
     |___ InjectingFXMLLoader.java
     |___ fxml
              |__view.fxml 
```

## 查看.fxml

请注意，我们在**FXML文件中引用*****fx:controller***中的接口，而不是实现，因此我们可以将 fxml 视图与其他实现该接口的控制器一起使用。

 **```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane fx:id="root" xmlns:fx="http://javafx.com/fxml" fx:controller="org.tarrsalah.stackoverflow.guice.fx.IController" >
    <center>
        <HBox alignment="CENTER" prefHeight="-1.0" prefWidth="-1.0">
            <children>
                <Button fx:id="fx_print" alignment="CENTER" contentDisplay="CENTER" defaultButton="true" mnemonicParsing="false" onAction="#printButton" text="Print !" HBox.hgrow="ALWAYS" />
            </children>
            <BorderPane.margin>
                <Insets bottom="20.0" top="10.0" />
            </BorderPane.margin>
        </HBox>
    </center>
</BorderPane> 
```

## 控制器

控制器必须实现的接口，将`printButton()`消息打印到屏幕，并`getRoot()`获取面板视图。

```
import javafx.fxml.Initializable;
import javafx.scene.Parent;

public interface IController extends Initializable {

    public void printButton();  

    public Parent getRoot();
} 
```

## 控制器

```
import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.FXML;
import javafx.scene.Parent;

public class Controller implements IController {

    @FXML
    Parent root;

    public void initialize(URL url, ResourceBundle rb) {
    }

    public Parent getRoot() {
        return root;
    }

    public void printButton() {
        System.out.println("Hello Guice !!");
    }
} 
```

## 注入FXMLLoader

具有一个静态方法的类，该方法获取控制器的具体实现**和**FXML **文件的****URL**，并返回视图的控制器。

 **```
import java.io.IOException;
import java.net.URL;
import javafx.fxml.FXMLLoader;
import javafx.util.Callback;

public class InjectingFXMLLoader {
    /**
     * 
     * @param <N>
     * @param injector
     * @return a controller injected within an FXML.
     */
    public static <N> N loadFXMLController(final N controller, URL url) throws IOException {
        FXMLLoader loader= new FXMLLoader();
        loader.setLocation(url);
        loader.setControllerFactory(new Callback<Class<?>, Object>() {

            public Object call(Class<?> p) {
                return controller;
            }
        });
        loader.load();
        return loader.getController();
    }
} 
```

## 应用模块

在 guice 模块中，我们使用 InjectingFXMLLoader 类将控制器的具体实现与相应的**FXML**文件相关联。使用[@Provides](https://code.google.com/p/google-guice/wiki/ProvidesMethods)方法。

```
import com.google.inject.AbstractModule;
import com.google.inject.Provides;
import java.io.IOException;

public class AppModule extends AbstractModule {

    @Override
    protected void configure() {
    }

    /**
     *
     * @return IController
     * @throws IOException
     */
    @Provides
    public IController getIController() throws IOException {
        return InjectingFXMLLoader.loadFXMLController(new Controller(), getClass().getClassLoader().getResource("fxml/view.fxml"));
    }
} 
```

## 应用程序

显示视图的主类

```
import com.google.inject.Guice;
import javafx.application.Application;
import javafx.scene.SceneBuilder;
import javafx.stage.Stage;

public class App extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        stage.setScene(SceneBuilder
                .create()
                .root(Guice.createInjector(new AppModule()).getInstance(IController.class).getRoot())
                .height(160)
                .width(200)
                .build());
        stage.show();
    }
} 
```******

# java - Object.wait() 中的高 CPU

> ID：15990779
> 
> 赞同：0
> 
> 时间：2013-04-13T17:33:38.363
> 
> 标签：java, multithreading, synchronization, cpu-usage

我在 Java 的基本同步/等待中实现了一个典型的条件变量：

```
ConcurrentHashMap incompleted = ...;

// the notifier
incompleted.remove(key);
synchronized (this) {
  if (incompleted.isEmpty()) {
     notifyAll();
  }
}

// the waiter
synchronized (this) { // one this object for each request
   while (!incompleted.isEmpty()) {
     wait(10000L); // this is exact time out pass in
   }
   // done and exit
} 
```

这些代码看起来非常典型并且有效。但是，当我测试许多（比如 100 个）并发请求时，CPU 负载约为 80%，而分析器报告应用程序在 wait() 方法中花费的时间为 80%。通常高 cpu 可能是由于在应用程序代码中忙于等待。但是为什么 wait() 本身会一直花费呢？谢谢

该主机是 VMware 主机，运行 Oracle JVM 1.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:36:56.757

> 为什么 wait() 本身会一直花时间？

可能是您的分析器显示的是您的挂钟时间而*不是*CPU 周期。您的线程大部分时间都花在了`wait()`，是的，但这样做并没有消耗 CPU 资源。

*如果*分析器显示 CPU 周期，那么您应该考虑切换到`notify()`而不是`notifyAll()`. 如果只有一个线程能够让某件事情出队，那么就没有理由唤醒所有 100 个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:43:51.240

好吧，我的错。在此分析器中，第一个视图是挂钟时间。我把它误认为是 cpu 燃烧时间。但是为什么我会在 Object.wait() 中获得几乎 100% 的挂墙时间，但 CPU 负载仍然很高。也许这是另一个问题。

# xslt - 使用兄弟节点递归替换 XSLT 中的文本

> ID：15990784
> 
> 赞同：0
> 
> 时间：2013-04-13T17:34:16.533
> 
> 标签：xslt, recursion

所以我的 XML 看起来像：

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="reports.xsl"?>
<analysis>
    <layers>
        <layer name="Initial Bool" id="l0">
            <code><![CDATA[some
multiline text
goes here]]></code>
        </layer>
    </layers>
    <report name="Some Node">
        <issues>
            <issue>
                <layer id="l0" />
                <name>Replace expression</name>
                <description>
                    Test description.
                </description>
                <locations>
                    <replace start="20" end="30">hello</replace>
                </locations>
            </issue>
        </issues>
    </report>
</analysis> 
```

我当前的 XSLT 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="html" />

    <xsl:template match="/analysis">
        <html>
            <head>
                <title>Tychaia Analysis Reports</title>
                <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
                </script>
            </head>
            <body>
                <xsl:apply-templates />
            </body>
        </html>
    </xsl:template>

    <xsl:template match="/analysis/layers">
        <!-- Do nothing with layers as we reference them from the reports -->
    </xsl:template>

    <xsl:template match="/analysis/report">
        <h2>
            <xsl:value-of select="@name" />
        </h2>
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="/analysis/report/issues">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="/analysis/report/issues/issue">
        <h3>
            <xsl:value-of select="name" />
        </h3>
        <p>
            <xsl:value-of select="description" />
        </p>
        <code style="border: none;" class="prettyprint">
            <!-- This is the bit that I can't work out how to do (ideally the
            replaced content would also then get passed into
            remove-leading-whitespace as the text data):
            <xsl:call-template name="format-locations">
                <xsl:with-param name="text" select="/analysis/layers/layer[@id=current()/layer/@id]" />
                <xsl:with-param name="locations" select="locations" />
            </xsl:call-template>
            -->
            <xsl:call-template name="remove-leading-whitespace">
                <xsl:with-param name="text" select="/analysis/layers/layer[@id=current()/layer/@id]" />
            </xsl:call-template>
        </code>
    </xsl:template>

    <!-- THIS DOESN'T WORK -->
    <xsl:template name="format-locations">
        <xsl:param name="text" />
        <xsl:param name="locations" />
        <xsl:variable name="result" select="$text" />
        <xsl:for-each select="$locations/replace">
            <xsl:variable name="result">
                <xsl:value-of select="substring($result, 1, current()/@start)" />
                <xsl:text>yo replaced</xsl:text>
                <xsl:value-of select="substring($result, current()/@end)" />
            </xsl:variable>
        </xsl:for-each>
        <xsl:copy-of select="$result" />
    </xsl:template>

    <!-- Removes leading whitespaces for code rendering -->
    <xsl:template name="remove-leading-whitespace">
        <xsl:param name="text" />
        <xsl:choose>
            <xsl:when test="substring($text, 1, 1) = ' ' or substring($text, 1, 1) = '&#xA;' or substring($text, 1, 1) = '&#xA0;'">
                <xsl:call-template name="remove-leading-whitespace">
                    <xsl:with-param name="text" select="substring($text, 2)" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:call-template name="replace-spaces">
                    <xsl:with-param name="text" select="$text" />
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Replaces spaces and newlines in code with nbsp and <br/> -->
    <xsl:template name="replace-spaces">
        <xsl:param name="text" />
        <xsl:choose>
            <xsl:when test="contains($text, ' ')">
                <xsl:call-template name="replace-spaces">
                    <xsl:with-param name="text" select="substring-before($text, ' ')" />
                </xsl:call-template>
                <xsl:text>&#xA0;</xsl:text>
                <xsl:call-template name="replace-spaces">
                    <xsl:with-param name="text" select="substring-after($text, ' ')" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($text, '&#xA;')">
                <xsl:call-template name="replace-spaces">
                    <xsl:with-param name="text" select="substring-before($text, '&#xA;')" />
                </xsl:call-template>
                <br />
                <xsl:call-template name="replace-spaces">
                    <xsl:with-param name="text" select="substring-after($text, '&#xA;')" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

我希望能够`<code>`根据`<locations>`. 这样报告就可以突出显示代码的部分内容以及每个部分的消息。

但是，我当前的策略`format-locations`不起作用，因为您不能在 XSLT 中第二次设置变量，但我需要以`<location>`非递归方式循环内部的子级，即嵌套替换标签没有意​​义彼此喜欢`<replace ...><replace ...>...</replace></replace>`只是因为 XSLT 不会递归地迭代兄弟姐妹。

**无论如何我可以让这个 XSLT 遍历兄弟姐妹并根据需要执行替换吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:21:27.363

试试这个模板。

```
<xsl:template name="format-locations">
  <xsl:param name="text"/>
  <xsl:param name="locations"/>

  <xsl:variable name="result">
     <xsl:value-of select="substring($text, 1, $locations/replace[1]/@start)"/>
     <xsl:text>yo replaced</xsl:text>
     <xsl:for-each select="$locations/replace[position() &gt; 1]">
        <xsl:value-of select="substring($text, preceding-sibling::replace[1]/@end + 1, @start - preceding-sibling::replace[1]/@end)"/>
        <xsl:text>yo replaced</xsl:text>
     </xsl:for-each>
     <xsl:value-of select="substring($text, $locations/replace[last()]/@end + 1)"/>
  </xsl:variable>
  <xsl:copy-of select="$result"/>
</xsl:template> 
```

它对第一个**replace**进行单独检查，然后对后续的（如果有的话）根据当前**@start**属性和前一个**@end**属性之间的差异来执行子字符串。最后它从最后一个**替换**元素的末尾分开。

# mongodb - mongoose 使用 mongoose 进行文本搜索

> ID：15990787
> 
> 赞同：6
> 
> 时间：2013-04-13T17:34:34.410
> 
> 标签：mongodb, search, text, mongoose

我正在使用 mongo db nodejs 和 mongoose。

我想使用 mongodb 新文本搜索。

尝试像 aaronheckmann 建议的那样使用 mongoose-text-search，但我不断收到错误消息。

```
var mongoose = require("mongoose");
var Schema  = mongoose.Schema;
var ObjectId = Schema.ObjectId;
var Items = new Schema({
   type            : { type : String , default:""},
    color           : { type : [String] , default:""},
   category_A      : { type : String , default:""},
    category_B      : { type : String , default:""},
    category_C      : { type : String , default:""},
});
var textSearch = require("mongoose-text-search");
Items.plugin(textSearch);
var ItemModel = mongoose.model('Item', Items);
Items.index({
    type            :"text",
    color           :"text",
   category_A      :"text",
    category_B      :"text",
    category_C      :"text"
},
   {
        name: "best_match_index",
       weights: {
            type: 5,  
            color:   4,
      }
    }
)
ItemModel.textSearch('D', function (err, output) {
    if (err) 
    console.log(err);
    else
    console.log(output)
}) 
```

运行时，我得到：

```
no text index for: db.items 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-27T14:41:25.387

在将架构注册为模型*之前*，您必须将插件添加到架构中。

**更新**

同样，您需要在注册模型之前在模式上定义索引。所以重新排序你的代码部分，如下所示：

```
var textSearch = require("mongoose-text-search");
Items.plugin(textSearch);
Items.index({
    type            :"text",
    color           :"text",
    category_A      :"text",
    category_B      :"text",
    category_C      :"text"
}, {
    name: "best_match_index",
    weights: {
        type: 5,  
        color: 4
    }
});
var ItemModel = mongoose.model('Item', Items); 
```

请注意，您还需要通过`mongoose.connect`我在任何地方都看不到的调用将猫鼬连接到数据库，但我假设您在此代码范围之外执行此操作。这是我用来确认此工作的完整代码：

```
var mongoose = require("mongoose");
var Schema  = mongoose.Schema;
var ObjectId = Schema.ObjectId;
var Items = new Schema({
    type            : { type : String , default:""},
    color           : { type : [String] , default:""},
    category_A      : { type : String , default:""},
    category_B      : { type : String , default:""},
    category_C      : { type : String , default:""},
});
var textSearch = require("mongoose-text-search");
Items.plugin(textSearch);
Items.index({
    type            :"text",
    color           :"text",
    category_A      :"text",
    category_B      :"text",
    category_C      :"text"
}, {
    name: "best_match_index",
    weights: {
        type: 5,
        color: 4,
    }
});
var ItemModel = mongoose.model('Item', Items);

mongoose.connect('mongodb://localhost/test', function (err) {
  ItemModel.textSearch('D', function (err, output) {
    if (err)
      console.log(err);
    else
      console.log(output);
    mongoose.disconnect();
  });
}); 
```

创建的文本搜索索引在 shell 中如下所示：

```
test> db.items.getIndexes()
[
  {
    "v": 1,
    "key": {
      "_id": 1
    },
    "ns": "test.items",
    "name": "_id_"
  },
  {
    "v": 1,
    "key": {
      "_fts": "text",
      "_ftsx": 1
    },
    "ns": "test.items",
    "name": "best_match_index",
    "weights": {
      "category_A": 1,
      "category_B": 1,
      "category_C": 1,
      "color": 4,
      "type": 5
    },
    "background": true,
    "safe": null,
    "default_language": "english",
    "language_override": "language",
    "textIndexVersion": 1
  }
] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T01:35:57.100

```
npm install mongoose-text-search 
```

[https://github.com/aheckmann/mongoose-text-search](https://github.com/aheckmann/mongoose-text-search)

发现其他猫鼬功能的好地方是[http://plugins.mongoosejs.com](http://plugins.mongoosejs.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T22:29:57.823

据我所知，大多数驱动程序还没有实现`text`搜索命令/函数，所以调用它的唯一方法是使用该`runCommand`函数。

不过，您需要确保首先在数据库上启用它（并且显然创建一个文本索引）。

[http://docs.mongodb.org/manual/tutorial/enable-text-search/](http://docs.mongodb.org/manual/tutorial/enable-text-search/)

或运行时

```
db.adminCommand( { setParameter : 1, textSearchEnabled : true } ) 
```

# lucene - 使用 Lucene 2.9 索引格式读取目录时，代码块中的 CLucene 2.3.2 问题

> ID：15990793
> 
> 赞同：0
> 
> 时间：2013-04-13T17:34:58.153
> 
> 标签：lucene, indexing, runtime-error, codeblocks, clucene

(我的) CLucene 版本是 2.3.3

（客户端）Lucene 文件索引格式为 2.9.1

此时出现错误：

```
IndexReader* reader = IndexReader::open(index); 
```

错误：[截图](http://s1.ipicture.ru/uploads/20130413/E54FS2BT.jpg)

告诉我如何解决当前的错误，不兼容的 Lucene 版本？

卢克……？

# javascript - 使用 soundmanager2 播放 MP3 几秒钟

> ID：15990800
> 
> 赞同：0
> 
> 时间：2013-04-13T17:35:28.890
> 
> 标签：javascript, mp3, soundmanager2

有什么方法可以识别所有可以播放 soundmanager2 几秒钟的歌曲。

我已经初始化了soundmanager2

```
soundManager.setup ({
    url: 'stockings /',
    preferFlash: true,
    onReady: function () {
        console.log ('SM2 Ok!');
    }
}); 
```

而我的 sm2_button 类的 mp3 文件，总共大约 10 个文件，我希望每个人都播放几秒钟。

```
<a href="songs/1.mp3" class="sm2_button"> </ a> 
```

我希望你能帮我一把。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:00:46.393

哎呀，我玩了一下。感谢这个有趣的问题。这将使用 jQuery 在您的 DOM 中查找 mp3 文件列表并创建`playList`通过单击开始按钮播放的文件。

```
<script>
var playList = new Array();

$(document).ready(function() {
    var soundFileList = new Array();
    $('ol#list2 li a').each(function() { // find soundfiles in <li><a data='*'>
        $('ol#list2 li a').css('color','#000');
        soundFileList.push( this.getAttribute('data') );
    });
    var newpl = { // create a selfmade playList object
        nextSongNumber: 0, // track number with which the player starts
        playLength: 7012,  // milliseconds to play each track
        idScheme: 'pl2_',  // a given scheme as 'soundID+songNumber'
        songUrl: './',     // url where your files are
        songList: soundFileList,
        fadeIn: 2000,      // fadeIn in milliseconds
        fadeOut: 1000      // fadeOut in milliseconds
    }
    playList.push( newpl ); // push it to our preset playlist
    $('#startbutton').on('click',function(){
        // call list 0 in playList[]
        playThisPlayList( 0, playList);
    });
});

soundManager.setup({
  url: './soundmanager2/swf/',
  // preferFlash: false,
  //flashPollingInterval: 4 , //in ms, overrules useFastPolling & useHighPerformance
  useFastPolling: true,
  useHighPerformance: true,
  onready: function() {

    function SkipThruPlayList( pl ) {
      if ( pl.nextSongNumber+1 > pl.songList.length ) {
          //will be called after the last song in playList
          pl.nextSongNumber=0; //needed for replay the playList
          return;
      } else {
        if(songObject){ songObject.destruct(); }
        var songObject = soundManager.createSound({
          id:  pl.idScheme + pl.nextSongNumber,
          url: pl.songUrl + pl.songList[ pl.nextSongNumber ],
          multishot: false
        });

        songObject.play({
          from: 0,
          to: pl.playLength,
          stream: true,
          autoPlay: false, //true if starting with pageload
          onplay: function() {
            $('ol#list2 li:nth-child('+pl.nextSongNumber+') a').css('color','#f00');
            //console.log('now play:',this.url, 'songid:',this.id, 'laptime:', this.duration);
          },
          onstop: function() {
            //console.log('songid:',this.id, ', songend was at:',this.position);
            // check your console, songend-positions are not stable values
            this.destruct(); //free memory from old song, necessary?
            SkipThruPlayList( pl ); // start over, create & play next songObject
          },
          whileplaying: function(){
            //this is a fadeIn / fadeOut mechanism
            var now=this.position;
            var mainVolume = 100; //we could set this up with playList
            if (now <= pl.fadeIn) {
                //fadeIn
                this.setVolume(parseInt((now/pl.fadeIn)*mainVolume));
            } else if (now >= (pl.playLength-pl.fadeOut)) {
                //fadeOut
                this.setVolume(parseInt(((pl.playLength-now)/pl.fadeOut)*mainVolume));
            } else {
                //play normal Volume between fadeIn and fadeOut
                this.setVolume(mainVolume);
            }
          }
        });
        pl.nextSongNumber++;
      }
    }

    function playThisPlayList( i, playList ) {
      var count= playList[i].songList.length;
      if (count > 0) {
        //console.log('we have:',count,' songs to play');
        SkipThruPlayList( playList[i] );
      } else {
        //console.log('no songs in this songlist');
        return;
      };
    }
    //playThisPlayList( 0, playList );
    window.playThisPlayList = playThisPlayList; //Broadcast function into BOM
  }
});

</script>

<button id="startbutton">start</button>
<ol id="list2">
  <li><a href="#" data="./test0.mp3">test0.mp3</a></li>
  <li><a href="#" data="./test1.mp3">test1.mp3</a></li>
  <li><a href="#" data="./test2.mp3">test2.mp3</a></li>
</ol> 
```

还有一些可能更聪明的东西，但这有效。例如，如果轨道短于 4096 毫秒会发生什么，也许你应该检查一下。希望这可以帮助。

来自柏林的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:27:18.470

感谢您的想法。最后触摸一个小文件代码 mp3-player-button.js，由 API 文档支持并添加几行 soundmanager2。

在行中：

```
thisSound.play (); 
```

添加：

```
thisSound.play({
    whileplaying:function() {
        if (thisSound.position >= 30000) {
            self.stopSound(thisSound);
        }
    }
}); 
```

来自秘鲁的问候。

# jquery - 加载新元素后运行 jquery 代码

> ID：15990801
> 
> 赞同：2
> 
> 时间：2013-04-13T17:35:32.567
> 
> 标签：jquery

我有链接`id="#knav1"`。在 div 中单击后，使用 .load`id="navldesc"`加载选择元素`class="selnav1"`。

```
$("#knav1").click(function(){
$("#navldesc").load('/const/api.php?nvsload=y&komplektn=kompl1');
}); 
```

但下一个脚本不起作用：

```
$(".selnav1").change(function(){
alert('ewfew');
}); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:36:43.577

像这样用于[`.on()`](http://api.jquery.com/on/)动态加载的元素

```
$(document).on('change','.selnav1',function(){
  alert('ewfew');
}); 
```

# ruby - SublimeText2 RubyTest“验证Ruby语法”触发UTF-8错误

> ID：15990804
> 
> 赞同：2
> 
> 时间：2013-04-13T17:36:06.970
> 
> 标签：ruby, utf-8, sublimetext2, ruby-test

我在 Mac OS 10.7.5 上使用 rvm 和 ruby​​ 1.9.3。

我希望能够使用 Sublime Text 2 RubyTest 包来验证我的 Ruby 语法。

但是，当我尝试`Tools -> RubyTest -> Verify Ruby Syntax`在任何 ruby​​ 文件（`test.rb`如下）上运行时，RubyTest 控制台中会显示以下错误：

> /Users/jladieu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby:1：无效的多字节字符（US-ASCII）

我的`test.rb`文件内容很简单：

```
class Test
  def hello
    puts "Hello world"
  end
end 
```

我的`RubyTest.sublime_settings`文件如下：

```
{
  "erb_verify_command": "erb -xT - {file_name} | ruby -c",
  "ruby_verify_command": "ruby -c {file_name}",

  "run_ruby_unit_command": "bundle exec ruby -Itest {relative_path}",
  "run_single_ruby_unit_command": "bundle exec ruby -Itest {relative_path} -n '{test_name}'",

  "run_cucumber_command": "zeus cucumber {relative_path} --no-color",
  "run_single_cucumber_command": "zeus cucumber {relative_path}:{line_number} --no-color",

  "run_rspec_command": "zeus rspec {relative_path}",
  "run_single_rspec_command": "zeus rspec {relative_path}:{line_number}",

  "ruby_unit_folder": "test",
  "ruby_cucumber_folder": "features",
  "ruby_rspec_folder": "spec",

  "check_for_rbenv": false,
  "check_for_rvm": true,

  "ruby_use_scratch" : false,
  "save_on_run": true,
  "ignored_directories": [".git", "vendor", "tmp"],

  "hide_panel": false,

  "before_callback": "",
  "after_callback": ""
} 
```

在命令行运行以下命令可以验证我的语法：

```
$ ruby -c test.rb 
  Syntax OK 
```

最后，我尝试了多种方法来修复 US-ASCII 问题，但均无济于事：

*   `-ku`在 RubyTest 设置中向验证命令添加标志
*   `export RUBYOPT=-Ku`在我`.bash_profile`打开 sublime 之前
*   `export LC_CTYPE=en_US.UTF-8 LANG=en_US.UTF-8`在打开 sublime 之前在我的 bash 个人资料中

任何人都可以使用类似的设置来让它工作吗？

注意：找到答案（见下文），但如果有人找到更好的解决方案感兴趣，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T16:58:13.040

根据 Aaron 和 Thomas 的反馈进行进一步调查，将`ruby_verify_command`from更改`ruby -c {file_name}`为 just`-c {file_name}`有效。

这样做的原因是使用`check_for_rvm: true`导致运行的命令是：

```
$ /Users/jladieu/.rvm/bin/rvm-auto-ruby ruby -c test.rb
/Users/jladieu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby:1: invalid multibyte char (US-ASCII) 
```

设置`ruby_verify_command`为正确省略`ruby`会导致运行以下命令：

```
$ /Users/jladieu/.rvm/bin/rvm-auto-ruby -S -c test.rb
Syntax OK 
```

# java - 如果未安装 Java，请在 Mac 上通知用户

> ID：15990808
> 
> 赞同：0
> 
> 时间：2013-04-13T17:36:33.490
> 
> 标签：java, macos, deployment

我想知道是否有办法在 Mac 上通知用户 Java 不存在并打开下载页面？

在 Windows 上可以使用 launch4j。

不，我不想使用 Java webstart，因为我的想法是使用 App Bundler 将其转换为 .app。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:40:59.163

如果您查看[Launch4J](http://launch4j.sourceforge.net/)网站，您会发现它也支持 Mac OS。在 Launch4J 或任何其他 Java 启动器解决方案的情况下，检查 JRE 是否存在的不是 Java 代码 - 它是 C(++) - 本机可执行文件。

# eclipse - 使用 Neo4j-Anormcypher 播放框架

> ID：15990810
> 
> 赞同：1
> 
> 时间：2013-04-13T17:36:38.610
> 
> 标签：eclipse, scala, playframework-2.0, neo4j

我想将 Neo4j 库的 AnormCypher 包含到我在 Eclipse 中的 playframework 项目中，但我卡住了。我正在使用 Windows 8。这些是我正在做的几个步骤；

*   从 CMD(CommandPrompt) "play new testproject" 创建一个项目
*   为 Eclipse“testproject eclipse”创建项目文件

*   正如它提到的这个链接：[AnormCypher](https://github.com/AnormCypher/AnormCypher)我正在 创建一个 build.sbt 文件，然后我运行“play compile”。

毕竟在 Eclipse 中我无法访问 org.AnorCypher 库。我找不到添加它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:12:30.650

I solved it and i didnt use build.sbt,just edited the Build.scala file and ran the "play compile" command in CMD.

Build.scala:

```
 import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "project1"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    jdbc,
    anorm

  )

   val Repos = Seq(
    "anormcypher" at "http://repo.anormcypher.org/",
    "Mandubian repository snapshots" at "https://github.com/mandubian/mandubian-mvn/raw/master/snapshots/",
    "Mandubian repository releases" at "https://github.com/mandubian/mandubian-mvn/raw/master/releases/"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here  

        resolvers ++= Repos,
        libraryDependencies ++= Seq(
                "play"        %% "play-json" % "2.2-SNAPSHOT",
                "org.anormcypher" %% "anormcypher" % "0.4.0"

              )    
  )

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T17:28:08.720

只需按照 Github 上的说明，“play compile”并重新运行“play eclipse”命令。这是我的 build.sbt：

```
name := "myprojectname"
version := "1.0-SNAPSHOT"
resolvers ++= Seq(
  "anormcypher" at "http://repo.anormcypher.org/",
  "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases/"
)
libraryDependencies ++= Seq(
  jdbc,
  anorm,
  cache,
  "org.anormcypher" %% "anormcypher" % "0.4.4"
)     
play.Project.playScalaSettings 
```

# android - 如何覆盖标准的 ActionBar 功能？

> ID：15990817
> 
> 赞同：1
> 
> 时间：2013-04-13T17:37:10.167
> 
> 标签：android, eclipse, overriding, android-actionbar

我想覆盖标准的 ActionBar 以便在进行上一个活动之前进行一些检查。我想检查是否在editText中输入了一些内容，如果是，我想询问是否输入任何内容都返回或留在此窗口中。我只想知道在哪里放置 if else 循环。

这是在 onCreate 中：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
    } 
```

还有两种方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activityB, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:45:59.763

对用户输入做出反应的地方是`onOptionsItemSelected`。在 ActionBar 所需项目的 case 块中，您可以检查`if(EditText.getText() != null)`是否输入了某些内容。

编辑：

```
@Override 
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        if(yourEditText.getText() != null){
            // ask user what to do
        } else {
            // nothing was typed -> move to home activity
            NavUtils.navigateUpFromSameTask(this);
        }
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

# node.js - 如何连接到 cloud9 服务器内部的“localhost”上运行的进程

> ID：15990818
> 
> 赞同：9
> 
> 时间：2013-04-13T17:37:10.587
> 
> 标签：node.js, cloud9-ide

我有一个 Javascript 项目，我在**cloud9 IDE 在线**工作，我想使用**testem npm 模块**测试我的代码：npmjs.org/package/testem 以及 Mocha 或 Jasmine 等库。

我[在 net tuts + 上关注本教程](http://net.tutsplus.com/tutorials/javascript-ajax/make-javascript-testing-fun-with-testem/)

我已经安装了***testem npm 模块***，但是当我在 cloud9 的终端窗口中使用命令“ **testem** ”运行它时，testem 要求我在“ **localhost:7357** ”中打开一个新选项卡

通常要在 cloud9 中预览工作区文件，我会转到 [https://c9.io/username/folders.../workspace/folders.../index.html](https://c9.io/username/folders.../workspace/folders.../index.html)

由于我在 cloud9 服务器上，我想知道是否可以从浏览器打开此“ **localhost** ”链接，如果可以，我该怎么做？

（我***在 cloud9 的 IDE*****中尝试了 ' localhost** '、' **127.0.0.1** '、' **0.0.0.0** ' ，但没有成功）。

 *也许我可以以不同的方式访问它？

像“username.cl9.io/workspace:PORT”？

如果没有，也许可以提供一个链接和端口到 testem （并且有机会怎么做？）。我知道在 cloud9 中您可以使用**process.env.IP**和**process.env.PORT**提供给不同的模块，但不知道以后如何从浏览器打开这些文件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:23:10.183

如果您正在运行节点进程：http: **//workspacename.username.c9users.io**将是访问它的链接。

如果要预览工作区中的特定文件 **：**[https](https://c9users.io/) : **//c9users.io/username/workspacename/workspace/filename.html**

 **## 例子：

我的名字是 bob，我的项目名称是 mycoolproject。

*运行*节点服务链接——http : **//mycoolproject.bob.c9users.io**

*直接***文件**预览链接**-** [https://c9users.io/bob/mycoolproject/workspace/index.html](https://c9users.io/)

 ***** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-24T01:39:41.727

如果您使用主机和端口变量运行 testem：

```
testem --host $IP -p $PORT 
```

您应该能够通过转到外部服务器的根目录从浏览器进行连接：

```
http://workspace.username.c9users.io/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T21:12:02.143

我知道这是一个非常晚的回应，但我觉得您只需要正确的主机名，您就可以开展业务。我获取C9主机名的方法如下：

如果你打开一个终端并通过输入来访问 mysql 命令行

`mysql-ctl start`

其次是

`mysql-ctl cli`

这将带您进入 MySQL 命令行界面，然后您可以运行以下查询：

`SHOW VARIABLES WHERE Variable_name = 'hostname';`

它将在主机名列下返回您的主机名，该列*应*如下所示：

`yourUsername-yourProjectName-XXXXXXX`

其中`X`' 构成一个 7 位数字。您可以使用它作为您的主机名，而不是*localhost*或*127.0.0.1*（这对大多数人来说从来没有用过，我不确定为什么其他 SO 帖子上的人总是建议这些）。我之前曾使用此主机名将我的 PHP 脚本与我的 MySQL 数据库同步（在 C9 实现内置 phpMyAdmin 之前），并且总是成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-06T23:37:48.027

**对不起，你不能！**

> 托管 Cloud9 工作区上的可用端口
> 
> 如果您正在开发服务器应用程序，请注意您需要监听 0.0.0.0 ($IP) 和 8080 ($PORT)。监听此端口将使您的应用程序可以在 http://-.c9users.io 上查看
> 
> 还可以绑定8081和8082端口，分别可以通过http://-.c9users.io:8081和http://-.c9users.io:8082访问。
> 
> 请注意，8080、8081 和 8082 是托管 Cloud9 工作区上唯一可用的端口。

[https://docs.c9.io/docs/run-an-application](https://docs.c9.io/docs/run-an-application)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-24T21:12:03.740

在 C9.io 上对我来说很简单。

**`Just open the file(i.e server.js or index.js or index.html) and click on preview button.`**

**哇，你完成了。:)**

希望它有所帮助。

*我使用 node + express + react 创建了一个应用程序，然后我创建了一个简单的 server.js 并单击预览，它打开了浏览器。********

# android - 使用 OO 和 Java 将相同对象写入数据库的最有效方法

> ID：15990820
> 
> 赞同：1
> 
> 时间：2013-04-13T17:37:30.823
> 
> 标签：android, memory-leaks

我正在为安卓计算。我尽量小心内存泄漏，因为我的程序正在处理大量数据，而垃圾收集器似乎很忙。

我想知道之间是否有区别：

```
for (int i=0;i<200;i++) 
{
   MyObject myobject = new MyObject(i,i+1);
   myobject.writeToDatabase();
} 
```

和

```
MyObject myobject=null;
for (int i=0;i<200;i++) 
{
    myobject = new MyObject(i,i+1);
    myobject.writeToDatabase();
} 
```

和（避免使用构造函数）

```
MyObject myobject=new MyObject(0,1);
myobject.writeToDatabase();
for (int i=1;i<200;i++) 
{
   myobject.setFirstValue(i);
   myobject.setSecondValue(i+1);
   myobject.writeToDatabase();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:39:07.063

第三种选择是迄今为止最好的。在这种情况下，其他两个选项在 Java 中几乎相同。

如果您不是每次都创建一个新对象，而是再次使用旧对象，那么您正在为垃圾收集器减轻大量工作。这是提高性能和内存管理效率的好方法。

在前两个选项中，您基本上是在做同样的事情：在循环开始时创建一个新对象，并在循环结束时让它被销毁。您继续对指针使用相同的变量这一事实并没有太大的区别。

**编辑：**

正如[Stochastically](https://stackoverflow.com/users/2110762/stochastically)所说，您的代码不会导致任何内存泄漏，只是因为垃圾收集器将确保不会发生这种情况。我猜测毕竟有一些技巧会导致内存泄漏，但在正常情况下不会发生。但正如我所解释的，您仍然可以通过使用更少的对象来提高垃圾收集效率。

# cassandra - Cassandra CQL2中的选择语句不一致

> ID：15990822
> 
> 赞同：2
> 
> 时间：2013-04-13T17:37:33.523
> 
> 标签：cassandra, cql

问题 - 我能够在 CQL2 中不存在的列值上使用 select 语句检索结果（但这在 CQL3 中不会发生）；谁可以给我解释一下这个 ？

你明白为什么我会在我的选择查询中得到一个不存在 C0 列值 ('test') 的结果吗？我不明白 - 见下文：一定有什么错误配置，但是什么？

```
cqlsh> use Keyspace1;
cqlsh:Keyspace1> CREATE COLUMNFAMILY users (
             ... KEY varchar PRIMARY KEY,
             ... gender varchar,
         ... birth_year bigint);
cqlsh:Keyspace1> INSERT INTO users (KEY, gender, birth_year) VALUES ('TEST', 'm', 1968);
cqlsh:Keyspace1> select * from users;
 KEY  | birth_year | gender
------+------------+--------
 TEST |       1968 |      m

cqlsh:Keyspace1> select * from users where key = 'TEST';
 KEY  | birth_year | gender
------+------------+--------
 TEST |       1968 |      m

cqlsh:Keyspace1> CREATE INDEX birth_year_key ON users (birth_year);
cqlsh:Keyspace1> CREATE INDEX gender_key ON users (gender);
cqlsh:Keyspace1> select * from users where key = 'TEST' and birth_year = 1968;
 KEY  | birth_year | gender
------+------------+--------
 TEST |       1968 |      m

cqlsh:Keyspace1> select * from users where  birth_year = 1968;
 KEY  | birth_year | gender
------+------------+--------
 TEST |       1968 |      m 
```

到目前为止，一切都很好，但现在看：

```
cqlsh:Keyspace1> select * from users where key = 'TEST' and birth_year = 1962;
 KEY  | birth_year | gender
------+------------+--------
 TEST |       1968 |      m 
```

这里发生了什么 ？谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:59:46.650

对我来说，这听起来像是 CQL2 中的一个错误。

事情是这样的：基本上，CQL2 仍然存在的唯一原因是，针对它编写的少数应用程序可以继续工作。不会添加新功能，也不会修复任何错误（因为这可能会导致其他地方的回归）。

因此，如果您正在构建一个新应用程序，您绝对应该使用 CQL3。不要将 CQL2 视为任何有意义的替代方案。请参阅[http://www.datastax.com/dev/blog/cql3-for-cassandra-experts](http://www.datastax.com/dev/blog/cql3-for-cassandra-experts)，详细了解 CQL2 的缺点，这些缺点促使我们创建 CQL3 作为替代品。

# sql - 在 SQL 中将列值重复到行中

> ID：15990828
> 
> 赞同：2
> 
> 时间：2013-04-13T17:38:16.610
> 
> 标签：sql, sql-server, pivot, rows

我想知道如何将包含重复列值的列转换为 MSSQL 中的行。这是我正在使用的示例。

```
CREATE TABLE Colors
(
    Time_ Time,
    Color varchar(6),
    count int
)

INSERT INTO Colors VALUES ('10:00', 'Red', 2);
INSERT INTO Colors VALUES ('10:00', 'Orange', 3);
INSERT INTO Colors VALUES ('10:00', 'Yellow', 6);
INSERT INTO Colors VALUES ('10:00', 'Green', 9);
INSERT INTO Colors VALUES ('10:00', 'Blue', 2);
INSERT INTO Colors VALUES ('11:00', 'Red', 3);
INSERT INTO Colors VALUES ('11:00', 'Orange', 4);
INSERT INTO Colors VALUES ('11:00', 'Yellow', 6);
INSERT INTO Colors VALUES ('11:00', 'Green', 7);
INSERT INTO Colors VALUES ('11:00', 'Blue', 1);
INSERT INTO Colors VALUES ('12:00', 'Red', 2);
INSERT INTO Colors VALUES ('12:00', 'Orange', 2);
INSERT INTO Colors VALUES ('12:00', 'Yellow', 7);
INSERT INTO Colors VALUES ('12:00', 'Green', 9);
INSERT INTO Colors VALUES ('12:00', 'Blue', 4); 
```

和 SQLFiddle：[http ://sqlfiddle.com/#!3/48657/1](http://sqlfiddle.com/#!3/48657/1)

我正在寻找的是一张表格，其中的行是 Time_、Red、Orange、Yellow、Green、Blue。所以它看起来像这样：

![](https://i.imgur.com/HBOyrz7.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:42:45.077

```
SELECT  Time_,
        Red, 
        Orange, 
        Yellow, 
        Green, 
        Blue
FROM
    (
        SELECT  Time_, Color, Count
        FROM    Colors
    ) orgData
    PIVOT
    (
        MAX(Count)
        FOR Color IN (Red, Orange, Yellow, Green, Blue)
    ) pvt 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/48657/2)

# c# - 通知 windows azure 中的所有 Webrole 实例

> ID：15990830
> 
> 赞同：0
> 
> 时间：2013-04-13T17:38:27.703
> 
> 标签：c#, azure, azure-storage

我正在开发一个云应用程序，它索引大量文档（使用 lucene），并托管一个 wcf 服务来搜索它。我有3个角色：

*   我是托管 WCF 服务的 Web 角色，并将索引的副本保存在内存中。
*   我用于管理的网络角色（更新索引）。
*   一个工作角色，它等待更新消息，如果收到则开始更新。

我计划拥有更多 WCF 托管网络角色的实例。通知 wcf 角色的所有实例、刷新其内存索引的最佳方法是什么？

我想每周更新一次或两次索引，所以拉模型（我认为）对我来说不是最好的，因为大多数“拉”都会返回而没有结果，我们必须为每一个存储交易。

你认为呢？

谢谢你的回答。

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:57:45.147

我建议您查看 Azure 服务总线主题。它们允许将通知发送给多个客户。您仍然需要每 X 分钟轮询一次消息，但由于服务总线是按消息定价的（每 10,000 条消息一分钱），而且您每周只发送两次消息，因此成本将是微不足道的。

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)

# c# - 在 Secod 数组中查找 Uncommon 元素

> ID：15990832
> 
> 赞同：-5
> 
> 时间：2013-04-13T17:38:48.483
> 
> 标签：c#, .net, arrays, linq

```
int[] arr1 = { 5, 4, 3, 2, 1 };
        int[] arr2 = { 1, 2, 4, 5 };

        for (int i = 0; i < arr1.Length; i++)
        {
            for (int j = 0; j < arr2.Length; j++)
            {
                if (arr1[i] == arr2[j])
                {
                    //Console.Write(arr1[i]);
                }

            }
        } 
```

上述代码的输出：

5,4,2,1

我想要输出：

3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T17:39:47.147

您可以使用该`Except`方法

```
arr1.Except(arr2); 
```

此外，要查找共同元素，您可以使用以下`Intersect`方法：

```
arra1.Intersect(arr2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:39:54.553

使用[Enumerable.Except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)方法找出两个序列的差异：

```
foreach(var item in arr1.Except(arr2))
    Console.Write(item); 
```

* * *

如果不允许使用 LINQ，则只需检查第二个数组是否包含第一个数组中的项目

```
for (int i = 0; i < arr1.Length; i++)
{
    if (!arr2.Contains(arr1[i]))
        Console.WriteLine(arr1[i]);
} 
```

# java - 在hibernate / gorm中获取n级深度关系

> ID：15990836
> 
> 赞同：0
> 
> 时间：2013-04-13T17:39:13.857
> 
> 标签：java, hibernate, grails, grails-orm

我已经实现了一个支持 n 级深度嵌套的类别域。

Category 表包含一个 parent_id，它只是 Category 表的一个 id。

```
public class Category {

String name;
//Reference to parent category
Category parentCategory;
//Child categories if this Category is a parent (Should I keep this in domain or remove it?)
Set categories;
} 
```

A > B > C

M > N > O > P > Q

上面的层次结构可以通过将A的id设置为B的parent_id，将B的id设置为C的parent_id，将M的id设置为N的parent_id，将N的id设置为O的父id等等来创建。

现在我想显示所有类别的树状结构（使用 jsTree）。获取数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:39:00.623

您可以将 hasMany 与 self 的关系用于子子类别。

```
public class Category {
   String name;
   //Reference to parent category
   Category parentCategory;
   static hasMany = [subCategories: Category]
} 
```

现在，您可以通过使用“。”对父元素进行延迟获取以获取子元素。对父元素进行操作或使用标准来急切地获取所有子元素（前提是成本不高）。

注意：我们只需要`parentCategory`为了将树从叶节点向上移动到根节点。如果只需要一种方式遍历，那么`hasMany`映射就足够了。

# c - C中的方法重载

> ID：15990838
> 
> 赞同：4
> 
> 时间：2013-04-13T17:39:31.417
> 
> 标签：c, overloading

由于 C 不支持方法重载，怎么可能有像 一样的方法[`open`](http://linux.die.net/man/2/open)，它显式地提供了两种不同的签名：

```
int open(const char *pathname, int flags);
int open(const char *pathname, int flags, mode_t mode); 
```

我`printf`的意思是，使用 支持不同数量的参数`vargs`，但除了使用自身的参数之外没有明确的签名——否则[每个可能的](https://stackoverflow.com/a/2351800/1655939)调用都`vargs`应该有一个签名。然而，正如我所推测的那样，它是用 C 语言编写的，并提供了两个明确的签名。[`printf`](https://stackoverflow.com/a/2351800/1655939)`open()`

我实际上并没有得到这些功能的实现方式。有人可以展示一个函数如何的小例子：

```
void foo() { printf("bar\n"); }
void foo(int x) { printf("bar %d\n", x); } 
```

将在 C 中实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:44:41.447

该函数`open`使用可变数量的参数定义：

```
int open(const char *_path, int _oflag, ...) 
```

这是一个来源 [`<fcntl.h>`](http://www.raspberryginger.com/jbailey/minix/html/fcntl_8h-source.html); 该函数使用宏`open`在底部声明。`_PROTOTYPE`

请注意，它使用的部分原因`open`是该函数已经采用了其他参数。为了使函数采用可变数量的参数，它必须至少采用一个“固定”参数。这就是为什么不能用你的`foo()`函数做这个技巧的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:47:01.567

您选择了一个糟糕的参考资料 ( [http://linux.die.net](http://linux.die.net) ) 来了解此功能。一个更好的是[Open Group Base Specifications](http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html)。它显示了以下声明`open()`：

```
int open(const char *path, int oflag, ... ); 
```

所以换句话说，这只是可变参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:47:40.490

> 怎么可能有像 open 这样的方法，它明确地提供了两个不同的签名：

等等，等等，等等……不。差远了。阅读[文档怎么样？](http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html)

`open()`是一个可变参数函数，它的签名是

```
int open(const char *path, int oflag, ... ); 
```

这里没有魔法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:42:39.323

正如您在问题中提到的那样，您不能在程序中定义同名的函数超过 1 次

使用宏将允许您在 C 代码中定义函数超过 1 次，但只会编译 1 个函数

```
#ifdef MACRO1
void foo() { printf("bar\n"); }
#else
void foo(int x) { printf("bar %d\n", x); }
#endif 
```

主要是

```
#ifdef MACRO1
    foo();
#else
    foo(5);
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T17:45:15.400

它都是基于可变参数的。在打开的情况下，它只读取某些输入和状态的第三个参数。特别是当它必须创建文件时。同样， printf 仅在扫描 % 格式标记时读取参数。你的情况并没有真正起作用，因为没有早期的论据来表明有多少论据。

# python - python open() - 访问被拒绝

> ID：15990843
> 
> 赞同：4
> 
> 时间：2013-04-13T17:40:00.537
> 
> 标签：python, file-io, stdin

这是我在 stackoverflow 上的第一篇文章，所以如果有问题我很想学习！

我正在用 python 为 Cinema 4d 编写插件。一切都在 Mac 上运行，但我在 Windows 上遇到了我要解释的问题。

如果在渲染服务器上渲染，插件需要一个服务器路径。我希望用户输入一次路径，然后将其存储在 .txt 文件中。

对于 c4d，正在安装插件，方法是将插件拖放到插件文件夹中，例如：

C:/programm 文件/Maxon/Cinema4D/Plugins/NewPluginGoesHere

为了保持一切都干净整洁，我还希望插件文件夹中的 pathToServer.txt（仅存储一行与路径的文本文件）。将插件安装（放置）到所述文件夹时，.txt 文件已经存在 -> 不是由插件创建的。

问题来了：

我打开并写入文件

```
pathFile = open(pathToPathFile, "w")
pathFile.write(pathToServerFolder) 
```

在mac上工作正常，但抛出

```
IOError: [Errno 13] Permission denied: 'C:\\Program Files\\MAXON\\CINEMA 4D R14\\plugins\\MultiLayerRender\\Renderserverpath.txt' 
```

在 Windows 上。

我对使用 python 执行此类任务（如文件管理）非常缺乏经验。

然后我尝试了以下方法：

```
pathFile = subprocess.Popen(pathToPathFile, stdin = subprocess.PIPE, stdout = subprocess.PIPE, shell = True)
pathFile.communicate(input = pathToServerFolder)
pathFile.stdin.close() 
```

这不会给我一个错误，但它似乎也没有做任何事情：/

我阅读了 subprocess 的 python 文档，但这确实对我没有帮助，如果有的话，它让我感到困惑。

我注意到，我还需要在管理员模式下运行我的代码编辑器，以便它有权直接保存到所述目录中的插件文件夹中。似乎“程序文件”文件夹中的文件受到某种保护。此外，此插件将安装在几台不同的计算机上，无论是 mac 还是 windows，因此不能更改例如 programm 文件夹的权限。最后，只需拖放即可安装它。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:43:09.717

您需要提升权限才能写入 Windows 上的 Program Files，不知何故您的插件没有它们。我会考虑只使用另一个目录。

许多渲染解决方案要求您在某处指定目录，所以我认为这不是一个大问题。modo 501 和 601（大概是 701），例如需要一个目录来共享数据。V-Ray for Maya 或多或少要求您以分布式模式将场景文件放在共享驱动器上。

# c++ - 在 C++ 中意外调用析构函数

> ID：15990844
> 
> 赞同：0
> 
> 时间：2013-04-13T17:40:01.720
> 
> 标签：c++, oop, destructor

请考虑以下代码。

```
#include<iostream>

using namespace std;

class A
{
private:
  int *x;
public:
  A(int a)
  {
    cout<<"creating "<<a<<" "<<this<<endl;
    x = new int;
    *x = a;
  }

  A(A *a)
  {
    this->x = a->x;
  }

  ~A()
  {
    cout<<"destroying "<<x<<endl;
    delete x;
  }

  A *operator+(A a)
  {
    return new A(*x + *(a.x));
  }

  void display()
  {
    cout<<*x<<endl;
  }
};

int main()
{
  A a(5);
  A b(10);
  A c = a + b;

  cout<<"control returns to main"<<endl;
  a.display();
  b.display();
  c.display();
  return 0;
} 
```

它产生以下输出。

```
creating 5 0xbffd6710
creating 10 0xbffd6714
creating 15 0x9273028
destroying 0x9273018
control returns to main
5
0
15
destroying 0x9273038
destroying 0x9273018
destroying 0x9273008 
```

我不明白为什么在控件返回主函数之前调用了析构函数。更重要的是为什么要调用它`b`？如果在它返回的新对象上调用`operator+`它是可以理解的，因为当控件超出对象范围时会调用析构函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T17:43:43.860

```
A *operator+(A a)
  { 
```

按价值接收。这意味着当

```
a + b; 
```

遇到一个新的副本`b`被创建并传递给 `operator+(A a)`

您没有看到构造了新的构造函数，因为您没有实现复制构造函数并且编译器为您创建了它。否则，您将看到又创建了一个 A。

如果你改为`operator*`这样引用

```
 A *operator+(A& a)
  {
    return new A(*x + *(a.x));
  } 
```

您将不会再看到破坏，因为没有创建副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:46:45.253

你：

*   不要为*复制构造函数*（目前是编译器生成的）输出“创建”（或者，实际上，正确处理您的资源）

*   正在看到临时的`a + b`被摧毁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:49:08.767

您对复制构造函数和`+`运算符的实现是错误的。试试这个：

```
class A
{
private:
  int *x;
public:
  A(int a)
  {
    cout << "creating " << a << " " << this << endl;
    x = new int;
    *x = a;
  }

  A(const A &a)
  {
    cout << "copying " << *(a.x) << " " << this << endl;
    x = new int;
    *x = *(a.x);
  }

  ~A()
  {
    cout << "destroying " << *x << " " << this << endl;
    delete x;
  }

  A operator+(const A &a)
  {
    return A(*x + *(a.x));
  }

  void display()
  {
    cout << *x << endl;
  }
}; 
```

# javascript - ImageAreaSelect：根据 aspectRatio 预选最大的缩略图

> ID：15990847
> 
> 赞同：2
> 
> 时间：2013-04-13T17:40:34.113
> 
> 标签：javascript, jquery, jquery-plugins, crop, aspect-ratio

这是我第一次尝试的方式：

```
$('#thumbnail').imgAreaSelect({ 
    x1: 5,
    y1: 5,
    x2: $('#thumbnail').width(),
    y2: $('#thumbnail').width()*0.66,
    aspectRatio: '1:0.66'
}); 
```

但是一些裁剪的图像不会溢出......

这似乎对我尝试过的大多数图像分辨率进行了预选......

```
var thwidth = $('#thumbnail').width();
var thheight = $('#thumbnail').height();
aspectRatio = 0.66;

$('#thumbnail').imgAreaSelect({ 
    x1: 5,
    y1: 5,
    x2: thwidth - 80,
    y2: (thwidth - 80) * aspectRatio,
    aspectRatio: '1:0.66'
}); 
```

但它不会选择可能的最大值；加上它对我来说看起来有点脏......

如何选择**尊重纵横比****的最大**（如果可能，居中）宽度/高度坐标？（在这种情况下：1：0.66）

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:36:59.330

试试这个代码

```
 var selWidth = 500;

        var photo = $('#photo'),
           photoWidth = parseInt($('#photo').width()),
           maxWidth = Math.min(selWidth, photoWidth)
           aspectRatio = 0.66,
           maxHeight = maxWidth * aspectRatio,
           yTop = parseInt(photo.height()) / 2 - maxHeight / 2;

        $('img#photo').imgAreaSelect({
           x1: photoWidth / 2 - maxWidth / 2,
           y1: yTop,
           x2: (photoWidth / 2 - maxWidth / 2) + maxWidth,
           y2: yTop + maxHeight
        }); 
```

[jsfiddle](http://jsfiddle.net/cePZm/1/)此代码创建**具有给定纵横比**和**最大宽度的****居中**选择区域。如果*最大宽度*超过图像的宽度，则使用图像的宽度作为*最大宽度*。请注意，它适用于 jquery 1.8.3，我认为这是因为 imageareaselect 插件与最新的 jquery 版本不兼容（不过我不确定）。

 ******* * *

## 更新

我改进了代码以包含*height overflwo*和*aspectRatio > 1*的情况。我希望这适用于所有条件:)

```
 var selWidth = 350;

        var photo = $('#photo'),
           photoWidth = parseInt($('#photo').width()),
           photoHeight = parseInt($('#photo').height()),
           maxWidth = Math.min(selWidth, photoWidth),
           aspectRatio = 0.66,
           maxHeight = maxWidth * aspectRatio;

        if (maxHeight > photoHeight) {
           maxHeight = photoHeight;
           maxWidth = maxHeight * ( 1 / aspectRatio);
        }

        var yTop = photoHeight / 2 - maxHeight / 2;

        $('img#photo').imgAreaSelect({
           x1: photoWidth / 2 - maxWidth / 2,
           y1: yTop,
           x2: (photoWidth / 2 - maxWidth / 2) + maxWidth,
           y2: yTop + maxHeight
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T11:58:42.133

我准备了这个[小提琴](http://jsfiddle.net/pJAQp/)。我比 Ejay 花了一点时间，但我包括了一个视觉演示。

计算出拇指的位置和宽度后，就可以这么简单了。（使用小提琴中的变量名）

```
$('#thumbnail').imgAreaSelect({ 
    x1: thumbX,
    y1: thumbY,
    x2: thumbX+thumbW,
    y2: thumbY+thumbH,
}); 
```********

# html - 为什么我在页面右侧出现空白？

> ID：15990848
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:40:50.930
> 
> 标签：html, css, twitter-bootstrap

我在浏览器的右侧有这个空白区域。我不知道这是什么原因造成的。我正在使用推特引导程序。

[这是网站](http://8tracksdownloader.tk)

如果添加了溢出：隐藏，则滚动条消失。请帮我解决这个问题。

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:45:13.130

带有 id 加载器的 div 包含一个类 span、5 和 offset5 的 div。移除 offset5 类并将其中的 img 的 css 设置为`margin: 0 auto; display: block;`

# android - 更改 ArrayAdapter 时多久调用一次“notifyDataSetChanged()”

> ID：15990849
> 
> 赞同：0
> 
> 时间：2013-04-13T17:40:51.633
> 
> 标签：android, android-arrayadapter, notifydatasetchanged

onei 有一个 ArrayAdapter，它实现了 EditText 字段的自动完成建议列表。

```
AutoCompleteTextView ediFrom = (AutoCompleteTextView) findViewById(R.id.ediFrom);   
ArrayList<String> autoCompleteLib = new ArrayList<String>();
autoCompleteFromAdapter = new AutoCompleteAdapter(this, android.R.layout.simple_dropdown_item_1line, autoCompleteLib);
ediFrom.setAdapter(autoCompleteFromAdapter); 
```

在 TimerTask （所以是后台线程）运行时，我将元素添加到此列表中：

```
synchronized (lock)
{
autoCompleteLib.add(newAddress);
} 
```

现在我想更新自动完成提案列表。*在所有添加操作完成后*调用“notifyDataSetChanged()”是否足够/正确，或者我是否在每个“autoCompleteLib.add”之后调用“notifyDataSetChanged()”？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:43:44.297

如果要为添加的每一行更新适配器，请为添加`notifyDataSetChanged()`的每一行调用。如果没有，请`notifyDataSetChanged()`在工作完成后致电。

这取决于你想要什么，但我建议你只调用一次。如果您将有例如百万行，那么每次将新项目添加到适配器时调用 notify 方法是很恶心的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T17:43:54.473

> 在所有添加操作完成后调用“notifyDataSetChanged()”是否足够/正确，或者我是否在每个“autoCompleteLib.add”之后调用“notifyDataSetChanged()”？

`notifyDataSetChanged()`告诉 ListView（或 GridView 等）重绘整个 ViewGroup，这可能会很慢，并且只应在您想要实际*查看*每个更改时使用。

如果您只是批量添加一堆项目，我建议您在完成对数据集的更改后调用一次，没有理由在后台调用`notifyDataSetChanged()`每个更改。

# windows - windows中断调度

> ID：15990852
> 
> 赞同：1
> 
> 时间：2013-04-13T17:41:14.273
> 
> 标签：windows

假设我当前正在运行用户模式应用程序，并且从窗口内部发生硬件中断，调度过程是：

1) 当处理器从 PIC 获得中断信号时，它会询问控制器以获取中断请求 (IRQ)。

2) 中断控制器将 IRQ 转换为中断号，使用调度表 (IDT)，并将控制权转移到适当的中断调度例程。

我的问题是在哪种情况下执行中断调度例程？

如果它们发生时是进程上下文切换？

我知道软件中断（APC/DPC）处理发生在中断的进程上下文中。

# file - 在 symfony2 中从数组创建文件

> ID：15990853
> 
> 赞同：0
> 
> 时间：2013-04-13T17:41:20.933
> 
> 标签：file, symfony, csv

我必须使用 symfony2 控制器创建一个数组，并将数组作为 csv 文件返回，以便用户可以下载它。Wat 是最好的方法吗？我不想将此文件存储在服务器中..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:08:50.820

您可以通过创建数据字符串然后将其作为 Response 对象返回来实现。

例如，您的数据...

```
$lines = array(
    array('some', 'random', 'stuff'),
    array('in', 'an', 'array'),
); 
```

设置变量

```
$delimeter = ','; // Set the delimeter
$enclosure = '"'; // Set the enclosure
$filename = uniqid(); // Set the filename, for this a unique id 
```

循环浏览行和字段，然后将它们组合成一个字符串（如果在现场使用，也可以将外壳加倍）

```
$content = '';

foreach ($lines as $line)
{
    $fields = array();
    foreach ($line as $field)
    {
        $fields[] = $enclosure . str_replace($enclosure,
                        $enclosure . $enclosure, $field) . $enclosure;
    }
    $content .= implode($delimeter, $fields) . "\n";
} 
```

创建并返回您的响应对象集作为可下载文件

```
$response = new Response($content);
$response->headers->set('Content-Type', 'application/csv');
$response->headers->set('Content-Disposition', 
                            sprintf('attachment; filename="%s.csv"', $filename));

return $response; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:48:17.373

它不是真正的 Symfony 相关，但你可以在 PHP 中很容易地做到这一点：

```
<?php
$lines = array(
    array('foo', 'bar', 'baz'),
    array('lorem', 'ipsum', 'dolor'),
);

foreach ($lines as $line) {
    for ($i = 0; $i < count($line); $i++) {
        echo $line[$i];

        if ($i < count($line) - 1) {
            echo ",";
        } else {
            echo "\n";
        }
    }
} 
```

# php - 参考资料——关于 PDO 的常见问题

> ID：15990857
> 
> 赞同：52
> 
> 时间：2013-04-13T17:41:38.327
> 
> 标签：php, pdo

### 这是什么？

这是关于 PHP 数据对象的常见问题列表

### 为什么是这样？

由于 PDO 有一些普通 PHP 用户不知道的特性，所以关于 PDO 中的准备语句和错误处理的问题非常常见。所以，这只是一个可以找到所有这些的地方。

### 我应该在这里做什么？

如果您的问题已与此列表密切相关，请在下面找到您的问题并将修复应用于您的代码。简要了解其他问题也是一个好主意，让自己为其他常见的陷阱做好准备。

### 名单

*   [PDO 查询失败，但我看不到任何错误。如何从 PDO 获取错误消息？](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15990858)
*   [如何将准备好的语句与 LIKE 运算符一起使用？](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15990965)
*   [如何为 IN () 运算符创建准备好的语句？](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15991146)
*   [我可以使用 PDO 准备语句来绑定标识符（表或字段名称）或语法关键字吗？](https://stackoverflow.com/questions/23482104/can-i-use-a-pdo-prepared-statement-to-bind-an-identifier-a-table-or-field-name)
*   [PDO 准备好的语句导致 LIMIT 语句中的错误](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15991623)

也可以看看

*   [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/q/3737139/285587)
*   [参考 - 这个错误在 PHP 中是什么意思？](https://stackoverflow.com/q/12769982/285587)
*   [参考 - 什么是变量范围，哪些变量可从何处访问，哪些是“未定义变量”错误？](https://stackoverflow.com/q/16959576/285587)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-13T17:41:38.327

### PDO 查询失败，但我看不到任何错误。如何从 PDO 获取错误消息？

为了能够看到数据库错误，必须将[PDO errmode](http://php.net/manual/en/pdo.error-handling.php)设置为异常。异常在很多方面都优于常规错误：它们始终包含堆栈跟踪，可以使用 try..catch 捕获它们或使用专用错误处理程序进行处理。即使未经处理，它们也会作为常规 PHP 错误提供所有重要信息，遵循站点范围的错误报告设置。

请注意，将此模式设置为连接选项将使 PDO 在连接错误时也抛出异常，这非常重要。
因此，这是一个正确创建 PDO 连接的示例：

```
$dsn = "mysql:host=$host;dbname=$db;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    // other options 
);
$pdo = new PDO($dsn, $user, $pass, $opt); 
```

以这种方式连接，您将始终收到在查询执行期间发生的所有数据库错误的通知。请注意，您必须能够看到一般的 PHP 错误。在实时站点上，您必须查看错误日志，因此，设置必须是

```
error_reporting(E_ALL);
ini_set('display_errors',0);
ini_set('log_errors',1); 
```

在本地开发服务器上，可以在屏幕上出错：

```
error_reporting(E_ALL);
ini_set('display_errors',1); 
```

当然，您永远不应该`@`在 PDO 语句前使用错误抑制运算符 ( )。

另外，由于许多不好的例子告诉你将每个 PDO 语句包装成`try..catch`块，我必须做一个明确的说明：

> **不要使用 try..catch 运算符来回显错误消息。**未捕获的异常已经非常适合此目的，因为它的行为方式与其他 PHP 错误相同 - 因此，您可以使用站点范围的设置来定义行为 - 因此，**您将获得没有这些无用代码的错误消息。** *虽然无条件回显的错误消息可能会向潜在的攻击者透露一些敏感信息，但会使诚实的访问者感到困惑。*
> 
> *   稍后可以添加[自定义异常处理程序，但不是必需的。](http://www.php.net/manual/en/function.set-exception-handler.php)特别是对于新用户，建议使用未处理的异常，因为它们非常有用、有用且安全。
> *   `try..catch`仅在您要处理错误本身时使用 - 例如，回滚事务。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-13T18:54:29.043

### PDO 准备好的语句导致 LIMIT 子句中的错误

出于兼容性目的，除非另有说明，否则 PDO 将仅通过用实际数据替换占位符来*模拟准备好的语句，而不是将它们单独发送到服务器。*并且使用“惰性”绑定（在 execute() 中使用数组），PDO 会将每个参数视为字符串。结果，准备好的`LIMIT ?,?`查询变成`LIMIT '10', '10'`了导致查询失败的无效语法。

这个问题也可以解决

*   通过关闭仿真模式（因为 MySQL 可以正确排序所有占位符）：

    ```
    $conn->setAttribute( PDO::ATTR_EMULATE_PREPARES, false ); 
    ```

*   通过显式绑定和设置正确的类型 (PDO::PARAM_INT)：

    ```
    $stm = $pdo->prepare('SELECT * FROM table LIMIT ?, ?');
    $stm->bindValue(1, $limit_from,PDO::PARAM_INT);
    $stm->bindValue(2, $per_page,PDO::PARAM_INT);
    $stm->execute();
    $data = $stm->fetchAll(); 
    ```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-13T17:51:27.267

### 如何将准备好的语句与 LIKE 运算符一起使用？

准备好的语句只能表示**完整的数据字面**量。不是文字的一部分，也不是复杂的表达式，也不是标识符。但无论是**字符串还是数字**。因此，一个非常常见的陷阱是这样的查询：

```
$sql = "SELECT * FROM t WHERE column LIKE '%?%'"; 
```

如果你稍微思考一下这个查询，你就会明白，在单引号内，问号变成了字面问号，对准备好的语句没有任何特殊含义。

因此，必须使用准备好的语句发送完整的字符串文字。有两种可能的方式：

*   要么先准备完整的表达式：

    ```
    $name = "%$name%";
    $stm  = $pdo->prepare("SELECT * FROM table WHERE name LIKE ?");
    $stm->execute(array($name));
    $data = $stm->fetchAll(); 
    ```

*   或在查询中使用串联

    ```
    $sql = "SELECT * FROM t WHERE column LIKE concat('%',?,'%')"; 
    ```

虽然后者似乎过于臃肿。

# ember.js - Ember.js - 切换路由时防止重新渲染

> ID：15990860
> 
> 赞同：1
> 
> 时间：2013-04-13T17:41:48.700
> 
> 标签：ember.js

简化演示： http: [//jsfiddle.net/indream/KskXx/](http://jsfiddle.net/indream/KskXx/)
（此演示无法模拟我的问题的实际环境）

对于演示：将鼠标悬停在照片上会显示标题。
当您单击照片时，路线更改为“媒体”，`{{linkTo}}`并打开了助手和灯箱。
当点击灯箱外的地方时，路线更改回“供稿”，`history API`灯箱关闭。

**我的问题**：切换回“提要”时**重新渲染**模板。
~~（您可以通过将鼠标悬停在照片上来检查它，因为在那之后标题丢失。）~~
如果有很多照片，我想停止这个，因为应用程序在重新渲染期间滞后。

***使用`{{linkTo}}`是问题的原因，请参考我的回答***

我已经阅读了与服务相关的问题，例如Ember.js - currentViewBinding 并停止在 Emberjs 中销毁之前对每个视图转换和[动画视图进行](https://stackoverflow.com/questions/15092632/)[重新渲染](https://stackoverflow.com/questions/10908205/)。 但是提供的方法似乎不适用于 RC2，我尝试修改事件，它适用于不重新渲染但它抛出： 当我切换到另一条路线时（即为加载其他内容为空）。并且修改根本不起作用。
`willDestroy`
`Uncaught Error: Cannot perform operations on a Metamorph that is not in the DOM.`
`Uncaught Error: NotFoundError: DOM Exception 8`
`nowContent``destroyElement`

这是我的代码，有什么想法可以解决我的问题吗？

```
App.MainView = Ember.View.extend({
  templateName:'main',
  willDestroy: function() {
    if (App.get('destroyCurrentView')){
      this._super();
    }
  }
})
App.PageController = Ember.Controller.extend({
  lightboxClose:function(e){
    if(!e||e.target==e.currentTarget){
      $('#lightbox').hide();
      $('body').removeClass('noscroll');
      history.back();

      App.set('destroyCurrentView',false);
      setTimeout(function(){
        App.set('destroyCurrentView',true);
      }, 500);
    }
});
App.MediaRoute = App.mainRoute.extend({
  enter:function(){
    App.set('destroyCurrentView',false);
    this._super();
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:21:53.370

我已经通过更改`{{linkTo}}`和`{{action}}`编辑`onUpdateURL`位置 API 的处理程序解决了这个问题。

因为`{{linkTo}}`必须冒泡到路由器而`{{action}}`不是。使用这种方法，URL 仍然会像 Facebook 一样更改页面刷新，但模板不会重新呈现。

旧模板：

```
{{#linkTo media feed.id}}
<img src="{{unbound feed.images.low_resolution.url}}" />
{{/linkTo}} 
```

新模板：

```
<img {{action transitionToMedia feed.id}} src="{{unbound feed.images.low_resolution.url}}" /> 
```

位置处理程序：

```
Ember.HistoryJsLocation = Ember.Object.extend({
  onUpdateURL: function(callback) {
    ...
    Ember.$(window).bind('popstate.ember-location-'+guid, function(e) {
      if(window.suppressUpdateURL)return;
      ...
    });
  }
});

Ember.Location.registerImplementation('historyJs', Ember.HistoryJsLocation); 
```

路由器事件：

```
App.mainRoute = Em.Route.extend({
  events: {
    transitionToMedia: function (id) {
      window.suppressUpdateURL = true;
      History.pushState(null, null, '/m/'+id);
      App.pageController.lightbox(id);
    }
  }
}); 
```

灯箱控制器：

```
Folo.PageController = Em.Controller.extend({
  lightboxClose: function(e){
    ...
    History.back();
    window.suppressUpdateURL = false;
  }
}); 
```

注意：完整代码`HistoryJsLocation`请参考[Html4 浏览器不支持 HTML5 中 History API 的 history.pushState 和 history.replaceState 方法](https://stackoverflow.com/questions/15835397/)

# sdk - 将关节 坐标 (x,y,z) 保存在 txt 文件中 Microsoft Kinect sdk v1.5

> ID：15990862
> 
> 赞同：0
> 
> 时间：2013-04-13T17:41:55.857
> 
> 标签：sdk, coordinates, kinect

我喜欢将关节坐标 (x,y,z) 保存在文本文件中，C# 语言，Microsoft Kinect v1.5。

我现在可以获得关节坐标，我的问题是如何将它传递给文本文件。因为当我创建一个循环时，我无法关闭流。

如果有人可以帮助我不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:58:26.140

Kinect 工具箱 - [http://kinecttoolbox.codeplex.com/](http://kinecttoolbox.codeplex.com/) - 提供将 3 个流中的任何一个保存到文件的能力。

如果您希望扮演自己的角色，则该`Skeleton`对象是可序列化的对象。在每个`SkeletonFrameReady`回调中，您可以将适当`Skeleton`的内容保存到`List`（或其他数组类型对象），然后在`List`准备好保存时将其序列化到文件中。

# javascript - 分离无线电输入，将 div 附加到正确的输入

> ID：15990866
> 
> 赞同：1
> 
> 时间：2013-04-13T17:42:14.373
> 
> 标签：javascript, jquery, input, append

我的代码：

```
$(document).ready(function () {
    $("input").focus(function () {
        $(this).css('outline-color', '#559FFF');
        $(this).blur(function () {
            $(this).css("outline-color", "#FF0000");
        });
    });
    $("input").click(function () {
        var value = $(this).val(function () {
            $(this).html("");
        });
    });
    $(".awesome").click(function () {
        var toStore = $("input[name=name]").val();
        if (!/^[A-Za-z]+ [A-Za-z]+$/.test(toStore)) {
            alert("You Must Put a Valid Name");
        } else {
            $("#contain").children().fadeOut(1000);
            $("#contain").delay(1000).queue(function () {
                $("#contain").append("<p>Welcome to My Quiz : " + toStore + "</br>" +
                    "Youll Get 10 Questions To Answer </br> " +
                    "Here Is the First One:</p>");

                var allQuestions = {
                    outquestions:{
                        question1 : {    quest: "What number was Michel Jorden?",
                            choices: ["22","32","23","5"],
                            correctAnswer: "23"},
                    question2 : {    quest: "what contries are with the border of israel?",
                            choices: ["eygpt,iraq syria and lebanon","jordan iraq iran and lebanon","eygpt,iraq kuwiet and lebanon","eygpt lebanon jordan and syria"],
                            correctAnswer: "eygpt lebanon jordan and syria"},
                    question3 : {    quest: "who was the lead singer of queen?",
                            choices: ["jhon lenon","freddie mercury","neil young","bob dylan"],
                            correctAnswer: "freddie mercury"},
                    question4 : {    quest: "the island australia once was belong to?",
                            choices: ["UK","US","germany","UA"],
                            correctAnswer: "UK"},
                    question5 : {    quest: "What is the number of states in USA?",
                            choices: ["25","60","50","54"],
                            correctAnswer: "50"},
                    question6 : {    quest: "who was the first prime minister of israel?",
                            choices: ["David ben gurion","hertzel","rabin","beegin"],
                            correctAnswer: "david ben gurion"},
                    question7 : {    quest: "when was the ym kipur war?",
                            choices: ["79","73","71","69"],
                            correctAnswer: "73"},
                    question8 : {    quest: "when was the yaer of the anoncment israel?",
                            choices: ["45","50","44","48"],
                            correctAnswer: "48"},
                    question9 : {    quest: "Who is the prime minister of israel?",
                            choices: ["bibi","lapid","sheli","liberman"],
                            correctAnswer: "bibi"},
                    question10 : {    quest: "What is the first name of jobs from apple company?",
                            choices: ["steve","bob","jhon","dude"],
                            correctAnswer: "steve"}
                    },
                    correctAnswers: 0
                };

                var outquestions = allQuestions["outquestions"];
                for (var question in outquestions) {
                    $("#contain").append("<p>" + outquestions[question]['quest'] + "</p>");
                    for (var choice in outquestions[question]["choices"]) {
                        $("#contain").append("<p><input type='radio' name=question value=choice>" +outquestions[question]["choices"][choice] + "</p>");
                    }
                }
                $("#contain").append("<form><input type='button' id='test' value='test' name='SbBt'/></form>");
           $("#test").click(function(){
           var storeq = $("input[name=question]").val(function(){
           $(this).append("<div class='vi'></div><div class='vi2'></div>");
           });
           });
            });
        }
    });
}); 
```

我有两个问题要解决。

首先，当我添加我的输入时，我试图为每个问题选择一个单选按钮。但是，我只能为所有问题选择一个单选按钮。

第二件事是我想获取所选单选按钮的值并检查它是否与`correctAnswer`. 如果是，我想在该单选按钮上附加一个像 a`V`这样的符号，这样客户就会知道他的回答正确。

这是我的完整代码：http: [//jsfiddle.net/QPpMT/](http://jsfiddle.net/QPpMT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:57:39.100

为了快速回答您的部分问题，您的单选按钮被链接的原因是因为它们基于输入中的名称元素。您可以通过向问题对象添加唯一名称并在迭代它们时进行设置来解决此问题。

更改以下行应该会给您所需的结果：

```
$("#contain").append("<p><input type='radio' name="+ question +" value="+ outquestions[question]['choices'][choice] +">" +outquestions[question]['choices'][choice] + "</p>"); 
```

至于第二部分，如果您想要他们点击的即时结果，只需添加一个 onclick 函数来检查正确答案并附加适当的 div/元素/图标。您可能最好在此处使用 :checked 选择器来帮助查找相应单选按钮的值。您可能需要将您的问题变量移动到获取类型函数，以便其他函数可以轻松访问它。

如果您需要更详细的代码解释，我很乐意提供。

编辑：我看到你刚刚发布了一个小提琴，我会看一下并进行相应的编辑。

做了一些改变： http: [//jsfiddle.net/njgray/QPpMT/3/](http://jsfiddle.net/njgray/QPpMT/3/) 我添加了一些评论来尝试解释我做了什么。这只是一种方法，可能不是最有效的方法，但应该足够了。

# c# - 空格分隔的数字字符串的排序列表

> ID：15990868
> 
> 赞同：-1
> 
> 时间：2013-04-13T17:42:29.420
> 
> 标签：c#, string, sorting

我有一个这样的列表：

```
List<String> strings = new List<string>();
strings.Add("1 23 4");
strings.Add("1 4 23"); 
```

当我对此进行排序时，我希望结果为 {(1 4 23), (1 23 4)}。但是，通常的字符串排序会给出 {(1 23 4), (1 4 23)}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:50:49.003

```
var result = strings.Select(s => new {  
                                    orgstr = s, 
                                    sortstr = String.Join("", s.Split(' ').Select(x => x.PadLeft(10, '0'))) 
                                })
                    .OrderBy(x => x.sortstr)
                    .Select(x => x.orgstr); 
```

* * *

测试用例

```
List<String> strings = new List<string>();
strings.Add("1 23 4 5 6");
strings.Add("1 1 24 2 4");
strings.Add("1 4 23 2 4"); 
```

# c# - 任何用于处理 Excel（*.xls 和 *.xlsx）文件的开源/免费库？

> ID：15990871
> 
> 赞同：15
> 
> 时间：2013-04-13T17:42:36.430
> 
> 标签：c#, export-to-excel

我知道一些用于处理 Excel 文件的开源库，但这些库仅用于 *.xls 或 *.xlsx，例如 NPOI 用于 *.xls，EPPlus 和 ClosedXML 用于 *.xlsx。由于性能问题，我不想使用 Microsoft Excel 自动化。您能否向我推荐一些满足此目的的开源或免费库（同时处理 *.xls 和 *.xlsx）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T17:52:59.263

[电子表格灯](http://spreadsheetlight.com/)怎么样？是开源的，具有 MIT 许可证。

# c# - 使用 GPU（可能是 CIFilters）将图像放置在更大的画布上，而不使用图像上下文

> ID：15990878
> 
> 赞同：3
> 
> 时间：2013-04-13T17:42:50.467
> 
> 标签：c#, ios, xamarin.ios, gpu, core-image

假设我有一个 100x100 的图像。我想将图像放置在 500x500 的较大画布上。

我目前的方法是使用 UIGraphics 创建一个上下文，然后将图像绘制到上下文上。

```
UIGraphics.BeginImageContext(....);
ImageView.Draw (....); 
```

这很好用，但它并没有我想要的那么快。我注意到 CIFilter 非常快。 **有没有一种方法可以使用 CIFilters 将图像放置在更大的画布上，或者使用 GPU 而不是 CPU 的另一种方法？** 我已经尝试过 CIFilters CICrop 和 CIPerspectiveTransform 但我似乎无法得到我想要的结果......

![在此处输入图像描述](https://i.stack.imgur.com/hVZsK.png)
原始图像 100x100

![在此处输入图像描述](https://i.stack.imgur.com/DAsOS.png)

我想要的结果图像为 500x500。我只是想使用 CIFilters 或一些 GPU 操作来获取图像并增加它的画布大小。

我尝试使用 CICrop 进行“反向裁剪”，但没有奏效。请注意，即使图像本身是 100x100，我也将 CIVector 的大小指定为 500x500，结果图像完全忽略了多余的空间，如果关闭则将其截断。这是我的代码：

```
 CICrop crop = new CICrop();
        crop.Image = ImageView.Image.CGImage;
        crop.Rectangle = new CIVector(0, 0, 500, 500);
        ImageView.Image = new UIImage(crop.OutputImage);
        Console.WriteLine("ImageView.Image.size = "+ ImageView.Image.Size); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T10:46:16.927

裁剪过滤器不会满足您的目的 - 您无法使用裁剪过滤器缩放输入图像的大小。来自维基百科：裁剪是指去除图像的外部部分以改善取景、突出主题或改变纵横比。

你需要的是一个比例过滤器。要使用 CoreImage 实现这一点，您需要执行以下操作：

```
CIImage *input = [CIImage imageWithCGImage: ImageView.Image.CGImage]; // input image is 100 X 100
CGAffineTransform transform = CGAffineTransformMakeScale(5.0f, 5.0f); // Scale by 5 times along both dimensions
CIImage *output = [input imageByApplyingTransform: transform];
// output image is now 500 X 500 
```

# javascript - 从网页读取 div 值

> ID：15990888
> 
> 赞同：1
> 
> 时间：2013-04-13T17:43:55.627
> 
> 标签：javascript

我还没有找到任何关于这个的东西。我想从网站读取数据。从我的网页中，我可以读取 div 的值

```
<div class="tools">hammer</div>

var divs = document.getElementsByTagName("div");
    for(var i=0; i<divs.length; i++ ) {
        if(divs[i].className == "tools") {
            alert(divs[i].innerHTML);
        }
    } 
```

是否可以设置所需网页的 URL，以便此代码抓取该页面？我知道类名和网址。

根据@cereallarceny 的回答，我创建了这个代码块，但在运行脚本时没有看到任何警报：

```
$.ajax({
type: 'get',
url: 'https://play.google.com/store/apps/details?id=com.viber.voip',
crossDomain: true, //Very important, ensures you can get data from a domain that isn't your own!
success: function() {
  var divs = document.getElementsByTagName("div");
    for(var i=0; i<divs.length; i++ ) {
        if(divs[i].className == "votes") {
            alert(divs[i].innerHTML);
        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:48:07.327

如果您使用的是像 jQuery 这样的库，那么您可以简单地使用`load()`获取网页代码的函数（或者如果您将 a 附加`#myDiv`到 URL，则可以使用网页的一部分）。如果你把它放在一个变量中，你就可以处理这些信息。如果您只是使用 Javascript，那么您需要考虑发出 AJAX 请求（这是什么`load()`）。[您可以在此处](https://stackoverflow.com/questions/8197709/javascript-read-html-from-url-into-string)找到有关如何执行此操作的更多信息。

有关该`load()`函数的更多信息，[请阅读 jQuery 的文档](http://api.jquery.com/load/)。

请记住，jQuery 的`load()`功能是将 HTML 加载到元素中。如果您想读取和操作该数据，那么您可能应该使用该[`ajax()`函数](http://api.jquery.com/jQuery.ajax/)。这样，您可以执行以下操作：

```
$.ajax({
    type: 'get',
    url: 'http://www.google.com',
    crossDomain: true, //Very important, ensures you can get data from a domain that isn't your own!
    success: function(data) {
        $('#myDiv').html(data);

        //Now I can handle all the HTML from my URL from a <div> tag called #myDiv, the following will alert out the body of http://www.google.com
        alert($('#myDiv').find('body'));
    }
}); 
```

这实际上将向指定的 URL 发出**GET**请求，同时注意它与请求的来源（您的服务器）的域名不同，然后在一个函数中处理成功，并在一个变量中返回 HTML `data`。您可以使用您现在喜欢的数据，因为它现在是您的变量，包括按您喜欢的方式解析该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:59:18.903

```
$file=fopen($URL,'r'); 
    if ($file) 
    { 
    $string =""; 
    while (!feof($file)){ 
            $string .=fgets($file,512); 
    } 
echo $string; 
}else echo "error"; 
```

这与网络相呼应。但你可以用它做任何事情。

行。这是一个如何在 js 中请求一个网站

```
var xmlhttp;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

   xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    return xmlhttp.responseText;
    }
  }

var answerFromURL=xmlhttp.onreadystatechange();

    xmlhttp.open("GET","urlToParse.php",true);
    xmlhttp.send(); 
```

# python - 在 PyCharm 中，网页在调试模式下刷新，而不是在运行模式下

> ID：15990889
> 
> 赞同：1
> 
> 时间：2013-04-13T17:43:58.443
> 
> 标签：python, google-app-engine, google-chrome, pycharm, webapp2

我正在使用 Python 2.7、webapp2 和 Jinja 编写一个 GAE webapp。在开发中，我在 Max OSX 10.7.5 (Lion) 上的 PyCharm 2.7.1 下运行该应用程序。我目前使用 Chrome 26.0.1410.43 作为我的浏览器。

我不确定这是 PyCharm 问题，但这是我的最佳猜测。这是一个描述：

当我使用“调试”控件启动应用程序时，当我从一个页面导航到另一个页面时，网页会自动刷新。也就是说，如果我从页面 A 开始，导航到页面 B，采取一些操作来更改 A 的外观，然后导航回 A，就会出现更改。

但是，当我使用“运行”控件启动应用程序时，没有其他更改，网页不会自动刷新。在同样的情况下，当我导航回 A 时，会出现该网页的旧版本。我需要单击浏览器的刷新控件才能看到更新的页面。

请告诉我如何阻止浏览器在运行模式下显示缓存页面。我还没有尝试将它发布到我们的 GAE 网站，希望它不会在那里发生，但我需要运行模式才能在我正在创建的视频教程中获得性能。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T15:51:27.377

事实证明，这不是刷新或缓存问题，而是时间问题。在某些情况下，GAE 使用一种更新算法，该算法会在应用事务之前产生延迟。在运行模式下，在更新完成之前正在请求新页面；在调试模式下，有足够的时间完成更新。

一种解决方案是更改数据存储架构以消除读取过时版本的数据，但这会导致其他更严重的问题。

另一种解决方案是在更新之后但在显示更新的记录之前包括瞬间延迟。不理想，因为不可能知道延迟需要多长时间，但目前这已经令人满意。

# prolog - 如何在 Prolog 中实现 arg 谓词？

> ID：15990890
> 
> 赞同：0
> 
> 时间：2013-04-13T17:44:06.863
> 
> 标签：prolog

我在要求我在 Prolog 中实现经典的 arg 谓词的练习中遇到了一些麻烦。

```
arg(?Arg, +Term, ?Value) 
```

其中 Arg 是 Term 参数列表中参数的索引。值它是这个参数的值。

例如：

```
arg(1, t(f(X),Y,a), Value)
Value = f(X). 
```

因为 f(x) 它是 t 主函子的参数列表中的第一个参数。

所以我试图以这种方式使用 univ **=..**谓词来解决练习：

```
myArg(ArgIndex, Term, ArgValue) :- integer(ArgIndex),
                                   Term =.. [_|ArgsList],
                       countArg(ArgsList, ArgIndex, ArgValue). 
```

我的想法是： ArgIndex 必须是一个整数，我可以将我的 Term 分解为其主函子和参数列表**ArgsList**，现在我必须计算参数（在此列表中），直到 ArgIndex 为 0

但我无法计算并接受这个值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:33:21.550

您需要的可能是`nth`（有关语义，请参见[此处](http://www.swi-prolog.org/pldoc/doc_for?object=nth1/3)）。要实现它，如果您出于某种原因不想使用内置：

```
nth(1, [H|_], H).
nth(N, [_|Tail], Nth) :- N > 1, N1 is N-1, nth(N1, Tail, Nth). 
```

（第一个参数必须是实例化的整数）

如果你真的不知道如何自己实现这个谓词，你可能想看看“Prolog 的艺术”，Sterling 和 Shapiro。它们展示了许多 SWI-Prolog 内置程序的大量示例和参考实现。

# matlab - 如何在 Matlab 中将标准输出重定向到标准输入？又如何管理文件描述符？

> ID：15990891
> 
> 赞同：0
> 
> 时间：2013-04-13T17:44:23.580
> 
> 标签：matlab, file-descriptor

我的同行创建了一个极难测试的新[结构](https://stackoverflow.com/questions/15985647/how-to-find-the-command-by-which-certain-struct-done-in-matlab)，他们使用标准输出来输出结果。现在我无法更改他们的代码，我需要使用他们的功能。假设一个函数`mlfpprint`使用标准输出来显示结果——现在我需要检查它的结果是否正确，所以我需要将标准输出传递给一个变量，以便与正确的结果进行比较。所以

**如何在 Matlab 中管理文件描述符？例如，如何将标准输出转换为标准输入？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:05:59.737

一种想法是使用[`diary`](http://www.mathworks.nl/help/matlab/ref/diary.html)将函数调用/脚本的输出保存到文件中。然后解析文件。此外，正如 Oleg 推荐的那样，您可以使用[evalc](http://www.mathworks.se/help/matlab/ref/evalc.html) like `evalc('functionName')`。

# javascript - 当前浏览器对 w3c `FileWriter` 接口的支持是什么？

> ID：15990893
> 
> 赞同：0
> 
> 时间：2013-04-13T17:44:36.677
> 
> 标签：javascript, cross-browser, standards

当前浏览器对 w3c`FileWriter`界面的支持是什么？

我主要对桌面版 Chrome 和 Firefox 感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:52:44.347

看看[这里](http://caniuse.com/#feat=filesystem)。仅在带有 webkit 前缀的 Chrome 中受支持。

# google-app-engine - GAE 应用程序中出现 HTTP 405 错误的原因是什么？

> ID：15990894
> 
> 赞同：0
> 
> 时间：2013-04-13T17:44:39.530
> 
> 标签：google-app-engine, servlets

我正在使用 Eclipse 开发 Google App Engine 应用程序。我在登录页面，但我点击登录，然后它显示“错误 405 HTTP 方法 POST 不受此 URL 支持”？

这是我的servlet代码：

**我的 LgServlet.java：**

```
package com.lan;

import java.io.IOException;
import javax.servlet.http.*;

public class LgServlet extends HttpServlet {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    public void doPost(HttpServletRequest req,HttpServletResponse resp)
            throws IOException {
                check(req,resp);
            }
    @Override
    public void doGet(HttpServletRequest req,HttpServletResponse resp)
            throws IOException {
                check(req,resp);
                }

    public void check(HttpServletRequest req,HttpServletResponse resp)
            throws IOException {
        if(req.getAttribute("userID").equals("admin")&&req.getAttribute("userPassword").equals("123456")){
            resp.setContentType("text/plain");
            resp.getWriter().println("Hello Admin");
        }
}

} 
```

**我的 web.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
    <servlet>
        <servlet-name>lg</servlet-name>
        <servlet-class>com.lan.LgServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>lg</servlet-name>
        <url-pattern>/lg</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**index.jsp 的一部分：**

```
<form action="lg" method="post"> 
```

我希望有人可以帮助向我解释为什么我会收到这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T09:23:51.367

尝试改变

```
<form action="lg" method="post"> 
```

至

```
<form action="/lg" method="post"> 
```

没有其他看起来不合适的地方。我最近收到了这个错误，但这是因为我在 doPost 调用中调用了 super.doPost()。

高温高压

# jquery - 在某些计算区域上更改光标图标

> ID：15990907
> 
> 赞同：2
> 
> 时间：2013-04-13T17:45:55.687
> 
> 标签：jquery, css, dom, cursor

```
$(window).mousemove(function(e) {

   if(e.pageX > $(this).width()/2) {
       console.log('im on right');
    }else {
        console.log('im on left');
    }

}); 
```

简单明了，它可以工作，但是当：

```
$(window).mousemove(function(e) {

   if(e.pageX > $(this).width()/2) {
       $(this).addClass('horizontal');
    }else {
       $(this).addClass('vertical');
    }

}); 
```

它不起作用（没有任何变化），我错过了什么吗？

就此而言的CSS：

```
.horizontal { cursor: w-resize; }
.vertical { cursor: n-resize; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:55:20.683

您正在向对象添加一个类`Window`。Window 对象没有等效的 HTML 元素，因此您不能对其应用 CSS。相反，您应该使用`HTML`标签或`BODY`标签。

IE

```
$('html').addClass('class'); 
```

第二个问题是您正在添加类而不删除其他类。一旦用户将鼠标移动到屏幕的两侧`DOM`，您应用 的对象`CSS`将具有两个类，两者`.horizontal`和`.vertical`。要解决此问题，请使用`removeClass()`.

IE

```
$('html').mousemove(function(e) {

   if(e.pageX > $('html').width()/2) {
       $('html').removeClass('vertical');
       $('html').addClass('horizontal');
   } else {
       $('html').removeClass('horizontal');
       $('html').addClass('vertical');
   }

}); 
```

**编辑：**

默认情况下，`FireFox`'`HTML`元素的尺寸不等于浏览器`Window`。由于`mousemove`事件在`HTML`元素上，所以只会在页面有内容的区域触发。要解决此问题，请让`HTML`元素填满整个屏幕，而不管内容如何。

```
html {
   width: 100%;
   height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:50:37.803

[](http://jsfiddle.net/mohammadAdil/p3Rt5/1/)**在 Firefox 上工作的[**jsFiddle 演示**](http://jsfiddle.net/mohammadAdil/p3Rt5/1/)**

 **这可能是因为一旦添加您就不会删除类

看看这个作品是否适合你

```
if(e.pageX > $(this).width()/2) {
       $('body').addClass('horizontal');
       $('body').removeClass('vertical');
 }else {
       $('body').removeClass('horizontal');
       $('body').addClass('vertical');
 } 
```

[正如adeneo](https://stackoverflow.com/users/965051/adeneo)所指出的那样，我使用`$('body')`而不是`$(this)`您添加类`window`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:53:30.140

您不能将类添加到窗口。因此替换`this`为`body`.

```
$(window).mousemove(function(e) {

   if(e.pageX > $(this).width()/2) {
       $('body').addClass('horizontal');
    }else {
       $('body').addClass('vertical');
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:50:29.453

我可能错了，但您上面的代码看起来像是在尝试添加`window`我认为不可能的类。试试这个-：

```
$(window).mousemove(function(e) {
   $this = $('body');
   if(e.pageX > $(this).width()/2) {
       $this.addClass('horizontal');
    }else {
       $this.addClass('vertical');
    }
}); 
```**

# exception-handling - QEMU 异常处理

> ID：15990909
> 
> 赞同：1
> 
> 时间：2013-04-13T17:46:03.687
> 
> 标签：exception-handling, x86, kernel, qemu

我在测试一些会产生保护错误的代码时遇到了一个错误。我设置了异常处理程序，以便它期望 EIP 和堆栈不会改变，这是本机 CPU 上的标准行为。但是在 QEMU 上，ESP 和 EIP 在故障生成时都发生了变化。

操作系统是 32 位的，因此错误情况与跳出 CS 段有关。深入研究 QEMU 代码，似乎在 helper_ret_protected 中调用 raise_exception_error 之后设置了 EIP 和 ESP。所以，我不明白为什么我在客人身上看到了不同的行为。

我是否不了解 QEMU 如何生成异常，调用 ret_protected 方法后是否还有另一个步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:24:03.063

出现异常时，CPU 将在跨越特权级别边界时切换堆栈。因此，*[TSS](http://wiki.osdev.org/Task_State_Segment)*包含每个级别`SS`的`ESP`条目。如果触发故障的代码恰好在用户模式代码中，则堆栈将被更改。这些`SS:ESP`值是从TSS的`ss0`和字段中读取的。`ebp0`

我几乎不确定您所说的“期望`EIP`不会改变”是什么意思。

如果您可以提供有关您的问题的更多详细信息可能有助于找到正确的答案...

# git - Egit 无法从远程存储库中获取

> ID：15990911
> 
> 赞同：1
> 
> 时间：2013-04-13T17:46:09.230
> 
> 标签：git, bitbucket, egit

我刚开始将 git 与 bitbucket.org 和 egit（eclipse git 插件）结合用于家庭项目。我以前从未使用过 git（对于大学项目我只使用过 SVN），所以我想了解更多关于 git 的知识。我成功地创建了一个 bitbucket 存储库并将其克隆到我的笔记本电脑和台式电脑，并对本地存储库进行了一些更改。我在笔记本电脑和台式电脑上进行了一些更改，我知道这会在合并时导致冲突。因此，我将第一个更改从笔记本电脑推送到 bitbucket，并希望当我尝试从台式电脑推送内容时 git 会通知我冲突。当我现在尝试将更改从我的台式电脑推送到 bitbucket 时，它说我的推送被拒绝（它没有说明它为什么拒绝它）。如果我尝试从 bitbucket 获取某些东西到我的台式电脑，我必须选择一个目标 ref。

我阅读了一些关于 git 的小教程，并且大部分是手动配置了 egit，所以我可能会搞砸配置，或者我在这里使用了错误的工作流程。

我可以从哪里开始找到任何想法，这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:56:55.423

这是 Egit 中一个相当烦人的错误，当您使用 Egit 添加远程时，它不会正确配置远程。我已经看过一些教程和博客文章，但它们并不总是有帮助（有时甚至是错误的）。

要解决这个问题，最简单的方法可能是实际**使用 Git 添加远程**. 为此（假设您已经安装了 Git），请打开终端窗口，然后导航到无法获取的机器上的存储库。

在回购中，做

```
git remote remove origin
git remote add origin git@bitbucket.org:USER/REPO.git 
```

在这些命令中，`origin`是用于标识该远程的本地名称；您可以自由选择它（它在该本地存储库中必须是唯一的），但在删除命令中，它必须是当前存在于您的存储库中的远程名称，当然。

分别用您的 bitbucket 用户名和 repo 名称替换 bits`USER`和。`REPO`

这使用 SSH url，假设您已使用 bitbucket 注册了 SSH 密钥。如果您想改用 HTTPS url，您可以简单地在添加命令中使用它（您可以从 bitbucket 上的 repo 页面获取完整的 url）。

使用 Git 添加遥控器（而不是 Egit），将为遥控器工作进行所需的设置；然后，您应该能够使用 Git 和使用 Egit 进行推送和获取/拉取。

* * *

*技术细节说明：* Egit 在添加远程时没有设置默认的 refspec（或者在添加远程进行推送时，它没有设置用于获取的 refspec）。相反，它在第一次获取时要求用户输入一个 refspec（这与它询问您 ref name 的对话框相同），甚至没有建议一个合理的默认值。

使用 Git 添加远程时，push 和 fetch refspecs 设置为适用于绝大多数用例的默认值。

# java - 使用 Java 从网站解析数据

> ID：15990928
> 
> 赞同：0
> 
> 时间：2013-04-13T17:47:32.630
> 
> 标签：java, html, parsing, jsoup

我想从一个网站*解析一些卡片价格，这样我就可以自动更新我的收藏价值，这样我就不必一张一张地做

* [http://www.starcitygames.com](http://www.starcitygames.com)

例如来自[http://sales.starcitygames.com/category.php?t=a&cat=5243](http://sales.starcitygames.com/category.php?t=a&cat=5243)

我查看页面源代码，并没有在任何地方看到价格。知道价格是如何存储的，是否有办法获取它们？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:57:46.690

这个特定的站点使用图像和 CSS 来显示价格（可能是为了阻止您正在尝试做的事情）。

如果您深入研究源代码，您将看到如下内容：

```
<div class="oaqvOV">$</div>
<div class="xhzvwu tLRmnx2 oaqvOV">&nbsp;</div>
<div class="oaqvOV pkiHbu2 xhzvwu">&nbsp;</div>
<div class="oaqvOV tLRmnx2 xhzvwu">&nbsp;</div>
<div class="tLRmnx2 xhzvwu oaqvOV">&nbsp;</div> 
```

如果你继续深入研究 CSS，你会发现像这样的类：

```
.oqcnoG {
  background-image:url(http://sales.starcitygames.com/price_icons.php?id=5yVRpSxt2fzNPjifOrIkBH6MJ8DcHamdiinhpzowGIk);
} 
```

如果您看一下该图像，您会发现一些数字。这些构成了显示的价格。

您需要根据类进行解析，这些类可能是随机的，也可能不是随机的或随时间变化的，以防止这种活动。

# symfony - 如何检查模板中的其他用户或角色权限？symfony2

> ID：15990932
> 
> 赞同：10
> 
> 时间：2013-04-13T17:47:59.340
> 
> 标签：symfony, twig

我正在构建这个用户管理器，管理员可以在其中更改组或用户的权限。我不想使用 FOS 用户包，因为我想自定义很多。

我发现我可以向控制器中的另一个用户授予权限，但是如何读取另一个用户/角色的权限？是否可以在模板中读取另一个用户/角色的这些权限？

我想这样做的理想方式是：（查看组中用户和权限的页面）

1 获取控制器中的所有对象和用户

2 打印模板中的用户和对象。在对象旁边，打印该组拥有的权限：VIEW EDIT DELETE OWNER..

对于用户（不是当前）也是如此，我希望能够在模板中检查用户（不是当前）的权限。在给定的对象/类上..

我知道如何检查用户是否具有角色/组，但我想知道组/用户具有哪些权限，例如使用 ACL 编辑视图删除等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T19:54:15.970

您可以使用该函数通过twig检查当前用户是否具有角色[`is_granted`](http://symfony.com/doc/2.0/book/security.html#access-control-in-templates)

```
{% if is_granted('ROLE_USER') %}
  {{ app.user.username }}
{% endif %} 
```

在树枝中获取当前用户角色数组：

```
{{ app.user.roles }} 
```

如果您想从用户集合中显示，您可以执行以下操作（假设集合作为用户传递）

```
{% for user in users %}
  <p>
     {{ user.username }}:
     {% for role in user.roles %}
      {{ role }}
     {% endfor %}
  </p>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T09:22:31.057

我终于找到了一种方法，它可能不是最有效的方法，但它有效，并且是我知道的唯一方法，因为到目前为止没有人知道如何实现这一点。

首先，我为每个组都有一个默认用户，该用户无法登录（具有该组默认权限的虚拟用户） - 我获得了默认用户的安全 ID：

```
$defaultUser = $this->getDoctrine()
    ->getRepository('TdfUserBundle:User')
    ->findOneByUsername('-default-'.$group->getCode());

$sid = UserSecurityIdentity::fromAccount($defaultUser); 
```

我创建了一个权限数组来检查并设置一些空数组，并加载有问题的.acl_manager

```
$permissionsToCheck = array('VIEW', 'EDIT', 'CREATE', 'DELETE', 'OPERATOR', 'MASTER', 'OWNER');
$aclManager = $this->get('problematic.acl_manager'); 
```

然后我遍历我想要检查权限的对象，并检查我之前在 $permissionsToCheck 变量中设置的权限。我检查默认用户的权限。结果被放入我发送到模板的数组中。

```
foreach($forumCategories as $forumCategory) :
    $permissionArray[] = $this->checkPermissions($sid, $forumCategory, $permissionsToCheck, '');
endforeach; 
```

checkPermissions 函数从给定的对象返回权限数组和我需要的一些东西。

```
private function checkPermissions($sid, $object, $permissionsToCheck, $type) 
{
    $aclProvider = $this->get('security.acl.provider');
    $oid = ObjectIdentity::fromDomainObject($object);
    try {
        $acl = $aclProvider->createAcl($oid);
    }catch(\Exception $e) {
        $acl = $aclProvider->findAcl($oid);
    }
    $aclProvider->updateAcl($acl);
    foreach ($permissionsToCheck as $permissionCode):
        $permissionVar = 'can'.$permissionCode;
        $builder = new MaskBuilder();
        $builder->add($permissionCode);
        $mask = $builder->get();
        try {
            $$permissionVar = $acl->isGranted(array($mask),array($sid));
        } catch(\Exception $e) {
            $$permissionVar = false;
        }
        $tempPermissionsArray[$permissionCode] = $$permissionVar;
    endforeach;

    $returnArray = array('id' => $object->getId(),'title' => $object->getTitle(),'slug' => $object->getSlug(),'type' => $type, 'permissions' => $tempPermissionsArray);
    return $returnArray;

} 
```

在表单的 POST 之后，我检查哪些对象的权限发生了变化，如果是这样，我会遍历组中的所有用户。对于每个用户，撤销权限，然后获取所有组（组的默认用户）。检查每个组（默认用户）权限，检查要激活的权限并为用户提供正确的权限。

在这里，我将所有权限设置为 false，然后遍历所有角色/组（默认用户），看看是否应该设置权限。

```
 foreach($array['permissions'] as $permissionCode => $test ):
        $$permissionCode = false;
    endforeach;

    foreach($user->getRoles() as $role):
        $role   = str_replace('ROLE_', '', $role);

        $defaultUser = $this->getDoctrine()
            ->getRepository('TdfUserBundle:User')
            ->findOneByUsername('-default-'.$role);
        $sid = UserSecurityIdentity::fromAccount($defaultUser);

        // See all permissions
        foreach($array['permissions'] as $permissionCode => $test ):
            $builder = new MaskBuilder();
            $builder->add($permissionCode);
            $mask = $builder->get();
            try {
                $isGranted = $acl->isGranted(array($mask),array($sid));
                if($isGranted):
                    $$permissionCode = true;
                endif;
            } catch(\Exception $e) {

            }
        endforeach;
    endforeach; 
```

在此之后，我知道用户应该拥有什么权利，然后赋予该帐户所有权利：

```
$aclManager = $this->get('problematic.acl_manager');

$aclManager->revokeAllObjectPermissions($object, $user);

$mapping = array(
        'VIEW'      => MaskBuilder::MASK_VIEW,
        'EDIT'      => MaskBuilder::MASK_EDIT,
        'CREATE'    => MaskBuilder::MASK_CREATE,
        'UNDELETE'  => MaskBuilder::MASK_UNDELETE,
        'DELETE'    => MaskBuilder::MASK_DELETE,
        'OPERATOR'  => MaskBuilder::MASK_OPERATOR,
        'MASTER'    => MaskBuilder::MASK_MASTER,
        'OWNER'     => MaskBuilder::MASK_OWNER,
    );
foreach($array['permissions'] as $permissionCode => $test ):
    if($$permissionCode):
        $mask = $mapping[$permissionCode];
        $aclManager->addObjectPermission($object, $mask, $user);
    endif;
endforeach; 
```

# python - 来自错误变量的数据 - CSV

> ID：15990944
> 
> 赞同：0
> 
> 时间：2013-04-13T17:49:11.293
> 
> 标签：python, csv, beautifulsoup, web-crawler

我正在写一个美丽的网络爬虫。该脚本获取正确的数据并将其写入 csv 格式的文件。但是，当尝试读回数据时（接近代码末尾），我使用不同的变量名再次打开文件并尝试读取。然而，最后打印行的输出是来自原始站点的一堆 HTML 代码。我假设它来自“汤”字符串。到底是怎么回事？

```
import datetime
import csv
import urllib
from bs4 import BeautifulSoup
import urllib2

file_name = "/users/ripple/Dropbox/Python/FinViz.txt"
file = open(file_name,"w")

url = "http://www.finviz.com"
print 'Grabbing from: ' + url + '...\n'
try:
        r = urllib2.urlopen(url)
except urllib2.URLError as e:
           r = e
if r.code in (200, 401):    
    #get the table data from the page
    data = urllib.urlopen(url).read()
    #send to beautiful soup
    soup = BeautifulSoup(data)
    i=1
    for table in soup("table", { "class" : "t-home-table"}):
        #First and second tables
        if i==1 or i==2:
            for tr in table.findAll('tr')[1:]:
                if i<3:
                    col = tr.findAll('td')
                    ticker = col[0].get_text().encode('ascii','ignore')
                    price = col[1].get_text().encode('ascii','ignore')
                    change = col[2].get_text().encode('ascii','ignore')
                    volume = col[3].get_text().encode('ascii','ignore')
                    metric = col[5].get_text().encode('ascii','ignore')
                    record = ticker + ',' + price + ',' + change + ',' + volume + ',' + metric + '\n'
                    print record
                    file.write(record)
        if i==3:
            file.write('END\n')
        # Third and fourth tables
        if i==3 or i==4:
            for tr in table.findAll('tr')[1:]:  
                    col = tr.findAll('td')
                    ticker1 = col[0].get_text().encode('ascii','ignore')
                    ticker2 = col[1].get_text().encode('ascii','ignore')
                    ticker3 = col[2].get_text().encode('ascii','ignore')
                    ticker4 = col[3].get_text().encode('ascii','ignore')
                    metric = col[5].get_text().encode('ascii','ignore')
                    record = ticker1 + ',' + ticker2 + ',' + ticker3 + ',' + ticker4 + ',' + metric + '\n'
                    print record
                    file.write(record)
        i+=1
#if the page does not open
else: 
    print "ERROR:"
file.close()
#open written file to read tickers and download tables from finviz
file = open(file_name,"r")
finviz_csv = csv.reader(file)
for row in finviz_csv:
    stock = col[0]
    print stock 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:00:45.593

我很快就解决了这个问题。它应该如下所示：

```
for row in finviz_csv:
    colnum = 1
    for col in row:
        if colnum==1:
            stock = col
            print col 
```

# javascript - 上传前调整图像大小 - 将画布转换为文件对象

> ID：15990946
> 
> 赞同：19
> 
> 时间：2013-04-13T17:49:19.983
> 
> 标签：javascript, html, file-upload, html5-canvas

这是我现在使用 HTML5 File API 上传多个图像的代码片段：

```
/**
 * @param {FileList} files
 */
upload: function(files){
    nfiles = files.length;

    for (var i = 0; i < nfiles; i++) {
        /** @var file File **/
        var file = files[i];

        var xhr = new XMLHttpRequest();

        xhr.open("POST", settings.post_upload, true);
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
        xhr.upload.filenumb = i;
        xhr.filenumb = i;
        xhr.upload.filename = file.name;

        var nef = new FormData();
        nef.append("folder", settings.folder);
        nef.append("file_element", settings.file_elem);
        nef.append("udata", settings.user_data);
        nef.append(settings.file_elem, file);
        xhr.send(nef);

    }
} 
```

我想在使用画布对象上传*之前*调整图像大小，但没有这方面的经验，我不确定如何使用技术更新代码，例如此处描述的技术：[HTML5 Pre-resize images before uploading](https://stackoverflow.com/questions/10333971/html5-pre-resize-images-before-uploading)

`canvas.toDataURL("image/png");`将返回一个编码字符串。但我需要发布`File`对象。

## 编辑

您将如何为大多数现代浏览器编写（合理地）跨浏览器功能，以便在上传之前调整文件大小，以透明方式处理 jpg、png 和 gif：

```
/** 
 * @param {File} file 
 * @param int max_width
 * @param int max_height
 * @param float compression_ratio
 * @returns File
 */
function resize(file, max_width, max_height, compression_ratio){} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-16T21:21:05.233

尝试这样的事情：

```
function resize(file, max_width, max_height, compression_ratio, imageEncoding){
    var fileLoader = new FileReader(),
    canvas = document.createElement('canvas'),
    context = null,
    imageObj = new Image(),
    blob = null;            

    //create a hidden canvas object we can use to create the new resized image data
    canvas.id     = "hiddenCanvas";
    canvas.width  = max_width;
    canvas.height = max_height;
    canvas.style.visibility   = "hidden";   
    document.body.appendChild(canvas);  

    //get the context to use 
    context = canvas.getContext('2d');  

    // check for an image then
    //trigger the file loader to get the data from the image         
    if (file.type.match('image.*')) {
        fileLoader.readAsDataURL(file);
    } else {
        alert('File is not an image');
    }

    // setup the file loader onload function
    // once the file loader has the data it passes it to the 
    // image object which, once the image has loaded, 
    // triggers the images onload function
    fileLoader.onload = function() {
        var data = this.result; 
        imageObj.src = data;
    };

    fileLoader.onabort = function() {
        alert("The upload was aborted.");
    };

    fileLoader.onerror = function() {
        alert("An error occured while reading the file.");
    };  

    // set up the images onload function which clears the hidden canvas context, 
    // draws the new image then gets the blob data from it
    imageObj.onload = function() {  

        // Check for empty images
        if(this.width == 0 || this.height == 0){
            alert('Image is empty');
        } else {                

            context.clearRect(0,0,max_width,max_height);
            context.drawImage(imageObj, 0, 0, this.width, this.height, 0, 0, max_width, max_height);

            //dataURItoBlob function available here:
            // http://stackoverflow.com/questions/12168909/blob-from-dataurl
            // add ')' at the end of this function SO dont allow to update it without a 6 character edit
            blob = dataURItoBlob(canvas.toDataURL(imageEncoding));

            //pass this blob to your upload function
            upload(blob);
        }       
    };

    imageObj.onabort = function() {
        alert("Image load was aborted.");
    };

    imageObj.onerror = function() {
        alert("An error occured while loading image.");
    };

} 
```

请注意：

使用文件加载器和加载图像意味着存在一些延迟，因此该函数是异步的，因此试图简单地返回 blob 数据是行不通的。您需要等待加载发生，然后才能使用加载的数据并为每个文件触发对上传函数的调用。

文件加载器也可能有一些浏览器兼容性问题，但我认为这不可能以任何其他方式客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-17T11:21:15.867

**客户端图像大小调整**

选项 1\. 使用 Pica 库 ( [https://github.com/nodeca/pica](https://github.com/nodeca/pica) )

选项 2\. 使用以下自定义脚本 ( [http://jsfiddle.net/cL3hapL4/2/](http://jsfiddle.net/cL3hapL4/2/) )

```
var file = document.getElementById('imageUpload');
var mime = "image/jpeg";
var max_width = 100;
var max_height = 100;
var canvas = document.createElement("canvas");
var ctx = canvas.getContext("2d");
var img = new Image();

img.onload = function () {

    // Clear canvas, and resize image
    ctx.clearRect(0, 0, max_width, max_height);
    ctx.drawImage(img,
        0, 0, img.width, img.height, // size of image
        0, 0, max_width, max_height // size of canvas
    );

    // Get image from canvas as a dataURI, and convert to a blob object
    var dataURI = canvas.toDataUrl(mime);
    // Note: This function can be replaced with canvas.toBlob(),
    // once supported by browsers.
    // ---
    var image_blob = (function () {

        var binary = atob(dataURI.split(',')[1]);
        var array = [];
        for(var i = 0; i < binary.length; i++) {
            array.push(binary.charCodeAt(i));
        }
        return new Blob([new Uint8Array(array)], {type: mime});

    })();
    // ---

    // Attach blob-object (contains our image) to form object
    var form = new Form();
    form.append("image", image_blob);

    // Send AJAX request with multi-part data
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/route', true);
    xhr.send(form);

    // jQuery version
    //$.ajax({
    //    type: "POST",
    //    url: "/route",
    //    data: form,
    //    processData: false,
    //    contentType: false
    //})
    //.done(function (response) {
    //    console.log(response);
    //});

};
img.src = URL.createObjectURL(file); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T17:55:57.700

您可以调用`toBlob`元素`<canvas>`。这将返回一个`Blob`，它是 的父接口`File`。然后，您可以通过 XHR2 将此对象发送到您的服务器。

# r - 使用带有 GAM 的预测函数在其原始比例上绘制 y 轴，绘制不正确

> ID：15990947
> 
> 赞同：0
> 
> 时间：2013-04-13T17:49:24.297
> 
> 标签：r

我正在运行一个线性回归模型并使用 GAM 包来利用 plot.gam 函数。我倾向于稍后拟合非线性模型。

但是，为了获得 y 轴上的原始比例，我正在针对响应变量制作每个预测变量的单独图。该图应显示线性拟合线。但是，我得到一个线图，它在 x (maxt) 的某个范围内增加并在另一个范围内减小。我尝试对 x 变量 (maxt) 上的数据进行排序，但这没有帮助。鉴于 maxt 上的斜率系数为负，拟合值应随着 maxt 从负变为正而均匀下降。但这并没有发生。我确定我错过了一些东西。

这是我的 R 代码

```
library(gam)     
reg.l<-gam(y.res~ maxt.res + mint.res + sr.res+ rain.res + share.res,data=data.res)
#creating newdata for prediction
pred.data<-data.frame(data.res$maxt.res,mint=mean(data.res$mint.res),sr=mean(data.res$sr.res), rain=mean(data.res$rain.res),share_irrigated=mean(data.res$share.res))
names(pred.data)[1]<-"maxt"
ndx=order(pred.data$maxt)
pred.sorted=pred.data[ndx,]
save(pred.sorted,file="/users/ridhima/documents/paper3/R/pred.sorted.rda") 
load("/users/ridhima/documents/paper3/R/pred.sorted.rda")
#getting the fitted values 
fits=predict(reg.l, newdata=pred.sorted,type="response", se.fit=TRUE)
predicts=data.frame(pred.sorted,fits)
ndx1=order(predicts$maxt)
predicts.sorted=predicts[ndx1,]
library(ggplot2)
pdf("test2.pdf")
ggplot(aes(x=maxt,y=fit),data=predicts.sorted) + geom_smooth(aes(ymin=fit-   1.96*se.fit,ymax=fit+1.96*se.fit),fill="gray80",size=1,stat="identity")+geom_rug(sides="b")
dev.off() 
```

plot.gam 显示的图显示了一条线性拟合线，但我不知道为什么我的图不起作用。提前谢谢了。

# iphone - AVAudioPlayer 和按钮按下

> ID：15990948
> 
> 赞同：0
> 
> 时间：2013-04-13T17:49:40.483
> 
> 标签：iphone, ios, objective-c, avaudioplayer

嘿，我正在设计一个 iphone 应用程序，它以编程方式将按钮加载到滚动视图中并播放声音。我已经让声音按顺序播放，这很棒，但是每当我尝试按下按钮时，它不会记录按钮按下，直到序列中的最后一个声音开始播放。这是我播放 AVAudioPlayer 的主视图控制器中的代码：

```
- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {
for (menuCount = 0; menuCount < [ivrTree count]; menuCount++ ) {

    currentScript = [ivrTree objectAtIndex: menuCount];

    for (btnCount = 0; btnCount < [currentScript.menuChoices count]; btnCount = btnCount) {
        currentChoice = [currentScript.menuChoices objectAtIndex: btnCount];
        if (![thePlayer isPlaying]) {
            if (!mute) {
                [self playPromptAudiofromSRC:self src:currentChoice.audioSRC];
            }
            btnCount++;
        }
    }
}
thisMenuPlayed = true;

}
- (void)playPromptAudiofromSRC:(id)parent src:(NSString *)src {

NSURL *fileURL;
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *audioPrompt = [NSString stringWithFormat:@"%@%@", [defaults stringForKey:CONFIG_IVR_HOST], src];

if ([src isEqualToString:@""] || src == nil) {
    audioPrompt = @"silence1sec";
    NSString *path = [[NSBundle mainBundle] pathForResource:audioPrompt ofType:@"wav"];
    fileURL = [NSURL fileURLWithPath:path];
} else {
    fileURL = [NSURL URLWithString:audioPrompt];
}

AudioServicesDisposeSystemSoundID (_audioPromptSound);
AudioServicesCreateSystemSoundID((CFURLRef)fileURL, &_audioPromptSound);
AudioServicesPlaySystemSound(_audioPromptSound);

//NSLog(@"Audio SRC: %@", audioPrompt);
NSData *soundData = [NSData dataWithContentsOfURL:fileURL];
NSString *filePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"sound.caf"];

[soundData writeToFile:filePath atomically:YES];

AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL
                                                       fileURLWithPath:filePath] error:NULL];  
self.thePlayer = player;
[player release];
[thePlayer prepareToPlay];
[thePlayer setVolume:1.0f];
[thePlayer play];
} 
```

我不知道为什么这只会在整个播​​放后记录按钮按下。我正在尝试实现一个静音按钮和一种在音频播放时“插入”音频的方法。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:08:50.937

Edit:

Adding a delegate:

In your .h file:

```
@interface ViewController : UIViewController<AVAudioPlayerDelegate>{
} 
```

In your .m file:

```
thePlayer.delegate = self;
[thePlayer play]; 
```

As I can see there could be a problem in your animationDidStop, as it will iterate through all sounds regardless of what you do. I'll try and step through it line by line and explain what I'm after(and there will be some guesswork as I can't see your entire code).

```
- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {
// Iterate through array ivrTree elements.
for (menuCount = 0; menuCount < [ivrTree count]; menuCount++ ) {

    // Starting with currentScript = ivrTree objectAtIndex 0
    currentScript = [ivrTree objectAtIndex: menuCount];

    //Iterate through menuChoices, Starting with objectAtIndex 0
    for (btnCount = 0; btnCount < [currentScript.menuChoices count]; btnCount = btnCount) {
        //Set currentChoice to menuChoices objectAtIndex 0
            currentChoice = [currentScript.menuChoices objectAtIndex: btnCount];
        //Will try to run playPromptAudiofromSRC if thePlayer isn't playing. Will 1st run evaluate as false and therefor will play.
            if (![thePlayer isPlaying]) {
                if (!mute) {
                    [self playPromptAudiofromSRC:self src:currentChoice.audioSRC];
                }
        //Will increment btnCount to 1 when the audio has played through.
            btnCount++;
            }
        //If sound hasn't finished playing it will stay in the for loop and keep trying until first sound is done playing.
    }
//Will increment menuCount 1 and start the next for loop all over again.
}
thisMenuPlayed = true;
} 
```

Can you see what I'm getting at? If you start instruments and check what's going on I'm pretty sure you will see a spike in activity that won't subside until all sounds has played through. I think that the way this method is written it locks up your device. Hope it helps.

# c++ - 在 C++ 中重载 << 运算符？

> ID：15990953
> 
> 赞同：1
> 
> 时间：2013-04-13T17:50:16.393
> 
> 标签：c++, operator-overloading

我正在尝试重载 << 运算符，但我遇到了一些此类错误：

> 传递`const std::ostream' as``std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(const void*) [with _CharT = char, _Traits = std::char_traits]' 的参数丢弃限定词

这是我的代码：

```
#include<iostream>
using namespace std;

class nod{
    protected: 
    int info;
    nod *next;
    friend class lista;
    friend const ostream &operator<<(const ostream &,lista&);

};

class lista
{nod *first, *last;
 public:
 lista()
 {first=new nod;
  last=new nod;
  first=last=NULL;}   
 void insert(int);
 // void remove();
  void afisare();
 nod *get_first(){ return first;};
};

void lista::insert(int x)
{    nod *nou=new nod;    
     nou->info=x;    
     if(!first)
                     first=last=nou;
     else         
                     nou->next=first;  
     first=nou;
     last->next=first;}

const ostream &operator<<(const ostream &o,lista &A)
{nod *curent=new nod;
o<<"Afisare: ";
curent=A.get_first();
if(curent)
          o<<curent->info<<" ";
curent=curent->next;
while(curent!=A.get_first())
          {o<<curent->info<<" ";
          curent=curent->next;}
return o;
}

int main()
{lista A;
A.insert(2);
A.insert(6);
A.insert(8);
A.insert(3);
A.insert(5);
cout<<A;
system("pause");
return 0;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:53:33.750

这个 const ostream &operator<<(const ostream &o,lista &A)

应该：

```
ostream &operator<<(ostream &o,lista &A) 
```

因为实际流在您写入时会被修改。

# mysql - 简单查询 - 为什么会抛出错误？

> ID：15990957
> 
> 赞同：0
> 
> 时间：2013-04-13T17:50:27.953
> 
> 标签：mysql, sql

我很难让这个查询在没有错误的情况下处理。你能让我走上正轨吗？我已经摆弄了大约一个小时的变化。

如您所见，我正在尝试获取`casetype_txt`等于 的字段的总记录数`'DONATION'`，然后在`B`表上获取所有`Groups`非空值。所以，一个总数是我想要达到的。

```
SELECT
  COUNT(casetype_txt)

FROM
  amd_full_merged_st_load_case AS a

WHERE
  a.casetype_txt = 'DONATION'

LEFT JOIN amd_full_merged_st_load_case AS b
  ON a.case_id=b.case_id

WHERE b.group != ''; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:54:12.543

你的语法不正确，试试这个，

```
SELECT  COUNT(casetype_txt) 
FROM    amd_full_merged_st_load_case AS a 
        LEFT JOIN amd_full_merged_st_load_case AS b
            ON  a.case_id = b.case_id AND
                b.group != ''
WHERE   a.casetype_txt = 'DONATION' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:47:03.510

让这个，一次一个。

首先，`JOIN`要在`FROM`子句中制作表格。`WHERE`子句紧随其后。所以，一个有效的查询应该是（注意我们不能`WHERE`在一个简单的查询中包含 2 个子句，所以这两个条件必须与一个`AND`- 或有时与一个`OR`但可能不是这里的情况相结合）：

```
-- Version 1 --
SELECT
  COUNT(a.casetype_txt)

FROM
  amd_full_merged_st_load_case AS a

  LEFT JOIN amd_full_merged_st_load_case AS b
    ON a.case_id=b.case_id

WHERE
  a.casetype_txt = 'DONATION'

  AND b.group <> '' ; 
```

现在，因为您在子句中有一个关于表（外连接`b`右侧的表）的条件，这使得外连接作为内连接工作。所以，上面的查询相当于：`LEFT``WHERE`

```
-- Version 2 --
SELECT
  COUNT(a.casetype_txt)

FROM
  amd_full_merged_st_load_case AS a

  INNER JOIN amd_full_merged_st_load_case AS b
    ON a.case_id=b.case_id

WHERE
  a.casetype_txt = 'DONATION'

  AND b.group <> '' ; 
```

以上（第 2 版）可能是您所追求的。不过还有另一个问题。根据两个表之间的关系（1-1、1-n、n-1、nn），查询可能会给出错误的计数，因为连接可能会为特定的`case_id`. 因此，您还应该检查将连接转换为半连接（使用`EXISTS`子查询）是否会给您寻求的答案：

```
-- Version 3a --
SELECT
  COUNT(a.*)                                     -- we want to count rows

FROM
  amd_full_merged_st_load_case AS a              -- from table a

WHERE                                            -- where
  a.casetype_txt = 'DONATION'                    -- casetype is DONATION
                                                 -- and
  AND EXISTS                                     -- at least one 
      ( SELECT *                                 -- (related row) exists
        FROM amd_full_merged_st_load_case AS b   -- in table b
        WHERE a.case_id = b.case_id              
          AND b.group <> ''
      ) ; 
```

或者：

```
-- Version 3b --
SELECT
  COUNT(b.*)                                     -- we want to count rows

FROM
  amd_full_merged_st_load_case AS b              -- from table b

WHERE                                            -- where
  b.group <> ''                                  -- group is not empty
                                                 -- and
  AND EXISTS                                     -- at least one 
      ( SELECT *                                 -- (related row) exists
        FROM amd_full_merged_st_load_case AS a   -- in table a
        WHERE a.case_id = b.case_id              
          AND a.casetype_txt = 'DONATION'        
      ) ; 
```

# ffmpeg - 为 mov 到 mp4 转换 ffmpeg 安装编解码器

> ID：15990974
> 
> 赞同：11
> 
> 时间：2013-04-13T17:52:35.093
> 
> 标签：ffmpeg, mp4, codec, mov

我一直在尝试将 .mov 文件转换为 .mp4 文件，现在我认为这是正确的代码。

```
ffmpeg  -i P1010989.MOV -vcodec copy -acodec copy out.mp4 
```

但这是我的输出

```
FFmpeg version 0.6.5, Copyright (c) 2000-2010 the FFmpeg developers
  built on Jan 29 2012 23:55:02 with gcc 4.1.2 20080704 (Red Hat 4.1.2-51)
  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-avfilter-lavf --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
  libavutil     50.15\. 1 / 50.15\. 1
  libavcodec    52.72\. 2 / 52.72\. 2
  libavformat   52.64\. 2 / 52.64\. 2
  libavdevice   52\. 2\. 0 / 52\. 2\. 0
  libavfilter    1.19\. 0 /  1.19\. 0
  libswscale     0.11\. 0 /  0.11\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'P1010989.MOV':
  Duration: 00:00:01.00, start: 0.000000, bitrate: 11584 kb/s
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 640x480, 11315 kb/s, 30 fps, 30 tbr, 30 tbn, 30 tbc
    Stream #0.1(eng): Audio: pcm_s16be, 16000 Hz, 1 channels, s16, 256 kb/s
File 'out.mp4' already exists. Overwrite ? [y/N] y
[mp4 @ 0x95b0080]track 1: could not find tag, codec not currently supported in container
Output #0, mp4, to 'out.mp4':
  Metadata:
    encoder         : Lavf52.64.2
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 640x480, q=2-31, 11315 kb/s, 30 tbn, 30 tbc
    Stream #0.1(eng): Audio: pcm_s16be, 16000 Hz, 1 channels, 256 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Could not write header for output file #0 (incorrect codec parameters ?) 
```

所以我正在尝试安装正确的编解码器，但我有点迷失了，需要一些帮助。

我需要单独安装编解码器吗？从哪里下载和安装？

代码确实需要一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-13T19:36:51.437

```
 Stream #0.1(eng): Audio: pcm_s16be, 16000 Hz, 1 channels, s16, 256 kb/s
[mp4 @ 0x95b0080]track 1: could not find tag, codec not currently supported in container 
```

这不是告诉您缺少编解码器，而是告诉您它与 M​​P4 格式不兼容。

您可以通过使用不同的音频编解码器来解决此问题。

```
ffmpeg -i P1010989.MOV -vcodec copy -acodec aac -strict -2 -b:a 384k out.mp4 
```

# makefile - 当我对代码块源代码执行 make 时出现此错误

> ID：15990975
> 
> 赞同：0
> 
> 时间：2013-04-13T17:52:44.107
> 
> 标签：makefile, codeblocks

configmanager.cpp:39:44：错误：wx/mac/corefoundation/cfstring.h：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T10:12:28.653

发生这种情况是因为您正在*文档*或其他文件夹中创建文件。 **在您的桌面中创建文件，并在给它命名时不要在其中包含空格**，单击构建并运行，终端将打开并显示输出。它至少对我有用，然后你可以将它移动到你想要的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:56:01.133

编译器找不到 cfstring.h 文件。尝试重新安装代码块。

# javascript - 如何增加变量的值？

> ID：15990979
> 
> 赞同：-4
> 
> 时间：2013-04-13T17:52:53.317
> 
> 标签：javascript, jquery, canvas

我正在为一些画布练习构建一个画布游戏。它只是一张枪的幻灯片的图片，然后在它的正下方是整个东西的图片减去幻灯片，所以它看起来像一张枪的图片。单击画布时，我将让幻灯片后退然后再前进，子弹将从枪管中射出。虽然想办法让子弹移动，但我需要帮助。我尝试增加 x 坐标变量的值，也许我只是没有在那里做某事，但它没有用。你们对我有什么建议吗？

非常感谢，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:59:48.120

只是增加变量不会导致画布重绘。您必须手动重绘画布以显示新的更新状态的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:07:06.740

好的...我怀疑您没有正确设置动画循环。在你的javascript里面写这样的东西

```
var gameThread = SetInterval(invalidate, 33);
function invalidate(){
    updateBulletX();
    redrawCanvas();
} 
```

所以在一秒钟内大约 30 次，invalidate 函数将运行。updateBulletX 函数会计算子弹的当前位置，redrawCanvas 函数会擦除并重绘整个画布。

这是任何基于动画的游戏的基本概念。

我鼓励您使用基于画布的游戏引擎，让您的生活更轻松。

*   [http://impactjs.com/](http://impactjs.com/)
*   [http://canvasengine.net/](http://canvasengine.net/)
*   [http://enchantjs.com/](http://enchantjs.com/)

等等等等谷歌

# ios - 如何让我的应用程序仅在配备视网膜显示屏的 iPad 上运行？

> ID：15990987
> 
> 赞同：2
> 
> 时间：2013-04-13T17:53:45.750
> 
> 标签：ios, xcode, ipad, retina-display

我有一个创建图形的应用程序，我只在具有视网膜显示屏（屏幕比例为 2）的 iPad 上对其进行了测试。由于该应用程序严重依赖此屏幕密度，因此我正在寻找一种方法来排除早期版本的 iPad 以及 iPad mini 无法从应用商店下载我的应用程序。

**是否有一些 xCode 项目标志或一些设备功能可以用来确保我的 iOS 6.0 应用程序不会出售给没有视网膜显示器的设备？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:57:22.333

我很确定，任何这样做的尝试都会被 App Store 监护人拒绝。您可以通过要求 iOS 6 来排除 iPad 1，但这是您可以做到的。

# html - 第一个孩子在我的代码中不起作用

> ID：15990992
> 
> 赞同：0
> 
> 时间：2013-04-13T17:54:18.583
> 
> 标签：html, css

我不知道为什么我`a:first-child`的不工作。这是我的html：

```
<!DOCTYPE html>
<link href='http://fonts.googleapis.com/css?family=Geo' rel='stylesheet'>
<title>Mira's place</title>
<header>
    <a href="index.html">Mira's place</a><br>
    <h2>&#8220;<span id="quote">If nothing, then this.</span>&#8221;</h2>
        <ul>
            <li><a href="#">Home</a>
            <li><a href="#">Games</a>
            <li><a href="#">Pixel Art</a>
            <li><a href="#">Contact</a>
        </ul>
</header>
<section>
    <h2>This is test H2</h2>
    <p>This is lorem ipsum shitsum, blah <a href="#">Test</a> blah baldflksafdjsl adslkf ajfdlks ajfldsa jflksda lfhsdalf jdsalfh sdlfdshfdsk fjsdl ajfl
</section>
<footer>
    <p>(C) MiraCZ 2013 - You can copy anything here! 
</footer> 
```

这是我的 CSS

```
html {
    background-color: #002240;
    font-family: "Geo", sans-serif;
    margin: 0;
}
header {
    background-color: #001629;
    margin: 0 -10px 0 -10px;
}
a:first-child {
    color: #FF628C;
    font-size: 36px;
}
header h2 {
    color: #80FFBB;
}
li {
    display: inline-block;
    font-size: 18px;
}
p {
    color: white;
} 
```

我只想先`a`设置为 36px 大小。任何人都可以帮助为什么它会影响其他人`a`？这是我的 jsfiddle [http://jsfiddle.net/dsT4Z/](http://jsfiddle.net/dsT4Z/)

这是我所看到的。我添加了红色箭头来显示`a`我不想变得那么大等等。

![在此处输入图像描述](https://i.stack.imgur.com/IVHEf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:57:02.530

导航中的所有`<a>`标签都是包含`<li>`标签的第一个子标签，因此与规则匹配。

文本区域中的元素是包含的第一个（元素）子元素`<p>`，因此与规则匹配。

在您实际想要影响的元素上使用 ID 或类名称会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:58:36.123

在我看来，您只希望`<a>`立即嵌套的第`<header>`一个成为目标。`a:first-child`将规则更改为：

```
/* only target an <a> element which is the first immediate child of a <header> element */
header > a:first-child {
    /* ... */
} 
```

这样，只有第一个直接孩子`<header>`应该受到影响。[http://jsfiddle.net/dsT4Z/1/](http://jsfiddle.net/dsT4Z/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T18:22:05.273

我认为您应该考虑使用`:nth-of-type()`选择器。它似乎更适合此应用程序。

`first-child`只会选择第一个孩子是什么。`nth-of-type`你保证选择标题元素的第一个直接锚子元素。

```
header > a:nth-of-type(1) {
color: #FF628C;
font-size: 36px;
} 
```

[js小提琴](http://jsfiddle.net/fSV4Z/)。
[文档](https://developer.mozilla.org/en-US/docs/CSS/%3anth-of-type)。

# java - DialogFragment中的Android findViewById

> ID：15990995
> 
> 赞同：27
> 
> 时间：2013-04-13T17:54:34.897
> 
> 标签：java, android

我正在尝试开发一个日期选择器，它在设置时设置文本视图的值。

但我无法从`DialogFragment`处理日期选择器的电视中选择电视。

我尝试过`getView`，但应用程序在特定点崩溃。

这是我的代码：

```
@SuppressLint("NewApi")
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    TextView mTextView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

                // R.layout.my_layout - that's the layout where your textview is placed
        View view = inflater.inflate(R.layout.activity_register_screen, container, false);
        mTextView = (TextView) view.findViewById(R.id.tvDate);
        // you can use your textview.
        return view;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        int syear = year;
        int smonth = month;
        int sday = day;
        // set selected date into textview
        mTextView.setText(new StringBuilder().append(smonth + 1)
           .append("-").append(sday).append("-").append(syear)
           .append(" "));
    }
} 
```

更新了新代码和以下错误：

```
04-15 09:45:30.880: E/AndroidRuntime(23016): FATAL EXCEPTION: main
04-15 09:45:30.880: E/AndroidRuntime(23016): android.util.AndroidRuntimeException: requestFeature() must be called before adding content
04-15 09:45:30.880: E/AndroidRuntime(23016):    at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:239)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at com.android.internal.app.AlertController.installContent(AlertController.java:236)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.AlertDialog.onCreate(AlertDialog.java:336)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.Dialog.dispatchOnCreate(Dialog.java:353)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.Dialog.show(Dialog.java:257)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.DialogFragment.onStart(DialogFragment.java:490)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.Fragment.performStart(Fragment.java:1537)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:866)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1036)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.BackStackRecord.run(BackStackRecord.java:622)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1386)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:430)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.os.Handler.handleCallback(Handler.java:605)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.os.Looper.loop(Looper.java:137)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at android.app.ActivityThread.main(ActivityThread.java:4517)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at java.lang.reflect.Method.invokeNative(Native Method)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at java.lang.reflect.Method.invoke(Method.java:511)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
04-15 09:45:30.880: E/AndroidRuntime(23016):    at dalvik.system.NativeStart.main(Native Method) 
```

**解决了**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-13T18:00:28.640

要在 Fragment/Fragment 对话框中获得特定视图，您应该使用`onCreateView()`. 这是一个如何做到这一点的例子：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // R.layout.my_layout - that's the layout where your textview is placed
    View view = inflater.inflate(R.layout.my_layout, container, false);
    TextView mTextView = (TextView) view.findViewById(R.id.colors);
    // you can use your textview.
    return view;
} 
```

首先检查是否`onCreateDialog()`在之前调用过`onCreateView()`，如果这是真的，请尝试使用以下内容：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View view = inflater.inflate(R.layout. activity_register_screen, null);
    builder.setView(view);
    // Create the AlertDialog object and return it
    return builder.create();
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-10-16T04:54:23.733

在 DialogFragment 中查找视图有更简单的方法。

```
@Override
public void onStart() {
    super.onStart();
    mTextView = (TextView) getDialog().findViewById(R.id.tvDate);
} 
```

# c# - 如何使用 SQL-Server 根据现有表中的字段创建新表？

> ID：15990998
> 
> 赞同：0
> 
> 时间：2013-04-13T17:55:07.790
> 
> 标签：c#, sql, sql-server, sql-server-2008

我只想知道如何根据现有表列创建新表：

```
Current Table name : EmployeeDetails
Columns: empName, Address, pincode, state, city
Primary key is : pincode 
```

我想从 EmployeeDetails 创建新表：

```
New Table name : Information
column :pincode, state, city ---> from EmployeeDetails table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:56:04.887

您可以使用[`select ... into`](http://msdn.microsoft.com/en-us/library/ms188029.aspx)：

```
select  pincode
,       state
,       city
into    Information
from    EmployeeDetails 
```