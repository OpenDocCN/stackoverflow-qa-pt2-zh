# StackOverflow 问答 12975000-12975999

# android - Android - 无法在 VideoView 上播放我的 RSTP YouTube 链接，但可以播放其他链接

> ID：12975001
> 
> 赞同：1
> 
> 时间：2012-10-19T13:10:58.977
> 
> 标签：android, youtube, android-videoview

我将视频上传到 youtube 并将链接保存在我的数据库中。然后我进入画廊，在那里我看到了所有的视频。我得到了 RSTP 链接：

```
 try {
                        HttpClient client = new DefaultHttpClient();  
                        String getURL = "http://gdata.youtube.com/feeds/api/videos/"+urlv;
                        System.out.println("YEYEYEY0"+getURL);
                        //String getURL = "http://inmamarti.com/android/ufo/yt2rtsp/example/index.php?ytid="+urlv;
                        HttpGet get = new HttpGet(getURL);
                        HttpResponse responseGet = client.execute(get);  
                        HttpEntity resEntityGet = responseGet.getEntity();  
                        if (resEntityGet != null) {  
                            ye =EntityUtils.toString(resEntityGet);
                                    //do something with the response
                                   // Log.i("GET RESPONSE",EntityUtils.toString(resEntityGet));
                                }
                } catch (Exception e) {
                    e.printStackTrace();
                } 
```

其中 urlv 是视频 ID (www.youtube.com..?v=ID_VIDEO) 当我播放我的应用以 3gp（低清晰度）上传的视频时，videoviwver 说无法播放此视频。如果我播放我的应用以 mp4 上传的视频，它会显示私人视频。

但是，如果我播放 youtube 上由其他人上传的视频，它们就会成功播放！

我做错了什么？上传？？我使用 php 和 zend 中的 post 和 get 请求来上传视频，因为我无法使用 youtube api 和 gdata 来上传视频

要上传，首先我得到 youtube 令牌 url 和值：

```
 $yt = new Zend_Gdata_YouTube($httpClient);
// create a new VideoEntry object
$myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();
$myVideoEntry->setVideoTitle('Concerto');
$myVideoEntry->setVideoDescription('Concerto');
// The category must be a valid YouTube category!
$myVideoEntry->setVideoCategory('Music');

// Set keywords. Please note that this must be a comma-separated string
// and that individual keywords cannot contain whitespace
$myVideoEntry->SetVideoTags('cars, funny');

$tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
$tokenArray = $yt->getFormUploadToken($myVideoEntry, $tokenHandlerUrl);
$tokenValue = $tokenArray['token'];
$postUrl = $tokenArray['url']; 
```

然后我上传视频并保存在bbdd

```
HttpClient httpclient = new DefaultHttpClient();
                    //HttpPost httppost = new HttpPost("http://www.inmamarti.com/android/ufo/printr.php?nexturl=http://www.hola.com");
                    HttpPost httppost = new HttpPost(youtubeToken+"?nexturl=http://www.inmamarti.com/android/ufo/printr.php");
                    MultipartEntity entity = new MultipartEntity();
                    entity.addPart(new StringPart("token", youtubeTokenValue));
                    File imageFile = new File(nomarch); // .. get your image file
                    entity.addPart(new FilePart("file", imageFile, null, "file"));
                    httppost.setEntity(entity);
                    HttpResponse httpResponse = httpclient.execute(httppost);
                    String result = EntityUtils.toString(httpResponse.getEntity());
                    System.out.println("RESPONS·E "+result); 
```

我做错了什么？

# javascript - 值在字段的所有实例上更新

> ID：12975006
> 
> 赞同：1
> 
> 时间：2012-10-19T13:11:31.270
> 
> 标签：javascript, jquery

我有下面的代码，用于计算插入的每个实例（行）的两个字段。

目前，它填充所有“总计”字段，而不仅仅是对应行的字段。

还将“NaN”插入到所有总字段中。

```
var LabourItems = {
   rate: null,
   hours: null,
   total: null,
   init: function(object) {
      var rate = $(object).children('.rate').first();
      var hours =$(object).children('.hours').first();
      this.total = Number(rate) * Number(hours);
      this.updateTotal(object);
   },
   updateTotal: function(object) {
      $(object).children('.total').first().attr('value', this.total)
   }
}

//reactTochange for those inputs that you want to observe
$('.hours').live("click", function() {
   jQuery.each($('.labouritems'), function(key,value){
      LabourItems.init(value);
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:20:13.953

您尚未获取字段的*值*：

```
var rate = parseInt($(object).children('.rate').val(), 10); 
```

[不需要，`.first()`因为在使用`.val()`阅读时这是隐含的]

此外，您也应该使用`.val()`来*设置*总值，而不是`.attr('value', ...)`.

# winforms - 从 Outlook 的“高级查找”窗口拖动 mailitem 并放到 Winforms 上？

> ID：12975007
> 
> 赞同：1
> 
> 时间：2012-10-19T13:11:31.580
> 
> 标签：winforms, drag-and-drop, outlook, vsto, mailitem

大多数用于从 Outlook 拖放 a 并放在寡妇窗体上的代码示例`MailItem`都涉及对 Outlook`ActiveExplorer`窗口的引用...

这是[一个例子](http://www.emoreau.com/Entries/Articles/2008/05/Dropping-a-Outlook-message-on-your-application.aspx)

```
Dim objMI As Microsoft.Office.Interop.Outlook.MailItem

For Each objMI In objOL.ActiveExplorer.Selection()
    Dim strFile As String = _
                IO.Path.Combine("c:\temp", _
                                (objMI.Subject + ".msg").Replace(":", ""))
    lblFile.Text += strFile + Environment.NewLine
    objMI.SaveAs(strFile)
Next 
```

...但是，如果从“**高级查找”**弹出窗口中拖动，则会产生意想不到的结果。

发生的情况是您的 C# 或 VB 代码*从 Outlook 主窗口获取选定的电子邮件，而*不是您从“高级查找”电子邮件列表中实际选择的电子邮件。除非用户保持警惕，否则他甚至不会注意到他收到了错误的电子邮件。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:35:24.870

您可以确定它们是否不是[`ActiveWindow()`](http://msdn.microsoft.com/en-us/library/office/aa166322%28v=office.10%29.aspx)（*没有使用中的活动资源管理器或检查*器），然后利用[`IDataObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688421%28v=vs.85%29.aspx)界面而不是[`ActiveExplorer.Selection()`](http://msdn.microsoft.com/en-us/library/office/aa211053%28v=office.11%29.aspx). 对于我们的插件 - 我们只是选择不支持拖放操作的**高级查找**，但这并不总是一个选项。

对于使用 Win32 的示例`IDataObject`-[下载此代码项目 Outlook Drag-n-Drop 示例](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)。**出于某种原因，Microsoft 选择不在“高级查找”**窗口周围公开 VSTO 接口包装器。此问题在 Office 2013 中仍然存在。

# ms-access - 将复选框默认值设置为在 Access 数据库中选中

> ID：12975018
> 
> 赞同：4
> 
> 时间：2012-10-19T13:12:28.290
> 
> 标签：ms-access, ms-access-2010

我正在使用 Access 数据库，在一个表中我有一个名为“Active”的字段。该字段有一个复选框，我需要将其默认值设置为选中？

例如，我正在从有 10000 行的 Excel 工作表中将数据附加到这个表中，我不能一一检查它们。所以，我想要的是当我将此工作表附加到所有复选框都已选中的表中时。

任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T13:35:24.123

解决了，这对我有用。我所做的是我设置了这样的表属性：

![在此处输入图像描述](../Images/aac20a6279457dcff76146cd2121cc1a.png)

并用 1 在 excel 表上填充我的单元格，它就在那里。

如果有更好的方法，请告诉我。

# c - 用于 MinGW 的 strtok_r

> ID：12975022
> 
> 赞同：12
> 
> 时间：2012-10-19T13:12:44.500
> 
> 标签：c, mingw, strtok

[strtok_r](http://www.mkssoftware.com/docs/man3/strtok_r.3.asp)是 strtok 的可重入变体。它符合 POSIX 标准。但是，MinGW 缺少它，我正在尝试编译一个正在使用它的程序。

有什么办法可以添加这个函数的标准实现，可能是项目自己的代码，或者 MinGW 的标准库函数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T17:23:31.793

由于来自另一个答案的代码存在一些许可问题，因此这是一个明确的公共领域：

```
/* 
 * public domain strtok_r() by Charlie Gordon
 *
 *   from comp.lang.c  9/14/2007
 *
 *      http://groups.google.com/group/comp.lang.c/msg/2ab1ecbb86646684
 *
 *     (Declaration that it's public domain):
 *      http://groups.google.com/group/comp.lang.c/msg/7c7b39328fefab9c
 */

char* strtok_r(
    char *str, 
    const char *delim, 
    char **nextp)
{
    char *ret;

    if (str == NULL)
    {
        str = *nextp;
    }

    str += strspn(str, delim);

    if (*str == '\0')
    {
        return NULL;
    }

    ret = str;

    str += strcspn(str, delim);

    if (*str)
    {
        *str++ = '\0';
    }

    *nextp = str;

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:20:50.737

这是您可以简单地将其添加到项目中自己的库/函数中的源代码：

```
char *strtok_r(char *str, const char *delim, char **save)
{
    char *res, *last;

    if( !save )
        return strtok(str, delim);
    if( !str && !(str = *save) )
        return NULL;
    last = str + strlen(str);
    if( (*save = res = strtok(str, delim)) )
    {
        *save += strlen(res);
        if( *save < last )
            (*save)++;
        else
            *save = NULL;
    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:21:04.247

[FreeBSD 实现](http://svn.freebsd.org/base/user/eri/pf45/head/lib/libc/string/strtok.c)对您有用吗？

它的自由许可但集成它可能对您的项目文档有一些要求（添加确认已包含代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:27:02.577

MINGW 没有实现`strtok_r`. 但是，您可以在下面的链接中找到线程安全的实现：

[http://www.raspberryginger.com/jbailey/minix/html/strtok__r_8c-source.html](http://www.raspberryginger.com/jbailey/minix/html/strtok__r_8c-source.html)

# java - 使用 Orbeon XForms 向 Java Servlet 提交（发布）表单

> ID：12975023
> 
> 赞同：1
> 
> 时间：2012-10-19T13:12:45.433
> 
> 标签：java, tomcat, servlets, orbeon, xforms

我正在尝试执行最简单的任务，那就是使用 XForms (orbeon) 将表单提交给 Java Servlet。

```
<xforms:submission id="login-submit" ref="instance('login-instance')" resource="/Login/login.do" method="urlencoded-post" mediatype="application/xml" replace="all"> 
```

当我单击提交按钮时，我得到：

```
Type    class java.lang.NullPointerException
Message null
Location    oxf:/ops/xforms/xforms-server-submit.xpl
Line    73
Column  51
Stack Trace 

java.lang.NullPointerException
.. 
```

连同大型堆栈跟踪。我知道 servlet 的工作原理是使用标准 HTML 表单将我登录到站点。我花了很长时间试图让它工作并且不知所措。我正在使用 Orbeon v3.9.1 PE 和评估许可证、Tomcat 7.0.32 和 JRE 的 v1.7.0_07。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:40:03.513

我看到一些参数丢失。请参阅以下示例，您可以理解并相应地使用您的参数值。

```
<xforms:submission id="submission-id" ref="instance('form-instance')"
        action="http://localhost:8080/mywebapp/servlets/servlet/TestServlet" 
        method="post" replace="none"
        validate="false">
    <xforms:message ev:event="xforms-submit-done" level="modal" value="'Submission Successful'"/>
    <xforms:message ev:event="xforms-submit-error" level="modal" value="'Submission failed'"/>
</xforms:submission> 
```

首先测试实际给出的 url，看看 servlet 是否配置正确。

您可以测试您的提交功能，并[在此处](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-advanced-submissions#TOC-The-echo%3a-URL-scheme)给出。您可以添加`xforms-submit-done`and`xforms-submit-error`事件来检查哪个事件被抛出。

# restlet - 如何开发自己的协议

> ID：12975026
> 
> 赞同：0
> 
> 时间：2012-10-19T13:12:50.193
> 
> 标签：restlet, restlet-2.0

为了试验我一直在开发的新路由算法，我想在 Restlet 框架内实现我自己的通信协议（例如，替换标准的 HTTP）。你能告诉我如何扩展框架以引入新协议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:10:02.970

在执行 new Client("myProtocol") 或 new Server("myProtocol") 时，您需要在 org.restlet.engine.Engine 对象中注册与您的新协议对象匹配的新助手。

例如，您应该看看如何支持 SIP 协议。

# asp.net-mvc - 自定义工具“RazorGenerator”失败。方法或操作未实现

> ID：12975030
> 
> 赞同：11
> 
> 时间：2012-10-19T13:13:02.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-extensions, razorgenerator

我刚刚将 Visual Studio 扩展[RazorGenerator](http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec)升级到 V1.5（上次更新时间为 2012 年 10 月 14 日），现在有以下问题。

现在编辑的每个 cshtml 文件都会删除生成的文件，如果我选择“运行自定义工具”，我会得到`The custom tool 'RazorGenerator' failed. The method or operation is not implemented.`

我以前在我的项目中使用它没有问题，但升级似乎已经破坏了它。有谁知道如何解决这个问题..？因为它是通过 ExtensionManager 安装的，所以我现在似乎无法回滚到以前的版本。

[nuget 中 RazorGenerator.MVC](http://nuget.org/packages/RazorGenerator.MVC)的最新版本是 1.4（2012 年 4 月 20 日，星期五），所以问题可能是版本不匹配..？

我曾尝试重新启动 VS 和我的机器但没有成功，我什至卸载了扩展并重新安装，但也没有用。

```
Exception calling "RunCustomTool" with "0" argument(s): "The custom tool 'RazorGenerator' failed.  The method or operation is not implemented."
At D:\Source\MySolution\MyProject\packages\RazorGenerator.Mvc.1.4.0.0\tools\RazorGenerator.psm1:32 char:32
+         $_.Object.RunCustomTool <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation

Exception calling "GetItem" with "1" argument(s): "The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))"
At D:\Source\MySolution\MyProject\packages\RazorGenerator.Mvc.1.4.0.0\tools\RazorGenerator.psm1:62 char:46
+                     $solutionExplorer.GetItem <<<< ("$SolutionName\$ProjectName$relativePath").UIHierarchyItems.Expanded = $false
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation 
```

除此之外，我得到每个视图的以下构建错误（尽管说构建成功）：

```
Custom tool error: Could not load file or assembly 'file:///C:\Users\Rob\AppData\Local\assembly\dl3\VQ93NZJ0.M7K\4HA91P75.CHN\4b53b7b1\09b87db8_d4adcd01\RazorGenerator.Core.v1.dll' or one of its dependencies. The system cannot find the file specified. 
```

我[下载了源代码](http://razorgenerator.codeplex.com/SourceControl/changeset/view/5dd40e221a03)，在本地构建并将“RazorGenerator.Core.v1.dll”从错误消息中复制到目录中，但它仍然无法正常工作。我什至将所有 RazorGenerator*.dll 文件复制到该目录中，但仍然没有运气。检查依赖项仅显示系统程序集和位于同一目录中的“RazorGenerator.Core.dll”。

顺便说一句，“RazorGenerator.Core.dll”已经在上面的目录中。

查看 Visual Studio 扩展文件夹，我有一个 RazorGenerator 目录，如下所示：

```
C:\Users\Rob\AppData\Local\Microsoft\VisualStudio\10.0\Extensions\RazorGenerator contributors\Razor Generator\1.5 
```

以下文件和程序集位于此文件夹中：

```
extension.vsixmanifest
RazorGenerator.Core.dll
RazorGenerator.Core.v1.dll
RazorGenerator.Core.V2.dll
RazorGenerator.dll
RazorGenerator.pdb
RazorGenerator.pkgdef 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T17:00:40.697

我希望对此有更好的答案，但由于这解决了问题，所以我想我应该发布它。

基本上@Bobson 是对的，在目录中创建文件的副本解决了它。在我的情况下，`RazorGenerator.Core.v1.dll`从

`C:\Users\Rob\AppData\Local\Microsoft\VisualStudio\10.0\Extensions\RazorGenerator contributors\Razor Generator\1.5`

到

`C:\Users\Rob\AppData\Local\assembly\dl3\VQ93NZJ0.M7K\4HA91P75.CHN\4b53b7b1\09b87db8_d4adcd01`

这给了我该目录中的 3 个文件：

```
__AssemblyInfo__.ini
RazorGenerator.Core.dll
RazorGenerator.Core.v1.dll 
```

起初我没有注意到这已经解决了这个问题，因为它还需要重新启动 Visual Studio。

该[工作项](http://razorgenerator.codeplex.com/workitem/72)尚未被拾取，但最终如果您遇到此问题，那么复制文件并重新启动应该可以解决它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T19:13:05.417

对于在 VS2012 中被困在这里的任何其他人 - 这里的建议对我有用，但有几个警告：

*   我的扩展文件夹是一些自动生成的名称，不像上面那样：

%USERPROFILE%\AppData\Local\Microsoft\VisualStudio\11.0\Extensions\qd42h302.z0o

*   在那个文件夹中，我只找到了 RazorGenerator.Core.dll 和 RazorGenerator.dll。我复制了两者（以及 extension.vsixmanifest 和 RazorGenerator.pkgdef）。然后，我在 v1 和 v2 下有两个文件夹。由于在撰写本文时 RazorGenerator.Mvc 的当前版本是 1.5.5.0，我假设 v2 是下一个版本。

事实并非如此。我还必须将 \v2\RazorGenerator.Core.V2.dll 复制到本地程序集目录中：

%USERPROFILE%\AppData\Local\assembly\dl3\VVGKRX56.ODL\P1CK8APX.LRJ\1188e83c\133862b8_6531ce01

*   现在我两者都有。在 codeplex 帖子中，pranavkmwr 提到根据您使用的 Razor 选择版本。我猜这些版本号是指剃须刀引擎，而不是 RazorGenerator 版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T16:54:24.970

虽然不是这个特定问题的答案，但我遇到了类似的问题，我收到了这个错误：

```
The custom tool 'RazorGenerator' failed. The method or operation is not implemented. 
```

以及让我的 Razor Generator 删除文件而不是生成它们。但是，我没有得到与缺少的程序集文件有关的错误。

我的问题是一些错误的文本被意外添加到 web.config 文件的末尾，显然使其无效并导致上述问题。修复 web.config 文件修复了问题。希望这可以帮助有类似问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:57:33.777

我通过简单地卸载 RazorGenerator 扩展并重新启动 VS 在我的系统上解决了这个问题。

在我做的前几次它没有工作，但我还在后台打开了另一个 Visual Studio 实例。因此，请确保关闭所有 Visual Studio 窗口。您可能还想检查后台进程以确保没有仍在运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T22:25:51.307

就我而言，帮助关闭了所有 Visual Studio，只打开了一个。似乎这个组件有多个打开的实例 Visual Studio 2015 的问题。

也许它会帮助某人。

# ios - iPhone：sqlite3 blob 字段未正确反序列化

> ID：12975031
> 
> 赞同：1
> 
> 时间：2012-10-19T13:13:05.043
> 
> 标签：ios, sqlite, nsdata, property-list

我有一个 iPhone/iPad 应用程序，其中有一些数据存储在属性列表中。我正在扩展应用程序以处理相同数据的多次出现，不幸的是，它与正确的列表绑定得太紧，无法将全部转换为 sqlite3 或核心数据，所以我需要将属性列表存储在 blob 字段中的 sqlite3 表中.

我已经使用 [NSPropertySerialisation dataFromPropertyList:format:errorDescription] 对数据进行了序列化，并且可以在测试中成功地将其反序列化回 NSDictionary。我可以很好地存储数据，但是当我检索它时，我无法将它正确地恢复到 [NSPropertySerialisation propertyListFromData] 中。

这是 NSDictionary 对象：

```
{
    companydetails =     {
        address1 = "Company Address";
        "company_name" = "New Survey Company";
    };
} 
```

转换为序列化数据：

```
NSData *data = [NSPropertyListSerialization dataFromPropertyList:[Survey data] format:NSPropertyListXMLFormat_v1_0 errorDescription:&errStr]; 
```

产生：

```
<3c3f786d 6c207665 7273696f 6e3d2231 2e302220 656e636f 64696e67 3d225554 462d3822 3f3e0a3c 21444f43 54595045 20706c69 73742050 55424c49 4320222d 2f2f4170 706c652f 2f445444 20504c49 53542031 2e302f2f 454e2220 22687474 703a2f2f 7777772e 6170706c 652e636f 6d2f4454 44732f50 726f7065 7274794c 6973742d 312e302e 64746422 3e0a3c70 6c697374 20766572 73696f6e 3d22312e 30223e0a 3c646963 743e0a09 3c6b6579 3e636f6d 70616e79 64657461 696c733c 2f6b6579 3e0a093c 64696374 3e0a0909 3c6b6579 3e616464 72657373 313c2f6b 65793e0a 09093c73 7472696e 673e436f 6d70616e 79204164 64726573 733c2f73 7472696e 673e0a09 093c6b65 793e636f 6d70616e 795f6e61 6d653c2f 6b65793e 0a09093c 73747269 6e673e4e 65772053 75727665 7920436f 6d70616e 793c2f73 7472696e 673e0a09 3c2f6469 63743e0a 3c2f6469 63743e0a 3c2f706c 6973743e 0a> 
```

然后我可以使用以下方法取消序列化：

```
NSDictionary *revData = [NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListImmutable format:NULL errorDescription:&errStr]; 
```

这让我回到：

```
{
    companydetails =     {
        address1 = "Company Address";
        "company_name" = "New Survey Company";
    };
} 
```

这是我的表架构：

```
CREATE TABLE surveys (  id integer primary key autoincrement,   company_name text,   address text,   surveydata blob ); 
```

这是我对数据库的插入语句：

```
NSString *insSQL = [NSString stringWithFormat:@"INSERT INTO surveys (company_name, address, surveydata) VALUES (\"%@\", \"%@\", \"%@\")", SURVEY_DEFAULT_COMPANY, SURVEY_DEFAULT_ADDRESS, data];
const char *sql = [insSQL UTF8String]; 
```

产生：

```
INSERT INTO surveys (company_name, address, surveydata) VALUES ("New Survey Company", "Company Address", "<3c3f786d 6c207665 7273696f 6e3d2231 2e302220 656e636f 64696e67 3d225554 462d3822 3f3e0a3c 21444f43 54595045 20706c69 73742050 55424c49 4320222d 2f2f4170 706c652f 2f445444 20504c49 53542031 2e302f2f 454e2220 22687474 703a2f2f 7777772e 6170706c 652e636f 6d2f4454 44732f50 726f7065 7274794c 6973742d 312e302e 64746422 3e0a3c70 6c697374 20766572 73696f6e 3d22312e 30223e0a 3c646963 743e0a09 3c6b6579 3e636f6d 70616e79 64657461 696c733c 2f6b6579 3e0a093c 64696374 3e0a0909 3c6b6579 3e616464 72657373 313c2f6b 65793e0a 09093c73 7472696e 673e436f 6d70616e 79204164 64726573 733c2f73 7472696e 673e0a09 093c6b65 793e636f 6d70616e 795f6e61 6d653c2f 6b65793e 0a09093c 73747269 6e673e4e 65772053 75727665 7920436f 6d70616e 793c2f73 7472696e 673e0a09 3c2f6469 63743e0a 3c2f6469 63743e0a 3c2f706c 6973743e 0a>") 
```

当我在另一个函数中从表中检索数据时，我得到了正确的 blob 数据：

```
<3c3f786d 6c207665 7273696f 6e3d2231 2e302220 656e636f 64696e67 3d225554 462d3822 3f3e0a3c 21444f43 54595045 20706c69 73742050 55424c49 4320222d 2f2f4170 706c652f 2f445444 20504c49 53542031 2e302f2f 454e2220 22687474 703a2f2f 7777772e 6170706c 652e636f 6d2f4454 44732f50 726f7065 7274794c 6973742d 312e302e 64746422 3e0a3c70 6c697374 20766572 73696f6e 3d22312e 30223e0a 3c646963 743e0a09 3c6b6579 3e636f6d 70616e79 64657461 696c733c 2f6b6579 3e0a093c 64696374 3e0a0909 3c6b6579 3e616464 72657373 313c2f6b 65793e0a 09093c73 7472696e 673e436f 6d70616e 79204164 64726573 733c2f73 7472696e 673e0a09 093c6b65 793e636f 6d70616e 795f6e61 6d653c2f 6b65793e 0a09093c 73747269 6e673e4e 65772053 75727665 7920436f 6d70616e 793c2f73 7472696e 673e0a09 3c2f6469 63743e0a 3c2f6469 63743e0a 3c2f706c 6973743e 0a> 
```

但是，当我将其转换回属性列表时，我遇到了问题：

因此，我使用以下方法选择我的数据：

```
SELECT surveydata FROM surveys WHERE id = 2 
```

sqlite3_column_blob(stmt,0) 中的原始数据为：

```
NSString *blobRaw = [NSString stringWithFormat:@"%s", sqlite3_column_blob(stmt, 0)];
NSLog(@"Raw BLOB = %@", blobRaw);

Raw BLOB = <3c3f786d 6c207665 7273696f 6e3d2231 2e302220 656e636f 64696e67 3d225554 462d3822 3f3e0a3c 21444f43 54595045 20706c69 73742050 55424c49 4320222d 2f2f4170 706c652f 2f445444 20504c49 53542031 2e302f2f 454e2220 22687474 703a2f2f 7777772e 6170706c 652e636f 6d2f4454 44732f50 726f7065 7274794c 6973742d 312e302e 64746422 3e0a3c70 6c697374 20766572 73696f6e 3d22312e 30223e0a 3c646963 743e0a09 3c6b6579 3e636f6d 70616e79 64657461 696c733c 2f6b6579 3e0a093c 64696374 3e0a0909 3c6b6579 3e616464 72657373 313c2f6b 65793e0a 09093c73 7472696e 673e436f 6d70616e 79204164 64726573 733c2f73 7472696e 673e0a09 093c6b65 793e636f 6d70616e 795f6e61 6d653c2f 6b65793e 0a09093c 73747269 6e673e4e 65772053 75727665 7920436f 6d70616e 793c2f73 7472696e 673e0a09 3c2f6469 63743e0a 3c2f6469 63743e0a 3c2f706c 6973743e 0a> 
```

（注意：我只是选择一个字段，所以它位于第 0 列）

[NSPropertyListSerialisation propertyListFromData] 期望 NSData 作为输入，所以我试图将 blob 转换为 NSData：

```
NSData *blobData = [NSData dataWithBytes:sqlite3_column_blob(stmt, 0) length:sqlite3_column_bytes(stmt, 0)]; 
```

但是如果我输出 NSData 我得到：

```
<3c336333 66373836 64203663 32303736 36352037 32373336 39366620 36653364 32323331 20326533 30323232 30203635 36653633 36662036 34363936 65363720 33643232 35353534 20343632 64333832 32203366 33653061 33632032 31343434 66343320 35343539 35303435 20323037 30366336 39203733 37343230 35302035 35343234 63343920 34333230 32323264 20326632 66343137 30203730 36633635 32662032 66343435 34343420 32303530 34633439 20353335 34323033 31203265 33303266 32662034 35346532 32323020 32323638 37343734 20373033 61326632 66203737 37373737 32652036 31373037 30366320 36353265 36333666 20366432 66343435 34203434 37333266 35302037 32366637 30363520 37323734 37393463 20363937 33373432 64203331 32653330 32652036 34373436 34323220 33653061 33633730 20366336 39373337 34203230 37363635 37322037 33363936 66366520 33643232 33313265 20333032 32336530 61203363 36343639 36332037 34336530 61303920 33633662 36353739 20336536 33366636 64203730 36313665 37392036 34363537 34363120 36393663 37333363 20326636 62363537 39203365 30613039 33632036 34363936 33373420 33653061 30393039 20336336 62363537 39203365 36313634 36342037 32363537 33373320 33313363 32663662 20363537 39336530 61203039 30393363 37332037 34373236 39366520 36373365 34333666 20366437 30363136 65203739 32303431 36342036 34373236 35373320 37333363 32663733 20373437 32363936 65203637 33653061 30392030 39336336 62363520 37393365 36333666 20366437 30363136 65203739 35663665 36312036 64363533 63326620 36623635 37393365 20306130 39303933 63203733 37343732 36392036 65363733 65346520 36353737 32303533 20373537 32373636 35203739 32303433 36662036 64373036 31366520 37393363 32663733 20373437 32363936 65203637 33653061 30392033 63326636 34363920 36333734 33653061 20336332 66363436 39203633 37343365 30612033 63326637 30366320 36393733 37343365 2030613e> 
```

奇怪的是，如果我通过 [NSPropertySerialization propertyListFromData] 传递这个 NSData 我得到：

```
<3c3f786d 6c207665 7273696f 6e3d2231 2e302220 656e636f 64696e67 3d225554 462d3822 3f3e0a3c 21444f43 54595045 20706c69 73742050 55424c49 4320222d 2f2f4170 706c652f 2f445444 20504c49 53542031 2e302f2f 454e2220 22687474 703a2f2f 7777772e 6170706c 652e636f 6d2f4454 44732f50 726f7065 7274794c 6973742d 312e302e 64746422 3e0a3c70 6c697374 20766572 73696f6e 3d22312e 30223e0a 3c646963 743e0a09 3c6b6579 3e636f6d 70616e79 64657461 696c733c 2f6b6579 3e0a093c 64696374 3e0a0909 3c6b6579 3e616464 72657373 313c2f6b 65793e0a 09093c73 7472696e 673e436f 6d70616e 79204164 64726573 733c2f73 7472696e 673e0a09 093c6b65 793e636f 6d70616e 795f6e61 6d653c2f 6b65793e 0a09093c 73747269 6e673e4e 65772053 75727665 7920436f 6d70616e 793c2f73 7472696e 673e0a09 3c2f6469 63743e0a 3c2f6469 63743e0a 3c2f706c 6973743e 0a> 
```

这与序列化输入和 blob 数据相同。

请任何人都可以帮助我如何存储序列化的属性列表并从 sqlite 表中恢复它 - BLOB 似乎是存储数据的正确方法，但我无法重建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:21:18.263

一般来说，blob 数据类型不适合只插入到引号内的 SQL 语句中。所以，而不是你的：

```
NSString *insSQL = [NSString stringWithFormat:@"INSERT INTO surveys (company_name, address, surveydata) VALUES (\"%@\", \"%@\", \"%@\")", SURVEY_DEFAULT_COMPANY, SURVEY_DEFAULT_ADDRESS, data]; 
```

您可能要考虑：

```
NSString *insSQL = @"INSERT INTO surveys (company_name, address, surveydata) VALUES (?, ?, ?)";
if (sqlite3_bind_text(database, 1, [SURVEY_DEFAULT_COMPANY UTF8String]) != SQLITE_OK)
    NSLog("Bind error on #%d: '%s'", 1, sqlite3_errmsg(database));
if (sqlite3_bind_text(database, 2, [SURVEY_DEFAULT_ADDRESS UTF8String]) != SQLITE_OK)
    NSLog("Bind error on #%d: '%s'", 2, sqlite3_errmsg(database));
if (sqlite3_bind_blob(database, 3, [data bytes], [data length], SQLITE_STATIC) != SQLITE_OK)
    NSLog("Bind error on #%d: '%s'", 3, sqlite3_errmsg(database)); 
```

我没有测试过上面的代码，但希望你能明白。不要自己构建 SQL 语句，而是使用[`sqlite3_bind`函数](http://www.sqlite.org/c3ref/bind_blob.html)。

* * *

这是一个更完整的示例，说明如何序列化 a `NSDictionary`，存储在数据库中，然后检索和反序列化。以下是在 SQLite 数据库中序列化和保存数据的方法：

```
- (IBAction)saveButtonClicked:(id)sender
{
    sqlite3 *database;

    NSString *documentsDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *databaseName = [documentsDirectory stringByAppendingPathComponent:@"test.db"];

    if (sqlite3_open([databaseName UTF8String], &database) != SQLITE_OK)
    {
        NSLog(@"open failed");
        return;
    }

    NSString *sql = @"CREATE TABLE IF NOT EXISTS company (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_details BLOB);";

    if (sqlite3_exec(database, [sql UTF8String], NULL, NULL, NULL) != SQLITE_OK)
    {
        NSLog(@"create failed %s", sqlite3_errmsg(database));
        sqlite3_close(database);
        return;
    }

    NSDictionary *dictionary = @{@"name"   : @"IBM",
                                 @"street" : @"1 New Orchard Road",
                                 @"city"   : @"Armonk",
                                 @"state"  : @"New York",
                                 @"postal" : @"10504-1722"};

    NSData *data= [NSPropertyListSerialization dataFromPropertyList:dictionary
                                                             format:NSPropertyListXMLFormat_v1_0
                                                   errorDescription:nil];

    sql = @"INSERT INTO company (company_details) VALUES (?);";
    sqlite3_stmt *statement;

    if (sqlite3_prepare_v2(database, [sql UTF8String], -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"prepare failed %s", sqlite3_errmsg(database));
        sqlite3_close(database);
        return;
    }

    if (sqlite3_bind_blob(statement, 1, [data bytes], [data length], SQLITE_STATIC) != SQLITE_OK)
    {
        NSLog(@"bind failed %s", sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        sqlite3_close(database);
        return;
    }

    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"step failed %s", sqlite3_errmsg(database));
    }
    else
    {
        NSLog(@"success");
    }

    sqlite3_finalize(statement);

    sqlite3_close(database);
} 
```

并加载和反序列化数据：

```
- (IBAction)loadButtonClicked:(id)sender
{
    sqlite3 *database;

    NSString *documentsDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *databaseName = [documentsDirectory stringByAppendingPathComponent:@"test.db"];

    if (sqlite3_open([databaseName UTF8String], &database) != SQLITE_OK)
    {
        NSLog(@"open failed");
        return;
    }

    sqlite3_stmt *statement;
    NSString *sql = @"SELECT * FROM company;";

    if (sqlite3_prepare_v2(database, [sql UTF8String], -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"prepare failed %s", sqlite3_errmsg(database));
        return;
    }

    while (sqlite3_step(statement) == SQLITE_ROW)
    {
        NSInteger companyId = sqlite3_column_int(statement, 0);
        const void *blob = sqlite3_column_blob(statement, 1);
        NSInteger bytes = sqlite3_column_bytes(statement, 1);
        NSData *data = [NSData dataWithBytes:blob length:bytes];

        NSDictionary *dictionary = [NSPropertyListSerialization propertyListFromData:data
                                                                    mutabilityOption:NSPropertyListImmutable
                                                                              format:NULL
                                                                    errorDescription:nil];

        NSLog(@"%@", @{@"company_id"      : @(companyId),
                       @"company_details" : dictionary});
    }

    sqlite3_finalize(statement);

    sqlite3_close(database);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T15:47:04.337

您正在将包含 blob 的 ASCII 表示的字符串放入数据库中：

```
INSERT INTO surveys(...) VALUES(..., "<3c3f786d...") 
```

但是，在 SQLite 中，[blob 文字](http://www.sqlite.org/lang_expr.html#litvalue)必须格式化为带`x`前缀的单引号字符串，并且必须包含任何其他字符，例如`<>`：

```
INSERT INTO surveys(...) VALUES(..., x'3c3f786d...') 
```

无论如何，为了避免这样的格式问题，最好使用 Rob 的答案中的参数。

# vb.net - 不能使用 SQLite 实体框架作为 DataGridView 数据源

> ID：12975032
> 
> 赞同：0
> 
> 时间：2012-10-19T13:13:14.693
> 
> 标签：vb.net, entity-framework, sqlite, datasource

我使用“实体数据模型向导”从一个简单的 SQLite 数据库构建了一个实体框架模型

这工作正常，我已经编程了一段时间。

但是，我刚刚尝试将此 SQLite 实体框架模型用作 DataGridView 的数据源，但它无法将其视为数据源。一切都表明这应该是可能的。从同一个数据库创建一个 DataSet 是可行的，DataGridView 可以将它用作数据源。

我更喜欢使用实体框架，但不明白为什么它没有将其视为有效的数据源。

请帮忙！

这里要求的是 app.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections></configSections>
  <system.data>
    <DbProviderFactories>
  <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
</DbProviderFactories>
  </system.data>
  <system.diagnostics>
    <sources>
      <!-- This section defines the logging configuration for My.Application.Log -->
  <source name="DefaultSource" switchName="DefaultSwitch">
    <listeners>
      <add name="FileLog" />
      <!-- Uncomment the below section to write to the Application Event Log -->
      <!--<add name="EventLog"/>-->
    </listeners>
  </source>
</sources>
<switches>
  <add name="DefaultSwitch" value="Information" />
</switches>
<sharedListeners>
  <add name="FileLog" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" initializeData="FileLogWriter" />
  <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
  <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
</sharedListeners>
  </system.diagnostics>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <connectionStrings>
  <add name="simpleEntities" connectionString="metadata=res://*/GEM.Classes.test1.csdl|res://*/GEM.Classes.test1.ssdl|res://*/GEM.Classes.test1.msl;provider=System.Data.SQLite;provider connection string=&quot;data source=E:\simple.db3&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

作为测试，我使用了一个非常简单的数据库：

```
CREATE TABLE SETTINGS (
KEY VARCHAR(50) PRIMARY KEY NOT NULL ,
VALUE VARCHAR(255)  NULL DEFAULT NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:57:18.830

决定放弃 EF 并使用看起来效果很好的 DataSet。

# c# - 使用 while(true) 定期执行任务

> ID：12975036
> 
> 赞同：1
> 
> 时间：2012-10-19T13:13:25.310
> 
> 标签：c#, .net, winforms, multithreading, task-parallel-library

我需要不断地轮询数据存储以获取可能的更新。我正在使用以下代码实现这一点。顺便说一下，这是一个 Windows 窗体应用程序。

```
var uiContext = TaskScheduler.FromCurrentSynchronizationContext();

var updateTask = Task.Factory.StartNew(() =>
{
    while (true)
    {
        Thread.Sleep(5000);

        Task.Factory.StartNew(() =>
        {
            someData = dataStore.GetData();
        }).ContinueWith(t =>
        {
            someGrid.DataSource = someData;
        }, uiContext);
    }
}); 
```

`someData`是一个私有类字段并且`someGrid`是一个数据网格控件。

这似乎工作得很好，但我想知道是否有更好的方法来实现它。另外，我的外部任务应该是 LongRunning 吗？

**编辑：**

好的，在 Jon 和 Henk 的建议下，我改用了 Timer：

```
uiContext = TaskScheduler.FromCurrentSynchronizationContext();

updateTimer = new System.Timers.Timer(5000);
updateTimer.Elapsed += updateTimer_Elapsed;
updateTimer.Enabled = true; 
```

过去的事件：

```
void updateTimer_Elapsed(object sender, ElapsedEventArgs e)
{
    someData = dataStore.GetData();

    Task.Factory.StartNew(() =>
    {
        someGrid.DataSource = someData;
    }, uiContext);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:16:18.867

您可以/应该使用 Timer，而不是`Sleep()`在 PoolThread 中使用。
对于 WinForms，您可以简单地使用 Widows.Forms.Timer。

如果您确实想这样做，那么是的，使用 Longrunning 选项。但它仍然在浪费一个线程。

# database-design - 如何创建允许许多客户使用具有不同功能的网站的架构？

> ID：12975039
> 
> 赞同：4
> 
> 时间：2012-10-19T13:13:28.663
> 
> 标签：database-design, web-applications, configuration, coldfusion

我继承了一个应用程序的怪物。这是一个被许多客户用于订单处理的网站。它很旧，过时了，需要一些认真的更新。最困难的部分是它最初是为一种类型的客户端创建的，然后，随着新客户端的添加，代码被数百个 IF 语句混为一谈，这些语句基本上打开或关闭每个客户端的功能。想象一下这样的事情（用 ColdFusion 编写）：

```
<cfif clientId EQ "MIKE">
    <a href="cart1.cfm">Shopping Cart</a>
<cfelseif clientId EQ "JOE">
    <a href="cart2.cfm">Shopping Cart</a>
<cfelseif clientId EQ "BILL"
    OR clientId EQ "JILL"
    OR clientId EQ "RAY">
    <a href="cart3.cfm">Shopping Cart</a>
<cfelse>
    <a href="cart.cfm">Shopping Cart</a>
</cfif> 
```

以上是我在整个网站上处理的内容的一个很好的 CLEAN 版本。

因此，我正在尝试重构网站以允许更轻松的特定于客户端的配置 - 基本上是为每个客户端提供或隐藏功能。

我从我认为是一个简单、干净的解决方案开始，但我担心它可能会变得难以维护。

基本上，我将为每个客户提供一个 Web 根目录之外的目录，用于存储他们的文件——可能是网站上使用的文档等。这个目录类似于`C:\clients\MIKE\`. 在这个目录中，我存储了一个 xml 文件——我们称之为 config.xml。我创建的第一个 config.xml 文件具有以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <cart>
        <url>cart1.cfm</url>
    </cart>
</root> 
```

因此，对于每个页面请求，我都会查找 xml。如果存在，我将每个值复制到`Client`类实例的属性中：

```
<cfcomponent
    hint="Represents configurable per-Client settings stored in a local Xml file">
    <cfscript>
        VARIABLES.CartLink = "";
    </cfscript>

    <cffunction name="init" return="Client" output="false">
        <cfargument name="clientId" type="String" required="true" hint="i.e. 'MIKE'"/>

        <cfscript>
            var _clientXml = XmlNew();

            THIS = setClientId(ARGUMENTS.clientId);

            _clientXml = read();

            if  (   StructKeyExists(_clientXml.XmlRoot, "cart")
                &&  StructKeyExists(_clientXml.XmlRoot["cart"], "url")
                )
                setCartLink(_clientXml.XmlRoot["cart"]["url"].XmlText);

            return THIS;
        </cfscript>
    </cffunction>

    <cffunction name="getCartLink" returntype="String" output="false">
        <cfreturn VARIABLES.CartLink />
    </cffunction>

    <cffunction name="setCartLink" returntype="Void" output="false">
        <cfargument name="cartLink" type="String" required="true" />

        <cfset VARIABLES.CartLink = Trim(ARGUMENTS.cartLink) />
    </cffunction>

    <cfscript>
        function getXmlFilePath() {
            return APPLICATION.ClientFilePath
                & "\" & getClientId() & "\config.xml";
        }
    </cfscript>

    <cffunction name="read" access="public" output="false" returntype="xml">
        <cfscript>
            var _clientXml = XmlNew();
            var _fileContents = "";

            _clientXml.XmlRoot = XmlElemNew(_clientXml, "root");

            if  (FileExists(getXmlFilePath()))
                _fileContents = FileRead(getXmlFilePath());

            if  (IsXml(_fileContents))
                _clientXml = XmlParse(_fileContents);

            return _clientXml;
        </cfscript>
    </cffunction>
</cfcomponent> 
```

使用上面的示例 xml，当用户在“MIKE”客户端下登录时，REQUEST 范围内的 Client 实例的属性值为“cart1.cfm” `cartLink`。

现在我可以简单地查找该值并使用它来填充锚标记：

```
<a href="#REQUEST.Client.getCartLink()#">Shopping Cart</a> 
```

我的目标是保持代码干净，避免在需要编辑的地方到处出现数百个 IF 语句。

但是，当我现在看到这个设计时，我意识到这可能更像是一场维护噩梦。该网站目前有大约 30-40 个客户。所以，现在，我需要维护 30-40 个 xml 文件，每个配置属性都有任意数量的节点。此外，每当添加新功能时，我都必须使用新属性的新 getter/setter 方法更新客户端类。

我不想让事情变得更糟。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:56:20.267

首先，我不知道 ColdFusion，所以我不能给你代码。

但是，您所描述的问题通常被称为“多租户”架构。应用程序经历您描述的过程并回顾性地破解这些功能并不罕见；它很少有好的结局！不过，您在谷歌上搜索这个词可能会很开心。

以我的经验，你必须选择你希望复杂性存在的地方——目前，它存在于代码中，这是它存在的最糟糕的地方。复杂的代码更难维护，包含更多错误，更难更改/扩展，并使开发人员生气。

将复杂性作为数据/配置进行管理是一种更好的方法——它显着降低了代码库的复杂性，并且通常更易于管理。你已经在这条路上迈出了第一步，但我会稍微完善一下。

首先，我要介绍“[约定优于配置](http://en.wikipedia.org/wiki/Convention_over_configuration)”的概念。因此，在您使用的购物车示例中，我会考虑使用客户端 ID 命名解决方案中的所有变量元素。所以不是“cart3.cfm”，而是“cartMike.cfm”。这应该会显着减少 XML 转换的数量。

其次，您可能想引入默认值的概念。在大多数情况下，80% 的设置在客户端之间是通用的，只有 20% 需要客户端特定的设置。不必管理所有这些设置，而是引入默认值；如果没有特定于客户端的默认值，请使用默认文件中的那个。

第三，您可能想要介绍客户类型 - 黄金/白银/青铜、免费/中小企业/企业等等。这将需要为每种客户端类型创建默认配置，但可能会增加默认配置文件的命中率。

最后，您需要考虑应用程序生命周期——新客户的供应过程应该是什么？它主要是一项技术任务吗？在这种情况下，我会继续使用 XML 文件，因为它们可以在版本控制中轻松管理。如果它更像是一项“业务”任务，您希望将其包装成一个对用户更友好的流程，但是您需要能够验证配置。例如，如果“cart”的配置设置是“/Mike/cart.cfm”，您需要确保该文件确实存在。您可能还需要版本控制和从开发人员转移到测试环境到生产环境的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:43:11.780

我会将客户端配置设置存储在数据库中。这将使更改设置变得更容易，如果他们想选择不同的配置，还允许他们更改设置（现在可能不是这种情况，但请提前计划）。想象一下，拥有不同层次的功能，每一个都花费不同的金额。允许客户维护自己的帐户并相应地付款。我知道这超出了您的问题范围，而只是您如何解决不断变化的需求的一个示例。

通常，在用户登录或访问站点的某个部分后，从数据库中提取站点配置后，我会看到站点配置存储在该用户的会话范围结构中。

```
session.userInfo.configurations.cart = cart1.cfm
session.userInfo.configurations.paymentMethod = PayPal
session.userInfo.configurations.maxSubCatLevels = 2
etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:45:24.073

我宁愿将数据存储在数据库中而不是 XML 文件。更新（您可以自己构建一个 CMS 来完成）比加载文件更容易。

然后我想将所有这些存储为一个大结构，例如：

```
stuClient = {
  cart_url = "cart1.cfm",
  other_url = "other2.cfm",
  ...
} 
```

我还宁愿将整个内容存储在会话范围内，这样您就不必在每个页面请求上重新查询 DB / XML 文件。我假设您已经在使用 session 来存储 clientID。

因此，您最终可以做的是，在 onApplicationStart 中，一次获取所有客户端的所有数据，并将其存储在应用程序范围内。这部分实际上是可选的，因为然后，在 onSessionStart 中，只获取与该客户端相关的数据（可能是查询的查询，如果您已经开始将它存储在应用程序中），并将其转换为结构。

因此，在您的代码中，您只需根据需要引用 stuClient.cart_url 。而不是在每个请求上初始化您的 CFC，而是在每个会话上都这样做。用数据结构初始化。

然后在每个页面中，您可以使用类似`<a href="#Client.getLink('cart_url')#">`

```
 <cffunction name="getLink" returntype="String" output="false">
        <cfargument name="linktype" type="String" required="true" hint="e.g. 'cart_url'"/>

        <cfreturn VARIABLES.stuClient.CartLink>
    </cffunction> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T15:43:51.593

我将提供一个例子来解释其他人的解释。这里最简单的解决方案是让您用每个“设置”的简单方法调用来替换所有这些条件。这是一种久经考验的、经过验证的技术，可用于处理您的情况。即使您不使用会话，您也可以有多种方法来缓存或让数据可用，而无需每次都以更基本的方式访问数据库。下面我有 application.cfc、settings.cfc 和一个模板。

```
//In your application.cfc onSessionStart (hopefully you are using sessions)
session.settings = createObject("component", "settings").init(clientID);

//In your settings.cfc 
//saving keystrokes with cfscript style functions
<cfscript>
function init(clientID){
   variables.clientID = arguments.clientID;
   setAllUserSettings();
   return this;
} 

function setAllUserSettings(){
   //query the database for a particular user 
   //you can keep the query in memory or set each row value to something
   //let's say you wanted to use the QoQ method
   variables.settings = qryAllUserSettings();       
}
</cfscript>

<cffunction name="getSetting">
    <cfarguments name="type" />
    //start query of query to get a particular setting
    //for our user
    <cfquery name="qry" dbtype="query">
         select value
         from variables.settings
         where setting = #arguments.type#
    </cfquery>

    <cfreturn qry.value />
</cffunction>

<cffunction name="qryAllUserSettings">
   <cfset var qry = "" />
   //we'll get every possible setting for this user
   <cfquery name="qry" datasource="dsn">
        select setting,value
        from tblSettings
        where clientID = variables.clientID
   </cfquery>
   <cfreturn qry />
</cffunction>

//In your ColdFusion Template
<a href="#session.settings.getSetting(type="cart")">Shopping Cart</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T10:41:21.893

为了重申之前所说的，我会在数据库中保存信息。ColdFusion 使您能够创建独立的应用程序，这些应用程序可以使用具有多个 Application.cfc 或 .cfm 文件的相同基本代码，您需要做的就是确保每个文件都有一个唯一的 this.name 变量并将它放在单独的客户文件夹。然后在应用程序启动时读取客户端的特定设置，然后将它们缓存在应用程序范围内。

ColdFusion（特别是企业版）正是为此目的而设计的，网上有很多信息可以提供帮助。搜索管理多个应用程序以及 application.cfc 如何帮助您执行此操作。

# javascript - Razor 视图引擎：使用 JS 进行复杂循环

> ID：12975042
> 
> 赞同：1
> 
> 时间：2012-10-19T13:13:46.403
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

嗨，我想知道如何在嵌套的 foreach 循环示例中添加 javascript if 条件：

```
function validation(){
  @foreach (var region in Model.DefaultDeliver)
  {
  //js code
  if(document.getElementByName('#@( region.Region.RegionName)') != null){ 
      foreach (var country in region.Region.Countries)
       {    
          //js code      
          if(document.getElementByName('#@(region.Region.RegionName)') != null){

           }
        }
      } 
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:17:42.720

将@放在前面

```
@foreach (var country in region.Region.Countries) 
```

如果 razor 和 js 之间存在编译混淆，您可以使用

`@:` （注意冒号）一行

```
//js code    
@:if(document.getElementByName('#@( region.Region.RegionName)') != null){ 
```

或用文本节点包装几个

```
@foreach (var country in region.Region.Countries)
    <text>
        if(document.getElementByName('#@(region.Region.RegionName)') != null){

           }

    </text> 
```

# jquery - jQuery 两个语句显然冲突，但我不知道为什么

> ID：12975044
> 
> 赞同：1
> 
> 时间：2012-10-19T13:13:49.680
> 
> 标签：jquery

我有一组针对特定类的简单 jQuery 语句：

```
$(".printersToggle").mouseover(function() { 
    $(this).addClass("printersToggleOver");
}); 
$(".printersToggle").mouseout(function() { 
    $(this).removeClass("printersToggleOver");
}); 
```

和：

```
$(".printersToggle").click(function() {
    var id = $(this).attr('id');
    $.getJSON("/ajax", 
            function(data) {
                $.each(data, function(key, val) { 
                    $("#" + id).replaceWith('<div class="row printersToggle" id="' + id '"><div class="twelve columns">Show printers (Best price: £4.65)</div></div><!-- end of printers toggle --><!-- printers --><div class="row" id="printers"><table><thead><tr><th>Title</th><th>Rating (%)</th><th>Experience (jobs)</th><th>Average job speed (days)</th><th>Reliability (%)</th><th>Cost</th><th>Print</th></tr></thead><tbody><tr><td id="printersName_{{ design.id }}"></td><td id="printersRating"></td><td>4</td><td>2</td><td>96</td><td>£4.56</td><td class="success printButton radius">Add to Cart</td></tr></tbody></table></div>');  
                });
            });
     });
}); 
```

如果没有第二个（点击功能），第一个按预期工作。使用第二个语句，鼠标悬停效果停止工作。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:17:05.107

当您调用 replaceWith() 时，您将删除前一个 DOM 元素以及与之关联的任何事件处理程序。您应该使用带有选择器的 on() 来动态绑定事件处理程序：

```
$('#parentContainer').on('mouseover', '.printersToggle', function() { ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:17:13.343

请改用此代码：

```
$("body").on("mouseover",".printersToggle" ,function(){$(this).addClass("printersToggleOver");
});

$("body").on("mouseout",".printersToggle" ,function(){$(this).removeClass("printersToggleOver");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:17:23.563

您可以使用*.hover()*函数，看看是否有帮助

```
$(".printersToggle").hover(function() { 
    $(this).addClass("printersToggleOver");
}, 
function() { 
    $(this).removeClass("printersToggleOver");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:17:28.500

您是否尝试过使用`hover`而不是`mouseover`/ `mouseout`？

```
$(".printersToggle").hover(function() { 
    $(this).addClass("printersToggleOver");
}, function() { 
    $(this).removeClass("printersToggleOver");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T13:20:12.147

尝试：

```
$(document).ready(function () {
$(".printersToggle").hover(function() { 
        $(this).toggleClass("printersToggleOver");
    });
}); 
```

# ruby - map/reduce 在 Mongoid 上失败

> ID：12975046
> 
> 赞同：0
> 
> 时间：2012-10-19T13:14:00.513
> 
> 标签：ruby, ruby-on-rails-3, mapreduce, mongoid, mongoid3

我有这样的课

```
class Todo

  TAG_REGEX = /(?:^|\s)#(\w+)/i

  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::FullTextSearch

  field :desc, type: String
  field :done, type: Boolean, default: false
  field :tags, type: Array

end 
```

我正在尝试像这样映射/减少标签

```
map = %Q{
  function() {
    this.tags.forEach(function(tag){
      emit(tag, { count: 1 });
    }
  }
}

reduce = %Q{
  function(key, values) {
    var result = { count: 0 };
    values.forEach(function(value) {
      result.count += value.count;
    });
    return result;
  }
}

@map = Todo .map_reduce(map, reduce).out(replace: "tags") 
```

当我尝试迭代结果时，我看到了这个异常

```
The operation: #<Moped::Protocol::Command
  @length=480
  @request_id=316
  @response_to=0
  @op_code=2004
  @flags=[]
  @full_collection_name="todozen_development.$cmd"
  @skip=0
  @limit=-1
  @selector={:mapreduce=>"todos", :map=>"\n      function() {\n        this.tags.forEach(function(tag){\n          emit(tag, { count: 1 });\n        }\n      }\n    ", :reduce=>"\n      function(key, values) {\n        var result = { count: 0 };\n        values.forEach(function(value) {\n          result.count += value.count;\n        });\n        return result;\n      }\n    ", :query=>{}, :sort=>{"created_at"=>-1}, :out=>{:replace=>"tags"}}
  @fields=nil>
failed with error "ns doesn't exist" 
```

我在这里想念什么？
有人需要更多信息吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:58:09.460

`Todo`是一个嵌入式类...没有办法映射/减少一个嵌入式类...

# c - 不使用 & 或 * 等于两个指针？

> ID：12975047
> 
> 赞同：3
> 
> 时间：2012-10-19T13:14:02.360
> 
> 标签：c, pointers

我试图了解这段代码的作用（以及是否允许）：

```
int * A;
int * B;
A = (int *)malloc( size_t somenumber );
B = A;

// bunch of stuff using B, B++, etc. 
```

我读过的所有内容总是显示使用引用运算符 ( `&`) 或取消引用运算符 ( ) 将事物等同于指针`*`。

这种对等有什么作用？

而且，当我最终`free(A)`会发生什么`B`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T13:15:19.750

这不等于两个指针，它是一个*指针赋值*。一次

```
B = A; 
```

执行时，两个指针都指向同一个内存区域：访问`*B`变得与访问完全相同`*A`，`B[i]`变得等价于`A[i]`，依此类推。

请注意，释放`A`使`B` *dangling*，反之亦然。换句话说，在调用之后

```
free(A); 
```

访问`*B`成为未定义的行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T14:07:38.283

当涉及到指针混淆时，图片总是很好的：

```
int * A; // create a pointer to an int named "A"
int * B; // create a pointer to an int named "B"
A = (int *)malloc( size_t somenumber ); // Allocate A some memory, now B is an 
                                        // uninitialized pointer; A is initialized,
                                        // but just to uninitialized memory 
```

从概念上讲：

![在此处输入图像描述](../Images/55b971ed5f2f5e5322ffb84440819542.png)

```
B = A; // Assign B to the value of A (The uninitialized memory) 
```

![在此处输入图像描述](../Images/d35321b5924349c5199e202ceba24d0b.png)

```
free(A); 
```

![在此处输入图像描述](../Images/d62d7cf467a613de4bb5abdd4265be9e.png)

所以毕竟我认为你可以看到正在发生的事情。B 被分配了 A 的值，这是已分配和未初始化的内存块。所以现在你只有两个指向同一个区域的指针。

至于`free()`问题，正如您在调用时所看到的那样`free(A);`，A 和 B 都指向同一个区域，那里不再为您的程序分配任何内容。这就是为什么在调用`free()`时最好将指针设置为`NULL`.

现在回到你最初的问题。如果您想检查两个指针`==`​​：

```
int * A; // create a pointer to an int named "A"
int * B; // create a pointer to an int named "B"
A = (int *)malloc( size_t somenumber ); // Allocate A some memory, now B is an 
                                        // uninitialized pointer; A is initialized,
                                        // but just to uninitialized memory

if(B == A){
   // The pointers are pointing to the same thing!
}
if(*B == *A){
   // The values these pointers are pointing to is the same!
} 
```

**更新**
因此，要回答您更新的问题，我们需要更改`B`.

```
int *A;  // A is a pointer to an int
int **B; // B is a pointer to a pointer to an int
B = &A;  // B is now pointing to A 
```

为了说明这一点：

![在此处输入图像描述](../Images/1f758b8f4ab6f53978192130cd43ca18.png)

对于`B=*A`：

```
int *A;
int B;
A = malloc(sizeof(int));
*A = 5;
B = *A; 
```

这是对 的尊重`A`。因此，您只需将 A 指向的任何内容分配给`B`，在本例中为 5

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T13:15:37.573

这不是“等同”，无论这意味着什么，这只是分配。指针`A`的值（您刚刚分配的内存块的地址）被复制到指针`B`中。

当你`free(A)`,`B`成为所谓的“悬空指针”，即不再有效使用的指针。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T13:15:53.080

您只是将一个指针分配给另一个。现在`B`将指向任何`A`指向的东西。如果您免费`A`，它也将免费`B`（不知道如何表达这一点，因为只会发生一种`free`情况）。至于`&`你可能的意思是：

```
int *A;
int B;
A = &B; 
```

这意味着使指针`A`指向整数`B`，或将`B`地址存储在`A`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T13:16:02.470

这只是将两个指针设置为指向相同的内存地址。

如果稍后将其中一个更改为指向另一个地址，这不会影响另一个——尽管取消引用和更改指向的值当然也可以从另一个指针中看到。

如果其中一个指针被释放，则另一个副本将立即非法取消引用（假设它在分配后保持相同的值）。

编写此类代码的一个实际原因可能是`A`在分配的内存开始时应该保持“固定”，而`B`在程序执行期间将在分配的范围内漫游。您需要`A`释放内存（也许作为基线），但出于某种原因使用另一个“临时”指针进入该内存会更方便。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-19T13:21:26.650

在上述情况下，当你 时`free(A)`，指针 A 指向的内存块（指针 B 也指向同一个块）将被释放并将资源返回给系统。存储在 A 或 B 中的地址仍然存在（我们称之为悬空指针 - 指向某个内存块的先前位置的指针）。通常，我们在调用后将其设置为 NULL `free()`，至少对于现代操作系统而言，当我们稍后尝试错误地引用指针时，会导致系统发出 SIGSEGV 和核心转储信号。否则，当指针指向的相同地址以某种方式再次分配给您时，程序可能会显示奇怪的行为（有时会崩溃，有时会继续，有错误的输出）。

# c++ - MFC CScrollView 滚动不起作用

> ID：12975052
> 
> 赞同：1
> 
> 时间：2012-10-19T13:14:13.280
> 
> 标签：c++, visual-c++, mfc, scrollview, mdi

我是使用 MFC 滚动视图的新手，我在 ScrollView 类的 onPaint 函数中显示大图像。这是以下代码的 On initial update 功能

```
void CCenterImageView::OnInitialUpdate()
{
    CScrollView::OnInitialUpdate();

    // TODO: Add your specialized code here and/or call the base class

    CSize sizeTotal;
    // TODO: calculate the total size of this view
    sizeTotal.cx = m_matImage.cols;
    sizeTotal.cy = m_matImage.rows;
    SetScrollSizes(MM_TEXT, sizeTotal,sizeTotal);

}

void CCenterImageView::OnVScroll(UINT nSBCode, UINT nPos, CScrollBar* pScrollBar)
{
    // TODO: Add your message handler code here and/or call default

    CScrollView::OnVScroll(nSBCode, nPos, pScrollBar);

    //Invalidate();
}

void CCenterImageView::OnHScroll(UINT nSBCode, UINT nPos, CScrollBar* pScrollBar)
{
    // TODO: Add your message handler code here and/or call default

    CScrollView::OnHScroll(nSBCode, nPos, pScrollBar);
    UpdateData();
    //Invalidate();
}

void CCenterImageView::OnPaint()
{
    CPaintDC dc(this); // device context for painting
    // TODO: Add your message handler code here
    // Do not call CView::OnPaint() for painting messages

    if(m_CVvImageObj.GetImage())
    {       
        //this function blit the bitmap on the screen height and width are more than 1000 pixels
        m_CVvImageObj.Show(dc.GetSafeHdc(),0,0,m_CVvImageObj.Width(),m_CVvImageObj.Height());
    }

} 
```

通过使用这个[http://www.functionx.com/visualc/views/scrollview.htm](http://www.functionx.com/visualc/views/scrollview.htm)我可以看到垂直和水平滚动，但按下它们不会改变视图上的任何内容。请指导我如何在用户点击时移动滚动并更改视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:10:02.547

CScrollView 就像您在大画布上绘画一样，您可以使用 SetScrollSizes 确定其大小。您设置的大小通常是整个图像的大小，很可能大于显示它的窗口。

然后，当您处理 OnDraw 时，您可以像之前那样绘制整个图像，也可以只绘制正在显示的部分，这可以从 GetClipBox 中找到。后者仅是提高效率所必需的，因为 CScrollView 将剪切不可见的部分。

您根本不需要 OnXScroll 处理程序。您应该删除它们并让 CScrollView 处理滚动，如果这就是您为响应滚动所做的一切。

如果您的图像尺寸> = 2 ^ 15，则会出现问题，但这听起来不像您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T14:23:25.903

您的代码看起来很可疑（第三个参数）。但是如果和滚动到32K以上的问题有关，请看知识库文章'PRB: CScrollView Scroll Range Limited to 32K'（文章ID：166473）。

# javascript - 字数小书签

> ID：12975054
> 
> 赞同：0
> 
> 时间：2012-10-19T13:14:25.880
> 
> 标签：javascript, html, dynamic, bookmarklet

我正在尝试在不加载外部文件的情况下创建一个字数统计（适用于任何页面）书签。简而言之，我想单击小书签，然后能够在屏幕上拖动和选择文本，并获得所选单词数量的警报。我已经把它放在一起以获得正确的功能，但我在转换为书签时磕磕绊绊：

```
<html>
<body onmouseup="countWords()">     
<article id="page1">
    <h1>Home 2</h1>
    <p>Welcome 2</p>
    <script type="text/javascript">
function countWords() {
var selectedText = document.activeElement;
var selection = selectedText.value.substring(selectedText.selectionStart, selectedText.selectionEnd);
words = selection.match(/[^\s]+/g).length;
if (words !== "") {
    alert(words);
}
}
</script>
    <div><textarea></textarea></div>
</article>
</body>
</html> 
```

第一个问题：我可能会叫错树，但我想将 onmouseup 附加到 activeElement 但不知道如何做到这一点。

第二个问题：我可以在不使用外部文件的情况下将其插入书签吗？

任何帮助将不胜感激。

最好的，

塔姆勒

转义字符...这就是问题所在。

这是一个工作示例：

```
<a href="javascript:(document.onmouseup=function(){var selectedText=document.activeElement;var selection=selectedText.value.substring(selectedText.selectionStart,selectedText.selectionEnd);words=selection.match(/[^\s]+/g).length;if(words!==&quot;&quot;){alert(words)}})();" target="_blank">Word Count</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:27:21.213

试试这个，看起来你的代码有点复杂：

```
alert(window.getSelection().toString().match(/\w+/g).length); 
```

第一部分，`window.getSelection().toString()`将获得实际选择的文本。最后一部分是一个基本的正则表达式来匹配每个单词，然后计算匹配。您可以修改正则表达式以或多或少地适应您的需求。

这只会提醒*已经*选择的单词数量，如果您想在点击小书签后进行选择，您可以将上面的内容包装在一个侦听窗口 mouseup 事件的函数中。

编辑：这是一个完整的示例书签：

```
<a href="javascript: _wcHandler = function() { var _wcSelection, _wcCount; ((_wcSelection = window.getSelection().toString().match(/[^\s]+/g)) && (_wcCount = _wcSelection.length) && (window.removeEventListener('mouseup', _wcHandler) || alert(_wcSelection.length))); }; window.addEventListener('mouseup', _wcHandler);">Word Count</a> 
```

...并以可读的格式编写：

```
_wcHandler = function() {
    var _wcSelection, _wcCount; 
    ((_wcSelection = window.getSelection().toString().match(/[^\s]+/g)) 
     && (_wcCount = _wcSelection.length) 
     && (window.removeEventListener('mouseup', _wcHandler) 
         || alert(_wcCount))); 
}; 
window.addEventListener('mouseup', _wcHandler);​ 
```

最后，一个 jsFiddle 供您修改：http: [//jsfiddle.net/Rr2KU/1/](http://jsfiddle.net/Rr2KU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:35:02.503

> 我可能会叫错树，但我想将 onmouseup 附加到 activeElement 但不知道如何做到这一点。

将其附加到文档中。`document.onmouseup = countWords`或者`document.onmouseup = function(){...}`

> 我可以在不使用外部文件的情况下将其插入到书签中吗？

是的：

```
javascript:document.onmouseup=function(){var selectedText=document.activeElement;var selection=selectedText.value.substring(selectedText.selectionStart,selectedText.selectionEnd);words=selection.match(/[^\s]+/g).length;if(words!==""){alert(words)}} 
```

[http://www.google.com/search?q=bookmarklet+generator](http://www.google.com/search?q=bookmarklet+generator)

但我用过：http: [//javascriptcompressor.com/](http://javascriptcompressor.com/)

# java - logger.debug(...) 在日志文件中打印两次

> ID：12975062
> 
> 赞同：0
> 
> 时间：2012-10-19T13:14:58.543
> 
> 标签：java, log4j

我们已经`logger.debug()`在代码中编写了一些语句，但它在下面的 fachene 中打印了两次。

> 2012-10-17 10:53:34,791，MessageListenerThreadPool：0，[包名]，进入方法（），2012-10-17 10:53:34,791 MessageListenerThreadPool：0 DEBUG [包名]进入方法（）

请帮助我为什么它打印两次？

下面是我的 log4j 配置。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
    <appender name="infoLogsFile" class="org.apache.log4j.FileAppender">
      <param name="File" value="Application.log"/>
       <param name="Threshold" value="DEBUG"/>
      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d %t %-5p [%c] %m%n"/>
      </layout>
   </appender>   

   <appender name="fatalLogsFile" class="org.apache.log4j.FileAppender">
         <param name="File" value="Application_Func_Point.log"/>
       <param name="Threshold" value="FATAL"/>
         <layout class="org.apache.log4j.PatternLayout">
             <param name="ConversionPattern" value="%d, %t, [%c], %m, %n,"/>
         </layout>
   </appender>

   <appender name="custom" class="org.apache.log4j.RollingFileAppender">
   <param name="File" value="Application.log"/>
   <param name="Append" value="true"/>
    <param name="Threshold" value="DEBUG"/>
   <param name="MaxFileSize" value="75000KB"/>
   <param name="maxBackupIndex" value="500"/>
   <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d, %t, [%c], %m, %n,"/>
   </layout>       
   </appender>
<logger name="com.unisys"> `
    <level value="debug" /> 
</logger>
   <!-- ======================= -->
   <!-- Setup the Root category -->
   <!-- ======================= -->
   <root> 
    <priority value ="debug" /> 
       <appender-ref ref="custom"/>
    <appender-ref ref="fatalLogsFile"/>
    <appender-ref ref="infoLogsFile"/>
   </root>
</log4j:configuration> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:26:58.900

您有 2 个使用同一文件的附加程序：“infoLogsFile”和“custom”都链接到“Application.log”，并且两个阈值参数的值都为“DEBUG”，这意味着您在 DEBUG 级别记录的任何内容都将被写入两次

# apache - 如何在php中重写url？

> ID：12975063
> 
> 赞同：0
> 
> 时间：2012-10-19T13:15:00.193
> 
> 标签：apache, mod-rewrite

我有一些关于在 php 中重写 url 的问题要问。

1- www.test.com/index.php?name=123 到 www.test.com/123

2- www.test.com/folder1/index.php?name=123 到 www.test.com/folder1/123/index.php

关于我在数字 1 上的编码，但我不知道如何用数字 1 重写数字 2 组合：

```
RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)$ index.php?usname=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:50:47.857

*当您说“在 php 中重写 url”时，我假设“在 php 中”是指应用程序的语言，而不是重写/重定向方法 --- 因为您的示例代码由 Apache 指令组成。*

以下规则会将 test.com/folder1/index.php?name=123 形式的 URL 更改为 test.com/folder1/123 形式的“漂亮” URL（我删除了 'index.php'更人性化）。

1.  重定向丑陋的查询 URL，以便用户始终看到“漂亮”的 URL

    ```
    RewriteCond  %{QUERY_STRING} \bname=([^&]+)
    RewriteRule  ^/?folder1/index\.php$ /folder1/%1 [R=302] 
    ```

2.  告诉服务器如何解释漂亮的 URL

    ```
    RewriteRule  ^/?folder1/([^\/]+)(/index\.php)?$ /folder1/index.php?name=$1 [L] 
    ```

**注意：** 上面的第一条规则使用 302（临时）重定向，因此您的浏览器在测试和调整它们时不会“记住”重定向规则。如果您关心 SEO，请将 更改`[R=302]`为`[R=301]`，这是一个永久重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:19:53.520

试试这个：

```
RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)/([0-9]+)/index.php $1/index.php?name=$2 [QSA,L]
RewriteRule  ^(.*)$ index.php?usname=$1 [QSA,L] 
```

重写规则末尾的 [L] 指令表示如果规则匹配，则结束对 .htaccess 的解析。

因此，您必须将规则放在您的规则之前 ^(.*)$ 处理每种情况

# android - 是否可以设置通知在 android API 级别 10 或更低级别中显示多长时间？

> ID：12975067
> 
> 赞同：8
> 
> 时间：2012-10-19T13:15:10.333
> 
> 标签：android, notifications, notificationmanager

## 研究

我一直在查看[`NotificationManager`](http://developer.android.com/reference/android/app/NotificationManager.html)API 级别 10 的 android 文档中的类，但还没有找到实现这一点的方法。我也在谷歌上环顾四周，但只找到了如何设置实际设置通知的时间以及如何设置显示 Toast 通知小部件的时间长度。

## 目前已实施

我已经设置了`FLAG_NO_CLEAR`和`FLAG_ONGOING_EVENT`以保持通知图标存在，并在展开通知下拉列表后保持通知可见。

## 尝试做

我试图在通知栏中显示通知文本 10 秒，而不是标准时间。所以我基本上想完全按照该[`setDuration(int)`](http://developer.android.com/reference/android/widget/Toast.html#setDuration(int))函数在 toast 小部件中的作用。

我想知道这是否可能，如果可以，是否有人可以为我指明如何完成它的正确方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:17:50.163

> 我试图在通知栏中显示通知文本 10 秒，而不是标准时间。

如果“通知栏中的通知文本”是指股票代码文本（例如，`setTicker()`在您的`Builder`），则您无法控制该持续时间。

如果“通知栏中的通知文本”意味着通知抽屉条目中的某些内容，则欢迎`cancel()`您在一段时间后收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:19:28.433

我不相信这是用户期望的行为（他们可能不会在 10 秒内查看设备）

话虽如此，您可以尝试设置一个警报，该警报在未来 10 秒触发，然后取消通知。

如果您想为已经在看屏幕的用户提供一个简短的通知，您最好使用`Toast`.

# android - Android TCP 连接最佳实践

> ID：12975080
> 
> 赞同：11
> 
> 时间：2012-10-19T13:15:55.763
> 
> 标签：android, tcp, tcpclient

我正在开发一个需要与 TCP 服务器建立 TCP 连接的 Android 应用程序（用 Node.js 编写）

我的 Android TCP 客户端正在工作，可以来回发送消息。

我的具体问题是：

1.  在 Android 中处理与服务器的 TCP 连接的最佳方法是什么？
2.  如何维护连接（在 onDestroy() 等上正确关闭连接）？
3.  那么使用 AsyncTask 有什么更好的方法吗（除了普通的 Thread 类，这在 Android 4.0 中是不允许的）

我在 AsyncTask 中有我的套接字连接，如下所示：

```
@Override
protected Void doInBackground(Void... params) {
        try {
            Log.d("TCP_MESSAGE", "Connecting...");

                socket = new Socket(MY_LOCAL_IP, 8080);
                dataOutput = new DataOutputStream(socket.getOutputStream());

                inputstream = new InputStreamReader(socket.getInputStream());
                input = new BufferedReader(inputstream);

            while (!canceled) {
                String message = input.readLine();
                handleMessage(message);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return null;
} 
```

我在 AsyncTask 中有连接的原因是因为我使用的是 android 4.0，并且不允许在常规线程中使用网络代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:18:45.063

服务应该拥有连接。如果您需要在应用程序未运行时保持连接，那么您应该将其设为前台服务。如果您不使其成为前台服务，请确保从您的活动绑定到该服务以使其保持活动状态。

不要忘记该服务也在主 (UI) 线程上运行，因此您仍然需要一个单独的线程来处理通信。

如果您只有一个活动并且只想处理由于配置更改而重新启动，那么您可以自己处理配置更改，保持连接由非 ui 片段拥有，或者使用 onRetainNonConfigurationInstance()/getLastNonConfigurationInstance() 将连接传递给自己) （但是不赞成使用片段）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:37:16.103

> 在 Android 中处理与服务器的 TCP 连接的最佳方法是什么？

这在很大程度上取决于你的应用程序的复杂性，以及你想用它做什么。Android 网络没有具体细节。

> 如何维护连接（在 onDestroy() 等上正确关闭连接）？

每当您跌倒时打开套接字并将其保留为类字段。`onDestroy()`调用时关闭它。确保你检查它是否不是`null`第一个。

> 那么使用 AsyncTask 有什么更好的方法吗（除了普通的 Thread 类，这在 Android 4.0 中是不允许的）

您可以在 Android 4.0 (API14) 中使用普通的 Java 线程。您可能会感到困惑：Android 中不允许在主线程 ( *UIThread* ) 中有网络代码。

# c++ - 公共变量

> ID：12975088
> 
> 赞同：0
> 
> 时间：2012-10-19T13:16:10.630
> 
> 标签：c++, qt, variables, public

我想创建一个可以被我创建的所有类访问的变量。我该怎么做呢？我尝试在主窗口头文件中声明：

```
public:
    extern int number; 
```

然后通过说在其他类中引用它：

```
MainWindow::number; 
```

这给了我一个错误：错误：为“数字”指定的存储类。谁能说我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:25:50.903

成功的关键词是`static`。使其成为静态变量。

# c# - 检查excel 2010位数

> ID：12975093
> 
> 赞同：1
> 
> 时间：2012-10-19T13:16:28.587
> 
> 标签：c#, visual-studio, excel, vsto, office-interop

是否可以使用在 kernel32.dll 中定义的**getBinaryType()**函数来获取 Office 2010的位数。

```
[DllImport("kernel32.dll")]
static extern bool GetBinaryType(string lpApplicationName, out uint lpBinaryType);

uint type;
GetBinaryType("applicationName",out type); 
```

我曾尝试使用如下所述的应用程序类，但有时它会失败。

```
 public static ExcelVersion GetExcelVersion(object applicationClass)
        {
            if (applicationClass == null)
                throw new ArgumentNullException("applicationClass");

            PropertyInfo property = applicationClass.GetType().GetProperty("HinstancePtr", BindingFlags.Instance | BindingFlags.Public);
            if (property == null)
                return ExcelVersion.Excel;

            return (System.Runtime.InteropServices.Marshal.SizeOf(property.GetValue(applicationClass, null)) == 8) ? ExcelVersion.Excel2010_64 : ExcelVersion.Excel2010_32;
} 
```

还有其他方法可以检测**Office 2010**位数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:48:28.090

我会做的是

1）打开以下注册表项：

```
HKEY_CLASSES_ROOT\CLSID\{00024500-0000-0000-C000-000000000046}\LocalServer 
```

（该指南的意思是“Excel 应用程序”）

2) 从键的默认值中提取 Excel 的 .EXE 路径（您要删除所有命令行参数）

3）`GetBinaryType`在路径上使用。

# sass - 为具有深度的 3d 文本编写 SASS mixin

> ID：12975097
> 
> 赞同：1
> 
> 时间：2012-10-19T13:16:44.453
> 
> 标签：sass

我的项目中有以下 SASS mixin

```
@mixin text_3d($color){
  color: $color; 
  text-shadow:   0 3px 0 darken($color, 14%),
         0 4px 0 darken($color, 15%),
         0 5px 0 darken($color, 16%),
         0 6px 0 darken($color, 17%),
        3px 8px 15px rgba(0,0,0,0.1),
        3px 8px 5px rgba(0,0,0,0.3);

} 
```

我想将多个“文本阴影”行替换为一个循环，但我不知道该怎么做。在伪代码中：

```
@mixin text_3d($color, $depth){
  color: $color; 
  text-shadow:   
       @for $i from 0 through $depth {
           0 ($i+3)px 0 darken($color, $i+14%), 
       }

    3px 8px 15px rgba(0,0,0,0.1),
    3px 8px 5px rgba(0,0,0,0.3);

} 
```

但我不断收到错误，好像我无法将@for 放在那里。

```
(Line 143: Invalid CSS after "  text-shadow:": expected expression (e.g. 1px, bold), was "@for $i from 0 ...") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:48:48.017

```
@mixin threedshadow($color, $depth) {
  $all: ();
  @for $i from 1 through $depth {
    $all: append($all, append($i*1px $i*1px 0, darken($color, $i+14%)), comma);
  $all: append($all, 3px 8px 15px rgba(0,0,0,.1), comma);
  $all: append($all, 3px 8px 5px rgba(0,0,0,.3));
  text-shadow: $all
  }
}

h1 {
  @include threedshadow(#fff, 5);
} 
```

您遇到了与我类似但不相同的[问题](https://stackoverflow.com/questions/12937503/multiple-values-for-one-property-with-variable-argument-lists-in-sass)，诀窍是将值保存在循环`text-shadow`外的变量中`@for`，然后`append()`使用`comma`.

您可能还想调整您在示例中留在循环之外的阴影，使其与`$depth`.

[演示](http://codepen.io/bookcasey/pen/aCDko)

# vim - 使用 neocomplcache 和 clang_complete？

> ID：12975098
> 
> 赞同：6
> 
> 时间：2012-10-19T13:16:51.337
> 
> 标签：vim, clang-complete, neocomplcache

我正在尝试让[clang_complete](https://github.com/Rip-Rip/clang_complete)和[neocomplcache](https://github.com/Shougo/neocomplcache)很好地配合。我的问题是，当我打开一个`cpp`、或文件时`c`，我从*neocomplcache*收到以下错误`objc``objcpp`

 *```
completefunc=ClangComplete^@^ILast set from ~/.vim/plugin/clang_complete.vim
Another plugin set completefunc! Disabled neocomplcache. 
```

clang_complete.vim 具有以下配置行：

```
au FileType c,cpp,objc,objcpp call <SID>ClangCompleteInit() 
```

我的问题是是否有办法让我不再收到此错误？有没有一种方法我可以使用`clang_complete`并且仍然可以访问让我们说`neocomplcache`片段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T22:16:43.397

这个配置解决了这个问题（在我的 Vimrc 中）

```
if !exists('g:neocomplcache_force_omni_patterns')
    let g:neocomplcache_force_omni_patterns = {}
endif
let g:neocomplcache_force_overwrite_completefunc = 1
let g:neocomplcache_force_omni_patterns.c =
            \ '[^.[:digit:] *\t]\%(\.\|->\)'
let g:neocomplcache_force_omni_patterns.cpp =
            \ '[^.[:digit:] *\t]\%(\.\|->\)\|\h\w*::'
let g:neocomplcache_force_omni_patterns.objc =
            \ '[^.[:digit:] *\t]\%(\.\|->\)\|\h\w*::'
let g:neocomplcache_force_omni_patterns.objcpp =
            \ '[^.[:digit:] *\t]\%(\.\|->\)\|\h\w*::'
let g:clang_complete_auto = 0
let g:clang_auto_select = 0
let g:clang_use_library = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:33:24.363

neocomplcache 和 clang_complete有一个兼容性[补丁](https://github.com/osyo-manga/neocomplcache-clang_complete)。*

# visual-c++ - g++ 与 VC++ 编译器标志等效的编译器标志

> ID：12975101
> 
> 赞同：0
> 
> 时间：2012-10-19T13:16:55.817
> 
> 标签：visual-c++, gcc, opencv, g++, mingw

我在 stasm 示例 make 文件之一中有以下几行。但看起来这些选项适用于 VC++。我想在 g++ ( mingw ) 编译器中编译相同的内容。那么g ++中与下面提到的编译器标志等效的等效标志是什么。

请给我任何链接或您的宝贵建议。谢谢..

> cl -nologo -O2 -W3 -MT -EHsc -DWIN32 stasm_opencv_example.cpp -I%OPENCV_HOME%\include\opencv %OPENCV_HOME%\lib\cv210.lib %OPENCV_HOME%\lib\cxcore210.lib %OPENCV_HOME%\lib\highgui210 .lib ..\data\stasm_dll.lib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:20:58.880

我不知道 MINGW，但我确实使用 -on Linux-（并为 GCC 做贡献）所以你可以试试

```
 g++ -O3 -Wall -DWIN32 -I$OPENCV_HOME/include/opencv \
    -L$OPENCV_HOME/lib -lcv210 -lcxcore201 -lhighgui20 ../data/stasm_dll.lib 
```

# wordpress - 在 wordpress 主题上使背景可点击

> ID：12975117
> 
> 赞同：1
> 
> 时间：2012-10-19T13:17:34.560
> 
> 标签：wordpress, background

我最近改变了我的 wordpress 主题。在我的旧主题上，我可以通过管理员使背景可点击，但在新主题中我不能。现在我知道了一些基本的 jibba jabba 编码，但是让背景可点击我仍然远离我的联盟。

（不确定我是否可以在此处发布指向我网站的链接，但这里是：[http](http://tijlvos.nl) ://tijlvos.nl ）。例如，我添加了一张我最喜欢的演员的照片。

# ejb-3.0 - 错误是使用 EJB 对象

> ID：12975120
> 
> 赞同：2
> 
> 时间：2012-10-19T13:17:43.343
> 
> 标签：ejb-3.0

我已经定义了一个 EJB 类 - GetTransactionDataForMercury。请在下面找到示例代码：

```
@Stateless
@TransactionAttribute(value = TransactionAttributeType.REQUIRES_NEW)
public class GetTransactionDataForMercury {

@EJB
private BusinessLocal business;

private Long historyId = null;

public GetTransactionDataForMercury(){
    super();
}

public void getHistoryForMercury() {
    try {
        historyId = getConfigHistoryId("QueryDslConfig");

    } catch (Exception exception) {
        notifier.error("Error Occured  -- > "+exception);
    }

}

public Long getConfigHistoryId(String requestType){
    notifier.info(" Processing QueryDslConfig " );
    Long historyId = null;
    BaseEntity entity = null;
    Long transactionStartTime = null;
    Long transactionEndTime = null;
    ConfigEntity configEntities[] = null;
    Query query = null;

    try{
        transactionStartTime = System.currentTimeMillis();
        notifier.info(" Going to Query  " );
        notifier.info("Business object created : " + business);
        List<BaseEntity> entities = business.query(new QueryFactory(requestType).create());
        notifier.info(" No. of entities fetched  " + entities.size());

        historyId = Long.parseLong(configEntities[0].getConfigId());
            notifier.info("History Id stored : " + historyId);

    }catch(Exception exception){
        transactionEndTime = System.currentTimeMillis();
        notifier.error("Error Occured  -- > "+exception.getMessage());
    }
    return historyId;
} 
```

BusinessLocal 是由 EJB 类 - BusinessSLSB 实现的 EJB 接口。我在以下行面临一个空错误：

```
notifier.info("Business object created : " + business); 
```

我需要知道为什么 EJB 对象为空？创建 EJB 类 - GetTransactionDataForMercury 有什么问题吗？

请建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:42.893

看起来您的 SLSB 没有实现任何 @Local 或 @Remote 接口。因此，它可能没有被 JBoss 正确初始化，也没有注入它的依赖项。

# c# - 通过脚本将 System.Drawing.Graphics 转换为 html5 画布方法#

> ID：12975124
> 
> 赞同：0
> 
> 时间：2012-10-19T13:17:51.097
> 
> 标签：c#, .net, drawing, system.drawing, script#

是否可以通过 Script#或其他 C# 到 JS 转换器将标准`System.Drawing.Graphics`方法（如`DrawImage``DrawPath``context.drawImage``context.beginPath(); ... context.closePath();`

编译后如何在不编辑 .js 文件的情况下自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:55:32.083

我遇到过同样的问题。

您在画布上绘制的方式与使用 System.Drawing.Graphics 的方式并不完全相同。一个解决方案是在 System.Drawing.Graphics 上创建一个抽象，如下所示：

```
public interface IDrawingContext{
   void Save();
   void Restore();
   void DrawLine(int x1, int y1, int x2, int y2, string color, int strokeWidth);
   void DrawText(int x, int y, string text, string color);
   object DrawRect(int x, int y, int width, int height, object fill, string strokeColor);
   object DrawPoly(List<Coordinate> points, object fill, string strokeColor, int strokeWidth);
   object DrawCircle(int x, int y, int radius, object fill, string strokeColor);
   object Transform(int translateX, int translateY, int rotate);
   .
   .
   .
   void Clear();
} 
```

在 script# 中创建一个实现此接口的类，并使用 script# System.Html.Media.Graphics 命名空间对画布进行本地调用。在 C# 项目中做同样的事情，但使用 System.Drawing.Graphics

接下来是重构现有的绘图代码以使用 IDrawingContext 而不是 System.Drawing.Graphics

# flv - 修复提前停止的 flv 文件

> ID：12975128
> 
> 赞同：5
> 
> 时间：2012-10-19T13:18:00.467
> 
> 标签：flv

我前段时间下载了一些flv视频，当观看它们时，它们会停在一个点上。如果我跳过那个点，他们会继续播放到另一个点，然后我可以再次跳过（循环一直持续到视频结束）

我已经试过了

`avconv -i input.flv -acodec copy -vcodec copy -g 1 output.flv`

~~据我阅读有关此问题的大量无用帖子的理解，我的元数据中没有任何关键帧，然后在出现错误帧时停止。~~

我尝试将 -g 设置得更高，但 output.flv 与原始文件第一次停止的位置相同。有没有什么工具可以解决这个问题。

我不记得原始链接的位置，重新下载不是一个选项，你可以看到我的重新编码尝试失败了。

~~我使用的是 Linux Ubuntu，所以我不能使用可用的 Windows 工具。~~

**编辑**

经过一番挣扎，我仍然无法修复文件。

我认为元数据是问题的假设是错误的。在尝试了一系列工具后，我发现它们中的大多数都以文件结尾（在文件中间）停止。

元数据就是它应该的样子。（我成功提取了它）。似乎流已损坏。我尝试重新混合，重新编码注入元数据，但他们都没有工作，他们产生的文件仍然停留在同一位置，或者只是流直到坏点。

我的问题与此处列出的完全相同：[链接](http://hardforum.com/showthread.php?t=1693374)

任何帮助将不胜感激。即使我必须用十六进制编辑器破解一些文件，我也会采取任何解决方案。（我尝试删除我认为不好的部分，但这导致它根本无法播放）

我现在有一台 Windows 机器可供使用，因此运行 Windows 实用程序不再是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:52:16.880

我修好了它。

不是我希望的解决方案，但我设法使用 avconv 将文件拆分为不同的位

```
avconv -ss "$TIME" -i "$IN" -vcodec copy -acodec copy "$OUT"."$PART".mkv 
```

将 ss 放在输入文件之前会导致它使用关键帧跳转到正确的位置，然后没有遇到损坏的位并崩溃。在每个损坏的位之后，我用新的 $TIME 重复上一步。

最后，我将所有位与 avconv concat 选项一起添加，现在它可以工作了。当到达先前的损坏位时，视频会向前跳跃一点，但这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-28T16:29:30.757

我有很多旧的 FLV 文件，ffmpeg 在启动后就停止了，我使用它使它正常工作

```
ffmpeg -flv_ignore_prevtag 1 -i file.flv -c ... 
```

查看[https://ffmpeg.org/ffmpeg-all.html#flv_002c-live_005fflv](https://ffmpeg.org/ffmpeg-all.html#flv_002c-live_005fflv)了解更多信息

# android - html5本地存储二进制pdf

> ID：12975129
> 
> 赞同：0
> 
> 时间：2012-10-19T13:18:01.723
> 
> 标签：android, html, pdf, cordova, local-storage

是否可以在 localStorage 上保存并重新打开 pdf 文件？我在 Android 项目上使用 Cordoba 2.1。我需要从 URL 下载 pdf 文件并将其存储在私人文件夹中，我的应用程序之外的用户无法访问。比我需要打开这些文件。如果我下载文件抛出 FileTransfer.download()，我不知道如何将文件保存在私人文件夹中。所以我想使用 JQuery.get() 函数将文件保存在 localStorage 上，而不是我不知道如何取回文件以使用我的意图函数打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:42:35.110

当您在 Android 上调用 FileTransfer.download() 时，您想要做的是为您的应用程序指定私有文件夹。它位于 /data/data/{package name}。其中 {package name} 是存储为AndroidManifest.xml 文件*清单*标记的*package*属性的字符串。

 */data/data/{package name} 目录位于您设备的内部存储中。每个 Android 应用程序都以自己的独立 UNIX 用户 ID 运行。您放在 /data/data/{package name} 目录中的任何内容都归该 UNIX 用户 ID 所有，从而保护它免受其他应用程序的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:27:43.147

坏消息，没有像“私人文件夹”这样的东西。

您可以访问存储在智能手机上的文件。如果您将文件存储在本地存储中，那么可能会起作用。可以从设备中读取本地存储，并且可以提取您的 PDF。

如果要确保没有人可以读取文件，则必须编写一个插件来加密文件。

**更新**：问题是，如果文件必须是安全的，或者只是难以阅读。*

# scala - 在scala中提取地图内容

> ID：12975132
> 
> 赞同：3
> 
> 时间：2012-10-19T13:18:03.873
> 
> 标签：scala, map

我得到了这张地图：`Map(term -> Buffer(hello), callback -> Buffer(jsonp1350647507240))`我想从中提取`hello`值`jsonp1350647507240`。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:23:16.213

您可以`Map`通过调用仅访问 a 的值`values`

从[文档](http://www.scala-lang.org/api/current/scala/collection/Map.html)：`def values: Iterable[B]`

我只能假设`hello`并且`jsonp135...0`应该是字符串，在这种情况下你可以只`mkString`在缓冲区上使用。

最终结果将是：

```
val myValues = myMap.values.map{ _.mkString } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:21:38.930

您可以遍历`(key, value)`元素上的地图和模式匹配：

```
map foreach {
  case (_, v) => println(v)
} 
```

如果你想根据你可以使用的值返回一些东西`map`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T13:24:01.373

该`Map.values`方法将返回`Iterable`您的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T14:38:42.793

假设`hello`and`jsonp....`是以下案例类中的字符串：

```
case class Buffer(name: String) 
```

你可以写：

```
val list = myMap.map {
  case (key, buff) => buff.name
} 
```

你有一个列表对象 =>`List(Hello, jsonp1350647507240)`你可以用它做任何你想做的事情。

# php - $_SESSION 不会在不同的页面上获取数据

> ID：12975133
> 
> 赞同：0
> 
> 时间：2012-10-19T13:18:05.670
> 
> 标签：php, session

`$_SESSION`出于某种原因，我无法使用-variable从一页到另一页获取一些日期。

在我`index.php`的页面上是用户可以登录的表单。
我从（文件`session_start()`中的位置`inc_admin.php`）开始：

```
require_once '../includes/php/inc_admin.php';

if ($_GET['page'] == 'login') {
    $action = loginUser($_DB, $_POST['firstname'], $_POST['password']);
}

if(isset($_SESSION["user"])) {
    $action .= header('Location: ../admin/index.php');
}

echo $action; 
```

-function`loginUser`确实设置（除其他外）`$_SESSION`：

```
$user = Leaders::getLogin($_DB, $firstname, $password);
if(!empty($user)) {
    $_SESSION["user"] = $user;
} 
```

并且应该如此，当用户提交带有正确数据的表单时，他将被重定向到`../admin/index.php`-page。但是，如果我采用`var_dump($_SESSION)`，页面会告诉我这个变量是`NULL`。

我还需要做些什么来确保数据通过使用的页面传输`$_SESSION`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:26:09.927

每个页面都需要开始

```
session_start(); 
```

它恢复先前创建的会话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:26:29.317

确保每次重新加载页面时都在某处调用 session_start() ，否则服务器将无法获取会话详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:29:03.560

调用“ **session_start()** ;” 在页面上的任何输出之前（甚至在发送任何 Header() 之前）。最好将其放在页面的最顶部。

# jquery - jquery 1.8.2 根据复选框状态启用/禁用提交按钮

> ID：12975135
> 
> 赞同：1
> 
> 时间：2012-10-19T13:18:06.077
> 
> 标签：jquery

我可以使用 jquery 1.6 来完成这项工作，但是我升级到 1.8 并且无法让它工作。这是jfiddle：[链接](http://jsfiddle.net/3aFaA/)

和代码：

HTML：

```
 <form id="ad_form" method="post" action="">
    <input type="checkbox" id="tosId" name="tos_name" style="padding:0; margin:0" ></input>       
    <br />
    <input type="submit" id="submitId" name="submit_name" value="Submit"  /></input>
 </form>​ 
```

jQuery：

```
 $('#submitId').attr('disabled', 'disabled');  

 function updateFormEnabled() 
     {
         if($('#tosId').prop('checked'))
         {
             $('#submitId').attr('disabled', '');
         } 
         else 
         {
             $('#submitId').attr('disabled', 'disabled');
         }
     }

 $('#tosId').change(updateFormEnabled);​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:23:28.430

`prop`在 jQuery 1.8中使用方法是个好主意：

```
function updateFormEnabled() 
{
    var checked = $('#tosId').prop('checked');
    $('#submitId').prop('disabled', !checked);
} 
```

小提琴：http: [//jsfiddle.net/3aFaA/3/](http://jsfiddle.net/3aFaA/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:28:45.367

您应该使用 .prop() 设置禁用属性

```
function updateFormEnabled(){         
    $('#submitId').prop('disabled', !$('#tosId').prop('checked'));        
 } 
```

来自 jQuery 文档[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:20:57.323

使用 removeAttr()

```
 if($('#tosId').prop('checked'))
     {
         $('#submitId').removeAttr('disabled');
     } 
     else 
     {
         $('#submitId').attr('disabled', 'disabled');
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:21:14.190

应该`$('#submitId').removeAttr('disabled');`

代替`$('#submitId').attr('disabled', '');`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T13:21:42.720

```
$('#submitId').attr('disabled', 'disabled');  

function updateFormEnabled() 
{
    if($('#tosId').prop('checked'))
    {
        $('#submitId').attr('disabled', false);
    } 
    else 
    {
        $('#submitId').attr('disabled', true);
    }
}

$('#tosId').change(updateFormEnabled);​ 
```

应该可以[工作](http://jsfiddle.net/3aFaA/7/%22jfiddle%22)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T13:26:08.567

```
$('#submitId').attr('disabled', 'disabled');  

function updateFormEnabled()
    {
        if($('#tosId').prop('checked'))
        {
            $('#submitId').attr('disabled', false);
        }
        else
        {
            $('#submitId').attr('disabled', true);
        }
    }

$('#tosId').change(updateFormEnabled); 
```

# php - 处理顺序错误的依赖元素

> ID：12975142
> 
> 赞同：0
> 
> 时间：2012-10-19T13:18:29.900
> 
> 标签：php

以下 PHP 示例代码仅适用于“bar”元素位于“foo”元素之前的情况。如果它们的顺序错误，我将收到“对非对象的成员函数的调用”错误。

```
$data = array();
foreach($elems as $e) {
  if($e['type'] == "foo") {
    $data[$e["key"]->foo_data($e["data_foo"]);
  }
  elseif($e['type'] == "bar") {
    $data[$e["key"]] = new Bar($e);
  }
} 
```

我目前的解决方案是迭代两次`$elems`. 另一种解决方案是使用`usort`自定义排序函数，将“bar”元素放在“foo”元素之前。

是否有任何编程模式或库可以让我以任意顺序处理元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:13:50.730

好的，这是一个使用代理模式的解决方案：

```
class BarProxy {
    private $callstack = array();
    public function __call($name, $arguments) {
        $this->callstack[] = array($name, $arguments);
    }

    public function createBar($params) {
        $bar = new Bar($params);
        foreach($this->callstack as $call) {
            call_user_func_array(array($bar, $call[0]), $call[1]);
        }
        return $bar;
    }
}

class BarData {
    private $data = array();

    public function getBar($id) {
        if(!isset($this->data[$id])) {
            $this->data[$id] = new BarProxy();
        }
    }

    public function createBar($id, $params) {
        if(!isset($this->data[$id])) {
            $this->data[$id] = new Bar($params);
        }
        elseif($this->data[$id] instanceof BarProxy) {
            $this->data[$id] = $this->data[$id]->createBar($params);
        }
    }

    // Other methods for getting the data, maybe implement Iterator or ArrayAccess 
}

$data = new BarData();
foreach($elems as $e) {
  if($e['type'] == "foo") {
    $data->getBar($e["key"])->foo_data($e["data_foo"]);
  }
  elseif($e['type'] == "bar") {
    $data->createBar($e["key"], $e);
  }
} 
```

**优点：**此代码避免在 for 循环中乱扔`if`语句。这些类将在它们自己的文件中，循环保持干净和易于理解。这两个类可以进一步抽象为代理和存储任意类。

**缺点：**这个解决方案是以函数调用和两个额外的类为代价的，因此性能和内存消耗可能比循环两次更糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:22:15.807

循环两次似乎是最明智的解决方案。循环一次以准备您的对象，第二次循环以让这些对象处理数据。可能有一个完全不同的、更好的解决方案，但是如果没有看到更具体的用例就很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:28:04.530

一种实用的方法是使用中间数据表示，该表示可以容忍出现乱序的东西，然后再次传递数据以完成它，例如：

```
foreach($elems as $e) {
  if($e['type'] == "foo") {
    $data[$e["key"]]["foo_data"] = $e["data_foo"];
  }
  elseif($e['type'] == "bar") {
    $data[$e["key"]]["bar"] = new Bar($e);
  }
}

foreach ($data as &$d) {
    $foo_data = $d["foo_data"];
    $d = $d["bar"];
    $d->foo_data($foo_data);
} 
```

一个类似的替代方法是逐步修复数据，这不需要另一个循环，但更糟糕的是，因为它将修复逻辑与您的实际数据提取逻辑相结合并违反 DRY：

```
foreach($elems as $e) {
  if($e['type'] == "foo") {
    if (isset($data[$e["key"]])) {
        $data[$e["key"]]->foo_data($e["data_foo"]); // normal operation
    }
    else {
        $data[$e["key"]] = $e["data_foo"]; // temporary result
    }

  }
  elseif($e['type'] == "bar") {
    if (isset($data[$e["key"]])) {  // incremental fix
      $bar = new Bar($e); 
      $bar->foo_data($data[$e["key"]]);
      $data[$e["key"]] = $bar;
    else {
      $data[$e["key"]]["bar"] = new Bar($e); // normal operation
    }
  }
} 
```

最后，您当然可以选择其他一些（设计良好的）方法来避免再次循环和编写“坏代码”，但是 PHP 并没有让这变得容易，您最终会编写大量代码以获得可疑的好处。

一般建议：保留一个临时数据表示，最后再循环一次。

# android - 如何在特定时间android之间安排后台服务

> ID：12975144
> 
> 赞同：1
> 
> 时间：2012-10-19T13:18:29.663
> 
> 标签：android, android-service, alarmmanager

我有一项定期跟踪用户位置的服务。我希望这项服务只在工作时间运行，所以我希望它在 9 点开始并在 18 点停止。

我正在`AlarmManager`使用此代码启动服务

```
 Intent syncIntent = new Intent(AlarmService.this, TrackingService.class);
        PendingIntent pendingIntent = PendingIntent.getService(AlarmService.this, 0, syncIntent, 0);

        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.HOUR_OF_DAY, 9);
        alarmManager.setRepeating(AlarmManager.RTC, System.currentTimeMillis(), 1000 * 60 * 60 * 24, pendingIntent); 
```

我应该怎么做才能安排警报在 18 小时停止服务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:27:30.723

注册 a`BroadcastReceiver`并`PendingIntent`使用`getReceiver()`. 在其对运行实例的`onReceive()`方法调用中。希望这可以帮助。`stopService()``Service`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:22:43.153

`set()`在您发布的代码中，您可以使用而不是设置单个警报`setRepeating()`。然后在您的广播接收器中，您可以检查收到警报的当前时间。如果是在营业时间（9 点到 6 点），那么您可以在接收器中设置另一个警报。如果不是在上午 9 点到下午 6 点之间，那么您将闹钟安排在明天上午 9 点。

# mysql - mysql计算缺席的总天数

> ID：12975145
> 
> 赞同：0
> 
> 时间：2012-10-19T13:18:32.250
> 
> 标签：mysql

如何计算用户在给定日期期间缺席的总天数？

这是我认为它如何工作的基本想法，但我无法让全部工作。

```
SELECT total(from - until) FROM absences WHERE absences.user_id = 123
AND absence_date_until <= '1999-12-01' AND absence_date_from >=
'2000-12-01'

CREATE TABLE IF NOT EXISTS `absences` (
  `absence_id` int(10) NOT NULL AUTO_INCREMENT,
  `absence_created` datetime DEFAULT NULL,
  `absence_date_from` datetime DEFAULT NULL,
  `absence_date_until` datetime DEFAULT NULL,
  `absence_status` enum('PENDING','APPROVED') NOT NULL,
  `user_id` int(6) NOT NULL,
  PRIMARY KEY (`absence_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:27:20.770

```
SELECT SUM(datediff(until, from) + 1) total_absences 
FROM   absences 
WHERE  absences.user_id = 123
       AND absence_date_until <= '1999-12-01' 
       AND absence_date_from  >= '2000-12-01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:25:32.157

在 mysql 中选择 datediff()

```
SELECT datediff(absence_date_from- absence_date_until) 
FROM absences WHERE absences.user_id = 123
AND absence_date_until <= '1999-12-01' 
AND absence_date_from >=  '2000-12-01' 
```

# node.js - iisnode挂起问题

> ID：12975149
> 
> 赞同：1
> 
> 时间：2012-10-19T13:18:52.687
> 
> 标签：node.js, iisnode

我目前正在使用节点 0.8 和 iisnode 0.1.21。

我在 iisnode 标记下的 web.config 中设置了 nodeProcessCountPerApplication="4" 。

我的应用程序以 4 个节点进程完美启动，但一段时间后挂起。它不会崩溃。

我观察到，一旦任何一个进程开始使用超过 200mb 的内存，就会发生这种情况。有谁知道这是内存问题还是其他问题？

此外，如果我关闭/结束任务管理器中的任何一个进程，每件事都会开始完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:45:27.527

在 IIS 外部自托管时，相同的应用程序是否正常工作？如果您最终阻止 node.exe 进程中的事件循环，则可能会发生此行为。每个进程使用 200MB 听起来让我觉得你在做一些不寻常的事情。

# .net - 使用组合框构造 WPF 拆分按钮

> ID：12975150
> 
> 赞同：0
> 
> 时间：2012-10-19T13:18:54.437
> 
> 标签：.net, wpf, combobox, split-button

我在网上看到了一些例子，但似乎都过于复杂。我只想有一个背景是按钮的自定义图像的组合框。不幸的是，我看不到为图像设置背景。

# java - SELECT ~~~ FOR UPDATE oracle SQL查询的正确iBatis方法？

> ID：12975153
> 
> 赞同：2
> 
> 时间：2012-10-19T13:18:59.023
> 
> 标签：java, oracle, jdbc, transactions, ibatis

我正在使用 jBoss5 + Struts + iBatis 开发基于 Web 的服务。

“SELECT ... FOR UPDATE” oracle 查询有没有合适的方法（我的意思是，选择涉及事务管理的 iBatis 方法）？

……

我的问题是这个。我的程序的某个部分导致表中某些行的 RX 锁定。

来源如下，

```
try{
    sqlMap.startTransaction();
    ...
    HashMap someMap = (HashMap)sqlMap.queryForObject("theSelectSQLusesForUpdate",someOtherMap);
    // usually hangs at the sentence above
    ...
    //inserts, updates, selects, ~~~
    ...
    sqlMap.commitTransaction();
} catch block {} finally {
    sqlMap.endTransaction();
} 
```

我发现“SELECT ... FOR UPDATE”语句被 Oracle 视为 DML。因此，我使用“FOR UPDATE”的 SQL 应该涉及某种事务管理，但 iBatis 不支持它，因为查询是在 ... 块中定义的。

再次我的问题，“SELECT ... FOR UPDATE”oracle查询是否有任何合适的方法（我的意思是，选择涉及事务管理的iBatis方法）？

如果有人给我答案，他或她就是我的救星。。

谢谢。

# c# - 获取 CS1518：预期的类、委托、枚举、接口或结构错误

> ID：12975155
> 
> 赞同：1
> 
> 时间：2012-10-19T13:19:06.480
> 
> 标签：c#, asp.net, mysql, class

我是 C# 的新手，我正在努力学习（我最近一直在问一些关于它的问题——我唯一的编程知识是 Python、PHP 和 Javascript）。无论如何，我在网上找到了一些关于如何在 C# 中生成选择列表的示例，我正在尝试使用/修改它们以适应我现有的代码。结果出现了预期的类错误 - 但我正在创建一个类！这是我的代码：

```
private void PeerReview()
{

            MySqlConnection connection;
            string connStringName = "server=localhost;database=hourtracking;uid=username;password=password";
            connection = new MySqlConnection(connStringName);

            cmd.CommandText = "select name from peer_review_info where active_status=1";
            cmd.Connection = connection;
            connection.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    ListItem item = new ListItem();
                    item.Text = sdr["peerrevid"].ToString();
                    item.Value = sdr["peerrevid"].ToString();
                    item.Selected = Convert.ToBoolean(sdr["IsSelected"]);
                    chkPeerRev.Items.Add(item);
                }
            }
           connection.Close();
        }
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        this.PeerReview();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:23:14.293

你有太多的右大括号。应该：

```
private void PeerReview()
{    
    MySqlConnection connection;
    string connStringName =
        "server=localhost;database=hourtracking;uid=username;password=password";
    connection = new MySqlConnection(connStringName);

    cmd.CommandText = "select name from peer_review_info where active_status=1";
    cmd.Connection = connection;
    connection.Open();
    using (SqlDataReader sdr = cmd.ExecuteReader())
    {
        while (sdr.Read())
        {
            ListItem item = new ListItem();
            item.Text = sdr["peerrevid"].ToString();
            item.Value = sdr["peerrevid"].ToString();
            item.Selected = Convert.ToBoolean(sdr["IsSelected"]);
            chkPeerRev.Items.Add(item);
        }
   }
   connection.Close();
} 
```

好吧，实际上它需要更多的改变；`connection`需要 a `using`，并且**非常**不清楚在哪里定义`cmd`，但这也需要 a`using`并且不应该共享（它应该在此方法范围内）。我将重写为：

```
private void PeerReview()
{    
    string connStringName = SomethingExternal.GetConnectionString();

    using(var connection = new MySqlConnection(connStringName))
    using(var cmd = connection.CreateCommand())
    {
        cmd.CommandText =
            "select name from peer_review_info where active_status=1";
        connection.Open();
        using (var sdr = cmd.ExecuteReader())
        {
            while (sdr.Read())
            {
                ListItem item = new ListItem();
                item.Text = sdr["peerrevid"].ToString();
                item.Value = sdr["peerrevid"].ToString();
                item.Selected = Convert.ToBoolean(sdr["IsSelected"]);
                chkPeerRev.Items.Add(item);
            }
       }
   }
} 
```

# xcode - 从 xcode 项目中获取 .cpp 文件列表

> ID：12975158
> 
> 赞同：0
> 
> 时间：2012-10-19T13:19:21.300
> 
> 标签：xcode, parsing, project

我正在从 xcode3 项目转换为 premake，我需要从我的 xcode3 项目中获取 .cpp 文件的列表。有什么办法吗？一些脚本或 xcode 项目文件解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:27:32.323

当然，请执行以下步骤：

> 1) 在 XCode3 中打开你的项目
> 
> 2) 单击 Cmd + Shift + C

现在您将看到一个类浏览器，其中包含所有项目类。你是这个意思吗？

# datepicker - 为 datepicker 假日数组添加标题

> ID：12975160
> 
> 赞同：3
> 
> 时间：2012-10-19T13:19:27.340
> 
> 标签：datepicker, android-datepicker, android-date

有没有办法向`titles`数组添加自定义，以便每个`holiday`都有自己的`title`而不是通用的`Date Unavailable`？

```
var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
var unavailableDates = ["2012/11/12","2012/11/22","2012/12/25","2013/01/01","2013/01/21","2013/02/18","2013/05/27","2013/04/04","2013/09/02","2013/10/14","2013/11/11","2013/11/28","2013/12/25"]; // yyyy/MM/dd 
var unavailableDays = ["Saturday","Sunday"];

function unavailable(date) {
ymd = date.getFullYear() + "/" + ("0"+(date.getMonth()+1)).slice(-2) + "/" + ("0"+date.getDate()).slice(-2);
day = new Date(ymd).getDay();
if ($.inArray(ymd, unavailableDates) < 0 && $.inArray(days[day], unavailableDays) < 0) {
   return [true, "enabled", "Select Date"];
 } else {
      return [false,"disabled","Date Unavailable"];
 }
}
$('#transfer-date').datepicker({beforeShowDay:unavailable, showOn: 'button', buttonImage: '../../images/icon-calendar.png', buttonImageOnly: true,}); 
```

# jquery - jQuery 仅通过远程验证

> ID：12975167
> 
> 赞同：1
> 
> 时间：2012-10-19T13:19:51.660
> 
> 标签：jquery

我的表单有 4 个字段，其中至少一个必须包含一个数字。我可以通过远程处理这一切，但我无法获得下面的代码片段来调用远程函数，除非我也将 a 添加`required: true`到规则中。`codes[25]`只是领域之一。

```
$("#create-codes-form").validate({
        rules: {
            'codes[25]': {
                remote: {
                    url: site_url+"codes/validate",
                    async: false,
                    type: "post",
                    data: {
                        codes: function() {
                            return $("#create-codes-form").serialize();
                        }
                    }
                }
            }
        }
    }); 
```

为什么，当我提交此表单时，没有进行远程调用？

编辑：如果我在代码[25] 字段中输入一个值，则会进行远程调用，但如果我提交表单而不触及任何字段，则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:21:54.967

这意味着 url 有任何问题冷你显示你正在返回

并像下面这样写数据不需要函数

```
 data: { codes:  $("#create-codes-form").serialize() } 
```

# spring - Spring Integration POST web 服务 url 映射

> ID：12975169
> 
> 赞同：1
> 
> 时间：2012-10-19T13:20:00.723
> 
> 标签：spring, spring-integration

我正在使用 Spring Integration 进行 POST REST WebService 调用我的出站网关定义如下：

```
<int-http:outbound-gateway
        url="url"
        http-method="POST" request-channel="reqChannel"
        reply-channel="replyChannel" expected-response-type="java.lang.String">
</int-http:outbound-gateway> 
```

我的问题是`url`. 我需要根据不同的条件有不同的网址。如何使`url`变量可从有效负载而不是硬编码进行配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:30:37.627

您可以使用带有表达式的 URI 变量来替换 URL 中的占位符...

```
<outbound-gateway id="foo"
        url="http://localhost/{foo}/{bar}"
     ...
                    >
    <uri-variable name="foo" expression="headers['foo']"/>
    <uri-variable name="bar" expression="payload.bar"/>
</outbound-gateway> 
```

# web-services - OAuth 2.0 多范围（客户端凭据案例）

> ID：12975176
> 
> 赞同：3
> 
> 时间：2012-10-19T13:20:31.813
> 
> 标签：web-services, api, oauth-2.0, soa, orchestration

在 OAuth 2.0 设置中，假设您有一个应用程序按照“客户端凭据授予”流程执行“访问令牌请求”。换句话说，我们有一个应用程序 A 访问其他应用程序公开的一些 API；根据 Oauth 2.0 的规定，在这种情况下，“应用程序 A”仅使用其客户端凭据，而不是用户的凭据。

现在，假设应用程序 A 想要访问从两个或多个应用程序公开的 API，假设应用程序 B 和 C（例如：应用程序 A 编排对 B 和 C 的 API 的访问以提供组合服务）。B 和 C 也在不同的域中，例如 b.com 和 c.com，但 A、B 和 C 共享一个公共 OAuth 授权服务器。

1.  A 是否可以请求在其范围内具有 b.com 和 c.com 域中的资源的单个访问令牌，以便 A 可以使用相同的令牌访问 B 和 C？

2.  你怎么能得到这个？

3.  如果这不可能，是否有管理类似案例的最佳实践？

请注意，我知道 OAuth 2.0 规范允许在请求或发出令牌时指定多个范围，但这里的重点是 B 和 C 位于不同的域中，例如 b.com 和 c.com。

谢谢和亲切的问候，

科拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:32:47.030

1.  是的，这当然是可能的。
2.  [从规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-7)：

> 资源服务器用于验证访问令牌（以及任何错误响应）的方法超出了本规范的范围，但通常涉及资源服务器和授权服务器之间的交互或协调。

所以这完全取决于你的实现和令牌的类型，你只需要确保访问令牌是由你的授权服务器颁发的并且仍然有效。拥有不同的域对此没有任何影响。

可能最广泛使用的做法是在您的资源服务器上进行数据库查找，以查看访问令牌是否存储在那里（因此有效）并将该表与您的授权服务器同步（或直接为 A、B 和C）。3\. 见 1\. ;)

# php - 为文件上传器上传的默认文件？

> ID：12975181
> 
> 赞同：2
> 
> 时间：2012-10-19T13:20:54.093
> 
> 标签：php, html

是否有可能欺骗 PHP 文件上传以从服务器中选择文本文档？

也许通过`value="link-to-file.txt"`在 HTML 公式中提供指向文件的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:09:59.597

有多个步骤来区分：

1.  浏览器将数据发送到网络服务器

2.  PHP 解释这些数据，将文件内容存储在一个临时文件中，并在 $_FILES 中创建一个条目

3.  您的脚本对 $_FILES 中收到的数组和临时文件中的内容执行某些操作

由于 PHP 及其相关的网络服务器通常被广泛使用，步骤 1 和 2 不应允许攻击者做坏事。最容易受到攻击的步骤是 3。这里的内容可以被攻击者操纵 - 如果您使用文件名来命名服务器上的目标文件，如果没有适当的过滤，这是很危险的。

# python - 为 cElementTree 指定换行符

> ID：12975182
> 
> 赞同：0
> 
> 时间：2012-10-19T13:20:55.700
> 
> 标签：python, xml, newline, celementtree

## 代码

我正在用 cElementTree 编写一个 xml 文件，如下所示：

```
cElementTree.ElementTree(xml_tree]).write(xmlPath, encoding="ISO-8859-1", xml_declaration=True) 
```

* * *

## 实际结果

这给出了以下文件（在 Windows 上）：

```
<?xml version='1.0' encoding='iso-8859-1'?><tag1 = "1"></tag1> 
```

所以缺少换行符。

我尝试“手动”添加适当的 Windows 换行符`\r\n`，现在我得到了：

```
<?xml version='1.0' encoding='iso-8859-1'?><tag1 = "1">
</tag1> 
```

* * *

## 期望的结果

但是，我希望在每一行之后都有正确的换行符，这样我的输出应该如下所示：

```
<?xml version='1.0' encoding='iso-8859-1'?>
<tag1 = "1">
</tag1> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:31:09.503

[`lxml`](http://lxml.de/)支持漂亮的打印，`cElementTree`不。

```
from lxml import etree
xml_str = "<parent><child>text</child><child>other text</child></parent>"
root = etree.fromstring(xml_str)
print etree.tostring(root, pretty_print=True) 
```

有关[XML 字符串的 Python 漂亮 XML 打印机](https://stackoverflow.com/questions/3973819/python-pretty-xml-printer-for-xml-string)和[Python 中漂亮的打印 XML，请参见 Python 漂亮的 XML 打印机](https://stackoverflow.com/questions/749796/pretty-printing-xml-in-python)

# html - 在另一个绝对块的背景中显示一个绝对块

> ID：12975187
> 
> 赞同：1
> 
> 时间：2012-10-19T13:21:04.887
> 
> 标签：html, css, properties, position, absolute

我想知道是否有办法将一个绝对块 B1 放在后台，以便另一个绝对块 B2 可以在 B1 的一部分的前景中。

例子 ：

B1占用10个像素：B1B1B1B1B1B1B1B1B1B1；

B1占用8个像素，B2占用2个像素：B1B1B1B1B2B2B1B1B1B1；

当然，在这种特殊情况下，还有其他简单的方法可以做到这一点。我的情况是，我真的会 B1 和 B2 是绝对的……那么，财产是否能够做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:16:45.383

```
.b1{position:absolute;
    z-index:1;}
.b2{position:absolute;
    z-index:2;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:22:29.727

试试 CSS 的“z-index”属性。

# java - 使用 SwingUtilities.invokeLater() 更新文本字段

> ID：12975197
> 
> 赞同：2
> 
> 时间：2012-10-19T13:21:32.300
> 
> 标签：java, multithreading, event-dispatch-thread, swingutilities

我的程序由一个简单的 gui 和一个扩展线程的类组成！

我正在尝试学习如何使用 SwingUtilities.invokeLater() 以使用它来更新我的 GUI 中的文本字段，但是如何在不制作静态的情况下到达我的 gui 中的文本字段？我是在正确的轨道上还是到目前为止我做错了什么:)？

**代码**

**这取自扩展线程的名为 Client 的类，这是我想使用 SwingUtilities.invokeLater(Runnable) 更新我的 GUI 的地方**

```
public void run(){
    while (socket.isConnected()) {

    if (input.hasNext()) {

        updateTextField();
    }

}
}

private void updateTextField() {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
  // here i want to update my textfield using txt.setText(input.nextLine());

        }
    });

} 
```

**更新（到目前为止，这是我的代码）获取空指针执行**

```
public void run(){
    while (socket.isConnected()) {
            String x = input.next();
            System.out.println(x);
    mg.updateChat(x); // this is the line that gives me the nullexeption

    }
} 
```

**在我的 GUI 中**

```
public void updateChat(final String input){
SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
    txtChat.setText(input); 
    }
}); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:27:36.487

您可以通过在包含对`invokeLater()`. 您可以从可运行对象中访问该变量。

例如：

```
public void run(){
  while (socket.isConnected()) {
    if (input.hasNext()) {
      String nextInput = input.next();
      myGui.updateTextField(nextInput);
    }
  }
} 
```

在您的 GUI 类中：

```
public void updateTextField(final String nextInput) {
  SwingUtilities.invokeLater(
    new Runnable(){
      @Override
      public void run() {
        // assuming a private JTextField variable, myTextField
        myTextField.setText(nextInput);
      }
    }
  );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:26:39.053

文本字段必须在`Client`类中声明为实例变量，或者如果它们在另一个类中声明，它们必须可以从`Client`类中访问。

你在使用的正确轨道上，只需更新里面的方法里面`SwingUtilities.invokeLater()`的文本字段。`run()``Runnable``invokeLater`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:52:16.213

关于你的 NPE：

```
public void run() {
  while (socket.isConnected()) {
    String x = input.next();
    System.out.println(x);
    mg.updateChat(x); // this is the line that gives me the nullexeption
  }
} 
```

这意味着`mg`必须为空，原因是您没有为该变量提供对 GUI 的有效引用。为了解决这个问题，您需要通过方法或构造函数参数传入对显示的 GUI 的引用。例如，如果通过构造函数，您可以执行以下操作：

```
public class MySocketConnector implements Runnable {
  private MainGui mg;

  public MySocketConnector(MainGui mg) {
    this.mg = mg;
  }

  @Override
  public void run() {
    while (socket.isConnected() {
      // ... etc...
    }
  }

  //...
} 
```

* * *

**编辑 1**
关于您的评论：

> 我将如何将 mg 更改为我当前的 gui？我目前通过以下代码对其进行集成：private MainGui mg；

这只是声明了变量，但没有初始化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:26:49.770

您可以做的一件事是`String`在您的类中有一个扩展`Thread`类的字段。并在内部`run()`方法将该字段设置为您在文本字段中想要的任何值。然后编写一个方法来返回您在内部设置的字符串`run()`并调用该方法来设置您的文本字段。

# c# - 从 asmx webservice 中提取结构数据

> ID：12975204
> 
> 赞同：1
> 
> 时间：2012-10-19T13:21:47.213
> 
> 标签：c#, asp.net, sql, web-services, asmx

我有以下 webservice 方法，当我在 localhost 的服务参考页面测试它时它工作正常，它返回带有数据的 Xml 文件。该方法返回两个数组的结构。我试图创建一个 C# 客户端，但我在提取数据时遇到了困难。这是我的代码。

```
 public struct GetWeatherItemDataStruct
   {
        //public DateTime[] TimeStamp;
        public double[] Value;
        public string[] TimeStamp;
   }

[WebMethod]
public GetWeatherItemDataStruct GetWeatherItemData(string parameterName,string fromTime,string toTime)
{
    GetWeatherItemDataStruct gwiDataStructObj = new GetWeatherItemDataStruct();
    SqlConnection conn  = null;
    SqlDataReader rdr   = null;
    int prameterID      = GetParameterID(parameterName);
    int tblSize         = GetTableSize(parameterName, fromTime, toTime, prameterID);
    double[] result     = new double[tblSize];
    int i = 0;
    string[] tStamp     = new string[tblSize];
    String source       = "Data Source=MASTER-PC\\SQLEXPRESS;Initial Catalog=WeatherDatabase;Integrated Security=True";
    try
    {
        using (conn = new SqlConnection(source))// create and open a connection object
        {                         
            // 1\. create a command object identifying
            // the stored procedure
            SqlCommand cmd  = new SqlCommand("GetWeatherItemData", conn);                
            // 2\. set the command object so it knows
            // to execute a stored procedure
            cmd.CommandType = CommandType.StoredProcedure;
            // 3\. add parameter to command, which
            // will be passed to the stored procedure
            //cmd.Parameters.Add(new SqlParameter("@WeatherParameterID", "1"));
            cmd.Parameters.Add("@WeatherParameter", SqlDbType.VarChar).Value    = parameterName;
            cmd.Parameters.Add("@FromTimeStamp", SqlDbType.VarChar).Value       = fromTime;
            cmd.Parameters.Add("@ToTimeStamp", SqlDbType.VarChar).Value         = toTime;
            conn.Open();
            // execute the command
            rdr = cmd.ExecuteReader();
            while (rdr.Read())
            {
                result[i]   =   (double)rdr["MeasurementValue"];
                tStamp[i]   =   rdr["Recieved"].ToString();
                i++;                   
            }
            gwiDataStructObj.Value      = result;
            gwiDataStructObj.TimeStamp  = tStamp;
        }
    }
    catch (SqlException e)
    {
        //Log exception
        //Display Error message
    }
    return gwiDataStructObj;
} 
```

我如何从这种方法中读取？。我不太确定如何创建客户端，到目前为止我写的是这样的：

```
 var client = new WebServiceSample.WebService1SoapClient();
        string paramName = "Windsensor";
        string dtFrom="2012-10-04 19:05:57:190";
        string dtTo="2012-10-05 21:50:05:197";
        int paramID = 0;
        double[] paramValue;
        double[] paramValue;
        double[] tStamp;
        double i;

        paramValue = client.GetWeatherItemData(paramName, dtFrom, dtTo).Value;
        tStamp =client.GetWeatherItemData(paramName, dtFrom, dtTo).TimeStamp; 
```

我的问题是这两行：

```
paramValue = client.GetWeatherItemData(paramName, dtFrom, dtTo).Value;
tStamp =client.GetWeatherItemData(paramName, dtFrom, dtTo).TimeStamp; 
```

我收到错误消息：无法将 SoapWebServiceClient.WebServiceSample.ArrayOfDouble 隐式转换为 double[]

并且不能将 SoapWebServiceClient.WebServiceSample.ArrayOfString 隐式转换为 string[]

# crystal-reports - 为什么 SAP 水晶报表只有第一次加载很慢？

> ID：12975206
> 
> 赞同：4
> 
> 时间：2012-10-19T13:21:51.393
> 
> 标签：crystal-reports

谁能知道为什么 SAP Crystal Report 加载速度非常慢，即使是第一次使用简单的报告，然后在它快速加载之后，以及克服它的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:23:59.900

如果您使用 .net 平台显示水晶报表，第一次加载表单时会很慢，因为 JIT 编译器生成机器代码需要时间。

我们最终在主程序启动时运行了一个报告，以便后续报告更快。

1.  报告以最小化方式打开，因此您看不到它。
2.  检查了一个标志，以便在加载报告后立即从 .net 关闭它。
3.  这是一份报告，上面只有一点文字。没有连接到服务器或任何东西

[更深入地解释 JIT 编译会发生什么](http://osdir.com/ml/windows.devel.dotnet.winforms/2004-10/msg00208.html)

[SO回答关于JIT编译何时发生](https://stackoverflow.com/questions/12398760/jitted-machine-instructions-at-program-restart)

# android - 在所有设备上将图像放置在同一位置的最佳方法？

> ID：12975209
> 
> 赞同：7
> 
> 时间：2012-10-19T13:22:03.577
> 
> 标签：android, android-layout, dpi

我意识到我不是 100% 确定放置某些 UI 元素的最佳方式是什么，以便它出现在所有设备上的同一位置。

到目前为止，这些是选项：

1.  `dp`为每个设备设置填充
2.  在此图像上方制作`View`并更改每个设备的填充
3.  在代码中计算屏幕大小，`Java code`并以泛型方式设置其定位。例如，将图像设置为距顶部 1/5 屏幕高度，并根据当前设备的屏幕高度应用此公式。
4.  `dp`与第 2 点类似，但我没有使用 fixed ，而是使用了有`layout_weight`问题的元素

什么似乎是最好的方法？

有没有我在这里没有提到的更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:31:59.770

两个最佳选择如下：

1.  在代码中 - 计算屏幕大小并使用屏幕百分比。
2.  用于`layout_weight`您的视图和`weight_sum`父视图。

代码方法的一个小例子 - 假设您希望 View 正好是屏幕宽度的 25%：

```
 WindowManager manager = (WindowManager) _context.getSystemService(Activity.WINDOW_SERVICE);
 int screenWidth = manager.getDefaultDisplay().getWidth();
 YOUR_VIEW.getLayoutParams().width = (int) (screenWidth * 0.25); 
```

# html - Css 选择器仅适用于没有它的元素 tags IE8 I would like to color (i.e. highlight as erroneous) a select element, but not its option tags. In FF I achieve this by applying a style to the select element and applying another style to the option tags. Here ar

> ID：12975210
> 
> 赞同：3
> 
> 时间：2012-10-19T13:22:13.360
> 
> 标签：html, css, firefox, internet-explorer-8, css-selectors

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:12:00.623

我花了一些时间进行实验，我想出了这个：

```
$('.highlight').on('click', 'option', function() {

    $(this).css('background-color', 'tomato').siblings().css('background-color', 'white');

}); 
```

`<option>`基本上，您使用 javascript将背景颜色强制到选定的对象上。我看到的唯一工件是选定`<option>`的对象在列表中也将具有红色。我会更喜欢全 CSS 解决方案，但这适用于 IE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:56:19.037

试试这个：

```
.highlight option, .highlight:focus option {
    background: #dfdfdf;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:03:44.463

如果您将不同的类应用于选项，则可以工作（ish），像这样......

```
<html>
<body>
    <select class="highlight">
        <option>Please select...</option>
        <option class="nohighlight">One</option>
        <option class="nohighlight">Two</option>
        <option class="nohighlight">Three</option>
    </select>
</body>
</html> 
```

[http://jsfiddle.net/vXFZe](http://jsfiddle.net/vXFZe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:28:59.807

不幸的是，我找不到解决这个问题的解决方案（不使用 javascript）。客户端按原样接受选择框。

# resources - LoadRunner如何监控被测系统的resourcec？

> ID：12975213
> 
> 赞同：1
> 
> 时间：2012-10-19T13:22:17.353
> 
> 标签：resources, monitoring, loadrunner

我读过 LR 使用本机监视器（perfmon），但它如何在不在测试系统上设置任何内容的情况下访问它？编辑：我刚刚读到您将监视设置为负载生成器机器，这让我更加困惑。如果我激活对负载生成器的监控，我如何测量被测服务器的 CPU 使用率（例如）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:00:10.697

请阅读您的 LoadRunner 版本随附的监控指南。LoadRunner 8 之后的所有版本都包含 SiteScope 的副本，默认许可证为 500 点。惠普授权培训合作伙伴教授的控制器和 SiteScope 课程也涵盖了有关监控的信息。

LoadRunner 连接到 SiteScope。SiteScope 使用 Perfmon 远程过程调用接口调用 Windows 服务器以获取任何 PerfMon 统计信息。在 UNIX/LINUX 前端，SiteScope 使用 SSH 或 Telnet 登录主机并运行本机操作系统实用程序来收集指标。此外，SiteScope 还可以使用 SNMP 来询问 Windows 和 UNIX/LINUX 主机，以及任何支持 SNMP 的主机，包括路由器、交换机、中型和大型计算机。您还可以查询本地服务，例如 Apache、ORACLE、DB2，以获取平台特定的统计信息。

如果您选择不使用 SiteScope，则 LoadRunner 支持本机 Perfmon 接口、本机 SNMP 接口、本机 RSTATD 接口、本机 ORACLE 接口、本机 APACHE 等...您可以在监控部分查看所有本机监视器的控制器。SiteScope 是未来的监控基础。

# android - 如何在 Eclipse 中正确关闭 android AVD？

> ID：12975214
> 
> 赞同：2
> 
> 时间：2012-10-19T13:22:22.237
> 
> 标签：android

有时我可以从快照启动 AVD，但有时不能。当它不从快照启动时，我必须使用“擦除用户数据”选项启动 AVD。启动新的 AVD 大约需要 5 分钟。我认为无法从快照启动 AVD 是因为我没有正确关闭它。那么有没有办法呢？

* * *

仍然找不到解决此快照问题的方法“模拟器：错误：无法从快照加载 VM。快照已为不同的硬件配置保存。” 正如 Cd 所说，尝试了 adb kill-server 和 adb start-server 但不起作用。但是通过“擦除用户数据”重新启动需要太长时间。哼！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:36:18.660

有时 adb 会感到困惑，只需使用`adb kill-server`和`adb start-server`命令重新启动它。然后使用`adb devices`命令检查 AVD 是否可见。

如果 android 工具尚未添加到您的路径变量中，您将需要转到 android SDK 文件夹并从 platform-tools 目录运行命令。

# image - 在多个图像循环上计算 glcm

> ID：12975216
> 
> 赞同：1
> 
> 时间：2012-10-19T13:22:45.870
> 
> 标签：image, loops, stack, glcm

我想计算一堆图像的 GLCM 灰度共现矩阵和其他纹理属性。我想写一个循环使它更容易，这可能吗？我已经尝试过，但似乎我的文件名 ie`TopSlice0641...`引起了问题。我已经尝试了以下代码，但它不起作用。：

```
for Topi = 0641:10:1243
  varName = ['Top' int2str(Topi)];  %# Create the name string
  eval(['glcm_' varName ' = graycomatrix(' varName ','Offset',[0 1;-1 1;-1 0;-1 -1]);']);
end 
```

# php - 正则表达式匹配价格字符串

> ID：12975226
> 
> 赞同：2
> 
> 时间：2012-10-19T13:23:26.837
> 
> 标签：php, regex, string

我是 PHP 新手。我试图检查其中一个表单输入（包含在`$price`此示例中）是否为小数，如下所示：

```
if(!preg_match("\\d+(.\\d{1,2})?", $price))
    //do something 
```

在 Java 中，它本来是

```
price.matches("\\d+(.\\d{1,2})?") 
```

但是相同的正则表达式在 PHP 中不起作用。是否`preg_match`也匹配子字符串？

我希望以下输入为真：

```
300
300.5
300.56 
```

所有其他格式都应该是错误的。我无法弄清楚如何在 PHP 中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:26:05.897

我不明白这怎么可能在 Java 中起作用。第一个数字只匹配一个数字。您的示例匹配多个数字。

试试这个正则表达式：

```
/\d+(?:\.\d{1,2})?/ 
```

请注意我如何将正则表达式放入“包装器”（`/`）中，并注意我如何`\`在数字匹配项前删除您的转义。此外，我将小数点周围的捕获组替换为非捕获组，因为在您的上下文中，它看起来不像您需要它。

PHP代码：

```
if (!preg_match("/\d+(?:\.\d{1,2})?/",$price)) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:30:43.450

我会说

```
\d(\.\d{1,2})? 
```

据我记得，一个点也需要转义

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:25:12.283

```
(!preg_match("/\d(\.\d{1,2})?/",$price)) 
```

记住开始和结束 / 的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:55:36.253

**让我们这样做**：

```
is_string($price) and trim($price); // Might be worth doing first
if(preg_match('~^\\d+(?:\\.\\d{1,2})?$~', $price)) {
   $price = floatval($price); // Kewl, keep going
}else{
   // Unkewl, fail
} 
```

1.  **将 RegExp 包装在 ~ 字符中**。任何非保留字符都可以用作包装器，并且 / 在处理 URL 或 HTML 时非常糟糕，因为您也需要对其进行转义。这是一场噩梦。
2.  通过将字符串**包含在 ^ 和 $ 中**来强制字符串**完全匹配**，而不是像这里的所有这些变体那样**包含匹配。**
*****   **如果您没有需要在其中扩展的**PHP "{$variables}" ，请将****字符串用单引号括起来。*******   **转义 \ 即使在这样的单引号**字符串中 \d 或 \.!*   **不要捕获块**，无论如何都没关系，但它是一个性能问题。******

 ****:) 咆哮完成！****

# django - 使用 Django 从 Amazon S3 下载文件

> ID：12975228
> 
> 赞同：10
> 
> 时间：2012-10-19T13:23:44.483
> 
> 标签：django, amazon-s3

我有一个 Django 应用程序，它允许用户下载他们购买的 MP3 文件，这些 MP3 文件托管在 Amazon S3 中。当用户单击“下载”按钮而不允许他们查看原始链接（到亚马逊）时，我如何强制下载？我有一个下载文件的视图，但文件已损坏。这是它的样子：

```
def download(request):
    filename = 'https://s3-eu-west-1.amazonaws.com/skempi/Ihsahn/04-emancipation-qtxmp3.mp3'
    response = HttpResponse(mimetype='application/force-download')
    response['Content-Disposition']='attachment;filename="%s"'%filename
    response["X-Sendfile"] = filename
    return response 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T15:03:57.010

如果您不希望文件可下载，请将 ACL 设置为私有（只能通过您的帐户访问）。如果您向他们提供签名 URL，您的用户仍然可以下载文件。签署 URL 时，会生成具有过期时间的令牌。您可以将其设置为合理的 10 分钟。使用[Python 的 Amazon Web Services 接口 - Boto](http://docs.pythonboto.org/en/latest/)。

```
import boto
conn = boto.connect_s3('<aws access key>', '<aws secret key>')
bucket = conn.get_bucket('your_bucket')
s3_file_path = bucket.get_key('path/to/file')
url = s3_file_path.generate_url(expires_in=600) # expiry time is in seconds

return HttpResponseRedirect(url) 
```

请注意，这是安全的，因为令牌仅对一种请求方法（默认为 GET）且仅对一个文件有效。因此，没有人重复使用令牌的风险，例如下载其他文件或操纵给定的文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-06T06:07:03.807

我无法轻易找到任何指定如何执行此操作的地方，并在我搜索时一次又一次地回到这个问题。所以

对于使用 boto 后端的 django-storages，执行此操作的方法类似于

```
filepath = settings.MEDIA_DIRECTORY + file.name
response_headers = {
    'response-content-type': 'application/force-download',
    'response-content-disposition':'attachment;filename="%s"'%file.name
    }
url = s3.generate_url(60, 'GET',
                bucket=settings.AWS_STORAGE_BUCKET_NAME,
                key=filepath,
                response_headers=response_headers,
                force_http=True)
return http.HttpResponseRedirect(url) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-27T04:30:59.410

上面的答案已经过时，因为它们使用 boto 而不是 boto3。这是使用 boto3 完成的方式：

```
import boto3

client = boto3.client('s3', aws_access_key_id = config('AWS_ACCESS_KEY_ID'), /
aws_secret_access_key = config('AWS_SECRET_ACCESS_KEY'))
bucket_name = config('AWS_STORAGE_BUCKET_NAME')
file_name = settings.AWS_MEDIA_LOCATION + '/' + 'file-name'

url = client.generate_presigned_url(
                                    'get_object', 
                                    Params = { 
                                                'Bucket': bucket_name, 
                                                'Key': file_name, }, 
                                    ExpiresIn = 600, )
return HttpResponseRedirect(url) 
```

# javascript - 在 currentTarget 上选择元素

> ID：12975229
> 
> 赞同：0
> 
> 时间：2012-10-19T13:23:45.010
> 
> 标签：javascript

我知道这很容易，但我想不通！

```
<ul class="footer_nav">
    <span class='footer_header'>01</span>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
</ul>

<ul class="footer_nav">
    <span class='footer_header'>01</span>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
</ul> 
```

我有上面的HTML。我想做的是当悬停事件发生时，`li.a`我更改了 .span 的 CSS 值，但仅在 currentTarget 中。

我在用

```
e.currentTarget 
```

但是使用这个你如何选择当前`UL`可以更新但仅在当前`UL`并非所有跨度中的另一个元素

```
Here is my current coffeescript...

  $('ul.footer_nav').hover (e) ->
    changeFooterHover(e)

##functions
  changeFooterHover = (e) ->
    span = e.currentTarget.parentNode.getElementsByTagName('span')
    span.toggleClass("selected"); 
```

有错误

```
Uncaught TypeError: Object #<NodeList> has no method 'toggleClass' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:28:03.390

如果您使用的是 jQuery，那么您可以这样做：

```
$("ul li a").mouseenter(function(e){
    var anchorElt = $(this);
    anchorElt.parent().parent().find("span").text(anchorElt.text());
}); 
```

这当然是如果您的 html 中有多个 ul 元素，如果没有，那么您可以从 ul 元素中找到跨度并更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:27:37.757

你可以找到跨度：

```
var elem = document.getElementsByClassName('footer_header')[0]; 
```

...或使用 jQuery：

```
var elem = $(this).closest('ul').find('.footer_header'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:28:14.763

你需要这个：

这将帮助您停止外部元素上的冒泡事件。

**[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T13:33:24.933

您可以使用*.closest()*函数来获取您想要的 UL 元素。

```
 $( 'li a' ).hover( function() {
        $( this ).closest( 'ul' ).find( 'span' ).html( 'over' );
    },
    function() {
        $( this ).closest( 'ul' ).find( 'span' ).html( 'out' );
    }); 
```

像上面这样的东西可能会帮助你走上正轨。

# c++ - g++ 错误：pthread_create() 和指向成员函数的指针

> ID：12975232
> 
> 赞同：2
> 
> 时间：2012-10-19T13:23:51.660
> 
> 标签：c++, pthreads, iso

> **可能重复：**
> [类中的 pthread 函数](https://stackoverflow.com/questions/1151582/pthread-function-from-a-class)

我正在尝试使用启动例程创建一个线程，但 g++ 不喜欢我的语法。

```
class myClass
{
  void* myFunction(void* myArg)
  {
    // some code, useless here
  }

  void start()
  {
    pthread_t thread_id;
    int* fd;

    //Some code, useless here.

    pthread_create(&thread_id, 0, &myFunction, (void*) fd);
  }
} 
```

在编译器期间，g++ 告诉我`ISO C++ forbids taking the address of an unqualified or parenthesized non-static member function to form a pointer to member function. Say '&myFunction'`.

它不能转换`void (myClass::*) (void*)`为`void* (*) (void*)`的参数 3 `pthread_create`。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:26:43.047

您需要将 myFunction 声明为 static 才能将其视为常规函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:27:17.900

您不能将常规函数成员用作线程例程。原因是这样的函数成员需要调用上下文 -对胆量`this`不可用的对象指针。`pthread`

使这样的功能成员`static`或只是自由功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:29:41.673

您不能将指针传递给非静态方法。您可能想要使用代理函数，将指向您的实例的指针作为参数传递给 pthread_create 并从那里进行 myFunction 调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:34:05.900

正如编译器所说，您必须在 pthread 中使用静态函数，这样的事情应该可以工作：

```
class myClass
{
  static void startThread(void* context)
  {
    ((myClass*)context)->myFunction()
  }

  void myFunction()
  {
    // some code, useless here
  }

  void start()
  {
    pthread_t thread_id;

    //Some code, useless here.

    pthread_create(&thread_id, 0, &startThread, this);
  }
} 
```

您还可以使用结构作为上下文，如果需要，您可以在其中传递此参数和其他参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T13:36:53.013

您可以将函数设为静态，也可以使用一些变通方法从类中调用该函数。

```
void *callMyFunction(void *f)
{
  reinterpret_cast<myClass*>(f)->myFunction();
  return (NULL);
}

class myClass
{
  void* myFunction()
  {
    // some code, useless here
  }

  void start()
  {
    pthread_t thread_id;
    int* fd;

    //Some code, useless here.

    pthread_create(&thread_id, 0, &callMyFunction, (void*) this);
  }
} 
```

如果要将参数传递给`myClass::myFunction`，则需要创建一个像这样的小结构

```
struct s_param
{
  void  *ptr;
  int   param1;
  char  param2;
  /* other variables */
}; 
```

`callMyFunction`会成为

```
void *callMyFunction(void *bundle)
    {
      reinterpret_cast<myClass*>(bundle->ptr)->myFunction(bundle->param1, bundle->param2/*, ...*/);
      return (NULL);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T15:10:11.273

正如您的编译器所指定的`pthread_create`期望 a`void* (*)(void*)`但您提供的函数具有非常相似但不同的语法：

没有的类的每个函数`static`都有一个名为`this`type的隐藏参数`class*`，所以现在你的函数`void* (*)( class*, void* )`与预期的不匹配`pthread_create`。您应该提供具有相同架构的功能。

此外，如果您的`void* someFunction()`类中有类似的函数，它可能与预期的函数匹配`pthread_create`，当然编译器不允许这样做，这也是有原因的。原因是调用约定，即参数如何传递给函数，C++ 编译器允许传入`this`寄存器！所以它不会与预期的功能匹配`pthread_create`。这可以通过一些允许您选择函数的调用约定的编译器来解决，但这不是标准的，因此最好的方法是将代理函数编写为：

```
static void* my_thread_routine_proxy(void* param) {
    static_cast<my_class*>(param)->my_thread_routine();
} 
```

但是如果您需要传递更多参数，您应该为其创建一个结构并在该结构中传递您的参数，但不要记住传递的结构必须保持有效，直到您的函数实际作为新线程调用。所以它应该是一个全局或动态分配的对象

# android - 类似于 JTable 的 android 网格

> ID：12975237
> 
> 赞同：0
> 
> 时间：2012-10-19T13:24:05.793
> 
> 标签：android

我是构建我的第一个应用程序的 android 新手。我的问题是是否有像 JTable（来自 Java）或来自 C# 的 dataGrid 视图这样的小部件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:27:45.777

根据大约一年前的这篇文章，没有。你可能不得不自己动手。

[Android替代jtable？](https://stackoverflow.com/questions/7667646/android-alternative-to-jtable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:27:46.837

我不知道 JTable 是什么，但你`GridView`在 Android 中有。

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

# visualization - 出色的 RDF 可视化工具

> ID：12975239
> 
> 赞同：45
> 
> 时间：2012-10-19T13:24:23.017
> 
> 标签：visualization, rdf, semantic-web, linked-data

我想找到一些很棒的工具或样式来可视化我的 RDF 数据，以便在查看者访问 RDF 数据时能够给他们带来震撼。

问题是我现在得到的可视化工具只能生成一些简单的样式（节点、边缘...），如下所示：

![图表样本](../Images/b9c5f05c214e970d02d6f7cb90f985db.png)

它们看起来很丑，因为边占用太多空间，节点太小。我不认为这种图表能给观众带来与直接查看表格或表格不同的体验。

我想知道是否有任何新的可视化工具或样式可以为用户提供真正不同的体验，以便他们感受到链接数据的价值……

有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-27T13:31:36.687

到目前为止，我遇到的最好的 RDF 链接开放数据可视化工具是 LodLive： [http ://en.lodlive.it/](http://en.lodlive.it/)

它知道许多 SPARQL 端点，包括 DBpedia。

我之前实现了一个基于 Web 的 RDF 创作工具，该工具与它挂钩：[https](https://github.com/robstewart57/discover-me-semantically) ://github.com/robstewart57/discover-me-semantically 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:59:52.140

我正在寻找几乎相同的东西。大量的谷歌搜索和阅读博士文章，让我想到了一些可能性。

*   [Javascript InfoVis 工具包](http://philogb.github.com/jit/)
*   [前置](http://prefuse.org/)

肯定会对其他人可能发现或正在使用的任何东西感兴趣。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T10:59:22.793

我正在寻找同样的东西。经过数小时的搜索，我所能找到的只是普通的圆圈和由暗线连接的节点。然而，我发现了这个工具，它在显示 RDF 信息方面似乎相当先进。我还没有深入研究它，但它看起来很有希望：

[http://cytoscape.org/](http://cytoscape.org/)

# facebook-c#-sdk - FB C# SDK GetTaskASYNC

> ID：12975243
> 
> 赞同：0
> 
> 时间：2012-10-19T13:24:29.960
> 
> 标签：facebook-c#-sdk

有没有人有任何用于 client.GetTaskAsync 的 FB C#SDK 示例？

任何指向该示例的指针都会很棒。

毗湿奴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T03:41:25.537

结帐[https://github.com/facebook-csharp-sdk/facebook-windows8-sample](https://github.com/facebook-csharp-sdk/facebook-windows8-sample)

```
private async void GraphApiAsyncDynamicExample()
{
    try
    {
        var fb = new FacebookClient("access_token");
        dynamic result = await fb.GetTaskAsync("me");

        // You can either access it this way, using the .
        dynamic id = result.id;
        dynamic name = result.name;

        // if dynamic you don't need to cast explicitly.
        ProfileName.Text = "Hi " + name;

        // or using the indexer
        dynamic firstName = result["first_name"];
        dynamic lastName = result["last_name"];

        // checking if property exist
        var localeExists = result.ContainsKey("locale");

        // you can also cast it to IDictionary<string,object> and then check
        var dictionary = (IDictionary<string, object>)result;
        localeExists = dictionary.ContainsKey("locale");
    }
    catch (FacebookApiException ex)
    {
        // handle error
    }
} 
```

# c# - 未引发异常

> ID：12975245
> 
> 赞同：2
> 
> 时间：2012-10-19T13:24:32.887
> 
> 标签：c#, sql-server, raiseerror

我有一个包含以下代码的存储过程：

```
IF @somevar IS NULL
BEGIN
RAISERROR (N'Station %d does not exist.', -- Message text.
       10, -- Severity,
       7, -- State,
       @id); 
END 
```

我想在 C# 代码中捕获 SqlException。但是没有提出这个例外。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:30:50.830

我会尝试查看您使用的严重性。 [http://msdn.microsoft.com/en-us/library/ms178592.aspx](http://msdn.microsoft.com/en-us/library/ms178592.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:38:11.627

试试这个： - 我一直使用 16

```
 RAISERROR ('Message here', 16, 1) 
```

[**[这里的详细信息]**](http://msdn.microsoft.com/en-us/library/ms164086.aspx)

> **0-9**返回状态信息或报告不严重错误的信息性消息。数据库引擎不会引发严重性为 0 到 9 的系统错误。
> 
> **10**返回状态信息或报告不严重错误的信息性消息。出于兼容性原因，数据库引擎在将错误信息返回给调用应用程序之前将严重性 10 转换为严重性 0。
> 
> **11-16**表示用户可以纠正的错误。
> 
> **20-24**表示系统问题并且是致命错误，这意味着正在执行语句或批处理的数据库引擎任务不再运行。该任务记录有关发生的事情的信息，然后终止。在大多数情况下，与数据库引擎实例的应用程序连接也可能终止。如果发生这种情况，根据问题，应用程序可能无法重新连接。此范围内的错误消息会影响访问同一数据库中数据的所有进程，并可能表明数据库或对象已损坏。严重级别为 19 到 24 的错误消息将写入错误日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:30:42.687

我相信您需要更高的严重性级别；以至少 11 的严重性尝试它。另外，您是否使用 ExecuteScalar - 它似乎吃异常？见[这里](https://stackoverflow.com/questions/1010383/sql-server-raiserror-not-causing-exception-in-net-client)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:28:54.090

你可以试试`THROW instruction`

链接：http: [//msdn.microsoft.com/fr-fr/library/ee677615.aspx](http://msdn.microsoft.com/fr-fr/library/ee677615.aspx)

# c# - DataGridView（部分）数据绑定自定义排序

> ID：12975247
> 
> 赞同：0
> 
> 时间：2012-10-19T13:24:37.087
> 
> 标签：c#, sorting, datagridview

我有一个数据网格，我必须混合填充

*   使用代码动态创建的列
*   动态创建的列从查询中检索数据（动态，自然）

数据表；

```
using (SqlDataReader dr = cmd.ExecuteReader())
{
    table.Load(dr);

    // Insert row number column
    DataGridViewTextBoxColumn rowColumn = new DataGridViewTextBoxColumn()
    {
        HeaderText = "Row",
        Width = 40,
        ReadOnly = true,
        Frozen = true
    };
    dgv.Columns.Insert(0, rowColumn);

    // Insert grouping column
    DataGridViewComboBoxColumn groupColumn = new DataGridViewComboBoxColumn()
    {
        HeaderText = "Grouping",
        Width = 70,
        DisplayStyle = DataGridViewComboBoxDisplayStyle.ComboBox,
        FlatStyle = System.Windows.Forms.FlatStyle.Flat,
        Frozen = true
    };
    groupColumn.Items.AddRange(new object[] { "-", "Group 1", "Group 2"});
    dgv.Columns.Insert(1, groupColumn);

    // Populate row & grouping columns
    .................

    dgv.DataSource = table;
} 
```

DataGridView 充满了所需的数据，用户可以更改他想要的一切。
最后我需要根据列编辑值的修改内容（创建的和数据绑定的）对行进行排序：我该怎么做？

数据绑定数据网格视图不能使用 Sort() 进行排序，也不能使用 DataTable 的 Sort 方法（或者我可以放在中间的 DataView），因为我有额外的数据。
我被这个困住了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:46:58.797

在表中添加列而不是 datagridview。这将使列数据绑定而不是“手动”创建它。然后将该列转换为组合框列，请查看此 SO 链接： [How to change a datagridview cell style from default textbox to combobox in vb.net?](https://stackoverflow.com/questions/12927094/how-to-change-a-datagridview-cell-style-from-the-default-textbox-to-combobox-in/12929137#12929137)

# java - 是否有与 MySQL Cluster/J 一起使用的 Spring 事务管理器（即 NDB 而不是 JDBC）

> ID：12975251
> 
> 赞同：3
> 
> 时间：2012-10-19T13:24:44.013
> 
> 标签：java, mysql

我正在寻找一个可以与 MySQL 的 Cluster/J 一起使用的 Spring 事务管理器。我不能成为第一个想在 Cluster/J 中使用声明式事务的人，但我找不到现有的经理。你见过一个吗？

# c# - 不支持媒体类型“”。有效的媒体类型：[*/*]

> ID：12975259
> 
> 赞同：0
> 
> 时间：2012-10-19T13:25:21.660
> 
> 标签：c#

将图像插入我的 Google 驱动器帐户时出现错误，请查看代码“不支持媒体类型。有效的媒体类型：[ */* ]”

```
private static Google.Apis.Drive.v2.Data.File insertFile(DriveService service, String title,  String description, String parentId, String mimeType, String filename)
{
    // File's metadata.
    Google.Apis.Drive.v2.Data.File body = new Google.Apis.Drive.v2.Data.File();
    body.Title = "Bluehills.jpg";
    body.Description = "hello";
    body.MimeType = "application/vnd.google-apps.drive-sdk";
    //var googleFile = new google.Google.Apis.Drive.v2.Data.File();

    // Set the parent folder.
    if (!String.IsNullOrEmpty(parentId))
    {
        body.Parents = new List<ParentReference>() { new ParentReference() { Id = parentId } };
    }

    // File's content.
    byte[] byteArray = System.IO.File.ReadAllBytes(filename);
    MemoryStream stream = new MemoryStream(byteArray);

    try
    {
        FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, mimeType);
        request.Upload();

        Google.Apis.Drive.v2.Data.File file = request.ResponseBody;

        // Uncomment the following line to print the File ID.
        // Console.WriteLine("File ID: " + file.Id);

        return file;
    }
    catch (Exception e)
    {
        Console.WriteLine("An error occurred: " + e.Message);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:31:18.273

“application/vnd.google-apps.drive-sdk”用于创建快捷方式。

尝试使用另一种 mime 类型。喜欢：图片/jpeg

请参阅[https://developers.google.com/drive/release-notes](https://developers.google.com/drive/release-notes)

# c# - 生成过程会保留一个套接字端口。如何防止它这样做？

> ID：12975260
> 
> 赞同：2
> 
> 时间：2012-10-19T13:25:21.717
> 
> 标签：c#, sockets

为了简单起见，我正在编写一个名为“APPLICATION A”的程序，它打开一个到本地主机上端口 8881 的套接字连接；后来它使用代码生成一个exe应用程序调用“APPLICATION B”：

```
 try
        {
            XmSam.Log("Spawning (" + process + ")");

            ProcessEx proc = new ProcessEx();

            proc.StartInfo.FileName = AppDomain.CurrentDomain.BaseDirectory + process + ".exe";
            proc.StartInfo.Arguments = parameters;
            proc.StartInfo.UseShellExecute = false;
            proc.Start();

            Program.Processes.Add(proc);

            XmSam.Log("Spawned " + proc.ProcessName);
        }
        catch (Exception ex)
        {
            XmSam.Log(ex);
        } 
```

当我关闭应用程序 A（通过停止应用程序或在窗口任务管理器中终止其进程）时，应用程序 B 仍然运行，这很好。但是，当我再次启动 APPLICATION A 时，我遇到了异常：

```
2012-10-18 16:21:23 - Only one usage of each socket address (protocol/network address/port) is normally permitted
2012-10-18 16:21:23 -    at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress) 
```

当应用程序 A 试图打开到端口 8881 的套接字时发生此错误。如果我终止应用程序 B，此错误将消失。我认为这不是因为应用程序 B 代码，因为它没有任何内容，如下面的代码所示：

```
 [STAThread]
    static void Main()
    {
        while (true)
        {
        }
    } 
```

我试图在 Process 类下查看 MSDN，但我没有看到任何关于此的内容。我假设当您生成一个进程时，该进程独立于调用应用程序，但显然情况并非如此。你知道有什么设置可以让我生成一个进程而不让它持有调用应用程序吗？

我知道另一种方法是让应用程序 A 中的代码杀死应用程序 B，但这不是理想的解决方案，尤其是在应用程序 A 意外崩溃的情况下。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:40:46.737

经过更多的挖掘，我找到了答案。我发现这篇很棒的[文章](http://www.dacris.com/blog/2009/11/18/call-of-the-devil-system-diagnostics-process-start/)

其中，对这个问题的主要解释如下：

> System.Diagnostics.Process.Start 使子进程从父进程继承句柄。这意味着，无论您生成什么进程（例如 Internet Explorer），该进程都会获得您的进程拥有的所有句柄！因此，即使您释放进程中的句柄，如果您生成的进程仍在运行，您的句柄也不会真正被释放，因为子进程应该正在使用它们。

因此，考虑到这一点，我所要做的就是将我的 UseShellExecute 标志更新为 true。

```
proc.StartInfo.UseShellExecute = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:44:43.723

您应该确保应用程序 A 在关闭套接字时关闭它。我认为 Application.ApplicationExit Event 是一个很好的地方，或者当你完成套接字时。

# php - 在 IIS (Plesk) 上的 FastCGI 中编辑 MaxRequestLen

> ID：12975261
> 
> 赞同：0
> 
> 时间：2012-10-19T13:25:25.277
> 
> 标签：php, iis, file-upload, windows-server-2008, fastcgi

尝试在我的服务器上上传大文件时收到 500 内部服务器错误。我所有的 PHP 设置都是正确的，即 post_max_size、execution_time 等...

我很确定这是 FastCGI 的限制，因为这是大多数网站告诉我的。但是，所有这些网站都指的是运行 Apache 的服务器，因此修复很简单（只需编辑 conf 文件）。因为我正在运行 IIS，所以问题有点复杂！

有人知道如何在 IIS 中编辑 FastCGI 的“MaxRequestLen”值吗？我似乎无法找到一种方法来做到这一点，因为我对 IIS 不是很熟悉。

**如果这不是问题，那么请提出使用 IIS 和 FastCGI 上传大文件问​​题的其他原因**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:12:22.600

在看了这个问题几个小时之后，在服务器上摆弄了很多配置等之后，结果证明这是 PHP 中的一个错误。该错误已在此处报告：

[https://bugs.php.net/bug.php?id=63330](https://bugs.php.net/bug.php?id=63330)

任何想查看该错误的解释以及导致此问题的原因的人，请参阅：

[PHP 上传 - 500 内部服务器错误](https://stackoverflow.com/questions/13007906/php-upload-500-internal-server-error)

# php - 根据 Symfony2 中的布尔值禁用视图中的表单字段

> ID：12975266
> 
> 赞同：0
> 
> 时间：2012-10-19T13:25:54.887
> 
> 标签：php, forms, symfony, twig

我有一个实体，其中包含一种确定是否需要禁用字段的方法。

在我看来，我试过这个：

```
 <div>{{
        form_widget(form.myValue, {
            'attr': {
                'disabled': form.get('value').isMyValueDisabled(),
                '(...)': '(...)', {# several other attributes #}
            }
        })
    }}</div> 
```

但是`disabled`html 字段上的属性会禁用我的字段，即使它包含 false。

这是一个共享表单，所以我无法在`->buildForm()`我的 Type 的方法中创建逻辑。

你有什么建议可以在 Twig 视图上禁用我的字段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:40:06.477

好的，我找到了解决方案：

```
{% if form.get('value').isValueDisabled() %}

<script type="text/javascript">
    $('#{{ form.value.vars.id }}').attr('disabled', 'disabled');
</script>

{% endif %} 
```

如果您知道没有 JavaScript 的方法，我很想学习它！

# jquery - Jquery 循环在第一张图片上失去对 $(this) onAfter 的引用

> ID：12975273
> 
> 赞同：3
> 
> 时间：2012-10-19T13:26:11.050
> 
> 标签：jquery, cycle

我在检索 jquery 循环插件上的图像对象的宽度属性时遇到问题

```
$(function() {

    $('#image').cycle({
        fx:     'fade',
        speed:  'slow',
        timeoutFn: calculateTimeout,
        width: 'auto',
        containerResize:true,
        slideResize: false,
        before:onBefore,
        after:onAfter
    });
});
function onAfter() {

    alert($(this).width()); 
} 
```

它为从第二个到最后一个的所有图像提供正确的宽度，但它为第一个提供 0（第一个图像是 550*380）。有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:33:08.507

它可能正在尝试获取尚未加载的图像的尺寸。尝试将此代码附加到 jquery`load`事件而不是`ready`事件。

根据 jquery 文档，该`load`事件一直等到图像加载完毕，而`ready`在 DOM 构建完成后立即触发。

参考：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# php - 发布到 Cake 控制器的数据未绑定到函数的变量

> ID：12975276
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:26:16.417
> 
> 标签：php, json, cakephp, controller

```
$.post("http://localhost/academico/materias/getid",
       ui.item.value,
       function(data){
           console.log(data);
       }, "json"); 
```

在我的控制器中，`$data`变量始终为空：

```
// $data is always null. How come?
public function getid($data = null) {
    debug($data);
    // Como vamos a retornar solamente datos, no necesitamos el layout.
    $this->layout = null;

    $this->set('data', $data);
    $this->render('/Elements/ajaxreturn');
} 
```

如何将 POST 的值绑定到我可以在控制器代码中使用的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:41:33.840

您不需要将 $data 变量定义为函数的参数，它希望它出现在 URL 中。POST 数据会自动填充到 Request 对象中。

[http://book.cakephp.org/2.0/en/controllers/request-response.html#accessing-post-data](http://book.cakephp.org/2.0/en/controllers/request-response.html#accessing-post-data)

“可以使用 CakeRequest::$data 访问所有 POST 数据。任何包含数据前缀的表单数据都将删除该数据前缀。”

```
$this->request->data 
```

# .net - .Net 资源中的 [....] 是什么意思？

> ID：12975277
> 
> 赞同：5
> 
> 时间：2012-10-19T13:26:17.977
> 
> 标签：.net, clr

.Net 核心库源代码（可以使用 Resharper 访问）有时包含奇怪的部分“[....]”，您不仅可以在注释中看到，还可以在代码本身中看到。它是什么意思，为什么会在那里？

来自 HttpWebRequest：

```
 // Return null only on [....] (if we're on the [....] thread).  Otherwise throw if no context is available.
    internal override ContextAwareResult GetConnectingContext() 
    {
        if (!Async)
        {
            GlobalLog.ThreadContract(ThreadKinds.User | ThreadKinds.[....], "HttpWebRequest#" + ValidationHelper.HashString(this) + "::GetConnectingContext"); 
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T14:52:17.597

这肯定不是有效的 C# 代码。请记住，Resharper 不是访问源的唯一工具，您还可以直接从 Microsoft 源服务器获取它们。

如果您查看 ILSpy 中的相同方法，您会看到：

```
internal override ContextAwareResult GetConnectingContext()
{
    if (!this.Async)
    {
        return null;
    } 
```

我假设 GlobalLog.ThreadContract 指的是团队内部使用的[代码合同。](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)可能只是为了删除一些敏感的内部信息而删除了源（尽管我无法想象这应该是什么）。

# hibernate - junit 测试中的 Derby 序列循环

> ID：12975279
> 
> 赞同：4
> 
> 时间：2012-10-19T13:26:22.243
> 
> 标签：hibernate, loops, sequence, derby

在我的 JUNIT 和 Hibernate (hibernate-core-3.6.8.Final) 环境中使用带有嵌入式驱动程序 (derby-10.9.1.0) 和内存数据库的 Derby 时，我遇到了麻烦。

我正在使用注释并使用 hbm2ddl 创建我的内存数据库。

一切正常，除非我尝试使用序列。

该序列已创建（它出现在日志中），但是当我尝试添加一个具有与该序列相关的 PK 的实体（休眠）时，我的代码开始在每一行中写入一个无限循环：

```
Hibernate: values next value for app.SE_FERI 
```

我的数据库创建为：

```
jdbc:derby:memory:testdb;create=true 
```

在使用数据库之前，我在代码中使用 hbm2ddl，如下所示：

```
SchemaExport schemaExport = new SchemaExport(config);
schemaExport.drop(true, true);
schemaExport.create(true, true); 
```

一些帮助 ！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T08:13:36.480

当序列的 allocationSize 设置为 1 时会出现此问题。将其设置为 > 1 对我有用。

我知道这个线程有点旧，但如果其他人有这个问题，这可能是解决方案。

编辑：拼写

# sql - 如何使用 COALESCE() 添加附加字符

> ID：12975281
> 
> 赞同：1
> 
> 时间：2012-10-19T13:26:26.870
> 
> 标签：sql, coalesce

我的 SELECT 语句有以下语法：

```
CONCAT(first_name, " ", COALESCE(middle_initial), " ", last_name) AS full_name 
```

显然，我得到的是以下内容：

```
For first_name='John' and middle_initial='A.' and last_name='Smith' 
I get 'John A. Smith' 
```

这很好，是预期的结果。

但是我为以下数据获得了额外的空间（我清楚地理解为什么）：

```
For first_name='John' and middle_initial='' and last_name='Smith' 
I get 'John  Smith' 
```

`COALESCE()`如果条件返回非空值，有没有办法附加“”？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:44:20.667

当 middle_initial 有 '' 时，你会想要：

```
SELECT CONCAT(first_name, ' ', 
   CASE
      WHEN middle_initial is null OR middle_initial = '' then ''
      ELSE CONCAT(middle_initial, ' ')
   END
   , last_name) AS full_name 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/5bdd1/7/0)

`COALESCE`用于检查`NULL`值，不处理空字符串，''

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:41:02.963

```
select concat(first_name , ' ' , 
     case when middle_initial is null then ''
          when middle_initial = '' then ''
          else concat(middle_initial, ' ') end ,
     last_name) 
```

此查询假定 first_name 和 last_name 不是 null 也不是空字符串，在这种情况下，您可以将相同的逻辑应用于该字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:55:59.957

试试这个

```
SELECT rtrim(Coalesce(first_name + ' ','') 
        + Coalesce(nullif(middle_name,'') + ' ', '') 
        + Coalesce(nullif(last_name,'') + ' ', ''))
FROM @table

SELECT rtrim(Coalesce('John' + ' ','') 
        + Coalesce(nullif('A.','') + ' ', '') 
        + Coalesce(nullif('Smith','') + ' ', ''))

SELECT rtrim(Coalesce('John' + ' ','') 
        + Coalesce(nullif('','') + ' ', '') 
        + Coalesce(nullif('Smith','') + ' ', '')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:58:01.077

我认为最好的方法是这样做。您可以对任意数量的字段、变量等使用这种结构。它还会正确显示您`John`或`John A.`

```
declare @Temp_Table table (first_name nvarchar(128), middle_initial nvarchar(128), last_name nvarchar(128))

insert into @Temp_Table
select 'John', null, 'Smith' union all
select 'John', 'A.', 'Smith' union all
select 'John', 'A.', null union all
select 'John', null, null

select
    *,
    stuff
    (
        isnull(' ' + nullif(first_name, ''), '') +
        isnull(' ' + nullif(middle_initial, ''), '') +
        isnull(' ' + nullif(last_name, ''), ''),
        1, 1, ''
    )
from @Temp_Table 
```

# java - 使用java从sql排序？

> ID：12975288
> 
> 赞同：0
> 
> 时间：2012-10-19T13:26:49.607
> 
> 标签：java, sql, database, sorting

我有以下问题，可以（我希望）有一个标准的解决方案。
我有一个与数据库交互并动态构建`SQL`字符串的 java 应用程序。
到目前为止，我猜通常的东西。
有时我需要对数据进行排序并使用`ORDER By`. 我猜到目前为止很清楚。
问题：我有时需要对没有实际数据但有一个短字符串的列进行排序，该字符串是实际数据的关键。
我的意思是：
`SELECT FROM MYTable WHERE MyTable.col1 = 'A' ORDER BY MyTable.col2 ASC`
And `col2`has values: `AB`, `BY`，`CY`返回排序但对我来说没用，因为这些是属性文件中实际值的键，因此最终结果没有排序。
以与当前工作方式一致的方式解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:33:23.233

如果数据不在数据库中，那么您的选择是在 Java 中对其进行排序，或者首先将属性文件中的数据插入到临时表中，然后加入该表并在 SQL 中执行 ORDER BY。如果这是一个经常发生的操作，您可以考虑将属性放入一个永久表中。

# restlet - 最大线程问题

> ID：12975290
> 
> 赞同：5
> 
> 时间：2012-10-19T13:27:04.043
> 
> 标签：restlet, restlet-2.0

首先，我检查了有关此问题的讨论，但找不到我的问题的答案，这就是我打开这个问题的原因。

我已经使用 restlet 2.0.15 设置了一个 Web 服务。该实现仅适用于服务器。与服务器的连接是通过网页进行的，因此我没有使用 ClientResource。

大多数关于线程池耗尽问题的答案都建议包含

`#exhaust + #release`

Web服务的过程可以描述为一个单一的功能`GET`。接收来自网页的请求，查询数据库，将结果框在XML中并返回最终表示。我使用过滤器来覆盖 beforeHandle 和 afterHandle。

**组件创建代码的代码：**

```
Component component = new Component();
component.getServers().add(Protocol.HTTP, 8188);
component.getContext().getParameters().add("maxThreads", "512");
component.getContext().getParameters().add("minThreads", "100");
component.getContext().getParameters().add("lowThreads", "145");
component.getContext().getParameters().add("maxQueued", "100");
component.getContext().getParameters().add("maxTotalConnections", "100");
component.getContext().getParameters().add("maxIoIdleTimeMs", "100");
component.getDefaultHost().attach("/orcamento2013", new ServerApp());
component.start(); 
```

这些参数是本论坛中讨论的结果，并由我修改以试图最大限度地提高效率。

**来到Application，代码如下：**

```
@Override
public synchronized Restlet createInboundRoot() {
    // Create a router Restlet that routes each call to a
    // new instance of HelloWorldResource.
    Router router = new Router(getContext());

    // Defines only one route
    router.attach("/{taxes}", ServerImpl.class);
    //router.attach("/acores/{taxes}", ServerImplAcores.class);

    System.out.println(router.getRoutes().size());

    OriginFilter originFilter = new OriginFilter(getContext());
    originFilter.setNext(router);

    return originFilter;
} 
```

**我也使用了在此处的讨论中找到的示例过滤器。实现如下：**

```
public OriginFilter(Context context) {
    super(context);
}

@Override
protected int beforeHandle(Request request, Response response) {
    if (Method.OPTIONS.equals(request.getMethod())) {
        Form requestHeaders = (Form) request.getAttributes().get("org.restlet.http.headers");
        String origin = requestHeaders.getFirstValue("Origin", true);

        Form responseHeaders = (Form) response.getAttributes().get("org.restlet.http.headers");
        if (responseHeaders == null) {
            responseHeaders = new Form();
            response.getAttributes().put("org.restlet.http.headers", responseHeaders);

            responseHeaders.add("Access-Control-Allow-Origin", origin);
            responseHeaders.add("Access-Control-Allow-Methods", "GET,POST,DELETE");
            responseHeaders.add("Access-Control-Allow-Headers", "Content-Type");
            responseHeaders.add("Access-Control-Allow-Credentials", "true");
            response.setEntity(new EmptyRepresentation());
            return SKIP;
        }
    }

    return super.beforeHandle(request, response);
}

@Override
protected void afterHandle(Request request, Response response) {

    if (!Method.OPTIONS.equals(request.getMethod())) {
        Form requestHeaders = (Form) request.getAttributes().get("org.restlet.http.headers");
        String origin = requestHeaders.getFirstValue("Origin", true);

        Form responseHeaders = (Form) response.getAttributes().get("org.restlet.http.headers");
        if (responseHeaders == null) {
            responseHeaders = new Form();
            response.getAttributes().put("org.restlet.http.headers", responseHeaders);

            responseHeaders.add("Access-Control-Allow-Origin", origin);
            responseHeaders.add("Access-Control-Allow-Methods", "GET,POST,DELETE"); //
            responseHeaders.add("Access-Control-Allow-Headers", "Content-Type");
            responseHeaders.add("Access-Control-Allow-Credentials", "true");

        }
    }

    super.afterHandle(request, response);

    Representation requestRepresentation = request.getEntity();
    if (requestRepresentation != null) {
        try {
            requestRepresentation.exhaust();
        } catch (IOException e) {
            // handle exception
        }

        requestRepresentation.release();
    }

    Representation responseRepresentation = response.getEntity();
    if(responseRepresentation != null) {
        try {
            responseRepresentation.exhaust();
        } catch (IOException ex) {
            Logger.getLogger(OriginFilter.class.getName()).log(Level.SEVERE, null, ex);
        } finally {

        }

    }

} 
```

**`responseRepresentation`没有，因为`#release method`它使进程崩溃并发出警告`WARNING: A response with a 200 (Ok) status should have an entity (...)`**

ServerResource 实现的代码如下：

```
public class ServerImpl extends ServerResource {

String itemName;

@Override
protected void doInit() throws ResourceException {
    this.itemName = (String) getRequest().getAttributes().get("taxes");

}

@Get("xml")
public Representation makeItWork() throws SAXException, IOException {

    DomRepresentation representation = new DomRepresentation(MediaType.TEXT_XML);

    DAL dal = new DAL();

    String ip = getRequest().getCurrent().getClientInfo().getAddress();

    System.out.println(itemName);

    double tax = Double.parseDouble(itemName);

    Document myXML = Auxiliar.getMyXML(tax, dal, ip);
    myXML.normalizeDocument();

    representation.setDocument(myXML);

    return representation;

}

@Override
protected void doRelease() throws ResourceException {

    super.doRelease();

}

} 
```

我已经尝试过其他线程中提供的解决方案，但它们似乎都不起作用。首先，似乎没有使用设置为`warnings state that the thread pool available is 10`. 如前所述，`maxThreads`价值的增加似乎只是推迟了结果。

```
Example: INFO: Worker service tasks: 0 queued, 10 active, 17 completed, 27 scheduled. 
```

可能有一些错误`Restlet version`，但我下载了稳定版本以验证这不是问题。Web 服务每天有大约 5000 个请求，这并不多。**注意：**`#release method`在`ServerResource or OriginFilter`返回错误和引用的警告中插入`("WARNING: A response with a 200 (Ok) status should have an entity (...)")`

请指导。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:57:12.080

通过阅读这个[站点](http://code.google.com/p/wattdepot/issues/detail?id=106)，我描述的服务器端的问题通过将 Restlet 发行版升级到[2.1 版本](http://www.restlet.org/downloads/testing)得到了解决。您将需要更改一些代码。您应该查阅相应的[迁移指南](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/171-restlet/155-restlet.html)。

# c# - 如何将 FluentValidator 连接到 Web API？

> ID：12975291
> 
> 赞同：30
> 
> 时间：2012-10-19T13:27:06.807
> 
> 标签：c#, asp.net-web-api, fluentvalidation

我正在尝试将 Fluent Validation 连接到我的 MVC WEB Api 项目，但它不想工作。

当我使用`MyController : Controller`-> 工作正常（`ModelState.IsValid`返回`False`）

但是当我使用`MyController :ApiController`......什么都没有。

有没有人有如何连接这些的经验？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-25T12:36:13.153

最新版 Fluent Validation (5.0.0.1) 支持 web api

只需从 Nuget 安装它并在 Global.asax 中注册它，如下所示：

```
using FluentValidation.Mvc.WebApi;

public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        ...
        FluentValidationModelValidatorProvider.Configure();
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-24T08:04:13.720

答案就在这个[pull request](https://fluentvalidation.codeplex.com/SourceControl/network/forks/havard/webapisupport/contribution/2253)中。

基本上您需要实现自定义`ModelValidation`提供程序。

还有几件事需要注意：

1.  Web API 不能与 System.Web.Mvc 命名空间中的 modelValidator 一起使用，只能与 System.Web.Http 中的那些一起使用，如下所述：

    [使用自定义 DataAnnotationsModelValidatorProvider 进行服务器端验证](https://stackoverflow.com/questions/11785311/server-side-validation-with-custom-dataannotationsmodelvalidatorprovider)

2.  你不要像这样添加它：

    ```
    ModelValidatorProviders.Providers.Add(new WebApiFluentValidationModelValidatorProvider());` 
    ```

    但是像这样：

    ```
    GlobalConfiguration.Configuration.Services.Add(typeof(System.Web.Http.Validation.ModelValidatorProvider), new WebApiFluentValidationModelValidatorProvider());` 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T15:53:12.070

我找到了另一个在 Web API 中使用 FluentValidation 的简单解决方案，但它缺乏与 ModelState 和元数据的集成。然而，当构建一个不需要将整个 ModelState 返回给客户端的 API 时（正如 MVC 中重建页面所需要的那样），我发现为了简单而进行权衡是值得的。每当 API 输入无效时，我都会返回 400 Bad Request 状态代码以及属性 ID 和错误消息列表。为此，我使用了一个简单的 ActionFilterAttribute：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class ValidateInputsAttribute : ActionFilterAttribute
{
    private static readonly IValidatorFactory ValidatorFactory = new AttributedValidatorFactory();

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        base.OnActionExecuting(actionContext);
        var errors = new Dictionary<string, string>();
        foreach (KeyValuePair<string, object> arg in actionContext.ActionArguments.Where(a => a.Value != null))
        {
            var argType = arg.Value.GetType();
            IValidator validator = ValidatorFactory.GetValidator(argType);
            if (validator != null)
            {
                var validationResult = validator.Validate(arg.Value);
                foreach (ValidationFailure error in validationResult.Errors)
                {
                    errors[error.PropertyName] = error.ErrorMessage;
                }
            }
        }
        if (errors.Any())
        {
            actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors);
        }
    }
} 
```

该属性可以作为全局过滤器添加到单个控制器/操作或基类中。

这段代码当然可以改进，但到目前为止它对我很有帮助，所以我想让其他人也可以使用它。以下是它的一些缺点：

1.  未验证空输入。我认为这将是一个更大的问题，但实际上它在我们的应用程序中根本不会发生太多（如果有的话）。我的控制器为空输入抛出 ArgumentNullExceptions，这将向客户端返回 500，通知客户端输入不能为空。
2.  我不能在我的控制器中使用 ModelState。但是，在验证所需的输入是非空的之后，我已经知道 ModelState 是有效的，所以这实际上可以用来简化代码。但对于开发人员来说，知道不要使用它很重要。
3.  现在这个实现是为 AttributedValidatorFactory 硬编码的。这应该是抽象的，但到目前为止，它在我的优先级列表中非常低。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T15:02:27.670

当我想解决这个问题时，我想这样做，以便可以将相同的验证器实例用于 MVC 和 Web API。我能够通过制造两个工厂并将它们一起使用来实现这一点。

MVC 工厂：

```
public class MVCValidationFactory : ValidatorFactoryBase
{
    private readonly IKernel _kernel;

    public MVCValidationFactory(IKernel kernel)
    {
        _kernel = kernel;
    }

    public override IValidator CreateInstance(Type validatorType)
    {
        var returnType = _kernel.TryGet(validatorType);

        return returnType as IValidator;
    }
} 
```

API工厂：

```
public class WebAPIValidationFactory : ModelValidatorProvider
{
    private readonly MVCValidationFactory _mvcValidationFactory;

    private static readonly ILog Log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

    public WebAPIValidationFactory(MVCValidationFactory mvcValidationFactory)
    {
        _mvcValidationFactory = mvcValidationFactory;
    }

    public override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, IEnumerable<ModelValidatorProvider> validatorProviders)
    {
        try
        {
            var type = GetType(metadata);

            if (type != null)
            {
                var fluentValidator =
                    _mvcValidationFactory.CreateInstance(typeof(FluentValidation.IValidator<>).MakeGenericType(type));

                if (fluentValidator != null)
                {
                    yield return new FluentValidationModelValidator(validatorProviders, fluentValidator);
                }
            }
        }
        catch (Exception ex)
        {
            Log.Error(ex);
        }

        return new List<ModelValidator>();
    }

    private static Type GetType(ModelMetadata metadata)
    {
        return metadata.ContainerType != null ? metadata.ContainerType.UnderlyingSystemType : null;
    } 
```

然后，诀窍是弄清楚如何为 MVC 和 Web API 运行验证。我最终为使用 ModelValidator 签名的 IValidator<> 创建了一个包装器。

```
public class FluentValidationModelValidator : ModelValidator
{
    public IValidator innerValidator { get; private set; }

    public FluentValidationModelValidator(
        IEnumerable<ModelValidatorProvider> validatorProviders, IValidator validator)
        : base(validatorProviders)
    {
        innerValidator = validator;
    }

    public override IEnumerable<ModelValidationResult> Validate(ModelMetadata metadata, object container)
    {
        if (InnerValidator != null && container != null)
        {
            var result = innerValidator.Validate(container);

            return GetResults(result);
        }

        return new List<ModelValidationResult>();
    }

    private static IEnumerable<ModelValidationResult> GetResults(FluentValidation.Results.ValidationResult result)
    {
        return result.Errors.Select(error =>
            new ModelValidationResult
            {
                MemberName = error.PropertyName,
                Message = error.ErrorMessage
            }));
    }
} 
```

最后一部分是连接 Global.asax 中的验证器：

```
MVCValidationFactory mvcValidationFactory = new MVCValidationFactory(KernelProvider.Instance.GetKernel());

GlobalConfiguration.Configuration.Services.Add(
    typeof(ModelValidatorProvider),
    new WebAPIValidationFactory(mvcValidationFactory));

ModelValidatorProviders.Providers.Add(new FluentValidationModelValidatorProvider(mvcValidationFactory));

DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

抱歉，这有点长，但希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-06T21:36:26.757

在 WebApiConfig 添加两行

```
public static class WebApiConfig
{
   public static void Register(HttpConfiguration config)
   {
       // snip...
       //Fluent Validation
       config.Filters.Add(new ValidateModelStateFilter());
       FluentValidationModelValidatorProvider.Configure(config);
   }
} 
```

创建一个模型和一个验证器，如下所示 -

```
[Validator(typeof(PersonCreateRequestModelValidator))] 
public class PersonCreateRequestModel
{
    public Guid PersonId { get; set; }
    public string Firstname { get; set; }
    public string Lastname { get; set; }
}

public class PersonCreateRequestModelValidator : AbstractValidator
{
    //Simple validator that checks for values in Firstname and Lastname
    public PersonCreateRequestModelValidator()
    {
        RuleFor(r => r.Firstname).NotEmpty();
        RuleFor(r => r.Lastname).NotEmpty();
    }
} 
```

这就是你所需要的。只需像往常一样编写控制器即可。

```
public IHttpActionResult Post([FromBody]PersonCreateRequestModel requestModel)
{
    //snip..
    //return Ok(some new id);
} 
```

如果你想要一个完整的源代码示例，你可以在这里获取 - [http://NoDogmaBlog.bryanhogan.net/2016/12/fluent-validation-with-web-api-2/](http://nodogmablog.bryanhogan.net/2016/12/fluent-validation-with-web-api-2/)

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-10-20T22:00:18.133

最新版本的 Fluent Validation 不支持 Mvc 4 或 Web Api。读[这个。](http://fluentvalidation.codeplex.com/documentation)

# mysql - 根据值插入重复记录而不使用游标

> ID：12975301
> 
> 赞同：0
> 
> 时间：2012-10-19T13:27:38.157
> 
> 标签：mysql, sql, insert, duplication

我在数据库中遇到问题。我必须根据一个值在另一个表上插入特定记录的重复记录。首先，我使用游标获取每条记录并获取我想要的重复次数，然后使用另一个游标进行重复。一切正常。但是如果记录超过 500 条，我就慢了下来。然后我做了一些研究，找到了一种不用光标插入的方法。

```
INSERT INTO report(id, Name) 
        SELECT i.id,i.Name FROM (SELECT  1  AS id 
        UNION SELECT  2  
        UNION SELECT 3 
        UNION SELECT 4 
        UNION SELECT 5 
        UNION SELECT 6 
        UNION SELECT 7 
        UNION SELECT 8 
        UNION SELECT 9 
        UNION SELECT 10) AS o  
        INNER  JOIN table  i WHERE o.id<=i.frequence; 
```

其中频率是重复次数。请放弃您的想法以改进您的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:20:57.940

您可以尝试创建一个表，其中包含从 1 到 10 的每个值的记录，然后加入该表。我不确定它会更快。你将不得不尝试它。

在此示例中，值从 1 到 10 的表称为“dup”，包含这些值的字段称为“id”。

```
INSERT INTO report(id, Name) 

SELECT i.id, i.Name 

FROM   table i 

       JOIN dup d
       ON d.id <= i.frequence; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:27:06.677

如果您有任何表包含至少与最大频率一样高的行号，您可以这样做：

```
INSERT INTO report(id, Name) 
        SELECT i.id,i.Name FROM table i 
            inner join (
                select distinct some_row_number_column from some_table
            ) o on o.some_row_number_column <= i.frequence; 
```

这与您所做的基本相同，但它避免了混乱的`union all`陈述。

或者你可以创建一个游标，将数字从 1 插入`frequence`到一个临时表中，然后在你的`join`. 或者您可以[使用行编号变量](https://stackoverflow.com/a/1895127/1584772)来生成必要的序列。基本上，做任何可以生成从 1 到您需要的最大值的连续数字列表的事情。

我通常会为此使用递归（DB2 语法）：

```
INSERT INTO report(id, Name) 
        with num_list (num) as (
             values (1)
                 union all 
             select num + 1 from num_list
                 where num < (select max(frequence) from table)
        )
        SELECT i.id,i.Name FROM table i 
            inner join num_list on num_list.num <= i.frequence; 
```

然而，MySQL 显然不支持递归。

# c# - 使用 linq 从列表中删除项目

> ID：12975306
> 
> 赞同：13
> 
> 时间：2012-10-19T13:27:44.590
> 
> 标签：c#, linq

如何使用 linq 从列表中删除项目？

我有一个项目列表，每个项目本身都有一个其他项目列表，现在我想检查其他项目是否包含传递列表的任何项目，因此应该删除主要项目。请检查代码以获得更清晰的信息。

```
public Class BaseItems
{
    public int ID { get; set; }
    public List<IAppointment> Appointmerts { get; set; }
}

Public DeleteApp(List<IAppointment> appointmentsToCheck)
{
   List<BaseItems> _lstBase ; // is having list of appointments

   //now I want to remove all items from _lstBase  which _lstBase.Appointmerts contains 
   any item of appointmentsToCheck (appointmentsToCheck item and BaseItems.Appointmerts 
   item is having a same reference)

   //_lstBase.RemoveAll(a => a.Appointmerts.Contains( //any item from appointmentsToCheck));

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-19T13:29:54.653

```
_lstBase
    .RemoveAll(a => a.Appointmerts.Any(item => appointmentsToCheck.Contains(item))); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T14:10:45.553

需要指出的是，LINQ 用于查询数据，您实际上不会从原始容器中删除元素。你将不得不使用`_lstBase.Remove(item)`到最后。您可以做的是使用 LINQ 来查找这些项目。

我假设您正在使用某种 INotify 模式，在这种模式下，它会破坏模式以替换`_lstBase`为自身的过滤版本。如果可以替换`_lstBase`，请使用@JanP. 的答案。

```
List<BaseItems> _lstBase ; // populated original list

Public DeleteApp(List<IAppointment> appointmentsToCheck)
{
  // Find the base objects to remove
  var toRemove = _lstBase.Where(bi => bi.Appointments.Any
                (app => appointmentsToCheck.Contains(app)));
  // Remove em! 
  foreach (var bi in toRemove)
    _lstBase.Remove(bi);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T13:32:03.670

```
var data = 
   _lstBase.
    Except(a => a.Appointmerts.Any
        (item => appointmentsToCheck.Contains(item))); 
```

或者

```
var data = 
   _lstBase.
    Where(a => !a.Appointmerts.Any
        (item => appointmentsToCheck.Contains(item))); 
```

# php - 十进制/整数乘法

> ID：12975308
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:27:46.917
> 
> 标签：php, integer, decimal, multiplication

我对两者都是新手，我想我会试试这个。为什么返回 0？

```
$_10kpt = (($_10kp * ($_10k *($gspot / 20))));
echo $_10kpt; 
```

_10kpt 未定义，第一个实例。$_10kp 是小数(7,3)，$gspot 是整数，20 显然是整数。我将如何为此返回某种价值？

```
$_10kp = .417
$_10k = 1.0
$gspot = 1600 
```

所以它应该返回 33.36 对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:36:47.693

只要任何`defined`变量将是`0`或`NULL`您的数学将给出`0`

在引用之后，`when in doubt print it out`请转储所有变量及其值，以确保这些变量非零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:37:03.670

```
 <?php
$_10kp = .417;
$_10k = 1.0;
$gspot = 1600;
$_10kpt = (($_10kp * ($_10k *($gspot / 20))));
echo $_10kpt;
?> 
```

在我的测试中，这恰好返回 33.36 ......

# couchdb - 在 CouchDB 中存储和分组 IP 地址

> ID：12975310
> 
> 赞同：1
> 
> 时间：2012-10-19T13:27:49.533
> 
> 标签：couchdb

我有一个 Couch 数据库，其中包含一堆 IP 地址文档，如下所示：

```
{
   "_id": "09eea172ea6537ad0bf58c92e5002199",
   "_rev": "1-67ad27f5ab008ad9644ce8ae003b1ec5",
   "1stOctet": "10",
   "2ndOctet": "1",
   "3rdOctet": "3",
   "4thOctet": "55"
} 
```

这些文档由属于不同子网范围的多个 IP 组成。

我需要一种基于第 1、第 2、第 3 和第 4 个八位字节来减少/分组这些文档的方法，以便生成减少的子网列表。

以前有没有人做过这样的事情。

此致，

卡尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:35:59.000

我不确定这是否正是您正在寻找的，如果您可以提供更多关于您所需输出的示例，我可能会提供更多帮助。

首先，我会让你的文档结构看起来像这样：（如果你不能改变那个结构，那没什么大不了的）

```
{
   "ip": "10.1.3.55"
} 
```

您的地图功能如下所示：

```
function (doc) {
    emit(doc.ip.split("."));
} 
```

你需要一个reduce函数，我刚刚在我的测试中使用了这个

```
_count 
```

然后我会使用`group_level`视图查询参数根据每个八位字节进行分组。

*   1 = 基于第一个八位字节的组
*   2 = 基于第 1-2 个八位组的组
*   3 = 基于第 1-3 个八位组的组
*   4 = 基于整个八位组的组

`group=true`在这种情况下，在功能上与`group_level=4`

# c - 运行 fork 并打印 hello

> ID：12975312
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:27:57.650
> 
> 标签：c, operating-system, fork

> **可能重复：**
> [linux gcc 中 fork() 的工作](https://stackoverflow.com/questions/3513242/working-of-fork-in-linux-gcc)
> [为什么这段代码打印两次？](https://stackoverflow.com/questions/9581787/why-does-this-code-print-two-times)

```
#include<stdio.h>
main()
{

 printf("hello\n");
 fork();

} 
```

上面的代码打印了一次“hello”。下面的代码打印了两次“hello”。

```
#include<stdio.h>
main()
{

 printf("hello");
 fork();

} 
```

上面的代码打印了两次“hello”。

请有人解释这种奇怪的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:36:42.247

不能保证以这种方式运行，但通常的行为是：

```
printf("hello"); 
```

被`"hello"`打印到输出缓冲区，但该缓冲区尚未刷新。然后在

```
fork(); 
```

程序状态被复制到子进程，包括非空输出缓冲区。退出时，父母和孩子的输出缓冲区都被刷新。

使用换行符，输出缓冲区在`fork()`.

# iphone - iPhone5上的多个闪屏问题

> ID：12975319
> 
> 赞同：0
> 
> 时间：2012-10-19T13:28:12.423
> 
> 标签：iphone, objective-c, ios, splash-screen, iphone-5

我有一个名为 Splashes 的简单类，它在启动时为三个图像设置动画。
它运行良好，但现在在 iPhone 5 上我无法自动调整视图大小。

这里的代码片段：

```
- (void)viewDidLoad
  [...]
  if ( IS_IPHONE_5 ) _ImageSplash.image = [UIImage imageNamed:@"splash_1-568h@2x.png"];
  else _ImageSplash.image = [UIImage imageNamed:@"splash_1.png"];
  if ( IS_IPAD ) _ImageSplash.image = [UIImage imageNamed:@"splash_1_ipad.png"];

  [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector:@selector(repeat) userInfo:nil repeats:YES];
  [...]
} 
```

重复功能

```
[...]
int i=0;
[...]
- (void)repeat
{
  switch (i) {
    case 0:
      if ( IS_IPHONE_5 ) _ImageSplash.image = [UIImage imageNamed:@"splash_2-568h@2x.png"];
      else _ImageSplash.image = [UIImage imageNamed:@"splash_2.png"];
      if ( IS_IPAD ) _ImageSplash.image = [UIImage imageNamed:@"splash_2_ipad.png"];
      break;
    case 1:
      if ( IS_IPHONE_5 ) _ImageSplash.image = [UIImage imageNamed:@"splash_3-568h@2x.png"];
      else _ImageSplash.image = [UIImage imageNamed:@"splash_3.png"];
      if ( IS_IPAD ) _ImageSplash.image = [UIImage imageNamed:@"splash_3_ipad.png"];
      break;
    default: [self dismissModalViewControllerAnimated:NO]; break;
  }
  i++;
} 
```

图像已根据设备正确加载，但 xib 保持不变。
不想自动调整大小。

这些是我的 XIB 的设置：
![在此处输入图像描述](../Images/33f55f33b29874f44b2446f1701ab0a3.png) ![在此处输入图像描述](../Images/97eba8ecd66aa91e4c2afb72cebd37d0.png)

![在此处输入图像描述](../Images/8c05dde128bf0c6c3e573f7960d73752.png)

可能是什么问题？

所有其他 XIB 都运行良好，我只有这个问题。
iOS 仅在视图底部显示一条黑色条纹！很奇怪...

注意：我不能使用 AUTOLAYOUTS，因为它是 3.2+ 应用程序兼容。

* * *

编辑：添加截图。
![在此处输入图像描述](../Images/a2d5868e2fc3150d64ef7c130312ee2c.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:40:12.570

除了当前设置（即固定到左侧、顶部、底部并允许灵活的高度）之外，将图像视图上的自动调整大小遮罩更改为固定到顶部和底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:48:01.093

我认为 CSmith 的回复应该有效，但是，无论如何，这可能会奏效：

```
CGRect windowFrame=[[[UIApplication sharedApplication].windows objectAtIndex:0] bounds];
[_ImageSplash setFrame:windowFrame]; 
```

将它放在 iPhone5 检查下，即设备是 iPhone5 时。

# playorm - playorm 中的多对多

> ID：12975321
> 
> 赞同：1
> 
> 时间：2012-10-19T13:28:19.943
> 
> 标签：playorm

由于 playorm 支持多对多，我有两个与此相关的问题：

1.  在多对多的情况下，实体如何存储在数据库中。即，需要多少个表/列族。
2.  此外，在 com.alvazan.test.db 包中给出的示例中，它在 Account.java 中使用：

    ```
    @NoSqlManyToMany
    private CursorToMany<Activity> activitiesCursor = new CursorToManyImpl<Activity>(); 
    ```

    [这里](https://stackoverflow.com/questions/12591660/cassandra-schema-design/12603885#12603885)给出了一个类似的例子。我关心的是，我们是否总是需要使用 CursorToMany 来实现 ManyToMany？

    如果是，是否不会引起任何问题，因为 CursorToMany 不属于数据层（实体不会保留 POJO）。

    如果不是，那么反过来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:17:43.010

您链接到的链接向您展示了多对多的 pojo 方式，但是使用 pojo 方法，如果您的列表中有太多，您可能会得到 OutOfMemoryExceptions，这就是我们还为您提供光标的原因。让我们将您给我的链接示例更改为以下内容....

```
public class Student {
  @NoSqlId
  private String id;
  private String firstName;
  private String lastName;
  @ManyToMany
  private List<Course> courses = new ArrayList(); //constructing avoids nullpointers
}

public class Course {
  @NoSqlId
  private String id;
  private String name;
  private String description
  @ManyToOne
  private Lecturer lecturer;
  @ManyToMany
  private List<Student> students = new List<Student>();
} 
```

对于任何 *ToMany(OneToMany, ManyToMany) 我们将外键列表存储在行本身中。在上面的示例中，只有两个表。一行看起来像这样

```
studentrowkey -> firstName="dean", lastName="hiller", courses:courseFk56=null, courses:courseFk78=null, courses:courseFk98=null, etc. etc. 
```

请注意，我们没有这种方式

```
studentrowkey -> firstName="dean", lastName="hiller", courses=courseFk56,courseFk78, courseFk98 
```

我们使用前者的原因是列操作是独立的，因此如果两台服务器读取同一个学生......一台服务器可能会添加 courseFk200 而另一台服务器可能会从学生中删除 courseFk56，并且您的两个操作都会生效。如果您遵循后一种方法，则服务器的更改之一将丢失。

后来，迪恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:08:54.213

谢谢！我的注释：**@NoSQLId 只接受字符串！**由于**KeyValidationClass = org.apache.cassandra.db.marshal.UTF8Type的****默认 ColumnFamily ，**
您将收到“Astyanax Key Validation Exception”的任何其他类型。

# java - 我对这个 While 循环的理解是否正确？

> ID：12975326
> 
> 赞同：1
> 
> 时间：2012-10-19T13:28:26.000
> 
> 标签：java

书中的示例要求用户输入任何正数。然后程序将分别添加各个数字并打印总数。例如，如果用户输入数字 7512，则程序设计为将 7 + 5 + 1 + 2 相加，然后打印总数。

我已经写出了我理解代码如何工作的方式。它是否正确？我对这个循环的理解是否正确，或者我错过了任何计算？当 7 % 10 中没有余数时，在第 4 次循环中会发生什么？

```
1st  run of loop ... sum = sum + 7512 % 10 which is equal to 2 
                        n = 7512 / 10 which which equals to 751 

2nd run of loop ... sum = 2 + 751 % 10 which is equal to 1 
                         n = 751 / 10  which is equal to 75 

3rd run of loop ...  sum = 3 + 75 % 10 which is equal to 5 
                          n  = 75 / 10 which is equal to 7

4th run of loop ...  sum = 8 + 7 % 10   <------? 
```

* * *

```
import acm.program.*; 

   public class DigitSum extends ConsoleProgram{

   public void run() {
   println("This program will add the integers in the number you enter.");
   int n = readInt("Enter a positive integer: ");
   int sum = 0;
   while (n > 0) {
        sum += n % 10;
        n /= 10; 
    }
    println("The sum of the digits is" + sum + ".");    
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:30:58.490

运算的结果`7 % 10`是 7，即 7 除以 10 的余数。循环的最后一次迭代是在前一个值上加 7。循环内的下一个除法步骤 ( `n /= 10;`) 将 n 设为 0，这就是循环的结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:30:17.743

`%`不一样`/`

运算符用于取模，而`%`不是除法...这意味着运算的结果不是除法，而是获得除法的余数，例如：

```
7512 % 10 => 2  
751 % 10 => 1  
75 % 10 => 5  
7 % 10 => 7 
```

在处理数字运算时，这种逻辑相当频繁地使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:33:13.140

*   运行前，总和 = 0，n = 7512
*   第一次循环... sum = 0 + 2 => sum = 2, n = 751
*   第二次循环... sum = 2 + 1 => sum = 3, n = 75
*   第三次循环... sum = 3 + 5 => sum = 8, n = 7
*   第 4 次循环运行 ... sum = 8 + 7 => sum = 15, n = 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:33:36.257

在`7%10`你得到它之后`7`，它就会被添加到你的结果中。并且`7/10`会导致`0`你的循环结束，你的总和现在有了你想要的加法。

# c++ - 如何从 ProgID 或 CLSID 获取类型库（不加载 COM 对象）？

> ID：12975329
> 
> 赞同：8
> 
> 时间：2012-10-19T13:28:35.573
> 
> 标签：c++, com

给定类型库中包含的 COM 类的 ProgID 或 CLSID，我如何以编程方式获取类型库的路径或 LIBID，而无需实例化 COM 对象？

对于某些 COM 对象，您可以通过注册表路径执行此操作

```
HKEY_CLASSES_ROOT\CLSID\{clsid}\TypeLib 
```

但是有些 COM 对象没有`TypeLib`键，例如`Word.Application`：

![在此处输入图像描述](../Images/894518ebe89d1b0200f58bdade93abbf.png)

如何在不实例化 COM 对象的情况下确定这些 COM 对象的类型库路径或 LIBID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:40:49.920

类型库可能与给定关联，也可能不关联`CLSID`。如果您在注册表中没有类型库引用，您可能会在运行时使用`IDispatch::GetTypeInfo`.

没有类型库的 COM 类（或注册类型库）仍然是有效的 COM 类，因此您最终可能会在没有类型库的情况下运行良好且可用。

您还有一个机会是找到托管 COM 服务器的二进制文件，无论它是`.EXE`、`.DLL`还是`.OCX`，并尝试从其资源中加载类型库（通常在标识符 1 下）。很多时候，类型库就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:52:30.580

正如您在问题中提到的，并非所有 COM 对象`TypeLib`在注册表中都有一个 ID，甚至它们也不会被迫将其 TypeLib 发送到目标系统，但为了能够公开其对象的信息，他们需要一个 TypeLib。因此，它们的 TypeLib 信息通常存储在`EXE`或`DLL`作为资源中。您可以使用[LoadTypeLib](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221027%28v=vs.85%29.aspx)函数从指定模块中将 TypeLib 信息提取为[ITypeLib](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221549%28v=vs.85%29.aspx)，然后编写自己`IDL`的资源，甚至提取资源，然后将其保存为`.tlb`.

# jquery - JQuery 移动弹出窗口 $.mobile.changePage 错误？

> ID：12975331
> 
> 赞同：3
> 
> 时间：2012-10-19T13:28:46.947
> 
> 标签：jquery, mobile, popup

弹出窗口似乎真的有问题（未准备好发布）。如果关闭弹出窗口关闭事件（正如它应该做的那样），它将触发......但是当您切换到另一个页面（多页面布局）时也会触发。这根本不应该发生。因为您可能从未打开过弹出窗口......但是当您切换页面时仍然会触发关闭事件（他们怎么会错过那个？）。

此外，从弹出窗口的关闭事件中，我尝试使用 $.mobile.changePage(../schedule.html); 返回上一页；但是如果我在弹出窗口的关闭事件中这样做，就会发生非常奇怪的事情。所以这段代码：

```
$( "#somepage #popupstatus" ).bind({
    popupafterclose: function(event, ui) 
    {
        console.log('closing popup');
        if (isPopupVisible)
        {
            isPopupVisible=false;
            //do stuff
            $.mobile.changePage('../schedule.html');
        }       
    }
}); 
```

会让你跳回上一页……然后它会再次跳到这一页。为什么？这是另一个错误吗？其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:59:58.413

我遇到了类似的问题，我在弹出窗口上有一个确认按钮。我想我需要在更改页面之前关闭弹出窗口。显然，只需更改页面也会关闭弹出窗口。我来自：

```
$('#confirm_status').popup('close');
self.loadWorkOrders();
$.mobile.changePage('#work_orders'); 
```

至：

```
self.loadWorkOrders();
$.mobile.changePage('#work_orders'); 
```

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:30:01.507

我遇到了类似的问题。

第 1 页（列表页）转换到第 2 页（详细信息页），在用户单击按钮并成功完成 Ajax-POST 后打开弹出窗口。关闭弹出窗口时，将发出 changePage to Page 1。这会导致在再次转到第 2 页时触发 popupafterclose 事件。

在所述事件中使用简单的布尔检查来防止这种情况（在发出 POST 时设置为 true，在打开弹出窗口时设置为 false）会导致其他奇怪的行为 - 从第 1 页到第 2 页的初始转换几乎总是重新执行，所以用户总是会看到两个转换：在弹出窗口关闭后预期的到第 1 页，之后直接从第 1 页到第 2 页的转换。

此时我只是放弃了，我将尝试使用对话框而不是弹出窗口。

# php - 可能的原因 Curl php 脚本未在预定义文件上获取/保存 cookie - 排除了权限和路径原因

> ID：12975336
> 
> 赞同：0
> 
> 时间：2012-10-19T13:28:50.680
> 
> 标签：php, curl

好的，我尝试了各种我发现的脚本，但都没有奏效。我很感兴趣为什么非常基本的 PHP Curl 脚本不起作用？是关于 XAMPP 的吗？例如，这是我的代码

```
$ckfile = $_SERVER['DOCUMENT_ROOT']  .'/cookies'  . '/cookies.txt';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://example.com/"); // of courese, have cookies
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt($ch, CURLOPT_COOKIEFILE, $ckfile);

curl_exec($ch);

curl_close($ch); 
```

它应该在我的 cookies.txt 文件中返回 cookie。为什么这没有发生？ *注意：* 所有权没有问题（我尝试过不同的）权限没有问题（777）检查file_exists（$ckfile），文件存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:42:10.273

我找到了原因。没有人提到，除了所有权、权限、完整路径等，您尝试保存到本地文件的 cookie 必须是**服务器端 cookie**，**而不是 javascript 设置的 cookie**。

希望有人会觉得这很有帮助。

# c++ - to_string 不是 std 的成员，g++ (mingw) 说

> ID：12975341
> 
> 赞同：263
> 
> 时间：2012-10-19T13:29:10.380
> 
> 标签：c++, c++11, g++, mingw, tostring

我正在制作一个小型词汇记忆程序，其中单词会随机向我闪现以获取含义。正如 Bjarne Stroustroup 告诉我们的那样，我想使用标准 C++ 库，但我一开始就遇到了一个看似奇怪的问题。

我想将`long`整数更改为`std::string`以便能够将其存储在文件中。我也受雇于`to_string()`此。问题是，当我用 g++ 编译它时（版本 4.7.0 如其 --‍version 标志所述），它说：

```
PS C:\Users\Anurag\SkyDrive\College\Programs> g++ -std=c++0x ttd.cpp
ttd.cpp: In function 'int main()':
ttd.cpp:11:2: error: 'to_string' is not a member of 'std' 
```

我给出这个错误的程序是：

```
#include <string>

int main()
{
    std::to_string(0);
    return 0;
} 
```

但是，我知道这不可能，因为 msdn 库[明确表示](http://msdn.microsoft.com/en-us/library/ee404875.aspx)它存在，并且Stack Overflow 上[的一个早期问题](https://stackoverflow.com/questions/7521617/c11-to-string-function-where)（对于 g++ 4.5 版）说它可以用`-std=c++0x`标志打开。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-10-19T13:43:45.113

这是 MinGW 下的一个已知错误。[相关的 Bugzilla](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52015)。在评论部分，您可以获得一个[补丁](http://tehsausage.com/mingw-to-string)以使其与 MinGW 一起使用。

此问题已在 MinGW-w64 发行版中修复，该发行版高于[MinGW-w64 项目](http://mingw-w64.org/doku.php)提供的 GCC 4.8.0 。尽管名称如此，该项目提供了 32 位和 64 位的工具链。Nuwen [MinGW 发行版](http://nuwen.net/mingw.html)也解决了这个问题。

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2013-12-31T18:23:14.123

```
#include <string>
#include <sstream>

namespace patch
{
    template < typename T > std::string to_string( const T& n )
    {
        std::ostringstream stm ;
        stm << n ;
        return stm.str() ;
    }
}

#include <iostream>

int main()
{
    std::cout << patch::to_string(1234) << '\n' << patch::to_string(1234.56) << '\n' ;
} 
```

不要忘记包括`#include <sstream>`

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-10-19T14:03:31.760

正如所建议的，这可能是您的编译器版本的问题。

尝试使用以下代码将 a 转换`long`为`std::string`：

```
#include <sstream>
#include <string>
#include <iostream>

int main() {
    std::ostringstream ss;
    long num = 123456;
    ss << num;
    std::cout << ss.str() << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-06-03T06:28:59.543

使用这个功能...

```
 #include<sstream>
    template <typename T>
    std::string to_string(T value)
    {
      //create an output string stream
      std::ostringstream os ;

      //throw the value into the string stream
      os << value ;

      //convert the string stream into a string and return
      return os.str() ;
    }

    //you can also do this
    //std::string output;
    //os >> output;  //throw whats in the string stream into the string 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-11-26T04:49:24.847

## to_string 是 Cygwin 的当前问题

这是对旧线程的新答案。确实出现了一个新的但很快就被取消了， [Cygwin: g++ 5.2: 'to_string' is not a member of 'std'</a>。](https://stackoverflow.com/questions/33500074/cygwin-g-5-2-to-string-is-not-a-member-of-std)

 [太糟糕了，也许我们会得到一个更新的答案。根据@Alex 的说法，截至 2015 年 11 月 3 日，Cygwin g++ 5.2 仍未工作。](https://stackoverflow.com/questions/33500074/cygwin-g-5-2-to-string-is-not-a-member-of-std) 

[2015 年 1 月 16 日，Red Hat 的 Cygwin 维护者 Corinna Vinschen](https://stackoverflow.com/questions/33500074/cygwin-g-5-2-to-string-is-not-a-member-of-std)[表示，这个问题](https://cygwin.com/ml/cygwin/2015-01/msg00245.html)是 newlib 的一个缺点。它不支持大多数 long double 函数，因此不支持 C99。

红帽是，

> ...仍然希望在某一时刻将“long double”功能引入 newlib。

2015 年 10 月 25 日，[Corrine 还表示](https://sourceware.org/ml/cygwin/2015-10/msg00446.html)，

> 如果有一点数学知识的人将缺少的 long double 函数贡献给 newlib，那还是很好的。

因此，我们有它。也许我们中的一个有知识和时间的人可以做出贡献并成为英雄。

新库在[这里](https://sourceware.org/newlib/)。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-06-10T00:21:23.713

更改默认 C++ 标准

**从**（编译文件失败）错误：“to_string”不是“std”的成员

> -std=c++98

**到**（编译文件成功）

> -std=c++11 或 -std=c++14

在 Cygwin G++(GCC) 5.4.0 上测试

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-17T00:13:31.807

如果我们使用模板光解决方案（如上所示），如下所示：

```
namespace std {
    template<typename T>
    std::string to_string(const T &n) {
        std::ostringstream s;
        s << n;
        return s.str();
    }
} 
```

不幸的是，在某些情况下我们会遇到问题。例如，对于*静态 const*成员：

hpp

```
class A
{
public:

    static const std::size_t x = 10;

    A();
}; 
```

cpp

```
A::A()
{
    std::cout << std::to_string(x);
} 
```

并链接：

```
CMakeFiles/untitled2.dir/a.cpp.o:a.cpp:(.rdata$.refptr._ZN1A1xE[.refptr._ZN1A1xE]+0x0): undefined reference to `A::x'
collect2: error: ld returned 1 exit status 
```

这是解决问题的一种方法（添加到类型*size_t*）：

```
namespace std {
    std::string to_string(size_t n) {
        std::ostringstream s;
        s << n;
        return s.str();
    }
} 
```

HTH。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-29T08:20:59.420

to_string() 仅存在于 c++11 中，因此如果 c++ 版本较少，请使用一些替代方法，例如**sprintf**或**ostringstream**

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-12-31T13:54:30.397

[事实上，自 4.8.0 以来](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52015)`std::to_string`，*-w64-mingw32 目标实际上支持 libstdc++ 。但是，这不包括对 MinGW.org、Cygwin 和变体（例如来自 MSYS2 的 *-pc-msys）的支持。另请参阅[https://cygwin.com/ml/cygwin/2015-01/msg00245.html](https://cygwin.com/ml/cygwin/2015-01/msg00245.html)。

在解决 MinGW-w64 的错误之前，我已经实施[了一种解决方法。](https://bitbucket.org/FrankHB/yslib/src/690a91864c2c71fb625eefd8b8531fb5c3f1eb87/YBase/include/libdefect/string.h?fileviewer=file-view-default)与其他答案中的代码不同，这是对 libstdc++ 的模仿（尽可能）。它不需要字符串流构造，但依赖于 libstdc++ 扩展。即使现在我在 Windows 上使用 mingw-w64 目标，它仍然适用于多个其他目标（只要`long double`不使用函数）。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-18T23:04:14.877

对于任何想知道为什么会在 Android 上发生这种情况的人，可能是因为您使用了错误的 c++ 标准库。尝试将 build.gradle 中的 c++ 库从`gnustl_static`to`c++_static`和 CMakeLists.txt 中的 c++ 标准从`-std=gnu++11`to`-std=c++11`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-12T20:48:09.030

在代码块中转到设置-> 编译器设置-> 编译器标志-> 选择 std c++11 完成。我有同样的问题......现在它正在工作！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-19T04:48:07.940

对我来说，确保我有：

```
#include <iostream>  
#include<string>  
using namespace std; 
```

在我的文件中做了类似`to_string(12345)`工作。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-04-18T12:54:00.797

这也发生在我身上，我只是写了一个快速函数，而不是担心更新我的编译器。

```
string to_string(int number){
    string number_string = "";
    char ones_char;
    int ones = 0;
    while(true){
        ones = number % 10;
        switch(ones){
            case 0: ones_char = '0'; break;
            case 1: ones_char = '1'; break;
            case 2: ones_char = '2'; break;
            case 3: ones_char = '3'; break;
            case 4: ones_char = '4'; break;
            case 5: ones_char = '5'; break;
            case 6: ones_char = '6'; break;
            case 7: ones_char = '7'; break;
            case 8: ones_char = '8'; break;
            case 9: ones_char = '9'; break;
            default : ErrorHandling("Trouble converting number to string.");
        }
        number -= ones;
        number_string = ones_char + number_string;
        if(number == 0){
            break;
        }
        number = number/10;
    }
    return number_string;
} 
```

# javascript - 我正在尝试安排我的 html/css/jquery，以便我可以通过双击来切换 div 的可见性

> ID：12975344
> 
> 赞同：0
> 
> 时间：2012-10-19T13:29:31.423
> 
> 标签：javascript, html, css, dom

我正在尝试安排我的 html/css/jquery，以便我可以通过双击来切换 div 的可见性。我可以通过双击将其隐藏，**但是当我再次双击时它不会重新出现。**当我查看所有 div 轮廓时，该 div 的轮廓不再存在。我使用 Web 开发人员插件进行检查。我正在使用以下代码来尝试完成此操作：

我的**css课程**是..

```
 .hidden { visibility: hidden; }
    .unhidden { visibility: visible; } 
```

**html**是...

```
<div id="ConstructionDiv" ondblclick="unhide('ConstructionDiv')" class="unhidden">
                    <!.. the div is unhidden at page load. When I look at generated
                    source code after the double click the class is "hidden" 
                     -->
            </div> 
```

**我的JavaScript**是...

```
function unhide(divID) {
 var item = document.getElementById(divID);
 if (item) {
 item.className=(item.className=='hidden')?'unhidden':'hidden';
 }
 } 
```

有可能做我正在尝试的事情吗？一定有什么有效的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:41:38.850

我刚试过这个，不可见的元素无法接收点击事件。

正如安迪所说，Opacity 0 可以很好地接收点击事件，并且内容仍然是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:45:14.700

使用以下 CSS 规则：

```
 .hidden {
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)";
        filter: alpha(opacity=1);
        -moz-opacity:.1;
        -khtml-opacity: .1;
        opacity: .1;
    }

.unhidden {
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
        filter: alpha(opacity=100);
        -moz-opacity:1;
        -khtml-opacity: 1;
        opacity: 1;
    } 
```

**更新**

您还可以将元素包装在 div 之类的其他元素中，然后使用该 div 的单击来显示或隐藏内部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T00:20:47.470

如果你有两个 div，都绝对放置，但一个可能比另一个大得多。单击一个会更改两者的可见性。

# javascript - 自动缩放/居中谷歌地图 API？

> ID：12975352
> 
> 赞同：2
> 
> 时间：2012-10-19T13:30:04.960
> 
> 标签：javascript, php, google-maps

我在 php mysql 方面很有经验，但 javascript 让我摸不着头脑。我正在尝试将谷歌地图添加到我的网站，以显示我的数据库中的照片是在哪里拍摄的。我让静态谷歌地图工作，但由于 url 字符限制，它只会显示 37 个标记。我按照 google maps api docs 上的教程进行操作，我有一张地图，可以显示我数据库中图像的所有坐标。我的问题是，我一生都无法弄清楚如何使地图自动居中并自动缩放以适合我的所有标记。我的地图测试网站位于[maptest](http://www.perfectpanorama.com/maptest/phpsqlajax_map_v3.html)。我找到了这篇关于如何自动居中/缩放我的地图的[教程](http://www.wiliam.com.au/wiliam-blog/google-maps-auto-zoom-centre-your-map)，无论我把他的代码放在哪里都会出错。这是我的地图没有自动缩放/居中的代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Maps AJAX + mySQL/PHP Example</title>
    <script src="http://maps.google.com/maps/api/js?             key=AIzaSyDnMkDkoCHNE7BG4eobjeMJdWWZtdZvzeg&sensor=false"
        type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[

  var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(42.293564,-39.07617),
    zoom: 2,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml3.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      //var address = markers[i].getAttribute("address");
      //var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>";
      //var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        //icon: icon.icon,
        //shadow: icon.shadow
      });

      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

   //]]>
  </script>
 </head>

  <body onload="load()">
   <div id="map" style="width: 600px; height: 400px"></div>
    </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:42:14.807

试过这个？

```
var fitToMarkers = function(markers) {
    var bounds = new google.maps.LatLngBounds();
    var length = markers.length;
    for (var i = 0; i < length; i++) {
        bounds.extend(new google.maps.LatLng(markers[i].lat, markers[i].lng));
        map.fitBounds(bounds);
    }
}; 
```

# wpf - 在 wpf 画布上绘制动态数量的网格线

> ID：12975353
> 
> 赞同：2
> 
> 时间：2012-10-19T13:30:07.633
> 
> 标签：wpf, inkcanvas

我有一个 WPF 墨水画布，我想在其上绘制网格线（代表像素化画布的水平和垂直线）。水平线和垂直线的数量将是动态的。我在后面的代码中有输入，即这些行的数量。我该如何进行？我希望这个问题很清楚。

# java - 错误：无法创建 Java 虚拟机。Jboss7 AS服务器启动问题

> ID：12975357
> 
> 赞同：2
> 
> 时间：2012-10-19T13:30:35.450
> 
> 标签：java, jboss7.x

我在启动 JBOSS 7 AS 服务器时遇到错误，如下所示...

JBoss Bootstrap 环境
JBOSS_HOME: C:\EAP-6.0.0.GA\jboss-eap-6.0
JAVA: C:\Program Files\Java\jdk1.7.0\bin\java

JAVA_OPTS：-client -Dprogram.name=standalone.bat -Xms1303M -Xmx1303M -XX:MaxPermSize=256M

初始化虚拟机时出错

```
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:28:36.100

我面临着同样的问题。基于以上评论，我创建了一个 `JAVA_OPTS` 以 value 命名的环境变量`-client -Dprogram.name=standalone.bat -Xms512M -Xmx512M -XX:MaxPermSize=128M`

希望这更有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-21T02:50:02.993

我将环境变量设置`JAVA_OPTS`为值：

```
-client -Dprogram.name=standalone.bat -Xms512M -Xmx512M -XX:MaxPermSize=128M 
```

它奏效了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T18:35:53.490

从 /bin 修改文件 run.conf

```
-Xms1303m -Xmx1303m -XX:PermSize=512m -XX:MaxPermSize=1024m 
```

有了这个：

```
-Xms512m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=128m 
```

# iphone - 将照片附加到 SMS/MMS 消息

> ID：12975358
> 
> 赞同：0
> 
> 时间：2012-10-19T13:30:38.100
> 
> 标签：iphone, ios, xcode, mms, file-sharing

Apple Photo App 如何将照片附加到彩信中？虽然每个人都认为没有办法做到这一点，但有没有办法解决这个问题？一些研究员建议使用复制和粘贴。以前有人试过吗？如果是这样，你能帮我提供示例代码吗？我有一个我不确定是否可行的想法：如果我们有复制和粘贴代码，我们可以使用`afterDelay`代码或其他方法以一种方法实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:25:55.500

我有一个客户要求将此作为应用程序中的一项功能。不幸的是，Apple 对我们不够信任，无法为我们提供此功能。

我们最终不得不使用中间服务来上传照片并在 SMS 中提供 URL 作为链接。ImageShack 和 yFrog 可能是两个这样的服务（它们有可用的 API），但这实际上取决于您在安全/隐私方面的需求。

# oracle - 仅批量更新 DATE 列中的日期和月份

> ID：12975361
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:30:43.500
> 
> 标签：oracle

我在 oracle 中有一个数据类型为 DATE 的列。我想将所有日期和月份更新为“01-JAN”，我不想打扰这一年。

例如： 更新前：

```
DATE
======
05-DEC-12
07-FEB-11
27-MAR-99 
```

更新后：

```
DATE
======
01-JAN-12
01-JAN-11
01-JAN-99 
```

您能否向我提供 UPDATE 查询以实现此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:33:58.770

```
update your_table set datecol = trunc(datecol,'yyyy'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:52:03.787

尝试这个：

```
update table 
set col = to_date('01-JAN'||to_char(col,'yy'),'dd-MON-yy') 
```

# java - 无法解析为类型（直到 stackoverflow 出现无限错误）

> ID：12975363
> 
> 赞同：0
> 
> 时间：2012-10-19T13:30:45.570
> 
> 标签：java, jsp, tomcat, netbeans

我在 Tomcat 注销时遇到这些错误（在 Netbeans 中）。尽管 Web 应用程序在浏览器中运行良好。

```
An error occurred at line: 7 in the jsp file: /WEB-INF/jsp/header.jsp
LoginModel cannot be resolved to a type
4:     <!--header start here -->
5:     <%
6:         LoginModel loginModel;
7:         loginModel = (LoginModel) request.getSession(false).getAttribute("loginModel");
8:     %>
9:     <div>
10:         <div class="alignright lgouter"> 
```

在我的 web 应用程序中，我不包括 header.jsp，但是如何跟踪它为什么调用 header.jsp 以及在哪里？

类位于：`com.mycomp.mct.domain.LoginModel` 但错误是`Only a type can be imported. com.mycomp.domain.LoginModel resolves to a package`

为什么它在没有`.mct.`包装的情况下进行搜索？

这就是我如何包括

```
<%@page import="com.mycomp.mct.domain.LoginModel"%>
<div class="header" > 
```

# c# - 类型成员的表达式导致不同的表达式（MemberExpression、UnaryExpression）

> ID：12975373
> 
> 赞同：43
> 
> 时间：2012-10-19T13:31:07.023
> 
> 标签：c#, .net, lambda, expression

## 描述

我有一个表达式指向我的类型的属性。但它不适用于每种属性类型。“不意味着”意味着它会导致不同的表达类型。我认为它会导致结果， `MemberExpression`但事实并非如此。

For `int`and`Guid`它导致 a`UnaryExpression`和 for`string` 在 a 中`MemberExpression`。

我有点困惑 ;）

## 一些示例代码

**我的课**

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

**测试代码**

```
Person p = new Person { Age = 16, Name = "John" };

Expression<Func<Person, object>> expression1 = x => x.Age;
// expression1.Body = UnaryExpression;

Expression<Func<Person, object>> expression2 = x => x.Name;
// expression2.Body = MemberExpression; 
```

## 问题

我如何比较两个表达式并检查它们是否意味着相同的类型和相同的属性？

# 更新、回答并完成示例

感谢用户**dasblinkenlight**让我走上了正轨。

他提供了方法

```
private static MemberExpression GetMemberExpression<T>(
    Expression<Func<T,object>> exp
) {
    var member = expr.Body as MemberExpression;
    var unary = expr.Body as UnaryExpression;
    return member ?? (unary != null ? unary.Operand as MemberExpression : null);
} 
```

我编写了以下扩展方法来比较方法的结果`GetMemberExpression` 并检查是否`GetMemberExpression().Member.Name`相同。

```
private static bool IsSameMember<T>(this Expression<Func<T, object>> expr1, Expression<Func<T, object>> expr2)
{
    var result1 = GetMemberExpression(expr1);
    var result2 = GetMemberExpression(expr2);

    if (result1 == null || result2 == null)
       return false;

    return result1.Member.Name == result2.Member.Name;
} 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-19T13:38:15.683

发生这种情况的原因是它`Age`是一个*值*类型。为了将返回值类型的表达式强制转换`Func<Person,object>`到编译器中，需要插入 a [`Convert(expr, typeof(object))`](http://msdn.microsoft.com/en-us/library/bb292051.aspx)、 a [`UnaryExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.unaryexpression.aspx)。

然而，对于`string`s 和其他引用类型，不需要装箱，因此返回“直接”成员表达式。

如果你想进入`MemberExpression`内部`UnaryExpression`，你可以得到它的操作数：

```
private static MemberExpression GetMemberExpression<T>(
    Expression<Func<T,object>> exp
) {
    var member = exp.Body as MemberExpression;
    var unary = exp.Body as UnaryExpression;
    return member ?? (unary != null ? unary.Operand as MemberExpression : null);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T14:57:59.327

`Member.Name`我建议不要比较字符串，而是`PropertyInfo`直接比较实例是否相等，以避免在不同类中的两个属性共享相同名称时出现误报。

```
public static bool IsSameProperty<TSourceA, TSourceB, TPropertyA, TPropertyB>(
    Expression<Func<TSourceA, TPropertyA>> expA,
    Expression<Func<TSourceB, TPropertyB>> expB)
{
    MemberExpression memExpA = expA.Body as MemberExpression;
    MemberExpression memExpB = expB.Body as MemberExpression;

    if (memExpA == null || memExpB == null)
        return false;

    PropertyInfo propA = memExpA.Member as PropertyInfo;
    PropertyInfo propB = memExpB.Member as PropertyInfo;

    if (propA == null || propB == null)
        return false;

    return propA.Equals(propB);
} 
```

您可以通过将正确的值类型（而不是）指定为表达式的泛型类型来确保将 lambda 表达式编译为 a`MemberExpression`而不是简单的 a 。`UnaryExpression``object``TResult``Expression<Func<T, TResult>>`

```
Expression<Func<Person, int>> expression1 = x => x.Age;
Expression<Func<Person, int>> expression2 = x => x.Age;
Expression<Func<Person, string>> expression3 = x => x.Name;

Console.WriteLine(IsSameProperty(expression1, expression2));   // True
Console.WriteLine(IsSameProperty(expression1, expression3));   // False 
```

# c# - 使用实体框架的 Code First 在保存时会引发 DbUpdateException

> ID：12975374
> 
> 赞同：3
> 
> 时间：2012-10-19T13:31:07.523
> 
> 标签：c#, database, visual-studio-2010, entity-framework

我正在尝试在 Visual Studio C# 项目中创建我的第一个数据库并向该数据库添加一个实体。我还没有做到这一点。尝试时，我会在`DbUpdateException`调用.`SaveChanges()``DbContext`

我正在尝试保存以下实体：

```
public class TVSeriesReference : Reference
{
} 
```

`TVSeriesReference`除了继承什么都不做`Reference`：

```
public class Reference
{
    /// <summary>
    /// ID of the reference.
    /// </summary>
    public int Id { get; set;  }

    /// <summary>
    /// Reference to the element in theTVDB.
    /// </summary>
    public int TheTVDBId { get; set; }

    /// <summary>
    /// Whether or not the reference has been marked as watched.
    /// </summary>
    public bool IsWatched { get; set; }
} 
```

我正在使用以下上下文：

```
public class Library : DbContext
{
    /// <summary>
    /// Constructor using the base constructor.
    /// This constructor names the database "Library".
    /// </summary>
    public Library() : base("Library")
    {
    }

    /// <summary>
    /// Set of TVSeriesReferences stored in the database.
    /// </summary>
    public DbSet<TVSeriesReference> TVSeriesReferences { get; set; }

    /// <summary>
    /// Set of SeasonReferences stored in the database.
    /// </summary>
    public DbSet<SeasonReference> SeasonReferences { get; set; }

    /// <summary>
    /// Set of EpisodeReferences stored in the database.
    /// </summary>
    public DbSet<EpisodeReference> EpisodeReferences { get; set; }
} 
```

这就是我尝试创建实体并将其保存到数据库的方式。

```
using (var db = new Library())
{
    var reference = new TVSeriesReference
    {
        Id = 2,
        TheTVDBId = 1,
        IsWatched = true
     };

     db.TVSeriesReferences.Add(reference);

     try
     {
         db.SaveChanges();
     }
     catch (DbUpdateException e)
     {
         Debug.WriteLine("\n\n*** {0}\n\n", e.InnerException);
     }
 } 
```

`db.SaveChanges()`将抛出以下异常：

```
System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid object name 'dbo.TVSeriesReferences'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   --- End of inner exception stack trace ---
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Entity.Internal.InternalContext.SaveChanges() 
```

我已经把头发扯了好几个小时了，我不知道我做错了什么。似乎没有创建表（或者可能是整个数据库？）。在此之前我应该​​设置或安装一些东西吗？我已经安装了 NuGet 并通过它安装了实体框架。

有没有人可以帮助我让它工作？

**更新**：连接字符串在`app.config`

```
<connectionStrings>
    <add name="Library"
         connectionString="Data Source=.\SQLEXPRESS"
         providerName="System.Data.SqlServerCe.4.0"/>
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:23:20.920

在使用 Entity Framework *Code First*时，您仍然需要在`app.config`文件中设置正确的 ConnectionString。例如，如果你想在文件中有一个本地数据库，你可以使用嵌入式 SQL Server CE 4 数据库引擎（当然*Code First*可以与许多不同的数据库一起使用，包括 SQL Server、SQL Server Express 和 MySQL）：

```
<connectionStrings> 
    <add name="Library" connectionString="Data Source=|DataDirectory|CodeFirst.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
</connectionStrings> 
```

在运行时，`DataDirectory`替换字符串将替换为应用程序当前执行环境的适当目录路径。如果没有`DataDirectory`替换字符串，您的应用程序将不得不根据当前执行环境以编程方式确定数据库文件的位置，然后动态构建连接字符串中使用的路径。

*Code First*还具有由初始化策略控制的自动重新创建功能。默认初始化策略是[CreateDatabaseIfNotExists](http://msdn.microsoft.com/en-us/library/gg679221%28v=vs.103%29.aspx)。使用此策略，如果您的 ConnectionString 指向的数据库不存在，*Code First*将为您创建数据库，但如果数据库已经存在，*Code First*将不会尝试创建它。

可以使用`Database.SetInitializer()`方法将初始化策略更改为以下之一：

*   [DropCreateDatabaseAlways](http://msdn.microsoft.com/en-us/library/gg679506%28v=vs.103%29.aspx)
*   [DropCreateDatabaseIfModelChanges](http://msdn.microsoft.com/en-us/library/gg679604%28v=vs.103%29.aspx)
*   [将数据库迁移到最新版本](http://msdn.microsoft.com/en-us/library/hh829293%28v=vs.103%29.aspx)

您需要在这里记住，重新创建数据库将导致丢失存储在那里的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:52:55.820

您需要设置数据库初始化程序，然后初始化数据库。由于这是一个新数据库，可能最好的开始是 DropCreateDatabaseAlways 一个。您可以执行以下操作：

```
Database.SetInitializer(new DropCreateDatabaseAlways<Library>());
using(var db = new Library())
{
  db.Database.Initialize(true);
} 
```

正如@tpeczek 所说，在 App.config 中放置一个连接字符串也是一个好主意。

# c# - 从没有 ToShortDateString 的 DateTime 获取日期

> ID：12975381
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:31:43.403
> 
> 标签：c#, datetime

我正在寻找这个大约 2 小时，我没有任何想法了。问题是我有一个 DateTime 对象，我只需要它的日期部分。

我试过

1.  `data.Date`
2.  像这样创建一个新的 DateTime 对象

    `var x = new DateTime(data.Year,data.Months,data.Day)`

3.  我试过这样

    `DateTime.Parse(data.ToString("yyyy-MM-dd"))`

注意：仅获取日期部分后，数据需要保留 DateTime （不是字符串），所以我不能使用`ToShortDateString()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:52:18.770

如果你想要一些对象，女巫总是以`2012-10-10`from 的格式返回日期`.ToString()`，你可以使用这个结构

```
struct Date
{
    private DateTime dateTime;
    public Date(DateTime dateTime)
    {
        this.dateTime = dateTime.Date;
    }

    public override string ToString()
    {
        return dateTime.ToString("yyyy-MM-dd");
    }
} 
```

# html - iPod touch iOS6 - 带有大背景图像的元素显示为空白

> ID：12975384
> 
> 赞同：2
> 
> 时间：2012-10-19T13:32:01.727
> 
> 标签：html, css, ios6, css-sprites, ipod-touch

我已经在两个运行 iOS 6 的独立 iPod touch 设备上重现了这一点。iPhone 似乎没有受到影响，iPad 也没有。

我在我的 Web 应用程序中使用 sprite 文件来存储图像。我现在正在尝试提供视网膜支持，因此我创建了一个单独的视网膜精灵文件，该文件的尺寸是低质量文件的两倍。

似乎 Chrome 和 Safari 都不喜欢显示这个。

我正在执行以下操作： `.img { background: url(xx-retina.png) no-resize top left; height: xx; width: xx; display: block }`

在体内： `<div class='img'/>`

标签的类型无关紧要。我指定的背景位置偏移无关紧要。该图像不会显示，但如果我查看调试工具，它似乎已加载。如果我开始裁剪图像，最终它会出现。

有没有人有这方面的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:58:00.997

我遇到了同样的问题。我已经测试了大型 png-8、png-24 和 gif 图像，它们是否具有透明度并不重要 - 图像不会显示在 iPOD 上。

我也尝试在画布中绘制图像，但它也不起作用。

如果您不需要透明度，您可以将图像设为 jpg - 我使用的最大 jpg 为 14mb，并且仍然可以正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T13:10:06.593

我有同样的问题 - 运行 iOS 6 的第 4 代 iPod Touch 不会显示 phonegap 页面的背景图像。由于我仍然希望较大/高分辨率的设备使用高分辨率图像，所以我所做的是使用媒体查询来更改较小屏幕的背景图像。

```
@media (max-width: 500px) {
    #login {
        background: url(../../splash/640-960.png);
    }
} 
```

对于 OP，您需要使用类似的媒体查询并将图像类设置为使用较小/原始图像：

```
@media (max-width: 500px) {
    .img {
        background: url(xx-non-retina.png) no-resize top left; 
    }
} 
```

我选择了 500px 的最大宽度，因为第 4 代 iPod Touch 的有效分辨率为 320w x 480h，因此横向屏幕宽度将为 480px。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T12:35:57.030

同样的问题发生在我身上。我使用大图像作为网站开头部分的背景。在 iPad 和 iPhone 上，它工作得很好。在 iPod 上，图像根本没有加载。这么奇怪！我已经用大量图像完成了更复杂的网站，但从未遇到过这个问题。

# c# - 在MVC2中获取当前登录用户

> ID：12975386
> 
> 赞同：3
> 
> 时间：2012-10-19T13:32:03.807
> 
> 标签：c#, asp.net-mvc-2

我想为 C# 中的数据库查询获取当前登录的用户名，并尝试查找 ASP“命令” **User.Identity.Name**的 C# 版本。当我搜索它时，我只发现使用**Environment.Username**和类似解决方案获取 Windows 用户名的人 - 这不是我需要的。

所以，我说的是由 VS 中的 ASP 配置对话框创建的帐户，或自动生成的注册功能。我可以注册/登录/注销和一切，所以我猜有某种会话存储我需要的信息。我只是不知道在哪里可以找到它。

我希望我不会那么困惑 :) 有人知道如何从 C# 模型中获取我的会话信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:56:33.230

您可以像在经典 ASP 中一样在 MVC 中获取当前用户的名称，使用`User.Identity.Name`. 整个命名空间是`System.Web.HttpContext.Current.User.Identity.Name`.

如果没有看到您的代码，我无法确定，但我想您不包括`System.Web`，即使您是，您也可能需要指定`HttpContext.Current.User.Identity.Name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:40:50.123

您可以将控制器属性“用户”传递给您的模型。像这样的东西：

```
public ActionResult Index()
{
    IndexModel model = new IndexModel(this.User);
} 
```

# javascript - iPhone Safari 中的详细错误报告？

> ID：12975391
> 
> 赞同：3
> 
> 时间：2012-10-19T13:32:36.837
> 
> 标签：javascript, iphone, error-handling, safari

所以我们在我们的服务器上运行了一个大型的 JS 网络应用程序，其大多数用户在移动浏览器上运行它——主要是 iPhone 上的 Safari。JS 错误是使用 Airbrake Error Catcher 捕获的。然而，调查通过 Airbrake 出现的实时错误是令人沮丧的，因为 Safari 会截断其错误消息。在桌面浏览器上输出如下：

**TypeError：“未定义”不是对象（评估“blah.currency_symbol”）**

在 Safari iPhone 上显示如下：

**“未定义”不是对象**

因此，除非我知道如何或在何处重现错误，否则我无法知道出了什么问题以及在哪里。

长话短说 - 是否有从 Safari iPhone 捕获更多详细错误信息的方法？我使用 try/catch 进行了测试，但该对象仍然只返回了截断的消息。

*（抱歉，如果以前有人问过这个问题，似乎没有搜索得到答案）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:54:34.653

嗯，没有回应，但我认为从我自己的进一步测试来看，答案可能是无法克服的“不”——我做了我能想到的最简单的测试，绑定到错误对象并在回调中捕获错误响应。似乎截断错误（e.message）是 iOS Safari 使用的主要响应形式，甚至对象中的其他标准值（例如文件名或行号）根本没有设置。似乎在对象甚至被传递回控制台之前 Safari 会“有帮助地”截断它:(

# ruby-on-rails-3 - 模型失败后 URL 缺少操作

> ID：12975395
> 
> 赞同：0
> 
> 时间：2012-10-19T13:32:53.640
> 
> 标签：ruby-on-rails-3

我有一个配置文件控制器操作 UPDATE 更新用户的帐户信息。如果模型被认为无效，我想像这样呈现我的 EDIT 操作：

```
if @user.valid?
  #update
else
  render 'edit'
end 
```

EDIT 操作的 URL 是 /my_profile/edit。但是，当*渲染“编辑”*代码在失败时被处理时，即使正确的视图显示有适当的错误，加载的 URL 也是 /my_profile。

当我在 /my_profile/edit 上编辑配置文件时，如何在模型失败时调用 EDIT 操作时加载 URL /my_profile/edit？

以下是当前适用的路线：

```
get 'my_profile' => 'my_profile#show'
get 'my_profile/edit' => 'my_profile#edit', as: 'edit_my_profile'
put 'my_profile' => 'my_profile#update' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:29:55.230

信息：我也是初学者！我认为“渲染”的意思是，只会渲染视图“编辑”。如果您想要一个新请求（这也会更改您的 url 并进入控制器中的编辑操作），您需要一个

```
redirect_to 'edit' 
```

还是我走错路了？

# c# - Windows XP 服务不向.net 应用程序发送参数？

> ID：12975400
> 
> 赞同：0
> 
> 时间：2012-10-19T13:33:06.833
> 
> 标签：c#, .net, windows, windows-services

我创建了一个 Windowx XP 服务并将其指向 C# 应用程序的可执行文件。

右键单击服务并选择属性后，我在“启动参数”框中输入了一个参数，但在 C# 应用程序的第一行中`args[]`不包含任何内容。

当应用程序作为服务执行时，如何将参数传递给应用程序？

# ios - 使 UIButton 背景图像大于框架

> ID：12975413
> 
> 赞同：0
> 
> 时间：2012-10-19T13:34:13.590
> 
> 标签：ios, uibutton

我正在尝试`UIButton`使用背景图像制作一个大于按钮框架的图像。

问题是，`UIButton`自动缩放图像以适应并且没有找到改变行为的方法。

我是否遗漏了一些明显的东西，或者是时候制作一个自定义按钮了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:36:26.193

子类 UIButton 并覆盖

```
- (CGRect)backgroundRectForBounds:(CGRect)bounds; 
```

方法，因此它返回您想要的大小。

提示：也可以使用此方法使背景居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:48:21.550

看起来这个问题的答案是。无法通过`UIButton`.

最简单的实现方法似乎是使用自定义子类`UIButton`并创建`UIImageView`与 相同的帧`UIButton`，关闭剪辑和缩放，然后仅捕获所有`setBackground`方法并捕获状态更改以处理更改背景的“正常”按钮交互图片。

# java - 将 Equinox OSGi 作为 Fedora 服务运行

> ID：12975417
> 
> 赞同：2
> 
> 时间：2012-10-19T13:34:31.470
> 
> 标签：java, unix, service, osgi, fedora

到目前为止，我实现了一个 Fedora 服务，它在机器启动时启动我的 OSGi。我有停止它的问题。当我执行时，我根本不知道如何从我的终端/shell脚本中停止Equinox osgi`service <osgi servicename> stop`

我有一个特定的要求，当我停止 OSGi 时，我想按特定顺序停止捆绑。我写了一个捆绑终止代码，但我如何从 osgi 终端外部调用它？

我尝试使用 telnet，但未获得批准的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:59:43.153

您可以使用[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)的社区版。使用[WrapperStartStopApp](http://wrapper.tanukisoftware.com/doc/english/integrate-start-stop-win.html)或[WrapperListener](http://wrapper.tanukisoftware.com/doc/english/integrate-listener.html)应该满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:46:56.853

最简单的方法是使用[Apache Karaf](http://karaf.apache.org/)。它可以配置为在后台使用 Equinox，并附带可用于启动和停止它的初始化脚本。

使用纯 Equinox，您必须自己实现它。有一个很好的代码项目展示了如何做到这一点。[http://code.google.com/p/equinox-headless-service/](http://code.google.com/p/equinox-headless-service/)

# javascript - jQuery：获取具有特定类的第一行中的第一个单元格？

> ID：12975420
> 
> 赞同：0
> 
> 时间：2012-10-19T13:34:57.637
> 
> 标签：javascript, jquery

我正在使用这个：

```
$('#' + tableID + "tr:first td:first") 
```

得到我的第一个细胞，但有可能第一个细胞不是我想要的。我要查找的单元格是第一行中具有“canEdit”类的第一个单元格。知道如何去做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:36:33.127

只需将相应的类添加到您的选择器中，如下所示：

如果该行必须具有相应的类：

```
$('#' + tableID + " tr.canEdit:first td:first") 
```

或者，如果单元格必须具有类：

```
$('#' + tableID + " tr:first td.canEdit:first") 
```

^(还要注意选择器中“tr”之前添加的空格。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:37:24.887

所以你想要的是我的理解

```
$('#' + tableID + " tr:first td.canEdit:first")
// gets "first cell" in the "first row" that has class edit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:37:00.830

将您的班级添加到选择器中。

```
$('#' + tableID + " tr.canEdit:first td:first") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:38:17.087

向 tr 添加一个类。您还应该限制在 tbody 上，这样它就不会在 thead 或 tfoot 中查找行。

```
$('#' + tableID + " tbody tr.canEdit:first td:first") 
```

# .htaccess - htaccess 服务器域

> ID：12975421
> 
> 赞同：0
> 
> 时间：2012-10-19T13:34:59.100
> 
> 标签：.htaccess

我的 htaccess 文件中有一些简单的重定向。但是，域将会改变......我希望我可以写一些东西来获取域名？

有人建议：

```
 http://%{HTTP_HOST}/ 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:42:43.787

如果您想保留旧域并将所有请求重定向到新域，此说明可能会有所帮助：

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} ^old-domain.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.old-domain.com$ [NC]
RewriteRule ^(.*)$ http://www.new-domain.com/$1 [L,R=301] 
```

将上面的代码`.htaccess`放在`old-domain`.

但是，如果您不担心旧 url 地址或搜索引擎抓取了您的旧页面，则无需这样做，只需将所有数据（包括`.htaccess`文件）移动到新域

# c - 通过更改 C 中的函数调用来节省代码空间

> ID：12975422
> 
> 赞同：-3
> 
> 时间：2012-10-19T13:35:04.153
> 
> 标签：c, null, void-pointers

我正在调用一个通过指针参数返回变量的函数。我不关心这个参数的返回值，**也不想制作一个虚拟变量来传递给函数**。为了一个简单的例子，假设函数如下，我不关心，也不想为参数“d”做一个虚拟变量。

```
void foo(int a, int b, int* c, int* d)
{
*c = a+b;
*d = a+b+*c;
} 
```

我知道 NULL 指针在理论上是指向不是任何对象或函数地址的位置的指针。如果 NULL 被定义如下，那么在这个函数中将 NULL 传递给“d”是否正确？或者这会改变内存中第 0 个元素的内容吗？

```
#define NULL ((void *)0) 
```

目标设备是 MSP430，我使用的是 IAR C。**没有使用操作系统，因此没有实现内存管理**

**编辑：**请注意，我不想创建一个虚拟变量。此外，如果有一种方法可以欺骗编译器以优化“d”参数而不更改函数定义，那么这是可取的。

**编辑#2：**我宁愿不在函数调用中使用 & 运算符，因为它会生成我不想生成的低效代码

**编辑#3：**对于那些在我谈论 & 运算符时不相信我的人......编译器手册指出“避免使用 & 运算符获取局部变量的地址。这效率低下主要有两个原因。首先，变量必须放在内存中，因此不能放在处理器寄存器中。这会导致代码更大更慢。其次，优化器不能再假设局部变量不受函数调用的影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T13:38:10.847

不，这是不正确的。

当您执行此操作时，C 标准没有定义行为。在许多系统上，当尝试存储到地址 0 时会导致错误（某种内存故障）。`foo`如果没有，那么您将数据写入地址 0，可能会覆盖那里可能需要的其他内容，因此您的系统可能会在以后出现故障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:41:06.923

您应该稍微更改您的功能以允许通过`NULL`

```
void foo(int a, int b, int* c, int* d)
{
    if(c != NULL)
    {
       *c = a+b;
       if(d != NULL) 
       {
          *d = a+b+*c;
       }
    }
} 
```

现在可以安全通过了`NULL`。否则，正如其他答案已经说明的那样，您最终会取消引用`NULL`导致未定义行为的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:41:01.487

由于虚拟内存，内存中没有第 0 个元素。但是，如果您尝试这样做，您的程序将因内存异常而崩溃。我假设您想忽略 d 如果它为空，那么只需执行以下操作：

`if(d != NULL) { *d = a+b+*c }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T14:23:46.460

由于您不想创建虚拟变量并且无法更改函数，因此您很可能最终会在设备上的内存位置 0 处乱涂乱画，无论这意味着什么。也许它是一个内存映射硬件寄存器，也许它只是普通的物理内存。

如果它是一个寄存器，那么它可能没有任何作用，除非你将魔法值 4711 写入其中，这将每三个月发生一次，并且设备会停止并着火。（发生在我身上，覆盖设备上的启动eeprom很有趣）

或者如果它是内存，也许你稍后会发送一个 NULL 指针到另一个函数，那个函数会很高兴地读取这个函数在那里写的值，你最终会在早上 5 点扯掉你的头发并大喊“这可以'不可能影响那个！”。（在一些用于映射 NULL 页面的古代 unix 上发生在我身上）

也许您的编译器为您添加了安全网。也许不是。也许下一个版本会。也许下一个硬件版本将在地址 0 处未映射内存，并且设备将停止。

我会在调用函数中创建一个虚拟变量，然后继续处理一个更有趣的问题，但如果你是压力瘾君子，请传递 NULL 并看看会发生什么（今天或 10 年后）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T13:40:01.870

在您的示例中，如果您不关心指针`d`并且按照定义传递 NULL，那么它可能会由于取消引用 NULL 而崩溃。即使您不关心结果，您也应该传递一个有效的指针。

为什么不只是宣布临时并通过？

```
int tempd;    
foo(a,b,&c, &tempd); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T13:41:32.633

有趣的问题！一般来说，NULL 被保留为“无效”地址。你不应该尝试写信给它，但我认为标准没有规定如果你这样做会发生什么。在 Windows 机器上，这将生成访问冲突异常。我不知道你的设备会发生什么。

在任何情况下，传递 NULL 是表明您对 out 参数的值不感兴趣的常用方法。但是你的函数必须意识到这一点并采取相应的行动：

```
if( c ) {
    *c = a+b;

    if( d ) {
        *d = a+b+*c;  
    }
} 
```

**编辑**

如果您无法更改函数定义，那么您可能不走运。如果调用约定是 cdecl，您可以欺骗编译器不传递 d。只需声明不带 d 参数的函数：

```
extern void foo( int a, int b, int * c ); 
```

但是，您肯定会在这里陷入危险的恶作剧领域。函数定义仍然需要 d 参数，所以它会看到随机垃圾。

我能想到的唯一另一件事是传递一个固定地址。由于您正在为特定设备编写内容，因此可能有一个可以安全写入的地址范围。（也就是说，它不会导致异常或损坏实际内存。）

```
void * SafeAddress = (void *)0x12345678;

foo( a, b, &c, SafeAddress ); 
```

当然，最简单的方法是只使用虚拟变量。我知道你不止一次说过这会产生低效的代码，但一定是这样吗？如果虚拟变量是局部变量还是全局变量，会有区别吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T15:43:29.290

该函数尝试将值存储在提供的地址。如果地址无效，那么就会出现某种故障——与**您是否使用操作系统无关**。

要么你必须给函数一些有效的地址（即使你不关心特定情况下的值），或者你必须更改函数以使其不存储值（甚至可能不甚至计算它），如果它的地址为 NULL（在您的平台上可能是也可能不是 0x0，顺便说一句）。

你不断重复，你“不想”做前者，不能做后者。那么，你有一个无法解决的困境。也许，已经存在一些其他地址，像这样的虚拟值可以存储在您的程序（或平台上）中——您可以传递它。

如果没有涉及操作系统，那么您必须处理一些时髦的可编程设备，这意味着您周围应该有经验丰富的 C 程序员。要求他们确认这里告诉你的内容——很明显，你已经不相信几个人给你的答案了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T13:38:22.167

在那个特定的示例代码中，两个传入的指针都被取消引用。取消引用`NULL`是未定义的行为。只需使用虚拟变量即可。

一般来说：如果一个函数接受一个指针，它应该说明空指针是否是参数的有效值。如果它没有说什么，请保持安全，并假设它不是。这会让你免于悲伤。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-19T13:38:04.057

它会尝试在内存位置 0x0 分配一些东西，所以我会说它会崩溃

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-10-19T14:26:44.023

通过声明一个虚拟变量以及一个指向虚拟变量的指针，我能够在不增加堆栈内存使用量的情况下节省代码空间。

```
int  Dummy;
int* Dummy_ptr = &Dummy; 
```

这允许编译器对函数调用进行优化，因为 & 运算符未在函数调用中使用。

电话是现在

```
foo(a, b, c_ptr, Dummy_ptr); 
```

**编辑：**对于那些不相信我的人。我看了看汇编程序。虚拟变量存在于堆栈中，但因为它以后不使用，并且因为它只是函数的返回，所以地址永远不会传递给函数，并且函数中对该变量的任何使用都被优化了。

# ruby - Rails 上的敏捷 Web 开发。10.4 -nil:NilClass 的未定义方法“价格”

> ID：12975428
> 
> 赞同：0
> 
> 时间：2012-10-19T13:35:23.050
> 
> 标签：ruby, ruby-on-rails-3

我被困在这里，似乎在线任何地方都没有答案。练习说：

创建将产品价格复制到行项目的迁移，并更改购物车模型中的 add_product 方法以在创建新行项目时捕获价格。

我的代码：

```
class AddPriceToLineItem < ActiveRecord::Migration
  def self.up
    add_column :line_items, :price, :decimal
    say_with_time "Updating prices..." do
    LineItem.find(:all).each do |li|
      li.update_attribute :price, li.product.price
    end
    end
  end

  def self.down
    remove_column :line_items, :price
  end
end 
```

我也试过：

```
class AddPriceToLineItem < ActiveRecord::Migration
  def self.up
    add_column :line_items, :price, :decimal
    LineItem.all.each do |li|
      li.price = li.product.price
    end
  end

  def self.down
    remove_column :line_items, :price
  end
end 
```

我不断收到此错误：

```
 rake db:migrate
==  AddPriceToLineItem: migrating =============================================
-- add_column(:line_items, :price, :decimal)
   -> 0.0010s
-- Updating prices...
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `price' for nil:NilClass 
```

奇怪的是它说的是 undefined nil:nilClass，因为之前的行中刚刚定义了价格。

我正在使用 rails (3.2.1)，ruby 1.9.3p125。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:39:09.310

这个错误意味着你正在调用`price`的东西是`nil`. 所以我很确定你的一个`LineItem`没有`product`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:03:43.950

我会更具体。在我的情况下，a 有一个 cart_id 和 product_id 为零。

所以我简单地清理了数据库

```
sqlite> DELETE FROM line_items WHERE id= bad_id"; 
```

# javascript - 自定义对象到 JSON 然后返回到自定义对象？

> ID：12975430
> 
> 赞同：7
> 
> 时间：2012-10-19T13:35:24.450
> 
> 标签：javascript, json, object

我已经看到了与此非常相似的问题，但我不能完全确定它们是否得到了明确的回答——也许我有点密集，抱歉。

我想拥有我自己的对象的便利（和清晰），称之为`CardboardBox()`. 它不包含代码，只包含数据。我想将其写入数据库并稍后再读回，但显然，`Object()`当它被读回时，它是一种类型。我能想到的要找出它曾经是什么是：

1.  `type`有一个我设置为 CARDBOARD_BOX的成员变量
2.  实例化一个新对象`CarbardBox()`并使用一个函数（在框中）将其属性复制`Object()`到新`CardboardBox()`对象

有没有更好的方法来做到这一点？我很确定我可以更改*实际*类型。

```
function CardboardBox() { 
  this.type = "CARDBOARD_BOX"
  this.name = "No set";
  this.populate = new function(obj) {
    // populate this object with obj properties 
}

var box = new CarboardBox();  // CarboardBox
box.name = "My Box";
send = JSON.stringyfy(box);   
.
.
.
obj = JSON.parse(send);    // Object

if (obj.type == "CARDBOARD_BOX") {
  savedBox = new CardboardBox();
  savedBox.populate(obj);
} 
```

在此先感谢...史蒂夫

[编辑] 我的测试代码。

```
function CardboardBox(n) {
  this.name = n;
}

var box = new CardboardBox("My Box");
send = JSON.stringify(box); // JSON CarboardBox()

obj = JSON.parse(send, function fn(obj) { // Object() returned
  log("OB: "+obj.type);
  return obj.type === 'CardboardBox' ? new CardboardBox(obj) : CardboardBox; 
});     
console.log(obj); 
```

输出是：

```
OB: undefined utils.js:40
OB: undefined utils.js:40
function CardboardBox(n) {
    this.name = n;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:42:52.093

一种可能的解决方案如下：

```
function CardboardBox(n) {
  if(typeof(n) == 'string') {
    //build from name string
    this.name = n;
  } else {
    //build from object
    this.name = n.name;
  }

  //add in this object's "type" in a place
  //that is unlikely to exist in other JSON strings
  this.__type = 'CardboardBox';
}

var box = new CardboardBox("My Box");
send = JSON.stringify(box), // JSON CarboardBox()
obj = JSON.parse(send, function(key, val) {
  //if this is an object, and is CardboardBox
  if(typeof(val) === 'object' && val.__type === 'CardboardBox')
      return new CardboardBox(val);

  return val;

  //or if your object is in a context (like window), and there are many of
  //them that could be in there, you can do:
  //
  //if(typeof(val) === 'object' && context[val.__type])
  //    return new context[val.__type](val);
});

console.log(obj); 
```

基本上将对象类型存储在您知道以后在解析 json 时查找的位置。如果您有多个对象，则可以在单个范围内实例化第二种 parse 方法可能更合适。这也将解释 JSON 中*不是* `CarboardBox`s 的对象。

**编辑**这里是这个方法的一个[jsFiddle](http://jsfiddle.net/uK3ek/6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:56:43.413

总的来说，您是对的：Javascript 没有任何内置方法可以序列化普通对象之外的任何内容，因此在反序列化 JSON 时往返不会产生特定的类。因此，您需要自己进行序列化/反序列化，或者使用提供一些支持的库。

对于这个问题，我个人喜欢[Backbone.js](http://backbonejs.org/)，因为它可以很好地处理序列化和反序列化。您定义了一个模型类，其中包括一个以序列化形式将其数据保存到服务器的方法，以及一个将其反序列化回模型的方法。这里的关键设计问题是在*知道*您要反序列化到的模型的情况下执行反序列化：

*   您要么调用`myModel.fetch()`以根据模型 ID 从服务器获取数据，要么
*   您将一堆新数据传递给模型构造函数：`new Model(serializedData)`，或
*   您将多个模型的数据数组传递给知道模型类型的集合：`new ModelCollection(arrayOfSerializedData)`。

Backbone 不做的是处理未知类型的类型转换数据。当我处理完这个问题时，我通常会做一些类似于@Chad 的回应，但使用了中间人；您可以将其视为代理模型或工厂：

```
var classes = {
    CardboardBox: ...,
    AluminumBox: ...
}

function Deserializer(json) {
    // parse if you're actually dealing with a string
    var data = JSON.parse(json),
        // now look for some custom type flag - you'll need to set this yourself
        type = data.type,
        // class lookup, perhaps with a default
        Cls = classes[type] || DefaultType;
    return new Cls(data);
}

var obj = new Deserializer(send);
obj instanceof CardboardBox; // should work 
```

不过，这仍然依赖于自定义标志来切换类型 - 我不确定有什么办法可以解决这个问题。

# c#-4.0 - 使用 VDS 创建 UEFI 分区

> ID：12975436
> 
> 赞同：3
> 
> 时间：2012-10-19T13:35:55.870
> 
> 标签：c#-4.0, wmi, vds, uefi

我正在尝试使用该[`IVdsCreatePartitionEx::CreatePartitionEx`](https://docs.microsoft.com/en-us/windows/win32/api/vds/nf-vds-ivdscreatepartitionex-createpartitionex)方法创建 UEFI 分区。

在[`CREATE_PARTITION_PARAMETERS`](https://docs.microsoft.com/en-us/windows/win32/api/vds/ns-vds-create_partition_parameters)结构参数中，我将`PARTITION_SYSTEM_GUID`(c12a7328-f81f-11d2-ba4b-00a0c93ec93b) 作为属性传递，将`partitionType`( `GPT_BASIC_DATA_ATTRIBUTE_NO_DRIVE_LETTER`0x8000000000000000) 作为属性传递。

但是我得到了一个类型为 c12a0000-f81f-11d2-ba4b-00a0c93ec93b 的未知分区。

[![DISKPART 的屏幕截图显示错误](../Images/0913524bd1ddb9967ff8a220037d8543.png)](https://i.stack.imgur.com/rEpK0.png) .

任何想法这里可能有什么问题？

我还尝试在 Win8 上使用 WMI 创建 UEFI 分区。但我得到错误值 41010 - 指定的分区类型无效。这是我的代码

```
static void Main(string[] args)
{
    try
    {
        var scope = new ManagementScope(@"\\.\Root\Microsoft\Windows\Storage");
        scope.Connect();

        const string query = "SELECT * FROM MSFT_Disk WHERE Number = 7";
        var objectQuery = new ObjectQuery(query);
        var seacher = new ManagementObjectSearcher(scope, objectQuery);
        var disks = seacher.Get();

        var disk = disks.Cast<ManagementObject>().FirstOrDefault();

        if (disk == null)
        {
            throw new NoNullAllowedException("Disk is null");
        }

        var parameters = disk.GetMethodParameters("CreatePartition");
        FillInvocationParameters(parameters, new Dictionary<string, object> { { "Size", 104857600 }, { "Offset", 5ul * 1024 * 1024 * 1024 }, { "Alignment", 512 }, { "AssignDriveLetter", false }, { "GptType", "c12a7328-f81f-11d2-ba4b-00a0c93ec93b" }, { "IsHidden", false } });

        var result = disk.InvokeMethod("CreatePartition", parameters, null);
        var returnValue = result["ReturnValue"];
    }
    catch (Exception exception)
    {
        Debug.Fail(exception.Message);
    }
}
static void FillInvocationParameters(ManagementBaseObject invokeParameters, IDictionary<string, object> parameters)
{
    foreach (var pair in parameters)
    {
        string stringParamValue;

        var managementObjectParam = pair.Value as ManagementObject;
        var arrayParam = pair.Value as string[];

        if (managementObjectParam != null)
        {
            stringParamValue = managementObjectParam.GetText(TextFormat.CimDtd20);
            invokeParameters[pair.Key] = stringParamValue;
        }
        else if (arrayParam != null)
        {
            invokeParameters[pair.Key] = arrayParam;
        }
        else if (pair.Value != null)
        {
            stringParamValue = pair.Value.ToString();
            invokeParameters[pair.Key] = stringParamValue;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:35:42.273

我终于使用 VDS 解决了这个问题：我使用 IVdsPack::CreateVolume() 创建了卷，收到了它的分区，使用 IVdsAdvancedDisk::FormatPartition() 将其格式化为 Fat32 并使用 IVdsAdvancedDisk2::ChangePartitionType() 更改了 PartitionType

# iphone - xcode - 如何以正确的方式从 xml 加载图像？

> ID：12975439
> 
> 赞同：0
> 
> 时间：2012-10-19T13:36:09.780
> 
> 标签：iphone, xml, xcode, uitableview

我对 xcode na objective-c 很陌生，所以我很抱歉这个愚蠢的问题。我要做的是根据id将图像加载到UITableView中的单元格。xml 中的每个对象都有 id 和图像名称 id id.jpg。我完成了正确加载它们但是当我滚动图像时消失了。根据我的发现，它看起来与 dequeueReusableCellWithIdentifier 有关，但我无法弄清楚它是什么。这是我用来加载图像的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    theList = [app.listArray objectAtIndex:indexPath.row];

    NSString *trimmedString = [theList.t_image stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    cell.imageView.image = [UIImage imageNamed:trimmedString];
    cell.textLabel.text = theList.t_name;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    if(cell.imageView.image == nil){
        cell.imageView.image = [UIImage imageNamed:@"untitled.jpg"];
    }

    return cell;
} 
```

这是xml：

```
<taxis>
<taxi>
<t_id>1</t_id>
<t_image>1.jpg</t_image>
<t_name>AAA Taxi</t_name>
<t_tel>+42014014</t_tel>
<t_addr>Vodičkova 40</t_addr>
<t_web>www.radiotaxiaaa.cz</t_web>
<t_getin>40</t_getin>
<t_km>26.9</t_km>
<t_wait>5</t_wait>
<t_city>Praha</t_city>
</taxi>
<taxi>
<t_id>2</t_id>
<t_image>2.jpg</t_image>
<t_name>Modrý anděl</t_name>
<t_tel>+420737222333</t_tel>
<t_addr>Cukrovarská 33</t_addr>
<t_web>www.modryandel.cz</t_web>
<t_getin>40</t_getin>
<t_km>19</t_km>
<t_wait>6</t_wait>
<t_city>Praha</t_city>
</taxi>
</taxis> 
```

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:59:56.330

所有行都有图片吗？如果不确定在方法的开头将 cell.imageView 设置为 nil 之后

```
if(cell == nil){
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
} 
```

`UPDATE`：如果我是你，我会将图像缓存在一个数组中并在 cellforrowatindexpath 方法中从这个数组加载它们。试试这个我可能会工作。注意你不能将 nil 作为对象添加到 NSmutablearray 所以你需要添加另一个值而不是nil 和 UIimage

# java - Bitmap.decodeResource 调整图像大小

> ID：12975444
> 
> 赞同：2
> 
> 时间：2012-10-19T13:36:39.530
> 
> 标签：java, android, bitmap

我有这种方法，我在图像上绘制一些文本：

```
public BitmapDrawable writeOnDrawable(int drawableId, String text){

        Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId);

        Typeface mFace = Typeface.createFromAsset(this.getAssets(),"fonts/progbot.ttf");

        Paint paint = new Paint(); 
        paint.setStyle(Style.FILL);  
        paint.setColor(Color.RED); 
        paint.setTypeface(mFace);
        paint.setTextSize(30); 

        Canvas canvas = new Canvas(bm);
        canvas.drawText(text, 0, bm.getHeight()/2, paint);

        return new BitmapDrawable(bm);
    } 
```

这就是我调用此方法的方式：

```
lineIconView.setImageDrawable(writeOnDrawable(R.drawable.icon_line_numbre, linea.getNumero())); 
```

这个 ImageView ( `lineIconView`) 已经有`R.drawable.icon_line_numbre`资源集。如果我不调用该`writeOnDrawable`函数，则图像会以其原始大小显示，但在调用它之后，图像的大小会大大减小。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:16:18.593

原来我为 BitmapDrawable 使用了错误的构造函数。

官方文档对此事说如下：

> BitmapDrawable(Bitmap bitmap) 此构造函数已弃用。使用 BitmapDrawable(Resources, Bitmap) 确保可绘制对象已正确设置其目标密度。

所以我最终使用：

```
return new BitmapDrawable(bm); 
```

# html - Phonegap 文件编写器不起作用，无法截断文件内容

> ID：12975451
> 
> 赞同：2
> 
> 时间：2012-10-19T13:36:53.373
> 
> 标签：html, cordova, jquery-mobile

我正在使用 phonegap 文件读取功能，一旦我阅读了内容，我将对该内容执行一些功能，一旦完成，我将调用文件截断功能。因为我不能截断任何值。帮我解决这个问题。

```
removeFileContent();

function removeFileContent(){
    console.log("Inside remove file content");
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFileTruncate, onProcessFailure);
};

function gotFileTruncate(fileSystem){
    console.log("Inside get file path for remove content");
    /** Function to get file path */
    filePath = getFilePath(device.platform);
    console.log("Device File Path to remove content-->"+this.filePath);
    fileSystem.root.getFile(filePath, null, gotFileEntryTruncate, onProcessFailure);
}

function gotFileEntryTruncate(fileEntry){
    globals.raiseLog("Inside file to truncate call");
    globals.raiseLog("File Name-->"+fileEntry.name);
    fileEntry.createWriter(gotFileWriter, onProcessFailure);
}

function gotFileWriter(writer){
    globals.raiseLog("Inside file writer to truncate file content");
    globals.raiseLog("Content length-->"+writer.length);
    //writer.truncate(10);
    writer.onwriteend = function(evt) {
        writer.truncate(0);
        writer.onwriteend = function(evt) {
        };
    };
    writer.write("");
    globals.raiseLog("Content length after truncate-->"+writer.length);
} 
```

在上面的 gotFileWriter() 中，如果我检查 writer.length 它仍然显示一些计数。我不知道我们为什么可以检查文件是否为空。我在该文件中有一些文本。当我完成文件的读取时需要清除文件。完成阅读功能后，我正在调用 removeFileContent()。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:51:21.120

编写代码的方式可能会导致文件仍然包含内容的误报。移动您的：

```
globals.raiseLog("Content length after truncate-->"+writer.length); 
```

进入您的 onwriteend 函数，因为 write 调用是异步的，并且在打印日志之前可能无法完成。

# jsp - 我应该如何正确地在 jsp 页面中包含其他 jsp 页面？

> ID：12975453
> 
> 赞同：1
> 
> 时间：2012-10-19T13:36:55.210
> 
> 标签：jsp, include

我现在正在尝试用jsp做一个小网站，就像大多数索引页面一样，我网站的索引页面将包括一些部分：顶部（包含徽标和菜单），主要部分，底部部分。为了避免在索引页面中填充过多的 html 标签，也许包含页面会是一个好主意。

经过搜索，我知道包含jsp页面有两种方法：use `<%@ include file=""%>`or`<jsp:include page="">`和我知道它们之间有一些区别，但是我仍然遇到包含页面的一些问题。

如果我有一个`index.jsp`并且`top.jsp`我想包含`top.jsp`在`index.jsp`.

`index.jsp`像这样：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>title</title>
<style type="text/css">
  body {background-color:black;margin:0px;padding:0px;}
  #left,#right {width:10%;margin:0px;padding:0px;}
  #left,#center,#right {float:left;}
  #center {width:80%;}
  #top {height:150px;}
  #main {height:600px;background-color:white;}
</style>
</head>

<body>
<div id="left">&nbsp;</div>
<div id="center">
  <div id="top"><jsp:include page="top.jsp"/></div>
  <div id="main"></div>
  <div id="bottom"></div>
</div>
<div id="right">&nbsp;</div>
</body>
</html> 
```

`top.jsp`像这样：

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body>  
<div id="logo"><img width="80px" height="65px" src="images/logo.jpg"></div>
<div id="menu">
<p>
  <a href="">hello</a>
  <a href="">work</a>
  <a href="">contact me</a>
</p>
</div>
</body>
</html> 
```

我的问题如下：

1.无论我使用这两种方法中的哪一种，我在浏览器中点击“查看源代码”，我得到这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>title</title>
<style type="text/css">
  body {background-color:black;margin:0px;padding:0px;}
  #left,#right {width:10%;margin:0px;padding:0px;}
  #left,#center,#right {float:left;}
  #center {width:80%;}
  #top {height:150px;}
  #main {height:600px;background-color:white;}
</style>
</head>

<body>
<div id="left">&nbsp;</div>
<div id="center">
  <div id="top"><html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body>  
<div id="logo"><img width="80px" height="65px" src="images/logo.jpg"></div>
<div id="menu">
<p>
  <a href="">hello</a>
  <a href="">work</a>
  <a href="">contact me</a>
</p>
</div>
</body>
</html>
</div>
  <div id="main"></div>
  <div id="bottom"></div>
</div>
<div id="right">&nbsp;</div>
</body>
</html> 
```

`top.jsp`包含头中的内容的代码出现在 中`index.jsp`，我想也许我犯了一些错误，它应该是这样的。

2.如果我只写一些这样的标签：

```
<div id="logo"><img width="80px" height="65px" src="images/logo.jpg"></div>
<div id="menu">
<p>
  <a href="">hello</a>
  <a href="">work</a>
  <a href="">contact me</a>
</p>
</div> 
```

那么如果代码中包含一些“ISO-8859-1”不支持的字符，myeclipse会报错信息对话框。那么我应该如何正确地包含一个jsp页面呢？谢谢！

刘鹏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:42:33.030

JSP 不会`<html><head><body>`在`<jsp:include>`. 它只包括未修改的所有输出。如果您需要自动删除不相关的 HTML 元素，您应该使用具有模板功能的视图技术，例如 JSP 的继任者 Facelets，或者诸如 Velocity、Freemarker 等一些 3rd 方库。

您确实**只**`top.jsp`需要包含您真正需要在最终 HTML 产品中准确位于父页面中声明的位置的内容。只是远离。**`<jsp:include>``<html><head><body>``top.jsp`**

 **至于字符编码问题，这是另一回事，与是否包含JSP*无关。*您只需要在`<%@page pageEncoding="UTF-8" %>`每个 JSP 的顶部添加一个来告诉容器它应该使用给定的字符编码来处理 JSP。UTF-8 是事实上的标准，涵盖了人类所知道的每一个字符。为了防止在每个 JSP 上重复同一行，请将其添加到`web.xml`：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:59:10.793

试试这个：这就像复制和粘贴一样。

在所有页面中添加：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

并且在顶部和底部是页眉和页脚页面，只要正文内容就足够了。不要键入html标签，只要事情就足够了。

要在主页中导入页眉和页脚，请执行以下代码：

```
<html>
<head>
</head>
<body>
<jsp:include page="/head.jsp" />
my body content
<jsp:include page="/foot.jsp" />
</body>
</html> 
```

您也可以在 head 中导入 css 和 js。**

# sql - SQL Server 2008：在包含单词 World 的表中查找字符串

> ID：12975454
> 
> 赞同：0
> 
> 时间：2012-10-19T13:36:56.963
> 
> 标签：sql, database, sql-server-2008

我正在尝试过滤我的查询以仅显示带有单词 WORLD 的表条目，并且还包含其他国家/地区代码。

我使用了通配符功能，但我不确定如何让它只返回包含 WORLD 和其他国家代码的条目。

```
SELECT *
FROM [****].[dbo].[Titles]
WHERE Territories LIKE '%world%' 
```

任何帮助表示赞赏

编辑：预期结果将返回字段中同时包含 WORLD 和一个或多个国家/地区代码的所有行。此表中的区域列包含世界或国家/地区代码，并且机器人应该同时包含两者。我运行此查询的原因是搜索任何包含错误数据的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:42:25.090

你可以试试这样的

```
SELECT *
FROM [****].[dbo].[Titles]
WHERE Territories LIKE '%world%'
AND Territories LIKE '%countryCode%' 
```

但我不确定这会有多快。如果您知道其他国家/地区代码将始终位于世界代码之后，您可以执行以下操作

```
SELECT *
FROM [****].[dbo].[Titles]
WHERE Territories LIKE '%world%countryCode%' 
```

我认为应该跑得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:40:13.840

好吧，如果它可以包含其他国家/地区代码和世界，那么您需要

```
WHERE Territories LIKE '%world%' AND Territories LIKE '%{other country code}%' 
```

如果您正在查看您需要的世界或其他国家/地区代码

```
WHERE Territories LIKE '%world%' OR Territories LIKE '%{other country code}%' 
```

# python - 使用异常处理程序扩展默认方法的功能（以 Python 为例）

> ID：12975456
> 
> 赞同：2
> 
> 时间：2012-10-19T13:36:59.880
> 
> 标签：python, exception-handling

所以，我是编程新手，我的问题是：

使用异常处理程序来覆盖具有自定义功能的编程语言的默认方法的错误消息行为是否被认为是一种**不好的做法？**我的意思是，使用这样的东西（Python）在道德上是否正确：

```
def index(p, val):
    try:
        return p.index(val)
    except ValueError:
        return -1 
```

也许我不够精确。我的意思是：将抛出的异常（好吧，我想它并不适用于所有地方）视为合法和有效的案例陈述是正常的还是不推荐的做法？

就像，上面给出的示例的想法不是制作自定义错误消息，而是在不警告用户或其他程序模块出现问题的情况下抑制可能发生的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:39:45.167

我认为只要你使用函数名称来明确用户没有使用内置函数，就可以这样做。如果用户认为他们正在使用内置函数并且突然`index`返回 -1，想象一下可能发生的错误......他们这样做：

```
a[index(a,'foo')] 
```

突然之间，他们得到了列表中的最后一个元素（不是`foo`）。

* * *

不过，作为一个非常重要的规则，*仅处理您知道如何处理的异常*。你上面的例子很好地做到了这一点。荣誉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:40:44.527

如果您确切知道错误将发生在哪里以及错误的原因，那么这种处理就没有错。因为您只是对发生的错误采取适当的行动，您知道可能会发生。

所以，`For E.g`: - 如果您尝试将两个数字相除，并且您知道`if the denominator is 0`，那么您就不能相除，那么在这种情况下，您可以使用自定义消息来表示问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:39:24.320

这很好，但取决于您正在检查的条件类型。检查这些条件是开发人员的责任。有些异常对程序来说是致命的，有些则可能不是。一切都取决于方法的上下文。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:40:09.380

`ValueError`对于像 python 这样的语言，我认为为函数提供自定义错误消息比通用异常要好得多。但是，对于您自己的应用程序，在您的方法中包含此功能可以使代码更易于阅读和维护。

对于其他语言，情况也是如此，但您应该尝试确保在隐藏异常的同时不要模仿具有不同行为的另一个函数。

# java - ListSelectionListener 调用了两次

> ID：12975460
> 
> 赞同：28
> 
> 时间：2012-10-19T13:37:14.883
> 
> 标签：java, swing, jlist, listselectionlistener

```
class MyListListener implements ListSelectionListener {

      public void valueChanged (ListSelectionEvent e) {
           JList source = (JList) e.getSource();
           // do something
      }
}

JList myList = new JList (myModel);  
myList.addListSelectionListener (new MyListListener()); 
```

我正在做一些非常简单的事情。我有一个 JList。如果选择了列表中的项目，则调用处理程序。问题是当我从一个项目转到另一个项目时，处理程序被调用了两次。如果第一个触发器传递原始选定项目，而第二个触发器传递新项目，我可以看到它的用途。但两次都通过了相同的新项目。那有什么意义呢？有没有办法防止处理程序被调用两次？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-19T13:40:10.590

[`e.getValueIsAdjusting`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/ListSelectionEvent.html#getValueIsAdjusting%28%29)就是你要找的。如该方法的javadoc中所述

> 返回这是否是一系列多个事件中的一个，其中仍在进行更改

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T13:41:07.740

[这是正常的方式，您必须使用getValueIsAdjusting()](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/ListSelectionEvent.html#getValueIsAdjusting%28%29)方法进行过滤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-23T06:20:46.130

如果你真的想防止这种情况，试试这个：

```
 public void valueChanged (ListSelectionEvent e) {
       JList source = (JList) e.getSource();
       if(!e.getValueIsAdjusting()){
           // do something
       }
  } 
```

# c# - 获取另一个应用程序窗口的位图

> ID：12975463
> 
> 赞同：1
> 
> 时间：2012-10-19T13:37:24.713
> 
> 标签：c#, windows, winapi, windows-xp

试图在 Windows XP 中获取另一个应用程序窗口的图像。

由于 DWMRegisterThumbnail API，我可以在 Windows 7 中执行此操作，并且可以完美运行。但是，在 Windows XP 中没有 DWM api，因此我依赖 PrintWindow。

此应用程序为每个“菜单”打开新窗口（每次按下其 UI 上的按钮时），因此您必须重新枚举其所有窗口以找到最新的窗口（事实上，FindWindow 无论如何都会返回最新的窗口）。但是，它确实在某些时候崩溃了，可能是因为我的应用程序仍然有一个旧窗口的句柄？

这是我当前的代码：

```
if (garminHwnd == IntPtr.Zero)
            return;
        garminHwnd = FindWindow("CDP_FIELD_WND", String.Empty);
        IntPtr hdc = GetWindowDC(garminHwnd);
        if (hdc != IntPtr.Zero)
        {

            Graphics memoryGraphics = Graphics.FromImage(bmp);
            IntPtr dc = memoryGraphics.GetHdc();
            bool success = PrintWindow(garminHwnd, dc, 0);
            memoryGraphics.ReleaseHdc(dc);
       } 
```

“bmp”是一个位图，目前只显示在一个图片框中。这运行大约 1/秒。

有没有更有吸引力/更简单的方法来做我正在做的事情？

# scala - 玩！2 scala：在控制器代码中适当地向表单添加错误

> ID：12975465
> 
> 赞同：5
> 
> 时间：2012-10-19T13:37:27.757
> 
> 标签：scala, validation, playframework-2.0

我对输入数据进行了一些验证，我真的希望在控制器代码中处理这些数据，因为：

1.  它仅适用于非常特定的情况，因此`verifying`在表单定义中使函数混乱会降低代码凝聚力。
2.  它产生了我需要在控制器的其他地方使用的附带结果。

什么是一种干净的方式来产生一个新的，就像刚刚在 的分支中`Form`绑定了一个额外的（字段或一般）错误消息？`success``Form.fold`

为了说明，我想要`Form.withError`我在这里调用的（不存在的）方法：

```
val form= myForm.bindFromRequest
form.fold(
  errors => BadRequest(view(errors))
  {
    case(data, button) =>
      button match {
        case Some("save") =>
          val r= costlyFunction(data)
          if (r.isOk) {
            doSomethingWith(r)
            Ok(...)
          }
          else {
            val f= form.withError("my custom error")
            BadRequest(view(f))
          }
        case ...
      }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:42:26.830

自己找到的：

```
val f= Form(form.mapping, form.data, 
  Seq(new play.api.data.FormError("error.key", "my error")), form.value) 
```

为噪音道歉——把它留在这里，以防其他人像我一样被卡住。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T14:05:26.947

较短的替代方案：

`val f= form.withError("error.key", "my error")), form.value)`

# java - Tomcat 在加载 XML bean 定义时挂起

> ID：12975468
> 
> 赞同：0
> 
> 时间：2012-10-19T13:37:40.177
> 
> 标签：java, tomcat6, war

我创建了我的应用程序的 War 文件，该文件在我的本地 tomcat 中运行得很好。

现在，当我在服务器 Tomcat 上部署这个 WAR 文件时，它停止加载 XML bean 定义，Tomcat 在此之后挂起，所以我必须终止进程。如何解决错误。

```
INFO: Initializing Coyote HTTP/1.1 on http-8080
Oct 19, 2012 1:09:03 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 812 ms
Oct 19, 2012 1:09:03 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Oct 19, 2012 1:09:03 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
Oct 19, 2012 1:09:03 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor manager.xml
Oct 19, 2012 1:09:03 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor host-manager.xml
Oct 19, 2012 1:09:03 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory docs
Oct 19, 2012 1:09:03 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory bms
2012-10-19 13:09:04,654 INFO  [main] [org.springframework.web.context.ContextLoader] Root WebApplicationContext: initialization started
2012-10-19 13:09:04,851 INFO  [main] [org.springframework.web.context.support.XmlWebApplicationContext] Refreshing Root WebApplicationContext: startup date [Fri Oct 19 13:09:04 UTC 2012]; root of context hierarchy
2012-10-19 13:09:04,981 INFO  [main] [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/application-context.xml] 
```

对于这个 jstack 是：

```
2012-10-19 15:06:35
Full thread dump Java HotSpot(TM) Client VM (20.2-b06 mixed mode, sharing):

"Attach Listener" daemon prio=10 tid=0x0881b000 nid=0x55f waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"GC Daemon" daemon prio=10 tid=0xb4568000 nid=0x527 in Object.wait() [0xb43df000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x8436f6d8> (a sun.misc.GC$LatencyLock)
    at sun.misc.GC$Daemon.run(GC.java:100)
    - locked <0x8436f6d8> (a sun.misc.GC$LatencyLock)

   Locked ownable synchronizers:
    - None

"Low Memory Detector" daemon prio=10 tid=0xb4500c00 nid=0x525 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C1 CompilerThread0" daemon prio=10 tid=0x08780c00 nid=0x524 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Signal Dispatcher" daemon prio=10 tid=0x0877f400 nid=0x523 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Finalizer" daemon prio=10 tid=0x0877bc00 nid=0x522 in Object.wait() [0xb4727000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x842ce0e8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x842ce0e8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

   Locked ownable synchronizers:
    - None

"Reference Handler" daemon prio=10 tid=0x08777000 nid=0x521 in Object.wait() [0xb4777000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x842ce178> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x842ce178> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
    - None

"main" prio=10 tid=0x08749000 nid=0x51f runnable [0xb6c4a000]
   java.lang.Thread.State: RUNNABLE
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOM.processElement(SchemaDOM.java:132)
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOM.startElement(SchemaDOM.java:64)
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.startElement(SchemaDOMParser.java:251)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:435)
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:491)
    at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:510)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:1802)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:531)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:552)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2437)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1782)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:725)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    - locked <0x7f220340> (a java.lang.Object)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    - locked <0x844b8038> (a org.apache.catalina.core.StandardContext)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    - locked <0x8435bac8> (a java.util.HashMap)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
    - locked <0x8435ba28> (a org.apache.catalina.core.StandardHost)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    - locked <0x8435ba28> (a org.apache.catalina.core.StandardHost)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    - locked <0x84348558> (a org.apache.catalina.core.StandardEngine)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    - locked <0x84348558> (a org.apache.catalina.core.StandardEngine)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    - locked <0x843609a0> (a [Lorg.apache.catalina.Service;)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

   Locked ownable synchronizers:
    - None

"VM Thread" prio=10 tid=0x0876cc00 nid=0x520 runnable

"VM Periodic Task Thread" prio=10 tid=0xb4503400 nid=0x526 waiting on condition

JNI global references: 1296 
```

和 jstack -F

```
Attaching to process ID 1305, please wait...
Debugger attached successfully.
Client compiler detected.
JVM version is 20.2-b06
Deadlock Detection:

No deadlocks found.

Thread 1375: (state = BLOCKED)

Thread 1319: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - sun.misc.GC$Daemon.run() @bci=51, line=100 (Interpreted frame)

Attaching to process ID 1305, please wait...
Debugger attached successfully.
Client compiler detected.
JVM version is 20.2-b06
Deadlock Detection:

No deadlocks found.

Thread 1375: (state = BLOCKED)

Thread 1319: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - sun.misc.GC$Daemon.run() @bci=51, line=100 (Interpreted frame)

Thread 1315: (state = BLOCKED)

Thread 1314: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - java.lang.ref.ReferenceQueue.remove(long) @bci=44, line=118 (Interpreted frame)
 - java.lang.ref.ReferenceQueue.remove() @bci=2, line=134 (Interpreted frame)
 - java.lang.ref.Finalizer$FinalizerThread.run() @bci=3, line=159 (Interpreted frame)

Thread 1313: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)
 - java.lang.ref.Reference$ReferenceHandler.run() @bci=46, line=116 (Interpreted frame)

Thread 1311: (state = BLOCKED)
Error occurred during stack walking:
sun.jvm.hotspot.utilities.AssertionFailure: overflow
    at sun.jvm.hotspot.utilities.Assert.that(Assert.java:32)
    at sun.jvm.hotspot.compiler.OopMapSet.updateRegisterMap(OopMapSet.java:267)
    at sun.jvm.hotspot.runtime.x86.X86Frame.senderForCompiledFrame(X86Frame.java:354)
    at sun.jvm.hotspot.runtime.x86.X86Frame.sender(X86Frame.java:283)
    at sun.jvm.hotspot.runtime.Frame.sender(Frame.java:194)
    at sun.jvm.hotspot.runtime.VFrame.newVFrame(VFrame.java:83)
    at sun.jvm.hotspot.runtime.JavaThread.getLastJavaVFrameDbg(JavaThread.java:228)
    at sun.jvm.hotspot.tools.StackTrace.run(StackTrace.java:76)
    at sun.jvm.hotspot.tools.StackTrace.run(StackTrace.java:45)
    at sun.jvm.hotspot.tools.JStack.run(JStack.java:60)
    at sun.jvm.hotspot.tools.Tool.start(Tool.java:221)
    at sun.jvm.hotspot.tools.JStack.main(JStack.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.tools.jstack.JStack.runJStackTool(JStack.java:118)
    at sun.tools.jstack.JStack.main(JStack.java:84)

Thread 1315: (state = BLOCKED)

Thread 1314: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - java.lang.ref.ReferenceQueue.remove(long) @bci=44, line=118 (Interpreted frame)
 - java.lang.ref.ReferenceQueue.remove() @bci=2, line=134 (Interpreted frame)
 - java.lang.ref.Finalizer$FinalizerThread.run() @bci=3, line=159 (Interpreted frame)

Thread 1313: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
 - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)
 - java.lang.ref.Reference$ReferenceHandler.run() @bci=46, line=116 (Interpreted frame)

Thread 1311: (state = BLOCKED)
Error occurred during stack walking:
sun.jvm.hotspot.utilities.AssertionFailure: overflow
    at sun.jvm.hotspot.utilities.Assert.that(Assert.java:32)
    at sun.jvm.hotspot.compiler.OopMapSet.updateRegisterMap(OopMapSet.java:267)
    at sun.jvm.hotspot.runtime.x86.X86Frame.senderForCompiledFrame(X86Frame.java:354)
    at sun.jvm.hotspot.runtime.x86.X86Frame.sender(X86Frame.java:283)
    at sun.jvm.hotspot.runtime.Frame.sender(Frame.java:194)
    at sun.jvm.hotspot.runtime.VFrame.newVFrame(VFrame.java:83)
    at sun.jvm.hotspot.runtime.JavaThread.getLastJavaVFrameDbg(JavaThread.java:228)
    at sun.jvm.hotspot.tools.StackTrace.run(StackTrace.java:76)
    at sun.jvm.hotspot.tools.StackTrace.run(StackTrace.java:45)
    at sun.jvm.hotspot.tools.JStack.run(JStack.java:60)
    at sun.jvm.hotspot.tools.Tool.start(Tool.java:221)
    at sun.jvm.hotspot.tools.JStack.main(JStack.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.tools.jstack.JStack.runJStackTool(JStack.java:118)
    at sun.tools.jstack.JStack.main(JStack.java:84) 
```

不知道怎么读 我应该怎么办？

# jquery - JQuery 可使用句柄排序 - 无法选择文本

> ID：12975472
> 
> 赞同：3
> 
> 时间：2012-10-19T13:37:51.247
> 
> 标签：jquery, jquery-ui, select, text, jquery-ui-sortable

当我使用带有处理程序（或没有）的 JQuery UI Sortable 时，不可能从元素的其余部分中选择文本。我试过“取消”参数但没有结果。

```
$('ul').sortable({
  distance: 15,
  items: '> li',
  handle: '> span'
}).disableSelection(); 
```

JSBin：http: [//jsbin.com/ikazuh/3/edit](http://jsbin.com/ikazuh/3/edit)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T19:14:13.520

只需删除即可`.disableSelection()`修复:)

您可以选择文本，但不能选择处理程序。

# weblogic - 创建 EntityManager 对象时出错

> ID：12975476
> 
> 赞同：0
> 
> 时间：2012-10-19T13:38:06.430
> 
> 标签：weblogic, openjpa

我正在尝试为持久性创建一个 EntityManager 对象，但我无法创建 EntityManager 对象。请在下面找到示例代码：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("Draco-PU");
EntityManager em = emf.createEntityManager(); 
```

我也在 persistence.xml 文件中定义了持久性单元名称。

```
<persistence-unit name="Draco-PU" > 
```

持久化 xml 定义如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns
/persistence/persistence_1_0.xsd">
<persistence-unit name="Draco-PU" >
<provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
<jta-data-source>DracoDataSource</jta-data-source>
<non-jta-data-source>DracoUnmanagedDataSource</non-jta-data-source>
<class>dk.tdc.soa.smo.draco.db.model.DslServiceEntity</class>
<class>dk.tdc.soa.smo.draco.db.model.DslServiceCatalogEntity</class>
<class>dk.tdc.soa.smo.draco.db.model.History</class>
<class>dk.tdc.soa.smo.draco.db.model.ConfigEntity</class>
<properties>
  <property name="openjpa.Log" value="DefaultLevel=WARNING, Runtime=WARNING, Tool=WARNING, SQL=WARNING" />
  <!-- <property name="openjpa.jdbc.DBDictionary" value="org.apache.openjpa.jdbc.sql.OracleDictionary" />  -->     
  <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)" />
</properties>
</persistence-unit>
</persistence> 
```

面临的错误是：

```
javax.persistence.PersistenceException: No Persistence provider for EntityManager
named Draco-PU: Provider named kodo.persistence.PersistenceProviderImpl threw 
expected exception at create EntityManagerFactory:
org.apache.openjpa.persistence.PersistenceException<openjpa-1.1.1-SNAPSHOT-
r422266:891341 fatal general error>  
org.apache.openjpa.persistence.PersistenceException: There was an error when invoking
the static newInstance method on the named factory class 
"kodo.jdbc.kernel.KodoJDBCBrokerFactory". 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T00:03:39.797

在您的 WEB-INF 文件夹中创建下一个结构：classes/META-INF，将您的 persistence.xml 文件放入并重新启动服务器。

Weblogic 在构建目录中查找该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:01:04.567

您是否在persistence.xml 的“persistence-unit”元素中声明了“provider”元素？它应该看起来像这样：

```
<persistence-unit name="Draco-PU">
    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
</persistence-unit> 
```

# iphone - Cocos2d 和 iPhone 5 Retina 支持？

> ID：12975485
> 
> 赞同：1
> 
> 时间：2012-10-19T13:38:31.813
> 
> 标签：iphone, ipad, cocos2d-iphone, retina-display

我想知道如何在 cocos2d 中包含 iPhone 5 的视网膜图像。我已经有来自 iPad 版游戏的大图像。我怎么做 ？不幸的是，互联网上没有太多信息，所以我想我会在这里问。我还没有可用的 iPhone 版本的游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:30:18.677

这是 cocos2d 内置的。使用 xxx.png 作为标准分辨率图像，然后提供 xxx-hd.png 图像，cocos2d 将在 Retina 设备（包括 iPhone 5）上使用该高分辨率版本。

iPad 的文件后缀是 -ipad 和 -ipadhd 用于 Retina iPad。

# firefox - Chrome 和 Firefox 中的 HTML 流程不同

> ID：12975488
> 
> 赞同：0
> 
> 时间：2012-10-19T13:38:55.150
> 
> 标签：firefox, html, flow

我有一个简单的 div 示例，其中包含两个图像，其中一个在 div 内具有绝对定位。

那是我的 HTML 代码：

```
<div style="position: relative;  display: inline; "  >             
<img src="http://www.iphones.ru/wp-content/uploads/2008/09/iphone-girl-10.jpg" / >             
<img style="position: absolute;  top: -400px; left: 100px; z-index: 10" width="32"   height="32"  src="http://4geo.ru/images/other/icon-18plus.png"/>         
</div> 
```

试试这个例子[http://jsfiddle.net/yQn7W/1/](http://jsfiddle.net/yQn7W/1/) - 你应该看到女孩脸上的“18+”标志。它在 Chrome 和 Firefox 上都可以正常工作。

但是，当我一个接一个地制作几个 div 时，Firefox 似乎失去了 HTML 流，并在页面上的错误位置留下了“18+”图像（具有“position: absolute;”属性）。

试试这个例子[http://jsfiddle.net/yQn7W/2/](http://jsfiddle.net/yQn7W/2/)

这就是它在 Chrome 中的外观：

![http://i.stack.imgur.com/3Vhqe.jpg](../Images/4faee5fb35a09447fb346f086e89bdfe.png)

这就是 Firefox 显示的内容：

![http://i.stack.imgur.com/qZ4Ee.jpg](../Images/d85183c819849cf6697facfa99ec2f1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:43:04.900

这要么是宽度不匹配，要么是因为您没有正确清除容器。由于没有实时版本的问题，我不知道是哪个问题，但是如果您清除容器并且它不起作用，您将必须为每个 div 设置固定宽度，并将其设置为浮动和内联-block，像这样：

`<div style="position: relative; float:left; display: inline-block; width:500px;" >`

# java - 为 Java 和 iOS 编码相同的图像

> ID：12975492
> 
> 赞同：2
> 
> 时间：2012-10-19T13:38:57.117
> 
> 标签：java, ios, encoding

我想用 Java 编码一个图像（gif 文件）并将其传递给 iOS 以显示它。

下面给出的是我在 iOS 中的代码

```
UIImage *w=[[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"label" ofType:@"gif"]];

NSData *imageData = UIImagePNGRepresentation(w);

NSString *encodedString = [imageData base64Encoding];
NSLog(@"encoding String :::%@",encodedString );

UIImage *imaged = [UIImage imageWithData:[NSData dataWithBase64EncodedString:encodedString]];

UIImageView *imag2=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

imag2.image=imaged;
[self.view  addSubview:imag2]; 
```

我目前无法`encodedString`在 Java 中获得相同的编码结果 ()。

有人可以建议我一些用于生成相同编码数据的源代码吗？

# android - Android模拟器不再启动

> ID：12975494
> 
> 赞同：13
> 
> 时间：2012-10-19T13:39:02.513
> 
> 标签：android, android-emulator

我在 OSX Mountain Lion 上运行。我最近从 Eclipse 安装了最新版本的 Eclipse 和 Android SDK。我也通过 Eclipse 更新了 SDK，下载了 Extras、Android 2.2 (API 8)、Android 4.1.2 (API 16) 和 Tools 文件夹中的所有内容。

最后我可以通过创建一个设备来运行模拟器，但是它非常慢（我有 250gb ssd 硬盘驱动器 + 16gb RAM），我什至无法运行我拥有的应用程序。我试图修改模拟器的一些选项，现在显然我不能再运行任何东西了。一旦我尝试运行程序（Hello World），我就会收到以下臭名昭著的 Mac OSX 错误：

`emulator-arm quit unexpectedly.`

Eclipse 的控制台输出如下：

```
[2012-10-19 15:46:06 - test] Android Launch!
[2012-10-19 15:46:06 - test] adb is running normally.
[2012-10-19 15:46:06 - test] Performing com.example.test.MainActivity activity launch
[2012-10-19 15:46:06 - test] Automatic Target Mode: launching new emulator with compatible AVD 'test'
[2012-10-19 15:46:06 - test] Launching a new emulator with Virtual Device 'test' 
```

我试图像以前一样重置东西，并创建一个新的模拟器设备。我试图重新启动 Eclipse 和机器本身，但什么也没有。显然我不能再运行任何 Android 应用程序了。

有人有什么想法吗？我阅读了一些类似`adb`的线程来重新启动它，但显然我也无法让它运行。通过这样做，`./adb shell`我得到`error: device not found`. 你知道我能做些什么来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-09T12:31:11.433

问题本质上是 AVD 管理器无法重新打开 Mac 上第二台显示器上的虚拟设备。解决方法是编辑以下文件

```
~/.android/avd/.avd/emulator-user.ini 
```

（取决于您的系统，这也可能位于 ~/.android/avd/Default.avd/emulator-user.ini）

并将 window.x 和 window.y 条目更改为

```
window.x=0
window.y=0 
```

资料来源：[http ://timvoet.com/2013/01/04/avd-emulator-crashes-on-mac/](http://timvoet.com/2013/01/04/avd-emulator-crashes-on-mac/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-14T20:39:16.707

FWIW我注意到运行VirtualBox似乎会锁定HAX，这会阻止android模拟器窗口打开。关闭 VirtualBox 似乎释放了锁，一切都恢复了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T13:52:57.090

更新你的安卓 SDK。在 Eclipse 中，它应该是打开 avd 管理器按钮旁边的一个按钮。或从命令行尝试 android update sdk --no-ui。以下链接应有助于向下滚动以查看如何更新。[https://wiki.appcelerator.org/display/guides/Installing+and+Updating+Android+SDK](https://wiki.appcelerator.org/display/guides/Installing+and+Updating+Android+SDK)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T02:01:14.063

我遇到了同样的问题，但建议的想法并没有解决我的问题，在向众神发誓并挥舞拳头之后，我倒退到它工作的时候，并决定将我的 SDK Tools 版本从 Android SDK Tools RC 改回来22.6 到 Android SDK 工具 22.3。

启动 emulator64-x86 4.4.2 intel atom 实例并在低电平下运行它。

宝贵的 2 个小时后……一定喜欢使用 Android。:O

故事的道德不要使用预览频道发布。

# linux - cronjob 与 linux 中的守护进程。什么时候使用？

> ID：12975495
> 
> 赞同：74
> 
> 时间：2012-10-19T13:39:02.157
> 
> 标签：linux

使进程被守护进程是有好处的，因为它与终端分离。但同样的事情也可以通过 cron 作业来实现。[如果不是请纠正我]

我可以区分何时使用 cronjob 或守护进程的场景的最佳要求是什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-19T21:13:36.113

一般来说，如果您的任务需要每小时运行多次（可能小于 10 分钟），您可能需要运行一个守护程序。

始终运行的守护程序具有以下好处：

*   它可以以大于每分钟 1 次的频率运行
*   它可以更轻松地记住之前运行的状态，这使得编程更简单（如果您需要记住状态）并且在某些情况下可以提高效率
*   在具有许多主机的基础架构上，它不会导致“踩踏羊群”效应
*   可以更轻松地避免多次调用（也许？）

但

*   如果它退出（例如出现错误），除非您实现了该功能，否则它不会自动重新启动
*   即使没有做任何有用的事情，它也会使用内存
*   内存泄漏是一个更大的问题。

一般来说，健壮性有利于“cron”，而性能有利于守护进程。但是有很多重叠（其中任何一个都可以）和反例。这取决于您的确切情况。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-19T13:40:50.317

cronjob 和守护进程之间的区别在于执行时间范围。

**cronjob**是一个偶尔执行一次的进程。cronjob 的一个示例可以是偶尔删除临时文件夹内容的脚本，或者每天早上 9 点向一堆设备发送推送通知的程序。

而**守护进程**是一个独立于任何用户运行的进程，但如果它结束则不会重新启动。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-19T14:47:17.940

如果您需要一项对其他人永久可用的服务，那么您需要运行一个守护程序。这是一个相当复杂的编程任务，因为守护进程需要能够永久地与世界通信（例如通过侦听套接字或 TCP 端口），并且需要编写它以干净地处理每个作业而不会泄漏或甚至长时间锁定资源。

相比之下，如果您有一个特定的作业，其描述可以提前确定，并且可以在没有进一步信息的情况下自动执行，并且是独立的，那么拥有一个定期运行该任务的 cron 作业可能就足够了. 这设计起来要简单得多，因为您只需要一个在有限时间内运行一次然后退出的程序。

简而言之：守护进程是一个永远运行的单一进程。cron 作业是一种定期启动新的、短暂的进程的机制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:45:32.593

守护进程可以通过缓存状态、延迟磁盘写入或与客户端进行长时间会话来利用它的寿命。

守护进程还必须没有内存泄漏，因为它们可能会随着时间的推移累积并导致问题。

# php - 翻译多种语言

> ID：12975499
> 
> 赞同：10
> 
> 时间：2012-10-19T13:39:07.133
> 
> 标签：php, internationalization, translation, locale, gettext

我有我的[php gettext](http://php.net/manual/en/function.gettext.php)默认语言英文让我们说

我想在我的一个控制器中翻译一些其他语言的单词并将它们全部放在一个数组中。

理想情况下我可以

```
$word_sv = gettext($word, 'sv_SV');
$word_fi = gettext($word, 'fi_FI'); 
```

但它不存在。

是每次更改整体[gettext 设置的唯一方法吗？](http://php.net/manual/en/function.gettext.php)

```
function setLang($lang){
    putenv("LC_ALL=$lang");
    setlocale(LC_ALL, $lang);
    bindtextdomain("myPHPApp", "./locale");
    textdomain("myPHPApp");
}

setLang('sv_SV');
$word_sv = gettext($word);
setLang('fi_FI');
$word_fi = gettext($word); 
```

相关：在 Google 上看到它之后：[i18n with gettext 但没有语言环境的麻烦？](https://stackoverflow.com/questions/1620670/i18n-with-gettext-but-without-the-locale-hassle)

* * *

# 编辑

以下是建议的已回答解决方案：

*   [https://github.com/Philipp15b/php-i18n](https://github.com/Philipp15b/php-i18n)（似乎是最好的解决方案）
*   [http://glotpress.trac.wordpress.org/browser/trunk/pomo](http://glotpress.trac.wordpress.org/browser/trunk/pomo)（如果我找到一个好的文档或教程，可以使用它；））
*   即时更改语言环境，可能不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:16:37.693

如果您一定要在这里获取文本，让计算机为您完成工作。

你要么有一个单词列表，然后要检查所有语言，首先为每种语言做单词列表。这将为您节省一些开销来调用`setlanguage`每个单词和语言之间的函数。

如果您想使用每种语言，每个单词，请以这种方式编写函数：

```
function gettext_by_lang($lang, $word) {
    putenv("LC_ALL=$lang");
    setlocale(LC_ALL, $lang);
    bindtextdomain("myPHPApp", "./locale");
    textdomain("myPHPApp");
    return gettext($word);
}

$word_sv = gettext_by_lang('sv_SV',  $word);
$word_fi = gettext_by_lang('fi_FI',  $word); 
```

这至少会使您的代码更紧凑。想到的另一个想法是对 PO 和 MO 文件使用解析器，以便您可以检查数据。

在 PHP 中，其中之一是随 Wordpress / Glotpress 一起提供的：

*   [http://glotpress.trac.wordpress.org/browser/trunk/pomo](http://glotpress.trac.wordpress.org/browser/trunk/pomo)

也许这有帮助。该库正在维护中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:47:17.323

我知道使用 gettext 的痛苦，但它的性能让我坚持了下来！

在你的情况下，你可能想看看这个小项目？我很确定这可能会对您有所帮助！

这只是使用带有翻译的 .ini 文件，您可以在文件之间自由切换并为同一个单词回显不同的语言。

[https://github.com/Philipp15b/php-i18n](https://github.com/Philipp15b/php-i18n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:08:08.200

我想一个明显的答案是滚动你自己的全局函数：

```
function getLocalText($string, $lang)
{
    putenv("LC_ALL=$lang");
    setlocale(LC_ALL, $lang);
    bindtextdomain("myPHPApp", "./locale");
    textdomain("myPHPApp");

    return gettext($string);
}

$word_fi = getLocalText($word, 'fi_FI'); 
```

# active-directory - 使用 Spring security 2.0.3 的 LDAP 身份验证

> ID：12975500
> 
> 赞同：0
> 
> 时间：2012-10-19T13:39:08.177
> 
> 标签：active-directory, spring-security, ldap, spring-ldap

我正在尝试使用 spring security 2.0.3 进行 LDAP 身份验证

这是我的配置

```
<bean id="contextSource" class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
        <constructor-arg value="ldap://IP:3268"/>
        <property name="base" value="dc=alliance",dc=com,OU=Users,OU=India"/>
        <property name="userDn" value="sAMAccountName=username" />
        <property name="password" value="password" />
    </bean>

    <bean id="ldapProvider" class="org.springframework.security.providers.ldap.LdapAuthenticationProvider">
        <sec:custom-authentication-provider/>
        <constructor-arg>
            <bean class="org.springframework.security.providers.ldap.authenticator.BindAuthenticator">
                <constructor-arg ref="contextSource"/>
                <!--<property name="userSearch" ref="ldapSearchBean"/>-->
                <property name="userDnPatterns">
                   <list><value>sAMAccountName={0}</value></list>
                 </property>
            </bean>
        </constructor-arg>
        <constructor-arg>
            <bean class="org.springframework.security.ldap.populator.DefaultLdapAuthoritiesPopulator">
                <constructor-arg ref="contextSource"/>
                <constructor-arg value="ou=groups"/>
                <property name="groupSearchFilter" value="member={0}"/>
                <property name="groupRoleAttribute" value="ou"/>
                <property name="rolePrefix" value="ROLE_"/>
                <property name="searchSubtree" value="true"/>
                <property name="convertToUpperCase" value="true"/>
            </bean>
        </constructor-arg>
    </bean> 
```

Maven入口集如下

```
<dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>2.0.3</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
<dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap</artifactId>
            <version>1.2.1</version>
        </dependency> 
```

我得到的例外是

> [BindAuthenticator，2329165@qtp-24103634-0] - 无法绑定为 sAMAccountName=csepena：org.springframework.ldap.AuthenticationException：[LDAP：错误代码 49 - 80090308：LdapErr：DSID-0C090334，注释：AcceptSecurityContext 错误，数据 525 , 维

我应该在哪里提及域名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:29:07.740

如果您在线搜索错误消息，您会发现类似于[此页面的 Active Directory 错误](http://primalcortex.wordpress.com/2007/11/28/active-directory-ldap-errors/)，它在顶部列出了您的错误：

```
Common Active Directory LDAP bind errors:

80090308: LdapErr: DSID-0C09030B, comment: AcceptSecurityContext error, data 525, v893
HEX: 0×525 – user not found
DEC: 1317 – ERROR_NO_SUCH_USER (The specified account does not exist.)
NOTE: Returns when username is invalid. 
```

所以根据广告，用户不存在。您已尝试将`sAMAccountName`属性用作 DN 模式的一部分，因为它是 LDAP 属性，所以它不起作用。您需要使用搜索首先通过此属性的值定位用户。本网站和网络上的其他地方有关于如何做到这一点的示例。看起来您已经尝试过了，因为您注释掉了一个搜索 bean。如果这不起作用，你应该解释你的问题出了什么问题。

事实上，它似乎很可能失败了，因为您的上下文源有一些问题。该[`userDn`属性](http://static.springsource.org/spring-ldap/docs/1.3.x/apidocs/org/springframework/ldap/core/support/AbstractContextSource.html#setUserDn%28java.lang.String%29)的值是错误的。它必须是目录中的有效专有名称，“sAMAccountName=username”不是。“base”属性看起来也不正确。它通常应该是根（`dc=mycompany,dc=com`在末尾）的树。所以应该是这样`ou=mygroup,ou=mycountry,dc=mycompany,dc=com`。

最后，您不应该使用 2.0.3 版本。它有已知的安全漏洞。始终与您正在使用的库的补丁和新版本保持同步 - [OWASP“前十名”中的第 6 位](https://www.owasp.org/index.php/Top_10_2010-A6)。如果您遇到已修复的错误，检查最新版本也很有意义。

# javascript - 更改所有 html 页面上的页眉/页脚

> ID：12975502
> 
> 赞同：0
> 
> 时间：2012-10-19T13:39:15.707
> 
> 标签：javascript, html

我有一个网站，我有页眉和页脚，我会不断更改。我有大约 69 个 html 页面，它们是用 HTML 4.01 编写的。我怎样才能做到这一点，所以我必须更改代码，比如说索引页面，它会改变所有其他页面？

我尝试使用非常乏味且不会产生相同结果的 Javascript。

[网站示例](http://www.interfaithmedical.com/CheckSite/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:43:25.353

编写 php 代码，它将在所有页面中呈现来自两个 php 文件（作为示例 top.php 和 bottom.php）的内容。您可以更改此文件的内容。我认为它看起来像一个小部件）。

看这个简单的示例：

顶部.php：

```
<?php
echo "top content<br>"; 
```

底部.php：

```
<?php
echo "<br>bottom content"; 
```

索引.php：

```
<?php require_once("top.php"); ?>
content
<?php require_once("bottom.php"); ?> 
```

结果html是：

```
 top content
<br>
    content 
<br>
    bottom content 
```

您可以更改 top.php 和 bottom.php 蚂蚁它将更改 index.php 中的内容。如果您使用 php 服务器脚本语言 ;)

# alfresco - Talend / Alfresco 4.0 连接器？

> ID：12975507
> 
> 赞同：3
> 
> 时间：2012-10-19T13:39:21.703
> 
> 标签：alfresco, etl, talend, cmis

据我所知，这个项目[http://knowledge.openwide.fr/Main/AlfrescoETLConnector](http://knowledge.openwide.fr/Main/AlfrescoETLConnector) 仅支持 Alfresco 3.3 及以下版本。是否有适用于 Alfresco 4.0 的 Talend 连接器？我们在 4.0 中有太多的开发工作，我们甚至不想回滚到 3.3，而是想使用像 Talend 这样的 ETL 将批量文件加载到 Alfresco 中。

我们是否应该考虑其他具有 Alfresco 4.0 连接器的 ETL 工具？我们可以使用任何符合 Talend / CMIS 标准的连接器吗？对产品的建议看？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:05:05.373

我是 XeniT 的 Ronny。如果您想加载文档和元数据，您可以考虑 [http://www.xenit.eu/move2alf/](http://www.xenit.eu/move2alf/) 您可以将其与 Talend 集成，但它允许将内容轻松快速地迁移到 Alfresco。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:40:03.247

我最近为 Talend 发布了新的高级 CMIS 组件（alpha 版本）。
您可以在[Talend Exchange](http://www.talendforge.org/exchange/index.php?eid=733&product=tos&action=view&nav=1,1,1)
上下载 源代码和文档可在[Github](https://github.com/julienboulay/talend-cmis-components)
[cmis](/questions/tagged/cmis "显示标记为“cmis”的问题") [talend etl](/questions/tagged/talend "显示标记为“talend”的问题") [alfresco](/questions/tagged/etl "显示标记为“etl”的问题") [nuxeo](/questions/tagged/alfresco "显示标记为“露天”的问题")[上获得](/questions/tagged/nuxeo "显示标记为“nuxeo”的问题")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T08:58:32.843

在[Talend Exchange](http://www.talendforge.org/exchange/index.php)上，您可以找到各种扩展，例如自定义组件，您可以将其安装在您的 TOS 中。

该交换提供了一个[CMIS 输入组件](http://www.talendforge.org/exchange/index.php?eid=501&product=tos&action=view&nav=1,1,1)，该组件能够通过 CMIS SQL 访问符合 CMIS 的内容存储库（如 Alfresco）。

我还研究了一个可以创建/更新内容的输出组件 (tCmisOutput)。但是这个组件还没有发布。由于您正在寻找将文件加载到 Alfresco 中的方法，因此我将在接下来的几天内在 Talend Exchange 上发布它，或者如果您通过电子邮件与我联系，请发送源代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-24T11:04:31.707

Ekito 开发的最新版 Talend CMIS 组件在 GitHub 上

[https://github.com/Ekito/talend-cmis-components](https://github.com/Ekito/talend-cmis-components)

但是，它不适用于开箱即用的 Talend 版本 6。我创建了一篇博客文章，描述了您需要在此处应用于组件的修复：

[http://www.datalytyx.com/fixing-the-cmis-component-issue-in-talend-6-gated/](http://www.datalytyx.com/fixing-the-cmis-component-issue-in-talend-6-gated/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-09T12:47:12.447

自去年以来，Talend 的 Alfresco ETL 连接器已更新为支持 Alfresco 4.1，如 README 中所述：

[https://github.com/OpenWide-SI/alfresco-etl-connector](https://github.com/OpenWide-SI/alfresco-etl-connector)

问候

# java - 如何在 Hibernate 中引用另一个表

> ID：12975508
> 
> 赞同：1
> 
> 时间：2012-10-19T13:39:21.640
> 
> 标签：java, hibernate, orm, tapestry

我有两个班级：`User`和`Video`：

```
@Entity    
class User{
    @Id
    int id;        
    String name;
}

@Entity
    class Video{
    @Id
    int id;        
    String url;
    User user;
} 
```

当我使用它时，我收到以下错误：

> 无法确定类型：用户，在桌子上：视频

我正在通过 Tapestry 使用 Hibernate。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:44:22.653

非常简单：您需要在字段`@ManyToOne`上添加注释：`user`

```
@Entity
class Video {
    @Id
    int id;

    String url;

    @ManyToOne
    User user;
} 
```

有关更多信息，请参阅[Javadoc](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToOne.html)。

# neo4j - Neo4j - 数据建模

> ID：12975513
> 
> 赞同：1
> 
> 时间：2012-10-19T13:39:41.157
> 
> 标签：neo4j, social-networking, data-modeling

我正在使用 Neo4j 构建一些测试应用程序。我想为小型社交网络建模并尝试找到：

> 1.  用户 X 的所有好友
> 2.  用户的X朋友的朋友，喜欢啤酒的

我坚持建模“知道”关系。让我们以 3 个用户 A、B 和 C 为例。仅定义他们之间的一种关系是否足够，例如。

> A 知道 B
> B 知道 C

或者我必须建立“双向”关系并明确提供

> A知道B所以B知道A
> B知道C所以C知道B

它会增加关系的数量，但也许是需要的。

同样的问题与最喜欢的饮料有关。

> A 喜欢啤酒

我也应该定义吗？

> A喜欢啤酒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:55:32.913

如果您希望能够区分 a 知道 b 和 b 知道 a，那么您需要有两个关系。否则，在查询时，您可以通过省略方向轻松获得两者。

同样，随着啤酒被喜欢，你真的只需要定义一个方向。

举一个真实的例子：连接是相互的 facebook/linkedin 模型只需要一个方向/关系，但是一个人可以跟随另一个人（但另一个人不必跟随他们）的 twitter 模型，你需要两种关系——每个方向一个。

**更新一些查询示例：**

```
CREATE 
(joe {name:"Joe"}), 
(jim {name:"Jim"}), 
(bob {name:"Bob"}), 
(beer {name:"Beer"}),
joe-[:friends_with]-jim,
joe-[:friends_with]-bob,
bob-[:likes]->beer; 
```

给朋友们：

```
START person=node:node_auto_index(name="Joe")     
MATCH (person)-[:friends_with]-(friend)
RETURN person, friend; 
```

还有喜欢啤酒的朋友们：

```
START person=node:node_auto_index(name="Joe"), beer=node:node_auto_index(name="Beer")     
MATCH (person)-[:friends_with]-(friend)-[:likes]->(beer)     
RETURN person, friend, beer; 
```

# jquery - 调整 Lightbox 2 图像的大小

> ID：12975515
> 
> 赞同：0
> 
> 时间：2012-10-19T13:39:43.543
> 
> 标签：jquery, css, lightbox2

所以我需要灯箱 2 有一个最大的图像宽度来调整太大的图像。

为此，我已将 lightbox.css 文件调整为以下内容

```
#lightbox img {
  max-height:700px;
  max-width:700px;
} 
```

这适用于调整图像本身的大小，但是白色的灯箱覆盖仍然是原始图像文件的完整大小，因此图像只是在灯箱的中间丢失了。有任何想法吗？我感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:57:17.650

1) 打开 slimbox2.js

2）重写这个：

```
 w(h).css({ backgroundImage: "url(" + o + ")", visibility: "hidden", display: "" });
    w(q).width(l.width);
    w([q, I, d]).height(l.height); 
```

到：

```
if (l.width > $(document).width() - 100) {
        l.height = l.height * ($(document).width() - 100) / l.width;
        l.width = $(document).width() - 100;
    }
    w(h).css({ backgroundImage: "url(" + o + ")", backgroundSize: "" + l.width + "px " +     l.height + "px", visibility: "hidden", display: "" });
    w(q).width(l.width);
    w([q, I, d]).height(l.height); 
```

最大宽度是

```
$(document).width() - 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:53:01.617

设置这个：

```
.lb-outerContainer {
    max-width: 720px; 
    max-height: 720px;
}
.lb-dataContainer {
    max-width: 220px; /* For the text below image */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T16:47:10.393

我发现选择的答案意味着图像在大尺寸时不会在容器上缩放和溢出。我发现这个解决方案在所有情况下都适用于我。

```
.lightbox .lb-image {
  max-width: 712px;
  max-height: 712px;
 } 
```

我将最大宽度和高度添加到这些类中，调整为像素以考虑图像周围的填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T05:50:52.003

请尝试将以下内容添加到您的 CSS 中：

```
.lb-image{
    max-width: inherit;
} 
```

# c# - WCF Rest 客户端发送不正确的内容类型

> ID：12975524
> 
> 赞同：3
> 
> 时间：2012-10-19T13:40:07.100
> 
> 标签：c#, json, wcf, rest, coldfusion

我正在尝试使用 wcf 客户端向使用 json 的 ColdFusion 9 服务发送请求。但是，请求的内容类型是 xml。

这是服务合同。如您所见，我们特别使用 json 的 RequestFormat。

```
[ServiceContract(Name = "ServiceAgreementRequestService", Namespace = NetworkNamespaces.ServiceNamespace)]
public interface IServiceAgreementRequestService
{
[OperationContract]
[FaultContract(typeof(RequestFault))]
[WebInvoke(UriTemplate = "?method=CreateUser", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
CreateUserResponse CreateUser(CreateUserRequest request);
} 
```

我还尝试在 OutGoing 请求上设置 Request.ContentType ，但这也不起作用。

```
using (var context = this.GetServiceClient(clientId))
{
WebOperationContext.Current.OutgoingRequest.ContentType = "application/json; charset=UTF-8";
var request = new CreateUserRequest(user.Id, user.Person.FirstName, user.Person.LastName);
var response = context.Channel.CreateUser(request);
} 
```

这是发送的请求

```
POST http://somesite.domain.com/WebServices/ProviderService.cfc/?method=CreateUser HTTP/1.1
Content-Type: application/xml; charset=utf-8
VsDebuggerCausalityData: uIDPo7eh9U9jsBVLqVgGtqTK+eMBAAAAb++0xkOSQEmcAKZLgQEsp2/muY2ca6NJiul6pkAaWZwACQAA
Host: somehost.domain.com
Content-Length: 58
Expect: 100-continue
Accept-Encoding: gzip, deflate

{"UserId":4,"FirstName":"FirstName","LastName":"LastName"} 
```

如何让它使用正确的内容类型？

编辑：

在后台，GetServiceClient(clientId) 调用使用 system.servicemodel.clientbase 和 ChannelFactory 来创建通信通道。我们调用客户端更改的端点，因此我们在这些代码之上有一些代码可以动态更改端点。

更多信息。我们有两个应用程序：一个是托管客户端应用程序的 .net MVC 4 Web 应用程序，另一个是托管后端服务的 .net WCF 服务器应用程序。我可以从 Web 应用程序成功调用 ColdFusion 应用程序，但不能从 wcf 服务器应用程序调用。它们都使用相同的代码库来拨打电话。

据我所知，两者的配置相同。

```
<system.serviceModel>
<endpointBehaviors>
<behavior name="WcfRestBehavior">
<webHttp />
</behavior>

<client>
<endpoint name="ServiceAgreementRequestService" address="http://PLACEHOLDER/" binding="webHttpBinding" behaviorConfiguration="WcfRestBehavior" contract="IServiceAgreementRequestService"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:23:59.390

要在服务中使用 WCF REST 客户端，您需要使用类似于下面的代码来创建新的操作上下文范围。

**调用代码：**

```
var client = this.GetServiceClient(clientId);
using (new OperationContextScope(client.InnerChannel))
{ 
    var request = new CreateUserRequest(user.Id, user.Person.FirstName, user.Person.LastName); 
    var response = client.CreateUser(request); 
} 
```

**其他实现**：

```
class MyType : ClientBase<IServiceClient>, IServiceClient
{
    public MyType() : base("ServiceAgreementRequestService") { }
    public CreateUserResponse CreateUser(CreateUserRequest req)
    {
        return this.Channel.CreateUser(req);
    }
}

public MyType GetServiceClient(int clientId)
{
    return new MyType();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:59:37.547

请找到一些关于如何使用 WebRequest 调用 WCF 服务的示例代码

```
var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/json";
                request.Method = method;
            }

            if(method == "POST" && requestBody != null)
            {
                requestBodyBytes = ToByteArrayUsingDataContractSer(requestBody);
                request.ContentLength = requestBodyBytes.Length;
                using (Stream postStream = request.GetRequestStream())
                    postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);                    
            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if(response.StatusCode == HttpStatusCode.OK)
                {
                    Stream responseStream = response.GetResponseStream();
                    if (responseStream != null)
                    {
                        var reader = new StreamReader(responseStream);
                        responseMessage = reader.ReadToEnd();                        
                    }
                }
                else
                {   
                    responseMessage = response.StatusDescription;
                }
            }

    private static byte[] ToByteArrayUsingDataContractSer<T>(T requestBody)
    {
        byte[] bytes = null;
        var serializer1 = new DataContractSerializer(typeof(T));            
        var ms1 = new MemoryStream();            
        serializer1.WriteObject(ms1, requestBody);
        ms1.Position = 0;
        var reader = new StreamReader(ms1);
        bytes = ms1.ToArray();
        return bytes;            
    } 
```

# javascript - 使用 jquery 或 javascript 隐藏或显示大量元素

> ID：12975526
> 
> 赞同：1
> 
> 时间：2012-10-19T13:40:08.473
> 
> 标签：javascript, jquery

我在 Web 应用程序中有一种情况，根据某些条件，我必须隐藏或显示大量 div 元素，数字范围从**500**到**98000**

.

我正在做的是我在所有 div 元素上应用一个公共类，然后迭代整个元素集以检查它们是否适合环境并因此显示或隐藏。

*当数字在500*到*10000*的范围内时，这个逻辑可以正常工作，但是在这个范围之上，它需要一些安静的时间来显示结果。

恐怕对于非常大的数字，这种逻辑可能会导致某些浏览器被挂起。

那么，在大多数浏览器中，处理上述情况的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:54:32.063

正如 Blazermonger 所说，由于您显示/隐藏所有这些元素的方式，您的表现很差。尝试将它们添加到容器中并显示/隐藏容器。

另外，请记住，直接调用 show() 和 hide() 比调用 .css('display', '') 和 .css('display', 'none') 更昂贵。

最后，请检查[jQuery 对象数组上的调用显示](https://stackoverflow.com/questions/12930515/call-show-on-array-of-jquery-objects#comment17523295_12930515)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:49:22.473

如果您要显示大量数据，如果允许，最好使用分页`UL LI`而不是`DIV`分页，您可以将它们显示/隐藏为 -

```
$(.ulClass li).toggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:22:17.550

我会从不同的角度看待你的问题。人类是非常复杂的自动机，它们本身具有物理属性，这些属性将它们限制在一定的信息消费率上。我们大脑中的神经元可以以一定的速度传递冲动，此外，我们的大脑在任何时候只能包含有限数量的信息，等等。

你试图向人类展示的元素数量远远超过了人类感知的极限。如果您尝试显示的任何 div 仅包含一个单词，那么它将产生 98000 / (6 * 24) = 680 页的打印文本。如果这是一些容易阅读的东西，比如通俗小说，一个受过训练的读者可以在大约一周内阅读这么多的文本，每天花一个小时左右，甚至可能更少。您没有理由一次显示这么多文本。拆分成多个页面，否则即使软件能处理那么多数据，用户也无法处理，你的光荣努力也会被忽视……

# vba - 如何在 Excel 中的数组上使用 VBA 执行 SumIf

> ID：12975530
> 
> 赞同：3
> 
> 时间：2012-10-19T13:40:13.087
> 
> 标签：vba, excel, excel-2010

我试图想出最快的方法来在 Excel 中对一个大约有 . 110'000 行。我想出了三种方法，但没有一种是令人满意的。

这是我尝试的第一个：PC 上的执行时间 100 秒！

```
 Sub Test1_WorksheetFunction()

Dim MaxRow As Long, MaxCol As Long
Dim i As Long
Dim StartTimer, EndTimer, UsedTime

StartTimer = Now()

With wsTest
    MaxRow = .UsedRange.Rows.Count
    MaxCol = .UsedRange.Columns.Count

    For i = 2 To MaxRow
        .Cells(i, 4) = WorksheetFunction.SumIf(wsData.Range("G2:G108840"), .Cells(i, 1), wsData.Range("R2:R108840"))
    Next i

End With

EndTimer = Now()
MsgBox (DateDiff("s", StartTimer, EndTimer))

End Sub 
```

这是第二种方法：执行时间在 55 秒时稍好一些

```
Sub Test2_Formula_and_Copy()

Dim MaxRow As Long, MaxCol As Long
Dim i As Long
Dim StartTimer, EndTimer, UsedTime

StartTimer = Now()

With wsTest
    MaxRow = .UsedRange.Rows.Count
    MaxCol = .UsedRange.Columns.Count

    Range("D2").Select
    ActiveCell.FormulaR1C1 = _
        "=SUMIF(Tabelle1[KUNDENBESTELLNR],Test!RC[-3],Tabelle1[ANZAHL NACHFRAGE])"
    Range("D2").Select
    Selection.AutoFill Destination:=Range("D2:D6285")
    Range("D2:D6285").Select
    Selection.Copy
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False

End With

EndTimer = Now()
MsgBox (DateDiff("s", StartTimer, EndTimer))

End Sub 
```

第三次尝试：执行太慢了，它从未完成。

```
Sub Test3_Read_in_Array()

Dim MaxRow As Long, MaxCol As Long
Dim SearchRange() As String, SumRange() As Long
Dim i As Long, j As Long, k
Dim StartTimer, EndTimer, UsedTime
Dim TempValue

StartTimer = Now()

With wsData
    MaxRow = .UsedRange.Rows.Count
    ReDim SearchRange(1 To MaxRow)
    ReDim SumRange(1 To MaxRow)
    For i = 1 To MaxRow
        SearchRange(i) = .Range("G" & (1 + i)).Value
        SumRange(i) = .Range("R" & (1 + i)).Value
    Next i
End With

With wsTest
    MaxRow = .UsedRange.Rows.Count
    For i = 2 To MaxRow
        For j = LBound(SearchRange) To UBound(SearchRange)
            k = .Cells(i, 1).Value
            If k = SearchRange(j) Then
            TempValue = TempValue + SumRange(j)
            End If
        Next j
        .Cells(i, 4) = TempValue
    Next i
End With

EndTimer = Now()
MsgBox (DateDiff("s", StartTimer, EndTimer))

End Sub 
```

显然我还没有掌握 VBA（或任何其他编程语言）。有人可以帮助我提高效率吗？一定有办法！对？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-31T22:27:52.050

当我想出以下解决方案时，我一直在寻找一种更快的方法来计算 Sumifs。您无需使用 Sumifs，而是将条件范围中使用的值连接为单个值，然后使用简单的 If 公式 - 结合一个范围排序 - 您可以获得与使用 Sumifs 相同的结果。

在我自己的案例中，使用具有 25K 行和 2 个标准范围的 Sumifs 进行评估平均需要 18.4 秒——使用 If 和 Sort 方法，平均需要 0.67 秒。

```
 Sub FasterThanSumifs()
    'FasterThanSumifs Concatenates the criteria values from columns A and B -
    'then uses simple IF formulas (plus 1 sort) to get the same result as a sumifs formula

    'Columns A & B contain the criteria ranges, column C is the range to sum
    'NOTE: The data is already sorted on columns A AND B

    'Concatenate the 2 values as 1 - can be used to concatenate any number of values
    With Range("D2:D25001")
        .FormulaR1C1 = "=RC[-3]&RC[-2]"
        .Value = .Value
    End With

    'If formula sums the range-to-sum where the values are the same
    With Range("E2:E25001")
        .FormulaR1C1 = "=IF(RC[-1]=R[-1]C[-1],RC[-2]+R[-1]C,RC[-2])"
        .Value = .Value
    End With

    'Sort the range of returned values to place the largest values above the lower ones
    Range("A1:E25001").Sort Key1:=Range("D1"), Order1:=xlAscending, _
    Key2:=Range("E1"), Order2:=xlDescending, Header:=xlYes
    Sheet1.Sort.SortFields.Clear

    'If formula returns the maximum value for each concatenated value match &
    'is therefore the equivalent of using a Sumifs formula
    With Range("F2:F25001")
        .FormulaR1C1 = "=IF(RC[-2]=R[-1]C[-2],R[-1]C,RC[-1])"
        .Value = .Value
    End With

    End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T14:06:03.403

试一试

```
Sub test()
    StartTimer = Now()
    With ActiveSheet.Range("D2:D6285")
        .FormulaR1C1 = "=SUMIF(Tabelle1[KUNDENBESTELLNR],Test!RC[-3],Tabelle1[ANZAHL NACHFRAGE])"
        .Value = .Value
    End With
    EndTimer = Now()
    MsgBox (DateDiff("s", StartTimer, EndTimer))
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T16:41:03.053

我的版本灵感来自 kevin999 的解决方案。

++ 使用未排序的 sumif 标准
++ 将使行恢复到原始顺序

-- 不支持多个条件列

请注意：包含条件和要汇总的数据的列必须一个接一个。

```
Option Explicit

Sub Execute()
Call FasterThanSumifs(1)
End Sub

Private Sub FasterThanSumifs(Criteria As Long)
'Expects two coloumns next to each other:
'SumIf criteria (left side)
'SumIf data range (right side)

Dim SumRange, DataNumber, HelpColumn, SumifColumn, LastRow As Long
SumRange = Criteria + 1
DataNumber = Criteria + 2
HelpColumn = Criteria + 3
SumifColumn = Criteria + 4
LastRow = UF_LetzteZeile()

Columns(DataNumber).Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
Columns(HelpColumn).Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
Columns(SumifColumn).Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

'Remember data order
Cells(2, DataNumber).Value = 1
Cells(2, DataNumber).AutoFill Destination:=Range(Cells(2, DataNumber), Cells(LastRow, DataNumber)), Type:=xlFillSeries

'Sort the range of returned values to place the largest values above the lower ones
Range(Cells(1, Criteria), Cells(LastRow, SumifColumn)).Sort Key1:=Columns(Criteria), Order1:=xlAscending, Header:=xlYes
ActiveSheet.Sort.SortFields.Clear

'If formula sums the range-to-sum where the values are the same
With Range(Cells(2, HelpColumn), Cells(LastRow, HelpColumn))
    .FormulaR1C1 = "=IF(RC[-3]=R[-1]C[-3], RC[-2] + R[-1]C,RC[-2])"
    '.Value = .Value
End With

'If formula returns the maximum value for each concatenated value match &
'is therefore the equivalent of using a Sumifs formula
With Range(Cells(2, SumifColumn), Cells(LastRow, SumifColumn))
    .FormulaR1C1 = "=IF(RC[-4]=R[+1]C[-4], R[+1]C, RC[-1])"
    .Value = .Value
End With

Columns(HelpColumn).Delete

'Sort the range in the original order
Range(Cells(1, Criteria), Cells(LastRow, SumifColumn)).Sort Key1:=Columns(DataNumber), Order1:=xlAscending, Header:=xlYes
ActiveSheet.Sort.SortFields.Clear

Columns(DataNumber).Delete

End Sub 
```

# java - 如何防止 ZipInputStream 在 XSLT 转换后被关闭？

> ID：12975532
> 
> 赞同：3
> 
> 时间：2012-10-19T13:40:19.567
> 
> 标签：java, xslt, transform, zipinputstream

我有一个 ZipInputStream ，其中包含许多要对其应用转换的 XML 文件。以下代码加载 XSLT 和 ZIP 文件并循环通过 ZIP 条目，尝试将转换应用于每个条目。但是，在执行转换后，转换函数似乎正在关闭输入流，导致 getNextEntry() 函数失败，因为流已关闭。

有没有解决这个问题的简单方法（保持输入流打开，允许 ZipInputStream 移动到下一个条目）或者我在这里错过了更基本的东西？

```
TransformerFactory tFactory = TransformerFactory.newInstance();
Transformer transformer = tFactory.newTransformer(new StreamSource(xsltFileName));

FileInputStream fis = new FileInputStream(fileName);
ZipInputStream zis = new ZipInputStream(fis);
ZipEntry ze = null;

while ((ze = zis.getNextEntry()) != null)
{
    String newFileName = ze.getName();
    transformer.transform(new StreamSource(zis), new StreamResult(new FileOutputStream(newFileName)));
} 
```

我试图寻找解决方案，但似乎没有提出任何有意义的建议。我很感激任何想法或反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:10:42.737

一种可能的解决方案是扩展 ZipInputStream （它不是最终的）并覆盖 close 方法以不做任何事情。当然，您需要确保自己关闭它。您可以使用第二个自定义关闭方法来完成此操作，该方法只需调用 super.close()。

```
class MyZIS extends ZipInputStream {

    public MyZIS(InputStream in) {
        super(in);
    }

    @Override
    public void close() throws IOException {
    }

    public void myClose() throws IOException {
        super.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:57:13.793

通常接受的协议是“创建输入流的人应该在使用后关闭它”，并且您的 XSLT 处理器（Xalan？）似乎没有遵循这个约定。如果是这种情况，那么一种解决方法（除了移动到不同的 XSLT 处理器！）是编写一个过滤器流，它包装 ZipInputStream 并将所有调用传递给底层 ZipInputStream，除了它拦截的 close() 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:45:51.167

您实际上应该使用 ZipFile 类来读取 zip 存档。然后，您将获得 zip 条目的输入流，如下所示：

```
zipfile.getInputStream(zipEntry); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T16:51:41.327

也许您需要做的是将 zip 输入读入临时缓冲区，然后将其用作转换器的源。我的理解是转换器需要读取整个流以确定转换应该是什么，因此，即使它没有关闭输入流，下一次读取也会遇到 EOF。

也许是这样的？（未进行任何优化）

```
 byte[] bytes = new byte[(int) entry.getSize()];
    zis.read(bytes);
    ByteArrayInputStream out = new ByteArrayInputStream(bytes);
    transformer.transform(new StreamSource(zis), new StreamResult(new FileOutputStream(newFileName)));    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-16T12:13:55.203

您可以设置一个属性：IsStreamOwner，当它为 false 时，基础流将不会关闭。

# wpf - 右侧的锁定元素

> ID：12975533
> 
> 赞同：0
> 
> 时间：2012-10-19T13:40:20.627
> 
> 标签：wpf, xaml

我的应用程序中有两个文本框，长度可变。一个在左边，另一个在右边。默认情况下，它们的宽度很小，为 30 像素。但是由于它们包含很多数字，所以左侧的文本框会移动右侧的文本框并放大窗口（当右侧的 textbw 包含太多数字时也是如此）。为了避免这种情况，我想稳定右边的文本框，即使它的宽度增加。

我尝试过使用列大小，但没有。

```
<Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="170" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="10" />
                                <ColumnDefinition Width="*" />                                    
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="1" MinWidth="30" Margin="0,0,0,0" Name="maxGmapWest" Text="{Binding Path=Options.MaxGmapWest, ElementName=Window, Mode=OneWay, Converter={StaticResource StringToDoubleConverter}}" PreviewTextInput="Tab1_PreviewTextInput" Width="auto" />
                            <TextBox Grid.Column="3" MinWidth="30" Margin="230,0,0,0" Name="maxGmapEast" Text="{Binding Path=Options.MaxGmapEast, ElementName=Window, Mode=OneWay, Converter={StaticResource StringToDoubleConverter}}" PreviewTextInput="Tab1_PreviewTextInput" Width="auto" HorizontalAlignment="Left" />
                        </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:36:54.467

尝试类似的标记

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <ScrollViewer Grid.Column="0" Width="auto" MinWidth="50" VerticalScrollBarVisibility="Auto" Margin="0,0,0,0" HorizontalAlignment="Left" MaxHeight="40" >
            <TextBox  Name="maxGmapWest"  TextWrapping="Wrap"   />
        </ScrollViewer>
        <ScrollViewer Grid.Column="1" HorizontalAlignment="Right"  VerticalScrollBarVisibility="Auto"  MinWidth="50"  Margin="0,0,20,0" MaxHeight="40">
            <TextBox   Name="maxGmapEast"  TextWrapping="Wrap"   />
        </ScrollViewer>
    </Grid> 
```

文本框的最大宽度=列的宽度，固定最大高度并使用 ScrollViewer 处理大文本

# knockout.js - 如何强制评估顺序

> ID：12975535
> 
> 赞同：0
> 
> 时间：2012-10-19T13:40:34.713
> 
> 标签：knockout.js

我有两个连接在一起的计算 observables。我遇到的问题似乎与我的 observable 没有以正确的顺序更新（碰巧先完成计算然后检查）这一事实有关，这可能会破坏我的应用程序。

```
vm = function() {
  var self = this;
  this.check = ko.computed(function() {
    // does some checking return true if no problem false otherwise
  };
  this.compute = ko.computed(function() {
    if (self.check())
      // does computation
  }
}; 
```

有没有办法强制评估顺序？

# ios - 如何在 UISearchbar 上创建取消按钮

> ID：12975537
> 
> 赞同：2
> 
> 时间：2012-10-19T13:40:39.513
> 
> 标签：ios, uisearchbar

我如何创建`button`取消`UISearchbar`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T14:09:57.143

你的问题有点含糊，但我会尽力回答。

如果你只想显示取消按钮，它很简单：

```
 searchBar.showsCancelButton = YES; 
```

如果您希望对取消按钮进行一些自定义工作，则必须在 UISearchBar 的子视图中找到它。

```
 for (UIView *subView in searchBar.subviews) {
        if([subView isKindOfClass:[UIButton class]]) {

            UIButton *cancelButton = (UIButton *)[searchBar.subviews lastObject];
            //Make changes to the cancelButton here

        }
   } 
```

您应该查看有关 UISearchBar的[苹果文档的任何其他问题。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)

# android - loadData 尝试在 webview 中使用数据作为 url

> ID：12975538
> 
> 赞同：5
> 
> 时间：2012-10-19T13:40:41.400
> 
> 标签：android, webview

```
page = "<!DOCTYPE HTML><html><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8'>" +
                    "</head><body>" + page + "</body></html>";
            webContent.loadData(page, "text/html;charset=UTF-8", "UTF-8"); 
```

在调用 loadData 时，webview 给出“URL 无效”，在 onReceivedError 回调中，url 是“data:text/html;charset=UTF-8;UTF-8,%3C!DOCTYPE%20HTML%3E .... /body%3E%3C/html%3E"。这不会发生在我加载的所有数据上。

笔记：

*   在果冻豆中一切正常，在 2.3 上测试时会出现此问题
*   我尝试使用 loadDataWithBaseURL 加载数据，但 webview 不解释 html，只显示字符串内容。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T12:03:38.010

```
webContent.loadDataWithBaseURL(null, page, "text/html", "UTF-8") 
```

对我有用，而使用 loadData() 我有时会遇到您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:44:36.540

要加载 url，您可以将代码用作

```
WebView myWebView = (WebView) findViewById(R.id.webview);
myWebView.loadUrl("http://www.example.com"); 
```

我认为下面的链接很有帮助

[android中的webview](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:47:55.090

我不知道它是否有帮助，但您可以尝试更改此行：

```
webContent.loadData(page, "text/html;charset=UTF-8", "UTF-8"); 
```

对此：

```
webContent.loadData(page, "text/html", "UTF-8"); 
```

因为您已经在调用中定义了字符集

# iphone - GameKit 同步

> ID：12975539
> 
> 赞同：0
> 
> 时间：2012-10-19T13:40:42.343
> 
> 标签：iphone, ios, xcode, synchronization, gamekit

我试图实现`GameKit`通过蓝牙/wifi在多个设备上同步播放歌曲。仍然我总是有 0.1-0.5 秒的延迟。认为这样的同步是微不足道的。我找到了实现我想要的 BM 接收器节拍器，声音是真正同步播放的。

我正在使用`GKSendDataReliable`并发送 1 个有节奏的小包。[在这里](http://www.raywenderlich.com/12865/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-2)使用本教程完成所有事情。

我用谷歌搜索了很多，但找不到答案和/或我的瓶颈。将不胜感激任何建议/方法。也许一些教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:59:55.367

您使用多少设备？我假设它是服务器 - 客户端方案。这是我会做的（它可能不起作用，但你正在寻求建议/方法），非常粗略的算法：

-server 设置一个计时器并使用 PING 数据包将其值发送给客户端，每个客户端都记住它

-client 收到 PING 包，并发送响应包

-server 获取响应数据包，检查时间并将生成的增量存储在某处（在向量中）

-server 发送更多 PING 数据包并获得更多时间增量

- 当服务器有足够的数据时，它会计算平均 ping 时间（CLIENTX_TIME）并选择最大的一个（BIGGEST_TIME）

-server 向所有客户端发送 START 数据包，数据包有一些附加信息说 XX_TIME 开始播放

-服务器在 BIGGEST_TIME 之后开始播放音乐

-客户端在 XX 时间后获取 START 数据包并开始播放音乐，其中 XX 是按播放器计算的（因此对于最慢的客户端，它将为 0，对于其他客户端，它将是 BIGGEST_TIME-CLIENTX_TIME）

- 这个过程一遍又一遍地进行，每次你想玩什么，你就提前做

问题是您将永远无法始终同步所有内容-不幸的是，这是网络的本质；）

# python - 在 Python distutils 中从 setup.py 中找到脚本目录的正确方法？

> ID：12975540
> 
> 赞同：9
> 
> 时间：2012-10-19T13:40:42.040
> 
> 标签：python, setuptools, distutils, setup.py, distribute

我正在分发一个具有这种结构的包：

```
mymodule:
  mymodule/__init__.py
  mymodule/code.py
  scripts/script1.py
  scripts/script2.py 
```

的`mymodule`子目录`mymodule`包含代码，`scripts`子目录包含应该由用户执行的脚本。

在描述包安装时`setup.py`，我使用：

```
scripts=['myscripts/script1.py'] 
```

指定脚本应该去哪里。在安装过程中，它们通常进入某个平台/用户特定的`bin`目录。我拥有的代码`mymodule/mymodule`需要调用脚本。然后找到这些脚本的完整路径的正确方法是什么？理想情况下，它们此时应该在用户的路径上，所以如果我想从 shell 中调用它们，我应该能够：

```
os.system('script1.py args') 
```

但我想通过它的绝对路径调用脚本，而不是依赖于平台特定的 bin 目录在 上`PATH`，如：

```
# get the directory where the scripts reside in current installation
scripts_dir = get_scripts_dir()
script1_path = os.path.join(scripts_dir, "script1.py")
os.system("%s args" %(script1_path)) 
```

如何才能做到这一点？谢谢。

**编辑**删除脚本之外的代码对我来说不是一个实用的解决方案。原因是我将作业分配到集群系统，而我通常这样做的方式是这样的：假设您有一组要运行的任务。我有一个脚本，它将所有任务作为输入，然后调用另一个脚本，该脚本仅在给定任务上运行。就像是：

```
main.py:
for task in tasks:
  cmd = "python script.py %s" %(task)
  execute_on_system(cmd) 
```

所以`main.py`需要知道在哪里`script.py`，因为它需要是一个可执行的命令`execute_on_system`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:49:01.637

我认为你应该构建你的代码，这样你就不需要从你的代码中调用脚本。将您需要的代码从脚本移动到包中，然后您可以从脚本和代码中调用此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T17:13:55.013

我的用例是检查我的脚本安装到的目录是否在用户的路径中，如果不是，则发出警告（因为如果使用 --user 安装，它通常不在路径中）。这是我想出的解决方案：

```
from setuptools.command.easy_install import easy_install

class my_easy_install( easy_install ):

    # Match the call signature of the easy_install version.
    def write_script(self, script_name, contents, mode="t", *ignored):

        # Run the normal version
        easy_install.write_script(self, script_name, contents, mode, *ignored)

        # Save the script install directory in the distribution object.
        # This is the same thing that is returned by the setup function.
        self.distribution.script_install_dir = self.script_dir

...

dist = setup(...,
             cmdclass = {'build_ext': my_builder,  # I also have one of these.
                         'easy_install': my_easy_install,
                        },
            )

if dist.script_install_dir not in os.environ['PATH'].split(':'):
    # Give a sensible warning message... 
```

我应该指出，这是针对 setuptools 的。如果使用 distutils，则解决方案类似，但略有不同：

```
from distutils.command.install_scripts import install_scripts

class my_install_scripts( install_scripts ):  # For distutils
    def run(self):
        install_scripts.run(self)
        self.distribution.script_install_dir = self.install_dir

dist = setup(...,
             cmdclass = {'build_ext': my_builder,
                         'install_scripts': my_install_scripts,
                        },
            ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-11T08:56:09.520

我认为正确的解决方案是

```
scripts=glob("myscripts/*.py"), 
```

# symfony - Symfony 2.1 Sonata 管理教义_orm_date_range 过滤默认值

> ID：12975542
> 
> 赞同：2
> 
> 时间：2012-10-19T13:40:44.420
> 
> 标签：symfony, symfony-2.1, sonata-admin

在日期范围过滤器中设置默认值不是问题，而是备忘单

```
class ProductAdmin extends Admin
{

    //....

    public function getFilterParameters()
    {
        $this->datagridValues = array_merge(
            array(
                'updatedAt' => array(
                    'type' => 1,
                    'value' => array(
                        'start' => array(
                            'day' => date('j'),
                            'month' => date('m'),
                            'year' => date('Y')
                            ),
                        'end' => array(
                            'day' => date('j'),
                            'month' => date('m'),
                            'year' => date('Y')
                            )
                        ),
                    )
                ),
            $this->datagridValues
            );

        return parent::getFilterParameters();
    } 
```

我在文档中没有找到任何东西...

我希望这能帮到您

# jquery - 运行冗长的 JQuery 操作时将光标更改为等待

> ID：12975545
> 
> 赞同：2
> 
> 时间：2012-10-19T13:40:48.023
> 
> 标签：jquery

当我运行一个冗长的 jQuery 操作时，我无法显示光标等待。我尝试的是

```
function foo(){
   jQuery('body').css('cursor', 'wait');

   //lengthy jQuery sort/DOM manipulation

   jQuery('body').css('cursor', 'default');
} 
```

到目前为止，我观察到的是，在我看来，何时`onclick`调用此函数，大约需要 6 秒（操作排序所需的时间），然后我看到最后的所有更改。这是有道理的，因为我仍然在同一个 JQuery 调用中，但是有没有办法强制光标更改显示等待，然后在排序操作之后，并在完成后将光标更改回默认值。

注意：长度操作不是 ajax 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:45:20.057

这看起来不错，但问题是您的浏览器在开始运行 foo 时“冻结”并在最后解冻，因此您无法注意到光标的变化......

尝试与您所拥有的类似但使用超时的东西......

```
function foo(){
   jQuery('body').css('cursor', 'wait');
   window.setTimeout(someLengthy,1);
}

function someLength(){
   //lengthy jQuery sort/DOM manipulation
   jQuery('body').css('cursor', 'default');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:45:42.577

可能是光标已更改，但浏览器无法重绘它。尝试使用超时函数调用长操作。

即 - 编写一个最终会调用长时间运行代码的函数。- 编写一个只更改光标的函数 - 将代码以超时运行长代码放在更改光标的函数中。超时可以小到 50 毫秒。足以让浏览器更新光标。

# r - 难以决定将我的时间花在 R 中的大数据分析上

> ID：12975550
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:40:56.337
> 
> 标签：r, data-analysis

我知道 R，我知道 SQL，我使用 Windows，我有 0 美元的预算，我有 1 TB 的数据，我有 12 个处理器，我有 96GB 的 RAM，如果速度收益会得到回报，我会积极学习新软件从长远来看。

我需要运行描述性统计和回归。

我有太多的选择。我应该把所有的精力都用在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:44:13.583

嗯，这*是*一个很大的话题。

我们确实写了一篇关于[R 并行处理](http://www.jstatsoft.org/v31/i01)[*技术现状的*](http://www.jstatsoft.org/v31/i01)[调查论文](http://www.jstatsoft.org/v31/i01)*，您可以从它开始。虽然现在已经三年了，但大部分讨论仍然存在。*

 *否则，我建议从对你来说真正重要的东西开始中小型，并尝试让它更快地进行。在[r-sig-HPC 列表（gmane 链接）](http://news.gmane.org/gmane.comp.lang.r.hpc)列表中，许多人很乐意提供具体的帮助。*

# javascript - 使用事件侦听器将地理编码 long / lat 添加到输入字段

> ID：12975553
> 
> 赞同：0
> 
> 时间：2012-10-19T13:41:03.763
> 
> 标签：javascript, google-maps, google-maps-api-3, latitude-longitude

我想根据位置搜索使用 long 和 lat 填充 2 个输入字段。我尝试了许多不同的方法来添加监听器，但无法让它工作。寻求帮助。

首先是我的 Javascript 和文档负责人

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?&sensor=true">
    </script>
<script type="text/javascript">

var geocoder;
var map;

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
 }

function codeAddress() {
        var address = document.getElementById('address').value;
        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
            google.maps.event.addListener(marker, 'dragend', function (event) {
                document.getElementById("latbox").value = this.getPosition().lat();
                document.getElementById("lngbox").value = this.getPosition().lng();
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }

</script> 
```

然后我在这个下的body html如下

```
<body onload="initialize()" onunload="GUnload()">
  <p>
    Enter an address, The latitude/longitude will appear in the text fields after each search.
  </p>
  <p>
    <input id="address" type="textbox" value="New York, New York">
    <input type="button" value="Get Long and Lat" onclick="codeAddress()">
  </p>

  <div id="latlong">
      <p>Latitude: <input size="20" type="text" id="latbox" name="lat" ></p>
      <p>Longitude: <input size="20" type="text" id="lngbox" name="lng" ></p>
    </div>

  <div id="map_canvas" style="width: 600px; height: 400px"></div>

 </body>
</html> 
```

我遇到问题的部分是这段代码

```
google.maps.event.addListener(marker, 'dragend', function (event) {
            document.getElementById("latbox").value = this.getPosition().lat();
            document.getElementById("lngbox").value = this.getPosition().lng();
        }); 
```

在我进行搜索后，它不会在我的输入字段中填充任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:59:19.567

只有拖动标记时才能运行 dragend 侦听器中的代码。如果您希望在地理编码器返回值时更新这些字段，则需要添加代码来执行此操作：

```
 function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
        document.getElementById("latbox").value = marker.getPosition().lat();
        document.getElementById("lngbox").value = marker.getPosition().lng();

        google.maps.event.addListener(marker, 'dragend', function (event) {
            document.getElementById("latbox").value = this.getPosition().lat();
            document.getElementById("lngbox").value = this.getPosition().lng();
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  } 
```

# objective-c - 我怎样才能在可可中处理这个？从 plist 文件中检索条目？

> ID：12975558
> 
> 赞同：0
> 
> 时间：2012-10-19T13:41:10.213
> 
> 标签：objective-c, cocoa

我有巴西政府当局提供的这个小 excel 文件，它包含巴西每个城市的记录，每个城市的邮政编码范围及其“城市代码”。

我需要检索给定城市的“城市代码”。

我想最好的方法是根据显示邮政编码范围的前两列解析城市的给定邮政编码并返回其“城市代码”。

我相信使用 AppleScript 可以为给定的 Excel 文件编译 plist 文件。但是，一旦我解析了邮政编码，有人可以指点我几行 ObjectiveC 代码来从 plist 文件中检索给定的条目吗？

请参阅[http://www.idanfe.com/dl/codes.xls.zip上的 excel 文件](http://www.idanfe.com/dl/codes.xls.zip)

谢谢。

我已将示例 plist 文件上传到[http://www.idanfe.com/dl/cityCodes.plist](http://www.idanfe.com/dl/cityCodes.plist)

进一步说明：

我将解析一个邮政编码值，例如：01123010，它在 01001000 和 05895490 的范围内，所以我的例程应该返回城市代码 = 3550308 和城市名称 = 圣保罗。

我不知道如何实现这一点，我可能错误地构建了示例 plist。

我相信我可以使用 AppleScript 构建一个 plist 文件，从 Excel 表中读取。

但是检索给定邮政编码范围的城市代码是一个难题。

+++ 编辑：+++

我想我已经解决了它，但它看起来有点笨拙，就像我写的几乎所有东西一样。

此 AppleScript 读取 Excel 表并写入 plist 文件：[http ://www.idanfe.com/dl/creating.scpt.zip](http://www.idanfe.com/dl/creating.scpt.zip)

在这里您可以找到 1 MB plist 文件：[http ://www.idanfe.com/dl/cityCodes.plist.zip](http://www.idanfe.com/dl/cityCodes.plist.zip)

这是我为获取所需的城市代码而编写的代码：

```
NSString *zipCodeString;
zipCodeString = @"99990000";

NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"cityCodes" ofType:@"plist"];
NSDictionary *cityCodes_dictionary = [NSDictionary dictionaryWithContentsOfFile:plistPath];
NSArray *allKeys = [cityCodes_dictionary allKeys];

int i = 0;
for (i = 0 ; i <= [allKeys count]; i++) {
    NSString *someKey = [allKeys objectAtIndex:i];
    NSRange range08 = NSMakeRange (0, 8);
    NSRange range88 = NSMakeRange (8, 8);
    NSString *startZipCode = [someKey substringWithRange:range08];
    NSString *finalZipCode = [someKey substringWithRange:range88];
    int startZipCodeInt = [startZipCode intValue];
    int finalZipCodeInt = [finalZipCode intValue];

    if(startZipCodeInt <= [zipCodeString intValue] && finalZipCodeInt >= [zipCodeString intValue]){
        NSLog(@"we found a winner");
        NSString *cityCode = [NSString stringWithFormat: @"%@",[[cityCodes_dictionary objectForKey:someKey]objectForKey:@"City Code"]];

        [cityCodeIBGEField setStringValue:cityCode];
        NSLog(@"cityCode = %@",cityCode);
        break;
    } else {
       // NSLog(@"no winners");
    }
} 
```

基本上，我将起始邮政编码和最终邮政编码附加到一个 16 位数字的字符串中，因此我在 plist 文件中创建了一条记录。

然后，在搜索城市代码时，我将长键（2 个邮政编码）分解为 2（返回正常邮政编码）并搜索以查看哪个记录适合我需要城市代码的给定邮政编码。

有些对我来说看起来不是最好的，但令我惊讶的是，代码非常快，虽然在一个循环中。

我会很感激评论...

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:18:53.590

我会使用 indexOfObjectPassingTest: 来做这种搜索。像这样的东西：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"cityCodes" ofType:@"plist"];
    self.cityCodes_dictionary = [NSDictionary dictionaryWithContentsOfFile:plistPath];
    [self findCityWithZip:@"01123010"];
}

-(void)findCityWithZip:(NSString *) searchZip {
    NSUInteger indx = [self.cityCodes_dictionary.allKeys indexOfObjectPassingTest:^BOOL(NSString *zip, NSUInteger idx, BOOL *stop) {
        NSString *startZipCode = [zip substringWithRange:NSMakeRange(0, 8)];
        NSString *finalZipCode = [zip substringWithRange:NSMakeRange(8, 8)];
        return (searchZip.integerValue < finalZipCode.integerValue && searchZip.integerValue > startZipCode.integerValue);
    }];
    NSLog(@"%@",[self.cityCodes_dictionary valueForKey:[self.cityCodes_dictionary.allKeys objectAtIndex:indx]]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:59:47.470

如果 plist 结构为字典，则阅读 plist 根本不成问题：

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile: @"cities.plist"];
//NSString *zipStr = [dict valueForKey: @"CityNme"]; //this was an example 
```

那是容易的部分。较难的部分是从 xls 文件解析和构建 plist 文件。

还是我误解了你的问题？

PS：要快速查看字典的 plist 结构，请创建一个模拟字典和 NSLog 它的描述以查看它应该如何（或 writeToFile 以查看文件内容或当然参考文档）

**编辑**

您使用上面的代码将提供的 plist 文件加载到字典中。然后你使用从中检索另一个字典

```
 NSDictionary *city = [dict valueForKey : @"yourZipCodeHere"]; 
```

从那本字典中，您可以得到这样的 cityCode

```
NSString *cityCode = [city valueOrKey: @"City Code"]; 
```

至于你的范围问题，我不确定我是否完全理解。但是您可以使用以下方式获取所有邮政编码的数组

```
NSArray *zipArray = [dict allKeys]; 
```

然后您可以简单地对其进行迭代以获得正确的邮政编码。

PS：我不太了解苹果脚本，并且会对您如何使用它将 xls 转换为 plist 感兴趣。

# iphone - 如何格式化字符串变量中的数据

> ID：12975559
> 
> 赞同：2
> 
> 时间：2012-10-19T13:41:15.690
> 
> 标签：iphone, objective-c, ios, nsdateformatter

我有一个保持日期的 NSString：

```
1900-01-01T11:00:00 
```

我需要格式化它，所以我有一个格式化程序：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"dd/MM/yyyy hh:mm:ss a"]; 
```

现在如何格式化这个字符串？

```
NSString* formatedDateString = [df ???]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:52:29.767

创建一个日期格式化程序，返回给定字符串的日期对象，创建第二个日期格式化程序，从该日期返回所需格式的字符串。

```
NSDateformatter *inputFormatter = [[NSDateformatter alloc] init];
[inputFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];  
[inputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
NSDate *date = [inputFormatter dateFromString:dateString];

NSDateformatter *outputFormatter = [[NSDateformatter alloc] init];
[outputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
[outputFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];  

NSString *outputString = [outputFormatter stringFromDate:date]; 
```

* * *

但是您也可以让输出日期格式化程序决定与语言环境相关的样式：

```
NSDateformatter *outputFormatter = [[NSDateformatter alloc] init];
[outputFormatter setDateStyle:NSDateFormatterShortStyle];  
[outputFormatter setTimeStyle:NSDateFormatterShortStyle]; 
NSString *outputString = [outputFormatter stringFromDate:date]; 
```

对于美国语言环境，您现在应该 cat 所需的格式。

* * *

如果您想为用户强制执行格式“dd/MM/yyyy hh:mm:ss a”，您还应该设置输出日期格式化程序的区域设置。

一个完整的命令行示例。

```
int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSString *dateString1 = @"2012-12-31T11:00:00";
        NSString *dateString2 = @"2012-12-31T14:00:00";
        NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
        [inputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
        [inputFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];

        NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
        [outputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
        [outputFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];

        NSDate *date1 = [inputFormatter dateFromString:dateString1];
        NSDate *date2 = [inputFormatter dateFromString:dateString2];

        NSString *outputString1 = [outputFormatter stringFromDate:date1];
        NSString *outputString2 = [outputFormatter stringFromDate:date2];

        NSLog(@"%@", outputString1);
        NSLog(@"%@", outputString2);

    }
    return 0;
} 
```

如果您不设置语言`[outputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];`环境，如果它不是“en_US”，它将导致与用户的 sefault 语言环境进行格式的丑陋混合

即德语：`31/12/2012 02:00:00 nachm.`这是德语中未使用的格式。

要支持用户的语言和区域设置，您应该改用不同的样式。

* * *

提供的[q&a](https://developer.apple.com/library/ios/#qa/qa1480/_index.html) rmaddy 表明，在极少数情况下，解析格式会被重写。为避免这种情况，请将输入格式化的格式设置为特定的语言环境，例如`[inputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:57:05.743

您需要创建两个日期格式化程序，一个用于解析，一个用于格式化；您的解析格式为“yyyy-MM-ddThh:mm:ss”，输出格式为“dd/MM/yyyy hh:mm:ss a”。所以，像这样：

```
NSString * targetString = @"1900-01-01'T'11:00:00";

NSDateFormatter *parseFormat = [[NSDateFormatter alloc] init];
[parseFormat setDateFormat:@"yyyy-MM-ddThh:mm:ss"];
NSDate * date = [parseFormat dateFromString:targetString];

NSDateFormatter * outputFormat = [[NSDateFormatter alloc] init];
[outputFormat setDateFormat:@"dd/MM/yyyy hh:mm:ss a";
NSString * outputString = [parseFormat stringFromDate:date]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-19T13:44:03.670

获取当前日期的示例：

```
-(void) getDate

{
    NSString *theDate;    
    NSString *theTime;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd"];        
    NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
    [timeFormat setDateFormat:@"HH:mm:ss"];
    NSDate *now = [[NSDate alloc] init];
    theDate = [dateFormat stringFromDate:now];
    theTime = [timeFormat stringFromDate:now];
    //2012-09-21 02:00:00
    self.deviceCurrentTime=[NSString stringWithFormat:@"%@ %@",theDate,theTime];
} 
```

# php - 如何将数据发布到 php 服务...SOAP

> ID：12975560
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:41:19.910
> 
> 标签：php, javascript, soap, soap-serialization

下面我用它的客户端在php中编写了一个soap webservice的代码，它工作正常，实际上是php的新手，所以不知道如何从html页面将数据发布到我的服务器php服务，我知道使用javascript它是可能，但如何......任何代码或有用链接的帮助将不胜感激。

```
<?php
require_once "lib/nusoap.php";

function getProd($username,$password) {
   $user = "root";  
$pswd = "root";  
$db = "LOGIN";  
$conn = mysql_connect('localhost', $user, $pswd);  
mysql_select_db($db, $conn);  
//run the query to search for the username and password the match  
$query = "SELECT * FROM PEOPLE WHERE USERNAME = '$username' AND PASSWORD = '$password'";  
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());  
//this is where the actual verification happens  
if(mysql_num_rows($result) > 0)  
  $valid="LoginSucessful";
  else
  $valid="LoginFailed";
  return $valid;
}

$server = new soap_server();
$server->configureWSDL("productlist", "urn:productlist");

$server->register("getProd",
    array("username" => "xsd:string","password" => "xsd:string"),    
    array("return" => "xsd:string"),
    "urn:productlist",
    "urn:productlist#getProd",
    "rpc",
    "encoded",
    "Get a listing of products by category");

if ( !isset( $HTTP_RAW_POST_DATA ) ) $HTTP_RAW_POST_DATA =file_get_contents( 'php://input' );
$server->service($HTTP_RAW_POST_DATA);

  #client of service#

 <?php
require_once "lib/nusoap.php";
$client = new nusoap_client("http://localhost/expa/productlis.php");
$result = $client->call("getProd",array("category" => "admin","item" => "admin"));

Overall just need to pass parameter to the php function. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:06:44.170

有几种方法可以从用户那里获取数据：

**通过 url 参数传递数据：**

```
<a href="index.php?foo=bar">Foo equals Bar</a>

<?php 

    $foo = (isset($_GET['foo'])) ? $_GET['foo'] : 'undefined';

    echo "foo equals $foo";
?> 
```

**一个直接的形式：**

```
// index.php
// An example form that loops back to itself.
<form action="index.php" method="post" id="the_demo_form">
    <fieldset>
        <label for="foo">Foo</label>
        <input type="text" name="foo">  
    </fieldset>
    <input type="submit"/>
</form>
<pre>
<?php
    // the $_POST global contains the data sent in the request.
    var_dump($_POST);
 ?>
</pre> 
```

**Ajax** 如果您需要在不通过 javascript 重新加载的情况下提交数据，您将使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)页面。这是一个使用 jQuery 的示例，它捕获表单提交事件并在不重新加载页面的情况下发送表单。

```
// index.php
// An example form
<form action="index.php" method="post" id="the_demo_form">
    <fieldset>
        <label for="foo">Foo</label>
        <input type="text" name="foo">  
    </fieldset>
    <input type="submit"/>
</form>

<script>
 $(document).ready(function(){
    $("#the_demo_form").submit(function(event){ 
        // This prevents the browser from following the form.
        event.preventDefault();
        // We take the data and send it to server via AJAX.
        $.ajax({
            // set this to server side script
            url : "index.php",
            data : $(this).serialize(),
            success: function(data){
                alert("eureka!");
            }
        });
    });
});
</script> 
```

# android - 通过phonegap插件启动android活动

> ID：12975562
> 
> 赞同：2
> 
> 时间：2012-10-19T13:41:28.063
> 
> 标签：android, cordova, augmented-reality, phonegap-plugins

我想`AugmentedReality phonegap plugin`在android上创建一个。我有`AugmentedReality`android上的源代码。我想使用`push button`on`phonegap`应用程序启动这个 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:47:59.643

所以你需要[编写一个插件](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)来启动 AR 代码。基本上，您将编写一个 JS 文件来调用您的 Java 代码。在您的 Java 代码中，您将从 PhoneGap API 扩展插件类，并启动您的 AR 代码，您将触发一个意图。这方面的例子包括：

[https://github.com/phonegap/phonegap-plugins/blob/master/Android/BarcodeScanner/2.0.0/src/com/phonegap/plugins/barcodescanner/BarcodeScanner.java](https://github.com/phonegap/phonegap-plugins/blob/master/Android/BarcodeScanner/2.0.0/src/com/phonegap/plugins/barcodescanner/BarcodeScanner.java) https://github.com/phonegap/phonegap -plugins/blob/master/Android/ContactView/ContactView.java

已经有一个适用于 Android 的 AR 插件：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/AugmentedReality-Wikitude](https://github.com/phonegap/phonegap-plugins/tree/master/Android/AugmentedReality-Wikitude)

# git - Git / Mercurial：结构中的单独回购

> ID：12975563
> 
> 赞同：4
> 
> 时间：2012-10-19T13:41:28.817
> 
> 标签：git, frameworks, bitbucket, php

我正在尝试登上[Composer](http://getcomposer.org/) / [Packagist](https://packagist.org/)火车，为此，我正在尝试了解管理我的工作流程的最佳方式，以便我可以使用我选择的框架和应用程序创建 composer 包，但如果我可以的话，该死的找出一种使用 Git/Github 或 Hg/BitBucket（或两者兼有）的方法。

**当前结构/工作流程**

```
%path%/sites/[framework]
 - contains up to date framework git repo  
%path%/sites/[framework]/application
 - contains app specific code and is a bitbucket repo
*%path%/www/[appname]_public
 - contains public files and is a bitbucket repo i.e. "public_html" folder 
```

使用正确的别名，这适用于我当前的站点*（每个站点都是“/sites”中的一个单独的文件夹）*。而且由于我使用两种独立的 repo 机制，我可以随时更新该特定站点的框架，而不会真正损害我的应用程序，反之亦然。

由于这些包包含在“应用程序”文件夹的子文件夹中（因此我可以创建和测试它们），我如何将这些文件夹“包装”为包作为单独的存储库，以便我可以将它们作为独立的作曲家包提供在 github 或比特桶？我有点不知所措。

```
%path%/sites/[framework]/application/[module]
 - contains controllers, models, views, etc... to be wrapped up as a composer
   "package" and made available on github or bitbucket as its own repo. 
```

也许这里有人可以帮我了解这方面的逻辑，或者如何设置它，因为我无法理解如何去做。可能吗？我是否在思考这个问题？

也许我的整个思维方式都是错误的。使用我现有的结构，我试图完成这项任务，但 Git 子模块或 HG 嵌套存储库似乎并没有像我预期的那样工作。

我的工作流程是否存在严重缺陷，或者我需要更多的 Git 知识来完成这项工作？有没有更简单/更好的方法？如果我可以将 Framework/SiteApplicationCode/Packages 保留为单独的存储库，并且缺少一些我缺少的机制/逻辑，我将很高兴地重建我的结构/工作流程。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:42:04.727

%path%/sites/[framework]/application/[module] 应该是一个 git 存储库，您可以通过将其推送到某个公共（仅在您想要的情况下对您的公司公开）位置（例如 git.yourcompany.com ）与他人共享。

然后，您可以在 satis.company.com 创建一个可访问的 satis composer 存储库，您将使用一个引用您的公共存储库的 json 文件对其进行初始化。确保首先为每个模块创建 composer.json 文件，以使它们可安装。

然后，使用每个应用程序的 composer.json 文件重新安装您的项目，这将获取所需版本的所需模块。它们将出现在 %path%/sites/[framework]/application/vendor/ 中，并且会生成一个自动加载文件。

如果你的代码可以在 github 上发布，你可以跳过 git+satis 部分，将你的模块提交到 packagist.org

我可能误解了你的结构，但我希望你明白

# xml - xml 转换的持续集成

> ID：12975565
> 
> 赞同：1
> 
> 时间：2012-10-19T13:41:30.077
> 
> 标签：xml, xslt, continuous-integration

Hullo：我正在寻找一种用于 XML 转换的持续集成工具。在办公室，我们使用 Atlassian Bamboo，它很好地满足了以下目的：

1.  我们监控一个用于推送 XML 文档的 repo
2.  我们有通过推送的 XML 处理 XSL 转换的 Ant 目标
3.  每个人都很开心

没那么快。我们如何在此基础上构建测试？如果Ant`exit != 0`没有找到 XML 文件，或者文件构造错误并且无法解析它，Ant 也不会。

我们必须制作一些工具来读取构建计划的日志，捕获来自 Ant 的任何 [Error] 或 [Warn] 消息，并提供生成警报的逻辑。此外，我认为此类工具应该与 JUnit 或类似工具兼容，以便 Bamboo 可以将其作为测试运行。

所以我想知道：您是否见过任何准备处理 XML 转换的持续集成工具？还是我应该停止漂移并开始 scipting？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:10:59.143

我建议将[SonarQube](http://www.sonarqube.org/)集成到您的构建过程中。有一个可用的 XML 插件可用于检查 XML 验证和其他检查。如果这些规则中的任何一个被打破，那么另一个插件可能会使您的构建失败。

*   [SonarXML 插件](https://docs.sonarqube.org/display/PLUG/SonarXML)
*   [构建断路器](https://github.com/SonarQubeCommunity/sonar-build-breaker)（市场上不再提供，请参阅[SonarQube / Plugins library / Other Plugins](https://docs.sonarqube.org/display/PLUG/Other+Plugins)）

# java - 无法通过命令提示符编译

> ID：12975568
> 
> 赞同：0
> 
> 时间：2012-10-19T13:41:34.167
> 
> 标签：java

```
import java.io.DataInputStream;

class Reading{

    public static void main(String ar[]) throws Exception {
        DataInputStream din = new DataInputStream(System.in);

        int intNumber = 0;
        float floatNumber = 0.0f;

        System.out.println("Enter integer and float number");

        intNumber = Integer.parseInt(din.readLine());
        floatNumber = Float.valueOf(din.readLine()).floatValue();

        System.out.println("Integer" + intNumber);
        System.out.println("Float" + floatNumber);
    }
}

/* Output

Note: Reading.java uses or overrides a deprecated API.

Note: Recompile with -Xlint:deprecation for details.

*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:43:54.643

你实际上编译得很好。输出包含一些警告，因为您似乎使用了一些已弃用的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:44:34.807

`DataInputStream.readLine()`是`deprecated`方法。**它现在可以正常工作，**但建议使用一些 Reader stream( `BufferedReader`) 来读取日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:50:26.960

已`din.readLine()`弃用，您可以`javac -Xlint YouClass.java`在下次查看错误时使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:54:12.077

这只是一个警告，您仍然可以获得输出

有关已弃用 Api 的详细信息，请参阅

[已弃用的 API 详细信息](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/deprecation/deprecation.html)

# jquery - 单击图像时看起来像卡通云的 UI 组件

> ID：12975572
> 
> 赞同：0
> 
> 时间：2012-10-19T13:41:51.937
> 
> 标签：jquery, css, user-interface

我正在做一个struts项目。我有一些 UI 要求。我有一张桌子 - 物品的详细信息。其中 1 列可以有 3 个值。我想使该列具有交互性，以便通过单击任何行中该列中的数据，会出现一个窗口或类似托盘的东西，它应该有一组值可供选择。

我想知道这是否可以通过 Spinner 或 Select 在特定行完成。但我想要一些更具互动性的东西。

如果有人对如何做到这一点有任何建议：也许是 Jquery、Ajax 或 JavaScript。

简而言之，我想要一些窗口/平台（类似于卡通中的思想泡泡），它应该包含一些可以调用某些动作的元素。这必须在单击元素时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:18:27.207

你在想[馅饼菜单](http://en.wikipedia.org/wiki/Pie_menu)吗？

以下是您可以使用的饼图菜单的一些 javascript 实现/示例：

[http://www.webtoolkit.info/javascript-pie-menu.html](http://www.webtoolkit.info/javascript-pie-menu.html)
[http://wewillbeok.com/radial/](http://wewillbeok.com/radial/)
[http://www.switchonthecode.com/tutorials/javascript-tutorial-radial-menus-part-1](http://www.switchonthecode.com/tutorials/javascript-tutorial-radial-menus-part-1)
[http://tikku.com/jquery-radmenu-plugin#radmenu_tutorial_4](http://tikku.com/jquery-radmenu-plugin#radmenu_tutorial_4)

# asp.net - IIS 错误 - 此程序无法显示网页。

> ID：12975573
> 
> 赞同：0
> 
> 时间：2012-10-19T13:41:55.387
> 
> 标签：asp.net, iis, iis-6, dynamic-data, telerik-open-access

以下是详细信息：

我们有一个使用 Telerik Open access 的动态数据网站，通过 IIS 6 托管。该应用程序运行良好，在生产中没有任何问题。最近，我们在 SQL 数据库中添加了两个新表。这些已添加到 Telerik Open Access 模型中，在 Visual Studio 2012 中进行测试时，从未出现任何问题并且运行良好。

然后我们发布到生产环境，当我直接通过 IIS 6 浏览到应用程序以确保它运行时，我们得到错误 - “这个程序无法显示网页”。

所以我们从 Telerik 开放访问模型中删除了这两个表并重新发布，应用程序运行良好。所以我们再次添加了表，同样的错误来自 IIS。

这是没有意义的，因为 IIS 通常会给出一个可以理解的错误。为什么 IIS 会在向模型中添加两​​个附加实体时出现问题，而 Visual Studio 却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:56:20.050

看起来模型以某种方式被缓存。您可以尝试重新启动 IIS 以避免模型中的新实体出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:11:47.437

我们有一个与模型关联的元数据文件，但配置不正确。当我们修复它并重新部署时，它工作得很好。奇怪的是，Visual Studio 忽略了该错误，并将其发布到我们的错误。奇怪的。

# c - Arduino Mini 和 WiFi shield -> 不存在（状态 255）

> ID：12975575
> 
> 赞同：3
> 
> 时间：2012-10-19T13:42:03.107
> 
> 标签：c, arduino, wifi, circuit

亲爱的 Stackoverflowers！

我的 WiFi 防护罩有问题。

如下图所示，我正在试验 Arduino Mini 和 WiFi shield。

我已经阅读了教程指南并在 Mini 和屏蔽之间连接了所有必要的引脚。我使用教程中提供的示例代码，例如读取 WiFi shield 的 MAC 地址或扫描我附近的网络。

**但我得到的任何信息都是错误消息，即屏蔽未连接！** 但是两个引脚 7（握手引脚）之间存在连接，甚至连接到任何其他所需的引脚。我什至用一个额外的 5V 电源（图中的稳压器）来支持我的电路，那它有什么问题呢？或者可能是WiFi屏蔽本身损坏或出现故障？如何验证这一点？

最后一个问题是：他们提供的防护罩是否已安装固件，还是用户必须安装它？

我使用的代码是例如：

```
uint8_t wl_status = 0;

void setup()
{ // code to run once 
  // Open serial communications
  Serial.begin(115200);
  Serial.println("*** Arduino board online ***");

  // check for the presence of the shield:
  wl_status = WiFi.status();
  if (wl_status == WL_NO_SHIELD)
  {
    Serial.println("-E- WiFi shield not present"); 
    // don't continue:
    //while(true);
  }
  else
  { // Initialize Wifi
    Serial.println("-I- Initializing Wifi..");
    printAddress(1);

    // Scan for existing networks:
    Serial.println("-I- Scanning available networks..");
    listNetworks();
  }

  Serial.print("-D- Wifistatus : ");
  Serial.print(wl_status, DEC);
  Serial.println("");
} 
```

printAddress() 函数简单地打印出屏蔽的 MAC 地址。

感谢您的帮助..提前致谢！

致以友好的问候， Martin Schürer ![在此处输入图像描述](../Images/84969a5ee39b66d663a7b3bc7114fc73.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:34:24.350

你试过去掉跳线吗？它将屏蔽置于编程模式。图片[在这里](https://stackoverflow.com/questions/13756818/arduino-wifi-shield-stop-working-at-wifi-status)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:27:59.450

谢谢您的回答。我证明了不同的电源是否可以工作；问题仍然存在。

Arduino支持建议我们应该使用板子的SPI连接而不是接线。值得一试，所以我将 WiFi-shield 与 Arduino Uno 结合起来，终于可以开始练习了。忘记 Arduino Mini，改用 Uno 或 Mega。

根据启动故障，当前固件版本仍然存在bug，例如服务器端和客户端在几秒钟后连接断开。我建议经常检查 git 存储库以获取更新。问题 #9（几秒钟后连接断开）仅在服务器端解决，但问题仍然存在于客户端。我将等待下一个固件版本。

问候， Haidosu

# jquery - 为什么平滑滚动在滚动之前会闪烁？

> ID：12975577
> 
> 赞同：11
> 
> 时间：2012-10-19T13:42:03.617
> 
> 标签：jquery, scroll, smooth-scrolling

我正在构建一个单页网站，该网站通过锚标签分为多个部分。当您单击导航链接时，它会平滑滚动到该部分（只有资金领域和关于我们的部分是完整的），但是，似乎大约 50% 的时间当您单击链接时，它平滑滚动到的背景图像会闪烁jQuery 向上或向下滚动。

对我来说，似乎 HTML 正试图立即转到锚点，因此闪烁，但随后 jQuery 说，等等，我需要慢慢滚动。

我不确定如何解决这个问题。

jQuery：

```
// SlowScroll Funding Areas
$(document).ready(function(){

// 'slowScrollTop' is the amount of pixels #teamslowScroll
// is from the top of the document

    var slowScrollFunding = $('#funding-areas').offset().top;

// When #anchor-aboutus is clicked

    $('#anchor-funding-areas').click(function(){
        // Scroll down to 'slowScrollTop'
        $('html, body, #home-wrap').animate({scrollTop:slowScrollFunding}, 1000);
    });
});

// SlowScroll About Us
$(document).ready(function(){
// 'slowScrollTop' is the amount of pixels #slowScrollTop
// is from the top of the document

    var slowScrollTop = $('#about-us').offset().top + 446;

// When #anchor-aboutus is clicked

$('#anchor-aboutus').click(function(){
    // Scroll down to 'slowScrollTop'
    $('html, body, #aboutus-wrap').animate({scrollTop:slowScrollTop}, 1000);
});
}); 
```

我非常感谢任何和所有建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-11T06:29:47.850

尝试`event.preventDefault();`在单击功能后添加。

这会阻止链接做它应该做的事情（立即跳转到锚点）并防止竞争条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-02T23:28:41.890

```
$('#anchor-aboutus').click(function(){
  // Scroll down to 'slowScrollTop'
  $('html, body, #aboutus-wrap').animate({scrollTop:slowScrollTop}, 1000);
  event.preventDefault();
  event.stopPropagation();
}); 
```

甚至更清洁：

```
$('#anchor-aboutus').click(function(){
  // Scroll down to 'slowScrollTop'
  $('html, body, #aboutus-wrap').animate({scrollTop:slowScrollTop}, 1000);
  return false;
}); 
```

原因如下：

*   [event.preventDefault() 与返回 false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# php - 如何向 RECESS 添加身份验证？

> ID：12975578
> 
> 赞同：1
> 
> 时间：2012-10-19T13:42:11.767
> 
> 标签：php, recess

我有一个基于 RECESS 的项目。我想在我添加/编辑/删除我的新模型对象的视图中添加密码保护，它们只能在通过密码输入视图后访问，如果有人尝试直接访问所述视图应该再次重定向到登录页。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:44:59.563

是的你可以。

1.  创建一个类（authController）来处理认证连接数据库查询用户信息
2.  在主应用程序控制器中包含 authController 文件，即 (MyRecessApp.class.php)
3.  在 master.layout.php 中添加条件以检查用户是否已登录以及是否呈现内容或登录表单
4.  重要提示：将 authController 需要的 session_begin() 放在recess-conf.php 文件中。
5.  推荐：我通常将“loginUser”方法添加到用户控制器，或者您可以让用户控制器扩展 authControllers 方法

# nservicebus - 最佳线程数 NServiceBus

> ID：12975580
> 
> 赞同：3
> 
> 时间：2012-10-19T13:42:19.083
> 
> 标签：nservicebus

我们试图找出用于我们的 NServiceBus 服务的最佳线程数。我们在具有 2 个四核的机器上运行它。我们一直遇到队列备份问题。我们从 100 个线程开始，然后增加到 200 个，情况变得更糟。我们把它降到 75，然后是 50，它看起来甚至更好。是否有一些基于我们拥有多少 CPU 的最佳数字，或者我们应该使用一些经验法则来确定要运行的线程数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:53:26.000

您运行的每个线程都有附加的开销。如果您有 2 个四核，那么您将能够同时运行 8 个线程。每个线程将消耗一个核心。

如果你有超过 8 个线程，那么你就有可能开始做 LESS 有用的工作，而不是更多。这是因为每次windows决定让一个当前不消耗核心的线程轮流做一些事情时，它需要存储一个正在运行的线程的状态，然后恢复即将运行的线程的旧状态-然后让线程继续下去。如果您有大量线程，您将花费大量时间在线程之间切换而无济于事。

如果您有一堆等待 IO 的线程被阻塞（例如，一条消息完成写入磁盘以便可以得到它），那么您可能能够运行比核心更多的线程，并且仍然可以完成一些有用的事情其中一些线程将等待其他事情完成。这是一个复杂的主题，对于“我应该使用多少线程”没有真正的答案。一个好的经验法则是为每个内核设置一个线程，然后尝试使用它来获得更多吞吐量。在真实条件下进行测试是找到最佳位置的唯一真实方法。您可能会发现您只需要一个线程来处理消息，并且该线程有一半的时间被阻塞等待消息进入......

显然，即使是我所描述的也过于简单化了。Windows 需要访问内核来做 OSy 的事情，所以即使你有 8 个内核，你的所有 8 个线程也不会总是运行，因为 Windows 线程正在轮流......然后你有 IO 线程等......

# bash - 用于将文件备份到远程 FTP 的 Bash 脚本。删除旧文件

> ID：12975588
> 
> 赞同：1
> 
> 时间：2012-10-19T13:42:47.773
> 
> 标签：bash, ftp, backup, remote-server

我正在编写一个 bash 脚本来将备份发送到远程 ftp 服务器。备份文件是使用 WordPress 插件生成的，所以从一开始就为我完成了一半的工作。

该脚本做了几件事。

1.  它在本地备份目录中查找任何早于 x 的文件并删除它们
2.  它连接到 FTP 并将备份文件放在以当前日期为名称的目录中
3.  它会删除早于 x 的备份的所有备份目录

由于我不精通 bash，这是我在网上找到的一堆脚本的混搭。

这是我的脚本：

```
#! /bin/bash 

BACKDIR=/var/www/wp-content/backups

#----------------------FTP Settings--------------------#

FTP=Y

FTPHOST="host"
FTPUSER="user"
FTPPASS="pass"
FTPDIR="/backups"
LFTP=$(which lftp)      # Path to binary

#-------------------Deletion Settings-------------------#

DELETE=Y

DAYS=3 # how many days of backups do you want to keep?

TODAY=$(date --iso) # Today's date like YYYY-MM-DD
RMDATE=$(date --iso -d  $DAYS' days ago') # TODAY minus X days - too old files

#----------------------End of Settings------------------#

if  [ -e $BACKDIR ]
then

if  [ $DELETE = "Y" ]
then
    find $BACKDIR -iname '*.zip' -type f -mtime +$DAYS -delete
    echo "Old files deleted."
fi

if  [ $FTP = "Y" ]
then

    echo "Initiating FTP connection..."

    cd $BACKDIR

    $LFTP << EOF
    open ${FTPUSER}:${FTPPASS}@${FTPHOST}
    mkdir $FTPDIR
    cd $FTPDIR
    mkdir ${TODAY}
    cd ${TODAY}
    mput *.zip
    cd ..
    rm -rf ${RMDATE}
    bye

EOF

echo "Done putting files to FTP."

fi

else
    echo "No Backup directory."
    exit
fi 
```

有两件事我无法完成：

1.  find 命令不会删除本地备份目录中的任何旧文件。
2.  我希望 mput 只放置今天创建的 .zip 文件。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:56:36.717

仅发送今天创建的 zip 文件：

```
MPUT_ZIPS="$(find $BACKDIR -iname '*.zip' -type f -maxdepth 1 -mtime 1 | sed -e 's/^/mput /')"

[...]
$LFTP << EOF
open ${FTPUSER}:${FTPPASS}@${FTPHOST}
mkdir $FTPDIR
cd $FTPDIR
mkdir ${TODAY}
cd ${TODAY}
${MPUT_ZIPS}
cd ..
rm -rf ${RMDATE}
bye

EOF 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:10:15.870

2）如果您将今天的备份文件放在单独的目录中或将它们链接到单独的目录，您可以`cd today`并且只需传输这些文件。

# java - 函数不返回双精度值，它返回 0

> ID：12975589
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:42:48.443
> 
> 标签：java, return-value

下面是我正在调用的函数，但无论我通过什么，它都会返回 0。

```
public static Double calc(double methods, double attributes) {
    double a=0;
    for (int i=0;i<k;i++) {
        for (int j=0;j<l;j++) {
        if(matrix[i][j]==1)
                a++;
        }
     }          
    Double v= new Double( a/(methods*attributes));
    System.out.println("The value of v = " + v.doubleValue() );
    return v.doubleValue();
} 
```

该`System.out`语句在函数中打印正确的值，但返回值打印 0.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:19:00.540

我已经运行了一个演示：

```
public class demo1{
public static Double calc(double methods, double attributes) {
    double a=0;
    int k=2;
    int l=2;
    //int[][] matrix=new int[2][2];
    //int 
    int[][] matrix={{1,2},{2,1},{2,2},{2,2}};
    for (int i=0;i<k;i++) {
        for (int j=0;j<l;j++) {
        if(matrix[i][j]==1)
                a++;
        }
     }          
    Double v= new Double( a/(methods*attributes));
    System.out.println("The value of v = " + v.doubleValue() );
    return v.doubleValue();

}

public static void main(String s[]){

Double x = calc(2.0,3.0);       
System.out.println(x);
}

} 
```

输出如下：

```
The value of v = 0.3333333333333333

0.3333333333333333 
```

所以它没有返回 0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:59:28.947

我从你的函数中取出了循环（它所做的只是给 a 一个值）。我添加了一个主要的（见下文）。

返回工作正常。也许问题在于您如何使用返回值？

```
public class Test {

    public static Double calc(double methods, double attributes) {

        double a=2.0;

        Double v= new Double( a/(methods*attributes));
        System.out.println("The value of v = " + v.doubleValue() );
        return v.doubleValue();

    }

    public static void main(String [] args) throws Exception
    {       
        Double x = calc(2.0,3.0);       
        System.out.println(x);  
    }

} 
```

# mysql - wordpress 搜索表单 sql 查询

> ID：12975590
> 
> 赞同：1
> 
> 时间：2012-10-19T13:42:49.927
> 
> 标签：mysql, forms, wordpress

我正在尝试构建一个自定义搜索`form`来查询我`wordpress DB`的结果。我似乎遇到的问题是表单没有发送任何内容来执行操作，只是说`404 not found`。

查询数据库的函数位于，`functions/theme-search.php`我已`function search_db`在其中声明。

我哪里错了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:47:05.683

查看这部分代码。这不是防弹的，但我假设第一个`WP_Query call`是用于搜索

```
function my_posts_request_filter($input)
{
    if ( is_search() && isset($_GET['s'])) {
        global $wpdb;

        // Make your sql code

        remove_filter('posts_request','my_posts_request_filter');
    }
    return $input;
} 
```

# php - 使用节点位置生成创建力定向布局 gexf 文件

> ID：12975593
> 
> 赞同：1
> 
> 时间：2012-10-19T13:42:59.593
> 
> 标签：php, graph, directed-graph

在我的数据库中，我有节点和边。

位置必须在 gexf 生成时生成，节点不得重叠并且

生成这种图： [http ://www.nwoods.com/components/images/force-directed-layout.png](http://www.nwoods.com/components/images/force-directed-layout.png)

我使用 Sigma.js 来展示图表。

*如何使用力导向算法计算节点位置，并使用根项？*

或者有一个布局可以从节点和边缘生成一个不重叠和输出的布局，就像上面的这个 png？

编辑：

生成节点位置的PHP代码：

```
 function _generate_gexf_node($test=false){
        $count = 0;     
    foreach ($node_array as $node) {
        $node_size = '22.714287';
        $node_poz = ' x="'.rand(10, 300).'" y="'.rand(10, 300).'" z="'.rand(10, 300).'" ';
        $node_color = ' b="45" g="72" r="216" ';
        $data['node'][] = '<node id="'.$node['node_id'].'" label="'.$node['label'].'">
    <attvalues>
    <attvalue for="authority" value="0.01880342"/>
    <attvalue for="hub" value="0.01880342"/>
    </attvalues>
    <viz:size value="'.$node_size.'"/>
    <viz:color '.$node_color.'/>
    <viz:position '.$node_poz.'/>
    </node>
        ';
        $count++;
    }
            return $data;
      } 
```

我怎样才能在“运行时”中找到位置，喜欢这个[http://www.nwoods.com/components/images/force-directed-layout.png](http://www.nwoods.com/components/images/force-directed-layout.png)？

我在哪里可以找到一帆胡力定向算法的实现？

还是特殊的 Bubble 布局实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:56:14.037

目前，我也在使用 javascript 进行 Web Graph Visualization。这里有一个名为 gexf-js ( [https://github.com/raphv/gexf-js](https://github.com/raphv/gexf-js) ) 的好项目，但这仅用于绘制图形。

对于我使用 gephi 库的布局内容（这是在 java 中实现的），您可以在此处下载[https://gephi.org/toolkit/](https://gephi.org/toolkit/)。我还发现了 YifanHu 布局算法的一个很好的例子。

如果它可能是一项手动任务，那么您可以在 gephi 程序中导入您的 gexf 文件运行您想要的布局器并将其导出为 gexf。gephi 程序中的大多数功能也可以在工具包库中使用。

希望这有助于美好的一天

# c - 为什么 qsort 不能在我的代码中工作？

> ID：12975594
> 
> 赞同：0
> 
> 时间：2012-10-19T13:43:02.360
> 
> 标签：c

我的代码是仅按一个字段对结构进行排序。

奇怪的是，当长度为 8 而不是 9 时它可以工作。为什么会这样，有什么问题？

```
struct node
{
   int key;//I need to sort by the key
   int val;
};
int comp(const void *a, const void *b)
{
return ((struct node *)a)->key > ((struct node *)b)->key;
}
int main()
{
    int i;
    struct node *a;
    a = malloc(10 * sizeof *a);
    /*I have 8 elements*/
    for (i = 0; i < 6; i++)
         a[i].key = 22;
    a[6].key = 21;
    a[7].key = 20;
    a[8].key = 10;
    /*Before sorting, I print it first*/
    for (i = 0; i < 9; i++)
    printf("%3d", a[i].key);
    printf("\n");
    qsort(a, 9, sizeof(struct node), comp);
    /*The sorted answer*/
    for (i = 0; i < 9; i++)
       printf("%3d", a[i].key);
    printf("\n");
    free(a);
    return 0;
} 
```

输出是：

22 22 22 22 22 22 21 20 10

10 22 22 22 22 22 21 20 22

但是当我将长度更改为 8 时，它可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:44:51.063

“长度”是什么意思？

*   您为 10 个元素分配空间。
*   你对其中的 9 个进行排序。
*   您打印其中的 9 个。

这段代码非常混乱。您需要对正在使用的元素数量有一个明确定义的想法，并且在任何地方都使用相同的元素。提示：它不应该是文字数字。

此外，您的比较函数是错误的，它需要分别为小于、等于或大于的元素返回 -1、0 或 1。您的函数只会返回 0 或 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:44:44.323

根据两个参数的关系，您的比较应该返回一个小于、等于或大于零的值。例如：

```
int comp(const void *a, const void *b)
{
  int key_a = ((struct node *)a)->key;
  int key_b = ((struct node *)b)->key;
  if (key_a<key_b) return -1;
  if (key_a>key_b) return 1;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:50:01.297

请*仔细阅读*[qsort 手册页数](http://pubs.opengroup.org/onlinepubs/9699919799/functions/qsort.html)次。在 Linux 上，键入`man qsort`. 如果使用 GCC，请通过传递`-Wall -g`给`gcc`. （使用另一个编译器，启用所有警告和调试信息）。

之后，`malloc`您最好使用 清除整个区域`memset`。实际上，您应该使用`calloc`like

```
a = calloc (10, sizeof(*a));
if (!a) 
  perror("calloc a"), exit(EXIT_FAILURE); 
```

回想一下，您*总是*应该*测试*`calloc`or的结果`malloc`！

比较器函数获取要比较的东西的地址，并且应该返回一个整数（0 表示相等，负数表示小于，正数表示大于）。

```
int comp(const void *a, const void *b)
{
   const struct node* na = (const struct node*) a;
   const struct node* nb = (const struct node*) b;
   return na->key - nb->key;
} 
```

请学习使用调试器（如`gdb`在 Linux 上）。

# mysql - 为什么行数的差异？

> ID：12975598
> 
> 赞同：0
> 
> 时间：2012-10-19T13:43:24.443
> 
> 标签：mysql

嗨，我不明白为什么我的 MYSQL 行为异常。

在这里我想知道表**site_details**中存在的记录数为了得到这个我已经执行 `select count(*) from site_details;` 了我得到的结果是

```
+----------+
| count(*) |
+----------+
|     2024 |
+----------+ 
```

然后再次验证我已经执行 `mysql> SHOW TABLE STATUS FROM msp LIKE 'site_details'\G` 了我得到的结果

```
 *************************** 1\. row ***************************
           Name: site_details
         Engine: InnoDB
        Version: 10
     Row_format: Compact
           Rows: 1612
 Avg_row_length: 71
    Data_length: 114688
Max_data_length: 0
   Index_length: 81920
      Data_free: 7340032
 Auto_increment: NULL
    Create_time: 2012-10-01 08:05:09
    Update_time: NULL
     Check_time: NULL
      Collation: utf8_general_ci
       Checksum: NULL
 Create_options: 
        Comment: 
1 row in set (0.00 sec) 
```

观察两个查询的行数之间的计数差异

然后在不修改我的表的情况下，我再次执行了相同的查询 `mysql> SHOW TABLE STATUS FROM msp LIKE 'site_details'\G` ，奇怪的是我得到了类似的结果

```
 *************************** 1\. row ***************************
           Name: site_details
         Engine: InnoDB
        Version: 10
     Row_format: Compact
           Rows: 1934
 Avg_row_length: 59
    Data_length: 114688
Max_data_length: 0
   Index_length: 81920
      Data_free: 7340032
 Auto_increment: NULL
    Create_time: 2012-10-01 08:05:09
    Update_time: NULL
     Check_time: NULL
      Collation: utf8_general_ci
       Checksum: NULL
 Create_options: 
        Comment: 
1 row in set (0.00 sec) 
```

观察上述查询的行列，我得到了类似 2024 1612 1934 的结果

为什么会这样？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:47:23.607

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)

> 行数。一些存储引擎，例如 MyISAM，存储确切的计数。对于其他存储引擎，例如 InnoDB，这个值是一个近似值，可能与实际值相差 40% 到 50%。在这种情况下，请使用 SELECT COUNT(*) 获得准确的计数。

所以，这是 InnoDB 数据库的正常行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:48:15.480

```
select count(*)... 
```

现在给你实际的行数

```
select count(1)... 
```

给出第一列不为空的行数

其他的是基于数据库字典的指标，它们不是实时更新的，而是依赖于统计数据等。

有关以下信息，请参见此处`COUNT`：

[http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)

*因此，如果您现在*想要确切的行数 - 重复的和所有的（打开的事务可能除外，具体取决于隔离级别），请**使用`COUNT(*)`.**

# php - 对html表的行进行排序 - mysql

> ID：12975601
> 
> 赞同：1
> 
> 时间：2012-10-19T13:43:43.663
> 
> 标签：php

我有一个名为**forms1**的数据库和一个名为**demo**
表中的字段是**ID**，**Autore**，**Titolo**，**cit**

我希望我有第一行，让我能够对查询检索到的字母数字值进行排序。
**对于排序，我的意思是**：
[如何对从 MySQL 调用的 HTML 表的行进行排序](https://stackoverflow.com/questions/3489783/how-to-sort-rows-of-html-table-that-are-called-from-mysql)

我的问题是根据我的情况调整代码。这是***cerca2.php***：

```
<style>
br {margin-bottom:-10px;}
</style>

<form action="cerca2.php" method="post">
<b>Nome</b>&nbsp;<input type="text" name="Nome">&nbsp;&nbsp;
<b>Numero&nbsp;</b><input type="text" name="Numero">&nbsp;&nbsp;
<b>city&nbsp;</b><input type="text" name="city">&nbsp;&nbsp;
<input type="Submit">
</form>

<style>
tr:nth-of-type(odd) { background-color: AZURE; }
tr:nth-of-type(even) { background-color: CYAN; }
</style>
<style>
tr:hover{background-color:DEEPSKYBLUE;}
</style>

<?php

echo "<table border='1' style='border-collapse: collapse;border-color: silver;'>";  
echo "<tr style='font-weight: bold;'>";  
echo "<td width='auto' bgcolor=”#7FFFD4″&gt;&nbsp;<i>ID<i/></td>";  
echo "<td width='auto' >&nbsp;<i>Nome<i/></td>";
echo "<td width='auto' ></td>";
echo "<td ></td>";
echo "</tr>";

define('DB_NAME', 'forms1');
define('DB_USER', 'root');
define('DB_PASSWORD', '');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
    die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

$Nome = str_replace(' ', '%', $_POST['Nome']);
$Numero = str_replace(' ', '%', $_POST['Numero']); 
$city = str_replace(' ', '%', $_POST['city']); 

$arNome = str_split($Nome);
$arNumero = str_split($Numero);
$arcity = str_split($city);

$Nome='';
foreach ($arNome as $value) 
{
   if ($value=='%') continue;
   $Nome.=$value.'%';

}

$Numero='';
foreach ($arNumero as $value) 
{
   if ($value=='%') continue;
   $Numero.=$value.'%';

}

$city='';
foreach ($arcity as $value) 
{
   if ($value=='%') continue;
   $city.=$value.'%';

}

$sql = mysql_query("SELECT * FROM demo WHERE Autore LIKE '%$Nome%' AND Titolo LIKE '%$Numero%' AND cit LIKE '%$city%' ORDER BY Autore") or die(mysql_error());

$i = 0; while($row=mysql_fetch_array($sql)){
        $i++;
        echo "<tr>";
        echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
        echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
        echo "<td width='auto'>". "</td>";
        echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[2] . "<i/>". "&nbsp;" . "</td>";     
        echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[3] . "<i/>". "&nbsp;" . "</td>";
        echo "</tr>";

}

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:55:18.223

您应该将 LIMIT 包含到您的 sql 查询中，因此您不仅必须对已打印的数据进行排序，而且还必须对隐藏的数据进行排序。

在您的情况下，尝试重新加载页面并使用 $_GET['name_sort'] 更改您的 sql

```
if ($_GET['name_sort'] == 'desc') {
    $sql = mysql_query("SELECT * FROM demo WHERE Autore LIKE '%$Nome%' AND Titolo LIKE '%$Numero%' AND cit LIKE '%$city%' ORDER BY Autore DESC") or die(mysql_error());

} else {

    $sql = mysql_query("SELECT * FROM demo WHERE Autore LIKE '%$Nome%' AND Titolo LIKE '%$Numero%' AND cit LIKE '%$city%' ORDER BY Autore ASC") or die(mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:48:44.680

如果您正在寻找 Javascript 解决方案，[tablesorter](http://tablesorter.com/docs/)就可以完成这项工作。方便又容易。

**编辑**
在最顶部添加：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://tablesorter.com/__jquery.tablesorter.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){ $("table").tablesorter(); });
</script> 
```

[http://pastebin.com/dLJqJQuX](http://pastebin.com/dLJqJQuX)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:49:23.950

如果您想要一个可排序的表，我使用名为“[可排序](http://www.kryogenix.org/code/browser/sorttable/)”的 javascript 库 - 它易于配置和使用。

编辑显示示例 HTML：此 HTML 期望“sortable.js”文件与 HTML 文件位于同一目录中：

```
<html>
  <head>
    <script type="text/javascript" src="sortable.js"></script>
  </head>
  <body>
    <h1>Test Table</h1>
    <table id="myTable" class="sortable">
      <tr>
        <th>First Column</th>
        <th>Second Column</th>
        <th>Third Column</th>
      </tr>

      <tr>
        <td>1</td>
        <td>Hello</td>
        <td>10/01/2012</td>
      </tr>

      <tr>
        <td>2</td>
        <td>Goodbye!</td>
        <td>10/04/2011</td>
      </tr>

      <tr>
        <td>3</td>
        <td>Welcome</td>
        <td>22/09/1985</td>
      </tr>
    </table>
  </body>
</html> 
```

# struts - 开发离线版本的 struts web 应用程序的最佳选择是什么？

> ID：12975606
> 
> 赞同：0
> 
> 时间：2012-10-19T13:43:56.143
> 
> 标签：struts, jetty, executable, war, rcp

我们有一个在 tomcat 服务器上运行的使用 struts 1 开发的 Web 应用程序。现在我们的客户想要一个仅在 Windows 下运行的离线版本。

我想从您那里收集一些建议：拥有此离线版本的最佳方式是什么？从头开始开发一个新的富客户端？（RCP eclipse、RCP netbean 等？）还是尝试使用嵌入式码头服务器和嵌入式数据库（如 hsql）生成可执行战争？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:50:32.863

正如你提到的，我已经看到这成功完成了，使用和嵌入的码头实例，加上和嵌入的数据库。附带的好处是它还可以改善您的开发/测试环境，因为您可以在 IDE 的单元测试中启动整个事情并进行调试:)

干杯

# attributes - Hartl Rails 教程第 8 章：remember_token 是如何工作的？

> ID：12975611
> 
> 赞同：1
> 
> 时间：2012-10-19T13:44:06.710
> 
> 标签：attributes, token, railstutorial.org

在 Michael Hartl 教程的第 8 章中，我们设置了登录页面并在数据库中创建了一个新列来保存一个 base 64 字符串。在本教程中，它被称为 remember_token。在 user.rb 中：

```
 private

    def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
    end 
```

self 有一个名为 remember_token 的属性？这是已经内置的还是在其他地方创建的？也许我只是不太了解这一点。

他写：

> 由于 Active Record 基于数据库列合成属性的方式，没有 self 赋值会创建一个名为 remember_token 的局部变量，这根本不是我们想要的。使用 self 可确保赋值设置用户的 remember_token 以便在保存用户时将其与其他属性一起写入数据库。

我很困惑，用户是如何获得记忆令牌的？它如何知道将其写入该特定列中的数据库？

在 user.rb 中，您有以下代码：

```
attr_accessible :name, :email, :password, :password_confirmation 
```

那里没有关于 remember_token 的内容。它怎么知道在 User.save 中包含这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:44:41.203

在此上下文中，`self`是一个 User 对象，并且它具有属性，因为在[Ruby on Rails 教程的](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)[第 8.2.1 节](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-remember_me)`remember_token`中迁移创建的数据库列。（预先分配给属性是必要的；没有，Ruby 只会创建一个名为 的*局部*变量。）`self``self`*`remember_token`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T16:27:23.937

截至 2018 年，`@remember_token`有一个访问器方法。

[https://www.railstutorial.org/book/advanced_login#code-user_model_remember](https://www.railstutorial.org/book/advanced_login#code-user_model_remember)

```
class User < ApplicationRecord
  attr_accessor :remember_token

  before_save { self.email = email.downcase }

  ...

# Remembers a user in the database for use in persistent sessions.
  def remember
    self.remember_token = User.new_token
    update_attribute(:remember_digest, User.digest(remember_token))
  end

  ... 
```

数据库中没有`remember_token`列。它是一个“虚拟”属性。记住令牌被存储为哈希值`remember_digest`。*

# perl - Perl如何在带有<<参数的字符串块中使用变量

> ID：12975615
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:44:24.043
> 
> 标签：perl

我尝试在`<<`块内使用变量 i 。但是由于编译错误而失败

> 全局符号“$i_0”需要在 D:/development/perl/SupportCases/createFTL.pl 第 76 行显式包名。
> 全局符号“$i_0”需要在 D:/development/perl/SupportCases/createFTL.pl 行显式包名76.
> 全局符号“$i_1”需要在 D:/development/perl/SupportCases/createFTL.pl 处显式包名 76.
> 全局符号“$i_1”需要在 D:/development/perl/SupportCases/createFTL 处显式包名。 pl 第 76 行。
> 全局符号“$i_2”需要在 D:/development/perl/SupportCases/createFTL.pl 处显式的包名称。pl 第 76 行。
> 全局符号“$i_2”需要在 D:/development/perl/SupportCases/ 处显式包名称createFTL.pl 第 76 行。
> 全局符号“$i_0”需要在 D:/development/perl/SupportCases/createFTL.pl 第 76 行显式包名。
> 全局符号“$i_1”需要在 D:/development/perl/SupportCases/createFTL.pl 行显式包名76.
> 全局符号 "$i_2" 需要在 D:/development/perl/SupportCases/createFTL.pl 第 76 行明确的包名称。

如何在 << 块中定义变量？

谢谢

```
my $i = 1;
for ($i = 1; $i <=6; $i++){

my $block = <<BLOCK;
    <#if ((model.fields.txt_Artikel_Z$i?? || model.fields.txt_Artikel_Z$i.value = "") && 
                (model.fields.txt_Artikelnummer_Z$i?? || model.fields.txt_Artikelnummer_Z$i.value = "") &&
                    (model.fields.txt_Anzahl_Z$i?? || model.fields.txt_Anzahl_Z$i.value = "") &&
                        (model.fields.chk_Ware_aus_Z$i_0?? || model.fields.chk_Ware_aus_Z$i_0.value = "") &&
                            (model.fields.chk_Ware_aus_Z$i_1?? || model.fields.chk_Ware_aus_Z$i_1.value = "")&&
                                (model.fields.chk_Ware_aus_Z$i_2?? || model.fields.chk_Ware_aus_Z$i_2.value = "")) 
                                &&
                        (!(model.fields.txt_Artikel_Z$i.value = "") && 
                                !(model.fields.txt_Artikelnummer_Z$i.value = "") &&
                                    !(model.fields.txt_Anzahl_Z$i.value = "") &&
                                        !(model.fields.chk_Ware_aus_Z$i_0.value = "") &&
                                            !(model.fields.chk_Ware_aus_Z$i_1.value = "")&&
                                                !(model.fields.chk_Ware_aus_Z$i_2.value = ""))                                                                                              
        >
        <#else>
            <result type="ERROR" 
                field="txt_Fehlerbericht_Arbeiten_Z$i"
                code="-1" 
                message="Komplette Zeile $i muss ausgefüllt sein!" />

        </#if>
BLOCK

print "$block";

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:48:44.760

如果插值中的变量名不明确，请使用大括号。`${i}`应该管用。如：`my $string = "${i}_2";`。否则 Perl 会认为你想插入一个名为`$i_2`. 这在块中的工作方式与在常规字符串中的工作方式相同。

`for`此外，在 Perl 中几乎从不需要C 风格的循环。以下是如何以更 Perlish 的风格做同样的事情：

```
foreach my $i (1..6) { ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:47:52.000

它们就像在任何其他双引号字符串中一样工作。如果要`$varname`进行插值，请使用语法`"...${varname}..."`。这里的文档也一样。

# java - 如何在 Web 应用程序中从服务器中唯一识别客户端？

> ID：12975616
> 
> 赞同：0
> 
> 时间：2012-10-19T13:44:28.443
> 
> 标签：java, javascript, grails, web-applications

我正在构建一个需要唯一识别其客户端（而不是 cookie）的 Web 应用程序，以便客户端可以访问他/她在之前的 http 会话期间设置的首选项。

我正在使用 java、hibernate、spring、struts 构建我的

# macros - SPSS 宏：MultResponse 的名称和范围来自宏参数

> ID：12975617
> 
> 赞同：2
> 
> 时间：2012-10-19T13:44:31.727
> 
> 标签：macros, spss

我必须制作很多 MRSet，所以创建了这两个简单的 SPSS 宏。我的问题是，是否可以使用宏参数来定义 MRS 的名称（$mrs1）和范围（“1”和“1,9999”）？我目前的“创作”的主要问题是我得到了 100 多个 MRSet，它们都具有相同的名称。

```
define mrcat (
invars=!tokens(100)/
mrsvals=!tokens(1)/
)
MULT RESPONSE GROUPS=$mrs1 (!invars (1,9999))
  /FREQUENCIES=$mrs1.
!enddefine.

define mrdih (
invars=!tokens(100)/
mrsvals=!tokens(1)/
)
MULT RESPONSE GROUPS=$mrs1 (!invars (1))
  /FREQUENCIES=$mrs1.
!enddefine. 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:15:26.733

试试这个未经测试的语法。

```
define !mrcat(mrvar = !tokens(1) /mrsvals = !enclose('"', '"') /invars = !cmdend)
MULT RESPONSE GROUPS = !mrvar (!invars (!mrsvals))
 /FREQUENCIES = !mrvar.
!enddefine.

!mrcat mrvar = $mrs1 mrsvals = "1" invars = v1 v2 v3.
!mrcat mrvar = $mrs2 mrsvals = "1,9999" invars = v1 v2 v3 v4 v5. 
```

# java - java中的MQQueueManager多实例

> ID：12975618
> 
> 赞同：4
> 
> 时间：2012-10-19T13:44:32.477
> 
> 标签：java, ibm-mq, multiple-instances

我正在尝试将 MQQueueManager 与多个实例一起使用在.net 中，我们提供了带有 MQC.CONNECTION_NAME_PROPERTY 的 IBM MQ jar

```
 ConnectionName = "fred.mq.com(2344),nick.mq.com(3746),tom.mq.com(4288)";
    Hashtable Properties-new Hashtable();
    properties.Add(MQC.CONNECTION_NAME_PROPERTY,ConnectionName);
    MQQueueManager qmgr=new MQQueue Manager("qmgrname",properties); 
```

来源： http: [//publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp ?topic=%2Fcom.ibm.mq.doc%2Fun11010_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp?topic=%2Fcom.ibm.mq.doc%2Fun11010_.htm)

但是，我可以在 MQQueueManager 上使用连接名称列表，但没有提供类似的东西。

你能帮帮我吗？我正在使用 7.0.1.6 罐子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:56:19.797

请参阅信息中心中[*的将客户机通道定义表与用于 Java 的 WebSphere MQ 类一起使用*](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaw.doc/ja11090_.htm)。我已经链接到 V7.0 信息中心，因为您提到这是您正在使用的版本，但在以后的版本中它的工作方式相同。

在通道定义中出现多实例 QMgrs 和相应的多实例 CONNAME 属性之前，有更常见的客户端通道定义表或 CCDT。CCDT 包含一个或多个 QMgrs 的任意数量通道的 CLNTCONN 定义。当多个条目在 QMName 字段中具有相同的值时，它们被视为一个组。（注意，CCDT 中的 QMName**不需要**与实际的 QMgr 名称匹配。这将迫使您使用非唯一的 QMgr 名称，这不是一个好习惯。它只是 CCDT 中用于识别通道组的索引。 )

为了更好地理解 CCDT，请阅读Infocenter 中将[*WebSphere MQ 客户端应用程序连接到队列管理器*](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaf.doc/cs12650_.htm)*下的主题，特别是通道权重和亲和性示例、*客户*端通道定义表的角色*和*MQCONN 调用示例*。（从左侧的目录中访问这些内容。在框架的最右上角是一个按钮，如果您迷路了，该按钮会将目录转到您所在的任何页面。）

CCDT 的一个“陷阱”是其中的每个频道名称都必须是唯一的。这与多实例 CONNAME 不同，后者在不同的 IP 地址上查找完全相同的通道。这是因为 CCDT 文件是使用 QMgr 上的 MQSC 命令维护的。在队列管理器管理的名称空间内，所有对象名称都必须是唯一的。在 QMgr 上定义通道时，每个通道必须具有唯一的名称。在 CCDT 的情况下，条目是使用 CLNTCONN 通道定义的。虽然这些指向在*其他*QMgrs 上定义的 SVRCONN 通道，但因为所有 CLNTCONN 通道都定义在同一个命名空间中，所以它们必须是唯一的。

为了进一步说明这一点，请考虑配置一个名为 PAYROLL 的应用程序。您可以根据应用名称和 QMgr 名称来构造通道名称。这会产生一个通道，该通道描述从左到右读取的 from-->to 关系。例如，要为三个 QMgrs 定义 CCDT，您需要：

```
* On any QMgr
DEF CHL(PAYROLL.QMGR1) CHLTYPE(CLNTCONN) QMNAME(PAY) CONNAME("qm1host(1414)")
DEF CHL(PAYROLL.QMGR2) CHLTYPE(CLNTCONN) QMNAME(PAY) CONNAME("qm2host(2414)")
DEF CHL(PAYROLL.QMGR3) CHLTYPE(CLNTCONN) QMNAME(PAY) CONNAME("qm3host(3414)")

*On QMgr1
DEF CHL(PAYROLL.QMGR1) CHLTYPE(SVRCONN) 

*On QMgr2
DEF CHL(PAYROLL.QMGR2) CHLTYPE(SVRCONN) 

*On QMgr3
DEF CHL(PAYROLL.QMGR3) CHLTYPE(SVRCONN) 
```

然后应用程序将 QMgr 名称指定为`*PAY`，并且 WMQ 客户端代码在三个条目中进行选择。其他参数可用于加权条目和重试顺序，您将在文档中看到这些参数。

*注意：显示的示例被精简为说明该概念的基本元素。**用于生产**实现的 SVRCONN 条目将包括 MCAUSER 和/或通道出口，可能还有 SSL 参数，以及在 V7.1 或更高版本上的一些 CHLAUTH 规则。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:55:35.647

提供多个连接名称允许 MQ 客户端在与队列管理器的现有连接中断时自动重新连接到相同或任何可用的队列管理器。此功能在 MQ C、.NET 和 JMS 客户端中可用。它在 中不可用`WebSphere MQ classes for Java`。

您可以考虑 MQ JMS 客户端，它提供了一组丰富的功能，包括自动客户端重新连接。此[链接](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp?topic=/com.ibm.mq.doc/un11010_.htm)提供支持自动客户端重新连接功能的客户端的详细信息。该链接需要一些更新，因为它说该功能不支持`Managed XMS and managed .NET clients: C#, Visual Basic`.

# wcf - 从无法访问的第三方获取 XML 文件

> ID：12975620
> 
> 赞同：1
> 
> 时间：2012-10-19T13:44:35.403
> 
> 标签：wcf, msmq, wcf-security

我们每天都在尝试从第三方获取加密的 XML 文件。我们如何在不访问我们网络的情况下从第三方获取此文件？我们和第三方之间有一个中间层（服务器）来访问这个文件，而不使用 FTP 传输。所以我们想出了这个想法，使用 WCF 由第三方输入这个文件，并在中间层使用这个服务。由于安全原因，我们无法从我们的网络直接访问此文件夹，我们将此文件放在 MSMQ 队列中。我们编写了一个小程序来从 Queue 中传输这个文件。这是正确的做法吗？我确信有更好的方法来做到这一点。您能否建议任何其他方法？我很感激任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:01:22.727

最大的风险是 MSMQ 的消息大小限制为 4MB - 如果发送的文件甚至超过此大小，则 MSMQ 方法将失败并且没有恢复的机会。

听起来您无法获取文件并且无法将其发送给您，严重的问题和中间件充其量都是有问题的，因为您无法访问除 MSMQ 之外的任何其他方式。

如果不可能达到 3MB 的限制（请记住，消息包含开销数据），那么这有可能是一个可行的解决方案。但是您可能想看看是否可以将消息/文件分成更小的部分。

另一种可能性是让中间件通过其他方式发送文件 - 我正在考虑使用隐藏的电子邮件帐户，仅用于此目的。当中间件检测到新文件时，它可以通过电子邮件发送文件，然后发送 MSMQ 消息以防止不断轮询 POP/Mail 帐户，但这也不是什么大问题。

希望这可以帮助，

# c# - c#动态加载文件行

> ID：12975621
> 
> 赞同：0
> 
> 时间：2012-10-19T13:44:40.970
> 
> 标签：c#, file, io

我很难想出一个实现文件导入类的好方法，

我希望它能够读取任何文件，然后根据行内容的分隔符，确定文件的结构（不是类型结构），

例如，假设我有一个名为 A.txt 的文件

该文件包含由 , 分隔符分隔的数据行，

如果我用'，'分割结果将是一个字符串数组但是，我如何动态确定分隔符，然后将输出设置为列名？

说如果 a.txt 的第一行是“1,2,3,4,5”

输出应该是

```
delimter : ","
column[0] = "1"
column[1] = "2"
column[2] = "3"
column[4] = "4"
column[5] = "5" 
```

有没有人有什么好主意？而且我不确定，但是是否有可能以某种方式神奇地确定数据类型取决于字符串的值是什么，如果不是这样也没关系，但我认为无论如何我都想问。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:52:48.533

如果您有一个符号数组（可能是分隔符）和第二个符号数组（可能不是分隔符），那么一切都很容易。只需从 delimitsArray 中找到第一个符号，然后使用它进行拆分。

如果分隔符之间的部分具有相等的长度，那么这也很容易。

如果零件和分界线可能是任何的，则没有办法将它们与另一个区分开来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:54:51.437

如果您知道数据类型并且分隔符是单个字符来确定分隔符，您可以执行以下操作（伪代码）：

```
char FindDelimiter(string firstLine)
{
    for (int i = 1; i < firstLine.Length; i++)
    {
        if(!CanBeParsedAsKnownDataType(firstLine.SubString(0,i))
        {
            // this one cannot be parsed as a known datatype anymore
            // so it must be the delimiter 
            return firstLine[i];
        }
    }

    // if we reach this, nothing was found
    return '';
} 
```

请注意，这仅适用于数字等数据类型，其中实际值的子字符串仍可被解析为数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:55:02.780

他们没有可用的魔法。您所能做的就是遍历第一行并找出最常出现的字符。然后将此列表与可能的候选分隔符列表进行比较，找出哪个最先出现。

这是一个代码示例，它返回一个字符串并对该字符串进行一些分析。也许这是您的“魔术代码”的起点：

```
var line = "1,2,3,4,5,6";
var analysis = line.GroupBy(c => c);
var results = analysis.OrderByDescending(group => group.Count())
                      .ThenBy(group => group.Key)
                      .Select(group => "The character \""
                                       + group.Key
                                       + "\" appears "
                                       + group.Count()
                                       + " time"
                                       + (group.Skip(1).Any() ? "s" : String.Empty)
                                       + "."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T14:03:22.280

你可以试试这个。

```
 public DataTable GetDataTableFromTextFile(string filepath) 
    {
                                string line;
                                DataTable dt = new DataTable();                         
                                using (TextReader tr = File.OpenText(filepath))
                                {
                                    while ((line = tr.ReadLine()) != null)
                                    {
                                        string[] items = line.Split('\t',":",";","=");
                                        if (dt.Columns.Count == 0)
                                        {
                                            dt.Columns.Add(new DataColumn("FirstColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("SecondColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("ThridColumn", typeof(string)));

                                        }

                                        if (items.Length > 0 && !string.IsNullOrWhiteSpace(items[0].ToString()))
                                        {
                                            dt.Rows.Add(items);                                       
                                        }
                                    }
                                }
    return dt;

} 
```

# java - Java - 在当前程序窗口之外获取选定的文本

> ID：12975628
> 
> 赞同：4
> 
> 时间：2012-10-19T13:44:58.263
> 
> 标签：java, event-handling

假设我正在阅读 PDF 文件或使用网络浏览器，并且我突出显示了一个词。

我想要一个 JAVA 中***的过程，一个独立程序中的过程***，以使用我的 JAVA 程序**获取**选定的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:50:30.597

听起来好像另一个程序将“活动”并具有焦点，并且您希望在后台使用 Java 来捕获选定的文本，可能使用热键组合。

Java 可能不是这种行为的最佳工具。由于 Java 被构建为尽可能与操作系统无关，因此很难使用 Java 执行特定于操作系统的任务。话虽如此，这*可以*用 Java 完成，但需要“拉伸”Java 并使用通过 JNI、JNA 或特定于操作系统的实用程序桥（如 AutoIt V3）与 Java 集成的非 Java 代码（如果这是用于 Windows 平台）。该解决方案当然是特定于操作系统的，不能以跨平台方式使用。

* * *

**编辑 1**
您在评论中声明：

> 谢谢.. 但是如何使用 JNI 或 JNA 来做到这一点？

@blackgh：问题就在这里。你需要先学习 JNI（如果你还不熟悉 C 或 C++ 会更难）或 JNA（我认为这更容易），然后如果你想制作热键，则要学习制作键盘钩子。这将需要一些时间和精力来完成，但是是可行的。如果这是我的项目，我需要快速完成它，并且它必须与 Java 集成，如果它是用于 Windows 平台，我会使用 AutoIt V3 或类似的东西来为热键创建一个脚本最简单的解决方案，事实上我已经做过类似的事情，但是你需要再次学习 AutoIt 语言（它就像 Basic）。

# java - 将随机整数迭代到一个数组中

> ID：12975629
> 
> 赞同：2
> 
> 时间：2012-10-19T13:45:00.237
> 
> 标签：java, arrays

大家好，我正在尝试遍历一个数组并用随机值填充每个数组元素。唯一的问题是我得到奇怪的输出，比如

> [我@4b142196

我在[Array Example上找到的示例](http://www.roseindia.net/java/java-tips/data/arrays/10arrays.shtml)

但是在我的代码中使用它时它不起作用。这是我得到的：

```
package h05GrootsteWaarde;
import javax.swing.*;
import java.util.*;

public class GetallenGenerator extends JPanel {
    public GetallenGenerator() {
    }
    int[] val = new int[21];
    Random generator = new Random();    
    public void setRandomValue() {
        for (int i = 0; i < val.length; i++) {
            val[i] = generator.nextInt(201) - 100;
        }    
    }   
    public int[] getRandomValue() {     
        return val;     
    }
} 
```

这就是我调用函数的方式

```
package h05GrootsteWaarde;
import javax.swing.*;
import java.awt.event.*;
public class Bediening extends JPanel implements ActionListener {
    GetallenGenerator generator;
    private JButton bereken;
    private JTextArea veld;

    public Bediening(GetallenGenerator generator) {     
        this.generator = generator;     
        bereken = new JButton("Bereken kleinste");
        bereken.addActionListener(this);
        add(bereken);       
        veld = new JTextArea(13, 40);
        veld.setEditable(false);
        veld.setWrapStyleWord(true);
        veld.setLineWrap(true);
        add(veld);      
        generator.setRandomValue();
    }   
    public void actionPerformed ( ActionEvent e ) {     
        String hoi = " " + generator.getRandomValue();
        veld.append(hoi);       
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:47:48.573

你会得到一个奇怪的输出，因为数组的`toString`方法没有显示包含数组各个成员的字符串；相反，它显示了一个`[I@`以原始类型数组开头的奇怪字符串`int`。

您应该手动准备字符串，或调用`Arrays.toString(myArray)`，如下所示：

```
int[] arr = generator.getRandomValue();
String arrStr = Arrays.toString(arr);
String hoi = arrStr.substring(1, arrStr.length()-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:48:01.190

该方法`generator.getRandomValue();`返回一个整数数组。所以，如果你打印它，它会打印`String Representation`你的数组，你看到它就像`HashCode`数组引用的 a 。因此，当您尝试将其附加一个空字符串并将其存储在另一个字符串中时，您将无法获得所需的结果。

您可能使用的是：-

```
String hoi = " " + Arrays.toString(generator.getRandomValue()); 
```

但是为什么要附加然后将整数数组存储到 String 引用中呢？

如果您想要一些随机值，那么您可能可以在该列表上使用`ArrayList`和使用来随机播放它。`Collections.shuffle`如果您想要一个随机值，那么您可以获取该`first`值。但这不是获得随机值的非常有效的方法。因为它不够随机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T13:48:02.297

方法：

```
public int[] getRandomValue() {
    return val;
} 
```

... 不会*从*数组中返回随机值 - 它返回数组引用本身。您看到的是`[I@4b142196`字符串，因为这是数组的默认字符串表示形式。（第一部分表示类型；第二部分是哈希码。）

如果你想从数组中获取一个随机值，你实际上需要将一些随机性放入`getRandomValue`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:46:55.907

您正在向`int[]`您的`JTextArea`. 它显示调用`toString()`int[] 的结果，这是内存引用。

您可能应该将您的`getRandomValue()`方法修改为如下所示：

```
public String getRandomValue() {
  return Arrays.toString(val);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T13:47:52.507

`toString`如果您想要生成的值，则需要覆盖方法。在您编写的代码中，将为您提供内存引用而不是生成的值。

# android - Android：ArrayList 中的索引越界异常

> ID：12975630
> 
> 赞同：1
> 
> 时间：2012-10-19T13:45:03.247
> 
> 标签：android, indexoutofboundsexception

我正在使用数组适配器在列表视图中显示数组列表。我可以*添加*和*删除*项目。假设如果列表视图中没有*项目*，如果我选择从绑定异常中*删除其显示的索引。*我需要的是它应该显示像“没有要删除的项目”这样的吐司。澄清我的专家！我的代码如下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    bAdd = (Button) findViewById(R.id.button1);
    bDel = (Button) findViewById(R.id.button2);
    et1 = (EditText) findViewById(R.id.editText1);
    et2 = (EditText) findViewById(R.id.EditText2);
    et3 = (EditText) findViewById(R.id.EditText3);
    lv = (ListView) findViewById(R.id.listView1);

    al = new ArrayList<String>();
    aa = new ArrayAdapter<String>(getApplicationContext(),
            android.R.layout.simple_list_item_1, al);
    lv.setAdapter(aa);

    bAdd.setOnClickListener(new android.view.View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            String str1 = et1.getText().toString();
            if (str1.equals("")) {
                Toast.makeText(getApplicationContext(),
                        "Please Enter Item first!!", 0).show();
            } else {
                al.add(0, str1);
                aa.notifyDataSetChanged();
                et1.setText("");
            }

        }
    });
    bDel.setOnClickListener(new android.view.View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            if (arg0 == null) {
                Toast.makeText(getApplicationContext(),
                        "Nothing to delete", 0).show();
            } else {
                al.remove(0);
                aa.notifyDataSetChanged();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:48:27.243

只需`al`在删除之前检查列表的大小：

```
 if (arg0 == null || al.isEmpty()) {
            Toast.makeText(getApplicationContext(),
                    "Nothing to delete", 0).show();
        } else {
            al.remove(0);
            aa.notifyDataSetChanged();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:50:32.740

在数组上设置验证，见下文

```
bDel.setOnClickListener(new android.view.View.OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        if (arg0 == null) {
            Toast.makeText(getApplicationContext(),
                    "Nothing to delete", 0).show();
        } else {
            if(al.size == 0){
             Toast.makeText(getApplicationContext(),
                    "There is no item to delete", 0).show();
               return;
             }
            al.remove(0);
            aa.notifyDataSetChanged();
        }
    }
}); 
```

# spring - Spring VelocityViewResolver 无法解析

> ID：12975634
> 
> 赞同：0
> 
> 时间：2012-10-19T13:45:22.533
> 
> 标签：spring, spring-mvc, velocity

尝试使用 Velocity 设置 Spring 项目时出现以下错误。

```
PageNotFound - No mapping found for HTTP request with URI [/SpringMVCVelocity/Enquiries/viewAllEnquiries] in DispatcherServlet with name 'mvc-dispatcher' 
```

我已将 spring context.xml 设置为-

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd">

    <context:component-scan base-package="ecommerce.dao" />     

    <bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
      <property name="resourceLoaderPath" value="/WEB-INF/view/"/>   
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
      <property name="cache" value="false"/>
      <property name="prefix" value=""/>
      <property name="suffix" value=".vm"/>
      <property name="order" value="-1"/>
      <property name="exposeSpringMacroHelpers" value="true"></property>
    </bean>

    <mvc:annotation-driven/>

    <!-- Forwards requests to the "/" resource to the "welcome" view -->
    <mvc:view-controller path="/" view-name="welcome"/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
      <property name="persistenceUnitName" value="ecommerce"/>
   </bean>
    <!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <!-- Configures Handler Interceptors -->   
    <mvc:interceptors>
        <!-- Changes the locale when a 'locale' request parameter is sent; e.g. /?locale=de -->
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" />
    </mvc:interceptors>

    <!-- Saves a locale change using a cookie -->
    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver" />

    <!-- Application Message Bundle -->
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="/WEB-INF/messages/messages" />
        <property name="cacheSeconds" value="0" />
    </bean>

    <!-- 
        FLOW HANDLING
     -->

    <!-- Enables FlowHandler URL mapping -->
    <bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
        <property name="flowExecutor" ref="flowExecutor" />
    </bean>

    <webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry"/>

    <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
        <property name="flowRegistry" ref="flowRegistry" />
        <property name="order" value="-1" />
    </bean>

    <webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices">
        <webflow:flow-location path="/WEB-INF/view/flows/flow.xml"/>
    </webflow:flow-registry>

    <webflow:flow-builder-services id="flowBuilderServices" view-factory-creator="mvcViewFactoryCreator" />

    <bean id="mvcViewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
        <property name="viewResolvers" ref="viewResolver" />
    </bean>

    <!-- 

       Bean Injections

    -->
    <bean id="carModelDao" class="ecommerce.dao.CarModelDao"/>

    <bean id="carController" class="ecommerce.controller.CarController">
        <property name="carModelDao" ref="carModelDao"/>
    </bean>

    <bean id="veloController" class="ecommerce.controller.VelocityController">
        <property name="carModelDao" ref="carModelDao"/>
    </bean>
</beans> 
```

我的控制器是：

```
@Controller
@RequestMapping("/Enquiries")
@SessionAttributes({"enqList", "search"})

public class EnquiryController {

    private static final Logger logger = Logger.getLogger(EnquiryController.class);
    private PagedListHolder<Enquiry> enqList = null;
    private int pageSize = 10;

    @Autowired
    private EnquiryDao enquiryDao;

    @RequestMapping("/viewAllEnquiries")
    public String  getAllEnquiries(@RequestParam(required=false) String page, Model model) {

        if ("next".equals(page) && enqList != null) {
            enqList.nextPage();
        } else if ("previous".equals(page) && enqList != null) {
            enqList.previousPage();
        } else {
            // well there is no page parameter, so it must be a new request
            enqList = new PagedListHolder<Enquiry>(enquiryDao.getAllEnquiries());
            enqList.setPageSize(pageSize);
        }
        model.addAttribute("search", new Search());
        model.addAttribute("enqList", enqList);

        return "viewAllEnquiries";
    } 
```

这个控制器甚至没有被调用。但是，它确实成功地通过以下方式解决了欢迎视图：

```
<mvc:view-controller path="/" view-name="welcome"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:59:31.903

问题解决了，我没有扫描控制器（上下文：组件扫描），也没有在 Spring 上下文中连接 bean。

所以为了修复它，我通过弹簧注入添加了它：

```
<bean id="enquiryDao" class="ecommerce.dao.EnquiryDao"/>
<bean id="enquiryController" class="ecommerce.controller.EnquiryController">
    <property name="enquiryDao" ref="enquiryDao"/>
</bean> 
```

# maven - webapp-cache.xml 有什么用？

> ID：12975641
> 
> 赞同：1
> 
> 时间：2012-10-19T13:45:51.273
> 
> 标签：maven

webapp-cache.xml 有什么用？它是否缓存任何数据，如图像、html 等......？我可以看到它是在 maven 构建之后创建的，但是我无法理解 this 的重要性`webapp-cache.xml`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:50:55.213

取自[Maven WAR 插件文档](http://maven.apache.org/plugins/maven-war-plugin/inplace-mojo.html#cacheFile)

```
cacheFile:

The file containing the webapp structure cache.
Type: java.io.File
Since: 2.1-alpha-1
Required: Yes
Default: ${project.build.directory}/war/work/webapp-cache.xml 
```

WAR 插件在创建 WAR 文件的过程中使用此文件。

# javascript - 加载模板时出现异常。下划线/主干

> ID：12975643
> 
> 赞同：3
> 
> 时间：2012-10-19T13:46:07.513
> 
> 标签：javascript, jquery, backbone.js, requirejs, underscore.js

我收到`Uncaught ReferenceError`文本：*ID 未定义*异常

```
Uncaught ReferenceError: Id is not defined
(anonymous function)
y.templateunderscore-min.js:5
Backbone.View.extend.renderProductView.js:13
Backbone.View.extend.renderProductListView.js:15
Backbone.View.extend.initializeProductListView.js:4
g.Viewbackbone-min.js:34
dbackbone-min.js:38
appRouter.on.productsList.fetch.successAppRouter.js:18
f.extend.fetch.a.successbackbone-min.js:23
f.Callbacks.ojquery-1.7.2.min.js:2
f.Callbacks.p.fireWithjquery-1.7.2.min.js:2
wjquery-1.7.2.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

存储在外部文件中，模板如下所示：

```
<a class="thumbnail" href="#/products/<%= Id %>">
    <img alt="" src="/Content/img/<%= Thumbnail %>" />
    <h5><%= Title %></h5>
    <p><%= Price %></p>
    <p><%= Details %></p>
</a> 
```

其对应的视图将`render`方法定义为：

```
define(['jquery', 'underscore', 'backbone', 'text!templates/product.html'], function ($, _, Backbone, productTemplate) {
var ProductView = 
...

render: function() {
    var data = {};
    var compiledTemplate = _.template(productTemplate, data);
    this.$el.append(compiledTemplate);
}
... 
```

什么可能导致抛出异常？谢谢！

**编辑**

模型定义了默认值，例如：

```
defaults: {
    Id: '00000000-0000-0000-0000-000000000000',
    Price: 0.0,
    Category: 'empty',
    Title: 'untitled',
    Details: '',
    Thumbnail: ''
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:24:28.927

您需要为所有插值变量提供值。像这样的模板：

```
<%= Id %> 
```

被编译成一个 JavaScript 函数，它是这样的包装器：

```
with(obj || {}) {
    __p += '' + ((__t = Id) == null ? '' : __t ) + '';
} 
```

打开你的控制台看看[这个演示](http://jsfiddle.net/ambiguous/wAajA/1/)，你会看到。因此，您的模板函数将寻找一个`Id`作为局部变量或作为`data`您传递它的对象中的键。

你的问题是你`data`是空的：

```
render: function() {
    var data = {}; // <------------------------------- Empty
    var compiledTemplate = _.template(productTemplate, data);
    this.$el.append(compiledTemplate);
} 
```

我想你想说的是：

```
_.template(productTemplate, this.model.toJSON()) 
```

以便将模型的数据放入模板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:47:06.417

正如正确的错误所说，您正在尝试访问未定义的变量。检查模型的数据。如果您从服务器获取，请确保实际数据到达 Backbone（使用 firebug 或 chrome 开发工具）。

# php - 为什么使用 MySQL 转储插入数据库的挪威字符会损坏？

> ID：12975647
> 
> 赞同：4
> 
> 时间：2012-10-19T13:46:33.870
> 
> 标签：php, mysql, json, jsonp

`Norwegian characters`通过浏览器输入 ( `php`)插入我的应用程序可以正常工作（`json`服务器随后返回的数据是正确的）。但是，当我使用记录插入数据时`MYSQL dump`，记录会损坏，然后服务器返回的 json 会`NULL`代替`Norwegian characters`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:51:22.880

听起来像是字符编码问题。您使用的是哪种字符编码？

也许试试[这个](http://nathan.rambeck.org/blog/1-preventing-encoding-issues-mysqldump)？

# jquery - 动态地将键添加到 jquery 对象

> ID：12975653
> 
> 赞同：0
> 
> 时间：2012-10-19T13:46:42.513
> 
> 标签：jquery, object

我有一些工作代码，最终得到多个返回值。像这样的东西：

```
console.log(variableName)
-- var1, var2, var1, var3 etc 
```

如何编写一个函数来获取从变量中记录的所有变量到这样的对象中？（对于每次重复，键必须递增/计数）。

```
var obj {
  var1 : 2
  var2 : 1
  var3 : 1
  var4 : 0
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:09:01.577

我猜你的`variableName`var 是一个像这样的数组：

```
var variableName = ['var1', 'var2', 'var1', 'var3']; 
```

在这种情况下，您可以这样做：

```
var obj = {};
$(variableName).each(function() {
    if (this in obj) {
        obj[this]++;
    } else {
        obj[this] = 1;
    }
}); 
```

# c# - System.Windows.Application 类实例不会显示第二个窗口

> ID：12975654
> 
> 赞同：0
> 
> 时间：2012-10-19T13:46:43.357
> 
> 标签：c#, .net, wpf

我有一个 WPF 桌面应用程序，我想在启动主窗口之前检查是否可以使用 EF 连接到我的数据库。所以我尝试连接到数据库，如果发生异常，我只显示一个窗口，要求用户输入正确的数据库连接字符串。

用户输入连接字符串后，我重试连接到数据库，如果它连接，我想启动我的主窗口并让应用程序启动。

编辑：我稍微更改了我的代码，但仍然无法正常工作。我认为这是关于关闭一个窗口，然后尝试在 Application 类中显示另一个窗口。**如果未显示 ServerConfigurationWin，它将起作用。**

然而发生的情况是，在我向用户显示数据库配置窗口后，**应用程序调用 App.xaml 文件中声明的 StartupUri 窗口的构造函数，但屏幕上没有显示任何内容。**

谢谢。

这是我的应用程序代码：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        bool success = false;
        while (!success)
        {
            try
            {
                DemirbasContext context = new DemirbasContext();
                DbInitializer initializer = new DbInitializer();
                Database.SetInitializer<DemirbasContext>(initializer);
                context.Database.Initialize(false);
                success = true;
            }
            catch (ProviderIncompatibleException)
            {
                ServerConfigurationWin configurationWin = new ServerConfigurationWin();
                if (!configurationWin.ShowThemAll())
                {
                    // ShowThemAll() returns that operation is canceled.
                    App.Current.Shutdown();
                    return;
                }
                success = false;
            }
        }
    }

    public App()
    {

    }

    void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
    {
        // Process unhandled exception do stuff below
        Console.WriteLine("***Message***");
        Console.WriteLine(e.Exception.Message);
        Console.WriteLine("***Stack Trace***");
        Console.WriteLine(e.Exception.StackTrace);
        Console.WriteLine("***Target Site***");
        Console.WriteLine(e.Exception.TargetSite);
        // Prevent default unhandled exception processing
        e.Handled = true;
    }
} 
```

应用程序.xaml：

```
<Application x:Class="Demirbas.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         DispatcherUnhandledException="App_DispatcherUnhandledException"
         StartupUri="Enterance.xaml">
<Application.Resources>
    <Style TargetType="Button">
        <Setter Property="Height" Value="25" />
        <Setter Property="Width" Value="75" />
        <Setter Property="MinWidth" Value="25" />
        <Setter Property="Margin" Value="5,0" />
        <Setter Property="Padding" Value="0" />
    </Style>
    <Style TargetType="Label">
        <Setter Property="Margin" Value="5,0" />
    </Style>

</Application.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:02:14.873

看来您无法从 Application 类中显示第二个窗口。所以我不得不关闭应用程序并重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:56:20.510

当你的 WPF applicaitno 启动它寻找入口点来调用你的主窗口时，你应该尝试这个。您可以使用 App.Xaml 的 StartupUri 更改默认主窗口。或者您可以像这样覆盖启动调用。

App.Xaml.cs 类

```
 protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        bool condition = false;

        //you logic. / you code.

        if (condition)
            (App.Current.MainWindow = new MyMainWindow ()).Show();
        else
            App.Current.Shutdown();
    } 
```

# javascript - 在主干视图范围之外操作元素

> ID：12975655
> 
> 赞同：3
> 
> 时间：2012-10-19T13:46:48.270
> 
> 标签：javascript, backbone.js

我目前正在编写一份报告，其中包括一些用于数据过滤的输入元素和一个显示集合中相应数据的表格。

我的子视图遵循 Addy Osmani 的[子视图解决方案](http://addyosmani.github.com/backbone-fundamentals/#commonproblems%20subviews%20solution)。所以我有

*   一个报告视图，它具有：
    *   标题子视图
    *   切换子视图
    *   表子视图

切换子视图基本上是一个锚元素，具有三角形背景并基于类翻转。

切换子视图有两个任务

1.  收听点击事件并通过更改类来翻转它。
2.  为显示和隐藏状态操作父视图的（报告视图）类。

我的问题是更改报表视图类的逻辑应该在哪里？在子视图中？还是父视图？
如果它在父视图中，我该如何调用该方法

*   直接通过传递 parentView 作为参数并从子视图 this.parentView.toggleReport()
*   再次将 parentView 作为参数传递并在父视图上触发事件。
*   只需在切换视图范围之外操作 dom。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:07:39.943

让父视图监听切换视图上的自定义事件，并采取相应的行动。

在父视图内部：

```
this.toggleView.on('toggle', this.toggleReport, this); 
```

在您翻转自己的类的切换视图中，还输入一个：

```
this.trigger('toggle'); // or this.trigger('toggle', stateOfTheToggle); 
```

另一种选择是使用 a`Model`来表示切换的状态，并在父视图和切换视图之间共享它......并绑定到其上的事件。

# git - git 将旧存储库的一部分移动到新存储库

> ID：12975656
> 
> 赞同：1
> 
> 时间：2012-10-19T13:46:50.660
> 
> 标签：git, repository, sparse-checkout

我有一个存储库，它在根目录下包含多个目录，例如

```
gitroot/a
gitroot/b
gitroot/c 
```

我想仅从 a 的内容创建一个新的 git 存储库，同时保留其历史记录。这可能吗？我已经看到了稀疏的结帐，但我不确定如何使用它从子目录创建一个全新的存储库（具有相关历史记录）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:08:49.797

克隆现有存储库后，您可以使用[filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)

```
git filter-branch --subdirectory-filter a -- --all 
```

之后;

```
git clean -d -f  // Remove untracked files from the working tree
git gc --aggressive // Cleanup unnecessary files and optimize the local repository
git prune  // Prune all unreachable objects from the object database 
```

# android - 如何从android中的drawable在电子邮件中附加图像

> ID：12975662
> 
> 赞同：1
> 
> 时间：2012-10-19T13:47:05.120
> 
> 标签：android

我正在附加可绘制文件夹中的图像并通过电子邮件发送。当我从默认电子邮件客户端发送它时。附件中缺少图像扩展名（.png），并且文件名本身也已更改。我想发送具有默认名称（如可绘制）和 .png 扩展名的图像。

这是我的代码。

```
 Intent email = new Intent(Intent.ACTION_SEND);
            email.setType("image/png");

            email.putExtra(Intent.EXTRA_EMAIL, new String[] { to });

            email.putExtra(Intent.EXTRA_SUBJECT, "Hey! ");

            email.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));
startActivity(Intent.createChooser(email, "Sending........")); 
```

请建议我这段代码中的内容，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:48:18.990

如果图像位于 SDCARD 中，您只能将图像附加到邮件中。因此，您需要将图像复制到 SD，然后附加。

```
InputStream in = null;
OutputStream out = null;
try
{
in = getResources().openRawResource(R.raw.ic_launcher);
out = new FileOutputStream(new File(Environment.getExternalStorageDirectory(), "image.png"));
copyFile(in, out);
 in.close();
 in = null;
 out.flush();
out.close();
out = null;
}
catch (Exception e)
                {
                    Log.e("tag", e.getMessage());
                    e.printStackTrace();
                }

private void copyFile(InputStream in, OutputStream out) throws IOException
    {
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1)
        {
            out.write(buffer, 0, read);
        }
    }

Intent emailIntent = new Intent(Intent.ACTION_SEND);
                emailIntent.setType("text/html");
                emailIntent.putExtra(Intent.EXTRA_SUBJECT, "File attached");
                Uri uri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(), "image.png"));
                emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
                startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

# android - 找不到 gridlayout_v7.apk

> ID：12975666
> 
> 赞同：0
> 
> 时间：2012-10-19T13:47:18.973
> 
> 标签：android, eclipse

我试图让我的应用程序在两个带有按钮的活动之间切换。第一个活动出现了，我可以单击按钮，但随后会弹出一条通知，上面写着“不幸的是，项目*名称*已停止”。

这是控制台上出现的错误：

```
[2012-10-18 09:54:46 - gridlayout_v7] Could not find gridlayout_v7.apk! 
```

这是控制台的其余部分发布的内容：

```
[2012-10-18 09:54:38 - PersonalLibrary] Android Launch!
[2012-10-18 09:54:38 - PersonalLibrary] adb is running normally.
[2012-10-18 09:54:38 - PersonalLibrary] Performing com.balaka.personallibrary.LibraryMenu activity launch
[2012-10-18 09:54:38 - PersonalLibrary] Automatic Target Mode: Preferred AVD 'test' is available on emulator 'emulator-5554'
[2012-10-18 09:54:38 - PersonalLibrary] Uploading PersonalLibrary.apk onto device 'emulator-5554'
[2012-10-18 09:54:39 - PersonalLibrary] Installing PersonalLibrary.apk...
[2012-10-18 09:54:46 - PersonalLibrary] Success!
[2012-10-18 09:54:46 - gridlayout_v7] Could not find gridlayout_v7.apk!
[2012-10-18 09:54:46 - PersonalLibrary] Starting activity com.balaka.personallibrary.LibraryMenu on device emulator-5554
[2012-10-18 09:54:48 - PersonalLibrary] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.balaka.personallibrary/.LibraryMenu } 
```

我试图在网上其他地方找到答案，但没有提到该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:52:30.133

根据[这个答案](https://stackoverflow.com/questions/6337673/could-not-find-library-apk)，您需要删除对 gridlayout_v7 的项目依赖项，并将对 gridlayout_v7 的依赖项添加为项目属性中的“Android”依赖项。这为我解决了问题。

# types - 比较不同类型的值

> ID：12975667
> 
> 赞同：4
> 
> 时间：2012-10-19T13:47:22.670
> 
> 标签：types, lua, overloading, operator-keyword

在一个不可触碰的程序的某个时刻，会完成两个 Lua 值之间的比较：

```
return a==b; 
```

我需要把它`==`变成`>=`，所以我来到了以下*hack*：

```
a = { value=5 }
b = { value=2 }

mt = {
  __eq = function (op1, op2) 
    return op1.value >= op2.value
  end
}

setmetatable(a, mt)
setmetatable(b, mt)

print(a == b) 
```

这给出了预期的结果（`true`）。现在，问题在于`a`并且`b`处于不同的上下文中，所以我无法做到：

```
setmetatable(a, mt)
setmetatable(b, mt) 
```

相反，我可以这样做：

```
mtA = {
  __eq = function (op1, op2) 
    return op1.value >= op2.value
  end
}
setmetatable(a, mtA)

mtB = {
  __eq = function (op1, op2) 
    return op1.value >= op2.value
  end
}
setmetatable(b, mtB) 
```

但是，`a`and`b`具有不同的类型，并且`==`运算符返回`false`甚至没有达到我的`__eq`重载。

关于如何实现我需要的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:18:03.963

覆盖`__eq`在 Lua 5.2 下适用于不同类型的对象；但是，只要两个元表都指向同一个函数，它在 5.1 下应该可以正常工作，如下所示：

```
local a, b = { value=5 }, { value=2 }

local function meta_eq(op1, op2) 
  return op1.value >= op2.value
end

setmetatable(a, { __eq = meta_eq })
setmetatable(b, { __eq = meta_eq })

print(a == b) -- true 
```

可能还值得指出的是，除了 之外`__eq`，还有`__gt`和`__ge`元方法分别覆盖 > 和 >=。

# weblogic - 身份验证错误后如何重新启动 weblogic 服务器

> ID：12975671
> 
> 赞同：7
> 
> 时间：2012-10-19T13:47:31.110
> 
> 标签：weblogic

我正在尝试重新启动我的 weblogic 服务器（Weblogic 服务器版本：10.3.5）。它引发以下错误。我以前经常重启，但今天它抛出了这个错误。

我已经用正确的用户名和密码替换了 boot.properties 文件，在尝试重新启动时，我看到它正在被加密，但服务器没有启动。我也尝试过修改 config.xml 并输入解密后的密码，但仍然出现错误。

```
Starting WLS with line:
/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java    -server -Xms2048M -Xmx2048M -XX:MaxPermSize=512M -Dweblogic.Name=ManagedServer -Djava.security.policy=/u01/Oracle/Middleware/wlserver_10.3/server/lib/weblogic.policy -Dweblogic.security.SSL.trustedCAKeyStore=/u01/Oracle/Middleware/wlserver_10.3/server/lib/cacerts   -da -Dplatform.home=/u01/Oracle/Middleware/wlserver_10.3 -Dwls.home=/u01/Oracle/Middleware/wlserver_10.3/server -Dweblogic.home=/u01/Oracle/Middleware/wlserver_10.3/server   -Dweblogic.management.discover=false -Dweblogic.management.server=http://kbzuatapp:7001  -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConsole=false -Dweblogic.ext.dirs=/u01/Oracle/Middleware/patch_wls1035/profiles/default/sysext_manifest_classpath:/u01/Oracle/Middleware/patch_ocp360/profiles/default/sysext_manifest_classpath -Djava.security.egd=file:/dev/./urandom  weblogic.Server
<Oct 19, 2012 8:01:35 PM MMT> <Info> <Security> <BEA-090905> <Disabling CryptoJ JCE Provider self-integrity check for better startup performance. To enable this check, specify -Dweblogic.security.allowCryptoJDefaultJCEVerification=true> 
<Oct 19, 2012 8:01:36 PM MMT> <Info> <Security> <BEA-090906> <Changing the default Random Number Generator in RSA CryptoJ from ECDRBG to FIPS186PRNG. To disable this change, specify -Dweblogic.security.allowCryptoJDefaultPRNG=true> 
<Oct 19, 2012 8:01:36 PM MMT> <Info> <WebLogicServer> <BEA-000377> <Starting WebLogic Server with OpenJDK 64-Bit Server VM Version 19.0-b09 from Sun Microsystems Inc.> 
<Oct 19, 2012 8:01:37 PM MMT> <Info> <Security> <BEA-090065> <Getting boot identity from user.> 
Enter username to boot WebLogic server:Error: Failed to get value from Standard Input
Enter password to boot WebLogic server:
<Oct 19, 2012 8:01:37 PM MMT> <Info> <Management> <BEA-141107> <Version: WebLogic Server 10.3.5.0  Fri Apr 1 20:20:06 PDT 2011 1398638 > 
<Oct 19, 2012 8:01:38 PM MMT> <Error> <Configuration Management> <BEA-150021> <The admin server failed to authenticate the identity of the user  starting the managed server. The reason for the error is .> 
<Oct 19, 2012 8:01:38 PM MMT> <Emergency> <Management> <BEA-141151> <The admin server could not be reached at http://kbzuatapp:7001.> 
<Oct 19, 2012 8:01:38 PM MMT> <Info> <Configuration Management> <BEA-150018> <This server is being started in managed server independence mode in the absence of the admin server.> 
<Oct 19, 2012 8:01:38 PM MMT> <Notice> <WebLogicServer> <BEA-000365> <Server state changed to STARTING> 
<Oct 19, 2012 8:01:38 PM MMT> <Info> <WorkManager> <BEA-002900> <Initializing self-tuning thread pool> 
<Oct 19, 2012 8:01:38 PM MMT> <Notice> <LoggingService> <BEA-320400> <The log file /u01/Oracle/Middleware/user_projects/domains/KBZUAT/servers/ManagedServer/logs/ManagedServer.log will be rotated. Reopen the log file if tailing has stopped. This can happen on some platforms like Windows.> 
<Oct 19, 2012 8:01:38 PM MMT> <Notice> <LoggingService> <BEA-320401> <The log file has been rotated to /u01/Oracle/Middleware/user_projects/domains/KBZUAT/servers/ManagedServer/logs/ManagedServer.log00011\. Log messages will continue to be logged in /u01/Oracle/Middleware/user_projects/domains/KBZUAT/servers/ManagedServer/logs/ManagedServer.log.> 
<Oct 19, 2012 8:01:38 PM MMT> <Notice> <Log Management> <BEA-170019> <The server log file /u01/Oracle/Middleware/user_projects/domains/KBZUAT/servers/ManagedServer/logs/ManagedServer.log is opened. All server side log events will be written to this file.> 
<Oct 19, 2012 8:01:41 PM MMT> <Notice> <Security> <BEA-090082> <Security initializing using security realm myrealm.> 
<Oct 19, 2012 8:01:41 PM MMT> <Critical> <Security> <BEA-090403> <Authentication for user  denied> 
<Oct 19, 2012 8:01:41 PM MMT> <Critical> <WebLogicServer> <BEA-000386> <Server subsystem failed. Reason: weblogic.security.SecurityInitializationException: Authentication for user  denied
weblogic.security.SecurityInitializationException: Authentication for user  denied
    at weblogic.security.service.CommonSecurityServiceManagerDelegateImpl.doBootAuthorization(CommonSecurityServiceManagerDelegateImpl.java:965)
    at weblogic.security.service.CommonSecurityServiceManagerDelegateImpl.initialize(CommonSecurityServiceManagerDelegateImpl.java:1050)
    at weblogic.security.service.SecurityServiceManager.initialize(SecurityServiceManager.java:873)
    at weblogic.security.SecurityService.start(SecurityService.java:141)
    at weblogic.t3.srvr.SubsystemRequest.run(SubsystemRequest.java:64)
    Truncated. see log file for complete stacktrace
Caused By: javax.security.auth.login.FailedLoginException: [Security:090304]Authentication Failed: User  javax.security.auth.login.LoginException: [Security:090301]Password Not Supplied
    at weblogic.security.providers.authentication.LDAPAtnLoginModuleImpl.login(LDAPAtnLoginModuleImpl.java:261)
    at com.bea.common.security.internal.service.LoginModuleWrapper$1.run(LoginModuleWrapper.java:110)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.bea.common.security.internal.service.LoginModuleWrapper.login(LoginModuleWrapper.java:106)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    Truncated. see log file for complete stacktrace 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T15:36:41.117

得到了解决方案。我删除了edit.lok文件，然后尝试重新启动。有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T14:51:51.773

尝试删除`ManagedServerDir/data/ldap`目录。

不要忘记备份

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-14T10:25:40.787

至于我，我必须编辑文件`boot.properties`并再次设置 weblogic 服务器的登录名和密码。以前的值是加密的，很明显，某些软件无法正确管理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T05:20:17.293

只需在 weblogic 服务器中对 boot.properties 和 edit.lok 进行根级别搜索并删除它们。（在删除之前备份）并重新启动服务器。

有用 ：-）

* * *

* * *

* * *

# c++ - dlopen - 未定义符号错误

> ID：12975673
> 
> 赞同：7
> 
> 时间：2012-10-19T13:47:36.600
> 
> 标签：c++, c, linux, dlopen, shared-libraries

我正在使用 dlopen 在运行时加载共享库

```
dlopen("SharedLibarary1.so", RTLD_NOW | RTLD_GLOBAL); 
```

在该共享对象中，我指的是在另一个共享库“SharedLibarary2.so”中定义的 const char*。

可执行文件和两个库都是使用 -rdynamic 构建的。

但是在使用 dlopen 时我仍然会遇到运行时错误：“/usr/lib/SharedLibarary1.so: undefined symbol”并指向损坏的 const char* 具有未定义的符号。

通过 GDB“信息共享”，我可以看到第二个库在出现错误时没有加载。

如果我在第一个库上执行 dlopen 之前在第二个库上执行该问题，那么这个问题会如何消失。

有没有更好的方法来强制加载器为未解析的符号加载第二个库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T14:37:04.147

构建共享库时，您可以在内部链接另一个，例如

```
 gcc -shared -rdynamic lib1*.pic.o -lshared2 -o SharedLibrary1.so 
```

然后检查`ldd SharedLibrary1.so`

（例如，以`ldd`系统的输出`libgtk-3.so.0`为例）

```
% ldd /usr/lib/x86_64-linux-gnu/libgtk-3.so.0
linux-vdso.so.1 =>  (0x00007fff6afff000)
libgdk-3.so.0 => /usr/lib/x86_64-linux-gnu/libgdk-3.so.0 (0x00007f0572628000)
libgmodule-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgmodule-2.0.so.0 (0x00007f0572424000)
librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f057221b000)
libpangocairo-1.0.so.0 => /usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0 (0x00007f057200e000)
libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f0571cd2000)
libXi.so.6 => /usr/lib/x86_64-linux-gnu/libXi.so.6 (0x00007f0571ac2000)
libXcomposite.so.1 => /usr/lib/x86_64-linux-gnu/libXcomposite.so.1 (0x00007f05718c0000)
libXdamage.so.1 => /usr/lib/x86_64-linux-gnu/libXdamage.so.1 (0x00007f05716be000)
libXfixes.so.3 => /usr/lib/x86_64-linux-gnu/libXfixes.so.3 (0x00007f05714b7000)
libatk-1.0.so.0 => /usr/lib/x86_64-linux-gnu/libatk-1.0.so.0 (0x00007f0571294000)
libcairo-gobject.so.2 => /usr/lib/x86_64-linux-gnu/libcairo-gobject.so.2 (0x00007f057108b000)
libcairo.so.2 => /usr/lib/x86_64-linux-gnu/libcairo.so.2 (0x00007f0570d91000)
libgdk_pixbuf-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0 (0x00007f0570b71000)
libpangoft2-1.0.so.0 => /usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0 (0x00007f0570946000)
libpango-1.0.so.0 => /usr/lib/x86_64-linux-gnu/libpango-1.0.so.0 (0x00007f05706f8000)
libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f0570459000)
libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f0570222000)
libgio-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 (0x00007f056fece000)
libgobject-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0 (0x00007f056fc7e000)
libglib-2.0.so.0 => /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f056f986000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f056f703000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f056f4e7000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f056f160000)
libXext.so.6 => /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f056ef4c000)
libXinerama.so.1 => /usr/lib/x86_64-linux-gnu/libXinerama.so.1 (0x00007f056ed4a000)
libXrandr.so.2 => /usr/lib/x86_64-linux-gnu/libXrandr.so.2 (0x00007f056eb42000)
libXcursor.so.1 => /usr/lib/x86_64-linux-gnu/libXcursor.so.1 (0x00007f056e937000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f056e733000)
/lib64/ld-linux-x86-64.so.2 (0x00007f0572f57000)
libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f056e512000)
libpixman-1.so.0 => /usr/lib/x86_64-linux-gnu/libpixman-1.so.0 (0x00007f056e28c000)
libpng12.so.0 => /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f056e064000)
libxcb-shm.so.0 => /usr/lib/x86_64-linux-gnu/libxcb-shm.so.0 (0x00007f056de61000)
libxcb-render.so.0 => /usr/lib/x86_64-linux-gnu/libxcb-render.so.0 (0x00007f056dc57000)
libXrender.so.1 => /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007f056da4d000)
libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f056d836000)
libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f056d60b000)
libselinux.so.1 => /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f056d3eb000)
libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007f056d1d5000)
libgthread-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgthread-2.0.so.0 (0x00007f056cfd2000)
libffi.so.5 => /usr/lib/x86_64-linux-gnu/libffi.so.5 (0x00007f056cdc5000)
libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f056cb87000)
libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f056c983000)
libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f056c77e000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:15:34.440

如果可能，您应该将 dlopen() 的每个共享库与链接器参数链接，以强制它在创建库时解析所有符号。通过这种方式，您可以更加确定您知道所有符号的来源。（例如，“-z defs”，在 Linux x86 下）

这样，如果您添加了一个新的源文件，但忘记将对象添加到链接中，您将不会因为 dlopen/dlsym 的运行时错误而摸不着头脑。

# jquery - 模态窗口中的 Flexslider 在窗口调整大小之前不加载第一张幻灯片

> ID：12975674
> 
> 赞同：1
> 
> 时间：2012-10-19T13:47:43.950
> 
> 标签：jquery, modal-dialog, flexslider

我在模态窗口中使用 Flexslider。当我打开模态窗口时，Flexslider 会出现以及下一个/上一个导航，但在我重新调整浏览器窗口大小之前不会加载第一张幻灯片，然后它会按原样显示。

这个问题在 Firefox 11.0、Chrome 19.0.1084.56 和 Opera 12.02 中似乎是一致的。

为了说明问题，请单击[此处的第一张图片](http://www.ianbatt.eu/work.html)

我读过 jQuery 不能使用隐藏元素，或者这甚至是问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:20:46.793

我知道这是一个旧线程，但我找到了解决这个确切问题的方法。我正在使用 Foundation 并使用带有 flexslider 的 Reveal 模式窗口打开一个新页面。

```
(function($) {
            $(window).ready(function(){
                $('.flexslider').flexslider({
                    animation: "slide",
                    start: function(slider){
                        $('body').removeClass('loading');
                    }
                });
            });
        })(jQuery); 
```

# jsrender - 我可以为这个 json 对象创建一个 jsrender 模板吗？

> ID：12975676
> 
> 赞同：1
> 
> 时间：2012-10-19T13:47:47.240
> 
> 标签：jsrender

我可以创建一个 jsrender 模板来访问这个 json 对象中的值“first”和“age”吗？

```
<script type="text/javascript">
    var names = { 
    "smith": [ 
        {
            "first" : "bill",
            "age" : "21"
        }
    ],
    "jones": [
        {
            "first" : "mary",
            "age" : "25"
        }
    ]
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:01:37.363

架构看起来很奇怪。但是你可以这样写：

```
<script id="myTmpl" type="text/x-jsrender">
    {{:smith[0].first}}: Age: {{:smith[0].age}}
    {{:jones[0].first}}: Age: {{:jones[0].age}}
</script> 
```

# c++ - 元编程传递值类型应该在哪里？

> ID：12975678
> 
> 赞同：2
> 
> 时间：2012-10-19T13:47:50.010
> 
> 标签：c++, templates

我用了一个例子

[http://en.wikipedia.org/wiki/Template_metaprogramming](http://en.wikipedia.org/wiki/Template_metaprogramming)

```
const unsigned long long y = Factorial<0>::value; // == 1 
```

我知道编译器可以进行类型检查，但我认为您不能将 0 放在类型应为的位置，并将其作为值。

有人可以解释这是如何工作的吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:54:53.263

> 我不认为你可以把 0 放在类型应该是的地方，它会被当作值

问题在于假设：它不是“类型应该在哪里”。相反，它是“可以指定模板参数的地方*”*。

在这种情况下，有一个*非类型模板参数*。

它之所以有效，仅仅是因为它是一个不同于*type template arguments*的特性。

就是这样。我可以推荐[C++ Templates: the Complete Guide或](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)[该列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)中的许多其他书籍来阅读 C++ 模板的基础知识。

*   [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:56:08.100

在那个特定的例子中：

```
template <int N>
struct Factorial {
    enum { value = N * Factorial<N - 1>::value };
};

template <>
struct Factorial<0> {
    enum { value = 1 };
}; 
```

编译器递归地生成类。请记住，模板本身不是一个类，只是生成类的一组规则。

最初，仅`Factorial<0>`存在。然后你写：

```
const int x = Factorial<4>::value; 
```

这告诉它它需要生成`Factorial<4>`将转换为的类：

```
template <>
struct Factorial<4> {
    enum { value = 4 * Factorial<3>::value };
}; 
```

这再次告诉它生成类`Factorial<3>`等等。当它到达时停止，`Factorial<0>`因为它已经定义并且不需要生成新的类来计算它的`value`成员。

基本上，它将计算从运行时转移到编译时。请注意，这并不总是有效（取决于 的值`N`，您的编译器可能不支持那么多级别的模板递归）。此外，这会增加代码大小。

这是为了如何 - 为什么这样做是因为它是标准允许的。

# javascript - jQuery：拆分（）或文本（）后出现语法错误？

> ID：12975687
> 
> 赞同：0
> 
> 时间：2012-10-19T13:48:02.967
> 
> 标签：javascript, jquery, syntax-error

我需要做的是抓住`<p>`元素中的第一个标签，遍历所有单词，然后将它们包装在`<span>`标签中。`<p>`我为此编写了一个脚本，我认为该脚本有效，但是当标签中包含某些字符时，它似乎会中断。我不知道是哪个字符导致它中断。

这是我当前的代码：

```
$(document).ready(function(){
// Transform is set on html tag by modernizr
// Apply this on all .quote boxes, even if there are multiple (most likely aren't)
$('.csstransforms .quote').each(function() {
    // Get data
    var elem = $(this).find('p:first'),
        html = elem.text(),
        words = html.split(" "),
        charCount = html.length

    $(this).append('<p class="fixed"></p>');

    // Add new words
    var tmpWord = '';
    for(i=0; i< words.length ; i++) {
        tmpWord = $.trim(words[i]);

        if(tmpWord && tmpWord != "") {
            // Maybe replace with $(elem).next('.fixed') or something?
            $('.csstransforms .quote .fixed').append('<span>'+ tmpWord +' </span>');   
        }
    }

    // Check word count, make size smaller if needed
    if(charCount > 150) {
        // Add class to .quote box
        $(this).addClass('smaller');
    }

    // Hide original <p>
    $(elem).hide();
});
}); 
```

我得到的错误如下，您在文本中看到的是实际报价：

```
Uncaught Error: Syntax error, unrecognized expression: "In the decade or so, science has discovered a tremendous amount about the role emotions play in our lives. Researchers have found that even more than IQ, your emotional awareness and abilities to handle feelings, will determine your success and happiness in all  walks of life, including family relationships". – John Gottman, Ph. D. 
```

关于导致此问题的原因以及如何解决的任何想法？一直在咀嚼它一段时间没有成功。

**更新：** Jsfiddle 显示相同的错误：http: [//jsfiddle.net/Uugbc/](http://jsfiddle.net/Uugbc/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:01:06.633

只是为了澄清。你的小提琴有 `charCount = $(html).text().length;` ，但你的变量`html`不是 jQuery 对象。

这会更好

```
 var elem = $(this).find('p:first'),
        html = elem.text(),
        words = html.split(" "),
        charCount = html.length; // here you had $(html).text().length; 
```

# image-processing - 伽马校正到底需要什么？

> ID：12975688
> 
> 赞同：9
> 
> 时间：2012-10-19T13:48:04.497
> 
> 标签：image-processing, brightness, gamma, luminance

我无法完全理解伽玛校正的必要性。我希望你们能帮助我。

假设我们要显示 256 个相邻像素。这些像素应该是从黑色到白色的平滑渐变。为了表示它们的颜色，我们使用线性灰度值，`0..255.`由于人眼的非线性，显示器不能仅仅将这些值转换为线性亮度值。如果相邻像素具有亮度值`(1/256)*I_max, (2/256)*I_max, et cetera`，我们会在较暗的区域感觉到两个像素之间的亮度差异过大（渐变将不平滑）。

幸运的是，监视器对人眼具有互为非线性。这意味着，如果我们将线性灰度值`0..255`放入帧缓冲区，那么监视器会将它们转换为非线性亮度值 x^gamma。然而，由于我们的眼睛反过来是非线性的，我们会感知到平滑的线性渐变。显示器的非线性和我们的一只眼睛相互抵消。

那么，为什么我们需要伽玛校正呢？我在书中读到我们总是希望显示器产生线性亮度值。根据他们的说法，在将灰度值写入帧缓冲区之前，必须补偿监视器的非线性。这是通过伽马校正完成的。然而，我的问题是——据我所知——当显示器产生线性亮度值时，我们不会感知到线性亮度值（即我们不会感知到平滑、稳定的渐变）。

在我看来，如果我们将线性灰度值放入帧缓冲区，那将是完美的。监视器将这些值转换为非线性亮度值，我们的眼睛再次感知线性亮度值，因为眼睛是互易非线性的。无需对帧缓冲区中的灰度值进行伽玛校正，也无需强制监视器产生线性亮度值。

我看待这些事情的方式有什么问题？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T02:22:22.237

Allow me to ‘resurrect’ this question since I am struggling with similar questions right now and I think I have found the answer -it may be useful for someone else. Or I might be wrong and someone could tell me :)

I think there is nothing wrong with your way of thinking. Thing is, you don‘t need to gamma-correct all the time, if you know what you are doing. It depends on what you want to achieve. Let‘s see two different cases.

A) Light simulation (AKA rendering). You have a diffuse surface with a light pointing towards it. Then, the light's intensity is doubled.

Well. Let’s see what happens in the real world in such situation. Assuming a purely diffuse surface, the intensity of the light reflected is going to be the surface's albedo multiplied by the incoming light intensity and the cosine of the incoming light angle and the normal. Whatever. Thing is, when the incoming light intensity is doubled, the reflected light intensity will be doubled too. This is why light transport is said to be a linear process. Funny enough, you will not perceive the surface as twice as bright, because our perception is nonlinear (This is modelled by the so-called Steven's power law). Put again: in the real world the reflected light is doubled, but you do not perceive it twice as bright.

Now, how would we simulate this? Well, if we have a sRGB texture with the surface's albedo, we would need to linearlize it (by de-correcting it, which means applying the 2.2 gamma). Now that it is linear, and we have the light intensity, we can use the formula I said before to compute the reflected light intensity. Since we are in a linear space, by doubling the intensity we will double the output, like in the real world. Now we gamma-correct our results. Because of this, when the screen displays the rendered image, it will apply the gamma and so it will have a linear response, meaning that the intensity of the light emited by the screen will be twice as much when we simulate the twice-as-poweful light than when we simulate the first one. So the light that arrive at your eyes from your screen will have double the intensity. Exactly as it would happen if you were looking at the real surface with real lights affecting it. You will not perceive the second render twice as bright, of course but, again, and as we said earlier, this is exactly what it would happen in the real situation. Same behavior in the real world and in the simulation means that the simulation (the render) was correct :)

B) A different case is precisely if you want a gradient that you want to 'look' (AKA being perceived) as linear.

Since you want the nonlinear response of the screen to cancel out our nonlinear visual perception, you can skip gamma correction altogether (as you suggest). Or, more accurately, keep operating in linear space and gamma-correcting, but creating your gradient not with consecutive values for the pixels(1,2,3...255) that would be perceived nonlinearly (because of Steven's), but values transformed by the inverse of our perceptual brightness response (that is, applying an exponent of 1/0.5=2 to the normalized values. This is applying the reciprocal of Steven's exponent for brightness).

As a matter of fact, if you see gamma-corrected linear gradient such as the one in [http://scanline.ca/gradients/](http://scanline.ca/gradients/) you do not perceive it as linear at all: you see far more variation in the lower intensities than in the higher ones (as expected).

Well, at least this is my current understanding of the topic. I hope it helps anyone. And again, please, please, if it is wrong I would be really grateful if someone could point it out...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T14:02:02.997

问题实际上是在进行颜色计算时。例如，如果要混合两种颜色，则需要使用线性强度进行计算。为了实际显示正确的结果，您必须将线性强度转换回伽马校正强度。

您的眼睛如何感知强度无关紧要。要正确进行颜色计算，必须根据光学的物理原理来完成，这依赖于线性亮度值。一旦您计算了颜色，您希望显示器输出这些亮度值，而不管它是如何被感知的，因此您必须补偿显示器不直接产生您想要的颜色的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:17:00.347

要真正回答你看待这个问题的方式有问题的问题——这并没有什么问题。拥有一个线性帧缓冲区会很棒，但正如您所说，拥有一个 8 位线性帧缓冲区肯定不是很好。

8 位是如此容易处理的事实几乎是伽玛压缩帧缓冲区和颜色符号的唯一理由（想想 HTML 的 #888 - 将 #333 用于中间灰色而不是 #888 会不会很酷）。

关于显示器 - 您希望能够预测它对您的输入的响应，并且您可以从 sRGB 中知道它应该是什么。通常这就是您需要知道的全部内容。如果监视器产生“线性”输出，如果您补偿监视器的伽马可以*模拟，有些人认为这是“正确的”或其他东西。*我建议避开这样的设置，它会破坏所有（正确且合理地）假设标准 gamma 的应用程序，而支持不间断的、考虑不周的线性假设应用程序。不要那样做。相反，修复应用程序或转储它们。

# c++ - 访问派生类中的指针成员变量

> ID：12975692
> 
> 赞同：-4
> 
> 时间：2012-10-19T13:48:17.763
> 
> 标签：c++

我有以下代码：

```
class B{
    protected:
    X *x;
    public:
    function(char *data){
        // access x
        // works fine
    } 
};

class D: public B {
    function2(char *data)
    {
            // access x
            // gets garbage
    } 
}; 
```

我有一个成员变量，它是指针。此外，这个指针在里面 `"data"` ，但是当我在 D 类中访问时它显示垃圾。

有人能帮帮我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:52:39.827

我戴上了我的通灵调试帽，得出的结论是你可能正在做这样的事情：

```
class Packet
{
public:
  Gizmo* gizmo_;
};

class Processor
{
public:
  void ProcessPacket(char* packet);
};

// ...

Packet packet;
// packet filled with goodies

Processor proc;
proc.ProcessPacket(reinterpret_cast<char*>(&packet.gizmo_)); 
```

我对吗？

如果是这样，我的猜测是`Gizmo`您指向的 已超出范围 - 从而被破坏 - 或者您错误地执行了转换。

# android - Android：当意图调用服务时 UI 冻结

> ID：12975696
> 
> 赞同：0
> 
> 时间：2012-10-19T13:48:27.123
> 
> 标签：android

您好，我有如下意图启动服务

```
public void startAlarmService() {
    Intent i = new Intent();
    i.setAction("me.application.AlarmService");
    startService(i);
} 
```

选中复选框时调用此方法。但是，当它被选中时，UI 会冻结 5 秒。

我尝试通过运行一个新线程来调用上述方法，然后使用 AsyncTask 但两者都不起作用，并且运行也需要 5 秒，因为例如我放置了一个进度对话框，并且 UI 在显示进度对话框之前冻结.

如何确保 UI 在启动此服务时不会冻结？

谢谢你的帮助。

编辑：服务代码：使用异步任务下载部分：

```
asyncDownload aCall = new asyncDownload(getApplicationContext(),this);              
boolean result = aCall.execute().get();
return result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:11:31.747

默认情况下，服务与同一应用程序的活动在同一线程上运行，即 UI 线程。
所以在一个新线程中运行你的服务看起来是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:30:22.540

您首先创建一个`AsyncTask`，然后使用它的`get()`方法，它会阻塞主线程。正确执行 - 在后台工作`doInBackground(Params...)`，然后在主线程中再次调用 UI `onPostExecute(Result)`，而不是使用`get()`.

# ruby - Rails 3.2.8 - 如何在 Rails 上接收无格式的图像、视频和声音文件？

> ID：12975698
> 
> 赞同：1
> 
> 时间：2012-10-19T13:48:39.930
> 
> 标签：ruby, ruby-on-rails-3, image, carrierwave

我正在制作一个处理移动设备交互的 API。

我知道如何处理简单的变量处理，例如：

```
curl -XPOST -H "Content-Type: application/json" "http://localhost:3000/api/v1/registrations" -d "{registration: {"nickname":"john_doe", "password":"secret", "confirmed":"true", "email":"john.doe@gmail.com","blood_type":"B+"}}" 
```

这个 POST 调用将转到我的控制器：

```
class RegistrationController < ApplicationController
    def create
      Registration.create!(params[:registration])
    end
end 
```

这只是将信息发布到我的注册模型的一种非常简单的方法。

但是，如果我通过 POST 请求使用 JSON 处理图像、声音和视频上传，除了必须使用像 Carrierwave 这样的上传文件之外，我还需要做些什么吗？

例如，它会处理这样的请求吗？

```
curl -XPOST -H "Content-Type: application/json" "http://localhost:3000/api/v1/registrations" -d "{registration: {"nickname":"john_doe", "password":"secret", "confirmed":"true", "email":"john.doe@gmail.com","blood_type":"B+", "image": IMAGE_FILE_IN_BINARY_OR_SOME_OTHER_FORMAT?}}" 
```

图像文件应该作为二进制文件传输还是有特定的格式？

# sqlite - SQLite 查询延迟

> ID：12975702
> 
> 赞同：0
> 
> 时间：2012-10-19T13:48:48.490
> 
> 标签：sqlite, optimization

我有一个非常简单的查询：

```
SELECT count(id), min(id), max(id), sum(size), sum(frames), sum(catalog_size + file_size)
FROM table1 
```

`table1`拥有大约 3000 到 4000 条记录。

我的问题是运行此查询大约需要 20 秒。而且由于它被多次调用，延迟对客户来说非常明显。

这个查询需要 20 秒是正常的吗？有什么办法可以提高运行时间吗？如果我从 SQLite Manager 运行相同的查询，则执行需要几毫秒。仅当从我们的软件调用查询时才会出现延迟。`EXPLAIN`并`EXPLAIN QUERY PLAN`没有太大帮助。我们使用 SQLite 3.7.3 版本和 Windows XPe。

任何想法如何解决这个问题或提高查询的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:31:13.893

所有`sum`s 都要求必须读取表中的每条记录。

如果表包含的列多于上面显示的列，则从磁盘读取的数据包含有用和无用的值（尤其是当您有大 blob 时）。[在这种情况下，您可以尝试通过在该查询所需的列上创建覆盖索引](http://www.sqlite.org/queryplanner.html#covidx)来减少该查询需要读取的数据。
在 3.7.15 之前的 SQLite 版本中，您需要`ORDER BY`为第一个索引字段添加一个以强制 SQLite 使用该索引，但这不适用于所有查询。（对于您的查询，请尝试更新[到此 beta](http://www.sqlite.org/sqlite3-20121009.zip)或等待 3.7.15。）

# javascript - 我的增值税计算错误

> ID：12975705
> 
> 赞同：0
> 
> 时间：2012-10-19T13:49:01.430
> 
> 标签：javascript, decimal, calculator, parseint

我正在尝试做一个用大桶进行小计算的函数。

所以我有以下代码：

```
<script type="text/javascript">
    function calcdebours()
    {
        var taux         = document.getElementById('debours_taux_tva').value;
        var ht_no_tva     = document.getElementById('debours_montant_ht_no_tva').value;
        var ht_tva        = document.getElementById('debours_montant_ht_tva').value;
        var tva= Math.round((((ht_tva)*(taux))/100)*100)/100;
        ;
        if(taux=='')
        {
            taux=0;
        }
        if(ht_no_tva=='')
        {
            ht_no_tva=0;
        }
        if(ht_tva=='')
        {
            ht_tva=0;
        }
        document.getElementById('debours_montant_tva').value = tva  ;
        document.getElementById('debours_montant_ttc').value = (tva) + parseInt(ht_tva)+ parseInt(ht_no_tva)

    }

    </script> 
```

在小提琴下面：

[http://jsfiddle.net/6zzRZ/](http://jsfiddle.net/6zzRZ/)

但尽管计算错误，我认为它不算分。

我试过只使用 var 1 + var 2 但它只是用来连接数字或者我使用 parseInt 函数。

它已经奏效了，但任何数量的结果都是错误的。

问题是我尝试了 parseDecimal 但它说这个函数不存在。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:54:58.263

试试`parseFloat`。或者像这样使用酉`+`：`var ht_no_tva = +document.getElementById('debours_montant_ht_no_tva').value;`这给 JavaScript 一个提示，它应该将值视为一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:52:00.063

使用 parseFloat() 而不是 parseDouble： [http ://www.w3schools.com/jsref/jsref_parsefloat.asp](http://www.w3schools.com/jsref/jsref_parsefloat.asp)

# view - 映射以查看自定义字段名称 - 一对一关系

> ID：12975707
> 
> 赞同：3
> 
> 时间：2012-10-19T13:49:06.500
> 
> 标签：view, fluent-nhibernate, sql-server-2000

我无法让 NHibernate在这种一对一关系中映射表列`AccountCode`的列（每个都有一个，每个都有一个）。`Beneficiary``AccountCode``Account``Beneficiary``Beneficiary``Account`

课程：

```
public class Account
{
    ...
    public virtual string Name { get; protected set; }
    public virtual string Code { get; protected set; }
}

public class Beneficiary
{
    ...
    public virtual int Id { get; set; }
    public virtual string Name { get; protected set; }
    public virtual Account Account { get; protected set; }
    public virtual BeneficiaryGroup Group { get; protected set; }
} 
```

SQL：

```
CREATE VIEW dbo.Account AS
    SELECT DISTINCT RTRIM(LTRIM(ACCNT_NAME)) AS Name, 
                    RTRIM(LTRIM(ACCNT_CODE)) AS Code
    FROM myremoteserver.schema.tablename
    WHERE ACCNT_TYPE NOT IN ('B', 'P')

CREATE TABLE dbo.Beneficiary
(
    Id INT IDENTITY(1,1) NOT NULL, 
    BeneficiaryGroupId INT NOT NULL CONSTRAINT FK_Beneficiaries_BeneficiaryGroup FOREIGN KEY REFERENCES dbo.BeneficiaryGroup (Id), 
    Name VARCHAR(100) NOT NULL,
    AccountCode VARCHAR(100) NOT NULL,
    CONSTRAINT PK_Beneficiary PRIMARY KEY (Id)
) 
```

当尝试使用`HasMany`和不同的变体时，NHibernate 会尝试加入该`Beneficiary.Id`列。

`Map`我尝试了,的不同变体`References`（`Join`它告诉我连接已经存在）和`HasMany`（它失败了，因为关系确实是一对一的）。

如何让 NHibernate 将这两个类正确映射到它们的列？

* * *

在尝试不同的流利映射时，在 my`IAutoMappingOverride<Beneficiary>`中，会发生以下情况：

```
mapping.HasOne(b => b.Account);
mapping.HasOne(b => b.Account).PropertyRef(sa => sa.Code);
mapping.HasOne(b => b.Account).PropertyRef(sa => sa.Code).ForeignKey("none"); 
```

生成的 SQL 使用`Beneficiary.Id`字段而不是`Beneficiary.AccountCode`. （在你问之前，我使用“none”，因为`Account`它是一个视图，它不能有一个键）。

```
mapping.Join("AccountCode", x => x.References(y => y.Account));
mapping.Join("Account", b => b.KeyColumn("AccountCode")); 
```

结果在`Tried to add join to table 'Account' when already added.`.

和：

```
mapping.Map(b => b.Account, "AccountCode");
mapping.Map(b => b.Account).ReadOnly().Column("AccountCode"); 
```

导致：

> 无法确定类型：.Account，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null，列：NHibernate.Mapping.Column(AccountCode)

```
mapping.References(b => b.Account).Column("Code"); 
```

结果在`Invalid column name 'Code'.`.

和：

```
mapping.References(b => b.Account).Column("AccountCode");
mapping.References(b => b.Account).Column("AccountCode").Access.Property(); 
```

覆盖我的所有`IReferenceConvention`覆盖（将某些类映射为具有`<class name>Code`键列）。

尝试时`HasMany`：

```
mapping.HasMany<Account>(b => b.Account).KeyColumn("AccountCode"); 
```

> 自定义类型未实现 UserCollectionType: .Account

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:19:36.917

```
// in BeneficiaryMapping
mapping.References(b => b.Account)
    .Column("AccountCode" /* of Beneficiary table*/)
    .PropertyRef(a => a.Code); // use the Column of Code as the joincolumn in Account table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:52:54.223

这种方法类似于 Firo 的方法，但映射更简单。它`References`像他建议的那样使用，因为这就是 NH 允许您选择实体主键属性以外的属性来引用另一种类型的方式。`PropertyRef`没有必要，因为 NH“知道”它将使用该值`AccountCode`作为`Account`视图中的“键”。

以下是如何映射`Account`：

```
public class AccountMap : ClassMap<Account>
{
    public AccountMap()
    {
        // Code as a psuedo primary key in the view:
        Id(acc => acc.Code)
            .GeneratedBy.Assigned();

        Map(acc => acc.Name);

        // Add other mappings here...

        // Ensure NH doesn't try to update the lookup view:
        ReadOnly();
    }
} 
```

这是`Beneficiary`外观的映射方式：

```
public class BeneficiaryMap : ClassMap<Beneficiary>
{
    public BeneficiaryMap()
    {
        Id(b => b.Id)
            .GeneratedBy.Identity()
            .UnsavedValue(0);

        Map(b => b.Name);
        // Other mapped properties...

        References<BeneficiaryGroup>(b => b.Group, "BeneficiaryGroupId");
        References<Account>(b => b.Account, "AccountCode");
    }
} 
```

# eclipse - eclipse juno jstl错误找不到标签库

> ID：12975716
> 
> 赞同：0
> 
> 时间：2012-10-19T13:49:42.903
> 
> 标签：eclipse, jstl, eclipse-juno

我最近将我的 Eclipse 升级到了 Juno。现在，当我打开我的 Spring MVC 项目时，我所有的 jsp 文件都被标记为错误。错误在这一行

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

错误信息是：

```
 Can not find the tag library descriptor for "http://java.sun.com/jsp/jstl/core" 
```

我尝试创建一个新的工作区并从 svn 检查我的项目。这没有效果。

我发现我可以通过打开每个文件、进行一些微不足道的更改并保存文件来解决这个问题。不用说，这不是一个非常可扩展的修复程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:32:13.970

您可以从主菜单栏的项目菜单中清理项目，然后全部构建，或者从项目的上下文菜单中调用验证操作。要么将强制重新验证 jsp 文件。

# svg - 使用 和 在 SVG 中

> ID：12975717
> 
> 赞同：8
> 
> 时间：2012-10-19T13:49:57.350
> 
> 标签：svg

我正在尝试在 SVG 中正确实现 foreignObject 标记的 switch 标记，以便 Internet Explorer 可以显示其他内容（IE 中没有新内容，总是忽略功能）。该文档*几乎*完全清楚地说明了如何执行此操作：

```
<switch>
<!-- Process the embedded XHTML if the requiredExtensions attribute
     evaluates to true (i.e., the user agent supports XHTML
     embedded within SVG). -->
<foreignObject width="100" height="50"
               requiredExtensions="http://example.com/SVGExtensions/EmbeddedXHTML">
  <!-- XHTML content goes here -->
  <body xmlns="http://www.w3.org/1999/xhtml">
    <p>Here is a paragraph that requires word wrap</p>
  </body>
</foreignObject>
<!-- Else, process the following alternate SVG.
     Note that there are no testing attributes on the 'text' element.
     If no testing attributes are provided, it is as if there
     were testing attributes and they evaluated to true.-->
<text font-size="10" font-family="Verdana">
  <tspan x="10" y="10">Here is a paragraph that</tspan>
  <tspan x="10" y="20">requires word wrap.</tspan>
</text> 
```

该示例很好且清晰，并展示了如何使用 requiredExtensions 属性。但是，超链接“http://example.com/SVGExtensions/EmbeddedXHTML”对我来说毫无意义。为了表明 XHTML 是这个 foreignObject 的 requiredExtension，我必须用什么来代替它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T15:17:20.633

经过多次摆弄，我找到了答案。该示例可能应该添加到文档中......到目前为止，我已经在 IE、FF 和 Chrome 中进行了测试，并且所有三个都正确处理了开关：

我没有使用“requiredExtensions”属性，而是使用了“requiredFeatures”属性并链接到“http://www.w3.org/TR/SVG11/feature#Extensibility”

所以它看起来像：

```
<switch>
  <foreignObject width="100" height="50" 
                 requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
    <!-- whatever external user-agent stuff -->
  </foreignObject>

  <!-- Alternate SVG content if foreignObject is not supported -->
</switch> 
```

这适用于测试用户代理是否支持 foreignObject，但它并不完美，因为您仍然没有指出您计划在用户代理可能不支持的 foreignObject 中使用哪个外部命名空间。不过，它总比没有好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:39:36.693

不幸的是，没有标准说明要做什么，但 Firefox 使用`http://www.w3.org/1999/xhtml`来表明它支持在 foreignObject 标记（和`http://www.w3.org/1998/Math/MathML`mathml）中的 xhtml。我相信其他 UA 可能已经复制了这个，但我没有检查过。

# mod-rewrite - Mod重写部分匹配

> ID：12975719
> 
> 赞同：0
> 
> 时间：2012-10-19T13:50:05.447
> 
> 标签：mod-rewrite, redirect

我正在编写一个网络应用程序并尝试使用 mod rewrite 来美化我的 URL。我在我的 htaccess 文件中使用以下内容，但存在问题。如果您尝试转到 /members，它会将您带到正确的页面，但如果您尝试转到 /members/1234，它仍然会将您带到 members.php 页面而不是 member_profile.php 页面。我知道这是因为请求与第一条规则匹配，但我不知道解决此问题的最佳方法。我应该先用最严格的方式重新排序它们还是有更正确的方法？谢谢。

```
RewriteEngine On
# prevent indexing directories
Options -Indexes
# members section
RewriteRule ^members /scripts/members.php
# member profile page
RewriteRule ^members/([0-9]+) /scripts/member_profile.php?id=$1
# groups section
RewriteRule ^groups /scripts/groups.php
# group profile page
RewriteRule ^groups/([0-9]+) /scripts/group_profile.php?id=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:05:30.490

您需要使用匹配字符串的结尾`$`（并且您还需要使用`L`标志来停止重写）：

```
RewriteEngine On
# prevent indexing directories
Options -Indexes
# members section
RewriteRule ^members$ /scripts/members.php [L]
# member profile page
RewriteRule ^members/([0-9]+)$ /scripts/member_profile.php?id=$1 [L]
# groups section
RewriteRule ^groups$ /scripts/groups.php [L]
# group profile page
RewriteRule ^groups/([0-9]+)$ /scripts/group_profile.php?id=$1 [L] 
```

# c - 查找 malloc 函数分配的大小

> ID：12975724
> 
> 赞同：1
> 
> 时间：2012-10-19T13:50:21.053
> 
> 标签：c, memory, integer, malloc

> **可能重复：**
> [任何查询已分配块大小的函数？](https://stackoverflow.com/questions/1428679/any-function-to-query-the-size-of-an-allocated-block)
> [仅使用返回的指针获取 malloc 的大小](https://stackoverflow.com/questions/12131925/getting-the-size-of-a-malloc-only-with-the-returned-pointer)

假设我让用户使用 malloc 函数指定要传递给 int *x 的字节数。有没有办法确定分配给整数的实际字节数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:54:53.330

没有便携的方式。语言标准没有提供任何方法来做到这一点。

当然，每个实现都需要以某种方式跟踪`malloc`ed 内存的大小，以便能够正确`free`处理它，因此它可以提供一种获取该信息的方法。在 glibc 中`malloc.h`，有一个原型

```
size_t malloc_usable_size(void *); 
```

这允许您获得为传入指针分配的可用字节数，但这通常大于`malloc`调用中请求的字节数。其他实现可能会提供其他方式来获取此类信息。

# c# - 检测在调试而非生产中工作的刷新/回发条件

> ID：12975725
> 
> 赞同：2
> 
> 时间：2012-10-19T13:50:24.803
> 
> 标签：c#, asp.net, master-pages, page-refresh

在网上搜索后，似乎有一个强烈的共识，即防止刷新触发数据库访问的一个好方法是使用 ViewState 变量和 Session 变量来检测条件。这是我的基页类中的代码：

```
 protected override void OnLoad( EventArgs e )
    {
        base.OnLoad( e ); 

        if ( IsPostBack && ViewState["REFRESH_CHECK"] != Session["REFRESH_CHECK"] )
        {
            IsRefresh = true;
        }
        Session["REFRESH_CHECK"] = System.Guid.NewGuid().ToString();
        ViewState["REFRESH_CHECK"] = Session["REFRESH_CHECK"];
    }

    public virtual bool IsRefresh
    {
        get;
        private set;
    } 
```

所以在我的页面中，我有一些看起来像这样的代码：

```
 protected void Page_Load( object sender, EventArgs e )
    {
        if ( !IsPostBack )
        {
            if ( !IsRefresh )
            {
                doStuffThatShouldOnlyBeDoneOnce();
            }
        }
    } 
```

这在调试时工作得很好，但是当我在生产系统上运行时，我总是得到两次 doStuff...() 方法的调用。当然，当我调试它时，只有一个调用。

它可能相关也可能不相关，但我也在使用嵌套母版页。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:05:25.637

哦，伙计，请不要使用此代码，这可能会破坏您的网页。对于一个简单的测试，尝试使用两个不同的选项卡打开同一页面，您将看到解决方案失败。F5 刷新问题的唯一解决方案是`Response.Redirect`. 我已经尝试过这个解决方案，所以我根据我的经验告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:29:55.923

半答案

我无法弄清楚为什么 Page_Load() 在生产环境中被调用两次，而在调试模式下只被调用一次。

关于刷新两次访问数据库的技术都没有对我有用。

所以我采取的方法是改变工作的完成地点。我没有在加载新页面时执行代码，而是在重定向之前按下按钮控件时在委托中执行代码。

```
delegate( Object o, EventArgs eventArgs ) 
{
    doStuffHere();
    HttpContext.Current.Response.Redirect( "admin/Admin.aspx", false );
} 
```

在这种情况下，下一页需要在上一页的基础上进行一些设置，只要我在所有重定向之前都使用这个，一切都很好。如果用户直接访问 URL，这不起作用，但对于这种特殊情况，没关系 - 页面不会完全填充，但不会导致错误，用户仍然可以工作。

# php - 将 ajax 请求记录到日志文件

> ID：12975727
> 
> 赞同：1
> 
> 时间：2012-10-19T13:50:30.187
> 
> 标签：php, ajax, jquery

我有一个单页应用程序，它通过 ajax 调用完成所有工作。现在，我需要将 ajax 调用记录到单个文件中。我已经完成了日志记录并且它可以工作，但是由于我无法对我感兴趣的行为进行压力测试您的意见：如果两个或更多用户单击“保存”并因此使用保存“记录”的功能会发生什么同时到一个文件。如果脚本无法写入已经打开的文件（通过潜在的并行“保存”请求打开），它会不会抛出错误？有什么方法可以用来确保“记录”已保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:55:13.717

为什么不使用已经解决这个问题的日志框架？

请参阅：[https ://stackoverflow.com/questions/341154/php-logging-framework](https://stackoverflow.com/questions/341154/php-logging-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:22:00.383

首先缓冲一些请求，然后在特定点将缓冲区转储到文件中。php中有flock。

# excel - 根据日期在 Microsoft Excel 中计算金额

> ID：12975730
> 
> 赞同：0
> 
> 时间：2012-10-19T13:50:34.763
> 
> 标签：excel, vba

我已经写了7个月的费用。我想知道每月 5 日的每月开支总额。我应该如何在excel中做到这一点？

详细：费用大致按每日记录。我可以计算出迄今为止所有费用的总和。现在我想创建一个检查点或说每月的费用。格式：

```
S. No. | Date | Particulars | Amount 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:12:24.250

不需要VBA。

如果您有 XL 2007 (2010) 和 Analysis ToolPak 作为插件可用，则可以使用它。

假设您的列在 A:D 中，第 1 行包含列标题。

将您的每月日期放在 F 列下，从 F2 开始

```
1/5/2012
2/5/2012
3/5/2012 
```

然后在 G2 中，写下这个公式：

```
=SUMIFS($D$2:$D$37,$B$2:$B$37,"<="&F2,$B$2:$B$37,">"&EDATE(F2,-1))
'adjust $37 to fit your specific row number where your data ends 
```

然后根据您的日期填写。从上个月的 6 日到给定月份的 5 日，您将获得每月总和。

如果您需要稍作调整，请告诉我，但这确实能让您走上正确的道路。

最后，如果您使用不同版本的 XL 或没有 ToolPak，请告诉我，我可以调整公式以配合您使用。

# javascript - 我想在 JavaScript 中验证我的必填字段不为空

> ID：12975734
> 
> 赞同：1
> 
> 时间：2012-10-19T13:50:40.607
> 
> 标签：javascript, validation

希望这是基本的 JavaScript，因为我是新手，所以答案很简单。我只想确保在用户继续之前所有必填字段都不为空。在我`<form>` `action` `=` `payment.php`的和提交按钮中包含`onclick="insert();"`当 child_name 留空时，它只是进入下一页而不是警报。这是代码：

```
 <script type="text/javascript">
    function insert() {
        if (window.XMLHttpRequest) {
            xmlhttp = new XLMHttpRequest();
        } else {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }

        cn1 = 'child_name'+document.getElementById('child_name').value;
        ag2 = 'age'+document.getElementById('age').value;
        hm3 = 'hometown'+document.getElementById('hometown').value;
        bg4 = 'boy_girl'+document.getElementById('boy_girl').value;
        fn5 = 'first_name'+document.getElementById('first_name').value;
        ln6 = 'last_name'+document.getElementById('last_name').value;
        email = 'email'+document.getElementById('email').value;
        ad8 = 'address1'+document.getElementById('address1').value;
        ad9 = 'address2'+document.getElementById('address2').value;
        ct10 = 'city'+document.getElementById('city').value;
        st11 = 'state'+document.getElementById('state').value;
        zp12 = 'zip'+document.getElementById('zip').value;

        if (cn1.equals("")) {

        xmlhttp.open('POST', 'payment.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(cn1&ag2&hm3&bg4&fn5&ln6&email$ad8&ad9&ct10&st11&zp12); 
        } else {
        alert ("Please enter all required fields.");
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:58:19.090

这里有几个问题：

```
cn1 = 'child_name'+document.getElementById('child_name').value; 
```

在这种情况下，您将 cn1 分配给字符串`'child_name'`+ 您的 child_name 文本框的值...它永远不会等于空字符串。

其次，您希望您的`insert()`方法返回`false`错误以停止按钮的预期操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:13:28.427

如果我是你，我会给这些元素中的每一个一个通用名称或一个类。

例如：

```
<input id="child_name" class="not_blank" type="text">
<input id="age" class="not_blank" type="text">
<input id="hometown" class="not_blank" type="text"> 
```

由于您将所有这些元素按类分组。

然后你的javascript会容易得多：

```
var flagInvalid = false;
var tempArray = document.getElementsByClassName("not_blank");
for (var i = 0; i < tempArray.length; i++)
{
    if (tempArray[i].value == "" || tempArray[i].value === undefined || tempArray[i].value == null){
        flagInvalid = true;
        break; 
    }
}

if (flagInvalid == false){
    xmlhttp.open('POST', 'payment.php', true);
    xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xmlhttp.send(cn1&ag2&hm3&bg4&fn5&ln6&email$ad8&ad9&ct10&st11&zp12); 

} else { alert ("Please enter all required fields."); } 
```

顺便说一句，我强烈建议不要使用“警报”。尝试在文档本身上创建一个消息传递系统。喜欢：

```
<span id="log" class="hidden" style="color:red"><b>"Please enter all required fields." <b></span> 
```

你的 CSS 看起来像这样：

```
.hidden { display: none; }
.show { display: inline; } 
```

您的 javascript 将更改为：

```
if (flagInvalid == false){
    var log = document.getElementById("log");
    log.className = 'hidden';
    xmlhttp.open('POST', 'payment.php', true);
    xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xmlhttp.send(cn1&ag2&hm3&bg4&fn5&ln6&email$ad8&ad9&ct10&st11&zp12); 

} else { 
    var log = document.getElementById("log");
    log.className = 'show';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:03:06.697

尝试将函数更改为：（注意：您必须在 if 子句中为其余元素添加更多测试）

```
function insert() {
    if (window.XMLHttpRequest) {
        xmlhttp = new XLMHttpRequest();
    } else {
        xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
    }

    if (document.getElementById('child_name').value === '' ||
        document.getElementById('age').value === '' || 
        ...more tests... || 
        document.getElementById('zip').value === '') {
        alert ("Please enter all required fields.");
        return false;
    } else {
        cn1 = 'child_name'+document.getElementById('child_name').value;
        ag2 = 'age'+document.getElementById('age').value;
        hm3 = 'hometown'+document.getElementById('hometown').value;
        bg4 = 'boy_girl'+document.getElementById('boy_girl').value;
        fn5 = 'first_name'+document.getElementById('first_name').value;
        ln6 = 'last_name'+document.getElementById('last_name').value;
        email = 'email'+document.getElementById('email').value;
        ad8 = 'address1'+document.getElementById('address1').value;
        ad9 = 'address2'+document.getElementById('address2').value;
        ct10 = 'city'+document.getElementById('city').value;
        st11 = 'state'+document.getElementById('state').value;
        zp12 = 'zip'+document.getElementById('zip').value;

        xmlhttp.open('POST', 'payment.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(cn1&ag2&hm3&bg4&fn5&ln6&email$ad8&ad9&ct10&st11&zp12); 
    }
} 
```

# javascript - 将字符串转换为Dom节点javascript？

> ID：12975737
> 
> 赞同：3
> 
> 时间：2012-10-19T13:50:52.977
> 
> 标签：javascript, dom

我有这个代码

```
var tmpEl = document.createElement('div')
tmpEl.innerHTML = stringEl;
return tmpEl.firstChild 
```

我用于将文本转换为 Dom 节点。问题是，如果`stringEl`包含`<tr>`标签，我必须创建`table`标签而不是`div`为此工作。此外，如果希望此代码与包含`stringEl`标签一起使用，`li`我必须创建`ol`或`ul`插入`div`标签。是否有任何通用的将字符串转换为 Dom 节点？
最好的问候，
约旦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:56:23.143

```
function domNode(nodeType, text) {
var node = document.createElement(nodetype);
node.appendChild(document.createTextNode(text));
return node;
}

domNode('p', 'Hello World!'); 
```

类似的东西可以让你选择一个标签。

编辑：事实上...

```
function domNode(nodeType, text) {
    var node = document.createElement(nodetype);
    if (text) node.appendChild(document.createTextNode(text));
    return node;
    }

var myList = domNode('ul').appendChild(domNode('li', 'This is a list item!')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:31:59.750

为此设计了一种 DOM Range 方法：[`createContextualFragment()`](https://developer.mozilla.org/en-US/docs/DOM/range.createContextualFragment). 它在[DOM Parsing and Serialization 规范](http://domparsing.spec.whatwg.org/#dom-range-createcontextualfragment)中指定，并在 Mozilla、WebKit 和 Opera 浏览器（但还没有 IE）中实现。

这是一个例子：http: [//jsfiddle.net/gbWCS/](http://jsfiddle.net/gbWCS/)

HTML：

```
<table id="table">
    <tr id="firstRow"><td>One</td><td>Two</td></tr>
</table> 
```

JavaScript：

```
var html = "<tr><td>Three</td><td>Four</td></tr>";
var table = document.getElementById("table");
var range = document.createRange();
range.selectNodeContents(table);
var frag = range.createContextualFragment(html);
table.appendChild(frag); 
```

# php - file_get_contents() 通过 httpd 中的代理

> ID：12975740
> 
> 赞同：3
> 
> 时间：2012-10-19T13:50:58.490
> 
> 标签：php, apache2, php-5.2

我尝试使用以下代码通过代理使用 file_get_contents() 获取页面的源

```
$aContext = array(
'http' => array(
    'proxy' => 'tcp://proxy.ssn.net:8080',
    'request_fulluri' => true,
),);
$cxContext = stream_context_create($aContext);
$homepage = file_get_contents('http://www.indiaglitz.com/channels/tamil/reviews.asp', False, $cxContext);
echo $homepage; 
```

这在我通过终端执行 php 文件时有效，但是当我使用 httpd（Apache 2）通过浏览器运行文件时我没有得到输出。

这适用于安装在 Ubuntu 中的 Apache2，但不适用于安装在 Fedora 17 中的 httpd。

哪里错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:36:06.133

最常见的原因是 SELinux 不允许 httpd 建立网络连接。

要解决它，您需要更改一个 SELinux 布尔值（它将在重新启动后自动保持）。您可能还想重新启动 httpd 以重置代理工作者，尽管这不是严格要求的。

# setsebool -P httpd_can_network_connect 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:42:49.597

所以我看到一台服务器可以在您的 ubuntu 上运行，但不能在 fedora 服务器上运行。fedora 服务器可能在其 php 设置中关闭了选项 Allow_url_fopen (file_get_contents 使用 fopen())。 [http://php.net/manual/en/filesystem.configuration.php](http://php.net/manual/en/filesystem.configuration.php)

但！不要更改该安全设置。如果你想下载一些东西，curl 可以很好地工作而不会打开安全漏洞。

# java - 在 xslt 的帮助下向 xml 添加信息

> ID：12975742
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:51:11.843
> 
> 标签：java, xslt, xpath

这是任务：

“该页面包含添加按钮以在下一页添加新实体，按下保存按钮后，您再次进行 XSLT 转换以获取带有新实体的 XML，保存并在实体的响应列表中生成。在添加实体期间调用JAVA 代码使用 xalan 扩展来验证字段。PS 你不能使用 jsp"

我不明白该怎么做。你能帮我理解这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:21:24.383

德米特里，我的朋友，我知道你懂俄语。试试这个链接 - [http://www.ibm.com/developerworks/ru/library/x-xjavaforum5/index.html](http://www.ibm.com/developerworks/ru/library/x-xjavaforum5/index.html)另外，您能否澄清一下，为什么必须使用 XSLT？

# android - 检查设备是否支持 Adob e Air

> ID：12975743
> 
> 赞同：3
> 
> 时间：2012-10-19T10:14:30.927
> 
> 标签：android, air

我正在使用 Adob​​e Air (Air 3.2 / Flash CS6) 构建一个付费的 Android 应用程序。在用户购买我的应用程序之前，如何确保用户的设备支持 Adob​​e Air？Google Play 商店是否会处理这个问题，或者是否有一种编程方式供我检查（使用 AndroidManifest 设置或其他方式）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:28:28.520

您可以将 Adob​​e AIR 与您的应用程序捆绑在一起。当您导出应用的 APK 时，您会看到此选项。这将确保您的应用程序已下载所需的所有内容。

但是，这将使您的应用程序变得巨大（比实际大小大 30mb 左右）

另一种选择是什么都不做，当用户下载并安装您的应用程序时，系统会提示他们安装 Adob​​e Air。

这也是您导出应用程序时的一个选项，因为您可以定义希望用户从哪里下载 Adob​​e Air。

能够选择从哪里下载它很重要的原因是，如果您通过 Amazon 销售您的应用程序，您将希望为用户提供 Amazon 上的 Adob​​e Air 的链接，Google Play 将在哪里不同的链接。

Flash builder 在这方面很有帮助，当您尝试签署您的应用程序时，它将为您提供所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:19:26.520

它实际上会在您从应用商店下载之前说明应用是否与您的设备不兼容。如果您想自己检查设备，请查看此处： http: [//www.adobe.com/products/air/tech-specs.html](http://www.adobe.com/products/air/tech-specs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T15:30:05.650

**澄清**：

Play 商店不根据 Adob​​e AIR 定义的规范检查兼容性，而是根据您在编译应用程序时在清单中定义的元数据（即`<supports-screen>`，`<uses-feature ...bluetooth>`等）。据传，您可以设置`<uses-sdk...>`标志和Play 商店将识别处理器要求。但是，我无法找到任何有关此的官方文档，仅此线程：

[Adobe AIR 应用程序限制设备可用性的正确 Android 清单设置是什么？](https://stackoverflow.com/questions/12580607/what-are-the-correct-android-manifest-settings-for-an-adobe-air-application-to-r)

如果有人能证实这一点，将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:26:00.070

如果您包含 Air，则应用程序大小会增加 7.5 Mb。兼容性通常由商店检查（Google Play 和 AppStore 做得对）。

# java - 在 RichFaces 4.x ExtendedDataTable 中将列宽设置为百分比

> ID：12975749
> 
> 赞同：2
> 
> 时间：2012-10-19T13:51:40.750
> 
> 标签：java, jsf-2, richfaces

我对 RichFaces 4 有疑问：我无法在 RichFaces 4 中给出列宽的百分比值，它被简单地忽略了。如果我将宽度设置为 em 或 px，它可以工作。

这是我尝试的丰富：列：

```
<rich:extendedDataTable ... >
  <rich:column width="20%" ...> <!-- width 20% is ignored -->
  </rich:column>
</<rich:extendedDataTable> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T12:29:22.220

尝试使用 style 属性和 Richface 标签，如 `<rich:column style="width:100%;"/>`. 这应该有效，否则使用**columnClass 或 styleClass**属性并在您的 css 部分中提供相同的样式信息。

如果没有任何效果，请尝试以像素为单位给出宽度大小。

# regex - 正则表达式：匹配一个单词和一个长度

> ID：12975750
> 
> 赞同：2
> 
> 时间：2012-10-19T13:51:46.950
> 
> 标签：regex

我需要帮助来做这个正则表达式。句子不能少于4个字母，并且不能匹配这些单词中的任何一个`(test1,test2 and test3)`

我知道如何分别做每一个，但不知道如何一起做。

第一个条件`^.{4,}$`

第二个条件`^((?!test1|test2|test3).)*$`

如何做到这一点： -

1.  “你好”会过去
2.  "hel" 会失败
3.  “test1”会失败，尽管它的长度超过 4 个字母
4.  "test2" 将失败，尽管它的长度超过 4 个字母
5.  "test3" 会失败，尽管它的长度超过 4 个字母

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T14:00:06.947

试试这个：

```
(?=^.{4,}$)(^((?!test1|test2|test3).)*$) 
```

或者：

```
(?=^.{4,}$)(^((?!test(1|2|3)).)*$) 
```

或者：

```
(?=^.{4,}$)(^((?!test[1-3]).)*$) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:58:28.090

使用以下内容：

```
/^(?!.*test[1-3]).{4,}$/ 
```

# c# - 内容导出为图像时不显示 RichTextBox

> ID：12975752
> 
> 赞同：1
> 
> 时间：2012-10-19T13:51:53.357
> 
> 标签：c#, .net, winforms

我有一个面板，其中内容被动态添加并导出为图像文件。我使用下面的代码将内容导出为图像。

```
 Bitmap tempBmp = new Bitmap(pnlCanvas.Width, pnlCanvas.Height);
 pnlCanvas.DrawToBitmap(tempBmp, new Rectangle(0, 0, pnlCanvas.Width, pnlCanvas.Height));
 tempBmp.Save(fileName); 
```

在特定情况下，我将 RichTextBox 控件添加到面板中。发现导出的时候看不到控件。

我不确定出了什么问题。请指导我应该做什么。

提前致谢，K

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:58:24.417

如前所述，[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx) DrawToBitmap 不适用于`RichTextBox`. *尝试使用GDI+*手动绘制内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:56:37.840

检查控件是否真的存在，它是被丢弃还是不可见。尝试向它添加一些值并检查它是否返回带有变量的值或给你错误（如果它消失了）。这是我的想法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:20:05.430

刚刚成功地完成了我正在寻找的东西。我正在回答我自己的问题，以便它可以帮助寻找相同问题的人。

捕获 ActiveX 控件并导出为图像的示例代码。

```
Rectangle ctrlRect = myControl.RectangleToScreen(myControl.ClientRectangle);
Bitmap myImage = new Bitmap(ctrlRect.Width,ctrlRect.Height,PixelFormat.Format32bppArgb);
Graphics myGraphics = Graphics.FromImage(myImage);
myGraphics.CopyFromScreen(ctrlRect.Location, Point.Empty, myControl.Size);
myImage.Save("sample.png"); 
```

# c++ - 执行 CL_COMMAND_NDRANGE_KERNEL 的未知错误 (-1000)

> ID：12975757
> 
> 赞同：2
> 
> 时间：2012-10-19T13:52:06.117
> 
> 标签：c++, opencl, nvidia

我正在使用 opencl 并且在尝试执行我的内核时抛出异常：

```
what(): clEnqueueNDRangeKernel 
 err(): -1000 
```

通知功能给出：

```
Unknown error executing CL_COMMAND_NDRANGE_KERNEL on GeForce GTX 560 (Device 0). 
```

几个月前我遇到了这个错误，并将它与解决方案一起发布在 NVidia 论坛中（搜索时找到它），但不幸的是，论坛现在被删除了，我忘记了解决方案。因此，如果您知道错误的来源（或者可以从 NVidia 论坛以某种方式获得），请在此处发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:12:42.613

终于想起了问题的根源：

失败的内核将`clEnqueueNDRangeKernel`缓冲区作为在 OpenCL 和 OpenGL 之间共享的参数。我只是忘记了`clEnqueueAcquireGLObjects`其中一些缓冲区。

有点令人失望的是，错误并没有更具体地说明问题（比如说：“访问未获取的 OpenGL 缓冲区！”）。

# jquery - jquery无限ajax滚动多次触发项目

> ID：12975758
> 
> 赞同：0
> 
> 时间：2012-10-19T13:52:08.210
> 
> 标签：jquery, ajax, infinite-scroll

我正在使用插件 jquery 无限 ajax 滚动（ias）作为移动商店的类别结果。

通过滚动或向下滑动，脚本会多次触发下一页的项目。

你可以在这里测试它：[Testpage](http://www.yakuza-outlet.de/hocker-sitzbaenke-fell-teak-holz-marmor-im-online-shop-wohnfreuden-kaufen/teakholz/)

如果您点击链接，请将您的窗口大小调整为 320px 的宽度，否则 css 将无法正常工作！

剧本：

```
$(document).ready(function() {
document.onscroll = function() {
    jQuery.ias({
        container : 'div.articlelist',
        item: '.row',
        pagination: '.pagination',
        next: '.pagination a:first',
        loader: '<img src="/layout/mobil/img/ajax-loader.gif"><br>Artikel werden geladen...',
        history: false,
        onLoadItems: function(items) {
        $(items, '.bubbles').find('span:eq(0)').css('margin-right','107px');
        $(items, '.bubbles').find('span:eq(1)').css('margin-right','51px');
        $(items, '.bubbles').find('span:eq(2)').css('margin-right','102px');
        }
    });
} 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:54:33.593

维护一个标志，告诉 ajax 操作是否正在运行，并且只有当这个标志为 false 时才获取你的项目。将是最快的解决方案。

```
$(document).ready(function() {
var ajaxRunning = false;

$("body").ajaxStart(function()
{
ajaxRunning = true;
}).ajaxStop(function()
{
ajaxRunning = false;
});

    document.onscroll = function() {
if(ajaxRunning)
{
return;
}

    jQuery.ias({
        container : 'div.articlelist',
        item: '.row',
        pagination: '.pagination',
        next: '.pagination a:first',
        loader: '<img src="/layout/mobil/img/ajax-loader.gif"><br>Artikel werden geladen...',
        history: false,
        onLoadItems: function(items) {
        $(items, '.bubbles').find('span:eq(0)').css('margin-right','107px');
        $(items, '.bubbles').find('span:eq(1)').css('margin-right','51px');
        $(items, '.bubbles').find('span:eq(2)').css('margin-right','102px');
        }
    });
}
}); 
```

# python - 在 Eclipse 和 PyDev 中调试 Blender Python？

> ID：12975769
> 
> 赞同：3
> 
> 时间：2012-10-19T13:52:57.387
> 
> 标签：python, eclipse, blender

您如何在 Eclipse 和 PyDev 中调试 Blender Python？

我尝试过的是：

[http://www.luxrender.net/wiki/LuxBlend25_Debugging_with_eclipse](http://www.luxrender.net/wiki/LuxBlend25_Debugging_with_eclipse)

[http://www.blender.org/forum/viewtopic.php?t=3914&sid=717a127d12596f89e4aea0c54938ef80](http://www.blender.org/forum/viewtopic.php?t=3914&sid=717a127d12596f89e4aea0c54938ef80)

但非接缝工作？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:17:59.720

Witold Jaworski 写了一本非常好的关于 Blender 附加编程的电子书。它包括分步说明如何使用 PyDev 设置 Eclipce 以调试 Blender 附加组件的章节。 [Blender 2.5 的编程插件](http://airplanes3d.net/pydev-000_e.xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:02:00.850

以下是我设置调试的方式，略有不同，但基于 lux-render 教程。

首先，创建一个 .py 文件，我们将其命名为 debug.py，其中将包含一个函数，我们稍后将调用该函数来设置调试。将此文件放在与`__init__.py`模块主文件相同的文件夹中。根据 lux-renderer 教程，添加以下代码，更新 PYDEV_SOURCE_DIR。

```
import sys

def startdebug():
    try:
        # set the PYDEV_SOURCE_DIR correctly before using the debugger
        PYDEV_SOURCE_DIR = 'C:\Program Files\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc'

        # test if PYDEV_SOURCE_DIR already in sys.path, otherwise append it
        if sys.path.count(PYDEV_SOURCE_DIR) < 1:
            sys.path.append(PYDEV_SOURCE_DIR)

        # import pydevd module
        import pydevd

        # set debugging enabled
        pydevd.settrace(None, True, True, 5678, False, False)
    except:
        pass 
```

设置 PYDEV_SOURCE_DIR 时，请确保将其指向 org.python.pydev.debug_xxxxx。还有另一个与此类似的文件夹。为确保您拥有正确的文件夹，它将包含一个 /pysrc 文件夹。

现在在您的 main`__init__.py`中，这必须在任何其他导入语句之前才能正常工作。直接在 bl_info 部分下添加以下内容，因为奇怪的是搅拌器会自行解析。

```
DEBUGGING = True
if(DEBUGGING):
    import debug
    debug.startdebug() 
```

将它放在这里可以避免像 lux-render 教程那样添加每个文件的跟踪。

1.  在附加组件文件夹中的版本中添加一些断点，
2.  切换到调试视角，
3.  启动 Eclipses 调试服务器，
4.  启动搅拌机
5.  运行脚本，它将到达断点。

我发现人们遇到的常见问题：

*   指向错误的pydev调试文件夹的路径，确保有一个/pysrc文件夹
*   当 Pydev 更新时，更新 PYDEV_SOURCE_DIR 因为 debug_xxxxx 将发生变化
*   没有运行 Eclipse 服务器，
*   在文件的本地副本而不是 blender 附加目录中的版本上设置断点
*   保存脚本并不意味着 Blender 会重新加载它、使用 imp、禁用/重新启用插件或重新启动 Blender。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:01:20.887

有相当全面的说明来设置搅拌机和 Eclipse 以进行调试。 [http://wiki.blender.org/index.php/User:Z0r/PyDevAndProfiling](http://wiki.blender.org/index.php/User:Z0r/PyDevAndProfiling)

虽然这适用于搅拌机游戏引擎，但其中大部分适用于普通搅拌机。

# php - 使用 PHP 和 ImageMagick 将 PDF 转换为 JPEG 时的低分辨率测试

> ID：12975771
> 
> 赞同：0
> 
> 时间：2012-10-19T13:53:07.193
> 
> 标签：php, pdf, imagemagick, jpeg

我已经使用此代码将 PDF 文件转换为 JPEG 图像

```
$im = new Imagick();
$im->setResolution(90,90);
$im->readImage($pdf_file);
$im->setImageFormat('jpeg');
$im->writeImages($save_to,false);
$im->clear(); 
$im->destroy(); 
```

它可以工作，但我有一个问题，当有一个白色背景的文本时，它不会很清楚，但是当我有色 BG 时我没有这个问题。

这张图片会让一切变得清晰 ![在此处输入图像描述](../Images/de5b9e6879893bf3a594d88fcf6f2b05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:56:31.523

JPEG 压缩会在颜色差异很大的边缘（例如黑色文本和白色背景之间）生成此类伪影。尝试[提高压缩质量](http://php.net/manual/en/imagick.setimagecompressionquality.php) 或对包含文本的图像使用其他图像格式（例如 png）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:02:13.140

添加此功能：

```
$im = new Imagick();
$im->setResolution(90,90);

if ($width < 300) $im->sharpenImage(4, 1);
$im->setCompression(Imagick::COMPRESSION_JPEG);
$im->setCompressionQuality(100); // or some alse 

$im->readImage($pdf_file);
$im->setImageFormat('jpeg');
$im->writeImages($save_to,false);
$im->clear(); 
$im->destroy(); 
```

# php - PHP函数：这是错误的形式还是正确完成？

> ID：12975772
> 
> 赞同：1
> 
> 时间：2012-10-19T13:53:08.530
> 
> 标签：php, function

我写了一个长脚本，它完全符合我的需要，但现在我发现了函数的用处，所以我可以在其他脚本中使用它们。

我的脚本完全按照我最初编写的方式运行，并且也与我实现我创建的函数的方式完美运行。

由于我是编写函数的新手，而且我从未见过有人按照我的方式实现，我不知道它是否是好的形式。

### 原始方式

```
foreach($get_prefixes as $prefix) {
    if($prefix['type'] == 'pre') {
        $sql  = "SHOW COLUMNS FROM `$prefix[table]` LIKE 'sku_%' ";
        $sku_cols = $objDb->query($sql);
        foreach($sku_cols as $col) {
            echo $col['Field'] . '<br>';
        }
    }
} 
```

然后是我使用创建函数的方式。它再次完美运行，但有没有“正确”的方法来做到这一点？

```
function getSku_($table) {
    global $objDb;
    $sql  = "SHOW COLUMNS FROM `$table` LIKE 'sku_%' ";
    $sku_cols = $objDb->query($sql);
    return $sku_cols;
}

foreach($get_prefixes as $prefix) {
    if($prefix['type'] == 'pre') {
        foreach(getSku_($prefix['table']) as $col) {
            echo $col['Field'] . '<br>';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:56:58.197

我看不出这个函数有什么问题，除了它的`naming`. 这并没有错，只是我理解它的约定是遵循命名为`abc_pqr`or `abcPqr`or `_abcPqr (for private functions)`。

**编辑：**在 foreach 中使用之前，我也没有`$get_prefixes`在任何地方看到定义。它来自哪里？

```
foreach($get_prefixes as $prefix) { //This line 
```

如果函数仅在查询中有所不同，`"sku"`那么`"sku "`您甚至不需要两个函数，只需`OR`在查询中使用（首选）或两个查询，如果您希望两个结果集是分开的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T13:57:41.920

欢迎来到开明的人群！您朝着正确方向迈出的第一步非常重要！

您的功能是正确的，并且按照应写的方式编写。

愿力量与您同在，朝着可重用、干净和模块化的编码迈进！（希望更多的人能够认识到这些事情的重要性。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T14:01:17.083

你的代码很好，除了一些命名奇怪，但你是新的，所以这是可以理解的。您可能还想看看像[array_walk](http://ca3.php.net/manual/en/function.array-walk.php)这样的东西，以减少您拥有的两个 foreach() 调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T14:02:23.900

它看起来不错，但作为一个需要考虑的问题，'$get__prefixes' 可以为 NULL 吗？如果是这样，请考虑在“foreach”之前使用“if()”检查该可能性，例如：

```
if ($get_prefixes != NULL) {
    foreach($get_prefixes as $prefix) { 
        ....
    }
} 
```

这可以防止潜在的错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-19T13:57:29.440

没有什么问题。您已经分离出从数据库中获取信息的功能，并通过函数在代码中使用它。对我来说似乎很好。通过这种方式，您可以从代码中的任何位置调用该函数，而不仅限于在循环中使用它。

编辑：我同意前面的回答，函数名中的下划线是不必要的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-19T14:06:36.380

**我会这样写：**

```
// Add code here...
function getSku($table) {
    global $objDb;
    $sql = "SHOW COLUMNS FROM {$table} LIKE 'sku_%';"; // Here be changes
    $sku_cols = $objDb->query($sql);  
    return $sku_cols;
} 
```

**为什么？**您的原始版本不适合这样的直接数据库访问： getSku("schema.table"); 所以我删除了你的 ` 包装器并附上了字符串。现在只需像这样喂包装器：

```
getSku('`table`'); // or
getSku('`schema`.`table`'); // or
getSku('table'); // or
getSku('schema.table'); 
```

它具有更普遍的用途，这就是功能的用途。

# jquery - 定位元素未正确放置 & z-index 不起作用

> ID：12975773
> 
> 赞同：2
> 
> 时间：2012-10-19T13:53:23.813
> 
> 标签：jquery, css, z-index, css-position

奇怪的一个：在我的网站上，该位置有效，但鼠标悬停和 z-indexes 无效。在小提琴上，鼠标悬停有效，但位置无效。

是否有一些我缺少的 CSS 设置导致 jQuery 无法选择？

我希望这只是糟糕的代码或我不知道的一些细微差别。

提前谢谢了！

**html**

```
<div style="text-align: center; position: relative">
    <span id="selectSupplierNameSpan" style="z-index:100">
        Vendor
    </span>
    <div id="selectSupplierNameContainer" style="position: absolute; opacity: 0; z-index:50">
        <input type="text" id="selectSupplierName" ></input>
    </div>
</div>​ 
```

**jQuery**

```
$("#selectSupplierNameContainer").position({
    my: "center",
    at: "center",
    of: $("#selectSupplierNameSpan"),
});

$("#selectSupplierNameSpan").mouseover(function() {
    var thisHeight = $("#selectSupplierNameContainer").height();
    $("#selectSupplierNameContainer").animate({
        opacity: 1,
        top: "+=" + thisHeight
    }, 500);
});​ 
```

[http://jsfiddle.net/7s4VN/10/](http://jsfiddle.net/7s4VN/10/)

**编辑**

转到jquery 1.7.2，并添加了ui 1.18，现在鼠标悬停不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:07:24.847

`z-index`只能应用于定位元素。添加`position:relative;`到您的样式中`<span>`，它工作正常。

[http://jsfiddle.net/mblase75/7s4VN/11/](http://jsfiddle.net/mblase75/7s4VN/11/)

# android - Android：TabHost - 将参数传递给片段

> ID：12975775
> 
> 赞同：10
> 
> 时间：2012-10-19T13:53:29.143
> 
> 标签：android, android-fragments, android-tabhost, actionbarsherlock

我正在开发一个 TabHost，每个 Fragment 内部都有一个 WebView。我要做的是：

```
for(int i = 0; i < numberOfTabs; i++){
        mTabManager.addTab(mTabHost.newTabSpec(tabNames[i]).setIndicator(tabNames[i]),
                Web.class, null);
 } 
```

如何将参数传递给每个片段。在这种情况下，我想将一个 URL 传递给 TabHost 中的每个片段。

提前谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T15:02:22.320

最后我得到了解决方案。您可以在“addTab”的最后一个参数中使用 Bundle 传递参数，其中您有“null”。

```
for(int i = 0; i < numberOfTabs; i++){
        Bundle b = new Bundle();
        b.put...
        mTabManager.addTab(mTabHost.newTabSpec(tabNames[i]).setIndicator(tabNames[i]),
                Web.class, b);
 } 
```

然后在 Fragment 中，您可以使用 getArguments() 获取 Bundle。

我希望它对将来的某人有用

# javascript - 带有 POST 方法的弹出窗口在测试 Azure 中调用，但在真正的 Azure 中失败

> ID：12975776
> 
> 赞同：0
> 
> 时间：2012-10-19T13:53:35.540
> 
> 标签：javascript, asp.net, silverlight, azure

我希望我的 Silverlight cloudapp 使用托管在名为 Reportviewer.aspx 的 WebForm 中的 SSRS Reportviewer 控件，当从我的 SL C# 类调用 javascript OpenReportviewer 函数时，这在测试 Azure“127.0.0.1”环境中运行良好：

```
<script type="text/javascript" src="Silverlight.js"></script>
<script type="text/javascript">
  function OpenReportViewer(ReportViewerURL, TabHeading, EstId, ShowExtraDetail, ReportTypeID, PreExpandSections) {
        var form = document.createElement('form');
        form.action = ReportViewerURL;   //'http://endorphin.cloudapp.net/Reporting/ReportViewer.aspx';
        form.method = "POST";
        form.target = '_blank'; // this is important to open a new window 

        var tabHeading = document.createElement('input');
        tabHeading.name = 'TabHeading';
        tabHeading.value = TabHeading;
        form.appendChild(tabHeading);

        var estID = document.createElement('input');
        estID.name = 'EstID';
        estID.value = EstId;
        form.appendChild(estID);

        var showExtraDetail = document.createElement('input');
        showExtraDetail.name = 'ShowExtraDetail';
        showExtraDetail.value = ShowExtraDetail;
        form.appendChild(showExtraDetail);

        var reportTypeID = document.createElement('input');
        reportTypeID.name = 'ReportTypeID';
        reportTypeID.value = ReportTypeID;
        form.appendChild(reportTypeID);

        var preExpandSections = document.createElement('input');
        preExpandSections.name = 'PreExpandSections';
        preExpandSections.value = PreExpandSections;
        form.appendChild(preExpandSections);

        document.body.appendChild(form);
        form.submit();
        document.body.removeChild(form);
      } 
    function onSilverlightError(sender, args) {... 
```

但是，我现在已经部署到真正的 Azure，它说：“调用失败：OpenReportviewer”

上面的函数现在完全粘贴了。

调用代码是：

```
//**********************************************************************************
public void Invoke3(string tabHeading, int estID, int reportTypeID, bool showExtraDetail, bool preExpandSections)
{
  if (true == HtmlPage.IsPopupWindowAllowed)
  {
    string strBaseWebAddress = App.Current.Host.Source.AbsoluteUri;
    int PositionOfClientBin =
        App.Current.Host.Source.AbsoluteUri.ToLower().IndexOf(@"/clientbin");
    strBaseWebAddress = Strings.Left(strBaseWebAddress, PositionOfClientBin);
    string ReportViewerURL = String.Format(@"{0}/Reporting/ReportViewer.aspx", strBaseWebAddress);

    try
    {
      HtmlPage.Window.Invoke("OpenReportViewer", ReportViewerURL, tabHeading, estID.ToString(),
                            showExtraDetail.ToString(), reportTypeID.ToString(), preExpandSections.ToString());
    }
    catch (Exception ex)
    {
      My.ShowError("Failed to invoke Webform for Report Viewer.", ex);
    }
  }
  else
  {
    MessageBox.Show("You must enable popups to view reports. Safari browser is not supported.",
        "Error", MessageBoxButton.OK);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:53:20.830

有2种可能：

1.  本地 Azure 和真正的 Azure 之间的区别可能是安全区域。
2.  可能存在一些指向本地 Azure 的硬编码链接。

# c++ - 将字符数组的内容复制到 Qt 中的 QString

> ID：12975777
> 
> 赞同：6
> 
> 时间：2012-10-19T13:53:38.817
> 
> 标签：c++, qt, qstring, character-arrays

我有一个字符指针，在任何运行中都可以有不同的长度。例如：

```
char*  myChar; 
```

在一次运行中，它的内容可以是*"Hi"*，而在另一次运行中，它可以是*"Bye"*。

我想将 的内容复制`myChar`到 QString，例如，如果我有：

```
QString myString; 
```

我想复制 to 的`myChar`内容`myString`；我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T13:57:48.287

使用`QString::fromLatin1(const char*)`,`QString::fromLocal8Bit(const char*)`或`QString::fromUtf8(const char*)`视情况而定。请注意，您不能只复制数据，因为 QStrings 包含 16 位 Unicode 字符。它总是需要对 8 位表示进行解码。

# google-drive-api - Drive API 中的错误：当 parentId 不是有效 Id 时，parents.delete 并不总是返回 http 404

> ID：12975785
> 
> 赞同：4
> 
> 时间：2012-10-19T13:54:25.523
> 
> 标签：google-drive-sdk, google-drive-api

我刚刚在驱动 API 中的 parents.delete 请求中发现了一个奇怪的错误。

我尝试使用以下参数删除给定文件的不存在的父引用：

```
fileId = validExistingFileId
parentId = nonExistingParentId 
```

通过不存在的父级，我的意思是在使用 File.get 请求它时产生 404 错误的 id

我有两个不同的结果：当 nonExistingParentId 甚至看起来不像一个 id 时，比如 642187，我得到了我想要的 404。但是当它“看起来像”一个有效的 id 时，我得到一个 204 响应，这将如果 parentId 确实引用了我的驱动器中的文件，则成为想要的响应。

我知道这不是很清楚，所以如果一个谷歌人想对这种行为采取行动，我很乐意给他我试过的具体 ID

**编辑**

也许我需要澄清一下。

我想知道如果 parentId 或 fileId 引用了 Google Drive 中不存在的资源，是否可以确保从 API 收到错误，而我当前的进程并非如此。

对于这里的反对者来说，我从未见过他们回答或评论[![](../Images/7bedef47938ecf699b522e18daf96740.png)google-drive-sdk](/questions/tagged/google-drive-sdk "显示标记为“google-drive-sdk”的问题")问题：SO 是他 Drive API 支持的唯一访问点，即使我仍然没有从谷歌那里得到关于我的大部分问题的答案。也许使用 SO 作为错误跟踪器并不是 Google 的最佳实践之一，但我该由谁来改变呢？因此，请在关闭/否决 Drive 相关问题之前三思而后行。

此致

# php - 使用 Smarty 进行 CodeIgniter 基准测试

> ID：12975786
> 
> 赞同：0
> 
> 时间：2012-10-19T13:54:30.313
> 
> 标签：php, codeigniter, frameworks, smarty

我已经将 Smarty 连接到 CodeIgniter，现在我当然不能使用 {memory_used} 和 {elapsed_time}，但我想知道我现在如何将此信息输出到我的网页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:59:26.057

[基准类](http://codeigniter.com/user_guide/libraries/benchmark.html)

```
$this->benchmark->elapsed_time()
$this->benchmark->memory_usage() 
```

它们确实返回了稍后由输出类解析的胡须值，所以如果你使用 Smarty，你基本上可以使用 CodeIgniter 自己使用的原始函数。

```
$memory = ( ! function_exists('memory_get_usage')) ? '0' : round(memory_get_usage()/1024/1024, 2).'MB';
global $BM; // needed only for elapsed_time
$elapsed_time = $BM->elapsed_time('total_execution_time_start', 'total_execution_time_end'); 
```

请注意，这确实是一种解决方法，应该有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:58:58.240

只需阅读文档。它就在那里。

`$this->benchmark->elapsed_time()`和`$this->benchmark->memory_usage()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T08:57:54.847

我不能在 smarty 模板中执行“global $BM”，所以在我的控制器构造函数中我做了：

```
global $BM;
$this->smarty->assign("BM", $BM); 
```

然后在我的模板中：

```
{$BM->elapsed_time()} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T00:56:43.937

```
{literal}{elapsed_time}{/literal} 
```

测试和工作。

# android - Android - MapView TranslationAnimation 导致渲染错误

> ID：12975791
> 
> 赞同：0
> 
> 时间：2012-10-19T13:54:38.707
> 
> 标签：android, android-mapview, translate-animation

我在 MapView 上有一个 EditText。现在当文本被编辑时，我希望地图视图越过 EditText 元素（通过 TranslateAnimation）。地图视图的转换工作，但似乎地图视图不是为翻译而设计的，因为在翻译后无法在没有呈现错误的情况下使用地图视图导航。

有同样问题的人知道解决方案或有解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T12:44:51.430

`MapView`尝试用视图包装所有内容，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.gms.maps.MapView
        android:id="@+id/sherlock_map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <View
        android:id="@+id/dumberView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/transparent" />

</RelativeLayout> 
```

让我知道这是否对您有帮助。希望能帮助到你 ：]

# r - 根据列表中的名称获取平均值的简单方法

> ID：12975794
> 
> 赞同：2
> 
> 时间：2012-10-19T13:54:47.927
> 
> 标签：r

是否有任何简单的方法可以根据名称获取列表中项目的平均值？示例数据集：

```
sampleList <- list("a.1"=c(1,2,3,4,5), "b.1"=c(3,4,1,4,5), "a.2"=c(5,7,2,8,9), "b.2"=c(6,8,9,0,6))
sampleList
$a.1
[1] 1 2 3 4 5

$b.1
[1] 3 4 1 4 5

$a.2
[1] 5 7 2 8 9

$b.2
[1] 6 8 9 0 6 
```

我正在尝试做的是在类似但不同名的行之间获取列平均值，输出一个列表，其中包含`a's`and的列平均值`b's`。目前我可以执行以下操作：

```
y <- names(sampleList)
y <- gsub("\\.1", "", y)
y <- gsub("\\.2", "", y)
y <- sort(unique(y))
sampleList <- t(as.matrix(as.data.frame(sampleList)))
t <- list()
for (i in 1:length(y)){
   temp <- sampleList[grep(y[i], rownames(sampleList)),]
   t[[i]] <- apply(temp, 2, mean)
}

t
[[1]]
[1] 3.0 4.5 2.5 6.0 7.0

[[2]]
[1] 4.5 6.0 5.0 2.0 5.5 
```

AI 有一个包含大量相似名称集的大型数据集，有没有更简单的方法来解决这个问题？

编辑：我已将名称问题分解为一个单独的问题。可以在[这里找到](https://stackoverflow.com/questions/12976569/variable-length-core-name-identification)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T14:10:20.573

嗯，这*更短*了。你没有确切地说你的实际数据有多大，所以我不会做出任何承诺，但是这个性能应该不会很糟糕：

```
dat <- do.call(rbind,sampleList)
grp <- substr(rownames(dat),1,1)

aggregate(dat,by = list(group = grp),FUN = mean) 
```

（编辑以删除不必要的数据框转换，这可能会导致显着的性能损失。）

如果您的数据非常*大*，甚至只是中等大，但组的数量相当大，因此每组中的向量数量很少，标准建议是在`data.table`您`rbind`将数据编入矩阵后进行调查.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T14:31:36.677

我可能会做这样的事情：

```
# A *named* vector of patterns you want to group by
patterns <- c(start.a="^a",start.b="^b",start.c="^c")
# Find the locations of those patterns in your list
inds <- lapply(patterns, grep, x=names(sampleList))
# Calculate the mean of each list element that matches the pattern
out <- lapply(inds, function(i) 
  if(l <- length(i)) Reduce("+",sampleList[i])/l else NULL)
# Set the names of the output
names(out) <- names(patterns) 
```

# php - 带有外键表的 PHP 嵌套循环

> ID：12975800
> 
> 赞同：1
> 
> 时间：2012-10-19T13:55:00.593
> 
> 标签：php, database-design, foreign-keys, nested-loops

这是一个多部分的问题。我的数据库如下所示：

```
USERS
-id
-fname
-lname

COMPANIES
-id
-name
-type

PRODUCTS
-id
-product
-restaurant (foreign key to companies id)
-vendor (foreign key to companies id)
-user (foreign key to users id)
-transaction_date 
```

1.  这是设置数据库的好方法吗？我正在考虑为餐馆和供应商设置单独的表，但希望它们使用相同的登录页面，而不必担心 UNION 查询，我只需按类型选择它们。他们在登录时会看到不同的信息，所以我有一个 if 语句说 if type = r, show this else show that。最好的办法？

当我想在登录时显示信息时，会出现第二个问题。假设供应商登录，他们将看到与其供应商 ID 匹配的所有记录的列表。但是，由于我的嵌套循环，我看到了太多记录。例如，该表如下所示：

```
Date--Product--Restaurant--User 
```

我正在使用这个查询：

```
$sql = mysql_query("SELECT products.*, companies.name, CONCAT_WS(' ', users.fname, users.lname) AS fullname FROM products INNER JOIN companies ON products.vendor = companies.id INNER JOIN users ON products.user = users.id WHERE company='$id' AND companies.type='$type'") or die(mysql_error());

$num=mysql_num_rows($sql);

$sql1 = mysql_query("SELECT products.restaurant, companies.name AS cname FROM products INNER JOIN companies ON products.restaurant = companies.id") or die(mysql_error());

$num1=mysql_num_rows($sql1);

$i = 0;
while ($i < $num) {
  $j = 0;
  while ($j < $num) {
$d = mysql_result($sql,$i,"transaction_date");
$p = mysql_result($sql,$i,"product");
$r = mysql_result($sql1,$j,"cname");
$u = mysql_result($sql,$i,"fullname");

<td><?php echo $d; ?></td>
<td><?php echo $p; ?></td>
<td><?php echo $r; ?></td>
<td><?php echo $u; ?></td>

$j++; }
$i++; } 
```

`$id`并且`$type`是登录时会话创建的值。表中当前有 4 条示例记录。它不是只显示 4，而是显示 16，因为 和 的值`$num`都是`$num1`4 并且`$num`循环`$num1`了四次。

1.  如何解决此问题并仅显示 4 条记录？

谢谢您的帮助。如果您需要对任何部分进行任何澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:42:54.117

您的数据库设置可能需要重新考虑。

我认为这是因为您需要知道每个用户所在的公司，并且您不能在产品表中拥有它。

我会考虑像这样将外键添加到**用户**表中（假设一个用户有一个公司，一个公司有很多用户）。我还提出了一些其他建议，如下所示：

**用户** - id - company_id - first_name - last_name

**公司** - id - 名称 - company_type_id

**company_types** - id - 类型

**产品** - id - product_name - company_id

**交易** - id - user_id - product_id - transaction_date

`they will see a list of all the records that match their vendor`

现在您会注意到我从上表中删除了供应商 ID - 这是因为供应商 ID 与公司 ID 相同。对同一件事有两个单独的关系 ID 是没有意义的（如果我弄错了，请纠正我）

因此，通过上述更改，我们可以轻松列出这些记录，如下所示：

```
<?php

  $db   = new PDO(/**Connection info here**/);
  $stmt = $db->prepare("
    SELECT
      a.id AS product_id,
      a.product_name
    FROM 
      products AS a
    INNER JOIN
      companies AS b ON b.id = a.company_id
    INNER JOIN
      company_types AS c ON c.id = b.type_id
    WHERE
      b.id = :company AND c.id = :companyType
  ");
  $stmt->bindParam(":company", $usersCompanyIdHere, PDO::PARAM_INT);
  $stmt->bindParam(":companyType", $usersCompanyTypeHere, PDO::PARAM_INT);

  $data = $stmt->execute();

  while ($row = $data->fetch()) {
    /** List of all the products for given company id**/
  }

?> 
```

我已将您的代码更改为使用 PDO，我不想在这里给您过多的信息，但我**不能过分强调使用****PDO**相对于本机函数的好处`mysql_*`- 进行 Google 搜索，我可以看到很多有用且相关的信息前 10 名的结果。

# php - 为什么我在没有应用请求的情况下获得 FB ID？

> ID：12975802
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:55:06.180
> 
> 标签：php, facebook

我使用以下代码段调试 AppId：

```
$this->facebook->getUser() 
```

怎么了：

*   用户首先来到我的应用程序，它输出：“0”
*   用户确认了它输出的应用请求：“0000123456789”
*   用户在他的设置中删除 Apprequest 它仍然输出：“0000123456789”

有人知道 Facebook 可能仍在向我发送他/她的 App ID...

通常它没问题，但对于我作为开发人员来说，调试或测试我的应用程序就像地狱一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:59:47.350

这些似乎是使用的变量的默认值。确保您的服务器地址在 facebook 应用程序页面上（由您）列入白名单，并确保您使用的配置正确。

# opencv - 连续处理前一帧和当前帧

> ID：12975803
> 
> 赞同：0
> 
> 时间：2012-10-19T13:55:06.880
> 
> 标签：opencv

基本上，

1.  我在图像的特定位置设置了一条参考线，例如高度/2
2.  我计算那条线上的总白色像素

框架继续前进。那么，如何从前一帧和当前帧连续读取/取回总白色像素的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:20:14.717

您需要持有具有 prev 值的成员。
假设`readPixel()`函数读取总的白色值，`curr`是当前值，`prev`是前一个值。这是示例伪代码：

```
prev = curr = readPixel; //avoid division by zero
for(;;)
{
    curr = readPixel();
    value = curr / prev;
    prev = curr;
} 
```

# javascript - 检查a href 指向的网页是否包含某些文本

> ID：12975808
> 
> 赞同：0
> 
> 时间：2012-10-19T13:55:24.757
> 
> 标签：javascript, html, href

我想知道一种方法来检查a href 指向的网页是否包含使用javascript 的某些文本。

```
<a href="/path/to/document.html" onclick="check_page()">click</a>

<script type="text/javascript">
    function check_page()
    {
        //check for text in /path/to/document.html        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:11:59.877

尝试这个：

```
<script>

function check_page(url){

if (url.href.indexOf("/path/to/document.html")>-1){ 
alert('error');
}
}
</script> 
<a href="/path/to/document.html" onclick="javascript: return check_page(this)">test</a> 
```

# wordpress - 为什么 Wordpress 会阻止访问一台服务器上的 wp-content 文件，而不是使用相同的 htaccess 代码访问另一台服务器上的 wp-content 文件

> ID：12975816
> 
> 赞同：0
> 
> 时间：2012-10-19T13:55:39.773
> 
> 标签：wordpress, apache, .htaccess

我的服务器或登台服务器上有一个奇怪的行为，我们需要看看实际问题出在哪里。以下是流行的 Wordpress CMS 中的一些众所周知的代码：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

AddHandler application/x-httpd-php53 .php 
```

与原始代码的唯一区别是在文件末尾添加了“AddHandler”，这是我们的暂存托管服务提供商所必需的。

真正的问题是我可以在我的开发服务器（基于内部 Ubuntu 的 12.04 标准服务器）上的以下虚拟 url 访问文件，而不是在生产或暂存（它们都是同一台服务器）中访问文件。

1.  /wp-content/test.php
2.  /wp-content/themes/test.php
3.  /wp-content/themes/wpactivis/test.php
4.  /wp-content/themes/wpactivis/_/test.php
5.  /wp-content/themes/wpactivis/_/ajax/test.php

现在在一组服务器上，这些 url 返回 404，Wordpress 似乎在我们的开发服务器上自动启动，200 OK 并且文件内容返回，这是经典的“Hello world”测试......

任何 htaccess 大师都可以告诉我粘贴的代码的真实行为应该是什么，它应该像登台服务器还是开发服务器。

我倾向于认为它应该像开发服务器一样，应该授予任何文件访问或目录访问权限，并且不返回 404，因为：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

条件！

谢谢

*注意：不要告诉我这是编写 wordpress 或类似我不想听到的东西的坏方法。我们有一个完全安全的设置，文件可以直接访问我的插件或主题目录这一事实是无关紧要的。网络上发布了大量类似的问题，但没有答案，只有人们说你应该这样做。**我在这里尝试的是回答为什么它在一台服务器上而不是另一台服务器上这样做。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:12:46.427

没关系，主持人发现了问题，但我会回答它，以便其他人可以真正依赖它。

我们的主机使用基于 CPanel 的安装和一个模块，该模块阻止提供可组写的文件。

为了将站点从开发迁移到登台，我们选择了“BackupBuddy”解决方案，这是一个非常好的小型 wordpress 站点部署解决方案......有问题吗？它提取 775 下的文件。这导致我们在处理 Wordpress 安装的 ajax 文件时遇到问题。

要解决此问题，如果您对服务器具有 SSH 访问权限，只需递归地将目录的权限更改为 755，将文件的权限更改为 644，使用：

```
find . -type f -print -exec chmod 644 {} \;
find . -type d -print -exec chmod 755 {} \; 
```

祝你好运，我希望这对其他人有所帮助。

# java - 在 Apache Httpclient 请求中禁用或延迟超时

> ID：12975817
> 
> 赞同：1
> 
> 时间：2012-10-19T13:55:41.623
> 
> 标签：java, rest, httpclient

我有一个带有一些方法的 REST 网络服务。

我正在使用 Apache HttpClient 4 向其他人发送请求。

当我与这个休息建立联系时，以一种更大更慢的方法，它会抛出一个`NoHttpResponseException`.

谷歌搜索后，我发现服务器正在切断与我的客户端应用程序的连接。

因此，我尝试以这种方式禁用超时：

```
DefaultHttpClient httpclient = null;
HttpParams params = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(params, 0);
HttpConnectionParams.setSoTimeout(params, 0);
HttpConnectionParams.setStaleCheckingEnabled(params, true);

httpclient = new DefaultHttpClient(params);
httpclient.execute(httpRequest, httpContext); 
```

但它失败了。请求在 15 秒内终止（可能是默认超时？）有谁知道最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:40:00.793

我建议您在超时发生之前将数据返回给客户端。这可能只是一些对客户端说“工作”的字节。通过将数据涓涓细流，您应该能够使客户端保持活动状态。

# c# - 将内容添加到 getasync

> ID：12975823
> 
> 赞同：2
> 
> 时间：2012-10-19T13:56:10.750
> 
> 标签：c#

使用 HttpClient 并执行 PostAsync 时，我可以添加与 HttpContent 的合同。例如

```
HttpContent content = new ObjectContent<myContractType>(MyContract, xmlFormatter);
var resp myClient.PostAsync(myUri,content).Result 
```

执行 GetAsync 时，我无法传递 HttpContract 对象。那就是说我需要在查询字符串中添加合同成员还是有更好的方法来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T19:07:52.480

GET 请求的[本质](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)并没有像 POST 请求那样提供向服务器发送大量数据的方法。在实践中，可以以标头的形式或作为查询字符串的一部分发送[有限数量的数据。](https://www.rfc-editor.org/rfc/rfc7230#section-3.1.1)

没有办法将 XML 数据直接转换为查询字符串，但这是一个带有查询字符串的请求示例：

```
var client = new HttpClient()
client.GetAsync(String.Format("http://service.example.com/api/{0}?foo=bar", id)) 
```

# javascript - 简单模态对话框

> ID：12975827
> 
> 赞同：1
> 
> 时间：2012-10-19T13:56:18.177
> 
> 标签：javascript, jquery, simplemodal

我现在正在使用 Eric Martin 的 SimpleModal 对话框。我发现它很简单，很容易使用并且适合今天的大部分布局。

我唯一关心的是，我将如何设置从右侧开始的定位属性。IE：`right: 0;`

默认值为：

```
position: ["10%","70%"] ( which is Top, Left ) 
```

我实际上将它用于按钮，我最终需要使用正确的定位。

我该怎么做才能选择正确设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:01:33.963

使用 CSS 顶部、左侧或右侧。这是简单的方法

# php - 用异常条件重写一些查询字符串

> ID：12975833
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:56:23.200
> 
> 标签：php, .htaccess

我是 htaccess 用法的新手...

需要以下帮助

```
Form http://mysite.com/index.php?page=login to http://mysite.com/login 
```

我在 htaccess 中使用了以下规则

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?page=$1 
```

同样，我必须限制对`mysite.com/admin`文件夹的访问

同时，如果我进入

```
 `http://mysite.com/admin` then it goes to `http://mysite.com/admin?page=admin` 
```

我认为这是上述规则的 bcoz。

我需要的是，如果我输入`mysite.com/admin`应该去`mysite.com/admin/index.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:06:17.427

为重写规则添加条件：

```
RewriteEngine on
RewriteCond $1 !^admin
RewriteRule ^(.*)$ index.php?page=$1 [L,NC] 
```

# bash - 修剪关键字之外的路径名（awk、sed、？）

> ID：12975834
> 
> 赞同：1
> 
> 时间：2012-10-19T13:56:27.673
> 
> 标签：bash, shell, sed, awk, sh

找到关键字后，我想将路径名修剪到某个点之外。今天早上我在画一个空白。

```
/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java 
```

我想找到关键字Java，保存路径名（tsupdater），然后在该`Java`部分之后切断所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:17:04.613

我不知道这是否是你想要的，但你可以将路径名分成两个：

```
echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java" | sed 'h;s/.*Java//p;g;s/Java.*/Java/' 
```

哪个输出：

```
/tsupdater/src/tsupdater.java
/home/quikq/1.0/dev/Java 
```

如果您想将第二部分保存到文件中`part2.txt`并打印第一部分，您可以执行以下操作：

```
echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java" | sed 'h;s/.*Java//;wpart2.txt;g;s/Java.*/Java/' 
```

如果你正在编写一个 shell 脚本：

```
myvar="/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java"
part1="${myvar%Java*}Java"
part2="${myvar#*Java/}" 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:22:06.123

拿一个你需要的：

```
kent$  echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java"|sed -r 's#(.*Java/[^/]*).*#\1#g'
/home/quikq/1.0/dev/Java/tsupdater

kent$  echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java"|sed -r 's#(.*Java).*#\1#g' 
/home/quikq/1.0/dev/Java

kent$  echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java"|sed -r 's#.*Java/([^/]*).*#\1#g' 
tsupdater 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:07:38.843

我不完全确定你想要什么作为输出（请更清楚地指定），但是这个命令：

```
echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java" | sed 's/.*Java//' 
```

结果是：

```
/tsupdater/src/tsupdater.java 
```

如果你想要前面的部分，那么这个命令：

```
echo "/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java" | sed 's/Java.*//' 
```

结果是：

```
/home/quikq/1.0/dev/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:08:05.827

就像我说的，我度过了一个奇怪的早晨，但我突然明白了。

回声/home/quikq/1.0/dev/Java/TSUpdater/src/TSUpdater.java | sed s/Java.*//g

产量

/home/quikq/1.0/dev

这里有很多很棒的技巧，可以用不同的方式把它切碎。非常感谢！

# html - dom 元素 ID 和 CLASSes

> ID：12975840
> 
> 赞同：1
> 
> 时间：2012-10-19T13:56:40.897
> 
> 标签：html, css, dom

如果我有一个像这样的元素，例如：

```
<input type="text" class="someTextBox" id="someTextBoxID" /> 
```

...是否将课程放在id之前有关系吗？如果我不得不猜测我会说不，但我又想知道是否有任何规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:57:57.327

HTML 中的属性排序没有规则。

你可以把它们按你喜欢的任何顺序排列。

# c++ - 如何在 Eclipse 中有一个带有大写文件路径的 ${include_guard_symbol}？

> ID：12975841
> 
> 赞同：9
> 
> 时间：2012-10-19T13:56:42.700
> 
> 标签：c++, eclipse, eclipse-cdt

在[Eclipse CDT](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中定义代码模板时，我们可以使用一个名为的变量`${include_guard_symbol}`来转换为`MYFILE_H`.

我想要更明确的东西：`SRC_MYFOLDER_MYFILE_H`.

我按照Stack Overflow 问题[*Customizing include-guard for Eclipse CDT*](https://stackoverflow.com/a/9545933/1225541)[的回答中](https://stackoverflow.com/a/9545933/1225541)*给出的步骤操作，但我得到的只是`${include_guard_symbol}`返回一个空字符串！我还在 Stack Overflow 上看到了有关[将命名空间添加到 include guard 的](https://stackoverflow.com/q/3520943/1225541)其他相关问题，但这不是我想要的。*

 *我正在使用带有 CDT 版本 6.0.2 的 Eclipse 版本 3.5.2。

有没有其他方法可以达到预期的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T00:21:15.210

我安装的最旧版本是 3.7，我在那里和 4.2 上进行了测试，并且[引用的链接](https://stackoverflow.com/a/9545933/1225541)完全符合 OP 的要求。（OP 使用的是 3.5.2）。对于将来来这里的任何人，这里是步骤

1.  退出 Eclipse
2.  导航到您的工作区文件夹，然后继续导航到`\.metadata\.plugins\org.eclipse.core.runtime\settings`
3.  我总是喜欢在制作模组之前备份设置文件夹
4.  将命名的文件加载`org.eclipse.cdt.ui.prefs`到文本编辑器中
5.  添加这一行（我把我的放在第 3 行）
    `codetemplates.includeGuardGenerationScheme=2`
6.  保存文件。
7.  重启日食

我在我的 src 文件夹下创建了一个名为 MyFolder 的文件夹。然后我右键单击并添加了一个新的头文件，结果是：

```
#ifndef SRC_MYFOLDER_TEST_H_
#define SRC_MYFOLDER_TEST_H_

#endif /* SRC_MYFOLDER_TEST_H_ */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:16:18.743

要点由此而来：[如何自定义eclipse CDT代码模板](https://stackoverflow.com/questions/5402665/how-to-customize-eclipse-cdt-code-templates)

`${include_guard_symbol}`一种解决方案是将模板全部扔掉，然后**自己定义它**，可能使用其他一些预定义的变量。像这样的东西：

```
${filecomment}

#ifndef MyProject_${file_base}_h
#define MyProject_${file_base}_h

${typecomment}
${declarations}

#endif /* MyProject_${file_base}_h */ 
```

因此，对于名为 inc/Foo.h 的头文件，包含保护将像这样插入：

```
#ifndef MyProject_Foo_h
#define MyProject_Foo_h 
```

不幸的是，似乎没有一种方法可以自定义超出此范围。例如，如果我定义了一个嵌套在命名空间中的类，我可能希望将命名空间作为包含保护的一部分。目前，我找不到在 Eclipse 中执行此操作的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:28:45.477

不是你的问题的真正答案，但我想提出一个替代方案。包含守卫提供了一种可行的，尽管是粗略的方式来禁止头文件中的代码在每个编译单元中包含多次。作为替代方案，您可以使用

```
#pragma once 
```

编译器指令。我意识到它没有在标准中定义，但许多编译器都支持它，包括 GNU、Clang、MSVC 和 Intel。如果你使用`#pragma once`，你会失去很少的可移植性，并且可以避免名称冲突，我认为这是你首先要更改的原因`${include_guard_symbol}`。

您还可以查看[http://en.wikipedia.org/wiki/Pragma_once](http://en.wikipedia.org/wiki/Pragma_once)进行更深入的讨论。*

# ios - 如何从 NSObject 类显示 UIViewController？

> ID：12975842
> 
> 赞同：9
> 
> 时间：2012-10-19T13:56:42.873
> 
> 标签：ios, xcode4, uiviewcontroller, storyboard, nsobject

有一个当前视图`UIViewController`调用“LoginView”，但我不在，我在一个`NSObject`班级，我想打电话，显示另一个`UIViewController`名为“MapView”的视图。我怎样才能做到这一点？![在此处输入图像描述](../Images/ed64407a1db3f0418436d8e676871dcc.png)

问题就像上面的截图。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-21T13:20:32.713

在您`IBAction`或特定方法中写下：

```
UIWindow *window=[UIApplication sharedApplication].keyWindow;
UIViewController *root = [window rootViewController];

UIStoryboard *storyboard = root.storyboard;
CustomViewController *vcc =(CustomViewController *) [storyboard instantiateViewControllerWithIdentifier:@"storyBoardID"];

[root presentModalViewController:vcc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-11T14:08:31.783

我假设您正在尝试从 NSObject 类的 UIViewController 类访问您的 UIViewController 成员。只需将 UIViewController 成员传递给 NSObject 类即可。在这种情况下是一个自我。让你做的是你可以从另一个类中更改、编辑、删除任何你想在你的 UIView 中做的事情。下面是一个例子。

从 UIViewController 类调用 NSObject 类

```
@implementation myViewControllerClass

- (void) viewDidLoad {
    //Pass in the UIViewController object, in this case  itself. 
    [[myNSOBjectClass alloc] startViewController:self]; 
    ....
} 
```

然后从你的 NSObject

```
@interface myNSOBjectClass{
    //Global access to the view controller. 
    UIViewController *viewController; 
}
...

@implementation myNSOBjectClass
...

//function that the caller calls to pass their UIViewController object 
- (void)startViewController:(UIViewController *)callerViewController{
    viewController = [[UIViewController alloc]init];
    //puts the caller's view controller to the global member.
    viewController = callerViewController;  
    ...
} 
```

现在您的视图控制器触手可及！

干杯:)！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-08T10:56:05.870

我在我的 NSObject 类中这样使用：

```
[[[UIApplication sharedApplication] delegate].window.rootViewController presentViewController:yourMapViewContorller animated:YES completion:nil]; 
```

我希望它有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T16:32:50.703

您不应该在模型中实例化和显示视图控制器。视图应该由模型**驱动。**

在这种情况下，您提到`LoginView`作为您的起点。当满足某些条件时（可能是成功登录？），您应该相应地更新底层模型，然后显示`MapView`.

从内部`LoginView`：

```
MapView *mapView = [[MapView alloc] init]; 
```

如果您的应用使用导航控制器：

```
[self.navigationController pushViewController:mapView animated:YES]; 
```

否则：

```
[self presentViewController:mapView animated:YES completion:<nil or block>]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-19T09:03:32.623

试试这个代码。它会帮助你......

在您的按钮单击操作中，您必须发送您的 UINavigationController 和当前 ViewController。因为 NSObject 类没有找到那个控制器。

在您的按钮操作中放置以下代码：

```
[demo login_method_called:self.navigationController withCurrentViewController:self]; 
```

在您的 NSObject .h 类中放置以下代码：

```
#import <Foundation/Foundation.h>
#import "Home_ViewController.h"

@interface Method_Action_class : NSObject

- (void)login_method_called:(UINavigationController*)navigation  withCurrentViewController:(UIViewController*) controller;
@end 
```

在您的 NSObject .m 类中放置以下代码：

```
#import "Method_Action_class.h"

@implementation Method_Action_class

-(void)login_method_called:(UINavigationController*)navigation  withCurrentViewController:(UIViewController*) controller
{
    Home_ViewController *home = [[Home_ViewController alloc] initWithNibName:@"Home_ViewController" bundle:nil];
    [navigation pushViewController:home animated:YES];
}
@end 
```

并构建您的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-26T09:32:23.823

我在视图控制器类中创建了一个 obersver，并使用 NSObject 子类的 NSNotification 中心声明了一个推送视图控制器和发布通知的方法，它运行良好。

在视图控制器中：[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissPickerView) name:kNotificationDismissPicker object:nil];

在 NSOject 的子类中：[[NSNotificationCenter defaultCenter] postNotificationName:kMoveToAchievementView object:nil];

# c# - 在父子用户控件之间传递数据

> ID：12975843
> 
> 赞同：0
> 
> 时间：2012-10-19T13:56:46.180
> 
> 标签：c#, silverlight-4.0, user-controls

假设我有一个*Book 应用程序*，其安排如下：有几种页面类型

*   常规的

*   有图片

*   只有图片

*   ETC...

每个页面都可以有许多书签。为了正确显示所有内容，我创建了一个像这样的数据模板选择器

**页面.xaml**

```
 <Pages:PageTypeSelector Content="{Binding}">
    <Pages:PageTypeSelector.Regular>
       <DataTemplate>
           <Grid HorizontalAlignment="Stretch">  
                <!-- Show regular content here-->
                <Bookmark:BookmarkView />
           </Grid>
        </DataTemplate>
    </Pages:PageTypeSelector.Regular>

    <Pages:PageTypeSelector.WithPicture>
       <DataTemplate>
           <Grid HorizontalAlignment="Stretch">  
                <!-- Show mixed content here-->
                <Bookmark:BookmarkView />
           </Grid>
        </DataTemplate>
    </Pages:PageTypeSelector.WithPicture>

   <Pages:PageTypeSelector.OnlyPicture>
       <DataTemplate>
           <Grid HorizontalAlignment="Stretch">  
                <!-- Show picture content here-->
                <Bookmark:BookmarkView />
           </Grid>
        </DataTemplate>
    </Pages:PageTypeSelector.WithPicture>
 </Pages:PageTypeSelector> 
```

书签视图的外观现在并不重要（它只显示每个页面的书签）

问题是我需要以某种方式设置它的`PageId`属性，以便书签控件可以从服务中获取书签。

我已将属性添加到`BookmarkView.xmal.cs`

```
public Guid PageId
{
    get { return _pageId; }
    set
    {
        _pageId= value;
        _viewModel.PageId= value; // Here I wanted to pass the same value to the 
                                  // viewModel which would doo the job then
    }
} 
```

然后我尝试做这样的事情

```
<Bookmark:BookmarkView PageId={Binding PageId, Mode=TwoWay}/> 
```

Intellisense 在我打字时建议 PageId 但什么也没发生。

如何将 PageId 传递给视图？

编辑：更改为

```
public object PageId
{
    get { return _pageId; }
    set
    {
        _pageId= value;
    }
} 
```

向我展示了`value`is 类型`System.Windows.Data.Binding`。我现在如何获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:14:58.613

为 PageID 创建一个依赖属性。

# php - 如何快速获取已贡献曲目的群组列表？

> ID：12975846
> 
> 赞同：1
> 
> 时间：2012-10-19T13:56:59.237
> 
> 标签：php, soundcloud

使用 soundcloud api / php sdk，我目前被迫轮询某个用户所属的所有组，并检查该组中当前是否存在某个轨道 ID，以验证该轨道是否被贡献给该组。

向 /track 添加一个可以列出某个轨道所属的所有组 ID 的子资源会不会太难？

是否有任何其他方法可以加快此过程并减轻使用此方法所需的请求数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:07:56.653

目前没有，这是 API 中的一个缺口。您会很高兴听到我们正在为[The Next SoundCloud](http://next.soundcloud.com)开发一些基本的 Groups 功能，因为它也只是一个 API 客户端，这意味着我们将很快找到并修补这些漏洞。

# asp.net - 如何从其 ID 中检索 ViewState 中的 TextBox 值

> ID：12975848
> 
> 赞同：1
> 
> 时间：2012-10-19T13:57:01.000
> 
> 标签：asp.net

我在我的 ASP.NET 页面中以编程方式构建许多文本框，单击按钮后，我想处理这些值，是否有可能从 ViewState 中的 ID 中检索它们？

这是我的代码：

aspx 中表格的参考：

```
<asp:Table ID="Distances" runat="server" ViewStateMode="Inherit"></asp:Table> 
```

然后在创建所有行和单元格后的代码中，我在其中一些中添加了一个文本框：

```
Distances.Rows[j].Cells[i].Controls.Add(CreateTB(distance.ToString(), (i + j * rows).ToString(), false));

    protected TextBox CreateTB(string text, string id, bool ebanled = true)
    {
        TextBox tb = new TextBox() { Text = text, ID = id, Enabled = ebanled};
        tb.TextChanged += new EventHandler(OnTBChanged);
        return tb;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:59:29.753

`ViewState`默认情况下启用，因此该`Text`属性应该已经在回发中保持不变。

因此，您可以例如使用`FindControl("TextBoxID")`或枚举它们以获取对的引用`TextBox`（假设它们被添加到容器控件中`Panel`）：

```
foreach(TextBox txt in MyPanel.Controls.OfType<TextBox>())
{
    String text = txt.Text;
} 
```

或者

```
TextBox txt = (TextBox)MyPanel.FindControl("TextBox1")
String text = txt.Text; 
```

我假设您没有`TextBoxes`在回发中重新创建那些。因此，您需要使用与以前相同的 ID，并`Page_Load`在页面生命周期的最后阶段重新创建它们。因此，您可以在事件中创建它们，但不能在那里重新创建它们。

您应该在动态创建它们的位置显示您的代码，然后我可以更具体。

[真正了解动态控制](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)

# java - 提取通用 Java 包

> ID：12975850
> 
> 赞同：3
> 
> 时间：2012-10-19T13:57:08.503
> 
> 标签：java, eclipse, shared-libraries

我有一个项目，其中包含一堆我最近了解的 java 包，这些包在我要开发的新项目中是必需的。我希望这两个项目具有相同的代码库，因此我不必更新两者中的公共库。如何在 Exlipse 中实现这一点？

我目前的设置是这样的

```
Project1
  CommonPackage
  SpecifictProjectCode1

Project2
  SpecifictProjectCode2 
```

我想要以下内容，我认为：

```
Project1
  CommonPackage
  SpecifictProjectCode1

Project2
  CommonPackage
  SpecifictProjectCode2

CommonCodeProject 
```

实现这一目标的最佳方法是什么我知道我可以提取一个 jar 文件或将其包含在两个项目中，但我希望能够调试代码并且我还希望保持代码可编辑。将代码提取到单独的项目中是否更好，我该如何去做？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:00:22.470

您可以在 Eclipse 中拥有三个不同的项目`CommonCodeProject`：`Project1`和`Project2`. 然后，Project1 和 Project2 将依赖于`CommonCodeProject`.

要在 Eclipse 中添加对项目的依赖项，请转到Projects 选项卡`Java Build Path`并添加`CommonCodeProject`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:02:45.697

创建 3 个不同的项目：

*   项目1
*   项目2
*   通用代码项目

进入`Project1`> java build path >的 eclipse 属性

选择`projects`选项卡并将`CommonCodeProject`项目添加到依赖项

做同样的事情`Project2`

这两个项目现在都应该依赖于你的`CommonCodeProject`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:00:06.850

**是**的。创建第三个项目（CommonCodeProject）作为 Java 项目，并通过下面的导航在前两个项目中引用该新项目：

```
Project1 -->Properties-->Java Build Path -->projects tab-> Add -->CommonCodeProject
Project2 -->Properties-->Java Build Path -->projects tab-> Add -->CommonCodeProject 
```

这应该满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T14:00:30.533

如果您不编辑通用代码，则将其设为一个项目并作为 jar 导入另外两个项目。或者即使您正在编辑有 3 个单独的项目并构建通用代码来创建一个用于其他两个项目的 jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T14:05:11.793

除了本机 Eclipse（如其他答案中所述）之外，我会将 Maven+Eclipse 与[m2e](http://m2eclipse.codehaus.org/)插件一起使用（使用[Marketplace](http://marketplace.eclipse.org/)下载）。根据您的项目及其应用程序的复杂性，您甚至可以托管类似[Sonatype 的 Nexus 之](http://www.sonatype.org/nexus/)类的东西，并将您的公共代码部署到存储库中——但这可能有点过头了。

# emacs - Emacs，交互式插入矩形字符串

> ID：12975853
> 
> 赞同：6
> 
> 时间：2012-10-19T13:57:15.570
> 
> 标签：emacs, elisp

我经常在编辑文本或代码时遇到我想插入一个矩形的空格来对齐的情况，但我不知道要插入的空格的确切数量。

例如，考虑以下（非常人为的）片段：

```
void *var = (void *)typedVar;
void *otherVar = voidStarOtherVar;
int intVar = x*y;
int intVar2 = y*z; 
```

在默认的 C 模式下，`M-x align`结果会更好：

```
void *var      = (void *)typedVar;
void *otherVar = voidStarOtherVar;
int   intVar   = x*y;
int   intVar2  = y*z; 
```

但是，假设我想要的对齐方式（出于某种原因）是这样的：

```
void *var      = (void *)typedVar;
void *otherVar =         voidStarOtherVar;
int   intVar   =         x*y;
int   intVar2  =         y*z; 
```

我知道的唯一方法是`M-x string-rectangle`在底部的三行中输入确切的空格数。

但是，我不想`(void *)`在输入空格之前计算字符数，因此插入“交互式”矩形字符串会很好。例如，我在这种交互模式下键入一个空格，我看到它立即反映在文本中。我进入另一个空间，它被插入。通过这种方式，我可以交互地将文本对齐到我想要的位置。

有没有内置的方法来实现这一点？或者，如果做不到这一点，我可以以某种方式创建这个功能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T19:54:02.027

开放矩形可能对您的示例有用：

> `C-x r o' Insert blank space to fill the space of the region-rectangle (`开放矩形'）。这会将区域矩形的先前内容推到右侧。

因此，您标记所需的矩形，此功能会将内容推送到矩形的右侧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:49:02.173

是的。内置模式是`cua-selection-mode`。

这是工作的[视频](http://vimeo.com/1168225?pg=embed&sec=1168225)`cua-mode`。 `cua-selection-mode`仅激活它的矩形选择方面。

您也可以使用 获得此功能`iedit`，但这是一个[外部包](https://github.com/victorhge/iedit)。它的主要目的是编辑镜像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T20:55:29.593

已经提出的另一种替代方法是`multiple-cursors`在[github 上](https://github.com/emacsmirror/multiple-cursors)，它具有高度交互性且非常有趣。有一个崇高的[Emacs Rocks！](http://emacsrocks.com/e13.html)在 YouTube 上报道它的一集。

# biztalk - 平面文件中缺少换行符

> ID：12975856
> 
> 赞同：3
> 
> 时间：2012-10-19T13:57:30.823
> 
> 标签：biztalk

我在 biztalk 中创建了一个平面文件模式，我的问题是在结果文件的最后一行中缺少“换行符”，我进行了一些研究，发现记录信息应该如下所示：

```
:recordInfo structure="delimited" delimiter_type="hex" delimiter_value="0x0D 0x0A" field_order="postfix" append_newline="yes" skip_CR="no" child_delimiter_type="hex" child_delimiter="0x09" child_order="infix" sequence_number="2" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" /> 
```

但它仍然不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:48:32.033

尝试将 child_order 从“infix”更改为“postfix”。这告诉所有行都以换行符结尾（即使它是最后一行）。如果它的“中缀”则意味着所有行都由它们之间的换行符分隔，即不是最后一行。

您的换行符由 [delimiter_value="0x0D 0x0A"] 定义。还可以尝试根据您的操作系统将其更改为仅 CR 或 CRLF 或 LF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:06:15.887

什么“新线”在系统之间有所不同。

在 Windows 系统上是 char(13)，而在其他系统上是 char(13)。因此，如果您从另一个系统打开文件，它看起来好像缺少“新行”。

你的定义是 char(13) char(10)

```
Child Delimiter: 0x0D 0x0A 
```

这可能与您的文件不匹配，您可能需要更改为：

```
Child Delimiter: 0x0A 
```

详情见：[http ://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)

# iphone - 添加属性时的 exc_bad_access

> ID：12975864
> 
> 赞同：0
> 
> 时间：2012-10-19T13:57:47.333
> 
> 标签：iphone, objective-c, ios

我在一个选项卡中有一个 TabBarController 我在 NavigationController 中有一个 TableViewController。当我添加一个属性时

```
@property CGFloat rowHeight; 
```

或添加类似

```
if ([self.modelTypeCell isEqualToString:@"TypeOneCell"]) 
```

我得到一个

```
error: gdb remote returned an error: E08 EXC_BAD_ACCESS (Code=1.... 
```

在这一行

```
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
} 
```

我无法调试任何东西，并且在错误发生之前没有遇到断点。

编辑：僵尸没有给我信息，在仪器和真实设备上没有抛出错误......

EDIT2：我发现问题应该在这里

```
-(void)setupControllerDictionaries
{
self.masterViewControllerDictionary = [[NSMutableDictionary alloc] init];

TableMasterViewController *master = [[TableMasterViewController alloc] initWithModelType:ModelTypeCustomer];

[self.masterViewControllerDictionary setObject:master forKey:[NSNumber numberWithInt:ModelTypeCustomer]];
[master release]; 
```

}

当我注释掉主版本时，错误消失了，也许是错误，也许是其他地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:07:25.727

像这样编写时可以最好地使用属性：

@property(nonatomic, assign) CGFloat rowHeight;

非原子是因为属性可以在多个线程中执行，而分配意味着属性在分配给属性时应该使用分配属性。保留不能与 this 一起使用，因为此变量不是指针类型

# internet-explorer-8 - 如何在 IE8 中实现 box-shadow 效果 - 怪癖模式

> ID：12975870
> 
> 赞同：1
> 
> 时间：2012-10-19T13:58:04.963
> 
> 标签：internet-explorer-8, css

这可能只是一个不可能的问题，但我想试一试：那我怎样才能在qirks 模式下产生`box-shadow`类似的效果。`IE8`（不要问我为什么，但我们没有使用`DOCTYPE`s）。

我已经尝试过[PIE](http://css3pie.com/)，这对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:00:57.113

您可以直接编写过滤器语句，而不是让 PIE 自动为您生成一个。

[http://msdn.microsoft.com/en-us/library/ms533086(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms533086(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:19:30.310

根据您想要的盒子阴影类型，您可以使用 :after 伪选择器直接在元素下方伪造一个简单的盒子阴影效果。诚然，您可能仍然需要使用背景图像来制作阴影效果，但至少它会将背景图像与主要元素的背景图像分开，并使更新变得不那么繁琐。

编辑：虽然如果它是怪癖模式，那可能不起作用：-/

所以它可能是这样的：

```
myelement {
    position: relative;
    ...
}

myelement:after {
    display: block;
    width: XXpx;
    height: 5px;
    position: absolute; 
    top: 100%;
    left: 0;
    content: '';
    background: ...
} 
```

# c - printf 中增量运算符的模棱两可的行为

> ID：12975872
> 
> 赞同：-4
> 
> 时间：2012-10-19T13:58:17.880
> 
> 标签：c, printf

> **可能重复：**
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

程序的输出

```
#include<stdio.h>
main()
{

 int i = 10;
 printf("%d %d %d\n", ++i, i++, ++i);

} 
```

是 13 11 13\. 有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:01:24.247

这是有史以来最古老的问题。为什么人们会觉得这如此迷人？

这是未定义的行为；您依赖于没有修改之间的[序列点](http://en.wikipedia.org/wiki/Sequence_point)的副作用。

# javascript - 输入按钮上的点击事件

> ID：12975873
> 
> 赞同：2
> 
> 时间：2012-10-19T13:58:17.787
> 
> 标签：javascript, jquery, html

我尝试将一个函数绑定到输入按钮上的单击事件，但它似乎不起作用并且没有调用方法：

```
<div id='back'>

     <input type="button"/>

     </div> 
```

***jQuery：***

```
 $('#back').click(clickOnBackbutton);

              function clickOnBackbutton(){

                console.log('back to menu'); //function not called 

              } 
```

我不喜欢使用 onClick 事件，而是更喜欢使用这种方法。提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:59:54.823

您应该将代码放在文档就绪处理程序中。另请注意，您选择的是 div 标签而不是 input 元素。

```
$(document).ready(function(){
   $('#back input[type=button]').click(clickOnBackbutton);
   // $('#back input[type=button]').click(function(){
   //    or do something here
   // });
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T14:04:10.267

按钮：

```
<div id='back'>
    <input type="button" id='back-button'/>
</div> 
```

jQuery：

```
$(document).ready(function(){
    $('#back-button').click(function(){
       console.log('Back to Menu');
    });
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:59:23.940

您绑定到 div 而不是按钮。

为按钮命名或将其选择为子项，然后绑定单击事件。

```
<div id='back'>
    <input id='backbutton' type="button"/>
</div> 
```

jQuery

```
$('#backbutton').click(clickOnBackbutton);

function clickOnBackbutton(){
    console.log('back to menu'); //function not called 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T14:01:21.800

这应该有效：

```
function clickOnBackButton(){
  console.log("back to menu");
}

$('#back').click(function(){
  clickOnBackButton();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T14:02:17.257

你可以这样做

```
$('#back').click(function(){
    clickOnBackButton();
}); 
```

我认为没有输入类型 =“按钮”这样的东西。也许 type="submit" ？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T14:04:35.723

您也可以使用：

```
$('#back').on('click', function(){
  // some action
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-19T14:08:02.030

JQuery 1.7+ 你应该使用 on 附加事件。

```
function clickOnBackbutton(){
    console.log('back to menu'); //function not called 
}
$(document).on("click", "#back", clickOnBackbutton); 
```

[运行示例](http://jsfiddle.net/3Wbm7/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-19T14:28:00.717

如果您想`div#back`捕获单击按钮事件，那么使用最近的 jquery 您必须这样做：

```
$('#back').on("click", "input[type=button]", clickOnBackbutton); 
```

请注意，您必须将脚本标记放在正文的末尾，或者将代码包装在`$(document).ready`事件中。

# javascript - Windows 8 html/js：替代/删除“拖动”功能？

> ID：12975875
> 
> 赞同：1
> 
> 时间：2012-10-19T13:58:23.000
> 
> 标签：javascript, html, windows-8, microsoft-metro

在 Win 8 HTML/JS/CSS 编程中显示图像是否有替代或更首选的方式？标签是显示图像的标准方式吗？如果我用鼠标测试我的应用程序，我可以在应用程序内部“拖动”一个图像，这当然是无用的——至少就我的应用程序而言。此功能通常用于通过将图像拖入资源管理器窗口来保存图像 - 但这甚至不起作用，因此该功能对于 Win8 基本上没有用。有没有办法关掉它？

唯一不会拖拉的其他方法可能是使用带有图像背景的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:18:06.103

您所看到的是浏览器支持图像拖动的神器。在任何机器上打开 IE，您可以像在 Metro js 应用程序中一样拖动图像元素。要解决此问题，您可以使用带有背景图像的 div：

HTML：

```
<div class="art" ></div> 
```

CSS：

```
.art {
    background-image: url(../images/art.png);
    height:128px;
    width:128px;
} 
```

# ios - 如何将 UIView 插座连接到自定义子视图

> ID：12975880
> 
> 赞同：16
> 
> 时间：2012-10-19T13:58:34.170
> 
> 标签：ios, xcode

我还是 xcode / iOS 的新手，并且遇到以下问题：

为了显示一些移动调试信息，我将 UIview 添加/连接为我的一个 Viewcontroller 的插座属性。此视图是 UIview 的自定义子类。现在我添加了一些 UIlabels 作为该视图的子视图，并希望将这些标签的插座连接拖到我的 customUIview.h 文件中，以便将这些标签作为我的自定义 UIview 类的属性进行访问（无需直接从查看控制器）。

问题是界面构建器（我使用的是 Storyboards/xcode4.3）没有成功。我可以将插座连接到 ViewControllerClass.h 但不能连接到我的子视图的 .h 文件。谁能指出问题出在哪里？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-19T18:52:28.567

刚刚解决了问题。在 customview.h 文件中手动键入属性插座声明后，我可以将它们从那里按 ctrl-drag-connect 连接到 interfacebuilder 中相应的 UIlabel 对象。只在这个方向有效！

不管怎么说，还是要谢谢你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:24:22.260

将您的自定义视图类从“UIView”更新为界面构建器中的“自定义视图”类。现在您可以通过 ctrl+拖动按钮或文本字段到适当的自定义类来建立连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T03:05:16.583

问题解决了！由于三年前的一篇有趣的 SO 帖子（关于连接到 UIView 的子视图），我发现一个人只是从动作或出口圈（在 .h 文件中）拖动（不是 Ctrl_drag！）到控件，就是这样。即使控件与子类 UIView 处于不同的视图中，也能完美运行。尽管您总是远离圆圈，但与出口和动作同样有效。

# ruby - ruby中的反引号与系统

> ID：12975881
> 
> 赞同：6
> 
> 时间：2012-10-19T13:58:37.020
> 
> 标签：ruby

`backtick`根据我在网上的所有阅读资料，和之间的区别`system`是返回的内容。`backtick`返回 STDOUT 而`system`返回`true`or `false`。

有人告诉我，他们都使用 subshel​​l 来执行操作。

但是我注意到另一个不同之处。

```
output = system('aaa')
puts "output is: #{output}"

output = `aaa`
puts "output is: #{output}" 
```

上面代码的结果是

```
$ ruby test.rb
output is: 
lab.rb:4:in ``': No such file or directory - aaa (Errno::ENOENT) from test.rb:4:in `<main>' 
```

因此，似乎在`backtick`向主程序引发异常的情况下。操作`system`吞下异常，主程序永远不会看到异常。

我正在使用 ruby​​ 1.9.3 。

我的分析对吗？

更新：得到了答案。它在这里[https://gist.github.com/3730986](https://gist.github.com/3730986)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T06:13:32.697

从已编辑的问题正文中复制答案，以便从“未回答”过滤器中删除此问题：

> 得到了答案。它在这里[https://gist.github.com/3730986](https://gist.github.com/3730986)。

〜回答每个[nodejs99](https://stackoverflow.com/users/447989/nodejs99)

# c# - 从 byte[] 数组在 ashx 中创建一个 excel 文件供客户端下载

> ID：12975883
> 
> 赞同：3
> 
> 时间：2012-10-19T13:58:37.460
> 
> 标签：c#, excel, ashx

在使用 DataTableReader 从 DataTable 读取数据后，我试图从 byte[] 数组创建 Excel 文件，所有这些都在 ashx 文件中。但它只是不工作。在这里我发布一些代码：

```
DataTableReader RS = dt.CreateDataReader();
byte[] byteArray = GetData(RS);

context.Response.ContentType = "application/ms-excel";
context.Response.Clear();

//  context.Response.Charset = "";
try
{
    context.Response.BinaryWrite(byteArray);
    context.Response.OutputStream.Write(byteArray, 0, byteArray.Length);
    context.Response.BufferOutput = true;
    context.Response.Flush();
 }
 catch (Exception ex)
 {
    SendMail(ex.Message.ToString());
 } 
```

它抛出以下异常：

> context.Response.SubStatusCode 引发了 System.PlatformNotSupportedException 类型的异常。{"此操作需要 IIS 集成管道模式。"} ashx

我知道如果我使用标头需要有 IIS7 或 Framework 3+。

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:59:32.793

您设置`Response` `ContentType`，然后`Clear`设置`Response`。然后你写了两次响应，这也很奇怪。我会改变它，我也会尝试调用`End`而不是`Flush`.

使其工作的最小代码量将类似于：

```
...
    DataTableReader RS = dt.CreateDataReader();             
    byte[] byteArray = GetData(RS);             

    try   
    {
        context.Response.Clear();
        context.Response.ContentType = "application/ms-excel";   
        context.Response.OutputStream.Write(byteArray, 0, byteArray.Length);       
        context.Response.End();    
    }    
    catch (Exception ex)    
    {       
        SendMail(ex.Message.ToString());    
    }
... 
```

# sql-server - 强制存储过程运行单线程

> ID：12975884
> 
> 赞同：2
> 
> 时间：2012-10-19T13:58:38.940
> 
> 标签：sql-server, database, stored-procedures, single-threaded

我有一个在多核系统上运行的存储过程。它以多线程方式执行。由于（可能是）查询中的某些事情，某些线程的执行将永远挂起，并带有 cx_packet 等待和锁定。有没有办法强制单线程执行？（我知道这不是最好的解决方案，但至少在查询得到更好的优化之前很有帮助。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:46:08.050

您可以添加`OPTION (MAXDOP 1)`到要运行单线程的语句。例子

```
SELECT *
FROM master..spt_values
OPTION (MAXDOP 1) 
```

# data-binding - 失去焦点时，Databound ComboBox 返回其上一个选定项

> ID：12975885
> 
> 赞同：0
> 
> 时间：2012-10-19T13:58:39.790
> 
> 标签：data-binding, combobox

我在 WinForm 上有一个普通的 ComboBox。我想用城市填充它并将其数据绑定设置为我的业务对象 CityID。对象是 Office {ID, Name, CityID} 我这样填充项目

```
public void LoadCityCombo(List<City> list)
{
    CityComboBox.DisplayMember = "Name";
    CityComboBox.ValueMember = "ID";
    CityComboBox.DataSource = list;
} 
```

比加载对象

```
public void LoadOffice(Office office)
{
    NameTextBox.DataBindings.Add("Text", office, "Name");
    AddressTextBox.DataBindings.Add("Text", office, "Address");
    Binding b = new Binding("SelectedValue", office, "CityID");
    CityComboBox.DataBindings.Add(b);
} 
```

当我打开表单时选择了正确的城市，但是当我从组合中选择另一个城市并移动到其他控件（松散的组合焦点）时，旧的选定城市会在组合中返回。

我在搞砸什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:20:23.010

问题出在这一行：

```
Binding b = new Binding("SelectedValue", office, "CityID");
CityComboBox.DataBindings.Add(b); 
```

修复是

```
Binding b = new Binding("SelectedValue", office, "CityID", true);
CityComboBox.DataBindings.Add(b); 
```

或者

```
Binding b = new Binding("SelectedValue", office, "CityID");
b.FormatingEnabled = true;
CityComboBox.DataBindings.Add(b); 
```

我不明白这是否是由我的本地化引起的，但在另一台计算机上，绑定在没有设置此属性的情况下工作。奇怪的是，如果不设置此属性，您不会触发 BindingCompleted 事件，您可以在其中查看是否存在绑定错误。

# jquery - 如何在 ASP.NET MVC 4 和 jquery 中使用 web api 下载文件

> ID：12975886
> 
> 赞同：14
> 
> 时间：2012-10-19T13:58:41.550
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

我是使用带有 Web Api 的 ASP.NET MVC 4 的新手。

我想允许用户下载一个文件，这个文件我将在服务器端创建。为了创建文件，我设法掌握了以下代码

```
[ActionName("Export")]
public HttpResponseMessage PostExportData(SomeModel model)
{           
    string csv = _service.GetData(model);
    HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
    result.Content = new StringContent(csv);
    //a text file is actually an octet-stream (pdf, etc)
    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
    //we used attachment to force download
    result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
    result.Content.Headers.ContentDisposition.FileName = "file.csv";
    return result;            
} 
```

**如何使用 JQUERY 调用此 Web API 方法？**

但我不确定如何使用 jquery 调用这个 web api 并让它返回一个文件，其中包含下载任何文件时通常会得到的“另存为/打开”选项。

有人可以帮助我并指导我如何拨打电话和下载文件。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T14:07:18.330

您可以在要使用 jquery 的视图中执行类似的操作。我假设控制器的名称是 ExportController。您还必须分解模型变量，或者`HttpResponseMessage PostExportData(SomeModel model)` 通过其他方式将模型收集到内部。

html:

```
<a class="export">export</a> 
```

javascript:

```
<script>
$('a.export').click(function(e) {
    e.preventDefault();  //stop the browser from following
    window.location.href = '@Url.Action('Export', 'ExportController', new { property = model.property, property = model.property2 })';
});
</script> 
```

使用`POST`

```
function UpdateForm(modelObject) {
   if ($('#hidden-form').length < 1)
   {
       $('<form>').attr({
           method: 'POST',
           id: 'hidden-form',
           action: '@Url.Action('Export', 'Export')'
       }).appendTo('body');
   }
   $('#hidden-form').html('');
   for(var propertyName in modelObject) {
       $('<input>').attr({
            type: 'hidden',
            id: propertyName,
            name: propertyName,
            value: modelObject[propertyName]
       }).appendTo('#hidden-form');
    }
}

$('a.export').click(function(e) {
    e.preventDefault();
    var modelObject = { property1 : "property1" };
    UpdateForm(modelObject);
    $('#hidden-form').submit();
}); 
```

然后你可以`#hidden-form`通过js发布，这将触发文件下载

**更新：**这是一个完整的发布示例，它没有检查错别字等，因此调试任何小错误。

# java - Java中类之间的JNI范围

> ID：12975888
> 
> 赞同：3
> 
> 时间：2012-10-19T13:58:49.150
> 
> 标签：java, c, java-native-interface

我使用 JNI 已经有一段时间了，但是我现在尝试的需要我从一个类中初始化一些 JNI 变量并从另一个类中设置它们。

我的问题是，JNI 是否对每个类都一样（即每个类都没有私有地址空间）。即，我从一个类（例如A类）为我的C库中的一个文件范围变量分配内存（并设置它）。该变量是否仍会分配该内存（并设置为某些数据），以便我从 B 类使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:35:51.897

我知道提供私有空间的唯一一种机制是线程本地存储。

静态分配或堆分配 (malloc) 由所有代码段共享到可执行文件中。

Windows API 提供了一些变化，但我们明确使用它。

# c++ - Arduino：“void（ClassName::)（）”类型的参数与“void（*）（）”不匹配，同时附加中断

> ID：12975895
> 
> 赞同：1
> 
> 时间：2012-10-19T13:59:17.053
> 
> 标签：c++, arduino

> **可能重复：**
> [如何传递成员函数指针？](https://stackoverflow.com/questions/130322/how-do-you-pass-a-member-function-pointer)

所以我一直在为 Arduino 编写一些库来修剪我一直在研究的一个相当大的草图。到目前为止一切正常，除了在我的一个类的构造函数中。我用它来初始化任何变量、引脚模式和附加中断。当我尝试附加中断时出现问题，我在我的类中声明和定义了函数，以及我是否将它们附加到 setup() 块的 Arduino 草图中，或者如果我在构造函数的库中执行它，我收到此错误：

“void (RotaryEncoders::)()”类型的参数与“void (*)()”不匹配

代码的基本结构如下：

```
RotaryEncoders::RotaryEncoders() {
     //Initialise some variables
     //Set up some pin modes
     attachInterrupt(2, doRedEncoder, CHANGE);
}

void RotaryEncoders::doRedEncoder() {
     //Some code, blah blah blah
} 
```

我假设当您纯粹在 Arduino IDE 中执行此操作时，这些工具会对内存中的函数执行某些操作以使其正常工作。我认为解决方案很简单，但我看不到：S 谢谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:04:04.230

指向成员函数的函数指针是一个坏主意，因为这些函数通常由对象使用。

解决它的两种方法：

解决方案1：有一个外部函数（非成员函数）（常规C风格函数）为你做事。

解决方案2：[看看这个](https://stackoverflow.com/questions/130322/how-do-you-pass-a-member-function-pointer)

祝你好运。

# tridion - 安装 Tridion 2011 SP1：内容交付服务器

> ID：12975897
> 
> 赞同：5
> 
> 时间：2012-10-19T13:59:22.840
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在安装 SDL Tridion 2011 sp1。阅读安装手册后，我们遇到了一些疑问。

如何在 CDS 上创建传入文件夹？我们需要手动创建还是由 startCDinstaller.bat 创建？

在我们的例子中，我们将使用 http/https 发布内容，因此我们将遵循安装手册的步骤 6.4.5。在此步骤中，没有提及有关创建传入文件夹的内容。

是否必须运行 startCDinstaller.bat 以便注册所需的程序集，并将配置和 Jar 文件复制到 CDS 服务器？

我们的 CDS 服务器架构是：

1.  我们的门户（显示站点）在指向的 IIS 中配置`d:\Inetpub\Myportal`

2.  HTTPUpload 网站在指向的 IIS 中配置`d:\Inetpub\MyHTTPUpload`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T14:17:16.630

**如何在 CDS 上创建传入文件夹？我们需要手动创建还是由 startCDinstaller.bat 创建？**

**答：**这取决于。如果您的 IIS 站点应用程序池用户具有创建权限，它将自动创建。但是，我建议您手动创建它并向 AppPool 用户提供权限。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_663JDNNNDHDH889595JDJDJD](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_663JDNNNDHDH889595JDJDJD)

将执行 HTTPUpload.aspx 网页的 IIS 用户配置为对传入内容的 Content Deployer 位置具有修改访问权限。默认情况下，IIS 用户是运行 SDL Tridion 应用程序池的身份（通常是网络服务用户）。

**是否必须运行 startCDinstaller.bat 以便注册所需的程序集，并将配置和 Jar 文件复制到 CDS 服务器？**

**A :**不一定要运行 startCDinstaller.bat。如果您作为 .net Web 应用程序运行，则 dll/jars/config 将被简单地复制到 /bin 目录下。

我个人的偏好总是手动配置（并且大多数都遵循相同的程序 - 通用程序）。检查以下文档以了解要遵循的步骤。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_708AA488429D4457AC303DD121B22183](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_708AA488429D4457AC303DD121B22183)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:14:35.413

[请在此处](http://nunolinhares.blogspot.com/2011/07/manually-configuring-tridion-2011-net.html)遵循 Nuno 出色的安装指南

HTTPUpload 网站是您的“部署者”以及您放入发布目标的该网站的 URL。尝试先在浏览器中点击它。

我没有使用 .bat 文件——只需要 Nuno 的说明即可。

# ios - 如何将具有多个参数的块放入 NSOperationQueue？

> ID：12975900
> 
> 赞同：1
> 
> 时间：2012-10-19T13:59:26.430
> 
> 标签：ios, cocoa-touch, concurrency, block, nsoperationqueue

我已经定义了一个这样的块：

```
void (^observerBlock) (id aTrigger, id aContext, void(^aTriggerCallbackBlock)(id aTContext)) = .... 
```

现在我想把它放入一个 NSOperationQueue 并同时执行。但是 NSOperationQueue 的实例方法`addOperationWithBlock:`只允许这样的参数：`(void (^)(void))block`.

如何将具有多个参数的块放入 NSOperationQueue？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:10:36.080

一种方法是对这些`NSOperation`或`NSBlockOperation`类进行子类化以创建一个专门的操作类，然后只需将所需的属性添加到子类中，而不是将值作为参数传递。

另一种方法是仅在块中引用您需要的变量，当创建块时，它将复制引用/值。如果您需要能够更改这些值，您可以在块内引用的变量上使用 __block。

# asp.net - 如何在编辑模式下设置gridview命令列的宽度？

> ID：12975904
> 
> 赞同：1
> 
> 时间：2012-10-19T13:59:36.147
> 
> 标签：asp.net, gridview

我扩展了一个gridview，以便它可以插入新行。当 gridview 插入新行时，我希望命令链接按钮显示**Add**（而不是**Update**）。所以我将命令列从数据绑定转换为模板字段。我已将列的宽度设置为 100px，以便它包含两个 LinkBut​​ton。

```
<asp:TemplateField ShowHeader="False" ItemStyle-Width = "100px">
</asp:TemplateField> 
```

但是，当行进入编辑模式时，大小不是 100px。链接按钮不再彼此相邻，而是一个在另一个顶部。即使在编辑模式下，如何将命令列的宽度保持为 100px？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:23:13.807

它并不优雅，但您可以使用 GridView 的`OnRowDataBound`事件强制每个单元格的宽度：

**ASP.NET**

```
<asp:GridView ID="gv" runat="server" OnRowDataBound="gv_RowDataBound"... 
```

**C＃**

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    // regardless of edit mode or DataControlRowType
    e.Row.Cells[0].Width = 100;
} 
```

假设您`TemplateField`的 GridView 中的列索引为 0。

# xsd - 在命名空间中包含“xml”这个词是否有效？

> ID：12975905
> 
> 赞同：1
> 
> 时间：2012-10-19T13:59:43.527
> 
> 标签：xsd

供应商为我提供了一个 Web 服务来使用，他们定义了 Web 服务的命名空间，如下所示：

```
 http://company.com/ws/xml 
```

我正在使用 IBM 的 BPM 产品来使用 Web 服务，并且该工具无法处理使用该名称空间的复杂类型。我试图弄清楚这是否是工具实现的问题，或者 WSDL 是否无效。任何人都可以提供指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:58:09.700

我宁愿认为工具是错误的。WSDL 的 targetNamespace 是一个 URI 引用。URI 设置中没有任何内容特别关心 XML。

XML 规范指出，`Names beginning with the string "xml", or with any string which would match (('X'|'x') ('M'|'m') ('L'|'l')), are reserved for standardization in this or future versions of this specification.`但这不会影响 XML 名称空间，更不用说 WSDL 目标名称空间了。

现在，我将其称为“最佳实践”，它通常不仅仅代表“对疯狂事物的防御”：避免使用 (('X'|'x') ('M'|'m') ( 'L'|'l')) 尽可能。我以前也见过——我曾经是那个“供应商”。在我的例子中，这个“客户端”正在将 URI 段映射到 xml 名称，这当然会导致无效的映射。

# fortran - 编译执行代码后没有输出

> ID：12975906
> 
> 赞同：1
> 
> 时间：2012-10-19T13:59:44.687
> 
> 标签：fortran

我是 fortran 的新手，我正在尝试将其作为输出执行。

```
program write2file
implicit none
! open file
 open (10, file='output_file.txt', status='unknown')

! write to file
  write(10, *) 'Hello World!'

! close file
close(10)
end program write2file 
```

我在 Linux 上运行它，并尝试使用此语句编译和执行输出，但不幸的是，我无法获得“output_file.txt”

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:38:56.580

这是评论而不是答案，但我觉得需要更好的格式。执行命令后

```
ifort -o output hi.f90 
```

您应该`output`在当前工作目录中调用一个可执行文件。要执行该可执行文件，请执行命令

```
./output 
```

如果你成功了，它将把你想要的输出写入程序的当前版本指向的任何地方。

阅读您的评论让我怀疑您认为命令

```
ifort -o output hi.f90 
```

应该执行您的程序并导致创建请求的输出。但是该命令只是将您的源代码（在文件中`hi.f90`）编译成名为`ouptut`. 这是您第一次使用编译器吗？

# android - 效率：单例 vs 工厂

> ID：12975907
> 
> 赞同：0
> 
> 时间：2012-10-19T13:59:46.133
> 
> 标签：android, design-patterns

使用 android 设备，我正在实现自己的日志记录类。它有两部分：文件和控制台日志。对于文件，我使用了工厂模式来确保每个实例都有自己的文件并强制互斥。控制台日志没有这个问题，而且我已经准备好制作自己的工厂的方法，但后来我开始考虑内存。

性能方面，最好是拥有一个挥之不去的静态控制台记录器并将其返回，还是允许程序员拥有尽可能多的数量，并让垃圾收集器清理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:00:56.667

我的猜测是保持单例实例会更有效率。对象的创建和销毁将使工厂方法稍微慢一些。

# java - TitleAreaDialog - 调整标题图像

> ID：12975909
> 
> 赞同：5
> 
> 时间：2012-10-19T13:59:49.033
> 
> 标签：java, dialog, swt, jface, titleareadialog

所以我正在创建一个图像以放置在标题区域。除了只显示图像的 1/4 之外，一切正常吗？

我的图像实际上是文本和图像组合在一个图像中 EX：JKTeater [ ] <-- 图标所以现在只有 JKT 显示在标题区域

这是 create() 方法

```
public void create() {
  super.create();
  setTitle("JKTeater Application");
  setMessage("Hello World");
  if (image != null) setTitleImage(image);

} 
```

1.  标题区号是否允许特定大小？
2.  有没有办法将图像的末尾放在标题区域的末尾？
3.  你可以使用布局来移动它吗？
4.  如何在标题区域底部获得黑色水平线？

***编辑***

![在此处输入图像描述](../Images/219b0f0ce05ef6d616c92702bda1cd39.png)

我敢肯定，如果您实际上可以将背景颜色从基本颜色更改为渐变色，这将需要很多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T14:48:14.190

这是一个例子`TitleAreaDialog`。如您所见，`Image`完全显示并向右对齐：

```
public static void main(String[] args) {
    final Shell shell = new Shell();
    shell.setLayout(new FillLayout());

    TitleAreaDialog dialog = new MyTitleAreaDialog(shell);
    dialog.setTitleAreaColor(Display.getDefault().getSystemColor(SWT.COLOR_WIDGET_BACKGROUND).getRGB());
    dialog.open();
}

private static class MyTitleAreaDialog extends TitleAreaDialog
{
    private Image image;

    public MyTitleAreaDialog(Shell parentShell) {
        super(parentShell);
        image = new Image(Display.getDefault(), "/home/baz/Desktop/StackOverflow.png");
    }

    @Override
    public boolean close() {
        if (image != null)
            image.dispose();
        return super.close();
    }

    @Override
    protected Control createContents(Composite parent) {
        Control contents = super.createContents(parent);

        setTitle("Title");
        setMessage("Message");

        if (image != null)
            setTitleImage(image);

        return contents;
    }

    @Override
    protected Control createDialogArea(Composite parent) {
        Composite composite = (Composite) super.createDialogArea(parent);

        // YOUR LINE HERE!
        Label line = new Label(parent, SWT.SEPARATOR | SWT.HORIZONTAL);
        line.setLayoutData(new GridData(SWT.FILL, SWT.END, true, true));

        return composite;
    }
} 
```

![在此处输入图像描述](../Images/df0d0781c243e34da164bfc0f9caf421.png)

> 标题区号是否允许特定大小？

AFAIK there are no restrictions to the size. I tried using an `Image` that was larger than my screen resolution and it was fully displayed. The `Dialog` was obviously unusable though.

> I am sure that it would be asking to much to see if you can actually change the background color from a basic color to a gradient

The background color can be changed using `dialog.setTitleAreaColor(RGB)` (in this case the widget background color), but you cannot use a gradient. There is a deprecated method [`getTitleArea()`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/dialogs/TitleAreaDialog.html#getTitleArea%28%29) which would return the title area `Composite`, but I really wouldn't recommend using that.

> How can I get a black horizonal line at the bottom of the title area?

The line at the bottom was achieved by using:

```
Label line = new Label(parent, SWT.SEPARATOR | SWT.HORIZONTAL);
line.setLayoutData(new GridData(SWT.FILL, SWT.END, true, true)); 
```

> Can you use a layout to move it around?

There is a similar question here:

[Moving an image of a TitleAreaDialog to the left](https://stackoverflow.com/questions/12528399/moving-an-image-of-a-titleareadialog-to-the-left)

那里的答案解释了如何更改`TitleAreaDialog`. 也许阅读他们。

# javascript - 将 div 悬停在 youtube 视频顶部

> ID：12975912
> 
> 赞同：1
> 
> 时间：2012-10-19T14:00:00.487
> 
> 标签：javascript, jquery, youtube, youtube-api

我有一个脚本正在调用 youtube 提要，然后显示视频（无 iframe）请看一下小提琴：[JsFiddle](http://jsfiddle.net/E4pUE/)

我想在播放器顶部显示一个 img，所以我附加了一个这样的 img：

```
 html += '<span>Top Rated</span><img src="http://christianjamesphoto.com/themes/chrisjames/images/arrow-left.gif" /></div>'; 
```

并分配给它一个`z-index:9999;`但是这似乎不起作用。我已经搜索了这个问题的答案，似乎我必须`wmode="transparent"`输入链接，但我不确定如何在 url 中实现它。我该怎么做才能让它在播放器顶部显示 img？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:20:28.137

您可以像这样向 jTubeEmbed 插件添加一个新选项：http: [//jsfiddle.net/aFx29/2/](http://jsfiddle.net/aFx29/2/)

变化：

```
 jTubeEmbed: function(video, options) {
        var options = $.extend({
            // Embed Options
            width: 560,
            height: 340,
            wmode: 'window', // can be window, transparent and opaque

            // Player Options
            autoplay: false,
            fullscreen: false,
            related: true,
            loop: false,
            keyboard: true,
            genie: false,
            border: false,
            highdef: true,
            start: 0
        }, options);

        // ... ommitted for brevity ...

        if(options.wmode) {
            videoEmbed += '<param name="wmode" value="' + options.wmode + '"></param>';
        }

        if(options.fullscreen == true) {
            videoEmbed += '<param name="allowFullScreen" value="true"></param>';
        }

        videoEmbed += '<embed src="'+videoUrl+'"';
        videoEmbed += '    type="application/x-shockwave-flash"';

        if(options.wmode) {
            videoEmbed += '    wmode="' + options.wmode + '"';
        }

        if(options.fullscreen == true) {
            videoEmbed += '    allowfullscreen="true"';
        }

        videoEmbed += '    allowscriptaccess="always"';
        videoEmbed += '    width="'+options.width+'" height="'+options.height+'">';
        videoEmbed += '    </embed>';
        videoEmbed += '</object>';

        return videoEmbed;
    } 
```

并在调用时传递您想要的选项，`jTubeEmbed`例如：

```
$.jTubeEmbed(this.video, {
    // your options here,
    wmode: 'opaque'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:05:43.473

播放器是一个 flash 对象，要将图像放在顶部，您应该考虑：

[在 Flash 对象上方显示图像](https://stackoverflow.com/questions/2205497/display-image-above-flash-object)

将此参数添加到 videoEmbed：

```
videoEmbed += '<param name="wmode" value="transparent"></param>'; 
```

你可以在你的代码中尝试这样的事情：

```
html = '<li>';
html += '<div style="position:absolute; top:0px; z-index:2000;"><span>Top Rated</span>';
html += '<img src="http://christianjamesphoto.com/themes/chrisjames/images/arrow-left.gif" alt="" /></div>';
html += $.jTubeEmbed(this.video, embedOptions);
html += '<a href="'+this.link+'">'+this.title+'</a>';
html += '</li>'; 
```

# visual-studio-2010 - Visual Studio：“快速替换”对话框中缺少“当前文档”选项

> ID：12975916
> 
> 赞同：1
> 
> 时间：2012-10-19T14:00:07.693
> 
> 标签：visual-studio-2010, find, replace

这张照片说明了一切。有谁知道怎么了？此时除了重新启动VS之外没有做任何事情。

![图片说明了一切](../Images/91d001385243f79f921d97ad84e2ed2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:53:19.473

我不认为这与 Visual Studio 是否运行有关......它“可能”在它运行时也会发生，但 VS2010 经常失去这个`Current Document`选项。

我通常按​​照以下过程将其恢复：

1.  首先使用另一个选项搜索单词，例如。`Current Project`, 或`Entire Solution`.
2.  VS2010 找到匹配项后（通常在另一个文件中），然后我返回到设计器中的原始文件，并且`Current Document`选项“通常”返回。

`Current Document`在第 2 步中，VS2010 在选项返回之前找到匹配项似乎很重要。通常，该选项将重新出现在另一个文件中（找到匹配项的位置），您可以将其设置在那里或返回到原始文件时。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:03:29.813

如果您的代码实际上正在运行并且当前文档是运行代码的一部分，则您无法修改它：搜索和替换将不允许在当前文档上进行替换。

# apache - URL重写不起作用？

> ID：12975919
> 
> 赞同：1
> 
> 时间：2012-10-19T14:00:14.183
> 
> 标签：apache, url-rewriting

我一直在想弄清楚为什么我的 URL 重写不起作用！

我目前正在使用

```
RewriteEngine On
Options +FollowSymLinks
RewriteRule ^([^/]*)/([^/]*)/$ /profile.php?county=$1&name=$2&id=1 [L] 
```

在没有任何影响的情况下，我检查了 mod_rewrite 是在哪个位置。如果我使用

```
RewriteRule ^rdr\.html http://www.google.com/? [R=301,L] 
```

我重定向到谷歌，所以我知道它肯定是我正在做的事情。

我试图重写的网址是......

```
http://www.mysite.com/profile.php?county=Cheshire&name=Martin-Mack&id=2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:08:36.787

不是该问题的确切答案，但总体上可能有用；您可以打开重写日志记录，这可以帮助追踪问题。

在[Apache 2.2](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog)中：

```
RewriteLog com.example_rewrite.log 
RewriteLogLevel 3 
```

[Apache 2.4](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html#logging)中的语法略有变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:48:39.760

这对我有用：

**.htaccess**

```
RewriteEngine On
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ profile.php?county=$1&name=$2&id=1 
```

**配置文件.php**

```
<h1>Profile</h1>
<?php
echo "County: " . $_GET['county'] . "<br>";
echo "Name: " . $_GET['name'] . "<br>";
echo "Id: " . $_GET['id']; 
```

这个网址：`http://localhost/tests/htaccess_test/Cheshire/Martin-Mack`

产生了这个HTML：

```
<h1>Profile</h1>
County: Cheshire<br>Name: Martin-Mack<br>Id: 1 
```

![在 Opera 中渲染](../Images/aac6ef2d5523dfe673460225935c04b2.png)

在 Apache 2.2.21 和 PHP 5.3.10 上测试。

* * *

在我的测试中，我将两个文件都放入了`http://localhost/tests/htaccess_test/`，但您可以将它们放在您想要的位置；他们只需要在同一个文件夹中。

例如，在您的情况下，您应该将文件放在网站的根目录中，这样当您访问时`http://www.yoursite.com/Cheshire/Martin-Mack`，重定向将起作用。

如果您仍然无法使其正常工作，请尝试`RewriteBase /`在`RewriteEngine On`.

完整示例：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ profile.php?county=$1&name=$2&id=1 
```

* * *

**更新：**在您的原始代码中，`id`参数是静态的。为了让它也能正常工作，试试这个：

```
RewriteEngine On
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ profile.php?county=$1&name=$2&id=$3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:29:21.783

你的规则非常接近。

```
 RewriteRule ^([^/]+)/([^/]+)/?$ /profile.php?county=$1&name=$2&id=1 [L] 
```

*   我认为塞缪尔库克先生谈到了你的问题——你的规则需要一个斜杠。`?`在规则中的尾部斜杠之后添加允许带有它的 URL 和不带有它的 URL。

*   此外，修改后的规则使用`+`s 而不是您`*`的 s，因为`*`修饰符将匹配空字符串，并且可能会导致重定向循环。

旁注：**在测试时使用 302 重定向！** 您的浏览器将“记住” 301 重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:29:41.717

[此答案](https://stackoverflow.com/a/11711948/851273)**的顶部阐明了 URL 如何被[*重写*](https://stackoverflow.com/a/11711948/851273)[和](https://stackoverflow.com/a/11711948/851273)[*重定向*](https://stackoverflow.com/a/11711948/851273)。那里发生了两种完全不同的事情。**

 **要将 URL 更改为`/profile.php?county=foo&name=bar&id=1234`更好看的变体，您需要匹配实际请求并重定向浏览器：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /profile\.php\?county=([^&]+)&name=([^&]+)&id=([0-9]+)
RewriteRule ^ /%2/%3/%4/? [L,R=301] 
```

请注意，**id**也需要是 URL 的一部分（通过 反向引用`%4`）。这使得当有人在他们的浏览器中键入 URL:`http://mysite.com/profile.php?county=Cheshire&name=Martin-Mack&id=2`时，他们会被外部重定向到`http://mysite.com/Cheshire/Martin-Mack/2/`，从而更改地址栏中的 URL。

然后为了在内部重写更好看的 URL 并将其路由回 php 脚本：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/([^/]+)/([0-9]+)/?$ /profile.php?county=$1&name=$2&id=$3 [L] 
```

这会反过来，但只是在内部，以便浏览器地址栏中的 URL 在内容从`profile.php`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:51:28.447

如果您的重写在或 htaccess 中，它将与“profile.php”进行比较，因此中间的 / 永远不会匹配，更不用说末尾的第二个斜线了。**

# rest - 多页文档作为 REST 上的图像

> ID：12975921
> 
> 赞同：3
> 
> 时间：2012-10-19T14:00:20.530
> 
> 标签：rest

我试图公开一个返回多页文档的 RESTful URL。在我看来，使用 PDF 非常简单。

```
GET /documents/12345.pdf 
```

但我也希望使用图像格式公开相同的文档，其中每个页面都是单独的 jpg。我将如何最好地构建 URL？

到目前为止，我在

```
GET /documents/12345/page1.jpg 
```

或者

```
GET /documents/12345.jpg?page=1 
```

或者

```
GET /document/12345?page=1&type=jpg 
```

我知道没有绝对正确的方法可以做到这一点，我只是在寻找最直观的方法。我花了很多时间来研究这个，以至于我无法说出我最喜欢哪一个，或者即使有更好的替代方法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:10:27.033

**资源**

您的资源就是文档。PDF 和 JPEG 是该资源的两种*表示形式。*所以两者都可以在

```
/documents/12345 
```

**内容协商**

客户如何选择 PDF 或 JPEG？这就是[HTTP 标头`Accept`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)的用途。

```
GET /documents/12345
Accept: image/jpeg 
```

对于 JPEG 表示，

```
GET /documents/12345
Accept: application/pdf 
```

用于 PDF 表示。

**页面**

现在我们仍然有页面的问题。在这里，我建议遵循评论中提到的方法：

```
GET /documents/12345/1
Accept: image/jpeg 
```

对于 JPEG 表示的第 1 页。

**问题**

还有一个小问题：这个请求会发生什么？

```
GET /documens/12345/1
Accept: application/pdf 
```

PDF 表示的“第 1 页”是否作为单独的实体存在？也许有，如果您的 RESTful 服务可以生成它。

但我们还没有完成。这个请求会发生什么？

```
GET /documents/12345
Accept: image/jpeg 
```

是否有 JPEG 表示的单页版本？同样，如果您的 RESTful 服务可以生成它，也许有。也许它可以生成一页合一的 JPEG。如果不能，返回`404 Not Found`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:08:23.977

怎么样

```
GET /documents/pdf/12345 
```

和

`GET /documents/jpg/12345/1`

使用**REST**时，我更喜欢在不使用参数或查询字符串的情况下公开资源。这样它就符合 RESTful 语法，并且更容易使用 ASP.NET MVC 中的内置路由进行解析。

就像@Tichodroma 关于 Http Headers 所说的那样，在使用 REST 时通常不推荐使用自定义 HTTP 标头。看看这里以获得很好的解释：

[REST：HTTP 标头或请求参数](https://stackoverflow.com/questions/7944834/rest-http-headers-or-request-parameters)

# java - Math.cos() 给出错误的结果

> ID：12975924
> 
> 赞同：40
> 
> 时间：2012-10-19T14:00:22.247
> 
> 标签：java, math, trigonometry

根据 Wolfram Mathematica： **cos(50)** = *0.6427876096865394*；

但是这段Java代码：

```
 System.out.println(Math.cos(50)); 
```

给出*0.9649660284921133*。

有什么问题`java.lang.Math`？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-19T14:01:58.613

`Math.cos()`期望参数以弧度为单位。这将返回您需要的结果：

```
Math.cos(Math.toRadians(50)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-19T14:02:30.063

[`Math.cos()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#cos%28double%29)使用*弧度*，所以要得到你需要做的预期结果

```
System.out.println(Math.cos(Math.toRadians(50))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T14:02:10.467

度数<>弧度............

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T14:04:29.627

大多数 Java 三角函数期望参数以弧度为单位。您可以使用 Math.toRadians() 进行转换：

```
System.out.println(Math.cos(Math.toRadians(50))); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-19T14:53:36.197

为了我...

```
System.out.println(Math.cos(50));
System.out.println(Math.cos(new Double(50)));
System.out.println(Math.cos(Math.toRadians(50)));
System.out.println(Math.cos(Math.toRadians(new Double(50)))); 
```

返回

0.9649660284921133
0.9649660284921133
0.6427876096865394
0.6427876096865394

[http://www.wolframalpha.com/input/?i=cos%2850deg%29](http://www.wolframalpha.com/input/?i=cos%2850deg%29)

`cos(50deg)`给出与 ... 相同的结果，`cos(50)`因此 Wolfram 默认为度数。

# java - Eclipse J2EE 预览服务器找不到已部署的页面

> ID：12975925
> 
> 赞同：0
> 
> 时间：2012-10-19T14:00:29.707
> 
> 标签：java, eclipse, webserver

我有一个名为的动态 Web 项目`Report`，它利用 Eclipse 采用的默认生成策略。我`hello.jsp`在目录下添加了一个页面`WEB-INF`并部署了 J2EE 预览服务器。当页面在我的浏览器中启动时，我被定向到以下 URL：
`http://localhost:8080/Report`

此页面有两个超链接：

`META-INF`
`WEB-INF`

两者的大小都为零 (0) 字节。我的问题是为什么我无法访问`/Report/hello.jsp`？它会导致 not found 类似地`/Report/WEB-INF/hello.jsp`也会导致 not found 异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:05:51.030

文件`/WEB-INF`和`/META-INF`文件夹用于 MVC 视图文件、模板文件、包含文件、标记文件、配置文件等，而不是用于通过 URL 直接访问的公共 Web 资源。

放置您的`hello.jsp`外部文件夹并改为`/WEB-INF`访问它。`/Report/hello.jsp`

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |    `-- web.xml
 `-- hello.jsp 
```

如果您确实需要将您的 JSP 放在`/WEB-INF`文件夹中（以充当 MVC 视图），那么您需要创建一个前端控制器 servlet，它由`RequestDispatcher#forward()`. 另请参阅[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)以获取启动示例。

# iphone - 关于 UITableViewController 的故事板的建议

> ID：12975927
> 
> 赞同：0
> 
> 时间：2012-10-19T14:00:40.437
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个带有按钮主页的故事板，触摸一个按钮连接到一个带有嵌入式 tableviewcontroller 的导航控制器。当 tableview 出现时，它会填充项目列表。当用户触摸列表中的项目时，我想推送另一个表格视图或详细信息视图。

这是我正在做的事情：

在我的 ListTableViewController 中，我这样做是我的 didSelectRowAtIndexPath：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int row = [indexPath row];
    DSObject * obj = _m_DSObjects[row];

    if (obj.nType == 1)
    {
        ListTableViewController * tvc = [[ListTableViewController alloc]
                                               initWithStyle:UITableViewStylePlain];
        [self.navigationController pushViewController:tvc animated:YES];
    }
    else
    {
        MyDetaisViewController * vc = [[MyDetaisViewController alloc]
                                               initWithStyle:UITableViewStylePlain];
        [self.navigationController pushViewController:vc animated:YES];
    }
} 
```

基本上，如果它是类型 1（另一个列表），那么我想创建另一个 ListViewController，但如果它是类型 2（详细信息），那么我想显示我的详细信息视图。

我的问题是，如果它是一个列表，我的列表不会填充项目。单元格行在那里，但是是空白的，它似乎没有使用我的单元格原型。

如果我做错了，我正在犹豫，并正在寻找有关如何完成我需要的建议。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:24:40.663

由于您已经在使用故事板，因此更好的方法是创建一个从您`ListTableViewController`的新列表控制器到您的详细视图控制器的 segue。

然后你可以改变你`didSelectRowAtIndexPath`的东西是这样的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int row = [indexPath row];
    DSObject * obj = _m_DSObjects[row];

    if (obj.nType == 1)
    {
        // assuming you named your segue "PresentListController"
        [self performSegueWithIdentifier:@"PresentListController" sender:self];
    }
    else
    {   // assuming you named your segue "PresentDetailsController"
        [self performSegueWithIdentifier:@"PresentDetailsController" sender:self];
    }
} 
```

如果您需要将参数传递给其中任何一个，您可以使用`prepareForSegue`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.destinationViewController isKindOfClass:[ListTableViewController class]]) {

        ListTableViewController* listController = (ListTableViewController*)segue.destinationViewController;            
        listController.someParam = someValue;

        return;        
    }

    if ([segue.destinationViewController isKindOfClass:[MyDetailsViewController class]]) {

        MyDetailsViewController* detailsController = (MyDetailsViewController*)segue.destinationViewController;
        detailsController.someOtherParam = someOtherValue;

        return;
    }
} 
```

**编辑：**

您可以使用检查正确的转场`prepareForSegue`来代替检查，这只是另一种检查转场去向的方法。`class``destinationViewController``segue.identifier`

# svg - 如何在 D3 中使用 svg 文件作为图像源

> ID：12975929
> 
> 赞同：13
> 
> 时间：2012-10-19T14:00:51.393
> 
> 标签：svg, d3.js

这是一个问题：

我与 D3 一起工作。尝试将图像添加到节点。渲染文件是 svg 文件：

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"    "http://www.w3.org/Graphics/SVG/1.2/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"     version="1.1" x="0px" y="0px" width="400px" height="400px" viewBox="0 0 400 400" enable-    background="new 0 0 400 400" xml:space="preserve"     xmlns:xml="http://www.w3.org/XML/1998/namespace">
<path fill="#5DD7FC" d="M0.5,262.094c0,0,52.172,79.049,158.323,77.241c68.433-    2.031,165.549-32.296,191.523-132.123  c0,0,27.893,4.742,47.654-16.939c-26.99,3.727-44.944-    4.743-44.944-4.743s35.346-1.017,43.137-21.908  c-20.89,9.035-46.751,1.355-46.751,1.355S337.245,90.22,262.939"/>
</svg> 
```

所以，我正在尝试使用此代码将其连接到图像源（现在直接）：

```
d3GraphWidget._node.append("image")
                .attr("xlink:href", "http://localhost:13980/Areas/Widgets/Content/graphwidgetrelated/img/twittericon.svg")
                .attr("x", -8)
                .attr("y", -8)
                .attr("width", 16)
                .attr("height", 16); 
```

但我没有看到任何渲染，只是一个“空图像图标”。直接去链接的时候，浏览器发现文件没问题。

那么，如何在 D3 中使用 svg 文件作为图像源？

感谢您的任何建议，

亚历克斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T06:24:40.543

我猜你想在 svg 元素上插入 svg 元素，问题是你的代码似乎可以工作：

```
<svg id="svgEmbed"></svg>
<script>
d3.select("#svgEmbed").append("image")
    .attr("xlink:href","https://upload.wikimedia.org/wikipedia/commons/d/d8/Compass_card_(de).svg")
    .attr("width", 100)
    .attr("height", 100)
</script> 
```

如果要使用d3在html元素中插入svg图片，完全一样：

```
<div id="htmlEmbed"></div>
<script>
d3.select("#htmlEmbed").append("img")
    .attr("src","http://upload.wikimedia.org/wikipedia/commons/b/b0/NewTux.svg")
    .attr("width", 100)
    .attr("height", 100)
</script> 
```

jsFiddle：http: [//jsfiddle.net/wnwfn/44/](http://jsfiddle.net/wnwfn/44/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-08T11:51:29.513

@ChristopherChiche 方法的问题在于无法访问 SVG 文件的 DOM，这是使用 SVG 的一个重要（如果不是主要）方面。

看看[Mike Bostock 的这个例子](http://bl.ocks.org/mbostock/1014829)或者[这个](https://stackoverflow.com/questions/21209549/embed-and-refer-to-an-external-svg-via-d3-and-or-javascript)关于 SO 的讨论。

这将是此示例的代码：

```
d3.xml("http://upload.wikimedia.org/wikipedia/commons/b/b0/NewTux.svg").mimeType("image/svg+xml").get(function(error, xml) {
   if (error) throw error;
   d3.select("#svgEmbed").node().appendChild(xml.documentElement);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-02T14:27:38.933

我无法通过@elachell 获得解决方案，但这非常有效（使用 D3 v5）：

```
d3.svg("file.svg").then(function(xml) {
  d3.select("#svgEmbed").node().appendChild(xml.documentElement);
}); 
```

# yacc - 为什么这个语法规则在 Yacc 中不匹配？

> ID：12975933
> 
> 赞同：0
> 
> 时间：2012-10-19T14:01:07.803
> 
> 标签：yacc

编辑：整个代码。现在的问题是我必须在目标生成中使用'：'：这是为玩具c语言生成三个地址代码的代码：它有3个地址代码支持赋值，if和for；问题产生 id if，从目标开始。

**编辑** 我的旧词法分析器代码：

```
%%

"if" return IF;
"else" return ELSE;
"for"  return FOR;
[0-9]+ {strcpy(yylval.dval,yytext);return NUM;}
{CHAR}+({DIGIT}*{CHAR}*)* {strcpy(yylval.dval,yytext);return ID;}

[ \t]+  ;
[\n]    return -1;
. {return yytext[0];}
%% 
```

yacc代码：

```
%{
    #include <stdio.h>
    #include <math.h>
    int yylex(void);
    char p[10]="t",n1[10];
    int n =0;

    %}
    %union
    {
    char dval[10];
    }
    %token IF ELSE FOR
    %left '+' '-'
    %left '*' '/'
    %nonassoc UMINUS

    %token <dval> ID NUM
    %type <dval> S E
    %type <dval> RO
    %%

    goal : IF '(' RO ')' {if_label1();} S ';'{if_label2();} ELSE ':' S ';' {if_label3();}
         | S
         | FOR '(' S ';' {for_label1();} RO ';' {for_label2();} S ')' {for_label3();}  S {for_label4();}  
         ;

    S : ID '=' E {printf(" %s = %s\n",$$, $3);}
      | E 
      ;

    E : ID        {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s\n",$$,$1);}
      | NUM {}    {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s\n",$$,$1);}

      | E '+' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s + %s\n",$$,$1,$3);}
      | E '-' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s – %s\n",$$,$1,$3);}
      | E '*' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s * %s\n",$$,$1,$3);}
      | E '/' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s / %s\n",$$,$1,$3);}
      | '(' E ')' {strcpy($$,p);strcat($$,n1);}

    RO : E '>' E  {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s > %s\n",$$,$1,$3);}
       | E '<' E  {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s < %s\n",$$,$1,$3);}
       | E '==' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s == %s\n",$$,$1,$3);}
       | E '!=' E {n++;sprintf(n1,"%d",n);strcpy($$,p);strcat($$,n1);printf(" %s = %s != %s\n",$$,$1,$3);}
       | E

    ;
    %%

    main()
    {
    yyparse();
    }

    int yyerror (char *s)
    {

    }
    if_label1()
    {
        printf("t%d = not t%d\n", n+1, n);
        printf("if t%d GOTO L1\n",n+1);
    }
    if_label2()
    {
        printf("GOTO L2\n");
        printf("L1 :\n");
    }

    if_label3()
    {
        printf("L2\n");
    }

    for_label1()
    {
        printf("L0:\n");
    }
    for_label2()
    {
        printf("t%d = not t%d\n", n+1, n);
        printf("if t%d GOTO L1\n",n+1);
        printf("GOTO L2:\n");
        printf("L3:\n");    
    }
    for_label3()
    {
        printf("GOTO L0\n");
        printf("L2:\n");
    }

    for_label4()
    {
        printf("GOTO L3\n");
        printf("L1:\n");
    } 
```

上述代码的输出：

```
./a.out
if(a>c)a=b;else:a=c;
 t1 = a
 t2 = c
 t3 = t1 > t2
t4 = not t3
if t4 GOTO L1
 t4 = b
 a = t4
GOTO L2
L1 :
 t5 = c
 a = t5
L2 
```

没有冒号：即：-

```
 goal : IF '(' RO ')' {if_label1();} S ';'{if_label2();} ELSE  S ';' {if_label3();} 
```

输出是

```
./a.out
if(a>c)a=d;else d=s;
 t1 = a
 t2 = c
 t3 = t1 > t2
t4 = not t3
if t4 GOTO L1
 t4 = d
 a = t4
GOTO L2
L1 :
wrong syntax  //which is not expected 
```

我想在 else 之后消除冒号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:25:13.773

我从您的评论中猜测您的词法分析器正在将空格作为标记返回给您的解析器，这意味着由于您的语法没有任何空格 ( `' '`) 标记，因此带有空格的输入不会匹配任何内容。

更常见的安排是让词法分析器不返回空格——忽略它们。所以你有一个 lex/flex 规则，比如：

```
[ \t\n]    ;    /* ignore spaces, tabs, and newlines */ 
```

当然这只是一个猜测，因为您没有提供有关您的词法分析器或它使用的标记的信息。

**编辑**

您还没有发布您的词法分析器代码，但结合以下 flex 词法分析器，您的解析器对我来说可以正常工作：

```
"if"    return IF;
"else"  return ELSE;
"for"   return FOR;
[a-z]+  { strcpy(yylval.dval, yytext); return ID; }
[0-9]+  { strcpy(yylval.dval, yytext); return NUM; }
[ \t\n] ;
.       return *yytext; 
```

```
$ ./a.out
if(a>c)a=d;else d=s;
 t1 = a
 t2 = c
 t3 = t1 > t2
t4 = not t3
if t4 GOTO L1
 t4 = d
 a = t4
GOTO L2
L1 :
 t5 = s
 d = t5
L2 
```

# windows - 在批处理脚本中按日期将文件移动到文件夹

> ID：12975934
> 
> 赞同：1
> 
> 时间：2012-10-19T14:01:09.657
> 
> 标签：windows, batch-file, copy

目前我有一个 7ZIP 命令批处理文件，该文件在今天的日期之前在子目录中 ZIPS 文件，并使用该日期创建一个 zip 文件。

`"c:\Program Files\7-Zip\7z.exe" a x:\Logs\HS\%date:~10,4%%date:~4,2%%date:~7,2%\%date:~10,4%%date:~4,2%%date:~7,2%_HS.zip X:\Logs\HS\%date:~10,4%%date:~4,2%%date:~7,2%* -xr!*.zip`

这是在每个月的每一天完成的

```
c:\20121018\20121018.zip
c:\20121019\20121019.zip 
```

基本上我在同一个目录结构中也有一个 MONTH 文件夹。201210\. 基本上我需要的是将带有今天日期的 zip 文件移动到其相应月份文件夹的任务。这将是未来的每个月。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:49:21.400

基本上你只需要

1.  对于每个文件，从其名称中提取月份和年份部分
2.  如果月份目录不存在，则创建它
3.  将 zip 移动到月份目录

试试这个代码让你开始......

```
for %%a in (*.zip) do (
  set fn=%%a
  set year=!fn:~0,4!
  set month=!fn:~4,2!
  if not exist !year!!month!\nul echo md !year!!month!
  echo move "%%a" "!year!!month!\%%a"
) 
```

测试它，删除 echo 命令，再次测试它......

# c# - 什么时候更细粒度的锁定对性能更好？

> ID：12975935
> 
> 赞同：1
> 
> 时间：2012-10-19T14:01:10.407
> 
> 标签：c#, multithreading, .net-4.0, locking

我最近尝试使用跳过列表数据结构实现并发优先级队列——为了这个问题，如果你不知道什么是跳过列表，我相信只画一个链表就足够了回答。我尝试了最小锁定（即同时允许多个入队和出队，仅在必要时锁定节点或其前向指针，尽快释放锁，使用互锁遍历列表等）。

我对结果很满意。然而，编写一个带有同步根锁的添加和删除的常规跳过列表（即在任何给定时间只允许一个操作），实际上速度是原来的两倍。

我认为我的实现中一定有错误。但是，即使是 Microsoft 网站上列出的“并发优先级队列”，实际上也一次只允许一个操作（即围绕入队和出队的同步根锁定）

[http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1696822056](http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1696822056)

作为一般规则（如果这个问题过于笼统，请原谅我），在什么时候更细粒度的锁定实际上会导致性能提升？我想在我的情况下，因为我实际上必须使用 Interlocked.Exchange 遍历大型列表（有更好的方法吗？）以及多个测试和测试和设置等，这会减慢入队和出队的速度。

此外，是否有工具可以帮助我确定大部分时间都花在了哪里？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:18:50.187

不断检查锁定区域当前是否空闲，设置锁定，然后在离开时释放它会产生开销。如果在实践中，您很少与其他人竞争访问该关键部分，那么您只是无缘无故地执行了该开销。另一方面，如果有大量线程试图使用您的数据结构，那么您可能会发现并行运行操作（如果您有多个核心 CPU）所提高的性能超过了管理锁的开销。

对于这些类型的数据结构，有几十个线程同时尝试使用该数据结构，同时执行通常不需要它们相互等待的操作，这是一种相当罕见的情况。因此，简而言之，您可能会生成测试用例，通过添加线程并正确管理它们都在做什么，从而使较小的锁定用例表现得更好。如果您当前的测试是您实际计划如何使用数据结构的合理表示，那么显然您的使用不会从更复杂的锁定方案中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:09:40.100

您同步的越多，您的应用程序遭受的性能损失就越多。使用 syncroot 可能会导致问题，这不是在复杂情况下的方法。

诀窍是在同步中找到正确的平衡；足以让它可靠，例如没有竞争条件。

看看 System.Collections.Concurrent 命名空间

# visual-studio-2012 - 正确的安装顺序 VS 2012 Express 和 SQL Server 2012 Express

> ID：12975936
> 
> 赞同：4
> 
> 时间：2012-10-19T14:01:11.530
> 
> 标签：visual-studio-2012, sql-server-2012

在没有安装任何 SQL Server 版本的 Win7 64 系统上，我安装了 Visual Studio 2012 for Web。我认为它会给我安装 SQL Server 2012 Express 的选项，但它没有。现在我想在安装 VS 后安装 Server 2012。知道 SQL Server 是在 VS 2012 之前发布的，SQL Server 会识别 VS 2012 并将其集成到其中吗？我不想在VS之前卸载VS来安装SQL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-15T23:21:13.207

是的，有一个特定的顺序。如果您先安装 SQL2012，您将无法在 VS2012 的对象资源管理器中打开 .sql 文件（去过那里，做过）。这是一个通过特殊的“SQL Server Data Tools - 2012 年 12 月更新”修复的错误。可悲的是，此更新不会出现在常规 Windows 更新中（在我的 Windows 8 上），也不会出现在安装 SP1 之前或之后检测到的任何 SQL 更新中。

因此，正确的顺序是：先VS2012，再SQL2012。尤其是在应用服务包时。

资源：

[http://blog.wharton.com.au/category/sql-server-data-tools/](http://blog.wharton.com.au/category/sql-server-data-tools/)

如果您碰巧先安装了 SQL2012，然后安装了 VS2012，您将需要 2012 年 11 月更新来修复您的 .sql 文件：

[http://msdn.microsoft.com/en-us/jj650015](http://msdn.microsoft.com/en-us/jj650015)

更多背景知识...我从 2002 年开始使用 Visual Studio。在安装 Visual Studio 2003、2005、2008、2010 和最近的 2012 之前，我总是安装自己的 SQL Server 20XX 版本。这是因为我从来没有使用 Visual Studio 附带的 SQL Server Express。对于早期版本的 SQL Server Express 施加的 2 GB 限制，我的数据文件太大了。通过首先安装 SQL Server，我可以使用机器上的根实例名称，而不是 SQL Express 在过去十年中接管它。

在 VS2012 和 SQL2012 之前，我从来没有遇到过这个订单的问题。如上面的博客文章所述，在 SQL Server 之前先安装 VS2012。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:04:19.410

它*应该*可以毫无问题地安装，我只是在几周前完全按照相同的顺序进行了安装，首先是 VS 2012，然后是 SQL Server，它完美地工作。

只需按照设置安装和设置 SQL Server，重新启动，您就可以从 VS 的 DB Explorer 进行连接。

如果这不起作用，您最好的选择是从头开始重新安装所有内容。

# android - 使用 gdb 跟踪外国 android 程序或应用程序 - 加载符号？

> ID：12975941
> 
> 赞同：3
> 
> 时间：2012-10-19T14:01:48.347
> 
> 标签：android, gdb, debug-symbols

我正在尝试使用 gdb 来调查我没有任何来源的应用程序。

使用 Android NDK 提供的工具，我已经弄清楚了如何在设备上启动 gdbserver，然后在 PC 上启动正确的 gdbclient，以及如何通过远程模式进行连接。

现在的问题是，如果我尝试在`fopen`属于标准库（如 cstdlib）的方法上设置断点，gdb 会拒绝这样做，因为它会丢失符号文件。

**我在哪里可以找到正确的符号文件（Android NDK 的具体子目录？）以及在远程模式下运行时如何将它们加载到 gdb 中（gdb 命令）？**

PC 平台是 Windows，Android 是运行 4.1.2 的 Galaxy Nexus 手机

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T21:09:03.270

自从我对 gdb 做任何事情以来已经有一段时间了，但是你的问题引起了我的注意。我没有安装 NDK，所以我不能说出文件的位置。但我发现了一些关于加载缺失符号的信息。

本教程看起来有点像您正在尝试做的事情：http: [//marcioandreyoliveira.blogspot.com/2008/03/how-to-debug-striped-programs-with-gdb.html](http://marcioandreyoliveira.blogspot.com/2008/03/how-to-debug-striped-programs-with-gdb.html)

但它假定您构建了二进制文件并且可以使用符号构建一个。我不确定它是否可以仅加载 cstdlib 等，但这是一个开始。

# javascript - 如何 $watch 指令中的多个插值属性？

> ID：12975949
> 
> 赞同：8
> 
> 时间：2012-10-19T14:02:14.337
> 
> 标签：javascript, angularjs, angularjs-directive

我不明白如何在链接函数中同时观察多个属性，所以我创建了一个包含所有参数的对象并观察它。但是我注意到链接函数中的属性是一个字符串而不是一个对象，所以我使用了 angular.fromJson(val)。

[我发现的所有示例都只使用一个参数](https://stackoverflow.com/questions/11913841/accessing-attributes-from-an-angularjs-directive)

您能解释一下如何查看多个属性吗？

谢谢

**编辑**：我不能使用 attrs 参数，因为我需要绑定属性——即它们需要插值。例如

```
<ul class="thumbnails">
    <li class="span3" ng-repeat="image in currentSizeInfo.images" >
       <upload-file info = "{{getInfo($index)}}" foo="foo$index" ></upload-file>
    </li>
</ul> 
```

我认为我必须使用 $watch

```
link:function (scope, element, attrs ) {
    scope.$watch('info', function (val) {
    // if info is and foo is .... do all the stuff
    })
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T14:42:16.050

我不确定我是否完全理解你的问题，所以如果我误解了，请纠正我。只是想从指令的多个属性中提取值吗？假设你有一个这样的 HTML：

```
<my-directive attr1="data1" attr2="data2" attr3="data3" /> 
```

你想得到那些不同属性的值吗？在链接函数中，您只需使用 attrs 参数。例如：

```
link: function(scope, element, attrs) {
    var foo1 = attrs.attr1;
    var foo2 = attrs.attr2;
    var foo3 = attrs.attr3;
} 
```

您还可以使用指令上的范围属性自动将属性绑定到您的范围。请参阅[他们](http://docs.angularjs.org/guide/directive)关于指令的文档。所以，像这样：

```
scope: {
    attr1: '@',
    attr2: '@',
    attr3: '@'
} 
```

然后这些属性会自动出现在您的范围内。但是，[正如我发现的那样](https://stackoverflow.com/questions/12645968/when-do-isolated-scope-properties-actually-get-added-to-the-scope)，这些值并不总是在您期望的范围内。因此，您可以使用该`$watch`功能对它们做您需要的事情。就像是：

```
link: function(scope, element, attrs) {
    scope.$watch("attr1", function () {
         if (scope.attr1)
         {
              //stuff with attr1
         }
    }
    scope.$watch("attr2", function () {
         if (scope.attr2)
         {
              //stuff with attr2
         }
    }
    //....
} 
```

如果你需要同时使用它们，你可以使用一个函数作为第一个参数，`$watch`它返回一个字符串，一旦它们都在那里，你的逻辑就会不同. 所以是这样的：

```
link: function(scope, element, attrs) {
    scope.$watch(function () {
        if (scope.attr1 && scope.attr2 && scope.attr3)
        {
            return "allSet";
        }
        else
        {
            return "";
        }
    }, function (newVal) {
        if ("allSet" == newVal)
        {
            //do stuff with all the properties
        }
    });
} 
```

如果你想将对象绑定到你的作用域中，你可以使用 '=' 而不是 '@'。另一个选项是“&”，它评估父范围内的函数。这在上面链接的指令文档中都有解释。

# php - 基于sql查询创建JSON树结构

> ID：12975950
> 
> 赞同：0
> 
> 时间：2012-10-19T14:02:14.963
> 
> 标签：php, sql, json, zend-framework, tree

我从数据库中简化的表如下：
**ImageContainer**

```
Id Name 
=======
1  A  
2  B  
3  C 
```

**图片**

```
Id ParentId ImageData  
=====================
1  2        sthsth  
2  1        sthsth  
3  1        sthsth 
```

我需要从数据库中获取这些并创建树状结构（我有 4 个这些父子关系的表），然后将其编码为 JSON。我正在使用 PHP + Zend。到目前为止，我的解决方案是为每个表创建查询，将其编码为 JSON，然后手动将子 JSON 插入父 JSON。有没有更好的方法来做到这一点？

到目前为止我试过

```
private function insertAsLastInJson($json, $name, $insert)
{
    if(strlen($json) < 2)
        return '{' . $insert . '}';
    $in = ",\"$name\":$insert";
    return substr($json, 0, strlen($json) - 1) . $in;
} 
```

然后我像这样使用它：

```
$json = Zend_Json::encode($imageContainerRow); //$imageContainerRow contains single 'ImageContainer' row fetched from database
insertAsLastInJson($json, "images", $imagesRows); //$imagesRows contains multiple 'Images' rows fetched from database and encoded to JSON, separated by commas and everything is in beetween [ ]. 
```

示例 JSON 将是：

```
{"Id":1,"Name":"A","Images":[{"Id":2,"ParentId":1,"ImageData":"sthsth"},
{"Id":3,"ParentId":1,"ImageData":"sthsth"}]} 
```

这需要插入一些括号，但总而言之，我让它工作了。有没有更好的方法来做到这一点？

# visual-c++ - 告诉 Visual C++ 在哪里寻找 DLL

> ID：12975960
> 
> 赞同：0
> 
> 时间：2012-10-19T14:03:04.107
> 
> 标签：visual-c++, dll, visual-studio-2005, visual-studio-debugging

我可以在 VC++ Tools->Options->Projects and Solutions 中为头文件和库设置全局搜索目录。

但是 DLL 呢？我可以通过 VC++ 本身来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:11:41.637

不是 VC++ 会搜索 dll，而是您的应用程序会搜索 dll。下面是它的工作原理

您的应用程序在以下文件夹中搜索dll system-system32-windows-path中指定的文件夹-应用程序目录

如果在这些位置中的任何一个都找不到 dll，则会引发错误。

要解决此问题，您始终可以在应用程序本身中指定 dll 的确切路径。有关进一步说明，请参阅此链接[http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx)。

# jquery - 如何添加自定义验证方法？

> ID：12975961
> 
> 赞同：1
> 
> 时间：2012-10-19T14:03:04.620
> 
> 标签：jquery, validation, jquery-validate

我正在开发一个 ASP MVC3 项目，使用验证和不显眼的 jquery。我在页面上有几个区域需要为其创建自定义验证，并确保它不会破坏其他任何内容。目前我有几个部分，每个部分都有一个单选按钮对、一些文本框、一个按钮和一个表格。用户填写文本框，点击按钮，我有一个函数可以将文本框中的数据放入表格的新行中。我还有一个计数器，每次按下按钮都会前进一次。

验证需要遵循“如果单选按钮返回 true，则计数器需要大于 1。

我编写了这个似乎可以工作的函数，但我相信我需要重新编写它，以便将其绑定到现有的验证中，因此需要添加一个方法或规则：

```
$(document).ready(function () {
    $("#nextBtn").click(function () {
         var rows = $("#ROTable tr").length;
          if ($("#RO_Yes").is("checked") && (rows < 3))
          {
             $(this).closest("div.historyCollection").css("backgroundcolor: #ff0000;");
          }
    });
}); 
```

我环顾四周，在 JQUery 网站上发现了一个讨论规则（依赖值）的部分，似乎它可能适合。但是因为我对这些东西还很陌生，所以我想在我朝一个方向看太难之前对专家进行调查。感谢您的阅读。

编辑：我一直在玩，我想出了这个：

第二次编辑：正如 TallMaris 所指出的，ROCounter 选择器是错误的，因此现在已更正，但仍因相同的错误而失败：

```
$(document).ready(function () {
    $("#ROCounter").rules("add", {
        required: ($("#RO-Yes").is(":checked")) && ($('#ROCounter') < 1),
        messages: {
            required: "Please enter further information"
        }
    });
}); 
```

但它破坏了所有验证并导致 jquery.validate.min.js 文件中出现错误：“TypeError：无法读取未定义的属性'form'”。

ROCounter 是一个隐藏字段。如果错误消息附加到此隐藏字段，是否意味着该消息也将被隐藏，所以不显示？这是一些HTML：

```
<div class="formQuestion">
        <div class="editor-field2">
            @Html.RadioButtonFor(m => m.HistoryModel.EverHadRestrainingOrder, true, new { @class = "commentBox", id="RO_Yes" })
                <label for="HistoryModel_ChildAbuseCurrent">Yes</label>
            @Html.RadioButtonFor(m => m.HistoryModel.EverHadRestrainingOrder, false, new { @class = "commentBox", id = "RO_No", @checked = "checked" })
                <label for="HistoryModel_ChildAbuseCurrent">No</label>
        </div>
        <div class="editor-label2">
            @Html.LabelFor(m => m.HistoryModel.EverHadRestrainingOrder)
        </div>

@*  Start Fieldset collection for Restraining Order   *@
   <div class="hidden">
     <fieldset class="historyCollection"> 
       <legend>Please provide the following information</legend>  
        <div class="formGroupHist">
            <div class="editor-label-Hist">
                @Html.Label("Date of Order")
            </div>
            <div class="editor-field-Hist">
                @Html.TextBox("OrderDate-RO", null, new { @class = "dp" })
            </div>
        </div>

        <div class="formGroupHist" style="width: 125px">
            <div class="editor-label-Hist">
                @Html.Label("State")
            </div>
            <div class="editor-field-Hist">
            @Html.DropDownList("State-RO", new SelectList(Model.State, "Value", "Text"), "Select", new { style = "width: 65px;" })
            </div>
        </div>

        <div class="formGroupHist">
            <div class="editor-label-Hist">
                @Html.Label("Name of Protected Party")
            </div>
            <div class="editor-field-Hist">
                @Html.TextBox("ProtectedParties")
            </div>
        </div>            

        <div class="formGroupHist">
            <div class="editor-label-Hist">
                @Html.Label("Explanation of Circumstances")
            </div>
            <div class="editor-field-Hist">
                @Html.TextArea("Comments-RO")
            </div>
        </div>
        <div class="button">
            <button type="button" id="ROButton" class="SKButton">Add Information</button>
        </div>

        <div>
            @Html.HiddenFor(m => m.ROCounter)
        </div>
        <table id="ROTable" class="data-table-page2">
            <tr>
                <th>Date of Order</th>
                <th>State</th>
                <th>Name(s) of Protected Parties</th>
                <th>Explanation of Circumstances</th>
            </tr>
            <tr class="ROTempRow">
                <td colspan=4>No Information Entered.</td>

            </tr>
        </table>
    </fieldset>
</div> 
```

不过，我的主要问题是如何正确地将新的验证规则与现有的验证联系起来。我已经读过，不显眼的首先解析文档以寻找现有的验证，如果找到任何验证，它将不再进行。大部分表单都与“库存”验证相关联，因此我不能将其损坏。一旦我弄清楚了那部分，我可能会弄清楚它的实际规则编码。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:18:20.710

如评论中所述，由于 MVC 的库存验证，“必需”规则已经到位。此外，显然 MVC3 没有用于最小值的股票验证器，但仅适用于 Range ...我建议您将自己的方法添加到验证器对象并将此规则添加到对象中，就像这样（来自[API doc](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)）

```
$.validator.addMethod("min_counter", function (value, el) {
    return value > 1;
}); 
```

然后添加规则。请注意，上述方法的名称重复作为规则和消息对象的键，这就是 validate() 方法如何知道运行什么方法来执行实际验证的方式。

```
$("#ROCounter").rules("add", {
    //this tells validator to evaluate only when the radio is checked. 
    //For example, if you put "true" here, the rule "min_counter" will be evaluated always.
    min_counter: $("#RO-Yes").is(":checked"), 
    messages: {
        min_counter: "Please enter further information"
    }
}); 
```

让我知道这是否适合你。

# java - 在 Java 程序中跟踪时间

> ID：12975964
> 
> 赞同：0
> 
> 时间：2012-10-19T14:03:27.460
> 
> 标签：java, time, linked-list

我想要做的是有一个过程（这只是一个对象），它的值如下：

```
public String name;
public int priority; //not to exceed 4
public int serviceTimeTotal; //holds the cumlitive service time
public int waitTimeTotal; //holds the cumulative wait time
public int arrivalTime;
public int burstTime;
public boolean added;
public boolean active;
public boolean isDone; 
```

而且我想跟踪每个进程获得服务的时间以及每个进程在另一个进程获得服务时等待的时间。我不知道我是否正确地跟踪时间我想要以毫秒为单位的时间，我认为这就是它的内容，我使用 .nanoTime 当我运行它运行的程序但等待时间并没有增加但是正在运行的服务时间确实增加了，所以我认为我做对了所以这就是我的表现

```
 public static void runLevelOne(LinkedList<MyProcess> ll, MyProcess mp)
{
    int start = 0;

    mp.active = true;
   System.out.println("Running Level One Queue");
    //runs for 3 millseconds
    while(start <= 3000)
    {
        //cheak to see if process is over
       if(mp.burstTime <= mp.serviceTimeTotal)
        {
            mp.isDone = true;
            System.out.println(mp.name + " has completed its task");
            mp.active = false;
            //get rid of it from the queue
            ll.remove(mp);
            break;

        }

        try {
            //run proccess
            Thread.sleep(3);
        } catch (InterruptedException ex) {
            Logger.getLogger(PartATwo.class.getName()).log(Level.SEVERE, null, ex);
        }

        start += System.nanoTime()/ 1000000;
        mp.serviceTimeCalculator(start);
        mp.calculatePriority();
        //make all other proccesses in ll wait
        for(MyProcess s :ll)
        {
            s.waiting(start);
            System.out.println(s.name+  " wait time: " + s.waitTimeTotal);
        }
        System.out.println(mp.name + " new priority is: " + mp.priority);
    }
    mp.active = false;

} 
```

这会运行进程，然后计算链表中每个进程的服务时间、优先级和等待时间。

在 MyProcess 类中，我计算这样的优先级

```
public int calculatePriority()
{
    System.out.println("Starting Priority " + priority);
    System.out.println("service time " + serviceTimeTotal);
    System.out.println("waitTimeTotal " + waitTimeTotal);

    priority = (serviceTimeTotal + waitTimeTotal) / serviceTimeTotal;
    if(priority <= 1.5)
    {
        priority = 1;
    }
    if(priority > 1.6 && priority <= 2.5 )
    {
        priority = 2;
    }
    if(priority > 2.6 && priority <= 3.5)
    {
        priority = 3;
    }
    if(priority > 3.6 && priority > 3.5)
    {
        priority = 4;
    }
    return priority;
} 
```

和这样的服务时间和等待时间

```
 public  void waiting(int time)
{
    if(active = false)
    {
        waitTimeTotal += time;
    }
}
 public void serviceTimeCalculator(int time)
{
    serviceTimeTotal += time;
} 
```

这种接缝应该可以工作，但不能。我在这里遗漏了什么吗谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:11:14.493

首先，使用 a`long`而不是 an`int`来保存时间值，即使您将它们分开。

然后，您需要使用`System.getNanos()`too 设置开始时间，而不是将其设置为`0`. 执行以下操作：

```
long start = System.getNanos() / 1000000;
long end = start;
while (end - start < 3000) {
    ...
    end = System.getNanos() / 1000000;
} 
```

# android - 在 onTouchEvent 期间检测到没有移动

> ID：12975968
> 
> 赞同：2
> 
> 时间：2012-10-19T14:03:40.080
> 
> 标签：android, touch-event

我目前正在开发一个 Android 应用程序，该应用程序允许用户在屏幕上左右移动手指时演奏小提琴。当他们停止移动手指并且小提琴的弓停止移动时，我希望音乐停止播放。

我正在使用典型的 onTouchEvent 来捕获移动手势，现在我想知道检测用户的最佳方法是用户仍在触摸屏幕，但没有移动他们的手指。

这是我目前的代码，带有一个非常意大利面的功能来检测运动量，这会遇到以下两个问题：

1：当用户从左向右移动时，它会在瞬间将其注册为没有移动并停止声音。

2：你的手指不可能完全静止，我需要允许少量的动作。

任何人都可以提出比以下检测缺乏运动的正确方法吗？

```
public boolean onTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {

        audio.start();
        bowImage.setY(430);

    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {

        float posX = event.getX();

        if ( detectValidMovement(posX) ) {
            bowImage.setX(posX);
            audio.start();
        } else {
            audio.pause();
        }

    } else if (event.getAction() == MotionEvent.ACTION_UP) {

        audio.pause();

    }
    return true;
}

private boolean detectValidMovement(float posX) {

    int newX = Math.round(posX);

    if (oldX > 0) {

        int distanceMoved = newX - oldX;

        if (oldX != newX) {
            oldX = newX;
            return true;
        } else {
            oldX = newX;
            return false;
        }
    } else {
        oldX = newX;
    }
    return false;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:03:43.487

还有其他因素在起作用。[似乎有](https://stackoverflow.com/questions/6785068/android-action-move-threshold)一个大约 10 像素的默认触摸“斜率”。这意味着`onTouchEvent`不会为低于该阈值的任何内容触发。因此，您需要确定它们是否在完全不依赖的情况下停止`onTouchEvent`。一种方法是在`lastTouched`每次运行时设置一个来设置时间，并运行一个计时器循环来检查它与当前时间的对比。

现在，如果您想要一个高于 10px 的阈值，您还必须自己安排。就像是：

```
final int threshold = 25;

private boolean detectValidMovement(float posX) {

    int newX = Math.round(posX.getX());
    double distance = Math.abs(newX - oldX);
    oldX = newX;
    if(distance < threshold)
        return false;

    return true;
} 
```

请注意使用`Math.abs()`来检查两个方向，并且这只检查 X 运动。我假设这就是您从代码示例中关心的全部内容。

这就是你需要的那部分。检查`oldX > 0`没有多大意义，因为移动无关紧要。检查`oldX != newX`由 覆盖`distance < threshold`，因此您可以摆脱它。

更棘手的部分是设置计时器以防`onTouchEvent`不触发。

# c#-4.0 - 是否可以将 .edmx 模型输出目录设置为解决方案中的其他项目？

> ID：12975972
> 
> 赞同：0
> 
> 时间：2012-10-19T14:03:49.643
> 
> 标签：c#-4.0, entity-framework-4.1, asp.net-mvc-4, .net-4.5

我需要在我的 Data 项目中有我的 .edmx 文件，在我的 Data.Model 项目中有它生成的模型。是否可以？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:22:41.520

您是否使用 EF DbContext Generator 来生成代码优先模型？如果是这样，您可以`.edmx`像往常一样构建文件。创建并生成模型后，将 MyContext.tt 模板移动到您的 Data.Models 项目`MyContext.Context.tt`中（将您的文件与您的`.edmx`.

之后，打开`Context.tt`并在顶部附近将 inputFile 更改为 Data.Model 项目的相对路径。它最终会是这样的：

> 字符串 inputFile = @"../MyProject.Data.Model/MyDataModel.edmx";

返回到您`MyContext.Context.tt`的 .Data 项目并将 CustomToolNamespace 属性更改为**Data.Model**

从那时起，当您对`.edmx`文件进行更改时，您还必须进入 Data.Model 项目并再次保存以`MyContext.tt`重新生成模型。

# sql-server - NONEMPTY 在这里工作到底有多准确？

> ID：12975973
> 
> 赞同：1
> 
> 时间：2012-10-19T14:03:50.733
> 
> 标签：sql-server, ssas, mdx, olap

我有一个带有两个度量值组的多维数据集，一个是 MOLAP 格式，另一个是 ROLAP 格式。我还从每个成员组（ **MOLAP**和**ROLAP**`[C]` ）中的单个列创建了一个计算成员 ( )。我想要的只是返回我的值，如果它不为空，否则返回。这很容易通过以下语句实现：`[A]` **`[B]` **`[C]``[A]``[B]``CASE`****

 ****```
WITH MEMBER [C] AS
    CASE
        WHEN ISEMPTY([A]) THEN [B]
        ELSE [A]
    END 
```

这很好用，运行以​​下查询显示的结果与我期望的完全一样，其中`[C]`只有`[B]`当`[A]`为空时。

```
SELECT
    { [A]
    , [B]
    , [C]
    } ON COLUMNS
    , [Time].CHILDREN ON ROWS
FROM    
    [Cube] 
```

但是，在某些情况下`[A]`和`[B]`都是空的，我想将它们从结果集中过滤掉。通常，我可以只包装`[Time]`尺寸`NONEMPTY`来实现这一点：

```
SELECT
    { [A]
    , [B]
    , [C]
    } ON COLUMNS
    , NONEMPTY([Time].CHILDREN) ON ROWS
FROM    
    [Cube] 
```

但是当我用上面的查询尝试这个时，结果会过滤掉所有为空的行`[A]`，无论是否`[B]`为空。为空的行`[B]`不会被过滤掉。

我希望 NONEMPTY 会：

1.  只过滤掉空的行`[C]`（`[A]`并且`[B]`是空的）**或**
2.  过滤掉所有`[A]`OR`[B]`为空的行

为什么`NONEMPTY`只考虑`[A]`到这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:42:49.517

有`NonEmpty`功能和`NON EMPTY`关键词。他们没有相同的行为。

如果你写：

```
NON EMPTY [Time].CHILDREN ON ROWS 
```

它将删除空行。

该`NonEmpty`函数不考虑其他轴。我们称其`h1`为 [A]、[B] 和 [C] 的层次结构。在您的情况下，`NonEmtpy`是根据`h1`.

为您查询

```
NONEMPTY([Time].CHILDREN) ON ROWS 
```

相当于

```
NONEMPTY([Time].CHILDREN, {[h1].DefaultMember}) ON ROWS 
```

以下查询应该可以帮助您了解发生了什么：

```
SELECT
    { [A]
    , [B]
    , [C]
    , [A].Hierarchy.DefaultMember
    } ON COLUMNS
    , [Time].CHILDREN ON ROWS
FROM    
    [Cube] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T15:27:17.847

我想知道措施 [B]。是计算出来的吗？显然 SSAS 的默认行为是忽略集合函数中的计算度量。NONEMPTY 是一个集合函数。将 Time 维度包装在 AddCalculatedMembers 函数中会发生什么？

```
SELECT
    { [A]
    , [B]
    , [C]
    } ON COLUMNS
    , NONEMPTY(AddCalculatedmeasures([Time].CHILDREN)) ON ROWS
FROM    
    [Cube] 
```

我还想知道如果您明确告诉 NONEMPTY 函数要过滤哪些措施，它是否会更好。也许您的 ROLAP 度量值组有其他度量值，即使 [B] 为空，它们也不会随着时间的推移而为空。记住 NONEMPTY 和 NON EMPTY 之间的区别。

```
SELECT
    { [A]
    , [B]
    , [C]
    } ON COLUMNS
    , NONEMPTY([Time].CHILDREN, [C]) ON ROWS
FROM    
    [Cube] 
```****

# php - php特殊字符不解码

> ID：12975979
> 
> 赞同：-1
> 
> 时间：2012-10-19T14:04:28.347
> 
> 标签：php, special-characters, html-entities

我通过表单输入在 teo php 页面之间传递了一些字符串。字符串具有 HTML 特殊字符（á、é、í、ó、ú、ñ），我需要它们正确显示。

这是我的表格：

```
<form action="test.php"> <input type="text" name="message" style="" value="" /> </form> 
```

这是test.php：

```
$message=htmlentities($_POST['message']); 
```

我的目标是实现 $message 包含与输入方式完全相同的特殊字符：例如，如果表单中的字符串是：'áñ' 我想要 $message ='áñ' 而不是它们的 html 等价物，“ `&aacute;&ntilde;`”

编辑：

为了完全清楚，如果我这样做：

回声 $message=htmlentities($_POST['message']);

浏览器正确显示 áñ，但 php 变量包含“ `&aacute;&ntilde;`”。我希望 php 变量是 áñ，而不是“ `&aacute;&ntilde;`”；

iv 尝试应用 htmlspecialchars_decode；utf8_decode 和其他一些 php 函数，绝对没有运气。有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:15:10.263

确保在包含表单的 HTML 页面中添加正确的字符集。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head> 
```

如果您使用的是 PHP 页面，请将以下内容放在文件顶部：

```
header('Content-type: text/html; charset=utf-8'); 
```

# c# - LINQ 包含查询自定义排序

> ID：12975982
> 
> 赞同：2
> 
> 时间：2012-10-19T14:04:32.263
> 
> 标签：c#, linq

我有一个 LINQ 查询，它可以获取代码包含在列表中的所有结果。这很好用，但是我需要按照代码列表保持顺序。因此，当返回 EnumerableRowCollection 时，行的顺序与列表中的顺序相同。

这是我当前的代码：

```
if (productcodes != "")
{
    string[] pcodes = productcodes.Split('|');

    // Get most recently viewed first
    Array.Reverse(pcodes);

    List<int> prodCodes = new List<int>();

    foreach (string pc in pcodes)
    {
        if (pc != "")
        {
            prodCodes.Add(Convert.ToInt32(pc));
        }
    }

    results = results.Where(d => d["ProductCode"] != DBNull.Value && (int)d["ID"] > 0 && prodCodes.Contains((int)d["ProductCode"])).Select(d => d);
} 
```

所以我需要 EnumerableRowCollection 结果的排序与它们在 List prodCodes 中的排序相同，而不是它自己的随机顺序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:13:20.063

这就是你所需要的：

```
IEnumerable<int> pcodes = productcodes.Split('|')
   .Where(s => !string.IsNullOrWhiteSpace(s))
   .Select(s => int.Parse(s))
   .Reverse();

var result = from code in pcodes
             join row in results on code equals row.Field<int>("ProductCode")
             select row; 
```

最后的连接按照第一个序列（pcode）的顺序，并且仅包含`ProductCodes`在“内部连接”上连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:15:29.607

假设 prodCodes 是唯一的，您可以将它们投影到映射中：

```
Dictionary<int, int> orderMap = prodCodes
  .Select( (val, i) => new {val, i} )
  .ToDictionary(x => x.val, x => x.i); 
```

然后您可以使用 orderMap 对结果进行排序：

```
var results = GetSomeResults();
results = results.OrderBy(row => orderMap[(int)row["ProductCode"]]); 
```

# php - 使用 PHP 中的 JSON 数组加载后创建 HTML

> ID：12975984
> 
> 赞同：1
> 
> 时间：2012-10-19T14:04:38.407
> 
> 标签：php, javascript, json

这是我的第一篇文章，我并不是真正的开发人员（更像是一个热心的修补匠）。

我正在尝试根据从 MySQL 数据库中获取的信息在网站上创建一些旋转文本（可见项目每 10 秒左右用 JQuery 切换一次）。

目前，我在页面加载完成后应用旋转 JQuery 函数之前直接从 MySQL 结果创建 HTML。我遇到的问题是，预先创建/呈现 HTML 会减慢页面加载时间，而其他元素会在创建的 HTML 后面进行备份。

即使在加载文档之前没有运行 Javascript 也会发生这种情况（我也知道数据库查询需要几毫秒。）我已经通过强制查询返回 1 行、10 行、所有行来隔离问题等注意到每次更改都会导致页面加载时间变慢。

呈现的 HTML 看起来像这样：

```
<div id="container">
    <div class="item">
        <span class="field1">row 1 field 1</span>
        <span class="field2">row 1 field 2</span>
    </div>
    <div class="item">
        <span class="field1">row 2 field 1</span>
        <span class="field2">row 2 field 2</span>
    </div>
    <div class="item">
        <span class="field1">row 3 field 1</span>
        <span class="field2">row 3 field 2</span>
    </div>
    ...
</div> 
```

我的解决方案（对替代建议感到高兴）是先渲染第一行，然后在页面加载后创建其余的行（旋转有 10 秒的延迟，这应该是足够的时间）。

这样做的另一个好处是，在 JQuery 元素开始旋转过程之前，附加内容不会使我的页面变得一团糟（我可以解决这个问题，但是两只鸟，一块石头等）

我在这个论坛上找到了一个从 MySQL 数据创建 JSON 数组的帖子：

```
<?php
$result=mysql_query("SELECT * FROM my_table");

$my_result_array=array();
while($row = mysql_fetch_array($result,MYSQL_ASSOC)){
    array_push($my_result_array,$row);
    }

$json_array = json_encode($my_result_array);
?> 
```

在这一点上，我现在卡住了。我在这个论坛上找到了一些更有用的输入，用于在加载后创建必要的 HTML 对象：

```
var t = $.template('<div class="item"><span class="field1">${field1}</span><span class="field2">${field2}</span></div>');

$(selector).append( t , {
 dataPart1: jsonObj.field1,
 dataPart2: jsonObj.field2
}); 
```

我不清楚的一点（我对 Javascript 和 JSON 知之甚少）是我如何从我在 PHP 中创建的数组文本到最后一部分，它有一个可以迭代的对象。

非常感谢所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:11:25.053

你需要从 javascript 做一个 AJAX 帖子：

```
$.post('file.php', {},
      function(data) {
            //the data variable holds the json returned from PHP
            //parse it
        var jsonObj= $.parseJSON(data);
            //then use it like an object
            $(selector).append( t , {
            dataPart1: jsonObj.field1,
            dataPart2: jsonObj.field2
          });
}); 
```

服务器端您需要回显您的 json 变量：

**文件.php**

```
$my_result_array=array();
while($row = mysql_fetch_array($result,MYSQL_ASSOC)){
    array_push($my_result_array,$row);
    }

$json_array = json_encode($my_result_array);
echo $jsonArray;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:07:30.517

如果您想加快页面加载速度，您需要使用 AJAX 加载该数据。（请注意，这种方式的数据在页面加载时将不可用，因此在 AJAX 运行时会出现空白）。

# .htaccess - Apache mod_rewrite 规则禁用 https/ssl 除了某些页面

> ID：12975992
> 
> 赞同：1
> 
> 时间：2012-10-19T14:05:56.757
> 
> 标签：.htaccess, mod-rewrite, https, url-rewriting, rewrite

我有一个网站在浏览某些页面时触发 HTTPS，我想在不浏览这些页面时恢复到 HTTP，这是我的 htaccess：

```
<IfModule mod_rewrite.c>

  RewriteEngine on
  #RewriteBase /myproject/

  # toggle www prefix
  RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

  # redirect favicon requests to the correct favicon.ico
  RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC]
  RewriteCond %{THE_REQUEST} favicon\.(ico|png|gif|jpe?g) [NC]
  RewriteRule (.*) http://mysite/favicon.ico [R=301,L]

  # hide index.php from root
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
  RewriteRule ^ /%1 [R=301,L]

  # disable HTTPS when not needed
  RewriteCond %{HTTPS} on
  #RewriteCond %{HTTP_REFERER} !^(https)(.*)$
  RewriteCond %{REQUEST_URI} !^(.*)/(exception|xyz|pqr)(.*)$ [NC]
  RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # if a directory or a file exists, use it directly
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # otherwise forward it to index.php
  RewriteRule . index.php [L,QSA]
  #RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA]

</IfModule> 
```

如果我调用`https://host/url`重定向工作正常登陆到`http://host/url`，但如果我调用`https://host/exception`而不是保持原样，我将被重定向到`http://host/index.php`

怎么了？谢谢

* * *

**更新解决方案**，希望对某人有用

```
<IfModule mod_rewrite.c>

  RewriteEngine on
  #RewriteBase /yourbase

  # hide index.php from root
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
  RewriteRule ^ /%1 [R=301,L]

  # pass-through so when the rules loop (https), the redirect to index won't get applied
  RewriteRule index.php$ - [L]

  # toggle www prefix
  RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

  # redirect favicon requests to the correct favicon.ico
  RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC]
  RewriteCond %{THE_REQUEST} favicon\.(ico|png|gif|jpe?g) [NC]
  RewriteRule (.*) http://liberos.it/favicon.ico [R=301,L]

  # disable HTTPS when not needed (but don't rewrite direct files requests)
  RewriteCond %{HTTPS} on
  #RewriteCond %{HTTP_REFERER} !^(https)(.*)$
  RewriteCond %{REQUEST_URI} !^(.*)/(yourpath|another/path)(.*)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d [OR]
  RewriteCond %{REQUEST_URI} .
  RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # if a directory or a file exists use it directly, otherwise forward it to index.php
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . index.php
  #RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:52:24.970

由于您正在通过 路由所有内容`index.php`，因此您需要创建一个传递，因此当规则循环时，不会应用重定向。尝试将此规则添加到规则列表的最顶部：

```
RewriteRule index.php$ - [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:38:00.087

```
<IfModule mod_rewrite.c>

  RewriteEngine on
  #RewriteBase /yourbase

  # hide index.php from root
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
  RewriteRule ^ /%1 [R=301,L]

  # pass-through so when the rules loop (https), the redirect to index won't get applied
  RewriteRule index.php$ - [L]

  # toggle www prefix
  RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

  # redirect favicon requests to the correct favicon.ico
  RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC]
  RewriteCond %{THE_REQUEST} favicon\.(ico|png|gif|jpe?g) [NC]
  RewriteRule (.*) http://liberos.it/favicon.ico [R=301,L]

  # disable HTTPS when not needed (but don't rewrite direct files requests)
  RewriteCond %{HTTPS} on
  #RewriteCond %{HTTP_REFERER} !^(https)(.*)$
  RewriteCond %{REQUEST_URI} !^(.*)/(yourpath|another/path)(.*)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d [OR]
  RewriteCond %{REQUEST_URI} .
  RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # if a directory or a file exists use it directly, otherwise forward it to index.php
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . index.php
  #RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA]

</IfModule> 
```

# wpf - 如何解决 XAML 中的这个拉伸问题？

> ID：12975996
> 
> 赞同：3
> 
> 时间：2012-10-19T14:06:06.430
> 
> 标签：wpf, silverlight, xaml

我有以下 XAML（简化）：

```
<Grid x:Name="parentGrid">
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <Grid Grid.Row="0">
        <!-- content which fits its parent grid -->
    </Grid>

    <Grid Grid.Row="1">
        <!-- content which fits its parent grid -->
    </Grid>

    <Grid Grid.Row="2">
        <!-- content which fits its parent grid -->
    </Grid>

    <Grid Grid.Row="3">
        <!-- content which fits its parent grid -->
    </Grid>
</Grid> 
```

这是一个可配置的容器，它包含一到四个我们的对话框。这个容器被重用了很多，包含的对话框的数量总是不同的。

要求是，如果只有一个对话框（所以只有第一个网格被填充），它应该延伸到整个父网格。如果填充了两个网格，则每个容器应填充父网格的一半。如果有三个......等等。

我无法使用它`<RowDefinition Height="Auto"/>`（无论如何默认）和`<RowDefinition Height="*"/>`. 例如，如果只有一个 Grid 填充，它不适合整个父网格。如果我删除三个`RowDefinitions`，它虽然有效。

附加信息：未填充的网格可见性始终设置为`Visibility.Collapsed`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:19:07.847

我总是发现，如果你想隐藏一个列或行，你可以像这样绑定一个属性：

```
<Grid x:Name="ParentGrid">
    <Grid.RowDefinitions>
        <RowDefinition Height="{Binding GridRow0}" />
        <RowDefinition Height="{Binding GridRow1}" />
        <RowDefinition Height="{Binding GridRow2}" />
        <RowDefinition Height="{Binding GridRow3}" />
    </Grid.RowDefinitions>
<-- grid contents -->
</Grid> 
```

设置如下属性：

```
Public Property GridRow0 as GridLength = New GridLength(GridUnitType.Star)
Public Property GridRow1 as GridLength = New GridLength(GridUnitType.Star)
Public Property GridRow2 as GridLength = New GridLength(GridUnitType.Star)
Public Property GridRow3 as GridLength = New GridLength(GridUnitType.Star) 
```

然后，当您确定需要多少行时，您可以执行类似将计数传递给过程的操作：

```
Public Sub FixRows(count as Integer)
    Select Case count
        Case 1
            GridRow3 = New GridLength(0)
            GridRow2 = New GridLength(0)
            GridRow1 = New GridLength(0)
            GridRow0 = New GridLength(GridUnitType.Star)
        Case 2
            GridRow3 = New GridLength(0)
            GridRow2 = New GridLength(0)
            GridRow1 = New GridLength(GridUnitType.Star)
            GridRow0 = New GridLength(GridUnitType.Star)
        Case 3
            GridRow3 = New GridLength(0)
            GridRow2 = New GridLength(GridUnitType.Star)
            GridRow1 = New GridLength(GridUnitType.Star)
            GridRow0 = New GridLength(GridUnitType.Star)
        Case 4
            GridRow3 = New GridLength(GridUnitType.Star)
            GridRow2 = New GridLength(GridUnitType.Star)
            GridRow1 = New GridLength(GridUnitType.Star)
            GridRow0 = New GridLength(GridUnitType.Star)
        Case Else
            'Whatever is needed
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:37:33.330

我最终创建了一个`CustomPanel`和几个`NestedCustomPanel`s。后者提供了不同的行为，例如，一个只是用来容纳一个可配置的容器，另一个是在屏幕上均匀地排列多个容器。

在运行时读取配置并在后面的代码中创建和添加要添加的某些部分。

这种方式为我可以获得的每个可能的配置提供了自定义行为。为了将这一点反映在我在开始文章中提供的代码中：`RowDefinitions`添加的内容与配置中可用的容器一样多。