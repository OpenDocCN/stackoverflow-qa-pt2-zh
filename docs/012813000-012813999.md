# StackOverflow 问答 12813000-12813999

# wcf - 调用受 ACS 保护的 WCF 服务，该服务使用 ADFS 作为 IDP

> ID：12813003
> 
> 赞同：1
> 
> 时间：2012-10-10T06:09:00.603
> 
> 标签：wcf, saml, claims-based-identity, acs, adfs2.0

[在这篇文章之后，](http://bit.ly/VNwCwk)我创建了一个 WCF 客户端，它：

1.  使用 ADFS 针对 AD 对用户进行身份验证。
2.  向调用者提供 SAML2 票证。
3.  使用提供的 SAML2 票证调用 WCF 服务。

这很好用，但是我的问题的下一部分是扩展它以使用 Azure ACS。

我将 RP 添加到 ACS，并将 STS 引用更改为指向`Add STS Reference`在 Visual Studio 中使用的 ACS。

我扩展了该`Token.GetToken`方法，将令牌提供到以下方法中：

```
public static SecurityToken GetToken(SecurityToken adfsToken, string appliesTo, string idpEndpointAddress, out RequestSecurityTokenResponse rsts)
{
    WS2007HttpBinding binding = new WS2007HttpBinding();
    binding.Security.Message.EstablishSecurityContext = false;
    binding.Security.Mode = SecurityMode.TransportWithMessageCredential;

    WSTrustChannelFactory trustChannelFactory = new WSTrustChannelFactory(binding, new EndpointAddress(idpEndpointAddress));
    trustChannelFactory.TrustVersion = TrustVersion.WSTrust13;
    trustChannelFactory.ConfigureChannelFactory();

    // Create issuance issuance and get security token 
    RequestSecurityToken requestToken = new RequestSecurityToken(WSTrust13Constants.RequestTypes.Issue);
    requestToken.AppliesTo = new EndpointAddress(appliesTo);
    WSTrustChannel tokenClient = (WSTrustChannel)trustChannelFactory.CreateChannelWithIssuedToken(adfsToken);
    SecurityToken token = tokenClient.Issue(requestToken, out rsts);
    return token;
} 
```

到以下端点：

```
https://test.accesscontrol.windows.net/v2/wstrust/13/issuedtoken-symmetric 
```

但我得到以下异常：

> 无法打开安全通道，因为与远程端点的安全协商失败。这可能是由于用于创建通道的 EndpointAddress 中缺少或错误指定了 EndpointIdentity。请验证 EndpointAddress 指定或暗示的 EndpointIdentity 是否正确标识了远程端点。

除了内部例外：

> ACS10001：处理 SOAP 标头时发生错误。

1.  我需要在 ACS 中配置哪些内容才能使用 ADFS 提供的令牌？
2.  我需要使用 ACS 提供的令牌，还是可以在服务中使用 ADFS 提供的令牌？（它似乎正在工作..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:10:34.250

查看[链接](http://msdn.microsoft.com/en-us/library/hh127796.aspx)的ACS 示例，它似乎完全按照您的要求进行。

# php - 为什么我的 MySQL 数据没有显示在我的表中？

> ID：12813011
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:09:54.683
> 
> 标签：php, mysql, html-table

为什么我的 MySQL 数据没有显示在我的表中？一切似乎都很好，只是我的数据（这是鸟类名称列表等）没有显示出来。我需要一些新的眼光，才能看到我的错误在哪里，是的，我知道可能有更简单的方法可以做到这一点，但这是我的任务所必需的，所以请不要提供其他方法来做到这一点。我需要的只是帮助让我的数据填充到 HTML 表中。我的PHP代码如下：

PHP 代码

```
<?php
    $pageTitle = 'Mod06 Pagination| Jason McCoy ';
    include('includes/header.inc.php');
    include ('includes/db_connect.inc.php');

    $display = 8;

    // Determine how many pages there are...

    if (isset($_GET['p']) && is_numeric($_GET['p'])) { // Already been determined.
        $pages = $_GET['pages'];
    } else { 
        $query = "SELECT COUNT(birdID) FROM birds";
        $result = @mysqli_query($dbc, $query);
        $row = @mysqli_fetch_array($result, MYSQLI_NUM);
        $records = $row[0];
    }

    // Calculate the number of pages...

    if ($records > $display) { 
        $pages = ceil($records/$display);
    } else {
        $pages = 1;
    }

    // Determine where in the database to start returning results...

    if (isset($_GET['s']) && is_numeric($_GET['s'])) {
        $start = $_GET['s'];
    } else {
        $start = 0;
    }

    // Sort the columns 
    // Default is birdID

        $sortDefault = 'birdID';

        // Create an array for the columns

        $sortColumns = array('birdID', 'nameGeneral', 'nameSpecific', 'populationTrend');

        // Define sortable query ASC DESC

        $sort =  (isset($_GET['sort'])) && in_array($_GET['sort'], $sortColumns) ? $_GET['sort']: $sortDefault;
        $order = (isset($_GET['order']) && strcasecmp($_GET['order'], 'DESC') == 0) ? 'DESC' : 'ASC';

        // Run the query 

    $query = "SELECT birdID, nameGeneral, nameSpecific, populationTrend FROM birds ORDER BY $order LIMIT $start, $display";
    $result = @mysqli_query($dbc, $query);       
?>

    <!-- Table header: -->
    <table align="center" cellspacing="0" cellpadding="5" width="80%">
        <tr>
            <th><a href='index.php?sort=birdID&order=<?php echo $order == 'DESC' ? 'ASC' : 'DESC' ?>'>Bird<?
                            if($_GET["order"]=="ASC" && $_GET["sort"]=="birdID"){
                                echo '<img src="images/downArrow.jpg" id="birdASC" name="birdASC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                            } else {
                    echo '<img src="images/upArrow.jpg" id="birdDESC" name="birdDESC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                }?></a></th>
            <th><a href='index.php?sort=nameGeneral&order=<?php echo $order == 'DESC' ? 'ASC' : 'DESC' ?>'>General Name<?
                            if($_GET["order"]=="ASC" && $_GET["sort"]=="nameGeneral"){
                                echo '<img src="images/downArrow.jpg" id="nameGeneralASC" name="nameGeneralASC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                            } else {
                    echo '<img src="images/upArrow.jpg" id="nameGeneralDESC" name="birdDESC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                }?></a></th>
            <th><a href='index.php?sort=nameSpecific&order=<?php echo $order == 'DESC' ? 'ASC' : 'DESC' ?>'>Name Specific<?
                            if($_GET["order"]=="ASC" && $_GET["sort"]=="nameSpecific"){
                                echo '<img src="images/downArrow.jpg" id="nameSpecificASC" name="nameSpecificASC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                            } else {
                    echo '<img src="images/upArrow.jpg" id="nameSpecificDESC" name="birdDESC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                }?></a></th>
            <th><a href='index.php?sort=populationTrend&order=<?php echo $order == 'DESC' ? 'ASC' : 'DESC' ?>'>Population Trend<?
                            if($_GET["order"]=="ASC" && $_GET["sort"]=="populationTrend"){
                                echo '<img src="images/downArrow.jpg" id="populationTrendASC" name="populationTrendASC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                            } else {
                    echo '<img src="images/upArrow.jpg" id="populationTrendDESC" name="birdDESC" style="margin:-15px 0 0 13px;" width="18px" height="18px">';
                }?></a></th>
        </tr>
<?php

    // Display the database results in the table...

    while ($row = @mysqli_fetch_array($result, MYSQL_ASSOC)) {
        echo '<tr>
            <td align="left">$row[birdID]</td>
            <td align="left">$row[nameGeneral]</td>
            <td align="left">$row[nameSpecific]</td>
            <td align="left">$row[populationTrend]</td>
         <tr>';
    } 

    echo '</table>';    
    mysqli_close($dbc);

    // Make the links to other pages, if necessary.
    if ($pages > 1) {
        echo '<br /><p>';
        $currentPage = ($start/$display) + 1;
    // If it's not the first page, make a Previous button:
    if ($currentPage != 1) {
        echo '<a href="index.php?s=' . ($start - $display) . '&pages=' . $pages . '&sort=' . $sort . '">Previous</a> ';
    }
    // Make all the numbered pages:
    for ($i = 1; $i <= $pages; $i++) {
        if ($i != $currentPage) {
            echo '<a href="index.php?s=' . (($display * ($i - 1))) . '&pages=' . $pages . '&sort=' . $sort . '">' . $i . '</a> ';
        } else {
            echo $i . ' ';
        }
    } // End of FOR loop.

    // If it's not the last page, make a Next button:
    if ($currentPage != $pages) {
        echo '<a href="index.php?s=' . ($start + $display) . '&pages=' . $pages . '&sort=' . $sort . '">Next</a>';
    }

    echo '</p>'; 

} 

    include('includes/footer.inc.php');
?>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:14:23.200

`"`像这样在 echo 中使用，因为没有显示来自数据库的值，所以您已经使用过`'`。

```
while ($row = @mysqli_fetch_array($result, MYSQL_ASSOC)) {
    echo "<tr>
        <td align=\"left\">$row[birdID]</td>
        <td align=\"left\">$row[nameGeneral]</td>
        <td align=\"left\">$row[nameSpecific]</td>
        <td align=\"left\">$row[populationTrend]</td>
     <tr>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:17:03.777

把这个改成`$row[birdID]`for `$row['birdID']` all，你错过了`''`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:21:27.407

对不起，如果有点简洁，从手机打字......

'$行[鸟ID]'

其他部分应正确改写为：

'$row['birdID']'

因为birdID 是一个字符串，而不是一个变量名。

尽管 PHP 将其用作字符串，但如果当前范围内没有具有该名称的变量。

> 始终在字符串文字数组索引周围使用引号。例如，$foo['bar'] 是正确的，而 $foo[bar] 不是。但为什么？在旧脚本中经常会遇到这种语法

来自 PHP 文档： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

**编辑**有人指出了 echo 中使用的单引号，这也是一个问题。使用单引号，PHP 不会解释字符串的内容，而使用双引号，PHP 会解析它，并正确使用这些值。

# android - 以编程方式在android中分屏？

> ID：12813012
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:10:00.070
> 
> 标签：android, android-layout, split

我想像[ipad](http://appshopper.com/blog/wp-content/uploads/2010/03/tumblr_kzrjkt6sQr1qz4rgr.png)一样分屏。我不知道确切的名字。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T06:11:07.187

为此使用片段。片段是实现部分活动的类

检查本教程。

[http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:12:46.083

你可以使用 android [Fragment](http://developer.android.com/guide/components/fragments.html)来做同样的事情。

也可以参考[这个](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)片段的例子。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:38:48.737

我发现了。我们可以选择 masterdetail screen 。我认为[android masterdetail screen 选项更容易](http://android-er.blogspot.com/2012/06/android-sdk-tools-revision-20-now.html)

# ios5 - 使 UiViewController 保持纵向模式 iOS6 VS iOS5

> ID：12813013
> 
> 赞同：1
> 
> 时间：2012-10-10T06:10:08.697
> 
> 标签：ios5, ios6

我正在为 iOS5 和 iOS6 构建一个应用程序。我在 UINavigationController 中有这个 UIViewController，我希望它保持纵向模式。

该代码适用于 iOS5，但不适用于 iOS6。

```
// iOS5 rotation
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if (interfaceOrientation == UIInterfaceOrientationPortrait)
        return YES;
    else
        return NO;
}

// iOS6 rotation
- (BOOL)shouldAutorotate
{

    return YES;

}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;

} 
```

这里有什么问题？？？在 SO 我发现了很多类似的问题，但通常答案对我不起作用。

**编辑：** 也许我不准确，但我需要一个单一的视图控制器（我的应用程序的主页）来保持纵向模式**，而不是所有的应用程序**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T06:57:31.143

首先，很大程度上取决于您的 UIViewController 嵌入到哪个控制器中。

例如，如果它在 UINavigationController 中，那么您可能需要继承该 UINavigationController 以覆盖这样的方向方法。

子类 UINavigationController（层次结构的顶部视图控制器将控制方向。）需要将其设置为 self.window.rootViewController。

```
- (BOOL)shouldAutorotate
 {
     return self.topViewController.shouldAutorotate;
 }
 - (NSUInteger)supportedInterfaceOrientations
 {
     return self.topViewController.supportedInterfaceOrientations;
 } 
```

从 iOS 6 开始，UINavigationController 不会向其 UIVIewControllers 请求方向支持。因此我们需要对它进行子类化。

**而且**

然后，对于只需要 PORTRAIT 模式的 UIViewControllers，编写这些函数

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait);
} 
```

对于也需要 LANDSCAPE 的 UIViewController，将遮罩更改为全部。

```
- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskAllButUpsideDown);
    //OR return (UIInterfaceOrientationMaskAll);
} 
```

现在，如果您想在方向更改时进行一些更改，请使用此功能。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

} 
```

**很重要**

在 AppDelegate 中，写这个。这是非常重要的。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
     return (UIInterfaceOrientationMaskAll);
} 
```

如果您只想为所有视图控制器提供肖像模式，请应用肖像蒙版。即UIInterfaceOrientationMaskPortrait

否则，如果您希望某些 UIViewControllers 保持为 Portrait，而其他 UIViewControllers 支持所有方向，则应用 ALL Mask。即UIInterfaceOrientationMaskAll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:51:26.057

试试这个：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    UIInterfaceOrientationMask orientationMask = UIInterfaceOrientationMaskPortrait;
    return orientationMask;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{   
   return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

这应该只支持纵向模式。

# derby - 'length' 运算符不允许将参数作为操作数

> ID：12813014
> 
> 赞同：1
> 
> 时间：2012-10-10T06:10:11.920
> 
> 标签：derby

我们团队最近开发了一个 derby 数据库的 web 项目，然后发现了一些错误：***'length' 运算符不允许取 ? 参数作为操作数***。

这是我的代码：

* * *

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

public class test {
    public static void main(String[] args) {
        try {           
              Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();//加载驱动
              Connection conn = DriverManager.getConnection("jdbc:derby://localhost:1527/mydb","user","123456");

              String sql = "select * from TB_SYS_MODULE where length(?) > 5";
              PreparedStatement ps = conn.prepareStatement(sql);
              ps.setString(1, "fudengok");
              ResultSet rs = ps.executeQuery();

              while(rs.next()) {
                  System.out.println("MODULE_ID:"+rs.getString(1)+"-----MODULE_NAME:"+rs.getString(2));
              }
            } catch(Exception e){ 
                e.printStackTrace(); 
            } 

    }
} 
```

> 我搜索了官方文档，LENGTH() 函数允许动态参数[在此处输入链接描述](http://db.apache.org/derby/docs/10.9/ref/)。所以寻求帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:54:48.017

我不确定我是否理解。“fudengok”是 TB_SYS_MODULE 表中列的名称吗？

如果是这样，为什么不直接使用：

```
select * from TB_SYS_MODULE where length(fudengok) > 5 
```

# vb.net - 如何在 VB.NET/Visual Studio 2008 中允许空格键和退格键？

> ID：12813025
> 
> 赞同：2
> 
> 时间：2012-10-10T06:11:28.340
> 
> 标签：vb.net

如何在 VB.NET/Visual Studio 2008 中允许空格键和退格键？

示例代码：

```
Private Sub txtname_KeyPress(ByVal sender As System.Object, _
                             ByVal e As System.Windows.Forms.KeyPressEventArgs) _
                             Handles txtname.KeyPress

    If e.KeyChar < "A" Or e.KeyChar > "z" And e.KeyChar <> ControlChars.Back Then
        e.Handled = True
        txtname.Clear()
    Else
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:12:03.807

对于 Backspace 使用[`Asc`](http://msdn.microsoft.com/en-us/library/zew1e4wc%28v=vs.80%29.aspx)Function 并测试[Hex Value](http://www.asciitable.com/)，在本例中为 8，对于 Space 你可以测试`" "`

```
If Asc(e.KeyChar) = 8 OrElse e.KeyChar = " " OrElse e.KeyChar < "A" OrElse e.KeyChar > "z" Then
    e.Handled = True
    CType(sender, TextBox).Clear()
End If 
```

如果您的问题是如何检查 BackSpace 和 Space，则上述答案将起作用。要让它们与您的文本一起使用，请执行以下操作

```
If Not ((Asc(e.KeyChar) = 8 OrElse e.KeyChar = " ") OrElse (e.KeyChar >= "A" AndAlso e.KeyChar <= "z")) Then
    e.Handled = True
    CType(sender, TextBox).Clear()
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T12:27:26.613

在 Visual Studio 2012 工作：

```
Private Sub Username_KeyPress(sender As Object, e As KeyPressEventArgs) Handles Username.KeyPress
     If Not (Char.IsNumber(e.KeyChar) Or Asc(e.KeyChar) = 8 Or Asc(e.KeyChar) = 32) Then
                e.Handled = True
     End If
End Sub 
```

# java - 为什么 jaxb 2.2 不能处理元素及其子元素具有相同 ID 的情况？

> ID：12813028
> 
> 赞同：1
> 
> 时间：2012-10-10T06:11:37.747
> 
> 标签：java, jaxb

我有一个保存为 XML 的对象，读取该 XML，然后保存到另一个 XML。这 2 个 XML 文件是不同的。

第一个 XML（我的预期）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<multiIDTest>
    <containerList>
        <container id="1">
            <elem id="1"/>
        </container>
        <container container="1" id="2"/>
        <container container="2" id="3"/>
    </containerList>
</multiIDTest> 
```

第二个 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<multiIDTest>
    <containerList>
        <container id="1">
            <elem id="1"/>
        </container>
        <container id="2"/>
        <container container="2" id="3"/>
    </containerList>
</multiIDTest> 
```

如果我更改子元素 ID：

第一个 XML（我的预期）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<multiIDTest>
    <containerList>
        <container id="1">
            <elem id="2"/>
        </container>
        <container container="1" id="2"/>
        <container container="2" id="3"/>
    </containerList>
</multiIDTest> 
```

第二个 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<multiIDTest>
    <containerList>
        <container id="1">
            <elem id="2"/>
        </container>
        <container container="1" id="2"/>
        <container container="2" id="3"/>
    </containerList>
</multiIDTest> 
```

真奇怪。谁能告诉我为什么？

示例代码：

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package xml;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class MultiIDTest {

    static public class Element {
        private String id;

        @XmlID
        @XmlAttribute(required=true)
        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }
    }

    static public class Container {
        private String id;

        @XmlID
        @XmlAttribute(required=true)
        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }

        private Container container;

        @XmlIDREF
        @XmlAttribute(required=true)
        public Container getContainer() {
            return container;
        }

        public void setContainer(Container e) {
            this.container = e;
        }

        private Element elem;

        public Element getElem() {
            return elem;
        }

        public void setElem(Element e) {
            this.elem = e;
        }
    }

    static public class XmlSerialization {
        public static Object read(String filepath, Class... classesToBeBound) {
            try {
                return JAXBContext.newInstance(classesToBeBound).createUnmarshaller().unmarshal(new File(filepath));
            } catch (JAXBException ex) {}
            return null;
        }

        public static void write(String filePath, Object entity, Class... classesToBeBound) {
            try {
                Marshaller m = JAXBContext.newInstance(classesToBeBound).createMarshaller();
                m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
                m.marshal(entity, new File(filePath));
            } catch (JAXBException ex) {}
        }

    }
    List<Container> containerList = new ArrayList<>();
    @XmlElementWrapper(name="containerList")
    @XmlElement(name="container")
    public List<Container> getContainerList() {
        return (containerList != null)?containerList:(containerList = new ArrayList<>());
    }

    public void setContainerList(List<Container> containerList) {
        this.containerList = containerList;
    }
    public void initialize() {
        Container container = new Container();
        container.setId("1");
        Element elem = new Element();
        elem.setId("2"); // if I use elem.setId("1"), problem occurs.
        container.setElem(elem);

        containerList.add(container);
        Container container2 = new Container();
        container2.setId("2");
        container2.setContainer(container);
        containerList.add(container2);

        Container container3 = new Container();
        container3.setId("3");
        container3.setContainer(container2);
        containerList.add(container3);
    }
    public void write(String filePath, Object obj) {
        XmlSerialization.write(filePath, obj, MultiIDTest.class, Container.class, Element.class);
    }
    public Object read(String filePath) {
        return XmlSerialization.read(filePath, MultiIDTest.class, Container.class, Element.class);
    }

    public static void main(String[] args) {
        MultiIDTest test = new MultiIDTest();
        String filePath = "c:\\tmp.xml";
        test.initialize();
        test.write(filePath, test);
        MultiIDTest test2 = (MultiIDTest)test.read(filePath);
        test.write("c:\\tmp2.xml", test2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:13:53.420

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**JAXB RI 问题**

JAXB 2.2 (JSR-222) 可以处理这个用例，但是在您使用的特定 JAXB 实现中碰巧有一个错误阻止它工作。我已经能够确认您在使用 JDK 1.7.0 for Mac 中包含的 JAXB 2.2 实现时看到的问题。我建议为此问题打开一个错误：

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

**其他 JAXB 实现**

我已经使用 EclipseLink JAXB (MOXy) 尝试了您的示例代码，它按预期运行。我是 MOXy 负责人，您可以从以下位置下载它。

*   [http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# java - 以高质量打印多个 java JComponent

> ID：12813029
> 
> 赞同：0
> 
> 时间：2012-10-10T06:11:38.100
> 
> 标签：java, jcomponent

有没有人尝试过在单个打印作业中打印多个“文本”组件？

我需要使用我调用的打印方法打印的组件是：

```
jEditorPane1.print();  
jTable1.print(); 
```

上述方法打印质量很好，但它们作为 2 个不同的打印作业出现。有没有办法作为一个单独的打印作业出来？

# c# - 在哪里放置标签消息并仅在处理完成后显示？

> ID：12813030
> 
> 赞同：0
> 
> 时间：2012-10-10T06:11:45.267
> 
> 标签：c#, asp.net, webforms, label

我是初学者。从下面的代码创建视频后，我应该如何以及在何处放置标签消息。
我想在流程完成后显示两条消息，即 label1：视频已成功创建，第二条消息是视频的视频路径。
我只想在过程完成后显示它（创建视频）。

```
namespace test
{
    public partial class liveRecording : System.Web.UI.Page
    {
    //video codec
    AVIWriter writer = new AVIWriter("MSVC");  

    protected void Page_Load(object sender, EventArgs e)
    {
        string streamingSource = "http://xxx.sample.com:85/snapshot.cgi";
        string login = "login";
        string password = "password";

        JPEGStream JPEGSource = new JPEGStream(streamingSource);
        JPEGSource.Login = login;
        JPEGSource.Password = password;
        JPEGSource.NewFrame += new NewFrameEventHandler(video_NewFrame);
        JPEGSource.Start();
    }

    public bool IsRecording = false;
    int width = 0;
    int height = 0;

    Queue<Bitmap> frames = new Queue<Bitmap>(); //Queue that store frames to be written by the recorder thread

    private void video_NewFrame(object sender, NewFrameEventArgs eventArgs) //event handler for NewFrame
    {
        //get frame from JPEGStream source
        //Bitmap image = eventArgs.Frame;
        Bitmap image = (Bitmap)eventArgs.Frame.Clone(); //get a copy of the Bitmap from the source

        width = image.Width;
        height = image.Height;

        if (IsRecording)
        {
            //enqueue the current frame to be encoded to a video file
            frames.Enqueue((Bitmap)image.Clone());
        }

        if (!IsRecording)
        {
            IsRecording = true;
            Thread th = new Thread(DoRecording);
            th.Start();
        }
    }

    private void DoRecording()
    {
        //writer.FrameRate = 5;
        string SavingPath = (Server.MapPath("~\\video\\")); 
        string VideoName = "ICS_" + String.Format("{0:yyyyMMdd_hhmmss}", DateTime.Now) + ".avi";
        writer.Open(SavingPath + VideoName, width, height);

        DateTime start = DateTime.Now;
        while (DateTime.Now.Subtract(start).Seconds < 30)
        {
            if (frames.Count > 0)
            {
                Bitmap bmp = frames.Dequeue();
                writer.AddFrame(bmp);//add frames to AVI file
            }
        }
        writer.Close();//close
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:16:50.350

> 我只想在过程完成后显示它（创建视频）。

那么你应该使用AJAX，基本上。您的“开始编码”（或其他）请求应该*很快*完成，以便用户返回适当的页面。该页面应包含 Javascript 以定期轮询服务器以查看任务是否已完成 - 您需要进行一些协调（例如，通过提供给客户端的随机生成的“作业 ID”）。您可以使用[SignalR 之](http://signalr.net/)类的东西进行“长轮询”（AJAX 会触发一个请求，该请求预计会等到作业完成或超时），或者每隔几秒发出一次快速轮询请求。

如果您是 Web 开发的新手，恐怕这一切都不*容易*——但是在基于 HTTP 请求和响应的世界中，您尝试执行的任务并不容易。

# android - Android传输系统摄像头，然后在ImageView中显示图片

> ID：12813032
> 
> 赞同：0
> 
> 时间：2012-10-10T06:11:50.943
> 
> 标签：android

我知道呼叫系统摄像头是

```
Intent intent = new Intent();  
intent.setAction("android.media.action.STILL_IMAGE_CAMERA");   
startActivity(intent); 
```

我想在 ImageView 中显示图片，但我不知道该怎么做。有没有人可以给我一个示例代码？

编辑1：我也需要商店

```
String strPath = Environment.getExternalStorageDirectory().toString();
  File path = new File(strPath);
  if(!path.exists())
  path.mkdirs();
  strFileName = "test.jpg";
  strFilePath = strPath + "/" + strFileName;

  File file = new File(strFilePath);
  Uri uri = Uri.fromFile(file);
  intent.putExtra(MediaStore.EXTRA_OUTPUT, uri）; 
```

我用up代码来存储，但是在拍照的时候怎么看呢？那就是预览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:14:42.883

需要用startActivityForResult代替startActivity，然后在onActivityResult中抓取结果。像这样的东西：

```
public class MyCameraActivity extends Activity {
private static final int CAMERA_REQUEST = 1888; 
private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    this.imageView = (ImageView)this.findViewById(R.id.imageView1);
    Button photoButton = (Button) this.findViewById(R.id.button1);
    photoButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap(photo);
    }  
} 
```

}

# objective-c - 反射设置器方法不起作用

> ID：12813041
> 
> 赞同：0
> 
> 时间：2012-10-10T06:12:41.813
> 
> 标签：objective-c, reflection

我需要使用反射调用设置器。为此，我需要选择器。但我的代码中的 setterName var 为零。我的班上有二传手和二传手。这是我的代码

```
objc_property_t *allProperties = class_copyPropertyList([object class], &allPropertyCount);
objc_property_t prop = class_getProperty(cls, propName);
for (unsigned int i = 0; i < allPropertyCount; i++) {

    prop = allProperties[i];

}

char *setterName = property_copyAttributeValue(prop, "S");

SEL selector = NSSelectorFromString(setterName);
if([object respondsToSelector:@selector(selector)]){
    return selector;
}
return nil; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:09:52.793

仅当属性分别定义了自定义 setter 或 getter 时，才设置“S”和“G”属性。您的代码需要检查是否`setterName`为 NULL，如果是，则从属性名称生成设置器名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:09:22.863

回复有点晚了，希望对大家有用！

我启用了 ARC，并且正在使用生成的 getter/setter。

```
//  NSObject+Properties.m
#import "NSObject+Properties.h"
#import "objc/runtime.h"

@implementation NSObject (Properties)

static const char * getPropertyType(objc_property_t property) {

    //Borrowed from http://stackoverflow.com/questions/754824/get-an-object-attributes-list-in-objective-c
    //Many contributors to final solution

    const char *attributes = property_getAttributes(property);
    printf("attributes=%s\n", attributes);
    char buffer[1 + strlen(attributes)];
    strcpy(buffer, attributes);
    char *state = buffer, *attribute;
    while ((attribute = strsep(&state, ",")) != NULL) {
        if (attribute[0] == 'T' && attribute[1] != '@') {
            // it's a C primitive type:
            /*
             if you want a list of what will be returned for these primitives, search online for
             "objective-c" "Property Attribute Description Examples"
             apple docs list plenty of examples of what you get for int "i", long "l", unsigned "I", struct, etc.
             */
            return (const char *)[[NSData dataWithBytes:(attribute + 1) length:strlen(attribute) - 1] bytes];
        }
        else if (attribute[0] == 'T' && attribute[1] == '@' && strlen(attribute) == 2) {
            // it's an ObjC id type:
            return "id";
        }
        else if (attribute[0] == 'T' && attribute[1] == '@') {
            // it's another ObjC object type:
            return (const char *)[[NSData dataWithBytes:(attribute + 3) length:strlen(attribute) - 4] bytes];
        }
    }
    return "";
}

- (NSDictionary *) getClassProperties
{
    //Borrowed from http://stackoverflow.com/questions/754824/get-an-object-attributes-list-in-objective-c
    //Many contributors to final solution

    if (self == NULL || self == nil) {
        return nil;
    }

    NSMutableDictionary *results = [[NSMutableDictionary alloc] init];

    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList([self class], &outCount);
    for (i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];
        const char *propName = property_getName(property);
        if(propName) {
            const char *propType = getPropertyType(property);
            NSString *propertyName = [NSString stringWithUTF8String:propName];
            NSString *propertyType = [NSString stringWithUTF8String:propType];
            [results setObject:propertyType forKey:propertyName];
        }
    }
    free(properties);

    // returning a copy here to make sure the dictionary is immutable
    return [NSDictionary dictionaryWithDictionary:results];
}

-(void) setProperty:(NSString *) propertyName value:(id) value {

    SEL selector = [self buildGenericSetterForPropertyName:propertyName];

    if( selector != NULL ) {
        //The class responds to the selector
        NSMethodSignature *aSignature = [[self class] instanceMethodSignatureForSelector:selector];
        NSInvocation *anInvocation = [NSInvocation invocationWithMethodSignature:aSignature];
        [anInvocation setSelector:selector];
        [anInvocation setTarget:self];
        [anInvocation setArgument:&value atIndex:2];
        [anInvocation invoke];
    }
    else {
        //We don't know what the setter is, so directly access the iVar
        Ivar iVar = class_getInstanceVariable([self class],[propertyName UTF8String]);
        object_setIvar(self, iVar,value);
    }    
}

-(SEL) buildGenericSetterForPropertyName:(NSString *) name {
    //Borrowed from https://github.com/AlanQuatermain/aqtoolkit/blob/master/Extensions/NSObject%2BProperties.m
    NSMutableString * str = [NSMutableString stringWithString: @"set"];
    [str appendString: [[name substringToIndex: 1] uppercaseString]];
    if ( [name length] > 1 )
        [str appendString: [name substringFromIndex: 1]];

    //addition - the setter will accept one argument
    [str appendString:@":"];

    if( [[self class] instancesRespondToSelector:NSSelectorFromString(str)]) {
        return NSSelectorFromString(str);
    }
    else {
        return NULL;
    }
}

@end 
```

# java - struts2-rest-plugin：将 json 数据发送到 PUT/POST

> ID：12813045
> 
> 赞同：1
> 
> 时间：2012-10-10T06:12:53.920
> 
> 标签：java, json, rest, struts2, struts2-json-plugin

我一直在尝试使用 struts2-rest-plugin 将 JSON 数据发送到 Struts2 REST 服务器。

它适用于 XML，但我似乎无法找出正确的 JSON 格式来发送它。

有人有这方面的经验吗？

谢谢，肖恩

更新：

对不起，我不清楚。问题是 Struts2 似乎没有将我发送的 JSON 数据映射到控制器中的模型。

这是代码：

控制器：

```
public class ClientfeatureController extends ControllerParent implements ModelDriven<Object> {
    private ClientFeatureService clientFeatureService;

    private ClientFeature clientFeature = new ClientFeature();
    private List<ClientFeature> clientFeatureList;

    //Client ID
    private String id;

    public ClientfeatureController() {
        super(ClientfeatureController.class);
    }

    @Override
    public Object getModel() {
        return (clientFeatureList != null ? clientFeatureList : clientFeature);
    }

    /**
     * @return clientFeatureList through Struts2 model-driven design
     */
    public HttpHeaders show() {
        //logic to return all client features here. this works fine..

        //todo: add ETag and lastModified information for client caching purposes
        return new DefaultHttpHeaders("show").disableCaching();
    }

    // PUT request
    public String update() {
        logger.info("client id: " + clientFeature.getClientId());
        logger.info("clientFeature updated: " + clientFeature.getFeature().getDescription());

        return "update";
    }

    public HttpHeaders create() {
        logger.info("client id: " + clientFeature.getClientId());
        logger.info("feature description: " + clientFeature.getFeature().getDescription());
        return new DefaultHttpHeaders("create");
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public void setClientFeatureService(ClientFeatureService clientFeatureService) {
        this.clientFeatureService = clientFeatureService;
    }

    public List<ClientFeature> getClientFeatureList() {
        return clientFeatureList;
    }

    public void setClientFeatureList(List<ClientFeature> clientFeatureList) {
        this.clientFeatureList = clientFeatureList;
    }

    public ClientFeature getClientFeature() {
        return clientFeature;
    }

    public void setClientFeature(ClientFeature clientFeature) {
        this.clientFeature = clientFeature;
    }
} 
```

这是我提出请求的 URL：

> ..http://localhost:8080/coreserviceswrapper/clientfeature.json

-方法：POST 或 PUT（都尝试过，POST 映射到 create()，PUT 映射到 update()） -Header：Content-Type：application/json

有效载荷：

```
{"clientFeature":{
        "feature": {
            "id": 2,
            "enabled": true,
            "description": "description1",
            "type": "type1"
        },
        "countries": ["SG"],
        "clientId": 10}
} 
```

当我提出请求时，Struts2 日志中的输出：

```
1356436 [http-bio-8080-exec-5] WARN  net.sf.json.JSONObject  - Tried to assign property clientFeature:java.lang.Object to bean of class com.foo.bar.entity.ClientFeature
1359043 [http-bio-8080-exec-5] INFO  com.foo.bar.rest.ClientfeatureController  - client id: null 
```

我还要补充一点，XML 请求工作得很好：

URL：..http://localhost:8080/coreserviceswrapper/clientfeature.xml 方法：POST/PUT 内容类型：text/xml

有效载荷：

```
<com.foo.bar.entity.ClientFeature>
<clientId>100</clientId>
<feature>
<description>test</description>
</feature>
</com.foo.bar.entity.ClientFeature> 
```

输出：

```
1738685 [http-bio-8080-exec-7] INFO  com.foo.bar.rest.ClientfeatureController  - client id: 100
1738685 [http-bio-8080-exec-7] INFO  com.foo.bar.rest.ClientfeatureController  - feature description: test
1738717 [http-bio-8080-exec-7] INFO  org.apache.struts2.rest.RestActionInvocation  - Executed action [/clientfeature!create!xml!200] took 1466 ms (execution: 1436 ms, result: 30 ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T07:25:12.870

我也遇到同样的问题，我的环境是：Structs 2.3.16.3，Jquery 1.11，Struts-rest-plugin 症状：post json data，rest controller not parse json data to model。解决方案：由于控制器是模型驱动的，浏览器客户端只需发布 Json 字符串即可。但似乎您必须强制 jquery 更改 ajax 调用的内容类型。

```
_self.update= function(model, callback) {  
          $.ajax({  
              beforeSend: function(xhrObj){
                xhrObj.setRequestHeader("Content-Type","application/json");
                xhrObj.setRequestHeader("Accept","application/json");
            },
              type: 'PUT',  
              url: this.svrUrl+"/"+ model.id + this.extension,  
              data: JSON.stringify(model), // '{"name":"' + model.name + '"}',  
              //contentType: this.contentType,
              //dataType: this.dataType,  
              processData: false,                   
              success: callback,  
              error: function(req, status, ex) {},  
              timeout:60000  
          });  
      }; 
```

模型数据格式为：var model = {"id":"2", "name":"name2", "author":"author2", "key":"key2" }

当您使用“Content-Type”="application/json" 放置或发布数据时，插件将使用 Jsonhandler 自动处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T12:42:45.633

我遇到了这样的问题。奇怪但通过将名称“clientFeature”更改为“模型”解决了

# android - 按下相机按钮时android应用程序停止

> ID：12813050
> 
> 赞同：0
> 
> 时间：2012-10-10T06:12:58.120
> 
> 标签：android, android-camera, ocr

我在 Android 上使用 Mezzofanti OSR 开源，但我被卡住了。当我在应用程序中按下相机按钮时，应用程序突然崩溃。这是 CameraManeger.java 代码：

```
package com.itwizard.mezzofanti;

import java.io.IOException;
import android.content.Context;
import android.content.Intent;
import android.graphics.Point;
import android.graphics.Rect;
import android.hardware.Camera;
import android.net.Uri;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.Display;
import android.view.SurfaceHolder;
import android.view.WindowManager;

final class CameraManager {
private static final String TAG = "MLOG: CameraManager.java: ";

private static byte m_cImgDivisor = 2; // given the limited memory space, we
                                        // cannot allocate memory for all
                                        // the image
                                        // thus we lower a bit the
                                        // resolution by a factor of 2/4

private static CameraManager m_CameraManager; // the camera manager itself
private Camera m_Camera; // the camera
private final Context m_Context; // screen context
private Point m_ptScreenResolution; // the screen resolution
private Rect m_FramingRect; // the framing rectangle
private boolean m_bInitialized; // is the driver initialized
private boolean m_bPreviewing; // is camera in preview mode
private Handler m_ParentMessageHandler; // the parent's message handler
private SurfaceHolder m_ParentSurfaceHolder = null; // the parent's surface
                                                    // holder

/**
 * called when jpeg-image ready, just send to the parent handler the whole
 * image to be processed
 */
Camera.PictureCallback m_PictureCallbackJPG = new Camera.PictureCallback() {
    public void onPictureTaken(byte[] data, Camera c) {

    Log.i(TAG, "pcjpg - started");
    Mezzofanti.CompareTime(TAG + "just started picture callback");
    if (data == null) {
    Log.i(TAG, "data is null");
    } else {
    Message message = m_ParentMessageHandler.obtainMessage(
                R.id.cameramanager_requestpicture, data);
    message.sendToTarget();
    m_ParentMessageHandler = null;
    Log.i(TAG, "pcjpg - finish");
    m_Camera.startPreview();
    Mezzofanti.CompareTime(TAG + "just sent picture to handler");
        }

    }
      };

/**
 * save the parent handler, in order to process the image-request
 */
public void RequestPicture(Handler handler) {
    if (m_Camera != null && m_bPreviewing) {
        m_ParentMessageHandler = handler;
    }
}

/**
 * called on autofocus
 */
private Camera.AutoFocusCallback m_AutoFocusCallback = new Camera.AutoFocusCallback() {
public void onAutoFocus(boolean success, Camera camera) {
if (success) {
Log.v(TAG, " Focus succeded.");
m_ParentMessageHandler
                    .sendEmptyMessage(R.id.cameramanager_focus_succeded);
} else {
Log.v(TAG, " Focus failed.");
m_ParentMessageHandler
                    .sendEmptyMessage(R.id.cameramanager_focus_failed);
        }
    }
};

/**
 * Save the parent message handler.
 * 
 * @param handler
 *            parent message handler
 */
public void RequestCameraFocus(Handler handler) {
    if (m_Camera != null && m_bPreviewing)
        m_ParentMessageHandler = handler;
}

/**
 * Allocate the camera manager
 */
public static void Initialize(Context context) {
    if (m_CameraManager == null) {
        m_CameraManager = new CameraManager(context);
    }
}

/**
 * set the local image divisor
 */
public static void SetImgDivisor(int imgDivisor) {
if (imgDivisor != 1 && imgDivisor != 2 && imgDivisor != 4)
m_cImgDivisor = (byte) 2;
else
m_cImgDivisor = (byte) imgDivisor;
}

/**
 * Retrieve the private camera manager
 */
public static CameraManager get() {
    return m_CameraManager;
}

/**
 * constructor
 */
private CameraManager(Context context) {
m_Context = context;
GetScreenResolution();
m_Camera = null;
m_bInitialized = false;
m_bPreviewing = false;
}

/**
 * set the parent surface holder
 */
public void SetSurfaceHolder(SurfaceHolder holder) {
m_ParentSurfaceHolder = holder;
}

/**
 * open the camera driver, using the saved parent-surface-holder
 * 
 * @return a boolean variable indicating if the open-driver procedure
 *         succeeded
 */
public boolean OpenDriver() {
if (m_ParentSurfaceHolder == null)
return false;

if (m_Camera == null) {
m_Camera = Camera.open();
try {
m_Camera.setPreviewDisplay(m_ParentSurfaceHolder);
} catch (IOException e) {
Log.v(TAG, e.toString());
return false;
}

if (!m_bInitialized) {
m_bInitialized = true;
GetScreenResolution();
}

SetCameraParameters();
}
return true;
}

/**
 * open camera driver using a parameter surface-holder
 * 
 * @return a boolean variable indicating if the open-driver procedure
 *         succeeded
 */
public void OpenDriver(SurfaceHolder holder) {
if (m_Camera == null) {
m_Camera = Camera.open();
try {
m_Camera.setPreviewDisplay(holder);
} catch (IOException e) {
m_Camera.release();
m_Camera = null;
Log.v(TAG, e.toString());
}

if (!m_bInitialized) {
m_bInitialized = true;
GetScreenResolution();
}

SetCameraParameters();

    }
}

/**
 * close the camera driver
 */
public void CloseDriver() {
if (m_Camera != null) {
m_Camera.release();
m_Camera = null;
m_ParentSurfaceHolder = null;
}
}

/**
 * start camera preview mode
 */
public void StartPreview() {
if (m_Camera != null && !m_bPreviewing) {
m_Camera.startPreview();
m_bPreviewing = true;
}
}

/**
 * stop camera preview mode
 */
public void StopPreview() {
if (m_Camera != null && m_bPreviewing) {
m_Camera.setPreviewCallback(null);
m_Camera.stopPreview();
m_bPreviewing = false;
    }
}

/**
 * set the camera auto-focus callback
 */
public void RequestAutoFocus() {
if (m_Camera != null && m_bPreviewing) {
m_Camera.autoFocus(m_AutoFocusCallback);
}
}

/**
 * Calculates the framing rect which the UI should draw to show the user
 * where to place the text. The actual captured image should be a bit larger
 * than indicated because they might frame the shot too tightly. This target
 * helps with alignment as well as forces the user to hold the device far
 * enough away to ensure the image will be in focus.
 * 
 * @return The rectangle to draw on screen in window coordinates.
 */
public Rect GetFramingRect(boolean linemode) {
int border = 10;
if (linemode)
m_FramingRect = new Rect(m_ptScreenResolution.x / 4,
m_ptScreenResolution.y / 2 - 20,
m_ptScreenResolution.x * 3 / 4,
m_ptScreenResolution.y / 2 + 20);
else
m_FramingRect = new Rect(border, border, m_ptScreenResolution.x
                - border, m_ptScreenResolution.y - border - 30);

return m_FramingRect;
}

/**
 * take a picture, and set the jpg callback
 */
public void GetPicture() {
    m_Camera.takePicture(null, null, m_PictureCallbackJPG);
}

/**
 * Sets the camera up to take preview images which are used for both preview
 * and decoding.
 */
public void SetCameraParameters() {
if (m_ptScreenResolution == null)
        return;
Camera.Parameters parameters = m_Camera.getParameters();
parameters.setPreviewSize(m_ptScreenResolution.x,
            m_ptScreenResolution.y);
parameters.setPictureSize(2048 / m_cImgDivisor, 1536 / m_cImgDivisor);
m_Camera.setParameters(parameters);
Log.v(TAG, parameters.flatten());
}

/**
 * @return the screen resolution
 */
private Point GetScreenResolution() {
if (m_ptScreenResolution == null) {
WindowManager manager = (WindowManager) m_Context
                .getSystemService(Context.WINDOW_SERVICE);
Display display = manager.getDefaultDisplay();
m_ptScreenResolution = new Point(display.getWidth(),
display.getHeight());
}
return m_ptScreenResolution;
}

} 
```

这是日志猫：

```
10-09 20:19:23.551: V/MLOG: Mezzofonti.java:(11728): Call startCamera.
10-09 20:19:23.576: V/MLOG: Mezzofonti.java:(11728): InitCamera: start
10-09 20:19:23.576: V/MLOG: Mezzofonti.java:(11728): InitCamera: OpenDriver
10-09 20:19:23.806: V/MLOG: CameraManager.java:(11728): preferred-preview-size-for-video=640x480;zoom=0;max-num-detected-faces-hw=0;zoom-supported=true;whitebalance=auto;scene-mode=auto;jpeg-quality=100;preview-format-values=yuv420sp,yuv420p,yuv422i-yuyv,yuv422sp,rgb565;jpeg-thumbnail-quality=100;preview-format=yuv420sp;video-size-values=720x480,176x144,320x240,352x288,640x480,1280x720,1920x1080;preview-size=800x480;focal-length=4.030000;flash-mode-values=off,auto,on,torch;preview-frame-rate-values=30,25,20,15,10,7;preview-frame-rate=30;focus-mode-values=auto,infinity,macro,fixed,facedetect,continuous-video;jpeg-thumbnail-width=320;video-size=720x480;scene-mode-values=auto,portrait,landscape,night,beach,snow,sunset,fireworks,sports,party,candlelight,dusk-dawn,fall-color,back-light,text;preview-fps-range-values=(7000,30000);jpeg-thumbnail-size-values=320x240,400x240,0x0;zoom-ratios=100,102,104,109,111,113,119,121,124,131,134,138,146,150,155,159,165,170,182,189,200,213,222,232,243,255,283,300,319,364,400;preview-size-values=640x480,720x480,800x480,800x450,352x288,320x240,176x144;picture-size-values=3264x2448,3264x1968,2048x1536,2048x1232,800x480,640x480;preview-fps-range=7000,30000;auto-whitebalance-lock=false;min-exposure-compensation=-4;max-num-focus-areas=1;vertical-view-angle=47.1;horizontal-view-angle=60.5;jpeg-thumbnail-height=240;smooth-zoom-supported=false;focus-mode=auto;video-frame-format=yuv420sp;max-num-detected-faces-sw=3;picture-format-values=jpeg;max-exposure-compensation=4;focus-areas=(0,0,0,0,0);exposure-compensation=0;exposure-compensation-step=0.5;flash-mode=off;auto-exposure-lock=false;effect-values=none,mono,negative,sepia,aqua;picture-size=1024x768;max-zoom=30;effect=none;whitebalance-values=auto,incandescent,fluorescent,daylight,cloudy-daylight;picture-format=jpeg;focus-distances=0.15,1.20,Infinity
10-09 20:19:23.811: V/MLOG: Mezzofonti.java:(11728): InitCamera: StartPreview
10-09 20:19:24.116: V/MLOG: Mezzofonti.java:(11728): InitCamera: end
10-09 20:19:24.121: V/MLOG: Mezzofonti.java:(11728): InitCamera: start
10-09 20:19:24.121: V/MLOG: Mezzofonti.java:(11728): InitCamera: OpenDriver
10-09 20:19:24.121: V/MLOG: Mezzofonti.java:(11728): InitCamera: StartPreview
10-09 20:19:24.121: V/MLOG: Mezzofonti.java:(11728): InitCamera: end
10-09 20:19:32.771: V/MLOG: Mezzofonti.java:(11728): CameraButton OnClick
10-09 20:19:32.771: D/AndroidRuntime(11728): Shutting down VM
10-09 20:19:32.771: W/dalvikvm(11728): threadid=1: thread exiting with uncaught exception (group=0x40c5f1f8)
10-09 20:19:32.781: E/AndroidRuntime(11728): FATAL EXCEPTION: main
10-09 20:19:32.781: E/AndroidRuntime(11728): java.lang.NullPointerException
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.itwizard.mezzofanti.Mezzofanti.RequestCameraFocus(Mezzofanti.java:544)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.itwizard.mezzofanti.Mezzofanti.access$22(Mezzofanti.java:542)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.itwizard.mezzofanti.Mezzofanti$4.onClick(Mezzofanti.java:177)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.view.View.performClick(View.java:3591)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.view.View$PerformClick.run(View.java:14263)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.os.Handler.handleCallback(Handler.java:605)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.os.Looper.loop(Looper.java:137)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at java.lang.reflect.Method.invokeNative(Native Method)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at java.lang.reflect.Method.invoke(Method.java:511)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-09 20:19:32.781: E/AndroidRuntime(11728):    at dalvik.system.NativeStart.main(Native Method)
10-09 20:22:25.481: D/dalvikvm(11728): GC_CONCURRENT freed 82K, 3% free 10105K/10311K, paused 7ms+8ms
10-09 20:22:28.836: I/Process(11728): Sending signal. PID: 11728 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:24:10.133

您正在使用的变量尚未在`RequestCameraFocus()`方法中 Mezzofanti.java 文件的第 577 行初始化。这就是您收到 NullPointerException 的原因。logcat 中的这两行说明了一切：

```
10-09 20:19:32.781: E/AndroidRuntime(11728): java.lang.NullPointerException
10-09 20:19:32.781: E/AndroidRuntime(11728):    at com.itwizard.mezzofanti.Mezzofanti.RequestCameraFocus(Mezzofanti.java:544) 
```

请检查该行并查看是否所有变量都已初始化。如果您需要更多帮助，请发布该文件的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:17:17.147

检查您是否在清单中授予了相机权限

```
<uses-permission android:name="android.permission.CAMERA" />
  <uses-feature android:name="android.hardware.camera" /> 
```

# mongodb - 使用 .NET Guid 作为 mongodb 文档 ID

> ID：12813053
> 
> 赞同：0
> 
> 时间：2012-10-10T06:13:08.203
> 
> 标签：mongodb, mongodb-.net-driver

我正在尝试使用 .NET Guid 作为我的 mongodb 文档的文档 ID。我现在面临的问题是 .NET Guid 字节在 mongodb id 中反转。所以我不能用这样的查询来获取新插入的文档：

```
_collection.AsQueryable().Where(user => user.Id == id) 
```

我认为字节反转是由于 ToByteArray 实现而发生的。那么，有人知道对此有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:38:15.263

这是我的错误。查询应如下所示：

```
_collection.AsQueryable().SingleOrDefault(user => user.Id == id) 
```

# c# - 以用户身份将图像/视频发布到 Facebook 粉丝页面

> ID：12813062
> 
> 赞同：0
> 
> 时间：2012-10-10T06:13:52.717
> 
> 标签：c#, facebook-graph-api

我可以使用页面访问令牌将图像发布到页面。但它会发布为页面而不是用户登录。如果我使用用户访问令牌，它将发布登录用户墙而不是 Facebook 粉丝页面。我的目标是将图像/视频作为用户而不是页面发布到粉丝页面。以下代码用于发布到墙上。

```
 var parameters = new Dictionary<string, object>
       {
            { "picture", video} ,
            {"message", "my Image"}                          
        };

        _fbClient.PostAsync("/{Page_id}/feed", parameters); 
```

请告诉我如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:11:20.530

你在寻找 JavaScript 吗？请注意，用户必须在发布前喜欢第 1 页。

```
function PostToPage(){

    FB.login(function(response)
    {
        if (response.authResponse)
        {
             //Post to Wootube Page
             FB.api('/173724382762792/feed', 'post', { 
             message: lnk,
             link: lnk

             }, 
             function(response) {
               if (!response || response.error) {
                 //alert('You have to like http://www.facebook.com/WooTubes first!');

              } else {
                 //alert("Successfully Posted to WooTube Page!");

               }
             });

        }
        else
        {
            alert('Not logged in');
        }
    }, { scope : 'publish_stream' });

  } 
```

# c++ - 从x，y，z 2d数组中渲染opengl 3d点云

> ID：12813065
> 
> 赞同：10
> 
> 时间：2012-10-10T06:14:00.833
> 
> 标签：c++, opengl, 3d, point-clouds

需要在 c++ (vs2008) 中使用 openGl 进行 3d 点云显示的一些指导。我正在尝试使用纹理进行 3d 点云显示。我有 3 个二维数组（每个相同大小 1024x512）代表每个点的 x、y、z。我认为我在正确的轨道上

```
glBegin(GL_POINTS);
for(int i=0; i<1024; i++)
{
   for(int j=0; j<512; j++)
   {
       glVertex3f(x[i][j], y[i][j], z[i][j]);
   }
 }    
}    
glEnd(); 
```

现在这会加载缓冲区中的所有顶点（我认为）但是从这里我不知道如何继续。或者我在这里完全**错**了。

然后我有另一个 2D 数组（相同大小），其中包含我想用作 3D 点云上的纹理和显示的颜色数据（值从 0 到 255）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:56:21.927

点绘制代码就可以了。

（从长远来看，如果您必须重复绘制这些点，例如响应用户旋转视图，您可能会遇到性能问题。将 3 个数组中的数据重新排列为 1，其中 x、y、z 值彼此相邻将允许你可以使用更快的顶点数组/VBO。但是现在，如果它没有损坏，请不要修复它。）

要为点着色，您需要在每个 glVertex 之前使用 glColor。它必须在之前，而不是之后，因为在 OpenGL 中 glVertex 松散地意味着这是一个完整的顶点，绘制它。您已将数据描述为点云，因此不要将 glBegin 更改为 GL_POLYGON，将其保留为 GL_POINTS。

好的，您有另一个具有一个字节颜色索引值的数组。您可以先将其用作灰度级别

```
glColor3ub(color[i][j], color[i][j], color[i][j]); 
```

这应该显示从黑色到白色的点。

要获得每个点的真实颜色，您需要一个颜色查找表 - 我假设数据附带一个，或者您正在创建一个。它应该被声明为

```
static GLfloat ctab[256][3] = {
    1.0, 0.75, 0.33,  /* Color for index #0 */
    ...
}; 
```

并在 glVertex 之前使用

```
glColor3fv(ctab[color[i][j]]); 
```

我使用了浮点颜色，因为这就是 OpenGL 这些天在内部使用的颜色。如果您更喜欢颜色的 0..255 值，请将数组更改为 GLubyte，将 glColor3fv 更改为 glColor3ub。

希望这可以帮助。

# mysql - 如何获取特定小时内具有不同值的行的唯一计数集

> ID：12813069
> 
> 赞同：0
> 
> 时间：2012-10-10T06:14:22.510
> 
> 标签：mysql

从统计信息中选择 id、小时、计数；

```
1, 0, 2
2, 0, 20
3, 1, 10
4, 1, 20 
5, 2, 10
5, 2, 30 
```

我希望输出（小时，计数）呈现为

```
0, 22
1, 30
2, 40 
```

如何对小时间隔执行唯一计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:17:04.387

您可以使用 group by 子句：

```
SELECT  hour, count(id)
GROUP BY hour; 
```

所以对于这个数据集：

```
1, 0, 2
2, 0, 20
3, 1, 10
4, 1, 20 
5, 2, 10
5, 2, 30 
```

你会得到

```
0, 2
1, 2
2, 2 
```

如果您想获得该小时使用的总和`SUM()`

```
SELECT  hour, sum(`count`)
GROUP BY hour; 
```

**注意：**尽量不要使用字数作为字段名，因为它也是mysql中的关键字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:17:38.677

```
select hour, sum(count)
from stats
group by hour 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:25:05.343

您需要使用[`SUM()`](http://www.tizag.com/mysqlTutorial/mysqlsum.php)函数来实现：

```
SELECT hour, sum(`count`) AS `TotalCOUNT`
FROM stats
GROUP BY hour 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/03cad/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:24:29.133

我想按小时从统计数据组中选择小时，总和（计数）；

以下是 group by 子句的参考 [http://www.techonthenet.com/sql/group_by.php](http://www.techonthenet.com/sql/group_by.php)

# c - 如何在 gcc 中使用线程编译 C 程序？

> ID：12813070
> 
> 赞同：-6
> 
> 时间：2012-10-10T06:14:33.407
> 
> 标签：c, multithreading, unix

为了消除错误，我需要与 gcc 一起使用什么选项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T06:17:21.940

在 Linux 上，您应该首先使用

```
gcc -g -Wall -pthread yourcode.c -lpthread -o yourprogram 
```

^(`-g`询问调试信息，`-Wall`询问所有警告，`-pthread`询问 POSIX 线程支持。)

当它在没有警告的情况下编译并且您已经对其进行了调试时，`gdb`您可能希望编译器通过替换（或添加之后）来进行`-g`优化`-O2`

很快，你就会想让你的程序由几个编译单元组成（链接在一起）。然后，您需要学习如何使用像 GNU [make](http://www.gnu.org/software/make/)这样的构建器，并且您将拥有一个`Makefile`（不要忘记选项卡在其中很重要）。

当然，您应该在源代码上使用版本控制系统（我建议使用[git](http://git-scm.com)，也许通过[gitorious](http://gitorious.org)或[github ）。](http://github.com)

# java - 在没有任何排序的情况下使用 Hibernate setFirstResult

> ID：12813075
> 
> 赞同：2
> 
> 时间：2012-10-10T06:14:50.593
> 
> 标签：java, hibernate, hibernate-criteria

我是新来的冬眠。我对标准的`setFirstResult`方法感到困惑。从文档看来，hibernate 从给定的数字返回行。

由于 SQL 查询不保证没有 order by 子句的行的顺序，`setFirstQuery`在这种情况下如何工作（没有 orderBy 子句）？hibernate 是否从数据库中读取索引信息？

如果我多次执行相同的 SQL 查询，排序可能会改变，在这种情况下如何`setFirstResult`工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:33:07.177

Hibernate 不能自己做某事，除非它得到底层数据库的支持。因为 Hibernate 查询最终被转换为`Sql`only。

话虽如此，它使用 PostgresSQL 和 MySQL 等底层数据库功能，它会生成类似`limit ? offset ?`.

您可以使用添加自定义订单`addOrder`

```
.addOrder( Order.asc("name") ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:22:13.737

添加订单是您的任务，如果对同一组数据执行多次，您注意到的功能将不能保证相同的结果。 `setFirstResult`通常用于分页。

# html - CSS 转换 3d 性能问题

> ID：12813076
> 
> 赞同：0
> 
> 时间：2012-10-10T06:14:59.817
> 
> 标签：html, google-chrome, css, 3d, web

我现在一直在创建**html5 & css3** Web 应用程序。
我正在使用**谷歌浏览器**作为测试平台。并使用**css transform3d**属性在 Web 浏览器中实现 3d 相机和 3d 世界。
不是 WebGL。（因为 WebGL 不能直接渲染 HTML 元素。）

如果它有许多要绘制的分区（div 元素），则 chrome 无法全部绘制。
**背景图像和一些部门丢失了。**
所以它变成了白屏。

我怎么解决这个问题？

我认为这是chrome的硬件加速错误。
我怎样才能通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:30:20.640

使用 3d 变换时，背景图像确实会导致问题和闪烁。

将图像背景移动到一个您不想应用 3d 变换的容器中，然后尝试。还要确保你有`-webkit-backface-visibility: hidden;`

有关更多信息，请参阅此链接：[防止 webkit-transform 的 webkit-transition 闪烁](https://stackoverflow.com/questions/3461441/prevent-flicker-on-webkit-transition-of-webkit-transform)

# python - 从命令行触发 Django Signal

> ID：12813079
> 
> 赞同：3
> 
> 时间：2012-10-10T06:15:08.603
> 
> 标签：python, django, signals

正如标题所说，我正在尝试从命令行触发 django 信号，而不是从视图/模型中触发，但我无法确切知道如何执行此操作，或者如何从命令行访问 django 的大部分工作，我假设您需要在“manage.py shell”或至少 pythons shell 中，但我找不到任何文档来帮助我进一步了解。

有谁知道这是否可以开始，如果可以，如何去做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:18:58.560

你不需要信号。请参阅[自定义管理器命令](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)。

只需编写将执行必要操作的自定义命令（来自文档）：

```
# file <app folder>/management/commands/closepoll.py
from django.core.management.base import BaseCommand, CommandError
from example.polls.models import Poll

class Command(BaseCommand):
    args = '<poll_id poll_id ...>'
    help = 'Closes the specified poll for voting'

    def handle(self, *args, **options):
        for poll_id in args:
            try:
                poll = Poll.objects.get(pk=int(poll_id))
            except Poll.DoesNotExist:
                raise CommandError('Poll "%s" does not exist' % poll_id)

            poll.opened = False
            poll.save()

            self.stdout.write('Successfully closed poll "%s"\n' % poll_id) 
```

可以使用 调用新的自定义命令`python manage.py closepoll <poll_id>`。

此外，如果您仍想通过信号来执行此操作，只需从方法发送信号`Command.handle`：

```
mysignal = django.dispatch.Signal(providing_args=["foo", "bar"])

...

class Command(BaseCommand):
    args = '<foo> <bar>'

    def handle(self, foo, bar):

        mysignal.send(sender=self, foo=foo, bar=bar) 
```

# android - 我正在开发 android 相机应用程序，我想使用绿屏色度键效果捕获图像并更改其背景

> ID：12813089
> 
> 赞同：0
> 
> 时间：2012-10-10T06:16:20.827
> 
> 标签：android

我正在开发 android 相机应用程序，我想要绿屏色度键效果来捕捉图像。我已经在我的代码中使用了[http://code.google.com/p/chroma-key-project/downloads/list](http://code.google.com/p/chroma-key-project/downloads/list)这个色度键项目，但这对我来说没有多大意义。我正在以绿色捕获图像/带有色度键效果的蓝色背景然后我需要为其设置白色背景..请帮帮我。我正在将此代码用于平板电脑，但程序会自动崩溃，并给出这种类型的错误“java.lang.OutOfMemoryError：位图大小超出 VM 预算”..为什么？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:18:30.913

答案很简单，您的应用程序没有足够的内存来处理位图大小。您应该做的是使用较小的位图来处理。

罗尔夫

编辑：如果您发布一些您正在使用的代码，它可能会很有用。

# php - 具有 3,000 多条需要转换的记录的 MySQL 数据库

> ID：12813091
> 
> 赞同：2
> 
> 时间：2012-10-10T06:16:35.150
> 
> 标签：php, mysql

我有一个数据库，这是通过 phpmyadmin 对 Excel 文件的初始转储。因此，没有对表格应用格式或其他逻辑。所以我基本上只剩下一个“varchar”样式行的表。其中包括日期和时间等内容。

示例：start_time、end_time、start_date、end_date .. 看起来像 7:30 PM、11:00PM、9/9/12、11/22/12，然后是一些正常的行。不幸的是，我无法将整个表格转换为更好的格式，因为有人基于这种糟糕的所谓表格设计的很多功能。唯一真正适合它的是，该表对于我可以与某物关联的每一行都有一个自动递增的 ID。因此，我认为这是修补事物的一种手段，而我们修复了许多将事物分开的功能，而我可以在其他所有事物上搭建桥梁。

制作一个可以为数据类型提供适当类型行的表，然后能够使用一些 mysql 功能`BETWEEN()`，例如在 start_date 上获取 a - z 的列表，但列表有限。

所以我想弄清楚是否有一种方法可以将数据从一个表转储到下一个表，但在此查询的过程中让它转换为我想要的类型，例如日期时间，将 start_date 和 start_time 组合成日期时间格式以及结束时间/日期？

或者这是我必须在堆中拉出的东西，用 PHP 循环并让它将新行插入到新表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:52:20.093

我会使用 PHP 脚本来读取原始数据，然后将其处理为正确的日期格式，然后插入到新表中。

所以场景是，你有一个时间和日期分开，你想组合它们，然后将它们格式化为数据库可接受的日期格式。我会做这样的事情：

```
date_default_timezone_set('America/Los_Angeles');

// you have separate dates and times like this
$date = '9/9/12';
$time = '11:00 PM';

// combine them into one string
$str = $date . ' ' . $time;

$dt = DateTime::createFromFormat('n/j/y g:i A', $str);

$DBFormat = $dt->format('Y-m-d H:i:s');

echo $DBFormat;
// outputs DB date format -> 2012-09-09 23:00:00 
```

我注意到的一件事是您的第一个示例是`7:30 PM`，下一个示例是`11:00PM`. 在后一个示例中， . 之前没有空格`PM`。我不知道这是否是您的拼写错误，或者您的数据是否确实如此变化，如果确实如此，那么我会添加一个检查并插入空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:50:13.093

为此，您可以按照以下步骤操作：

1.  在同一个数据库中创建一个新表，其中包含源表中的所有字段（要复制的表）。

2.  创建一个 PHP 文件。

3.  编写一个 MYSQL 查询来选择源表中的所有值。

4.  在 while 循环中，编写一个查询以将这些行插入到新表中。

5.  在此之前，使用 php 中的“strtotime() 和 date()”函数将 start_time、end_time、start_date、end_date 列的值转换为所需的格式。

6.  在新表中插入新值。

# php - 使用 php 检查输入字段的类型

> ID：12813093
> 
> 赞同：0
> 
> 时间：2012-10-10T06:16:41.473
> 
> 标签：php, types, input

我想检查输入字段文本的类型。因为我只想让这些字段只读。我知道我可以在 javascript 中做到这一点，但是有什么办法可以在 php 中做到这一点？

最好的毕业生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:35:31.640

和 javascript 一样使用这个

```
 <input name="address" type="text" readonly="readonly"> 
```

这使字段只读，您无法更改它。

```
 <input name="address" type="text" value="<?php echo "your value"; ?>" readonly="readonly"> 
```

试试这个代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:21:40.693

要禁用输入字段，请添加禁用属性：

```
 disabled="disabled" 
```

这必须在生成 html 或生成后使用 javascript 时完成。

这是一种简洁的方式，用户可以直接看到它只是可读但不可编辑。

当您提交表单时，在 php 中您使用 name 属性来获取发布的值。说你有

```
<input name="address" type="text"> 
```

在 php 中：

```
if($_POST['address']){
   //don't process address cause you know this is of type text
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:28:09.190

这就是你可以在 php 中执行的方法，如果 $field 为 false 则设置输入禁用

```
<input type="text" name="" <?php echo ($field == false)? 'disabled="disabled"' : '';?> value="" /> 
```

# xml - 将数据从一个 xml 文件复制到另一个 xml 文件

> ID：12813096
> 
> 赞同：0
> 
> 时间：2012-10-10T06:16:46.210
> 
> 标签：xml, xslt

我有一个 source.xml 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<Studentdatabase>
    <Student>
        <id>0001</id>
        <Fname>SOMEX</Fname>
        <Mname>Y</Mname>
        <Lname>Z</Lname>
        <DOB>1992-05-26T00:00:00+05:30</DOB>
        <fathersname>XYZ</fathersname>
        <cls>I</cls>
        <gen>M</gen>
        <add>kadapa</add>
    </Student>
    <Student>
        <id>0002</id>
        <Fname>SOMEA</Fname>
        <Mname>B</Mname>
        <Lname>C</Lname>
        <DOB>1991-04-6T00:00:00+05:30</DOB>
        <fathersname>ABC</fathersname>
        <cls>II</cls>
        <gen>F</gen>
        <add>PUNE</add>
    </Student>
    <Student>
        <id>0003</id>
        <Fname>SOMED</Fname>
        <Mname>E</Mname>
        <Lname>F</Lname>
        <DOB>1990-08-2T00:00:00+05:30</DOB>
        <fathersname>DEF</fathersname>
        <cls>III</cls>
        <gen>M</gen>
        <add>JMD</add>
    </Student>
</Studentdatabase> 
```

和一个destination.xml 文件

```
<?xml version="1.0" standalone="yes"?>
<MyDB>
  <tableName>
    <studentid>1</studentid>
    <Firstname>chaithanya</Firstname>
    <middlename>babu</middlename>
    <lastname>satyala</lastname>
    <Dateofbirth>1991-05-26T00:00:00+05:30</Dateofbirth>
    <fathersname>babu</fathersname>
    <class>I</class>
    <gender>M</gender>
    <address>kadapa</address>
  </tableName>
  <tableName>
    <studentid>2</studentid>
    <Firstname>charan</Firstname>
    <middlename>kumar</middlename>
    <lastname>palla</lastname>
    <Dateofbirth>1990-10-05T00:00:00+05:30</Dateofbirth>
    <fathersname>krishnaiah</fathersname>
    <class>I</class>
    <gender>M</gender>
    <address>hyderabad</address>
  </tableName>
  <tableName>
    <studentid>3</studentid>
    <Firstname>kondaiah</Firstname>
    <middlename />
    <lastname>dasari</lastname>
    <Dateofbirth>1985-06-05T00:00:00+05:30</Dateofbirth>
    <fathersname>dasari</fathersname>
    <class>II</class>
    <gender>M</gender>
    <address>porumamilla</address>
  </tableName>
  <tableName>
    <studentid>4</studentid>
    <Firstname>dheeraj</Firstname>
    <middlename>reddy</middlename>
    <lastname>polimera</lastname>
    <Dateofbirth>1991-05-16T00:00:00+05:30</Dateofbirth>
    <fathersname>krishna reddy</fathersname>
    <class>II</class>
    <gender>M</gender>
    <address>pulivendula</address>
  </tableName>
  <tableName>
    <studentid>5</studentid>
    <Firstname>shabaz</Firstname>
    <middlename>banu</middlename>
    <lastname>noormohammad</lastname>
    <Dateofbirth>1991-06-16T00:00:00+05:30</Dateofbirth>
    <fathersname>noor ahmed</fathersname>
    <class>III</class>
    <gender>F</gender>
    <address>jmd</address>
  </tableName>
  <tableName>
    <studentid>6</studentid>
    <Firstname>khairuna</Firstname>
    <middlename>begum</middlename>
    <lastname>taticherla</lastname>
    <Dateofbirth>2002-02-02T00:00:00+05:30</Dateofbirth>
    <fathersname>kullay</fathersname>
    <class>III</class>
    <gender>F</gender>
    <address>gugudu</address>
  </tableName>
  <tableName>
    <studentid>7</studentid>
    <Firstname>chandrakala</Firstname>
    <middlename />
    <lastname>kummera</lastname>
    <Dateofbirth>1991-06-03T00:00:00+05:30</Dateofbirth>
    <fathersname>lingreddy</fathersname>
    <class>IV</class>
    <gender>F</gender>
    <address>anantapur</address>
  </tableName>
</MyDB> 
```

现在的问题是我需要通过参考目标文件更改元素和标签的名称来将数据从源文件插入目标文件......例如`<Fname>`，在源文件中必须更改为`<FirstName>`目标文件

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:52:53.320

您可能想从阅读 XSLT [Identity Transform](http://en.wikipedia.org/wiki/Identity_transform)开始。这只会按原样复制所有元素

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

但是，在您的情况下，看起来只有**fathersname**元素是不变的。然后，您需要编写模板来匹配您想要更改的元素，并在它们的位置创建新元素。例如，要将 Student 数据库“重命名”**为 MyDB**，**您**需要执行以下操作：

 **```
<xsl:template match="Studentdatabase">
   <MyDB>
     <xsl:apply-templates select="@*|node()"/>
   </MyDB>
</xsl:template> 
```

要将**Student**更改为**tableName**，您将执行以下操作：

```
<xsl:template match="Student">
   <tableName>
     <xsl:apply-templates select="@*|node()"/>
   </tableName>
</xsl:template> 
```

如果对要重命名的所有元素重复此操作，您应该能够获得预期的输出。**

# sql - 什么会更有效：三个选择查询，还是一个带有连接的查询？

> ID：12813105
> 
> 赞同：-2
> 
> 时间：2012-10-10T06:17:19.207
> 
> 标签：sql

我有三张桌子：

```
A_details    
B_details    
C_details 
```

什么会更有效：三个选择查询，还是一个带有连接的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:25:35.523

这在很大程度上取决于架构，以及表上是否有正确的索引。

我通常更喜欢让数据库进行连接，而不是尝试在代码中进行连接，数据库在这方面做得更好。

这里的关键是您是否有正确的索引以使连接有效地读取。

看看[数据库索引](http://en.wikipedia.org/wiki/Database_index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:20:39.273

这取决于您的数据库，但不要在没有意义时创建 JOIN。您尚未指定任何数据库或平台。如果您的平台允许每个查询有多个结果集，只需一次发出三个 SELECT，并在一个数据库请求中获取三个表。

如果您的平台不支持，请访问数据库 3 次，并且不要尝试合并查询*，除非您确定这是性能问题*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:26:16.477

连接表更有效，因为规范化是一种更好的方法。

在这里，我对在表之间的公共列上连接的三个表使用左外连接。因此，请将 column 替换为 col1, col2, col3... 适合您的表的内容，并参考以下查询：

```
select a.*, b.*, c.*
from A_details a 
left outer join B_details b on a.col1=b.col2
left outer join C_details c on a.col1=b.col3 
```

* * *

更多详情请参考： [http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# hadoop - 此时确保 HBase 表中的行数增加的最有效方法是什么？

> ID：12813107
> 
> 赞同：0
> 
> 时间：2012-10-10T06:17:24.277
> 
> 标签：hadoop, hbase

我想确保此时数据存储在 HBase 表中。我不需要确切的行数。为此，我`count 'table_name'`在 HBase shell 中执行了两次命令：

```
hbase(main):001:0> count 'test_table', 100000
...
558549 row(s) in 360.1440 seconds

hbase(main):001:0> count 'test_table', 100000
...
558623 row(s) in 354.0270 seconds 
```

但是当行数很大（> 200,000）时，时间太长了。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:36:07.733

尝试使用缓存值更大的count命令，我认为默认是10

```
count 'test_table', CACHE => 1000 
```

如果仍然太慢，您应该尝试使用 MapReduce Job

```
Run '$HADOOP_HOME/bin/hadoop jar hbase.jar rowcount' 
```

# java - 如何在java web中的语言之间切换

> ID：12813110
> 
> 赞同：0
> 
> 时间：2012-10-10T06:17:38.923
> 
> 标签：java, struts, multilingual

我正在使用 struts，我有一个需要在两种语言上运行的 java web 应用程序。我可以使用 application.properties 文件获得一种语言，其中我有键和值组合并使用它。现在，当用户想要选择其他语言而不是如何切换到另一种语言时`how to change the properties file`

我有不同语言的不同属性文件我的问题是当用户选择不同的语言时如何设置/选择特定的属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:47:09.623

如果您使用的是 Struts2，那么您可以创建自己的`LocaleProvider`类，例如：

```
public class ChangeLocale implements LocaleProvider {  

        private String lan;  

        public String getLan() {  
            return lan;  
        }  
        public void setLan(String lan) {  
            this.lan = lan;  
        }  
        public Locale getLocale() {  

            Locale locale=null;
            // Switch language between Chinese and English  
            if("chinese".equals(lan)){  
                locale=new Locale("zh", "cn");  
            }else if("english".equals(lan)){  
                locale=new Locale("en", "US");  
            }  
            return locale;  
        }  
    } 
```

在`LocaleAction`：

```
public String execute(){  

        ActionContext ac=ActionContext.getContext();  
        ac.setLocale(getLocale());  
        return "success";  
    } 
```

在jsp中：

```
<a href="<s:property value="chinese"/>"><s:text name="china"></s:text></a>  
<a href="<s:property value="english"/>"><s:text name="us"></s:text></a> 
```

# node.js - 如何在不使用 ExpressJS 的情况下指定 PassportJS 在回调后执行的操作？

> ID：12813112
> 
> 赞同：0
> 
> 时间：2012-10-10T06:17:47.553
> 
> 标签：node.js, facebook, passport.js

PassportJS 网站有以下代码示例，其中有人可以在回调通过后指定自己的逻辑流：

```
app.get('/auth/facebook/callback',
  passport.authenticate('facebook', { failureRedirect: '/login' }),
  function(req, res) {
    // Successful authentication, redirect home.
    res.redirect('/');
  }); 
```

但是，我没有使用 Express，并且发现很难复制上述行为。

这是我当前处理 facebook 身份验证回调的代码：

```
if(path == '/auth/facebook/callback'){
        passport.authenticate('facebook', {failureRedirect: '/failbook', 'successRedirect':'/success'})(req, res, next);
        return;
} 
```

我不知道如何更改它，以便可以更改回调后的逻辑流程。我希望能够检查我保存的一些变量并相应地重定向到不同的位置。关于我如何去做这件事的任何想法？

另外 - 在相关说明中 - 如果我只是刷新 facebook 访问令牌（如果它已过期并且我正在获得一个新令牌），是否可以根本不将用户重定向到任何地方，以便他们的浏览器不会'在刷新过程中的任何时间点都不会转到不同的页面（这涉及到与 facebook 的重新身份验证）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T09:23:19.093

检查此[https://groups.google.com/forum/#!topic/passportjs/HTG13e2pb74](https://groups.google.com/forum/#!topic/passportjs/HTG13e2pb74) 它是一个使用带有节点“vanilla”的护照的组

# jquery - 我想通过单击其中一个单选按钮来重置表单的所有验证

> ID：12813114
> 
> 赞同：1
> 
> 时间：2012-10-10T06:18:20.643
> 
> 标签：jquery

我有两个单选按钮，我想通过单击其中一个单选按钮来重置表单的所有验证，我使用 jquery 进行验证。

我的代码是：-

```
<p class="radio_paragraph">

  <form:label for="beneficiaryType" path="beneficiaryType" 
              cssClass="form_label">    
     Are you 13 years or older?
  </form:label>

  <span id="beneficiaryError" style="display:none;color: red;"></span><br />

  <form:radiobutton path="beneficiaryType" 
                    value="YES" 
                    label="YES" 
                    cssClass="form_radio" />

  <form:radiobutton path="beneficiaryType" 
                    value="NO" 
                    label="NO"
                    cssClass="form_radio" />                    
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:21:16.340

在无线电点击事件中，您可以调用它

```
$('.form_radio').on('click', function() {  

     if( this.checked){
         var validator = $("#myform").validate();
         validator.resetForm();
     }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:21:29.910

您的问题是 resetForm 是 a.validate(...) 返回的验证器对象上的方法，而不是 jQuery 对象本身上的方法。

```
function resetValidator(){
var a = $("#yourFormName").validate();
a.resetForm();

} 
```

# android - 在android中实现油画效果

> ID：12813122
> 
> 赞同：4
> 
> 时间：2012-10-10T06:19:20.947
> 
> 标签：android, image-processing

我正在尝试实现一些照片效果，我尝试了不同的效果`sketch painting effect, Emboss effect,` ，现在我正在尝试实现**`Oil Painting Effect`**。我找到了这个链接

[http://supercomputingblog.com/graphics/oil-painting-algorithm/](http://supercomputingblog.com/graphics/oil-painting-algorithm/)

但在我的水平上，这很难理解请帮助我，或任何其他参考链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:51:13.507

从以下链接下载适用于 Android 的 JHLabs 库。 [https://code.google.com/p/android-jhlabs/](https://code.google.com/p/android-jhlabs/) [https://code.google.com/p/android-jhlabs/downloads/list](https://code.google.com/p/android-jhlabs/downloads/list) 有油画的效果，浮雕等等。您可以从 DoG 过滤器创建铅笔素描效果，然后是库中提供的灰度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T16:15:56.443

我认为最好使用由 Aaron Hertzmann 开创的称为“基于描边的渲染”（SBR）的技术来模拟油画。它已经存在了很长时间。无论您是在 android 还是任何其他操作系统中执行此操作都没有太大的区别。

你需要的是一个函数，它接受一个矩形和一个方向，并在当前画布上放置一个画笔描边。画笔本身被定义为一组 2 个纹理灰度图像：一个用于不透明度，一个用于高度。您需要一个高度，以便您可以在画布（渲染图像）旁边创建凹凸贴图。现在，困难的部分是为您的画笔获得良好的纹理贴图，使其看起来逼真。这就是你需要进行大量实验并看看你最喜欢什么的地方。每个人对什么看起来最好都有自己的想法。

要定义矩形及其方向，您可以使用图像矩。最终结果是你的笔触会有点跟随对象的轮廓，这通常是艺术家所做的（但并非总是如此）。

无论如何，这种方法在这里得到更好的解释（这是我博客的链接）：

[http://3dstereophoto.blogspot.com/2018/07/non-photorealistic-rendering-software.html](http://3dstereophoto.blogspot.com/2018/07/non-photorealistic-rendering-software.html)

您可以尝试我编写的名为“The Painter”的软件（免费且可在 64 位 Windows 上运行），看看使用 SBR 可以做什么。也许这根本不是你想要的。这是该软件的链接（还包括卡通着色和水彩渲染）：

[http://3dstereophoto.blogspot.com/p/painting-software.html](http://3dstereophoto.blogspot.com/p/painting-software.html)

同样，这是我的博客的链接，主要处理 3D 摄影。我碰巧也很喜欢画画。

# azure - 如何更改 azure 网站服务中的默认时区？

> ID：12813123
> 
> 赞同：18
> 
> 时间：2012-10-10T06:19:28.173
> 
> 标签：azure, timezone, azure-web-app-service

我是 Azure 网站服务的新手。我上传了我的网站文件，效果很好。

但我对默认时区有疑问。我的位置是首尔（+9）。但是当我在下面调用时，代码会返回 UTC(+0) 时间。

```
DateTime.Now; 
```

有没有办法解决这个问题而无需像编辑 Web.config 这样的复杂修复？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-04-01T08:34:48.997

现在可以更改 Azure 网站/Web 应用程序的服务器时区。

为此，请添加一个名为“WEBSITE_TIME_ZONE”的应用程序设置（使用门户），该设置等于相关时区的名称（基本上与 HKLM\Software\Microsoft\Windows Nt\CurrentVersion\Time Zones 中的键名相同的字符串\)。

时区值列表在[这里](https://support.microsoft.com/en-us/help/973627/microsoft-time-zone-index-values)。使用标有“时区名称”的列中的值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T06:28:03.200

[根据 Microsoft](https://stackoverflow.com/a/6509833/735446)的说法，不建议更改 Azure VM 上的时区。而是使用[TimeZoneInfo](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc.aspx)结构的方法将时间转换为本地时间。

[但是，上述帖子](https://stackoverflow.com/questions/6504153/azure-timezone-utc-problem-how-to-solve)中至少提到了一种可能的解决方案。

PS问题作者在下面的评论中提供的解决方案示例：

```
DateTime timeUtc = DateTime.UtcNow;
TimeZoneInfo kstZone = TimeZoneInfo.FindSystemTimeZoneById("Korea Standard Time"); 
DateTime kstTime = TimeZoneInfo.ConvertTimeFromUtc(timeUtc, kstZone); 
```

# vim - 映射为 没有表现出应有的行为

> ID：12813126
> 
> 赞同：2
> 
> 时间：2012-10-10T06:19:53.690
> 
> 标签：vim

我的`.vimrc`文件中有这个映射*（适用于所有文件类型）*。

```
nnoremap <F3> a<C-R>=strftime("%a %d %b %Y %r")<CR><Esc>
inoremap <F3> <C-R>=strftime("%a %d %b %Y %r")<CR> 
```

我的`python.vim` *（位于`after/ftplugin/`）*有这个：

```
nnoremap <S-F3> :up<cr>
inoremap <S-F3> <esc>:up<cr>a 
```

的映射`F3`在正常和插入模式下都按预期工作。但是对于`Shift`+`F3`映射，它应该保存当前文件。但它在当前行上方插入了一些意想不到的字符，即**`1;2R`**. 我不知道它代表什么。

* * *

### 更新

这是的输出`:verbose nmap <S-F3>`：

```
n  <S-F3>      * :up<CR>
        Last set from ~/.vim/after/ftplugin/python.vim 
```

正是那个缩进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:12:41.397

这与终端处理按键的方式有关。通过按 Cv 然后按 键，您始终可以看到实际发送到程序的内容。这也适用于 Vim 之外。

解决方案：

1 - 在您的 vimrc`nnoremap`中键入映射​​的一部分，最后有一个空格。

2 - 按 Cv，然后按 S-F3。在我的机器上打印 `^[[25~`，这是您的终端发送给 Vim 的内容。

3 - 输入前多加一个空格`:up<cr>`。

它应该如下所示：`nnoremap ^[[25~ :up<cr>`

# android - 如何使用我的自定义键盘移位按钮使用 android 键盘 API 将小写字母变为大写字母（和副 Versa）？

> ID：12813127
> 
> 赞同：2
> 
> 时间：2012-10-10T06:20:04.073
> 
> 标签：android, keyboard, key, android-keypad

我用不同的语言创建自己的自定义键盘？我获得了有关示例 android 代码的帮助，但我不明白 shift 按钮是如何工作的？

在我的键盘上：当我在不按 Shift 按钮的情况下单击任何字符时，它将打印小字符。当我点击 shift 按钮时，所有字符都返回大写字母。并且在那个移位按钮之后不能生效返回小写字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:03:55.853

也许你可以使用`KEYCODE_CAPS_LOCK`。实施：`android:codes="115"`在你的键盘xml中，对不起，我也是新手..

# objective-c - 坚持iOS标签栏更多页面

> ID：12813129
> 
> 赞同：0
> 
> 时间：2012-10-10T06:20:11.983
> 
> 标签：objective-c, ios, uitabbarcontroller

我有一个应用程序在标签栏中有超过 5 个标签，因此它有标准的更多页面作为最后一个标签项。编辑按钮可让您重新排列选项卡，以便您可以在栏中拥有您想要的四个。这工作正常。当您重新排列选项卡，然后退出应用程序时，您的新订单不会在重新启动之间保留。我注意到我拥有的一些应用程序（来自 App Store）保留了选项卡布局，我想知道是否有这样做的标准方法。

我正在使用的`UITabBarController`（及其子选项卡）在情节提要中，如果实现依赖于此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:53:18.440

[这样的事情](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-uitabbarcontroller-how-to-save-user-customized-tab-order/)应该是要走的路。您必须手动完成。

只需找到某种方法来区分每个选项卡（通常是该视图控制器的标题），并保留这些标识符的数组，您将保留这些标识符为用户默认值。然后，当您在新应用启动时重新创建选项卡时，使用该数组中的顺序将它们添加到您的选项卡栏控制器。

# iphone - iphone中水平和垂直滚动的表格视图

> ID：12813130
> 
> 赞同：2
> 
> 时间：2012-10-10T06:20:12.280
> 
> 标签：iphone, uitableview, uiscrollview

我想创建一个水平和垂直滚动的表格视图。每行中的内容将带有文本标签。当标签大小增加表格视图的宽度时，水平滚动应该在那里。（即，我不想显示标签的文本，如“abcdefg ...”）有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:24:43.533

通过代码设置`UIScrollView`contentSize 属性，并确保`UIScrollView`contentSize 属性具有相同的高度，但宽度大于 tableView。

或者

您可以使用 an`UIScrollView`然后在里面添加`UITableView`. 这`UIScrollView`将具有与您`UITableView`现在相同的大小，但`UIScrollView`contentSize 属性将具有相同的高度，但它会具有更大的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:27:14.470

您可以使用 an`UIScrollView`然后在里面添加`UITableView`. 这`UIScrollView`将具有与您`UITableView`现在相同的大小，但`UIScrollView`contentSize 属性将具有相同的高度，但它会具有更大的宽度。

查看[UITableView 垂直和水平滚动](https://stackoverflow.com/questions/9156573/uitableview-scroll-both-vertically-and-horizontally/9156646#9156646)

和 [https://github.com/alekseyn/EasyTableView](https://github.com/alekseyn/EasyTableView)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:29:59.180

使用以下可能对你有用.....

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation==UIInterfaceOrientationLandscapeLeft ||   interfaceOrientation== UIInterfaceOrientationPortrait);
} 
```

还在界面生成器中进行更改以调整大小和宽度

# java - 如何使用 SimpleDataFormat 解析字符串数据？

> ID：12813132
> 
> 赞同：1
> 
> 时间：2012-10-10T06:20:19.497
> 
> 标签：java

我有以下代码：

```
 SimpleDateFormat format=new SimpleDateFormat("yyyy.MM.dd HH:mm");
    try {
            Date date=format.parse("2012.9.11 02:00");
                            Log.i("date", date.toGMTString());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.e("exception", e.getMessage());
        } 
```

但我收到消息：“2012 年 9 月 10 日 22:00:00 GMT”，即日期不正确。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:28:39.413

那**是**正确的日期。它是根据您的 GMT 偏移量计算的。

像这样`11-Sep-2012 02:00:00`使用`date.toLocaleString()`（不推荐使用的方法）打印它

[或者您可以使用Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类打印日期：

```
SimpleDateFormat format=new SimpleDateFormat("yyyy.MM.dd HH:mm");
Date date=format.parse("2012.09.11 02:00");
Calendar cal = Calendar.getInstance();
cal.setTime(date);
System.out.println(format.format(cal.getTime())); 
```

这打印：`2012.09.11 02:00`

您可以查看[http://www.vogella.com/articles/JavaDateTimeAPI/article.html](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:22:13.070

你正在打印`date.toGMTString()`，所以你得到“10 Sep 2012 22:00:00 GMT”，这不是一个不正确的字符串，而是格林威治标准时间的日期。请注意，不推荐使用[toGMTString](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#toGMTString%28%29)。

如果你想以你的格式打印你的日期，你可以这样做

```
 Log.i("date", format.format(date)); 
```

如果您不想获得补充“0”，请使用

```
format=new SimpleDateFormat("yyyy.M.d HH:mm"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:28:21.253

根据[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toGMTString%28%29)， `date.toGMTString()`是一种已弃用的方法。

使用不推荐使用的方法不是一个好习惯。

使用`date.toString()`而不是`date.toGMTString()`.

或者

`format.format(date);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:29:06.810

该方法`toGMTString()`已弃用。但是，作为解释，您可能处于不同的时区，因此具有不同的语言环境。尝试替换为`date.toLocaleString()`应该正确输出，尽管这也是一种已弃用的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T07:08:58.350

这是不正确的，因为您正在使用`date.toGMTString()`

只需尝试输出变量`date`，您就可以看到正确的时间！

# ruby-on-rails - 尝试在全新的 Ruby 安装上创建新的 Rails 应用程序时找不到文件

> ID：12813134
> 
> 赞同：0
> 
> 时间：2012-10-10T06:20:21.130
> 
> 标签：ruby-on-rails, installation, ubuntu-10.10

我正在使用本指南 - [https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm) .

我知道它适用于 12.04，但它是由有经验的用户推荐的，所以我使用了它。

我正在遵循本指南，并且在跑步时：

```
 rvm install 1.9.3 
```

我进入控制台

```
 denys@denys-N68S3:~/Desktop$ rvm install 1.9.3
 No binary rubies available for: ubuntu/10.10/i386/ruby-1.9.3-p194.
 Continuing with compilation. Please read 'rvm mount' to get more information on binary 
 rubies. 
```

然后一切正常并告诉我安装完成。

我按照所有其他说明进行到最后。而现在，当我跑步时

```
 rails new project 
```

我在控制台中收到错误：

```
 /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.1.0.0: cannot open shared object file: No such file or directory - /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/md5.so (LoadError)
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/generators/app_base.rb:1:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/generators/rails/app/app_generator.rb:1:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/application.rb:24:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/cli.rb:15:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/bin/rails:7:in `<top (required)>'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/bin/rails:19:in `load'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/bin/rails:19:in `<main>'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我认为这是问题，因为我正在尝试安装，然后 Rails 无法正常工作。

请在这件事上给予我帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:11:54.817

一些 Ruby 库对一些系统库有外部依赖。对于您的错误，似乎缺少的是`openssl`.

如果您键入`rvm requirements`，它将告诉您操作系统需要哪些系统库。在 Ubuntu 中对我来说，它说我需要安装以下内容：

> apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config

嗯...这并不意味着您一定需要所有这些 - 但有些是绝对必要的，例如 openssl/libssl、libxml 等

# c - 这段代码是不是不正确？

> ID：12813135
> 
> 赞同：0
> 
> 时间：2012-10-10T06:20:23.043
> 
> 标签：c, pointers, matrix, copy, memcpy

我的导师为“矩​​阵复制”展示了这张[幻灯片：](http://www.ict.kth.se/courses/IS1500/2012/forel/2012-ce-f5.pdf)

```
#define ROWSIZ 17
#define COLSIZ 27
int enamatrisen[ROWSIZ][COLSIZ];
int andramatrisen[ROWSIZ][COLSIZ];

void matcpy (int* dst, int* src)
{
  int i, j;
  for (i=0; i<ROWSIZ, i=i+1)   /* rad-nr */
   for (j=0; j<COLSIZ, j=j+1)  /* kolumn-nr */
    dst[i][j] = src[i][j];
} 
```

但

1）它说`,`应该存在的错误`;` 和

2）代码无法编译。gcc 抱怨指针被用作数组或类似的东西。什么是正确的代码？这种努力如何接近？不应该使用 memcpy 来代替它，还是努力实现类似 memcpy 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:24:48.613

是的，这是不正确的。

你需要：

```
int matcpy( int (*dst)[ COLSIZ ], int (*src)[ COLSIZ ] 
```

或者

```
void matcpy(int dst[][ COLSIZ ], int src[][ COLSIZ ]) 
```

* * *

`memcpy`可以使用，但由于这是一个练习，也许重点是了解如何迭代 2D 数组以及如何访问其元素。

* * *

在`for`循环中，`,` *必须*是`;`. 其他答案/评论是正确的 - 您可以在表达式中使用逗号，并且您只能在 中添加`;`，`for`例如：

```
//------------------------v
for (i=0; i<ROWSIZ, i=i+1 ; ) 
```

但这将是未定义的行为，因为：

*   `i<ROWSIZ, i=i+1`只要条件为真`i != 0`- 逗号运算符的评估是序列中的最后一个值
*   照原样`i`，`int`溢出将导致未定义的行为

换句话说，您可能会以无限循环告终。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:36:19.983

函数参数定义错误。

有关传递多维数组的更多信息：http: [//www.eskimo.com/~scs/cclass/int/sx9a.html](http://www.eskimo.com/~scs/cclass/int/sx9a.html)

此外，`for`循环中的逗号应该是分号。

```
void matcpy(int dst[][COLSIZ], int src[][COLSIZ])
{
    int i, j;
    for (i = 0; i < ROWSIZ; i = i + 1)   /* rad-nr */
        for (j = 0; j < COLSIZ; j = j + 1)  /* kolumn-nr */
            dst[i][j] = src[i][j];
} 
```

或者

```
void matcpy(int (*dst)[COLSIZ], int (*src)[COLSIZ])
{ 
    int i, j;
    for (i = 0; i < ROWSIZ; i = i + 1)   /* rad-nr */
       for (j = 0; j < COLSIZ; j = j + 1)  /* kolumn-nr */
           dst[i][j] = src[i][j];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T06:26:32.653

它不起作用，因为您的函数声明是：

```
void matcpy (int* dst, int* src) 
```

回报是：

```
return dst[i][j] = src[i][j] 
```

您应该将函数声明更改为：

```
void matcpy (int** dst, int** src) 
```

# iphone - 如何使表格视图的滚动条在比表格框架更小的矩形中滚动？

> ID：12813136
> 
> 赞同：2
> 
> 时间：2012-10-10T06:20:33.553
> 
> 标签：iphone, uitableview, uinavigationcontroller, uikit

如何使表格视图的滚动条在比表格框架更小的矩形中滚动？

像这样：UINavigationController 中的 UITableViewController。

Tableview的frame是(0,0,320,480)（NSLog说的这个frame），它的滚动条总是在44px以下。所以滚动条不会显示在导航栏后面。

这个怎么存档？特别感谢

![在此处输入图像描述](../Images/deaae00e66d74b5249eaef97d57787dc.png)

![在此处输入图像描述](../Images/ffe8ca6f93db397ab280356be41af7a7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:28:51.957

您可以设置滚动边缘插图。例如：

```
UIScrollView *scrollView;
[scrollView setScrollIndicatorInsets:UIEdgeInsetsMake(44, 0, 0, 0)]; 
```

作为`UITableView`继承`UIScrollView`，所有这些方法都可用。

# google-maps - 将自定义图层添加到 Google 地图

> ID：12813138
> 
> 赞同：2
> 
> 时间：2012-10-10T06:20:38.370
> 
> 标签：google-maps

我正在尝试应用由`WeatherBug`温度/雷达/湿度提供的自定义层。使用谷歌javascript库等进入我的谷歌地图。

我需要在我的谷歌地图上应用透明瓷砖。

我从以下网址获取平铺图像。那么我怎样才能将它绑定到我的地图中呢？

[http://i.wxbug.ne​​t/GEO/Google/Temperature/GetTile_v2.aspx?as=0&c=0&fq=0&tx=0&ty=0&zm=1&mw=1&ds=0&stl=0&api_key=xxxxx](http://i.wxbug.net/GEO/Google/Temperature/GetTile_v2.aspx?as=0&c=0&fq=0&tx=0&ty=0&zm=1&mw=1&ds=0&stl=0&api_key=xxxxx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:00:37.580

您应该能够将其添加为 Google 自定义地图类型。基本上，在请求 WeatherBug API 时，您会得到一个可以在 Google 地图上使用的图块。

[您可以在此处](https://developers.google.com/maps/documentation/javascript/v2/overlays#Custom_Map_Types)找到来自 Google 地图的文档。

您开始的代码应该如下所示，您可以从这一点开始：

```
var tileLayerOverlay = new GTileLayerOverlay(
  new GTileLayer(null, null, null, {
    tileUrlTemplate: 'http://i.wxbug.net/GEO/Google/Temperature/GetTile_v2.aspx?as=0&c=0&fq=0&tx={X}&ty={Y}&zm={Z}&mw=1&ds=0&stl=0&api_key=xxxxx',
    isPng:true,
    opacity:1.0
  })
);

map.addOverlay(tlo); 
```

还要检查[WeatherBug 描述](http://developer.weatherbug.com/docs/Google_GEO_API_Example)和其中的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:31:01.543

以下是受以下启发的 WMS 服务解决方案：[http ://code.google.com/p/biodiversity-imageserver/source/browse/trunk/unittest/gmap3/MCustomTileLayer.js?r=49](http://code.google.com/p/biodiversity-imageserver/source/browse/trunk/unittest/gmap3/MCustomTileLayer.js?r=49)

您可以根据需要简单地调整功能。

```
function MCustomTileLayer(map,url) {
this.map = map;
this.tiles = Array();
this.baseurl = url;
this.tileSize = new google.maps.Size(256,256);
this.maxZoom = 19;
this.minZoom = 3;
this.name = 'Custom Layer';
this.visible = true;
this.initialized = false;
this.self = this;
}

MCustomTileLayer.prototype.getTile = function(p, z, ownerDocument) {
for (var n = 0; n < this.tiles.length ; n++) {
    if (this.tiles[n].id == 't_' + p.x + '_' + p.y + '_' + z) {
        return this.tiles[n];
    }
}
var tile = ownerDocument.createElement('IMG');
tile.id = 't_' + p.x + '_' + p.y + '_' + z;
tile.style.width = this.tileSize.width + 'px';
tile.style.height = this.tileSize.height + 'px';
tile.src = this.getTileUrl(p,z);
if (!this.visible) {
    tile.style.display = 'none';
}
this.tiles.push(tile);

while (this.tiles.length > 100) {
    var removed = this.tiles.shift();
    removed = null;
}
return tile;
};

MCustomTileLayer.prototype.getTileUrl = function(p,z) {
var url = this.baseurl +
          "&REQUEST=GetMap" +
          "&SERVICE=WMS" +
          "&VERSION=1.1.1" +
          "&BGCOLOR=0xFFFFFF" +
          "&TRANSPARENT=TRUE" +
          "&SRS=EPSG:3857" +
          "&WIDTH=256" +
          "&HEIGHT=256" +
          "&FORMAT=image/png" +
          "&mode=tile" +
          "&tilemode=gmap" +
          "&tile="+ p.x + "+" + p.y + "+" + z
return url;
} 
```

你可以这样使用它

```
var hMap = new MCustomTileLayer(map, "http://my_base_url");
map.overlayMapTypes.insertAt(0, hMap); 
```

并删除覆盖

```
map.overlayMapTypes.setAt(0,null); 
```

# c# - 如何发现设备是否连接到特定的串行 (COM) 端口？

> ID：12813151
> 
> 赞同：1
> 
> 时间：2012-10-10T06:21:39.603
> 
> 标签：c#, .net, serial-port

如何使用 C# 的`SerialPort`类发现设备是否连接到特定的串行 (COM) 端口？

`Open`注意：即使没有设备连接到端口，该类的方法也会打开端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:31:25.540

**1.WMI:`SELECT * FROM Win32_SerialPort`** :

```
ManagementObjectSearcher manObjSearch = new ManagementObjectSearcher("Select * from Win32_SerialPort");
ManagementObjectCollection manObjReturn = manObjSearch.Get();

foreach (ManagementObject manObj in manObjReturn)
{
    //int s = manObj.Properties.Count;
    //foreach (PropertyData d in manObj.Properties)
    //{
    //    Console.WriteLine(d.Name);
    //}
    Console.WriteLine(manObj["DeviceID"].ToString());
    Console.WriteLine(manObj["Name"].ToString());
    Console.WriteLine(manObj["Caption"].ToString());
} 
```

**2.**如果设备返回响应：**`System.IO.Ports.SerialPort.GetPortNames()`** 并发送基本命令：

```
foreach (string portname in SerialPort.GetPortNames())
{
    var sp = new SerialPort(portname, 4800, Parity.Odd, 8, StopBits.One);
    try
    {
        sp.Open();
        sp.Write("Your known command to device");
        Thread.Sleep(500);
        string received = sp.ReadLine();

        if (received == "expected response")
        {
            Console.WriteLine("device connected to: " + portname);
            break;
        }
    }
    catch (Exception)
    {
        Console.WriteLine("device NOT connected to: " + portname);
    }
    finally
    {
        sp.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:47:26.833

答案取决于设备和电缆。

在某些情况下，连接设备时会引发DSR ( `SerialPort.DsrHolding`) 甚至 CTS ( )。`SerialPort.CtsHolding`

但在某些情况下，您可能只连接了 Tx / Rx，唯一的判断方法是尝试与设备通信。

您需要查看设备及其电缆的文档。

没有适用于任何设备的通用解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:23:50.820

您可以通过打开串行端口并发送您的设备支持的最基本命令并检查响应来做到这一点。例如，对于 GSM 调制解调器，您打开端口并按命令发送并接收 ok 作为响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:29:51.843

您可以尝试几件事

1.  创建串行端口对象并打开一个端口，现在当设备连接时，操作系统应该发送 CDChanged 事件。
2.  您 ping 串行端口，如果收到回复，则假设它已连接。

# entity-framework - Entity Framework Power Tools 在生成视图时的问题

> ID：12813157
> 
> 赞同：1
> 
> 时间：2012-10-10T06:22:15.047
> 
> 标签：entity-framework, ef-code-first

我已经创建了控制台应用程序。然后我执行了 Install-Package EntityFramework，将目标设置为 .net 4.0。

我的简单模型是

```
public class Abonent
    {
        public Abonent() {}
        [Key]
        public int AbonentId { get; set; }
        public string Name { get; set; }
    } 
```

我的 dbcontext 是（ModelContext.cs）

```
public class ModelContext : DbContext
    {
        public ModelContext():base(){}
        public DbSet<Abonent> Abonents { get; set; }
    } 
```

Program.cs 是

```
class Program
    {
        static void Main(string[] args)
        {

            Database.DefaultConnectionFactory = new System.Data.Entity.Infrastructure.SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");
            ModelContext _abonentContext = new ModelContext();

            Abonent abonent=new Abonent();
            _abonentContext.Abonents.Add(abonent);
            _abonentContext.SaveChanges();
        }
    } 
```

它工作得很好，但是当我右键单击 ModelContext.cs 并选择时`Entity Framework -> Generate View`，我会收到一个消息框，上面写着“调用目标抛出了异常”。

我做错了什么？是否存在 ef 电动工具的替代品？（VS 2010 SP1，Entity Framework Power Tools Beta 2）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T17:10:36.353

我遇到了这个问题，并通过从“工具”->“扩展和更新”菜单中卸载 Entity Framework Power Tools Beta 2 解决了这个问题。

然后我重新启动了所有 Visual Studio 2012 实例并通过相同的菜单选项重新安装它。

这解决了我的问题。

祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T14:59:16.020

问题可能是您使用了错误版本的实体框架。

# php - 详细的 preg_match_all

> ID：12813160
> 
> 赞同：0
> 
> 时间：2012-10-10T06:22:32.257
> 
> 标签：php, html, parsing, preg-match

我在让详细的 preg_match_all 工作时遇到问题。我不断得到一个空白数组。

这是我的代码：

```
 <?php
  $remote_search = file_get_contents('http://wiki.seg.org/index.php?title=Special%3ASearch&search=drilling&button=');
  preg_match_all('%<li><div class=\'mw-search-result-heading\'><a href="(.*)" title="(.*)">(.*)</a>  </div> <div class=\'searchresult\'>(.*)</div>
  <div class=\'mw-search-result-data\'>(.*)</div></li>%si', $remote_search, $links);
  echo '<ul class=\'mw-search-results\'>';
  for($i = 0; $i < count($links[1]); $i++) {
  echo '<li><div class=\'mw-search-result-heading\'><a href="' . $links[5][$i] . '" title="' . $links[4][$i] . '">' . $links[3][$i] . '<\/a>  </div> <div class=\'searchresult\'>' . $links[2][$i] . '<\/div><div class=\'mw-search-result-data\'>' . $links[1][$i] . '<\/div><\/li>';
  }
  echo '</ul>';
  ?> 
```

我正在尝试从下面显示的代码中获取链接详细信息：

`<li><div class='mw-search-result-heading'><a href="/index.php/Dictionary:Cable_drilling" title="Dictionary:Cable drilling">Dictionary:Cable drilling</a> </div> <div class='searchresult'>{{lowercase}}{{#category_index:C|cable <span class='searchmatch'>drilling</span>}} </div> <div class='mw-search-result-data'>132 B (22 words) - 19:58, 20 December 2011</div></li>`

当我执行时，`var_dump($links);`我得到`Array`了结果。

下面的代码用于获取我试图提取变量的部分中的内容。

```
 <?php
  $remote_search = file_get_contents('http://wiki.seg.org/index.php?title=Special%3ASearch&search=drilling&button=');
  preg_match_all('%<ul class=\'mw-search-results\'>(.*)</ul>%si', $remote_search, $links);
  $bar = $links[0];
  echo '<ul class=\'mw-search-results\'>';
  echo $bar;
  echo '</ul>';
  var_dump($links);
  ?> 
```

结果`echo $bar;`输入`Array`，没有输出。

此`var_dump($links);`代码段中的 输出 ul 的内容。

有没有人在我的顶部代码段中看到阻止我按预期方式解析代码的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:36:01.613

[切勿尝试使用正则表达式解析 html。](https://stackoverflow.com/a/1732454/1283847)改为使用[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)。在您的情况下，要从文件中获取链接，您可以执行以下操作：

```
$dom = new DOMDocument();
$dom->load($url);

$elements = $dom->getElementsByTagName('a');
$links = array();
foreach ($elements as $element)
    $links[] = $element->getAttribute('href');

var_dump($links); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:55:12.110

尝试：

```
preg_match_all('@<li><div\s*class=\'mw-search-result-heading\'><a\s*href=.([^"]*).\s*title=.([^"]*).>([^<]*)<\/a>\s*<\/div>\s*<div\s*class=\'searchresult\'>(.*?)<\/div>\s*<div\s*class=.mw-search-result-data.>([^<]*)<\/div><\/li>@sim', $remote_search, $links);
print_r($links); 
```

代码中的逻辑错误是您匹配的方式`<div class=\'searchresult\'>(.*)</div>`这`<div class='searchresult'>{{lowercase}}{{#category_index:C|cable <span class='searchmatch'>drilling</span>}}</div>` 不适用于正则表达式，因为有一个嵌套标记 - `span`. 所以我将您的匹配逻辑更改为非贪婪：`.*?`。另请注意我如何将正则表达式的标志修饰符更改为`sim`. 每当我对 HTML 使用正则表达式时，我*总是使用这三个修饰符。*我经常使用它们，我什至找到了一种将修饰字母排列成一个单词的方法，即“sim”作为记忆辅助，以帮助记住修饰符。

快乐编码！

# java - 使用递归实现 Stack 的 Pop 方法

> ID：12813164
> 
> 赞同：3
> 
> 时间：2012-10-10T06:23:03.067
> 
> 标签：java, recursion, stack

我正在自学java。这两天我一直在研究数据结构。我正在阅读“Java 中的数据结构和算法”一书。我有一个练习有问题。它要求使用递归实现 pop 方法，以便在调用该方法时它应该立即删除所有项目。有人可以帮忙吗？关于如何做到这一点的指针将不胜感激。谢谢。（以下是当前实现的pop方法）。

```
 public double pop() // take item from top of stack
{

        return stackArray[top--]; // access item, decrement top
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:31:13.437

首先，IMO 您应该了解如何实现此方法的非递归对应物。

它可以是这样的：

```
public void popAll() {

  while(!stack.isEmpty()) {
      stack.pop();
  }
} 
```

一旦你理解了这一点，递归版本应该很容易：

```
public void popAllRecursive() {

     if(stack.isEmpty()) {
        //nothing to remove, return
        return;
     }
     stack.pop();  // remove one stack element

     popAllRecursive(); // recursive invocation of your method

} 
```

由于它是一个练习，我只是为您提供一个想法并将实现留给您（您可以考虑在类 Stack 中提供方法并使用顶部计数器和 stackArray - 您的堆栈的实现。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:27:32.083

您需要考虑堆栈中没有任何内容的基本情况，即`stack.pop() == null`.

对于递归情况，它非常直观，因为您只需要递归调用`pop()`直到满足基本情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:30:53.027

重复调用`pop()`直到堆栈结束。由于您没有提到数据的存储方式，因此无法帮助您提供代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T04:28:44.267

谢谢大家，我解决了这个问题。不知道是否有效，但我确实喜欢以下内容：

```
 public void pop()
{

    if(isEmpty()){

        return;
    }

    if (top>=0){

        stackArray[top] = stackArray[top--];
        pop();
    }

} 
```

# c# - Metro 风格应用程序的安全 WSDL

> ID：12813165
> 
> 赞同：0
> 
> 时间：2012-10-10T06:23:05.127
> 
> 标签：c#, web-services, wsdl, windows-8

我有一些需要在 Windows 8 Metro 风格应用程序中引用的 Web 服务，通常您可以通过 VS2012 添加对服务的引用，但这些服务位于安全层之后。

我已将 .WSDL 文件下载到本地 PC，现在我需要为该服务生成类文件。

我在本地 PC 上找到的 WSDL.exe 适用于 .NET 4.0，并生成不适合 .NETCore 框架的代码。是否有适用于 Windows 8 应用程序的 WSDL.exe？

Visual Studio 2012 显然可以添加对非安全 asmx WSDL Web 服务的引用，因此该功能必须在某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:14:30.080

如果有人感兴趣，我发现了如何做到这一点。

您只需通过普通浏览器从站点下载 XML WSDL 文件。

然后在 VS2012 中，您可以直接添加对该文件的服务引用（即放入文件 c:\tmp\mywsdl.xml 的完整路径），它将能够为您生成代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:33:38.447

根据小调查，Metro 风格的应用程序不支持原始的基于 .NET 1.x asmx 的 Web 参考代理。

Metro 风格应用程序中的添加服务引用（右键单击项目并选择添加服务引用）支持具有 SOAP 1.1 端点的 Web 服务。

解决方法应该是删除无法构建的有问题的构造函数（不幸的是，每次重新生成代码时都需要这样做），并将实例 BasicHttpBinding 和 EndpointAddress 传递给 WSFTerminalsSoapClient 的构造函数之一。

查看以下参考资料，在这方面可能会对您有所帮助：

[WinRT Metro 的 Web 服务](https://stackoverflow.com/questions/10470543/web-services-from-winrt-metro)

[Windows 8 Metro 风格应用程序中的 WCF？绝对支持](http://blogs.msdn.com/b/piyushjo/archive/2011/09/22/wcf-in-win8-metro-styled-apps-absolutely-supported.aspx)

# php - 从 PHP 获取 MySQL 主键和外键约束？

> ID：12813168
> 
> 赞同：1
> 
> 时间：2012-10-10T06:23:38.510
> 
> 标签：php, mysql, pdo

我正在使用 PDO/PHP/MySQL 构建与 Smarty 集成的数据网格应用程序。

有没有一种快速方便的方法（使用 db 模式或一些 PDO 命令）在 PHP 中获取：

*   表的主键
*   表的外键约束列表？

（我使用 InnoDB 作为模式）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:30:18.010

您可以通过查询`information_schema`表来获取关键信息：

```
SELECT * 
FROM information_schema.KEY_COLUMN_USAGE 
WHERE REFERENCED_TABLE_NAME = 'my_table_name' 
```

[MySQL：如何找到所有具有引用特定 table.column 的外键并且具有这些外键值的表？](https://stackoverflow.com/questions/806989/mysql-how-to-i-find-all-tables-that-have-foreign-keys-that-reference-particular)

您可以使用以下方法获取主键`SHOW TABLE`：

```
SHOW INDEX FROM my_table_name 
WHERE key_name = 'PRIMARY' 
```

[MySQL：动态确定表的主键](https://stackoverflow.com/questions/893874/mysql-determine-tables-primary-key-dynamically)

在具有大量数据库/表的服务器上查询`information_schema`表可能会很慢。

您可以使用它来加快速度：

```
SET GLOBAL innodb_stats_on_metadata = 0 
```

[http://www.mysqlperformanceblog.com/2011/12/23/solving-information_schema-slowness/](http://www.mysqlperformanceblog.com/2011/12/23/solving-information_schema-slowness/)

# unit-testing - Javascript的单元测试

> ID：12813169
> 
> 赞同：1
> 
> 时间：2012-10-10T06:23:39.660
> 
> 标签：unit-testing

谁能告诉我是否可以为 javascript 和 jquery 创建 nunit 测试用例？如果有可能如何对javascript和jquery进行单元测试？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:26:36.777

您可以使用 Qunit 测试库来测试您的 javascript 和 jQuery..

[http://qunitjs.com/](http://qunitjs.com/)

您还可以使用[FireUnit](http://ejohn.org/blog/fireunit/) ，一个萤火虫扩展来对您的 javasvript 进行单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:26:05.920

我不知道这是否是你需要的，但我用这个站点测试我的 Javascript：http: [//jsfiddle.net/](http://jsfiddle.net/) 你可以输入代码并执行以查看结果。

# iphone - 下载第 6 张图片后应用程序崩溃

> ID：12813170
> 
> 赞同：1
> 
> 时间：2012-10-10T06:23:41.210
> 
> 标签：iphone, objective-c

我有问题，需要帮助。我有一张桌子，在单元格上我有图像的水平滚动。图片是从网上下载的。当我下载第 6 张图片时，我的应用程序崩溃了。对于异步上传，我使用[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

```
 -(void) fastCreateImage
   {
int tempID = self.currentPageNow;
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1.2f * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
    if(tempID==self.currentPageNow)
    {
        NSUInteger objIdx = [self.imageViews indexOfObject: [NSNumber numberWithInt:tempID]];
        if(objIdx != NSNotFound) {
            NSLog(@"WAS CACHED!!!!!!");
        }
        else
        {
             UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 193.5f)];

    NSString *urlInString =[NSString stringWithFormat:@"%@/uploads/gallery/hotels/%@",webSite,[self.urlGarbage objectAtIndex:self.currentPageNow]];
            SDWebImageManager *manager = [SDWebImageManager sharedManager];
            [manager downloadWithURL:[NSURL URLWithString:urlInString]
                            delegate:self
                             options:0
                             success:^(UIImage *image, BOOL cached)
             {
                 myImageView.image = image;
                 [[self.views objectAtIndex:tempID] addSubview:myImageView];
                 [self.imageViews addObject:[NSNumber numberWithInt:tempID]];
                 NSLog(@"LOADED IMG");
             }
                             failure:nil];
            [myImageView release];
        }

    }
});
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:38:23.703

由于您收到内存警告，我猜您的图像太大而无法放入内存。图像最多使用`width*height*4`（取决于颜色深度）您的内存。计算每个图像的内存需求，看看这是否是问题所在。

# asp.net - 更好的是：每次都创建新对象或将其存储在会话中？

> ID：12813171
> 
> 赞同：1
> 
> 时间：2012-10-10T06:23:43.190
> 
> 标签：asp.net, performance, session, object, pagespeed

让我们举一个表适配器（类型化数据集）的例子

我在会话中存储数据集。但我不知道什么对表适配器更好。

一般来说，与存储和获取会话相比，创建对象的性能会很差吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:34:10.987

那总是取决于你的要求。

如果数据集中的数据较少，并且您非常频繁地调用数据库以一次又一次地获取相同的数据，则最好将其存储在会话中，但是如果所有用户的数据都相同，那么您应该使用缓存，因为它更快比会话。

但是，如果数据集中的数据很大，则最好调用数据库，因为存储数据会降低应用程序的速度，即性能可能会严重下降。

**注意**：这始终取决于数据大小以及您从数据库中查询数据的频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:36:22.293

这两种选择使用不同的资源。

创建对象的新实例需要时间。在会话中存储实例会使用内存。

如果您每次需要一个新实例时都创建一个新实例，那么它只会在您使用它的短时间内占用内存。如果你把它存储在会话中，它会一直占用内存，如果你不将它从会话中移除，它甚至会在用户离开后占用一段时间的内存。

如果您正在考虑在将表适配器保持在会话中的同时保持它与数据库的连接，那也会用完与数据库的连接，这是一种更加有限的资源。这将严重限制该网站可以处理的用户数量。

通常，您应该只将内容存储在实际具有状态的会话中，即确实具有您需要保留的数据的内容。大多数对象的创建时间都很短，以至于为了避免再次创建它们而保留它们是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T06:26:56.357

我不确定，为什么要将它存储在 session 中，但请记住 Session 是 Web 开发中最**昂贵**的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T06:45:53.110

这一切都取决于您的要求，您想要做什么以及您拥有多少数据。

根据我的说法，会话不是存储数据集的好选择，因为一旦它占用了内存将不可用。并且会话有一些限制，例如如果您的会话已过期，那么它可能会抛出 null 错误，您需要刷新它不时。

更好的是当您需要具有大数据的数据集来调用数据库时，因为存储数据会减慢您的应用程序，即性能可能会严重下降。您可以使用 sql server 中的索引选项来快速返回数据。

# node.js - 带有光标的 Mongodb 原生聚合

> ID：12813175
> 
> 赞同：1
> 
> 时间：2012-10-10T06:24:00.477
> 
> 标签：node.js, mongodb, node-mongodb-native

我正在为 nodejs 使用 mongodb 本机驱动程序。我只想知道我们是否有可能进行聚合但该方法将返回一个游标对象？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T14:25:43.003

从 2.6 开始，mongodb 聚合返回一个游标： [http ://docs.mongodb.org/manual/release-notes/2.6/](http://docs.mongodb.org/manual/release-notes/2.6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:06:27.630

MongoDB 的聚合框架总是返回一个文档（目前）。因此 Node 驱动程序无法返回游标。

# android - 实现 onClickListener 到 ViewPager

> ID：12813176
> 
> 赞同：3
> 
> 时间：2012-10-10T06:24:04.080
> 
> 标签：android, image, android-viewpager

```
pager.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> arg0, View arg1, int position,long id) {  

public void restoreState(Parcelable state, ClassLoader loader) {
}
public Parcelable saveState() {
return null;
}

public void startUpdate(View container) {
}
}
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T07:03:06.353

在 instantiateItem() 内的图像上设置监听器：

```
 @Override
        public Object instantiateItem(View collection, int position) {
            final LayoutInflater inflater = getLayoutInflater(); 
            View layout = inflater.inflate(R.layout.my_layout, null);
            final ImageView image = (ImageView)layout.findViewById(R.id.image_display);
            final int cPos = position;
            image.setOnClickListener(new OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                    ImageView i = (ImageView)v;
                    if(cPos == 0)
                    {
                        //...
                    }
                    //...

                }
            });

            return layout;
        } 
```

或者，您可以使用该`ImageView.setTag()`方法包含有关要启动的 Activity 的数据。例如

```
if(position == 0) image.setTag("com.blah.android.SomeActivity");
if(position == 1) image.setTag("com.blah.android.AnotherActivity");
//... 
```

而上面的 onClick() 内部有这个：

```
ImageView i = (ImageView)v;
String activityClassName = (String)i.getTag();   // Get the info we stored in the tag.
MyActivity.this.startActivity((new Intent()).setClassName(MyActivity.this, activityClassName)); 
```

请注意，这里实际上不需要转换为 ImageView，因为`getTag()`它是`View`. 您也不需要为每个 ImageView 使用单独的 OnClickListener。您可以只创建一个 OnClickListener 实例，该实例如上抓取标签数据，并启动适当的活动。在里面的每个 ImageView 上设置这个 OnClickListener `instantiateItem()`。

PS 我强烈建议，如果您正在下载图像，请查看一些为 Android 编写的图像下载器。例如 [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# javascript - 当客户端 onblur 事件被触发并返回 false 时，如何取消文本框的服务器端 OnTextChanged 事件？

> ID：12813191
> 
> 赞同：3
> 
> 时间：2012-10-10T06:24:49.243
> 
> 标签：javascript, asp.net, .net, dom-events

`textbox`我有一个如下的网页-

```
<asp:TextBox ID="txtNumber" runat="server" size="5" MaxLength="9" 
    AutoPostBack="True" OnTextChanged="txtNumber_TextChanged" 
    CssClass="txtBoxPage" Style="margin-left: 3px;" 
    Visible="false" onblur="return [some JS function] false;">
</asp:TextBox> 
```

我想要一个功能，如果用户输入`Nothing`ie ('')`textbox`并将光标移到外面，`textbox`则`Postback`不应触发。目前，即使在`onblur`事件返回后它也会被触发`false`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:47:05.333

如果文本框值为空，您可以`TextChanged`按以下方式抑制事件 -

*   删除 onblur 功能并使用 onchange 代替。
*   在 Page_Load 中添加以下行 -

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        txtNumber.Attributes.Add("onchange", "if(checkEmptyValue(this)) {return false; }");
    } 
    ```

*   在标记中包含以下 JavaScript -

    ```
    String.prototype.trim = function() {     return this.replace(/^\s+|\s+$/g, ""); }; 

    function checkEmptyValue(o) {
        if (o.value == '' || o.value.trim() == '')
            return true;
        else
            return false;
    } 
    ```

试试上面的代码，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:36:59.347

```
document.getElementById('txtnumber').onchange=function(){
    if(this.value!=""){
        _doPostBack('txtNumber',this.value);
    }
} 
```

然后，您可以使用 Request["__EVENTARGUMENT"] 条目检索该值。另外，请确保关闭 AutoPostback。

编辑：在您的 txtNumber_TextChanged 处理程序中，例如：

```
private void txtNumber_TextChanged handler
{
    Response.Write(Request["__EVENTARGUMENT"]);
    //Writes the value of the TextBox. Basically, EVENTARGUMENT is the second argument passed when calling _doPostBack
} 
```

请注意，这完全是可选的，因为您仍然可以使用 txtNumber 对象访问 txtNumber 的值（与传统一样）。

编辑：请注意，当使用 document.getElementById 检索对元素的引用时，您需要将客户端 ID 作为参数传递。例如，如果 txtNumber 对象位于名为 FormView1 的 FormView 中，则生成的客户端 ID 将为 FormView1_txtNumber。对您的代码进行以下修改之一应该可以解决此问题：

1）如果您的javascript在aspx页面上的脚本标签中，只需修改`document.getElementById('txtNumber')`为`document.getElementById('<%= txtNumber.ClientID %>')`

2) 如果您使用的是外部 js 文件，请在调用 js 文件之前更改`document.getElementById('txtNumber')`为`document.getElementById(txtNumberClientID)`并在您的 aspx 页面中插入以下脚本标记：

```
<script type="text/javascript">
    window.txtNumberClientID='<%= txtNumber.ClientID %>';
</script> 
```

让我知道这个是否奏效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:04:22.330

您可以在 jquery 中使用以下代码

```
 <script>
    $('[id$=TextBox1]').live('blur', function (e) {
        if ($('[id$=TextBox1]').val() == '') {
            alert('empty');
            e.preventDefault();
            return false;
        } else {
            alert('fillled');
        }
    });
</script> 
```

试试这个代码，希望它对你有用......

# jquery - jQuery UI 自动完成框显示

> ID：12813193
> 
> 赞同：0
> 
> 时间：2012-10-10T06:25:01.787
> 
> 标签：jquery, jquery-ui-autocomplete

我在手动触发 jQuery 自动完成框时遇到问题。源带有 $.ajax 并返回 json。同样在“打开”功能上，我将一些自定义项目附加到框中。现在我需要的是，当您单击输入时，将看到自动完成框。它不需要搜索或任何东西。只需显示带有自定义附加项目的框。

我试过 minLength: 0 和 $(this).autocomplete('search', ''); 但这些都行不通。任何帮助，将不胜感激。

当前代码：

```
$(".searchBox").autocomplete({
    delay: 300,
    open: function() {
        $('.ui-autocomplete').prepend('<li class="nav-button ui-menu-close"><a href="#">&#215</a></li>');

        var position = $('.ui-autocomplete').position(),
            left = position.left, top = position.right;

        $('.ui-autocomplete').css({left: 0,
            width: "auto",
            'z-index': 1000
        });
        $('.ui-menu-close').on('click', function() {
            $('.searchBox').autocomplete('close');
        });
    },
    source: function(request, response)
    {
        $.ajax({
        url: '/search',
        data: {
            'ajax' : 1,
            'query': request.term
        },
        timeout: 3000,
        dataType: 'json',
        success: function(data) {                           
            console.log(data)
        },
    });
    },
    minLength: 0
}).focus(function() {
    $(this).data('autocomplete')._trigger('open');
    $(this).trigger('keydown.autocomplete');
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:04:25.590

您可能必须与可能隐藏列表的其他自动完成事件作斗争，但这应该有效：

```
$(".searchBox").click(function() {
    $('.ui-autocomplete').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:32:25.950

自动完成对话框仅在 keydown 事件时打开：

```
$('#your_autocomplete_field').trigger('keydown'); 
```

将打开自动完成。当然，字段内必须有一些值，否则不会执行搜索。

但是你说你不想要搜索机制。那么自动完成对您来说是错误的小工具。也许您正在寻找**组合框**

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

# c# - 是否有可能有一个派生类不能调用但类的消费者可以调用的方法？

> ID：12813195
> 
> 赞同：4
> 
> 时间：2012-10-10T06:25:10.770
> 
> 标签：c#, template-method-pattern

我正在实现模板方法模式。客户可以在此模板方法上更改一些设置；但我想阻止模板方法的实现者更改这些设置，因为在这种情况下，他们可能会破坏模板方法（基）类的不变量。如果可能的话，我希望这些东西无法编译。（否则是时候重构策略了:)）

例子：

```
abstract class TemplateMethod
{
    // Clients of implementers of this template method change these settings before
    // calling GetItems()
    public SomeType RootItem { get; set; }
    public bool Recursive { get; set; }
    protected abstract bool ItemIsWhitelisted(SomeType item);
    public IEnumerable<SomeType> GetItems()
    {
        var stack = new Stack<T>();
        stack.Push(RootItem);
        while (!stack.empty())
        {
            var current = stack.Pop();
            if (Recursive)
            {
                foreach (var item in current.Children)
                    stack.Push(item);
            }

            if (!ItemIsWhitelisted(current))
                yield return current;
        }
    }
}

class Implementer : TemplateMethod
{
    protected override bool ItemIsWhitelisted(SomeType item)
    {
        Recursive = false; // Oops; TemplateMethod.GetItems didn't expect this
                           // to change inside ItemIsWhitelisted
        return item.CanFrobinate();
    }
} 
```

一种方法是重构策略，产生以下结果：

```
interface IImplementer
{
    bool ItemIswhitelisted(SomeType item);
}

sealed class NoLongerATemplateMethod
{
    // Clients of implementers of this template method change these settings before
    // calling GetItems()
    public SomeType RootItem { get; set; }
    public bool Recursive { get; set; }
    public IImplementer impl { get; set; } // would be private set in real code
    public IEnumerable<SomeType> GetItems()
    {
        var stack = new Stack<T>();
        stack.Push(RootItem);
        while (!stack.empty())
        {
            var current = stack.Pop();
            if (Recursive)
            {
                foreach (var item in current.Children)
                    stack.Push(item);
            }

            if (!impl.ItemIsWhitelisted(current))
                yield return current;
        }
    }
}

class Implementer : IImplementer
{
    public bool ItemIsWhitelisted(SomeType item)
    {
        Recursive = false; // No longer compiles
        return item.CanFrobinate();
    }
} 
```

我很好奇是否有一种语言功能可以指示这种约束，而无需将重构应用于策略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:37:40.163

您应该使`TemplateMethod`' 的设置不可变：

```
abstract class TemplateMethod
{
    protected TemplateMethod(bool recursive)
    {
        Recursive = recursive;
    }

    public bool Recursive { get; private set; }
    protected abstract bool ItemIsWhitelisted(SomeType item);
    public IEnumerable<SomeType> GetItems() { /* ... */ }
}

class Implementer : TemplateMethod
{
    protected override bool ItemIsWhitelisted(SomeType item)
    {
        Recursive = false; // Oops; Recursive is read-only
        return item.CanFrobinate();
    }
} 
```

**升级版**。

选项 #2。如果难以通过 ctor 传递设置，则可以考虑注入不可变参数对象。像这样的东西（MEF 风格的样本）：

```
public interface ISettings
{
    bool Recursive { get; }
}

abstract class TemplateMethod
{
    [Import]
    public ISettings Settings { get; private set; }
    protected abstract bool ItemIsWhitelisted(SomeType item);
    public IEnumerable<SomeType> GetItems() { /* ... */ }
} 
```

当然，这意味着`TemplateMethod`也不能更改设置。

选项#3。显式接口实现（如果`TemplateMethod`应该能够更改设置）：

```
public interface ISettingsWriter
{
    bool Recursive { set; }
}

abstract class TemplateMethod : ISettingsWriter
{
    public bool Recursive { get; private set; }

    bool ISettingsWriter.Recursive
    {
        set { Recursive = value; }
    }

    protected abstract bool ItemIsWhitelisted(SomeType item);
}

class Implementer : TemplateMethod
{
    protected override bool ItemIsWhitelisted(SomeType item)
    {
        Recursive = true; // Oops; Recursive is still read-only;

        return true;
    }
} 
```

当然，这意味着每个想要改变`TemplateMethod.Recursive`的人都必须转换`TemplateMethod`为`ISettingsWriter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:54:37.510

我不认为你可以合理地表示这种“每个人都可以调用，但不是我的孩子”的限制（孩子是每个人中的一员，如果不阻止每个人就不能被阻止......）。

完全没有这样的属性是另一种方法（与@Dennis 建议的以某种方式制作术前 R/O 相比）

```
public IEnumerable<SomeType> GetItems(bool Recursive)... 
```

甚至

```
public IEnumerable<SomeType> GetItems(IterationSettings settings = DefaultSettings) 
```

请注意，这种方法（类似于迭代的完整策略模式）也解决了外部“受信任”（非子）调用者在迭代中间更改属性时的问题（即，如果“子”触发了某种回调/事件执行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:02:17.120

如果您的“框架”没有与源代码一起发布，并且实施者正在使用 dll，您可以这样做：

```
public abstract class TemplateMethod
{
    internal void DoSomething() { ... }
}

public abstract class Consumer
{
    TemplateMethod _Template = ...;
    protected void DoSomething()
    {
        _Template.DoSomething();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:59:58.973

您可以尝试使用堆栈跟踪来了解调用方法是否会更改值。

```
 private bool _recursive;
    public bool Recursive {
        get
        {
            return _recursive;
        }
        set
        {
            StackTrace stackTrace = new StackTrace();
            if (stackTrace.GetFrame(1).GetMethod().Name == "ItemIsWhitelisted")
            {
                throw new Exception("Please don't");
            }
            _recursive = value;
        }
    } 
```

或者您可以在堆栈跟踪中检查 DeclaringType 方法

```
stackTrace.GetFrame(1).GetMethod().DeclaringType 
```

# javascript - 为什么这个javascript一直说未定义？

> ID：12813201
> 
> 赞同：0
> 
> 时间：2012-10-10T06:25:41.473
> 
> 标签：javascript, html

我正在使用 maxmind 的 geoip 脚本，以便在访问者到达我的网站时调用他们的各个城市和州名。这就是我所做的。

我的标题中有这个：

```
<script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script> 
```

然后，在我的`<body>`标签下，我有以下内容：

```
<script language="JavaScript">
var country=geoip_country();
var region=geoip_region();
var city=geoip_city();
if(country=="")
    country="US";
if(region=="")
    region="New York";
if(city=="")
    city="New York";
</script> 
```

然后，为了显示访问者的城市，我放了这个：

```
<script language="JavaScript">document.write(city);</script> 
```

但是，当我将上面的内容直接放在我的网站上时，它会在城市应该出现的任何地方显示*未定义。*它与我拥有的其他 javascript 一起执行此操作，我想知道我做错了什么......

感谢您的任何见解。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:55:08.080

问题是这一行：

```
var country=geoip_country(); 
```

当您的第一个脚本块执行到该行时，它会崩溃，因为没有这样的函数`geoip_country();`，这意味着该块中没有后续行被执行，因此调用`geoip_city()`并且`geoip_region()`根本不会发生。

（但`city`由于 JavaScript 的“提升”机制，变量本身仍然存在，因此可以从第二个脚本块访问它，但仍然具有默认值`undefined`。）

您需要将该行更改为：

```
var country=geoip_country_name(); 
```

或者，根据您的需要，执行以下操作：

```
var country=geoip_country_code(); 
```

更正该错误后，脚本的其余部分应按您的预期运行，包括获取城市。

演示：http: [//jsfiddle.net/2kbeg/](http://jsfiddle.net/2kbeg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:30:39.493

该语句可能在 DOM 准备好之前执行，document.write(city); 你可以把它放在函数中并调用身体负荷。您可以将脚本标记放在 Head 中或就在结束 body 标记之前。

您可以将城市分配给某个 span 或 div 或任何 html 控件，而不是使用 document.write()。

```
<body onload="myFun();" >........
<div id="city" ></div>

<script language="JavaScript">

function myFun()
{
  // document.write(city);
    document.getElementById('city').innertText = city;
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:30:53.827

对于链接资源，我认为您需要指定类型，而不是语言：

```
<script type="text/javascript" src="http://j.maxmind.com/app/geoip.js"></script> 
```

编辑：根据评论，是的，最好写入指定的输出区域：

```
<div id="OutputDiv">No output yet.</div> 
```

您可能还希望将默认值放入`window.onload`函数中，而不是立即运行：

```
window.onload = function() {
    //Your code here
    var country=geoip_country();
    var region=geoip_region();
    var city=geoip_city();
    if(country=="")
        country="US";
    if(region=="")
        region="New York";
    if(city=="")
        city="New York";

    //document.write(city);
    var outputDiv = document.getElementById('OutputDiv');
    outputDiv.innerHTML = "City is " + city;

}; 
```

这还可以让您确定在设置变量（或应该是）之后运行输出。

# java - 如何解决“java.lang.OutOfMemoryError：超出 GC 开销限制”

> ID：12813203
> 
> 赞同：3
> 
> 时间：2012-10-10T06:25:52.840
> 
> 标签：java, memory, redhat

我阅读了有关解决此问题的[堆栈溢出页面](https://stackoverflow.com/questions/1393486/what-does-the-error-message-java-lang-outofmemoryerror-gc-overhead-limit-excee)，并尝试添加命令行选项 -XX:-UseGCOverheadLimit 以及“-Xmx”参数。但是，我的程序仍然抛出了内存不足的错误。

该程序将大量（>40,000 个键）单词保存到 MultiKeyMap 中，并在具有大量内存的服务器上运行。

关于如何避免错误的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:51:28.990

如果您的问题被可靠地减少（老实说，即使不是），我建议激活`-XX:+HeapDumpOnOutOfMemoryError`JVM 标志。当有 时，这将`OutOfMemoryError`产生内存的二进制转储。然后可以通过[Eclipse MAT](http://www.eclipse.org/mat/)等工具对其进行分析，以识别潜在的内存泄漏，并帮助解释为什么垃圾收集器很难清除您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:55:00.403

此问题意味着垃圾收集器无法释放足够的内存让您的应用程序继续运行。因此，即使您使用“XX:-UseGCOverheadLimit”关闭该特定警告，您的应用程序仍然会崩溃，因为它消耗的内存比可用内存多。

我会说你有内存泄漏症状。尝试按照另一个答案中的建议挖掘内存转储，或者尝试[Plumbr](http://plumbr.eu)，这是专为这些情况创建的内存泄漏监视工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:15:34.913

“GC 开销限制”可能与内存泄漏有关，但并非必须如此。根据最初的问题，很难说真正的问题是什么。您应该有一个没有所有深奥标志的“正常”命令行配置，以及一个合理的 Xmx 设置来保存您的所有数据。您应该激活详细 gc 日志记录以了解实际导致开销的 GC 并通过更改 GC 策略或生成大小来调整它。

通常，当您使用尝试对内存友好的结构并使用软引用或弱引用时，会出现开销错误。如果您自己使用它们，请仔细检查您是否了解它们的作用，因为它们很容易被误解。

# java - JPA - ReverseMappingTool 将数字映射为双精度

> ID：12813206
> 
> 赞同：0
> 
> 时间：2012-10-10T06:26:10.443
> 
> 标签：java, openjpa

在使用 OpenJPA 的 ReverseMappingTool 创建我的实体后，我认识到该工具将我的 postgres-DB的 db-fieldtype“ **intversion numeric(9,0) NOT NULL ”映射到****private double intversion；**在我的 java 文件中。由于小数点后有一个零，我只是不明白为什么该字段映射为 double 而不是 int？

改变我改变那个？我想要一个 int 或一个 Integer 在我的 Java-Class 中而不改变 db 结构。

关键是，文件是在运行时生成的，因此无法检查结构并手动更改它。

# iphone - 如何删除uiview背景黑色

> ID：12813213
> 
> 赞同：0
> 
> 时间：2012-10-10T06:26:52.533
> 
> 标签：iphone

我正在开发一个应用程序。我将一张图片设置为 uiview 的背景，如下所示

```
projectview=[[UIView alloc]initWithFrame:CGRectMake(200, 0, 640, 700)];

UIGraphicsBeginImageContext(projectview.frame.size);
[[UIImage imageNamed:@"board.png"] drawInRect:projectview.bounds];
UIImage *lblviewimage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

projectview.backgroundColor=[UIColor colorWithPatternImage:lblviewimage];
[self.view addSubview:projectview]; 
```

它在模拟器中工作正常。但是当我在设备中运行这个时，该图像被添加到 uiview 并且该图像以外的剩余空间将显示为黑色。所以请告诉我如何删除那个黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:31:44.903

只需使用 `projectview.backgroundColor = [UIColor clearColor];`

或者如果你想显示默认的白色然后写

`projectview.backgroundColor = [UIColor whiteColor];`

现在，

```
UIImageView *imageview = [[UIImageView alloc]initWithFrame:CGRectMake(200, 0, 640, 700)];
[projectview addSubView:imageview]; 
```

不要设置 UIView 的背景，在其上添加另一个 imageView 并相应地设置框架。

# design-patterns - 它是一种并发编程模式吗？

> ID：12813216
> 
> 赞同：0
> 
> 时间：2012-10-10T06:27:11.640
> 
> 标签：design-patterns, concurrent-programming

一些面向对象的设计出现在我的脑海中。它就像一个游泳池和一个工厂。

工厂创建可以在多个线程之间共享的资源。一个资源实体很昂贵，并且它的创建需要很多时间。一个资源可以同时被多个线程使用。

在我的特定情况下，资源是 SSH 连接。SSH 连接使用一个 TCP 套接字。但是一个 SSH 连接可以有多个会话。每个线程都为自己创建新会话。会话创建不需要与工厂一起工作。

多个线程可以尝试与同一个远程主机进行交互。

我为资源定义了状态：

初始化一些线程试图获得 SSH 连接，但它不存在。资源创造的过程很漫长。如果另一个线程也将尝试获取相同的资源，它会得到所需的资源正在进行中，并且第二个线程去等待通知。

free 所有会话都关闭并且没有线程使用 SSH 连接

忙 至少一个线程已经建立了 SSH 连接

关闭的 tcp 套接字被破坏

有一个资源的状态图：

*   -> 初始化 -> 忙碌 -> 空闲 -> 关闭

    空闲->忙

我阅读了有关 OOP 模式、企业应用程序模式、并发模式的书籍，但我不记得我上面描述的情况。

SSH 只是一个例子。这种模式适用于任何支持并发工作的繁重资源。当第二个线程想要创建资源但创建资源的第二个实例是无意义的。

如果是图案，那他叫什么名字？我相信这个设计已经在某个地方描述过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:11:38.223

据我所知，您必须解决“连接池”的问题。连接池是“池模式”的一种实现。

与模式（我所看到的）不同的是，在您的实现中，会话的用户对连接和池化的东西的处理有所了解。

对我来说，如果用户从会话池中订购一个会话并将其返回给它，则似乎是一种更“模式方式”。因此池系统知道是否需要连接，并且创建/销毁机制对用户是透明的。用户获得“连接”是因为他有一个会话。

> 会话创建不需要与工厂一起工作。

这可能是真的，但会话的生命周期对于连接的生命周期至关重要。因此，我将负责创建/销毁池而不是使用对象。

# javascript - WinJS.Namespace 定义的方法不可访问

> ID：12813219
> 
> 赞同：0
> 
> 时间：2012-10-10T06:27:24.110
> 
> 标签：javascript, windows-8, winjs

我有一个导航应用程序。在页面控制中存在相应的 js 文件。我想访问项目 js 文件夹中的外部 js 文件。我已经指定

commonFunctions.js

```
WinJS.Namespace.define(

'commonFunctions', {

        authenticate: authenticate

    }); 
```

现在在访问 PageControl 的 js (page2.js) 文件中的方法时

commonFunctions.authenticate();

它给出了一个错误：

0x800a1391 - JavaScript 运行时错误：“commonFunctions”未定义

如果有这个异常的处理程序，程序可以安全地继续。

这是正确的方法吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:35:27.167

我相信您遇到的问题是您没有在正在加载的页面中引用脚本文件，或者您没有将`commonFunctions`对象包装在函数中。

我试过这个：script.js

```
(function () {
    WinJS.Namespace.define("CommonObject", {
        auth: function () {
            return true;
        }
    });
}()); 
```

默认.js

```
 app.addEventListener("activated", function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                // TODO: This application has been newly launched. Initialize
                // your application here.
            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }

            if (app.sessionState.history) {
                nav.history = app.sessionState.history;
            }
            args.setPromise(WinJS.UI.processAll().then(function () {
                var test = CommonObject.auth(); // Comes out true and no exceptions
                if (nav.location) {
                    nav.history.current.initialPlaceholder = true;
                    return nav.navigate(nav.location, nav.state);
                } else {
                    return nav.navigate(Application.navigator.home);
                }
            }));
        }
    }); 
```

默认.html

```
<script src="/js/script.js"></script> 
```

# magento - Magento 企业版升级

> ID：12813221
> 
> 赞同：0
> 
> 时间：2012-10-10T06:27:32.887
> 
> 标签：magento, upgrade

我正在尝试使用差异文件将 magento 企业版从 1.11 升级到 1.12。我正在使用像“patch -p0 < name_of_diff_file.diff”这样的补丁命令。但没有运气。谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:30:30.140

似乎将新文件简单地同步到项目中然后运行升级会更容易。即使有 50k 订单，1.11 -> 1.12 升级也只需不到 5 分钟

# python - Tkinter 列表框未更新

> ID：12813224
> 
> 赞同：0
> 
> 时间：2012-10-10T06:27:57.617
> 
> 标签：python, tkinter

我有一个`Listbox`在插入后没有更新的函数，它在`update_listbox`函数中。我`print`在更新前后添加了一些语句来检查列表大小，并使用另一个打印来检查插入的值。所有的`print`陈述都显示了我对它的期望。但它没有显示在`Listbox`.

```
class View(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.list = Listbox(self, selectmode=SINGLE)
        self.list.pack(fill=BOTH, expand=YES)
        self.list.delete(0, END)
        print(self.list.size()) #shows 0 which
        self.update_listbox()
        print(self.list.size()) #shows the correct number, but listbox doesn't show anything

    def update_listbox(self):
        temp=products.get_keys()
        self.list.delete(0, END)
        for i in temp:
            print str(products.get_item(i)) #Is showing the correct output.
            self.list.insert(END, str(products.get_item(i))) 
```

**编辑**

正如牛排先生所建议的那样，我改为`Listbox(self, selectmode=SINGLE)`但`Listbox(master, selectmode=SINGLE)` 创建了两个列表框，一个在`Entryframe`（下面添加的代码）的上方和下方，下面的一个正确显示了更新。为什么我现在看到两个列表框？

```
class Controller(object):
    def __init__(self, master=None):
        self._master = master
        #filemenubar
        self.menu()
        #listbox
        self.listboxFrame = View(master)
        self.listboxFrame.pack(fill=BOTH, expand=YES)
        #entry widget
        self.EntryFrame = Other(master)
        self.EntryFrame.pack(fill = X) 
```

# ejb-3.0 - 最后一次尝试传递失败并出现以下错误：javax.jms.TransactionRolledBackException：

> ID：12813230
> 
> 赞同：1
> 
> 时间：2012-10-10T06:28:11.240
> 
> 标签：ejb-3.0, ibm-mq, rad, websphere-7

我正在使用 websphere MQ 和 WAS。

我创建了消息驱动 bean，在 oncall 方法中我正在做业务层的东西来从数据库中检索数据，但是我收到了错误，正如我在标题中提到的那样我正在使用像这里一样的 cod

```
JAXBContext context = JAXBContext.newInstance("com.schema.ticketservices_v1");
            Unmarshaller unmarshaller = context.createUnmarshaller();

            RetrieveTicketRequest retrieveTicketRequest = (RetrieveTicketRequest) unmarshaller.unmarshal(new FileInputStream("D://request4.xml"));
            System.out.println(retrieveTicketRequest.getCorrelationID());
            TicketRemarksBindingImpl bindingImpl = new TicketBindingImpl();
            RetrieveTicketResponse retrieveTicketResponse = bindingImpl.retrieve(retrieveTicketRequest); 
```

我能够从数据库中检索预期的数据，但得到以下异常

```
 [10/10/12 11:39:36:778 IST] 000000ea RegisteredRes E   WTRN0063E: An illegal attempt to commit a one phase capable resource with existing two phase capable resources has occurred.
[10/10/12 11:39:36:779 IST] 000000ea RegisteredRes E   WTRN0086I: XAException encountered during prepare phase for transaction 0000013A494AE71F000000020000000AA2E8C1F524D2F1D345141C905AF81B4416CCDB030000013A494AE71F000000020000000AA2E8C1F524D2F1D345141C905AF81B4416CCDB0300000001\. Local resources follow.
[10/10/12 11:39:36:779 IST] 000000ea JTAResourceBa I   WTRN0089I: LocalTransactionWrapper@:54ae54ae  localTransaction:com.ibm.ws.rsadapter.spi.WSRdbSpiLocalTransactionImpl@54c554c5  enlisted:trueHas Tran Rolled Back = false  registeredForSynctruemcWrapper.hashcode()1415009367: Vote: none.
[10/10/12 11:39:36:780 IST] 000000ea JTAResourceBa I   WTRN0089I: com.ibm.mq.connector.xa.XARWrapper@53985398: Vote: commit.
[10/10/12 11:39:36:814 IST] 00000024 ActivationSpe I   J2CA0524I: The Message Endpoint for ActivationSpec jms/testMDBspec (com.ibm.mq.connector.inbound.ActivationSpecImpl) and MDB Application TicketRemarkServiceEJBProjectEAR#TicketRemarkServiceEJBProject.jar#TicketMDB is deactivated.
[10/10/12 11:39:36:815 IST] 00000024 SibMessage    W   [:] CWWMQ0007W: The message endpoint TicketRemarkServiceEJBProjectEAR#TicketRemarkServiceEJBProject.jar#TicketMDB has been paused by the system.  Message delivery failed to the endpoint more than 0 times.  The last attempted delivery failed with the following error: javax.jms.TransactionRolledBackException: 
    at com.ibm.mq.connector.inbound.WorkImpl.callDeliveryFailed(WorkImpl.java:464)
    at com.ibm.mq.connector.inbound.WorkImpl.xaStateChanged(WorkImpl.java:421)
    at com.ibm.mq.connector.xa.XAObservable.update(XAObservable.java:120)
    at com.ibm.mq.connector.xa.XARWrapper.rollback(XARWrapper.java:444)
    at com.ibm.tx.jta.JTAXAResourceImpl.rollback(JTAXAResourceImpl.java:363)
    at com.ibm.tx.jta.RegisteredResources.deliverOutcome(RegisteredResources.java:1589)
    at com.ibm.tx.jta.RegisteredResources.distributeOutcome(RegisteredResources.java:1926)
    at com.ibm.tx.jta.RegisteredResources.distributeRollback(RegisteredResources.java:2579)
    at com.ibm.tx.jta.TransactionImpl.internalRollback(TransactionImpl.java:1951)
    at com.ibm.tx.jta.TransactionImpl.internalRollback(TransactionImpl.java:1914)
    at com.ibm.tx.jta.TransactionImpl.coreStage2CommitProcessing(TransactionImpl.java:1101)
    at com.ibm.tx.jta.TransactionImpl.stage2CommitProcessing(TransactionImpl.java:1128)
    at com.ibm.tx.jta.TransactionImpl.processCommit(TransactionImpl.java:989)
    at com.ibm.tx.jta.TransactionImpl.commit(TransactionImpl.java:919)
    at com.ibm.ws.tx.jta.TranManagerImpl.commit(TranManagerImpl.java:436)
    at com.ibm.tx.jta.TranManagerSet.commit(TranManagerSet.java:161)
    at com.ibm.ejs.csi.TranStrategy.commit(TranStrategy.java:927)
    at com.ibm.ejs.csi.TranStrategy.postInvoke(TranStrategy.java:230)
    at com.ibm.ejs.csi.TransactionControlImpl.postInvoke(TransactionControlImpl.java:570)
    at com.ibm.ejs.container.EJSContainer.postInvoke(EJSContainer.java:4558)
    at com.ibm.ejs.container.MessageEndpointHandler.afterDelivery(MessageEndpointHandler.java:1449)
    at com.ibm.ejs.container.MessageEndpointHandler.invokeMessageEndpointMethod(MessageEndpointHandler.java:806)
    at com.ibm.ejs.container.MessageEndpointHandler.invoke(MessageEndpointHandler.java:767)
    at $Proxy118.afterDelivery(Unknown Source)
    at com.ibm.mq.connector.inbound.WorkImpl.run(WorkImpl.java:333)
    at com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:399)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:55:59.140

> 使用现有的两阶段能力资源提交一个阶段能力资源的非法尝试已经发生。

这是你应该关注的。

确保所有资源都支持 XA 并配置为与 XA 一起使用，我的猜测是 DB 配置了 XA 而 MQ 没有。

此外，还有一个选项可以在 XA 事务中使用**一个**非 XA 资源，它称为 Last Participant Support。

# python - 如何请求带有一些帖子数据的文件？

> ID：12813233
> 
> 赞同：0
> 
> 时间：2012-10-10T06:28:26.933
> 
> 标签：python, python-3.x, python-2.7

我正在开发一个瓶子，我在其中开发了一个应用程序，如果我在发布数据中传递有效密钥，它会强制下载一个文件。现在在使用 python httplib 库进行测试时，我在一个变量中获取文件，但我需要真实文件。请求代码是

```
import urllib2
url="http://127.0.0.1:8080/down/chrome.bin"
data = "7VXZ7vuxEpAGG9xi+LICMg"
req = urllib2.Request(url,data)
f = urllib2.open(url, data)
print f.read() 
```

现在我需要真正的文件而不是读取它。那么对此的任何解决方案也对此有任何解决方案吗？我的首要任务是python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:00:37.783

We can use REST client extension in google chrome and mozila also [Request Library](http://docs.python-requests.org/en/latest/) in python for this

# asp.net - 在运行时设置 Video Src

> ID：12813235
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:28:30.250
> 
> 标签：asp.net, visual-studio-2010, html, video, html5-video

我正在使用 html5 的视频元素来支持不同浏览器中的视频

```
<video id="ss" controls="controls" tabindex="5" class="video-js vjs-default-skin" data-setup="{}" poster="my_video_poster.png">
     <source src="Videos/2.webm" type='"video/webm" codecs="vp8, vorbis"' >
      <source src="Videos/2.ogv" type='"video/ogv" codecs="theora, speex"'>
      <source src="Videos/2.mp4" type="video/mp4">
      Your browser does not support the <code>video</code> element.
     </video> 
```

我需要`SRC`在单击按钮时设置一个视频。我遇到了如何`src`在运行时在 asp.net 中设置视频的问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:36:26.353

```
$('#ss').attr('src','Videos/2.ogv');
var video = $('#ss').get(0);
    video.load();
    video.play();// if you want to make it play after source changed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:34:04.260

请使用 jQuery 在运行时更改视频源。

请参阅链接了解更多详情。

`$("#ss video")[0].load();`更改`src`属性后尝试

[http://forum.jquery.com/topic/change-youtube-and-yahoo-video-links-to-embedded-players](http://forum.jquery.com/topic/change-youtube-and-yahoo-video-links-to-embedded-players)

# python - 如何检查为什么要导入 python 模块？

> ID：12813238
> 
> 赞同：3
> 
> 时间：2012-10-10T06:28:40.413
> 
> 标签：python, import

我有一个很大的 python 模块库。有时，在导入模块时，我看到正在导入意外的模块。为此，我一直在使用`python -v`, 查看正在导入哪些模块。从手册页：

```
-v     Print  a  message  each  time a module is initialized, showing the place
       (filename or built-in module) from which it is loaded.  When given twice,
       print a message for each file that is checked for when searching for a
       module.  Also provides information on module cleanup at exit. 
```

好吧，这不是真的。例如：

```
import portalmq # directory /home/blahblah/python_modules/portalmq
# /home/blahblah/python_modules/portalmq/__init__.pyc matches /home/blahblah/python_modules/portalmq/__init__.py
import portalmq # precompiled from /home/blahblah/python_modules/portalmq/__init__.pyc 
```

如您所见，该`-v`标志仅提供有关导入哪些模块的信息，但不提供有关哪个导入语句，哪个文件/行触发导入的信息。使用`-vv`不会改变任何东西（显示了已尝试模块的列表，但没有说明为什么首先尝试导入）

但我需要确切地知道：哪个导入语句，哪个文件/行触发了这些导入。我怎样才能得到这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T06:47:09.037

进口挂钩！只需将此代码添加到您的主脚本入口点即可跟踪`sys.meta_path.append`执行后的每个导入。

```
import traceback

class TracingFinder:
    def find_module(self, fullname, path=None):
        print 'loading module', fullname
        traceback.print_stack()

import sys
sys.meta_path.append(TracingFinder()) 
```

测试：

```
def foo():
    import test
    import this

foo() 
```

输出：

```
loading module test
  File "moo.py", line 15, in <module>
    foo()
  File "moo.py", line 12, in foo
    import test
  File "moo.py", line 6, in find_module
    traceback.print_stack()
loading module this
  File "moo.py", line 15, in <module>
    foo()
  File "moo.py", line 13, in foo
    import this
  File "moo.py", line 6, in find_module
    traceback.print_stack() 
```

# mysql - 需要优化 MySQL 查询

> ID：12813247
> 
> 赞同：4
> 
> 时间：2012-10-10T06:29:17.897
> 
> 标签：mysql

我有一个需要 33 秒的查询有没有更好的方法来重写它，我怎样才能将它转换为程序

```
select ut.templateId,
(
case 
when ut.reportTypeId=4 then 'Account'
when ut.reportTypeId=5 then 'Campaign' 
when ut.reportTypeId=6 then 'AdGroup' 
when ut.reportTypeId=7 then 'Ad'
when ut.reportTypeId=8 then 'Keyword' 
end
)as ReportType ,
ur.reportId,
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) < 5 then a.reportId else 0 end) as '<5secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 5 and 10 then a.reportId else 0 end) as '5-10secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 11 and 20 then a.reportId else 0 end) as '11-20secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 21 and 30 then a.reportId else 0 end) as '21-30secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 31 and 60 then a.reportId else 0 end) as '31-60secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 61 and 120 then a.reportId else 0 end) as '61-120secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 121 and 1800 then a.reportId else 0 end) as '2-30mins',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) > 1800 then a.reportId else 0 end) as '>30mins'
from

(select reportId,createdTS from T_ReportMonitor where status='EndSP')a,
(select reportId,createdTS from T_ReportMonitor where status='BeginSP')b,
(select templateId,reportTypeId,reportConsoleType from T_UserTemplate) ut,
(select reportId,templateId,createdTS,modifiedTS,isDeleted from T_UserReport) ur

where a.reportId=b.reportId 
and date(ur.createdTS) = 20120731
and ut.templateId=ur.templateId 
and reportConsoleType in ('Adser','APIAdser') 
and ur.isDeleted=false
and a.reportId=ur.reportId 
and ur.reportId!=313509 AND ur.reportId!=313510 AND ur.reportId!=313511 AND ur.reportId!=313512 AND ur.reportId!=313509 AND ur.reportId!=313510 AND ur.reportId!=313511 AND ur.reportId!=313512 AND ur.reportId!=313520; 
```

查询的解释结果为

```
+----+-------------+-----------------+------+---------------+------+---------+------+--------+--------------------------------+
| id | select_type | table           | type | possible_keys | key  | key_len | ref  | rows   | Extra                          |
+----+-------------+-----------------+------+---------------+------+---------+------+--------+--------------------------------+
|  1 | PRIMARY     | <derived2>      | ALL  | NULL          | NULL | NULL    | NULL |  20071 |                                |
|  1 | PRIMARY     | <derived3>      | ALL  | NULL          | NULL | NULL    | NULL |  20072 | Using where; Using join buffer |
|  1 | PRIMARY     | <derived5>      | ALL  | NULL          | NULL | NULL    | NULL | 148591 | Using where; Using join buffer |
|  1 | PRIMARY     | <derived4>      | ALL  | NULL          | NULL | NULL    | NULL | 154030 | Using where; Using join buffer |
|  5 | DERIVED     | T_UserReport    | ALL  | NULL          | NULL | NULL    | NULL | 124008 |                                |
|  4 | DERIVED     | T_UserTemplate  | ALL  | NULL          | NULL | NULL    | NULL | 151745 |                                |
|  3 | DERIVED     | T_ReportMonitor | ALL  | NULL          | NULL | NULL    | NULL |  60849 | Using where                    |
|  2 | DERIVED     | T_ReportMonitor | ALL  | NULL          | NULL | NULL    | NULL |  60849 | Using where                    |
+----+-------------+-----------------+------+---------------+------+---------+------+--------+--------------------------------+ 
```

**我有在 where 子句和任何其他比较中使用的列上的键，但它们都没有在查询中使用，是不是因为它们是派生查询。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:50:58.787

它们是派生查询，但我认为没有理由这样做。

例如，考虑`reportId`每一行中的 总是相同的。那么总是参考`reportId`驱动表是有利的（MySQL应该足够聪明，可以自己做）。

例如 a 和 b 表可以像这样连接

```
FROM
T_UserReport AS ur
JOIN T_ReportMonitor AS a ON (a.reportId = ur.reportId AND a.status = 'EndSP')
JOIN T_ReportMonitor AS b ON (b.reportId = ur.reportId AND b.status = 'BeginSP') 
```

然后`T_ReportMonitor`只需要一个索引`status`和`reportId`：

```
CREATE INDEX ut_ndx ON T_ReportMonitor ( status, reportId, createdTS ) 
```

这允许 MySQL 立即为 a 选择 EndSP 条目，并为 JOIN 提供方便的 reportId 列；完成此操作后，它还发现自己具有用于查询的 createdTS。（更大的）数据表本身根本不需要访问。

同样的概念也适用于其他表。如果你

*   加入第 1 列，
*   在 column2 [AND column2a...]**值**上有一个**简单**的 WHERE 过滤子句，
***   查询正文中只需要 column3*   并且该表明显大于迄今为止命名的三列，**

 **那么你会发现这样做是有利的

JOIN table AS alias ON (alias.column1 = ... AND alias.column2 = 'filter value')

并有一个索引，例如

```
CREATE INDEX table_ndx ON table ( column2, column1, column3 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:00:46.187

您的查询的主要问题是它使用子查询。MySQL 不能在子查询上使用索引，因为它基本上会在内存（或磁盘）中为您的子查询创建一个新表。尝试进行连接。

试试这个

```
select ut.templateId,
(
case 
when ut.reportTypeId=4 then 'Account'
when ut.reportTypeId=5 then 'Campaign' 
when ut.reportTypeId=6 then 'AdGroup' 
when ut.reportTypeId=7 then 'Ad'
when ut.reportTypeId=8 then 'Keyword' 
end
)as ReportType ,
ur.reportId,
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) < 5 then a.reportId else 0 end) as '<5secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 5 and 10 then a.reportId else 0 end) as '5-10secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 11 and 20 then a.reportId else 0 end) as '11-20secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 21 and 30 then a.reportId else 0 end) as '21-30secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 31 and 60 then a.reportId else 0 end) as '31-60secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 61 and 120 then a.reportId else 0 end) as '61-120secs',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) between 121 and 1800 then a.reportId else 0 end) as '2-30mins',
(case when timestampdiff(SECOND,b.createdTS,a.createdTS) > 1800 then a.reportId else 0 end) as '>30mins'
from
T_ReportMonitor as a JOIN T_ReportMonitor as b ON (a.reportId=b.reportId) JOIN  T_UserReport as ur ON (a.reportId=ur.reportId) JOIN T_UserTemplate as ut ON (ut.templateId=ur.templateId)
WHERE a.status='EndSP' AND b.status='BeginSP'
and date(ur.createdTS) = 20120731
and reportConsoleType in ('Adser','APIAdser') 
and ur.isDeleted=false
and ur.reportId NOT IN (313509,313510,313511,313512,313509,313510,313511,313512,313520); 
```

确保 T_ReportMonitor.reportId、T_ReportMonitor.status 和 T_UserReport.reportId 上有一个键。

还有一件事会降低您的查询质量。您在 where 中使用函数：

```
date(ur.createdTS) 
```

这意味着 MySQL 将不得不处理每一行以查看该函数的结果。这甚至可能被证明是最大的性能提升。尝试使该字段成为日期字段（或创建新的日期字段）或使用类似

```
WHERE ur.createdTS>='2012-07-31 00:00:00' AND ur.createdTS<='2012-07-31 23:95:59' 
```**

# ios - 在 iOS Game Kit 中 - 首次连接设备问题

> ID：12813248
> 
> 赞同：2
> 
> 时间：2012-10-10T06:29:21.217
> 
> 标签：ios

每次我在安装应用程序后第一次尝试通过蓝牙连接设备时，连接需要花费太多时间，或者有时连接被拒绝。

这是我的代码：

```
(void)setUpSession {
    @try {
        if(mTimeOutTimer) {
            [mTimeOutTimer invalidate];
             mTimeOutTimer = nil;
        }

        self.mConnectionState = ConnectionStateDisconnected;
        if(!mPeerPickerController) {
            mPeerPickerController = [[GKPeerPickerController alloc] init];
            mPeerPickerController.delegate = self;
            mPeerPickerController.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
        }

        //Present Peer Picker.
        [mPeerPickerController show];
    }
    @catch (NSException *exception) {
        NSLog(@"Expception Occured at path -> BlueToothManager/setUpSession");
        NSLog(@"Exception Name -> %@",[exception name]);
        NSLog(@"Exception Reason -> %@",[exception reason]);
    }
}

(GKSession *)peerPickerController:(GKPeerPickerController *)picker sessionForConnectionType:(GKPeerPickerConnectionType)type {
    NSString *deviceName = [[UIDevice currentDevice] name];
    GKSession* gkSession = [[GKSession alloc] initWithSessionID:@"BluetoothStreamingVideo" displayName:deviceName sessionMode:GKSessionModePeer];
    gkSession.delegate = self;
    if(self.mGameKitSession) {
        [self.mGameKitSession disconnectFromAllPeers];
        if([self.mGameKitSession isAvailable]) {
            [self.mGameKitSession setAvailable:FALSE];
        }
        [self.mGameKitSession setDataReceiveHandler:nil withContext:nil];
        self.mGameKitSession = nil;
    }
    self.mGameKitSession = gkSession;
    return [gkSession autorelease];
} 
```

但是一旦连接设置好，下次连接设置好，持续时间不长。

# javascript - 从 sinatra 应用程序向 rails 应用程序发出 post 请求

> ID：12813249
> 
> 赞同：1
> 
> 时间：2012-10-10T06:29:31.310
> 
> 标签：javascript, ruby-on-rails, jquery, sinatra

我需要从 sinatra 应用程序向 Rails 应用程序发送一个 POST 请求，该应用程序将返回一些 json。我在本地测试此功能。网址如下：

```
Rails app : railsapp.mydomain.com/api/v1.json
Sinatra app: sinatraapp.mydomain.com 
```

在本地主机上，网址是：

```
Rails app: localhost:3000/api/v1.json
Sinatra app:localhost 3001 
```

在我在本地运行的 sinatra 应用程序中，我有以下代码在本地发出 POST 请求

```
$("#submit").click(function(){
   $.post("http://localhost:3000/api/v1.json",
     {email:"<email_here>",password:"<password_here>"},
     function(data) {
         //Do something with response
     }
   );

}); 
```

此外，`Content-Type`请求标头中的`"application/x-www-form-urlencoded"`. 我在 Firefox 中使用 REST Client 来测试请求并且它可以工作，但是在上面的代码中根本没有发出请求。我的代码有什么错误？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:46:15.690

您还可以设置以下设置：

```
jQuery.support.cors = true; 
```

这使您可以使用 jQuery 进行跨域调用。这可能不是最好的解决方案，因为您正在使用以下请求标头添加漏洞：Access-Control-Allow-Origin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:32:52.300

这将作为 XSS 攻击被阻止。即使它们在同一个域上，子域也是不同的，这就足够了。有关详细信息，请参阅[对子域的 AJAX 调用是否被视为跨站点脚本？](https://stackoverflow.com/questions/3040514/are-ajax-calls-to-a-sub-domain-considered-cross-site-scripting).

要纠正这个问题，您可以简单地让 AJAX 访问您的本地控制器，并使用 ruby​​ 发出请求，这不受上述限制的限制。

# git - 如何将子模块粘贴到修复标签上？

> ID：12813250
> 
> 赞同：2
> 
> 时间：2012-10-10T06:29:35.577
> 
> 标签：git, tags, dependencies, git-submodules

假设我们有两个模块`super`和`minor`. Module`super`取决于`v1.0.3`module的版本`minor`，而`v1.0.3`是一个带注释的标签`minor`：

```
 v1.0.3
super <-------- minor 
```

模块`minor`是一种“私有”，即只有极少数开发人员具有写访问权限，而其他开发人员只有读访问权限。模块`super`是公开的。

现在我想利用 Git 子模块`super`对模块之间的依赖关系进行建模。`minor`不幸的是，我无法弄清楚如何将依赖关系修复为`v1.0.3`.

此外，我还希望 --- 在未来的某个时间 --- 将依赖项修复到另一个版本。

在所有情况下，我都希望...所有开发人员“自动”检索`minor`正确版本的模块。...所有开发人员 --- 除了前面提到的小组 --- 都不允许修改这个依赖项（虽然这是一个小问题）

有任何想法吗？

干杯，/纳米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:43:24.930

首先，子模块引用提交（SHA1），因此记住正确 SHA1 的最简单方法是进入您的子模块`git checkout v1.0.3`，然后简单地返回到您的父仓库，提交并推送该新状态：因为标签与提交相关联，您将推送您的子模块与该标签相关联的事实。
当您要调整同一子模块的标签时，可以重复相同的过程。

关于修改该子模块的权利，一种控制方法是在您的 Git 服务器上添加一个[授权框架：](http://sitaramc.github.com/gitolite/auth.html) [gitolite](https://github.com/sitaramc/gitolite)。

# git - 还原一些 Git 提交，保留其他的？

> ID：12813251
> 
> 赞同：4
> 
> 时间：2012-10-10T06:29:45.013
> 
> 标签：git

假设我提交了 A、B 和 C，所有这些都涉及完全不同的代码路径。（因此它们是独立的，并且提交 B 可以在没有 A 的更改的情况下存在，依此类推。）

提交 A 引入了一个错误，而提交 B 和 C 很好。所以我想恢复到提交 A 之前的代码状态，然后提交更改 B 和 C。

最好的方法是什么？一种方法是简单地执行 a`git revert <SHA-of-commit-before-A>`然后手动添加提交 B 和 C - 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:33:40.067

您不需要添加回`B`和`C`：它们已经提交并且不会受到添加新提交的还原的影响（负面形象`A`）。

另一种方法是（**如果您还没有推送这些提交**）进行交互式变基（`git rebase -i A^`），并重新排序您的提交，完全放弃`A`。
您将在 rebase 中看到以下选项（请参阅[git Book](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)）

```
# Commands:
#  p, pick = use commit
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
# 
```

但同样，这将改变你的历史，并使你成为一个 git push --force，如果其他人已经从你的回购中撤出，这并不总是一个好主意。
在这种情况下，还原仍然是最安全的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:32:54.217

如果您已经推送了更改（因此对其他人可见），那么正确的做法是`git-revert <SHA-of-A>`. 这明确地做出了一个与 A 相反的新提交。如果没有人看到你的树，你可以使用`git-rebase -i A^`（这里`A^`的意思是“A 的父级”）交互式地重新排序或省略自 A 以来的提交。在这种情况下，你可以删除 A 和它将完全按照您的描述进行（展开到 A 之前，然后仅重新应用 B 和 C）。

# xslt - 如何在 xslt 中添加两个 int 值

> ID：12813255
> 
> 赞同：1
> 
> 时间：2012-10-10T06:30:07.307
> 
> 标签：xslt, xslt-1.0

我如何在 XSLT 中添加两个 int 值，我的字段最大长度为 5，截至目前我在做什么，请在下面找到粘贴的代码

假设 Rowcount 值为**7**

```
<xsl:param name ="Rowcount"/>

<xsl:variable name ="value1">
<xsl:value-of select ="00000"/>
</xsl:variable>

<xsl:value-of select ="$Value1 + $Rowcount"/> 
```

输出显示为 7

但所需的输出是**00007**

好心劝告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:40:44.587

0000 加 7 得到值 7，这在数学上是正确的，你想要的是一个格式化的数字或字符串。

您可以使用该功能`string format-number(number, string, string?)`

的第一个参数`format-number(7, "00000")`是您输入的数字，第二个是格式模式。第三个参数是可选的，格式的名称。

```
<xsl:value-of select="format-number($Rowcount, $value1)"/> 
```

[http://www.w3schools.com/xsl/func_formatnumber.asp](http://www.w3schools.com/xsl/func_formatnumber.asp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T06:34:26.137

如果我没记错的话，您可以尝试将 value1 视为这样的字符串：

```
<xsl:value-of select ="$Value1 + '' + $Rowcount"/> 
```

对于更复杂的数字格式，请查看：

[http://www.w3schools.com/xsl/func_formatnumber.asp](http://www.w3schools.com/xsl/func_formatnumber.asp)

# ios - iOS - 本地通知 - 要显示的自定义设计

> ID：12813256
> 
> 赞同：1
> 
> 时间：2012-10-10T06:30:08.120
> 
> 标签：ios, jailbreak

![在此处输入图像描述](../Images/57aebb46ad81b836e36a8d2a36a9fb8b.png)

如何在本地通知中显示自定义设计（显示图像）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:38:27.223

对于 iOS，请查看 UILocalNotification

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil) return;

localNotif.fireDate = someDate;
localNotif.timeZone = [NSTimeZone defaultTimeZone];

localNotif.alertBody = @"This is a custom message."
localNotif.alertAction = @"View Details";

localNotif.soundName = UILocalNotificationDefaultSoundName;
localNotif.applicationIconBadgeNumber = 1;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
[localNotif release]; 
```

在越狱中其他明智的选择可能是。

希望这会帮助你。

# dojo - 如何在dojo中单击按钮刷新特定的树节点？

> ID：12813261
> 
> 赞同：0
> 
> 时间：2012-10-10T06:30:30.703
> 
> 标签：dojo

我有一个使用 QueryReadStore 和 ForestStoreModel 的延迟加载树。我填充了我的树并扩展了一些节点。现在在后端为特定节点添加了更多数据。我必须一键刷新该节点并在其下显示新的子元素。

我想知道如何做到这一点，因为我没有在网上获得任何此类方法或任何示例。当我浏览商店 API 时，我发现了一个 onChildrenChange() 方法，它表示如果后端发生任何更改，它将更新商店。我也尝试了这种方法，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:31:06.040

将此功能扩展/添加到您的树中：

```
 reloadNode:function(nodeId){

        nodes=this.getNodesByItem({"id":nodeId});//Create dummyitem&search for nodes
        if (nodes[0]!==undefined) { // Is there a node with this id ?
        nodes[0]._loadDeferred=false; // Reload the first node with this id
        this._expandNode(nodes[0]);//this = "dijit/Tree"

        }
    } 
```

# c# - 在各种技术之间传递数据

> ID：12813263
> 
> 赞同：0
> 
> 时间：2012-10-10T06:30:32.220
> 
> 标签：c#, java, c++, node.js

我正在创建客户端-服务器应用程序，我计划在其中包含至少 2 种技术。最近我读了很多关于`node.js`处理网络通信的性能，所以我想试一试。

问题是，在 node.js 中编写整个服务是不可接受的（遵循规则：“为任务选择适当的技术，而不是为技术选择适当的任务”），所以我只想在 node.js 中创建 Web 界面（客户端和服务器端）并在 java/c#/C++ 中实现其余部分。

我的第一个想法是启动一个单独的 net-interface 和 core-app 进程，并使用 localhost 套接字在它们之间进行通信。但我想知道是否有另一种方法可以做到这一点，因为套接字有其局限性（缓冲区大小等）。

所以问题是：是否可以**在同一台机器上使用各种技术强制进程之间进行通信？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:59:35.750

是的，可以通过使用**Web 服务来强制各种技术之间的通信。**

在我看来，使用 Web 服务在各种技术之间传递数据比使用 javascript 更健壮。您知道，用户可以简单地使用禁用 javascript 的浏览器。

每一种成熟的编程语言都支持 Web 服务。

此外，如果您想集成使用 Java 等相同语言编写的不同应用程序，您可以使用 Java 消息服务。奇迹般有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:12:18.207

您可以使用各种 IPC（进程间通信）技术，但使用套接字将具有使您能够将组件移动到不同服务器的额外好处。然后，您可以通过套接字使用 SOAP 或 REST 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T08:40:41.373

有很多方法可以实现这一点，Web 服务自传统以来一直使用 XML 在 2 个不同的技术系统之间进行数据通信。**Web 服务**本身是在不同技术之间进行通信的非常好的方法之一，而如今所有好的编程语言都用于实现 Web 服务。

除此之外，您还掌握了可以使用链式进行硬件通信的技术，即进程交换和切换、IPC（进程间通信）、脚本引擎（JavaScript）、XML Involution（类似于 ATM 机器用于同步的技术数据）。

# python - 快速而肮脏的二进制异或函数

> ID：12813265
> 
> 赞同：0
> 
> 时间：2012-10-10T06:30:38.367
> 
> 标签：python, hash, binary

![我想做的基本功能](../Images/80792f580fe94dfe7190e477cf63aa05.png)嘿，我又一次无情的堆栈溢出神。

我只是在寻找一种开始使用简单异或哈希函数的方法。由于以太网电缆已神秘地从楼上的路由器上断开（再次），我有点无法访问我常用的资源。我跑题了。

我需要做的是能够将十位与二进制字符串中的下十位折叠起来，并将`xor`它们相互对折。所以我在想伪代码

```
Raw input = (binary string or S)
Def function xor:
    Find Len of s
    Loop
        [0:9], [10:19] = xorcheck
        Loop 
            Xor [0:] & [10]
        Return result 
    [0 +1:] & [10 + 1:]
Return loop to xorcheck and store the.returned result.            
                       Variable hash ,maybe)
If second [:] return "none"
Divide Len by ten,
If true add "1000000000"
Else Add 0
Check if Len is / 10
if true print hash
Else add 0, check Len /10 
```

基本上，它的轻量级 python 脚本将创建二进制散列。这里有一些我看过的例子，但它们做得太多了，比如输出到十六进制。我真正需要的是函数 xor 二进制字符串并输出结果以及填充整个字符串的方法，因此字符数是十的倍数。

由于我现在正在使用我的小型智能手机进行研究，因此我为质量差的问题道歉:'(

# 编辑更新

我已将 Inspector 的代码编辑为

```
 my_text = raw_input ()
''.join(bin(ascii)[2:] for ascii in [ord(char) for char in my_text])
def myHash(binary_encoded_ascii):
    answer = 0
    binstr = binary_encoded_ascii + '1'
    binstr += '0'*(20 - (len(bitstr) %20))
    for i in range(len(binstr)/20):
        s = binstr[20*i:20*(i+1)]
        s1,s2 = s[:10], s[10:]
        total += int(s1, 2) ^ int(s2, 2)
        return total
    print total 
```

它似乎要求输入文本，但没有打印任何值。我怎样才能让它输出结果，以便我可以查看它是否真的在做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:55:28.890

阅读您的作业问题后：

首先，您需要将文本转换为其字符的 ascii 值的二进制编码：

```
''.join(bin(ascii)[2:] for ascii in [ord(char) for char in my_text]) 
```

这为您提供了文本中所有字符的二进制编码 ascii 值，然后您可以将其传递给您的哈希函数

```
def myHash(binary_encoded_ascii):
    answer = 0
    binstr = binary_encoded_ascii + '1'
    binstr += '0'*(20 - (len(bitstr) %20))
    for i in range(len(binstr)/20):
        s = binstr[20*i:20*(i+1)]
        s1,s2 = s[:10], s[10:]
        answer += int(s1, 2) ^ int(s2, 2)
    return answer 
```

# c# - 防止在 MySQL 数据库中插入相同的值

> ID：12813267
> 
> 赞同：0
> 
> 时间：2012-10-10T06:30:50.563
> 
> 标签：c#, mysql

假设我有表 TableA（ColumnCode，ColumnA2，ColumnA3，ColumnA4，ColumnA5）。

**注意：ColumnCode(PrimaryKey) 不是自动递增的。**我要防止的是以下情况：

```
INSERT INTO TableA VALUES(1111, 'val1a', 'val2a', 'val3a', 'val4a', 'val5a') 
```

下一个插入具有相同的值但不同的 ColumnCode：

```
INSERT INTO TableA VALUES(1234, 'val1a', 'val2a', 'val3a', 'val4a', 'val5a') 
```

问题是我想防止这样的插入，在这种情况下，我可能会遇到仅为另一个 ColumnCode 插入相同值的情况。

任何的想法？

**注意2：下一个插入不是问题，因为我没有插入所有相同的列值！！！**

```
INSERT INTO TableA VALUES(1456, 'val1a', 'val2a', 'val3a', 'val32a', 'val654a') 
```

如图所示，set(ColumnA2, ColumnA3, ColumnA4, ColumnA5) 的值不是重复的。ColumnA4 和 ColumnA5 的值不同。所以，对我来说，只有当所有四个 ColumnA 值都在任何 ColumnCode 下的表中时，才会出现重复。

希望我澄清了我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:33:03.183

您可能想看看 using [SQL UNIQUE Con​​straint](http://www.w3schools.com/sql/sql_unique.asp)

> UNIQUE 约束唯一标识数据库表中的每条记录。
> 
> UNIQUE 和 PRIMARY KEY 约束都为一列或一组列提供唯一性保证。
> 
> PRIMARY KEY 约束自动定义了一个 UNIQUE 约束。
> 
> 请注意，每个表可以有许多 UNIQUE 约束，但每个表只能有一个 PRIMARY KEY 约束。

看看下面的例子......

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/99e7f/1/0)

```
CREATE TABLE TABLE1(
  col1 varchar(50) PRIMARY KEY,
  col2 varchar(50),
  col3 varchar(50),
  col4 varchar(50),
  CONSTRAINT uc UNIQUE (col2,col3,col4)
 ); 
```

这应该工作：

```
INSERT INTO TABLE1 VALUES('1','1','1','1');
INSERT INTO TABLE1 VALUES('2','1','1','2'); 
```

这应该失败：

```
INSERT INTO TABLE1 VALUES('1','1','1','1');
INSERT INTO TABLE1 VALUES('2','1','1','1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:34:55.977

您应该能够添加多列唯一约束。就像是：

```
alter table TableA add CONSTRAINT UNIQUE(ColumnA2, ColumnA3, ColumnA4, ColumnA5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:36:40.500

列 `ColumnCode` 是 PK，因此它是唯一的；您接受此列的唯一值，

所有列`ColumnA1-5`都不是唯一列，这就是它接受所有重复值的原因，如果您想避免 `create unique key` 在 tht 列的任何列中出现重复条目​​。

```
alter table tableA add unique index(ColumnA2, ColumnA3, ColumnA4, ColumnA5); 
```

这将解决你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:38:12.207

您可以在数据库中使用[触发器](http://msdn.microsoft.com/en-us/library/ms191524%28v=sql.105%29.aspx)。

触发器是代码，它可以在查询之后运行一些代码，也可以代替查询。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms187834%28v=sql.105%29.aspx)查看一些示例。

但正如另一个答案中提到的，使用`UNIQUE`约束更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:45:26.130

更改表 TableA 添加约束唯一（ColumnA2，ColumnA3，ColumnA4，ColumnA5）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T06:49:20.090

请删除所有唯一键

```
alter table TableA  drop unique key; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T07:02:17.460

您可以使用所有需要唯一的列中的一个校验和列。并更新所有插入和更新。在更新和插入任何新行之前检查是否存在 ckecksum 列。在 ms sql 中，我会这样做

```
 CREATE TABLE [dbo].[test]
    (
      [ID] [int] NOT NULL ,
      [Index] [tinyint] NOT NULL ,
      [C0] [real] NOT NULL ,
      [C1] [real] NOT NULL ,
      [C2] [real] NOT NULL ,
      [C3] [real] NOT NULL ,

    )
ON  [PRIMARY]

GO
ALTER test  ADD UQCHECKSUM AS BINARY_CHECKSUM(
[Index],
[C0] ,
[C1] ,
[C2] ,
[C3] ,
[) PERSISTED
Go  
ALTER TABLE test    ADD CONSTRAINT [UNK_UQCHECKSUM] UNIQUE (UQCHECKSUM)
GO 
```

请检查 mysql [http://www.bluegecko.net/mysql/using-checksums-to-ensure-table-consistency-in-mysql/](http://www.bluegecko.net/mysql/using-checksums-to-ensure-table-consistency-in-mysql/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T10:31:09.407

```
CREATE TABLE [dbo].[test]
    (
      [ID] [int] NOT NULL ,
      [C1] [varchar] NOT NULL ,
      [C2] [varchar] NOT NULL ,
      [C3] [varchar] NOT NULL ,
      [C4] [varchar] NOT NULL ,
      [C5] [varchar] NOT NULL ,
      [ChecksumColumn] [varchar] NOT NULL //new column
    ) 
```

在测试表上创建一个插入和更新触发器以查找列（C1，C2，C3，c4，c5）的校验和并插入到 ChecksumColumn`CRC32(C1,C2,C3,c4,c5)`用于获取校验和

在插入和更新之前，请检查以下条件 Select top 1 from test where ChecksumColumn =`CRC32(C1,C2,C3,c4,c5)`

如果存在 - 重复记录，否则继续更新 ChecksumColumn`CRC32(C1,C2,C3,c4,c5)`

# vba - 如何在 Visual Basic 中创建 PNG 文件？

> ID：12813280
> 
> 赞同：1
> 
> 时间：2012-10-10T06:31:45.343
> 
> 标签：vba, vb6

> **可能重复：**
> [VB6 PictureBox SavePicture - 将图片另存为png？](https://stackoverflow.com/questions/3754233/vb6-picturebox-savepicture-save-picture-as-png)

如何在 Visual Basic 6.5 中创建一个高度为 10、宽度为 6 的 PNG 文件？

绘制 png 文件的头文件包含什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:39:26.300

我之前见过一个模块，它使用 GDI+ 将 BMP 转换为 PNG

这是一个 .bas 文件的模块：

```
Option Explicit

Private Type GUID
    Data1 As Long
    Data2 As Integer
    Data3 As Integer
    Data4(0 To 7) As Byte
End Type
Private Type GdiplusStartupInput
    GdiplusVersion As Long
    DebugEventCallback As Long
    SuppressBackgroundThread As Long
    SuppressExternalCodecs As Long
End Type
Private Type EncoderParameter
    GUID As GUID
    NumberOfValues As Long
    type As Long
    Value As Long
End Type
Private Type EncoderParameters
    count As Long
    Parameter As EncoderParameter
End Type

Private Declare Function GdiplusStartup Lib "GDIPlus" (token As Long, inputbuf As GdiplusStartupInput, Optional ByVal outputbuf As Long = 0) As Long
Private Declare Function GdiplusShutdown Lib "GDIPlus" (ByVal token As Long) As Long
Private Declare Function GdipCreateBitmapFromHBITMAP Lib "GDIPlus" (ByVal hbm As Long, ByVal hPal As Long, BITMAP As Long) As Long
Private Declare Function GdipDisposeImage Lib "GDIPlus" (ByVal Image As Long) As Long
Private Declare Function GdipSaveImageToFile Lib "GDIPlus" (ByVal Image As Long, ByVal FileName As Long, clsidEncoder As GUID, encoderParams As Any) As Long
Private Declare Function CLSIDFromString Lib "ole32" (ByVal Str As Long, id As GUID) As Long
Private Declare Function CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Dest As Any, Src As Any, ByVal cb As Long) As Long

Public Sub SavePic(ByVal pict As StdPicture, ByVal FileName As String, PicType As String, _
    Optional ByVal Quality As Byte = 80, _
    Optional ByVal TIFF_ColorDepth As Long = 24, _
    Optional ByVal TIFF_Compression As Long = 6)
    Screen.MousePointer = vbHourglass
    Dim tSI As GdiplusStartupInput
    Dim lRes As Long
    Dim lGDIP As Long
    Dim lBitmap As Long
    Dim aEncParams() As Byte
    On Error GoTo ErrHandle:
    tSI.GdiplusVersion = 1
    lRes = GdiplusStartup(lGDIP, tSI)
    If lRes = 0 Then
        lRes = GdipCreateBitmapFromHBITMAP(pict.Handle, 0, lBitmap)
        If lRes = 0 Then
            Dim tJpgEncoder As GUID
            Dim tParams As EncoderParameters
            Select Case PicType
            Case ".jpg"
                CLSIDFromString StrPtr("{557CF401-1A04-11D3-9A73-0000F81EF32E}"), tJpgEncoder
                tParams.count = 1
                With tParams.Parameter
                    CLSIDFromString StrPtr("{1D5BE4B5-FA4A-452D-9CDD-5DB35105E7EB}"), .GUID
                    .NumberOfValues = 1
                    .type = 4
                    .Value = VarPtr(Quality)
                End With
                ReDim aEncParams(1 To Len(tParams))
                Call CopyMemory(aEncParams(1), tParams, Len(tParams))
            Case ".png"
                CLSIDFromString StrPtr("{557CF406-1A04-11D3-9A73-0000F81EF32E}"), tJpgEncoder
                ReDim aEncParams(1 To Len(tParams))
            Case ".gif"
                CLSIDFromString StrPtr("{557CF402-1A04-11D3-9A73-0000F81EF32E}"), tJpgEncoder
                ReDim aEncParams(1 To Len(tParams))
            Case ".tiff"
                CLSIDFromString StrPtr("{557CF405-1A04-11D3-9A73-0000F81EF32E}"), tJpgEncoder
                tParams.count = 2
                ReDim aEncParams(1 To Len(tParams) + Len(tParams.Parameter))
                With tParams.Parameter
                    .NumberOfValues = 1
                    .type = 4
                    CLSIDFromString StrPtr("{E09D739D-CCD4-44EE-8EBA-3FBF8BE4FC58}"), .GUID
                    .Value = VarPtr(TIFF_Compression)
                End With
                Call CopyMemory(aEncParams(1), tParams, Len(tParams))
                With tParams.Parameter
                    .NumberOfValues = 1
                    .type = 4
                    CLSIDFromString StrPtr("{66087055-AD66-4C7C-9A18-38A2310B8337}"), .GUID
                    .Value = VarPtr(TIFF_ColorDepth)
                End With
                Call CopyMemory(aEncParams(Len(tParams) + 1), tParams.Parameter, Len(tParams.Parameter))
            Case ".bmp"
                SavePicture pict, FileName
                Screen.MousePointer = vbDefault
                Exit Sub
            End Select
            lRes = GdipSaveImageToFile(lBitmap, StrPtr(FileName), tJpgEncoder, aEncParams(1))
            GdipDisposeImage lBitmap
        End If
        GdiplusShutdown lGDIP
    End If
    Screen.MousePointer = vbDefault
    Erase aEncParams
    Exit Sub
  ErrHandle:
    Screen.MousePointer = vbDefault
    MsgBox "Error" & vbCrLf & vbCrLf & "Error No. " & Err.Number & vbCrLf & " Error .Description:  " & Err.Description, vbInformation Or vbOKOnly
End Sub 
```

如何调用：

```
SavePic(ByVal pict As StdPicture, ByVal FileName As String, PicType As String, _
    Optional ByVal Quality As Byte = 80, _
    Optional ByVal TIFF_ColorDepth As Long = 24, _
    Optional ByVal TIFF_Compression As Long = 6)

StdPicture -  A picture handle, or a picture box
FileName - The file name to save
PicType - File format to save, available formats: .jpg, .png, .gif, .tiff, .bmp
Quality - Picture quality, default is 80% 
```

例子：

```
SavePic Picture1.Image, "C:\Test.png", ".png" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:02:58.530

VB6 和 VBA（您正在使用的 VB6.5）本身并不支持 PNG。您将需要使用 GDI+（作为标记链接到的）、WIA 或其他外部/第 3 方库。

# jira - JIRA GreenHopper 发布状态

> ID：12813281
> 
> 赞同：0
> 
> 时间：2012-10-10T06:31:48.943
> 
> 标签：jira, release-management, greenhopper

我们公司使用 GreenHopper 安装了 JIRA，我们目前正在涉足它。通常（在 VersionOne 中），我们创建发布，向其中添加项目，这成为发布积压。从这个版本积压中，我们为每个 sprint 挑选项目。

在任何时候，我都可以跟踪正在运行的 sprint 的状态以及发布状态。使用 JIRA，我似乎缺少此发布状态跟踪。我是在看错地方还是只是不在那里。

每当我搜索发布时，我都会得到一个 sprint 发布的时间，而这不是我想要的。

更多信息：根据进一步调查，有一种叫做“经典板”的东西。那些在它们下面有发布和冲刺。这让我可以跟踪发布和冲刺，但在它们之间建立父子关系。不再支持此经典板。如果是这样，我如何在新板上做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:15:44.673

经典板绝对仍然支持，您可以随时继续使用它们。我们希望在不久的将来在新板中实现一些额外的发布计划功能。

谢谢，肖恩

# iphone - 当在 iphone 中再次打开相同的 uiviewcontroller 时，内存不断增加

> ID：12813282
> 
> 赞同：0
> 
> 时间：2012-10-10T06:31:54.387
> 
> 标签：iphone, memory-management, memory-leaks, dealloc, viewdidunload

我有两个 uiviewcontroller，我正在释放 dealloc 中的所有资源，并在 didunload 中将它们设置为 nil，但是当我遇到两个 viewcontroller 时，内存仍在不断增加。

我正在跟踪[这篇文章中使用的内存和释放内存](https://stackoverflow.com/questions/7989864/watching-memory-usage-in-ios)

谁能建议为什么会这样？

这是第二个视图控制器：

```
- (void)viewDidUnload {
    adView.delegate = nil;    
    [self setCountDown:nil];    
    [self setUploadPhoto:nil];   
    [self setBackclicked:nil];   
    [self setInfo:nil];   
    [self setCloseButton:nil];   
    [self setHow2usebg:nil];   
    [self setHow2useInstruction:nil];  
    [self setHow2useicon:nil];    
    [self setVc1:nil];   
    [self setVc:nil];   
    adView = nil;   
    [super viewDidUnload];
}

-(void)dealloc
{

    [adView release];
    [closeButton release];
    [how2usebg release];
    [how2useInstruction release];
    [how2useicon release];
    [videoRecorder1 release];
    [uploadPhoto release];
    [countDown release];
    [backclicked release];
    [info release];
    [vc release];
    [talkingImage release];
    [backgroundImage release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:45:22.170

我想你是在另一个视图控制器上添加一个视图控制器..就像下面的行..

```
[self.view addSubView:yoursecondview]; 
```

创建一个 Appdelegate 对象，然后添加窗口，而不是 self.view

```
AppDelegate *object=[[UIApplication SharedApplication] delegate];
[self.view removeFromSuperview];
[object.window addSubView:yoursecondview]; 
```

# android - 无法从 android 短信收件箱中删除短信

> ID：12813284
> 
> 赞同：1
> 
> 时间：2012-10-10T06:32:03.607
> 
> 标签：android

我开发了一个应用程序来处理收件箱中的短信并进行处理。处理后从收件箱中删除该短信。但删除短信时出错。

我试过这段代码：

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
String phoneNo, msg;
while (cur.moveToNext()) {
    phoneNo = cur.getString(2);
    msg = cur.getString(11);

    // do some process

    String pid = cur.getString(1);
    String uri = "content://sms/conversations/" + pid;
    getContentResolver().delete(Uri.parse(uri), null, null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:05:45.230

确保您在清单中获得 SMS 写入权限。

```
<uses-permission android:name="android.permission.WRITE_SMS"/> 
```

# c - 在 C 中命名源文件的标准方法是什么？

> ID：12813287
> 
> 赞同：9
> 
> 时间：2012-10-10T06:32:06.630
> 
> 标签：c, naming-conventions

是否有在 C 中命名源代码文件的标准方法？

例如，它们是否应该用下划线分隔、大写、驼峰式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T06:33:26.683

没有标准，但许多 C 项目使用小写文件名，用下划线分隔单词。最重要的是要保持一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:36:56.760

没有强制性约定。在某种程度上，这取决于您的系统是否具有区分大小写或不区分大小写的文件名。

`.c`后缀（小写）对于源文件和`.h`头文件基本上是通用的。源文件中包含的其他文件可能具有不同的扩展名，或者根本没有扩展名。

传统上，名称都是小写的（例如，查看标准标题名称）。名称避免使用重音字符、空格和许多其他标点符号，通常遵循可[移植文件名字符集](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_276)（字母数字、下划线、破折号、点）。除此之外，选择很大程度上取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:39:02.887

正如另一个人提到的，在命名源文件时没有标准。它完全取决于团队/组织/小组遵循的约定。我遇到过许多使用小写字母和驼峰式字母的项目。

你好世界.c 你好世界.c

# java - Java代码，添加异常？

> ID：12813293
> 
> 赞同：0
> 
> 时间：2012-10-10T06:32:21.620
> 
> 标签：java, error-handling

好的，所以我有这段代码可以将中缀表达式转换为后缀表达式。有用！除了我希望它能够处理诸如“2+*5”或“wordswordswords”之类的错误。我该怎么做？谢谢！

```
package InToPostfix;

import java.io.IOException;
import javax.script.*;

/** Translates an infix expression to a postfix expression.  
 * 
 * @author Becky Hogan
 *
 */

public class InToPost {
  private Stack theStack;

  private String input;

  private String output = "";

  public static void main(String[] args) throws Exception {
    String input = "";
    String output;
    Object evaluated;
    InToPost theTrans = new InToPost(input);
    output = theTrans.evalOp(); 
    InToPost result= new InToPost(input);
    evaluated= result.evaluate(input);
    System.out.println("Prefix is " + input + '\n');
    System.out.println("Postfix is " + output + '\n');
    System.out.println("The value:");
    System.out.println(evaluated);

  }

/** InToPost Method initiates the stack
 * 
 * @param in the expression string
 */

  public InToPost(String in) {
    input = in;
    int stackSize = input.length();
    theStack = new Stack(stackSize);
  }

  /** evaluate Method evaluates the mathematical expression
   * 
   * @param aString the expression string
   * @return an object obj, the answer
   * @throws Exception 
   */

  public Object evaluate(String aString) throws Exception {
    // create a script engine manager
    ScriptEngineManager factory = new ScriptEngineManager();
    // create a JavaScript engine
    ScriptEngine engine = factory.getEngineByName("JavaScript");
    // evaluate JavaScript code from String
    Object obj = engine.eval(aString);
    return(obj);
    }

  /** evalOp Method decides what to do with the indexed character depending on if it is an operand or operator
   * 
   * @return the postfix
   * @throws Exception
   */

  public String evalOp() throws Exception {
    for (int j = 0; j < input.length(); j++) {
      char ch = input.charAt(j);
      switch (ch) {
      case '+': 
      case '-':
        processOperator(ch, 1); 
        break; //   (precedence 1)
      case '*': // it's * or /
      case '/':
        processOperator(ch, 2); // go pop operators
        break; //   (precedence 2)
      case '(': // it's a left paren
        theStack.push(ch); // push it
        break;
      case ')': // it's a right paren
    gotParen(ch); // go pop operators
    break;
  default: // must be an operand
      if(!Character.isJavaIdentifierPart(ch) && !Character.isDigit(ch)){
          throw new Exception
            ("Unexpected Character Encountered");

      }
    output = output + ch; // write it to output
    break;
  }
}
while (!theStack.isEmpty()) {
  output = output + theStack.pop();

}
return output; // return postfix
  }

  /** Method to determine the precedence of operators.
   * 
   * @param opThis the character in the string
   * @param prec1 precedence of previous operator
   */

  public void processOperator(char opThis, int prec1) {
    while (!theStack.isEmpty()) {
      char opTop = theStack.pop();
      if (opTop == '(') {
        theStack.push(opTop);
        break;
      }// it's an operator
      else {// precedence of new op
        int prec2;
        if (opTop == '+' || opTop == '-')
          prec2 = 1;
        else
          prec2 = 2;
        if (prec2 < prec1) // if prec of new op less
        { //    than prec of old
          theStack.push(opTop); // save newly-popped op
          break;
        } else
          // prec of new not less
          output = output + opTop; // than prec of old
      }
}
theStack.push(opThis);
  }

  /** gotParen Method gets the previous operator
   * 
   * @param ch the character in the string
   */

  public void gotParen(char ch){ 
while (!theStack.isEmpty()) {
  char chx = theStack.pop();
  if (chx == '(') 
    break; 
  else
    output = output + chx; 
}
  }

/**Stack class holds attributes for the stack needed for this assignment
 * 
 * @author Becky Hogan
 *
 */
  class Stack {
private int maxSize;

private char[] stackArray;

private int top;

public Stack(int max) {
  maxSize = max;
  stackArray = new char[maxSize];
  top = -1;
}

public void push(char j) {
  stackArray[++top] = j;
}

public char pop() {
  return stackArray[top--];
}

public char peek() {
  return stackArray[top];
}

public boolean isEmpty() {
  return (top == -1);
}
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:37:37.947

这需要有一个语法解析器规则。按照这种格式写一个：

```
EXPR: NUMBER OPERATOR NUMBER | NUMBER OPERATOR EXPR;
OPERATOR: '+' | '-'| '*' | '/';
NUMBER: [0-9]+ 
```

如果它不匹配规则，那么它是一个解析错误。

示例代码：（未测试）：

```
class BadGrammarException extends Exception{

    /**
     * 
     */
    private static final long serialVersionUID = -2174692292489186639L;

}
class Validator{
   public boolean isValid(String s)
   {
       if(s.equals("+") || s.equals("-") || s.equals("*") || s.equals("/")){
           return true;
       }else{
       try{
           Integer.parseInt(s);
       }catch(Exception e){
           return false;
       }
       }
       return true;
   }
}

class GrammarValidator{
    private final int NUMBER = 0;
    private final int OPERATOR = 1;
    private int state = NUMBER;
    public boolean isValidGrammatically(String line) throws BadGrammarException{
        String[] tokens = line.split(" ");
        boolean flag = true;
        for(String p:tokens){
            if(new Validator().isValid(p)){
                /*everything is ok, token is valid*/
            }else{
                throw new BadGrammarException();
            }
        }
        for(String p:tokens){
            if(checkGrammar(p) == false){
                flag = false;
            }else{

            }
        }
        return flag;
    }

    public boolean checkGrammar(String p) throws BadGrammarException{
        if(state == NUMBER){
            /*expecting integer*/
            try{
                Integer.parseInt(p);
            }catch(Exception e){
                throw new BadGrammarException();
            }
            state = OPERATOR;
            return true;
        }
        if(state == OPERATOR){
            /*expecting operator*/
            if(p.equals("+") || p.equals("-") || p.equals("*") || p.equals("/")){
                       state = NUMBER;
                       return true;
                 }else{
                     throw new BadGrammarException();
                 }
        }/*unknown state*/
        return false;
    }
} 
```

我用以下代码测试了上面的代码：

```
public class Main{
    public static void main(String[] args){
       Scanner scan = new Scanner(System.in);
       while(true){
       System.out.println("CHECK >");
       String line = scan.nextLine();
       try{
         if(new GrammarValidator().isValidGrammatically(line)){
            System.out.println("Valid");
         }
       }catch(BadGrammarException be){
           break;
       }
       }
    }
} 
```

看起来它在输入错误时优雅地退出。不过，您可以更改行为。验证输入后：您可以从中缀转换为后缀。

唯一需要注意的是，输入必须用单个（空格）分隔 NUMBERS 和 OPERATORS 示例有效输入：10 + 20 + 30 + 40 + 50 - 30 - 20 示例无效输入：10+20+30+40+50- 30-20

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:47:59.833

您可以将潜在风险代码包含在 try-catch 块中。

```
try {
   InToPost theTrans = new InToPost(input);
   output = theTrans.evalOp(); 
   InToPost result= new InToPost(input);
   evaluated= result.evaluate(input);
} catch (Exception e) {
   System.out.println(e.getMessage());
} 
```

例如，当发生逻辑错误时，您可以抛出异常。就像你在这里所做的那样：

```
if(!Character.isJavaIdentifierPart(ch) && !Character.isDigit(ch)){
          throw new Exception
            ("Unexpected Character Encountered");

      } 
```

阅读有关[处理异常的更多信息](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

# svn - Svn 分支并合并回主干

> ID：12813297
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:32:42.920
> 
> 标签：svn

> **可能重复：**
> [TortoiseSVN 的优秀分支和合并教程？](https://stackoverflow.com/questions/90/good-branching-and-merging-tutorials-for-tortoisesvn)

这是我的设置。我创建了一个回购。我有树干、树枝和标签。所有最新代码都在后备箱中。我标记发布到生产环境的每个版本。然后，当生产环境中需要解决一些紧急问题时，我遇到了问题。我的后备箱不稳定，需要修复这些问题。所以在那之后我开始分支发布然后标记它们并发布到生产中。现在对于任何紧急问题，我可以在发布分支上工作并修复问题并发送到生产环境。（这是很好地使用分支吗？）现在我对发布分支进行了更改。如何合并更改为中继的代码？任何帮助，将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:35:37.947

这确实是一个很好的使用分支和合并。

标记发布到生产环境。如果可能，请尝试在主干中修复（如果可能，请保持流程敏捷），但如果（太）不稳定，请在分支中修复并部署到生产环境。将修复合并到主干。

相反，在主干上工作时，您可能会发现一些不好的东西。您可能希望将修复合并到分支并将其部署到生产中。

有关*如何*，请参阅文档[http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html)或有关此主题的其他问题[TortoiseSVN 的良好分支和合并教程？](https://stackoverflow.com/questions/90/good-branching-and-merging-tutorials-for-tortoisesvn).

# css - 如何在页面上的特定 div 中加载超链接

> ID：12813298
> 
> 赞同：0
> 
> 时间：2012-10-10T06:32:42.140
> 
> 标签：css, layout

大家好，我知道我在另一个问题上问过这个问题，但我不知道如何解释我自己

所以在flexi css中，我为我的网站制作了一个模板，它有一个DIV类......

因此，如果您查看我提供的图片，我希望链接仅在主列中打开。因为现在当我单击链接时，整个页面都会发生变化，但我只想更改主页。我希望链接在 class='row_6 cssLI PageLayout28_row_6_design' 中打开请帮助

链接到我的图片 [点击](http://i.stack.imgur.com/bHvLV.png)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="includes/CSSLayouts/CSSLayouts.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="includes/CSSLayouts/debug_plus.js"></script>
<link href="includes/CSSLayouts/PageLayout28.css" rel="stylesheet" type="text/css" />
<link href="includes/CSSLayouts/PageLayout28_user.css" rel="stylesheet" type="text/css" />
</head>

<body class="PageLayout28_body_design">
<div class="PageLayout28">
<!-- (CSSLayouts Begin)  #PageLayout28 #build_version=1.1.284;pack=User;category=My Page Layouts;layout=;layoutType=page;scheme=;cssSource=file;assets=;halign=center;minwidth=1028px;maxwidth=1028px;width=1028px;bc=My Page Layouts;bl=final10062012-->

<div class='cssLO PageLayout28_wrapper_layout'>
<div class='wrapper cssLI PageLayout28_wrapper_design'>
<div class='cssLO PageLayout28_row_1_layout'>
<div class='row_1 cssLI PageLayout28_row_1_design'>
<div class='cssLO PageLayout28_column_3_layout'>
<div class='column_3 cssLI PageLayout28_column_3_design'><!-- column_3 Content Starts Here -->&nbsp;<!-- column_3 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_4_layout'>
<div class='column_4 cssLI PageLayout28_column_4_design'><!-- column_4 Content Starts Here -->&nbsp;<!-- column_4 Content Ends Here -->
</div>
</div>
<div class='cssLClearC'></div>
</div>
</div>
<div class='cssLO PageLayout28_row_2_layout'>
<div class='row_2 cssLI PageLayout28_row_2_design'><!-- row_2 Content Starts Here -->&nbsp;<!-- row_2 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_3_layout'>
<div class='row_3 cssLI PageLayout28_row_3_design'>
<div class='cssLO PageLayout28_column_1_layout'>
<div class='column_1 cssLI PageLayout28_column_1_design'><!-- column_1 Content Starts Here -->&nbsp;<!-- column_1 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_2_layout'>
<div class='column_2 cssLI PageLayout28_column_2_design'>
<div class='cssLO PageLayout28_row_6_layout'>
<div class='row_6 cssLI PageLayout28_row_6_design'><!-- row_6 Content Starts Here -->

              MAIN

            <!-- row_6 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_7_layout'>
<div class='row_7 cssLI PageLayout28_row_7_design'>
<div class='cssLO PageLayout28_row_7_xtdalignwrapper_layout'>
<div class='row_7_xtdalignwrapper cssLI PageLayout28_row_7_xtdalignwrapper_design'>
<div class='cssLO PageLayout28_column_5_layout'>
                                               <div class='column_5 cssLI PageLayout28_column_5_design'><!-- column_5 Content Starts Here -->&nbsp;<!-- column_5 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_6_layout'>
                                               <div class='column_6 cssLI PageLayout28_column_6_design'><!-- column_6 Content Starts Here -->&nbsp;<!-- column_6 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_7_layout'>
                                               <div class='column_7 cssLI PageLayout28_column_7_design'><!-- column_7 Content Starts Here -->&nbsp;<!-- column_7 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_8_layout'>
                                               <div class='column_8 cssLI PageLayout28_column_8_design'><!-- column_8 Content Starts Here -->&nbsp;<!-- column_8 Content Ends Here -->
                                               </div>
</div>
<div class='cssLClearC'>
</div>
</div>
</div>
<div class='cssLClearR'>  
</div>
</div>
</div>
<div class='cssLClearR'></div>
</div>
</div>
<div class='cssLClearC'></div>
</div>
</div>
<div class='cssLO PageLayout28_row_4_layout'>
<div class='row_4 cssLI PageLayout28_row_4_design'><!-- row_4 Content Starts Here -->&nbsp;<!-- row_4 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_5_layout'>
<div class='row_5 cssLI PageLayout28_row_5_design'>
<div class='cssLO PageLayout28_column_9_layout'>
<div class='column_9 cssLI PageLayout28_column_9_design'><!-- column_9 Content Starts Here -->

<!-- column_9 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_10_layout'>
<div class='column_10 cssLI PageLayout28_column_10_design'><!-- column_10 Content Starts Here -->

          test | test | test | test |test

<!-- column_10 Content Ends Here -->
</div>
</div>
<div class='cssLClearC'>
</div>
</div>
</div>
<div class='cssLO PageLayout28_row_8_layout'>
<div class='row_8 cssLI PageLayout28_row_8_design'><!-- row_8 Content Starts Here -->

      CopyRight © 2012   All rights reserved

<!-- row_8 Content Ends Here -->
</div>
</div>
<div class='cssLClearR'></div>
</div>
</div>
<div class="cssLClearL"></div>
<!-- #PageLayout28 (CSSLayouts End) -->
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:11:51.633

我认为您希望在不加载页面的情况下在主要部分中动态包含，您可以根据您的 cantaint 使用 i-frame 或 JavaScript/jQuery 切换来实现这一点

这是使用**i-frame的 jsfiddle 示例**

我尝试根据您的 flexi 布局进行布局

[jsfiddle 演示](http://jsfiddle.net/tushar234/EQqzy/)

# mysql - MySql 中哪个存储引擎最好？

> ID：12813307
> 
> 赞同：0
> 
> 时间：2012-10-10T06:33:10.490
> 
> 标签：mysql, storage, innodb, myisam

> **可能的重复：**
> [MyISAM 与 InnoDB](https://stackoverflow.com/questions/20148/myisam-versus-innodb)

MySql 中哪个存储引擎最好？InnoDb 还是 MyIsam？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:38:14.260

没有“最好”，这取决于您/您的应用程序需要什么。

[您可以在参考手册](http://dev.mysql.com/doc/refman/5.6/en/storage-engines.html)中阅读此处的差异：

> **InnoDB：** 用于 MySQL 的事务安全（符合 ACID）存储引擎，具有提交、回滚和崩溃恢复功能以保护用户数据。InnoDB 行级锁定（不升级到更粗粒度的锁定）和 Oracle 风格的一致非锁定读取提高了多用户并发性和性能。InnoDB 将用户数据存储在聚集索引中，以减少基于主键的常见查询的 I/O。为了维护数据完整性，InnoDB 还支持 FOREIGN KEY 引用完整性约束。InnoDB 是 MySQL 5.6 中的默认存储引擎。
> 
> **MyISAM：** 这些表占用空间很小。表级锁定限制了读/写工作负载的性能，因此它通常用于 Web 和数据仓库配置中的只读或以读取为主的工作负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:41:02.123

“最好的”取决于很多事情：

MyISAM 没有关系（外键），如果你想保持表之间的完整性，你必须编写一些触发器，而在 InnoDB 中你可以使用“DELETE ON CASCADE”和这些东西。但是 InnoDB 在迁移时速度较慢，因为它必须检查约束。

有关更多信息，您可以快速浏览：

[http://www.devshed.com/c/a/MySQL/Comparison-of-MyISAM-and-InnoDB-MySQL-Databases-57392/](http://www.devshed.com/c/a/MySQL/Comparison-of-MyISAM-and-InnoDB-MySQL-Databases-57392/)

# perl - Perl中的文本文件操作

> ID：12813317
> 
> 赞同：1
> 
> 时间：2012-10-10T06:33:47.000
> 
> 标签：perl

我有一个如下所示的文本文件：

```
Id:001;status:open;Id:002;status:open;Id:003;status:closed;
Id:004;status:open;Id:005;status:closed;Id:006;status:open;
.... 
.... 
```

这是我的代码：

```
#!/usr/bin/perl -w
use strict;

open IN, "<", "ABC.txt" 
    or die"Can not open the file $!";

my @split_line;           
while(my $line = <IN>) {

    @split_line = split /;/, $line;

    for (my $i = 0; $i <= $#split_line; $i++) {

        print "$split_line[$i]"." "."$split_line[$i+1]\n";  
    }
} 
```

**实际输出：**

```
Id:001 status:open
status:open Id:002
Id:002 status:open
status:open Id:003
Id:003 status:closed
status:closed 
......
...... 
```

**预期的 o/p 为：**

```
Id:001      status:open
Id:002      status:open
.....
.... 
```

我不知道为什么它会输出其他行。任何机构都可以帮助我吗？

嘿，我很抱歉，但我必须修改输出：

实际上输出现在就像

```
**Id        Status**
001       open
002       open
... 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:38:03.890

将循环迭代器更改为`$i+=2`. 由于您仅递增 1，因此您将在下一个循环中再次输出一些值。

```
for (my $i = 0; $i <= $#split_line; $i += 2) {

    print "$split_line[$i]"." "."$split_line[$i+1]\n";
} 
```

# java - 在 JSON 对象中强制执行非空字段

> ID：12813319
> 
> 赞同：33
> 
> 时间：2012-10-10T06:34:02.777
> 
> 标签：java, json, rest, jackson, required

我们的 REST API 接收一些 JSON 对象输入，其中一些字段需要不为空。这些可以是字符串/整数，甚至可以是其他一些类实例作为参考。

我们正在尝试找到一种方法来强制这些字段不为空，而不是在 API 中进行空检查的正确方法。当前的：

```
if (myObject.getSomeOtherObject() == null)
    throw new SomeException(); 
```

我们想要的是这样的：

```
class MyObject{
    @Required
    OtherObject someOtherObject;
    // ...
} 
```

我们尝试了 3 件事：

1) 升级到 jackson 2.0.6 并使用注释 com.fasterxml.jackson.annotation.JsonProperty 但是，这看起来不起作用。找到这些参考资料：http: [//jira.codehaus.org/browse/JACKSON-767](http://jira.codehaus.org/browse/JACKSON-767)

2) 扩展 JsonDeserializer 以检查 null 但问题是它甚至没有在 null 输入上执行。

```
public class NotNullDeserializer<T> extends JsonDeserializer<T> {

    @Override
    public T deserialize(JsonParser jsonparser, DeserializationContext deserializationcontext) throws IOException, JsonProcessingException {

        ParameterizedType superClass = (ParameterizedType) getClass().getGenericSuperclass();
        Class<T> type = (Class<T>) superClass.getActualTypeArguments()[0];

        T t = jsonparser.readValueAs(type);

        if (t == null){
            String classNameField = type.getName();
            String field = jsonparser.getCurrentName();
            throw new WrongInputException("The field '"+field+"' of type '"+classNameField+"' should not be null.");
        }

        return t;
    }
}

public class NotNullAddressDeserializer extends NotNullDeserializer<Address> {

}

@JsonDeserialize(using=NotNullAddressDeserializer.class)
    Address to; 
```

3）编写我们自己的`@Required`注释并尝试使用 ResourceFilter 进行检查，但似乎我无法从 ContainerRequest 中获取实际对象，即使我们可以，也不确定如何在`object.otherObject.someObject.fieldNotNullable`

```
private class Filter implements ResourceFilter, ContainerRequestFilter {
    private final ArrayList<String> requiredParameters;

    protected Filter() {
        requiredParameters = null;
    }

    protected Filter(ArrayList<String> requiredParameters) {
        this.requiredParameters = requiredParameters;
    }

    @Override
    public ContainerRequestFilter getRequestFilter() {
        return this;
    }

    @Override
    public ContainerResponseFilter getResponseFilter() {
        return null;
    }

    @Override
    public ContainerRequest filter(ContainerRequest request) {
        if (requiredParameters != null && requiredParameters.size() > 0) {
            MultivaluedMap<String, String> params = request.getQueryParameters();
            params.putAll(request.getFormParameters());
            StringBuffer missingParams = new StringBuffer();
            for (String reqParam : requiredParameters) {
                List<String> paramValues = params.get(reqParam);
                if (paramValues == null || paramValues != null && paramValues.size() == 0)
                    missingParams.append(reqParam + ",");
            }
            if (missingParams.length() > 0)
                throw new WrongInputException("Required parameters are missing: " + missingParams);
        }
        return request;
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-17T12:27:47.257

JAX-RS 很好地将反序列化与验证区分开来，即 JSON-B（或 Jackson）在*设计*上没有任何机制来强制将值设置为`non-null`等。相反，您可以使用 BeanValidation 来实现：

1.  `javax.validation:validation-api`在`provided`范围内添加依赖项。
2.  将`javax.validation.constraints.NotNull`注释添加到您的字段。

有关更多详细信息，请转到[此处](http://docs.jboss.org/resteasy/docs/3.0.4.Final/userguide/html/Validation.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:44:08.097

`@Required`是注入 bean 的 Spring 框架注解，所以我想说不要将它用于此目的。

您可以改用这个：

[http://robaustin.wikidot.com/annotations-and-notnull](http://robaustin.wikidot.com/annotations-and-notnull)

`@NotNull String myString;`

对于运行时检查，请尝试[http://code.google.com/p/notnullcheckweaver/](http://code.google.com/p/notnullcheckweaver/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-17T12:41:17.077

您可以使用 JSON-SCHEMA，因为您可以使用它来表达对 JSON 字段的许多约束：http: [//json-schema.org/](http://json-schema.org/)

然后，您可以使用 @NotNull JSR 303 注释从架构中生成您的 java 类，并在您的对象上使用 bean 验证。它与杰克逊本机合作，所以你不应该有任何问题。

例如，您可以使用 maven 插件来执行此操作：[http ://wiki.jsonschema2pojo.googlecode.com/git/site/0.3.7/generate-mojo.html](http://wiki.jsonschema2pojo.googlecode.com/git/site/0.3.7/generate-mojo.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-22T14:23:23.267

`not null`您可以结合使用 Jackson JSON 库和`javax.validation`Hibernate 验证器包来强制验证。

如果您使用的是 Maven，这些是您可以使用的依赖项：

```
<dependencies>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>${jackson-version}</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-annotations</artifactId>
        <version>${jackson-version}</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>${jackson-version}</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/javax.validation/validation-api -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>2.0.1.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate.validator</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>${hibernate-validator.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.validator</groupId>
        <artifactId>hibernate-validator-annotation-processor</artifactId>
        <version>${hibernate-validator.version}</version>
    </dependency>

    <dependency>
        <groupId>javax.el</groupId>
        <artifactId>javax.el-api</artifactId>
        <version>3.0.0</version>
    </dependency>

    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>javax.el</artifactId>
        <version>2.2.6</version>
    </dependency>

</dependencies> 
```

然后，您的代码必须将一些 JSON 转换为带注释的对象，并且您需要使用`javax.validation.Validator`. 这是一些示例代码，演示了如何做到这一点（请参阅相关`validate`方法）：

```
public class ShareLocationService {

    private ObjectMapper mapper = new ObjectMapper();

    private ValidatorFactory factory = Validation.buildDefaultValidatorFactory();

    // Materialize the Java object which contains the validation annotations
    public ShareLocation readFrom(String json) throws IOException {
        return mapper.readerFor(ShareLocation.class).readValue(json);
    }

    // validate and collect the set of validations
    public Set<String> validate(String json) throws IOException {
        ShareLocation shareMyLocation = readFrom(json);
        Validator validator = factory.getValidator();
        Set<ConstraintViolation<ShareLocation>> violations = validator.validate(shareMyLocation);
        return violations.stream().map(Object::toString).collect(Collectors.toSet());
    }
} 
```

这是一个使用验证注释的示例类：

```
public class ShareLocation {

    @JsonProperty("Source")
    @NotNull
    private String source;

    @JsonProperty("CompanyCode")
    private String companyCode;

    @JsonProperty("FirstName")
    private String firstName;

    @JsonProperty("LastName")
    private String lastName;

    @JsonProperty("Email")
    private String email;

    @JsonProperty("MobileNumber")
    private String mobileNumber;

    @JsonProperty("Latitude")
    @NotNull
    private Double latitude;

    @JsonProperty("Longitude")
    @NotNull
    private Double longitude;

    @JsonProperty("LocationDateTime")
    @NotNull
    private String locationDateTime; 
```

# google-sites - Google Site Directory 是如何工作的？

> ID：12813321
> 
> 赞同：0
> 
> 时间：2012-10-10T06:34:04.903
> 
> 标签：google-sites

在我看来，Google 协作平台有最好的页面安排。它具有分层树状设置，既具有快速加载时间，又在自动创建 URL 方面非常有效。用户无需再考虑页面类别。它只是一个页面和子页面的列表。您需要做的就是单击并拖动，瞧！你得到你的网址！

但是，数据库设计如何在 Google 协作平台上准确运行？这只是纯 XML 吗？这是否存储在数据存储中？是文件系统吗？这是从 SQL 数据库中提取的吗？还是只是一个分层排列的json文件？

谁能解释这个设计有多复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:14:29.027

这是我最好的猜测：

**网址路径**

*   Google 协作平台中每个页面的唯一 ID 是 URL 路径。
*   URL 路径也是一个动态字符串。它通过javascript拖放更改。URL 通过 AJAX 作为主键保存在单个表上。
*   如果没有父页面，则无法构建页面。
*   从唯一 ID 复制的 web.xml/app.yaml 中的页面 URL 路径会自动更改。
*   每个页面包含标题、内容等。

**假设：** Google 协作平台存储在**BigQuery**和/或**Datastore**中。然后，由 AJAX/GWT 操作。（但是，我认为这可以只用 AJAX Javascript 来完成）

# iphone - 我应该使用故事板和 mercurial 进行团队合作吗？

> ID：12813325
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:34:19.673
> 
> 标签：iphone, ios, xcode, mercurial

我们将在一个由 5 名开发人员组成的团队中开发一个项目，并且我们计划使用 mercurial。

我想知道将情节提要与 mercurial 一起使用是否是个好主意，还是应该使用 .xib？

如果可能，我们对使用故事板更感兴趣。

我在网上搜索并发现了非常有趣的东西，但关于故事板的内容不多。这就是我在这里发帖的原因。

欢迎任何大小的帮助、文章或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:24:26.610

我认为这取决于你的项目有多大，以及它是否会有很多 UI。

我脑海中的故事板的一些缺点：

*   Storyboard 是一个单独的文件，因此一次只能有一个人在 Storyboard 上工作。
*   仅适用于 iOS 5 或更高版本

我建议您看一下[这个](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx)并自己决定是否要使用情节提要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:38:12.760

故事板内部是 xml 文件。所以我认为使用 mercurial 没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:18:09.327

从技术上讲，您可以将故事板与任何 SCM 一起使用，因为故事板是 xml 文件。实际上，我认为在团队中使用 xib 更容易，因为 xib 仅用于一个视图，并且您不必经常合并，因为其他人接触 xib 的机会比故事板小。

# c# - 如何合并列表 使用 LINQ？

> ID：12813327
> 
> 赞同：-1
> 
> 时间：2012-10-10T06:34:22.577
> 
> 标签：c#, linq, list

我有两个 List 实例，即 OldCustomers、NewCustomers。

```
List<Customer> OldCustomers;

List<Customer> NewCustomers; 
```

我只想要老客户和新客户的联合。也就是说，如果 CustomerID 100 存在于 OldCustomerList 和 NewCustomer 列表中，则必须删除 OldCustomer 列表中的客户详细信息，并且必须将 NewCustomer 列表放置在结果列表中，如下所示。

```
List<Customer> NewCustomers;
    Union
List<Customer> OldCustomers; 
```

我如何在 LINQ 中做到这一点？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:47:14.177

为了使用`Union`，您必须自定义`EqualityComparer`：

```
public class CusComparer : EqualityComparer<Customer>
{
    public override bool Equals(Customer x, Customer y)
    {
        return x.CustomerID == y.CustomerID;
    }

    public override int GetHashCode(Customer obj)
    {
        return obj.CustomerId.GetHashCode();
    }
} 
```

然后：

```
var unionCustomers = NewCustomers.Union(OldCustomers, new CusComparer()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:58:24.153

因此，您要获取所有新客户和所有不在新列表中的旧客户：

```
List<Customer> customers = NewCustomers.Concat(OldCustomers.Except(NewCustomers)).ToList(); 
```

请记住实现`IEqualityComparer<T>`通用接口来比较您的客户（可能通过`CustomerID`）。`GetHashCode`因此，您需要`Equals`为`Customer`.

这是一个可能的实现：

```
public class Customer 
{
    public int CustomerID { get; set; }
    public string CustomerName { get; set; }

    public override bool Equals(Object obj)
    {
        Customer cust = obj as Customer;
        if (cust == null) return false;
        return cust.CustomerID == CustomerID;
    }

    public override int GetHashCode()
    {
        return CustomerID.GetHashCode();
    }

    public class Comparer : IEqualityComparer<Customer>
    {
        public bool Equals(Customer x, Customer y)
        {
            if (x == null && y == null) return true;
            if (x == null || y == null) return false;
            return x.Equals(y);
        }

        public int GetHashCode(Customer obj)
        {
            if (obj == null) return -1;
            return obj.GetHashCode();
        }
    }
} 
```

请注意，我覆盖`Equals`和`GetHashCode`在`Customer`. 通过这种方式，您甚至不需要传递 to 的实例`IEqualityComparer<Customer>`（`Except`或任何其他允许传递比较器的方法）。

但为了完整起见，我还添加了`Comparer`实现接口的类，因此您也可以将其传递给 except：

```
NewCustomers.Concat(OldCustomers.Except(NewCustomers, new Customer.Comparer())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:36:40.003

你可以像这样使用联合函数

```
sequence1.Union(sequence2) 
```

IE

```
var custlist =  NewCustomers.Union(OldCustomers).ToList(); 
```

阅读：[Enumerable.Union 方法（IEnumerable、IEnumerable）](http://msdn.microsoft.com/en-us/library/bb341731.aspx)

例子 ：

```
 int[] ints1 = { 5, 3, 9, 7, 5, 9, 3, 7 };
            int[] ints2 = { 8, 3, 6, 4, 4, 9, 1, 0 };

            IEnumerable<int> union = ints1.Union(ints2);

            foreach (int num in union)
            {
                Console.Write("{0} ", num);
            }

            /*
             This code produces the following output:

             5 3 9 7 8 6 4 1 0
            */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:37:57.293

你可以使用[`Union`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)喜欢

```
var union = NewCustomers.Union(OldCustomers); 
```

并且可能您将不得不为您的班级实现自己的[比较器](http://msdn.microsoft.com/en-US/library/bb358407%28v=vs.100%29.aspx)`Customer`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:46:06.270

`Union`将比较客户对象的实例（如果`IEqualityComparer`未使用）。我想你正在寻找类似的东西`UnionBy`

```
var finalList = NewCustomers.Concat(OldCustomers)
                    .GroupBy(x => x.CustomerID)
                    .Select(x => x.First())
                    .ToList(); 
```

- 编辑 -

一个可能的`UnionBy`实现：

```
var finalList = NewCustomers.UnionBy(OldCustomers, c => c.CustomerID).ToList(); 
```

-

```
public static class SOExtension
{

    public static IEnumerable<T> UnionBy<T,V>(this IEnumerable<T> list, IEnumerable<T> otherList,Func<T,V> selector)
    {
        HashSet<V> set = new HashSet<V>();

        foreach (T t in list)
        {
            set.Add(selector(t));
            yield return t;
        }
        foreach(T t in otherList)
        {
            if(!set.Contains(selector(t)))
                yield return t;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T07:16:49.940

```
HashSet<Customer> set = new HashSet<Customer>(list1);
set.SymmectricExceptWith(list2); // Or other userful methods. 
```

# c++ - 使用其扩展的类中的方法的类的链接器错误

> ID：12813329
> 
> 赞同：0
> 
> 时间：2012-10-10T06:34:26.323
> 
> 标签：c++, linker

我有一些可以编译的代码，但不会链接。我不确定为什么会这样——我知道这个问题通常可以通过修复链接在一起的东西来解决，但我不知道为什么会这样。TransGame 是一个扩展 Game 的类，SearchGame 是一个扩展 TransGame 的类。

这是我得到的错误：

```
mrdmnd@dr-wily:~/ConnectFour$ make all                                                                                                                                                                             
g++    -c -o SearchGame.o SearchGame.cc
g++    -c -o TransGame.o TransGame.cc
g++    -c -o Game.o Game.cc
g++ SearchGame.o TransGame.o Game.o -o SearchGame
TransGame.o: In function `TransGame::hash()':
TransGame.cc:(.text+0x5f): undefined reference to `Game::positioncode()'
collect2: ld returned 1 exit status
make: *** [SearchGame] Error 1 
```

这是我的生成文件：

```
CFLAGS = -c -Wall
SOURCES = SearchGame.cc TransGame.cc Game.cc
OBJECTS = $(SOURCES:.cc=.o)
EXECUTABLE = SearchGame
.PHONY : all clean

all : $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CXX) $(OBJECTS) -o $@

*.o :
    $(CXX) $(CFLAGS) $< -o $@

clean:
    rm -rf *.o 
```

以下是相关的代码：

TransGame.cc

```
#include "Game.h"
#include "TransGame.h"
// snip
void TransGame::hash() {
  long htemp = positioncode();
  //snip
} 
```

跨游戏.h

```
#ifndef TRANSGAME_H
#define TRANSGAME_H
//snip
class TransGame : public Game {
  public:
    //snip
    void hash();
    //snip
};

#endif 
```

游戏.cc

```
#include "Game.h"
// snip
inline long Game::positioncode() {
  return color[nplies & 1] + color[0] + color[1] + BOTTOM;
} 
```

游戏.h

```
#ifndef GAME_H
#define GAME_H
//snip
class Game {
  public:
    //snip
    long positioncode();
    //snip
};

#endif 
```

任何帮助将不胜感激 - 我确信我在我的 makefile 中遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:39:00.313

您的函数`Game::positioncode()`是一个内联函数并且需要在标头中，因为编译器需要知道它的定义才能将调用替换为`positioncode`代码。

有两种方法：您可以在定义下方添加函数，`class Game`也可以将其直接添加到声明中：

```
class Game {
  public:
    long positioncode()
    {
      return color[nplies & 1] + color[0] + color[1] + BOTTOM;
    }
}; 
```

# templates - 使用 require.js、主干和下划线本地化模板

> ID：12813333
> 
> 赞同：15
> 
> 时间：2012-10-10T06:34:42.113
> 
> 标签：templates, backbone.js, localization, requirejs, underscore.js

这个问题是关于模板化和本地化，使用 require.js 和通过主干.js 下划线模板。应用程序需要即时本地化。

在走上一条后来证明有问题的道路之前，有没有比我正在考虑的更好的解决方案 - 我担心重复合并和处理语言数组的速度和内存。假设是 2-3 千个语言字符串。

当前方法（可行，但看起来处理器很重）：

1.  使用[I18N 捆绑方法](http://requirejs.org/docs/api.html#i18n)，创建语言“包含”，它将基本上包含所有模板的翻译元素
2.  将这个对象/元素数组与模型属性（来自主干）合并，并将合并的批次传递到下划线模板

.

```
define(['backbone', 'models/model', 'text!template.html', 'i18n!my/nls/translatedbits'],
  function(Backbone, MyModel, TemplateText, TranslationObject) {
  var View = Backbone.View.extend({
    model: {},

    initialize : function(params) {
      this.model = new MyModel();
    },

    render : function(callBack) {
      // Get the model attributes
      var templateParams = _.clone(this.model.attributes);
      // Bolt on the tranlsated elements (established from require.js I18N plugin)
      templateParams.t = TranslationObject;
      // Pass the lot ot the template
      var template = _.template(TemplateText, this.model.attributes);
      $(this.el).html( template );
      return this;
    }

  });
  return View;
  }
); 
```

然后模板将读取

```
<%= modelAttribute1 %> <%= t.translationString1 %> 
```

是否有更好的解决方案或更好的模板引擎？[更适合这个目的 - mustache 可能还有其他优点，但它可以更容易地本地化，还是它可以缓存本地化结果以允许稍后传入模型属性？]

请注意，可能需要“即时”更改语言 - 这是我对 I18N 插件的另一个担忧。我最终可能会通过模板模型通过 JSON 请求获取转换，但这仍然需要对象的合并，这是我试图避免的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T08:40:13.763

这是我目前正在做的事情（只是开源的，因为它对其他人似乎有用）

[underi18n](https://github.com/ggozad/underi18n)是一个非常小的库，用于在模板和代码上执行 i18n。

它提供：

*   将目录简单转换`gettext`为 json 格式。
*   支持翻译字符串中的变量替换。

它不**涉及**多元化。

从自述文件：

## 目录

`under18n`对目录使用简单的 JSON 格式，遵循标准`gettext`格式。在以下示例中，

```
{
    'Developer': 'Προγραμματιστής',
    'Role ${role} does not exist in ${context}': 'Ο ρόλος ${role} δεν υπάρχει στο ${context}'
} 
```

我们有两个翻译字符串，第二个有两个变量，`role`并且`context`. 提供了一个简单的 python 脚本来帮助您将标准`.mo`文件转换为这种 JSON 格式。

## 用法

从 json i18n 目录创建*MessageFactory ：*

```
var t = underi18n.MessageFactory(catalog); 
```

您现在可以内联翻译：

```
t('Developer') // returns "Προγραμματιστής"

t('Role ${role} does not exist in ${context}', {role: 'διαχειριστής', context: 'πρόγραμμα'})
// Returns "Ο ρόλος διαχειριστής δεν υπάρχει στο πρόγραμμα" 
```

## 模板

通常，模板中的变量用一些分隔符表示。例如在 mustache 中`{{ var }}`使用，而`<%= var %>`下划线默认使用。我们使用相同的方法来表示可翻译的字符串。您可以将可翻译字符串的分隔符指定为正则表达式，以及您选择的模板语言使用的左/右分隔符`under18n.templateSettings`。默认情况下，这遵循下划线约定：

```
templateSettings: {
    translate: /<%_([\s\S]+?)%>/g,
    i18nVarLeftDel: '<%=',
    i18nVarRightDel: '%>'
} 
```

因此，`<%_ i18n %>`设置为表示可翻译的字符串，并`<%= var %>`用于表示模板内的变量。

您可以通过调用来翻译模板`under18n.template`，例如使用下划线，您可以这样做

```
var templ = _.template(under18n.template(myTemplate, t)); 
```

### 例子

给定以下目录、工厂和英语和希腊语模板，并假设一个下划线模板，

```
var test_en = {
        'files_label': 'Files',
        'num_files': 'There are ${num} files in this folder'
    },

    templ = '<h1><%= title %></h1>' +
            '<label><%_ files_label %></label>' +
            '<span><%_ num_files %></span>',

    t_en = underi18n.MessageFactory(test_en);
    t_el = underi18n.MessageFactory(test_el); 
```

模板可以由以下方式构建，

```
var toRender = _.template(underi18n.template(templ, t_en));
toRender({title: 'Summary', num: 3}); 
```

会产生

```
<h1>Summary</h1>
<label>Files</label>
<span>There are 3 files in this folder</span> 
```

## AMD 加载

[如果您使用requireJS](http://requirejs.org/)，under18n 将注册为匿名模块。

我希望这能解决你的问题，如果没有，请告诉我，我计划在某个阶段发布它，但是现在总比没有好；）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T05:48:17.127

为了完整起见，我们提出的最优化的解决方案是：

1.  当从服务器请求模板时，cookie 会确定语言并传递正确的模板。

2.  使用 PHP 后端预解析模板；然后将这些以正确的语言存储在 memcached 中

3.  语言模板一旦被请求，就会被浏览器缓存并在内部存储在主干模型中，以便 JavaScript 可以快速重用它。

原因：

*   更快的 JS（更少的正则表达式替换）。我们从未进行过基准测试，但只有在您完全删除这些功能时才合乎逻辑。
*   saved transferring a HUGE language file to the client

# javascript - HIghcharts 分离图例和饼图

> ID：12813334
> 
> 赞同：0
> 
> 时间：2012-10-10T06:34:49.103
> 
> 标签：javascript, graph, highcharts

我正在开发一个应用程序，我需要*按升序*显示饼图中的数据 图表有一个图例..

这是[小提琴](http://jsfiddle.net/kodeNinja/kTXNQ/)

我需要的是饼图中的数据应该从最小到最大显示，而图例应该保持其状态..

100-200 ..
200-300 ..
..等等..

是否可以不必单独创建图例..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:00:08.647

[传递系列](http://api.highcharts.com/highcharts#series.data)时，您还可以提供完整的对象，而不仅仅是数据点和标签。这些对象还有一个`legendIndex`属性，您可以在其中指定图例中的确切位置。

现在，当您给出系列时，您必须手动按值升序对其进行排序。这将按升序排列饼图，并且使用图例索引也将保持图例的顺序。

[在这里更新了 JSfiddle](http://jsfiddle.net/gnCSY/)。

# wordpress - 如果帖子数不是 4 的倍数，倒回循环并重用？

> ID：12813336
> 
> 赞同：0
> 
> 时间：2012-10-10T06:34:53.793
> 
> 标签：wordpress, loops, slider

我怎样才能做到这一点，

我有一个幻灯片，它一次显示 4 个帖子并移动一个完整的 4 个帖子块，我在这里面临的问题是我在滑块中有 9 个帖子，它在 end 中显示一个帖子`4posts -> 4posts -> 1Post`。

如果帖子总数不是 4 的倍数，我需要做的是再次倒回查询，这样如果我在循环中有 9 个帖子，它将再次重用查询并用前三个帖子填充空白空间.

这是我的PHP代码：

```
<?php $slide_thumb_query = new WP_Query('category_name=slideshow&meta_key=_thumbnail_id'); ?>
<?php while ($slide_thumb_query->have_posts()) : $slide_thumb_query->the_post(); ?>
<li>
    <a href="<?php $image_id = get_post_thumbnail_id();
        $image_url = wp_get_attachment_image_src($image_id,'homeslider', true);
        echo $image_url[0];  ?>">
            <img src="<?php $image_id = get_post_thumbnail_id(); $image_url = wp_get_attachment_image_src($image_id,'homeslider-thumb', true); echo $image_url[0];  ?>" title="<?php the_title()?>"/>
    </a><a href="<?php the_permalink();?>">
    <span class="overlay-box"></span>
    </a>
</li>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:00:57.357

我建议用 javascript 解决这个问题，幻灯片是用 javascript 构建的，所以它应该可以解决问题。
全局步骤：

1.  计算`<li>`项目
2.  确定它是否是一个 4ish 数字（使用模数或任何你想要的）
3.  复制`<li>`您需要的第一个并将它们附加到末尾。

问题问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:42:54.610

您可以随时使用 WP_Query 的`rewind_posts`方法重新开始。因此，当您到达初始循环的末尾时，您需要确定要添加多少帖子，并进行一些额外的循环。`rewind_posts`不会命中数据库，所以它不像额外的查询或任何东西。以下是我在代码中的想法：

```
$featured_posts = new WP_Query( ... );
while ( $featured_posts->have_posts() ) {
    $featured_posts->the_post();
    // Output your things here
}

// Do we need more posts?
if ( count( $featured_posts->posts ) % 4 > 0 && count( $featured_posts->posts ) > 0 ) {
    $more_to_go = count( $featured_posts->posts ) % 4;

    while ( true ) {
        $featured_posts->rewind_posts();
        while ( $featured_posts->have_posts() ) {
            $featured_posts->the_post();
            // Keep printing your things here

            $more_to_go--;
            if ( $more_to_go < 1 )
                break 2; // break both while loops
        }
    }
} 
```

这是我的想法，有多个循环，所以即使你的精选帖子只包含一个项目，它也会重复四次。我没有对此进行测试，但希望它能给你一个在哪里挖掘的线索。

干杯!

# wpf - 相对于 WPF 数据网格中的前一个单元格值更改数据网格单元格背景颜色

> ID：12813338
> 
> 赞同：1
> 
> 时间：2012-10-10T06:35:12.147
> 
> 标签：wpf, user-controls, wpf-controls, wpfdatagrid, wpftoolkit

我在 WPF 中创建了一个数据网格，它的单元格值不断变化，但我无法更改单元格相对于单元格先前值的背景颜色，例如，如果单元格的值从 10 变为 20单元格的颜色应变为绿色，表示值增加，如果值变为 5，则单元格背景颜色应变为红色，表示值已减小。我已经在 datagridview 的 cellvaluechange 事件的 winforms 中做到了这一点，但在 WPF 中我无法做到这一点。任何专业人士都为此做过任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:55:20.997

`IsIncreased`在您的单元格中创建一个属性以根据增加/减少`DataContext`来保存 a 。`Nullable<bool>`

```
public class DatagridCellViewModel: INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void FirePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private bool _isIncreased
    public bool? IsIncreased
    {
      get{ return _isIncreased; }
      set{ 
          _isIncreased = value, 
          FirePropertyChanged("IsIncreased");
         }
    }

    //this is going to store the value you have in your table. Don't forget to bind it to the cells content
    private int _dataValue;
    public int DataValue
    {
      get{ return _dataValue; }
      set{
            if(_dataValue != value)
            {
               IsIncreased = _dataValue < value
               _dataValue= value;

               FirePropertyChanged("DataValue");
            }             
         }
    }

    //other properties and methods
}

public class DataGridViewModel
{

     private ICollection<DataGridRowViewModel> _myDgRows = new ObservableCollection<DataGridRowViewModel>();
     public ObservableCollection<DataGridRowViewModel> MyDgRows { get{ return _myDgRows;}
}

public class DataGridRowViewModel : INotifyPropertyChanged // don't forget to implement this interface
{
     //put here fields and properties you want to display in a row in your datagrid
     //that means as many fields as many columns you have

    private DataGridCellViewModel _cellValue;
    public int CellValue
    {
      get{ return _cellValue; }
      set{
            if(!_cellValue.Equals(value))
            {
               _cellValue= value;

               FirePropertyChanged("CellValue");
            }             
         }
    }
} 
```

创建一个`DataTrigger`根据`IsIncreased`值设置单元格的背景：

```
<DataGrid ItemsSource="{Binding MyDgRows}" AutoGenerateColumns="False" >
<DataGrid.Columns>
    <DataGridTemplateColumn Header="ChangingValues" Width="SizeToCells">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <TextBox Name="ContentTbx" Text="{Binding CellValue.DataValue}" />
               <DataTemplate.Triggers>
                  <DataTrigger Binding="{Binding CellValue.IsIncreased}" Value="True">
                     <Setter Property="Background" Value="Green" />
                  </DataTrigger>
                 <DataTrigger Binding="{Binding CellValue.IsIncreased}" Value="False">
                     <Setter TargetName="ContentTbx" Property="Background" Value="Red"/>
                 </DataTrigger>
               </DataTemplate.Triggers>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns>
</DataGrid> 
```

每次单元格数据道具更改时设置 IsIncreased 道具

**编辑：**不要绑定表，但 ObservableCollecition 调用 MyDgRows。为此，DataGridViewModel 实例应该是您的 DataGrids DataContext。

可能您需要在 DataValue 道具中处理 int-string 转换。

为此，我用谷歌搜索

> 数据网格 wpf

第一个链接是[这个](http://wpftutorial.net/DataGrid.html)

和

> 数据触发数据模板

第二个结果是[这个](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

它们几乎涵盖了整个问题。**更加自给自足**

# tridion - 在 Dreamweaver 模板中访问包变量时出现问题

> ID：12813341
> 
> 赞同：2
> 
> 时间：2012-10-10T06:35:28.213
> 
> 标签：tridion, tridion-2011, dwt

我在访问页面模板 DWT 中的包变量时遇到问题。

我有一个带有 4 个 TBB 的复合页面模板，如下所示：

1)**常量 TBB** - 这个 TBB 读取组件（嵌入式多值组件）的所有值作为键值对并将它们推送到包中。例如：

```
Item item = this._package.CreateStringItem(contentType, "test");
this._package.PushItem("key", item); 
```

2)**页面模板的C# DLL** - 这包含页面模板的逻辑

3）**页面模板的DWT——**所有的包变量都在这里输出。

4)**默认完成动作**

我面临的问题如下：

在我的 DWT 中，我想将组件模板的元数据与常量 TBB 中设置的包变量进行比较。

我使用的语法是：

```
<!-- TemplateBeginIf cond="ComponentTemplate.Metadata.section_name = key" --> 
```

其中 key 是在常量 TBB 中设置的包名称，其值为“test”

但不知何故，这个包变量“key”给出的值为 0 而不是测试。

有人可以让我知道我到底哪里出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-27T17:28:21.737

您应该通过替换来指定要添加到包中的项目类型：

```
Item item = this._package.CreateStringItem(contentType, "test"); 
```

和

```
Item item = this._package.CreateStringItem(contentType.Text, "test"); 
```

您还应该使用以下方法确认变量已正确传递给 DWT

```
@@test@@ 
```

条件之外。这将显示您要与之比较的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:56:04.137

请检查以下内容。

1.  检查一个包中是否有多个具有**“Key”**名称的变量。
2.  检查您是否在包装中的正确位置进行验证。

![包装图片](../Images/05ed1abdcb11ae6767d76f4a66f3e586.png)

# javascript - 如何使用 CSS3 & HTML5 在 Mac 上模拟最小化动画？

> ID：12813349
> 
> 赞同：1
> 
> 时间：2012-10-10T06:35:43.657
> 
> 标签：javascript, html, animation, css

我想知道如何使用 CSS3 和 HTML5 在 Mac 上模拟最小化动画。

# android - 维护 Android 页脚

> ID：12813350
> 
> 赞同：2
> 
> 时间：2012-10-10T06:35:47.420
> 
> 标签：android, android-layout

以前有人问过这个问题，但没有回答。在 Android 中有一个非常常见的组件，称为 ListView。ListViews 可以有页眉和页脚。listview 提供了一个 addFooter/removeFooter 方法。必须在调用 setAdapter 之前添加/删除页脚。

现在的问题是如何避免重置适配器来更改页脚。如果在开始时添加了页脚，并且您不想一次又一次地重置适配器以更改页脚，是否有办法重置页脚的可见性。GONE---VISIBLE-->GONE 并更新和重绘页脚。有没有办法在不重置适配器的情况下重绘页脚？

# c++ - 带有 decltype 的 sfinae：clang 或 gcc 中的错误？

> ID：12813351
> 
> 赞同：10
> 
> 时间：2012-10-10T06:35:49.240
> 
> 标签：c++, gcc, c++11, clang, sfinae

Clang-3.2 可以编译并且代码按预期运行：

```
struct have_f { int f(int i) {return 10;} }; 

struct empty {};

template <class T> 
struct outer {
        T t; 

        // if T have f(), define  outer_f()
        template<class U=decltype(t.f(1))> 
        int outer_f(int i) { return t.f(i); }
};

int main() {
        outer<have_f>  o1;
        outer<empty>   o2;

        // to silence unused var warning
        return  o1.outer_f(10) + sizeof(o2); 
} 
```

任何版本的 GCC 都拒绝：

```
t.cc:13:6: error: ‘struct empty’ has no member named ‘f’
  int outer_f(int i) { return t.f(i); }
      ^ 
```

谁是正确的？Gcc 还是 Clang？

请注意，有[类似的问题](https://stackoverflow.com/questions/11566564/using-sfinae-gives-different-results-on-gcc-and-clang)，没有真正的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T09:11:47.620

我相信问题是**14.6.3 [temp.nondep]**：

> 1 - 模板定义中使用的非依赖名称是使用通常的名称查找找到的，并在使用它们时绑定。

给出的示例描述了模板定义中的格式错误的表达式“*可以在[模板定义中]或在实例化点进行诊断*”。

默认*模板参数*（14.1p9）`U=decltype(t.f(1))`是实例化上下文中的非依赖名称`struct outer`（即，它不依赖于其自己模板的模板参数），因此它对于 with 的实例化是不正确`struct outer`的`T = struct empty`. 该标准没有明确描述默认模板参数的评估位置，但唯一明智的结论是，它们被视为任何其他构造，并在它们发生时进行评估（或者，在本例中，在`struct outer`模板）。我没有看到编译器可以将非依赖默认模板参数的评估延迟到 SFINAE 应用的上下文中。

幸运的是，解决方案很简单：只需将默认模板参数`U`设置为依赖名称即可：

```
 // if T have f(), define  outer_f()
    template<class T2 = T, class U=decltype(static_cast<T2 &>(t).f(1))> 
    int outer_f(int i) { return t.f(i); } 
```

# language-agnostic - 如何以编程方式设置默认打印机

> ID：12813355
> 
> 赞同：0
> 
> 时间：2012-10-10T06:36:00.990
> 
> 标签：language-agnostic, printers

我想设置一个默认打印机来打印事件的徽章。我不知道如何设置它。因为使用此应用程序的所有用户都应将特定打印机连接到他们的 PC。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:37:59.350

您可以走的最远的一步是使用 JavaScript 显示打印对话框。您不能设置默认打印机。

# liferay - LIFERAY：在 Web 内容显示中嵌入 Flash

> ID：12813357
> 
> 赞同：0
> 
> 时间：2012-10-10T06:36:11.177
> 
> 标签：liferay, liferay-6

我有一个要求在页面中要复制的位置。此页面有几个带有效果的图像。它具有存储在 xml 文件中的图像路径和 Flash 文件中的效果。我正在使用网页内容显示，当我只包含纯 swf 文件时，输出为空白。我在 Flash 链接中包含了其他 .swf 文件，它们工作正常。但是这个 .swf 文件需要图像，所以它是空白的。我曾尝试制作一个 portlet，以数组形式传递图像，然后通过 javascript 进行转换，但是当我在我的网站中包含 portlet 时，我的主题和其他 WCD 受到干扰，因此我放弃了 portlet 方式。但除此之外，如何通过 Flash 链接将图像传递给 WCD。请帮助了解如何将图像和 Flash 嵌入到 Web 内容显示中。

我的实际页面有 xml ：

```
<?xml version="1.0" encoding="utf-8" ?>
<slides>
    <slide imageUrl="/images/home/A_397x930px.jpg" />
    <slide imageUrl="/images/home/B_397x930px.jpg" /> 
    <slide imageUrl="/images/home/C_397x930px.jpg" />
    <slide imageUrl="/images/home/D_397x930px.jpg" />
</slides> 
```

我的闪存代码：

```
<script language="javascript" type="text/javascript">
    var so = new SWFObject("/andiosp-flash.swf", "mymovie", "930", "398", "8", "#ffffff"); 
    so.addParam("quality", "high");
    so.addParam("wmode", "transparent");
    so.addParam("allowFullScreen", "true");
    so.addParam("salign", "t");
    so.write("flashcontent");
</script> 
```

我正在使用 Liferay 6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:01:10.743

如果您将图像存储在主题中，例如“您的主题”，那么您应该尝试通过 URL 访问它们：

```
/your-theme/images/home/an-image.jpg 
```

这与其他 Liferay 插件相同。

第二种方法是在创建“Web Content Display”portlet 时上传图片：

1.  单击所见即所得工具栏上的“图像”按钮
2.  在“图像信息”选项卡中单击“浏览服务器”
3.  然后，您将能够选择现有图像或在存储库中上传新图像
4.  选择图片后，您会在“URL”字段中看到该图片的 URL

您还可以考虑在“文档和媒体”portlet 中上传图像。选择“控制面板”->“文档和媒体”并将您的图像添加为“基本文档”。然后您将能够单击上传的图像并获取 Liferay Portal 提供的 URL。

# configuration - 如何自定义 CK-Editor 的工具菜单？

> ID：12813359
> 
> 赞同：5
> 
> 时间：2012-10-10T06:36:19.283
> 
> 标签：configuration, ckeditor

我想更改 ck-editor 上的工具菜单选项。例如，我删除了一些我不需要使用的。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T07:57:26.020

有一个配置设置允许您设置将出现哪些按钮。

您只需创建自己的工具栏布局。我已经包含了默认的完整工具栏代码，您可以删除不想出现的按钮。

最好复制默认的 config.js 文件并重命名，然后在加载编辑器时调用自定义配置文件和自定义工具栏：

```
CKEDITOR.replace( 'xxx_textarea_id_xxx',
{
  customConfig : 'xxx_name_of_custom_config_file_xxx.js',
  toolbar : 'XXX_custom_name_XXX'
}); 
```

* * *

**这是默认完整工具栏布局的配置设置。**

工具栏内的`'/'`布局意味着换行。
每个`name: 'document', items :`条目都显示为一个组，并且条目之间有空格。
在组内`'-'`创建一个垂直间隔。

演示页面显示了此默认工具栏布局的示例：
[CKEditor Demo](http://ckeditor.com/demo)

```
config.toolbar_Full =
[
    { name: 'document',    items : [ 'Source','-','Save','NewPage','DocProps','Preview','Print','-','Templates' ] },
    { name: 'clipboard',   items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
    { name: 'editing',     items : [ 'Find','Replace','-','SelectAll','-','SpellChecker', 'Scayt' ] },
    { name: 'forms',       items : [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton', 'HiddenField' ] },
    '/',
    { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
    { name: 'paragraph',   items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
    { name: 'links',       items : [ 'Link','Unlink','Anchor' ] },
    { name: 'insert',      items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak' ] },
    '/',
    { name: 'styles',      items : [ 'Styles','Format','Font','FontSize' ] },
    { name: 'colors',      items : [ 'TextColor','BGColor' ] },
    { name: 'tools',       items : [ 'Maximize', 'ShowBlocks','-','About' ] }
]; 
```

* * *

这是一个自定义工具栏配置设置。
当您设置工具栏配置设置时，您只使用“工具栏_”之后的名称部分。`toolbar : 'XXX_custom_name_XXX'`

```
config.toolbar_XXX_custom_name_XXX =
[
    { name: 'xxx_custom_group_namexxx',    items : ['Save','NewPage','DocProps','Preview','Print','-','Templates' ] },
    { name: 'clipboard',   items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
    { name: 'editing',     items : [ 'Find','Replace','-','SelectAll' ] },
    '/',
    { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
    { name: 'paragraph',   items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
    { name: 'links',       items : [ 'Link','Unlink','Anchor' ] },
    { name: 'insert',      items : [ 'Image','Table','HorizontalRule','Smiley','SpecialChar','PageBreak' ] },
    '/',
    { name: 'styles',      items : [ 'Styles','Format','Font','FontSize' ] },
    { name: 'colors',      items : [ 'TextColor','BGColor' ] },
    { name: 'tools',       items : [ 'Maximize', 'ShowBlocks','-','About' ] }
]; 
```

* * *

这是开发人员指南中工具栏页面的链接：
[CKEditor 3.x | 开发者指南 - CKEditor 工具栏](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

* * *

您可能想要关闭`removePlugins`配置设置中未使用的任何功能：

```
config.removePlugins = 'flash,iframe'; 
```

* * *

这是 CKEditor 3 JavaScript API 文档中列出所有配置设置的页面：
[命名空间 CKEDITOR.config](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html)

# sql - 候选键和主键有什么区别？

> ID：12813363
> 
> 赞同：52
> 
> 时间：2012-10-10T06:36:31.410
> 
> 标签：sql, relational-database

主键是为给定表选择的候选键吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-10T06:37:49.570

`Candidate Key`– 候选键可以是任何列或可以**作为数据库中唯一键**的列组合。一张表中可以有多个候选键。每个候选键都可以作为主键。

`Primary Key`**– 主键是唯一标识记录**的列或列组合。只有一个候选键可以是主键。

**[更多关于这个链接的例子](http://blog.sqlauthority.com/2009/10/22/sql-server-difference-between-candidate-keys-and-primary-key-2/)**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-10T11:13:09.190

就目前而言，吴宇森的回答是正确的。这里还有几点。

主键始终是候选键之一。很多时候，它是唯一的候选人。

没有候选键的表不代表关系。如果您使用关系模型来帮助您构建一个好的数据库，那么您设计的每个表都将至少有一个候选键。

如果没有主键的概念，关系模型将是完整的。它不在关系模型的原始表示中。实际上，在没有声明主键的情况下使用外键引用会导致混乱。这可能是一个逻辑上正确的混乱，但它仍然是一个混乱。声明主键可以让 DBMS 帮助您执行数据规则。大多数时候，让 DBMS 帮助您执行数据规则是一件好事，而且值得付出代价。

一些数据库设计人员和一些用户对于主键是标识表中的行（记录）还是标识表所代表的主题中的实体实例存在一些心理困惑。在理想的世界中，它应该两者都做，并且实体表中的行和相应实体的实例之间应该存在一一对应的关系。

在现实世界中，事情变得一团糟。有人两次输入同一个新员工，员工最终有两个 id。有人被录用，但数据输入在一些手动过程中漏掉了，员工没有得到身份证，直到遗漏得到纠正。一个在第一次出现问题时不会崩溃的数据库比一个数据库更健壮。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-10T07:04:54.870

**主键-> 任何可以****唯一标识表中记录**的列或列集都是主键。*（表中**只能有一个主键**）*

**候选键->****候选成为主键**的任何列或列集都是候选键。*（表中可以有**一个或多个候选键**，如果只有一个候选键，可以选择它作为主键）*

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-10T08:33:47.827

没有区别。主键是候选键。按照惯例，通常选择关系中的一个候选键作为“主”键，但该选择本质上是任意的，并且对于数据库用户/设计人员/开发人员来说是一个方便的问题。它不会使“主”键与任何其他候选键根本不同。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-11-16T23:24:35.757

主键是一种特殊的索引：

```
there can be only one;
it cannot be nullable
it must be unique. 
```

候选键是从一组超级键中选择的，我们在选择候选键时唯一要注意的是：它不应该有任何冗余属性。

员工表示例：员工（员工 ID、FullName、SSN、DeptID）

1.  **候选键**：是表中的单个列，符合所有行的唯一性。在 Employee 表中，EmployeeID 和 SSN 是候选键。

2.  **主键**：是您选择在表中保持唯一性的列。在 Employee 表中，您可以选择 EmployeeID 或 SSN 列，EmployeeID 是更好的选择，因为 SSN 是一个安全值。

3.  **备用键**：主列以外的候选列，例如如果 EmployeeID 是 PK，则 SSN 将是备用键。

4.  **超级键**：如果您将任何其他列/属性添加到主键，那么它将成为超级键，如 EmployeeID + FullName，是一个超级键。

5.  **复合键**：如果表没有符合候选键的单列，则您必须选择 2 列或更多列以使行唯一。就像没有 EmployeeID 或 SSN 列一样，您可以将 FullName + DateOfBirth 作为复合主键。但是，重复行的可能性很小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-10T04:32:02.977

一个表可以有这么多可以唯一标识一行的列。这些列被称为**候选键**，但**主键**应该是其中之一，因为一个主键对于一张表来说就足够了。因此，在**众多候选键中，****主键**的选择非常重要。这就是主要区别。

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T08:01:30.170

想一想具有整数主键的车辆表。

注册号将是候选键。

在现实世界中，注册号会发生变化，因此在某种程度上取决于可能有​​资格成为候选密钥的情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-14T13:16:12.277

主键 -> 任何可以唯一标识表中记录的列或列集都是主键。（表中只能有一个主键）和候选键->与主键相同但数据库管理员预期选择的主键例如（主键最小的候选键）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-02-23T08:57:07.283

主键是表中唯一标识该表中行的一列（或多列）。

```
CUSTOMERS

CustomerNo  FirstName   LastName
1   Sally   Thompson
2   Sally   Henderson
3   Harry   Henderson
4   Sandra  Wellington 
```

例如，在上表中，CustomerNo 是主键。

放置在主键列中的值对于每一行必须是唯一的：不能容忍重复。此外，主键列中不允许有空值。

那么，在告诉您可以使用一列或多列作为主键之后，您如何决定选择哪些列（以及多少列）？

好吧，有时建议或必须使用多个列。但是，如果您看不到使用多个列的直接原因，请使用一个。这不是一个绝对的规则，它只是一个建议。但是，由单列组成的主键通常更容易维护，运行速度更快。这意味着如果您查询数据库，如果表具有单列主键，您通常会更快地得到答案。

下一个问题——你应该选择哪一列？选择一列作为主键的最简单方法（以及一种合理常用的方法）是让数据库本身自动为每一行分配一个唯一编号。

在员工表中，显然任何像 FirstName 这样的列都是一个糟糕的选择，因为您无法控制员工的名字。主键通常只有一个选择，如上例所示。但是，如果有多个，则可以将它们描述为“候选键”——名称反映了它们是负责主键工作的候选者。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-11-30T19:55:42.710

如果超键是一个大集合，则候选键是大集合中的一些较小集合，而主键是候选键集中的任何一个元素（一次一个或一个表）。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-02-08T11:18:29.387

首先你要知道什么是**行列式**？行列式是一个属性，用于确定同一张表中的另一个属性。所以行列式**必须是候选键**。你可以有多个决定因素。但**主键**用于确定整条记录，您只能有一个主键。主键和候选键都可以包含一个或多个属性**

# java - Jobtracker API 错误 - 本地异常调用 localhost/127.0.0.1:50030 失败：java.io.EOFException

> ID：12813365
> 
> 赞同：4
> 
> 时间：2012-10-10T06:36:34.917
> 
> 标签：java, hadoop, mapreduce, hdfs

我正在尝试使用 Java 连接我的 jobtracker。
下面显示的是我要执行的程序

```
 public static void main(String args[]) throws IOException {

            Configuration conf = new Configuration();
            conf.addResource(new Path(
                    "/home/user/hadoop-1.0.3/conf/core-site.xml"));
            conf.addResource(new Path(
                    "/home/user/hadoop-1.0.3/conf/hdfs-site.xml"));
            conf.addResource(new Path(
                    "/home/user/hadoop-1.0.3/conf/mapred-site.xml"));

            InetSocketAddress jobtracker = new InetSocketAddress("localhost", 50030);
            JobClient jobClient = new JobClient(jobtracker, conf);
            jobClient.setConf(conf);
            JobStatus[] jobs = jobClient.jobsToComplete();

            for (int i = 0; i < jobs.length; i++) {
                JobStatus js = jobs[i];
                if (js.getRunState() == JobStatus.RUNNING) {
                    JobID jobId = js.getJobID();
                    System.out.println(jobId);
                }
            } 
```

> 这是我得到的例外。即使我尝试用 127.0.0.1 替换 localhost 它也不起作用。同样的错误。

```
 Exception in thread "main" java.io.IOException: Call to localhost/127.0.0.1:50030 failed on local exception: java.io.EOFException
        at org.apache.hadoop.ipc.Client.wrapException(Client.java:1107)
        at org.apache.hadoop.ipc.Client.call(Client.java:1075)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
        at org.apache.hadoop.mapred.$Proxy1.getProtocolVersion(Unknown Source)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
        at org.apache.hadoop.mapred.JobClient.createRPCProxy(JobClient.java:480)
        at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:534)
        at com.tcs.nextgen.searchablemetadata.executor.factory.JobChecker.main(JobChecker.java:34)
    Caused by: java.io.EOFException
        at java.io.DataInputStream.readInt(DataInputStream.java:375)
        at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:811)
        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:749) 
```

我添加了所有与 hadoop 相关的罐子。我不明白为什么“/”在 localhost/127.0.0.1:50030 之间出现

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T10:37:23.463

您是否尝试过实际的 jobtracker 端口号，而不是 http 端口（50030）。

尝试在属性下的 $HADOOP_HOME/conf/mapred-site.xml 中列出的端口号`mapred.job.tracker`。这是我的伪 mapred-site.xml conf

```
<property>
    <name>mapred.job.tracker</name>
    <value>localhost:9001</value>
</property> 
```

如果您查看该`JobTracker.getAddress(Configuration)`方法，如果您没有明确指定 jobtracker 主机/端口，您可以看到它使用此属性：

```
public static InetSocketAddress getAddress(Configuration conf) {
  String jobTrackerStr =
    conf.get("mapred.job.tracker", "localhost:8012");
  return NetUtils.createSocketAddr(jobTrackerStr);
} 
```

# ios - AFHTTPClient postPath 返回 AFHTTPRequestOperation 而不是 AFJSONRequestOperation

> ID：12813368
> 
> 赞同：0
> 
> 时间：2012-10-10T06:36:40.360
> 
> 标签：ios, afnetworking

当我以这种方式使用 AFHHTPClient 从服务器请求数据时：

```
[[NetworkHelper sharedHelper] postPath:path parameters:parameters] success:^(AFHTTPRequestOperation *operation, id responseObject) {
                NSLog(@"%@", [operation class]);
                NSLog(@"%@", [responseObject class]);
            } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                NSLog(@"%@", [error localizedDescription]);
            }]; 
```

我懂了：

```
2012-10-10 13:24:36.881 MyApp[4635:c07] AFHTTPRequestOperation
2012-10-10 13:24:36.881 MyApp[4635:c07] NSConcreteData 
```

我试图`application/json`在服务器的响应中强制内容类型，但我仍然得到`AFHTTPRequestOperation`.

但如果我使用这个：

```
[[AFJSONRequestOperation JSONRequestOperationWithRequest:[NSURLRequest requestWithURL:myURL] success:^(NSURLRequest *request, NSURLResponse *response, id JSON) {
                NSLog(@"%@", JSON);
            } failure:^(NSURLRequest *request, NSURLResponse *response, NSError *error, id JSON) {
                NSLog(@"%@", [error localizedDescription]);
            }] start]; 
```

我得到了我需要的 JSON 响应。

我应该怎么做才能使用 AFHTTPClient 获得 JSON 响应？

**更新：**

我在课堂上添加`NSLog(@"%@",[self.response MIMEType]);`方法`- (BOOL)hasAcceptableContentType`并`AFHTTPRequestOperation`收到

```
2012-10-11 09:48:25.052 MyApp[3339:3803] application/json 
```

但我仍然`AFHTTPRequestOperation`上课。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:00:20.457

尝试设置 AFHTTPRequestOperation:acceptableContentTypes:

```
+ (NSSet *)acceptableContentTypes {
    return [NSSet setWithObjects:@"application/json", @"text/json", @"text/javascript", nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:51:47.917

我遇到了同样的问题，我怀疑这可能与 AFJSONRequestOperation 处理响应的方式有关。

我已经使用 AFJSONRequestOperation 发送了完全相同的请求，使用从 [AFHTTPClient clientRequestWithMethod] 返回的 NSMutableURLRequest 并构造了我自己的 NSMutableURLRequest，并且每个请求都有一个不同的 mime 类型的响应——来自 [AFHTTPClient clientRequestWithMethod] 的那个表示文本/纯文本；来自 NSMutableURLRequest 的“手工”构造的是 text/json。

我在这个问题中提到了这一点：

[AFNetworking with AFHTTPClient with AFJSONRequestOperation // MIME 类型问题](https://stackoverflow.com/questions/13182980/afnetworking-with-afhttpclient-authenticating-with-gtmoauthauthentication)

# spring - 即使设置了失火指令，Quartz 调度程序也会运行丢失的触发器

> ID：12813369
> 
> 赞同：1
> 
> 时间：2012-10-10T06:36:42.730
> 
> 标签：spring, quartz-scheduler, scheduler

我在使用 Quartz 调度程序时遇到问题。为了实用，您可以在这里找到我的单元测试代码：

```
Scheduler scheduler = new StdSchedulerFactory().getScheduler();
scheduler.getListenerManager().addSchedulerListener(schedulerTestListener); 

    Trigger trigger = newTrigger()
            .withIdentity(CoreTestConstants.TEST_TRIGGER, CoreTestConstants.TEST_TRIGGER_GROUP)
            .withSchedule(simpleSchedule()
                    .withMisfireHandlingInstructionIgnoreMisfires()
                    .withIntervalInMilliseconds(1000)
                    .repeatForever())
            .forJob(CoreTestConstants.TEST_JOB, CoreTestConstants.TEST_JOB_GROUP)
            .build(); 

scheduler.scheduleJob(getJobDetail(), trigger);

Thread.sleep(20000L);

scheduler.start(); 
```

* * *

问题是，当 scheduler.scheduleJob(...) 被执行时，我认识到任务没有立即启动，但是当 scheduler.start() 被执行时，我看到 20 个任务正在立即执行。

我的意思是，在我看来，通常在执行 scheduler.start() 之前不应记录或启动任务。但不知何故，石英系统甚至在未执行 scheduler.start() 之前就保持了任务的状态，然后当 scheduler.start() 调用丢失的任务执行时立即触发。

这里的日志：

```
09:32:45,005  INFO StdSchedulerFactory:1310 - Quartz scheduler version: 2.1.5
09:32:51,013  INFO SchedulerTest:47 - [test] Scheduler starting..
09:32:51,014  INFO QuartzScheduler:534 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 1 / 1349850771037
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 2 / 1349850771040
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 3 / 1349850771040
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 4 / 1349850771041
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 5 / 1349850771042
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 6 / 1349850771043
*** [TIMER-TEST] 2012-10-10 09:32:51 / Test task is executed. Count: 7 / 1349850771044 
```

正如您所看到的，即使我将触发器设置为以 1 秒为间隔执行，它也会在线程睡眠期间执行丢失的任务。

我试图玩弄失火指令，但这没有意义，在我的情况下它不会改变代码的行为。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:52:18.110

好的，您的问题在于`Thread.sleep(20000L);`实际上在等待时会触发和安排作业，因此当 start 被触发时，所有预定的作业都将开始，您可以将 Thread.sleep 设置为`Trigger trigger`使其在等待后开始触发和安排。[看看失火政策](http://quartz-scheduler.org/api/2.1.0/org/quartz/Trigger.html#MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY)

# c# - 是否可以更改 aspnet_membership 表中 LastLoginDate 的日期格式？

> ID：12813370
> 
> 赞同：0
> 
> 时间：2012-10-10T06:36:43.480
> 
> 标签：c#, asp.net, login, membership

在我正在工作的当前项目中，最初的开发人员使用 ASP.NET Membership 来处理用户登录验证。因此，aspnet_Membership 表中的 LastLoginDate 和 LastActivityDate 以 UTC 格式保存。

无论如何以当地时间格式保存它？或者有谁知道可以修改哪个存储过程来补偿时间差（通过使用 DATEADD() 方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:38:55.430

我会警告不要将数据从 UTC 更改为本地时间。

`SqlMembershipProvider`返回`MembershipUser.LastLoginDate`本地时间和其他类似属性：即将数据库值从 UTC 转换为本地时间。

因此，如果您通过`Membership`API 访问此数据，则无需执行此操作。

如果您正在直接访问数据库中的数据，并且您真的非常希望 SQL Server 在本地时间返回它，那么为什么不在您从数据库中读取数据时进行转换。

例如，您可以在 aspnet_Membership 表上创建一个 VIEW，如下所示：

```
SELECT 
    ...
    LastLoginDate + GETDATE() - GETUTCDATE() AS LastLoginDateLocal
    ...
FROM aspnet_Membership 
```

请注意，通过在 SQL Server 中进行转换，您将获得 SQL Server 的本地时间，这可能与托管应用程序的计算机上的本地时间不同。

**更新**

来自评论：

> 我想知道为什么@Leo 方法不起作用。

@Leo 建议修改`aspnet_Membership_UpdateUserInfo`SP；您需要修改所有更新您感兴趣的列的 SP。例如，`LastLoginDate`也更新为`aspnet_Membership_UpdateUser`.

此外，如果您采用这种方法，`MembershipUser.LastLoginDate`属性中返回的时间将不正确，因为`SqlMembershipProvider`代码假定数据库值是 UTC。要更正此问题，您需要修改选择此列的所有成员资格 SP，以转换回 UTC。例如`aspnet_Membership_GetAllUsers`, `aspnet_Membership_FindUsersByEmail`, `aspnet_Membership_FindUsersByName`, ...

另请注意，由于 DST，如上所述在 SQL Server 中的 UTC 和本地之间转换有时会给出不正确的值 (+/- 1h)（例如，在 DST 运行期间计算差异 GETDATE() - GETUTCDATE()，但是用户在 DST 开始之前最后一次登录）。

最好将数据库值保留为 UTC 并在应用程序中进行任何转换的另一个原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:51:59.177

`aspnet_Membership_UpdateUserInfo`是更新`LastLoginDate`. 您可以根据需要修改此 SP 并转换数据格式。

# sql - 选择列的名称作为来自不同列的值

> ID：12813372
> 
> 赞同：2
> 
> 时间：2012-10-10T06:36:51.630
> 
> 标签：sql, oracle11g, pivot

我有一个包含以下列的表

*   `End_date`.
*   `count_all_transactions`.
*   `count_timeouts`.
*   `request_key`.

现在我需要计算`percentagetimeout`两个不同的日期并同时显示它们。我已经建立了我的查询。

我的查询如下：

```
Select PercentageTimeout ,
  PerTimeout,
  Transaction
From 
(
  select 
    T.COUNT_ALL_TRANSACTIONS as Total,
    T.END_DATE as DT1,
    T.COUNT_TIMEOUTS as Timeouts,
    round (((T.COUNT_TIMEOUTS / T.COUNT_ALL_TRANSACTIONS) * 100)
             ,2) as PercentageTimeout,
    R.INTERFACE_NAME as Transaction
  from rpt_timeout T, dim_request R
  where
    T.REQUEST_KEY = R.REQUEST_KEY
  AND
    T.END_DATE='27 AUG 2012'
) 
left outer join 
(
  select T1.COUNT_ALL_TRANSACTIONS as Total1,
    T1.END_DATE as DT2,
    T1.COUNT_TIMEOUTS as Timeouts1,
    round (((T1.COUNT_TIMEOUTS / T1.COUNT_ALL_TRANSACTIONS) * 100)
             ,2) as PerTimeout,
    R1.INTERFACE_NAME as Transaction1
  from rpt_timeout T1, dim_request R1
  where T1.REQUEST_KEY = R1.REQUEST_KEY
  AND T1.END_DATE='20 AUG 2012'
) on Transaction = Transaction1; 
```

这个查询给了我正确的结果，但我正在努力的是我需要列的名称作为该表中相应的 END_DATE 即：我的输出应该是

```
27-AUG-2012   20-AUG-2012  Transaction
0.28          0.1          Qpay 
0.09          0.06         Payment 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:15:04.200

为此，您需要使用动态 SQL。由于这是特定于 Oracle 的，这意味着使用 PL/SQL 构造查询，然后使用 EXECUTE IMMEDIATE 语句执行它。

请参阅下面的链接...

[http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)

这是一些示例代码；它不完整，甚至可能在语法上不正确（我手边没有 Oracle 服务器，并且有一段时间没有使用 Oracle），只是一个片段，让您了解我在说什么。

```
DECLARE
  query VARCHAR2(4000);
  date1 VARCHAR2(25);
  date2 VARCHAR2(25);
BEGIN
  date1 := '27-AUG-2012';
  date2 := '20-AUG-2012';
  query := 'Select PercentageTimeout as ' || date1 ||
           ', PerTimeout as ' || date2 ||
           ',   Transaction From  <the rest of your query goes here>';

  EXECUTE IMMEDIATE query;
END; 
```

现在您可能想要创建一个游标而不是动态构造的查询字符串并遍历记录；无论你需要做什么。要点是，如果要在查询中动态指定列别名，则需要动态构造该查询。

# silverlight - 歌曲课无法正常工作

> ID：12813380
> 
> 赞同：1
> 
> 时间：2012-10-10T06:37:34.443
> 
> 标签：silverlight, windows-phone-7, xna, media-player

在我的 silverlight`WP7`应用程序中，我使用 XNA 库来播放声音。以下是代码。

```
 Microsoft.Xna.Framework.Media.Song s = Microsoft.Xna.Framework.Media.Song.FromUri("song", new Uri("bmusic.mp3", UriKind.Relative));
 Microsoft.Xna.Framework.FrameworkDispatcher.Update();
 Microsoft.Xna.Framework.Media.MediaPlayer.IsRepeating = true;
 Microsoft.Xna.Framework.Media.MediaPlayer.Play(s); 
```

它开始播放声音并在一秒钟后停止，而歌曲时长为 10 秒。怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:42:41.013

Silverlight 是基于事件的，而 XNA 是基于循环的。您需要启用 XNA 框架事件，如此[处](http://msdn.microsoft.com/en-us/library/ff842408.aspx)所述。作为快速测试以查看是否是问题所在，在页面的构造函数中，您可以添加以下内容：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromMilliseconds(30);
timer.Tick += delegate { try { FrameworkDispatcher.Update(); } catch { } };
timer.Start(); 
```

# jboss7.x - 启用 JBoss AS 7 目录列表

> ID：12813390
> 
> 赞同：4
> 
> 时间：2012-10-10T06:38:01.440
> 
> 标签：jboss7.x

我将以下目录结构部署到 JBoss AS 7.1.1.Final（在 下`standalone/deployments`）：

```
doc.war
    -> module1
        -> index.html
    -> module2
        -> index.html 
```

可以看到，doc.war 下没有 index.html。当我浏览到**localhost:8080/doc/module1/**时，会显示正确的 index.html，但是当我浏览到**localhost:8080/doc/**时，JBoss 会显示一条错误消息（*404 - The requested resource is not available*）。

我认为这与 JBoss AS 7 中默认关闭目录列表这一事实有关。我如何才能全局启用目录列表，或者更具体地为这个应用程序启用目录列表？

**编辑**

根据 Mukul Goel 的回答，我运行 CLI 命令来添加*静态资源*功能，重新启动服务器并重试请求，但它不起作用。

这是文件中的相关片段`standalone.xml`。请注意，我启用了*本机连接器。*

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="true">
    <configuration>
        <static-resources listings="true"/>
    </configuration>
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https"/>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem> 
```

这是 JBoss 显示的错误消息：

![JBoss 错误消息](../Images/1667a7d788894a63f6153c65972ebb8c.png)

**更新**

所以这个结论似乎是官方 JBoss 7.1.1.Final ( [http://www.jboss.org/jbossas/downloads](http://www.jboss.org/jbossas/downloads) ) 下载存在问题。我没有设法让目录列表与这个版本一起工作。尝试更高版本（来自[https://ci.jboss.org/jenkins/job/JBoss-AS-7.x-latest/](https://ci.jboss.org/jenkins/job/JBoss-AS-7.x-latest/)的 JBoss CI 服务器），我能够在应用配置更改后看到目录列表Mukul Goel 在下面提出的建议。

此问题的潜在来源可能是 JBoss 中使用的 JBossWeb 版本。官方的 7.1.1.Final 捆绑了 JBossWeb 7.0.13。Mukul（见下文）能够让它运行一个捆绑了 JBossWeb 7.0.16 的 JBoss 版本。

我接受 Mukul Goel 的回答来解决这个问题，但请注意，它可能不适用于官方 7.1.1.Final 下载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T06:46:05.577

是的，你是对的，目录列表默认是禁用的（一种安全措施）

在 JBOSS 中启用目录列表

尝试运行以下 CLI 命令以启用目录列表：

> **在域模式下**
> 
> /profile=full/subsystem=web/configuration=static-resources/:write-attribute(name=listings,value=true)

.

> **在独立模式下**
> 
> /subsystem=web/configuration=static-resources/:write-attribute(name=listings,value=true)

它将生成以下类型的配置：

```
 <subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">

            <configuration>
                <static-resources listings="true"/>
            </configuration>

            <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
            <virtual-server name="default-host" enable-welcome-root="true">
                <alias name="localhost"/>
                <alias name="example.com"/>
            </virtual-server>
        </subsystem> 
```

更新：当用户遇到问题时，我自己尝试过

用于独立模式的 RAN CLI 命令

这是生成的，请注意本机已禁用，也没有为我生成 HTTPS 连接器（不知道为什么它显示为您启用？您在某处使用 openSSL 吗？）

![来自standalonex.ml 的相关代码](../Images/b0d38dc5568b550837ce60ea966df75b.png)

我创建了一个带有两个 html 的示例 webprojet（一个客户端项目），将其发布到 jboss 并点击 url

```
http://localhost:8080/sample/ 
```

这是目录列表的截图

![目录列表截图](../Images/df6b0652616d1b4e88069ca4d30eaf8c.png)

该命令对我有用，因此确实打开了 JBOSS AS7.1.1 Final 上的目录列表（我也在使用相同的版本）所以问题归结为您的服务器配置的其余部分，您的应用程序结构，您正在使用的技术，弹簧等，如果您使用的是一些 ssl 库。

**更新 2** 建议一个全新的下载和重新配置环境，看到 nwinkler 即使使用全新的发行版（JbossWeb 7.0.13）仍然面临问题所以建议从夜间构建

> ci.jboss.org/jenkins/job/JBoss-AS-7.x-latest
> 
> 只需转到链接并下载最后一个成功工件下的内容

问题就解决了。看起来像 jbossWeb 7.0.13 的一些错误

***一定要浏览评论，讨论可能会有所帮助***

# java - 异常无法在 JMX 服务器中绑定 URL

> ID：12813397
> 
> 赞同：1
> 
> 时间：2012-10-10T06:38:16.163
> 
> 标签：java, url, binding, jmx

我想编写一个 JMX 服务器和客户端，在编写客户端时我遇到了这个问题

我可以正确注册我的 MBean，但是当我尝试运行服务器时，出现以下异常：

> 无法绑定 URL [rmi://localhost:9999/server]

我将服务器配置如下：

```
JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:9999/server");
JMXConnectorServer cs =JMXConnectorServerFactory.newJMXConnectorServer(url,null,mbs);
cs.start; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:15:13.243

1.  检查端口上没有运行的内容 (netstat)
2.  尝试 127.0.0.1 而不是 localhost

# css - LESS 导入 CSS 和相对路径

> ID：12813400
> 
> 赞同：20
> 
> 时间：2012-10-10T06:38:26.830
> 
> 标签：css, less

我正在使用 LESS 来组织和导入我所有的 CSS 文件。我也在使用 Twitter Bootstrap，它集成在我的 style.less 中。它可以像下面一样正常工作，但是当我使用 lessc 来缩小 less 文件并将其压缩到我的 twitter bootstrap css 时，一切都变得松散了。原因是我`bootstrap.min.css`有一个图像的相对路径，`"../img"`所以当我缩小所有这些文件并转储我的输出文件时，它不再找到这个路径。

我应该如何解决这个问题，我不想在我的 CSS 中硬编码绝对 URL？

```
style.less
    @import './folder_one/file_one';
    @import './folder_one/file_two';
    @import './folder_two/file_one';
    @import './folder_three/file_one';
    // this bootstrap css references images relatively ../img/
    @import './bootstrap/bootstrap.min.css'; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-04T21:31:29.643

运行 lessc 时，使用 --relative [-urls](http://lesscss.org/usage/#command-line-usage-relative-urls)标志。

```
lessc --relative-urls 
```

它的文档记录很差，但默认情况下它是 false ，这意味着所有 @imported 文件都将保持它们的 url（例如背景图像、字体等）。这是因为 less 已经在这样做了，许多用户希望它不理会他们的 url。

当使用 relative-urls 标志时，lessc 根据要导入的 less/css 文件的位置重写所有 url。

**例子**

*/dir1/style/main.less*

```
// if you don't include (less) lessc will leave bootstrap
//   as an @import at the top of the lessified css file
@import (less) '../bootstrap/bootstrap.min.css'; 
```

*/dir1/lib/bootstrap/bootstrap.min.css*

```
background-image:url("../img/bs-img.gif"); 
```

结果：

*/dir1/style/main.css*

```
background-image:url("../bootstrap/img/bs-img.gif"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:09:31.130

查看文档以了解命令行用法。 [https://github.com/cloudhead/less.js/wiki/Command-Line-Usage](https://github.com/cloudhead/less.js/wiki/Command-Line-Usage)。有一个名为的选项`--root-path`将预先添加现有的 url，以便它们可以在输出的 css 文件中工作。

```
lessc [option option=parameter ...] <source> [destination]

lessc -rp=will/be/prepended sourcefile.less path/to/destination 
```

* * *

例如：

这是原始网址，文件位于 css/src/nest

```
background-image: url('../../../imgs/bg.png'); 
```

这就是我在命令行上要做的。请注意，`-rp`参数应从**输出目录指向原始文件位置**

```
lessc -rp=src/nest css/src/nest/nesty.less css/nesty.less 
```

和输出，文件在 css/

```
 background-image:url('src/nest/../../../imgs/bg.png') 
```

* * *

有一个`--relative-urls`选项，但我无法让它工作。我正在使用上面描述的解决方法构建脚本。[Build-o-Matic](https://github.com/positlabs/Build-o-Matic)

这就是我处理确定路径的方式[[链接]](https://github.com/positlabs/Build-o-Matic/blob/master/modules/compile_styles.py#L50)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-19T09:32:34.920

我刚遇到这个问题并解决了。解决方案是将`../`要导入的样式表的路径添加到它找到它之前。看这里 ：

[![在此处输入图像描述](../Images/78983b550c30d699ffa4030e84a07eaa.png)](https://i.stack.imgur.com/uKrKT.png)

然后我添加了`../`多次，直到我逃到想要的目录并且它起作用了

[![在此处输入图像描述](../Images/9fc7538c940d5ca6ec198a0ffd8fdf78.png)](https://i.stack.imgur.com/xzQWs.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-27T09:21:02.793

`--relative-urls`flag 有其在浏览器中的对应物。

```
<script>
less = {
    env: "development",
    relativeUrls: true
};
</script>
<script src="less.min.js"></script> 
```

# ios - 通过heroku应用程序层后回形针未将图像保存到S3

> ID：12813404
> 
> 赞同：0
> 
> 时间：2012-10-10T06:38:34.093
> 
> 标签：ios, ruby, heroku, amazon-s3, paperclip

我知道有很多关于上述主题的问题。但是当我通过 Heroku iOS rails 教程（https://devcenter.heroku.com/articles/ios-photo-sharing-geo-location-service#deploy-to-heroku）将我的应用程序的屏幕截图上传到 s3 时，我从heroku获得成功的PUT：

2012-10-10T06:28:39+00:00 app[web.1]：在 2012-10-10 06:28:39 +0000 2012-10-10T06:28 开始为 163.120.70.10 发布“/照片” :39+00:00 app[web.1]: 由 PhotosController 处理#create as JSON 2012-10-10T06:28:39+00:00 app[web.1]: 参数: {"photo"=>{" owner"=>"f93a107d8795c73d085cab1fbbb9ff2c", "image"=>#>}} 2012-10-10T06:28:39+00:00 app[web.1]:[paperclip] 保存附件。

似乎该记录已进入 pregresql 表，它具有：

{"照片":[{"created_at":"2012-10-10T02:39:28Z","id":1,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at" :null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T02:39:28Z"},{"created_at":"2012-10-10T02:49:23Z","id":2 ,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T02:49:23Z"}, {"created_at":"2012-10-10T05:07:01Z","id":3,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T05:07:01Z"},{"created_at":"2012-10-10T05:26:55Z","id ":4,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T05:26:55Z "},{"created_at":"2012-10-10T05:31:37Z","id":5,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null, "所有者":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T05:31:37Z"},{"created_at":"2012-10-10T05:50:16Z","id":6,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012- 10-10T05:50:16Z"},{"created_at":"2012-10-10T06:07:54Z","id":7,"image_content_type":null,"image_file_name":null,"image_file_size":null ,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:07:54Z"},{"created_at":"2012-10-10T06:10:19Z"," id":8,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:10:19Z"},{"created_at":"2012-10-10T06:17:00Z","id":9,"image_content_type":null," image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:17:00Z"},{"created_at":"2012- 10-10T06:19:24Z","id":10,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at" :"2012-10-10T06:19:24Z"},{"created_at":"2012-10-10T06:19:34Z","id":11,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:19:34Z"},{" created_at":"2012-10-10T06:28:16Z","id":12,"image_content_type":null,"image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":" f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:28:16Z"},{"created_at":"2012-10-10T06:28:39Z","id":13,"image_content_type":null," image_file_name":null,"image_file_size":null,"image_updated_at":null,"owner":"f93a107d8795c73d085cab1fbbb9ff2c","updated_at":"2012-10-10T06:28:39Z"}]}michael-blums-macbook-pro:cloudglyph-server

如您所见，这是大量的测试上传。但是很可惜，他们中没有一个人到达了 s3 存储桶，而且 heroku 日志中没有任何迹象表明它是否到达了 S3。需要明确的是，我没有诸如 AWS 凭证错误之类的错误。起初，我使用了一个对我的 s3 存储桶只有读/写访问权限的 IAM 用户，然后切换到我的主凭证。

我的 heroku 服务器是一个设置为开发设置的主机，我的所有 aws 凭据都存储在 .env 中，如上面链接的教程中所述。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:22:40.810

找到了。它有点问题。在 rails 中，您显然需要指定回形针的记录才能成功写入和读取。

将以下内容添加到您的模型文件中：

```
 attr_accessible :yourRecord 
```

就我而言， yourRecord 是上面 json 转储中的图像。另外，我从 heroku 教程中删除了版本控制，因为 Paperclip 已经进入 v 3.xx

# javascript - android 4.0 中的屏蔽输入文本框问题

> ID：12813405
> 
> 赞同：3
> 
> 时间：2012-10-10T06:38:39.147
> 
> 标签：javascript, android, cordova

我为 Android 开发了一个 Phonegap 应用程序，但我在 Android 4.0 中遇到了问题。

在屏蔽的输入文本框中输入数字时，键盘不会保持数字状态。它不断切换回字母字符，这使得输入数字变得困难，因为它会在每个数字后自动更改键盘显示。

它在 Android 2.2 中运行良好。

**这是我的 JS 代码：**

```
<script type="text/javascript" src="js/jquery.maskedinput-1.3.js"></script>

    $(document).ready(function()
        if($("#text").length==1)
        {
            $("#text").mask("(999) 999-9999");
        }
    });

</script> 
```

**我的 HTML：**

```
<input type="text" id="text"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:34:30.527

您需要将类型更改为数字。或者，如果您在移动设备上使用 html5，您可以使用 type="tel" 在移动设备上获取十位数字键盘。不过要小心，这会导致 Android 出现问题。

尝试输入 type="number" id="youShouldMakeThisUnique"

[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T13:52:57.687

1 - 将 masked-input 更新到至少版本 1.4
2 - 将 type="tel" 添加到输入中，以触发电话键盘
3 - 删除输入的 maxlength 属性或将其设置为一定不会干扰插入符号操作的值，像20。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T18:47:02.233

将输入类型更改为“文本”是正确的解决方法。

# http - https 流量似乎将流向根域而不是子域

> ID：12813407
> 
> 赞同：0
> 
> 时间：2012-10-10T06:38:45.253
> 
> 标签：http, ssl, https, ssl-certificate

好吧，我没有很好的方式试图从逻辑上说出来......所以我会尽力描述它，但提前为做得不好而道歉。

我有 6 个左右的子域，最近在我的服务器上安装了 SSL 证书。如果使用 https，我的所有入站流量似乎都通过主域，而不是 6 个子域中的任何一个。

所以我有例如：

domain.com - 主域 sub1.domain.com sub2.domain.com sub3.domain.com sub4.domain.com sub5.domain.com sub6.domain.com

如果我使用[https://subX.domain.com](https://subX.domain.com)（X 是上面的数字）。subX 中的文件没有被使用。我通过在域的每个变体中放置几个​​种子文件来测试这个概念。所有独特和随机。因此，任何一个域都不可能拥有这些文件。

使用 6 个潜艇中的任何一个，我都会得到 404 的 .. 但是，如果我使用 domain.com 或 subX.domain.com 以及仅在 domain.com 示例中的文件：domain.com 具有 iiiindext25.html 但没有一个潜艇可以。 .

如果我执行[https://subX.domain.com/iiiindext25.html](https://subX.domain.com/iiiindext25.html)我会看到该文件，如果我执行[http://subX.domain.com/iiiindext25.html](http://subX.domain.com/iiiindext25.html)我看不到该文件，我会看到 404 错误我会期待的。

如果我执行[http://subX.domain.com/](http://subX.domain.com/)任何我分别放入任何文件的文件，我都会看到该文件。

因此，总体而言，无论何时 https:// 正在运行，所有流量都会被路由到主域。我不认为这是正确的行为。关于可能出错的任何建议或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:51:42.980

现在的情况，https 在根文件夹上监听，我对 Apache 并不完全熟悉，但所有的 Web 服务器都这么认为。您可以尝试检查 /etc/httpd/conf.d/ssl.conf 您将看到默认分配了哪个文件夹。

现在您可以编辑您的虚拟主机并添加

```
<VirtualHost *:443>
    ServerName subX.example.com
    DocumentRoot /yoursite/www

    SSLEngine on
    SSLCertificateFile /etc/ssl/private/subX.example.com.pem
</VirtualHost> 
```

但请记住，如果证书不是通配符，您将获得**站点的安全证书不受信任！**

并在虚拟主机中更改后重新启动apache

# javascript - 如何在 div 标签中显示回复概念？

> ID：12813410
> 
> 赞同：0
> 
> 时间：2012-10-10T06:38:57.383
> 
> 标签：javascript, jquery, html, css

我想使用 HTML、CSS 和 Javascript 或 JQuery 在我的页面上开发内部邮件概念。实际上，我已经完成了收件箱、发件箱和已发送邮件功能。目前，我正在开发回复功能，但遇到了一些问题（如下所述）。

我想使用以下格式将数据插入数据库：
----原始消息----
发件人：test@test.com
收件人：test1@test.com
主题：test

而且，每当我想从数据库中检索该数据时，我希望它返回相同的格式。但现在它返回以下格式。

```
----Original Message----From : test@test.comTo : test1@test.comSubject : test 
```

有谁知道我该怎么做？请帮助我....提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:43:38.820

使用`\n (NewLine)` if text 或`<br/>` if HTML 将消息分成多行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:09:20.063

我得到了这个问题的解决方案。实际上，我使用以下代码将数据插入到`db`替换中：`<br>``\n`

```
body = body.split("<br>").join("\r\n"); 
```

`db`然后，当我使用以下代码检索该数据时，

```
body = body.split("\n").join("<br />"); 
```

现在它工作正常。

# python - 如何在 Python 中获取 logging.FileHandler 的文件名？

> ID：12813415
> 
> 赞同：16
> 
> 时间：2012-10-10T06:39:46.440
> 
> 标签：python, logging, file-io

A`logging.FileHandler`是用文件名构造的，那么有没有办法从`logging.FileHandler`对象中获取文件名？

我试过`dir(logging.FileHandler)`但没有看到任何可能的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T06:46:24.257

```
>>> import logging
>>> fh = logging.FileHandler('/Users/defuz/test.txt')
>>> fh.baseFilename
'/Users/defuz/test.txt'
>>> fh.stream.name
'/Users/defuz/test.txt' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-30T07:13:52.867

请找到目录（logging.FileHandler）

```
 ['__class__', '__delattr__', '__dict__', '__doc__', '__format__', 
  '__getattribute__', '__hash__', '__init__', '__module__', '__new__', 
  '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', 
  '__str__', '__subclasshook__', '__weakref__', '_name', '_open', 'acquire', 
  'addFilter', 'baseFilename', 'close', 'createLock', 'emit', 'encoding', 'filter', 
  'filters', 'flush', 'format', 'formatter', 'get_name', 'handle', 'handleError', 
  'level', 'lock', 'mode', 'name', 'release', 'removeFilter', 'setFormatter', 'setLevel', 
  'set_name', 'stream'] 
```

您可以选择 obj.baseFilename 来获取文件名。

# bash - 如何将jsp var输出到html

> ID：12813418
> 
> 赞同：0
> 
> 时间：2012-10-10T06:40:02.090
> 
> 标签：bash, jsp, shell

我本来会直截了当地这么想的，但事实并非如此。

目标：我正在`ArgCHeck.sh`通过我的 .jsp 文件运行一个 shell 脚本。这工作正常，我可以在我的系统控制台中看到输出。

但是，当我尝试通过 HTML 将该行输出到浏览器时，它似乎不起作用。

我尝试将字符串设置为`Static final String line = "test";`，这可以输出单词 test，但不是我想要的来自其他字符串行的值。

它可能是我错过的东西，但任何帮助都是值得的。

```
<%@page import="java.io.*"%>
<%@page import="java.util.*"%>
<%!

%>
<%
Runtime r=Runtime.getRuntime();
Process p=null;
String s=null;
String cmd="/tools/scripts/ArgCheck.sh orange";

p=r.exec(cmd);
InputStreamReader isr=new InputStreamReader(p.getInputStream());
BufferedReader br=new BufferedReader(isr);
String line = null;
while((line = br.readLine()) != null){
System.out.println(line);
}
p.waitFor();

System.out.println(p.exitValue());
%>
<html>
    <head/>
    <body>
        <%
    // This scriptlet generates HTML output
    out.println( String.valueOf( line ));
%>
    </body>
</html> 
```

- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - -------------------------------------------

这就是你剪切和粘贴时得到的结果。我阅读了代码，这很明显。是时候休息一下了。

```
<%@page import="java.io.*"%>
<%@page import="java.util.*"%>

<html>
<head>
<head/>

<body>

<% 
Runtime r=Runtime.getRuntime();
Process p=null;
String s=null;
String cmd="/tools/scripts/ArgCheck.sh";

p=r.exec(cmd);
InputStreamReader isr=new InputStreamReader(p.getInputStream());
BufferedReader br=new BufferedReader(isr);
String line = null;
while((line = br.readLine()) != null){
out.println(line);
}
p.waitFor();
%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:19:10.857

给你..只需更改文件路径。

```
<%@page import="java.io.*"%>
<%@page import="java.util.*"%>
<%!
private String runScriptFile(){
    String strRetVal = "";
    Runtime r=Runtime.getRuntime();
    Process p=null;
    String s=null;
    String cmd="D:\\test.bat";
    try{
        p=r.exec(cmd);
        InputStreamReader isr=new InputStreamReader(p.getInputStream());
        BufferedReader br=new BufferedReader(isr);
        String line = null;
        while((line = br.readLine()) != null){
            strRetVal += line + "<br>";
            System.out.println(line);
        }
        p.waitFor();
    }catch(Exception e){
        e.printStackTrace();
    }
    return strRetVal;
}
%>
<%
String line = runScriptFile();
%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Batch File Test</title>
    <head/>
    <body>
<%
    // This scriptlet generates HTML output
    out.println( String.valueOf( line ));
%>
    </body>
</html> 
```

# joomla - 将模块从 1.5 转换为 2.5 版本

> ID：12813419
> 
> 赞同：0
> 
> 时间：2012-10-10T06:40:03.767
> 
> 标签：joomla, module, migrate

已经在谷歌上搜索了几个小时以找到有关如何将我的模块从 Joomla 版本 1.5 转换为 2.5 的解决方案。

模块不会显示在“扩展 > 模块管理器”下的管理员区域中。

我应该从哪里开始以及如何迁移我的模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:22:16.757

将相当简单的模块更新为兼容 2.5 非常简单。首先是 XML 文件。

`<install version="1.5">`需要替换为`<extension version="2.5">`

最后的标签也是如此：`</install>`to`</extension>`

然后，您需要从参数开始。每个参数都用 定义`<param>`并需要更改为`<field>`。但是，需要在字段的开头和结尾添加更多内容，如下所示：

将相当简单的模块更新为兼容 2.5 非常简单。首先是 XML 文件。

`<install version="1.5">`需要替换为`<extension version="2.5">`

最后的标签也是如此：`</install>`to`</extension>`

然后，您需要从参数开始。每个参数都用 定义`<param>`并需要更改为`<field>`。但是，需要在字段的开头和结尾添加更多内容，如下所示：

```
<config>
   <fields name="params">
      <fieldset name="basic">
            //Fields go in here
      </fieldset>
   </fields>
</config> 
```

此外，如果您使用的是语言文件，则需要复制并粘贴您拥有的以下文件并添加`.sys`到名称中，如下所示`en-GB.mod_example.sys.ini`。然后打开这个文件，确保模块的描述是文件中唯一的翻译。完成后，在 XML 中指定语言文件。不要忘记 Joomla 2.5 的语言文件不支持`#`在数据行的开头，需要替换为`;`

跟上任何被删除或弃用的功能也可能是一个想法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:19:51.787

模块、组件和插件都是扩展，具有[不同的用途。](http://docs.joomla.org/Extension_types_%28general_definitions%29)

正如@Irfan 所提到的，已经检查了 Joomla！文档页面：

[将 Joomla 1.5 扩展适配到 Joomla 1.6](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6)

[Joomla！清单文件](http://docs.joomla.org/Manifest_files)

如前所述，它可以通过更新模块的清单文件（xml 文件）来工作。如果它是一个组件，事情会变得更加复杂。

作为旁注，您的问题越模糊，答案就越模糊。向我们提供更多详细信息（例如组件名称或您收到的错误）。

# ios - ZKSforce 详细文档

> ID：12813422
> 
> 赞同：1
> 
> 时间：2012-10-10T06:40:30.223
> 
> 标签：ios, salesforce

是否有任何可用于 ZKSforce 库的文档，通过它的对象提供有效的使用和解析数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:35:35.447

有[自述](https://github.com/superfell/zkSforce/blob/master/README.md)文件、[ZKSforceClient.h](https://github.com/superfell/zkSforce/blob/master/zkSforce/zkSforceClient.h)中的注释和[示例代码](https://github.com/superfell/zkSforce/tree/master/samples)。文档假定您已经熟悉[Salesforce SOAP API](http://www.salesforce.com/us/developer/docs/api250/index.htm)，如果您不熟悉，请先查看文档。

# java - 在 Eclipse 上调试 CGLIB FastClass 时出错

> ID：12813423
> 
> 赞同：2
> 
> 时间：2012-10-10T06:40:32.467
> 
> 标签：java, eclipse, debugging, reflection, breakpoints

我正在尝试调试一个有问题的java eclipse项目！

我开始使用[CGLIB](http://cglib.sourceforge.net/)使用索引方法进行更快的反射调用。

例子

```
FastClass fastClass = FastClass.create(getClass());
int index = fastClass.getIndex("methodName", new Class[] { Object.class });
fastClass.invoke(index, this, new Object[] { obj } ); 
```

现在，当我尝试将断点放入由 fastreflection 方法调用的类中时，这是 eclipse 输出。

![断点输出](../Images/bee179eb4e008e81ddd9424fc06722d2.png)

我尝试在生成行号时更改编译器选项，但没有结果。

我还上传了一个复制问题的 Eclipse 项目（使用 Juno 版本构建）！！

[http://www.filefactory.com/file/4zryz3gjgbyh/n/FastDebug.rar](http://www.filefactory.com/file/4zryz3gjgbyh/n/FastDebug.rar)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:38:49.623

我“解决”（理解）了这个问题，但这不是 Eclipse 的问题。当您启动程序时，这一行： FastClass.create(ReflectionTarget.class); 最终创建一个全新版本的已编译类，从类文件中删除所有非必要的东西以使其“快速” - 包括所有行号/调试信息，这意味着无法在其中设置断点。

[http://cglib.sourceforge.net/xref/net/sf/cglib/core/package-summary.html](http://cglib.sourceforge.net/xref/net/sf/cglib/core/package-summary.html)

没有 javadoc，您需要阅读源代码，但现在我明白这不是问题，而是此方法的一个特点，可以快速反射！

# php - 在 laravel 中清理用户输入

> ID：12813424
> 
> 赞同：13
> 
> 时间：2012-10-10T06:40:39.070
> 
> 标签：php, xss, laravel

我有一个简单的问题：清理用户输入的最佳时间是什么时候？其中哪一项被认为是最佳实践：

1.  在写入数据库之前清理数据。
2.  保存原始数据并在视图中对其进行清理。

例如使用`HTML::entities()`并将结果保存到数据库。或者通过`HTML`在视图中使用方法，因为在这种情况下 laravel 默认使用`HTML::entities()`. 或者也许通过使用两者。

**编辑：**我发现了有趣的例子[http://forums.laravel.com/viewtopic.php?id=1789](http://forums.laravel.com/viewtopic.php?id=1789)。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T04:56:53.937

我会说你需要两个位置，但出于不同的原因。当数据进来时，您应该根据域验证数据，并拒绝不符合要求的请求。例如，如果您需要一个数字，则允许使用标签（或文本）是没有意义的。对于代表年份的参数，您甚至可能想要检查它是否在某个范围内。对自由文本字段进行清理。您仍然可以对 0 字节等意外字符进行简单验证。恕我直言，最好通过安全的 sql（参数化查询）存储原始数据，然后正确编码输出。有两个原因。首先，如果您的消毒剂有错误，您将如何处理数据库中的所有数据？重新消毒可能会产生不良后果。其次，无论您使用哪种输出（JSON、HTML、

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-11T13:14:10.657

我有一篇关于 Laravel 输入过滤的完整文章，你可能会发现它很有用**[http://usman.it/xss-filter-laravel/](http://usman.it/xss-filter-laravel/)**，这里是这篇文章的摘录：

你可以自己做一个全局 XSS 清理，如果你没有一个库来编写你可能经常需要的常用方法，那么我要求你在应用程序/库中创建一个新的库 Common。将这两种方法放在您的公共库中：

```
/*
 * Method to strip tags globally.
 */
public static function global_xss_clean()
{
    // Recursive cleaning for array [] inputs, not just strings.
    $sanitized = static::array_strip_tags(Input::get());
    Input::merge($sanitized);
}

public static function array_strip_tags($array)
{
    $result = array();

    foreach ($array as $key => $value) {
        // Don't allow tags on key either, maybe useful for dynamic forms.
        $key = strip_tags($key);

        // If the value is an array, we will just recurse back into the
        // function to keep stripping the tags out of the array,
        // otherwise we will set the stripped value.
        if (is_array($value)) {
            $result[$key] = static::array_strip_tags($value);
        } else {
            // I am using strip_tags(), you may use htmlentities(),
            // also I am doing trim() here, you may remove it, if you wish.
            $result[$key] = trim(strip_tags($value));
        }
    }

    return $result;
} 
```

然后将此代码放在之前过滤器的开头（在 application/routes.php 中）：

```
//Our own method to defend XSS attacks globally.
Common::global_xss_clean(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-08T18:23:46.790

我刚刚发现了这个问题。另一种方法是将动态输出括在这样的三重括号中`{{{ $var }}}`，刀片将为您转义字符串。这样，您可以保留潜在危险的字符，以防它们在代码中的其他地方很重要，并将它们显示为转义字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T04:38:40.913

这取决于用户输入。如果您通常要输出他们可能提供的代码（例如，它可能是一个提供代码片段的站点），那么您将对输出进行清理。这取决于上下文。如果您要输入用户名，并且他们正在输入 HTML 标记，那么您的验证应该选择这个并继续“不，这不酷，伙计！”

如果它就像我之前所说的示例（代码片段），那么让它通过 RAW（但请确保您的数据库不会损坏），并在输出时进行清理。使用 PHP 时，您可以使用`htmlentities($string)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-08T17:51:08.947

我发现这个是因为我担心 laravel 中的 xss，所以这是[gvlatko包](http://packalyst.com/packages/package/gvlatko/laravel-xss)

这很容易：

清除输入 = $cleaned = Xss::clean(Input::get('comment');

在视图中使用 = $cleaned = Xss::clean(Input::file('profile'), TRUE);

# git - git svn 工作流程：如何使用 svn 远程分支？

> ID：12813427
> 
> 赞同：3
> 
> 时间：2012-10-10T06:40:54.983
> 
> 标签：git, svn, git-svn

我已经使用 git 克隆了我的 svn 存储库，指定了分支和主干（不涉及标签）。然后，我运行 fetch 进行有限范围的修订。我现在有：

```
$ git branch
* master 
```

和

```
$ git branch -r
  version-2.3.1
  version-2.3.2
  version-2.3.3
  trunk 
```

所以，我知道这些分支是远程分支，我确实读过[http://git-scm.com/book/en/Git-Branching-Remote-Branches](http://git-scm.com/book/en/Git-Branching-Remote-Branches)，但是因为远程分支对我来说是新的，所以我有很难理解如何在 svn 上下文中使用这些知识。此链接上的一个人[如何使用 git-svn 切换 svn 分支？](https://stackoverflow.com/questions/728931/how-to-switch-svn-branches-using-git-svn)说只是做：

```
git reset --hard remotes/branch
git checkout branch
etc 
```

但是第二个命令“git checkout branch”不适用于我，因为我没有任何本地分支.....

所以，既然我有一堆与 svn 分支相对应的远程分支，那么“svn 切换”到其中一个分支的推荐工作流程是什么，dcommit'ing，然后“svn 切换”回到另一个分支分支？我从不使用主干，我总是在树枝上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:46:01.440

现在您在 master 分支中，您只需：

```
git reset --hard version-2.3.3 
```

然后您的主分支与远程分支版本-2.3.3 相同。

创建另一个分支：

```
git checkout -b local-version-2.3.1
git reset --hard version-2.3.1 
```

然后创建一个名为：local-version-2.3.1 的新分支，它与远程分支 version-2.3.1 相同。

祝你好运。

# regex - netbeans 正则表达式在括号内查找字符串

> ID：12813428
> 
> 赞同：0
> 
> 时间：2012-10-10T06:40:56.150
> 
> 标签：regex, netbeans

我有一个字符串要查找：[general_options] 并使用了这个 exp: `(\[.*])`in netbeans

但是它找到了带有括号的整个 [....] 字符串，我只需要里面的内容：general_options，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:51:07.593

要么你改变你的捕获组

```
\[(.*)] 
```

并从捕获组 1 中获取您的结果（假设这是唯一的一个）

或者您使用[后向和前瞻断言](http://www.regular-expressions.info/lookaround.html)（如果它们受支持）

```
(?<=\[).*(?=]) 
```

# excel - 为 Excel 格式化 HTML 表格

> ID：12813430
> 
> 赞同：0
> 
> 时间：2012-10-10T06:41:04.187
> 
> 标签：excel, asp-classic, formatting, html-table

我在 asp 中有一个创建 xls 表的页面，但是当打开表时，所有行都填充到我想设置的默认列宽中。

我的桌子看起来像这样：

```
<table>
<thead>
'A for loop makes a series of th 
</thead>
'another loop pulls db values
<tr><td>value1</td><td>value2</td> 'etc </tr>
</table> 
```

我尝试了以下设置空间

*   宽度=“3.29英寸”
*   &nsp; 垃圾邮件（野蛮但有时有效）
*   宽度=“400像素”
*   样式=“宽度：300px”

以上似乎都不起作用。

此外，这是我的标题 asp 以防其相关

```
Response.Clear()
Response.Buffer = False
Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader "Content-Disposition", "attachment; filename=blah.xls" 
```

出于某种原因，当我这样打印美元价值时，也在旁注中

```
<td>$<%=dbvalue%></td> 
```

出于某种原因，这会产生 '$dollar 价值，我不确定如何取消单引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:27:01.007

你需要thead标签吗？像这样的东西应该工作：

```
<html>
<body>
<h1>Report Title</h1>
<table >
<tr>
 <th style="width : 300px">header1</th>
 <th style="width : 100px">header2</th>
 <th style="width : 200px">header..</th>
 <th style="width : 300px">....</th>
</tr>
<tr class="row1">
 <td >value1</td>
 <td >value2</td>
 <td >value..</td>
 <td >....</td>
</tr>
.... 
```

或者，您可以将带有 th 标签的表格行放在 <thead> 标签内

# c# - 使用 Gallio 和 opencover 的声纳，代码覆盖率：0%

> ID：12813431
> 
> 赞同：0
> 
> 时间：2012-10-10T06:41:07.777
> 
> 标签：c#, code-coverage, sonarqube, gallio, opencover

我正在使用声纳检查我的 c# 项目。我想测量代码覆盖率，这就是我安装 Gallio 和 opencover 的原因。当我运行 soner-runner 一切正常时，我的单元测试已执行，......但声纳 Web UI 上的代码覆盖率为 0%。

你知道代码覆盖率为0%的原因吗？

我的解决方案、项目和课程： (S) SonarTestSolution (P) ClassLibrary1 (C) Class1.cs (P) ClassLibrary1NUnitTest (C) Class1NUnitTest.cs

Class1.cs的内容：

```
public class Class1  {
    public String getTestString() {  return "abc";}
} 
```

Class1NUnitTest.cs 的内容：

```
 [TestFixture]
    public class Class1NUnitTest    {
        [Test]
        public void createServiceFromFactoryTest()  {
            Class1 c = new Class1();
            Assert.That(c.getTestString(), Is.EqualTo("abc"));
    }} 
```

声纳-project.properties：

```
 sonar.projectKey=cs_sonar_test
  sonar.projectVersion=1.0-SNAPSHOT
  sonar.projectName=C# Sonar Test Project
  sonar.sourceEncoding=UTF-8
  sources=.
  sonar.language=cs
  sonar.donet.visualstudio.testProjectPattern=*NUnitTest* 
```

如果需要，我可以包含日志 og sonar-runner，以及生成的 coverage-report.xml 和 gallio-report.xml 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:38:26.770

解决了 - 该项目正在建造另一台机器，这就是问题所在。在同一文件夹中构建解决方案可以解决问题。

# svn - 是否可以部分还原 SVN 中的合并

> ID：12813433
> 
> 赞同：1
> 
> 时间：2012-10-10T06:41:17.253
> 
> 标签：svn, tortoisesvn

我已经合并了从主干到分支的许多修订（比如说 50 到 100）。我已将工作副本的更改提交到分支（rev 101）。

后来，我发现不应该合并修订版 80-100。通常，“显示日志屏幕”中的“从这些修订中恢复更改”命令有效，但是现在，当我选择所述修订（打开“包括合并的修订”选项）时，对话框显示合并已完成，但工作副本上没有任何更改。

是否完全支持这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:56:48.863

*   您不能撤消少于一次的提交
*   Mergeset 是分支中的一次提交

从上面可以看出，为了解决问题，您**必须**提交*至少一个额外的*更正修订

简单的方法（2 次修订） - 回滚 101，从主干合并右集

Hard short way (1 revision) - 如果您已合并 50:100，但必须有 50:79，您可以从*分支头反向合并不需要的**主干修订*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T19:09:30.823

您的工作副本支持该方案，而不是远程分支。TortoiseSVN 被制成“永不丢失数据”：[在存储库中回滚（撤消）修订 - TortoiseSVN 文档的附录 B](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-howto-rollback.html)

如果分支中确实需要此还原，请尝试远程删除分支并重新创建它。*

# java - 安卓蓝牙游戏不同步

> ID：12813438
> 
> 赞同：0
> 
> 时间：2012-10-10T06:41:48.880
> 
> 标签：java, android, bluetooth

我有一个蓝牙游戏应用程序，架构很像 API Demo 中的蓝牙聊天应用程序，只是不是发送消息，而是两个玩家互相发送一个“东西”来玩游戏。

为了简化，例如，两个玩家都选择枚举 {Red, Green, Blue} 之一，然后按下发送按钮通过蓝牙消息机制发送。如果两个玩家都选择了相同的枚举，他们玩的游戏就说“相同”，否则说“不一样”。对不起，你知道我为什么要隐藏这个，我希望它不会影响讨论。

枚举由按钮表示，例如

```
redButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
             myColor = Red;
        } 
```

发送按钮就像

```
send.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

               sendChoiceViaBluetooth();
               //inside this method I used some stuff from the 
               //BluetoothChat API Demo to send the choice
        } 
```

如果我在发送按钮后点击不同的“颜色”按钮，我可以重新发送一个新的选择。

还有这样的judge()方法

```
if (myColor != null && otherColor != null){

    compareColors();
    showResult();
    myColor = null;
    otherColor =null;
} 
```

myColor 和 otherColor 在开始时都为空，并在judge() 结束时被重置。

问题是如果我在两台设备上玩很多次都非常快，或者有时我只是不知道为什么，游戏就会不同步。即我仅从设备 A 发送颜色，设备 B 进行判断（），而不是设备 A，然后我去设备 B 并发送颜色，设备 A 进行判断，但设备 B 上没有任何内容。双方似乎都是从上届会议的“其他颜色”中做出判断。这可以继续，但有时它会在一段时间后消失。

我认为某处可能不同步，但我不知道在哪里。很多通讯方式只是来自API Demo中的BluetoothChatService.java，大部分是同步的。

有人可以指点我寻找答案的方向吗？我应该在哪里检查等？很抱歉这篇冗长的帖子，实际代码更糟，但我试图简化情况。

..................................................... ........我发现这个错误可能是由于传输丢失。假设 play A 和 B 都比较 localColor 和 remoteColor 以获得结果。如果玩家A将他的颜色发送给B但它是LOST，那么此时游戏状态是这样的：（v表示选择，x表示无）

```
 A          |              B

Time 1:      localColor   remoteColor | localColor   remoteColor

                v                x          x         x 
```

什么都不会播放。现在如果B选择颜色并发送成功，状态变为：

```
 A          |              B

Time 2:      localColor   remoteColor | localColor   remoteColor

                v                v          v         x 
```

只有 A 得到两个选择，所以只有 A 做一个判断（），B 什么都不做。不同步。接下来A选择一些东西，只有B做judge()，A什么也不做。

我应该怎么做才能让两个玩家保持在同一页面上？即确保其他玩家收到本地选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:16:56.550

听起来您需要禁用发送按钮，直到结果从另一台设备返回并且`judge()`已经发生，然后您可以重新启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:22:47.843

如果你只想判断两个结果是否到位，也就是说A在B做出选择之前可能已经改变了100次，那么你应该只在双方都有选择的情况下进行判断。

所以通常在一个动作响应的方式中，A 发送蓝色，B 选择红色。然后法官会看到两个选择并进行判断。这将要求判断动作实际上在两个设备上同步，或者至少可以访问两个设备的选择。（例如锁定发送按钮，以便在判断之前无法更改。）

在我看来，除了选择之外，您还需要发送判断状态，以便一个设备不会判断而另一个设备不会。此外，收到的每个响应都应回显裁判状态和其他玩家的选择。

> 我只从设备 A 发送颜色，设备 B 进行判断（），而不是设备 A，然后我去设备 B 并发送颜色，设备 A 进行判断，但设备 B 上什么都没有。双方似乎都在做上届会议的“otherColor”法官。

如果您在收到其他玩家的新选择时没有同步评委或回应当前选择，这对我来说是有意义的。A中的法官只有A刚刚做出的选择，如果由于某种原因没有清除，则选择B在您最后一次审判时做出。

在上面的示例中，它使用旧数据的原因可能是您在设备 A 被清除或检查是否为空时设置设备 A 的值。这将是一个线程安全问题。

我假设法官作为工作人员在单独的线程中运行，并且几乎一直在检查这些变量的状态。如果是这种情况，您需要以某种方式锁定变量或对其进行排队，并让法官使用队列，而不是使用反应值。否则，当法官试图清除变量时，没有什么可以阻止您修改变量。

> 双方似乎都从上届会议的“其他颜色”中做出判断。

这也是有道理的，因为如果发送事件没有得到响应，或者如果您更改局部变量的速度快于法官可以清除它的速度，则最后一个会话是它拥有数据的唯一位置。如果您要同步法官事件，这也将得到解决。

所以总结一下：

*   如果这是通过握手所需的，请尝试同步法官事件。

*   尝试将所有“选择”放入队列中并在判断中使用它们，这样您就不会进入竞争条件，在为变量赋值时检查变量是否为空。

*   确保当应用程序接收到“发送”事件或“选择”时，您正在回显接收设备所做的当前选择，因此该设备始终存在一个值。在你得到这个回应之前不要评判，如果你没有得到回应也不要评判。

有了更多信息，我可能会缩小答案并真正解决问题。

# ios - iOS 上的 CVOpenGLESTextureCache 与 glTexSubImage2D

> ID：12813442
> 
> 赞同：1
> 
> 时间：2012-10-10T06:42:06.887
> 
> 标签：ios, opengl-es, textures

我的 OpenGL 应用程序使用 OpenGL 全屏渲染纹理并定期更新其中的一部分。到目前为止，我一直在使用 glTexImage2D 推送我的初始纹理，然后使用 glTexSubImage2D 更新脏区域。为此，我使用单缓冲。这很好用。

我已经看到可能有另一种方法可以使用 CVOpenGLESTextureCache 来实现相同的目标。保存在纹理缓存中的纹理引用一个 CVPixelBuffer。我想知道我是否可以改变这些缓存的纹理。我尝试为每次更新重新创建一个 CVOpenGLESTexture ，但这会大大降低我的帧速率（毕竟我没有在任何地方指定脏区域，这并不奇怪）。也许我完全误解了这个纹理缓存的用例。

有人可以提供一些指导吗？

更新：这是我正在使用的代码。第一次更新工作正常。随后的更新不会（没有任何反应）。在每次更新之间，我都会修改原始位图。

```
if (firstUpdate) {

    CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, ctx, NULL, &texCache);

    CVPixelBufferRef pixelBuffer;
    CVPixelBufferCreateWithBytes(NULL, width_, height_, kCVPixelFormatType_32BGRA, bitmap, width_*4, NULL, 0, NULL, &pixelBuffer);
    CVPixelBufferLockBaseAddress(pixelBuffer, 0);

    CVOpenGLESTextureRef texture = NULL;
    CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, texCache, pixelBuffer, NULL, GL_TEXTURE_2D, GL_RGBA, width_, height_, GL_BGRA, GL_UNSIGNED_BYTE, 0, &texture);

    texture_[0] = CVOpenGLESTextureGetName(texture);

    CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);
}

CVOpenGLESTextureCacheFlush(texCache, 0);

if (firstUpdate) {
    glBindTexture(GL_TEXTURE_2D, texture_[0]);

    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
}

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

if (firstUpdate) {
    static const float textureVertices[] = {
        -1.0, -1.0,
        1.0, -1.0,
        -1.0, 1.0,
        1.0, 1.0
    };

    static const float textureCoords[] = {
        0.0, 0.0,
        1.0, 0.0,
        0.0, 1.0,
        1.0, 1.0
    };

    glVertexPointer(2, GL_FLOAT, 0, &textureVertices[0]);
    glTexCoordPointer(2, GL_FLOAT, 0, textureCoords);
}

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

firstUpdate = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T05:22:37.737

我一直在对这些纹理 API 进行大量修改，最后我能够生成一个使用纹理缓存 API 通过内存写入纹理的工作示例。这些 API 可以在 iOS 设备上工作，但不能在模拟器上工作，因此需要一个特殊的解决方法（基本上只是在模拟器中显式调用 glTexSubImage2D()）。代码需要对另一个线程中完成的纹理加载进行双重缓冲，以避免在渲染过程中进行更新。完整的源代码和计时结果在[opengl_write_texture_cache](http://www.modejong.com/blog/post12_opengl_write_texture_cache/index.html). 链接的 Xcode 项目从 PNG 解码，因此在旧 iPhone 硬件上的性能有点差。但是代码可以自由地做任何你想做的事情，所以适应其他一些像素源应该不难。要只写入脏区，只需在后台线程中写入内存缓冲区的那部分。

# actionscript-3 - 如何从子 Slider 影片剪辑访问父项中定义的对象

> ID：12813444
> 
> 赞同：3
> 
> 时间：2012-10-10T06:42:15.150
> 
> 标签：actionscript-3, flash, object, parent, movieclip

这是我的应用程序结构：

> 父级->[滑块->[movieClip1,movieClip2,movieClip3]]

所以我基本上在 Slider 组件中有一些影片剪辑。
现在我在父时间线中定义了一个对象

```
var myObj:Object = new Object();... 
```

我想从 Slider 组件中的movieClip1 访问这个对象。
我试过了：

```
trace(MovieClip(this.parent).myObj.A_function_in_the_object()); 
```

哪个输出：

> TypeError：错误 #1034：类型强制失败：无法将 fl.controls::BaseButton@222082e1 转换为 flash.display.MovieClip。在 SliderTrack_skin/frame1()

和

```
trace(parent.myObj.A_function_in_the_object()); 
```

哪个输出：

> 1119：通过静态类型 flash.display:DisplayObjectContainer 的引用访问可能未定义的属性 myObj。

如何从子影片剪辑访问在父时间轴中定义的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-25T05:46:34.763

因为 Flash 组件的结构很复杂，所以 this.parent 并不总是返回您期望的类。所以，如果你想访问父对象，你应该使用while循环而不是“this.parent.parent.parent ...”。

像这样。

```
var obj: Object = this;
while (obj.parent != null) {

    obj = obj.parent;

    // If "obj" is the class you expected, stop loop.
    if (obj is MovieClip) {

        // Do something like below.
        MovieClip(obj).myObj.A_function_in_the_object();
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:03:55.070

`MovieClip(this.parent)`不是。`slider`_ `parent`您可以通过 访问父时间线`MovieClip(this.parent.parent)`。如果您想访问，`myObj`那么`MovieClip(this.parent.parent).myObj`您也可以访问`myObj`by中的任何属性`MovieClip(this.parent.parent).myObj.propertyA`。在这种情况下`A_function_in_the_object`是 的属性`myObj`。

# python - 内置 numpy 函数以随机从数组中获取索引

> ID：12813445
> 
> 赞同：0
> 
> 时间：2012-10-10T06:42:15.720
> 
> 标签：python, numpy

是否有内置 numpy函数以概率`idx`从一维数组返回索引。所有非负数和总和为一。`r``r[i]``r[i]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:51:14.230

几乎内置：

```
# setup (do this once)
cs = r.cumsum()

# get a random value with probability r[i]
rn = np.random.uniform()
idx = cs.searchsorted(rn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:14:19.957

[scipy.stats](http://docs.scipy.org/doc/scipy/reference/tutorial/stats.html)可以提供帮助，即使它不是按要求在 NumPy 中：

```
import scipy.stats
r = [.1,.8,.1]
x = range(len(r))
mydist = scipy.stats.rv_discrete(values=(x,r), name='mydist')
print mydist.rvs(size=20)
# array([1, 1, 0, 0, 1, 1, 2, 2, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1]) 
```

# css - 如何将背景图像放在徽标图像后面？

> ID：12813446
> 
> 赞同：0
> 
> 时间：2012-10-10T06:42:17.120
> 
> 标签：css, styles

我有一个在左边有一个标志图像的标题。我试图在标题中放置一个背景图像，但是 bg 图像是从标志图像的右侧开始的。标志图像是一个透明的 PNG 图像，所以我猜Bg 图像可以放在 logo 图像后面。

这是HTML

```
<div id="header">
    <div class="fl" style="width:378px; height:79px; overflow:hidden;">
      <p align="left"><a href="http://mysite.com/magento/index.php/"><img  src="mysite.com/magento/skin/frontend/default/my_theme/images/dlogo.png" ></a></p>
    </div>
</div> 
```

标题的 CSS：

```
#header{ width:972px; padding:15px 0px 10px 0px; margin:0 auto; text-align:left; height:117px; background:url(../images/dbody_background.jpg)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:24:26.750

在理解代码时，使用 z-index 会使事情变得更加复杂。相反，您可以使用 offset 参数来更改背景图像的位置。

```
#header{ 
    width:972px; 
    padding:15px 0px 10px 0px; 
    margin:0 auto; 
    text-align:left; 
    height:117px; 
    background:url(../images/dbody_background.jpg) 50px 10px;
} 
```

其中，
`50px`是从左边界的偏移量，并且..
`10px`是从上边界的偏移量。

你甚至可以在这里使用负值。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:00:18.557

这对我有用，只需将 Background 属性更改为 ->

`background:url(../images/diwalibody_background.jpg)no-repeat scroll center top transparent;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:47:46.837

您需要使用该`z-index`属性

这

```
#header
{
   z-index : 100 ;
}

#header img
{
   z-index : 101 ;
} 
```

里面的图像`z-index`应该大于标题`z-index`..

# maven-3 - 在 Maven 中调用特定的 ant 目标

> ID：12813448
> 
> 赞同：1
> 
> 时间：2012-10-10T06:42:24.363
> 
> 标签：maven-3, maven-antrun-plugin

请找到以下代码片段：-

```
 <plugins>

  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>compile</id>
        <phase>compile</phase>
        <configuration>
          <target name="test2">
            <property name="test_classpath" refid="maven.test.classpath"/>
            <property name="plugin_classpath" refid="maven.plugin.classpath"/>

            <echo message="test classpath:    ${test_classpath}"/>
            <echo message="plugin classpath:  ${plugin_classpath}"/>
          </target>
     <target name="test1">
            <property name="compile_classpath" refid="maven.compile.classpath"/>
            <property name="runtime_classpath" refid="maven.runtime.classpath"/>

            <echo message="compile classpath: ${compile_classpath}"/>
            <echo message="runtime classpath: ${runtime_classpath}"/>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

当我执行“mvn compile”时，最后一个目标的输出即 test1 来了。我试过 mvn compile -Dtarget="test2" 和 mvn compile -DantTarget="test2" 但无法调用目标“test2”。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:31:54.777

[maven ant-run 插件在其配置](http://maven.apache.org/plugins/maven-antrun-plugin/run-mojo.html#target)中仅支持单个目标，但您可以使用[maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)获得相同的效果。将以下内容添加到您的 pom.xml

```
<profiles>
    <profile>
        <id>test1</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>compile-test1</id>
                            <phase>compile</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target name="test1">
                                    <property name="compile_classpath" refid="maven.compile.classpath"/>
                                    <property name="runtime_classpath" refid="maven.runtime.classpath"/>

                                    <echo message="compile classpath: ${compile_classpath}"/>
                                    <echo message="runtime classpath: ${runtime_classpath}"/>
                                </target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>test2</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>compile-test2</id>
                            <phase>compile</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target name="test2">
                                    <property name="test_classpath" refid="maven.test.classpath"/>
                                    <property name="plugin_classpath" refid="maven.plugin.classpath"/>

                                    <echo message="test classpath:    ${test_classpath}"/>
                                    <echo message="plugin classpath:  ${plugin_classpath}"/>
                                </target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

您可以调用 maven 作为`mvn -Ptest1`或`mvn -Ptest2`激活配置文件之一并执行所选的 ant 目标。

# php - 如何在 php 上使用 preg_match_all 在两个模式之间选择内容？

> ID：12813450
> 
> 赞同：1
> 
> 时间：2012-10-10T06:42:47.800
> 
> 标签：php, html, regex, preg-match-all

我试图搜索两个 HTML 标签，并抓住两者之间的一切。当我分别尝试每个标签时，发现它们都很好，所以我知道它们拼写正确并且存在。我认为问题出在模式上，有人可以帮我解决一下。我在网上研究的一切似乎都在我脑海中。所以如果你能解释一下你的模式是如何工作的，那就太棒了！

请参阅下面的代码，如果您有任何问题，请随时提出。

谢谢你的时间：）

```
<?php
$date= date(Y)."/".date(n)."/".date(j);
$address= "http:www.example.com/".$date;
$text_page = file_get_contents("$address");

$searchfor1 = '<li id="menuSynchronizeSwitch">';
$searchfor2 = '<li  id="footerPrevWeek';

header('Content-Type: text/plain');

$pattern1 = preg_quote($searchfor1, '/');
$pattern2 = preg_quote($searchfor2, '/');

$pattern = "/^.*$pattern1.*\r*$pattern2.*\$/m";

if(preg_match_all($pattern, $text_page, $matches)){
   echo "Found matches:\n";
   echo implode("\n", $matches[0]);
}
else{
   echo "No matches found";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:48:35.013

尝试使用`$pattern = '/\<li id\="menuSynchronizeSwitch"\>.*\<li id\="footerPrevWeek/si';`. 注意`/s`，它允许点匹配换行符，我怀疑这是导致失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:46:31.263

您需要用括号对每个模式进行分组

像这样：

$pattern = "/(一些模式)/";

您可以通过 $matches 数组获取每个组

# java - 使用java从特定端口和指定IP读取数据

> ID：12813451
> 
> 赞同：2
> 
> 时间：2012-10-10T06:42:59.923
> 
> 标签：java, sockets, port, serversocket

我想从特定端口读取消息。例如，IP 是 1.2.3.4，端口是 1000。IP 已经用于接收一些消息。我想做的是监听那个特定的 IP 并使用 java 程序接收所有消息。SocketServer会达到目的吗？

```
ServerSocket ss = new ServerSocket(1000);
Socket socket = new Socket("1.2.3.4",1000);
socket = ss.accept(); 
```

是否可以读取特定 IP 和端口接收的所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:46:35.653

要收听特定地址，您必须像这样创建一个 ServerSocket

```
ServerSocket ss = new ServerSocket(); // Unbound socket
ss.bind(new InetSocketAddress("1.2.3.4", 1000)); // Bind the socket to a specific interface
Socket client = ss.accept(); 
```

这样，服务器套接字绑定到特定的网络接口，并且只会接收来自它的传入连接。

# paypal - Paypal 商家接受或拒绝每笔交易

> ID：12813455
> 
> 赞同：1
> 
> 时间：2012-10-10T06:43:12.823
> 
> 标签：paypal, paypal-adaptive-payments

我正在开发在线购物网站，其中我将贝宝集成为付款方式。

但是，我希望每笔交易都必须由商家确认，以便商家可以接受或拒绝（拒绝 - 拒绝）每笔交易。

被拒绝交易的款项将退还给付款人。并且接受的交易将我们作为确认订单处理。

他们有什么办法吗？

## 请帮助我。提前致谢

我找到了我的答案。

现在我将使用“paypal 授权捕获 api”，为此我需要在我的 paypal 标准支付表单中使用 paymentaction="authorization" 来暂停交易。

在管理员方面，我需要进行该搁置交易进行捕获以继续订单或取消订单以取消我只需要他们的交易ID。

我将为此使用“paypal 授权和捕获 api”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:22:09.523

您应该手动登录到您的商家帐户以拒绝（拒绝拒绝）每笔交易。

# java - 点击监听器上的错误按钮

> ID：12813460
> 
> 赞同：0
> 
> 时间：2012-10-10T06:43:48.387
> 
> 标签：java, android

我使用删除按钮从数据库中检索学生的信息（学生编号和 ID 和姓名），因此如果用户单击删除，它将显示列表中每个按钮的带有学生 ID 的 toast 消息。

但是我运行代码并单击删除按钮没有任何反应，日志中没有错误 cat 控制台中没有错误。我错过了什么，为什么会这样？我也尝试在 log cat 中显示此消息，但什么也没发生。

这是我的代码：

```
public class ManageSection extends ListActivity {
//ProgresogressDialog pDialog;
    private ProgressDialog pDialog;
    // Creating JSON Parser object
// Creating JSON Parser object
JSONParser jParser = new JSONParser(); //class
boolean x =true; 
Button delete;

ArrayList<HashMap<String, String>> studentList;

//url to get all products list
private static String url_all_student = "http://10.0.2.2/SmsPhp/view_student_info.php";
String cl;
// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_student = "student";
private static final String TAG_StudentID = "StudentID";
private static final String TAG_StudentNo = "StudentNo";
private static final String TAG_FullName = "FullName";
private static final String  TAG_Avatar="Avatar";
HashMap<String, String> selected_student;
// course JSONArray
JSONArray student = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.manage_section);

        studentList = new ArrayList<HashMap<String, String>>();

        ListView list1 = getListView();
        list1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int pos, long l) {

                 selected_student =studentList.get(pos); //member of your activity.
                 delete =(Button)findViewById(R.id.DeleteStudent);
                 cl=selected_student.get(TAG_StudentID);
                Log.d("id: ",cl);
                 delete.setOnClickListener(new View.OnClickListener()

                    {

                        public void onClick(View v) {

                            Log.d("id: ",cl);
                            Toast.makeText(getBaseContext(),cl,Toast.LENGTH_LONG).show();
                        }
                 });
            }

        });

        new LoadAllstudent().execute();

    }

    /**
     * Background Async Task to Load all student by making HTTP Request
     * */
    class LoadAllstudent extends AsyncTask<String, String, String>
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ManageSection.this);
            pDialog.setMessage("Loading student. Please wait...");
            pDialog.setIndeterminate(false);
                  }

        /**
         * getting All student from u r l
         * */
        @Override
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_student, "GET", params);

            // Check your log cat for JSON response
            Log.d("All student : ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1)
                {
                    // student found
                    // Getting Array of course
                    student = json.getJSONArray(TAG_student);

                    // looping through All courses
                    for (int i = 0; i < student.length(); i++)//course JSONArray
                    {
                        JSONObject c = student.getJSONObject(i); // read first

                        // Storing each json item in variable
                        String StudentID = c.getString(TAG_StudentID);
                        String StudentNo = c.getString(TAG_StudentNo);
                        String FullName = c.getString(TAG_FullName);
                     //   String Avatar = c.getString(TAG_Avatar);
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_StudentID, StudentID);
                        map.put(TAG_StudentNo, StudentNo);
                        map.put(TAG_FullName, FullName);

                        // adding HashList to ArrayList
                        studentList.add(map);
                    }
                } else {
                    x=false;

                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }   

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) { 
              // dismiss the dialog after getting all products 
              pDialog.dismiss(); 
              if (x==false)
                Toast.makeText(getBaseContext(),"no student" ,Toast.LENGTH_LONG).show();

              ListAdapter adapter = new SimpleAdapter( 
                      ManageSection.this,  studentList, 
                        R.layout.list_student, new String[] { TAG_StudentID, 
                              TAG_StudentNo,TAG_FullName}, 
                        new int[] { R.id.StudentID, R.id.StudentNo,R.id.FullName}); 
               setListAdapter(adapter); 

             // Updating parsed JSON data into ListView 

        } 

    }
} 
```

和用于管理的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_all_1" >

    <!-- HEADER -->

    <include
        android:id="@+id/top_header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="90dp"
        layout="@layout/layout_header" />

    <!-- FOOTER -->

    <!-- MAIN PART -->

    <RelativeLayout
        android:id="@+id/sub_content_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/top_header"
        android:orientation="vertical" >
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
        <ListView
            android:id="@android:id/list"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:layout_marginLeft="50dp"
              android:gravity="left"
            android:layout_marginTop="10dp" >
        </ListView>
         </ScrollView>
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/bottom_menu"
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="38dp"
        android:orientation="vertical" >

        <include
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            layout="@layout/layout_footer" />
    </LinearLayout>

</RelativeLayout> 
```

列出学生 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Student id (CourseID) - will be HIDDEN - used to pass to other activity -->
    <TextView
        android:id="@+id/StudentID"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"
         />
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
      />

    <!-- Name Label -->
    <TextView
        android:id="@+id/FullName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="8dip"
        android:textStyle="bold" />

        <TextView
            android:id="@+id/StudentNo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="6dip"
            android:paddingTop="6dip"
            android:textSize="8dip"
            android:textStyle="bold" />

        <Button
            android:id="@+id/DeleteStudent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:minHeight="10dip"
            android:minWidth="50dip"
            android:text="@string/deleteStudent"
            android:textSize="8dp"
            android:width="30dp" 

            >

      </Button>

              <Button
                  android:id="@+id/Alert"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:minHeight="10dip"
                  android:minWidth="50dip"
                  android:text="@string/Alert"
                  android:textSize="8dp"
                  android:width="30dp" >

      </Button>
      <RadioGroup 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

       <RadioButton
           android:id="@+id/radio_pirates"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:onClick="onRadioButtonClicked"
           android:text="@string/attendance"
           android:textSize="8dp"

            />

       </RadioGroup>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:33:12.290

@sara，您不能在 onItemClick 事件中提供 onclick 事件的实现，您应该输入以下代码：

```
 delete.setOnClickListener(new View.OnClickListener()

                {

                    public void onClick(View v) {

                        Log.d("id: ",cl);
                        Toast.makeText(getBaseContext(),cl,Toast.LENGTH_LONG).show();
                    }
             });
        } 
```

在您的适配器的 getView 方法中然后它将起作用。因为您在这里所做的是您正在应用侦听器来删除项目单击上的按钮，因此它不会起作用，因为它总是应用侦听器并且您的侦听器的方法永远不会被调用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:05:19.257

请尝试替换代码中的以下行：

```
delete =(Button)findViewById(R.id.DeleteStudent); 
```

和

```
delete =(Button)view.findViewById(R.id.DeleteStudent); 
```

# php - Symfony 2.1 教义夹具安装

> ID：12813462
> 
> 赞同：3
> 
> 时间：2012-10-10T06:44:02.840
> 
> 标签：php, symfony, doctrine, symfony-2.1, composer-php

我正在使用最新的 symfony 2.1 并尝试安装教义夹具包。我按照[此处](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)列出的说明进行操作。

同时安装 composer 和 git。但是现在当我尝试更新供应商库 ( `php composer.phar update`) 时，我收到以下错误：

使用包信息加载作曲家存储库

```
Updating dependencies
  - Removing doctrine/dbal (2.3.0)
vendor\doctrine\dbal\lib\Doctrine - The directory is not empty.
 [RuntimeException]
  Could not completely delete vendor/doctrine/dbal,
   aborting. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:41:27.260

当供应商目录中的包目录由于某种原因被另一个应用程序锁定时，就会发生这种情况。这往往发生在许多东西可以锁定目录/文件的 Windows 上。

如果这是一个间歇性问题，运行 composer update 应该可以修复它，但如果它仍然存在，请尝试`vendor\doctrine\dbal\lib\Doctrine`手动删除。

如果它真的被锁定了，除非您关闭任何锁定该目录的东西，否则您将无法删除它。如果您不知道是什么锁定了目录，使用[Unlocker可以为您提供帮助。](http://www.emptyloop.com/unlocker/)

# javascript - 将 3D 世界空间坐标转换为 SVG 视口坐标

> ID：12813464
> 
> 赞同：2
> 
> 时间：2012-10-10T06:44:17.953
> 
> 标签：javascript, math, svg, coordinate-transformation

我一直在尝试从俯视图的角度（如小地图）在网页上显示 3D 游戏中玩家的位置。我只是将标记（通过 SVG）叠加在游戏关卡的 1024x1024 图像上（俯视图，取自游戏本身）。我只关心`x`,`y`坐标，因为我没有`z`在俯视图中使用。

游戏的世界具有相同的最小/最大坐标`x`和`y`:`-4096`到`4096`。`0, 0`坐标是世界的中心。

更有趣的是，游戏关卡在游戏世界中的初始位置是任意的。因此，例如，我一直在测试的特定关卡的左上角世界坐标是`-2440, 3383`.

我最初的困惑来自`0,0`网页中的坐标是左上角，而不是世界空间的中心。

**如何正确转换 3D 世界空间坐标以正确显示在任何维度的网页视口中？**

这是我尝试过的（我一直在尝试使用 svg 中的 viewbox 属性来处理左上角世界坐标偏移）

```
scalePosition: function (targetWidth, targetHeight) {
    // in-game positions
    var gamePosition = this.get('pos');

    var MAX_X = 8192,
        MAX_Y = 8192;

    // Flip y
    gamePosition.y = -gamePosition.y;

    // Ensure game coordinates are only positive values
    // In game = -4096 < x|y < 4096 (0,0 = center)
    // Browser = 0 < x|y < 8192 (0,0 = top-left)
    gamePosition.x += 4096;
    gamePosition.y += 4096;

    // Target dimenions
    targetWidth = (targetWidth || 1024),
    targetHeight = (targetHeight || 1024);

    // Find scale between game dimensions and target dimensions
    var xScale = MAX_X / targetWidth,
        yScale = MAX_Y / targetHeight;

    // Convert in-game coords to target coords
    var targetX = gamePosition.x / xScale,
        targetY = gamePosition.y / yScale;

    return {
        x: targetX,
        y: targetY
    };
}, 
```

# image - 3d 区域增长分割

> ID：12813472
> 
> 赞同：1
> 
> 时间：2012-10-10T06:44:55.960
> 
> 标签：image, image-processing, vtk, image-segmentation, itk

我正在尝试使用 itk 和 vtk 对 3d 数据中的纤维对象进行分割。区域增长是否适用于此任务。
我的主要问题是路口。如果两根纤维相互接触（仅轻微接触），RG 无法将它们分开。
这个问题有什么有用的预处理方法吗？
或者可能有不同的分割技术？

# python - 如何在字典中迭代和搜索？

> ID：12813473
> 
> 赞同：2
> 
> 时间：2012-10-10T06:44:57.183
> 
> 标签：python

我已经构建了一个这样的字典：

目录是：

```
{((2, 1), 'South', 1): set([((2, 2), 'South', 1)]), 
((1, 3), 'South', 1): set([((1, 4), 'South', 1)]), 
((5, 3), 'East', 1): set([((4, 3), 'North', 1)]), 
((2, 2), 'South', 1): set([((2, 3), 'East', 1)]),   
((4, 2), 'East', 1): set([((3, 2), 'East', 1)]), 
((1, 1), 'West', 1): set([((2, 1), 'South', 1)])} 
```

我想像这样遍历这本字典：

如果我有`((2, 1), 'South', 1)`作为键，那么我想提取它的值`set([((2,2),'South',1)])`并将其作为键并搜索并找到它的值等等......

但我无法为它构造一个函数。我一直只得到一个值，它进入一个无限循环。我想我可能会错误地获取值。有人可以告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:01:32.533

以下情况如何：

```
key = ((2, 1), 'South', 1)
while (x.has_key(key)):
    print x[key]
    key = iter(x[key]).next() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:56:27.637

据我了解，您需要什么。尝试这个：

```
start_pos = ((2, 1), 'South', 1)

d = {...}

visited = set()

def go(pos):
   visited.add(pos)
   for v in d[pos]:
       if v not in visited:
           go(v)

go(start_pos) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T06:52:22.963

尝试这个：

```
def iterate_get_value(my_dict):
    for k,v in my_dict.iteritems():
        if k == ((2, 1), 'South', 1):
            return v 
```

那对你有用吗？

# ios - 球角和桨角之间的碰撞！！iOS

> ID：12813475
> 
> 赞同：-2
> 
> 时间：2012-10-10T06:45:01.717
> 
> 标签：ios, collision

当球从角落或左右两侧击中球拍时，球从一侧进入球拍并从另一侧射出。我该如何解决这个问题？谢谢..

我的代码：

```
if (CGRectIntersectsRect(ball.frame,paddle.frame))
{
            [self bounceBall]; 
}

- (void) bounceBall
 {
    direction.x *= 1;
    direction.y *=-1;
} 
```

![在此处输入图像描述](../Images/7112ab9076ecacaad03c7270f26355b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:44:24.933

[这](https://gamedev.stackexchange.com/questions/20456/a-more-sophisticated-ball-paddle-collision-algorithm-for-breakout)将有助于您解决上述问题。

# wpf - Richtextbox 中的树形结构

> ID：12813476
> 
> 赞同：1
> 
> 时间：2012-10-10T06:45:19.890
> 
> 标签：wpf, tree, richtextbox

我正在使用一个非常简单的树结构：

```
class Tree { }
class Node : Tree {
    public List <Tree> Children;
}
class Leave : Tree {
    public string Content;
} 
```

我想在 WPF - RichTextBox 中显示它，结果看起来像这样，但绑定到我的树：

```
<FlowDocument>
  <Section>
    <Paragraph>
      TEXT_FOOTER
    </Paragraph>
  </Section>
</FlowDocument> 
```

只有树的叶子在段落中显示其内容，而节点在部分中显示。

目前我正在以编程方式解决这个问题，但要让 RTB 与我的树保持同步是一项艰巨的工作。有没有办法将这样的结构绑定到 Box，我知道 Document-Property 不是依赖属性，所以没有绑定。

我遇到了这个 TextBox: [Here](http://www.codeproject.com/Articles/66054/A-Bindable-WPF-RichTextBox)，但我不知道是否以及如何绑定它，wpf 目前似乎不知道 HierachicalDataTemplate。有什么方法可以让 wpf 进行我的同步工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:36:02.003

我终于有点解决了。问题是：WPF 没有给我任何使用 DataBinding 的可能性，所以我写了使用“onTextElementChanged”和 text.Selection.Start.Parent 来接收光标所在的运行。我想要映射的相应数据结构已存储在父段落的“标签”-属性中。我知道这是一个非常丑陋的解决方案，但它是唯一一个正常工作的解决方案。

如果发生变化，我必须连接多个运行，因为 RTB 会随机拆分它们以将更改写回。这就是为什么我把段落存储起来。

另一个方向可以通过侦听 PropertyChanged 事件来解决，就像 WPF 呈现给您一样。

最大的仍然无法解决的问题是 RTB 的撤消功能。因为我必须构建一个更复杂的数据结构，所以我使用了一些 UserControls 和 InlineUIContainer。如果您删除其中一个（例如通过按“entf”），程序会因 StackOverflowException 而崩溃。这是 WPF 中的“未记录的功能”或错误，Microsoft 不会费心修复它。

# c# - 尝试上传图片时，我按下按钮，页面刷新，但图片未上传。到底是怎么回事？

> ID：12813482
> 
> 赞同：0
> 
> 时间：2012-10-10T06:45:41.060
> 
> 标签：c#, asp.net

我有一个从 Site.Master 文件继承布局的网络表单。每次我按下“上传”按钮时，页面都会刷新，但什么也没有发生。我只想让它从“FileUpload”控件上传图像。我在一个没有从 Site.Master 继承布局的页面上使用了这个确切的代码，但我需要它来处理站点。掌握。有任何想法吗？

这是 ASP 部分：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="SignUp.aspx.cs" Inherits="MTCO.SignUp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <asp:TextBox ID="firstNameBox" runat="server"></asp:TextBox>
    <br />
    <br />
    <asp:TextBox ID="lastNameBox" runat="server"></asp:TextBox>
    <br />
    <br />
    <asp:FileUpload ID="FileUpload1" runat="server" />
    <br />
    <br />
    <asp:Button ID="uploadButton" runat="server" Text="Upload" />
    <br />
    <br />
    <asp:TextBox ID="statusBox" runat="server">In Progress..</asp:TextBox>
    <br />
</asp:Content> 
```

下面是 C# 部分：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace MTCO
{
    public partial class SignUp : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void uploadButton_Click(object sender, EventArgs e)
        {
            string filePath = Server.MapPath("~/images/testing/") + FileUpload1.FileName;
            Bitmap photoFile = ResizeImage(FileUpload1.PostedFile.InputStream, 200, 300);
            photoFile.Save(filePath, ImageFormat.Jpeg);
            statusBox.Text = "Uploaded Successfully";
        }

        public Bitmap ResizeImage(Stream stream, int? width, int? height)
        {
            System.Drawing.Bitmap bmpOut = null;
            const int defaultWidth = 800;
            const int defaultHeight = 600;
            int lnWidth = width == null ? defaultWidth : (int)width;
            int lnHeight = height == null ? defaultHeight : (int)height;
            try
            {
                Bitmap loBMP = new Bitmap(stream);
                ImageFormat loFormat = loBMP.RawFormat;

                decimal lnRatio;
                int lnNewWidth = 0;
                int lnNewHeight = 0;

                //*** If the image is smaller than a thumbnail just return it
                if (loBMP.Width < lnWidth && loBMP.Height < lnHeight)
                {
                    return loBMP;
                }

                if (loBMP.Width > loBMP.Height)
                {
                    lnRatio = (decimal)lnWidth / loBMP.Width;
                    lnNewWidth = lnWidth;
                    decimal lnTemp = loBMP.Height * lnRatio;
                    lnNewHeight = (int)lnTemp;
                }
                else
                {
                    lnRatio = (decimal)lnHeight / loBMP.Height;
                    lnNewHeight = lnHeight;
                    decimal lnTemp = loBMP.Width * lnRatio;
                    lnNewWidth = (int)lnTemp;
                }

                bmpOut = new Bitmap(lnNewWidth, lnNewHeight);
                Graphics g = Graphics.FromImage(bmpOut);
                g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                g.FillRectangle(Brushes.White, 0, 0, lnNewWidth, lnNewHeight);
                g.DrawImage(loBMP, 0, 0, lnNewWidth, lnNewHeight);
                loBMP.Dispose();
            }
            catch
            {
                return null;
            }
            return bmpOut;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:49:23.710

您需要将 uploadButton_Click 事件附加到按钮的 OnClick 事件，如下所示：

```
<asp:Button ID="uploadButton" runat="server" Text="Upload" OnClick="uploadButton_Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:54:41.523

在 VB.net 中，您可以使用如下方法声明：

```
protected sub uploadButton_Click(object sender, EventArgs e) Handles uploadButton.Click 
```

或按钮标记声明来定义按钮的行为：

```
<asp:Button ID="uploadButton" runat="server" Text="Upload" OnClick="uploadButton_Click" /> 
```

但是，在 C# 中，您只能使用第二种方式。

# android - Eclipse DDMS 无法识别我的 Nexus 手机

> ID：12813485
> 
> 赞同：0
> 
> 时间：2012-10-10T06:45:58.590
> 
> 标签：android

Eclipse DDMS 无法识别我的 Nexus（三星）手机。我已经在外部以及设备管理器中安装了 USB 驱动程序。还在调试模式下通过 USB 电缆连接了设备，但它仍然无法在 DDMS 中识别。请帮助做什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:04:37.040

我在使用 Win7 x64 的另一部手机上遇到了类似的问题。您应该首先检查所有驱动程序是否安装正确。

控制面板 -> 设备管理并检查是否有问题。

如果您使用 Win7 x64，请尝试重新启动系统并在不使用驱动程序签名的情况下启动 Window。希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:44:02.650

从此站点安装 USB 驱动程序

[Samsung Galaxy Nexus USB 驱动程序](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW#)

它还提供所有三星手机 USB 驱动程序。

1）去这个网站

2）转到手册和下载

3）下载驱动程序的exe

4）安装它

5）然后连接您的设备。它会自动为适当的设备安装驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T08:59:44.553

驱动程序已成功安装，但 DDMS 仍然无法识别设备？这对我有用。[https://stackoverflow.com/a/32519507/1567675](https://stackoverflow.com/a/32519507/1567675)

# apache-flex - 在服务器上运行 Air 应用程序

> ID：12813492
> 
> 赞同：1
> 
> 时间：2012-10-10T06:46:22.313
> 
> 标签：apache-flex, air

我有一个客户端/服务器应用程序，其中客户端用 Flex/Air 编写，服务器端用 Scala 编写。

客户端使用我想在服务器端生成的本地 SQLite 数据库（它很小，因此可以在需要时通过 http 检索）。

更新频率很低：每天或多或少更新一次。复杂之处在于数据库使用 SQLite 的 Air 扩展，因此它必须由 Air 应用程序生成。

我想到了两种可能的方法：

1.  在 Air 中编写一个小型服务器程序，并通过套接字从我的 Scala 应用程序中触发它。数据将在 http 正文中传递给 Air 应用程序。
2.  每当我需要进行更新时，从 Scala 应用程序执行 Air 服务器程序。数据将通过文件传递（我认为 Air 应用程序无法读取标准输入）。

我更倾向于第二种选择，因为它需要较少的管理工作（无需检查服务器的 Air 端是否已启动）。但是，我不确定 Air 作为“控制台”应用程序运行的能力（我不喜欢创建临时文件来传递数据的繁琐想法）。

以前有人遇到过类似的问题吗？

# c - 为什么我们在传递二维数组作为参数时需要指定列大小？

> ID：12813494
> 
> 赞同：38
> 
> 时间：2012-10-10T06:46:23.210
> 
> 标签：c, arrays, parameters, multidimensional-array, parameter-passing

为什么我的参数不能是

```
void example(int Array[][]){ /*statements*/} 
```

为什么我需要指定数组的列大小？比如说，3

```
void example(int Array[][3]){/*statements*/} 
```

我的教授说它是强制性的，但我在开学前就在编码，我记得当我把它作为参数时没有语法或语义错误？还是我错过了什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-10T06:59:16.847

在描述参数时，数组总是衰减为指向其第一个元素的指针。

当您传递一个声明为`int Array[3]`函数的数组时`void foo(int array[])`，它会衰减为指向数组开头的指针，即`int *Array;`。顺便说一句，您可以将参数描述为`int array[3]`或`int array[6]`什`int *array`至 - 所有这些都是等价的，您可以毫无问题地传递任何整数数组。

在数组数组（二维数组）的情况下，它也衰减到指向其第一个元素的指针，这恰好是一维数组，即我们得到`int (*Array)[3]`.

在这里指定大小很重要。例如，如果它不是强制性的，那么编译器将无法知道如何处理表达式`Array[2][1]`。

要取消引用编译器需要计算我们需要在连续内存块中的项目的偏移量（`int Array[2][3]`是一个连续的整数块），这对于指针来说应该很容易。如果`a`是指针，则`a[N]`扩展为`start_address_in_a + N * size_of_item_being_pointed_by_a`. 在`Array[2][1]`函数内部的表达式（我们要访问此元素）的情况下，`Array`它是指向一维数组的指针，并且适用相同的公式。find 需要最后一个方括号中的字节数`size_of_item_being_pointed_by_a`。如果我们有`Array[][]`，就不可能找到它，因此不可能取消引用我们需要的数组元素。

如果没有大小，指针算术将不适用于数组数组。`Array + 2`将产生什么地址：将地址提前`Array`2 个字节（错误）或将指针`3* sizeof(int) * 2`字节提前？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-10T07:19:09.197

在 C/C++ 中，即使是 2-D 数组也是顺序存储的，在内存中一行接一行。所以，当你有（在一个单一的功能）：

```
int a[5][3];
int *head;

head = &a[0][0];
a[2][1] = 2; // <-- 
```

您实际访问的元素`a[2][1]`是`*(head + 2*3 + 1)`，依次导致该元素在该`0`行的 3 个元素和该行的 3 个元素之后`1`，然后再进一步索引。

如果您声明如下函数：

```
void some_function(int array[][]) {...} 
```

从语法上讲，它不应该是一个错误。但是，当您现在尝试访问时`array[2][3]`，您无法判断应该访问哪个元素。另一方面，当你有：

```
void some_function(int array[][5]) {...} 
```

您知道使用`array[2][3]`，可以确定您实际上是在访问内存地址处的元素，`*(&array[0][0] + 2*5 + 3)` **因为**该函数知道第二维的大小。

如前所述，还有另一种选择，您可以声明如下函数：

```
void some_function(int *array, int cols) { ... } 
```

因为这样，您使用与以前相同的“信息”——列数来调用函数。你访问数组元素的方式有点不同：你必须写`*(array + i*cols + j)`你通常写的地方`array[i][j]`，因为`array`现在是一个指向整数的指针（而不是指针）。

当您声明这样的函数时，您必须小心地使用实际为数组*声明*的列数调用它，而不仅仅是使用。因此，例如：

```
int main(){
   int a[5][5];
   int i, j;

   for (i = 0; i < 3; ++i){
       for (int j=0; j < 3; ++j){
           scanf("%d", &a[i][j]);
       }
   }

   some_function(&a[i][j], 5); // <- correct
   some_function(&a[i][j], 3); // <- wrong

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-11T17:38:55.700

C 2018 6.7.6.2 规定了数组声明符的语义，第 1 段对它们给出了约束，包括：

> 元素类型不应是不完整类型或函数类型。

在函数声明中，例如`void example(int Array[][])`,`Array[]`是一个数组声明符。所以它必须满足其元素类型不能不完整的约束。它在该声明中的元素类型是`int []`，这是不完整的，因为未指定大小。

对于即将调整为指针的参数，没有根本原因 C 标准不能消除该约束。结果类型`int (*Array)[]`是合法声明，被编译器接受，并且可以以`(*Array)[j]`.

但是，声明`int Array[][]`表明`Array`至少与二维数组相关联，因此应以`Array[i][j]`. 即使声明被接受`int Array[][]`并被调整`int (*Array)[]`为`Array[i][j]`元素。因此，保持对数组声明符的约束是有意义的，因为它与预期的表达式一致，即参数将是一个二维数组，而不仅仅是指向一个一维数组的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-28T04:07:51.150

实际上，无论是二维数组还是一维数组，它都以一行的形式存储在内存中。所以要说编译器应该在哪里打破指示下一行中的下一个数字的行，我们应该提供列大小。并适当地打破行将给出行的大小。

让我们看一个例子：

```
int a[][3]={ 1,2,3,4,5,6,7,8,9,0 }; 
```

这个数组 a 在内存中存储为：

```
 1  2  3  4  5  6  7  8  9  0 
```

但是由于我们将列大小指定为 3，内存会在每 3 个数字后拆分。

```
#include<stdio.h>

int main() {
   int a[][3]={1,2,3,4,5,6},i,j;
   for(i=0;i<2;i++)
   {
       for(j=0;j<3;j++)
       {
           printf("%d  ",a[i][j]);
       }
       printf("\n");
   }

} 
```

> 输出：

```
 1  2  3  
 4  5  6 
```

在另一种情况下，

```
int a[3][]={1,2,3,4,5,6,7,8,9,0}; 
```

编译器只知道有 3 行，但它不知道每行中的元素数，因此它无法分配内存并会显示错误。

```
#include<stdio.h>

int main() {
   int a[3][]={1,2,3,4,5,6},i,j;
   for(i=0;i<3;i++)
   {
       for(j=0;j<2;j++)
       {
           printf("%d  ",a[i][j]);
       }
       printf("\n");
   }

} 
```

> 输出：

```
 c: In function 'main':
    c:4:8: error: array type has incomplete element type 'int[]'
    int a[3][]={1,2,3,4,5,6},i,j;
        ^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:57:31.213

关于这个有一个类似的帖子。你可以参考下面的链接。 [在 C 中创建数组并将指向所述数组的指针传递给函数](https://stackoverflow.com/questions/11713157/creating-array-in-c-and-passing-pointer-to-said-array-to-function) 希望它有所帮助。

另一方面，编译器需要第二维，以便它可以将“数组”从一个指针移动到下一个，因为整个内存以线性方式排列

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-07-21T05:08:54.413

当您创建 2D 数组时`anytype a[3][4]`，您在内存中实际创建的是任意类型对象 的`3`连续块。`4`

`a[0][0] a[0][1] a[0][2] a[0][3] a[1][0] a[1][1] a[1][2] a[1][3] a[2][0] a[2][1] a[2][2] a[2][3]`

现在下一个问题是，为什么会这样？因为，与语言的规范和结构保持一致，`anytype a[3][4]`实际上扩展为`anytype (*a)[4]`，因为数组衰减为指针。事实上，它也扩展到`anytype (*(*a))`，但是，您现在已经完全失去了 2D 数组的大小。所以，你必须帮助编译器。

如果您向程序询问`a[2]`，程序可以按照与一维数组完全相同的步骤进行操作。它可以简单地返回`the 3rd element of sizeof(object pointed to)`，这里指向的对象是大小为 4 的 anytype 对象。

# android - android检测继续上下滚动

> ID：12813496
> 
> 赞同：0
> 
> 时间：2012-10-10T06:46:29.063
> 
> 标签：android

我正在使用自定义列表开发应用程序。我正在覆盖列表的触摸事件。如果我滚动一次（触摸并向上或向下移动手指一次），列表滚动得很好。当我向上滚动列表 - 向下滚动而不离开列表（即触摸向上然后向下然后离开），在这种情况下，列表没有正确滚动。由于 action_move 仅在第一次滚动时调用，即当我将列表向下移动时向上，action_move 未被检测到。如果有人试图这样做，请告诉我。任何代码片段都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:28:41.640

我做了这样的事情。你也可以试试。它工作得很好

```
public boolean onTouchEvent(MotionEvent ev) {
    final int action = ev.getAction();
    if ((action == MotionEvent.ACTION_MOVE) && (mTouchState != TOUCH_STATE_REST)) {
        Log.d("DB", " scrolling twice ");
        scrolltwice = true;
        return true;
    }

    final float x = ev.getX();
    final float y = ev.getY();
    switch(action & MotionEvent.ACTION_MASK){

    case MotionEvent.ACTION_MOVE:

        final int xDiff = (int) Math.abs(x - mLastMotionX);
        yDiff = (int) (y - mLastMotionY);
        final int ydif = (int) Math.abs(y - mLastMotionY);

        final int touchSlop = mTouchSlop;
        boolean xMoved = xDiff > touchSlop;
        boolean yMoved = ydif > touchSlop;
        if (xMoved || yMoved) {
            if (yMoved) {                   
                mTouchState = TOUCH_STATE_SCROLLING;
            }
        }
        break;

    case MotionEvent.ACTION_DOWN:

        if (!mScroller.isFinished()) {
            mScroller.abortAnimation();
        }
        // Remember location of down touch
        mLastMotionX = x;
        mLastMotionY = y;           
        break;
    case MotionEvent.ACTION_CANCEL:
    case MotionEvent.ACTION_UP:

        final int myDiff = (int) (y - mLastMotionY);

        if(mTouchState == TOUCH_STATE_SCROLLING){
            scrolltwice = false;
            if(!scrolltwice){
            Log.d("DB", " ACTION_UP fetch new records ");
                FetchRecords rec = new FetchRecords();
                rec.execute();  
                if(yDiff < 0){ // fetching next slot of records
                    nextRecordId = nextRecordId + previousTotal;
                    if(nextRecordId > totalRowCount){
                        nextRecordId = nextRecordId - previousTotal;
                    }
                }else if(yDiff > 0){ // fetching previous slot of records
                    nextRecordId = nextRecordId - previousTotal;
                    if(nextRecordId < 1){
                        nextRecordId = 0;
                    }
                }
            }
        }
        scrolltwice = false;
        mTouchState = TOUCH_STATE_REST;
        break;
    }
    return false;

}

      //implement ontouch listener if the view is list pass it onTouchEvent
public boolean onTouch(View v, MotionEvent event) {
    if(v.equals(objListView))
        onTouchEvent(event);
    return false;
} 
```

# python - 类型错误：web.py python 框架中的 __template__()

> ID：12813497
> 
> 赞同：1
> 
> 时间：2012-10-10T06:46:30.690
> 
> 标签：python, redirect, web.py

我正在使用 python web.py 框架来设计一个小型 Web 应用程序，下面是我的 index.py 代码

**索引.py**

```
import web
from web import form
import MySQLdb as mdb

render = web.template.render('templates/')

urls = (
  '/',   'Login',
  '/projects',  'Projects',
)

app = web.application(urls, globals())
conn = mdb.connect(user='root', passwd='redhat', db='Python_Web', host='localhost')

class Login:

    login_form = form.Form( 
        form.Textbox('username', form.notnull),
        form.Password('password', form.notnull),
        form.Button('Login'),
    )

    def GET(self):
        form = self.login_form()
        return render.login(form)

    def POST(self):
        if not self.login_form.validates():
            return render.login(self.login_form)
        i = web.input()
        username = i.username
        password = i.password
        query = "select user_login,user_password from user where user_login = '%s' " % username
        cur = conn.cursor()
        cur.execute( query )
        user_details = cur.fetchone()
        if username == user_details[0] and password == user_details[1]:
            raise web.seeother('/projects')
        else:
            return render.login_error(form)    

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

当我在浏览器中运行上述文件时`localhost:8080` ，我可以看到其中包含代码`login.html`并以以下方式访问的登录页面`render.login(form)`，

但是当用户名和密码匹配时，我的意图是重定向到另一个页面（`projects.py`）并如上`web.seeother('/projects')`所示。现在这将进入项目类并显示该类的 html 页面

但是当我单击登录按钮时，我看到以下错误

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/web/application.py", line 239, in process
    return self.handle()
  File "/usr/lib/python2.7/site-packages/web/application.py", line 230, in handle
    return self._delegate(fn, self.fvars, args)
  File "/usr/lib/python2.7/site-packages/web/application.py", line 420, in _delegate
    return handle_class(cls)
  File "/usr/lib/python2.7/site-packages/web/application.py", line 396, in handle_class
    return tocall(*args)
  File "/home/local/usser/python_webcode/index.py", line 55, in GET
    app.run()
  File "/usr/lib/python2.7/site-packages/web/template.py", line 881, in __call__
    return BaseTemplate.__call__(self, *a, **kw)
  File "/usr/lib/python2.7/site-packages/web/template.py", line 808, in __call__
    return self.t(*a, **kw)
TypeError: __template__() takes exactly 1 argument (0 given) 
```

谁能帮我解决上述错误

同样在 web.py 如何重定向到另一个具有 html 文件链接的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:51:50.553

控制器中可能存在错误`Projects`，您没有将所需的参数传递给模板渲染。

# git - git 格式补丁查询

> ID：12813500
> 
> 赞同：0
> 
> 时间：2012-10-10T06:46:36.743
> 
> 标签：git, patch, format-patch

我正在尝试通过 git 在 master 和我的工作分支之间创建一个补丁。我使用了以下命令：
`git format-patch master..workingbr`
但它正在为所有中间提交创建增量补丁。我想为 master 分支和当前工作分支之间的差异创建一个补丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:37:24.500

从手册页 -`git format-patch`每次提交准备每个提交及其补丁在*一个文件*中，..

因此，如果您想要一个补丁，您确实需要创建一个将您的系列压缩在一起的提交，可能在一个单独的分支上，根据 VonC 的评论。

# android - 从 Play 商店下载免费应用程序时下载者的电子邮件 ID

> ID：12813501
> 
> 赞同：0
> 
> 时间：2012-10-10T06:46:38.353
> 
> 标签：android, google-play

从 Play 商店下载免费应用程序时，我可以获得下载者的电子邮件 ID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:39:37.830

你不能。

但是，在用户许可的情况下，您可以获得设备上配置的电子邮件 ID。主帐户将是用户最有可能用于下载您的应用程序的帐户。

但是，您应该明确要求用户允许使用电子邮件 ID，因为未经许可这是对隐私的巨大侵犯。

# matlab - 如何在 Matlab 中检查结构数组中的空字段并存储所有非空向量？

> ID：12813504
> 
> 赞同：2
> 
> 时间：2012-10-10T06:46:46.387
> 
> 标签：matlab, is-empty

我有一个`32x1 struct array`. 这个数组的每个元素都有几个字段。我正在尝试检查哪些元素是空的（完成），但是我想创建一个包含所有非空元素的向量。

例如，我有被`struct array`调用`satdata`的，我想从中查看该字段`SVID`是否为空，所以`satdata(i).SVID`. 对于我的不同元素，SVID 应该从 1 到 32。但是如果有一个缺失的元素，那么它可以是`[1:4 6:10 11:32]`. 所以我想创建一个列向量（对于这种情况）

```
[1;2;3;4;6;7;8;9;10;11;12;13;14;15;16;17;18;19...32]. 
```

这是我到目前为止所拥有的：

```
for i = 1:32
    if isempty(satdata(i).SVID)
        continue
    else
    svid = satdata(i).SVID;
     svIdVec(i,:) = svid;
    end
end 
```

它正确检查了空插槽，但是当我创建向量时，我得到的东西看起来像`svIdVec = [0,2,3,4...32]`. 在这种情况下，只有第一个元素是空的。因此我想得到一个`31x1`向量，例如`[2,3,4...32]`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:10:13.200

你不需要循环：

```
svIdVec = {satdata.SVID};
[svIdVec{~cellfun(@isempty,svIdVec)}]'; % select only the non-empty values 
```

如果 SVID 字段是一个向量，并且您想将其聚合到一个矩阵中，则应使用以下代码（标量的上述代码不能用于处理向量）：

```
svIdVec = {satdata.SVID}';
svid = ~cellfun(@isempty,svIdVec );
svIdVec = cell2mat(svIdVec(svid)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:02:15.240

你的问题在字符串中

```
svIdVec(i,:) = svid; 
```

你应该用当前 svIdVec 的后面替换 i 。

可能的解决方案是

```
svIdVec = [];
for i = 1:32
    if isempty(satdata(i).SVID)
        continue
    else
    svid = satdata(i).SVID;
     svIdVec = [svIdVec, svid];
    end
end 
```

# javascript - 刷新谷歌地球插件不刷新页面

> ID：12813513
> 
> 赞同：0
> 
> 时间：2012-10-10T06:47:52.883
> 
> 标签：javascript, google-earth, google-earth-plugin

我制作了一个严重依赖谷歌地球插件的网络应用程序。有时它会由于未知原因而崩溃。

我想知道是否有办法：

1.  插件崩溃时捕获
2.  刷新插件而不刷新页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:55:35.823

对于您的问题编号 1) - 请参阅[我对这个 SO Question 的回答](https://stackoverflow.com/questions/12688626/detect-when-google-earth-plugin-crash)

对于 2) - 我没有对此进行测试，但是当您检测到插件已崩溃时，请尝试再次运行您的初始功能。应该看起来像这样的那个

```
function init() {
  google.earth.createInstance('map3d', initCB, failureCB);
} 
```

# javascript - 使用 gruntjs，如何监视 .coffee 文件的变化？

> ID：12813514
> 
> 赞同：8
> 
> 时间：2012-10-10T06:47:53.033
> 
> 标签：javascript, coffeescript, gruntjs

我是 gruntjs 的新手，这是我的简单 gruntfile：

```
/* global module:false */
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    watch: {
      tasks: 'coffee'
    },
    coffee: {
      compile: {
        files: {
          'js/javascript/*.js': ['js/coffeescript/*.coffee'] // 1:1 compile
        }
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-coffee');

  // Default task.
  grunt.registerTask('default', 'coffee');
}; 
```

当我运行 grunt 时，它编译得很好。但是，当我运行 grunt watch 时，它只是在等待并没有检测到我的更改。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T09:13:48.113

您应该添加要观看的文件：

```
watch: {
  coffee: {
    files: ['js/coffeescript/*.coffee'],
    tasks: 'coffee'
  }
} 
```

从[例子](https://github.com/gruntjs/grunt-init-commonjs-sample/blob/master/grunt.js)

# iphone - 如何使用 drawAtPoint 在 Xcode 中放置图像？

> ID：12813516
> 
> 赞同：0
> 
> 时间：2012-10-10T06:47:58.720
> 
> 标签：iphone, image, uiimage

所以我试图让图像出现在特定点。我看过一些关于 drawInRect 的东西，但我不确定为什么这段代码不能与 drawAtPoint 一起使用。这是我正在使用的。

```
- (void)drawRect:(CGRect)rect {
UIImage *image = [UIImage imageNamed:@"icon.png"];
CGPoint kitty;
kitty.x = 144;
kitty.y = 144;
[image drawAtPoint:(CGPoint)kitty]; 
```

我也用 cGPointMake 试过这个，然后把坐标放在后面。这两种方法都不会显示图像，但也不会引发错误消息。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:56:13.017

为了让它工作，我需要创建一个 UIView 的子类并将其放入其中：

```
- (void)drawRect:(CGRect)rect
{
[[UIImage imageNamed:@"icon.png"] drawAtPoint:CGPointMake(curPoint.x,curPoint.y) ];
} 
```

我缺少的另一件事是我在 ViewController.m 文件中使用的 setNeedsDisplay 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:15:25.243

使用 UIImageView。它是处理图像的特定对象。

// 在伪代码中：

```
UIImage* anImage = [UIImage imageNamed: @"myImage.png"]
UIImageView* imageView = [[UIImageView alloc] initWithImage: anImage];
(UIView*)[self addChild: imageView];
imageView.center = (CGPoint){10, 20}; 
```

drawrect：应该用于特定任务，它是一个模板模式，你应该使用它来更新一些 GUI 逻辑。阅读苹果文档以获取更多详细信息（顺便说一下，我很少使用它）

# javascript - 如何使用 Rails 使用 Ajax 设置日期？

> ID：12813517
> 
> 赞同：0
> 
> 时间：2012-10-10T06:48:02.603
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, datepicker

我正在使用 Ajax 更新 JQuery 日期选择器，并且每次都必须重新初始化日期选择器，但日期会自动设置为当前日期而不是所选日期。如何更改我的代码以传递正确的日期？

我目前正在尝试使用像 (params[:start_time].to_datetime).month 这样的 Rails 方法作为年/月/日，但是当我将它应用于 new Date()

索引.js

```
$('#datepicker').datepicker(
{
dateFormat: 'yy-mm-dd',
onSelect: function(dateText) {
    $.getScript(document.location.href + '&start_time=' + dateText, function(data) {
    });
}
});
$('#datepicker3').datepicker("setDate", new Date(2008,9,03) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:46:06.863

我认为如果您在调用 .datepicker 之前设置输入值，它将起作用，例如：

```
= f.text_field :some_date, :type => 'date', :value => @some_date 
```

然后在你的js中：

```
$(":date").datepicker(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:59:21.920

好的，您的问题似乎是将日期格式从字符串转换为 ruby​​ 对象，然后转换为 javascript 对象。

尝试做这样的事情：

```
<% date = Time.strptime(params[:start_time], "%y-%m-%d").to_i * 1000 %>
$('#datepicker3').datepicker("setDate", new Date(<%= date %>) ); 
```

# java - wicket：将 json 对象从 javascript 传递到 java

> ID：12813518
> 
> 赞同：1
> 
> 时间：2012-10-10T06:48:06.787
> 
> 标签：java, javascript, json, wicket

我们如何将 JSON 对象从 Javascript（客户端）传递到 Java（服务器）？

我想在我的 Java 方法中访问那个 JSON 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:24:35.303

尝试使用 Seam 远程处理。它工作得很好。

你可以在这里找到一个例子：http: [//tutslink.blogspot.com/2012/10/jsf-tutorials-using-seam-3-remoting.html](http://tutslink.blogspot.com/2012/10/jsf-tutorials-using-seam-3-remoting.html)

您只需实例化您一直在客户端并执行它的方法，将 JSON 作为参数传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:36:02.977

您可以使用此处描述的参数和 JavaScript 函数将 JSON 对象发送到 Wicket AJAX 行为/组件：[https](https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax) ://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax 但是这适用于 Wicket 6.0。你用的是什么版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:19:41.307

您可以通过以下方法执行任何 JavaScript：

[http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AjaxRequestTarget.html#appendJavaScript%28java.lang.CharSequence%29](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AjaxRequestTarget.html#appendJavaScript%28java.lang.CharSequence%29)

AjaxRequestTarget 是一个按钮和许多其他组件的结果对象。

要在服务器端接收 JSON，您不会在 Wicket 中找到方法。我认为您需要使用 Servlet 等标准工具自行编写这个 JSON 接收器。GSON 是一个很棒的 Java 库，用于解析与 Java 对象之间的 JSON。

塞巴斯蒂安

# persistence - 检索 JPA 实体会导致数据库更新

> ID：12813519
> 
> 赞同：0
> 
> 时间：2012-10-10T06:48:18.990
> 
> 标签：persistence

我有一个 EJB 方法。

```
 public List<Rfsprsus> findAll() {
    List<Rfsprsus> rl = getEntityManager()
            .createNamedQuery("Rfsprsus.findAll", Rfsprsus.class)
            .getResultList();

    for(Rfsprsus r: rl) {
        StringBuilder tempPwd = new StringBuilder("");
        for(int i = 0; i < paramFacade.find().getPwlength(); i++) {
            tempPwd.append("a");
        }
        r.setPassword(tempPwd.toString());
        if(r.getOrg() == null) r.setOrg(orgFacade.find("011"));         }
    return rl; 
```

但是，在调用此方法后，我检查了数据库。我很惊讶**for 循环实际上导致了更新**！

我不知道如何以及为什么，请解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:54:57.223

r 是来自数据库的实体。当你修改它时，你要求 JPA 也修改数据库。

从哲学上讲，不要将 JPA 视为访问数据库的组件。将其视为所有实体都存在于内存中，JPA 也会在您需要时找到它们。如果您不使用它们，JPA 会将这些实体刷新到数据库中这一事实主要是实现细节。

注意：当我说“在内存中”时，不要忘记它是一种事务性的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:12:14.460

我只是在方法之上添加了这个。

```
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) 
```

像魅力一样工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:10:03.917

我会说这是因为您正在处理活动事务中的*附加*实体。

也就是说，它们仍然由实体管理器管理。由实体管理器管理并且是正在进行的事务的一部分的实体就像到数据库的实时链接一样。如果您启动一个事务，从数据库中检索一些数据，然后您使用 setter 更改对象数据，然后关闭该事务，它将更新数据库。在这些情况下，您不需要持久或合并命令。

如果要操作从数据库返回的数据但不更新数据库，请分离实体或使用 DTO（数据传输对象）。也就是说，在事务范围之外更改数据或将数据传输到不受实体管理器管理的对象中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:26:11.163

更新可能发生在以下几行之间：

```
r.setPassword(tempPwd.toString()); 
if(r.getOrg() == null) r.setOrg(orgFacade.find("011")); 
```

首先，您正在更新内存中的实体`r`。我不确定是什么`orgFacade.find()`，但我想它会查询数据库。JPA 在执行查询之前刷新对 DB 的未决更改，以防查询“触及”已经更新的对象`r`（请注意，所有内容都在一个事务中执行）。所以我猜密码在数据库中更新是`orgFacade.find()`. 解决方案可能很简单，只需更改上述行的顺序即可：

```
if(r.getOrg() == null) r.setOrg(orgFacade.find("011"));
r.setPassword(tempPwd.toString()); 
```

# c# - 防止 dll 的随附 xml 文件被复制到 Visual Studio 中的输出文件夹

> ID：12813522
> 
> 赞同：0
> 
> 时间：2012-10-10T06:48:22.427
> 
> 标签：c#

> **可能重复：**
> [防止将引用的程序集 PDB 和 XML 文件复制到输出](https://stackoverflow.com/questions/2011434/preventing-referenced-assembly-pdb-and-xml-files-copied-to-output)

例如，我有一个引用的 ac# 项目`a.dll`，并且当 ac#`a.dll`有一个用于智能感知的伴随 xml 文件`a.xml`时，在构建项目时，`a.dll`和`a.xml`都被复制到输出文件夹，我如何禁用复制`a.xml`到输出文件夹？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-10T06:51:05.247

如果您在 Visual Studio 中转到此文件的属性，您会注意到属性“复制到输出”，您需要将其设置为“false”以防止其“应对”。

# java - 将 Java 浮点数转换为 C

> ID：12813529
> 
> 赞同：6
> 
> 时间：2012-10-10T06:49:01.397
> 
> 标签：java, c, floating-point

我有一个 java 程序，它使用包含大量浮点数的对象。事情是出于优化原因，我需要将此代码的一部分转换为 C。

对于基准测试，我已经在 C 中转换了所需的方法。事情不是将对象作为输入，而是采用那些浮点数组。

我将这些数组保存在 Java 文件中，以便从我的 C 代码中轻松访问它。问题是，Java 浮点数和 C 浮点数显然完全不同，我在 C 代码中得到了虚拟值。

我没有在互联网上找到任何可以帮助我完成这项任务的资源。 [我确实找到了这个](https://stackoverflow.com/questions/1258097/best-way-to-serialize-a-float-in-java-to-be-read-by-c-app)，但它适用于 C++，我无权访问这些类。

你有什么建议吗？我想我可以开发某种转换器，但这可能需要一些时间，而且网上可能有更好的解决方案。

谢谢，

编辑 ：

我正在使用 DataOutputStream 及其 writeFloat 方法保存浮点数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:18:54.053

我会使用 JavaCL 或 JavaCV 直接使用 GPU。

注意：这些库也适用于 Intel/AMD CPU，因此如果 GPU 速度不快，您就不需要使用它。

顺便说一句：Java 和 C 中的 float 是一样的。但是，如果您使用 ObejctOutputStream 这只能由 Java 读取，并且如果您使用 DataOutputStream 数据将采用 Big Endian 格式。如果你有一个小端的 Intel/AMD CPU，你必须交换字节。

如果您使用 ByteBuffer 和 NIO 来写入数据，您可以将其设为大端或小端。后者不需要翻译。

注意：您可以通过 JNI 访问`float[]`或访问`FloatBuffer`，这意味着不需要将其写入文件。

我建议使用 FloatBuffer

```
FloatBuffer fb = ByteBuffer.allocateDirect(size*4)
                           .order(ByteOrder.nativeOrder())
                           .asFloatBuffer(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:18:16.927

首先，您可以在 GPU 上运行 Java 程序，而无需转换为 C:[项目 RootBeer](https://github.com/pcpratts/rootbeer1)。

其次，Java 浮点数与 C 浮点数相同。诀窍是正确书写和阅读它们。我建议使用 具有读写浮点数的方法的[FileChannel](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)和[ByteBuffer 。](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)注意字节顺序，ByteBuffer 有设置所需顺序的方法。

# c# - WPF XBAP 自定义启动画面

> ID：12813531
> 
> 赞同：0
> 
> 时间：2012-10-10T06:49:14.667
> 
> 标签：c#, .net, wpf, splash-screen, xbap

`SplashScreen`类（[.NET Framework 4.5 文档](http://msdn.microsoft.com/en-us/library/System.Windows.SplashScreen.aspx)）说：

> **SplashScreen**类不能在XAML**浏览器应用程序 (XBAP)**中使用，因为它们使用不同的启动体系结构。

所以我想有必要提供一些手动管道来更改标准`XBAP`加载屏幕，寻找有关此过程的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:56:42.107

无法更改 XBAP 应用程序的加载页面，因为该页面由 PresentationHost.exe 显示。

无论如何，以下链接提供了建议和可能的解决方法

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d252c7ca-2ff9-4e09-9459-fb34fe8c1eb5/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d252c7ca-2ff9-4e09-9459-fb34fe8c1eb5/)

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/fffe2d9b-f512-40a4-84c3-756d690ea413/](http://social.msdn.microsoft.com/Forums/en/wpf/thread/fffe2d9b-f512-40a4-84c3-756d690ea413/)

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/c2779c8a-a58a-4b3e-b2c4-d056c754c999/](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c2779c8a-a58a-4b3e-b2c4-d056c754c999/)

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/a58c20c8-cd2c-49b1-82ed-1e67df41436c](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/a58c20c8-cd2c-49b1-82ed-1e67df41436c)

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/8445a222-969d-400a-864f-79c92a19fb04](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8445a222-969d-400a-864f-79c92a19fb04)

# c# - 编译器为匿名方法生成了不正确的代码 [MS BUG FIXED]

> ID：12813535
> 
> 赞同：30
> 
> 时间：2012-10-10T06:49:27.440
> 
> 标签：c#, .net, delegates, cil, anonymous-methods

请参阅以下代码：

```
public abstract class Base
{
    public virtual void Foo<T>() where T : class
    {
        Console.WriteLine("base");
    }
}

public class Derived : Base
{
    public override void Foo<T>()
    {
        Console.WriteLine("derived");
    }

    public void Bang()
    {
        Action bang = new Action(delegate { base.Foo<string>(); });
        bang();    //VerificationException is thrown
    }
} 
```

`new Derived().Bang();`抛出异常。在`Bang`我得到的方法生成的 CIL 中：

```
call instance void ConsoleApp.Derived::'<>n__FabricatedMethod1'<string>() 
```

以及编译器生成方法的签名：

```
method private hidebysig 
    instance void '<>n__FabricatedMethod1'<T> () cil managed 
{
    .custom instance void [mscorlib]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )       
    .maxstack 8

    IL_0000: ldarg.0
    IL_0001: call instance void ConsoleApp.Base::Foo<!!T>()
    IL_0006: ret
} 
```

我认为正确的代码应该是`'<>n__FabricatedMethod1'<class T>`. 它是一个错误吗？顺便说一句，不使用`delegate{ }`（lambda 表达式是相同的），代码可以很好地使用语法糖。

```
Action good = new Action(base.Foo<string>());
good();  //fine 
```

**编辑**我在 windows8 RTM、.net 框架 4.5 中使用 VS2012 RTMRel

**编辑**此错误现已修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:52:00.863

已确认为错误，[现已修复](http://connect.microsoft.com/VisualStudio/feedback/details/766845/vs2012-the-compiler-generated-incorrect-codes-for-anonymous-methods)

更新：Connect 文章不再存在。该错误已修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:04:16.457

起初 - 这是解决此问题的一种可能方法，但可能不是您问题的答案。（但评论没有代码格式）

我相信这类似于：[Outer Variable Trap](https://stackoverflow.com/questions/3416758/outer-variable-trap)，因为您使用 Foo() 方法作为变量，并且 .NET 中存在错误（或者可能是功能）

我试图将 Bang() 方法更改为此

```
public void Bang()
{
    Action baseMethod = base.Foo<string>;
    Action bang = new Action(delegate { baseMethod(); });
    bang();    //VerificationException is thrown
} 
```

它有效，结果是“基础”

我希望它有一点帮助。

# android - 带有自定义适配器的 MultiAutoCompleteTextView 显示乱码字符串

> ID：12813539
> 
> 赞同：6
> 
> 时间：2012-10-10T06:49:49.410
> 
> 标签：android, baseadapter

这是我之前的问题的后续行动：[Android: Autocomplete TextView Similar to The Facebook App](https://stackoverflow.com/q/12691679/1350013)。

*的背景：*

我在问题中的要求（上面发布的链接）是`AutoCompleteTextView`与 Facebook 应用程序和其他几个应用程序中使用的类似。解决方案是使用多行`MultiAutoCompleteTextView`该想法是使用户能够在创建状态更新时直接键入他们的朋友姓名。从独立的角度来看，答案中的解决方案可以正常工作。但是，当我开始将解决方案集成到现有代码中时，它仍然适用于正确的下拉菜单等。多亏了这里的解决方案，我看到了我朋友的过滤列表：[https](https://stackoverflow.com/a/12363961/1350013) ://stackoverflow.com/a/12363961/1350013 。我使用`ListView`带有 a`BaseAdapter`而不是`GridView`来自解决方案的自定义。

*问题：*

我的代码使用了`BaseAdapter`which implements `Filterable`。如上所述，工作正常。

当我从过滤列表中选择一个朋友时，问题就出在哪里。选择`MultiAutoCompleteTextView`后，将显示：**`@MY_PACKAGE_NAME.Friends.getFriends@406c1058`**而不是朋友的名字。我必须更改什么才能显示名称而不是乱码？如果有帮助，我在扩展 a`SherlockActivity`而不是 a中运行它的类`SherlockListActivity`。

现在我不确定相关代码是什么来找出问题所在，所以我会发布尽可能多的相关代码。我是菜鸟，所以请放轻松并要求提供任何其他代码。我会及时遵守。同样，如果这里不需要的东西弄乱了帖子，我会删除它。

*代码块*

*我之前的问题的解决方案中的 Tokenizer*。链接在顶部（在`onCreate()`方法中）

```
editStatusUpdate = (MultiAutoCompleteTextView) findViewById(R.id.editStatusUpdate);
editStatusUpdate.addTextChangedListener(filterTextWatcher);

editStatusUpdate.setTokenizer(new Tokenizer() {

    @Override
    public CharSequence terminateToken(CharSequence text) {

        int i = text.length();

        while (i > 0 && text.charAt(i - 1) == ' ') {
            i--;
        }

        if (i > 0 && text.charAt(i - 1) == ' ') {
            return text;
        } else {
            if (text instanceof Spanned) {
                SpannableString sp = new SpannableString(text + " ");
                TextUtils.copySpansFrom((Spanned) text, 0, text.length(), Object.class, sp, 0);
                return sp;
            } else {
                return text.toString() + " ";
            }
        }
    }

    @Override
    public int findTokenStart(CharSequence text, int cursor) {

        int i = cursor;

        while (i > 0 && text.charAt(i - 1) != '@') {
            i--;
        }

        if (i < 1 || text.charAt(i - 1) != '@') {
            return cursor;
        }

        return i;
    }

    @Override
    public int findTokenEnd(CharSequence text, int cursor) {

        int i = cursor;
        int len = text.length();

        while (i < len) {
            if (text.charAt(i) == ' ') {
                return i;
            } else {
                i++;
            }
        }

        return len;

    }
}); 
```

TextWatcher，同样来自前面问题的解决方案：

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        Layout layout = editStatusUpdate.getLayout();
        int pos = editStatusUpdate.getSelectionStart();
        int line = layout.getLineForOffset(pos);
        int baseline = layout.getLineBaseline(line);

        int bottom = editStatusUpdate.getHeight();

        editStatusUpdate.setDropDownVerticalOffset(baseline - bottom);

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}; 
```

对于我的 ArrayList：

```
public class getFriends {

    String friendID;
    String friendName;
    String friendProfile;

    boolean selected;

    // SET FRIENDS ID
    public void setFriendID(String friendID) {
        this.friendID = friendID;
    }

    // GET FRIENDS ID
    public String getFriendID() {
        return friendID;
    }

    // SET FRIENDS NAME
    public void setFriendName(String friendName) {
        this.friendName = friendName;
    }

    // GET FRIENDS NAME
    public String getFriendName() {
        return friendName;
    }

    // SET FRIENDS PROFILE
    public void setFriendProfile(String friendProfile) {
        this.friendProfile = friendProfile;
    }

    // GET FRIENDS PROFILE
    public String getFriendProfile() {
        return friendProfile;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T12:11:17.367

您应该在过滤器中覆盖`convertResultToString(Object resultValue)`，其中 Object 是您的类。这使得为​​您的类创建自定义字符串而不依赖于覆盖 to String 方法成为可能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T16:37:33.743

从您得到的输出来看，您的代码似乎调用了对象`toString`上的方法`getClass`来检索它需要的数据。当你想要朋友的名字时，你应该`toString`像这样实现你自己的方法（通过覆盖它）：

```
@Override
public String toString() {
    return friendName; 
} 
```

# python - 使用 subprocess.Popen 从 tortoise svn 签出文件

> ID：12813542
> 
> 赞同：0
> 
> 时间：2012-10-10T06:50:03.903
> 
> 标签：python

我正在使用此命令使用 Tortise svn 来检查文件

```
work = "F:\Test"
exe = "C:\\Program Files\\TortoiseSVN\\bin\\TortoiseProc.exe"
argu = ("/command:checkout /url:https://Test/help /path:" + str(work))
proc1 = subprocess.Popen([exe, argu]) 
```

运行此命令后，我可以在结帐窗口的结帐目录字段中看到路径。

```
F:\Test"\help 
```

但是，如果我使用 ("/command:checkout /url:https://Test/help /path:F:\Test") 这个命令，那么我可以在结帐窗口的结帐目录字段中看到以下路径。

```
F:\Test\help 
```

请让我知道我们是否需要在路径变量中提供完整路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:05:36.603

首先，确保您使用转义的反斜杠，或者

```
 work = "F:\\Test" 
```

或（python 原始字符串）

```
 work = r"F:\Test" 
```

然后，尝试遵循 Popen 文档，我引用：

> shell 参数（默认为 False）指定是否使用 shell 作为程序来执行。如果 shell 为 False，建议将 args 作为序列传递，如果 shell 为 True，建议将 args 作为字符串传递。

看起来像这样：

```
proc1 = subprocess.Popen([exe, '/command:checkout', '/url:https://Test/help', '/path:' + str(work)]) 
```

HTH，我希望我正确地解释了你的问题

# javascript - 是否可以通过 getElementBY Class() 收集具有相同类名的所有元素？

> ID：12813544
> 
> 赞同：0
> 
> 时间：2012-10-10T06:50:19.007
> 
> 标签：javascript

是否可以收集具有相同类名的所有元素`getElementBYClass()`？

```
<div class="a"> date1</div>
<div class="a"> date2 </div> 
```

现在我需要收集 date1 和 date2 并将其放入数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:51:17.320

您可以使用`document.getElementsByClassName("a");`

但这[与 IE8 不兼容](http://caniuse.com/#feat=getelementsbyclassname)

如果您想与 IE8 兼容，我建议使用[jQuery](http://jquery.com)，它可以`$('.a')`返回所有具有“a”类的元素的集合。

# ios - 以编程方式压缩录制的音频

> ID：12813545
> 
> 赞同：1
> 
> 时间：2012-10-10T06:50:24.343
> 
> 标签：ios, audio, record

当我在我的 iPhone 应用程序中录制音频时，文件很大。如何压缩音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:21:00.257

我没有这样做，但它看起来很简单。

创建 AVAudioRecorder 时，您可以指定目标 URL、格式和硝酸盐。如果您选择压缩格式和适当的比特率，数据将自动为您压缩。如果您选择 AAC，它也应该在硬件中进行压缩。

您想使用 AVAudioRecorder 的 initWithURL:settings:error: 您需要的常量在 General Audio Format Settings 中。我猜你最好的选择是 kAudioFormatMPEG4AAC。

您只想使用音频编解码器压缩音频，任何其他方式都效率低下并且会产生较差的音频。

# javascript - 在 jquery 绑定中调用 javascript 原型方法

> ID：12813546
> 
> 赞同：0
> 
> 时间：2012-10-10T06:50:27.713
> 
> 标签：javascript, jquery, oop

**为简单起见并满足需求，代码已被删除：**
*我知道这些方法毫无意义。我只想知道什么是非法的，以及如何以一种我能在下面描述的最好的方式一起使用方法。*

**问题来自** `bindContentOverlay` **方法：**

```
this.setContentOverlayHeight is not a function
this.setContentHeight is not a function 
```

**这里有一些类似于我正在使用的东西：**
*使用这种类型的风格的任何关于 OOP 的指针也非常受欢迎。*

```
$(document).ready(function(){
    var p = new Properties();
    p.bindContentOverlay();
});

var Properties = function()
{
    this.initialize();
}

Properties.prototype.initialize = function()
{
    this.menu = {"#power" : null,"#services" : "#services_menu","#cashback" : null,"#schedule" : "#schedule_menu"};
    this.a = 22;
    this.b = 33;
}

Properties.prototype.getHeights = function()
{
    this.initialize();
    this.q = this.a;
    this.w = this.b;
}

Properties.prototype.setContentOverlayHeight = function()
{   
    this.getHeights();
    alert(this.q);
}

Properties.prototype.setContentHeight = function()
{
    this.getHeights();
    alert(this.w);
}

Properties.prototype.bindContentOverlay = function()
{
    for(var i in this.menu)
    {
        (function(x, y) {
             $(x+','+y).hover(
                 function () {
                    console.log(x);
                    this.setContentOverlayHeight();
                 },
                 function () {
                    this.setContentHeight();
                    console.log(y);
                 }
            );
        })(i, this.menu[i]);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:59:10.600

您`this`在悬停回调中指的是悬停的元素，而不是当前`Properties`对象。

最简单的解决方法是将本地引用绑定到`this`的顶部`.bindContentOverlay`：

```
Properties.prototype.bindContentOverlay = function()
{
    var self = this;
    ...
} 
```

然后`self.setContentOverlayHeight()`在回调中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:01:14.833

每当您在函数中定义函数时，您都可能会丢失上下文（ 的值`this`）。

问题是您如何编写该`bindContentOverlay`方法。当那些最深的功能执行时，`this`不是你所期望的。

防止这种情况的最简单方法是保存`this`到局部变量并改用它。

```
Properties.prototype.bindContentOverlay = function()
{
    // Save "this" to local var, and use the var instead for any inner functions.
    var instance = this;

    for(var i in this.menu)
    {
        (function(x, y) {
             $(x+','+y).hover(
                 function () {
                    console.log(x);
                    instance.setContentOverlayHeight();
                 },
                 function () {
                    instance.setContentHeight();
                    console.log(y);
                 }
            );
        })(i, instance.menu[i]);
    }   
} 
```

# c# - EWS 中 ItemView 的最大尺寸是多少？

> ID：12813547
> 
> 赞同：7
> 
> 时间：2012-10-10T06:50:29.007
> 
> 标签：c#, exchange-server, exchangewebservices, ews-managed-api

`ViewSize`是在构造函数级别指定的。我找到[了构造函数的文档](http://msdn.microsoft.com/en-us/library/dd636348%28v=exchg.80%29.aspx)，但没有说明最大尺寸有多大。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:14:26.087

有 2,147,483,647 的限制，因为它的数据类型是 Int32，我使用它并测试它如果我们通过 ItemView(2147483647) 不会返回任何错误；

它只是定义了搜索项的页面大小，如果搜索项结果多于视图页面大小，则必须执行使用 ItemView 偏移量的后续调用才能返回其余结果。

参考 - [http://msdn.microsoft.com/en-us/library/exchange/dd633693%28v=exchg.80%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633693%28v=exchg.80%29.aspx) [http://msdn.microsoft.com/en-us/library/system.int32 .maxvalue.aspx](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-26T07:24:10.113

您可以在 ItemView 构造函数中指定 Int32 值，但只会返回一千个项目。您必须指定一个循环来获取剩余的项目。

```
 bool more = true;
        ItemView view = new ItemView(int.MaxValue, 0, OffsetBasePoint.Beginning);
        view.PropertySet = PropertySet.IdOnly;
        FindItemsResults<Item> findResults;
        List<EmailMessage> emails = new List<EmailMessage>();
        while (more)
        {
            findResults = service.FindItems(WellKnownFolderName.Inbox, view);
            foreach (var item in findResults.Items)
            {
                emails.Add((EmailMessage)item);
            }
            more = findResults.MoreAvailable;
            if (more)
            {
                view.Offset += 1000;
            }
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-18T17:22:25.857

Exchange 中的默认策略将页面大小限制为 1000 个项目。将页面大小设置为大于此数字的值没有实际效果。应用程序还应考虑这样一个事实，即 EWSFindCountLimit 限制参数值可能会导致为发出并发请求的应用程序返回部分结果集。

[http://msdn.microsoft.com/en-us/library/office/jj945066(v=exchg.150).aspx](http://msdn.microsoft.com/en-us/library/office/jj945066(v=exchg.150).aspx)

# android - 如何为在标题文本中使用的按钮设置 onClick()

> ID：12813548
> 
> 赞同：0
> 
> 时间：2012-10-10T06:50:29.770
> 
> 标签：android, android-layout, android-intent, android-emulator

在我的程序中，我在标题中使用返回和订购按钮，我在左侧显示了返回按钮，在标题右侧显示了订购按钮，但现在我想让这些按钮点击能够调用不同的活动，我知道如何调用使用按钮单击进行不同的活动，但在这种情况下，我不知道如何在标题中单击按钮，因此请参阅以下我用作标题的 xml 代码：-

```
 <TextView
   android:id="@+id/actionbar"
   android:layout_width="fill_parent"
   android:layout_height="40dip"
   android:background="@drawable/header"
   android:drawableLeft="@drawable/back"
   android:drawableRight="@drawable/final_order"
   android:gravity="center_vertical|center_horizontal"
   android:shadowColor="@android:color/black"
   android:shadowDx="1"
   android:shadowDy="1"
   android:shadowRadius="1"
   android:text="Pizza"
   android:textColor="#FFFFFF"
   android:textSize="25dp"
   android:textStyle="bold" /> 
```

请简要编写一些代码来实现该目标.....谢谢

# c# - 什么是 C# 开发人员学习 Android 开发的理想方法？

> ID：12813549
> 
> 赞同：5
> 
> 时间：2012-10-10T06:50:39.013
> 
> 标签：c#, android, .net

我是一名 .NET 开发人员，我喜欢用 C# 编写代码。

我想学习Android开发，想知道学习Android开发的理想方法是什么，特别是对于不懂Java但对C#有很好了解的开发人员。

你能推荐我任何书籍，教程，方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:07:24.013

您甚至可以使用 C# 进行 Android 开发，请参阅参考资料：

1.  [使用 C# 和 .NET 创建令人惊叹的 Android 应用程序](http://xamarin.com/monoforandroid)
2.  [适用于 Visual Studio C# 开发人员的 Android](http://www.wroolie.co.uk/2012/06/android-for-the-visual-studio-c-developer/)
3.  [使用 C# 构建 Android 应用程序](http://www.c-sharpcorner.com/uploadfile/mahesh/building-android-applications-using-C-Sharp)

# apache-flex - 如何在鼠标右键按下事件中获取 Flex Panel 外部的鼠标位置？

> ID：12813557
> 
> 赞同：0
> 
> 时间：2012-10-10T06:51:04.810
> 
> 标签：apache-flex

我正在创建一个 Flex 面板，上面有一个图像。我已将图像的“buttonMode”和“useHandCursor”属性设置为 true。因此，每当我将鼠标悬停在上面时，光标就会变成手工具。我可以在上面设置鼠标右键、鼠标右键、鼠标移动事件。但是，我看到鼠标移动事件无法正常工作。

例如，当用户右键单击 Flex 面板中的图像然后在 Flex 面板外拖动鼠标（同时按下鼠标右键）时，我想在用户拖动鼠标时获取鼠标的当前位置。但如果我在鼠标按下时做同样的事情，那么一切都会正常工作。谁能指导我为什么我不能用鼠标右键单击？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:17:29.760

假设您正在使用 MOUSE_DOWN -> MOUSE_MOVE -> MOUSE_UP 进程，您可以使用它。它最初被用作想要平滑拖放的人的答案。[你可以在这里](https://stackoverflow.com/questions/12321780/how-to-drag-an-image-to-move-it-smoothly-on-screen-with-actionscript/12325655#12325655)看到答案。

```
import flash.display.*;
import flash.events.*;

var startX:Number;
var startY:Number;
var shape:Sprite = new Sprite();
shape.graphics.beginFill(0x000000);
shape.graphics.drawRect(0,0,50,50);
shape.graphics.endFill();
this.addChild(shape);

shape.addEventListener(MouseEvent.MOUSE_DOWN,this.mouseDown);

function mouseDown(e:MouseEvent = null):void{
    stage.frameRate = 60;
    startX = stage.mouseX - shape.x;
    startY = stage.mouseY - shape.y;
    stage.addEventListener(MouseEvent.MOUSE_MOVE,this.mouseMove);
    shape.addEventListener(MouseEvent.MOUSE_UP,this.mouseUp);
}

function mouseMove(e:MouseEvent = null):void{
    shape.x = stage.mouseX - startX;
    shape.y = stage.mouseY - startY;
}

function mouseUp(e:MouseEvent = null):void{
    shape.removeEventListener(MouseEvent.MOUSE_UP,this.mouseUp);
    stage.removeEventListener(MouseEvent.MOUSE_MOVE,this.mouseMove);
    stage.frameRate = 24;
} 
```

基本上，要完成您想要的，MOUSE_MOVE 事件侦听器必须附加到舞台，而不是 Panel 或 Image。您在图像上监听 MOUSE_DOWN（或右键单击），然后添加 MOUSE_MOVE 和 MOUSE_UP 事件。我的帧速率更改是不必要的，但为了获得原始提问者想要的平滑拖动是必需的。我还补偿了该代码中对象内的鼠标位置。关键肯定是把MOUSE_MOVE事件加到stage中，监听stage.mouseX和stage.mouseY，而不是加到Panel或者image里监听target.mouseX/mouseY或者event.localX/localY。

我不认为这用于移动设备，但如果是，并且您使用的是强制 DPI，请确保使用 FlexGlobals.topApplication.systemManager.mouseX/mouseY 而不是 stage.mouseX 和 stage.mouseY。SystemManager 类负责 DPI 更改，而 Stage 类不负责。

# c++ - 用于绘制具有透明度的 2d 的 C++ 快速库

> ID：12813559
> 
> 赞同：1
> 
> 时间：2012-10-10T06:51:09.617
> 
> 标签：c++, graphics, 2d, polygon, getpixel

我正在寻找快速图书馆也可以制作一些 2d 图纸。我只需要绘制多边形，改变它们的透明度。我不想在任何窗口中显示结果，保存到文件将是足够的（更快 = 更好） - 我想学习我的算法如何绘制形状，所以我只需要像“drawPolygon”和“getPixel”这样的方法来比较结果.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:36:01.437

[OpenCV](http://opencv.willowgarage.com/wiki/)也是做类似这样的基本事情的有效选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:55:35.627

该[`GD`](http://www.boutell.com/gd/)库非常适合在位图上绘制形状。

# mysql - SQL 来选择用户的唯一列表，以及取决于时间戳的其他数据

> ID：12813561
> 
> 赞同：5
> 
> 时间：2012-10-10T06:51:14.263
> 
> 标签：mysql, sql, group-by, distinct

我在 SQL 中有一个表，该表是这样的：

```
+-------------+---------------+-------------------------+
| quotes_user | email_address | ________Sent_at________ |
+-------------+---------------+-------------------------+
| user1       | email1        | 2012-10-09 12:23:53.253 |
| user1       | email2        | 2012-10-09 12:24:53.253 |
| user2       | email3        | 2012-10-09 13:20:53.253 |
| user2       | email4        | 2012-10-09 11:23:53.253 |
| user3       | email5        | 2012-10-08 10:29:53.253 |
| user3       | email6        | 2012-10-08 14:23:53.253 |
+-------------+---------------+-------------------------+ 
```

我希望结果显示

```
+-------------+---------------+-------------------------+
| quotes_user | email_address | ________Sent_at________ |
+-------------+---------------+-------------------------+
| user1       | email2        | 2012-10-09 12:24:53.253 |
| user2       | email3        | 2012-10-09 13:20:53.253 |
| user3       | email6        | 2012-10-08 14:23:53.253 |
+-------------+---------------+-------------------------+ 
```

即我想选择唯一用户列表，以及与他们关联的最新电子邮件地址。

另一种解释问题的方法是，我想选择一个不包含在任何聚合函数或 order by 子句中的字段。我已经尝试了许多具有 Distinct 和 Order By、Group By 等排列的语句，但没有用。

我试图避免多个陈述。

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T06:54:05.710

`Sent_AT`查询背后的想法是在子查询中为每个查询获取最大值`quotes_user`并将其连接回原始表。

```
SELECT  a.*
FROM    tableName a INNER JOIN
        (
            SELECT  quotes_user, MAX(Sent_AT) maxSENT
            FROM tableName
            Group By quotes_user
        ) b on a.quotes_user = b.quotes_user AND
                a.Sent_AT = b.maxSent 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/bfc72/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:54:13.763

试试这个：

```
SELECT t2.quotes_user, t2.email_address, t2.Sent_at AS '________Sent_at________'
FROM
(
   SELECT quotes_user, MAX(Sent_at) AS MaxDate
   FROM Table 
   GROUP BY quotes_user
) t1
INNER JOIN Table t2 ON  t1.quotes_user = t2.quotes_user 
                    AND t1.Sent_at = t2.MaxDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:55:18.597

```
 select quotes_user, email_address, sent_at 
 from table_name t1 inner join
   (select quote_user, max(sent_at) as sent
    from table_name group by quotes_uaser) t2  
 on t1.quotes_user = t2.quotes_user and t1.sent_at = t2.sent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:56:04.487

```
select quote_user, email_adress, max( ___sent_at___ ) from users group by quote_user 
```

假设最大的 sent_at 对应于最后发送的邮件。

# sql - 使用具有无限参数的插入语句编写存储过程

> ID：12813563
> 
> 赞同：2
> 
> 时间：2012-10-10T06:51:17.337
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures

我在作业中遇到了一个问题。我的讲师不是最擅长用我能理解的方式解释事情，所以我希望我能在这里得到一些帮助。

这是给我们的问题：

> 构造一个存储过程，将数据插入到关键字表中。输入字符串的格式应为 (Topic_name, 'K1,W1,K2,W2,K3,W3...Kn, Wn')。Ks 是关键字，Ws 是权重。如果主题表中找不到主题名称，则需要先将新主题名称插入主题表，然后将其他数据插入关键字表。您的存储过程应始终检查字符串模式以确保其格式正确并且使用了正确的数据类型。如果字符串模式无效，请向用户提供反馈消息。

这是我的关键字表：

```
CREATE TABLE Keyword(
    Topic_Name  VARCHAR(30) NOT NULL,
    Keyword VARCHAR(30) NOT NULL,
    K_weight    INT     NOT NULL,
    PRIMARY KEY(Topic_Name, Keyword),
    FOREIGN KEY(Topic_Name) REFERENCES Topic); 
```

我遇到的主要问题是参数。我不知道如何让 SP 计算用户包含了多少参数。我能得到的任何帮助将不胜感激。如果您需要任何其他信息，请告诉我。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:33:08.160

您可以使用如下临时表。

需要“数组”的过程：

```
create table #array
(
  value1 varchar(30),
  value2 varchar(30)
)
go

create procedure myproc
as
begin

  select * from #array

end
go

drop table #array

go 
```

过程填充并将数组发送到 myproc：

```
create procedure myproc2
as
begin

  create table #array
  (
    value1 varchar(30),
    value2 varchar(30)
   )
  --fill an array             
  insert into  #array values ('A','B')      
  insert into  #array values ('C','D')

  exec myproc

  drop table #array
end

go 
```

你可以运行它：

```
exec myproc2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:33:32.057

这会让你开始。它将逗号分隔的值列表解析为临时表：

```
DECLARE @KeywordList varchar(max) //This can be a SP param

CREATE TABLE #Keywords(varchar(10) keyword NOT NULL); 

DECLARE @Keyword varchar(10), @Pos int

SET @KeywordList= LTRIM(RTRIM(@KeywordList))+ ','
SET @Pos = CHARINDEX(',', @KeywordList, 1)

--Parse varchar and split IDs by comma into temp table
IF REPLACE(@KeywordList, ',', '') <> ''
BEGIN
    WHILE @Pos > 0
    BEGIN
        SET @Keyword= LTRIM(RTRIM(LEFT(@KeywordList, @Pos - 1)))
        IF @Keyword <> ''
        BEGIN
            INSERT INTO #Keywords(ID) VALUES (@Keyword) 
        END
        SET @KeywordList = RIGHT(@KeywordList, LEN(@KeywordList) - @Pos)
        SET @Pos = CHARINDEX(',', @KeywordList, 1)

    END
END 

--Return a count of all rows
SELECT @TotalRows = COUNT(Keyword) FROM #Keywords; 

    --Now process data from #Keywords as required 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:02:03.627

据我了解，您的程序将只有一个字符串参数。然后，您在存储过程中解析此字符串（查找逗号）并处理每个参数直到字符串结尾。

# c - Trillian 插件

> ID：12813565
> 
> 赞同：2
> 
> 时间：2012-10-10T06:51:25.180
> 
> 标签：c, plugins

我正在寻找开始为 trillian 制作插件。我在网站上找到了一个示例插件和一些 api 文档，但我似乎找不到任何关于如何将插件构建到 dll 中的信息......例如编译器..或任何其他信息。如果有人以前制作过 trillian 插件并且可以指出我正确的方向，我将不胜感激。

# iphone - 使用 Objective Zip 解压缩包含子文件夹的 zip 文件

> ID：12813566
> 
> 赞同：1
> 
> 时间：2012-10-10T06:51:24.963
> 
> 标签：iphone, objective-c, ios, ipad

我正在使用 Objective Zip 解压缩压缩文件并保存到文档目录。解压缩工作正常。压缩文件中的单个文件可以完美地写入文档目录。

问题是我无法将 Zip 文件中的子文件夹作为文件夹写入文档目录。它显示为没有内容的文本文件。

我该如何解决这个问题？如何将文件夹作为文件夹写入目录？

下面是我使用的代码。

```
 NSString *targetFolder = docPath; // Path to Document directory
    [unzipFile goToFirstFileInZip];

    for (NSString *file in fileArray) {

      ZipReadStream *readStream = [unzipFile readCurrentFileInZip];
      FileInZipInfo *fileInfo = [unzipFile getCurrentFileInZipInfo];
      NSString *fileName = [fileInfo name];

      NSLog(@"File Name--- %@",fileName);
      NSString *unzipFilePath = [targetFolder stringByAppendingPathComponent:fileName];

    if (![fileManager fileExistsAtPath:unzipFilePath]) {
        [fileManager createFileAtPath:unzipFilePath contents:nil attributes:nil];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:40:25.963

您必须先创建目录，然后才能写入它们

例如与

```
NSString *dir = [unzipFilePath stringByDeletingLastPathComponent];
if (![fileManager fileExistsAtPath:dir isDirectory:nil]) {
    [fileManager createDirectoryAtPath:dir attributes:nil];
    NSLog(@"created directory %@", dir);
} 
```

# java - 在可执行 jar 中附加 html 文件、图像和索引文件

> ID：12813572
> 
> 赞同：2
> 
> 时间：2012-10-10T06:52:05.837
> 
> 标签：java, swing, jar, executable-jar

亲爱的 Stackflow 开发人员首先非常感谢您对我的帮助。我正在开发 java swing 应用程序中的一个项目，其中客户端必须访问 swing GUI 中的 html 文件。我想将 Html 文件、图像和索引文件添加到项目的 jar 中，以便客户端可以访问 html 文件而不实际存储它们。客户端可以从 jar 中解压缩 html 文件吗？请建议我最好的方法。问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:19:40.980

你可以使用例如

```
ImageIcon image = (new ImageIcon(getClass().getResource("yourpackage/mypackage/image.gif"))); 
```

通常，您可以通过以下方式检索 InputStream：

```
InputStream is = this.getClass().getResourceAsStream("yourpackage/mypackage/file.html"); 
```

然后使用流或 URL 来处理文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:19:03.727

您可以使用 . 直接访问 jar 资源[`Class.getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)。这也适用于您的开发环境，其中资源被复制到“输出”目录（生成 *.class 文件的位置）

例如，假设您有一个 HTML 文件，它位于路径“/path/to/my/index.html”的 jar 中，您可以使用以下命令检索该文件的 URL

```
URL indexURL = MyClass.class.getResource("/path/to/my/index.html"); 
```

假设这`MyClass`是你的一类。

# html - 将图标定位到圆圈中

> ID：12813573
> 
> 赞同：104
> 
> 时间：2012-10-10T06:52:09.737
> 
> 标签：html, css

我怎样才能将几个`<img>`元素定位成一个围绕另一个元素的圆圈，并让这些元素也都是可点击的链接？我希望它看起来像下面的图片，但我不知道如何实现这种效果。

![期望的结果](../Images/98185a758dcecd51b94555e52b3fd9b4.png)

这甚至可能吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-10-10T10:42:29.593

# 2020年解决方案

这是我这些天使用的更现代的解决方案。

我首先从一组图像生成 HTML。是否使用 PHP、JS、一些 HTML 预处理器生成 HTML 等等……这无关紧要，因为背后的基本思想是相同的。

这是执行此操作的 Pug 代码：

```
//- start with an array of images, described by url and alt text
- let imgs = [
-   {
-       src: 'image_url.jpg', 
-       alt: 'image alt text'
-   } /* and so on, add more images here */
- ];
- let n_imgs = imgs.length;
- let has_mid = 1; /* 0 if there's no item in the middle, 1 otherwise */
- let m = n_imgs - has_mid; /* how many are ON the circle */
- let tan = Math.tan(Math.PI/m); /* tangent of half the base angle */

.container(style=`--m: ${m}; --tan: ${+tan.toFixed(2)}`)
    - for(let i = 0; i < n_imgs; i++)
        a(href='#' style=i - has_mid >= 0 ? `--i: ${i}` : null)
          img(src=imgs[i].src alt=imgs[i].alt) 
```

生成的 HTML 如下所示（是的，您也可以手动编写 HTML，但之后进行更改会很痛苦）：

```
<div class="container" style="--m: 8; --tan: 0.41">
  <a href='#'>
    <img src="image_mid.jpg" alt="alt text"/>
  </a>
  <a style="--i: 1">
    <img src="first_img_on_circle.jpg" alt="alt text"/>
  </a>
  <!-- the rest of those placed on the circle -->
</div> 
```

在 CSS 中，我们决定图像的大小，比如说`8em`. 这些`--m`项目位于一个圆上，如果它们位于多边形边缘的边缘中间`--m`，所有这些都与圆相切。

如果您很难想象这一点，您可以玩这个[交互式演示](https://codepen.io/thebabydino/pen/zdhmt)，该演示为您通过拖动滑块选择边数的各种多边形构建内圆和外接圆。

[![六边形的内圆和外接圆](../Images/f5798f39545194f0e3f4a2115d1a18e0.png)](https://i.stack.imgur.com/MrL8n.png)

这告诉我们容器的大小必须是圆半径的两倍加上图像大小的一半。

我们还不知道半径，但是如果我们知道边的数量（以及因此半底角的切线，预先计算并设置为自定义属性`--tan`）和多边形边的数量，我们就可以计算它。我们可能希望多边形边缘的大小至少与图像的大小一样，但我们在边上留下多少是任意的。假设我们每边都有一半的图像大小，所以多边形边缘是图像大小的两倍。这为我们提供了以下 CSS：

```
.container {
  --d: 6.5em; /* image size */
  --rel: 1; /* how much extra space we want between images, 1 = one image size */
  --r: calc(.5*(1 + var(--rel))*var(--d)/var(--tan)); /* circle radius */
  --s: calc(2*var(--r) + var(--d)); /* container size */
  position: relative;
  width: var(--s); height: var(--s);
  background: silver /* to show images perfectly fit in container */
}

.container a {
  position: absolute;
  top: 50%; left: 50%;
  margin: calc(-.5*var(--d));
  width: var(--d); height: var(--d);
  --az: calc(var(--i)*1turn/var(--m));
  transform: 
    rotate(var(--az)) 
    translate(var(--r))
    rotate(calc(-1*var(--az)))
}

img { max-width: 100% } 
```

有关转换链如何工作的说明，请参阅旧解决方案。

这样，从图像数组中添加或删除图像会自动将新数量的图像排列在一个圆圈上，使它们等距分布，并调整容器的大小。您可以在[此演示](https://codepen.io/thebabydino/pen/oNbQZXZ)中对此进行测试。

* * *

## 旧解决方案（出于历史原因保留）

是的，仅使用 CSS 就很有可能而且非常简单。您只需要清楚地记住您想要与图像链接的角度（我在末尾添加了一段代码，只是为了在您悬停其中一个时显示角度）。

你首先需要一个包装器。我将其直径设置为`24em`（`width: 24em; height: 24em;`这样做），您可以将其设置为任何您想要的。你给它`position: relative;`。

然后，您将链接与图像放在该包装器的中心，水平和垂直。您可以通过设置`position: absolute;`然后`top: 50%; left: 50%;`和`margin: -2em;`（其中`2em`是图像链接宽度的一半，我已经设置为`4em`- 再次，您可以将其更改为您想要的任何内容，但不要忘记更改边距这种情况）。

然后，您决定要与图像链接的角度并添加一个类`deg{desired_angle}`（例如`deg0`或`deg45`其他）。然后为每个这样的类应用链式 CSS 转换，如下所示：

```
.deg{desired_angle} {
   transform: rotate({desired_angle}) translate(12em) rotate(-{desired_angle});
} 
```

在哪里替换`{desired_angle}`为`0`,`45`等等...

第一个旋转变换旋转对象及其轴，平移变换沿旋转的 X 轴平移对象，第二个旋转变换将对象带回原位。

这种方法的优点是灵活。您可以在不改变当前结构的情况下以不同的角度添加新图像。

**代码片段**

```
 .circle-container {
        position: relative;
        width: 24em;
        height: 24em;
        padding: 2.8em;
        /*2.8em = 2em*1.4 (2em = half the width of a link with img, 1.4 = sqrt(2))*/
        border: dashed 1px;
        border-radius: 50%;
        margin: 1.75em auto 0;
    }
    .circle-container a {
        display: block;
        position: absolute;
        top: 50%; left: 50%;
        width: 4em; height: 4em;
        margin: -2em;
    }
    .circle-container img { display: block; width: 100%; }
    .deg0 { transform: translate(12em); } /* 12em = half the width of the wrapper */
    .deg45 { transform: rotate(45deg) translate(12em) rotate(-45deg); }
    .deg135 { transform: rotate(135deg) translate(12em) rotate(-135deg); }
    .deg180 { transform: translate(-12em); }
    .deg225 { transform: rotate(225deg) translate(12em) rotate(-225deg); }
    .deg315 { transform: rotate(315deg) translate(12em) rotate(-315deg); }
```

```
 <div class='circle-container'>
        <a href='#' class='center'><img src='image.jpg'></a>
        <a href='#' class='deg0'><img src='image.jpg'></a>
        <a href='#' class='deg45'><img src='image.jpg'></a>
        <a href='#' class='deg135'><img src='image.jpg'></a>
        <a href='#' class='deg180'><img src='image.jpg'></a>
        <a href='#' class='deg225'><img src='image.jpg'></a>
        <a href='#' class='deg315'><img src='image.jpg'></a>
    </div>
```

此外，您可以通过使用链接的背景图像而不是使用`img`标签来进一步简化 HTML。

* * *

**编辑**：[**IE8 和更早版本的后备示例**](http://jsfiddle.net/thebabydino/nA2VE/)（在 IE8 和 IE7 中测试）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-10T07:11:58.850

这是没有绝对定位的简单解决方案：

```
.container .row {
  margin: 20px;
  text-align: center;
}

.container .row img {
  margin: 0 20px;
}
```

```
<div class="container">
  <div class="row">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
  </div>
  <div class="row">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
  </div>
  <div class="row">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
    <img src="https://ssl.gstatic.com/s2/oz/images/faviconr2.ico" alt="" width="64" height="64">
  </div>
</div>
```

[http://jsfiddle.net/mD6H6/](http://jsfiddle.net/mD6H6/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-10T19:42:34.750

在@Ana 的出色答案的基础上，我创建了这个动态版本，允许您从 DOM 中添加和删除元素并保持元素之间的比例间距 - 查看我的小提琴：[https ://jsfiddle.net/skwidbreth/q59s90oy/](https://jsfiddle.net/skwidbreth/q59s90oy/)

```
var list = $("#list");

var updateLayout = function(listItems) {
  for (var i = 0; i < listItems.length; i++) {
    var offsetAngle = 360 / listItems.length;
    var rotateAngle = offsetAngle * i;
    $(listItems[i]).css("transform", "rotate(" + rotateAngle + "deg) translate(0, -200px) rotate(-" + rotateAngle + "deg)")
  };
};

$(document).on("click", "#add-item", function() {
  var listItem = $("<li class='list-item'>Things go here<button class='remove-item'>Remove</button></li>");
  list.append(listItem);
  var listItems = $(".list-item");
  updateLayout(listItems);

});

$(document).on("click", ".remove-item", function() {
  $(this).parent().remove();
  var listItems = $(".list-item");
  updateLayout(listItems);
});
```

```
#list {
  background-color: blue;
  height: 400px;
  width: 400px;
  border-radius: 50%;
  position: relative;
}

.list-item {
  list-style: none;
  background-color: red;
  height: 50px;
  width: 50px;
  position: absolute;
  top: 50%;
  left: 50%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<ul id="list"></ul>
<button id="add-item">Add item</button>
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-03-17T22:02:36.697

使用@Ana 提出的解决方案：

```
transform: rotate(${angle}deg) translate(${radius}px) rotate(-${angle}deg) 
```

我创建了以下[jsFiddle](https://jsfiddle.net/ItayGrudev/3jqryc1m/)，它使用纯 JavaScript（也提供 jQuery 版本）动态放置圆圈。

它的工作方式相当简单：

```
document.querySelectorAll( '.ciclegraph' ).forEach( ( ciclegraph )=>{
  let circles = ciclegraph.querySelectorAll( '.circle' )
  let angle = 360-90, dangle = 360 / circles.length
  for( let i = 0; i < circles.length; ++i ){
    let circle = circles[i]
    angle += dangle
    circle.style.transform = `rotate(${angle}deg) translate(${ciclegraph.clientWidth / 2}px) rotate(-${angle}deg)`
  }
})
```

```
.ciclegraph {
  position: relative;
  width: 500px;
  height: 500px;
  margin: calc(100px / 2 + 0px);
}

.ciclegraph:before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  border: 2px solid teal;
  width: calc( 100% - 2px * 2);
  height: calc( 100% - 2px * 2 );
  border-radius: 50%;
}

.ciclegraph .circle {
  position: absolute;
  top: 50%; left: 50%;
  width: 100px;
  height: 100px;
  margin: calc( -100px / 2 );
  background: teal;
  border-radius: 50%;
}
```

```
<div class="ciclegraph">
  <div class="circle"></div>
  <div class="circle"></div>
  <div class="circle"></div>
  <div class="circle"></div>
  <div class="circle"></div>
  <div class="circle"></div>
</div>
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-06-19T08:23:50.447

这是我根据此处的示例在 React 中制作的版本。

[代码沙盒示例](https://codesandbox.io/s/circles-76sfz?file=/src/App.js)

```
import React, { useRef, useEffect } from "react";

import "./styles.css";

export default function App() {
  const graph = useRef(null);

  useEffect(() => {
    const ciclegraph = graph.current;
    const circleElements = ciclegraph.childNodes;

    let angle = 360 - 90;
    let dangle = 360 / circleElements.length;

    for (let i = 0; i < circleElements.length; i++) {
      let circle = circleElements[i];
      angle += dangle;
      circle.style.transform = `rotate(${angle}deg) translate(${ciclegraph.clientWidth /
        2}px) rotate(-${angle}deg)`;
    }
  }, []);

  return (
    <div className="App">
      <div className="ciclegraph" ref={graph}>
        <div className="circle" />
        <div className="circle" />
        <div className="circle" />
        <div className="circle" />
        <div className="circle" />
        <div className="circle" />
      </div>
    </div>
  );
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-07-11T11:19:41.443

您当然可以使用纯 css 或使用 JavaScript 来完成。我的建议：

*   如果您已经知道图像编号永远不会改变，只需计算您的样式并使用普通 css（优点：更好的性能，非常可靠）

*   如果数字可以在您的应用程序中动态变化，或者将来可能会发生变化，请使用 Js 解决方案（优点：更具前瞻性）

[我有类似的工作要做，所以我创建了一个脚本并在 Github 上](http://nobitagit.github.io/radial/)为任何可能需要它的人开源。它只接受一些配置值并简单地输出您需要的 CSS 代码。

如果您想选择 Js 解决方案，这里有一个对您有用的简单指针。使用这个 html 作为起点，作为`#box`容器和`.dot`中间的图像/div，你想要所有其他图像：

开始html：

```
 <div id="box">
      <div class="dot"></div>
      <img src="my-img.jpg">
      <!-- all the other images you need-->
    </div> 
```

启动CSS：

```
 #box{
      width: 400px;
      height: 400px;
      position: relative;
      border-radius: 100%;
      border: 1px solid teal;
    }

    .dot{
        position: absolute;
        border-radius: 100%;
        width: 40px;
        height: 40px;
        left: 50%;
        top: 50%;
        margin-left: -20px;
        margin-top: -20px;
        background: rebeccapurple;
    }
    img{
      width: 40px;
      height: 40px;
      position: absolute;
    } 
```

您可以按照以下方式创建快速函数：

```
 var circle = document.getElementById('box'),
        imgs = document.getElementsByTagName('img'),
        total = imgs.length,
        coords = {},
        diam, radius1, radius2, imgW;

    // get circle diameter
    // getBoundingClientRect outputs the actual px AFTER transform
    //      using getComputedStyle does the job as we want
    diam = parseInt( window.getComputedStyle(circle).getPropertyValue('width') ),
    radius = diam/2,
    imgW = imgs[0].getBoundingClientRect().width,
    // get the dimensions of the inner circle we want the images to align to
    radius2 = radius - imgW

    var i,
        alpha = Math.PI / 2,
        len = imgs.length,
        corner = 2 * Math.PI / total;

    // loop over the images and assign the correct css props
    for ( i = 0 ; i < total; i++ ){

      imgs[i].style.left = parseInt( ( radius - imgW / 2 ) + ( radius2 * Math.cos( alpha ) ) ) + 'px'
      imgs[i].style.top =  parseInt( ( radius - imgW / 2 ) - ( radius2 * Math.sin( alpha ) ) ) + 'px'

      alpha = alpha - corner;
    } 
```

[你可以在这里](http://codepen.io/nobitagit/pen/qdYJaN)看到一个活生生的例子

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-10T06:59:08.007

没有办法使用 CSS 将可点击的项目神奇地围绕另一个元素放置在一个圆圈中。我将如何做到这一点的方法是使用带有`position:relative;`. 然后放置所有元素`position:absolute;`并使用`top`和`left`定位它的位置。

即使您没有在标签中放置[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，最好使用 jQuery / javascript。

第一步是使用 . 将您的中心图像完美地放置在容器的中心`position:relative;`。

```
#centerImage {
  position:absolute;
  top:50%;
  left:50%;
  width:200px;
  height:200px;
  margin: -100px 0 0 -100px;
} 
```

之后，您可以使用`offset()`centerImage 的 an 减去`offset()`容器的 the 来将其他元素放在它周围。为您提供准确`top`的`left`图像。

```
var left = $('#centerImage').offset().left - $('#centerImage').parent().offset().left;
var top = $('#centerImage').offset().top - $('#centerImage').parent().offset().top;

$('#surroundingElement1').css({
  'left': left - 50,
  'top': top - 50 
});

$('#surroundingElement2').css({
  'left': left - 50,
  'top': top 
});

$('#surroundingElement3').css({
  'left': left - 50,
  'top': top + 50 
}); 
```

我在这里所做的是将元素**相**对于 centerImage 放置。希望这可以帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-10T07:18:07.957

你可以这样做：[小提琴](http://jsfiddle.net/9eNqY/)

不要介意定位，这是一个简单的例子

# php - 如何将 PHP 数组值分配给 JavaScript 数组

> ID：12813580
> 
> 赞同：16
> 
> 时间：2012-10-10T06:52:42.437
> 
> 标签：php, javascript

如何将 PHP 数组值分配给 JavaScript 数组？

使用下面的 PHP 代码，我将数据存储在 PHP 数组中：

```
<?php
$str_query="SELECT title,description FROM tablename ORDER BY title";
$rs_sch=GetRecordset($str_query); 

$int_count=0;
$schd_arr = array();
while(!$rs_sch->EOF())
{
$schd_arr[$int_count] = $rs_sch->Fields("title").": ".$rs_sch->Fields("description");
$rs_sch->MoveNext();
$int_count++;
}
?> 
```

使用下面的 JavaScript 代码，我试图将 PHP 数组数据存储到 JavaScript 数组中

什么以及如何在下面提到的 2 个位置编写变量，以便我的代码可以工作？

```
<script type="text/javascript" language="javascript">
var pausecontent=new Array()
for (sch_cnt=0; sch_cnt<*Here I want to assign value of $int_count php variable*; sch_cnt++)
{
pausecontent[sch_cnt]=<?php *Here I want to assign php array and counter values (something like this - $schd_arr[sch_cnt];)* ?>;
}
</script> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-10T07:00:09.833

您可以直接使用该[`json_encode`](http://php.net/json_encode)功能。它易于使用并生成有效的 javascript，因此非常稳定：

```
<script type="text/javascript">
    var pausecontent = <?php echo json_encode($php_array); ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-10T06:57:50.947

你不能这样循环，你需要循环 PHP 数组并`push`进入 javascript 数组：

```
<script type="text/javascript" language="javascript">
    var pausecontent = new Array();
    <?php foreach($schd_arr as $key => $val){ ?>
        pausecontent.push('<?php echo $val; ?>');
    <?php } ?>
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T07:04:11.283

我认为你最好先把数组放到你的javascript中。那将是这样的：

```
var theVariableYouWantTheArrayIn = <?php echo json_encode($theArrayYouWantInJavascript); ?> 
```

之后它是一个普通的 js 数组，因此您可以使用 .length 之类的属性，这可能会使循环更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-06T17:11:49.780

> 我在这样做时遇到了同样的问题，但最终找到了最佳解决方案

```
 <script>       
    var arr=[];
    arr.push('<?php
             include('conn.php');
        $query = "SELECT *FROM c group by name";
        $res = mysqli_query($conn,$query) or die(mysqli_error($conn));

        while($data = mysqli_fetch_array($res))
        {

             echo $data["name"];
        }
             ?>');
        </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T05:41:07.207

以上两个答案都很好。

1.  遍历您作为数据库查询结果获得的数组，并将每个值添加到一个新的 PHP 变量中，
2.  添加一个计数器并在每次迭代期间递增它，以确保您没有在最后一个元素之后添加逗号，
3.  如果数组中元素的计数大于 1，则照常创建数组，否则创建一个包含 1 个元素的新数组并将您的 PHP 数组值分配给索引 0。

# emacs - emacs 正则表达式匹配首字母大写的字符串

> ID：12813585
> 
> 赞同：3
> 
> 时间：2012-10-10T06:53:18.643
> 
> 标签：emacs

在 lisp 函数中，我使用正则表达式进行了以下测试，该正则表达式应该匹配任何以大写字母开头的字符串：

```
(if (string-match "^[A-Z].+" my-string) 
```

然而，这也匹配小写的起始字符串。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:26:23.373

从`string-match`描述（显示类型`C-h f`或`M-x describe-function`）：

```
(string-match REGEXP STRING &optional START) 
```

> 返回 STRING 中 REGEXP 的第一个匹配项的开始索引，或 nil。如果 `case-fold-search' 不为 nil，匹配会忽略大小写。

刚设置`case-fold-search`为`nil`。

```
(let ((case-fold-search nil))
 (string-match "^[A-Z].+"  my-string)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:25:11.190

请注意，它更糟糕：`"...\nHello"`即使它以点开头也匹配，因为`^`不仅匹配字符串的开头，还匹配该字符串中任何行的开头。仅匹配字符串开头的正则表达式运算符是 \`。我建议您使用：

```
(let ((case-fold-search nil)) (string-match "\\`[[:upper:]]" my-string)) 
```

# python - 使用 Django 在 Elastic Beanstalk 上运行 Python 的 Celery

> ID：12813586
> 
> 赞同：4
> 
> 时间：2012-10-10T06:53:22.250
> 
> 标签：python, django, celery, amazon-elastic-beanstalk

我正在考虑迁移到 Elastic Beanstalk（考虑到定价）。问题是我不知道如何在部署到服务的 python 应用程序（在我的例子中是 Django）上设置 Celery。有没有人设法在 Elastic Beanstalk 上设置芹菜？如果是这样，请让我知道您是如何做到的以及您使用了哪些工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T20:29:20.770

使用 SQS 服务。阅读本文：[带有 Amazon SQS 的 Celery](https://stackoverflow.com/questions/8048556/celery-with-amazon-sqs)

和这个：

[http://docs.celeryproject.org/en/latest/getting-started/brokers/sqs.html](http://docs.celeryproject.org/en/latest/getting-started/brokers/sqs.html)

# c# - 在列表视图 C# 中使用现有项目添加新项目

> ID：12813587
> 
> 赞同：0
> 
> 时间：2012-10-10T06:53:25.117
> 
> 标签：c#, winforms, listview

我的 listView 中已经存在一些项目。页面上有一个添加按钮，可打开一个对话框，用户可以在其中添加新项目。对话框关闭后，我必须将该新项目附加到现有项目。这是代码，它一直到结束，但没有添加新项目。我的列表视图中有多个列。我在这做错了什么。

```
public frmEditObject(AddException ObjException)
{
    InitializeComponent();
    if (ObjException != null)
    {
        ListViewItem lviMember, lviSender = null;
        bool alreadyExists =
            exceptionsList.Find(
                item =>
                item.UserDetail == ObjException.UserDetail && item.ExceptionType != ObjException.ExceptionType) !=
            null
                ? true
                : false;
        if (!alreadyExists)
        {
            exceptionsList.Add(ObjException);
            lvwExceptionMember.Items.Clear();
            lvwExceptionMember.BeginUpdate();
            foreach (var item in exceptionsList)
            {
                if (item.ExceptionType == Enumerations.ExceptionType.Members)
                {
                    lviMember = new ListViewItem(
                        item.UserDetail);
                    lviMember.Tag = 0;
                    lviMember.SubItems.Add(GetDisplayNameFromSamAccountName(item.UserDetail));

                    lvwExceptionMember.Items.Add(lviMember);

                }
            }
            lvwExceptionMember.EndUpdate();
            lvwExceptionMember.Refresh();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:08:46.603

按着这些次序：

```
public frmEditObject(AddException ObjException)
{
    InitializeComponent();

    //CHECK THAT YOUR OBJECT IS ALIVE
    if (ObjException != null)
    {
        ListViewItem lviMember, lviSender = null;
        bool alreadyExists = exceptionsList.Find(item => item.UserDetail == ObjException.UserDetail && item.ExceptionType != ObjException.ExceptionType) != null ? true : false;
        if (!alreadyExists)
        {
             //CHECK THAT NEW ITEM IS REALLY NEW, DOES NOT EXIST IN LIST
             exceptionsList.Add(ObjException);

             //YOU DO NOT NEED TO CLEAR LIST AND ADD ALL ITEMS TO IT
             //lvwExceptionMember.Items.Clear();

             //lvwExceptionMember.BeginUpdate();

                 Debug.WriteLine(item.ExceptionType);                 
                 if (item.ExceptionType == Enumerations.ExceptionType.Members)
                 {
                      //CHECK DOES YOUR OBJECT HAVE MEMBERS TYPE
                      lviMember = new ListViewItem(item.UserDetail);
                      lviMember.Tag = 0;
                      lviMember.SubItems.Add(GetDisplayNameFromSamAccountName(item.UserDetail));

                      lvwExceptionMember.Items.Add(lviMember);

                 }

            // lvwExceptionMember.EndUpdate();
            //lvwExceptionMember.Refresh();
        }
   }
} 
```

# javascript - html表单无法找到属性名称的setter方法

> ID：12813588
> 
> 赞同：0
> 
> 时间：2012-10-10T06:53:30.087
> 
> 标签：javascript, html, jsp

`html form unable to find setter method for attribute name`当我在表单操作中添加`name`属性时出现错误，例如

```
<html:form action="updateBOEMedicalAccept" name="updateBOEMedicalAcceptForm"> 
```

我需要`name`属性才能在 javascript 中使用它

喜欢

```
document.updateBOEMedicalAcceptForm.BOE_NO.disabled = true; 
```

并且`id`属性也不起作用

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:55:48.100

按名称获取元素，

```
document.getElementsByName('BOE_NO').disabled = true; 
```

通过 id 获取元素

```
document.getElementsById('idOfBOE_NO').disabled = true; 
```

# ajaxcontroltoolkit - 与母版页一起使用时，calendarextender 在 Opera 中导致回发

> ID：12813589
> 
> 赞同：0
> 
> 时间：2012-10-10T06:53:30.707
> 
> 标签：ajaxcontroltoolkit, opera, calendarextender

我在 Opera 中使用 ajax 控制工具包的日历扩展器时遇到了一个非常有线的问题。它在 Chrome 中运行良好，但在 OPERA 中，当我单击图像按钮打开日历时，它会导致回发并刷新页面（日历未打开）。

如果页面是简单页面，它可以工作，但如果它是来自母版页的内容页面，那么问题就在那里（对于 Opera）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-02T21:29:57.543

*（代表 OP 发布）*。

我解决了这个问题。我错过了一个从服务器端调用并绑定到脚本管理器的 JavaScript 函数。

# asp.net - ASP.NET MVC4 AutoMapper：到达控制器时丢失映射

> ID：12813590
> 
> 赞同：3
> 
> 时间：2012-10-10T06:53:39.157
> 
> 标签：asp.net, asp.net-mvc-4, automapper

我有一个奇怪的情况，我无法弄清楚。我有一个简单的 ASP.NET MVC4 应用程序，并且正在使用 AutoMapper 在 ViewModel 和实体 (DB) 对象之间移动数据。

我要解决的问题是，当我到达CustomerController时，我对 AutoMapper 的配置`Application_Start()`似乎消失了。`Create()`

如果我在该方法中调用 Configure，`Create()`则从 CustomerViewModel 到 CustomerEntity 的映射正常工作。

我已经在互联网上搜索过，没有看到有人报告这个问题，所以希望有人能给我一个线索。这是细节......我希望有人有一些建议，因为它让我发疯！:P

在 global.asax.cs 中`Application_Start()`，我在我的类上调用 configure() 方法：

```
AutoMapperConfigurator.Configure(); 
```

这是课程：

```
public class AutoMapperConfigurator
{
    public static void Configure() 
    {
        Mapper.Initialize(x => x.AddProfile<AutoMappingProfile>()); 
    }
} 
```

AutomMappingProfile 是我的 AutoMapper 配置文件类。它的实现如下：

```
public class AutoMappingProfile : Profile    

    public override string ProfileName        
    {          
        get { return "AutoMappingProfile";}     
    }       

    protected override void Configure()  
    {
        CreateMaps();  
    }

    private void CreateMaps()  
    {
        CreateMap<CustomerEntity, CustomerEntity>();
        CreateMap<CustomerViewModel, CustomerViewModel>();
        CreateMap<CustomerEntity, CustomerViewModel>().IgnoreAllNonExisting();
        CreateMap<CustomerViewModel, CustomerEntity>().IgnoreAllNonExisting();

        CreateMap<CustomerVendorProductEntity, CustomerVendorProductEntity>();
        CreateMap<CustomersVendorsProductViewModel, CustomersVendorsProductViewModel>();
        CreateMap<CustomerVendorProductEntity, CustomersVendorsProductViewModel>().IgnoreAllNonExisting();
        CreateMap<CustomersVendorsProductViewModel, CustomerVendorProductEntity>().IgnoreAllNonExisting();
    } 
} 
```

我设置了一个断点，`CreateMaps()`并看到它在应用程序启动时被调用。

当我调用一个操作来创建一个新的客户实体时，会调用 CustomerController 中的 Create() 方法。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([DataSourceRequest] DataSourceRequest request, CustomerViewModel vm)
    {
    .
    .
    var customer = AutoMapper.Mapper.Map<CustomerViewModel, CustomerEntity>(vm);
    .
    .   
} 
```

映射总是失败，`NotSupportedException`从列表到集合的映射。

我已经实现了 ListSourceMapper，它在 Configure() 中作为 Mapper 加载。我没有在这里展示它，因为它有效......我正在努力解决的问题是，当我到达 CustomerController 中的 Create() 时，我在 Application_Start() 中的 AutoMapper 配置似乎消失了。如果我在 Create() 方法中调用 Configure，则从 CustomerViewModel 到 CustomerEntity 的映射正常工作。我已经在互联网上搜索过，没有看到有人报告这个问题，所以希望有人能给我一个线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-02T13:52:52.530

我有一个与去年类似的问题，我在这里描述过：

[ASP.NET MVC4 AutoMapper：到达控制器时丢失映射](https://stackoverflow.com/questions/12813590/asp-net-mvc4-automapper-loses-mapping-when-reach-a-controller)

我有一个控制器，它具有以下构造函数：

```
 IApplicationDAO applicationDAO = new ApplicationDAO();
 public ApplicationController()
        {
            Mapper.Initialize(cfg => {
                cfg.CreateMap<ApplicationModel, BusinessObjects.Application>();
            }); 
```

和一个数据对象，它具有以下构造函数：

```
public ApplicationDAO()
        {
            Mapper.Initialize(cfg =>
            {
                cfg.CreateMap<BusinessObjects.Application, DataObjects.dbApplication>()
                   .ReverseMap();
            });
        } 
```

数据对象由构造函数创建一次并多次调用。每次构造函数调用数据对象时，它都会覆盖 ApplicationDAO 中设置的映射，这意味着 AutoMapper 总是会产生错误。

对我来说，解决方案是确保在组合根目录中创建所有映射，即 Global.asax。

# jquery - 动画边框：1px虚线#000；

> ID：12813592
> 
> 赞同：0
> 
> 时间：2012-10-10T06:54:00.423
> 
> 标签：jquery, css

如何为具有以下样式的元素设置动画：

```
border: 1px dashed #000; 
```

使用 jQuery 或 CSS3 来产生这种效果？- [http://matthewjamestaylor.com/blog/animated-photoshop-selection-on-a-web-page#examples](http://matthewjamestaylor.com/blog/animated-photoshop-selection-on-a-web-page#examples)

谢谢 （ ： ） ）

# joomla2.5 - 获取类别和文章列表 joomla

> ID：12813597
> 
> 赞同：-4
> 
> 时间：2012-10-10T06:54:24.663
> 
> 标签：joomla2.5, joomla-component

我正在使用 joomla 2.5，我想获取不同类别的列表和文章列表。

我正在使用以下代码来获取所有类别，但我无法获取类别 ID 以在另一个插入中使用它。

如何在下面给出的选择列表中获取这些不同的字段 ID。

```
$db = &JFactory::getDBO();
$query = "SELECT DISTINCT title FROM #__categories WHERE published = '1' ORDER BY level";
$db->setQuery($query);
$rows = $db->loadObjectList();
?>
<?php $catagories = (isset($this->settings['catagories']) ? $this->settings['catagories'] : "");?>
<select id="catagories" name="settings[catagories]">
<option value="default" selected="selected">---Default---</option>
<?php foreach ($rows as $row) {?>
<option <?php //if ($row->id == $catagories) { echo " selected=\"selected\""; } ?>value="<?php //echo $row->id;?>" >
<?php echo $row->title;?>
  </option>
<?php }?>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:37:02.250

第一步是查找/替换 'categories' 以更改为 'categories' 以确保您的代码与数据库表使用相同的语言，并且 - 一个快乐的奖励 - 它是英文的！

如果我理解这个问题：您有一个不同类别标题的列表，但没有这些类别的 ID。您无法保证每个标题都对应一个 ID；实际上，如果在查询中使用“DISTINCT”会对返回的行产生任何影响，那么最后有两个 ID 对应于一个标题。

这是非常不寻常的，因此您可能需要查看为什么 (i) 您有多个同名（同名）类别，以及 (ii) 在这种情况下，为什么不应该在您的表单中返回它们以供选择。

如果事实证明您确实需要提供不同类别标题的列表并且表单提交来处理这些内容，则必须有 ID，那么每个标题使用哪个 ID 的选择是不明确的。

假设使用哪个 ID 无关紧要，只要它匹配适当的标题，您可以执行以下操作：

```
<?php foreach ($rows as $row) {
$query = "SELECT id FROM #__categories WHERE title = " . $row->title . " AND published = '1'  LIMIT 1 ";
$db->setQuery($query);
$row->id = $db->loadResult();
?>
<option <?php if ($row->id == $catagories) { echo " selected=\"selected\""; } ?>value="<?php echo $row->id;?>" >
<?php echo $row->title;?>
  </option>
<?php }?> 
```

要获得更有效的解决方案，您可以考虑在原始查询中使用[UNION](http://www.tizag.com/sqlTutorial/sqlunion.php)来为返回的每一行提供一个 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:05:45.510

```
<?php 
$db = &JFactory::getDBO();
$query = "SELECT DISTINCT title FROM #__categories WHERE published = '1' ORDER BY level";
$db->setQuery($query);
$rows = $db->loadObjectList();
?>
<?php foreach ($rows as $row) {
$query = "SELECT id FROM #__categories WHERE title = " . $row->title . " AND published = '1'  LIMIT 1 ";
$db->setQuery($query);
$rowid = $db->loadResult();
?>
<option value="<?php echo $rowid;?>" >
<?php echo $row->title;?>
  </option>
<?php }?> 
```

# tridion - 已发布项目下未找到已发布动态组件模板

> ID：12813603
> 
> 赞同：1
> 
> 时间：2012-10-10T06:54:44.477
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我是动态组件模板的新手。

我创建了一个组件模板并将其“发布为动态组件”并允许“使用动态组件在页面上允许”。

我的系统中没有配置 Deployer，所有已发布的项目都存储在某个本地位置。

我已发布此组件模板，我正在尝试查找已发布的 CT。我在已发表的文章中没有找到这个 CT。

Deployer 是否必须使用 Dynamic CT 以及如何使用动态 CT 创建页面。

任何人都可以为此提供一些解决方案吗？

**编辑**

添加存储配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration Version="6.1"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="schemas/cd_storage_conf.xsd">
    <Global>
        <!--Optional:-->
        <ObjectCache Enabled="false">
            <!--Optional:-->
            <Policy Type="LRU" Class="com.tridion.cache.LRUPolicy">

                <Param Name="MemSize" Value="16mb"/>
            </Policy>

            <Features>
                <Feature Type="DependencyTracker" Class="com.tridion.cache.DependencyTracker"/>
            </Features>

        </ObjectCache>

        <Storages>

            <Storage Type="persistence" Id="defaultdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory" defaultStorage="true">
                <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
                <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                    <Property Name="serverName" Value="MyserverName" />
                    <Property Name="portNumber" Value="MYPORT" />
                    <Property Name="databaseName" Value="Tridion_Broker" />
                    <Property Name="user" Value="TridionBrokerUser" />
                    <Property Name="password" Value="MyPassword" />
                </DataSource>
            </Storage>

            <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
                <Root Path="c:\temp" />
            </Storage>
            <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="false">
                <Root Path="c:\temp\data" />
            </Storage>

        </Storages>

    </Global>

    <ItemTypes defaultStorageId="defaultdb" cached="false">

        <Item typeMapping="Page" cached="false" storageId="defaultFile"/>

            <Item typeMapping="ComponentPresentation" itemExtension=".Jsp" storageId="defaultFile"/>
            <Item typeMapping="ComponentPresentation" itemExtension=".Asp" storageId="defaultFile"/>
            <Item typeMapping="ComponentPresentation" itemExtension=".Xml" storageId="defaultFile"/>
            <Item typeMapping="ComponentPresentation" itemExtension=".Txt" storageId="defaultFile"/>

    </ItemTypes>

</Configuration> 
```

再次明确地说，我已经发布了动态组件模板，尽管 CT 已发布，但我无法在服务器的已发布项目中找到。已发布的项目存储在**c:\temp**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:05:33.607

请检查您的存储配置文件 (cd_storage_conf.xml) 中的动态 CP 位置。如果您没有指定，它将使用默认位置。

您可以指定自己的位置

```
<ItemTypes defaultStorageId="Default Storage" cached="CACHE_BEHAVIOR">

    <Item typeMapping="ComponentPresentation" itemExtension=".Jsp" cached="CACHE_BEHAVIOR" storageId="DCPStorage" />
......
</ItemTypes> 
```

# oracle10g - 右对齐Oracle表中的列

> ID：12813621
> 
> 赞同：0
> 
> 时间：2012-10-10T06:55:59.370
> 
> 标签：oracle10g

大家好，我正在寻找一种方法来更新 Oracle 10g 中左对齐到右对齐的 Clumn。该字段是我想到的 Varchar2 字段，例如：

```
update tbaadm.dst set DD_NUM = Ltrim(DD_NUM); 
```

但这只会修剪空白，不会实际右对齐数据。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:22:48.827

这是一个相当不寻常的要求——通常当有人要求某事右对齐或左对齐时，他们指的是数据*在显示时应该如何显示*（例如在屏幕上或在报告中）——而不是在实际数据本身中。

大多数屏幕设计和报告工具（例如 Oracle Reports）都允许您在任何项目上设置对齐选项。

但是，如果您*确实*需要更新原始数据 - 您可以使用 LPAD：

```
update tbaadm.dst set DD_NUM = lpad(DD_NUM, 30); 
```

替换`30`为列的最大大小。但我真诚地怀疑这真的是你应该做的。

# cordova - Phonegap 的 JREngage 无法编译

> ID：12813622
> 
> 赞同：1
> 
> 时间：2012-10-10T06:55:59.873
> 
> 标签：cordova

我已按照链接中提到的说明将 JREngage 插件包含到我的基于 Phonegap 的 Xcode 项目中。但是当我编译时，我得到错误 JRCaptureUser.h not found。插件本身没有这样的头文件，但它被导入到所有其他插件文件中。

[这](http://developers.janrain.com/documentation/mobile-libraries/phonegapcordova/)是说明的链接。

# grails - 如何在 GSP 页面中以不同的样式显示不同的 flash.message

> ID：12813624
> 
> 赞同：1
> 
> 时间：2012-10-10T06:56:05.037
> 
> 标签：grails, gsp, grails-2.0

我必须使用 flash.message 显示不同的消息，其中一些必须以不同的颜色显示，那么如何区分 flash.message 并在 GSP 中以不同的颜色显示它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-19T05:22:50.110

查看页面代码以查看错误并以不同的样式发送消息

```
 <g:if test="${flash.message}">
        <div class="message" role="status" style="font-size: medium;color: green;">${flash.message}</div>
    </g:if>
    <g:if test="${flash.warning}">
        <div class="message_error" style="font-size: medium;color: red;">${flash.warning}</div>
    </g:if> 
```

如果 scues 调用相应标签的控制器代码：

```
flash.message = message(code: 'Applied Successfully', args: [message(code: 'hrIrRegistration.label', default: 'HrIrRegistration'), hrIrAplcJobAppldLkInstance.id])
                redirect(controller: "hrIrRegistration", action: "showVcnyForApplcnt", id: params.hrIrVcncyIdHrIrVcncy.id) 
```

如果错误：

```
flash.warning = message(code: 'You have already Applied in this vacancy', args: [message(code: 'hrIrRegistration.label', default: 'HrIrRegistration'), hrIrAplcJobAppldLkInstance.id])
                redirect(controller: "hrIrRegistration", action: "showVcnyForApplcnt", id: params.hrIrVcncyIdHrIrVcncy.id) 
```

# tfs - 更改 tfs 中任务的工作流程以自动更新剩余工作

> ID：12813625
> 
> 赞同：1
> 
> 时间：2012-10-10T06:56:08.343
> 
> 标签：tfs, task, burndowncharts

有没有一种方法可以在工作项（任务）的工作流程图中添加规则，这样当任务关闭时，它会自动将已完成的工作更改为原始估计，剩余的工作为零。

我在 TFS 2010 中使用进程编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:00:19.460

我认为默认情况下它会这样做 - 至少对于 MSF Agile 5.0 流程模板中的任务是这样。

无论如何，您需要一条关于从 Active 到 Closed 的转换的规则，以复制一些值并清空剩余的工作：

```
<TRANSITION from="Active" to="Closed">
    <!--Reasons snipped -->
    <FIELDS>
        <!--Other fields snipped -->
        <FIELD refname="Microsoft.VSTS.Scheduling.RemainingWork">
          <EMPTY />
        </FIELD>
        <FIELD refname="Microsoft.VSTS.Scheduling.OriginalEstimate">
          <WHEN field="Microsoft.VSTS.Scheduling.OriginalEstimate" value="">
            <COPY from="field" field="Microsoft.VSTS.Scheduling.CompletedWork" />
          </WHEN>
        </FIELD>
        <FIELD refname="Microsoft.VSTS.Scheduling.CompletedWork">
          <WHEN field="Microsoft.VSTS.Scheduling.CompletedWork" value="">
            <COPY from="field" field="Microsoft.VSTS.Scheduling.OriginalEstimate" />
          </WHEN>
        </FIELD>
    </FIELDS>
</TRANSITION> 
```

# iphone - 要求用户通过 iPhone 中的 exit(0) 重新启动应用程序？

> ID：12813627
> 
> 赞同：0
> 
> 时间：2012-10-10T06:56:12.230
> 
> 标签：iphone, ios, exit, restart, terminate

我希望用户在我的应用程序的某个时间点启动新会话，所以我可以要求用户现在使用弹出窗口重新启动应用程序，如果他单击“是”。我使用 exit(0) 退出应用程序。它在苹果人类准则下有效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T06:58:49.060

绝对不。从[人机界面指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)：

> ### 不要以编程方式退出
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。

如果你想重置会话，你应该有办法从应用程序中重置你的状态并返回到它的第一个屏幕（如果适用）。

# php - 将div中显示的值传递到php中的另一个页面

> ID：12813629
> 
> 赞同：1
> 
> 时间：2012-10-10T06:56:27.587
> 
> 标签：php, javascript, jquery, ajax

我只是想如果有办法将已显示的值传递`DIV id`到另一个页面我的数据从另一个页面调用并显示在给定的代码中

```
<div id="res" style="float: left; Padding-left: 3px; padding-right:13px;line-height: 15px;">
      ......
</div> 
```

我想将此处显示的值传递给另一个页面，这是一个 php 页面。
谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:09:35.790

您标记了 jquery 和 ajax，所以这是一个 jquery 和 ajax 解决方案，用于将 div 的内容传递到另一个页面。在这个例子中，我使用`.text()`了，但是如果你想获取原始 HTML，那么就使用它`.html()`。

```
$(document).ready(function(){

    var content = $('#res').text();

    $.ajax({
       url: 'test.php',
       type: 'POST',
       data: { mytext : content },
       success: function(data) {

        // success - do something

      }
    });

}); 
```

编辑：为澄清起见，这是 Javascript/jQuery 代码。它与 div 一起出现在页面上。我添加了一个`$(document).ready`包装器，以便在页面加载时调用它，但是您可以将此代码放在任何事件中，例如单击按钮。

此外，因为这是一个 ajax 调用，所以用户在调用时不会看到任何事情发生。用户不会被重定向到第二个页面。

在接收内容的 PHP 页面上，您可以使用`$_POST['mytext']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:01:41.067

在另一个页面上放置隐藏字段并在 div 标签中使用 echo $_request 获取值后存储您的值。现在它将显示在 div 标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:04:03.280

你当然可以。

```
$(document).ready(function() {
  var resval = $('#res').text();  
}); 
```

然后，使用查询字符串中的数据将用户重定向到下一页：

```
window.location = 'page2.html?resval=' + resval; 
```

然后在第二页中您可以解析 URL（在 JQuery 中）：

```
var qsParm = new Array();
function qs() {
    var query = window.location.search.substring(1);
    var parms = query.split('&');
    for (var i=0; i < parms.length; i++) {
        var pos = parms[i].indexOf('=');
        if (pos > 0) {
            var key = parms[i].substring(0, pos);
            var val = parms[i].substring(pos + 1);
            qsParm[key] = val;
        }
    }
} 
```

或者，您可以通过`$_GET['resval']`在 PHP 中使用来获取参数。

参考：[如何在 jQuery 中将值从一个页面传递到另一个页面](https://stackoverflow.com/questions/404891/how-to-pass-values-from-one-page-to-another-in-jquery)

# python - 如何断言两个列表在 Python 中包含相同的元素？

> ID：12813633
> 
> 赞同：206
> 
> 时间：2012-10-10T06:56:45.183
> 
> 标签：python, unit-testing

在编写测试用例时，我经常需要断言两个列表包含相同的元素，而不考虑它们的顺序。

我一直在通过将列表转换为集合来做到这一点。

有没有更简单的方法来做到这一点？

**编辑**：

正如@MarkDickinson 指出的那样，我可以使用[TestCase.assertItemsEqual](http://docs.python.org/library/unittest.html#unittest.TestCase.assertItemsEqual)。

`TestCase.assertItemsEqual`Python2.7 中新增的注释。如果您使用的是旧版本的 Python，则可以使用[unittest2](http://pypi.python.org/pypi/unittest2) - Python 2.7 新功能的反向移植。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2015-08-05T12:24:32.767

从 Python 3.2 `unittest.TestCase.assertItemsEqual`( [doc](https://docs.python.org/2/library/unittest.html#unittest.TestCase.assertItemsEqual) ) 开始， (doc ) 已被`unittest.TestCase.assertCountEqual`( [doc](https://docs.python.org/3.2/library/unittest.html#unittest.TestCase.assertCountEqual) ) 取代，它完全符合您的要求，您可以从 python[标准库文档](https://docs.python.org/3.2/library/unittest.html)中阅读。该方法的名称有些误导，但它完全符合您的要求。

> a 和 b 具有相同编号的相同元素，无论它们的顺序如何

这是一个简单的例子，它比较了两个具有相同元素但顺序不同的列表。

*   使用`assertCountEqual`测试会成功
*   `assertListEqual`由于两个列表的顺序不同，使用测试会失败

这里有一个小示例脚本。

```
import unittest

class TestListElements(unittest.TestCase):
    def setUp(self):
        self.expected = ['foo', 'bar', 'baz']
        self.result = ['baz', 'foo', 'bar']

    def test_count_eq(self):
        """Will succeed"""
        self.assertCountEqual(self.result, self.expected)

    def test_list_eq(self):
        """Will fail"""
        self.assertListEqual(self.result, self.expected)

if __name__ == "__main__":
    unittest.main() 
```

**旁注：**请确保您要比较的列表中的元素是可排序的。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-10-10T07:13:08.830

稍微快一点的实现版本（如果你知道大多数情侣列表会有不同的长度）：

```
def checkEqual(L1, L2):
    return len(L1) == len(L2) and sorted(L1) == sorted(L2) 
```

比较：

```
>>> timeit(lambda: sorting([1,2,3], [3,2,1]))
2.42745304107666
>>> timeit(lambda: lensorting([1,2,3], [3,2,1]))
2.5644469261169434 # speed down not much (for large lists the difference tends to 0)

>>> timeit(lambda: sorting([1,2,3], [3,2,1,0]))
2.4570400714874268
>>> timeit(lambda: lensorting([1,2,3], [3,2,1,0]))
0.9596951007843018 # speed up 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-01-29T23:20:53.130

给定

```
l1 = [a,b]
l2 = [b,a] 
```

[在 Python *>= 3.0*](http://docs.python.org/3/library/unittest.html?highlight=assertcountequal#unittest.TestCase.assertCountEqual)

```
assertCountEqual(l1, l2) # True 
```

[在 Python *>= 2.7*](http://docs.python.org/library/unittest.html?highlight=assertequal#unittest.TestCase.assertItemsEqual)中，上述函数被命名为：

```
assertItemsEqual(l1, l2) # True 
```

[在 Python *< 2.7中*](https://pypi.python.org/pypi/unittest2)

```
import unittest2
assertItemsEqual(l1, l2) # True 
```

[通过`six`模块](https://six.readthedocs.io/#six.assertCountEqual)（任何 Python 版本）

```
import unittest
import six
class MyTest(unittest.TestCase):
    def test(self):
        six.assertCountEqual(self, self.l1, self.l2) # True 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-10-10T06:59:43.603

将列表转换为集合会告诉您它们包含相同的元素。但是这种方法不能确认它们包含相同数量的所有元素。例如，在这种情况下，您的方法将失败：

```
L1 = [1,2,2,3]
L2 = [1,2,3,3] 
```

您最好对这两个列表进行排序并进行比较：

```
def checkEqual(L1, L2):
    if sorted(L1) == sorted(L2):
        print "the two lists are the same"
        return True
    else:
        print "the two lists are not the same"
        return False 
```

请注意，这不会改变两个列表的结构/内容。相反，排序创建了两个新列表

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-25T15:12:27.207

Needs **ensure** library but you can compare list by:

> ensure([1, 2]).contains_only([2, 1])

This will not raise assert exception. Documentation of thin is really thin so i would recommend to look at [ensure's codes on github](https://github.com/kislyuk/ensure/blob/master/ensure/__init__.py)

# android - 复选框android序列逻辑

> ID：12813638
> 
> 赞同：1
> 
> 时间：2012-10-10T06:57:04.727
> 
> 标签：android, android-checkbox

我有 6 个复选框，只有第一个可以点击。在第一个被选中后，然后允许第二个 .. 当第二个被选中时，然后允许第三个 .. 选中的复选框也需要被禁用以避免用户取消选中它们..

我想我需要使用数组？不知道逻辑如何。。

```
if(checkbox1.isChecked()){
            checkbox1.setEnabled(false);
        }else if(checkbox2.isChecked()){
            checkbox2.setEnabled(false);
        } 
```

这行不通。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:00:40.040

您可以为复选框设置一个侦听器，并在单击前一个复选框时启用下一个复选框。

例子：

```
CheckBox cb1 = (CheckBox) findViewById(R.id.checkbox1);
cb1.setOnCheckedChangeListener(new OnCheckedChangeListener(){

    @Override
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        if (isChecked){
            cb1.setEnabled(false);
            cb2.setEnabled(true);
        }
    }         
}); 
```

# iphone - 相关实施自定义图像并从文本视图中选择所有图像并粘贴

> ID：12813639
> 
> 赞同：0
> 
> 时间：2012-10-10T06:57:06.593
> 
> 标签：iphone, xcode, sdk

我正在开发一个**表情符号**类型的应用程序，其中我使用了图像显示的自定义图像`UITextView`，现在我想选择所有图像并复制这些图像。复制这些图像后，我想将这些图像粘贴到消息文本框中，但我不知道如何实现此功能。有没有可能？它只复制文本，但不能复制图像，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:36:48.260

您应该使用[UIPasteboard](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPasteboard_Class/Reference.html)。将所有图像放入一个数组中，然后将该数组添加到 UIPasteboard。

您可以使用方法：

```
- (void)addItems:(NSArray *)items 
```

希望这可以帮助。

# windows-7 - 我可以在 Windows 7 Home Basic 操作系统中安装 sharepoint Foundation 2010 吗？

> ID：12813641
> 
> 赞同：0
> 
> 时间：2012-10-10T06:57:19.013
> 
> 标签：windows-7, sharepoint-2010

我有原始的 Windows7 Homes Basic。现在我想为 Sharepoint 设置开发环境。但它将无法安装。

我可以在 Windows 7 Home Basic 操作系统中安装 sharepoint Foundation 2010。如果可以，请告诉我要遵循的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:31:17.163

> 我可以在 Windows 7 Home Basic 操作系统中安装 sharepoint Foundation 2010

**不**，您不能在 Windows 7 Home Basic 中安装 sharepoint Foundation 2010。您至少需要 Windows 7 Professional x64 才能安装 SharePoint 2010。

*您可以将它安装在 Windows 7/Vista x64 上用于开发目的，但我想它只能在专业版或更高版本上运行。*

检查[如何在 Windows 7 Home Basic 版上安装 IIS？](http://social.technet.microsoft.com/Forums/en/w7itproinstall/thread/f5f09f99-4a23-45b7-bc32-b5631d36b1e4)和[Windows 7 Home Basic - "Internet Information Services (IIS)](http://forums.iis.net/t/1163764.aspx)，Basic 版本没有功能齐全的 IIS。那么我们如何在其上安装 Sharepoint。*使用 home basic，您没有 IIS 管理器。*

参考：
[sharepoint server on windows 7 basic home](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/6fe41fc5-52ab-4382-9b70-93c0c2348c3d/)
[如何安装 SHarepoint 2010 Windows 7 Home Basic](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/cb0e2d0d-6eec-4d1f-b5f7-0bc9eebd2e8c/)

请参阅此在 Win 7 上安装 Sharepoint - [无法在 Windows 7 中安装 sharepoint 2010](https://stackoverflow.com/questions/11025716/unable-to-install-sharepoint-2010-in-windows-7/11026890#11026890)

# jquery - 自定义右键菜单功能的问题

> ID：12813642
> 
> 赞同：1
> 
> 时间：2012-10-10T06:57:20.753
> 
> 标签：jquery, contextmenu, right-click

这是我的小提琴 - [http://jsfiddle.net/Jv9gc/](http://jsfiddle.net/Jv9gc/)

我目前的问题是我无法让我的自定义右键菜单做任何事情，甚至没有一个简单的警报框。任何人都可以帮忙吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:08:27.267

请试试这个：**工作演示** [http://jsfiddle.net/77L4w/](http://jsfiddle.net/77L4w/)

希望这适合原因`:)`

**代码**

```
$('#movecam').draggable({
    drag: function() {
        $('#mecam').css('top', $(this).position().top);
        $('#mecam').css('left', $(this).position().left);
    },
    stop: function() {
        $('#mecam').css('top', $(this).position().top);
        $('#mecam').css('left', $(this).position().left);
    }
});

$("#movecam").bind("contextmenu", function(event) {
    event.preventDefault();
    $("div.custom-menu").hide();
    $("<div class='custom-menu'><input id='propertz' type='button' name='propertz' value='Properties'></div>").appendTo("body").css({
        top: event.pageY + "px",
        left: event.pageX + "px"
    });

    init_prperty_click()
}).bind("click", function(event) {
    $("div.custom-menu").hide();
});

$('input[name="closeme"]').click(function() {
    $("#movecam").hide();
});

function init_prperty_click() {
    $("input[name=propertz]").on('click', function() {
        alert("haha");
    });
}​ 
```

# c# - 在 C# asp.net 中应用掩码字符串？

> ID：12813643
> 
> 赞同：2
> 
> 时间：2012-10-10T06:57:25.460
> 
> 标签：c#, asp.net

大家好，在我的项目中，我想要三种格式的货币。

```
1) ...999,999,999
2) ...999,999,999.00
3) ...999,999,99 
```

格式在 mysql 数据表字段中指定。我的项目在 ASP.NET 中，所以我不能使用 MaskedTextBox 。我试过的代码：

```
String.Format("{999,999,999}",rate); 
```

和

```
rate.ToString("999,999,999). 
```

如何获取掩码字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:17:17.367

要强制输入采用您指定的格式，请使用 AJAX Control Toolkit`MaskedEdit`控件。

要将数字输出为特定格式的字符串，请查看以下页面：

*   [标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)
*   [自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

要么创建一个字符串格式并将其直接放在`ToString`函数中，要么创建一个特殊的`NumberFormatInfo`，具有以下选项：

*   **CurrencyPositivePattern**：为正值定义货币符号的位置。
*   **CurrencyNegativePattern**：定义负值的货币符号的位置，并指定负号是由括号还是 NegativeSign 属性表示。
*   **NegativeSign**：如果 CurrencyNegativePattern 指示不使用括号，则定义使用的负号。
*   **CurrencySymbol** : 定义货币符号。
*   **CurrencyDecimalDigits**：定义货币值中的默认小数位数。可以使用精度说明符覆盖此值。
*   **CurrencyDecimalSeparator**：定义分隔整数和小数位的字符串。
*   **CurrencyGroupSeparator**：定义分隔整数组的字符串。
*   **CurrencyGroupSizes**：定义组中出现的整数位数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:13:48.073

您应该必须下载[AJAX 工具包](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)并使用`MaskedEdit`控件。

编辑：

使用[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:08:19.083

尝试

> rate.ToString("###,###,###")。

# android - 弱引用对象已在静态处理程序中被垃圾收集

> ID：12813653
> 
> 赞同：3
> 
> 时间：2012-10-10T06:58:18.283
> 
> 标签：android, nullpointerexception, handler, weak-references

给定代码

```
 private static class MyHandler extends Handler 
 {
       private final WeakReference<MainActivity> mTarget;
       MyHandler(MainActivity intarget) {
       mTarget = new WeakReference<MainActivity>(intarget);
 }

 @Override
 public void handleMessage(Message msg) 
 {
       MainActivity target = mTarget.get();  // target becomes null will causes null      pointer exception
       switch (msg.what) {
        ..
        }
 }
} 
```

为了避免 NullPoinetrException 我可以使用：

```
if(target != null {
     // do something
} 
```

但是当目标变为空时，我无法在应用程序中继续进行。

问题：

有没有办法在目标变为空时恢复目标并继续进行，或者我应该完成活动或应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T07:04:41.660

使用始终需要作为 WeakReference 引用的对象背后的原因是什么？

引用被用作缓存，而不是作为可以自由访问的对象。WeakReferences 将在 GC 认为不需要它们时被擦除，即使它们将被需要。

此外，WeakReference 永远不会变为 null。它的内容可能会变为 null，但引用本身仍然是有效的 WeakReference。它将为空，但不为空。空对象和空对象之间存在区别：空对象仍然分配在内存中。

我只是删除 WeakReference 并将 MainActivity 存储为一个完整的对象。如果您遇到内存泄漏，请修复您的内存泄漏，而不是尝试解决它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:09:19.397

请阅读[概述](http://developer.android.com/reference/java/lang/ref/WeakReference.html)。`WeakReference`直接指出，周引用下的对象将尽快被收集。

因此，您必须使用通常的参考，或`SoftReference`.

# c# - 在 C# 中仅启用 COM 类的早期绑定

> ID：12813657
> 
> 赞同：1
> 
> 时间：2012-10-10T06:58:25.707
> 
> 标签：c#, vba, com

我正在使用将在 VBA 中使用的 C# 创建类库。但有一件事让我感到沮丧 - 当我删除或更改方法名称中的一些字母并尝试编译 vba 项目时，我没有收到任何错误。但是如果我发现它是因为使用后期绑定而发生的，我想得到编译错误消息。

我会尽力解释。

1.  这是正确的签名：

    ```
    Sub Test()
      Dim cls as New SomeClass
      cls.SomeMethod
    End Sub 
    ```

2.  它是拼写错误的签名：

    ```
    Sub Test()
      Dim cls as New SomeClass
      cls.**SomeMetod**
    End Sub 
    ```

3.  按编译 VBA 项目 - 一切正常，但不应该。

我更改了基本界面，如下所示：

```
[Guid("Some GUID here"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IComInterface
{} 
```

和基类：

```
[ClassInterface(ClassInterfaceType.None)]
public class BaseClass 
```

但是什么也没有发生！！！我只在运行时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:07:01.637

解决方案是：

```
 [Guid("Some GUID here"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IComInterface
    {} 
```

和基类：

```
 [ClassInterface(ClassInterfaceType.AutoDual)]
    public class BaseClass 
```

请注意，不支持您的代码版本控制！ToString()、GetHashCode() 等 .NET 方法在 VBA 中也变得可见。因此，您需要为这些方法使用属性 [ComVisible(false)]。这适用于 ToString、GetHashCode、Equals。GetType 在那种情况下是不可能隐藏的。因此，您需要决定是否需要隐藏 .NET 方法或有早期绑定和编译警告

# c - 获取网络中设备的 IP 地址

> ID：12813658
> 
> 赞同：0
> 
> 时间：2012-10-10T06:58:26.013
> 
> 标签：c, linux

从主题本身，我如何通过其 IP 地址检测设备。当我检测到它时，设备将向服务器发送一个响应，表明它现在已连接，就像检测到新设备一样，但该设备未连接到 linux 机器。我这里有图。。

![在此处输入图像描述](../Images/5e17c48de102b194e3f1c31f822aebb6.png)

当设备现在连接时，我可以通过它的 IP 地址向它发送数据，以便我可以控制它.. 该设备将由电机、LED 灯组成，Linux 将向它们发送命令。命令，如..向上移动，向下移动，向左，向右移动电机和开/关 LED 灯。

我怎么能在c中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:49:36.687

There are many ways to get the data about a remote device.

1.  SOCKET
2.  SNMP protocol
3.  nmap tool

Socket programming is the generic way to connect to a remote system and getting the data about it.

For the protocol SNMP use the following library to work it in programming.

> [http://www.net-snmp.org/](http://www.net-snmp.org/)

For the nmap tool you can use following link

> [http://nmap.org/](http://nmap.org/)

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:25:22.243

当您的设备回话时，您将获得一个 IP 地址。我假设您的检测机制类似于在 UDP 上广播。如果您使用 Berkeley 套接字，您将使用以下两个函数之一：

```
int accept(int sockfd, struct sockaddr *cliaddr, socklen_t *addrlen); // TCP method of receiving connection
ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags, struct sockaddr *src_addr, socklen_t *addrlen); // UDP method of receiving data 
```

在这些中，`cliaddr`和`src_addr`分别会给你发送数据包的计算机的IP。例如在 linux 上，用于 IPv4 的 sockaddr 结构是：

```
/* Internet address. */
struct in_addr {
    __be32  s_addr;
};

struct sockaddr_in {
  __kernel_sa_family_t  sin_family; /* Address family       */
  __be16        sin_port;   /* Port number          */
  struct in_addr    sin_addr;   /* Internet address     */

  /* Pad to size of `struct sockaddr'. */
  unsigned char     __pad[__SOCK_SIZE__ - sizeof(short int) -
            sizeof(unsigned short int) - sizeof(struct in_addr)];
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:26:04.057

如果您知道设备的主机名，则可以使用[gethostbyname](http://pubs.opengroup.org/onlinepubs/009695399/functions/gethostbyname.html)，它会返回一个包含所需数据的*[hostent](http://www.gnu.org/software/libc/manual/html_node/Host-Names.html)*结构，您正在寻找（IP 地址）。

从那里您可以继续建立 TCP 连接或发送 UDP 包等...

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:31:56.787

我发现这是一个有用的教程：

[linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)

它实际上涵盖了所有你可能想知道的套接字编程入门并且写得很好。

# asp.net - 访问 gridpanel 存储中 aspx.cs 页面的方法以在 extjs 中获取数据

> ID：12813661
> 
> 赞同：0
> 
> 时间：2012-10-10T06:58:37.727
> 
> 标签：asp.net, extjs, grid, json.net

我正在使用 ExtJs 4.0。我想访问 aspx.cs 页面方法来获取 extjs 网格面板中的数据。我试图从以下代码中找到解决方案，但没有成功。

**网格.js**

```
Ext.application({
    launch: function() {
        // Model definition and remote store (used Ext examples data)
        Ext.define('ForumThread', {
            extend: 'Ext.data.Model',
            fields: ['countryId', 'countryName'],
            idProperty: 'countryId'
        });

         var store = Ext.create('Ext.data.Store', {
        pageSize: 20,
        model: 'ForumThread',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'mindbody.reports/test.aspx/display',
            reader: {                
                type: 'json',
                method: "GET",
                totalProperty: 'totalCount'
            }
        }
    });

        // Define grid that will automatically restore its selection after store reload
        Ext.define('PersistantSelectionGridPanel', {
            extend: 'Ext.grid.Panel',

        });

        // Create instance of previously defined persistant selection grid panel
        var grid = Ext.create('PersistantSelectionGridPanel', {
            autoscroll: true,
            height: 300,
            renderTo: Ext.getBody(),
            //region: 'center',
            store: store,
            multiSelect: true, // Delete this if you only need single row selection
            stateful: true,
            forceFit: true,
            loadMask: false,
            viewConfig: {
                stripeRows: true
            },
            columns:[{
                id: 'countryId',
                text: "countryId",
                dataIndex: 'countryId',
                flex: 1,
                sortable: false
            },{
                text: "countryName",
                dataIndex: 'countryName',
                width: 70,
                align: 'right',
                sortable: true
            } ]
        });
    }
}); 
```

**测试.aspx.cs**

```
public string display()
{
      country obj = new country();
      JavaScriptSerializer serializer = new JavaScriptSerializer();
      return serializer.Serialize(obj.SelectAll());  
} 
```

**url: 'mindbody.reports/test.aspx/display'**我正在尝试从 test.aspx 页面的显示方法中获取数据，但没有得到任何数据，甚至没有错误。我在调用方法中有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:08:28.953

在 test.aspx.cs 页面上的方法 display() 之前添加以下代码行

```
 [System.Web.Services.WebMethod()] 
```

# android - 从 Android 和 iOS 的图像中提取剪影，最佳选择？OpenCV，OpenGL，其他..？

> ID：12813664
> 
> 赞同：0
> 
> 时间：2012-10-10T06:58:45.063
> 
> 标签：android, ios, image-processing, opencv, opengl-es

我想为 iPhone 和 Android 制作一个应用程序。主要活动将是从照片（用设备的相机拍摄的照片）中提取剪影。什么是最好的选择？

我已经阅读了很多关于这方面的内容，我认为最好的选择可能是 OpenCV（现在他们也有 iOS 的官方端口），但我不确定，因为我对此没有任何经验。我需要你的建议。

也许OpenGL可能是一个更好的选择？（例如，适用于 iOS 的 GPUImage 框架和适用于 Android 的 JOGL）。或者也许有更简单的库来完成这项任务......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:21:54.697

OpenGL是一种渲染技术。

OpenCV 是一个用于数字成像处理的库。

OpenCV 显然是您唯一真正的选择，互联网上有很多关于此的[教程](http://www.google.com/webhp#q=opencv+silhouette+recognition)和[问题。](https://stackoverflow.com/questions/8489091/finding-people-silhouette-in-opencv-c)

# android - 如何保持 Wifi Direct 开启 Android

> ID：12813669
> 
> 赞同：0
> 
> 时间：2012-10-10T06:59:01.580
> 
> 标签：android, wifi-direct

我不知道它是在本机 API 中还是只是我的 GS3。Wifi direct 会在 5 分钟不活动后自动关闭。有什么办法可以保持吗？或以编程方式打开它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:08:26.023

您可以使用 Wi-Fi 锁：

```
WifiLock wifiLock = ((WifiManager) getSystemService(Context.WIFI_SERVICE))
    .createWifiLock(WifiManager.WIFI_MODE_FULL, "mylock");

wifiLock.acquire(); 
```

当你不再需要网络时，你应该释放锁：

```
wifiLock.release(); 
```

# asp.net-mvc - 在 DI 容器中配置时，MVC 控制器应该获得什么样的生活方式

> ID：12813671
> 
> 赞同：2
> 
> 时间：2012-10-10T06:59:05.957
> 
> 标签：asp.net-mvc, dependency-injection, inversion-of-control, ioc-container, servicestack

我用 Funq 工厂自动连接我的 MVC 控制器，我很好奇它们的生命周期管理是什么样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:03:15.853

MVC 控制器并非设计为线程安全的，因为它们是由 MVC 针对它们正在处理的请求进行初始化的。所以他们可以拥有的最长的生活方式是每个网络请求的生活方式。然而，MVC 只会在`IControllerFactory`每个 Web 请求中请求控制器一次，这意味着控制器工厂将始终返回一个新的控制器实例。选择每个 Web 请求的生活方式会产生正确的结果，但会降低系统的性能，因为不需要缓存控制器。换句话说：

**MVC 控制器应该有一个短暂的生活方式。**

# objective-c - 在运行时创建 PDF 并用数据填充并在 iOS 中显示

> ID：12813674
> 
> 赞同：0
> 
> 时间：2012-10-10T06:59:09.850
> 
> 标签：objective-c, ios

我有一组用户将填写的文本字段，当他点击保存按钮时，我们应该通过代码创建一个 PDF 并用用户填写的数据填充它并在 iPhone 屏幕上显示 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:19:28.167

关于如何在 iOS 中生成 PDF 的最佳起点是[Apple 的 iOS 绘图和打印指南 - 生成 PDF 内容](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)，其中包括如何生成 PDF 页面（或具有多个页面的文档）的示例代码。在每个页面中，您可以使用任何 Quartz 函数来绘制内容。如果您提供更多详细信息，那么您计划绘制的内容会更容易为您提供帮助。

# objective-c - ios语音转文字

> ID：12813675
> 
> 赞同：1
> 
> 时间：2012-10-10T06:59:10.223
> 
> 标签：objective-c

> **可能重复：**
> [iPhone App › 添加语音识别？](https://stackoverflow.com/questions/942312/iphone-app-add-voice-recognition)

我有一个文本字段和一个按钮。单击按钮时，我想识别用户的声音并将声音转换为文本。我该如何实现？

请任何人帮助我。

# c++ - CreateFile() 返回 INVALID_HANDLE_VALUE (C++)

> ID：12813677
> 
> 赞同：1
> 
> 时间：2012-10-10T06:59:20.310
> 
> 标签：c++, c, winapi

考虑：

```
void main()
{
    LPSTR FileName;
    FileName = "C:\\test2.wav";
    hFile = CreateFile((LPCWSTR)FileName, GENERIC_READ, 0, 0,
                       OPEN_EXISTING, FILE_ATTRIBUTE_ARCHIVE, 0);
    if (hFile == INVALID_HANDLE_VALUE)
    {
        cout << "INVALID_HANDLE_VALUE" << endl;
        return;
    }
} 
```

这个程序总是打印“INVALID_HANDLE_VALUE”。为什么？文件`C:\test2.wav`存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T07:04:50.020

您误解了铸造的工作原理。您对编译器说的是假装 FileName 是一个宽字符串，但事实并非如此，因此您的代码会失败。两种解决方案

1）使用正确的字符串（在您的情况下为宽字符串）

```
LPTSTR FileName;
FileName = _T("c:\\test2.wav");
hFile = CreateFile(FileName, GENERIC_READ, 0 , 0,
    OPEN_EXISTING, FILE_ATTRIBUTE_ARCHIVE, 0); 
```

2) 使用需要窄字符串的 CreateFile 版本（称为 CreateFileA）

```
LPSTR FileName;
FileName = "c:\\test2.wav";
hFile = CreateFileA(FileName, GENERIC_READ, 0 , 0,
    OPEN_EXISTING, FILE_ATTRIBUTE_ARCHIVE, 0); 
```

这是新手代码的一个共同特征，它在所有地方都可以使用。尽量避免投射，因为它通常只是隐藏错误（就像你的投射所做的那样）。如果您不了解演员表的工作原理，则尤其如此。不幸的是，如果没有一定数量的演员表，就不可能进行 Windows 编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:04:17.010

您不能只将多字节/ASCII/UTF-8 字符串转换为宽/UTF-16 字符串。你实际上必须转换它。尝试使用[`MultiByteToWideChar()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)转换它。谈论不同版本的其他答案`CreateFile`可能是最简单的，但以防万一您确实需要宽字符串，这可能很有用。

# javascript - preventDefault javascript 不会阻止 url 重定向

> ID：12813678
> 
> 赞同：0
> 
> 时间：2012-10-10T06:59:30.040
> 
> 标签：javascript, preventdefault

我的html是

```
<a class="delete" href="/FolderComment/delete/12">delete</a> 
```

我的js是

```
$("a .delete").click(function(e){

          //e.preventDefault();   --> tried that too
            var href = this.attr("href");
            $.post(
                href, {},
                function(data){
                    alert(data);
                }
            );
            return false;
        }); 
```

但它不起作用，页面被重定向。

这是一个[jsfiddle](http://jsfiddle.net/opmaster/PS5hH/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:04:00.660

您的选择器应该是`a.delete`- 注意空间不足。

正如所写的那样，您的回调处理程序甚至没有被调用，因为您的选择器正在寻找一个类的元素，该元素`.delete`来自*一个*，`<a>`而不是*具有*`<a>`该类的一个。

 *其次，出于安全原因，如果链接指向远程资源，您的浏览器可能不允许链接被劫持。

正如@NickW 指出的那样，`#`可以重定向页面本地链接（以 开头）。但是，如果您希望您的页面在*没有*JS 的情况下正常工作，那么您可能无法做到这一点。

在这种情况下，一个简单的解决方法是在页面加载时使用 JS 重写所有此类链接：

```
$('a[href^="/"]').attr('href', function(index, val) {
    return '#' + val;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:07:10.030

如果您`href`的前面带有#，您应该能够避免重定向。我已经分叉了你的[JS 小提琴](http://jsfiddle.net/qeXSa/1/)，并添加了来自 @Alnitak 的选择器更改。*

# windows - GetProcAddress 为 RegDeleteKeyEx 返回 NULL

> ID：12813679
> 
> 赞同：2
> 
> 时间：2012-10-10T06:59:32.873
> 
> 标签：windows, winapi, registry

我正在尝试为 32 位和 64 位操作系统实现注册表项的递归删除。由于没有为小于 XP x64 Professional 的操作系统定义**RegDeleteKeyEx**，因此我试图间接使用该功能。

**问题**:: 即使在 x64 上，**GetProcAddress()**也返回 NULL。

```
//Global Declarations 
typedef LONG (WINAPI * PFN_RegDeleteKeyEx)(HKEY hKey , LPCTSTR lpSubKey , REGSAM samDesired , DWORD Reserved );
PFN_RegDeleteKeyEx _RegDeleteKeyEx ;

//The code inside function
hAdvAPI32 = LoadLibrary(TEXT("Advapi32.dll"));
_RegDeleteKeyEx = (PFN_RegDeleteKeyEx)GetProcAddress( hAdvAPI32, "RegDeleteKeyEx" );
if( _RegDeleteKeyEx == NULL )
     printf("NULL\n") ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:15:06.020

[`RegDeleteKeyEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724847%28v=vs.85%29.aspx)实际上不是一个函数 - 它是一个宏。根据您是否已`UNICODE`定义，宏将扩展为 MSDN 页面底部给出的实际函数名称：

```
RegDeleteKeyExW (Unicode) and RegDeleteKeyExA (ANSI) 
```

所以在你的情况下，你可能想要类似的东西

```
#ifdef UNICODE
    const char RegDeleteKeyExSymbol[] = "RegDeleteKeyExW";
#else 
    const char RegDeleteKeyExSymbol[] = "RegDeleteKeyExA";
#endif

_RegDeleteKeyEx = (PFN_RegDeleteKeyEx)GetProcAddress( hAdvAPI32, RegDeleteKeyExSymbol ); 
```

这将根据您自己的代码的编译方式（有或没有`UNICODE`定义）使用适当的符号名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:09:35.927

Windows 导出接受或返回字符串的任何函数的*两个*版本：一个采用 ANSI 字符串，另一个采用 Unicode 字符串。ANSI 版本`A`在函数名称后附加了一个，而 Unicode 版本有一个`W`（用于“宽”字符串）。The Old New Thing 有[一篇文章](http://blogs.msdn.com/b/oldnewthing/archive/2007/01/03/1404965.aspx)更详细地解释了这一点。

由于`RegDeleteKeyEx`有一个字符串参数，您需要添加`A`or`W`取决于您是否要传递 ANSI 或 Unicode 字符串，即您需要使用`RegDeleteKeyExA`or `RegDeleteKeyExW`。

此外，第三方 DLL 中的函数名称通常会根据调用约定以各种方式进行*修饰。*（但是，Windows 系统 DLL 不使用名称修饰，因此您不需要在这里考虑这一点。）同样，旧新事物有一个[很好的解释](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/12/57833.aspx)。

您可以使用Visual C++ 附带的程序列出DLL 的所有导出（它将显示您需要传递给的实际函数名称`GetProcAddress`） ：[`dumpbin`](http://msdn.microsoft.com/en-us/library/c1h23y6c%28VS.71%29.aspx)

```
dumpbin /exports mydll.dll 
```

# c++ - 如何在 QThread 中使用 QTimer？

> ID：12813681
> 
> 赞同：0
> 
> 时间：2012-10-10T06:59:38.947
> 
> 标签：c++, qt4

我有一个类，QObject 的一个子类。我正在 QThread 中为该类创建一个实例。我想在课堂上使用 QTimer。但是计时器没有启动，因为调用者线程是一个唤醒者线程。我怎样才能实现解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:24:21.357

好吧，你能不能在一些生活在主线程中并且是类成员的辅助对象中创建一个槽，并调度计时器创建并从你的类开始（并可选地检查当前线程是否不是事件循环从那时起在那里启动计时器是安全的）？因此，当您需要创建计时器时，您只需在主线程中向您的辅助对象发出信号，它应该可以工作。

# php - 在 mySQL 中将 jSonString 转换为 PHP

> ID：12813686
> 
> 赞同：0
> 
> 时间：2012-10-10T06:59:48.337
> 
> 标签：php, mysql, json

我从 iOs 设备发送一个 jsonString

看起来像这样：

```
2012-10-10 08:50:32.011 Appname[4049:c07] Post String =http://www.yourdomain.nl/locatie.php?data=%7B%22id%22:%220612833397%22,%22longitude%22:%22-143.406417%22,%22latitude%22:%2232.785834%22,%22timestamp%22:%2210-10%2007:56%22%7D 
```

那是我 NSLog 它的时候...

所以 PHP 文件看起来像这样：

```
<?php

$id = $_POST['id'];
$longitude = $_POST['longitude'];
$latitude = $_POST['latitude'];
$timestamp = $_POST['stringFromDate'];

$link = mysql_connect('server', 'sbla', 'bla')
or die('Could not connect: ' . mysql_error());

mysql_select_db('md267052db227433') or die('Could not select database');

// Performing SQL query
$query = "INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES (NULL," .   $longitude . "," . $latitude . "," .$timestamp." )";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?> 
```

当我转到 yourdomain.nl/locatie.php 时，它说它是空的，但这应该是因为我从我的 iOs 应用程序发送数据。

我希望我可以看到 id、经度、纬度和时间戳的 jSonstring 并将它们放入 mySQL 数据库中，但奇怪的是它不起作用。

我知道来自 iOs 设备的字符串已发送。

对不起，我的英语不好，

任何帮助，将不胜感激。

**编辑**

像这样发送：

```
- (void)myFuntionThatWritesToDatabaseInBackgroundWithLatitude:(NSString *)latitude longitude:(NSString *)longitude date:

(NSString *)stringFromDate {

_phonenumber = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

NSMutableString *postString = [NSMutableString stringWithString:kPostURL];
NSString*jsonString = [[NSString alloc] initWithFormat:@"{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}",_phonenumber, longitude , latitude, stringFromDate];

[postString appendString:[NSString stringWithFormat:@"?data=%@", jsonString]];
[postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];

[[NSURLConnection alloc] initWithRequest:request delegate:self ];
NSLog(@"Post String =%@", postString);

//    LocationTestViewController*locationTestViewController = [[LocationTestViewController alloc]init];
//    phonenumber = locationTestViewController.telefoonnummer;
NSLog(@"telnr : %@", _phonenumber);

NSURLResponse* response;
NSHTTPURLResponse* httpResponse;
NSError* error;
NSData* responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString* stringResponse = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];

httpResponse = (NSHTTPURLResponse*) response;
int statuscode = [httpResponse statusCode];

if (statuscode == 200)
{
    NSLog(@"Verstuurd");
    // Handle the response here if needed
}
else
{
    NSLog(@"niet verstuurd: %@", stringResponse);
    // Show some form of alert here if needed
}
// release all objects saved to memory
[request release];
request = nil;
[stringResponse release];
stringResponse = nil;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:06:35.167

首先，这不是 JSON，可能是它的 POST FORMDATA。其次，当您打开链接（使用浏览器）时 - 它变成了一个 GET 请求，而不是一个 POST。从 iOS 设备发出请求时，尝试将 $_POST 记录在文件中。像这样（PHP文件的第一行）：

```
file_put_contents('dump.txt', "POST: \n" . print_r($_POST, true) . "\n\n\n GET: \n" . print_r($_GET, true)); 
```

然后执行几个请求以查看同一目录中“dump.txt”中的结果。

此外，查询应该是这样的（如果我猜对了你的列）：

```
$query = sprintf("INSERT INTO locatie (longitude, latitude, timestamp) VALUES ('%s', '%s', '%d')", mysql_real_escape_string($longitude), mysql_real_escape_string($latitude), (int)$timestamp)  ; 
```

PHP 手册不鼓励使用`mysql_real_escape_string`虽然 - 更多关于这里：

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

**编辑：**

我的错误，所以发布的数据实际上是 JSON 字符串 - 试试这个：

```
if (isset($_POST['data'])) {
    $data = json_decode($_POST['data']);
    $latitude = $data['latitude'];
    $longitude = $data['longitude'];
    $timestamp = $data['stringFromDate'];
    // rest of your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:02:28.570

你做了一个 GET 请求而不是 POST。因此，您必须使用`$_GET`而不是使用`$_POST`.
您还需要首先`json_decode`从字符串中获取值。
您还可以使用 GET 而不使用 JSON 发送所有值。为此，您只需发送多个 GET 参数，例如`http://example.org/index.php?key1=parameter1&key2=parameter2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:10:25.823

像这样试试。

```
<?php

$id = $_POST['id'];
$longitude = $_POST['longitude'];
$latitude = $_POST['latitude'];
$timestamp = $_POST['stringFromDate'];

$datarray['id']=$id;
$datarray['longitude']=$longitude;
$datarray['latitude']=$latitude ;
$datarray['stringFromDate']=$timestamp;

$link = mysql_connect('db.babboemedia.nl', 'md267052db227433', 't7cjxOm3')
or die('Could not connect: ' . mysql_error());

mysql_select_db('md267052db227433') or die('Could not select database');

// Performing SQL query
$query = "INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES (NULL," .   $longitude . "," . $latitude . "," .$timestamp." )";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

// Free resultset
mysql_free_result($result);

if($result)
{
    $datarray['status']="OK";
}
else
{
    $datarray['stringFromDate']="NOTOK";
}

// Closing connection
mysql_close($link);

header('Content-Type: application/json');
json_encode($datarray);

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T07:09:25.590

您需要检查`$_POST['data']`然后剥离斜线。然后解析 JSON。

```
<?php
$json=json_decode(stripslashes($_POST['data']));
//print_r($json);
$id = $json['id'];
$longitude = $json['longitude'];
$latitude = $json['latitude'];
$timestamp = $json['stringFromDate'];
//the rest of your code goes here 
```

# git - GitHub 中的 fork 和 clone 是什么？

> ID：12813688
> 
> 赞同：0
> 
> 时间：2012-10-10T07:00:07.253
> 
> 标签：git, github

> **可能重复：**
> [Git fork 是 git clone？](https://stackoverflow.com/questions/6286571/git-fork-is-git-clone)

任何人都可以帮助我理解 fork 和 clone 背后的概念吗？，我知道 clone 做了什么，但想要更详细的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:11:35.147

克隆检查整个存储库以供本地使用（想法是在某个时候将更改推送回主服务器），而分叉并不一定意味着代码将被推送回主服务器。如果修复它的开发人员确实需要修复，则可能不接受 fork 上的修复并合并到 master 中，并且项目的分叉版本仍然可以对其进行开发。

# java - 突变器在这里适用吗？

> ID：12813690
> 
> 赞同：0
> 
> 时间：2012-10-10T07:00:11.190
> 
> 标签：java, abstract-class, getter-setter

我有这个问题，这是给我的图表，我已经设法提出了一个解决方案，但实际问题本身是要求我实现 get 和 set 方法，我不确定它们是否适用于这里,

![在此处输入图像描述](../Images/85e40b2d0107d60de3222dc465832007.png)

![在此处输入图像描述](../Images/57f5c7a4cf3dbc88b5f911ccff5799bb.png)

这只是一个有点长的问题的一部分，不想让它看起来像我希望用户在这里通过粘贴整个问题来完成我的作业，但只是一个疑问，如果确实可以实现 get 和 set 方法怎么能我这样做？

所以这是我的代码，到目前为止我所拥有的

```
public abstract class Property 
{
    private static int autonumber = 0, propID,area,price;
    private String address;

    public Property(String addr, int area,int price)
    {
        autonumber++;
        propID = autonumber;
        this.area = area;
        this.price = price;
    }
     public abstract double calculateMiscFee();

     public int getArea()
     {
         return area;
     }

     public void setArea()
     {

     }
//     public double calculateMiscFee()
//     {
//         return 100*
//     }
} 
```

这是我拥有的最新代码

```
public abstract class Property 
{
    private static int autonumber = 0;
    private int propID;
    private int area;
    private double price;
    private String address;
    private int district;

    public Property(String addr, int area,double price, int district)
    {
        autonumber++;
        propID = autonumber;
        this.area = area;
        this.price = price;
        this.district = district;
        this.address = addr;

    }
     public abstract double calculateMiscFee();

     public int getArea()
     {
         return area;
     }

     public void setArea(int a)
     {
         area = a;
     }

      public String getAddress()
     {
         return address;
     }

     public void setAddress(String add)
     {
         address = add;
     }

     public double getPrice()
     {
         return price; 
     }
     public  void setPrice(double p) 
     { 
          price = p;
     }

     public int getDistrict()
     {
         return district;
     }

     public  void setDistrict(int disc) 
     { 
          district = disc;
     }
//     public double calculateMiscFee()
//     {
//         return 100*
//     }

      public String toString()
      {

      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:52:24.987

propID、面积和价格不应该是`static`. `static`变量在类的所有实例之间共享，并且这些变量应该是每个实例，就像地址一样。

如果一个类声明了一个`abc`类型为 的变量`String`，则 getter 和 setter`abc`的形式如下所示：

```
public String getAbc() {
    return abc;
}

public void setAbc(String newAbc) {
    /* Potentially do some validation of the new value
     * For example make sure it's not null, or inside reasonable ranges
     * (A price shouldn't be negative, etc.)
     */
    abc = newAbc;
} 
```

`toString()`是一个已经存在于所有类中的方法，但您仍然可以覆盖它。例如：

```
class MyClass {
    private int myInt;

    public MyClass(int myInt) {
        this.myInt = myInt;
    }

    @Overrides
    public String toString() {
        return "MyClass with value " + myInt;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:12:17.950

因为您需要在此类之外使用的所有私有字段的 getter 和 setter，例如客户需要 propertyID。因此，您必须为 propertyID 编写 getter 和 setter。希望这能满足你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:30:25.443

您的属性必须单独声明，例如

`private static int autonumber = 0,
private static int propID = 0;
private static int area = 0;
private static int price = 0;` 

**然后通过仅附加 get 或 set 并将变量的第一个字母大写来**添加 getter 和 setter 。像这样

`getAutonumber
setAutonumber` 等等

最后，如果它是一个 getter，该方法应该返回不带参数的 int。如果它是一个 setter，该方法应该返回 void 和一个 int 参数。

像这样：

`public static int getAutoNumber() { return autonumber; }
public static void setAutoNumber(int an) { autonumber = an; }` 

 `public static int getPropID() { return propID; }
public static void setPropID(int pi) { propID = pi; }

public static int getArea() { return area; }
public static void setArea(int a) { area = a; }` 

`public static int getPrice() { return price; }
public static void setPrice(int p) { price = p;}`

# clojure - 有没有办法在clojure中获取手表的所有键

> ID：12813695
> 
> 赞同：7
> 
> 时间：2012-10-10T07:00:26.667
> 
> 标签：clojure

如果有一个原子：

```
(def a (atom {})) 
```

搭配以下手表套装

```
(add-watch a :watcher println)
(add-watch a :watcher2 println) 
```

有这样的功能吗？

```
(get-watches a)
;; => [:watcher :watcher2] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T07:24:58.370

`(atom {})`创建一个`clojure.lang.Atom`扩展抽象类[clojure.lang.ARef](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java)的类型的对象，该类实现[clojure.lang.IRef](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IRef.java)接口。IRef 声明了在[ARef](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java#L65)中实现的方法[getWatches](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IRef.java#L21)。

这是解决方案：

```
(def a (atom {}))
(add-watch a :watcher println)
(println (-> a .getWatches keys)) 
```

奇怪的是`clojure.core`没有`get-watches`。我们得到的镜像`add-watch`实现：

```
(defn get-watches 
  "Returns list of keys corresponding to watchers of the reference."
  [^clojure.lang.IRef reference] 
  (keys (.getWatches reference))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-22T01:18:40.657

Ivan 的回答非常适合 JVM 上的 Clojure。以下是在 ClojureScript 中的操作方式：

`(keys (.-watches a))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T06:06:46.790

```
(:watches (bean a)) 
```

或者

```
(keys (:watches (bean a))) 
```

# chef-infra - 使用刀创建加密数据包时缺少私钥错误

> ID：12813698
> 
> 赞同：3
> 
> 时间：2012-10-10T07:00:30.253
> 
> 标签：chef-infra

我正在尝试创建一个加密的数据包来存储 Mysql 密码并按照[此处](http://wiki.opscode.com/display/chef/Encrypted+Data+Bags)的说明运行此命令：

```
knife data bag create --secret-file /tmp/my_data_bag_key passwords mysql 
```

这将返回一个错误：

> 错误：“您的私钥无法从 /Users/ClientName/.chef/ClientName.pem 加载”检查您的配置文件并确保您的私钥是可读的

现在那个位置没有 .pem 文件。但我真的需要一个吗？厨师独奏？如果我这样做，那么我如何创建这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:14:36.760

它的要点是原始帖子中指向加密数据包创建说明的 Opscode 链接不适用于 Chef-solo。[此处描述了](http://ed.victavision.co.uk/blog/post/4-8-2012-chef-solo-encrypted-data-bags)使加密数据包与 Chef-solo 一起使用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:15:23.583

此命令通过连接到厨师服务器来工作。如果您没有密钥，这将失败。但是，这个刀插件似乎可以满足您的需求：

[https://github.com/cparedes/knife-file](https://github.com/cparedes/knife-file)

注意，我没有使用过这个插件，但它看起来对我来说是正确的

# facebook - 在循环中调用 Graph API 的最佳方式

> ID：12813710
> 
> 赞同：1
> 
> 时间：2012-10-10T07:01:21.973
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

我们正在尝试使用获取用户的 FB ID 的 FB 数据制作一些报告。为了获取性别和位置，我们需要循环调用 Graph API [https://graph.facebook.com/User_ID](https://graph.facebook.com/User_ID)。

这需要很多时间，因为用户数量非常多。有没有其他方法可以提高执行速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:36:12.427

> 有没有其他方法可以提高执行速度。

有多种方法可以在一个请求中获取更多数据。

可能是最简单的：给 API 一个逗号分隔的 ID 列表，例如[http://graph.facebook.com/?ids=4,5](http://graph.facebook.com/?ids=4,5)

然后还有[批量请求](https://developers.facebook.com/docs/reference/api/batch/)，您可以将多个 API 调用放入一个 HTTP 请求中，这也大大加快了速度，因为通常 HTTP 请求是与 API 通信的最慢因素。

然后是 FQL，您还可以在其中一次请求多个 ID 的数据，使用`… WHERE id IN(…,…)`，甚至可以进行“多查询”。

# android - Android 应用程序退出主屏幕

> ID：12813717
> 
> 赞同：2
> 
> 时间：2012-10-10T07:02:01.723
> 
> 标签：android, process, exit, kill

我已经开发了 android 应用程序，菜单选项中有退出按钮。我想要退出应用程序并在按下退出按钮时进入主屏幕。为此，我使用了以下方法

1.`System.exit(0)`

2.`finish()`

3.`android.os.Process.killProcess(android.os.Process.myPid())`

4.`System.runFinalizersOnExit(true);`

这些所有方法都直接应用到我的第一页而不是主屏幕。那么我该怎么做呢？请帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T07:07:40.737

首先关闭一个 android 应用程序是不受欢迎的，因为后退按钮和主页按钮已经有点给你这个功能。但如果你需要，你可以这样做

当用户希望退出所有打开的活动时，他们应该按下一个按钮，该按钮会加载您的应用启动时运行的第一个活动。

```
 Intent intent = new Intent(getApplicationContext(), FirstActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.putExtra("EXIT", true);
    startActivity(intent); 
```

上面的代码清除了除第一个活动之外的所有活动。然后将此代码放入第一个活动的中，以在传递“**退出**”消息`onCreate()`时发出自毁信号。

 **```
 if (getIntent().getBooleanExtra("EXIT", false)) {
        finish();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:07:08.537

1）“退出”按钮是邪恶的。Android 中不需要它们。用户按下返回或主页。让安卓做导航。

2）永远不要使用 System.exit() 除非你有很好的理由并且你知道你在做什么。让 Android 做它自己的应用程序管理。

3）只需使用finish（）。这是关闭应用程序的文档化推荐方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T07:15:12.593

为了返回主屏幕，您可以使用以下代码：

```
// This you have to insert inside the exit button click event
    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 

//This is the onQuitPressed method

//to remove application from task manager
    public void onQuitPressed() {

        int pid = android.os.Process.myPid();
        android.os.Process.killProcess(pid);
    } 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T07:21:36.207

`System.exit(0)`应该可以工作，但不知道为什么它不能与您合作，替代解决方案是致电`Home Intent`，

它会在主屏幕上重定向到您，但它将您的应用程序保持在后台，因此下次启动应用程序时，它将从您上次离开的位置开始。

```
 Intent  intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            finish(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T07:51:05.847

这个解决方案有一个 hack。

使用该方法启动每个 Activity`startActivityForResult(intent, 1)`并覆盖一个方法`onActivityResult()`，然后在 onActivityResult() 中输入下面给出的代码

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == Activity.RESULT_CANCELED){
        setResult(Activity.RESULT_CANCELED);
        onBackPressed();
    }
} 
```

并为每个活动设置一个结果`onCreate()`

```
setResult(Activity.RESULT_OK); 
```

现在你要做的是你想要退出应用程序的 Activity 设置

```
setResult(Activity.RESULT_CANCELED); 
```

并调用 onBackpress 方法

```
onBackPressed(); 
```

希望这将帮助您并解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T07:13:10.143

在所有情况下，使用**第二个选项**，即`finish()`终止当前活动并开始另一个活动，即`StartActivity(new intent(this, whichActicityUwant.class)); then call finish();`

**第三个选项**用于**杀死**和**强制关闭**进入主屏幕的**应用程序。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-08T11:22:47.627

我知道我迟到了，但这就是我实现它的方式：在你想去其他片段/活动的片段中使用它。

```
@Override
    public void onDetach() {
        super.onDetach();
        YourFragment pass = new YourFragment();
        getActivity().getSupportFragmentManager().beginTransaction()
                .replace(R.id.container_body, pass)
                .addToBackStack("Your Fragment")
                .commit();
    } 
```

使用上述方法后，现在在您现在所在的位置使用此方法：

```
@Override
    public void onResume() {
        super.onResume();
        if(getView() == null){
            return;
        }
        getView().setFocusableInTouchMode(true);
        getView().requestFocus();
        getView().setOnKeyListener(new View.OnKeyListener() {
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_UP && keyCode == KeyEvent.KEYCODE_BACK){
                    Toast.makeText(getActivity(), "Exiting", Toast.LENGTH_SHORT).show();
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    return true;
                }
                return false;
            }
        });
    } 
```**

# c# - ffmpeg 给出大小为 0 的输出文件

> ID：12813720
> 
> 赞同：0
> 
> 时间：2012-10-10T07:02:10.333
> 
> 标签：c#, ffmpeg

我正在使用 ffmpeg 进行音频转换。我试图将录制的音频转换为 mp3 格式。我得到了文件，但大小为 0。谁能帮我解决这个问题？

这是我的代码：

```
 Process ffmpegProcess;
        string strInputFile;
        string strOutputFile;
        strInputFile = Page.MapPath("audio.wav"); 
        strOutputFile = Page.MapPath("audio.mp3"); 
        ffmpegProcess = new Process();

        string fileargs = " -i ";
        fileargs += "\"" + strInputFile + "\"";
        fileargs += " \"" + strOutputFile + "\"";
        ffmpegProcess.StartInfo.Arguments = fileargs;
        ffmpegProcess.StartInfo.FileName = Page.MapPath("ffmpeg.exe");
        ffmpegProcess.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:39:38.170

尝试这个：

```
 Process ffmpegProcess;
    string strInputFile;
    string strOutputFile;
    strInputFile = Page.MapPath("audio.wav"); 
    strOutputFile = Page.MapPath("audio.mp3"); 
    ffmpegProcess = new Process();

    string fileargs = " -i ";
    fileargs += "\"" + strInputFile + "\"";
    fileargs += "-ab 192 -f mp3";
    fileargs += " \"" + strOutputFile + "\"";
    ffmpegProcess.StartInfo.Arguments = fileargs;
    ffmpegProcess.StartInfo.FileName = Page.MapPath("ffmpeg.exe");
    ffmpegProcess.Start(); 
```

# ios - 缩放包含 OpenGL 上下文的 UIView

> ID：12813726
> 
> 赞同：0
> 
> 时间：2012-10-10T07:02:29.957
> 
> 标签：ios, opengl-es, core-animation, scaling

我的 UIView 包含一个 OpenGL 上下文，可以渲染视图上的所有内容。我想上下缩放 OpenGL 视图。到目前为止，我可以看到两种方法：

1.  在 UIView 上使用变换矩阵 self.transform = CGAffineTransformMakeScale(zoom,zoom);
2.  在我的 OpenGL 上下文中使用 glScalef

我喜欢方法#1，因为它允许我非常轻松地使用 CoreAnimations 进行缩放动画。方法 #2 似乎涉及更多代码，因为我需要自己为缩放设置动画（可能没什么大不了的）。

更具体地说，我的 OpenGL 视图最初以 90% 的大小呈现全屏纹理。当我使用方法 #1 放大时，我希望我的 OpenGL 纹理为 100%。但是，似乎我没有看到我应该看到的详细程度。方法 #1 似乎在我的 OpenGL 视图上使用插值，而不是进行底层 glScale 调用。

#1 和 #2 是等价的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:15:04.927

他们相差甚远。您的 GLView 的精度由您创建的渲染缓冲区的大小定义。您通常调用“fromDrawable”，它将创建与 UIView 大小相同大小的缓冲区（可以乘以也用于视网膜的内容比例）。当您调整或转换您的 UIView 时，您应该重新创建您的 GL 缓冲区，使其与视图大小相同（我建议不要经常这样做）。因此，如果可能，请尽量保持 GL 视图的大小相同。

所以对于#1，你缩放视图但保持缓冲区分辨率加上你仍在绘制你甚至不显示的部分，所以这是一件坏事。

至于＃2，你是对的，动画可能有点搞砸了自己做。如果您只使用比例和平移，您可以创建一些参数，例如，`float scaleFrom`在“draw”调用中，您可以说：`float scaleTo``float currentInterpolationFactor`

```
float currentScale = scaleFrom + (scaleTo-scaleFrom)*currentInterpolationFactor;
glScalef(currentScale, currentScale, currentScale);
currentInterpolationFactor += 1.0f/ANIMATION_DURATION_IN_FRAMES; 
```

其中 currentInterpolationFactor 从 .0f 开始，以 1.0f 结束。

您甚至可以将动画机制放在单独的线程上......可能......

另一个更通用的有趣机制是对矩阵本身进行插值：由于您可以获得当前矩阵 (ES1: `glGetFloatv(GL_MODELVIEW_MATRIX, mtr)`)，并且您可以根据相同的原理创建目标矩阵（动画将结束的位置），您可以简单地进行插值矩阵的每个组件（其中 16 个）与“currentScale”的方式相同。虽然这个原理可能工作得很好，但如果你旋转你的场景（最糟糕的是 180 度角）它看起来不会很好。

做矩阵动画插值的最好方法（如果你问我）是使用基向量：这意味着你需要对需要 2D 的女巫使用“LookAt”原则：“中心向量”和“右向量”或 3D： “位置向量”、“方向向量”和“向上向量”。（您将在网上找到如何从该向量创建矩阵）。至于它们的插值：“位置向量”具有从向量 A 到 B: 的线性插值`A' = A + (B-A)*interpolationFactor`。至于所有其他向量，它们需要极坐标插值，这意味着您需要找到它们的“起始角度”和“结束角度”并对它们使用线性插值并对它们的长度执行相同的操作。之后重新创建插值基向量并用它们创建当前矩阵。

现在考虑一下您将使用什么以及最终您将真正需要什么。这 3 种方法从最简单到最难，但也从不太动态到更动态。

# java - MasterCard API - 添加证书以请求后出错

> ID：12813732
> 
> 赞同：1
> 
> 时间：2012-10-10T07:02:44.417
> 
> 标签：java, oauth, 2-legged

MasterCard 使用 2-legged OAuth。准备好 OAuth 有效负载后，我将其添加到**授权**密钥的标题中。然后请求需要与证书一起发送。我在这一步遇到错误。

**[我已经根据https://developer.mastercard.com/portal/display/api/Locations+-+Sample+Code](https://developer.mastercard.com/portal/display/api/Locations+-+Sample+Code)**上提供的示例代码编写了我的代码

和示例密钥可在 [https://developer.mastercard.com/portal/display/api/OAuth+Validation](https://developer.mastercard.com/portal/display/api/OAuth+Validation)获得，

**我生成 SSL 证书的步骤：**

```
1\. Open the Firefox browser and enter the URL : https://sandbox.api.mastercard.com
2\. Click on the lock icon on the bottom of the browser.
3\. Click on View Certificate 
4\. Click on the Details tab
5\. Under "Certificate Hierarchy", click on the issuing CA (beside the arrow)
6\. Click on Export..
7\. Save the .PEM file (suppose with "openapi-sandbox.pem").
8\. Then using Java's keytool, Load this into a JKS keystore using a command like this: 
```

`keytool -import -alias openapi-samplecode-ssl-cert -file openapi-sandbox.pem -keystore openapi-samplecode.jks`

**准备请求的代码**

```
 URL url = new URL(httpsURL);
  con = (HttpsURLConnection) url.openConnection();
  con.setRequestMethod(method);
  con.setSSLSocketFactory(getSocketFactory());
  con.setDoOutput(true);
  con.setDoInput(true);
  con.addRequestProperty("Authorization", buildAuthHeaderString(params)); 
```

**以及处理证书文件的功能**

```
 private SSLSocketFactory getSocketFactory() 
  {
    KeyStore ks = KeyStore.getInstance("JKS");
    // get user password and file input stream
    char[] password = "prince".toCharArray();
    ClassLoader cl = this.getClass().getClassLoader();
    String location =  "D:\\DEV_HOME\\openapi-samplecode6.jks";
  //  String location =  "openapi-samplecode1.jks";
    System.out.println("location =" + location );
    InputStream stream = cl.getResourceAsStream(location);
    ks.load(stream, password);
   // stream.close();

    SSLContext sc = SSLContext.getInstance("TLS");
    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509");

    kmf.init(ks, password);
    tmf.init(ks);

    sc.init(kmf.getKeyManagers(), tmf.getTrustManagers(),null);

    return sc.getSocketFactory();
  } 
```

在此先感谢您的时间。:)

## 错误信息

> javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: 在 sun.security.ssl.SSLSocketImpl.fatal(Unknown Source) 在 sun.security.ssl.Alerts.getSSLException(Unknown Source) 在 sun 上找不到受信任的证书.security.ssl.Handshaker.fatalSE(Unknown Source) at sun.security.ssl.Handshaker.fatalSE(Unknown Source) at sun.security.ssl.ClientHandshaker.serverCertificate(Unknown Source) at sun.security.ssl.ClientHandshaker.processMessage （未知来源）sun.security.ssl.Handshaker.processLoop（未知来源）sun.security.ssl.Handshaker.process_record（未知来源）sun.security.ssl.SSLSocketImpl.readRecord（未知来源）sun.security .ssl.SSLSocketImpl.performInitialHandshake（未知来源）在 sun.security.ssl.SSLSocketImpl。sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source) at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection 的 startHandshake(Unknown Source)。 connect(Unknown Source) at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(Unknown Source) at mypack.MasterCardDemo.createOpenAPIConnection(MasterCardDemo.java:183) at mypack.MasterCardDemo.main(MasterCardDemo.java:64)由：sun.security.validator.ValidatorException：在 sun.security.validator.SimpleValidator.engineValidate(Unknown Source) 在 sun.security.validator.Validator 的 sun.security.validator.SimpleValidator.buildTrustedChain(Unknown Source) 找不到受信任的证书sun.security.ssl 上的 .validate(Unknown Source)。Sun.security.ssl.X509TrustManagerImpl.validate(Unknown Source) 在 sun.security.ssl.X509TrustManagerImpl.checkTrusted(Unknown Source) X509TrustManagerImpl.checkServerTrusted(Unknown Source)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T15:09:20.967

这确实是一个 SSL 问题，与 MasterCard 的 OAuth 关系不大。您需要说服 Java 信任[https://api.mastercard.com](https://api.mastercard.com)上的 SSL 证书。您将 OAuth 证书放在信任库中，而不是 MasterCard 证书中。比将密钥放在信任库中更好的解决方案是信任根 CA。在 Java 中，您可以通过使用默认套接字因子来做到这一点。替换此代码：

```
con.setSSLSocketFactory(getSocketFactory()); 
```

有了这个：

```
con.setSSLSocketFactory((SSLSocketFactory)SSLSocketFactory.getDefault()); 
```

# php - 按下按钮时运行linux命令php

> ID：12813733
> 
> 赞同：0
> 
> 时间：2012-10-10T07:02:48.773
> 
> 标签：php, ajax, linux, shell-exec

> **可能重复：**
> [从 PHP 运行 Linux 命令](https://stackoverflow.com/questions/8707040/running-linux-command-from-php)

我有脚本，它根据用户的选择组合了一些音频文件。当用户单击一个按钮时，我希望在 linux 中执行一个脚本并播放生成的结果文件。

在PHP中按下按钮时运行linux命令的方式是什么？

# android - Android memory used by ListView vs TableLayout

> ID：12813735
> 
> 赞同：0
> 
> 时间：2012-10-10T07:03:01.190
> 
> 标签：android, listview, memory, tableview, consumption

In an attempt at reducing total heap size of my app I was trying to change a TableLayout into a ListView.

The source list is an ArrayList which items containing a drawble, a text and a checkbox state. This array is entirely initialized beforehand.

Before opening the activity using either the ListView or TableLayout, heap size is about 7.5Mb

With the TableLayout it grows to 8.3Mb and doesn't grow higher With the ListView it grows to 8.1Mb initially and grows to 11.5Mb when scrolling through the list!

Why is the ListView consuming more when scrolling whereas it's supposed to reuse views? I was expecting that ListView will consume less and actually not grow when scrolling!?

Is the behavior I'm seeing normal or expected or am I missing something?

I've verified the ListAdapter does reuse views, here is an extract of the ListAdapter code. It contains the only new() in the getView() method.

```
private static class AppListAdapter implements ListAdapter
{
    WeakReference<MyActivity>   wr;
    ArrayList<AppInfo>      app_list;

    public AppListAdapter(MyActivity activity, ArrayList<AppInfo> list)
    {
        wr = new WeakReference<at_startup_apps>(activity);
        app_list = list;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        MyActivity activity = wr.get();
        if (sa == null)
            return null;

        AppInfo ai = app_list.get(position);

        LinearLayout ll;
        ImageView img;
        TextView new_txt;
        CheckBox cb;
        if (convertView == null)
        {
            ll = new LinearLayout(activity);

            img = new ImageView(sa);
            img.setScaleType(ScaleType.FIT_CENTER);
            ll.addView(img);

            new_txt = new TextView(activity);
            new_txt.setOnClickListener(activity.onTextClick);
            new_txt.setGravity(Gravity.CENTER_VERTICAL);
            new_txt.setPadding(4, 2, 4, 2);
            new_txt.setTextSize(activity.font_size + 2);
            ll.addView(new_txt);

            cb = new CheckBox(sa);
            ll.addView(cb);
        }
        else
        {
            Log.d(at_data.TAG, "Reusing view " + position);
            ll = (LinearLayout)convertView;
            img = (ImageView)ll.getChildAt(0);
            new_txt = (TextView)ll.getChildAt(1);
            cb = (CheckBox)ll.getChildAt(2);
        }
        ll.setId(position);

        img.setImageDrawable(ai.drawable);

        new_txt.setText(ai.name);

        new_txt.setId(position);

        cb.setOnCheckedChangeListener(null);
        if (!ai.frozen)
            cb.setChecked(true);
        cb.setOnCheckedChangeListener(sa.onCheckedListener);

        cb.setId(position);

        return ll;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:46:56.440

So i decided to test the behavior on 5 test devices, each tests were performed twice to ensure results accuracy.

From the results I'd say ListView improves performance and memory consumption only if enough items are to be displayed. With 300 or less it seemed not very useful for any improvements.

Beyond that the gain is immediately visible, both in term of performance and consumption.

The Iconia A500 is the only device on which the ListView consumed more when scrolling. Not sure why, but any results are reassuring ;)

On the Nexus ListView didn't seem to be effective, but couldn't redo the tests or test with more items.

On the S3, not sure what's going on either but apps are definitely consuming a lot for nothing!

All this doesn't solve my initial problem: saving heap memory space, while my lists rarely grows higher than 300 (all apps installed).

Tested HW acceleration on/off, no difference in results.

Iconia A500 4.0.3: list contains 180 items

```
TableLayout: it grows to 8.9Mb, 8.8Mb allocated
ListView: it grows to 8.3Mb, 8.2Mb allocated and then to 12.6Mb / 10.3 when scrolling! 
```

TF700 4.0.3: list contains 160 items

```
TabletLayout: 11.9Mb / 11.8Mb
ListView: 11.3Mb / 10.1Mb 
```

Galaxy S3 JB 4.1: list contains 365 items

```
TableLayout: 20.7 / 19.8
ListView: 19.1 / 18.3 
```

Galaxy Nexus JB 4.1: list contains 185 items

```
TableLayout: to 11Mb
ListView: to 13Mb 
```

Galaxy S 2.3.6: list contains 205 items

```
TabletLayout: 6.4 / 3.8
ListView: 6.0 / 3.4 
```

**Some tests with 10 times more items** Obviously TableLayout is very slow to initialize: a few seconds!

Galaxy S 2.3.6: list contains 2050 items

```
TabletLayout: 14.6 / 11.9
ListView: 6.0 / 3.4 
```

Galaxy S3 JB 4.1: list contains 3650 items

```
TableLayout: 20.7 / 19.8
ListView: 19.3 / 18.4 
```

Iconia A500 4.0.3: list contains 1800 items

```
TableLayout: 17.1 / 16.9
ListView: 8.1 / 7.9 then growing to 10.8 / 10.6 when scrolling 
```

# javascript - JavaScript 在不久的将来会变得不那么重要吗？

> ID：12813736
> 
> 赞同：-3
> 
> 时间：2012-10-10T07:03:00.990
> 
> 标签：javascript

我是一名初级 Web 开发人员，现在我也在开发 iOS 和 Android 应用程序。我只是想知道是否值得投入大量时间和精力来学习 JavaScript 和使用 JavaScript 进行开发。我不确定 HTML 5 或 CSS3 是否会完全取代 JavaScript，或者创建跨平台应用程序是否不需要 JavaScript？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:05:01.000

客观地说，部署的 JavaScript 虚拟机比任何其他 VM 技术都多。几乎所有具有 Web 浏览器的设备都能够执行 JavaScript。

仅由于这一事实，JavaScript 不太可能变得“不那么重要”。如果有的话，它的使用应该会继续增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:04:27.703

Java 脚本在所有情况下总是很重要。

# android - AsyncTask 未调用 onProgressUpdate 和 onPostExecute

> ID：12813742
> 
> 赞同：1
> 
> 时间：2012-10-10T07:03:42.937
> 
> 标签：android

我正在做一个 android 应用程序，它具有在我单击 imageview 时下载图像的功能。我已经使用 Asynctask 启动了一个新的下载线程。但是，永远不会调用 onProgressUpdate 和 onPostExecute 方法。我附上了我的代码。以下是我的主要活动代码：

```
public void onClick(View v) {
            String uri = "";
            if(!event.hasImage1())
            {
                uri = Configuration.SERVER_IP + "/" +event.getImgLink1();
                ImageDownloadTask task = new ImageDownloadTask(imageView1, StaffViewEventActivity.this);
                task.execute(uri);  
            }
        }
    }); 
```

然后这是我的 Asyntask 类代码：

```
public class ImageDownloadTask extends AsyncTask<String, Integer, Bitmap> {

private static String TAG = "ImageDownloadTask";
private ImageView imageView;
private StaffViewEventActivity activity;

@Override
protected Bitmap doInBackground(String... params) {
    Log.i(TAG, "doInBackground:" + params[0]);
    HttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(params[0]);
    InputStream is = null;
    ByteArrayOutputStream baos = null;
    try {
        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        long length = httpEntity.getContentLength();
        Log.i(TAG, "start downloading image");
        is = httpEntity.getContent();
        if (is != null) {
            baos = new ByteArrayOutputStream();
            byte[] buf = new byte[128];
            int read = -1;
            int count = 0;
            while ((read = is.read(buf)) != -1) {
                baos.write(buf, 0, read);
                count += read;
                publishProgress((int)(count * 1.0f / length));
            }

            byte[] data = baos.toByteArray();
            Bitmap bit = BitmapFactory.decodeByteArray(data, 0,  

                             data.length);
            Log.i(TAG, "finish downloading image");
            return bit;
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (baos != null) {
                baos.close();
            }
            if (is != null) {
                is.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return null;
}

public ImageDownloadTask(ImageView imageView, StaffViewEventActivity activity)
{
    this.imageView = imageView;
    this.activity =activity;
}

@Override
protected void onProgressUpdate(Integer... progress) {
    Log.i("DownloadImgTask", "progress:" + progress[0]);
    //photoView.setProgress(progress[0]);                
}

@Override
protected void onPostExecute(Bitmap result) {
    Log.i(TAG, "onPostExecute");
    super.onPostExecute(result);
    imageView.setImageBitmap(result);
    activity.updateImageStatus(imageView.getId());
}

@Override
protected void onCancelled() {
    Log.i(TAG, "DownloadImgTask cancel...");
    super.onCancelled();
}

} 
```

doInBackground 方法正在运行，我可以通过 task.execute(uri).get(); 获取图像 但我无法调用我的 onProgressUpdate 和 onPostExecute。any1 可以帮我解决这个问题，非常感谢。

# javascript - Javascript GeoLocation中的变量范围不起作用

> ID：12813749
> 
> 赞同：0
> 
> 时间：2012-10-10T07:04:11.433
> 
> 标签：javascript, scope

这是一个非常简单的问题，但无法解决，即 javascript 中 geoLocation 值的变量范围不起作用。这是我的代码：

```
 <script type="text/javascript">

        var glat;
        var glng;
        var test = "Hiii";
    function call(){
                var lat;
                var lng;
                var geocoder = new google.maps.Geocoder();
                var address = "Delhi";
                geocoder.geocode( { 'address': address}, function(results, status) {

                if (status == google.maps.GeocoderStatus.OK) {
                    lat = results[0].geometry.location.lat();
                    lng = results[0].geometry.location.lng();
                    } 

            glat = lat;
            glng = lng;
            alert("In: "+glat + glng+ "Test: "+test);
            //All Values Displayed Fine..
            }); 
        alert("OUT: "+glat + glng+ "Test: "+test);
        //glat and glng displayed as undefined..

    }
</script> 
```

为什么，OUT 警报中的值不显示..?? 我该如何解决这个..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:17:23.833

因为`geocoder.geocode([object],[callback]);`将函数作为第二个参数，该参数被*异步*调用：因此在请求完成之前不会设置`glat`和`glng`变量，并返回回调函数。您的代码段的基本流程是这样的：

```
declare variables
declare function [call]
    local variables for function
    make async request
    alert "out" + glat + glen //Just after request is sent, not after it's completed
    [call] returns
//time passes
       on successful completion of request://<--refs back to request set in [call]
           set variables glat and glng
           alert "In" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:20:16.127

获取地理信息是一个异步过程，您应该通过回调来完成这项工作。

***例子：***

```
function call(address, callback) {
    new google.maps.Geocoder().geocode({
        'address': address
    }, function (results, status) {
        var lat, lng;
        if (status == google.maps.GeocoderStatus.OK) {
            lat = results[0].geometry.location.lat();
            lng = results[0].geometry.location.lng();
        }
        callback(lat, lng);
    });
}

//usage:
call("Delhi", function (glat, glng) {
    // if you still get undefined, it means the status is not OK.
    alert("OUT: " + glat + glng);
}); 
```

# c# - 避免在 Windows 窗体中闪烁？

> ID：12813752
> 
> 赞同：9
> 
> 时间：2012-10-10T07:04:17.010
> 
> 标签：c#, winforms, buffer

双缓冲不适用于组合框。有没有其他方法可以避免在 Windows 窗体中闪烁？

我有一个窗口窗体，其中包含多个面板。根据我的菜单选择，我一次只显示一个面板。

我有一个图标面板、一个标题面板和组合框。根据该组合框的选定项目，gridview1 和 2 正在填充。当我使用键盘向下箭头快速选择组合框项目时，图标面板和标题面板总是在重新绘制。我需要保持两者不变。这两个面板在我更改组合框选定索引时产生一些闪烁效果（即，它们正在闪烁或闪烁）。有什么办法可以避免这种闪烁。？我尝试在表单构造函数和表单加载事件中启用双缓冲。请帮忙..............

```
InitializeComponent();
                this.SetStyle(ControlStyles.DoubleBuffer, true);
                this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
                this.SetStyle(ControlStyles.UserPaint, true);
                this.SetStyle(ControlStyles.SupportsTransparentBackColor, false);
                this.SetStyle(ControlStyles.Opaque, false);
                this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
                this.SetStyle(ControlStyles.ResizeRedraw, true); 
```

我在表单构造函数和表单加载事件中尝试了这段代码

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-10T10:13:42.073

另一个解决方案：

```
//TODO: Don't forget to include using System.Runtime.InteropServices.

internal static class NativeWinAPI
{
    internal static readonly int GWL_EXSTYLE = -20;
    internal static readonly int WS_EX_COMPOSITED = 0x02000000;

    [DllImport("user32")]
    internal static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32")]
    internal static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);
} 
```

您的表单构造函数应如下所示：

```
public MyForm()
{
    InitializeComponent();

    int style = NativeWinAPI.GetWindowLong(this.Handle, NativeWinAPI.GWL_EXSTYLE);
    style |= NativeWinAPI.WS_EX_COMPOSITED;
    NativeWinAPI.SetWindowLong(this.Handle, NativeWinAPI.GWL_EXSTYLE, style);
} 
```

在上面的代码中，您可能会更改`this.Handle`为类似`MyFlickeringPanel.Handle`

您可以在此处阅读更多相关信息：[Extended Window Styles](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx "扩展窗口样式")和此处：[CreateWindowEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx "CreateWindowEx")。

> 设置 WS_EX_COMPOSITED 后，窗口的所有后代都使用双缓冲从下到上绘制顺序。自下而上的绘制顺序允许后代窗口具有半透明（alpha）和透明度（颜色键）效果，但前提是后代窗口也设置了 WS_EX_TRANSPARENT 位。双缓冲允许在不闪烁的情况下绘制窗口及其后代。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-03T07:06:11.627

```
 protected override CreateParams CreateParams
    {
        get
        {
            CreateParams handleParam = base.CreateParams;
            handleParam.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED       
            return handleParam;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T07:20:19.263

**解决方案#1：**在添加项目之前
使用。`ComboxBox.BeginUpdate()`这将防止每次将项目添加到列表时`Control`重新绘制。`ComboBox`添加项目后，您可以使用`ComboBox.EndUpdate()`重新绘制。

**解决方案#2**

```
private void EnableDoubleBuffering()
{
    this.SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.UserPaint | ControlStyles.AllPaintingInWmPaint, true);
} 
```

# cuda - Cuda 共享内存在 Nsight 中显示为寄存器

> ID：12813758
> 
> 赞同：1
> 
> 时间：2012-10-10T07:04:26.463
> 
> 标签：cuda, shared-memory, nsight

我声明了共享内存，并尝试使用 Visual Studio 2010 的 Nsight 2.2 对其进行跟踪。我将 CUDA 4.2 与 quadro 5000 一起使用。

在我的 kernel.cu 中：

```
extern __shared__ ushort2 sampleGatheringSM[]; 
```

在我调用内核的函数中：

```
sampleGathering_SM_size =dimBlock.x*dimBlock.y*4*sizeof(ushort2)*2; // = 10240
sampleGatheringKernel<<<dimGrid, dimBlock, sampleGathering_SM_size >>>(dev_image, dev_gradient, width, height); 
```

当我查看 Nsight 上的 analisys 活动然后“CUDA Launches”时，它告诉我：

*   每个块分配的寄存器：10240
*   每个块分配的共享内存：0
*   块限制原因：寄存器

我是否正确分配了共享内存？我不明白如何分配寄存器。

编辑：

它还告诉我：

*   每个线程注册：32
*   每个块的动态共享内存：0
*   每个块的静态共享内存：0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:40:46.100

动态共享内存的声明是正确的。Nsight 2.2 分析跟踪报告有一个只发生在 CUDA 跟踪活动的错误。**使用Nsight** |选项运行的分析跟踪活动 **选项**| **分析**| **CUDA 内核跟踪模式**=**序列化**和分析探查器 CUDA 活动显示正确的值。此错误将在 Nsight 的下一个版本中修复。

# java - 使用表单输入填充电子邮件 Eclipse Android

> ID：12813759
> 
> 赞同：4
> 
> 时间：2012-10-10T07:04:26.603
> 
> 标签：java, android, android-intent

我是编码的新手，这是我的第一个应用程序，我想用我的表单中的条目填充电子邮件的正文。我整天都在努力让它工作，只是还没弄清楚，任何帮助将不胜感激。控制台中的日志条目反映了表单输入，但未填充电子邮件。提前致谢，

这是我到目前为止的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/scrollView1"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/appDiscription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/discription_text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Spinner
        android:id="@+id/employeeSpinner"
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:entries="@array/employeeSpinner"
        android:prompt="@string/employeeSpinner" />

    <Spinner
        android:id="@+id/jobTypeSpinner"
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:entries="@array/jobTypeSpinner"
        android:prompt="@string/jobTypeSpinner" />

    <EditText
        android:id="@+id/jobDateText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/job_date_text"
        android:inputType="date" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/clientText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/client_text"
        android:inputType="textPersonName" />

    <EditText
        android:id="@+id/arrivalText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/arrival_text"
        android:inputType="time" />

    <EditText
        android:id="@+id/departureText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/departure_text"
        android:inputType="time" />

    <EditText
        android:id="@+id/assignmentText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/assignment_text" 
        android:inputType="textPersonName"/>

    <EditText
        android:id="@+id/notesText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/notes_text"
        android:inputType="textMultiLine" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="onClick"
        android:text="@string/submit_button" />
 </LinearLayout> 
```

* * *

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.Spinner;

public class AssignmentTracker extends Activity {

Spinner employeeSpinner;
Spinner jobTypeSpinner;
EditText clientText;
EditText jobDateText;
EditText arrivalText;
EditText departureText;
EditText assignmentText;
EditText notesText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    employeeSpinner = (Spinner) findViewById(R.id.employeeSpinner);
    jobTypeSpinner = (Spinner) findViewById(R.id.jobTypeSpinner);
    clientText = (EditText) findViewById(R.id.clientText);
    jobDateText = (EditText) findViewById(R.id.jobDateText);
    arrivalText = (EditText) findViewById(R.id.arrivalText);
    departureText = (EditText) findViewById(R.id.departureText);
    assignmentText = (EditText) findViewById(R.id.assignmentText);
    notesText = (EditText) findViewById(R.id.notesText);

}
public void onClick(View v) {
    String employeeType = employeeSpinner.getSelectedItem().toString();
    String jobType = jobTypeSpinner.getSelectedItem().toString();
    String nameText = clientText.getText().toString();
    String dateText = jobDateText.getText().toString();
    String arrivalType = arrivalText.getText().toString();
    String departureType = departureText.getText().toString();
    String assignText = assignmentText.getText().toString();
    String noteText = notesText.getText().toString();

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "Daily Worksheet");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Employee:"
            + employeeSpinner.getSelectedItem().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Job Type:"
            + jobTypeSpinner.getSelectedItem().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Date:"
            + jobDateText.getText().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Client:"
            + clientText.getText().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Arrival Time:"
            + arrivalText.getText().toString());

    emailIntent.putExtra(android.content.Intent. EXTRA_TEXT,
            "Departure Time:" + departureText.getText().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Assignment:"
            + assignmentText.getText().toString());

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Notes:"
            + notesText.getText().toString());
    emailIntent.setType("plain/text");
    startActivity(emailIntent);

    Log.d("AssignmentTracker", "onClicked " + employeeType);
    Log.d("AssignmentTracker", "onClicked " + jobType);
    Log.d("AssignmentTracker", "onClicked " + nameText);
    Log.d("AssignmentTracker", "onClicked " + dateText);
    Log.d("AssignmentTracker", "onClicked " + arrivalType);
    Log.d("AssignmentTracker", "onClicked " + departureType);
    Log.d("AssignmentTracker", "onClicked " + assignText);
    Log.d("AssignmentTracker", "onClicked " + noteText); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:10:23.933

您只能设置电子邮件地址、主题和正文等字段。

您可以从您拥有的字段中编写正文文本并如下发送。

```
try {
        final Intent intent = new Intent(android.content.Intent.ACTION_SEND);
        intent.setType("plain/text");
        if (recipient != null)  intent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{to});
        if (subject != null)    intent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        if (message != null)    intent.putExtra(android.content.Intent.EXTRA_TEXT, message);

        startActivity(Intent.createChooser(intent, "Send mail..."));

    } catch (ActivityNotFoundException e) {

    } 
```

# c - 关于整数内存分配

> ID：12813761
> 
> 赞同：1
> 
> 时间：2012-10-10T07:04:29.297
> 
> 标签：c, unix, integer, 32bit-64bit, biginteger

如果分配给整数的内存在任何语言中都有限制（比如 C 中的 2 个字节或 4 个字节或 8 个字节）。使用 32 位或 64 位编译器在 32 位或 64 位机器上编译代码有什么关系。如果这真的是微不足道的问题，请原谅我。但请留下答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:09:56.783

如果您使用的是固定大小的整数类型（如`int8_t`或`int16_t`），那么您是针对 32 位还是 64 位平台并不重要。

重要的一件事是指针的大小。面向 32 位架构时，所有指针都是 32 位的，面向 64 位架构时是 64 位的。

在 . 中存储指针值过去是相当普遍的`int`，尽管出于可移植性的原因，这种做法已经变得非常不受欢迎，而 32/64 位的情况就是一个很好的例子。如果您将指针存储在 中`int`，那么您的代码将在 64 位架构上调用未定义的行为，因为您截断了指针。当您要提取指针时，您可能会取消引用它可能会崩溃，或者（更糟糕的是）继续处理无效数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:05:30.593

您必须在 32 位和 64 位机器之间编译不同的可执行文件有几个原因 - int 的大小可能不是一个因素，或者它可能是一个因素，因为 C 标准只定义了最小值和相对大小 - 没有据我所知，int 的最大大小（只要它不长于 long）。

指针的大小是一个主要区别。编译器和链接器在 32 位和 64 位进程地址空间之间产生不同的可执行文件布局。运行时库不同，动态链接库（ UNIX 上的*共享对象*）必须共享相同大小的指针，否则它们无法与进程的其余部分交互。

为什么使用 64 位？64 位比 32 位有什么优势？主要优点是指针的最大大小，因此是进程地址空间。在 32 位上是 4GB，在 64 位上是 16EB（大约 16,000 TB）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:09:25.197

如果您查看[此页面](http://en.wikipedia.org/wiki/C_data_types#Basic_types)，您可以看到 C 中的基本类型具有一定的保证最小大小。因此，您将找不到`int`2 位的兼容 C 实现，它必须至少为 16。

平台之间的差异使得[移植](http://en.wikipedia.org/wiki/Porting)软件成为它经常遇到的有趣挑战。

如果您的代码*假定*基本数据类型的内容不能保证为真（例如，执行以下操作的代码：）`int x = 0xfeedf00d;`，那么该代码将不可移植。当在与假设不匹配的平台上编译时，它将以各种通常难以预测的方式崩溃。例如，在一个`int`16 位的平台上，上述代码将`x`设置为与程序员预期不同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:16:18.973

在大多数情况下，字长会影响性能和堆栈使用。对于给定的架构，使用任何字长都是最快的。如果您定义两个 32 位整数，一个接一个，在 64 位机器上，一个将在字边界上，而另一个则不在。将字边界上的内容放入寄存器所需的处理比不在字边界上的内容要少。另一方面，如果您在 32 位机器上定义了一个 64 位整数，则需要两次获取来获取这两个字以及一些时髦的寄存器操作才能对其执行整数运算。最后一部分与堆栈有关。堆栈总是由单词组成。如果机器的字长是 32 位，堆栈将是 32 位值的堆栈，而在 64 位机器上它们是 64 位值。

如果您在编译器中选择字对齐，它会自动将所有变量放在字边界上。这要快得多，但会占用更多空间。除非你真的需要空间，否则你应该去表演。并不是说它在 CISC 架构上有那么大的不同。在 RISC 上，它产生了巨大的变化。

这有帮助吗？

# c++ - 非常简单的 C++ 基础代码

> ID：12813765
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:04:43.000
> 
> 标签：c++

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [为什么这个函数返回垃圾值](https://stackoverflow.com/questions/12042538/why-does-this-function-return-garbage-value)

为什么这个简单的代码会返回垃圾？

```
char *output()
{
    char o[2] = "A";
    return o;
}

int main()
{
    std::cout << output(); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:05:38.860

因为你返回一个指向无效内存的指针——返回`o`时被破坏`output`。

你有几个选择：

*   动态分配内存（使用`malloc`），复制`"A"`到这个内存并返回它的地址
*   直接返回字符串文字：`return "A";`

PS当然，你可以使用`std::string`，你不会有这个问题。或使用输入/输出参数，而不是返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:11:14.287

o 是的局部变量，`output()`因此它仅在函数内部具有作用域和生命周期。并且当函数返回一个内存地址时，它被删除的内存地址被返回。

如果它是返回的值，则由于“按值返回”方法，程序将可以工作。

如果您需要正确的输出而不是默认内存说明符，则`auto`需要使用其他东西，例如内存分配`static`或`extern`动态内存分配。

# c# - windows phone mango 中的 Matrix xmpp SDK，即使应用程序在后台运行，也希望通知用户有新的聊天消息

> ID：12813766
> 
> 赞同：3
> 
> 时间：2012-10-10T07:04:44.200
> 
> 标签：c#, matrix, xmpp, windows-phone-7.1

我正在使用 MatriX xmpp 库进行聊天。当我的应用程序在前台运行时它工作正常，但是即使我的应用程序在后台，我也想通知用户新的聊天消息。这可能吗？根据下面的链接，它可能是可能的，但我不知道如何做到这一点。

```
http://www.ag-software.de/2011/05/25/windows-phone-mango/ 
```

如果您对此问题有解决方案，请告诉我。

# erlang - erlang:now/0 手册上的小困惑

> ID：12813767
> 
> 赞同：1
> 
> 时间：2012-10-10T07:04:47.133
> 
> 标签：erlang

> 返回元组 {MegaSecs, Secs, MicroSecs}，它是自 1970 年 1 月 1 日 00:00 GMT（零小时）以来经过的时间，假设底层操作系统支持这一点。否则，将选择某个其他时间点。还可以保证对该 BIF 的后续调用返回不断增加的值。因此，now() 的返回值可用于生成唯一的时间戳，**如果在快速机器上的紧密循环中调用它，则节点的时间可能会出现偏差。**

粗体字是什么意思？我有点困惑，因为我的英语不是很好:) 这是否意味着时间线以 45 度上升，或者是否意味着如果调用`erlang:now/0`过于频繁，节点的性能会下降？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:51:00.547

`erlang:now/0`被构建成它总是返回一个递增的数字（也就是说，`MicroSecs`总是保证会被 1 增加）。这很有用，因为它让您可以使用返回的值`now()`作为系统中的唯一 ID（至少在 VM 的一个会话期间）。

但是，这也意味着如果您运行足够快的循环（即，有时每个循环快于 1 微秒），您可能会“请求”比可用的微秒更多的微秒。所以你实际上会增加时间超过它的当前值！（当然，这是一件非常糟糕的事情）

# android - Listview 单击以在 ImageView 中显示图像

> ID：12813770
> 
> 赞同：3
> 
> 时间：2012-10-10T07:04:50.707
> 
> 标签：android, listview, imageview

我遵循本教程[http://wptrafficanalyzer.in/blog/android-lazy-loading-images-and-text-in-listview-from-http-json-data/](http://wptrafficanalyzer.in/blog/android-lazy-loading-images-and-text-in-listview-from-http-json-data/)。

我想知道，我如何单击列表视图项并在 imageview 中显示标志的图像

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T07:12:59.347

检查下面的代码它可能会帮助您单击列表视图项目。

我检查这个[链接](http://wptrafficanalyzer.in/blog/android-lazy-loading-images-and-text-in-listview-from-http-json-data/)。

我假设您知道自定义列表视图。

```
 public class ListViewAdapter_test extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter_test(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return a_product_id.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            // return product_id1.size();
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            // return product_id1.get(position).hashCode();
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.scan_row1, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.sc_textname);

                holder.name1 = (TextView) v.findViewById(R.id.sc_review);

                holder.ratings = (RatingBar) v.findViewById(R.id.sc_ratingBar1);

                holder.total_rate = (Button) v.findViewById(R.id.button1);

                holder.img_p = (ImageView) v.findViewById(R.id.image_prod);

                // holder.total_rate.setOnClickListener(mOnTitleClickListener1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.total_rate.setOnClickListener(mOnTitleClickListener3);

            holder.img_p.setOnClickListener(mOnTitleClickListener_image);

            return v;
        }
    }

    static class ListContent {

        ImageView img_p;
        TextView name1;
        TextView name;
        RatingBar ratings;
        Button total_rate;

    }

    public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
        public void onClick(View v) {
            final int position = list_v
                    .getPositionForView((View) v.getParent());

            Log.d("you are click on Ratings","you are click on Ratings");

        }
    };

        public OnClickListener mOnTitleClickListener_image = new OnClickListener() {
        public void onClick(View v) {
            final int position = list_v
                    .getPositionForView((View) v.getParent());

            Log.d("you are click on image view","you are click on image view");

/** in this listener you can show image in any other activity or in toast or in Alert. do whatever you want. */

        }
    }; 
```

* * *

**编辑答案：2012 年 10 月 18 日**

**完整示例**

![在此处输入图像描述](../Images/bdcfe4022b1233c00d087e0b716b2d7f.png)

![在此处输入图像描述](../Images/41849cc8c1c0edfc91343a4cca97ae3a.png)

![在此处输入图像描述](../Images/cb217737abace870ef5d85221759cae8.png)

主要活动类：

```
package com.example.test;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    String iMages[] = {
            "http://www.thebiblescholar.com/android_awesome.jpg",
            "http://blogs-images.forbes.com/rogerkay/files/2011/07/Android1.jpg",
            "http://cdn.slashgear.com/wp-content/uploads/2012/10/android-market-leader-smartphone.jpg",
            "http://www.planmyworkshop.com/images/android.jpeg",
            "http://www.androidguys.com/wp-content/uploads/2012/07/01-android2.jpg" };
    String text[] = { "one", "two", "theree", "four", "five" };

    ArrayList<Bitmap> bitmap_array = new ArrayList<Bitmap>();
    private ListView listv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listv = (ListView) findViewById(R.id.listView1);

        final ProgressDialog progDailog = new ProgressDialog(MainActivity.this);
        final Handler handler = new Handler() {

            public void handleMessage(Message msg) {

                listv.setAdapter(new ListViewAdapter_test(MainActivity.this));
            }
        };
        new Thread() {

            public void run() {

                for (int i = 0; i < iMages.length; i++) {
                    Log.d("i-->" + i, "Url-->" + iMages[i]);
                    Bitmap bit = getBitmapFromURL(iMages[i]);
                    bitmap_array.add(bit);
                }

                progDailog.dismiss();
                handler.sendEmptyMessage(0);

            }
        }.start();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class ListViewAdapter_test extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter_test(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return iMages.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub

            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub

            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.row, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.textView1);

                holder.button = (Button) v.findViewById(R.id.button1);

                holder.img_p = (ImageView) v.findViewById(R.id.imageView1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setText(text[position]);
            holder.button.setText(text[position]);

            if (bitmap_array.get(position) != null) {
                holder.img_p.setImageBitmap(bitmap_array.get(position));
            } else {
                holder.img_p.setImageDrawable(getResources().getDrawable(
                        R.drawable.ic_launcher));
            }

            holder.button.setOnClickListener(mOnTitleClickListener_button);

            holder.img_p.setOnClickListener(mOnTitleClickListener_image);

            return v;
        }
    }

    static class ListContent {

        ImageView img_p;

        TextView name;

        Button button;

    }

    public OnClickListener mOnTitleClickListener_image = new OnClickListener() {
        public void onClick(View v) {
            final int position = listv.getPositionForView((View) v.getParent());

            ImageView i = new ImageView(MainActivity.this);
            i.setImageBitmap(bitmap_array.get(position));

            Toast toastView = new Toast(MainActivity.this);
            toastView.setView(i);
            toastView.setDuration(Toast.LENGTH_LONG);
            toastView.setGravity(Gravity.CENTER, 0, 0);
            toastView.show();

            Log.d("you are click on image view", "you are click on image view");

        }
    };

    public OnClickListener mOnTitleClickListener_button = new OnClickListener() {
        public void onClick(View v) {
            final int position = listv.getPositionForView((View) v.getParent());

            Log.d("you are click on image view", "you are click on image view");

            Toast.makeText(MainActivity.this,
                    "click on button " + text[position], Toast.LENGTH_LONG)
                    .show();

        }
    };

    public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

} 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>

    </LinearLayout> 
```

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="hello"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="click me" />

</LinearLayout> 
```

安卓清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# c# - 查询SQL时日期时间转换错误

> ID：12813777
> 
> 赞同：1
> 
> 时间：2012-10-10T07:05:04.327
> 
> 标签：c#, sql-server

我在从`C#`到 的sql 查询时遇到问题`Sql Server`，不知道是什么原因造成的....

代码如下所示：

```
SqlCommand cmd = new SqlCommand(
    "SELECT tscoc_Name, 
            tscoc_Start, 
            tscoc_End 
            FROM 
            tbl_SchedulerOnCall 
            WHERE (
                tscoc_Start > @fd 
                AND 
                tscoc_End < @ld) 
                AND 
                tscoc_Start = @state", 
    con);
cmd.Parameters.AddWithValue("fd", SqlDbType.DateTime).Value = 
    startDate.ToString("yyyy-MM-dd");
cmd.Parameters.AddWithValue("ld", SqlDbType.DateTime).Value = 
    startDate.AddDays(14).ToString("yyyy-MM-dd"); 
```

SQL查询是这样的：

```
exec sp_executesql 
N'SELECT tscoc_Name, 
         tscoc_Start, 
         tscoc_End 
FROM 
tbl_SchedulerOnCall 
WHERE (
    tscoc_Start > @fd 
    AND 
    tscoc_End < @ld) 
    AND 
    tscoc_Start = @state', 
N'@fd datetime, @ld datetime, @state nvarchar(2)', 
@fd = 'Oct  8 2012 12:00:00:000AM', 
@ld = 'Oct 22 2012 12:00:00:000AM', 
@state = N'SA' 
```

错误是：

> *从字符串转换日期时间的语法错误。*

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:07:47.017

在分配给 - 时，您正在将您的`DateTime`值（假设`startDate` **确实**是 .NET 代码中的类型`DateTime`）转换为字符串`SqlParameter`- 为什么？这完全没用和毫无意义......它会导致日期/时间和语言以及区域设置的潜在问题 - 正如你所看到的......

只需使用：

```
cmd.Parameters.AddWithValue("fd", SqlDbType.DateTime).Value = startDate;
cmd.Parameters.AddWithValue("ld", SqlDbType.DateTime).Value = startDate.AddDays(14); 
```

然后你应该没事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:06:42.063

您无需将日期时间转换为字符串即可将其添加为参数值。只需添加原始 DateTime 对象本身，.NET SQL 代码将完成其余的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:09:54.803

使用**[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)**. 当您在字符串中使用非标准格式的日期时，这很有用。

```
 string dateString = "Oct  8 2012 12:00:00:000AM";
  string format = "MMM dd yyyy hh:mm:ssFFFtt";
  CultureInfo provider = CultureInfo.InvariantCulture;
  DateTime result = DateTime.ParseExact(dateString, format, provider);

  cmd.Parameters.AddWithValue("fd", SqlDbType.DateTime).Value = result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:20:26.093

*你为什么*用[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)？第二个参数是要传递的值，**而不是**数据类型。

做就是了：

```
SqlCommand cmd = new SqlCommand("SELECT tscoc_Name, tscoc_Start, tscoc_End FROM tbl_SchedulerOnCall WHERE (tscoc_Start > @fd AND tscoc_End < @ld) AND tscoc_Start = @state", con);
cmd.Parameters.AddWithValue("fd", startDate);
cmd.Parameters.AddWithValue("ld", startDate.AddDays(14)); 
```

将日期转换为字符串通常是创建错误的第一步（如此处）。

# php - 使用复选框检查所有复选框

> ID：12813780
> 
> 赞同：3
> 
> 时间：2012-10-10T07:05:19.020
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [复选框选中所有选项](https://stackoverflow.com/questions/11380555/checkbox-check-all-option)

```
<form action='ppc_logistic-control_number.php' target='_blank' method='post'>
<b>Sample Program</b><br>
<input type='checkbox'>
<?php
for($i=0;$i<5;$i++)
{
print"<input name='checkbox[]' type='checkbox' id='checkbox[]' value='$i->logi_id' value='$i->ppc_id' style='margin-left:-5px'><br>";
}                       
?>
<input type="submit" value="submit" name="gen"/> 
```

我需要在这里按顺序放置什么 jquery 或 javascript 代码：当我选中 5 个复选框顶部的复选框时，所有复选框都会选中，当我删除我之前选中的复选框时，5 个复选框将删除他们的检查.

* * *

样本： ![在此处输入图像描述](../Images/7b715bffe49ce8f48c3131e52d888088.png)

* * *

示例演示非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:14:46.337

**[检查演示](http://jsfiddle.net/sushanth009/3EjUF/)**

这将是基本逻辑。

**HTML 页面中的ID**应该是唯一的.. 尝试改用**class**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:25:04.800

使用 javascript

```
<input type="checkbox" value="select" onclick="javascript:checkAll()" name="allbox" class="table_ckbox" /></th> 
```

函数 checkAll()

```
{

for (var i=0;i<document.delete_form.elements.length;i++)
{
    var e=document.delete_form.elements[i];
    if ((e.name != 'allbox') && (e.type=='checkbox'))
    {
        e.checked=document.delete_form.allbox.checked;
    }
}
return false;
 } 
```

在您使用 allcheck 框的 php 中

```
foreach($listArr as $list) {

 echo '<td><input type="checkbox" value="'.$list['id'].'" name="module[]" /></td>';
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:48:39.403

***尝试这个***

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Sample Program</title>
<script src="http://code.jquery.com/jquery-1.7rc2.js"></script>

</head>

<body>
<form action='ppc_logistic-control_number.php' target='_blank' method='post'>
<b>Sample Program</b><br>
<div id="check-b">
<input type='checkbox' id="top-checkbox">
<?php
for($i=0;$i<5;$i++)
{
print"<input name='checkbox[]' type='checkbox' id='checkbox[]' value='$i->logi_id' value='$i->ppc_id' style='margin-left:-5px'><br>";
}                       
?>
<input type="submit" value="submit" name="gen"/>
</div>
</form>
<script type="text/javascript">
$(function(){
    $('#top-checkbox').change(function(){
        var isChecked = $(this).attr("checked");
        if (isChecked) {
        $('#check-b').find(':checkbox').prop('checked', true);   
        }else{
            $('#check-b').find(':checkbox').prop('checked', false);   
        }
    });

});
</script>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:27:44.510

下面是显示基于类的选中和取消选中复选框的示例。

您可能希望将第一个元素的类创建为`parent`和所有其他元素`child`，下面的代码将简化您的工作

注意：将这段代码复制并粘贴到一个 html 文件中，然后试一试，你会得到一个很好的理解。

```
<html>
<body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
   $(".parent").click(function(){
        var check = $(this).attr('checked');
        if(check=="checked")
        {
         $(".child").attr('checked','checked');
        }
        else
         $(".child").removeAttr('checked');
   });
 });
</script>

<input type="checkbox" name="vehicle1" id="vehicle1" class="parent" value="Bike">Parent<br />
<input type="checkbox" name="vehicle2" id="vehicle2" class="child" value="Car">Child 1<br />
<input type="checkbox" name="vehicle3" id="vehicle3" class="child" value="Car">Child 1<br />
<input type="checkbox" name="vehicle4" id="vehicle4" class="child" value="Car">Child 1<br />
<input type="checkbox" name="vehicle5" id="vehicle5" class="child" value="Car">Child 1<br />

</body>
</html> 
```

# c# - 比较来自移动应用程序的 BCrypt 密码

> ID：12813782
> 
> 赞同：0
> 
> 时间：2012-10-10T07:05:31.347
> 
> 标签：c#, security, bcrypt

我想与一些安全专家验证这一点。

我有一个注册用户的网络应用程序。我为每个用户使用唯一的盐对密码进行加密，并将散列后的密码存储到数据库中。

我现在需要从移动应用程序对用户进行身份验证。我不能使用 ssl，我更愿意避免在移动设备和我的网络服务器之间传递密码。因此，在服务器上调用登录方法（通过 RESTful API）之前，我更愿意在移动设备上 BCrypt 密码，然后通过 API 将其散列到服务器进行比较。

关键是在移动设备上我必须使用相同的盐进行 BCrypt（据我所知，我无法比较两个使用不同盐散列的 BCrypted pw）。

**所以问题是：这样可以安全吗？**

1.  移动设备向服务器询问用户 X 的盐（我从数据库中存储的 pw 中得到前 22 个字符加上偏移量）
2.  在移动设备上，我 BCrypt 在第 1 点得到的带有盐的密码
3.  最后手机在服务器上调用 login(username, hashedpw)。

如前所述，所有通信都通过普通的 http，没有 SSL。

这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:50:45.507

在您的方案中，“hashedpw”成为一个简单的密码，然后您将其存储在未加密的数据库中。

登录到您的服务器所需要的只是知道（例如，通过拦截）散列值和用户名。在您的实现中，散列与安全性无关，它更多的是对最终用户的记忆帮助，但不提供任何安全优势。

# java - JNI，无法运行 ndk-build

> ID：12813788
> 
> 赞同：2
> 
> 时间：2012-10-10T07:05:44.527
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试运行一个用 C++ 编写的简单阶乘程序，并将其链接到 java UI。

这是我的 Java 代码

```
package com.lan.factorial;

public class FacLib
{

    public native static long fac(long n);
    static 
    {
        System.loadLibrary("FacLib");
    }
    public static long facI(long n)
    {
        return fac(n);
    }
} 
```

`

这是我的 C++ 代码

```
#include <studio.h>
#include <jni.h>
#include "com_lan_factorial_FacLib.h"
JNIEXPORT jlong JNICALL Java_com_lan_factorial_FacLib_fac(JNIEnv *env, jclass, jlong)
{

    jlong f = 1;
    jlong i;
    for(i = 1; i <= n; i++)
    {
         f *= i;
    }
    return f;
} 
```

这是我的制作文件

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_SRC_FILES := com_lan_factorial_main.cpp

LOCAL_MODULE := com_lan_factorial_FacLib
include $(BUILD_SHARED_LIBRARY) 
```

当我运行 ndk-build 时，我不断收到此错误：

```
C:\Users\Lan\workspace\Factorial>"..\..\temp\android\android-ndk-r8b\ndk-build"
make: *** No rule to make target `jni/com_lan_factorial_main.cpp', needed by `obj/local/armeabi/objs/com_lan_factorial_FacLib/com_lan_factorial_main.o'.  Stop. 
```

是的，我的 NDK 在不同的文件夹中，所以我必须使用`..\..\`，但我认为这不是问题。我确实跑了`javah`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:59:25.600

正如[@nneonneo](https://stackoverflow.com/users/1204143/nneonneo)正确指出的那样，您的`.cpp`文件名未正确列在`Android.mk`.

现在您在第 4 行遇到了编译问题：

```
JNIEXPORT jlong JNICALL Java_com_lan_factorial_FacLib_fac(JNIEnv *env, jclass, jlong)
                                                                                    ^ 
```

您丢失了参数名称**n**，但您在第 9 行使用了它：

```
 for(i = 1; i <= n; i++) 
```

请注意，可以跳过`jclass`您从不使用的类型的第二个参数的名称。

我不确定您的编译器是否找到了该`com_lan_factorial_FacLib.h`文件，但这不是问题：您可以`#include`完全删除此语句，您的代码不会使用它。

# php - 用于非悬挂大括号的 PHP 自动编码标准修复程序？

> ID：12813792
> 
> 赞同：0
> 
> 时间：2012-10-10T07:05:52.953
> 
> 标签：php, coding-style, standards, code-formatting

> **可能重复：**
> [是否有任何免费的命令行脚本可以重新格式化 PHP 源代码？](https://stackoverflow.com/questions/785287/are-there-any-free-cmd-line-scripts-which-can-re-format-php-source-code)

我一直在评估几个编码标准修复程序以在我们的代码上运行。这是为了对遗留代码执行一些自动修复，这些代码使用不推荐使用的东西，比如 perl 样式的注释。

到目前为止，我使用过的最有用的修复程序是 php-tidy，可在此处找到：http: [//phptidy.berlios.de/](http://phptidy.berlios.de/)

这试图符合 PEAR 标准，这几乎正是我所需要的，除了我想要控制结构的非悬挂大括号。

谁能给我一个（基于linux的）命令行工具，可以应用修复程序来使用ANSI风格的大括号？：

```
function nice_brace()
{
    if (isset($nicebrace))
    {
        // I like non-hanging braces
    }
} 
```

而不是 PEAR/Zend 风格：

```
function ugly_brace() {
    if (isset($ugly_brace)) {
        // I find this code harder to read
    }
} 
```

编辑：对于其他寻找类似内容的人，请查看此脚本：[https ://raw.github.com/gist/366837/25713637b6f2f9e1ec63abf3233142765df4b931/phpbb-reformat.pl](https://raw.github.com/gist/366837/25713637b6f2f9e1ec63abf3233142765df4b931/phpbb-reformat.pl)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:19:59.093

我在 Vim 中使用以下命令来修复它

```
:g/^\s*{\s*$/normal kJ 
```

[此stackoverflow 问题](https://stackoverflow.com/questions/10118738/reformatting-php-code-in-vim)的更多详细信息

# javascript - Javascript：Window.print() 之后的空 html div 内容

> ID：12813793
> 
> 赞同：3
> 
> 时间：2012-10-10T07:05:57.820
> 
> 标签：javascript, google-chrome, printing

单击按钮时，我使用`window.print()`javascript 打印`print_div`内容，

但由于一些安全问题，我想避免多次打印（如使用 Cntrl + P）选项，所以我想清除`print_div`内容，用户不能一次又一次地重新打印。

这里的粗略代码，

```
document.getElementById("print_div").innerHTML = //Some contents to be printed on paper.
window.print()
document.getElementById("print_div").innerHTML = '' // Clearing old contents to avoid mis-use 
```

但是这段代码根本不起作用，它`print_div`在创建打印预览之前清除内容，就像在 chrome 中一样。（我猜，异步工作）

谁能告诉我，这里哪里做错了？

**注意**：我正在`Chrome: 22.0.1229.92 m`用来测试我的代码，我只想使用 chrome。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-30T20:22:10.223

这是因为没有加载打印窗口。

```
var showPrintWindow = function (context) {
        var printWindow = window.open('', '');
        var doc = printWindow.document;
        doc.write("<html><head>");
        doc.write("<link href='/css/printReport.css' rel='stylesheet' type='text/css' media='print' />");
        doc.write("</head><body>");
        doc.write(context);
        doc.write("</body></html>");
        doc.close();

        function show() {
          if (doc.readyState === "complete") {
              printWindow.focus();
              printWindow.print();
              printWindow.close();
          } else {
              setTimeout(show, 100);
          }
        };
        show();
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:11:50.317

您可以使用 setTimeout 方法并尝试一下。

```
setTimeout("your code or function etc",mili seconds)

setTimeout("document.getElementById('print_div').innerHTML = ''",5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:22:15.993

您正在 print_div 中打印，下一步您将清除它。因此它显示为空。您可以将打印数据存储在变量中。然后在 print_div 中显示，就可以清除变量了。

```
var print = "";
print += "<p>Something </p><br/>";
print += "<table><tr><td>Something</td><td>Something</td></tr> 
                <tr><td>Something</td><td>Something</td></tr> </table>";
document.getElementById("print_div").innerHTML = print;
print = ""; 
```

像这样的东西。将此 javascript 设置为按钮 onsubmit 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-06T21:07:47.307

在 Chrome 中遇到了与您类似的问题，它在打印预览中显示空白页。尝试使用 setTimeout 但它没有用。起作用的是window.onload。

```
<div id="printableArea">
      <h1>Print me</h1>
</div>

<input type="button" onclick="printDiv('printableArea')" value="print a div!" /> 
```

javascript:

```
 function printDiv(divName) {

        var printContents = document.getElementById(divName).innerHTML;
        w = window.open();

        w.document.write(printContents);
        w.document.write('<scr' + 'ipt type="text/javascript">' + 'window.onload = function() { window.print(); window.close(); };' + '</sc' + 'ript>');

        w.document.close(); // necessary for IE >= 10
        w.focus(); // necessary for IE >= 10

        return true;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T07:22:29.237

我不会选择 setTimeout，它只有在用户立即确认打印时才会起作用，你不能盲目地假设..

我会做类似以下的事情：

```
var html = "<html><head></head><body>" + $("print_div").html() + "</body></html>";
var newWindow= window.open("", "PrintWindow",  
"width=100,height=50,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");  
newWindow.document.writeln(html);  
newWindow.document.close();  
newWindow.focus();  
newWindow.print();  
newWindow.close(); 
```

然后执行你的擦拭

```
$('print_div').clear(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T09:01:54.533

```
setTimeout(function(){printWindow.document.close();
 printWindow.print();}, 500); 
```

它会起作用的

# java - 试图理解 FFT

> ID：12813795
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:06:00.207
> 
> 标签：java, audio, fft

所以我正在为自己做一个具有挑战性的项目。我目前正在对一组声音数据运行快速傅立叶变换算法。我使用的算法将复数作为结果转换数据。我需要获取该信息并使用它来确定原始阵列中每个部分的频率。

我一直在自学如何编写所有这些用于录制和分析声音的代码，但我已经到了谷歌似乎无法帮助我的地步。如果您对我如何进行操作有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:06:30.493

运行 FFT 后，频率值可以通过取实部和虚部的绝对值平方得到。(abs(真实^2 + imag^2))

现在你怎么知道这个幅度对应的频率值是多少？例如：如果你运行一个 128 点的 fft，你会得到一个复数范围，总共 128 个，范围从 0Hz 到采样频率（做 fft 时的参数之一）。因此，每个复数对应一个频率值，以（采样频率/128）为步长，从 0Hz 开始。

希望这可以帮助！

# eclipse - CheckedTreeSelectionDialog 未选择父级

> ID：12813796
> 
> 赞同：0
> 
> 时间：2012-10-10T07:06:02.150
> 
> 标签：eclipse, eclipse-plugin

我`CheckedTreeSelectionDialog`用来显示类中的字段。如果我在子树中选择一个项目，则不会选择父节点。这是它的工作方式吗？如果我希望自动选择父节点，当我选择子节点时我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:29:11.687

你试过这个方法吗？这可能是你想要的。 [http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/CheckedTreeSelectionDialog.html#setContainerMode(boolean](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/CheckedTreeSelectionDialog.html#setContainerMode(boolean) )

# actionscript-3 - 如何从父级更改滑块中影片剪辑的宽度

> ID：12813797
> 
> 赞同：0
> 
> 时间：2012-10-10T07:06:07.143
> 
> 标签：actionscript-3, flash, slider, movieclip

我的 Flash 应用程序中有一个滑块组件设置。这个滑块有一些我创建的额外影片剪辑。

从父时间轴，我想在我的滑块中更改这些影片剪辑之一的宽度。

我不能像往常一样访问子影片剪辑（`slider_mc.other_mc.width`），因为它位于滑块中，所以它给了我这个错误：

> ReferenceError：错误 #1069：在 fl.controls.Slider 上找不到属性 other_mc，并且没有默认值。在 play_fla::MainTimeline/frame1()

有谁知道我该怎么做？

谢谢

编辑：

只是为了进一步解释：

滑块组件是具有实例名称的影片剪辑`slider_mc`，`other_mc`位于滑块影片剪辑内。我需要改变`other_mc`父动画剪辑的宽度。

希望有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:15:46.320

您需要监听来自 Slider 的事件。如果滑块和其他 mc 在同一时间轴中，这样的事情应该可以工作

```
import fl.events.SliderEvent;

slider_mc.addEventListener(SliderEvent.THUMB_DRAG, thumbDragHandler);

function thumbDragHandler(event:SliderEvent):void {
    other_mc.width = event.value;
} 
```

# java - 在不可比较对象上使用优先级队列，其中包含可比较对象

> ID：12813801
> 
> 赞同：0
> 
> 时间：2012-10-10T07:06:30.253
> 
> 标签：java, priority-queue, comparable, huffman-code

我目前正在为一个班级构建一棵霍夫曼树。在查看了我的可用选项后，我决定采用优先队列方法。但是，当我尝试运行以下代码时，我在 TreeNode 上（在第一 pq.offer 行）上得到一个 ClassCastException。

```
public static TreeNode<CharFreq> buildTree(ArrayList<TreeNode<CharFreq>> trees) throws IOException {

   PriorityQueue<TreeNode<CharFreq>> pq = new PriorityQueue<TreeNode<CharFreq>>();

   for (int i = 0; i < trees.size(); i++) {
     if (trees.get(i).getItem().getFreq() > 0) {
       pq.offer(new TreeNode<CharFreq>(new CharFreq(trees.get(i).getItem().getChar(), trees.get(i).getItem().getFreq())));
     }
   }  

   while (pq.size() > 1) {    
       TreeNode<CharFreq> leftNode = pq.poll();
       TreeNode<CharFreq> rightNode = pq.poll();
       TreeNode<CharFreq> parentNode = new TreeNode<CharFreq>(new CharFreq('\u0000', ((leftNode.getItem().getFreq()) + (rightNode.getItem().getFreq()))), leftNode, rightNode);
   }  

   return pq.poll();

} 
```

我知道它不是一个可比较的类，但是 CharFreq 是，我的问题是我是否能够修复我的代码，从而避免这个转换问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:17:32.623

您可以创建自定义比较器：`Comparator<TreeNode<CharFreq>>`并在创建 PriorityQueue 时使用它：

[http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#PriorityQueue(int](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#PriorityQueue(int) , java.util.Comparator)

> 创建一个具有指定初始容量的 PriorityQueue，根据指定的比较器对其元素进行排序

使用[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)的概念，你可以有这样的代码：

```
public static TreeNode<CharFreq> buildTree(ArrayList<TreeNode<CharFreq>> trees)
    throws IOException {
    Comparator<TreeNode<CharFreq>> comparator = new Comparator<TreeNode<CharFreq>>() {

        //basic implementation, you must use your own!
        public int compare(TreeNode<CharFreq> node1, TreeNode<CharFreq> node2) {
            return node1.data.compareTo(node2.data);
        }
    };
    PriorityQueue<TreeNode<CharFreq>> pq = new PriorityQueue<TreeNode<CharFreq>>(10, comparator);
    //the rest of your code...
} 
```

请注意，使用这种方式意味着您必须在`Comparator<TreeNode<YourClass>>`每次需要创建`PriorityQueue<TreeNode<YourClass>>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:11:16.180

优先级队列使用 a `Comparator`（在构造函数中提供）或直接将对象转换为`Comparable`.

为避免 ClassCastException，您应该提供一个`Comparator`of `TreeNode`。这样队列将使用比较器而不是强制转换。

```
PriorityQueue<TreeNode<CharFreq>> pq = new PriorityQueue<TreeNode<CharFreq>>(initialCapacity, comparator); 
```

# sql - 如何在 Oracle 中通过 .bat 文件执行插入 SQL？

> ID：12813814
> 
> 赞同：2
> 
> 时间：2012-10-10T07:07:26.553
> 
> 标签：sql, batch-file

我正在通过 .bat 文件进行简单的插入。但它没有执行第二条语句。

```
sqlplus scott/tiger

insert into dept values (60, 'Support', 'Redwood'); 
```

如何运行第二条语句？我肯定错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:13:16.273

假设您的列对于插入是正确的这就是我要做的。

> sqlplus scott/tiger @c:\yourSqlScript.sql
> 退出

然后在你的“yourSqlScript.sql”中，你有

> 插入dept值（60，'Support'，'Redwood'）；
> 出口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T01:02:54.167

要从 .bat 文件中完成所有工作，您需要以下内容：

```
@echo insert into dept values (60, 'Support', 'Redwood'); | sqlplus scott/tiger 
```

# foursquare - Foursquare API Real-Time Checkin... 如何获取场地照片？

> ID：12813820
> 
> 赞同：0
> 
> 时间：2012-10-10T07:07:44.387
> 
> 标签：foursquare

首先，只想说 Foursquare API 太棒了，太整洁了！

所以目前，我有 Foursquare 签入发回我的 API 端点。我注意到场地信息是“紧凑的”（我假设）。我可以更改某个配置参数以获取详细的场地数据吗？我真的不想再打电话给 FS 来获取场地照片网址......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:26:51.227

登记入住响应中不会返回场地照片。要获取完整的场地数据，您可以使用场地详细信息端点 (https://developer.foursquare.com/docs/venues/venues)。如果您只对照片感兴趣，可以使用场所/照片端点（https://developer.foursquare.com/docs/venues/photos）

# java - Android：位图的路径不正确

> ID：12813821
> 
> 赞同：0
> 
> 时间：2012-10-10T07:07:46.087
> 
> 标签：java, android, image, imageview

我正在尝试将 /mnt/sdcard/img.jpg 中的图像读入 ImageView。

```
File image = new File(path);
          Bitmap bm = BitmapFactory.decodeFile(image.getAbsolutePath());
          webView1.setImageBitmap(bm); 
```

我从图库中获取路径，我的应用程序说该路径不存在。但是在文件管理器中它是存在的。

我该如何解决？

```
if (arg0 == button4){
            Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
            photoPickerIntent.setType("image/*");
            startActivityForResult(photoPickerIntent, 1);

        } 
```

我如何获取图像文件的路径：

```
private String UriToBit(Uri uri) {
        String[] proj = {MediaStore.Images.Media.DATA};
        Cursor cursor = managedQuery(uri, proj, null, null, null);
        int index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(index);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:47:29.027

嗨，下面的代码我用于将 sdcard 拾取的图像显示到 imageview 中。

```
selectimage = (Button) findViewById(R.id.selectimg);

    selectimage.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Intent i = new  Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                  startActivityForResult(i, PICK_FROM_FILE);                

            }
        }
    });

   protected void onActivityResult(int requestCode, int resultCode, Intent data) {

           if  (resultCode == RESULT_OK) {

        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA  };

        Cursor cursor = getContentResolver().query(selectedImage,
                                   filePathColumn,null,null, null);
        cursor.moveToFirst();

        int  columnIndex = cursor.getColumnIndexfilePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();

        yourSelectedImage  = BitmapFactory.decodeFile(filePath);
        img.setImageBitmap(yourSelectedImage); 
```

# c# - skype4com 播放波形后重置输入设备

> ID：12813823
> 
> 赞同：1
> 
> 时间：2012-10-10T07:07:50.487
> 
> 标签：c#, text-to-speech, skype4com

我正在使用 SKype4Com，似乎每当我播放 wav 文件时，我都无法换回我的麦克风。我真的必须结束通话，然后回电才能再次使用我的麦克风。这是一些代码：

```
DeviceType = TCallIoDeviceType.callIoDeviceTypeFile
var filename = Path.GetTempFileName();
using (this.Speak = new SpeechSynthesizer())
{
    this.Speak.SetOutputToWaveFile(
        filename,
        new System.Speech.AudioFormat.SpeechAudioFormatInfo(
            16000,
            System.Speech.AudioFormat.AudioBitsPerSample.Sixteen,
            System.Speech.AudioFormat.AudioChannel.Mono));
    this.Speak.Speak(reply);
    this.Speak.SetOutputToDefaultAudioDevice();
    this.Speak.Speak(reply);
    CurrentCall.set_InputDevice(DeviceType, filename);
    this.skype.SendMessage(pMessage.FromHandle, reply);
    this.Speak.SetOutputToNull();
    this.Speak.Dispose();
    CurrentCall.set_InputDevice(DeviceType,"");
}
CurrentCall.set_InputDevice(TCallIoDeviceType.callIoDeviceTypeSoundcard, "default");
Dispatcher.Invoke(new Action(() =>
    {
        tb1.Text += "sound card: ";
        tb1.Text += CurrentCall.get_InputDevice(TCallIoDeviceType.callIoDeviceTypeSoundcard);
        tb1.Text += Environment.NewLine;
        tb1.Text += "port: ";
        tb1.Text += CurrentCall.get_InputDevice(TCallIoDeviceType.callIoDeviceTypePort);
        tb1.Text += Environment.NewLine;
        tb1.Text += "file: ";
        tb1.Text += CurrentCall.get_InputDevice(TCallIoDeviceType.callIoDeviceTypeFile);
        tb1.Text += Environment.NewLine;
    }));
} 
```

有什么想法可以让它发挥作用吗？自动完成后，我只听到永远的沉默。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:14:18.717

您可以尝试检查您播放的文件是否仍然忙。

```
do
{
    System.Threading.Thread.Sleep(1000);
} while (IsBusy(filename));
CurrentCall.set_InputDevice(DeviceType,""); 
```

该`IsBusy`方法声明如下：

```
public bool IsBusy(string filePath)
{
    try
    {
        using (FileStream stream = File.OpenWrite(filePath))
        {
            stream.Close();
            return false;
        }
    }
    catch (IOException)
    {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T01:56:40.200

有一种方法可以使用 tcp 将音频放入 Skype，所以我这样做了。

# windows - 从 Windows 命令行获取文件夹大小

> ID：12813826
> 
> 赞同：159
> 
> 时间：2012-10-10T07:08:14.277
> 
> 标签：windows, powershell, command-line

在 Windows 中是否可以在不使用任何 3rd 方工具的情况下从命令行获取文件夹的大小？

我想要的结果与右键单击 Windows 资源管理器 → 属性中的文件夹时得到的结果相同。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2016-10-26T07:47:49.330

为此有一个**内置的 Windows 工具**：

```
dir /s 'FolderName' 
```

这将打印很多不必要的信息，但最终将是文件夹大小，如下所示：

```
 Total Files Listed:
       12468 File(s)    182,236,556 bytes 
```

如果您需要包含隐藏文件夹，请添加`/a`.

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2012-10-10T07:16:24.880

您可以递归地添加大小（以下是批处理文件）：

```
@echo off
set size=0
for /r %%x in (folder\*) do set /a size+=%%~zx
echo %size% Bytes 
```

但是，这有几个问题，因为`cmd`仅限于 32 位有符号整数运算。所以它的大小会超过 2 GiB 错误¹ ​​。此外，它可能会多次计算符号链接和连接，因此它充其量只是一个上限，而不是真实大小（不过，任何工具都会有这个问题）。

另一种方法是 PowerShell：

```
Get-ChildItem -Recurse | Measure-Object -Sum Length 
```

或更短：

```
ls -r | measure -sum Length 
```

如果你想让它更漂亮：

```
switch((ls -r|measure -sum Length).Sum) {
  {$_ -gt 1GB} {
    '{0:0.0} GiB' -f ($_/1GB)
    break
  }
  {$_ -gt 1MB} {
    '{0:0.0} MiB' -f ($_/1MB)
    break
  }
  {$_ -gt 1KB} {
    '{0:0.0} KiB' -f ($_/1KB)
    break
  }
  default { "$_ bytes" }
} 
```

您可以直接从以下位置使用它`cmd`：

```
powershell -noprofile -command "ls -r|measure -sum Length" 
```

* * *

¹我在批处理文件中确实有一个部分完成的 bignum 库，它至少获得了任意精度整数加法的权利。我真的应该释放它，我猜 :-)

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2017-12-19T21:09:48.807

单线：

```
powershell -command "$fso = new-object -com Scripting.FileSystemObject; gci -Directory | select @{l='Size'; e={$fso.GetFolder($_.FullName).Size}},FullName | sort Size -Descending | ft @{l='Size [MB]'; e={'{0:N2}    ' -f ($_.Size / 1MB)}},FullName" 
```

相同，但仅限 Powershell：

```
$fso = new-object -com Scripting.FileSystemObject
gci -Directory `
  | select @{l='Size'; e={$fso.GetFolder($_.FullName).Size}},FullName `
  | sort Size -Descending `
  | ft @{l='Size [MB]'; e={'{0:N2}    ' -f ($_.Size / 1MB)}},FullName 
```

这应该会产生以下结果：

```
Size [MB]  FullName
---------  --------
580,08     C:\my\Tools\mongo
434,65     C:\my\Tools\Cmder
421,64     C:\my\Tools\mingw64
247,10     C:\my\Tools\dotnet-rc4
218,12     C:\my\Tools\ResharperCLT
200,44     C:\my\Tools\git
156,07     C:\my\Tools\dotnet
140,67     C:\my\Tools\vscode
97,33      C:\my\Tools\apache-jmeter-3.1
54,39      C:\my\Tools\mongoadmin
47,89      C:\my\Tools\Python27
35,22      C:\my\Tools\robomongo 
```

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2012-10-10T07:16:29.437

我建议从 Microsoft 在此链接 [http://technet.microsoft.com/en-us/sysinternals/bb896651提供的 Sysinternals Suite 中下载实用程序 DU](http://technet.microsoft.com/en-us/sysinternals/bb896651)

```
usage: du [-c] [-l <levels> | -n | -v] [-u] [-q] <directory>
   -c     Print output as CSV.
   -l     Specify subdirectory depth of information (default is all levels).
   -n     Do not recurse.
   -q     Quiet (no banner).
   -u     Count each instance of a hardlinked file.
   -v     Show size (in KB) of intermediate directories.

C:\SysInternals>du -n d:\temp

Du v1.4 - report directory disk usage
Copyright (C) 2005-2011 Mark Russinovich
Sysinternals - www.sysinternals.com

Files:        26
Directories:  14
Size:         28.873.005 bytes
Size on disk: 29.024.256 bytes 
```

当您使用它时，请查看其他实用程序。它们是每个 Windows 专业人士的救星

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-05-08T14:02:54.720

如果您的计算机中安装了 git（越来越常见），只需打开 MINGW32 并输入：`du folder`

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-10-09T04:56:31.157

这是我编写的一个 powershell 代码，用于列出当前目录下所有文件夹的大小和文件数。随意重复使用或根据您的需要进行修改。

```
$FolderList = Get-ChildItem -Directory
foreach ($folder in $FolderList)
{
    set-location $folder.FullName
    $size = Get-ChildItem -Recurse | Measure-Object -Sum Length
    $info = $folder.FullName + "    FileCount: " + $size.Count.ToString() + "   Size: " + [math]::Round(($size.Sum / 1GB),4).ToString() + " GB"
    write-host $info
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-08-24T16:17:04.740

我建议使用我编写的[https://github.com/aleksaan/diskusage实用程序。](https://github.com/aleksaan/diskusage)非常简单而且很有帮助。而且非常快。

只需输入命令外壳

```
diskusage.exe -path 'd:/go; d:/Books' 
```

并获取**按大小排列的文件夹列表**

```
  1.| 目录：d:/go | 大小：325.72 Mb | 深度：1
  2.| 目录：d:/书籍 | 大小：14.01 Mb | 深度：1

```

此示例在 HDD 上以**272 毫秒**执行。

您可以增加要分析的子文件夹的深度，例如：

```
diskusage.exe -path 'd:/go; d:/Books' -depth 2 
```

并获取所选文件夹及其子文件夹的大小

```
  1.| 目录：d:/go | 大小：325.72 Mb | 深度：1
  2.| 目录：d:/go/pkg | 大小：212.88 Mb | 深度：2
  3.| 目录：d:/go/src | 大小：62.57 Mb | 深度：2
  4.| 目录：d:/go/bin | 大小：30.44 Mb | 深度：2
  5.| 目录：d:/书籍/国际象棋 | 大小：14.01 Mb | 深度：2
  6.| 目录：d:/书籍 | 大小：14.01 Mb | 深度：1
  7.| 目录：d:/go/api | 大小：6.41 Mb | 深度：2
  8.| 目录：d:/go/test | 大小：5.11 Mb | 深度：2
  9.| 目录：d:/go/doc | 大小：4.00 Mb | 深度：2
 10.| 目录：d:/go/misc | 大小：3.82 Mb | 深度：2
 11.| 目录：d:/go/lib | 大小：358.25 KB | 深度：2

```

*** 服务器上的 3.5Tb 已扫描 3 分 12 秒**

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-14T08:47:28.150

尝试：

```
SET FOLDERSIZE=0
FOR /F "tokens=3" %A IN ('DIR "C:\Program Files" /a /-c /s ^| FINDSTR /C:" bytes" ^| FINDSTR /V /C:" bytes free"') DO SET FOLDERSIZE=%A 
```

如果在批处理文件中使用，将 C:\Program Files 更改为您想要的任何文件夹并将 %A 更改为 %%A

它返回整个文件夹的大小，包括子文件夹和隐藏文件和系统文件，并适用于超过 2GB 的文件夹

它确实会写入屏幕，因此如果您不想这样做，则必须使用临时文件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-08-10T14:37:01.960

此代码经过测试。你可以再检查一遍。

```
@ECHO OFF
CLS
SETLOCAL
::Get a number of lines contain "File(s)" to a mytmp file in TEMP location.
DIR /S /-C | FIND "bytes" | FIND /V "free" | FIND /C "File(s)" >%TEMP%\mytmp
SET /P nline=<%TEMP%\mytmp
SET nline=[%nline%]
::-------------------------------------
DIR /S /-C | FIND "bytes" | FIND /V "free" | FIND /N "File(s)" | FIND "%nline%" >%TEMP%\mytmp1
SET /P mainline=<%TEMP%\mytmp1
CALL SET size=%mainline:~29,15%
ECHO %size%
ENDLOCAL
PAUSE 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-06T19:41:09.857

我想这只有在目录是相当静态的并且它的内容在两个 dir 命令的执行之间没有改变的情况下才有效。也许是一种将其组合成一个命令以避免这种情况的方法，但这符合我的目的（我不想要完整的列表；只是摘要）。

GetDirSummary.bat 脚本：

```
@echo off
rem  get total number of lines from dir output
FOR /F "delims=" %%i IN ('dir /S %1 ^| find "asdfasdfasdf" /C /V') DO set lineCount=%%i
rem  dir summary is always last 3 lines; calculate starting line of summary info
set /a summaryStart="lineCount-3"
rem  now output just the last 3 lines
dir /S %1 | more +%summaryStart% 
```

用法：

GetDirSummary.bat c:\temp

输出：

```
 Total Files Listed:
          22 File(s)         63,600 bytes
           8 Dir(s)  104,350,330,880 bytes free 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-07-02T06:59:01.097

打开 windows CMD 并运行以下命令

```
dir /s c:\windows 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-10T07:22:48.100

我认为您唯一的选择是 diruse （高度支持的第 3 方解决方案）：

[从命令行获取文件/目录大小](https://www.windows-commandline.com/get-file-size-directory-size-command/)

不幸的是，Windows CLI 的限制非常严格，您也可以安装[Cygwin](http://www.cygwin.com/)，与 cmd 相比，它是一个理想的使用方式。这将使您可以访问移植的 Unix 工具 du，它是 Windows 上 diruse 的基础。

抱歉，我无法使用您可以在本机 cli 上运行的命令直接回答您的问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-24T17:13:28.887

我得到`du.exe`了我的 git 发行版。另一个地方可能是前面提到的 Microsoft 或[Unxutils](http://unxutils.sourceforge.net/)。

一旦你的路径中有 du.exe。这是你的`fileSizes.bat`:-)

```
@echo ___________
@echo DIRECTORIES
@for /D %%i in (*) do @CALL du.exe -hs "%%i"
@echo _____
@echo FILES
@for %%i in (*) do @CALL du.exe -hs "%%i"
@echo _____
@echo TOTAL
@du.exe -sh "%CD%" 
```

➪</p>

```
___________
DIRECTORIES
37M     Alps-images
12M     testfolder
_____
FILES
765K    Dobbiaco.jpg
1.0K    testfile.txt
_____
TOTAL
58M    D:\pictures\sample 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-02T14:08:51.013

::获取 Dir 命令返回的行数（/-c 消除数字分隔符：. ,) ["Tokens = 3" 仅查看 Dir 中每一行的第三列]

`FOR /F "tokens=3" %%a IN ('dir /-c "%folderpath%"') DO set /a i=!i!+1`

倒数第二行的编号，其中是文件总和的字节数：

```
set /a line=%i%-1 
```

最后得到倒数第二行的字节数 - 第 3 列：

```
set i=0
FOR /F "tokens=3" %%a IN ('dir /-c "%folderpath%"') DO (
  set /a i=!i!+1
  set bytes=%%a
  If !i!==%line% goto :size  
)
:size
echo %bytes% 
```

由于它不使用单词搜索，因此不会有语言问题。

**限制：**

*   仅适用于小于 2 GB 的文件夹（cmd 不处理超过 32 位的数字）
*   不读取内部文件夹的字节数。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-03-25T08:40:38.720

以下脚本可用于获取和累积给定文件夹下每个文件的大小。
文件夹路径`%folder%`可以作为该脚本 ( `%1`) 的参数给出。
最终，结果保存在参数中`%filesize%`

```
@echo off
SET count=1
SET foldersize=0
FOR /f "tokens=*" %%F IN ('dir /s/b %folder%') DO (call :calcAccSize "%%F")
echo %filesize%
GOTO :eof

:calcAccSize
 REM echo %count%:%1
 REM set /a count+=1
 set /a foldersize+=%~z1
 GOTO :eof 
```

注意：该方法`calcAccSize`还可以打印文件夹的内容（上例中注释）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-05-15T05:26:10.113

因此，这是您最初要求的两种请求的解决方案。它将提供人类可读的文件大小，而不会受到每个人都遇到的文件大小限制。兼容 Win Vista 或更新版本。XP 仅在安装了 Robocopy 时可用。只需在此批处理文件上放置一个文件夹或使用下面提到的更好的方法。

```
@echo off
setlocal enabledelayedexpansion
set "vSearch=Files :"

For %%i in (%*) do (
    set "vSearch=Files :"
    For /l %%M in (1,1,2) do ( 
        for /f "usebackq tokens=3,4 delims= " %%A in (`Robocopy "%%i" "%%i" /E /L /NP /NDL /NFL ^| find "!vSearch!"`) do (
            if /i "%%M"=="1" (
                set "filecount=%%A"
                set "vSearch=Bytes :"
            ) else (
                set "foldersize=%%A%%B"
            )
        )
    )
    echo Folder: %%~nxi FileCount: !filecount! Foldersize: !foldersize!
    REM remove the word "REM" from line below to output to txt file
    REM echo Folder: %%~nxi FileCount: !filecount! Foldersize: !foldersize!>>Folder_FileCountandSize.txt
)
pause 
```

为了能够方便地使用此批处理文件，请将其放在您的 SendTo 文件夹中。这将允许您右键单击一个文件夹或文件夹选择，单击 SendTo 选项，然后选择此批处理文件。

要在您的计算机上找到 SendTo 文件夹，最简单的方法是打开 cmd 然后按原样复制此行。

```
explorer C:\Users\%username%\AppData\Roaming\Microsoft\Windows\SendTo 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-03-19T19:10:22.267

以下单行可用于确定文件夹的大小。

该帖子采用 Github Actions 格式，说明使用了哪种类型的 shell。

```
shell: pwsh
run: |
  Get-ChildItem -Path C:\temp -Recurse | Measure-Object -Sum Length

shell: cmd
run: |
  powershell -noprofile -command "'{0:N0}' -f (ls C:\temp -r | measure -s Length).Sum" 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-19T13:49:10.040

我解决了类似的问题。此页面中的某些方法很慢，而某些方法在多语言环境中存在问题（均假设为英语）。我发现在 cmd 中使用 vbscript 的简单解决方法。它在 W2012R2 和 W7 中进行了测试。

```
>%TEMP%\_SFSTMP$.VBS ECHO/Set objFSO = CreateObject("Scripting.FileSystemObject"):Set objFolder = objFSO.GetFolder(%1):WScript.Echo objFolder.Size
FOR /F %%? IN ('CSCRIPT //NOLOGO %TEMP%\_SFSTMP$.VBS') DO (SET "S_=%%?"&&(DEL %TEMP%\_SFSTMP$.VBS)) 
```

它设置环境变量 S_。当然，您可以将最后一行更改为直接显示结果，例如

```
FOR /F %%? IN ('CSCRIPT //NOLOGO %TEMP%\_SFSTMP$.VBS') DO (ECHO "Size of %1 is %%?"&&(DEL %TEMP%\_SFSTMP$.VBS)) 
```

您可以将其用作子程序或独立的 cmd。参数是用引号括起来的测试文件夹的名称。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2015-02-02T19:22:24.697

获得总大小的最简单方法是 powershell，但仍然受到长度超过 260 个字符的路径名不包括在总数中的限制

# css - 为什么这个 CSS 选择器不比另一个更具体？

> ID：12813832
> 
> 赞同：0
> 
> 时间：2012-10-10T07:08:41.043
> 
> 标签：css, primefaces, css-selectors, css-specificity

给定一个 html 片段：

```
<button id="foo" onclick="window.location.href='/foo/';" 
class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only btn btn-primary" type="button" name="btn" id="btn" role="button" aria-disabled="false"><span class="ui-button-text">Join Now »</span></button> 
```

为什么 chrome 和 Mozilla 都选择这个规则：

```
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default{...} 
```

当我希望他们选择时：

```
.btn .btn-primary .ui-widget .ui-widget-content .ui-state-default .ui-button .ui-button-text-only button,
.btn-primary {...} 
```

Firebug 显示了两个规则都被应用了，但是无论多么“选择性”，我认为我正在制作第二个选择器链，第一个选择器显示在顶部，第二个选择器的样式在列表的下方，全部被覆盖（在萤火虫 UI 中删除）

FWIW，我确实验证了添加基于 id 的选择器确实首先被选中。我只是不想到处分配ID。如：

```
#foo,
.btn-primary {...} 
```

**谁能帮我使上面的第二个 CSS 选择器比第一个更具体？**

这一切都与我在最近发布的 primefaces 引导主题中发现的一个错误有关，该主题模仿引导样式。就我而言，我也在使用实际的引导程序，并希望将 btn-primary 之类的样式应用于 pf commandButtons 等。

这工作正常，直到您将 commandButton 放在 primefaces 面板中......此时 pf 主题中的按钮样式正在破坏引导程序的样式。我原以为我可以在 bootstrap css 中添加一个选择器，让它从 pf 中获取特异性……但显然我有更多的 CSS 选择器 Star Wars 可以玩…… [http://www.stuffandnonsense .co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:25:06.363

感谢提供重要线索的 BoltClock 解决了。

为了在 pf 主题中选择引导 css 类，添加到引导按钮-* 类的选择器如下所示：

```
.btn-primary.ui-button 
```

注意类名和句点之间没有空格。这意味着选择具有两个类的元素。

所以原来的引导 css 有：

```
.btn-primary {...} 
```

我只是添加了另一个选择器来包含 pf ui-button 类。

```
.btn-primary.ui-button,
.btn-primary {...} 
```

现在，当按钮位于 PrimeFaces 面板中时，我将成功使用引导程序 btn-primary、btn-info、btn-success 等作为 PrimeFaces 中的类名。

# iphone - 标签栏应用程序xcode（ios 5）中的方向

> ID：12813839
> 
> 赞同：0
> 
> 时间：2012-10-10T07:09:04.467
> 
> 标签：iphone, objective-c, ios

大家好我正在开发标签栏应用程序，我想在其中只支持第一个视图而不是所有标签视图的横向，只有一个标签应该支持所有方向，其余标签应该只支持纵向，我试过下面的代码在 FirstView.m 中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

在 secondView.m

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
return(interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

它不允许我在任何选项卡视图中横向显示任何 1 可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:19:50.280

阅读`(BOOL)shouldAutorotateToInterfaceOrientation`iOS 5 中的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:47:16.663

您需要对您的接口进行 OR，而不是对它们进行 AND 操作。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

# android - 使动态创建的 TableRow 在选择时突出显示

> ID：12813846
> 
> 赞同：1
> 
> 时间：2012-10-10T07:09:21.890
> 
> 标签：android, tablerow, android-selector

我正在使用编辑文本和图像视图动态填充表格。我希望在按下表格行时突出显示整个表格行：

代码：

```
 public void display(News news)
{
    LinearLayout.LayoutParams LLParams=new LinearLayout.LayoutParams (LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT,1.0f);
    TableRow.LayoutParams tableRowParams=new TableRow.LayoutParams (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.MATCH_PARENT,1.0f);
    TableRow TR= new TableRow(this);
    TR.setClickable(true);
    TR.setFocusable(true);
    TR.setFocusableInTouchMode(true);
    TR.setBackgroundResource(drawable.table1);//set background according to selector
    LinearLayout LL= new LinearLayout(this);
    TR.setLayoutParams(tableRowParams);
    Table1.addView(TR);
    TR.addView(LL, new TableRow.LayoutParams (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.MATCH_PARENT,1.0f));

    //Table Row contains EditText and ImageView
    EditText editText1 =new EditText(this);

    ImageView imgview=new ImageView( this);
    LL.addView(imgview, new LinearLayout.LayoutParams (LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT,4.0f));
    LL.addView(editText1, new LinearLayout.LayoutParams (LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT,1f));
    editText1.setText(news.getTitle()+"\n"+news.getSubtitle());
    editText1.setKeyListener(null);
    editText1.setTextColor(0xff000000);

    editText1.setTextSize(15);

    imgview.setImageDrawable(news.getDr());
    imgview.setAdjustViewBounds(true);
    imgview.setMaxHeight(50);
    imgview.setMaxWidth(50);

} 
```

**可绘制/table.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#ff00ff00"/>
    <!-- pressed -->
    <item android:state_focused="true" android:color="#ff00ff00"/>
    <!-- focused -->
    <item android:color="#00000000"/>
    <!-- default -->

</selector> 
```

我得到了这个例外：

```
10-10 07:02:10.058: E/AndroidRuntime(1879): android.content.res.Resources$NotFoundException: File res/drawable/table1.xml from drawable resource ID #0x7f02001f 
```

我会很感激你的帮助。请具体

# ios - 来自 JSON 的 UIImage

> ID：12813847
> 
> 赞同：-3
> 
> 时间：2012-10-10T07:09:23.340
> 
> 标签：ios, uiimageview, uiimage

我想再次询问来自 json 的 uiimage。这是我的 json

```
 - image {
        original: "http://someurl/B777_Tail.jpg",
         thumbnail: "http://someurl/thumbnail/B777_Tail.jpg"
     }, 
```

不，我尝试在 UItableviewcell 上使用这种方法来获得这个

```
NSString *path=[[[json objectAtIndex:indexPath.row] objectForKey:@"image"]objectForKey:@"thumbnail"];
    NSLog(@"%@",path);

    UIImage *theImage = [UIImage imageWithContentsOfFile:path];
    cell.imageView.image = theImage; 
```

我的代码有什么问题吗？因为它没有显示在 UItableviewCell 上；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:53:51.743

起初你以错误的方式加载图像。最简单的加载代码就像

```
NSData* imageData = [NSData dataWithContentsOfURL: [NSURL URLWithString: path]];
UIImage* image = [UIImage imageWithData: imageData]; 
```

如果您的路径被正确提取，您将看到该图像。

# ruby-on-rails - 良好的后台处理选项

> ID：12813851
> 
> 赞同：1
> 
> 时间：2012-10-10T07:09:27.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, background-process

我正在寻找具有以下能力的良好背景工作处理器，

1.  适用于 MySql
2.  可以有优先级
3.  可以在后台轻松安排任何事情（不仅仅是电子邮件）
4.  能够在完成后重新初始化作业（回调会很好。我很少有任务/作业在每分钟后继续运行），即使是重复性调度程序也可以工作
5.  不应该吃掉很多内存，（有DJ这个经验）

我正在研究 Resque、DJ、Beanstalkd 的几个选项（尚未完全探索）我在 Amazon EC2 中有我的生产环境（如果这有助于更好的解决方案）

请建议我这是一个不错的选择，除了现在人们使用的这些之外还有其他东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:17:18.287

我衷心推荐[sidekiq——](https://github.com/mperham/sidekiq)它非常灵活，而且它使用的资源比Resque 或DelayedJob 少得多。

它确实需要 redis（如 Resque），但 redis 对任何 Rails 项目都是有价值的补充，因为它可以用作会话存储和缓存。我们的主要数据库是 MySQL，我们部署到 EC2 :-) 我们过去曾使用延迟作业和救援，但发现它们存在问题并且占用大量资源。Sidekiq 使用线程，单个 sidekiq 工作人员与多个 DJ/Resque 工作人员一样高效。这是我可以证实的项目 README 中一个有趣的部分：

> 您会发现您可能需要 50 个 200MB resque 进程来固定您的 CPU，而一个 300MB Sidekiq 进程将固定相同的 CPU 并执行相同数量的工作。请参阅我关于 Resque 的内存效率的博客文章，以及我如何能够将 Carbon Five 客户的 resque 处理场从 9 台机器缩小到 1 台机器。

总结一下：

1.  它适用于 MySQL - 不是真的，但它也没有 MySQL 的问题
2.  您可以通过设置不同的[处理队列来确定优先级](https://github.com/mperham/sidekiq/wiki/Advanced-Options)
3.  您可以轻松[安排任何事情（特别是](https://github.com/mperham/sidekiq/wiki/Getting-Started)[对电子邮件的](https://github.com/mperham/sidekiq/wiki/Delayed-Extensions)特殊 ala DJ 支持）
4.  不太确定，我们使用when + cron 进行重复性工作
5.  你会喜欢 Sidekiq 的小内存占用

# ios - Xcode 即席配置

> ID：12813856
> 
> 赞同：0
> 
> 时间：2012-10-10T07:09:38.273
> 
> 标签：ios, xcode, adhoc

我刚刚通过 iTunes 将我的第一个临时配置应用程序分发到了我的 iPad，一切似乎都运行良好，除了我的应用程序在 iPad 上没有显示图标，只有一个银色按钮。

当我启动应用程序时，屏幕变黑约 2 秒钟，然后再次显示“桌面”。

我不知道我现在应该怎么做。iPad上没有“日志文件”之类的东西，是吗？我猜它没有真正启动的原因可能有一百个原因。

在模拟器上它工作得很好。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:04:09.613

我认为您已经在编辑中获得了所需的答案，但要回答原始问题。

您只需要在门户中添加 UDID，其他任何地方都不需要。

您可以从 AdHoc 设备获取崩溃报告。同步设备，然后查看 ~/Library/Logs/CrashReporter/MobileDevice/

或者，如果它是您的设备，请连接该设备并使用管理器中的“设备”面板。

纯白色图标表示您没有为部署设备设置图标。设置图标后我从未有过这个。检查目标摘要是否有任何图标错误，它们通常显示在图标空间旁边。

# java - IBM DB2 9.7 错误代码 840，选择语句列表太大

> ID：12813858
> 
> 赞同：0
> 
> 时间：2012-10-10T07:09:40.747
> 
> 标签：java, hibernate, db2

我们将 Hibernate 与 IBM DB2 9.7 一起使用。数据库给出关于 Hibernate 生成的选择语句列表太大（包括很多连接）的错误。错误代码是 840。可以做些什么来解决这个问题吗？我知道生成的选择列表很长，但是可以将 Hibernate 设置为将其拆分为几部分吗？

编辑：我重新打开了这个，因为问题似乎有点大。所以在[https://hibernate.onjira.com/browse/ANN-140](https://hibernate.onjira.com/browse/ANN-140)有一个 JIRA 问题（现在被拒绝） 。

所以问题在于，使用 Hibernate Annotations，不可能使用 Join 策略添加鉴别器。然而，XML 配置确实支持这一点。

Pavel 很好地说明了上述链接讨论中的问题，如下所示：

```
"It would be nice to see how the problem with the multiple joins is faced when the
 underlying DB has restriction on the number of joins one can execute in a single SQL?
For instance MySQL seems to allow only 31 joins. What happens if the class hierarchy
has more     than 31 sub-classes?" 
```

以上就是我遇到的问题。我们使用注解，子类很多，创建了大量的连接，破坏了 DB2 语句。

对此有何评论？我也找不到直接的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:17:36.597

Hibernate 很少有抓取策略来优化 Hibernate 生成的 select 语句，使其尽可能高效。获取策略在映射关系中声明，用于定义 Hibernate 如何获取其相关的集合和实体。

获取策略有四种获取策略

1.  fetch-”join” = 禁用延迟加载，始终加载所有集合和实体。
2.  fetch-”select”（默认）=延迟加载所有集合和实体。
3.  batch-size=”N” = 最多获取“N”个集合或实体，*不记录*。
4.  fetch-”subselect” = 将它的集合分组到一个 sub select 语句中。

有关详细说明，您可以查看[Hibernate 文档](https://community.jboss.org/wiki/AShortPrimerOnFetchingStrategies)。

# vba - 将表导出到另一个访问数据库

> ID：12813865
> 
> 赞同：2
> 
> 时间：2012-10-10T07:10:13.400
> 
> 标签：vba, ms-access, ms-access-2007

我的 Access 数据库中有一个查询，另一个 Access 数据库中有一个结构完全相同的表。我需要编写一个脚本，将查询中的所有条目添加到表中。我怎样才能做到这一点？

我的任务和功能之间的区别在于`Extarnal Data -> Export -> Access Database`我需要**添加**新条目并保存旧条目，但此工具只能**将** 旧条目替换为新条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:14:12.633

1.  在源数据库中创建到目标表的链接表。
2.  然后，使用附加查询将查询结果插入到链接表中。

编辑：您也可以使用单个 SQL 语句执行此操作：

```
INSERT INTO DestinationTable (Field1, Field2)
IN "C:\path\to\file.accdb"
SELECT Field1,Field2
FROM SourceTable 
```

但是[参考资料](http://msdn.microsoft.com/en-us/library/office/bb177907%28v=office.12%29.aspx)说：

> 为了提高性能和易用性，请使用链接表而不是 IN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:42:30.910

对于任何希望在 VBA 中链接表格的人......

```
strDbName = "C:\FolderPath\DatabaseName.mdb"
strLinkTbl = "tblNameOfTableYouWantToLink"
strNameTbl = "tblWhatYouWantToNameIt" ' This can be the actual 
                                      ' table name or something different

DoCmd.TransferDatabase acLink, "Microsoft Access", strDbName, _
    acTable, strLinkTbl, strNameTbl 
```

然后你的 SQL 看起来像：

```
CurrentDb.Execute "INSERT INTO " & strNameTbl _
   & " (Field1, Field) SELECT Field1, Field2 FROM SourceTable 
```

# android - 系统终止应用程序进程后从头开始重新启动活动

> ID：12813866
> 
> 赞同：3
> 
> 时间：2012-10-10T07:10:22.703
> 
> 标签：android

当活动在被系统杀死后恢复时（我的意思是应用程序进程被杀死，并且进程使用旧的活动堆栈重新启动），活动恢复旧的状态 - 是否可以清除此活动状态并从头开始重新启动活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:58:13.990

只需检查当您的活动被杀死时调用哪个方法...onDestroy() 或 onPause()，很可能。当“杀死”您的活动时，您的活动实际上并没有被破坏，它被暂停，因此 onResume() 被执行，因为您的状态被保留了。要销毁您可以在 onPause() 方法中使用 finish() 的活动，请查看**[这篇文章](https://stackoverflow.com/questions/4131585/how-to-destroy-an-activity-in-android)**以了解如何执行此操作。

# db2 - 在 Centos 6.0 上安装 db2

> ID：12813869
> 
> 赞同：0
> 
> 时间：2012-10-10T07:10:36.317
> 
> 标签：db2, centos

首先可以在 CentOs 6.0 上安装 DB2-C-Express 10.1 吗？我正在尝试使用 Light 版本。我尝试安装它，但安装后无法从 bin 执行 ./db2sampl 、 ./db2 等命令。任何指针？安装步骤有什么好的链接吗？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:53:39.147

我熟悉 DB2 的“完整”版本。一般来说，安装程序应该已经创建了一个实例所有者，例如“db2inst1”。登录该帐户并尝试一下。.bashrc 文件应该已经包含它。如果您想从另一个帐户运行它，请在实例主目录中获取 db2profile 文件：

```
. ~db2inst1/sqllib/db2profile 
```

另一个帐户需要正确的权限才能执行管理命令。

# merge - 将模型添加到现有模型 RDF

> ID：12813870
> 
> 赞同：0
> 
> 时间：2012-10-10T07:10:43.577
> 
> 标签：merge, rdf, jena

我试图合并 2 个现有的 RDF/XML 模型。我尝试了不同的解决方案：

*   `model1.union(model2)`
*   `model1.add(model2) //adding a complete model`
*   `model1.add(model2.listStatements())`

我在 Java 中使用 Jena。

我从第二个模型中删除了包络标签（如`Equipment`），但我总是遇到同样的问题：生成的模型并没有真正合并：它包含每个添加模型的包络。例如，我有 2 个文档，但端点不同。应该将它们合并为一个包含所有数据的文档：

端点 A 中的 bookid123

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.w3schools.com/rdf/">
<rdf:Description rdf:about="http://endpointA/bookid123">
  <si:title>W3Schools.com</si:title>
</rdf:Description>
</rdf:RDF> 
```

端点 B 中的 bookid123

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.w3schools.com/rdf/">
<rdf:Description rdf:about="http://endpointB/bookid123">
  <si:author>Jan Egil Refsnes</si:author>
</rdf:Description>
</rdf:RDF> 
```

结果，我是这样的：

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.w3schools.com/rdf/">
<rdf:Description rdf:about="http://endpointA/bookid123">
  <si:title>W3Schools.com</si:title>
</rdf:Description>
<rdf:Description rdf:about="http://endpointB/bookid123">
  <si:author>Jan Egil Refsnes</si:author>
</rdf:Description>
</rdf:RDF> 
```

但我需要这样的东西：

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.w3schools.com/rdf/">
<rdf:Description rdf:about="http://couldbeanything/bookid123">
  <si:title>W3Schools.com</si:title>
  <si:author>Jan Egil Refsnes</si:author>
</rdf:Description>
</rdf:RDF> 
```

有没有比获取每个语句更聪明的方法`model1`，将它们添加到 中`model2`，除了由于源 uri 而不同的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:10:53.413

在 RDF 中，标识符是完整的 URI，它们不被视为您碰巧在其中找到它们的任何文档的一部分。因此，在您的示例中，

```
http://endpointA/bookid123
http://endpointB/bookid123 
```

是事物的唯一且独立的名称。因此，从 RDF 的角度来看，merge 不会将三元组与这些主题组合在一起是非常正确的。

在您的情况下，您想要断言，通过 RDF 模型之外的某种方式，您知道并且*实际上*是相同的资源，因此关于一个的陈述可以被认为也是关于另一个的陈述。`http://endpointA/bookid123``http://endpointB/bookid123`

有两种方法可以处理这个问题。首先，您可以使用 OWL 来表示这两个资源表示同一个人（为了简洁起见，我将使用 Turtle 语法，它不会改变含义）：

```
<http://endpointA/bookid123> owl:sameAs <http://endpointB/bookid123> . 
```

为了使其工作，您需要使用一个`OWL_MEM_MICRO_RULE_INF`附加了 OWL 推理器（例如 ）的模型。

第二种方法更暴力：对于每两个资源`resource1`并且`resource2`您想要合并，运行一个循环来复制一个的语句也成为另一个的语句：

```
for (StmtIterator i = resource1.listStatements(); i.hasNext(); ) {
    Statement s = i.next();
    resource2.addProperty( s.getPredicate(), s.getObject() );
} 
```

# ruby - 如何使用 watir 捕获 HTTP 完整标头

> ID：12813872
> 
> 赞同：1
> 
> 时间：2012-10-10T07:10:56.523
> 
> 标签：ruby

我需要捕获发出请求后的 HTTP 响应。我尝试过使用“net/http”gem，但它没有给我完整的响应头。我试过的代码是

```
uri = URI("http:/example.com")
res = Net::HTTP.get_response(uri)
res.to_hash 
```

我得到了一些响应标头但不是完整的标头，我在 firebug 中检查了相同的请求，它提供了一些额外的标头，我通过我的代码得到了什么

任何人都可以帮助我获得完整的 HTTP 响应标头，或者通过调用浏览器来做到这一点的任何技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:07:02.180

也许这会有所帮助：[WebDriver：你没有 HTTP 状态代码？！](http://jimevansmusic.blogspot.com/2012/07/webdriver-y-u-no-have-http-status-codes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T09:17:16.923

不是一个完整的答案，但更多的是你的方向:)

不可能使用 Webdriver（参见[http://jimevansmusic.blogspot.nl/2012/07/webdriver-yu-no-have-http-status-codes.html](http://jimevansmusic.blogspot.nl/2012/07/webdriver-y-u-no-have-http-status-codes.html)）。

可能的解决方案：

1.  使用 Selenium::Client
2.  使用代理

**解决方案 1（Selenium::Client）：**

您可以使用 Selenium（也由 Watir Webdriver 使用）来完成。在这里查看：http: [//blog.testingbot.com/2011/12/21/capture-network-traffic-with-selenium](http://blog.testingbot.com/2011/12/21/capture-network-traffic-with-selenium)

```
require "rubygems"
gem "selenium-client"
require "selenium/client"
gem 'test-unit'
require 'test/unit'
# since this code comes from their site (should not be needed)
gem "testingbot"
require "testingbot"

class ExampleTest < TestingBot::TestCase
  attr_reader :browser

  def setup
    @browser = Selenium::Client::Driver.new \
        :host => "hub.testingbot.com",
        :port => 4444,
        :browser => "firefox",
        :version => "8",
        :platform => "WINDOWS",
        :url => "http://www.google.com",
        :timeout_in_second => 60

    browser.start_new_browser_session(:captureNetworkTraffic => true)
  end

  def teardown
    browser.close_current_browser_session
  end

  def test_command
    browser.open "/"
    p browser.browser_network_traffic
  end
end 
```

根据文章，这将在 Firefox 8 中打开 Google 并返回网络流量。响应的一个示例是：

```
"403 GET http://localhost:5555/favicon.ico1333 bytes 94ms 
(2011-12-21T15:53:06.352+0100 - 2011-12-21T15:53:06.446+0100
 Request Headers - Host => localhost:5555 - 
User-Agent => Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1) Gecko/20100101
Firefox/8.0.1 - Accept => image/png,image/*;q=0.8,*/*;q=0.5 - 
Accept-Language => en-us,en;q=0.5 - Accept-Encoding => gzip, deflate - Accept-Charset => ISO-8859-1,utf-8;q=0.7,*;q=0.7 - 
Proxy-Connection => keep-aliveResponse Headers - Date => Wed, 21 Dec 2011 14:53:06 GMT - 
Server => Jetty/5.1.x (Windows 7/6.1 x86 java/1.6.0_26 - Content-Type => text/html - 
Content-Length => 1333 - Via => 1.1 (jetty) 
```

解决方案 2（代理）：

检查[http://bmp.lightbody.net/](http://bmp.lightbody.net/)和[https://github.com/jarib/browsermob-proxy-rb](https://github.com/jarib/browsermob-proxy-rb)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:08:36.180

尝试这个：

```
uri = URI("http:/example.com")
res = Net::HTTP.get_response(uri)
res.header.to_hash 
```

如果您想获取标头信息，那么 Watir 可能不适合您。你想解决什么问题？

# perl - Perl - 将输出打印到不同目录中的文件

> ID：12813873
> 
> 赞同：2
> 
> 时间：2012-10-10T07:10:59.177
> 
> 标签：perl, file, path, directory, file-io

早上好！

如果之前已经发布过，我很抱歉 - 我找不到它。我只需要一点点指向正确的方向，这是我的作业，我觉得它快完成了。我想要做的是从运行脚本的不同文件夹中的文件中获取数据，在 Perl 中处理数据，然后将输出打印到另一个目录。现在我完成了这两个部分，但我失败的是 Perl 没有找到我想要保存文件的路径。它只是说“不存在具有该名称的文件或目录”，但确实如此！这是脚本的一部分：

```
my @files = <$ENV{HOME}/Docs/unprocessed/*.txt>;
my $path = "$ENV{HOME}/Docs/results";

<looping through @files, processing each file in the unprocessed folder...>

open (OUTFILE, $path . '>$file') or die $!;
print OUTFILE ""; # "" Is really the finished calculations from the loop, not important here.
close FILE;
close OUTFILE; 
```

我敢打赌它是愚蠢的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:12:26.077

因为您将“写入”标记`>`与文件名混合在一起。这：

```
open (OUTFILE, $path . '>$file') 
```

应该：

```
open (OUTFILE, ">$path/$file") 
```

您还可能必须`.../Docs/unprocessed/`从文件名中删除前缀：

```
use File::Basename;

open (OUTFILE, ">$path/" . basename($file)) 
```

# c# - 如何在停用应用程序时获取电话应用程序页面的信息

> ID：12813874
> 
> 赞同：0
> 
> 时间：2012-10-10T07:11:00.033
> 
> 标签：c#, windows-phone-7

当我停用我的应用程序时，有什么方法可以找出最后一个电话应用程序页面，例如页面名称，它在停用时 App.xaml.cs 的停用方法的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:30:06.723

第一：每个页面都可以重写[OnNavigatedFrom](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.onnavigatedfrom%28v=vs.95%29.aspx)方法。您可以将重要信息存储到[ApplicationSettings](http://dotnet.dzone.com/articles/using-application-settings)中。

在[Application.Deactivated](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.deactivated%28v=vs.92%29.aspx)事件处理程序上，您可以从设置中读取此信息。

另外，看看[这个页面](http://www.windowsphonegeek.com/articles/WP7-Application-Lifecycle-and-Tombstoning)。你可以找到一些有用的想法。

第二：您可以使用[此技巧](http://debugmode.net/2011/09/06/getting-url-of-current-page-in-windows-phone-dynamically-through-code/)来存储`Uri`最后一页。因此，您将获得页面名称和传递的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:20:01.247

恐怕 Application_Deactivated 函数无法通过它的参数告诉您该信息。

但我认为您可以在全球环境中记录最新导航到页面的信息。

# winapi - _asm int 5H，可以用visual studio来执行这个指令吗？

> ID：12813875
> 
> 赞同：0
> 
> 时间：2012-10-10T07:11:01.883
> 
> 标签：winapi, assembly, x86, interrupt-handling

_asm int 5h 通常用作 prtscrn。怎么查这个。不仅 prntscrn 任何中断，如 reboot int 19h.. 等都可以通过应用程序中断。我试图为重启编码

```
int _tmain(int argc, _TCHAR* argv[])
{
    //_asm mov al, 2
    _asm int 19h //reboot
    //_asm in 3
} 
```

它给予访问冲突

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:15:20.013

一般来说，这些中断是受保护的（假设您没有在实模式 DOS 下运行）。也许 int 5h*可能会*起作用，因为它是按下打印屏幕键的中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:37:01.957

BIOS 或 MSDOS 中断（int 0x10 到 0x33 以及一些很少使用的较大数字的中断）都不能在 Windows 应用程序中工作。它们只能在 DOS 程序中工作。Windows 使用不同的方法为 Windows 应用程序提供其功能，并且 Windows 应用程序不支持所有这些 BIOS/DOS 整数。在 Windows 应用程序中，它们会导致异常，通常会导致操作系统终止您的程序。

# iphone - 在另一个 ViewController 中确定索引

> ID：12813876
> 
> 赞同：0
> 
> 时间：2012-10-10T07:11:05.010
> 
> 标签：iphone, objective-c, ios

我`NSMutableArray`来自`NSCachesDirectory`，我正在每个 VIEW 中重新创建/重新加载数组。我正在显示/预览它`UIScrollView`，可以在 VIEW_A 中删除它。在另一个`ViewController`VIEW_B 中，我有另一个预览，用于另一个目的。

我需要的是当我删除 VIEW_A 中的图像时，我将能够在 VIEW_B 中确定已删除的图像或索引。因为我在 VIEW_B 中使用了他们的索引。我怎么能做到。我正在考虑将其全部保存，`NSUserDefaults`但如何保存。

删除方法：

```
 [button removeFromSuperview];

    [_buttons removeObjectAtIndex:button.tag];
    [_images removeObjectAtIndex:button.tag];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%u.png", button.tag]];           
    [fileManager removeItemAtPath: fullPath error:NULL]; 
```

我只想知道/确定从其他视图中删除的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:30:39.627

我不确定我是否真的理解你的问题，但这是我的回应：

如果您需要在某些更改后更新某个对象（例如您的数组）。您应该使用模式观察者。您可以使用 NSNotificationCenter（在基础库中）免费获得一个，但我不鼓励它。您可以使用 kvo/kvc，但它不像在模式观察器中那样干净。

顺便说一句，您应该只使用一个数组，如果您需要对其进行更改，请使用特定的控制器来完成。（不像你的 UIViewA/B 那样来自客户端）

在wiki上如何使用它（在java中，但骨架是相同的）： [http ://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

顺便说一句，NSUserDefault 应该只用于存储用户偏好，而不是一些应用程序逻辑值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:32:28.400

最好的选择是使用委托方法。

在 VIEW_B 中设置委托协议，并在删除方法中调用类似...

```
[self.delegate didDeleteImageAtIndex:button.tag]; 
```

然后在 VIEW_A 中，在您推送 VIEW_B 之前将其设置为委托。

然后在 VIEW_A 有方法...

```
- (void)didDeleteImageAtIndex:(int)index
{
    //delete image from VIEW_A's array
} 
```

# java - 我可以使用 Mockito 延迟存根方法响应吗？

> ID：12813881
> 
> 赞同：82
> 
> 时间：2012-10-10T07:11:31.950
> 
> 标签：java, junit, mocking, mockito

我现在正在编写单元测试。我需要使用 Mockito 模拟长期运行方法来测试我的实现的超时处理。Mockito 可以吗？

像这样的东西：

```
when(mockedService.doSomething(a, b)).thenReturn(c).after(5000L); 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-10T07:14:07.440

您可以简单地让线程休眠所需的时间。当心 - 这样的事情确实会减慢您的自动化测试执行速度，因此您可能希望将此类测试隔离在单独的套件中

它看起来类似于：

```
when(mock.load("a")).thenAnswer(new Answer<String>() {
   @Override
   public String answer(InvocationOnMock invocation){
     Thread.sleep(5000);
     return "ABCD1234";
   }
}); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2018-05-25T13:24:06.587

从 mockito 2.8.44 开始，**org.mockito.internal.stubbing.answers.AnswersWithDelay**可用于此目的。这是一个示例用法

```
 doAnswer( new AnswersWithDelay( 1000,  new Returns("some-return-value")) ).when(myMock).myMockMethod(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-04-12T09:44:14.397

我为此创建了一个实用程序：

```
import java.time.Duration;
import java.util.concurrent.TimeUnit;

import static org.mockito.Mockito.doAnswer;

public class Stubber {

    public static org.mockito.stubbing.Stubber doSleep(Duration timeUnit) {
        return doAnswer(invocationOnMock -> {
            TimeUnit.MILLISECONDS.sleep(timeUnit.toMillis());
            return null;
        });
    }

    public static <E> org.mockito.stubbing.Stubber doSleep(Duration timeUnit, E ret) {
        return doAnswer(invocationOnMock -> {
            TimeUnit.MILLISECONDS.sleep(timeUnit.toMillis());
            return ret;
        });
    }

} 
```

在您的测试用例中只需使用：

```
doSleep(Duration.ofSeconds(3)).when(mock).method(anyObject()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-28T14:21:55.860

单元测试更好的是创建调用实际 Thread.sleep(long l) 的方法，然后模拟该方法。有了它，您可以为您的测试注入令人敬畏的行为，从而使您的测试认为它正在等待您想要的时间。有了它，您可以在眨眼之间运行大量测试，并且仍然可以测试不同的时间相关场景。在使用它之前，我的 UnitTest 运行了六分钟。现在它低于 200 毫秒。

```
public class TimeTools {
public long msSince(long msStart) {
    return ((System.nanoTime() / 1_000_000) - msStart);
}

public long msNow() {
    return (System.nanoTime() / 1_000_000);
}

public Boolean napTime(long msSleep) throws InterruptedException {
    Thread.sleep(msSleep);
    return true;
}
}
-----------------------------------
@Mock
TimeTools Timetools;

@TEST
public void timeTest() {
when(timeTools.msSince(anyLong()))
            .thenReturn(0l)
            .thenReturn(5_500l)
            .thenReturn(11_000l)
            .thenReturn(11_000l)
            .thenReturn(0l)
            .thenReturn(11_000l)
            .thenReturn(11_000l)
            .thenReturn(0l)
            .thenReturn(29_000l);
} 
```

但最好的方法是注入 sleeper 然后模拟它。所以在你的测试中，你实际上不会睡觉。然后您的单元测试将像闪电一样快速运行。

# ant - Gradle：通过从属性文件中查找标记来替换标记

> ID：12813887
> 
> 赞同：11
> 
> 时间：2012-10-10T07:11:51.617
> 
> 标签：ant, build, gradle

目前我知道我们可以用`org.apache.tools.ant.filters.ReplaceTokens`以下方式在构建期间替换文件的内容。

`myBeans.xml`：

```
<bean id="mybean1" class="com.test.MyClass1" >
    <property name="myprop1" value="@myproperty@" />
</bean> 
```

`my.properties`：

```
myprop=testme 
```

毕业文件：

```
from file("myBeans.xml"), {
   filter(ReplaceTokens, tokens: ["myproperty": project.properties["myprop"]])
} 
```

但是，我希望 gradle 从`my.properties`文件中找到属性名称并将其替换为 xml 文件（`myprop`在过滤器中未提及）。如果没有，我将不得不`PlaceHolders`手动添加所有内容。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-10T07:59:16.280

您可以将属性作为映射传递给 ReplaceTokens 配置。密钥必须与您希望替换的令牌匹配。例子：

豆类.xml：

```
<bean id="mybean1" class="com.test.MyClass1" >
    <property name="myprop1" value="@myproperty@" />
</bean> 
```

我的属性：

```
myproperty=testme 
```

构建.gradle：

```
task myCopy(type:Copy){
    from "bean.xml"
    into ("$buildDir/beans")
    def myProps = new Properties()
    file("my.properties").withInputStream{
        myProps.load(it);   
    }
    filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: myProps)
} 
```

希望有帮助。

干杯，勒内

# android - mapviewballoon - 添加多个标记时如何设置缩放

> ID：12813895
> 
> 赞同：1
> 
> 时间：2012-10-10T07:12:21.203
> 
> 标签：android, google-maps

我在我的项目 mapviewballon 中使用了库名称[mapviewballoon](https://github.com/jgilfelt/android-mapviewballoons)。

当我在不同位置设置 20,30 个或更多引脚时，它会缩放到中心的最后一个引脚，我想要的是缩放级别使其显示地图视图中的所有引脚。

我该如何解决这个问题，或者计算正确的缩放，目前我给出了 14。

做如下事情：

```
OverlayItem overlayItem = null;
GeoPoint point = null;
for (int i = 0; i < nearbyObjMapList.size(); i++) {
       if (!nearbyObjMapList.get(i).latitude.equals("0") && !nearbyObjMapList.get(i).longitude.equals("0")) {
           Latitude = Float.parseFloat(nearbyObjMapList.get(i).latitude);
           Longitude = Float.parseFloat(nearbyObjMapList.get(i).longitude);
           point = new GeoPoint((int)(Latitude*1E6),(int)(Longitude*1E6));
           overlayItem = new OverlayItem(point, nearbyObjMapList.get(i).venue_name,                            "");
           itemizedOverlay.addOverlay(overlayItem);
       }

                    }
if (thisState == null) {

      final MapController mc = mapView.getController();
      mc.animateTo(point);
      mc.setZoom(14);

 } else {

      // example restoring focused state of overlays
      int focused;
      focused = thisState.getInt("focused_1", -1);
      if (focused >= 0) {
                itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
          }
      focused = thisState.getInt("focused_2", -1);
           if (focused >= 0) {
                 temizedOverlay2.setFocus(itemizedOverlay2.getItem(focused));
            }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:28:15.413

您需要跨越缩放才能实现这一点，我更新了您的代码以便按如下方式执行（它可能有错误，因为我无法调试它）：

```
int minLat=Integer.MAX_VALUE;
int maxLat=Integer.MIN_VALUE;
int minLng=Integer.MAX_VALUE;
int maxLng=Integer.MIN_VALUE;

OverlayItem overlayItem = null;
GeoPoint point = null;
for (int i = 0; i < nearbyObjMapList.size(); i++) {
       if (!nearbyObjMapList.get(i).latitude.equals("0") && !nearbyObjMapList.get(i).longitude.equals("0")) {
           Latitude = Float.parseFloat(nearbyObjMapList.get(i).latitude);
           Longitude = Float.parseFloat(nearbyObjMapList.get(i).longitude);
           point = new GeoPoint((int)(Latitude*1E6),(int)(Longitude*1E6));
           overlayItem = new OverlayItem(point, nearbyObjMapList.get(i).venue_name,                            "");
           itemizedOverlay.addOverlay(overlayItem);

           maxLat = Math.max((int) (Latitude*1.0E6), maxLat);
           minLat = Math.min((int) (Latitude*1.0E6), minLat);
           maxLng = Math.max((int) (Longitude*1.0E6), maxLng);
           minLng = Math.min((int) (Longitude*1.0E6), minLng);
       }

                    }
if (thisState == null) {

      final MapController mc = mapView.getController();
      mc.zoomToSpan(Math.abs(maxLat-minLat), Math.abs(maxLng-minLng));
      mc.animateTo(new GeoPoint((minLat+maxLat)/2,(minLng+maxLng)/2));

 } else {

      // example restoring focused state of overlays
      int focused;
      focused = thisState.getInt("focused_1", -1);
      if (focused >= 0) {
                itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
          }
      focused = thisState.getInt("focused_2", -1);
           if (focused >= 0) {
                 temizedOverlay2.setFocus(itemizedOverlay2.getItem(focused));
            }

  } 
```

`zoomToSpan()`注意：您可以在或函数（如 +0.001 或 +radius）处添加额外的固定值或标记`animateTo()`半径，以获得更大的范围以适合您的标记（这将用作填充）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:34:38.440

不要使用 setZoom() 并且当您有许多要指向的引脚时使用 zoomToSpan 总是更好。您在 for 循环之后添加以下代码，这对我来说非常适合。

```
 if(nearbyObjMapList.length!=0)
                   {
                    mapOverlays.add(itemizedoverlay);
                    // showing all overlay items
                    itemizedoverlay.populateNow();
                   // Adjusting the zoom level so that you can see all the markers on map
                    mv.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));
                    // Showing the center of the map
                    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
                   }
                   mv.postInvalidate(); 
```

# php - Print_r 不适用于 preg_split

> ID：12813902
> 
> 赞同：0
> 
> 时间：2012-10-10T07:12:48.153
> 
> 标签：php, arrays, preg-split

我编写了一个函数来在我的数据库中搜索。我想消除单词之间不必要的空格，所以我使用了 preg_split。我之前没有使用过 preg split，所以我使用 print_r 来查看它是否做了我希望它做的事情（消除空格）。然而，当我使用 print_r 在搜索中键入单词后，我的屏幕上什么也没有显示数组。

```
function search_results($keywords){
    $returned_results = array();
    $where = "";

    $keywords = preg_split('/[\s]+/', $keywords);
    print_r($keywords);

} 
```

如果有人能给我一个关于我做错了什么的想法或更好的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:17:06.617

你的正则表达式没有任何匹配，这就是你没有得到任何数组的原因。试试这个：

```
 $keywords = preg_split("/\\s/", $keywords); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:24:50.440

我测试了你的功能，`search_results("hi there");`它在这里完美运行，没有问题。这是我按预期得到的结果：

```
Array
(
    [0] => hi
    [1] => there
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:36:59.720

提尔这个

```
$base_str = "this    is a   string  with multiple    spaces between  some words.            "; 

$start = microtime(1); 
for ($i=0; $i<100000; $i++){ 
    $string = $base_str; 
    while(strpos($string, '  ') !== false) 
    { 
         $string = str_replace('  ', ' ', $string); 
    } 
} 

echo $string; 
```

# xml - SVG：将蒙版应用于路径组 标签

> ID：12813908
> 
> 赞同：8
> 
> 时间：2012-10-10T07:13:05.983
> 
> 标签：xml, svg, masking

我无法将`<mask>`图层应用到`<g>`路径组。

当我将 my`<mask>`应用于 a`<rect>`时，它按预期工作，但在 a 上使用它时`<g>`，整个组消失。

这是我的文件

```
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="600px" viewBox="0 0 600.000000 600.000000" preserveAspectRatio="xMidYMid meet">

     <defs>
        <mask id="myMask" maskUnits="userSpaceOnUse" x="0" y="0" width="600" height="600">
            <rect fill="white" x="0" y="0" width="600" height="600"></rect>
            <circle cx="30" cy="30" r="20" fill="black"></circle>
            <circle cx="300" cy="300" r="200" fill="black"></circle>
        </mask>
     </defs>

     <rect fill="#FFFFFF" width="21456" height="21456" mask="url(#myMask)"></rect>

     <g transform="translate(0.000000,600.000000) scale(0.100000,-0.100000)" fill="#100059" stroke="none" mask="url(#myMask)"> <!-- a bunch of <path>s --> </g>

     <g transform="translate(0.000000,600.000000) scale(0.100000,-0.100000)" fill="#f542b3" stroke="none"> <!-- a bunch of <path>s --> </g>

</svg> 
```

我也尝试过使用具有相同结果的剪辑路径的类似方法 - 使用`<rect>`但不使用`<g>`. 我也尝试将`mask`属性应用于`<path>`具有相同结果的单个元素

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T13:20:34.873

我严重怀疑这个问题是否仍然有效，但我想无论如何我都会在这里为其他任何人提供答案。

要同时屏蔽一组元素，请将它们全部包含在一个`<g></g>`块中。然后你有几个选择：

# 简单样式：在所有元素上设置不透明度

如果您对整个组的不透明度或其他转换感到满意，请给`<g></g>`元素一个类或 ID，并相应地设置 CSS：

```
<g id="someGroup" class="class1 class2">
  <path ...></path>
  <circle ...></circle>
  <whatever ...></whatever>
</g> 
```

和CSS（可能不是全部在一起，但你明白了）：

```
g,
#someGroup,
.class1,
.class2 {
    opacity: 0.5;
} 
```

# 不太容易：设置面具并申请到小组（OP 问题）

首先，您必须使用 ID 在块中设置掩码`<defs></defs>`，然后将其应用于组。一个例子：

```
<mask id="easyMask" x="0" y="0" width="1" height="1"
    maskContentUnits="objectBoundingBox">
    <rect x="0" y="0" width="1" height="1"
        style="fill-opacity: 0.25; fill: white;"/>
</mask> 
```

我不会解释屏蔽元素，因为 OP 似乎已经知道这一点。但是，要获得详尽的指南，请前往[此处](http://www.w3.org/TR/SVG/masking.html#Masking)阅读。无论如何，一旦你在 defs 中设置了你的掩码，就将它应用到组中：

```
<g style="mask: url(#easyMask);">
  <path ...></path>
  <circle ...></circle>
  <whatever ...></whatever>
</g> 
```

其中最重要的部分是`style="mask: url(#easyMask);"`实际应用遮罩的样式元素。它将适用于`g`组的所有子元素。只需替换`#easyMask`您的面具 ID，您就可以开始了！没有尝试过任何其他选择器（比如`.class1`或其他），但 # 的存在似乎表明 CSS 样式的选择器。做一个实验:-)

# html - 表数据根据 Metro 应用程序中的数组项连续变化？

> ID：12813911
> 
> 赞同：2
> 
> 时间：2012-10-10T07:13:14.197
> 
> 标签：html, windows-8, microsoft-metro, winjs

我有一个 Metro 应用程序，其中试图显示表数据不断变化，就像 Windows 8 启动屏幕中磁贴上的数据变化一样。实际上，我有一个包含许多项目的数组，我的表需要显示这些项目描述。对于每 5 秒我需要更改我桌子上的项目描述，我应该为我的场景做些什么？谁能给我建议.. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:39:51.830

我建议使用数据绑定来完成这项任务。

用 WinJS.Binding.List 替换简单的数组（它将通知 ListView 新的或删除的项目）并使用 WinJS.Binding.mixin 或 WinJS.Binding.as 使项目本身可观察（参见[http://msdn .microsoft.com/en-us/library/windows/apps/br229801.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229801.aspx)）。

这样，您可以将 ListView 项目模板中的元素绑定到域模型的属性，从而在您更改模型中的某些内容时立即更新 UI。

# oracle - 将 grails 与遗留数据库一起使用

> ID：12813913
> 
> 赞同：0
> 
> 时间：2012-10-10T07:13:16.263
> 
> 标签：oracle, grails, legacy-database

我遇到了将 Grails 与旧版 Oracle 数据库一起使用的问题。我有带有主键文本列 TARGETTYPECODE 的旧表 TARGETTYPES：

```
CREATE TABLE "TMS"."TARGETTYPES" 
   (    "TARGETTYPECODE" VARCHAR2(100) NOT NULL ENABLE, 
    "TARGETTYPEDESCR" VARCHAR2(255 CHAR), 
    "ACTIVE" CHAR(1) DEFAULT 'Y' NOT NULL ENABLE, 
     CONSTRAINT "TARGETTYPES_PK" PRIMARY KEY ("TARGETTYPECODE")
   ) 
```

我创建了 grails 域类：

```
package tmsconf

class Targettypes {

    static transients = ['Targettypecode']
    void setTargettypecode(String Targettypecode) {
            id = Targettypecode
    }

    String  getTargettypecode() {
            return Targettypecode
    }

    String targettypedescr
    String active

    static mapping = {
         table 'TARGETTYPES'
         version false
         columns {
             id generator:'assigned', column:"TARGETTYPECODE", type:'text'
         } 
    }

    static constraints = {
        id()
        targettypecode(size: 1..100, blank: false)
        targettypedescr(size: 0..255)
        active(size: 1..1, blank: false)
        id(nullable: true)
    }
    String toString() {
        return "${targettypecode}" 
    }
} 
```

我还创建了控制器类：

```
package tmsconf

class TargettypesController {
    def scaffold = true
} 
```

应用程序已成功启动。

当我单击链接 tmsconf.TargettypesController 时，控制台出现错误：

```
Error 2012-10-10 10:55:37,243 [http-bio-8080-exec-9] ERROR util.JDBCExceptionReporter  - ORA-00918: column ambiguously defined

| Error 2012-10-10 10:55:37,305 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver  - SQLSyntaxErrorException occurred when processing request: [GET] /TMSConf/targettypes/list
ORA-00918: column ambiguously defined
. Stacktrace follows:
Message: ORA-00918: column ambiguously defined

    Line | Method
->>  445 | processError         in oracle.jdbc.driver.T4CTTIoer
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    396 | processError         in     ''
|    879 | processError . . . . in oracle.jdbc.driver.T4C8Oall
|    450 | receive              in oracle.jdbc.driver.T4CTTIfun
|    192 | doRPC . . . . . . .  in     ''
|    531 | doOALL               in oracle.jdbc.driver.T4C8Oall
|    207 | doOall8 . . . . . .  in oracle.jdbc.driver.T4CPreparedStatement
|    884 | executeForDescribe   in     ''
|   1167 | executeMaybeDescribe in oracle.jdbc.driver.OracleStatement
|   1289 | doExecuteWithTimeout in     ''
|   3584 | executeInternal . .  in oracle.jdbc.driver.OraclePreparedStatement
|   3628 | executeQuery         in     ''
|   1493 | executeQuery . . . . in oracle.jdbc.driver.OraclePreparedStatementWrapper
|     96 | executeQuery         in org.apache.commons.dbcp.DelegatingPreparedStatement
|     55 | <init> . . . . . . . in grails.orm.PagedResultList
|     15 | list                 in tmsconf.TargettypesController
|    186 | doFilter . . . . . . in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter             in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker . . . . .  in java.util.concurrent.ThreadPoolExecutor
|    603 | run                  in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . . .  in java.lang.Thread 
```

请帮忙，我哪里错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:59:36.217

这应该有效：

```
package tmsconf

class Targettypes {

   String targettypecode
   String targettypedescr
   String active

   static mapping = {
      version false
      id generator: 'assigned', name: 'targettypecode'
   }

   static constraints = {
      targettypecode(size: 1..100, blank: false)
      targettypedescr(size: 0..255, nullable: true)
      active(size: 1..1, blank: false)
   }

   String toString() {
      targettypecode
   }
} 
```

您现在可以`name`在块中使用该属性`mapping`，因此不需要创建瞬态 get/set 对来包装 id。

我还删除了表名和列名设置，因为它们被设置为无论如何都会使用的内容，并且`type:'text'`因为 Hibernate 知道字段的类型，所以它可以将其用于列的类型。

另外，我根据您显示的 SQL添加`nullable: true`了 for 。`targettypedescr`

通常，当您尝试映射到遗留数据库时，请使用[http://grails.org/doc/latest/ref/Command%20Line/schema-export.html](http://grails.org/doc/latest/ref/Command%20Line/schema-export.html)脚本查看 Hibernate 认为表应该是什么样的. 调整`constraints`and`mapping`块，直到它“足够接近”。

# javascript - jQuery 多个内部回调和范围

> ID：12813917
> 
> 赞同：2
> 
> 时间：2012-10-10T07:13:52.450
> 
> 标签：javascript, jquery, scope

服务器发送一些 JSON。它包含结构化数据列表。我将此数据显示为文本框列表，每个文本框都有自己的`onClick`事件。点击时，文本框的值设置为结构化数据中的任何值（这是一个唯一的 ID，这意味着每个文本框都应在点击时显示 ID）。

当我第一次单击任何文本框时，它的值设置正确 - 使用来自服务器数据的 ID。但是当我单击其他文本框时，它们会显示第一次单击文本框的 ID！

我已经尝试了闭包 var 和`$.proxy()`，但它们似乎不起作用。我已经检查了的内容，并且它们在函数`myAttribute`的每次迭代中都会发生变化。`$.each()`但是，该`click()`事件似乎在“运行时”进行评估并且不会更新。

问题是：

1.  如何解决我的问题，以便`myProcessedAttribute`包含正确的数据而不是第一次点击时的数据？
2.  我觉得我拥有四个嵌套函数的方法可能不是最佳实践。或者是吗？

代码：

```
$.ajax({
  [...]
  success: function (data) {
    [...]
    $.each(data.listOfData, function () {
      [...]
      var myAttribute = this.myCoolAttribute; // <-- closure
      jQuery('<p/>')
      [...]
      .click(function () {
        var myProcessedAttribute = process(myAttribute);
        [jquery ui dialog...]
        create: function () {
          // it always contains the same data
          // the data on first click, after that, it never changes.
          $("#myDialog").html(myProcessedAttribute);
        }
      });
    });
  }
}); 
```

编辑：我刚刚`alert(myProcessedAttribute)`加入了`click()`活动`create`。在前一种情况下，警报显示正确的数据。在后一种情况下，警报仅在第一次点击时显示，但在随后的点击中再也没有出现过！

我的解决方案：我认为在调用 .dialog({...}) 时，新对话框会替换旧对话框，但我错了。我通过在创建新对话框之前销毁旧对话框解决了这个问题。

更好的解决方案：请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:45:23.747

创建对话框时调用“create”事件。第二次打开对话框时，不会触发 create 事件，因为该元素上已经存在对话框对象。如果您想在同一个对话框小部件上使用不同的值，请使用“打开”事件。这是一个样本

[http://jsfiddle.net/RaWrC/](http://jsfiddle.net/RaWrC/)

# php - 基于 Web 的单点登录认证系统

> ID：12813918
> 
> 赞同：3
> 
> 时间：2012-10-10T07:14:01.270
> 
> 标签：php, security, authentication, single-sign-on

我希望得到有关我设计的身份验证系统的反馈。

要求是创建一个封闭的单点登录网络环境，一旦我们的一名员工访问我们的一个网络应用程序，他们就会被要求使用由我们的 LDAP 支持的凭据登录。登录后，他们会在设定的时间段或浏览器会话以及我们所有的 Web 应用程序中保留此登录信息。谷歌的网络资产如何与谷歌帐户一起工作，但对于我们的内部系统。

用户自己在 windows、mac 或 linux 上操作，有些只是在平板电脑上操作，所以这个身份验证环境需要完全在线存在，带有 mod_auth_kerb 等的 kerberos 不会削减它。

我们当前所有的 Web 应用程序都使用 PHP。

到目前为止，我拥有的系统如下所示。

存在一个中央身份验证系统，我将其称为身份验证处理程序，或简称为“处理程序”，以及一个或多个身份验证“客户端”Web 应用程序，我将其称为身份验证请求程序，或简称为“请求程序”。我将把用户和他们的浏览器称为“用户”。

此外，要使其正常工作，需要在处理程序中为请求者预先配置`requestor_id`该 ID 的唯一和返回 URL。为处理程序生成一个私钥，并将一个公钥预先提供给所有请求者。

## 用户访问请求者

1.  用户输入请求者的 URL。
2.  此用户在请求者上不存在会话，因此请求者`SESSION_ID`在 PHP 中创建一个新的（使用内置会话处理程序和`session_start`）。
3.  会话没有身份验证，因此请求者将生成一个指向已配置处理程序的 URL，该处理程序由两部分组成，一个`authrequest`令牌和一个`envelope`.
    1.  请求者首先`session_regenerate_id`为客户端的此身份验证请求重新生成一个新的 session_id（在 PHP 中）。
    2.  然后请求者生成一个随机密码，在这种情况下使用 PHP`openssl_random_pseudo_bytes`并将其存储在会话数据中
    3.  然后，请求者使用PHP using的随机密码对`SESSION_ID`using进行加密。`AES256``authrequest``openssl_encrypt`
    4.  然后，请求者通过连接它的唯一`requestor_id`性、':' 和 base64 编码的随机密码来生成信封数据。
    5.  `openssl_public_encrypt`然后使用PHP中处理程序的预共享公钥加密请求者的信封数据。
4.  请求者然后向`location:`用户发送一个标头，其中包含加密`envelope`的和`authrequest`作为 URL 参数的处理程序。
5.  处理程序将使用它的私钥解密信封，并将 clientID 和密码分开。
6.  处理程序将检查`requestor_id`我们是否配置了这个，如果没有，将通知用户请求者未被识别。
7.  处理程序将对用户进行身份验证（在这种情况下，通过询问用户名和密码并检查 LDAP 和/或通过预身份验证会话）
8.  然后处理程序将生成一个返回`authtoken`给请求者
    1.  处理程序将`SESSION_ID`使用`authrequest`信封中的解密和解码密码解密
    2.  `SESSION_ID`处理程序将使用信封中的解密和解码密码加密包含登录凭据（用户名、GUID 等）的新字符串和 ID
9.  然后，处理程序将`location:`包含`authtoken`as URL 参数的标头发送给用户，并将其发送到为此的预配置 URL `requestor_id`。
10.  请求者接收请求，并将使用用户会话中的密码解密令牌。
11.  请求者将确认`SESSION_ID`与用户当前会话匹配，否则它将重新启动身份验证。
12.  然后，请求者可以使用返回的 crednetialID 将本地用户标识为已通过身份验证。

这个过程可以在不同的系统中重复，以提供单点登录行为。

所以，问题：

1.  有谁知道一个预先存在的、标准化的认证系统，它可以满足与上述类似的要求和预制件？
2.  如果不是，并且鉴于我不是安全专家，是否有任何上述内容可能被破坏？即这种方法的弱点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:55:05.213

*您在加密之前*对密码的 base64 编码实际上没有任何意义（至少对我而言），因为它是一个主要用于序列化要在其他地方通信的数据的函数。但是，信封加密后，您又拥有二进制数据，因此您可能想要做的是序列化密文。

此外，您可能想检查是否可以在客户端对凭据进行哈希处理（1000 次迭代和加盐的 MD5 或 SHA-* 很好）。您可以查看[RFC2617](http://www.ietf.org/rfc/rfc2617.txt) (HTTP Digest Access Authentication) 以获得灵感。这是为了在服务器解密时对抗密码的漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:18:58.397

您可以使用 Kerberos：[http](http://web.mit.edu/kerberos/www/)
://web.mit.edu/kerberos/www/ 或者您实现内部 OpenID 系统： http: [//openid.net/](http://openid.net/)
还有几个用于 OpenID 的 PHP 库：[http://openid。网络/开发人员/库/](http://openid.net/developers/libraries/)

# mule - 运行 mvn test 时找不到 Mule 3.3 Datamapper xsd

> ID：12813925
> 
> 赞同：0
> 
> 时间：2012-10-10T07:14:28.780
> 
> 标签：mule

我目前正在使用 Mule EE，它在那里工作正常（我跳过测试以便我可以构建二进制文件）但是一旦我运行 mvn test 我得到一个 SaxParseException 因为它找不到架构定义。这是我得到的错误。

> org.xml.sax.SAXParseException：schema_reference.4：无法读取架构文档“http://www.mulesoft.org/schema/mule/ee/data-mapper/current/mule-data-mapper.xsd”，因为1) 找不到文件；2) 文件无法读取；3) 文档的根元素不是`<xsd:schema>`.

# objective-c - Xcode 4 中的地理围栏，didEnterRegion 提供了多个回调

> ID：12813926
> 
> 赞同：1
> 
> 时间：2012-10-10T07:14:32.793
> 
> 标签：objective-c, dictionary, xcode4, geofencing

我正在尝试基于地理围栏在 Xcode 4 中创建一个应用程序。当进入具有特定中心坐标和以米为单位的特定半径的区域时，应用程序将通知用户。我所有的区域都保存在 p 列表中。但是，我得到了多个回调，并且调用了比我想要的更多的位置（即，即使不在正确位置的位置也被调用。下面你可以看到我们的代码。我还添加了一个 kml 层，你可以忽略它，因为它无关与围栏。我的 p-list 是一个数组，包含 20 个类型为字典的项目，键是标题、纬度、经度和半径。半径设置为 50 米。

视图控制器.h

```
#import "ViewController.h"
#import <CoreLocation/CoreLocation.h>

@implementation ViewController
@synthesize coordinateLabel;
@synthesize mapView;

CLLocationManager *_locationManager;
NSArray *_regionArray;

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self initializeMap];
    [self initializeLocationManager];
    NSArray *geofences = [self buildGeofenceData];
    [self initializeRegionMonitoring:geofences];
    [self initializeLocationUpdates];
}

- (void)viewDidUnload
{
    [self setCoordinateLabel:nil];
    [self setMapView:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)initializeMap {
    CLLocationCoordinate2D initialCoordinate;
    initialCoordinate.latitude = 41.88072;
    initialCoordinate.longitude = -87.67429;

    [self.mapView setRegion:MKCoordinateRegionMakeWithDistance(initialCoordinate, 400, 400) animated:YES];
    self.mapView.centerCoordinate = initialCoordinate;
    [self.mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
}

- (void)initializeLocationManager {
    // Check to ensure location services are enabled
    if(![CLLocationManager locationServicesEnabled]) {
        [self showAlertWithMessage:@"You need to enable location services to use this app."];
        return;
    }

    _locationManager = [[CLLocationManager alloc] init];
    _locationManager.delegate = self;
}

- (void) initializeRegionMonitoring:(NSArray*)geofences {

    if (_locationManager == nil) {
        [NSException raise:@"Location Manager Not Initialized" format:@"You must initialize location manager first."];
    }

    if(![CLLocationManager regionMonitoringAvailable]) {
        [self showAlertWithMessage:@"This app requires region monitoring features which are unavailable on this device."];
        return;
    }

    for(CLRegion *geofence in geofences) {
        [_locationManager startMonitoringForRegion:geofence];
    }
}

- (NSArray*) buildGeofenceData {
    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"regions" ofType:@"plist"];
    _regionArray = [NSArray arrayWithContentsOfFile:plistPath];

    NSMutableArray *geofences = [NSMutableArray array];
    for(NSDictionary *regionDict in _regionArray) {
        CLRegion *region = [self mapDictionaryToRegion:regionDict];
        [geofences addObject:region];
    }

    return [NSArray arrayWithArray:geofences];
}

- (CLRegion*)mapDictionaryToRegion:(NSDictionary*)dictionary {
    NSString *title = [dictionary valueForKey:@"title"];

    CLLocationDegrees latitude = [[dictionary valueForKey:@"latitude"] doubleValue];
    CLLocationDegrees longitude =[[dictionary valueForKey:@"longitude"] doubleValue];
    CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake(latitude, longitude);

    CLLocationDistance regionRadius = [[dictionary valueForKey:@"radius"] doubleValue];

    return [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate
                                                   radius:regionRadius
                                               identifier:title];
}

- (void)initializeLocationUpdates {
    [_locationManager startUpdatingLocation];
}

#pragma mark - Location Manager - Region Task Methods

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"Entered Region - %@", region.identifier);
    [self showRegionAlert:@"Entering Region" forRegion:region.identifier];
}

- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSLog(@"Exited Region - %@", region.identifier);
    [self showRegionAlert:@"Exiting Region" forRegion:region.identifier];
}

- (void)locationManager:(CLLocationManager *)manager didStartMonitoringForRegion:(CLRegion *)region {
    NSLog(@"Started monitoring %@ region", region.identifier);
}

#pragma mark - Location Manager - Standard Task Methods

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    self.coordinateLabel.text = [NSString stringWithFormat:@"%f,%f",newLocation.coordinate.latitude, newLocation.coordinate.longitude];
}
#pragma mark - Alert Methods

- (void) showRegionAlert:(NSString *)alertText forRegion:(NSString *)regionIdentifier {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:alertText
                                                      message:regionIdentifier
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
}

- (void)showAlertWithMessage:(NSString*)alertText {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Location Services Error"
                                                        message:alertText
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];
    [alertView show];
}

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <CoreLocation/CoreLocation.h>

@implementation ViewController

@synthesize coordinateLabel;
@synthesize mapView;
@synthesize kmlParser;

CLLocationManager *_locationManager;
NSArray *_regionArray;

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self initializeMap];
    [self initializeLocationManager];
    NSArray *geofences = [self buildGeofenceData];
    [self initializeRegionMonitoring:geofences];
    [self initializeLocationUpdates];

    // Locate the path to the route.kml file in the application's bundle
    // and parse it with the KMLParser.
    NSString *path = [[NSBundle mainBundle] pathForResource:@"urbanPOIsthlm" ofType:@"kml"];
    NSURL *url = [NSURL fileURLWithPath:path];
    kmlParser = [[KMLParser alloc] initWithURL:url]; 
    [kmlParser parseKML]; 

    // Add all of the MKOverlay objects parsed from the KML file to the map.
    NSArray *overlays = [kmlParser overlays]; 
    [mapView addOverlays:overlays]; 

    // Add all of the MKAnnotation objects parsed from the KML file to the map.
    NSArray *annotations = [kmlParser points];
    [mapView addAnnotations:annotations];

    // Walk the list of overlays and annotations and create a MKMapRect that
    // bounds all of them and store it into flyTo.
    MKMapRect flyTo = MKMapRectNull;
    for (id <MKOverlay> overlay in overlays) {
        if (MKMapRectIsNull(flyTo)) {
            flyTo = [overlay boundingMapRect];
        } else {
            flyTo = MKMapRectUnion(flyTo, [overlay boundingMapRect]);
        }
    }

    for (id <MKAnnotation> annotation in annotations) {
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) {
            flyTo = pointRect;
        } else {
            flyTo = MKMapRectUnion(flyTo, pointRect);
        }
    }

    // Position the map so that all overlays and annotations are visible on screen.
    mapView.visibleMapRect = flyTo;
}

- (void)viewDidUnload
{
    [self setCoordinateLabel:nil];
    [self setMapView:nil];
    //DERAS alltså KML!!!
    [kmlParser release];
    ///
    [super viewDidUnload];
}

/////Deras alltså KML!!!
#pragma mark MKMapViewDelegate

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    return [kmlParser viewForOverlay:overlay];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    return [kmlParser viewForAnnotation:annotation];
}
//////////
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)initializeMap {
    CLLocationCoordinate2D initialCoordinate;
    initialCoordinate.latitude = 59.3353733;
    initialCoordinate.longitude = 18.0712647;

    [self.mapView setRegion:MKCoordinateRegionMakeWithDistance(initialCoordinate, 400, 400) animated:YES];
    self.mapView.centerCoordinate = initialCoordinate;
    [self.mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
}

- (void)initializeLocationManager {
    // Check to ensure location services are enabled
    if(![CLLocationManager locationServicesEnabled]) {
        [self showAlertWithMessage:@"You need to enable location services to use this app."];
        return;
    }

    _locationManager = [[CLLocationManager alloc] init];
    _locationManager.delegate = self;
}

- (void) initializeRegionMonitoring:(NSArray*)geofences {

    if (_locationManager == nil) {
        [NSException raise:@"Location Manager Not Initialized" format:@"You must initialize location manager first."];
    }

    if(![CLLocationManager regionMonitoringAvailable]) {
        [self showAlertWithMessage:@"This app requires region monitoring features which are unavailable on this device."];
        return;
    }

    for(CLRegion *geofence in geofences) {
        [_locationManager startMonitoringForRegion:geofence
                            desiredAccuracy:kCLLocationAccuracyBest];
    }
}

- (NSArray*) buildGeofenceData {
    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"regions" ofType:@"plist"];
    _regionArray = [NSArray arrayWithContentsOfFile:plistPath];

    NSMutableArray *geofences = [NSMutableArray array];
    for(NSDictionary *regionDict in _regionArray) {
        CLRegion *region = [self mapDictionaryToRegion:regionDict];
        [geofences addObject:region];
    }

    return [NSArray arrayWithArray:geofences];
}

- (CLRegion*)mapDictionaryToRegion:(NSDictionary*)dictionary {
    NSString *title = [dictionary valueForKey:@"title"];    
    CLLocationDegrees latitude = [[dictionary valueForKey:@"latitude"] doubleValue];
    CLLocationDegrees longitude =[[dictionary valueForKey:@"longitude"] doubleValue];
    CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake(latitude, longitude);
    //CLLocationDistance regionRadius = 50.000;

    CLLocationDistance regionRadius = [[dictionary valueForKey:@"radius"] doubleValue]; //<--STOD DOUBLE ISTÄLLET

    return [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate
                                                   radius:regionRadius
                                               identifier:title];
}

- (void)initializeLocationUpdates {
    [_locationManager startUpdatingLocation];
}

#pragma mark - Location Manager - Region Task Methods

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region{
    NSLog(@"Entered Region - %@", region.identifier);
    [self showRegionAlert:@"Entering Region" forRegion:region.identifier];
}

- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSLog(@"Exited Region - %@", region.identifier);
    [self showRegionAlert:@"Exiting Region" forRegion:region.identifier];
}

- (void)locationManager:(CLLocationManager *)manager didStartMonitoringForRegion:(CLRegion *)region {
    NSLog(@"Started monitoring %@ region", region.identifier);
}

#pragma mark - Location Manager - Standard Task Methods

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    self.coordinateLabel.text = [NSString stringWithFormat:@"%f,%f",newLocation.coordinate.latitude, newLocation.coordinate.longitude];
}

#pragma mark - Alert Methods

- (void) showRegionAlert:(NSString *)alertText forRegion:(NSString *)regionIdentifier {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:alertText
                                                      message:regionIdentifier
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
}

- (void)showAlertWithMessage:(NSString*)alertText {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Location Services Error"
                                                        message:alertText
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];
    [alertView show];
}

@end 
```

Appdelegate.h

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    ViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ViewController *viewController;

@end 
```

Appdelegate.m

```
#import "AppDelegate.h"

#import "ViewController.h"

@implementation AppDelegate

//DERAS ALLTSÅ KML!!
@synthesize window;
@synthesize viewController;
//

//Deras alltså KML!!
#pragma mark -
#pragma mark Application lifecycle
//

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    //Deras alltså KML!!
    [window addSubview:viewController.view];
    //
    return YES;
}

//Deras alltså KML!!!
- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}
//

@end 
```

# maven - 使用 mvn pax-provision 解决传递依赖

> ID：12813930
> 
> 赞同：1
> 
> 时间：2012-10-10T07:15:04.660
> 
> 标签：maven, osgi, equinox, apache-felix, pax

这是我父母 pom 的一部分：

```
<plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
                    </instructions>
                </configuration>
                <executions>
                    <execution>
                        <id>bundle-manifest</id>
                        <phase>process-classes</phase>
                        <goals>    
                            <goal>manifest</goal>
                        </goals>   
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.ops4j</groupId>
                <artifactId>maven-pax-plugin</artifactId>
                <version>1.4</version>
            </plugin>
               .
               .
               .   
<modules>
    <module>cross-annotations</module>
    <module>cross-main</module>
    <module>cross-event</module>
    <module>cross-exception</module>
    <module>cross-ui</module>
    <module>cross-tools</module>
    <module>cross-main-api</module>
    <module>cross-math</module>
</modules>
<dependencies>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.1</version>
        <scope>test</scope>
    </dependency>
    <dependency> 
        <groupId>org.projectlombok</groupId> 
        <artifactId>lombok</artifactId> 
        <version>0.10.6</version>
        <scope>provided</scope> 
    </dependency>
    <dependency>
        <groupId>org.netbeans.api</groupId>
        <artifactId>org-openide-util-lookup</artifactId>
        <version>RELEASE71</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.6.1</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jul-to-slf4j</artifactId>
        <version>1.6.1</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.osgi.core</artifactId>
        <version>1.0.0</version>
        <!-- this is provisional, eventually, osgi.core should be provided by the runtime container -->
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

当我使用 mvn pax:provision 运行它时，我会收到类似的错误

```
org.osgi.framework.BundleException: Unresolved constraint in bundle cross-annotations [4]: Unable to resolve 4.0: missing requirement [4.0] osgi.wiring.package; (&(osgi.wiring.package=org.slf4j)(version>=1.6.0)(!(version>=2.0.0))) [caused by: Unable to resolve 1.0: missing requirement [1.0] osgi.wiring.package; (&(osgi.wiring.package=org.slf4j.impl)(version>=1.6.0))]g! 
```

或者

```
Unresolved constraint in bundle cross-ui [21]: Unable to resolve 21.0: missing requirement [21.0] osgi.wiring.package; (&(osgi.wiring.package=org.apache.commons.configuration)(version>=1.6.0)(!(version>=2.0.0))) [caused by: Unable to resolve 9.0: missing requirement [9.0] osgi.wiring.package; (osgi.wiring.package=javax.mail.internet)] 
```

当然会抛出异常，因为所需的要求没有安装在 OSGi 容器中，但我认为这是 pax:provision 的目的。

所以正是我的问题：是否可以使用 pax 工具或任何其他 mvn 插件自动解决 OSGi 依赖关系？

# json - 用于无限滚动的分页 JSON

> ID：12813940
> 
> 赞同：0
> 
> 时间：2012-10-10T07:15:49.380
> 
> 标签：json, service, local-storage, infinite-scroll

是否可以模拟 json 数据的无限滚动。我有 10K 条记录，而且大多数时候，我一次看到 50 条。但是一个请求被发送到服务。服务发送 10K 条记录，但一旦我收到 50 条，我想在 UI 中显示它而不是等待 10K 条记录加载。有没有我可以用来快速获取数据但继续将其余数据加载到对象中的技巧？数据也可以进入本地存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:19:53.130

我认为您正在寻找的东西已经在这个问题中得到了回答。

[jquery ajax，增量读取流？](https://stackoverflow.com/questions/7740646/jquery-ajax-read-the-stream-incrementally)

希望能帮助到你。

# android - 如何从android应用程序在sqlite中插入当前日期

> ID：12813953
> 
> 赞同：2
> 
> 时间：2012-10-10T07:16:41.747
> 
> 标签：android, sqlite, datetime

我想在 SQLite 数据库日期时间类型字段中插入当前日期。我怎样才能做到这一点？

**更新**：使用`mDb.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (datetime()) ");`

我能够插入喜欢`date_created=2012-10-10 13:02:08`并且我想要这种格式`10 Oct 2012 12:48`如何实现这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T07:22:19.530

我更喜欢以下方法来完成它：

1.  使用默认设置创建表以自动放置当前日期时间。例如：

    ```
    ColumnName DATETIME DEFAULT CURRENT_TIMESTAMP 
    ```

2.  创建`SimpleDateFormat`当前日期并将其转换为 SQL 格式字符串。例如：

    ```
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String strDate = sdf.format(new Date());

    ContentValues values = new ContentValues();
    values.put("ColumnName", strDate); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:19:10.087

您可以使用：

```
mDb.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (datetime()) "); 
```

检查：[https ://stackoverflow.com/a/819605/1434631](https://stackoverflow.com/a/819605/1434631)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T11:27:41.287

```
 ContentValues coloumnVlues = new ContentValues();
   //SimpleDateFormat dateFormat = new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
   Date date = new Date();
   coloumnVlues.put("fname", fname);

   // inserted date in database like May 31, 2013 10:42:53 AM it's simulator datetime
   coloumnVlues.put("created_date", DateFormat.getDateTimeInstance(). format(date)); 
```

他们不需要使用 SimpleDateFormat。

您从数据库中获取日期时间下面链接中给出的示例

[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

# objective-c - 使用 systcl 检测其他正在运行的 iOS 应用程序

> ID：12813956
> 
> 赞同：2
> 
> 时间：2012-10-10T07:16:52.773
> 
> 标签：objective-c, ios, sysctl

我使用 sysctl() 函数来获取进程列表，但是有没有办法检测当前正在运行的应用程序？我的应用程序是基于位置的应用程序，它在后台运行。我想检测哪个应用程序在特定时间间隔在前台运行。这可能吗？

我知道苹果禁止这种应用行为，但我仍然喜欢尝试这个。

# java - 如何验证 Java Web 应用程序中的每个请求

> ID：12813959
> 
> 赞同：0
> 
> 时间：2012-10-10T07:17:02.023
> 
> 标签：java, struts

我有一个 java-struts Web 应用程序，我必须在其中实现一种机制来查找来自客户端的请求是否有效？

`How to validate each request in java web application?`

假设一个请求访问特定页面，我必须检查该请求是否来自使用系统登录的客户端。

请帮助实现这一目标。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:19:15.160

您可以编写一个 servlet 过滤器。[您可以在此处](http://www.oracle.com/technetwork/java/filters-137243.html)阅读有关相同内容的更多信息

过滤器可以执行许多不同类型的功能。

1.  基于用户身份的身份验证阻止请求。
2.  记录和审计——跟踪 Web 应用程序的用户。
3.  图像转换-缩放贴图等。
4.  数据压缩——使下载更小。
5.  本地化——将请求和响应定位到特定的语言环境。
6.  XML 内容的 XSL/T 转换——以 Web 应用程序响应为目标的不止一种类型的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:21:15.440

[struts2 应用程序中的会话](https://stackoverflow.com/questions/5509606/sessions-in-struts2-application)

此链接有您的答案...使用会话并在应用程序级别启动它，以便它在整个应用程序中始终可用。只需检查您将在请求中收到的相应字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:46:25.647

验证请求应该在 - web-application-server - struts 本身 - 在模型中处理

为了安全/授权，我将使用您的 webserver/web-application-server 提供的功能。例如：使用 tomcat 时的领域。这些机制可以提供用户和更多的身份验证/授权信息，经过充分测试并保护您的应用程序而无需太多要求。

检查 web-application-server 的请求过滤器是一个不错的选择。

处理“struts-request”和改变处理的一个不错的选择是stuts-interceptors。 [http://struts.apache.org/2.0.6/docs/interceptors.html](http://struts.apache.org/2.0.6/docs/interceptors.html)

验证请求有时意味着在设置新值后验证模型本身。有 JSR303-Standard (http://jcp.org/en/jsr/detail?id=303) 但处理（尤其是攻击）取决于您。这可能非常棘手。

所以尽快处理和发现潜在的问题！

# node.js - Node.js & Redis：前一个redis请求回调中的另一个redis请求

> ID：12813961
> 
> 赞同：0
> 
> 时间：2012-10-10T07:17:15.910
> 
> 标签：node.js, redis

我希望有一些经验丰富的 Redis 开发人员可以向我解释这背后的逻辑。

我有一个集合作为键，我可以使用此代码提取集合中存储的所有对象；

```
redisClient.smembers("student_list", function(err,result){
        if(err)
            console.log(err);
        else {
            list = result;
            console.log(result);
        }
    }); 
```

这工作得很好，但是这个集合包含学生的 id，在另一个 redis 数据库中，我用学生的信息（JSON 字符串）映射了 id。**但是，当我像在console.log(result)**之后那样在其中放入一个函数时，它**不会运行**第二个 Redis 查询来获取所有学生的信息。我写过；

```
for(var i = 0; i < list.length; i++){
        console.log(i);
        redisClient.get(list[i],function(err,student){
            if(err)
                console.log("An error occured: "+err);
            else
                console.log(JSON.parse(student));
        });
    } 
```

当然，我尝试将此功能放在**smembers**回调之外。但是，当我这样做时，由于 Node 的异步特性，它只是尝试遍历一个空列表。循环**不工作**后，我看到 console.log(results) 方法工作，但由于循环通过，我无法获取任何数据。1）我的方法错了吗？2）是否不可能在另一个 Redis 查询的回调函数中调用 Redis 查询。（如果他们是**依赖**的，可以做些什么来克服？）

**PS：**当我尝试在另一个回调中运行 Redis 查询时，我收到此错误；

```
Error in get: Redis connection gone from close event. 
```

**PS2：**完整代码，以防万一；

```
redisClient.smembers("student_list", function(err,result){
        if(err)
            console.log("Err: " + err);
        else {
            list = result;
            console.log(result);

            for(var i = 0; i < list.length; i++){
                console.log(i);
                redisClient.get(list[i],function(err,student){
                    if(err)
                        console.log("An error occured: "+err);
                    else
                        console.log(JSON.parse(student));
                });
            }

        }
    }); 
```

# assembly - 带有一个参数的 X86 程序集中的 SAR 命令

> ID：12813962
> 
> 赞同：28
> 
> 时间：2012-10-10T07:17:16.337
> 
> 标签：assembly, x86, disassembly

在我正在分析的反汇编程序中，我找到了命令

```
sar %eax 
```

这是做什么的？我知道`sar`使用两个参数执行右移，但我无法找到仅使用一个参数的含义。

该程序是为 Intel x86 处理器编译的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T07:29:35.557

看起来反编译器使用了速记，`SAR EAX,1`其操作码为`0xD1F8`. 当立即数不是 1 时，也就是`SAR EAX,xx`操作码是`0xC1F8 xx`，请参阅 Intel 指令参考，卷。2B，4-353。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-07T22:42:23.970

当只有一个操作数时，隐含的移位为 1。

所以....

`SAR %EAX`暗示签署`%EAX >> 1`

因此，

```
SAR %eax = SAR $1, %eax 
```

我已经成功地证明了这一点，分析了 GDB 中的一些代码。

# php - 使用php从字符串中获取特定的IP地址

> ID：12813968
> 
> 赞同：0
> 
> 时间：2012-10-10T07:17:25.730
> 
> 标签：php, compare, ip-address

我编写了一个脚本来从字符串中搜索 IP 地址，它在正常情况下工作正常，但在特殊情况下会产生问题。这是我的代码。此脚本在以下情况下不起作用。

```
<?php
if(preg_match("/\b1.1.1.1\b/", "this is test 109.111.1.1"))
{
echo "A match was found.";
}
else
{
echo "A match was not found.";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:18:52.950

避开点：

```
if(preg_match("/\b1\.1\.1\.1\b/", "this is test 109.111.1.1")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:19:03.870

试试这个正则表达式模式，

```
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b 
```

您当前正则表达式的问题是`.`可以匹配任何字符。逃脱它，`\`所以它会匹配上`period`。

# iphone - 如何在 iPhone 相机应用程序中使用各种效果或滤镜

> ID：12813971
> 
> 赞同：1
> 
> 时间：2012-10-10T07:17:39.957
> 
> 标签：iphone, objective-c, ios, ios4

> **可能重复：**
> [如何将“过滤器”应用于 AVCaptureVideoPreviewLayer](https://stackoverflow.com/questions/5156872/how-to-apply-filters-to-avcapturevideopreviewlayer)

您好，我想在我的相机应用程序中使用各种效果和滤镜效果包括棕褐色，黑白，浮雕，漩涡，霓虹灯，彩虹，浮雕，任何教程，示例请帮助

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:32:42.273

Brad Larson 的[GPUImage](https://github.com/BradLarson/GPUImage)框架提供了大量的 GPU 加速效果。只需将 GPUImage 框架集成到您的项目中并根据需要使用过滤器。这很容易实现。

教程 [http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:09:09.437

您必须使用**核心图像过滤器参考**，您甚至可以更改每个像素的颜色。

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html)

希望对你有帮助...

# windows - Windows Clasic中的wpf DataGridColumn宽度

> ID：12813980
> 
> 赞同：1
> 
> 时间：2012-10-10T07:18:33.523
> 
> 标签：windows, wpfdatagrid, datagridcolumn

我有许多列的 DataGrid，最小化已用空间至关重要。此 DataGrid 的数据非常随机，somtimes 列可以为空，somtimes 填充大量数字，因此我决定不指定列宽。我正在使用 Windows 7 Basic 桌面设置（左图），它看起来不错，但我的一些用户使用 Windows Clasic 桌面设置（右图）并且列的宽度是不必要的。

“不允许新用户发布图片” - 所以没有图片

左图：带有标题“A”的空列，宽度为5mm，带有嵌入复选框的列，宽度为6mm 右图：带有标题“A”的空列，宽度为6mm，带有嵌入复选框的列，宽度为8mm

对于我的 20 个专栏来说，它让我退出了一个地方:(

我可以对 DataGridColumn 宽度做些什么以使其在 Windows Classic 中更紧？

# powerbuilder - 调用 ButtonClicked 事件

> ID：12813982
> 
> 赞同：2
> 
> 时间：2012-10-10T07:18:42.883
> 
> 标签：powerbuilder

`buttonclicked`我在数据窗口的事件下有一个脚本。我的问题是如何从其他事件（如父窗口`post_open`事件）调用特定按钮。

在 Windows`post_open`事件中，我有脚本，但`Bad Argument List For Function: buttonclicked`在编译时返回消息。如何更正此编译错误？

```
dw_Command.Event buttonclicked('b_read')

DWO: Datawindow
Event: buttonclicked

CHOOSE CASE Lower(dwo.Name)

CASE 'b_read'       

        SetPointer(Hourglass!)
        idt_ServerDate = gnv_app.of_getServerDate( )
        of_getInventoryAdvice( )

CASE 'b_exit'       
        MessageBox('','Close')
        Close(Parent) 

END CHOOSE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:27:27.353

已经给出了对所提问题的正确答案，但我将提出一个相反的观点：你应该（实际上）永远不要做你所要求的。当您在需要从另一个系统事件调用的系统事件中实现功能时，您可能应该将该功能分解为单独的自定义用户事件（或函数）并从两个位置调用它。为什么？

1.  语法更容易（正如这个问题的存在所证明的那样）。
2.  当您知道何时调用代码时，维护代码会更容易。以及在你中了彩票后接替你的人。
3.  今天所需的功能是相同的，但它迟早会分支。或者有人会尝试在祖先 ButtonClicked 中实现某些东西，认为它只会在单击按钮时触发。（我知道。有些人就是那样疯狂。）然后你会得到一些意大利面条解决方案来跟踪这是否是非按钮单击的 ButtonClick.... 丑陋。然后，迟早会有人受伤。

在某一时刻，我确信调用 ButtonClicked 似乎更容易。我敢打赌你已经在那个决定的边缘摇摇欲坠，有了一点想象力，我希望你能把脚本分成更模块化的东西。从来没有后悔把东西拆开...

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:20:57.620

> 函数的错误参数列表：buttonclicked

该消息告诉您，您没有将正确的类型和/或数量的参数传递给函数（或事件）。

如果您想自己调用它，该`ButtonClicked`事件需要 3 个必须模拟的参数：

*   `row`调用按钮的行号
*   `ReturnCode`由按钮执行的操作返回的长值
*   `dwo`一个数据窗口对象。它是对鼠标指针“单击”的控件的引用，您可以传递`dw.object.name_of_your_button`

您可以尝试以下方法：

```
long ll_arc
dw_Command.event buttonclicked( dw_Command.getrow(), ll_arc, dw_Command.object.b_read ) 
```

# bash - bash 命令跨越多行，中间有几行注释

> ID：12813987
> 
> 赞同：53
> 
> 时间：2012-10-10T07:18:59.213
> 
> 标签：bash

> **可能重复：**
> [Bash：如何为多行命令添加行注释](https://stackoverflow.com/questions/9522631/bash-how-to-put-line-comment-for-a-multi-line-command)

我想做这样的事情

```
sudo apt-get install \
  #a very long description
  #of the package
  #that spans multiple lines
  pkg1 \ #maybe I want an inline comment also
  #another description that
  #spans multiple lines
  pkg2 
```

请注意，我不仅对`apt-get`命令感兴趣。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-10T07:49:01.850

据我所知，Bash 在单个命令中忽略了“#”之后的所有内容，并且多行不会改变这一点。但是，您可能可以使用 bash 数组实现相同级别的表达式：

```
packagelist=(
  package1 # Inline Comments
  # Multiline Comments too
  package2
  # Package description goes here
  # Detailed descriptions..
)
sudo apt-get install ${packagelist[@]} 
```

# c# - 更改浏览器下载选项的 C# 代码

> ID：12813991
> 
> 赞同：0
> 
> 时间：2012-10-10T07:19:07.517
> 
> 标签：c#, firefox, browser

我正在尝试使用`c#`.

1）打开Firefox浏览器-->工具-->选项-->常规选项卡--->下载--->总是问我在哪里保存文件。

我想在我的应用程序中使用`c#`. 我希望当下载窗口打开时，`"Always ask me where to save file"`选项中的单选按钮会自动被选中。

我已经尝试过各种链接，但一切都是徒劳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:22:09.033

这是完整的代码，控制台应用程序。摘要：首选项文件位于应用程序漫游文件夹中，在 Windows 7 上是这样的：

C:\Users\MYNAME\AppData\Roaming\Mozilla\Firefox\Profiles\d9i9jniz.default\prefs.js

我们更改此文件，使其包含“user_pref("browser.download.useDownloadDir", false);"

重启firefox，大功告成。仅在 firefox 未运行时运行此应用程序。

```
 static void Main(string[] args)
    {
        if (isFireFoxOpen())
        {
            Console.WriteLine("Firefox is open, close it");
        }
        else
        {
            string pathOfPrefsFile = GetPathOfPrefsFile();

            updateSettingsFile(pathOfPrefsFile);
            Console.WriteLine("Done");
        }
        Console.ReadLine();
    }

    private static void updateSettingsFile(string pathOfPrefsFile)
    {
        string[] contentsOfFile = File.ReadAllLines(pathOfPrefsFile);
        // We are looking for "user_pref("browser.download.useDownloadDir", true);"
        // This needs to be set to:
        // "user_pref("browser.download.useDownloadDir", false);"
        List<String> outputLines = new List<string>();
        foreach (string line in contentsOfFile)
        {
            if (line.StartsWith("user_pref(\"browser.download.useDownloadDir\""))
            {
                Console.WriteLine("Found it already in file, replacing");
            }
            else
            {
                outputLines.Add(line);
            }
        }

        // Finally add the value we want to the end
        outputLines.Add("user_pref(\"browser.download.useDownloadDir\", false);");
        // Rename the old file preferences for safety...
        File.Move(pathOfPrefsFile, Path.GetDirectoryName(pathOfPrefsFile) +  @"\" + Path.GetFileName(pathOfPrefsFile) + ".OLD." + Guid.NewGuid().ToString());
        // Write the new file.
        File.WriteAllLines(pathOfPrefsFile, outputLines.ToArray());
    }

    private static string GetPathOfPrefsFile()
    {
        // Get roaming folder, and get the profiles.ini
        string iniFilePath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\Mozilla\Firefox\profiles.ini";
        // Profiles.ini tells us what folder the preferences file is in.
        string contentsOfIni = File.ReadAllText(iniFilePath);

        int locOfPath = contentsOfIni.IndexOf("Path=Profiles");
        int endOfPath = contentsOfIni.IndexOf(".default", locOfPath);

        int startOfPath = locOfPath + "Path=Profiles".Length + 1;
        int countofCopy = ((endOfPath + ".default".Length) - startOfPath);
        string path = contentsOfIni.Substring(startOfPath, countofCopy);

        string toReturn = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\Mozilla\Firefox\Profiles\" + path + @"\prefs.js";
        return toReturn;
    }

    public static bool isFireFoxOpen()
    {
        foreach (Process proc in Process.GetProcesses())
        {
            if (proc.ProcessName == "firefox")
            {
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:25:21.173

你试过什么？

Firefox 设置存储[在您的配置文件](http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data)中，所以我猜您可以更改给定文件的内容。键入`about:config`以查找您要查找的设置，我猜它在`browser.download`树中，更改它（在确保浏览器未运行之后），您应该很高兴。

# ruby-on-rails - 如何在 Rails 中包含外部库

> ID：12813995
> 
> 赞同：0
> 
> 时间：2012-10-10T07:19:09.077
> 
> 标签：ruby-on-rails, bundle, external, gemfile

谢谢你的时间！

我的 Windows XP 中安装了 rails。版本是：`Rails 3.2.7`

我已经安装了 nokogiri 并成功地开发了一个在 Ruby 中使用它的小程序。

但是对于 Rails，我不知道如何在我的代码中包含外部库。

根据这个主题，[如何在 Rails 中使用 ruby​​ 库？](https://stackoverflow.com/questions/4877793/how-to-use-ruby-libraries-in-rails), 我加`gem nokogiri`进去了`Gemfile`。但它仍然给我这个错误：`uninitialized constant SayController::Nokogiri`。

如果我添加`require 'nokogiri'`我的`say_controller.rb`，它会给我另一个错误`cannot load such file -- nokogiri`

我是 Rails 的新手。这似乎是一项非常简单的任务。我该怎么办。

顺便说一句，这是我跑步时得到的`bundle install`

```
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.3.6)
Using activesupport (3.2.7)
Using builder (3.0.0)
Using activemodel (3.2.7)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.7)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.7)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.7)
Using activeresource (3.2.7)
Using bundler (1.1.5)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.4)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.7)
Using coffee-rails (3.2.2)
Using jquery-rails (2.0.2)
Using nokogiri (1.5.5)
Using rails (3.2.7)
Using sass (3.2.0)
Using sass-rails (3.2.5)
Using sqlite3 (1.3.6)
Using uglifier (1.2.7)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

这是我的 Gemfile 的样子：

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

gem 'sqlite3'
gem 'nokogiri'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:29:54.753

如[github nokogiri](https://github.com/sparklemotion/nokogiri)中所述，我认为您需要在 say_controller.rb 中需要 2 行

例如：

```
require 'nokogiri'
require 'open-uri'
class ControllerName < ApplicationController
    def index
        doc = Nokogiri::HTML(open('http://www.google.com/search?q=sparklemotion'))
    end
end 
```

# c# - 如何从 C# 文件中获取下拉列表的用户控件中的选定索引

> ID：12813996
> 
> 赞同：1
> 
> 时间：2012-10-10T07:19:10.887
> 
> 标签：c#, asp.net

请帮我。因为我没有从用户控件中的 c# 文件中获取选定的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:21:28.453

您需要将其作为用户控件的属性公开，或者您需要使用查找控件来获取作为用户控件一部分的下拉列表的选定索引。

在用户控制代码隐藏文件中

```
public int drpSlctedIndex
{
  get 
  {
    return dropdownid.SelectedIndex;
  }
} 
```

或者

在用户控件使用的 aspx 页面的代码隐藏文件中

```
int index = (usercontrolid.FindControl("dropdownid") as DropDownList).SelectedIndex; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:22:38.093

怎么样

```
MyUserControl.ItsDropdown.SelectedIndex 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:30:21.263

```
//ASPX page
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //accessing the SelectedIndex
      int dl= ((DropDownList)this.userControlName.FindControl("DropDownList1")).SelectedIndex;
    }
} 
```

或任何你想访问**索引**的地方。

这是 TimerUserControl 和 Aspx 页面的代码。我尽力向你解释我所理解的。希望这会有所帮助。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="TimeUserControl.ascx.cs" Inherits="TimeUserControl" %>
hour:<asp:DropDownList ID="hour" runat="server">
    <asp:ListItem>0</asp:ListItem>
    <asp:ListItem>1</asp:ListItem>
    <asp:ListItem>2</asp:ListItem>
</asp:DropDownList>

<p>
    &nbsp;</p>
Minute:<asp:DropDownList ID="Minute" runat="server">
    <asp:ListItem>0</asp:ListItem>
    <asp:ListItem>1</asp:ListItem>
    <asp:ListItem>2</asp:ListItem>
</asp:DropDownList>

<p>
    &nbsp;</p>
Seconds:<asp:DropDownList ID="Seconds" runat="server">
    <asp:ListItem>0</asp:ListItem>
    <asp:ListItem>1</asp:ListItem>
    <asp:ListItem>2</asp:ListItem>
</asp:DropDownList> 
```

TimerUserControl 背后的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class TimeUserControl : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    public string SelectedTime
    {
        get
        {
            string _time = this.hour.SelectedItem.Text + ":" + this.Minute.SelectedItem.Text + " " + this.Seconds.SelectedItem.Text;
            return _time;
        }
    }

} 
```

**Aspx 页面背后的代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
//ASPX page
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
     // Accessing on Page Load with AutoPostBack Property to True for DropDownLists.
    //Every time you select any value from DropDownList the Page will Post back and Selected 
   // value will be in Response.
        string selectedtime = this.TimerUserControl.SelectedTime;
     Response.Write("Time----->" + selectedtime);
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        //accessing the selected time property if the SelectedTime(Public) property is in User control 
        // Here you wont require to set the AutoPostBack Property  to true for DropDownLists.

        string selectedtime = this.TimerUserControl.SelectedTime;

        Response.Write("Time----->" + selectedtime);
    }

} 
```