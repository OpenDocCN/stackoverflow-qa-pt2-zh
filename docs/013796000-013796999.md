# StackOverflow 问答 13796000-13796999

# javascript - 如何防止小书签加载其结果？

> ID：13796004
> 
> 赞同：0
> 
> 时间：2012-12-10T06:24:31.597
> 
> 标签：javascript, bookmarklet

我有一个简单的书签，用于在 prompt() 中显示元元素的值。它可以工作，但在运行窗口后，只加载字符串“null”或提示值。

**如何防止小书签导致页面加载？**

我只想让脚本弹出提示，但什么也不做。

我的书市是这样的：

```
javascript:var%20description;var%20metas=document.getElementsByTagName('meta');for(var%20x=0,y=metas.length;x<y;x++){if(metas[x].name.toLowerCase()=="description"){description=metas[x];}}prompt("Meta%20Description",description.content); 
```

..展开后看起来像这样：

```
var description;
var metas=document.getElementsByTagName('meta');
for(var x=0,y=metas.length;x<y;x++){
    if(metas[x].name.toLowerCase()=="description"){
        description=metas[x];
    }
}
prompt("Meta Description",description.content); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:20:53.180

这些天被接受的方式是将你的代码包装在一个“立即调用的函数表达式”中，像这样

```
(function(){ /*your code */})(); 
```

这比`void(0);`在末尾添加要好，因为将代码包装在函数中可以防止小书签中的命名变量和函数以及父 HTML 文档范围内的函数之间发生冲突。

换句话说，如果您在使用 JavaScript 代码和已经存在的变量“描述”的网页上运行您的书签，您可能会产生问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:28:07.820

`void(0);`在它的末尾添加。

```
javascript:var%20description;var%20metas=document.getElementsByTagName('meta');for(var%20x=0,y=metas.length;x<y;x++){if(metas[x].name.toLowerCase()=="description"){description=metas[x];}}prompt("Meta%20Description",description.content);void(0); 
```

# ios - UIViewControllers 和 ARC

> ID：13796006
> 
> 赞同：0
> 
> 时间：2012-12-10T06:24:51.410
> 
> 标签：ios, uiviewcontroller, automatic-ref-counting, dealloc

因此，经过深思熟虑并在花时间尝试搜索内存管理问题时有点沮丧后，我做了一些研究，最终屈服于更改为 ARC。而且相对无痛。然而，一个与我的 UIViewControllers 相关的新问题浮出水面，弧前它们都像宣传的那样工作，我将它们推入堆栈，它们出现了，我将它们从堆栈中弹出，调用了他们的 dealloc 方法，每个人都很高兴。切换到 ARC，永远不会调用 dealloc。这是不幸的。所以我对这个问题做了一些研究，让我列出我在做什么和/或不做什么

.firstly，我推入堆栈的视图没有明确声明为强。

. 子类拥有的父类的委托是 unsafe_unretained，但是为了覆盖基础，我什至注释掉了将委托设置为父类，这并不令人高兴。

. 关闭 NSzombies 显然这会导致东西停留在启用 ARC 的代码中

.我改变了我的代码，根据布拉德·拉森斯在[内存中的答案未在 ios 视图层次结构中发布](https://stackoverflow.com/questions/8747942/memory-not-released-in-ios-view-hierarchy)，从此

```
if (_friendsListVC == nil) 
{
    _friendsListVC = [[FriendsListViewController alloc] initWithNibName:nil bundle:nil];
    _friendsListVC.delegate = self;
}

[self.navigationController pushViewController:_friendsListVC animated:YES]; 
```

（_friendsListVC 是一个成员变量）。至此

```
 FriendsListViewController *fVC = [[FriendsListViewController alloc] initWithNibName:nil bundle:nil];
 //fVC.delegate = self;
 [self.navigationController pushViewController:fVC animated:YES]; 
```

再次没有Joy，dealloc断点永远不会被击中，问题是我在我的应用程序中推送和弹出了很多视图，所以这只会导致更多的内存问题，除了那些我改用ARC希望修复的问题。 ..

另请注意，我在此视图中以及其他一些代码块中都有一些代码块，但我不使用 self ，我也读过它是自我保留的，因此当涉及代码块时，您应该使用弱参考。

我被难住了，谁能解释一下ARC在做什么？或者我不尊重使用ARC做什么？并且为了将来参考，您想要推送到 ARC 中视图层次结构的所有视图都不是实例变量吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:13:51.550

我弄清楚了问题所在，但它并没有修复没有被释放的其他控制器，这些完全是出于不同的原因。因此，为了传播知识和减轻其他人的痛苦，我将列出可能导致保留周期的事情的数量，主要与 ARC 和 UIViewControllers 和代码块有关

1.  不要对你正在推进的观点有强烈的参考。

2.  如果您推送到视图层次结构的类有一个调用推送方法的类的委托，请将其设置为 unsafe_unretained 引用，实际上最好让您的所有委托为 unsafe_unretained，因为我的委托之一是我认为的强ARC转换器会为我做到这一点。

3.  关闭 NSZombies。不是永远介意你，只是为了当你需要确保在应该调用 dealloc 语句时。

4.  不要在代码块中直接引用 self，这会导致保留循环。如果需要使用self，在块外执行以下操作（然后使用weakself）

    > __unretained_unsafe className *weakSelf = self;

5.  当心静态引用，我对此不确定，但我有一个方法接受两个实例化的视图控制器并将一个推到另一个之上，引用被分配给这个类中它们的两个静态实例（不要问为什么），在使用后将它们归零后似乎解决了我的问题，我不知道为什么。

6.  这是另一个我不确定但在某处提到过一次或两次的问题，如果您在类中有代码块，请尽量不要在该块中使用实例变量，再次将变量设为 __unsafe_unretained。

就是这样，在检查了大多数这些并修复它们之后，我的所有视图都会在每次推送时调用它们的 dealloc 方法，而不是在某个奇怪的任意点。另外为了澄清这只是一个简短的清单，可以快速帮助面临相同问题的任何人，我并不声称对这里的一些概念有完全的理解，但我建议你应该这样做，因为我希望能及时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:48:35.090

我遇到了同样的问题。

当我从我的项目中禁用`NSZombie`选项时，它对我有用。我不知道为什么会这样。

*   转到 ProductEdit 方案
*   禁用 NSZombie

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:33:01.150

这正是 Instruments 存在的原因。运行 Leaks 工具，它会告诉您分配这些视图控制器的内容（您已经知道）以及我保留它们的其他内容（您不知道）。

此外，您声称存在内存泄漏，但直到您运行 ObjectAlloc 工具并看到内存使用实际上随着重复使用而攀升，您才知道这一点。

# c# - 拆分字符串数组

> ID：13796007
> 
> 赞同：1
> 
> 时间：2012-12-10T06:24:56.223
> 
> 标签：c#, substring

我有一个字符串数组，数组的每个元素都包含一个日期和一个姓氏，由一个空格分隔。例如，位置 1 的数组包含“12/10/2012 Smith”我只需要数组中每个位置的日期。我可以使用 Substring() 执行此操作吗？或者这不适用于数组？

```
 for(int i = 0; i < array.Length; i++) {
                if(array[i] == ' ') {
                    array[i].Substring(0, i);
                }
                Console.WriteLine (array[i]);
            } 
```

这行不通。我是否需要以某种方式查看数组中的每个字符才能使用 Substring()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:26:57.197

如果你有一个字符串数组`array[i].Split(' ')[0];`将拆分一个元素，元素`[0]`将是日期部分。

这假设您的数据是完美形成的，正如您所指定的。您可能希望添加检查以防止索引错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:37:16.493

尝试这个：

```
foreach(string item in array)
{
  string yourDate=item.Split(' ')[0];
  string yourName=item.Split(' ')[1];
} 
```

# jdeveloper - 如何突出显示部分 JDE Edward 背景？

> ID：13796010
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:25:15.417
> 
> 标签：jdeveloper, jdedwards

我有一组必须引起用户注意的数据。因此，我希望用不同的背景颜色突出显示它们。可以提供我的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:57:01.677

设置网格颜色 - 如果您在 FDA 设计表格。 [http://docs.oracle.com/cd/E17984_01/doc.898/e14706/grid_controls.htm](http://docs.oracle.com/cd/E17984_01/doc.898/e14706/grid_controls.htm) 或者，如果您使用 BI Publisher 设计报告 - 尝试条件行 - [https://blogs.oracle.com/xmlpublisher/entry /conditional_rows_and_columns](https://blogs.oracle.com/xmlpublisher/entry/conditional_rows_and_columns) 最简单的方法 - 一个接一个地放置两个相同的行，用不同的颜色 fe 格式化一个并有条件地显示一个或另一个。另外，您可以控制单元格属性（如背景颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:38:33.090

我用相同的请求做了一份报告，提醒用户一些重要信息。我没有使用更多颜色、粗体和大字体，而是使用了带有 Wingding 字体的标签，并带有红色的警告标志。可能是您报告的另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:33:46.360

不幸的是，如果您的 JDE 在 unix 操作系统下运行，您将无法访问 Wingding 字体，除非您将它们放入 ressource 目录。

x:\e812\system\resource\truetype

从那时起，自定义字体的可能性是无穷无尽的。在这里，我们购买了一个字体创建软件，我们将徽标和其他图像放入其中，以便我们在报告中使用。我们还将空格字母指定为纯填充矩形。我们使用使用该字体填充空格的标签，并将它们着色为红色。您可以在其上放置更多标签，并在红色背景上显示文本，所有这些都在常规 RDA 界面中。

祝你好运

# windows - 在 Windows 应用程序中的单个按钮中推送和弹出

> ID：13796017
> 
> 赞同：0
> 
> 时间：2012-12-10T06:25:39.973
> 
> 标签：windows, winforms

目前我在一个windows应用程序中工作，要求我有一个按钮，所以当我第一次点击时，它需要表现得像被按下一样，下次我点击同一个按钮时，它需要表现得像pop .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:47:41.117

您可以创建一个全局布尔变量，该变量将在按钮单击时更改。每次触发按钮单击事件时，只需检查布尔状态。并且同一个按钮可以作为开/关模式工作。

```
Private isStarted As Boolean = False

Private Sub OnStartButtonClick(sender As System.Object, e As System.EventArgs) Handles btnStart.Click
    If (isStarted = False) Then
        isStarted = True
        btnStart.Text = "Stop"

        'DO YOUR WORK'
    Else
        isStarted = False
        btnStart.Text = "Start"

        'DO YOUR WORK'
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:44:28.420

您可以通过在同一个按钮单击中添加条件来做到这一点。

```
private void button1_Click(object sender, EventArgs e)
{
    if (button1.Text == "Push")
    {
        button1.Text = "Pop";
        MessageBox.Show("Data Pushed into the stack");
    }
    else
    {
        button1.Text = "Push";
        MessageBox.Show("Data Popedfrom the stack");
    }
} 
```

最初将button1.Text设置为“Push”，当它被点击时，进行Push操作并将名称更改为“Pop”，当button1.Text为“Pop”时，进行弹出操作并将名称更改为“Push” . 希望你能理解...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:15:36.107

您可以通过使用复选框并将其外观属性设置为按钮并将其用作按钮来实现此目的。我想这可能会对你有所帮助。

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox1.Checked)
        {
            checkBox1.Text = "Pop";
            MessageBox.Show("Data Pushed into the stack");
        }
        else
        {
            checkBox1.Text = "Push";
            MessageBox.Show("Data Poped from the stack");
        }
    } 
```

正如你所提到的，这将起作用。

# python - 如何为逻辑回归标准化极大的数字？

> ID：13796021
> 
> 赞同：2
> 
> 时间：2012-12-10T06:25:45.050
> 
> 标签：python, machine-learning, normalization

我正在尝试在`Python`. 我实现的假设函数是：

```
 def hypothesis(params, features):
       z = sum(p * f for p, f in zip(params, features))
       return 1 / (1 + math.e ** -z) 
```

我用于测试的数据集来自[UCI Machine Learning Repository](http://archive.ics.uci.edu/ml/datasets/Wine)，它包含如下数据（**第一列是目标，其他列是选定的特征**）：

```
1,14.23,1.71,2.43,15.6,127,2.8,3.06,.28,2.29,5.64,1.04,3.92,1065
3,13.2,1.78,2.14,11.2,100,2.65,2.76,.26,1.28,4.38,1.05,3.4,1050
2,13.16,2.36,2.67,18.6,101,2.8,3.24,.3,2.81,5.68,1.03,3.17,1185
1,14.37,1.95,2.5,16.8,113,3.85,3.49,.24,2.18,7.8,.86,3.45,1480 
```

如您所见，与其他功能相比，某些功能非常大。所以`z`在我的`hypothesis`函数中作为 的幂太大了`e`。事实上，对于较大的值，`z`s 都是`0.0`。如果我将分子更改为 3，`OverflowError`则会提高。

也许我应该在将数据提供给我的程序之前对它们进行标准化，知道我该怎么做吗？

*   [源代码](https://gist.github.com/4248812)
*   [数据集](http://archive.ics.uci.edu/ml/machine-learning-databases/wine/wine.data)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:49:25.090

# 不是真正的 StackOverflow 问题 =/

在我看来，这个问题应该在其他地方问 - 似乎您正在寻找一种算法而不是一种算法的实现。

除此之外 - 您将按列规范化此数据集。计算每列的 SD 和平均值，并将其标准化为 2 的 SD 和 10 的平均值。这只是意味着一旦你计算了列的 SD 和它的平均值，你就可以计算每个条目的新值该列首先计算出与该列的平均值相差多少 SD，然后得到数字 10 并从 10 中添加或减去那么多的 2（取决于数据是高于该列的平均值还是低于该列的平均值）。

例如，假设我们有一列包含一些数字，我们计算出 SD 为 3，平均值为 50。我们现在遇到该列的一个成员 - 数字 56。56 是上面的两个 SD 50（平均值），因此它将被归一化为 14（10（新平均值）+2（新 SD）*2（SD 列的数量高于列的平均值））。

数字 10 和 2 可以替换为其他数字，但我认为 10 和 2 似乎是正确的。

有关计算运行 SD（标准差）和均值的帮助，请参阅另一个 StackOverflow 问题 - [如何有效地计算运行标准差？](https://stackoverflow.com/questions/1174984/how-to-efficiently-calculate-a-running-standard-deviation)

# c++ - 图像打开错误（使用 Open CV C++ 代码）

> ID：13796028
> 
> 赞同：-2
> 
> 时间：2012-12-10T06:26:28.617
> 
> 标签：c++, xcode

我正在使用此[代码](http://programing-tutorial.blogspot.in/2009/11/image-proseesing-extacting-shapes-using.html)来检测给定图像中的基本形状。但它说明无法打开 Image 。请帮我。如果我的问题不清楚，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:29:57.120

您的问题需要比这更多的细节才能得到有效的答案（例如，您是在 Macintosh 上还是在 iPhone 上这样做）。

您指出失败的示例中的代码是这样的：

```
img=cvLoadImage("shape.jpg");

if(img==NULL)
{
    printf("Error in opening image\n");
    return -1;
} 
```

您需要将文件放在应用程序可以*找到*的地方。

如果您使用的是 Macintosh，请将文件放在实际二进制可执行文件所在的相同位置（例如“ `MyApp.app/Contents/MacOS/MyApp`”）。或者将路径更改为您知道图像已保存事实的精确位置（例如“ `/tmp/shape.jpg`”或“ `/Users/sri/shape.jpg`”）。

已编辑以添加对 iOS 执行的操作。尝试这样做：

```
NSString *str = [[NSBundle mainBundle] pathForResource:@"YQpBE" ofType:@"png"];
if(str)
{
    const char *pathToFile = [str UTF8String];
    img=cvLoadImage(pathToFile);
    if(img==NULL)
    {
        NSLog( @"could not open image file at path %@", str);
    }
} else {
    NSLog( @"could not find a file named YQpBE.png in the resource folder of this app");
} 
```

# c# - Regular Expression for word contained in a predefined set of words

> ID：13796036
> 
> 赞同：2
> 
> 时间：2012-12-10T06:27:20.193
> 
> 标签：c#, javascript, regex, word

I have a pre-defined set of words like Horse Pearl House

And I would want my regular expression to match any word contained among those 3.

Example: orse - contained in Horse. Pea - contained in Pearl. Ho - contained in Horse and House.

How do I create a regular expression to achieve this in JavaScript or c#?

I was thinking in this direction.

```
\b*(Horse|Pearl|House) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:37:20.050

```
var arr = ["Horse", "Pearl", "House"];
var string_matched="";
for (var i = 0; i < arr.length; i++)
{
    if (/se/gi.test(arr[i])) {

        string_matched += ", " + arr[i];
    }
} 
```

You will get the matched strings in the **string_matched** variable.

# javascript - 在javascript中单击行时选择/取消选择复选框

> ID：13796038
> 
> 赞同：0
> 
> 时间：2012-12-10T06:27:37.097
> 
> 标签：javascript, jquery, html

我必须开发一个表格，其中包含带有部分和子部分的表格。在部分的点击事件中，子部分应该是选择/取消选择。而且在取消选中每个子部分时，我的部分应该是取消选中。我必须这样做行点击和复选框点击。[http://imgboot.com/images/sureshdasari/selectdeselectcheckboxes.gif](http://imgboot.com/images/sureshdasari/selectdeselectcheckboxes.gif)这就是我想要的，但在这张图片里面只有复选框点击工作我也想对行点击同样的动作。有没有人有想法然后请帮助我。如果使用 jquery 更容易，然后对我也有帮助。

提前致谢。

这是我的代码链接[http://pastebin.com/J5bnXbN2](http://pastebin.com/J5bnXbN2)我想要在行上单击相同的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:40:50.503

试试这个例子

[http://jsfiddle.net/QUwuR/](http://jsfiddle.net/QUwuR/)

```
<table>
<tr>
    <td><input type="checkbox" name="chk[]"/></td>
    <td>ID</td>
    <td>Name</td>
    <td>asd</td>
    <td>asd</td>
</tr>
<tr>
    <td><input type="checkbox" name="chk[]"/></td>
    <td>ID</td>
    <td>Name</td>
    <td>asd</td>
    <td>asd</td>
</tr>
<tr>
    <td><input type="checkbox" name="chk[]"/></td>
    <td>ID</td>
    <td>Name</td>
    <td>asd</td>
    <td>asd</td>
</tr> 
```

```
$('tr').click(function() {
    var checkbox = $(this).find('td:first').find('input');
    if(checkbox.is(':checked')) {
        checkbox.attr('checked', false);
    }else {
        checkbox.attr('checked', true);
    }
}); 
```

编辑：这是您提供的代码的完整工作示例

```
<html>
    <head>
    <title>How to highlight the selected row in table/gridview using jquery</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function()
        {
            $("#checkall").live('click',function(event){
            $('input:checkbox:not(#checkall)').attr('checked',this.checked);
            //To Highlight
            if ($(this).attr("checked") == true)
            {
            //$(this).parents('table:eq(0)').find('tr:not(#chkrow)').css("background-color","#FF3700");
            $("#tblDisplay").find('tr:not(#chkrow)').css("background-color","#FC9A01");
            }
            else
            {
            //$(this).parents('table:eq(0)').find('tr:not(#chkrow)').css("background-color","#fff");
            $("#tblDisplay").find('tr:not(#chkrow)').css("background-color","#FFF");
        }
    });
        $('input:checkbox:not(#checkall)').live('click',function(event)
        {
            if($("#checkall").attr('checked') == true && this.checked == false)
            {
                $("#checkall").attr('checked',false);
                $(this).closest('tr').css("background-color","#ffffff");
            }
            if(this.checked == true)
            {
                $(this).closest('tr').css("background-color","#FC9A01");
                CheckSelectAll();
            }
        if(this.checked == false)
        {
            $(this).closest('tr').css("background-color","#ffffff");
        }
});

function CheckSelectAll()
{
    var flag = true;
    $('input:checkbox:not(#checkall)').each(function() {
        if(this.checked == false)
        flag = false;
    });
    $("#checkall").attr('checked',flag);
}

I'm sorry for this mistake. Since you click on the input, who is in the entire tr two events are triggered. So you need to assing click events on all cells, except those who checkboxes are in. Here is the fix:

$('tr').find('td:gt(0)').click(function() {
    var checkbox = $(this).parent().find('td:first').find('input');
    if(checkbox.is(':checked')) {
        checkbox.attr('checked', false);
    }else {
        checkbox.attr('checked', true);
    }
});

$('tr#chkrow').find('th:gt(0)').click(function() {
    var checkbox = $('input#checkall');
    if(checkbox.is(':checked')) {
        checkbox.attr('checked', false);
    $('tr').find('td:first').find('input').attr('checked', false);
    }else {
        checkbox.attr('checked', true);
    $('tr').find('td:first').find('input').attr('checked', true);
    }
});
});

</script>
</head>
<body>
    <table width="50%" cellspacing="0" border="0" align="left" id="tblDisplay" cellpading="0"
style="font-family: verdana; font-size: 10px;">
    <thead>
    <tr id="chkrow">
        <th>
            <input type="checkbox" id="checkall" />
        </th>
    <th>
    Sr.
    </th>
    <th style="text-align: left;">
        First Name
    </th>
    <th style="text-align: left;">
        Last Name
    </th>
    <th>
        Country
    </th>
    <th>
    Marital Status
    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">
<input type="checkbox" value="1" />
</td>
<td style="text-align: center;">
1
</td>
<td style="text-align: left;">
Adeel
</td>
<td style="text-align: left;">
Fakhar
</td>
<td style="text-align: center;">
Pakistan
</td>
<td style="text-align: center;">
Single
</td>
</tr>
<tr>
<td style="text-align: center;">
<input type="checkbox" value="2" />
</td>
<td style="text-align: center;">
2
</td>
<td style="text-align: left;">
Omer
</td>
<td style="text-align: left;">
Fakhar
</td>
<td style="text-align: center;">
Pakistan
</td>
<td style="text-align: center;">
Single
</td>
</tr>
<tr>
<td style="text-align: center;">
<input type="checkbox" value="3" />
</td>
<td style="text-align: center;">
3
</td>
<td style="text-align: left;">
Umer
</td>
<td style="text-align: left;">
Mukhtar
</td>
<td style="text-align: center;">
Pakistan
</td>
<td style="text-align: center;">
Single
</td>
</tr>
<tr>
<td style="text-align: center;">
<input type="checkbox" value="4" />
</td>
<td style="text-align: center;">
4
</td>
<td style="text-align: left;">
Mark
</td>
<td style="text-align: left;">
Waugh
</td>
<td style="text-align: center;">
Australia
</td>
<td style="text-align: center;">
Married
</td>
</tr>
</tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:57:11.157

看到这个：http: [//jsfiddle.net/RtcBR/3/](http://jsfiddle.net/RtcBR/3/)

```
$(document).ready(function() {
var flag = false;
var flag2 = false;
$("#checkall").click(function(event) {
    $('input:checkbox:not(#checkall)').attr('checked', this.checked);
    if ($(this).attr("checked")) {
        $("#tblDisplay").find('tr:not(#chkrow)').each(function() {
            $(this).css("background-color", "#FC9A01");
        });
    }
    else {
        $("#tblDisplay").find('tr:not(#chkrow)').each(function() {
            $(this).css("background-color", "#FFF");
        });
    }
    flag2 = true;
});

$('input:checkbox:not(#checkall)').click(function(event) {
    if ($("#checkall").attr('checked') && !this.checked) {
        $("#checkall").attr('checked', false);
        $(this).closest('tr').css("background-color", "#ffffff");
    }
    if (!$("#checkall").attr('checked') && this.checked) {
        if ($('input:checkbox:not(#checkall)').filter(":not(:checked)").length === 0) {
            $("#checkall").attr('checked', true);
        }
    }
    if (this.checked) {
        $(this).closest('tr').css("background-color", "#FC9A01");
        flag = true;
    }
    if (!this.checked) {
        $(this).closest('tr').css("background-color", "#ffffff");
        flag = true;
    }
});

$('tr').click(function() {

    if (!flag) {
        var checkbox = $(this).find('td:first').find('input');
        if (checkbox.is(':checked')) {
            checkbox.attr('checked', false);
            checkbox.closest('tr').css("background-color", "#FFF");
        } else {
            checkbox.attr('checked', true);
            checkbox.closest('tr').css("background-color", "#FC9A01");
        }
    }
    flag = false;
});
$('tr#chkrow').click(function() {
    if (!flag2) {
        var checkbox = $(this).find('th:first').find('input');
        if (checkbox.is(':checked')) {
            checkbox.attr('checked', false);
            $('tr').find('td:first').find('input').attr('checked', false);
            $("#tblDisplay").find('tr:not(#chkrow)').each(function() {
            $(this).css("background-color", "#FFF");
        });
        } else {
            checkbox.attr('checked', true);
            $('tr').find('td:first').find('input').attr('checked', true);
            $("#tblDisplay").find('tr:not(#chkrow)').each(function() {
            $(this).css("background-color", "#FC9A01");
        });
        }
    }
    flag2 = false;
});
});​ 
```

# java - 支持 DOM 样式访问的 Java JSON 库

> ID：13796045
> 
> 赞同：2
> 
> 时间：2012-12-10T06:28:10.177
> 
> 标签：java, json, jackson, gson

我正在用 Java 编写一个 JSON 样式的查询引擎，它将受益于通过 DOM 路径查询 JSON 文档的能力（就像你可以在 Javascript 中做的那样）。我已经检查了 GSON 和 Jackson，但似乎都不支持这一点。

任何人都知道任何替代方案或其他建议而不是我自己的建议吗？

例如

```
//Example JSON document
String json = "{ somewhere : {deep : { inside : 123 } }, anarray : [{val=1}] }";
JsonElement root = JsonParser.parse(json);

//What I'd like:
JsonElement node = root.getByDOM("somewhere.deep");  // {inside : 123}
JsonElement node2 = root.getByDOM("somewhere.deep.inside");  // 123
JsonElement node3 = root.getByDOM("anarray[0].val");  // 1
//etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:55:25.780

Jackson 绝对支持这一点（参见“ [Jackson in 5 minutes](http://wiki.fasterxml.com/JacksonInFiveMinutes) ”，寻找“Tree mode”），例如：

```
JsonNode root = mapper.readTree(jsonSource); 
```

我认为 GSON 也有类似的东西。

但无论您做什么，都不要尝试将 JSON 转换为 XML，然后使用 XML 工具——这种方法通常会给您带来很多麻烦，不仅速度慢。这是因为 JSON 和 XML 数据模型根本上是不兼容的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:55:26.800

使用 json-path - 感谢 brian 的建议。

# iphone - 使用 UIPicker 选项的 UITableView 行选择

> ID：13796046
> 
> 赞同：0
> 
> 时间：2012-12-10T06:28:15.933
> 
> 标签：iphone, ios, uitableview, uipickerview

我有`tableview`5 行，当我选择一行时，它会`UIPickerView`在下一页打开一个以选择选项，5 行也会发生同样的事情。现在我想要，Pickervalue，它应该反映在特定的行（右侧）上我选择了

我在同一页面上有一个按钮可以对选定的行值（UIPicker 值）执行。如何在 Button.How to give options in Button.to select the Rows values which are take from`UIPicker`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    if(indexPath.row==0){

        Picker1 *logInController = [[Picker1 alloc] init];

    [[self navigationController] pushViewController:logInController animated:YES];
    }

    if(indexPath.row==1){

        Picker2 *logInController = [[Picker2 alloc] init];

        [[self navigationController] pushViewController:logInController animated:YES];
    }
} 
```

像上面我已经打开`UIPIcker`并选择选项。

在 PICKER1.m 中

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    // update label text to show selected option

    NSString* string=[NSString stringWithFormat:@"you are selected %@",[list objectAtIndex:row]];

    label.text=string;

}

- (void)viewDidLoad

{      
    [super viewDidLoad];

    list =[[NSMutableArray alloc]init];
    [list addObject:@"GPS"];
    [list addObject:@"NONE"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:02:57.580

1.  您需要修改 tableView 的数据源。您可以获取字典数组（带有键 leftTitle 和 rightTitle）。
2.  您需要使用委托方法 valueSelected 在 Picker1 和 Picker2 中实现协议：
3.  使用 tableView 在控制器中实现委托。
4.  您需要保存所选行的全局索引。在推动选择器时将委托设置为自我。
5.  当您点击选取器控制器中的按钮时，调用 valueSelected: 委托并传递选取器中选择的值。
6.  在您的带有 tableView 的控制器中，您已经实现了协议方法，获取值并保存在数据源中（作为具有选定索引的字典中键“rightTitle”的值）。
7.  重新加载表。

# c - 如果超过数组大小怎么办，如何打印错误信息？并终止程序

> ID：13796056
> 
> 赞同：1
> 
> 时间：2012-12-10T06:29:39.633
> 
> 标签：c, arrays

使用最大大小为 50 的固定长度数组。如果输入文件包含超过 50 名学生，则打印一条消息，例如“文件包含超过 50 名学生！” 并终止程序。

我不知道如何添加这个。我尝试了很多使用 if/else 语句的方法，但总是遇到分段 11 的问题。请帮忙

```
#include <stdio.h>
#include <stdlib.h>

#define MAX_SIZE 50

// Function declarations
void printInfo();
int readresults(FILE*,int*, int*, int*);
void sort(float avgScore[], int stuID[], int totalStu);
float calcAvg (int score1, int score2);
void getInfo(float avgScore[], int totalStu, float* min, float* max, float* avg);
void writeSortedResults (FILE* AG_Sorted, float avgScore[], int stuID[], int totalStu);
void printdone();

int main (void)
{
// Local Declarations
    FILE* AG_Midterm;
    FILE* AG_Sorted;

    int score1[MAX_SIZE];
    int score2[MAX_SIZE];
    int stuID[MAX_SIZE];
    int i = 0;
    int totalStu = 0;

    float avgScore[MAX_SIZE];
    float avg;
    float min;
    float max;

// Statements
    printInfo();

    AG_Midterm = fopen("/Users/r3spectak/Desktop/AG_Midterm.txt", "r");
    if(AG_Midterm == NULL)
    {
      printf("\aError opening Results File\n");

      return 100;

    } // if open input

    if(!(AG_Sorted = fopen ("/Users/r3spectak/Desktop/AG_Sorted.txt","w")))
    {
      printf("\aError opening Average Results file\n");
      return 102;
    }// if open input
    i = 0;

    while(readresults(AG_Midterm, &stuID[i], &score1[i], &score2[i]))//Kexy
        {
          avgScore[i] = calcAvg(score1[i], score2[i]);
            i++;//Kexy
            totalStu++;//Kexy

        } //while

    sort(avgScore, stuID, totalStu);//Kexy

    getInfo( avgScore, totalStu, &min, &max, &avg );
    printf( "\nHighest Average Score: %.2f\nLowest Average Score: %.2f\nClass Average Score : %.2f\n", max, min, avg );
    printf("Total Students: %d\n", totalStu);

    writeSortedResults(AG_Sorted, avgScore, stuID, totalStu);

    printf("Total Students: %d\n", totalStu);

    fclose(AG_Midterm);
    fclose(AG_Sorted);

    printdone();
    return 0;

} // main

/*==================printInfo==================================
    Reads data from Midterm file
    Pre : Nothing
    Post: Prints introduction message
*/

void printInfo()
{
// Statements
    printf("Begin Calculation of Scores\n");
    return ;

} // printInfo

/*===================readResults==================================
    Reads data from AG_Midterm file
    Pre : AG_Midterm is an open file.
          stuid, score1 , score2
    Post: reads score1 and score2
          if data read -- returns 1
          if EOF or error--returns 0
*/

int readresults(FILE* AG_Midterm, int * stuID, int *score1, int *score2)
{
// Local Variables
    int i;
    int items;
    int ioCheck;

// Statements
    ioCheck = fscanf(AG_Midterm, "%d%d%d",stuID, score1, score2);

    if(ioCheck == EOF)

    {
        return 0;
    }

    else if(ioCheck != 3)

    {
        printf("Error reading file...\n");
        return 0;
    }

    else

        return 1;

} //readresults

/*===================sort===================================
    Sorts by selecting the largest Average score in unsorted
    portion of array and exchanging it with element at the
    beginning of the unsorted list.=
    Pre : list must contain atleast one item
    Post: list rearranged largest to smallest

*/

void sort(float avgScore[], int stuID[], int totalStu)
{
// Local Declarations
    int i = 0;
    int j = 0;
    int largest;
    int tempID;

    float temp;

    for(i = 0; i < totalStu; i++)
    {
        largest = i;
        for(j = i + 1; j < totalStu; j++)
        {
            if(avgScore[j] > avgScore[largest])
                largest = j;

        }

        temp = avgScore[i];
        tempID = stuID[i];

        avgScore[i] = avgScore[largest];
        stuID[i] = stuID[largest];

        avgScore[largest] = temp;
        stuID[largest] = tempID;
   }
} // sort

/*===================calcAvg==================================
    Determines the Average of the two midterm scores
    Pre : score1, score2
    Post: avgScore copied to addresses

*/
float calcAvg (int score1, int score2)

{
    return (score1 + score2)/2.0;
} // calcAvg

/*===================getInfo==================================
    Determines the Class Average,Lowest Average
    and Highest Average scores
    Pre : avgScore , totalStu
    Post: avg , min , max

*/
void getInfo(float avgScore[], int totalStu, float* min, float* max, float* avg)
{
   int i;
   float sum = *min = *max = avgScore[0];

   for( i = 1; i <totalStu; ++i )
   {
        sum += avgScore[i]; /* sum = sum + dAry[i] */
        if( avgScore[i] < *min ) *min = avgScore[i]; /* update ... if applies */
        if( avgScore[i] > *max ) *max = avgScore[i];
    }
        *avg = sum/totalStu;
    return;
}

/*===================writeSortedResults==================================
    Writes Average Scores after Sorting
    Pre : AG_Sorted is an open file
          avgScore
    Post: Data written to file
*/
void writeSortedResults (FILE* AG_Sorted, float avgScore[], int stuID[], int totalStu)
{
// Local Definitions
    int i;
    int line = 0;

// Statements
    for(i = 0; i < totalStu; i++)
    {
        fprintf(AG_Sorted, "%d %.2f     ", stuID[i], avgScore[i]);
        line++;

        if(line == 8)
        {
            fprintf(AG_Sorted, "\n");
            line = 0;
        }

    }

    printf("\nSuccessfully write the sorted data to the new file\n");
    return;

} // writeSortedResults

/*==================printDone==================================
    Reads data from Midterm Score File
    Pre : Nothing
    Post: Prints end message
*/
void printdone()
{
// Statements
    printf("End of Finalizing Scores.Thank you.\n");
    return;

} // printDone 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:47:00.883

如果我理解您的意图，您不仅对避免像每个人似乎都在修复的超限感兴趣；如果输入文件*会*溢出，您会尝试直接中止，但实际上并没有*让它*溢出并因此导致您的进程出现段错误。检查对`feof()`你没有任何好处，因为你可能有一个换行符、一些空格、几乎所有*不是*常规记录条目的东西都不会`feof()`是真实的。

为了解决您想要的结果（因文件太大而中止），您可以将数据读入本地变量，只要您在大小限制之下，就将它们放入您的数组*中*；不是在阅读期间。否则中止。

```
int id, s1, s2;
while(readresults(AG_Midterm, &id, &s1, &s2))//Kexy
{
    // we *know* we have a valid record. make sure it fits
    //  before dropping it in, otherwise proclaim the file too
    // large and abort the whole thing.
    if (i == MAX_SIZE)
    {
        printf("Too many scores. Aborting.\n");
        exit(EXIT_FAILURE);
    }

    stuID[i] = id;
    score1[i] = s1;
    score2[i] = s2;

    avgScore[i] = calcAvg(score1[i], score2[i]);
    i++;//Kexy
    totalStu++;//Kexy

} //while 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:34:37.263

您可以在实际添加元素之前检查当前元素的数量以及要添加的数量，以查看该数量是否超过 50。

```
if ( sizeof ( array ) + newAmount ) > MAX_SIZE ) {
   // Error.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:36:43.637

也许您首先读取数据，然后检查它是否超出了您的限制（即使乍一看我还没有看到您检查它的位置）。当然，您必须先检查是否可以再阅读一个元素，然后再阅读；在此期间，例如

```
 while(i < MAX_SIZE && readresults(AG_Midterm, &stuID[i], &score1[i], &score2[i])) 
```

那么你必须检查循环结束的原因。如果满足第一个条件，则 i == MAX_SIZE 因此您可以在稍后检查它，例如

```
if (i == MAX_SIZE) 
{
   // abort with error
} 
```

现在，这可能不是更好的方法，但可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T06:37:01.830

你的问题是这个循环：

```
while(readresults(AG_Midterm, &stuID[i], &score1[i], &score2[i]))//Kexy 
```

您正在阅读直到文件末尾，`i`当文件包含超过 50 个元素时，这会导致成为无效的数组索引。

`while`向语句添加附加条件以检查是否`i`仍在范围内，例如

```
while(i < MAX_SIZE && ...) 
```

# java - Vorbis SPI 为 OGG 文件抛出 UnsupportedAudioFileException

> ID：13796057
> 
> 赞同：0
> 
> 时间：2012-12-10T06:29:45.977
> 
> 标签：java, ogg, spi, vorbis

我正在尝试从 Java 程序播放 OGG Vorbis 文件。PCM 文件 (*.wav) 与此代码一起工作正常：

```
public void play(String resFile) throws Exception {
    AudioInputStream audioInputStream = null;

    URL audioSource = new File(resFile).toURL();
    audioInputStream = AudioSystem.getAudioInputStream(audioSource);

    AudioFormat format = audioInputStream.getFormat();
    SourceDataLine line = null;
    DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);

    line = (SourceDataLine) AudioSystem.getLine(info);
    line.open(format);

    line.start();
    int bytesRead = 0;
    byte[] data = new byte[32 * 1024];

    try {
        audioInputStream.mark(Integer.MAX_VALUE);
        while(bytesRead != -1) {
            bytesRead = audioInputStream.read(data, 0, data.length);
            if(bytesRead >= 0) {
                line.write(data, 0, bytesRead);
            }
            Thread.yield();
        }
    } finally {
        line.drain();
        line.close();
    }
} 
```

为了也能播放 OGG 文件，我下载了[Vorbis SPI](http://www.javazoom.net/vorbisspi/sources.html)并将 jar 放在类路径中。我尝试使用[来自 Wikipedia 的示例 ogg](http://en.wikipedia.org/wiki/File%3aExample.ogg)。但它仍然不起作用，它给了我一个 UnsupportedAudioFileException。

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:52:44.687

糟糕...原来我的类路径中没有所有依赖项：tritonus_share.jar、jorbis-0.0.15.jar、jogg-0.0.7.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-05T15:54:53.447

尝试 java-vorbis-support [https://github.com/Trilarion/java-vorbis-support](https://github.com/Trilarion/java-vorbis-support) javazoom vorbis 对我不起作用，java-vorbis-support 可以

# c++ - 卡在 OpenProcess 上，总是返回 0

> ID：13796059
> 
> 赞同：1
> 
> 时间：2012-12-10T06:30:02.187
> 
> 标签：c++, winapi, openprocess

当我运行我的程序时发生了一些奇怪的事情。当我在 VS 2010 中使用“不调试启动”选项运行它时，OpenProcess 照常返回进程句柄，但是当我在 Windows 资源管理器中运行我的程序时，OpenProcess 总是返回 0？！我调用了 GetLastError，它在这两种情况下都返回 6 (INVALID_HANDLE_VALUE)。我正在使用 Windows XP SP3 有人可以帮帮我吗？这是我写的代码：

```
HANDLE GetProcessHandle(TCHAR* szProcessName)
{
    //Get the snapshot of all processes in the system
    HANDLE hSnap = CreateToolhelp32Snapshot(TH32CS_SNAPALL, NULL);
    if (hSnap == INVALID_HANDLE_VALUE)
    {
        return INVALID_HANDLE_VALUE;
    }

    PROCESSENTRY32 pe32;
    pe32.dwSize = sizeof(PROCESSENTRY32);

    //Get the information of the first process
    if (!Process32First(hSnap, &pe32))
    {
        CloseHandle(hSnap);
        return INVALID_HANDLE_VALUE;
    }

    //Loop through all processes
    do
    {
        if (_tcscmp(szProcessName, pe32.szExeFile) == 0)
        {
            //Got the process ID
            CloseHandle(hSnap);
            printf("sz = %s; exe = %s; pid = %d\n", szProcessName, pe32.szExeFile, pe32.th32ProcessID);
                            //Error here, correct PID was found in both case
            return OpenProcess(PROCESS_ALL_ACCESS, FALSE, pe32.th32ProcessID);
        }
    } 
    while (Process32Next(hSnap, &pe32));

    CloseHandle(hSnap);
    return INVALID_HANDLE_VALUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:46:42.607

要打开另一个本地进程的句柄并获得完全访问权限，您必须启用 SeDebugPrivilege 权限。

VS2010 有这个权限，但是 explore 没有。由于您的程序是子进程，因此它将继承父进程的特权。

有关详细信息，请查看此[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)。

# azure - Windows azure 管理门户未显示任何列表运行所需的时间

> ID：13796061
> 
> 赞同：1
> 
> 时间：2012-12-10T06:30:09.587
> 
> 标签：azure

我正在使用winows azure 3个月试用帐户，当我登录管理门户时，它没有显示任何列表或选项，我想知道第一次显示管理门户需要多长时间或是否有其他登录方式在 Windows azure 管理门户中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:48:07.450

您可以访问 Windows Azure 管理门户： http: [//manage.windowsazure.com](http://manage.windowsazure.com)

如果您点击了正确的 URL，但没有显示任何内容，那么您可能需要升级您的浏览器。

# macos - 没有在 MacOS webview 屏幕截图中获取所有内容

> ID：13796062
> 
> 赞同：4
> 
> 时间：2012-12-10T06:30:16.757
> 
> 标签：macos, cocoa, webview, screenshot

我正在尝试使用以下代码捕获可可 webview 的屏幕截图：

```
NSBitmapImageRep *bitmapRepRight = [[webView mainFrame].frameView bitmapImageRepForCachingDisplayInRect:cacheRect];

[[[webView mainFrame].frameView  documentView] layout];

[[webView mainFrame].frameView cacheDisplayInRect:cacheRect toBitmapImageRep:bitmapRepRight];

return [bitmapRepRight CGImage]; 
```

此代码是从 - (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame 函数调用的。

我只得到页面的背景，但没有文字和图像。

如果我使用 [self performSelector:@selector(addPagesToCache) withObject:nil afterDelay:0.01] 调用它；然后它可以工作，但这根本不是一种干净的方式。

可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T12:49:46.757

如果您的 webview 可见（在窗口中），您可以使用 CGWindowListCreateImage 获取窗口的部分图像。这也是一种解决方法，而不是完美的解决方案。

# delphi - 如何处理从我的 GUI 应用程序启动的控制台窗口？

> ID：13796063
> 
> 赞同：12
> 
> 时间：2012-12-10T06:30:24.033
> 
> 标签：delphi, winapi, windows-7, delphi-xe2

在我的 GUI 应用程序中，我运行控制台应用程序并需要处理其窗口。我尝试使用 EnumWindows()，请参见下面的代码，但它不起作用。列表中没有我的控制台应用程序。

```
type
  TEnumWindowsData = record
    ProcessId: Cardinal;
    WinHandle: THandle;
    List: TStrings;                 // For test only
  end;
  PEnumWindowsData = ^TEnumWindowsData;

function FindWindow(hWnd: THandle; lParam: LPARAM): BOOL; stdcall;
var
  ParamData: TEnumWindowsData;
  ProcessId: Cardinal;
  WinTitle: array[0..200] of Char;  // For test only
begin
  ParamData := PEnumWindowsData(lParam)^;
  GetWindowThreadProcessId(hWnd, ProcessId);
  if ProcessId <> ParamData.ProcessId then
    Result := True
  else begin
    ParamData.WinHandle := hWnd;
    Result := False;
  end;
  // For test only
  GetWindowText(hWnd, WinTitle, Length(WinTitle) - 1);
  ParamData.List.Add(IntToStr(ProcessId) + ' ' + IntToStr(hWnd) + ' ' + WinTitle);
end;

procedure TForm1.Button1Click(Sender: TObject);

  function RunApp(const AProgram: string): Cardinal;
  var
    StartupInfo: TStartupInfo;
    ProcessInformation: TProcessInformation;
  begin
    Result := 0;
    ...
    if CreateProcess(nil, PChar(AProgram), nil, nil, False,
          NORMAL_PRIORITY_CLASS, nil, nil, StartupInfo, ProcessInformation)
    then
      Result := ProcessInformation.dwProcessId;
    ...
  end;

var
  ParamData: TEnumWindowsData;
begin
  ParamData.ProcessId := RunApp('cmd.exe /C D:\TMP\TEST.exe');
  ParamData.WinHandle := 0;
  ParamData.List := Memo1.Lines;
  EnumWindows(@FindWindow, THandle(@ParamData));

  FWindowHandle := ParamData.WinHandle;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T06:47:24.187

以下代码简单地创建进程（控制台应用程序），通过[`AttachConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952%28v=vs.85%29.aspx)函数将您的进程附加到新创建的控制台，并从附加的控制台使用该[`GetConsoleWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)函数获取窗口句柄。

下面的代码最大的弱点是[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数会在此时立即返回，此时控制台还没有完全初始化，当你试图在之后立即附加控制台时，你会失败。不幸的是，没有任何[`WaitForInputIdle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)功能[`for console applications`](https://stackoverflow.com/q/2740038/960757)，因此作为一种可能的解决方法，我会选择尝试以有限的循环次数连接控制台，一旦成功，获取手柄并分离控制台。

在可能如下所示的代码中。那里的`RunApp`函数应该返回控制台窗口的句柄（假设你只会从中运行控制台应用程序），并且应该等待大约。1 秒用于您已开始可附加的控制台应用程序。您可以通过更改`Attempt`变量的初始值和/或更改`Sleep`间隔来修改此值。

```
function GetConsoleWindow: HWND; stdcall;
  external kernel32 name 'GetConsoleWindow';
function AttachConsole(dwProcessId: DWORD): BOOL; stdcall;
  external kernel32 name 'AttachConsole';

function RunApp(const ACmdLine: string): HWND;
var
  CmdLine: string;
  Attempt: Integer;
  StartupInfo: TStartupInfo;
  ProcessInfo: TProcessInformation;
begin
  Result := 0;
  FillChar(StartupInfo, SizeOf(TStartupInfo), 0);
  FillChar(ProcessInfo, SizeOf(TProcessInformation), 0);
  StartupInfo.cb := SizeOf(TStartupInfo);
  StartupInfo.dwFlags := STARTF_USESHOWWINDOW;
  StartupInfo.wShowWindow := SW_SHOWNORMAL;
  CmdLine := ACmdLine;
  UniqueString(CmdLine);
  if CreateProcess(nil, PChar(CmdLine), nil, nil, False,
    CREATE_NEW_CONSOLE, nil, nil, StartupInfo, ProcessInfo) then
  begin
    Attempt := 100;
    while (Attempt > 0) do
    begin
      if AttachConsole(ProcessInfo.dwProcessId) then
      begin
        Result := GetConsoleWindow;
        FreeConsole;
        Break;
      end;
      Sleep(10);
      Dec(Attempt);
    end;
    CloseHandle(ProcessInfo.hThread);
    CloseHandle(ProcessInfo.hProcess);
  end;
end; 
```

然后，您可以通过以下方式更改已启动应用程序的控制台窗口的标题：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
  ConsoleHandle: HWND;
begin
  ConsoleHandle := RunApp('cmd.exe');
  if ConsoleHandle <> 0 then
  begin
    S := 'Hello! I''m your console, how can I serve ?';
    SendTextMessage(ConsoleHandle, WM_SETTEXT, 0, S);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T07:04:03.120

- 创建控制台进程

- 找到进程的窗口

-设置找到的控制台窗口的标题

- 写入找到的控制台

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    PID: DWORD;
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  AProgram: String;
  StartupInfo: TStartupInfoW;
  ProcessInfo: TProcessInformation;
begin
  AProgram := 'cmd /K Dir C:\temp';   // using /K for keeping console alive
  UniqueString(AProgram);             // ensure that AProgram is writeable by API
  ZeroMemory(@StartupInfo, SizeOf(StartupInfo)); // create minimum startup info
  StartupInfo.cb := SizeOf(StartupInfo);
  StartupInfo.dwFlags := STARTF_USESHOWWINDOW;
  StartupInfo.wShowWindow := SW_SHOW;
  if CreateProcess(nil, PChar(AProgram), nil, nil, False,  // Create Consoleprocess
    CREATE_NEW_CONSOLE or NORMAL_PRIORITY_CLASS, nil, nil, StartupInfo,
    ProcessInfo) then
    try
      PID := ProcessInfo.dwProcessId;  // Store  ProcessId to PID
    finally
      // close not longer required handles
      Showmessage(IntToStr(Integer(CloseHandle(ProcessInfo.hProcess))));
      Showmessage(IntToStr(Integer(CloseHandle(ProcessInfo.hThread))));
    end;
end;

type
  PEnumInfo = ^TEnumInfo;
  TEnumInfo = record ProcessID: DWORD; HWND: THandle; end;

function EnumWindowsProc(Wnd: DWORD; var EI: TEnumInfo): BOOL; stdcall;
var
  PID: DWORD;
begin
  GetWindowThreadProcessID(Wnd, @PID);  // get processID from WND of Enumeration
  // continue EnumWindowsProc if found PID is not our wished, visible and enabled  processID (EI.ProcessID)
  Result := (PID <> EI.ProcessID) or (not IsWindowVisible(WND)) or
    (not IsWindowEnabled(WND));
  if not Result then // WND found for EI.ProcessID
    EI.HWND := WND;
end;

function FindMainWindow(PID: DWORD): DWORD;
var
  EI: TEnumInfo;
begin
  //Store our processID and invalid Windowhandle to EI
  EI.ProcessID := PID;
  EI.HWND := 0;
  EnumWindows(@EnumWindowsProc, Integer(@EI));
  Result := EI.HWND;
end;

function AttachConsole(dwProcessId: DWORD): BOOL; stdcall;
  external kernel32 name 'AttachConsole';

procedure TForm1.Button2Click(Sender: TObject);
var
  Wnd: HWND;
  S: String;
begin
  if PID <> 0 then  // do we have a valid ProcessID
  begin
    Wnd := FindMainWindow(PID);
    if Wnd <> 0 then  // did we find the window handle
    begin
      S := 'Test';
      // change caption of found window
      SendMessage(Wnd, WM_SETTEXT, 0, LPARAM(@S[1]));
      if AttachConsole(PID) then   // are we able to attach to console of our proecess?
      begin
        Writeln('Here we are'); // write to attached console
        FreeConsole;  // free if not longer needed
      end;
    end;
  end;
end;

end. 
```

# api - 如何在 Go 中向 API 文档添加示例？

> ID：13796064
> 
> 赞同：7
> 
> 时间：2012-12-10T06:30:28.987
> 
> 标签：api, documentation, go

Go 标准库中有一些不错的[可执行示例](http://golang.org/pkg/strings/#example_Join)。如何将这样的示例添加到我自己的 API 文档中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T06:54:07.987

输出`$ go help testfunc`：

> “go test”命令期望在与被测包对应的“*_test.go”文件中找到测试、基准和示例函数。
> 
> 测试函数是一个名为 TestXXX 的函数（其中 XXX 是任何不以小写字母开头的字母数字字符串）并且应该具有签名，

```
 func TestXXX(t *testing.T) { ... } 
```

> 基准函数是一个名为 BenchmarkXXX 的函数，它应该具有签名，

```
 func BenchmarkXXX(b *testing.B) { ... } 
```

> 示例函数类似于测试函数，但不是使用 *testing.T 来报告成功或失败，而是将输出打印到 os.Stdout 和 os.Stderr。该输出将与函数的“输出：”注释进行比较，该注释必须是函数体中的最后一条注释（参见下面的示例）。一个没有此类注释的示例，或者在“输出：”之后没有文本的示例被编译但不执行。
> 
> Godoc 显示 ExampleXXX 的主体以演示函数、常量或变量 XXX 的使用。接收器类型为 T 或 *T 的方法 M 的示例命名为 ExampleT_M。给定函数、常量或变量可能有多个示例，以结尾的 _xxx 进行区分，其中 xxx 是不以大写字母开头的后缀。
> 
> 下面是一个例子：

```
func ExamplePrintln() {
        Println("The output of\nthis example.")
        // Output: The output of
        // this example.
} 
```

> 当整个测试文件包含一个示例函数、至少一个其他函数、类型、变量或常量声明，并且没有测试或基准函数时，整个测试文件将作为示例呈现。
> 
> 有关详细信息，请参阅测试包的文档。

# jquery - 在锚点标签的工具提示中显示 DIV

> ID：13796068
> 
> 赞同：0
> 
> 时间：2012-12-10T06:30:44.057
> 
> 标签：jquery, jquery-ui, tooltip, jquery-tooltip, jquery-ui-tooltip

我对 Jquery 很陌生。我看到的一切看起来都很奇怪。我需要显示一个 DIV 部分作为锚标记的工具提示。我可以切换 DIV 的可见性。但是，它没有显示为工具提示，而是显示在屏幕的上角。是否可以像锚标记的工具提示一样显示 DIV 部分。

提前致谢..

```
<div id = "contact" class = "tooltip" style="display: none">
<asp:Label Font-Bold = "true" ID = "custLbl" runat = "server" Text = "Phone: " ></asp:Label>
<asp:Label Font-Bold = "true" ID = "custMobLbl" runat = "server" Text = "" ></asp:Label>
<br />
<asp:Label Font-Bold = "true" ID = "custLbl2" runat = "server" Text = "Mail:  " ></asp:Label>
<asp:Label Font-Bold = "true" ID = "custMailLbl" runat = "server" Text = "" ></asp:Label>
</div>

    $(function () {
        $('.contactLink').hover(function () {
            $('#contact').show();
        }, function () {
            $('#contact').hide();
        });
    });

<a  class = "contactLink" href="javascript:void();"> Click me </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:35:25.040

将此添加到页面

```
var mouseX;
var mouseY;
$(document).mousemove( function(e) {
   mouseX = e.pageX; 
   mouseY = e.pageY;
}); 
```

然后将您的代码更改为

```
$(function () {
        $('.contactLink').hover(function () {
            $('#contact').show();
            $('#DivToShow').css({'top':mouseY,'left':mouseX}).show();
        }, function () {
            $('#contact').hide();
        });
    }); 
```

# svn - SVN进行单独合并时如何解决“合并时本地编辑传入删除”

> ID：13796069
> 
> 赞同：1
> 
> 时间：2012-12-10T06:31:10.967
> 
> 标签：svn

众所周知，当您在工作目录中编辑文件时，该文件已被其他人删除，如果您进行合并，您将得到“本地编辑传入删除合并时”，但以下情况如何？

前几天，我从分支合并了一个特定的修订版**1000**到 Trunk，今天我需要从分支合并修订版**990~1100**到 Trunk，要知道，先 svn 合并**990~999**，然后合并**1001~1100**。
在这些修订中，目录 A 有一些有趣的变化：

**-->目录 A 中的修订版****994**中的某些文件已更改（第一次合并应用这些更改）

**-->**目录 A 在修订**1004**中被删除（剩余的合并应用删除）

最后，我得到一个树冲突“本地编辑传入删除合并时”，我希望这两个更改都可以应用在主干中，我该怎么办？将冲突标记为已解决，然后手动删除目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:18:01.010

回答我的问题，也许以后有人会遇到。

我尝试了一些测试，解决此问题的方法是**“将冲突标记为已解决，然后手动删除目录”** :)

# node.js - Node.js Sequelize 手动加入数据

> ID：13796071
> 
> 赞同：1
> 
> 时间：2012-12-10T06:31:46.833
> 
> 标签：node.js, join, merge, manual, sequelize.js

现在用 Sequelize for Node.JS 磕磕绊绊了几个小时。我没有这样的运气使用它来建立关联（我必须在有限的时间内拆开我的大部分架构才能这样做）。对于我的应用程序，只有几个关联（主要与博客相关）。

在我的一个博客 API 调用中（这是针对特定博客 ID）：

```
exports.single = function (req, res, next) {
db.Models.blog.find({
    where: res.locals.where
})
.success(function (blog) {
    getAuthors(blog.BLOG_ID, function (authors) {
        blog.AUTHORS = authors;
        res.locals.data = blog;
        next();
    });
})
.error(function (err) {
    res.locals.error = err;
    next();
}); 
```

}

我正在调用 getAuthors(blogId) 来获取 Author <-> Blog 链接表中的所有作者：

```
function getAuthors (blogId, fn) {
db.Models.author.findAll({
    where: { BLOG_ID: blogId }
})
.success(function (authors) {
    fn(authors);
})
.error (function (err) {
    fn([]);
}); 
```

}

大多数情况下，它都有效。我正在取回正确的数据，但我正在尝试将其与原始博客数据合并。最好作为财产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:31:46.833

在转储从第二个查询返回的作者对象的内容后，我了解到从 Sequelize 对象中提取数据时使用的属性

```
model.attritubes[]; 
```

是一个字符串数组，其中列出了将从 Sequelize 对象*输出的数据属性。*所以在我的行之前：

```
blog.AUTHORS = authors; 
```

我做了：

```
blog.attributes.splice(5, 0, 'AUTHORS'); 
```

我不是一个聪明人。

# r - 在 R 中定时延迟使用 qmap()？

> ID：13796073
> 
> 赞同：2
> 
> 时间：2012-12-10T06:31:50.177
> 
> 标签：r, qmap, ggmap

天，

我正在尝试学习如何在 R 中使用 ggmap 包，但一开始就卡住了。我要做的就是使用 qmap() 函数下载地图，但我得到了一些非常奇怪的结果。我努力了：

```
library(ggmap)
aus<- qmap('australia')
aus<- qmap('australia', zoom = 5) 
```

以及其他位置和事物的数量。有时会下载地图，但我经常收到以下错误消息：

```
Error in download.file(url, destfile = destfile, quiet = !messaging, mode = "wb"): 
  cannot open URL 'http://maps.googleapis.com/maps/api/staticmap?center=adelaide&zoom=6&size=%20640x640&scale=%202&maptype=terrain&sensor=false'
In addition: Warning message:
In download.file(url, destfile = destfile, quiet = !messaging, mode = "wb") :
  cannot open: HTTP status was '403 Forbidden' 
```

它会正常工作一次，然后 5 秒后，当我用它无法工作的确切代码再次尝试时。

从重复使用此功能看来，在成功使用之间似乎存在时间延迟。我已经计时了在两次成功使用之间必须等待多长时间，似乎 1 分钟是这个阈值。另外，每次我尝试使用该功能，无论成功与否，它都会重置这1分钟的等待时间。

像谷歌这样的地方会限制你下载东西的频率吗？如果我想快速检查地图的大小是否合适等，这有点令人沮丧。有没有人有同样的经历，知道我可能做错了什么，或者知道解决这个问题的方法？

提前感谢您的时间和帮助！

干杯，亚当

# c# - 最有效的通过数组

> ID：13796076
> 
> 赞同：4
> 
> 时间：2012-12-10T06:32:11.350
> 
> 标签：c#, arrays, performance

> **可能重复：**
> [这两个 for 循环中哪一个在时间和缓存性能方面更有效](https://stackoverflow.com/questions/9888154/which-of-these-two-for-loops-is-more-efficient-in-terms-of-time-and-cache-perfor)
> [为什么循环的顺序会在迭代 2D 数组时影响性能？](https://stackoverflow.com/questions/9936132/why-does-the-order-of-the-loops-affect-performance-when-iterating-over-a-2d-arra)

我想知道通过数组的最快方法，在大数组中我使用它很重要。例如我有：

```
ushort[, , ,] map = new ushort[3000, 3000, 3, 3]; // [pointX, pointY, stack, lvl]

          for (int i = 0; i < 3000; i++)
              for (int j = 0; j < 3000; j++)
                  for (int k = 0; k < 3; k++)
                      for (int l = 0; l < 3; l++)
                         map[i, j, k, l] = 45001; 
```

这可能是相关的，因为它取决于这些值如何存储在内存中。那么在这种情况下，最好按照 i->j->k->l 还是 l->k->j->i 的顺序执行此操作？

另外，其他语言有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:35:28.707

在java中如何初始化数组的方式有很大的不同，下面是纯java代码来展示区别，你可以参考下面的代码来提高效率：

```
public class MutipleArray {

    public static void main(String[] args) {
        long t0 = System.currentTimeMillis();
        int [][][][] map = new int[3000][3000][3][3];
        for (int i = 0; i < 3000; i++)
            for (int j = 0; j < 3000; j++)
                for (int k = 0; k < 3; k++)
                    for (int l = 0; l < 3; l++)
                       map[i][j][k][l] = 45001;
        long t1 = System.currentTimeMillis();
        System.out.println("Time for initializing the first Array:"+(t1-t0)+"ms");

        int [][][][] map2 = new int[3][3][3000][3000];
        for (int i = 0; i < 3; i++)
            for (int j = 0; j < 3; j++)
                for (int k = 0; k < 3000; k++)
                    for (int l = 0; l < 3000; l++)
                        map2[i][j][k][l] = 45001;
        long t2 = System.currentTimeMillis();
        System.out.println("Time for initializing the second Array:"+(t2-t1)+"ms");
    }
} 
```

结果：

```
Time for initializing the first Array:13570ms
Time for initializing the second Array:495ms 
```

因此，我建议您在 java 中使用 int [][][][] map = new int[3][3][3000][3000] 代替。

# opencart - opencart中的随机订单号

> ID：13796077
> 
> 赞同：0
> 
> 时间：2012-12-10T06:32:19.443
> 
> 标签：opencart

我在 opencart 中有一个网站，目前它运行得很好，但问题是随机订单号，第一号订单号是 3361，第二个订单号是同一天的 3381。我不明白这 20 个订单都去哪儿了。请提供解决此问题的方法，以便我可以获取序列号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:28:46.307

事实是：

OpenCart 会在“订单确认”页面显示时创建新订单。这是订购过程中的最后一步，在此之后订单被确认并等待处理并发送电子邮件。

但是，无论何时在确认页面上，用户点击页面刷新或返回更改某些内容并再次返回确认页面（步骤），都会生成一个新的订单 ID（换句话说，在丢弃旧订单的同时创建一个新订单）。

这就是为什么有时在两个真实订单之间 ID 不连续的原因 - 但如果您打开 phpMyAdmin 并查看`orders`表格，您会发现有一些 ID 被未完成的订单连续使用，因此在管理中不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:54:19.627

我认为当每个客户将商品插入购物车时，opencart 会为每个客户分配一个订单号。然后，如果客户没有完成购买并清除购物车，那么这个号码就会被遗忘。

# uri - 如何从 URI 启动另一个 Win Phone 8 应用程序？

> ID：13796080
> 
> 赞同：2
> 
> 时间：2012-12-10T06:32:34.883
> 
> 标签：uri, windows-phone, windows-phone-8

我知道有类似的问题，但它是针对 Win Phone 7 的，答案是否定的。Win Phone 8 可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:46:57.920

只要应用程序（内部或第三方）已在手机上注册了 URI“方案”，您就可以通过 URI 启动某些应用程序。

请参阅[此处的 MSDN 上的简要介绍](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207014(v=vs.105).aspx#BKMK_LaunchingbuiltinappsviaURI)。您不必从`LaunchUri`SDK 方法启动，但您也可以从网页中的网络链接启动，例如。

列出的可用内部 URI 包括启动浏览器、电子邮件、一些设置屏幕和商店应用程序。

# java - 无法从 java 程序（Eclipse）运行特定的终端命令

> ID：13796087
> 
> 赞同：0
> 
> 时间：2012-12-10T06:33:18.737
> 
> 标签：java, eclipse, ubuntu, exec, processbuilder

在 JAVA 中使用 ProcessBuilder 我可以运行简单的终端命令，如 ls、pwd、echo 等。但是下面的代码正在终止，不知道为什么？

```
public static void main(String[] args) throws Exception
{
    Runtime r = Runtime.getRuntime();
    Process p = r.exec("echo 'T W O N E I G H T' | /home/saj/g2p/mosesdecoder-master/bin/moses -f /home/saj/g2p/working/binarised-model/moses.ini");
    p.waitFor();

    BufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = "";
    while ((line = b.readLine()) != null) 
    {
      System.out.println(line);
    } 
} 
```

此命令在终端上运行良好，大约需要 15 秒才能运行并提供输出。我在 stackoverflow 上浏览过类似的主题，但没有找到任何帮助。请在这方面提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:46:24.003

请参考此代码，这可能会对您有所帮助....使用 bash。只需将您的命令替换为 echo 命令

ProcessBuilder b = new ProcessBuilder("bash","-c","echo abc");

```
 Process termProc = null;

    try {
        termProc = b.start();
        BufferedReader stdInput = new BufferedReader(new 
        InputStreamReader(termProc.getInputStream()));
        BufferedReader stdError = new BufferedReader(new 
        InputStreamReader(termProc.getErrorStream()));

        String s = null;
        while ((s = stdInput.readLine()) != null) 
        {
            System.out.println(s);

         }
        while ((s = stdError.readLine()) != null) 
        {

            System.out.println(s);

        }

    } catch (IOException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:43:17.733

考虑同时监控 InputStream 和 ErrorStream。输出可能会写入 ErrorStream，这就是为什么您看不到任何显示的原因。

[这是来自 Javaworld 的一个很好的例子](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=4)，它介绍了 Runtime.exec() 的一些常见缺陷以及如何使用它。

* * *

我在第一次查看您的代码时错过了它，但这里提示您可能做错了什么：

> 由于一些原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

考虑按照以下方式更新您的代码：

```
public static void main(String[] args) throws Exception
{
    Runtime r = Runtime.getRuntime();
    Process p = r.exec("echo 'T W O N E I G H T' | /home/saj/g2p/mosesdecoder-master/bin/moses -f /home/saj/g2p/working/binarised-model/moses.ini");

    BufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = "";
    while ((line = b.readLine()) != null) 
    {
      System.out.println(line);
    } 

    BufferedReader b = new BufferedReader(new InputStreamReader(p.getErrorStream()));
    String line = "";
    while ((line = b.readLine()) != null) 
    {
      System.out.println(line);
    } 

    p.waitFor();
} 
```

**注意：**我建议创建线程来处理显示来自输入流和错误流的输出，如我在上面发布的示例链接中所示。

# c# - 用 C# 或任何其他语言阅读 PDF

> ID：13796090
> 
> 赞同：0
> 
> 时间：2012-12-10T06:33:31.797
> 
> 标签：c#, pdf, language-agnostic

> **可能重复：**
> [PDF 库](https://stackoverflow.com/questions/210029/pdf-libraries)
> [如何在 C#.Net 中打开 PDF 文件？](https://stackoverflow.com/questions/6742720/how-to-open-pdf-files-in-c-net)

我正在制作一个可以在 C# 中读取 pdf 的应用程序。到目前为止，我可以使用创建 pdf

```
using iTextSharp.text.pdf; 
```

是否有任何 Api 或其他语言可以让我阅读 pdf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:36:10.453

[**Adobe PDF IFilter**](http://www.adobe.com/support/downloads/detail.jsp?ftpID=2611)是一个可免费下载的动态链接库 (DLL) 文件，它在 Microsoft 索引客户端和 Adob​​e PDF 文件库之间架起了一座桥梁。它由了解 Adob​​e 可移植文档格式的代码以及可以与索引客户端交互的代码组成。当索引客户端需要从 PDF 文件中索引内容时，它会在其注册表中查找适当的 DLL 并找到 Adob​​e PDF IFilter。Adobe PDF IFilter 会将文本返回给索引客户端。然后索引客户端将索引结果并将适当的结果返回给用户。

**关于使用的文章**：[**在 C# 中将 PDF 转换为文本**](http://www.codeproject.com/Articles/12445/Converting-PDF-to-Text-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:37:01.187

你可以看到这个[链接](https://stackoverflow.com/questions/1340278/reading-pdf-in-c-sharp) ，[这个](https://stackoverflow.com/questions/2411610/programmatic-reading-of-pdfs-in-c-sharp)问题已经被问过了......你也可以将 PDF 转换为文本，然后阅读它的内容

# objective-c - 返回到 UIViewController 使其视图滚动

> ID：13796091
> 
> 赞同：0
> 
> 时间：2012-12-10T06:33:36.763
> 
> 标签：objective-c, ios, cocoa-touch

我正在使用 iOS 6。我有`UIViewController`一个`UIScrollView`. 这`ScrollView`是一个登录屏幕，即用于登录的标签、文本字段和按钮。

为了在键盘弹出时滚动到适当的字段，我使用 Apple 开发人员文档中的以下代码：

```
// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    CGRect bkgndRect = self.activeField.superview.frame;
    bkgndRect.size.height += kbSize.height;
    [self.activeField.superview setFrame:bkgndRect];
    [self.scrollView setContentOffset:CGPointMake(0.0, self.activeField.frame.origin.y-kbSize.height) animated:YES];
}

- (void)resetUIEdgeInsets
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    [self resetUIEdgeInsets];
}

- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self resetUIEdgeInsets];
    [self registerForKeyboardNotifications];
} 
```

它工作正常。当我模态到另一个视图控制器并解散回到这里时，就会出现问题。滚动位置有时（间歇性地）完全没有空间。

我在这里做错了什么吗。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:37:19.373

尝试将您的滚动视图的名称更改为其他名称。我以前也有同样的问题。在同一个 vc 中有 2 个 UIScrollView，在模态视图呈现后，其中一个总是放错位置。

# android - 在 Android 中保护 SD 卡的内容

> ID：13796096
> 
> 赞同：0
> 
> 时间：2012-12-10T06:34:45.513
> 
> 标签：android, security, hardware, sd-card, drm

我的 Android 应用程序提供了一些敏感的内容数据，这些数据（几乎说 1 GB）存储在 SD 卡上。我想防止用户在标签本身以外的其他地方使用此卡，并在计算机或其他平板电脑上读取/复制内容。我已经考虑过加密机制，但对于我拥有的数据量来说，这些机制非常缓慢，而且不是一个选择。是否有任何我可以更改的硬件设置或我可以用来实现此目的的文件数据格式？基本上，当我取出卡并放入另一个设备时，除非说我有密码或某种安全机制，否则我应该无法从中复制数据。大部分内容是 pdf 文件或 mp4 视频，我需要一种软件/硬件 DRM 机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:42:09.603

我没有做过类似的事情，但这[可能](http://developer.android.com/reference/android/drm/package-summary.html)是你最好的选择。

如果您无法为您的内容实施在线服务，您可以尝试创建一个代理本地服务，该服务将为您处理 DRM 信息请求。

# sql-server-2008 - ASP 经典连接到 SQL Server 2008 错误 80004005 登录失败

> ID：13796097
> 
> 赞同：0
> 
> 时间：2012-12-10T06:34:50.500
> 
> 标签：sql-server-2008, asp-classic

我正在尝试在 Windows 7 本地环境中建立 ASP Classic 和 SQL Server 2008 Express 之间的连接。今天是我第一次尝试这个，我花了几个小时研究无济于事。我能做的最好的就是登录失败。

这是连接字符串（许多尝试过的字符串之一）：

```
Provider=SQLOLEDB;Data Source=mycompname\sqlexpress;Initial Catalog=theDBName;Integrated Security=SSPI 
```

错误：

> *用于 SQL Server 错误“80004005”的 Microsoft OLE DB 提供程序*
> 
> *无法打开登录请求的数据库“theDBName”。登录失败。*

我想要的是：

将数据库连接到我的 ASP Classic 页面的任何东西（我通常在 LAMP 中工作）！这不适用于实时站点，所以目前，这是我唯一的考虑因素。只是把它完成。:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:43:39.417

您已指定 Integrated Security=SSPI，这意味着必须允许拥有建立连接的进程的用户访问数据库。这意味着 Web 服务必须具有访问权限。你这样做了吗？

如果你创建一个命名用户，给它一个密码，然后在你的连接字符串中使用它可能会更容易。

# javascript - Facebook 的“赞”按钮根本不显示

> ID：13796099
> 
> 赞同：2
> 
> 时间：2012-12-10T06:35:08.503
> 
> 标签：javascript, html, facebook, facebook-like

编码新手，如果这真的很基本，请多多包涵！我正在尝试在我的页面上添加一个 Facebook 的“喜欢”按钮。我完全按照他们在说明网站上的描述复制了代码。我输入了我的页面详细信息、所需的宽度（它符合他们为我在生成器中选择的功能推荐的限制）等等，然后将代码复制/粘贴到我的 html 中。我肯定错过了什么。他们的指示是将其粘贴到 HTML 中，最好是在开头的下方`<body>`，所以我做了：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后他们说在我希望按钮出现的任何地方复制/粘贴以下内容，我这样做了：

```
<div class="fb-like" data-href="http://www.facebook.com/musicbyava" data-send="true" data-layout="button_count" data-width="100" data-show-faces="false" data-font="arial"></div> 
```

我刷新了我的页面，插件应该在的地方没有任何痕迹。不是一个点，不是一条线，不是错误信息，nada。我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-22T21:44:14.680

它不能在您的本地计算机上运行但开始在服务器上神奇地运行的原因是：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

代码前面的`//`意思是浏览器应该在加载脚本时使用正在使用的协议......所以：

如果您正在运行[http://example.com](http://example.com) facebook 将加载一个不安全的，如果您使用[https://example.com](https://example.com)那么脚本将从 facebook 的安全服务器加载...

现在这就是神奇的地方......当从本地文件加载时，您的浏览器会自动显示 URL，浏览器会`file:///C:/mysite`自动查找名为

```
file:///connect.facebook.net/.... 
```

那不存在，而且失败得很惨

猜猜你上传到服务器时发生了什么？？？

我会让你弄清楚那个...

干杯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:58:45.970

对于什么样的网站，您将 fb like 按钮用于 joomla 或 wordpress 等 cms，我认为最好的选择是[http://sharethis.com/#sthash.OXTxyj48.dpbs](http://sharethis.com/#sthash.OXTxyj48.dpbs)不错的选择，如果您喜欢，我多次使用它试试看，在访问站点后单击**获取共享工具**菜单，然后您可以使用它并通过您站点中的代码，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:59:03.813

欢迎来到堆栈溢出。

为什么脚本没有显示“赞”按钮可能存在一系列问题。如果没有输出的 html 的 url 或副本，几乎无法分辨。如果您在本地网络上工作并且失去了互联网连接，例如，繁荣，没有 FB Like 框。

在黑暗中拍摄 - 这是一个 javascript 错误。javascript 中的错误不会显示在屏幕上。相反，它们以几乎无限的方式表现出来，从在页面加载后省略单个元素到加载白屏。

如果您使用的是 Chrome 或 Firefox，则可以下载 Web Developer 扩展。我推荐用于 Firefox 的 Firebug，或在 Chrome 中右键单击和“检查元素”（我认为这与 Chrome 一起提供——否则它是 Web 开发者扩展）

无论您使用哪种工具，所有错误都会在这些环境的控制台中输出。

我们才刚刚开始。

如果这听起来工作量太大，我建议在不同的页面上尝试上面的代码，以查看您要复制和粘贴到的页面是否包含格式错误的 html。然后回到上面的建议。

或者插件。

[http://www.addthis.com/](http://www.addthis.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-27T23:11:43.007

我遇到了这个问题，然后将我的域 URL 添加到 Facebook 开发人员工具中的应用程序设置中：[https](https://developers.facebook.com/apps/[app_id]/settings/) ://developers.facebook.com/apps/[app_id ]/settings/ -> 设置 -> 基本

# java - Java中的循环继承层次结构

> ID：13796100
> 
> 赞同：4
> 
> 时间：2012-12-10T06:35:10.780
> 
> 标签：java, inheritance

我知道在 Java 中不允许遵循循环继承层次结构。编译器抛出一个错误，但我真正感兴趣的是知道编译失败的确切原因。

```
class A extends B{}
class B extends C{}
class C extends A{}  // this will give you compile time error. 
```

在我编写代码的那一刻，编译器会抛出错误的原因是什么`class C extends A{}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T06:39:36.873

这样的关系根本不可能。它定义了一个无限递归类。为了定义`class C`，你需要`class A`，定义`class A`你需要`class B`，定义`class B`你需要`class C`——你又回到了起点。这会无限进行，因此编译器无法做到这一点，而且它也没有逻辑意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T06:47:01.557

看看**extends**这个词，在Java中一个子类确实**扩展**了它的超类。这意味着子对象是它的所有超级对象加上一些新成员和一些指定成员。

那怎么能

*   A 是 B 的扩展
*   B 是 C 的扩展
*   C 是 A 的扩展？

我们可以说扩展是一个[**顺序关系**](http://en.wikipedia.org/wiki/Partially_ordered_set)： **A 扩展 B**意味着**A < B**（甚至不是 A <= B），然后在你的情况下**B < C**，所以很明显**C 不能小于 A**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T06:56:33.063

有一个简单的非常实际的问题（除了其他答案中解释的逻辑问题）：

类必须在实例化期间初始化。这是在 Java 中通过首先初始化超类来完成的。当您有一个循环时，初始化代码会沿着继承阶梯上升并尝试初始化永远无法到达的超类......

因此，对于 Java，这必须被禁止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T06:54:29.090

让我们将继承的概念抽象到家谱中。从本质上讲，这就是他们归结为的原因。我将在此处使用反向映射方案，因此我将按照从 C 到 A 的方式工作。

*   你从你的母亲那里**继承**了某些属性。
*   你的母亲**继承**了她父亲的某些特质。
*   你的祖父可以被认为是继承链中的最高者。

在 Java 中，这会导致：

*   C 继承自 B。
*   B 继承自 A。
*   A 是继承链中的最高对象。

从逻辑上讲，这将包括[多重继承](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)，这是 Java 不支持的功能，但可以通过使用[接口](http://en.wikipedia.org/wiki/Interface_inheritance)来缓解。

你的继承方案说的是祖父直接从孙子那里继承，这是没有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T06:39:05.127

`C` *自IS-A* 以来，我们可以将问题简化为这些语句`B`：

```
class A extends C{}
class C extends A{} 
```

显然这是一个冲突，因此编译器会给出该错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-21T10:55:08.477

循环继承可以有两个例子：
1\. A 类扩展 A { } :- 这没有任何意义，因为 A 类的成员已经存在于 A 类中，那么为什么要扩展。
2\. A 类扩展 B { } 和 B 类扩展 A { } :- 在这种情况下，两个类的成员都可以写在一个类中，那么为什么要写两个类并相互扩展。
由于上述用例无效，因此 Java 不支持循环继承。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-14T21:51:25.443

我想我会为这个线程添加一个尚未说明的 Java 特定答案。在 Java 中，每个类最终都必须派生自`Object`该类。这就是为什么每个对象都可以`Object`毫无问题地转换为实例的原因。为了支持这一事实，[Java 继承教程](https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)指出：

> 除了没有超类的 Object 之外，每个类都有一个且只有一个直接超类（单继承）。在没有任何其他显式超类的情况下，每个类都隐含地是 Object 的子类。
> 
> 类可以从从类派生的类派生的类派生，依此类推，并最终从最顶层的类 Object 派生。据说这样的类是继承链中所有类的后裔，这些类一直延伸到 Object。

如果允许循环继承依赖，并且因为 Java 中的类必须只有一个直接超类（见上文），那么任何循环依赖链中的类实例（例如，您的类的实例`A`、`B`和`C`）都不能从 继承`Object`，即不允许。因此，这些循环依赖对象都不能被视为`Object`s。因此，编译器必须禁止循环依赖。

# javascript - 屏幕上与键码对应的位置

> ID：13796103
> 
> 赞同：1
> 
> 时间：2012-12-10T06:35:27.127
> 
> 标签：javascript, jquery, underscore.js, keycode, keyup

我正在尝试创建允许我按下键盘上的按钮并在屏幕上显示相应圆圈的代码。该位置将与按下的键相关。例如，字母 a 与 b 不同。这是我到目前为止所拥有的：

```
<script>

        $(document).bind('keyup',function(event){
            var keyCode = event.keyCode;
            var theObjectCoorespondingToTheKeyTheyPressed = _.where(keyPlacementMap,{keycode:keyCode});
            theObjectCoorespondingToTheKeyTheyPressed = theObjectCoorespondingToTheKeyTheyPressed[0];
            console.log(event);
        })

    </script> 
```

我最终会更改变量名；现在将它们命名为这样对我很有用。

我也在使用 jquery 和下划线，并且我有一个包含所有键码的数组，以及一个随机的 x 和 y 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:00:16.533

将 x/y 位置添加到您的键盘映射。两个单独的类是实现此目的的最佳方式，因为它允许您随意设置选定和未选定键的样式（包括隐藏和显示它们）

我在这里做了一个小的 QWERTY 样本

[http://jsbin.com/ivuseh/2](http://jsbin.com/ivuseh/2)

代码视图：

[http://jsbin.com/ivuseh/2/edit](http://jsbin.com/ivuseh/2/edit)

'.button' 类可以为按下的键设置样式，但是您喜欢更大、彩色、可见的。在示例中，我将重绘每个按键上的所有按钮，这是不必要的。将这些功能分开以进行优化非常容易。

# iphone - 如何知道从应用商店更新后第一个应用是否启动

> ID：13796104
> 
> 赞同：0
> 
> 时间：2012-12-10T06:35:28.133
> 
> 标签：iphone, ios, crash, app-store

我在应用商店有 1.0 版。我刚刚获得了 appstore 的 1.1 版批准。

从应用商店更新 1.0 版本的应用时，设备出现崩溃。但是当我们下载 1.1 版的新版本时，应用程序不会崩溃。

如何使用 Xcode 进行测试？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:47:34.900

通过 Xcode 将您的第一个版本应用程序安装到设备。

然后通过 Xcode 将您的第二个版本应用程序安装到同一设备（**注意**：不要从您的设备中删除以前安装的版本）。

因此，它不会覆盖您的库或文档目录中可用的应用程序竞争。

然后它会崩溃..所以你可以通过 Xcode 控制台得到它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:40:59.723

也许您的保存文件有问题？

当在设备中使用应用程序 1.0 时，用户将更新到 1.1，然后文件夹 Library/Caches、Library/Preferences 将保留。

当用户重新下载一个新的 1.1 版本时，这个文件夹似乎是一个空的。

为了测试他，尝试运行 1.0 并在应用程序中进行一些操作后，尝试将 1.0 更新到 1.1。如果应用程序崩溃，XCode 必须抓住他

# android - 动态添加 EditTexts 并强制用户输入焦点更改数据

> ID：13796108
> 
> 赞同：1
> 
> 时间：2012-12-10T06:35:50.537
> 
> 标签：android, focus, android-edittext

我`EditTexts`在`TableLayout`. 然后在通过模拟器中的选项卡更改焦点时`Eclipse`，我检查它们是否为空白，如果为空白，我需要将焦点设置为`EditText`else 它应该移动到下一个。

问题是，焦点移动到下一个`EditText`并且光标允许进入下一个字段。两者都`EditTexts`被突出显示。有人可以帮助我改变焦点的正确方法吗？

我虽然这可以解决问题，但它不起作用。同样，两者`EditTexts`都变得集中，因为两者都是空白的，导致两者上的焦点侦听器都被激活。

```
if(arrEdit.size()>0){
for(EditText etLot: arrEdit){
    etLot.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            String msg = null;
            EditText et = null;

            if(!hasFocus){
                for(int i=0;i< arrEdit.size();i++){
                    msg= ((TextView)arrTxtVw.get(i)).getText().toString();
                    System.out.println("Focus Changed on "+msg);
                    if((((EditText)v).length()>0)==false && ((EditText)v).getId()== arrEdit.get(i).getId()){
                        System.out.println("size is zero for "+msg);
                        (arrEdit.get(i)).requestFocus();
                        et=(arrEdit.get(i));
                        break;
                    }
                }

                TextView text = (TextView) lyout.findViewById(R.id.text);
                text.setTextSize(15);
                text.setText(msg+"cannot be blank");
                Toast toast = new Toast(ctxref);
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.setDuration(1500);
                toast.setView(lyout);
                toast.show();
                final EditText ettemp = et;
                et.post(new Runnable() {

                    public void run() {
                        ettemp.requestFocus();

                    }
                });
            }

        }
    });

} 
```

}

# python - Python - 如何在应用程序在侦听模式下具有 TCP 端口时即时重新启动应用程序？

> ID：13796109
> 
> 赞同：10
> 
> 时间：2012-12-10T06:35:50.540
> 
> 标签：python, linux, network-programming, python-2.7

重新启动运行侦听 TCP 端口的应用程序的最佳方法是什么？问题是：如果我在重新启动时快速启动应用程序，它会失败，因为正在侦听的套接字已经在使用中。

在这种情况下如何安全地重新启动？

```
socket.error: [Errno 98] Address already in use 
```

代码：

```
#!/usr/bin/python
import sys,os
import pygtk, gtk, gobject
import socket, datetime, threading
import ConfigParser
import urllib2
import subprocess

def server(host, port):
  sock = socket.socket()
  sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
  sock.bind((host, port))
  sock.listen(1)
  print "Listening... " 
  gobject.io_add_watch(sock, gobject.IO_IN, listener)

def listener(sock, *args):
  conn, addr = sock.accept()
  print "Connected"
  gobject.io_add_watch(conn, gobject.IO_IN, handler)
  return True

def handler(conn, *args):
  line = conn.recv(4096)
  if not len(line):
    print "Connection closed."
    return False
  else:
    print line
    if line.startswith("unittest"):
      subprocess.call("/var/tmp/runme.sh", shell=True)
    else:
      print "not ok"
  return True

server('localhost', 8080)
gobject.MainLoop().run() 
```

运行me.sh

```
#!/bin/bash
ps aux | grep py.py | awk '{print $2}' | xargs kill -9;
export DISPLAY=:0.0 && lsof -i tcp:58888 | grep LISTEN | awk '{print $2}' | xargs kill -9;
export DISPLAY=:0.0 && java -cp Something.jar System.V &
export DISPLAY=:0.0 && /var/tmp/py.py & 
```

编辑：请注意，我将 Java 和 Python 作为一个具有两层的应用程序一起使用。所以 runme.sh 是我同时启动两个应用程序的启动脚本。在 Java 中，我按下 Python 重新启动按钮。但是 Python 不会重新启动，因为 kill 是通过 BASH 完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:42:24.083

`SO_REUSEADDR`在绑定之前，您必须在套接字上找到与设置等效的 Python 。确保套接字按照其他答案中的建议在退出时关闭既不必要也不充分，因为（a）套接字在进程退出时被操作系统关闭，并且（b）您仍然必须克服该`TIME_WAIT`状态下接受的连接，这仅`SO_REUSEADDR`可以做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:38:47.600

1.

You have a problem killing your python

```
air:~ dima$ ps aux | grep i-dont-exist.py | awk '{print $2}'
34198 
```

Which means that your `grep` process gets caught up in and killed by your restart logic.

On linux you could use pidof instead.

Alternatively use start-stop-daemon and pid file.

2.

You already reuse address, so my guess is your python doesn't die fast enough.

For a quick test, add a sleep before you start python again.

If this helps, add a sleep-wait loop after kill command and only start new python when you are sure old python is not running anymore.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T18:56:58.567

您的 Python 程序是否有可能产生其他进程？例如，通过 fork、subprocess 或 os.system？

您的侦听文件描述符可能会被生成的进程继承：

os.system("sleep 1000") # 没有套接字：

```
ls -l /proc/`pidof sleep`/fd
total 0
lrwx------ 1 user user 64 2012-12-19 19:52 0 -> /dev/pts/0
lrwx------ 1 user user 64 2012-12-19 19:52 1 -> /dev/pts/0
l-wx------ 1 user user 64 2012-12-19 19:52 13 -> /dev/null
lrwx------ 1 user user 64 2012-12-19 19:52 2 -> /dev/pts/0 
```

插座（）; 套索选择（）；绑定（）；听（）; os.system("sleep 1000") # 使用套接字：

```
ls -l /proc/`pidof sleep`/fd
total 0
lrwx------ 1 user user 64 2012-12-19 19:49 0 -> /dev/pts/0
lrwx------ 1 user user 64 2012-12-19 19:49 1 -> /dev/pts/0
l-wx------ 1 user user 64 2012-12-19 19:49 13 -> /dev/null
lrwx------ 1 user user 64 2012-12-19 19:49 2 -> /dev/pts/0
lrwx------ 1 user user 64 2012-12-19 19:49 5 -> socket:[238967]
lrwx------ 1 user user 64 2012-12-19 19:49 6 -> socket:[238969] 
```

也许您的 Python 脚本死了，但它的子脚本没有死，后者继续引用侦听套接字，因此新的 Python 进程无法绑定到相同的地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:23:27.977

可能的解决方案＃1：从旧版本中分叉并执行您的 python 脚本的新副本。它将继承侦听套接字。然后，如果需要，将其与父级分离并杀死（或退出）父级。请注意，即使子级（新版本）处理任何新的传入请求，父级（旧版本）也可以完成对任何现有请求的服务。

`sendmsg()`可能的解决方案＃2：用and向旧运行脚本发出信号以将套接字移交给新脚本`SCM_RIGHTS`，*然后*终止旧脚本。 [此示例代码](http://linux.die.net/man/3/cmsg)讨论了“文件描述符”，但也适用于套接字。请参阅：[如何以最少的停机时间移交 TCP 侦听套接字？](https://stackoverflow.com/questions/2206951/how-to-hand-over-a-tcp-listening-socket-with-minimal-downtime)

可能的解决方案#3：如果`bind()`返回 EADDRINUSE，请稍等片刻，然后重试，直到成功。如果您需要快速重新启动脚本并且中间没有停机时间，那么这当然行不通:)

可能的解决方案#4：不要用 kill -9 杀死你的进程。用其他信号杀死它，例如`SIGTERM`. 当你得到它时，抓住`SIGTERM`并打电话。`gobject.MainLoop.quit()`

可能的解决方案#5：确保你的python脚本的父进程（例如shell）`wait`在它上面。如果脚本的父进程没有运行，或者脚本被守护进程，那么如果用 杀死`SIGKILL`，init 将成为它的父进程。init`wait`会定期调用，但可能需要一些时间，这可能就是您遇到的问题。如果您*必须*使用`SIGKILL`但您想要更快的清理速度，请致电您`wait`自己。

解决方案 4 和 5 在停止旧脚本和启动新脚本之间有一些非常短但非零的时间。解决方案 3 之间可能有相当长的时间，但非常简单。解决方案 1 和 2 是在*没有停机时间*的情况下执行此操作的方法：任何连接调用都将成功并获得旧的或新的运行脚本。

`SO_REUSEADDR`PS关于不同平台行为的更多细节： [SO_REUSEADDR 在 Windows 上与 Unix 上的语义不同](http://bugs.python.org/issue2550)

> 然而，在 Windows 上，该选项实际上意味着完全不同的东西。这意味着该地址应该从目前恰好正在使用它的任何进程中窃取。

我不确定这是否是您遇到的问题，但请注意，如那里所述，不同版本的 Unix 上的行为也有所不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T12:14:47.757

您可以在启动脚本中添加更多逻辑来进行预执行测试和清理。

```
#!/bin/bash
export DISPLAY=:0.0

# If py.py is found running
if pgrep py.py; then
 for n in $(seq 1 9); do
  # kill py.py starting at kill -1 and increase to kill -9
  if ! pgrep py.py; then
   # if no running py.py is found break out of this loop
   break
  fi
  pkill -${n} py.py
  sleep .5
 done
fi

# Verify nothing has tcp/58888 open in a listening state
if lsof -t -i tcp:58888 -stcp:listen; then
 echo process with pid $(lsof -t -i tcp:58888 -stcp:listen) still listening on port 58888, exiting
 exit
fi

java -cp Something.jar System.V &
/var/tmp/py.py & 
```

最终，您可能希望使用完整的 init 脚本并将这些进程守护进程。有关示例，请参阅[http://www.thegeekstuff.com/2012/03/lsbinit-script/ ，尽管如果您的进程作为非特权用户运行，这将稍微改变实现，但总体概念是相同的。](http://www.thegeekstuff.com/2012/03/lsbinit-script/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-16T19:02:20.423

这是我的猜测：kill 是异步的。它只是告诉内核向进程发送信号，它也不会等待信号被传递和处理。在重新启动该过程之前，您应该使用“等待”命令。

```
$ wait $PID 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-19T19:54:58.793

我尝试过的任何东西都不起作用。所以为了降低风险，我开始使用文件系统作为套接字示例：

```
# Echo server program
import socket,os

s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
try:
    os.remove("/tmp/socketname")
except OSError:
    pass
s.bind("/tmp/socketname")
s.listen(1)
conn, addr = s.accept()
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.send(data)
conn.close()

# Echo client program
import socket

s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
s.connect("/tmp/socketname")
s.send('Hello, world')
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

# sharepoint - Sharepoint 日历 Web 部件在 Chrome 浏览器中不起作用

> ID：13796110
> 
> 赞同：1
> 
> 时间：2012-12-10T06:35:53.837
> 
> 标签：sharepoint, sharepoint-2010

我的 SharePoint 网站中有一个日历 Web 部件，它在 Firefox 和 IE 中运行良好，但在 chrome 浏览器中无法运行。

这与我面临的情况相同。

[http://answers.flyppdevportal.com/categories/sharepoint2010/sharepoint2010programming.aspx?ID=9dde800d-7ce0-4069-93d7-2adf2c53d94b](http://answers.flyppdevportal.com/categories/sharepoint2010/sharepoint2010programming.aspx?ID=9dde800d-7ce0-4069-93d7-2adf2c53d94b)

有什么建议么 ？

这里要添加的另一件事是，我有一个内容查询 Web 部件，它将使用 JQuery 循环插件旋转促销活动。它位于同一页面上，我将列表和库 Web 部件与日历月视图作为默认设置看法。

如果我删除带有 Promotions 的 CQWP 一切正常，但如果它在那里它将无法正常工作

有什么建议么？我检查了 Jquery 冲突，但找不到其中任何一个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:47:37.250

我认为我找到了问题的根本原因

有一个 CQWP 放置在与此日历视图列表相同的页面上。

这个 CQWP ha 调用 jquery 循环插件，它将在一段时间后循环内容，由于这个 JQuery 冲突，我的日历控件在 chrome 中不起作用。

当我删除这个 CQWP 时，一切都像魅力一样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:05:51.527

1、尝试恢复到OOB v4.master，看看问题是否消失。如果它按预期工作，这意味着您的母版页有问题。

SP 中最可笑的错误之一是，如果您没有在功能区控件**之前**`SiteAction`声明控件，则某些 javascript 代码将失败。

 **在我的一个自定义母版页中，我必须在功能区控件之前创建第二个站点操作控件。我已将其放入一个不可见的 DIV 中以完全对用户隐藏它。

它以这样的方式结束：

```
 <SharePoint:SPRibbon ID="SPRibbon1" runat="server" PlaceholderElementId="RibbonContainer"
                CssFile="">
                <SharePoint:SPRibbonPeripheralContent ID="SPRibbonPeripheralContent1" runat="server"
                    Location="TabRowLeft" CssClass="ms-siteactionscontainer s4-notdlg">

<!-- Here is the hidden site actions control -->
                    <div style="display: none">
                        <SharePoint:SiteActions runat="server" AccessKey="<%$Resources:wss,tb_SiteActions_AK%>"
                            ID="SiteActionsMenuMain" PrefixHtml="" SuffixHtml="" MenuNotVisibleHtml="&amp;nbsp;">
                            <CustomTemplate>
                            </CustomTemplate>
                        </SharePoint:SiteActions>
                    </div>

                    <asp:ContentPlaceHolder ID="PlaceHolderGlobalNavigation" runat="server" Visible="false">
                        <SharePoint:PopoutMenu
                            runat="server"
                           >

.... Removed for readability ....

                        </SharePoint:PopoutMenu>
                        <div class="s4-die">
                            <asp:ContentPlaceHolder ID="PlaceHolderGlobalNavigationSiteMap" runat="server" Visible="false">
                            </asp:ContentPlaceHolder>
                        </div>
                    </asp:ContentPlaceHolder>

                </SharePoint:SPRibbonPeripheralContent>
                <SharePoint:SPRibbonPeripheralContent runat="server" Location="TabRowRight" ID="RibbonTabRowRight"
                    CssClass="s4-trc-container s4-notdlg">
.... Removed for readability ....
                </SharePoint:SPRibbonPeripheralContent>
            </SharePoint:SPRibbon> 
```

供您参考，此行为是由于站点操作的内部控制之一（如果我是对的，则为 PublishingConsole）。这个内部控件将产生一些 javascript 全局变量声明（语言和另一个）。功能区控件需要此全局变量才能按预期工作。**

# android - 2指在android中滑动

> ID：13796114
> 
> 赞同：3
> 
> 时间：2012-12-10T06:36:16.627
> 
> 标签：android, onfling

我尝试`onFling`使用`SimpleOnGestureListener`. 但是，我发现它`SimpleOnGestureListener`不支持两指触摸。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T08:11:37.757

我的解决方案有效，但使用公共静态 int 来计算有多少手指非常难看。在我用两根手指弹起后，我不得不将手指计数设置回一，因为我无法再为一根手指获得 action_pointer_down ......我不知道为什么......但是这个解决方案也适用于更多手指......希望有人可以使用它在功能中

```
public class RemoteFragment extends Fragment{

public static int fingercount = 1;    

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    final GestureDetector gdt = new GestureDetector(getActivity(),
            new RemoteGestureListener());

    View view = inflater.inflate(R.layout.gestures, container, false);

    view.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(final View view, final MotionEvent event) {
            int action = event.getAction();

            switch (action & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_POINTER_DOWN:
                Log.d(TAG,
                        "Pointer-Count ="
                                + String.valueOf(fingerCount = event
                                        .getPointerCount()));

                break;
            }
            gdt.onTouchEvent(event);
            return true;
        }
    });
    return view;
}
}

public class RemoteGestureListener implements OnGestureListenerr {

private final static String TAG = "RemoteGestureListener";

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

public RemoteGestureListener() {
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {

    Log.d(TAG, "onFling");
    if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        if (RemoteFragment.fingerCount == 1) {
            Log.d(TAG, "Left Swipe");
        } else {
            Log.d(TAG, "Left xFinger Swipe");
            RemoteFragment.fingerCount = 1;
        }
        return true; // Right to left
    } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        if (RemoteFragment.fingerCount == 1) {
            Log.d(TAG, "Right Swipe");
        } else {
            Log.d(TAG, "Right xFinger Swipe");
            RemoteFragment.fingerCount = 1;
        }
        return true; // Left to right
    }

    if (e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
        if (RemoteFragment.fingerCount == 1) {
            Log.d(TAG, "Top Swipe");
        } else {
            Log.d(TAG, "Top xFinger Swipe");
            RemoteFragment.fingerCount = 1;
        }
        return true; // Bottom to top
    } else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
        if (RemoteFragment.fingerCount == 1) {
            Log.d(TAG, "Bottom Swipe");
        } else {
            Log.d(TAG, "Bottom xFinger Swipe");
            RemoteFragment.fingerCount = 1;
        }
        return true;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T23:05:22.483

I had made [a library](https://github.com/championswimmer/SimpleFingerGestures_Android_Library) some time ago that makes implementing 1/multi finger swipes very easy.

You can find more detailed documentation of the API [here](http://championswimmer.in/SimpleFingerGestures_Android_Library/documentation/reference/in/championswimmer/sfg/lib/package-summary.html) A sample implementation can be found [here](https://github.com/championswimmer/SimpleFingerGestures_Android_Library/blob/master/sample/src/main/java/in/championswimmer/sfg/sample/MainActivity.java)

The part that you want to look at is

```
ImageView mv = (ImageView) findViewById(R.id.myview);
final TextView grtv = (TextView) findViewById(R.id.gestureResultTextView);
SimpleFingerGestures.DEBUG = true;
SimpleFingerGestures.CONSUME_TOUCH_EVENTS = true;
SimpleFingerGestures sfg = new SimpleFingerGestures();
sfg.setOnFingerGestureListener(new SimpleFingerGestures.OnFingerGestureListener() {
@Override
public boolean onSwipeUp(int fingers, long gestureDuration) {
grtv.setText("swiped " + fingers + " up");
return false;
}
@Override
public boolean onSwipeDown(int fingers, long gestureDuration) {
grtv.setText("swiped " + fingers + " down");
return false;
}
@Override
public boolean onSwipeLeft(int fingers, long gestureDuration) {
grtv.setText("swiped " + fingers + " left");
return false;
}
@Override
public boolean onSwipeRight(int fingers, long gestureDuration) {
grtv.setText("swiped " + fingers + " right");
return false;
}
@Override
public boolean onPinch(int fingers, long gestureDuration) {
grtv.setText("pinch");
return false;
}
@Override
public boolean onUnpinch(int fingers, long gestureDuration) {
grtv.setText("unpinch");
return false;
}
});
mv.setOnTouchListener(sfg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:41:30.210

您可以尝试`MotionEvent.ACTION_POINTER_DOWN`像这样使用 OnTouchListener：

```
 button.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View view, MotionEvent motionEvent) {
            int action = motionEvent.getAction();

            switch(action & MotionEvent.ACTION_MASK)
            {
                case MotionEvent.ACTION_POINTER_DOWN:
                    Toast.makeText(MyActivity.this, " Two Fingers Tapped Once. Yeeeyy :)", 0).show();

                    // set the mTwoFingersTapped flag to TRUE when we tap with 2 fingers at once
                    mTwoFingersTapped = true;
                    break;
            }
            return false;
        }
    }); 
```

[这](http://myandroidsolutions.blogspot.ro/2012/10/android-multi-touch-two-fingers-tapping.html)是一个教程，它解释了如何做到这一点。

# google-apps-script - 谷歌电子表格根据值填充其他工作表中的单元格

> ID：13796117
> 
> 赞同：2
> 
> 时间：2012-12-10T06:36:23.227
> 
> 标签：google-apps-script, google-sheets, excel-indirect

我是 Google Docs 的新手，但必须创建标记为正面或负面的评论的累积报告。我有 6 个工作表，理想情况下可以填充到单个报告中，但我现在可以创建 6 个单独的报告。

在源表中，ColA 是标识类别的数字代码。Col B 是类别描述；Col C 是一个人的笔记；Col D 是识别它是正面还是负面的代码；Cols E 和 F 是来自第二个人的笔记；G/H 从 3 开始，等等。

报告表需要将垂直评论按类别转置，所有 6 个类别的第一个类别为 Col G 的所有人员的正面评论，Col H 中的第一个类别的负面评论等。

我能够使用以下公式手动创建此报告，以从 C 列中提取正面评论：

```
QUERY(EntrySheet1!C5:D15;"select * where D='P'") 
```

但是，横向和纵向复制公式以容纳所有 6 个类别和所有 6 个笔记记录者是非常乏味的。

所以，我的问题是，是否有一种更简单的方法可以按照我需要报告的方式提取信息。此外，有没有一种方法可以使用 Excel 的 Indirect 函数，我可以使用 concatenate 函数来构建公式和 Indirect 来评估该函数。我的想法是我可以有一个输入单元格，我可以通过简单地更新单元格来确定我想要查看的累积报告。另一种方法是将数据加载到数组中并使用脚本来填充静态累积报告。使用公式进行实时更新是理想的，但是创建从脚本创建的静态报告是可以接受的。我最担心的是手动更新公式，因为它们是特定于工作表的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:10:05.223

使用谷歌电子表格间接功能。

请参阅[Google 电子表格功能列表](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1240292)：

```
INDIRECT(reference) 

Returns the reference specified by a text string. This function can also be used to
return the area of a corresponding string. Reference is a reference to a cell or an
area (in text form) for which to return the contents. 
```

您也许可以将间接的结果输入到您的查询中。

# c++ - 时间：2019-01-01 标签：c++persisteniomanipulation

> ID：13796122
> 
> 赞同：0
> 
> 时间：2012-12-10T06:36:37.930
> 
> 标签：c++, iostream

所以我有一些看起来像这样的代码

```
debug_file << left << setw(10) << timestamp << left 
<< setw(10) << activity_type << left << setw(10) << key << setw(10) 
<< left << event_data1 << setw(10) << left << event_data2 << setw(10) 
<< left << event_data2 << endl; 
```

我希望能够写作

```
// all output to debug_file defaults to left justify unless specified
// all output to debug_file defaults to setw(10)
debug_file << timestamp << activity_type << key << event_data1 << event_data2 
<< event_data3 << endl; 
```

首先，我不太确定这种行为叫什么。其次，我不知道在 iomanip 中的哪个位置才能做到这一点。现在我正在写这篇文章，我想出了制作函数的想法，它可以接受任何输入类型并且只执行 << left << setw(10) << input，但我仍然对是否有预建感兴趣解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:39:12.963

您可以使用内置功能：

**[setiosflags()](http://www.cplusplus.com/reference/iomanip/setiosflags/)**

# php - 尝试一个函数一段时间然后放弃——php

> ID：13796125
> 
> 赞同：0
> 
> 时间：2012-12-10T06:36:50.287
> 
> 标签：php

我在我的 php 脚本中点击了外部数据源，但如果需要一段时间，我想放弃。类似于以下内容：

```
<?php

  try_for_500_ms {
    load_data_from_external_database();
  }
  catch_if_took_longer_than_500ms {
    echo 'Took too long to load data';
  } 
```

换句话说，我希望它在一段时间后放弃尝试加载外部数据并继续执行脚本。任何想法如何实现类似的东西？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:10:51.570

假设您的外部数据源是通过 HTTP 联系的，您只需设置您正在使用的任何 HTTP 库的超时选项。假设 cURL，您将使用：

```
curl_setopt($c, CURLOPT_TIMEOUT_MS, 500); 
```

其他 API 应该有类似的选项。

PHP 中没有这样的语言结构。如果您的 API 没有类似的选项，则您必须进入 fork 进程，并且父母会在一段时间后杀死孩子。

# php - 使用 PDO 的 PHP 数据库连接失败

> ID：13796128
> 
> 赞同：0
> 
> 时间：2012-12-10T06:36:52.963
> 
> 标签：php

使用此代码列出表的行时出现错误

```
// Specify your table name
$table_name = 'table_stats';
$hostname = '172.16.11.2';
$username = 'user_stats';
$password = 'stats';
$dbname = 'db_stats';

$dbh  = new PDO("mysql:$hostname;dbname=$dbname",$username,$password);
$stmt = $dbh->query("SELECT * FROM $table_name", PDO::FETCH_ASSOC);
foreach($stmt as $row) { // PDOStatement implement Traversable interface, so you can just loop over the resultset. Sweet!
    print_r($row);
}

?> 
```

我得到这个错误

```
 Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)' in /home/mahmedne/public_html/android/updates/test.php:12 Stack trace: #0 /home/mahmedne/public_html/android/updates/test.php(12): PDO->__construct('mysql:172.16.25...', 'mahmedne_stats', 'stats') #1 {main} thrown in /home/mahmedne/public_html/android/updates/test.php on line 12 
```

我可以确认数据库设置是 100% 正确的，如果我像连接一样使用相同的值

```
 if (!mysql_connect($db_host, $db_user, $db_pwd))
         die("Can't connect to database"); 
```

然后它可以工作，但不适用于我做 new PDO()

请告知，我是否有可能提供有限的 PHP 功能？我正在网络主机上检查此代码，而不是在我的本地机器上

这是我使用 phpinfo() 获得的与 PDO 相关的信息

```
PDO

PDO support enabled
PDO drivers sqlite, sqlite2, mysql

pdo_mysql

PDO Driver for MySQL    enabled
Client API version  5.1.65

Directive   Local Value Master Value
pdo_mysql.default_socket    /var/lib/mysql/mysql.sock   /var/lib/mysql/mysql.sock

pdo_sqlite

PDO Driver for SQLite 3.x   enabled
SQLite Library  3.7.7.1 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:49:55.220

您`host=`的 DSN 字符串中缺少您，应该是这样的，

```
new PDO("mysql:host=$hostname;dbname=$dbname",$username,$password); 
```

# php - PHP URL 解码 GET

> ID：13796134
> 
> 赞同：3
> 
> 时间：2012-12-10T06:37:23.643
> 
> 标签：php, get, decode, urlencode, urldecode

我一直在对来自 $_get 的编码 URL 变量使用 URL 解码。

我目前面临的问题是我有一个这样编码的 URL： `blah.php?url=http%3A%2F%2Fm.youtube.com%2F#/watch?feature=player_embedded&v=zd7c5tQCs1I&desktop_uri=%2Fwatch%3Fv%3Dzd7c5tQCs1I%26feature%3Dplayer_embedded`

我不确定这是哪种编码，有人可以帮助我吗？当我对此只使用“urldecode”时，它只会返回`m.youtube.com`

编辑：我的问题不是 url 解码不起作用，如果我手动输入这个编码的 URL 并使用 urldecode()，它就可以工作，但是当这个编码的 url 在实际的页面 url 中并且我使用 _GET 函数时，我尝试解码它会删除 URL 中“#”之后的所有内容。

`<?php print urldecode($_GET["url"]);?>`

它返回

`"http://m.youtube.com/"`

代替

`"http://m.youtube.com/#/watch?feature=player_embedded&v=zd7c5tQCs1I&desktop_uri=/watch?v=zd7c5tQCs1I&feature=player_embedded"`

我认为问题在于磅符号未编码，如果我刷新页面，它会删除磅符号及其之后的所有内容，那么我该如何解决这个问题？即使有井号，我还能从“GET”中检索信息吗？(#)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T13:39:07.803

问题是完整链接有多个`=`标志，浏览器无法确定其他`=`标志仅指`url=`参数。在您的情况下，首先，您需要在将链接提供给`url=`参数之前使用函数：

```
========================= 1) JAVASCRIPT ======================
<script type="text/javascript">
    var mylink = encodeURIComponent('http://testest.com/link.php?name=sta&car=saab');
    document.write("http://yoursite.com/url=" + mylink);
</script>

========================= 2)or PHP ===========================
<?php
    $mylink = 'http://testest.com/link.php?name=sta&car=saab';
    echo 'http://yoursite.com/url='.urlencode($mylink);
?> 
```

所以，你的输出（url参数）会是这样的

```
http://yoursite.com/url=http%3A%2F%2Ftest.com%2Flink.php%3Fname%3Dsta% 
```

因此，url 参数将获取编码后的 url。之后，您的 .php 文件需要解码该“url”参数-

```
<?php
$varr = $_GET['url'];
$varr = preg_replace("/%u([0-9a-f]{3,4})/i","&#x\\1;",urldecode($varr)); 
$varr = html_entity_decode($varr,null,'UTF-8');
echo $varr;
?> 
```

这会给你正确的价值

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-05T09:13:47.687

我在 php.net 上阅读了有关 urldecode 函数的信息，他们说超全局 $_get 已经解码，例如：“超全局 $_GET 和 $_REQUEST 已经解码。在 $_GET 或 $_REQUEST 中的元素上使用 urldecode() 可能会出现意外和危险的结果。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:41:36.893

它被编码为 ASCII 格式。

见[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:45:36.673

这种编码称为**百分比编码**或**URL 编码**。您可以使用 urldecode 对其进行解码。（例如： http: [//phpfiddle.org/lite/code/0nj-198](http://phpfiddle.org/lite/code/0nj-198)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T21:34:46.650

所以这是问题所在，井号 (#) (Hash) 没有被编码......因为我不能回去重新编码它我必须使用 javascript（例如 alert(window.location.hash) ;) 在哈希之后向我发送完整的 URL，然后我将其附加到 PHP 的 URL 版本，然后我使用 PHP 中的查找和替换函数将“#”替换为“%23”，然后我使用 urldecode 方法它返回完整正确的 url 解码。

# c# - 使用 linq 访问 xml 中的所有节点

> ID：13796135
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:37:28.637
> 
> 标签：c#, .net, linq, xml-parsing

我有xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<UpdateMemberHireStatus xmlns="http://tempuri.org/">
  <member>
    <HireAvailability>
      <code>1</code>
      <name>פנוי</name>
    </HireAvailability>
    <HireRejectReason>
      <code>2</code>
      <name>wow</name>
    </HireRejectReason>
    <IdNumber>43504349</IdNumber>
    <note> </note>
  </member>
</UpdateMemberHireStatus> 
```

我想使用 LINQ 访问 xml 中的所有节点。

这是我尝试过的：

```
XNamespace ns = "tempuri.org/";
IEnumerable<HireStatus> status = from r in doc.Descendants(ns + "UpdateMemberHireStatus")
                                              .Descendants(ns + "member") 
                                 select new HireStatus() { }; 
return status.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:50:14.703

使用[后代](http://msdn.microsoft.com/en-us/library/bb353813.aspx)

```
var xml = XDocument.Load(XMLStream);
var allEle = xml.Descendants("UpdateMemberHireStatus"); //you can do linq now. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:39:20.597

您也可以通过以下方式使用 XDocument：

```
 string xmlPath = "D://member.xml";
        XmlDocument doc = new XmlDocument();
        xdoc = XDocument.Load(xmlPath);
        doc.LoadXml(xdoc.ToString());
        var memberStatus= (from mem in xdoc.Descendants("member")
                               select mem);

        foreach (XElement element in memberStatuses.ToList())            
            IEnumerable<XNode> nodes = element.Nodes(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T08:54:50.163

var x = XElement.Load(XMLStream);

var all = x.DescendantNodes();

# android - 如何使用 ffmpeg 和 sdl for Android 制作视频播放器？

> ID：13796137
> 
> 赞同：2
> 
> 时间：2012-12-10T06:37:42.980
> 
> 标签：android, video, android-ndk, ffmpeg, sdl

我想为 android 使用 ffmpeg 和 sdl 制作视频播放器。我已经在笔记本电脑上从 ffmpeg 编译了 Tutorial07.c。如何使用 SDL 为 Android 编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:14:05.077

*编辑*- 在过去的 6.5 年中，LibSDL 的网站发生了很大变化，因此更新了链接。

SDL 的 Wiki 有一整篇关于如何在 Android 上编译的文章，请在[此处](https://wiki.libsdl.org/Android)参考。

# php - 想要从此代码修复未定义的索引通知

> ID：13796140
> 
> 赞同：0
> 
> 时间：2012-12-10T06:37:57.007
> 
> 标签：php, wordpress

我的代码是这样的，我想删除以下通知：

```
1\. Notice: Undefined index: name 
2\. Notice: Undefined index: website 
3\. Notice: Undefined index: description 
```

另外，这个代码在我刷新网页时自动添加数据如何摆脱？

```
<?php
{    
     // Instructions if $ _POST [ 'name'] exists    
    }
    $wpdb->query("insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
    values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')");
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:43:54.703

您需要做的是在尝试使用它们之前检查您需要的索引是否确实存在并且不为空。

```
if ( isset ( $_POST['name'] ) && ! empty ( $_POST['name'] ) &&
     isset ( $_POST['website'] ) && ! empty ( $_POST['website'] ) &&
     isset ( $_POST['description'] ) && ! empty ( $_POST['description'] ))
{
    $wpdb->query("insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
    values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')");
} 
```

要摆脱刷新后再次添加的帖子，您可以在发布后重定向到相同的 URL。这样它会从 URI 中删除 POST。

```
header ( 'location : http://myDomain.com/myUrl.php' ); 
```

这个重定向当然只会在我们之前创建的 if 语句中被调用，并且是您对 POST 执行的最后一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:42:15.473

你应该使用[isset()](http://php.net/manual/en/function.isset.php)

例如

```
if (isset($_POST['name']){
  echo $_POST['name'];
} 
```

作为旁注，请阅读有关[$wpdb 类](http://codex.wordpress.org/Class_Reference/wpdb)的这篇文章，看起来您的代码没有遵循那里的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:52:17.417

您应该使用`isset`变量检查这些变量是否正确分配。

现在您的第二个问题是，如果您刷新页面，则会将相同的值添加到数据库中。提交表单浏览器后将这些值保留在内存中，因此如果您尝试忽略此问题，请执行以下操作：

```
 <?php
 {    
 // Instructions if $ _POST [ 'name'] exists    
}
$wpdb->query("insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')");
header('Location:/path/to/your/file.php');
?> 
```

在将值添加到数据库之后，您将被重定向到所有提交的变量都消失的同一页面。

# css - CSS：表单中的多列部分

> ID：13796142
> 
> 赞同：2
> 
> 时间：2012-12-10T06:38:00.160
> 
> 标签：css, multiple-columns

我是 CSS 新手。我将尝试解释我想要实现的目标。我有 5 个“块”。每个块都有一个标题，然后是几个标签 - 用于数据输入的输入对。标签和输入应该很好地对齐。每个块的标题应位于该块上方的中心

现在的诀窍是这 5 个块应该在一个包含其他用于数据输入的正常标签输入对的表单中并排出现。（这里的标签输入已经对齐，这意味着“表单级别”上有一些 CSS：

```
.cssform {
    padding-top: 2em;
    padding-bottom: 2em;
}

.cssform div{
    max-width: 680px;
    clear: left;
    margin: 0;
    padding: 5px 0 8px 0;
    padding-left: 155px; /*width of left column containing the label elements*/
}

.cssform label{
    color: #990033;
    font-weight: bold;
    float: left;
    margin-left: -155px; /*width of left column*/
    width: 150px; /*width of labels. Should be smaller than left column (155px) to create some right margin*/
}

.cssform input[type="text"]{ /*width of text boxes. IE6 does not understand this attribute*/
    width: 180px;
    padding-bottom: 5px
} 
```

这在某种程度上弄乱了我试图创建的上述块布局。我目前的主要问题是剩余的填充或边距。我的“块”太靠右了 150 像素，我不知道如何覆盖。这是我当前的CSS：

```
.cssform div.scores{
    max-width: 680px;
    clear: none;
    float: left;
    margin: 0;
    padding: 5px 20px 8px 0;
    padding-left: 0px
}

.cssform div.scores label{
    float: left;
    margin-left: 0px; /*width of left column*/
    width: 100px;
}

.cssform div.scores input[type="text"]{
    width: 20px;
    padding-bottom: 5px
}

.scores h3 {

} 
```

有了这个，我的第一个块在右边 150 像素而不是坐在最左边。

第二个问题是对齐每个块的标题。

有任何想法吗？

编辑：

这里使用的一般元素：

```
<!-- Block 1 -->
<div class="scores">
    <h3 class="scoreClass1">Score Class 1</h3>
    <div>
        <label class="scoreClass1">Label 1</label>
        <input name="value1" type="text" class="scoreClass1"/>
    </div>
    <div>
        <label class="scoreClass1">Label 2</label>
        <input name="value2" type="text" class="scoreClass1"/>
    </div>
    <!-- More Values -->
</div>
<!-- Block 2 -->
<div class="scores">
    <h3 class="scoreClass2">Score Class 2</h3>
    <!-- Block 2 Values... --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:38:15.950

问题是这样的：

```
.cssform label{
    color: #990033;
    font-weight: bold;
    float: left;
    margin-left: -155px; /*width of left column*/
    width: 150px; /*width of labels. Should be smaller than left column (155px) to create some right margin*/
}

.cssform div{
    max-width: 680px;
    clear: left;
    margin: 0;
    padding: 5px 0 8px 0;
    padding-left: 155px; /*width of left column containing the label elements*/
} 
```

我必须承认，我曾经在开始学习 css 时从 inet 复制粘贴此内容，但现在我发现它可以在解决我的问题时更简单地完成：

```
.cssform div{
    max-width: 680px;
    clear: left;
    margin: 0;
    padding: 5px 20px 8px 0;        
}
.cssform label{
    color: #990033;
    font-weight: bold;
    float: left;        
    width: 150px; /*width of labels. Should be smaller than left column (155px) to create some right margin*/
} 
```

# window - 在 HTA 中获取窗口位置

> ID：13796143
> 
> 赞同：1
> 
> 时间：2012-12-10T06:38:03.700
> 
> 标签：window, position, hta

我可以在 HTA（HTML 应用程序）中获取当前窗口位置吗？这与 VB6 类似`Me.Top`，`Me.Left`但我希望它得到像素数。！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:37:15.097

使用 JS，您可以使用`top.screenLeft`和获取最顶层窗口的位置`top.screenTop`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-06T14:58:48.923

这是一个很酷的方法。有点动画

VBScript

将此添加到全局变量

```
Dim IntervalMovingWindow 
```

然后添加这个 OnLoad 例程

```
Sub Window_OnLoad

  moveTo screen.availWidth/2-200 , screen.availHeight/2-100

  IntervalMovingWindow= Setinterval ("MoveTheWindow",100)

End Sub 
```

然后添加此例程用于移动窗口（动画样式）

```
Sub MoveTheWindow

  Dim X,Y

  X=top.screenleft
  Y=top.screentop

  If X<=60 Then
    X=0
  End If

  If Y<=60 Then
    Y=0
  End If

  If X<>0 Then
    moveBy -20,0
  End If

  If Y<>0 Then
    moveBy 0,-20
  End If

  If X=0 And Y=0 Then
    moveto 0,0
   clearInterval IntervalMovingWindow
  End If
End Sub 
```

如果您的边框过大，这可能不起作用。在这种情况下，您可能需要将 更改`-20`为`moveBy`更大的负数，例如`-30`更改`If {X or Y}=60`为更大的正数，例如`If {X or Y}=80`

注意不要包含大括号“{}”，它们只是表示我在谈论 X 和 Y 条件句。

# jquery - 在 jquery mobile 中加载本地 html/模板文件

> ID：13796144
> 
> 赞同：1
> 
> 时间：2012-12-10T06:38:05.063
> 
> 标签：jquery, jquery-mobile

我想在`jquery`没有服务器的情况下使用移动设备编写本地移动应用程序。我想将视图拆分为单独的 html/模板文件。所以我需要在运行期间加载它们，我使用以下方式：

```
$.get('views/somepage.tmpl') 
```

在火狐上，它可以工作，但在chrome上，存在跨域问题，错误信息是：

```
Origin null is not allowed by Access-Control-Allow-Origin. 
```

所以我想问的是：任何解决方案，我都不想将所有 Htmls 写入一个文件。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:59:21.100

尽管有一些标准，但 Web 浏览器之间还是存在一些差异。尝试将文件的路径更改为完整目录。例如：

```
"D:/index.html" 
```

如果这不起作用，请尝试添加“file:///”。例如（我认为，这个不适用于 Firefox；））：

```
file:///D:/index.html 
```

# php - php中wordpress的评论-回复结构

> ID：13796154
> 
> 赞同：1
> 
> 时间：2012-12-10T06:39:32.320
> 
> 标签：php, wordpress, comments, blogs

嘿，我想问一下，我想在我的 php 博客管理页面中显示像 wordpress 这样的评论系统。我怎么能管理这个？我有一个存储评论的表和另一个存储回复的表。回复表有 parent_reply_id 和 comment_id 字段。我可以在评论库上列出所有回复，但如果任何回复具有 parent_reply_id，则它不会显示在该回复下方....

我希望你们能得到我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:20:38.887

你能像这样试试吗/*你会得到所有带有评论ID的重播*/

```
$replay_sql = mysql_query("Select * From replay_table where comment_id=$id");
while($result = mysql_fetch_row($replay_sql)){ 
```

/*你得到所有重播到任何其他重播*/

```
$replay_to_replay = mysql_query(SELECT * FROM replay_table WHERE parent_replay_id = $result['id']);
} 
```

# jquery - jquery选择一个项目

> ID：13796160
> 
> 赞同：0
> 
> 时间：2012-12-10T06:40:40.120
> 
> 标签：jquery, html

我有一张带桌子的表格。

```
<form >
    <div>   
    <table>
 <tr>        
       <td >  <input type="text" id="slno1" size="25" value="10" /> </td>     
       <td >  <input type="text" id="data" size="10" value="this is a test" /> </td>      
       <td >  <input type="radio"  value="" id="edit1" name="sample"  /> </td>    

  </tr>
   <tr>          
       <td >  <input type="text" id="slno2" size="25" value="10" /> </td>     
       <td >  <input type="text" id="data1" size="10" value="this is a test1" /> </td>    
       <td >  <input type="radio"  value="" id="edit1" name="sample"  /> </td>    
  </tr>
  </table>
  <input type="submit" id="mysu1" Value="submits" />  
    </div>
  </form> 
```

因为当用户选择带有单选按钮的行时，我想要该行上的所有数据。所以，我们这样做：

```
var theSelectedRadioButton = theForm.find('input[name="sample"]:checked'); 
```

如何获取 td 中的所有相应值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:46:28.190

```
var theSelectedRow = theSelectedRadioButton.closest('tr'); 
```

应该给你行，从那里你可以访问行中的数据。

旁白：您可以将数据处理功能绑定到单选按钮，然后您不需要“找到”它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:46:58.823

[***jsFiddle 演示***](http://jsfiddle.net/BWaBu/)

当目标输入字段的值发生变化时，您可以找到使用[`.closest()`](http://api.jquery.com/closest)找到相应的行，然后将每个子项的值收集到一个新对象中。

```
$(theForm).find('input[name="sample"]').change(function() {

    var vals = $(this).closest('tr').children('td').map( function() {
        return $(this).find('input').val();
    }).toArray();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:42:29.327

您可以使用[`closest`](http://api.jquery.com/closest)单选按钮找到`tr`它所在的位置，然后[`children`](http://api.jquery.com/children)找到`td`该行中的所有 s：

```
var tds = theSelectedRadioButton.closest('tr').children('td'); 
```

然后从 s 中提取信息`td`，可能在循环中使用[`each`](http://api.jquery.com/each)or [`map`](http://api.jquery.com/map)。您还没有说信息在哪里，但是例如，如果您想要他们的 HTML：

```
var tdhtml = theSelectedRadioButton.closest('tr').children('td').map(function(td) {
    return $(this).html();
}).get(); 
```

...导致字符串数组`tdhtml`包含每个`td`. （注意最后容易错过的调用[`get`](http://api.jquery.com/get)：`map`返回一个 jQuery 对象，即使它的内容不是 DOM 元素，`get`将其转换为普通数组。）

或者，如果信息存储在s 的`data-*`属性中`td`（`data-foo`在本例中）：

```
var tddata = theSelectedRadioButton.closest('tr').children('td').map(function(td) {
    return $(this).attr('data-foo');
}).get(); 
```

# design-patterns - 单例模式何时重要？

> ID：13796164
> 
> 赞同：1
> 
> 时间：2012-12-10T06:40:53.453
> 
> 标签：design-patterns, singleton

在编码中，存在一种称为 的模式`Singleton`，将类的实例化限制为仅一个对象。但是使用单例的原因是什么，如果一个人可以在模块级别实例化一次类，例如用下划线命名它并使用它？为什么以及何时应该使用单例？

具体来说（因为没有一个答案真的让我满意）这是一个具体的例子。我指定了一个标准的 python 类并创建了一个实例：

```
class MyObject(object):
    ....

_myinstance = MyObject() 
```

除了这个实现不会阻止创建第二个实例这一事实之外，在什么情况下使用 Singleton 比这个简单的实现更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:42:50.747

当您想要重用一些昂贵的创建资源时，单例模式很有用。由于在应用程序的整个生命周期内只执行一次创建，因此您只需支付一次费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:50:38.740

当资源在占用内存或创建时间方面很昂贵时，单例模式很有用。可以在单例模式中找到的另一种用法是，您可以根据应用程序要求限制类的实例数量，想到的一个示例是与数据库的连接，您将始终为每个线程建立一个连接，该连接通常与线程一起存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:18:41.883

使用单例的原因取决于替代方案是什么。

与在客户端代码中的某一点显式创建的对象相比，单例更容易从多个类、包、模块等访问。这具有优势，但会鼓励创建过度紧密耦合的代码。显式方法使依赖关系更清晰，但可能难以实现，尤其是在构建现有代码时。

我在实践中经常看到的单例的替代方案是“类”，它实际上是准全局变量的集合。与此相比，单例（或任何对象）是一个很大的改进，因为它限制了代码不同部分之间的耦合，并且在测试其他类时更容易测试或替换为存根或模拟。并且它使以后修改代码以允许多个实例变得更加容易：在许多情况下，应该只有一个实例的要求并不那么强，这种灵活性可能很有用。

当重构使用一堆全局变量的现有代码时，单例可以是一个可实现的第一步，如果需要并且值得付出额外努力，则可以进一步将其重构为显式创建的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:51:20.823

由于这里的人们已经很好地强调了为什么要使用 Singleton，所以我想强调一下为什么您可能不应该使用它是有原因的。我最近遇到了一篇关于这个主题的好博文：http: [//misko.hevery.com/2008/08/21/where-have-all-the-singletons-gone/](http://misko.hevery.com/2008/08/21/where-have-all-the-singletons-gone/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T06:50:57.647

单例本质上是一个概念，说明某些实体必须只有单个实例。单个实例的原因可能会有所不同，这些是主要的：

*   在不同的模块中重用一个可共享的资源。
*   禁止一个资源的多个实例。
*   当任何使用模块尚未准备好时创建一个实例 - 例如，在任何程序代码运行之前创建和初始化的全局变量，因此当创建使用模块时，全局已准备好。

# xcode - UIAction Sheet 不能在 iPad 上工作，但在模拟器中工作

> ID：13796168
> 
> 赞同：3
> 
> 时间：2012-12-10T06:41:13.337
> 
> 标签：xcode, ipad, ios-simulator, uiactionsheet

我有一个奇怪的问题。当我在模拟器上运行我的应用程序时，一切正常，但在设备上，一些代码无论如何都没有响应！我有一个 UIActionSheet 在模拟器上看起来不错，但在设备上它根本不起作用。它甚至可以在 iPod 上运行：

这是我显示操作表的代码：

```
 UIActionSheet *DeleteAction = [[UIActionSheet alloc] initWithTitle:@"Select    Delete Option" delegate:self cancelButtonTitle:Nil destructiveButtonTitle:nil   otherButtonTitles:nil, nil];
[DeleteAction addButtonWithTitle:@"A"];
[DeleteAction addButtonWithTitle:@"B"];
[DeleteAction showInView:self.view]; 
```

我正在使用这个代表作为行动表

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
if ([actionSheet buttonTitleAtIndex:buttonIndex] == @"A") {....}
if ([actionSheet buttonTitleAtIndex:buttonIndex] == @"B") {....}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:54:01.057

我已经使用了这段代码并且工作正常。让我知道它是否显示操作表

```
-(void)share {
    UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:nil otherButtonTitles:@"Email this Info",@"Tweet this Info",@"Share On Facebook", nil];
    popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    [popupQuery showInView:self.view];
    [popupQuery release];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        [self emailinfo];
    } 
    if (buttonIndex == 1) {
        [self tweetinfo];
    }
    if (buttonIndex == 2) {
        [self shareonfacebook];
    }
    if (buttonIndex == 3) {

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:21:35.337

问题解决了 。

```
 if ([[actionSheet buttonTitleAtIndex:buttonIndex]isEqualToString: @"A"]) {....} 
```

这对我有用。

# html - 中心 div 扩展边框

> ID：13796176
> 
> 赞同：0
> 
> 时间：2012-12-10T06:42:03.940
> 
> 标签：html, css

我正在处理图像网格，并希望创建类似于此[http://instagram.com/instagram/](http://instagram.com/instagram/)的效果（边界扩展的页面下部正方形中的图像。这就是我所拥有的至今：

HTML：

```
<div id="page-title"> </div>

<div id="wrapper" style="min-height:300px;">
  <!--start: Container -->
    <div class="container" style="margin-left:100px;">

        <div style="position: absolute; width:200px; border: 1px solid black; height:200px;">
            <div style="position: relative; background:url('/testimages/1354189822.jpg')" class="polaroids">
        </div>

    </div>

    </div>

</div>
</div>​ 
```

CSS：

```
 .polaroids { 
        background: #fff; 
        float: left; 
        width: 158px;
        height:158px; 
        padding: 5px 5px 5px; 
        text-align: center; 
        text-decoration: none; 
        color: #333;
        -webkit-box-shadow: 0 3px 6px rgba(0,0,0,.25);
        -moz-box-shadow: 0 3px 6px rgba(0,0,0,.25);
        -webkit-transition: all .2s ease-in-out;
        border: 4px solid white;
         background-color: black; 
   background-size: cover; 
    background-position: center; 
    background-repeat: no-repeat; 
    margin-left: auto;
    margin-right: auto;
    margin:0 auto !important;
    }

    .polaroids:hover {
        -webkit-box-shadow: 0 3px 6px rgba(0,0,0,.5);
        -moz-box-shadow: 0 3px 6px rgba(0,0,0,.5); 
        z-index: 5; border-top: 10px solid white; 
        border-bottom: 10px solid white; 
        border-left: 8px solid white; 
        border-right: 8px solid white;
    }​ 
```

中间的 div 似乎不想居中。我哪里错了？[http://jsfiddle.net/b5XDK/](http://jsfiddle.net/b5XDK/) ​​​​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:02:25.110

删除这个

```
.polaroids { float:left } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T06:55:55.123

用于`margin:0 auto;`子元素的水平中心并删除`float:left;`

[http://jsfiddle.net/roine/b5XDK/10/](http://jsfiddle.net/roine/b5XDK/10/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T06:59:07.917

删除你`float:left`的 .polaroids

# minimum-spanning-tree - 形成 MST 节点的不相交集

> ID：13796178
> 
> 赞同：2
> 
> 时间：2012-12-10T06:42:13.040
> 
> 标签：minimum-spanning-tree, disjoint-sets

我已经有 N 个节点和 N-1 条边，基本上是无向无环 MST。我想基本上计算不相交的节点集的数量。如果两个节点具有相同的父节点并且节点的度数相同，则它们属于集合。例如。在给定的树中。{3,4} 属于同一个集合，因为`parent[3]=1`and`parent[4]=1`和`degree[3]=degree[4]=1 ;` {5} 和 {2} 也形成不相交的集合，因为 parent[2]=parent[5]=1 但是`degree[5]=2 and degree[2]=3`。我必须计算不相交集的总数。我一直在尝试使用以下结构：

```
`define MAX 100000

int set;

struct parent
{       
int z[MAX-1];       
}

p_data[MAX];
` 
```

但是因为它显示 p_data 数组非常大。所以请帮忙。我应该遵循什么样的数据结构或逻辑来计算上面定义的不相交集的总数。

我无法在这里发布图片：所以请参考这张图片： http: [//postimage.org/image/sw2nrciib/](http://postimage.org/image/sw2nrciib/)

请有人说出可以执行的断续集的数量

# image-processing - 两种颜色之间的颜色反转

> ID：13796182
> 
> 赞同：0
> 
> 时间：2012-12-10T06:42:47.393
> 
> 标签：image-processing, graphics, colors, gimp, inversion

我有一个徽标，其中包含白色背景上的绿色阴影（以及其他一些浅色阴影，主要是灰色）。我想要做的是“反转”颜色，即白色应该变成绿色，绿色应该变成白色，并且中间的阴影应该相应地反转。

其他颜色的变化不是很重要，但它们应该与绿色阴影保持不同，因此将整个图像转换为黑白，然后反转和调整亮度是不行的。

知道怎么做吗？我更喜欢公式，但使用 gimp 的解决方案也会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:36:02.783

回答我自己的问题：假设我的绿色是 (r, g, b)，白色是 (0xFF, 0xFF, 0xFF)，将像素 (x, y, z) 替换为 (0xFF + r - x, 0xFF + g - y, 0xFF + b - z) 对我来说足够好！

# spring-mvc - 如果我使用 OVal 而不是 JSR-303 验证有什么缺点？

> ID：13796183
> 
> 赞同：0
> 
> 时间：2012-12-10T06:42:48.420
> 
> 标签：spring-mvc, playframework, bean-validation, oval

来自play 1.x。我喜欢[OVal](http://oval.sourceforge.net/)的可能性。我正在评估如何使用 Spring MVC 设置堆栈。验证的默认值是 JSR-303。我在 JSR-303 中看到的一个问题是获取属性的上下文或调整消息。请参阅[JSR303 Validation - Bean 的属性作为消息参数](https://stackoverflow.com/questions/10370419/jsr303-validation-beans-property-as-message-parameter)和[基于变量的 javax Bean Validation？](https://stackoverflow.com/questions/8682246/javax-bean-validation-based-on-variables?rq=1). 我在转换约束时遇到的一个问题是检查用户输入的文本是否仅包含有效变量。因此，用户可以添加“成员 ${name} 做得很好”。如果他写了“成员 ${nmae} 做得很好”。他应该会收到类似这样的消息：“您的文本包含无效变量 >nmae<，您只能使用 >name, firstname<”。

使用椭圆形，这可以很容易地完成。所以我想知道使用 OVal 代替 JSR-303 是否有缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:35:46.120

我个人认为坚持一个标准是个好主意。这确保了可移植的应用程序，并且通过使用标准，您可以使用许多开发人员熟悉的东西。您是对的，您的特定用例不支持 Bean Validation 的 atm。但是，Bean Validation 1.1 正在开发中，并且在路线图上插入验证值 - 请参阅[BVAL-219](https://hibernate.onjira.com/browse/BVAL-219)。同时，您可以使用 Hibernate Validator 的[ValueFormatterMessageInterpolator](https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/messageinterpolation/ValueFormatterMessageInterpolator.java)。是的，您正在使用 Bean Validation 的自定义扩展，但仅针对此特定功能。

# android - 如何在android中使用两个滑动抽屉

> ID：13796188
> 
> 赞同：0
> 
> 时间：2012-12-10T06:43:19.870
> 
> 标签：android, slidingdrawer

当我制作两个滑动抽屉时，Onw Drawer 可以正常工作，但其他不是我所做的是

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:background="#FCFCFC" android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="horizontal"
    android:layout_marginBottom="5px">
    <LinearLayout android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_gravity="left" >
        <SlidingDrawer     android:layout_gravity="left"
        android:orientation="horizontal" android:layout_width="wrap_content"   android:id="@+id/SlidingDrawer" android:handle="@+id/slideHandleButton" android:content="@+id/contentLayout" android:padding="10dip" android:layout_height="60dip">
            <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/slideHandleButton" android:background="@drawable/projectmain"></Button>
                <LinearLayout android:layout_width="wrap_content" android:id="@+id/contentLayout" android:orientation="horizontal" android:gravity="center" android:padding="10dip" android:background="@drawable/selector" android:layout_height="wrap_content">
                    <TextView android:background="@drawable/selector" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textColor="#FFFFFF" android:textStyle="bold" android:textSize="16sp" android:text="Unlock" android:gravity="center" />
                </LinearLayout>
        </SlidingDrawer>
    </LinearLayout>
    </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:background="#FCFCFC"
    android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="horizontal"
    android:layout_marginBottom="5px">
    <LinearLayout android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_gravity="left" >
        <SlidingDrawer     android:layout_gravity="left"
        android:orientation="horizontal" android:layout_width="wrap_content"   android:id="@+id/SlidingDrawer1" android:handle="@+id/slideHandleButton1" android:content="@+id/contentLayout" android:padding="10dip" android:layout_height="60dip">
            <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/slideHandleButton1" android:background="@drawable/propertymain"></Button>
                <LinearLayout android:layout_width="wrap_content" android:id="@+id/contentLayout" android:orientation="horizontal" android:gravity="center" android:padding="10dip" android:background="@drawable/selector" android:layout_height="wrap_content">
                    <TextView android:background="@drawable/selector" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textColor="#FFFFFF" android:textStyle="bold" android:textSize="16sp" android:text="Unlock" android:gravity="center" />
                </LinearLayout>
        </SlidingDrawer>
    </LinearLayout> 
```

我在 Java 上所做的是

我已经打开了两个抽屉

设置内容视图（R.layout.main）；

```
 slideHandleButton = (Button) findViewById(R.id.slideHandleButton);
             slidingDrawer = (SlidingDrawer) findViewById(R.id.SlidingDrawer);
                slideHandleButton1 = (Button) findViewById(R.id.slideHandleButton);
                 slidingDrawer1 = (SlidingDrawer) findViewById(R.id.SlidingDrawer);

                   slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

                    @Override
                    public void onDrawerOpened() {
                        Intent intent=new Intent(CurrentActivity.this,New Activity.class);
                        startActivity(intent);
                    }
                    });

                    slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {

                    @Override
                    public void onDrawerClosed() {
                    }
                    });

                    slidingDrawer1.setOnDrawerOpenListener(new OnDrawerOpenListener() {

                        @Override
                        public void onDrawerOpened() {
                            Intent intent=new Intent(CurrentActivity.this,NewActivity.class);
                            startActivity(intent);
                        }
                        });

                    slidingDrawer1.setOnDrawerCloseListener(new OnDrawerCloseListener() {

                        @Override
                        public void onDrawerClosed() {
                        }
                        }); 
```

但是第二个滑动抽屉不起作用请帮助提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:44:46.857

改变这个

```
slidingDrawer1 = (SlidingDrawer) findViewById(R.id.SlidingDrawer); 
```

到

```
 slidingDrawer1 = (SlidingDrawer) findViewById(R.id.SlidingDrawer1); 
```

看起来您为这两个元素提供了相同的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:53:20.617

看看你的java代码，你为两个滑动抽屉使用了相同的id

# mysql - 从表中删除旧记录

> ID：13796190
> 
> 赞同：0
> 
> 时间：2012-12-10T06:43:20.620
> 
> 标签：mysql, sql

我正在尝试从不同的卖家导入产品数据，数据被导入到具有以下字段的导入表中： id=auto increment Sellerid=卖家的key此项目已更新

所以卖家 A 的产品 ID 为 22，而卖家 B 的产品 ID 为 55。

当卖方 A 更改产品 A 的价格时，进口中会出现一条线。我目前有许多“历史”行，并且只对获取最新的导入感兴趣

例如：

```
1  A   22     2012 01 22
2  A   22     2012 05 10
44 A   22     2012 11 10 
```

我想像这样存档前两行：

```
insert into archive ....
values ( select * from import where id in(
 select id from import 
 where `lastupdate` < max(`lastupdate`)
 group by sellerid, sellerproductid
) 
```

我无法找到正确的 mysql 语句来获取旧记录的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:54:28.713

这应该给出除了最新条目之外的所有内容：

```
SELECT distinct t1.* 
FROM import t1 inner join import t2 
on t1.sellerid = t2.sellerid and t1.sellerproductid = t2.sellerproductid 
where t1.lastupdate < t2.lastupdate; 
```

# c# - Windows 窗体中的 VGA/骨骼查看器？

> ID：13796193
> 
> 赞同：0
> 
> 时间：2012-12-10T06:43:28.610
> 
> 标签：c#, kinect

我正在使用 Kinect 开发一个 C# 应用程序，并且我想在用户使用该应用程序时将他们的反射（使用 RGB 相机）或骨架视图转发给用户。那可能吗？或者有没有更好的方法来向用户展示相机在运行时看到的内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:20:08.190

[Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)提供了可以做到这一点的示例。有多个示例演示如何显示深度和颜色流，以及如何通过它来显示骨架或覆盖在视频流上。

“Kinect Explorer”示例是这些示例中更高级的示例，展示了如何将它们组合在一起。

# php - 如何在我的应用程序中集成 gmail 的登录系统？

> ID：13796195
> 
> 赞同：0
> 
> 时间：2012-12-10T06:43:45.147
> 
> 标签：php, codeigniter

我正在开发一个 Web 应用程序，用户可以在其中使用他们的 id、facebook id、twitter id 或 gmail id 登录。到目前为止，我已经用 facebook 和 twitter 做到了这一点。但是我遇到了gmail的问题。在 facebook 和 twitter 的情况下，我创建了一个应用程序去开发者/../new/app 这样的应用程序，并为 facebook 和 twitter 获取 appid，并将两者都集成到我的登录系统中，但在 gmail 的情况下，我是使困惑。我在上面提到的 gmail a/c 是否有任何流程/事情？

我正在用 PHP CodeIgniter 做我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:46:47.887

这称为身份验证联合，Google 在其 Google Developers 站点中记录了它。总之，它们支持 OpenID：

[https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

# python - 使用空字典作为默认参数的最 Pythonic 方式是什么？

> ID：13796199
> 
> 赞同：6
> 
> 时间：2012-12-10T06:44:02.503
> 
> 标签：python

使用表单的默认参数`x={}`通常不能实现 Python 中的预期目的，因为默认参数是在定义而不是调用函数时绑定的。

约定似乎是将可变对象设置为默认参数，`x=None`然后`x is None`在调用函数时检查以分配正确的默认值。

因此，如果我想强制`x`转换为默认为空的字典，我将使用如下内容：

```
def f(x=None):
    x = dict(x) if x is not None else {} 
```

但是，由于`dict`可以采用任何可迭代的，我也可以编写这个更简洁的版本：

```
def f(x=()):
    x = dict(x) 
```

以下哪一个是“正确”的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T07:06:37.620

*惯用*风格是不*强制*转换为`dict`; 这样人们就可以使用*任何*实现正确映射方法的对象。

所以，最pythonic的方法是使用：

```
def f(x=None):
    if x is None:
        x = {} 
```

然后只使用映射方法。

因此，您通常不应该将论点转换为 dict。您声明您的 API改为*接受*映射对象，并期望调用者进行转换。

同时接受 a`dict`和 iterable 的唯一原因是当您想要支持允许重复键的有序键值对时，例如对于[`urllib.urlencode`function](http://docs.python.org/2/library/urllib.html#urllib.urlencode)。在这种情况下， a`dict`无法保留该信息，并且该方法不会将可迭代对象转换为 dict，而是将 dict 用作​​可迭代对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:54:07.987

这里没有正确或错误的答案，但我会说第一个更惯用（这不会使第二个错误，或坏，或更糟等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-11T10:10:50.530

需要提到的是，只有当函数本身*改变*this`dict`时，作为参数的空才是问题。如果只是读取，则不会出现任何问题。*`dict``dict`*

 *如果`dict`预期发生变化，为什么将空`dict`作为默认参数有意义？由于调用者没有提供 this，因此他们没有对此的引用，并且对 的更改`dict`在调用后丢失。

这可能有意义的唯一情况是当函数需要做一些需要更改其输入版本的事情时。在这种情况下，该函数可能应该在不直接更改输入的情况下创建更改后的版本，例如：

```
# bad way:
def f(x={}):
  x['newkey'] = 'newvalue'
  print(x)  # do something with the extended x

# probably better way:
def f(x={}):
  new_dict = {}
  new_dict.update(x)
  new_dict.update({ 'newkey': 'newvalue' })
  print(new_dict)  # do something with the extended x 
```

这样（后一种方式）原件`x`永远不会改变，所以不会出现问题。

我知道可变默认参数问题是众所周知的并且被认为是一个问题。但我也有一种感觉，遇到它只是它出现的代码结构存在更严重问题的症状，我想在这篇文章中指出这一点。或者换一种说法：在一段结构合理的代码中，可变的默认参数永远不会导致实际问题。*

# requirejs - RequireJS - 优化多个文件并按需加载

> ID：13796200
> 
> 赞同：6
> 
> 时间：2012-12-10T06:44:10.260
> 
> 标签：requirejs, js-amd

我们有一个包含大约 200 个模块的大型**单页应用程序 -**

当我们使用优化器时 - 我们最终将一个文件中的所有模块都进行了 uglified 等。工作得很好。

但我们的应用程序是一种多租户应用程序，每个用户并不需要全部 200 个模块。

我们可以将模块大致分为50个通用模块，如果用户类型为'A'则需要100个模块，用户类型'B'需要50个模块等。

现在，如果用户类型是“B”，则下载的单个优化文件包含 100 个从未使用过的模块。不知何故，如果我们可以避免这些，文件大小会小得多，这将真正提高性能。

简而言之，我正在寻找这个 - 我们有模块组 - 将模块组优化到它自己的文件中 - 根据用户的需求下载相应的文件。

是否可以使用 requireJS 进行这种优化？

谢谢，J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:39:29.147

您可以构建一个基本模块，其中包含启动应用程序所需的所有内容以及大多数用户将看到的内容。[从文档](http://requirejs.org/docs/optimization.html)：

> 优化器只会组合在传递给顶层 require 和 define 调用的字符串文字数组中指定的模块，或者在简化的 CommonJS 包装中组合 require('name') 字符串文字调用。因此，它不会找到通过变量名加载的模块
> 
> ...
> 
> 即使在优化之后，这种行为也允许动态加载模块。您始终可以使用 include 选项显式添加通过优化器的静态分析找不到的模块。

您不想在其中拥有的所有模块都必须在您的模块中像这样被要求：

```
define(["require"], function(require) {
        return function(b) {
            var lib = 'lib'
            var a =  require(lib);
            a.doSomething(b);
        }
    }
); 
```

所以它们不会是您初始加载的一部分，而是在需要时加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T16:47:29.237

听起来您最好将单页应用程序拆分为两个共享通用代码的单页应用程序，如 require docs [Optimizing a multi-page project](http://requirejs.org/docs/optimization.html#wholemultipage)中所述。

这意味着对于用户类型 A 和 B 共享的任何内容都应该有一个 HTTP 请求，然后对于用户类型 A 或 B 来说，另一个 HTTP 请求包含特定于该模块类型的模块。

# iphone - 如何在IOS中使用和创建和处理Model类？

> ID：13796203
> 
> 赞同：1
> 
> 时间：2012-12-10T06:44:28.697
> 
> 标签：iphone, ios6, singleton

我想在应用程序中增加和减少一个变量，因为我在应用程序的许多视图中使用它。我正在为 iOS 开发一款游戏。我想将分数存储在一个变量中，当用户开始玩游戏时，有两到三个点，用户甚至可以在开始玩游戏之前失去像 -1 这样的分数。假设我给用户三个选项，如果他先选择，然后他会进入下一步，如果他会返回并想选择第二个选项，他将不得不从他的分数中承受-1，如果他选择第三个相同的选项将遵循流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:49:08.633

我认为您只需要制作单例类即可解决此问题

按照答案[我的Objective-C单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like) 它有单身的想法

# c++ - 如何将一行输入分成多个变量？

> ID：13796204
> 
> 赞同：0
> 
> 时间：2012-12-10T06:44:31.887
> 
> 标签：c++, file, parsing

我有一个包含行和列信息的文件，例如：

```
104857 Big Screen TV  567.95
573823 Blender         45.25 
```

我需要将此信息解析为三个单独的项目，一个包含左侧标识号的字符串，一个包含项目名称的字符串，以及一个包含价格的双变量。信息总是出现在相同的列中，即以相同的顺序。

我很难做到这一点。即使不从文件中读取并仅使用示例字符串，我的尝试也只会输出混乱：

```
string input   = "104857 Big Screen TV  567.95";
string tempone = "";
string temptwo = input.substr(0,1);
tempone += temptwo;
for(int i=1 ; temptwo != " " && i < input.length() ; i++)
{
  temptwo = input.substr(j,j);
  tempone += temp2;
}
cout << tempone; 
```

我已经尝试调整上面的代码很长一段时间了，但没有运气，目前我想不出任何其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:51:34.113

[`std::find_first_of`](http://www.cplusplus.com/reference/string/string/find_first_of/)您可以使用and找到第一个空格和最后一个空格[`std::find_last_of`](http://www.cplusplus.com/reference/string/string/find_last_of/)。您可以使用它来更好地将字符串拆分为 3 - 第一个空格在第一个变量之后，最后一个空格在第三个变量之前，中间的所有内容都是第二个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:52:51.950

下面的伪代码怎么样：

```
string input = "104857 Big Screen TV  567.95";
string[] parsed_output = input.split(" "); // split input string with 'space' as delimiter

// parsed_output[0] =  104857
// parsed_output[1] =  Big
// parsed_output[2] =  Screen
// parsed_output[3] =  TV
// parsed_output[4] =  567.95

int id = stringToInt(parsed_output[0]);
string product = concat(parsed_output[1], parsed_output[2], ...  ,parsed_output[length-2]);
double price = stringToDouble(parsed_output[length-1]); 
```

我希望，这很清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:54:21.073

那么尝试分解文件组件：

*   你知道一个数字总是第一位的，我们也知道一个数字没有空格。
*   数字后面的字符串可以有空格，但不包含任何数字（我假设）
*   在这个标题之后，你会有更多的数字（没有空格）

从这些组件中，您可以推断：

获取第一个数字就像使用 filestream 读取一样简单`<<`。获取字符串需要您检查直到达到一个数字，一次抓取一个字符并将其插入到字符串中。最后一个数字就像第一个一样，使用文件流`<<`

这似乎是家庭作业，所以我会让你把剩下的放在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T07:00:13.630

我会尝试一个正则表达式，类似于以下内容：

```
^([0-9]+)\s+(.+)\s+([0-9]+\.[0-9]+)$ 
```

我不是很擅长正则表达式语法，但`([0-9]+)`对应的是一个数字序列（这是id），`([0-9]+\.[0-9]+)`是浮点数（价格），`(.+)`是由“空格”字符序列与两个数字分隔的字符串：`\s+`. 下一步是检查您是否需要它来处理“.50”或“10”等价格。

# frameworks - 当前的 DreamWeaver 与复杂的 PHP 框架的工作情况如何？

> ID：13796205
> 
> 赞同：1
> 
> 时间：2012-12-10T06:44:35.270
> 
> 标签：frameworks, ide, dreamweaver, php

我一直对 DreamWeaver 很感兴趣，尤其是能够在此处单击某些内容并编辑其 CSS，因此我不必在我庞大的 CSS 列表中找到它。但是，我使用一个非常复杂的自制 MVC 框架进行编码，它通过一系列包含、类、函数调用等加载和创建页面。不久前，我尝试让 Dreamweaver 甚至加载页面但很快就放弃了。它甚至不会显示任何东西。虽然我没有尝试任何特别的东西来让它像搞乱设置一样工作。

我想知道 DreamWeaver 在这一点上是否可以处理这样的事情，如果可以，我需要什么版本，我怎样才能知道如何去做？如果没有，是否有人知道一个好的可视化 IDE，我可以通过单击也支持复杂的 PHP MVC 框架页面加载过程的东西来编辑 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:54:53.517

您必须知道如何开发 Dreamweaver 扩展。以下资源（Adobe 官方网站）提供了执行此操作的手册：

[http://www.adobe.com/support/dreamweaver/extend.html#dw8](http://www.adobe.com/support/dreamweaver/extend.html#dw8)

# wordpress - 如何在wordpress主题二十一中使菜单导航右对齐

> ID：13796207
> 
> 赞同：0
> 
> 时间：2012-12-10T06:44:40.553
> 
> 标签：wordpress

我在 WordPress 中工作。我是新手。我正在尝试使菜单右对齐。默认菜单样式是左对齐我想要的是让它右对齐，以便整个导航是右对齐我没有更改任何部分样式所以假设我使用的是 WordPress 21 主题的默认样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:18:14.127

尝试将#access div的css更改为在style.css中正确浮动

```
#access div {
float: right;
margin: 0 7.6%; 
```

}

# cordova - 适用于 iPhone 的 phonegap 相机插件，能够在一次相机调用中拍摄多张图像

> ID：13796209
> 
> 赞同：1
> 
> 时间：2012-12-10T06:44:51.817
> 
> 标签：cordova, camera

Phonegap 的相机插件允许每次调用只拍摄一张图像。

> [http://docs.phonegap.com/en/2.2.0/cordova_media_capture_capture.md.html#Capture](http://docs.phonegap.com/en/2.2.0/cordova_media_capture_capture.md.html#Capture)说在 iOS 中限制参数不受支持。每次调用拍摄一张图像。

如何使以下成为可能。

1.  调用相机
2.  拍摄一张照片并在后台保存到相机胶卷。不要关闭相机。重复此步骤。
3.  当相机处于活动状态时，需要一个半透明层，底部有一个“显示图像”按钮。单击此按钮后，关闭相机并显示相机胶卷图像。

github中是否有可用的代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T05:23:06.163

在某些站点中，据说此限制功能不适用于 ios，因此任何其他替代方法都可以实现相机，直到我们按下后退按钮才能继续点击照片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T18:28:51.990

如果您使用捕获插件而不是相机插件，则可以指定要为在一个会话中拍摄的图片设置的限制。请参阅 phonegap 3.0 捕获插件文档以供参考。我相信这在 2.2 中也同样有效。

这是一些有关如何调用捕获会话的代码。

```
<script type="text/javascript" charset="utf-8">

// Called when capture operation is finished
//
function captureSuccess(mediaFiles) {
    var i, len;
    for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        uploadFile(mediaFiles[i]);
    }
}

// Called if something bad happens.
//
function captureError(error) {
    var msg = 'An error occurred during capture: ' + error.code;
    navigator.notification.alert(msg, null, 'Uh oh!');
}

// A button will call this function
//
function captureImage() {
    // Launch device camera application,
    // allowing user to capture up to 2 images
    navigator.device.capture.captureImage(captureSuccess, captureError, {limit: 2});
}

// Upload files to server
function uploadFile(mediaFile) {
    var ft = new FileTransfer(),
        path = mediaFile.fullPath,
        name = mediaFile.name;

    ft.upload(path,
        "http://my.domain.com/upload.php",
        function(result) {
            console.log('Upload success: ' + result.responseCode);
            console.log(result.bytesSent + ' bytes sent');
        },
        function(error) {
            console.log('Error uploading file ' + path + ': ' + error.code);
        },
        { fileName: name });
}

</script> 
```

这将使您获得所捕获图像的图像文件名和位置。如果我弄清楚了，我会尝试编辑我的答案，然后稍后如何将这些保存到相机胶卷中。注意....如果您使用 captureVideo 功能，这也适用于视频。还包括uploadFile 函数，您可以将这些图像发布到服务器。在该函数内部，它显示了如何引用图像文件的完整路径以及图像文件名。这将有助于您将这些内容放入相机胶卷。注意 fileTransfer 对象可能需要 File 插件，但也肯定需要 FileTransfer 插件。

# android - 通过代码设置活动启动时屏幕的方向

> ID：13796210
> 
> 赞同：0
> 
> 时间：2012-12-10T06:44:54.703
> 
> 标签：android, media-player

如何更改我的代码，以便在正在启动的活动中方向始终为纵向...现在是横向。（Ps：我在网上搜索过。。没什么用。）

```
final MediaPlayer mediaPlayer = new MediaPlayer();
                        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                        Intent viewMediaIntent = new Intent();   
                        viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);   
                        viewMediaIntent.setDataAndType(Uri.parse(schedule.getRecordPath()), "audio/*");   
                        viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);

                        v.getContext().startActivity(viewMediaIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:53:56.613

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT); 
```

# code-coverage - Sonar 组件视图和 cobertura 代码覆盖率报告视图不同

> ID：13796213
> 
> 赞同：0
> 
> 时间：2012-12-10T06:45:07.543
> 
> 标签：code-coverage, sonarqube, cobertura

当我查看我的声纳组件视图时，我看到了很多具有代码覆盖率的类。但是，当我单击单元测试代码覆盖率百分位以检索派生百分位的包的视图时，我只获得了组件视图中列出的覆盖包/类的子集。所以组件视图包含代码覆盖视图中的所有类，但代码覆盖视图是组件视图中代码覆盖类的子集。

有什么想法会让这个变成这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:33:46.350

您不会在代码覆盖率深入分析页面上看到所有类，因为具有 100% 代码覆盖率的类是隐藏的（因为它们没有任何关系）。另一方面，组件页面显示所有组件，无论它们对特定指标的度量是什么。

这是 Sonar 中的一般行为。您可以通过组件页面找到所有类，因为此服务用于浏览您的代码。但是在钻取页面（基于措施或违规）中，您只会看到有“问题”的类，因为该服务旨在寻找质量缺陷。

*   在违规钻取中，您不会看到没有任何违规的类

*   在度量钻取中，您不会看到对于所选指标具有“最佳值”的类（例如，代码覆盖率 => 100%）

# android - 安卓： 标签导致错误

> ID：13796214
> 
> 赞同：2
> 
> 时间：2012-12-10T06:45:19.077
> 
> 标签：android, android-layout, layout-inflater

当我在另一个 xml 中包含导航条码 xml 时，它会生成以下错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my/com.my.Login}: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown> 
```

login.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/tableStyle"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:layout_height="wrap_content"
        layout="@layout/navbar" />

</LinearLayout> 
```

navbar.xml 是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@style/tableRowStyle"
    android:orientation="horizontal"
    android:paddingRight="0dp" >

    <Button
        android:id="@+id/button2"
        android:layout_width="52dp"
        android:layout_height="48dp"
        android:background="@drawable/home" />

    <View
        android:layout_width="1px"
        android:layout_height="fill_parent"
        android:background="#1f1f1f" />

    <View
        android:layout_width="1px"
        android:layout_height="fill_parent"
        android:background="#454545" />

    <Button
        android:id="@+id/button1"
        android:layout_width="190dp"
        android:layout_height="48dp"
        android:layout_weight="0.35"
        android:background="@drawable/stock" />

    <View
        android:layout_width="1px"
        android:layout_height="fill_parent"
        android:background="#1f1f1f" />

    <View
        android:layout_width="1px"
        android:layout_height="fill_parent"
        android:background="#454545" />

    <Button
        android:id="@+id/button2"
        android:layout_width="52dp"
        android:layout_height="48dp"
        android:background="@drawable/home" />

</LinearLayout> 
```

背后的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:54:11.287

难道是这样

```
<include
    android:layout_height="wrap_content"
    layout="@layout/navbar" /> 
```

应该

```
<include
    android:layout_height="wrap_content"
    android:layout="@layout/navbar" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:04:49.630

java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.my/com.my.Login}: android.view.InflateException: Binary XML file line #1: Error inflating class

如果您收到此错误，则意味着您的 setContentView(R.id.xml_file); 中的布局调用不匹配；因此，首先检查并确保您是否在 Java 代码中正确调用了布局 ID。

只需删除 xml 中的 style="@style/tableStyle" 即可。我认为它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:50:19.160

还要指定布局宽度。

```
<include
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    layout="@layout/navbar" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T07:02:00.487

移除`android:background="@style/tableRowStyle"`

现在它工作正常。谢谢大家的宝贵答案:)

# c# - Lambda 和动作委托的使用

> ID：13796218
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:45:33.977
> 
> 标签：c#, lambda

我有几行代码，其中 configure 方法正在调用并仅传递字符串值，但 ConfigureWith 函数期望委托。谁能帮助我了解 ConfigureWith() 方法的工作原理。谢谢

```
MailTemplate
.ConfigureWith(mt => mt.MailBody = "hello world")
.ConfigureWith(mt => mt.MailFrom = "rdingwall@gmail.com")
.DoSomeOtherStuff()
.Build(); 
```

对此的实现将是：

```
public class MailTemplate
{
// regular auto properties
public string MailFrom { get; set; }
public string MailBody { get; set; }

public MailTemplate ConfigureWith(Action<MailTemplate> func)
{
    func(this);
    return this;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:55:46.217

写的好像完全没有意义，你还不如直接设置属性就行了`MailTemplate`。

通常在像这样的流利的构建器中，您会保存每次`ConfigureWith`调用传入的操作，然后稍后执行它们。

如果您更详细地解释您希望使用您正在创建的流利语法实现什么，它可能会有所帮助。正如所写的那样，它也不会编译，因为第一次调用需要一个静态方法。你能显示真实的代码吗？

您可能还想查看 StackOverflow 上有关流畅方法的其他答案（例如[Tips for writing fluent interfaces in C# 3](https://stackoverflow.com/questions/224730/tips-for-writing-fluent-interfaces-in-c-sharp-3)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:52:09.317

我看到上面的示例来自对您之前提出的[另一个问题](https://stackoverflow.com/questions/13761666/how-to-use-fluent-style-syntactic-sugar-with-c-sharp-property-declaration)的回答。我仍然不完全确定您要做什么，并且正如 Ian Mercer 所建议的那样，所写的内容毫无意义。但是，如果您只是想了解*它*的作用，那么让我们首先获取一个工作示例：

```
using System;

namespace ScratchApp
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var mailTemplate = BuildMailTemplate(
                mt => mt.MailBody = "hello world", 
                mt => mt.MailFrom = "rdingwall@gmail.com");
        }

        private static MailTemplate BuildMailTemplate(
            Action<MailTemplate> configAction1, 
            Action<MailTemplate> configAction2)
        {
            var mailTemplate = new MailTemplate();
            mailTemplate.ConfigureWith(configAction1)
                .ConfigureWith(configAction2)
                .DoSomeOtherStuff()
                .Build();
            return mailTemplate;
        }
    }

    public class MailTemplate
    {
        public string MailFrom { get; set; }
        public string MailBody { get; set; }

        public MailTemplate DoSomeOtherStuff()
        {
            // Do something
            return this;
        }

        public MailTemplate Build()
        {
            // Build something
            return this;
        }

        public MailTemplate ConfigureWith(Action<MailTemplate> func)
        {
            func(this);
            return this;
        }
    }
} 
```

这和以前一样毫无意义，但它建立了。当您调用 .ConfigureWith() 时发生的情况是，您不是传递一个普通值，而是传递一个函数。在上面的示例中，我实际上将函数声明为传递给 BuildMailTemplate() 方法的参数，然后在构建和配置模板时执行这些函数。您可以通过逐行单步执行代码（例如，Visual Studio 中的 F11）并*在 lambda 表达式本身中*设置断点，然后查看调用堆栈来了解它的工作原理。

如果您对 lambdas 的语法感到困惑 - 箭头语法在您刚开始习惯时确实有点复杂 - 请随时查看有关它的[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，或者只是谷歌“c# lambdas”。喜。

# iis-7 - Tomcat 7 与 IIS 7 的集成

> ID：13796230
> 
> 赞同：2
> 
> 时间：2012-12-10T06:46:39.647
> 
> 标签：iis-7, tomcat7, isapi

在完成所有与 tomcat7 和 IIS7 集成相关的步骤后，我遇到了错误。知道可能是什么原因吗？第一次按照教程中提到的所有步骤进行操作时，我的网站出现了，然后突然停止出现。我再次从 IIS 中删除了我的网站并按照步骤操作，但是每次都会出现以下错误：-

HTTP 错误 500.0 - 内部服务器错误 该页面无法显示，因为发生了内部服务器错误。详细错误信息 模块 IsapiFilterModule 通知 AuthenticateRequest 处理程序 StaticFile 错误代码 0x80070001 物理路径 D:\New\IISROOT 登录方法匿名登录用户匿名失败请求跟踪日志目录 D:\New\Tomcat\logs

我检查了日志，但没有创建跟踪日志以及 isapi_redirect.logs

我已按照以下步骤操作：

1.在tomcat\conf中创建worker.properties和uriworkermap.properties这两个文件

-在workers.properties中我添加了以下信息

worker.list=mysite worker.mysite.host=localhost worker.mysite.port=8009 worker.mysite.type=ajp13

- 在 uriworkermap.properties 我添加了以下信息

/mysite/*=mysiteworker

2.在Tomcat\bin中创建isapi-rediect.properties

extension_uri=/jakarta/isapi_redirect.dll log_file=D:\DLNew\Tomcat\logs\isapi_redirect.log log_level=debug worker_file=C:\Tomcat\conf\workers.properties worker_mount_file=c:\Tomcat\conf\uriworkermap.properties

3.添加ISAPI过滤器

在 AddIsapi 过滤器对话框中，我将过滤器名称指定为 jakarta，将可执行路径指定为 c:\Tomcat\bin\isapi\isapi-redirect.dll

2.添加虚拟目录

在添加 VirtualDirectory 对话框中，我将别名指定为 jakarta，将 PhysicalPath 指定为 c:\Tomcat\bin\isapi

3\. 在连接面板中选择 jakarta 虚拟目录 - 双击“功能视图”中的“处理程序映射”图标。-单击“操作”面板中的“编辑功能权限”链接。- 确保选择了“执行”选项。

4.在 ISAPI OR CGI 限制对话框中注册 ISAPI 扩展我已将 ISAPI 或 CGI 路径指定为 c:\Tomcat\bin\isapi\isapi-redirect.dll 并将描述为 jakarta，并且我启用了允许扩展路径执行的复选框

我可以使用以下网址通过 Tomcat 访问应用程序：http://localhost:80/mysite

但是应用程序没有通过 IIS 启动：我在浏览器中遇到异常

HTTP 错误 500.0 - 内部服务器错误 该页面无法显示，因为发生了内部服务器错误。详细错误信息 模块 IsapiFilterModule 通知 AuthenticateRequest 处理程序 StaticFile 错误代码 0x80070001 物理路径 D:\New\IISROOT 登录方法匿名登录用户匿名失败请求跟踪日志目录 c:Tomcat\logs

# javascript - window.scrollTo 在 phonegap 中不起作用 - 替代解决方案或解决方法？

> ID：13796234
> 
> 赞同：3
> 
> 时间：2012-12-10T06:46:45.840
> 
> 标签：javascript, jquery, css, cordova

我编写了一个相当基本的 js 函数，它以编程方式自动**将 iPhone 键盘完美地对齐到每个**聚焦的输入字段下方（*如果你喜欢，请随意使用它*！）。对齐主要由 window.scroll 处理 - 一种适用于任何浏览器视图的标准方法，除了 UIWebView 因此*phonegap/cordova (2.1)*。**所以我需要一个解决方法**。

**我的工作代码：**

```
function setKeyboardPos(tarId) {

//programmatically: set scroll pos so keyboard aligns perfectly underneath textfield
var elVerticalDistance = $("#"+tarId).offset()["top"]; //i.e. 287
var keyboardHeight = 158;
var heightOfView = document.height; // i.e. 444
var inputHeight = $("#"+tarId).outerHeight();

var viewPortSpace = heightOfView-keyboardHeight; //i.e. 180
var verticalNewSroll = (elVerticalDistance+inputHeight)-viewPortSpace;
if(verticalNewSroll<0) { verticalNewSroll = 0; }
////

    //OK, all done lets go ahead with some actions
    $("#footer").hide(); //hide footer so that the keyboard doesn't push it on top of textfield
    $("#containingDiv").css("bottom","0px"); //remove bottom space for footer
    window.scrollTo(0,verticalNewSroll); //scroll! where the problem starts

} 
```

*就是在除了 UIWebView 之外的所有东西上工作。*正如我上面提到的，除了 window.scrollTo 之外，一切都可以正常工作（注意，为了清楚起见，做了一些小的改动）。那么有人知道替代解决方案甚至是一个好的解决方法吗？

**类似问题**

[window.scrollTo 在 IOS 的 phonegap 中不起作用](https://stackoverflow.com/questions/13313721/window-scrollto-doesnt-work-in-phonegap-for-ios)

[PhoneGap / Cordova s​​crollTo 忽略](https://stackoverflow.com/questions/11781054/phonegap-cordova-scrollto-ignored)

[如何在 Phonegap 中添加垂直滚动](https://stackoverflow.com/questions/11594080/how-to-add-vertical-scroll-in-phonegap)

上面还有三个类似的问题，它们在某种程度上指出了正确的方向。其中一位回答者提到**了使用 css 来实现这一点**。谁能想出一个更具体的例子？**另一个人建议使用锚点**，但这不是一个非常漂亮的解决方案，并且与我的其余代码配合得不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:04:11.870

在做了一些研究之后，我意识到 window.scrollTo() 确实在 iOS6 和 phonegap 2.1 中工作，还有其他的失败；出于某种原因， document.height 没有在 UIwebView 中产生等比例的属性，所以我不得不写一个小的解决方法。我将在下面发布解决方案和整个代码以供将来参考。

```
function setKeyboardPos(tarId) {

//programmatically: set scroll pos so keyboard aligns perfectly underneath textfield
var elVerticalDistance = $("#"+tarId).offset()["top"];
var keyboardHeight = 157;

if(isNativeApp()) { keyboardHeight = 261; } //I choose to change the keyboard height for the sake of simplicity. Obviously, this value does not correnspond to the actual height of the keyboard but it does the trick
var keyboardTextfieldPadding = 2;
var heightOfView = document.height;
var inputHeight = $("#"+tarId).outerHeight();

var viewPortSpace = heightOfView-keyboardHeight-keyboardTextfieldPadding; //180
var verticalNewSroll = (elVerticalDistance+inputHeight)-viewPortSpace;
if(verticalNewSroll<0) { verticalNewSroll = 0; }
////

//OK, all done lets go ahead with some actions
$("#footer").hide(); //hide footer so that the keyboard doesn't push it on top of textfield
$("#containingDiv").css("bottom","0px"); //remove bottom space for footer
window.scrollTo(0,verticalNewSroll); // perform scroll!

}

function isNativeApp() {

var app = (document.URL.indexOf('http://') === -1) && (document.URL.indexOf('https://') === -1);
if (app) {
    return true; // PhoneGap native application
} else {
    return false; // Web app / safari
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:47:02.253

你可以尝试使用 animate 和 scrollTop 属性来滚动它看起来像这样：

```
$("html, body").animate({ scrollTop: "The value to scroll to" }); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:49:03.290

你只需要使用这个：

```
$(window).scrollTop(0); 
```

# jquery - jQuery使所有容器的高度相等

> ID：13796242
> 
> 赞同：0
> 
> 时间：2012-12-10T06:47:16.547
> 
> 标签：jquery, css, jquery-selectors

我有这样的[标记](http://tinkerbin.com/UqbQTVvg)。现在在此链接中，您可以看到 3`li`内`ul`。在该标记中，您可以看到`li`类名有第一个，最后它被命名为`last`。li 类名 last 是该行的最后一个 li 元素。现在根据我的要求，我已经连续取了 3 li，接下来的 3 li 在另一排，依此类推。我有大约 100 li 像这样。

现在在该标记中，您可以在 h3 标记中看到标题的长度不同，它只是扰乱了内容的高度。我不能为任何容器分配任何恒定的高度，因为每个项目的标题长度都非常大。所以有人可以在 jQuery 中告诉我如何使每一行中所有其他容器的高度相同。

逻辑将类似于它会在一行内部查看，这意味着三个 li 在一行中，并且其高度大于其他两个，它将声明一个为最高高度，并使另外两个 li 达到该高度。通过这种方式，我们可以使所有内容按高度对齐。任何帮助和建议都将不胜感激。

**笔记**

我无法更改我的标记。它将保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:11:27.357

此代码解决了您的要求，但没有排列 LI 内部的按钮，这是一个不同的问题。也许您可以将按钮放在 LI 的底部，使用 CSS 相对/绝对定位来排列它们。

[http://jsfiddle.net/NWC2Q/10/](http://jsfiddle.net/NWC2Q/10/)

```
$(function() {
  var items = $("ul.products li");
  var rows = items.length / 3;
  if (rows <= 0)
    rows = 1;

  for(var r=0;r<rows;r++)
  {
    normalizeRowHeight(r, items);
  }    
});

function normalizeRowHeight(row, itemSet)
{
  var maxRowHeight = 0; 
  var startIndex = (row == 0 ? 1 : (row + 1) * 3) - 1;
  var endIndex = (startIndex + 2) > itemSet.length ? itemSet.length - 1: (startIndex + 2);

  rowItems = itemSet.slice(startIndex, endIndex);

  var maxRowHeight = Math.max.apply(null, rowItems.map(function(i,e) {
    return $(e).height();
  }).get());

  rowItems.each(function(i) {
    $(this).css('height', maxRowHeight + "px");
  });  
} 
```

# c++ - 如何左对齐 QMenu？

> ID：13796243
> 
> 赞同：0
> 
> 时间：2012-12-10T06:47:20.930
> 
> 标签：c++, qt

如何左对齐按钮单击后创建的 QMenu？

我希望从按钮左侧打开菜单

```
void MyMenu::cppSlot()
    {
        QMenu *xmenu = new QMenu;
        xmenu->addMenu("A -> Setup");
        xmenu->addMenu("B -> Setup");
        xmenu->addMenu("C -> Setup");
        xmenu->addMenu("D -> Setup");
        xmenu->addMenu("E -> Setup");
        xmenu->addMenu("F -> Setup");
        xmenu->addMenu("G -> Setup");
        xmenu->setFont(QFont ("Courier", 10));
        xmenu->setFixedWidth(250);
        xmenu->setAutoFillBackground(true);
        QPalette palette=xmenu->palette();
        palette.shadow();
        xmenu->setPalette(palette);   
        xmenu->show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T15:15:58.177

我知道这是一个旧线程，但我仍在为将来需要帮助的人提供解决方案。我有一个类似的问题，我想从`bottom-right`按钮的角落打开菜单。为了实现这一点，我不得不重写`eventFilter`并更改弹出菜单相对于全局坐标的位置。在你的情况下，我假设你需要它在`bottom-left`? 应该是这样的：

```
bool MainWindow::eventFilter(QObject *obj, QEvent *event){
    if (event->type() == QEvent::Show && obj == ui->myButton->menu()){
        ui->myButton->menu()->move(ui->myButton->mapToGlobal(QPoint(0,ui->helpButton->height())));
        return true;
    }
    return false;
} 
```

在您的代码中的某处，最好在您初始化`QMenu`并将其添加到之后`button`，您必须添加以下行：

```
ui->myButton->setMenu(helpMenu);     
helpMenu->installEventFilter(this); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T08:11:16.063

首先，阅读`QMenu` [此处](http://doc.qt.digia.com/qt/qmenu.html)的文档。阅读`QMenu::exec ()`并查看您是否可以满足您的要求。或者，如果你想改变`menu-indicator`子控件的位置，你可以使用`Qt Style Sheets`如下。

```
QPushButton::menu-indicator {
     image: url(menu_indicator.png);
     subcontrol-origin: padding;
     subcontrol-position: left;
 } 
```

# yaml - 如何使用 QR 码保持文本格式？

> ID：13796252
> 
> 赞同：0
> 
> 时间：2012-12-10T06:48:19.777
> 
> 标签：yaml, qr-code, information-retrieval, information-extraction

我想使用二维码来传输 yaml。当扫描仪读取代码时，无论如何要保持文本格式？我在哪里可以阅读有关为 qr 代码实现自定义格式的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:57:03.597

只需在文本有效负载中包含换行符、制表符和空格，如果这就是您的意思。在显示有效负载时，您不能强迫读者尊重所有这些。但是您可以将其全部包含在内。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T10:16:04.070

在将文本编码为 QR 码之前，您需要对文本进行 URL 编码。

正如空格符号被编码为`%20`换行符通常被编码为`%0A`

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)。

一般来说，JavaScript 函数`escape()`已经足够好，尽管您可能想查看`encodeURI()`或`encodeURIComponent()`根据您的需要 - 请参阅[http://www.javascripter.net/faq/escape.htm](http://www.javascripter.net/faq/escape.htm)以获得关于差异的良好讨论。

# regex - （Apache）正则表达式匹配特定的cookie名称+值（剥离/删除它）？

> ID：13796259
> 
> 赞同：2
> 
> 时间：2012-12-10T06:48:50.040
> 
> 标签：regex, apache, cookies, request-headers, mod-headers

我正在尝试使用“RequestHeader edit”指令来获取“Cookie”标头，并从该标头中删除特定的 cookie。

换句话说，假设传入的“Cookie”标头是：

```
Cookie: header1=123; myheader=abc; header2=789 
```

我想使用“RequestHeader edit”将该“Cookie”标头修改为：

```
Cookie: header1=123; header2=789 
```

或者，作为另一个示例，如果传入的“Cookie”标头是：

```
Cookie: header1=123; header2=789; myheader=abc 
```

将其更改为：

```
Cookie: header1=123; header2=789 
```

我对正则表达式很害怕，但我能做到的最接近的是：

RequestHeader 编辑`Cookie "myheader=.*(;)|myheader=.*($)" ""`

但是，即使这样也有一个问题，如果“myheader”cookie 是“Cookie”字符串/值中的最后一个，那么最后我会得到一个分号（“;”）。

任何人都可以提供一个完全正确的正则表达式吗？

谢谢，吉姆

PS我也想知道：带有尾随分号的Cookie有效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T07:38:23.360

尝试：

```
RequestHeader edit Cookie "(^myheader=[^;]*; |; myheader=[^;]*)" "" 
```

# c++ - C - 使用 fstream 读取文本文件时出现奇怪的值

> ID：13796263
> 
> 赞同：0
> 
> 时间：2012-12-10T06:49:12.803
> 
> 标签：c++, fstream, file-io

我编写了一个函数来读取文本文件，从文件中的整数值创建一个数组，并将该数组的引用返回给主函数。我写的代码（在VS2010中）：

```
//main.cpp
void main(){
int T_FileX1[1000]; 
    int *ptr=readFile("x1.txt");

    for(int counter=0; counter<1000; counter++)
        cout<<*(ptr+counter)<<endl;    
} 
```

功能是：

```
//mylib.h 
int* readFile(string fileName){
    int index=0;
            ifstream indata;
            int num;

    int T[1000];    
    indata.open("fileName");
            if(!indata){
                cerr<<"Error: file could not be opened"<<endl;
                exit(1);
            }
            indata>>num;
            while ( !indata.eof() ) { // keep reading until end-of-file
                T[index]=num;       
                indata >> num; // sets EOF flag if no value found
                index++;
            }
            indata.close();

            int *pointer;
            pointer=&T[0];
            return pointer;
} 
```

文件中的数据包含正数，如

```
5160
11295
472
5385
7140 
```

当我在“readFile(string)”函数中写入每个值时，它会写入 true。但是当我像 U 在“main”函数中写的那样把它写到屏幕上时，它给出了奇怪的值：

```
0
2180860
1417566215
2180868
-125634075
2180952
1417567254
1418194248
32   
2180736 
```

与我的数据无关。我的文件中有 1000 个数字，我想它会在部分真实写作之后对这些不相关的值赞不绝口。例如，它首先将 500 个值写入 true，然后将不相关的值写入我的数据。我的错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:55:39.600

```
int T[1000]; 
...
pointer=&T[0]; 
```

您正在返回一个指向将被破坏的本地堆栈变量的指针。

我认为您想要做的是将`T_FileX1`您定义的数组传递给函数并直接使用它来读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:56:49.453

您返回一个指向数组第一个元素的指针，该数组在堆栈上分配并在函数返回后被销毁。尝试改用向量：

```
vector<int> readFile(string fileName) {
    ifstream indata;
    int num;

    vector<int> T;
    indata.open("fileName");
    if(!indata){
        cerr<<"Error: file could not be opened"<<endl;
        exit(1);
    }
    indata>>num;
    while ( !indata.eof() ) { // keep reading until end-of-file
        T.push_back(num);
        indata >> num; // sets EOF flag if no value found
    }
    indata.close();

    return T;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:56:48.993

这是*未定义行为*的情况。你返回一个指向局部变量的指针，当函数返回时，函数使用的堆栈部分不再有效。

将数组作为参数传递给函数。

# javascript - javascript 表单验证在 IE8 中不起作用

> ID：13796265
> 
> 赞同：1
> 
> 时间：2012-12-10T06:49:22.127
> 
> 标签：javascript, forms, internet-explorer, validation, onsubmit

此 javascript 表单验证在 IE8 中不起作用！表单在用户输入无效输入时提交。它在其他浏览器 firefox、opera、chrome 中正常工作。你能帮我吗？

```
<form method="post" name="form1" id="form1" action="editAction.php" onsubmit="return check_user_info()"> 
```

================================

```
<script type="text/javascript">

    function check_user_info()
    {
    var proceed = true;
         if (checkUserFirstName() == 1)
        {
        document.getElementById("userFname_msg").style.display = "block";
        document.getElementById("userFname_msg1").style.display = "none";
        proceed = false;
        }
        else if (checkUserFirstName() == 11)
            {
            document.getElementById("userFname_msg1").style.display = "block";
            document.getElementById("userFname_msg").style.display = "none";
            proceed = false;
            }
            else
            {
            document.getElementById("userFname_msg").style.display = "none";
            document.getElementById("userFname_msg1").style.display = "none";
            }   
            //-----------------------------
          if (checkUserLastName() == 1)
        {document.getElementById("userLname_msg").style.display = "block";
        document.getElementById("userLname_msg1").style.display = "none";
        proceed = false;}
        else if (checkUserLastName() == 11)
            {document.getElementById("userLname_msg1").style.display = "block";
            document.getElementById("userLname_msg").style.display = "none";
            proceed = false;}

        else{document.getElementById("userLname_msg").style.display = "none";
            document.getElementById("userLname_msg1").style.display = "none";
            }   
            //-----------------------------

            if (checkMobile() == 1)
        {
        document.getElementById("mobile_msg").style.display = "block";
        proceed = false;
        }
        else
        document.getElementById("mobile_msg").style.display = "none";

            //----------------------------------
                if (checkPhone() == 1)
        {
        document.getElementById("phone_msg").style.display = "block";
        proceed = false;
        }
        else 
        document.getElementById("phone_msg").style.display = "none";

            //----------------------------
            if (proceed)
            {
            alert ("your information has been updated successfully ..");
            return proceed; 
            }
            else
            {
            return false;
            }
      } // End function ...
     //----------------------------------------------------
      function checkUserFirstName()
      {
      if (document.getElementById("firstName").value.trim().length == 0) 
      return 1 ;
      else if (!(document.getElementById("firstName").value.match(/^[ \.\-_a-zA-Z]+$/)))
      return 11 ;
      } // End function ...
      //--------------------------------------------------
      function checkUserLastName()
      {
      if (document.getElementById("lastName").value.trim().length == 0) 
      return 1 ;
      else if (!document.getElementById("lastName").value.match(/^[ \.\-_a-zA-Z]+$/))
      return 11 ;
      } // End function ...
    //------------------------------------------------------------- 
      function checkMobile()
    {
    if (((document.getElementById("mobile").value.trim().length >0) && (document.getElementById("mobile").value.trim().length != 10))|| (isNaN(document.getElementById("mobile").value)))
    return 1 ;

    } // end function ...
    //----------------------------------------------------------
      function checkPhone()
    {
    if(!document.getElementById("TelephoneNumber").value.match(/^[ \/0-9]*$/))
    return 1 ;
    } // end function ...
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:35:46.930

我猜这个问题可能是因为`.trim()`你的检查函数中字符串的方法。在旧浏览器中没有 String`trim`方法，您必须使用 polyfill 以确保它始终可用，无论浏览器如何。一个很好的例子是：

[在 JavaScript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

```
"".trim || String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g, '');}; 
```

是我用的。

# c - 选择不能正常工作

> ID：13796270
> 
> 赞同：2
> 
> 时间：2012-12-10T06:49:49.897
> 
> 标签：c, linux

在我的应用程序中，当警报触发时，我将一个整数从信号处理程序写入管道。在我的主应用程序中，我永远在 select() 上循环，超时值为 0。问题是信号处理程序成功地写入了管道的写入端，但选择从不显示管道读取端的可读性。所以在下面的伪代码中，select 的返回值将是 0。甚至更令人困惑的是，如果我删除 select 并简单地执行阻塞 read()，它就可以工作！！！我可以读取处理程序写入的整数。只是 select 总是认为管道的读取端不可读，因此总是返回 0。

所以伪代码看起来像

```
int x=0;
for(;;)
{

   x = select(maxfd, &readfd, NULL, NULL, &dontWait); // dontWait is timeval with tv_sec and tv_usec = 0
    if (x == 1)
     //check for read descriptor and do something
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T06:52:22.813

该`select`函数将*修改*集合和超时。`select`您必须在调用之前重新初始化描述符集并超时循环的每次迭代。

此外，您不应该真正使用`if (x == 1)`，而应使用`if (FD_ISSET(some_fd, &readfd))`. 请记住，这`maxfd`应该是任何集合中使用的最大文件描述符*加一*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:53:22.060

`select`在`fd_set`s 上工作。看来您正在尝试将指针传递给要选择的描述符（int）？

我建议查阅手册页`select`和`fd_set`：

[http://linux.die.net/man/3/fd_set](http://linux.die.net/man/3/fd_set)

# iphone - 为什么 iPhone 应用程序在获得请求和印象后也没有从 iAds 获得任何 Revunue？

> ID：13796275
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:50:07.373
> 
> 标签：iphone, ios, itunes, app-store-connect, iad

在我的 iphone 应用程序中，我添加了 iAd 控制，我得到了请求和印象，但我没有获得收入。为什么会这样？我们必须做些什么来获得收入吗？

我很迷茫。有人说 CPI（Cost Per Impression）。但我不知道如何启用 CPI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:42:02.030

这取决于广告商支付的费用，他们可能会为每千次展示支付 20 美分，因此如果您有 10 次展示，您将获得 0。这一切都不同，如果您看到请求和展示，那您很好，没有除了让更多人使用您的应用程序从而获得更多印象之外，您还可以做很多事情。

# android - Request.addProperty("SayHello", "32"); 没有通过32？

> ID：13796278
> 
> 赞同：0
> 
> 时间：2012-12-10T06:50:18.643
> 
> 标签：android, asp.net, web-services, ksoap2

我正在尝试将值从 android 传递到 aspx Web 服务。但是 Web 服务不采用以下代码中传递的 32。

```
Request.addProperty("SayHello", "32"); 
```

任何帮助将不胜感激。

我完整的android代码如下

```
package com.example.fp1_webservicedropdown;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

import org.ksoap2.*;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.*;

public class MainActivity extends Activity {
    TextView result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        result = (TextView) findViewById(R.id.textView2);

        final String NAMESPACE = "http://sample.com/";
        final String METHOD_NAME = "SayHello";
        final String SOAP_ACTION = "http://sample.com/SayHello";
        final String URL = "http://myLoclalIP/HellowWorld/Service1.asmx";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
        Request.addProperty("SayHello", "32");

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive) soapEnvelope.getResponse();
            result.setText("The web service returned " + resultString);
        }

        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的网络服务代码如下：

```
 [WebService(Namespace = "http://sample.com/")]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public  String SayHello(int a)
        {
            int passingValue = 8 + a;
            String aTemp=passingValue.ToString();
            return aTemp;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:12:50.397

Request 类的文档中没有任何方法作为 addProperty 。尽管您可以将 URI 构造为字符串并通过构造函数或使用`setDestinationUri(uri)`方法传递它。

例如，

```
uri = "http://www.mydomain.com/index?SayHello=32"
my_request.setDestinationUri(uri) 
```

为了获得更多控制，还有一种方法可以自己设置 HTTP 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:30:16.447

这是示例...

```
package com.mehul.Web_Service;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.R.string;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Typeface;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Web_ServiceActivity extends Activity 
{
    //SoapObject request; 
    Button ok,btnimage;
    EditText eprice;
    TextView tprice;

    private final String NAMESPACE = "http://www.webserviceX.NET/";
    private final String URL = "http://www.webservicex.net/stockquote.asmx";
    private final String SOAP_ACTION = "http://www.webserviceX.NET/GetQuote";
    private final String METHOD_NAME = "GetQuote";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ok = (Button)findViewById(R.id.btnok);
        eprice = (EditText)findViewById(R.id.edtprice);
        tprice = (TextView)findViewById(R.id.txtprice);
        Typeface typface=Typeface.createFromAsset(getAssets(),"fonts/Gretoon.ttf");
        tprice.setTypeface(typface);

        ok.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v) 
            {
                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                    PropertyInfo weightProp =new PropertyInfo();
                    weightProp.setName("symbol");

                    weightProp.setValue(eprice.getText().toString());

                    weightProp.setType(string.class);
                    request.addProperty(weightProp);

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.dotNet = true;
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    try 
                    {
                        androidHttpTransport.call(SOAP_ACTION, envelope);
                        //SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                        SoapObject obj1 = (SoapObject)envelope.bodyIn;
                        //Log.i("myApp", response.toString());

                        //tv.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);

                        String str = obj1.toString();
                        Log.d("My Price", ""+str);
                        int start = str.indexOf("<Last>")+("<Last>").length();
                        int end = str.indexOf("</Last>");

                        tprice.setText(""+str.substring(start,end)+" Price");
                        Toast.makeText(getApplicationContext(), "Set Price Successfully .. "+str.substring(start,end), Toast.LENGTH_SHORT).show();

                       request = null;

                    } 
                    catch (Exception e) 
                    {
                        //e.printStackTrace();
                        Log.d("Exception Generated", ""+e.getMessage());
                    }

            }
        });

        //String weight = "ITC";
        //String fromUnit = "Grams";
        //String toUnit = "Kilograms";

        /*PropertyInfo fromProp =new PropertyInfo();
        fromProp.setName("FromUnit");
        fromProp.setValue(fromUnit);
        fromProp.setType(String.class);
        request.addProperty(fromProp);

        PropertyInfo toProp =new PropertyInfo();
        toProp.setName("ToUnit");
        toProp.setValue(toUnit);
        toProp.setType(String.class);
        request.addProperty(toProp);
        */ 

    }

} 
```

# c# - 访问服务器端的按钮

> ID：13796285
> 
> 赞同：0
> 
> 时间：2012-12-10T06:50:49.947
> 
> 标签：c#, asp.net, vb.net, c#-4.0, devexpress

我的代码：

```
<dx:ASPxTreeList ID="treeList" runat = "server">
    <Columns>
      <dx:TreeListDataColumn Name="Edit" FieldName="EditColumn">
        <DataCellTemplate>
          <dx:ASPxButton ID="btnSample" runat="server" Text="SampleText">
          </dx:ASPxButton>
        </DataCellTemplate>
       </dx:TreeListDataColumn>
    </Columns>
    </dx:ASPxTreeList> 
```

我的目标是使按钮`btnSample`在`Page_Load`. 所以，我需要访问`btnSample`服务器端`Page_Load`事件的 id。我不知道如何访问服务器端`ID`内部的按钮。`TrreListDataColumn`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:50:16.477

处理[ASPxTreeList.HtmlDataCellPrepared](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxTreeListASPxTreeList_HtmlDataCellPreparedtopic)事件：

```
protected void TreeList_HtmlDataCellPrepared(object sender, TreeListHtmlDataCellEventArgs e)
{
    int empId = (int) e.GetValue("EmpID");
    if ("EditColumn".Equals(e.Column.FieldName) && empId == 1)
    {
        ASPxButton button = (ASPxButton) treeList.FindDataCellTemplateControl(e.NodeKey, e.Column, "btnSample");
        if (button != null)
            button.Visible = false;
    }
} 
```

# javascript - 每个使用jquery添加多个元素？

> ID：13796289
> 
> 赞同：1
> 
> 时间：2012-12-10T06:51:05.047
> 
> 标签：javascript, jquery, append, each

我是新来的，我想问一个关于 jQuery 的问题。我每个 jquery 都有一些问题，我有代码：

```
$("#search-submit").click(function(){
    var item = $("<span>asdf</span>");
    $("body").append(item, item);
} 
```

我只是想不通，为什么这个简单的代码不起作用。每次单击按钮时，我只打印一个“asdf”，而不是打印两次“asdf”。这也行不通。这太傻了……

```
$("body").append(item);
$("body").append(item); 
```

非常感谢...对不起我的英语不好

丹尼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:56:46.767

您只能附加一次 jQuery 对象，您可以`clone`：

```
$("#search-submit").click(function() {
    var item = $("<span>asdf</span>");
    $("body").append(item, item.clone());
}) 
```

或者附加一个字符串：

```
$("#search-submit").click(function() {
    var item = "<span>asdf</span>";
    $("body").append(item, item);
}) 
```

[http://jsfiddle.net/yKyAL/](http://jsfiddle.net/yKyAL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:01:03.733

您可以使用[克隆](http://api.jquery.com/clone/)

```
$("#search-submit").click(function() {
    var item = $("<span>asdf</span>");
    $("#test").append(item.clone(), item.clone());
});​ 
```

[在这里](http://jsfiddle.net/tqN3a/)检查小提琴

# asp.net - 可使用 .Net 和 c# web 方法进行 X 编辑

> ID：13796296
> 
> 赞同：3
> 
> 时间：2012-12-10T06:51:39.940
> 
> 标签：asp.net, jquery, webmethod

我在 Asp.net 中使用[X-Editable 插件。](http://vitalets.github.com/x-editable/index.html)
我试过这个：[Usage with .Net and C# Webmethods](https://github.com/vitalets/x-editable/issues/19)
但它给了我错误。它没有按应有的方式调用 WebMethod。

如何解决这个问题呢？
请帮忙。

Javascript：

```
 $('#username').editable({
     url: function (params) {                      
        return $.ajax({
           url: 'Default.aspx/TestMethod',
           data: JSON.stringify(params),
           dataType: 'json',
           async: true,
           cache: false,
           timeout: 10000,
           success: function (response) {
                     alert("Success");
           },
           error: function () {
                     alert("Error in Ajax");
           }
          });
      }
}); 
```

HTML：

```
<a href="#" id="username" class="myeditable">superuser</a> 
```

Default.aspx 中的 WebMethod：

```
[System.Web.Services.WebMethod]
public static String TestMethod(String params)
{
    //access params here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:45:58.773

如果要调用页面方法，首先需要发出*POST*类型的请求（同时设置 content-type 也不会造成任何伤害）：

```
$('#username').editable({
    url: function (params) {                      
        return $.ajax({
            type: 'POST',
            url: 'Default.aspx/TestMethod',
            data: JSON.stringify(params),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            async: true,
            cache: false,
            timeout: 10000,
            success: function (response) {
                alert("Success");
            },
            error: function () {
                alert("Error in Ajax");
            }
        });
    }
}); 
```

此外，JSON 将在服务器端自动反序列化，因此您应该期待服务器端的`name`,`pk`和`value`参数（这是插件根据[文档](http://vitalets.github.com/x-editable/docs.html)发送的内容）

```
[System.Web.Services.WebMethod]
public static String TestMethod(string name, string pk, string value)
{
    //access params here
} 
```

在您的情况下，`pk`由于您没有设置，因此将为 null 。

# c# - 带有选中默认值的复选框的 DataGridView

> ID：13796300
> 
> 赞同：8
> 
> 时间：2012-12-10T06:51:55.563
> 
> 标签：c#, winforms, datagridview, checkbox

我在 Winform 中有一个 dataGridView，我使用我在这里看到的代码向 datagrid 添加了一个带有复选框的列：

```
 DataGridViewCheckBoxColumn column = new DataGridViewCheckBoxColumn();
    {
        column.HeaderText = "Export";
        column.Name = "Export";
        column.AutoSizeMode =
            DataGridViewAutoSizeColumnMode.DisplayedCells;
        column.FlatStyle = FlatStyle.Standard;
        column.CellTemplate = new DataGridViewCheckBoxCell(false);
        column.CellTemplate.Style.BackColor = Color.White;
    }

    gStudyTable.Columns.Insert(0, column); 
```

这可行，但我希望将复选框检查为我添加的默认锯：

```
 foreach (DataGridViewRow row in gStudyTable.Rows)
    {                
        row.Cells[0].Value = true;
    } 
```

但复选框 col 仍未选中。我使用集合作为我的数据源，并在添加数据源后更改 col 的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T07:10:32.167

我认为没有办法在列声明上设置检查值。在设置数据源后，您必须遍历检查它的行（例如在 DataBindingComplete 事件中）：

```
for (int i = 0; i < dataGridView1.Rows.Count -1; i++)
{
dataGridView1.Rows[i].Cells[0].Value = true;
} 
```

使用您的**列名：**

```
for (int i = 0; i < dataGridView1.Rows.Count -1; i++)
{
   dataGridView1.Rows[i].Cells["Export"].Value = true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T07:19:31.217

尝试这样做：

```
foreach (DataGridViewRow row in dgv.Rows)     
{
    row.Cells[CheckBoxColumn.Name].Value = true;     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T09:36:47.423

确保在设置 DataGridViewCheckBoxCells 的值时显示 DataGridView：我在 TabControl 的第二个选项卡中有我的，并且单元格在初始化后始终未选中。为了解决这个问题，我不得不将单元格初始化移动到 TabControl 的 SelectedIndexChanged 事件。

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (this.tabControl1.SelectedIndex == 1)
    {
        foreach (DataGridViewRow row in this.myGridView.Rows)
        {
            ((DataGridViewCheckBoxCell)row.Cells[0]).Value = true;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T17:22:40.347

if ((bool)this.dataGridView2.Rows[i].Cells[0].FormattedValue == true)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T11:20:51.643

您可以使用数据表并在 datagridview 中创建列，然后添加行，为每行提供第一列值为“True”或“False”。

尝试这个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-14T14:01:37.057

在加载网格中的值期间或之后，为了检查网格中的值，请使用此代码并设置网格列的属性

```
foreach (DataGridViewRow row in dataGridView.Rows)
{
    row.Cells[0].Value = 1;
} 
```

[![在此处输入图像描述](../Images/9f496b2ac93575ce635dee4d1883b810.png)](https://i.stack.imgur.com/RMqQf.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-14T22:42:40.273

查看 .xsd 文件中表格格式的属性：

[![表格行属性](../Images/59fe792b855c97bee2f4ddf1d922ef24.png)](https://i.stack.imgur.com/tYDsn.png)

然后确保将默认值设置为合理的值：

[![设置默认数据列属性值](../Images/a29d31adc83bbfb4b382f62301bf755c.png)](https://i.stack.imgur.com/PHxKS.png)

然后它将自动将默认值设置为绑定源。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-09T16:31:25.217

一个简单的方法是使用`NewRowIndex`如下所示的属性：

```
dvgInvoiceItems.Rows[dvgInvoiceItems.NewRowIndex-1].Cells[5].Value = true;
dvgInvoiceItems.Rows[dvgInvoiceItems.NewRowIndex-1].Cells[6].Value = true; 
```

# c# - 是否可以仅从深度位图中提取玩家的深度像素？

> ID：13796301
> 
> 赞同：2
> 
> 时间：2012-12-10T06:52:11.053
> 
> 标签：c#, kinect, pixel, depth

我是 kinect 开发的新手，也是 stackoverflow 的新手！这是我的情况：

有了深度相机，我可以轻松获取深度数据。我想要做的是一旦我检测到相机前面存在一个人（玩家），***我将只提取玩家的深度像素，并将其放在透明背景上，以便输出为静态图像仅播放器的深度图像，在透明背景上。***

我想问***有没有可能做这份工作***？我做了一些研究，发现一些函数可能有助于这样做，例如 SkeletonToDepthImage() 或深度像素数据（包括距离和玩家索引）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:17:59.913

我假设您的意思是要根据深度数据渲染玩家的轮廓，只显示他们的轮廓。那是对的吗？

[Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)提供了多个执行此操作的示例。“绿屏”示例向您展示如何提取深度数据并将其映射到颜色流以仅在所选背景上显示播放器。“基本交互”示例有一个剪影示例，它完全符合我的解释你想要的。

查看 Microsoft 提供的示例，以更好地了解 Kinect 的许多基本使用场景。

基于 Basic Interactions 项目中的剪影示例，我编写了一个剪影控件。控件的核心由以下两个函数（即实际产生轮廓的函数）组成。

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame != null && skeletonFrame.SkeletonArrayLength > 0)
        {
            if (_skeletons == null || _skeletons.Length != skeletonFrame.SkeletonArrayLength)
            {
                _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
            }

            skeletonFrame.CopySkeletonDataTo(_skeletons);

            // grab the tracked skeleton and set the playerIndex for use pulling
            // the depth data out for the silhouette.
            // TODO: this assumes only a single tracked skeleton, we want to find the
            // closest person out of the tracked skeletons (see above).
            this.playerIndex = -1;
            for (int i = 0; i < _skeletons.Length; i++)
            {
                if (_skeletons[i].TrackingState != SkeletonTrackingState.NotTracked)
                {
                    this.playerIndex = i+1;
                }
            }
        }
    }
}

private void OnDepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
{
    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (depthFrame != null)
        {
            // check if the format has changed.
            bool haveNewFormat = this.lastImageFormat != depthFrame.Format;

            if (haveNewFormat)
            {
                this.pixelData = new short[depthFrame.PixelDataLength];
                this.depthFrame32 = new byte[depthFrame.Width * depthFrame.Height * Bgra32BytesPerPixel];
                this.convertedDepthBits = new byte[this.depthFrame32.Length];
            }

            depthFrame.CopyPixelDataTo(this.pixelData);

            for (int i16 = 0, i32 = 0; i16 < pixelData.Length && i32 < depthFrame32.Length; i16++, i32 += 4)
            {
                int player = pixelData[i16] & DepthImageFrame.PlayerIndexBitmask;
                if (player == this.playerIndex)
                {
                    convertedDepthBits[i32 + RedIndex] = 0x44;
                    convertedDepthBits[i32 + GreenIndex] = 0x23;
                    convertedDepthBits[i32 + BlueIndex] = 0x59;
                    convertedDepthBits[i32 + 3] = 0x66;
                }
                else if (player > 0)
                {
                    convertedDepthBits[i32 + RedIndex] = 0xBC;
                    convertedDepthBits[i32 + GreenIndex] = 0xBE;
                    convertedDepthBits[i32 + BlueIndex] = 0xC0;
                    convertedDepthBits[i32 + 3] = 0x66;
                }
                else
                {
                    convertedDepthBits[i32 + RedIndex] = 0x0;
                    convertedDepthBits[i32 + GreenIndex] = 0x0;
                    convertedDepthBits[i32 + BlueIndex] = 0x0;
                    convertedDepthBits[i32 + 3] = 0x0;
                }
            }

            if (silhouette == null || haveNewFormat)
            {
                silhouette = new WriteableBitmap(
                    depthFrame.Width,
                    depthFrame.Height,
                    96,
                    96,
                    PixelFormats.Bgra32,
                    null);

                SilhouetteImage.Source = silhouette;
            }

            silhouette.WritePixels(
                new Int32Rect(0, 0, depthFrame.Width, depthFrame.Height),
                convertedDepthBits,
                depthFrame.Width * Bgra32BytesPerPixel,
                0);

            Silhouette = silhouette;

            this.lastImageFormat = depthFrame.Format;
        }
    }
} 
```

# facebook - 适用于 Facebook 的 SugarCRM 连接器

> ID：13796302
> 
> 赞同：-6
> 
> 时间：2012-12-10T06:52:11.443
> 
> 标签：facebook, sugarcrm, connector

我是 Sugar CRM 的新手，我想为社区版开发 Facebook 连接器。我无法为此获得任何示例代码。如果有人知道，请指导我开发这个连接器。

谢谢纳文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:44:47.417

您是否查看过其他各种可用的连接...

[http://www.sugarforge.org/search/?type_of_search=soft&words=facebook&Search=Search](http://www.sugarforge.org/search/?type_of_search=soft&words=facebook&Search=Search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T17:26:17.200

SugarCRM 文档有一个关于连接器实施的示例

[http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.7/02_Application_Framework/Connectors/Examples/Creating_A_Custom_Connector](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.7/02_Application_Framework/Connectors/Examples/Creating_A_Custom_Connector)

当然，您可以在 GitHub 中搜索连接器，我可以在其中找到一些有用的项目，例如

[https://github.com/eggsurplus/Freshbooks](https://github.com/eggsurplus/Freshbooks)

或者

[https://github.com/eggsurplus/DropboxPidgin](https://github.com/eggsurplus/DropboxPidgin)

# android - 在 Android 中使用 Phonegap 使用 AsyncTask 上传多个图像

> ID：13796306
> 
> 赞同：1
> 
> 时间：2012-12-10T06:52:48.737
> 
> 标签：android, cordova, file-upload

我在使用 Android 3.x 及更高版本上传多个图像时遇到了这个问题。我的应用程序是混合的，它不是纯 Android。我必须使用 Phonegap 界面进行 Android 编码。所以这是我使用 AsyncTask 编写的代码。在 Android 2.3 上也可以正常工作，但在 Android 3.x 及更高版本上不工作。我正在分享我的代码。

```
public class CFileUploader extends Plugin {
    private String ACTION_POST_DATA = "cpost_data";
    private String CrLf = "\r\n";
    String base64Str=null;

    @Override
    public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
        Log.e("Sample App", " IN EXECUTE METHOD ");

        PluginResult pluginResult = null;
        if (ACTION_POST_DATA.equals(arg0)) {
            try {
                upload(arg1.getString(0), arg1.getString(1), arg1.getString(2),
                        arg1.getString(3), arg1.getString(4));

            } catch (JSONException jsonex) {
                jsonex.printStackTrace();
            }
        }
        return pluginResult;
    }

    private PluginResult upload(String token, String date, String time,
            String email, String fileNames) {
        Log.e("Sample App", " IN UPLOAD METHOD ");
        PluginResult pluginres = null;

        final Data obje=new Data(token, date, time, email, fileNames);

        CFileUploader.this.ctx.runOnUiThread(new Runnable(){
            public void run(){
                MyImageTask mTask=new MyImageTask();
                mTask.execute(obje);
            }
        });

        return pluginres;
    }

    class Data {
        String token, date, time, email, fileNames;
        Data(String token, String date, String time, String email, String fileNames){
            this.token=token;
            this.date=date;
            this.time=time;
            this.email=email;
            this.fileNames=fileNames;
        }

    }

    private class MyImageTask extends AsyncTask<Data, String, String>{

        @Override
        protected String doInBackground(Data... params) {               
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            ByteArrayOutputStream baos = null;
            byte[] imgData = null;
            String urlString = "https://www.sampledata.com/myapp/upload_snapshots.php";

            Log.e("Sample App", " token " + params[0].token + " " + "date " + params[0].date + " "
                    + " time " + params[0].time + " " + "email " + params[0].email);
            Log.e("Sample App", " imgPath " + params[0].fileNames);

            try {
                URL url = new URL(urlString);
                conn = (HttpURLConnection) url.openConnection();
                conn.setDoInput(true);
                conn.setDoOutput(true);
                conn.setUseCaches(false);
                conn.setRequestMethod("POST");
                conn.setRequestProperty("Connection", "Keep-Alive");
                conn.setRequestProperty("Content-Type",
                        "multipart/form-data;boundary=---------------------------1177141514664");

                String msg = "";
                StringBuffer buffer = new StringBuffer(msg);
                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"token\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append(params[0].token + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"date\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append(params[0].date + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"time\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append(params[0].time + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"MAX_FILE_SIZE\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append("100000000072000" + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"email\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append(params[0].email + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"appkey\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append("426C3A7D5992B838BAF1BD10594C920C" + CrLf);

                buffer.append("-----------------------------1177141514664");
                buffer.append(CrLf);
                buffer.append("Content-Disposition: form-data; name=\"method\";"
                        + CrLf);
                buffer.append(CrLf);
                buffer.append("upload.snapshots" + CrLf);

                String msg1 = "";
                StringBuffer imgBuffer = new StringBuffer(msg1);
                List<byte[]> byetsInfo = new ArrayList<byte[]>();
                ArrayList<String> filenames = new ArrayList<String>();
                try {
                    JSONObject jObj = new JSONObject(new String(params[0].fileNames));
                    JSONArray jArray = jObj.getJSONArray("snapshot_images");
                    String drPath = android.os.Environment
                            .getExternalStorageDirectory().toString();

                    for (int i = 0; i < jArray.length(); i++) {
                        String img = jArray.getString(i);
                        Log.e("Sample app", " imageName " + img);

                        File f = new File(drPath + "/myapp_images/" + img);
                        Uri ur = Uri.fromFile(f);
                        filenames.add(img);
                        Bitmap bmp;
                        try {
                            bmp = Media.getBitmap(CFileUploader.this.cordova
                                    .getActivity().getContentResolver(), ur);
                            baos = new ByteArrayOutputStream();
                            bmp.compress(CompressFormat.JPEG, 90, baos);

                            imgData = baos.toByteArray();
                            Log.e("Sample app", " img data size " + imgData.length);

                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        byetsInfo.add(imgData);

                    }

                } catch (JSONException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                String msg3 = "";
                StringBuffer eofBuffer = new StringBuffer(msg3);
                eofBuffer.append(CrLf);
                eofBuffer.append("-----------------------------4664151417711--");
                eofBuffer.append(CrLf);

                conn.setChunkedStreamingMode(0);

                for (int i = 0; i < byetsInfo.size(); i++) {
                    dos = new DataOutputStream(conn.getOutputStream());

                    imgBuffer.delete(0, imgBuffer.length());
                    imgBuffer.append("-----------------------------4664151417711");
                    imgBuffer.append(CrLf);
                    imgBuffer.append("Content-Disposition: form-data; name=\"snapshotUpload[]\"; filename=\""
                            + filenames.get(i) + "\"" + CrLf);
                    imgBuffer.append("Content-Type: image/jpeg" + CrLf);
                    imgBuffer.append(CrLf);

                    dos.write(buffer.toString().getBytes());
                    dos.write(imgBuffer.toString().getBytes());

                    int index = 0;
                    int size = 1024;
                    do {

                        if ((index + size) < byetsInfo.get(i).length) {
                            size = byetsInfo.get(i).length - index;
                        }
                        dos.write(byetsInfo.get(i), index, size);
                        index += size;
                    } while (index < byetsInfo.get(i).length);
                    Log.e("file upload ", " written: " + index);

                    dos.write(eofBuffer.toString().getBytes());

                }

                Log.e("Debug", "File is written");
                Log.e("activity upload demo ",
                        " in file upload " + conn.getResponseMessage());
                dos.flush();

            } catch (Exception ec) {
                ec.printStackTrace();
            }

            // Read the response
            try {
                inStream = new DataInputStream(conn.getInputStream());
                char buff = 512;
                int len;
                byte[] data = new byte[buff];
                do {
                    len = inStream.read(data);
                    if (len > 0) {
                        System.out.println(new String(data, 0, len));
                        base64Str += new String(data, 0, len);
                        Log.e("Sample app", "  " + new String(data, 0, len));
                    }
                } while (len > 0);
                Log.e("file upload ", " DONE ");

                dos.close();
                inStream.close();

            } catch (Exception ex) {
                ex.printStackTrace();
            }

            try {
                if (conn.getResponseMessage().equalsIgnoreCase("OK")) {
                    return base64Str;
                } else {
                    return null;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
        }

    }

} 
```

我将从 js 文件中获取的令牌、日期、时间、电子邮件和文件名。

我应该得到一个base64字符串：

```
Submitted Requests: 
requests={"imageInfo":{"snapshotDateTime":"2012-12-09 22:38:14","snapshots":{"name":["Water lilies.jpg","Sunset.jpg"],"type":["image\/jpeg","image\/jpeg"],"tmp_name":["\/tmp\/phpXmZchs","\/tmp\/phpqylUgX"],"error":[0,0],"size":[83794,71189]}}} 
```

当我在 android 3.x 及更高版本中运行此代码时，我没有得到它们中的任何一个。

请纠正我，如果我在某个地方出错了。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:39:48.790

谁回答了非常感谢。经过几天的努力，我终于找到了解决方案，它只是一行代码就搞得一团糟。

```
conn.setChunkedStreamingMode(0); 
```

我已经删除了上面的行，无论版本如何，它都可以在所有设备上正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:30:15.480

我猜您正在尝试为多个上传启动多个 AsyncTasks。您假设每个任务都会创建一个不同的线程，这对于蜂窝前版本是正确的，但在蜂窝和以后的版本中，AsyncTask 的行为发生了变化，并且 Asynctask 的所有实例都运行在一个线程中。看看这个方法真正的并行执行

[executeOnExecutor(java.util.concurrent.Executor, Object[]) 与 THREAD_POOL_EXECUTOR。](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,+Params...%29)

# android - 如何以超级用户身份在 Android 中启动 GPS？

> ID：13796314
> 
> 赞同：2
> 
> 时间：2012-12-10T06:53:27.487
> 
> 标签：android, gps, root

我正在创建一个可以从任何其他手机获取 GPS 位置的 Android 应用程序，但问题是如何以超级用户或 linux 命令启动 GPS 来执行此操作。

# python - 仅在 matplotlib 中的大陆上绘制

> ID：13796315
> 
> 赞同：12
> 
> 时间：2012-12-10T06:53:31.677
> 
> 标签：python, map, matplotlib, matplotlib-basemap

我正在使用 matplotlib 中的底图绘制地图。数据遍布全球，但我只想把大陆上的数据全部保留下来，丢到海里。有没有办法可以过滤数据，或者有没有办法再次绘制海洋来覆盖数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T07:43:14.447

matplotlib.basemap 中有方法： `is_land(xpt, ypt)`

`True`如果给定的 x,y 点（在投影坐标中）在陆地上，则返回，`False`否则返回。土地的定义基于与类实例关联的 GSHHS 海岸线多边形。陆地区域内湖泊上方的点不计为陆地点。

有关详细信息，请参阅[此处](http://matplotlib.org/basemap/api/basemap_api.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T00:37:41.073

`is_land()`将循环所有多边形以检查它是否着陆。对于大数据量，它非常慢。您可以使用`points_inside_poly()`matplotlib 快速检查点数组。这是代码。它不检查`lakepolygons`，如果你想删除湖中的点，你可以添加你自己。

在我的电脑上检查 100000 个点需要 2.7 秒。如果您想要更快的速度，您可以将多边形转换为位图，但这样做有点困难。请告诉我以下代码是否对您的数据集不够快。

```
from mpl_toolkits.basemap import Basemap
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.nxutils as nx

def points_in_polys(points, polys):
    result = []
    for poly in polys:
        mask = nx.points_inside_poly(points, poly)
        result.extend(points[mask])
        points = points[~mask]
    return np.array(result)

points = np.random.randint(0, 90, size=(100000, 2))
m = Basemap(projection='moll',lon_0=0,resolution='c')
m.drawcoastlines()
m.fillcontinents(color='coral',lake_color='aqua')
x, y = m(points[:,0], points[:,1])
loc = np.c_[x, y]
polys = [p.boundary for p in m.landpolygons]
land_loc = points_in_polys(loc, polys)
m.plot(land_loc[:, 0], land_loc[:, 1],'ro')
plt.show() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-06T12:44:26.620

HYRY 的答案不适用于新版本的 matplotlib（不推荐使用 nxutils）。我制作了一个有效的新版本：

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from matplotlib.path import Path
import numpy as np

map = Basemap(projection='cyl', resolution='c')

lons = [0., 0., 16., 76.]
lats = [0., 41., 19., 51.]

x, y = map(lons, lats)

locations = np.c_[x, y]

polygons = [Path(p.boundary) for p in map.landpolygons]

result = np.zeros(len(locations), dtype=bool) 

for polygon in polygons:

    result += np.array(polygon.contains_points(locations))

print result 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-05T05:19:30.613

最简单的方法是使用底图的[maskoceans](http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.maskoceans)。

如果对于每个 lat, lon 你有一个数据并且你想使用轮廓：在 meshgrid 和插值之后：

```
from scipy.interpolate import griddata as gd
from mpl_toolkits.basemap import Basemap, cm, maskoceans
xi, yi = np.meshgrid(xi, yi)
zi = gd((mlon, mlat),
            scores,
            (xi, yi),
            method=grid_interpolation_method)
#mask points on ocean
data = maskoceans(xi, yi, zi)
con = m.contourf(xi, yi, data, cmap=cm.GMT_red2green)
#note instead of zi we have data now. 
```

**更新（比 in_land 或 in_polygon 解决方案快得多）：**

如果对于每个 lat, lon 您没有任何数据，并且您只想将点分散在陆地上：

```
x, y = m(lons, lats)
samples = len(lons)
ocean = maskoceans(lons, lats, datain=np.arange(samples),
                   resolution='i')
ocean_samples = np.ma.count_masked(ocean)
print('{0} of {1} points in ocean'.format(ocean_samples, samples))
m.scatter(x[~ocean.mask], y[~ocean.mask], marker='.', color=colors[~ocean.mask], s=1)
m.drawcountries()
m.drawcoastlines(linewidth=0.7)
plt.savefig('a.png') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-05T15:36:23.627

我正在回答[这个问题](https://stackoverflow.com/q/48620803/2454357)，当我被告知最好在这里发布我的答案时。基本上，我的解决方案提取了用于绘制`Basemap`实例海岸线的多边形，并将这些多边形与地图的轮廓相结合，以生成`matplotlib.PathPatch`覆盖地图海洋区域的多边形。

如果数据是粗略的并且不需要数据的插值，这尤其有用。在这种情况下，使用`maskoceans`会产生非常粗糙的海岸线轮廓，看起来不太好。

这是我作为另一个问题的答案发布的相同示例：

```
from matplotlib import pyplot as plt
from mpl_toolkits import basemap as bm
from matplotlib import colors
import numpy as np
import numpy.ma as ma
from matplotlib.patches import Path, PathPatch

fig, ax = plt.subplots()

lon_0 = 319
lat_0 = 72

##some fake data
lons = np.linspace(lon_0-60,lon_0+60,10)
lats = np.linspace(lat_0-15,lat_0+15,5)
lon, lat = np.meshgrid(lons,lats)
TOPO = np.sin(np.pi*lon/180)*np.exp(lat/90)

m = bm.Basemap(resolution='i',projection='laea', width=1500000, height=2900000, lat_ts=60, lat_0=lat_0, lon_0=lon_0, ax = ax)
m.drawcoastlines(linewidth=0.5)

x,y = m(lon,lat)
pcol = ax.pcolormesh(x,y,TOPO)

##getting the limits of the map:
x0,x1 = ax.get_xlim()
y0,y1 = ax.get_ylim()
map_edges = np.array([[x0,y0],[x1,y0],[x1,y1],[x0,y1]])

##getting all polygons used to draw the coastlines of the map
polys = [p.boundary for p in m.landpolygons]

##combining with map edges
polys = [map_edges]+polys[:]

##creating a PathPatch
codes = [
    [Path.MOVETO] + [Path.LINETO for p in p[1:]]
    for p in polys
]
polys_lin = [v for p in polys for v in p]
codes_lin = [c for cs in codes for c in cs]
path = Path(polys_lin, codes_lin)
patch = PathPatch(path,facecolor='white', lw=0)

##masking the data:
ax.add_patch(patch)

plt.show() 
```

这将产生以下图：

[![在此处输入图像描述](../Images/f2898db68822489c3cfa0d32358b0afc.png)](https://i.stack.imgur.com/kt5U0.png)

希望这对某人有帮助:)

# php - 需要用户从opencart中的url登陆计费页面，需要已经加载的购物车

> ID：13796317
> 
> 赞同：1
> 
> 时间：2012-12-10T06:53:31.770
> 
> 标签：php, opencart

我想通过超链接将用户从邮件中重定向到 opencart 上的计费页面 保持产品价值已上传到购物车中。我不想显示购物车，而是希望用户看到帐单，填写表格并结帐。我曾考虑在购物车中创建产品并将用户重定向到其计费页面，但如果我使用该产品的计费页面，则当从外部链接使用时，COOKIE 值将过期..

有没有办法让客户直接进入计费页面，保持产品已经加载到购物车中？（我只有一种产品。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:02:50.937

我可以考虑对结帐控制器进行小修改。

假设您的时事通讯中会有这样的链接：

```
http://your.eshop.com/index.php?route=checkout/checkout&add_product=1&product_id=10&pieces=1 
```

然后立即在文件的开头`catalog/controller/checkout/checkout.php`（在`if ((!$this->cart->hasProducts() ...`您必须检查是否存在之前，如果有`if(isset($this->request->get['add_product']) && $this->request->get['add_product'])`，请执行`$this->cart->add($this->request->get['product_id'], $this->request->get['pieces']);`

整个代码可能如下所示：

```
public function index() {
    if(isset($this->request->get['add_product']) && $this->request->get['add_product']) {
        $this->cart->add($this->request->get['product_id'], $this->request->get['pieces']);
    } // END OF MODIFICATION, the next code is already in checkout.php controller

    // Validate cart has products and has stock.
    if ((!$this->cart->hasProducts() && empty($this->session->data['vouchers'])) || (!$this->cart->hasStock() && !$this->config->get('config_stock_checkout'))) {
        $this->redirect($this->url->link('checkout/cart'));
    } 
```

如果您希望让用户购买不止一种产品，链接应如下所示

```
http://your.eshop.com/index.php?route=checkout/checkout&add_product=1&product_id[]=10&pieces[]=1&product_id[]=45&pieces[]=2&product_id[]=37&pieces[]=1 
```

现在代码应该如下所示：

```
if(isset($this->request->get['add_product']) && $this->request->get['add_product']) {
    foreach($this->request->get['product_id'] as $i => $product_id) {
        $this->cart->add($product_id, $this->request->get['pieces'][$i]);
    }
} // END OF MODIFICATION 
```

这段代码会做什么？在点击链接并在浏览器上打开后，代码会将所需的产品添加到购物车中，并且会像往常一样继续进行，因此该过程将与用户转到产品详细信息页面一样，单击“购买”按钮，然后单击您的 eshop 中某处的“结帐”链接。

# xml-parsing - 如何从openerp中的xml设置树视图中文本框的高度？

> ID：13796329
> 
> 赞同：1
> 
> 时间：2012-12-10T06:54:36.987
> 
> 标签：xml-parsing, openerp

```
 <record id="view_tr_mail_template_tree" model="ir.ui.view">
        <field name="name">view_tr_mail_template_tree</field>
        <field name="model">tr.mail.template</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">    
            <tree string="Mail template">
                 <field name="category" select="1" />    
                 <field name="tr_lang" select="1" />
                 <field name="mail_desc" height="250"/>         
            </tree>
        </field>
  </record> 
```

上面的代码显示了树视图。我的要求是，如果我在表单视图中显示 50 到 80 行的文本，则在树视图中将整个文本连接到 3 或 4 行并显示。在树视图中给出 height="250" 不起作用.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T09:09:53.297

我知道这是一个老问题，但如果有人在寻找答案：这就是你必须做的。

**步骤 1.**在模块的根目录中创建目录结构`static/src/css`，并在该目录中创建一个新的 css 文件（例如。`my_styles.css`）

**步骤 2.**在 css 文件中创建以下样式定义：

```
.text_high {
    height: 250px;
}

.text_high textarea {
    height: 100%;
} 
```

..并根据您的需要调整高度。就我而言，我发现 45px 对我来说是完美的（~2 行）。

**第 3 步。**将其添加到您的`__openerp__.py`：

```
"css": ["static/src/css/my_styles.css"], 
```

**第 4 步**。将类属性添加到您的文本字段标签，如下所示：

```
<field name="mail_desc" class="text_high"/> 
```

**第 5 步。**更新您的模块，一切就绪。

# java - 为什么使用 getInstance

> ID：13796330
> 
> 赞同：3
> 
> 时间：2012-12-10T06:54:40.873
> 
> 标签：java, design-patterns

许多公开可用的 Java API 似乎用于`getInstance`生成和返回对象。我很好奇为什么会这样——为什么不直接使用默认/参数化构造函数呢？

是否有相关的设计模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T06:58:01.487

我建议阅读 Joshua Bloch 的“Effective Java”，第 1 项“考虑静态工厂方法而不是构造函数”。他领导了众多 Java 平台特性的设计和实现，他知道为什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T06:56:49.803

它与[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)相关联。

很多时候，还有[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)可以帮助您创建对象。

例如：`Boolean.parseBoolean("true");`

工厂方法的优点是它们比一系列构造函数更冗长且易于掌握。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T07:00:11.833

另一个例子（除了单例或多例模式）是如果你需要在构造函数中做一些通常不推荐的事情，比如注册一个监听器或启动一个线程：

```
class Whatever {

    private Whatever() {} //private constructor
    public Whatever getInstance() {
        Whatever w = new Whatever();
        startSomeThread();
        return w;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T07:01:10.667

是的....它与工厂模式和单例模式相关联。工厂模式用于将对象创建逻辑与业务逻辑分离，而单例模式用于在整个应用程序中仅维护对象的单个实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T12:31:00.003

为了省去您查找具体原因的麻烦...

这是工厂方法模式的一个例子。使用它的最常见原因是：

1.  如果构造太复杂而无法在构造函数中处理
2.  如果构造需要构造函数中不允许或不希望的操作
3.  将产品的类型（“接口”）与实际实现（“类”）分离。
4.  出于性能或架构原因，例如在构建时执行部分专业化
5.  为了清晰/可读性

这些原因之间有一些重叠。事实上，通常这四个都适用。部分专业化 (4) 几乎需要类型和实现的解耦 (3)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T13:09:32.310

“为什么不直接使用默认/参数化构造函数”，因为在您调用构造函数时，确保单例模式约束只有一个实例**已经为时已晚。**重点是控制对单个实例的访问并避免多个实例。唯一的方法是使用访问修饰符来防止构造函数被访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T11:35:04.937

正如已经说过的那样，提供简单/安全的解决方案是一些模式设计“要求”的问题。

**但是在动态实例化方面**你应该尽量避免使用“getInstance”（java.lang.Class.getInstance()'和'java.lang.Class.NewInstance()'），因为动态实例化比常规类调用或方法调用。

仅在必要时使用！

# java - Jar 嵌入式资源 NullPointerException

> ID：13796331
> 
> 赞同：-2
> 
> 时间：2012-12-10T06:54:40.963
> 
> 标签：java, netbeans, project, embedded-resource

我最初是从 Chillax 开始的，在临近截止日期遇到了这么多问题之后，我回到了我更熟悉的 IDE，NetBeans，我改变了我的方法，制作了一个更基本的“Asteroid”类游戏：

*   NBs 压缩文件：[http ://ge.tt/4T5tBFT/v/0?c](http://ge.tt/4T5tBFT/v/0?c)
*   文本： git clone git://gist.github.com/4248746.git
*   嵌入？：

在 NetBeans 中，我得到：

```
Exception in thread "main" java.lang.NullPointerException
at javax.swing.ImageIcon.<init>(ImageIcon.java:205)
at gayme.Craft.<init>(Craft.java:27)
at gayme.Board.<init>(Board.java:54)
at gayme.Gayme.<init>(Gayme.java:9)
at gayme.Gayme.main(Gayme.java:19)
Java Result: 1 
```

资料来源：（工艺 26 - 34）

```
 public Craft() {
    ImageIcon ii = new ImageIcon(this.getClass().getResource("craft.png"));
    image = ii.getImage();
    width = image.getWidth(null);
    height = image.getHeight(null);
    missiles = new ArrayList();
    visible = true;
    x = 40;
    y = 60;} 
```

（板 54）

```
 craft = new Craft(); 
```

（同性恋 9）

```
 add(new Board()); 
```

（盖米 19）

```
 new Gayme(); 
```

我有一些我真正需要解决的问题，而我睡眠不足的大脑在每一个问题上都出现了损失。随时为您喜欢的任何游戏提供帮助。非常感谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:04:28.977

有3种方法：

*   [类#getResourceAsStream（字符串名称）](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)
*   [类#getResource（字符串名称）](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)
*   [ToolKit#createImage(URL url)](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createImage%28java.net.URL%29)

关于使用位于其中的 Jar 文件和资源需要记住的一些事项：

*   JVM 区分大小写，因此文件和包名区分大小写。即主类位于*mypackage*我们现在无法使用如下路径提取它：*myPackAge*

*   任何句号 '.' 位于包名中的应替换为“/”

*   如果名称以“/”开头（“\u002f”），则资源的绝对名称是名称中“/”后面的部分。**资源名称在执行类时以/**开头，并且资源位于不同的包中。

让我们使用我首选的方法进行测试，`getResource(..)`该方法将返回我们资源的 URL：

我创建了一个包含 2 个包的项目：*org.test*和*my.resources*：

![在此处输入图像描述](../Images/ca9aaaad654063cee79dc232e2464d65.png)

如您所见，我的图像在*my.resources*中，而 Main 类`main(..)`在*org.test*中。

主.java：

```
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;

public class Main {

    public static final String RES_PATH = "/my/resources";//as you can see we add / to the begining of the name and replace all periods with /
    public static final String FILENAME = "Test.jpg";//the case sensitive file name

    /*
     * This is our method which will use getResource to extarct a BufferedImage
     */
    public BufferedImage extractImageWithResource(String name) throws Exception {

        BufferedImage img = ImageIO.read(this.getClass().getResource(name));

        if (img == null) {
            throw new Exception("Input==null");
        } else {
            return img;
        }
    }

    public static void main(String[] args) {
        try {
            BufferedImage img = new Main().extractImageWithResource(RES_PATH + "/" + FILENAME);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }
} 
```

如果您使用的名称`RES_PATH`或`FILENAME`没有对实际文件进行适当的更改，您将得到一个异常（只是向您展示我们必须对路径有多小心）

**更新：**

对于您的具体问题，您有：

```
ImageIcon ii = new ImageIcon(this.getClass().getResource("craft.png")); 
```

它应该是：

```
ImageIcon ii = new ImageIcon(this.getClass().getResource("/resources/craft.png")); 
```

和`Alien`其他类也需要更改。

# php - 从 PHP 中的字符串中获取特定值

> ID：13796334
> 
> 赞同：1
> 
> 时间：2012-12-10T06:54:50.277
> 
> 标签：php

我的字符串是：

```
$mystring = "https://maps.google.com/?ll=37.0625,-95.677068&spn=37.188995,86.572266&t=m&z=4"; 
```

现在我想要那些我从字符串中标记为粗体的值。如何使用 PHP 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:00:24.173

使用以下函数[parse_url](http://php.net/manual/en/function.parse-url.php)和[parse_str](http://php.net/manual/en/function.parse-str.php)。您可以执行以下操作

```
$url = "https://maps.google.com/?ll=**37.0625,-95.677068**&spn=**37.188995,86.572266**&t=m&z=4";
$parts = parse_url($url);

if(isset($parts['query'])) {
    parse_str(urldecode($parts['query']), $result);
    print_r($result)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:58:25.287

使用[explode](http://in1.php.net/manual/en/function.explode.php) 或[parse_url](http://in1.php.net/manual/en/function.parse-url.php)或[parse_str](http://in1.php.net/manual/en/function.parse-str.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:09:41.960

这里正则表达式将最有效地解析您所需的值。

```
$url = "https://maps.google.com/?ll=37.0625,-95.677068&spn=37.188995,86.572266&t=m&z=4";
$regex = "/[-]*\d+.\d*/";

preg_match_all($regex,$url,$out, PREG_PATTERN_ORDER);
// $out = array(1) { [0]=> array(4) { [0]=> string(7) "37.0625" [1]=> string(10) "-95.677068" [2]=> string(9) "37.188995" [3]=> string(9) "86.572266" } } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T06:58:01.497

您必须使用 $_GET['ll'] 和 $_GET['spn'] 分别获得 37.0625,-95.677068 和 37.188995,86.572266

# php - 如何使用 mysql 查找有效期

> ID：13796335
> 
> 赞同：2
> 
> 时间：2012-12-10T06:54:51.540
> 
> 标签：php, mysql, sql, database-design

我有一张产品表。产品可以出租。我有另一个表validity_periods。这是表的结构。

[http://sqlfiddle.com/#!2/c97e3](http://sqlfiddle.com/#!2/c97e3)

```
validity_periods

id  description
1   7 Days
2   14 Days
3   21 Days
4   1 Month
products

id              : 1
title           : Car
description     : None
validaity_id    : 1
category_id     : 1
rent_count      : 0
current_status  : available
start_date      : 0000-00-00 00:00:00
end_date        : 0000-00-00 00:00:00 
```

现在我正在做以下事情。

当用户创建此产品时，我会提供一个下拉列表来选择此产品的最长有效期。
下拉列表包含有效期。并用产品保存validity_id。
当有人租用这个产品时，我将 current_status 从可用更新为租用。
获取 id 查找当前日期并生成 start_date 和 end_date 并更新产品。
这里我需要两件事
首先：是否有一个简单的解决方案可以做很多工作，我只是做一些事情来生成 start_date 和 end_date？如果需要，我可以更改validity_periods 的架构。
第二：当我显示产品时，我会显示状态和剩余天数（产品将再次可供租用）。
那么我怎样才能完成这两个任务。

假设产品 Car 已被租用，现在

```
id              : 1
title           : Car
description     : None
validaity_id    : 1
category_id     : 1
rent_count      : 1
current_status  : rented
start_date      : 2012-12-10 01:30:00
end_date        : 2012-12-17 06:50:00 
```

现在我需要显示这些信息。

```
Item        : Car
Status      : Rented
Rent Count  : 1
Remaining   : 3 Days 23 Hours 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:44:08.913

`Products`最好在表格和表格之间建立多对多关系`Periods`。就像是：

**`Products`**：

*   `Id`,
*   `Name`,
*   `CategoryId`,
*   `Status`InRent，可用，不可用，...

**`Periods`**：

*   `Id`,
*   `StartDate`,
*   `EndDate`

**`ProductPeriods`**：

*   `Id`
*   `ProductId`
*   `PeriodId`
*   `PeriodStatus`（取消，结束，...）

这种设计将使您的查询更容易。例如，您可以获得现在租用的产品列表和租金计数，如下所示：

```
| PRODUCTNAME | STATUSNAME | RENTCOUNT |
----------------------------------------
|        Bike |     Rented |         1 |
|         Car |     Rented |         4 | 
```

但是，您可以获取每个产品的租用期限以及该租用的剩余日期时间。

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/0696e/4)

# jquery - 在 jQuery 语句中执行 URl 重定向

> ID：13796339
> 
> 赞同：1
> 
> 时间：2012-12-10T06:55:05.477
> 
> 标签：jquery, redirect

我有这个 jQuery 代码：

```
jQuery( document ).ready( function( $ ) {
$('#myform').submit( function() {

    if ($('#myform input').is(':checked')) {

    } else {
        //alert('Checkbox is not checked!!');
        window.location.replace("http://example.com/product-comparisons/?product-skus=0");

    }

 }); 
```

});

我想重定向到这个 URL：

[http://example.com/product-comparisons/?product-skus=0](http://example.com/product-comparisons/?product-skus=0)

如果用户单击没有任何选中项的复选框。

我根据这个建议尝试了上面的代码：[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

但这行不通。我将不胜感激任何意见和建议。谢谢！

更新：这是我的 HTML 代码/表单：

```
<form action="/product-comparison/" id="myform">
<ul>
<li>
<input type="checkbox" name="product-skus[]" value="1" id="mycheckbox">
<a href="http://example.com/product/translator/">Translator</a>100<img width="150" height="150" title="View product" style="" alt="View product" class="attachment-thumbnail" src="http://example.com/wp-content/uploads/2012/12/pic1-150x150.jpg"></li>
<li><input type="checkbox" name="product-skus[]" value="2" id="mycheckbox">
<a href="http://example.com/product/arrows/">Arrows</a>120<img width="150" height="150" title="View product" style="" alt="View product" class="attachment-thumbnail" src="http://example.com/wp-content/uploads/2012/12/pic2.jpg"></li></ul>

<input type="submit" value="Compare">

</form> 
```

但是我相信我的选择器是正确的，因为这个诊断代码（使用警报来确保 jQuery 漏斗到正确的逻辑）是完美的工作：

```
jQuery( document ).ready( function( $ ) {
$('#myform').submit( function() {

    if ($('#myform input').is(':checked')) {
        alert('Checkbox is checked, do nothing');
    } else {

        alert('Checkbox is not checked!!, do the redirects');

    }

 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:42:11.973

如果您提交表单，您将提交到另一个文件。这意味着为了到达另一个位置，您可以设置它并`document.location.replace`取消表单提交（`return false;`应该足够了）

或者您操纵表单的操作（目标网址）。积极的副作用是，输入到表单中的任何数据实际上都会在两种情况下提交（默认操作和备用操作）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T06:59:33.113

试试下面的。在重定向后添加一个 return false ：

jQuery(文档).ready(函数($){$('#myform').submit(函数(){

```
if ($('#myform input').is(':checked')) {

} else {
    //alert('Checkbox is not checked!!');
    window.location.replace("http://example.com/product-comparisons/?product-skus=0");
    return false; //Add this
} 
```

}); });

# c++ - 是地图 在 C++ 中可能吗？

> ID：13796360
> 
> 赞同：3
> 
> 时间：2012-12-10T06:57:33.703
> 
> 标签：c++, string, map

我正在尝试通过转换我用java编写的一些程序来学习C++。一种是加密程序，它接受文本输入并使其看起来像 DNA（AGCTGTGCT...）。我可以使用 4 个碱基的 256 个密码子加密 64 个字符。( "A" = "TGGC", "B" = "ATGC"...) 在 java 中，我做了一个`hashmap<String, String[]>`，其中密钥是要加密的字符，值是一个由 4 个字符串组成的数组，其中每个字符串是一个随机选择的密码子来替换加密字符。

在 C++ 中，我试图使用地图来做同样的事情，但它给出了一个我不明白的错误。这是我尝试制作密码子表的代码：

```
// iterate through the characters and select 4 codons from the list
for(int i = 0; i < 64; i++){
    codonTable[charList[i]][0] = originalCodonList[4 * i];
    codonTable[charList[i]][1] = originalCodonList[4 * i + 1];
    codonTable[charList[i]][2] = originalCodonList[4 * i + 2];
    codonTable[charList[i]][3] = originalCodonList[4 * i + 3];

    }
} 
```

`charList`是包含 64 个可编码字符（它们实际上是字符串）`originalCodonList`的数组，是包含 256 个密码子的字符串数组。我尝试了几种方法将 4 个密码子分配给地图中的字符串数组，但似乎没有任何效果。这会产生最少的错误垃圾邮件。这是我编译时的输出：

> 在 /usr/include/c++/4.6/map:61:0 包含的文件中，来自 Genencrypt.cpp:4：/usr/include/c++/4.6/bits/stl_map.h：在成员函数 'std::map< _Key, _Tp, _Compare, >_Alloc>::mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) >[with _Key = std::basic_string, _Tp = std::basic_string [4], _Compare = >std::less >, _Alloc = std::allocatorsstd::basic_string, std::basic_string [4]> >, std::map<_Key, _Tp, _Compare, >_Alloc>::mapped_type = std::basic_string [4], std::map<_Key, _Tp, _Compare, >_Alloc>::key_type = std::basic_string]': Genencrypt.cpp:63:25: 从这里 /usr/include/ 实例化c++/4.6/bits/stl_map.h:453:11: 错误：从'int'转换为非标量类型>'std::map, std::basic_string [4]>::mapped_type {aka >std::basic_string [4]}' 请求

当然，当我将它复制到谷歌时，谷歌告诉我它太长了。我不是 java 专家，而且我在 java 方面比在 c++ 方面要好得多。

TL;DR：我想`map<string, string[]>`用 C++ 做一个，有可能吗？怎么做？

编辑：这是我修复它的方法，我将 codonList 从更改`map<string. string[]>`为`map<string, vector<string> >`并使用此代码添加密码子

```
 for(int i = 0; i < 64; i++){
    codonTable[charList[i]].push_back(originalCodonList[4 * i]);
    codonTable[charList[i]].push_back(originalCodonList[4 * i + 1]);
    codonTable[charList[i]].push_back(originalCodonList[4 * i + 2]);
    codonTable[charList[i]].push_back(originalCodonList[4 * i + 3]);
    std::cout << "Working?" << std::endl;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T07:01:33.543

问题是您不能在标准库容器中使用 C 样式的数组，因为它们不满足某些要求，例如可分配和可复制构造。`std::array`但是，如果您在编译时知道数组的大小，则可以使用容器，否则`std::vector`：

```
#include <map>
#include <array>
#include <vector>

std::map<std::string, std::array<std::string, 4>> m_fixed;
std::map<std::string, std::vector<std::string>> m_dynamic; 
```

请注意，这`std::array`是 C++11 的一部分。如果您不支持 C++11，则可以使用标头中的 TR1 版本`std::tr1::array`或`<tr1/array>`Boost 库版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:05:55.667

在 C++ 中，您尝试完成的工作可以使用`std::map<std::string, std::vector<std::string> >`.

或者，由于您实际上只是将多个字符串值与单个字符串键相关联，因此您可以使用`std::multimap<std::string, std::string>`.

另请注意，如果您不关心能够按顺序遍历键，`std::unordered_multimap<std::string, std::string>`则可能更可取（您通常期望恒定的复杂性而不是对数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:22:48.740

你实际上正在寻找另一个班级。C++ 有`std::multimap<Key, Value>`. 与常规映射不同，`multimap`每个键允许多个值。在您的情况下，您可以为每个字符串键存储 4 个字符串值。

# 8051 - 8051 - 在 CJNE 之后 PSW 被设置为 0X80

> ID：13796361
> 
> 赞同：2
> 
> 时间：2012-12-10T06:57:38.727
> 
> 标签：8051

我对 8051 还很陌生，并且正在对其进行测试。CJNE 执行后，将 PSW 设置为 0x80。为什么这样做？下面是代码。我正在使用 EdSim51DI 模拟器。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:12:34.497

PSW 设置为 0x80，因为 CJNE 指令的第一个操作数小于第二个操作数。继续阅读以更好地理解原因。

* * *

程序状态字 (PSW) 包含反映当前 CPU 状态的状态位。PSW 中的最高有效位（位 7）是进位位 (C)。

> 操作：CJNE
> 功能：比较，如果不相等则跳转
> 语法：CJNE 操作数 1,操作数 2,reladdr

CJNE 指令比较操作数 1 和操作数 2 的值，*如果*它们*不*相等，则跳转到指定的相对地址。如果两个操作数相等，则程序流继续执行 CJNE 指令之后的指令。该指令还影响 PSW 中的进位标志。*如果操作*数 1 小于*操作数 2* ，则设置进位位 (C) ，否则清零。此功能允许您使用 CJNE 指令执行大于/小于测试以做出决策，如下例所示。

```
 ; The following code sample checks if the value in A is equal to, less
; than, or greater than 0x55\.  The NOP instructions can be replaced
; with code to handle each condition as desired.

            CJNE   A, #55h, CHK_LESS   ; If A is not 0x55, check 
            LJMP   EQUAL               ; A is 0x55, so jump to EQUAL code
CHK_LESS:   JC     IS_LESS             ; If carry is set, A is less than 0x55

IS_GREATER: NOP                        ; A is greater than 0x55
            LJMP   DONE

IS_LESS:    NOP                        ; A is less than 0x55
            LJMP   DONE

EQUAL:      NOP                        ; A is equal to 0x55

DONE:       NOP                        ; Done with the comparison 
```

# vim - 在 gvim 中浏览目录不适用于 7.3 版

> ID：13796368
> 
> 赞同：2
> 
> 时间：2012-12-10T06:58:09.617
> 
> 标签：vim, directory

我最近从 gvim 7.0 迁移到 7.3，并注意到我无法使用 gvim 浏览目录。

使用 gvim 7.0 ( `VIM - Vi IMproved 7.0 (2006 May 7, compiled Aug 4 2010 07:19:40)`)，如果我用 调用 gvim `gvim .`，我会在编辑器窗口中得到以下信息：

```
" ============================================================================
" Netrw Directory Listing                                        (netrw v125)
"   {{path hidden}}/stackoverflow/gvim_dir
"   Sorted by      name
"   Sort sequence: [\/]$,\.h$,\.c$,\.cpp$,*,\.o$,\.obj$,\.info$,\.swp$,\.bak$,\~$
"   Quick Help: <F1>:help  -:go up dir  D:delete  R:rename  s:sort-by  x:exec
" ============================================================================
../
bar
foo 
```

但是对于 gvim 7.3 ( `VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Nov 26 2012 08:32:39)` )，它是空白的。

由于我认为两个安装之间的某些设置必须不同，我尝试在互联网上搜索它，并偶然发现了这篇文章[Vim 食谱：浏览目录](http://vim.runpaint.org/other-uses-vim/browsing-directories/#note1)。我尝试使用那里给出的`Ex`（以及`ex`）命令，但它没有用。

从 gvim 7.0 和那篇文章中看到的目录列表，我想`netrw`我需要更改一个设置。我在 SO 上搜索了这个，但只发现这篇文章与[在 vim 中打开目录](https://stackoverflow.com/questions/5930636/opening-a-directory-in-vim)相关。从那里给出的答案中，我无法弄清楚如何启用它。

我还浏览了[Vim Tips Wiki](http://vim.wikia.com)，发现了一些有用的技巧，这些技巧解释了如何*使用*目录浏览，但找不到如何*启用*它。您能帮我确定在 gvim 中启用目录浏览所需的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:26:29.563

我记得最近对这个插件的修复。请尝试作者网站的最新（测试版）版本：[http ://www.drchip.org/astronaut/vim/index.html#NETRW](http://www.drchip.org/astronaut/vim/index.html#NETRW)

# android - C：如何在android中解析XML？

> ID：13796369
> 
> 赞同：6
> 
> 时间：2012-12-10T06:58:21.867
> 
> 标签：android, c, xml-parsing, android-ndk

我正在用 C 为我的应用程序创建一个库。我想在我的代码中解析一个 XML 文件。那么，我怎样才能在 C 中做到这一点？

我知道它的 java 实现，但是如何在我的 C 代码中解析 XML？

可以用于此目的的库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:41:57.687

我建议[Expat](http://expat.sourceforge.net/)，我用过很多项目，它使用起来非常简单，而且开销极小。它的代码库也相当稳定。

> > Expat 是一个用 C 编写的 XML 解析器库。它是一个面向流的解析器，应用程序在其中为解析器可能在 XML 文档中找到的内容（如开始标记）注册处理程序。

但是，对于提到的所有其他外部项目，您需要自己构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:14:53.093

我用过[http://www.minixml.org/](http://www.minixml.org/)所以我建议用这个。Minixml 非常简单，易于理解和使用。

因此，您可以下载 minixml 的整个代码并使用 Android 工具链或 android NDK 为 Android 交叉编译它。现在将该库链接到您的 jni 代码并在您的 c 代码中使用它的 API。

只是在 jni 代码中包含 3rd 方库的参考，请参见

[如何在 ndk 应用程序中链接任何库](https://stackoverflow.com/questions/10106965/how-to-link-any-libarary-in-ndk-application)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T07:05:32.453

您应该使用 c 库来解析 xml。这里有一些著名的图书馆链接..你可以检查

[http://www.jclark.com/xml/expat.html](http://www.jclark.com/xml/expat.html)

[http://www.xmlsoft.org/](http://www.xmlsoft.org/)

[http://tibleiz.net/asm-xml/benchmark.html](http://tibleiz.net/asm-xml/benchmark.html)

您可以找到许多其他库来解析 xml。但是，如果您有任何轻量级解析任务，那么您可以使用

[http://www.minixml.org/](http://www.minixml.org/)

# ant - 声纳测试和二进制属性，它们有什么作用？

> ID：13796370
> 
> 赞同：5
> 
> 时间：2012-12-10T06:58:22.960
> 
> 标签：ant, properties, sonarqube

在 Sonar 文档中有两个属性选项，`sonar.tests`和`sonar.binaries`。

```
# path to test source directories (optional)
sonar.tests=testDir1,testDir2

# path to project binaries (optional), for example directory of Java bytecode
sonar.binaries=binDir 
```

问题：

1.  如果`sonar.tests`和`sonar.binaries`被添加到我的 Ant 目标中，它们如何出现在 Sonar 中？如果我设置/不设置这些属性，Sonar 会有什么不同？

2.  应该`sonar.binaries`包含源二进制文件和测试二进制文件，还是只包含源？

3.  可以将 .jar 文件提供给这两个属性，而不是实际 .class 文件和/或 .java 文件的路径吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T08:28:02.290

答案：

1.  如果您不设置这 2 个属性，则不会有测试结果（“sonar.tests”），也不会被 Findbugs 或基于字节码的工具（“sonar.binaries”）检测到违规行为。

2.  “sonar.binaries”应该只包含编译源，而不是测试

3.  不，只有“sonar.libraries”可以（并且实际上必须）指向 JAR 文件。

# php - 收到退回的电子邮件。脚本中的错误

> ID：13796379
> 
> 赞同：2
> 
> 时间：2012-12-10T06:59:30.553
> 
> 标签：php, email, imap

我试图让退回的邮件检查邮件的正文，但由于某种原因，脚本什么也没做。

我检查了有关该主题的所有文档并搜索了解决方案，但找不到任何东西。

我相信你们中的一些人将能够发现我做错了什么。

这是代码的相关部分。

```
error_reporting( E_ALL ) ;

$POP3Box = imap_open( "{" . $Domain . ":110/pop3/novalidate-cert", $EmailBox, $EmailPass ) ;

if ( !$POP3Box ) :
  echo '<br /><div class="ErrorMessage"> Connection failed!<br /> Wrong Email address or Password! Please check and try again...</div><br /><br />' ;
  die ;
endif ;

$MessageQty = imap_num_msg( $POP3Box ) ;
echo 'Total messages in "' . $EmailBox . '" = ' . $MessageQty . '<br /><br />' ;
$MailNum = 1 ;
$MailOrder = 1 ;

while ( $MailNum <= $MessageQty ) {// GET MESSAGES
  $EmailBody = imap_fetchbody( $POP3Box, $MailNum, 1 ) ;

  if ( strrpos( $EmailBody, 'Undelivered Mail Returned to Sender' )) {
    imap_delete( $POP3Box, $MailNum ) ;
    $MailOrder++;
  }
  else {
    die ;
  }
  $MailNum++;
}

if ( $MailOrder > 1 )
  imap_expunge( $POP3Box ) ;

if ( $MailNum > 1 ) {
  echo 'No bounced messages found!<br />' ;
}
else {
  echo 'Empty mailbox!<br />' ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:37:59.160

我在脚本中发现了至少 3 个问题：

**这是一个错误：** `}`后丢失`...novalidate-cert"`

`$POP3Box = imap_open( "{" . $Domain . ":110/pop3/novalidate-cert", $EmailBox, $EmailPass );`

必须改为：

`$POP3Box = imap_open( "{" . $Domain . ":110/pop3/novalidate-cert"}, $EmailBox, $EmailPass );1`

**这是一个错误：**缺少关闭命令。在后面加上这个`expunge`：

`imap_close( $POP3Box );`

**这是一个建议：**在正文中搜索的字符串不能只是`Undelivered Mail Returned to Sender`.

有几条消息表示退回或退回的电子邮件。我建议更换这个：

`if ( strrpos($EmailBody, 'Undelivered Mail Returned to Sender')) {` 使用像这样的正则表达式：

`if ( preg_match( "([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)", $EmailBody, $BounceMatch )) {`

检测所有退回的邮件几乎是不可能的，但使用正则表达式，您将能够捕获接近 95% 的邮件，这非常好。

在我看来，你这样做的方式 - 检查消息的正文 - 是迄今为止更有效的方法。

希望这可以帮助。

# android - Android Viewpager 作为图片幻灯片库

> ID：13796382
> 
> 赞同：61
> 
> 时间：2012-12-10T06:59:42.880
> 
> 标签：android, actionbarsherlock, android-viewpager

我正在使用 Jake 的[ViewPageIndicator](http://viewpagerindicator.com/)并希望像滑动图库一样显示图像。我可以开始的任何参考链接。我已经实现了基本的viewpager，现在想实现如下的图像viewpaper

![在此处输入图像描述](../Images/73837b580e6e3357348f78970f42366e.png)

[是否可以使用ViewPageIndicator](http://viewpagerindicator.com/)来实现？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-12T05:09:32.577

在 Jake 的 ViewPageIndicator 中，他实现了 View pager 以显示一个字符串数组（即 `["this","is","a","text"]`），您将其从 YourAdapter.java（扩展 FragmentPagerAdapter）传递到 YourFragment.java，后者将 View 返回给 viewpager。

为了显示不同的内容，您只需更改传递的上下文类型。在这种情况下，您希望传递图像而不是文本，如下面的示例所示：

这是您设置 Viewpager 的方式：

```
public class PlaceDetailsFragment extends SherlockFragment {
    PlaceSlidesFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    public static final String TAG = "detailsFragment";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_place_details,
                container, false);

        mAdapter = new PlaceSlidesFragmentAdapter(getActivity()
                .getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        ((CirclePageIndicator) mIndicator).setSnap(true);

        mIndicator
                .setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        Toast.makeText(PlaceDetailsFragment.this.getActivity(),
                                "Changed to page " + position,
                                Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onPageScrolled(int position,
                            float positionOffset, int positionOffsetPixels) {
                    }

                    @Override
                    public void onPageScrollStateChanged(int state) {
                    }
                });
        return view;
    }

} 
```

your_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <com.viewpagerindicator.CirclePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip" />

</LinearLayout> 
```

你的适配器.java

```
public class PlaceSlidesFragmentAdapter extends FragmentPagerAdapter implements
        IconPagerAdapter {

    private int[] Images = new int[] { R.drawable.photo1, R.drawable.photo2,
            R.drawable.photo3, R.drawable.photo4

    };

    protected static final int[] ICONS = new int[] { R.drawable.marker,
            R.drawable.marker, R.drawable.marker, R.drawable.marker };

    private int mCount = Images.length;

    public PlaceSlidesFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return new PlaceSlideFragment(Images[position]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public int getIconResId(int index) {
        return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

你的片段.java

// 你需要从这里返回图像而不是文本。//

```
public final class PlaceSlideFragment extends Fragment {
    int imageResourceId;

    public PlaceSlideFragment(int i) {
        imageResourceId = i;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ImageView image = new ImageView(getActivity());
        image.setImageResource(imageResourceId);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams());

        layout.setGravity(Gravity.CENTER);
        layout.addView(image);

        return layout;
    }
} 
```

你应该从上面的代码中得到一个这样的视图寻呼机。 ![在此处输入图像描述](../Images/429b1d2e5bc931f610af7b35541aac42.png)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-06-18T10:49:15.940

我做了一个名为[AndroidImageSlider](https://github.com/daimajia/AndroidImageSlider)的库，你可以试试。

![在此处输入图像描述](../Images/1d9a36ede4c1d819d8450100ce4f7615.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-10T07:08:51.010

Image Viewer with ViewPager Implementation，查看这个项目[https://github.com/chiuki/android-swipe-image-viewer](https://github.com/chiuki/android-swipe-image-viewer)

另请参阅此讨论[使用 viewpager 滑动图像（不是布局）](https://stackoverflow.com/questions/11640327/swiping-images-not-layouts-with-viewpager)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T19:31:07.760

只需使用这个[https://gist.github.com/8cbe094bb7a783e37ad1](https://gist.github.com/8cbe094bb7a783e37ad1)使周围的页面可见，并使用[http://viewpagerindicator.com/](http://viewpagerindicator.com/)这个作为指标。太酷了，我正在用它来做画廊。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T07:06:18.263

呵呵..用Gallery来实现这个应该很容易，用ViewPager就难多了。但我仍然鼓励使用 ViewPager，因为 Gallery 确实有很多问题，并且自 android 4.2 以来已被弃用。

在 PagerAdapter 中有一个方法 getPageWidth() 来控制页面大小，但只有这样你才能达到你的目标。

尝试阅读以下 2 篇文章寻求帮助。

[多视图-viewpager-选项](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)

[浏览器容器](https://gist.github.com/8cbe094bb7a783e37ad1)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T07:13:00.327

你可以使用自定义画廊控制..检查这个[https://github.com/kilaka/ImageViewZoom](https://github.com/kilaka/ImageViewZoom) 使用来自这个的galleryTouch类..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-05T09:21:59.460

嗨，如果您正在寻找带有圆形指示器的简单 android 图像滑动，您可以从这里下载完整代码[http://javaant.com/viewpager-with-circle-indicator-in-android/#.VysQQRV96Hs](http://javaant.com/viewpager-with-circle-indicator-in-android/#.VysQQRV96Hs)。请查看现场演示，这将给出清晰的想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-23T09:57:48.920

```
enter code here   public Timer timer;
public TimerTask task;
public ImageView slidingimage;

private int[] IMAGE_IDS = {
        R.drawable.home_banner1, R.drawable.home_banner2, R.drawable.home_banner3
    };

enter code here   @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home_screen);

     final Handler mHandler = new Handler();

        // Create runnable for posting
        final Runnable mUpdateResults = new Runnable() {
            public void run() {

                AnimateandSlideShow();

            }
        };
        int delay = 2000; // delay for 1 sec.

        int period = 2000; // repeat every 4 sec.

        Timer timer = new Timer();

        timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {

             mHandler.post(mUpdateResults);

        }

        }, delay, period);

enter code here     private void AnimateandSlideShow() {

        slidingimage = (ImageView)findViewById(R.id.banner);
        slidingimage.setImageResource(IMAGE_IDS[currentimageindex%IMAGE_IDS.length]);

        currentimageindex++;

        Animation rotateimage = AnimationUtils.loadAnimation(this, R.anim.custom_anim);

          slidingimage.startAnimation(rotateimage);

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-02T12:05:25.710

一个很棒的 One Image 滑块：[https](https://github.com/daimajia/AndroidImageSlider) ://github.com/daimajia/AndroidImageSlider检查它

# sql-server-2008 - 如何在报告下载时显示一些数据

> ID：13796383
> 
> 赞同：0
> 
> 时间：2012-12-10T06:59:50.990
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services, reportingservices-2005

我必须在我的报告中制作我想要的标题，当有人在报告查看器中看到报告时，它不应该显示报告的标题，但是当我导出报告标题时应该出现在报告中。是否有可能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:06:51.537

如果您使用的是 SSRS 2008R2，则可以使用**Globals!RenderFormat.Name**方法来实现所需的输出。但是使用这种方法，你可以隐藏所有的表头控件，但是在报表预览中会出现报表表头的空白区域。

看看

[在 R2 中使用 RenderFormat 方法](http://www.bi-rootdata.com/2012/10/efficient-way-of-handling-excel.html)

# python - 报告实验室：ValueError：无效的颜色值' '

> ID：13796384
> 
> 赞同：2
> 
> 时间：2012-12-10T06:59:53.203
> 
> 标签：python, css, reportlab

我试图在针对我的 html 文件运行时使用 xhtml2pdf 从 html 生成 pdf，脚本在以下行中退出：

```
return toColor(value, default) # Calling the reportlab function
  File "/usr/local/lib/python2.7/site-packages/reportlab/lib/colors.py", line 850, in __call__
    raise ValueError('Invalid color value %r' % arg)
ValueError: Invalid color value '<css function: moz-linear-gradient(left, #ef6059, #fffd6c)>' 
```

任何想法 ？

# memory - com.opensymphony.xwork2 中的内存泄漏

> ID：13796389
> 
> 赞同：1
> 
> 时间：2012-12-10T07:00:23.297
> 
> 标签：memory, memory-leaks

试图检测应用程序中的内存泄漏。查看了tomcat日志。Tomcat 检测到泄漏来自`com.opensymphony.xwork2.*`api。

我只想知道这是否可能是崩溃的原因？

以下是声称泄漏的日志。

```
SEVERE: The web application [/openreports] created a ThreadLocal with key of type [com.opensymphony.xwork2.ActionContext.ActionContextThreadLocal] (value [com.opensymphony.xwork2.ActionContext$ActionContextThreadLocal@1bfdfa36]) and a value of type [com.opensymphony.xwork2.ActionContext] (value [com.opensymphony.xwork2.ActionContext@3f35fd95]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
SEVERE: The web application [/openreports] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@7edb7d08]) and a value of type [org.dom4j.DocumentFactory] (value [org.dom4j.DocumentFactory@7bedd948]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
SEVERE: The web application [/openreports] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@6d041bf8]) and a value of type [com.opensymphony.xwork2.inject.InternalContext[]] (value [[Lcom.opensymphony.xwork2.inject.InternalContext;@3c544588]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 
```

# jquery - 使用 Ajax 调用填充数据表

> ID：13796393
> 
> 赞同：2
> 
> 时间：2012-12-10T07:00:59.877
> 
> 标签：jquery, ajax, jquery-datatables

我想使用 AJAX 调用将值显示到表中。用于它的代码是，

```
initTable();

function initTable (){
    return $('#exEmpListTable').dataTable({
        "bPaginate": false,
        "sScrollY": "200px",
        "bScrollCollapse": true
    });
}

function tableActions (){
    var oTable = initTable();
    // perform API operations with oTable
    oTable.fnSort( [ [1,'desc']] );
}

$("#btnShowExEmpList").click(function (e){
    var selectedShop = $('#Shop').val();
    if(selectedShop == null){
        alert(" Please select a shop first ");
        return false;
    }
    if(selectedShop != null){
        alert("==== Selected Shop ==== "+selectedShop);
        var $exEmpDialog = $("#Dialog").dialog({
            width :275,
            height: 400,
            resizable: false,
            position: ['top', 200],
            modal: true
        });
        $exEmpDialog.dialog('close');
        $.ajax({
            url : 'empReqCreateNewReq.do',
            data : { getExEmpList: true, SelectedShop : selectedShop, ajaxCall : true },
            method : 'GET',
            dataType : 'json',
            contentType: "application/json; charset=utf-8",
            success : function(data) {
                alert('success === ' +data.exemplist.length);
                alert("======== ELEMENTS ======== "+JSON.stringify(data));
                //rePopulateExEmpList(data);
                //data = JSON.stringify(data);
                $exEmpDialog.dialog('close');
                //$(this).dialog('close')
                var oTable = initTable();
                oTable = $("#exEmpListTable").dataTable();
                //oTable.fnClearTable(0);
                oTable.oData[data];
                oTable.fnDraw();
                $exEmpDialog.dialog('open');
            },
            error : function(xhr, status) {
                alert('Sorry, there was a problem while placing your ajax request. Contact Admin!');
            }
        });
    }
    //$("#Dialog").dialog();
}); 
```

运行此程序时，我可以看到警报机器人中的值。但在那之后，它会显示一条错误消息，

```
DataTables warning (table id = 'exEmpListTable'): Cannot reinitialise DataTable. 
```

要检索此表的 DataTables 对象，请不向 dataTable() 函数传递任何参数，或者将 bRetrieve 设置为 true。或者，要销毁旧表并创建新表，请将 bDestroy 设置为 true（请注意，可以通过 API 对配置进行很多更改，这通常会更快）。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-04T12:06:53.470

我遇到了同样的问题......我通过每次需要重新加载表时破坏表来解决。我调整了我的代码以与您的代码一起使用，因此将类似于：

```
$(document).ready(function(){
  var oTable;

  //reloading table when the button is clicked
  $('#btnShowExEmpList').click(function(){

    //if the table already exists, destroy it
    if (oTable){
      oTable.fnDestroy();
    }

    //initializing the table
    oTable = initTable();
  });

  //initializing the table automatically when the page loads
  $('#btnShowExEmpList').click();
}); 
```

而且我还认为，如果您为数据表设置一些选项（bServerSide、sAjaxSource、fnServerData 等），那么使用您的成功选项重新加载数据会更容易。

# android - 如何在 Android 应用程序中创建持久计数器变量？

> ID：13796400
> 
> 赞同：3
> 
> 时间：2012-12-10T07:01:52.197
> 
> 标签：android

我才刚开始。

每次我在模拟器上运行项目时，我都试图增加一个简单的计数器。

我认为添加一个`integer`类型`item`会`strings.xml`有所帮助，但这是最终的，无法修改。

基本上我只会在我的应用程序的第一个基本屏幕中显示：

`Started: N`其中 N 将是我第 N 次从 Eclipse 启动该项目。

如何制作这样一个在应用程序启动和退出时持续存在的计数器？

知道了：

```
 SharedPreferences pref = getPreferences(MODE_PRIVATE);
    int tempN=pref.getInt("N", 0);
    tempN++;
    SharedPreferences.Editor editor = pref.edit();
    editor.putInt("N",tempN);

    editor.commit();

    msgBox.setText("Started:"+tempN); 
```

我仍然不明白的一件事是，当我调用 时`pref.getInt("N",0)`，键值对是否会`<N,0>`自动创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:04:19.660

您可以为此使用共享偏好。您可以将整数存储在共享偏好中，并在需要时获取它的值。

试试这个。

```
SharedPreferences prefs = getSharedPreferences("Share", Context.MODE_PRIVATE );
Editor editor = prefs.edit();
editor.putInt("Value", 1 );
editor.commit(); 
```

获取价值

```
prefs.getInt("Value",0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T07:13:44.853

在您的主要活动 onCreate() 中：

```
SharedPreferences pref = this.getSharedPreferences();
int count = pref.getInt("your key", 0) //0 is default value.
count++;

SharedPreferences.Editor edit = pref.edit();
edit.putInt("your key", count);
edit.commit();
// display current count 
```

# asp.net-mvc-3 - 重定向 MVC 后绕过登录屏幕

> ID：13796408
> 
> 赞同：1
> 
> 时间：2012-12-10T07:02:50.610
> 
> 标签：asp.net-mvc-3, login

我现在遇到一个问题。我有 4 个网站，每个网站都有一个登录屏幕。

现在这里是用户可以登录这些网站之前的代码：

*   网站#1：用户名必须以`AB`
*   网站#2：用户名必须以`BB`
*   网站#3：用户名必须以`CB`
*   网站#4：用户名必须以`DB`

在每个网站，用户提供正确的用户名格式和相应的密码后，他将被重定向到帐户信息页面。

我现在要做的是处理这种情况：如果用户在`Website #1`，但他输入了以 开头的用户名`CB`，我希望他被重定向到网站#3的帐户信息页面，并绕过网站#的登录页面3.

我当前的实现正确重定向，但重定向到网站的登录页面。

即使只是关于如何做到这一点的合乎逻辑的解释，也将不胜感激。

# sql - SQL 服务器查询。在查询中转换数据？

> ID：13796411
> 
> 赞同：0
> 
> 时间：2012-12-10T07:03:02.127
> 
> 标签：sql, sql-server, reporting-services

请想象以下表格：

**发票**

```
|Invoice ID     | Invoice Date  |
---------------------------------
|1              | 01-11-12      |   
|2              | 01-11-12      | 
```

**服务**

```
|Service ID     | Service Date  | Invoice ID    | 
-------------------------------------------------
|1              | 01-11-12      | 1             |
|2              | 01-11-12      | 1             |
|3              | 02-11-12      | 1             |
|4              | 03-11-12      | 1             | 
```

我想像这样返回一个数据集：

```
|Invoice ID     | Invoice Date  | Service ID    | Transformed Service Date  | Real Service Date |
--------------------------------------------------------------------------------------------------------    
|1              | 01-11-12      | 1             | 01-11-12                  | 01-11-12      |
|1              | 01-11-12      | 2             | 01-11-12                  | 01-11-12      |
|1              | 01-11-12      | 3             | 01-11-12                  | 02-11-12      |
|1              | 01-11-12      | 4             | 01-11-12                  | 03-11-12      |
|1              | 01-11-12      | 1             | 02-11-12                  | 01-11-12      |
|1              | 01-11-12      | 2             | 02-11-12                  | 01-11-12      |
|1              | 01-11-12      | 3             | 02-11-12                  | 02-11-12      |
|1              | 01-11-12      | 4             | 02-11-12                  | 03-11-12      |
|1              | 01-11-12      | 1             | 03-11-12                  | 01-11-12      |
|1              | 01-11-12      | 2             | 03-11-12                  | 01-11-12      |
|1              | 01-11-12      | 3             | 03-11-12                  | 02-11-12      |
|1              | 01-11-12      | 4             | 03-11-12                  | 03-11-12      | 
```

请注意每个服务日期如何退回所有服务。我希望这是可能的。我正在使用此查询来帮助在 SQL Server 报告中进行分组。

感谢您的热心帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:18:59.430

```
DECLARE @Invoices TABLE (
[Invoice ID] INT,
[Invoice Date] DATE)

DECLARE @Services TABLE (
[Service ID] INT,
[Service Date] DATE,
[Invoice ID] INT)

INSERT INTO @Invoices VALUES
(1,'2012-11-01'),
(2,'2012-11-01')

INSERT INTO @Services VALUES
(1,'2012-11-01',1),
(2,'2012-11-01',1),
(3,'2012-11-02',1),
(4,'2012-11-03',1)

;WITH SERVICE_DATE_CTE
AS
(
    SELECT DISTINCT [Service Date] FROM @Services
)
SELECT 
    I.[Invoice ID],
    I.[Invoice Date],
    S.[Service ID],
    C.[Service Date] AS 'Transformed Service Date',
    S.[Service Date] AS 'Real Service Date'
FROM @Invoices I
INNER JOIN @Services S ON S.[Invoice ID] = I.[Invoice ID]
CROSS JOIN SERVICE_DATE_CTE C ORDER BY C.[Service Date] 
```

# c# - 验证是否允许在 c# 中的 datagridview 单元格中使用货币值，如 12.50

> ID：13796413
> 
> 赞同：0
> 
> 时间：2012-12-10T07:03:06.100
> 
> 标签：c#, datagridview

我正在使用 datagridview 控件。我想验证 dataGridView 以允许 datagridview 文本框单元格中的货币格式值，如`123.00,123.50`. 那应该取数值和一个 . 价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:37:44.533

由于您似乎想要实时验证用户输入，我认为最好和最有效的方法是创建一个自定义列类型来托管`MaskedtextBox`. [本文](http://www.codeproject.com/Articles/26005/DataGridViewColumn-Hosting-MaskedTextBox)展示了如何做到这一点。您可以在那里指定格式。请参阅[此](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)MSDN 帖子以了解有关遮罩元素的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:47:10.093

我过去使用的方法（也是我知道如何做的唯一方法）是创建从 DataGridViewTextBoxColumn 和 DataGridViewTextBoxCell 继承的类，并在创建网格时使用派生类而不是 DataGridViewTextBoxColumn 作为 ColumnType。

此[链接](http://vbcity.com/forums/t/152435.aspx)有一个如何在 VB 中执行此操作的示例。我无法发布我的 C# 代码，因为它是由我曾经工作过的公司开发的，但 VB 代码基本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:56:13.733

你需要

```
1\. There should be a decimal.
2\. Only 2 digits after decimal
3\. And there should be 2 such numbers separated by a comma(,) 
```

这是代码：- aspx 文件

```
<asp:TextBox ID="txtMoney" runat="server" Width="100px" />
<asp:RequiredFieldValidator ID="rfvMoney" ValidationGroup="Insert" runat="server"
ControlToValidate="txtEmail" ErrorMessage="Please Enter value for money" ToolTip="Please Enter valid value for money"
SetFocusOnError="true" ForeColor="Red">*</asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="reMoney" runat="server" ControlToValidate="txtMoney"
ErrorMessage="Please Enter a Valid value for Money" ToolTip="Please Enter a Valid Value for money"
SetFocusOnError="true" ForeColor="Red" ValidationExpression="\d+([.])\d\d([,])\d+([.])\d\d"
                            ValidationGroup="Insert">*</asp:RegularExpressionValidator> 
```

即 aspx.cs 文件后面的代码

```
if (e.CommandName.Equals("Insert"))
        {
            eInfo.money = ((TextBox)gvEG.FindControl("txtMoney")).Text;
            new mainSQL().insertEmployeeInfo(eInfo); //My cs file for insert values to table
            FillEmployeeGrid();
        } 
```

我已经在我的项目中尝试过这段代码，它工作正常。

这里的主要代码是正则表达式：

```
ValidationExpression="\d+([.])\d\d([,])\d+([.])\d\d" 
```

在哪里

```
\d- denotes 1 digit
\d+ - one or many digits
\d\d - denotes only 2 digits 
```

# asp.net - ASP.net 中的永久重定向

> ID：13796422
> 
> 赞同：2
> 
> 时间：2012-12-10T07:03:50.143
> 
> 标签：asp.net, url-redirection

我想重定向以下网址

[http://www.abc.com/preview.asp?type=content&id=237#logo](http://www.abc.com/preview.asp?type=content&id=237#logo)

至

[http://www.abc.com/preview.aspx#logo](http://www.abc.com/preview.aspx#logo)

关于重写规则的任何想法，例如：

```
<rule name="Home Document" stopProcessing="true">
                <match url="^visiting.aspx$"  />
                <conditions>
                    <add input="{QUERY_STRING}" pattern="^utm_source=invite%2B&amp;utm_medium=Email%2B&amp;utm_campaign=exhibitor$" />
                </conditions>
                <action type="Redirect" url="http://www.abc.com/visiting.aspx" appendQueryString="false"/>
            </rule> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:17:11.840

需要添加`redirectType="Permanent"`生成301状态码：

```
<rule name="Home Document" stopProcessing="true">
            <match url="^visiting.aspx$"  />
            <conditions>
                <add input="{QUERY_STRING}" pattern="^utm_source=invite%2B&amp;utm_medium=Email%2B&amp;utm_campaign=exhibitor$" />
            </conditions>
            <action type="Redirect" url="http://www.abc.com/visiting.aspx" appendQueryString="false" redirectType="Permanent"/>
 </rule> 
```

# android - facebook事件在android中创建

> ID：13796426
> 
> 赞同：1
> 
> 时间：2012-12-10T07:04:22.590
> 
> 标签：android, facebook-graph-api

以下是我为创建 facebook 事件所做的代码，但是此代码不起作用，没有编译或运行时错误。我已经编写了方法并在按钮单击事件上调用了该方法。

```
public class createEvent extends Activity implements OnClickListener

{
    private Button btnCreateEven;
    private TextView txteventName;
    private AsyncFacebookRunner mAsyncRunner;
    private String eventID="";
    private Facebook facebookatEventCreate;
    private String eventName = "";
    private SharedPreferences mPrefs;
    private static String appId = "392736034134808";

        @Override
        protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.create_event);
            //problem - unable to start activity when setListeners() is uncommented 
           initialize(); 
           setListeners();
        }

        private void initialize()
        {            
            //facebook = new Facebook(APP_ID);
            facebookatEventCreate = new Facebook(appId);
            mAsyncRunner = new AsyncFacebookRunner(facebookatEventCreate);
            btnCreateEven = (Button) findViewById(R.id.btn_createEvent);
            txteventName = (TextView)findViewById(R.id.txt_eventName);
        }

        private void setListeners()
        {

            btnCreateEven.setOnClickListener(this);

        }

        @Override
        public void onClick(View v)
        {
            switch (v.getId())
            {
                case R.id.btn_createEvent:
                    createEvents();
                default:
                    break;
            }

        }

        /**
         * Creates a new event.
         * 
         * 
         * 
         */

        private void createEvents()
        {
            try
            {                   

                Bundle params = new Bundle();
                params.putString("name", "test test test");
                params.putString("start_time", "2013-12-02T18:00:00+0530");
                params.putString("end_time", "2013-12-02T20:00:00+0530");
                params.putString("description", "This is test description 10/12/2012");
                params.putString("location", "Mount Lavinia");
                //params.putString("location_id", "");
                params.putString("privacy_type", "OPEN");
                params.putString("picture", "/sdcard/cmd.png");
                mAsyncRunner.request("me/events", params, "POST", new RequestListener()
                {

                    @Override
                    public void onMalformedURLException(MalformedURLException e, Object state)
                    {

                    }

                    @Override
                    public void onIOException(IOException e, Object state)
                    {

                    }

                    @Override
                    public void onFileNotFoundException(FileNotFoundException e, Object state)
                    {

                    }

                    @Override
                    public void onFacebookError(FacebookError e, Object state)
                    {

                    }

                    @Override
                    public void onComplete(String response, Object state)
                    {
                        try
                        {
                            JSONObject event = new JSONObject(response);
                            eventID = event.getString("id");
                            Log.d("createEvent:createEvent", "Event ID->" + eventID);

                           //Toast.makeText(getApplicationContext(), "New Event Created!!", Toast.LENGTH_LONG).show();
                        }
                        catch (Exception e)
                        {

                        }
                    }
                }, null);
            }
            catch (Exception e)
            {

            }
        }

} 
```

请告诉我这是什么原因，欢迎评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:02:00.910

我没有看到您在任何地方对用户进行身份验证。您可以在此处阅读有关如何执行此操作的信息：[Android 的 Facebook 身份验证](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)

如果您已经对用户进行了身份验证，则需要在创建新 Facebook 对象时保存身份验证令牌。您可以使用以下方法读取访问令牌：

```
facebookatEventCreate.setAccessToken(authToken);
facebookatEventCreate.setAccessExpires(unixTime); 
```

# ruby-on-rails - ruby 中的意外表达式评估

> ID：13796427
> 
> 赞同：3
> 
> 时间：2012-12-10T07:04:24.107
> 
> 标签：ruby-on-rails, ruby, expression

为什么这个表达式计算为 13 ？

我不小心评估了这个表达式`(1_2).next`而不是`(1+2).next`which o/p 4 结果。

```
=> (1_2).next
=> 13 
```

请让我知道这是怎么回事，因为我是 Ruby 新手

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T07:07:34.253

Ruby 允许你用来`_`分解长数字，例如

```
123456789 == 123_456_789 
```

但后者更容易阅读，所以你的代码是一样的`12.next`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T07:07:03.823

1_2 与 12 相同。12.next 为 13。数字中的下划线被忽略，您可以使用它们来提高可读性。例如，1000_000_000 是十亿。

# php - ImageMagick 和 gd 在一起

> ID：13796429
> 
> 赞同：1
> 
> 时间：2012-12-10T07:04:38.090
> 
> 标签：php, imagemagick, gd, cpanel

我有一堆现有的脚本用于使用 gd 库进行效果的站点。问题是当移动到启用了 imagemagick 的新服务器时，这些脚本会失败。有什么方法可以禁用 imagemagick 以使这些脚本正常工作？由于这是一个共享服务器，我没有命令行或 root 权限，我只有 Cpanel11。在此期间，我在想，我可以为这些特定文件禁用 imagemagick 吗？这样我就可以将编码迁移到 imagemagick 并获得更好的效果，而不会破坏现有的网站..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:12:19.483

在您的 cPanel 中，在**Software/Services**下，您会找到一个名为**PHP Config**的图标，单击它并查找**Additional extensions available for Installation**它是一个复选框列表，取消选中 Imagick。

# android - Android：tabhost中的共享首选项不起作用

> ID：13796441
> 
> 赞同：0
> 
> 时间：2012-12-10T07:05:28.820
> 
> 标签：android, button, onclick, android-tabhost, sharedpreferences

我有一个包含三个活动的 tabhost，我想保存每个活动的按钮的按下状态

那么现在如何保存所有三个子活动中每个按钮的按下状态，以便当我从一个活动移动到另一个活动时，按钮按下状态将反映在返回时。第一个活动->按下所有4个按钮->转到第二个活动->返回第一个活动->第一个活动中的所有按钮都应处于按下状态

当我转到第二个子选项卡并进入第一个子选项卡时，更改（我按下的按钮未处于按下状态）没有反映

总是感谢帮助，谢谢

这是我在第一个 tabhost 子活动中的代码

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    seatdirnbtn.setOnClickListener(listner1);
    seatdirnbtn1.setOnClickListener(listner2);
        seatdirnbtn.setPressed(true);
        seatdirnbtn1.setPressed(true);
        this.LoadPreferences();

       }

    private void SavePreferences() {

    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences("sharedPreferences",MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean("state", seatdirnbtn.isEnabled());
    editor.putBoolean("state1", seatdirnbtn1.isEnabled());
    editor.commit();

}

private void LoadPreferences() {
    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences("sharedPreferences",MODE_WORLD_READABLE);
    Boolean state = sharedPreferences.getBoolean("state", false);
    Boolean state1 = sharedPreferences.getBoolean("state1", false);
    seatdirnbtn.setPressed(state);
    seatdirnbtn1.setPressed(state1);
}

         @Override
     protected void onStart() {
    super.onStart();
        LoadPreferences();
        }

        @Override  
       protected void onPause() {
    SavePreferences();
    super.onPause();
      }

       public static boolean isclick = false;
private View.OnClickListener listner1 = new View.OnClickListener() {

    public void onClick(View v) {

        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);

        } else {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
        }

        isclick = !isclick;
    }

};

private View.OnClickListener listner2 = new View.OnClickListener() {

    public void onClick(View v) {

        if (isclick) {
            seatdirnbtn1.setBackgroundResource(R.drawable.icon2hlt);
        } else {
            seatdirnbtn1.setBackgroundResource(R.drawable.icon2);
        }

        isclick = !isclick;
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:32:00.580

可能您应该覆盖 onResume() 方法，您应该在其中设置按钮状态。此方法在 onCreate() 之后调用，甚至活动已经创建。如果您在 tabHost 中有活动，则每次在选项卡之间切换时都不会创建它们，因此 onCreate() 方法只会被调用一次，但每次切换到具有特定活动的选项卡时都会调用 onResume()。

您正在加载首选项的代码位于 onStart() 方法中。在这里查看[活动生命周期](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)。您可以看到，仅当您的活动之前停止时才会调用此方法，但如果它只是暂停则永远不会调用。

**编辑：**

如果您的代码中只有 2 个状态，那么使用通常也有 2 个状态的 ToggleButton 可能会更好。您可以为每个州设置不同的背景。[本教程可能会有所帮助](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)。

比你会有一点不同的监听器：

```
 toggleButton.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {

            if(checked) {
                //do sth if it's checked
            } else {
                //do sth if it's not checked;
            }

        }
    }); 
```

以编程方式更改它们的状态：

```
toggleButton.setChecked(true); //or false 
```

所以最后你可以将此状态保存到 SharedPreferences：

```
editor.putBoolean("toggleButton1",toggleButton.isChecked()); 
```

以及何时需要此状态：

```
boolean isChecked = sharedPreferences.getBoolean("toggleButton1",false);
toggleButton.setChecked(isChecked); 
```

选择器将负责为每个状态切换按钮背景。

# c# - 地铁的自定义项目控制：uniformgrid

> ID：13796442
> 
> 赞同：1
> 
> 时间：2012-12-10T07:05:31.513
> 
> 标签：c#, .net, wpf, microsoft-metro

我需要为地铁创建 UniformGrid 模拟。

我写了这个

```
public class UniformGrid : Panel
{
    public static readonly DependencyProperty HorizontalCountProperty =
        DependencyProperty.Register("HorizontalCount", typeof (int), typeof (UniformGrid),
                                    new PropertyMetadata(default(int)));

    public int HorizontalCount
    {
        get { return (int) GetValue(HorizontalCountProperty); }
        set { SetValue(HorizontalCountProperty, value); }
    }

    public static readonly DependencyProperty ElementsGapProperty =
        DependencyProperty.Register("ElementsGap", typeof (double), typeof (UniformGrid),
                                    new PropertyMetadata(default(double)));

    public double ElementsGap
    {
        get { return (double) GetValue(ElementsGapProperty); }
        set { SetValue(ElementsGapProperty, value); }
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        return new Size();
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if (Children != null && Children.Count != 0)
        {
            var squareSideForElement = (finalSize.Width - (HorizontalCount - 1)*ElementsGap)/HorizontalCount;
            var sizeOfElement = new Size(squareSideForElement, squareSideForElement);
            for (var i = 0; i < Children.Count; i++)
            {
                var rowIndex = i%HorizontalCount;
                var columnIndex = i/HorizontalCount;
                var resultPoint = new Point
                    {
                        X = rowIndex*(squareSideForElement + ElementsGap),
                        Y = columnIndex*(squareSideForElement + ElementsGap)
                    };
                Children[i].Arrange(new Rect(resultPoint, sizeOfElement));

            }

        }
        return finalSize;
    }
} 
```

但是在我明白我需要从 ItemsControl 派生的控制权之后，因为我需要 ItemTemplate、ItemsSource 等。

我做的

```
public class UniformGrid : ItemsControl
{
    public static readonly DependencyProperty HorizontalCountProperty =
        DependencyProperty.Register("HorizontalCount", typeof (int), typeof (UniformGrid),
                                    new PropertyMetadata(default(int)));

    public int HorizontalCount
    {
        get { return (int) GetValue(HorizontalCountProperty); }
        set { SetValue(HorizontalCountProperty, value); }
    }

    public static readonly DependencyProperty ElementsGapProperty =
        DependencyProperty.Register("ElementsGap", typeof (double), typeof (UniformGrid),
                                    new PropertyMetadata(default(double)));

    public double ElementsGap
    {
        get { return (double) GetValue(ElementsGapProperty); }
        set { SetValue(ElementsGapProperty, value); }
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        return new Size();
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if (Items != null && Items.Count != 0)
        {
            var squareSideForElement = (finalSize.Width - (HorizontalCount - 1)*ElementsGap)/HorizontalCount;
            var sizeOfElement = new Size(squareSideForElement, squareSideForElement);
            for (var i = 0; i < Items.Count; i++)
            {
                var rowIndex = i%HorizontalCount;
                var columnIndex = i/HorizontalCount;
                var resultPoint = new Point
                    {
                        X = rowIndex*(squareSideForElement + ElementsGap),
                        Y = columnIndex*(squareSideForElement + ElementsGap)
                    };
                Items[i].Arrange(new Rect(resultPoint, sizeOfElement));

            }

        }
        return finalSize;
    }
} 
```

但我有错误在线

```
Items[i].Arrange(new Rect(resultPoint, sizeOfElement)); 
```

我理解这个错误的原因。

我的问题是

1）如何获取这个项目的项目模板，其中填充了绑定提供的数据？

2）是否需要为MeasureOverride中的每个项目调用Measure？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:18:22.340

就像是：

```
<ItemsControl ItemsSource="{Binding Items}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <!-- your item template-->
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl> 
```

# liferay - AUI 未定义和 Liferay 未定义 jsp 页面中的错误？

> ID：13796444
> 
> 赞同：1
> 
> 时间：2012-12-10T07:05:47.460
> 
> 标签：liferay, portlet, liferay-6, liferay-theme

我在liferay 中使用我的自定义portlet。但不知何故，当我运行我的 portlet 时，我在错误控制台中出现以下错误

```
Timestamp: 12/10/2012 12:33:19 PM
Error: ReferenceError: AUI is not defined
Source File: http://localhost:8080/eMenuAdvertise-portlet/js/jquery.min.js
Line: 4

Timestamp: 12/10/2012 12:34:21 PM
Error: ReferenceError: Liferay is not defined
Source File: http://localhost:8080/eMenuAdvertise-portlet/js/jquery.min.js
Line: 3 
```

那么为什么这个错误出现在我的一些 jquery 的 jsp 页面中呢？

```
<%@ page import="net.sf.jasperreports.engine.JRException"  %>
<%@ page import="net.sf.jasperreports.engine.JasperExportManager" %>
<%@ page import="net.sf.jasperreports.engine.JasperFillManager" %>
<%@ page import="net.sf.jasperreports.engine.JasperPrint" %>
<%@ page import="net.sf.jasperreports.engine.JasperPrintManager" %>

<%@page import="com.liferay.portal.model.Role"%>
<%@ include file="/init.jsp"%>
<%@page import="com.liferay.portal.model.Organization"%>
<%@page import="com.liferay.portal.util.PortalUtil"%>
<style>
.borderColor{border: 1px solid #C62626;}
</style>
<portlet:renderURL var="ajaxaddnewrestURL">
    <portlet:param name="jspPage" value="/jsps/ajaxnewrest.jsp" />
</portlet:renderURL>
<portlet:renderURL var="editrestURL">
    <portlet:param name="jspPage" value="/jsps/Ajax_editrest.jsp" />
</portlet:renderURL>
<portlet:renderURL var="restListURL">
    <portlet:param name="jspPage" value="/jsps/rest.jsp" />
</portlet:renderURL>
<portlet:renderURL var="reportURL">
    <portlet:param  name="jspPage" value="/htmlreport/report.html" />   
</portlet:renderURL>
<portlet:renderURL var="renderURL ">
    <portlet:param name="param-name" value="param-value" />

</portlet:renderURL>

<%-- <portlet:resourceURL var="ReportId" id="generate_report"></portlet:resourceURL> --%>
<portlet:resourceURL var="addToDo" id="generate_report"></portlet:resourceURL>  

<script type="text/javascript" src="<%=request.getContextPath()%>/lib/chosen/chosen.jquery.min.js"></script>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.3/themes/south-street/ui.all.css" type="text/css"> 
<script src="<%=request.getContextPath()%>/js/datepickernew/jquery-1.8.3.js"></script>
<script src="<%=request.getContextPath()%>/js/datepickernew/jquery-ui.js"></script>

<script type="text/javascript" src="<%=request.getContextPath() %>/js/jquery.validate.js"></script>
<script type="text/javascript" src="<%=request.getContextPath()%>/lib/chosen/chosen.jquery.min.js"></script>
<%
System.setProperty("java.awt.headless", "true");
System.out.println(java.awt.GraphicsEnvironment.isHeadless());

String loading_img_path = request.getContextPath()+"/img/ajax_loader.gif";  
boolean isReseller=false; ///advertiser if flag is false else Reseller
List<Role> role_list_page=themeDisplay.getUser().getRoles();    
for(Role role_name:role_list_page){
    if(role_name.getName().equals("Reseller")){
        isReseller=true;
        break;                                  
    }
}%>         

<script>

</script>

<script>
    $(function() {

        $("#Start_validBeforeDatepicker").datepicker({
            numberOfMonths: 1,
            showButtonPanel: true,
            onClose: function( selectedDate ) {
                $( "#End_validAfterDatepicker" ).datepicker( "option", "minDate", selectedDate );
                }

        });
        $("#End_validAfterDatepicker").datepicker({
            numberOfMonths: 1,
            showButtonPanel: true,
            onClose: function( selectedDate ) {
                $( "#Start_validBeforeDatepicker" ).datepicker( "option", "maxDate", selectedDate );
                }
        });
       // $("#validBeforeDatepicker").datepicker({ minDate: 0 });
        $('#Start_validBeforeDatepicker,#End_validAfterDatepicker').datepicker();
    });
    </script>
<script type="text/javascript">  
$(".chzn-select").chosen();
$(".chzn-select-deselect").chosen({
    allow_single_deselect : true
});     
$(document).ready(function() {

    $(".ui-datepicker").css("display","none");

    });

    </script>

    <script type="text/javascript">
function update_rest(addToDo){
    var camp_ID =document.getElementById('camp_id').value;
    var f_start_date =document.getElementById('Start_validBeforeDatepicker').value;
    var f_end_date =document.getElementById('End_validAfterDatepicker').value;

   $.ajax({
        url :addToDo,            
          data: {"rest_name":camp_ID,
              "f_start_date":f_start_date,
              "f_end_date":f_end_date,
              "CMD":camp_ID},
          type: "GET",
          timeout: 20000,
          dataType: "text",
        success: function(data) {  
            alert("");
            alert ( " liferay url : "+ Liferay.PortletURL.createRenderURL());
            alert( "row1: " + createRowURL(1) );
            alert( "row2: " + createRowURL(2) );
             $("#mydiv").load("<%=renderURL.toString()%>");
             alert(data);
             }
    });
}

function createRowURL( row ) {
   var portletURL = new Liferay.PortletURL();
   portletURL.setParameter("rowNumber", row );

   return portletURL.toString();
}

function createRenderURL(str) {

        alert("");

        var renderURL = Liferay.PortletURL.createRenderURL();
        alert("hi");
        renderURL .setParameter("jspPage",str);
        renderURL .setPortletId("eMenuAdvertise_WAR_eMenuAdvertiseportlet");
        // i.e. your-unique-portlet-id can be like "helloworld_WAR_helloworldportlet"

}

 </script>

<nav>
    <div id="jCrumbs" class="breadCrumb module">
        <ul>
            <li><a href="#"><i class="icon-home"></i></a></li>
            <li><a href="#">Reseller</a></li>
            <li>Restaurants</li>
        </ul>
    </div>
</nav>
<div class="row-fluid">
    <div class="span12">
    <div id="successMsg" style='display:none;' class="alert alert-success"></div>
    <div id="errorMsg" style='display:none;' class="alert alert-error"></div>   
        <h3 class="heading">
            Statistics
        </h3>       
        <%String restId = request.getParameter("hide1");%>  
        <portlet:actionURL name="generateReport" var="reportURL"></portlet:actionURL>

    </div>
    <div class="">

        <div class="">
            <div class="">

                <div style="float: right">

                    <p>
                        <label style="width: 100px"><b>Campaign</b></label>
                    </p>
                    <select id="camp_id" name="camp_id"
                        data-placeholder="- Select Restaurants -" class="chzn-select"
                        multiple><%
                        String status = null;                                   
                List<campaign> camp_listObj;
                if(isReseller)
                {                                       
                    camp_listObj= campaignLocalServiceUtil.getAllCampaignByOrganizations(themeDisplay); 
                }
                else
                {
                    camp_listObj = campaignLocalServiceUtil.getAllCampaignByOrganizationId(themeDisplay);
                }
                            for (int i = 0; i < camp_listObj.size(); i++) {
                        %>
                        <option value=<%=camp_listObj.get(i).getPrimaryKey()%>><%=camp_listObj.get(i).getName().toString()%></option>
                        <%
                            }
                        %>
                    </select>
                </div>

                <div style="float: left;">
                    <p>
                        <button onclick="update_rest('<%=addToDo%>');" class="btn btn-success">GenerateReports</button>
                    </p>

                    <b>Start Date</b> <input type="text" style="width: 100px"
                        id="Start_validBeforeDatepicker" name="validTodayDatepicker"
                        readonly="true"> <b>End Date</b> <input type="text"
                        readonly="true" style="width: 100px" id="End_validAfterDatepicker"
                        name="validAfterDatePicker">

                </div>

            </div>
        </div>
        <div style="visibility: hidden;">
                                <input type="hidden" name="report_path" id="report_path" value="">
                            </div>

<%
System.setProperty("java.awt.headless", "true");
System.out.println(java.awt.GraphicsEnvironment.isHeadless());

%>

    </div>
</div>
<div class="bordercolor" id="mydiv">

</div>

<script type="text/javascript">

function editrestaurant(id){

    $(".span12").html("<img class='ajax-loader' src='<%=loading_img_path%>'/>");
    $.ajax({
        type:'post',
        url:'<%=editrestURL.toString()%>',
        data:{restId:id},
        success:function(data){
            $(".main_content").html(data);                      

        }
    });
}

function newrestaurant(){   
    $(".span12").html("<img class='ajax-loader' src='<%=loading_img_path%>'/>");
    $.ajax({
        type:'post',
        url:'<%=ajaxaddnewrestURL.toString() %>',
        data:{},
        success:function(data){
            $(".main_content").html(data);                      

        }
    });
}

</script> 
```

portlet.vm

```
#set ($portlet_display = $portletDisplay)

#set ($portlet_id = $htmlUtil.escapeAttribute($portlet_display.getId()))
#set ($portlet_title = $portlet_display.getTitle())
#set ($portlet_back_url = $htmlUtil.escapeAttribute($portlet_display.getURLBack()))

<section id="portlet_$portlet_id">
        $portlet_display.writeContent($writer)
</section> 
```

portal_normal.vm

```
#parse ($init)

<html class="#language("lang.dir")" dir="#language("lang.dir")" lang="$w3c_language_id">

<head>
</head>

<body class="$css_class">

<div id="wrapper">

    <div id="content">
        $theme.wrapPortlet("portlet.vm", $content_include)
    </div>

</div>

</body>

$theme.include($bottom_include)

</html> 
```

portal_popup.vm

```
<!DOCTYPE html>

#parse ($init)

<html dir="#language ("lang.dir")" lang="$w3c_language_id">

<head>
    <title>$the_title</title>

    $theme.include($top_head_include)
</head>

<body class="portal-popup $css_class">

$theme.include($content_include)

$theme.include($bottom_ext_include)

</body>

</html> 
```

导航.vm

```
<nav class="$nav_css_class" id="navigation">
    <h1>
        <span>#language("navigation")</span>
    </h1>

    <ul>
        #foreach ($nav_item in $nav_items)
            #if ($nav_item.isSelected())
                <li class="selected">
            #else
                <li>
            #end
                <a href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $nav_item.getName()</span></a>

                #if ($nav_item.hasChildren())
                    <ul class="child-menu">
                        #foreach ($nav_child in $nav_item.getChildren())
                            #if ($nav_child.isSelected())
                                <li class="selected">
                            #else
                                <li>
                            #end
                                <a href="$nav_child.getURL()" $nav_child.getTarget()>$nav_child.getName()</a>
                            </li>
                        #end
                    </ul>
                #end
            </li>
        #end
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:59:19.087

在`<script>`您有两个 javascript 函数 -`createRowURL`它们`createRenderURL`使用 Alloy UI 脚本，如下所示：

```
function createRowURL( row ) {
   var portletURL = new Liferay.PortletURL(); // this is the line using AUI
   portletURL.setParameter("rowNumber", row );

   return portletURL.toString();
}

function createRenderURL(str) {

    alert("");

    var renderURL = Liferay.PortletURL.createRenderURL(); // this is the line using AUI
    alert("hi");
    renderURL .setParameter("jspPage",str);
    renderURL .setPortletId("eMenuAdvertise_WAR_eMenuAdvertiseportlet");
    // i.e. your-unique-portlet-id can be like "helloworld_WAR_helloworldportlet"
} 
```

所以我建议不要使用`<script> ... </script>`标签使用`<aui:script> ... </aui:script>`标签（这会加载所有`AUI`和`Liferay`模块），使用这个标签你需要在你的jsp中定义标签库，比如：

```
<%@ taglib uri="http://alloy.liferay.com/tld/aui" prefix="aui" %>` 
```

**编辑**（在看到主题模板之后）：

我可以看到，`portal_normal.vm`您已分别从`<head>`和`<body>`标签中删除了以下行：

```
$theme.include($top_head_include) <!-- this statement is removed from <head> -->
$theme.include($body_top_include) <!-- this statement is removed from <body> --> 
```

请在主题模板中包含这些语句，您的脚本将起作用。声明`$theme.include($top_head_include)`this 负责包含所有`AUI`相关的东西（javascript、函数等）以及请求属性中的一些变量。

**注意**：从主题和挂钩中删除任何内容时请务必小心。您应该始终知道要删除或修改的语句的目的是什么。

希望这可以帮助。

# java - 如何提取两个分隔符之间的字符串

> ID：13796451
> 
> 赞同：54
> 
> 时间：2012-12-10T07:06:36.607
> 
> 标签：java, string, split

> **可能重复：**
> [两个分隔符之间的子字符串](https://stackoverflow.com/questions/10171015/substring-between-two-delimiters)

我有一个字符串

> “ABC[这是提取]”

我想`"This is to extract"`在java中提取部分。我正在尝试使用拆分，但它没有按我想要的方式工作。有人有建议吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-12-10T07:11:41.717

如果`[]`字符串中只有一对括号 ( )，则可以使用`indexOf()`：

```
String str = "ABC[ This is the text to be extracted ]";    
String result = str.substring(str.indexOf("[") + 1, str.indexOf("]")); 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-12-10T07:14:50.653

如果只有 1 次出现，ivanovic 的答案是我猜的最好方法。但如果出现次数多，则应使用正则表达式：

`\[(.*?)\]`这是你的模式。在每一个`group(1)`都会得到你的字符串。

```
Pattern p = Pattern.compile("\\[(.*?)\\]");
Matcher m = p.matcher(input);
while(m.find())
{
    m.group(1); //is your string. do what you want
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-10T07:16:40.757

试试看

```
String s = "ABC[ This is to extract ]";
        Pattern p = Pattern.compile(".*\\[ *(.*) *\\].*");
        Matcher m = p.matcher(s);
        m.find();
        String text = m.group(1);
        System.out.println(text); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-10T07:17:34.243

```
 String s = "ABC[This is to extract]";

    System.out.println(s);
    int startIndex = s.indexOf('[');
    System.out.println("indexOf([) = " + startIndex);
    int endIndex = s.indexOf(']');
    System.out.println("indexOf(]) = " + endIndex);
    System.out.println(s.substring(startIndex + 1, endIndex)); 
```

# php - 如何知道并验证用户是它所说的那样？

> ID：13796452
> 
> 赞同：0
> 
> 时间：2012-12-10T07:07:00.013
> 
> 标签：php, facebook, facebook-graph-api

这是最基本的问题。

我提出申请。我也在制作应用程序的服务器端。我的应用程序向服务器发送消息，询问用户的密码、用户名等。

顺便说一句，用户没有密码，因为注册是通过 facebook 进行的。

现在，我设置用户需要 facebook 帐户才能注册我的应用程序。

但是，facebook oAuth 令牌是临时的。

说我报名。

几周后我想申请我的书签。现在服务器如何知道请求该书签的确实是用户？

我应该在服务器上存储什么？

我想我可以存储 facebook 用户名。但是，存储 facebook oAuth 是没有用的，因为 oAuth 无论如何都是临时的。

那么，在设计服务器 API 时，服务器如何知道请求私人信息的是同一用户？

这类事情有框架或PhP吗？

应用程序应该发送什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:14:42.290

根据 facebooks[文档](http://developers.facebook.com/docs/howtos/login/extending-tokens/)，服务器端登录会自动获得一个有效期为 60 天的长期访问令牌，如果您要使用客户端，或者需要刷新令牌，则有一种方法可以[交换短期令牌一个长期存在的令牌](http://developers.facebook.com/docs/howtos/login/extending-tokens/#step1)。

还有一个[PHP SDK](http://developers.facebook.com/docs/reference/php/)可用于开发您的应用程序。

关于您如何知道用户是他们所说的人，这是由 facebooks oAuth 实现处理的。用户授予将您的应用程序链接到他们的帐户的权限，facebook 验证他们是他们所说的人并将相关信息传递回您的服务器，[这里概述了这个过程](http://developers.facebook.com/docs/howtos/login/server-side-login/)

# java - Java 每天在同一时间向不同时区发送电子邮件

> ID：13796457
> 
> 赞同：6
> 
> 时间：2012-12-10T07:07:19.847
> 
> 标签：java, timezone, gmt

原来这似乎是一个复杂的主题，如果我的方法太简单，请告诉我。

基本上我要做的是在每天早上 7 点向用户列表发送电子邮件提醒（仅当他们有提醒出现时，但除此之外）。当然，早上 7 点是在不同的时间，这取决于全世界每个人的服务器位置。

计划是在用户注册时通过 javascript 从用户那里收集到 GMT 偏移时间：

```
var today = new Date();  
var offset = -(today.getTimezoneOffset()/60); 
```

很简单，我现在知道偏移时间并将其与其他用户数据一起存储在数据库中。现在服务器端我设置了一个每小时运行一次的 TimerTask。我收集系统时间（比如早上 5 点），看看距离我的目标时间有多远（在本例中为 2 (7-5)），获取系统偏移小时（在本例中为 -5），然后拉数据库中所有 GMT 偏移小时为 -3 (-5 + 2) 的用户，然后发送电子邮件等。此时我假设我知道时区偏移为 -3 的每个人的早上 7 点，我可以继续该过程。这将在下一小时再次运行并收集时区偏移为 -4 的所有用户。这是真正有用的东西，还是我错过了什么？

```
Calendar systemTime = Calendar.getInstance();
int targetHour = 7;
int currentHour = systemTime.get(Calendar.HOUR_OF_DAY); //Its 5 am.
int difference = targetHour - currentHour; //2
int zoneOffset = systemTime.get(Calendar.ZONE_OFFSET) / (1000*60*60); //-5
int targetZone = zoneOffset + difference; //-3

List<User> users = userDAO.findByZoneOffset(targetZone);
for(User user : users) {
    //Send email or whatever I want to do with these users.
} 
```

我理解客户端时区可能设置不正确并因此产生关闭结果的可能性，但我愿意冒这个风险，因为提醒在早上 7 点准确发出并不是绝对必要的，只是更可取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:15:40.737

> 计划是在用户注册时通过 javascript 从用户那里收集到 GMT 偏移时间

这不足以一致地获得时区。它没有考虑夏令时。因此，如果用户在任何遵守夏令时的地方，他们将在大约半年的时间里在早上 6 点收到电子邮件，或者在大约半年的时间里在早上 8 点收到电子邮件。您最好根据 IP 地理位置 + 偏移量猜测他们的时区。

> 我有一个每小时运行一次的 TimerTask 设置。

我建议比这更频繁地运行。*否则，您很可能会发现自己在发送电子邮件之前*就醒了- 所以您然后回去睡觉，并在下次 7:59 发送电子邮件......您当前的时间可能是 8:59方案，基于客户端 DST 更改。到那时，您的预定发送时间差了将近两个小时！

> 我收集系统时间

也不要那样做。此时需要考虑*两个时区 - 您的服务器时区完全无关紧要。*使用 UTC 直到您转换为客户端的本地时间。这将使生活变得更加简单。如果您仍在使用`Calendar`，您只需设置其时区即可。

查看您的代码，如果您按小时完全匹配进行检查，您似乎最终也可能完全错过一堆用户。如果您最终在（例如）3:59 运行一次，然后在 4:01 运行一次，那么您会错过必须在 4 点运行的任何人。我建议跟踪您上次向每个用户发送邮件的时间 -或者可能是你最后一次跑步的时候——并用它来确保你*总是*抓住每个人。

最后，我强烈建议您使用[Joda Time](http://joda-time.sf.net)。这是一个*更*简洁的日期/时间 API，它将帮助您思考在代码中正确位置使用的正确概念。

# servicestack - ServiceStack 中标记发布的标签在哪里

> ID：13796459
> 
> 赞同：1
> 
> 时间：2012-12-10T07:07:56.190
> 
> 标签：servicestack

我在 MonoTouch 上遇到了 ServiceStack 的问题，我想自己构建它。不幸的是，最新的代码在 MonoTouch 中遇到了一个错误，所以我想从最新发布代码的已知点开始。

[https://github.com/ServiceStack/ServiceStack/tree/master/release/latest/MonoTouch](https://github.com/ServiceStack/ServiceStack/tree/master/release/latest/MonoTouch)

目前标记为 3.85。

通常我会在 repo 中寻找一个标签来工​​作，但我找不到任何标签。如何获取用于构建 3.85 的源代码？

干杯，菲利克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:52:58.990

当 Git 项目没有标记其版本时，您需要返回提交日志以[查看 v3.85 和 MonoTouch 库添加](https://github.com/ServiceStack/ServiceStack/commits/master?page=20)到项目的位置。

# c# - 将具有依赖项 v1 的项目添加到具有依赖项 v1.1 的项目中

> ID：13796468
> 
> 赞同：3
> 
> 时间：2012-12-10T07:08:52.680
> 
> 标签：c#, asp.net, dependencies

情况就是这样：我有一个项目 A，它依赖于库版本 1.0.0.0 至关重要的是，此版本将保留在此项目中。对于一些额外的功能，我需要使用库 1.1.0.0，因此我创建了一个具有较新版本的类库项目，并将其作为依赖项添加到我的主项目中。这工作正常并且很好地遵守，但在运行时我得到一个错误：

```
System.IO.FileLoadException: Could not load file or assembly 'DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'
   at OpenXMLReportsGenerator.GenerateInvoiceFailureReportHEOpenXML.CreatePackage(String filePath, DataSet data, String exporterName)
   at bDoxWebEd.Reports.InvoiceFailureReportHandler.BeginGenerateReportAndSave(Object gerateReportStateInfo)

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

将项目编译为调试时，仅在编译 Release 时才出现此错误。我该如何解决这个问题？

好的，在服务器上激活功能日志记录后，我的日志中出现以下错误：

```
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = IIS APPPOOL\bDoxPool
LOG: DisplayName = DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
 (Fully-specified)
LOG: Appbase = file:///D:/***/
LOG: Initial PrivatePath = D:\***\bin
Calling assembly : OpenXMLReportsGenerator, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: D:\Program Files\Nipendo\bDox\bDox\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/bdox/00aaf85b/66058ca1/DocumentFormat.OpenXml.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/bdox/00aaf85b/66058ca1/DocumentFormat.OpenXml/DocumentFormat.OpenXml.DLL.
LOG: Attempting download of new URL file:///D:/***/bin/DocumentFormat.OpenXml.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Build Number
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:48:51.557

显然`OpenXMLReportsGenerator, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null`引用`DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35` 了程序集，程序集加载器无法找到它。

尝试将此程序集添加到 bin 文件夹或 GAC。

# iphone - 从ios中不同索引处的字符串中获取字符串

> ID：13796469
> 
> 赞同：1
> 
> 时间：2012-12-10T07:08:56.453
> 
> 标签：iphone, objective-c, nsstring, substring

我有 html 页面。我想从遍历整个页面的不同索引中获取图像名称。我的 HTML 页面是：

```
<html manifest="everything-offline.manifest">
<head>
  <title>Column Test</title>
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="../css/contents.css" />
</head>
<body>
  <h1>Pugpig Gazette</h1>

  <section class="topstories">
    <ul>
      <li><a href="article-a1.html">
        <article>
          <h2>Lorizzle ipsizzle dolizzle</h2>
          <figure><img src="img/a1.jpg" /></figure>
        </article>
      </a></li>
      <li><a href="article-b1.html">
        <article>
          <h2>Cras accumsizzle</h2>
          <figure><img src="img/b1.jpg" /></figure>
        </article>
      </a></li>
      <li><a href="article-c1.html">
        <article>
          <h2>Sizzle go to hizzle</h2>
          <figure><img src="img/c1.jpg" /></figure>
        </article>
      </a></li>
      <li><a href="article-d1.html">
        <article>
          <h2>Lorizzle ipsizzle dolizzle</h2>
          <figure><img src="img/d1.jpg" /></figure>
        </article>
      </a></li>
      <li><a href="article-d2.html">
        <article>
          <h2>Cras accumsizzle</h2>
          <figure><img src="img/d2.jpg" /></figure>
        </article>
      </a></li>
      <li><a href="article-e1.html">
        <article>
          <h2>Sizzle go to hizzle</h2>
          <figure><img src="img/e1.jpg" /></figure>
        </article>
      </a></li>
    </ul>
  </section>

  <section class="sections">
    <ul>
      <li class="section-a"><a href="section-index-a.html">News</a></li>
      <li class="section-b"><a href="section-index-b.html">Sport</a></li>
      <li class="section-c"><a href="section-index-c.html">Business</a></li>
      <li class="section-d"><a href="section-index-d.html">Entertainment</a></li>
      <li class="section-e"><a href="section-index-e.html">Finance</a></li>
    </ul>
  </section>
</body>
</html> 
```

在这里，我想获取图像名称为 a1.jpg、d1.jpg、e1.jpg 等...请指导我如何获取。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:25:31.450

链接在这里

[http://kelp.phate.org/2012/04/parsing-html-in-ios-app.html](http://kelp.phate.org/2012/04/parsing-html-in-ios-app.html)

你会在这里找到一个演示代码。

它可能会帮助你。

快乐编码！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:16:56.827

Ray Wenderlich 的网站上有一个解析 HTML 的教程。这是链接：[http](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios) ://www.raywenderlich.com/14172/how-to-parse-html-on-ios 。这应该可以帮助您理解解析并检索图像名称。

# magento - 如何在 Magento 中添加我的感谢页面模板

> ID：13796477
> 
> 赞同：1
> 
> 时间：2012-12-10T07:09:58.237
> 
> 标签：magento

我已经为 Magento 创建了一个自定义运输模块，但我无法在 Magento 的谢谢页面中获取订单 ID，因为我必须将该订单 ID 发送给运输提供商。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:53:12.027

使用观察者事件`checkout_onepage_controller_success_action`。创建一个类和一个方法。在这种方法中，您可以获得变量，这是一个示例：

```
class MyClass {
    public function MyMethod (Varien_Event_Observer $observer) {
        // Array of order ids
        $orderIds = $observer->getEvent()->getOrderIds();
    }
} 
```

如果您需要更多详细信息，请查看类`Mage_Checkout_OnepageController`和方法`successAction`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:43:15.463

在感谢页面/Success.phtml 上获取订单 ID

```
$this->getOrderId(); 
```

查看[magento成功页面变量](https://stackoverflow.com/questions/13229965/magento-success-page-variables)

# android - 打开窗口时加载屏幕：Android

> ID：13796480
> 
> 赞同：0
> 
> 时间：2012-12-10T07:10:25.553
> 
> 标签：android, titanium

我正在使用 Titanium studio 开发 android 应用程序。用户单击项目正在打开一个**新窗口，该窗口从站点获取数据并填充表格视图。**所以这个窗口确实需要时间才能打开。意思是当我获取数据并显示加载屏幕时：

```
anotherWind.addEventListener('open', function (e) {
      activityIndicator.show();

      setTimeout(function(){
    e.source.close();
    activityIndicator.hide();
  }, 6000);
}); 
```

问题是在这一点上，我假设 获取和显示一个表格视图需要**6 秒。**但在实时情况下可能并非如此，因为时间可能会因数据而异

当用户单击一个图标时，它应该只显示加载屏幕，因为数据没有被填充并显示在 tableview 中。

*它是两个任务之间的一种通知。一个当任务完成时，它应该通知另一个*。
我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:47:25.630

您可以使用自定义事件侦听器。例子：

```
Ti.App.addEventListener('tableDataLoaded', function() {
     activityIndicator.hide();
} 
```

加载表数据时，触发事件：

```
Ti.App.fireEvent('tableDataLoaded'); 
```

我希望这能帮到您 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:14:14.183

看来多线程将是一个很好的解决方案。Android 提供了一些不同线程或进程之间的通信机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:14:58.993

我已经实现了相同的。我的新窗口需要加载远程数据并填充表格视图。

所以我只是在打开的窗口中显示指标

`anotherWind.addEventListener('open', function (e) { activityIndicator.show(); });`

然后在加载我的远程数据时将其隐藏。在 httpclient 的回调中

```
'APIGetRequest(this.apiURL, function(e) {
    var status = this.status;
    if (status == 200) {
              populatetableview(this.responseText);
              activityIndicator.hide();
             } 
```

});'

# automation - Windows 资源管理器上的不完整共享列表

> ID：13796481
> 
> 赞同：1
> 
> 时间：2012-12-10T07:10:29.950
> 
> 标签：automation, windows-explorer

我尝试使用下面的代码来查找包含的所有列表视图项目，如果在详细视图模式下没有项目超出视图，它会很好，但是如果有很多列表视图项目，其中一些是不可见的，即有垂直滚动条显示在右侧，它只能找到可见的项目，但在其他视图模式下效果很好，例如列表。

这里有什么问题吗？

AutomationElementCollection items = list.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.ListItem));
Logger.WriteWarning("项目总数："+items.Count); //例如 39/55，不是完整的列表项。

这是供您参考的屏幕截图 [http://social.msdn.microsoft.com/Forums/en-US/windowsaccessibilityandautomation/thread/d6e58ae1-0eb9-43cf-af51-04102a4dd627](http://social.msdn.microsoft.com/Forums/en-US/windowsaccessibilityandautomation/thread/d6e58ae1-0eb9-43cf-af51-04102a4dd627)。

# c - 为什么 & 运算符为结构类型赋予不同的值

> ID：13796485
> 
> 赞同：0
> 
> 时间：2012-12-10T07:10:51.370
> 
> 标签：c, memory-address

考虑以下测试程序（[键盘执行](http://codepad.org/pdYxZ0Xw)）：

```
#include <stdio.h>
#include <string.h>

struct camp {
    char b[8];
};

int main()
{
    struct camp c;
    strcpy(c.b, "Hello");
    c.b[5] = '\0';
    printf("c size: %d\nAddress (amp): %d :: %d\n", sizeof(c), &c, c);
    printf("Address of b: %d :: %d\n", &(c.b), c.b);

    return 0;
} 
```

示例输出：

```
c size: 8
Address (amp): -1082463628 :: 1819043144
Address of b: -1082463628 :: -1082463628 
```

`&(c.b)`和`c.b`（第二次调用 printf）给出的地址是相同的，同样的`struct camp c`（第一次调用 printf）返回不同的地址。此外，与or`&c`相同。`&(c.b)``c.b`

到底发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:15:05.103

`printf`在第一种情况下试图做的是解释为`c`整数。`c`不是整数，甚至不是可以转换为整数（显式或隐式）的值，因此当您调用未定义的行为时，写入的值可以是任何值*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:15:46.150

结构中只有一个数据成员，因此您看到的地址`b`与`c`结构对象相同。

数组名称也给出了该数组的第一个元素的地址。因此，`c.b`将给出与后一个元素相同的地址，`&(c.b)`因为后者是整个数组的地址。

`&c` `&(c.b)`并且`c.b`在您的情况下将是相同的，但是您正在打印`c`using`%d`格式说明符，因此您看到的是`undefined behaviour`, 最后一个参数不是的地址`c`（因此您得到的是垃圾值）。

# perl - 如果已经有'use base'语句，是否需要使用'use'

> ID：13796486
> 
> 赞同：2
> 
> 时间：2012-12-10T07:10:52.527
> 
> 标签：perl, inheritance

我有一个模块说`Foo.pm`

```
package Foo; 
sub new {
}    
sub SomeMethod {
}
1; 
```

然后是一个子类`Foo::Bar`Foo/Bar.pm

```
package Foo::Bar;
use base Foo;
use Foo; 
sub SomeMethod {
}
1; 
```

现在我们需要使用

```
use base Foo;
use Foo; 
```

要不就

```
use base Foo; 
```

两者都会。

另外，如果我们需要使用`use Foo;`

它有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:23:04.440

`use base Module;`如果需要，将始终加载包，但不会从中导入。它类似于

```
BEGIN {
    require Module;
    push @ISA, 'Module';
} 
```

`use Module;`，另一方面，将导入模块的默认导出*。它类似于

```
BEGIN {
    require Module;
    Module->import();
} 
```

因此，除非您想从模块导入，否则不需要`use Foo;`以下内容。`use base 'Foo';`

* * *

`import`* — 从技术上讲，如果模块定义了这样的方法，它只是不带参数地调用。我描述的是`import`方法的正常行为。

# function - cPickle 的问题

> ID：13796487
> 
> 赞同：2
> 
> 时间：2012-12-10T07:10:58.657
> 
> 标签：function, pickle, missing-data, saving-data, state-saving

全部。

我目前正在尝试使用 cPickle 为我的 Roguelike 创建一个“save_game”功能。

save_game() 正确地腌制游戏状态，但是如果我退出游戏，当我尝试重新打开保存的游戏时， load_game() 函数断然拒绝承认腌制文件存在（它只是告诉我没有保存的数据加载）。

这是 save_game()：

```
def save_game():
#Write the game data to a cPickled file
f = open('savegame', 'wb')
cPickle.dump('map',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('objects',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('player_index',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('stairs_index', f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('inventory',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('game_msgs',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('game_state',f, protocol=cPickle.HIGHEST_PROTOCOL)
cPickle.dump('dungeon_level',f, protocol=cPickle.HIGHEST_PROTOCOL)
f.close() 
```

这是load_game（）：

```
f = open('savegame', 'rb')
cPickle.load(f)

f.close() 
```

我这样做是否正确，或者这一切都是低音？*哈哈*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:58:51.893

您缺少的最重要的事情是 pickle.load() 需要将加载的内容分配给某物。我的建议是将您要保存的所有内容放入一本字典中，腌制该字典，然后将其取消腌制：

```
saveData = {'map': mapData,
            'objects': objectData}
pickle.dump(saveData, f, -1) 
```

然后在 load_game() 中：

```
f = open...
saveData = pickle.load(f)
f.close()
mapData = saveData['map']
objectData = saveData['objects'] 
```

顺便说一句——我建议不要直接调用 cPickle，尤其是在调试时——更容易看到 pickle 的任何错误，然后只有在一切正常时才切换到 cPickle。你也可以这样做：

```
try:
   import cPickle as pickleMod
except ImportError:
   import pickle as pickleMod 
```

那么无论您使用哪种类型的 python，您的程序都可以运行（尽管速度更慢），并且当您完成编程时，它可以更轻松地从 pickle 切换到 cPickle 或返回。祝你游戏好运！

# android - 在 Android 的 Toggle Button 中从 On Sate 切换到 Off 状态时显示警报

> ID：13796488
> 
> 赞同：0
> 
> 时间：2012-12-10T07:11:01.637
> 
> 标签：android

当我在切换按钮中从开启状态切换到关闭状态时，我试图显示警报。我在侧面列表视图的适配器中使用切换按钮。请参考下面我的代码。

当用户在 Toggle 按钮中从 On 状态切换到 Off 状态时，我还想显示警报。当我使用 IsChecked() 时，它总是被称为 on 到 off 或 off 到 n，但我需要在仅从 On 切换到 off 时显示 Alert。

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="10dp" >

<TextView
    android:id="@+id/state_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ToggleButton
    android:id="@+id/statetoggleButton"
    style="@style/on_off_togle_btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/togllebuttonselector" /> 
```

适配器类是：

```
private final Activity context;
    public final List<StatesModel> list;
    AlertDialog alertDialog;

    public List<StatesModel> getList() {
        return list;
    }

    public StateListAdapter(Activity context, List<StatesModel> list) {
        super(context, R.layout.states_list, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected ToggleButton checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.states_list, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.state_name);
            viewHolder.checkbox = (ToggleButton) view
                    .findViewById(R.id.statetoggleButton);
            viewHolder.checkbox
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(
                            final CompoundButton buttonView,
                            boolean isChecked) {
                        final StatesModel element = (StatesModel) viewHolder.checkbox
                                .getTag();

                          if (!isChecked) { AlertDialog.Builder builder =
                          new AlertDialog.Builder( context);
                          builder.setTitle("Warning"); String message =
                          "Title is here"
                          ; builder.setMessage(message);
                          builder.setPositiveButton("OK", new
                          DialogInterface.OnClickListener() {

                          @Override public void onClick( DialogInterface
                          dialog, int which) { alertDialog.dismiss();
                          element.setSelected(buttonView .isChecked()); }
                          }); builder.setNegativeButton("Cancel", new
                          DialogInterface.OnClickListener() {

                          @Override public void onClick( DialogInterface
                          dialog, int which) { buttonView.setChecked(true);
                          alertDialog.dismiss(); } }); alertDialog =
                          builder.create(); alertDialog.show(); } else

                        element.setSelected(buttonView.isChecked());

                    }
                });
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    } 
```

请检查 On Checked 更改方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:16:59.567

```
ToggleButton toggle = (ToggleButton) findViewById(R.id.togglebutton);
toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            // The toggle is enabled
        } else {
            // The toggle is disabled
        }
    }
}); 
```

> if is check do write else not checke 使用的代码

# ajax - JSF 2.0 中的文本框渲染

> ID：13796489
> 
> 赞同：2
> 
> 时间：2012-12-10T07:11:03.320
> 
> 标签：ajax, jsf, jsf-2, facelets

我有一个文本框，最终用户必须在其中输入应呈现的文本框的数量。根据输入的数字，文本框的数量必须以行格式动态呈现。

此外，在新呈现的行格式文本框中，输入的值必须在进入下一页时使用正确的支持 bean 进行标识。

关于从哪里开始或如何实现这样的目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:47:01.903

您可以使用`<h:inputText>`来询问最终用户的输入。

```
<h:inputText value="#{bean.number}" /> 
```

您可以使用`<h:commandButton>`让用户提交表单。

```
<h:commandButton value="Submit" action="#{bean.submit}" /> 
```

您可以使用`List<T>`来收集项目。

```
private List<Item> items;

public void submit() {
    items = new ArrayList<Item>();

    for (int i = 0; i < number; i++) {
        items.add(new Item());
    }
} 
```

您可以使用`<h:dataTable>`它来显示它在行中。

```
<h:dataTable value="#{bean.items}" var="item">
    <h:column>
        <h:inputText value="#{item.value}" />
    </h:column>
</h:dataTable> 
```

提交的值将在`items`.

# sed - 使用 sed 进行全局递归重命名失败

> ID：13796490
> 
> 赞同：0
> 
> 时间：2012-12-10T07:11:13.067
> 
> 标签：sed

我正在尝试将所有 python 文件递归搜索到所有子目录中，并将单词替换`organizations`为`organisations`. 像这样：-

```
$ find . -name "*.py" | xargs sed -i 's/organizations/organisations/g'
sed: 1: "./bookings/__init__.py": invalid command code . 
```

但我收到一条错误消息。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:17:24.320

行。弄清楚了。我正在使用 Mac OSX 的`sed`，这要求我在`s/foo/foo_bar/g`字符串之前添加一个 "" 。

所以

```
$ find . -name "*.py" | xargs sed -i "" 's/organizations/organisations/g' 
```

工作。

# android - Quickblox Android 推送通知

> ID：13796492
> 
> 赞同：1
> 
> 时间：2012-12-10T07:11:15.297
> 
> 标签：android, push-notification, quickblox

我正在尝试通过 quickblox API 在我的 android 应用程序中实现推送通知。所有步骤（注册、创建推送令牌、创建订阅）均已成功执行，但最终抛出以下错误消息。

> “没有收件人。至少应为一名用户订阅 GCM（Android 推送）（通过 SDK 或 REST API）”

我没有得到任何关于这个错误的线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:45:51.467

我在 iPhone 中遇到了同样的问题。您正在尝试向尚未订阅或没有人订阅推送通知的用户发送推送通知。

**你能做什么**： - 在实际设备上运行你的应用程序，并在模拟器中以不同的登录方式运行应用程序。并尝试发送推送通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:19:20.070

您向哪个用户发送推送通知？

我认为您正在尝试向未订阅 GCM（Android 推送）的用户发送推送，但您收到错误消息：“没有收件人。至少应为一名用户订阅 GCM（Android 推送）”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T05:10:28.787

您必须通过该方法注册您的设备`GCMRegistrar.register()`，请尝试在真机而不是模拟器上运行。我也遇到了同样的错误。但是已经解决了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-25T06:46:01.803

更新我的答案，我解决了这个问题，订阅推送后，只需从 Quickblox 注销即可接收推送通知。

# java - 缓存半决赛

> ID：13796493
> 
> 赞同：1
> 
> 时间：2012-12-10T07:11:21.810
> 
> 标签：java, caching, static, global-variables

我有一个小问题，我想出了阅读这个帖子： [为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)

在我的应用程序中，我有大量的配置变量。例如字体、颜色、缓存图像……因为它们中的大多数从未改变，所以我认为它们是静态的。尽管如此，我的应用程序是一个小程序，并且由于客户端已经执行了一次小程序，因此其中一些静态信息可能会更改，因为给定的配置可能已更改。因此可以说这种数据很少改变，但不被认为是最终的。

此外，由于我以这种方式处理的信息量很大，我将它们映射到自己的枚举上，如下所示：

```
public enum Fonts {

    COLOR_CHOOSER, MAP_META_DATA; 
    private Font localFont;

    public Font getValue() {
        return localFont;
    }

    private void setValue(Font newFont) {
        localFont = newFont;
    }
}

protected static void initFonts() {
    Fonts.COLOR_CHOOSER.setValue(new Font("Arial", Font.PLAIN, 15));
    Fonts.MAP_META_DATA.setValue(font_race.deriveFont(Font.BOLD, 11));
} 
```

通过使用这样的枚举，我能够很容易地确定我正在寻找的值，同时我可以将它们全部保存在一个地方。

有人可能会说，既然这是静态的，我也可以将它们放在对象中，无论如何都要使用它们。尽管如此，我认为当前的行为更容易阅读。

除此之外，initFonts() 方法将来会被映射方法取代，该方法从 json 或 xml 等外部源获取当前硬编码的值。因此，如果我在 OO 工作，这意味着将任何传入数据转发到相应的对象，我认为这些对象不容易阅读。

提出我的问题：你们中的某个人将如何映射/缓存中途最终参数（我也考虑过使用枚举作为键值的哈希图）。例如图像、字体、颜色、像素边距等。我使用这些枚举的方式是否合适，或者我认为它们是邪恶的，因为它们是静态的？如果是 - 什么是合适的方式，它易于阅读和易于维护？！

我认为我的解决方案是一种可行的方法，但在阅读了上述线程后将重新考虑整个设计。

非常感谢您的任何建议。亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:21:47.093

枚举可以表示静态*最终*数据，这就是为什么我认为使用这样的`initFonts()`方法不合适，修改枚举值的内容，即使它使用私有方法。你应该拥有的更像是：

```
public enum Fonts {
    COLOR_CHOOSER(new Font("Arial", Font.PLAIN, 15)),
    MAP_META_DATA(new Font("Arial", Font.BOLD, 11)); // No reference to font_race, of course

    private final Font localFont;

    private Fonts(Font font) {
        localFont = font;
    }

    public Font getValue() {
        return localFont;
    }
} 
```

我不明白你为什么说你的配置数据不是最终的：它似乎在应用程序运行时没有改变。

但是，如果运行时初始化需要加载可能发生变化的值，而不是在编译时确定，那么枚举可能不再是正确的模型，如果它无法以简单的方式自行初始化其值（调用太多东西来自枚举的静态初始化程序可能不是最好的想法）。在这种情况下，我将通过中间服务替换直接使用枚举，例如使用正确的方法一劳永逸地保存一个不可变的`Map<Fonts, Font>`（可能是用`EnumMap<Fonts, Font>`包裹的）初始化，而不是调用，你会调用.`Collections.unmodifiableMap()``Fonts.COLOR_CHOOSER.getValue()``FontService.getFont(Fonts.COLOR_CHOOSER)`

# jquery - 如何选择动态内容？

> ID：13796500
> 
> 赞同：0
> 
> 时间：2012-12-10T07:11:36.217
> 
> 标签：jquery, jquery-selectors

听起来微不足道，但它不是（至少对我来说）。

我知道在尝试将事件绑定到动态内容时必须使用`.on()`，但是如何选择元素并对它们运行常规操作？

我有一个带有动态行的表，在行内我在一些 td 上有 1 个锚标记，我已经给了类`pricelist_balloon`。

我该如何选择它？我试过了 ：

```
$.each('.pricelist_balloon',function() {});
$('.pricelist_balloon').each(function() {});
$('#parent_div .pricelist_balloon').each(function() {});
$('#parent_div').each('.pricelist_balloon', function() {}); 
```

但似乎没有一个工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:20:45.313

好吧，选择器`$('#parent_div .pricelist_balloon').each(function() {});`

似乎可以工作，可能其他人也在工作，但我的问题是我在 AJAX 成功调用的函数中生成了我的内容，所以在我运行这段代码时，元素还没有生成。

感谢所有的帮助者。

# windows-phone-7.1 - 如何在 windows phone 7.1 中为背景色和前景色设置文本框的不透明度？

> ID：13796502
> 
> 赞同：0
> 
> 时间：2012-12-10T07:11:47.923
> 
> 标签：windows-phone-7.1

我想在 windows phone 7.1 的文本框中设置不透明度。我想在 windows phone 7.1 的文本框中使用#503E28 颜色代码为背景设置不透明度 20%，用 #3B2D1E 颜色代码为前景设置 50%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:12:22.957

尝试将 alpha 通道添加到颜色代码中

```
<TextBox Foreground="#803B2D1E"
 Background ="#33503E28" ... /> 
```

我相信 WP 使用`ARGB`值，所以第一个值是`A`(alpha)。或者，您可以使用 Expression Blend 对其进行样式设置。

# asp.net-mvc-3 - 在 Visual Studio 10 ASP.NET MVC3 中使用

> ID：13796503
> 
> 赞同：8
> 
> 时间：2012-12-10T07:11:50.967
> 
> 标签：asp.net-mvc-3, visual-studio-2010, whitespace

我正在使用 Visual Studio 2010 专业版在 ASP.NET MVC3 框架中开发应用程序。

我遇到了一种情况，我需要一个文字空格字符，通常通过`&nbsp;`在 HTML 中添加（类似的东西）来完成。

但是，程序给出了运行时错误。

我该如何克服呢？

代码：

```
<div class="week">
    @for (int i = 0; i < 7; i++)
    {
        <div class="day">
            @weekStartDay.ToString().Substring(0, 3)
        </div>            
&nbsp;
       weekStartDay = (DayOfWeek)(((int)weekStartDay + 1) % 7);
    }
</div> 
```

错误：

c:***\Documents\Visual Studio 2010\Projects\MvcApplication2\MvcApplication2\Views\Home\Calendar.cshtml(22): error CS0201: 只有赋值、调用、递增、递减和新对象表达式可以用作陈述

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T07:26:08.877

将您的代码更改为

```
<div class="week">
    @for (int i = 0; i < 7; i++)
    {
        <div class="day">
            @weekStartDay.ToString().Substring(0, 3)
        </div>            
       @:&nbsp;
       weekStartDay = (DayOfWeek)(((int)weekStartDay + 1) % 7);
    }
</div> 
```

@: 告诉 Razor 视图引擎`&nbsp;`是纯文本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T07:27:42.060

如果您在 Visual Studio 2012 中查看此代码，您将看到完全相同的错误消息。带有下划线，工具提示显示此消息。

问题是您在代码块内：`@{ }`. 如果要输出纯文本，则必须将其包装在 HTML 元素中，如下所示：

```
<span>&nbsp;</span> 
```

或者你必须使用

```
@:&nbsp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T15:08:24.060

只需在   之前使用 add @:

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-30T10:48:43.147

对于下拉列表中的每个列表项，您必须将列表项值替换为 `.Replace(" ", "\u00A0")`

例如：

* * *

**在你的控制器中**

```
 var Listval =(from u in yourtablename select u.YourColumnName.Replace(" ", "\u00A0")).Distinct().ToList();
  ViewBag.DDlVals= new SelectList(Listval); 
```

* * *

**在您的查看页面中**

```
@Html.DropDownListFor(model => model.YourColumnName, (SelectList)ViewBag.DDlVals, "--Select--", new { @class = "form-control" }) 
```

# php - 如何将网页干净地打印到点阵打印机？

> ID：13796507
> 
> 赞同：2
> 
> 时间：2012-12-10T07:12:18.393
> 
> 标签：php, html, printing, dot-matrix

我有一[台 Epson LX 300 点阵打印机](http://www.epson.com/cgi-bin/Store/jsp/Product.do?sku=C11C640001#1)。

我正在使用 PHP 创建 HTML 收据，并使用 Javascript`window.print()`要求浏览器打印网页。不幸的是，打印机无法处理格式化的文本。字体大小不正确、区域重叠等。

打印在记事本和写字板中生成的普通文本不会导致任何问题。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:09:48.933

您需要为打印创建不同的 css 规则，并以这种方式在页面上设置它们

```
<LINK rel="stylesheet" type"text/css" href="print.css" media="print"> 
```

在这个 css 中，您可以将 display:none 设置为图像，为所有元素设置通用字体大小，而无需更改您网站上的任何内容。

# jquery - 如何将数组传递给主干中 this.collection.create 中的 Post 方法？

> ID：13796509
> 
> 赞同：0
> 
> 时间：2012-12-10T07:12:19.017
> 
> 标签：jquery, asp.net-mvc, backbone.js

我在我的 mvc 应用程序中使用了主干.js，我有一个场景，我必须将一个数组传递给我在 Rest API 中的 Post 方法。我试图在我的模型中设置一个数组属性，然后调用 this.collection.create(model)。我正在使用这样的模型的属性

```
默认值：{
            地址： ''，
            城市： ''，
            状态： ''，
            压缩： ''，
            地址数组：[]
        }

```

并尝试将 Post 方法称为

```
    e.models[0].set({ 'AddressArray': e.models});
    this.collection.create(e.models[0]);

```

这里 e.models[0] 是我的模型对象，而 e.models 是一个模型数组。set 属性设置数组地址，但在创建时它给出了这个错误。

```
未捕获的 TypeError：将循环结构转换为 JSON
```

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:27:36.310

该错误仅表示您创建了一个自引用对象（无法序列化为 JSON）。即，您已经完成了与此等效的操作：

```
var x = {};
x['test'] = x;
JSON.stringify(x); // TypeError: Converting circular structure to JSON 
```

您可以先使用创建模型的副本`toJSON`，以便对象不引用自身：

```
var json = e.models[0].toJSON();
json['AddressArray'] = e.models[0].attributes;
this.collection.create(json); 
```

但这不太有意义，因为`.attributes`指的是模型的属性，所以您所做的只是在 下创建模型的副本`AddressArray`，即如果模型是 say `{ prop: "val", prop2: "val2" }`，那么您最终会得到：

```
{
    prop: "val",
    prop2: "val2",
    AddressArray: {
        prop: "val",
        prop2: "val2",
    }
} 
```

无论哪种方式，您都无法将引用自身的对象转换为 JSON；并且需要序列化通过调用将模型保存到服务器`Collection.create`。

# objective-c - AppleScript：调用 Shell 脚本的处理程序导致“无法识别的函数 fileHandleForReading”

> ID：13796512
> 
> 赞同：3
> 
> 时间：2012-12-10T07:12:41.567
> 
> 标签：objective-c, macos, cocoa, bash, applescript

调用处理程序时`doProcess_`，脚本失败并导致目标输出：

```
2012-12-09 22:59:24.193 cma[76284:303] *** -[cmaAppDelegate doProcess:]: unrecognized function fileHandleForReading. (error -10000) 
```

任何想法将不胜感激。

```
script cmaAppDelegate
property parent : class "NSObject"
property inputUser : missing value
property inputPass : missing value
property outPipe : missing value
property outFileHandle : missing value
property theResult : missing value

on applicationWillFinishLaunching_(aNotification)
    -- Insert code here to initialize your application before any files are opened 
end applicationWillFinishLaunching_

on applicationShouldTerminate_(sender)
    -- Insert code here to do any housekeeping before your application quits 
    return current application's NSTerminateNow
end applicationShouldTerminate_

on doShellScriptInBackground_callback_(theCommand, selectorName)
    -- create pipe for standard output, and get reading file handle from it tell current application's NSPipe to set outPipe to pipe()
    set outFileHandle to outPipe's fileHandleForReading()
    -- make task and launch it
    tell current application's NSTask to set theTask to alloc()'s init()
    tell theTask
        setLaunchPath_("/bin/sh")
        setArguments_({"-c", theCommand})
        setStandardOutput_(outPipe)
        -- the following line is needed or logging ceases at this point setStandardInput_(current application's NSPipe's pipe())
    end tell
    -- add observer for notification
    tell current application's NSNotificationCenter to set nc to defaultCenter()
    tell nc to addObserver_selector_name_object_(me, selectorName, current application's NSFileHandleReadToEndOfFileCompletionNotification, outFileHandle) -- launch task
    tell theTask to |launch|()
    -- tell file handler do its stuff in the background
    tell outFileHandle to readToEndOfFileInBackgroundAndNotify()
end doShellScriptInBackground_callback_

on dataIsReady_(notif)
    -- remove the observer
    tell current application's NSNotificationCenter to set nc to defaultCenter()
    tell nc to removeObserver_name_object_(me, current application's NSFileHandleReadToEndOfFileCompletionNotification, missing value) -- get the data from notification's userInfo dictionary
    set theData to notif's userInfo()'s valueForKey_("NSFileHandleNotificationDataItem")
    -- make it into a string
    set theResult to current application's NSString's alloc()'s initWithData_encoding_(theData, current application's NSUTF8StringEncoding)
    -- do something wih the result
    log theResult
end dataIsReady_

on doProcess_(sender)
    doShellScriptInBackground_callback_("ls -ltr", "dataIsReady:")
end doProcess_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:21:33.417

您必须“将 outPipe 设置为当前应用程序的（NSPipe 的 pipe()）”才能调用“outPipe 的 fileHandleForReading()”

改变：

```
on doShellScriptInBackground_callback_(theCommand, selectorName)
    -- create pipe for standard output, and get reading file handle from it tell current application's NSPipe to set outPipe to pipe()
    set outFileHandle to outPipe's fileHandleForReading() 
```

至：

```
on doShellScriptInBackground_callback_(theCommand, selectorName)
    -- create pipe for standard output, and get reading file handle from it
    tell current application's NSPipe to set outPipe to pipe()
    set outFileHandle to outPipe's fileHandleForReading() 
```

而已。我测试了它，它对我有用。看来您刚刚将该行修改为上面的评论。

只是要彻底；该行可以写成多种方式：

```
tell current application's NSPipe to set outPipe to pipe() 
```

是相同的

```
set outPipe to current application's (NSPipe's pipe()) 
```

和

```
tell current application's NSPipe
    set outPipe to pipe()
end 
```

# yui - 如何在 YUI3 中使用查找功能？以及如何找到元标记列表？

> ID：13796513
> 
> 赞同：0
> 
> 时间：2012-12-10T07:12:44.540
> 
> 标签：yui

像 jQuery 一样，我们可以借助**“find”**函数收集**“anything”**类匹配的 DOM 元素的数组 我可以在 YUI3 中拥有相同的功能吗？

 ****编辑1：**

因为我在 php 'file_get_content' 函数的帮助下有网站源代码，
我想通过 YUI3 找到元标记列表。

这里我使用了名为
1.io-base 的模块：以 ajax 模式获取网站源代码 2.node
：通过代码实现功能。

我可以知道如何解析 responseText 以获取元标记列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:30:33.333

您可以像这样找到所有匹配元素的集合。

```
YUI().use('node', function(Y){
var myElements = Y.all('.classname');
}); 
```

如果您使用 io 模块，[用户指南](http://yuilibrary.com/yui/docs/io/)可能会有所帮助。

如果您的响应格式类似于 json，您将包含 json 模块并将 responseText 解析为 json，然后将其视为一个对象。如果返回的是 xml，请使用通过 io 调用返回的 responseXML 并使用本机 xml dom 函数。（用户指南上链接的示例仅显示了此类工作）

此外，如果您习惯 jQuery，请尝试使用[rosettastone](http://www.jsrosettastone.com/)网站**

# php - php5中代码的启动器

> ID：13796515
> 
> 赞同：0
> 
> 时间：2012-12-10T07:12:55.727
> 
> 标签：php, linux, process

我在 Linux 下有一个 php 代码`phpprog`，我可以像任何其他普通代码一样启动它

```
php5 phpprog 
```

或者

```
php5 phpprog& 
```

后者让进程在后台运行。但是，我希望能够

1.  在后台启动此过程
2.  自动停止此进程，无需搜索作业的 PID

为了实现这一点，我需要一些我调用的其他代码来`starter`启动实际的主进程，比如

```
php5 starter start 
```

并停止主要过程，例如

```
php5 starter stop 
```

实际主程序的名称可以硬编码在 中`starter`，我希望只有一个运行实例`phpprog`。

由于我在 php 方面不是很有经验，因此我希望能在代码的`starter`外观方面提供一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:33:50.597

您可以编写一个初始化脚本。这会在系统启动时启动您的应用程序。您也可以启动/停止/重新启动它。

[http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=2&chap=4](http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=2&chap=4)

# db2 - 如何从 AIX 上的另一个 DB2 实例连接远程 DB2 服务器？

> ID：13796518
> 
> 赞同：2
> 
> 时间：2012-12-10T07:13:06.147
> 
> 标签：db2

我在两个单独的 AIX 服务器上有两个实例。两个 DB2 数据库都配备了它们的示例数据库。我想从另一个实例连接一个 DB2 实例。

我是 DB2 的新手，想知道我该怎么做。

我已经执行了以下命令：

此路径是客户端实例：

```
#.  /home/db2inst2/sqllib/db2profile
db2 catalog tcpip node db2serverinst remote lpar1 server 50005 remote_instance ctginst1
db2 => terminate
DB20000I  The TERMINATE command completed successfully.
# db2 connect to db2serverinst user ctginst1
Enter current password for ctginst1: SQL1031N  The database directory cannot be found on the indicated file system.
SQLSTATE=58031 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:25:49.163

术语“连接到实例”是不正确的。正确的是附上：

```
Machine A
 db2inst1
  db-1
  db-2
  sample

Machine B
 db2inst2
  db-3
  db-4
  sample
 db2inst3
  sample 
```

如果您想将命令从机器 A 执行到机器 B，您必须在 db2inst1（目录 tcpip 节点）中对 db2inst2 AND/OR db2inst3 进行编目。请记住，您必须为每个编目对象指定不同的名称。

对远程实例进行编目后，您还可以发出数据库命令，但必须对远程数据库进行编目。您可以有一个远程样本和一个本地样本，但别名应该不同。

如果您将 db2inst2 实例编目为机器 A 的本地节点中的 db2inst2 节点。并且您将示例数据库编目为机器 A 的本地节点中的 sample-2 别名。您可以在机器 A 中执行。

```
 db2 attach to db2inst2
 db2 connect to sample-2 
```

附加是用于“管理”的事情，如列表应用程序、创建数据库等。连接是使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:52:40.410

您只对 DB2 实例进行了编目。您需要在远程服务器上对数据库进行编目：

```
db2 catalog database XXXX at node db2serverinst 
```

显然，您需要将 替换`XXXX`为远程数据库的实际名称。对数据库进行编目后，您可以连接：

```
db2 connect to XXXX user ctginst1 
```

请注意，这仅定义连接。如果不配置联合，您将无法从本地实例中的其他数据库访问此远程数据库中的对象。

# clearcase - ClearCase - 如何将用户与组中的某个项目分离

> ID：13796521
> 
> 赞同：1
> 
> 时间：2012-12-10T07:13:26.073
> 
> 标签：clearcase

是否可以仅为特定项目分配用户授权？或者，如果某个组中有他们将始终能够看到所有包含的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:20:36.083

最简单的方法是为除这些用户之外的所有人锁定项目的流。

```
 cleartool lock -nusers user1,user2,... stream:MyStream@\myPVob 
```

这不能很好地扩展，但 ClearCase 没有本机用户管理：它在 Vob 级别使用基于系统的用户管理（您可以限制对 Vob 及其主要或次要组的访问）。
请参阅“ [VOB 和视图访问控制](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_admin.doc/access-control.htm)”。
但它并不真正适用于 UCM 项目，因此锁定机制是一种快速解决方案。

注意：[Rational Team Concert](https://jazz.net/products/rational-team-concert/)包含一个完全重写的 ClearCase（“Jazz Source Control”），可以提供基于项目的细粒度用户访问管理。
ClearCase 不能。

# sql-server-2008 - 使用 CASE WHEN 时的语法错误

> ID：13796522
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:13:40.113
> 
> 标签：sql-server-2008

我想在 SQL Server 2008`where`的语句部分添加一个案例。`select`

```
SELECT * 
FROM CR_LOAN_DTL 
WHERE 
    LOAN_ID = 1
    AND REFERENCE_NO = CASE 
                          WHEN @i_loan_id = 0 THEN >=1 
                          CASE WHEN  @i_loan_id = 0 THEN REFERENCE_NO  >=1 and REFERENCE_NO  <=9999999999999 
                               ELSE  REFERENCE_NO = @i_loan_id 
                          END 
```

它给了我一个错误：

> *">" 附近的语法不正确*

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:57:18.827

您的`CASE`陈述不能返回`>=1`. 它需要返回一个值，而不是需要解析的逻辑语句。

一个选项可能是执行以下操作：

```
WHERE LOAN_ID=1 AND   
   ((@i_loan_id <> 0 AND REFERENCE_NO = @i_loan_id)
OR (@i_loan_id = 0 AND REFERENCE_NO BETWEEN 1 AND 9999999999999)) 
```

# php - gzencode 不压缩代码

> ID：13796526
> 
> 赞同：0
> 
> 时间：2012-12-10T07:14:41.120
> 
> 标签：php, compression, gzip

可能重复 -[为什么 php gzip 输出对我不起作用？](https://stackoverflow.com/questions/5801490/why-is-php-gzip-output-not-working-for-me)

我想测试我的网站是否真的被压缩了。

我使用了 gzencode($data,9) - 最大压缩。我还通过[http://www.gidnetwork.com/tools/gzip-test.php](http://www.gidnetwork.com/tools/gzip-test.php)检查了我的网站，以检查 gzip 是否正常工作并且它正在被 gzip 压缩。

但是，当我通过 firebug 或在 chrome 中检查请求时，我看不到压缩前和压缩后请求的大小有任何差异。我的意思是两者都是相同的。

即使上面的 gzib 测试工具在两种情况下都显示相同的数据：gzencode($data,0) 和 gzencode($data,9)

现在，我不明白为什么它在两种情况下都显示相同的页面大小。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:21:36.360

您可以使用另一种替代方法来完成这项工作。

```
 <?php
   ob_start("ob_gzhandler");
   ?>

  <html>
   <body>
      <p>This should be a compressed page.</p>
   </body>
 </html>

 <?php
  ob_end_flush();
  ?> 
```

笔记：

ob_gzhandler() 需要 zlib 扩展。 [ob_gzhandler](http://php.net/manual/en/function.ob-gzhandler.php)

# android - Android：提供者测试用例 2 和 getFilesDir()

> ID：13796529
> 
> 赞同：3
> 
> 时间：2012-12-10T07:14:56.897
> 
> 标签：android, android-contentprovider

我的应用程序的一部分涉及将 png 文件保存到我的本地文件目录，然后通过内容提供程序共享。

我通过写文件`getContext().openFileOutput`

但是，在我的内容提供程序中，`ParcelFileDescriptor`只会打开实际的 File 对象。因此，尝试通过使用 模拟出来的内容提供者来执行此操作`ProviderTestCase2`，以下代码不起作用：

```
return ParcelFileDescriptor.open(new File(getContext().getFilesDir(), filename), ParcelFileDescriptor.MODE_READ_ONLY) 
```

这是因为在通过代码提供给提供者的模拟上下文中指向`context.getFilesDir()`。上面的代码导致异常，因为不计为目录。这是预期的吗？`/dev/null``ProviderTestCase2``/dev/null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-14T10:05:36.120

这感觉就像一个笑话......文档说：

> 返回文件系统上存储使用 openFileOutput(String, int) 创建的文件的目录的绝对路径。

但是IsolatedContext来源是这样的：

```
@Override
public File getFilesDir() {
    return new File("/dev/null");
} 
```

因此，我们最好忽略该方法并尝试使用

```
@Rule
public TemporaryFolder tempFolder = new TemporaryFolder(); 
```

在出测试。

# sql - 如何重现“无法删除数据库，因为它当前正在使用”？

> ID：13796532
> 
> 赞同：2
> 
> 时间：2012-12-10T07:15:05.153
> 
> 标签：sql, sql-server, sql-server-2008

谁能告诉我如何重现错误“无法删除数据库，因为它当前正在使用”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:19:09.200

在 SQL Server Management Studio 中打开数据库并`select top 1000 rows`在任意表上说 a 并保持窗口/连接打开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:44:36.927

例子：

```
USE {yourDb} 
```

它将选择您的数据库，然后执行

```
DROP DATABASE  {yourDb} 
```

返回一条消息：无法删除数据库“{yourDb}”，因为它当前正在使用中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:19:11.133

例如：在 sql server management studio 中查询数据库，不要关闭查询选项卡。然后尝试删除 t

# apache - 如何在 Apache 的运行时访问/错误日志 LogFormat 中查找？

> ID：13796533
> 
> 赞同：0
> 
> 时间：2012-12-10T07:15:06.637
> 
> 标签：apache, debugging, logging, apache2

我想解析多个 apache 服务器的 access_log 和 error_log。但是我在解析日志时不知道 LogFormat。所以在此之前我想知道每个Apache中已经配置的LogFormat。

*   一种方法是我可以解析第一个 httpd.conf 并查找 LogFormat 和 CustomeLog" 字符串并获取日志格式。有没有其他方法可以通过任何命令或 apache 实用程序检查运行时日志格式？
*   LogFormat“常见的，组合的等”是否已经解决了问题？如果是，我可以为每种类型构建不同的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:09:09.403

> 有没有其他方法可以通过任何命令或 apache 实用程序检查运行时日志格式？

```
awk '/LogFormat/' httpd.conf 
```

> LogFormat“常见的，组合的等”是否已经解决了问题？如果是，我可以为每种类型构建不同的正则表达式吗？

不

> 许多 Apache 安装，包括大多数主要 Linux 发行版附带的安装，都使用多个包含文件来组装完整的配置。

# java - 拆分这个字符串？

> ID：13796534
> 
> 赞同：1
> 
> 时间：2012-12-10T07:15:08.100
> 
> 标签：java, string

我有一个外部文本文件，它是：

```
-To Kill a Mockingbird by Harper Lee.
-The Great Gatsby by Scott Fitzgerald.
-Hamlet by William Shakespeare.
-Then Catch in the Rye by J.D Salinger.
-One Hundred Years of Solitude by Gabriel Garcia Marquez.
-The Hobbit by J.R.R Tolkien.
-Moby Dick by Herman Melville.
-A Tale of two Cities by Charles Dickens.
-Don Quixoteby Miguel de Cervantes.
-Love in the Time of Cholera by Gabriel Garcia Marquez.
-Of Mice and Men by John Steinbeck.
-Fahrenheit 451 by Ray Bradbury.
-Stranger in a Strange Land by Robert Heinlein.
-Siddartha by Herman Heese.
-Atlas Shrugged by Ayn Rand.
-The Count of Monte Cristo by Alexandre Dumas.
-The Iliad by Homer.
-The Odyssey by Homer.
-A Wrinkle in Time by Madeleine L'Engle.
-Inferno by Dante Alighieri.
-Paradise Lost by John Milton.
-Alice's Adventures in Wonderland by Lewis Carroll.
-War and Peace by Leo Tolstoy.
-Frankenstein by Mary Shelley.
-Romeo and Juliet by William Shakespeare.
-Exodus by Leon Uris.
-1984 by George Orwell. 
```

我想要做的是拆分每一行的字符串并将它们存储在一个数组列表中我只是不知道为什么它在读取这个文本文件时从第一行跳转到第三行：我的代码：

```
bookSearch = new Scanner(new FileInputStream("src/booksNames.txt")).useDelimiter(" by ");
            books = new ArrayList<Books>();
            String storeName = "";
            String storeAuthor = "";

            while(bookSearch.hasNextLine())
            {

                storeName = bookSearch.next().split("by")[0];
                storeAuthor = bookSearch.next().split("(by)|(\\.)")[0];

                bookSearch.nextLine();              

                info = new Books(storeName, storeAuthor);
                books.add(info);
            } 
```

我得到的是哈珀李的《杀死一只知更鸟》，然后它跳到威廉莎士比亚的《哈姆雷特》！它只是一直忽略第二，第四，第六行等......任何帮助将不胜感激！

每个标题和作者都是单独的一行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:19:54.720

您在 loop.bookSearch.nextLine() 中调用了 bookSearch.next() 两次，每次都会跳到下一个对象。

```
while(bookSearch.hasNextLine())
            {

                storeName = bookSearch.next().split("by")[0]; 
                storeAuthor = bookSearch.next().split("(by)|(\\.)")[0]; // The error lies here, bookSearch.next() skips to the next object every time

                bookSearch.nextLine();              

                info = new Books(storeName, storeAuthor);
                books.add(info);
            } 
```

正确实施：

```
while(bookSearch.hasNextLine())
            {
                String bookString = bookSearch.nextLine();
                storeName = bookString.split("by")[0];
                storeAuthor = bookString.split("by")[1];

                info = new Books(storeName, storeAuthor);
                books.add(info);
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:20:08.527

发生这种情况是因为您在循环中调用`bookSearch.next()`了两次`while`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:20:05.113

您`bookSearch.next()`在循环内调用了两次，`bookSearch.nextLine()`一次调用了。

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。此方法可能会在等待输入扫描时阻塞，即使先前调用 hasNext() 返回 true。

```
while(bookSearch.hasNextLine())
{
      String[] book = bookSearch.next();
      storeName = book.split("by")[0];
      storeAuthor = book.split("(by)|(\\.)")[1];
      info = new Books(storeName, storeAuthor);
      books.add(info);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T07:20:16.110

使用这样的东西

```
try{
        FileReader fr=new FileReader("Test.txt");
        BufferedReader br=new BufferedReader(fr);

        while((str=br.readLine()) != null){
        strBuf.append(str);
                //here you can add the str to your arrayList

        }
        }catch(Exception e){

        } 
```

这里 Test.txt 是您的输入文件。此代码段将逐行获取数据

从文本文件。

希望这就是你要找的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T07:26:33.633

您可以使用以下代码读取文件。您还应该考虑以下几点。

*   您应该首先检查它是否包含“by”关键字，因为有一行不包含“by”，例如“Don Quixoteby Miguel de Cervantes.”。
*   您应该使用“ by”关键字之间的空格进行拆分，因为由于“Gatsby”还包含“by”，因此它也会将其拆分并给您错误的结果。

    ```
    public void readFile(String fileName) {
    DataInputStream in = null;
    try {
        in = new DataInputStream(new FileInputStream(new File(fileName)));
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String line;
        while ((line = br.readLine()) != null) {
            if (line.contains(" by ")) {
                String[] arr = line.split(" by ");
                String book = arr[0];
                String author = arr[1];

                System.out.println("Book : " + book + " Author : " + author + "\n");
                System.out.println("\n");
            } else {
                System.out.println(line + "\n");
            }
        }
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T07:31:27.573

你在那里大约90％。需要注意的一件事是[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)返回的内容-它会返回一个数组`String`，您正确地记下了它。但是，如果您为正在阅读的每一行创建数组并以这种方式执行处理，您会得到更好的服务。

另外，你打`next()`了两次电话。回想一下[`Scanner.next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)实际做了什么——最好创建局部变量来保存 the`String`或 split `String[]`。

# java - JAVA：调用未知对象类方法并传递它的参数

> ID：13796536
> 
> 赞同：4
> 
> 时间：2012-12-10T07:15:23.607
> 
> 标签：java, object, methods, parameters, instance

目标很简单，我想创建一个动态加载类的方法，访问它的方法并传递它们的参数值并在运行时获取返回值。

将被调用的类

```
class MyClass {

    public String sayHello() {

        return "Hello";
    }

    public String sayGoodbye() {

        return "Goodbye";
    }

    public String saySomething(String word){
        return word;
    }
} 
```

主班

```
public class Main {

    public void loadClass() {
        try {

            Class myclass = Class.forName(getClassName());

            //Use reflection to list methods and invoke them
            Method[] methods = myclass.getMethods();
            Object object = myclass.newInstance();

            for (int i = 0; i < methods.length; i++) {
                if (methods[i].getName().startsWith("saySome")) {
                    String word = "hello world";

                    //**TODO CALL OBJECT METHOD AND PASS ITS PARAMETER**
                } else if (methods[i].getName().startsWith("say")) {

                    //call method
                    System.out.println(methods[i].invoke(object));
                }

            }

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    private String getClassName() {

        //Do appropriate stuff here to find out the classname

        return "com.main.MyClass";
    }

    public static void main(String[] args) throws Exception {

        new Main().loadClass();
    }
} 
```

我的问题是如何使用参数调用方法并传递其值？还获取返回值及其类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:20:16.233

我认为你只是错过了这样一个事实，即你可以将参数传递给`invoke`, 作为`Object[]`：

```
Object result = methods[i].invoke(object, new Object[] { word }); 
```

或使用可变参数，如果您愿意：

```
Object result = methods[i].invoke(object, word); 
```

（以上两个调用是等价的。）

有关更多详细信息，请参阅文档[`Method.invoke`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:18:31.267

像这样简单地创建`MyClass`调用函数的对象

```
MyClass mc = new MyClass();
String word = "hello world";
String returnValue = mc.saySomething(word);
System.out.println(returnValue);//return hello world here 
```

或者这样做

```
Class myclass = Class.forName(getClassName());
Method mth = myclass.getDeclaredMethod(methodName, params);
Object obj = myclass.newInstance();
String result = (String)mth.invoke(obj, args); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:19:46.247

尝试 ：：

```
Class c = Class.forName(className); 
Method m = c.getDeclaredMethod(methodName, params);
Object i = c.newInstance();
String result = (String)m.invoke(i, args); 
```

# android - Windows 管理器，单击自定义 Spinner 时出现错误令牌异常

> ID：13796540
> 
> 赞同：1
> 
> 时间：2012-12-10T07:15:43.797
> 
> 标签：android, spinner

单击 Spinner 时出现此错误。

```
12-06 16:34:52.884: E/AndroidRuntime(21663): FATAL EXCEPTION: main
12-06 16:34:52.884: E/AndroidRuntime(21663): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@406a13c0 is not valid; is your activity running?
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.view.ViewRoot.setView(ViewRoot.java:445)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:181)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.view.Window$LocalWindowManager.addView(Window.java:526)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.app.Dialog.show(Dialog.java:269)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.app.AlertDialog$Builder.show(AlertDialog.java:907)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.widget.Spinner$DialogPopup.show(Spinner.java:664)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.widget.Spinner.performClick(Spinner.java:427)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.view.View$PerformClick.run(View.java:11928)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.os.Handler.handleCallback(Handler.java:587)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.os.Looper.loop(Looper.java:132)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at android.app.ActivityThread.main(ActivityThread.java:4025)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at java.lang.reflect.Method.invoke(Method.java:491)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
12-06 16:34:52.884: E/AndroidRuntime(21663):    at dalvik.system.NativeStart.main(Native Method)
12-06 16:34:53.034: D/dalvikvm(21663): GC_CONCURRENT freed 103K, 4% free 7454K/7687K, paused 6ms+17ms
12-06 16:34:55.214: I/Process(21663): Sending signal. PID: 21663 SIG: 9 
```

我已经浏览了以下链接，但没有找到我的问题的解决方案。所以请不要给我任何链接：

1.[链接一](https://stackoverflow.com/a/7631687/1395259)

2.[链接二](https://stackoverflow.com/a/4666072/1395259)

**这是我的代码。**

```
public class BeatSelectionActivity extends Activity
{

    private Button buttonBSBack,buttonBSEdit;
    private ListView listViewBSlist;
    private String[] beatName,beatNameid;
    private String[] outletName,outleId;
    private Typeface typeface;
    private TextView textViewBSTitle,textViewBSRoute;
    private Spinner spinnerBSBeatID;
    BeatSelectionHelper beatSelectionHelper;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lyt_beat_selection);

        buttonIdSeter();

        Object[] obj=beatSelectionHelper.getBeatInfo();
        beatNameid = (String[]) obj[0];
        beatName = (String[]) obj[1];
        spinnerBSBeatID.setAdapter(new RouteSelBaseAdapter());
        spinnerBSBeatID.setOnItemSelectedListener(new RouteItemSelectedListener());
    }
    @Override
    public void onBackPressed() {}
    void buttonIdSeter()
    {
        textViewBSTitle = (TextView) findViewById(R.id.textViewBSTitle);
        textViewBSRoute = (TextView) findViewById(R.id.textViewBSroute);
        typeface = Typefaces.get(getApplicationContext(), "Vietnamese.ttf");

        beatSelectionHelper = new BeatSelectionHelper(BeatSelectionActivity.this);
        ButtonOnClickListener buttonOnClickListener= new ButtonOnClickListener();

        buttonBSBack = (Button) findViewById(R.id.buttonBSBack);
        buttonBSEdit = (Button) findViewById(R.id.buttonBSEdit);

        spinnerBSBeatID = (Spinner) findViewById(R.id.spinnerBSBeatID);

        textViewBSTitle.setTypeface(typeface);
        textViewBSRoute.setTypeface(typeface);
        buttonBSBack.setTypeface(typeface);
        buttonBSEdit.setTypeface(typeface);

        listViewBSlist = (ListView) findViewById(R.id.listViewBSlist);

        buttonBSBack.setOnClickListener(buttonOnClickListener);
        buttonBSEdit.setOnClickListener(buttonOnClickListener);
    }

    class BeatSelBaseAdapter extends BaseAdapter
    {

        View row ;
        TextView textViewBSLOutlet;
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return outletName.length;
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return outletName[arg0];
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup arg2) {

            row = convertView;

            if (row == null)
            {
                //LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                LayoutInflater vi = LayoutInflater.from(getParent());
                row = vi.inflate(R.layout.lyt_beat_selection_listview,null);
            }
            textViewBSLOutlet = (TextView)row.findViewById(R.id.textViewBSLOutlet);
            textViewBSLOutlet.setTypeface(typeface);
            textViewBSLOutlet.setText(outletName[position]);
            return row;
        }
    }

    class ListViewLongClickListener implements OnItemLongClickListener
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
        {
            //pass two string(RetailerName,RetailerID) to OrderScreenActivity  

            Intent goOrderScreenActivity = new Intent(getParent(), CustomerInfoActivity.class);
            goOrderScreenActivity.putExtra("Flag", 1);
            goOrderScreenActivity.putExtra("outletName", outletName[arg2]);
            goOrderScreenActivity.putExtra("outletId", outleId[arg2]);
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            parentActivity.startChildActivity("CustomerInfoActivity", goOrderScreenActivity);
            //startActivity(goOrderScreenActivity);

            /*Intent goOrderScreenActivity = new Intent(getParent(), EditActivity.class);
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            parentActivity.startChildActivity("EditActivity", edit);
            return true;*/

            return false;
        }
    }

    class ButtonOnClickListener implements OnClickListener
    {
        @Override
        public void onClick(View v)
        {
            switch (v.getId())
            {
            case R.id.buttonBSBack:
                //finish();
                break;

            case R.id.buttonBSEdit:
                Intent i = new Intent(getParent(), OrderModifyActivity.class);
                TabGroupActivity parentActivity = (TabGroupActivity)getParent();
                parentActivity.startChildActivity("OrderModifyActivity", i);
                //startActivity(i);
                break;
            }
        }
    }

    class RouteSelBaseAdapter extends BaseAdapter
    {

        View row ;
        TextView textViewBSSBeatID;
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return beatName.length;
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return beatName[arg0];
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup arg2) {
            row = convertView;
            if (row == null)
            {
                //LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                LayoutInflater vi = LayoutInflater.from(getParent());
                row = vi.inflate(R.layout.lyt_beat_selection_spinner,null);
            }
            textViewBSSBeatID = (TextView)row.findViewById(R.id.textViewBSSBeatID);
            textViewBSSBeatID.setTypeface(typeface);
            textViewBSSBeatID.setText(beatName[position]);
            return row;
        }
    }

    class RouteItemSelectedListener implements OnItemSelectedListener
    {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            Object [] obj =beatSelectionHelper.getOutletInfo(beatNameid[arg2]);
            outletName=(String[]) obj[1];
            outleId=(String[]) obj[0];
            listViewBSlist.setAdapter(new BeatSelBaseAdapter());
            listViewBSlist.setOnItemLongClickListener(new ListViewLongClickListener());

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:33:55.557

我经历了这个问题，并浪费了大约 2 天的时间试图找到解决方案。但是，我没有从网上找到解决方案。

解决方案是从您的布局中指定 Spinner 模式，如下所示：

```
android:spinnerMode="dialog" 
```

或这个：

```
<Spinner style="@android:style/Widget.Spinner.DropDown" ... /> 
```

或来自java代码：

```
Spinner(Context context, int mode) 
```

希望我的回答对你有帮助

# iphone - 在应用商店更改 BY

> ID：13796544
> 
> 赞同：1
> 
> 时间：2012-12-10T07:15:53.433
> 
> 标签：iphone, ios

我刚刚将我的应用程序上传到应用商店。搜索了一段时间，但找不到答案。在应用程序商店中，它显示为实名的“应用程序名称”。有什么办法可以改变吗？我知道更改卖家名称不是很容易，但我见过个别开发者在 BY 之后没有显示真实姓名。那么我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:19:02.457

个人开发人员可以让[DBA](http://en.wikipedia.org/wiki/Doing_business_as)以除真实姓名之外的身份开展业务。您需要通过电子邮件与 Apple 联系，他们会要求您将 DBA 的副本传真给他们，以验证您是否有权使用它，他们会自行决定更换名称。他们可能对您从个人类型帐户（您的真实姓名）切换到企业类型帐户（DBA）有疑问，因此可能值得提前给他们发送电子邮件，看看他们是否允许您这样做无需创建新的开发者帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:19:12.290

您是个人开发人员。因此会显示您的全名。如果您想更改它，请以公司开发者身份加入 Apple 开发者计划。

# android - 这个 RIL SIMPBD 在“I/RIL SIMPBD(1409):[1409] debug, main:entered”中指的是哪个类

> ID：13796546
> 
> 赞同：2
> 
> 时间：2012-12-10T07:16:05.327
> 
> 标签：android, android-ui, ril

```
I/RIL SIMPBD( 1409): [1409] debug, main: entered
I/RIL SIMPBD( 1409): [1409] info, await_modem_powered_on: Wait to be triggered...
I/RIL SIMPBD( 1409): [1409] info, await_modem_powered_on: SIM_PHONEBOOK Normal startup...
I/RIL SIMPBD( 1409): [1409] info, await_modem_powered_on: triggered
I/RIL_MAL ( 1405): NETLNK_LIB::Entering function netlnk_socket_create
I/RIL_MAL ( 1405): NETLNK_LIB::Create Netlink  Socket...
I/RIL_MAL ( 1405): NETLNK_LIB::(fn: netlnk_socket_create)::SUCCESS 
```

请帮我看看这是什么`RIL SIMPBD`意思？，即它指的是哪个类？如果你们中的任何人能告诉我指的是哪个课程，我将更加感激`RIL_MAL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T07:37:41.570

All these are tags defined in hardware section . WRT to Ril.C and Ril.Cpp

# sharepoint - 如何获取所有用户的上次登录详细信息/时间？

> ID：13796547
> 
> 赞同：1
> 
> 时间：2012-12-10T07:16:33.183
> 
> 标签：sharepoint, powershell

我正在尝试删除过去 30 天内处于非活动状态的用户帐户。我尝试获取用户信息列表。检查了它的所有属性和字段，但找不到与上次登录时间相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:29:21.383

你可以做这样的事情

```
public DateTime Get(string attr, string UserName)
        {

            DomainConfiguration domainConfig = new DomainConfiguration();
            using (new SPMonitoredScope("AD Properties"))
            {
                using (DirectoryEntry domain = new DirectoryEntry("LDAP://" + domainConfig.DomainName, domainConfig.UserName, domainConfig.Password))
                {
                    //DirectorySearcher searcher = new DirectorySearcher(domain, "(|(objectClass=organizationalUnit)(objectClass=container)(objectClass=builtinDomain)(objectClass=domainDNS))");
                    DirectorySearcher searcher = new DirectorySearcher(domain);
                    searcher.PageSize = 1000;
                    searcher.Filter = "(SAMAccountName='" + UserName + "')";
                    //searcher.Filter = "(|(objectCategory=group)(objectCategory=person))";
                    searcher.Filter = "(&(objectClass=user) (cn=" + UserName + "))";
                    var user = searcher.FindOne();
                    DateTime LastLogon = DateTime.FromFileTime((Int64)user.Properties["lastLogon"].Value);
                    return LastLogon;
                }
            }
        } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T09:22:44.650

我不知道为什么它给了我一些比我预期的更旧的日期。但至少它会编译和运行。

```
using System.DirectoryServices.AccountManagement;

private static DateTime? GetUserIdFromDisplayName(string displayName)
    {
        // set up domain context
        using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
        {
            // find user by display name
            UserPrincipal user = UserPrincipal.FindByIdentity(ctx, displayName);

            if (user != null)
            {
                return user.LastLogon; 
            }
            else
            {
                return null;
            }
        } 
    } 
```

# vbscript - Excel工作表行的匹配字符串的列号

> ID：13796556
> 
> 赞同：0
> 
> 时间：2012-12-10T07:17:50.920
> 
> 标签：vbscript

我编写了一个代码来搜索每个数组变量，如果存在于工作表的每一行中。现在，当找到匹配项时，我需要知道列号是什么，在哪里找到了搜索字符串。知道如何使用 vb 脚本来获得它吗？

```
ParentColmnCount=ParentColmnCount-1

IntRow6=2

DataCount=0

Do While objSheet6.Cells(IntRow6,1).Value <> ""

For DataCount=0 to UBound(VMHArray)
    If Not objSheet6.Range(objSheet6.Cells(IntRow6,1),objSheet6.Cells(IntRow6,ParentColmnCount)).Find(VMHArray(DataCount)) Is Nothing Then
MsgBox(objSheet6.Range(objSheet6.Cells(IntRow6,1),objSheet6.Cells(IntRow6,ParentColmnCount)).Find(VMHArray(DataCount)).Columns)

    End If
      Next

IntRow6=IntRow6+1

Loop 
```

***更新：***

```
 IntRow6=2
 DataCount=0
 Do While objSheet6.Cells(IntRow6,1).Value <> ""

 For DataCount=0 to UBound(VMHArray)

  Set rSearch = objSheet6.Cells(IntRow6,1).EntireRow
  Set rFound = rSearch.Find(VMHArray(DataCount))

        If Not rFound Is Nothing Then
                 adrFirst = rFound.Address

               Do
                   MsgBox(IntRow6)
                   MsgBox(rFound.Column + 1)
                   MsgBox(adrFirst)
                   rCol=rFound.Column
                   objSheet6.Cells(IntRow6,rCol + 2)= objSheet6.Cells(IntRow6,rCol + 5)
                   Set rFound = rSearch.FindNext(rFound)
               Loop Until rFound.Address <> adrFirst And Not rFound Is Nothing
       End If

 Next

 IntRow6=IntRow6+1
 Loop 
```

但似乎控件陷入了无限循环并不断给出 21 作为其第一个匹配的列号。产生如下输出：

```
 2 33 $AF$2     2 33 $AF$2         2 33 $AF$2  ....... 
```

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:15:20.413

演示脚本来展示如何使用 .Find：

```
 Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec   = oFS.BuildPath(oFS.GetAbsolutePathname("..\xls"), "13763603.xls")
  Dim oXls   : Set oXls = CreateObject("Excel.Application")
  Dim oWb    : Set oWb  = oXls.Workbooks.Open(sFSpec)
  Dim oWs    : Set oWs  = oWb.Worksheets(2)
  Dim rSearch, rFound, adrFirst

  Set rSearch = oWs.Cells(1, 1).EntireRow
  Set rFound = rSearch.Find("b1")
  WScript.Echo 1, "TypeName(rFound):", TypeName(rFound), rFound.Row, rFound.Column

  Set rSearch = oWs.Range(oWs.Cells(1, 1), oWs.Cells(5, 3)) 
  Set rFound = rSearch.Find("nix")
  WScript.Echo 2, "TypeName(rFound):", TypeName(rFound)

  Set rFound = rSearch.Find("alpha")
  If Not rFound Is Nothing Then
     adrFirst = rFound.Address
     Do
         WScript.Echo 3, "TypeName(rFound):", TypeName(rFound), rFound.Row, rFound.Column
         Set rFound = rSearch.FindNext(rFound)
     Loop Until rFound.Address = adrFirst
  End If

  oWb.Close  
  oXls.Quit 
```

此表的输出：

![阿尔法表](../Images/0f4705b7e833a9aceb8230fe31dfa3e1.png)：

```
1 TypeName(rFound): Range 1 2
2 TypeName(rFound): Nothing
3 TypeName(rFound): Range 1 3
3 TypeName(rFound): Range 2 1
3 TypeName(rFound): Range 4 2
3 TypeName(rFound): Range 5 3 
```

**更新：**

从输出中可以看出

```
----------------------
4 1 TypeName(rFound): Range 1 3
Wahr     rFound.Address <> adrFirst
Falsch   rFound Is Nothing
Wahr     Not rFound Is Nothing
Wahr     rFound.Address <> adrFirst And Not rFound Is Nothing 
```

我的诊断代码插入到上面的脚本中：

```
 WScript.Echo "----------------------"
  Dim nCnt : nCnt = 0
  Set rFound = rSearch.Find("alpha")
  If Not rFound Is Nothing Then
     adrFirst = rFound.Address
     Do
         nCnt = nCnt + 1
         If nCnt > 9 Then WScript.Echo "Aborting" : Exit Do : End If
         WScript.Echo 4, nCnt, "TypeName(rFound):", TypeName(rFound), rFound.Row, rFound.Column
         Set rFound = rSearch.FindNext(rFound)
         WScript.Echo CStr(rFound.Address <> adrFirst), vbTab, "rFound.Address <> adrFirst"
         WScript.Echo CStr(rFound Is Nothing), vbTab, "rFound Is Nothing"
         WScript.Echo CStr(Not rFound Is Nothing), vbTab, "Not rFound Is Nothing"
         WScript.Echo CStr(rFound.Address <> adrFirst And Not rFound Is Nothing), vbTab, "rFound.Address <> adrFirst And Not rFound Is Nothing"
         WScript.Echo
     Loop Until rFound.Address <> adrFirst And Not rFound Is Nothing
  End If 
```

替换我精心制作**的简单**条件不是一个好主意

```
 Loop Until rFound.Address = adrFirst 
```

有一些**复杂**的东西- 不是说：傻 - 喜欢

```
Loop Until rFound.Address <> adrFirst And Not rFound Is Nothing 
```

到底是什么让你这么做？

# sitecore - 是否有另一种方法可以在 Sitecore 中打开“开发者中心”。目前它没有在我的浏览器中打开（检查所有）

> ID：13796559
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:05.647
> 
> 标签：sitecore, sitecore6

是否有另一种方法可以在 Sitecore 中打开“开发者中心”。目前它没有在我的浏览器中打开（检查所有）&我用桌面选项打开。在 Internet Explorer 中，它的 Sitecore 选项在左下角可见，但单击时它不会打开。

所以任何人都知道如何打开开发者中心，这是因为我想创建新的子布局。

我没有任何答案，请注意并给我一个关于这个解决方案的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:01:36.643

I highly recommend NOT using Developer Center. To create a sublayout, it's much easier to use the content editor and Visual Studio. Here's the steps I use:

1.  Copy an existing sublayout ASCX in my solution and rename to my new sublayout name.
2.  Clean up namespaces and class names as needed.
3.  In Content Editor, navigate to **\sitecore\Layout\Sublayouts**
4.  Insert a new sublayout definition
5.  In the Ascx File field on the sublayout, specify the path to my sublayout ASCX that I just created
6.  In the Placeholder field on the sublayout, specify the placeholder.

If you have to use Developer Center, then you are correct to be trying to access it via the Desktop using the **sitecore > Development Tools > Developer Center** menu item. If the dialog does not open, do you get an error?

With Internet Explorer, you may want to ensure you are in compatibility mode if you are using IE9 or greater. Also try opening it in another browser like Firefox or Chrome to see if it's a configuration issue or a browser issue.

# c# - XNA 游戏编程：围成一圈生成敌人

> ID：13796561
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:18:22.723
> 
> 标签：c#, xna, sprite, spawning

有人可以给我一些关于如何在一个圆圈中产生敌人的方向（XNA 编程）吗？

我希望敌人沿着窗口边界外的圆周随机生成。我希望它们沿直线穿过窗口的中心，然后移到它们开始位置的另一侧（或尽可能靠近该位置）。

理想情况下，这将创造一个敌人从看似四面八方随机出现的环境。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:40:16.190

只需生成一个介于 0 和 360 之间的随机数（如果使用弧度，则为 0 和 2π），并根据您想要的圆的半径使用三角函数。

# c# - Windows 应用程序不支持给定路径的格式

> ID：13796562
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:23.030
> 
> 标签：c#, winforms

我尝试使用以下代码获取文件路径。

```
string script = File.ReadAllText(Application.StartupPath + "D:\\Tax Rouding   Projects\\10-12-12 TaxRoundingUtility\\TaxRoundingUtility\\Scripts\\GP_SOP_AdjustTax.sql"); 
```

但我收到错误：不支持给定路径的格式

如果我尝试从 Windows 资源管理器打开文件.. 我可以去文件位置..

```
D:\Tax Rouding Projects\10-12-12 TaxRoundingUtility\TaxRoundingUtility\Scripts\ 
```

但是为什么我不能使用 c# 代码...

我在路上错过的任何事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:22:16.653

问题出在这里

```
Application.StartupPath + "D:\Tax Rouding Projects\10-12-12 TaxRoundingUtility\TaxRoundingUtility\Scripts\GP_SOP_AdjustTax.sql" 
```

这可能最终会给你类似的东西

> “c:\program files\myappfolder\D:\Tax Roding Projects\10-12-12 TaxRoundingUtility\TaxRoundingUtility\Scripts\GP_SOP_AdjustTax.sql”

这是一个无效的路径。仅附加您需要的部分路径（第二部分只是一个示例）

```
Application.StartupPath + @"\TaxRoundingUtility\Scripts\GP_SOP_AdjustTax.sql". 
```

还要确保转义文件路径字符串中的“\”。

**编辑**：正如 Dante 在问题的评论中提到的那样，如果您的目标路径是固定的且已知的，则不需要 Application.StartppPath。只需加载/读取您拥有完整路径的文件。

# objective-c - 为什么边框粗细会随着按钮颜色的变化而变化（蓝色为 2px 边框）？

> ID：13796563
> 
> 赞同：1
> 
> 时间：2012-12-10T07:18:29.200
> 
> 标签：objective-c, ios, uibutton, border

我正在开发一款游戏，出于某种原因，边框厚度会根据按钮的颜色而变化。直到我在应用程序上放置背景图像后才出现此问题，因此我不确定是什么原因造成的。我拍了几张截图来说明我的意思。出于某种原因，当边框为蓝色的按钮时，边框粗细变为 2px 而不是 1px。

此外，控制按钮的边框也存在一些问题。控制按钮是指顶部的 6 个按钮，按红色、蓝色、棕色、绿色、紫色和黄色的顺序排列。

以下是截图：

![截图#1](../Images/260de0731110b54c475097f3a814b476.png)![截图#2](../Images/88ba8d407aa89c5e79987f7c55f4f470.png)

我通过在背景中放置一个按钮来创建边框，该按钮从 x-1,y-1 开始，宽度为 width+2，高度为 height+2。这里有一段代码可以给你一个想法：

```
 UIButton *borderButton = [UIButton buttonWithType:UIButtonTypeCustom];
 borderButton.frame = CGRectMake((controlX-1), (controlY-1), 42, 32);
 borderButton.backgroundColor = [UIColor blackColor];
 [self.view addSubview:borderButton];

 UIButton *controlButton = [UIButton buttonWithType:UIButtonTypeCustom];
 [controlButton addTarget:self
                      action:@selector(doMove:)
            forControlEvents:UIControlEventTouchDown];
 controlButton.frame = CGRectMake(controlX, controlY, 40, 30);
 controlButton.tag = 500 + i;
 tmpColor = [self.colors objectAtIndex:i];
 controlButton.backgroundColor = tmpColor;
 [self.view addSubview:controlButton]; 
```

此代码取自一个循环，其中 controlX 和 controlY 为控制按钮应开始的位置提供 x/y 值。

如果有人知道如何解决这个问题，我将不胜感激。如果我以错误的方式处理边界，并且有一种更简单且问题更少的方式来实现相同的外观，我也愿意这样做，因为我最终不会有太多代码需要更改。提前感谢任何可以帮助我解决这个恼人的 UI 故障的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:56:49.020

实现带边框的自定义按钮的最简单方法是使用按钮的图层：

```
#import <QuartzCore/QuartzCore.h>
...
UIButton *controlButton = [UIButton buttonWithType:UIButtonTypeCustom];
 [controlButton addTarget:self
                      action:@selector(doMove:)
            forControlEvents:UIControlEventTouchDown];
 controlButton.frame = CGRectMake(controlX, controlY, 40, 30);
 controlButton.tag = 500 + i;

 // Set layer properties
 controlButton.layer.borderWidth = 1.0;
 controlButton.layer.borderColor = [UIColor blackColor].CGColor;
 controlButton.layer.cornerRadius = 5.0; // if you want rounded corners...

 tmpColor = [self.colors objectAtIndex:i];
 controlButton.backgroundColor = tmpColor;
 [self.view addSubview:controlButton]; 
```

您可能还需要检查按钮和其他元素（如标签）是否位于整数坐标处，以避免图像模糊。要更正坐标，请使用[CGRectIntegral](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectIntegral)

PS 对于复杂的动画/游戏逻辑，最好使用[Cocos2D之类的框架](http://www.cocos2d-iphone.org)

# php - mysql_fetch_array() 不吐任何东西

> ID：13796565
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:35.920
> 
> 标签：php

这是我的代码：

```
$campagin_id = $_SESSION['campagin_id_for_camp'];

$query = "SELECT * FROM survey_result where campagin_id = ".$campagin_id;

$conn=mysql_connect($dbconfig['db_hostname'],$dbconfig['db_username'],$dbconfig['db_password']) or die(mysql_error());

mysql_select_db($dbconfig['db_name'],$conn);

$exec_query =mysql_query($query) or die(mysql_error());

$row=mysql_fetch_array($exec_query);
echo "<br> row = ".$row;
while ($row=mysql_fetch_array($exec_query)){
    echo "I am In";

} 
```

问题是我没有得到任何东西，`$row`我无法进入 while 循环，当我尝试达到`echo`的值时没有任何显示`$row`，没有错误。你能帮我找出我的代码中的问题吗？

ps：数据库是他们的。我已经检查了 . 的相应值的查询`$campagin_id`。而且当我试图回显`$exec_query`它时，它也回显了这个：**资源ID＃8**

PPS：数据库对于每个ID都有超过7条记录，所以如果我在进入while之前多次调用mysql_fetch_array（$ exec_query）并不重要环形。在`$campagin_id`会话中，它们是数据库中存在的许多记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:44:34.753

你已经写了`$row=mysql_fetch_array($exec_query)`，然后你正在`echo`做某事。并且您在一段时间内使用相同的。

代替：

```
$row=mysql_fetch_array($exec_query);
echo "<br> row = ".$row;
while ($row=mysql_fetch_array($exec_query)){
    echo "I am In";
} 
```

使用这个（据我所知，你不应该在之前使用`$row=mysql_fetch_array()`过一次）：

```
while ($row=mysql_fetch_array($exec_query)){
    echo "I am In";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:28:58.967

如果查询返回`Resource id #8`，则表示它是成功的——即没有错误。该查询可能没有返回任何行，因此表中没有与给定匹配的行`campagin_id`。

您还分别调用`mysql_fetch_array()`了两次，您不应该这样做，因为您的 while 循环将跳过第一行，因为调用它会将结果集中的指针向前移动一个。

此外，如果您想查看数组的内容，则不能像尝试那样回显数组，请使用`print_r()`或`var_dump()`.

我建议添加一些代码来处理未找到的行：

```
if($exec_query && mysql_num_rows($exec_query) > 0)
{
    while ($row=mysql_fetch_array($exec_query)){
        echo "Row: " . print_r($row, true);
    }
}
else
{
    echo 'None found';
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T07:31:21.693

试试这个代码。

```
<?
$campagin_id = $_SESSION['campagin_id_for_camp'];
$query = "SELECT * FROM survey_result where campagin_id = ".$campagin_id;

mysql_connect($dbconfig['db_hostname'],$dbconfig['db_username'],$dbconfig['db_password']) or die(mysql_error());
mysql_select_db($dbconfig['db_name']);

$exec_query =mysql_query($query) or die(mysql_error());
while ($row=mysql_fetch_assoc($exec_query)) {
    echo "<br/> row = <pre>".print_r($row)."</pre><br/>";
}
?> 
```

# ruby-on-rails-3 - Heroku 中的 CNAME - 别名使用什么？

> ID：13796566
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:36.837
> 
> 标签：ruby-on-rails-3, heroku, dns

我正在尝试在 Heroku 中使用自定义域，但说明对我不起作用。

Heroku 说明位于[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

我在主机上将 CNAME 更改为几件事，因为 Heroku 中的说明真的不清楚。

对于 CNAME 别名，我尝试了几件事：

1.  www.example.com
2.  例子.com
3.  万维网
4.  proxy.heroku.com

对于我的地址，它们都指向同一个东西：[www.morning-harbor.herokuapp.com](http://morning-harbor.herokuapp.com)

我使用 moniker.com 的 DNS 服务器。但是，当我在命令行上尝试时

```
host www.example.com 
```

它指向我的旧虚拟服务器 IP 地址，而不是 Heroku 或 moniker.com

哪一个是正确的 CNAME 别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:27:43.063

从 www 到 morning-harbor.herokuapp.com 创建一个 CNAME

您不能为顶点记录使用 CNAME (yourdomain.com)

# c# - 使用 DateTime 对 C# ArrayList 进行排序

> ID：13796568
> 
> 赞同：4
> 
> 时间：2012-12-10T07:18:43.630
> 
> 标签：c#, sorting, collections, arraylist

我有一个`ArrayList`包含以下字段的对象的 C#。我在`ArrayList`. 我的问题是我需要`ArrayList`根据`StartDate`系统中可用的 DateTime 变量进行排序。

```
public int id { get; set; }
public string title {get; set;}
public bool allDay { get; set; }
public string start { get; set; }
public string end { get; set; }
public string color { get; set; }
public DateTime startDate { get; set; }
public DateTime endDate { get; set; }
public string Location { get; set; }
public string StartDatestr { get; set; }
public string EndDatestr { get; set; }
public string StartTime { get; set; }
public string EndTime { get; set; }
public bool Alert { get; set; }
public bool Repeat { get; set; }
public Int32 RepeatDays { get; set; }
public Int32 CalendarID { get; set; }
public int CustomerNo { get; set; }
public string CustomerName { get; set; }
public bool IsProspect { get; set; }
public string Description { get; set; } 
```

有人可以启发我吗？我试过`.Sort()`了，但它什么也没做（它的转储尝试排序`ArrayList`有我知道的对象）。

提前致谢。

**更新：**

```
List<Appointment> appointments = new List<Appointment>(); 
```

我创建了`List`如上。现在我可以排序了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T07:20:40.353

尝试通过创建如下比较

```
public class ComparerDateTime : IComparer
{
    public int Compare(object x, object y)
    {
        MYCLASS X = x as MYCLASS;
        MYCLASS Y = y as MYCLASS;

        return X.date.CompareTo(Y.date);
    }
}

 MYCLASSList.Sort(new ComparerDateTime ()); 
```

**或者**

创建通用集合而不是您可以执行此操作

尝试[**`Enumerable.OrderBy`**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)操作将为您工作..您需要为此包含 linq

```
IEnumerable<Pet> query = arrayList .OrderBy(x=> x.startDate ); 
```

如果创建的列表如下所示，则尝试使用 linq 选项

```
List<MYCLASS> arrayList  = new List<MYCLASS>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:33:05.530

您应该尝试将该组属性放入一个类中，然后创建一个泛型`List<NewClass>`，然后您可以使用`IComparable`和`IComparer`按特定字段排序。

# java - @WebFilter 未在我的 Glassfish 中处理

> ID：13796569
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:48.203
> 
> 标签：java, servlets, glassfish-3, servlet-filters

我的代码中有一个具有以下设置的过滤器。我映射了值请求中的所有内容

```
@WebFilter(value="/*",  dispatcherTypes={DispatcherType.REQUEST, DispatcherType.FORWARD})
public class MyFilter implements Filter {
    public void init(FilterConfig fConfig) throws ServletException {
        logger.info("Inside init of MyFilter");
    }
} 
```

我的 web.xml 配置是这样声明的

```
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0"> 
```

当部署到 Glassfish 3.1.2 时，我在启动期间检查了服务器日志，但甚至没有调用我的 init 方法。也没有调用错误或异常。

任何人都知道如何排除故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:06:39.450

根据[教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnagb.html)

> 使用 @WebFilter 注释在 Web 应用程序中定义过滤器。这个注解是在一个类上指定的并且包含关于被声明的过滤器的元数据。带注释的过滤器必须至少指定一种 URL 模式。这是通过使用注释上的 urlPatterns 或 value 属性来完成的。所有其他属性都是可选的，具有默认设置。**当注解的唯一属性是 URL 模式时，使用 value 属性；当还使用其他属性时，使用 urlPatterns 属性。**

由于您的注释具有更多属性，您应该使用“urlPatterns”属性而不是“value”

# c# - mvc 和 webapi 之间的身份验证（单独的域/应用程序）

> ID：13796570
> 
> 赞同：16
> 
> 时间：2012-12-10T07:18:49.717
> 
> 标签：c#, asp.net-mvc, authentication, cross-domain, asp.net-web-api

我正在为以下场景寻找好的想法/资源/实现

[位于http://mywebsite.com](http://mywebsite.com)的 MVC 网站

[http://myapi.com](http://myapi.com)上的 Webapi REST 服务

重要 - 请注意单独的域/应用程序..

用户登录网站并通过 JSONP/CORS 从 API 获取数据

显然我不希望用户使用基本身份验证在 webapi 上进行身份验证。但是 API 也暴露给 Android/IOS 应用程序，所以我需要基本的身份验证

我考虑过从 MVC 站点返回一个令牌，然后在 webapi 站点上编写一个 DelegatingHandler 来使用该令牌进行身份验证，但我想要一些输入，或者甚至更好的解决方案

我为这个场合做了一个漂亮的图表：

![图表](../Images/c129eac109935c138edc824974416e16.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T12:30:08.343

虽然 JSONP 也可以考虑使用[CORS ，但](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)[这里](https://stackoverflow.com/questions/12732147/cors-with-webapi-for-xmlhttprequest)有一些 WebApi 实现示例。

考虑为你的代币遵循一个标准（至少是一个草案），而不是创建你自己的。Json Web Token (JWT) 似乎是一种很好的方法，[这里](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html)的规范包括格式并确定加密或签名方法。有一些库支持这种令牌，例如[Thinkteckture 身份模型](https://github.com/thinktecture/Thinktecture.IdentityModel.40) [，本文](http://leastprivilege.com/2012/05/25/json-web-token-jwt-support-in-thinktecture-identitymodel/)介绍了该库和 JWT 的一些用法。[谷歌在这里](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)有一个很好的开发指南。

免责声明，只考虑上面阅读了一些关于 OAuth 和 JWT 标准化[批评](http://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/)的内容。

如果您确实使用了 HTTP 标头，我不确定您是否[需要自定义标头](https://stackoverflow.com/questions/7802116/custom-http-authorization-header)（@Vipul）“授权：”标头用于此类信息。

如果您使用自定义令牌，请确保它具有到期日期，如果您想防止重放攻击并使用众所周知的算法进行签名或加密，请考虑使用[随机数。](http://en.wikipedia.org/wiki/Cryptographic_nonce)

同意您的观点，[委托处理程序](http://codebetter.com/johnvpetersen/2012/04/04/moving-from-action-filters-to-message-handlers/)是放置令牌验证的好地方。在堆栈中调用 ActionFilter 的时间[比必要的晚得多](http://blogs.msdn.com/b/kiranchalla/archive/2012/05/06/asp-net-mvc4-web-api-stack-diagram-currently-in-development.aspx)，中间立场是实现[System.Web.Http.AuthorizeAttribute](http://www.codeproject.com/Tips/376810/ASP-NET-WEB-API-Custom-Authorize-and-Exception-Han)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:18:26.063

token solution sounds good.

Get the authentication token from MVC application, you can send that token with each API request in some custom header. Create an ActionFilterAttribute and in OnActionExecuting you can verify the token and act accordingly.

# javascript - 获得职位：相对于IE9工作

> ID：13796572
> 
> 赞同：0
> 
> 时间：2012-12-10T07:18:53.890
> 
> 标签：javascript, jquery, asp.net, html, css

`position: relative`我在 IE9 中工作时遇到了一些麻烦。这是一个带有以下代码的[演示：](http://jsfiddle.net/QWGta/10/)

```
<div style="overflow:scroll;height:120px;">
<table id="table"  width="100%">
    <tr style="position:relative;background-color:#1b72a4;">
        <td>fff
        </td>
         <td>fff
        </td>
         <td>fff
        </td>
         <td>fff
        </td>
         <td>fff
        </td>
         <td>fff
        </td>
    </tr>
    <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>
    <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>
    <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>
    <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>
     <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>

     <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>

     <tr>
        <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
         <td>data
        </td>
    </tr>

</table>
</div> 
```

我通过为第一行提供如下样式来固定第一行：`style="position:relative;"`

但是，上述样式仅适用于 IE7。我必须在所有版本的 IE 中固定第一行。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:31:26.080

这就是你想要的？您说您正在**修复**第一行，我认为您希望始终位于顶部，所以`position: relative;`不是正确的选择，`position: absolute;`而是使用

[**演示**](http://jsfiddle.net/QWGta/11/)

CSS

```
div {
  display: inline-block;
}

#table {
   width: 600px;
}

.fixed {
   position:absolute;
   background-color:#1b72a4;
}

.fixed td {
   width: 100px;
}

#table tr:nth-child(2) td {
   padding-top: 20px;
} 
```

# c# - 使用正则表达式拆分类似csv的字符串

> ID：13796581
> 
> 赞同：3
> 
> 时间：2012-12-10T07:19:31.710
> 
> 标签：c#, regex, parsing, csv, split

我有一个正则表达式模式定义为

```
var pattern = ",(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))"; 
```

我正在尝试拆分一些类似 CSV 的字符串来获取字段

一些适用于此正则表达式的示例字符串是

```
_input[0] = ""; // expected single blank field
_input[1] = "A,B,C"; // expected three individual fields
_input[2] = "\"A,B\",C"; // expected two fields 'A,B' and C
_input[3] = "\"ABC\"\",\"Text with,\""; // expected two fields, 'ABC"', 'Text with,'
_input[4] = "\"\",ABC\",\"next_field\""; // expected two fields, '",ABC', 'next_field' 
```

但是，这不起作用

```
_input[5] = "\"\"\",ABC\",\"next_field\""; 
```

我期待三个领域

```
'"', 'ABC"', 'next_field' 
```

但我得到了两个领域

```
'"",ABC', 'next_field' 
```

任何人都可以帮助这个正则表达式吗？

我认为奇怪的部分是第二列在值的开头和结尾没有引号，只是在结尾处。所以第一列的值为空，第二列是ABC"

谢谢，罗伯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:57:50.447

我认为您需要更具体地说明您的逻辑是如何处理双引号，因为您的要求似乎相互冲突。

我认为最接近您想要实现的快速版本是（请注意 1）缺少双引号转义，因为我正在使用外部工具来验证正则表达式，并且 2）我已经更改了检索方式匹配的值，请参见底部的示例）：

```
(?<Match>(?:"[^"]*"+|[^,])*)(?:,(?<Match>(?:"[^"]*"+|[^,])*))* 
```

它有以下逻辑：

*   如果有双引号，则将所有内容都包含在其中，直到命中结束双引号。
*   当到达结束双引号时，紧随其后的双引号也将包括在内。
*   如果下一个字符不是逗号，则将其包含在内，并再次测试上述内容。
*   如果是逗号，则结束当前匹配并在逗号后开始新的匹配。

但是，上述逻辑与您对索引 4 和 5 的期望相冲突，因为我得到：

```
[4] = '""' and 'ABC","next_field"'
[5] = '"""' and 'ABC","next_field"' 
```

如果您能指出为什么上述逻辑不符合您的需求/期望，我将使用完全有效的正则表达式编辑我的答案。

要检索您的值，您可以这样做：

```
string pattern = @"(?<Match>(?:""[^""]*""+|[^,])*)(?:,(?<Match>(?:""[^""]*""+|[^,])*))*";

string[] testCases = new[]{
  @"",
  @"A,B,C",
  @"A,B"",C",
  @"ABC"",""Text with,",
  @""",ABC"",""next_field""",
  @""""",ABC"",""next_field"""
};

foreach(string testCase in testCases){
  var match = System.Text.RegularExpressions.Regex.Match(testCase, pattern);
  string[] matchedValues = match.Groups["Match"].Captures
    .Cast<System.Text.RegularExpressions.Capture>()
    .Select(c => c.Value)
    .ToArray();
} 
```

# sharepoint-2010 - 如何在工具箱中获取 SharePoint 2010 控件

> ID：13796586
> 
> 赞同：1
> 
> 时间：2012-12-10T07:20:03.863
> 
> 标签：sharepoint-2010

我的应用程序使用 Visual Studio 2010 在 SharePoint 2010 中开发应用程序。我创建了一个可视化 webpart 并添加了一个`<SharePoint:SPCalendarView ID="EventsCalendar1" width="100%" runat="server"></SharePoint:SPCalendarView>`我还发现智能感知中出现了许多其他控件。如何将这些控件添加到工具箱？是否有关于如何使用这些控件的文档？

# javascript - 如何在javascript中将字符串拆分为参数和选项

> ID：13796594
> 
> 赞同：5
> 
> 时间：2012-12-10T07:20:21.053
> 
> 标签：javascript, regex

我想获取参数数组，这样我就可以将它与[optparse-js 库](https://github.com/jfd/optparse-js)一起使用，所以如果我有类似的东西

```
-f foo -b -a -z baz bar 
```

我想要这样的数组

```
["-f", "foo", "-b", "-a", "-z", "baz", "bar"] 
```

它应该适用于内部有转义引号和长 GNU 选项的字符串。到目前为止，我有匹配字符串的正则表达式

```
/("(?:\\"|[^"])*"|'(?:\\'|[^'])*')/g 
```

`"das"`它匹配类似or`"asd\"asd"`或`'asd'`or的字符串`'sad\'asd'`

我可以为此使用正则表达式还是我需要一个解析器（比如使用 PEG）如果它匹配正则表达式会很好，这样我就可以做到

```
-p "hello b\"ar baz" -f /^ [^ ]+ $/ 
```

**更新**：在@Damask 的帮助下，我创建了这个正则表达式：

```
/('(\\'|[^'])*'|"(\\"|[^"])*"|\/(\\\/|[^\/])*\/|(\\ |[^ ])+|[\w-]+)/g 
```

它适用于这样的字符串：

```
echo -p "hello b\"ar baz" -f /^ [^ ]+ $/ 
```

它返回

```
['echo', '-p', '"hello b\"ar baz"', '-f', '/^ [^ ]+ $/'] 
```

但如果在这样的字符串上失败：

```
echo "&copy;\\\\" abc "baz" 
```

它匹配命令和两个参数而不是 3 个参数[演示](https://regex101.com/r/megSzL/1)

如果参数没有像 "foo"baz 这样的空格，它应该是数组中的一项，需要包含引号，但我会从字符串中删除未转义的那些（就像在 bash 中执行`echo "foo"bar`echo 时会得到一个 foobar 参数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-03T17:25:10.500

一些评论：

*   引号的原始正则表达式是这个
    `"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'`
    例子：[http ://regex101.com/r/uxqApc/2](http://regex101.com/r/uxqApc/2)

*   这部分`(?= :? | $ )`将始终解析为 true，并且无用

*   这部分`/(\\/|[^/])+/[gimy]*`如果这是一个正则表达式（或任何分隔项）
    ，您必须盲目处理转义任何内容。像这样`/[^/\\]*(?:\\[\S\s][^/\\]*)*/[gimy]*`。
    否则它将匹配`/..\\//`不正确的。

*   这个表达式`(?: \\ \s | \S )+`在交替序列中是第一个，即在这个之前`[\w-]+`。由于 not whitespace`\S`是 的超集`[\w-]`，这意味着`[\w-]+`永远不会到达。

进行更正并将它们重新组合在一起得到这个正则表达式：
`/("[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|$)|(?:\\\s|\S)+)/`

演示：

JavaScript - [http://regex101.com/r/cuJuQ8/1](http://regex101.com/r/cuJuQ8/1)
PCRE - [http://regex101.com/r/cuJuQ8/2](http://regex101.com/r/cuJuQ8/2)

[格式化](http://regexformat.com)

```
 (                             # (1 start)
      "
      [^"\\]* 
      (?: \\ [\S\s] [^"\\]* )*
      "
   |  
      ' 
      [^'\\]* 
      (?: \\ [\S\s] [^'\\]* )*
      '
   |  
      / 
      [^/\\]* 
      (?: \\ [\S\s] [^/\\]* )*
      /
      [gimy]* 
      (?= \s | $ )
   |  
      (?: \\ \s | \S )+
 )                             # (1 end) 
```

* * *

* * *

*如果你也需要像空格（引号或正则表达式之外）也是分隔符一样解析它，那就是它：*

`/((?:"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|$)|(?:\\\s|\S))+)(?=\s|$)/`

演示：

JavaScript - [http://regex101.com/r/cuJuQ8/3](http://regex101.com/r/cuJuQ8/3)
PCRE - [https://regex101.com/r/cuJuQ8/4](https://regex101.com/r/cuJuQ8/4)

格式化

```
 (                             # (1 start)
      (?:
           "
           [^"\\]* 
           (?: \\ [\S\s] [^"\\]* )*
           "
        |  
           ' 
           [^'\\]* 
           (?: \\ [\S\s] [^'\\]* )*
           '
        |  
           / 
           [^/\\]* 
           (?: \\ [\S\s] [^/\\]* )*
           /
           [gimy]* 
           (?= \s | $ )
        |  
           (?: \\ \s | \S )
      )+
 )                             # (1 end)
 (?= \s | $ ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-04T16:33:50.767

我真的很喜欢正则表达式，但有时简单的正则表达式和简单函数的组合可以完成同样的工作，但更容易调试和维护，尤其是当不熟悉*（复杂）*正则表达式的开发人员加入项目时。

所以这是另一种方法，请参见下面的解释。

它使用这个相当复杂的样本进行测试，其中包含许多空格或根据需要转义双引号的参数：

> `echo "&copy;\\\\" abc "baz" "foo bar dummy" -d "marty \\\"mc fly" -f "avb eer\"" -p 2 "asd\"asd" -a 3`

**代码片段**

```
function commandArgs2Array(text) {
  const re = /^"[^"]*"$/; // Check if argument is surrounded with double-quotes
  const re2 = /^([^"]|[^"].*?[^"])$/; // Check if argument is NOT surrounded with double-quotes

  let arr = [];
  let argPart = null;

  text && text.split(" ").forEach(function(arg) {
    if ((re.test(arg) || re2.test(arg)) && !argPart) {
      arr.push(arg);
    } else {
      argPart = argPart ? argPart + " " + arg : arg;
      // If part is complete (ends with a double quote), we can add it to the array
      if (/"$/.test(argPart)) {
        arr.push(argPart);
        argPart = null;
      }
    }
  });

  return arr;
}

let result = commandArgs2Array('echo "&copy;\\\\" abc "baz" "foo bar  dummy" -d "marty \\\"mc fly" -f "avb eer\"" -p 2 "asd\"asd" -a 3');
console.log(result);
```

**解释**

首先，使用空格字符分割参数。

对于每个参数，我们检查它是*完整*的还是*不完整*的参数

> 一个*完整*的论点是一个论点，它是
> 
> *   用双引号括起来
> *   根本没有被双引号包围
> 
> 其他所有情况都代表一个*不完整*的论点。要么
> 
> *   不完整参数的开头（以双引号开头）
> *   空间
> *   不完整参数的一部分，可以包含转义的双引号
> *   不完整参数的结尾（以双引号结尾）

这就是所有的人！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T07:23:08.823

你为什么不简单地使用拆分功能？

```
var arr = myString.split(/\s+/); 
```

您最好将正则表达式作为参数传递，以避免在分隔符为`\t`或有多个空格等情况下出现错误。

**编辑：**

如果您的论点有空格并用引号引起来，我认为您找不到单个正则表达式。认为您应该首先找到带有空格的参数（`/"(.*?)"/`在第 1 组中您将获得参数），将它们添加到数组中，然后从字符串中删除它们，然后才使用上述拆分方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T07:47:54.413

试试这个：

```
var a = '-f foo "ds  df s\\" da" -b -a -z baz bar';
a.match(/([\w-]+|"(\\"|[^"])*")/g) 
```

返回`[ "-f", "foo", ""ds df s\" da"", "-b", "-a", "-z", "baz", "bar"]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T07:51:11.157

这将起作用：

```
var input = '-p "hello b\"ar baz" -f /^ [^ ]+ $/ -c -d -e'
var arr = input.split(' -');
var out = [];
for(var i = 0; i < arr.length; i++){
    if(~arr[i].indexOf(' ')){
        out = out.concat([arr[i].substring(0, arr[i].indexOf(' ')), arr[i].substring(arr[i].indexOf(' ')+1)])
    }else{
        out = out.concat('-'+arr[i]);
    }
} 
```

输出：

```
["-p", ""hello b"ar baz"", "f", "/^ [^ ]+ $/", "-c", "-d", "-e"] 
```

我知道这不是一个花哨的 1 行正则表达式，但它的工作方式与预期一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-03T10:15:20.027

```
 var string = "-f foo -b -a -z baz bar";
        string = string.split(" ");
    var stringArray = new Array();
    for(var i =0; i < string.length; i++){
        stringArray.push(string[i]);
    }
    console.log(stringArray); 
```

输出将是这样的控制台

数组 [“-f”、“foo”、“-b”、“-a”、“-z”、“baz”、“bar”]

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-27T06:50:39.043

这个问题的另一个选择：[https ://github.com/elgs/splitargs](https://github.com/elgs/splitargs)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-04-30T21:53:39.960

好的，即使我为这个问题创建了一个赏金，我在[Regex match even number of letters的帮助下找到了答案](https://stackoverflow.com/questions/2045175/regex-match-even-number-of-letters#2045208)

我的正则表达式看起来像这样：

```
/('((?:[^\\]*(?:\\\\)*\\')+|[^']*)*'|"(?:(?:[^\\]*(?:\\\\)*\\")+|[^"]*)*"|(?:\/(\\\/|[^\/])+\/[gimy]*)(?=:? |$)|(\\\s|\S)+|[\w-]+)/ 
```

[带演示](https://regex101.com/r/uxqApc/1)

**编辑**：@sin 建议制作更好的正则表达式：

```
/("[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|(?:\/(\\\/|[^\/])+\/[gimy]*)(?=:? |$)|(\\\s|\S)+|[\w-]+)/ 
```

# javafx-2 - 从 javafx 平台运行后返回结果

> ID：13796595
> 
> 赞同：18
> 
> 时间：2012-12-10T07:20:23.587
> 
> 标签：javafx-2, javafx

我正在开发 JavaFX 应用程序，在我的场景中是显示在 JavaFX 中创建的密码提示，该密码提示带有两个选项`OK`和`Cancel`. 我已返回用户输入的密码。

我的显示密码对话框类是 -

```
public static String showPasswordDialog(String title, String message, Stage parentStage, double w, double h) {
    try {
        Stage stage = new Stage();
        PasswordDialogController controller = (PasswordDialogController) Utility.replaceScene("Password.fxml", stage);
        passwordDialogController.init(stage, message, "/images/password.png");
        if (parentStage != null) {
            stage.initOwner(parentStage);
        }
        stage.initModality(Modality.WINDOW_MODAL);
        stage.initStyle(StageStyle.UTILITY);
        stage.setResizable(false);
        stage.setWidth(w);
        stage.setHeight(h);                
        stage.showAndWait();
        return controller.getPassword(); 
    } catch (Exception ex) {
         return null;
    } 
```

我的代码在哪里显示密码提示如下，实际上这个提示会显示在其他 UI 上，所以我需要把它包含在里面`Platform.runlater()`，否则它会抛出`Not on FX application thread`. 我需要显示此密码提示，直到我得到正确的提示。如果我在 runlater 中包含显示密码，我如何获得密码的值。

还有其他更好的方法吗？

```
final String sPassword = null;

          do {
            Platform.runLater(new Runnable() {

                @Override
                public void run() {
                     sPassword = JavaFXDialog.showPasswordDialog(sTaskName + "Password", "Enter the password:", parentStage, 400.0, 160.0);
                }
            });

            if (sPassword == null) {
                System.out.println("Entering password cancelled.");
                throw new Exception("Cancel");
            }
        } while (sPassword.equalsIgnoreCase("")); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-10T16:03:04.800

我建议将代码包装在一个`FutureTask`对象中。`FutureTask`是一种有用的构造（除其他外），用于在一个线程（通常是一个工作线程，在您的情况下为事件队列）上执行一部分代码并在另一个线程上安全地检索它。`FutureTask#get`将阻塞直到`FutureTask#run`被调用，因此您的密码提示可能如下所示：

```
final FutureTask query = new FutureTask(new Callable() {
    @Override
    public Object call() throws Exception {
        return queryPassword();
    }
});
Platform.runLater(query);
System.out.println(query.get()); 
```

作为`FutureTask`实现 Runnable，您可以将其直接传递给`Platform#runLater(...)`. `queryPassword()`将在事件队列中被调用，随后调用 get 阻塞直到该方法完成。当然，您将希望循环调用此代码，直到密码实际匹配。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-11T00:07:51.613

*重要的*

此代码适用于以下*特定情况：您的代码不在 JavaFX 应用程序线程上*，并且您想要调用 JavaFX 应用程序线程上的代码向用户显示 GUI，然后在继续处理之前从该 GUI 获取结果关闭 JavaFX 应用程序线程。

在下面的代码片段中调用 CountdownLatch.await 时，您不能在 JavaFX 应用程序线程上。如果您在 JavaFX 应用程序线程上调用 CountDownLatch.await，您将死锁您的应用程序。除此之外，如果您已经在 J​​avaFX 应用程序线程上，则不需要调用 Platform.runLater 来在 JavaFX 应用程序线程上执行某些操作。

大多数时候您都知道您是否在 JavaFX 应用程序线程上。如果您不确定，您可以通过调用[Platform.isFxApplicationThread()](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#isFxApplicationThread%28%29)检查您的线程。

* * *

使用[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)的替代方法。不过，我更喜欢 Sarcan 的方法；-)

```
final CountDownLatch latch = new CountDownLatch(1);
final StringProperty passwordProperty = new SimpleStringProperty();
Platform.runLater(new Runnable() {
    @Override public void run() {
        passwordProperty.set(queryPassword());
        latch.countDown();
    }
});
latch.await();      
System.out.println(passwordProperty.get()); 
```

* * *

下面是一些可执行示例代码，演示了使用 CountdownLatch 暂停非 JavaFX 应用程序线程的执行，直到 JavaFX 对话框检索到结果，然后非 JavaFX 应用程序线程可以访问该结果。

应用程序会阻止应用程序的 JavaFX 启动器线程继续运行，直到用户在 JavaFX 对话框中输入正确的密码。在输入正确密码之前，不会显示访问权限阶段。

![输入密码](../Images/ff2c33c26ad4ea63779ce0b6cd6ab404.png)  ![授予访问权限](../Images/bc25aea7ab2957bd29b28015ce55350b.png)

```
import javafx.application.*;
import javafx.beans.property.*;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.text.TextAlignment;
import javafx.stage.*;

import java.util.concurrent.CountDownLatch;

public class PasswordPrompter extends Application {
  final StringProperty passwordProperty = new SimpleStringProperty();
  @Override public void init() {
    final CountDownLatch latch = new CountDownLatch(1);

    Platform.runLater(new Runnable() {
      @Override public void run() {
        passwordProperty.set(new PasswordPrompt(null).getPassword());
        latch.countDown();
      }
    });

    try {
      latch.await();
    } catch (InterruptedException e) {
      Platform.exit();
    }

    System.out.println(passwordProperty.get());
  }

  @Override public void start(final Stage stage) {
    Label welcomeMessage = new Label("Access Granted\nwith password\n" + passwordProperty.get());
    welcomeMessage.setTextAlignment(TextAlignment.CENTER);

    StackPane layout = new StackPane();
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 20px;");
    layout.getChildren().setAll(welcomeMessage);
    stage.setScene(new Scene(layout));

    stage.show();
  }

  public static void main(String[] args) { launch(args); }
}

class PasswordPrompt {
  final Window owner;

  PasswordPrompt(Window owner) {
    this.owner = owner;
  }

  public String getPassword() {
    final Stage dialog = new Stage();
    dialog.setTitle("Pass is sesame");
    dialog.initOwner(owner);
    dialog.initStyle(StageStyle.UTILITY);
    dialog.initModality(Modality.WINDOW_MODAL);
    dialog.setOnCloseRequest(new EventHandler<WindowEvent>() {
      @Override public void handle(WindowEvent windowEvent) {
        Platform.exit();
      }
    });

    final TextField textField = new TextField();
    textField.setPromptText("Enter sesame");
    final Button submitButton = new Button("Submit");
    submitButton.setDefaultButton(true);
    submitButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        if ("sesame".equals(textField.getText())) {
          dialog.close();
        }
      }
    });

    final VBox layout = new VBox(10);
    layout.setAlignment(Pos.CENTER_RIGHT);
    layout.setStyle("-fx-background-color: azure; -fx-padding: 10;");
    layout.getChildren().setAll(textField, submitButton);

    dialog.setScene(new Scene(layout));
    dialog.showAndWait();

    return textField.getText();
  }
} 
```

上述程序将密码打印到屏幕和控制台纯粹是出于演示目的，显示或记录密码不是您在真实应用程序中会做的事情。

# c# - 创建一个弹出aspx页面并通过关闭按钮关闭..？

> ID：13796597
> 
> 赞同：-5
> 
> 时间：2012-12-10T07:20:31.350
> 
> 标签：c#, asp.net

我想在一个按钮上创建一个 aspx 弹出页面，然后在该弹出窗口中应该有一个关闭按钮，并且通过该关闭按钮弹出将被关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:33:51.440

创建一个 ID 为“popUpDiv”的 Div，并将所有需要的控件放入其中。

和你的点击按钮

```
<asp:Button onclick="popup('popUpDiv')" ID="Button1" runat="server" Text="Click to Close CSS Pop Up" /> 
```

在这里尝试[演示](http://www.pat-burt.com/csspopup.html)

使用这个[JS 文件](http://www.pat-burt.com/csspopup.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:19:06.957

我会推荐[jQueryUI 的 Dialog](http://jqueryui.com/dialog/)而不是摆弄手动定位和事件处理。然后你可以使用：

```
$('#somediv').dialog(); 
```

# asp.net-mvc - Knockout Js 自定义字典绑定 MVC

> ID：13796598
> 
> 赞同：2
> 
> 时间：2012-12-10T07:20:31.977
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4, knockout.js, knockout-2.0

我遇到了另一个问题，这可能是次要的。

我现在有以下结构：

[ViewModel 代码]

```
public class ResultModel
{
    public Dictionary<Person, List<Person>> dictPeople { get; set; }
    public string dictPeopleJson { get; set; }
    public ResultModel()
    {
        dictPeople = new Dictionary<Person, List<Person>>();
    }
}

public class Person
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
} 
```

[控制器代码]

```
public ActionResult Index()
    {
        var p1 = new Person();
        p1.ID = 100;
        p1.Name = "John";
        p1.Surname = "Smith";

        var p2 = new Person();
        p2.ID = 104;
        p2.Name = "John";
        p2.Surname = "Harvard";

        var p3 = new Person();
        p3.ID = 109;
        p3.Name = "Kate";
        p3.Surname = "Robinson";

        var p4 = new Person();
        p4.ID = 116;
        p4.Name = "Kate";
        p4.Surname = "Smith";

        var p5 = new Person();
        p5.ID = 130;
        p5.Name = "Kate";
        p5.Surname = "Jane";

        List<Person> lstPerson1 = new List<Person>();
        lstPerson1.Add(p1);
        lstPerson1.Add(p2);

        List<Person> lstPerson2 = new List<Person>();
        lstPerson1.Add(p3);
        lstPerson2.Add(p4);
        lstPerson2.Add(p5);

        var vm = new ResultModel();
        vm.dictPeople.Add(new Person() {ID = 001, Name = "John", Surname = "Family"}, lstPerson1);
        vm.dictPeople.Add(new Person() {ID = 002, Name = "Kate", Surname = "Family"}, lstPerson2);
        vm.dictPeopleJson = JsonConvert.SerializeObject(vm.dictPeople, Formatting.Indented);
        vm.dictPeople = null;
        return View(vm);
} 
```

[CSHTML 代码]

```
<h2>Results</h2>
<table>
    <tbody data-bind="template: { name: 'tblResult', foreach: dictPeopleJson() }"></tbody>
</table>
<script id="tblResult" type="text/html">
    <tr>
        <td data-bind="foreach: key">
            <table>
                <td data-bind="text: ID"></td>
                <td data-bind="text: Name"></td>
                <td data-bind="text: Surname"></td>
            </table>
        </td>        
        <td>
            <table data-bind="foreach: value">
                <td data-bind="text: ID"></td>
                <td data-bind="text: Name"></td>
                <td data-bind="text: Surname"></td>
            </table>    
        </td>
    </tr>
</script>
<script type="text/javascript">
    var ResultModel = function(m) {
        var self = this;       
        self.dictPeopleJson = ko.observableArray(mapDictionaryToArray(m), function(person) {
            var per = new Person(person);
            return per;
        });
    };

    var Person = function(person) {
        var self = this;
        self.ID = ko.observable(person.Id);
        self.Name = ko.observable(person.Name);
        self.Surname = ko.observable(person.Surname);
    };

    function mapDictionaryToArray(dictionary) {
        var result = [];
        for (var key in dictionary) {
            if (dictionary.hasOwnProperty(key)) {
                result.push({ key: key, value: dictionary[key] }); 
            }  
        }

        return result;
    }

    var data = @(Html.Raw(Json.Encode(Model)));
    var dataFromServer = ko.utils.parseJson(data.dictPeopleJson);

    console.log(dataFromServer);  
    ko.applyBindings(new ResultModel(dataFromServer));

    console.log("apply binding");
</script> 
```

我正在尝试显示，例如：

```
001 John Family     100 John Smith  104 John Harvard

002 Kate Family     109 Kate Robinson   116 Kate Smith ... etc 
```

但是输出只返回最后一行绑定（并且不显示字典的关键部分），

```
116 Kate    Smith

130 Kate    Jane 
```

John 家庭的值丢失，数组仅包含 Kate 家庭的值

请问为什么会这样？转换为 json 字符串后，字符串中将显示所有值，但控制台窗口仅显示 kate 家族（字典中的最后一项）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:49:37.130

请使用此行进行调试

vm.dictPeople = null;

它假设不在那里

# unit-testing - 访问模型属性单元测试

> ID：13796603
> 
> 赞同：0
> 
> 时间：2012-12-10T07:20:44.167
> 
> 标签：unit-testing

我在单元测试中得到模型，比如

```
// Arrange
var c = new MyController();

//Act
var result = c.Index(null,null);
var model = result.ViewData.Model; 
```

但是该模型具有值，例如 ActionName

如何访问该值？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:35:48.327

是`ViewData.Model`类型`object`。您需要将其转换为正确的类型，如下所示：

```
MyModel model = ViewData.Model as MyModel;
// access model.SomeProperty 
```

# python - 具有关键优先级的精灵运动问题

> ID：13796605
> 
> 赞同：1
> 
> 时间：2012-12-10T07:20:50.907
> 
> 标签：python, pygame, key, game-physics

好吧，我在屏幕上遇到了精灵移动的问题。我有某种方式我希望事情发生如下：

*   当我按下左移动键并按住它的同时按下右移动键，我希望精灵向右移动，直到我的手指离开右键，然后它会继续向左直到我也从左侧移开手指移动键。
*   我也希望这种方法用于向上/向下键
*   除此之外，当我按下向上或向下键之一，然后按下左/右键之一时，我希望看到精灵向左或向右移动，直到其中一个也未被按下。

总而言之，我希望最近的方向键按下优先移动，当它未按下时，我希望下一个最近按下的键优先移动。我也不想要对角线运动，但到目前为止这还不是问题。

到目前为止，这是我的代码

```
m=pygame.key.get_pressed()
if m[K_d]:
    movey=0
    movex=speed
elif m[K_a]:
    movey=0
    movex=-speed
elif m[K_w]:
    movex=0
    movey=-speed            
elif m[K_s]:
    movex=0
    movey=speed 
```

这完成了我想要的 50%。问题是，代码本身优先考虑正在发生的事情，所以结果是当我按下“A”键时，我向左移动，然后同时按下“D”键，我向右移动。然后，如果我只是按“D”键，我会向右移动，但是当我也按“A”键时，当我想在那个点向左移动时，我会继续向右移动。我尝试过 if/not/and 嵌套不同的方式，但到目前为止都失败了。

我该如何解决？

编辑：这是我在 Bartlomiej 的帮助下想出的。

```
 if e.type==KEYDOWN:     
        if e.key==pygame.K_a:              
            keylist.append(1)
            #keylist.reverse()
            print keylist[-1:]
        if e.key==pygame.K_d:
            keylist.append(2)
            #keylist.reverse()
            print keylist[-1:]

    if e.type==pygame.KEYUP:
        if e.key==pygame.K_a:                
            keylist.remove(1)
            print keylist                
        if e.key==pygame.K_d:
            keylist.remove(2)
            print keylist

    if keylist[-1:]==[1]:
        walk=[-spd, 0]
        print 'WTF MOVE LEFT'
    elif keylist[-1:]==[2]:
        walk=[spd, 0]
        print 'WTF MOVE RIGHT'
    else:
        print 'WTFFFFFF'
        walk=[0, 0] 
```

这可以按我的意愿工作，我现在需要做的就是将其最小化并使其作为一个函数更优雅，但我现在明白了。再次感谢 Bartlomiej 帮助我更好地理解 python 和编码。真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:58:03.500

我总是这样解决问题：（部分解决方案）：

```
for event in pygame.event.get():
    if event.type == pygame.QUIT:
        pygame.quit()
    if event.type == KEYDOWN:     
        if event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()
        if event.key == pygame.K_LEFT:                
            x_speed=3    
        if event.key == pygame.K_RIGHT:
            player.moveright()
            x_speed=-3             
        if event.key == pygame.K_UP:                
            y_speed=3               
        if event.key == pygame.K_DOWN:                
            y_speed=-3

    if event.type == pygame.KEYUP:
        if event.key == pygame.K_LEFT and x_speed == 3:                
            x_speed=0                
        if event.key == pygame.K_RIGHT and x_speed == -3:
            x_speed=0                
        if event.key == pygame.K_UP and y_speed == 3:
            y_speed=0                
        if event.key == pygame.K_DOWN and y_speed == -3:
            y_speed=0 
```

当未按下前一个键时，这不会停止移动。

编辑：这并非不可能，只是没那么有用。例如，您可以有 2 个模仿堆栈的列表。当列表为空时，您的角色将不会移动。每次按下键时，您都会将键附加到列表的末尾。每次键入时，您都会从列表中删除该键。这样，最近按下的键将位于列表的末尾，如果您取消按下最后一个最近的键，也将位于列表的末尾。

一个小例子：

```
keylist = []
for event in pygame.event.get():
    if event.type == KEYDOWN:     
        if event.key == pygame.K_LEFT:                
            keylist.append(-1)    
        if event.key == pygame.K_RIGHT:
            keylist.append(1)            

    if event.type == pygame.KEYUP:
        if event.key == pygame.K_LEFT:                
            keylist.reverse().remove(-1)                
        if event.key == pygame.K_RIGHT:
            keylist.reverse().remove(1) 
```

在 move 方法中，您可以尝试以下操作：如果列表中的最后一个元素存在，则将其移动到正确的方向。

```
if(not keylist[-1:]):
    character.move(direction=keylist[-1])
else:
    character.move(direction=0) 
```

# iphone - predicateForEventsWithStartDate 函数：这是一个错误吗？

> ID：13796607
> 
> 赞同：10
> 
> 时间：2012-12-10T07:21:00.790
> 
> 标签：iphone, objective-c, ios, ios5

当使用 predicateForEventsWithStartDate 函数时，看起来返回的事件位于大约 4 年的时间间隔内。这是一个错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T06:54:07.730

是的，这似乎是一个错误，我也有同样的经历。predicateForEventsWithStartDate: 仅返回从开始日期起 4 年时间间隔内的事件。位于时间间隔之外的所有其他事件都不会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:19:20.693

您可以通过选择间隔（选择开始日期和结束日期）返回事件：

```
NSDateComponents *components = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:[NSDate date]];
[components setDay:1];
[components setMonth:1];
[components setYear :[components year] - 1 ];
NSDate *startDate = [CURRENT_CALENDAR dateFromComponents:components];

NSDateComponents *EndComponents = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:[NSDate date]];
[EndComponents setDay:1];
[EndComponents setMonth:1];
[EndComponents setYear:[EndComponents year] + 1];
NSDate *endDate = [CURRENT_CALENDAR dateFromComponents:EndComponents];

NSArray *calendarArray = nil;
if(systemVersion < 6.0)
{
     calendarArray = [yourEventStore calendars];
}
else
{
     calendarArray = [yourEventStore calendarsForEntityType:EKEntityTypeEvent];
}
NSPredicate *predicate = [yourEventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:calendarArray];
[arrayOfEvents addObjectsFromArray:[yourEventStore eventsMatchingPredicate:predicate]]; 
```

# user-interface - 如何索引第一行

> ID：13796609
> 
> 赞同：1
> 
> 时间：2012-12-10T07:21:19.637
> 
> 标签：user-interface, powershell, datagridview

在 dataGridView 上，第一行是列名。

我该如何解决这个问题，并对网格的其余部分进行排序？

我的代码：

```
$dataGridView1.Width = 500
$dataGridView1.Height = 200
$dataGridView1.DataBindings.DefaultDataSourceUpdateMode = 0
$dataGridView1.Name = "dataGrid1"
$dataGridView1.DataMember = ""
$dataGridView1.Left = 30
$dataGridView1.Top = 55
$dataGridView1.ColumnCount = 4
$row = @( "Machine", "IP" , "OS", "Domain")
$dataGridView1.Rows.Add($row)
$dataGridView1.SelectedRows[0].Index
$dataGridView1.ReadOnly = $true
$dataGridView1.CurrentCell = $dataGridView1.Item(0,1) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:27:21.010

为什么不使用这样的列名？

```
$dataGridView1.ColumnCount = 4    
#$row = @( "Machine", "IP" , "OS", "Domain")

$dataGridView1.Columns[0].name = "Machine"
$dataGridView1.Columns[1].name = "IP"
$dataGridView1.Columns[2].name = "OS"
$dataGridView1.Columns[3].name = "Domain" 
```

# java - imageio.read 用 mac

> ID：13796611
> 
> 赞同：1
> 
> 时间：2012-12-10T07:21:23.130
> 
> 标签：java, macos, javax.imageio

我面临着非常糟糕的问题。我有一个程序试图读取图像文件，我正在做一些操作。从 Windows 运行的相同代码，当我尝试在 apple mac mini（操作系统：10.7）中运行相同的代码时，它卡住了我注意到，当编译器开始运行时， `ImageIO.read(file)`它卡住了（没有异常和错误） ang 传递正确的文件并且文件不为空。谁能告诉可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-25T10:35:25.790

问题可能来自您的 VM 参数，当您使用`-XstartOnFirstThread`.
如果此参数打开，则 AWT 将无法加载并使程序挂起。要解决这个问题，您可以添加`-Djava.awt.headless=true`告诉 AWT 根本不加载。

来源：[http ://bugs.java.com/bugdatabase/view_bug.do?bug_id=8019496](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8019496)

# iphone - 在 iPhone (iOS) 上通过 URL 拨打 ussd 代码

> ID：13796614
> 
> 赞同：1
> 
> 时间：2012-12-10T07:22:05.143
> 
> 标签：iphone, html, objective-c, ios, ussd

是否可以使用 Safari 或电子邮件（通过超链接）在 iPhone 上通过 URL 拨打 USSD 代码。

我可以拨打普通电话号码，但苹果似乎不允许我们在网址中使用 * 或 # ？真的是这样吗？

这就是我通过 URL（超链接）拨打的电话：

```
<a href="tel:*325#">Dial</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:42:02.010

显然，在目标 c 代码中不使用私有 API 是不可能的（苹果不会在苹果商店接受）。

请参阅下面提到的网址：

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)

这就是他们所提到的：“具体来说，如果 URL 包含 * 或 # 字符，电话应用程序不会尝试拨打相应的电话号码”。

希望它可以帮助别人。

问候，

雷诺琼斯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-30T12:08:32.703

尝试

```
replace:   #     to     %23 
```

```
this one:
<a href="tel:*325%23">Dial</a>

or this one:
<a href="tel://*325%23">Dial</a>
```

# java - gae 中的 struts2:: 获取在本地工作但不在域中工作的 Url

> ID：13796615
> 
> 赞同：0
> 
> 时间：2012-12-10T07:22:06.173
> 
> 标签：java, google-app-engine, struts2, urlfetch

我正在尝试使用 struts2 框架获取 URL。它在本地环境中有效，但在我托管域时无效。但是当我尝试使用简单的 servlet 应用程序访问相同的 URL 时，它在本地和域中都有效。在域中托管时，struts2 应用程序是否需要任何配置更改？

我正在获取的 URL 在我的防火墙内。

```
try {
    String QueryString=request.getQueryString();
    URL dataURL = new URL("http://test.com/contact-insert-entry?emid=" + QueryString);
    System.out.println("dataURL::"+dataURL);
    HTTPRequest fetchreq = new HTTPRequest(dataURL);
    fetchreq.setHeader(new HTTPHeader("use_intranet","true"));
    fetchresp = fetcher.fetch(fetchreq);
    System.out.println("Fetch Response::"+fetchresp.getResponseCode());
} 
```

# ruby-on-rails - 停止发条，从控制台开始

> ID：13796616
> 
> 赞同：2
> 
> 时间：2012-12-10T07:22:12.113
> 
> 标签：ruby-on-rails, scheduled-tasks

我怎样才能停止发条，它开始于

```
RAILS_ENV=production bundle exec clockwork config/schedule.rb & 
```

我们在没有上帝、Monit 或其他任何东西的情况下使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:35:23.390

从 0.5.2 版开始，您可以调用

`clockworkd -c [your .rb file] start|stop|restart`

# android - 如何动态管理相对布局中的控件？

> ID：13796618
> 
> 赞同：2
> 
> 时间：2012-12-10T07:22:48.727
> 
> 标签：android, android-layout, layout

相对布局中的一个设计问题。其实我想要这种类型的输出。

![在此处输入图像描述](../Images/0a259141f125029905a7e7096e82ad3f.png)

这一切都应该是动态的。我从 [像 pinterest 这样的 Android 异构网格视图中得到启发？](https://stackoverflow.com/questions/11736658/android-heterogeneous-gridview-like-pinterest)

我想`add two buttons like - Dislike in right corner`。我可以完美地完成该布局，但如何动态添加我不知道的两个按钮。

根据我的想法，相对布局是实现此输出的唯一方法。如果有任何替代解决方案，请分享。

请指导我，它真的很感激。

感谢您分析我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:13:16.267

> 我想在右上角添加两个按钮，例如 - 不喜欢。我可以完美地完成该布局，但如何动态添加我不知道的两个按钮。根据我的想法，相对布局是实现此输出的唯一方法。如果有任何替代解决方案，请分享。

`RelativeLayout`不是唯一的方法，但它是最有效的方法。例如，您可以将`ImageView`a包裹起来`FrameLayout`，也可以将这两个`Buttons`放在一个 Horizo​​ntal 中`LinearLayout`。然后，您将把它`LinearLayout`放在`FrameLayout`using`layout_gravity`集中到`bottom|right`. 但这`RelativeLayout`是要走的路，因为您将避免在包装容器和两者之间使用额外的布局`Buttons`。对于一个`RelativeLayout`你将在布局的末尾：

```
<RelativeLayout>
   <ImageView width|height=fill_parent />
   <Button width|height=wrap_content android="@+id/dislike"  
         android:layout_alignParentRight="true"   
         android:layout_alignParentBottom="true" />

   <Button width|height=wrap_content android="@+id/like"  
         android:layout_toLeftOf="@id/dislike"   
         android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

如果您添加`Buttons`您将为 设置`RelativeLayout.LayoutParams`的代码，`Buttons`并在 xml 布局中为这些设置适当的规则`LayoutParams`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:34:11.443

问题不是很清楚......但是，如果您想动态添加按钮或根据某些条件显示按钮..您始终可以将其添加到布局中并将可见性设置为不可见，稍后在您的代码中可以显示您的按钮设置可见性为可见。

# ruby-on-rails - 通过 belongs_to 关联两个模型

> ID：13796621
> 
> 赞同：0
> 
> 时间：2012-12-10T07:23:01.990
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, belongs-to

我有两个 ActiveRecord 模型，`A`和`B`. `A has_many :B`和`B belongs_to :A`。自然`B`有`a_id`专栏。

我有一堆`A`'s ，每次我创建一个新的 's 时`B`，我都想将它与`A`if 某些条件成立相关联。

目前，我正在检索可能`A`的 's 并将一个链接到一个`B`这样的：

```
class B < ActiveRecord::Base

    attr_accessible :a_id
    belongs_to :a

    def link_to_a
        possible_as = A.where(some: conditions)
        self.a = possible_as.find_by_other-foreign-key_id(self.other_id) if possible_as != nil
        # Then I have to perform an operation on the b's a such as:
        self.a.linked_to_b_at = Time.now if self.a != nil
    end
end 
```

这个好像很臭 有没有更好的方法来链接这两个模型？我认为明确的`has_many`和关系会对我有所帮助。`belongs_to`我肯定错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:43:30.077

添加一个创建关联的 after_create 过滤器

```
class B < ActiveRecord::Base

  attr_accessible :a_id
  belongs_to :a
  after_create :link_to_a

  def link_to_a
    update_attribute(:a_id, find_a )
  end

  def find_a #returns id of a
    your logic to find a
    ...
   end
end 
```

然后像往常一样创建模型 B。看看这个，它有完整的例子来管理这种类型的关联。

[http://guides.rubyonrails.org/getting_started.html#adding-a-second-model](http://guides.rubyonrails.org/getting_started.html#adding-a-second-model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:01:58.087

如果 B 与 A 有belongs_to 关系，那么您创建B 记录的方式不正确。您必须使用该`build`方法来创建依赖记录。

例如：

```
def create_b_records
 a = A.find(some_id)
 a.build_b(new_record_attributes)
 a.save 
end 
```

现在，有了这个，检索一组特定 A 记录的所有 B 记录变得非常简单：

```
possible_as = A.where(some_condition)
possible_as.each do |possible_a|
 possible_a.b #Do whatever you want to do with these B records
end 
```

# hadoop - 如何设置 OutputCommitter 配置？

> ID：13796625
> 
> 赞同：0
> 
> 时间：2012-12-10T07:23:23.227
> 
> 标签：hadoop, mapreduce

我有一个使用 JobClient 提交作业的 mapreduce 代码。我不断收到这个空指针错误堆栈

```
12/12/10 12:42:44 INFO mapred.LocalJobRunner: OutputCommitter set in config null    
Exception in thread "main" java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobClient$NetworkedJob.<init>(JobClient.java:226)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:924)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:844)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:844)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:818)
        at FTPIF.run(FTPIF.java:193)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
        at FTPIF.main(FTPIF.java:273) 
```

让我遇到这个错误的代码是

```
JobClient j = new JobClient();
        j.init(conf);
        RunningJob check = j.submitJob(conf); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T04:33:22.337

我也有这个问题。但是使用`j.runJob(conf);`效果很好。您也可以使用静态函数`JobClient.runJob(conf);`。不知道为什么，看了下JobClient的源码，找到了静态函数的实现`runJob`：

```
public static RunningJob runJob(JobConf job) throws IOException {
    JobClient jc = new JobClient(job);
    RunningJob rj = jc.submitJob(job);
    try {
        if (!jc.monitorAndPrintJob(job, rj)) {
            throw new IOException("Job failed!");
        }
    } catch (InterruptedException ie) {
        Thread.currentThread().interrupt();
    }
    return rj;
} 
```

所以我`submitJob`以这种方式使用该功能：

```
JobClient jcli = new JobClient(jconf);
RunningJob rJob = jcli.submitJob(jconf);
while (true){
    Thread.sleep(5000);
    System.out.println(rJob);
    if (rJob.isComplete())
        break;
} 
```

我工作！！也许这对你也有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:10:55.323

我从来不明白为什么我会碰到空指针。设置 j.setConf(conf) 也不起作用。所以我`runJob`改用处理正在运行的作业。

```
RunningJob job= JobClient.runJob(conf); 
```

# android - xml-rpc 命令行客户端为 android 交叉编译的二进制文件

> ID：13796627
> 
> 赞同：0
> 
> 时间：2012-12-10T07:23:28.997
> 
> 标签：android, xml-rpc, cross-compiling

我想`xml-rpc`从我在 android 上的 shell 脚本访问服务器。我用谷歌搜索`xml-rpc`了客户端，但一无所获。我只想要`xml-rpc`客户端命令行可执行文件，以便我可以在我的 android 设备上的 shell 脚本中使用它。那么有没有这样的二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T09:56:08.560

我有同样的问题，试试这个： [http:](http://acme.com/software/xmlrpc/) //acme.com/software/xmlrpc/ xmlrpc 是 XML-RPC 协议的命令行接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T08:16:59.387

structArg() 完成：

```
structMember() {
    local arg=""
    local name= val=
    local type= val=
    local indent=    

    echo -e "    <member>"
    echo -e "    <name></name>"
    echo -e "    <value><></></value>"
    echo -e "    </member>"
}
structArg() {
    local args=""
    local type= val=
    local deep=0

    local cindent="    "
    local nindent=""
    echo -e "<param>\n<value>"
    eval set 
    for arg; do
        shift
        case  in
        struct:B*)
            ((deep > 0)) && echo -e "<member>"
            local name=
            [ -n "" ] && echo -e "<name></name>"
            echo -e "<struct>"
            indent=""
            nindent=""
            ((deep++))
            ;;
        struct:E)
            indent=    
            nindent=
            echo -e "</struct>"
            ((--deep > 0)) && echo -e "</member>"
            ;;
        *)
            structMember ""
            ;;
        esac
    done
    echo -e "</value>\n</param>"
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-24T12:42:41.367

或者你可以使用 curl： [http ://wiki.secondlife.com/wiki/Category:LSL_XML-RPC](http://wiki.secondlife.com/wiki/Category:LSL_XML-RPC)

我编写了一个 shell 脚本来生成 rpc.xml，它现在工作正常：

## xmlrpc-client.sh

```
#!/bin/bash
# author jiyin@redhat.com

TEMP=`getopt -o vt: --long target   -n 'example.bash' -- "$@"`
if [ $? != 0 ] ; then echo "getopt fail, terminating..." >&2 ; exit 1 ; fi

# Note the quotes around `$TEMP': they are essential!
eval set -- "$TEMP"

Usage() {
    echo "usage: $0 -t <rpcServUrl> <method> [arg1 arg2 ...]"
    exit 1
}
simpleArg() {
    local arg="$1"
    local type=${arg%%:*} val=${arg#*:}
        echo -e "${indent}<param><value><$type>$val</$type></value></param>"
}
structArg() {
    local arg="$1"
        : parse wait complete ...
}

while true ; do
    case "$1" in
    -t|--target) servUrl=$2; shift 2;;
    -v) verbose=--verbose; shift;;
    --) shift; break;;
    *) echo "Internal error!"; exit 1;;
    esac
done
[ -z "$servUrl" ] && Usage
[ $# -lt 1 ] && Usage

#<method> <arg1> <arg2> ... <argx>
generateRequestXml() {
    method=$1; shift
    echo '<?xml version="1.0"?>'
    echo "<methodCall>"
    echo "    <methodName>$method</methodName>"
    echo "    <params>"

    indent="    "
    for arg; do
        indent="${indent}    "
        case $arg in
        struct:*) structArg "$arg";;
        *) simpleArg "$arg";;
        esac
    done

    echo "    </params>"
    echo "</methodCall>"
}
rpcxml=rpc$$.xml
generateRequestXml "$@" > $rpcxml
[ "$verbose" = "--verbose" ] && cat "$rpcxml"
curl $verbose --data "@$rpcxml" "$servUrl" 2>/dev/null | xmllint --format -
\rm -f $rpcxml 
```

# jquery - jquery滑块从两个方向切换

> ID：13796630
> 
> 赞同：1
> 
> 时间：2012-12-10T07:24:30.197
> 
> 标签：jquery

我有这个 jquery 函数发生的事情是 profilecontain 从下到上然后从上到下滑动。但是，当它滑动时，它会从顶部和底部两个方向打开，而我希望它是从底部到顶部和从顶部到底部的平滑滑动。

```
 $(document).ready(function(){
            $("#profilelink").toggle( function(){
                    $("#profilelink").animate({"top": "237px"}, "slow");
                    $("#profilees").animate({"height": "290px", "top": "-165px"}, "slow");
                    //$("#newses").animate({"height": "310px"}, "slow");
                    $("#profilecontain").animate({"height": "270px", 'top': '-154px'}, "slow");
            }, function(){
                    $("#profilelink").animate({"top": "527px"}, 'slow');
                    $("#profilees").animate({"height": "0px", "top": "8px"}, 'slow');
                    $("#profilecontain").animate({"height": "0px", "top": "0px"}, 'slow');
            });
        }); 
```

# ios - iOS 故事板设计与 Cocos2d+Box2d 对象

> ID：13796632
> 
> 赞同：0
> 
> 时间：2012-12-10T07:24:48.777
> 
> 标签：ios, cocos2d-iphone, storyboard, box2d

在我的 iOS (iPad) 应用程序中，我想在 Storyboard 中设计我的视图。此视图将包含按钮、UIImageViews（其中大部分带有 onTapGestureRecognizers 的动画图像）、声音、文本等。最重要的是，我希望使用 cocos2d+Box2d 创建一些具有物理特性的对象（它们将根据加速度计浮动ETC）。

这一切可能吗？我可以用故事板制作我的主要设计，用 cocos2d+box2d 制作一些对象，并且所有用户交互都可以工作吗？

任何工作示例 - 教程？

# android - 如何在屏幕上打开 DatePickerDialog 时隐藏软板

> ID：13796634
> 
> 赞同：1
> 
> 时间：2012-12-10T07:24:57.633
> 
> 标签：android, android-softkeyboard, android-datepicker, datepickerdialog

我正在自定义 DatePickerDialog 来为原生 DatePicker 添加一些我的功能。这是按预期工作的。但是默认情况下 DatepickerDialog 的日、月和年字段是可编辑的。所以当我关注那些可编辑的输入字段时，软键盘将默认打开并使用将能够编辑日期/月/年，当用户编辑日/月/年并按下设置/取消编辑日期时 DatePickerDialog 正在关闭和功能正常工作。这里我的问题是当用户编辑日/月/年并按下设置/取消编辑日期时 DatePickerDialog 正在关闭并且软键盘仍然打开。一旦 DatePickerDialog 被解雇，它就不会关闭。所以为此我尝试使用以下代码隐藏软键盘。

```
 private DialogInterface.OnDismissListener myOnDismissListener = new  DialogInterface.OnDismissListener() {
    public void onDismiss(DialogInterface dialog) {
        InputMethodManager imm = (InputMethodManager) ((Activity) ctContext)
                .getSystemService(Activity.INPUT_METHOD_SERVICE);

        imm.hideSoftInputFromWindow(this.getWindowToken(),
                InputMethodManager.HIDE_NOT_ALWAYS);

    }
}; 
```

但这不起作用。所以我尝试使用以下代码切换软键盘。

```
private DialogInterface.OnDismissListener myOnDismissListener = new DialogInterface.OnDismissListener() {
    public void onDismiss(DialogInterface dialog) {
        InputMethodManager imm = (InputMethodManager) ((Activity) ctContext)
                .getSystemService(Activity.INPUT_METHOD_SERVICE);
        if(imm.isActive())
            imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
    }
}; 
```

但是这里 imm.isActive() 总是返回 false。如果我删除了 if(imm.isActive()) 条件它在软键盘打开时的工作。但是，当软键盘未打开并使用时，只需打开 DatePickerDialog 并通过使用箭头更改来设置或取消日期软键盘在关闭 DatePickerDialog 时打开。所以我需要正确获取 imm.isActive() 值。但它总是返回错误。

因此，请有人帮助我确定是否打开软键盘的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-27T12:49:48.317

这是在 datepickerdialog 中停止手动编辑的最佳选项。您可以使用它禁用软键盘。

```
 final DatePickerDialog dp = new DatePickerDialog(MainActivity.this, new    DatePickerDialog.OnDateSetListener() {

                @Override
                public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {

                    Calendar newDate = Calendar.getInstance();
                    newDate.set(year, monthOfYear, dayOfMonth);
                    txtdate.setText(dateFormatter.format(newDate.getTime()));

                }
            }, newCalendar.get(Calendar.YEAR), newCalendar.get(Calendar.MONTH), newCalendar.get(Calendar.DAY_OF_MONTH));

            dp.show();
            dp.getDatePicker().setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:45:47.937

这是我处理强制关闭软键盘的方式

```
@Override
public void dismiss() {
    super.dismiss();
    //hide the soft keyboard
    getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-21T04:56:44.843

**在DatePickerDialog**项目中停止手动编辑的最佳选择是使用 set the **descendantFocusability**。您可以在代码或对话框样式文件中添加它。我个人建议在风格中使用它。

方法一：使用代码

```
datePickerDialog.datePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS) 
```

方法2：使用样式

`<style name="MyDatePickerDialogTheme" parent="android:Theme.Material.Light.Dialog"> <item name="android:descendantFocusability">blocksDescendants</item </style>`

现在在对话框中设置样式

```
datePickerDialog = DatePickerDialog(
                    this.context,
                    R.style.MyDatePickerDialogTheme
                ) 
```

我想你应该已经明白了。快乐的代码。

# android - android java方法中的toast消息编译错误

> ID：13796639
> 
> 赞同：1
> 
> 时间：2012-12-10T07:25:23.930
> 
> 标签：android, compiler-errors, toast

我曾多次在 android 中使用 toast 来显示消息并且从未出现过问题，这包括将它放在方法的内部和外部。但是这次由于某种原因编译器不允许它工作。为什么不允许将 toast 放入下面显示的此方法中？

在这段代码中，我尝试了两种类型的上下文，“ThumbnailsActivity.class”和“this”。

decodeSampleBitmapFromResource 方法位于扩展 Activity 的 Android 类 ThumbnailsActivity.java 中。这里没有什么不寻常的。

```
 public static Bitmap decodeSampledBitmapFromResource(String fileName, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(fileName, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(fileName, options);

        // both of the toasts shown here have compile errors

    Toast.makeText(ThumbnailsActivity.class, "TEST",Toast.LENGTH_LONG).show();

        Toast.makeText(this, "TEST",Toast.LENGTH_LONG).show();

}//end decodeSampledBitmapfromresource method 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:27:14.307

Chanhe你的方法为：

```
public  Bitmap decodeSampledBitmapFromResource(String fileName, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(fileName, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

            // both of the toasts shown here have compile errors

        Toast.makeText(ThumbnailsActivity.this, "TEST",Toast.LENGTH_LONG).show();

            Toast.makeText(this, "TEST",Toast.LENGTH_LONG).show();

        return BitmapFactory.decodeFile(fileName, options);

    }//end decodeSampledBitmapfromresource method 
```

如果要访问非静态上下文，请将所有 toast 放在 return 语句之前，并从方法中删除静态

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T07:27:50.837

您不能直接从方法调用 current `Activity`。`Context``static`

您可以将 current作为参数传递给方法或使您`Activity`的方法非静态。`Context``static`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:28:37.477

你只需在 getApplicationContext() 上写，然后现在检查，

```
Toast.makeText(getApplicationContext(),"TEST",Toast.LENGTH_LONG).show(); 
```

# java - 删除 sql 语句违反完整性约束

> ID：13796640
> 
> 赞同：2
> 
> 时间：2012-12-10T07:25:27.060
> 
> 标签：java, database, eclipse, hsqldb, cascading-deletes

删除 sql 语句违反了完整性约束。发生这种情况是因为一个表的 id 在另一个表中用作主键。但是我还是想通过使用 CASCADE 删除它们。

但是 hsqldb 的正确语法是什么？

![在此处输入图像描述](../Images/ea961860dcffdd49328fa6b5e31b94c7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:40:15.147

该`DELETE`语句不支持“级联”关键字（[手册中有明确记录](http://www.hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_delete_statement)）

您需要设置*外键约束*以级联删除：

```
create table playlist
(
   id integer primary key not null, 
   ... other columns ...
);

create table playlistmovies
(
   id integer primary key not null,
   playlist_id integer not null,
   ... other columns
);

alter table playlistmovies
   add constraint fk_plm_playlist
   foreign key (playlist_id) references playlist(id)
   on delete cascade; 
```

然后，当您删除播放列表时，引用该播放列表的所有行也会被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:42:10.730

在创建子表时，您在外键约束中添加“删除级联”，如下所示。

> ALTER TABLE ADD [CONSTRAINT] FOREIGN KEY () REFERENCES () ON DELETE CASCADE;
> 
> 使用与在表定义中指定外键时相同的约束语法向表中添加外键约束。

之后，您删除您的父记录，它也会删除子记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-04T00:54:51.763

在 HSQLDB 的当前版本（我使用的是 2.5.0）中，可以在列定义语句上指定 ON DELETE CASCADE 修饰符，不需要使用 ALTER TABLE 添加它。这允许简洁、更易读的 SQL。

例如，这有效：

```
CREATE TABLE IF NOT EXISTS TestRecord
(
    -- Primary key column
    id        INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,

    -- Example fields
    sValue    VARCHAR(100),
    iValue    INTEGER,
);

CREATE TABLE IF NOT EXISTS TestRecordJoin
(
    -- Foreign key column, specifying cascade delete behavior.
    kRecord INTEGER     NOT NULL FOREIGN KEY REFERENCES TestRecord ON DELETE CASCADE,

    -- Example fields
    sValue2 VARCHAR(64) NOT NULL,
    iValue2 INTEGER     NOT NULL
); 
```

# c# - 在 C# 中表示某些类型的对象

> ID：13796642
> 
> 赞同：2
> 
> 时间：2012-12-10T07:25:37.033
> 
> 标签：c#, .net, reflection

我想做出类似于以下的断言：

```
aMethod.ReturnType == double
aString.GetType() == string 
```

上面的示例显然无法编译，因为`double`它们`string`不是 type 的对象`Type`，它们甚至不是合法的 C# 表达式。

如何表达`Type`某种 C# 类型的 a？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T07:27:50.030

使用 typeof 获取和比较类型。

```
aMethod.ReturnType == typeof(double)

aString.GetType() == typeof(string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:26:52.577

使用[是](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)运算符

> 检查对象是否与给定类型兼容。

~~bool result1 = aMethod.ReturnType 是双精度；~~

```
bool result2 = aString is string; 
```

考虑以下示例：

```
bool result1 = "test" is string;//returns true;
bool result2 = 2 is double; //returns false
bool result3 = 2d is double; // returns true; 
```

编辑：我错过了这`aMethod.ReturnType`是一个类型而不是一个值，所以你最好使用它来检查它`typeof`

```
bool result1 = typeof(aMethod.ReturnType) == double; 
```

考虑以下示例。

```
object d = 10d;
bool result4 = d.GetType() == typeof(double);// returns true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:29:46.417

正如其他人所说，使用`typeof(YourType)`或`is`运算符（小心，`is`不是严格的运算符（考虑继承）：例如，`MyClass is object`是真的！）..

我不知道你为什么需要`aMethod.ReturnType`，但似乎你需要[泛型参数](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)。试试看 ！

# django - Django MongoDB SITE_ID 错误

> ID：13796647
> 
> 赞同：2
> 
> 时间：2012-12-10T07:26:43.510
> 
> 标签：django, mongodb

尝试查看管理页面时出现此错误：

```
InvalidId at /admin/

AutoField (default primary key) values must be strings representing an ObjectId on MongoDB (got u'1' instead). Please make sure your SITE_ID contains a valid ObjectId string.

Request Method:     GET
Request URL:    http://127.0.0.1:8000/admin/
Django Version:     1.3
Exception Type:     InvalidId
Exception Value:    

AutoField (default primary key) values must be strings representing an ObjectId on MongoDB (got u'1' instead). Please make sure your SITE_ID contains a valid ObjectId string.
... 
```

所以我四处搜索并认为我需要执行以下操作

```
 ./manage.py tellsiteid
The default site's ID is u'50c5766e62f11f41f0332e65'. To use the sites framework, add this line to settings.py:
SITE_ID=u'50c5766e62f11f41f0332e65' 
```

所以我将它添加到我的`settings.py`：

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG
SITE_ID = u'50c5766e62f11f41f0332e65'
... 
```

我仍然收到相同的错误消息。我应该运行`syncdb`或重新启动服务器吗？因为我两者都做了，但仍然遇到同样的错误。

**编辑**

我试过`SITE_ID`在 Python shell 中查看 的值，果然……

```
$ python manage.py shell
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from concepts.settings import *
>>> SITE_ID
1 
```

但`git diff`清楚地表明我已经更改了设置文件，对吧？

```
$ git diff
diff --git a/settings.py b/settings.py
index 586ea3a..bb069ed 100644
--- a/settings.py
+++ b/settings.py
@@ -2,6 +2,7 @@

 DEBUG = True
 TEMPLATE_DEBUG = DEBUG
+SITE_ID = u'50c5766e62f11f41f0332e65'

 ADMINS = (
     # ('Your Name', 'your_email@example.com'),
 ... 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:05:18.080

哦，我傻了。这些代码行后来出现在`settings.py`：

```
# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True
... 
```

所以我只是将那里的 1 更改为`u'50c5766e62f11f41f0332e65'`现在它可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:09:27.427

我遇到了同样的问题，但即使我在*settings.py*中更改了 SITE_ID，问题仍然存在。我在 INSTALLED_APPS 中评论了 'django.contrib.sites' 行，然后 syncdb 正确完成（在我看来，站点应用程序是一个几乎没有人需要的应用程序......如此快速和干净的解决方案:)）

# ruby-on-rails - Rails 3 中的嵌套路由

> ID：13796648
> 
> 赞同：0
> 
> 时间：2012-12-10T07:26:48.307
> 
> 标签：ruby-on-rails

我有两个模型的身体部位和练习。两者都有 has_and_belongs_to_many 关系

```
Bodyparts
has_and_belongs_to_many :exercises

Exercises
has_and_belongs_to_many :bodyparts 
```

在我给出的 routes.rb 文件中，

```
resources :bodyparts do
    resources :exercises
end 
```

我想获取属于特定身体部位的所有练习。

我测试过`http://localhost:3000/bodyparts/1/exercises.json`

但我得到了一系列的练习。

如何解决这个问题。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:38:17.367

您需要在控制器中指定

```
def index
  @exercises = BodypartExercise.where( :muscle_id => params['muscle_id'])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @exercises }
  end
end 
```

# addthis - 自定义 addthis 按钮

> ID：13796653
> 
> 赞同：2
> 
> 时间：2012-12-10T07:26:56.360
> 
> 标签：addthis

我在我的网站上使用 addthis 按钮，我想做一些自定义样式...只是更改配色方案以匹配我的网站。可以做到吗？我有一些替换图像准备好所有正确的尺寸。我只是找不到把它们放在哪里！

```
<!-- AddThis Button BEGIN -->
    <div id="photo-social" class="addthis_toolbox addthis_default_style "
        <a class="addthisfacebook addthis_button_facebook_like" fb:like:layout="button_count" fb:like:width="50"></a>
        <a class="addthistweet addthis_button_tweet"></a>
        <a class="addthispinterest addthis_button_pinterest_pinit"></a>
        <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50bd330b4fbbfeb2"></script>
    <!-- AddThis Button END --> 
```

以前有没有人成功完成过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:20:10.420

您可以为 AddThis 工具箱（加号按钮）使用自定义图像。你会做这样的事情：

```
<a class="addthis_button" href="http://www.addthis.com/bookmark.php">
    <img src="http://s7.addthis.com/static/btn/sm-plus.gif"
     width="16" height="16" border="0" alt="Share" />
</a> 
```

完整的文档在这里：

[http://support.addthis.com/customer/portal/articles/381236-custom-buttons#.UNDA5YnjmM9](http://support.addthis.com/customer/portal/articles/381236-custom-buttons#.UNDA5YnjmM9)

不幸的是，您无法替换 Facebook Like、Tweet 等第三方按钮，因为这些按钮实际上是由 Facebook、Twitter 等提供的。只有 AddThis 提供的按钮（基本上是所有相同尺寸的按钮行）。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T13:27:47.480

```
<a class="addthis_button_facebook">
    <img src="whatever.png" width="32" height="32" border="0" alt="facebook_share">
</a> 
```

Addthis 仍然为 facebook 打开一个共享。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T19:47:16.240

您可以尝试使用 id-s 和类（addthis_button、photo-social、addthis_toolbox addthis_default_style 等）。在每个类中添加 backgorund-image css 属性。也许其中一个会起作用。祝你好运 ：）

# c# - 从用户界面移除数据访问层耦合

> ID：13796656
> 
> 赞同：1
> 
> 时间：2012-12-10T07:27:17.370
> 
> 标签：c#, .net, domain-driven-design, data-access-layer

目前我的应用程序的 UI 层与我的 DAL dll 耦合。Dal 初始化如下：

```
//Initialize Data Access for AS400
Dal = JDE8Dal.Instance;
Dal.conString = Properties.Settings.Default.conAS400; 
```

DAL 被设计为单例。我认为强制应用程序拥有一个实例是个好主意。

达尔：

```
public class JDE8Dal
    {
        public string conString { get; set; }
        private static readonly JDE8Dal _instance = new JDE8Dal();
        private JDE8Dal()
        {
        }
        public static JDE8Dal Instance
        {
            get { return _instance; }
        }
        // Methods
    } 
```

我的 BLL 看起来像这样：

```
namespace YLA.Barcode
{
    public static class YlaBarcodeUtil
    {
        public static string LotStripZeroes(string str)
        {
            var ret = str;
            if (str.Trim().StartsWith("00"))
            {
                ret = YlaGeneralUtilities.StripLeadingNumofChars(str, 2);
            }
            return ret;
        }
    }

public class BarcodeBLL
{
    //DAL INIT HERE?
}
} 
```

现在我需要构建更多应用程序，我需要进入 3 层架构并开始阅读 DDD。

1) 如何移动 BLL 中的 DAL 处理？只需在我的 BLL 部分添加初始化？

2) 我是否应该将我的 DAL 设计保持为单例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:49:30.903

您应该使用控制反转模式来减少层之间的依赖关系。在您的情况下，我将使用构造函数注入，因为您的类需要数据上下文：

```
public class BarcodeBLL
{
    private JDE8Dal _context;

    public BarcodeBLL(JDE8Dal context)
    {
        _context = context;
    }
} 
```

数据上下文应该是短暂的对象。如果您正在开发 Web 应用程序，您应该为每个请求实例化一个数据上下文。我还建议使用 ORM（实体框架/NHibernate）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:53:46.013

1：通常你有一个基础设施层来进行组合。

2：绝对没有。这接近于“学习编程”。使用 IOC 容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:15:40.483

```
//Initialize Data Access for AS400
Dal = JDE8Dal.Instance;
Dal.conString = Properties.Settings.Default.conAS400; 
```

该评论具有误导性。此代码实际上并未初始化数据访问，而仅设置数据库连接字符串。这应该在 DAL 本身而不是 UI 中完成。

```
public class JDE8Dal
    {
        public string conString { get; set; }
        private static readonly JDE8Dal _instance = new JDE8Dal();
        private JDE8Dal()
        {
        }
        public static JDE8Dal Instance
        {
            get { return _instance; }
        }
        // Methods
    } 
```

层通常不是这样定义的，DAL 是一个程序集/dll，而不是一个类。在您编写它时，您似乎想要一个定义了所有持久性逻辑的上帝对象。数据访问层中的类更加细粒度和专业化：例如存储库/DAO 管理一个特定域对象的持久性。

此外，“仅仅因为只有一个实例感觉不错”而求助于 Singleton通常[不是一个好主意。](http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx)尤其是不可变的单例。在您的示例中，任何人都可以更改`Dal.Instance.conString`，这可能会对单例的其他消费者产生巨大的影响。除了其他缺点。

即使您的 DAL 可能有一个实现（似乎是 AS400），在具有合理复杂性的项目中使用依赖注入进行单元测试也是一个好主意。DI 使您能够轻松地将具体的 DAL 对象实现替换为在单元测试中更轻量级和有用的假 DAL 对象。

```
public class BarcodeBLL
{
    //DAL INIT HERE?
} 
```

不，这里没有 DAL 初始化 ;)

业务逻辑层（DDD 中的域层）不应该引用 DAL，DAL 应该引用 BLL。域对象不应该知道如何持久化自己（持久性无知原则），因为它会承担太多的责任（单一责任原则），并且会在 BLL 和 DAL 之间产生紧密耦合，使得重用和维护非常尴尬BLL。

# powershell - 执行不带参数的 Invoke-psake 时出错

> ID：13796658
> 
> 赞同：1
> 
> 时间：2012-12-10T07:27:28.103
> 
> 标签：powershell, powershell-2.0, psake

我刚刚安装了 psake 4.2.0 版。

我把这个放进去`default.ps1`

```
properties {
    $message = "Task A executed"
}

task default -depends taskA

task taskA {
    write-host $taskAmessage
} 
```

如果我运行`Invoke-psake taskA`，则任务按预期执行。

当我在`Invoke-psake`没有任何参数的情况下执行时，就像在[介绍](https://github.com/psake/psake)中一样，我收到以下错误：

```
Test-Path : Cannot bind argument to parameter 'Path' because it is an empty string.
At D:\animesh\software\utilities\psake-master\psake-master\psake.psm1:291 char:26
+         Assert (test-path <<<<  $buildFile -pathType Leaf) ($msgs.error_build_file_not_found -f $buildFile)
    + CategoryInfo          : InvalidData: (:) [Test-Path], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorEmptyStringNotAllowed,Microsoft.PowerShell.Commands.TestPathCommand 
```

在我的 powershell 配置文件中，我`psake`每次运行 Powershell 时都会导入模块。

```
import-module "D:\animesh\software\utilities\psake-master\psake-master\psake.psm1" 
```

项目页面中提出了这个[确切的问题](https://github.com/psake/psake/issues/27)，但似乎没有解决。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:49:34.893

模块代码似乎有问题，您可能需要将 psake.psm1 的第 269 行修改为：

```
[Parameter(Position = 0, Mandatory = 0)][string] $buildFile=$psake.config_default.buildFileName 
```

# mysql - 跳过 MySQL 密码

> ID：13796669
> 
> 赞同：1
> 
> 时间：2012-12-10T07:28:12.123
> 
> 标签：mysql, linux, terminal

我正在执行这个命令-

```
mysql -u user1 -p password1 -e "show databases" 
```

我希望成功运行 mysql “show databases” 命令。但事实并非如此。它再次要求输入密码，即使我输入了正确的密码。这就是我得到的-

```
Enter password: 
```

即使我在命令中给出了密码，我如何才能摆脱它要求输入密码的提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:30:32.007

-p 后面不要加空格

```
mysql -u user1 -ppassword1 -e "show databases" 
```

# ruby-on-rails - 几种不同通知事件的数据库设计

> ID：13796672
> 
> 赞同：1
> 
> 时间：2012-12-10T07:28:38.603
> 
> 标签：ruby-on-rails, database, postgresql, notifications, database-schema

我仍然是一名初级程序员，所以我只是想了解最佳实践。如果我有四个通知流[消息、事件、评论、基于位置]，我应该为每种事件类型创建一个单独的表，还是应该创建一个表并添加一个描述事件类型的列。

（假设流量适中，rails，AR，Postgre 并且每个表都有相当相似的列 [id, user_id, other_object_id, message, time, ...]）

感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:50:58.923

这可能是一个软件设计问题。您在所有类型的通知之间是否有共同的行为？如果答案是否定的，那么只需为每种通知创建不同的模型。

但是，大多数情况下，您对通知有大量的共享行为，甚至是相同的行为。如果通知看起来都一样，并且彼此之间只有一些微小的差异，只需添加一个**notification_type**列并根据该列的值定义小行为。这将是更快、更务实的方式。

现在如果你想实现一个好的设计模式，你想实现 ActiveRecord 继承，在这里你将在 Notification 模型上定义常见的行为，然后 Messages、Events、Comments 等将从这个模型继承。

您可以在 Rails 文档中查找有关 Active Record 继承的更多信息：[http](http://api.rubyonrails.org/classes/ActiveRecord/Base.html) ://api.rubyonrails.org/classes/ActiveRecord/Base.html，Martin Fowler 模式[http://www.martinfowler.com/eaaCatalog/singleTableInheritance .html ，您会](http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html)[在网络上](https://www.google.com/search?q=active%20record%20inheritance&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=es-419&gs_nf=3&gs_rn=0&gs_ri=serp&tok=RB8GP5RQVJUEFMpcHgY__Q&pq=active%20record%20inheritance&cp=6&gs_id=dq&xhr=t&q=activerecord%20inheritance&pf=p&safe=off&client=firefox-a&hs=5if&tbo=d&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&oq=activerecord%20inheritance&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=9dd4af96aca34196&bpcl=39650382&biw=1440&bih=670)找到不同的示例

# c++ - 在 Visual Studio 中调整目录结构会弄乱#includes？

> ID：13796679
> 
> 赞同：2
> 
> 时间：2012-12-10T07:29:19.710
> 
> 标签：c++, visual-studio, visual-c++, ide, directory

我确信有一种简单的方法可以在 Visual Studio 的设置中修复这个问题，但我根本想不通。这是我的问题：我是一名新手程序员，正在尝试处理我的第一个大型多媒体项目，我意识到建立一个更有条理的项目文件目录结构以满足我的需求将符合我的最大利益. 直到今天，我一直在使用 Visual Studio 的默认目录和构建选项。到目前为止，我的项目只有大约 10 个头文件和 10 个源文件，所以我认为尽早重新安排所有内容是一个不错的选择。我认为最简单的方法是启动一个干净的“解决方案”并导入我的旧文件。

这是我*计划的文件夹结构：*

```
-Solution
    -Project
        -Source Files
        -Header Files
        -Multimedia Assets
        -Release Builds
        -Documentation 
```

现在，由于我是 Visual C++ 的新手，我没有意识到在“解决方案资源管理器”中创建所有这些文件夹并不会在 Windows 中创建实际文件夹。（所以至少在我看来..）

因此，我继续在我的 Solution\Project\ 目录中创建了一组镜像的 REAL 文件夹。我将所有标题放在我的 Header Files 文件夹中，将所有源代码放在我的 Source Files 文件夹中，等等。

我现在遇到的问题是，Visual C++ 显然希望我的所有文件都在同一个目录中。我现有的#includes 不再起作用。我试过把它们改成——

```
#include "Headers\xxxxx.h" 
```

*   但是，这似乎也不起作用。我不确定*我必须去哪里通知 Visual Studio C++ Express 的根目录在哪里*。一旦我弄清楚了，我猜它就像包含该根目录中的文件路径一样简单。

**有没有办法将我的项目的“根目录”设置为我的“项目”文件夹？或者在使用 Visual Studio C++ Express 时是否有更好的方法来管理我的文件目录？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:43:04.210

这是在每个项目的基础上设置的。在项目的属性中，转到`C/C++`> `General`>`Additional Include Directories`并在那里添加所需的目录。您可能希望使用宏`$(ProjectDir)`或`$(SolutionDir)`使其更抽象 - 或不使用，视您的具体情况而定。

**编辑**

如果您有许多需要相同设置的项目，您还可以考虑为此类设置创建一个属性文件并将此文件添加到所有项目中，以便以后需要更改时，可以在一个地方完成。

为此，请打开 Property Manager，右键单击一个项目并选择`Add New Project Property Sheet...`或`Add Existing Property Sheet...`（如果适用）。

注意：我没用过VS Express，所以不知道它是否支持propety sheet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:46:37.263

打开项目的属性页，转到 C/C++ 选项卡，然后选择“常规”并将这些目录添加到其他包含目录。

要弄清楚 VC 编译器如何搜索这些包含目录，请转到项目属性页面中的“高级”，启用“显示包含”。

# java - java中的参数化适配器

> ID：13796681
> 
> 赞同：3
> 
> 时间：2012-12-10T07:29:23.263
> 
> 标签：java, c++, design-patterns, parameter-passing, adapter

我阅读了关于适配器模式的“四人帮”的设计模式。但是我在实施部分阅读了第 2.c 段关于可插入适配器使用参数化适配器的内容，但我无法理解，因为示例在 Smalltalk 中。任何人都可以通过 Java 或 C++ 为我解释详细信息吗？对不起，我的英语太差了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:36:55.873

首先，我觉得有必要提醒一点，不要*过于*深入地使用模式，尤其是在 C++ 中（许多 C++ 程序员对设计模式的重视程度持怀疑态度）。

也就是说，我怀疑大多数使用 C++ 的人会使用书中讨论的方法。这本书讨论了一种混合类型方法，您可以从某个抽象类继承，该抽象类定义了您要委托的接口。在他们的示例中，您将根据一些抽象的 DisplayableObject 类编写一个 TreeDisplay 类，然后您将通过从 DisplayableObject 继承（可能是多个，希望是私有的）创建一些特定类型的 TreeDisplay。

我无法想象有人以这种方式编写 C++，除非在已经使用这种架构的现有项目中。如果有人正在编写新的 C++ 来实现这一点，他们几乎肯定会将 TreeDisplay 设为模板，并将 DisplayableObject 设为模板参数。

```
template <class DisplayableObject> 
class TreeDisplay { 
    DisplayableObject const &root;
public:
    TreeDisplay(DisplayableObject const &d) : root(d) {}   

    display(graphic const *g);

    void build_tree(DisplayableObject const &d=root) {
        for (auto child : d.get_children) {
            add_node(d.CreateGraphicNode(this, child));
            build_tree(child);  // recursively add child's children
        }
    }
} 
```

然后可显示对象将具有以下内容：

```
class DirectoryBrowser { 
    std::vector<directory> children;       
public:
    std::vector<directory> &get_children() { return children; }

    void CreateGraphicNode(TreeDisplay *t, directory const &d) { 
        t->display(d.name);
    }
}; 
```

这当然与书中讨论的实现*不*匹配，但正如我上面所说，我无法完全想象今天有人以本书讨论的方式编写 C++。顺便说一句，我怀疑很多人是否会直接返回对 DirectoryBrowser 内部数据的引用——这只是一种快速而肮脏的方式来展示*一般*想法。

就这一切应该完成的事情而言：主要是脱钩。TreeDisplay 知道如何在树中显示项目，但不需要知道树中各个对象的详细信息。相反，在树中显示的项目不需要知道关于显示是树的任何信息。如果您选择在平面列表中显示这些相同的项目，那么这对 DirectoryBrowser（或其他可显示对象）完全没有影响。当被要求这样做时，它只需要知道如何将自身的可显示版本发送回函数。

简而言之，我们已经最小化了两者之间的接口，因此可以更改其中任何一个而不会对另一个产生最小的影响，并且尽可能容易地实现其中一个的不同变体，并使其与另一部分的所有现有实现一起工作。

在 Java 中，我猜大多数程序员可能会定义一个 DisplayableObject 接口（可能使用不同的名称），并将其用作“插件”点，让 TreeDisplay 与树中的对象进行交互。虽然 Java 的泛型可能*可*用于执行此操作，但我认为这与在 C++ 中使用模板的可能性几乎不一样（原因大多与手头的问题无关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:53:04.867

[这](http://perfectjpattern.sourceforge.net/dp-adapter.html)是适配器模式的另一个示例，但使用的是 Java。该页面底部的示例代码演示了如何**轻松地将**`LinkedList`实现调整为接口`Queue`。

该示例由两个文件组成：

*   [Example.java](http://perfectjpattern.sourceforge.net/xref/org/perfectjpattern/core/structural/adapter/Example.html)
*   [List2QueueAdapter.java](http://perfectjpattern.sourceforge.net/xref/org/perfectjpattern/core/structural/adapter/List2QueueAdapter.html)

# sql-server - “数据库还原”和“数据库部署”之间的区别？

> ID：13796688
> 
> 赞同：0
> 
> 时间：2012-12-10T07:30:05.167
> 
> 标签：sql-server, database

好吧，总的来说，我是 SQL Server 和数据库的新手。它的真正含义是什么：

1.  从快照还原数据库
2.  恢复完整的数据库
3.  在虚拟机服务器上部署数据库。

部署后可以恢复。请你能在 SQL Server 的上下文中解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:19:30.100

@techy，为了让您完全理解这些问题的答案，您需要自己进行一些学习。在 stackoverflow 响应中有太多要“教”的内容。因此，下面我将为您提供一些快速答案，以及您可以了解更多信息的链接。

1.  快照是数据库的“时间点”副本。例如，假设我有一个名为 D1 的数据库。我希望能够保留 D1 的副本，就像它在下午 12:15 时一样。所以在下午 12:15，我创建了一个快照 D1 并将其命名为 D1Snap1215（名称不重要）。我现在可以通过从 D1 查询 LIVE 数据，或者通过查询 DSnap1215 查询 12:15pm 版本的数据库。如果我选择，我什至可以通过从 DSnap1215 快照恢复数据库 D1 将实时 D1 数据库恢复到下午 12:15 的状态。阅读有关[数据库快照](http://msdn.microsoft.com/en-us/library/ms175158.aspx)以及如何将[数据库还原为数据库快照的](http://msdn.microsoft.com/en-us/library/ms189281.aspx)信息。
2.  SQL Server 允许您随时备份数据库。有多种备份（完整、差异、事务日志，...）。但是，完整备份会将整个数据库的状态复制到某些备份介质（硬盘驱动器上的备份文件或备份磁带……）。稍后，您可以从备份中恢复数据库。可以在原始服务器（或实例）上进行还原，将相同的数据库或事件还原到不同的数据库或实例。阅读有关[BACKUP](http://msdn.microsoft.com/en-us/library/ms186865%28v=sql.110%29.aspx)和[RESTORE](http://msdn.microsoft.com/en-us/library/ms186858.aspx)语句的更多信息。
3.  部署数据库是将数据库放到某处的 SQL Server 实例上的一般过程。无论目标服务器是物理的还是虚拟的，过程（从 SQL 的角度来看）都是相同的。[您可以通过运行脚本来创建数据库及其结构](http://msdn.microsoft.com/en-us/library/hh245282.aspx)，然后[导入数据](http://msdn.microsoft.com/en-us/library/ms140052)，或者使用从另一台服务器[恢复](http://msdn.microsoft.com/en-us/library/ms186858.aspx)到目标服务器的数据库[备份](http://msdn.microsoft.com/en-us/library/ms186865%28v=sql.110%29.aspx)来将数据库部署到服务器。Microsoft 和第 3 方提供了许多工具来帮助您部署数据库。例如，SQL Server Integration Services (SSIS) 中的“[传输数据库任务](http://msdn.microsoft.com/en-us/library/ms141204.aspx)”组件可以帮助您复制或移动数据库。

希望这能让你开始。

# android - 滑动抽屉的布局问题

> ID：13796694
> 
> 赞同：0
> 
> 时间：2012-12-10T07:30:35.547
> 
> 标签：android, layout, slidingdrawer

> **可能重复：**
> [如何使 Android SlidingDrawer 从左侧滑出？](https://stackoverflow.com/questions/1137350/how-to-make-an-android-slidingdrawer-slide-out-from-the-left)

我有两个滑动抽屉按钮，它们在同一侧我希望另一个滑动抽屉在左侧我有片段 ![在此处输入图像描述](../Images/fa4daa85fcebd87c3dbe6e309fb06167.png)

我所做的是在 xml

```
<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="wrap_content" android:layout_height="wrap_content"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal" >
    <SlidingDrawer     android:layout_gravity="left"
    android:orientation="horizontal" android:layout_width="wrap_content"   android:id="@+id/SlidingDrawer" android:handle="@+id/slideHandleButton" android:content="@+id/contentLayout" android:padding="10dip" android:layout_height="60dip">
        <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/slideHandleButton" android:background="@drawable/projectmain"></Button>
            <LinearLayout android:background="@null" android:layout_width="wrap_content" android:id="@+id/contentLayout" android:orientation="horizontal" android:gravity="center" android:padding="10dip" android:layout_height="wrap_content">
            </LinearLayout>
    </SlidingDrawer>
</LinearLayout>

<LinearLayout android:id="@+id/LinearLayout01"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" >
    <SlidingDrawer android:gravity="left" android:layout_gravity="left" android:orientation="horizontal" android:layout_width="wrap_content"   android:id="@+id/SlidingDrawer1" android:handle="@+id/slideHandleButton1" android:content="@+id/contentLayout" android:padding="10dip" android:layout_height="60dip">
        <Button android:gravity="left" android:layout_gravity="left"  android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/slideHandleButton1" android:background="@drawable/propertymain"></Button>
            <LinearLayout android:background="@null" android:layout_width="wrap_content" android:id="@+id/contentLayout" android:orientation="horizontal" android:gravity="center" android:padding="10dip" android:layout_height="wrap_content">
            </LinearLayout>
        </SlidingDrawer>
</LinearLayout> 
```

请看一下布局提前谢谢

# objective-c - 如何将此字符串转换为nsdate？

> ID：13796695
> 
> 赞同：0
> 
> 时间：2012-12-10T07:30:35.667
> 
> 标签：objective-c, cocoa, nsdateformatter

> **可能重复：**
> [将字符串转换为 nsdate](https://stackoverflow.com/questions/2311421/convert-string-to-nsdate)

我有这个字符串`Fri, 07 Dec 2012 08:40:33 +0100`

如何将其转换为 NSDate

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE, dd MMM YYYY hh:mm:ss +HHmm"];
NSDate *myDate=[dateFormatter dateFromString:@"Fri, 07 Dec 2012 08:40:33 +0100"];
NSLog(@"-->%@",myDate); 
```

nslog 给出

```
-->2012-12-06 19:30:33 +0000 
```

此代码无法正常工作，请帮助。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:02:32.353

你的代码几乎是正确的，但有一些错误。

首先，年份不是`YYYY`但只是`yyyy`，`hh`不是 24 小时是不正确的，因为小时是 24 小时，因此你应该使用`HH`。接下来是时区偏移量，`+HHmm`不仅仅是`Z`. 现在最重要的部分，你的日期有一天和一个月作为书面语言，但应用程序可能在非英语语言上运行，因为解析不起作用，你必须添加一个语言环境。

完整代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"EN"]];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];
NSDate *myDate=[dateFormatter dateFromString:@"Fri, 07 Dec 2012 08:40:33 +0100"];
NSLog(@"-->%@",myDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:41:50.203

我检查了您对所有答案的评论，我想说，您对时区感到困惑。

07:40 是格林威治标准时间，而您的时间是 08:40 +1000（一小时 00 分钟），所以它们是相同的。同样，在重新生成和打印时，它将在 GMT 中打印。

```
NSDateFormatter *dateFormatter = [NSDateFormatter new];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z"];
[dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"EN"]];
NSDate *myDate=[dateFormatter dateFromString:@"Fri, 07 Dec 2012 08:40:33 +0100"];
NSLog(@"--> %@",myDate);

NSString *rechange=[dateFormatter stringFromDate:myDate];

NSLog(@"==> %@",rechange); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:37:54.577

我认为您需要将最终更改`+HHmm`为`ZZZZ`.

这是时区，而不是时间。

# java - 将多张照片保存在一个文件中的 Android 解决方案：.mpo

> ID：13796696
> 
> 赞同：1
> 
> 时间：2012-12-10T07:30:47.370
> 
> 标签：java, android, c, image-processing, jpeg

我正在开发一个 Android 应用程序，我需要将多张照片保存在一个文件中。我想使用多图片格式.mpo。我检查了 Android 文档以及 OpenCV（我使用 OpenCV 进行图像处理），但没有找到将多个 JPEG 图片保存在单个文件中的方法（我只找到了从 mpo 文件中提取图像的方法）。这种文件保存格式可用于存储立体照片（存储左右）、包围、HDR，...您知道执行此操作的方法（特定功能或参数？Bitmap.CompressFormat 不包括 mpo）或示例java 或 c 程序将多个 JPEG 文件组合在一个 MPO 中？非常感谢。

# java - Spring Inject 注解导致空指针异常

> ID：13796698
> 
> 赞同：1
> 
> 时间：2012-12-10T07:30:58.543
> 
> 标签：java, spring, hibernate, jsf-2

[这篇文章是applicationContext.xml 中 bean 声明的](https://stackoverflow.com/questions/13795412/declaration-of-beans-in-applicationcontext-xml)连续性

我有一个使用 Spring 3 和 Hibernate 4 和 JSF2 的小型应用程序，当我运行我得到的应用程序时。

```
java.lang.NullPointerException at
net.test.managed.bean.EmployeesManagedBean.getEmpList(EmployeesManagedBean.java:53) 
```

我做错了什么来获得**空指针异常**？任何帮助都是非常可观的。

托管豆：

```
@ManagedBean(name="empMB")
@Named
@Scope("request")
public class EmployeesManagedBean implements Serializable {

    public List<Employees> getEmpList() {
        try {
            empList = new ArrayList<Employees>();
            empList.addAll(getEmployeesService().getEmployees());
        } catch (Exception e) {
            e.printStackTrace();            
        }
        return empList;
    }
} 
```

我有注入注释：

```
@Inject
EmployeesService employeesService; 
```

在EmployeesService中，我有如下注释：

```
@Named
public class EmployeesService implements IEmployeesService {

@Inject
EmployeesDAO employeesDAO;

@Override
public List<Employees> getEmployees() {
    return getEmployeesDAO().getEmployees();
} 
```

在EmployeesDAO中，我有如下注释：

```
@Named
public class EmployeesDAO implements IEmployeesDAO {

@Override
public List<Employees> getEmployees() {
    List query = this.getSessionFactory().getCurrentSession().getNamedQuery("getEmp").list();               
    return query;
} 
```

实体类：

```
@Entity
@javax.persistence.NamedNativeQuery(name = "getEmp", query = "{ ? = call getemployees }", resultClass = Employees.class, hints = { @javax.persistence.QueryHint(name = "org.hibernate.callable", value = "true") })
@Table(name = "EMPLOYEES")
public class Employees { 
```

最后在 applicationContext.xml 我有

```
<context:component-scan base-package="net.test" /> 
```

更新1：

当我使用 @Component("empMB") 或 @Named("empMB") 我得到以下异常

```
Error creating bean with name 'empMB': Injection of autowired 
dependencies failed;
nested exception is org.springframework.beans.factory.BeanCreationException: 
Could not autowire field: net.test.employees.service.EmployeesService
net.test.managed.bean.EmployeesManagedBean.employeesService; 
nested exception is org.springframework.beans.factory.
NoSuchBeanDefinitionException: No matching bean of type
[net.test.employees.service.EmployeesService] found for 
dependency: expected at least 1 bean which qualifies as autowire 
candidate for this dependency. Dependency annotations: {@javax.inject.Inject()} 
```

更新 2

应用程序上下文.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">  

    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->
<bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="oracle.jdbc" />
        <property name="jdbcUrl" value="jdbc:oracle:thin:@server:1521:DEV" />
        <property name="user" value="scott" />
        <property name="password" value="tiger" />
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" />
    </bean> 
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />     
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>
    <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager" />
    <!-- Transaction Manager is defined -->
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:36:55.497

尝试 org.springframework.stereotype.Component 注释而不是 ManagedBean，如

```
@Component("test")
class Test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:40:45.690

我已经设法解决了获取空指针异常的问题， [感谢 Marten Deinum](http://forum.springsource.org/showthread.php?133181-Getting-nullpointer-exception-when-Annotation-are-used-for-Spring-3)

我正在做的错误是DAO类没有**@Inject**，我已将DAO类修改为

```
@Named
public class EmployeesDAO implements IEmployeesDAO {

    @Inject
    private SessionFactory sessionFactory;

    @Override
    public List<Employees> getEmployees() {

             List query = sessionFactory.getCurrentSession().getNamedQuery("getEmp").list();

        return query;
    }
} 
```

在 ManagedBean 中，我已经做出了 Daniel 提到的更改，以使用**@Named**而不是**@ManagedBean**。修改后的 ManagedBean

```
@Named("empMB")
@Scope("request")
public class EmployeesManagedBean implements Serializable {

    @Inject
    IEmployeesService employeesService; 
```

当然，在**applicationContext.xml**中添加以下内容来扫描实体类

```
<property name="annotatedClasses">  
          <list>
           <value>net.test.model.Employees</value>
           </list>  
           </property> 
```

# xamarin.ios - 调用 ServiceStack.Text.JsConfig.RegisterTypeForAot (); 使用 MonoTouch 在设备上启动时导致 SIGSEGV

> ID：13796704
> 
> 赞同：1
> 
> 时间：2012-12-10T07:31:27.967
> 
> 标签：xamarin.ios, servicestack, segmentation-fault, aot

我一直在尝试使用 ServiceStack.Text.JsConfig.RegisterTypeForAot(); 在运行时不用于解决我的 AOT 问题的方法中，但是当我调用它时遇到了其他奇怪的问题。我有 10 次调用各种类型，包括类、结构和枚举。当我有 9 个电话时，一切正常，我已经改变了一些类型，所以我很确定它是数字。当我有 10 个电话时，我得到...

```
Stacktrace:

  at System.MonoType.ToString () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/MonoType.cs:636
  at System.Exception.get_ClassName () [0x0000b] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Exception.cs:141
  at System.Exception.ToString () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Exception.cs:286
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>
  at System.Type.Equals (System.Type) [0x00020] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Type.cs:471
  at System.Type.IsAssignableFrom (System.Type) [0x00008] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Type.cs:863
  at System.Collections.Generic.EqualityComparer`1<intptr>..cctor () [0x00029] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/EqualityComparer.cs:42
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>
  at System.Collections.Generic.Dictionary`2<intptr, System.WeakReference>.Init (int,System.Collections.Generic.IEqualityComparer`1<intptr>) [0x00012] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/Dictionary.cs:265
  at System.Collections.Generic.Dictionary`2<intptr, System.WeakReference>..ctor () [0x00006] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/Dictionary.cs:223
  at MonoTouch.ObjCRuntime.Runtime..cctor () <IL 0x00000, 0x0002b>
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

    0   TouchContainer                      0x028dbda5 mono_handle_native_sigsegv + 244
    1   TouchContainer                      0x028a3cfd mono_sigsegv_signal_handler + 172
    2   libsystem_c.dylib                   0x320e8e93 _sigtramp + 42
    3   TouchContainer                      0x0093aa25 ServiceStack_Text_Common_JsWriter_WriteEnumFlags_System_IO_TextWriter_object + 381

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

TouchContainer 是应用程序的名称。

这似乎发生在应用程序运行的早期，它一定是 AOT 中的错误或发出错误代码的东西。

有没有人有任何想法？我应该在 Xamarin 上记录一张票吗？看起来制作一个小型复制项目可能会很棘手......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:56:10.737

Rolf 建议（在错误评论中）将 -f 添加到 monotouch 参数中。这似乎已经解决了。

# scroll - 面板可滚动静止内容被隐藏

> ID：13796708
> 
> 赞同：0
> 
> 时间：2012-12-10T07:31:48.890
> 
> 标签：scroll, sencha-touch, sencha-touch-2

我想要一个带有顶部和底部堆叠工具栏的模式窗口，并且中间面板中的所有内容都应该是可滚动且可见的。但是当我这样做时，即使面板是可滚动的：“垂直”，但它只会在拖动时滚动，只要鼠标向上，它就会滚动回原始位置。由于这个问题，旋转木马下方的长文本只有在我拉起面板时才可见。如何使这个面板像一个列表一样简单地滚动，当释放而不是回到顶部时停止滚动。

这是我正在加载的视图：

```
Ext.define('myshop.view.StyleDetails', {
    extend : 'Ext.Panel',
    requires : [ 'Ext.Toolbar', 'Ext.carousel.Carousel', 'Ext.Img', ],
    alias : 'widget.styledetailsview',
    xtype : 'styledetail',
    config : {
        modal : true,
        id : 'fullDetails',
        cls : 'detailsBox',
        width : 300, // Some dummy values
        height : 200, // Some dummy values
        hideOnMaskTap : true,
        title : 'Details',
        styleHtmlContent : true,
        rec : '', // Record
        tid : '', // templateId
        items : []
    },
    initialize : function() {
        var me = this;
        var info = me.config.rec;
        var hccontainer = Ext.getCmp('hccontainer');
        me.add([
                {
                    xtype : 'toolbar',
                    docked : 'top',
                    id : 'detailsTopToolbar',
                    title : info.styleProperties.title,
                    items : [ {
                        xtype : 'button',
                        ui : 'decline-round',
                        text : 'X',
                        docked : 'right',
                        listeners : {
                            tap : {
                                fn : function(e, html, obj, c) {
                                    this.parent.parent.closeWindow();
                                }
                            }
                        }
                    } ]
                },
                {
                    xtype : 'panel',
                    layout : 'vbox',
                    inline: {
                        wrap: false
                    },
                    scrollable : 'vertical',
                    items : [{
                        xtype : 'carousel',
                        directionLock : true,
                        flex : 3,
                        cls : 'pdp imgs',
                        config : {
                            direction : 'horizontal',
                            id : 'det'
                        }
                    },
                    {
                        xtype : 'panel',
                        layout : 'vbox',
                        flex : 1,
                        items : [ {
                            xtype : 'panel',
                            id : 'detailsPrice',
                            cls : 'pdp price',
                            html : 'Rs. ' + info.price
                        }, {
                            xtype : 'panel',
                            id : 'detailsSizes',
                            cls : 'pdp sizes',
                            html : 'Available Sizes: ' + info.available_sizes
                        }, {
                            xtype : 'panel',
                            id : 'desc',
                            cls : 'pdp desc',
                            html : ''
                        } ]
                    }]
                },
                {
                    xtype : 'button',
                    ui : 'confirm',
                    text : 'Buy Now',
                    docked : 'bottom',
                    listeners : {
                        tap : {
                            fn : function(e, html, obj, c) {
                                window.open('www.website.com'+ '?ref=jd');
                            }
                        }
                    }
                } ]);
        var detCarousel = Ext.getCmp("det");
        var imgs = [];
        if (!Ext.isEmpty(info.styleProperties.backImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.backImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.bottomImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.bottomImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.defaultImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.defaultImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.frontImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.frontImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.leftImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.leftImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.rightImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.rightImageUrl
            });
        }
        if (!Ext.isEmpty(info.styleProperties.topImageUrl)) {
            imgs.push({
                xtype : 'image',
                src : info.styleProperties.topImageUrl
            });
        }
        detCarousel.setItems(imgs);
        // Rendering sizes
        var sizeOptions = info.productOptions;
        var html = "Available Sizes : ";
        for ( var i = 0; i < sizeOptions.length; i++) {
            if (sizeOptions[i].active && sizeOptions[i].available) {
                html = html + sizeOptions[i].unifiedSize + ', ';
            }
        }
        html = Ext.String.trim(html);
        html = html.substring(0, html.length - 1);
        html = html + ' (<a href="' + info.sizeChartImage
                + '" target="_blank">Size Chart</a>' + ')';
        Ext.getCmp("detailsSizes").setHtml(html);

        // Rendering Description
        Ext.getCmp("desc").setHtml(info.description);

        me.setMinWidth(hccontainer.element.dom.offsetWidth);
        me.setMinHeight(hccontainer.element.dom.offsetHeight - 88);
        this.callParent(arguments);
    },
    closeWindow : function() {
        console.log("closing");
        this.hide('slideOut');
        Ext.defer(function(){ 
            Ext.getCmp("fullDetails").destroy();
        }, 500, this);
    }
}); 
```

我正在使用 Sencha Touch 2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:12:59.443

您的编码技术不正确。仅为 UI 创建 View 类，并在 Controller 类中添加控制器方法。

我认为您面临的问题是因为中间面板在工具栏下方扩展。尝试为顶部和底部的工具栏添加高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:31:35.293

我通过在初始化函数中更改 minWidth 和 minHeight 解决了这个问题：

```
me.setMinWidth(myparent.element.dom.offsetWidth);
me.setMinHeight(myparent.element.dom.offsetHeight - 88); 
```

`myparent`父容器在哪里。

# iphone - 精灵动画和移除

> ID：13796715
> 
> 赞同：1
> 
> 时间：2012-12-10T07:32:32.100
> 
> 标签：iphone, animation, cocos2d-iphone, sprite

我想在游戏中的松鼠英雄触摸水果时为其设置动画。动画后必须将水果从场景中移除。我已经尝试了 2 周，但没有做对。我的 spritesheet 有 6 帧精灵动画。

目前，当英雄与水果相交时，我正在执行以下代码：

```
 NSMutableArray *burst = [NSMutableArray array];

            for(int i = 1; i <= 6; ++i) {
              [burst addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Fruit01000%d.png", i]]];
            }

            CCAnimation *walkAnim = [CCAnimation animationWithFrames:burst delay:0.02f];
            CCActionInterval *animAction = [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO];

            [expl stopAllActions];
            expl.visible = TRUE;
            expl.position = ccp(coinColl.position.x,coinColl.position.y);

            cleanupAction = [CCCallFuncND actionWithTarget:self selector:@selector(explOver:) data:expl];
            seqF = [CCSequence actions:animAction, cleanupAction, nil];

            [expl runAction:seqF];     

            [platformLayer removeChild:coinColl cleanup:YES];
            [self sumScore]; 
            [coinLabel setString: [NSString stringWithFormat:@"%i",appDelegate.coinScore+appDelegate.levelScore]]; 
```

explOver() 函数：

```
-(void) explOver:(CCSprite*)explosion{
    explosion.visible = FALSE;
} 
```

它部分工作，一些水果不显示动画，并且跳转到下一个场景时应用程序崩溃，给出错误“指针被释放未分配”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:59:32.453

如果你想从你的游戏层中完全移除精灵，你可以将类别添加到 CCNode 类中作为这个。

```
@interface CCNode(CategoryName)
- (void) removeFromParentAndCleanupYES;
@end

@implementation CCNode(CategoryName)
- (void) removeFromParentAndCleanupYES
{
    [self removeFromParentAndCleanup:YES];
}
@end 
```

然后您可以在使用序列运行任何操作后添加此方法调用：

```
id animate = // any action, CCAnimate in your case
id callback = [CCCallFunc actionWithTarget:_fruitSprite selector:@selector(removeFromParentAndCleanupYES)];
id sequence = [CCSequence actionOne: animate two: callback];
[_fruitSprite runAction: sequence]; 
```

这只是一个建议，但它应该可以正常工作。如果您需要在代码的多个部分中使用操作删除节点，这是有道理的。

* * *

另一个变体是使用 CCCallFuncN 动作，它将你的精灵作为参数传递给给定的选择器。

```
id animate = // any action, CCAnimate in your case
id callback = [CCCallFuncN actionWithTarget:self selector:@selector(onAnimationDidFinished:)];
id sequence = [CCSequence actionOne: animate two: callback];
[_fruitSprite runAction: sequence];

- (void) onAnimationDidFinished:(CCNode*)node
{
    [node removeFromParentAndCleanup:YES];
} 
```

# ios - 如何使画布元素与窗口的大小完全相同？

> ID：13796716
> 
> 赞同：0
> 
> 时间：2012-12-10T07:32:33.937
> 
> 标签：ios, css, html, web-applications, canvas

我想创建画布元素以占用窗口的所有空间，而无需滚动。我执行以下操作：

1.  重置边距和填充
2.  取窗口大小
3.  删除 body 的所有子项
4.  创建画布，将画布大小设置为窗口大小
5.  将画布添加到正文

它可以工作，但我在页面底部多取了一些像素，浏览器上下滚动以显示这些像素。我在 iPad 和 Android (Galaxy Nexus) 上对其进行了测试——效果相同，所以它不像是一个包，而是一个误会的功能。

你知道这些像素是什么以及如何去除它们吗？

编码：

```
<!DOCTYPE html> 
<html> 
<head> 
  <meta charset="UTF-8" />
  <title>My Page</title> 
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css" />
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
  <script type="text/javascript">
    $(function() {
      initApp();
    });

    function initApp() {
      windowWidth = $(window).width();
      windowHeight = $(window).height();

      canvas = document.createElement('canvas');
      canvas.width = windowWidth;
      canvas.height = windowHeight;
      context = canvas.getContext("2d");

      var body = document.getElementById("bo");
      while (body.firstChild) {
        body.removeChild(body.firstChild);
      }
      body.appendChild(canvas);

      // write something for test
      context.fillStyle = "#00ff00";
      context.fillRect(0, 0, windowWidth, windowHeight);
      context.fillStyle = "#ff0000";
      context.fillRect(0, 0, 200, 200);
      context.fillStyle = "#000000";
      context.font = '20px _sans';
      context.textBaseline = 'top';
      context.fillText ("Canvas " + windowWidth + "x" + windowHeight + "!", 0, 0);
    }

  </script>
</head> 
<body id="bo">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:35:59.787

如果您只是想摆脱滚动条并且您不担心丢失那些额外的几个像素，只需将 CSS 样式添加`overflow: hidden`到 body 元素。也尝试添加`display: block`到画布元素。

# c# - 转义 .NET 命令行参数的规范解决方案

> ID：13796722
> 
> 赞同：15
> 
> 时间：2012-12-10T07:33:17.347
> 
> 标签：c#, .net, vb.net, command-line-arguments

**问题**：给定一个文件名和一个任意字符串列表，是否有一种*规范的方法*来创建单个命令行，这样[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)（和 C#'s `void main(String[] args)`/ VB's `Sub Main(args() As String)`）将返回相同的字符串列表？

* * *

**背景**：.NET 将命令行拆分为参数的方式[非常复杂](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)，例如：

> 如果双引号跟在两个或偶数个反斜杠之后，则将前面的每个反斜杠对替换为一个反斜杠并删除双引号。如果双引号后面有奇数个反斜杠，包括一个，则前面的每一对都被一个反斜杠替换，其余的反斜杠被删除；但是，在这种情况下，不会删除双引号。

许多人尝试简单的“将每个参数放在双引号中并转义现有的双引号”方法，但一旦其中一个参数包含尾部反斜杠，就会失败。StackOverflow 上有关于这个问题的各种问题，例如：

*   [如何转义包含空格的路径](https://stackoverflow.com/q/3733849/87698)
*   [在 C# 中转义命令行参数](https://stackoverflow.com/q/5510343/87698)
*   [Process.Start 的转义字符串](https://stackoverflow.com/q/2393384/87698)
*   [在 C# 中传递命令行参数](https://stackoverflow.com/q/653563/87698)

但是，他们的答案要么不够通用，无法为所有案例提供规范的解决方案，要么似乎是“迭代地”开发的（“哦，还有一个我忘记了的特殊情况，让我们添加它，*现在*它应该涵盖大多数情况...... ”）。由于这是一个相当普遍的问题，我希望看到一个提供信心的解决方案，例如，通过

*   来自权威来源（可能是参与这个疯狂命令行约定的开发人员之一的博客条目）或
*   提供给定算法满足 .NET 命令行要求的正式证明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:05:33.983

[This algorithm](http://blogs.msdn.com/b/twistylittlepassagesallalike/archive/2011/04/23/everyone-quotes-arguments-the-wrong-way.aspx) is generic and comes from a relatively authoritative source (MSDN blogs).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:29:13.967

几年前，微软宣布他们将在 CodePlex 上发布一个命令行解析器（而不是应该与 .NET Framework 4 一起发布的 System.Shell.CommandLine）。我不确定他们是否真的这样做了。如果您想要由 Microsoft 员工开发的解析器，请查看[cmdline](http://code.msdn.microsoft.com/windowsdesktop/Command-Line-Parser-Library-a8ba828a/view/SourceCode#content)。您还可以在[CodePlex](http://www.codeplex.com/)中查找命令行解析。

您也可以尝试非常强大的[Mono.Options 。](http://tirania.org/blog/archive/2008/Oct-14.html)

# sed - sed：搜索和替换符合特定正则表达式的字符串

> ID：13796723
> 
> 赞同：0
> 
> 时间：2012-12-10T07:33:21.050
> 
> 标签：sed

使用 sed，我试图递归地搜索和替换`foo`可能在它之前和之后都有字符的字符串。

举些例子：-

```
"foo_

'foo_abc 
```

我想专门替换`foo`为，`foobar`以便我上面的示例将变为：-

```
"foobar_

'foobar_abc 
```

我没有成功：-

```
find . -name "*.py" | xargs sed -i '/*foo*/{s/foo/foobar/g}' 
```

我应该怎么做才能成功搜索和替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:39:45.657

删除`*`'s 应该做，你不需要初始`/foo/`：

```
find . -name "*.py" | xargs sed -i 's/foo/foobar/g' 
```

# gnome-shell - 为 gnome-shell 3.4 和 3.6 编写扩展

> ID：13796726
> 
> 赞同：1
> 
> 时间：2012-12-10T07:33:35.297
> 
> 标签：gnome-shell, gjs

我正在为 gnome-shell 编写扩展。但是在 gnome-shell 3.4 中添加了一个菜单，`panel._menus`并且在 gnome-shell3.6 中使用 with `panel.menuManager`。如何添加适用于每个版本的菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:12:00.193

有几种方法可以做到这一点。

您可以检查是否存在`panel._menus`并使用它（如果存在），否则使用`panel.menuManager`：

```
let menuManager = panel._menus || panel.menuManager
// now do everything with menuManager 
```

或者您可以显式检查 gnome-shell 版本：

```
const ShellVersion = imports.misc.config.PACKAGE_VERSION.split(".").map(
   function (x) { return +x; }) // <-- converts from string to number
// this is now an array, e.g. if I am on gnome-shell 3.6.2 it is [3, 6, 2].

if (ShellVersion[1] === 4) {
    // GNOME 3.4, use panel._menus
} else if (ShellVersion[1] === 6) {
    // GNOME 3.6, use panel.menuManager
} 
```

# jquery - IE 8 及更低版本不触发点击具有 display: none 的元素；任何解决方法？

> ID：13796729
> 
> 赞同：17
> 
> 时间：2012-12-10T07:34:00.910
> 
> 标签：jquery, css, input, internet-explorer-8

> ### 问题在于 Internet Explorer 8 及更低版本。找到了一个不错的工作解决方案。

### 问题

Internet Explorer 8 及更低版本不会触发`click()`由 jQuery 设置的事件（甚至可能是内联的，不确定）在`<input />`具有 CSS 属性的元素上`display`设置为`none`. 它适用于 Internet Explorer 9、Mozilla Firefox 和 Google Chrome。奇怪的。这就是代码的样子，Internet Explorer 8 及以下版本是否有任何解决方法？

### 语境

`input`要单击的 被赋予样式`display: none;`。并且函数是在 的情况`click`下给出的`input`。由于整个东西都在里面，它会在点击时`label`触发`click`事件。你可以把它当作某种漂亮的选择器，隐藏.`input``label``input`

默认情况下，`label`隐式将`click`事件转移到第一个`input`，这就是我想在这里使用的。我不希望用户在`input`这里看到丑陋的东西。预期的浏览器行为，但无法正常工作。

### HTML

```
<ul>
    <li>
        <label>
            <input type="button" value="Button 1" />
            Hello! This is a list item #1.
        </label>
    </li>
    <li>
        <label>
            <input type="button" value="Button 2" />
            Hello! This is a list item #2.
        </label>
    </li>
    <li>
        <label>
            <input type="button" value="Button 3" />
            Hello! This is a list item #3.
        </label>
    </li>
</ul>​ 
```

### 导致问题的确切 CSS

```
ul li,
ul li label {display: block; padding: 5px; cursor: pointer;}
ul li label input {display: none;}
ul li {border-bottom: 1px solid #ccc;}
ul li:hover {background-color: #eee;}​ 
```

### JavaScript

```
$(document).ready(function(){
    $("input").click(function(){
        alert("Hey you! " + $(this).attr("value"));
    });
});​ 
```

### 小提琴：http: [//jsfiddle.net/qSYuP/](http://jsfiddle.net/qSYuP/)

* * *

### 更新#1：尝试赋予`for`属性：

```
<label for="btn1">
    <input type="button" value="Button 1" id="btn1" /> 
```

还是不行！

* * *

### 更新 #2：尝试过 CSS `visibility: hidden;`：

```
ul li label input {visibility: hidden;} 
```

打破布局。但是，还是不行！

* * *

### 更新#3：尝试了 CSS `position: absolute;`：

```
ul li label {overflow: hidden;}
ul li label input {position: absolute; left: -99em;} 
```

**作品！**我没办法使用`overflow: hidden;`，严重中招了！

* * *

### 更新#4：手动触发`click()`功能：

```
$(document).ready(function(){
    $("input").click(function(){
        console.log("Hey you! " + $(this).attr("value"));
    });
    $("label").click(function(){
        $(this).find("input").click();
    });
}); 
```

**好吧，IE 8 在打印1209**次后就出栈`LOG: Hey you! Button 3`了！

 **```
LOG: Hey you! Button 3 
LOG: Hey you! Button 3 
LOG: Hey you! Button 3 
LOG: Hey you! Button 3 
LOG: Hey you! Button 3 
SCRIPT28: Out of stack space 
```

**无限工作！**应该是我的脚本的问题！

* * *

### 解决方案：有点糟糕的修复，但成功了！

因为是支持 IE 8 的缘故`opacity`，我不得不使用`display: inline-block;`with `opacity: 0;`。

```
ul li label input {
    opacity: 0;
    width: 0px;
    height: 0px;
    display: inline-block;
    padding: 0;
    margin: 0;
    border: 0;
} 
```

现在`input`' 框被隐藏了，从字面上看。此修复仅适用于 IE 8！

**必须使用IE 8 及以下 Hack**修复：

```
ul li label input {
    opacity: 0\9;
    width: 0px\9;
    height: 0px\9;
    display: inline-block\9;
    padding: 0\9;
    margin: 0\9;
    border: 0\9;
} 
```

### 小提琴：http: [//jsfiddle.net/VSQbD/](http://jsfiddle.net/VSQbD/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T07:44:29.420

我认为这很简单。您只需要在可见项目上使用点击处理程序。如果您希望在隐藏对象时单击`<label>`或`<li>`工作`<input>`并且希望它在所有浏览器中工作，那么您只需在`<label>`或上放置一个单击处理程序，`<li>`因为这是一个可见的对象，将接收`<input>`隐藏时单击。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T08:52:02.837

### 有点糟糕的修复，但成功了！

因为是支持 IE 8 的缘故`opacity`，我不得不使用`display: inline-block;`with `opacity: 0;`。

```
ul li label input {
    opacity: 0;
    width: 0px;
    height: 0px;
    display: inline-block;
    padding: 0;
    margin: 0;
    border: 0;
} 
```

现在`input`' 框被隐藏了，从字面上看。此修复仅适用于 IE 8！

尝试使用 IE 8 Hack：

```
ul li label input {
    opacity: 0\9;
    width: 0px\9;
    height: 0px\9;
    display: inline-block\9;
    padding: 0\9;
    margin: 0\9;
    border: 0\9;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:49:11.763

你不能定位元素绝对位置，而是将它的左属性设置为 -99999px 之类的东西吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T07:46:50.210

不同的浏览器解释 `display:none`不同。`display:none`实际上意味着元素应该消失，使得 jquery 很难在 DOM 中找到。

更好的方法是使用`visibility:hidden`然后使用`click`方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:35:37.140

您的代码非常不正确..

*   `input`里面`label`？
*   假设事件会冒泡而不是向下
*   它是如此简单..如果您想知道何时单击 li 将处理程序附加到该处理程序而不是输入

在您更新的 4 中，您可以`event.stopPropagation`单击“输入”，这将解决无穷大问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-03T13:37:28.940

从来没有受到这个打击，因为无论如何我做的事情略有不同 - 点击标签`input.checked = !input.checked; return false;`，然后在输入上有一个“更改”事件（而不是点击事件）。**

# angularjs - Angularjs 设置选中的值

> ID：13796732
> 
> 赞同：4
> 
> 时间：2012-12-10T07:34:21.607
> 
> 标签：angularjs, html-select

在 html 页面中，我有一个如下所示的选择，

```
<select>  
    <option value="GMT-12:00">(GMT -12:00) Eniwetok, Kwajalein</option>  
    <option value="GMT-11:00">(GMT -11:00) Midway Island, Samoa</option>  
    <option value="GMT-10:00">(GMT -10:00) Hawaii</option>  
    <option value="GMT-9:00">(GMT -9:00) Alaska</option>  
    ...  
</select> 
```

然后我查询 REST API 并获取人员数据，例如，

```
person : {  
   language : "en_US",  
   timezone : "GMT-9:00"  
   ...  
} 
```

问题：在 AngularJS 应用程序中显示此页面时，如何将“(GMT -9:00) Alaska”设置为选定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-16T23:11:40.403

您可以使用该`ng-model`属性将 API json 响应绑定到您的`select`输入。

给定您的 HTML，我们会得到这个将绑定到`person.timezone`.

```
<div ng-controller="MainController">
    <select ng-model="person.timezone">
      <option value="GMT-12:00">(GMT -12:00) Eniwetok, Kwajalein</option>
      <option value="GMT-11:00">(GMT -11:00) Midway Island, Samoa</option>
      <option value="GMT-10:00">(GMT -10:00) Hawaii</option>
      <option value="GMT-9:00">(GMT -9:00) Alaska</option>
    </select>
  </div> 
```

现在您需要控制器来实际调用 rest 服务并获取 person 对象：

```
function MainController($scope, $http) {
  /* query rest api and retrive the person
     this of course would be replaced with the url of your actual rest call */
  $http({method: 'GET', url: 'rest_api_response.json'}).success(function(data, status, headers, config) {
    $scope.person = data;
    // dont apply if were in digest
    if(!$scope.$$phase)
        $scope.$apply();
  }).
  error(function(data, status, headers, config) {
    console.log("error retriveing rest api response");
  });
} 
```

* * *

对于这个示例，我刚刚制作了一个名为的文件`"rest_api_response.json"`，其中包含您的回复

```
{
 "language" : "en_US",
 "timezone" : "GMT-9:00"
} 
```

[这是一个包含样本的 plunker](http://plnkr.co/edit/VGSeI2UEihh7m0JzObu8?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T23:20:43.470

您的下拉菜单不在`"Angular world"`.
您没有绑定到它的模型，因此当您更改选择时，角度​​世界中不会真正发生**任何事情。**

所以要么：

1.更改您的下拉菜单以使用模型绑定在“Angular world”中工作（然后通过将从服务器返回的值分配为选定值轻松执行您需要的操作。）
这是一个很好的[参考](https://stackoverflow.com/questions/14817728/need-example-of-select-usage-in-angularjs-input-form)。

2\. 继续使用纯 JS 或 JQuery 等框架在非 Angular 世界中工作，并以不同的方式进行。

# c - 如何从 C 中的图像目录创建视频

> ID：13796733
> 
> 赞同：1
> 
> 时间：2012-12-10T07:34:31.940
> 
> 标签：c, ffmpeg, java-native-interface, jnienv

如何使用 c 语言从包含一组图像的目录创建视频。我想在 ac Class 文件中执行此操作（而不是在命令提示符中）。类似的东西。

```
void ImagetoVideo(char [] path)
{
   // create video from file
} 
```

我在堆栈溢出中看到了一些代码，但这都是关于运行命令行代码的。这是代码

```
ffmpeg -f image2 -start_number n -i "PATH_TO_IMAGE_FILE" video.mpg 
    -vcodec mpeg4 test.avi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:06:49.050

你可以自己编码，这不是太难。

对于 AVI 编码，您可以使用[Revel](http://revel.sourceforge.net/docs/html/index.html)。对于 JPG 图像处理，您可以使用[libJPEG](http://libjpeg.sourceforge.net/)。如果您有其他格式的图像，您可以使用适当的库来阅读它们。

读取每个图像并对其进行编码的完整代码会有点长。所以，我用伪代码向你展示这个想法。当有类似的任务时，我使用了相同的方式。

```
 #include "revel.h"
    extern "C" {
     #include "libjpeg/jpeglib.h"
    }

    std::vector<BYTE> frame_buffer;

    Revel_Error revError;
    int encoderHandle;
    revError = Revel_CreateEncoder(&encoderHandle);
    Revel_Params revParams;
    Revel_InitializeParams(&revParams);

    revParams.width = ; // put image width here
    revParams.height = ; // put image height here
//
    revParams.frameRate = 25;
    revParams.quality = 1.0f;
    revParams.codec = REVEL_CD_XVID;
    revParams.hasAudio = 0;
    revParams.audioSampleFormat = REVEL_ASF_UNKNOWN;
    char favi[] = "encoded_video.avi";
    revError = Revel_EncodeStart(encoderHandle, favi, &revParams);

while(read & decode every image into 'frame_buffer' with apropriate lib)
{
    Revel_VideoFrame frame;
    frame.width = image.getwidth();
    frame.height = image.getheight();
    frame.bytesPerPixel = ; // color depth in bytes. if you're using libjpeg it would be cinfo.num_components;
    frame.pixelFormat = REVEL_PF_BGR;
    frame.pixels = &frame_buffer[0];
    int frameSize;
    revError = Revel_EncodeFrame(encoderHandle, &frame, &frameSize);
}

    int totalSize;
    revError = Revel_EncodeEnd(encoderHandle, &totalSize);
    Revel_DestroyEncoder(encoderHandle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:17:39.387

您可以使用以下命令在您的 C++（或 C）代码中运行此命令：system(...);

这里有更多信息：[系统（..）](http://www.cplusplus.com/reference/cstdlib/system/)

# java - 无法在 Windows 命令行上使用 json-simple

> ID：13796736
> 
> 赞同：1
> 
> 时间：2012-12-10T07:34:43.000
> 
> 标签：java, command-prompt

我正在尝试运行需要 json-simple-1.1.1.jar 文件的 Java 程序。

我可以使用 javac -cp json-simple-1.1.1.jar *.java 编译文件，但是当我运行 java -cp json-simple-1.1.1.jar Server 时出现以下错误：错误：找不到或加载主类服务器

Server 类确实存在，我可以在 Linux 中毫无问题地运行相同的命令序列，但我无法让它在 Windows 上运行。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:53:55.393

从与运行 javac 相同的目录中，只需运行：

```
$ java -cp json-simple-1.1.1.jar your-java-file-with-main-method-and-without-java-extension 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:38:09.343

运行`java -jar "json-simple-1.1.1.jar"`。

或者

`java -cp "json-simple-1.1.1.jar"`.

# c# - 文本框失去焦点没有触发从顶部关闭的对话框

> ID：13796737
> 
> 赞同：4
> 
> 时间：2012-12-10T07:34:45.710
> 
> 标签：c#, wpf

我有一个文本框绑定到 viewModel 中的一个属性。我在 viewmodel 中进行了验证检查，并检查用户是否对数据进行了任何更改。所以在退出时它要求用户提交对数据库的更改。

我面临的问题是当我更改文本框中的值并且用户直接单击关闭按钮对话框时，不会发生丢失焦点并且属性中的值不会更改。所以我用

```
UpdateSourceTrigger=PropertyChanged 
```

我确实更改了属性，但在每次按键时都会在撤消堆栈中创建一个条目。我只想在失去焦点时更新属性，即一个变更集，即使用户单击对话框顶部的关闭按钮也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:06:36.977

如果用户有更改并尝试关闭，可能会要求用户保存？

```
 public MainWindow()
        {
            InitializeComponent(); 

            this.Closing += new System.ComponentModel.CancelEventHandler(MainWindow_Closing);
        }

        void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            //ask the user to save , if needed to 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:31:09.030

您可以将以下内容添加到您的 app.xaml.cs。然后你的 UpdateSourceTrigger=LostFocus 应该工作。

```
 protected override void OnStartup(StartupEventArgs e)
    {
        EventManager.RegisterClassHandler(typeof(Button), ButtonBase.ClickEvent, new RoutedEventHandler(ButtonClick));
         //...
     }

    private void ButtonClick(object sender, RoutedEventArgs e)
    {
        if (sender != null && sender is Button)
        {
            (sender as Button).Focus();
        }
    } 
```

# iphone - UIWebDocumentView：iOS 库中没有信息

> ID：13796738
> 
> 赞同：0
> 
> 时间：2012-12-10T07:34:46.430
> 
> 标签：iphone, pdf

我无法`UIWebDocumentView`在 iOS Library 中找到任何文档。任何想法 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T21:06:47.570

这是一个私有 API 类，也就是不要使用它，否则您的应用程序将被 AppStore 拒绝。

# c# - 识别占用空间小的属性名称

> ID：13796740
> 
> 赞同：10
> 
> 时间：2012-12-10T07:34:52.047
> 
> 标签：c#, networking, overhead

我希望发送数据包以同步游戏中不断变化的游戏对象的属性。我已将服务器端属性更改时的通知发送到负责发送更新以供客户端使用的 EntitySync 对象。

现在，我正在预先修复属性字符串名称。当您发送大量更新（位置、HP、角度）时，这是一个很大的开销。我想要一种半独特的方式来识别这些数据包。

我考虑了属性（反射......慢？），在末尾使用后缀并将其作为 ID（Position_A，HP_A）发送，但我失去了一种用低脚快速识别这些属性的干净方法打印。它应该消耗尽可能少的字节。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T05:23:09.210

扩展查理的解释，

Marc Gravell 制作的 protobuf-net 库正是您在序列化方面所寻找的。澄清一下，这是 Marc Gravell 的图书馆，而不是 Google。它使用 Google 的协议缓冲区编码。它是目前最小的序列化程序之一，实际上它可能会生成比您手动序列化它的数据包更小的数据包（默认 Unity3D 如何处理网络，呸）。

至于速度，Marc 使用了一些非常聪明的技巧（即 HyperDescriptors）[http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces](http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces) 来消除运行时反射的开销。

关于网络抽象的思考；看看 Rx [http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)事件流是迄今为止我处理网络和多线程子系统内通信的最优雅的方式：

```
// Sending an object:
m_eventStream.Push(objectInstance);

// 'handling' an object when it arrives:
m_eventStream.Of(typeof(MyClass))
.Subscribe ( obj =>
{
    MyClass thisInstance = (MyClass) obj;
    // Code here will be run when a packet arrives and is deserialized
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:20:27.673

听起来您正在尝试序列化对象以通过网络发送。我同意通过网络发送完整的属性名称效率不高；这消耗的字节比你需要的多。

为什么不使用谷歌为此目的而发明的一个非常棒的库。

这是 .NET 端口：[http ://code.google.com/p/protobuf-net/](http://code.google.com/p/protobuf-net/)

简而言之，您可以定义要发送的消息，以便每个属性都有一个唯一的 id，以使发送属性更有效：

```
SomeProperty = 12345 
```

然后它只是发送属性的 id 和它的值。它还优化了发送值的方式，因此它可能仅使用 1、2、3 个字节等，具体取决于值的大小。非常聪明，真的。

# android - 更新android中自定义列表中的特定项目

> ID：13796742
> 
> 赞同：0
> 
> 时间：2012-12-10T07:35:26.227
> 
> 标签：android, android-listview

在我的 android 应用程序中，我使用自定义列表来显示一个日志，其中包含电话号码并将状态作为项目发送。当我向电话号码发送短信时，我将电话和状态更新为待处理。当短信送达时，我想更新为特定客户送达的状态。这个怎么做。请找到我用于我的应用程序的代码

谢谢你

**我的活动**

```
public class MainActivity extends Activity {
private ListView listview1;
private Vector<Data> datas = null;
private DataAdapter adapter = null; 
private int clickCounter = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    datas = new Vector<Data>();
    adapter = new DataAdapter(this, R.layout.listview_item_row, datas);
    listview1 = (ListView)findViewById(R.id.listView1);
    View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
    listview1.setAdapter(adapter);
 }

public void sendSMS() {
    Data data1 = new Data(R.drawable.ic_launcher, "987654321", "Pending");
    datas.add(0, data1);
    adapter.notifyDataSetChanged();
}
} 
```

**数据适配器类**

```
public class DataAdapter extends ArrayAdapter<Data>{
Context context;
int layoutResouceId;
Vector<Data> datas = null;

public DataAdapter(Context context, int layoutResourceId, Vector<Data> datas){
    super(context, layoutResourceId, datas);
    this.context = context;
    this.layoutResouceId = layoutResourceId;
    this.datas = datas;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    DataHolder holder = null;

    if( row == null ){
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResouceId, parent, false);

        holder = new DataHolder();
        holder.phoneno = (TextView)row.findViewById(R.id.phoneno);
        holder.status = (TextView)row.findViewById(R.id.status);

        row.setTag(holder);
    }
    else {
        holder = (DataHolder)row.getTag();
    }

    Data data = datas.get(position);
    holder.txtPhoneno.setText(data.title);
    holder.txtStatus.setText(data.desc);        
    return row;
}

static class DataHolder {
    TextView txtPhoneno;
    TextView txtStatus;
}
} 
```

# jquery - 使用媒体查询来处理 ie

> ID：13796744
> 
> 赞同：0
> 
> 时间：2012-12-10T07:35:31.150
> 
> 标签：jquery, css, media-queries

我有一个`css`文件，其中包含我`css`的所有和`css`媒体查询。我使用本地硬盘驱动器测试我的页面。它在所有现代浏览器中都可以正常工作，除了`ie 7 8`. 我将脚本包含`response.js`在`html header`我的硬盘中，但它仍然不起作用。如果有人可以提供帮助。它真的很棒。谢谢

以下是我如何将脚本添加`css`到我的`html header`.

```
<link rel="stylesheet" type="text/css" href="shane.css"/>
<script src="respond.src.js"></script> 
```

# http - 如何使用模板 XSLT 获取位置或索引

> ID：13796745
> 
> 赞同：1
> 
> 时间：2012-12-10T07:35:33.840
> 
> 标签：http, xslt

XML:

```
 <Grandparent>
         <Parent>
                 <Children>
                       <Info>
                           <Name>
                              <label id="chname"/>
                           </Name>
                       </Info>
                 </Children>

                 <Children>
                       <Info>
                           <Name>
                              <label id="chname"/>
                           </Name>
                       </Info>
                 </Children
                <Children>
                       <Info>
                           <Name>
                              <label id="chname"/>
                           </Name>
                       </Info>
                 </Children

         </Parent>
    </Grandparent> 
```

XSLT：

```
<xsl:template match"/">
   <xsl:apply-templates select="GrandParent/Parent/Children" />
</xsl:template>

<xsl:template match="Children">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

  <xsl:template match="Children/Info/Name/label">
    <xsl:copy>
      <xsl:variable name="childCtr" select="Parent/Children[position()]"/>

        <xsl:attribute name="text">
                     <xsl:value-of select="$childCtr"/>
        </xsl:attribute>
        <xsl:apply-templates select="@*|node()" />

     </xsl:copy>
  </xsl:template>

  <!--Identity template copies content forward -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template> 
```

如何在将属性添加到标签标签并获取整个“孩子”节点时使用模板获取“孩子”的索引或位置？

像：

```
 Parent[0] = Children1,
 Parent[1] = Children2,
 Parent[2] = Children3 
```

我怎么能得到这种东西？我需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:38:02.430

在没有您的预期输出列表的情况下，很难说出您想要什么，但也许就是这样......

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="label">
  <label text="{count(../../../preceding-sibling::Children) + 1}">
    <xsl:apply-templates select="@*|node()"/>
  </label>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此输入时...**

```
<Grandparent>
    <Parent>
        <Children>
            <Info>
                <Name>
                    <label id="chname"/>
                </Name>
            </Info>
        </Children>
        <Children>
            <Info>
                <Name>
                    <label id="chname"/>
                </Name>
            </Info>
        </Children>
        <Children>
            <Info>
                <Name>
                    <label id="chname"/>
                </Name>
            </Info>
        </Children>
    </Parent>
</Grandparent> 
```

**...将产生...**

```
<Grandparent>
  <Parent>
    <Children>
      <Info>
        <Name>
          <label text="1" id="chname" />
        </Name>
      </Info>
    </Children>
    <Children>
      <Info>
        <Name>
          <label text="2" id="chname" />
        </Name>
      </Info>
    </Children>
    <Children>
      <Info>
        <Name>
          <label text="3" id="chname" />
        </Name>
      </Info>
    </Children>
  </Parent>
</Grandparent> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:13:38.190

隧道（XSLT 2.0 特性）子模板设置的参数：

```
<xsl:template match="Children">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()">
            <xsl:with-param name="childPosition" select="position()" tunnel="yes"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>

<xsl:template match="Children/Info/Name/label">
    <xsl:param name="childPosition" tunnel="yes"/>
    <xsl:copy>
        <xsl:attribute name="text">
            <xsl:value-of select="$childPosition"/>
        </xsl:attribute>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:39:59.967

试试这个：

```
 <xsl:variable name="childCtr" select="count(ancestor::Children/preceding-sibling::Children)"/> 
```

# java - 无法在 JAVA 中捕获“who -m”命令的输出

> ID：13796746
> 
> 赞同：1
> 
> 时间：2012-12-10T07:35:40.127
> 
> 标签：java, unix

我想获取 telnet 会话的登录用户的 IP 地址

所以我写了以下代码：

```
Process p1 = Runtime.getRuntime().exec(new String[] {"/usr/bin/who", "-m"});
p1.waitFor();

BufferedReader reader = new BufferedReader(new InputStreamReader(p1.getInputStream()));
String line = reader.readLine();

System.out.println("line=" + line);
reader.close(); 
```

但我得到的输出为“null”。

预期输出为：linus pts/1 Dec 10 03:48 (172.21.235.48)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:48:56.723

在这种情况下，您不应传递该`-m`选项。

这对我有用：

```
Process p1 = Runtime.getRuntime().exec(new String[] {"/usr/bin/who"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:54:02.663

在调用`waitFor()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:59:14.360

您可以创建一个 shell 脚本，该脚本将从您的 java 程序接收参数（选项）。然后你可以像这样从java运行你的shell脚本 -

```
 ProcessBuilder pb = new ProcessBuilder("/PATH/test.sh","-m");
    String line; 
    Process process=pb.start(); 
    java.io.InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    while ((line = br.readLine()) != null)
    {
        System.out.println(line);
    }
    return br; 
```

现在在 test.sh 中，你 cab 获取参数并运行命令 -

```
/usr/bin/who $1 (needs to check, not sure) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T03:55:31.837

谢谢大家的回复。

从“dystroy”的回复中，我了解到*-m*正在制造问题。

我试过*--m*并且它有效:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T02:56:51.970

请尝试此代码。它对我有用，并返回与`who -m`UNIX 命令相同的输出。

```
import java.io.*;
public class UserPB
{
        public static void main(String[] args)
        {

                try {
                //      ProcessBuilder pb = new ProcessBuilder("/u01/app/chdir/user.sh");
                        ProcessBuilder pb = new ProcessBuilder("who");
                        Process p;
                        p = pb.start();
                        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
                        System.out.println("Your Host Details--->"+input.readLine());

                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }

        } 
```

# facebook - 使用 Facebook Graphi API，我如何从特定相册中检索我的朋友被标记的分页照片？

> ID：13796749
> 
> 赞同：0
> 
> 时间：2012-12-10T07:35:51.567
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想在我的应用中显示相册的照片。使用图形 API，我可以按月过滤和分页，如下所示，这很棒。我遍历结果并获取每个 ID 的照片。最重要的是，GRAPH API 还为我提供了“下一个”和“上一个”分页链接。很有用。

```
http://graph.facebook.com/[photo-album-id]/photos/?fields=id&limit=6&since=last month 
```

但现在我只想通过两种方式检索那些 ids 过滤器：

1.  仅检索标记用户的那些
2.  仅检索标记了用户及其朋友的那些。

使用图形 API，我找不到任何方法来做到这一点。是否有通过 FQL 的替代方案，其中仍然有分页？

我能想到的最后一个替代方案是程序在 FQL 中，并自己进行分页。

ps 我目前正在使用 Javascript 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:48:39.687

您可以通过以下调用检索当前用户在特定相册中标记的照片`FQL`：

```
select object_id, src, album_object_id from photo where pid in (select pid from photo_tag where subject=me()) and  and album_object_id=somenumber 
```

要检索标记了用户朋友的照片，对于特定相册：

```
select object_id, src, album_object_id from photo where pid in (select pid from photo_tag where subject in (select uid2 FROM friend WHERE uid1 = me())) and album_object_id=somenumber 
```

据我所知，这些结果不会分页。有关如何对 fb 查询进行分页的详细信息，请参阅 Facebook 开发人员博客：[操作方法：使用 Graph API 和 FQL 进行分页](https://developers.facebook.com/blog/post/478/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:25:09.280

在玩了 Graph Explorer (https://developers.facebook.com/tools/explorer/) 之后，我想出了这个解决方案。您可以按如下方式调用 Graph API

/me?fields=friends.limit(5).fields(photos.limit(5))

第一个限制是您想获得多少朋友，第二个限制是您想从每个朋友那里获得多少张照片。

在数据的末尾已经有下一页 URL。我只在资源管理器上进行了测试，但应该可以工作。

希望有帮助，多鲁克

# mysql - 检查传入日期在两个单独的列之间

> ID：13796750
> 
> 赞同：0
> 
> 时间：2012-12-10T07:35:54.607
> 
> 标签：mysql, between

我正在尝试使用今天的日期`cur_date()`并尝试将所有列拉到`datestart`列和`dateend`列之间。

我已经尝试了以下两个查询，但得到：*'where 子句'中的未知列'tdate'*

```
SELECT id, 
       details, 
       CURDATE() AS tdate 
FROM specials 
WHERE tdate BETWEEN datestart AND dateend;

SELECT id, 
       details, 
       CURDATE() AS tdate 
FROM specials WHERE datestart <= tdate AND dateend >= tdate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:49:30.470

在 WHERE 子句中看不到此字段别名，请尝试此查询 -

```
SELECT
  id, details, CURDATE() AS tdate FROM specials
WHERE
  datestart <= CURDATE() AND dateend >= CURDATE(); 
```

或使用子查询 -

```
SELECT id, details, tdate FROM (
  SELECT id, details, CURDATE() AS tdate FROM specials
    ) t
WHERE
  datestart <= tdate AND dateend >= tdate; 
```

# json - JSON 未定义值类型

> ID：13796751
> 
> 赞同：65
> 
> 时间：2012-12-10T07:35:56.663
> 
> 标签：json

我遇到了这个 JSON 代码。我注意到它利用了`undefined`价值。在哪里可以找到有关此值类型的更多信息？

```
 tracks:[
     (         {
        codec:"h264",
        language:undefined,
        id:1,
        bitrate:785236,
        content:"video"
     }         ),
     (         {
        codec:"aac",
        language:undefined,
        id:2,
        bitrate:75969,
        content:"audio"
     }         )
  ], 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-02-18T22:56:10.833

*   **undefined**不是**有效**的 JSON 值，即使它在 javascript 中有效。

    来自[官方 JSON 标准](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf) （ECMA-404，第 5 节）：

    > JSON 值可以是对象、数组、数字、字符串、true、false 或 null。

*   对于 JSON，使用**null**而不是**undefined**：`{ "something": null }`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T07:40:07.843

`undefined`是一种特殊类型，它仅表示变量`language`未初始化或可能尚未定义。

`null`in`javascript`简单地表示没有值，也可以用于表示数字和字符串以及对象的“无值”。`undefined`value 也表示没有值，它是尚未初始化的变量的值和从不存在 的`object`属性或元素获取的值是一个预定义的全局变量，它被初始化为未定义的值。`array``undefined`

`null`并且`undefined`没有任何属性或方法。事实上，使用`.`或`[]`访问这些值的属性或方法会导致`TypeError`.

# php - Perl 中的原始 POST 数据？

> ID：13796753
> 
> 赞同：4
> 
> 时间：2012-12-10T07:36:03.560
> 
> 标签：php, perl, http-post

在 PHP 中，`php://input`可以读取原始请求正文数据，这是我在这种情况下需要的。然而，服务器端主干的其余部分都是用 PERL 编写的，所以我试图找到替代方案`php://input`——但我找不到。

## 简短的问题：

如何在 Perl 中获取原始 POST 数据（*请求正文）？*（CGI 变量完全没有显示）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T07:40:48.967

从 CGI 模块的文档中，

> 如果 POST 数据的类型不是 application/x-www-form-urlencoded 或 multipart/form-data，则不会处理 POST 数据，而是在名为 POSTDATA 的参数中按原样返回。要检索它，请使用如下代码：
> 
> ```
> my $data = $query->param('POSTDATA'); 
> ```

# c++ - 矩阵指针语法

> ID：13796756
> 
> 赞同：2
> 
> 时间：2012-12-10T07:36:05.993
> 
> 标签：c++, pointers, syntax, matrix

我的问题是为什么他们在指针`int**`声明中使用 ()`matrix`作为指向数组的指针。有必要吗？它有什么区别？

```
#include <iostream>
using namespace std;
int main()
{
    int **matrix;       // Pointer to matrix
    matrix = (int **) new int *[2]; // Why use (int**) is it necessary?
    for (i = 0; i < 2; i++)
        matrix[i] = new int[2];
    for (i = 0; i < 2; i++)
        for (int j = 0; j < 2; j++) {
            matrix[i][j] = j + i;
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:46:35.130

这是不必要的，并且有潜在的危险。

new-expression 的类型已经是`int**`，适合赋值给`matrix`。无需将其转换为自己的类型。

即使需要转换，也不应该使用 C 风格的强制转换。这样做会强制转换，即使它没有意义，这是隐藏错误的好方法；例如，如果您不小心`new`输入了错误的类型：

```
matrix = new int[2];           // Friendly compiler error
matrix = (int**) new int[2];   // No diagnostic, likely to cause weird
                               // run-time errors. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:51:24.350

可能的原因：他们是 C 程序员

在 C 书中，习惯上从 malloc 转换动态内存分配。

```
matrix = (int**) malloc(2*sizeof(int*));// C
matrix = (int**) new int*[2]; // local argot 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:43:49.197

矩阵的类型是`int**`，在这种情况下`*`不仅仅是一个指针，而是一个指向数组的指针。所以`**`意味着指向数组指针数组的指针。这就是你如何获得矩阵的二维。

# memory-leaks - 内存泄漏和 GC 根

> ID：13796758
> 
> 赞同：2
> 
> 时间：2012-12-10T07:36:08.757
> 
> 标签：memory-leaks, garbage-collection, heap-memory, dump, out

试图检测 webapp 中的内存泄漏。

*   在崩溃时获取应用程序的堆转储。
*   使用 Eclipse MAT 解析转储。

来自解析的整理信息导致这两个结论 -

1.  占用更多内存的对象没有 GC 根。基本上每当 GC 发生时，它们都会被清理掉。
2.  GC 根下的对象占用的内存要少得多。所以这些可能不是内存泄漏的根本原因（？）。

那么这是否意味着没有泄漏发生？并且由于内存不足错误而发生崩溃？

编辑：添加环境信息

*   我在 tomcat 6 上运行 java webapp。
*   webapp基于openreports（报告工具）

添加最大对象的传入引用列表——

[http://imgur.com/lYrju](http://imgur.com/lYrju)

这里哈希映射的每个实例都有一个来自 com.opensymphony.xwork2 的引用，它不是 GC 收集的。这可能是问题的根源。因为tomcat日志说-

```
SEVERE: The web application [/openreports] created a ThreadLocal with key of type [com.opensymphony.xwork2.ActionContext.ActionContextThreadLocal] (value [com.opensymphony.xwork2.ActionContext$ActionContextThreadLocal@7c45901a]) and a value of type [com.opensymphony.xwork2.ActionContext] (value [com.opensymphony.xwork2.ActionContext@3af7dab3]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
SEVERE: The web application [/openreports] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@258c27bd]) and a value of type [com.opensymphony.xwork2.inject.InternalContext[]] (value [[Lcom.opensymphony.xwork2.inject.InternalContext;@1484fc8d]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 
```

编辑：添加 OOM 错误的堆栈跟踪

```
java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOfRange(Arrays.java:3209)
        at java.lang.String.<init>(String.java:215)
        at java.lang.StringBuffer.toString(StringBuffer.java:585)
        at java.io.StringWriter.toString(StringWriter.java:193)
        at org.displaytag.tags.TableTag.writeExport(TableTag.java:1503)
        at org.displaytag.tags.TableTag.doExport(TableTag.java:1454)
        at org.displaytag.tags.TableTag.doEndTag(TableTag.java:1309)
        at org.efs.openreports.engine.QueryReportEngine.generateReport(QueryReportEngine.java:198)
        at org.efs.openreports.util.ScheduledReportJob.execute(ScheduledReportJob.java:173)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529)
10:01:04,193 ERROR ErrorLogger - Job (90.70|1338960412084 threw an exception.
org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: java.lang.OutOfMemoryError: Java heap space]
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529)
Caused by: java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOfRange(Arrays.java:3209)
        at java.lang.String.<init>(String.java:215)
        at java.lang.StringBuffer.toString(StringBuffer.java:585)
        at java.io.StringWriter.toString(StringWriter.java:193)
        at org.displaytag.tags.TableTag.writeExport(TableTag.java:1503)
        at org.displaytag.tags.TableTag.doExport(TableTag.java:1454)
        at org.displaytag.tags.TableTag.doEndTag(TableTag.java:1309)
        at org.efs.openreports.engine.QueryReportEngine.generateReport(QueryReportEngine.java:198)
        at org.efs.openreports.util.ScheduledReportJob.execute(ScheduledReportJob.java:173)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:37:05.830

您正在运行 ASP.NET WebForms（不是 MVC）应用程序吗？我们在我们的应用程序中遇到了类似的问题，这些是我们遇到的问题。首先，我应该声明我们的网络农场由许多应用程序池组成，当然每个客户端一个。每个应用程序池都有一个特定的内存限制，以确保客户端不会使内存失控并影响其他工作进程。

1) 即使对象没有根，如果它们超过 85K，它们将被放置到大对象堆上，.NET 的 GC 不会压缩。这意味着如果您有一个 100K 的对象，它将位于 LOH 上。清理完对象后，您将获得 100K，而 GC 可能会决定在该洞中放入其他东西。由于它没有被压实，你永远不能保证空间被完全填满。这会在未完全填满的空间中留下空洞，并导致内存碎片。解决此问题的唯一方法是检查您的转储文件并查看哪些对象占用了最大空间并确定可以削减的类/集合。您可能会看到很多对象数组和字符串，因为它们在缓存管理器等中通常相当大。

2）您是否正在处理实例？等待终结器线程来清理实例不应该是默认情况，因为这会导致糟糕的 GC 性能。确保您在其继承的某处处置所有实现 IDisposable 接口的类。提前调用 Dispose 意味着资源以确定性的方式释放，而依赖于终结器意味着清理可以在很久很久以后发生（如果有的话）。

3) 如果您遇到 OutOfMemoryExceptions，可能是由于两个原因：您用尽了托管内存（在设置了限制的工作进程的情况下很少见，因为它将被回收）或者您用完了虚拟内存，这更糟糕的是，如果您在 32 位 IIS 应用程序中运行，您将被限制为 2GB 的虚拟内存。我们还在生产环境中看到了这个问题，其中 GC 分配了 64MB 堆块（在工作站模式下为 32GB），一旦接近 2GB 限制并且无法分配更多空间，它就会抛出异常（请参阅：[我们应该使用“工作站”垃圾收集还是“服务器”垃圾收集？](https://stackoverflow.com/questions/1707240/should-we-use-workstation-garbage-collection-or-server-garbage-collection)）。如果是这种情况，

如果您可以发布您的转储文件或至少它的相关部分，则更容易看出问题所在。但从你的简短描述来看，这些是我要看的项目。

# php - 在 PHP 中处理文件上传

> ID：13796759
> 
> 赞同：0
> 
> 时间：2012-12-10T07:36:12.420
> 
> 标签：php, web-applications, upload

TLDR；如何引用从 PHP 脚本中发布到 PHP 脚本的临时文件上传？

我正在创建一个允许我上传和聚合 XML&XLS 文件的 Web 应用程序（仅用于实验室测试，不需要太多安全性）。

除了用户使用 HTML 表单将文件发布到服务器后如何处理文件本身之外，我已经解决了所有问题。

我有一个将文件发布到服务器的表单，并且我有一个 PHP 脚本，它设置为对文件执行某些操作，但我无法理解如何从服务器上的 PHP 脚本中引用上传的文件.

例如：

`<form action="Update_data.php" method="POST" enctype="multipart/form-data"> <input type="file" name="file" id="file"></br> <INPUT type="submit" name="submit" value="Submit"></br> </form>`

而且我隐约知道，当文件发布时，文件存在于服务器上的临时目录中，直到 Update_data.php 完成执行。这一切都很好，但我不知道那个目录会是什么，或者即使我需要以某种特定的方式配置 PHP.ini 以允许这样做。

所以，我要问的是：

如何引用从 PHP 脚本中发布到 PHP 脚本的临时文件上传？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:38:13.773

`$_FILES['file']['tmp_name']`包含服务器上上传文件的文件名。

Yu可以使用该`move_uploaded_file()`功能将上传的文件移动到您需要的任何位置。

本手册页包含您需要的所有信息：http: [//php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)

# java - 如何在没有回显连接的情况下编写此特定命令？

> ID：13796760
> 
> 赞同：1
> 
> 时间：2012-12-10T07:36:40.100
> 
> 标签：java, terminal, echo, processbuilder, moses

我正在使用这里教程中给出的这个命令 [http://www.statmt.org/moses/?n=Moses.Baseline](http://www.statmt.org/moses/?n=Moses.Baseline)

```
echo 'T W O N E I G H T' | /home/saj/g2p/mosesdecoder-master/bin/moses -f /home/saj/g2p/working/binarised-model/moses.ini 
```

它工作正常且正确，但我需要在没有 echo 命令的情况下运行它。因为我想在 JAVA (Eclipse) 中运行这个命令并且连接有问题。甚至

```
 Process p = r.exec("echo '/home/saj/' | ls"); 
```

也没有运行。虽然像 ls,pwd 这样的简单命令可以正常工作。

我尝试了这些东西，但它们都不起作用..

/home/saj/g2p/mosesdecoder-master/bin/moses -f /home/saj/g2p/working/binarised-model/moses.ini 'TWONEIGH T'

/home/saj/g2p/mosesdecoder-master/bin/moses -f /home/saj/g2p/working/binarised-model/moses.ini TWONEIGHT

/home/saj/g2p/mosesdecoder-master/bin/moses 'TWONEIGH T' -f /home/saj/g2p/working/binarised-model/moses.ini

/home/saj/g2p/mosesdecoder-master/bin/moses TWONEIGHT -f /home/saj/g2p/working/binarised-model/moses.ini

请建议正确的命令以在没有回声的情况下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:57:39.337

由于您的参数包含空格，因此您不能依赖内置的标记化。为避免这种情况，请使用`exec(String[])`而不是`exec(String)`. 例如，对于这个命令：

```
/home/saj/g2p/mosesdecoder-master/bin/moses -f \
    /home/saj/g2p/working/binarised-model/moses.ini 'T W O N E I G H T' 
```

你会这样做：

```
String args[] = new String[] {
    "/home/saj/g2p/mosesdecoder-master/bin/moses",
    "-f",
    "/home/saj/g2p/working/binarised-model/moses.ini",
    "T W O N E I G H T" };
Process p = r.exec(args); 
```

此外，关于管道和重定向，请注意这些是由外壳处理的。为了`echo '/home/saj/' | ls`从 Java 中运行命令行，您应该执行一个 shell 并将其作为参数传递给 shell；例如：

```
String args[] = new String[] { "/bin/sh", "-c", "echo '/home/saj/' | ls" };
Process p = r.exec(args); 
```

# iphone - 如何从 UITableViewCell 中删除背景图像？

> ID：13796761
> 
> 赞同：0
> 
> 时间：2012-12-10T07:36:44.347
> 
> 标签：iphone, ios, uitableview

在我的应用程序中，我有`UITableView`一个。我`UIView`为所有单元格添加了背景图像。我的问题是，当我选择一个特定的单元格时，我想单独更改该特定单元格的背景图像，而所有其他单元格都应该有一个旧的背景图像。我怎样才能做到这一点。请分享你的想法。

这是我的`cellForRowAtIndexPath`代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell.
    UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"MenuItem3"]];

    cell.backgroundView = bgView;

    cell.textLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:14];

    cell.textLabel.textColor = [UIColor whiteColor];
    cell.textLabel.text = [arrayValue objectAtIndex:indexPath.row];
    [cell setAccessoryType:UITableViewCellAccessoryNone];
    cell.selectionStyle =  UITableViewCellSelectionStyleNone;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:46:35.627

无需重新加载所有表格，只需像这样重新加载 PreviousInxed

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bck.png"]];

    UITableViewCell *celld = (UITableViewCell *)[tableView cellForRowAtIndexPath:table.indexPathForSelectedRow];
    celld.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"raj_star.png"]];

    return cell;
}

NSIndexPath *perviouseIndexPathaf;

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (perviouseIndexPathaf)
    {
        [table reloadRowsAtIndexPaths:[NSArray arrayWithObject:perviouseIndexPathaf]
                     withRowAnimation:UITableViewRowAnimationNone];
    }
    UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"raj_star.png"]];
    perviouseIndexPathaf = indexPath;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:43:09.983

您可以使用以下代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (tableView.tag == 3)// We are checking if it's the desire tableview. If you have only one tableview then you can remove this if.
        {
            [tableView reloadData];
            UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
            cell.backgroundView = bgView; // Here set the particular image u want.
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:47:53.013

试试这个代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *objCustomCell = (UITableViewCell *)[tableView  cellForRowAtIndexPath:indexPath];
    UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"NewImage"]];
    objCustomCell.backgroundView = bgView;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:14:08.167

除了您的代码，添加以下代码。

```
UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SelectedMenuItem3"]];

cell.selectedBackgroundView = bgView; 
```

有关更多信息，请查看[UITableViewCell](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)的文档`selectedBackgroundView`

# tfs - 比较 TFS 和 SourceSafe

> ID：13796765
> 
> 赞同：0
> 
> 时间：2012-12-10T07:37:20.417
> 
> 标签：tfs, visual-sourcesafe

我们最近将所有源代码从 SourceSafe 移至 TFS，但在此之前忘记从 SourceSafe 获取最新版本！巨大的错误。

有没有办法可以将 SourceSafe 中的文件与 TFS 中的文件进行比较以查看差异或任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:12:20.133

不，您无法在两个系统之间进行比较。

但是您可以创建一个 TFS 工作区并在其中执行 Get Latest，然后在 SourceSafe 中执行等效操作，然后比较您喜欢的所有文件的两个磁盘版本。如果您的差异工具允许，您甚至可以进行文件夹比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:59:19.207

一个快速而肮脏的解决方案是检查 TFS 的初始签入和 SourceSafe 的最新版本。然后检查所有文件以在 TFS 中编辑并粘贴到 SourceSafe 的最新版本。

这将给出一个待处理更改的列表，这些更改应该给出两者之间的差异。

对此要非常小心，因为它会破坏很多东西。

# android - 如何在 Android 上编写 XML 文件，从远程服务器获取

> ID：13796766
> 
> 赞同：0
> 
> 时间：2012-12-10T07:37:21.883
> 
> 标签：android

我有时需要从远程服务器读取 XML 文件，并在我的 Android 设备上替换 XML 中的数据。我通过 XmlPullParser 读取数据：

```
XmlPullParser users;
            try {
                URL xmlUrl = new URL("http://xx.xx.xx.xx/1.xml");
                users = XmlPullParserFactory.newInstance().newPullParser();
                users.setInput(xmlUrl.openStream(), null);

            } 
```

如何在 Android 上替换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:14:29.733

只需使用此代码，它就会用您从 Internet 下载的新文件覆盖文件。

```
public static boolean downloadFile(String fileToDownload, File newPath,
            String newFileName) {
        try {
            URL url = new URL(fileToDownload);
            HttpURLConnection urlConnection = (HttpURLConnection) url
                    .openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.connect();
            if (!newPath.isDirectory()) {

                CreateLog.createFolder(newPath.toString());
            }
            File file = new File(newPath.toString() + "/" + newFileName);
            if (!file.isFile()) {
                CreateLog.writeLogToFile(newPath.toString() + newFileName,
                        "%TEMP%");
            }

            FileOutputStream fileOutput = new FileOutputStream(file);
            InputStream inputStream = urlConnection.getInputStream();

            byte[] buffer = new byte[1024];
            int bufferLength = 0;

            while ((bufferLength = inputStream.read(buffer)) > 0) {
                fileOutput.write(buffer, 0, bufferLength);
            }
            fileOutput.close();
            return true;

        } catch (MalformedURLException e) {
            CreateLog.addToLog(e.toString());
            return false;
        } catch (IOException e) {
            CreateLog.addToLog(e.toString());
            return false;
        }
    }

public static void createFolder(String filePath) {
    File createFolder = new File(filePath);
    createFolder.mkdirs();
} 
```

更简洁的方法是使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)，代码在新线程中运行。但是编码有点困难。

```
private class GetProblems extends AsyncTask<String, Integer, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... params) {
            for (String myUrl : params) {

                try {

                    URL url = new URL(myUrl);
                    URLConnection ucon = url.openConnection();
                    ucon.setRequestProperty("Accept", "application/xml");

                    InputStream is = ucon.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is);

                    ByteArrayBuffer baf = new ByteArrayBuffer(50);
                    int current = 0;
                    while ((current = bis.read()) != -1) {
                        baf.append((byte) current);
                    }
                    String str = new String(baf.toByteArray(), "UTF8");

                    return str;

                } catch (MalformedURLException e) {
                    CreateLog.addToLog("[GetProblems] " + e.toString());
                } catch (IOException e) {
                    CreateLog.addToLog("[GetProblems] " + e.toString());
                }
            }
            return "error";
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);
            // updateProgressBar(values[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

                        ...write result to a file

        }
    } 
```

运行 AsyncTask 代码：

```
new GetProblems().execute("http://myurl.com/xmlfile.xml"); 
```

# java - 如何注意到父线程的异常？

> ID：13796767
> 
> 赞同：5
> 
> 时间：2012-12-10T07:37:40.167
> 
> 标签：java, multithreading, exception-handling, executorservice

我正在将线程喂入一个`ExecutorService`.

这些线程正在操作一些数据，如果发生冲突，数据对象会抛出异常，该异常会被冲突线程捕获，进而中止并且无法完成执行。

发生这种情况时，需要将正在中止的线程放回队列中并反馈给执行程序。

如何从父线程判断是否引发了异常？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T07:40:32.693

当您`submit()`执行一项任务时，`ExecutorService`您会得到一个 Future。执行完成后，您可以调用`get()`该未来。`ExecutionException`如果适用，这将返回结果，或者如果原始任务抛出一个，它将抛出一个。如果您想要真正的异常对象，您可以这样做`getCause()`。

另请注意，您将`Task`返回服务，该任务在`Thread`尚未真正终止的情况下运行（刚刚捕获异常并正在等待新的异常）。

这是一个示例用法（`Runnable`如果您不关心结果，可以使用）。

```
Callable<String> myCallable = ...;
Future<String> future = myExector.submit(myCallable);

// Do something else until myCallable.isDone() returns true.
try {
    String result = future.get();
}catch(ExecutionException e){
    // Handle error, perhaps create new Callable to submit.
} 
```

# maven - 独立构建Maven子模块

> ID：13796770
> 
> 赞同：0
> 
> 时间：2012-12-10T07:37:51.820
> 
> 标签：maven

在我最近的项目中被介绍给 Maven 之后，在过去的几周里我一直在试验它。

我目前在我的开发环境中有一个多模块项目。项目“A”和项目“B”是项目“根”的子模块，B 依赖于 A。

我知道我可以按照[此处](http://maven.apache.org/plugins/maven-reactor-plugin/examples.html)概述的方式**独立**构建B。但是，我很好奇为什么我不允许从 B 的根文件夹中构建 B。`mvn reactor:make...`

`clean install`为了说明这一点，我首先通过在 A 的根目录中运行 a 来独立构建 A。但是，当我尝试从 B 的根目录执行相同操作时，Maven 报告如下错误 -

```
Could not find artifact org.divesh.mavenrnd:root:pom:1.0 in central 
```

看起来 Maven 无法解析父级的 POM 文件。关于为什么会发生这种情况的任何想法？从我对Maven多模块项目的初步了解来看，将项目拆分成子模块的主要原因是为了共享依赖。但是，这不应该阻止我在其文件夹中独立构建特定模块。

谢谢。

**编辑**

运行`mvn -N clean install`以仅在代表中安装根项目的 POM。在此之后，我能够在构建和安装 A 之后成功构建 B。还有一件事我不太清楚 - 假设我已经在存储库中安装了根项目的 POM，如果我尝试构建 A，确实它是指直接在它上面的父根 POM 还是安装在存储库中的 POM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:47:40.610

这是正确的。你提到的错误告诉你maven找不到父母的pom。

您在这里有 2 个选项：

1.  首先调用`mvn -N install`你的根项目目录，将父 pom 安装到你的本地存储库。然后你可以进入`B`'s 目录并构建子模块。
2.  `<relativePath>`在您的子模块 pom.xml 中指定。默认情况下，maven 只会在文件系统的上一级查找父 pom。如果您的项目中有其他目录结构，则必须指定此选项才能让 maven 找到您的父 pom。

这是一个示例：

```
<parent>
    <groupId>...</groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    <relativePath>../../pom.xml</relativePath>
</parent> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:54:28.617

您应该使用*mvn -pl ProjectToBuild 生命周期*，例如从树的根目录开始：

```
mvn -pl module-b package 
```

你不应该再使用 mvn reactor:make 了。除非您使用的是 maven 2.0

如果你不能确定一切都依赖于 module-b 的构建，你应该使用：

```
mvn -amd -pl module -b package 
```

最好的方法是拥有一个代表项目适当结构的文件夹布局，并且不需要使用 relativePath。

# php - Symfony2：在实体内部获取服务

> ID：13796777
> 
> 赞同：0
> 
> 时间：2012-12-10T07:38:18.183
> 
> 标签：php, symfony, doctrine-orm

有没有办法在实体内部调用服务

我需要实体内部的实体管理器，以便能够使用存储库功能获得自定义结果。

我正在考虑像这样在我的实体中注入 ContainerInterface。

```
use Symfony\Component\DependencyInjection\ContainerInterface;

class MyEntity
{
    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function getEntityManager(){
        return $this->container->get('doctrine')->getEntityManager();
    }
} 
```

但我认为这不是正确的方法，它需要更多代码我的意思是我必须为我需要实体管理器的所有实体执行此操作

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:16:45.210

我不知道你是否可以，但无论如何你都不应该这样做。这些实体应该非常简单......

> 需要实体内部的实体管理器，这样我就可以使用存储库功能获得自定义结果

你到底想做什么，肯定有不同的解决方案……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:37:09.640

如前所述，依赖注入绝对是错误的方法。

使用自定义实体存储库 (http://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes) 进行更复杂的查询，或者使用特定服务来实现自定义结果（如果更复杂）需要（http://symfony.com/doc/2.0/book/service_container.html#referencing-injecting-services）

# android - 在 onCreate() 中添加按钮的 setOnClickListener 后，InputFilters 不再工作

> ID：13796779
> 
> 赞同：1
> 
> 时间：2012-12-10T07:38:27.747
> 
> 标签：android, android-intent, android-activity, android-camera

我有一个基本上包含所有表单组件的活动。以前它只是在 EditText 框上应用了一些基本的文本过滤，在我添加了一个功能来单击并使用内置相机的应用程序保存图片之前，它工作正常。

现在，“拍照”部分工作正常，但前两个 Edittext 框中提供的输入没有被过滤。

我在这里错过了什么吗？
另外，一个活动的 onCreate 方法是否只能有一个 setonclick 监听器？

谢谢..
这是我的**活动代码：**

```
public class Ques1 extends Activity {
    private EditText outletEdit;
    private EditText ownerEdit;
    private EditText phone1Edit;
    private EditText phone2Edit;
    private EditText phone3Edit;
    private EditText phone4Edit;
    private EditText cityEdit;
    private EditText stateEdit;
    private EditText MrktAreaEdit;
    private RadioButton ownVehYes;
    private RadioButton ownVehNo;

    private static int TAKE_PICTURE = 1;
    private Uri outputFileUri;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ques1);

        Button outletPic = (Button) findViewById(R.id.Button01_outletpic);
        outletPic.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v2) {
                TakePhoto();
            }
        });

        //CUSTOM INPUTFILTER HERE 2.0 
        InputFilter filter = new InputFilter() {
            @Override
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

                if (source instanceof SpannableStringBuilder) {
                    SpannableStringBuilder sourceAsSpannableBuilder = (SpannableStringBuilder)source;
                    for (int i = end - 1; i >= start; i--) { 
                        char currentChar = source.charAt(i);
                         if (!Character.isLetter(currentChar) && !Character.isSpaceChar(currentChar)) {    
                             sourceAsSpannableBuilder.delete(i, i+1);
                         }     
                    }
                    return source;
                } else {
                    StringBuilder filteredStringBuilder = new StringBuilder();
                    for (int i = 0; i < end; i++) { 
                        char currentChar = source.charAt(i);
                        if (Character.isLetter(currentChar) || Character.isSpaceChar(currentChar)) {    
                            filteredStringBuilder.append(currentChar);
                        }     
                    }
                    return filteredStringBuilder.toString();
                }
            }
        };
        this.outletEdit = (EditText) findViewById(R.id.editText1_outlet);
        this.outletEdit.setFilters(new InputFilter[]{filter}); 
        this.ownerEdit = (EditText) findViewById(R.id.editText1_owner);
        this.ownerEdit.setFilters(new InputFilter[]{filter}); 
        //this.cityEdit = (EditText) findViewById(R.id.editText1_owner);
        //this.cityEdit.setFilters(new InputFilter[]{filter}); 

        // LENGTH INPUTFILTERS HERE
        InputFilter[] FilterArray = new InputFilter[1];
        FilterArray[0] = new InputFilter.LengthFilter(25);
        this.outletEdit.setFilters(FilterArray);
        this.ownerEdit.setFilters(FilterArray);

        //ownVehYes.setOnClickListener = (RadioButton) findViewById(R.id.radio0);

        this.ownVehYes = (RadioButton) findViewById(R.id.radio0);
        this.ownVehNo = (RadioButton) findViewById(R.id.radio1);

        OnClickListener own_veh_yes_listener = new OnClickListener (){
             public void onClick(View v) {

                 final AlertDialog.Builder alert = new AlertDialog.Builder(Ques1.this);
                 alert.setTitle("How many?");
                    final EditText input = new EditText(Ques1.this);
                    //input.setFilters(FilterArray2); //need filter for "how many?..veh field"
                    alert.setView(input);
                    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            String howmany_veh_value = input.getText().toString().trim();
                            Toast.makeText(getApplicationContext(), howmany_veh_value, Toast.LENGTH_SHORT).show(); //test toast is here
                        }
                    });

                    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ownVehNo.setChecked(true);
                            dialog.cancel();
                        }
                    });
                    alert.show(); 

             }
            };
            ownVehYes.setOnClickListener(own_veh_yes_listener);

    }

    private void TakePhoto() {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File file = new File(Environment.getExternalStorageDirectory(), "test.jpg");

        outputFileUri = Uri.fromFile(file);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, TAKE_PICTURE);

    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data){

        if (requestCode == TAKE_PICTURE && resultCode == Activity.RESULT_OK){
            //ShowMessage(outputFileUri.toString());
            if(data!=null){
            Toast.makeText(getApplicationContext(), outputFileUri.toString(), Toast.LENGTH_SHORT).show();
            }
        }

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_ques1, menu);
        return true;
    }

} 
```

# php - $obj = 'classname' 和 $obj = new classname() 有什么区别

> ID：13796780
> 
> 赞同：0
> 
> 时间：2012-12-10T07:38:32.273
> 
> 标签：php

嗨朋友你能澄清一下下面这段代码有什么区别吗：

```
<?php
class student {
    function stu() {
        echo "Hi Friends";
    }
}

//difference between this
$s = new student();
$s -> stu();

//and this
$s1 = 'student';
$s1 -> stu(); 
```

`$s = new student();`和有什么区别`$s1 = 'student';`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:42:36.283

`$s = new student();`创建一个新的类实例`student`并将其存储到`$s`变量中。

`$s1 = 'student';`将字符串存储`student`到变量`$s1`中。最后一行`$s1->stu();`给出了一个错误，因为你不能在字符串上调用方法。

我对您的建议是获取一本 PHP 初学者书籍并阅读它，这样您将掌握基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:43:25.357

你一定是说：

```
$instance = new myclass(); 
```

和

```
$type = 'myclass';
$instance = new $type; 
```

如果这是您的意思，那么没有区别。当您希望动态生成类名时使用后者。

# php - 发生错误时发送对 facebook graph api 的调用不会返回任何内容

> ID：13796781
> 
> 赞同：0
> 
> 时间：2012-12-10T07:38:41.967
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在使用图形 api 来获取用户的专辑列表。现在，如果用户退出或更改密码或任何错误情况，我不会得到任何响应，而应该返回一些错误代码。在浏览器中打开的图形 API url 显示错误，但在使用 file_get_contents() 时出现错误 400。在使用 curl 时，我得到一个空响应。有什么方法可以找出错误发生的时间及其原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:12:45.070

我使用 curl 而不是 file_get_contents 并且问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:49:48.143

> 在浏览器中打开图形 API url 时显示错误，但在使用 file_get_contents() 时出现错误 400。

嗯，这就是 Facebook 发送的带有 Oauth 错误的 HTTP 状态代码——这没有错。

但`file_get_contents`默认情况下，如果 HTTP 状态代码指示错误， 则**不会向您显示实际的 HTTP 响应正文内容……</p>**

…这只是另一个原因，为什么人们应该使用官方的 PHP SDK，它可以很好地处理所有这些，并为您提供一个异常，告诉您到底发生了什么。

所以，请这样做。

* * *

（即使`file_get_contents`可以获取响应的正文内容，当首先使用相应的选项设置“流上下文”时。但是使用 PHP SDK 更简单，所以再次：请这样做。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T09:50:38.813

file_get_contents() 在我放置 https 而不是 http 或如果我忘记放置其中任何一个时多次给我错误。

您从中获取内容的 URL 必须以“http”开头，例如：

file_get_contents(" **http://www.mysite.com** ");

如果这样解决了？

# python - 使用 KD 树的 NetworkX 随机几何图实现

> ID：13796782
> 
> 赞同：1
> 
> 时间：2012-12-10T07:38:44.543
> 
> 标签：python, matplotlib, networkx, kdtree

所以 NetworkX 很清楚，他们在 n^2 时间内使用算法来生成随机几何图。他们说使用 KD 树可以实现更快的算法。我的问题是如何尝试实现该算法的 KD 树版本？我不熟悉这种数据结构，也不会称自己为 python 专家。只是想弄清楚这一点。感谢所有帮助，谢谢！

```
 def random_geometric_graph(n, radius, dim=2, pos=None):
        G=nx.Graph()
        G.name="Random Geometric Graph"
        G.add_nodes_from(range(n)) 
        if pos is None:
            # random positions
            for n in G:
                G.node[n]['pos']=[random.random() for i in range(0,dim)]
        else:
            nx.set_node_attributes(G,'pos',pos)
        # connect nodes within "radius" of each other
        # n^2 algorithm, could use a k-d tree implementation
        nodes = G.nodes(data=True)
        while nodes:
            u,du = nodes.pop()
            pu = du['pos']
            for v,dv in nodes:
                pv = dv['pos']
                d = sum(((a-b)**2 for a,b in zip(pu,pv)))
                if d <= radius**2:
                    G.add_edge(u,v)
    return G 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:24:03.840

这是一种使用上面@tcaswell 提到的 scipy KD-tree 实现的方法。

```
import numpy as np
from scipy import spatial
import networkx as nx
import matplotlib.pyplot as plt
nnodes = 100
r = 0.15
positions =  np.random.rand(nnodes,2)
kdtree = spatial.KDTree(positions)
pairs = kdtree.query_pairs(r)
G = nx.Graph()
G.add_nodes_from(range(nnodes))
G.add_edges_from(list(pairs))
pos = dict(zip(range(nnodes),positions))
nx.draw(G,pos)
plt.show() 
```

# facebook - 当用户分享链接时，如何在 Facebook 上显示正确的缩略图？

> ID：13796785
> 
> 赞同：1
> 
> 时间：2012-12-10T07:38:47.767
> 
> 标签：facebook, facebook-graph-api

当用户在他们的 Facebook 页面上分享来自网站的链接时，我无法获得正确的缩略图。

对于第一个站点，它运行良好：videomuncher.com/youtube/PN-MjUC4f9k/

但是，对于此站点，它没有：videomuncher.com/partner/Sports/GrantlandNetwork/wadUaPuohfE/#wadUaPuohfE

查看每个页面的源代码，我想我正在为 facebook 定义正确的属性（链接、图片、名称等），但是当我使用 facebook 调试器时，它给了我错误。有什么建议吗？

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fvideomuncher.com%2Fpartner%2FSports%2FGrantlandNetwork%2FwadUaPuohfE%2F%23wadUaPuohfE](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fvideomuncher.com%2Fpartner%2FSports%2FGrantlandNetwork%2FwadUaPuohfE%2F%23wadUaPuohfE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:07:53.253

正如您在调试器中看到的那样，facebook 无法从您的页面元数据标签中找到它。您需要在页面元数据标签中指定 og:image，例如：

```
<meta property="og:image"  content="address to the thumbnail" /> 
```

# string - JNI程序中的jstring返回

> ID：13796786
> 
> 赞同：27
> 
> 时间：2012-12-10T07:38:50.477
> 
> 标签：string, java-native-interface, return

这是 JNI 代码。

*Java代码：*

```
public class Sample1 {

    public native String stringMethod(String text);

    public static void main(String[] args)
    {
       System.loadLibrary("Sample1");
       Sample1 sample = new Sample1();

       String  text   = sample.stringMethod("world");

       System.out.println("stringMethod: " + text);    
   }
} 
```

*stringMethod 函数的 Cpp 方法：*

```
JNIEXPORT jstring JNICALL Java_Sample1_stringMethod
   (JNIEnv *env, jobject obj, jstring string) {

 const char *name = env->GetStringUTFChars(string, NULL);//Java String to C Style string
 char msg[60] = "Hello ";
 jstring result;

 strcat(msg, name);
 env->ReleaseStringUTFChars(string, name);
 puts(msg);
 result = env->NewStringUTF(msg); // C style string to Java String
 return result;    
 } 
```

运行我的java代码时。我得到了下面的结果。

```
stringMethod: world 
```

但是我在字符串“world”后面加上了“Hello”。我也在这里返回附加的字符串。但是为什么我只得到“世界”而不是“Hello World”。真的我对这段代码感到困惑。我应该怎么做才能得到附加字符串的结果？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-11-28T02:44:55.263

```
JNIEXPORT jstring JNICALL Java_Sample1_stringMethod
    (JNIEnv *env, jobject obj, jstring string) 
{    
    const char *name = (*env)->GetStringUTFChars(env,string, NULL);
    char msg[60] = "Hello ";
    jstring result;

    strcat(msg, name);  
    (*env)->ReleaseStringUTFChars(env,string, name);   
    puts(msg);            
    result = (*env)->NewStringUTF(env,msg); 
    return result;        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-16T06:06:57.753

有几种方法，但最好的方法是先转换`const char *`为 c++ 字符串，然后再转换为`jbyteArray`，并且很容易在 java 端将 byteArray 转换为 UTF-8。

C++ 方面：

```
const char* string = propertyValue;
std::string str = string;

jbyteArray array = env->NewByteArray(str.length());
env->SetByteArrayRegion(array,0,str.length(),(jbyte*)str.c_str());

return array; 
```

Java/kotlin 方面：

```
String((array), Charset.defaultCharset())) 
```

# mysql - 如何将这两个查询组合成一个。？

> ID：13796794
> 
> 赞同：1
> 
> 时间：2012-12-10T07:39:52.430
> 
> 标签：mysql

这些是我的两个查询当我分别触发它们时，我给出了正确的响应，但是当它们结合起来时，它们不会给出相同的响应。请帮助将它们结合起来

```
SELECT SUM(hours) AS S1
,operating_company
 FROM Hours WHERE operating_company='AP-OH' GROUP BY operating_company

SELECT COUNT(*) AS S1,event_type
,operating_company
 FROM Event WHERE operating_company='AP-OH' AND event_type='OSH Restricted' GROUP BY 
 operating_company,event_type 
```

谢谢拉杰什B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:11:51.833

尝试这个

```
 SELECT SUM(S1.hours) ,S1.operating_company ,S2.operating_company ,COUNT(S2.*),S2.event_type , S2.operating_company
   FROM Hours as S1 WHERE operating_company='AP-OH' 

   INNER JOIN event AS S2 
   ON    S2.operating_company = S1.operating_company
    WHERE S2.operating_company=S1.operating_company='AP-OH' AND S2.event_type='OSH Restricted'
   GROUP BY 
   S2.operating_company,S2.event_type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:47:22.933

你可以这样做：

```
SELECT
  e.event_type,
  e.operating_company,
  SUM(h.hours) AS S1,
  COUNT(e.*) AS S2
FROM Hours h 
INNER JOIN event e ON h.operating_company = e.operating_company
WHERE h.operating_company = 'AP-OH' 
  AND e.event_type        = 'OSH Restricted' 
GROUP BY e.operating_company, e.event_type; 
```

# html - Bootstrap 表不同颜色

> ID：13796798
> 
> 赞同：0
> 
> 时间：2012-12-10T07:40:08.287
> 
> 标签：html, twitter-bootstrap

有谁知道如何根据引导更改表行的样式。

似乎他们对每一行运行 js。但是不确定。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:36:48.157

如果我理解正确，您会想要使用 .table-striped 类。它使用 CSS nth-child 选择器来替代样式

# .net - 编辑 .NET 程序集并重新编译

> ID：13796802
> 
> 赞同：21
> 
> 时间：2012-12-10T07:40:22.847
> 
> 标签：.net, refactoring, .net-assembly, decompiler

我的处境真的很糟糕。我丢失了源代码，我的客户需要在应用程序中进行一些更改。以编辑程序集为例：Test.dll 然后添加代码行，最后重新编译它

所以我的问题是： - 有可能这样做吗？- 如果可能的话，编辑程序集然后重新编译它的好工具是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-10T07:42:18.783

是的，获取[ILSpy](http://ilspy.net/)，它能够使用 .csproj 和所有内容将程序集保存到磁盘。这使得在 Visual Studio 中打开和重新编译变得容易。

ILSpy 是免费和开源的。

![保存代码](../Images/3f1770604b1a31461ceb5b369bafd987.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-01-26T22:15:27.720

对于具有许多程序集的大型应用程序，可能无法导出和重新编译，因此我建议采用不同的方法：

最舒服的方法可能是将[Reflexil](http://reflexil.net/)与[.NET Reflector](https://www.red-gate.com/products/dotnet-development/reflector/)（非免费）或[Telerik 的 JustDecompile](http://www.telerik.com/products/decompiler.aspx)（非常免费）结合使用。我这样做了几次并且使用 JustDecompile 获得了最好的结果——即使我在其他任何时候都更喜欢[ILSpy](http://ilspy.net/)而不是 JustDecompile。

**“现在怎么办”？你可能会问：** [这是 Telerik 的人提供的一个小教程。](http://www.telerik.com/docs/default-source/documents/justdecompile/justdecompile-reflexil-faq.pdf?sfvrsn=4)

（查看主题*“如何在程序集中注入 C# 代码？”*）

* * *

# 更新

### 你绝对应该看看这个街区的新孩子：[dnSpy](https://github.com/0xd4d/dnSpy)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-10T07:42:40.997

[Reflector](http://www.reflector.net/)是最著名的反汇编 .net 可执行文件的工具。另一个工具是[Dis#](http://www.netdecompiler.com/)。

# android - 移动平台的文本到语音

> ID：13796805
> 
> 赞同：0
> 
> 时间：2012-12-10T07:40:40.217
> 
> 标签：android, ios, windows-8, text-to-speech

我正在寻找适用于 iOS、Android 和 Windows 8 的 TTS 解决方案，该解决方案无需互联网连接即可工作，并且还提供德语版本。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:07:09.140

OpenEars 是一个离线文本转语音和语音转文本库。

你可以在这里查看它的文档： [openears](http://www.politepix.com/openears/tutorial/)

一些在线图书馆：

*   [谷歌语音合成](http://weston.ruter.net/2009/12/12/google-tts/)
*   [细微差别](http://www.nuance.com/index.htm)

# bash - 从 bash 脚本更改导出变量的值

> ID：13796809
> 
> 赞同：1
> 
> 时间：2012-12-10T07:41:28.020
> 
> 标签：bash

我从 bash shell 执行了以下操作。

`export myPath="/home/user/dir"`

然后我通过从 shell 和 bash 脚本中“回显”这个值来验证这个值。两者都工作得很好。

然后我尝试从这样的脚本中设置这个变量的值。 `myPath="/home/user/newdir"` 并尝试从 shell 打印此变量。我认为该变量将保存更新的值，但它显示的是旧值。

如何从脚本更新值？如果可能的话，我希望在不使用的情况下做到这一点`source`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:44:35.613

要在脚本完成后使变量保持不变，您必须使用以下[`source`](http://ss64.com/bash/source.html)命令运行它：

> 当使用`source`它在现有 shell 中运行脚本时，脚本创建或修改的任何变量在脚本完成后仍然可用。相反，如果脚本只是作为文件名运行，那么将生成一个单独的子shell（具有一组完全独立的变量）来运行脚本。

# c# - 带 Moq 的单元测试接口

> ID：13796817
> 
> 赞同：6
> 
> 时间：2012-12-10T07:42:37.533
> 
> 标签：c#, asp.net, unit-testing, interface, moq

我是起订量和单元测试的新手。我一直在进行单元测试，这是以下代码：

```
private Mock<IServiceAdapter> repository;

    [TestInitialize]
    public void Initialize()
    {
        repository= new Mock<IServiceAdapter>();
    }

[TestMethod()]
    public void SaveTest()
    {
        //Setup 
        string Name = "Name1"; 
        string Type = "1";
        string parentID = null;

        repository.Setup(x => x.Save(Name , Type, parentID)).Returns("Success").Verifiable();

        //Do
        var result = repository.Object.Save(Name , Type, parentID);
        //Assert
        repository.Verify();
    } 
```

我的问题是测试将始终返回我放入 Returns 参数中的字符串，换句话说，它将始终返回“成功”或我在其位置写入的任何内容。我想那是不对的，因为那不是服务的真实行为。任何人都知道我如何反映我正在尝试测试的“保存”服务的真实行为？所以可以说，如果返回字符串与服务方法不同，那么测试应该失败。

已编辑

ServiceAdapter 接口只是一个 Web 服务的包装器，我称之为 REST 服务。这是一个 Web 表单项目。

我正在做类似这篇文章的事情

[如何模拟 Web 服务](https://stackoverflow.com/questions/1615093/how-to-mock-a-web-service)

我应该创建一个像 FakeController 这样的依赖注入来让它工作吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T07:45:08.460

你在这里测试模拟，它什么也没给你（因为这个模拟没有在你的实际应用程序中使用）。在单元测试中，您应该创建和测试您的真实对象，这些对象存在于您的真实应用程序中（即接口实现）。用于模拟被测对象的依赖关系的模拟。

因此，服务适配器的模拟对于使用该适配器的对象测试很有用，例如一些控制器测试：

```
private FooController _controller; // object under test, real object
private Mock<IServiceAdapter> _serviceAdapter; // dependency of controller

[TestInitialize]
public void Initialize()
{
    _serviceAdapter = new Mock<IServiceAdapter>();
    _controller = new FooController(_serviceAdapter.Object);
}

[TestMethod()]
public void SaveTest()
{
    // Arrange
    string name = "Name1"; 
    string type = "1";
    string parentID = null;

    _serviceAdapter.Setup(x => x.Save(name , type, parentID))
                   .Returns("Success").Verifiable();

    // Act on your object under test!
    // controller will call dependency
    var result =  _controller.Bar(name , type, parentID); 

    // Assert
    Assert.True(result); // verify result is correct
    _serviceAdapter.Verify(); // verify dependency was called
} 
```

# java - 谷歌地图 android api v2 应用程序崩溃

> ID：13796822
> 
> 赞同：4
> 
> 时间：2012-12-10T07:42:51.370
> 
> 标签：java, android, eclipse, api, google-maps

我正在使用 Eclipse helios 和 Android 4.1.2 我已遵循以下文档[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)并完全按照教程中的描述完成编码。当我运行我在模拟器上的应用程序显示“除非您更新 google play 服务，否则此应用程序将无法运行”，但在具有 google play 服务更新版本的真实设备上，它会出现“应用程序已停止工作”。任何帮助表示赞赏。

这是我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.emeterfinalapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

      <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" />

    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
     <permission
         android:name="com.example.emeterfinalapp.permission.MAPS_RECEIVE"
         android:protectionLevel="signature"/>
<uses-permission  android:name="com.example.emeterfinalapp.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name="com.example.emeterfinalapp.EmeterMainActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.emeterfinalapp.EnterLocationActivity"
            android:label="@string/title_activity_enter_location"
            android:parentActivityName="com.example.emeterfinalapp.EmeterMainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.emeterfinalapp.EmeterMainActivity" />
        </activity>

        <activity
            android:name="com.example.emeterfinalapp.SelectLocation"
            android:label="@string/title_activity_select_location"
            android:parentActivityName="com.example.emeterfinalapp.EnterMainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.emeterfinalapp.EnterMainActivity" />

         </activity>
        </application>
 <meta-data
   android:name="com.google.android.maps.v2.API_KEY"
   android:value="my api key"/>
    </manifest> 
```

这是我的 main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SelectLocation" >

    <Button
        android:id="@+id/satellite_button"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/mapview_button"
        android:text="@string/satellitebuttontext" />

        <fragment xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/map"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         class="com.google.android.gms.maps.SupportMapFragment"
         android:layout_below="@+id/satellite_button"/>

        <LinearLayout android:id="@+id/zoom" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true" 
        />

        <Button
            android:id="@+id/mapview_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="@string/mapbuttontext" />

</RelativeLayout> 
```

这是我的活动

```
 package com.example.emeterfinalapp;

        import android.os.Bundle;
        import android.support.v4.app.FragmentActivity;

        import com.google.android.gms.common.GooglePlayServicesUtil;
        import com.google.android.gms.maps.GoogleMap;
        import com.google.android.gms.maps.SupportMapFragment;

        public class SelectLocation extends FragmentActivity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_select_location);
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
                                           GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

        GoogleMap map = ((SupportMapFragment)          getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    }

} 
```

我为我的项目提供了 google_play_services lib 的引用，在我的 lib 中添加了 google_play_service 和 android.support.v4 jar 文件....如果我仍然缺少任何东西，请指导....

我有 api 密钥，我在 maifest 中添加了它现在编辑的上方...

amd 这是我手机日志中的错误跟踪

```
 I/ActivityManager(  282): Displayed com.example.emeterfinalapp/.EmeterMainActivity:                +206ms
     I/ActivityManager(  282): Displayed com.example.emeterfinalapp/.EnterLocationActivity:      +224ms
     W/InputDispatcher(  282): channel '2c3dbfd0      com.example.emeterfinalapp/com.example.emeterfinalapp.EmeterMainActivity (server)' ~           Consumer closed input channel or an error occurred.  events=0x8
     E/InputDispatcher(  282): channel '2c3dbfd0      com.example.emeterfinalapp/com.example.emeterfinalapp.EmeterMainActivity (server)' ~      Channel is unrecoverably broken and will be disposed!
     W/InputDispatcher(  282): Attempted to unregister already unregistered input channel      '2c3dbfd0 com.example.emeterfinalapp/com.example.emeterfinalapp.EmeterMainActivity      (server)'
     W/InputDispatcher(  282): channel '2c504fb8      com.example.emeterfinalapp/com.example.emeterfinalapp.EnterLocationActivity (server)' ~      Consumer closed input channel or an error occurred.  events=0x8
     E/InputDispatcher(  282): channel '2c504fb8      com.example.emeterfinalapp/com.example.emeterfinalapp.EnterLocationActivity (server)' ~      Channel is unrecoverably broken and will be disposed!
     W/InputDispatcher(  282): Attempted to unregister already unregistered input channel      '2c504fb8 com.example.emeterfinalapp/com.example.emeterfinalapp.EnterLocationActivity      (server)' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T10:25:14.410

哇...在挠了马头这么久之后，我首先得到了解决方案

```
12-12 15:08:29.458: E/AndroidRuntime(26382): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.emeterfinalapp/com.example.emeterfinalapp.SelectLocation}:     android.view.InflateException: Binary XML file line #17: Error inflating class fragment 
```

然后在几行代码之后出现了另一个引人注目的错误

```
12-12 15:08:29.458: E/AndroidRuntime(26382): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml 
```

然后我意识到我的 api 密钥代码是清单而不是应用程序的子代码，上面的错误指出了，然后我将清单纠正为以下

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.emeterfinalapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="16" />

  <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" />

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>
 <permission
     android:name="com.example.emeterfinalapp.permission.MAPS_RECEIVE"
     android:protectionLevel="signature"/>
<uses-permission  android:name="com.example.emeterfinalapp.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission  android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

     <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name="com.example.emeterfinalapp.EmeterMainActivity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:theme="@style/FullscreenTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.emeterfinalapp.EnterLocationActivity"
        android:label="@string/title_activity_enter_location"
        android:parentActivityName="com.example.emeterfinalapp.EmeterMainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.emeterfinalapp.EmeterMainActivity" />
    </activity>

    <activity
        android:name="com.example.emeterfinalapp.SelectLocation"
        android:label="@string/title_activity_select_location"
        android:parentActivityName="com.example.emeterfinalapp.EnterMainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.emeterfinalapp.EnterMainActivity" />
    </activity>

     <meta-data
   android:name="com.google.android.maps.v2.API_KEY"
   android:value="my api key"/>
</application> 
```

然后它就像一个变焦镜头，一切都完美无缺……使用真实设备进行调试有很大帮助……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:18:52.650

我一直在使用[Android 日志查看器 (logcat) 应用](http://code.google.com/p/alogcat/)程序从手机收集应用程序日志，并且似乎运行良好。

# ruby-on-rails - Rails-为 android-market-crawler 项目启动 rails server 3.0.3

> ID：13796824
> 
> 赞同：2
> 
> 时间：2012-12-10T07:43:01.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经安装`Ruby 1.8.7`并下载`rubygems-1.4.0.zip`了，解压到 Ruby187 文件夹中。然后我运行以下命令

```
gem install rails --version 3.0.3 
```

我想使用[包含](http://code.google.com/p/android-marketplace-crawler/)两个文件夹`server`和`crawler`. 项目要求之一是`Ruby on Rails 3`我已经安装了 Rails 服务器。但是当我`rails server`在命令提示符下运行时，我遇到了这个问题

```
Usage 
rails new APP_PATH [options]
....
.... 
```

服务器文件夹中的 Gemfile.lock

```
GIT
  remote: git://github.com/adamcooper/vestal_versions
  revision: 6273df533f85014062e346cb1807b0531a809ee2
  specs:
    vestal_versions (1.2.2)
      activerecord (>= 3.0.0)
      activesupport (>= 3.0.0)

GEM
  remote: http://rubygems.org/
  specs:
    abstract (1.0.0)
    actionmailer (3.0.3)
      actionpack (= 3.0.3)
      mail (~> 2.2.9)
    actionpack (3.0.3)
      activemodel (= 3.0.3)
      activesupport (= 3.0.3)
      builder (~> 2.1.2)
      erubis (~> 2.6.6)
      i18n (~> 0.4)
      rack (~> 1.2.1)
      rack-mount (~> 0.6.13)
      rack-test (~> 0.5.6)
      tzinfo (~> 0.3.23)
    activemodel (3.0.3)
      activesupport (= 3.0.3)
      builder (~> 2.1.2)
      i18n (~> 0.4)
    activerecord (3.0.3)
      activemodel (= 3.0.3)
      activesupport (= 3.0.3)
      arel (~> 2.0.2)
      tzinfo (~> 0.3.23)
    activeresource (3.0.3)
      activemodel (= 3.0.3)
      activesupport (= 3.0.3)
    activesupport (3.0.3)
    arel (2.0.7)
    builder (2.1.2)
    erubis (2.6.6)
      abstract (>= 1.0.0)
    i18n (0.5.0)
    mail (2.2.15)
      activesupport (>= 2.3.6)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.16)
    mysql2 (0.2.6)
    paperclip (2.3.8)
      activerecord
      activesupport
    polyglot (0.3.1)
    rack (1.2.1)
    rack-mount (0.6.13)
      rack (>= 1.0.0)
    rack-test (0.5.7)
      rack (>= 1.0)
    rails (3.0.3)
      actionmailer (= 3.0.3)
      actionpack (= 3.0.3)
      activerecord (= 3.0.3)
      activeresource (= 3.0.3)
      activesupport (= 3.0.3)
      bundler (~> 1.0)
      railties (= 3.0.3)
    railties (3.0.3)
      actionpack (= 3.0.3)
      activesupport (= 3.0.3)
      rake (>= 0.8.7)
      thor (~> 0.14.4)
    rake (0.8.7)
    thor (0.14.6)
    treetop (1.4.9)
      polyglot (>= 0.3.1)
    tzinfo (0.3.24)
    will_paginate (2.3.15)

PLATFORMS
  ruby

DEPENDENCIES
  mysql2
  paperclip
  rails (= 3.0.3)
  vestal_versions!
  will_paginate 
```

服务器文件夹中的 Gemfile 是：

```
source 'http://rubygems.org'

gem 'rails', '3.0.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'paperclip'
gem 'will_paginate'
gem 'vestal_versions', :git => 'git://github.com/adamcooper/vestal_versions'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger (ruby-debug for Ruby 1.8.7+, ruby-debug19 for Ruby 1.9.2+)
# gem 'ruby-debug'
# gem 'ruby-debug19'

# Bundle the extra gems:
# gem 'bj'
# gem 'nokogiri'
# gem 'sqlite3-ruby', :require => 'sqlite3'
# gem 'aws-s3', :require => 'aws/s3'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end 
```

我已经看到了 SO 上的所有线程，但没有一个能解决我的问题。

我运行了以下命令

```
bundle install 
```

它给了我以下错误：

```
Fetching git://github.com/adamcooper/vestal_versions
Unfortunately, a fatal error has occurred. Please see the Bundler. 
```

# php - 在一个文件夹中存储多个视频 - 坏主意？

> ID：13796828
> 
> 赞同：0
> 
> 时间：2012-12-10T07:43:09.687
> 
> 标签：php, file, video, upload

我的问题是，将多个视频存储在一个文件夹中是不是一个坏主意？

我创建了一个视频上传器脚本，但它不会将每个视频保存在单独的文件夹中，而是将所有视频保存在一个文件夹中（每个都有不同的散列视频名称）。

```
- videos folder
    - e0d123e5f316bef78bfdf5a008837577
    - 35d91262b3c3ec8841b54169588c97f7
    - cc273fe9d442850fa18c31c88c823e07 
```

这是一个坏主意吗？这会导致任何问题吗？这有什么好处和坏处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:45:52.027

这取决于会有多少视频。文件系统对单个文件夹中的文件数量有限制。一旦接近或超过该限制，您将遇到各种麻烦。其中最大的将是访问文件（视频）时的速度大幅下降。

弄清楚文件系统的限制是什么，然后决定是否需要将视频放入子文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T07:45:52.470

如果发生碰撞，可能会导致问题，随着视频数量的增加，这种可能性越来越大。但是，这本身并不是一个坏习惯（特别是如果您有少量视频）；如果每个视频都是一个文件，为什么需要将视频拆分到单独的文件夹中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T08:22:22.007

是的，一旦您在该目录中有数千个文件，这就是一个问题。当一个文件夹中有这么多文件时，某些操作系统会阻塞。

我还记得一个 FTP 服务器拒绝在目录列表中显示超过 4000 个文件的案例。

一种解决方案是像这样组织您的文件：

```
- videos folder
 - e
  - e0d123e5f316bef78bfdf5a008837577
 - 3
  - 35d91262b3c3ec8841b54169588c97f7
 - c
  - cc273fe9d442850fa18c31c88c823e07 
```

这为您在视频文件夹下最多提供 16 个文件夹。如果子目录中的文件仍然太多，请使用另一个级别：

```
- videos folder
 - e
  - e0
   - e0d123e5f316bef78bfdf5a008837577
 - 3
  - 35
   - 35d91262b3c3ec8841b54169588c97f7
 - c
  - cc
   - cc273fe9d442850fa18c31c88c823e07 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T07:47:51.047

对此有很多不同的想法。我认为这实际上取决于您网站的规模。你期望它是什么？如果它被用作一个内部视频共享网站，你知道只有 10 个成员，因为你选择他们成为成员，我看不出有任何问题。但是，当您像 Youtube 那样拥有 10 亿会员时，请考虑后果。

也许这篇文章可以在某种程度上帮助你：http: [//highscalability.com/youtube-architecture](http://highscalability.com/youtube-architecture)

# c# - DrawingArea 的 MouseButton 状态

> ID：13796833
> 
> 赞同：0
> 
> 时间：2012-12-10T07:43:30.797
> 
> 标签：c#, multithreading, gtk#

我想用鼠标在 DrawingArea 中绘制图像。我可以知道 DrawingArea 中的当前鼠标坐标，但我怎么知道按下的鼠标按钮是什么？我当前的代码如下所示：

```
 protected void OnPaintedPicture1DrawingareaMotionNotifyEvent (object o, MotionNotifyEventArgs args)
            {
                EventMotion currentEventMotion = (args.Args[0] as EventMotion);

                matchingPercentageForPicture1AndSample1_entry.Text+=String.Format("x='{0}'; y='{1}';\t", currentEventMotion.X, currentEventMotion.Y);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:51:02.637

```
BOOL CALLBACK MainDlgProc(HWND hwnd, UINT msg, WPARAM wp, LPARAM lp)
{
  switch(LOWORD(wp))
   {
    case WM_LBUTTONDOWN: 
```

根据我的评论，我发现了这个.. [http://www.codeproject.com/Tips/400920/Handling-WM_LBUTTONUP-WM_LBUTTONDOWN-Messages-for](http://www.codeproject.com/Tips/400920/Handling-WM_LBUTTONUP-WM_LBUTTONDOWN-Messages-for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:03:01.887

您可以从中获取有关鼠标按钮（和修饰键）的信息`currentEventMotion.State`。它包含一个值[`Gdk.ModifierType`](http://docs.go-mono.com/?link=T%3aGdk.ModifierType)。

# android - 如何在安卓手机中禁用来电和去电

> ID：13796837
> 
> 赞同：3
> 
> 时间：2012-12-10T07:43:48.377
> 
> 标签：android

我想禁用安卓手机的来电和去电功能。我的安卓手机应该只允许运行 GPRS 和其他应用程序。

**我的安卓机型是三星王牌**

请建议我对此的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:46:02.140

此代码将阻止您的所有**通话（传入和传出）**

```
import java.lang.reflect.Method;

import android.content.Context;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

import com.CallLogApp.helper.BlockNumberHelper;
import com.CallLogApp.util.UDF;
import com.android.internal.telephony.ITelephony;

public class CustomPhoneStateListener extends PhoneStateListener {

    //private static final String TAG = "PhoneStateChanged";
    Context context;
    public CustomPhoneStateListener(Context context) {
        super();
        this.context = context;
    }

    @Override
    public void onCallStateChanged(int state, String outGoingNumber) {
        super.onCallStateChanged(state, outGoingNumber);

        switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                endCallIfBlocked(outGoingNumber);
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                break;
            default:
                break;
        }

     }

     private void endCallIfBlocked(String outGoingNumber) {
        try {
            // Java reflection to gain access to TelephonyManager's
            // ITelephony getter
            TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            Class<?> c = Class.forName(tm.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);  

            if (new BlockNumberHelper(context).isBlocked(outGoingNumber))
            {
                telephonyService = (ITelephony) m.invoke(tm);
                telephonyService.silenceRinger();
                telephonyService.endCall();
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

**每当您的呼叫将要连接和接到来电时，这里的 CALL_STATE_OFFHOOK 状态将调用**

没有任何方法**可以知道是来电还是去电**

但是您可以结束在两种情况下都将连接的呼叫

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:09:17.257

**您使用 google 的 android API 开发的任何内容。**

将位于[Android 架构](http://developer.android.com/about/versions/index.html)的 Applications 层。但是管理调用是在应用程序框架层中实现的。所以：

*   如果您想阻止来自应用程序的呼叫，则无法避免发生电话呼叫状态，因此一旦电话管理器处理了呼叫，请使用 telephonyService.endCall() 结束它。

*   如果您真的需要调用不到达您的应用程序层..我认为需要自定义 android 编译

*   **但是您是否考虑**过一些移动电话提供商提供“数据卡”来阻止语音通道？这些是 3G 移动互联网调制解调器中的卡类型

# hyperlink - 由于更改的锚文本，链接缩短器会影响 SEO 吗？

> ID：13796838
> 
> 赞同：1
> 
> 时间：2012-12-10T07:43:54.520
> 
> 标签：hyperlink, seo, search-engine

我很好奇链接缩短器（如 tinyurl、bitly 等）是否会以任何方式影响反向链接。

例如，gplus.to 链接缩短器会缩短您的 google+ 页面。这样一来，您的 Google+ 链接锚点将从：

[https://plus.google.com/u/0/b/73418324312440134122432433432/posts](https://plus.google.com/u/0/b/73418324312440134122432433432/posts)

到

[https://gplus.to/mycompanyname](https://gplus.to/mycompanyname)

这对于 SEO 反向链接目的来说一定是**件坏事吗？**googlebot 会不会“识别”缩短的链接，它不会帮助我的 SERPS 吗？

我想一切都一样。如果我通过使用 bitly.com 之类的东西缩短到我公司网站的更长链接......这是否有效地使它“**不是反向链接**”，而不是我发布整个链接（http://www.company.com /products/metals/default.aspx）？在这方面的任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:48:38.170

这取决于 URL 缩短服务，如果他们使用 HTTP 301/302 进行重定向，那么谷歌会很好，但是，很少有搜索引擎也使用来自 url 的词

```
www.demo.com/how-to-search-better 
```

更改为

```
www.bit.ly/12345 
```

对搜索引擎或用户也没有意义

# objective-c - RESTKit 通信错误

> ID：13796840
> 
> 赞同：2
> 
> 时间：2012-12-10T07:44:09.547
> 
> 标签：objective-c, ios, rest, restkit

我正在尝试通过 RESTKit 使用 XML Web 服务。

我能够连接到该服务，但收到如下错误消息：

```
error=Error Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type (null), got application/xml" 
```

我尝试如下设置内容类型标头，但仍未得到任何更改：

```
AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
[client setDefaultHeader:@"Content-Type" value:RKMIMETypeXML]; 
```

希望有人可以提供帮助。

我已经包含了我用来发出以下请求的代码：

```
NSURL *baseURL = [NSURL URLWithString:@"http://someaddress/"];

RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:baseURL];
[objectManager setRequestSerializationMIMEType:RKMIMETypeXML];
[objectManager setAcceptHeaderWithMIMEType:RKMIMETypeXML];

RKObjectMapping *recipeMapping = [RKObjectMapping mappingForClass:[Recipe class]];
[recipeMapping addAttributeMappingsFromDictionary:@{
 @"articleid" : @"ArticleId",
 @"title" : @"Title",
 @"url" : @"URL"
 }];

// Register our mappings with the provider using a response descriptor
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:recipeMapping
                                                                                   pathPattern:nil
                                                                                       keyPath:@"Recipes"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:200]];
[objectManager addResponseDescriptor:responseDescriptor];

[objectManager getObjectsAtPath:@"some/path/"
                     parameters:nil
                        success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                            NSArray *recipes = [mappingResult array];
                            NSLog(@"Loaded statuses: %@", recipes);
                        }
                        failure:^(RKObjectRequestOperation *operation, NSError *error) {
                            NSLog(@"Hit error: %@", [error localizedDescription]);
                        }]; 
```

问题是我仍然得到预期的内容类型（null），得到应用程序/xml 错误消息。

此外，我通过一个非常快速和简单的示例 ASIHTTP 应用程序调用了服务 URL，这很成功。我一定错过了一些基本的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:13:50.137

就像 Martin 提到的，此时您不需要直接与 AFHTTPClient 对话。

```
RKObjectManager* manager = [RKObjectManager managerWithBaseURL:baseURL];
[manager setRequestSerializationMIMEType:@"application/xml"];
[manager setAcceptHeaderWithMIMEType:@"application/xml"]; 
```

# android - 如何更改 NsdManager 使用的 android 设备名称？

> ID：13796841
> 
> 赞同：4
> 
> 时间：2012-12-10T07:44:19.267
> 
> 标签：android, mdns, dns-sd

我正在使用 NsdManager 在本地网络上注册 Web 服务。我的问题是设备名称被称为“android”，所以我可以从我的笔记本电脑上以“android.local”的身份访问手机。我怎样才能改变这个名字？我想要更独特的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-22T10:26:27.310

您无法更改此设置（在非 root 设备上）。“android”是设备的主机名，“.local”是mDNS添加的后缀（见[这篇文章](https://en.wikipedia.org/wiki/.local)）。

# c++ - QPushButton 中的内存泄漏还是什么？

> ID：13796842
> 
> 赞同：1
> 
> 时间：2012-12-10T07:44:27.280
> 
> 标签：c++, qt, memory-management, memory-leaks

很快：当我将鼠标拖到 MS Windows7（64 位）中的 QPushButton 上时，我的应用程序会占用一些内存。但是，如果我关闭按钮所在的小部件，则将返回内存。

我将 qt5 beta 2 和 VC++ 与 crtdbg.h 一起使用。

这是我的测试应用程序（启动，打开widget2并将鼠标拖到其上的按钮上。同时查看任务管理器。）

```
//-- widget1.h
class Widget1 : public QWidget
{
 Q_OBJECT
private:
 void callWidget2();
public:
 Widget1(QWidget* parent = 0);
 ~Widget1() {}

};

//-- widget1.cpp
Widget1::Widget1(QWidget* parent)
 :QWidget(parent)
{
 QPushButton* btn = new QPushButton(this);
 btn->setText("show widget2");
 connect(btn, &QPushButton::clicked, this, &Widget1::callWidget2);

 this->resize(100, 100);

 this->show();
}

void Widget1::callWidget2()
{
 new Widget2();
}

//-- widget2.h
class Widget2 : public QWidget
{
 Q_OBJECT
private:

public:
 Widget2(QWidget* parent = 0);
 ~Widget2() {}

};

//-- widget2.cpp
Widget2::Widget2(QWidget* parent)
 :QWidget(parent)
{
 this->setAttribute(Qt::WA_DeleteOnClose);
 this->resize(300, 300);

 QPushButton* button = new QPushButton(this);
 button->setText("btn1");

 button = new QPushButton(this);
 button->setText("btn2");
 button->move(0, 20);

 button = new QPushButton(this);
 button->setText("btn3");
 button->move(0, 40);

 button = new QPushButton(this);
 button->setText("btn4");
 button->move(0, 60);

 button = new QPushButton(this);
 button->setText("btn5");
 button->move(0, 80);

 this->show();
}

//-- main.cpp
int main(int argc, char *argv[])
{
 QApplication a(argc, argv);

 new Widget1;

 return a.exec();
} 
```

这是拖了5分钟的结果。![在此处输入图像描述](../Images/e9f4542ce18ea18e8833adc7cde9bdea.png)

我不能在 windows XP 32bit 上重复这个。

这是什么？

# .net-4.0 - RSACryptoServiceProvider.ImportParameters ObjectDisposedException

> ID：13796849
> 
> 赞同：3
> 
> 时间：2012-12-10T07:44:54.530
> 
> 标签：.net-4.0, rsacryptoserviceprovider, objectdisposedexception

我们有一个网络服务，我们想签署一个传入的请求并进一步发送它。我们正在使用 System.Security.Cryptography.RSACryptoServiceProvider 的静态对象，并且每个实例都使用相同的静态对象对其进行签名。我在微软上读到静态对象对于这个类是线程安全的。

问题是，在 web 服务负载很重的情况下，签名失败，但出现以下异常：

```
 `Exception Type: System.ObjectDisposedException
Message: Safe handle's handle field can only be set if the safe handle is not closed and has a ref count of 1.
ObjectName: 
Data: System.Collections.ListDictionaryInternal
TargetSite: Void _ImportKey(System.Security.Cryptography.SafeProvHandle, Int32, System.Security.Cryptography.CspProviderFlags, System.Object, System.Security.Cryptography.SafeKeyHandle ByRef)
HelpLink: NULL
Source: mscorlib

StackTrace Information
****************************
   at System.Security.Cryptography.Utils._ImportKey(SafeProvHandle hCSP, Int32 keyNumber, CspProviderFlags flags, Object cspObject, SafeKeyHandle& hKey)
   at System.Security.Cryptography.RSACryptoServiceProvider.ImportParameters(RSAParameters parameters)` 
```

# android - 如何让android手机成为socket服务器？

> ID：13796852
> 
> 赞同：3
> 
> 时间：2012-12-10T07:45:32.050
> 
> 标签：android, serversocket

我在 android 手机中开发了一个名为“A”的套接字服务器。并在另一部名为“B”的安卓手机中部署一个套接字客户端。

phone 一个行为套接字服务器。电话 B 充当套接字客户端。PC 服务器 C 充当套接字服务器，接收带有 ip 信息的电话“A”请求。并将“A”的 ip 发送给电话“B”。

现在，我已经在局域网中成功地将“B”连接到“A”。另外，我想在 3G 网络中将“B”连接到“A”。

首先，我启动 Socket Server C。并监听电话 A 和电话 B。

其次，启动电话B，并连接到服务器C。这样服务器C就可以通过连接的套接字与电话B相互通信。

第三，启动电话A，并连接到服务器C。这样服务器C就可以通过连接的套接字与电话A相互通信。

通过第一个和第二个，电话B可以与电话A相互通信。

但是，我想加快手机B和手机A之间的传输速度，减少服务器C的压力。我只是使用PC服务器C将手机A的ip发送给手机B。然后，手机B连接到手机A使用该ip从服务器 C 接收。

获取 ip：对于 wifi 网络：

```
WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();  
int ipAddress = wifiInfo.getIpAddress();
String ip = (ipAddress & 0xFF)+ "." + ((ipAddress >> 8 ) & 0xFF)+ "." + ((ipAddress >> 16 ) & 0xFF) +"."+((ipAddress >> 24 ) & 0xFF);
Log.d(TAG, " wifi net , ip: "+ip);
return ip; 
```

对于 3G 网络：

```
for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
  NetworkInterface intf = en.nextElement();
  for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
      InetAddress inetAddress = enumIpAddr.nextElement();
      if (!inetAddress.isLoopbackAddress()) {
          String ip = inetAddress.getHostAddress().toString();
          Log.d(TAG, " mobile net , ip: "+ip);
          return ip;
      }
  }
} 
```

但网络成功，3G网络失败。

我想可能有一些关于网络机制的东西。您能否尽可能解释并提供任何其他解决方案以使两部手机在 3G 网络中连接？非常感谢。

# breeze - 具有多部分键的实体的自动生成键

> ID：13796855
> 
> 赞同：1
> 
> 时间：2012-12-10T07:45:58.203
> 
> 标签：breeze

我试图用由外键和自生成字段形成的多列主键创建一个新对象，我发现了这个错误：

无法为具有多部分键的实体自动生成 ID。

现在，虽然不是最合适的，但我会更改密钥，但问题是：

您是否计划很快支持自动生成的多列主键？

我也会将请求添加到 uservoice。

问候。

编辑以解释用例：

你好，

诚然，由外键和自生成字段组成的主键可能没有意义。

我的想法是建立一个这样的表：

```
ParentID    ChildID             Data
1                  1            Some Data...
1                  2            Some Data...
2                  1            Some Data...
2                  2            Some Data... 
```

作为第一步，我做了一个这样的表：

```
ParentID    ChildID             Data
1                  1            Some Data...
1                  2            Some Data...
2                  3            Some Data...
2                  4            Some Data... 
```

其中 ChildID 是一个自行生成的字段。

所以你可以忽略我的问题。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:06:04.037

我遇到了同样的问题，但我在不更改*Primary Key (PK)*的情况下成功解决了它。

我的 PK 有 2 列

> ProductId（身份）
> TenantId（多租户应用程序）

所以第一个问题是当新*项目*添加到`EntityManager`. 我已经定义了自定义实体初始化函数：

```
var manager = new breeze.EntityManager(breezeServiceUrl);
var store = manager.metadataStore;

function itemInitializer(item) {
   if (item.ProductId() == 0) {
      item.ProductId(/*Some counter value*/);
   }
   if (item.TenantId() == 0) {
      item.TenantId(TenantId);
   }

   if (item.isBeingEdited === undefined) {
      item.isBeingEdited = ko.observable(false);
   }
};

store.registerEntityTypeCtor("ProductItem", function() {/*Leave empty to use default constructor*/}, itemInitializer); 
```

第二个问题是 Breeze 无法`ProductId`使用实际值更新 ，`EntityFramework`因为它通过*PK*获取实体并且返回的值只有`ProductId`. 所以你需要重写这个函数：

```
var entityType = store.getEntityType("ProductItem");
var entityGroup = manager.findEntityGroup(entityType);

entityGroup._fixupKey = function (tempValue, realValue) {
   var ix = this._indexMap[tempValue + ":::" + TenantId]; //Changed line

   if (ix === undefined) {
      throw new Error("Internal Error in key fixup - unable to locate entity");
   }
   var entity = this._entities[ix];
   var keyPropName = entity.entityType.keyProperties[0].name;
   entity.setProperty(keyPropName, realValue);
   delete entity.entityAspect.hasTempKey;
   delete this._indexMap[tempValue];
   this._indexMap[realValue] = ix;
}; 
```

如果您对多部分密钥有任何其他疑问，可以在[博客](http://www.yumasoft.com/node/151)中阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:29:20.417

此功能目前不在路线图上，但我想更好地了解您的用例。如您所知，Breeze 支持自动生成的密钥，而 Breeze 支持多部分密钥，但您发现同时使用这两种密钥的哪些场景会有所帮助？

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:50:24.457

实际上有一个多部分密钥，其中**部分**密钥是自动生成的，实际上很常见。这通常发生在主键由外键属性和“自动生成”序列号属性组成的遗留数据库中。通常这个自动生成的键本身不是全局唯一的，而只能与外键属性结合使用。考虑一个外键为“OrderId，SequenceNumber”的 orderDetail。

当主键包含多个自动生成的属性时，似乎没有多大意义。

在 Breeze 中，自动生成的密钥旨在全球唯一。然而，在上面提到的多部分键中，SequenceNumber 不会是全局唯一的（如果是，那么为什么不单独将其作为主键）。

这有意义吗？

# android - 使用文件列表作为主题选择器的菜单选项

> ID：13796857
> 
> 赞同：1
> 
> 时间：2012-12-10T07:46:08.973
> 
> 标签：android, menu, themes, sh

尝试编写一个 android/linux 脚本以将特定目录中的文件作为菜单选项列出，然后使用该文件作为脚本中的变量执行一组命令......到目前为止，我得到了这个：

```
#!/system/bin/sh
l_count=0
cd /sdcard/themes
ls *.zip|while read l_file
do
   l_count=`expr $l_count + 1`
   echo "${l_count}. ${l_file}"
done
echo
echo "Pick a theme:"
read $choice 
```

但从那里我无法弄清楚如何将从 l_count 分配的数字分配给 l_file

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:09:49.783

想通了...答案是让脚本在 do 循环内写出第二个脚本。这是最终脚本...

```
#!/system/bin/sh
l_count=0
cd /sdcard/themes
echo "#!/system/bin/sh" > /sdcard/themes/themer_tmp.sh
echo "echo 'Pick a theme:'" >> /sdcard/themes/themer_tmp.sh
echo "read choice" >> /sdcard/themes/themer_tmp.sh
echo case '$choice' in >> /sdcard/themes/themer_tmp.sh
ls *.zip|while read l_file
do
    l_count=`expr $l_count + 1`
    echo "${l_count}. ${l_file}"
    echo "${l_count})" >> /sdcard/themes/themer_tmp.sh
    echo echo '"boot-recovery" > /cache/recovery/command' >> /sdcard/themes/themer_tmp.sh
echo echo '"--update_package=/sdcard/themes/'${l_file}'"' '>> /cache/recovery/command' >> /sdcard/themes/themer_tmp.sh
echo echo '"--wipe_cache" >> /cache/recovery/command' >> /sdcard/themes/themer_tmp.sh
echo echo '"reboot"' '>> /cache/recovery/command' >> /sdcard/themes/themer_tmp.sh
echo "reboot recovery" >> /sdcard/themes/themer_tmp.sh
echo ";;" >> /sdcard/themes/themer_tmp.sh
done
echo "esac" >> /sdcard/themes/themer_tmp.sh
sh /sdcard/themes/themer_tmp.sh 
```

希望这可以帮助其他寻求类似解决方案的人

# javascript - 识别和提取图像的标题/描述（Data Scraping Pinterest）

> ID：13796859
> 
> 赞同：2
> 
> 时间：2012-12-10T07:46:15.483
> 
> 标签：javascript, jquery, web-scraping, bookmarklet, pinterest

如何使用 Javascript/jQuery 识别具有多个图像和描述的网页上的图像对应的描述或标题？

可以很容易地提取页面标题，但标题可能与图像不对应，尤其是当页面上存在许多图像时

```
var title = document.title; 
```

我相信 Pinterest 的 Pin-it 小书签已经成功地做到了这一点。我猜它与找到最近`h1`的`h2`,`h3`或图像`alt`属性的算法有关，然后`document.title`如果算法无法识别页面上的图像描述，则回退到。

任何想法都非常感谢！

## 编辑

这是用于抓取其他网站的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:25:16.377

OP提供了一个很好的问题来扩展。我最近为来自新**Yahoo!**的数据抓取**URL**、**标题**和**缩略图的另一个**[**SO 答案**](https://stackoverflow.com/a/13776711/1195891)创建了一个 jsFiddle ！**屏幕视频播放器**网页。

 ******我刚刚***重写了那个 jsFiddle***，所以它是 Pinterest 特有的，并且直接使用了**`Metatag Object Numbers`**（*稍后会详细介绍*），这使得这个 jsFiddle 与那个非常不同。

整个过程涉及使用**Yahoo 的查询语言**和 jQuery`.ajax()`函数来获取所需的抓取数据，这些数据通常在网页源`metatag`部分中可用。

首先，让我解释一些事情。

我将使用的[**Pinterest 链接**](http://pinterest.com/pin/40250990391375228/)将是固定项目的**直接链接。**这意味着网页将包含主要的固定项目以及许多其他较小的固定项目，这与包含大量仅固定项目的主页不同。

该[**Pinterest 链接**](http://pinterest.com/pin/40250990391375228/)的**网页标题**为固定项目的网页标题以及**`Title`**组成固定项目的几个单词**`Description`**。这很可能是不需要的，只需要固定的项目**`Title`**即可。

查看[**Pinterest 链接**](http://pinterest.com/pin/40250990391375228/)的 HTML 源页面向我们展示了当前使用的元标记。这是其中的大多数：

```
<meta property="fb:app_id" content="274266067164"/>

<meta property="og:site_name" content="Pinterest"/>
<meta property="og:type" content="pinterestapp:pin"/>
<meta property="og:url" content="http://pinterest.com/pin/40250990391375228/"/>
<meta property="og:title" content="FUNNY!!"/>
<meta property="og:description" content="Someone please do this."/>
<meta property="og:image" content="http://media-cache0.pinterest.com/upload/62980094758941134_yXgT124O_c.jpg"/>
<meta property="og:see_also" content="http://9gag.com/gag/2934786" />

<meta property="pinterestapp:pinboard" content="http://pinterest.com/amjo32/funny/"/>
<meta property="pinterestapp:pinner" content="http://pinterest.com/amjo32/"/>
<meta property="pinterestapp:source" content="http://9gag.com/gag/2934786"/>
<meta property="pinterestapp:likes" content="21"/>
<meta property="pinterestapp:repins" content="30"/>
<meta property="pinterestapp:comments" content="0"/>
<meta property="pinterestapp:actions" content="51"/>

<meta name="twitter:card" content="photo">
<meta name="twitter:url" content="http://pinterest.com/pin/40250990391375228/">
<meta name="twitter:site" content="@pinterest">

<meta name="google-site-verification" content="NvDayNupl7R0MDceeuRcs7xUf9yqUsxg6WGjEeRdAnc" />
<meta name="application-name" content="Pinterest" />
<meta name="msapplication-TileColor" content="#ffffff" /> 
```

如您所见，我们所追求的那些`metatags`包含`og:title`和数据。`og:image`然后意识到这些`og metatags`是执行数据抓取过程的直接目标。

可以肯定的是，`os:image`上面的内容链接是通过`_c.jpg`. 缩略图版本使用`_b.jpg`. 本质上，每个固定项目都有两个独特的图像尺寸。

由于数据抓取过程不返回这些`og property names`，只是`Metatag Object Numbers`，我们需要对返回**`content`**的每一个进行关联分析`Metatag Object Number`。

查看上面的`metatag`源代码，很明显`image`将始终位于以 . 开头的某个位置**`http://media-`**。这些**`13`**字符在所有元标记中是唯一的，因此当匹配时，整个 URL 就是**`image location`**.

当然，如果 Pinterest 对图片使用多个 URL 模板，则需要相应地进行调整。

看着你立即意识到***内容部分***`og:title`中没有唯一的字符串来表明这个标签是. 因此，假设所有元标记都遵循一个模板并且在一段时间内不会改变，我们将把它分配给提供. 需要明确的是，这个数字 7 是基于并来自这个脚本过程，而不是上面看到的源 HTML 结构。*`image's title`**`Metatag Object Number 7`****`Pinterest Pinned Item's Image Title`**`.ajax()``YQL Results`*

 *同样，如果 Pinterest 更改了 的模板`head section`，则可能需要进行调整。

[下面是我根据这篇在线文章](http://ninjagirl.com/posts/2012/02/create-facebook-style-link-preview-using-jquery-yql)中看到的数据抓取技术/脚本编写的实时**分步教程**。

[**jsFiddle Pinterest 数据抓取 DEMO**](http://jsfiddle.net/4fmUR/)

* * *

**提示：**
虽然没有演示，但您可以使用**总找到的 Metatags的****数值，可以根据页面*****应***包含的预定值检查该数值，表明已更改。例如，当前元标记计数是项目。如果在任何其他**Pinterest 固定项目**网页上返回的值**不等**于此值，则您知道使用中存在不同...这可能会影响脚本，因为它只***需要 25***并通过它直接调用其中两个。***`head section``25`****`head section`***`Metatag Object Number`**********

 ******* * *

**额外的东西：**
如果您对如何检索主页上看到的当前 Pinterest 固定项目感到好奇，请首先了解这个 jsFiddle 演示是如何工作的。然后，您需要制作自己的 jsFiddle 版本进行测试，并使用*Pinterest 主页 URL*以及更改对数据抓取**`XPATH`**的**`.ajax()`**调用**`relevant div's`**中的 **`body section`**. 要了解更多信息`XPATH basics`，请单击[**此处**](http://bit.ly/X3NVpf)。然后你就可以理解：[**XPATH for Select Divs in Body on YQL Playground**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22http%3A//pinterest.com/%22%20AND%20xpath%3D%22//body/div%5B@class%3D%27BoardLayout%27%5D/div%5B@id%3D%27ColumnContainer%27%5D/div%5B@class%3D%27pin%27%5D/div%5B@class%3D%27PinHolder%27%5D/a%22)。

例如，该格式***最多***`body section`包含50个**引脚：**

 ***```
 "href": "/pin/15833036160340477/" 
```

这些`href fragments`将作为重新创建 URL 的起点。**重要提示：**某些引脚可能**`repins`**意味着您将返回少于 50 个引脚。

对于那些读到这里的人，这里是：

[**一些额外的 jsFiddle 演示**](http://fiddle.jshell.net/r8axY/show)。

[**这是YQL Playground 上 Body 中 Select Divs**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22http%3A%2F%2Fpinterest.com%2F%22%20AND%20xpath%3D%22%2F%2Fbody%2F%2Fdiv%5B%40class%3D'PinHolder'%5D%2Fa%22)的改进XPATH ，但请理解上面较长的 XPATH 是如何工作的。

* * *

**另请参阅我的其他 Pinterest SO 答案：**

[**自定义 URL 的自定义 Pinterest 按钮（文本链接、图像或两者）**](https://stackoverflow.com/a/11488760/1195891)

[**如何复制 Pinterest 网站的模态效果？**](https://stackoverflow.com/a/11253923/1195891)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:52:50.373

最好的答案是：看看 Pinterest 是如何做到的。

对于 jQuery，请查看“最近”函数。

这里只是一些快速而肮脏的未经测试的代码，为您提供思考这个问题的起点，但这是一个非常开放的问题，您的代码中的智能可以像您希望的那样复杂和健壮或简单。

```
$('img').each(function() {

    var title = $(this).prop('alt') || $(this).prop('title') || $(this).closest('h1,h2,h3').text();

   // do something with title

});​ 
```****************

# asp.net - 如何将页面信息作为参数传递给访问它的asp.net网站？

> ID：13796860
> 
> 赞同：0
> 
> 时间：2012-12-10T07:46:29.780
> 
> 标签：asp.net

在网站的一个页面上，我提供了一个指向我的 asp.net 网站登录页面的链接。当我单击链接时，我想捕获页面上可用的一些信息并将其传递到我网站的第一页。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:49:55.260

您可以在 Url中的**QueryString**中设置所需的值。

检查这个：[HttpRequest.QueryString 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring%28v=vs.100%29.aspx)

此外，您可以使用 LinkBut​​ton 并处理其单击事件。在点击事件上，您可以根据需要在**Cookie 或 Session**中设置所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:24:40.857

是的，您可以使用查询字符串，如果数据很小，您可以从此[链接获取有关查询字符串的信息](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T21:19:53.530

有很多方法可以捕获国家。按照这些教程或在谷歌上搜索状态管理教程。这里有一些：

[http://www.codeproject.com/Articles/331962/A-Beginner-s-Tutorial-on-ASP-NET-State-Management](http://www.codeproject.com/Articles/331962/A-Beginner-s-Tutorial-on-ASP-NET-State-Management)

[http://www.codeproject.com/Articles/492397/State-Management-in-ASP-NET-Introduction](http://www.codeproject.com/Articles/492397/State-Management-in-ASP-NET-Introduction)

[http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

# c++ - TOPMOST(SetWindowPos(, HWND_TOPMOST, ..)) 不适用于 IE9 或 Vista/Win7？

> ID：13796880
> 
> 赞同：2
> 
> 时间：2012-12-10T07:48:09.393
> 
> 标签：c++, windows, winapi, activex, topmost

对于某些特殊需要，我编写了一个 ActiveX 控件（dll），使包含它的 IE 浏览器窗口成为 TOPMOST 窗口。

```
::SetWindowPos(pWndWb, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE|SWP_NOSIZE|SWP_SHOWWINDOW); 
```

唯一的问题是，当我在 IE9 上测试从在线（远程）服务器加载这些控件和 html 时，这不起作用。即使我在 IE9 上测试，当我从测试 PC 的本地目录加载它们时效果很好。当然，即使我从在线（远程）服务器加载它们，它在 IE8/WinXP 上也能正常运行。

我已经阅读了几篇关于类似问题的帖子并尝试了给出的提示，但问题仍然没有改变。

当然，我也尝试了以下内容：

```
::SetForegroundWindow(pWndWb);
::SetActiveWindow(pWndWb); 
```

# ruby - ruby net/telnet 只发送字符串的前半部分

> ID：13796881
> 
> 赞同：0
> 
> 时间：2012-12-10T07:48:10.453
> 
> 标签：ruby, telnet

我需要通过 telnet 向远程设备发送大约 30 个命令，以进行测试自动化。以表格形式写入文件的命令：

```
command1
command2
command3
... 
```

然后我使用脚本，仅从文件发送命令的前半部分。如果文件中有 10 个字符串，则只发送 5 个。如果文件中有 20 个字符串，则只发送前 10 个。当然我可以添加额外的行，但我不喜欢这个解决方案。

```
require 'net/telnet'

host = Net::Telnet::new("Host" => "192.168.1.111",
                        "Output_log" => "log")

host.login("Name" => "admin",
           "Password" => "admin")

File.open("filename").each {|line| host.cmd line}

host.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:39:03.950

Аdding`chomp`解决了这个问题。

```
File.open("filename").each {|line| host.cmd line.chomp} 
```

# c - VS2010调试时隐藏struct成员的值

> ID：13796882
> 
> 赞同：0
> 
> 时间：2012-12-10T07:48:17.080
> 
> 标签：c, visual-studio-2010, debugging

我将列表定义为：

```
typedef struct LinkNode LinkNode;
struct LinkNode {
     int value;
     LinkNode *next;
}; 
```

我在 main() 中使用了这个 LinkNode 类型：

```
int main()
{
    LinkNode *p;
    ...
} 
```

当我在VS2010中进行单步调试时，有时调试器会将局部变量p的值显示为0xcccccccc{value = ??? next = ???}，但我混淆的是在某些情况下 p->value 和 p->next 的值在调试中隐藏，p 的值显示为 Oxcccccccc。（成员的价值是不可见的）

我不知道这些表示背后的机制是什么。我只是用几乎相同的代码（不同的变量名但相同的数据结构）测试了两个项目，结果如上。所以有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:38:43.860

`LinkNode *p`是一个未初始化的指针。您必须先构造对象，就像写`int* a`并尝试查看`a`指向什么。你必须写这样的东西：

```
struct LinkNode {
     LinkNode(int value = int(), LinkNode* next = nullptr) :
               value(val), next(next)
     {
     }

     int value;
     LinkNode *next;
};

int main()
{
    LinkNode* p = new LinkNode();
    ...
    delete p;
} 
```

**编辑**
在 c 中，您必须使用 malloc 和 free... new 和 delete 是不允许的。

```
typedef struct LinkNodeTag {         
     int value;
     struct LinkNodeTag *next;
} LinkNode;

LinkNode a = malloc(...);
free(a); 
```

不幸的是，我不记得 malloc 和 free 是如何工作的......

# c# - 如何正确进行急切加载？

> ID：13796883
> 
> 赞同：2
> 
> 时间：2012-12-10T07:48:21.277
> 
> 标签：c#, nhibernate, fluent-nhibernate

任何人都知道为什么这个查询不能正确加载？（Finan 急切地加载，但 Trans/Charge/Purchaser 没有。

```
 return session.QueryOver<Plot>()
                .Where(x => x.Project == Project)
                .Fetch(x => x.Trans).Eager
                .Fetch(x => x.Charge).Eager
                .Fetch(x => x.Finan).Eager
                .Fetch(x => x.Purchaser1.User).Eager
                .Future<Plot>(); 
```

我的映射：

```
public class PlotMappingOverride : IAutoMappingOverride<Plot>
{
    public void Override(AutoMapping<Plot> mapping)
    {
        mapping.References(x => x.Project).Cascade.SaveUpdate().Not.LazyLoad().Not.Nullable();
        mapping.References(x => x.Finan).Cascade.SaveUpdate();
    }
} 
```

**编辑：我的情节类是这样的：**

```
[Serializable]
public class Plot : BaseEntity<Plot>
{
    public virtual Project Project { get; set; }
    public virtual string Plot_No { get; set; }
    public virtual PlotPurchaser Purchaser1 { get; set; }

    public virtual Finan Finan { get; set; }
    public virtual Trans Trans{ get; set; }
    public virtual Charge Charge{ get; set; } 
```

# jakarta-ee - 如何使用 XML 访问 Java EE 上的命名空间绑定？

> ID：13796884
> 
> 赞同：1
> 
> 时间：2012-12-10T07:48:26.680
> 
> 标签：jakarta-ee, websphere, jndi

我使用以下信息在 IBM WebSphere 7.0 上添加了名称空间绑定：

*   **绑定类型**= 字符串
*   **绑定标识符**= 测试
*   **名称空间中相对于查找名称前缀“cell/nodes/DummyNode01/servers/server1/”的**名称：= url1
*   **字符串值**= <某个字符串>

我能够使用以下代码访问我的 Web 应用程序代码中的字符串值：

```
Context initial_ctx;
initial_ctx = new InitialContext();
String value = (String) initial_ctx.lookup("url1"); 
```

现在我想将 String 值放在 XML 中，而不是通过代码访问它。如何在 XML 中访问 WebSphere 的名称空间绑定？我可以在`context-param`标签内声明它吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:03:06.440

一些笔记。

首先，NSB 的字符串名称（JNDI 字符串）在 WebSphere 上会有所不同，具体取决于您设置的范围。您在帖子中确定的“服务器”范围允许您按原样通过其友好名称（在您的示例中为“url1”）引用此字符串值。但是，请注意在集群环境中 - 您必须在每个服务器实例上定义此 NSB，您可能希望所有集群成员应用服务器具有相同的值。在这种情况下，在单元级别定义 NSB，并在您的代码（或稍后，您的 Spring xml）中使用 jndi 名称“cell/persistent/url1”。

由于 WebSphere 中的 NSB 只是命名服务 (JNDI) 中的字符串，因此您可以使用 Spring JndiFactoryBean：

```
<bean id="myUrl1NameSpaceBinding" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="url1"/> <!-- cell/persistent/url1 in a cluster-wide shared namespace binding -->
    <property name="cache" value="true"/>
    <property name="resourceRef" value="false"/>
    <property name="lookupOnStartup" value="false"/>
    <property name="expectedType" value="java.lang.String"/>
</bean> 
```

还有一种速记的味道：

```
<jee:jndi-lookup /> 
```

另请参阅：[Spring XML 文档](http://static.springsource.org/spring/docs/2.0.x/reference/xsd-config.html)

希望这可以帮助，

斯科特

# mercurial - Mercurial Queues - 备份和共享未提交的补丁

> ID：13796888
> 
> 赞同：3
> 
> 时间：2012-12-10T07:48:49.517
> 
> 标签：mercurial, repository, patch, sharing, mercurial-queue

我试图了解如何将我的 mercurial 补丁推送到远程仓库（例如 bitbucket.org），而不必先应用它们（实际上是提交它们）。我的动机是在完成之前首先对我的工作进行远程备份，并且能够与其他人共享这些补丁或在不同的机器上处理它们。

我的正常工作流程是这样的：

```
$ hg qnew some-feature -m "work on some feature"

... work on some files

$ hg qref

--> bug or other feature request comes along

$ hg qpop some-feature
$ hg qnew new-feature -m "work on different feature"
... work on new stuff
$ hg qref 
```

此时，我想将我未完成的、未提交的补丁推送到 repo。我已经读过 Mercurial 队列实际上是它们自己的存储库，因此可以像普通的 hg 存储库一样进行操作，但我不清楚我正在尝试做什么的工作流程。我在我的 shell 中将 mq 命令别名为`hg -R $(hg root)/.hg/patches`，但我希望能得到一些关于人们如何管理远程备份和共享未提交补丁的反馈。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:04:22.210

在 Bitbucket 上，您可以创建存储库和补丁队列。Bitbucket 似乎还没有提供补丁队列的详细[官方文档](https://confluence.atlassian.com/display/BITBUCKET/Using+Patch+Queues+on+bitbucket)，但是有一篇[博客文章](http://ches.nausicaamedia.com/articles/technogeekery/using-mercurial-queues-and-bitbucket-org)描述了如何使用它们。

要备份/共享未提交的补丁，基本的工作流程命令是：

```
hg init --mq # initialize .hg/patches as a versioned repository (hereafter referred to as the MQ repository)
# manually configure .hg/patches/.hg/hgrc to contain a [paths] section if desired
hg commit --mq # commit in the MQ repository
hg push --mq # push the MQ repository to default remote
hg pull --mq # pull the MQ repository from default remote
hg update --mq/hg merge --mq # same as normal for hg, but operating on the MQ repository 
```

在旧版本的 Mercurial 中，`hg init --mq`and`hg commit --mq`命令作为`hg qinit`and提供`hg qcommit`（现在已弃用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:04:37.883

您可以在您的存储库中创建一个存储库`.hg/patches`并将其作为单独的存储库推送。在更高版本的 mercurial 中，您只需执行此操作`hg ci --mq`，它将提交您的补丁存储库的最新版本。提交后，您可以将其克隆到 bitbucket。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:44:56.857

*   `hg push --mq`在 MQ 中推送变更集**和补丁**
*   [mqcollab](http://code.ravelsoft.com/mqcollab) - 轻松交换和协作 MQ 补丁

# javascript - 定期执行后端脚本

> ID：13796897
> 
> 赞同：0
> 
> 时间：2012-12-10T07:49:46.143
> 
> 标签：javascript, apache

我的要求是只要用户打开浏览器页面就执行后端脚本，并在浏览器端出现任何问题时终止用户会话的后端脚本 - 比如用户单击关闭浏览器页面/浏览器崩溃等其他我们可以考虑或可能的。

我的要求是根据用户需求启动后端脚本并使用详细信息更新用户页面。同时，当用户由于任何原因存在时，我们需要停止脚本。我确实明白在页面上设置按钮来启动/停止会有所帮助——但如果用户关闭页面会怎样——我的后端脚本将继续无限运行。

请建议我可以采用哪种方式实现相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:40:00.400

这很容易通过长轮询技术实现。您可以使用：

```
setInterval(function(){
    /*some code to execute ajax request to backend*/
}, timeIntervalInMS); 
```

或者更好地在 google 上搜索 javascript 中的长轮询插件，你就可以开始了。

通过这种技术，只要用户打开浏览器，浏览器就会以毫秒为单位向后端发出请求。

# android - android中电话号码的特殊字符

> ID：13796900
> 
> 赞同：0
> 
> 时间：2012-12-10T07:49:54.210
> 
> 标签：android

当我测试联系人时，它有一个错误。错误地址为 PhoneNumberUtils.charToBCD()

错误是 java.lang.RuntimeException: invalid char for BCD; 也就是说`;`没有处理。

电话号码的特殊字符是什么意思？

感谢有关此的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:46:20.260

@SreekeshOkky 在他的回答中提到了“vcard”，所以它可能正在尝试从 vCard 中解析电话号码。

在 vCard 中，电话号码通常编码为自由格式文本，这意味着它们可以包含任何字符。

它们也可以编码为 URI。如果电话号码有分机号，则电话号码 URI 将包含分号。例如：

```
tel:+1-555-555-5555;ext=5555 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:04:48.773

抛出异常是由于

```
 private static int
    charToBCD(char c) {
        if (c >= '0' && c <= '9') {
            return c - '0';
        } else if (c == '*') {
            return 0xa;
        } else if (c == '#') {
            return 0xb;
        } else if (c == PAUSE) {
            return 0xc;
        } else if (c == WILD) {
            return 0xd;
        } else {
            throw new RuntimeException ("invalid char for BCD " + c);
        }
    } 
```

在`PhoneNumberUtils.java - android-vcard`所以检查 a`;`是否在您的函数中传递

# c# - C# lambda 未命名参数

> ID：13796902
> 
> 赞同：25
> 
> 时间：2012-12-10T07:50:04.493
> 
> 标签：c#, parameters, lambda

是否有可能通过不给它们命名来丢弃 lambda 表达式中的一些参数？例如，我必须传递一个 Action<int,int>，但我只对第二个参数感兴趣，我想写类似的东西

```
(_, foo) => bar(foo)
// or
(, foo) => bar(foo) 
```

在第一种情况下，它正在工作。但第一个参数并不是真正的未命名，因为它的名称为“_”。因此，当我想丢弃两个或更多时，它不起作用。我选择 _ 因为在 prolog 中它具有“任何值”的含义。

所以。我的用例是否有任何特殊字符或表达式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T07:57:53.040

不，你不能。查看[C# 语言规范](http://download.microsoft.com/download/3/8/8/388e7205-bc10-4226-b2a8-75351c669b09/csharp%20language%20specification.doc)语法，声明 lambda 有两种方式：显式和隐式。两者都不允许您跳过参数的标识符或重用标识符（名称）。

```
explicit-anonymous-function-parameter:
  anonymous-function-parameter-modifieropt   type   identifier

implicit-anonymous-function-parameter:
  identifier 
```

与普通函数中未使用的函数参数相同。他们必须被命名。

当然，您可以将`_`其用作参数之一的名称，因为它是有效的 C# 名称，~~但这并不意味着什么特别。~~

从 C# 7 开始，`_` *确实*具有特殊含义。不适用于 lambda 表达式参数名称，但绝对适用于其他事物，例如模式匹配、解构、输出变量甚至常规赋值。（例如，您可以使用`_`= 5; 而不声明`_`。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T07:57:10.780

简短的回答是：不，您必须命名每个参数，并且名称必须是唯一的。

您可以将`_`其用作一个参数名称，因为它是 C# 中的有效标识符。
但是，您只能使用一次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-09T15:54:59.903

# 现在你可以！

从 C# 9.0 开始，您可以使用下划线字符“丢弃”一个**或多个**lambda 参数。从[微软文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/lambda-expressions#input-parameters-of-a-lambda-expression)：

> 从 C# 9.0 开始，您可以使用丢弃来指定 lambda 表达式的两个或多个未在表达式中使用的输入参数：

```
Func<int, int, int> constant = (_, _) => 42; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-09T15:54:56.240

在 C# 7 中，您可以使用丢弃。丢弃是您无法读取的只写变量。它基本上适用于您不希望在[此处使用更多详细信息的变量](http://www.devsanon.com/c/using-discards-feature-of-c-7/)

# java - 有些图像可以加载，但有些不能用 texImage2D 加载

> ID：13796903
> 
> 赞同：0
> 
> 时间：2012-12-10T07:50:10.200
> 
> 标签：java, opengl

我正在使用以下 java 代码将图像加载为纹理并显示在屏幕上。但是我发现我编辑的所有图像`gimp`都无法加载，但是从网上下载的一些图像可以正常显示在屏幕上。

```
 private void loadTexture() {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = false;
        Bitmap bitmap = BitmapFactory.decodeResource(
                    getContext().getResources(), R.drawable.b, options);
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGBA, bitmap, GLES20.GL_RGBA, 0);
    } 
```

# java - 如何获取本地主机（tomcat）的服务器状态？

> ID：13796904
> 
> 赞同：0
> 
> 时间：2012-12-10T07:50:13.413
> 
> 标签：java, localhost, status

我需要知道 Tomcat 服务器 (http://localhost:8081) 的状态——它是否是使用 Java 代码启动的。如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:59:54.490

添加一个 Tomcat 管理器应用程序并使用 GET url，然后解析返回的文本。

您可以阅读：http:
[//tomcat.apache.org/tomcat-5.5-doc/manager-howto.html](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html)

# r - 基于文本文件自动化 R

> ID：13796906
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:50:32.793
> 
> 标签：r, bash

我有一个格式为的文本文件：

```
>species1
0.432
0.323
0.987
(possibly continued...)
>species2
-0.332 
```

等等...

我有 4 个变量，`totalcomsize, totalp, pol_pla, nvp_vp`假设它们是常量，因此很容易硬编码。我怎么能把所有的值都放在下面`>species1`，并将它们与上述 4 个变量中的每一个进行对比，然后保存一个名称为`species1_vs_variable`变量之一的图上面的那些。我想使用 R 和 bash 代码来做到这一点，有人可以帮忙吗？

* * *

**已编辑**

好的，作为一个简短的示例，上面提到的 4 个变量对应于一组 FIXED 点，因此每个变量都可以是`[1, 2, 3, 4, 5]`例如。以 a 开头的每一行`>`表示有一组新数据要与上述 4 个变量中的每一个进行比较。`>Species1`也可能是`>Drosophila Melanogaster`，它下面的每个数字都由新行分隔，是包含在与 D.Melanogaster 对应的集合中的值。但是你基本上想要所有的值，直到下一行以 a 开头`>`。所以你最终可能会得到一套`[0.2, 0.4, 0.6]`黑腹果蝇。然后，您想为每 4 个固定变量制作该数据集的线图（`totalcomsize, totalp, pol_pla, nvp_vp`) 并保存绘图，为其指定与物种相对应的文件名。我想自动化这个，因为有很多物种。这意味着要手动绘制#species*4 图表。所以你可以明白我为什么要这样做。我确实设法把它放在一个更好的格式中，其中物种在一行上用制表符分隔，例如

```
anthomyiidae_sp_2_NVP   anthomyiidae_sp_1_NVP   anthomyiidae_sp_3_NVP
-0.221                  0.188                   0.989
0.972                   0.092                   0.924 
```

然后它们的值以制表符分隔格式位于下一行，依此类推，直到没有更多值为止。我能够导入这个文件，它有点帮助。但我仍然可以使用一个好的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:59:32.647

如果您每个变量都有一个文件（并假设您的文件以您的变量命名），那么我的建议是：

```
vars <- c("totalcomsize", "totalp", "pol_pla", "nvp_vp")
for(v in vars){
    f <- readLines(paste(v, "txt", sep"."))
    index <- grep(">",f) # Spot lines that start with a >
    mat <- apply(cbind(index, c(index[-1]-1,length(f))), 1,
                        function(X){as.numeric(f[(X[1]+1):X[2]])})
    # break the file at each lines spotted in the preceding step
    names(res) <- gsub(">","",f[index]) # Names each element of the list according to the lines starting with >
    for(i in 1:length(res)){ # Loop to create a plot for each species vs each variable
        pdf(paste(names(res)[i],"_vs_", v, ".pdf",sep=""))
        plot(res[[i]])
        dev.off()
        }
    } 
```

对于每个变量，`res`是以下形式的列表：

```
res
$species1
[1] 0.432 0.323 0.987
$species2
[1] -0.332 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:43:51.270

正如许多评论很清楚，你想做什么。

但是，我认为数据的特殊格式很有趣。由于您有按物种分组的格式良好的 data.frame 中的数据，因此您可以轻松地使用它们。

我用特殊的分隔符读取数据：

```
dat <- read.table(text ='>species1
0.432
0.323
0.987
>species2
-0.332',sep ='>',fill=TRUE,colClasses=c('numeric','character'))
   dat
      V1       V2
1     NA species1
2  0.432         
3  0.323         
4  0.987         
5     NA species2
6 -0.332 
```

我尝试用以前的值填补 V2 中的空白

```
L <-  dat$V2 != ''
idx <- c(NA,which(L))[cumsum(L)+1]
dat$V2 <- dat$V2[idx]
  dat
      V1       V2
1     NA species1
2  0.432 species1
3  0.323 species1
4  0.987 species1
5     NA species2
6 -0.332 species2 
```

然后我删除 NA 值

```
dat <- na.omit(dat)

     V1       V2
2  0.432 species1
3  0.323 species1
4  0.987 species1
6 -0.332 species2 
```

正如评论中所建议的，您可以在由 spiecs 索引的列表上创建过程

```
library(plyr)
ll <- dlply(dat,.(V2),function(x) x$V1)
ll
$species1
[1] 0.432 0.323 0.987

$species2
[1] -0.332 
```

# android - 从本地源播放视频流时如何在视频上添加文本？

> ID：13796908
> 
> 赞同：3
> 
> 时间：2012-12-10T07:50:38.973
> 
> 标签：android, video-streaming, android-video-player

我想开发一个可以控制通过流媒体视频添加的自定义（用户）文本的 android 应用程序。

1.  假设当用户播放 3 分钟的视频时，假设他恰好在 1 分钟处暂停以添加或包含他的文本（字幕或一些信息），然后保存它。
2.  现在视频应该继续流式传输（从分钟 1 开始，没有添加文本的原始视频）直到视频结束。
3.  然后，当用户重播视频时，它应该包含从分钟 1 开始添加的文本，覆盖原始视频。

# ruby-on-rails - 列出所有唯一关联活动记录

> ID：13796909
> 
> 赞同：0
> 
> 时间：2012-12-10T07:50:42.057
> 
> 标签：ruby-on-rails, activerecord

我有一个名为 Job 的班级和一个名为 Hour 的班级

工作有很多小时

在某些时候，我选择了 Hours 的集合。现在我想获取这些时间所属的所有工作的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:13:19.077

有很多方法可以获得小时数。

如果您的收藏与 AR 相关，那么您可以这样做

```
<hours collection>.includes(:job).map(&:job) 
```

如果是几个小时，那么只需执行

```
<hours collection>.map(&:job) 
```

您也可以在子查询中实现这一点（小时集合应该在 AR 关系上）

```
Job.includes(:hours).where(:id => <hours collection>.select("job_id")) 
```

# mysql - 获取 MySQL 路径

> ID：13796911
> 
> 赞同：5
> 
> 时间：2012-12-10T07:50:46.710
> 
> 标签：mysql, linux, terminal, command

我尝试用谷歌搜索获取 MySql 路径，但没有成功。有没有**unix**命令，在哪里可以找到 MySQL 数据库目录路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:03:04.350

试试这个查询，

`SHOW VARIABLES LIKE 'datadir';`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T07:54:21.710

找到 my.cnf 然后找到 datadir

```
sudo find / -name "my.cnf" | xargs cat | grep "datadir" | cut -d" " -f2 
```

或者如果您知道配置文件的位置

```
cat /etc/mysql/my.cnf | grep "datadir" | cut -d" " -f2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:59:01.363

如果 MySQL 服务已启动，则可以使用此命令获取路径 -

```
SHOW VARIABLES LIKE 'basedir'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-03T10:56:44.913

```
sudo mysql <<< "SHOW VARIABLES LIKE 'datadir';" | grep "datadir" | cut -c9- 
```

或在 bash

```
MYSQL_DATA_DIR="$(sudo mysql <<< "SHOW VARIABLES LIKE 'datadir';" | grep "datadir" | cut -c9-)" 
```

# java - 将加密服务从 .Net 移植到 Java

> ID：13796912
> 
> 赞同：0
> 
> 时间：2012-12-10T07:50:50.793
> 
> 标签：java, .net, encryption

我有一个加密服务（.Net Class Lib）现在我必须将它移植到java，就加密和解密而言，这两个服务都可以正常工作，但问题是我必须将加密值保存在数据库中并且java 服务生成的加密值必须与 .Net 类库生成的值匹配。

现在，如果我加密一个值，则说`android`这两个服务都会生成不同的加密值。有什么可能的解决方法或要寻找的东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:00:58.180

加密系统通常具有以下参数：

*   算法
*   加密密钥（如果适用，还有一个初始化向量）
*   [密码块模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)

可以使用任何语言和在任何平台上开发系统，并且只要这三件事相同，那么任何实现的输出都是相同的。像平台字节序这样的事情并不重要，因为算法应该使用字节作为基本单位。

因此，如果您为相同的输入获得不同的输出，那么其中一项或多项是错误的:)

如果您已经开发了自己的加密系统（例如自己实现了 3DES），那么这可能就是您的错误所在。[始终将密码系统的实施留给学术专业人士](http://www.codinghorror.com/blog/2009/05/why-isnt-my-encryption-encrypting.html)。

我将假设您正确设置了密钥和 IV，从而离开了密码块模式——这是最合理的解释，因为不同的平台有自己的默认值。

但是，如果您已验证所有这些内容在您的 .NET 和 Java 实现中都是相同的，那么您应该重新发布您的问题，但要提供更多详细信息，包括相关的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:10:10.563

我做了同样的事情——从 Java 到 C#。查看来自开源项目的现有代码可能会有所帮助。

*   [LockCrypt](http://lockcrypt.codeplex.com/)是我写的一个例子
*   [Keepass](http://keepass.info/download.html)具有所有主要语言的端口，因此您可以比较每种语言的加密方式

# .net - DateTime.TryParseExact 和不同的分隔符

> ID：13796917
> 
> 赞同：6
> 
> 时间：2012-12-10T07:51:13.863
> 
> 标签：.net

是否可以指示 DateTime.TryParseExact 接受多个（**任何**）分隔符（**指定分隔符占位符而不是特定的分隔符**）？例如：

```
DateTime.TryParseExact(performanceRow[5], "M/d/yyyy", 
    CultureInfo.InvariantCulture, DateTimeStyles.AllowWhiteSpaces, out startDate) 
```

如果日期具有“/”字符作为分隔符，则此方法有效。但是我刚刚收到一个带有“。”的文件。作为分隔符，解析失败。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T07:53:44.047

使用 TryParseExact 的这个变体

```
DateTime.TryParseExact(String, String[], IFormatProvider, DateTimeStyles, DateTime%) 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)

第二个参数是一个字符串数组，定义为

> **格式**
> 
> 类型：System.String[]
> 
> s 的允许格式数组。

描述说：字符串表示的格式必须**至少与指定格式中的一种完全**匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:00:46.190

您可以在数组中传递格式，如下所示，

```
string[] formats= {"M/d/yyyy h:mm:ss tt", "M/d/yyyy h:mm tt", 
               "MM/dd/yyyy hh:mm:ss", "M/d/yyyy h:mm:ss", 
               "M/d/yyyy hh:mm tt", "M/d/yyyy hh tt", 
               "M/d/yyyy h:mm", "M/d/yyyy h:mm", 
               "MM/dd/yyyy hh:mm", "M/dd/yyyy hh:mm"}; 
```

在 TryParseExact 方法中将此格式作为第二个参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-18T14:15:47.507

我刚刚创建完这个格式列表，以使我的验证尽可能包含典型的英国日期格式，而不会引入歧义。希望这对某人有帮助。

```
{
    // slash separator:
    "d/M/y",        //no leading 0s
    "dd/M/y",       //leading 0 in date
    "d/MM/y",       //leading 0 in month
    "dd/MM/y",      //leading 0 in date & month
    "d/M/yyyy",     //leading 0 in year
    "dd/M/yyyy",    //leading 0 in date & year
    "d/M/yyyy",     //leading 0 in date, month & year
    // dash separator:
    "d-M-y",        //no leading 0s
    "dd-M-y",       //leading 0 in date
    "d-MM-y",       //leading 0 in month
    "dd-MM-y",      //leading 0 in date & month
    "d-M-yyyy",     //leading 0 in year
    "dd-M-yyyy",    //leading 0 in date & year
    "d-M-yyyy",     //leading 0 in date, month & year
    // dot separator:
    "d.M.y",        //no leading 0s
    "dd.M.y",       //leading 0 in date
    "d.MM.y",       //leading 0 in month
    "dd.MM.y",      //leading 0 in date & month
    "d.M.yyyy",     //leading 0 in year
    "dd.M.yyyy",    //leading 0 in date & year
    "d.M.yyyy",     //leading 0 in date, month & year
} 
```

# python-2.7 - 关于python，我无法理解书中提供的示例

> ID：13796920
> 
> 赞同：2
> 
> 时间：2012-12-10T07:51:42.343
> 
> 标签：python-2.7

我是 python 的新学习者，当我尝试重复指南中提供的示例时会出现一些问题。这个例子是关于推荐算法的。此示例试图实现一个项目列表，该列表存储对特定项目进行评分的用户。这是代码（python 2.7）

```
def UserSimilarity(train):
    #build inverse table for item_users
    item_users=dict()
    for u,items in train.items():
        for i in items.keys():
            if i not in item_users:
                item_users[i]=set()              
            item_users[i].add(u)

    #calculate co-rated items between users
    C=dict()
    N=dict()
    for i, users in item_users.items():
        print i,users
        #print N[u]
        for u in users:
            N[u]=N[u]+1
            print N[u]
            for v in users:
                print C[u][v]
                if u==v:
                    continue
                C[u][v]=C[u][v]+1

    #calculate finial similarity matrix W
    W=dict()
    for u, related_users in C.items():
        for v, cuv in related_users.items():
            W[u][v]=cuv/math.sqrt(N[u]*N[v])
    return W 
```

ps: 'train' 的数据格式是字典之类的`{UserId1:{ItemId1:Ratings1,ItemId2,Rating2,...},...}`

我遇到的问题是

```
Traceback (most recent call last):
  File "D:\Users\Administrator\workspace\GroupLens\src\test3.py", line 82, in <module>
    UserSimilarity(train_dic)
  File "D:\Users\Administrator\workspace\GroupLens\src\test3.py", line 66, in UserSimilarity
    N[u]=N[u]+1
KeyError: '3' 
```

我不知道如何改进它，希望有人能帮助我！非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:07:40.703

主要问题是您正在定义一个新字典 ( `N = dict()`)，然后遍历您的`users`，尝试根据给定用户创建字典键。那部分很好，但是当你这样做时会出现问题：

```
N[u]=N[u]+1 
```

为字典分配一个值很好，但请看右侧 - 您正在尝试分配`N[u]`的值`N[u] + 1`，`N[u]`但该值尚不存在（因此出现错误）。我不是 100% 确定总体目标是什么（所以这可能会被误导），但如果您的目标是根据用户出现的次数增加一个数字，您可以使用 a `defaultdict`，它是使用类型创建的一个论点（这里是一个`int`）。这意味着如果找不到密钥（如上面的错误），默认值基于您声明的类型（此处`0`）：

```
In [1]: from collections import defaultdict

In [2]: N = defaultdict(int)

In [3]: users = [1, 2, 3, 2, 1, 2]

In [4]: for u in users:
   ...:     N[u] += 1
   ...:     
   ...:     

In [5]: N
Out[5]: defaultdict(<type 'int'>, {1: 2, 2: 3, 3: 1}) 
```

或者，您可以使用普通字典，但使用该`get`方法，如果找到则返回一个值，但如果没有则返回一个默认值（您可以自己指定的默认值）：

```
In [1]: N = dict()

In [2]: users = [1, 2, 3, 2, 1, 2]

In [3]: for u in users:
   ...:     N[u] = N.get(u, 0) + 1
   ...:     
   ...:     

In [4]: N
Out[4]: {1: 2, 2: 3, 3: 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:49:49.030

非常感谢！是的，问题是我没有为 N[u] 分配初始值。你的回答很有帮助，我从中学到了很多！再次感谢您的及时帮助！以下是修改成功版~

# 修改版

```
def UserSimilarity(train):
    #build inverse table for item_users
    item_users=dict()
    for u,items in train.items():
        for i in items.keys():
            if i not in item_users:
                item_users[i]=set()              
            item_users[i].add(u)

    #calculate co-rated items between users
    C=dict()
    N=dict()
    for i, users in item_users.items():
        for u in users:
            if u in N.keys():
                N[u] +=1
            else:
                N[u]=0                

            for v in users:
                if u==v:
                    continue
                elif u in C.keys():
                    if v in C[u].keys():
                        C[u][v] +=1
                    else:
                        C[u][v] =1
                else:
                    C[u]=dict({v:1})

    #calculate final similarity matrix W
    W=dict()
    for u, related_users in C.items():
        W[u]=dict()
        for v, cuv in related_users.items():
            W[u][v] = cuv/math.sqrt(N[u]*N[v]) 
```

# c++ - 从 c 或 c++ 程序运行 ruby 脚本

> ID：13796922
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:51:46.627
> 
> 标签：c++, c, ruby

如何在 ac 或 c++ 程序中运行/执行 ruby​​ 脚本？而不是在终端中输入`irb`然后`ruby rubyfile.rb`运行它。

通常，当我想使用命令“flash”运行/执行生成文件时，我会这样做：

```
#include <stdlib.h>

system("make flash"); 
```

顺便说一句，我正在使用mac

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:13:25.383

您可以使用 exec 功能组的功能。

```
#include <unistd.h>
exec..()  #exec function group 
```

你可以输入

```
man 3 exec 
```

在终端中，为您提供帮助。

# java - 如何从数组中获取唯一值

> ID：13796928
> 
> 赞同：20
> 
> 时间：2012-12-10T07:52:56.883
> 
> 标签：java, arrays

我有一个数组，我想从中删除重复项。

```
for(int data1=startpos;data1<=lastrow;data1++) {
    String movie_soundtrk=cells.getCell(data1,Mmovie_sndtrk_cl).getValue().toString();
    al.add(movie_soundtrk);
}

String commaSeparated=al.toString();
String [] items = commaSeparated.split(",");
String[] trimmedArray = new String[items.length];
for (int i = 0; i < items.length; i++) {
    trimmedArray[i] = items[i].trim();
}

Set<String> set = new HashSet<String>();
Collections.addAll(set, trimmedArray);

System.out.println(set); 
```

但这并没有给我数组中的唯一值。

我的数组：- **{English, French, Japanese, Russian, Chinese Subtitles,English, French, Japanese, Russian, Chinese Subtitles}**

输出：- [日文、俄文、法文、中文字幕]、中文字幕、[英文、英文]

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-10T08:15:30.937

您可以在 java 7 中的一行中做到这一点：

```
String[] unique = new HashSet<String>(Arrays.asList(array)).toArray(new String[0]); 
```

在 java 8 中更短更简单：

```
String[] unique = Arrays.stream(array).distinct().toArray(String[]::new); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-27T08:43:50.887

HashSet 将完成这项工作。

你可以试试这个：

```
List<String> newList = new ArrayList<String>(new HashSet<String>(oldList)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-17T03:30:06.427

如果您不想使用 Hashset 或上面提到的 Java8 中的新方法，您可以编写此代码，您只需要首先对数组进行排序，以便相似的值彼此相邻，然后计算相邻单元格中不同对的数量.

```
 public static int solution(int[] A) {
    int count = 1;
    Arrays.sort(A);
    for (int i = 1; i < A.length - 1; i++) {
        if (A[i] != A[i + 1]) {
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-27T18:11:01.053

使用 Java 8 的 Stream API，这是一个具有通用 Array 类型的解决方案：

```
public static <T> T[] makeUnique(T... values)
{
    return Arrays.stream(values).distinct().toArray(new IntFunction<T[]>()
    {

        @Override
        public T[] apply(int length)
        {
            return (T[]) Array.newInstance(values.getClass().getComponentType(), length);
        }

    });
} 
```

它适用于任何 Object 类型的数组，但不适用于原始数组。

对于原始数组，它看起来像这样：

```
public static int[] makeUnique(int... values)
{
    return Arrays.stream(values).distinct().toArray();
} 
```

最后是一个小单元测试：

```
@Test
public void testMakeUnique()
{
    assertArrayEquals(new String[] { "a", "b", "c" }, makeUnique("a", "b", "c", "b", "a"));
    assertArrayEquals(new Object[] { "a", "b", "c" }, makeUnique(new Object[] { "a", "b", "c", "b", "a" }));
    assertArrayEquals(new Integer[] { 1, 2, 3, 4, 5 }, makeUnique(new Integer[] { 1, 2, 2, 3, 3, 3, 1, 4, 5, 5, 5, 1 }));
    assertArrayEquals(new int[] { 1, 2, 3, 4, 5 }, makeUnique(new int[] { 1, 2, 2, 3, 3, 3, 1, 4, 5, 5, 5, 1 }));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T08:07:36.287

你可以得到两套，一套有所有的字幕，另一套有重复的

```
String[] trimmedArray = new String[items.length];
Set<String> subtitles = new HashSet<String>();
Set<String> duplicatedSubtitles = new HashSet<String>();

foreach(String subtitle : trimmedArray){
    subtitle = subtitle.trim();
    if(subtitles.contains(subtitle)){
        duplicatedSubtitles.add(subtitle);
    }
    subtitles.add(subtitle);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T08:09:41.573

试试这个

```
Set<String> set = new HashSet<String>(); 
```

打电话给这个

```
set.addAll(trimmedArray); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T08:12:34.640

为什么先将项目添加到数组中，然后将其转换为字符串？只需遍历 tha 数组并将它们复制到 Set。然后打印新创建的包含唯一值的集合。

```
Set<String> set = new HashSet<String>();
for (int i = 0; i < al.length; i++) {
    set.add(al[i]);
}

for (String str : set) {
    System.out.println(str);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-07T13:43:05.437

此代码将从数组中计算不同的元素，然后找到它们的出现。并计算百分比并将其保存到 hashmap。

```
int _occurrence = 0;
        String[] _fruits = new String[] {"apple","apple","banana","mango","orange","orange","mango","mango","banana","banana","banana","banana","banana"};
        List<String> _initialList = Arrays.asList(_fruits);
        Set<String> treesetList = new TreeSet<String>(_initialList);
        String[] _distinct =  (String[]) treesetList.toArray(new String[0]);

        HashMap<String,String> _map = new HashMap<String,String>();
        int _totalElement = _fruits.length;
        for(int x=0;x<_distinct.length;x++){
            for(int i=0;i<_fruits.length;i++){
                if(_distinct[x].equals(_fruits[i])){
                    ++_occurrence;
                }
            }
            double _calPercentage = Math.round((((double)_occurrence/(double)_totalElement)*100));
            _map.put(_distinct[x], String.valueOf(_calPercentage+"%"));
            _occurrence = 0;
        }
        System.out.println(_map); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-01T11:09:22.377

让我们看看如何从数组中找到不同的值。

```
 public class Distinct  {
        public static void main(String args[]) {
             int num[]={1,4,3,2,6,7,4,2,1,2,8,6,7};
                for(int i=0; i<num.length; i++){
                    boolean isdistinct = true;
                    for(int j=0; j<i; j++){
                        if(num[i] == num[j]){
                            isdistinct =false;
                            break;
                        }
                   }
                    if(isdistinct){
                        System.out.print(num[i]+" ");
                    }
               }
           }
     } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-21T02:50:32.980

如果您的阵列满足这两个条件 - ：

1.  只允许重复和单个值（不允许三次或更多）

2.  数组中应该只有一个唯一值

    ```
     // Use Bitwise 'exclusive or' operator to find unique value 
     int result = array[0];
     for (int i = 1; i < array.length; i++) {
         result  ^= array[i];
     }
     System.out.println(result); 
    ```

    } }

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-05T17:56:19.043

```
public static int[] findAndReturnUniqueIntArray(int[] arr) {
    int[] distinctElements = {};
    int newArrLength = distinctElements.length;
    for (int i = 0; i < arr.length; i++) {
        boolean exists = false;
        if (distinctElements.length == 0) {
            distinctElements = new int[1];
            distinctElements[newArrLength] = arr[i];
            newArrLength++;
        }

        else {
            for (int j = 0; j < distinctElements.length; j++) {
                if (arr[i] == distinctElements[j]) {
                    exists = true;
                    break;
                }
            }
            if (exists == false) {
                distinctElements = Arrays.copyOf(distinctElements, distinctElements.length+1);
                distinctElements[distinctElements.length-1] = arr[i];
                newArrLength++;
                exists = false;
            }
        }
    }
    return distinctElements;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-23T22:14:09.287

```
int arr[] = {1,1,2,2,3,3,4,5,5,6}; 
for(int i=0; i<arr.length; i++) {
int count = 0;
    for(int j=0; j<arr.length; j++) {
        if ((arr[i] == arr[j]) && (i!=j)) {
            count++ ;
        }
    }
        if(count==0) {
            System.out.println(arr[i]);
        }
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-02-28T10:05:09.553

在 python 中，您可以使用 Set。

```
s = Set()
data_list = [1,2,3,4]
s.update(data_list) 
```

# asp.net-mvc - MVC4：添加和删除项目到列表

> ID：13796929
> 
> 赞同：0
> 
> 时间：2012-12-10T07:53:08.997
> 
> 标签：asp.net-mvc, razor

我在列表集合中添加和删除项目时遇到了一些麻烦。我使用 MVC 4，剃刀。

找到了一些例子，但它基于jquery和javascript - MVC不能单独做吗？我想添加建筑物和建筑物的一些楼层 - 并再次删除项目。

房子.cs

```
public class House
{
    public House()
    {
        Buildings = new List<HouseBuilding>();
    }

    public List<HouseBuilding> Buildings { get; set; }
    public String Address { get; set; }
    public String RoofType { get; set; }
} 
```

房屋建筑.cs

```
public class HouseBuilding
{
    public HouseBuilding()
    {
        Floors = new List<HouseBuildingFloor>();
    }

    public List<HouseBuildingFloor> Floors { get; set; }
    public Int32 BuildingNo { get; set; }
    public Int32 SquareMeters { get; set; }

    public Boolean Deleted { get; set; }
    public String DeletedClass
    {
        get
        {
            if (Deleted)
            {
                return "containerHidden";
            }
            else
            {
                return "containerVisible";
            }
        }
    }
} 
```

HouseBuildingFloor.cs

```
public class HouseBuilding
{
    public HouseBuilding()
    {
        Floors = new List<HouseBuildingFloor>();
    }

    public List<HouseBuildingFloor> Floors { get; set; }
    public Int32 BuildingNo { get; set; }
    public Int32 SquareMeters { get; set; }

    public Boolean Deleted { get; set; }
    public String DeletedClass
    {
        get
        {
            if (Deleted)
            {
                return "containerHidden";
            }
            else
            {
                return "containerVisible";
            }
        }
    }
} 
```

# android - 移动网站只能在横向模式下查看，而不是在 Ipad 和平板电脑中以纵向模式查看

> ID：13796930
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:53:17.823
> 
> 标签：android, iphone, html

> **可能重复：**
> [防止 iOS Safari 中的方向更改](https://stackoverflow.com/questions/5298467/prevent-orientation-change-in-ios-safari)

我有一个 HTML 5 网站，其中包含适用于 iPhone、iPad 和 Android 平板电脑的 C# 代码，只能在横向模式下查看，而不能在纵向模式下查看。
如果用户将任何设备的方向更改为纵向模式，即使这样，网站也应该只处于横向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:16:38.533

如果没有外部帮助应用程序，则无法从 Web 浏览器更改或冻结设备方向。锁定装置的整个想法似乎需要重新考虑和重新设计。这是您可以使用的一种方法。

我认为这不是对您的网站重要的设备方向，而是其内容中的横向设计。对于此要求，您应该将整个站点内容放入一个容器中，该容器必须始终缩放以填充浏览器窗口 ( `width:100%`) 并保持其高度与宽度的所需纵横比。

在横向的设备方向中，您的站点将照常运行。在纵向模式下，如果垂直对齐容器，内容将按比例缩小到当前宽度，在浏览器窗口的顶部和底部有黑色区域（很像在 4:3 屏幕上观看 16:9 电影时）。

如果您可以负担得起您的内容在窗口顶部对齐（下方有较大的黑色区域），您可以通过指定元视口将整个缩放过程​​委托给浏览器本身：

```
<meta name="viewport" content="width=device-width"> 
```

如果它不适合您的需求，那么如果您提供有关站点细节的更多信息将会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:57:28.967

您不能在 WebView 内旋转您的网站，因此您需要在横向模式下锁定当前视图旋转。这样，此页面上的所有内容都将是横向的，包括您的网站。我认为这是唯一的解决方案。

# tree - 选中/取消选中节点后，所选 ExtJs4 树节点的背景色消失。怎么带回来？

> ID：13796931
> 
> 赞同：1
> 
> 时间：2012-12-10T07:53:37.853
> 
> 标签：tree, extjs4

当用户选中/取消选中树节点时，它会丢失它的背景色。现在仍然被选中。但是用户看不到它。我们怎样才能带回选定的背景颜色类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:21:10.527

这实际上是 Ext 4.1.1 中的一个错误 - 据说它已在 4.1.2 中修复，但尚未公开。

为了临时修复，我将 view/Table.js 中的第 724-735 行更改为以下内容：

```
if (oldRowDom.mergeAttributes) {
   var tmpCls = oldRowDom.className;
    oldRowDom.mergeAttributes(newRow, true);
} else {
   var tmpCls = oldRowDom.getAttribute('class');
    newAttrs = newRow.attributes;
    attLen = newAttrs.length;
    for (i = 0; i < attLen; i++) {
        attName = newAttrs[i].name;
        if (attName !== 'id') {
            oldRowDom.setAttribute(attName, newAttrs[i].value);
        }
    }
}
if(tmpCls){
    oldRow.addCls(tmpCls);
} 
```

# c# - 如何为 LINQ 查询构建动态 FROM 子句？

> ID：13796941
> 
> 赞同：5
> 
> 时间：2012-12-10T07:54:03.937
> 
> 标签：c#, .net, linq, linq-to-entities, entity-framework-4.1

我有一个标准的 LINQ 查询：

```
var list = from x in SomeDataContext.ViewName
           where //Rest of where clause
           select x; 
```

我想知道是否可以构建动态 LINQ 查询，以便我可以`SomeDataContext.ViewName`在运行时更改。

我有大约 5 个不同的视图，所有视图都有执行 where 子句所需的基本列，但其他每个视图都有一些不同的列名。

那么是否可以构建查询以便我可以在运行时在需要时使用不同的上下文？

例子：

```
public void SomeMethod()
{
    var listA = GetList("DataContext.ViewA");
    var listB = GetList("DataContext.ViewB");
    var listC = GetList("DataContext.ViewC");
}

public List<EntityObject> GetList(string dataContextName)
{
    return (from x in /*HERE I WANT TO USE THE dataContextName*/
           where //Rest of where clause
           select x).ToList();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:04:38.983

您可以使用表达式树来构建动态 LINQ 查询。这是一个示例：http: [//msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

另一种方法是使用动态 LINQ 库： [http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

这两种方法都在这里说明：http: [//www.codeproject.com/Articles/231706/Dynamic-query-with-Linq](http://www.codeproject.com/Articles/231706/Dynamic-query-with-Linq)

此示例中的谓词生成器使用表达式树方法。

一般来说，动态 LINQ 更容易实现，但表达式树更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T08:13:55.220

只需添加另一层间接：

```
public void SomeMethod()
{
    var listA = GetList("DataContext.ViewA");
    var listB = GetList("DataContext.ViewB");
    var listC = GetList("DataContext.ViewC");
}

public List<EntityObject> GetList(string dataContextName)
{
    return (from x in GetSpecificSource(dataContextName)
           where //Rest of where clause
           select x).ToList();
}

public IEnumerable<MyType> GetSpecificSource(string dataContextName)
// Or: public IQueryable<MyType> GetSpecificSource(string dataContextName)
{
    // ToDo: Return the correct source depending on the name. E.g.:
    switch(dataContextName)
    {
        case "DataContext.ViewA":
            return DataContext.ViewA;
        case "DataContext.ViewB":
            return DataContext.ViewB;
        case "DataContext.ViewC":
            return DataContext.ViewC;
    }
} 
```

### 更新如何使用反射

从具有所需名称的字段中检索值：

```
var fieldName = "ViewA";
var fieldFound = type.GetField(fieldName, BindingFlags.Static | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);

if(fieldFound != null)
{
    return fieldFound.GetValue(instance);
} 
```

从具有所需名称的属性中检索值：

```
var propertyName = "ViewA";
var propertyFound = type.GetProperty(propertyName, BindingFlags.Static | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);

if(propertyFound != null)
{
    return propertyFound.GetValue(instance, null);
} 
```

从具有所需名称的方法中检索值：

```
var methodName = "ViewA";
var methodFound = type.GetMethod(methodName, BindingFlags.Static | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);

if(methodFound != null)
   && methodFound.GetParameters().Length == 0)
{
    return methodFound.Invoke(instance, null);
} 
```

到目前为止，这些只是一些简单的例子。反思开辟了一个全新的问题和问题包。只需从上面的示例开始，检查它是否满足您的需求。否则，只需返回一个新问题。;-)

# linux - 系统挂起可能与“时钟源 tsc 不稳定”有关？

> ID：13796944
> 
> 赞同：0
> 
> 时间：2012-12-10T07:54:22.080
> 
> 标签：linux, linux-kernel

我们有六台服务器在运行几天后随机挂起。检查消息日志我观察到他们都有“clocksource tsc不稳定”然后“时间：acpi_pm clocksource已安装”。所有这些消息都发生在我们的一个应用程序调整系统时间的时刻，该应用程序偶尔会保持服务器时间与远程系统同步。在每种情况下，服务器都会在安装“acpi_am”时钟源后的几个小时内挂起。

我们使用 stime() 函数直接设置系统时间。

我是这种调试的新手，但我试图通过阅读 tsc.c 源代码来了解它。我们的内核版本是 2.6.23.8，cpu 是 Intel Core 2 Quad Q9400。

这是内核错误吗？还是 acpi_pm 时钟源有问题？

编辑 1：在 git log 搜索当前 Linux 内核树中与“clocksource”相关的所有新更改之后，结果发现关于时钟源的更改数量巨大。这看起来很难找到可能适用于我的问题的现有修复程序。

编辑 2：看起来我没有 HPET

```
cat /sys/devices/system/clocksource/clocksource0/available_clocksource  
tsc acpi_pm jiffies 
```

编辑 3：谢谢@thkala。“挂起”的描述：我仍然可以 ping 服务器。使用 telnet 我仍然可以探测到 21、80 等公共端口仍然打开。但是 SSH、VNC 会“挂起”（服务器没有响应）。将监视器连接到服务器，可以用鼠标光标看到 GUI，但屏幕只是冻结在同一画面上。连接usb光电鼠标到服务器，红灯闪烁一次，完全变暗。连接usb键盘，caplock numlock全部不亮。

编辑4：至于证据。@thkala 真的有一个很好的观点。在强制它们关闭并重新启动后，我检查了所有 5 台服务器的消息“挂起”问题，除了“clocksource tsc 不稳定”之外没有其他异常消息。“tsc”日志在特定的引导会话期间发生一次，并且在每种情况下，挂起都发生在安装“acpi_pm”时钟源之后。一些服务器运行了很多~16 天，在安装“acpi_pm”后的 1 到 13 小时内，服务器挂起。其他服务器没有显示此消息并且没有挂起..您是对的，这不是决定性的，但我一直在根据猜测朝这个方向进行挖掘..

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:54:58.833

*（我不太喜欢通过水晶球进行调试，但我会试一试......）*

几点注意事项：

1.  您没有在问题的上下文中指定*“挂起”的确切含义。*内核是否完全停止 - 还是只是您的应用程序？它会达到 100% CPU 并留在那里吗？它对任何刺激都有反应吗？出现问题时是否有任何相关的控制台消息？

2.  你没有提到你是如何最终将时钟和计时系统作为你的嫌疑人的—— *“在几个小时内”*并不是完全可靠的证据。您是否排除了硬件问题（包括电源波动）？你还排除了什么，为什么？

3.  不稳定的时钟源比你想象的更常见——来自我自己的系统：

    ```
    kernel: Marking TSC unstable due to TSC halts in idle 
    ```

4.  您正在使用一个非常旧的内核 - 有几个与调整时间时内核锁定相关的修复，例如现在著名的[2012 年 6 月 30 日闰秒问题](http://www.novell.com/support/kb/doc.php?id=7010351)。

5.  您似乎患有[NIH 综合症](http://en.wikipedia.org/wiki/Not_invented_here)- 使用自定义应用程序进行时间同步而不是[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)听起来像是灾难的秘诀......

# c# - 对 Axis2 Web 服务的第二次请求操作超时错误

> ID：13796945
> 
> 赞同：0
> 
> 时间：2012-12-10T07:54:25.153
> 
> 标签：c#, axis2

我在 Web 逻辑服务器中部署了一个 Axis2 Web 服务。我的应用程序使用 WCF（CustomBinding、ChannelFActory 和 WSDL）与 Web 服务建立连接。

```
MyBinding mybinding= new MyBinding();
Binding binding = mybinding.GetCustomBinding();
binding.SendTimeout = new TimeSpan(0, 5, 0);
EndpointAddress serviceAddress = new EndpointAddress(url);
myChannelFactory = new ChannelFactory<MyServicePortType>(binding, serviceAddress); 
```

我的 C#.net 应用程序在线程中每 10 秒 ping 一次 Web 服务以获取一些信息。同时，我正在使用 HttWebRequest 在单独的线程中分段从服务器下载一些文件（每个分段一个线程）。

当我同时启动上述两项时，我第一次收到 Web 服务请求的响应，但是从第二次开始，我在访问 Web 服务方法和文件下载时遇到超时异常，1 或 2 个段已下载，对于其他人，它会引发超时异常。

但是当我只单独运行下载而没有 ping 时，我没有收到任何超时错误。单独 Ping 也可以正常工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:37:19.030

通过设置此属性解决了它：System.Net.ServicePointManager.DefaultConnectionLimit=100，其默认值为 2。

请参阅以下链接：

[最大并发 HttpWebRequest 数](https://stackoverflow.com/questions/1361771/max-number-of-concurrent-httpwebrequests)

[http://www.neowin.net/forum/topic/874834-c%23-webrequest-limiting-concurrent-connections](http://www.neowin.net/forum/topic/874834-c%23-webrequest-limiting-concurrent-connections)

# php - 如何从教义 1 升级到教义 2？

> ID：13796948
> 
> 赞同：1
> 
> 时间：2012-12-10T07:54:28.773
> 
> 标签：php, zend-framework, doctrine-orm, doctrine-1.2

我将 Doctrine 1 与 Zend 框架一起使用，我必须从 Doctrine 1 升级到 Doctrine 2 才能使用数据映射器而不是活动记录设计模式。

无论如何或有指示去做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:41:28.923

似乎有一项任务将旧的学说 1 模式转换为带注释的 php 类：

```
doctrine orm:convert-d1-schema 
```

我会让你阅读这个关于如何做到这一点的[简短教程。](https://dzone.com/articles/doctrine-1-doctrine-2)

基本上：

*   您需要将架构转换为带注释的 php 类（使用上面的命令）
*   在应用程序中转换文件以使用数据映射器

# c++ - 使用 C++ 导航 XAML 页面

> ID：13796949
> 
> 赞同：0
> 
> 时间：2012-12-10T07:54:31.707
> 
> 标签：c++, visual-c++, c++11, windows-runtime, c++-cx

我正在做 Windows Store App，它有 3 页。

1.  主页
2.  第 1 页
3.  第2页

主页在 App.xaml.cpp 中调用

```
 void App::OnLaunched(Windows::ApplicationModel::Activation::
                      LaunchActivatedEventArgs^ args)
 {

 } 
```

我在主页上有一个名为“Next”的按钮，在这个按钮的单击事件上，我想转到下一页，即第 1 页等等。我正在使用这个

```
 this->Frame->Navigate(__typeof(Page1)); 
```

但我得到如下编译时错误

错误 C2061：语法错误：标识符“框架”第 1
页：非法使用此类型作为表达式

我已经添加了

```
using namespace Platform;    
using namespace Windows::Foundation;    
using namespace Windows::Foundation::Collections;    
using namespace Windows::UI::Xaml;    
using namespace Windows::UI::Xaml::Controls;    
using namespace Windows::UI::Xaml::Controls::Primitives;    
using namespace Windows::UI::Xaml::Data;    
using namespace Windows::UI::Xaml::Input;    
using namespace Windows::UI::Xaml::Media;    
using namespace Windows::UI::Xaml::Navigation;    
using namespace Windows::UI::Xaml::Interop; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:46:42.010

得到了我们必须以这种方式使用它的解决方案

this->Frame->Navigate(TypeName(NameCamera::typeid));

# javascript - JavaScript：每年几周

> ID：13796950
> 
> 赞同：2
> 
> 时间：2012-12-10T07:54:36.267
> 
> 标签：javascript, datetime, calendar, week-number

在javascript中，我怎样才能找出给定年份有多少周？从 year-dec-31 获取 weeknumber 将失败，因为这可能导致第 1 周。

这个问题[计算给定年份中的周数可以](https://stackoverflow.com/questions/8723862/calculate-number-of-weeks-in-a-given-year)回答它，但是在 JS 中是否有任何巧妙的计算方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-30T17:17:45.010

For the ISO 8601 Standard Weeks

```
function getISOWeeks(y) {
  var d,
    isLeap;

  d = new Date(y, 0, 1);
  isLeap = new Date(y, 1, 29).getMonth() === 1;

  //check for a Jan 1 that's a Thursday or a leap year that has a 
  //Wednesday jan 1\. Otherwise it's 52
  return d.getDay() === 4 || isLeap && d.getDay() === 3 ? 53 : 52
}
console.log(getISOWeeks(2019))
console.log(getISOWeeks(2020))
console.log(getISOWeeks(2021))
```

I put this together from the two following posts.

[Calculating the number of weeks in a year with Ruby](https://stackoverflow.com/questions/7952011/calculating-the-number-of-weeks-in-a-year-with-ruby)

[javascript to find leap year](https://stackoverflow.com/questions/8175521/javascript-to-find-leap-year)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:53:27.427

这应该这样做=）

```
function getWeeks(d) {
 var first = new Date(d.getFullYear(),0,1);
 var dayms = 1000 * 60 * 60 * 24;
 var numday = ((d - first)/dayms)
 var weeks = Math.ceil((numday + first.getDay()+1) / 7) ; 
 return weeks

}

console.log(getWeeks(new Date("31 Dec 2012"))) // 53 
```

*   这将首先获得您想要获得的第一个 Jan 的 Weeks of
*   然后从给定的日期中减去第一个 Jan （结果为自那天以来的毫秒）
*   除以 86400000 得到天数
*   添加从一月的第一个星期天开始的天数
*   全部除以 7
*   无论闰年如何，这都应该有效，因为它需要毫秒

如果您想坚持一周中第一年的[Iso 8601 周编号](http://en.wikipedia.org/wiki/ISO_8601#Week_dates)

*   包含今年第一个星期四的那一周（正式的 ISO 定义），
*   有 1 月 4 日的那一周，
*   第一周有大部分（四天或更多天）在起始年，以及
*   从 12 月 29 日至 1 月 4 日期间的星期一开始的一周。

你可以稍微调整一下

```
function getIsoWeeks(d) {
 var first = new Date(d.getFullYear(),0,4);
 var dayms = 1000 * 60 * 60 * 24;
 var numday = ((d - first)/dayms)
 var weeks = Math.ceil((numday + first.getDay()+1) / 7) ; 
 return weeks   
}

console.log(getWeeks(new Date("31 Dec 2016"))) // 53
console.log(getIsoWeeks(new Date("31 Dec 2016")) //52 
```

*您当然可以缩短代码并将它们全部压缩在一起，但是为了便于阅读，我声明了使用的变量，例如 dayms*

你也可以看看这个[JSBin](http://jsbin.com/ugesex/1/edit)例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T10:51:42.477

对于 ISO-8601 年：

方法#1：

```
function FunctionP(y) {
    return (y + Math.floor(y/4) - Math.floor(y/100) + Math.floor(y/400)) % 7;
}

function WeekCount(y) {
    var additionalWeek = (FunctionP(y) == 4 || FunctionP(y-1) == 3) ? 1 : 0;
    return weekCount = 52 + additionalWeek;
} 
```

[方法 #2：来自https://www.w3resource.com/javascript-exercises/javascript-date-exercise-24.php](https://www.w3resource.com/javascript-exercises/javascript-date-exercise-24.php)的 GetISO8601Week 原型的逻辑

```
function GetMaxWeekCountOfISOYear(yyyy) {
  var dec31YYYY = (new Date(yyyy, 11, 31));
  var dec31Day = dec31YYYY.getDay();

  return dec31Day >= 1 && dec31Day <= 3 ?
    Number(GetSunday(dec31YYYY).GetISO8601Week()) :
    Number(dec31YYYY.GetISO8601Week());
}

Date.prototype.GetISO8601Week = function() {
  var target = new Date(this.valueOf());
  var dayNr = (this.getDay() + 6) % 7;
  target.setDate(target.getDate() - dayNr + 3);
  var firstThursday = target.valueOf();
  target.setMonth(0, 1);
  if (target.getDay() != 4) {
    target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);
  }
  return 1 + Math.ceil((firstThursday - target) / 604800000);
};

function GetSunday(requestDate) {
  requestDate = new Date(requestDate.setHours(0, 0, 0, 0));
  var day = requestDate.getDay(),
    diff = requestDate.getDate() - day;
  return new Date(requestDate.setDate(diff));
} 
```

# javascript - Javascript中的正则表达式匹配函数

> ID：13796952
> 
> 赞同：0
> 
> 时间：2012-12-10T07:54:55.640
> 
> 标签：javascript, jquery, regex

我正在使用积极的前瞻正则表达式来获取匹配的字符串，但它`Syntax error in regular expression`在 IE8 中给了我我做错了什么。我想匹配第一次出现。

匹配输入

```
<IMG title="Configuration older than 90 days" alt=true src="http://indwdev:6130/include/images/expired.png"><IMG title="Converted configuration" alt=true src="http://indwdev:6130/include/images/convert.png"> 
```

我的正则表达式`str.match(/(?<=Converted configuration" alt=)[\w]+(?=)/)`

这是一个[jsfiddle 链接](http://jsfiddle.net/pT4d4/2/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:08:05.983

Javascript 在其正则表达式中不支持积极的后视。您可以使用

```
str.match(/Converted configuration" alt=([\w]+)/)[1] 
```

# ios - UIImageView 中的图像拉伸

> ID：13796953
> 
> 赞同：1
> 
> 时间：2012-12-10T07:54:56.867
> 
> 标签：ios, xcode, uiimageview, uiimage

我在stackoverflow上看到了针对同一问题的不同帖子，但没有一个对我有用，因此我发布了我的查询

我正在开发一个应用程序，我从图像库中挑选图像并将其放置在我的`UIImageView`实例上

```
drawImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"abc.png"]];
[drawImage setContentMode:UIViewContentModeScaleToFill];
drawImage.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
drawImage.clipsToBounds = YES;

[drawImage setFrame:self.view.frame];
NSLog(@"%@",NSStringFromCGSize(drawImage.frame.size));
[self.view addSubview:drawImage]; 
```

这是图片库的代码

```
imagePickerObj.sourceType=UIImagePickerControllerSourceTypeSavedPhotosAlbum;
imagePickerObj.allowsEditing=YES; 
```

当我从图库中选择图像时，我正在使用以下代码

```
UIImage *img = [info objectForKey:UIImagePickerControllerEditedImage];
NSLog(@" B4 crop Image size %@",NSStringFromCGSize(img.size));
NSLog(@" B4 crop DrawImage size %@",NSStringFromCGSize(drawImage.frame.size));

UIGraphicsBeginImageContext(drawImage.frame.size);
[img drawInRect:CGRectMake(0,0,drawImage.frame.size.width,drawImage.frame.size.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();

NSLog(@"After crop Image size %@",NSStringFromCGSize(newImage.size));
UIGraphicsEndImageContext();

// drawImage.clipsToBounds = YES;
drawImage.image = newImage; 
```

问题是，无论我选择什么图像，它似乎总是从我添加的上述代码中有点拉伸，因为`UIGraphicsBeginImageContext`它减小了图像的宽度和高度，但它仍然显得拉伸。

我什至尝试将图像视图的内容模式更改为`AspectFill`，`AspectFit`但可惜没有运气。

你能指导我在哪里犯错吗？

# c# - “编辑”操作的发布参数始终为空

> ID：13796954
> 
> 赞同：0
> 
> 时间：2012-12-10T07:55:01.953
> 
> 标签：c#, asp.net-mvc

控制器：

```
 public ActionResult Edit(int id)
    {
        SetViewData();
        var rule = _db.AlertRules.Find(id);

        ViewData["rule"] = rule.Feed.Name + " - "
            + rule.Template.Name;
        return View(rule);
    }

    //
    // POST: /AlertRule/Edit/5
    [HttpPost]
    public ActionResult Edit(AlertRule alertrule)
    {
        SetViewData();
        alertrule.UpdateDateTime = DateTime.Now;
        if (ModelState.IsValid)
        {
            _db.Entry(alertrule).State = EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Index");
        }
        else
        {
            TempData["error"] = "Cant update rule({0})"
                + alertrule.Id;
        }

        return View(alertrule);
    }

    private void SetViewData()
    {
            var feeds = new SelectList(_db.Feeds.OrderBy(f => f.Name), "Id", "Name");
            var templates = 
                 new SelectList(_db.AlertRuleTemplates.OrderBy(f => f.Name), "Id", "Name");

            ViewData["templates"] = templates;
            ViewData["feeds"] = feeds;
    } 
```

看法：

```
@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
<fieldset>
    <legend>Edit</legend>
    @Html.HiddenFor(model => model.Id)

    <div class="editor-label">
        @Html.LabelFor(model => model.FeedId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.FeedId, (SelectList)ViewData["feeds"])
        @Html.ValidationMessageFor(model => model.FeedId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.TemplateId)
    </div>

    <div class="editor-field">
        @Html.DropDownListFor(model => model.TemplateId, 
              (SelectList)ViewData["templates"])
        @Html.ValidationMessageFor(model => model.TemplateId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Enable)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Enable)
        @Html.ValidationMessageFor(model => model.Enable)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Alertrule)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Alertrule)
        @Html.ValidationMessageFor(model => model.Alertrule)
    </div>

    <div class="editor-label" style="display: none">
        @Html.LabelFor(model => model.UpdateDateTime)
    </div>
    <div class="editor-field" style="display: none">
        @Html.EditorFor(model => model.UpdateDateTime)
        @Html.ValidationMessageFor(model => model.UpdateDateTime)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

表格数据：

```
Id:33
FeedId:1
TemplateId:1
Enable:false
Alertrule:00000
UpdateDateTime:12/10/2012 3:02:15 PM 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:52:47.800

这是一个常见的问题。您的模型中似乎有一个`Alertrule`属性与您的操作参数名称冲突。所以重命名你的动作参数：

```
[HttpPost]
public ActionResult Edit(AlertRule model) 
```

或者重命名`AlertRule`属性名以避免冲突。

问题是以下属性：

```
Alertrule:00000 
```

由于您的操作参数的调用方式与默认模型绑定器尝试将值绑定`00000`到`alertRule`显然失败的参数的方式相同。

# android - 无法在 gridview 中显示图像（内部存储）

> ID：13796955
> 
> 赞同：0
> 
> 时间：2012-12-10T07:55:26.967
> 
> 标签：android, gridview, android-gridview

我有一些图像存储在内部存储器中。我设法检索图像文件位置并对其进行解码。但我无法让它显示在网格视图中。而且我不确定代码有什么问题，因为目前没有错误。任何意见将不胜感激。

```
 protected void onCreate(Bundle savedInstanceState) 
{   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_tab);
    helper = new DBHelper(this);
    Object[] values = helper.get_contentByEmailID(EMAIL);
    this.arrPath = new String[this.count];
    this.thumbnailsselection = new boolean[this.count];

    Log.i(TAG, "values:" +values);
    Log.i(TAG, "filepath:" +values[0]);
    Log.i(TAG, "filepath:" +values[1]);
    Log.i(TAG, "values:" +values.length);

    if(values.length>0){
        for (int i=0;i<values.length;i++){
            Log.i(TAG, "values[]" +values[i]);
            String bImage = (String) values[i];
            bitmap = new Bitmap [this.count];
            bitmap = decodeFile(bImage);

            Log.i(TAG, "bImage"+i+":" +bImage);
            Log.i(TAG, "bitmap"+i+":" +bitmap);
        }
    }
    else{
        Log.i(TAG, "Unable to locate images");
    }

    imagegrid = (GridView) findViewById(R.id.WebImageGrid);
    imageAdapter = new ImageAdapter();
    imagegrid.setAdapter(imageAdapter);

} 
```

下面是 ImageAdapter 代码。

```
public class ImageAdapter extends BaseAdapter
{
    private Context mContext;       
    Bitmap[] mImageArray;
    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    @Override
    public int getCount() {
        return count;
    }
    public Object getItem(int position)
    {
          return position;
    }
    public long getItemId(int position)
    {
          return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {  
            holder = new ViewHolder();
            convertView = mInflater.inflate(
                    R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.checkbox.setId(position);
        holder.imageview.setId(position);

        holder.imageview.setImageBitmap(bitmap[position]);
        holder.checkbox.setChecked(thumbnailsselection[position]);
        holder.id = position;
        return convertView;
    }
}
class ViewHolder {
    ImageView imageview;
    CheckBox checkbox;
    int id;
}               

public Bitmap[] decodeFile(String filePath) 
{
    System.out.println("filepath in decode file .. "+filePath);
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, o);

    return bitmap;
} 
```

**更新**

```
 Object[] values = helper.get_wbm_synccontentByEmailID(SettingConstant.EMAIL);
    count=values.length;
    this.arrPath = new String[count];
    this.thumbnailsselection = new boolean[count];
    Log.i(TAG, "values:" +values.length);
    String bImage;
    if(count>0){
        bitmap = new Bitmap [count];

        for (int i=0;i<count;i++){
            Log.i(TAG, "values[]" +values[i]);
            bImage = (String) values[i];
            Bitmap newBitmap = decodeFile(bImage);
            this.arrPath[i] = bImage;
            this.bitmap[i] = newBitmap;

        }

    public Bitmap decodeFile(String filePath) 
{
    System.out.println("filepath in decode file .. "+filePath);
    Bitmap bitmapnew = BitmapFactory.decodeFile(filePath);

    return bitmapnew;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:33:57.783

看看这个

`decodeFile(String filePath)`返回未在其中修改的位图。所以我认为位图根本没有改变（只是返回null）。

1.  您正在传递一个文件路径并返回一个位图数组。您将获得一个位图图像并传递与位图数组相同的内容。

2.使用 `bitmap[i] = decodeFile(bImage);`而不是位图=`decodeFile(bImage);`和

3.`return type`改为`decodeFile(String filePath)`简单`bitmap`

4.使用`return BitmapFactory.decodeFile(filePath,o);`而不是位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:05:14.250

我认为你想从 getView 返回的是持有者而不是转换后的视图

# c# - 如何在 RichTextBox 中设置光标从右到左方向

> ID：13796957
> 
> 赞同：1
> 
> 时间：2012-12-10T07:55:32.927
> 
> 标签：c#, cursor, richtextbox, caret, right-to-left

我有一个用希伯来语工作的应用程序。因此书写方向是从右到左。当我打开richtextbox 时，我希望光标指向正确的方向，即从右到左。我该怎么做呢？我想在富文本框的“加载”中执行此操作。

以下代码不符合我的要求：

```
richTxtRtfText.SelectionAlignment = HorizontalAlignment.Right; 
```

提前致谢

任何文字处理器都可以通过按 Alt+Shift 来完成，我可以向 RTB 发送类似的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:59:35.430

如果您使用 Visual Studio 和 Winforms，则富文本框有一个属性，称为 RightToLeft

```
rtx.RightToLeft = RightToLeft.Yes; 
```

# php - 按类别codeigniter 1.7.2获取json事件

> ID：13796958
> 
> 赞同：1
> 
> 时间：2012-12-10T07:55:34.377
> 
> 标签：php, jquery, json, codeigniter

我想按类别 json 获取日历事件。

这是我在控制器中的代码

```
function json_kategori() {
    header("Content-Type: application/json");
    echo $this->MKalender->jsonEventsByKategori();
} 
```

这是我在模型中的代码

```
function jsonEventsByKategori($catid) {
    $this->db->order_by('TanggalMulai', 'desc');
    $this->db->where("IDKategori", $catid);
    $events = $this->db->get('kalender')->result();
    $jsonevents = array();
    foreach ($events as $entry) {
        $jsonevents[] = array(
            'id' => $entry->IDKalender,
            'start' => $entry->TanggalMulai,
            'end' => $entry->TanggalAkhir,
            'title' => $entry->judul,
            'body' => $entry->konten,
            'multi' => 0,
            'allDay' => false,
            'extension_id' => 2
        );
    }
    return json_encode($jsonevents);
} 
```

这是我在视图中的代码 [加载 json 日历事件]

```
$(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    $('#calendar').fullCalendar({
        firstDay:'1',
        theme:true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: '<?= base_url(); ?>kalender/json_kategori'
    });
}); 
```

数据库表名是 kalender 和 kalender_kategori

我的日历 SQL 是

```
CREATE TABLE `kalender`(
`IDKalender` INT(10)UNSIGNED NOT NULL AUTO_INCREMENT,
`IDKategori` INT(11)NOT NULL,
`TanggalMulai` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
`TanggalAkhir` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
`judul` VARCHAR(100)NOT NULL,
`konten` text NOT NULL,
`user` VARCHAR(25)NOT NULL DEFAULT 'anonimous',
PRIMARY KEY(`IDKalender`))ENGINE = MyISAM AUTO_INCREMENT = 3 DEFAULT CHARSET = latin1; 
```

我的 kalender_kategory SQL 是

```
CREATE TABLE `kalender_kategori`(
`IDKategori` TINYINT(11)NOT NULL AUTO_INCREMENT,
`kategori` VARCHAR(60)COLLATE latin1_general_ci NOT NULL DEFAULT '',
`deskripsi` text COLLATE latin1_general_ci NOT NULL,
PRIMARY KEY(`IDKategori`))ENGINE = MyISAM AUTO_INCREMENT = 9 DEFAULT CHARSET = latin1 COLLATE = latin1_general_ci; 
```

如果上面的代码是错误的？如果有的话，哪一部分是错的？如果我想甚至只存在于特定事件类别中。

# java - 锁定 java 同步方法

> ID：13796961
> 
> 赞同：1
> 
> 时间：2012-12-10T07:55:46.560
> 
> 标签：java, multithreading, synchronization, synchronized

我正在尝试使用同步方法编写一个带有线程的 java 程序。但是我无法理解当另一个线程调用 java 中的同步方法时，我如何显示一个线程已经在运行。任何人都可以用简单的例子来解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:01:20.373

这是一个人为的例子，它显示了交错和阻塞过程。在我的机器上打印：

> Thread[Thread-0,5,main] 将调用同步方法
> Thread[Thread-1,5,main] 将调用同步方法
> Thread[Thread-0,5,main] 在同步方法
> Thread [Thread-0,5,main] 正在退出方法
> Thread[Thread-1,5,main] 在同步方法中
> Thread[Thread-1,5,main] 正在退出方法

您可以看到只有一个线程进入同步块，而另一个等待。

```
public class Test1 {

    public static void main(String[] args) throws Exception {
        final Test1 test = new Test1();
        Runnable r = new Runnable() {
            @Override
            public void run() {
                System.out.println(Thread.currentThread() + " is going to call the synchronized method");
                test.method();
            }
        };
        new Thread(r).start();
        new Thread(r).start();
    }

    public synchronized void method() {
        System.out.println(Thread.currentThread() + " is in the synchronized method");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
        }
        System.out.println(Thread.currentThread() + " is exiting the method");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:36:00.270

如果我理解正确，您想在一个线程尝试调用同步方法而另一个线程已经在执行它时打印一条消息。您不能使用同步方法或块来执行此操作，但您可以使用[java.util.concurrent.locks.Lock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)接口来执行此操作。您需要的方法是 tryLock()。你可以这样做：

```
public class Test1 {
    private Lock lock = new ReentrantLock();

    // ...

    public void method() {
        if (lock.tryLock()) {
            try {
                // you successfully acquired the lock, do you logic here
            } finally {
                lock.unlock();
            }                
        } else {
            // lock is hold by another thread
            System.out.println("cannot acquire a lock");
        }
    }
} 
```

如果您愿意，您可以轻松地改进此示例以打印哪个线程准确持有锁。

# asp.net-mvc - ModelState 清除，移除一个数组项，TryValidateModel

> ID：13796962
> 
> 赞同：0
> 
> 时间：2012-12-10T07:55:53.440
> 
> 标签：asp.net-mvc, modelstate

我的模型有一些属性，其中之一是类数组，对于模型和数组类中的某些属性，使用 datannotation 属性。在视图中，用户将某些行填充为数组和其他模型属性，并且可能会删除某些行（arrayProperty），我设置为已删除行状态：删除，并在操作中从数组中删除已删除行，操作步骤是：

1.  在第一次行动中一切正常（验证完成）
2.  模型状态.清除
3.  删除数组中状态为删除的项目
4.  使用 TryValidateModel 验证细化模型

这适用于模型中的所有属性，除了数组属性

**动作代码：**

```
public ActionResult Test(ViewModel model)
{
    ModelState.Clear();        
    model.Array = model.Array.Where(p => p.Status != false).ToArray();

    if(ModelState.IsValid){}
    TryValidateModel(model);

    return View();
} 
```

**班级代码：**

```
public class ViewModel
{
    public TestClass[] Array { get; set; }

    [Required]
    public string Family { get; set; }
}

public class TestClass
{
    [Required]
    public string Name { get; set; }
    public int? Age { get; set; }          
    public bool Status { get; set; }          
} 
```

# c# - Excel 代码模块属性

> ID：13796967
> 
> 赞同：1
> 
> 时间：2012-12-10T07:56:19.497
> 
> 标签：c#, excel, interop, vba

我在尝试从代码 (C#) 中检索代码模块的名称属性时遇到问题。当我 alt+f11 我的 excel 文件时，我有以下内容： Chart1 Sheet2 Sheet3 ThisWorkbook

显示这些属性时，它们具有以下属性（名称）： Chart1 名称：通过率

我想要做的是从 C# 访问属性“名称”。这可能吗？我似乎只能检索“（名称）”。使用互操作 11.0.0.0 (office 2003)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:40:24.643

这将为您提供工作表的名称

```
MessageBox.Show(ws.Name) ; 
```

这将为您提供工作表的代码名称

```
MessageBox.Show(ws.CodeName) ; 
```

**注意**：`ws`上面是您的工作表对象。

# java - ArrayIndexOutOfBoundException - hsqldb？

> ID：13796968
> 
> 赞同：1
> 
> 时间：2012-12-10T07:56:31.447
> 
> 标签：java, database, eclipse, hsqldb, indexoutofboundsexception

我目前正在使用 hsqldb。我的创建语句如下所示：

```
CREATE TABLE Movie
(
    movieId INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
);

CREATE TABLE Playlist(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
);

CREATE TABLE PlaylistMovies(
    mid INTEGER FOREIGN KEY REFERENCES Movie(movieid),
    pid INTEGER FOREIGN KEY REFERENCES Playlist(id),     
    PRIMARY KEY (mid, pid)
);
//my assoziation table which safes the movie ids and playlist ids

alter table playlistmovies
   add constraint fk_plm_playlist
   foreign key (pid, mid) references playlist(id)
   on delete cascade; 
```

当我想做的时候：

```
INSERT INTO PlaylistMovies(MID, PID) VALUES (1,1); 
```

我得到：

![在此处输入图像描述](../Images/800fe8d521527b0dad64e5a12c03c381.png)

但是，数据存在于其他两个表中，因此应该可以引用吗？

这里有什么问题以及如何解决？

**更新：**

我使用的版本：hsqldb-2.2.8

```
java.sql.SQLException: java.lang.ArrayIndexOutOfBoundsException: 1 java.lang.Arr
ayIndexOutOfBoundsException: 1
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
        at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing.executeSQL(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing.access$1000(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing$StatementExecRunnable.run(Unknow
n Source)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:244)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:163)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:151)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
java.sql.SQLException: java.lang.ArrayIndexOutOfBoundsException: 1 java.lang.Arr
ayIndexOutOfBoundsException: 1
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
        at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing.executeSQL(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing.access$1000(Unknown Source)
        at org.hsqldb.util.DatabaseManagerSwing$StatementExecRunnable.run(Unknow
n Source)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:244)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:163)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:151)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

**更新 2：**

好，朋友们，

我尝试了一点，现在我知道当我不创建更改表时，我可以轻松插入字段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:49:22.493

此语句有错误，应被 HSQLDB 拒绝。

```
alter table playlistmovies
add constraint fk_plm_playlist
foreign key (pid, mid) references playlist(id) -- mistake, FK has two columns, PK has one column
on delete cascade; 
```

它被接受，但之后，当您尝试插入值时，原始错误会导致异常（更新：此问题已在 HSQLDB 2.3.0 中修复，它拒绝原始语句）。

您不能在两列上使用 FK 来引用只有一列的 PK

您可以将 ON DELETE CASCADE 添加到原始 CREATE TABLE

```
CREATE TABLE PlaylistMovies(
mid INTEGER FOREIGN KEY REFERENCES Movie(movieid) ON DELETE CASCADE,
pid INTEGER FOREIGN KEY REFERENCES Playlist(id) ON DELETE CASCADE,     
PRIMARY KEY (mid, pid)
); 
```

# java - 在Android中使用Jackson的JSONList解析问题

> ID：13796974
> 
> 赞同：1
> 
> 时间：2012-12-10T07:56:51.787
> 
> 标签：java, android, jackson

我正在尝试使用 Jackson 解析器解析 JSONList。如果列表包含多个元素，则解析工作正常。

```
String json = "{\"students\":[{\"id\":\"1\",\"name\":\"A\"}, {\"id\":\"2\",\"name\":\"B\"}]}"; 
```

如果只有一个元素，那么我们将得到一个只包含一个 json 对象的 json。

```
 String json = "{\"students\":{\"id\":\"1\",\"name\":\"A\"}}"; 
```

当时我收到以下错误

```
 12-10 15:49:01.527: W/System.err(18923): org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token 
```

我正在使用以下代码：

```
 @JsonIgnoreProperties(ignoreUnknown = true)
public class Student {
    @JsonProperty("id")
    public String id;

    @JsonProperty("name")
    public String name;
}

    @JsonIgnoreProperties(ignoreUnknown = true)
public class StudentList {
    @JsonProperty("students")
    ArrayList<Student> students = new ArrayList<Student>();
}

    public class JacksonTest extends Activity {

    StudentList studentList;
    //String json = "{\"students\":[{\"id\":\"1\",\"name\":\"A\"}, {\"id\":\"2\",\"name\":\"B\"}]}";
    String json = "{\"students\":{\"id\":\"1\",\"name\":\"A\"}}";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_jackson_test);

        ObjectMapper objectMapper = new ObjectMapper();
        JsonFactory jf = new JsonFactory();
        try {
            JsonParser jp = jf.createJsonParser(json);
            jp.setFeature(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS,true);
            studentList = objectMapper.readValue(jp, StudentList.class);

            System.out.println("Size :"+studentList.students.size());
        }
        catch (JsonParseException e) {
            e.printStackTrace();
        }
        catch (JsonMappingException e) {
            e.printStackTrace();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }   

} 
```

请帮我解决这个问题。实际上我想解析包含大量列表的非常大的 json。

提前致谢， Sudheesh B

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:00:02.120

类`studentList`应该包含对象而不是 arrayList

```
public class StudentList {
    @JsonProperty("students")
    public Student students;
} 
```

我希望它能解决你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:17:22.043

最后我得到了解决这个问题的解决方案。我为对象映射器添加了以下功能。

objectMapper.configure(Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);

[使用 Jackson ACCEPT_SINGLE_VALUE_AS_ARRAY 从 String 反序列化 ArrayList](https://stackoverflow.com/questions/12774703/deserialize-arraylist-from-string-using-jackson-accept-single-value-as-array)

这帮助我解决了这个问题。

感谢 M Mohsin Naeem & Faizan 的快速回复。

# php - mysql数据库中的法语撇号char？

> ID：13796982
> 
> 赞同：-1
> 
> 时间：2012-12-10T07:57:22.290
> 
> 标签：php, mysql, character-encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:23:02.163

It looks like all you need to do is `echo $row['data'];`, the data is in Windows-1252 and your page's headers are in Windows-1252 as well. No conversion to UTF-8 required.

If you didn't realize your data is in windows-1252, and so have set `encoding="UTF-8"` in your xml, you shoiuld set it to `encoding="Windows-1252"`.

* * *

If you want to use UTF-8, you should first start by setting your connection to UTF-8:

```
mysql_set_charset( "utf8" );
// or $mysqli->set_charset( "utf8" ); 
```

Before you make any queries.

After that you need to fix your http headers:

```
<?php
header( "Content-type: application/xml; charset=utf-8"); 
```

And of course, not call `utf8_decode`. Never call `utf8_decode` or `utf8_encode` unless you *really* know what you're doing. For starters, these functions work on ISO-8859-1->UTF-8 (and vice versa) conversions (the real ISO-8859-1, not the browser "ISO-8859-1" which is actually just Windows-1252) and are not some magic unicode wand.

There are many other things to do if you want to take utf-8 route, but these two will fix your immediate problem.

# android - 如何从活动向小部件发送时间？

> ID：13796987
> 
> 赞同：0
> 
> 时间：2012-12-10T07:57:42.207
> 
> 标签：android, android-widget

我可以制作一个显示祈祷时间的应用程序。我想要它也显示小部件上的时间任何人都可以告诉我我可以制作小部件，现在问题是如何在小部件上发送数据我完全困惑如何在小部件上发送时间？/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:38:54.597

在您的小部件 appwidgetprovider 中编写此代码

```
public void onReceive(Context context, Intent intent) {

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.widget);
    Intent intent = new Intent();
    if (intent.getAction().equals(
            Constants.ACTION_WIDGET_UPDATE_FROM_ACTIVITY)) {
        String widgetText = intent.getExtras().getString(
                Constants.INTENT_EXTRA_WIDGET_TEXT);
        remoteViews.setTextViewText(R.id.word_text, widgetText);
    } else {
        remoteViews.setTextViewText(R.id.word_text, showPrayer);
    }
           `  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T11:45:38.930

试试这个可能对你有帮助

公共无效 onReceive（上下文上下文，意图意图）{

```
RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
        R.layout.widget);
Intent intent = new Intent();
if (intent.getAction().equals(
        Constants.ACTION_WIDGET_UPDATE_FROM_ACTIVITY)) {
    String widgetText = intent.getExtras().getString(
            Constants.INTENT_EXTRA_WIDGET_TEXT);
    remoteViews.setTextViewText(R.id.word_text, widgetText);
} else {
    remoteViews.setTextViewText(R.id.word_text, showPrayer);
}
       `  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:11:44.533

在您的活动中尝试此代码....

```
 if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
                AppWidgetManager appWidgetManager = AppWidgetManager
                        .getInstance(context);
                RemoteViews remoteViews = new RemoteViews(context
                        .getPackageName(), R.layout.widget_layout);

                remoteViews.setTextViewText(R.id.txt_time, ""
                        + YOURTIME);

                appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
                Intent resultValue = new Intent();
                resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                        appWidgetId);
                setResult(RESULT_OK, resultValue);
            } 
```

# php - PEAR Spreadsheet_Excel_Writer insertBitmap() 无法正常工作

> ID：13796992
> 
> 赞同：1
> 
> 时间：2012-12-10T07:58:03.977
> 
> 标签：php, pear

**我必须使用 PEARL Spreadsheet_Excel_Writer**库将图像添加到电子表格中，并且我为此使用**了 insertBitmap()**方法，但是在执行代码后，文件被创建，当打开文件时它会给我以下错误：

> Excel 在“testXls.xls”中发现了不可读的内容。是否要恢复工作簿的内容？……

这就是我在代码中添加图像的方式，

```
$excel = new Spreadsheet_Excel_Writer($saveDirectory);
$sheet =& $excel->addWorksheet('Class I');
$sheet->insertBitmap( 2 , 2 , 'upload_files/1.bmp' , 1 , 1 , 2 , 2 ); 
```

没有 insertBitmap() 方法文件是完美的保存和打开。

任何人都知道为什么会出现这个错误？

# java - 带有while循环的子字符串

> ID：13796993
> 
> 赞同：1
> 
> 时间：2012-12-10T07:58:10.527
> 
> 标签：java

我想从文件中读取文本。每行应拆分为 180 个字符，然后应将每一行添加到表中，但我收到错误消息“字符串索引超出范围 -180”。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class ReadAndWrite {

     public static void main(String[] args) throws IOException {

         BufferedReader read = new BufferedReader (new FileReader("xyz.txt"));

         String line = read.readLine();
         int len = line.length();

         System.out.println(len);

         int chaCount = 0;
         while (chaCount < len) {
             String line2 = line.substring(chaCount, 180);
             System.out.println(line2);
             chaCount += 180;
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:04:18.033

你的 Substring 会像这样工作，

```
first loop: 
Substring(0,180);
second loop;
Substring(180,180);
//Error incoming
third loop
Substring(360,180); 
```

你需要增加你的结尾，否则你会反复收到错误，因为 Startindex 必须低于或等于 Substring 的 endindex

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:04:23.953

尝试这个：

```
line2 = line.substring(chaCount, 180<len-chaCount? 180:len-chaCount); 
```

您尝试从`line`字符串中获取 180 个字符，但在某些时候剩余的字符数会少于 180 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:21:35.753

你有问题

line2 = line.substring(chaCount,180);

```
 System.out.println(line2);

 chaCount = chaCount +180; 
```

第一次，系统得到从 0 到 180 的输出。但是下一次你加上 180 时，输出是空的。但是当它第三次尝试时，就会发生错误。所以不要添加 chaCount 或使用另一个变量来保持该值。

# python - 为什么不能按用户属性查询？

> ID：13796995
> 
> 赞同：2
> 
> 时间：2012-12-10T07:58:32.237
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个应用程序，它用所有者的电子邮件存储实体。我的 models.py 看起来像这样：

```
from google.appengine.ext import db
from google.appengine.api import users

class GenericModel(db.Model):
    '''GenericModel is inherited by other model definitions.'''
    DateAdded = db.DateTimeProperty(auto_now_add = True)
    owner = db.UserProperty()

class CASentry(GenericModel):
    description = db.TextProperty()
    date = db.DateProperty()
    hours = db.FloatProperty()
    location = db.StringProperty() 
```

当我从开发服务器上的交互式控制台运行它时：

```
from google.appengine.ext import db
t = db.GqlQuery('''SELECT * FROM CASentry''').fetch(1)[0]
print t.owner

t = db.GqlQuery('''SELECT * FROM CASentry where owner = 'test@example.com' ''').fetch(1)
print t 
```

我明白了：

```
test@example.com
[] 
```

我觉得期待这样的事情：

```
test@example.com
[<models.CASentry object at 0x123456>] 
```

谁能看到我的代码有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:04:47.910

您应该提供`User`而不是字符串：

```
t = db.GqlQuery("SELECT * FROM CASentry where owner = :owner", owner=User(email="test@example.com")).fetch(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:10:55.533

您可以直接在 GQL 中转换为 User：

```
SELECT * FROM CASentry where owner = USER('test@example.com') 
```

# android - 在设备系统中获取世界系统中矢量“静态”的坐标（android）

> ID：13796999
> 
> 赞同：1
> 
> 时间：2012-12-10T07:58:44.193
> 
> 标签：android, matrix, coordinates

我在 SO 上看到过类似的问题，但没有人回答......我想这是一个非常愚蠢的问题，或者可能是一个愚蠢的错误导致一个毫无意义的问题。我想这更像是一个与数学相关的问题，而不是一个编程问题。无论如何，我已经挣扎了两个星期，所以我希望你能帮助我！

我想使用 M=SensorManager.getRotationMatrix() 在设备系统中查找“静态”向量的坐标（坐标是世界系统中的常量）。当我在 opengl 中使用矩阵时，一切都很顺利，但是当我尝试自己编写一些代码时，我得到了一些我无法理解的值。

例如，我有一个从设备屏幕中心指向北方的向量。让我们称之为y。世界系统中 y 的坐标是 y(0,1,0) 并且它们不会改变。但是，如果我旋转设备，这些坐标值会在设备系统中发生变化，并变为 y'(y1,y2,y3)。我想知道 y1,y2 和 y3。

我尝试了 y' = M*y，但我无法弄清楚我得到的值是什么：它们与我在旋转设备时所期望的任何东西都不匹配。我认为它会旋转设备的 y 矢量（指向相机），使其与地球磁北对齐，并且我得到的坐标将在设备的系统中。这实际上是当我在 opengl.multmatrix 中使用矩阵时发生的情况......矢量旋转并始终指向北方。

我还尝试重新映射旋转矩阵，因为我使用了一个变压器垫，看起来它实际上是指向相机的 x 向量。但是 y' 值也不是我所期望的，我不需要用 opengl 来做。
那么如果我想手动完成opengl的工作，我在理论上缺少什么，而实际上 M*y 是什么？我应该使用 M 转置，因为我真正想要的是改变我表达向量的系统吗？（我也试过了，但又失败了）。欢迎任何详细的回答......谢谢。