# StackOverflow 问答 13652000-13652999

# r - 下载自定义文件时 file.download 出错

> ID：13652001
> 
> 赞同：8
> 
> 时间：2012-11-30T19:42:00.277
> 
> 标签：r, download

我正在尝试从此网址下载 zip 文件：

```
url1 <- http://www.clinicaltrials.gov/ct2/results?cond=%22acne%22&studyxml=true 
```

这是我的代码：

```
tempZip <- tempfile()
download.file(url1, tempZip) 
```

这是我得到的错误：

```
Warning message:
In download.file(url1, tempZip) :
  downloaded length 817445 != reported length 200 
```

有任何想法吗？

编辑：好的，在看到下面 agstudy 的回复后，我发现文件确实正在下载（它似乎也是正确的文件大小）。现在的问题是当我尝试解压缩文件时 - 文件已损坏。

Maciej，我同意使用带有 .zip 扩展名的链接会更好，但是，无法从该网站获取该链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T14:52:47.480

好的，我知道出了什么问题。因为这个 url 末尾没有特别的“.zip”，所以 download.file 函数不知道使用二进制下载。这段代码解决了这个问题：

```
url1 <- http://www.clinicaltrials.gov/ct2/results?cond=%22acne%22&studyxml=true
tempZip <- tempfile()
download.file(url1, tempZip, mode="wb") 
```

如果不指定 mode 参数，下载的 zip 文件将损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:46:49.643

您没有指向该文件的直接链接。R尝试下载网页而不是文件。使用以“.zip”结尾的链接。

`XML`使用或`RCurl`打包从该网页中抓取指向数据集的链接可能很有用。

# objective-c - 在 int 中转换数据（来自模型）

> ID：13652002
> 
> 赞同：0
> 
> 时间：2012-11-30T19:42:10.063
> 
> 标签：objective-c

我有这个模型：

> ```
> @interface Data : NSObject
> @property (nonatomic, assign) NSDate *Start;
> @property (nonatomic, assign) NSDate *End;
> @property (nonatomic, assign) int Days;
> @property (nonatomic, assign) double moneyEuro;
> @property (nonatomic, assign) double moneyUsa;
> @end 
> ```

一个可变数组：

```
@property (strong, nonatomic) NSMutableArray* myArray; 
```

将数据添加到数组中：

```
Data *data =[ [Data alloc] init];
data.Start = startTemp;
data.End = endTemp;
data.Days = daysTemp;
data.moneyEuro = moneyEuroTemp;
data.moneyUsa = moneyUsaTemp;
[self.myArray addObject:data]; 
```

然后我只想提取 int Days 并将它们相加：

```
 Data * daysArr = [self.myArray valueForKeyPath:@"@sum.Days"];
  NSLog(@"days %@", daysArr); 
```

但是 daysArr 是一个 NSString ??? NSLogs 工作正常...

如何将 daysArr 更改为 int（应该是因为 Days are int）？

我试过：

```
Days = [daysArr intValue]; 
```

但我收到错误：没有可见的数据接口声明选择器 intValue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:54:34.053

“@sum”集合运算符的“键值编码编程指南”状态：

> @sum 运算符返回由运算符右侧的键路径指定的属性值的总和。每个数字都转换为双精度数，计算值的总和，并将总数包装为 NSNumber 的实例并返回。

所以以下应该工作：

```
NSNumber *sumDays = [self.myArray valueForKeyPath:@"@sum.Days"];
int days = [sumDays intValue]; 
```

# html - CSS 在图像上显示图像和文本

> ID：13652003
> 
> 赞同：0
> 
> 时间：2012-11-30T19:42:12.070
> 
> 标签：html, css

我在页面顶部有一个 100% 的标题图像宽度和 120 像素的高度。

我想在中心的标题图像上显示标题文本。

我想在标题图像的右侧显示另一个小图像，它是标题图像高度的 80%，在顶部和底部留下 10%。

我也想在小图像的右侧留下 5px。因此，小图像看起来就像在标题图像上一样。

什么是 CSS 来获得这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:53:25.903

我会通过 CSS 将图像设置为背景，然后通过两个单独的 HTML 绝对定位 Divs 标签将其他元素、您想要的文本放在中间，将另一个小图像放在右边。确保 CSS ID 标签设置为相对...

```
<div  style="width: 200px; height: 23px; position: absolute; right: 12px; top: 399px;" align="center">YOUR IMAGE OR TEXT HERE</div> 
```

当然，根据您的需要设置参数。

# xcode - TWRequest 代码有效但显示速度很慢？

> ID：13652005
> 
> 赞同：3
> 
> 时间：2012-11-30T19:42:21.360
> 
> 标签：xcode, twitter, nsjsonserialization, twrequest, acaccount

我正在使用 TWrequest 在表格视图中显示我的 Twitter 列表。以下代码有效。问题是更新表非常慢。我正在 NSlogging 请求响应（发生得非常快），我还在遍历每个列表并将列表“名称”添加到一个数组中（同样，发生得非常快 <1s）。但是由于某些莫名其妙的原因，该表大约需要 4 秒左右的时间来更新。

为什么重新加载表需要这么长时间？问题不在于解析响应（因为我可以通过 nslog 看到这发生得很快），它需要很长时间才能显示在表格中？非常感谢帮助！

```
-(IBAction)getLists{

    //  First, we need to obtain the account instance for the user's Twitter account
    ACAccountStore *store = [[ACAccountStore alloc] init];

    ACAccountType *twitterAccountType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    //  Request permission from the user to access the available Twitter accounts
    [store requestAccessToAccountsWithType:twitterAccountType withCompletionHandler:^(BOOL granted, NSError *error) {

        if (!granted) {
            // The user rejected your request
            NSLog(@"User rejected access to the account.");
        }
        else {

            // Grab the available accounts
            twitterAccounts = [store accountsWithAccountType:twitterAccountType];

            if ([twitterAccounts count] > 0) {

                // Use the first account for simplicity
                ACAccount *account = [twitterAccounts objectAtIndex:0];

                // Now make an authenticated request to our endpoint
                NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
                //[params setObject:@"1" forKey:@"include_entities"];

                //  The endpoint that we wish to call
                NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1.1/lists/list.json"];

                //  Build the request with our parameter
                TWRequest *request = [[TWRequest alloc] initWithURL:url parameters:params requestMethod:TWRequestMethodGET];

                // Attach the account object to this request
                [request setAccount:account];

                [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

                    if (!responseData) {
                        // inspect the contents of error
                        NSLog(@"error = %@", error);
                    }
                    else {

                        NSError *jsonError;

                        NSArray *timeline = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&jsonError];

                        if (timeline) {

                            // at this point, we have an object that we can parse
                            NSLog(@"timeline = %@", timeline);

                            for (NSDictionary *element in timeline) {

                                NSString *listName = [element valueForKey:@"name"];
                                [listsArray addObject:listName];

                            }

                            [listsTable reloadData];

                        }

                        else {
                            // inspect the contents of jsonError
                            NSLog(@"jsonerror = %@", jsonError);
                        }

                    }
                }];

            } 
        } 
    }];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:21:54.453

抱歉，刚刚看到这个帖子。如果您还没有找到解决方案，希望这会有所帮助。

我相信 performRequestWithHandler 可以在任何线程上调用，因此 UI 更改应该分派到主线程。

```
dispatch_async(dispatch_get_main_queue(), ^{
//update UI here
}); 
```

或者在重新加载表数据的情况下，您可以使用：

```
[self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil    waitUntilDone:NO]; 
```

# python - 为什么从类中访问类变量需要“自我”。在 Python 中？

> ID：13652006
> 
> 赞同：12
> 
> 时间：2012-11-30T19:42:22.700
> 
> 标签：python, oop, class, namespaces, scope

> **可能重复：**
> [Python 'self' 解释](https://stackoverflow.com/questions/2709821/python-self-explained)

我正在学习 Python，我有一个关于从这个类的方法访问类变量的问题，比实际更理论化。

例如我们有：

```
class ExampleClass:
    x = 123
    def example_method(self):
        print(self.x) 
```

为什么一定要准确地写`self.x`，不只是`x`？`x`属于类的命名空间，使用它的方法也属于它。我错过了什么？这种风格背后的理由是什么？

在 C++ 中，您可以编写：

```
class ExampleClass {
public:
    int x;
    void example_method()
    {
        x = 123;
        cout << x;
    };
}; 
```

它会起作用的！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-30T19:58:50.370

来自[Python 的历史：添加对用户定义类的支持](http://python-history.blogspot.it/2009/02/adding-support-for-user-defined-classes.html)：

> 相反，我决定放弃隐式引用实例变量的想法。像 C++ 这样的语言允许您编写 this->foo 来显式引用实例变量 foo（以防有单独的局部变量 foo）。因此，我决定让这种显式引用成为引用实例变量的唯一方法。此外，我决定与其将当前对象（“t​​his”）设为特殊关键字，不如简单地将“this”（或其等价物）设为方法的第一个命名参数。实例变量总是作为该参数的属性被引用。
> 
> 使用显式引用，不需要为方法定义使用特殊的语法，也不必担心与变量查找有关的复杂语义。相反，人们只是简单地定义一个函数，它的第一个参数对应于实例，按照惯例，它被命名为“self”。例如：
> 
> ```
> def spam(self,y):
>     print self.x, y 
> ```
> 
> 这种方法类似于我在 Modula-3 中看到的，它已经为我提供了导入和异常处理的语法。Modula-3 没有类，但它允许您创建包含完全类型化函数指针成员的记录类型，这些函数指针成员默认初始化为附近定义的函数，并添加语法糖，以便如果 x 是这样的记录变量，并且 m 是该记录的函数指针成员，初始化为函数 f，然后调用 xm(args) 等效于调用 f(x, args)。这与对象和方法的典型实现相匹配，并且可以将实例变量等同于第一个参数的属性。

因此，BDFL 本人表示，他决定使用显式自我而不是隐式自我的唯一真正原因是：

*   这是明确的
*   它更容易实现，因为查找必须在运行时完成（而不是像其他语言那样在编译时完成），并且具有隐式 self 可能会增加查找的复杂性（从而增加成本）。

[编辑：Python FAQ](http://docs.python.org/3.3/faq/design.html#why-self)中也有一个答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T19:51:33.893

它似乎与 Python 中的模块与类范围处理有关：

```
COLOR = 'blue'

class TellColor(object):
    COLOR = 'red'

    def tell(self):
        print self.COLOR   # references class variable
        print COLOR        # references module variable

a = TellColor()
a.tell()

> red
> blue 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T19:59:02.680

这是我在有关此功能的[古老答案中所做的内容：](https://stackoverflow.com/questions/1765677/python-nested-classes-scope/8366758#8366758)

* * *

您遇到的问题是由于以下原因：

> 块是作为一个单元执行的一段 Python 程序文本。以下是块：模块、函数体和类定义。
> 
> (...)
> 
> 范围定义了名称在块中的可见性。
> 
> (...)
> 
> 类块中定义的名称范围仅限于类块；它没有扩展到方法的代码块——这包括生成器表达式，因为它们是使用函数范围实现的。这意味着以下将失败：
> 
> A类：
> 
> ```
>  a = 42  
> 
>    b = list(a + i for i in range(10)) 
> ```
> 
> [http://docs.python.org/reference/executionmodel.html#naming-and-binding](http://docs.python.org/reference/executionmodel.html#naming-and-binding)

上面的意思是：函数体是代码块，方法是函数，那么在类定义中存在的函数体之外定义的名称不会扩展到函数体。

* * *

当我读到这篇文章时，这对我来说似乎很奇怪，但这就是 Python 的制作方式：

# 类块中定义的名称范围仅限于类块；它没有扩展到方法的代码块

官方文档就是这么说的。

.

## 编辑

**heltonbiker**写了一段有趣的代码：

```
COLOR = 'blue'

class TellColor(object):
    COLOR = 'red'

    def tell(self):
        print self.COLOR   # references class variable
        print COLOR        # references module variable

a = TellColor()
a.tell()

> red
> blue 
```

这让我想知道`print COLOR`在方法内部编写的指令如何`tell()`引发打印在类外部定义的全局对象 COLOR 的值。
我在官方文档的这一部分找到了答案：

> 方法可以像普通函数一样引用全局名称。与方法关联的全局范围是包含其定义的模块。（类从不用作全局范围。）虽然很少遇到在方法中使用全局数据的充分理由，但全局范围有许多合法用途：一方面，导入全局范围的函数和模块可以被方法以及其中定义的函数和类使用。通常，包含该方法的类本身是在这个全局范围内定义的（...）
> 
> [http://docs.python.org/2/tutorial/classes.html#method-objects](http://docs.python.org/2/tutorial/classes.html#method-objects)

当解释器必须执行`print self.COLOR`时，由于**COLOR**不是实例属性（也就是说标识符 'COLOR' 不属于实例的命名空间），解释器进入实例类的命名空间搜索标识符“COLOR”并找到它，因此它会打印出**TellColor.COLOR的值**

当解释器必须执行`print COLOR`时，由于该指令中没有写入属性访问，它将在全局命名空间中搜索标识符“COLOR”，官方文档说它是模块的命名空间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-30T19:49:55.827

附加到对象（及其类，以及该类的祖先）的属性名称在编译时是不可确定的。因此，您要么使属性查找显式，要么：

*   根除局部变量（在方法中）并始终使用实例变量。这没有好处，因为它本质上消除了具有所有优点的局部变量（至少在方法中）。
*   决定一个 base`x`在运行时是引用一个属性还是 local（`x = ...`如果没有，则使用一些额外的规则来决定何时添加新属性`self.x`）。这降低了代码的可读性，因为您永远不知道名称应该是哪个，并且本质上将*所有方法*中的每个局部变量都变成了公共接口的一部分（因为附加该名称的属性会改变方法的行为）。

两者都有一个额外的缺点，即它们需要特殊的方法外壳。现在，“方法”只是一个可以通过类属性访问的常规函数​​。这对于各种用例非常有用。

# objective-c - 无法从 Apple 模板中读取此代码

> ID：13652010
> 
> 赞同：0
> 
> 时间：2012-11-30T19:42:54.027
> 
> 标签：objective-c, datasource

我不理解从 Apple 的 Master Detail Template 中获取的以下方法中的 Objective-C：

```
- (void)insertNewObject:(id)sender
{
    if (!_objects)
    {
        _objects = [[NSMutableArray alloc] init];
    }

    [_objects insertObject:[NSDate date] atIndex:0];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0
                                                inSection:0];
    [self.tableView insertRowsAtIndexPaths: @[indexPath]
                          withRowAnimation: UITableViewRowAnimationAutomatic];
} 
```

代码位于 MasterViewController.m 文件中。我的困惑点是： - 是什么`@[indexPath]`意思？这是一种将某些东西制作成数组的语法吗？我只遇到了“@”作为表示字符串的字符。澄清：我了解什么是 NSIndexPath 以及它是如何工作的。我不熟悉将对象放在 @ 字符前面的括号中的语法。这会使某些东西成为数组吗？如果我有几个 NSIndexPaths 怎么办？我可以以这种方式将它们全部加载到数组中吗@[indexPath1, indexPath2, indexPath3] 这适用于从 NSObject 派生的任何东西吗？结果总是一个数组吗？这在语言中记录在哪里 - 这个语言功能叫什么（所以我可以查一下）？

*   方法 insertRowsAtIndexPaths:withRowAnimation 似乎指定了将某些内容放入表中的位置，但并不完全指定要放入的内容。当向表中插入项目时，该方法如何知道要使用哪个对象作为数据源。委托和数据源的关系在 xib 中指定，因此很明显 MasterViewController 将处理数据与表的关联，但似乎与任何`NSMutable *_objects;`地方指定的数组和表没有任何关系。

感谢您帮助解释这一点，因为很明显我错过了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:52:42.757

> 这是将某些东西制作成数组的语法吗

是的。在现代 Objective-C 中，正如最新`clang`编译器所理解的那样，还有一些`@`指令可以轻松创建硬编码对象：

```
@[object1, object2] 
```

创建一个 NSArray；

```
@{@"key1": value1, @"key2": value2} 
```

创建一个 NSDictionary，

```
@"hello world" 
```

像往常一样创建一个 NSString，并且

```
@1, @2, @YES, @3.1415927 
```

分别创建 NSNumber 实例。

> 当向表中插入项目时，该方法如何知道要使用哪个对象作为数据源。

它使用当前在调用它的表视图上设置的数据源。

# r - write.table 到新目录

> ID：13652019
> 
> 赞同：7
> 
> 时间：2012-11-30T19:43:17.653
> 
> 标签：r

有什么方法可以使用 write() 和 write.table() 使输出文件位于与工作目录不同的目录中？它尝试在文件名之前设置输出文件的路径，但只收到一条错误消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T20:59:07.803

如果您使用的是 Windows，如果它首先看到（可能也是其他已安装的驱动器） ，`R`就会知道走出当前目录。`C:/`在 Mac 上，如果它看到`/`. 所以：

1.  Mac OS X：

    ```
    write.table(foo, file="/users/name/folder/filename.ext") 
    ```

2.  视窗

    ```
    write.table(foo, file="C:/users/name/folder/filename.ext") 
    ```

始终进行测试以确保您首先拥有正确的路径！

```
list.files("C:/...")
list.files("/....")       #Give errors if path doesn't exist as typed 
```

因此，如果您在其中`/users/parent/subdir`并且想要引用.`parent``write.table(foo, "parent/name.ext")``/users/parent/subdir/parent/name.ext`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T19:46:15.663

当然：

```
write.table(foo,file="../bar/baz.txt") 
```

或者您可以使用绝对路径 - 命名将取决于您的操作系统。

# vb.net - VB 在计算时返回的值与 MS Excel 不一样？

> ID：13652024
> 
> 赞同：0
> 
> 时间：2012-11-30T19:43:25.010
> 
> 标签：vb.net, excel

我正在根据从数据库返回的值对 VB 进行一些计算，我已经将这些值与我已经在 MS Excel 上得到的结果进行了比较，它们似乎有点偏离。我也知道所有数据都从数据库中成功读取。我想知道它是否与我正在使用的数据类型有关？我已经尝试过双精度和十进制，但仍然没有运气。每个数组中有 24 个值。我的公式是：

```
Σ[(forecast-historic)/historic*100]/24 
```

这是我的代码，顺便说一下，所有变量都是双精度数：

```
Public Function Evaluate(ByVal historic() As Double, ByVal forecast() As Double) As Double
    For z As Integer = 0 To 23
        hourly(z) = ((forecast(z) - historic(z)) / historic(z)) * 100
        daily+= Math.Abs(hourly(z))
    Next
    effectiveness= daily / 24
    Return effectiveness
End Function 
```

例如，如果：

```
historic() = {16,18,15,16,14,14,15,16,17,20,22,25,27,27,27,27,26,24,23,22,19,18,16,16}
forecast() = {17,17,16,16,16,16,16,15,15,18,21,24,26,27,29,29,28,28,26,24,22,21,19,18} 
```

MS Excel 上的结果是 8.47643，而 VB 上的结果是 9.1245。

我已经逐个检查了值，并且自从我将值发送到每小时的第一次操作以来，它们有所不同。

关于如何使这一点更准确的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:13:32.627

对于您提供的示例值，VB 值 9.1245 似乎是正确的。我在 excel 中尝试并得到结果为 9.12452077。

检查您的 excel 电子表格公式..![在此处输入图像描述](../Images/bfbedf017594e57136f246f66aaf50a2.png)

*   在第 5 行，对于 A 到 X 列，我使用了公式 =ABS(((A2-A1)/A1)*100)
*   在 Z5 中，使用 =SUM(A5:X5)/24

# javascript - Sencha Touch - 存储不解析 JSON 数据

> ID：13652028
> 
> 赞同：0
> 
> 时间：2012-11-30T19:43:44.653
> 
> 标签：javascript, json, sencha-touch

我有一个从 WCF 服务获取 JSON 数据的商店。商店正在调用 Web 服务并取回数据，但我的图表仍然没有显示任何数据，所以我假设它没有正确解析它。

**这是我的代码：**

```
// Define Model
Ext.regModel('chart1model', {
    fields: [
        {name: 'name', type: 'string'},
        {name: 'data', type: 'string'}
    ]
});

var store1 = new Ext.data.Store({
    model: 'chart1model', 
    proxy: {
        type: 'ajax',
        url: 'http://localhost:8523/WebService/GetChartData?chartType=1',
        reader: {
            type: 'json'
        }
    },
    autoLoad: true
}); 
```

如果我使用相同的数据并自己创建 Store，图表将正确显示：

```
var store1 = new Ext.data.JsonStore({
        fields: ['name', 'data'],
        data: [
        {'name':'Nov-09','data':0},{'name':'Nov-10','data':0},{'name':'Nov-11','data':0},{'name':'Nov-12','data':0},{'name':'Nov-13','data':0},{'name':'Nov-14','data':0},{'name':'Nov-15','data':0},{'name':'Nov-16','data':0},{'name':'Nov-17','data':0},{'name':'Nov-18','data':0},{'name':'Nov-19','data':0},{'name':'Nov-20','data':0},{'name':'Nov-21','data':0},{'name':'Nov-22','data':0},{'name':'Nov-23','data':0},{'name':'Nov-24','data':0},{'name':'Nov-25','data':0},{'name':'Nov-26','data':0},{'name':'Nov-27','data':0},{'name':'Nov-28','data':0},{'name':'Nov-29','data':0},{'name':'Nov-30','data':0}
        ]
    }); 
```

我不确定我做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:19:00.720

您示例中的 JSON 数据有单引号，这不是有效的 JSON。[您可以在http://www.jsonlint.com](http://www.jsonlint.com)上检查您的 JSON 数据。确保在 JSON 数据中使用双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:01:07.283

您是否已验证数据最终进入了商店？

其次，“数据”字段的数据类型不正确。这显然是一个数字，但您已将其指定为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:28:36.890

原来这是因为它以字符串而不是 JSON 的形式返回。通过将其转换为 JSON，它可以工作：

```
return $.parseJSON(result); 
```

# java - 构建路径指定执行环境 J2SE-1.4。日食中的错误

> ID：13652032
> 
> 赞同：0
> 
> 时间：2012-11-30T19:44:09.067
> 
> 标签：java, eclipse, build

在构建 Eclipse 代码时，我有这个“构建路径指定 ...”错误。

![在此处输入图像描述](../Images/83e0e4477137cd87c48a054017be0468.png)

`Build path specifies execution environment J2SE-1.4\. There are no JREs installed in the workspace that are strictly compatible with this environment.`

谷歌搜索找到这篇文章：[java build path questions](https://stackoverflow.com/questions/6077572/java-build-path-problems) to add J2SE-1.4 execution environment。

![在此处输入图像描述](../Images/efbf26aeff53dac5b86c4d11d42a0dad.png)

并检查 Java SE 7 是否安装正确。

![在此处输入图像描述](../Images/64fc5e05bc0e80f9bdf4bea132adb3b0.png)

但是，我仍然收到错误消息。可能有什么问题？

`java -version`我的命令行中有这些信息。

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:00:11.013

您可以尝试转到`Project|Properties`，然后选择`Java Build Path`，选择当前`JRE System Library`，然后选择删除。

选择`Add Library`，然后在 下`JRE System Library category`，选择您的系统库；尝试选择`Workspace default JRE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T19:23:23.647

您可以尝试进入 Preference|Java|Installed JREs。单击添加...按钮。“添加 JRE”页面打开并选择标准 VM。在“添加 JRE”页面上，在“JRE 主页”旁边，单击“目录”按钮。在“浏览文件夹”页面下，找到 Program Files-> Java 并找到带有 JRE 版本的文件夹，例如，如果消息说 JRE 1.6 丢失，请在其中添加文件夹位置 JRE 1.6，例如 -> C:\Prgram Files\Java\jdk1.6_30

# php - jquery文件上传

> ID：13652033
> 
> 赞同：1
> 
> 时间：2012-11-30T19:44:13.210
> 
> 标签：php

我觉得我错过了一些非常明显的东西，所以我希望有人能指出我正确的方向。[这个问题专门与http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)找到的 jQuery 文件上传脚本有关

我在我的服务器上加载了这组非常好用且方便的文件，它开箱即用，效果很好。我想启用动态创建用户目录供用户上传文件，我已经按照这里给出的指示：[https ://github.com/blueimp/jQuery-File-Upload/wiki/PHP-user-directories](https://github.com/blueimp/jQuery-File-Upload/wiki/PHP-user-directories)

我打开了 server/php/index.php 文件，其中包含以下几行：

```
error_reporting(E_ALL | E_STRICT);
require('UploadHandler.php');
$upload_handler = new UploadHandler(); 
```

我已将文件编辑为如下所示：

```
error_reporting(E_ALL | E_STRICT);
require('UploadHandler.php');
require('upload.class.php');

class CustomUploadHandler extends UploadHandler {
    protected function get_user_id() {
        $userid = 99771;
        return $userid;
    }
}

$upload_handler = new CustomUploadHandler(array(
    'user_dirs' => true
)); 
```

显然，由于这还没有上线，我正在使用静态用户 ID 进行测试（使用和不使用引号进行测试），但我看不出这有什么不同。当我尝试运行它时，我收到错误：SyntaxError: JSON.parse: unexpected character

这可能来自什么？我也尝试将继承的类放在 UploadHandler.php 文件中，但我得到了相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T06:30:22.747

[http://gloryplus.com/index.php?route=product/product&path=82&product_id=172](http://gloryplus.com/index.php?route=product/product&path=82&product_id=172)

```
for ( ; i < len; i++ ) {
        file = this.files[i];

        if (!!file.type.match(/image.*/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.onloadend = function (e) { 
                    showUploadedItem(e.target.result, file.fileName);
                };
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("images[]", file);
            }
        }   
    }

    if (formdata) {
        $.ajax({
            url: "upload.php",
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (res) {
                document.getElementById("response").innerHTML = res; 
            }
        });
    } 
```

# php - 注册页面...无法正常工作

> ID：13652036
> 
> 赞同：0
> 
> 时间：2012-11-30T19:44:24.527
> 
> 标签：php, mysql

我得到了我的注册页面，但是当按下提交按钮时，它没有进行应有的检查。相反，由于某种奇怪的原因，它会全部丢失，并返回没有错误文本的页面。

```
<?php
require "PasswordHash.php";
require "header.php";
require "globe.php";

echo "<body>
<div class='container'>";
echo "<div class='centered'>
      <ul id='nav'>
       <li><a href='login.php'>Home </a></li>
       <li><a href='register.php'>Register</a></li>
       <li><a href='forgotpassword.php'>Forgot Password</a></li>
       <li><a href='contact.php'>Contact</a></li>
       <li><a href='t&c.php'>Terms and Conditions</a></li>
      </ul>";
echo"
<img src='banner1.jpg' width='800px' height='200px' />

 <div class='regban'>
   <img src='outsideimage/registertop.png' width='800px' height='40px' />
 </div>

<div class='registertext'>
Registiring to Zone Wars allows you to be that one step closer to being part of our fantastic community! Simply register for free and with our quick registration form you will be playing very soon! <br />
<font color='red'><i>Please note registration is not currently taking place due to large maintenance. We are sorry for any inconvenience this may have caused. </i></font>";
$regsec = htmlentities($_SERVER['PHP_SELF']);

if (isset($_POST['register'])) 
{ 
    $user = trim($_POST['user']);
    $pass1 = $_POST['pass1'];
    $pass2 = $_POST['pass2'];
    $email = trim($_POST['email']);
    $email2 = $_POST['email2'];
    $gender = $_POST['gender'];
    $error_string = '';
    require_once('recaptchalib.php');
    $privatekey = "HIDDEN AS ITS PRIVATE";
    $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);

    $hasher = new PasswordHash(8, false);
    $hash_cost_log2 = 8;
    $hash_portable = FALSE;
    $hasher = new PasswordHash($hash_cost_log2, $hash_portable);

    function isValidEmail($email = '')
    {
    return preg_match("/^[\d\w\/+!=#|$?%{^&}*`'~-][\d\w\/\.+!=#|$?%{^&}*`'~-]*@[A-Z0-9][A-Z0-9.-]{1,61}[A-Z0-9]\.[A-Z]{2,6}$/ix",$email);
    }

    $userrow = mysqli_query($mysqli, "SELECT * FROM Persons WHERE username = '" . mysqli_real_escape_string($mysqli, $user) . "'");
    $row_cnt = mysqli_num_rows($userrow);

    $emailrow = mysqli_query($mysqli, "SELECT * FROM Persons WHERE email = '" . mysqli_real_escape_string($mysqli, $email) . "'");
    $row_cnt1 = mysqli_num_rows($emailrow);

     if (!$resp->is_valid) {
                  $error_string .= '<center>The reCAPTCHA wasnt entered correctly. Go back and try it again.</center><br />';
        }
    else if ($user == '') {
    $error_string .= '<center>You left the Username field blank!.</center><br />';
    }
    else if (strlen($user) < 4) {
    $error_string .= '<center>Your Username must be at least 4 characters long.</center><br />';
    }
    else if (strlen($user) > 8) {
    $error_string .= '<center>You Username cannot be longer then 8 characters.</center><br />';
    }
    else if ( !preg_match("/^[a-z]+[\w.-]*$/i", $user) ) {
    $error_string .='<center>Your username may only contain letters, numbers, dots, underscores, hyphen and start with a letter</center>';
    }
    else if ($row_cnt != 0) {
    $error_string .= '<center>Your Username exists</center><br />';
    }
    else if ($pass1 == '')
    {
    $error_string .='<center>You left the password field blank.<br /></center>';
    }
    else if ($pass2 == '') {
    $error_string .='<center>You left the confirmation password blank<br /></center>';
    }
    else if ($pass1 != $pass2) {
    $error_string .='<center>Your password and confirmation password do not match<br /></center>';
    }
    else if(strlen($pass1) > 72) {
    $error_string .='<center>Your password cannot be longer then 72 characters<br /></center>';
    }
    else if ($email == '') {
    $error_string .='<center>You left the email field blank!.<br /></center>';
    }
    else if ($email != $email2) {
    $error_string .='<center>Your email and confirmation email did not match.<br /></center>';
    }
    else if (!isValidEmail($email)) {
    $error_string .= '<center>Please enter a valid email address.<br></center>';
    }
    else if ($row_cnt1 != 0) {
    $error_string .= '<center>Your email address exists</center><br />';
    }
    else {

        if ($error_string != '') {
            echo "<font color=red> '$error_string' </font><br /><center> Please go back and fix the errors <a href=register.php>here</a></center>";
        }
        else {
        $hash = $hasher->HashPassword($pass1);
        get_post_var($user);
        get_post_var($email);
        $euser = mysqli_real_escape_string($mysqli, $user);
        $eemail = mysqli_real_escape_string($mysqli, $email);

            if (strlen($hash) >= 20) {
         mysqli_query($mysqli, "INSERT INTO Persons (Username, Password, Email, Gender) VALUES ('$euser', '$hash', '$eemail', '$gender')");
         echo "You have signed up to the game! Please login <a href='login.php'here</a>. ";
            }
            else
            {
            echo "<center>A fatal error occured. Please contact the Admin board</center><br />";
        }
        }
             }
}
else
{ 

    echo "
    <form action='$regsec' method='POST'>
    <table align='center' border='0'>
    <tr><td align='right'>Username:</td><td><input type='text' name='user'  /></td></tr>
    <tr><td align='right'>Password:</td><td><input type='password' name='pass1' /></td></tr>
    <tr><td align='right'>Confirm Password:</td><td><input type='password' name='pass2' /></td></tr>
    <tr><td align='right'>Email Address:</td><td><input type='text' name='email' /></td></tr>
    <tr><td align='right'>Confirm Email Address:</td><td><input type='text' name='email2' /></td></tr>
    <tr><td align='right'>Gender:</td><td><select name='gender'><option value='Male'>Male</option><option value='Female'>Female</option></select></td></tr>
    <tr><td colspan='2'><center>";
    require_once('recaptchalib.php');
    $publickey = "HIDDEN AS ITS PRIVATE"; // you got this from the signup page
    echo recaptcha_get_html($publickey);
    echo "</center></td><td></td></tr>
    <tr><td colspan='2'><center>By registring you have read and agreed our <a href='t&c.php'>Terms and Conditions</a></center></td><td></td></tr>
    <tr><td colspan='2'><center><input type='submit' name='register' value='register'></center></td><td></td></tr>
    </table></form>";
}
echo "</div>

<img src='outsideimage/registerbott.png' width='800px' height='20px' />
</div>";

echo "&nbsp;<br />
<div class='image'>
  <img alt='' src='outsideimage/bottom.png' />
  <div class='text'>
    <small>Copyright &copy; 2012  All Rights Reserved.</small>
  </div>
  <div class='text1'>
    <small>";
date_default_timezone_set('Europe/London');
echo date('l jS \of F Y h:i:s A');
echo "</small>
  </div>
</div>
</body>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:30:07.017

您没有收到任何错误消息，因为您没有将其打印出来。您将错误消息分配给变量 $error_string，但代码中没有将其打印出来的地方。尝试在最后一个 else 语句之后添加一个 echo。

```
if (!$resp->is_valid) {
  ...
}
else if ($user == '') {
  ...
}
else if (strlen($user) < 4) {
  ...
}
...
else {
  ...
}
echo $error_string; 
```

此外，您的验证中的最后一个 else 似乎是不必要的，因为您正在检查 $error_string 是否为空。

# javascript - 主干中的预处理模型

> ID：13652039
> 
> 赞同：3
> 
> 时间：2012-11-30T19:44:43.647
> 
> 标签：javascript, backbone.js, preprocessor

什么是对模型的字段进行一些预处理的好方法。例如，假设我有以下数据：

```
[{
        id: '1',
        sender: 'me',
        receiver: 'you',
        message: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum",
        date: new Date("October 13, 1975 11:13:00").toLocaleDateString()
    }] 
```

在这个简单的模型中：

```
App.Models.Notification = Backbone.Model.extend({
    defaults: {
        'date': new Date()
    }
}); 
```

我想减少值中的字符数`message`以便在视图中显示它，但前提是该消息包含超过给定数量的字符。也许是这样的：

```
if ( this.model.get('message').trim().split(" ").length > 30 ) {
  // code here
} 
```

因此，我不想在所有模型中执行该预处理。在我看来我应该这样做吗？如果是这样，怎么做？我已经[阅读](https://stackoverflow.com/questions/7842378/backbone-js-custom-setters)了一些解决方案，但其中一些不适用于这种情况，而另一些则看起来像是 hack。

谢谢！

**更新**

遵循 Alex 的建议并作为参考，我在这里举了一个使用 Handlebars 模板助手的示例：

```
render: function() {

    Handlebars.registerHelper('getShort', function(options) {
        if ( options.fn(this).trim().split(" ").length > 30 ) {
            var message = options.fn(this);
            var shortText = $('<div/>', { text: message })
            .html()
            .trim()
            .substring(0, 200)
            .split(" ")
            .slice(0, -1)
            .join(" ") + "..."

            return shortText;
        }
        return options.fn(this);
    });

    template = Handlebars.compile( $("#my-template").html() );
    this.$el.html( template( this.model.toJSON() ));
    return this;
} 
```

并像这样使用它：

### 索引.html

```
{{#getShort}}{{message}}{{/getShort}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:51:58.343

如果您的库堆栈支持这种表示逻辑，则应将其放入模板助手中。如果没有，只需将`getShortenedMessage(length)`方法添加到模型并使用它来获取您的价值。在任何情况下，不要为了显示不同而更改实际模型属性——这是糟糕的设计，以后可能会导致各种复杂情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:12:34.807

最好将这种逻辑放入外部辅助函数中，然后将结果传递到您的模板中。

例如，如果你有这样的事情：

```
var NotificationHelper = {
    trimmedMessage: function (notification, limit) {
        // do trimming logic here based on notification.get('message')
        return value;
    }
    ... // other helper functions
}; 
```

并给出这样的模板：

```
template: _.template('<p><%- message %></p><p><%= foo %></p>'), 
```

然后在您的视图代码中，您可以执行以下操作：

```
this.$el.html( this.template({
    message: NotificationHelper.trimmedMessage(this.model),
    foo: this.model.get('foo')
}); 
```

我会倾向于获得具有多种功能的视图助手。它有助于将表示逻辑排除在模型之外。通过将计算值传递到您的模板中，它将使您的模板更具可读性和可管理性。

此外，诸如截断文本之类的东西可以放在非模型特定的帮助器中，因为它是非常通用的功能类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:34:22.697

您可以使用`underscore.string`库（[链接](http://epeli.github.com/underscore.string)）

基本上，您可以简单地在渲染函数中调用函数 truncate/prune ( [Link](https://github.com/epeli/underscore.string#readme) )，这将返回缩短的版本..

```
render: function() {
     var shortenedMessage = _('Hello, world').prune(8); // => 'Hello...'
} 
```

如果消息长度不超过字符数，它只会返回字符串。请注意，您也可以将其与`Underscore.js`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-22T05:15:21.810

通常最好在模型中有一个函数。这样，任何使用该模型的人都可以重用它。模板可以调用该函数，它只会在你需要它的时候被处理。

```
App.Models.Notification = Backbone.Model.extend({
    defaults: {
        get shortdate() {
            // put the code here to return the custom date format
        }
    }
});

// in the template (or anywhere else)
<div id='date'><%= Notification.shortdate %></div> 
```

对于奖励积分，请使用自定义 getter（在 IE9+ 中受支持）。所以它看起来像一个属性，但只在函数被调用时处理它。由于没有设置器，因此无法设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T19:54:27.737

创建一个模型构造函数，如果字符串太长，则在将其设置在构造函数中之前将其缩短。有关构造函数的更多信息，请参阅此[页面。](http://backbonejs.org/#Model-constructor)`Model`

# android - 从列表视图中获取位置并保存在 Android 中的 pref 文件中

> ID：13652041
> 
> 赞同：0
> 
> 时间：2012-11-30T19:44:53.413
> 
> 标签：android, listview, android-listview

我正在尝试在 Android 中制作一个简单的 Top Trumps 应用程序。我已经使用 SQL lite open helper 来存储每个顶级王牌的详细信息。

目前我有一个浏览卡片类，它使用列表视图显示卡片名称。当有人点击卡片名称时，我希望它显示正确的卡片并使用我的数据库获取卡片的详细信息。

我正在考虑通过获取列表视图的位置来做到这一点，因此当用户单击卡片时，它将获取位置并显示所选卡片的正确详细信息。

我想知道这是否可能，并认为我可以将位置保存在 prefs 文件中？

这是我班级的代码。

```
import java.util.List;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Browse extends Activity {

private ListView mainListView;  
private ArrayAdapter<Card> listAdapter;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout2);

    mainListView = (ListView) findViewById( R.id.mainListView);  

    DatabaseHandler dh = new DatabaseHandler(this);

    // Remember to drop existing table if it exists
    dh.removeAll();

    // Insert 6 cards into the database
    Log.d("Database: ", "Inserting values..");
    dh.addCard(new Card(1, "Katniss Evergreen", "11", "33", "55", "44"));
    dh.addCard(new Card(2, "Peeta Melark", "49", "44", "11", "65"));
    dh.addCard(new Card(3, "Gale Hawthrone", "87", "32", "98", "50"));
    dh.addCard(new Card(4, "Haymitch", "30", "32", "45", "31"));
    dh.addCard(new Card(5, "Effie Trinket", "65", "54", "21", "34"));
    dh.addCard(new Card(6, "President Snow", "23", "45", "67", "21"));

    List<Card> list = dh.getAll();  

    // Create ArrayAdapter using the list of cards
    listAdapter = new ArrayAdapter<Card>(this, R.layout.simplerow, list);

    // Set the ArrayAdapter as the ListView's adapter.  
    mainListView.setAdapter( listAdapter );  

    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:00:03.577

这是我用于微调器并获得位置的代码。

```
spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            int position = spinner1.getSelectedItemPosition();
            @SuppressWarnings("unused")
            final Cursor cur = (Cursor) ((AdapterView<?>) spinner1).getItemAtPosition(position);
            residentName.setText(c.getString(1));
            Resident_Id.setText(c.getString(2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:54:02.613

用于`ListView.setOnItemClickListener(listener);`获取列表索引。

# java - 如何使用 jersey 编组自定义 arrayList 对象？

> ID：13652042
> 
> 赞同：0
> 
> 时间：2012-11-30T19:44:54.733
> 
> 标签：java, spring, jersey, jackson

所以，首先我有这门课：

```
 public class PaginatedList<?> extends ArrayList<?>{
       private int startIndex;
       private int endIndex;

       public PaginatedList(int startIndex, int endIndex...){
           this.startIndex = startIndex;
           this.endIndex = endIndex;
           //Do pagination stuffs.
       }
    } 
```

和这个类：

```
 public class UserList extends PaginatedList<User>{

       public UserList(int startIndex, int endIndex...){
          super(startIndex, endIndex...);
       }

    } 
```

现在，当我的资源返回一个 UserList 时，它会按预期打印出用户列表：

```
[
  {
    "userName":"binky",
    "age":115
  }
] 
```

但是，我希望输出是这样的：

```
{
  "users":
   [
     {
       "userName":"binky",
       "age":115
     }
   ],
  "pagination":
   {
     "startIndex":5,
     "endIndex":10
   }
} 
```

因此，我用@JSONRootName("") 对它们进行了注释。

```
@JsonRootName("pagination")
public class PaginatedList extends ArrayList<?>{}
@JsonRootName("activities")
public class UserList extends PaginatedList<User>{} 
```

并创建了一个类来设置 ObjectMapper：

```
 @Provider 
        @Produces(MediaType.APPLICATION_JSON)
        public class Resolver implements ContextResolver<ObjectMapper>{

            private ObjectMapper objectMapper;

            public ObjectMapperProvider(){
                objectMapper = new ObjectMapper();
            }

            @Override
            public ObjectMapper getContext(Class<?> type) {
                if(type.getAnnotation(JsonRootName.class) != null){
                         objectMapper.configure(DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, true);
                }else{
                       objectMapper.configure(DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, false);
                }
                return objectMapper;
            }
        } 
```

而且这个实现仍然不能解决我的问题。编组的 json 不返回未包装的根值。

我正在使用球衣 POJOMAPPING。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:20:15.693

似乎 @JsonRootResource 更多地保留给属性，而不是类级别的声明。这应该会产生编译错误，但不会。

# event-handling - .on().on() 与只有一个 .on() 的行为

> ID：13652044
> 
> 赞同：1
> 
> 时间：2012-11-30T19:45:04.073
> 
> 标签：event-handling, jquery

我想捕捉“*向内*”类型的事件并做**ABC**，并捕捉“*向外*”类型的事件来做**XYZ**。我遇到了在我没想到的奇怪时间触发的各种事件的问题，所以我想知道我的方法是否真的导致了问题。

```
<div class="box">first box</div>
<div class="box">second box</div>

$(".box")
  .on("focus mouseover mousedown", function(){ /* do ABC */ })
  .on("blur mouseout mouseup",     function(){ /* do XYZ */ }); 
```

我认为`.on()`像这样将这些方法串在一起可以确保仅针对相同的`.box`. 但除此之外，我希望它的行为与我这样做的行为相同：

```
$(".box").on("focus mouseover mousedown", function(){ /* do ABC */ });
$(".box").on("blur mouseout mouseup",     function(){ /* do XYZ */ }); 
```

或做这样的事情：（*这似乎是多余的）*

```
$(".box").on({
  focus:     function(){   /* do ABC */ },
  mouseover: function(){   /* do ABC */ },
  mousedown: function(){   /* do ABC */ },

  blur:      function(){   /* do XYZ */ },
  mouseout:  function(){   /* do XYZ */ },
  mouseup:   function(){   /* do XYZ */ }
); 
```

我不是在问“哪个更好”，而是在问“它们有何不同”？他们似乎得到了不同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:49:35.197

它们的不同之处在于您的 jQuery 选择器`$(".box")`只运行一次，因此链接它们更有效。在功能上它们是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:50:07.730

jQuery 函数调用返回选择器匹配的上下文`this`，允许链接。

因此，您的`.on()`链条将按您的意愿工作。

# sql - MS-Access 慢查询

> ID：13652051
> 
> 赞同：4
> 
> 时间：2012-11-30T19:45:41.263
> 
> 标签：sql, ms-access

我有一个从一个表中提取信息的查询。该表相当大，有 180 万行，并且每周都在增长。该查询需要很长时间才能运行，并且在多次拉取时会出现问题。是否有任何过程可以加速具有这么多或更多行的数据库中的查询。我还有一个大约有 500 万行的查询......这个查询是相当基本的，它使用一个提示来提取与站点编号相关的行，以及一个日期之间的提示。

```
Arrival_ID criteria = [Select Arrival ID]
Week criteria = Between[Select week begin:] And [Select week end:] 
```

任何帮助或方向指示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T19:49:31.130

Arrival_ID 和 Week 列上的索引可能会有所帮助。

除非您从一个非常宽的表中选择很多列，否则只要您的索引是选择性的，您就应该在 180 万行上从 Access 中获得相当快的性能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-24T23:11:50.960

我同意 Kieren Johnstone 的观点——你可以将数据存储在 SQL 中，然后使用访问权限来运行查询吗？

仔细检查索引。

当您压缩/修复时 - 做两次 - 让它成为一种习惯。第二次清除了除第一次之外的所有问题。

# arrays - SAS - 在 If 语句中循环吗？

> ID：13652052
> 
> 赞同：1
> 
> 时间：2012-11-30T19:45:45.990
> 
> 标签：arrays, sas, do-loops

我断断续续地使用 SAS 一年了，我终于开始研究数组、宏和所有那些很酷的东西。

## 我想做的事：

我有一个合并的数据集，其中包含来自不同年级学生的测试数据。我需要为每个年级创建不同的文件。我没有等级变量来轻松对数据集进行排序并创建不同的文件。我确实有一个特定于每个年级的变量索引。

示例 - 我有什么：

```
+-------+--------+--------+--------+--------+--------+
|  ID   | sc_132 | sc_139 | sc_142 | sc_143 | sc_151 |
+-------+--------+--------+--------+--------+--------+
| 16623 | 1      | 1      | 0      | .      | .      |
| 16624 | 1      | 0      | 0      | .      | .      |
| 16626 | 1      | 1      | 1      | .      | .      |
| 17221 | .      | .      | .      | 1      | 0      |
| 17222 | .      | .      | .      | 0      | 1      |
| 17225 | .      | .      | .      | 0      | .      |
+-------+--------+--------+--------+--------+--------+
```

示例 - 我想要什么：

```
+-------+--------+--------+--------+--------+--------+
|  ID   | sc_132 | sc_139 | sc_142 | sc_143 | sc_151 |
+-------+--------+--------+--------+--------+--------+
| 16623 | 1      | 1      | 0      | .      | .      |
| 16624 | 1      | 0      | 0      | .      | .      |
| 16626 | 1      | 1      | 1      | .      | .      |
+-------+--------+--------+--------+--------+--------+
```

```
+-------+--------+--------+--------+--------+--------+
|  ID   | sc_132 | sc_139 | sc_142 | sc_143 | sc_151 |
+-------+--------+--------+--------+--------+--------+
| 17221 | .      | .      | .      | 1      | 0      |
| 17222 | .      | .      | .      | 0      | 1      |
| 17225 | .      | .      | .      | 0      | .      |
+-------+--------+--------+--------+--------+--------+
```

## 我在哪里：

我有很多特定于每个年级的变量，其中一些变量包含缺失的数据，所以为了彻底，我应该检查所有年级特定的变量并输出包含任何这些字段中数据的任何观察结果。我可以使用一个非常长的 IF THEN 语句......

```
DATA grade1 grade2 grade3 grade4;
SET gradeall;
    IF sc_132 ^= . OR sc_139 ^= . OR (AND SO ON FOR ABOUT 34 VARIABLES) THEN OUTPUT grade1;
RUN; 
```

但我认为这是使用数组的好时机。我找不到任何易于解析的关于何时何地可以使用 do 循环的文档。使用我对其他编程语言的逻辑以及我浏览过的有关 do 循环的内容，我将以下内容放在一起。

```
%let gr1_var = sc_132 sc_139 sc_142;
/*-GRADE SPECIFIC ARRAY REPEATED FOR OTHER GRADES -*/

DATA grade1 grade2 grade3 grade4;
SET gradeall;
PUT &gr1_var;
ARRAY grade1 [*] &gr1_var;
IF (
    DO i= 1 TO (DIM(items5_all)-1);
        items5_all(i) ^=. OR ;
    END;
    DO i= DIM(items5_all);
        items5_all(i) ^=.;
    END;
    )
THEN OUTPUT grade1;
    /*-IF THEN STATEMENT THEN REPEATED FOR OTHER GRADES-*/
run; 
```

我希望这会给我相当于上面的长 IF THEN 语句，而不必键入它。但当然它是非功能性的。

你甚至可以在 If 语句中使用 do 循环吗（我还没有找到任何这样的例子）？
有人对如何完成这项任务有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:58:07.237

我认为如果您只想输出包含任何特定字段中数据的任何观察，您可以只做一个`sum`数组。如果任何观察值没有变量值，则总和为空，因此不会输出该观察值。不需要循环。就像：

```
 %let gr1_var = sc_132--sc_142; /*for array definition, you may use "--" or "-" */
 %let gr2_var = sc_143 sc_151;

 DATA grade1 grade2;
 SET gradeall;
 ARRAY grade1 [*] &gr1_var;
 ARRAY grade2 [*] &gr2_var;
 if sum(of grade1(*))^=. then output grade1;
 if sum(of grade2(*))^=. then output grade2;
 run; 
```

顺便说一句，如果这里使用宏，就不需要编写多个`if..then`和数组定义。

而且我认为你不能像你放在这里的那样使用`DO`LOOP inside语句。`if..else`

# linux - SSHFS 通过多个连接

> ID：13652054
> 
> 赞同：6
> 
> 时间：2012-11-30T19:45:53.700
> 
> 标签：linux, sshfs

我不得不偶尔远程工作。为此，我必须连接到网关服务器，然后我可以通过它连接到开发服务器。在工作中，我可以直接连接到开发服务器。我使用 SSHFS 将远程文件夹映射到本地文件夹（在 Ubuntu 中）。我的同事似乎不介意在他们所有的工作中使用 vim，但我真的更喜欢 IDE。我知道只使用 ssh 我可以通过多个连接（ssh -t server1 ssh -t server2）进行隧道传输，但我想对 SSHFS 做同样的事情。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:57:34.610

是的，这是可以做到的。为此，远程服务器必须支持本地端口转发（出于安全原因可能会被禁用）。您基本上所做的是指示远程服务器为您打开通往另一个网络中服务器的隧道：

```
ssh -fL 127.0.0.1:someport:host.in.the.remote.net:22 proxy.host 
```

*someport*应该是您机器上未使用的端口（例如 2222），*host.in.the.remote.net*应该是您最终要连接到的开发机器的主机名或 IP，来自*proxy.host*的网络，这是您必须经过的中间服务器。`-f`建立连接后，指示 ssh 从终端分离。

你运行这个命令，在后台运行之后，远程机器的ssh端口就可以被`127.0.0.1:someport`sshfs引用和使用了。我不知道有一种方法可以自动执行此操作，但您应该可以轻松编写脚本。

如果您不确定策略，请确保事先与远程管理员清除此操作。`22`如果开发机器在不同的端口上提供 ssh，您可能需要更改第一个命令中的 。

# javascript - jqtouch - 在用户更改值后使用 Javascript 启用复选框

> ID：13652056
> 
> 赞同：0
> 
> 时间：2012-11-30T19:46:08.567
> 
> 标签：javascript, html, jqtouch

我使用 jqtouch 并有一个复选框：

```
<li>Checkbox1<span class="toggle"><input type="checkbox" id="1" onclick="Javascript:SetGPIO('1')"> </span></li> 
```

我可以启用此复选框：

```
$('#1').prop('checked', true); 
```

或者

```
$('#1').attr('checked', true); 
```

我可以禁用

```
$('#1').removeAttr("checked"); 
```

这很好用。但是，一旦用户切换了复选框，则无法通过上面的代码设置复选框。我也尝试过：

```
$('#1').prop("checked",false); //Enables the checkbox (?)
$('#1').attr('checked', false); //enables the checkbox (?) 
```

用户按下复选框后，我该怎么做才能通过 JavaScript 设置复选框？

[编辑] 我这里有一个完整的 jqtouch 示例：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>jQTouch &beta;</title>
<link rel="stylesheet" href="../../themes/css/jqtouch.css"
    title="jQTouch">

<script src="../../src/lib/zepto.min.js" type="text/javascript"
    charset="utf-8"></script>
<script src="../../src/jqtouch.min.js" type="text/javascript"
    charset="utf-8"></script>
<!-- Uncomment the following two lines (and comment out the previous two) to use         jQuery instead of Zepto. -->
<!-- <script src="../../src/lib/jquery-1.7.min.js" type="application/x-javascript"     charset="utf-8"></script> -->
<!-- <script src="../../src/jqtouch-jquery.min.js" type="application/x-javascript"         charset="utf-8"></script> -->

<script src="../../extensions/jqt.themeswitcher.min.js"    
type="application/x-javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
    var jQT = new $.jQTouch({
        icon : 'jqtouch.png',
        icon4 : 'jqtouch4.png',
        addGlossToIcon : false,
        startupScreen : 'jqt_startup.png',
        statusBar : 'black-translucent',
        themeSelectionSelector : '#jqt #themes ul',
        preloadImages : []
    });

    // Some sample Javascript functions:
    $(function() {

        // Show a swipe event on swipe test
        $('#swipeme').swipe(
                function(evt, data) {
                    var details = !data ? '' : '<strong>' + data    .direction    
                            + '/' + data.deltaX + ':' + data.deltaY    
                            + '</strong>!';
                    $(this).html('You swiped ' + details);
                    $(this).parent().after('<li>swiped!</li>')
                });

        $('#tapme').tap(function() {
            $(this).parent().after('<li>tapped!</li>')
        });

        $('a[target="_blank"]').bind('click', function() {
            if (confirm('This link opens in a new window.')) {
                return true;
            } else {
                return false;
            }
        });

        // Page animation callback events
        $('#pageevents').bind(
                'pageAnimationStart',
                function(e, info) {
                    $(this).find('.info').append(
                        'Started animating ' + info.direction    
                                    + '&hellip;  And the link '    
                                    + 'had this custom data: '    
                                    +         $(this).data('referrer').data('custom')
                                    + '<br>'); 
                }).bind(
                'pageAnimationEnd',
                function(e, info) {
                    $(this).find('.info').append(
                            'Finished animating ' + info.direction
                                    + '.<br><br>');

                });

        // Page animations end with AJAX callback event, example 1 (load remote     HTML only first time)
        $('#callback').bind(
                'pageAnimationEnd',
                function(e, info) {
                    // Make sure the data hasn't already been loaded     (we'll set 'loaded' to true a couple lines further down)
                    if (!$(this).data('loaded')) {
                        // Append a placeholder in case the remote     HTML takes its sweet time making it back
                        // Then, overwrite the "Loading"     placeholder text with the remote HTML
                        $(this).append(
                                    $('<div>Loading</div>').load(
                                        'ajax.html .info',    
                                        function() {    
                                            //     Set the 'loaded' var to true so we know not to reload
                                            //     the HTML next time the #callback div animation ends
                                                $(this).parent().data('loaded',
                                                    true);
                                    }));    
                }    
            });    
        // Orientation callback event
        $('#jqt').bind('turn', function(e, data) {
        $('#orient').html('Orientation: ' + data.orientation);
    });

});

function toggleCheckbox(){

if ($('#myCheckbox1').attr('checked') == 'true'){
    $('#myCheckbox1').removeAttr("checked");
}
else {
    $('#myCheckbox1').attr('checked', true);
}
window.setTimeout('toggleCheckbox()', 2000); //toggle every 2 seconds
}

toggleCheckbox();

</script>
<style type="text/css" media="screen">
#jqt.fullscreen #home .info {
display: none;
}

div#jqt #about {
padding: 100px 10px 40px;
text-shadow: rgba(0, 0, 0, 0.3) 0px -1px 0;
color: #999;
font-size: 13px;
text-align: center;
background: #161618;
}

div#jqt #about p {
margin-bottom: 8px;
}

div#jqt #about a {
color: #fff;
font-weight: bold;
text-decoration: none;
}
</style>
</head>
<body>
<div id="jqt">
    <div id="home" class="current">
        <div class="scroll">
            <ul class="rounded">
                <li>MyCheckbox<span class="toggle"><input
                        type="checkbox" id="myCheckbox1" >
                </span>
                </li>
            </ul>

        </div>
    </div>

</div>
</body> 
```

该复选框每 2 秒切换一次，但仅在用户单击它之前。

我希望现在我的问题更清楚一点。对不起我的英语不好。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:00:34.763

首先，您实际上所做的是选中和取消选中这些框，而不是启用和禁用它们（禁用意味着用户不能再选中或取消选中该框）。其次，checked 属性未设置为 true/false（尽管这更有意义），您必须将 checked 设置为“checked”才能对其进行检查，并删除该属性以取消选中它。

```
$('#1').attr('checked', 'checked'); //Check
$('#1').removeAttr("checked"); //Uncheck 
```

# c# - Hooks - 找不到类型或命名空间 HookType

> ID：13652058
> 
> 赞同：1
> 
> 时间：2012-11-30T19:46:11.500
> 
> 标签：c#, api, winapi, hook

我正在尝试使用 C# 了解 Win32 API 中的挂钩。我真正想做的是如何在有低级用户活动（如鼠标移动或击键）时调用命令。我目前正在阅读这篇文章：http: [//msdn.microsoft.com/en-us/magazine/cc188966.aspx](http://msdn.microsoft.com/en-us/magazine/cc188966.aspx)

但是，当我从示例中输入以下代码时：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Runtime.InteropServices;
using Microsoft.Win32;
using System.ComponentModel;
using System.Reflection;

class Win32Hooks
{
[DllImport("user32.dll")]
public static extern IntPtr SetWindowsHookEx(HookType code,
    CbtHook.CbtProc func,
    IntPtr hInstance,
    int threadID);
[DllImport("user32.dll")]
public static extern int UnhookWindowsHookEx(IntPtr hhook);
static void Main()
{

}
} 
```

但是，我收到一个错误，即找不到类型或命名空间“HookType”。知道如何解决这个问题吗？如果有人可以为初学者推荐一篇关于 Win32 API Hooks with C# 的文章，那就太好了。我一直在努力寻找，但我最清楚的是上面粘贴的这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:58:05.423

HookType 在您参考的文章中定义。

```
 public enum HookType : int
    {
       WH_JOURNALRECORD = 0,
       WH_JOURNALPLAYBACK = 1,
       WH_KEYBOARD = 2,
       WH_GETMESSAGE = 3,
       WH_CALLWNDPROC = 4,
       WH_CBT = 5,
       WH_SYSMSGFILTER = 6,
       WH_MOUSE = 7,
       WH_HARDWARE = 8,
       WH_DEBUG = 9,
       WH_SHELL = 10,
       WH_FOREGROUNDIDLE = 11,
       WH_CALLWNDPROCRET = 12,        
       WH_KEYBOARD_LL = 13,
       WH_MOUSE_LL = 14
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:47:36.257

您还没有定义`HookType`类型（消息非常不言自明，不是吗？）

[http://www.pinvoke.net/default.aspx/user32.setwindowshookex](http://www.pinvoke.net/default.aspx/user32.setwindowshookex)

# google-api - Google 控制台重定向 URI 中的子域

> ID：13652062
> 
> 赞同：15
> 
> 时间：2012-11-30T19:46:41.377
> 
> 标签：google-api, subdomain, oauth-2.0, wildcard-subdomain, google-authentication

我有一个使用 google api（google drive）的网络应用程序。该应用程序被许多客户端使用，每个客户端都有一个子域来访问系统。

所以域是**appdomain.com**

对于用户，我有**foo.appdomain.com**， **bar.appdomain.com**，**etc.appdomain.com**。

但是在谷歌控制台重定向URI中，我必须手动放置重定向网址，有什么方法可以使用通配符重定向以使谷歌接受任何子域，例如： *.appdomain.com ？

有了这个，我可以使用redirect_uri中的用户子域进行谷歌授权调用：

```
https://accounts.google.com/o/oauth2/auth?redirect_uri=http://foo.appdomain.com 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T18:48:37.363

Google OAuth 不支持通配符匹配子域。您可以尝试使用 state 参数并在其中包含用户特定的信息。该参数将在响应中返回给您。更多关于状态的信息在[这里](https://developers.google.com/accounts/docs/OAuth2WebServer)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-12T18:01:33.807

您可以创建一个主子域来获取所有 google auth 响应并使用“state”查询参数重定向到正确的子域。

例如，创建 google.mydomain.com 并将其用作您的有效“重定向 URI”，Apache 将可以将此 url 重定向到具有重定向（或重写）功能的每个用户。

有关 apache 重定向的更多信息，[请访问 http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)

这是我正在使用的代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^google\.
RewriteCond %{QUERY_STRING} state=([a-z0-9]+)
RewriteRule ^(.*)$ http://%1.mydomain.com/$1 [L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T22:08:40.670

万岁有用但不必要的解决方法（感谢您让自己陷入困境谷歌）......

我使用 Google Drive 使用 javascript api 打开文件选择器，检索文件信息/url，然后使用 curl 将其下载到我的服务器。一旦我终于意识到我所有的通配符域都必须注册，我就中风了。

我现在做的是以下（这是我的用例，根据需要满足您的需求）

1.  `https://googledrive.example.com/oauth/index.php?unique_token={some unique token}`在您所在的页面上，创建一个 onclick 事件以在特定域 ( )中打开一个新窗口。

2.  在新的弹出窗口中，我完成了所有的谷歌驱动器身份验证，点击了一个按钮，打开了文件选择器，然后至少从文件中检索了我需要的元数据。然后我将令牌（主键）、access_token、downloadurl 和文件名存储在我的数据库（MySQL）中。

3.  回到第一步的页面，我创建了一个 setTimeout() 循环，该循环将使用相同的 unique_token 每秒运行一次 ajax 调用，以检查何时将其输入数据库。一旦找到它，我就终止循环，然后检索内容并按照我的意愿处理它们（在这种情况下，我通过一个单独的上传脚本上传它们，该脚本使用 curl 来获取文件）。

这显然不是处理这个问题的最佳方法，但它比将每个子域都输入谷歌云控制台要好。我敢打赌，您可能可以使用他们使用的谷歌服务器端 oauth 库来做到这一点，但我的用例有点复杂，而且我很暴躁，因为在过去 4 天里，我与谷歌进行了一次愚蠢的小集成，这让我很沮丧。

# c++ - 在 C++ 中使用数学

> ID：13652063
> 
> 赞同：3
> 
> 时间：2012-11-30T19:46:46.833
> 
> 标签：c++, math

我是一名 Java 开发人员，我也刚刚开始自学 C++。我知道 Java 和 c++ 之间的一些区别，但我不确定这里发生了什么。这是我遇到问题的代码。它只是来自一个教程，所以我不担心准确性。

```
void calculateHourly() {
    float totalWeeklyWage = mFltHourlySalary * mIntHoursWorked;
    float totalSales = mIntCostOfShoe * mIntUnitsSold;
    float totalCommission = (mIntHourlyCommission / 100) * totalSales;
    float grandTotalWage = totalWeeklyWage + totalCommission;

    cout << "You will get $" << grandTotalWage << " for selling " << mIntUnitsSold << " shoes in a week."
        << endl;
} 
```

问题是线路

`float totalCommission = (mIntHourlyCommission / 100) * totalSales;`

无论出于何种原因`totalCommission = 0`，当此方法完成运行时。我已经调试了这个和这个方法中的所有其他变量都等于它们应该等于的值。随着我的 Java 上限和我对 c++ 的一点了解告诉我这应该可以工作。

我是否在这种方法中遗漏了一些非常简单的东西，还是手头有更大的问题？非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:48:12.593

100 被转换为 int 并四舍五入。

你需要使用

```
 float totalCommission = (mIntHourlyCommission / 100.) * totalSales; 
```

或者

```
 float totalCommission = (mIntHourlyCommission / (float) 100) * totalSales; 
```

而是直接将其转换为正确的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T19:48:47.713

以下使用整数除法，其结果也是整数：

```
mIntHourlyCommission / 100 
```

要么`mIntHourlyCommission`转换为`float`，要么变成`100`文字`float`：`100.0f`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:50:10.250

您的 mIntHourlyCommission 是否为整数且小于 100？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:50:20.683

一般来说，你永远不应该使用花车来赚钱。使用可用于处理的最小数量的最大 int 类型（例如 long int 表示美分）。

# c# - 使用 c# 从 svn 预提交请求中获取分支名称

> ID：13652064
> 
> 赞同：2
> 
> 时间：2012-11-30T19:46:48.837
> 
> 标签：c#, svn

我们已经有一个用 c# 编写的 pre-commit.exe 钩子，它允许所有提交或阻止所有提交。我正在尝试将其设置为仅阻止我指定的 svn 分支的位置，但为此我需要知道如何获取预提交将要到达的分支。

这样做的唯一方法是使用 svnlook 并查看它正在更改的文件吗？如果是这样，我如何从中获得分支？（带有 c# 代码）

有什么想法吗？

很感谢任何形式的帮助！

# java - Java 中 x % 10 的结果

> ID：13652068
> 
> 赞同：-6
> 
> 时间：2012-11-30T19:47:32.140
> 
> 标签：java

谁能告诉我java中（x模10）的输出是什么？如果 x 是从 1（含）到 9（含）的正整数？我写了这段代码来看看它可能是什么，但什么也没得到：

```
 for(int i=1;i<10;++i)
    {
      int y = (i%10);
      System.out.println("y is:" + y);
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:50:33.377

如果您想测试 Java 代码并且无法访问开发环境，您仍然可以使用像 ideone.com 这样的公共服务。我[在这里](http://ideone.com/CTJQtJ)为你做的。你的程序打印

```
y is:1
y is:2
y is:3
y is:4
y is:5
y is:6
y is:7
y is:8
y is:9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:50:22.363

你应该去这个输出：

```
y is:1
y is:2
y is:3
y is:4
y is:5
y is:6
y is:7
y is:8
y is:9 
```

基本上， 如果你有`y % x`和. 否则，。`0 <= y < x``y % x = x``y % x = y - ( y / x)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:53:12.033

**对于整数`x`，结果`x % 10`是介于`-9`和`9`（包括两者）之间的整数。**

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)：

> 据说二进制 % 运算符从隐含的除法中产生其操作数的其余部分；左边的操作数是被除数，右边的操作数是除数。
> 
> 在 C 和 C++ 中，余数运算符只接受整数操作数，但在 Java 编程语言中，它也接受浮点操作数。
> 
> 在二进制数值提升（第 5.6.2 节）之后，整数操作数的余数运算产生一个结果值，使得 (a/b)*b+(a%b) 等于 a。
> 
> 即使在被除数是其类型的最大可能量级的负整数并且除数是-1（余数是0）的特殊情况下，这个恒等式也成立。
> 
> 由这个规则得出，余数运算的结果只有当被除数为负时才能为负，只有当被除数为正时才能为正。此外，结果的大小总是小于除数的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T19:54:23.173

X%10 读作 x 模 10，给出操作 x/10 的余数。

IE

例如：

```
If x=11

Then x%10 =1

If x=1

Then x%10 = 1 
```

# c - 如何将 Unicode 转义字符转换为 utf8？

> ID：13652070
> 
> 赞同：0
> 
> 时间：2012-11-30T19:47:43.557
> 
> 标签：c, encoding, utf-8

我看到了有关该主题的其他问题，但都缺少重要的细节：我想转换`\u00252F\u00252F\u05de\u05e8\u05db\u05d6`为 utf8。我了解您查看流中的 \u 后跟四个十六进制，然后将其转换为字节。问题如下：

1.  我听说有时你在后面找 4 个字节，有时在后面找 6 个字节，这是正确的吗？如果是这样，那么您如何确定它是哪个？例如是`\u00252F`4 字节还是 6 字节？
2.  在这种情况下`\u0025`映射到一个字节而不是两个（0x25），为什么？四个十六进制应该代表我应该转换为utf8的utf16吗？
3.  我如何知道文本应该是文字字符`\u0025`还是 unicode 序列？这是否意味着必须在流中转义所有反斜杠？
4.  最后，当我可以使用 iconv 为我做这件事时，我手工做这件事是不是很愚蠢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:55:46.237

如果您有可用的`iconv`接口，您可以简单地将`\u0123\uABCD`等序列转换为字节数组`01 23 AB CD`......，用 00 字节后跟 ASCII 字节替换任何未转义的 ASCII 字符，然后`iconv`使用转换描述符运行数组获得`iconv_open("UTF-8", "UTF-16-BE")`。

当然，您也可以更有效地自己直接处理输入，但这需要阅读和理解 UTF-16 和 UTF-8 的 Unicode 规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:20:45.633

在某些约定（如 C++11 字符串文字）中，您解析特定数量的十六进制数字，如 4 个 after`\u`和 8 个 after `\U`。这可能是也可能不是您提供的输入的约定，但这似乎是一个合理的猜测。其他样式，例如 C++ `\x`，您可以在 之后解析尽可能多的十六进制数字`\x`，这意味着如果您确实想在这些转义字符之一之后立即放置一个文字十六进制数字，则必须跳过一些圈。

获得所有值后，您需要知道它们的编码方式（例如，UTF-16 或 UTF-32）以及您想要的编码方式（例如，UTF-8）。然后，您使用一个函数以新编码创建一个新字符串。您可以编写这样的函数（如果您对这两种编码格式有足够的了解），也可以使用库。一些操作系统可能会提供这样的功能，但您可能希望使用第三方库来实现可移植性。

# iphone - 请求设备令牌

> ID：13652071
> 
> 赞同：0
> 
> 时间：2012-11-30T19:47:47.067
> 
> 标签：iphone, ios, ipad, push-notification

在处理推送通知时，didRegisterForRemoteNotificationsWithDeviceToken 会为通知注册设备并接收我们之后可以使用的 deviceToken，但是如果在应用程序启动时没有互联网并且 didRegisterForRemoteNotificationsWithDeviceToken 运行时会发生什么？

有没有办法强制 didRegisterForRemoteNotificationsWithDeviceToken 再次运行并接收令牌？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:30:02.260

您应该阅读此技术说明：[TN2265 - 推送通知故障排除](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

它说：

> 当安装第一个支持推送的应用程序时，iOS 或 Mac OS X 会尝试与系统上所有支持推送的应用程序共享的推送服务建立持久的网络连接。如果委托回调 application:didRegisterForRemoteNotificationsWithDeviceToken: 和 application:didFailToRegisterForRemoteNotificationsWithError: 均未调用，则表示此连接尚未建立。
> 
> 这不一定是错误情况。该系统可能根本没有互联网连接，因为它超出了任何手机信号塔或 Wi-Fi 接入点的范围，或者它可能处于飞行模式。**您的应用程序不应将此视为错误，而应正常运行，仅禁用依赖于推送通知的功能。**
> 
> 请记住，网络可用性可能会经常变化。一旦与推送服务的持久连接成功，就会调用前面提到的应用程序委托方法之一。

`registerForRemoteNotificationTypes`即使没有网络连接，您也应该在应用程序每次启动时调用。推送框架处理其余部分。在 didRegisterForRemoteNotificationsWithDeviceToken 中，您将令牌发送到您的服务器（如果尚未发送或令牌已更改）。

另请查看[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG)：

> 通过在每次应用程序启动时请求设备令牌并将其传递给提供者，您可以帮助确保提供者拥有设备的当前令牌。如果用户将备份还原到创建备份的设备或计算机之外的设备或计算机（例如，用户将数据迁移到新设备或计算机），他或她必须至少启动一次应用程序才能使其恢复再次收到通知。如果用户将备份数据恢复到新设备或计算机，或重新安装操作系统，则设备令牌会更改。此外，永远不要缓存设备令牌并将其提供给您的提供商；始终在需要时从系统获取令牌。如果您的应用程序之前已注册，请调用 registerForRemoteNotificationTypes：

# php - 通过 PHP 从 MySQL 数据库中检索行

> ID：13652082
> 
> 赞同：3
> 
> 时间：2012-11-30T19:48:53.690
> 
> 标签：php, mysql, database, row

请多多包涵，我是新来的——我刚刚开始使用 PHP。老实说，这是我的第一个项目，所以请多多包涵。:)

```
 $row = mysql_fetch_array(mysql_query("SELECT message FROM data WHERE code = '". (int) $code ."'         LIMIT 1"));
    echo $row['message']; 
```

这是否足以根据预定义的“$code”变量从数据库中获取消息？我已经成功连接到数据库。

这段代码似乎什么也没返回——只是一个空格。:(

我将不胜感激任何建议和帮助。:)

更新：

现在代码如下：

```
 <?php
    error_reporting(E_ALL);
   // Start MySQL Connection
    REMOVED FOR SECURITY
    // Check if code exists
    if(mysql_num_rows(mysql_query("SELECT code FROM data WHERE code = '$code'"))){
    echo 'Hooray, that works!';
    $row = mysql_fetch_array(mysql_query("SELECT message FROM data WHERE code = '". (int) $code     ."' LIMIT 1")) or die(mysql_error());
    echo $row['message'];
    }
    else {
    echo 'That code could not be found. Please try again!';
    }
    mysql_close();
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:57:42.410

最好不要像这样将函数链接在一起，因为如果查询失败，提取也会失败，并导致错误消息实际上可能无法指示真正的问题是什么。

此外，不要在 SQL 查询中为整数值加上引号。

```
if(! $rs = mysql_query("SELECT message FROM data WHERE code = ". (int) $code ." LIMIT 1") ) {
    die('query failed! ' . mysql_error());
}
$row = mysql_fetch_array($rs);
echo $row['message']; 
```

而标准的“不要使用`mysql_*`函数，因为不推荐使用等等等等”......

如果您仍然收到空白响应，您可能需要检查您是否没有返回 0 行。进一步的测试还将包括`echo`查询查询以查看它是否正确形成，并自己运行它以查看它是否返回正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:00:35.193

一些评论：

1.  不要使用`mysql_*`. 它已被弃用。使用[mysqli_*](http://us3.php.net/mysqli)函数或[PDO 库](http://us3.php.net/pdo)
2.  每当您在查询中输入值（此处为`$code`）时，请使用[mysqli_real_escape_string](http://us3.php.net/manual/en/mysqli.real-escape-string.php)或[PDO 的 quote](http://us3.php.net/manual/en/pdo.quote.php)函数来防止 SQL 注入
3.  始终检查错误。

使用 PDO 的示例：

```
//connect to database
$user = 'dbuser';  //mysql user name
$pass = 'dbpass';  //mysql password
$db   = 'dbname';  //name of mysql database
$dsn = 'mysql:host=localhost;dbname='.$db;
try {
    $con = new PDO($dsn, $user, $pass);
} catch (PDOException $e) {
    echo 'Could not connect to database: ' . $e->getMessage();
    die();
}

//escape code to prevent SQL injection
$code = $con->quote($code);
//prepare the SQL string
$sql = 'SELECT message FROM data WHERE code='.$code.' LIMIT 1';
//do the sql query
$res = $con->query($sql);
if(!$res) {
    echo "something wrong with the query!";
    echo $sql; //for development only; don't output SQL in live server!
    die();
}
//get result
$row = $res->fetch(PDO::FETCH_ASSOC);
//output result
print_r($row); 
```

# python - python中的正则表达式：删除方括号和括号内的部分短语

> ID：13652089
> 
> 赞同：5
> 
> 时间：2012-11-30T19:49:16.350
> 
> 标签：python, regex

我有一个维基百科转储，正在努力寻找合适的正则表达式模式来删除表达式中的双方括号。以下是表达式的示例：

`line = 'is the combination of the code names for Herbicide Orange (HO) and Agent LNX, one of the [[herbicide]]s and [[defoliant]]s used by the [[United States armed forces|U.S. military]] as part of its [[herbicidal warfare]] program, [[Operation Ranch Hand]], during the [[Vietnam War]] from 1961 to 1971.'`

我希望在以下条件下删除所有方括号：

*   如果方括号内没有垂直分隔符，请删除括号。

    例子：`[[herbicide]]s`变成`herbicides`。

*   如果括号内有垂直分隔符，请删除括号并仅使用分隔符后面的短语。

    例子：`[[United States armed forces|U.S. military]]`变成`U.S. military`。

我尝试使用`re.match`但`re.search`无法达到所需的输出。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T19:53:15.753

你需要的是`re.sub`. 请注意，方括号和管道都是元字符，因此需要对其进行转义。

```
re.sub(r'\[\[(?:[^\]|]*\|)?([^\]|]*)\]\]', r'\1', line) 
```

替换字符串中的`\1`是指括号内匹配的内容，*不*以开头`?:`（即在任何情况下都是您想要的文本）。

有两个警告。这允许在打开和关闭支架之间只有一个管道。如果有多个，则需要指定是想要第一个之后的所有内容还是最后一个之后的所有内容。另一个需要注意的是，`]`在左括号和右括号之间是不允许的。如果这是一个问题，仍然会有一个正则表达式解决方案，但它会复杂得多。

有关该模式的完整说明：

```
\[\[        # match two literal [
(?:         # start optional non-capturing subpattern for pre-| text
   [^\]|]   # this looks a bit confusing but it is a negated character class
            # allowing any character except for ] and |
   *        # zero or more of those
   \|       # a literal |
)?          # end of subpattern; make it optional
(           # start of capturing group 1 - the text you want to keep
    [^\]|]* # the same character class as above
)           # end of capturing group
\]\]        # match two literal ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T19:58:12.577

您可以使用`re.sub`来查找`[[`and之间的所有内容`]]`，我认为传入 lambda 函数来进行替换会稍微容易一些（从最后一个 '|' 开始获取所有内容）

```
>>> import re
>>> re.sub(r'\[\[(.*?)\]\]', lambda L: L.group(1).rsplit('|', 1)[-1], line)
'is the combination of the code names for Herbicide Orange (HO) and Agent LNX, one of the herbicides and defoliants used by the U.S. military as part of its herbicidal warfare program, Operation Ranch Hand, during the Vietnam War from 1961 to 1971.' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T19:57:32.717

```
>>> import re
>>> re.sub(r'\[\[(?:[^|\]]*\|)?([^\]]*)]]', r'\1', line)
'is the combination of the code names for Herbicide Orange (HO) and Agent LNX, one of the herbicides and defoliants used by the U.S. military as part of its herbicidal warfare program, Operation Ranch Hand, during the Vietnam War from 1961 to 1971.' 
```

解释：

```
\[\[       # match two opening square brackets
(?:        # start optional non-capturing group
   [^|\]]*   # match any number of characters that are not '|' or ']'
   \|        # match a '|'
)?         # end optional non-capturing group
(          # start capture group 1
   [^\]]*    # match any number of characters that are not ']'
)          # end capture group 1
]]         # match two closing square brackets 
```

通过将上述正则表达式的匹配项替换为捕获组 1 的内容，您将获得方括号的内容，但只有分隔符之后的内容（如果存在）。

# css - CSS3中的动画

> ID：13652090
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:49:16.583
> 
> 标签：css, animation, hover

我有以下代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>What</title>
<style type="text/css">
#box1
    {
    position: relative;
    width: 300px;
    border: 1px solid black;
    box-shadow:  -3px 8px 34px  #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 100px; top:  50px;
    height:  150px;

}
    #box1:hover {

    }

@-webkit-keyframes myfirst
{
0%   { right:100px; top:50px;background: yellow;}

50%  {background:blue; right:700px; top:50px;}

100% { right:100px; top:50px; background: yellow}

}
    #stam {font-size: large;
           background: green;
           width: 100px;
           top: 400px;
           position: absolute;
    }
    #stam:hover { -webkit-animation:myfirst 5s;

    }
</style>
</head>
<body dir="rtl">

<div id="box1"></div>
  <div id="stam">1234567</div>
</body>
</html> 
```

我的问题是：当我将鼠标放在“stam”div 上时，我该怎么做（没有 JS 更好） - “box1” div 会移动（将在代码中制作动画）？我添加了我的代码（这是行不通的）。希望得到帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:55:51.787

如果你`#stam`要*追随*你`#box1`，你可以使用`~`选择器 -[**演示**](http://jsfiddle.net/XEZke/1/)

```
#box1:hover ~ #stam { -webkit-animation:myfirst 5s; }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:10:38.317

如果没有 JS，除非您更改元素的顺序/结构，否则您将无法做到这一点。

这是一些 jQuery 代码，它将为您（在 Webkit 浏览器中）做一些基本的动画，只需在关闭 DOM 之前将其放入您的 HTML 中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
    $(document).ready(function(){
      $('#stam').on('mouseover', function(){
        $('#box1').css('-webkit-animation', 'myfirst');
        $('#box1').css('-webkit-animation-duration', '5s');
      })​;
    });
</script> 
```

# php - 如何在 PHP 中组织“能够”的类

> ID：13652092
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:49:20.640
> 
> 标签：php, oop, interface

我在 PHP 和 Yii 中有一个命名空间应用程序。我现在需要实现“orderable.php”，并希望将这些接口全部保存在一个文件夹中。我不确定如何称呼这个文件夹。有什么建议么？在 Java 中，这似乎要简单得多^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:53:07.393

如果你有命名空间的应用程序，迟早你会注意到接口也应该有自己的命名空间，所以最好遵循[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)并将其放在命名空间目录树中的类旁边。

# sql-server-2008 - 在水晶报表 11 的新窗口中打开链接

> ID：13652093
> 
> 赞同：1
> 
> 时间：2012-11-30T19:49:24.907
> 
> 标签：sql-server-2008, sql-server-2008-r2, crystal-reports-xi, crystal-reports-2010

我也有在新窗口中打开链接的同样问题。

报告中有超链接列。我想在新窗口中打开该链接。

这是示例链接：

www.facerek.com

这个链接会根据列值是动态的，所以有写在公式字段中的代码

IF x=1 然后 "www.facerek.com/abcd=" &{TC.ID} ELSE "www.facerek.com/efg=" &{TC.ID}

我正在使用水晶 11。

我怎样才能做到这一点？

# java - 使用 Java Logging API (java.util.logging) 记录 Oracle Java 存储过程

> ID：13652097
> 
> 赞同：1
> 
> 时间：2012-11-30T19:49:47.667
> 
> 标签：java, oracle, logging, stored-procedures, oracle10g

我在 Oracle (10g) 中开发了一个新的 Java(1.4) 存储过程。我以前从未这样做过，我通常将 Java 和 DB 分开，但这是必需的。所以我开发了一个可以部署在 Tomcat 中的 Java 代码以及 Oracle 中的存储过程。为此，我使用了 Java Logging API。

我可以在 Oracle 中执行存储过程，但找不到日志。我想知道我应该怎么做才能打印日志，可以是 Oracle 日志或 trc 文件，或者如果可能的话，甚至可以将其配置为将日志打印到另一个特定文件夹。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:46:37.797

正如 PeskyGnat 在[此答案](https://stackoverflow.com/questions/5665984/how-to-debug-java-stored-procedures-in-oracle)中指定的，您必须在文件夹中创建一个 logging.properties 文件：

> $ORACLE_HOME/javavm/lib

配置此文件后，您可以看到登录：

> $ORACLE_BASE/admin/$INSTANCE/udump

就我而言，这是 Solaris，所以第一条路径是：

> /export/home/oracle/app/oracle/product/10.2.0/Db_1/javavm/lib

第二个：

> /export/home/oracle/app/oracle/admin/

* * *

* * *

**作为额外信息，为了便于查找日志文件，您可以在 Bash shell 中键入以下内容：**

```
ls -altr 
```

这是 logging.properties 文件的示例：

```
############################################################
#   Default Logging Configuration File
#
# You can use a different file by specifying a filename
# with the java.util.logging.config.file system property.  
# For example java -Djava.util.logging.config.file=myfile
############################################################
############################################################
#   Global properties
############################################################
# "handlers" specifies a comma separated list of log Handler 
# classes.  These handlers will be installed during VM startup.
# Note that these classes must be on the system classpath.
# By default we only configure a ConsoleHandler, which will only
# show messages at the INFO and above levels.
handlers= java.util.logging.ConsoleHandler
# To also add the FileHandler, use the following line instead.
#handlers= java.util.logging.FileHandler, java.util.logging.ConsoleHandler
# Default global logging level.
# This specifies which kinds of events are logged across
# all loggers.  For any given facility this global level
# can be overriden by a facility specific level
# Note that the ConsoleHandler also has a separate level
# setting to limit messages printed to the console.
.level= INFO
############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################
# default file output is in user's home directory.
java.util.logging.FileHandler.pattern = %h/java%u.log
java.util.logging.FileHandler.limit = 50000
java.util.logging.FileHandler.count = 1
java.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter
# Limit the message that are printed on the console to INFO and above.
java.util.logging.ConsoleHandler.level = INFO
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter
############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

# For example, set the com.xyz.foo logger to only log SEVERE
# messages:
**<your.class.logger>.level = <level> (i.e.: INFO)** 
```

# objective-c - Xcode：如何正确构建静态库项目？

> ID：13652103
> 
> 赞同：7
> 
> 时间：2012-11-30T19:50:00.427
> 
> 标签：objective-c, xcode, xamarin.ios

这个问题对于 Xcode 专业人士来说很容易，但对于 MonoTouch 开发人员来说，这似乎是不可能解决的。:-)

我正在使用 Xcode 4.5，我想针对 iOS 5.1 及更高版本和 iOS Simulator 5.1 及更高版本。

我在这里有一个库项目，它带有一个名为“DemoLib”的预构建二进制文件（无扩展，大小为 11MB）。该库是模拟器和 iOS 5.1+ 的胖库。我可以毫无问题地使用该库。但是，如果我尝试自己构建库，我最终会得到一个“DemoLib.a”文件（注意扩展名和 30MB 的大小）。如何获得相同的构建结果？与没有扩展名的文件相比，什么是 .a 文件？我尝试在 Xcode 中构建“用于运行”和“用于归档”的项目。两者都产生相同的 30MB .a 文件。我期待 Xcode 中有一些下拉菜单，可以在其中选择“DEBUG”或“RELEASE”构建，而后者将创建较小的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:28:47.080

当然，如果没有看到框架的项目文件，我永远无法判断。话虽如此，这里有一个创建和编译 iOS 框架的优秀指南：[https ://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)

使用上述指南，您应该能够从头开始重新创建框架的项目，将您拥有的文件添加到其中，并正确编译它。

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:17:30.543

它带有 Makefile 吗？创建一个新目标，将目标的构建设置设置为 Makefile 中的内容，然后将您的项目设置为依赖于该新目标。

带有 .a 的文件是一个静态库，这意味着它不依赖任何外部资源，它需要的所有代码都在其中编译。我认为没有扩展通常意味着动态库，这意味着它将取决于系统上存在的一些依赖项来链接。也许这就是 .a 更大的原因。我认为 Xcode 默认会构建静态的，因为 iOS 不允许使用动态库。

要构建的内容的下拉列表在您的方案中。Command+shift+< 查看您的方案。在该方案中，您可以编辑每种构建方法将使用的环境。

# objective-c - NSScrollView 自动调整大小

> ID：13652107
> 
> 赞同：0
> 
> 时间：2012-11-30T19:50:09.600
> 
> 标签：objective-c, xcode, macos, cocoa, nsscrollview

我有一个`NSScrollView`，我想自动调整它的大小。我会向它发送一个方法来`documentView`获取它的大小，就像`table view`我会计算并返回所需的行大小一样。

我的问题是，什么时候？如何确定`documentView`滚动视图的大小是否已调整？

有谁知道如何做到这一点？我必须重写哪些方法？

如果我弄明白了，我会在 Github 上发布这个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:47:10.980

任何 NSView 或子类都会在调整大小开始`-viewWillStartLiveResize`和`-viewDidEndLiveResize`结束时调用。
[NSView 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)

或者，如果您想知道何时调整窗口大小：
[堆栈溢出：实时获取窗口高度/宽度](https://stackoverflow.com/questions/2604143/get-window-height-width-in-real-time)

# heroku - 在 Heroku App 之间共享文件夹

> ID：13652115
> 
> 赞同：1
> 
> 时间：2012-11-30T19:50:21.257
> 
> 标签：heroku

对于我的项目，我希望能够设置多个网站（App），并根据客户的要求，激活和设置模块。这些模块可以是新闻模块、图像查看器模块等。

我的引擎由脚本和库组成，这些脚本和库管理一些事情，例如 WebApp 路由、模块、CMS 的用户权限。我想在我的所有应用程序之间共享此代码，以避免不必要的重复。

我想知道在 Heroku 上执行此操作的最佳方法是什么，因为我对此 (Heroku) 完全陌生，而且我不确定这是否可行。

另外，我是否错误地认为每个网站都是一个应用程序，即使它们之间的唯一区别基本上是模板和单个设置文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:08:56.550

1.  如果您没有使用 git 的经验，请熟悉它。
2.  我建议拥有一个具有不同分支的应用程序，您可以在其中保留特定于实例的配置。
3.  您为每个网站创建一个应用程序实例。
4.  您将特定分支推送到特定应用程序，例如

    git push git@heroku.com:.git :master

# gwt - GWT DateBox 和 EditorErrors

> ID：13652119
> 
> 赞同：2
> 
> 时间：2012-11-30T19:50:37.713
> 
> 标签：gwt, gwt2, datebox, gwt-editors

当绑定到驱动程序的 a 获取无效格式字符串`EditorErrors`时，生成/参与验证的最佳方法是什么。`DateBox`

目前，在 中`DatePicker`，它将字段标记为红色，但是需要让它参与到`hasErrors`父级中`SimpleBeanEditorDriver`并从 中报告这种类型的无效格式错误，`dateBox`以便为用户生成自定义错误消息。

# android - 将带有 json 的图像解析到文本旁边的 ListView

> ID：13652120
> 
> 赞同：2
> 
> 时间：2012-11-30T19:50:39.820
> 
> 标签：android, json, android-listview, android-asynctask

我正在开发一个应用程序，该应用程序需要获取新标题并在 listView 中在它们旁边添加拇指图像，但我不知道如何将照片 url 转换为图像并放入我制作的 listView 中，代码如下：

我可以获取图像 url，但我不知道如何添加到我得到的文本旁边的 listView 中，有什么帮助吗？

```
 private class theJob extends AsyncTask<String, Void, ArrayList<HashMap<String, String>>>{

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        ListAdapter adapter = new SimpleAdapter(MainActivity.this, result, R.layout.list_item,
                   new String[] {TAG_CAT_NAME }, new int[] {R.id.label });
          setListAdapter(adapter);
          Log.d("adapter", "works");

    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub
        Log.d("Format", params[0]);
        Log.d("URL", params[1]);

        ArrayList<HashMap<String, String>> cat = new ArrayList<HashMap<String,String>>();
        JsonParser jparser = new JsonParser();
        Log.d("url", "to the other class");
        JSONArray jArray = jparser.getJSONfronUrl(params[1]);
           Log.d("json array", "created");
           try{
                for(int i=0 ; i< jArray.length()  ; i++){
                   JSONObject joob = jArray.getJSONObject(i);
                   Log.d("jobj", "done");
                   String title = joob.getString(params[0]);
                   Log.d(TAG_CAT_NAME, "done");
                   cat_id = joob.getString(TAG_CAT_ID);
                   Log.d(TAG_CAT_ID, cat_id); 
                   cat_url.add(i, joob.getString(TAG_CAT_URL)) ;
                   HashMap<String, String> map = new HashMap<String, String>();
                   map.put(params[0], title);

                   cat.add(map);
               }

           }catch(JSONException e){
               e.printStackTrace();
           }
           Log.d("Going to ADAPTER", "working");
           return cat;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:00:58.500

这是一个谷歌[示例](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)，它将帮助您获得所需的内容:)

**更新**

[在这里，您将获得有关在列表视图](http://evancharlton.com/thoughts/lazy-loading-images-in-a-listview)中延迟加载图像的更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:21:49.207

您可以使用 SmartImageView，它是 Android 标准 ImageView 的替代品，它还允许从 URL 或用户的联系人地址簿加载图像。图像缓存到内存和磁盘以实现超快速加载。

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)

# magento-1.7 - Magento：具有相同 id “1”的项目 (Mage_Sales_Model_Order) 已经存在

> ID：13652123
> 
> 赞同：0
> 
> 时间：2012-11-30T19:51:04.773
> 
> 标签：magento-1.7, magento

在我将我的 Magento 商店从一个托管服务提供商迁移到另一个托管服务提供商之后。在我开始迁移之前删除我所有的测试订单并将订单号的计数器设置为 0。我有很大的问题。当我想在后台进入销售->订单时，我收到一个错误“*处理您的请求时出错，出于安全原因，默认情况下禁用异常打印。错误日志记录号：213759415* ”

如果我进入 var/report 并打开文件“213759415”，我会看到 36 行，第一行是：

a:5:{i:0;s:64:"具有相同 id "1" 的项目 (Mage_Sales_Model_Order) 已经存在";i:1;s:5345:"#0 /usr/home/xxx/domains/xxx .com/public_html/lib/Varien/Data/Collection/Db.php(576): Varien_Data_Collection->addItem(Object(Mage_Sales_Model_Order))

我有 Magento 1.7.0.2

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:11:37.933

我在数据库中找到了名为“onestepcheckout”的表格，我忘记删除测试订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:55:49.817

确保您正确删除了所有测试订单。

您可以使用以下模块来执行此操作：

[http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html](http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html)

# iphone - Xcode - 有没有办法禁用 Iphone 充电？

> ID：13652125
> 
> 赞同：2
> 
> 时间：2012-11-30T19:51:14.353
> 
> 标签：iphone, xcode, battery

我知道这是一个长镜头，但是有没有办法（以编程方式）在手机连接到充电器时阻止手机充电？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:37:59.963

不会。您可以使用 UIDevice 上的几种方法来监控电池的状态，但从天文数字上讲，它不太可能有一个 API 来阻止充电。

# facebook - 更改应用显示名称会丢失翻译？

> ID：13652126
> 
> 赞同：1
> 
> 时间：2012-11-30T19:51:27.733
> 
> 标签：facebook, internationalization, translation

我有一个显示名称的应用程序：“ABC”

![在此处输入图像描述](../Images/63088241a66dfcea39b7fda5f8f696ee.png)

整个应用程序是用 facebook i18n 翻译的，它可以工作：

> “史蒂夫在**ABC上****买**了一辆汽车” -> “史蒂夫·康普鲁 um carro no ABC

 **但是发生的事情是，当我将应用程序更改为“ABCDEF”时，提要消息不再附带翻译。而是仅使用默认语言英语。

我注意到的一件事是，在翻译管理 ui 中，带有应用程序名称的令牌与旧的令牌一起使用，但它至少应该与应用程序命名空间一起使用。

![在此处输入图像描述](../Images/ea6903188d7e241577a2d1740a0c0fd9.png)

谢谢！**

# android - 延迟警报对话框

> ID：13652130
> 
> 赞同：0
> 
> 时间：2012-11-30T19:51:42.783
> 
> 标签：android, android-alertdialog

有可能吗？我有一个活动和一个警报对话框。但我需要先运行活动，然后 2 秒后出现警报对话框。我不知道怎么做。问候

PD：我不是说英语的人

```
public class Pantalladeinicio extends Activity {

private final int SPLASH_DISPLAY_LENGTH = 2000; 

 @Override
 public void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_NO_TITLE); 
  getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
  setContentView(R.layout.index);

  if(checkInternetConnection()==true) {

  new Handler().postDelayed(new Runnable() {

   public void run() {
    Intent mainIntent = new Intent(Pantalladeinicio.this,
      NetworkingActivity.class);
    mainIntent.putExtra("MAIN", true);
    startActivity(mainIntent);
    finish();
   }
  }, SPLASH_DISPLAY_LENGTH); 

  } 

  else
  {
         AlertDialog.Builder dialogo1 = new AlertDialog.Builder(this);  
            dialogo1.setTitle("Importante");  
            dialogo1.setMessage("Debe activar la Conexion a Internet");            
            dialogo1.setCancelable(false);  
            dialogo1.setPositiveButton("Aceptar", new  DialogInterface.OnClickListener() { 

                public void onClick(DialogInterface dialogo1, int id) {  

                    aceptar();  
                }  
            }); 
            dialogo1.show();
      Log.v("TAG", "Internet Connection Not Present");

  }

 }

 public void aceptar() {
       // Toast t=Toast.makeText(this,"Bienvenido a probar el programa.", Toast.LENGTH_SHORT);

     super.onDestroy();
      finish();

    }

 private boolean checkInternetConnection() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        // test for connection
        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            return true;
        } else {
            //Log.v("TAG", "Internet Connection Not Present");

            return false;
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:38:07.450

我不明白您的问题，但查看接受的答案，我建议更改现有代码的顺序：

```
new Handler().postDelayed(new Runnable() {
    public void run() {
        if(checkInternetConnection()) {
            Intent mainIntent = new Intent(Pantalladeinicio.this, NetworkingActivity.class);
            mainIntent.putExtra("MAIN", true);
            startActivity(mainIntent);
            finish();
        } 
        else
        {
            AlertDialog.Builder dialogo1 = new AlertDialog.Builder(this);  
            dialogo1.setTitle("Importante");  
            dialogo1.setMessage("Debe activar la Conexion a Internet");            
            dialogo1.setCancelable(false);  
            dialogo1.setPositiveButton("Aceptar", new  DialogInterface.OnClickListener() { 
                public void onClick(DialogInterface dialogo1, int id) {  
                    aceptar();  
                }  
            }); 
            dialogo1.show();
            Log.v("TAG", "Internet Connection Not Present");
        }
    }
}, SPLASH_DISPLAY_LENGTH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:00:28.733

将您的代码更改为使用`Thread`和`runOnUiThread`

```
 //Your Code here...
    else
      {
    myThread();
      }
    }
    public void myThread(){
        Thread th=new Thread(){

         @Override
         public void run(){
          try
          {

           Thread.sleep(2000);
           Pantalladeinicio.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
             // TODO Auto-generated method stub
                AlertDialog.Builder dialogo1 = new AlertDialog.Builder(Pantalladeinicio.this);  
                dialogo1.setTitle("Importante");  
                dialogo1.setMessage("Debe activar la Conexion a Internet");            
                dialogo1.setCancelable(false);  
                dialogo1.setPositiveButton("Aceptar", new  DialogInterface.OnClickListener() { 

                    public void onClick(DialogInterface dialogo1, int id) {  

                        aceptar();  
                    }  
                }); 
                dialogo1.show();
          Log.v("TAG", "Internet Connection Not Present");
               }
           });

          }catch (InterruptedException e) {
        // TODO: handle exception
       }
    }
        };
        th.start();
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:00:56.160

我假设您想在进入 else 块后等待 2 秒钟。您可以通过在调用`Thread.sleep(2000);`之前调用来做到这一点`dialogo1.show();`。但是，这会使您的程序看起来“冻结”。为了避免这种情况，您可以创建一个单独的线程来休眠然后显示对话框。

# facebook - 是否可以通过 Facebook API 访问特定 Open Graph 故事的洞察数据？

> ID：13652131
> 
> 赞同：1
> 
> 时间：2012-11-30T19:51:42.553
> 
> 标签：facebook, api, facebook-opengraph, facebook-insights

给定一个 Open Graph 故事 ID，是否可以通过任何 Facebook API 读取关于该故事的洞察印象和推荐数据？

对 API 文档的彻底审查表明它不是（但 FB 的 API 文档可能会过时），并且以前的 SO 问题并不乐观（但没有一个答案似乎是确定的，而且无论如何时间都会改变）。对于它们可能在哪里可用，以下内容似乎是一个合理的猜测：

```
https://graph.facebook.com/[og_story_id]/insights 
```

沿着这些线测试查询不会出错，但也没有出现任何真实数据。

作为附录和潜在的黑客攻击，是否可以访问 Open Graph 故事的评论或点赞数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T03:32:01.253

无法使用端点更新现有的 isight，只有它只允许 get 请求发布，并且该端点不允许 put

# entity-framework - 在实体框架项目中添加对项目的引用

> ID：13652135
> 
> 赞同：2
> 
> 时间：2012-11-30T19:51:55.687
> 
> 标签：entity-framework, entity-framework-4.1, visual-studio-2012, nuget, nuget-package

我在 Visual Studio 2012 中有两个实体框架解决方案。我使用 Nuget 在两者上下载 EF5。

在第一个解决方案/项目中，我创建了一个类库，我想将它添加到解决方案 2 中的项目中。我不知道如何添加它。我注意到有一个文件夹

```
..\..\packages\EntityFramework.5.0.0\lib\net45 
```

两个问题：

1.  文件夹（包）来自哪里？（只是猜测它来自 Nuget 但不确定..）
2.  如何添加引用？（浏览器到此文件夹以找到它或使用 Nuget？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:55:11.123

第一：它是您的项目文件夹的一个文件夹，实际上它在您的解决方案旁边，它已从[http://www.nuget.org](http://wwww.nuget.org)网站下载。

第二：通过NuGet添加它（通过单击项目并选择Manage Packages或使用命令行power-shell Install-Package），它将管理它不再下载并引用同一文件

# c - 如何实现 exit() 函数的模拟？-std=c99

> ID：13652137
> 
> 赞同：2
> 
> 时间：2012-11-30T19:52:05.577
> 
> 标签：c, exit, c99, termination

我正在写一个大学项目。用标准 C99 编写。要求之一是缺少*exit()；*功能。是否可以实现类似的功能？我试图制作一个用减号*argc调用**main*的函数来检测退出。这是一个愚蠢的尝试，因为第一个*主要*继续。

 **只是项目描述中指定exit()使用exit会降低分数。我理解它要求我通过指针运行代码并在函数的返回值中返回错误。我对实践更感兴趣。只为我自己。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T19:57:09.440

我*认为*您误解了要求：他们可能说了类似`do not use exit()`. 这并不意味着你应该实现你自己的`exit()`，恰恰相反：它们可能意味着你的程序的唯一退出点应该是你的 main 函数的结尾（或 main 函数中的 return 语句），它被认为是良好的编程风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T22:28:08.757

`exit()`是一种系统级工具，如果不知道操作系统如何实现它（Linux？Windows？嵌入式系统？），您就无法自行实现。正如 Daniel Fischer 所提到的，您可以调用`abort()`which 基本上会执行与 exit 相同的操作并退出程序。

还有其他“技巧”可以让您的程序在不`exit()`显式调用的情况下中止，但这些只是技巧，不应在生产代码中使用。

1.  使用 C 链接创建 C++ 函数并引发异常

    extern "C" MyExit() { throw std::exception(); }

2.  `signal()`使用 SIGKILL调用

3.  称呼`abort()`

4.  编写一些汇编代码来展开调用堆栈，直到它到达调用的函数`main`并将返回值插入正确的返回寄存器并从那里开始。我不认为你可以在纯 C 中做到这一点，因为 ABI 不能直接访问。但至少这将是唯一不涉及操作系统（仅 ABI）的方法。**

# jquery - 在元素内换行

> ID：13652140
> 
> 赞同：15
> 
> 时间：2012-11-30T19:52:14.563
> 
> 标签：jquery

我需要用跨度将文本包装在 div 中。

```
<div class="item">
   <span class="count"></span>
   Text that needs to be wrapped.
</div>

<div class="item">
   <span class="count"></span>
   Text that needs to be wrapped.
</div>

<div class="item">
   <span class="count"></span>
   Text that needs to be wrapped.
</div> 
```

试过这个，但它并没有真正起作用......

```
$('.item').text().wrap('<span class="new" />'); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T20:08:18.723

您可以使用[contents()](http://api.jquery.com/contents/)和[.eq()](http://api.jquery.com/eq/)

```
$('.item').each(function(i, v) {
    $(v).contents().eq(2).wrap('<span class="new"/>')
});​ 
```

[http://jsfiddle.net/qUUbW/](http://jsfiddle.net/qUUbW/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-30T20:06:48.147

怎么样

```
$('.item').contents().filter(function(){
    return this.nodeType == 3 && $.trim(this.nodeValue).length;
}).wrap('<span class="new" />'); 
```

[http://jsfiddle.net/mowglisanu/x5eFp/3/](http://jsfiddle.net/mowglisanu/x5eFp/3/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T19:59:38.633

**单个 DIV**：

```
var txt = $('.count')[0].nextSibling;
$(txt).wrap('<span class="new" />'); 
```

[JSfiddle](http://jsfiddle.net/spliter/TELV6/)

**多个DIV**：

```
var markers = document.querySelectorAll('.count'),
    l = markers.length,
    i, txt;

for (i = l - 1; i >= 0; i--) {
    txt = markers[i].nextSibling;
    $(txt).wrap('<span class="new" />');
} 
```

[JSFiddle](http://jsfiddle.net/spliter/CLfWc/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T20:19:08.927

我对此的看法：

```
$('.item').contents().each(function() {
    if (this.nodeType == 3 && $.trim(this.nodeValue) != '') {
       $(this).wrap('<span class="textwrapped"></span>');
    }
}); 
```

该`$.trim`部分是必需的，因为用于缩进 html 代码的选项卡也是我们必须过滤掉的文本节点（例如，作为之前的选项卡`<span class="count">`）

查看工作[**演示**](https://tinker.io/c2549)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T19:55:36.153

```
$('.item').html($('<span class="new">').text($(".item").text())) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-15T04:46:18.117

如果您需要将文本内容包装在元素中，请使用`wrapInner`

[https://api.jquery.com/wrapInner/](https://api.jquery.com/wrapInner/)

示例 html

```
<div class="item">contents inside needs to be wrapped</div>` 
```

```
// jQuery
$('.item').wrapInner('<span></span>') 
```

# android - 从 Thread.UncaughtExceptionHandler 启动服务？

> ID：13652153
> 
> 赞同：4
> 
> 时间：2012-11-30T19:53:03.193
> 
> 标签：android, exception, process, android-service, crash-reports

我正在尝试设置[此答案](https://stackoverflow.com/questions/601503/how-do-i-obtain-crash-data-from-my-android-application/8427050#8427050)中提到的全局异常处理服务。这种方法听起来很合乎逻辑，因为在崩溃后，我自定义的代码[`Thread.UncaughtExceptionHandler`](http://developer.android.com/reference/java/lang/Thread.UncaughtExceptionHandler.html)可能无法成功执行，要么是因为应用程序可能未处于稳定状态，要么是因为在进程被操作系统杀死之前可能没有足够的时间。

不幸的是，这种方法似乎不起作用，因为服务在同一个进程中启动，所以它也被杀死了。如何从处理程序启动服务`uncaughtException()`？我可以强制服务以完全独立的过程启动吗？

* * *

我正在设置我的自定义默认（VM 级别）异常处理程序，`Application`如下所示：

```
public class MyApp extends Application {    
    @Override
    public void onCreate() {
        Thread.setDefaultUncaughtExceptionHandler(
            MyExceptionReporter.getInstance(this));
        ... 
```

在我的自定义处理程序中，我正在启动这样的服务：

```
final Intent i = new Intent(MyExceptionService.INTENT);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra(MyExceptionService.EXTRA_STACK_TRACE,
    Log.getStackTraceString(ex));
mContext.startService(i); 
```

该服务在`AndroidMaifest.xml`文件中进行了说明，并从应用程序的其他地方正常启动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T20:44:43.293

啊，我想通了。关键是添加**`android:process`**到清单中，这会强制服务在单独的过程中启动。这可以防止在应用程序被终止时服务被终止。

```
<service
    android:name="your.package.blah.blah.MyExceptionService"
    android:process=":exception" >
    <intent-filter>
        <action android:name="your.package.blah.blah.REPORT" />
    </intent-filter>
    </service> 
```

# python - 正则表达式 - 使得字符串不包含特定字符

> ID：13652154
> 
> 赞同：2
> 
> 时间：2012-11-30T19:53:02.743
> 
> 标签：python, regex, bioinformatics

我想要一个正则表达式来检查字符串是否包含除 "A" 、 "G" 、 "C" 、 "U" 之外的任何字符，例如字符串会像 ggggugcccgcuagagagacagu

我希望正则表达式检查它是否只包含这些，它不区分大小写。

我试过的

```
match= re.match(r'[^GaAgUuCc]',seq2) 
```

它是在一个 RNA 序列中找到非 RNA 字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:57:03.890

改用`re.search`：

```
>>> re.search(r'[^GAUC]', 'acg', re.I)
>>> re.search(r'[^GAUC]', 'acgf', re.I)
<_sre.SRE_Match object at 0x7f1b6a9e32a0> 
```

`re.I`使正则表达式不区分大小写。

一种更快的方法是使用集合来检查字符集是否是允许字符的子集：

```
>>> set('acg'.upper()) <= set('GAUC')
True
>>> set('acgs'.upper()) <= set('GAUC')
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:56:35.573

您需要在正则表达式中使用量词来匹配更多字符：-

```
>>> match = re.search("[^GAUC]+","ggggugcccgcuagrrragagacagu", re.I)
>>> match
9: <_sre.SRE_Match object at 0x01BCA8A8>
>>> match.group()
10: 'rrr' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T19:56:47.730

您应该使用`re.search()`or`re.findall()`而不是`re.match()`：

```
In [9]: seq2 = 'ggggugcccQgcuagagaZgacagu'

In [10]: re.findall(r'[^GaAgUuCc]',seq2)
Out[10]: ['Q', 'Z'] 
```

# assembly - 汇编代码错误

> ID：13652159
> 
> 赞同：0
> 
> 时间：2012-11-30T19:53:15.007
> 
> 标签：assembly, numbers, tasm

```
 .MODEL SMALL
    .STACK 100h
    .DATA
Var1 dd 2
PromptStr DB 'is perfect',13,10,'$'
ans dd 2
count dd 2
     .CODE
     .386
Begin:
    MOV AX,@DATA     ; DS can be written to only through a register
    MOV DS,AX        ; Set DS to point to data segment    

dobody1:
    JMP TestNext1
dobody2:
    CMP ans,32513
    JA finish
    MOV EAX,ans
    MOV EBX,2
    MUL EBX
    MOV ans,EAX
    DEC count
TestNext1:
    CMP var1,2
    JE check2
    MOV EAX,count
    CMP Var1,EAX
    JNE dobody2
check2 :
    MOV EAX,ans
    MOV EBX,2
    MUL EBX
    INC EAX
    MOV EBX,ans
    MUL EBX
    MOV AH,9
    INT 21h
    MOV ans,2
    MOV count,2
    DEC Var1
    JMP dobody1

finish :

MOV AH,4Ch       ; Set terminate option for int 21h
INT  21h       ; Return to DOS (terminate program)
END Begin 
```

我正在尝试使用汇编器 tasm 打印完美的数字，但遇到意外的文件 enf 错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:09:01.007

您需要`ends`在`end begin`. 不知道是不是大问题，但`.386`不应该在代码段中，而是在`.MODEL`.

# r - 如何使用 R 将 jpg（或其他格式）图像用作直方图中的背景？

> ID：13652161
> 
> 赞同：1
> 
> 时间：2012-11-30T19:53:22.927
> 
> 标签：r

> **可能重复：**
> [将数据叠加到 R 中的背景图像上](https://stackoverflow.com/questions/4993189/overlay-data-onto-background-image-in-r)

我在背景中看到了带有照片的漂亮图形。那么有可能吗？

请问专家如何在经典直方图的背景中放置照片，JPG或其他格式，以便边界接触X和Y轴？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:47:44.447

您可以使用该`rasterImage`功能将栅格添加到现有图形，然后它将成为在其之上添加的任何内容的背景。有关读取 jpeg 或其他图像格式的方法，请参阅@mplourde 评论中的链接，然后可以将其与`rasterImage`.

运行`par('usr')`将为您提供当前用户坐标以从轴绘制到轴，或者您可以使用`grconvertX`并`grconvertY`查找其他坐标集。因此，对于直方图，您可以绘制直方图，然后用于`rasterImage`放置图像，然后再次使用 hist `add=TRUE`：

```
tmp <- rnorm(100)
hist(tmp)
image <- as.raster(matrix(0:1, ncol=5, nrow=3))
tmp2 <- par('usr')
rasterImage(image, tmp2[1], tmp2[3], tmp2[2], tmp2[4])
hist(tmp, add=TRUE, border='red', lwd=3) 
```

但是，要非常小心，背景图像不会分散直方图本身的注意力，可能会使图像褪色或添加 Alpha 通道以使其半透明会有所帮助。

# objective-c - 旋转 UILabel 正在剪切文本

> ID：13652166
> 
> 赞同：0
> 
> 时间：2012-11-30T19:53:47.263
> 
> 标签：objective-c, cocoa-touch, cgaffinetransform

我有一个`UILabel`我正在尝试旋转的。首先，我调用`sizeToFit`标签，向框架添加一点填充，然后将转换设置为`CGAffineTransformMakeRotation(rotation)`（其中`rotation`是从 UIRotationGestureRecognizer 计算的值）。

一些文本在旋转时被剪裁`UILabel`（如下图链接所示）。出于演示目的，我将 UILabel 的背景颜色设为红色，以便您可以看到旋转时边界如何变化。我该如何防止这种情况发生？

[http://cl.ly/image/3F0M420R0d14](http://cl.ly/image/3F0M420R0d14)

谢谢。

# android - 在Android中没有Intent的情况下创建一个带有提醒的重复事件直到特定的一天？

> ID：13652168
> 
> 赞同：10
> 
> 时间：2012-11-30T19:53:50.540
> 
> 标签：android, calendar, reminders, rrule

我有一个安卓应用程序，可以通过服务下载一些药物信息。

例如（fludex white round 2 24-02-2012），表示一种名为fludex，white and round的药物，从今天到24-01-2012必须每天服用2次。

现在我想在药物信息下载后，以静默/编程方式将带有药物信息的重复事件添加到日历中（无需用户交互）。因此，从今天到 24-01-2012 的每个上午 10 点和晚上 10 点都会在 10 分钟前提醒他服药。我的应用程序将适用于 android 2-4。我该怎么做，到目前为止，我对我的搜索感到困惑。

第二个问题：我怎样才能只删除我的应用程序中的事件（及其提醒），所以当我同步我的药物治疗以删除所有以前的事件并根据我从我的服务收到的新药物治疗产生新事件时？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T14:49:39.347

```
 ContentResolver cr = ctx.getContentResolver();
        ContentValues values = new ContentValues();

        values.put(CalendarContract.Events.DTSTART, dtstart);
        values.put(CalendarContract.Events.TITLE, title);
        values.put(CalendarContract.Events.DESCRIPTION, comment);

        TimeZone timeZone = TimeZone.getDefault();
        values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());

        // default calendar
        values.put(CalendarContract.Events.CALENDAR_ID, 1);

        values.put(CalendarContract.Events.RRULE, "FREQ=DAILY;UNTIL="
                + dtUntill);
        // for one hour
        values.put(CalendarContract.Events.DURATION, "+P1H");

        values.put(CalendarContract.Events.HAS_ALARM, 1);

        // insert event to calendar
        Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values); 
```

dtuntil 在哪里

```
 SimpleDateFormat yyyymmdd = new SimpleDateFormat("yyyymmdd");
    Calendar dt = Calendar.getInstance();

    // where untilDate is a date instance of your choice,for example 30/01/2012
    dt.setTime(untilDate);

    // if you want the event until 30/01/2012 we add one day from our day
    // because UNTIL in RRule sets events Before the last day want for event
    dt.add(Calendar.DATE, 1);
    String dtUntill = yyyymmdd.format(dt.getTime());

    // Uri
    Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);

    // get the event ID that is the last element in the Uri
    long eventID = Long.parseLong(uri.getLastPathSegment());

    // add 10 minute reminder for the event
    ContentValues reminders = new ContentValues();
    reminders.put(Reminders.EVENT_ID, eventID);
    reminders.put(Reminders.METHOD, Reminders.METHOD_ALERT);
    reminders.put(Reminders.MINUTES, 10);

    Uri uri = cr.insert(Reminders.CONTENT_URI, reminders); 
```

参考：[`Recurrence Rule`](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:04:44.023

这是您想要的一个很好的[示例。](http://androidgenuine.com/?tag=setting-a-reminderalarm-on-android)

**更新** 有关日历和实施提醒或其他内容的更多信息，[请参阅此](http://developer.android.com/guide/topics/providers/calendar-provider.html)

您还可以从以下代码中获得帮助

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", date);
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY"); //To set the repeat rule
intent.putExtra("endTime", date);
intent.putExtra("title", summary); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-04T08:14:03.537

要在多天内创建有时间限制的重复事件，我们需要使用[CalendarContract.Events.RRULE](https://developer.android.com/reference/android/provider/CalendarContract.Events)。规则是组合频率，计数等。

假设我们需要在一天的特定时间段内创建一个每天发生 10 天的事件：

```
Intent(Intent.ACTION_INSERT)
            .setData(CalendarContract.Events.CONTENT_URI)
            .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
                    beginCalendarTime.getTimeInMillis())
            .putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
                    endCalendarTime.getTimeInMillis())
            .putExtra(CalendarContract.Events.TITLE, heading)
            .putExtra(CalendarContract.Events.DESCRIPTION, "To be added")
            .putExtra(CalendarContract.Events.EVENT_LOCATION, location)
            .putExtra(CalendarContract.Events.RRULE, "FREQ=DAILY;COUNT=10"); 
```

# php - 试图从句子中提取主题标签，只有当句子是一个词时才有效。

> ID：13652170
> 
> 赞同：2
> 
> 时间：2012-11-30T19:54:04.507
> 
> 标签：php, regex

我正在尝试使用 PHP 从 xml 页面上的标题中获取主题标签，然后使用减去主题标签的单词作为列表项的 id。到目前为止，我所得到的只有在标题仅包含主题标签时才有效。如果句子有更多内容，它将不会返回任何内容。我需要做什么才能使其正常工作？

```
preg_match_all('#<title>\#(\w+)</title>#Us', $item, $temp ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:43:57.427

Here is one approach:

```
preg_match_all('~<title>(?:[^<#]*\s)?#(\w+)[^<]*</title>~s', $item, $temp); 
```

It allows anything besides `<` or `#` between the `<title>` and the hashtag, provided the hashtag itself is preceded by whitespace; and it will allow anything besides `<` between the hashtag and the `</title>`.

Note that this will only match one hashtag per title. If you need to be able to get multiple hashtags from a single title, I recommend that you first use `preg_match_all` to get the titles, and then, for each title, use `preg_match_all` to get its hashtag(s), if any.

# javascript - grails - 从 formRemote 返回 Object 或 id

> ID：13652173
> 
> 赞同：0
> 
> 时间：2012-11-30T19:54:22.057
> 
> 标签：javascript, forms, grails

我有一个 grails 应用程序，在用户输入新域对象（同步）的名称后，我想保存对象，移动到同一页面上的片段，并更改 div 的 css 类（到 js colorbox ，如果这很重要）。

为此，我使用锚来设置类并移动到片段并使用 JS 提交 ag:formRemote。但是，formRemote 不返回创建的对象。

gsp的一部分：

```
<g:formRemote url="[controller: 'Main', action:'createNewSync']" name="newSyncForm"   >
<g:field type="text" name="newSyncName" />

<a id="ns-link" href="#outline_content" class="outline">
<script>
  $('#ns-link').click(function(){
     $('#newSyncForm').submit();
  });
 </script>
 </g:formRemote> 
```

稍后在 gsp 中，我们要移动以使用内部带有 outline_content 的颜色框。请注意，需要 syncInstance.name。

```
<script>
$(document).ready(function(){
$(".outline").colorbox({inline:true, width:"1140px", escKey:false, overlayClose:false});
</script>

<div id="sync" class="hidden">
<div id='outline_content' style='padding:10px; background:#fff;' >
    <h2 class="nameheader"><strong style="color:#000;">New Sync:</strong><span class="editable_textile">${syncInstance?.name}</span></h2>
        <div class="number1"><img src="../images/1.png" border="0" /></div> 
```

......

控制器：

```
def createNewSync(){
    params.name = params.newSyncName
    def syncInstance =  Sync?.findByName(params.newSyncName) 

if (!syncInstance)
{
        syncInstance = new Sync(params)
        def u = User.findByUsername(springSecurityService.principal)
        syncInstance.properties['createdBy'] = u
        syncInstance.properties['createdDate'] = new Date().toString()
        syncInstance.properties['lastRunTime'] = "Never"
        syncInstance.properties['lastRunOutcome'] = "---"
        syncInstance.properties['isScheduled'] = false
        syncInstance.properties['isComplete'] = false

        syncInstance.save(failOnError: true, flush: true)

    }        
    //doesn't send anything back to page if it's been called remotely
    [syncInstance: syncInstance]
} 
```

有没有办法使用此方法获取对稍后在页面上使用的已创建对象的引用？如果没有，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:11:57.073

好的，这就是我要做的

1) 创建同步模板。它将是包含在 id 为“sync”的 div 中的所有内容，而不是 div 本身。

2) 更新您的 formRemote 标记以更新该 div `<g:formRemote update="sync" ... />`

3) 在控制器中渲染模板 `render(template: "path/to/template", model:[syncInstance: syncInstance])`

# php - CKEditor 插入特殊字符

> ID：13652186
> 
> 赞同：2
> 
> 时间：2012-11-30T19:55:06.610
> 
> 标签：php, mysql, ckeditor, wysiwyg

我有几个使用 CKEditor 4 的所见即所得文本区域。我将数据存储在 MYSQL 数据库中。如果我将 textarea 留空并将其提交到数据库，CKEditor 会自动插入一个特殊字符`&Acirc;` **Â**。有人知道解决这个问题吗？

HTML：

```
<textarea cols="60" rows="8" name="description" class="ckeditor"></textarea> 
```

PHP：

```
// Handler stuff here

$name = $_POST['name'];
$title = $_POST['title'];
$description = $_POST['description'];

$sql = "INSERT INTO `aircraft`
                (name,
                description,
                title) 
                VALUES (?, ?, ?)";
$sth = $this->dbh->prepare($sql);
$sth->execute(array($name, $description, $title)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:25:29.857

您实际上遇到了一个刚刚修复的错误：http: [//dev.ckeditor.com/ticket/9732](http://dev.ckeditor.com/ticket/9732)

重新下载CKEditor，清除浏览器缓存，问题应该就没有了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-22T18:39:23.860

3年后，这仍然是一个问题......

user1867004 的建议对我有用。

```
Add this to config.js:

config.enterMode = CKEDITOR.ENTER_BR;
config.shiftEnterMode = CKEDITOR.ENTER_P; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-03T15:11:14.410

只改变：

老的

```
<script type="text/javscrip" src="ckeditor/ckeditor.js"></script> 
```

新的

```
<script type="text/javscrip" src="ckeditor/ckeditor.js" charset="utf-8"></script> 
```

祝你有美好的一天

# objective-c - 在 CATransaction 之后在 ios6 上重复调用 layoutSubviews

> ID：13652188
> 
> 赞同：7
> 
> 时间：2012-11-30T19:55:16.653
> 
> 标签：objective-c, ios, core-animation

我继承了一个过于复杂的项目（所以我不知道所有的内部工作原理），我遇到了一个错误。我的应用程序的某些部分使用 CATransaction 完成了一些较长的动画，并且似乎导致在动画处于活动状态时重复调用 layoutSubviews。这在 ios5 上不会发生，并且一切看起来都正确，但在 ios6 上它被称为不间断并干扰了视图的许多布局。堆栈跟踪全部隐藏/变灰，但它似乎开始于`CA::Transaction::commit()`

ios版本之间的CATransaction有什么变化导致这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T09:16:53.097

看到这篇文章：[UIView/CALayer：Transform triggers layoutSubviews in superview](https://stackoverflow.com/q/24632876/202451)

Apple 通过 TSI 回复了我：

> 为什么我会看到这种行为？这是不一致还是我误解了一些核心概念？

每当系统感觉发生了变化，需要视图重新计算其子视图的框架时，视图就会被标记为布局。这可能比您预期的更频繁地发生，并且恰好在系统选择将视图标记为需要布局是实现细节时发生。

> 为什么它会向上级联视图层次结构？

通常，更改视图（或图层）的几何属性将触发视图层次结构上的一连串布局失效，因为父视图可能具有涉及修改的子视图的自动布局约束。请注意，无论您是否明确启用它，自动布局都以某种形式处于活动状态。

> 每次更改转换时，如何避免将超级视图转换为 layoutSubviews？

没有办法绕过这种行为。它是 UIKit 内部簿记的一部分，需要保持视图层次结构一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T21:04:42.233

听起来像一个自动布局问题。视图或其任何子视图是否使用自动布局？自动布局很好，但看起来不是非常快速和高效，因此在制作动画时可能会导致问题。

当然，如果视图的一个形状的大小以影响子视图放置或大小的方式发生变化，则可能需要在动画中的每个步骤中布置子视图。考虑动画和它有什么效果。

# php - 如何在 3 秒后使用 javascript 重新加载输入

> ID：13652191
> 
> 赞同：2
> 
> 时间：2012-11-30T19:55:28.550
> 
> 标签：php, javascript, input, reload

如何在网页加载后 3 秒后重新加载此输入。使用 javascript

```
<input type="text" name="steamID" id="steamID" value="<?php echo $steamid; ?>"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:03:55.500

尝试在 SO 上查看此答案：

[每 x 秒重新加载随机 div 内容](https://stackoverflow.com/questions/9591576/reload-random-div-content-every-x-seconds)

如果这对您不起作用，您将不得不使用 ajax 来获取新内容。在这里查看 jQuery 的 API：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者，如果您不使用 jQuery，请查看以下有关 AJAX 的教程：

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

否则，如需更多帮助，请发布更多代码——但必须使用 ajax

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:29:55.560

如果你想让你的代码中的 PHP 再次运行，你需要让你的代码更复杂一些。

您将需要以下组件

1.  一个 php 文件，它将仅查找和打印 $steamid。

2.  一个使用 AJAX 从 php 文件中获取信息的 javascript 函数，设置输入的值

3.  在页面加载时调用 javascript，然后将间隔设置为 3 秒并再次调用它。

但基于此...

> 我遇到的问题是 PHP var $steamid 是在创建输入后设置的，所以我需要做的就是重新加载输入，这样 $steamid 就会显示出来。

...我认为你只需要重新订购你的 PHP 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:57:56.973

通过重置，我假设您的意思是将值设置为空。

```
$(window).load(function(){
   setTimeout( function() { 
    document.getElementById("steamID").value = "";
    },3000);
}); 
```

编辑：根据您的进一步描述，等到 steamID 设置好，然后将其放在页面上：

```
<script type="text/javascript">
  document.getElementById("steamID").value = "<?php echo $steamid; ?>";
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:23:31.137

```
<?php
    echo "<script type='text/javascript'>";
    $steamid = "testing 1,2,3";
    echo "    var sID = '".$steamid."';";    
?>
    function setupRefresh() {
       setInterval("refreshVal()", 3000);
    }
    function refreshVal() {
       var e = document.getElementById('steamID');
       e.value = sID;   
    }
</script> 
```

# jquery-mobile - jqm的页面转换，空白页

> ID：13652192
> 
> 赞同：0
> 
> 时间：2012-11-30T19:55:29.437
> 
> 标签：jquery-mobile

我正在 Android 上使用 JQM + PhoneGap 开发混合应用程序。

当我更改页面时，我想显示幻灯片或上滑等过渡效果...

除了 Android 2.x 版本外，它工作正常。（我在 JQM 文档中意识到了这个问题：[这是 JQM 文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)）

所以我做了自定义转换。但它不能正常工作。

当我使用自定义过渡 CSS 更改具有过渡效果的页面时。

它在“A 页”和“B 页”之间显示“空白页”。

这是我的代码：[http://jsfiddle.net/vanryuji/4DkEv/3/]

我怎样才能删除（？）或隐藏（？）这个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:51:03.390

根据您执行幻灯片的方式，[JQM](http://jquerymobile.com/branches/1.2/docs/pages/page-customtransitions.html)有这样的说法：

> 在基于 CSS 的页面转换期间，jQuery Mobile 会将转换的类名放置在转换所涉及的“from”和“to”页面上。然后它在“from”页面上放置一个“out”类，在“to”页面上放置一个“in”类。这些类在“from”和“to”页面元素上的存在会触发上面定义的动画 CSS 规则。**从 jQuery Mobile 版本 1.1 开始，动画类的添加是排队的，而不是同时添加的，产生一个先出后入的序列，这对于移动渲染比我们之前的同时转换序列更友好。**

您将需要绕过`sequntial`动作或强制`simultaneous`。

# matlab - 在 Matlab 中创建根据数据改变表面颜色的球体

> ID：13652194
> 
> 赞同：2
> 
> 时间：2012-11-30T19:55:32.800
> 
> 标签：matlab, colors, matlab-figure, geometry-surface

我正在尝试在 Matlab 中创建一系列随机分布的球体，三个将是三个子集。我希望每个子集都有不同的颜色。我正在使用一个结构，因为每个球体也将具有与之相关的不同属性。我尝试使用颜色图和 set(...'FaceColor'..) 但遇到了一些困难。请帮忙。

```
for n = 1:100
    Bslice.cell(n).index = n; 
    Bslice.cell(n).type = 'Tyep1'; % Type2, Type3
    Bslice.cell(n).location = round(rand(1, 3)*10);
end 

%%
[x,y,z] = sphere;

for n = 1:10
    hold on 
    grid on
    surfl(x-Bslice.cell(n).location(1), y-Bslice.cell(n).location(2), z-Bslice.cell(n).location(3)); 
    shading interp
    % colormap(hot(100))
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:15:58.820

Create a matrix `c` corresponding to the color of each point on the sphere. Then,

```
[x y z] = sphere;
surf(x,y,z,c); 
```

More documentation on [`surf` here](http://www.mathworks.com/help/matlab/ref/surf.html).

# php - 在 PHP 中，我在第 2 行收到一条错误消息，上面写着 Undefined Index ID-addmsg?

> ID：13652195
> 
> 赞同：0
> 
> 时间：2012-11-30T19:55:34.437
> 
> 标签：php

代码正在运行，但是我仍然收到 ID 为“addmsg”的未定义索引

```
 <?php
     $addmsg=$_GET["addmsg"];
     if (isset($addmsg)) // If the user wants to add a Message
     { 
     ?> 
```

这是 textarea 和提交按钮的代码：

```
 <form action="<?php echo $_SERVER['PHP_SELF'];?>" method="post">
    <p>Post your Message:<br />
    <textarea name="msg" rows="10" cols="70" wrap></textarea><br />
    <input type="submit" name="smtmsg" value="SUBMIT" /></p>
    </form> 
```

最后，这段代码是连接Mysql数据库

```
 $url = $_SERVER['PHP_SELF'] ."?addmsg=1"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:58:39.140

您需要在分配变量之前检查 isset：

```
<?php

     if (isset($_GET["addmsg"])) // If the user wants to add a Message
     { 
          $addmsg=$_GET["addmsg"];
     }
?> 
```

您使用 $_POST 所以字段 msg 永远不会在这里评估。将 $_GET['addmsg'] 更改为 $_POST['msg'] 或将字段 msg 更改为 addmsg 并将表单类型更改为“get”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:59:44.707

该消息的含义正是它所说的。没有任何设置`$_GET['addmsg']`。

在这种情况下，您有两个问题。您的表单方法设置为`post`. 因此，您必须在`$_POST`

其次，您必须`addmsg`在表单中实际命名一个字段。表单中的字段名为`msg`。所以这个值可以作为`$_POST['msg']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:01:11.087

有2个错误：

第一的：

如果方法是“post”，则变量是 $_POST。

第二：

textarea 的名字是"msg"，然后你必须做$_POST["msg"]。

当然，如果methos="get"，变量是$_GET["msg"]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:58:47.553

您的 HTML 中没有名为“addmsg”的字段。您拥有的唯一一个名为“msg”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T19:58:50.487

您的表单正在提交到，因此在您的服务器端，超全局中`<?php echo $_SERVER['PHP_SELF'];?>`没有索引。`addmsg``$_GET`

您应该将表单操作更改`<?php echo $_SERVER['PHP_SELF'] . "?addmsg=1";?>`为问题最后一行中的操作。

# arrays - 在mongoDB中使用数组索引获取数组元素

> ID：13652197
> 
> 赞同：3
> 
> 时间：2012-11-30T19:55:36.137
> 
> 标签：arrays, mongodb, find

考虑在 mongoDB 中进行以下集合：

```
{a:[4,2,8,71,21]}
{a:[24,2,2,1]}
{a:[4,1]}
{a:[4,2,8,21]}
{a:[2,8,71,21]}
{a:[4,2,8]} 
```

我怎样才能最容易地得到以下结果：

获取数组的第n个元素

```
{a:4}
{a:24}
{a:4}
{a:4}
{a:2}
{a:4} 
```

获取元素 2 到 4

```
{a:[8,71,21]}
{a:[2,1]}
{a:[]}
{a:[8,21]}
{a:[71,21]}
{a:[8]} 
```

和其他类似的查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T20:38:08.033

您正在寻找的是[`$slice`投影](http://docs.mongodb.org/manual/reference/projection/slice/)。

### 从数组的开头获取多个元素

您可以传递一个简单`$limit`的带有多个值的返回值（例如 1）：

```
> db.mycoll.find({}, {_id: 0, a: { $slice: 1}})
{ "a" : [ 4 ] }
{ "a" : [ 24 ] }
{ "a" : [ 4 ] }
{ "a" : [ 4 ] }
{ "a" : [ 2 ] }
{ "a" : [ 4 ] } 
```

### 获取一系列元素

您可以传递带有 ( `$skip`, `$limit`) 参数的数组。

注意：要匹配您的预期输出，您必须找到元素 3 到 5（跳过前 2 个元素，返回下一个 3）：

```
> db.mycoll.find({}, {_id: 0, a: { $slice: [2,3]}})

{ "a" : [ 8, 71, 21 ] }
{ "a" : [ 2, 1 ] }
{ "a" : [ ] }
{ "a" : [ 8, 21 ] }
{ "a" : [ 71, 21 ] }
{ "a" : [ 8 ] } 
```

### 获取数组的第 n 个元素

将元素的数量传递给 $skip，并将值 1 作为限制。

例如，要查找第二个元素，您需要跳过 1 个条目：

```
> db.mycoll.find({}, {_id: 0, a: { $slice: [1,1]}})

{ "a" : [ 2 ] }
{ "a" : [ 2 ] }
{ "a" : [ 1 ] }
{ "a" : [ 2 ] }
{ "a" : [ 8 ] }
{ "a" : [ 2 ] } 
```

### 请注意，`$slice`运算符：

*   总是返回一个数组
*   将为匹配查找条件的文档返回一个空数组，但为 $slice 选择返回一个空结果（例如，如果您要求只有 2 个元素的数组的第 5 个元素）

# java - 未检测到 Windows-MY 中的某些证书 私钥

> ID：13652206
> 
> 赞同：1
> 
> 时间：2012-11-30T19:56:04.953
> 
> 标签：java, windows, pki

使用 Windows 7、JDK 6（和 7）。

我正在尝试获取存储在 Windows MSCAPI 密钥库中的个人证书及其基本属性（以便使用私钥进行签名）。然而，一些别名被识别为没有私钥（isKeyEntry == false），尽管它实际上有一个。

任何建议如何处理这个“功能”？

[可以从http://download.upce.cz/terena-public.pfx](http://download.upce.cz/terena-public.pfx)下载带有证书（已撤销）和具有这种奇怪“属性”的私钥的 P12 文件。密码是“密码”。

```
KeyStore ks = KeyStore.getInstance("Windows-MY", "SunMSCAPI");
ks.load(null, null);
Enumeration<String> aliases = ks.aliases();
while (aliases.hasMoreElements()) {
    String alias = (String) aliases.nextElement();
    X509CertImpl certificate = (X509CertImpl)ks.getCertificate(alias);
    System.out.println("Alias: " + alias);
    System.out.println("  Subject: " + certificate.getSubjectDN());
    System.out.println("  Issued By: " + certificate.getIssuerDN());
    if (ks.isKeyEntry(alias)) {
        System.out.println("  Has private key");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:30:41.113

我将您的 pfx 文件导入 Mozilla Thunderbird 并将其导出为 p12 文件。现在我可以通过 MSCAPI 看到它。原始证书中一定有一些东西阻止 MSCAPI 看到私钥。

我比较了这些文件，我注意到在原始文件中使用了 Key Usage 部分。

原始pfx：

```
Bag Attributes
   localKeyID: 01 00 00 00
   friendlyName: le-b6311e84-87e7-4e02-9cf6-4012518e0541
   Microsoft CSP Name: Microsoft Software Key Storage Provider
Key Attributes
   X509v3 Key Usage: 90 
```

转换后的 p12：

```
Bag Attributes
   friendlyName: le-b6311e84-87e7-4e02-9cf6-4012518e0541
   localKeyID: 47 E4 D3 F0 75 48 9D 77 07 E9 51 A4 F1 B6 DF E9 40 80 26 7A
Key Attributes: <No Attributes> 
```

这两个文件有更多差异，但我不确定哪一个会导致不需要的行为。

# sql - 创建一个特殊的视图或功能

> ID：13652208
> 
> 赞同：0
> 
> 时间：2012-11-30T19:56:07.413
> 
> 标签：sql, function, view

我有一个表 A（ID int，codeID int，sdate datetime，edate datetime，SID int）

我只想在具有相同 codeID 的最新 edate 的视图中插入那些记录，

例子

```
ID codeID sdate        edate        SID
1  23     2011-01-01   2012-01-01   123
2  25     2007-01-01   2008-04-05   234
3  25     2008-07-08   2009-05-05   258
4  28     2007-05-05   NULL         987 
```

现在在视图或功能中，我只想要

```
ID codeID sdate        edate        SID
1  23     2011-01-01   2012-01-01   123
3  25     2008-07-08   2009-05-05   258
4  28     2007-05-05   NULL         987 
```

因为 codeID 25 有更新的值（但是已过期），但我仍然想要它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:58:26.300

```
select *
from A a1
where not exists (select 1 from A a2 where a1.codeID = a2.codeID and a2.edate > a1.edate) 
```

[在这里](http://sqlfiddle.com/#!2/ca773/2)查看它的实际应用。

# google-analytics - 结合 Google Analytics 中的自定义变量和事件来跟踪营销活动的效果

> ID：13652219
> 
> 赞同：0
> 
> 时间：2012-11-30T19:56:58.340
> 
> 标签：google-analytics

我正在尝试通过门户网站上的转换来跟踪营销活动的成功。该门户主要基于 JS，目前我们无法使用 URL 目标跟踪。相反，我计划使用基于事件的目标转换，它可以报告我需要的所有变量。问题是如何将营销活动与最终转化联系起来？这些活动涵盖 SEM、电子邮件、登录页面、合作伙伴关系等。

我最初的想法是使用 URL 参数来设置会话级别的自定义变量，以识别吸引访问者的营销活动，然后将其与目标转化进行比较。但是，我不确定自定义变量是否可以与 Google Analytics（分析）中的目标转化进行比较——我担心我可能会过度思考这一点。

我担心我想太多了。如果我使用[URL Builder](http://support.google.com/analytics/bin/answer.py?hl=en&topic=1007028&answer=1033867)创建[自定义广告系列](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns#customCampaignTracking)，是否会提供我想要的一切，让我能够跟踪广告系列的转化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:08:11.330

是的，我认为你想太多了。:-)

只要您使用目标 URL 中的 utm 变量正确标记广告系列，因为它们会向您展示如何在 URL 构建器中执行操作，它们应该允许您在 GA 配置文件中按来源、媒介、广告系列等查看您的特定目标转化. 使用新的多渠道漏斗功能，您还可以了解以前访问的来源如何影响未来的转化行为。

在此处生成有关广告系列转化跟踪的帮助：http: [//blog.crazyegg.com/2011/12/02/track-conversions-google-analytics-campaigns/](http://blog.crazyegg.com/2011/12/02/track-conversions-google-analytics-campaigns/)

此处有关多渠道渠道的信息：https: [//www.google.com/analytics/features/multichannel-funnels.html](https://www.google.com/analytics/features/multichannel-funnels.html)

# c++ - 类函数指针作为参数

> ID：13652223
> 
> 赞同：2
> 
> 时间：2012-11-30T19:57:12.427
> 
> 标签：c++, function, pointers, parameters

> **可能重复：**
> [如何最好地将方法传递给同一类的方法](https://stackoverflow.com/questions/11260260/how-to-best-pass-methods-into-methods-of-the-same-class)

我从来没有遇到过将函数指针作为参数传递的问题。这有效：

```
void functionThatTakesFPTR(void(*function)(int), int someValue){ 
    function(someValue);
   }

void printValue(int value){
    std::printf("%d",value);
}

int main(int argc, char** argv){
    functionThatTakesFPTR(&printValue, 8);

    return EXIT_SUCCESS;
} 
```

但是，传递对象函数不会

```
void MyClass::setter(float value){ }

void MyClass::testFunction(void(*setterPtr)(float)){ }

void MyClass::someFunc(){
     testFunction(&(this->setter));
} 
```

对我来说，这看起来像是传递 this 的地址而不是函数，我有点困惑。有可能这样做吗？是否可以传递另一个类（实例 MyClass2）的对象的函数指针？

编辑：我得到的错误是“类'MyClass'没有成员'setter'”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T20:00:11.510

问题是对方法的调用还需要对类实例的引用。您不能像独立函数那样简单地调用类方法。

您需要阅读[Pointer-to-Member Functions](http://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm)。

# django - 在 django 中设置单个模型

> ID：13652224
> 
> 赞同：-1
> 
> 时间：2012-11-30T19:57:15.160
> 
> 标签：django, model-view-controller, model

我想存储我网站的一些单一数据。实际上，我想设置要在起始页显示的文章、热门标签和其他内容。

Django让我做一个模型，所以应该有很多这样的数据。

如何以正确的方式实现这一任务？可能是我的方法完全错误吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:32:23.983

你可能会考虑看一个 CMS，Django-CMS 已经相当成熟了。

除此之外，听起来您需要存储一些一次性或单例对象。您当然可以为此使用模型，因为它不仅可以帮助您正确思考数据结构并了解这个强大的 Django DB 抽象，而且我怀疑您会很快发现您可能确实想要创建多个对象时间（您通常很少不这样做）。

如果你有一些确实是并且总是应该是单例的东西，请考虑将它放在你的 settings.py 文件中。

# python - 无法让 entrez 使用 biopython 返回网格项

> ID：13652230
> 
> 赞同：2
> 
> 时间：2012-11-30T19:57:34.753
> 
> 标签：python, biopython, pubmed

快速提问——第一次使用 biopython，我只是想根据教程快速完成一些事情。

我似乎无法`Entrez.efetch()`返回给定文章的网格术语，唯一的方法似乎是我正在做的事情，即：

```
handle = Entrez.efetch(db="pubmed", id=pmids, rettype="medline", retmode="xml")
records = Entrez.read(handle) 
```

其中 pmids 是*pubmed ID的列表*

这将返回以下内容：http: [//pastie.org/5459700](http://pastie.org/5459700)

我尝试根据[http://www.ncbi.nlm.nih.gov/books/NBK25499/](http://www.ncbi.nlm.nih.gov/books/NBK25499/)调整 rettype 和 retmode 参数，但没有成功。有什么明显的我失踪了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-27T09:28:14.773

这对我有用：

```
from Bio import Entrez # install with 'pip install biopython'
from Bio.Entrez import efetch, read
Entrez.email = "your@email.com" # register your email

def get_mesh(pmid):
    # call PubMed API
    handle = efetch(db='pubmed', id=str(pmid), retmode='xml')
    xml_data = read(handle)[0]
    # skip articles without MeSH terms
    if u'MeshHeadingList' in xml_data['MedlineCitation']:
        for mesh in xml_data['MedlineCitation'][u'MeshHeadingList']:
            # grab the qualifier major/minor flag, if any
            major = 'N'
            qualifiers = mesh[u'QualifierName']
            if len(qualifiers) > 0:
                major = str(qualifiers[0].attributes.items()[0][1])
            # grab descriptor name
            descr = mesh[u'DescriptorName']
            name = descr.title()

            yield(name, major)

# example output
for name, major in get_mesh(128):
    print '{}, {}'.format(name, major) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:50:00.047

这个问题最好在 Biopython 邮件列表或[http://www.biostars.org/](http://www.biostars.org/)上提出。那里更有可能找到有 Entrez 经验的人。

问题是带有[PMID 23165874](http://www.ncbi.nlm.nih.gov/pubmed/23165874)的记录没有任何 MeSH 术语。[将该记录的原始 XML 与](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=23165874&retmode=xml)[具有 MeSH 术语](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=12654674&retmode=xml)的记录进行比较。后者有一个部分开始：

```
<MeshHeadingList>
  <MeshHeading>
    <DescriptorName MajorTopicYN="N">ADP Ribose Transferases</DescriptorName>
    <QualifierName MajorTopicYN="Y">genetics</QualifierName>
  </MeshHeading>
  <MeshHeading>
    <DescriptorName MajorTopicYN="N">Acinetobacter</DescriptorName>
    <QualifierName MajorTopicYN="Y">drug effects</QualifierName>
    <QualifierName MajorTopicYN="Y">genetics</QualifierName>
  </MeshHeading>
  .. 
```

换句话说，很难得到不存在的东西。

# ruby - Ruby - 窗口命令行界面

> ID：13652235
> 
> 赞同：0
> 
> 时间：2012-11-30T19:57:57.657
> 
> 标签：ruby, windows, command-line

更新——我用 Python 尝试了完全相同的东西，它完美地工作！

```
import os
os.system('certutil.exe -v -getkey "614D628A00000000014C" C:/Users/kra/kevin') 
```

有人可以解释一下这个问题吗！

如果我运行这个红宝石代码：

```
require 'open3'
stdin, stdout, stderr = Open3.popen3('certutil -v -getkey "614D628A00000000014C" C:/Users/kra/kevin')            
puts stdout.read 
```

我收到以下错误：

```
Querying WIN-3CF41NBPT85.demo.com\demo-CA
CommonName: 614D628A00000000014C
CertUtil: -GetKey command FAILED: 0x80092004 (-2146885628)
CertUtil: Cannot find object or property. 
```

但是，如果我直接从命令行运行命令，它就可以工作。

```
C:\Users\kra>certutil -getkey "614D628A00000000014C" C:/Users/kra/kevin
Querying WIN-3CF41NBPT85.cjndemo.com\cjndemo-CA.....................

"WIN-3CF41NBPT85.demo.com\demo-CA"
  Serial Number: 614d628a00000000014c
  Subject: CN=Kevin, C=GB
   NotBefore: 11/30/2012 10:20 AM
   NotAfter: 5/7/2013 9:29 AM
  Template: Copy of Web Server
  Version: 3
  Cert Hash(sha1): 88 b1 7a 74 8c be 73 d5 16 07 7f 19 16 57 14 c5 dd a9 79 7f

Recipient Info[0]:
CMSG_KEY_TRANS_RECIPIENT(1)
CERT_ID_ISSUER_SERIAL_NUMBER(1)
    Serial Number: 129e45d3000000000130
    Issuer: CN=demo-CA, DC=demo, DC=com
    Subject: CN=kra, CN=Users, DC=demo, DC=com
CertUtil: -GetKey command completed successfully. 
```

有趣的是，如果我运行这个 ruby​​ 代码：-

```
require 'open3'
stdin, stdout, stderr = Open3.popen3('certutil -recoverkey -p lexicon C:\Users\kra\kevin C:\Users\kra\kevin.pfx')
puts stdout.read 
```

它也有效。

```
Computed Hash: 6e d3 b8 ad 93 16 7b f0 fb b3 f5 cd 7e e4 bb ad fb 95 a0 81

User Certificate:
    Serial Number: 614d628a00000000014c
    Issuer: CN=demo-CA, DC=demo, DC=com
    Subject: CN=Kevin, C=GB
    Cert Hash(sha1): 88 b1 7a 74 8c be 73 d5 16 07 7f 19 16 57 14 c5 dd a9 79 7f
CertUtil: -RecoverKey command completed successfully. 
```

我假设它是某种奇怪的环境问题，因为显然 ruby​​ 能够调用 certutil.exe 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:02:27.290

第一个参数[`Open3.popen3`](http://ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3)是您要传递给子命令的环境。有时我不得不使用它来使事情按预期工作：

```
Open3.popen3(ENV, 'command') { ... } 
```

它将当前脚本的环境传递给子命令。当前脚本将从命令行继承其环境，因此，理论上，子命令将具有与命令行发出的命令相同的信息。

如有必要，您还可以提取 ENV 的子集，或在调用之前临时覆盖变量`popen3`。

* * *

而不是`popen3`，尝试使用[`capture3`](http://ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-capture3). 它非常相似，但我认为它不那么低级。我已经看到一些奇怪的行为很好地避免了`popen3`。`capture3`同样，请注意您可以传入`ENV`.

# reporting-services - 如何让用户选择在 SQL Server Reporting Services 2008 的 Tablix 中显示哪些列

> ID：13652236
> 
> 赞同：2
> 
> 时间：2012-11-30T19:57:58.277
> 
> 标签：reporting-services, ssrs-2008

我有一份报告，其中显示了一个包含太多列的 tablix。出于可读性原因，我的用户希望能够在运行报告时选择要选择的列。用户应该能够从 1、2 或最多 9 列中进行选择。这些列是静态的 - 它们不在数据中。

现在，我可以使列的可见性取决于表达式。我原以为应该有一个布尔数组，但事实并非如此。

然后我决定尝试为参数中选择的每个选项分配值“11”、“22”、“33”...，但我被卡住了，因为在要求参数中的值时：

```
=IIF(Parameters!p_ColumnstoShow.Value(0)="11",False,True) 
```

我看到它有一个`(0)`，我很兴奋认为这是一个数组，但后来被问到`(1)`它给了我一个错误，它现在是数组的一部分。我在这里有点困惑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:42:27.190

我在这里找到了答案：http: [//www.codeproject.com/Articles/11254/SQL-Reporting-Services-with-Dynamic-Column-Reports](http://www.codeproject.com/Articles/11254/SQL-Reporting-Services-with-Dynamic-Column-Reports)

但是，您必须小心，选择的值不是任何其他值的一部分。因此，如果一个值是 John，另一个是 Johnny，那么您将遇到麻烦。

实际上，如果您没有使用该文章中的存储过程，而是查询参数中的值，则应该使用 JOIN 函数。这就是我正在做的事情：

```
=IIF(InStr(Join(Parameters!p_ColumnstoShow.Value),"a")>0,False,True)
=IIF(InStr(Join(Parameters!p_ColumnstoShow.Value),"b")>0,False,True)
=IIF(InStr(Join(Parameters!p_ColumnstoShow.Value),"c")>0,False,True)
=IIF(InStr(Join(Parameters!p_ColumnstoShow.Value),"d")>0,False,True) 
```

# c# - Windows 窗体在打开后不会保持打开状态

> ID：13652237
> 
> 赞同：1
> 
> 时间：2012-11-30T19:58:02.213
> 
> 标签：c#, winforms

我正在编写一个简单的 WinForms 应用程序，它解析一个文本文件以获得正确的值，当它找到一个不正确的值时，会打开一个新表单，显示不正确或缺失的值，用户可以输入正确的值。我有一个问题，例如，我会故意在我的文本文件中放置两个不正确的值来检查，并且表单窗口在第一个错误打开后立即关闭，并且只在第二个错误修复时保持打开状态。

```
foreach (string line in lines)
             {
                 string[] items = line.Split('\t').ToArray();

                 for (int i = 0; i <custIndex.Count; i++)
                 {
                     int index = custIndex[i];

                     Globals.Code = items[index - 1].ToUpper();

                     if (!CountryList.ContainsKey(Globals.Code) && !StateList.ContainsKey(Globals.Code))
                     {
                         form2.textBox1.Text = Globals.Code;
                         form2.Show();//Shows form2 for user to enter correct input

                     }

                 }//inner for
             }//inner for each 
```

这是表单 2 的代码（表单 2 在循环之前的方法开头被实例化）：

```
public  partial class Form2 : Form
{
    public Form2()
    {

        InitializeComponent();

    }

    public void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {

    }
    //
    private void button1_Click(object sender, EventArgs e)
    {
        Globals.Code = textBox2.Text;
        this.Close();           
    }

    private void Form2_Load(object sender, EventArgs e)
    {

    }

} 
```

用户应该在为 Globals.Code 输入新值后按下按钮（我使用了一个全局变量，不确定这是否是最犹太的做事方式）。之后表单关闭并返回到表单 1。我认为表单 2 正在正确显示文本文件中的第一个错误值，但它会立即打开和关闭。有没有办法让窗户保持打开状态？很抱歉，如果这很复杂，我正在做很多 Winforms，但我并不是这方面的专家。

谢谢，阿曼达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:03:54.033

您最好的选择可能是使用模式对话框，因此更改`form2.Show`为`form2.ShowDialog`.

但是，当使用带有这样的循环的全局变量时，全局变量只会在循环完成后将最后一个值放入表单中。如果您使用 ShowDialog 方法，调用将在该行阻塞，直到用户关闭对话框。在那之后，您可以从文本框中读取值并对其进行处理。

# c# - Lambda 表达式方法到事件处理程序的范围

> ID：13652240
> 
> 赞同：0
> 
> 时间：2012-11-30T19:58:10.293
> 
> 标签：c#, wpf, winforms, events, lambda

如果我在方法中定义一个变量，然后使用 Lambda 表达式订阅一个事件，并在该表达式的主体中使用该变量，那么引用是否仍然有效？我没有收到编译时错误，但它似乎也没有像我希望的那样工作。

看：

```
void OnAddAssignment()
{
    var win = new View.NewTransportationView();
    var vm = new NewTransportationViewModel(DateTime.Today);
    vm.JobSaved += (s, e) => { win.Close(); };

    win.DataContext = new ViewModel.NewTransportationViewModel(DateTime.Today);
    win.WindowStartupLocation = WindowStartupLocation.CenterScreen;

    win.Show();
} 
```

注意：`NewTransportationView`继承自`System.Windows.Window`

我希望当`JobSaved`火灾发生时，窗口会关闭，并且我不必保存对`NewTransportationView`外部方法的引用。

我意识到可能有许多其他方法可以解决这个问题，其中许多或大多数更优雅和高效，虽然我当然愿意看到建议，但我对 Lambda 的这个特定应用程序的一般行为和范围规则更感兴趣表达。

额外的问题：当我调用`.Show()`它们时，我的 Window 对象在哪里？

# php - 从 PHP 的下拉菜单中提交多个值

> ID：13652245
> 
> 赞同：1
> 
> 时间：2012-11-30T19:58:26.270
> 
> 标签：php, drop-down-menu, multiple-value

我希望有人能够帮助我解决这个问题！

我正在用 php 开发一个 Web 应用程序，我想提交我的一位同事的活动。有时该活动由多个同事完成，因此我希望能够提交该活动，但以某种方式，所有正在从事该活动的同事都会得到保存。

我决定使用下拉菜单，即 php 中的 select 标签。html代码如下：

```
<div id="placeholder">
<SELECT id="activeMember" NAME=name>
    <OPTION VALUE=0>Choose
    <OPTION VALUE=1>Mark
    <OPTION VALUE=2>James
    <OPTION VALUE=3>Emily
 </SELECT> 
```

```
<button type="button" name="add" onclick="Add();">+</button>​ 
```

下面是javascript代码：

```
var _counter = 0;
function Add() {
    _counter++;
    var oClone = document.getElementById("activeMember").cloneNode(true);
    oClone.id += (_counter + "");
    document.getElementById("placeholder").appendChild(oClone);
}​ 
```

[你可以在这个LINK](http://jsfiddle.net/eW6j4/250/)上看到它是如何工作的

按下提交按钮时，会调用另一个脚本，将活动保存在我的数据库中：

```
$connection = mysql_connect("$host", "$username", "$password") or die("cannot connect");
mysql_select_db("$db_name") or die("cannot select DB");

$member = $_POST['name'];
$summary = $_POST['summary];
$date = date("l F d, Y");
$query = mysql_query("INSERT INTO activities (member, activitySummary, date) VALUES ( '" . $member . "', '" . $summary . "', $date."' )"); 
```

现在我的问题来了。当我选择 Mark and James 时，如果 James 是第二个选择的人，那么只有在我提交表单后才会为他保存活动。马克一直被忽略。此外，如果选择了 Mark、James 和 Emily，则仅为 Emily 保存活动。因此，表单仅保存最后选择的同事的活动。

有谁知道如何避免这种情况并成功为一项活动保存多个同事/成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:01:21.490

将您的输入重命名为`<SELECT id="activeMember" NAME="name[]">`，然后当数据被提交时，它将在一个数组中。

你必须修改你的 PHP 代码来处理传入的数组。

```
$members = $_POST['name'];
$summary = $_POST['summary'];
$date = date('l F d, Y');

foreach ($members as $member) {
    if (empty($member)) {
        continue;
    }

    $query = mysql_query("INSERT INTO `activities` (`member`, `activitySummary`, `date`) VALUES ( '{$member}', '{$summary}', '{$date}' )");
} 
```

# apache - 如何在可通过 IIS 访问的 Windows 服务器上设置多个 OSQA 实例？

> ID：13652248
> 
> 赞同：1
> 
> 时间：2012-11-30T19:58:41.667
> 
> 标签：apache, iis, osqa

在我的 Windows 服务器上，我将托管一些我想添加 OSQA 功能的不相关网站。因此，OSQA 实例之间不会有共享数据。

是否可以让多个 OSQA 实例在同一个数据库上运行（我猜如果不支持，则需要一些数据库和脚本调整来标识请求站点），或者（可能是最简单的）有几个 OSQA在同一个盒子上运行的实例？

我查看了[Bitnami OSQA 堆栈](http://bitnami.org/stack/osqa)，这可能是最简单的解决方案。但是，这会安装 Apache，所以我也不希望在我的机器上运行多个 Apache 实例。

我还希望能够通过 IIS 访问这些实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:00:48.480

您应该能够在同一数据库服务器上安装不同的 OSQA 实例，但您需要为每个实例创建不同的数据库（在该数据库服务器中）。不幸的是，目前我们 BitNami）不支持 IIS 也不支持在同一 Apache 服务器上安装多个 OSQA，因此您需要手动完成。

# asp.net-mvc - MVC - 从控制器返回数据到视图

> ID：13652250
> 
> 赞同：1
> 
> 时间：2012-11-30T19:58:46.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的问题：如果我们已经将 view -a 设为强类型，那么为什么我们需要将模型对象从控制器 post 方法返回给 view - MVC 4 asp.net？

例如：我有计算器视图：

```
@using (Html.BeginForm())
{
    <p>Number One : @Html.TextBoxFor(m => m.numberOne)</p>
    <p>Number Two : @Html.TextBoxFor(m => m.numberTwo)</p>
        <input type="submit" value ="Addition" name="calculateOperation"  />
           <input type="submit" value ="Subtraction" name="calculateOperation" />
           <input type="submit" value ="Multiplication" name="calculateOperation" />
           <input type="submit" value ="Division" name="calculateOperation" />
}

@using (Html.BeginForm())
{
         <p>Output     : @Html.TextBoxFor(m => m.result)</p>

} 
```

和控制器：

```
public ActionResult Calculate(Calculator model, string calculateOperation)
{

    if (calculateOperation.Equals("Addition"))
    {
        int[] array = { 1, 12, 5, 26, 7, 14, 3, 7, 2 };
        model.result = model.numberOne + model.numberTwo;
    }
    if (calculateOperation.Equals("Subtraction"))
    {
        model.result = model.numberOne - model.numberTwo;
    }
    if (calculateOperation.Equals("Multiplication"))
    {
        model.result = model.numberOne * model.numberTwo;
    }
    if (calculateOperation.Equals("Division"))
    {
        model.result = model.numberOne / model.numberTwo;
    }

    return View(model);

} 
```

如果我不返回模型对象，我就不会得到 model.result 的值。

寻找正当理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:02:57.740

好吧，您不必发回模型，您可以只使用[FormCollection](http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection%28v=vs.100%29.aspx)参数，但是您必须获取值并将它们转换为您自己的正确类型。

```
public ActionResult Calculate(FormCollection form, string calculateOperation)
{
    // Need to check if form["numberOne"] is null or empty or do a int.TryParse()
    int numberOne = int.Parse(form["numberOne"]);
} 
```

使用强类型模型，您可以通过asp.net mvc 中的[模型绑定器免费获得它。](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)代码看起来更干净，更容易使用。

使用模型，您还可以获得属性的力量，例如[验证](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)和脚手架。使用具有验证属性的模型来验证大多数场景更加清晰和容易。

* * *

在这种情况下，您需要将模型发送到视图只是因为视图需要它。这就是它的设计方式。如果您不将其存储在某个地方，模型或视图如何知道您已经进行了计算？当然你也可以使用 ViewBag：

```
ViewBag["result"] = model.numberOne + model.numberTwo; 
```

在您看来：

```
<p>Output     :@Html.TextBox("result", (string)ViewBag["result"])</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:13:24.947

HTTP 是一种无状态协议。因此，当您在服务器上工作时，如果您希望它在客户端上显示某些内容，则必须将其发送回去。MVC 强类型视图实际上只是渲染引擎之上的抽象。

当你“提交”表单时，你只是在做一个 HTTP POST 回到你的控制器操作（一个 http 请求）。

打电话

```
 return View(model) 
```

表示您正在发送返回呈现的 html 页面（使用您的视图）的 HTTP 响应。在您的情况下，您只是将模型作为参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:11:21.240

您的控制器方法没有实际要求返回使用该模型或任何其他模型的任何内容。因此，您仍然需要明确说明要返回的视图以及与之关联的数据。

他们可以向 View 添加某种重载，隐含地假设它应该在方法参数中使用一些 ViewModel，但这是不直观且不必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:05:16.387

我一直认为这是为了涵盖有某种解释或响应类型数据的情况。

例如。您提交要添加到数据库中的地址，并且您有一个服务来检查地址的正确性。如果它是正确的，它会被持久化，否则它会被更正，添加到原始对象中的一个特殊字段中，然后发回确认。

# java - 请求中带有 jaxb 空对象的 Spring WS

> ID：13652255
> 
> 赞同：2
> 
> 时间：2012-11-30T19:58:49.927
> 
> 标签：java, spring, jaxb

我有 Spring WS，我正在向其发送 Object`Request.java`类的请求，如果我在 jaxb 类中硬编码值就可以了（但这不是它..）我在 SoapUI 中测试的我的肥皂请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cas="http://jakisadres.com/caservice">
   <soapenv:Header/>
   <soapenv:Body>
      <cas:Request>
         <cas:atr1>some value</cas:machineName>
      </cas:Request>
   </soapenv:Body>
</soapenv:Envelope> 
```

我得到的是：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns3:Response xmlns:ns3="http://jakisadres.com/caservice">
         <responseValue>response: null</responseValue>
      </ns3:CARevokeCertResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我的端点：

```
 @PayloadRoot(localPart = "Request", namespace = "http://jakisadres.com/caservice")
    @ResponsePayload
    public Response revokeCert(@RequestPayload Request param) {
        String request= param.getAtr1();
        Resoponse response_ = new Response();
        response.setResponseValue("response: "+request);
        return response;
    } 
```

和我的 jaxb marshaller 类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "atr1"
})
@XmlRootElement(name = "Request")
public class Request{

    protected String atr1;

    public String getAtr1() {
        return atr1;
    }

    public void setAtr1(String value) {
        this.atr1 = value;
    }

} 
```

任何线索我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:01:50.843

可能您的`atr1`元素在默认命名空间中而不是在`http://jakisadres.com/caservice`命名空间中。您的请求应该是：

```
 <cas:Request>
     <atr1>some value</atr1>
  </cas:Request> 
```

或者您可以显式指定`atr1`字段的命名空间

# iis - IIS7 将应用程序的虚拟路径更改为域根目录

> ID：13652257
> 
> 赞同：5
> 
> 时间：2012-11-30T19:58:50.993
> 
> 标签：iis, iis-7, iis-7.5, virtual-path

在 IIS 中的站点下，我创建了一个绑定到端口 80 的新节点，并停止了所有其他将绑定到该端口的网站节点/池。

在新节点下我创建了一个应用程序baz1，所以网站所在的路径是`http://MyServer/baz1/...`

我在我创建的节点下还有其他目录/应用程序，例如 baz2、baz3 等...

我唯一的问题是应用程序只有在它位于根目录时才能正确运行。所以不是在`http://MyServer/baz1/`它需要在`http://MyServer/`

有没有办法将所有应用程序分组在我的新节点下，一次只运行一个并在根目录下运行？由于多种原因，我不想将我试图在默认网站下运行的那个。

我用谷歌搜索、搜索并尝试了所有我能想到的东西，但找不到改变应用程序虚拟路径的方法，所以我希望这里有人知道。

谢谢大家，如果我的问题不清楚，请告诉我，我会尽快澄清

# c - 什么时候进行小读取的顺序查找比读取整个文件慢？

> ID：13652259
> 
> 赞同：3
> 
> 时间：2012-11-30T19:58:52.227
> 
> 标签：c, performance, file-io, disk, seek

我遇到了这样一种情况，即`lseek`在每次搜索之间重复转发并读取一个小块（300-500 字节）似乎比`read`从头开始遍历整个文件并忽略我没有的字节要慢不想。即使我只进行 5-10 次搜索，这似乎也是正确的（所以当我最终只读取约 1% 的文件时）。我对此感到有些惊讶——为什么重复向前搜索，这应该涉及更少的工作，比读取实际上必须将数据从内核空间复制到用户空间的读取速度要慢？

大概在本地磁盘上查找操作系统时，甚至可以向驱动器发送消息以进行查找，而无需通过总线将任何数据发送回，从而节省更多费用。但是我正在访问一个网络挂载，我希望读取比查找慢得多（发送一个数据包说提前移动 N 个字节而不是实际通过网络传输数据）。

无论是从本地磁盘读取还是从网络文件系统读取，这怎么可能发生？我唯一的猜测是操作系统在我寻找的每个位置之后都会预取大量数据。这是通常会发生的事情还是可能表明我的代码中有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:13:32.083

差异的大小将是查找计数/正在读取的数据与整个文件大小之比的一个因素。

> 但是我正在访问一个网络挂载，我希望读取比查找慢得多（发送一个数据包说提前移动 N 个字节而不是实际通过网络传输数据）。

如果网络的另一端有旋转磁驱动器，这种影响仍然存在，并且可能会因往返时间而显着加剧。网络协议也可能起作用。即使是固态驱动器也可能会受到一些惩罚。

I/O 调度程序可能会重新排序请求以最小化磁头移动（即使对于没有磁头的存储设备也可能很天真）。单个批量请求可能会为您提供跨多个层的更高效率。文件系统有机会在这里进行一些干预。

> 无论是从本地磁盘读取还是从网络文件系统读取，这怎么可能发生？

我不会很快忽视这些层的影响——你有测量显示本地磁盘的相同行为吗？如果您和硬件之间没有太多关系，那么得出结论要容易得多。从原始设备开始，然后从那里平分。

您是否考虑过使用内存映射？它非常适合这个用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:18:52.117

根据文件系统，具体的`lseek`实现会产生一些开销。例如，我相信在使用 NFS 时，`lseek`会通过调用`remote_llseek()`.

# asp.net - GridView OnPageIndexChanging 事件的 ASP.Net 编译错误

> ID：13652266
> 
> 赞同：0
> 
> 时间：2012-11-30T19:59:14.050
> 
> 标签：asp.net

在添加此代码之前，我收到有关 GridView 触发事件 PageIndexChanging 的错误，该事件未处理且与排序相同。所以我添加了这个事件代码然后我得到编译错误说，“CS1061：'ASP.serveredit_aspx'不包含'GridViewServer_PageIndexChanging'的定义，并且没有扩展方法'GridViewServer_PageIndexChanging'接受'ASP.serveredit_aspx'类型的第一个参数可以被发现”。但是，我在 C# 中也已经有了该事件代码。请帮忙

这是我的 GridView 属性代码，

```
<asp:GridView ID="GridViewServer" runat="server" AllowPaging="True" AllowSorting="True" OnPageIndexChanging="GridViewServer_PageIndexChanging" OnSorting="GridViewServer_Sorting" AutoGenerateColumns="False" BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="3" DataKeyNames="ServerName" GridLines="None" ShowFooter="True" onrowcancelingedit="GridViewServer_RowCancelingEdit" 
        onrowdeleting="GridViewServer_RowDeleting" onrowediting="GridViewServer_RowEditing" 
        onrowupdating="GridViewServer_RowUpdating"> 
```

此事件背后的 C# 代码，

```
private string ConvertSortDirectionToSql(SortDirection sortDirection)
    {
        string newSortDirection = String.Empty;

        switch (sortDirection)
        {
            case SortDirection.Ascending:
                newSortDirection = "ASC";
                break;

            case SortDirection.Descending:
                newSortDirection = "DESC";
                break;
        }

        return newSortDirection;
    }

    protected void gridViewServer_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridViewServer.PageIndex = e.NewPageIndex;
        GridViewServer.DataBind();
    }

    protected void gridViewServer_Sorting(object sender, GridViewSortEventArgs e)
    {
        DataTable dataTable = GridViewServer.DataSource as DataTable;

        if (dataTable != null)
        {
            DataView dataView = new DataView(dataTable);
            dataView.Sort = e.SortExpression + " " + ConvertSortDirectionToSql(e.SortDirection);

            GridViewServer.DataSource = dataView;
            GridViewServer.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:19:17.863

我意识到 gridViewServer_PageIndexChanging 和 gridViewServer_Sorting 是小写的。我忘记大写了。

# c++ - 使用静态 c 运行时库构建 libxml2

> ID：13652267
> 
> 赞同：1
> 
> 时间：2012-11-30T19:59:22.193
> 
> 标签：c++, static-libraries, libxml2

我想知道是否有任何方法可以在 Windows 上使用静态 crt 构建 libxml2。我不想处理 msvcr90.dll 问题。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:06:45.430

如果您在 Visual Studio 上构建，则可以通过转到项目设置，然后转到 C/C++ -> 代码生成，将其设置为静态链接运行时。

# c - 使用 C 对红色、绿色和蓝色进行排序

> ID：13652273
> 
> 赞同：0
> 
> 时间：2012-11-30T19:59:38.937
> 
> 标签：c

这是我第一次使用 Stack Overflow，我必须警告你，我这周早些​​时候才开始学习 C。我正在尝试编写一个简单的程序，该程序将找出 RGB 光谱中哪种颜色的值最大。它对每种颜色都有一个手动输入，但是当它完成时，我得到了 2 个数百万的奇数。有人可以帮助菜鸟吗？这是我到目前为止编写的代码：

```
#include <stdio.h>

int main()
{
    int mm, m;
    int hh, h;
    int r, g, b, c;

    printf("Enter Value For Red (0-255)\n");
    scanf("%d", &r);
    printf("Enter Value For Green (0-255)\n");
    scanf("%d", &g);
    printf("Enter Value For Blue (0-255)\n");
    scanf("%d", &b);

    if ( r > g );
        if ( r > b );
            mm = r;
            if ( g > b );
                m = b;
            if ( b > g );
                m = g;
       if ( r < b );
            mm = b;
            m = g;
    if ( g > r );
        if ( g > b );
            mm = g;
            if ( r > b );
                m = b;
            if ( b > r );
                m = r;
        if ( g < b );
            mm = b;
            m = r;

    printf("%d\n", &mm);
    printf("%d\n", &m);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:02:02.553

```
printf("%d\n", &mm);
printf("%d\n", &m); 
```

应该：

```
printf("%d\n", mm);
printf("%d\n", m); 
```

获取变量的`&`地址。当您通过*设置*变量时，`scanf()`您需要提供地址以便可以设置它。当您通过*打印*变量的值时，`printf()`您只需提供名称，而不是地址。

您现在看到的是变量作为十进制数存储在堆栈中的地址。

* * *

旁注，您的代码不像您认为的那样工作：

```
if ( r > g );
    if ( r > b );
        mm = r;
        if ( g > b );
            m = b;
        if ( b > g );
            m = g;
   if ( r < b );
        mm = b;
        m = g; 
```

它需要更多的缩进才能使其工作，现在它正在执行以下操作：

```
mm = r;
m = b;
m = g;
mm = b;
... 
```

每次运行它，因为 if 被丢弃。你不能`;`在一个`if`声明之后或者它不做它下面的事情。还可以使用花括号`{ }`来使范围做更多的事情：

```
if ( r > g )
{
    if ( r > b )
    {
        mm = r;
        if ( g > b )
            m = b;
        if ( b > g )
            m = g;
   }
   if ( r < b )
   {
        mm = b;
        m = g;
    ... 
```

是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:01:44.173

`scanf()`接受指向其参数的指针是有原因的：它必须修改它们。

但是，`printf()`不会修改它的参数（通常...... - 有例外），所以你不必向它传递指针。改变

```
printf("%d\n", &mm);
printf("%d\n", &m); 
```

到

```
printf("%d\n", mm);
printf("%d\n", m); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T20:11:22.543

您应该在 if 之后使用 { 和 }。你的形式`if ( r > g );`几乎不起作用。尤其是分号在这里是错误的。

# c - 带有简单递归 openmp 任务的 Segfault

> ID：13652277
> 
> 赞同：1
> 
> 时间：2012-11-30T19:59:57.920
> 
> 标签：c, segmentation-fault, openmp, valgrind

我正在尝试用 openmp 并行化这个递归函数：

```
#include <stdio.h>
#include <omp.h>

void rec(int from, int to){
    int len=to-from;
    printf("%X %x %X %d\n", from, to, len, omp_get_thread_num());
    if (len > 1){
        int mid = (from+to)/2;
        #pragma omp task
        rec(from, mid);
        #pragma omp task
        rec(mid, to);
    }
}

int main(int argc, char *argv[]){
    long len=1024;

    #pragma omp parallel
    #pragma omp single
    rec(0, len);

    return 0;
} 
```

但是当我运行它时，我得到了段错误：

```
$g++ -fopenmp -Wall -pedantic -lefence -g -O0 test.cpp && ./a.out
0 400 400 0
0 200 200 1
200 400 200 0
Segmentation fault 
```

当我在 valgrind 中运行它时，它没有显示任何错误。没有 -lefence 它也可以工作。

我尝试了所有可能的#pragma omp 子句组合，它要么是单线程的，要么是段错误的。

怎么了？

非常感谢。

# php - MYSQL PHP 查询

> ID：13652282
> 
> 赞同：0
> 
> 时间：2012-11-30T20:00:08.283
> 
> 标签：php, mysql

我正在尝试运行这个查询（在 Heidi sql 中工作），但我无法通过 php 在我的网站上运行它。

```
$ID_CARTERA= $_GET['id'];   

$result = mysql_query("

SELECT    K.Date_as_of,
      K.Fund_Name,
      K.Fund_Benchmark_name,
      K.Class_Name,
      K.Special_Class_Name,
      ROUND(sum(case K.Column_ID
              when 1 then K.Fund_Yield
              else 0
            end ), 2) 'Fund 1 Mes %',
      ROUND(sum(case K.Column_ID
              when 2 then K.Fund_Yield
              else 0
            end ), 2) 'Fund 6 Meses %',
      ROUND(sum(case K.Column_ID
              when 5 then K.Fund_Yield
              else 0
            end ), 2) 'Fund Año Corrido %',
      ROUND(sum(case K.Column_ID
              when 3 then K.Fund_Yield
              else 0
            end ), 2) 'Fund 1 Año %',
      ROUND(sum(case K.Column_ID
              when 4 then K.Fund_Yield
              else 0
            end ), 2) 'Fund 2 Años %',
      ROUND(sum(case K.Column_ID
              when 1 then K.Fund_Benchmark_Yield
              else 0
            end ),
                FROM      (select
          DATE_FORMAT(A.F_HASTACORTE, '%d/%m/%Y') 'Date_as_of',
          D.DES_CARTERA_CC Fund_Name,
          G.DES_CARTERA_CC Fund_Benchmark_name,
          B.DES_CARTERACLASE Class_Name,
          C.DES_CARTERACLASE_ESP Special_Class_Name,
          H.ID_COLUMNA Column_ID,
          H.DES_COLUMNA Column_labels,
          A.POR_RENTCARTERA Fund_Yield,
          A.POR_RENTBENCH Fund_Benchmark_Yield,
          I.POR_RENTCLASE Class_Yield,
          J.POR_RENTCLASEESP Special_Class_Yield,
          A.POR_RENTMENOSBENCH Plus_Minus_Fund_Benchmark,
          A.POR_RENTMENOSCLASE Plus_Minus_Class,
          A.POR_RENTMENOSCLASEESP Plus_Minus_Special_Class,
          A.POR_PERCENTILCLASE Percentile_Class,
          A.POR_PERCENTILCLASEESP Percentile_Special_Class
FROM      dr_rentmovil_carteras A
      JOIN mcarteras                D ON ( A.ID_CARTERA          = D.ID_CARTERA )
      JOIN mcarteras_clases         B ON ( D.ID_CARTERACLASE     = B.ID_CARTERACLASE )
      JOIN mcarteras_clasesesp      C ON ( D.ID_CARTERACLASE_ESP = C.ID_CARTERACLASE_ESP )

      JOIN mpaises                  E ON ( A.F_HASTACORTE        = E.F_ULT_CIERRE_DIARIO)
      JOIN det_refcru_carterasbench F ON ( A.ID_CARTERA          = F.ID_CARTERA )
      JOIN mcarteras                G ON ( F.ID_CARTERABENCH     = G.ID_CARTERA )
      JOIN dformatos                H ON ( A.ID_COLUMNA          = H.ID_COLUMNA )
      JOIN dr_rentmovil_clases      I ON ( A.ID_COLUMNA          = I.ID_COLUMNA AND E.F_ULT_CIERRE_DIARIO = I.F_HASTACORTE and B.ID_CARTERACLASE = I.ID_CARTERACLASE )
      JOIN dr_rentmovil_clasesesp   J ON ( A.ID_COLUMNA          = J.ID_COLUMNA AND E.F_ULT_CIERRE_DIARIO = J.F_HASTACORTE and C.ID_CARTERACLASE_ESP = J.ID_CARTERACLASE_ESP )
WHERE     A.ID_CARTERA = $ID_CARTERA ) K

")
or die(mysql_error()); 
```

这是我得到的错误： `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM (select DATE_FORMAT(F_ULT_CIERRE_MENSUAL, '%d/%m/%Y') 'Datos' at line 30`

我一直无法缩小问题的范围。

# javascript - JQuery 菜单仅在主页上工作

> ID：13652302
> 
> 赞同：0
> 
> 时间：2012-11-30T20:01:22.740
> 
> 标签：javascript, jquery, css, wordpress

好吧，这是一个非常简单的问题……甚至可能是愚蠢的问题。但是我已经尝试了很长时间才能使其正常工作，但没有任何效果。我有一个用加号/减号切换的菜单......这个菜单只适用于主页，但没有别的。这是代码：

```
$(document).ready(function(){   
$('.gh-gallink').toggle(
function() {
    $('.gallery_container').animate({
        marginTop: "x",
    }, 1000);
    $('.jquerycssmenu ul li ul').animate({
        marginTop: "x",
    }, 100);
    $('.jquerycssmenu ul li ul li a').animate({
    height: "x",
    }, 100);
    $('#main').animate({
        marginTop: "x",
    }, 1000);
    $(this).text('+');

}, function() {
    $('.gallery_container').animate({
        marginTop: "x",
    }, 1000);
    $('.jquerycssmenu ul li ul').animate({
        marginTop: "x",
    }, 100);
    $('.jquerycssmenu ul li ul li a').animate({
        height: "x",
    }, 100);
    $('#main').animate({
        marginTop: "x",
    }, 1000);
    $(this).text('-');

});
}); 
```

菜单工作正常，但同样......仅在主页上。当然，我的实际代码中没有 x。但是无论如何，代码在我网站的 header.php 文件中，而且它只适用于我网站的主页。我尝试将“$(document)”更改为“jQuery(Document)”，并且我也停用了所有插件，但菜单仍然只能在主页上使用。

此外，这里是显示切换按钮的 html：

```
<div class="gallerylink">
<a href="#" class="gh-gallink">
    -
</a>
</div> 
```

任何帮助，将不胜感激！:)

**编辑：**

我照着 Chipmunk 说的做了，一个一个地去掉了我标题中的每个脚本。我发现当我删除这个将页面向上滚动到锚点的脚本（如下所列）时，一切正常。但是，我仍然希望同时运行这两个脚本。这是锚滚动脚本。

```
// When the Document Object Model is ready
jQuery(document).ready(function(){
    // 'catTopPosition' is the amount of pixels #invisiblebox
    // is from the top of the document
    var catTopPosition = jQuery('#invisiblebox').offset().top;

    // When #scroll is clicked
    jQuery('#scroll, #scrolls').click(function(){
        // Scroll down to 'catTopPosition'
        jQuery('html, body').animate({scrollTop:catTopPosition}, 'slow');
        // Stop the link from acting like a normal anchor link
        return false;
    });
}); 
```

因此，当您单击#scrolls 或#scroll.. 时，它会向上滚动到锚点“#invisiblebox”。我不知道为什么这不适用于我的切换菜单。如果有人有解决方案让这两个脚本运行，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:07:33.157

请阅读 [http://www.ideazone.ca/2011/03/jquery-wordpress-how-to-avoid-common-conflicts/](http://www.ideazone.ca/2011/03/jquery-wordpress-how-to-avoid-common-conflicts/)和 [JQuery 与其他 JQuery 库冲突](https://stackoverflow.com/questions/1159815/jquery-conflict-with-an-other-jquery-library)

# java - javax.xml.bind.UnmarshalException - 带有链接异常：[org.xml.sax.SAXParseException：prolog 中不允许内容。]

> ID：13652303
> 
> 赞同：1
> 
> 时间：2012-11-30T20:01:37.573
> 
> 标签：java, rest, binding, jaxb, saxparseexception

**客户.java**

```
@Entity
@Table(name = "CUSTOMER", uniqueConstraints =
{
 @UniqueConstraint(columnNames =
{
    "CUSTNO"
})
})
@XmlRootElement
public class Customer
    implements Serializable
{
/**
 * 
 */
private static final long serialVersionUID = 1L;

@Id @Column(name = "CUSTNO", length = 10, nullable = false) private String            custNo;

@Column(name = "TITLE", length = 20, nullable = false) private String                 title;

@Column(name = "FIRSTNAME", length = 20, nullable = false) private String             
firstName;

@Column(name = "MIDINIT", length = 1, nullable = true) private String                 
midInit;

@Column(name = "LASTNAME", length = 1, nullable = false) private String               
lastName;

@Column(name = "EMAIL", length = 50, nullable = false) private String                 
email;

@Column(name = "PHONE", length = 16, nullable = true) private String                  
phone;

@Column(name = "GENDER", length = 1, nullable = true) private String                  
gender;

@Column(name = "STREETADDRESS", length = 50, nullable = true) private String          
streetAddress;

@Column(name = "CITY", length = 20, nullable = true) private String                   
city;

@Column(name = "STATE", length = 2, nullable = true) private String                    
state;

@Column(name = "ZIPCODE", length = 10, nullable = true) private String                
zipCode;

@Column(name = "COMPANYNAME", length = 25, nullable = true) private String            
companyName;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "customer") private Set<ServiceRequest> 
requests;

public Customer()
{

}
...... getters/setters.... 
```

**客户端代码：**

```
byte[] getCustomerResponse = (byte[])    
RestClientUtil.sendGetMethod(urlGetCustomer + URLEncoder.encode(custNo, "UTF-8"));
Unmarshaller unmarshaller = RestClientUtil.getUnmarshaller(Customer.class);
StringReader reader = new StringReader(new String(getCustomerResponse));

Customer customer = (Customer) unmarshaller.unmarshal(reader); 
```

我看到输出为：

```
found customer :{"customer":{"city":"city1         ","companyName":"companyName1            ","custNo":"RCN1","email":"email1@ge.com","firstName":"first1                   ","gender":"F","lastName":"last1                    ","midInit":"K","phone":"4082229871      ","state":"CA","streetAddress":"streetAddress1","title":"S   ","zipCode":"zipCode   "}} 
```

> getCustomerByCustNo(CustomerRemoteAgent.java:151) at com.ge.dsp.iworkRemote.remoteAgents.CustomerRemoteAgent.execute(CustomerRemoteAgent.java:311) at com.ge.dsp.iworkRemote.remoteAgents.CustomerRemoteAgent.main(CustomerRemoteAgent.java:368)原因：org.xml.sax.SAXParseException：prolog 中不允许内容。在 org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source) at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) at org .apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) at org.apache.xerces.impl.XMLScanner.reportFatalError(Unknown Source) at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.dispatch(Unknown Source) at org .apache.xerces。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:32:59.277

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范不包括 JSON 绑定。当 JAXB 注释模型与 JAX-RS 实现一起使用时，会出现超出 JAXB 规范的处理。这就是为什么当您尝试使用标准 JAXB API 来处理 JSON 消息时会收到 XML 解析器异常的原因。

**演示**

EclipseLink MOXy 是一个 JAXB 实现，它为 JSON 绑定提供本机支持（请参阅：[http](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html) ://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html ）。以下是使用您的问题中发布的域模型的示例（添加了访问器）

```
package forum13652303;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Customer.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File json = new File("src/forum13652303/input.json");
        Customer customer = (Customer) unmarshaller.unmarshal(json);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要`jaxb.properties`使用以下条目添加一个在与域模型相同的包中调用的文件（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**输入.json/输出**

```
{
   "customer" : {
      "city" : "city1 ",
      "companyName" : "companyName1 ",
      "custNo" : "RCN1",
      "email" : "email1@ge.com",
      "firstName" : "first1 ",
      "gender" : "F",
      "lastName" : "last1 ",
      "midInit" : "K",
      "phone" : "4082229871 ",
      "state" : "CA",
      "streetAddress" : "streetAddress1",
      "title" : "S ",
      "zipCode" : "zipCode "
   }
} 
```

# c# - SSRS 报告查看器加载缓慢

> ID：13652304
> 
> 赞同：2
> 
> 时间：2012-11-30T20:01:38.573
> 
> 标签：c#, reporting-services

我正在尝试将我们的一些 SSRS 报告集成到我们的 Web 应用程序中。我遇到了一个问题，即第一次呈现报告非常慢（15-20 秒）。随后的报告几乎是即时的几分钟。如果我在 5-10 分钟后回来尝试运行报告，它又会变得超级慢。

我已经尝试在报表服务器的 AppPool 中搞乱（更改空闲超时和工作进程回收的频率）。似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:24:03.183

这是 SSRS 的常见问题。[如本博客](http://www.pawlowski.cz/2011/07/solving-issue-long-starting-report-ssrs-2008/)所述，您可以通过 PowerShell 脚本触发应用程序域的自动重置

# objective-c - 如何重新允许我的应用使用当前位置

> ID：13652307
> 
> 赞同：0
> 
> 时间：2012-11-30T20:01:48.217
> 
> 标签：objective-c, ios, cllocationmanager

我正在使用 CLLocationManager 来查找位置。我第一次运行应用程序时出错，我不允许应用程序使用当前位置。
所以每次委托通过 locationManager:didFailWithError 选择器得到通知。
我尝试进行干净的构建并删除派生数据中的项目文件夹，但它仍然没有要求我使用当前位置。
如果我要使用该位置，我会通过该面板重新选择，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:06:33.197

如果我认为这不是编码问题，希望我理解正确：如果您使用的是 iOS6，则必须在

> 设置 > 隐私 > 定位服务。

有关更多信息，请参阅此处的 Apple 文档：http: [//support.apple.com/kb/HT5467 ?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/HT5467?viewlocale=en_US&locale=en_US)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:06:36.377

您必须从模拟器或手机中删除应用程序，然后在设备上运行另一个构建。

# jquery - 从返回的 Json 中获取字符串。精细上传

> ID：13652313
> 
> 赞同：0
> 
> 时间：2012-11-30T20:02:02.117
> 
> 标签：jquery, asp.net-mvc

我有一个控制器，它返回一个图像的 url。imageurl.AbsoluteUri 是一个文件路径，并且正在返回，让我们说它返回“myserver.windows.net/myimagename”（使用fineUploader btw）如何将该值放入我的模型中？这是我在图像控制器中调用 fileUpload 方法的 jquery

```
function createUploader() {
            var uploader = new qq.FineUploader({
                element: $('#fine-uploader')[0],
                debug:true,
                text: {
                    uploadButton: 'SELECT FILE'
                },
                request: {
                    endpoint: '@Url.Action("UploadFile", "Image", new { qqfile = "Image" })'
                },
                callbacks: {
                onComplete: function(id, fileName, responseJSON) {
                    if (responseJSON.success == false && responseJSON.limitReached) {
                        $.confirm({
                            '@Model.Image':'imageurl'
                        });
                    } else {
                        addImage(responseJSON.idImage, responseJSON.imageType, responseJSON.showDescriptionOptions);
                    }
                }
            },
            }); 
```

这是它返回的内容，imageurl实际上是“myserver.windows.net/myimagename”

```
 return Json(new { success = true, imageurl = imageurl.AbsoluteUri }, "text/html"); 
```

我认为这与 onComplete 部分有关，但不确定如何实际提取 imageurl 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:17:36.047

您不能在 MVC 模型中存储客户端 javascript 数据。MVC 模型在请求时在服务器上执行，浏览器不知道如何与它们交互。

您需要自己处理响应，使用 jQuery 更新页面的适当部分。例如，如果您想使用响应更新图像：

```
$('#response-image').attr('src', responseJSON.imageurl);

<img id="response-image"> 
```

根据您的评论进行编辑：

您可以只使用 jquery 的 .text() 来设置元素的文本。

```
$('#response-url').text(responseJSON.imageurl); 
```

然后在页面上的某个地方：（div 是无关紧要的，只是为 SO 格式添加的）

```
<div>
    The image url is <span id="response-url"></span>
</div> 
```

# python - 解码 Netbios 名称 Python

> ID：13652319
> 
> 赞同：0
> 
> 时间：2012-11-30T20:02:43.017
> 
> 标签：python, decoding, netbios

我想知道与这篇文章相反的最佳方法是什么： [encode Netbios name python](https://stackoverflow.com/questions/1965065/encode-netbios-name-python)

所以要编码，你可以使用这个：

```
encoded_name = ''.join([chr((ord(c)>>4) + ord('A'))
               + chr((ord(c)&0xF) + ord('A')) for c in original_name]) 
```

但是例如解码这个：

```
Netbios_Name= "\x46\x45\x45\x46\x46\x44\x45\x45\x46\x45\x45\x45\x45\x45\x46\x44\x46\x44\x46\x44\x43\x41\x43\x41\x43\x41\x43\x41\x43\x41\x43\x41"
## When correctly reversed, Netbios_Name should output in ASCII : "TESDTDDSSS" 
```

我虽然关于这个功能的反面，但我不知道为什么它不起作用。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:52:23.770

使用这个函数（取自[dpkt 源代码](http://code.google.com/p/dpkt/source/browse/trunk/dpkt/netbios.py)）：

```
def decode_name(nbname):
    """Return the NetBIOS first-level decoded nbname."""
    if len(nbname) != 32:
        return nbname
    l = []
    for i in range(0, 32, 2):
        l.append(chr(((ord(nbname[i]) - 0x41) << 4) |
                     ((ord(nbname[i+1]) - 0x41) & 0xf)))
    return ''.join(l).split('\x00', 1)[0] 
```

所以：

```
>> decode_name(Netbios_Name).strip()
'TESDTDDSSS' 
```

# iphone - 以编程方式读取 iPhone 设置（精确设置->常规->日期和时间->自动设置）

> ID：13652320
> 
> 赞同：8
> 
> 时间：2012-11-30T20:02:43.883
> 
> 标签：iphone, ios, ios5, ios6

我们正在开发一个 iPhone 应用程序，我需要为其读取 iPhone 设置值（确切地说是“设置->常规->日期和时间->自动设置”的状态）。有什么简单/困难的方法可以找出这个值吗？任何提示和技巧将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T20:26:45.027

您可以使用以下代码（我刚刚通过检查`/var/mobile/Library/Preferences/`iPad 上的目录内容发现了这一点）：

```
NSDictionary *pref = [[NSUserDefaults standardUserDefaults] persistentDomainForName:@"com.apple.timed"];
BOOL autotime = [[pref objectForKey:@"TMAutomaticTimeEnabled"] boolValue];
NSLog(@"Automatic time is %@", autotime ? @"enabled" : @"disabled"); 
```

这些密钥未记录在案，您可能不应该在 AppStore 应用程序中使用它们。但是，您可以在用于越狱设备的内部应用程序或软件中安全地使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:08:40.847

不，对不起，这是不可能的。

# php - 关联数组（2 个部分）

> ID：13652323
> 
> 赞同：3
> 
> 时间：2012-11-30T20:02:46.160
> 
> 标签：php

自从我进行任何 PHP 编程以来已经有一段时间了，所以我正试图摆脱生锈。

我正在尝试创建一个关联数组结构。

```
[results]
     [total]
     [people]
         [name]
         [street]
         [city]
         [state]
         [zip]

Currently, I have this.

$people = array( 'name' => '',
                 'street' => '',
                 'city' => '',
                 'state' => '',
                 'zip' => );

$results = array('total' => 10, --set dynamically
                 'people' => $people ); 
```

因此，在我的脑海中，我希望制作一个空的多维数组，我将能够在 while 循环中填充它。

首先，问题是这是正确的形式吗？我觉得我很接近但不对。了解我在做什么可能会有所帮助（如下所示）。

所以我说我想在一个while循环中填充它，这基本上是我到目前为止所拥有的。到目前为止，我一直无法上班。

```
$i = 0;
while loop
{
   $results['people'][i][name] = 'XxXxX'
   $results['people'][i][street] = 'XxXxX'
   $results['people'][i][city] = 'XxXxX'
   $results['people'][i][state] = 'XxXxX'
   $results['people'][i][zip] = 'XxXxX'

 %i++;
} 
```

我已经尝试了许多不同的组合，但仍然无法做到正确。如果重要的话，我想把这个数组作为 JSON 对象发送回浏览器。

我不确定我的初始化是否错误，在循环中设置数组是否错误，或两者兼而有之。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:10:04.357

PHP 数组需要单独和就地实例化。我不知道如何正确描述它，但您的代码应该类似于：

```
$results = array();
$results['total'] = $somevalue;
$results['people'] = array();

/*or:
$results = array(
  'total' => $somevalue,
  'people' => array()
);*/

$i = 0;
while($some_condition) {   //or: for( $i=0; $i<$something; $i++ ) {
   $results['people'][$i] = array();
   $results['people'][$i]['name']   = 'XxXxX';
   $results['people'][$i]['street'] = 'XxXxX';
   $results['people'][$i]['city']   = 'XxXxX';
   $results['people'][$i]['state']  = 'XxXxX';
   $results['people'][$i]['zip']    = 'XxXxX';

   /*or:
   $results['people'][$i] = array(
       'name'   => 'XxXxX',
       'street' => 'XxXxX',
       'city'   => 'XxXxX',
       'state'  => 'XxXxX',
       'zip'    => 'XxXxX',
   );*/

   $i++;
} 
```

请记住，如果您使用关联数组，则需要将键字符串括在引号中。此外，您仍然可以使用整数索引访问关联数组，您应该感到如此倾向于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:10:28.727

我看到了几个问题。第一个是你有`%i++`而不是`$i++`. 稍后，您引用`i`而不是`$i`. 接下来是在您的 while 循环内，您尝试在不使用引号的情况下访问名称、街道等（这可能/可能不会显示警告，具体取决于您的配置）。

尝试使用这个：

```
$i = 0;
while(NEED SOME CONDITION HERE)
{
   $results['people'][$i] = array(); //Need to let PHP know this will be an array
   $results['people'][$i]['name'] = 'XxXxX'
   $results['people'][$i]['street'] = 'XxXxX'
   $results['people'][$i]['city'] = 'XxXxX'
   $results['people'][$i]['state'] = 'XxXxX'
   $results['people'][$i]['zip'] = 'XxXxX'

 $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:13:22.000

```
$i = 0;
while (true)
{
   $results['people'][$i]['name'] = 'XxXxX'
   $results['people'][$i]['street'] = 'XxXxX'
   $results['people'][$i]['city'] = 'XxXxX'
   $results['people'][$i]['state'] = 'XxXxX'
   $results['people'][$i]['zip'] = 'XxXxX'

 $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:15:08.190

首先，与其命名所有键并声明空字符串，您只需创建一个名称数组并使用`array_fill_keys`将它们转换为键并为它们全部提供默认值（可能应该使用`NULL`而不是，`''`除非您需要`.=`在循环中使用 append ( ) . 而不是 while 循环，我只会使用 for 循环，但如果你更喜欢的话，你可以使用`while $i < 10`with`$i++``while``for`

```
$people = array_fill_keys(array('name', 'street', 'city', 'state', 'zip'), '');

$results = array('total' => 10, 'people' => array());

for($i = 0; $i < $results['total']; $i++){
    $results['people'][$i]['name'] = 'XxXxX';
    $results['people'][$i]['street'] = 'XxXxX';
    $results['people'][$i]['city'] = 'XxXxX';
    $results['people'][$i]['state'] = 'XxXxX';
    $results['people'][$i]['zip'] = 'XxXxX';
} 
```

# python - 如何通过挂钩 kernel32.dll 来制作文件过滤器

> ID：13652334
> 
> 赞同：0
> 
> 时间：2012-11-30T20:03:22.037
> 
> 标签：python, file, winapi, hook, hide

我是挂钩的新手。我正在寻找一个 python 程序，它可以通过使用`win API hooking`. 我已经读到还有另一种方法可以做到这一点，使用文件系统过滤驱动程序，或者使用内核模式 API 挂钩，我从[这里](http://www.codeproject.com/Articles/32744/Driver-to-Hide-Processes-and-Files)得到了这个想法。

无论如何，我是 python 人，所以我希望它在 python 中，搜索我起床到[PyBox](http://www1.informatik.uni-erlangen.de/content/pybox-python-sandbox)的内容。这是我可以将某些 DLL 注入应用程序然后运行它的地方。

这是执行此操作的代码：

```
 if kernel32.CreateProcessA(self.exe,
                                   None,
                                   None,
                                   None,
                                   None,
                                   creation_flags,
                                   None,
                                   None,
                                   byref(startupinfo),
                                   byref(process_information)):
            self.pid = process_information.dwProcessId
            self.tid = process_information.dwThreadId
            self.h_process = process_information.hProcess
            self.h_thread = process_information.hThread
            print "Process successfully launched with PID %d." % self.pid
            return True
        else:
            print "Process could not be launched!"
            raise WinError()
            return False 
```

这会在挂起模式下创建进程，然后：

```
def resume(self):
        if (kernel32.ResumeThread(self.h_thread) == 0):
            print "Process could note be resumed!"
            raise WinError()
            return False
        else:
            print "Process resumed."
            return True 
```

此函数在注入 DLL 后恢复进程。我想知道两件事：

1.  为什么不如果我可以阻止该过程而不是恢复它。这将阻止应用程序运行。但是我应该调用 kernel32 的哪个函数呢？
2.  我怎样才能实现`ntQueryDirectoryfile function`或`zwQueryDirectoryfile function`在这里，以便我可以向文件添加过滤器而不是阻止它。那么DLL会对过滤器产生任何影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:39:42.290

有办法了。我现在猜想 kernel32.dll 需要**内核模式挂钩**，这对 python 来说是遥不可及的。

`WINDDK`并`VS(Visual Studio)`提供内核调试器和环境来创建可以调用到exe中的.sys文件。

只需使用中定义的功能`WIN32HLP`

现在我只是想知道那个exe是否可以用python制作（顺便说一下我更喜欢）/

# sql - SQL 查询仅检索与列表或其子集匹配的记录

> ID：13652341
> 
> 赞同：1
> 
> 时间：2012-11-30T20:03:59.713
> 
> 标签：sql, sql-server

我正在从我们的 SCCM 服务器分析添加/删除程序数据，需要一些查询帮助。

数据已从 SCCM 检索并清理，因此我只剩下我感兴趣的实际应用程序列表。常用应用程序/安全更新/运行时等已被过滤掉。

我需要定义一个 SQL 查询，只有当它们有一个或多个由列表定义的应用程序时，它才会给我一个计算机及其应用程序的列表。

例如

```
Computer    | Application
--------------------------------------
WKS001      | Microsoft Office
WKS001      | WebEx
WKS001      | Java Runtime 1.6_33
--------------------------------------
WKS002      | Microsoft Office
WKS002      | WebEx
WKS002      | Java Runtime 1.6_33
WKS002      | Photoshop
--------------------------------------
WKS003      | WebEx
WKS003      | Java Runtime 1.6_33
--------------------------------------
WKS004      | WebEx
WKS004      | Photoshop 
```

我需要检索具有以下任何或所有应用程序的所有计算机：

```
Microsoft Office
WebEx
Java Runtime 1.6_33 
```

那应该给我 `WKS001`和`WKS003`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:06:43.917

如果您需要*排除*具有不在该列表中的应用程序的计算机：

```
SELECT DISTINCT t1.Computer
FROM Table AS t1
LEFT OUTER JOIN Table AS t2 ON t1.Computer = t2.Computer
    AND t2.Application NOT IN ('Microsoft Office','WebEx','Java Runtime 1.6_33')
WHERE t1.Application IN ('Microsoft Office','WebEx','Java Runtime 1.6_33')
  AND t2.Computer IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:08:51.313

```
SELECT Computer, Application
FROM TABLE_NAME_HERE
WHERE Application='Microsoft Office' 
   OR Application='WebEx' 
   OR Application='Java Runtime 1.6_33' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:08:53.890

其他答案不会带回计算机的应用程序。试试这个：

```
SELECT
    computer
    ,application
FROM
    TABLENAME 
WHERE
    computer IN
        (
            SELECT
                computer
            FROM
                TABLENAME
            WHERE
                application IN
                    (
                        'Microsoft Office'
                        ,'WebEx'
                        ,'Java Runtime 1.6_33'
                    )
        )
    AND comptuer NOT IN 
        (
            SELECT
                computer
            FROM
                TABLENAME
            WHERE
                application NOT IN
                    (
                        'Microsoft Office'
                        ,'WebEx'
                        ,'Java Runtime 1.6_33'
                    )
        ) 
```

# vb.net - Internet Explorer 和vb webbrowser 有什么不同？

> ID：13652347
> 
> 赞同：1
> 
> 时间：2012-11-30T20:04:23.743
> 
> 标签：vb.net, visual-studio-2010, internet-explorer, border

我试图创建一个程序，其中保存了我所有的服务器和服务页面，所以我的问题是：这是 Internet Explorer 中的站点：

![Internet Explorer 图像](../Images/84be56f155aabc0dd7146c6eee765915.png)

这是程序中的站点：

![节目图片](../Images/facb23fcd678d290dee8c1d624d8e63e.png)

这是在 Internet Explorer 上登录的图像：

![在 Internet Explorer 上登录](../Images/0d663447492be20b6969d6315b35d02c.png)

这是程序中的：

![登录程序](../Images/6b9f7bb74f42e2f3427edfdf2faef938.png)

谁能帮我？请

此致。

# r - 是否可以为 R 包设置默认位置而不是让用户选择？

> ID：13652348
> 
> 赞同：6
> 
> 时间：2012-11-30T20:04:32.377
> 
> 标签：r

下午好！

我是一所大学的系统管理员，我负责为计算机实验室设置图像。R 是默认映像的一部分，在很长一段时间内，我们只有一次登录所有实验室用户，允许我们设置一次默认目录，然后跨多个系统进行映像。这种情况已经改变，我们现在让所有用户都使用个性化登录方式登录。这让我想到了我在使用 R 时遇到的问题，以及我为什么要求助于你。

您会看到，正如你们大多数人可能知道的那样，当第一次运行 R 时，会打开一个对话框，提示您输入保存包等的位置。点击“确定”，它是用户文件，但点击其他任何东西，它就在你放置的任何地方。问题是，我们已经相当严格地锁定了系统，并且除了用户的个人目录之外，我们不喜欢访问任何东西。

我的问题是 - 有没有办法在第一次运行时通过免提脚本或只是某个地方的设置强制 R 默认为系统上的用户目录用于包存储？这将阻止我必须授予所有用户对 R 目录的读取和写入权限，并且由于他们实际上没有选择更改它的选择，因此搞砸的可能性会更小。如果我必须继续在该文件夹中授予权限，我可以，但我宁愿不这样做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:17:40.720

我现在无法对此进行测试，但我相信您可以将类似内容添加`Sys.setenv(R_LIBS_USER=path.expand('~\R\library'))`到 R 等目录中的 Rprofile.site 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:32:11.267

编辑您的 .Renviron 文件以设置默认路径：

```
# .Renviron file
R_LIBS = '~/.R/library' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T10:06:53.447

*'...默认到系统上的用户目录进行包存储...'*

另一种方式，特别是如果您想**为员工/学生设置不同的设置，**那就是使用组策略在登录时为选定的机器/用户设置环境变量。

例如，相当于...

```
SETX "R_LIBS" "\\fileserver2/department_shared/public/r/packages" 
```

您可以通过启动 R 并尝试轻松检查这是否有效

```
Sys.getenv("R_LIBS") 
```

此外，此命令还可以显示安装了哪些软件包：

```
rownames(installed.packages()) 
```

# php - 用php解析电子邮件附件

> ID：13652351
> 
> 赞同：0
> 
> 时间：2012-11-30T20:04:37.973
> 
> 标签：php, base64, explode, email-attachments

我有一个 .forward.postix 将传入的电子邮件传送到一个 shell 帐户，然后传送到一个解析电子邮件的 PHP 脚本 - 太棒了。

截至目前，根据我在网上看到的所有内容，我正在使用这种`explode('From: ', $email);`方法将所有内容拆分为我的数据库所需的变量。

输入附件！使用相同的方法，我这样做是为了提取一个 jpg 附件 - 但似乎并非每个电子邮件客户端都以相同的方式格式化原始源，这引起了一些头痛！

```
$contentType1 = explode('Content-type: image/jpg;', $email); //start ContentType
$contentType2 = explode("--Boundary_", $contentType1[1]); //end ContentType

$jpg1 = explode("\n\n", $contentType2[0]); //double return starts base64 blob
$jpg2 = explode("\n\n", $jpg1[1]); //double return marks end of base64 blob

$image = base64_decode($jpg2[0]); //decode base64 blob into jpg raw 
```

**这是我的问题：** 并非所有邮件客户端（例如 GMail）都将附件列为`'Content-type: image/jpg'`. GMail 放入`'Content-Type: IMAGE/JPEG'`并有时将其发送为`'Content-Type: image/jpeg'`! 哪个不符合我的爆炸...

**我的问题：**有人知道找到base64 blob边界的更好方法吗？或者也许是一种不区分大小写的爆炸方式，`'Content-Type:'`所以我可以尝试反对`image/jpg`或`image-jpeg`查看匹配的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:08:38.503

您可以尝试使用`preg_split()`. 也许是这样的

```
$pattern = '#content-type: image/jpe?g#i';
$split_array = preg_split($pattern, $email); 
```

# unity-container - Unity 的自动抽象工厂

> ID：13652359
> 
> 赞同：1
> 
> 时间：2012-11-30T20:05:25.730
> 
> 标签：unity-container, abstract-factory

我是 Unity 的新手，我很难弄清楚如何扩展 Unity 的汽车工厂概念。Unity 提供了开箱即用的能力，可以使用 Func 代替参数本身来创建工厂。像那样：

```
public class Foo
{
    private readonly Func<IBar> _barFactory;

    public Foo(Func<IBar> barFactory)
    {
        _bar = barFactory;
    }
} 
```

问题是，工厂创建的类在某些地方需要一些参数，而我只会在运行时知道这些参数。除此之外，这些参数的数量和类型因类而异。

我正在寻找类似于[Autofac DelegateFactry](http://code.google.com/p/autofac/wiki/DelegateFactories)的东西，但我想保持 Unity 的感觉。所以，我想让 Unity 像这样工作：

```
public class Foo
{
    private readonly Func<int, string, IBar> _barFactory;

    public Foo(Func<int, string, IBar> barFactory)
    {
        _bar = barFactory;
    }
} 
```

上面的代码不起作用，因为 Unity 确实可以使用该构造函数，但这正是我正在寻找的。

我尝试过使用 BuilderStrategy 但它归结为表达式或 IL 生成。在走这条路之前，我想检查一下其他选项。

有没有足够有Unity经验的人可以帮助我？

以下是我的限制：

1.  保持Unity使用Func的理念
2.  不需要在容器中注册每一个 Func
3.  构造函数应该接受从 Func 到 Func 的 Func（已经处理了 Func）
4.  更改容器不是一种选择

我希望我足够清楚。如果我不是，请告诉我。

**编辑1**：我知道我可以直接使用抽象工厂。但是，第一个目标是保持 Unity 的感觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:39:51.853

我不喜欢回答自己的问题，但我能够以某种方式解决问题，并且我相信解决方案足够好，其他人可能会感兴趣。我查看了 Unity 的源代码并从那里得到了基本的想法。我还阅读了几篇关于 Unity 的帖子。这里是：

首先，我必须创建一个继承自`IBuildPlanPolicy`. 很长，因为我在类本身中留下了一些支持类：

```
 public class AutomaticFactoryBuilderPolicy : IBuildPlanPolicy
{
    private readonly Dictionary<Type, Type> _callables = 
        new Dictionary<Type, Type>
            {
                {typeof(Func<,>), typeof(CallableType<,>)},
                {typeof(Func<,,>), typeof(CallableType<,,>)},
                {typeof(Func<,,,>), typeof(CallableType<,,,>)},
                {typeof(Func<,,,,>), typeof(CallableType<,,,,>)}
            };

    public void BuildUp(IBuilderContext context)
    {
        if (context.Existing == null)
        {
            var currentContainer = context.NewBuildUp<IUnityContainer>();
            var buildKey = context.BuildKey;

            string nameToBuild = buildKey.Name;

            context.Existing = CreateResolver(currentContainer, buildKey.Type, nameToBuild);
        }
    }

    private Delegate CreateResolver(IUnityContainer currentContainer, 
        Type typeToBuild, string nameToBuild)
    {
        Type[] delegateTypes = typeToBuild.GetGenericArguments();
        Type func = typeToBuild.GetGenericTypeDefinition();
        Type callable = _callables[func];

        Type callableType = callable.MakeGenericType(delegateTypes);
        Type delegateType = func.MakeGenericType(delegateTypes);
        MethodInfo resolveMethod = callableType.GetMethod("Resolve");

        object callableObject = Activator.CreateInstance(callableType, currentContainer, nameToBuild);
        return Delegate.CreateDelegate(delegateType, callableObject, resolveMethod);
    }

    private class CallableType<T1, TResult>
    {
        private readonly IUnityContainer _container;
        private readonly string _name;

        public CallableType(IUnityContainer container, string name)
        {
            _container = container;
            _name = name;
        }

        public TResult Resolve(T1 p1)
        {
            return _container.Resolve<TResult>(_name, new OrderedParametersOverride(new object[] { p1 }));
        }
    }

    private class CallableType<T1, T2, TResult>
    {
        private readonly IUnityContainer _container;
        private readonly string _name;

        public CallableType(IUnityContainer container, string name)
        {
            _container = container;
            _name = name;
        }

        public TResult Resolve(T1 p1, T2 p2)
        {
            return _container.Resolve<TResult>(_name, new OrderedParametersOverride(new object[] { p1, p2 }));
        }
    }

    private class CallableType<T1, T2, T3, TResult>
    {
        private readonly IUnityContainer _container;
        private readonly string _name;

        public CallableType(IUnityContainer container, string name)
        {
            _container = container;
            _name = name;
        }

        public TResult Resolve(T1 p1, T2 p2, T3 p3)
        {
            return _container.Resolve<TResult>(_name, new OrderedParametersOverride(new object[] { p1, p2, p3 }));
        }
    }

    private class CallableType<T1, T2, T3, T4, TResult>
    {
        private readonly IUnityContainer _container;
        private readonly string _name;

        public CallableType(IUnityContainer container, string name)
        {
            _container = container;
            _name = name;
        }

        public TResult Resolve(T1 p1, T2 p2, T3 p3, T4 p4)
        {
            return _container.Resolve<TResult>(_name, new OrderedParametersResolverOverride(new object[] { p1, p2, p3, p4 }));
        }
    } 

} 
```

这很简单。诀窍是为我要处理`CallableType`的每个创建一个。`Func`它不像我最初想要的那样动态，但为了使其更具动态性，我相信我必须处理 IL 或表达式树。我现在拥有它的方式对我来说已经足够了。

其次，Unity 按名称处理参数，但我必须按顺序处理它们。这就是 OrderedParametersResolverOverride 发挥作用的地方（这个类在上面的代码中使用。检查`CallableType`类）：

```
public class OrderedParametersResolverOverride : ResolverOverride
{
    private readonly Queue<InjectionParameterValue> _parameterValues;

    public OrderedParametersResolverOverride(IEnumerable<object> parameterValues)
    {
        _parameterValues = new Queue<InjectionParameterValue>();
        foreach (var parameterValue in parameterValues)
        {
            _parameterValues.Enqueue(InjectionParameterValue.ToParameter(parameterValue));
        }
    }

    public override IDependencyResolverPolicy GetResolver(IBuilderContext context, Type dependencyType)
    {
        if (_parameterValues.Count < 1)
            return null;

        var value = _parameterValues.Dequeue();
        return value.GetResolverPolicy(dependencyType);
    }
} 
```

这两个类处理`Func`创造。下一步是将该构建器添加到 Unity 的管道中。我们需要创建一个 UnityContainerExtension：

```
public class AutomaticFactoryExtension: UnityContainerExtension
{
    protected override void Initialize()
    {
        var automaticFactoryBuilderPolicy = new AutomaticFactoryBuilderPolicy();

        Context.Policies.Set(typeof(Microsoft.Practices.ObjectBuilder2.IBuildPlanPolicy),
            automaticFactoryBuilderPolicy,
            new Microsoft.Practices.ObjectBuilder2.NamedTypeBuildKey(typeof(Func<,>)));

        Context.Policies.Set(typeof(Microsoft.Practices.ObjectBuilder2.IBuildPlanPolicy),
            automaticFactoryBuilderPolicy,
            new Microsoft.Practices.ObjectBuilder2.NamedTypeBuildKey(typeof(Func<,,>)));

        Context.Policies.Set(typeof(Microsoft.Practices.ObjectBuilder2.IBuildPlanPolicy),
            automaticFactoryBuilderPolicy,
            new Microsoft.Practices.ObjectBuilder2.NamedTypeBuildKey(typeof(Func<,,,>)));

        Context.Policies.Set(typeof(Microsoft.Practices.ObjectBuilder2.IBuildPlanPolicy),
            automaticFactoryBuilderPolicy,
            new Microsoft.Practices.ObjectBuilder2.NamedTypeBuildKey(typeof(Func<,,,,>)));
    }
} 
```

最后一步是将该类实际添加到 Unity 的管道中：

```
IUnityContainer container = new UnityContainer();
container.AddExtension(new AutomaticFactoryExtension()); 
```

其余的注册是标准的。

现在可以有从`Func<>`to的构造函数`Fun<,,,,>`。例如，现在处理以下构造函数（假设可以解析`IFoo`）：

```
public class Bar
{
    private readonly Func<int, string, IFoo> _fooFactory;

    public Bar(Func<int, string, IFoo> fooFactory)
    {
        _fooFactory = fooFactory;
    }
} 
```

让我知道是否有任何问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T23:30:47.747

您是否考虑过使用 Unity 创建一个委托并注册它的实例？这样你就可以命名参数和对这些参数的注释，以及委托本身。这样您就不需要创建构建策略，并且您的代码将更具可读性。

# iphone - 网站在 iPhone 上看起来太小/缩小了

> ID：13652362
> 
> 赞同：2
> 
> 时间：2012-11-30T20:05:43.703
> 
> 标签：iphone, pixel

我现在正在开发一个在普通网络浏览器和旧智能手机上看起来很棒的网站，但在 iPhone 上它太小了。我认为这是因为 iPhone 需要大量像素并将它们压缩到更小的屏幕上，而不是真实大小。有没有办法让整个网站在手机屏幕上看起来更放大/更大，而无需创建单独的移动网站？

更新：这是我尝试使用的代码。当我刷新页面时，网站看起来一样。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

更新#2：有人要求更完整的代码，所以我也包括在内：

```
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 

<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Carolina Mobility Sales Mobile</title>
<meta name="description" content="Welcome to Carolina Mobility Sales, LLC we are Carolina&#039;s largest Wheelchair Accessible Van Dealer. We have new and used accessible vans, full sized and mini vans. Some people call these vehicle Handicap or Handicapped vans, we prefer Accessible Vans. We also offer scooter and wheelchair lifts, adaptive driving controls. We also offer Wheelchair Accessible vans for Rentals. " />
<meta name="keywords" content="Wheelchair Accessible Minivans, Handicap Vans, Handicapped Vans, Full size handicap Vans, New and Used, Wheelchair Lifts, Scooter Lifts, Ramps, Driving Equipment. North Carolina, NC, South Carolina, SC, Charlotte, Columbia, Greenville, Spartanburg, Handicap Vehicle Specialists, Mobility Needs, wheelchair van, wheel chair van, accessible van, wheelchair lifts, wheelchair carriers, wheelchair ramp, Adapted van, adapted vehicle, handicap van, handicapped van, minivans, conversion minivans, disabled driving, accessible transportation, scooter lift, scooter ramp, scooter carrier, hand controls, disabled, disability, disabilities, mobility, disabled transportation, new vans, used vans, Braun, Braun low floors, tie down, remote entry, ramp, kneel suspension, fold out, in floor, power door, ezlock, EMC, NMEDA, QAP, rampvan, handicap vans, Rentals" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<style type="text/css">
<!--
body {
    background-color:white;
    color:black;
    font-family: Helvetica, Arial, sans-serif;
    text-align:center;
    font-size:16px;
}
#header {
    background-image:url('images/br_grad.jpg');
    background-repeat:repeat-x;
    width:100%;
    height:303px;
}
#headerimage {
    background-image:url('images/TopImage_nograd.png');
    background-repeat:no-repeat;
    width:320px;
    height:303px;
    margin-right:auto;
    margin-left:auto;
}
#facebook {
    background-color:#b3d6e6;
    border: solid 2px #0078ae;
    position:relative;
    top:115px;
    z-index:99;
    padding:4px;
    width:320px;
}
#facebook a {
    text-decoration:none;
    font-weight:bold;
    color:#0078ae;
    justify:center;
    font-size:15px;
}
#navigation {
    background-color:#b3d6e6;
    border: solid 2px #0078ae;
    -moz-border-radius: 15px;
    border-radius: 15px;
    padding:10px;
    width:97%;
    margin-right:auto;
    margin-left:auto;
}
.button {
    -moz-border-radius: 15px;
    border-radius: 15px;
    height:20px;
    margin-bottom:10px;
     /* fallback */ 
    background-color: #2f2f30; 
    /* Safari 4-5, Chrome 1-9 */ 
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#444445), to(#181819)); 
    /* Safari 5.1, Chrome 10+ */ 
    background: -webkit-linear-gradient(top, #444445, #181819); 
    /* Firefox 3.6+ */ 
    background: -moz-linear-gradient(top, #444445, #181819);
     /* IE 10 */ 
    background: -ms-linear-gradient(top, #444445, #181819); 
    /* Opera 11.10+ */
     background: -o-linear-gradient(top, #444445, #181819);
    padding-top:5px;
}
.button a {
    text-decoration:none;
    color:white;
    font-weight:100;
    display:inline-block;
    position:relative;
}
.button .star {
    position:relative;
    left:8px;
    bottom:2px;
    width:5px;
    float:left;
}
.button .arrow {
    position:relative;
    right:3px;
    float:right;
    bottom:3px;
}
#locations {
    margin-right:auto;
    margin-left:auto:
}
#locations img {
    margin-top:7px;
    margin-right:2px;
}

-->
</style>
<script type="text/javascript">
  function DoNav(theUrl)
  {
  document.location.href = theUrl;
  }
  </script>

</head> 

<body> 

<div id="wrapper">

<div id="header">

    <div id="headerimage">

        <div id="facebook">
        <a href="facebooklinks.html">Click to "Like" Us on Facebook!</a>
        </div>  

    </div>

</div>

<img src="images/bubble.png" alt="Carolina Mobility Mobile" />

<div id="navigation">

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="inventory.html">Inventory</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="locations.html">Locations</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="contact.html">Contact Us</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="about.html">About Us</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="videos.html">Videos</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="reasons.html">Top 10 Reasons</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div class="button">
    <div class="star"><img src="images/star.png" alt="star" /></div>
    <a href="http://www.cmobilitysales.com">Full Website</a>
    <div class="arrow"><img src="images/arrow_rt.png" alt="arrow_rt" /></div>
    </div>

    <div id="locations">

    <a href="callto:8005968266"><img src="images/charlotte.png" alt="charlotte" /></a>
    <a href="callto:8668265438"><img src="images/columbia.png" alt="columbia" /></a><br />
    <a href="callto:8888865438"><img src="images/greenville.png" alt="greenville" /></a>
    <a href="callto:8777855438"><img src="images/savannah.png" alt="savannah" /></a>

    </div>

</div>

</div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T00:05:43.933

`font-size`从您的`body`CSS 中删除。此静态数字可防止文本大小调整为大于 16（非常小）像素。

此外，要启用缩放，也请删除`maximum-scale=1`。

# iframe - 如何使指向 iframe 的目标链接也滚动到它？

> ID：13652363
> 
> 赞同：0
> 
> 时间：2012-11-30T20:05:50.510
> 
> 标签：iframe, web, scroll, anchor

有没有办法在我的 iframe 中打开一个网页并让它自动滚动到它？换句话说......我想知道如何结合这个：

```
<a href="/example" target="myframe"> 
```

有了这个：

```
<a href="#myframe"> 
```

谢谢！

我不希望它在 iframe 中滚动到目标 html 中的 anoche。事实上，iframe 不允许滚动。我想在父（根网站）中滚动到 iframe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:03:30.417

我找到了这个解决方案。完美运行。

```
<a href="javascript:void(0)" onclick="IFrameScroll('http://www.asdf.com')">Class Name</a>

<script type="text/javascript">
    function IFrameScroll(link){
        window.myIframe.location=link;
        window.location.hash='myIframe'
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:11:14.023

是的，您可以通过将文档片段标识符（以 # 符号开头的内容）放在 URL 之后来做到这一点，如下所示：

```
<a href="/example#myframe" target="myframe"> 
```

要进行这项工作，您的页面（`example`在这种情况下）必须具有这样的命名锚：

```
<a name="myframe">... 
```

# google-drive-api - 没有收到“webViewLink”作为响应？

> ID：13652364
> 
> 赞同：1
> 
> 时间：2012-11-30T20:05:52.830
> 
> 标签：google-drive-api

从管理控制台打开 Google Drive API 访问并获取我的客户端 ID 密钥后，我按照示例代码（使用 Python 2.7），我能够插入一个文件夹，设置适当的权限（type=anyone,role=reader） , 并在新文件夹中插入一个 text/html 类型的文件。

但是，我通过在驱动器服务上执行插入收到的 JSON 文件资源对象没有“webViewLink”字段！有“webContentLink”和“selfLink”字段，但似乎缺少静态 HTML 发布所必需的“webViewLink”。

最令人费解。如果此功能尚未打开，或者我需要配置我的帐户设置以允许 HTML 发布，请告诉我。任何其他帮助将不胜感激；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:33:10.237

该`webViewLink`属性仅针对公用文件夹返回，而不是此类文件夹中的单个文件。您可以使用它作为基本 url 来构建指向您的文件的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-07T14:05:37.160

可以通过执行以下操作来检索**WebViewLink**文件属性：

```
$file = $service->files->get($file_id, array('fields' => 'webViewLink'));
$web_link_view = $file->getWebViewLink(); 
```

或者

```
$sheetsList = $drive_service->files->listFiles([
  'fields' => 'files(id, name, webViewLink, webContentLink)',
]);

$web_link_view = $sheetsList->current()->getWebViewLink(); 
```

请注意，您应该加载指定要附带的字段的文件（在本例中为`webViewLink`）。如果您不这样做，则只有`id`并且`name`将可用。

如果您还需要配置文件权限，您可以执行以下操作：

```
$permissions = new \Google_Service_Drive_Permission();
$permissions->setRole('writer');
$permissions->setType('anyone');

$drive_service->permissions->create($file_id, $permissions); 
```

`setRole()`和的可能值`setType()`可以在这里找到：[https ://developers.google.com/drive/api/v3/reference/permissions/create](https://developers.google.com/drive/api/v3/reference/permissions/create)

# java - 在 tomcat/servlet 中避免与遗留代码的 HTTP 会话

> ID：13652366
> 
> 赞同：0
> 
> 时间：2012-11-30T20:05:55.623
> 
> 标签：java, session, tomcat

我被告知要使用一些由 servlet 和 taglib 组成的第 3 方软件。servlet 生成搜索结果，taglib 根据 servlet 呈现结果和其他交互元素。

问题是第 3 方解决方案是通过 http 会话实现的，这意味着 servlet 进行搜索，将结果存储在会话中，将重定向发送到浏览器并在视图页面上（在一个完整的单独的 http 请求中）从会话显示。

我想摆脱会话，因为这不适用于多个选项卡并且还有其他几个缺点。但是 servlet 和 taglib 是按原样交付的，如果我需要不同的东西，我必须自己从头开始实现它。

知道如何在一个请求中实现这一点，从而不需要会话吗？在最好的情况下，无需更改代码，而只需一个包装器。它可以接受服务器创建会话，但我不希望浏览器依赖它。

我的一个想法是使用 request-dispatcher 在一个 http 请求中执行 servlet 调用和视图，但该软件仍然使用会话。然后我可以在每次请求后丢弃会话。更好的想法受到高度赞赏。

我当然知道，最好的办法是在不满足我要求的情况下正确实施它。但是一切照旧，我们尽量避免花费太多时间。

提前谢谢，晚上愉快，米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:19:32.887

我知道这不是最好的解决方案，但创建一个**javax.servlet.Filter将****HttpServletRequest**和**HttpServletResponse**与自定义的包装在一起。覆盖自定义包装器中的**request.getSession()**和**response.sendRedirect()**方法。

并通过在**web.xml**文件中定义属性**<filter-mapping>**将过滤器应用于搜索 servlet 和 JSP 。

# java - 制作 MySQL 方法

> ID：13652367
> 
> 赞同：0
> 
> 时间：2012-11-30T20:05:57.843
> 
> 标签：java, mysql

我对 Java 世界很陌生，我不太确定如何做到这一点。

我有一个 MySQL 类，它可以很好地提取一个表，并将其打印到控制台。但是，我需要从另一个类执行自定义 SQL 查询，但我不知道该怎么做。有谁能帮忙吗？

这是mysql类：

```
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class mySQL {

    public static void main(String[] args) {

        Connection con = null;
        PreparedStatement pst = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://host:port/database";
        String user = "user";
        String password = "password";

        try {

            con = DriverManager.getConnection(url, user, password);
            pst = con.prepareStatement("SELECT * FROM NFT_users");
            rs = pst.executeQuery();
            con = DriverManager.getConnection(url, user, password);

            while (rs.next()) {
                System.out.print(rs.getInt(1));
                System.out.print(": ");
                System.out.println(rs.getString(2));
            }

        } catch (SQLException ex) {
                Logger lgr = Logger.getLogger(mySQL.class.getName());
                lgr.log(Level.SEVERE, ex.getMessage(), ex);

        } finally {

            try {
                if (rs != null) {
                    rs.close();
                }
                if (pst != null) {
                    pst.close();
                }
                if (con != null) {
                    con.close();
                }

            } catch (SQLException ex) {
                Logger lgr = Logger.getLogger(mySQL.class.getName());
                lgr.log(Level.WARNING, ex.getMessage(), ex);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:11:57.790

您的问题不是关于`SQL`，而是关于软件设计。

考虑一个类，它的全部存在都是为了让您访问数据。它会做所有的连接工作（`private void loadConnection`），然后有类似的方法`ArrayList<User> getUsers()`。

然后，当您需要`User`s 列表时，您所要做的就是做`myDatabaseObject.getUsers()`，或者在另一种情况下，做`myDatabaseObject.getOtherObjects()`。但是您的其余代码都不知道有关 SQL 或连接到数据库的任何信息。

* * *

如果你想做的不仅仅是非常简单的数据库访问，你应该考虑学习[Hibernate](http://www.hibernate.org/)。[维基百科链接。](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)如果您曾经阅读过该站点上的问题并想知道 Hibernate 是什么，那么它正是执行此操作的工具。

至于如何自己做，只需将连接代码放在构造函数中，将连接保存到字段，然后让上述方法进行查询（最好使用[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)）。

# android - 在 ActionBar 中为 MenuItem 使用选择器

> ID：13652368
> 
> 赞同：4
> 
> 时间：2012-11-30T20:06:01.247
> 
> 标签：android, android-actionbar

我正在使用 ActionBarSherlock。我有一个 MenuItem，我想使用一个只有那个 MenuItem 的自定义选择器，而不是 ActionBar 中的其他选择器。这是菜单代码：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_include_location"
        android:icon="@drawable/icon_place_selector"
        android:showAsAction="always"
        android:title="@string/menu_include_location"/>

    <item
        android:id="@+id/menu_send"
        android:icon="@drawable/ic_send"
        android:showAsAction="ifRoom|withText"
        android:title="@string/menu_send"/>

</menu> 
```

这是 icon_place_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/location_place" android:state_pressed="false"/>
    <item android:drawable="@drawable/location_no_gradient" android:state_pressed="true"/>

</selector> 
```

问题是在 MenuItem 中，图标只是其中的一小部分。这是显示的屏幕截图。整个背景应该改变，而不仅仅是图标。我怎么做？

![在此处输入图像描述](../Images/191d439ac63aeaee8875cdbf04f1de21.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:04:12.203

您可以通过在代码中设置自定义 ActionView 来更改特定操作栏项的选择器：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    MenuItem menuItem = menu.findItem(R.id.menu_include_location);
    ImageView image = new ImageView(this);
    image.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT));
    image.setPadding(16, 0, 16, 0);
    image.setImageResource(R.drawable.ic_launcher);
    image.setBackgroundResource(R.drawable.icon_place_selector);
    image.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            // ...
        }
    });
    menuItem.setActionView(image);
    return true;
} 
```

如果要更改所有操作栏项目的选择器，请应用这些样式：

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="android:selectableItemBackground">@drawable/icon_place_selector</item>
    <item name="android:actionBarItemBackground">@drawable/icon_place_selector</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T05:18:48.013

使用[Actionbar 样式生成器](http://jgilfelt.github.io/android-actionbarstylegenerator)，为您的样式设置样式并下载 zip 文件

在下载的 zip 文件中，打开“drawables”文件夹中的 selectable_background_xxxx.xml（xxxx -> 为您自己的样式指定的名称）文件，然后在按下状态为 true 时将可绘制对象更改为您想要的九个补丁 img 或颜色代码。

```
<item android:state_pressed="true" android:drawable="@color/your_color" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T14:58:47.847

首先你应该知道，如果你设置`android:selectableItemBackground`了你的全息样式，整个小部件，即一个按钮，都会有那个背景选择器。

如果您只需要更改操作栏菜单项的图标选择器背景，这里有一个简单的答案！

只需设置`android:actionBarItemBackground`您的全息样式！

```
<style name="AppTheme.Dark" parent="android:Theme.Holo">
    <item name="android:actionBarItemBackground">@drawable/item_background_holo_light</item>
</style> 
```

希望它有帮助:-)

# python - 'str' 对象不适用

> ID：13652370
> 
> 赞同：0
> 
> 时间：2012-11-30T20:06:14.217
> 
> 标签：python, string

我有以下用 Python 编写的小函数：

```
def encode(str):
    out = ""
    for i in str:
        ret += str(ord(i.upper()) - 64)
    return ret 
```

基本上，我想要做的是获取 alphabat 中字母的编号并将其连接到“out”字符串。使用此代码，我在第 4 行得到回溯：“str”对象不适用。

有人可以解释一下为什么会引发此错误以及如何解决此问题吗？（对不起，如果这已经被问过一次，我找不到它，可能也是因为我对 Python 和编程很陌生）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:07:12.983

不要调用你的变量`str`，你正在隐藏[内置函数](http://docs.python.org/2/library/functions.html#str)。

此外，您需要修复`out`/的命名`ret`。

我个人会这样写这个函数：

```
def encode(s):
   return ''.join(str(ord(c.upper()) - 64) for c in s) 
```

（我并没有真正遵循`str(ord(...))`它的意图，所以我只是从你的代码中复制了它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:08:01.857

切勿以预定义的内置名称命名您的变量。

在您的代码中，`str`不是内置函数。它是您在函数中用作参数的变量。

另一个问题是，你已经声明了`out`变量，使用`ret`which 会给你错误。更改`out = ""`为`ret = ""`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:38:56.340

正如其他人所说，不要`str`用作变量。

我怀疑这是你想要的：

```
def encode(s):
    return "".join(chr(ord(c.upper()) - 64) for c in s) 
```

这相当于：

```
def encode(s):
    out = ""
    for c in s:
        ret += chr(ord(c.upper()) - 64)
    return ret 
```

您正在寻找`chr()`将数字 ASCII/Unicode 值转换为 1 个字符的字符串的函数。运行`str()`将转换`5`为`"5"`.

`for c in s`同样在风格上，在迭代字符串和`for i in x`迭代整数序列时通常会这样做。

# sql - 当@parm =-1 时返回 IN，否则返回 @parm 值

> ID：13652372
> 
> 赞同：0
> 
> 时间：2012-11-30T20:06:24.413
> 
> 标签：sql, sql-server

我想过滤我的查询，但知道语法：

**这是我不正确的语法：**

```
WHERE 
 (@StatusId = - 1 then Status.StatusId IN (1, 2, 3, 4)) 
else 
  Status.StatusId = @StatusId) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:09:42.153

```
WHERE
(@StatusId = -1 AND Status.StatusID IN (1,2,3,4))
OR
(@StatusId <> -1 AND Status.StatusID = @StatusId) 
```

请注意，`@StatusId <> -1`如果 @StatusId 为空，则返回 false。我假设只有在@StatusId 不等于-1 时才应该进行相等性检查。如果不是这种情况，那么您可以从第二个子句中删除该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:09:37.037

您需要使用布尔逻辑。试试这个：

```
WHERE 
 ((@StatusId = - 1 AND Status.StatusId IN (1, 2, 3, 4)) OR Status.StatusId = @StatusId) 
```

请注意，整个语句都在括号中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:10:08.223

您可以这样做，但这样做可能会导致查询性能问题（搜索参数嗅探）。更好的是根据 的值动态生成正确的 SQL，`@StatusID`并且只运行您需要的位。

```
Where (
  @StatusID = -1 And 
  Status.StatusID In (1, 2, 3, 4)
) Or (
  @StatusID != -1 And
  Status.StatusID = @StatusID
) 
```

# ruby-on-rails - 在 Rails 中实现更简单的 find_by_[attribute] 代码

> ID：13652386
> 
> 赞同：1
> 
> 时间：2012-11-30T20:06:56.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, metaprogramming

我有一个状态表，每个状态都有一个名称属性。目前我可以这样做：

```
FooStatus.find_by_name("bar") 
```

这很好。但我想知道我是否可以这样做：

```
FooStatus.bar 
```

所以我有这种方法：

```
class FooStatus < ActiveRecord::Base
  def self.method_missing(meth, *args, &block)
    if self.allowed_statuses.include?(meth.to_s.titleize)
      self.where("name = ?", meth.to_s.titleize).first
    else
      super(meth, *args, &block)
    end
  end

  def self.allowed_statuses
    self.pluck(:name)
  end
end 
```

上面的代码有效，但会导致以下奇怪的行为：

```
FooStatus.respond_to?(:bar) => false
FooStatus.bar => #<FooStatus name: 'bar'> 
```

这不是很好，但是如果我尝试实现 respond_to?，我会遇到递归问题

```
class FooStatus < ActiveRecord::Base
  def self.method_missing(meth, *args, &block)
    if self.allowed_statuses.include?(meth.to_s.titleize)
      self.where("name = ?", meth.to_s.titleize).first
    else
      super(meth, *args, &block)
    end
  end

  def self.allowed_statuses
    self.pluck(:name)
  end

  def self.respond_to?(meth, include_private = false)
    if self.allowed_statuses.include?(meth.to_s.titleize)
      true
    else
      super(meth)
    end
  end
end 
```

这让我：

```
FooStatus.bar => ThreadError: deadlock; recursive locking 
```

关于让 method_missing 和 respond_to 一起工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:15:57.843

我不知道我是否会推荐您的方法...对我来说似乎太神奇了，我担心当您的状态为“销毁”或您可能合法地想要调用的其他方法时会发生什么（或Rails 在内部调用你不知道的）。

但是......我认为您最好扩展类并通过循环遍历 allowed_statuses 并创建它们来自动定义方法，而不是解决方法丢失。这会使respond_to? 工作。您还可以检查以确保它尚未在其他地方定义...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:01:25.027

我同意 Philip Hallstrom 的建议。如果您在构建类时知道 allowed_statuses，那么只需遍历列表并明确定义方法：

```
%w(foo bar baz).each do |status|
  define_singleton_method(status) do
    where("name = ?", status.titleize).first
  end
end 
```

…或者如果您需要代码中其他地方的状态列表：

```
ALLOWED_STATUSES = %w(foo bar baz).freeze
ALLOWED_STATUSES.each do |status|
  define_singleton_method(status) do
    where("name = ?", status.titleize).first
  end
end 
```

更清晰，更短，更不容易发生未来的破损和奇怪的兔子洞与 ActiveRecord 的冲突，就像你所在的那样。

您可以使用 method_missing 和朋友做一些非常酷的事情，但这不是进行元编程时使用的第一种方法。如果可能，显式通常会更好。

我也同意 Philip 关于与内置方法产生冲突的担忧。拥有一个硬编码的状态列表可以防止它走得太远，但您可能会考虑一个约定，`FooStatus.named_bar`而不是`FooStatus.bar`该列表是否可能增长或更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:16:14.357

使用范围。

```
class FooStatus < ActiveRecord::Base
  scope :bar, where(:name => "bar")

  # etc
end 
```

现在，您可以执行`FooStatus.bar`这将返回一个 ActiveRelation 对象。如果您希望它返回单个实例，则可以执行`FooStatus.bar.first`or if many `FooStatus.bar.all`，或者您可以将`.first`or`.all`放在作用域的末尾，在这种情况下，它将返回与查找器相同的内容。

如果输入不是恒定的（不总是“bar”），您还可以使用 lambda 定义范围。 [本指南的第 13.1 节有一个示例](http://guides.rubyonrails.org/active_record_querying.html#scopes)

# wordpress - wordpress：wp_list_categories order by 根本不起作用

> ID：13652393
> 
> 赞同：3
> 
> 时间：2012-11-30T20:07:56.230
> 
> 标签：wordpress, wp-list-categories, jigoshop

**上下文：使用带有 jigoshop 插件的 Wordpress**

我正在使用 wp_list_categories 带来运行良好的产品类别并带来所需的列表。唯一的问题是类别的顺序。我使用了几个 orderby 选项（名称、ID、slug），但列表顺序仍然如下所示：

工具和刷子 卸妆和底漆 粉末 唇部 荧光笔 粉底 眼部 遮瑕 古铜色 腮红

jigoshop 小部件具有以下代码：

```
$args = array(
    'orderby'       => 'name',
    'show_count'    => $count,
    'hierarchical'  => $is_hierarchial,
    'taxonomy'      => 'product_cat',
    'title_li'      => null,
);
wp_list_categories(apply_filters('widget_product_categories_args', $args)); 
```

我将通过添加过滤器来替换它：

```
add_filter('widget_product_categories_args','myFun');
function myFun($out){
    .......
    .......
    $args = array(
    'orderby'            => 'name',
    'order'              => 'ASC',
    'style'              => 'list',
    'show_count'         => 0,
    'hide_empty'         => 0,
    'child_of'           => $topMostParent,
    'hierarchical'       => 1,
    'title_li'           => '',
    'current_category'   => $cur_cat,
    'taxonomy'           => $taxonomyName,
);  
return $args;
} 
```

我也尝试过停用其他插件，但对结果没有影响。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:11:06.507

最有可能的是，
某个地方另一个过滤器正在改变这些可能的参数。
为了执行它们：

*   `get_categories_taxonomy`
*   `get_terms_args`
*   `get_terms`
*   `get_terms_orderby` **<--最有可能？**
*   `list_terms_exclusions`
*   `get_terms_fields`
*   `terms_clauses`
*   `get_terms` *（再次）*
*   `get_terms` *（再来再来）*
*   `wp_list_categories`

这些分为3个主要功能（可能影响结果的功能）

*   `wp_list_categories`
    *   `get_categories`
        *   `get_terms`

我建议从`get_terms_orderby`过滤器开始。

如果这不起作用，我会尝试使用该功能[`get_terms`](http://codex.wordpress.org/Function_Reference/get_terms) 这样你至少会知道它是否在哪个级别出错。

希望这会有所帮助，让我知道；）

# android - RelativeLayout.ALIGN_PARENT_RIGHT 不起作用

> ID：13652395
> 
> 赞同：0
> 
> 时间：2012-11-30T20:08:05.417
> 
> 标签：android, android-layout

RelativeLayout.ALIGN_PARENT_RIGHT 不起作用。(((这是我的Android-Function。她在舞台上添加了新消息。

我不明白。为什么我的代码不能正常工作

```
 private void addMessageToStage(Message message) {

            LinearLayout scrollChatMessagesOutput = (LinearLayout) findViewById(R.id.chatMessagesOutput);

            LayoutInflater layoutInflater = getLayoutInflater();

            View view = layoutInflater.inflate(R.layout.chat_single_message, null, false);

            TextView messageTextView = (TextView) view.findViewById(R.id.singleChatMessageTextView);

            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);

            if (messagesAlignId % 2 == 0) {

                    params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);

                    messageTextView.setBackgroundResource(R.drawable.chat_input_message_shape);

            } else {

                    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);

                    messageTextView.setBackgroundResource(R.drawable.chat_output_message_shape);

            }

            messageTextView.setText(Html.fromHtml("<b><u>" + message.getMessage() + "<font color=\"#cccccc\" size=\"4px\">" + "\n" + message.getTime() + "</font></b></u>"));

            RelativeLayout messageAlignLayout = new RelativeLayout(this);

            messageAlignLayout.addView(view, params);

            scrollChatMessagesOutput.addView(messageAlignLayout);

    } 
```

它是chat_single_message。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/chatMessage"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="horizontal"
   android:weightSum="1.0" >
    <TextView
       android:id="@+id/singleChatMessageTextView"
       style="@style/singleChatMessageTextStyle" />
</LinearLayout> 
```

它是 singleChatMessageTextStyle。

```
<style name="singleChatMessageTextStyle" parent="@android:style/TextAppearance.Small">
    <item name="android:layout_width">0dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_marginBottom">10dp</item>
    <item name="android:layout_marginLeft">5dp</item>
    <item name="android:layout_marginRight">5dp</item>
    <item name="android:padding">3dp</item>
    <item name="android:layout_weight">0.7</item>
    <item name="android:textColor">#000000</item>
    <item name="android:typeface">sans</item>
    <item name="android:textSize">12sp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:52:08.653

考虑使用两种不同的布局：

*   左侧文本的布局，`chat_single_message_left.xml`：

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/chatMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <TextView
            android:id="@+id/singleChatMessageTextView"
            style="@style/singleChatMessageTextStyle" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.3" 
            android:visibility="invisible" />

    </LinearLayout> 
    ```

*   与右侧文本类似的布局`chat_single_message_right.xml`：

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/chatMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.3" 
            android:visibility="invisible" />

        <TextView
            android:id="@+id/singleChatMessageTextView"
            style="@style/singleChatMessageTextStyle" />

    </LinearLayout> 
    ```

您应该使用 ListView 而不是 ScrollView 来显示每条消息，ListView对于大型对话来说要快得多*。*

# ios - iPhone 或 iPad 一次可以支持多少个蓝牙连接？

> ID：13652398
> 
> 赞同：1
> 
> 时间：2012-11-30T20:08:17.393
> 
> 标签：ios, bluetooth, core-bluetooth

> **可能重复：**
> [CoreBluetooth 上的最大外围设备数量？](https://stackoverflow.com/questions/13469502/maximum-number-of-peripherals-on-corebluetooth)

我们正在构建一套与 iOS 设备通信并与我们正在编写的应用程序交互的 BTLE 小工具。我们一次可以连接多少个？

# facebook - 脸书OG：标题

> ID：13652407
> 
> 赞同：1
> 
> 时间：2012-11-30T20:08:49.853
> 
> 标签：facebook, addthis

为什么 facebook 对象调试器在 y og:titls 和 og:discriptions 已经在我的 src 代码中显示它时不接受它？？？

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta property="og:title" content="Was the moon landing real in 1969" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.opinionfreaks.com" />
<meta property="og:image" content="http://www.opinionfreaks.com/images/logoMain.png" />
<meta property="og:description" content="Was the moon landing real in 1969" />
<meta property="og:site_name" content="opinionfreaks" /> 
```

当我通过对象调试器运行相同的链接时，它不会显示它们....任何想法...

亲切的问候

罗南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:23:31.870

@CBroe 基本上说了什么。

您的服务器需要可访问公共网络，或者在 Facebook 爬虫的阻止规则中排除。[文档](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)中有更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:40:50.137

已解决：必须动态创建 og:url ...http://www。opinionfreaks.com?user_id =343&title= ...似乎奏效了

# javascript - 需要在javascript onload中调用这个函数

> ID：13652409
> 
> 赞同：0
> 
> 时间：2012-11-30T20:08:51.843
> 
> 标签：javascript, html, css, function, call

如何将此函数 onLoad 调用到 url？

```
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(),
        dur = 500;

    function showDiv() {
        divs.fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 5 * 1000); // do this every 5 seconds     };

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    }); });​ 
```

此功能激活我的交互式工具提示；但是，我不知道如何调用它，而且我需要将它放在标题或页面中吗？脚本在页面上，链接在标题上......想法？

提前致谢。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:10:10.657

像这样调用函数：

```
$(document).ready(function(){
fadeLoop()
});

Edit 
```

看起来该功能被点击事件激活？为什么不将上面的内容更改为：

```
$(document).ready(function(){
       $('#start').trigger('click');
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:10:23.013

查询。

```
function fadeLoop() {
    ....
});​

$(window).on('load', fadeLoop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:40:12.057

感谢大家的帮助。这是完成的工作代码，享受！

```
</script>
<script src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
fadeLoop()
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(),
        dur = 300;

    function showDiv() {
        $("div.fader").fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 7 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});
});
</script>
<!--#include file="header.asp"-->
<% if Request("interactive") = "on" then %>
<form name="tutorial">

<div class="fader"><div class="arrow-w arrowlocation1" style="font-size:1em;" ></div><div id="tutorial1" class="tutorial createquestion1">Start by creating a title and selecting a folder for your question to be stored in.</div></div>

<div class="fader"><div class="arrow-w arrowlocation2" style="font-size:1em;" ></div>
<div id="tutorial2" class="tutorial createquestion2">Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.</div></div>

<div class="fader"><div class="arrow-w arrowlocation3" style="font-size:1em;" ></div>
<div id="tutorial3" class="tutorial createquestion3">Select your options and/or upload an attachment (file, video or audio).</div></div>

<div class="fader"><div class="quicktiptitle quicktiplocation4">QUICK TIP</div><div class="arrow-n arrowlocation4" style="font-size:1em;" ></div>
<div id="tutorial4" class="quicktip createquestion4">To create questions easier update your question preferences in your account area options.</div></div>

<div class="fader"><div class="arrow-w arrowlocation5" style="font-size:1em;" ></div>
<div id="tutorial5" class="tutorial createquestion5">Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.</div></div>

<div class="fader"><div class="arrow-e arrowlocation6" style="font-size:1em;" ></div>
<div id="tutorial6" class="tutorial createquestion6">Write your questions, answers and you are ready to go.</div></div>

<div class="fader"><div class="arrow-w arrowlocation7" style="font-size:1em;" ></div>
<div class="quicktiptitle quicktiplocation7">QUICK TIP</div>
<div id="tutorial7" class="quicktip createquestion7"> Click on this icon to open and close sections that you don't use. These will remain closed whenever you visit this page until you open them again.</div></div></form>

<% end if %> 
```

# qt - 更改 QDate 显示日期格式的方式

> ID：13652411
> 
> 赞同：1
> 
> 时间：2012-11-30T20:08:58.230
> 
> 标签：qt, qdate

我的应用程序有一个 QTreeWidget，它在其中一个列中使用 QDate。由于这些列接受 QVariants，它们几乎可以保存任何类型的数据。我发现 TreeWidget 必须使用实际的 QDate 对象而不是 QStrings 才能使列排序功能正常工作。如果我使用 QStrings 作为日期，它们不会按正确的时间顺序排序，而是按字符串的数值排序。（这是错误的！）我的程序支持多种日期格式：美国风格、欧洲风格和 ISO-8601 风格。我想根据用户选择的日期格式在整个应用程序中保持一切一致。

但是，我注意到 QDate 仅以 MM/DD/YYYY 格式显示日期。还有一个奇怪的错误，QDate 在 Windows 上显示 MM/DD/YYYY，但完全相同的代码在 Linux 上显示 MM/DD/YY。如何让 QDate 以 YYYY/MM/DD 或 DD/MM/YYYY 格式显示日期***而不***转换为 QString？***必须***将所有内容保持为QDate 格式，这样我就不会破坏 QTreeWidget 中的列排序功能。

这是我将 QString 转换为 QDate 的代码：（*nextitem*是 QStringList）

```
// Convert QString date to QDate to make it sort correctly
                QDate entrydate;
                QString id=nextitem.at(2);

                id=id.remove("/");

                QString datepattern;

                switch(Buffer::date_format){
                case 0: // European
                    datepattern="ddMMyyyy";
                    break;

                case 1: // USA Style
                    datepattern="MMddyyyy";
                    break;

                case 2: // ISO
                    datepattern="yyyyMMdd";
                    break;
                }

                entrydate=QDate::fromString(id,datepattern); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:21:05.417

QDate 遵循操作系统中的当前设置。如果该设置恰好是 MM/DD/YY，那么这就是您将得到的。注意：这是用户想要的。所有应用程序中的统一日期格式。

该设置还受操作系统中当前区域设置的影响。例如，在美国，默认值为 MM/DD/YY，而在大多数欧洲国家，默认值为 DD/MM/YY。

换句话说：别担心。这不是一个错误，这是一个功能。而且您不应该尝试解决它。用户不希望他们的应用程序忽略他们的系统设置。如果我的系统设置为以 MM/DD/YY 显示日期，我当然不希望您的应用程序自行其是并以 YYYY/MM/DD 格式显示日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T12:00:33.297

您可以使用以下代码：

```
QVariant var = item->data(i, Qt::DisplayRole);
if (var.type() == QVariant::DateTime)
{
    QDateTime dt = var.value<QDateTime>();
    QString value = dt.toString("yyyyMMdd");  // Or whatever format you need
}
else
    QString value = item->text(i); 
```

# javascript - Metro 应用程序中“警报”的替代方法是什么？

> ID：13652413
> 
> 赞同：2
> 
> 时间：2012-11-30T20:09:06.600
> 
> 标签：javascript, html, microsoft-metro, winjs

我在 Windows 8 vs 2012 上创建了我的第一个应用程序，它运行良好。但是当我尝试像这样从 JavaScript 中说“helloworld”时：

```
alert("Hello World"); 
```

我收到一个错误：

```
Unhandled exception at line 21,
 column 13 in ms-appx://1af489cf-bac6-419b-8542-fdc18bdd2747/default.html

0x800a1391 - JavaScript runtime error: 'alert' is undefined 
```

如果`alert`已过时，还有什么替代方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T01:06:41.770

你应该使用`Windows.UI.Popups.MessageDialog`：

```
(new Windows.UI.Popups.MessageDialog("Content", "Title")).showAsync().done(); 
```

但是，您应该知道：

*   这**不像**熟悉的警报那样阻塞
*   因为它没有阻塞，您可以尝试向他们显示多个消息框；这是不允许的。

[我在这里](https://stackoverflow.com/questions/13554707/internet-connection-error-message-windows-8-application-with-javascript/13557395#comment18586028_13557395)回答了另一个这样的问题。这是允许您调用警报并在飞行中发送多条消息的代码：

```
(function () {
    var alertsToShow = [];
    var dialogVisible = false;

    function showPendingAlerts() {
        if (dialogVisible || !alertsToShow.length) {
            return;
        }

        dialogVisible = true;
        (new Windows.UI.Popups.MessageDialog(alertsToShow.shift())).showAsync().done(function () {
            dialogVisible = false;
            showPendingAlerts();
        })
    }
    window.alert = function (message) {
        if (window.console && window.console.log) {
            window.console.log(message);
        }

        alertsToShow.push(message);
        showPendingAlerts();
    }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:17:01.837

请记住，这`alert`不是 JavaScript 函数，而是浏览器（主机）函数，因此，它在非浏览器环境中不可用。

[此链接](http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=91ddc993-0a70-40e0-9ca0-5db9eb2f04b3)告诉您执行以下操作

*   用触发事件替换所有警报功能`window.external.notify("message")`；

*   在 webview 中使用 scriptnotify 事件来获取该消息。

*   显示地铁自己的对话框：MessageDialog

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T03:44:04.313

javascript：

```
 (function () {

  window.alert = function (message) {
      window.external.notify( message);
  }
//do some test
alert("a");
alert("b");
alert("c");
window.setInterval(function () {
    alert("e");
    alert("f");
}, 5000);
window.setInterval(function () { 
    alert("d");
    alert("2");
}, 10000);
 })(); 
```

C＃：

```
 //register ScriptNotify event
  webView2.ScriptNotify += webView2_ScriptNotify;

async void webView2_ScriptNotify(object sender, NotifyEventArgs e)
    {
        MSG.Alert(e.Value);
    }

public class MSG
{
    static List<string> messages = new List<string>();

    public static void Alert(string message)
    {

        messages.Add(message);
        if (messages.Count == 1)
        {
              Show(messages.First());
        }

    }

    private static async Task Show(string message)
    {
        MessageDialog md = new MessageDialog(message, "Title");

        md.Commands.Add(
           new UICommand("OK", new UICommandInvokedHandler((cmd) =>
           {
               messages.RemoveAt(0);

           })));

        await md.ShowAsync();

        while (messages.Count > 0)
        {

            await Show(messages.First());
        }

    }

} 
```

# php - php 复选框 id = mysql id

> ID：13652415
> 
> 赞同：0
> 
> 时间：2012-11-30T20:09:31.577
> 
> 标签：php, mysql

我正在处理一个 php/mysql 页面。我的表格显示了我想要的结果，每行前面都有一个复选框，我很难将复选框的 ID/名称标记为我已完成的查询中的行 ID。我已经尝试过查看这个，并且已经看到了几个可能但无法看到代码的示例。任何帮助，将不胜感激。我有这个代码：

```
 for ( $counter = 0; $row = mysql_fetch_row( $result );$counter++ ){

           // build table to display results

           print( "<tr>" ); 

           print("<td> <input type='checkbox' name='$row['id']' value='". $row['id'] ."'> </td>");

           foreach ( $row as $key => $value ) 
              print( "<td>$value</td>" );

           print( "</tr>" );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:22:18.253

有很多事情不对劲。

查看“for”结构。

正确的是：

```
for($conter = 0; $counter < count(mysql_fetch_row( $result ); $counter++)
... 
```

或者你可以使用这个：

```
foreach(mysql_fetch_row($result) as $row){
    echo "<td><input type='checkbox' name='$row['id']' value='$row['id']'></td>";
} 
```

# date - 在 SAS 中无法正确读取日期和时间字符串

> ID：13652422
> 
> 赞同：1
> 
> 时间：2012-11-30T20:09:48.850
> 
> 标签：date, sas, informat

我有以下示例数据要读入 SAS

```
2012-05-0317:36:00NYA
2012-05-0410:29:00SNW
2012-05-2418:45:00NYA
2012-05-2922:24:00NSL
2012-05-3107:26:00DEN
2012-05-2606:10:00PHX
2012-05-0202:30:00FTW
2012-05-0220:45:00HOB
2012-05-0103:01:00HGR
2012-05-0120:30:00RCH
2012-05-1112:00:00NAS 
```

但是，有一个奇怪的问题困扰着我。这是我的第一次尝试。

```
data test;
    informat DT yymmdd10.
        TM $TIME8.
        orig $3.
    ;
    format DT yymmddd10.
        TM TIME8.
        orig $3.
    ;
    input
        @1 DT_temp 
        @11 TM_temp 
        @19 orig 
    ;
    datalines;
2012-05-0317:36:00NYA
2012-05-0410:29:00SNW
2012-05-2418:45:00NYA
2012-05-2922:24:00NSL
2012-05-3107:26:00DEN
2012-05-2606:10:00PHX
2012-05-0202:30:00FTW
2012-05-0220:45:00HOB
2012-05-0103:01:00HGR
2012-05-0120:30:00RCH
2012-05-1112:00:00NAS
run; 
```

结果显示

```
DT TM orig
.   .   NYA
.   .   SNW
.   .   NYA
.   .   NSL
.   .   DEN
.   .   PHX
.   .   FTW
.   .   HOB
.   .   HGR
.   .   RCH
.   .   NAS 
```

这意味着日期和时间读取不正确。我现在的一个解决方法是首先将所有内容读取为字符串，然后分别将其转换为日期和时间。

```
data test;
    informat DT_temp $10.
        TM_temp $8.
        orig $3.
    ;
    format DT yymmddd10.
        TM TIME8.
        orig $3.
    ;
    input
        @1 DT_temp 
        @11 TM_temp 
        @19 orig 
    ;
    DT=input(strip(DT_temp),yymmdd10.);
    TM=input(strip(TM_temp),time8.);

    drop DT_temp TM_temp;
    datalines;
2012-05-0317:36:00NYA
2012-05-0410:29:00SNW
2012-05-2418:45:00NYA
2012-05-2922:24:00NSL
2012-05-3107:26:00DEN
2012-05-2606:10:00PHX
2012-05-0202:30:00FTW
2012-05-0220:45:00HOB
2012-05-0103:01:00HGR
2012-05-0120:30:00RCH
2012-05-1112:00:00NAS
run; 
```

这样，一切都得到了正确的格式。

```
orig DT TM
NYA 2012-05-03  17:36:00
SNW 2012-05-04  10:29:00
NYA 2012-05-24  18:45:00
NSL 2012-05-29  22:24:00
DEN 2012-05-31  7:26:00
PHX 2012-05-26  6:10:00
FTW 2012-05-02  2:30:00
HOB 2012-05-02  20:45:00
HGR 2012-05-01  3:01:00
RCH 2012-05-01  20:30:00
NAS 2012-05-11  12:00:00 
```

基本上，这两种方法使用相同的信息。我想知道为什么第一种方法不起作用。感谢任何形式的帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:48:34.307

您的“第一次尝试”代码有几个错误，但我猜它们是在编写问题时引入的。

因为您使用的是面向列的`input`，所以您需要指定要用于每个变量的格式。这是一个更正的版本：

```
data test;
    informat DT yymmdd10.
        TM TIME8.
        orig $3.
    ;
    format DT yymmddd10.
        TM TIME8.
        orig $3.
    ;
    input
        @1 DT  yymmdd10.
       @11 TM  TIME8.
       @19 orig $3.
    ;
    datalines;
2012-05-0317:36:00NYA
2012-05-0410:29:00SNW
2012-05-2418:45:00NYA
2012-05-2922:24:00NSL
2012-05-3107:26:00DEN
2012-05-2606:10:00PHX
2012-05-0202:30:00FTW
2012-05-0220:45:00HOB
2012-05-0103:01:00HGR
2012-05-0120:30:00RCH
2012-05-1112:00:00NAS
run; 
```

# rest - HBase 和 elasticsearch 集成，如 MongoDB River

> ID：13652424
> 
> 赞同：2
> 
> 时间：2012-11-30T20:09:53.890
> 
> 标签：rest, hbase, elasticsearch

我对 elasticsearch 和 HBase 有点陌生，但对于一个研究项目，我想将两者结合起来。我的研究项目主要涉及搜索大部分文档（doc、pdf、msg 等），并通过在 HBase 中存储的文档上运行的 mapreduce 作业从文档中提取命名实体。

有谁知道是否有类似于 HBase 的 MongoDB River 插件的东西？或者可以指出一些关于集成 ElasticSearch 和 Hbase 的文档？我在互联网上查看了任何文档，但不幸的是没有任何运气。

亲切的问候，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:51:32.903

我不知道任何 elasticsearch hbase 集成，但有一些[Solr](http://lucene.apache.org/solr/)和 HBase 集成可供您使用，例如[Lily](http://www.lilyproject.org/lily/index.html)和[SolBase](https://github.com/Photobucket/Solbase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T01:22:10.820

告诉我您对此[https://github.com/posix4e/Elasticsearch-HBase-River](https://github.com/posix4e/Elasticsearch-HBase-River)的看法。它使用 hbase 日志传送来可靠地处理从 hbase 到弹性搜索集群的更新和删除。它可以很容易地扩展到执行 n 个 regionserver 到 m 个弹性搜索服务器复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T02:01:29.597

您可以使用[phoenix](http://phoenix.apache.org/) jdbc driver + es [jdbc river](https://github.com/jprante/elasticsearch-river-jdbc)如下所示：http: [//lessc0de.github.io/connecting_hbase_to_elasticsearch.html](http://lessc0de.github.io/connecting_hbase_to_elasticsearch.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:39:41.830

我不知道任何打包的解决方案，但只要你的 mapreduce 以正确的方式准备数据，用你选择的编程语言编写一个简单的批处理作业应该相当容易，从 HBase 读取并提交给 ElasticSearch .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-29T12:35:42.033

看看这个页面（3年后）： http: [//lessc0de.github.io/connecting_hbase_to_elasticsearch.html](http://lessc0de.github.io/connecting_hbase_to_elasticsearch.html)

# c++ - Unique_ptr 的 STL 向量 - 如何重置？

> ID：13652432
> 
> 赞同：7
> 
> 时间：2012-11-30T20:10:17.713
> 
> 标签：c++, vector, c++11, std, unique-ptr

我创建了两个unique_ptr的标准向量：

```
std::vector<std::unique_ptr<Student>> students;
std::vector<std::unique_ptr<Teacher>> teachers; 
```

然后，我创建一个新对象并将其放入向量中：

```
students.push_back(std::unique_ptr<Student> (new Student()));
teachers.push_back(std::unique_ptr<Teacher> (new Teacher())); 
```

在我必须做的所有操作之后，我怎样才能删除向量？

Whitout unique_ptr 我不得不做一个循环并删除每个对象：

```
while (!students.empty())
{
    delete students.back();
    students.pop_back();
} 
```

现在有了 unique_ptr 我该怎么办？

我知道我必须使用 unique_ptr::reset （我认为）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T20:12:29.680

这很简单：

```
students.clear(); 
```

这就是智能指针（如`unique_ptr`）的用途——它们负责在适当的时候销毁指向的对象。

# jquery - 使用 jQuery 和 AJAX 交换 Div 内容和 CSS

> ID：13652434
> 
> 赞同：4
> 
> 时间：2012-11-30T20:10:27.760
> 
> 标签：jquery, ajax, html, dynamic

我正在尝试使用 jQuery 和 AJAX 将 div 的内容替换为缩略图 div 的内容。现在我有一个特色部分，它的`h2`,`h3`和`p`标签具有特定的样式，以及它的视频。

`h2`就, `h3`,标签和视频而言，缩略图具有相同的标记，`p`但每个都有自己特定的 css 样式。

我要做的是单击其中一个缩略图，它将特征部分替换为缩略图的信息，然后将特征部分放在缩略图中。

我已经开始了，但我似乎无法在不实际更改下面缩略图的 css 的情况下删除和添加类到特定缩略图。

任何帮助将不胜感激。

我已经用我目前的设置和到目前为止的设置创建了一个 jsfiddle。

[http://jsfiddle.net/drewbietron/YstAQ/](http://jsfiddle.net/drewbietron/YstAQ/)

```
$(document).ready(function(){
   $("#one.promo-item").click(function(e){
       e.preventDefault();
       var content = $(this).html();
       $('.video-container-featured').replaceWith('<div class="video-container-promo" id="one">' +content+ '</div>'),
       $('#one.video-container-promo').addClass('.video-container-featured');
     });
 }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:52:48.163

一般来说，你有比你需要的更多的代码来做你想做的事。想得简单，记住子节点从其父节点继承特异性。

你有这个：

```
<div class="promo-item" id="one">
    <div class="video-container-promo" id="one"><iframe src="#"></iframe></div>
    <h2>title...</h2>
    [...] 
```

如上所述，[您不能有重复的 ids](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)。但即使你可以，嵌套`id="one"`也是完全多余的。您将使用`#one .video-container-promo`. 同样，您可以通过以`#one`. （顺便说一句，数字索引的项目可以在 jQuery 中使用`eq()` [method](http://api.jquery.com/eq/)来访问，不需要弄乱你的标记。）

一旦你清理了你的 html，你的 jQuery 代码基本上可以变成一个单行代码。要将一个 div 的内容替换为单击的 div 的内容，只需执行以下操作：

```
$('.source'​​​​​).click(function(){
    $('#target').children().replaceWith($(this).clone().children());
}); 
```

根据您的示例，目标可能应该是一个 id。唯一的其他考虑因素是确保您所使用的元素层次结构匹配。

这是一个简单的 jsfiddle，展示了它是如何工作的：http: [//jsfiddle.net/joemaller/qxUvp/](http://jsfiddle.net/joemaller/qxUvp/)

# java - Java：向量添加功能很浅吗？

> ID：13652437
> 
> 赞同：3
> 
> 时间：2012-11-30T20:10:33.330
> 
> 标签：java, vector, deep-copy, shallow-copy

使用 add 函数将对象添加到向量中时，是浅拷贝还是深拷贝？如果它很浅，这意味着如果您更改向量中的对象，您会更改对象的原始副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:18:26.503

该向量仅包含指向您添加的对象的指针，它不会创建“深度”副本。（Java 中没有创建任意对象的“深”副本的通用机制，因此库集合很难提供这样的功能！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:19:03.343

它是浅拷贝，实际上它根本不是拷贝，列表具有对同一对象的引用。如果要传递深层副本，请使用实现[Cloneable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html) iface 和方法 clone() 或者您可以使用复制构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:23:05.240

例如，它很浅。

```
Vector<MyObj> victor = new Vector<MyObj>();
MyObj foo = new MyObj();
MyObj bar = new MyObj();
foo.setValue(5);
bar.setValue(6);
victor.add(foo);
victor.add(bar);

foo.setValue(3);
victor.get(1).setValue(7);

// output: 3, even though it went into the vector as 5
System.out.println(victor.get(0).getValue()); 

// output: 7, even though we changed the value of the vector 'object'
System.out.println(bar.getValue()); 
```

# ios - 浏览方法 API 调用与 Foursquare 场地结果不匹配

> ID：13652438
> 
> 赞同：0
> 
> 时间：2012-11-30T20:10:34.030
> 
> 标签：ios, api, foursquare

我的数据中总是有一些额外的场地不是真实的场地，但 Foursquare 的数据没有显示它们。为什么在我的应用程序中使用浏览器方法在 API 中搜索场所会包含一堆不包含在 Foursquare 应用程序中的垃圾数据？

如何调整我的调用以获得与 Foursquare 相同的一组干净（-er）数据？他们是否根据某个确保场地得到验证的参数来限制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:55:59.367

[这](https://developer.foursquare.com/docs/venues/search)是场所/搜索端点的文档。您将看到该`intent`参数用于根据搜索意图过滤结果。Foursquare 应用程序在搜索要签到的场所时使用 intent="checkin"。

您还可以使用[场所/探索](https://developer.foursquare.com/docs/venues/explore)，这是 Foursquare 应用程序用于在探索中推荐场所的端点。

# javascript - 触发 javascript 重定向后图像无法加载

> ID：13652439
> 
> 赞同：1
> 
> 时间：2012-11-30T20:10:34.407
> 
> 标签：javascript, html, firefox

我在 Firefox 中有一个奇怪的问题。我有一个 aspx 页面，它根据表单帖子将用户重定向到特定的 URL。后面的代码模仿了购物车体验，所以我还没有找到完全删除此页面的方法。我遇到的问题是图像显示的图像损坏，即使页面重定向需要一些时间。这只发生在 Firefox 和 Chrome 中。我也不想在重定向之前强制页面延迟，因为我希望用户尽快重定向。有时页面甚至没有显示重定向是如此之快。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="proxy.aspx.cs" 
Inherits="proxy" %>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Walmart Mobile</title>
</head>
<body>
<div><img src="/img/interim-loader.gif" alt="loading" 
width="32" height="32" style="margin-bottom:7px;"/>
<br/>Processing...</div>
<script language="JavaScript">
    if (location.replace) location.replace("<%= redirectURL %>");
    else location = "<%= redirectURL %>";
</script>
</body>
</html> 
```

任何帮助表示赞赏。

谢谢。

更新 - 下面的 img 代码运行良好。

```
<img src="data:image/gif;base64,R0lGODlhIAAgAPMAAP///3Nzc9/f37u7u9bW1sfHx5CQkKKiounp6e/v79nZ2YODg3V1dQAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQACgABACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQACgACACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkEAAoAAwAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkEAAoABAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAAKAAUALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAAKAAYALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQACgAHACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAAKAAgALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAAKAAkALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQACgAKACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkEAAoACwAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA==" alt="loading" width="32" height="32" style="margin-bottom:7px;" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:25:30.197

阅读这个问题，您似乎想在不等待图像加载的情况下显示图像——这是一个难以破解的难题，但并非不可能。

您可以使用[data: uri](http://en.wikipedia.org/wiki/Data_URI_scheme)，这样浏览器就不需要从网络加载任何内容。另请参阅[Ian Hixie 的数据：URI kitchen](http://software.hixie.ch/utilities/cgi/data/data)以获取生成它们的帮助。

否则，您将不得不暂停，至少在浏览器完成加载图像之前。

# regex - scala 完全匹配给定字符串中的单词

> ID：13652447
> 
> 赞同：2
> 
> 时间：2012-11-30T20:10:47.020
> 
> 标签：regex, scala, replace

我正在尝试使用 scala 替换字符串中单词的完全匹配

```
"\\bhello\\b".r.replaceAllIn("hello I am helloclass with hello.method","xxx")

output >> xxx I am helloclass with xxx.method 
```

我想要的是在 helloclass 和 hello.method 中替换单词是否完全是 hello 而不是 hello

```
xxx I am helloclass with hello.method 
```

如果输入字符串是

```
"hello.method in helloclass says hello"
"hello.method says hello from helloclass"
"hello.method in helloclass says Hello and hello" 
```

输出应该是

```
"hello.method in helloclass says xxx"
"hello.method says xxx from helloclass"
"hello.method in helloclass says Hello and xxx" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:30:47.330

这取决于您要如何定义“单词”。如果“单词”是您通过空格字符序列拆分字符串时得到的，那么您可以编写：

```
"(?<=^|\\s)hello(?=\\s|$)".r.replaceAllIn("hello I am helloclass with hello.method","xxx") 
```

where`(?<=^|\\s)`表示“在字符串开头或空格之前”，并`(?=\\s|$)`表示“后跟空格或字符串结尾”。

请注意，这会将（例如）字符串 `Tell my wife hello.`视为包含四个“单词”，其中第四个是`hello.`，*而不是* `hello`。您可以通过以更复杂的方式定义“单词”来解决这个问题，但您需要先定义它。

# python - 删除python中两个html标签之间的所有数据

> ID：13652451
> 
> 赞同：2
> 
> 时间：2012-11-30T20:11:06.607
> 
> 标签：python, html, web-scraping, beautifulsoup

我正在制作一个网络爬虫，我想完全删除一些 div，因为我对数据的分析不需要它们。我正在使用 Beautiful Soup 来解析数据，但我不知道如何完全消除 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:20:35.153

您可以使用以下内容：

```
>>> import bs4
>>> blah = '<div id="test"><p>one</p></div><div id="okay"><p>something</p></div>'
>>> soup = bs4.BeautifulSoup(blah)
>>> soup('div', {'id': 'test'})[0].extract()
<div id="test"><p>one</p></div>
>>> soup
<html><body><div id="okay"><p>something</p></div></body></html> 
```

# java - 将三个使用 1:* 关系的查询合并为一个查询

> ID：13652452
> 
> 赞同：0
> 
> 时间：2012-11-30T20:11:08.863
> 
> 标签：java, sql, oracle, jakarta-ee, jdbc

假设我有四个要读取的表：

**顾客**

```
customer_id,    customer_name
1               Joe Bolggs 
```

**客户订单**

```
customer_id, order_no
----------------------------
1       1
1       2
1       3 
```

**客户地址**

```
customer_id address
----------------------------
1       11 waterfall road
1       23 The broadway 
```

**customer_tel_no**

```
customer_id number
----------------------------
1       523423423432
1       234342342343 
```

上面显示的客户信息（对于 id=1 的客户）将存储在 Java 对象中，如下所示

```
public class Customer{

    String customer_id;
    String customerName;
    ArrayList<String> customerOrders;
    ArrayList<String> customerAddress;
    ArrayList<String> customerTelephoneNumbers;
} 
```

我能想到的获得上述信息的唯一方法是使用三个查询。原因是客户表和其他每个表之间存在 1:* 关系。为了获取数据，我正在做这样的事情：

```
Customer customer = new Customer()

String customerSQL = "Select * from customer where customer_id = ?";
statement = getConnection().prepareStatement(contactsQuery);
statement.setString(1,1);
resultSet = statement.executeQuery(); 

while (resultSet.next()){
    customer.customer_id = resultSet.get(1);    //No getters/setters in this example
    customer.customerName = resultSet.get(2);
}

String customerOrdersSQL = "Select * from customer_orders where customer_id = ?";
statement = getConnection().prepareStatement(customerOrdersSQL); 
statement.setString(1,1);
resultSet = statement.executeQuery(); 

customer.customerOrders = new ArrayList();
while (resultSet.next()){
    customer.customerOrders.add(resultSet.getString(2);  // all the order numbers
}

String customerAddressesSQL = "Select * from customer_addresses where customer_id = ?";
statement = getConnection().prepareStatement(customerAddressesSQL ); 
statement.setString(1,1);
resultSet = statement.executeQuery(); 

customer.customerAddresses = new ArrayList();
while (resultSet.next()){
    customer.customerAddresses.add(resultSet.getString(2);  // all the addresses
}

String customerTelSQL = "Select * from customer_tel_no where customer_id = ?";
statement = getConnection().prepareStatement(customerTelSQL); 
statement.setString(1,1);
resultSet = statement.executeQuery(); 

customer.customerTelephoneNumbers = new ArrayList();
while (resultSet.next()){
    customer.customerTelephoneNumbers.add(resultSet.getString(2);  // all the order numbers
} 
```

上述问题是我正在对数据库进行三个调用。请问有没有办法可以将以上内容合并到一个查询中？

我看不到联接是如何工作的，因为例如，客户和客户订单之间的联接将为客户订单中的每一行返回一个客户行。无论如何我可以将上述三个查询合并为一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:19:46.433

我认为这样的事情会起作用：

```
SELECT c.customer_id, c.customer_name, o.order_no, a.address, t.number
FROM customer c LEFT JOIN customer_orders o ON c.customer_id = o.customer_id
LEFT JOIN customer_addresses a ON c.customer_id = a.customer_id
LEFT JOIN customer_tel_no t ON c.customer_id = t.customer_id
WHERE c.customer_id = ? 
```

然后，在您的代码中，执行查询后：

```
while (resultSet.next())
{
    customer.customerOrders.add(resultSet.getString(3));
    customer.customerAddresses.add(resultSet.getString(4));
    customer.customerTelephoneNumbers.add(resultSet.getString(5));
} 
```

当然，这并没有考虑到您在此过程中会有空值这一事实，因此我建议您检查空值以确保您不会在数组列表中添加大量垃圾。不过，这可能比 3 个单独的查询便宜得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:23:56.410

没有什么可以阻止您将连接的结果迭代和处理到您的客户对象中。如果您的应用程序足够复杂，您可以研究 ORM 框架，它会在幕后为您做到这一点。如果您正在使用 JavaEE，请查看 JPA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:28:44.437

使用此查询并减少调用次数。并且，在数据的while循环过程中。

**选择 customer.customer_id,customer.customer_name,order_no,address,number**

**来自客户、customer_orders、customer_addresses、customer_tel_no**

**其中 customer.customer_id = customer_orders.customer_id AND customer.customer_id = customer_addresses.customer_id AND customer.customer_id = customer_tel_no.customer_id**

# visual-studio - 复制本地不考虑 GAC 中的发布者政策

> ID：13652459
> 
> 赞同：0
> 
> 时间：2012-11-30T20:11:59.120
> 
> 标签：visual-studio

我有一个项目在 myproject\dependencies 中引用了 Oracle.DataAccess.dll 的旧副本。因为我安装了其他 oracle 数据访问组件的不同版本，所以我设置了 copy local = false，依靠 GAC 中的发布者策略来处理重定向到正确版本。在运行时，这工作正常。但是，在编译时，copy local=false 设置被忽略，导致引用的 oracle.dataaccess.dll 被复制到 bin 目录。编译器没有遵循与运行时相同的探测规则是否有原因？有解决办法吗？

# nuget - Microsoft.Activity 未找到

> ID：13652460
> 
> 赞同：0
> 
> 时间：2012-11-30T20:12:00.460
> 
> 标签：nuget

我正在使用 Visual Studio 2012 高级版并安装了 NuGet 包。从包管理器控制台，我发出了 Install-Package 命令来获取 Microsoft.Activities 但我收到以下错误：

```
PM> Install-Package "Microsoft.Activities"
Install-Package : Unable to find package 'Microsoft.Activities'.
At line:1 char:1
+ Install-Package "Microsoft.Activities"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

可能是我做错了什么，错字还是简单的事情？我试图`Get-Package -ListAvailable`在那里查看 Microsoft.Activities ......只是无法将其安装到我的项目中。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:35:37.963

该命令看起来不错。您是否尝试从 Nuget 官方源 ( [http://nuget.org](http://nuget.org) ) 安装？Id Microsoft.Activities 没有包。有 ID 为 Microsoft.Activities.UnitTesting 和 Microsoft.Activities.Extensions 的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:13:39.870

看起来 Microsoft.ACtivities 未列出。 [http://nuget.org/packages/Microsoft.Activities](http://nuget.org/packages/Microsoft.Activities) 您可能想联系所有者以查看替代方案：http: [//nuget.org/packages/Microsoft.Activities/ContactOwners](http://nuget.org/packages/Microsoft.Activities/ContactOwners)

从[http://wf.codeplex.com/wikipage?title=Microsoft.Activities%20Overview](http://wf.codeplex.com/wikipage?title=Microsoft.Activities%20Overview)看起来它可能已更改为 microsoft.activities.extensions，如 bhuvak 上面建议的那样。

# android - 有没有办法注册对特定语音搜索做出反应的意图？

> ID：13652461
> 
> 赞同：1
> 
> 时间：2012-11-30T20:12:05.493
> 
> 标签：android, voice-recognition

基于这个答案： [Android - Intent for custom voice action](https://stackoverflow.com/questions/8185975/android-intent-for-custom-voice-action)

我看到我正在寻找的东西似乎还不存在（尽管如果它现在存在，我很想知道如何使用它）。

任何知情的人（在谷歌）都可以插话这种功能是否正在开发中吗？具体来说，能够以 Intent(ish) 方式注册您的应用程序以绑定到特定的语音关键字，以便当语音识别引擎听到“我的特定关键字”时，它知道向用户提供我的应用程序作为处理其余的语音请求。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:32:40.573

简短的回答：没有人知道。

在未来的 Android 版本中使用 StackOverflow for ETA 有点奇怪。

自 2007 年以来，在正式发布之前没有宣布任何 Android 功能或 API！

所以，你的问题的答案很简单：不，作品中没有关于这些特征的提示，如果是这样，这不属于这里。

# jquery - 如何在自定义插件中引用调用元素

> ID：13652462
> 
> 赞同：0
> 
> 时间：2012-11-30T20:12:10.113
> 
> 标签：jquery, jquery-plugins

我正在创建一个简单的 jQuery 插件，并尝试在我的`shrink()`函数中引用调用元素。我知道如果我不传递元素，那么`this`将引用`window`但有没有办法引用调用 jQuery 插件的元素？如果没有，那么我将如何传递`this`的回调`$(window).on('resize', shrink);`？

```
$(function ($) {
    $.fn.shrinkIt = function (options) {
        var settings = $.extend({
            className: "shortened",
            maxWidth: 800
        }, options);

        var shrink = function (elem) {
            var $this = $(elem);
            var viewerWidth = $('.header').width();
            if (viewerWidth > 800) {
                $this.removeClass(settings.className);
            } else {
                $this.addClass(settings.className);
            }
            $this.css('visibility', 'visible');
        };

        return this.each(function () {
            shrink(this);
            $(window).on('resize', shrink); // how to get 'this' to shrink() function??
        });
    };

    $('.lessonDocumentType').shrinkIt();
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:17:04.070

放入`var $this = $(this);`第一个函数 ( `$.fn.shrinkIt`)。

该函数中的任何内部函数现在都可以引用`$this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:24:30.263

改变你的方法。不要为每个元素定义一个监听器，而是附加一次监听器并管理所有元素：

```
$(function ($) {
    $.fn.shrinkIt = function (options) {
        var settings = $.extend({
            className: "shortened",
            maxWidth: 800
        }, options);

        var $els = $(this);
        $(window).on('resize', shrink);
        function shrink() {
            $els.each(function() {
                var $this = $(this);
                var viewerWidth = $('.header').width();
                if (viewerWidth > 800) {
                    $this.removeClass(settings.className);
                } else {
                    $this.addClass(settings.className);
                }
                $this.css('visibility', 'visible');
            });
        };
        return this;

    };

    $('.lessonDocumentType').shrinkIt();
})(jQuery); 
```

# django - 如何对 python 类进行 django 字段引用？

> ID：13652463
> 
> 赞同：1
> 
> 时间：2012-11-30T20:12:16.973
> 
> 标签：django, python-2.7, django-models, github3.py

我正在做一个项目来扩展我公司使用的测试套件。要求我做的其中一件事是将网站链接到我们的 Github 源代码，以便开发团队可以继续跟踪那里的问题，而不是尝试在两个地方查找。我能够做到这一点，但问题是每次报告错误时都会打开一个问题。

我想向我的 Django 模型添加一个字段，该字段跟踪发送到 Github的[问题对象（来自 github3.py 包装器）。](http://github3py.readthedocs.org/en/latest/issues.html#issue-objects/)我想用它来检查 BugReport 的该实例是否已经在 Github 中创建了问题，如果已经创建，请编辑问题，而不是在 Github 中创建另一个重复的问题。Django 有什么东西可以处理这种引用吗？

我正在使用 Django 1.3.1 和 Python 2.7.1

**编辑**

我能够使用 esauro 的建议解决我的具体问题。然而，正如 mkoistinen 所说，如果这个问题出现在一个解决方法不像这个那么容易的程序中，*是否应该*像我最初询问的那样创建一个对象引用，或者这是一种不好的做法？如果可以进行这样的对象引用，您将如何使用 Django 模型进行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:40:34.633

我是 github3.py 的创建者。

如果您想通过数字本身解决问题，有几种不同的方法可以做到这一点。我不确定你是如何与 API 交互的，但你可以这样做：

```
import github3

i = githbu3.issue('repo_owner', 'repo_name', issue_number) 
```

或者

```
import github3

r = github3.repository('repo_owner', 'repo_name')
i = r.issue(issue_number) 
```

或者

```
import github3

g = github3.login(client_key='client_key', client_secret='client_secret')
i = g.issue('repo_owner', 'repo_name', issue_number)
# or
r = g.repository('repo_owner', 'repo_name')
i = r.issue(issue_number) 
```

否则，如果您在不知道号码的情况下寻找有问题的东西：

```
import github3

r = github3.repository('repo_owner', 'repo_name')
for i in r.iter_issues():
    if 'text to search for' in i.body_text:
        i.edit('...') 
```

# c - 编译原生客户端的 hello_world.c

> ID：13652464
> 
> 赞同：0
> 
> 时间：2012-11-30T20:12:18.620
> 
> 标签：c, google-nativeclient

在pepper_21 示例文件夹中是我正在尝试编译的hello_world.c 文件。这是我正在使用的命令：

```
$NACL_SDK_ROOT/toolchain/linux_x86_newlib/bin/x86_64-nacl-gcc hello_world.c -o a.nexe -lppapi 
```

这是错误：

```
hello_world.c: In function ‘Instance_DidCreate’:
hello_world.c:86: error: ‘TCNAME’ undeclared (first use in this function) 
```

我改编了[这个页面](https://developers.google.com/native-client/devguide/devcycle/building)的命令。怎样才能编译成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:38:11.967

您可以通过检查 Makefile 看到 TCNAME 是在命令行中定义的。

```
x86_64-nacl-gcc hello_world.c -o a.nexe -lppapi -DTCNAME=newlib 
```

或者

```
x86_64-nacl-gcc hello_world.c -o a.nexe -lppapi -DTCNAME=glibc 
```

取决于您使用的工具链版本。

# php - MySQL COUNT 查询结果始终为 1

> ID：13652471
> 
> 赞同：0
> 
> 时间：2012-11-30T20:13:03.060
> 
> 标签：php, mysql, count

我想知道为什么我的 MySQL`COUNT(*)`查询总是导致`->num_rows`是 equal `1`。

```
$result = $db->query("SELECT COUNT( * ) FROM u11_users");
print $result->num_rows; // prints 1 
```

而从数据库中获取“真实数据”工作正常。

```
$result = $db->query("SELECT * FROM u11_users");
print $result->num_rows; // prints the correct number of elements in the table 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:14:18.887

因为`Count(*)`只返回一行行数。

示例：使用`Count(*)`结果类似于以下内容。

```
array('COUNT(*)' => 20);
echo $result['COUNT(*)']; // 20 
```

[**参考**](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:15:36.277

它*应该*返回一行*。要获得计数，您需要：

```
$result = $db->query("SELECT COUNT(*) AS C FROM u11_users");
$row = $result->fetch_assoc();
print $row["C"]; 
```

[* 因为您使用的是聚合函数而不是使用`GROUP BY`]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T20:15:49.440

这就是`COUNT`存在的原因，它总是返回一行，其中包含选定的行数

[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T20:21:12.047

Count() 是一个聚合函数，这意味着它只返回包含实际答案的一行。如果你使用像 max(id); 这样的函数，你会看到相同类型的东西。如果列中的最大值是 142，那么您不会期望看到 142 条记录，而是会看到一条值为 142 的记录。同样，如果行数是 400 并且您要求计数 (*)，您不会得到 400 行，而是单行的答案：400。

因此，要获得计数，您将运行第一个查询，然后访问第一（也是唯一）行中的值。

顺便说一句，您应该使用这种 count(*) 方法，而不是查询所有数据并获取，`$result->num_rows;`因为查询所有行将花费更长的时间，因为您要撤回一堆不需要的数据。

# autohotkey - 自动热键像素搜索，包括鼠标

> ID：13652472
> 
> 赞同：1
> 
> 时间：2012-11-30T20:13:03.267
> 
> 标签：autohotkey

我已经进行了大量的研究，如果我在某个地方的文档或论坛中错过了这个问题的答案，我提前道歉。

我想对几个区域进行像素搜索，并在鼠标移到该区域上时让脚本对该区域做出反应，我的想法是使用自定义光标，其像素阴影在我正在操作的应用程序中找不到，但是Pixelsearch 和 PixelgetColor 似乎都能识别鼠标，是我做错了什么还是错过了什么，或者这根本不可能？

```
Loop  
{
PixelSearch, pxcolor, pxcolor1, 872, 367, 893, 394, 0x5F415F, 3, Fast
sleep, 200
if pxcolor < 0
click left
sleep, 200
} 
```

所以基本上，脚本会不断检查该区域中该阴影的像素，当我的鼠标移到该区域上时（光标是包含像素阴影的部分），脚本会做出反应。

相反，它只看到窗口的像素，而没有注意到我的光标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:43:03.433

尝试这样的事情，可能会做你需要的

```
#Persistent
SetTimer, WatchCursor, 100
return

WatchCursor:
MouseGetPos, xpos, ypos, id, control
if Xpos between 600 and 800 
  {
     if ypos between 400 and 600
       ToolTip, React Here
  }
else if Xpos between 200 and 400 
  {
     if ypos between 100 and 300
      ToolTip, Also React Here
  }
else
    ToolTip
return 
```

希望能帮助到你

# jaxb - 如何配置 JAXB XJC 绑定文件（使用 CXF）以使用 WDSL MTOM 生成 java DataHandler 类型？

> ID：13652473
> 
> 赞同：3
> 
> 时间：2012-11-30T20:13:15.890
> 
> 标签：jaxb, cxf, wsdl2java, xjc

当在 WSDL 中启用 MTOM 时，我必须在 XJC 外部绑定文件中放入什么，以便它从 XSD 类型 base64Binary 生成 DataHandler 类型？

根据 CXF 文档（[在此处输入链接描述](http://cxf.apache.org/docs/mtom-attachments-with-jaxb.html)），可以通过将“xmime:expectedContentTypes="application/octet-stream" 作为属性添加到 base64Binary 类型的 XSD 元素来启用它。然后 XJC 将生成 DataHandler 类型。顺便说一句：我不完全确定这是特定的 XJC 功能还是 CXF wsdl2java 功能。

如何通过外部配置实现同代DataHandler类型？因为WSDL文件不是我的，不能更改。我熟悉 XJC 绑定文件并使用它进行自定义，但不知道如何使用它来指示 MTOM 用法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:50:20.357

以下内容可能会有所帮助：

Apache CXF - 带有 JAXB 的 MTOM 附件 [http://cxf.apache.org/docs/mtom-attachments-with-jaxb.html](http://cxf.apache.org/docs/mtom-attachments-with-jaxb.html)

此外，请参阅此处的第 64-74 页： [http ://www.redbooks.ibm.com/redpapers/pdfs/redp4884.pdf](http://www.redbooks.ibm.com/redpapers/pdfs/redp4884.pdf)

# c# - 从哈希表填充文本框

> ID：13652475
> 
> 赞同：0
> 
> 时间：2012-11-30T20:13:19.703
> 
> 标签：c#, winforms, hashtable

我正在使用 Windows 窗体应用程序创建议程程序，我正在尝试将文件中的数据加载到哈希表中并将这些数据显示到文本框中。文本框上的标签是日期，但这些日期的格式为（`dd MMMM dddd`例如 11 月 30 日星期五），并用作哈希表的键值。文件中的日期格式为 ( `dd MM yyyy`)。显示文件中的数据示例。

10/07/2012 10.30 去游泳 *

30/11/2012 15.30 去游泳 *

当我加载表单时，数据应该显示在相应的文本框中。例如将在 15.30 去游泳 * 必须显示在带有标签“11 月 30 日星期五”的文本框下（因为它对应于日期 30/11/2012）。我能够将数据拆分为键值对，如下面的代码所示：

```
StreamReader sr=new StreamReader("Path/ajand.txt");

   string line;

    while ((line = sr.ReadLine()) != null)
    {
      key = line.Substring(0, 10);//gets date
      value = line.Substring(10);//gets string
      hT.Add(key, value);
    } 
```

如何将数据添加到相应的文本框中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:00:37.277

使用 Convert.toDateTime（参见 msdn： http: [//msdn.microsoft.com/en-us/library/cc165448.aspx](http://msdn.microsoft.com/en-us/library/cc165448.aspx)）将日期转换为您想要的格式。

然后，遍历哈希表中的每个条目

```
foreach(var entry in hashTable)
{
    //todo: convert entry.key (which is the date) to your format
    //      then set the label to the formatted date.
    //      lastly, set the text for the textBox
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:00:35.297

理想情况下，您希望将表单和数据文件中的数据转换为 DateTime 实例并进行比较。但是，鉴于表单中的日期（在标签中）缺少年份部分，最好的办法是将数据文件中的数据转换为 DateTime 对象，然后提取该日期的字符串格式（在与表单数据相同的格式）。此时，字符串比较将允许日期匹配。例如：

```
foreach(DictionaryEntry dataEntry in hT)
{
   //Will throw a FormatException if 'dataEntry.Key' doesn't represent a valid date format
   DateTime keyAsDate = Convert.ToDateTime(dataEntry.Key);

   //This overload of 'ToString' uses CurrentCulture
   string comparisonKey = keyAsDate.ToString("dd MMMM dddd");

   if(formLabel.Text.Equals(comparisonKey, StringComparison.OrdinalIgnoreCase))
   {
       formTextBox.Text = dataEntry.Value;
   }
} 
```

# ios - SWTableView 单元格放置错误

> ID：13652482
> 
> 赞同：0
> 
> 时间：2012-11-30T20:14:05.793
> 
> 标签：ios, cocos2d-iphone, tableview

所以我正在用 cocos2d 编写一些代码，我想用 SWTableView 来做，问题是它如何垂直填充屏幕存在一些非常奇怪的填充错误。

我将尝试使用下面的数字来表示它。4 = 可以放置单元格的位置，4* = 已放置单元格。

可以说我现在的屏幕是

```
1
2
3
4 
```

在我用 3 个项目填充它之后，它看起来像这样

```
1
2*
3*
4* 
```

基本上，我创建表格的方式在左下角有原点，而不是我想要的左上角。我知道 setVerticalFillOrder 可以更改首先填充数据的顺序，但是我已经尝试过 Topdown 和 BottopUp 并且两者都在顶部有那个空间。

以下是我创建表格的方式，因此如果有人有任何想法，将不胜感激

```
 CGSize winSize = [CCDirector sharedDirector].winSize;
    CGSize tableSize = CGSizeMake(table_width, table_height);

    if (_tableView) {
        [_tableView removeFromParentAndCleanup:YES];
        [_tableView release];
    }

    _tableView = [[SWTableView alloc] initWithViewSize:tableSize];
    [_tableView setDirection:SWScrollViewDirectionVertical];
    [_tableView setVerticalFillOrder:SWTableViewFillTopDown];

    [_tableView setDataSource:*my own class*];
    [_tableView setDelegate:*my own class*];

    [_tableView setPosition:CGPointMake(5, winSize.height/2-130)]; //winSize.height/2 - 160

    //refresh table
    [_tableView reloadData];

    [self addChild:_tableView];
    _tableView.isTouchEnabled = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:36:50.920

显然，似乎没有多少人在使用 SWTableView，但我知道这对我来说很头疼，所以我会在这里为将来遇到此类问题的任何人提供一些东西。

我不知道为什么会修复它，但是像这样创建 SWTable

```
_tableView = [SWTableView viewWithDataSource:_friendListViewController size:tableSize]; 
```

这使它以正确的顺序从上到下填充，还请注意，我发现 SWTable 存在更多问题，如果锚点不在 (0,0) 处，表格的实际可视大小会缩小，不知道为什么。要解决此问题，请进入 beforeDraw 并像这样增加缩放比例

```
glScissor(self.position.x, self.position.y, viewSize_.width*3, viewSize_.height*3); 
```

最后在retina display中，位置和大小也被弄乱了，所以只要放一个if语句来检测它的retina display，并根据它做出不同的位置和大小。

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
    ([UIScreen mainScreen].scale == 2.0)) {} 
```

# html - Modern way to repeat consistent sections of web pages

> ID：13652483
> 
> 赞同：1
> 
> 时间：2012-11-30T20:14:17.337
> 
> 标签：html, xhtml

Currently I'm using a dwt file with Expression Web to reproduce menus & footers across many pages. However, I realized that I really don't need Expression Web other than for this feature. I'm currently aware of some other options, but they have drawbacks: 1\. server side includes or PHP includes - but these place constraints on file extensions (want to keep html extension) 2\. ASP.NET master pages - but don't want an ASP.NET site

Is there another option I've missed?

# c# - How do i convert a Brush datatype to Color in c#, WP7?

> ID：13652485
> 
> 赞同：-3
> 
> 时间：2012-11-30T20:14:20.847
> 
> 标签：c#, windows-phone-7

I am currently trying to convert a brush type to color using this code

Color a = (brush1 as SolidColorBrush).Color;

but i am getting a Nulpoint exception.Can anyone help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:16:41.767

如果转换不成功，则运算`as`符返回。`null`所以你的刷子不是一个`SolidColorBrush`或`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:21:28.113

空引用异常很可能是因为强制转换失败。您可以通过尝试直接转换来确认是否是这种情况：

`Color a = ((SolidColorBrush)brush1).Color;`

并查看是否会引发强制转换异常。

# python - Apache：动态解释静态文件

> ID：13652487
> 
> 赞同：1
> 
> 时间：2012-11-30T20:14:30.303
> 
> 标签：python, apache, wsgi

这是一个非常具体的问题，但一个好的答案也可能让我更好地理解 Apache 请求处理。

我有一个 python 脚本来生成一个 HTML 页面。该脚本通过以下 apache 配置项调用：

```
 WSGIScriptAliasMatch ^.*\.mako$ /usr/local/lib/cgi-bin/myscript.py 
```

但我宁愿按照文件常用`.mako`的方式使用文件。`.php`也就是说，对于请求匹配`^.*\.mako$`，仅当服务器上有一个文件时才应调用脚本，如果配置项不存在，则该文件将由 apache 本身提供。而且我还会在 python 脚本中访问该文件。

这有可能吗？我不想使用丑陋的技巧来尝试从请求 URI 中推断出 python 脚本中的文件名（这确实是通过 wsgi 处理的）。

更新：

感谢您提供非常好的解决方案！我想我会发布我的最终设置，因为似乎很多人都在寻找类似灵活的东西。我想要的是一个非常*混合*的环境，即我希望在同一个目录中有静态和动态的内容，以便于编辑。此外，我们必须能够*透明*地访问动态内容作为后备。例如请求`http://someserver/file.html`，但没有物理`/var/www/file.html`文件，然后使用现有的`/var/www/file.html.mako`.

apache.conf：

```
# Disable MultiViews, it will get in your way!

# if resource.html doesn't exist, but resource.html.mako does,
# then use that
RewriteCond ${REQUEST_FILENAME} !-f
RewriteCond ${REQUEST_FILENAME}.mako -f
RewriteRule (.*\.html) $1.mako

# Make .mako files dynamically interpreted by /usr/.../mako-handler.py
AddHandler x-application/mako-template .mako
Action     x-application/mako-template /mako-handler
WSGIScriptAlias /mako-handler /usr/.../mako-handler.py 
```

mako-handler.py：

```
...
physical_template_filepath = environ['PATH_TRANSLATED']
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:37:07.290

尝试使用：

```
AddHandler x-application/mako-template .mako
Action x-application/mako-template /mako-handler
WSGIScriptAlias /mako-handler /usr/local/lib/cgi-bin/myscript.py 
```

顺序是.mako 扩展名将映射到'x-application/mako-template' 的mime 类型。然后将该 mime 类型映射到 URL“/mako-handler”，然后将该 URL 映射到 WSGI 脚本。

# opengl - How to write resize function in opengl given that glMatrixMode is deprecated?

> ID：13652490
> 
> 赞同：0
> 
> 时间：2012-11-30T20:14:40.910
> 
> 标签：opengl, glsl

How to write resize function in opengl given that glMatrixMode is deprecated?

In my old resize function I use glMatrixMode(GL_PROJECTION) and glMatrixMode(GL_MODELVIEW), but now that the fixed pipeline is replaced, I am not sure how the resize function should look like?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:30:36.910

> 在我的旧调整大小函数中，我使用 glMatrixMode(GL_PROJECTION) 和 glMatrixMode(GL_MODELVIEW)

你一开始就不应该这样做。

> 现在固定管道已被替换，我不确定调整大小功能应该是什么样子？

就像它应该与固定功能管道一样：设置一些反映新窗口大小的变量并触发重绘。*不要在事件处理程序中调用任何 OpenGL 函数！*

在显示功能中，给定窗口的大小，您可以确定视口的范围并从中派生投影矩阵。固定函数 OpenGL 为您提供函数 glOrtho 和 glFrustum（GLU 在其上构建了 gluOrtho2D 和 gluPerspective）。*现在，您不必弄乱矩阵状态，而是在您*管理的矩阵变量中构建所需的矩阵（并且您可以保留它，而不必每次新的显示迭代都从头开始重建它）。您使用 glUniformMatrix 传递给 OpenGL 的矩阵变量。

# bash - Using egrep to search for IP address by octets from a shell variable

> ID：13652491
> 
> 赞同：1
> 
> 时间：2012-11-30T20:14:43.670
> 
> 标签：bash, scripting, ip-address, iptables, grep

I'm writing a BASH script that outputs `iptables -L -n` and searches for the existence of an IP address. I'm stuck with how to use this with *egrep*. Roughly:

```
CHECK=$(iptables -L -n | egrep $the_string) 
```

which "looks" like it would work, but it doesn't have an end delimiter `$` so it would match:

`25.24.244` and `25.24.24`

When I really just need to match for `25.24.24` only.

I tried escaping this but the `$` creates issues with the regular expression.

At least this is the only means I've found to search for the IP in the *iptables* system. It doesn't appear to have any query mechanism itself (puzzling).

I am probably missing something very simple here, and just need a pointer or two :-)

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:16:31.627

You should *backslash* the `.` : this means *any character* in regex...

```
iptables -L -n | grep "25\.24\.24$" 
```

(no need `egrep` there)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:20:40.363

正则表达式的`$`末尾按预期工作：

```
the_ip=25.24.24
the_string=$(echo $the_ip | sed 's/\./\\\./g')
iptables -L -n | egrep "$the_string$" 
```

# python - Dictionary multiple in Python

> ID：13652493
> 
> 赞同：0
> 
> 时间：2012-11-30T20:15:00.850
> 
> 标签：python, dictionary

I have a multidictionary:

```
{'a': {'b': {'c': {'d': '2'}}},
 'b': {'b': {'c': {'d': '7'}}},
 'c': {'b': {'c': {'d': '3'}}},
 'f': {'d': {'c': {'d': '1'}}}} 
```

How can I sort it based on the values `'2' '3' '7' '1'` so my output will be:

```
f.d.c.d.1
a.b.c.d.2
c.b.c.d.3
b.b.c.d.7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:44:10.640

You've got a fixed-shape structure, which is pretty simple to sort:

```
>>> d = {'a': {'b': {'c': {'d': '2'}}}, 'c': {'b': {'c': {'d': '3'}}}, 'b': {'b': {'c': {'d': '7'}}}, 'f': {'d': {'c': {'d': '1'}}}}
>>> sorted(d, key=lambda x: d[x].values()[0].values()[0].values()[0])
['f', 'a', 'c', 'b']
>>> sorted(d.items(), key=lambda x: x[1].values()[0].values()[0].values()[0])
[('f', {'d': {'c': {'d': '1'}}}),
 ('a', {'b': {'c': {'d': '2'}}}),
 ('c', {'b': {'c': {'d': '3'}}}),
 ('b', {'b': {'c': {'d': '7'}}})] 
```

Yes, this is a bit ugly and clumsy, but only because your structure is inherently ugly and clumsy.

In fact, other than the fact that `d['f']` has a key `'d'` instead of `'b'`, it's even more straightforward. I suspect that may be a typo, in which case things are even easier:

```
>>> d = {'a': {'b': {'c': {'d': '2'}}}, 'c': {'b': {'c': {'d': '3'}}}, 'b': {'b': {'c': {'d': '7'}}}, 'f': {'b': {'c': {'d': '1'}}}}
>>> sorted(d.items(), key=lambda x:x[1]['b']['c']['d'])
[('f', {'b': {'c': {'d': '1'}}}),
 ('a', {'b': {'c': {'d': '2'}}}),
 ('c', {'b': {'c': {'d': '3'}}}),
 ('b', {'b': {'c': {'d': '7'}}})] 
```

As others have pointed out, this is almost certainly not the right data structure for whatever it is you're trying to do. But, if it is, this is how to deal with it.

PS, it's confusing to call this a "multidictionary". That term usually means "dictionary with potentially multiple values per key" (a concept which in Python you'd probably implement as a `defaultdict` with `list` or `set` as its default). A single, single-valued dictionary that happens to contain dictionaries is better named a "nested dictionary".

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:49:32.833

在我看来，这种设计很难阅读和维护。您可以考虑用字符串名称替换内部字典吗？

例如：

```
mydict = {
    'a.b.c.d' : 2,
    'b.b.c.d' : 7,
    'c.b.c.d' : 3,
    'f.d.c.d' : 1,
} 
```

这一个更容易排序并且更具可读性。

现在，字典由于其性质而无法分类。因此，您必须对它的例如列表表示进行排序：

```
my_sorted_dict_as_list = sorted(mydict.items(), 
                                key=lambda kv_pair: kv_pair[1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:22:58.360

你可以递归地做到这一点：

```
d = {'a': {'b': {'c': {'d': '2'}}}, 'c': {'b': {'c': {'d': '3'}}}, 'b': {'b': {'c': {'d': '7'}}}, 'f': {'d': {'c': {'d': '1'}}}}

def nested_to_string(item):

    if hasattr(item, 'items'):
        out = ''
        for key in item.keys():
            out += '%s.' % key + nested_to_string(item[key])
        return out
    else:
        return item + '\n'

print nested_to_string(d) 
```

或者

```
def nested_to_string(item):
    def rec_fun(item, temp, res):
        if hasattr(item, 'items'):
            for key in item.keys():
                temp += '%s.' % key
                rec_fun(item[key], temp, res)
                temp = ''
        else:
            res.append(temp + item)

    res = []
    rec_fun(d, '', res)
    return res 
```

你为什么要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:49:12.277

你的数据结构基本上是一个多级树，所以做你想做的一个好方法是做所谓的深度优先遍历它，可以递归完成，然后稍微按摩中间结果进行排序并将它们格式化为所需的格式。

```
multidict = {'a': {'b': {'c': {'d': '2'}}},
             'b': {'b': {'c': {'d': '7'}}},
             'c': {'b': {'c': {'d': '3'}}},
             'f': {'d': {'c': {'d': '1'}}}}

def nested_dict_to_string(nested_dict):
    chains = []
    for key,value in nested_dict.items():
        chains.append([key] + visit(value))
    chains = ['.'.join(chain) for chain in sorted(chains, key=lambda chain: chain[-1])]
    return '\n'.join(chains)

def visit(node):
    result = []
    try:
        for key,value in node.items():
            result += [key] + visit(value)
    except AttributeError:
        result = [node]
    return result

print nested_dict_to_string(multidict) 
```

输出：

```
f.d.c.d.1
a.b.c.d.2
c.b.c.d.3
b.b.c.d.7 
```

# c# - Display the LINQ result into Data Grid View

> ID：13652496
> 
> 赞同：0
> 
> 时间：2012-11-30T20:15:07.453
> 
> 标签：c#, sql, winforms, list, datagridview

I got error out of memory when i try to display the linQ result on data grid view Is there a limit of rows for Data Grid View ? I want to dispaly 41299440

This is the error message

```
A first chance exception of type 'System.OutOfMemoryException'
occurred in System.Drawing.dll 
```

this is the linQ code

```
var sets =
    from a in patient
    from b in patient
    from c in patient
    from d in patient
    from l in patient
    where a.VisitNum < b.VisitNum 
          && b.VisitNum < c.VisitNum 
          && c.VisitNum < d.VisitNum 
          && d.VisitNum < l.VisitNum

    select new { a, b, c, d, l }; 
```

and this how i display the result

```
object[] buffer = new object[5];
List<DataGridViewRow> rows = new List<DataGridViewRow>();
foreach (var custObj in sets)
{
    buffer[0] = custObj.a.VisitNum;
    buffer[1] = custObj.a.ID;
    buffer[2] = patientname;
    buffer[3] = custObj.a.date;
    buffer[4] = description(Convert.ToInt32(custObj.a.RaId));
    rows.Add(new DataGridViewRow());
    rows[rows.Count - 1].CreateCells(dataGridView1, buffer);

    buffer[0] = custObj.b.VisitNum;
    buffer[1] = custObj.b.ID;
    buffer[2] = patientname;
    buffer[3] = custObj.b.date;
    buffer[4] = description(Convert.ToInt32(custObj.b.RaId));
    rows.Add(new DataGridViewRow());
    rows[rows.Count - 1].CreateCells(dataGridView1, buffer);

    buffer[0] = custObj.c.VisitNum;
    buffer[1] = custObj.c.ID;
    buffer[2] = patientname;
    buffer[3] = custObj.c.date;
    buffer[4] = description(Convert.ToInt32(custObj.c.RaId));
    rows.Add(new DataGridViewRow());
    rows[rows.Count - 1].CreateCells(dataGridView1, buffer);

    buffer[0] = custObj.d.VisitNum;
    buffer[1] = custObj.d.ID;
    buffer[2] = patientname;
    buffer[3] = custObj.d.date;
    buffer[4] = description(Convert.ToInt32(custObj.d.RaId));
    rows.Add(new DataGridViewRow());
    rows[rows.Count - 1].CreateCells(dataGridView1, buffer);

    buffer[0] = custObj.l.VisitNum;
    buffer[1] = custObj.l.ID;
    buffer[2] = patientname;
    buffer[3] = custObj.l.date;
    buffer[4] = description(Convert.ToInt32(custObj.l.RaId));
    rows.Add(new DataGridViewRow());
    rows[rows.Count - 1].CreateCells(dataGridView1, buffer);
    rows.Add(new DataGridViewRow());                           
}
dataGridView1.Rows.AddRange(rows.ToArray()); 
```

any suggestions?

# objective-c - What does the const specifier do, before a pointer to object?

> ID：13652508
> 
> 赞同：2
> 
> 时间：2012-11-30T20:16:00.153
> 
> 标签：objective-c, constants, cllocation

If I have a C-string like this:

```
const char* str= "hello"; 
```

I know well that I can't change any character of the string because the pointer is const.
But if I have this:

```
- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location 
```

I can still mutate the object state using it's methods.
If the pointer is to a NSMutableString, I'm still able to mutate it.
Then what does the const stand for?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:23:31.713

注意区别：

```
// constant pointer
char * const str = "";

// pointer to constant (two equivalent ways)
const char * str = "";
char const * str = ""; 
```

关键字 const 适用于紧靠其左侧的任何内容。如果它的左边没有任何东西，它适用于它右边的任何东西。

在 Objective-C 中，所有方法参数总是按值传递。这包括原语、结构、联合和指针，以及任何其他组成的类型。

请注意，您不能拥有 object 类型的变量。像这样的表达式`NSObject o;`会产生编译器错误，并显示消息“无法静态分配接口类型”。

传递对象的唯一方法是传递指针。指针作为值传递，但让方法内的代码引用对象并更改它。所以在某种程度上，就*好像*你通过引用传递对象（实际上你是通过值传递指针）。

在编译 Objective-C 程序时，方法被转换为 C 函数，并且每个“消息发送”（也称为“方法调用”，虽然并不完全相同）都使用运行时函数运行`objc_sendMsg`。这个函数不知道也不关心你是否对对象进行了限定`const`。如果您想要一个不可变对象，则必须在对象内部编写该不可变性代码。例子：

```
// const qualifying an object is ignored whether in variables or method arguments:
const NSMutableArray *array = [NSMutableArray new];   // const is ignored
-(void)someMethod:(const NSMutableArray *)array { ... // const is ignored

// calling the methods that mutate the object works fine
[array removeAllObjects]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:30:52.753

在该方法声明中，`location`是一个指向常量的指针`CLLocation`。`location`但是当您向对象发送消息时，`const`不会保留 -ness；处理消息的方法被`self`视为非`const`对象。（请注意，这与 C++ 不同，后者支持`const`成员函数，其中`this`是指向常量对象的指针。）

所以`const`那个声明中的 并不是特别有用。也许它是由习惯于 C++ 做事方式的人编写的。

当您`const`在 Objective-C 中看到附加到对象指针时，通常是这样的：

```
extern NSString * const SomeConstantString; 
```

这声明`SomeConstantString`为指向某个非常量对象（在本例中为 an `NSString`）的常量指针。指针本身是常量，因此您的程序不能更改`SomeConstantString`为指向其他`NSString`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:31:18.190

> 我很清楚我不能更改字符串的任何字符，因为指针是 const。

不，指针是可变的。它指向的字符是 const。

> 我仍然可以使用它的方法改变对象状态。

Objective-C 对象没有像 C++ 中那样的 const 正确性。编译器不关心您发送到 const 对象的消息（变异与否）。所以声明一个指向 const 对象的指针是没有意义的。引用的框架方法是异常的，可能是疏忽。

# php - Is there an unofficial API for creating Twitter applications/api keys?

> ID：13652514
> 
> 赞同：0
> 
> 时间：2012-11-30T20:16:18.507
> 
> 标签：php, python, twitter, twitter-oauth

I need a way to programmatically create Twitter Applications/API keys. I could make something on my own, but does anyone know of a pre-made solution?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:35:01.753

假设您指的是消费者密钥和消费者秘密，您不应该能够以编程方式创建它们。这就是为什么您必须使用 CAPTCHA 登录网页才能创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:34:02.730

不知道你的意思，但有很多库抽象 twitter API (https://dev.twitter.com/docs/twitter-libraries)

# jquery - jQuery tabs navigation for multiple server generated elements

> ID：13652516
> 
> 赞同：0
> 
> 时间：2012-11-30T20:16:25.487
> 
> 标签：jquery, tabs, code-reuse

This is a great script that will work for several different instances of tabs on a page:

```
 jQuery('.tab_container').each(function(){

    var select = jQuery(this);
select.find('.detail').hide(); 
select.find('.detail:first').show(); 
select.find('div.tab_nav a:first').addClass('current_tab'); 

    select.find('div.tab_nav a').click(function(){ 
    var currentTab = select.find(jQuery(this).attr('href')); 
    select.find('div.tab_nav a').removeClass('current_tab');
    jQuery(this).addClass('current_tab'); 
    select.find('div.tab_nav a').addClass('other_tab');
    jQuery(this).removeClass('other_tab'); 
    select.find('.detail').hide(); 
    jQuery(currentTab).show(); 
    return false;
    });//link action  

});//each 
```

now for the html:

```
 div class="tab_nav">

  <a href=".tab1" class="current_tab">Properties</a>

<a href=".tab2" class="other_tab" >Detail</a>
</div>

<div class="detail tab1">

 <div class="datarow">
   content 1
  </div>

 <div class="detail tab2">

   <div class="datarow">
 content 2
  </div> 
```

Warning:this works great when you have <50 elements that load otherwise all that looping WILL give you errors and grief.

so the solution we tried that works runs like this:

```
 <a href=".tab1" class="current_tab" onclick="showInfo('click', this, '${element.id}','${element.id.id}', 'list');jQuery(this).siblings().removeClass('current_tab'); jQuery(this).addClass('current_tab');jQuery(this).siblings().addClass('other_tab');jQuery(this).removeClass('other_tab');jQuery(this).parent().siblings('.tab1').show();jQuery(this).parent().siblings('.tab2').hide(); return false;">Properties</a>
          <%-- --%>
          <a href=".tab2" class="other_tab"
                 onclick="showInfo('click', this, '${element.id}','${element.id.id}', 'list');jQuery(this).siblings().removeClass('current_tab'); jQuery(this).addClass('current_tab');jQuery(this).siblings().addClass('other_tab');jQuery(this).removeClass('other_tab');jQuery(this).parent().siblings('.tab2').show();jQuery(this).parent().siblings('.tab1').hide(); return false;">Detail</a>
   </div> 
```

Ugly, but it works.

I want to clean this up so I tried making these functions and they don't work:

```
 <script>

  function showTabOne(){
  jQuery(this).siblings().removeClass('current_tab');
   jQuery(this).addClass('current_tab');
  jQuery(this).siblings().addClass('other_tab');
  jQuery(this).removeClass('other_tab');
  jQuery(this).parent().siblings('.tab1').show();
  jQuery(this).parent().siblings('.tab2').hide();     
  }
 function showTabTwo(){
  jQuery(this).siblings().removeClass('current_tab');
  jQuery(this).addClass('current_tab');
  jQuery(this).siblings().addClass('other_tab');
  jQuery(this).removeClass('other_tab');
  jQuery(this).parent().siblings('.tab2').show();
  jQuery(this).parent().siblings('.tab1').hide();
  return false;
  } 
```

Any ideas?

# geometry - Efficiently find points inside a circle sector

> ID：13652518
> 
> 赞同：31
> 
> 时间：2012-11-30T20:16:36.020
> 
> 标签：geometry, intersection

I have a set of 2d points distributed randomly. I need to perform a time intensive operation on a small subset of these points but I need to first figure out what points I need to perform this time intensive operation on. To determine what points I need they must pass a series of geometric criteria.

The most basic criteria is are they within a certain distance of a specific point. The second most basic criteria is whether they are contained within a circle sector (a 2-D cone) extending out from that specific point. (Edit: This operation is called regularly with a different specific point each time but the same set of 2d points.)

My initial thought was to create a grid containing the 2d points, then iterate along the cone grabbing grid squares that it intersects. Depending on the size of the grid it would filter out the vast majority of unneeded 2d points. Unfortunately the embedded system I'm running on is severely memory constrained so a large (by our standards not anyone elses) 2d array would be too memory intensive.

I have been trying to investigate using KD trees to speed up the calculation but I haven't been able to find an algorithm relating circle sectors and kd-trees.

Is there an efficient algorithm for finding what 2d points lie within a circle sector?

Just a note our particular system is slow at both floating point math and trigonometry so a solution that involves less of those is superior one that requires a lot of it.

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-12-03T01:02:33.467

可以检查一个点是否在一个扇区内，只有整数算术和加法、减法和乘法的基本运算。

要使一个点在[圆形扇区](http://en.wikipedia.org/wiki/Circular_sector)内，它必须满足以下测试：

1.  它必须从扇区的起始“臂”逆时针定位。
2.  它必须从扇区的末端臂顺时针定位。
3.  它必须比扇区的半径更接近圆心。

    ![一个点要在 a 内，它必须满足以下测试](../Images/2dff87208a979d568ff9ef98b12d0423.png) ![它必须从一开始就逆时针定位](../Images/3541db4b8d96404ce14addc6ce4bbeb4.png) ![它必须从扇区的末端臂顺时针定位](../Images/981a878ea468d2feb9d35762e4d20c14.png) ![它必须比扇区的半径更接近圆心](../Images/8442f2df6a10adb525d1c118eaf83b8d.png)

## 顺时针测试

要测试向量 v2 是否顺时针指向另一个向量 v1，请执行以下操作：

1.  求 v1 的逆时针[法向量](http://en.wikipedia.org/wiki/Normal_%28geometry%29)。法线向量与原始向量成 90 度角。这很[简单](https://stackoverflow.com/questions/1243614/how-do-i-calculate-the-normal-vector-of-a-line-segment)：如果`v1=(x1,y1)`，则逆时针法线为`n1=(-y1,x1)`。

2.  求 v2 在法线上的投影大小。这可以通过计算v2 和法线的[点积来完成。](http://en.wikipedia.org/wiki/Dot_product)

    `projection = v2.x*n1.x + v2.y*n1.y`

3.  如果投影是正数，则 v2 与 v1 逆时针定位。否则，v2 对 v1 顺时针方向。

这是一个逆时针的例子： ![逆时针示例](../Images/bd573a73bcad3996774a58af0c0cf351.png)

还有一个顺时针的例子： ![顺时针示例](../Images/0459c09ebcb60ed1ed420d45c78b49c4.png)

步骤可以组合：

```
function areClockwise(v1, v2) {
  return -v1.x*v2.y + v1.y*v2.x > 0;
} 
```

## 半径测试

半径测试很简单。只需检查点到圆心的距离是否小于所需的半径。为了避免计算平方根，我们可以将距离的平方与半径的平方进行比较。

```
function isWithinRadius(v, radiusSquared) {
  return v.x*v.x + v.y*v.y <= radiusSquared;
} 
```

## 把它放在一起

完整的扇区测试如下所示：

```
function isInsideSector(point, center, sectorStart, sectorEnd, radiusSquared) {
  var relPoint = {
    x: point.x - center.x,
    y: point.y - center.y
  };

  return !areClockwise(sectorStart, relPoint) &&
         areClockwise(sectorEnd, relPoint) &&
         isWithinRadius(relPoint, radiusSquared);
} 
```

以下示例页面通过数千个点演示了这一点。您可以在以下位置试验代码：http: [//jsbin.com/oriyes/8/edit](http://jsbin.com/oriyes/8/edit)。

![截屏](../Images/f50aebe3ae326e85ca271dd034f9897a.png)

## 示例源代码

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <style>
      .canvas {
        position: absolute;
        background: #f4f4f4;
        border: 8px solid #f4f4f4;
        width: 400px;
        height: 400px;
      }

      .dot {
        position: absolute;
        font: 16px Arial;
      }
      .out { color: #ddd; }
      .in { color: #00dd44; }
    </style>
    <script>
      function isInsideSector(point, center, sectorStart, sectorEnd, radiusSquared) {
        var relPoint = {
          x: point.x - center.x,
          y: point.y - center.y
        };

        return !areClockwise(sectorStart, relPoint) &&
               areClockwise(sectorEnd, relPoint) &&
               isWithinRadius(relPoint, radiusSquared);
      }

      function areClockwise(v1, v2) {
        return -v1.x*v2.y + v1.y*v2.x > 0;
      }

      function isWithinRadius(v, radiusSquared) {
        return v.x*v.x + v.y*v.y <= radiusSquared;
      }

      $(function() {
        var $canvas = $("#canvas");
        var canvasSize = 400;
        var count = 4000;

        // define the sector
        var center = { x: canvasSize / 2, y: canvasSize / 2 };
        var sectorStart = { x: 4, y: 1 };
        var sectorEnd = { x: 1, y: 4 };
        var radiusSquared = canvasSize * canvasSize / 4;

        // create, draw and test a number of random points
        for (var i = 0; i < count; ++i) {

          // generate a random point
          var point = {
            x: Math.random() * canvasSize,
            y: Math.random() * canvasSize
          };

          // test if the point is inside the sector
          var isInside = isInsideSector(point, center, sectorStart, sectorEnd, radiusSquared);

          // draw the point
          var $point = $("<div class='dot'></div>")
              .css({
                left: point.x - 3,
                top:  canvasSize - point.y - 8 })
              .html("&#8226;")
              .addClass(isInside ? "in" : "out")
              .appendTo($canvas);
        }
      });
    </script>
  </head>
  <body>
    <div id="canvas" class="canvas"></div>
  </body>
</html> 
```

## 注释、警告和限制

1.  您必须根据向量指定扇区的边界。例如，上面的屏幕截图显示了在 (4,1) 和 (1,4) 的向量之间拉伸的扇区。

2.  如果您的扇区是用其他术语指定的，例如角度，您必须首先将其转换为矢量，例如使用`tan()`函数。幸运的是，您只需执行一次。

3.  这里的逻辑适用于内角小于 180 度的扇区。如果您的扇区可以跨越更大的角度，则必须对其进行修改。

4.  此外，代码假设您知道扇区的哪个边界向量是“开始”，哪个是“结束”。如果你不这样做，你可以`areClockwise()`在他们身上运行以找出答案。

5.  请注意，虽然所有这些都可以通过整数运算完成，但半径和顺时针测试都使用更大范围的数字，因为 x 和 y 平方并将它们相乘。确保使用足够位的整数来保存结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T20:21:04.887

我知道您不想要三角函数，但是您可以将每个点（在您的子集中）转换为其极坐标（原点是您的特定点）和阈值`r,theta`在哪里`r < R`并`T1 < theta < T2`对应于扇区。这当然是内存效率！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-27T20:32:27.000

@Oren Trutner 的回答很棒，所以我决定制作一个视觉示例并进行一些改进以使其适用于所有角度。

不多说，看下面的例子。

```
$(document).on('keypress',function (e) {
        if(e.which === 13)
        {
            $("#calc").click();
        }
    });

    function areClockwise(v1, v2) {
        return -v1.x*v2.y + v1.y*v2.x > 0;
    }

    function vector(x = 0, y = 0) {
        return {x:x,y:y}
    }

    function degToRad(degree) {
        return degree * Math.PI / 180;
    }

    function isIn()
    {
        let illustration = $("#illustration");
        illustration.html("");
        let r = 250;
        let fieldOfViewAngle = 150;
        let x = Number($("#x").val());
        let y = Number($("#y").val());
        let startAngle = Number($("#startAngle").val());
        let startSectorAngle = degToRad(startAngle);
        let endSectorAngle = degToRad(startAngle+fieldOfViewAngle);

        $("#startLine").attr("x2",250 + r*Math.cos(-startSectorAngle)).attr("y2",250 + r*Math.sin(-startSectorAngle));
        $("#endLine").attr("x2",250 + r*Math.cos(-endSectorAngle)).attr("y2",250 + r*Math.sin(-endSectorAngle));
        $("#point").attr("cx",250 +x).attr("cy",250 -y);

        let sectorStartVector = vector(r * Math.cos(startSectorAngle),r * Math.sin(startSectorAngle));
        let sectorEndVector = vector(r * Math.cos(endSectorAngle),r * Math.sin(endSectorAngle));
        let relPoint = vector(x,y);

        if(!this.areClockwise(sectorStartVector, relPoint) &&
            this.areClockwise(sectorEndVector, relPoint))
            $("#result").html("Result: in");
        else{
            $("#result").html("Result: out")
        }
    }
```

```
.flixy {
            display: flex;
            flex-direction: column;
        }

        .flixy > div {
            margin-bottom: 20px;
            width:300px
        }

        .flixy > div > input {
            float: right;
        }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="result"></div>
<div class="flixy">
    <div class="input-group">
        <label>X</label>
        <input id="x">
    </div>
    <div class="input-group">
        <label>Y</label>
        <input id="y">
    </div>

    <div class="input-group">
        <label>Start angle</label>
        <input id="startAngle">
    </div>

    <div class="input-group">
        <label>Radius</label>
        <input value="250" disabled>
    </div>

    <div class="input-group">
        <label>Theta</label>
        <input value="150" disabled>
    </div>
</div>

<button onclick="isIn()" id="calc">calc</button>

<div style="width: 500px;height: 500px; overflow: visible">
    <svg width="500" height="500" style="overflow: visible">
        <circle cx="250" cy="250" r="250" stroke="black" stroke-width="3" fill="yellow"></circle>
        <line id="startLine" x1="250" y1="250" x2="500" y2="250" style="stroke:#2fa360;stroke-width:2" />
        <line id="endLine" x1="250" y1="250" x2="500" y2="250" style="stroke:#1d68a7;stroke-width:2" />
        <circle id="point" cx="250" cy="250" r="5" fill="red"></circle>
    </svg>
</div>
```

# javascript - Controlling order of javascript execution PayPal Objects

> ID：13652519
> 
> 赞同：0
> 
> 时间：2012-11-30T20:16:40.480
> 
> 标签：javascript, execution, queuing

I have a wordpress page. I have a number of links which go to PayPalObjects. PayPalObjects requires that you put code in the footer of the page with triggers to IDs for the elements which trigger a purchase. eg...

```
<a id="buysong_4" target="PPDGFrame" title="Click here to buy this  song now.">$</a> 
```

...and then in the footer of the page:

```
<script type="text/javascript">
var embeddedPPFlow1 = new PAYPAL.apps.DGFlow( {trigger : 'buysong_1'});

function MyEmbeddedFlow(embeddedFlow) {
    this.embeddedPPObj = embeddedFlow;
    this.paymentSuccess = function() {
        this.embeddedPPObj.closeFlow();
        window.location.href = "http://whatever.com/success/";
    };
    this.paymentCanceled = function() {
        this.embeddedPPObj.closeFlow();
        top.location.href = "http://whatever.com/fail/";

    };

}
var myEmbeddedPaymentFlow1 = new MyEmbeddedFlow(embeddedPPFlow1);
</script> 
```

Now, since I have dozens of such links, I wanted to avoid hard coding these ids into the content. eg...

```
<a class="buysong" target="PPDGFrame" title="Click here to buy this song now.">$</a> 
```

So I added the following jQuery:

```
jQuery('.buysong').each(function(index, element) {
        jQuery(this).attr('id', 'buysong_' + (index+1) );
   }); 
```

The rendered page correctly adds the ID attribute to each link, BUT the PayPal js does not trigger properly. IOW: I have to 'hardcode' the ids into the page. This makes me think that the jQuery is firing -after- the PayPal script.

So... how do I 'tell' the PayPalObjects script to only execute -after- the jQuery has assigned the IDs? OR... even if I accomplished that, would it -still- not work because assigning the ID attr. dynamically isn't reliable for what I want to do?

TIA,

---JC

# security - 如何避免在 glassfish-web.xml 文件中添加主体？

> ID：13652521
> 
> 赞同：0
> 
> 时间：2012-11-30T20:16:47.453
> 
> 标签：security, jakarta-ee, web-applications, glassfish, jaas

我有一个使用 jdbcRealm 进行身份验证/授权的小型 Web 应用程序。仅当我将用户名放入 glassfish-web.xml 时，授权才有效

```
<glassfish-web-app error-url="">
    <class-loader delegate="true"/>
    <jsp-config>
        <property name="keepgenerated" value="true">
            <description>Keep a copy of the generated servlet class' java code.</description>
        </property>
    </jsp-config>
    <security-role-mapping>
        <role-name>connexion</role-name>
        <principal-name>test</principal-name>
        <group-name>connexion</group-name>
    </security-role-mapping>
</glassfish-web-app> 
```

web.xml

```
<!--other stuff-->
     <security-constraint>
            <web-resource-collection>
                <web-resource-name>secure</web-resource-name>
                <url-pattern>/Downloader</url-pattern>
                <url-pattern>/start.html</url-pattern>  
            </web-resource-collection>
            <auth-constraint>
                <role-name>connexion</role-name>
            </auth-constraint>
            <user-data-constraint>
                <transport-guarantee>CONFIDENTIAL</transport-guarantee>
            </user-data-constraint>
        </security-constraint>
        <login-config>
            <auth-method>FORM</auth-method>
            <realm-name>my_realm</realm-name>
            <form-login-config>
                <form-login-page>/login.html</form-login-page>
                <form-error-page>/error.html</form-error-page>
            </form-login-config>
        </login-config>

        <security-role>

            <role-name>connexion</role-name>
        </security-role>
<!--other stuff--> 
```

如果我从 glassfish-web 中删除主体，我会收到 403 error access denied 。是否有任何解决方案可以避免在 xml 文件中添加主体？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:11:11.520

就在这里。在您的安全领域（来自 web.xml 的内容`my_realm`）中，将您登录的用户名与适当的组相关联 - 在您的情况下是`connexion`. 换句话说，属于该组的每个用户`connexion`都可以访问受保护的资源，因此您不必枚举主体 - 这就是组的目的。

参考和进一步阅读：[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)

# c# - 将带有控件的 Asp.Net GridView 转换为 DataTable

> ID：13652526
> 
> 赞同：2
> 
> 时间：2012-11-30T20:17:26.780
> 
> 标签：c#, asp.net

编码问题：

将具有控件的 Asp.Net GridView 转换回数据表

现实世界的问题：

谷歌没有我能找到并实施的任何真正有用的答案

Asp.Net 网格视图：

```
<asp:GridView ID="gvCompanies" runat="server" AutoGenerateColumns="False" AllowSorting="True" OnSorting="gridView_Sorting">
            <Columns>
            <asp:TemplateField HeaderText = "Comapny Id"><ItemTemplate><%# Eval("Company Id")%></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "New Company Id"><ItemTemplate><asp:TextBox ID="TextBox5" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Company Name"><ItemTemplate><asp:TextBox ID="TextBox6" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Branch Id"><ItemTemplate><asp:TextBox ID="TextBox7" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Location Id"><ItemTemplate><asp:TextBox ID="TextBox8" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Location Name"><ItemTemplate><asp:TextBox ID="TextBox9" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Prefix"><ItemTemplate><asp:TextBox ID="TextBox10" runat ="server" ></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Sort"><ItemTemplate><asp:TextBox ID="TextBox11" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Cash In Transit"><ItemTemplate><asp:TextBox ID="TextBox12" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Cash Sub In Transit"><ItemTemplate><asp:TextBox ID="TextBox13" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Cash Account"><ItemTemplate><asp:TextBox ID="TextBox14" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Cash Sub Account"><ItemTemplate><asp:TextBox ID="TextBox15" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "Payment Method"><ItemTemplate><asp:TextBox ID="TextBox16" runat ="server"></asp:TextBox></ItemTemplate></asp:TemplateField>
            <asp:TemplateField HeaderText = "AppDB"><ItemTemplate><%# Eval("AppDB")%></ItemTemplate></asp:TemplateField>
            </Columns>
            </asp:GridView 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:17:26.780

解决方案：

1.  gvCompanies 是 GridView
2.  dtCompanies 是原始的 DataTable
3.  可以为不同的控件类型添加更多 if else

    ```
    protected DataTable ConvertToDataTable()
    {
        DataTable TempTable = new DataTable();
        TempTable = dtCompanies.Clone();

        foreach (GridViewRow row in gvCompanies.Rows)
        {
             DataRow TempRow = TempTable.NewRow();

             for (int i = 0; i < row.Cells.Count; i++)
             {
                 if (row.Cells[i].Controls[0].GetType().Equals(typeof(DataBoundLiteralControl)))
                 {
                     TempRow[i] = ((DataBoundLiteralControl)row.Cells[i].Controls[0] as DataBoundLiteralControl).Text;
                 }
                 else if (row.Cells[i].Controls[0].GetType().Equals(typeof(TextBox)))
                 {
                     TempRow[i] = ((TextBox)row.Cells[i].Controls[0]).Text;
                 }
             }
             TempTable.Rows.Add(TempRow);
        }
        return TempTable;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T10:37:48.173

Dim Rectab As New DataTable '取一个新的数据表

```
 '------Add Columns into your DataTable----------------
        For k As Integer = 0 To CalibSchdNameAry.Length - 1 
            Rectab.Columns.Add(CalibSchdNameAry(k))
        Next
       '-----------------------------------------------------
       '------Add Rows Data Into Your Datatable From Html Table-------
        For i As Integer = 0 To ClbTab.Rows.Count - 1
            Rectab.Rows.Add()
            For j As Integer = 0 To CalibSchdNameAry.Length - 1
                If i + 1 < ClbTab.Rows.Count - 1 Then
                    Rectab.Rows(i).Item(CalibSchdNameAry(j)) = ClbTab.Rows(i + 1).Cells(j).Text
                End If
            Next

        Next 
```

'--------现在您的数据表可以使用了----------------Suresh.A------

# winforms - 调试错误：Licenses.licx：无法解析类型

> ID：13652531
> 
> 赞同：11
> 
> 时间：2012-11-30T20:17:50.427
> 
> 标签：winforms, licensing, componentone, licenses.licx, emptylicenseslicx

我使用的是 ComponentOne FlexGrid，它自动在其许可证中注册

> C1.Win.C1FlexGrid.C1FlexGrid，C1.Win.C1FlexGrid.2，版本=2.6.20122.716，文化=中性，PublicKeyToken=79882d576c6336da

我还使用了一个继承 C1FlexGrid 的自定义控件，但在运行时它会尝试注册

> DataTree.C1FlexDataTree，fpstudio，版本=1.0.0.0，文化=中性，PublicKeyToken=null

在许可证文件中，最终会产生错误：

> 错误 51 无法解析类型 'DataTree.C1FlexDataTree, fpstudio, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' C:_DEVELOPMENT_FP_DRAFT12\COMPONENT1_WORKING_MERGED\fpstudio\Properties\licenses.licx 3 Freepour Studio

我怎么能告诉这个类不要尝试许可控件，因为它已经被继承并被许可了。我已经`[LicenseProvider()]`从 DataTree 类中删除了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-24T22:29:11.243

这很痛苦......我建议你安装[EmptyLicensesLicx](https://github.com/caioproiete/EmptyLicensesLicx) nuget 包，它会确保`Licenses.licx`你的项目中有一个空的，在它被编译之前（这就是你所需要的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:47:38.663

我认为唯一的方法是手动编辑 licenses.licx 文件并从那里删除 DataTree.C1FlexDataTree。请注意，当您在设计器中使用表单和控件时，VS 会自动编辑 licenses.licx 文件。如果您关闭所有设计器窗口并手动编辑 licx 文件，您的更改将被保存，您可以避免出现问题。licx 文件最常见的问题是在您将控件更新到其他版本后生成错误。为避免这种情况，您完全可以从此文件中删除版本和公钥令牌信息。之后，它将适用于任何版本。即您的 licenses.licx 文件内容应如下所示：

```
C1.Win.C1FlexGrid.C1FlexGrid, C1.Win.C1FlexGrid.2
DataTree.C1FlexDataTree, fpstudio 
```

（或没有 DataTree.C1FlexDataTree 行）。注意，如果您打开设计器进行一些更改，VS 可以再次编辑此文件。没有办法阻止这种情况。您将不得不再次编辑文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T04:13:15.837

我发现解决方案是在项目中打开一个新的空白表单，将库附带的每个对象添加到该表单中。然后执行“构建”，Visual Studio 使用添加对象的正确信息更新您的 .licx 文件，覆盖该文件中保存的任何旧日期。与您的文件关联的所有“未解析”类型都将被删除。

# php - 在 PHP 中将 jQuery 函数回显为变量

> ID：13652532
> 
> 赞同：0
> 
> 时间：2012-11-30T20:18:00.560
> 
> 标签：php, jquery, ajax

好的，所以我试图从 PHP 内部的 jQuery 中回显一个函数。

我搜索了一下，我没有找到任何确切的答案，但我发现我需要使用 ajax 吗？

我不熟悉ajax，所以我发现了这个。

```
<?php 
    $status = "<script>
                 $.ajax({ 
                    url: '/',
                    data: {action: 'test'},
                    type: 'post',
                    success: function(output) {
                       notifyBox();
                    }
                 });
               </script>";
?> 
```

我在页面的某处也有这部分：

```
<?php if(isset($status)) { echo $status; } ?> 
```

我不太确定是否需要所有这些来执行该功能？但它只有在我将 jQuery 放在网站的头部时才有效。

我通常把我所有的脚本都放在上面`</body>`（在结束标记处），现在如果我必须把所有这些脚本放在头上，我会很困扰

由于页面很多，我现在无法将所有脚本分开，只是因为此刻困扰我的一页。

谁能告诉我，我如何调用该函数而不会出现未定义的“$”的控制台错误，因为 jQuery 是在页面末尾加载的。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:23:03.120

只要您确保将 PHP`if`语句放在包含 jQuery的标记*之后，这应该可以工作。*`<script>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:24:17.817

问题是由回显该变量时未加载 jQuery 引起的。当 Javascript 看到一个函数调用时，它会立即执行它。为了防止这种情况，您需要在加载 jQuery 后回显您的变量。

例子：

```
<script type="text/javascript" src="path/to/jquery.js"></script>
<?php
    echo $script;
?> 
```

或者，您可以将 AJAX 调用放入稍后调用的函数中：

```
<?php
    $script = '<script type="text/javascript">function myFunc() {
        //Call AJAX here
    }
    </script>';
    echo $script;
?> 
```

然后，您可以调用您的函数：`myFunc();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:24:58.580

确保已加载 jquery。这应该有效：

```
$status = "<script type='text/javascript'>
                $(function(){
                   $.ajax({ 
                    url: '/',
                    data: {action: 'test'},
                    type: 'post',
                    success: function(output) {
                       notifyBox();
                    }
                 });
               });
               </script>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:27:49.297

$(document).ready() 也是一个 jquery 函数，因此，请尝试使用 window.onload。

# java - Eclipse 构建 > Sign Jar > Jnlp 部署过程

> ID：13652536
> 
> 赞同：2
> 
> 时间：2012-11-30T20:18:25.710
> 
> 标签：java, deployment, jnlp, java-web-start

目前，我收到有关如何找不到我的包含之一的错误，特别是

```
java.lang.ClassNotFoundException: org.jivesoftware.smack.provider.ProviderManager 
```

我已经确认该文件作为可执行 jar 运行，所以我真的不知道为什么会出现这样的错误，有人可以提供一些见解吗？

这是我目前正在做的事情，如果其中任何步骤有误，请纠正我。

1.  我带着我的（确认工作的）程序，运行它来仔细检查。

2.  我右键单击项目 > 导出 > 可运行 jar 文件并选择选项 > 将所需库打包到生成的 jar 文件中，然后将 Ant Build 脚本导出到文件 myProg.xml

    当 myprog.xml 出来时，它看起来像这样：

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <project default="create_run_jar" name="Create Runnable Jar for Project myProg with Jar-in-Jar Loader">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <target name="create_run_jar">
        <jar destfile="C:/Users/Dbell/Documents/EclipseProjects/myProg/myProg.jar">
            <manifest>
                <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
                <attribute name="Rsrc-Main-Class" value="com.myCom.noc.xmpptroubleshooter.Main"/>
                <attribute name="Class-Path" value="."/>
                <attribute name="Rsrc-Class-Path" value="./ httpasyncclient-4.0-beta2.jar httpcore-4.2.1.jar httpcore-nio-4.2.1.jar httpclient-4.2.1.jar commons-logging-1.1.1.jar commons-codec-1.6.jar log4j-1.2.12.jar logkit-1.0.1.jar avalon-framework-4.1.3.jar servlet-api-2.3.jar commons-net-3.1.jar xpp3_min-1.1.4c.jar NocLib-1.1.jar smack32-3.2.0.jar httpclient-3.1.jar"/>
            </manifest>
            <zipfileset src="jar-in-jar-loader.zip"/>
            <fileset dir="C:/Users/Dbell/Documents/EclipseProjects/myProg/bin"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\org.apache.httpcomponents\httpasyncclient\jars" includes="httpasyncclient-4.0-beta2.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\org.apache.httpcomponents\httpcore\jars" includes="httpcore-4.2.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\org.apache.httpcomponents\httpcore-nio\jars" includes="httpcore-nio-4.2.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\org.apache.httpcomponents\httpclient\jars" includes="httpclient-4.2.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\commons-logging\commons-logging\jars" includes="commons-logging-1.1.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\commons-codec\commons-codec\jars" includes="commons-codec-1.6.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\log4j\log4j\jars" includes="log4j-1.2.12.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\logkit\logkit\jars" includes="logkit-1.0.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\avalon-framework\avalon-framework\jars" includes="avalon-framework-4.1.3.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\javax.servlet\servlet-api\jars" includes="servlet-api-2.3.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\commons-net\commons-net\jars" includes="commons-net-3.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\xpp3\xpp3_min\jars" includes="xpp3_min-1.1.4c.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\com.MyCom\NocLib\jars" includes="NocLib-1.1.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\com.MyCom\smack32\jars" includes="smack32-3.2.0.jar"/>
            <zipfileset dir="C:\Users\Dbell\.ivy2\cache\com.apache\httpclient\jars" includes="httpclient-3.1.jar"/>
        </jar>
      <signjar jar="myProg.jar" alias="myAlias" keystore="path/to/myKs.ks" storepass="MyPass"/>
    </target>
    </project> 
    ```

3.  从那里我右键单击>运行为> ant构建文件来签署我的jar。

4.  然后我将它移动到我的网络服务器，其中存在一个 launch.jnlp 文件。看起来像这样：

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <jnlp codebase="http://myServer:8080/myProg/" href="http://myServer:8080/myProg/launch.jnlp" spec="6.0+">
      <information>
          <title>myProg</title>
          <vendor>myName</vendor>
          <homepage href="http://myServer:8080/myProg/"/>
          <description>myProg</description>
          <description kind="short">myProg</description>

      </information>
      <security>
        <all-permissions/>
      </security>
      <resources>
          <j2se version="1.6+" />
          <jar href="myProg.jar" main="true"/>
      </resources>
      <application-desc main-class="com.myCom.noc.pathToMain.Main">

      </application-desc>
    </jnlp> 
    ```

启动应用程序时的完整堆栈跟踪：

```
java.lang.ClassNotFoundException: org.jivesoftware.smack.provider.ProviderManager
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.myCom.noc.xmpptroubleshooter.Main.main(Main.java:83)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.javaws.Launcher.executeApplication(Unknown Source)
at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
at com.sun.javaws.Launcher.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

这是我的罐子里面 ![这就是我罐子里面的样子](../Images/382e859ca8414e7b5a58fb6cc647c9c7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:28:02.630

正如@AkselWillgert 所暗示的那样，标准Java 类加载器不会从其他罐子中的罐子加载类。有必要执行以下操作之一：

1.  `resources`在 JNLP 部分中添加对每个 Jar 的引用。或者实际上，我们可以更进一步，将常用的 API 放入可以被许多应用程序使用的扩展中。例如 a`commons-logging.jnlp`或`jive.jnlp`.
2.  从所有 Jar 中提取类并将它们添加到一个 Jar 中。这通常违反 API 的用户协议，破坏了可能在服务提供者接口中表达的数字签名和有用的清单信息。
3.  安装一个可以在 Jars 中读取 Jar 的类加载器。那将需要一个受信任的应用程序。

由于各种原因，第一个是最好的选择。

* * *

> ..我将如何签署所有这些罐子？

咨询该[`signjar`任务](http://ant.apache.org/manual/Tasks/signjar.html)的文档会建议类似（复制/粘贴）：

```
<signjar
    alias="testonly" keystore="testkeystore"
    storepass="apacheant"
    lazy="true"
    >
  <path>
    <fileset dir="dist" includes="**/*.jar" />
  </path>
</signjar> 
```

## 警告

一些罐子可能已经进行了数字签名。如果是这样，最好留下原始签名。如何做到这一点，更多的是关于构建工具的问题。

# java - Java - 如何遍历 ArrayList 以添加元素？

> ID：13652538
> 
> 赞同：2
> 
> 时间：2012-11-30T20:18:34.627
> 
> 标签：java, object, arraylist, loops

我是 java 新手，我想从一个类中获取所有数据。

这就是我向类添加数据的方式：

```
String[] arrNames = { "Andrew", "James" ... };
...

for(int i = 0; i < arrNames.length; i++){
   Person person = new Person();
   person.setId(i + 1);
   person.setName(arrNames[i]);
   person.setLastname(arrLastnames[i]);
   person.setIdentifier(arrIds[i]);
   person.setAddress(arrAddreses[i]);
} 
```

如何获取我添加到课程中的所有数据？

```
for(Person p : ???){
   System.out.println(p.getName());
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T20:20:53.733

您需要创建一个`List<Person>`并将循环中的每个添加`person`到该列表中。

```
List<Person> personList = new ArrayList<Person>();

for(int i = 0; i < arrNames.length; i++){
   // Create Person
   // Set Attributes
   personList.add(person);
} 
```

然后遍历该列表以获取每个`Person`实例：-

```
for (Person person: personList) {
    System.out.println(person.getName());
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T20:20:17.460

```
List<Person> list = ArrayList<Person>();

for(int i = 0; i < arrNames.length; i++){
   Person person = new Person();
   person.setId(i + 1);
   person.setName(arrNames[i]);
   person.setLastname(arrLastnames[i]);
   person.setIdentifier(arrIds[i]);
   person.setAddress(arrAddreses[i]);

   list.add(person); // adding each person object to the list.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T20:25:05.037

这么快`ArrayList`的入门：

```
List<Person> list = new ArrayList<Person>();
//Code to add stuff

for (Person p : list) {
  //Do something with p to your heart's desire.
} 
```

或者

```
for (int i = 0; i < list.size(); i++) {
  Person reference = list.get(i);
} 
```

添加东西但是你的循环是有缺陷的。`person`您只需用新数据覆盖每次迭代。您需要将其添加到列表中。

```
List<Person> people = new ArrayList<Person>();

for(int i = 0; i < arrNames.length; i++){
   Person person = new Person();
   person.setId(i + 1);
   person.setName(arrNames[i]);
   person.setLastname(arrLastnames[i]);
   person.setIdentifier(arrIds[i]);
   person.setAddress(arrAddreses[i]);

   people.add(person);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T20:20:38.133

放入`Person`列表例如：

```
List<Person> persons = new ArrayList<Person>();
for(int i = 0; i < arrNames.length; i++){
   Person person = new Person();
   person.setId(i + 1);
   person.setName(arrNames[i]);
   person.setLastname(arrLastnames[i]);
   person.setIdentifier(arrIds[i]);
   person.setAddress(arrAddreses[i]);
   persons.add(person);
}
for(Person p : persons){
   System.out.println(p.getName());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T20:20:55.657

介绍一个包含人员的列表并将对象添加到您的循环中

```
String[] arrNames = { "Andrew", "James" ... };
...

List<Person> persons = new ArrayList<Person();    
for(int i = 0; i < arrNames.length; i++){
   Person person = new Person();
   person.setId(i + 1);
   person.setName(arrNames[i]);
   person.setLastname(arrLastnames[i]);
   person.setIdentifier(arrIds[i]);
   person.setAddress(arrAddreses[i]);

   persons.add(person);
} 
```

然后你可以像这样遍历列表

```
for(Person p : persons){
   System.out.println(p.getName());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T20:23:33.913

```
List<Person> people = Arrays.asList(new Person(1, "Andrew", "Surname1", "address1"), new Person(2, "James", "Surname2", "address2"));

for(Person p : people){
   System.out.println(p.getName());
} 
```

# asp.net-mvc - 为每个响应设置 JsonSerializerSettings？

> ID：13652555
> 
> 赞同：0
> 
> 时间：2012-11-30T20:19:35.977
> 
> 标签：asp.net-mvc, json, asp.net-web-api

我有一个 MVC 4 Web API。通常我希望响应返回所有属性，但有一个地方我只想返回非空值。`Formatters.JsonFormatter.SerializerSettings.NullValueHandling`我可以通过在全局文件中设置实例的 JsonSerializerSettings 来设置任一行为，`GlobalConfiguration.Configuration`但我想根据响应同时使用这两种行为。是否有一种简单的方法可以从 API 控制器操作中配置请求范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:56:19.213

通过将控制器操作更改为返回 HttpResponseMessage，您可以更好地控制特定操作的内容返回方式。例如

```
public HttpResponseMessage Get() {
   var foo = new Foo();

   var objectContent = new ObjectContent<Foo>(foo, new JsonFormatter()
                                {SerializerSettings.NullValueHandling = ???})

    return new HttpResponseMessage() {Content = objectContent};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:30:51.937

使用像javascript这样的动态语言在客户端可能更容易做到这一点。

```
var keys = Object.keys(json);
for(var i = 0; i < keys.length; i++) {
    var propertyName = keys[i];
    if(json[propertyName] === undefined || v[propertyName] === null) {
           json.remove(propertyName);
    }
}
return json; 
```

# c - 当我在 C 中将 long int 分配给 int 时会发生什么？

> ID：13652556
> 
> 赞同：56
> 
> 时间：2012-11-30T20:19:40.277
> 
> 标签：c, casting, integer, variable-assignment, long-integer

在最近的一次家庭作业中，有人告诉我使用`long`变量来存储结果，因为它可能是一个很大的数字。

我决定在我的系统（intel core i5/64-bit windows 7/gnu gcc 编译器）上检查它对我来说真的很重要，并发现以下代码：

```
printf("sizeof(char) => %d\n", sizeof(char));
printf("sizeof(short) => %d\n", sizeof(short));
printf("sizeof(short int) => %d\n", sizeof(short int));
printf("sizeof(int) => %d\n", sizeof(int));
printf("sizeof(long) => %d\n", sizeof(long));
printf("sizeof(long int) => %d\n", sizeof(long int));
printf("sizeof(long long) => %d\n", sizeof(long long));
printf("sizeof(long long int) => %d\n", sizeof(long long int)); 
```

产生以下输出：

```
sizeof(char) => 1
sizeof(short) => 2
sizeof(short int) => 2
sizeof(int) => 4
sizeof(long) => 4
sizeof(long int) => 4
sizeof(long long) => 8
sizeof(long long int) => 8 
```

换句话说，在我的系统上，`int`和`long`是相同的，任何太大而无法容纳的东西`int`，也将太大而`long`无法容纳。

家庭作业本身不是这里的问题。我想知道在 where 的系统上`int < long`，我应该如何分配一个`int`to long ？

我知道关于这个主题[有](https://stackoverflow.com/questions/12501331/how-does-long-to-int-cast-work-in-java) [许多](https://stackoverflow.com/questions/1590831/safely-casting-long-to-int-in-java) [密切](https://stackoverflow.com/questions/2711522/what-happens-if-i-assign-a-negative-value-to-an-unsigned-variable)[相关的问题，但我觉得](https://stackoverflow.com/questions/7977265/what-happens-at-background-when-convert-int-to-float)[这些](https://stackoverflow.com/questions/1161887/what-happens-if-i-cast-a-double-to-an-int-but-the-value-of-the-double-is-out-of) 问题的答案并不能让我完全理解这个过程中将会发生什么或可能发生什么。

基本上我想弄清楚以下几点：

1.  我应该在分配之前投到`long`，`int`还是~~因为`long` 不是不同的数据类型，而只是一个修饰符，~~直接分配会被认为是无害的吗？
2.  系统上会发生什么`long > int`？结果会是未定义的（或不可预测的）还是会导致变量的额外部分被省略？
3.  `long`从to的转换如何`int`在 C 中工作？
4.  当我不使用强制转换时，从`long`to的分配如何在 C 中工作？`int`

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-30T20:24:05.397

语言保证`int`至少是 16 位，`long`至少是 32 位，并且*至少*`long`可以表示所有可以表示的值。*`int`*

 *如果你给`long`一个`int`对象赋值，它会被隐式转换。不需要明确的演员表；它只会指定无论如何都会发生的相同转换。

在您的系统上，如果大小`int`和`long`范围恰好相同，则转换是微不足道的；它只是复制值。

在`long`比 更宽的系统上`int`，如果该值不适合`int`，则转换的结果是实现定义的。（或者，从 C99 开始，它可以引发实现定义的信号，但我不知道有任何编译器实际上会这样做。）*通常*发生的情况是高位被丢弃，但你不应该依赖在那。（无符号类型的规则不同；将有符号或无符号整数转换为无符号类型的结果是明确定义的。）

如果您需要*安全地*`long`为对象赋值`int`，您可以在进行赋值之前检查它是否适合：

```
#include <limits.h> /* for INT_MIN, INT_MAX */

/* ... */

int i;
long li = /* whatever */

if (li >= INT_MIN && li <= INT_MAX) {
    i = li;
}
else {
    /* do something else? */
} 
```

“其他”的细节将取决于你想做什么。

一个更正：`int`并且*始终*`long`是不同的类型，即使它们碰巧具有相同的大小和表示形式。算术类型可以自由转换，因此这通常没有任何区别，但例如和是不同且不兼容的类型；如果没有明确的（并且有潜在危险的）强制转换，您不能将 a 分配给 a ，反之亦然。*`int*``long*``long*``int*`*

 *如果您发现自己需要将`long`值转换为`int`，那么您应该做的第一件事就是重新考虑您的代码设计。有时这样的转换是必要的，但更多时候它们表明`int`您分配的 应该`long`首先被定义为 a 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:36:56.673

A`long`总是可以表示 的所有值`int`。如果手头的值可以由您分配给的变量的类型表示，那么该值将被保留。

如果它不能被表示，那么对于有符号的目标类型，结果是正式未指定的，而对于无符号的目标类型，它被指定为原始值模 2 ^(*n*)，其中*n*是值表示中的位数（不是必须是目标中的所有位）。

实际上，在现代机器上，您也可以为签名类型进行包装。

这是因为现代机器使用*二进制补码形式*来表示有符号整数，没有任何位用于表示“无效值”等——即，所有位都用于值表示。

对于*n*位值表示，任何整数值*x*都映射到*x* +K*2 ^(*n*)，其中整数常数 K 被选择为使得结果在一半可能值为负的范围内。

因此，例如，对于 32 位`int`，值 -7 表示为位模式数 -7+2 ^(32) = 2 ^(32) -7，因此如果将位模式所代表的数字显示为无符号整数，则会得到一个非常大的数字。

The reason that this is called *two's complement* is because it makes sense for the binary numeral system, the base two numeral system. For the binary numeral system there's also a ones' (note the placement of the apostrophe) complement. Similarly, for the decimal numberal system there's ten's complement and niners' complement. With 4 digit ten's complement representation you would represent -7 as 10000-7 = 9993\. That's all, really.**

# iphone - iphone - 以编程方式使用按钮更改视图

> ID：13652561
> 
> 赞同：1
> 
> 时间：2012-11-30T20:19:53.973
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller

我在 iphone dev 上阅读了有关故事板的本[教程。](http://maybelost.com/2011/10/tutorial-using-storyboards-in-xcode-4-2/)这家伙通过一个按钮改变视图。但是按钮的连接是通过界面生成器进行的。如何以编程方式执行此操作，以便在更改视图之前进行一些检查（例如用户名/密码）？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:26:44.963

将一个视图与另一个视图连接（而不是按钮与视图）。将 segue 更改为 custom 并给它一个标识符（在 IB 中）。例如：登录

然后创建一个动作并将其分配给按钮。

在按钮操作中使用：

```
[self performSegueWithIdentifier:@"Login" sender:self]; 
```

创建一个 Segue 类对象并在 .m 中使用类似：

```
UIViewController *dst = [self destinationViewController];
UIViewController *nav = [self sourceViewController];

//All your custom code

[nav presentModalViewController:dst animated:YES]; 
```

编辑：忘记了一些重要的事情！

在 IB 中，在 Segue 配置中，放入 Segue Class，即创建的 Segue 类的名称。例如：LoginSegue 是创建的 segue 的名称，在 Segue 类中你必须写“LoginSegue”

编辑：创建类：

1.- 创建一个扩展 UIStoryBoardSegue 的新文件，.h 将类似于：

```
#import <Foundation/Foundation.h>

@interface LoginSegue : UIStoryboardSegue

@end 
```

2.- 在实现中，在一个名为 perform 的方法中使用上面的代码：

```
-(void)perform
{

UIViewController *dst = [self destinationViewController];
UIViewController *nav = [self sourceViewController];

 //Custom Code

 [nav presentModalViewController:dst animated:YES];

} 
```

如果需要访问源viewController的属性，需要修改：

```
UIViewController *nav = [self sourceViewController]; 
```

到

```
eYourClass *nav = [self sourceViewController]; 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:25:13.007

您可以创建按钮并将 touchUpInside 操作拖到`IBAction`界面构建器中

或在某处的代码中`viewDidLoad`

```
 [self.login addTarget:self action:@selector(loginTapped) forControlEvents:UIControlEventTouchUpInside]; 
```

然后该`loginTapped`方法可能看起来像

```
- (void)loginTapped;
{
  if ([self authenticateWithUsername:self.username.text password:self.password.text]) {
    [self performSegueWithIdentifier:@"loginSuccessful" sender:self];
  } else {
    // Warn user about invalid username/password
  }
} 
```

这取决于您在情节提要中创建了名称与`identifier`参数匹配的 segue

# jquery - 不使用cookie只出现一次通知

> ID：13652565
> 
> 赞同：0
> 
> 时间：2012-11-30T20:20:12.407
> 
> 标签：jquery

页面加载后，此代码将为访问者弹出一个阴影框，我想让它在不使用 cookie 的情况下仅向访问者显示一次，如何？

```
<script type="text/javascript">
$(document).ready(function(){
tb_show("قبل أن تبدأ","thick.php?height=300&width=300", "");
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:28:59.600

如果您不使用 cookie，您将不得不使用某种机制来记录访问者是否看到了消息。可能是您服务器上的数据库或文件。

cookie 的现代替代方案是[本地存储](https://stackoverflow.com/questions/2800238/javascript-html5-localstorage)

# .net - 在 .Net 应用程序中使用 OnPaint 的正确方法是什么？

> ID：13652568
> 
> 赞同：3
> 
> 时间：2012-11-30T20:20:26.010
> 
> 标签：.net, performance, onpaint

有时我需要控件的自定义外观。或者做很多定制绘画。我知道我可以这样做`OnPaint`（参见：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)）

使用 .net 应用程序自定义绘制内容的正确方法是什么`OnPaint`？是否有任何规则我必须牢记以保持我的应用程序优化，并将渲染时间保持在最低限度？

注意：我不时看到并经历过很多 OnPaint 的低效使用，因此我创建了这个 Q&A。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T20:20:26.010

为了`OnPaint`有效地使用你必须知道几件事：

*   每次绘制控件时都会执行控件的`OnPaint`of （例如 of ）（duhh ...）`Form1`
*   每次绘制**子控件**`OnPaint`时都会执行of 。例如，如果你在右上角画一个点，当你有150个子控件时，这个点至少会被画150次！它大大增加了渲染时间。特别是如果您在. `Form1`**`Form1``Form1``OnPaint``Form1``Form1``OnPaint`

    *   `OnPaint`因此，当一个控件有一个或多个子控件时，通常不能在控件中包含任何逻辑。相反，您应该制作一个自定义控件，该控件上不再包含子控件，它可以完成绘制工作。并将其作为子控件放置在需要自定义绘图的位置的父控件上。
    *   每当将控件添加到父级时，父级将重绘。如果您将在另一个控件上放置大量控件，例如带有复选框的大型结果集`Form1`，则必须使用`Form1.SuspendLayout()`（请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control。 suspendlayout.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx) ) 在添加子控件之前。`Form1.ResumeLayout()`当您完成添加控件时。这会暂时抑制`OnPaint`事件，并减少渲染时间。
    *   透明度总是会增加渲染时间。
    *   以这样一种方式放置组件，即它们之间没有背景，可以减少`OnPaint`父控件中的事件数量。例如，在彼此下方放置 4 个文本框，以便它们相互连接。因此它们之间没有背景，控件全部绘制在一个`OnPaint`事件而不是 4 个`OnPaint`事件中。当然，这并不总是可行的，因为您不想并排粘合所有组件。但是，如果性能比外观更重要，例如在某种大型自定义“数据网格”中，这样​​做是值得的。
    *   切勿更改`OnPaint`事件中控件的位置或大小，因为这会调用新`OnPaint`事件。`OnPaint`如果您必须重新定位/调整控件大小，则必须在调用之前将其添加到代码中的其他位置。例如，将重定位/调整大小代码放在`OnLayout`或`OnResize`类似事件中。如果您仍然认为必须在`OnPaint`事件中放置重定位/调整大小代码才能使应用程序正常工作，那么您就错了，您需要修改代码的逻辑。
    *   **思考 System.Math.Pow(2, 2) 次，然后在其自身 class 之外的**控件上调用 Refresh() 。如果您有调用 Refresh 的冲动，您可能需要新的事件和事件处理程序来与您愿意显示的内容保持同步。Invalidate() 也是如此。
    *   要检查您是否有效地绘制，您可以执行以下操作。1\. 打开你的应用程序 2\. 在 Top Most 父级的 OnPaint 上放置一个刹车点 3\. 最大化一个窗口，使其覆盖你的应用程序。4\. 再次最小化窗口，您的应用程序将通过控件重绘控件。如果事情是双重的，那么你在应用程序的逻辑中犯了一个错误。** 

 **好吧，我想这就是全部，如果我忘记了什么，我会更新这个问答。如果我忘记了什么，或者我犯了一个错误，我会很高兴注意到它！

希望这将使某人在.Net 中使用自定义绘画内容方面占得先机，因为我前段时间一直在寻找此信息。**

# javascript - Highcharts 类别中的多行（长文本）

> ID：13652576
> 
> 赞同：0
> 
> 时间：2012-11-30T20:20:43.170
> 
> 标签：javascript, styles, highcharts, categories

我有这张图：http: [//jsfiddle.net/ZKGZb/](http://jsfiddle.net/ZKGZb/)

```
$(document).ready(function() {
    chart16 = new Highcharts.Chart({
    "chart": {
        "renderTo": "right-22",
        "type": "column",
        "width": 550,
        "height": 400,

    },
    "xAxis": {
        "categories": ["a very long long text ", "2another long text", "dda", "bbb", "aaa"],
        "allowDecimals": "0",
        "title": {
            "text": "Hello world",
            "offset": -350,
            "align": "left",
            "style": {
                "color": "red"
            }
        },    

        "labels":{"useHtml": true       }
    },
    "yAxis": {
        "allowDecimals": false,
        "labels": {
            "overflow": "justify"
        },
        "title": {
            "text": " "
        },
        "max": 20
    },
    "tooltip": {
        "formatter": function() {
            return this.series.name + this.y + "";
        }
    },
    "title": {
        "text": "a very long long text",
        "margin": 50
    },
    "plotOptions": {
        "column": {
            "groupPadding": null,
            "borderWidth": null,
            "dataLabels": {
                "enabled": null,
                "color": null,
                "style": {
                    "fontSize": null,
                    "font-weight": "bold"
                },
                "formatter": function() {
                    return this.series.name + this.y + "";
                }
            }
        }
    },
    "exporting": {
        "enabled": false
    },
    "credits": {
        "enabled": false
    },
    "labels": {
        "enabled": null
    },
    "legend": {
        "enabled": 0,
        "layout": "vertical",
        "align": "top",
        "verticalAlign": "top",
        "y": 0,
        "x": 0,
        "floating": false,
        "borderWidth": 1,
        "backgroundColor": "#FFFFFF",
        "shadow": true
    },
    "series": [{
        "data": [{
            "y": 19,
            },
        {
            "y": 0,
            "name": ""},
        {
            "y": 0,
            "name": ""},
        {
            "y": 1,
            "name": ""},
        {
            "y": 0,
            "name": ""}],
        "name": "Total: "}]
}, function(chartObj) {});
}); 
```

如何使类别标签看起来不错？我需要能够显示每个类别的整个文本，但我找不到方法来做到这一点。我尝试添加
和使用“useHtml”选项，但它没有工作提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:56:54.237

```
"xAxis": {
    "categories": ["a very long long text ", "2another long text", "dda", "bbb", "aaa"],
    "allowDecimals": "0",
    "title": {
        "text": "Hello world",
        "offset": -350,
        "align": "left",
        "style": {
            "color": "red"
        }
    }, 
```

删除“title=>offset”修复它..

# matlab - 具有不同类型的 MATLAB 矩阵

> ID：13652579
> 
> 赞同：0
> 
> 时间：2012-11-30T20:21:01.280
> 
> 标签：matlab, matrix, octave

进入`a=[70001999 0.086 0.003 0.1]`MATLAB 结果如下：

```
a =

1.0e+07 *

7.0002    0.0000    0.0000    0.0000 
```

我不希望它被这样看，因为我的第一列存储 id 编号，而第 2-4 列存储概率。我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:22:49.973

完整的精度仍然存在，只是没有显示。显示更多类型

```
format longg 
```

例如，在我的 Matlab 上（我`format longg`的`startup.m`文件中有）

```
>> a=[70001999 0.086 0.003 0.1]
a =
                  70001999                     0.086                     0.003                       0.1 
```

如果需要，您还可以尝试其他一些显示选项。例如，看看您是否喜欢以下各项后的显示。

```
format shortg; a
format shorteng; a
format longeng; a 
```

当然，使用`help format`更多细节。

# c++ - 无符号整数转换为小端形式

> ID：13652586
> 
> 赞同：2
> 
> 时间：2012-11-30T20:21:35.323
> 
> 标签：c++, 32-bit, bit-shift

> **可能重复：**
> [在C中将大端转换为小端[不使用提供的函数]](https://stackoverflow.com/questions/2182002/convert-big-endian-to-little-endian-in-c-without-using-provided-func)

我在这一部分遇到了麻烦：如果我想取一个 32 位数字，并且我想将它的字节（1 字节 = 8 位）从大端格式转换为小端格式。例如：

假设我有数字 1。

在 32 位中，这就是它的样子：

```
1st byte 2nd byte 3rd byte 4th byte
00000000 00000000 00000000 00000001 
```

我希望它看起来像这样：

```
4th byte 3rd byte 2nd byte 1st byte 
00000001 00000000 00000000 00000000 
```

使具有最低有效值的字节首先出现。我在想你可以使用 for 循环，但我不确定如何在 C++ 中移动位/字节。例如，如果用户输入 1 并且我必须像上面的示例一样移动它的位，我不确定如何将 1 转换为位，然后移位。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:26:40.050

`<<`并且`>>`是 C 和大多数其他 C 风格语言中的按位移位运算符。

做你想做的一种方法是：

```
int value = 1;
uint x = (uint)value;
int valueShifted = 
    ( x << 24) |                // Move 4th byte to 1st
    ((x << 8) & 0x00ff0000) |  // Move 2nd byte to 3rd
    ((x >> 8) & 0x0000ff00) |  // Move 3rd byte to 2nd
    ( x >> 24);                 // Move 4th byte to 1st 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:28:48.697

```
uint32_t n = 0x00000001;
std::reverse( (char*)&n, (char*)(&n + 1) );
assert( n == 0x01000000 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:30:20.763

移位是用`<<`and`>>`运算符完成的。与按位 AND ( `&`) 和 OR ( `|`) 运算符一起，您可以做您想做的事情：

```
 int value = 1;
 int shifted = value << 24 | (value & 0x0000ff00) << 8 | (value & 0x00ff0000) >> 8 | (value & 0xff000000) >> 24; 
```

# scala - PlayFramework2 Scala 文件映射

> ID：13652588
> 
> 赞同：0
> 
> 时间：2012-11-30T20:21:52.863
> 
> 标签：scala, map, playframework-2.0

我刚从 Scala 开始，遇到了一个让我很难过的问题，但我猜我错过了一些简单的东西。

我按照说明使用 Clapper ClassFinder： [http ://thoughts.inphina.com/2011/09/15/building-a-plugin-based-architecture-in-scala/](http://thoughts.inphina.com/2011/09/15/building-a-plugin-based-architecture-in-scala/)

```
val classpath = List("./plugins").map(new File(_))
val finder = ClassFinder(classpath)
val classes = finder.getClasses
val classMap = ClassFinder.classInfoMap(classes) 
```

执行第一行后，我看到类路径被简单地设置为 List(.\plugins) 我在 Windows 上运行它，所以斜线的交换似乎没问题。但是我希望看到一个 File 对象的列表，尽管我不确定这个 Scala 语法，也许我在 Scala IDE 中遗漏了一些东西。类的值显示一个“空迭代器”。

在我指定的路径中似乎没有找到任何文件。我尝试使用绝对路径，但结果相同。我希望它会在插件目录中找到一个 jar 文件。plugins 目录位于我正在使用的 Play2 项目的根目录中。

编辑---我确实发现，当我明确列出一个罐子的路径时，它能够找到它：

```
val classpath = List("./plugins/myPlugin.jar").map(new File(_)) 
```

但是我想在目录中找到所有的jar文件。以下没有奏效：

```
val classpath = List("./plugins/*").map(new File(_)) 
```

这也没有：

```
val classpath = List("./plugins/*.jar").map(new File(_)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:04:58.107

如果您的目标是列出所有 jar 文件，则可以使用以下代码：

```
val classpath = List("./plugins").map(path => Option(new File(path).listFiles).getOrElse(Array.empty[java.io.File]) filter(file => file.isFile && file.getName.endsWith(".jar"))).flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:34:59.570

从 Github 上的 ClassFinder repo 上的[这个问题](https://github.com/bmc/classutil/issues/9)来看，这可能是一个错误。

我认为您需要创建一个明确的 jar 文件列表或列出文件夹中包含的文件，例如：

```
val classpath =(new File("./plugins")).listFiles.filter(_.getName.endsWith(".jar")) 
```

编辑：粗略浏览一下[GitHub 上 ClassFinder 的源代码，](https://github.com/bmc/classutil/blob/master/src/main/scala/org/clapper/classutil/ClassFinder.scala)我认为这不是错误。ClassFinder 在 jars 或 zip 文件中或直接在文件夹中搜索 .class 文件，但看起来它不会递归地混合这些东西（即，如果你给它一个文件夹，它会直接在文件夹中查找类，但它不会在文件夹中的 jars 中查找类）

# sql - 两次加入同一个表时，Rails 3.1 范围被忽略

> ID：13652589
> 
> 赞同：5
> 
> 时间：2012-11-30T20:21:55.547
> 
> 标签：sql, ruby-on-rails, activerecord, ruby-on-rails-3.1, scope

使用 rails 3.1.4 在不同的范围内两次加入同一个表时遇到问题。其中一个范围被完全忽略，包括 join 和 where 子句。此删除发生时不会出现错误或通知。

这是导致问题的简化示例：

Task 是一个标准的 rails 模型，与模型 SavedOutput 具有多态关系。SavedOuput 用作缓存来存储复杂方法的结果。

任务模型如下所示：

```
class Task < ActiveRecord::Base
  has_many :saved_outputs
  scope :saved_lates, lambda { joins(:saved_outputs).where(
    "saved_outputs.method" => "late?",
    "saved_outputs.output" => true
  )}
  scope :saved_completes, lambda { joins(:saved_outputs).where(
    "saved_outputs.method" => "complete?",
    "saved_outputs.output" => true
  )}
  ... 
```

使用此代码，我可以调用`Task.saved_lates`而不是调用诸如`Task.all.select(&:late?)`假设缓存数据是最新的。

问题是调用`Task.saved_lates.saved_completes`不起作用。我相信 Rails 的重复查询检测会启动并删除第二个范围。即使没有发生这种情况，查询仍然会失败，因为如果不使用 MYSQL 中的别名，您将无法两次连接到同一个表。

我有一个手动编写的连接和表别名的部分解决方案。

```
 scope :saved_lates, lambda { joins("INNER JOIN saved_outputs AS so1 ON so1.object_type='Task' AND so1.object_id=tasks.id").where(
    "so1.method" => "late?",
    "so1.output" => true
  )}
  scope :saved_completes, lambda { joins(INNER JOIN saved_outputs AS so2 ON so2.object_type='Task' AND so2.object_id=tasks.id).where(
    "so2.method" => "complete?",
    "so2.output" => true
  )} 
```

这个解决方案的问题是别名`so1`需要在整个项目中是唯一的。考虑到 SavedOutput 模型保存了许多不同模型的输出，我需要使用全局唯一 ID 或唯一哈希系统来标记别名。

是否有从查询中静默删除范围的解决方案？
有没有办法强制 rails 在每个标准连接上创建一个唯一的表别名？
使用带有关联符号的连接范围作为参数是不好的做法吗？

* * *

这是我正在查看的完整示例：

```
class ScopeTest < ActiveRecord::Migration
  def change
    create_table :foos do |t| 
      t.string :name
      t.boolean :active, :default => true
    end 

    create_table :bars do |t| 
      t.integer :foo_id
      t.boolean :method_value
    end 
  end
end

class Foo < ActiveRecord::Base
  has_many :bars
  scope :ones, lambda { joins(:bars).where("bars.method_value" => true) }
  scope :zeroes, lambda { joins(:bars).where("bars.method_value" => false) }
end 
```

运行范围和链接范围的结果：

```
irb(main):022:0> Foo.ones.to_sql
=> "SELECT `foos`.* FROM `foos` INNER JOIN `bars` ON `bars`.`foo_id` = `foos`.`id` WHERE `bars`.`method_value` = 1"
irb(main):023:0> Foo.zeroes.to_sql
=> "SELECT `foos`.* FROM `foos` INNER JOIN `bars` ON `bars`.`foo_id` = `foos`.`id` WHERE `bars`.`method_value` = 0"
irb(main):024:0> Foo.ones.zeroes.to_sql
=> "SELECT `foos`.* FROM `foos` INNER JOIN `bars` ON `bars`.`foo_id` = `foos`.`id` WHERE `bars`.`method_value` = 0"
irb(main):025:0> Foo.zeroes.ones.to_sql
=> "SELECT `foos`.* FROM `foos` INNER JOIN `bars` ON `bars`.`foo_id` = `foos`.`id` WHERE `bars`.`method_value` = 1" 
```

当我链接查询时，我想从两个范围中获取结果的交集。我希望 sql 具有与此相同的含义：

```
SELECT `foos`.* from `foos` 
INNER JOIN `bars` AS `bars1` ON `bars1`.`foo_id` = `foos`.`id` 
INNER JOIN `bars` AS `bars2` ON `bars2`.`foo_id` = `foos`.`id`
WHERE `bars1`.`method_value` = 1 AND `bars2`.`method_value` = 0 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:43:49.030

你怎么知道它不起作用？SQL 说正在发生什么？我只是模拟了一个模型...

```
class Foo < ActiveRecord::Base
  has_many :bars
  scope :one, lambda { joins(:bars).where('x = 1') }
  scope :two, lambda { joins(:bars).where('x = 2') }
end 
```

并在控制台中运行它......查询看起来很好......授予，它不会返回任何结果，因为条件无法满足，但一切都如我所料那样合并/链接。

```
Foo.one.two.to_sql
 => "SELECT `foos`.* FROM `foos` 
     INNER JOIN `bars` ON `bars`.`foo_id` = `foos`.`id` 
     WHERE (x = 1) AND (x = 2)" 
```

这是使用 Rails 3.2.8 ......

# c# - 多次尝试后无法打开文件

> ID：13652590
> 
> 赞同：3
> 
> 时间：2012-11-30T20:21:59.953
> 
> 标签：c#, pcap.net

我在我的应用程序中使用 PcapDotNet DLL，我遇到了一个问题：

我的应用程序需要一个 PCap 文件（Wireshark 文件）并将数据包发送到网卡。如果我多次发送一个或多个文件（通常约为 500 次），我的应用程序会崩溃并显示错误**Failed opening file C:\file.pcap**。我试图在项目论坛中询问，但开发人员不是永久在那里，所以也许其他人可以在这里帮助我。

错误原因在**inputCommunicator**中，发生错误时，此对象值为 null。请注意，这只发生在几百次迭代（大约 500 次）之后。

代码：

```
 using (PacketCommunicator inputCommunicator = selectedInputDevice.Open(65536, PacketDeviceOpenAttributes.Promiscuous, 1000))
    {
        using (mOutputCommunicator = selectedOutputDevice.Open(100, PacketDeviceOpenAttributes.Promiscuous, 1000))
        {                
            while (inputCommunicator.ReceivePacket(out packet) == PacketCommunicatorReceiveResult.Ok && _isStop) //fill the buffer with the packets from the file
            {
                using (PacketSendBuffer mSendBuffer = new PacketSendBuffer((uint)packet.Length * 4))
                {                                                                                       
                    else if (packet != null)
                    {
                        lastTime = packet.Timestamp;
                        mSendBuffer.Enqueue(packet); //put the packet in the buffer
                    }

                    mOutputCommunicator.Transmit(mSendBuffer, _isBurst); //send the packet
                    _numberOfSendPackets++;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:34:04.417

这是 WinPcap 中的一个错误。有关详细信息，请参阅[http://www.winpcap.org/pipermail/winpcap-bugs/2012-December/001547.html](http://www.winpcap.org/pipermail/winpcap-bugs/2012-December/001547.html)

# sql - 这两种 SQL 场景下的性能

> ID：13652593
> 
> 赞同：0
> 
> 时间：2012-11-30T20:22:08.160
> 
> 标签：sql, sql-server-2008-r2, sqlperformance

我假设下面的第一个调用更有效，因为它只进行一次检查以查看是否`@myInputParameter`小于 5000。

如果检查失败，我会完全避免查询。但是，我看到其他人像第二个示例一样编写代码，说它同样有效，甚至更多。

谁能告诉我哪个更快？似乎第二个会慢得多，特别是如果调用是通过大型数据集进行梳理。

第一次调用：

```
IF (@myInputParameter < 5000)
    BEGIN
        SELECT 
            @myCount = COUNT(1) 
        FROM myTable 
        WHERE someColumn=@someInputParameter
            AND someOtherColumn='Hello'

        --and so on
    END 
```

第二次调用：

```
SELECT 
    @myCount = COUNT(1) 
FROM myTable 
WHERE someColumn=@someInputParameter
    AND someOtherColumn='Hello'
    AND @myInputParameter < 5000

--and so on 
```

编辑：我使用的是 SQL Server 2008 R2，但我真的想了解哪个查询是 SQL 的“最佳实践”。我确信这两个语句之间的查询时间差异是千分之一秒，所以它不是那么关键。我只是对编写更好的 SQL 代码感兴趣。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:35:44.903

有时，SQL Server 足够聪明，可以将后者转换为前者。这表现为某些计划运算符（如过滤器或循环连接）上的“启动谓词”。这会导致查询在很小的恒定时间内快速评估。我刚刚测试了这个，顺便说一句。

您不能对所有查询都依赖它，但是一旦通过测试验证它适用于特定查询，我就会依赖它。

如果使用`OPTION (recompile)`它会变得更加可靠，因为此选项将参数值内联到查询计划中，从而导致整个查询变成持续扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:38:18.033

SQL Server 设计得很好。如果不需要，它将在不实际扫描表/索引的情况下进行文字评估。所以，我希望它们的表现基本相同。

从实践的角度来看，我认为应该使用 if 语句，特别是如果它包含多个语句。但是，这对我来说确实是一个偏好问题。对我来说，无法执行的代码在逻辑上比“应该”在没有实际命中数据的情况下执行的代码要快。

Also, there is the possibility that SQL Server should create a bad plan and actually do a hit the data. I've never seen this specific scenario with literals, but I've had bad execution plans be created.

# java - 如何将我的 GUI 状态恢复到其原始外观？

> ID：13652594
> 
> 赞同：0
> 
> 时间：2012-11-30T20:22:08.420
> 
> 标签：java, user-interface, graphics

我用 Java 为使用 2D 图形的吉他和弦查找器应用程序编写了一个 GUI。程序在画布上打开一个 .jpg 图像。然后它将每个单独的音符（音品之间的空间）绘制为带有音符名称的椭圆。该程序允许用户通过更改和弦各个音符的颜色从工具栏中选择和弦，这些和弦显示在指板上。然而，每当用户选择一个新的和弦时，之前的和弦都不会被删除。我怎样才能解决这个问题？这是我的一些代码（该程序超过 1000 行代码）。

```
 public class Fretboard extends JFrame  implements ActionListener{
        public static void main(String[] args) {
            JFrame frame = new Fretboard();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();
            frame.setVisible(true);
        }
        // Variables to be used throughout the program
        ImagePanel imageSrc;                                    
        // Declare fonts to be used
        Font font1 = new Font("SansSerif", Font.BOLD, 18);          // Font to be used for notes with # or b
        Font chordFont = new Font("SansSerif", Font.BOLD, 50);      // Font for the name of the chord displayed
        Font font = new Font("SansSerif", Font.BOLD, 20);           // Font to be used for whole note

        int h = 40, w = 26, x = 695, y = 254;

        // Declare the note variables
        // First string
        Ellipse2D E1 = new Ellipse2D.Double(x, y-110, w, h);        // E note, open 1st string
        Ellipse2D F1 = new Ellipse2D.Double(x, y, w, h);            // F note, 1st string, 1st fret
        Ellipse2D fSharp1 = new Ellipse2D.Double(x, y+125, w, h);   // F#/Gb note, 1st string, 2nd fret
        Ellipse2D G1 = new Ellipse2D.Double(x+2, y+240, w, h);      // G note, 1st string, 3rd fret

        /**
         * Create the menu bar and set title
         */

        public Fretboard() {
            // Change the title of the window
            setTitle("Fretboard Chord Finder");
            // Create a menu bar where user will be given choice of chords
            JMenuBar mb = new JMenuBar();
            setJMenuBar(mb);

            JMenu menu = new JMenu("Chords");
            // Add names of chords to the menu
            JMenuItem mi = new JMenuItem("A Major");
            mi.addActionListener(this);
            menu.add(mi);
            mi = new JMenuItem("A Minor");
            mi.addActionListener(this);
            menu.add(mi);

            Container cp = this.getContentPane();
            cp.setLayout(new FlowLayout());
            imageSrc = new ImagePanel();
            cp.add(imageSrc);
        }

        /**
         * Obtain the user's chord selection from the chord menu
         */
        public void actionPerformed(ActionEvent e) {
            String command = e.getActionCommand();
            if("A Major".equals(command))
                paintAMajor();
            if("A Minor".equals(command))
                paintAMinor();
            }

    /**
     * Displays the notes for the A Major chord when the user selects
     * "A Major" from the toolbar.
     */
    public void paintAMajor() {
        // Declare local variables
        Graphics g = getGraphics();
        Graphics2D g2 = (Graphics2D) g;

        // Display the name of the chord
        g2.drawString("A Major Chord", 40, 150);
        g2.drawString("Notes: A, C#, E", 40, 180);

        // Display notes for the A Major chord
        // Draw the E note on the open 1st string
        // Change color to blue
        g2.setColor(Color.red);
        g2.draw(E1);
        g2.fill(E1);
        g2.setColor(Color.white);
        g2.setFont(font);
        g2.drawString("E", x+7, y-82);
        // Change color back to red
        g2.setColor(Color.red);
    }

class ImagePanel extends JPanel {
    BufferedImage image = null; 

    public ImagePanel() {
        File fretBoardFile = new File("/Users/macbook/documents/workspace/Fretboard App/Gibson_Fretboard.jpg");     // The location of the fretboard image
        // Open the image
        try {
            image = ImageIO.read(fretBoardFile);
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        setPreferredSize(new Dimension(1280, 960));
    }

    /**
     * 
     * @param bi
     */
    public ImagePanel(BufferedImage bi) {
        image = bi; 
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        // Draw the image of the fretboard on the canvas.
        // Check to see if the image is available
        if(image != null) {
            g2.drawImage(image, 25, 0, null);
        }
        else
            g2.drawRect(0, 0, getWidth()-1, getHeight()-1);

        // Draw notes
        // Draw the E note on the open 1st string
        // Change color to blue
        g2.setColor(Color.blue);
        g2.draw(E1);
        g2.fill(E1);
        g2.setColor(Color.white);
        g2.setFont(font);
        g2.drawString("E", x+7, y-82);
        // Change color back to blue
        g2.setColor(Color.blue);
} 
```

这是该计划的要点。其他一切基本上是每个单独音符的位置或显示和弦的类似方法。我被卡住了，不知道如何修复这个程序。这也是我编写的第一个 GUI。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:16:08.243

我首先想到的是使用`getGraphics()`。你应该避免使用这种方法。

Java 中的图形是无状态的。也就是说，`Graphics`用于渲染组件的上下文不能保证在循环之间是相同的。您不应该保留对`Graphics`上下文的引用。

所有的绘画都应该在组件`paint`方法的上下文中完成，最好是`JComponent#paintComponent`，因为该`paint`方法是一个复杂的方法，做很多你真的不想重复的重要工作。

我会创建某种和弦“模型”，每个实例都可以自己绘制。然后，我将创建一个能够绘制音品和和弦的视图。

**更新示例**

这是一个概念证明示例。假设吉他弦从 5（厚度）到 0（最小）开始。

我不是音乐家，我没有节拍或节奏，所以我可能犯了一些根本性的错误。

![在此处输入图像描述](../Images/ee968e9fd375e7a231f5785433977db3.png)

```
public class TestFretBoard {

    public static void main(String[] args) {
        new TestFretBoard();
    }

    public TestFretBoard() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ChordsPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ChordsPane extends JPanel {

        public ChordsPane() {
            setLayout(new BorderLayout());
            FretPane fretPane = new FretPane();
            fretPane.setChord(new AChord());
            add(fretPane);
        }
    }

    public static interface FretBoard {

        public Rectangle getFretBounds(int index);

        public GuitarString getGuitarString(int index);

        public GuitarString[] getGuitarStrings(int... index);
    }

    public static class FretPane extends JPanel implements FretBoard {

        private static final Point BOARD_OFFSET = new Point(9, 9);
        private static final int BOARD_WIDTH = 84;
        private static final Rectangle[] FRET_BOUNDS = {
            new Rectangle(BOARD_OFFSET.x, 20, BOARD_WIDTH, 68 - 20),
            new Rectangle(BOARD_OFFSET.x, 71, BOARD_WIDTH, 113 - 71),
            new Rectangle(BOARD_OFFSET.x, 116, BOARD_WIDTH, 153 - 116),
            new Rectangle(BOARD_OFFSET.x, 156, BOARD_WIDTH, 189 - 156),
            new Rectangle(BOARD_OFFSET.x, 192, BOARD_WIDTH, 222 - 192),
            new Rectangle(BOARD_OFFSET.x, 225, BOARD_WIDTH, 254 - 225),
            new Rectangle(BOARD_OFFSET.x, 257, BOARD_WIDTH, 289 - 257),
            new Rectangle(BOARD_OFFSET.x, 287, BOARD_WIDTH, 312 - 287),
            new Rectangle(BOARD_OFFSET.x, 315, BOARD_WIDTH, 338 - 315),
            new Rectangle(BOARD_OFFSET.x, 341, BOARD_WIDTH, 364 - 341),
            new Rectangle(BOARD_OFFSET.x, 367, BOARD_WIDTH, 389 - 367),
            new Rectangle(BOARD_OFFSET.x, 392, BOARD_WIDTH, 412 - 392),};
        private static final GuitarString[] GUITAR_STRINGS = {
            new GuitarString(85 - BOARD_OFFSET.x, 1),
            new GuitarString(72 - BOARD_OFFSET.x, 1),
            new GuitarString(58 - BOARD_OFFSET.x, 1),
            new GuitarString(43 - BOARD_OFFSET.x, 2),
            new GuitarString(29 - BOARD_OFFSET.x, 2),
            new GuitarString(15 - BOARD_OFFSET.x, 2),};
        private BufferedImage background;
        private Chord chord;

        public FretPane() {
            try {
                background = ImageIO.read(new File("fretboard02.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        public Chord getChord() {
            return chord;
        }

        public void setChord(Chord chord) {
            this.chord = chord;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g2d.drawImage(background, x, y, this);
                Chord chord = getChord();
                if (chord != null) {
                    g2d.translate(x, y);
                    chord.paint(this, g2d);
                    g2d.translate(-x, -y);
                }
            }
            g2d.dispose();
        }

        @Override
        public Rectangle getFretBounds(int index) {
            Rectangle bounds = null;
            if (index >= 0 && index < FRET_BOUNDS.length) {
                bounds = FRET_BOUNDS[index];
            }
            return bounds;
        }

        @Override
        public GuitarString getGuitarString(int index) {
            GuitarString gs = null;
            if (index >= 0 && index < GUITAR_STRINGS.length) {
                gs = GUITAR_STRINGS[index];
            }
            return gs;
        }

        @Override
        public GuitarString[] getGuitarStrings(int... indices) {
            List<GuitarString> strings = new ArrayList<GuitarString>(indices.length);
            for (int index : indices) {
                strings.add(getGuitarString(index));
            }
            return strings.toArray(new GuitarString[strings.size()]);
        }
    }

    public static class GuitarString {

        private int x;
        private int width;

        public GuitarString(int x, int width) {
            this.x = x;
            this.width = width;
        }

        public int getX() {
            return x;
        }

        public int getWidth() {
            return width;
        }
    }

    public interface Chord {

        public String getName();

        public void paint(FretBoard board, Graphics2D g2d);
    }

    public abstract class AbstractChord implements Chord {

        public abstract int[] getFrets();

        public abstract GuitarString[] getGuitarStrings(FretBoard board, int fret);

        @Override
        public void paint(FretBoard board, Graphics2D g2d) {
            for (int fret : getFrets()) {
                Rectangle fretBounds = board.getFretBounds(fret);
                // Guitar Strings start at 5 (thickest) to 0 (smallest)
                GuitarString[] guitarStrings = getGuitarStrings(board, fret);

                int y = fretBounds.y + (fretBounds.height / 2);

                g2d.setColor(Color.RED);
                Ellipse2D dot = new Ellipse2D.Float(0, 0, 10, 10);

                for (GuitarString gs : guitarStrings) {
                    int x = ((gs.x + fretBounds.x) + (gs.width / 2)) - 5;
                    g2d.fill(getDot(dot, x, y - 5));
                }
            }
        }

        public Shape getDot(Ellipse2D dot, int x, int y) {

            PathIterator pathIterator = dot.getPathIterator(AffineTransform.getTranslateInstance(x, y));
            Path2D path = new Path2D.Float();
            path.append(pathIterator, true);

            return path;

        }
    }

    public class AChord extends AbstractChord {

        private int index;

        @Override
        public String getName() {
            return "A";
        }

        @Override
        public int[] getFrets() {
            return new int[]{1};
        }

        @Override
        public GuitarString[] getGuitarStrings(FretBoard board, int fret) {
            GuitarString[] strings = new GuitarString[0];
            switch (fret) {
                case 1:
                    strings = board.getGuitarStrings(3, 2, 1);
                    break;
            }
            return strings;
        }

    }
} 
```

很多工作都涉及到图像和 UI 之间的映射，这你要自己弄清楚，我打开 PhotoShop 并手动测量所有点。如果你自己画指板，它会变得更容易。

基本概念围绕“和弦”展开。一个和弦有一个名字，可以自己画。我已经为我的`Chord`界面创建了一个简单的抽象实现，它占用了大量的腿部工作并且更容易创建新的和弦（因为你只需要为它提供构成该和弦的每个音品的音品和弦）

我还建议您通读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:42:52.783

一种方法是在每次调用paintComponent 时从头开始绘制所有内容。无条件绘制指板图像，在paintComponent中移动绘制选中线的代码，使其根据某个变量绘制线，并让actionListner将该变量设置为选中线。

# linux-kernel - 知识管理开发/测试环境

> ID：13652595
> 
> 赞同：1
> 
> 时间：2012-11-30T20:22:10.097
> 
> 标签：linux-kernel, kernel

我运行 Gentoo，并在拥有完整开发环境的主机操作系统上编译了一个树外网络内核模块。然后，我将这些内核模块复制到 KVM 的客户操作系统上，并在其中加载和测试它们。

问题是，每次我在主机操作系统和客户操作系统上升级内核时，我都必须对内核源的头文件进行一些小的更改，因为我在主机操作系统上编译并在客户操作系统上运行。我还需要确保主机和来宾运行相同的内核版本，但是，内置模块存在细微差别（即主机操作系统设置用于虚拟化、视频等......而来宾操作系统略有不同包括将环形缓冲区输出到主机操作系统的串行控制台）。所以大多数情况下它是来自主机的相同.config，我将它复制给来宾。

我最担心的是，我想知道这是否可能对我的 KM 的稳定性/测试产生影响，因为我在一个上编译并在另一个上运行。我在做这件事时没有遇到重大问题，我猜我的东西糟糕的时候，我发现到目前为止它是我的代码。

我的来宾操作系统中没有完整的开发环境，因为我在定制我的桌面和脚本/工具方面付出了很多努力，以便我在上面运行。我的客户操作系统是最小的 Gentoo 安装，只有我需要测试和调试的工具。

所以我就是这样做的，我想知道更有经验的开发人员是否有更好的方法来进行内核开发/测试以及更简单的内核升级方法。

# php - 将 PHP 日期时间字符串转换为 MySQL 日期时间

> ID：13652597
> 
> 赞同：1
> 
> 时间：2012-11-30T20:22:29.370
> 
> 标签：php, mysql, datetime

我正在尝试使用以下`PHP`日期时间更新表中的日期时间字段：

```
$datetime = date('d/m/Y H:i:s'); 
```

不幸的是，表中的日期时间字段是`NULL`

如何使用 更新日期时间字段`$datetime`？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:23:47.267

`Y-m-d H:i:s`无论如何，您可以在 SQL 查询中使用正确的格式`NOW()`

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:25:01.763

```
$datetime = date('Y-m-d H:i:s'); 
```

将工作。DATETIME 列必须采用**Ymd H:i:s**格式，而不是**dmY H:i** :s 格式。

从[手册](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)：

> DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:24:18.923

正确的格式是`Y-m-d H:i:s`.

# conditional-statements - 如何使用条件变量在 Cognos 中打印特定页面

> ID：13652600
> 
> 赞同：0
> 
> 时间：2012-11-30T20:22:49.590
> 
> 标签：conditional-statements, cognos

我在 Cognos 报告中有五封信（五页）。这些信件是对公司收到的 NSF 检查的回应。根据 NSF 文件中存在的条件，每个字母都不同。我需要根据这些条件打印这些字母。例如——如果我从未有过 NSF 检查的客户。我想打印一封漂亮的信（第 1 页）。如果客户进行过其他 NSF 检查，则为字母 2（第 2 页），依此类推。我创建了以下变量-

```
IF [Main].[RETURN_REASON_CD] = 'FINAL' Then '1' Else (
IF [Main].[RETURN_REASON_CD] = 'FIRST' AND [Main].[METHOD_OF_DRAFT_OVR] = 'ACHDA' Then '2' Else (
IF [Main].[RETURN_REASON_CD] = 'FIRST' AND [Main].[METHOD_OF_DRAFT_OVR] <> 'ACHDA' Then '3' Else (
IF [Main].[RETURN_REASON_CD] NOT IN( 'FIRST', 'FINAL') AND [Main].[METHOD_OF_DRAFT_OVR] = 'ACHDA' Then '4' Else  '5'))) 
```

我需要在值 1、2、3、4、5 中指定什么才能正确打印。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:53:35.087

创建一个具有与您类似的 case 表达式的变量...

案例当 Expr 1 然后“显示第 1 页”时，当 Expr 2 然后“显示第 2 页”等等...否则“显示所有页面”或任何你想用你的 else 做的事情结束

您需要确保在变量页面上将文字值完全列为输出值。这个很重要。

从报告页面 1 开始并切换到结构视图，这样可以轻松导航到 Page 对象。一旦您进入页面对象，我相信会有一个渲染变量和/或条件样式，具体取决于您的 Cognos 版本。如果它是一个渲染变量，它很容易......您只需选择您创建的变量并选择哪些文字值将触发渲染真实条件。因此，如果您在第 1 页上，那么您将从变量中选择第 1 页作为真实条件，并且只有在该条件为真时才会呈现页面。

如果没有渲染变量，那么您必须在创建变量窗格后导航到变量窗格，一次选择一个输出值，这将带您进入条件模式（更改颜色）。当您在条件探索中选择“第 1 页”时，您将通过结构视图导航到第 1 页并将可见 = 属性设置为 true，然后导航到所有其他页面并将它们设置为 false（您最初可以将所有页面默认为 false如果需要，请保存此步骤）.... 您将对所有可能的输出值重复此练习。不会花很长时间，但它更乏味，这就是他们创建“渲染变量”的原因

条件资源管理器允许您选择一个输出值，然后在报告中导航并更改样式可见性属性……这些样式/可见性属性仅在变量条件发现该输出值为真时才会发生。它基本上是一个可视的 if/case 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:07:54.447

我建议您创建五个布尔变量，然后转到页面资源管理器，单击“报告页面”文件夹，然后会显示您的五个页面的列表。单击每个页面并设置 Render 变量。

当渲染变量评估为 TRUE 时，您的页面将被渲染。当它是假的时，它不会。

可能有一种方法可以像您所做的那样使用一个变量来做到这一点，但我现在想不出。您可能想查看页面集。或者，您可以将所有页面压缩成一页，并使用条件样式隐藏每一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:20:49.727

您可以将单个页面与条件块一起使用，因此您只需要一个具有五个不同值的字符串变量，而不是五个布尔变量。

# php - 从 WordPress 中的 URL 中提取参数

> ID：13652605
> 
> 赞同：40
> 
> 时间：2012-11-30T20:23:01.217
> 
> 标签：php, wordpress

我正在尝试使用 URL 将参数传递给 WordPress 站点 - 例如：

`www.fioriapts.com/?ppc=1`将是 URL。

我打算在 functions.php 文件中编写一个函数，但如何在 WordPress 中提取参数的机制超出了我的范围。我找到了很多关于如何使用该函数将参数添加到 URL 的示例，`add_query_arg()`但没有找到关于如何提取参数的任何示例。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2018-02-22T15:12:23.110

为什么不直接使用 WordPress`get_query_var()`功能？[WordPress 代码参考](https://developer.wordpress.org/reference/functions/get_query_var/)

```
// Test if the query exists at the URL
if ( get_query_var('ppc') ) {

    // If so echo the value
    echo get_query_var('ppc');

} 
```

由于 get_query_var 只能访问 WP_Query 可用的查询参数，为了访问像“ppc”这样的自定义查询变量，您还需要在插件中注册此查询变量或`functions.php`在初始化期间添加一个操作：

```
add_action('init','add_get_val');
function add_get_val() { 
    global $wp; 
    $wp->add_query_var('ppc'); 
} 
```

或者通过向 query_vars 过滤器添加一个钩子：

```
function add_query_vars_filter( $vars ){
  $vars[] = "ppc";
  return $vars;
}
add_filter( 'query_vars', 'add_query_vars_filter' ); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-11-30T20:34:08.837

通过 URL 传递参数时，您可以将值作为 GET 参数检索。

用这个：

```
$variable = $_GET['param_name'];

//Or as you have it
$ppc = $_GET['ppc']; 
```

不过，首先检查变量更安全：

```
if (isset($_GET['ppc'])) {
  $ppc = $_GET['ppc'];
} else {
  //Handle the case where there is no parameter
} 
```

这里有一些关于 GET/POST 参数的阅读，你应该看看： http: [//php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

编辑：我看到这个答案在做出几年后仍然有很多流量。*请*阅读此答案所附的评论，尤其是来自@emc 的输入，他详细介绍了安全地实现此目标的 WordPress 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T20:55:25.157

你可以试试这个功能

```
/**
 * Gets the request parameter.
 *
 * @param      string  $key      The query parameter
 * @param      string  $default  The default value to return if not found
 *
 * @return     string  The request parameter.
 */

function get_request_parameter( $key, $default = '' ) {
    // If not request set
    if ( ! isset( $_REQUEST[ $key ] ) || empty( $_REQUEST[ $key ] ) ) {
        return $default;
    }

    // Set so process it
    return strip_tags( (string) wp_unslash( $_REQUEST[ $key ] ) );
} 
```

这是函数中发生的事情

这里发生了三件事。

*   首先我们检查请求密钥是否存在。如果不是，则只返回一个默认值。
*   如果已设置，那么我们首先通过执行 wp_unslash 删除斜线。在这里阅读为什么它比 stripslashes_deep 更好。
*   然后我们通过做一个简单的 strip_tags 来清理这个值。如果您期望参数中的富文本，则通过 wp_kses 或类似函数运行它。

所有这些信息以及有关该功能背后思想的更多信息都可以在此链接上找到[https://www.intechgrity.com/correct-way-get-url-parameter-values-wordpress/](https://www.intechgrity.com/correct-way-get-url-parameter-values-wordpress/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-13T09:49:21.120

在回调函数中，使用 $request 参数

```
$parameters = $request->get_params();
echo $parameters['ppc']; 
```

# android - Eclipse + Android GUI/UI 开发合适的策略

> ID：13652612
> 
> 赞同：-1
> 
> 时间：2012-11-30T20:23:24.493
> 
> 标签：android, xml, eclipse, user-interface

我将尝试以不同的方式问这个问题：

有很多关于 Android 中的 GUI/UI 开发的 SO 问题，据我所知，因为我使用的是 Eclipse（不幸的是不能使用 PhoneGap 或者我认为这会容易得多）我必须编辑 XML 文件来改变我的图形用户界面/用户界面。如果是这种情况，那么你们大多数人的做法是在 Photoshop 中设计程序，然后以某种方式拼接它以便可以使用 XML 来处理它？这就是我不明白我正在使用 Eclipse 提供的编辑器，但我不想只有基本的无聊框和文本字段。我希望定制比这更容易。

就像基本上没有其他方法可以做到这一点，而不是手动更改 xml 代码并查看哪些有效，哪些无效？（我使用的是 ADT 而不是 DroidDraw，所以我已经创建了我的按钮等，这不是问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:49:05.453

如果你愿意改变你的整个环境，另一个选择是看看你是否喜欢使用 IntelliJ Idea，因为在第 12 版（现在可以预览，下个月发布）中，包含了一个 android UI 设计器，并且显示它的视频看起来很有希望。 [http://blogs.jetbrains.com/idea/2012/06/android-ui-designer-coming-in-intellij-idea-12/](http://blogs.jetbrains.com/idea/2012/06/android-ui-designer-coming-in-intellij-idea-12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:10:13.463

如果那是你选择做的，它可以做到。你这样做的方式是为界面做任何你想要的设计，然后使用切片工具切出所有不同的部分，然后保存它转到“文件->保存为网络并选择”导出为 html“和它会自动将每个切片保存为单独的图片和正确的 html 以将其全部调用到正确的位置...您只需进入并将链接/功能添加到按钮和您想要提供的任何其他元素单击时的结果。我知道您说您使用的是 XML，但我相信您可以对其进行调整以正确调用所有内容...但是如果可能的话，您可能想在 illustrator 中执行操作并将图像导出为 html5 图像并使用带有 javascript 的画布来调用所有 %100 代码的图形......那里'

# .net - 在 C++ .net 计时器中使用时加号等号是什么

> ID：13652617
> 
> 赞同：2
> 
> 时间：2012-11-30T20:23:32.043
> 
> 标签：.net, timer, c++-cli

我正在尝试学习如何使用 C++ .net 计时器。在此处给出的示例中：

[http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)

在它说的代码中：

```
// Hook up the Elapsed event for the timer.
aTimer->Elapsed += gcnew ElapsedEventHandler( Timer1::OnTimedEvent ); 
```

似乎 += 已重载。在这种情况下是什么意思？

我也不明白为什么在链接中的示例中，计时器重复启动和停止，如其输出所示：

```
 The Elapsed event was raised at 5/20/2007 8:42:27 PM
 The Elapsed event was raised at 5/20/2007 8:42:29 PM
 The Elapsed event was raised at 5/20/2007 8:42:31 PM 
```

据我了解，它应该只启动和停止一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:24:58.300

它正在为计时器的 Elapsed 事件添加一个事件处理程序。

这将类似于：

```
aTimer->Elapsed.AddHandler(gcnew ElapsedEventHandler(Timer1::OnTimedEvent)); 
```

如果有这样的功能。

ElapsedEventHandler 的构造函数中指定的函数被计时器调用以通知用户设置的时间已经过去。

关于您的第二个问题，文档中的第一段对其进行了解释：

> 如果 Enabled 设置为 true 并且 AutoReset 设置为 false，则 Timer 仅引发 Elapsed 事件一次，即第一次经过的时间间隔。

很明显，逻辑上相同的语句是：如果 AutoReset 设置为 true，则 Timer 会无限期地引发 Elapsed 事件。

此外，您可以将 AutoReset 设置为 false，并从事件处理程序中调用 Reset() 函数。这允许您确保计时器回调不重叠。

# javascript - 如何使用 REST for Sharepoint 2013 删除项目

> ID：13652619
> 
> 赞同：5
> 
> 时间：2012-11-30T20:23:38.220
> 
> 标签：javascript, sharepoint, rest, sharepoint-2013

我正在创建一个 Sharepoint 应用程序，并且我仅限于使用 Javascript（包括 jQuery）和 REST 端点。我想使用 Web 应用程序从主机中删除一个项目，但我收到一个错误 ( `403: FORBIDDEN`)。这是我到目前为止的代码：

```
executor = new SP.RequestExecutor(appweburl);
executor.executeAsync({
    url: appweburl + "/_api/SP.AppContextSite(@target)/web/lists/getbytitle('" + currentListTitle + "')/items(" + result.Id + ")/?@target='" + hostweburl + "'",
    method: "POST",
    headers: {
               "accept": "application/json",
               "X-RequestDigest": ?????
               "IF-MATCH": "*",
               "X-HTTP-Method": "DELETE"
             },
    success: onDeleteItemSuccess,
    error: onDeleteItemFail
}); 
```

现在我发现这`X-RequestDigest`是强制性的，我找到了一些从 REST 中获取它的调用：

```
$.ajax({
    url: appweburl + "/_api/SP.AppContextSite(@target)/contextinfo/?@target='" + hostweburl + "'",
    type: "POST",
    contentType: "application/x-www-url-encoded",
    dataType: "json",
    success: function (data) {
        if (data.d)
        {
            digestValue = data.d.GetContextWebInformation.FormDigestValue;
            alert(digestValue);
        }
    },
    error: function (xhr) {
        alert(xhr.status + ': ' + xhr.statusText);
    }
}); 
```

但它根本不起作用（这可能是因为此代码适用于 Sharepoint 2010）并且它会不断给我一条`403: FORBIDDEN`消息。

有谁知道如何使用 REST 从其中一个列表中删除列表项（我不能使用/编辑 javascript 之外的任何代码！）？

任何帮助都会得到帮助，如果您需要任何信息，请随时提出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T01:32:06.347

该代码不能用于 SharePoint 2010，因为 _api 是 SP 2013 的新内容。

[更新] 也许您的意思是您的代码在 SP 2013 预览版中运行？在 SP2013 RTM 中，您需要使用：

```
"Accept": "application/json; odata=verbose" 
```

# php - CodeIgniter 2，DataMapper 验证规则

> ID：13652625
> 
> 赞同：1
> 
> 时间：2012-11-30T20:24:05.757
> 
> 标签：php, codeigniter, validation, codeigniter-datamapper

我将 CodeIgniter 2 与[DataMapper ORM](http://datamapper.wanwizard.eu/)一起使用。对于用户，我有`confirm_password`和`confirm_email`字段（以及其他字段），它们都不是数据库中的字段（表`users`没有这些字段），但它只是在注册表单上显示：

我也有后端，这两个字段（`confirm_password`和`confirm_email`）在表单中不存在。

```
public $validation = array(
'first_name' => array(
    'label' => 'lang:common_first_name',
    'rules' => array('required', 'trim')
),
'last_name' => array(
    'label' => 'lang:common_last_name',
    'rules' => array('trim')
),
'email' => array(
    'label' => 'lang:common_email',
    'rules' => array('required', 'trim', 'unique', 'valid_email')
),
'confirm_email' => array(
    'label' => 'lang:common_confirm_email',
    'rules' => array('matches' => 'email')
),
'password' => array(
    'label' => 'lang:common_password',
    'rules' => array('required', 'min_length' => 6, 'encrypt')
),
'confirm_password' => array(
    'label' => 'lang:common_confirm_password',
    'rules' => array('matches' => 'password')
) 
```

);

如果我没有设置`confirm_email`or`confirm_email`字段，验证**器**将不会触发**匹配**规则。如果我让它们**required**，那么没有这些字段的后端会触发`confirm_email`and `confirm_password`，但它不应该。

*   是否最好包括我们在应用程序中可能拥有的所有可能的验证规则（当然是在模型中）？
*   在后端添加用户时，在控制器中更改这些规则（比如 `confirm_email`从数组中删除索引）是个好主意吗？`$validation`

我很感激任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:29:55.870

你有最新版本的ORM Mapper吗，根据文档可以添加非数据库字段。

[http://stensi.com/datamapper/pages/validation.html](http://stensi.com/datamapper/pages/validation.html)

> 此外，您现在可以为非数据库表字段添加验证规则，例如“确认电子邮件地址”或“确认密码”。例如：

并且您不需要确认字段的**必需**规则 - 因为它们表明在 DB 中需要归档，因此 DB 错误）， - **matches**属性将对匹配的字段进行*所需*的验证（例如，如果它不匹配它将抛出错误。）换句话说，您只需要在“电子邮件”字段中输入，如果提交的内容不匹配，confirmation_email 将抛出错误。在空白字段中，您确实需要表明电子邮件是必需的。

最后 - 您可以删除索引，但通常这不是一个好主意。相反，如果上述方法失败，我会在控制器中添加表单验证规则。

# java - Java，从字符串中获取一个数字，并将其分配给一个单独的变量 - Java

> ID：13652627
> 
> 赞同：-3
> 
> 时间：2012-11-30T20:24:16.160
> 
> 标签：java, string, int

好的，所以我正在制作一个程序，我想输入车牌#（数字和字母），我想做的是，在一行中输入，并能够分隔数字并且将输入中的字母转换成两个不同的变量，一个是 Int，一个是 String。

```
public class CarRental {
   public static String model;
   public static String plate;
   public static int platenum;
   public static void main(String[] args){
      Scanner input = new Scanner(System.in);
      System.out.println("Car Model:");
      model = input.nextLine();
      System.out.println("License Plate: ");
      plate = input.nextLine();
        ... 
```

我想将输入中的数字分配给 int 并将字符保留在字符串盘中？我能做到这一点的方法是什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:26:52.360

您通常将正则表达式用于这些类型的事情。看看 Java 正则表达式 (http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:58:21.687

使用这个： [如何在字母和数字之间（或数字和字母之间）分割字符串？](https://stackoverflow.com/questions/8270784/how-to-split-a-string-between-letters-and-digits-or-between-digits-and-letters)

像这样的例子：

```
licensePlate = "JGY7433";

licensePlateLetters = licensePlate.split("(?<=\\D)(?=\\d)|(?<=\\d)(?=\\D)")[0];
licensePlateNumber = Integer.parseInt(licensePlate.split("(?<=\\D)(?=\\d)|(?<=\\d)(?=\\D)")[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:34:20.190

下面是一个使用正则表达式的例子：

```
String s = "A1B2C3";
List<String> letters = new ArrayList<String>();
List<Integer> numbers = new ArrayList<Integer>();
Pattern pLetters=Pattern.compile("([A-Za-z])"), pNumbers=Pattern.compile("(\\d)");
Matcher mLetters=pLetters.matcher(s), mNumbers=pNumbers.matcher(s);
while (mLetters.find()) { letters.add(mLetters.group(1)); }
while (mNumbers.find()) { numbers.add(Integer.parseInt(mNumbers.group(1))); }
System.out.println("OK: letters=" + letters); // => OK: letters=[A, B, C]
System.out.println("OK: numbers=" + numbers); // => OK: numbers=[1, 2, 3] 
```

# c - 从文件中读取每一行并将该行拆分为 C 中的字符串和数组

> ID：13652631
> 
> 赞同：0
> 
> 时间：2012-11-30T20:24:32.077
> 
> 标签：c, arrays, file, binary, heap

**家庭作业**- 我有一个任务是编写一个读取文件的程序。该文件如下所示：

```
B 34 55 66 456 789 78 59 2 220 366 984 132 2000 65 744 566 377 905 5000
I 9000
I 389
Dm
DM 
```

从数字数组`B`构建二进制堆的位置（B后面的数字。我将一个数字插入数组/堆Dm是删除最小值，DM是删除最大值。

我已经为堆编写了代码，并且可以用`random numbers`. 我的问题是阅读`first line`并将其解析为 a`string B`和`array`.

我曾尝试使用以下代码，但显然它不起作用。

```
char line[8];
char com[1];
int array[MAX] //MAX is pre-defined as 100

FILE* fp = fopen( "input_1.txt", "r" );
if( fp )
{
    while( fgets ( line, sizeof(line), fp ) != NULL  )
    {
        sscanf(line, "%s" "%d", &com, &array );
        ... //Following this, I will have a nested if that will take
        each string and run the appropriate function.

        if ( strcmp( com, "B" ) == 0 )
        {
            fill_array( array, MAX );
            print_array( array, MAX );
        } 
```

我总共 3 天阅读了大约 6 个小时，但找不到解决问题的方法。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:52:48.980

这是一个小程序，它将打开一个文件，读出 1 行，然后将它找到的内容拆分为空格：

```
void main()
{
    char str[50];
    char *ptr;
    FILE * fp = fopen("hi.txt", "r");
    fgets(str, 49, fp);             // read 49 characters
    printf("%s", str);              // print what we read for fun
    ptr = strtok(str, " ");         // split our findings around the " "

    while(ptr != NULL)  // while there's more to the string
    {
        printf("%s\n", ptr);     // print what we got
        ptr = strtok(NULL, " "); // and keep splitting
    }
    fclose(fp);
 } 
```

那么我是否要在包含以下内容的文件上运行它：

```
B 34 55 66 456 789 78 59 2 220 
```

我可以期待看到：

```
B 34 55 66 456 789 78
B 
34
55 
66
456
789
78 
```

我想你可以看到如何修改它来帮助自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:53:08.347

首先，`line`数组的大小可能应该大于 8，可能类似于`char line[256]`. 数组也是如此`com`，它应该至少有 3 个字符。

```
char line[256];
char com[3]; 
```

您必须逐行读取文件，`fgets(line, sizeof(line), fp)`并使用`strtok()`将命令与命令参数分开。

```
char separators[] = " ";
fgets(line, sizeof(line), fp);

char * p = strtok(line, separators);    // p will be a pointer to the command string
strncpy(&com, p, sizeof(com));    // copy the command string in com

// If the command is B, read an array
if (strcmp(com, "B") == 0) {
    p = strtok(NULL, separators);

    while (p != NULL) {
        int value_to_add_to_your_array = atoi(p);
        // ... add code to add the value to your array
        p = strtok(NULL, separators);
    }

    // ... call the function that creates your heap
}

// ... add code to handle the other commands 
```

这个想法是逐行读取文件，然后对于每一行首先读取命令并根据其值确定应该以哪种方式读取该行的其余部分。

在上面的代码中，我考虑了`B`命令，为此我添加了读取数组的代码。

# php - 支付成功后无法重定向商家网站

> ID：13652632
> 
> 赞同：0
> 
> 时间：2012-11-30T20:24:35.693
> 
> 标签：php, paypal, paypal-sandbox

即使我在网站支付首选项下的沙箱中打开重定向 URL，我也无法在成功支付后重定向商家网站。

请给出一个解决方案，以便在付款成功后使用 Paypal 沙箱重定向到商家网站。我已经打开了重定向 url 选项，但我仍在继续“加载...”过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:30:38.330

我假设您想要一个 PHP 答案，因为您将它发布在 PHP 标记下。尝试：

```
<?php
//http://www.php.net/manual/en/function.header.php
header("Location: http://www.example.com/"); /* Redirect browser */
/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

唯一的问题是在 header() 函数之前不能有任何打印输出（echo、print_r 或任何 html 输出）。否则它将无法正常工作。如果您已经有一些东西但仍想重定向，请检查使用 javascript 的重定向。

# c# - 检查是否在文本文件中找到项目

> ID：13652642
> 
> 赞同：1
> 
> 时间：2012-11-30T20:25:20.887
> 
> 标签：c#, duplicates, streamwriter

如何检查文本文件是否包含列表框中的项目。停止保存重复项。我不确定我会添加什么。这在按钮单击事件上调用。例如，如果发现重复，我可以显示`MessageBox.Show ("duplicate error");`

```
 using (StreamWriter writer = new StreamWriter("test.txt", true))
        {
            foreach (object item in listBox2.Items)
            {
                writer.WriteLine(item.ToString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:29:41.577

在写入“test.txt”之前，枚举其内容：

```
var fileLines = File.ReadAllLines("test.txt");
List<string> fileItems = new List<string>(fileLines); 
```

然后在编写每个项目之前，检查列表是否包含它：

```
using (StreamWriter writer = new StreamWriter("test.txt", true))
{
    foreach (object item in listBox2.Items)
    {
        if (fileItems.Contains(item))
            // Do something, break, etc.
        else
            writer.WriteLine(item.ToString());
    }
} 
```

**编辑：**

根据建议，您可以使用 a`HashSet`而不是 a`List`来提高性能，因为它只能包含唯一值。

另一个改进可能是在将任何内容写入文件之前检查是否存在任何重复项。我在下面的示例中的 LINQ 语句中做到了这一点：

```
var fileLines = File.ReadAllLines("test.txt");
HashSet<string> fileItems = new HashSet<string>(fileLines);

using (StreamWriter writer = new StreamWriter("test.txt", true))
{
    bool duplicateFound = fileItems.Any(fi => listBox1.Items.Cast<string>().Any(i => i == fi));

    if (duplicateFound)
        MessageBox.Show("Duplicate items found.");
    else
        foreach (object item in listBox1.Items)
            writer.WriteLine(item.ToString());
} 
```

**编辑2：**

正如@Servy 建议的那样，列表框可​​能包含重复项，这也应该考虑在内。此外，我的 HashSet 实现低于标准。因此，在第三个示例中，我首先检查列表框是否包含重复项，然后检查是否有任何列表框项已在文件中。HashSet 的使用也更高效，因为我没有迭代它。

```
var fileLines = File.ReadAllLines("test.txt");
HashSet<string> fileItems = new HashSet<string>(fileLines);
List<string> duplicateListboxItems = listBox1.Items.Cast<string>().GroupBy(l => l).Where(g => g.Count() > 1).Select(g => g.Key).ToList();
if (duplicateListboxItems.Count > 0)
{
    MessageBox.Show("The listbox contains duplicate entries.");
    return;
}

bool duplicateFound = false;
List<string> outputItems = new List<string>();
foreach (string item in listBox1.Items)
{
    if (fileItems.Contains(item))
    {
        MessageBox.Show(String.Format("The file has a duplicate: {0}", item));
        duplicateFound = true;
        break;
    }
    outputItems.Add(item);
}

if (duplicateFound)
    return;

using (StreamWriter writer = new StreamWriter("test.txt", true))
{
    foreach (string s in outputItems)
        writer.WriteLine(s);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:29:08.337

```
string filePath = "test.txt";
var existingLines = new HashSet<string>(File.ReadAllLines(filePath));

var linesToWrite = new List<string>();
foreach (string item in listBox2.Items)
{
    if (existingLines.Add(item))
    {
        linesToWrite.Add(item);
    }
    else
    {
        //this is a duplicate!!!
    }
}

File.AppendAllLines(filePath, linesToWrite); 
```

# .net - .Net 3.5 和 SQL Server 2005 选择 DAL 技术

> ID：13652644
> 
> 赞同：2
> 
> 时间：2012-11-30T20:25:52.630
> 
> 标签：.net, entity-framework, orm, .net-3.5, data-access-layer

我有一个 .Net 3.5 Web 应用程序，需要更改旧代码以使用 DAL 技术。我需要一些关于选择 DAL 的利弊的帮助。我知道 Linq to SQL，但听说它是一种古老而垂死的技术和 EF 4（但由于我使用的是 .Net 3.5，我不能使用它吗？）。旧的 EF（1.0？）可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:29:50.783

.NET 3.5 中的 EF 1.0，委婉地说，......几乎无法使用。不要这样对自己...

是的，Linq-to-SQL 没有进一步开发 - 但它速度快，易于使用 - 它**可以正常工作**！它会让您第一次“尝到”如何使用 LINQ 进行数据库查询 - 您以后可以随时将其升级到 EF 4/5/6！

其他严肃的选择是[Dapper-Dot-Net](http://code.google.com/p/dapper-dot-net/)作为一个极其简单的“微 ORM”（或其他）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:31:03.500

是的，你是对的，你不能在 .Net 3.5 上使用 EF4，但是还有另一种类似的技术，顺便说一下，比 EF 更古老，称为 NHibernate

# html - 网站在 Opera 和 Firefox 中不显示

> ID：13652649
> 
> 赞同：0
> 
> 时间：2012-11-30T20:26:15.167
> 
> 标签：html, css, firefox, opera

我知道有人问过这个问题，但我还没有找到我的问题的答案。

我的网站[http://www.rastorant.com](http://www.rastorant.com)没有在 Opera 和 Firefox 中显示，css 和一些 html 由于某种原因不存在。我已经多次验证了该网站，它在 Safari、Chrome 和 IE 中都能完美运行。该网站使用保加利亚语，但非常简单。

有六张卡片链接到网站的其余部分，它们按以下顺序排列：

图库、菜单、联系信息、生日、活动、新年。

如果您查看源代码，则 html 非常短，并且所有页面的 css 都是相同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T20:32:53.153

您`\`在您的网址中使用，这会在 Firefox 中导致 404。改为使用`/`。

例如使用

```
<link href="stylesheets/style.css" rel="stylesheet" style="text/css"> 
```

代替

```
<link href="stylesheets\style.css" rel="stylesheet" style="text/css"> 
```

# python - matplotlib 绘图数组大小限制？

> ID：13652650
> 
> 赞同：2
> 
> 时间：2012-11-30T20:26:24.380
> 
> 标签：python, matplotlib, plot

我创建了一个程序，每半秒左右从串行端口上的设备检索数据。然后，它将该数据附加到设置数据点的数组中，然后更新绘图。一切都很好，直到它运行了一个小时左右，此时程序停止响应。

有谁知道这个数组是否有大小限制？如果有人对处理可能是数百万点的数据集有任何想法，我很想听听你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:38:31.450

使用下面的代码，我能够让 matplotlib 显示一千万个点的简单图表。我怀疑问题不在于数组大小。

```
import numpy as np
import matplotlib.pyplot as plt
import random

nsteps = 10000000
draws = np.random.randint(0,2,size=nsteps)
steps = np.where(draws>0,1,-1)
walk = steps.cumsum()
plt.plot(np.arange(nsteps), np.array(walk), 'r-')
plt.title("Big Set Random Walk with $\pm1$ steps")
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:44:34.230

似乎有一些限制。我刚试过

```
import pylab
import numpy as np

n = 10000000 # my code works fine for n = 1000000

x = np.random.normal(0,1,n)

pylab.plot(x)

pylab.show() 
```

并得到以下错误：

```
OverflowError: Agg rendering complexity exceeded. Consider downsampling or decimating your data. 
```

# css - Twitter Bootstrap：了解脚手架/网格

> ID：13652652
> 
> 赞同：1
> 
> 时间：2012-11-30T20:26:36.133
> 
> 标签：css, twitter-bootstrap

我正在使用 Bootstrap，并且在我的固定（非响应式）布局中遇到了一个奇怪的布局问题。

使用 BS 脚手架语法，我的网格中有几个嵌套的 div。通常看起来/工作正常；但是，有时当我重新加载页面时，整个页面的 div 会中断（标题导航、主要内容中的 div 等）

我无法重新创建这个问题，它似乎只是在它想要的时候按照它想要的方式行事（再次，当我刷新/重新加载时）。

* * *

以下是问题发生时的屏幕截图，以及它应该始终看起来的样子：

好 1 [http://static.inky.ws/image/3486/ss-1-good.jpg](http://static.inky.ws/image/3486/ss-1-good.jpg)

坏 1 [http://static.inky.ws/image/3485/ss-1-bad.jpg](http://static.inky.ws/image/3485/ss-1-bad.jpg)

（我不能给这个帖子添加更多的URL；如果你想看更多，上面2个可以改成3487/ss-2-good.jpg & 3484/ss-2-bad.jpg）

* * *

采取的步骤（没有积极影响）：

-重做网格

- 逐行检查我的自定义 CSS，看看删除部分是否能解决问题

- 确认网页中的路径、文件顺序等。

- 搜索，搜索并再次搜索

* * *

这是基本的 HTML 结构：

```
 <div class="container"> 

<?php require ("includes/nav-top.php") ;?>
  <!--page header -->
  <div class="row" id="">
    <div class="span6">
         ... content ...
    </div>
    <div class="span6">
        ... content ...
    </div>
  </div>
  <div class="row">
       ... content ...
  </div>
  <div class="row-fluid">
    <div class="span8">
      <div class="span6">
          ... content ...
      </div>

      <div class="span6">
          ... content ...
      </div>

      <div class="row-fluid">
        <div class="span6">
            ... content ...
        </div>
        <div class="span6">
            ... content ...
        </div>
      </div>
      <!--row-fluid--> 

    </div>
    <!--span8-->

    <div class="span4">
       ... content ...
    </div>
    <!--span4--> 

  </div>
  <!--row-->

  <div id="" class="row">
    <div class="span4">
        ... content ...
    </div>
    <div class="span4">
      ... content ...
    </div>
    <div class="span4">
     ... content ...
    </div>
  </div>
  <!--row-->

  <footer>
   ... content ...
  </footer>
</div>
<!--container--> 
```

* * *

我正在加载这样的外部文件：

头：

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
;
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>

<link rel="stylesheet" href="css/bootstrap.css">

<link rel="stylesheet" href="css/bootstrap-config.css">
<link rel="stylesheet" href="css/font-awesome.css">
<script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script> 
```

在结束 BODY 标签之前：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js"></script> 
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.js"><\/script>')</script> 
<script src="js/vendor/bootstrap.min.js"></script>
<?php require('includes/i-modal.php');?>
<?php require('includes/i-googleAnalytics.php');?>
<?php require_once('includes/i-js.php'); ?> 
```

* * *

笔记：

- 就像我说的，这可能会连续发生 10 次，然后接下来 5 次刷新/重新加载，看起来还不错

- 在上面加载的文件中有一个包含 Fancybox (i-modal.php) 以及自定义 JS (i-js.php)。这些文件中没有 CSS 或其他任何似乎可能触发此问题的文件。

-当前BS覆盖（bootstrap-config.css）为空；似乎，当我向其中添加任何内容时，问题就会出现，无论我添加的内容是否有边距或填充。

- 从我的研究看来，在其他固定布局中，我对嵌套网格部分使用“行流体”是允许的

- 到目前为止，在 Safari / OSX 上进行测试，还没有在其他浏览器中看到问题，但正如我所说，它会在它选择时发生。

* * *

所以。毕竟，我想我想知道这些症状可能对那里的知识渊博的人意味着什么。Bootstrap 非常出色，在很多方面都是我梦寐以求的工具——有没有人经历过这样的事情？

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T17:03:34.253

首先，您的布局中有一些糟糕的结构，它应该如下所示：

```
 <div class="row" id="">
    <div class="span6">
      <div class="row">
        <div class="span3">
         ... content ...
        </div>
        <div class="span3">
         ... content ...
        </div>
      </div>
    </div>
    <div class="span6">
        ... content ...
    </div>
  </div>
  <div class="row">
     <div class="span12">
       ... content ...
     </div>
  </div>
  <div class="row-fluid">
    <div class="span8">
      <div class="row-fluid">
        <div class="span6">
            ... content ...
        </div>
        <div class="span6">
            ... content ...
        </div>
      </div>
    </div>
  </div> 
```

您必须遵守以下规则：

*   不要在固定布局中使用行流体。
*   全宽跨度为 12。
*   内容必须在跨度内 - 总是
*   子跨度必须成行 - 总是
*   子行中的跨度总和必须等于容器跨度（不涉及行流体），例如。在 span8 中，您可以使用 span6 和 span2 放置一行
*   如果您不确定自己在做什么，请不要乱用 bootstrap CSS
*   检查您是否不小心以与 BS 中相同的方式命名了一些自定义 CSS 类

解决这些问题，它应该可以解决您的显示问题。

# php - 这是什么意思？

> ID：13652654
> 
> 赞同：17
> 
> 时间：2012-11-30T20:26:43.207
> 
> 标签：php

我在代码中发现了这个，它是什么意思，它和普通的 $dir 变量有什么区别？

```
global ${$dir};

$this->{$dir} = new $class(); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-30T20:28:59.810

它被称为复杂的卷曲语法。

> 任何具有字符串表示的标量变量、数组元素或对象属性都可以通过此语法包含在内。只需将表达式写成与它出现在字符串之外的相同方式，然后将其包装在 { 和 } 中。由于 { 无法转义，因此只有在 $ 紧跟 { 时才能识别此语法。使用 {\$ 获取文字 {$。

更多信息：

[http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-30T20:29:26.203

它正在获取`$dir`变量的值并找到具有该名称的变量。

所以 if `$dir = 'foo';`, then`${$dir}`与 相同`$foo`。

同样，如果`$dir = 'foo';`，则`$this->{$dir}`与 相同`$this->foo`。

[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:30:30.327

它们用于包装变量变量的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:05:49.743

动态创建的变量。例如：

```
$app = new App();
$app->someMethod('MyDB');

// global
$config = array('user' => 'mark', 'pass' => '*****');

class App {

    // MyDB instance
    protected $config;

    public function someMethod($class) {

        $dir = 'config';

        // $config = array('user' => 'mark', 'pass' => '*****')
        global ${$dir};
        // not static variable !!!
        $this->{$dir} = new $class();
    }
}

class MyDB {
  // body
} 
```

# c# - ASP.NET 为什么第 2 页上的 Gridview Paging 和其余部分都消失了？

> ID：13652657
> 
> 赞同：0
> 
> 时间：2012-11-30T20:26:45.893
> 
> 标签：c#, asp.net

我在 GridView 中有很多 ServerName 列表，所以我决定添加分页。数据在第 1 页但在第 2 页显示列表结果，其余部分不显示任何内容。我已经`OnPageIndexChanging="GridViewServer_PageIndexChanging"`在 GridViewServer 属性中。请帮忙！这是后面的c#代码，

```
protected void GridViewServer_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridViewServer.PageIndex = e.NewPageIndex;
        GridViewServer.DataBind();
    } 
```

一个GridView绑定功能代码，

```
public void BindGridView()
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Database_Shared_NotebookConnectionString"].ConnectionString);

        conn.Open();

        string sqlquery = ("SELECT * FROM tblServer");

        SqlCommand command = new SqlCommand(sqlquery, conn);

        SqlDataAdapter adp = new SqlDataAdapter(command);

        DataSet ds = new DataSet();

        adp.Fill(ds);

        GridViewServer.DataSource = ds.Tables[0];

        GridViewServer.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:31:30.967

您需要适当地设置 GridView 的数据源。如果数据源设置不正确，您不能只调用 DataBind。基本上它相当于将您的 GridView 绑定到 null （没有第 2 页）。我建议有一个负责此过程的私有方法，并且在您需要绑定时调用它。

```
private void BindGridViewServer()
{
    GridViewServer.DataSource = GetYourData();  // This should get the data
    GridViewServer.DataBind();
} 
```

从您的事件中调用此方法：

```
protected void GridViewServer_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridViewServer.PageIndex = e.NewPageIndex;
    BindGridViewServer();
} 
```

这可以通过将 GridView 作为参数传递来使其更具可扩展性，但是您还必须具有其他参数以确保该方法检索正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:35:07.743

这是一个关于自定义 GridView 分页的非常好的教程（带有示例代码）。这使得分页控件看起来像您在许多搜索引擎、论坛等上看到的熟悉的控件。

[http://geekswithblogs.net/aghausman/archive/2009/05/18/custom-paging-in-grid-view.aspx](http://geekswithblogs.net/aghausman/archive/2009/05/18/custom-paging-in-grid-view.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:49:40.237

每次页面索引更改时，您都必须将数据源提供给 GridViewServer。所以代码会是这样的

```
protected void GridViewServer_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridViewServer.PageIndex = e.NewPageIndex;
    GridViewServer.Datasource = MethodReturningDataTable();
    GridViewServer.DataBind();
} 
```

# computer-vision - 不对称内核的起源是什么？

> ID：13652658
> 
> 赞同：1
> 
> 时间：2012-11-30T20:26:46.517
> 
> 标签：computer-vision

你如何确定哪个是 4x4 内核的起源？在 3x3 中，它很容易，因为它位于中心位置。但是 4x4 不是，我需要修改内核使其对称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:31:04.280

您的输出不会与原始像素对齐。它将与原始像素对齐半个像素。然后，您可以根据需要插入原始像素位置的值。

# eclipse - 构建文件夹保持为空

> ID：13652662
> 
> 赞同：0
> 
> 时间：2012-11-30T20:26:55.550
> 
> 标签：eclipse, struts2

嗨，我正在尝试按照[此处](http://java.dzone.com/articles/struts2-tutorial-part-27)关于 Struts 的教程进行操作。我完全按照教程进行了操作，但收到了 HTTP 404 错误。我知道这个错误基本上意味着找不到资源是IDE。

我注意到“构建”文件夹实际上是完全空的——所以我猜它应该根据我的项目细节自动创建一个可运行的项目，这实际上是服务器为了运行应用程序而寻找的地方。

那么我该如何手动生成这个文件呢？我应该把所有资源都拖进去吗？Java 类、JSP 文件等等？如果不是，我如何将其配置为自动构建？

干杯

**编辑**

添加了我认为有助于解决此问题的必要内容：

**Web.xml**位于 WEB-INF 文件夹中，在 lib 旁边

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Struts2 Application</display-name>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>

</filter-mapping>
<welcome-file-list>
    <welcome-file>Login.jsp</welcome-file>
</welcome-file-list> 
```

**Struts.xml**位于Java Resources文件夹中一个名为resources的src文件夹中

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
<constant name="struts.enable.DynamicMethodInvocation" value="false" />
<constant name="struts.devMode" value="false" />

<constant name="struts.custom.i18n.resources" value="ApplicationResources" />

<package name="default" extends="struts-default" namespace="/">

<!-- 
     If we changed from the default execute() method, which struts looks for
     to say authenticate(), then we would have to specify this in the action 
     method below like this:

     <action 
             name="login" 
             method="authenticate" 
             class="net.viralpatel.struts2.LoginAction">
     </action>

-->
    <action name="login" class="net.viralpatel.struts2.LoginAction">

        <result name="success">Welcome.jsp</result>
        <result name="error">Login.jsp</result>

    </action>
</package> 
```

# facebook - 如何代表我的用户注册 Facebook 应用程序？

> ID：13652664
> 
> 赞同：1
> 
> 时间：2012-11-30T20:26:58.350
> 
> 标签：facebook

> **可能重复：**
> [如何通过 JS SDK 或 Open Graph API 以编程方式创建 Facebook 应用程序？（创建应用程序）](https://stackoverflow.com/questions/4719260/how-to-programatically-create-a-facebook-application-via-js-sdk-or-open-graph-ap)

我记得当 Disqus 启动时，它会自动为您在该服务中注册的每个站点创建 Facebook 应用程序（它们的名称类似于“DISQUS 评论 [jeremiahlee]”）。这非常好，因为它可以防止任何单个不良用户的行为损害其他用户的边缘排名。我有一个发布应用程序，我想这样做。我记得 Facebook 在过去的 F8 中谈到了这个功能，但我现在找不到关于它的文档。

更新：我找到了对[Create Application API](http://allfacebook.com/facebook-now-making-it-easier-for-applications-to-create-other-apps_b8097 "创建应用程序 API")的引用，但目前在 Facebook 开发者网站上没有任何内容。新的[Graph API 文档](https://developers.facebook.com/docs/reference/api/application/)说：“要创建、管理或删除应用程序，开发人员必须转到 App Dashboard。” Create Application API 是否仍然可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:39:10.280

据我所知，您不能按照他们的文档中所述执行此操作。我在这里寻找它，它似乎真的已经停产了。

# hibernate - 休眠保存或更新

> ID：13652665
> 
> 赞同：0
> 
> 时间：2012-11-30T20:27:13.990
> 
> 标签：hibernate

我有 2 个具有相同列的表（Customer 和 CustomerTemp）。我正在从 Customer 表中检索记录并添加到 CustomerTemp 表。检索到的记录存储为 custDetails 对象。我正在使用以下 API：

```
 void saveOrUpdate(String entityName,
                  Object object) 
```

我已经使用@Entity Annotation 声明了 2 个实体，即 Customer 和 CustomerTemp。实体名称用于 saveOrUpdate API。

```
session.saveOrUpdate("CustomerTemp", custDetails); 
```

将相同的记录添加/更新到 CustomerTemp 表中。不知何故，休眠正在客户表中添加/更新记录。

根据文档，休眠应该将记录添加到 CustomerTemp 表。不确定缺少什么。

## 更新：

出于测试目的，我创建了 2 个表（表 1 和表 2）

```
@Entity(name="mytable1")
public class table1 implements Serializable {
    private static final long serialVersionUID = 3627342236515154416L;

    @Id
    @GeneratedValue
    private int id;

    @Column(length=20)
    private String Name;
          // Getters and setters...
} 
```

* * *

```
@Entity(name="mytable2")
public class table2 implements Serializable {

    private static final long serialVersionUID = -2203149737718957786L;

    @Id
    @GeneratedValue
    private int id;

    @Column(length=20)
    private String Name;
          // Getters and setters...
} 
```

现在我已经使用 table1 创建了对象，并尝试将 saveOrUpdate 与 myTable2 实体一起使用，期望该记录将保存在 table2 中。但无论 saveOrUpdate 中提供的实体名称如何，记录始终保存到 table1。

```
 Session session = getSessionFactory().getCurrentSession();  
    Transaction tx ;

    table1 tb1 = new table1();
    tb1.setName("Shirish");
    tx = session.beginTransaction();
    session.saveOrUpdate("mytable2", tb1);
    tx.commit(); 
```

问候， - Shirish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:17:39.793

我可以使用通过克隆 java 对象指定的方法。table1 被克隆以创建新的 table2 对象。但这确实是一个复杂的过程，其中涉及多个 *-to-Many 关系。

后来我尝试使用 XML 方法在 hibernate 中定义表。详情请参阅将
[同一个 POJO 映射到 Hibernate XML 映射文件中的多个表](http://www.coderanch.com/t/492558/ORM/databases/Mapping-POJO-table-Hibernate-XML)。请注意，在其他数据库操作中使用实体之前，您可能需要使用 session.clear() 来分离实体。

欢迎任何其他方法。

在这种情况下，不需要克隆，因为我们正在定义基于相同 Java 对象的表。

问候，

希里什语

# javascript - Rally SDK 1.x - 获取首选项以扩大/缩小项目范围

> ID：13652671
> 
> 赞同：2
> 
> 时间：2012-11-30T20:27:30.550
> 
> 标签：javascript, preferences, rally

我一直致力于使用 sdk 1.32 自定义 AgileEVM 应用程序，并且我一直在使用首选项来存储用户将设置的各种值（多个计费费率、非全职资源等）。这是我创建首选项的方式：

```
_rallyDataSource.create("preference",
{
    Name: 'BillableRate',
    Project: '/project/__PROJECT_OID__',
    Value: 0
}, function(results) { isTeamLevel = results; } ); 
```

工作区的结构是父项目有多个轨道，而这些轨道有多个团队。我希望应用程序在项目层次结构的每个级别上计算适当的 EVM 数据。我遇到了一个问题，我无法检索当前项目及其所有子项目的首选项。**PROJECT_SCOPING_DOWN**设置为真。似乎偏好的处理方式与故事/任务/等不同。

这是我获得偏好的方式：

```
var queryConf = {type: 'Preference',
                 key :'billableRate',
                 query:'(Project = "/project/__PROJECT_OID__")',
                 fetch:true};

_rallyDataSource.findAll(queryConf, preferencesRetrievedCallback); 
```

如果我在查询中包含项目 oid，我只会获得与该项目相关的首选项，而不是任何子项目。如果我从查询中删除项目 oid，它会返回每个首选项，而不考虑层次结构。

我也尝试使用 CreateAppPreference 和 GetAppPreferences 来完成此操作，但它似乎表现出相同的行为。

我的问题是，我在这里做错了吗？如果不是，这是预期的功能，那么我如何最好地存储这些变量，以便它们在项目结构的每个级别正确汇总？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:52:15.910

Preference WSAPI 端点有点独特，因为它不使用在 url 中传递的任何工作区或项目范围信息，除了上面的显式查询：

```
 (Project = /project/12345) 
```

您可以使用**PROJECT_OIDS_IN_SCOPE** [hangman 变量](http://developer.rallydev.com/help/Hangman-variables)并构造一个大型 OR'd 查询，尽管如果您有很多项目在范围内，请求可能会失败，因为它变得太大......

```
var queries = [];
var projectOids = '__PROJECT_OIDS_IN_SCOPE__'.split(',');
rally.forEach(projectOids, function(projectOid) {
    queries.push('Project = /project/' + projectOid);
});
var query = rally.sdk.util.Query.or(queries); 
```

否则，您可以为范围内的每个项目提出新的首选项请求，就像您为当前项目所做的那样。

另一种选择是将首选项保存为工作区首选项，并将值作为 json 对象，键是项目 oid，值是值...

# batch-file - 递归删除文件夹并排除特定文件夹

> ID：13652675
> 
> 赞同：3
> 
> 时间：2012-11-30T20:27:50.787
> 
> 标签：batch-file, command-prompt, batch-processing

我是长期观众，但这是我的第一个问题，所以如果我做错了，我深表歉意。

我需要递归删除远程计算机上的所有文件夹和文件，并且我想防止特定文件夹被删除。

这些排除的文件夹列在一个名为 的文本文件中`excludeDirectories.txt`，每一行都有一个文件夹名称。

我的第一次尝试是结合使用命令提示命令和`psexec`. 下面列出了该脚本。注意我是从批处理命令运行这些的，因此是 double `%%`：

```
net use r: \\machine\sharedFolderName

FOR /D %%a IN (R:\*.*) DO (
    c:\pstools\psexec cmd /c rmdir /s /q R:\
) 
```

该脚本会删除所有内容，但我不知道如何检查循环中当前文件夹的文本文件`FOR`，如果在文本文件中找到该文件，则跳到循环中的下一个文件夹。

我在这方面花了几天时间，并且无法让代码工作，将文件夹读入我可以在`IF`语句中使用的东西，并`psexec`在找到匹配项时分支出行。

同样，为了打败一匹死马，我想要完成的是：

1.  递归循环浏览`R:`驱动器上的文件夹
2.  检查`FOR`循环中的每个文件夹，看看它是否在文本文件中
3.  如果在文本文件中找到循环中的当前文件夹，则`FOR`跳过删除文件夹的行并前进到`FOR`循环中的下一个文件夹
4.  我无法使用 powershell
5.  我必须将排除的文件夹存储在文本文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:53:07.613

这假定文本文件只包含名称，而不是驱动器号：

```
for /d %%a in (R:*) do findstr /i /x /c:"%%~nxa" excludeDirectories.txt || rd /s /q %%a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T11:06:48.507

*抱歉，我没有注意到您不能使用 powershell。但是这个答案可以帮助那些到达这个链接的人。*

您可以使用 PowerShell 做得更好。我正在使用 PowerShell 2.0。

```
Get-ChildItem -Path BASE_PATH_TO_SEARCH -Include FOLDER_TO_SEARCH -Recurse | ? { $_.FullName -inotmatch 'FOLDER_NAME_TO_EXCLUDE'} | Remove-Item -WhatIf -Recurse 
```

*   移除 -WhatIf 开关以删除文件夹。使用 -WhatIf 模拟删除但实际上并没有这样做。
*   将 BASE_PATH_TO_SEARCH 设置为 . （点）如果您从当前目录搜索。
*   此命令排除“FOLDER_NAME_TO_EXCLUDE”文件夹。
*   超过 260 个字符的路径会引发异常。

    > Get-ChildItem ：指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。

*好消息是 Remove-Item cmdlet 继续使用其余路径，留下那些引发错误的路径。*

*   警告：使用 -WhatIf 时，不会显示任何错误，例如权限被拒绝。当您实际运行删除了 -WhatIf 的 cmdlet 时，可能会发生这些情况。

但一个问题是，运行“Get-Help Remove-Item -detailed”会通知“Remove-Item”上的“-Recurse”无法正常工作。好吧，对我来说这没问题。:-)。没有发现不良行为。

我曾使用它从我的 VS 解决方案基目录中递归删除**bin文件夹。**这是一个很大的解脱。:-)

有关 Get-ChildItem 的详细信息，请在此处阅读所有答案：[使用 Get-ChildItem 时排除多个文件夹](https://stackoverflow.com/questions/15294836/how-can-i-exclude-multiple-folders-using-get-childitem-exclude)

# java - HttpClient = INVALID URI - 转义的绝对路径无效

> ID：13652681
> 
> 赞同：7
> 
> 时间：2012-11-30T20:28:33.877
> 
> 标签：java, url, absolute-path, apache-commons-httpclient

我正在尝试使用 HttpClient 将文件上传/删除到 webdav 服务器。但是，只要我的文件名包含空格，就没有任何工作。我收到一条错误消息，提示“无效的 URI --- 转义的绝对路径无效”。

这是我的 URL = "http://localhost:8080/test file.txt"

```
private boolean delete(String fileName) {
    HttpClient client = new HttpClient();
    HttpHost host = new HttpHost(WEBDAV_URL, PORT_NUMBER);
    client.getHostConfiguration().setHost(host);
    DeleteMethod del = new DeleteMethod(WEBDAV_URL_COMPLETE + fileName);
    try {
        client.executeMethod(del);
        return true;
    } catch (HttpException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

我应该使用任何方法或 URL 解析来解决问题吗

谢谢

**编辑，通过用“ %20** ”替换空间来找到解决方案。

**

> URL.replaceAll(" ","%20")

**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:20:47.873

我用这个得到了我想要的......

URL.replaceAll(" ","%20")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:34:24.730

采用`java.net.URLEncoder.encode`

或用“+”替换你的空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:46:32.540

您只需将文件重命名为：

```
test_file.txt or textFile.txt 
```

在编码变量或为其创建文件时，从不使用空格是常见的标准。

使用 test_file (snake case) 或 textFile (camelCase)。

# internet-explorer-9 - IE 几乎是标准模式，我怎么知道我什么时候在里面

> ID：13652690
> 
> 赞同：1
> 
> 时间：2012-11-30T20:29:13.453
> 
> 标签：internet-explorer-9, compatibility-mode

根据MS流程图......有一种模式称为“几乎标准”。 [http://ie.microsoft.com/testdrive/ieblog/2010/Jun/16_IEsCompatibilityFeaturesforSiteDevelopers_1.svg](http://ie.microsoft.com/testdrive/ieblog/2010/Jun/16_IEsCompatibilityFeaturesforSiteDevelopers_1.svg)

我认为我的页面正在登陆，但开发人员面板告诉我它是 IE9 文档模式标准。

此外，我什至在开发面板中都没有看到 ALMOST 标准的选项。

那么我怎么知道我肯定在里面呢？我假设我是因为流程图，并且说“IE9 标准”的文档模式只是他们能做的最好的......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:31:53.157

您可能不希望处于实现一些旧功能和一些近现代功能的任何过渡模式。如果您提供明确选择加入的文档类型，您将处于其中一种模式（请参阅您的链接资源以获取这些特定文档类型）。如果没有提供有效的文档类型，您将处于 Quirks 模式。

为确保您处于标准模式，请在文档的第一行使用以下文档类型：

```
<!DOCTYPE html> 
```

您还会发现许多人会指示 IE 实现“edge”，这意味着它应该实现其最新的功能集（这是它在标准模式下已经做的）。

```
<meta http-equiv="x-ua-compatible" content="IE=edge"> 
```

# javascript - .getAttribute 引起的错误

> ID：13652693
> 
> 赞同：0
> 
> 时间：2012-11-30T20:29:34.280
> 
> 标签：javascript, dom

所以我有一个动态生成表的页面，看起来像

```
<table id="enProps">
  <tr>
    <td class="en_US">
      <input readonly="readonly" value="shipbillpayplacerequisition" type="text">
    </td> 
    <td class="en_US">
      <input class="longField" readonly="readonly" value="Ship, Bill &amp; Pay : Place Requisition" type="txt">
    </td>
    <td style="display: none;" class="otherIds">
      <input class="identifier" readonly="readonly" value="shipbillpayplacerequisition" type="text">
    </td> 
    <td class="keyValue">
      <input class="value longField" id="shipbillpayplacerequisition" value="" type="text">
    </td>
  </tr>
</table> 
```

行数可以变化，输入框的值字段中存储的内容也可以变化。我正在尝试用 vanilla javascript 编写一个简单的脚本（阅读：没有外部库，如 JQuery）来比较两个字段的“值”值。

到目前为止我所拥有的是

```
 var table = document.getElementById("enProps");
 var rowCount = table.getElementsByTagName("TR").length;
 var engValue;
 var frenchValue;
 for (var i = 0; i < rowCount; i++){
  var row = table.rows[i];
  var cellCount = row.cells.length;
   for (var j = 0; j < cellCount; j++){
    var cell = row.cells[j];
     if (cell.getAttribute("class") == "en_US"){
       var inputs = cell.getElementsByClassName("longField")[0].getAttribute("value");
     }
   }
 } 
```

每次我尝试运行它时都会出现错误提示

```
cell.getElementsByClassName("longField")[0] is undefined 
```

奇怪的是，如果我删除 getAttribute 方法调用并使用 alert 或 console.log 打印输入值，它会显示正确的元素。我尝试了许多变体，包括使用 .firstChild、.childNodes[0] 和不串接我的方法调用。每次我收到一个错误，说 .getAttribute 不是函数或者某些东西是未定义的，并且它总是由该行上的 .getAttribute 调用引起的，更奇怪的是每次在我的选择器上调用 console.log 都会显示适当的输入标签。所以我的问题是**，当我尝试使用它来获取输入标签的“值”类的值时，为什么 .getAttribute 会出错？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:35:54.987

这是因为您的 first`<td class="en_US">`没有包含 class 的嵌套元素`"longField"`。

您需要确保找到匹配项。

```
 if (cell.getAttribute("class") == "en_US"){
     var inputs = cell.getElementsByClassName("longField");
     if (inputs.length)
         inputs[0].getAttribute("value");
 } 
```

或者只是`getElementsByClassName`从那里打电话`tr`。

```
for (var i = 0; i < rowCount; i++){
    var inputs = table.rows[i].getElementsByClassName("longField");
    for (var j = 0, len = inputs.length; j < len; j++) {
        inputs[j].getAttribute("value");
    }
} 
```

# visual-studio-2010 - 在家里设置 Nuget 服务器

> ID：13652695
> 
> 赞同：1
> 
> 时间：2012-11-30T20:29:40.507
> 
> 标签：visual-studio-2010, nuget, nuget-package

只是一个快速的问题。

我的家庭桌面上安装了 Visual Studio 2010 专业版。我可以设置 Nuget 服务器进行练习或自学吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:31:52.130

您当然可以：[托管您自己的 NuGet 源](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:52:53.250

您可以使用免费的[MyGet.org](http://www.myget.org)服务并专注于创建包和学习命令。

无需设置您自己的 NuGet 服务器（除非您想学习如何设置它）。MyGet 是快速启动 NuGet 学习体验的理想解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:32:32.780

没有什么能阻止您安装服务器，但事实上您没有运行最新版本的 Visual Studio。

您可以从他们的网站安装和使用 NuGet，只需下载该软件的早期版本。

# jquery - Jquery重复表行和更改事件onclick

> ID：13652699
> 
> 赞同：0
> 
> 时间：2012-11-30T20:29:57.673
> 
> 标签：jquery, html

昨天我质疑如何添加新的表格行但更改重复行的 css。我得到了这个问题的答案！（[链接](https://stackoverflow.com/questions/13635581/duplicate-last-table-row-but-change-class-in-jquery)）但是出现了一个新问题。

我有一张如下表：

```
<table class="test">
<thead>
<tr>
    <td><b>header 1</b></td>
    <td><b>header 2</b></td>
    <td><b>header 3</b></td>
    <td><b>header 4</b></td>
</tr>
</thead>
<tbody>
<tr class="1">
    <td>data 1</td>
    <td>data 2</td>
    <td>data 3</td>
    <td class="remove"></td>
</tr>
<tr class="2">
    <td>data 1</td>
    <td>data 2</td>
    <td>data 3</td>
    <td class="remove"></td>
</tr>
<tr class="new">
    <td>data 1</td>
    <td>data 2</td>
    <td>data 3</td>
    <td class="new"></td>
</tr>
</tbody>
<table>​ 
```

jQuery代码：

```
$("table.test tr.new:last td.new").click(function(){
     var x = $('table.test tr.new:last').clone(true);
     $(this).removeClass('new').addClass('remove').off('click');    
     x.insertAfter('table.test tr.new:last');
});
     $("table.test tr td.remove").click(function(){
     $(this).closest("tr").fadeOut('slow');
}); 
```

当我单击 td.new 单元格时，我想添加一行。这是有效的。类也在 td.remove 单元格中更改。但是，单击事件无法正常工作。删除单元格应始终删除一行。我发现我必须使用 .off() 和 .on 函数，但我似乎无法理解这些函数背后的逻辑。以下图像是我的目标：[postimage](http://postimage.org/image/3ro51n5rv/af063a4c/)

我现在拥有的 Jsfiddle 示例可以在[这里找到](http://jsfiddle.net/klaas3/wgRYR/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:40:48.093

您似乎动态地添加了行。所以您需要**委托事件..**

代替

```
$("table.test tr td.remove").click(function(){ 
```

尝试

```
$("table.test").on('click','td.remove', function(){ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/wgRYR/5/)**

**更新**

您可以在单个处理程序本身中处理这两种情况。在您的代码中进行了一些修改..

```
$("table.test").on('click', 'td.remove,td.new', function() {
    var $this = $(this);
    if ($this.hasClass('new')) {
        var x = $('table.test tr.new').clone();
        $this.removeClass('new').addClass('remove');
        $this.closest('tr').removeClass('new');
        x.insertAfter('table.test tr:last');
    }
    else if ($this.hasClass('remove')) {
        $(this).closest("tr").fadeOut('slow');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:33:15.647

你应该使用 jquery .live()，我知道它会被弃用，但这对你来说是一个简单的起点。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

它将挂钩将来将添加到 DOM 的删除元素。所以你不需要处理任何重新初始化和东西。

编辑：

所以再次回到 .live()，因为它已被弃用，你应该通过以下方式实现：

$(document).on(事件、选择器、数据、处理程序);

在你的情况下： $(document).on('click', '.remove', function(){ //不管你想做什么 });

# oracle - 使用复选框在父表中搜索 (Oracle Forms Builder)

> ID：13652701
> 
> 赞同：0
> 
> 时间：2012-11-30T20:30:03.533
> 
> 标签：oracle, plsql, oracleforms

我在哪里可以找到这方面的任何信息。

a) 我需要选择正在搜索的列

b) 用复选框选择要显示的数据

c）如果所选列（您在其中搜索）是主键列，则表单还将显示子表复选框，如果选中，将显示列以及选中的父表列。

表格：

```
CREATE TABLE CHAMPIONS (
  CNAME VARCHAR2(15) NOT NULL, 
  PRICELEVEL NUMBER(1) NOT NULL, 
  ROLE VARCHAR2(10) NOT NULL,
  HPLEVEL NUMBER(2) NOT NULL, 
  ATKLEVEL NUMBER(2) NOT NULL,
  MAGICLEVEL NUMBER(2) NOT NULL,
  DIFFLEVEL NUMBER(2) NOT NULL
);

CREATE TABLE SKINS (
  SNAME VARCHAR2(20) NOT NULL,
  CNAME VARCHAR2(15) NOT NULL,
  PRICELEVEL NUMBER(1) NOT NULL);

ALTER TABLE Champions ADD CONSTRAINT pk_Champions PRIMARY KEY (CNAME);

ALTER TABLE Skins ADD CONSTRAINT fk_Skins FOREIGN KEY (CNAME) REFERENCES champions(CNAME); 
```

我真的不在乎这是如何实现的，因为我不知道哪种方式是可能的。由于这只是一对一的关系，因此某种隐藏可能会起作用。

![我想要的表格](../Images/a9436ea955f8f59ac4015e606d086791.png)

如果按下的按钮是 cname（主键），则第一个结果表当然只有一行，而第二个结果表将由与所选主键关联的数据填充。如果按下任何其他按钮，则甚至不会显示另一个表，但是第一个表可能会显示多行。结果中显示的列取决于复选框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:43:47.877

如果您不想重复显示的冠军数据，请创建两个单独的数据库块，并在它们之间添加关系。

如果要在一个多行块中显示所有数据，则需要一个视图来连接两个表中的数据。

您的搜索选项将是一个非数据库块。当您单击搜索按钮时，您需要更改`default_where`块的类型，添加根据字段搜索的值。为此，您需要添加触发器`pre-query`。就像是：

**触发搜索按钮**

```
begin
  go_block('champions_block');
  execute_query; -- this triggers pre-query of champions_block
end; 
```

**触发预查询**

```
if :search.search_text is not null then
  -- this changes the where of your block
  set_block_property('champions_block',default_where, 'cname like %'||:search.search_text||'%');  
  --
else
  -- remove previous where
  set_block_property('champions_block',default_where, '');
end if; 
```

字段的显示/隐藏更复杂，您需要使用以下方式显示/隐藏项目：

```
set_item_property('name_of_block.name_of_item', visible, property_true); -- false to hide 
```

并且还需要调整其他字段的位置：

```
set_item_property('name_of_block.name_of_item', position, pos_x, pos_y); 
```

# google-apps-script - 是否可以使用 Google Apps 脚本通过 Google Drive API 模拟域用户？

> ID：13652706
> 
> 赞同：4
> 
> 时间：2012-11-30T20:30:28.463
> 
> 标签：google-apps-script, google-drive-api

我是 Google Apps for Education 的学习主管和学校管理员。

我将 Google Apps Script 用于许多使用 gas 服务的应用程序（控制缺勤、发送电子邮件、自动报告、ScriptDb 数据库等）。这是梦幻般的。

基本上我需要在学生的 Google Drive 中创建一个文件夹结构（年份、课程、教师等）。

使用 Google Apps 脚本服务，我可以轻松地做到这一点，但文件夹属于创建者（管理员），我认为用户会花费管理员存储配额。我对此不感兴趣。（是的，我可以制作一个由用户执行的应用程序并在其 Google Drive 中创建结构，但我宁愿以自动化方式进行，无需干预）

要在 Google Drive 中创建此文档（和文件夹），用户（教师、学生等）已调整 Waqar Ahmad 在此响应中提供的代码 [[将作者添加到电子表格...](https://stackoverflow.com/questions/10565463/add-an-writer-to-a-spreadsheet-via-google-document-list-api/10571203#10571203) ]

这使我可以使用 Google Document List API（Google Apps 管理访问权限以模拟域用户）获取其他用户的文档以进行更新，并且还可以在其他 Google Drive 用户上创建文件夹和文件。它完美地工作。我在这里提到：

[如何添加 Google Drive 文件夹...](https://stackoverflow.com/questions/12958382/how-to-add-a-google-drive-folder-to-my-drive-section-to-other-users/13614186#13614186)

但是现在，Google Documents List AP 第 3 版已被正式弃用，并鼓励我们使用 Google API Drive。

我尝试对这个新的 Google API 做同样的事情。有没有人设法做到这一点？可能吗？我不知道从哪里开始！

谢谢你。

塞尔吉

更新：

这是我正在工作的代码，但我收到“无效请求”错误：

(...)

```
 var user = e.parameter.TB_email // I get user from a TextBox

//https://developers.google.com/accounts/docs/OAuth2ServiceAccount
//{Base64url encoded header}.{Base64url encoded claim set}.{Base64url encoded signature}

//{Base64url encoded header}
 var header = '{"alg":"RS256","typ":"JWT"}' 
 var header_b64e = Utilities.base64Encode(header)

//{Base64url encoded claim set}
 var t_ara = Math.round((new Date().getTime())/1000) // now 
 var t_fins = t_ara + 3600                           // t + 3600 sec

 var claim_set = '{"iss":"1111111111-xxxxxxxxxxxxxxxxxxxxxx@developer.gserviceaccount.com",'+
                 '"prn":"' + user + '",' +
                 '"scope":"https://www.googleapis.com/auth/prediction",'+
                 '"aud":"https://accounts.google.com/o/oauth2/token",'+
                 '"exp":'+t_fins+','+
                 '"iat":'+t_ara+'}'

   // where '1111111111-xxxxxxxxxxx... is my CLIENT-ID (API Access -> Service Account)                   

 var claim_set_b64e = Utilities.base64Encode(claim_set)
 claim_set_b64e = claim_set_b64e.replace(/=/g,'')

 var to_sign = header_b64e + '.' + claim_set_b64e

 // [signature bytes] ???  // password 'isnotasecret???'
 var key_secret = DocsList.getFileById('0Biiiiiiiiii-XXXXXXXXXXX').getBlob().getBytes()

    // where '0Biiiiiiiiii-XXXXXXXXXXX'... is my p12 file (key_secret) uploaded to GDRive
    // I don't know if this is correct !!!

 var sign = Utilities.base64Encode(Utilities.computeHmacSha256Signature(to_sign, key_secret))

 var JWT_signed = to_sign + '.' + sign
 JWT_signed = JWT_signed.replace(/=/g,'')

 // Token Request /////////////////////////////////////////////////////////////
 var url = 'https://accounts.google.com/o/oauth2/token'
   //var url = 'https%3A%2F%2Faccounts.google.com%2Fo%2Foauth2%2Ftoken' ???
   //var url = 'https:' + '%2F%2Faccounts.google.com%2Fo%2Foauth2%2Ftoken' ???

 var parameters = {
 "method" : "POST",
 "payload" : '"' + 'grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=' + JWT_signed + '"',
 "contentType" : "application/x-www-form-urlencoded"
 }

 var content = UrlFetchApp.fetch(url,parameters) //.getContentText()
 // Token Request end //////////////////////////////////////////////////////// 
```

我得到一个“无效请求”而不是带有令牌的 JSON

前两个部分（标题和声明集）都可以。结果与 Google OAuth 页面的结果相同。

我不知道签名部分是否正确，或者错误是否在令牌请求中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T21:48:25.960

上面示例的问题在于它使用 hmacsha256 计算签名。您需要使用 rsasha256。现在有两个用于应用程序脚本的服务帐户库。我放在一起的是： [https ://gist.github.com/Spencer-Easton/f8dad65932bff4c9efc1](https://gist.github.com/Spencer-Easton/f8dad65932bff4c9efc1)

这两个库的问题是它们都是从 jsrsa 派生的，它在服务器端运行非常慢。

# artificial-intelligence - Alpha beta剪枝的评价函数设计

> ID：13652718
> 
> 赞同：2
> 
> 时间：2012-11-30T20:31:26.963
> 
> 标签：artificial-intelligence, heuristics, minimax, 2d-games, alpha-beta-pruning

我正在设计一个国际象棋游戏，它背后的人工智能实现了一个带有 alpha-beta 修剪的搜索树。我在设计游戏的评估函数时遇到了困难。

如何为任何类型的游戏设计评估函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:08:13.347

构建评估函数的一种流行策略是作为被认为影响头寸价值的各种因素的加权总和。例如，国际象棋的评估函数可能采用以下形式

```
c1 * material + c2 * mobility + c3 * king safety + c4 * center control + ... 
```

如

```
f(P) = 200(K-K') + 9(Q-Q') + 5(R-R') + 3(B-B'+N-N') + (P-P') - 0.5(D-D'+S-S'+I-I') + 0.1(M-M') + ... 
```

其中：

```
K, Q, R, B, N, P are the number of white kings, queens, rooks, bishops, knights and pawns on the board.
D, S, I are doubled, backward and isolated white pawns.
M represents white mobility (measured, say, as the number of legal moves available to White). 
```

# css - css父子覆盖

> ID：13652721
> 
> 赞同：0
> 
> 时间：2012-11-30T20:31:36.887
> 
> 标签：css

我有一个CSS问题。我在花药桌子里面有一张桌子。每个表都有不同的颜色（取决于里面的数据）。所以我为每张桌子放了一个班级。但颜色取决于何时在 css 上设置类。我的意思是如果颜色 1 在第二个之前声明，它将覆盖子颜色。

我做了一个样本：http: [//jsfiddle.net/b8T6V/2/](http://jsfiddle.net/b8T6V/2/)（完整版）

```
 <table border="0" class="Grid0">
        <tr class="even">
                    <td>table 1, row 1</td>       
        </tr>
        <tr class="even">
            <td>
                <table border="0" class="Grid1">
                    <tr class="even">
                        <td>table 2, row 1</td>       
                    </tr>
                    <tr class="odd">
                        <td>table 2, row 2</td>       
                    </tr>
                </table>
            </td>        
        </tr>
        <tr class="odd">
            <td>table 1, row 2</td>       
        </tr>
        <tr class="odd">
             <td>
                <table border="0" class="Grid1">
                    <tr class="even">
                        <td>table 2, row 1</td>       
                    </tr>
                    <tr class="odd">
                        <td>table 2, row 2</td>       
                    </tr>
                </table>
            </td>     
        </tr>
    </table> 

table.Grid0 tr.even
{
    background-color: RED ;
}
table.Grid0 tr.odd
{
    background-color: BLUE;
}

table.Grid1 tr.even
{
    background-color: BLACK;
}
table.Grid1 tr.odd
{
    background-color: WHITE;  /*background-color: blue;*/
} 
```

如果您使用 Grid1 代替 Grid0，并使用 Grid0 代替 Grid1。这是行不通的。

jsfiddle 示例：

第一个表以 Grid0 开头，第二个表以 Grid1 开头。第二个应该有红色/蓝色的表格。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:37:08.160

因为你的内部`tr`是在两个表中，一个类`Grid0`和一个类，`Grid1`那么两组 CSS 规则都适用，所以（因为它们稍后出现在文件中）背景色/白色背景色优先。

解决此问题的最简单方法是插入`> tbody >`所有相关规则，以便只考虑父表的类而不考虑任何其他祖先表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:37:30.670

您需要为第二个表的选择器添加更多特异性，如下所示：

```
table.Grid0 tr.even, table table.Grid0 tr.even
{
    background-color: RED ;
}
table.Grid0 tr.odd, table table.Grid0 tr.odd
{
    background-color: BLUE;
}

table.Grid1 tr.even, table table.Grid1 tr.even
{
    background-color: BLACK;
}
table.Grid1 tr.odd, table table.Grid1 tr.odd
{
    background-color: WHITE;  /*background-color: blue;*/
} 
```

# php - 我可以将 PHP 设置为与 utf 8 一起用于 Sqlite 3

> ID：13652724
> 
> 赞同：1
> 
> 时间：2012-11-30T20:31:49.847
> 
> 标签：php, sqlite

我正在尝试使用 PHP 获取和转储 Sqlite 字段。由于某些字符，我无法获得特定值。这是我的代码：

```
$sql = "SELECT * FROM siir WHERE siirAdi_txt LIKE 'Ağustos Şiiri%' COLLATE NOCASE"; 
```

Sqlite 3 是否支持 utf-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:25:57.917

从站点复制粘贴：SQLite 版本 3 概述

SQLite 3.0 版对库进行了重要更改，包括：

```
A more compact format for database files.
Manifest typing and BLOB support.
**Support for both UTF-8 and UTF-16 text.**
User-defined text collating sequences.
64-bit ROWIDs.
Improved Concurrency. 
```

# multithreading - ASP 立即发送响应然后处理更多

> ID：13652728
> 
> 赞同：0
> 
> 时间：2012-11-30T20:31:57.630
> 
> 标签：multithreading, asp-classic, response

我正在创建一个网络服务。客户端通过 POST 以 XML 格式将信息发送到 RETURN URL。客户端应该只收到“成功”或“失败”，这只是一个状态指示器，用于确认返回 URL 确实收到了 POST 消息。

之后，RETURN URL（主机）将处理客户端发送的 XML 数据。

我遇到的问题是处理可能需要几分钟。我想立即发送状态消息，然后继续处理 XML 数据。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:55:25.507

您应该经常轮询服务器（您决定），直到您获得“完成”响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:32:10.450

将您的 Web 服务设置为异步返回。如果您在 .Net 中执行此操作，则您在 Web 服务功能上放置了一个参数

[MSDN 异步 Web 服务](http://msdn.microsoft.com/en-us/library/aa480512.aspx)

如果您在 Java 中创建它，这里有一些如何从 Oracle 进行的信息。我对Java不太熟悉，所以我不确定它是如何完成的，但这里有一个文档。

[Oracle 异步 Web 服务](http://docs.oracle.com/cd/E14571_01/web.1111/e15184/asynch.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:11:55.187

可能有几种方法可以做到这一点。想到的第一个是将 XML 存储在数据库记录中并将“成功”状态返回给客户端。

设置一个进程每隔几秒或几分钟运行一次，检查数据库中的新记录并处理它们，直到没有更多记录为止。

我曾经以这种方式在 ASP 中实现了一个群发短信服务。传入的 SMS 消息（如传入的 XML 文件）存储在数据库中。每隔一两分钟就会运行一个进程，以查找新消息并执行消息告诉他们执行的任何操作。如果该消息是向组发送新消息的命令，则将这些传出消息放入另一个数据库，并定期运行另一个发送这些消息的进程。它将发送消息，直到达到运营商规定的每分钟可以发送多少条消息的限制，然后它将终止。

这一切都是在经典的 ASP 中完成的，并在服务器上运行了第三方调度程序。工作得很好。

# php - php正则表达式拆分发票行项目描述

> ID：13652729
> 
> 赞同：3
> 
> 时间：2012-11-30T20:32:00.823
> 
> 标签：php, regex, preg-match

我正在尝试拆分如下字符串：

一个项目 ( `Item A`)，可能包含 89798 个数字和字母 @ $550.00

4 个`Item B`@ $420.00

476584 个`Item C`，数量更大，货币符号不同 @ £420.00

进入：

```
array(

    0 => 1

    1 => "some item which may contain 89798 numbers and letters"

    2 => $550.00

); 
```

那有意义吗？

我正在寻找一种正则表达式模式，它将拆分数量、描述和价格（包括符号）。

字符串将始终为：

`qty x description @ price+symbol`

所以我假设正则表达式是这样的：

```
`(match a number and only a number) x (get description letters and numbers before the @ symbol) @ (match the currency symbol and price)` 
```

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:38:56.313

```
preg_match('/^(\d+)\s*x\s(.+)\s@\s*([^@]+)$/', $string, $match);
unset($match[0]);
print_r($match); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:40:31.257

如果 和 两边总是有空格`x`，`@`你可以试试这个：

```
$pattern = '/\s*(x|@)\s*/';
$array = preg_split($pattern, $input_string); 
```

# google-apps-script - 在谷歌文档中使用谷歌网址缩短器

> ID：13652734
> 
> 赞同：0
> 
> 时间：2012-11-30T20:32:26.540
> 
> 标签：google-apps-script, bit.ly, goo.gl

以下是一些在谷歌文档中缩短多个网址的示例。

[http://www.lebseodesign.com/2011/04/create-short-urls-using-apis-and-google-docs/](http://www.lebseodesign.com/2011/04/create-short-urls-using-apis-and-google-docs/)

如何通过 Goo.gl 缩短器来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:23:15.557

我在这里看到了你的帖子，所以我会在这里而不是在我的博客上回答你

有两种使用 goo.gl shortner 的方法。通过 JSON，它要求您使用 API 控制台中的 API。

可以使用 Google Apps 脚本来完成实施，例如这里[的问题使用来自 google apps 脚本的 goo.gl API](https://stackoverflow.com/questions/6566394/problems-using-the-goo-gl-api-from-google-apps-script)

使用 api 的文档可以在这里找到

[https://developers.google.com/url-shortener/v1/getting_started#shorten](https://developers.google.com/url-shortener/v1/getting_started#shorten)

谢谢

# linq - 更改 linq 以产生回报

> ID：13652735
> 
> 赞同：1
> 
> 时间：2012-11-30T20:32:31.433
> 
> 标签：linq, foreach, yield-return

这个可以改吗...

```
var movies = rawMovies.Movies.Select(m => {
    var movie = new Movie {
        Id = m.Id,
        Title = m.Title,
        Year = m.Year,
        MpaaRating = m.MpaaRating,
        Runtime = m.Runtime,
        CriticsConsensus = m.CriticsConsensus,
        Synopsis = m.Synopsis,
        ReleaseDate = m.ReleaseDates != null ? new ReleaseDate { Dvd = m.ReleaseDates.Dvd, Theater = m.ReleaseDates.Theater } : null,
        Rating = m.Ratings != null ? new Rating { AudienceScore = m.Ratings.AudienceScore, CriticsScore = m.Ratings.CriticsScore } : null,
        AlternateId = m.AlternateIds != null ? new AlternateId { Imdb = m.AlternateIds.Imdb } : null,
        Poster = m.Posters != null ? new Poster { Detailed = m.Posters.Detailed, Original = m.Posters.Original, Profile = m.Posters.Profile, Thumbnail = m.Posters.Thumbnail } : null,
        Link = m.Links != null ? new Link { Alternate = m.Links.Alternate, Cast = m.Links.Cast, Clips = m.Links.Clips, Reviews = m.Links.Reviews, Self = m.Links.Self, Similar = m.Links.Similar } : null,
        Genres = m.Genres != null ? (HashSet<Genre>)m.Genres.Select(g => new Genre { Name = g }) : new HashSet<Genre>()
    };

    foreach (var castMember in m.AbridgedCast) {
        var person = new Person { Id = castMember.Id, Name = castMember.Name };
        if (castMember.Characters != null) {
            foreach (string name in castMember.Characters) {
                var character = new Character { Name = name, Person = person, Movie = movie };
                movie.Characters.Add(character);
            }
        }
    }

    return movie;                           
});

return movies; 
```

`foreach(var rawMovie in rawMovies.Movies) { ... }`与`yield return`？_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:41:20.570

是的。它是按照你开始的方式完成的......

```
foreach(var rawMovie in rawMovies.Movies)
{
  var m = rawMovie;
    var movie = new Movie {
        Id = m.Id,
        Title = m.Title,
        Year = m.Year,
        MpaaRating = m.MpaaRating,
        Runtime = m.Runtime,
        CriticsConsensus = m.CriticsConsensus,
        Synopsis = m.Synopsis,
        ReleaseDate = m.ReleaseDates != null ? new ReleaseDate { Dvd = m.ReleaseDates.Dvd, Theater = m.ReleaseDates.Theater } : null,
        Rating = m.Ratings != null ? new Rating { AudienceScore = m.Ratings.AudienceScore, CriticsScore = m.Ratings.CriticsScore } : null,
        AlternateId = m.AlternateIds != null ? new AlternateId { Imdb = m.AlternateIds.Imdb } : null,
        Poster = m.Posters != null ? new Poster { Detailed = m.Posters.Detailed, Original = m.Posters.Original, Profile = m.Posters.Profile, Thumbnail = m.Posters.Thumbnail } : null,
        Link = m.Links != null ? new Link { Alternate = m.Links.Alternate, Cast = m.Links.Cast, Clips = m.Links.Clips, Reviews = m.Links.Reviews, Self = m.Links.Self, Similar = m.Links.Similar } : null,
        Genres = m.Genres != null ? (HashSet<Genre>)m.Genres.Select(g => new Genre { Name = g }) : new HashSet<Genre>()
    };

    foreach (var castMember in m.AbridgedCast) {
        var person = new Person { Id = castMember.Id, Name = castMember.Name };
        if (castMember.Characters != null) {
            foreach (string name in castMember.Characters) {
                var character = new Character { Name = name, Person = person, Movie = movie };
                movie.Characters.Add(character);
            }
        }
    }

    yield return movie;
} 
```

确保您的方法返回`IEnumerable<Movie>`并且一切就绪。

# r - 范围——如果存在同名的本地变量，如何评估父环境中的对象？

> ID：13652741
> 
> 赞同：10
> 
> 时间：2012-11-30T20:32:40.387
> 
> 标签：r, environment-variables

如果我有两个使用相同变量名的嵌套环境，我将如何获取外部环境的值？

我很难找出实现这一点的正确方法。我尝试了eval`parent.frame(x)`和内部的一些变体。`sys.frame(x)`任何建议，将不胜感激。

* * *

例子：

```
outerFunc <- function() { 
  obj <- "Outer Object"
  innerFunc()
}

innerFunc <- function() {
  # A local variable with same name is created
  obj <- "Inner Object"

  # would like to grab the value of obj from the outer environment
  obj.callingFunc <- eval(obj, envir=sys.frame(-1))

  cat(obj.callingFunc)  # gives "Inner Object" instead of "Outer Object"
} 

> outerFunc()
Inner Object 
```

*在这种特定情况下，我无法使用明显的解决方案（显式传递`obj`。使用不同的变量名等）。*

* * *

## 编辑

检查下面@GregSnow 和@Dwin 的答案

```
 # THESE WORK
  eval(quote(obj), envir=parent.frame()) # equivalent to evalq(obj, envir=parent.frame())
  get("obj", envir=parent.frame())

  # THESE DO *NOT* WORK
  eval("obj", envir=parent.frame()) 
  get(quote(obj), envir=parent.frame()) 
```

关于引用`get()`vs的影响有什么想法`eval()`吗？

* * *

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T20:50:30.443

```
outerFunc <- function() { 
  obj <- "Outer Object"
  innerFunc()
}

innerFunc <- function() {
  # A local variable with same name is created
  obj <- "Inner Object"

  # would like to grab the value of obj from the outer environment
  cat( get('obj', envir=parent.frame()) )

   } 

 outerFunc()
#Outer Object 
```

也可以使用：`eval(quote(obj), envir=sys.frame(-1))`. 很明显，quote(expr) 的含义与“expr”的含义不同。该`get`函数“期望”（或者更准确地说是设计）接收字符值，而`eval`期望调用和表达式，即“语言”对象。在 R 中，数据和语言之间有一种半透膜，`get`是一种膜通道，您可以通过它将字符值对象传递到语言域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:51:29.823

在对 eval 的调用中更改您的`eval`to`evalq`或以其他方式引用`obj`。因为 obj 在被赋予之前被评估，`eval`所以它具有内部值，引用它说传递`eval`要评估的表达式（而不是值）。

# login - 允许不同用户使用相同的电子邮件地址注册

> ID：13652742
> 
> 赞同：1
> 
> 时间：2012-11-30T20:32:46.400
> 
> 标签：login, liferay

有什么方法可以让新用户使用相同（重复）的电子邮件地址注册我的网站？

例如，让用户 A 和用户 B 使用相同的电子邮件地址“ ***example@email.com*** ”进行注册。由于 liferay 为每个用户分配不同的 ID 号，并且用户只能使用他们的用户名登录我的网站，我认为重复的电子邮件地址不会造成任何麻烦。

这可能没有多大意义，我认为这很明显为什么在 liferay 或任何其他 cms 中首先不允许这样做，但业务需求就是业务需求:(。所以无论如何我想知道是否可以修改这样的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:37:54.057

如果一个用户忘记了密码并提供了他们的电子邮件地址，您能否询问该企业发送的密码？如果在多个帐户之间共享的电子邮件地址发生更改，会发生什么情况？应该全部更新还是只更新一个？当您订阅相同的论坛类别时，当有人写一个新主题时，您预计会收到多少封电子邮件...

有时，当您提出更多问题而不仅仅是回击时，业务需求会发生变化。

# google-app-engine - 使用 Google Storage Json Api (JAVA) 的批量请求

> ID：13652745
> 
> 赞同：1
> 
> 时间：2012-11-30T20:32:55.843
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试在来自 appengine (JAVA) 的一批请求中设置多个 ACL。我不确定发出请求的 URL 应该是什么。[文档](https://developers.google.com/storage/docs/json_api/v1/how-tos/batch)说明“ /batch”。是否还有可用的示例？AFAIK 无法从 API Explorer 进行测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:49:09.007

使用[google-api-java-client](https://code.google.com/p/google-api-java-client/)库和 Storage JSON API，批处理请求将如下所示：

```
// Create the Storage service object
Storage storage = new Storage(httpTransport, jsonFactory, credential);

// Create a new batch request
BatchRequest batch = storage.batch();

// Add some requests to the batch request
storage.objectAccessControls().insert("bucket-name", "object-key1",
    new ObjectAccessControl().setEntity("user-123423423").setRole("READER"))
    .queue(batch, callback);
storage.objectAccessControls().insert("bucket-name", "object-key2",
    new ObjectAccessControl().setEntity("user-guy@example.com").setRole("READER"))
    .queue(batch, callback);
storage.objectAccessControls().insert("bucket-name", "object-key3",
    new ObjectAccessControl().setEntity("group-foo@googlegroups.com").setRole("OWNER"))
    .queue(batch, callback);

// Execute the batch request. The individual callbacks will be called when requests finish.
batch.execute(); 
```

请注意，您目前必须请求访问 Storage JSON API，因为它处于有限的测试阶段。

相关 API 文档在这里：[https ://developers.google.com/storage/docs/json_api/v1/objectAccessControls](https://developers.google.com/storage/docs/json_api/v1/objectAccessControls)

Java 客户端库中有关批处理请求的文档：[https ://code.google.com/p/google-api-java-client/wiki/Batch](https://code.google.com/p/google-api-java-client/wiki/Batch)

存储 Java 客户端库的 JavaDoc：[https ://google-api-client-libraries.appspot.com/documentation/storage/v1beta1/java/latest/index.html](https://google-api-client-libraries.appspot.com/documentation/storage/v1beta1/java/latest/index.html)

# c++ - 在 C++ 中捕获 SIGSEGV 的成本

> ID：13652746
> 
> 赞同：1
> 
> 时间：2012-11-30T20:32:57.227
> 
> 标签：c++, compiler-construction, segmentation-fault

我正在尝试为编译器项目优化其他人的程序，但我有几个问题。

该程序将一块内存设置为只读，然后根据以前未知的输入对其进行写入。然后它捕获被调用的 SIGSEGV，存储页面地址，然后使内存页面可写。通过这种方式，它可以跟踪哪些页面被“弄脏”。这允许程序避免存储千兆字节的不必要空间。

我的主要问题是什么样的命中导致然后捕获 SIGSEGV 会降低性能？这将真正帮助我确定我改变程序的一些想法是否会有所帮助，或者它们是否真的会让事情变得更糟。

理想情况下，我将能够通过使用巧妙的编译技术来避免使用 SIGSEGV 方法，但我想首先确定当前方法的效率如何。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:35:24.827

处理偶尔出现的页面错误很可能比您想到的“聪明的编译技术”更有效，无论这些技术可能是什么。

当然，唯一确定的方法是测量两者。

PS 对于一些数字，请参阅[https://stackoverflow.com/a/10227511/367273](https://stackoverflow.com/a/10227511/367273)

# java - 基本界面说明

> ID：13652763
> 
> 赞同：0
> 
> 时间：2012-11-30T20:34:37.470
> 
> 标签：java, generics, interface

我觉得我应该知道这一点，但当被问到时无法真正解释。我有一个方法：

```
public <T extends IByteConverter<T>> int write(T obj) throws IOException {
    byte[] byteArray = obj.toByteArray();
    raFile.write(byteArray);
    //keeps track of size of what was written
    return byteArray.length;
} 
```

和我的界面：

```
interface IByteConverter<T> {
    public byte[] toByteArray();
    public T fromByteArray(byte[] byteArray);
} 
```

当我调用 obj.toByteArray() 时，我的程序如何知道该做什么？在我的课堂上，我实际上没有在 IByteConverter 中实现代码，但程序按预期工作。有没有一种简单的方法来解释发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:42:38.400

让我们用另一个例子让事情更容易理解：你定义一个接口 Fruit，它有一个方法`getColor()`。这个方法的约定是它返回一个颜色。

基于这个契约，你定义了一个类，它接受一个`Fruit`s 的数组，并计算红色的数量。

*编译*该方法不需要任何实现，因为可以确定唯一可以传递给该方法的是对象数组，这些对象是确实实现了`Fruit`接口的类的实例。为了*运行*此方法，您需要定义至少一个实现`Fruit`接口的类（`Apple`例如），并构造该类的对象数组。

这就是多态性的全部意义：您可以在不知道其实际类是什么的情况下调用对象的方法，前提是它尊重其接口的约定。

泛型不会使这有所不同。由于`obj`是类型`T`，并且由于`T`扩展`IByteConverter`，您可以调用`toByteArray()`方法 on `obj`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:36:11.637

这种类型的方法`<T extends IByteConverter<T>>`提供了了解 object 内部方法的可能性`T`。此声明要求调用者放置该`extends`类型的参数，`IByteConverter`以便至少`IByteConverter`可以在此方法中访问所有方法。

# c# - 使用 AppFabric 缓存的企业库安全缓存

> ID：13652767
> 
> 赞同：0
> 
> 时间：2012-11-30T20:35:04.530
> 
> 标签：c#, asp.net, security, enterprise-library, appfabric-cache

企业库安全块是否可以使用 AppFabric 缓存而不是 EnterpriseLibraryCaching？我可以简单地换出默认缓存块并使用 AppFabric 缓存来获取我的身份和主体吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:38:53.850

我没有尝试过，但由于企业库源代码可用，因此应该可以更改缓存提供程序（从 ent lib 到 AppFabric 缓存）。

但是我相信 Ent Lib 缓存可以与 AppFabric 缓存并存。从您的场景中，您可以“按原样”使用 Ent Lib 缓存作为安全块，并使用“AppFabric 缓存”将对象/数据的副本存储在内存中。

HTH。

# java - 应用程序无法在 Android AVD 上运行

> ID：13652770
> 
> 赞同：0
> 
> 时间：2012-11-30T20:35:09.713
> 
> 标签：java, android, android-emulator

我在 Eclipse 上制作了一个应用程序，我想测试它是否有效。该应用程序已安装在模拟器中，但在运行时一直失败。我检查了我的代码，似乎没有任何问题。

这是错误消息：

```
[2012-12-01 04:05:14 - RSSReader] Android Launch!
[2012-12-01 04:05:14 - RSSReader] adb is running normally.
[2012-12-01 04:05:14 - RSSReader] Performing android.test.InstrumentationTestRunner JUnit launch
[2012-12-01 04:05:14 - RSSReader] Automatic Target Mode: Preferred AVD 'emu7' is  available on emulator 'emulator-5554'
[2012-12-01 04:05:14 - RSSReader] Uploading RSSReader.apk onto device 'emulator-5554'
[2012-12-01 04:05:17 - RSSReader] Installing RSSReader.apk...
[2012-12-01 04:05:26 - RSSReader] Success!
[2012-12-01 04:05:26 - RSSReader] Launching instrumentation android.test.InstrumentationTestRunner on emulator-5554
[2012-12-01 04:05:26 - RSSReader] Failed to launch test 
```

这是我从 LogCat 得到的异常消息：

```
E/StrictMode(646): at java.lang.Thread.run(Thread.java:856) 
```

我已经研究了几个小时，但我没有找到任何解决方案，也没有找到导致此错误的原因 >_<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:43:51.383

Open command prompt and reset the adb by

```
adb kill-server
adb start-server 
```

If you still cannot get your application to run

Goto the devices tab on eclipse and hit the drop down arrow and select `reset adb`

Window -> Show View -> Devices

# ios - 旋转 MKAnnotationView 的显示图像

> ID：13652772
> 
> 赞同：0
> 
> 时间：2012-11-30T20:35:23.620
> 
> 标签：ios, ios6, mkmapview, mkannotationview, cgaffinetransform

我目前正在使用 CGAffineTransformMakeRotation 旋转 MKAnnotationView 的图像属性。但是，在这种情况下，整个视图以及标注气泡都会旋转。所以我遵循了[MKAnnotationView Only Rotate the Image property](https://stackoverflow.com/questions/8401514/mkannotationview-only-rotate-the-image-property/8427625#comment18639397_8427625)中的建议，现在正在创建一个 UIImageView 并将其作为子视图添加到 MKAnnotationView。图像现在可以毫无问题地显示和旋转。但是，现在 MKAnnotationView 不响应触摸事件。我需要它像以前一样表现 - 在点击/触摸时它应该显示标注气泡。有什么想法我需要做什么吗？

**我尝试的初始方式（旋转标注气泡）：**

```
MKAnnotationView *aView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Pin"];
aView.image = [UIImage imageNamed:@"mapPin.png"];
float newRad = degreesToRadians(degreesToRotate);
[aView setTransform:CGAffineTransformRotate(CGAffineTransformIdentity, newRad)]; 
```

**使用 UIImageView 并添加为子视图：**

```
MKAnnotationView *aView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Pin"];
UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"mapPin.png"]];
iv.userInteractionEnabled = YES;
[aView addSubview:iv];
aView.canShowCallout = YES; 
```

**更新** 我尝试添加手势识别器，但它不起作用。当我点击地图上 MKAnnotationView 中的 UIImageView 时，不会调用 imageTapped 方法。这是在方法内： - (MKAnnotationView *)mapView:(MKMapView *)mView viewForAnnotation:(id )annotation

```
MKAnnotationView *aView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Pin"];

UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"mapPin.png"]];
iv.userInteractionEnabled = YES;
iv.exclusiveTouch = NO;

UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
[iv addGestureRecognizer:tapGesture];

[aView addSubview:iv]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T19:56:39.577

我在这里尝试了所有答案，但没有一个完全奏效，但我找到了一个不同的解决方案！

我相信最简单的方法是`UIImage`在设置`image`. `MKAnnotationView`如果你有成百上千的注释，这可能会表现不佳，但如果你只需要旋转几个东西（比如我的例子），它就可以了。

我找到了一个帮助类来旋转 UIImages，然后在设置`image`属性之前简单地使用它来旋转 UIImage `MKAnnotationView`。

助手类在这里：[http ://www.catamount.com/forums/viewtopic.php?f=21&t=967](http://www.catamount.com/forums/viewtopic.php?f=21&t=967)

现在，要在地图上旋转 MKAnnotationView 的 UIImage 属性而不牺牲标注气泡，请执行以下操作：

```
- (MKAnnotationView *)mapView:(MKMapView *)pMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MyAnnotationView *annotationView = [[MyAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"WayPoint"]; 

    annotationView.image = [annotationView.image imageRotatedByDegrees:45.0];

    annotationView.canShowCallout = YES;

    return annotationView;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-16T20:29:39.603

我意识到这是一个非常古老的问题，但我最近遇到了这个问题，它有一个非常简单的解决方案。使用图像视图时注释视图变得不可点击的唯一原因是 MKAnnotationView 在未设置图像时具有 (0,0) 的大小。图像视图是可见的，因为注释视图没有裁剪到边界。我所要做的就是在注释视图上设置框架以使其再次可点击。

```
MKAnnotationView *aView = [[MKAnnotationView alloc] initWithAnnotation:annotation  reuseIdentifier:@"Pin"];
UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"mapPin.png"]];
[aView addSubview:iv];
annotationView.frame = (CGRect) {
            .origin = CGPointZero,
            .size = iv.frame.size
        };
aView.canShowCallout = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:06:01.353

尝试对图像视图执行类似的操作，看看是否可以将其触摸事件传递给注释。

```
//Do this before you add the imageview as a subview
self.imageView.userInteractionEnabled = YES;
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
[self.imageView addGestureRecognizer:tapGesture];

- (void) imageTapped:(UITapGestureRecognizer *)tapGesture {
    MKAnnotationView * annotationView =  (MKAnnotationView *)tapGesture.view.superview;
    if (annotationView.selected) {
        [annotationView setSelected:NO animated:YES];
    } else {
        [annotationView setSelected:YES animated:YES];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T19:46:05.323

您可以使用以下 Swift 扩展方法来提供帮助。最流行的答案是使用链接的帮助程序库导致图像模糊。

```
extension UIImage {

    func rotated(degrees degrees : Int) -> UIImage {
        // calculate the size of the rotated view's containing box for our drawing space
        let rotatedViewBox = UIView(frame: CGRectMake(0,0,self.size.width, self.size.height))
        let rotation = CGFloat(degrees) * CGFloat(M_PI) / 180
        let t = CGAffineTransformMakeRotation(rotation);
        rotatedViewBox.transform = t;
        let rotatedSize = rotatedViewBox.frame.size;
        UIGraphicsBeginImageContextWithOptions(rotatedSize, false, 0.0);
        let context = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(context, rotatedSize.width/2, rotatedSize.height/2);
        CGContextRotateCTM(context, rotation);
        CGContextScaleCTM(context, 1.0, -1.0);
        CGContextDrawImage(context, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), self.CGImage);
        let rotatedImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        return rotatedImage;
    }
} 
```

用法：

```
annotationView.image = UIImage(named: "my_image")!.rotated(degrees: 45) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-05-15T12:49:23.803

// 只需在添加子视图之前设置图像属性，它就像魅力一样工作

```
MKAnnotationView *aView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Pin"];
UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"mapPin.png"]];

aView.image = [UIImage imageNamed:@"mapPin.png"];   //   just this line

[aView addSubview:iv];
aView.canShowCallout = YES; 
```

# html - 相对于直接相对父级的绝对 DIV 位置（）.left？

> ID：13652774
> 
> 赞同：0
> 
> 时间：2012-11-30T20:35:24.773
> 
> 标签：html, css, positioning, css-position

我有一个`"child"`位置是绝对的子 div。它的父级`p1`具有相对定位。p1 也有一个父级`p2`，其定位也是相对的。

那么当我得到孩子的位置（）时。离开它相对于p1或p2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:40:36.843

`p1`，因为它`child`最近的非静态定位祖先。

# coldfusion - 有人访问 Application.cfc 时出现错误页面

> ID：13652776
> 
> 赞同：3
> 
> 时间：2012-11-30T20:35:41.017
> 
> 标签：coldfusion, coldfusion-9, application.cfc

我只是在考虑有人可能会在 URL 中提供 Application.cfc 的场景。我知道这不会起作用，因为它是由 ColdFusion 引擎保留的，用户会看到一个错误。

在这种情况下是否可以重定向用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:58:24.890

我刚刚使用站点范围的错误处理程序成功捕获了它。这对您来说是一个可行的解决方案吗？

小更新，想通了：

```
<cftry>
    <cfif error.Message EQ "Invalid request of Application.cfm, Application.cfc, or OnRequestEnd.cfm file.">
        <cflocation url="#getContextRoot()#/#getDirectoryFromPath(error.Template)#">
    </cfif>
    <cfcatch>that didn't work</cfcatch>
</cftry> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:22:09.693

好吧：您应该像处理网站上任何未捕获的错误一样处理此类错误：将其留给[`onError()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html)处理程序/[`<cferror>`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d29.html)代码/[站点范围的错误模板](http://help.adobe.com/en_US/ColdFusion/9.0/Admin/WSc3ff6d0ea77859461172e0811cbf3638e6-7ffc.html)。当您使用 Application.cfc 时，onError() 是这里最好的方法。

这种错误不需要特殊处理，但*任何*类型的未处理错误都应该得到适当的处理。如果你不这样做（听起来你不是），你应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:26:03.847

我认为 CF 在可以抓取错误的位置拦截对 application.cfc、application.cfm 和 onrequestend.cfm 的调用。

我刚刚在我的一个 Coldfusion 开发站点上进行了一些测试，并将 application.cfc 放在定义的 IIS 网站主文件夹之前的父文件夹中，并尝试调用该文件。它为找不到文件返回 404 错误。由于coldfusion 搜索到根文件夹来查找文件，它仍然会找到您的application.cfc 文件，即使它不在IIS 可访问文件夹中。IIS 会将您的 404 错误转为直接请求。

处理您的 404 错误可能是解决方案。

我认为这也是非 Windows 服务器环境的解决方案。

# opencv - 对 OpenCV 的 FaceRecognizer 有什么信心？

> ID：13652778
> 
> 赞同：8
> 
> 时间：2012-11-30T20:35:44.467
> 
> 标签：opencv, face-recognition

我一直在使用 OpenCV 的 FaceRecognizer 进行人脸识别项目，进行性别区分。该算法运行良好，但我想在我的程序中实现一些额外的功能，比如预测的置信度。

predict 函数可以输出置信度，但我不确定它的含义。这种信心实际上衡量的是什么，我可以将其转换为百分比吗？

```
int predictedLabel = -1;
double confidence = 0.0;
model->predict(face_resized, predictedLabel, confidence);
string result_message = format("Predicted class = %d / Confidence = %d.", predictedLabel, confidence);
cout << result_message << endl; 
```

这是输出的样子。 [https://www.dropbox.com/s/65h1n5180ulz3hl/facerecConfidence%20.jpg](https://www.dropbox.com/s/65h1n5180ulz3hl/facerecConfidence%20.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T01:25:38.810

[这里](http://opencv-users.1802565.n2.nabble.com/Confidence-Level-based-on-Euclidean-Distance-td5876309.html)有一个关于 OpenCV 用户列表中实际距离的简短讨论。

总而言之，他们使用的功能是：

```
distance = 1.0f - sqrt( distSq / (float)(nTrainFaces * nEigens) ) / 255.0f 
```

但是，该函数的作者说它是一个非常粗略的指南，而不是完整的证明指南。请参阅用户列表讨论的链接以获取对论文的参考和对替代指标的建议。

# python - 将 x 轴的 2 个刻度放在同一个图中

> ID：13652780
> 
> 赞同：3
> 
> 时间：2012-11-30T20:35:53.803
> 
> 标签：python, matplotlib

我已经看到了如何使用命令在单个图中为 y 轴添加 2 个刻度的示例`twinx()`。但是，我仍然不知道如何为 x 轴添加 2 个刻度。就我而言，我从 MATLAB 导入 [x,y] 数据并绘制它们。我想让我的原始数据 x（我们可以称之为`x1`）显示在图的底部，标准化的 x 数据（我们可以称之为`x2`）显示在图的顶部。我的代码是：

```
from scipy.io import loadmat
import matplotlib.pyplot as plt
import numpy as np

# loading data
fid_1 = 'beta_sweep_020.mat'
m1 = loadmat(fid_1)

x = m1['vt_dX']
x1 = np.reshape(x, x.size)
x2 = x1 / (-466.0)
y = m1['vt_beta']
y1 = np.reshape(y, y.size)

# plot
fig = plt.figure()
ax = fig.add_subplot(111)

plt.plot(abs(x1),y1,'r')
plt.show() 
```

谁能帮我这个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:49:58.390

使用`ax.twiny()`：

```
import matplotlib.pyplot as plt
import numpy as np

x1 = np.linspace(0,1000000,100)
x2 = x1 / (-466.0)
y1 = np.log(x1)

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = ax1.twiny()
line1, = ax1.plot(x1,y1,'r')
line2, = ax2.plot(x2,y1,'b')

plt.legend((line1, line2), ('red', 'blue'))
plt.show() 
```

![在此处输入图像描述](../Images/7758f0830c2de8cc6f24cb034e3ef430.png)

# jsf-2 - JBoss AS7 - 无法处理部署的 POST_MODULE 阶段

> ID：13652783
> 
> 赞同：4
> 
> 时间：2012-11-30T20:35:57.950
> 
> 标签：jsf-2, jboss, jboss7.x, jboss5.x

当我部署我的项目 (jsf) 时，我总是在我的 JBoss AS7 上收到以下错误。在 JBoss 6 上一切正常。该错误消息的原因可能是什么？您知道我该如何解决吗？

**JBoss AS7-控制台**

```
21:25:17,026 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "myproject.war"
21:25:17,662 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit."seminarpla
ner.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."myproject.war".POST_MODULE: Failed to proce
ss phase POST_MODULE of deployment "myproject.war"
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final
.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2
.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
Caused by: java.lang.RuntimeException: Error getting reflective information for class at.uhs.myproject.util.HibernateTransactionFilter w
ith ClassLoader ModuleClassLoader for Module "deployment.myproject.war:main" from Service Module Loader
        at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-serve
r-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)

        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final
.jar:7.1.1.Final]
        ... 5 more
Caused by: java.lang.NoClassDefFoundError: org/hibernate/Session
        at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_31]
        at java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_31]
        at java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_31]
        at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:57) [jboss-as-server-7.1.1.Final.jar
:7.1.1.Final]
        at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-serve
r-7.1.1.Final.jar:7.1.1.Final]
        ... 10 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.Session from [Module "deployment.myproject.war:main" from Service Module Load
er]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
        ... 15 more

21:25:17,708 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "myproject.war" was rolled bac
k with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"myproject.war\".POST_MODULE" => "org.jboss.msc.servic
e.StartException in service jboss.deployment.unit.\"myproject.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"sem
inarplaner.war\""}}
21:25:17,756 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment myproject.war in 48ms
21:25:17,758 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."myproject.war".POST_MODULE: org.jboss.msc.service.Star
tException in service jboss.deployment.unit."myproject.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "seminarplane
r.war"

21:25:17,764 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was
 rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"myproject.war\".
POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"myproject.war\".POST_MODULE: Failed to process
phase POST_MODULE of deployment \"myproject.war\""}}}} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:11:30.453

最后我有我的问题的答案。我必须编辑`jboss/standalone/configuration/standalone.xml`文件并添加以下内容（添加数据源）：

```
 <subsystem xmlns="urn:jboss:domain:datasources:1.0">
        <datasources>
            <datasource jndi-name="java:jboss/datasources/myDatasource" pool-name="myDatasource" enabled="true" use-java-context="true">
                <connection-url>jdbc:postgresql://localhost/mydatabase</connection-url>
                <driver>org.postgresql</driver>
                <pool>
                    <min-pool-size>2</min-pool-size>
                    <max-pool-size>50</max-pool-size>
                    <prefill>false</prefill>
                    <use-strict-min>false</use-strict-min>
                    <flush-strategy>FailingConnectionOnly</flush-strategy>
                </pool>
                <security>
                    <user-name>myUser</user-name>
                </security>
                <validation>
                    <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>
                    <validate-on-match>false</validate-on-match>
                    <background-validation>false</background-validation>
                </validation>
            </datasource>
            <drivers>
                <driver name="org.postgresql" module="org.postgresql">
                    <xa-datasource-class>org.postgresql.xa.PGXADataSource</xa-datasource-class>
                </driver>
            </drivers>
        </datasources>
    </subsystem> 
```

# sublimetext2 - 如何在 Sublime Text 2 中编辑原生构建系统？

> ID：13652786
> 
> 赞同：23
> 
> 时间：2012-11-30T20:36:04.587
> 
> 标签：sublimetext2

好的，这是一个非常微不足道的问题，但在任何地方都找不到答案。

我知道某处必须有一个包含所有构建系统的 JSON 文件，但我就是找不到它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-30T21:07:04.377

[这是关于 ST2 构建系统的文档](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)

例如，Ruby 构建文件位于此处：

`~/Library/Application Support/Sublime Text 2/Packages/Ruby/Ruby.sublime-build`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-25T16:40:17.130

苹果电脑：

`Preferences ► Browse Packages`将打开`foo.sublime-build`存储所有文件的查找器窗口。

您自己创建的构建 sys 脚本应位于：

`/Users/YOURUSERNAME/Library/Application Support/Sublime Text 3/Packages/User/`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-12T01:43:44.473

正如 dbw 所说，基本上您应该将默认设置文件复制到您的用户文件夹并对其进行编辑以覆盖默认设置。并且在 ST3 上大多数默认设置文件都被打包，使用 PackageResourceView 将使您的工作更轻松。

例如在 Windows 上编辑默认 ST3 python buid 设置：

*   **ctrl+alt+p**，输入“ **prv** ”并选择“ **open** ”调用PackageResourceView的open。
*   选择“ **python** ”>“ **Python.sublime-build** ”
*   注意默认文件路径是“...\Sublime Text 3\Packages\Python\Python.sublime-build”，所以创建一个用户副本到用户“\AppData\Roaming\Sublime Text 3\Packages\Python\Python.sublime-构建”并编辑它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-09T11:21:49.140

在崇高使用这一步

> 工具 -> 构建系统 -> 新构建系统

将打开一个新的构建文件。在保存这个文件时，sublime 会提示***文件对话框选项***来保存文件。你可以看到sublime 保存所有原生构建文件的***位置。***从这个位置您可以编辑现有的本地构建文件。

# mysql - 比较 MySQL 中的日期

> ID：13652787
> 
> 赞同：0
> 
> 时间：2012-11-30T20:36:05.587
> 
> 标签：mysql, date, datetime, time

表中的一个字段包含类型为 的日期`DATETIME`。现在我想检查表中是否有行`date > NOW() - INTERVAL 5 MINUTE`。这不返回任何内容。当我尝试运行上面的代码时，我在五分钟内在表中插入了数据，但如前所述，什么都没有出现。

看来这种比较是无效的。如何检查表中是否有最近五分钟插入的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:38:53.243

我更喜欢[DATE_ADD()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)。

```
SELECT * FROM mytable WHERE date > DATE_ADD(NOW(), INTERVAL -5 MINUTE); 
```

另外，请确保您的时区是正确的。

# ruby-on-rails - ruby on rails 安装 JSON ubuntu 错误

> ID：13652788
> 
> 赞同：6
> 
> 时间：2012-11-30T20:36:07.587
> 
> 标签：ruby-on-rails, rubygems

嘿，我是 Rails（以及 linux）的新手，我不断收到此错误：

```
Installing json (1.7.5) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file  -- mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:1:in `<main>'

Gem files will remain installed in /home/jack/.bundler/tmp/10426/gems/json-1.7.5 for inspection.
Results logged to /home/jack/.bundler/tmp/10426/gems/json-1.7.5/ext/json/ext/generator/gem_make.out
An error occurred while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling.
jack@jack-ThinkCentre:~/rails_projects/sample_app$ 
```

我无法单独安装 gem 或使用捆绑安装。我使用 rvm 安装导轨。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T05:33:25.403

**安装 ruby​​1.9.1-dev 包应该可以为你解决这个问题**

```
sudo apt-get install ruby1.9.1-dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-11T21:51:36.980

“在运行 ruby​​ 2.2.3 的 ubuntu-trusty-64 上存在同样的问题。解决方案是安装 libgmp3-dev。”

```
sudo apt-get install libgmp3-dev 
```

# java - 读取 JSF WebContent 文件夹中的文本文件

> ID：13652795
> 
> 赞同：1
> 
> 时间：2012-11-30T20:36:50.047
> 
> 标签：java, jsf, resourcebundle

好的，所以我正在尝试检索和读取我的 JSF 项目的 WebContent/resources/ 文件夹中的文本文件，但我不知道如何从我的支持 bean 获取到 if 的相对路径......关于如何的任何建议去检索和阅读这个文件？

![在此处输入图像描述](../Images/22c4a574ce87e505c5cfb79bb508a86c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:15:32.860

```
((ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext()).getRealPath("/resources/") 
```

将为您提供资源文件夹的文件系统路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:08:07.040

您可以使用此答案中所述的资源功能读取文件：

[如何在 JSF 应用程序中引用文件资源](https://stackoverflow.com/questions/1528201/how-to-reference-file-resource-in-a-jsf-application)

```
InputStream stream = FacesContext.getCurrentInstance().getExternalContext()
.getResourceAsStream("/foo.xsd"); 
```

# sql - 从 Excel 列更新 SQL

> ID：13652801
> 
> 赞同：0
> 
> 时间：2012-11-30T20:37:29.663
> 
> 标签：sql, sql-update

每次从 Mfg 设备捕获数据时，我都需要使用 Excel 表中的当前作业信息更新 SQL 表，我可以通过创建一个存储过程来执行此操作，该存储过程可以使用由捕获数据的程序运行的 JScript 执行并将其写入数据库。

我现在可以很好地查询 Excel 工作表并查看我需要的数据，但是格式有点麻烦，无需运行查询来逐行分隔数据，然后进行一次更新，我想不出如何更新它。

针对工作表查询：

```
 SELECT Item, L05, L08, L09, SS1, SS2, SS3
 FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY F8) AS rownumber, F1 AS Item, F2 AS L05, F3 AS L08, 4 AS L09, F5 AS SS1, F6 AS SS2, F7 AS SS3
    FROM OpenDataSource( 'Microsoft.ACE.OLEDB.12.0',
    'Data Source="C:\Job.xlsx";Extended Properties="Excel 12.0 XML;HDR=NO";')..."'Job Details$'") AS T2
  Where rownumber >= 5 AND rownumber<=8 
```

回报：

```
Item L05       L08        L09       SS1       SS2       SS3
WO   806314    806334     806618    806314    805886    807031
TE   TE2-05712 TE2-04481  TE2-06364 TE2-06345 TE2-06362 TE2-04420
TF   TF2-10874 TF2-07754A TF2-14249 tf2-10874 TF2-12635 TF2-12468
Qty  39144     82800      127200    36348     121800    50660 
```

每个设备行是一列，每个数据项是工作表中的一行，我需要引用这些值并更新到如下所示的表：

```
LINE      WO      TE      TF      Qty
Line05    NULL    NULL    NULL    NULL
Line08    NULL    NULL    NULL    NULL
Line09    NULL    NULL    NULL    NULL
SS1       NULL    NULL    NULL    NULL
SS2       NULL    NULL    NULL    NULL
SS3       NULL    NULL    NULL    NULL 
```

理想情况下，由于工作表是固定的，我可以在更新语句中单独引用 Excel 单元格，但如果可能的话，我还没有看到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:58:17.047

您也许可以使用以下内容：

```
select *
from
(
  select item, value, line
  from
  (
    <yourquery>
  ) x
  unpivot
  (
    value
    for line in (L05, L08, L09,
                SS1, SS2, SS3)
  ) unpiv
) src
pivot
(
  max(value)
  for item in ([WO], [TE], [TF], [QTY])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c6c40/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:57:41.360

@bluefeet这可以拉出正确的顺序，但是所有的值都是NULL，我最终在这个问题之外思考了一点，而不是重新安排我创建的T-SQL中的所有内容并将一个新的Excel工作表隐藏在工作簿中的单元格按我需要的顺序链接到原始工作表，然后改为查询。

感谢大家的帮助。

# algorithm - 如何构建连接组件图？

> ID：13652805
> 
> 赞同：2
> 
> 时间：2012-11-30T20:37:39.330
> 
> 标签：algorithm, language-agnostic, graph

假设我有一个字符矩阵（A，B，...）。我想找到所有用相同字符填充的连续“区域”，并创建一个顶点对应于这些“区域”的图形。当且仅当对应区域具有公共边界时，图顶点才连接。

例如：

```
输入矩阵：
AABC
ABBB
CCDD

领域：
1(A)、2(B)、3(C)、4(C)、5(D)

输出图（邻接表）：

1(A) - 2(B), 4(C)
2(B) - 1(A)、3(C)、4(C)、5(D)
3(C) - 2(B)
4(C) - 1(A)、2(B)、5(D)
5(D) - 2(B), 4(C)
```

我的问题是：如何在给定矩阵的情况下构建这样的图。

显然，我可以这样做；

*   运行 BFS/DFS 以查找连接的组件（“区域”）
*   再次扫描矩阵以找到每个“区域”的邻居。

有没有更简单、更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:44:32.983

I dont think that there is a much better solution.
Some optimisation would be possible converting characters to int. But this would not change the effort in big O Notation.

Some might want to to store the info in bit fields to win a speed contest, but this is not worth the effort, neither the code would be readable.

# android - 如何将数据从 Activity 类转发到 View？

> ID：13652808
> 
> 赞同：1
> 
> 时间：2012-11-30T20:37:51.077
> 
> 标签：android, view, android-activity

我创建了布局。我在那里添加了视图：

```
<app.test.application.EObrazView
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

现在，例如用户正在单击按钮。在 Activity 中正在执行适当的功能`setOnClickListener`。我想将有关它的信息发送到 View class `app.test.application.EObrazView`。

这个怎么做？如何在这些类之间共享信息？

编辑：

```
EObrazView view1;
view1 = (EObrazView) findViewById(R.id.myView);
[button on click listener]
view1.newImage(wo); 
```

新图片（）; 是 EObrazView 中的函数，我想在按下活动类中的按钮时使用它。不幸的是，有一个错误：java.lang.NullPoniterException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:40:42.140

假设视图来自您，似乎是这样。您必须在视图类中创建方法。

然后在 XML 中为视图分配一个 id：

```
android:id="@+id/myId" 
```

你在活动中获得了对这个视图的引用

```
EObrazView view = (EObrazView)findViewById(R.id.myId); 
```

并且可以调用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:47:28.113

将您的布​​局代码更改为：

```
<app.test.application.EObrazView
    android:id="@+id/myView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

然后在你调用之后`setContentView`，`OnCreate`你`Activity`可以通过调用来获得对该视图的引用`findViewById(R.id.myView).setOnClickListener()`

如果您使用`OnClickListener`, when`onClick`被调用，您将获得对被单击视图的引用，然后您可以调用您喜欢的任何（公共）函数。

如果我在 Activity 中有多个可点击视图，我希望实现我的 Activity `OnClickListener` ，然后`findViewById(R.id.someViewId).setOnClickListener(this)`在 OnCreate 中为每个可点击视图调用，然后我使用如下 switch 语句：

```
@Override
public void onClick(View someView) {
    switch (someView.getId()){
         case someViewId:
             //doing something such as call someView.someFunction()
             break;
         case someOtherViewId:
             //do something else!
             break;
    }
} 
```

# grails - 有什么方法可以覆盖默认的 Camel FatalFallbackErrorHandler？

> ID：13652810
> 
> 赞同：3
> 
> 时间：2012-11-30T20:37:59.250
> 
> 标签：grails, groovy, apache-camel

有没有办法覆盖默认的 Apache Camel [FatalFallbackErrorHandler](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/processor/FatalFallbackErrorHandler.html)？

正如类文档所述，它的目的是“在由其他错误处理程序（例如 OnExceptionDefinition）处理时用作安全回退的 ErrorHandler。” 事实上，这正是我想要处理的场景，除了 FatalFallbackErrorHandler 的简单日志记录，我想将消息传递给 activemq 端点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:40:59.900

不，那里没有。如果嵌套错误处理程序触发它会变得非常复杂，这也可能导致循环等。

# c++ - 额外的 10 键键盘的单独输入

> ID：13652811
> 
> 赞同：3
> 
> 时间：2012-11-30T20:38:00.740
> 
> 标签：c++, windows, keyboard, directinput

我正在用 C++ 编写 Windows DirectX 11 软件，我希望接收来自常规键盘和 10 键键盘的输入。我希望次要用户能够从 10 键键盘进行输入，而不会中断主要用户对全键盘的使用。例如，如果主要用户正在输入文本框，我希望次要用户能够将 10 键数据发送到软件单独处理，这样它就不会影响文本框输入。

我目前正在为鼠标和键盘使用 DirectInput。但如果有人知道通过 Windows API 的解决方案，我也会考虑这一点。

当我在 DirectInput 中创建键盘设备时，我当前使用的是 GUID_SysKeyboard 值，它将两个键盘合二为一，因此我的软件无法识别键盘输入的来源。是否可以使用 EnumDevices 来识别两个键盘并创建单独的 DirectInput 设备？我想会是这样，但我不确定如何从提供给 EnumDevices 回调的 DIDEVICEINSTANCE 结构中识别每个设备。我想让它尽可能通用，以便它可以与不同组合和型号/品牌的键盘一起使用。

提前感谢您的任何帮助或建议！

[（注意：我在GameDev.net](http://www.gamedev.net/topic/635136-separate-input-for-additional-10-key-keypad/)上发布了同样的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:53:54.800

我相信顶行上的数字（当然在 F 键下）的值与键盘数字相同，但为了与所有键盘兼容，而不仅仅是带小键盘的键盘，我建议将其保留在顶行

# assembly - 简单的 x86-64 汇编算法

> ID：13652812
> 
> 赞同：1
> 
> 时间：2012-11-30T20:38:06.047
> 
> 标签：assembly

我正在尝试为评论中的公式编写汇编语言代码。我遇到了麻烦，因为指向数组的指针是 64 位寄存器，我应该将最终结果存储在 32 位寄存器中，所以我显然缺少对寄存器如何工作的一些基本了解。我包含了我尝试的解决方案，但是当我尝试使用一个参数是 64 位寄存器而另一个参数是 32 位的 movl 或 subl 时出现错误。我也不确定我的推理是否正确。任何帮助，将不胜感激。

```
#    WRITEME: At this point, %r12 and %rbx are each pointers to two arrays
#   of 3 ints apiece, a0 and a1\.  Your job is to write assembly language code
#   in the space below that evaluates the following expression, putting the
#   result in register %esi (the 32 bit form of register %rsi):
#   
#    (a1[0]-a0[0]) * (a1[0]-a0[0]) + 
#    (a1[1]-a0[1]) * (a1[1]-a0[1]) + 
#    (a1[2]-a0[2]) * (a1[2]-a0[2])
#   
#    
#   It is possible to do this using 11 instructions. You need to use extra
#   registers, of course. Since  you are not calling any functions, you have a
#   lot of choices. %r12 and %rbx are already occupied, but you could use
#   %r13d through %r15d (32 bit forms of %r13 through r15) safely, and also
#   %eax, %ecx, %edx and of course %esi, since that is where the result will
#   be stored.

###########

# Your code here
movl $0, %esi
movl %rbx, %eax #errors here
subl %r12, %eax #and here
imull %eax, %eax
movl 4(%rbx), %ecx
subl 4(%r12), %ecx
imull %ecx, %ecx
movl 8(%rbx), %edx
subl 8(%r12), %edx
imull %edx, %edx
movl %eax, %esi
addl %ecx, %esi
addl %edx, %esi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:57:17.263

`movl %rbx, %eax`意思是：'将 rbx 的内容复制到 eax'，但是由于 rbx 是一个 64 位寄存器，而 eax 是一个 32 位寄存器，这将失败。我认为您的意思是“将 rbx 指向的内存内容复制到 eax 中”：`movl rbx %eax`

# android - SHA-256 哈希在 Android 中产生错误的结果

> ID：13652817
> 
> 赞同：3
> 
> 时间：2012-11-30T20:38:12.063
> 
> 标签：android, hash, salt, sha256

我正在尝试使用编码作为盐进行加密`12345`，`1111`我`SHA-256`得到的答案是：`010def5ed854d162aa19309479f3ca44dc7563232ff072d1c87bd85943d0e930` 这与[此站点](http://hash.online-convert.com/sha256-generator)返回的值不同。

这是代码片段：

```
public String getHashValue(String entity, String salt){
    byte[] hashValue = null;
    try {
        MessageDigest digest =  MessageDigest.getInstance("SHA-256");
        digest.update(entity.getBytes("UTF-8"));
        digest.update(salt.getBytes("UTF-8"));
        hashValue = digest.digest();
    } catch (NoSuchAlgorithmException e) {
        Log.i(TAG, "Exception "+e.getMessage());
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return BasicUtil.byteArrayToHexString(hashValue);
} 
```

我已经用 SO 的样本验证了我的打印方法，结果很好。有人可以告诉我这里有什么问题吗？

只是为了澄清 - 当我在 iOS 代码中加密相同的值和盐时，返回的值与转换站点给出的值相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:00:08.967

如果您在该站点中填写 hmac secret 的可选部分，将使用 HmacSHA256 算法。使用此函数可以产生相同的结果：

```
public static String getHmac(String entity, String salt) throws Exception{
    Mac mac = Mac.getInstance("HmacSHA256");
    mac.init(new SecretKeySpec(salt.getBytes(), "HmacSHA1"));
    byte[] bs = mac.doFinal(entity.getBytes());
    return new HexDumpEncoder().encode(bs); // use your favorite hex converter
} 
```

如果您想从该站点获得相同的输出，请尝试在没有 hmac 密码的情况下散列此值“123451111”。

很明显，两次调用 MessageDigest.update 相当于使用连接值调用一次。

# css - 文本上的 CSS 不起作用

> ID：13652825
> 
> 赞同：0
> 
> 时间：2012-11-30T20:39:13.803
> 
> 标签：css, css-float

我有一个 CSS 错误，我似乎无法通过边距或填充来解决。可能是一个快速修复，只需要有人看看它

问题在于出现在右侧下方的文本，该文本包含在单个`font`标记中。

[页面错误](http://cardpaymentmachines.com/form2.php)

[该页面的 CSS](http://cardpaymentmachines.com/css2/style.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:51:37.327

***提示***：不要使用`font`标签 ..[它已被弃用](http://www.w3.org/TR/html4/present/graphics.html#h-15.2.2)

添加到`#form`css 规则`overflow:hidden`。
在`font`标签（*或者`span`你将使用*的）中，添加`float:left`和`clear:both`以及你想要的边距/填充。

阅读[http://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)和[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)了解浮动元素的工作原理。

# sql-server - '21' 附近的语法不正确

> ID：13652827
> 
> 赞同：-5
> 
> 时间：2012-11-30T20:39:42.743
> 
> 标签：sql-server, vb.net

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim cmd As New SqlCommand("insert into accountant(acc_id,acc_name,payment_type,bill_no) values ('" & TextBox1.Text & "','" & TextBox2.Text & "','" & TextBox3.Text & "','" & TextBox4.Text & "'", cn)
    cn.Open()
    cmd.ExecuteNonQuery()
    cn.Close()

    MsgBox("Accountant data inserted SucsessFully")
    TextBox1.Clear()
    TextBox2.Clear()
    TextBox3.Clear()
    TextBox4.Clear()

    accouantant_Load(sender, e)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:44:37.623

可能您的文本框中有一个单引号。
解决方案是使用参数来构建您的 sql 字符串。
如果使用参数，则不会出现字符串、日期或其他字段的解析问题，但是，参数最重要的是防止[Sql Injection Attacks](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

```
 Dim cmd As New SqlCommand("insert into accountant(acc_id,acc_name,payment_type,bill_no)" + 
                              "values (@id, @name, @ptype, @bnum)", cn)
    cn.Open()
    cmd.Parameters.AddWithValue("@id",TextBox1.Text)
    cmd.Parameters.AddWithValue("@name", TextBox2.Text)
    cmd.Parameters.AddWithValue("@ptype" TextBox3.Text)
    cmd.Parameters.AddWithValue("@bnum", TextBox4.Text)
    cmd.ExecuteNonQuery()
    cn.Close() 
```

请注意，首先，我不知道您的 acc_id 字段是否是 Identity 列。在这种情况下，不要为其添加值。它将由数据库自动计算。
其次，我假设所有字段都是 varchar/nvarchar 或类似的类型。如果不是这种情况，那么您应该对参数值使用转换，例如

```
 cmd.Parameters.AddWithValue("@bnum", Convert.ToInt32(TextBox4.Text)) 
```

# sql - 如何获取每个外键的最短日期记录的记录 ID？

> ID：13652828
> 
> 赞同：2
> 
> 时间：2012-11-30T20:39:54.830
> 
> 标签：sql, sql-server-2008, tsql, group-by, greatest-n-per-group

我有下表

```
recordID               createdDate                         ForeignKeyID
00QA000000PtFXaMAN     2012-01-03 13:23:36.000             001A000000ngM21IAE
00QA000000OS2QiMAL     2011-12-15 12:03:02.000             001A000000ngM21IAE
.
.
.
. 
```

我正在尝试获取foreignKeyID 的recordID，其中createdDAte 是foreignKeyID 的min(createdDate)

如果 recordID 是 identity int 我可以通过执行以下查询来获得它

```
Select min(recordId),ForeignkeyID
from table 
group by ForeignKeyId 
```

我原本以为我可以使用以下查询创建临时表，然后将其加入到 minDate 和 foreignKeyID 上的表中，但后来我发现 foreignKeyId 的多个记录具有完全相同的 createdDate。

```
Select min(createdDate) as minDate,ForeignKeyID
from table
group by ForeignKeyId 
```

我对使用临时表或子查询或其他任何东西持开放态度。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:42:41.083

一种方法是

```
select A.ForeignKeyID, R.recordID
from (select distinct t.ForeignKeyID from table as t) as A
    outer apply
    (
        select top 1 t.recordID
        from table as t where t.ForeignKeyID = A.ForeignKeyID
        order by t.createdDate asc
    ) as R 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/755c5/7)

另一种方法是

```
select top 1 with ties
    t.recordID, t.ForeignKeyID
from table as t
order by row_number() over (partition by t.ForeignKeyID order by t.createdDate) 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/755c5/5)

还有另一种方式

```
select A.recordID, A.ForeignKeyID
from
(
    select
        t.recordID, t.ForeignKeyID,
        row_number() over (partition by t.ForeignKeyID order by t.createdDate) as RowNum
    from table1 as t
) as A
where A.RowNum = 1 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/755c5/10)

由于代码短，我比其他人更喜欢第二个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:49:47.417

```
SELECT 
    recordID, createdDate, ForeignKeyID
FROM
  ( SELECT 
        recordID, createdDate, ForeignKeyID,
        ROW_NUMBER() OVER ( PARTITION BY ForeignKeyID 
                            ORDER BY createdDate, recordID
                          ) AS rn
    FROM 
        tableX
  ) AS t
WHERE 
    rn = 1 ; 
```

# jquery - jquery中的按钮文本切换

> ID：13652835
> 
> 赞同：69
> 
> 时间：2012-11-30T20:40:28.730
> 
> 标签：jquery, button, toggle

当我单击“.pushme”按钮时，它会将其文本变为“不要推我”。当再次单击按钮时，我想再次将文本变为“推我”。我怎样才能做到这一点？

```
<html>

<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
    <button class='pushme'>PUSH ME</button>
    <script>
        $(".pushme").click(function () {
            $(this).text("DON'T PUSH ME");
        });
    </script>
</body>

</html> 
```

[http://jsfiddle.net/DQK4v/](http://jsfiddle.net/DQK4v/)

谢谢。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-11-30T20:42:40.747

您可以使用`text`方法：

```
$(function(){
   $(".pushme").click(function () {
      $(this).text(function(i, text){
          return text === "PUSH ME" ? "DON'T PUSH ME" : "PUSH ME";
      })
   });
}) 
```

[http://jsfiddle.net/CBajb/](http://jsfiddle.net/CBajb/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-30T20:46:58.880

你也可以`.toggle()`像这样使用：

```
$(".pushme").toggle(function() {
    $(this).text("DON'T PUSH ME");
}, function() {
    $(this).text("PUSH ME");
}); 
```

更多信息请访问[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)。

这种方式还可以很容易地更改文本或添加超过 2 个不同的状态。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-30T20:44:20.610

Use a custom ID if possible if you would like to apply the action to only that button.

### HTML

```
<button class="pushDontpush">PUSH ME</button> 
```

### jQuery

```
$("#pushDontpush").click(function() { 
    if ($(this).text() == "PUSH ME") { 
        $(this).text("DON'T PUSH ME"); 
    } else { 
        $(this).text("PUSH ME"); 
    }; 
}); 
```

Working CodePen: [Toggle text in button](https://codepen.io/audiobro/pen/NvpoKB)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-30T20:43:11.643

Use an if/else statement.. or ternary if you understand it

```
$(".pushme").click(function () {
    var $el = $(this);
    $el.text($el.text() == "DON'T PUSH ME" ? "PUSH ME": "DON'T PUSH ME");
}); 
```

[http://jsfiddle.net/dFZyv/](http://jsfiddle.net/dFZyv/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-30T21:01:36.073

有这么多很好的答案，我想我会再扔一个。与其他人不同，这一个允许您轻松地循环浏览任意数量的消息：

```
var index = 0,
    messg = [
        "PUSH ME", 
        "DON'T PUSH ME", 
        "I'M SO CONFUSED!"
    ];

$(".pushme").on("click", function() {
    $(this).text(function(index, text){
        index = $.inArray(text, messg);
        return messg[++index % messg.length];
    });
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​);​ 
```

演示：http: [//jsfiddle.net/DQK4v/2/](http://jsfiddle.net/DQK4v/2/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-13T09:08:30.567

```
$(".pushme").click(function () {
  var button = $(this);
  button.text(button.text() == "PUSH ME" ? "DON'T PUSH ME" : "PUSH ME")           
}); 
```

此三元运算符具有隐式返回。如果前面的表达式`?`是`true`它返回`"DON'T PUSH ME"`，否则返回`"PUSH ME"`

这个 if-else 语句：

```
if (condition) { return A }
else { return B } 
```

有等价的三元表达式：

```
condition ? A : B 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-30T20:47:44.763

我更喜欢以下方式，它可以被任何按钮使用。

```
<button class='pushme' data-default-text="PUSH ME" data-new-text="DON'T PUSH ME">PUSH ME</button>

$(".pushme").click(function () {
    var $element = $(this);
    $element.text(function(i, text) {
        return text == $element.data('default-text') ? $element.data('new-text')
                                                     : $element.data('default-text');
    });
}); 
```

[**演示**](http://jsfiddle.net/PHG2a/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-23T04:10:21.533

如果您使用“值”属性设置按钮文本，则需要设置

*   $(this).val()

代替：

*   $(this).text()

同样在我的情况下，将 JQuery 直接添加到按钮的 onclick 事件效果更好：

```
onclick="$(this).val(function (i, text) { return text == 'PUSH ME' ? 'DON'T PUSH ME' : 'PUSH ME'; });" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-23T17:21:34.280

您也可以使用数学函数来执行此操作

```
var i = 0;
$('#button').on('click', function() {
    if (i++ % 2 == 0) {
        $(this).val("Push me!");
    } else {
        $(this).val("Don't push me!");
    }
}); 
```

[演示](https://jsfiddle.net/9s7vro92/)

# ios - 使用模态转换隐藏状态栏显示白色背景

> ID：13652838
> 
> 赞同：4
> 
> 时间：2012-11-30T20:40:35.547
> 
> 标签：ios, hidden, status

隐藏状态栏时有没有办法避免状态栏的白色背景？

当我隐藏它以显示全屏模式视图（带有导航栏）时，状态栏会在模式视图出现之前从黑色变为白色。

我觉得这让人分心。我希望状态栏保持不变，而模态视图移动到位。至少让它变成黑色会很好。

因此，我可以很好地隐藏状态栏，并显示一个没有状态栏的模式视图。我只是不希望在模态视图到位之前发生淡入淡出。

在显示模式视图时，我设法隐藏了状态栏，并且可以使用以下方式以编程方式执行此操作：

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES
                                            withAnimation:UIStatusBarAnimationFade]; 
```

或者在 Interface Builder 中设置“全屏”。我可以通过在 viewWillDisappear 中使用“NO”调用此方法来重新显示状态栏。它工作正常。

我还必须在 plist 中设置“状态栏最初隐藏”，然后在应用加载时将其设置为不隐藏，并将上述调用设置为“否”。

关于如何做到这一点的任何想法？谢谢。

更新：我发现我可以在模态视图出现后使用动画隐藏状态栏，如下所示：

```
 [UIView animateWithDuration:0.8 animations:^(void)
     {
         [[UIApplication sharedApplication] setStatusBarHidden:YES];
     }]; 
```

这不那么烦人了，但是现在状态栏在模态视图就位时消失并且仍然不理想。我希望在状态栏上显示模态视图。实际上，多看几次它看起来还不错，甚至可能看起来很酷:-)

# php - 在哪里散列密码（服务器 || 客户端）

> ID：13652842
> 
> 赞同：1
> 
> 时间：2012-11-30T20:41:11.710
> 
> 标签：php, javascript, encryption, hash

我正在查看斯坦福的 JavaScript 加密库，并意识到我可以在客户端上进行哈希处理。

以前，我一直在使用简洁的 PHP crypt()，因为使用一个命令 - crypt() 我生成了一个 crypt 类型、随机盐、哈希并将这三个项目放入一个字符串中（md5，我知道它有点快速但暂时还可以，[请阅读此处](https://stackoverflow.com/questions/657/encrypting-passwords)）。

看起来像这样：

```
crypt() MD5 hash example:          $1$rasmusle$rISCgZzpwk3UhDidwXvin0 
```

但是，如果在客户端上使用：[斯坦福的 Crypto Library](http://crypto.stanford.edu/sjcl/)进行加密，并利用他们的 SHA-256 实现，则可以在传输到服务器时隐藏密码。

然而，在隐藏密码的同时，它暴露了传输中的哈希值，该哈希值实际上用于进行 sql 查找。

我可以在两端进行哈希处理——客户端和服务器来解决这个问题。这会不会太杀了？

散列密码的标准安全方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:43:35.500

诚实地？最好在服务器端散列您的密码。然后，确保您的应用程序使用[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure) (SSL/TLS)，以便攻击者无法嗅探网络并检索传输中的明文密码。对于登录页面，您可以使用以下命令强制访问者使用 HTTPS：

```
<Location /login.php>
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</Location> 
```

显然，您需要为 SSL 配置您的 Web 服务器，然后才能提供任何安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:51:29.633

散列首先保护的唯一事情是窥探者获得用户密码的明文。如果该用户在其他地方使用该密码，这可以被认为是一件好事。窥探者仍然可以通过传递嗅探到的密码哈希来复制 POST。

要解决查找问题，请勿使用密码哈希进行查找。相反，使用用户名进行查找，当您取回数据时，比较密码哈希。如果它们匹配，那么你有一个有效的登录；如果没有，你不会。

您还可以在服务器端再次散列散列，以确保没有人知道您存储的散列。在安全方面没有矫枉过正。

但是所有这些仍然不能防止已经具有应该发布的值的窥探者。

至于标准解决方案……我相信标准与解决方案一样多。

# vb.net - SolidWorks 中的特征预览

> ID：13652848
> 
> 赞同：2
> 
> 时间：2012-11-30T20:41:41.537
> 
> 标签：vb.net, solidworks

我正在开发一个模拟应用程序，该应用程序使用 SolidWorks 几何数据来定位不属于零件或装配体的组件，并且永远不会。

但是，当用户选择将定位这些项目的参考时，我希望我的应用程序“伪造”我的应用程序创建的组件，这与 SolidWorks 执行特征预览的方式非常相似。

想象一下 SolidWorks 中有一个盒子模型，我的应用程序将显示如何将罐子装入盒子中。我希望能够在不实际添加圆柱形特征或罐头组件的情况下绘制罐头的预览。查看图片以更好地了解我在寻找什么。在图像中，我创建了一个特征并截取了线性图案的特征预览的屏幕截图。我的应用程序不会在角落里放原来的罐头。

![我正在描述的功能预览的屏幕截图...](../Images/78a5dd6928d99c8c9973c4e51375039f.png)

这是怎么做到的，有大神指点一下吗？

谢谢， SH

# android - 在活动启动之前检查网络状态

> ID：13652850
> 
> 赞同：-1
> 
> 时间：2012-11-30T20:41:50.840
> 
> 标签：android, android-intent

我想添加一个功能，当用户单击将您带到网站的按钮时，它应该通知您当前未连接或没有可用的网络连接。目前我有这个代码，但它似乎只是把我直接带到网站（离线无法连接）但没有显示任何信息？

这是我的代码：

```
next7.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
        startActivity(browserIntent);

    }
  });
}
public void  checkNetworkStatus(){

    final ConnectivityManager connMgr = (ConnectivityManager)
     this.getSystemService(Context.CONNECTIVITY_SERVICE);

     final android.net.NetworkInfo wifi =
     connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

     final android.net.NetworkInfo mobile =
     connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

     if( wifi.isAvailable() ){

     Toast.makeText(this, "Wifi" , Toast.LENGTH_LONG).show();
     }
     else if( mobile.isAvailable() ){

     Toast.makeText(this, "Mobile 3G " , Toast.LENGTH_LONG).show();
     }
     else
     {

         Toast.makeText(this, "No Network " , Toast.LENGTH_LONG).show();
     }

} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:45:28.693

让它像这样

```
public boolean checkNetworkStatus() {
    boolean isConected = false;
    final ConnectivityManager connMgr = (ConnectivityManager) this
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (wifi.isAvailable()) {
        isConected = true;
        Toast.makeText(this, "Wifi", Toast.LENGTH_LONG).show();
    } else if (mobile.isAvailable()) {
        isConected = true;
        Toast.makeText(this, "Mobile 3G ", Toast.LENGTH_LONG).show();
    } else {

        Toast.makeText(this, "No Network ", Toast.LENGTH_LONG).show();
    }
    return isConected;
} 
```

和

```
if(checkNetworkStatus())
    {
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
        startActivity(browserIntent);
    }
    else{
        //No internet
    } 
```

# c# - 在这个类中使用枚举有什么作用？

> ID：13652851
> 
> 赞同：0
> 
> 时间：2012-11-30T20:41:54.843
> 
> 标签：c#, enums

我通过网络搜索找到了以下代码，但我不明白作者为什么在该类中使用枚举。是为了价值限制吗？是这样吗？WhichSex 只能采用 'Male' 和 'Female' 字符串值？

```
public class Person
{
   public enum Sex
   {
      Male,
      Female,
   }
   public string Name { get; set; }
   public bool Moustache { get; set; }
   public bool Goatee { get; set; }
   public bool Beard { get; set; }
   public Sex WhichSex { get; set; }
   public double Height { get; set; }
   public DateTime BirthDate { get; set; }
   public bool Favorite { get; set; }     
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T20:45:19.583

枚举用作以在编程中更容易识别的方式表示数字数据的一种方式。

在枚举后面，是一个从零开始播种的整数数据类型，因此在这种情况下，男性为 0，女性为 1。这允许您在代码中使用字符串男性和女性，同时将结果存储为整数而不是字符串在存储和带宽上更容易。

这里枚举的原因很简单。他们可以对其进行 ToString 并获取字符串“男性”或“女性”进行报告，如果需要，他们还可以在以后为“未知”或“未指定”添加另一个值。

[http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:45:16.700

枚举用于将数据限制为一组特定的值，例如：

```
enum Month
{
   January,
   February,
   March,
   April,
   May,
   June,
   July,
   August,
   September,
   October,
   November,
   December
} 
```

然后，在代码中，无论何时`Month`调用类型，调用代码都可以引用 Month 枚举的成员之一（例如：`var month = Month.February`）。

# google-fusion-tables - 如何在没有身份验证的情况下使用 javascript 插入融合表？

> ID：13652852
> 
> 赞同：0
> 
> 时间：2012-11-30T20:41:59.320
> 
> 标签：google-fusion-tables

我想创建一个基本表单，在提交时向融合表发送一个 POST 请求，以将数据作为新行插入。我希望它向公众开放，以便任何人都可以提交表格。似乎需要使用 OAuth 进行 INSERT，因此用户需要使用他们的 google 帐户登录才能填写表格。（类似于[文档中的](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)应用程序 1 ）

有没有办法让用户提交表单而不需要他们登录？也许得到一个预先生成的令牌/秘密，让他们提交到这个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:30:11.777

对于这个用例，您应该使用[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)，它充当用户的某种代理。它是您控制下的技术用户，具有相应表的权限。

另请参阅我过去对类似问题的回答：[#1](https://stackoverflow.com/a/11893279/549755)和[#2](https://stackoverflow.com/a/11619373/549755)

# android - jQuery 移动 Android 2.3 - 3 不工作

> ID：13652862
> 
> 赞同：0
> 
> 时间：2012-11-30T20:42:48.197
> 
> 标签：android, cordova, jquery-mobile

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.init();

    handler = new Handler();
    FILENAME = getString(R.string.fileName);

    if(!fileExistance(FILENAME)){
        //create the file
        FileOutputStream fos;
        try {
            fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
            String string= "{'teamName':'name','players':[{'name':'mary','gol':'2','foto':'xxx','presence':'0'},{'name':'claudia','gol':'3','foto':'xxx','presence':'0'}]}";
            fos.write(string.getBytes());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    //parsing dei dati dal file
    String json = readFile();
    team = parseJson(json);

    appView.addJavascriptInterface(this, "MyTeam");

    super.loadUrl("file:///android_asset/www/menu.html");

} 
```

菜单.html：

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQuery Mobile page</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="themes/myTheme.css" />
        <link rel="stylesheet" href="themes/jquery.mobile.structure-1.2.0.css" /> 

        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/jquery.mobile-1.2.0.min.js"></script>
        <script src="js/jquery-ui-1.9.1.custom.min.js"></script>
        <script src="js/jquery.ui.touch-punch.min.js"></script>
        <script type="text/javascript" src="js/jquery-chron.min.js"></script>
        <!--script type="text/javascript" src="cordova-2.2.0.js"></script-->

        <link rel="stylesheet" type="text/css" href="themes/jquery.mobile.simpledialog.min.css" /> 
        <script type="text/javascript" src="js/jquery.mobile.simpledialog.min.js"></script>

        <link rel="stylesheet" href="themes/main.css" />
    </head>
    <body onload="">
        <div data-role="page" data-theme="a">
            <div data-role="header" data-position="inline">
                <img style="float:left;width:41px;" src="themes/images/ball.png"/>
                <img style="float:right;width:41px;" src="themes/images/ball.png"/>
                <div style="text-align:center"><h1 style="font-size: 1.1em;">Futsal Manager 1.0!</h1></div>

                <div id="navbar" style="display:none" data-role="navbar" data-iconpos="top">
                    <ul>
                        <li><a href="#" data-icon="refresh" >Substitutions</a></li>
                        <li><a href="#" data-icon="star" >Gol</a></li>
                    </ul>
                </div><!-- /navbar -->
            </div>
            <div data-role="content" data-theme="a" id="content">           
                <a data-role="button" data-transition="none" style="margin: 2em;" id="newGame">New Match</a>
                <a data-role="button" data-transition="none" style="margin: 2em;" id="ranking">Players gol/presence</a>
                <a data-role="button" data-transition="none" style="margin: 2em;" id="settings">Settings</a>
                <p id="info"></p>
            </div>

            <div data-role="footer" style="text-align:center">
                    <p class="pFooter">Developed by</p>
                    <img style="text-align:center" src="themes/images/logo.png" />
                    <p class="pFooter">http://www.michelepierri.it</p>
            </div>
        </div>
    </body>
</html> 
```

问题是该页面已正确加载，但是当我单击按钮时出现此异常：12-01 14:45:57.972: E/AndroidRuntime(11229): android.view.ViewRoot$CalledFromWrongThreadException: 只有原始线程创建了一个视图层次结构可以触摸它的视图。

但它适用于 Android 4.0 和最新版本，但从 Android 2.3 到 3 应用程序崩溃。

谁能帮我？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:34:58.133

```
private void loadURL(final String in){
    handler.post(new Runnable() {
        public void run() {
            webView.loadUrl(in);
        }
    });
}

public void loadPage(String in){
    final String url = HTML_ROOT + in;
    //super.loadUrl(url);
    loadURL(url);
} 
```

# ruby - 在非 Rails gem 中使用 ActiveSupport 是否被认为是一种好习惯？

> ID：13652863
> 
> 赞同：3
> 
> 时间：2012-11-30T20:42:50.327
> 
> 标签：ruby, rubygems, activesupport

作为大型 Rails 项目的一部分，我开发了代码。现在我想将它提取为一个独立的脚本，独立于 Rails 与社区共享。

这是我的第一个 gem，包括 Active Support 在内的使用日期函数和变形作为相对较小的 gem 的一部分可能有点过头了。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:54:36.623

ActiveSupport 不久前进行了重构，可以非常方便地选择您想要的功能。

查看[核心扩展](http://guides.rubyonrails.org/active_support_core_extensions.html)页面了解更多信息。

我认为对于一个认真的 Ruby 开发人员来说，已经安装了 Rails 及其组件是很常见的。只是不要坚持使用特定版本的 ActiveSupport。指定他们开始做核心扩展的版本作为你需要的最低限度，它会很高兴。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T20:59:22.007

这是一个非常主观的电话。虽然 ActiveSupport 确实提供了许多有用的日期操作方法，包括它只是因为它是极其繁重的，并且当包含在不期望它的项目中时可能会导致绝对混乱。如果启用某些功能，例如自动加载系统，可以`require`以戏剧性和意想不到的方式改变工作方式以及处理丢失类的方式。

如果您正在创建一个*可能*会与 Rails 或 ActiveSupport 配对的项目，那么这可能没什么大不了的。如果这种情况很少发生，您可能希望简单地在您自己的模块中重新实现日期方法，以便没有依赖关系。

请记住，ActiveSupport 对许多核心类进行了重大的重新装饰，因此将其强加于使用您的 gem 的人可能会使您的 gem 成为一个相当不守规矩的客人。

没有什么比陷入依赖地狱更烦人的了，其中一个人无法使用比 X 更新的 ActiveSupport，而另一个人无法使用这么旧的版本，这意味着根本没有单一版本可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:46:35.193

只需查看 ActiveSupport 的源代码 (https://github.com/rails/rails/tree/master/activesupport) 并提取您需要的类和/或方法。

# iphone - Opening external app to view the local file in iOS

> ID：13652870
> 
> 赞同：1
> 
> 时间：2012-11-30T20:43:13.657
> 
> 标签：iphone, ios, ipad

I am developing an iOS app and would like to open the locally stored file using external app. I know that typically it can be done through "Open with..." menu, but instead previewing it locally and giving Open with menu, I'd like to open it instantly with an another app.

For instance, I have a Help file in PDF format, which I'd like to open at once when user clicks [?] button. I want it to open using specifically Adobe Acrobat. No problem if it is not installed :)

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:50:40.163

好吧，通常您不需要使用外部应用程序打开相当常见的格式……您可以使用 Apple 在框架中提供的东西在您的应用程序内部进行。

例如 pdf 可以用 WebKit 或[Core Graphics](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html#//apple_ref/doc/uid/TP30001066-CH214-TPXREF101)打开。

在您的情况下，只需推送一个使用 CoreGraphics 打开 pdf 的 UIView ...设置时间不应超过 2 分钟。

# sts-springsourcetoolsuite - How can I make STS faster, especially during debug?

> ID：13652871
> 
> 赞同：0
> 
> 时间：2012-11-30T20:43:22.500
> 
> 标签：sts-springsourcetoolsuite

I have a Roo project deploying to the vfabric tomcat server. When I run it on the server, it takes five seconds to load. When I run it on the server to debug it, it takes almost a full minute to load.

I read the thread that suggested turning off validators, but that was for a much older version (2.3.2 and I'm on 3).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:32:36.267

如果主要问题是服务器启动时间，那么您能做的最好的事情就是禁用 Spring Insight。它显着增加了启动时间。您还可以迁移到基于 Eclipse 3.8 的 STS。Eclipse 3.8 的性能明显优于 Eclipse 4.2。

# objective-c - Is this a common way of implementing a factory pattern in ObjectiveC?

> ID：13652872
> 
> 赞同：0
> 
> 时间：2012-11-30T20:43:33.800
> 
> 标签：objective-c

I'm studying some ObjC source here and one of the controllers has a property of type `NSDictionary` that is called "`overrideClassNames`". As key it wants the class of an existing interface and as value the class of a subclass of the existing one, like:

```
controller.overrideClassNames = @{(id)[DefaultType class] : [MySubClassedDefaultType class]}; 
```

Whenever an instance of `DefaultType` is required, it would look up the dictionary and create a more specialized instance if one has been set.

I'm thinking if this is actually a common approach in ObjC? Coming from C# and Java, my idea would have been to create a delegate factory method that is called if an instance of `DefaultType` is required. The user of the class could then return his more specialized version. Alternatively (in C#) I would make the class generic and let it have a `<T> : DefaultType, new()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:53:50.013

这主要与工厂模式无关，而是与 IMO 的子类化有关——但是

是的。拥有一个返回类对象的方法是一种常见的方法 - 在 osx 中例如。一个控件有一个 CellClass（它分配/初始化来为它绘制）

在单身人士中，您通常会遇到以下情况：

```
_sharedInstance = [[[self class] alloc] init]; 
```

# servlets - Add Servlet to Jetty using Configuration only?

> ID：13652873
> 
> 赞同：0
> 
> 时间：2012-11-30T20:43:33.783
> 
> 标签：servlets, configuration, jersey, pojo, embedded-jetty

Dealing with Jetty (v 8) instance running embedded under a JPOS QBean. For sake of simplicity, I'd like to add Jersey based servlet based REST web service using configuration onlly without having to program the servlet registration. I do have the JXB annotated POJO resource components where the jersey packages setting is pointing to, but that's not important yet.

To my simplistic mind, the following added to the Jetty webdefault.xml should do the trick:

```
<!-- JPOS As WebSvc -->
<servlet>
<servlet-name>jpos</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
  <param-value>true</param-value>
</init-param>
 <init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>com.test.rest.svc</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping> <servlet-name>jpos</servlet-name> <url-pattern>/jpos/*</url-pattern></servlet-mapping> 
```

However, it seems this entry is simply not registered at all, as I see only default and jsp servlets initialized in the logs.

I was looking at the jetty.xml contents and have added a custom handler for different purposes, but it's not clear if a servlet can be added via the Handler collection settings. It seems the built-in ServletHandler is already initialized and is loading the default and jsp servlets, so I don't think I can list that in the jetty.xml to add my servlet (even if I knew how to configure it).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:26:24.413

结果很简单，只需将 Jersey servlet 配置放入其自己的 web.xml 并将该文件放在配置的 webapps 根目录下，如下所示：
webapps
^^^^root
^^^^^^^index.html
^^^ ^^^^WEB-INF ^^^^^^^^^^
web.xml

# python - Reusing httplib.HTTPConnection in python 2.7

> ID：13652875
> 
> 赞同：3
> 
> 时间：2012-11-30T20:43:39.720
> 
> 标签：python, python-2.7

I recently inherited a python project, and I'm working on maintaining it now. Part of the code makes a few hundred thousand requests from a website and saves the results to a database. The code is reusing the same httplib.HTTPConnection object for reach request and then just looping over a

```
conn.request("GET",someString,'',headers)

response = conn.getresponse() 
```

section. A few days ago in my logs I saw that one of the requests threw the exception:

```
[Errno 104] Connection reset by peer 
```

followed by every other conn.request() failing. My first inclination was to just build a new connection for each request, but the perfomance impact of that was profound and horrible. So my question is, how do I fix this, especially since I'm not 100% sure how I can even really test this.

If I just call conn.connect() after an exception, will it correctly reconnect?

I'm looking for advise on how to fix it and possibly how I could test it.

Thanks for your time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:07:34.917

我认为您首先需要确定要处理的故障模式。例如，连接是否由于服务器上的临时资源问题而重置，并且快速周转连接将修复它？或者，服务器是否关闭或重新启动，您应该中止您的进程？

假设第一种情况，我认为您的想法是正确的。尝试这样的事情（注意，这不是工作代码 - 这只是逻辑的一个例子）：

```
while True:
    try:
        conn.request("GET",someString,'',headers)
        response = conn.getresponse()
    except httplib.HTTPException, e:
        conn.connect()
        continue
    break 
```

您可能应该为此添加一些逻辑，以在重复的连接尝试之间暂停并在一定次数的尝试后放弃（这基本上是上面的第二种情况）。

为了对此进行测试，请尝试使用 tcpkill 来重置 TCP 连接：

[http://www.gnutoolbox.com/tcpkill-command/](http://www.gnutoolbox.com/tcpkill-command/)

# mysql - mysql select id and name from other table and join query

> ID：13652876
> 
> 赞同：7
> 
> 时间：2012-11-30T20:43:46.417
> 
> 标签：mysql, sql

i have 2 table named projects and tasks

in projects table i have:

```
id   name
---------
1    some 
```

in tasks table i have:

```
id   name   project_id
----------------------
1    some        1 
```

Now,how can i select * from task table and get the 'name' from projects table by 'project_id' in table tasks?

thanks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T20:45:42.197

```
select task.id, task.name, proj.id, proj.name
from tasks task left join projects proj on proj.id=task.project_id; 
```

Using [left join](http://dev.mysql.com/doc/refman/5.0/en/join.html) ensures you get something even if there is no record in the projects table. If you want to ensure coherency, you may do

```
select task.id, task.name, proj.id, proj.name
from tasks task, projects proj
where proj.id=task.project_id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:47:40.857

```
SELECT t.*, p.[name] FROM tasks t
INNER JOIN projects p
ON t.project_id = p.[id]
WHERE t.project_id = ____ 
```

你用你想要的project_id填写*_*

# list - How to make a horizontal list with divs?

> ID：13652879
> 
> 赞同：0
> 
> 时间：2012-11-30T20:43:52.070
> 
> 标签：list, html

I am trying to make a simple list , in which there will be 3 divs. I can not do that, although I did exactly what in this topic was mentioned :

[Horizontal (inline) list in HTML/CSS with divs](https://stackoverflow.com/questions/8437790/horizontal-inline-list-in-html-css-with-divs)

The divs appear vertical and I can not imagine why.

Do you know any other way to do it?

Thank you in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:03:52.520

如果您使用`display: inline`，否则`float: left`它们可能会出现水平。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:22:54.263

1.  使用显示：内联；与使用 inline-block 不同。
2.  看起来您正在尝试显示列表项，而不是 div 内联。

如果#2 正确，则需要确保使用 display: inline-block，而不是 display: inline。

此外，从您的代码中，您需要确保您的 ul 元素具有 id="navlist" ...相同的样式不适用于文档中的所有其他 UL 元素。

# visual-c++ - How to get installed Windows 8 store App from Desktop app without WinRT

> ID：13652881
> 
> 赞同：0
> 
> 时间：2012-11-30T20:43:56.777
> 
> 标签：visual-c++, windows-8, windows-runtime

We have a win32 desktop application which would collect list of applications installed on the machine. Generally we would go to uninstall hive to collect application list (which is similar to how control panel populate its Add/Remove program list). With windows 8 store app, this is not working any more since store app is not stored same as desktop app. I am able to find this source code [Enumerate app packages by user SID sample](http://code.msdn.microsoft.com/windowsdesktop/Package-Manager-Inventory-5bee970a) . I tested on windows 8, it works great. However there is a catch.

I would like to be able to link statically with windows CRT so I don't need to distribute CRT along with this simple exe (I could not assume that required CRT would be installed on customer's machine, plus our nightly build env is still VS2005, this could only build on developer machine, with that, the CRT version could be updated as part of VS update or windows update which would result in higher version of CRT than what's at customer's machine). Our current solution would ship CRT version which our code is built as private side by side assembly (on VS2005). However with WinRT on windows 8, I could not static link CRT library any more (the old CLI/C++ actually has the same limitation).

The sample code uses the [PackageManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.management.deployment) new at Windows 8 (WinRT). Just wonder if there is other way to get this information without WinRT. My gut feeling would be no, however it won't hurt to ask.

By the way, one thing I do notice is the embedded manifest for the exe built on VS 2012 doesn't have the dependentAssembly for CRT there at all like the exe I built on VS2005 as following:

```
<dependentAssembly>
  <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
</dependentAssembly> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:09:56.920

要访问 Windows 8 的新现代 UI 部分，您将需要 WinRT 库。

# jquery - 如何从 HTML 片段文件的集合中读取数据？

> ID：13652884
> 
> 赞同：2
> 
> 时间：2012-11-30T20:44:03.487
> 
> 标签：jquery, html, sql, parsing, text

我继承了一个项目，该项目有一个非常奇怪的怪癖，我想解决这个问题。该项目有一个网络表单，用户在其中键入数据，然后单击“提交”按钮。鉴于我们办公室有一个 SQL 数据库，我希望从表单中读取每个值并保存在 SQL 表中。

然而，这种情况并非如此。有些值保存在 SQL 中，但有些没有。如何查找未保存在 SQL 中的值？简单的回答：表单中的 Javascript 是这样编写的，当用户点击提交时，整个表单的标记被发送到服务器并保存在一个文本文件中。然后，当授权用户想要查看用户如何填写表单时，会从文本文件中检索标记并将其发送到浏览器。

这显然不是最好的方法，因为它浪费磁盘空间并且不容易查询。

这就是我重写代码的原因，以便将来 Web 表单中的条目将完全保存在 SQL 中。

与此同时，我有数以万计的文本文件，其中包含需要导入 SQL 的 HTML 片段。我的想法是编写一个实用程序来逐一解析文件，并将字段值保存在 SQL 中。

我想就如何做到这一点征求意见。通常，我使用 jQuery 从 HTML 读取值，但我不知道用这么多文件执行此操作的实用方法。我还可以使用 Visual Studio 2010。

什么工具和技术最适合完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:18:02.500

如果您在 Windows 机器上，我将首先使用 Windows 脚本主机列出您需要处理的文件。如果将下面的代码复制到一个js文件中，将该js文件保存到包含数千个文件的目录中，然后在Windows中双击该js文件（在wscript中运行它），它将保存一个列出数千个文件的数组你需要检查。

```
var io, here, fileToWrite, files;

io   =  new ActiveXObject('Scripting.FileSystemObject');
here = unescape(io.GetParentFolderName(WScript.ScriptFullName) + "\\");

fileToWrite = io.OpenTextFile(here + "\\filelist.js", 2, true);
fileToWrite.writeLine("filelist=[");

for (files = new Enumerator(io.GetFolder(here).files); !files.atEnd(); files.moveNext()) {
  var file = files.item();
  fileToWrite.writeLine('"' + file.Name + '",');
}

fileToWrite.writeLine("]");
fileToWrite.Close();
WScript.Echo("Process Complete - an array of files has been created"); 
```

然后，您可以创建一个基于浏览器的 jQuery 脚本，该脚本将按顺序加载每个文件，以通常的方式提取信息，然后使用 FileSystemObject 将其保存为更易使用的格式，例如文本文件。（您必须为此使用 IE。）

如果您在尝试在 IE 中创建 FileSystemObject 时遇到安全问题，只需使用“hta”扩展名重命名您的 html 文件 - 这将创建一个有权执行此操作的 html 应用程序。

# ruby-on-rails - 在 Rails 中加密会话信息

> ID：13652887
> 
> 赞同：1
> 
> 时间：2012-11-30T20:44:14.260
> 
> 标签：ruby-on-rails, security

默认情况下，rails 使用 cookie 存储会话信息。我遵循的教程说这是最好的方法，而且速度非常快，而且它都被加密了。但是当我对 cookie 内容进行 base64 解码时，我可以在那里看到我的会话信息。它混入了很多乱码字符中，但它就在那里。

我在这里想念什么？

Rails 不是使用那个秘密令牌来加密 cookie 中的信息吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:02:38.380

Rails 使用秘密令牌对会话进行*签名。*原始数据仍然存在，但更改它会导致它不再匹配签名，Rails 将拒绝它。cookie 字符串看起来像`session_data--signature`，会话数据是 base64 编码的编组对象，签名是`HMAC(session string, secret token)`。

会话数据的一般假设是它不是秘密的（因为它通常应该只包含一些东西，比如 CSRF 令牌和用户 ID），但它不应该由用户更改。cookie 签名实现了这一点。

如果您需要实际加密数据以使用户永远看不到它，您可以使用 OpenSSL 对称加密之类的方法来执行此操作，或者您可以切换到非 cookie 数据存储。

这是我自己的应用程序 cookie 商店的变体；我还没有测试过，但理论上这应该会为你生成实际加密的 cookie。请注意，这将明显比默认的 cookie 存储慢，并且根据其运行时间，可能是 DOS 向量。此外，加密数据将比未加密数据更长，并且会话 cookie 有 4kb 的限制，因此如果您在会话中存储大量数据，这可能会导致您超出该限制。

```
# Define our message encryptor
module ActiveSupport
  class EncryptedMessageVerifier < MessageVerifier
    def verify(message)
      Marshal.load cryptor.decrypt_and_verify(message)
    end

    def generate(value)
      cryptor.encrypt_and_sign Marshal.dump(value)
    end

    def cryptor
      ActiveSupport::MessageEncryptor.new(@secret)
    end
  end
end

# And then patch it into SignedCookieJar
class ActionDispatch::Cookies::SignedCookieJar
  def initialize(parent_jar, secret)
    ensure_secret_secure(secret)
    @parent_jar = parent_jar
    @verifier   = ActiveSupport::EncryptedMessageVerifier.new(secret)
  end
end 
```

# jquery-ui - jquery form validation for formvalidation plugin

> ID：13652890
> 
> 赞同：0
> 
> 时间：2012-11-30T20:44:29.473
> 
> 标签：jquery-ui, jquery, jquery-plugins

I am trying lot to get it work but no luck..any jquery expert can share there view please.

i have form, for validation i use form validation plugin (jquery) which doese validation correctly when i put.

```
$("#contact").validationEngine();  // #contact is my form id. 
```

now i want to submit the form using ajax on button click (submit form button) which is also happening correctly using following.

```
$(".button").click(function() {
 ajax code goes here ...
} 
```

here problem is when i click on submit button it goes and update database it does not wait for formvalidation plugin to validate it...

what actually i want to do is first validate the form if all okay then go and call ajax function to update the database. if validation fails then dont call ajax function to update data base.

could any one please share some clues.

Thank you in advance...

regards, Mona.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:06:58.963

```
 $(function() {
   $("#contact").validate({
     rules: {

     },
    submitHandler: function(form){
  ajax call
    }
 });
}); 
```

原始帖子[jQuery：在提交之前验证](https://stackoverflow.com/questions/4255988/jquery-validate-before-submitting) 是否有助于解决您的问题。

# html - 如何启用 HTML TextArea 自动调整宽度？

> ID：13652899
> 
> 赞同：3
> 
> 时间：2012-11-30T20:44:50.173
> 
> 标签：html, textarea, width, autoresize

是否可以让 HTML TextArea 自动调整其宽度与浏览器窗口宽度（我的意思是动态）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T20:46:42.410

当然。例如像这样

**HTML**

```
<textarea id="flex">Test text</textarea> 
```

**CSS**

```
#flex { width: 80% } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T08:52:28.507

我们还可以通过使用 bootstrap 来实现以下功能。[Bootstrap 使用网格布局，将整个屏幕划分为 12 个网格，并且随着屏幕窗口大小的调整，主体内部的不同元素也会发生偏移和大小调整。您可以从这个站点下载 bootstrap 库： http](http://getbootstrap.com/) ://getbootstrap.com/

# objective-c - Objective-C – 等待两个异步方法完成

> ID：13652900
> 
> 赞同：6
> 
> 时间：2012-11-30T20:44:55.290
> 
> 标签：objective-c, ios, cocoa, asynchronous, wait

我正在调用四个要以同步顺序执行的方法，前两个方法是同步的，后两个方法是异步的（从 URL 获取数据）。

伪代码：

```
- (void)syncData {

    // Show activity indicator
    [object sync]; // Synchronous method
    [object2 sync]; // Synchronous method
    BOOL object3Synced = [object3 sync]; // Async method
    BOOL object4Synced = [object4 sync]; // Async method
    // Wait for object3 and object4 has finished and then hide activity indicator
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T21:28:46.957

使用屏障：

`void dispatch_barrier_async(dispatch_queue_t queue, dispatch_block_t block);`

> 提交一个用于异步执行的屏障块并立即返回。
> 
> 当屏障块到达私有并发队列的前面时，它不会立即执行。相反，**队列一直等待，直到其当前正在执行的块完成执行**。此时，队列自己执行屏障块。在屏障块完成之前，在屏障块之后提交的任何块都不会执行。

此示例输出`1 2 3 4 done`虽然是异步的，但可能是`1 2 4 3 done`. 由于我了解您要处理活动指示器，因此这无关紧要。

```
#import <Foundation/Foundation.h>
int main(int argc, char *argv[]) {
    @autoreleasepool {
        dispatch_queue_t queue = dispatch_queue_create("com.myqueue", 0);
        dispatch_sync(queue,  ^(){NSLog(@"1");} );
        dispatch_sync(queue,  ^(){NSLog(@"2");});
        dispatch_async(queue, ^(){NSLog(@"3");});
        dispatch_async(queue, ^(){NSLog(@"4");});
        dispatch_barrier_sync(queue, ^(){NSLog(@"done");});
    }
} 
```

其他测试异步代码的方法见：[https ://stackoverflow.com/a/11179523/412916](https://stackoverflow.com/a/11179523/412916)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T21:02:21.827

假设您实际上有某种方式知道异步方法何时完成，您可能想要的是：

```
- (void)syncData {

    // Show activity indicator
    [object sync]; // Synchronous method
    [object2 sync]; // Synchronous method

    _object3Synced = _object4Synced = NO;
    [object3 syncWithCompletionHandler:
          ^{
               _object3Synced = YES;
               [self considerHidingActivityIndicator];
          }]; // Async method
    [object4 syncWithCompletionHandler:
          ^{
               _object4Synced = YES;
               [self considerHidingActivityIndicator];
          }]; // Async method
}

- (void)considerHidingActivityIndicator
{
     if(_object3Synced && _object4Synced)
     {
         // hide activity indicator, etc
     }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T21:02:39.550

您可以创建一个子类`UIActivityInidicator`，添加一个`activityCount`属性并实现这两个附加方法：

```
- (void)incrementActivityCount
{
    if(_activityCount == 0)
    {
        [self startAnimating];
    }
    _activityCount++;
}

- (void)decrementActivityCount
{
    _activityCount--;
    if(_activityCount <= 0)
    {
        _activityCount = 0;
        [self stopAnimating];
    }
} 
```

现在，每当您开始使用活动计数器调用`incrementActivityCount`并在其完成块中（或以其他方式完成时）调用的东西时`decrementActivityCount`。如果你想在这些方法中做其他事情，上面只是一个简单的例子，在大多数情况下可能就足够了（特别是如果你设置了`hidesWhenStopped = YES`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:55:40.227

您需要启动第一个 Async 方法并使用完成块。在第一个异步方法的完成块中，您将启动第二个异步方法。尽管这种方式使得使用异步方法变得无关紧要。

# ruby-on-rails - 更新 RefineryCMS 时出错

> ID：13652902
> 
> 赞同：0
> 
> 时间：2012-11-30T20:45:09.733
> 
> 标签：ruby-on-rails, ruby, refinerycms, refinery

我正在尝试在 ruby​​ 1.9.3 上从炼油厂 1.0.9 更新到 2.0.9。我收到此错误：

> Bundler 找不到 gem "refinerycms-core" 的兼容版本：
> 
> ```
>  In Gemfile:
>    refinerycms-news (~> 1.2) ruby depends on
>      refinerycms-core (~> 1.0.0) ruby
> 
>    refinerycms (~> 2.0.9) ruby depends on
>      refinerycms-core (2.0.9) 
> ```

您能帮我理解错误以及如何处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:23:33.520

Bundler 尝试确保所有 gem（即其他 gem）的所有依赖项都已安装并满足 gem 设计者指定的版本要求。

在您的 Gemfile 中，您可以通过多种方式指定 Gems 的版本，该`~>`方法表示版本可以大于或等于指定的数字，但不会大到可以在您不知情的情况下安装主要版本。

所以看起来你需要放宽对`refinery-news`gem 版本的限制，它可能有比`1.2`当前允许的更高版本可用（该版本取决于 reinerycms-core 1.0.0，但 reinerycms 需要相同 gem 的更高版本）。

# facebook-graph-api - Facebook 发布预定帖子的时区是什么？

> ID：13652913
> 
> 赞同：1
> 
> 时间：2012-11-30T20:46:03.707
> 
> 标签：facebook-graph-api, timezone

我正在使用 Facebook 图形 API 在页面上发布

Facebook 在页面中发布预定帖子的时区是什么？

是管理员时区吗？

像这样：1354308243

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:47:15.123

我不知道 facebook api，但这看起来像 unix 时间戳，这是自*纪元*以来的秒数，*纪元*是 Jan 1st, 1970 **UTC**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:50:11.617

您正在处理的内容称为时间戳，它根本不会弄乱时区，因为您计算时区时间的时间戳并使用它。无论何时跨越世界不同地区，它都会在指定的时间准确地发生。

因此，不要说在晚上 7 点发布，而是将晚上 7 点转换为时间戳并使用该数字进行操作，例如在 1354308243 上发布。有意义吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T15:45:56.483

通过将我的 php 脚本设置为使用 UTC，我遇到了同样的问题，但是我使用的时间戳在 Facebook 中创建了 +2 小时的时间。在调查和检查参考 API 后，我发现用户的时区与 UTC 有偏差

[https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Dtimezone&version=v2.10](https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Dtimezone&version=v2.10)

我看到我的时区是 UTC 时间的 +2，所以我在 php 脚本中对其进行了更改以进行调整。现在它工作正常。

所以我认为它依赖于管理时区。

# jquery - 使用按钮显示带有 jquery colorbox 的 div

> ID：13652916
> 
> 赞同：0
> 
> 时间：2012-11-30T20:46:25.690
> 
> 标签：jquery, colorbox

我有一个 jquery 函数，它决定向用户显示哪条消息，其中一条是 3 条消息。我在我的页面上将这三条消息分别放在它们自己的隐藏 div 中。

当用户单击页面上的按钮时，将调用该函数，根据结果，我想使用颜色框在弹出窗口中显示 3 个 div 之一（#msg1、#msg2 或 #msg3）。

但是，Colorbox 文档显示使用带有 HREF 的链接来确定要显示的 div；我想使用我的功能。所以我尝试了这个，但它弹出我们的颜色框但不是我的 div，它是空的：

```
 $(function() {
        $('#calcbtn').bind('click', function(){
            var score = 0;
            $('.rb:checked').each(function(){
                score+=parseInt($(this).val(),10);
            });
            // here i have logic to choose the div, assume #msg1 is the div
            $(this).colorbox({inline:true, href:"#msg1", width: "50%", height: "50%"});
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:13:45.510

我想我可能拥有它：

```
 $(function() {
        $('#calcbtn').bind('click', function(){
            var score = 0;
            $('.rb:checked').each(function(){
                score+=parseInt($(this).val(),10);
            });
            //$("input[name=sum]").val(score)
            //alert('score is '+score);
            var $msg;
            if (score > 25) {
                $msg = $('#msg1');
            } else if (score < 15) {
                $msg = $('#msg3');
            } else {
                $msg = $('#msg2');
            }
            $.colorbox({inline:true, href:$msg, width: "50%", height: "50%"});
        });
    }); 
```

# c++ - 提升属性树 put/get DBL_MAX

> ID：13652921
> 
> 赞同：3
> 
> 时间：2012-11-30T20:46:50.137
> 
> 标签：c++, boost, boost-propertytree

我正在编写一个 ptree 并且在某些时候我需要将 DBL_MAX 放入（作为默认值）。当我打开生成的 xml 文件时，我看到了正确的数字。

但是当我使用 ptree.get 获取数字时，会引发异常：`conversion of data to type "d" failed`

这是我的代码：

```
using boost::property_tree::ptree;
ptree pt;

double d=-DBL_MAX;
double d2=-1.797693134862316e+308;
double d3=-1.79769e+308;

cout<<d<<endl;
cout<<d2<<endl;
cout<<d3<<endl;

pt.put<double>("double", d);
write_xml("test.xml", pt);

cout << "totalEndTimeLowerBound: " << pt.get<double>("double")<<endl;
//doesn't work with d and d2, but works with d3 
```

什么可能导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:05:03.067

默认情况下，`ptree`将其值存储为并使用精确`std::string`转换它们：`basic_stringstream`

```
s.precision(std::numeric_limits<double>::digits10+1); 
```

转换为时会出现此问题`DBL_MAX`，`std::string`因为它将数字四舍五入为无效值。您可以使用以下代码检查它：

```
ptree pt;
pt.put("min", -DBL_MAX);
pt.put("max", DBL_MAX);
cout << "Min=" << pt.get<string>("min") << std::endl;
cout << "Max=" << pt.get<string>("max") << std::endl; 
```

使用 Visual Studio，它会打印：

> 最小值=-1.797693134862316e+308
> 
> 最大值= 1.797693134862316e+308

但是，`DBL_MAX`被定义为`1.7976931348623158e+308`打印值超出限制。

有几种解决方法，但没有一个是完美的：

*   使用小于 的不同默认值`DBL_MAX`。例如`1.797693134862315e+308`.
*   捕获`bad_data`异常并假设它意味着默认。
*   使用您的自定义转换器注册新类型。[你可以在这里](https://stackoverflow.com/a/13105184/218774)看到一个例子。
*   降低存储值的精度。您可以使用以下代码执行此操作：

    ```
    namespace boost { namespace property_tree 
    {
      template <typename Ch, typename Traits>
      struct customize_stream<Ch, Traits, double, void>
      {
        static void insert(std::basic_ostream<Ch, Traits>& s, const double& e) {
          s.precision(std::numeric_limits<double>::digits10-1);
          s << e;
        }
        static void extract(std::basic_istream<Ch, Traits>& s, double& e) {
          s >> e;
          if(!s.eof()) {
            s >> std::ws;
           }
        }
      };
    } 
    ```

# scala - 有没有办法简化函数签名播放框架

> ID：13652922
> 
> 赞同：0
> 
> 时间：2012-11-30T20:46:51.957
> 
> 标签：scala, playframework-2.0

我正在使用 play2 并且似乎做了很多以下事情：

```
 def someFunction(request: RequestHeader) = {...} 
```

有没有办法隐式定义请求，这样我就不必总是将它传递给需要请求的各种函数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:27:54.070

您应该使用隐式，这样您就不必显式传递请求。

```
def index = Action { implicit req =>
   someOtherFunction("hi")
   Ok(someFunction)
}

def someFunction(implicit request: RequestHeader) = {...}

def someOtherFunction(otherArgs:String)(implicit req: RequestHeader) = { .. } 
```

# php - 这个 PHP 递归函数有什么问题？

> ID：13652923
> 
> 赞同：1
> 
> 时间：2012-11-30T20:46:54.223
> 
> 标签：php

我有一个包含以下数据的数据库表：

```
categoryId    categoryName    parentCategory
men           Men             root
women         Women           root
shoes         Shoes           root
mensshirts    Men's Shirts    men
menspants     Men's Pants     men
mensjeans     Men's Jeans     men
mensvests     Men's Vests     men
womensshirts  Women's Shirts  women
womenpants    Women's Pants   women 
```

我正在使用递归函数打印出分层菜单。代码如下。

```
function display_children($parent) {
    global $connect;
    $query = "SELECT categoryId, categoryName FROM categories WHERE parentCategory='$parent'";
    $result = mysqli_query($connect,$query);

    if ( $result === false ) {
       printf("Query Error: %s\n", mysqli_error($connect));
       exit();
    }

    echo "<ul>";
    while ($row = mysqli_fetch_assoc($result)) {
       extract($row);
       echo "<li>".$categoryName."</li>";
       display_children($categoryId);   
    }
    echo "</ul>";

    mysqli_close($connect);
}

display_children('root'); 
```

结果，我在屏幕上打印出来：

*   男士
    *   男士衬衫
    *   男士裤子
    *   男士牛仔裤
    *   男士背心
*   女性
*   鞋

递归函数没有打印出其余的子猫，我不知道为什么。我的测试/调试已经确认，在 mensvests 作为 categoryId 传递给函数后，下一个通过的 categoryId 是 women，它应该定位最后的 subcats。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:56:42.520

老实说，您应该重新评估您的方法并废弃该功能。在递归函数中运行查询只是在找麻烦。如果您有 50 个不同的类别分支，您真的要运行 50 个左右的查询，只是为了显示它们吗？您应该阅读[这篇](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)关于使用 MySQL 管理分层数据的文章。通过使用正确的方法，您可以运行一个查询而不是多个查询。文章中适用于您的场景的示例：

```
SELECT t1.name AS lev1, t2.name as lev2, t3.name as lev3, t4.name as lev4
FROM category AS t1
LEFT JOIN category AS t2 ON t2.parent = t1.category_id
LEFT JOIN category AS t3 ON t3.parent = t2.category_id
LEFT JOIN category AS t4 ON t4.parent = t3.category_id 
```

值得注意的是，这篇文章实际上建议遵循嵌套集模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:55:03.953

您将在函数结束时关闭数据库连接。对于递归迭代，在第一次递归达到完全深度后，您将无法使用连接。

更好的方法是将您的数据库连接作为参数传递给函数

```
function display_children($parent, $db) {
    // when you recurse call
    display_children($categoryId, $db);
}

display_children('root', $connect);
mysqli_close($connect); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:56:05.040

我认为您的问题在于您使用“退出”而不是“返回”语句。此外，您关闭与

```
mysqli_close($connect); 
```

这不是你想做的。退出停止你的整个程序，而返回（即使你没有给你返回值）只是退出函数。

然后你必须改变你的算法，这完全不是正确的方法。

对我来说，最好的方法是首先获取所有结果（使用`mysqli_fetch_all`），然后以允许您以正确顺序显示它的方式对数组进行排序。

# rss - 将 pubDate 转换为 yql 中的时间戳 rss

> ID：13652927
> 
> 赞同：1
> 
> 时间：2012-11-30T20:47:09.840
> 
> 标签：rss, yql, pubdate

我有一个 YQL 查询，我正在从 RSS 提要访问数据。我想获取提要中文章的 pubDate，但我不希望它采用（例如）这种格式：

2012 年 11 月 30 日星期五 14:19:55 +0000

我希望它采用这种格式：

2012 年 11 月 30 日

YQL 本身是否有一个简单的函数可以让我这样做？为了清楚起见，我宁愿有一个仅限 YQL 的解决方案，而不必使用 PHP 或 javascript 或任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:43:41.597

检查[此](http://developer.yahoo.com/yql/guide/yql-javascript-objects.html#yql-execute-date)链接。特别看一下**y.date.getOffsetFromEpochInMillis(time_format)**函数。这为您提供以毫秒为单位的纪元。

在你得到这个之后，在你的 YQL 开放数据表定义中，将此时间戳按摩为 mm/dd/yyyy 格式，如[将 Unix 时间戳转换为 JavaScript 中的时间问题中所列](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

# css - 托管在 Dropbox 上的网站不使用 CSS

> ID：13652928
> 
> 赞同：1
> 
> 时间：2012-11-30T20:47:13.530
> 
> 标签：css, dropbox

我在保管箱上托管一个（非常）小网站。我什至没有域名，我只需要一种简单的方法让我不太懂技术的老师访问它，使用 wordpress 或 tumblr 等在线服务似乎太麻烦了，而且没有我想要的那么有效. 我打算把它放在我的公共文件夹中，然后把那个链接发给她，这是我过去做过的，用来向我的朋友展示我在课堂上制作的网站。

但是，由于某种原因，CSS 格式不起作用。这是我过去注意到的一个问题，但当时并不重要。我在我的头标签中相对链接了它，当我提取保存在硬盘驱动器上的文件时它可以工作。只有当我尝试通过 Dropbox 访问它时，我才会注意到这个问题。

我已经看过了，似乎没有其他人遇到过这个问题，我只发现了多个对支持 CSS 的保管箱的引用，所以我不知道为什么会这样。

这是我的代码中的链接，它在 head 标签内：

```
<link rel="stylesheet" type="text/css" href="css/format.css" /> 
```

任何帮助将非常感激。^^

编辑：这是页面，还没有太多内容，但应该是顶部导航链接后面的背景格式。 [https://dl-web.dropbox.com/get/Public/EPortfolio/WritingAndForum.html?w=947f0aa1](https://dl-web.dropbox.com/get/Public/EPortfolio/WritingAndForum.html?w=947f0aa1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:54:31.013

举一个扩展 Cfreak 评论的示例，您需要单独共享 CSS 文件，然后在 HTML 中引用它，如下所示：

```
<link rel="stylesheet" type="text/css" href="https://dl.dropbox.com/u/1234567/cssfile.css"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T23:06:21.340

一种更简单（也更正确）的方法是将您的样式表放在一个名为 css 的文件夹中，然后使用“./”与它建立一个相对链接，这样您就可以摆脱长 url 的麻烦。

```
<link rel="stylesheet" type="text/css" href="./css/styles.css"> 
```

# javascript - keyup 上的格式数量

> ID：13652931
> 
> 赞同：0
> 
> 时间：2012-11-30T20:47:21.893
> 
> 标签：javascript, onkeyup

我想在 keyup javascript 事件上格式化金额。我需要这样的结果：

*   100 > 100
*   1000 > 1 000
*   100000000 > 100 000 000
*   1000,12 > 1 000,12

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:42:16.630

这是一个奇怪的格式函数，想想很有趣：

```
function formatNumber(s) {
  var parts = s.split(/,/)
    , spaced = parts[0]
         .split('').reverse().join('') // Reverse the string.
         .match(/\d{1,3}/g).join(' ') // Join groups of 3 digits with spaces.
         .split('').reverse().join(''); // Reverse it back.
  return spaced + (parts[1] ? ','+parts[1] : ''); // Add the fractional part.
} 
```

[`element.addEventListener(...)`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)您可以使用纯 JavaScript 或 jQuery 中的函数将其附加到元素的“keyup”事件[`.on(...)`](http://api.jquery.com/on/)，例如：

```
$('.my-input').on('keyup', function() {
  var $this = $(this);
  $this.val(formatNumber($this.val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:38:21.243

```
function formatNumberField() {
    // unformat the value
    var value = this.value.replace(/[^\d,]/g, '');

    // split value into (leading digits, 3*x digits, decimal part)
    // also allows numbers like ',5'; if you don't want that,
    // use /^(\d{1,3})((?:\d{3})*))((?:,\d*)?)$/ instead
    var matches = /^(?:(\d{1,3})?((?:\d{3})*))((?:,\d*)?)$/.exec(value);

    if (!matches) {
        // invalid format; deal with it however you want to
        // this just stops trying to reformat the value
        return;
    }

    // add a space before every group of three digits
    var spaceified = matches[2].replace(/(\d{3})/g, ' $1');

    // now splice it all back together
    this.value = [matches[1], spaceified, matches[3]].join('');
}

// attaching event handler with jQuery...
$(document).ready(function() {
    $('#your-element-id').on('keyup', formatNumberField);
});

// With vanilla JS, it can get a little ugly.  This is the simplest way that
// will work in pretty much all browsers.
// Stick this in your "dom is loaded" callback
document.getElementById('your-element-id').onkeyup = formatNumberField; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:48:53.213

你需要这样的东西：

```
function formatNumber(numberString) {
    var commaIndex = numberString.indexOf(',');
    var int = numberString;
    var frac = '';

    if (~commaIndex) {
        int = numberString.slice(0, commaIndex);
        frac = ',' + numberString.slice(commaIndex + 1);
    }

    var firstSpanLength = int.length % 3;
    var firstSpan = int.slice(0, firstSpanLength);
    var result = [];

    if (firstSpan) {
        result.push(firstSpan);
    }

    int = int.slice(firstSpanLength);

    var restSpans = int.match(/\d{3}/g);

    if (restSpans) {
        result = result.concat(restSpans);
        return result.join(' ') + frac;
    }

    return firstSpan + frac;
}

formatNumber('1234567890,12'); // "1 234 567 890,12" 
```

将它与您的事件侦听器一起使用并将表示数字的字符串发送到此函数，它将返回所需格式的字符串

```
input.onkeyup = function () {
    input.value = input.value.replace(/\d+(?:,\d+)?/g, formatNumber);
}; 
```

# javascript - 在 IE 10 中转换 XML AJAX 响应时出错

> ID：13652932
> 
> 赞同：0
> 
> 时间：2012-11-30T20:47:27.207
> 
> 标签：javascript, jquery, xml, xslt, internet-explorer-10

仅在 Internet Explorer 10 中，我在转换从 AJAX 响应返回的 XML 时收到错误：

> 对象不支持属性或方法“transformNode”

这是我的代码：

```
function transformXML(xmlUrl, xsl) {
    $.ajax({
        type: 'GET',
        url: xmlUrl,
        success: function (xml, status, xhr) {
            // cross-browser logic omitted for simplicity
            xml.transformNode(xsl);
        },
        dataType: 'xml'
    });
} 
```

这适用于 IE7 - IE9。IE10有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T20:47:27.207

这是因为，[从 IE 10 开始，`XMLHttpRequest.responseXML`默认返回“本机 XML 文档”而不是 MSXML 文档](http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx)。

您可以通过将属性设置为来强制`XMLHttpRequest`对象返回 MSXML 对象。不幸的是，这会在 Google Chrome 中中断，因此您需要将其包装在 try/catch 中。`responseType``"msxml-document"`

`beforeSend`在 jQuery 的函数中分配它：

```
function transformXML(xmlUrl, xsl) {
    $.ajax({
        type: 'GET',
        url: xmlUrl,
        beforeSend: function (xhr, settings) {
            try { xhr.responseType = "msxml-document"; } catch(err){}
        },
        success: function (xml, status, xhr) {
            // cross-browser logic omitted for simplicity
            xml.transformNode(xsl);
        },
        dataType: 'xml'
    });
} 
```

**注意：** 不要尝试使用该设置 - 当尝试将 设置为无效值`xhrFields`时，jQuery 不会处理 Chrome（和其他浏览器？）引发的错误。`responseType`这需要包含在 try/catch 中，而最好的方法是在`beforeSend`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T02:02:06.027

@mauris：它在 jquery 1.9.1 中被破坏了，因为它们忽略了 responseXML 并从 responseText 创建了一个新的 DOM，这不起作用。

我修改了 jquery 1.9.1（在复制 responseText 之后的第 8570 行附近）

```
try
{
  var xml = xhr.responseXML;
  if (xml && xml.documentElement)
    responses.xml = xml;
} catch (_) { } 
```

这解决了这个问题。该代码与它在 1.8.3 中所做的相同，它包含在 try/catch 中以确保安全。

# android - 使用两个文本视图和一个复选框填充自定义列表视图

> ID：13652935
> 
> 赞同：-2
> 
> 时间：2012-11-30T20:47:36.293
> 
> 标签：android, android-listview, custom-adapter

我已经创建了`main.xml`并且`list.xml` 我的 java 类扩展了`menuActivity` 我有 2 个向量——

```
 Vector<String> name=new Vector<String>();
   Vector<String> nickname=new Vector<String>(); 
```

我也创造了我的`custom holder class`。我的问题是如何将这两个列表传递给我的适配器类。我应该使用哪个适配器？

我尝试将这两个向量放在另一个列表中并将该列表发送到我的自定义 adpater 类。但它没有成功。我被困在这里。baseadpater 和数组适配器有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:16:24.400

BaseAdpater 所做的只是巩固 AbsListView 所需的回调。ArrayAdater 是一个更全面的适配器，它可以将项目列表自动膨胀到 TextView 中。

对于您的情况，我建议扩展 BaseAdapter：

```
class MyAdapter extends BaseAdapter {
    Vector<String> names;
    Vector<String> nicks;

    public MyAdapter(Vector<String> nms, Vector<String> nks) {
        if (nms.size() != nks.size())
            throw new RuntimeException("oops! Wrong sizes for vectors");
        name = nms;
        nicks = nks;
    }

    @Override
    public int getCount() {
        return names.getSize() &&  nicks.getSize();
    }

    @Override
    public String getItem() {
        // Can't really implement with two vectors.
        return null;
    }

    @Override
    public getView(int pos, View convert, ViewGroup mommy) {
        LinearLayout ll = (LinearLayout)convert;

        if (ll == null)
            // Inflate the linear layout - preferrably from resources

        ViewHolder vh = (ViewHolder)ll.getTag();

        if (vh == null)
            // Inflate ViewHolder

        vh.tvname.setText(names.get(pos));
        vh.tvnick.setText(nicks.get(pos));
        return ll;
    }

    class ViewHolder {
        TextView tvname, tvnick;
    }
} 
```

# java - 在 Java 中，是 substring(int k, int y) 还是 substring(int k) 更高效？

> ID：13652943
> 
> 赞同：1
> 
> 时间：2012-11-30T20:48:09.423
> 
> 标签：java, string, performance, jvm, substring

例如，假设我有以下代码：

```
String s1 = "foobar";
s1 = s1.substring(3); 
```

该代码的效率是否会低于：

```
String s1 = "foobar";
s1 = s1.substring(3, 6); 
```

我在想双参数方法在性能方面会更有效，因为单参数方法使用循环遍历索引，直到达到长度。这意味着 JVM 必须调用该`length()`方法来找出何时停止循环。

但是两个参数方法只循环直到到达最后一个索引号。

谁能证实或否认我的假设？

编辑：我不太了解源代码中的这段代码（最后一个返回语句），但这里是 java String 类源代码：

```
public String substring(int beginIndex, int endIndex) {
    if (beginIndex < 0) {
        throw new StringIndexOutOfBoundsException(beginIndex);
     }
     if (endIndex > count) {
        throw new StringIndexOutOfBoundsException(endIndex);
     }
    if (beginIndex > endIndex) {
    }
    return ((beginIndex == 0) && (endIndex == count)) ? this :    // I don't understand this part
         new String(offset + beginIndex, endIndex - beginIndex, value);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T20:50:41.410

[`String.substring()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java#String.substring(int%2Cint))是常数时间¹，它只是提供原始字符串的较小视图。此外，带有一个参数的版本只是...委托给带有两个参数的版本：

```
public String substring(int beginIndex) {
    return substring(beginIndex, count);
} 
```

`count`的返回值在哪里`String.length()`。您选择哪个版本并不重要，它们都非常快。

¹ - 从 Java 7 更新 6 起显然[不再适用](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/src/share/classes/java/lang/String.java)。但这与您的问题无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:52:25.130

我不认为有任何区别。如果您看到 String 类源代码 substring(int beginIndex) ——只需调用 substring(beginIndex, lengthOfTheString)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:52:29.730

```
 public String substring(int beginIndex, int endIndex) 
```

稍微快一些，因为

```
 public String substring(int beginIndex) {
      return substring(beginIndex, count);
 } 
```

所以你会避免一种间接。但这不值得考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:52:31.343

在java源代码中，`substring(beginIndex)`会调用`substring(beginIndex, count)`

# java - 为什么我的程序挂在 DatagramPacket.getData() 的 system.out.print 上

> ID：13652944
> 
> 赞同：0
> 
> 时间：2012-11-30T20:48:13.877
> 
> 标签：java, udp, linked-list, packet, datagram

```
LinkedList<DatagramPacket> queue = new LinkedList<DatagramPacket>();

for (int i = 0; i < queue.size(); i++)
{
    System.out.println("1: This prints.");
    System.out.println("2: This doesn't: " + new String(queue.get(i).getData()));
    int start = (new String(queue.get(i).getData())).indexOf("\r\n") + "\r\n".length();
    data.concat(new String(queue.get(i).getData()).substring(start));
} 
```

我们试图从数据`queue`包列表中获取所有数据，并将它们全部放入一个字符串中。

但是每当它到达第二`println`行（与它下面的行相同）时，程序就会挂起并且不做任何事情。

没有`getData()`印刷作品。例如。

```
System.out.printlin("2: This doesn't: " +  new String(queue.get(i))); 
```

此外，每当我将一个数据包添加到队列中时，我都会立即打印队列中的最后一个数据包，这很有效。

```
public void addPacket(DatagramPacket additional)
{
    queue.add(additional);
    System.out.println("1: " + new String(queue.getLast().getData()));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:54:53.037

我不确定这个`DatagramPacket`类，但这肯定解决了一些与`String`操作和`LinkedList.get`. 可能只是你的程序运行得很慢？

```
StringBuilder dataBuilder = new StringBuilder(); 
Iterator<DatagramPacket> queueIter = queue.iterator();
while(queueIter.hasNext()) {
  DatagramPacket next = queueIter.next();
  System.out.println("1: This prints.");
  System.out.println("2: This doesn't: " + new String(next.getData()));
  int start = (new String(next.getData())).indexOf("\r\n") + "\r\n".length();
  dataBuilder.append(new String(next.getData()).substring(start));
}
data = dataBuilder.toString(); 
```

* * *

如果你尝试这个怎么办：

```
public class Foo {
  // instead of LinkedList<DatagramPacket>
  public LinkedList<String> queue = new LinkedList<String>(); 
  public void addPacket(DatagramPacket additional) {
      queue.add(new String(additional.getData()));
    }
  }
} 
```

# uri - 链接数据：如何链接到提供背景信息的非 RDF 资源

> ID：13652946
> 
> 赞同：4
> 
> 时间：2012-11-30T20:48:23.957
> 
> 标签：uri, rdf, semantic-web

在描述资源的 RDF 文件中，我想包含指向提供背景信息的 HTML 文档的链接。该文档是 HTML，而不是 RDF。我觉得这应该说清楚，可能有某种格式规范（如 dcterms:format）。

我的问题是：

1.  在链接数据/RDF 中链接到非 RDF 资源 (URI) 的最佳方式是什么？
2.  哪个是提供该主题背景信息的文档/资源的最佳词汇术语？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:57:13.343

提供附加信息的一般属性是`rdfs:seeAlso`。正如[规范所说](http://www.w3.org/TR/2000/CR-rdf-schema-20000327/#s2.3.4)，您可以创建一个子属性`seeAlso`来传达更具体的语义。至于对元数据进行编码，我个人会坚持使用[Dublin Core](http://dublincore.org/documents/dcmi-terms/)，并添加一个 bNode，以便可以将外部源的各种属性记录在三重存储中。

所以，如果`some_resource`是你有更多信息的事情：

```
example:some_resource
  rdfs:seeAlso [
    dcTerms:source "http://your.si.te/docs/foo.html"^^xsd:anyURI ;
    dcTerms:format "text/html" ;
    dcTerms:title "Foo user manual"@en ;
    dcTerms:language "en"
  ]. 
```

# printing - Argox OS214 中的自动换行文本 - PPLA

> ID：13652950
> 
> 赞同：5
> 
> 时间：2012-11-30T20:48:42.257
> 
> 标签：printing, label

我使用 PPLA 语言将标签直接打印到 Argox OS-214。

如何自动换行长文本？

我是否必须进行计算，或者是否有任何功能可以为我做这件事？

如果我必须计算，你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:27:14.547

在[PPLA 语言手册](http://www.okey.com.br/catalogos/PPLA&PPLB.pdf)中没有对长文本行自动换行的功能，因此您必须在将命令发送到打印机之前自行计算在何处插入换行符。
如何做到这一点取决于您使用的编程语言；例如，在 PHP 语言中有一个[wordwrap 函数](http://php.net/manual/en/function.wordwrap.php)可以为您完成（wordwrap 函数的 C 源代码在[此处](http://gcov.php.net/PHP_5_3/lcov_html/standard/string.c.gcov.php)，第 803 行）。
可以在[wikipedia](http://en.wikipedia.org/wiki/Word_wrap)上找到对自动换行算法的简单描述：

```
SpaceLeft := LineWidth
for each Word in Text
    if (Width(Word) + SpaceWidth) > SpaceLeft
        insert line break before Word in Text
        SpaceLeft := LineWidth - Width(Word)
    else
        SpaceLeft := SpaceLeft - (Width(Word) + SpaceWidth) 
```

首先，您必须将文本拆分为单词，但我想这对您来说不是问题，因此我不再详细说明。
`LineWidth`应计算为标签宽度减去左右边距宽度。
假设对于您的文本，您使用的是单个固定宽度（非比例）字体，您可以`LineWidth`通过简单地将其除以字符宽度（或简单地打印一长行文本然后计数）将其转换为多个字符打印的字符数）；这样每个单词的长度对应于它的字符数。
否则，如果您使用的是比例字体，则计算每个字的宽度会更加困难，除非您知道每个字符的宽度。
一个想法可能是使用具有相同标签像素大小的图像，只是为了模拟打印和计算在哪里插入换行符，但这需要有一个函数来计算每个单词的像素宽度（例如在PHP 有[imagettfbbox 函数](http://www.php.net/manual/en/function.imagettfbbox.php)），并且在打印机和 PC 上使用完全相同的字体。
请注意，您可能还必须处理一些比标签宽度更长的单词；在这种情况下，您必须简单地拆分单词 at`LineWidth`并继续下一行。

# java - Netbeans 中的 UML 逆向工程损坏

> ID：13652953
> 
> 赞同：1
> 
> 时间：2012-11-30T20:49:01.140
> 
> 标签：java, netbeans, uml, reverse-engineering, netbeans-7

**我的目标：**我想用我在 Netbeans 中的 java 项目制作 UML 图。我真的不在乎它是如何完成的，只要它看起来不错。

我在 Stack Overflow 上看到了一个关于如何在 Netbeans 中基于 Java 代码对 UML 图进行逆向工程[的答案。](https://stackoverflow.com/a/2912545/971592)我尝试了这个解决方案，我认为除了一些使解决方案毫无价值的问题之外，它大部分都有效。

基本上，我遇到的是我将在[该答案](https://stackoverflow.com/a/2912545/971592)中实施分步说明以安装 UML 插件，然后右键单击项目 BONotifier（见下文）并单击“逆向工程师”并将其用作UMLProject1 的源代码（见下文）。

![损坏的 UML 建模器](../Images/aa0f9e55aac9ef208b1761cac9ce97f0.png)

但是，当我打开 UMLProject1 时，模型下什么都没有出现（如上图所示），那里应该有 20 多个类......可能有什么问题？谢谢！

哦，逆向工程日志的输出可以在[这个 paste](http://beta.pastie.org/private/7nlmzaanjouveqx70zgxw)中找到。我认为这可能与这个插件有点旧并且项目正在运行 jdk 1.7 的事实有关。我在一个 1.6 项目上尝试过，遇到了同样的问题。

我完全愿意接受替代解决方案。我已经尝试过 eclipse 解决方案，但我对它们不满意。我更喜欢 Netbeans 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:52:04.543

没有[计划在 Netbeans](http://wiki.netbeans.org/UMLSupport) 7 之后的版本中支持 UML。似乎在 OP 版本的 Netbeans 中破坏 UML 支持的修订中发生了一些事情。另外，原插件不支持 JDK 1.7 版本，所以需要使用 1.6 及以下版本。所以[下载 Netbeans 6.7.1](http://netbeans.org/downloads/6.7.1/index.html)就可以了。

# jquery - 使用 jQuery 获取多个文件选择的所有值

> ID：13652955
> 
> 赞同：11
> 
> 时间：2012-11-30T20:49:07.657
> 
> 标签：jquery, file

> **可能重复：**
> [使用 javascript 从多文件上传控件中检索文件名](https://stackoverflow.com/questions/3654179/retrieving-file-names-out-of-a-multi-file-upload-control-with-javascript)

明白啦：

```
<input type="file" name="file1" multiple="multiple" /> 
```

在 jQuery 中使用它：

```
$("input[name=file1]").change(function() {
    $("input[name=file]").val($("input[name=file1]").val());
}); 
```

现在我的问题是：它只给出第一个选定的文件，我想拥有它们...怎么做？谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-30T21:01:20.130

尽管我在评论中链接到了一个可能的骗局，但它是一个纯 JavaScript 解决方案。如果你喜欢，这里是一个 jQuery 版本：**[jsFiddle 示例](http://jsfiddle.net/j08691/gSBCd/)**

```
$("input[name=file1]").change(function() {
    var names = [];
    for (var i = 0; i < $(this).get(0).files.length; ++i) {
        names.push($(this).get(0).files[i].name);
    }
    $("input[name=file]").val(names);
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T21:07:53.997

您正在寻找“文件”属性，它返回一个文件列表：

```
var ele = document.getElementById($(this).attr('id'));
var result = ele.files; 
```

[这是它的小提琴](http://jsfiddle.net/TNCodeMonkey/BaGQt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:54:53.267

用于`.length()`获取文件数，然后使用 while 语句对所有文件执行相同操作，每次将计数增加 1 :)

# algorithm - 制作并发动画的最佳方法是什么？

> ID：13652959
> 
> 赞同：0
> 
> 时间：2012-11-30T20:49:35.970
> 
> 标签：algorithm, animation

这是一个关于同时制作不同动画的算法/数据结构问题。例如，一个球在一毫秒内下落一个像素，一颗子弹在一毫秒内移动 5 个像素，一个人在 20 毫秒内移动 1 个像素。并认为它们有数百个。将所有动画放在一起的最佳方式是什么，在一个函数调用中移动我们需要移动的内容，并删除动画完成的那些？我不想为每个人创建一个线程。我想要做的是创建一个线程来移动所有项目并休眠，直到需要移动一个对象。

注意：我正在使用 Java/Swing，在 JPanel 中打印对象和图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:30:50.417

我最近在 Python 中做了类似的事情。我不知道这是否是最好的方法，但这就是我所做的。

`Event`使用以下公共接口创建一个抽象类：

*   `tick`- 计算自上次滴答以来经过了多少时间。执行与该时间跨度成比例的工作。应该经常调用它以产生平滑运动的错觉；大概每秒 16 次左右。
*   `isDone`- 当事件完成发生时返回真。

为任何需要超过一帧才能完成的事情创建一个 Event 的子类。旋转、缩放、颜色变化等。`TweenEvent`如果您想将图像从屏幕的一个部分移动到另一个部分，您可以创建 Event 的子类。在每个 期间`tick`，在离原始位置较远的位置重新绘制图像，并在更靠近目标位置的位置重新绘制图像。

您可以同时运行许多事件，如下所示：

```
Array<Event> events = new Array<Event>();

//add a bunch of TweenEvents here - one for a bullet, one for a ball, etc.

while(True){
    Sleep(1/16);
    for(Event e in events){
        e.tick();
        if (e.isDone()){events.remove(e);}
    }
} 
```

# android - 屏幕在 5 分钟内关闭后，wifi 被禁用。

> ID：13652961
> 
> 赞同：0
> 
> 时间：2012-11-30T20:49:41.350
> 
> 标签：android

我找到了处理屏幕关闭和屏幕开启意图的好教程：http: [//thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

但我希望在 5 分钟内关闭屏幕后禁用 wifi。

```
WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wm.setWifiEnabled(true); 
```

我唯一的问题是如何达到 5 分钟的间隔？当您处理计算和计算时间时，我是否需要一些时间选择器或最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:06:18.863

您可以`Timer`为此使用 a：

```
private final int delayTime = 5 * 1000 * 60;
private Handler myHandler = new Handler();
private Runnable closeScreen = new Runnable() {
    public void run() {
        //Make screen Off here
    }
}; 
```

并`Timer`像这样开始：

```
myHandler.postDelayed(closeControls, delayTime); 
```

# c# - 网格内的 Stackpanel 高度百分比

> ID：13652962
> 
> 赞同：0
> 
> 时间：2012-11-30T20:49:44.517
> 
> 标签：c#, wpf, xaml, grid, scrollviewer

我在运行时用内容动态填充两个堆栈面板，我想通过百分比设置这两个堆栈面板的高度。这是我尝试过的：

```
<Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="3*" />
    <RowDefinition Height="2*" />
  </Grid.RowDefinitions>
  <ScrollViewer HorizontalAlignment="Stretch"
                Grid.Row="0">
    <StackPanel Name="gridEvents"
                Orientation="Vertical"
                HorizontalAlignment="Stretch">
      <Label Content="Foo" />
    </StackPanel>
  </ScrollViewer>
  <ScrollViewer HorizontalAlignment="Stretch"
                Grid.Row="1">
    <StackPanel Name="gridNewEvent"
                Orientation="Vertical"
                HorizontalAlignment="Stretch">
      <Label Content="Bar" />
    </StackPanel>
  </ScrollViewer>
</Grid> 
```

如果我将 RowDefinition 高度更改为静态值，它会起作用。但不是当我尝试百分比时。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:52:23.740

您是否尝试过设置网格的高度值？否则它将扩展以填充所有可用空间，并且您的行将填充结果网格的百分比。此外，它看起来更像是在设置滚动查看器的值。你的意思是说你在为那些设定高度吗？

# python - Google App Engine 任务队列后端 Python

> ID：13652966
> 
> 赞同：1
> 
> 时间：2012-11-30T20:49:56.637
> 
> 标签：python, google-app-engine, backend

我在从 Google 应用引擎中的任务队列运行后端时遇到问题。看起来我根据文档正确设置了所有内容，但是当我尝试运行任务时，后端没有启动，除了 404 错误之外，我没有从日志中得到太多回报。这可能是我遗漏的一些小东西，但我已经研究了几天，只是无法弄清楚它是什么。

这是我的 Backends.yaml 的样子

```
backends:
- name: batchloader
  instances: 1
  options: dynamic
  start: batchcron.app 
```

这是 app.yaml 中的处理程序

```
- url: /crons/batch
  script: batchcron.app
  login: admin 
```

这是我对后端的任务队列调用

```
taskqueue.add(url='/crons/batch', target='batchloader') 
```

我在这里想念什么？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:59:32.583

您需要更新您的后端`appcfg.py backends <dir> update`以创建和更新您的后端。

[您可以在此处](https://developers.google.com/appengine/docs/python/backends/overview#Commands)阅读有关此内容的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:31:39.660

快速更新此问题。这是我忽略的几件小事。有人1 是对的，因为我没有在管理委员会中启动后端。我想，因为它们是动态的，并且会自行启动和停止。所以现在已经解决了。另一个是在我对 crons/batch 的调用中，我使用了默认的 post 方法，但我调用的函数是一个 get。所以我只是改变了那个功能，一切正常。

感谢您的帮助和建议！

# google-chrome - 升级 Chrome 扩展的权限

> ID：13652969
> 
> 赞同：29
> 
> 时间：2012-11-30T20:50:25.237
> 
> 标签：google-chrome, permissions, google-chrome-extension, updates, chrome-web-store

我们目前在 Chrome 网上应用店中有一个扩展程序，有很多用户。我们目前请求访问 foo.site.com，但现在我们想更新我们的权限，以便我们可以获取 bar.site.com。

据我所知，如果我们推送需要这两个权限的新更新（Chrome 网上应用店的新扩展版本），现有用户将禁用他们的扩展，直到他们手动重新启用。在更新后下载扩展程序的新用户会很好并且拥有这两个权限。但是，禁用我们当前的用户不是一种选择。

有什么办法可以解决这个问题？

我们已经研究了可选权限，这将解决现有用户的问题（我们只要求他们单击一个按钮来升级权限并继续我们的方式）。但是对于新用户，他们不仅要安装扩展程序，还要接受可选的权限，这很糟糕。新用户有没有办法在安装时接受所有权限（可选和必需）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T20:36:05.750

是的，有解决办法。您将新权限设置为可选，然后在用户使用新功能之前请求该权限。这是工作100％。

这是您添加到清单中的内容：

```
"permissions": ["tabs","http://*/*","https://*/*"], 
```

之后，您可以使用：

```
chrome.permissions.request 
```

和

```
chrome.permissions.contains 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-12T08:27:23.023

我的扩展程序面临同样的问题，我来这篇文章是为了寻找同样的问题。在某些情况下，有一个似乎可以接受的更新。根据： https: [//support.google.com/chrome_webstore/answer/1054246和](https://support.google.com/chrome_webstore/answer/1054246)[http://developer.chrome.com/extensions/permission_warnings.html](http://developer.chrome.com/extensions/permission_warnings.html) 上的示例

似乎更新您的权限实际上会禁用您的扩展程序，但它会提示用户您的更改并允许轻松“重新启用”。

在您的场景中这可能是不可接受的，但在我的情况下，在默认情况下，新用户获得添加权限的*胜过*现有用户不重新启用的风险。因为这比您现有用户不知道扩展被禁用之前的方式要好得多......

我知道这篇文章很旧，但由于它是该问题的最高 Google 结果，因此认为更新对未来参考很有好处......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-05T05:49:43.147

从 chrome 16 开始，您可以在安装时设置 optional_permission 并在运行时请求提升权限。请参阅[https://developer.chrome.com/extensions/permissions](https://developer.chrome.com/extensions/permissions)

在 manifest.json 中：

```
 {
    "name": "My extension",
    ...
    "optional_permissions": [ "tabs", "http://bar.site.com/" ],
    ...
  } 
```

在 popup.json 中：

```
 document.querySelector('#my-button').addEventListener('click', function(event) {
    // Permissions must be requested from inside a user gesture, like a button's
    // click handler.
    chrome.permissions.request({
      permissions: ['tabs'],
      origins: ['http://bar.site.com/']
    }, function(granted) {
      // The callback argument will be true if the user granted the permissions.
      if (granted) {
        doSomething();
      } else {
        doSomethingElse();
      }
    });
  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-30T08:51:09.490

有一种方法（使用可选权限）可以在不禁用现有用户的扩展的情况下添加新的扩展权限，同时还能确保新用户在安装后得到提示接受必需权限和可选权限。

可以使用 chrome.permissions.request API 请求可选权限，但它仅在请求之前有用户操作时才起作用。满足此要求并仍提供无缝用户体验的最简单方法是检查后台页面中的权限并在运行时在弹出窗口中请求可选权限。

加载扩展后（在安装和后续浏览器启动后）可以在后台页面中发出权限请求。重新启动浏览器后，将提示任何缺少任何权限的现有用户接受该权限。

以下示例包括：

*   后台页面 JavaScript (background_page.js)
*   通知弹出 html 文件 (notification_popup.html)
*   通知弹出 JavaScript (notification_popup.js)

您还需要在 manifest.json 中声明“optional_permissions”才能使示例正常工作。该示例适用于 Chrome 扩展程序和 Firefox 插件。

background_page.js

```
var brwsr = null;
if (typeof chrome != "undefined") {
    brwsr = chrome;
}
else{
    brwsr = browser;
}
var opt_perms = brwsr.runtime.getManifest().optional_permissions; 
var requiredOptionalPermissions = {}
if(typeof opt_perms!="undefined" && opt_perms.length>0){
    var perms = []
    var origins = []
    var re = new RegExp("^(http|https)://", "i");
    for(var i=0; i<opt_perms.length; i++){
        if(opt_perms[i]==="<all_urls>"|| re.test(opt_perms[i])){
            origins.push(opt_perms[i])
        }
        else{
            perms.push(opt_perms[i])
        }
    }
    if(perms.length>0){
        requiredOptionalPermissions.permissions = perms
    }
    if(origins.length>0){
        requiredOptionalPermissions.origins = origins
    }
}
var requiresPermission = ()=>{
// add your code here
}
// check if optional permission exists and request if not
var runFunctionsRequiringOptPermissions = function(requiredPermissions={}, userGesture=false, callback=()=>{}){
    if(typeof requiredPermissions.permissions!="undefined" || typeof requiredPermissions.origins!="undefined"){
        brwsr.permissions.contains(requiredPermissions, function(res) {
            if (!res) {
                // The extension doesn't have the permissions.)
                if(userGesture){
                    brwsr.permissions.request(requiredPermissions, function(granted){
                        if(granted){
                            // perform actions that required the permission
                            requiresPermission()
                        }
                        callback();
                    });
                    return;
                }
                // open the notification popup 
                window.open("notification_popup.html", "extension_popup", "width=530,height=190,status=no,scrollbars=yes,resizable=no,screenY=+"+(screen.height/2-95)+",screenX="+(screen.width/2-265));
            }
            else{
                // perform actions that required the permission
                requiresPermission()
            }
        });
    }
}

runFunctionsRequiringOptPermissions(requiredOptionalPermissions)
// add listener 
brwsr.runtime.onConnect.addListener(function(port) {
    if(port.name == "optionalPermRequestPopup"){
        port.onMessage.addListener(
            function(request, sender, sendResponse) {
                if (request.okButtonClicked === true) {
                    runFunctionsRequiringOptPermissions(requiredOptionalPermissions, true, function(){
                        // callback to close the notification popup
                        port.postMessage({'close':true});
                    })
                    return;
                } 
                port.postMessage({'close':true})
            }
        );      
    }
}); 
```

notification_popup.html

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Extension Name</title>
    <style>
      .container {
        font-size:medium;
        text-align:center;
      }
      .button{
        height: 30px;
        width: 70px;
        background-color: #448be9;
        color: white;
        border-color: #448be9;
        border-width: thin;
        margin-right: 10px;
        float: right;
      }
      .btnCancel{
        background-color: white;
        color: #448be9
      }
      </style>
    </head>
    <body>
    <div class="container">
        <p class='text'>Please upgrade the permissions to enable the latest features.</p>
        <button class="button btnCancel">Cancel</button>
        <button class="button btnOk">OK</button>
    </div>
    <script src="notification_popup.js"></script>
    </body>
</html> 
```

notification_popup.js

```
var brwsr = null;
if (typeof chrome != "undefined") {
    brwsr = chrome;
}
else{
    brwsr = browser;
}
var port = brwsr.runtime.connect({
    name : "optionalPermRequestPopup"
});
window.addEventListener("load", function(event) {
    var okButtons = document.querySelectorAll(".btnOk");
    okButtons.forEach(function(okButton) {
        okButton.addEventListener("click", function(event) {
            port.postMessage({okButtonClicked: true})
        });
    });
    port.onMessage.addListener(function(request) {
        for (var key in request) {
            switch(key){
                case "close":
                    window.close();
                    break;
                default:
                    break;
            }               
        }
    });
}); 
```

# tsql - 如何从count（）sql中执行avg（）

> ID：13652971
> 
> 赞同：0
> 
> 时间：2012-11-30T20:50:26.013
> 
> 标签：tsql, sql-server-2008-r2, aggregate-functions

我有这个 T-sql 来获取当月每个销售代表对客户的计数我想问一下如何应用 avg 函数来获取当月的平均访问

```
SELECT COUNT(VisitTracking.customerID) AS #VISIT, 
       MAX(VisitTracking.visitID) AS VisitID, 
       Customers.title AS Title, 
       Customers.firstName AS [First Name], 
       Customers.LastName AS [Last Name], 
       Company.companyName AS [Company Name], 
       MAX(VisitTracking.DateVisited) AS [Date Visited], 
       CONVERT(DATE, MAX(VisitTracking.nextVisit)) AS [Next Visit], 
       Customers.customerID
FROM VisitTracking 
INNER JOIN Customers ON VisitTracking.customerID = Customers.customerID
INNER JOIN Customer_Company ON Customers.customerID = Customer_Company.customerID     
INNER JOIN Company ON Customer_Company.companyID = Company.companyID
WHERE VisitTracking.DateVisited BETWEEN '11/01/2012'  AND '11/31/2012' 
GROUP BY Customers.title, Customers.firstName, Customers.LastName, Company.companyName, Customers.customerID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:41:22.123

你试过计算吗？

```
 SELECT [sParID], count([sParID]) as '#sID'
      FROM [docSVsys]
     group by [sParID]
     order by [sParID] 
   compute avg(count([sParID])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:07:20.493

为什么不是子选择？是的，我知道，子选择很糟糕，不是很好，而且表现不佳。但他们在为报告和分析生成数据时确实完成了工作，所以，也许：

```
SELECT AVG(a.#VISIT) FROM (SELECT COUNT(VisitTracking.customerID) AS #VISIT, 
       MAX(VisitTracking.visitID) AS VisitID, 
       Customers.title AS Title, 
       Customers.firstName AS [First Name], 
       Customers.LastName AS [Last Name], 
       Company.companyName AS [Company Name], 
       MAX(VisitTracking.DateVisited) AS [Date Visited], 
       CONVERT(DATE, MAX(VisitTracking.nextVisit)) AS [Next Visit], 
       Customers.customerID
FROM VisitTracking 
INNER JOIN Customers ON VisitTracking.customerID = Customers.customerID
INNER JOIN Customer_Company ON Customers.customerID = Customer_Company.customerID     
INNER JOIN Company ON Customer_Company.companyID = Company.companyID
WHERE VisitTracking.DateVisited BETWEEN '11/01/2012'  AND '11/31/2012' 
GROUP BY Customers.title, Customers.firstName, Customers.LastName, Company.companyName, Customers.customerID) AS a 
```

# c# - 动态 JContainer (JSON.NET) & 在运行时迭代属性

> ID：13652983
> 
> 赞同：21
> 
> 时间：2012-11-30T20:51:27.133
> 
> 标签：c#, dynamic, reflection, json.net

我在 MVC4/.NET4 WebApi 控制器操作中收到一个 JSON 字符串。动作的参数是`dynamic`因为我对接收端的 JSON 对象一无所知。

```
 public dynamic Post(dynamic myobject) 
```

JSON 被自动解析，生成的`dynamic`对象是`Newtonsoft.Json.Linq.JContainer`. 正如预期的那样，我可以在运行时评估属性，因此如果 JSON 包含类似 myobject.myproperty 的内容，那么我现在可以获取接收到的动态对象并`myobject.myproperty`在 C# 代码中调用。到目前为止，一切都很好。

现在我想遍历作为 JSON 的一部分提供的所有属性，包括嵌套属性。但是，如果我这样做`myobject.GetType().GetProperties()`，它只返回属性`Newtonsoft.Json.Linq.JContainer`而不是我正在寻找的属性（这是 JSON 的一部分）。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-30T20:58:20.987

我认为这可以作为一个起点

```
dynamic dynObj = JsonConvert.DeserializeObject("{a:1,b:2}");

//JContainer is the base class
var jObj = (JObject)dynObj;

foreach (JToken token in jObj.Children())
{
    if (token is JProperty)
    {
        var prop = token as JProperty;
        Console.WriteLine("{0}={1}", prop.Name, prop.Value);
    }
} 
```

**编辑**

这也可以帮助你

```
var dict = JsonConvert.DeserializeObject<Dictionary<string, object>>(jObj.ToString()); 
```

# c++ - 如何转换 std::vector 成为 boost::spirit 中结构的成员？

> ID：13652987
> 
> 赞同：1
> 
> 时间：2012-11-30T20:51:46.190
> 
> 标签：c++, boost, boost-spirit, boost-fusion

我有一块 Spirit 代码，通过用作主要属性，可以正确解析`std::string input = "RED.MAGIC( 1, 2, 3 )[9].GREEN"`为 simple 。`std::vector<std::string>``std::vector<std::string>`

*我想将 替换为包含 a`std::vector<std::string>`的结构，但如果可能的话，继续使用自动生成器。`my_rec``std::vector<std::string>`*

当我用 编译时`-DUSE_MY_REC`，我得到了一堵难以理解的编译错误墙。

**示例编译并运行**

```
/tmp$ g++ -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
Finished.
MATCHED
/tmp$ g++ -DUSE_MY_REC -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox
WALL OF COMPILE ERRORS -------------------------------------------- 
```

**沙盒.cpp**

```
// #define BOOST_SPIRIT_DEBUG
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_fusion.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

#include <string>
#include <iostream>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

#ifdef USE_MY_REC
struct my_rec
{
    std::vector<std::string>    m_pieces;
};

BOOST_FUSION_ADAPT_STRUCT(
  my_rec,
  (std::vector<std::string>,  m_pieces)
)

typedef struct my_rec            MY_TYPE;
#else
typedef std::vector<std::string> MY_TYPE;
#endif

template <typename ITERATOR>
struct my_parser : 
    qi::grammar<ITERATOR, MY_TYPE(), ascii::space_type>
{
    my_parser() : 
        my_parser::base_type( start )
    {
        start %= ( color | fun_call ) % '.'
                ;

        color %=
                qi::string( "RED" )
                | qi::string( "GREEN" )
                | qi::string( "BLUE" )
                ;

        fun_call %= 
                qi::string( "MAGIC" )
                >> '('
                >> +qi::char_("0-9") % ','
                >> ')'
                >> '['
                >> +qi::char_("0-9")
                >> ']'
                ;
    }
    qi::rule<ITERATOR, MY_TYPE(),     ascii::space_type> start, fun_call;
    qi::rule<ITERATOR, std::string(), ascii::space_type> color;
};

int
main( int argc, char* argv[] )
{
    namespace qi    = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    MY_TYPE                  v;
    std::string              str = "RED.MAGIC( 1, 2, 3 )[9].GREEN";
    std::vector<std::string> exp = {{ "RED", "MAGIC", "1", "2", "3", "9", "GREEN" }};
    auto                     it  = str.begin(), end = str.end();
    my_parser<decltype(it)>  g;

    if( qi::phrase_parse( it, end, g, ascii::space, v ) && it==end ) 
    {
        std::cout << "Finished." << std::endl;
#ifndef USE_MY_REC
        if ( !std::equal( v.begin(), v.end(), exp.begin() ))
        {
            std::cout << "MISMATCH" << std::endl;
            for( const auto& x : v )
                std::cout << x << std::endl;
        } else {
            std::cout << "MATCHED" << std::endl;
        }
#endif
    } else
        std::cout << "Error." << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:26:05.497

如评论中链接的问题所示，为了分配给具有单个成员的适应结构，您需要按`qi::eps`顺序使用。此外，您需要将中间`fun_call`规则的属性更改为`std::vector<std::string>()`.

```
// #define BOOST_SPIRIT_DEBUG
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_fusion.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

#include <string>
#include <iostream>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

struct my_rec
{
    std::vector<std::string>    m_pieces;
};

BOOST_FUSION_ADAPT_STRUCT(
  my_rec,
  (std::vector<std::string>,  m_pieces)
)

typedef struct my_rec            MY_TYPE;

template <typename ITERATOR>
struct my_parser : 
    qi::grammar<ITERATOR, MY_TYPE(), ascii::space_type>
{
    my_parser() : 
        my_parser::base_type( start )
    {
        start %= qi::eps >>( color | fun_call ) % '.' //add qi::eps to make the adaptation of the single member struct work
                ;

        color %=
                qi::string( "RED" )
                | qi::string( "GREEN" )
                | qi::string( "BLUE" )
                ;

        fun_call %= 
                qi::string( "MAGIC" )
                >> '('
                >> +qi::char_("0-9") % ','
                >> ')'
                >> '['
                >> +qi::char_("0-9")
                >> ']'
                ;
    }
    qi::rule<ITERATOR, MY_TYPE(),     ascii::space_type> start;
    qi::rule<ITERATOR, std::vector<std::string>(), ascii::space_type> fun_call; //changed this rule's attribute to vector<string>
    qi::rule<ITERATOR, std::string(), ascii::space_type> color;
};

int
main( int argc, char* argv[] )
{
    namespace qi    = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    MY_TYPE                  v;
    std::string              str = "RED.MAGIC( 1, 2, 3 )[9].GREEN";
    std::vector<std::string> exp;
    exp.push_back("RED");
    exp.push_back("MAGIC");
    exp.push_back("1");
    exp.push_back("2");
    exp.push_back("3");
    exp.push_back("9");
    exp.push_back("GREEN");
    auto                     it  = str.begin(), end = str.end();
    my_parser<decltype(it)>  g;

    if( qi::phrase_parse( it, end, g, ascii::space, v ) && it==end ) 
    {
        std::cout << "Finished." << std::endl;

        if ( !std::equal( v.m_pieces.begin(), v.m_pieces.end(), exp.begin() ))
        {
            std::cout << "MISMATCH" << std::endl;
            for( const auto& x : v.m_pieces )
                std::cout << x << std::endl;
        } else {
            std::cout << "MATCHED" << std::endl;
        }

    } else
        std::cout << "Error." << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:12:15.233

您可以使用`boost::spirit::qi::as`将解析后的数据转换为 a `vector`，然后将其放入您的结构中。

```
fun_call %= as<std::vector<std::string>>()[...]; 
```

# ruby-on-rails - 将 params{} 哈希发送到同一控制器中的另一个方法

> ID：13652994
> 
> 赞同：0
> 
> 时间：2012-11-30T20:52:23.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在研究非常复杂和动态的表单，我根据使用 jQuery 为下拉菜单选择的值对各种方法进行大量调用以呈现部分。问题是，在填写表单后，如果验证失败，表单会在重新加载时丢失所有填写的值。我通过将一些特定值从 params{} 哈希发送到重新加载部分的方法来解决这个问题。但这非常麻烦，而且我在 params hash 中有大量元素。如何使用 jQuery 将整个 params{} 发送到同一控制器中的另一个方法？

好的，我在我的表单中尝试了这个：

```
$.post("/collections/show_selected_media_fields",{media_type: $("#collections_controller_ev0_media_id option:selected").text(), parent_form_action: "<%=params[:action]%>",ev0_manufacturer_id:"<%=params[:collections_controller_ev0].inspect%>", }, function(data) {$("#show_selected_media_fields").html(data);}); 
```

它产生以下作为参数发送的字符串：

```
 Parameters: {"ev0_manufacturer_id"=>"{&quot;client_asset_id&quot;=&gt;&quot;&quot;, &quot;status_id&quot;=&gt;&quot;6&quot;, &quot;server_
name&quot;=&gt;&quot;&quot;, &quot;media_id&quot;=&gt;&quot;11&quot;, &quot;serial_number&quot;=&gt;&quot;&quot;, &quot;evidence_number&quot
;=&gt;&quot;qwe&quot;, &quot;notes&quot;=&gt;&quot;&quot;, &quot;model&quot;=&gt;&quot;&quot;, &quot;manufacturer_id&quot;=&gt;&quot;69&quot
;, &quot;interface&quot;=&gt;&quot;SATA&quot;, &quot;obtained_from&quot;=&gt;&quot;wr&quot;, &quot;evidence_type_id&quot;=&gt;&quot;1&quot;}
", "media_type"=>"Server", "parent_form_action"=>"quick_save"} 
```

如何将此原始字符串转换为控制器中的哈希？

```
{&quot;client_asset_id&quot;=&gt; 
```

需要转换为

```
{"client_asset_id"=>"",... etc} 
```

===========

好的，我尝试了汤姆的方法。这会将参数生成为以下形状的字符串。我试图通过对其进行 eval 将其转换为哈希。但它出错了。

```
{commit=>Save, ev1_current_location_id=>, collections_controller_ev1=>{file_system=>NTFS, obtained_from=>, evidence_number=>, interface=>SAT
A, size_unit=>GB, manufacturer_id=>, encryption_version=>, media_id=>3, size=>, evidence_type_id=>3, other_encryption=>, encryption_method=>
N/A, serial_number=>, model=>, encryption_key=>}, ev0_from_location_category=>, ev0_obtained_from_email_id=>, collections_controller_ev0=>{o
btained_from=>, evidence_number=>, media_id=>1, evidence_type_id=>1, status_id=>6}, custody_action=>Create, collection=>{acquired_by=>Amande
ep Singh, custodian_id=>12, matter_id=>58, location=>sa Nose, client_id=>11, software_version=>, collection_date_time=>Fri Nov 30 14:28:06 -
0800 2012, acquisition_method=>Direct Collection, notes=>, software_id=>1}, _method=>put, utf8=>Γ£ô, ev1_current_location_category=>, ev0_cu
rrent_location_category=>, add_working_copy=>No, ev1_obtained_from_email_id=>, authenticity_token=>3vyn6057DDIyfgTnbckeh5heRTIgcVBfxtY89Krfr
/c=, ev1_existing_artifact_type=>, ev0_from_location_id=>, action=>quick_save, ev1_from_location_id=>, ev1_from_location_category=>, ev0_cur
rent_location_id=>, controller=>collections} 
```

使用 .to_json 和 HTMLEntities gem，我已经到了拥有以下字符串的地步。我需要将其转换回参数哈希。如何？

```
{"utf8"=>"Γ£ô","collection"=>{"acquired_by"=>"Amandeep Singh","notes"=>"","matter_id"=>"58","software_id"=>"1","acquisition_method"=>"Direct
 Collection","client_id"=>"11","custodian_id"=>"0","collection_date_time"=>"Fri Nov 30 15=>52=>12 -0800 2012","software_version"=>"","locati
on"=>"sa Nose"},"ev0_current_location_id"=>"","ev1_existing_artifact_type"=>"","ev1_obtained_from_email_id"=>"","custody_action"=>"Create","
action"=>"quick_save","ev0_current_location_category"=>"","ev1_from_location_category"=>"","_method"=>"put","ev0_obtained_from_email_id"=>""
,"ev0_from_location_category"=>"","ev1_current_location_category"=>"","commit"=>"Save","controller"=>"collections","authenticity_token"=>"3v
yn6057DDIyfgTnbckeh5heRTIgcVBfxtY89Krfr/c=","ev0_from_location_id"=>"","ev1_current_location_id"=>"","collections_controller_ev0"=>{"status_
id"=>"6","media_id"=>"9","obtained_from"=>"","evidence_number"=>"","evidence_type_id"=>"1"},"collections_controller_ev1"=>{"media_id"=>"3","
encryption_key"=>"","encryption_version"=>"","size"=>"","obtained_from"=>"","encryption_method"=>"N/A","model"=>"","evidence_number"=>"","ev
idence_type_id"=>"3","size_unit"=>"GB","other_encryption"=>"","interface"=>"SATA","file_system"=>"NTFS","serial_number"=>"","manufacturer_id
"=>""},"ev1_from_location_id"=>"","add_working_copy"=>"No"} 
```

========== 编辑==========

在我看来，我正在使用以下内容。

```
JSON( params[:collections_controller_ev0]) 
```

它将以下带引号的字符串发送到我的控制器。

```
{&quot;evidence_number&quot;:&quot;&quot;,&quot;notes&quot;:&quot;&quot;,&quot;size&quot;:&quot;&quot;,&quot;model&quot;:&quot;&quot;,&quot;evidence_type_id&quot;:&quot;1&quot;,&quot;media_id&quot;:&quot;1&quot;,&quot;obtained_from&quot;:&quot;&quot;,&quot;status_id&quot;:&quot;6&quot;,&quot;manufacturer_id&quot;:&quot;&quot;,&quot;size_unit&quot;:&quot;GB&quot;} 
```

我使用 gsub('"','"') 将其转换为有效的 JSON 字符串，如下所示。输出是一个 VALID JSON 字符串，由[http://jsonlint.com/](http://jsonlint.com/)验证，如下所示。

```
{"evidence_number":"","notes":"123","size":"123","model":"123","evidence_type_id":"1","media_id":"1","obtained_from":"","status_id":"6","manufacturer_id":"69","size_unit":"GB"} 
```

JSON.parse 在此字符串上正常工作，但不会产生格式正确的散列。它产生以下内容：

```
notes123evidence_numbersize123model123evidence_type_id1media_id1obtained_fromstatus_id6size_unitGBmanufacturer_id69 
```

有人可以告诉我如何纠正这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:07:22.360

**尝试 <%=raw params[:action]%> 和 <%=raw params[:collections_controller_ev0]%>**
我认为它会正常工作。

**$.post("/collections/show_selected_media_fields",{media_type: $("#collections_controller_ev0_media_id option:selected").text(), parent_form_action: <%=raw params[:action]%>,ev0_manufacturer_id:<%=raw params [:collections_controller_ev0].inspect%>, }, function(data) {$("#show_selected_media_fields").html(data);});**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:12:27.567

`params`基本上是一个哈希。所以你可以使用`.to_json`它。然后在您的控制器中，您可以将其从 JSON 转换为带有`JSON.parse()`.

如果您打算在 Javascript 或 HTML 中处理它，通常使用 JSON 是一个更好的主意。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T19:49:28.910

我上次编辑作品中显示的方法！它产生正确的哈希。

# objective-c - NSTableView 列可以绑定到辅助线程中的核心数据实体 NSArrayController 吗？

> ID：13652998
> 
> 赞同：0
> 
> 时间：2012-11-30T20:52:31.797
> 
> 标签：objective-c, cocoa, core-data, nstableview, nsthread

我的程序使用 Coredata (SQLite)、NSPersistentDocument、NSTableView 和（实体）NSArrayController。我想让主线程中的 NSTableView 列绑定到我在辅助线程中填充的实体 NSArrayController。

问题1：有可能吗？不幸的是，在我的情况下不起作用（虽然通过 IB 在同一个线程中做所有事情）

目标是什么：让“获取”（大文档平均需要 2-4 秒才能完成）在辅助线程中运行，这样我就可以在获取时在 UI 上显示进度指示器。

问题 2：当实体 nsarraycontroller 正在安排其数据、获取等时，是否有任何其他推荐的方式来显示进度指示器？

提前致谢。路易斯

```
// ------- ABCoredataController.h
@interface ABCoredataController : NSObject {
:
    NSArrayController               *ivArrayController;
}
@property (nonatomic, assign) NSArrayController  *arrayController;

// ------- ABCoredataController.m

// This piece executes in Main thread... 
- (void) init {
    ivArrayController = [[NSArrayController alloc] init];
:

// Following is later executed in the Secondary Thread
- (void) secondaryThreadRun:(id)param {
    :
    // prepare everything to access coredata from a secondary thread...
    [self setSecondaryThreadMOC: [[[NSManagedObjectContext alloc]init] autorelease] ];
    [[self secondaryThreadMOC] setPersistentStoreCoordinator:[self mainThreadPSC]];

    // prepare the (entity) array controller
    [[self arrayController] setAvoidsEmptySelection:YES];
    [[self arrayController] setPreservesSelection:YES];
    [[self arrayController] setSelectsInsertedObjects:YES];
    [[self arrayController] setClearsFilterPredicateOnInsertion:YES];
    [[self arrayController] setAutomaticallyPreparesContent:YES];
    [[self arrayController] setAutomaticallyRearrangesObjects:YES];
    [[self arrayController] setAlwaysUsesMultipleValuesMarker:NO];
    [[self arrayController] setUsesLazyFetching:NO];
    [[self arrayController] setEditable:YES];
    [[self arrayController] setEntityName:@"Transaction"];

    // bind arrayController to the managedObjectContext   
    [[self arrayController] setManagedObjectContext:[self secondaryThreadMOC]];
    [[self arrayController] setFilterPredicate:[self predicate]];

    : 
```

然后在我控制我的 XIB 和所有 UI 的类中......

```
// ------- ABWindowController.m
:
// Start the secondaryThreadRun in previous class
[[self coredataCtrlTransaction] start];
// Get the pointer to the entity array controller !!! <== HERE!! is it right?
ivOut_CtEn_Transaction = [[self coredataCtrlTransaction]arrayController];

:
// Bind that entity array controller to the NSTableView columns...
if ( [self out_CtEn_Transaction] != nil ) {
    for ( NSTableColumn *column in [[self out_Tableview_Transaction] tableColumns] ) {
        if ( [column identifier] != nil ) {
            if ( [column infoForBinding:@"value"] == nil ) {
                NSString *theKeyPath=nil;
                if ( [[column identifier] length] > 4 )
                    theKeyPath = [[column identifier] substringFromIndex:4];
                else
                    theKeyPath = [column identifier];

                [column bind: @"value" toObject: [self out_CtEn_Transaction]
                 withKeyPath:[NSString stringWithFormat:@"arrangedObjects.%@", theKeyPath] options:nil];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:22:48.320

回答自己，我发现 KVO 对线程间通信没有好处，我在 MainThread 中设置了观察者，但是在发起键值更改的线程（nsarraycontroller 所在的辅助线程）上接收到观察结果。

因此，如果我的后台线程更改了一个值，我的后台线程将收到关于它的 KVO。这是我不想要的。

[在这里找到了很好的评论：](https://stackoverflow.com/questions/4741568/threading-priorities-and-abandonment)

**我找到了另一种实现目标的方法，更简单。**

[在这里](https://stackoverflow.com/questions/10034045/ui-does-not-update-when-main-thread-is-blocked-in-cocoa-app)和[这里](https://stackoverflow.com/questions/7142183/nsprogressindicator-progress-with-for-loops)在 GDC 上找到了很好的例子

我的目标是：让我在我的“nsarraycontroller 正在获取或排列对象”时展示一个旋转的轮子，这在我的情况下意味着 2-3 秒。

```
 // Last step in the preparation of the predicate
    NSPredicate  *predicadoFinal = nil;
    predicadoFinal = [NSCompoundPredicate andPredicateWithSubpredicates:array_AND_Total];

    // Use GCD (Grand Central Dispatch) to be able to show the spinning wheel
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            // Do here my stuff of showing in the UI something... 
            [[self out_ABSpinning_DDBB] setHidden:NO];
            [[self out_ABSpinning_DDBB] startAnimation:self];
        });
        // And here CPU consuming stuff. 
        // Apply the predicate to the nsarraycontroller. 
        // As the controller has both setAutomaticallyPreparesContent:YES
        // and setAutomaticallyRearrangesObjects:YES so setting 
        // the predicate will automatically trigger the controller
        // to process the predicate and fetch again... 
        [self setPredicateFINAL:predicadoFinal];
    }); 
```

如何停止纺车。这也很简单，我在实体 NSArrayController 上设置了一个观察者，如下所示：

```
if (nil == ivObservableKeysABCtEn_Transaction ) {
    ivObservableKeysABCtEn_Transaction = [[NSSet alloc] initWithObjects:
                                          @"arrangedObjects",
                                          nil];
}
:

if ( [self out_CtEn_Transaction] != nil ) {

    for (NSString *keyPath in [self observableKeysABCtEn_Transaction]) {

        // Añado observers para cada uno de los keyPaths en los que estoy interesado
        [[self out_CtEn_Transaction] addObserver:self
                     forKeyPath:keyPath
                        options:0
                        context:ABObserverABCtEn_Transaction];
    }
} 
```

然后在：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
    // Fetch del objeto que ha cambiado en el emisor. En mi caso un BOOL
    id newChange = [change objectForKey:NSKeyValueChangeNewKey];

    // Detect null's
    if ([NSNull null] == (NSNull*)newChange) {
        newChange = nil;
    } else {
    :
        //
        // Somthing has changed in the "arrangedObjects" property
        // of my coredata array controller, so it has definitely
        // finished doing its work. 
        if ( context == ABObserverABCtEn_Transaction ) {
           [[self out_ABSpinning_DDBB] stopAnimation:self];
           [[self out_ABSpinning_DDBB] setHidden:YES]; 
```

谢谢路易斯

# vba - Word 2013 VB 脚本循环遍历文档和更改样式

> ID：13652999
> 
> 赞同：3
> 
> 时间：2012-11-30T20:52:41.867
> 
> 标签：vba, ms-word

我需要一个脚本，它遍历一个 word 文档，并将标题样式或图像之后的段落样式更改为自定义样式，而无需首行缩进。

如何循环浏览word文档中的段落/标题/项目？我如何获得风格？之后如何设置样式？

目标很简单：我希望段落的第一行缩进，但如果段落跟随标题行或图像则不缩进。而且由于这是一个很大的文档，而且我经常收到这些文档，因此我想要某种自动化，而不是尝试手动执行此操作。
所以我想编写一个脚本，它遍历段落并将样式从“段落”更改为“没有缩进的段落”，当它位于标题样式或图像之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:30:37.513

这是一些基本代码，可帮助您从这里开始。不幸的是，该`Paragraph.Style`参数不区分文本和图像，但您可以检查`Paragraph.Range`对象是否有任何`InlineShapes`，它们是图像。

```
Sub indentParas()
    Dim doc As Document
    Set doc = ActiveDocument
    Dim para As Word.Paragraph
    Dim i As Boolean
    i = False
    For Each para In doc.Paragraphs

        If i = False Then
            para.IndentCharWidth 4
        End If

        If para.Range.InlineShapes.Count > 0 Then
            i = True
        ElseIf Left(para.Style, 7) = "Heading" Then
            i = True
        Else
            i = False
        End If
    Next
End Sub 
```

注意：这是在 Word 2010 中测试的。