# StackOverflow 问答 15254000-15254999

# php - .NET Web 服务的 PHP 错误处理？

> ID：15254000
> 
> 赞同：0
> 
> 时间：2013-03-06T17:26:36.747
> 
> 标签：php, .net, web-services, error-handling

我使用 php web 表单将产品注册插入到 .NET 发布的 web 服务中。我的 insertXmlData 函数有效，但我在处理错误时遇到了问题。当我尝试插入具有现有序列号的记录时，我得到了这个返回：

```
ERROR-5002 - Unique serial number must not be blank System.Exception 
```

我试过这个：

```
 try   
    {   
        $xmlData = insertXmlData($url, $xml);  
    }   
    catch (Exception $e)   
    {   
        echo ("Triggered");
        throw new Exception( 'There was an error...', 0, $e);   
    } 
```

但是 catch 子句甚至不会触发。是 .NET 到 php 还是我的语法不正确？在这种情况下处理错误的最佳选择是什么？

# ios - 有没有办法在 OpenGL 或 Apple 的 GLKit 中使用 UIView / CALayer 而无需渲染到 UIImage/CGImageRef？

> ID：15254006
> 
> 赞同：4
> 
> 时间：2013-03-06T17:26:55.877
> 
> 标签：ios, uiview, uikit, calayer, glkit

我知道如何将 UIView/CALayer 渲染到 CGContextRef 和 UIImage/CGImageRef .. 这是旧消息。

**但是**有没有办法省略对 Image/CGContextRef 的渲染并直接在 OpenGL 或 GLKit 中使用 UIView/CALayer，这样如果视图中发生更新，它将反映在 OpenGL/GLKit 中？

就像 Apple 创建页面卷曲效果一样，卷曲的视图也有更新（至少在“地图”应用程序中 - 尝试滚动一段距离并查看正在加载的图块）。

有任何想法吗？我要自由！！！！

我最终想要的是一种在 OpenGL / GLKit 中使用实时更新的 UIView 以尽可能少的 CPU 开销创建不同效果的方法。

# symfony - 将 Bundle:Controller:Filename 转换为实际文件路径

> ID：15254009
> 
> 赞同：1
> 
> 时间：2013-03-06T17:27:00.110
> 
> 标签：symfony

有没有办法将 Symfony 文件名符号转换`Bundle:Controller:Filename`为真实的文件路径`/var/www/whatever/src/Bundle/Resources/views/Controller/Filename`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:30:37.323

看看这个问题：[Resolve local file path from Twig template name](https://stackoverflow.com/questions/9330170/resolve-local-file-path-from-twig-template-name)。接受的答案说：

“如果您想从控制器中检索路径，您可以使用以下代码：

```
$parser = $this->container->get('templating.name_parser');
$locator = $this->container->get('templating.locator');

$path = $locator->locate($parser->parse('AcmeProjectBundle::home.html.twig')); 
```

有关更多信息，请查看以下代码：

```
Symfony\Bundle\FrameworkBundle\Templating\TemplateNameParser::parse
Symfony\Bundle\FrameworkBundle\Templating\Loader\TemplateLocator::locate 
```

"

# javascript - 如何通过链接提交表单字段值？

> ID：15254011
> 
> 赞同：1
> 
> 时间：2013-03-06T17:27:08.230
> 
> 标签：javascript, coldfusion, radio-button, cfml

如何在以下代码中使用“testLink1”提交文本框和单选按钮的值：

```
<cfform name="frmEdit" method="POST" >
   <INPUT type="text" name="txtName" value ="" >
   <INPUT type="radio" name="typeA" value ="exempt" checked> Exempt
   <INPUT type="radio" name="typeA" value ="non_exempt"> Non-exempt
   <a href="test1.cfm">testLink1</a>
</cfform> 
```

我有自己的理由使用`<a>`标签而不是提交按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:50:54.777

为了通过链接提交表单，您需要使用 JavaScript。我在下面重写了你的代码：

```
<form name="frmEdit" action="test1.cfm" method="POST">
    <input type="text" name="txtName" value="" >
    <input type="radio" name="typeA" value="exempt" checked="checked"> Exempt
    <input type="radio" name="typeA" value="non_exempt"> Non-exempt
    <a href="javascript:document.frmEdit.submit();">testLink1</a>
</form> 
```

或者像下面的 Travis 建议的那样，像这样更改`<a>`标签：

```
 <a href="#" onClick="document.frmEdit.submit(); return false;">testLink1</a> 
```

这应该适用于您的简单示例。`FORM`在 ColdFusion 范围内，您可以使用所有字段。

`cfform`如果您不使用它的任何功能（您的示例不是），也没有理由使用它。

# emacs - Emacs-Tramp：无法正常工作

> ID：15254013
> 
> 赞同：3
> 
> 时间：2013-03-06T17:27:15.910
> 
> 标签：emacs, tramp

我正在尝试在 Ubuntu 12.04 中使用 Tramp/Emacs-23 来编辑远程主机文件。我的远程主机有两步验证（RSA+Passwd）。我通过 .ssh/config 使用多路复用来确保 tramp 可以直接连接到远程 shell，而无需提供密码。

然而，我的问题是我有 3 个不同的远程主机。当我尝试在没有初始多路复用（通过终端）的情况下通过 tramp 连接到远程主机时，TRAMP 挂起并显示一条消息，指出“ **Tramp: Waiting for prompts from remote shell** ”。我在 .ssh/config 中使用了下面提到的命令，以确保在没有提示的情况下在指定的时间间隔后连接丢失。

```
Host *
ServerAliveCountMax=30
ServerAliveInterval=5 
```

然而，这似乎对流浪汉连接没有任何影响。如果有人可以帮助我解决此问题，那将会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T00:50:04.633

很抱歉，您的问题被搁置了这么久。

我可以提供一些尝试，使用 tramp 协议`sshx`而不是`ssh`，它似乎可以更好地处理大多数非 vanilla ssh 连接。

例如

```
/sshx:user@host:path/filename 
```

要尝试的另一件事是在启动时将您的 ssh 密钥密码短语添加到会话中，`ssh-agent`在机器上运行并在启动时连接到它，然后运行`ssh-add`以输入密码短语一次。

作为旁注，将您的 Emacs 升级到 24.3 自 23.x 以来有很多新的/很棒的东西

# asp.net - 如何将 CSS 类设置为 JQGrid？

> ID：15254016
> 
> 赞同：0
> 
> 时间：2013-03-06T17:27:29.013
> 
> 标签：asp.net, jqgrid, jqgrid-asp.net, evopdf

我正在开发一个带有 JQGrid 的网站。我也在把桌子变成PDF。我想在每个页面上显示表头，以便 PDF 转换器需要将 CSS 表的属性 THEAD 标记设置为“display:table-header-group”。

那么如何在 JQGrid 中设置 CSS 属性呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:53:29.947

```
<rows>
<page>1</page><total>1</total><records>2</records>
    <row id='13'>
        <cell>1.00</cell>
        <cell class='ui-state-error'>15.00</cell>
        <cell>9.00</cell>
    </row>
    <row id='12'>
        <cell>1.00</cell>
        <cell>2.00</cell>
        <cell class='ui-state-highlight'>1.15</cell>
    </row>
</rows>

 cellattr: function () {
    var c = $('cell:eq(1)', arguments[2]).attr('class');
    return c ? " class='" + c + "'": "";
} 
```

检查这个[线程](https://stackoverflow.com/questions/8022038/jqgrid-how-to-set-cell-specific-css-class-at-generation-time)

# java - GLSL点光源变换

> ID：15254020
> 
> 赞同：2
> 
> 时间：2013-03-06T17:27:45.593
> 
> 标签：java, opengl, glsl, lwjgl

我在 GLSL 中编写了一个基本的顶点着色器。这是源代码：

```
varying float intensity;
uniform vec4 lightPos;

void main() {
    intensity = 0.1;
    vec3 tfVert = (gl_ModelViewMatrix*gl_Vertex).xyz;
    vec3 tfNorm = normalize(gl_NormalMatrix*gl_Normal).xyz;
    vec3 tfLightPos = (gl_ModelViewMatrix*lightPos).xyz;

    vec3 lightDir = normalize(tfLightPos-tfVert).xyz;
    intensity += dot(lightDir, tfNorm);

    gl_Position = gl_ModelViewProjectionMatrix*gl_Vertex;
} 
```

之后，片段着色器以不同强度浮动的亮度照亮片段。出了问题：我画了几个立方体，然后将一个 OBJ 模型加载到世界中，或者类似的东西。然后我使用 glRotatef() 和 glTranslatef() 并再次绘制相同的东西。**灯光出现两次，**（有点）在两个不同的位置。一次在翻译位置，一次在原始位置。平移后的模型仅受平移位置的光线影响，而原始模型仅受原始位置的光线影响。另外，我不使用 gl_LightSource0[] 来解决这个问题也很重要。有什么我做错了吗？有没有什么办法解决这一问题？如果这很重要，我正在使用 glTranslatef() 和 glRotatef() 进行相机定位和旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:45:49.053

不要通过 gl_ModelViewMatrix 转换 lightPos

只需使用 lightPos.xyz 代替 tfLightPos - 事实上你根本不需要 tfLightPos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:54:17.980

遗憾的是，如果不将更多信息传递给顶点着色器，这是不可能解决的。由于 glTranslatef 和 glRotatef 用于相机移动以及模型移动，因此着色器无法在不将变换和旋转传递给 vec3s 中的 GLSL 的情况下区分两者。

# java - 将星号转换为粗体或斜体标签

> ID：15254027
> 
> 赞同：0
> 
> 时间：2013-03-06T17:28:00.520
> 
> 标签：java, android

我想将降价样式粗体/斜体之间的文本转换为 html 粗体/斜体。这是一个例子：

```
**Bold text** is bold, *italic* text is italicized. 
```

应该去：

```
<b>Bold text</b> is bold, <i>italic</i> text is italicized. 
```

我在 SO 上查看了其他地方，但大多数问题都推荐了一个解析库。但是，我认为使用库不适合，原因如下：

*   我试图使代码库尽可能小
*   解析器将具有太多功能！
*   我想让它尽可能快和轻量级

那我应该如何转换这些标签呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:44:59.590

我过去曾尝试自己做这件事，就像你试图手工烘焙解决方案一样。一旦添加一两个标记，您必须处理的异常数量就会变得非常复杂。我最终以一种不太有效的方式重新发明了轮子。我选择采用其中一个解析库并且从未回头。

> 解析器将具有太多功能！

您可以获得一些解析器，让您定义自己的标记语言。这是我选择的。我是在 .Net 中完成的，所以我不能推荐 Java 版本。

> 我想让它尽可能快和轻量级

任何解析库都将比您自己的更有效，除非您解析许多 MB 的数据，否则我认为您不会注意到太大的差异。他们通常会花更多的时间来提高效率，我也许你会愿意。

我知道这不是一个“答案”，但我希望能为您节省一些时间（并延迟白发的发生）或为您指明正确的方向。

# java - 可恢复密码的推荐加密方法

> ID：15254030
> 
> 赞同：1
> 
> 时间：2013-03-06T17:28:09.573
> 
> 标签：java, php, encryption, encryption-symmetric

我有一个应用程序需要保留多个用户密码，并要求它们是可恢复的。

我正在考虑使用主密码+另一种加密机制来加密密码。

加密密钥将保存在外部系统中，并且可以使用 API 进行检索。问题是我不确定是否：

1.  这种方法足够安全
2.  我应该为加密选择哪种附加机制。

谢谢。

编辑--------------我知道它已关闭...但我确实想澄清一下-我必须有解密的能力，这是我的应用程序的主要部分...与据说我想我用 AES 算法得到了答案。我不需要散列，因为散列是不可逆的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:31:37.290

Stack Overflow 是一个帮助您解决编码问题的论坛。

这个问题比较适合[安全论坛](http://security.stackexchange.com)。

也就是说，有一些标准化的加密指南。

实现对称加密密码时，最好使用[AES Algorithm](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。这是迄今为止最安全的对称密钥分组密码，也是我们目前认为“受保护”的标准。

如果您正在寻找[散列](http://en.wikipedia.org/wiki/Hash_function)密码（这是密码存储的标准），则不需要密钥。使用[SHA1](http://en.wikipedia.org/wiki/SHA-1)算法。就输出的大小而言，它是当前使用的更安全的哈希算法。其他选项是[SHA256](http://en.wikipedia.org/wiki/SHA-2)和[SHA512](http://en.wikipedia.org/wiki/SHA-2)

**编辑**：哦，时代在变。哈希算法也是如此！人们正在从 SHA 系列散列算法转移到 Bcrypt，它具有其他几个功能，例如引入成本因子来防止彩虹表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:36:43.860

这是您的必读内容：[您可能错误地存储了密码](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)

现在，关于如何存储加密密码的问题。不。存储散列密码。

* * *

您可能要求解决错误的问题。我怀疑您想创建一项功能来恢复密码...在这种情况下，如果您不介意，我会将您发送[到我以前的答案之一。](https://stackoverflow.com/questions/13330033/recover-reset-lost-password-options-via-email/13330223#13330223)

* * *

作为替代方案，您可能希望在客户端计算机上为单个用户存储多个密钥。如果这是您想要的，那么您最好的选择是使用操作系统为您提供的安全性来保护它。您不应该期望通过操作系统为用户提供比加密文件更好的功能。

* * *

否则，您基本上设计了所有存储密码将被盗的方式。要么是因为现在被认为是安全的东西明天可能不再被认为是安全的，要么是因为我们是人类（对吗？）我们可以犯错误。

无论如何，您的安全性充其量将与辅助 API 的身份验证过程一样强（我的意思是，检索密钥以破译密码的过程）。您确实提到了 Java，您的 Java 代码被反向工程以发现如何获取密码的可能性有多大？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:38:32.203

> 我不确定 [...] 这种方法是否足够安全

不，不是。大多数允许恢复密码而不是重置密码的安全方法的任何密码存储方法都不被认为是“安全的”。此外，用户如何发送他们的“恢复”密码？因为使用电子邮件来做到这一点几乎是最糟糕的方法。

如果您无法解决必须能够“恢复”密码的问题，那么您想要的*是非对称*[aka public key] 加密。密码将由公钥加密并存储在数据库中以进行比较。私钥应该分开保存，最好是离线保存在保险箱中的记忆棒上，并且至少受一个密码保护，如果不是两个或更多密码由不同的人持有的话。

正如其他人所提到的，这个问题比这里更适合[http://security.stackexchange.com](http://security.stackexchange.com)，但它已经被问过*很多*次了，你会得到更强烈的鼓励，*不*要这样做，而不是这样做解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:34:55.307

PHP 支持 SHA1，手册： http: [//php.net/manual/en/function.sha1.php](http://php.net/manual/en/function.sha1.php)

> if (sha1($str) === 'd0be2dc421be4fcd0172e5afceea3970e2f3d940') { echo "你想要一个绿色还是红色的苹果？"; }

以及 JAVA SHA1 示例：[http ://www.herongyang.com/Cryptography/SHA1-Message-Digest-in-Java.html](http://www.herongyang.com/Cryptography/SHA1-Message-Digest-in-Java.html)

您可以将 SALT + PSK(SHA1) 与 AES 加密相结合。

我建议使用 SYSTEM SALT（在系统上生成 SHA512 密钥 + 在用户上生成 SALT + PSK SHA512 用于登录）。

或者，如果您不能使用 bcrypt 或 scrypt 和 SHA2，则最好使用 PBKDF2。

# objective-c - 有没有一种简单的方法可以将 NSString 拆分为字符数组？

> ID：15254031
> 
> 赞同：3
> 
> 时间：2013-03-06T17:28:20.083
> 
> 标签：objective-c, nsstring, nsarray

有没有一种简单的方法可以将 NSString 拆分为字符数组？如果结果类型是 NSString 本身的集合，每个只有一个字符，那将是最好的。

是的，我知道我可以循环执行此操作，但我想知道是否有更快的方法可以使用任何现有方法或函数来执行此操作，就像在 C# 中使用 LINQ 一样。

例如

```
// I have this...
 NSString * fooString = @"Hello";

// And want this...
NSArray * fooChars; // <-- Contains the NSStrings, @"H", @"e", @"l", @"l" and @"o" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T17:39:05.110

你可以做这样的事情（如果你想使用枚举器）

```
NSString *fooString = @"Hello";
NSMutableArray *characters = [[NSMutableArray alloc] initWithCapacity:[fooString length]]; 

[fooString enumerateSubstringsInRange:NSMakeRange(0, fooString.length)
                              options:NSStringEnumerationByComposedCharacterSequences
                           usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    [characters addObject:substring];
}]; 
```

如果你真的想把它放在一个 NSArray 中

```
NSArray *fooChars = [NSArray arrayWithArray:characters]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T17:32:54.060

请务必注意某些字符（如表情符号和其他字符）可能跨越的范围比一个索引更长。

这是 NSString 的类别方法

```
@implementation (SplitString)

- (NSArray *)splitString
{
    NSUInteger index = 0;
    NSMutableArray *array = [NSMutableArray arrayWithCapacity:self.length];

    while (index < self.length) {
        NSRange range = [self rangeOfComposedCharacterSequenceAtIndex:index];
        NSString *substring = [self substringWithRange:range];
        [array addObject:substring];
        index = range.location + range.length;
    }

    return array;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:47:48.467

将其转换为`NSData`将在您选择字节长`[data bytes]`的编码中具有 C 字符串。`[data length]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-05T07:51:39.123

试试这个

```
NSMutableArray *array = [NSMutableArray array];
NSString *str = @"Hello";
for (int i = 0; i < [str length]; i++) {
    NSString *ch = [str substringWithRange:NSMakeRange(i, 1)];
    [array addObject:ch];
} 
```

# java - 未解决的编译错误

> ID：15254033
> 
> 赞同：-6
> 
> 时间：2013-03-06T17:28:45.757
> 
> 标签：java, compilation, trie

这是我在压缩后缀树中插入节点的代码：

```
public class tree {

    char a[] = new char[10];
    a[0]='b';
    a[1]='a';
    a[2]='n';
    a[3]='a';
    a[4]='n';
    a[5]='a';
    a[6]=' ';

    protected node root;

    public tree() {
        this.root = new node();
    }

    public void inorder(node n) {

        if (n.getChildren().next != null) {
            inorder(n.getChildren().next.getChild());
        }

        System.out.println(n.getStart() + n.getEnd());

        if (n.getChildren().next.next != null) {
            inorder(n.getChildren().next.next.getChild());
        }

    }

    public void insert(node n, node r) {

        while (n.getStart() != 6) {

            if (r.getChildren().next == null) {

                //when the tree is empty :

                n.setParent(r);
                n.getChildren().setNext(null);

                link newn = new link();
                newn.setNext(null);
                newn.setChild(n);

                r.getChildren().next = newn;

                node newnode = n;
                newnode.setStart(n.getStart() + 1);

                insert(newnode, r);

            }

            else {

                // count is the node where we begin checking for same letters :

                node count = r.getChildren().next.getChild();

                // l is the linked list containing children of the node : 

                link l = r.getChildren().next;

                while ((a[count.getStart()] != a[n.getStart()])
                        || (l.next != null)) {
                    l = l.next;
                    count = l.getChild();
                }

                // create a new link node corresponding to the node to be inserted
                // only for the case when we reach the end of the list :

                link h = new link();
                h.setNext(null);
                h.setChild(n);

                // we have reached the end of the linked list :

                if ((a[count.getStart()] != a[n.getStart()])
                        && (l.next == null)) {

                    if (n.getStart() != n.getEnd()) {

                        l.setNext(h);
                        h.setNext(null);
                        h.setChild(n);

                        n.setParent(r);
                        n.getChildren().setNext(null);

                        node newnode = n;
                        newnode.setStart(n.getStart() + 1);

                        insert(newnode, r);

                    }

                    else {
                        l.setNext(h);
                        h.setNext(null);
                        h.setChild(n);

                        n.setParent(r);
                        n.getChildren().setNext(null);

                        node newnode = new node();
                        newnode.setStart(count.getStart() + 1);
                        newnode.setEnd(n.getEnd());

                    }
                }

                // if  we have found an element whose characters 
                // match that of the node:

                else {

                    link kids = count.getChildren();

                    int x = count.getStart();
                    int y = n.getStart();

                    int p = count.getEnd();
                    int q = n.getEnd();

                    int t1 = count.getStart();
                    int t2 = n.getStart();

                    int length = p - x + 1;

                    int same = 1;

                    while (a[x + 1] == a[y + 1]) {

                        x++;
                        y++;
                        same++;

                    }

                    int g = length - same;

                    //modifying the node r:

                    count.setStart(t1);
                    count.setEnd(x);

                    // creating the 2 new nodes to be inserted below count if 
                    // count initially doesnt have any children :

                    node kid1 = new node();
                    kid1.setStart(x + 1);
                    kid1.setEnd(p);
                    kid1.getChildren().setNext(null);

                    node kid2 = new node();
                    kid2.setStart(y + 1);
                    kid2.setEnd(q);

                    // creating 2 new link nodes to be inserted in 
                    // the children list of count :

                    link k1 = new link();
                    link k2 = new link();

                    k1.setChild(kid1);
                    k2.setChild(kid2);

                    k1.setNext(k2);
                    k2.setNext(null);

                    //changing relationships :

                    kid1.setChildren(kids);
                    kid1.setParent(count);

                    count.getChildren().next.setNext(k1);

                    while (kids.next != null) {
                        kids.next.getChild().setParent(kid1);
                        kids = kids.next;
                    }

                    insert(kid2, count);
                }
            }
        }
    }

    public static void main(String[] args) {
        tree t = new tree();

        node banana = new node();
        banana.setStart(0);
        banana.setEnd(7);
        banana.getChildren().setNext(null);

        t.insert(banana, t.root);

        //inorder(tree.root);
    }
} 
```

当我在 Eclipse 中运行它时，它说它有一些未解决的编译问题。你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:31:58.610

类块中不能有非声明性语句。

```
a[0]='b';
a[1]='a';
... 
```

所有这些数组赋值都属于方法、构造函数或`static`初始化程序块。或者，如果调整长度或数组，您可以简单地使用：

```
char a[] = "banana".toCharArray(); 
```

# css - Django 压缩器和部署

> ID：15254034
> 
> 赞同：1
> 
> 时间：2013-03-06T17:28:51.110
> 
> 标签：css, django, url, deployment, compression

[关于Django Compressor](https://github.com/jezdez/django_compressor)的一些事情我不清楚。

1）我应该只在开发环境中使用它吗？如果不是，这是否意味着它会在每次请求时压缩和聚合静态 js/css 文件，即使在生产环境中也是如此？

2）是否可以将内部css url更改为图像？我的意思是，例如：

```
body{
    background: #2b2925 url('http://localhost:8000/static/img/MyBG.png');
} 
```

这当然不适用于 prod 环境。我应该使用`compressor`在生产服务器上更改此 url 还是应该使用其他方法？`Fabric`例如，在部署期间用脚本解析和替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:38:40.813

没有理由在本地提供静态文件应用程序在绝对 URL 上提供的文件。您可以简单地使用文件的相对路径。这将解决您需要为本地与生产重写路径的问题。

所以例如使用：

```
body {
    background: #2b2925 url('../img/MyBG.png');
} 
```

考虑到您的目录结构，相对路径可能会有所不同。

Compressor 只会压缩 mtime 不同的文件，这意味着除非文件已更改，否则它不会在每次请求时重新压缩文件。

# vb.net - VB 以编程方式分配成员字段

> ID：15254035
> 
> 赞同：0
> 
> 时间：2013-03-06T17:28:51.463
> 
> 标签：vb.net, gettype, setvalue

[这个问题是成员字段](https://stackoverflow.com/questions/15211278/vb-redim-of-member-field-programmatically)的 VB ReDim 编程的后续问题。适当确定数组的尺寸后，我尝试设置元素的值，但在运行时尝试分配第一个值时出现异常 (MySB.AssignValues(0, "B", 0, 7.6))

```
System.InvalidCastException was unhandled
HResult=-2147467262
Message=Object cannot be stored in an array of this type.
Source=mscorlib

Module TestSetArray

    Public Class BS
        Public A As String
        Public B() As Double
        Public C() As Double

    End Class

    Public Class SB

        Public MyBS() As BS

        'ReadFieldString is a function that returns a string of the field name of Class BS,
        'i.e., A, B or C.  For test purpose, retun a constant
        Public Function ReadFieldString() As String
            Return "B"
        End Function

        'GetArrayDim is a function that returns an integer, which is the size of the array
        'of that field name. For test purpose, retun a constant
        Public Function GetArrayDim() As Integer
            Return 2
        End Function

        Public Sub DimArrays()
            ReDim MyBS(3)
            Dim i As Integer
            For i = 0 To MyBS.Length - 1
                MyBS(i) = New BS()
                Dim f = GetType(BS).GetField(ReadFieldString())
                f.SetValue(MyBS(i), Array.CreateInstance(f.FieldType.GetElementType(), GetArrayDim()))
            Next
        End Sub

        Public Sub AssignValues(MainIndex As Integer, TheName As String, TheIndex As Integer, TheValue As Double)
            Dim f = MyBS(MainIndex).GetType.GetMember(TheName)
            f.SetValue(TheValue, TheIndex)
        End Sub

    End Class

    Sub Main()
        Dim MySB As SB = New SB
        MySB.DimArrays()
        MySB.AssignValues(0, "B", 0, 7.6)
        MySB.AssignValues(0, "B", 1, 8.2)
    End Sub

End Module 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:40:32.423

问题是 GetMember 方法返回的是 MemberInfo 类型的数组，而不是类的双精度数组。如果您改用 GetField，您可能会更轻松。您必须调用 GetValue 并将其结果转换为 Array 才能使用 SetValue 设置值。

```
Public Sub AssignValues(MainIndex As Integer, TheName As String, TheIndex As Integer, TheValue As Double)
    Dim f = MyBS(MainIndex).GetType().GetField(TheName)
    Dim doubleArray = DirectCast(f.GetValue(MyBS(MainIndex)), Array)
    doubleArray.SetValue(TheValue, TheIndex)
End Sub 
```

或者如果您知道该数组将始终是一个 Double 数组，您可以将其直接转换为：

```
Public Sub AssignValues(MainIndex As Integer, TheName As String, TheIndex As Integer, TheValue As Double)
    Dim f = MyBS(MainIndex).GetType().GetField(TheName)
    Dim doubleArray = DirectCast(f.GetValue(MyBS(MainIndex)), Double())
    doubleArray(TheIndex) = TheValue
End Sub 
```

# lisp - lisp程序计算n个数字的总和

> ID：15254040
> 
> 赞同：-2
> 
> 时间：2013-03-06T17:29:13.467
> 
> 标签：lisp

```
(defun sum-n-numbers(n)(if(=n 1)
1
(+N(sum-n-numbers(-n 1))))) 
```

编辑 2： 上面的代码运行，但是当我为输出键入 (SUM-N-NUMBERS 1 3 2) 时，它不起作用并且出现错误。 我知道这个简单的代码也可以由自动计算数字总和的 inbuild lisp 函数 (+ 1 3 2) 执行，但我有一个考试问题，要求使用 defun 函数计算 n 个数字的总和.`(defun sum-n-numbers(n) (if(=n 1) 1 (+N(sum-n-numbers(-n 1)) )
)
)`

编辑1：这是我得到的错误：

```
Error: Call ((LAMBDA (#:N) (DECLARE (SPECIAL:SOURCE #) (LAMBDA-NAME SUM-N-NUMBERS))                  (BLOCK #:SUM-N-NUMBERS (IF # 1 #))) 1 3 2) has the wrong number of arguments.
1 (abort) Return to level 1.
2 Return to debug level 1.
3 Return to level 0.
4 Return to top loop level 0. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:14:36.593

有什么问题：

```
(apply '+ '(1 3 2)) 
```

??

```
(defun sum (numbers)
  (if (null numbers)
      0
      (+ (first numbers) (sum (rest numbers)))))

(sum '(1 3 2)) 
```

没测试。我手头没有 lisp 解释器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T17:01:14.687

要得到你想要的：

```
(defun sum-n-numbers (&rest nums)
    (if (null nums) 0 
        (+ (car nums) (apply #'my-sum (cdr nums))))) 
```

这将采用任意数量的参数并递归计算它们的总和。例如：

`(sum-n-numbers 1 2 3) => 6`

使用迭代，而不是递归：

```
(defun sum-n-numbers (&rest nums)
    (loop for num in nums summing num)) 
```

从用户的角度来看，它们是相同的，只是它们内部的工作方式略有不同。我已经测试了这两种方法以确保它们有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:11:28.920

您编写的函数接受一个参数并将数字之和从 1 返回到参数（请注意，它永远不会返回 - 理论上 - 并且会因堆栈溢出而失败 - 实际上 - 对于负参数）。

该函数不能接受你传递给它的 3 个参数，所以你得到了一个错误。

# c# - 如何在 TabControl 上“浮动”标签

> ID：15254041
> 
> 赞同：2
> 
> 时间：2013-03-06T17:29:14.707
> 
> 标签：c#, winforms, checkbox, label

你能像这样“浮动”一个`Label`吗`TabControl`： ![漂浮](../Images/04dc52d7f71966f2a1d2aae14829ebc4.png)

`Label`像图片右侧的“关于”还是“最小化到托盘” `CheckBox`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:03:17.453

如果使用设计器，则将标签放在 TabControl 上方，然后使用箭头键将其移动到位。适当地设置锚属性。如果它落在 TabControl 后面，右键单击它并选择 BringToFront。

如果Label在TabControl里面，可以使用“视图”-“其他窗口”-“文档大纲”面板来控制子控件的层次结构。

# ruby-on-rails - Rails - 将link_to中的参数传递给id的隐藏表单字段

> ID：15254044
> 
> 赞同：0
> 
> 时间：2013-03-06T17:29:29.253
> 
> 标签：ruby-on-rails, forms, link-to

我有一个应用程序，用户可以在其中设置一个文件夹来保存笔记。我之前有一个隐藏的表单字段来存储创建它的人的 id，即：

```
<%=f.hidden_field 'user_id', :value => current_user.id %> 
```

但是，我现在需要添加一个“keyholder”，他对该文件夹具有只读访问权限。我有一个链接列表，仅当用户添加了文件夹时才会出现，或者密钥持有者可以为它们设置一个。

密钥持有者本身就是普通用户，因此上面的代码只会设置一个具有自己 id 的文件夹，而不是他们正在访问其帐户的人的文件夹。密钥持有者有一个“access_id”，它与他们可以访问其帐户的人的用户 ID 相匹配。

如何设置它以使表单捕获正确的用户 ID？

我想要实现的是以下内容（这不起作用，但可能会更好地理解我的意思）：

```
<% if current_user.access.folder.nil? %>
    <li><%= link_to 'Create a Folder',
        new_folder_path(:user_id => current_user.access_id) %></li>
<% end %> 
```

我需要在文件夹表单中进行哪些更改才能使其接受此用户 ID？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:18:35.407

You'd better use an authorization gem such like [cancan](https://github.com/ryanb/cancan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:58:17.797

我不确定我是否完全理解您要执行的操作，而不是将用户 ID 存储在隐藏字段中。只需`<%= current_user.id %>`在任何页面上使用，就像您在做的那样。

然后根据您的模型的设置方式，只需创建一个帮助方法来检查用户所在页面的访问权限。我假设您的助手将检查`params[:id]`或`params[:user_id]`获取当前页面。

# ios - 设置内容类型覆盖httpbody？

> ID：15254046
> 
> 赞同：3
> 
> 时间：2013-03-06T17:29:31.200
> 
> 标签：ios, objective-c, nsmutableurlrequest

我在从我的 ios 应用程序调用 API 时遇到了一个奇怪的问题。我创建一个发布请求

```
NSMutableURLRequest *request = [NSMutableURLRequest
                                requestWithURL:url
                                   cachePolicy:NSURLRequestUseProtocolCachePolicy
                               timeoutInterval:5.0];
[request setHTTPMethod:@"POST"]; 
```

然后我创建 json 以发送到请求并将其添加到请求的正文中，如下所示：

```
[request setHTTPBody:encodedData]; 
```

最后，我添加了一些 cookie，然后设置：

```
NSArray* cookieArray = [NSArray arrayWithObjects: sessionCookie, uidCookie, vidCookie, nil];
NSDictionary * headers = [NSHTTPCookie requestHeaderFieldsWithCookies:cookieArray];
[request setAllHTTPHeaderFields:headers]; 
```

这一切都很好。但是，由于我正在发送 json，因此我正在努力做好并使用以下代码行设置内容类型：

```
[request setValue:@"application/json; charset=utf-8" forHTTPHeaderField: @"Content-Type"]; 
```

一旦我添加了这行代码，我发送到请求正文的数据就不再作为请求的一部分传递。这听起来像其他人经历过的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:18:42.193

我也在使用

```
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; 
```

检查这个解释 [“Content-type: application/json; charset=utf-8” 的真正含义是什么？](https://stackoverflow.com/questions/9254891/what-does-content-type-application-json-charset-utf-8-really-mean)

# c# - C#：整数集的类型安全（例如枚举）

> ID：15254047
> 
> 赞同：2
> 
> 时间：2013-03-06T17:29:33.813
> 
> 标签：c#, enums, type-safety

我有一个案例，我有几组数字（寄存器值）。我想提高可读性并检查适当的类型（只有某些值在某些函数中才有意义）。

在我的特定实现中，我将它们设为枚举 - 所以我现在有一组枚举。

现在我似乎已经结束了这种方法，因为我想将它们划分为某些应用程序的有效枚举集 - 因此函数 A 可以例如将（来自）enumA、enumB 和 enumC 的值作为输入，但不是 enumD这是对不同功能的描述。

我已经研究过接口中的枚举和枚举继承——两者都是死胡同，在 C# 中是不可能的。

我现在想知道这个问题的解决方案会是什么样子。我想对可能的值进行智能感知，并且还具有一些类型安全性，这样我就不能（好吧，至少在没有恶意强制转换的情况下）输入错误的值。

如何做到这一点？

（可能的解决方案是简单地编写几个采用几个不同枚举的函数 - 仍然可能但不是很好，或者类似[这种模式有名称吗？（C# compile-time type-safety with "params" args of different types）](https://stackoverflow.com/questions/6927642/is-there-a-name-for-this-pattern-c-compile-time-type-safety-with-params-arg) - 两者似乎都不太好。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:50:26.260

一种选择是废弃枚举并使用您自己的类来模拟枚举。设置它们需要做更多的工作，但是一旦你完成了，它就会很容易使用，并且能够拥有你所描述的功能。

```
public class Register
{
    private int value;

    internal Register(int value)
    {
        this.value = value;
    }

    public static readonly Register NonSpecialRegister = new Register(0);
    public static readonly Register OtherNonSpecialRegister = new Register(1);

    public static readonly SpecialRegister SpecialRegister 
        = SpecialRegister.SpecialRegister;
    public static readonly SpecialRegister OtherSpecialRegister 
        = SpecialRegister.OtherSpecialRegister;

    public override int GetHashCode()
    {
        return value.GetHashCode();
    }
    public override bool Equals(object obj)
    {
        Register other = obj as Register;
        if (obj == null)
            return false;

        return other.value == value;
    }
}

public class SpecialRegister : Register
{
    internal SpecialRegister(int value) : base(value) { }

    public static readonly SpecialRegister SpecialRegister = new SpecialRegister(2);
    public static readonly SpecialRegister OtherSpecialRegister = new SpecialRegister(3);
} 
```

鉴于此，您可以使用如下方法：

```
public static void Foo(Register reg)
{
} 
```

这可以使用任何寄存器，并且可以这样调用：

```
Foo(Register.NonSpecialRegister);
Foo(Register.OtherSpecialRegister); 
```

然后你可以有另一种方法，例如：

```
public static void Bar(SpecialRegister reg)
{
} 
```

哪个不能接受 a `Register.NonSpecialRegister`，但可以接受 a `Register.OtherSpecialRegister`or `SpecialRegister.SpecialRegister`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:35:34.147

听起来您已经用尽了 CLR 上静态类型系统的功能。您仍然可以通过使用一个类包装每个整数来获得运行时验证，该类验证您尝试存储在其中的值实际上是静态集的成员。

如果您有可靠的测试套件或愿意进行手动测试，这至少会捕获错误而不是导致无声数据损坏的错误。

如果您有多个要分开的“集合”，您可以使用类继承或使用一组用户定义的转换运算符来验证转换在运行时是否正常。

我不知道您有什么具体要求，但也许您可以使用基于类的继承来静态检查某些属性。在这种情况下，基类将是更大的集合，而派生类将专门化允许值的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:35:48.023

你基本上有两个选择：

### 选项 1：多个枚举

创建多个枚举，每个应用程序一个，并复制每个枚举中的值。然后你可以在它们之间施放。例如：

```
enum App1
{
    Data1 = AppAll.Data1,
    Data2 = AppAll.Data2,
    Data42 = AppAll.Data42,
}

enum App2
{
    Data2 = AppAll.Data2,
    Data16 = AppAll.Data16,
    Data42 = AppAll.Data42,
}

enum AppAll
{
    Data1 = 1,
    Data2 = 2,
    Data16 = 16,
    Data42 = 42,
}

App1 value1 = (App1)AppAll.Data2;
App2 value2 = (App2)value1; 
```

这将为您提供 IntelliSense。

### 选项 2：确定哪些是允许的

创建一个返回允许值的布尔值的方法（这可能是虚拟的并且对于每个应用程序都被覆盖）。然后可以在枚举值错误时抛出异常。

```
public bool IsAllowed(AppAll value)
{
    return value == AppAll.Data2
        || value == AppAll.Data16
        || value == AppAll.Data42;
}

if (!IsAllowed(value))
    throw new ArgumentException("Enum value not allowed."); 
```

这不会给您 IntelliSense。

* * *

几点注意事项：

*   您不能继承枚举，因为在幕后枚举表示为`structs`（即值类型）。
*   在 C# 中，您可以从字面上将*任何*值强制转换为您的枚举类型，即使它不是枚举类型的成员。例如，`(App1)1337`即使没有具有 value 的成员，我也可以这样做`1337`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T17:37:41.547

如果要*编译*类型检查，最好使用不同的枚举来处理不同的情况。如果您想拥有一个具有所有可能性的主枚举，您可以编写一个测试，以确保您的所有“子”枚举列表都是主枚举的有效子集（就 Int 强制转换而言）。

作为替代方案，我不得不想知道（由于没有提供代码，我只能想知道）是否可能无法更好地为每个枚举选项提供方法的对象提供服务。然后，您使用各种方法而不是枚举继承对象。（毕竟，您似乎使用 Enums 作为方法签名的代理）。

# nhibernate - 通过代码约定的 Nhibernate 映射到 Postgres 序列

> ID：15254051
> 
> 赞同：0
> 
> 时间：2013-03-06T17:29:37.600
> 
> 标签：nhibernate, nhibernate-mapping, npgsql

我正在使用 PostGres 8.3 并且 NHibernate 可以在数据库中正常工作...我正在创建一个约定文件并且我在配置主键序列时遇到问题...我所有的表都有一个名为 ID 的主键，所以我做过某事 ：

```
...
mapper.BeforeMapClass += (modelInspector, type, classCustomizer) => {
            classCustomizer.Id(c => c.Column("ID"));
            classCustomizer.Id(c => c.Generator(Generators.Sequence));
}; 
```

当我尝试保存实例时，我收到了该错误：

**错误：42P01：关系“hibernate_sequence”不存在**

我怎样才能为此创建一个约定？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T08:42:18.847

看看[如何正确使用 NHibernate By Code 来获取 Oracle 中的下一个序列？](https://stackoverflow.com/questions/8503771/how-to-properly-use-nhibernate-by-code-to-get-the-next-sequence-in-oracle)

```
Id(u => u.Id, map =>
            {
                map.Column("id");
                map.Generator(Generators.Sequence,
                              gmap => gmap.Params(new {sequence = "seq_name"}));
            }); 
```

# c++ - c ++正则表达式前面没有反斜杠和前面有反斜杠

> ID：15254052
> 
> 赞同：0
> 
> 时间：2013-03-06T17:29:39.610
> 
> 标签：c++, regex

我只能找到负面的回顾，比如`(?<!\\)`。
但这不会在 c++ 和 flex 中编译。似乎 regex.h 和 flex 都支持这个？

我正在尝试实现一个外壳，如果前面有反斜杠，它必须将特殊字符 , 视为普通参数字符串`>`。换句话说，只有在前面没有 0 或偶数个 '\' 的情况下才将特殊字符视为特殊字符`<``|`

所以`echo \\>a`或`echo abc>a`应该直接输出到`a`
但`echo \>a`应该打印`>a`

我应该使用什么正则表达式？
我正在使用 flex 和 yacc 来解析输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:06:12.637

在 Flex 规则文件中，您将`\\`用于匹配单个反斜杠 '\' 字符。这是因为`\`在 Flex 中用作转义字符。

```
 BACKSLASH           \\
    LITERAL_BACKSLASH   \\\\
    LITERAL_LESSTHAN    \\\\<
    LITERAL_GREATERTHAN \\\\>
    LITERAL_VERTICALBAR \\\\| 
```

如果我正确地跟随你，在你的情况下，你希望 "\>" 被视为文字'>'，但 "\\>" 被视为文字'\'，然后是特殊重定向。您不需要负面的看法或任何特别的东西来完成此操作，因为您可以构建一个既接受常规参数字符又接受特殊字符的文字版本的规则。

出于讨论的目的，我们假设您的自变量/参数可以包含除“ ”、“\t”和特殊形式的“>”、“<”、“|”之外的任何字符。论点的规则将类似于：

```
 ARGUMENT ([^ \t\\><|]|\\\\|\\>|\\<|\\\|)+ 
```

在哪里：

`[^ \t\\><|]`匹配除 ' '、'\t' 之外的任何单个字符，并且您的特殊字符
`\\\\`匹配 "\" 的任何实例（即文字反斜杠）
`\\>`匹配 ">" 的任何实例（即文字大于）
`\\<`匹配 "\ 的任何实例<"（即文字小于）
`\\\|`匹配“\|”的任何实例 （即文字垂直条/管道）

实际上......您可能可以将该规则缩短为：

```
 ARGUMENT ([^ \t\\><|]|\\[^ \t\r\n])+ 
```

在哪里：

`[^ \t\\><|]`匹配除 ' '、'\t' 之外的任何单个字符，并且您的特殊字符
`\\[^ \t\r\n]`匹配输入中除空格以外的任何以 '\' 开头的字符（它将处理所有特殊字符并允许所有其他字符的文字形式)

如果你想在你的参数/参数中允许文字空格，那么你可以进一步缩短规则，但要小心使用`\\.`规则交替的后半部分，因为它可能匹配也可能不匹配“\n”（即吃掉你的尾随命令终止符！）。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:53:26.470

You cannot easily extract single escaped characters from a command-line, since you will not know the context of the character. In the simplest case, consider the following:

```
 LessThan:\<
 BackslashFrom:\\< 
```

In the first one, `<` is an escaped character; in the second one, it is not. If your language includes quotes (as most shells do), things become even more complicated. It's a lot better to parse the string left to right, one entity at a time. (I'd use `flex` myself, because I've stopped wasting my time writing and testing lexers, but you might have some pedagogical reason to do so.)

If you really need to find a special character which shouldn't be special, just search for it (in C++98, where you don't have raw literals, you'll have to escape all of the backslashes):

```
 regex: (\\\\)*\\[<>|]
     (An even number -- possibly 0 -- of \, then a \ and a <, > or |) 
 as a C string => "(\\\\\\\\)*\\\\[<>|]" 
```

# c# - 在asp.net的另一个网页中显示网页

> ID：15254053
> 
> 赞同：0
> 
> 时间：2013-03-06T17:29:40.587
> 
> 标签：c#, asp.net

我想在另一个网页中显示网页假设我想在 abc.com/parent.aspx 页面中显示 xyz.com/child.aspx 页面。

我可以使用 iframe，但我在 xyz.com 上应用了 http 凭据。我在网上搜索但仍然困惑我应该使用什么？

我使用 asp.net 4.5 c#。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:46:51.880

如果 2 个站点托管在同一个网络（它们之间的延迟低），您可以使用状态服务器进行会话管理。这样，当您在一个站点上进行身份验证时，您也将在另一个站点上进行身份验证，并在它们之间共享用户状态。

它非常简单，在每个 Web 服务器的 Web 配置中，您将指向状态服务器（可能位于其中一个 Web 服务器上）

```
<configuration>
  <system.web>
    <sessionState mode="StateServer"
       stateConnectionString="192.168.1.103:42424"
    />
  </system.web>
</configuration> 
```

[http://en.csharp-online.net/ASP.NET_State_Management%E2%80%94Storing_Session_State_out_of_Process](http://en.csharp-online.net/ASP.NET_State_Management%E2%80%94Storing_Session_State_out_of_Process)

# registry - 注册表、DCOM 和 Windows 2008/2012 64 位

> ID：15254066
> 
> 赞同：1
> 
> 时间：2013-03-06T17:30:02.333
> 
> 标签：registry, windows-server-2008-r2, dcom

我有一个多年前创建的 COM dll - 它有 .odl 文件而不是 .idl 文件。我想在 Windows 2008/2012 64 位上创建它的*远程实例。*它最初没有创建 AppID 注册表项，因此我创建了一个 reg 文件，该文件将为 DLL 中的类创建 AppID 键。我在 windows 2003 32 位上对其进行了测试，当我尝试远程创建对象时它工作正常。但是在 Windows 2008/2012 64 位上，即使没有 UAC，我似乎也无法远程创建对象。我不断收到“类未注册”错误，但我可以在本地创建对象。所以，我想知道我需要在哪里以及创建哪些注册表项，以便我可以远程创建对象。

谢谢你的帮助，-尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T17:17:30.097

我需要在 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Classes\AppID 节点而不是 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\AppID 下为 AppID 输入条目

# c# - 由于无法关闭数据库连接，线程被阻塞

> ID：15254069
> 
> 赞同：1
> 
> 时间：2013-03-06T17:30:24.830
> 
> 标签：c#, sql, multithreading, concurrency, deadlock

在堆栈跟踪中`MessageProcessor.Dispose()`，`OnThreadShutdownRequested`和`RenewTaskLeaseCallback`都需要一个锁来防止这些对象中的竞争条件。线程 (ID14968) 的堆栈跟踪保存所有锁，这会导致其他线程阻塞并等待它释放锁。

问题是，当`CloseConnection()`在 thread-14968 上调用时，连接永远不会关闭，而是`SyncAsyncLock.Wait()`在内部调用`CloseConnection()`。调用被阻塞，无法继续，出现死锁情况。

什么可能导致线程在`CloseConnection()`被调用时阻塞？

大图[在这里](https://docs.google.com/file/d/0B5LqE9IVzH2wU05VOHZSeTBaZnM/edit?usp=sharing)。 ![死锁线程的堆栈跟踪](../Images/56c34ab5098a40dfa77429a7e0df335b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:05:06.897

在这个问题上工作了两天后，我终于弄清楚了问题所在。有一种情况可能导致应用程序出现死锁。

该`TaskLeaseRenewer`对象实现`IDisposable`并且可以被多个线程访问。在类内部使用锁来确保没有两个线程会尝试同时释放对象。`TaskLeaseRenewer`有一个定时器和一个回调函数`Callback`，定时器将在一个单独的线程上定期调用。`Callback`线程将尝试调用`Thread.Abort()`创建`TaskLeaseRenewer`并最终调用`Dispose()`的线程`TaskLeaseRenwer`

当我尝试中止执行以下操作的线程时，就会出现问题：

```
using(TaskLeaseRenewer renewer = new TaskLeaseRewnewer())
{
    DoStuff();
} 
```

我发现当你`Thread.Abort()`用语句调用线程时`using`，它不会终止线程，直到它调用`Dispose()`所用对象上的函数。

下面的示例将`ConnectionWrapper.Dispose()`在线程中止之前触发。

```
static void DisposeOnAbort()
{
    Thread t = new Thread(() =>
    {
        Console.WriteLine("Using connection wrapper");
        using (ConnectionWrapper wrapper = new ConnectionWrapper())
        {

            while (true)
            {
                Thread.Sleep(1000);
            }
        }
    });
    t.Start();
    Thread.Sleep(1000);
    Console.WriteLine("Aborting thread..");
    t.Abort();
} 
```

鉴于这些，我发现问题是当`Callback()`调用时`Thread.Abort()`，`TaskLeaseRenewer.Dispose()`将在它创建的线程上调用，因为线程正准备被杀死。但是`Callback()`，函数位于不同的线程上，并且还持有该`Dispose()`函数试图获取的锁。`Dispose()`将无法获得锁，并且线程永远不会终止。

解决了这个问题后，`connection.Close()`僵局似乎消失了。我仍然对可能阻止连接关闭的原因感兴趣。

在更多地解决这个问题之后，我发现当一个线程被中止时，一次性对象的`Dispose()`对象总是被调用。是否`using`使用语句。调用栈如下：

```
Threads.exe!Threads.ConnectionWrapper.Dispose() Line 150    C#
Threads.exe!Threads.Program.DisposeOnAbort.AnonymousMethod__0() Line 58 + 0x2c bytes    C# 
```

# knockout.js - 关于 foreach 子父级的 Knockoutjs

> ID：15254071
> 
> 赞同：0
> 
> 时间：2013-03-06T17:30:29.130
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc, knockout-sortable

我有一个模型，其中包含 2 个类型和名称地址等数组，如下所示：

```
 var model = [{"bstype":1},{"bstype":2},{"bstype":3},{"bstype":4}],
  [{"bstype":1, "name":"John","Address":"Sample address"}, 
  [{"bstype":1, "name":"John","Address":"Sample address"},
  [{"bstype":3, "name":"John","Address":"Sample address"},
  {"bstype":2 ,"name":"John","Address":"Sample address"}];
  [{"bstype":2, "name":"John","Address":"Sample address"},
  [{"bstype":4, "name":"John","Address":"Sample address"}]; 
```

我想要它做的是创建一个列表：

就像是

```
 I am not sure about this part how to implement it that is why it was gibberish.
   bstype":1 will have a view of following
     [{"bstype":1, "name":"John","Address":"Sample address"}, 
     [{"bstype":1, "name":"John","Address":"Sample address"},
   bstype"2: will have a view of following
     {"bstype":2 ,"name":"John","Address":"Sample address"}];
     [{"bstype":2, "name":"John","Address":"Sample address"},
   bstype":3 has only one
     [{"bstype":3, "name":"John","Address":"Sample address"}, 
```

依此类推。

我正在使用淘汰赛我已经检查了它只讨论了 foreach 但没有讨论如何访问子元素的站点。

我希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:59:14.780

一个帮助方法来组合两个数组，就像你用同一个键完成的那样：

```
var model = [{"bstype":1},{"bstype":2},{"bstype":3},{"bstype":4}];

var modelChildren = [{"bstype":1, "name":"John","Address":"Sample address"}, 
  {"bstype":1, "name":"John","Address":"Sample address"},
  {"bstype":3, "name":"John","Address":"Sample address"},
  {"bstype":2 ,"name":"John","Address":"Sample address"},
  {"bstype":2, "name":"John","Address":"Sample address"},
  {"bstype":4, "name":"John","Address":"Sample address"}]; 
```

此方法将为您提供一个“按”匹配的 bstype 分组的新数组：

```
 var result = model.map(function(elem)
          {
              return { 
                  bstype: elem.bstype,
                  children: modelChildren.filter(function(childElem) { 
                      return childElem.bstype == elem.bstype;
                  })
              };
          }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:45:12.193

我将它们分成两个 var 项，第一个包含第一个数组，第二个数组。完成后，我使用第一个数组根据 bstype 循环 4 次。然后使用 $.root.secondarray 遍历第二项。谢谢大家。

# c++ - win32（全屏）无边框窗口重叠任务栏

> ID：15254078
> 
> 赞同：7
> 
> 时间：2013-03-06T17:30:44.750
> 
> 标签：c++, windows, winapi, windows-8

我正在尝试创建一个无边框窗口，它可能在全屏（不使用`ChangeDisplaySettings(&settings, CDS_FULLSCREEN);`）中与任务栏重叠，但我不知道该怎么做。我已经尝试了几乎所有可能的`CreateWindowEx`风格组合，但没有成功。

它的目的是在使用 opengl/directx 的窗口无边界应用程序中呈现，同时允许在后台继续呈现时使用 alt-tabbing。这是由许多游戏（例如 wow 和 dota2（`windowed fullscreen`选项）以及 windows7 任务管理器等应用程序完成的（在 vm 中截取了两张截图来证明这个想法）（windows8 没有这种行为）。

任务管理器不专注：

![](../Images/7160e1242d467ae2da7ea7c87a9520ce.png)

任务管理器重点：

![](../Images/c4afb183d4da31c29ca78df940ba99b2.png)

这是我用来轻松测试我的一些想法的一些最小代码，但没有一个真正做到这一点。它只创建一个大小为 screenwidth-20 和 screenheight-20 的无边框窗口。

```
#include <windows.h>

static bool quit = false;

static LRESULT CALLBACK message_handler(HWND hwnd, UINT umsg, WPARAM wparam, LPARAM lparam)
{
    switch(umsg)
    {
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        case WM_CLOSE:
            quit = true;
        break;
    }

    return DefWindowProc(hwnd, umsg, wparam, lparam);
}

int main()
{
    WNDCLASSEX wc;
    HMODULE hInstance;
    HWND hwnd;
    MSG msg;

    ZeroMemory(&msg, sizeof(MSG));
    hInstance = GetModuleHandle(NULL);

    wc.style            = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
    wc.lpfnWndProc      = message_handler;
    wc.cbClsExtra       = 0;
    wc.cbWndExtra       = 0;
    wc.hInstance        = hInstance;
    wc.hIcon            = LoadIcon(NULL, IDI_WINLOGO);
    wc.hIconSm          = wc.hIcon;
    wc.hCursor          = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground    = (HBRUSH)COLOR_WINDOWFRAME;
    wc.lpszMenuName     = NULL;
    wc.lpszClassName    = "test";
    wc.cbSize           = (unsigned int)sizeof(WNDCLASSEX);

    RegisterClassEx(&wc);

    hwnd = CreateWindowEx(WS_EX_APPWINDOW, "test", "test", WS_OVERLAPPED|WS_POPUP, 10, 10, (int)GetSystemMetrics(SM_CXSCREEN)-20, (int)GetSystemMetrics(SM_CYSCREEN)-20, NULL, NULL, hInstance, NULL);
    //hwnd = CreateWindowEx(WS_EX_APPWINDOW, "test", "test", WS_OVERLAPPED|WS_POPUP, 0, 0, (int)GetSystemMetrics(SM_CXSCREEN), (int)GetSystemMetrics(SM_CYSCREEN), NULL, NULL, hInstance, NULL);

    ShowWindow(hwnd, SW_SHOW);
    SetForegroundWindow(hwnd);
    SetFocus(hwnd);

    while (!quit)
    {
        if (PeekMessage(&msg, 0, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return 0;
} 
```

使用

```
CreateWindowEx(WS_EX_APPWINDOW, "test", "test", WS_OVERLAPPED|WS_POPUP, 0, 0, (int)GetSystemMetrics(SM_CXSCREEN), (int)GetSystemMetrics(SM_CYSCREEN), NULL, NULL, hInstance, NULL); 
```

确实与任务栏重叠，但是当opengl在其上渲染时它有一些奇怪的行为（闪烁/闪烁屏幕，例如当视频模式改变时。[这个论坛](http://en.sfml-dev.org/forums/index.php?topic=9839.0)上的某个人遇到了相同的效果，该库的某种库可以为跨平台窗口制作渲染和其他东西。有人还在该线程中发布了[一个视频（小心，响亮的音乐）](http://www.youtube.com/watch?v=567Fw9V3cGg)，它准确地显示了我想要实现的目标）。

我已经下载了那个开源库并试图弄清楚它在做什么，但我找不到任何关于它创建窗口的方式的特别之处。

`g++ (Built by MinGW-builds project) 4.8.0 20121225 (experimental)`在 Windows8 上使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T18:32:25.350

Raymond Chen[解释了如何切换全屏模式，而不是简单地通过使用](https://devblogs.microsoft.com/oldnewthing/20100412-00/?p=14353)[SetWindowLong(Ptr)](https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx)更改窗口样式，使用[SetWindowPlacement](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633544(v=vs.85).aspx)调整窗口大小，并使用[SetWindowPos](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)确保框架重绘。

任务栏检测窗口何时尝试全屏并自动退出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T17:49:58.377

使用该[`SetWindowPos`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)设置您的窗口TOPMOST。当您收到一条消息说您失去焦点时，请再次将其设为非最顶部，以便您切换到的另一个窗口可以出现。

# tcl - 如何命令一个 tcl 程序使用变量？

> ID：15254082
> 
> 赞同：0
> 
> 时间：2013-03-06T17:30:52.490
> 
> 标签：tcl

我试图拥有一个非常通用的函数并命令它使用它从外部遇到的变量。我尝试了以下（简化代码），但没有用：

```
set line "found \$find1 at \$find2"
do_search $line

proc do_search {line} {
...
if {[regexp $exp $string match find1 find2} {
     puts "$line"
} 
```

但是我得到的只是：`found $find1 at $find2`或者，如果我在调用函数之前不使用find`\`之前`$find`的值。

鉴于此正则表达式是解析文件时 while 循环的一部分，因此在调用 proc 后我无法使用这些值。

有什么想法怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:54:36.420

对于您的确切风格，您想要`subst`：

```
if {[regexp $exp $string match find1 find2} {
     puts [subst $line]
} 
```

但是您也可以考虑使用`format`：

```
set fmt "found %s at %s"
do_search $fmt

proc do_search {fmt} {
...
if {[regexp $exp $string match find1 find2} {
     puts [format $fmt $find1 $find2]
} 
```

# ajax - 简单的 jQuery / Ajax 错误

> ID：15254083
> 
> 赞同：0
> 
> 时间：2013-03-06T17:30:55.373
> 
> 标签：ajax, jquery, error-handling

我有这个代码：

```
var custID = 1;

$.ajax({
    url: 'php/viewCustomer.php',
    type: 'GET',
    data: '{custID: ' + custID + '}',
    dataType: 'json',
    cache: false,
    beforeSend: function () {
        $('#display').append('<div id="loader"> Lodaing ... </div>');
    },
    complete: function () {
        $('#loader').remove();
    },
    success: function (data) {
        //do something
    },
    error: function () {
        alert('could not process');
    }
}); 
```

有错误并警告错误消息`could not process`，所以我尝试像这样调试它：

```
var custID = 1;

$.ajax({
    url: 'php/viewCustomer.php',
    type: 'GET',
    data: '{custID: ' + custID + '}',
    dataType: 'json',
    cache: false,
    beforeSend: function () {
        $('#display').append('<div id="loader"> Lodaing ... </div>');
    },
    complete: function () {
        $('#loader').remove();
    },
    success: function (data) {
        //do something
    },
    error: function (jqXHR) {
        alert('Error: ' + jqXHR.status + jqXHR.statusText);
    }
}); 
```

输出：

```
200 OK 
```

所以如果没问题，为什么它会执行错误：函数。很困惑，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:35:12.617

如果您打算将其作为 JSON 对象，则您的数据字符串格式不正确。以前有一个关于这个的问题：[Jquery pass data to ajax function](https://stackoverflow.com/questions/4866150/jquery-passing-data-to-ajax-function)

相反，请尝试：

```
data: JSON.stringify({custID: custID}), 
```

格式为（键）：（变量）。我之前的回答在变量周围加上了引号，这是不必要的。

# flash - 在 Windows 中测试时如何制作 AIR 应用程序横向

> ID：15254084
> 
> 赞同：0
> 
> 时间：2013-03-06T17:31:11.927
> 
> 标签：flash

抱歉，如果我听起来不具体，但我正在尝试使用 flash 制作应用程序，并且有问题的应用程序旨在以横向纵横比运行，我想知道是否有办法让它在具有横向纵横比的 Windows 中编译，当我编译它时，窗口是纵向的，这会扭曲应用程序中的所有内容

# asp.net-mvc - 如何通过非管理员帐户使用 Web Deploy 3.0

> ID：15254087
> 
> 赞同：7
> 
> 时间：2013-03-06T17:31:14.377
> 
> 标签：asp.net-mvc, webdeploy

我正在尝试使用非管理员帐户（使用 Web Deploy 3.0）部署 ASP.net MVC 网站。根据我看过的所有视频和文档，这是可能的。但是，当我尝试部署时出现错误 (ERROR_USER_NOT_ADMIN)。

我在服务器上的“IIS 管理用户”下添加了用户。此用户存在于站点的“IIS 管理器权限”下。

我错过了什么？

这是pubxml：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>MSDeploy</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish>http://sitename.com/</SiteUrlToLaunchAfterPublish>
    <MSDeployServiceURL>http://server.com</MSDeployServiceURL>
    <DeployIisAppPath>IISsitename</DeployIisAppPath>
    <RemoteSitePhysicalPath />
    <SkipExtraFilesOnServer>True</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>RemoteAgent</MSDeployPublishMethod>
    <UserName>user</UserName>
    <_SavePWD>True</_SavePWD>
    <PublishDatabaseSettings>
      <Objects xmlns="">
      </Objects>
    </PublishDatabaseSettings>
  </PropertyGroup>
</Project> 
```

> [http://www.iis.net/learn/publish/troubleshooting-web-deploy/web-deploy-error-codes#ERROR_USER_NOT_ADMIN](http://www.iis.net/learn/publish/troubleshooting-web-deploy/web-deploy-error-codes#ERROR_USER_NOT_ADMIN)
> 
> ERROR_USER_NOT_ADMIN 诊断 - 如果您尝试连接到远程代理服务但未提供适当的管理员凭据，则会发生这种情况。解决方案 - 远程代理服务接受内置管理员或域管理员凭据。如果您有一个非域设置并想使用内置管理员以外的帐户，请执行以下操作： 在远程计算机上创建一个单独的用户组 MSDepSvcUsers。在本地和远程计算机上创建一个本地帐户 A。将 A 添加到远程计算机上的 MSDepSvcUsers。使用帐户 A 发布，这将允许您发布而无需使用内置 > 管理员帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:50:02.940

我认为您还需要使用 iis 中的管理服务委托功能为您部署的用户创建委托规则。

请参阅本文的第 2 部分

[http://www.iis.net/learn/publish/using-web-deploy/configure-the-web-deployment-handler](http://www.iis.net/learn/publish/using-web-deploy/configure-the-web-deployment-handler)

# android - KXmlParser 在 RSS 传输开始时抛出“Unexpected token”异常

> ID：15254089
> 
> 赞同：4
> 
> 时间：2013-03-06T17:31:25.213
> 
> 标签：android, rss, xmlpullparser

我正在尝试使用以下 URL 解析来自 Android v.17 上 Monster 的 RSS 提要：

[http://rss.jobsearch.monster.com/rssquery.ashx?q=java](http://rss.jobsearch.monster.com/rssquery.ashx?q=java)

要获取内容，我以以下方式使用 HttpUrlConnection

```
this.conn = (HttpURLConnection) url.openConnection();
this.conn.setConnectTimeout(5000);
this.conn.setReadTimeout(10000);
this.conn.setUseCaches(true);
conn.addRequestProperty("Content-Type", "text/xml; charset=utf-8");
is = new InputStreamReader(url.openStream()); 
```

回来的是据我所知（我也验证过）一个合法的 RSS

```
Cache-Control:private
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:5958
Content-Type:text/xml
Date:Wed, 06 Mar 2013 17:15:20 GMT
P3P:CP=CAO DSP COR CURa ADMa DEVa IVAo IVDo CONo HISa TELo PSAo PSDo DELa PUBi BUS LEG PHY ONL UNI PUR COM NAV INT DEM CNT STA HEA PRE GOV OTC
Server:Microsoft-IIS/7.5
Vary:Accept-Encoding
X-AspNet-Version:2.0.50727
X-Powered-By:ASP.NET 
```

它的开头是这样的（如果您想查看完整的 XML，请单击上面的 URL）：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>Monster Job Search Results java</title>
    <description>RSS Feed for Monster Job Search</description>
    <link>http://rss.jobsearch.monster.com/rssquery.ashx?q=java</link> 
```

但是当我尝试解析它时：

```
final XmlPullParser xpp = getPullParser();
xpp.setInput(is);
for (int type = xpp.getEventType(); type != XmlPullParser.END_DOCUMENT; type = xpp.next()) { /* pasing goes here */ } 
```

代码立即`type = xpp.next()`因以下异常而窒息

```
03-06 09:27:27.796: E/AbsXmlResultParser(13363): org.xmlpull.v1.XmlPullParserException: 
   Unexpected token (position:TEXT ﻿@1:2 in java.io.InputStreamReader@414b4538) 
```

这实际上意味着它无法在第 1 行处理第二个字符`<?xml version="1.0" encoding="utf-8"?>`

以下是 KXmlParser.java (425-426) 中的违规行。类型 == TEXT 计算为`true`

```
if (depth == 0 && (type == ENTITY_REF || type == TEXT || type == CDSECT)) {
    throw new XmlPullParserException("Unexpected token", this, null);
} 
```

有什么帮助吗？我确实尝试将解析器设置为，`XmlPullParser.FEATURE_PROCESS_DOCDECL = false`但这没有帮助

我在网上和这里做了研究，找不到任何有用的东西

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-10T05:59:42.130

您收到错误的原因是 xml 文件实际上并非以`<?xml version="1.0" encoding="utf-8"?>`. 它以三个特殊字节开始，`EF BB BF`它们是[`Byte order mark`](http://en.wikipedia.org/wiki/Byte_order_mark).

![十六进制表示](../Images/26572322a05e2f85d5aeace5f7e393b4.png)

`InputStreamReader`不会自动处理这些字节，因此您必须手动处理它们。最简单的方法是使用库中的[`BOMInpustStream`](http://commons.apache.org/proper/commons-io//apidocs/org/apache/commons/io/input/BOMInputStream.html)可用[`Commons IO`](http://commons.apache.org/proper/commons-io//download_io.cgi)：

```
this.conn = (HttpURLConnection) url.openConnection();
this.conn.setConnectTimeout(5000);
this.conn.setReadTimeout(10000);
this.conn.setUseCaches(true);
conn.addRequestProperty("Content-Type", "text/xml; charset=utf-8");
is = new InputStreamReader(new BOMInputStream(conn.getInputStream(), false, ByteOrderMark.UTF_8)); 
```

我检查了上面的代码，它对我很有效。

# wordpress - Wordpress 图库颜色框仅显示一个缩略图

> ID：15254091
> 
> 赞同：0
> 
> 时间：2013-03-06T17:31:27.410
> 
> 标签：wordpress, gallery, colorbox, wordpress-3.5

我想在 wordpress 帖子中插入一个画廊，这样我就可以拥有多张图片但只显示一个缩略图。

我正在使用 Wordpress 3.5、图库简码和颜色框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:39:56.880

看看我[在 coderwall 上的专业提示](https://coderwall.com/p/yc15ng?i=1&p=1&q=&t%5B%5D=%21%21mine&t%5B%5D=%21%21bookmarks)。我使用页面/帖子来存储图像并使用简码显示画廊。

# css - ipad / iphone 上固定页眉、页脚和侧边栏的问题

> ID：15254095
> 
> 赞同：3
> 
> 时间：2013-03-06T17:31:34.490
> 
> 标签：css, ipad, header, footer, fixed

我正在为当地俱乐部开发一个新网站。

我已经创建了主网页，并有一个固定的页眉、页脚和侧边栏，内容位于滚动元素中。该页面在我的 MacBook 和各种浏览器上看起来很完美。当我在 iPhone 或 iPad 上查看页面时，页面看起来应该是这样，直到我缩放页面，然后固定的侧边栏不再固定。

如果有人对我做错了什么有任何线索，我将非常感激，因为这让我发疯。

可以在[http://tawvelo.org/new/home.html](http://tawvelo.org/new/home.html)查看测试页面。

我附上了几张照片，希望能说明这个问题。

![页面外观照片](../Images/2465215b3b3b7ce26c3ca7868ece8057.png)

![使用 iPhone / iPad 缩放时页面的外观照片](../Images/c0878fc1d362d2ac6ccfdeb113fd657a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:39:58.303

`position: fixed`已知在 iOS 上玩得不好 - [http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)

如何解决？简单的。搜索 StackOverflow。之前有人问过这个问题：

1.  [CSS“位置：固定；” 进入 iPad/iPhone？](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)
2.  [固定移动 Safari 中的定位](https://stackoverflow.com/questions/743123/fixed-positioning-in-mobile-safari)

# java - 如何获取选定的单元格 如果可能的话，我想获得primefaces的选定单元格或colomne（id） <p:datatable 1="" 13576="" 我的桌子是这样的：="" <p:datatable="" id="table" var="list" value="#{bean.list}" rowkey="#{list}" selectionmod="" 问问题="" 2013-03-06t17:31:39.463="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 如果可能的话，我想获得primefaces的选定单元格或colomne（id）<p:datatable="" selectionmode="single"><p:ajax event="rowSelect" listener="#{bean.onRowSelect}"></p:ajax></p:datatable>使用这种方法，我可以使用选择的行（行）， <p:ajax event="rowSelect" listener="#{bean.onRowSelect}">但我无法获得选定的列“ Date”或“ Name” onrowSelecte 方法如下： public void onRowSelect(SelectEvent event) myObject obj = (myObject)event.getObject(); //....... } 我认为 primefaces 没有任何东西可以选择一列，您可能需要添加类似 <h:outputtext value="#{list.SDate}"><f:ajax event="select" listener="#{bean.setSelectedColumn}"></f:ajax></h:outputtext>使用 event.getComponent() 进一步确定选择了哪一列 javaajaxjsfprimefaces 4 4 回答 4 This answer is useful 2 卡里姆， 我认为您忘记在 ajax 事件上添加更新： <p:ajax event="rowSelect" listener="#{bean.onRowSelect}" update="table">update你需要把你的表ID或封装你的表的元素放在上面。 如果表在 outputPanel 内，您可以更新它的 id 而不是表。 update将屏幕信息发送到您的 backBean 所必需的属性。 我希望它可以解决... 祝你好运！ 于 2016-09-23T14:23:03.557 回答 This answer is useful 1 你可以做这样的事情来获取特定列的值 <p:datatable id="firsttable" var="list" value="#{bean.list}" rowkey="#{list}" selectionmode="single"></p:datatable>// This is capture the value of selected column <h:inputtext id="selectedId" value="#{bean.selectedColumn}" style="display:none"><f:ajax listener="#{bean.onRowSelect}"></f:ajax></h:inputtext>此脚本捕获所选行的值并设置 inputHidden jQuery.noConflict(); $(window).load(function () { $(document).delegate("#firsttable td", "click", function (event) { var columnNumber = jQuery(this).index();//get index of clicked row var colval=jQuery(this).find('div span').text()); // get the column value $("#selectedId").val(colval); //set value in the inputtext $("#selectedId").change(); //this will trigger the ajax listener }); }); 并在 bean 中定义属性以获取输入文本值 String selectedColumn; public void onRowSelect(AjaxBehaviorEvent event) { String value=getSelectedColumn(); System.out.println(value); } 于 2013-03-07T03:01:06.710 回答 This answer is useful 1 I don't think primefaces has anything to select a column , you may need to add something like <h:outputtext value="#{list.SDate}"><f:ajax event="select" listener="#{bean.setSelectedColumn}"></f:ajax></h:outputtext>Use event.getComponent() to further determine which column is selected 于 2013-03-06T17:51:22.540 回答 This answer is useful 0 关于 PrimeFaces DataTable、widgetVar、Javascript、jQuery： 我在使用 Primefaces widgetVar 获取 PrimeFaces 3.5 DataTable 的选定行时遇到了麻烦。我在这里查看了PF源... https://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/datatable/datatable.js?r=10301 ...并且还使用 Chrome 调试器检查了 DataTable，但没有找到 getSelectedRow 方法。我可能错过了一些有用的东西，但这是我的 hack，它有效。 var selectedRow = Array(); $('#idForm1\\:idDT tr.ui-state-highlight').each(function(i) { $(this).children('td').each(function(ii) { selectedRow.push($(this).text()); }); }); 数组 selectedRow 填充了选定 DataTable 行的文本值。 于 2014-07-09T23:42:10.960 回答 Related 1 embedded - STM32F3 I2C读取数据 3 c# - Visual Studio 2010 属性面板文本右对齐 1 sql - “x IN (a,b)”与“x = a OR x = b”的表现 3 jquery - 如何设置元素的“大小”属性使用属性对象？ 1 sql - 使用来自另一个表的值更新单个列中的多个记录 1 python - 删除外键 1 tags - Shopify 中的标签相关产品 1 ios - 确定是否使用前置或后置摄像头来捕获视频 5 angularjs - 带有货币掩码指令的角度输入字段，用于即时货币格式 1 c# - 如何获取特定 RichTextBox 控件可以在同一行显示的字符串的最大长度？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:ajax></p:ajax>

> ID：15254098
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, ajax, jsf, primefaces

如果可能的话，我想获得primefaces的选定单元格或colomne（id）`<p:dataTable`

我的桌子是这样的：

```
<p:dataTable id="table" var="list" value="#{bean.list}" rowKey="#{list}" selectionMode="single" >
    <p:ajax event="rowSelect" listener="#{bean.onRowSelect}" />
    <p:column headerText="Date" >
        <h:outputText  value="#{list.SDate}" />
    </p:column>
    <p:column headerText="Name" >
        <h:outputText value="#{list.IName}" />
    </p:column>
</p:dataTable> 
```

使用这种方法，我可以使用选择的行（行），`<p:ajax event="rowSelect" listener="#{bean.onRowSelect}" />` 但我无法获得选定的列“ `Date`”或“ `Name`”

onrowSelecte 方法如下：

```
 public void onRowSelect(SelectEvent event)
        myObject obj = (myObject)event.getObject();
        //.......
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-23T14:23:03.557

卡里姆，

我认为您忘记在 ajax 事件上添加**更新：**

```
<p:ajax event="rowSelect" listener="#{bean.onRowSelect}" update="table" /> 
```

`update`你需要把你的表ID或封装你的表的元素放在上面。

如果表在 outputPanel 内，您可以更新它的 id 而不是表。

> `update`将屏幕信息发送到您的 backBean 所必需的属性。

我希望它可以解决...

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:01:06.710

你可以做这样的事情来获取特定列的值

```
<p:dataTable id="firsttable" var="list" value="#{bean.list}" rowKey="#{list}" selectionMode="single" >
     <p:column headerText="Date" >
        <h:outputText  value="#{list.SDate}" />
    </p:column>
    <p:column headerText="Name" >
        <h:outputText value="#{list.IName}" />
    </p:column>
</p:dataTable>

// This is capture the value of selected column
<h:inputText id="selectedId" value="#{bean.selectedColumn}" style="display:none">
       <f:ajax listener="#{bean.onRowSelect}"></f:ajax>
</h:inputText> 
```

此脚本捕获所选行的值并设置 inputHidden

```
 jQuery.noConflict();
    $(window).load(function () {
         $(document).delegate("#firsttable td", "click", function (event) {
             var columnNumber = jQuery(this).index();//get index of clicked row
         var colval=jQuery(this).find('div span').text()); // get the column value
         $("#selectedId").val(colval); //set value in the inputtext
         $("#selectedId").change(); //this will trigger the ajax listener
       });
    }); 
```

并在 bean 中定义属性以获取输入文本值

```
 String selectedColumn;

 public void onRowSelect(AjaxBehaviorEvent event) {
         String value=getSelectedColumn();
         System.out.println(value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:51:22.540

I don't think primefaces has anything to select a column , you may need to add something like

```
<h:outputText  value="#{list.SDate}" >
<f:ajax event="select" listener="#{bean.setSelectedColumn}"/>
</h:outputText> 
```

Use event.getComponent() to further determine which column is selected

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T23:42:10.960

关于 PrimeFaces DataTable、widgetVar、Javascript、jQuery：

我在使用 Primefaces widgetVar 获取 PrimeFaces 3.5 DataTable 的选定行时遇到了麻烦。我在这里查看了PF源...

[https://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/datatable/datatable.js?r=10301](https://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/datatable/datatable.js?r=10301)

...并且还使用 Chrome 调试器检查了 DataTable，但没有找到 getSelectedRow 方法。我可能错过了一些有用的东西，但这是我的 hack，它有效。

`var selectedRow = Array();` `$('#idForm1\\:idDT tr.ui-state-highlight').each(function(i) { $(this).children('td').each(function(ii) { selectedRow.push($(this).text()); }); });`

数组 selectedRow 填充`<td>`了选定 DataTable 行的文本值。

# python - Flask：视图、模型和业务逻辑分离

> ID：15254100
> 
> 赞同：0
> 
> 时间：2013-03-06T17:31:44.677
> 
> 标签：python, flask

请帮助我如何以“pythonic”方式解决以下任务：

有几个模型类，它们在 SQLAlchemy 的帮助下映射到数据库。

有一个 Flask 视图，用于处理“POST”请求。

该方法的业务逻辑包含复杂的逻辑，包括：

1.  从输入 JSON 获取输入参数
2.  验证
3.  创建几个不同的模型并保存到数据库。

将此逻辑留在“视图”中是个好主意吗？或者将这个逻辑分成不同的模块或类会更好，例如通过引入业务逻辑类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:09:23.490

如果您需要对与视图分开的代码进行单元测试，那么您应该坚决地将其分离到另一个模块或类中。

由于您的业务逻辑似乎包含三个部分，因此我会说从将视图拆分为模块的三个功能开始似乎是一个不错的起点。

# mysql - 将缺失值 [日期] 显示为日期列的范围

> ID：15254109
> 
> 赞同：1
> 
> 时间：2013-03-06T17:32:17.300
> 
> 标签：mysql, sql

我的输出如下

```
ID      Date 
Null    2012-10-01
1       2012-10-02
2       2012-10-03
NULL    2012-10-04
3       2012-10-05
NULL    2012-10-06
4       2012-10-07
NULL    2012-10-08
5       2012-10-10
NULL    2012-10-11
NULL    2012-10-12
6       2012-10-13
NULL   2012-10-16 
```

因为它缺少值为 NULL 的日期。我需要将最终输出显示为

```
2012-10-01 - 2012-10-01 (1 day )
2012-10-04 - 2012-10-04(1 day )
2012-10-06 - 2012-10-06(1 day )
2012-10-08 - 2012-10-08(1 day )
2012-10-11 - 2012-10-12(2 day )
2012-10-14 - 2012-10-14(1 day ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:46:31.430

您可以使用以下查询生成日期范围：

```
select
  min(date) as start,
  max(date) as end,
  datediff(max(date), min(date)) + 1 as numDays
from
  (select @curRow := @curRow + 1 AS row_number, id, date
   from Table1 join (SELECT @curRow := 0) r where ID is null) T
group by
  datediff(date, '2012-10-01 00:00:00') - row_number; 
```

该逻辑基于对连续范围进行分组的巧妙技巧。首先，我们对子查询中的行进行过滤和编号。然后，通过将之后的天数与行号进行比较，找到组合在一起`2012-10-01`的行。如果任何行共享此值，则它们必须是连续的，否则两行之间会出现“跳转”，表达式`datediff(date, '2012-10-01 00:00:00') - row_number`将不再匹配。

样本输出（[**DEMO**](http://www.sqlfiddle.com/#!2/4841d/23)）：

```
START                           END                             NUMDAYS
October, 01 2012 00:00:00+0000  October, 01 2012 00:00:00+0000  1
October, 04 2012 00:00:00+0000  October, 04 2012 00:00:00+0000  1
October, 06 2012 00:00:00+0000  October, 06 2012 00:00:00+0000  1
October, 08 2012 00:00:00+0000  October, 08 2012 00:00:00+0000  1
October, 11 2012 00:00:00+0000  October, 12 2012 00:00:00+0000  2
October, 16 2012 00:00:00+0000  October, 16 2012 00:00:00+0000  1 
```

从那里我认为获得您正在寻找的确切输出应该是微不足道的。

# php - 如何使用 PHP 在 URL 中传递 URL（作为 GET 参数）？

> ID：15254112
> 
> 赞同：11
> 
> 时间：2013-03-06T17:32:23.507
> 
> 标签：php, apache, url, parameters, get

我在将 URL 作为 GET 参数传递时遇到了一些问题。当我尝试访问时：

[http://www.linkebuy.com.br/linkebuy/parceiro?url=http%3A%2F%2Fwww.google.com](http://www.linkebuy.com.br/linkebuy/parceiro?url=http%3A%2F%2Fwww.google.com)

我收到以下消息：

![意外的错误。](../Images/bc366da4ebf75ef5991b86c9bb7e80d2.png)

但是，如果我选择：

[http://www.linkebuy.com.br/linkebuy/parceiro?url=123](http://www.linkebuy.com.br/linkebuy/parceiro?url=123)

一切正常（它重定向到一个不存在的站点 - 123 - 当然，但它符合预期）。通过消除我可以说`url`参数有问题，但它是什么？

**OBS：**我正在使用`rawurlencode()`对 URL 进行编码。

**编辑：** *你问的代码......*

在第一个视图中，链接在哪里（[http://www.linkebuy.com.br/notebook/detalhe?id=5](http://www.linkebuy.com.br/notebook/detalhe?id=5)）：

```
<!-- url() function just completes the right URL (production or development) -->
<a href="<?php echo url('linkebuy/parceiro/?url=' . rawurlencode($l->getUrl()), true) ?>" class="<?php echo $leadClass ?> oferta" target="_blank">
    <?php echo $l->getNomeFantasia() ?>
</a> 
```

当点击链接重定向到一个动作 ( `/linkebuy/parceiro`) 时，会发生以下情况（基本上没有，只是保留在框架中）：

```
public function execute($request, $response) {
    $response->addParameter('url', rawurldecode($request->getParameter('url', ''))); //This creates $url in the view
    $response->setTemplate('site/linkebuy/lead-parceiro.php'); //Forwards to the view
} 
```

它包括视图`lead-parceiro.php`（在问题上方，我链接到此页面），其中头部包含：

```
<script type="text/javascript">
    setInterval(function(){ window.location = '<?php echo $url ?>'; },3000);
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:07:17.393

如果您无法摆脱限制，您可以像这样将 url 分成两部分传递

```
http://www.linkebuy.com.br/linkebuy/parceiro?protocol=http&url=www.google.com 
```

然后在您的代码上解析它以生成重定向的完整 url。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T18:17:00.473

`urlencode`当您将任何内容作为 URL 参数传递时，您应该使用

# excel - 从 Excel 文件中提取加速度计数据到 MATLAB

> ID：15254115
> 
> 赞同：0
> 
> 时间：2013-03-06T17:32:36.377
> 
> 标签：excel, matlab, loops, accelerometer

我尝试搜索，但未能解决我的特定问题。我应该提一下，我对 MATLAB 相当陌生，所以这可能是显而易见的，但已经从我的脑海中溜走了。

我有一个 Excel 文件，其中包含 5 个事件的加速度计记录，中间有一些空间。这些事件发生在我必须指定的时间（即行），例如 120:250、280:390、430:943 等等。

我想做的是能够循环并提取所需的数据，并将其存储在变量中，这样每个事件都会有它自己的“部分”，如果你愿意的话，每个“部分”都会包含它自己的集合带有 X、Y、Z 加速度计数据的“子部分”。

我目前的设置是手动设置，它看起来像这样：

```
X1 = xlsread('location.xlsx','sheet1','d110:d367');
X2 = xlsread('location.xlsx','sheet1','d367:d631');
X3 = xlsread('location.xlsx','sheet1','d631:d891');
X4 = xlsread('location.xlsx','sheet1','d891:d1134');
X5 = xlsread('location.xlsx','sheet1','d1134:d1361');

Y1 = xlsread('location.xlsx','sheet1','e110:e367');
Y2 = xlsread('location.xlsx','sheet1','e367:e631');
Y3 = xlsread('location.xlsx','sheet1','e631:e891');
Y4 = xlsread('location.xlsx','sheet1','E891:e1134');
Y5 = xlsread('location.xlsx','sheet1','e1134:e1361');

Z1 = xlsread('location.xlsx','sheet1','f110:f367');
Z2 = xlsread('location.xlsx','sheet1','f367:f631');
Z3 = xlsread('location.xlsx','sheet1','f631:f891');
Z4 = xlsread('location.xlsx','sheet1','f891:f1134');
Z5 = xlsread('location.xlsx','sheet1','f1134:f1361'); 
```

所以你可以看到它是多么不利。我想做的另一件事是最终使用循环与其他数据集进行互相关，但是在处理“动态”变量或你有什么时，我再次不确定循环的性质。

现在我正在考虑这样做的方式是我在向量或类似的东西中指定行块，然后循环遍历每个活动，然后遍历每个轴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:26:36.563

为每个变量运行 XLSREAD 对性能来说不是最优的。该函数使用 COM 接口（至少在 Windows 下）并且速度较慢。如果数据不是很大并且可以放入内存，最好一次将整个工作表读取到一个临时变量中，然后将值排序到变量中。

另一个建议是不要使用 X1、X2 等。如果你想在循环中使用这些变量，你会遇到问题。如果它们具有不同的长度，则创建一个元胞数组，因此它们将变为 X{1}、X{2} 等。

所以，首先阅读整个文件：

```
data = xlsread('location.xlsx','sheet1','D:F'); 
```

如果您数据所有数字，您将在`data`矩阵中获得它们。

您可以手动输入或从数据中获取的索引。

```
index = {120:250, 280:390, 430:943};
for ii = 1:numel(index)
    X{ii} = data(index{ii},1);
    Y{ii} = data(index{ii},2);
    Z{ii} = data(index{ii},3);
end 
```

# c# - 分隔符替换方法

> ID：15254120
> 
> 赞同：0
> 
> 时间：2013-03-06T17:33:00.177
> 
> 标签：c#, asp.net

我想创建一种方法来替换用于预期目标用途的分隔符（html 电子邮件、日志、数据库）。分隔符是恒定的，所以我希望能够引用一个将可识别名称映射到字符串值的对象（分号 = “;”、htmlLineBreak = “<br/>”等）。有没有比下面更好的方法来做到这一点？

```
public static class Utilities
{
    public string ReplaceDelimiter(string content
                     , Delimiter currentDelimiter, Delimiter outputDelimiter)
    {
        return content.Replace(currentDelimiter.ToString()
                              , outputDelimiter.ToString());
    }
}

public class Delimiter
{
    public const string comma = ",";
    public const string semicolon = ";";
    public const string colon = ":";
    public const string lineBreak = "\r\n";
    public const string htmlLineBreak = "<br/>";
} 
```

**编辑以下评论：**
一个用例是当我想将错误记录到不同的目标并在电子邮件中发送相同的内容（格式不同）。日志可能会转到数据库列（希望带有分号分隔符的键/值）或日志文件（希望分隔符是换行符）。电子邮件将是 HTML，因此希望将分隔符替换为 <br/>。

下面是一个日志记录方法的摘录，它有一些参数，包括实际的异常：

```
StringBuilder delimitedMessage = new StringBuilder();

delimitedMessage.Append("Date=" + DateTime.Now.ToShortDateString() + ";");
delimitedMessage.Append("Time=" + DateTime.Now.ToLongTimeString() + ";");
delimitedMessage.Append("Source=" + objException.Source.ToString().Trim() + ";");
delimitedMessage.Append("Method=" + objException.TargetSite.Name.ToString() + ";");
delimitedMessage.Append("Erring Method=" + methodName + ";");
delimitedMessage.Append("Computer=" + System.Environment.MachineName.ToString() + ";");
delimitedMessage.Append("Log Message=" + logMessage + ";");
delimitedMessage.Append("Exception Error=" + objException.Message.ToString().Trim() + ";");
delimitedMessage.Append("Severity=" + severity.ToString() + ";");
delimitedMessage.Append("Stack Trace=" + objException.StackTrace.ToString().Trim() + ";");

contentToLog = delimitedMessage.ToString();

WriteToDb(contentToLog);
WriteToLog(Utilities.ReplaceDelimiter(contentToLog, Delimiter.semicolon, Delimiter.lineBreak));
SendEmail(Utilities.ReplaceDelimiter(contentToLog, Delimiter.semicolon, Delimiter.htmlLineBreak)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:10:24.827

*   代码

    ```
    public class Delimiter {
        public static readonly Delimiter
            HtmlLineBreak=new Delimiter {
                Value="<br/>"
            },
            LineBreak=new Delimiter {
                Value="\r\n"
            },
            Semicolon=new Delimiter {
                Value=";"
            },
            Colon=new Delimiter {
                Value=":"
            },
            Comma=new Delimiter {
                Value=","
            };

        public override String ToString() {
            return Value;
        }

        public String Value {
            get;
            set;
        }
    } 
    ```

*   测试

    ```
    var t=Utilities.ReplaceDelimiter("123\r\n", Delimiter.LineBreak, Delimiter.HtmlLineBreak);
    Debug.Print("{0}", t); 
    ```

*   输出

    > 123<br/>

# xml - 从 XML 模式创建 XML（拖放）

> ID：15254123
> 
> 赞同：0
> 
> 时间：2013-03-06T17:33:04.147
> 
> 标签：xml, xsd

我有一个 XML 模式，想给用户一个拖放 GUI 来创建他们自己的 XML。可能吗？有没有类似的软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:47:01.763

不确定它是否是拖放，但 Altova Authentic 是免费的，它为业务用户提供了一个舒适的 XML 编辑器。编辑器 XML 可以绑定到（并受其约束）XML 模式。

CNET 上的下载链接：http: [//download.cnet.com/Altova-Authentic-Community-Edition/3000-7241_4-75609791.html](http://download.cnet.com/Altova-Authentic-Community-Edition/3000-7241_4-75609791.html)

# haskell - Haskell 数组太严格了？

> ID：15254130
> 
> 赞同：7
> 
> 时间：2013-03-06T17:33:20.650
> 
> 标签：haskell

我在 Haskell 中实现[Smith-Waterman算法，但出现运行时错误：](http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm)`<<loop>>`

在我的实现中，我试图使用 Haskell 的惰性特性，因此我使用不可变数组`resarray`来存储惰性和递归存根，它们也引用数组本身（在依赖链中`resarray`取决于`zippedList`哪个取决于`cellDef`哪个取决于`cell`哪个取决于上`resarray` ）。每个单元格指的是具有较小索引的单元格，因此计算应该是可行的……尽管它的行为方式并非如此。

作为概念证明，我在 ghci 中尝试了以下操作：

```
let arr = listArray (0,3) [0, arr ! 0, arr ! 1, arr ! 2 ] 
```

它奏效了。然而，由于某种未知原因，我的较长计算最终变得严格。

这是我的代码（完整版本以及测试脚本[在这里](https://dl.dropbox.com/u/5363697/hs.zip)）：

```
buildSWArray:: 
    WordSequence ->
    WordSequence ->
    SWMatrix
buildSWArray ws1 ws2 = let
        rows = arrLen ws1
        cols = arrLen ws2
        im = matToLinearIndex rows cols
        mi = linToMatIndex rows cols
        totsize = rows * cols
        ixarr = [0 .. (totsize-1)]
        cell i j 
            | i < 0 || j < 0 = 0
        cell i j  = 
            resarr !  (im i j ) 
        cellDef k | k == 0 = (None,0)
        cellDef k = 
            let
                (i,j) = mi k
                upwards = cell (i-1) j
                leftwards = cell i (j-1)
                diag = cell (i-1) (j-1) 
                -- One up if match, -5 if not match
                c = if ws1 ! i == ws2 ! j then 1 else (-5)
                hi = maximum [ 0, diag + c, upwards - 3, leftwards - 3]
            in 
                -- Dirty way of guessing which one was picked up
                case hi of 
                   hi | hi == 0  -> ( None, 0)
                   hi | hi == upwards - 3 -> ( Upwards, hi)
                   hi | hi == leftwards - 3 -> ( Leftwards, hi )
                   hi | hi == diag + c -> (Diag, hi )
        zippedList = [ cellDef k | k <- ixarr ]
        resarr =  IA.listArray (0,(totsize - 1)) [ score | (way,score) <- zippedList ]
        wayarr = IA.listArray (0,(totsize - 1)) [ way | (way,score) <- zippedList ]
    in 
        SWMatrix rows cols wayarr resarr 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T18:06:53.437

你对模式匹配很严格，

```
resarr =  IA.listArray (0,(totsize - 1)) [ score | (way,score) <- zippedList ]
wayarr = IA.listArray (0,(totsize - 1)) [ way | (way,score) <- zippedList ] 
```

这会强制在构造时读取数组元素，这是行不通的。

简单的例子：

```
module LazyArr where

import Data.Array.IArray

test :: Int -> (Array Int Int, Array Int Int)
test n =
    let zippedList = map foo [0 .. n]
        foo :: Int -> (Int,Int)
        foo i
            | i == 0 = (0,0)
            | arrOne ! (i-1) < arrTwo ! (i-1) = (2,1)
            | even i = (i,arrTwo ! (i-1))
            | otherwise = (arrOne ! (i-1),i)
        arrOne = listArray (0,n) $ map fst zippedList -- [a | (a,b) <- zippedList]
        arrTwo = listArray (0,n) $ map snd zippedList -- [b | (a,b) <- zippedList]
    in (arrOne, arrTwo) 
```

有效，但使用列表推导而不是`map fst`resp。`map snd`，它循环。

因此，使用惰性版本`map fst zippedList`并且`map snd zippedList`应该可以工作（列表推导中的惰性模式也应该如此`[way | ~(way,score) <- zippedList]`），至少我在依赖项中没有看到进一步的问题。

通过对对的模式匹配，`cellDef k`必须评估足够远以看到顶级构造函数确实是 a `(,)`。为此，必须确定所采用的分支，这需要检查早期元素的包含值。但是在创建数组时，这些还不能获得。

> 每个单元格引用索引较少的单元格，因此计算应该是可行的

然而，这并不重要。您所需要的只是没有依赖循环，并且每条链都会导致定义的基本案例。

# c# - 如何将字体大小设置为 20，以便 listBox 中的项目适合？

> ID：15254132
> 
> 赞同：1
> 
> 时间：2013-03-06T17:33:24.390
> 
> 标签：c#, winforms, listbox

这是我在列表框中绘制和着色项目的类。功能是`ColorListBox`。如果我使用 8 号字体，它看起来还可以，但如果我使用 20 号字体，则 listBox 中的项目相互重叠；他们之间没有空间。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace GatherLinks
{
    class ColorText
    {   
        public static void Texts(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        }

        public static void ColorListBox(List<string> data, DrawItemEventArgs e)
        {
            string strLeft = null;
            string strMid = "---";
            string strRight = null;

            if (data[e.Index].Contains(strMid))
            {
                int index = data[e.Index].IndexOf(strMid);
                strLeft = data[e.Index].Substring(0, index);
                strRight = data[e.Index].Substring(index + strMid.Length);
            }

            using (Font f = new Font(FontFamily.GenericSansSerif, 20, FontStyle.Regular))
            {
                float startPos;
                e.Graphics.DrawString(strLeft, f, Brushes.Red, e.Bounds.X, e.Bounds.Y);
                startPos = e.Graphics.MeasureString(strLeft, f).Width;
                e.Graphics.DrawString(strMid, f, Brushes.Black, e.Bounds.X + startPos, e.Bounds.Y);
                startPos = e.Graphics.MeasureString(strLeft + strMid, f).Width;
                e.Graphics.DrawString(strRight, f, Brushes.Green, e.Bounds.X + startPos, e.Bounds.Y);

            }
        }
    }
} 
```

这是尺寸为 20 时的外观图像：

![在此处输入图像描述](../Images/33951c876a83ec245ffab849ab6a3dd5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:40:38.923

尝试，

```
listbox1.IntegralHeight=false; // where listbox1 is your listbox's ID
listbox1.Height=some_int_number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:47:20.157

尝试自己在 ListBox 中绘制项目。

将 ListBox 的 DrawMode 属性设置为 OwnerDrawVariable。通过 Designer 或代码执行此操作：

```
myListBox.DrawMode = DrawMode.OwnerDrawVariable; 
```

为 DrawItem 和 MeasureItem 设置 ListBox 事件。通过 Designer 或代码执行此操作：

```
myListBox.DrawItem += new DrawItemEventHandler(DrawItem);
myListBox.MeasureItem += new MeasureItemEventHandler(MeasureItem); 
```

这将允许您在为 ListBox 中的每个项目触发 DrawItem 和 MeasureItem 事件时收到通知。

为您正在收听的事件添加事件处理程序。如果您通过设计器添加它们，这些将自动填充。

```
private void DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawBackground();
    e.DrawFocusRectangle();

    // You'll change the font size here. Notice the 20
    e.Graphics.DrawString(data[e.Index],new Font(FontFamily.GenericSansSerif, 20, FontStyle.Bold), new SolidBrush(color[e.Index]),e.Bounds);
}

private void MeasureItem(object sender, MeasureItemEventArgs e)
{
    // You may need to experiment with the ItemHeight here..
    e.ItemHeight = 25;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-05T18:48:06.267

我遇到了同样的问题。

对我有帮助的是增加字体大小后增加 ListBox.ItemHeight 属性。

# eclipse-rcp - 在实现 P2 时构建插件和依赖库

> ID：15254144
> 
> 赞同：1
> 
> 时间：2013-03-06T17:34:12.247
> 
> 标签：eclipse-rcp, p2

我正在开发一个 RCP 应用程序，我也在为它实现 p2 更新。

我使用[此](http://www.ralfebert.de/blog/eclipsercp/p2_updates_tutorial_36/)链接作为实施 p2 更新的指南。

例如，我的应用程序中有 3 个插件 A、B 和 C。

插件 A 代表我的应用程序的核心功能。插件 B 是另一种强制性插件。虽然插件 C 是可选的。

我创建了 3 个功能项目。其中 FeatureA 包含插件 A 和依赖库。

FeatureB 包含插件 B 和依赖库。而 FeatureC 包含插件 C 和依赖库。

这三个插件中有些库是通用的，例如 birt、nattable。我应该如何构建它们。目前我正在将它们单独添加到每个功能项目中。构建特色项目的更好方法是什么？请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:53:14.960

当您拥有您的功能所需的插件的公共子集时，您可以创建另一个“要求”功能，其中包括所需的插件，然后在现有功能中要求该功能。这使您可以更轻松地随着时间的推移更改所需的插件集。

这种方法的一个缺点是功能 B 可能不需要通用功能中的所有插件，这意味着如果您在没有功能 A 的情况下发布功能 B，它可能会发布比您预期更多的插件。

您应该考虑的另一项是您是否会更新彼此独立的功能？如果您要求所有版本的功能都相同，那么拥有新的需求功能是有意义的。但是，如果功能 A 可以升级到 2.0 版，而功能 B 仍然是 1.0，如果您有单例插件，您将遇到配置冲突。

另一个想法是，由于您正在创建一个 RCP，您可能只想在您的产品文件上运行[p2 发布](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_publisher.html)程序以生成一个阵容 IU。这会为您的 RCP 应用程序提供更具确定性的配置。如果您正在创建一个没有标准 Eclipse About 对话框的简单 RCP，那么您甚至不需要公开特性。

最后一点，您可以购买更新功能。在过去的 5 年里编写了这项技术，我可以告诉你有很多陷阱。我公司的产品[Secure Delivery Center](http://genuitec.com/sdc)可让您轻松发布软件并提供简单的更新支持。

# android - Android 持久套接字连接规则

> ID：15254146
> 
> 赞同：39
> 
> 时间：2013-03-06T17:34:17.267
> 
> 标签：android, sockets, tcp, wakelock, batterylevel

我一直在为使用持久套接字的 Android 设备的自定义推送通知解决方案做一些测试。我想分享我的发现并验证结果。

**简单描述**
应用程序运行前台服务并与服务器建立连接，并通过积极 ping（@ 10 秒间隔）维持该连接。如果检测到连接已失效，则应用程序会无限期地尝试重新连接。服务器通过双工通道发送通知。

**测试 1：**

```
Pinging is done using a timer at 10 second intervals.
Server sends notification every minute.
Applications acquires wifi and wake locks.
Duration : 8 hours
Battery loss : ~14% 
```

**测试 2：**

```
Pinging is done using AlarmManager at 10 second intervals.
Server sends notification every minute.
Application acquires only a wifilock
Duration : 8 hours
Battery loss : ~7% 
```

**假设：**传入的网络数据包会自动唤醒 CPU，因此不需要唤醒锁。使用 AlarmManager 来 ping（而不是计时器）意味着我们不需要唤醒锁。

移除那个唤醒锁似乎真的对电池有帮助。令人惊讶的是，对这两种解决方案的积极 ping 并没有像我预期的那样影响电池寿命。（我们进行了许多其他测试，包括应用程序仅持有一个 wifilock 并且什么也没做，这导致同期电池损耗约为 4% 到 5%）

由于应用程序能够成功发送所有 ping 请求并接收所有传入消息，我相信我的假设是正确的。但我很想得到任何专家的确认。

**还有一个问题：** 如果应用程序改为监听传入连接。在这种情况下，我需要保持唤醒锁，对吗？传入连接不会唤醒 CPU？我们不会走这条路，只是想确认一下。

另外，请不要推荐GCM，公司政策已经排除了。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-29T17:01:29.807

由于对这个问题有一些兴趣并且没有确认，我现在就回复。自测试完成以来已经有一段时间了，并且已经创建并严格测试了生产级解决方案。移除唤醒锁仍然对电池有帮助，并且没有发现其他问题，例如缺少 ping 请求或传入通知，因此这是我在上述假设下收到的唯一验证。

**需要注意的其他事项：**

*   在用于 ping 警报的 BroadcastReceiver 的 OnReceive 方法中，如果您不直接调用套接字（生成新线程或意图），您将需要保持唤醒锁，直到 ping 请求完成。Android 仅在 OnReceive 返回之前持有唤醒锁，之后 CPU 可能会在 ping 完成之前休眠（但很少见）。

*   如果通知很敏感，请使用[高性能 Wifi Lock 。](http://developer.android.com/reference/android/net/wifi/WifiManager.html#WIFI_MODE_FULL_HIGH_PERF)

*   还有另一个影响解决方案的设备特定问题，在[此处](https://stackoverflow.com/questions/19148765/android-reconnect-to-wi-fi-after-entering-coverage-area-while-screen-turned-of)进行了介绍。

**更新**

Android 5.1 遇到以下问题：[Android 问题](https://code.google.com/p/android/issues/detail?id=161244)

**更新 2**

需要围绕 Android 6.0 的打盹模式编写代码：[打盹模式](https://developer.android.com/training/monitoring-device-state/doze-standby.html)

# android - 保存为A4大小的图像时如何创建

> ID：15254147
> 
> 赞同：2
> 
> 时间：2013-03-06T17:34:17.407
> 
> 标签：android, pdf, canvas, bitmap

安卓。保存时如何创建图像是 A4 格式的大小。图像将是矩形。我正在使用 Canvas 在矩形上创建图像。创建pdf文件可能更简单？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T18:34:24.420

我不太*确定*你的问题，但这里是如何：

**请参阅此处以使用 android 将传入的 A4 位图缩放为不同的大小**

[http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap)

然后看：drawBitmap(Bitmap bitmap, Rect src, RectF dst, Paint paint)

**拍摄一张 A4 大小的图像（297x210mm）并将其缩放到画布**中。

您使用 canvas.context.drawImage() 方法获取全尺寸 A4 图像并将其缩小以适合您的画布。下面的代码显示了如何根据源图像自动将画布大小调整为 A4 比例。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/FAbBm/](http://jsfiddle.net/m1erickson/FAbBm/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    ctx=canvas.getContext("2d");

    var ScaleDown=.25;
    var A4=new Image();
    A4.onload=function(){
        canvas.width=A4.width*ScaleDown;
        canvas.height=A4.height*ScaleDown;
        ctx.drawImage(A4,0,0,A4.width,A4.height,0,0,canvas.width,canvas.height);
    }
    A4.src="http://4.bp.blogspot.com/-GKxNKmWgq8s/UJ8zxWLGz5I/AAAAAAAAAgs/fW-MFuw9BFM/s1600/rieger-tuning-audi-a4.jpg";

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

# android - 如何从 Android 服务发布到 Facebook？

> ID：15254153
> 
> 赞同：1
> 
> 时间：2013-03-06T17:34:31.230
> 
> 标签：android, facebook, android-service, publish

我想做一项在确定的时间在 Facebook 上发布的服务。问题是我只知道如何使用 发布`UILifeCycleHelper`，并且该类需要 Android Activity，而不是 Android 服务。是否有另一种可以在服务中使用的在 FB 上发布的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:46:38.763

FB SDK 在 Apache 条款下是开源的，您可以修改它以使用服务。

SDK 通过向 FB 服务发出 HTTP 请求来工作。您可以记录此请求并自己生成它们。

这些 URL 具有 access_token 字段。您可以从常规 FB SDK 获取 access_token 并通过添加 access_token 在服务中手动生成 HTTP 请求

# objective-c - iOS 6：逐行从文件中获取字符串到数组中

> ID：15254160
> 
> 赞同：1
> 
> 时间：2013-03-06T17:35:26.673
> 
> 标签：objective-c, arrays, string, file, import

我在网上搜索，但我能找到的一切都不起作用，因为它使用旧代码或其他东西......

1.  您会选择什么文件类型来导入单词列表？文本？（约200字）
2.  如何将所有单词从文件中取出并放入数组中？

我想将文件中的随机单词输出到标签中。

我试过了：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"filename"
                                                 ofType:@"txt"];
NSString* content = [NSString stringWithContentsOfFile:path
                                              encoding:NSUTF8StringEncoding
                                                 error:NULL];
NSArray *arr = [content componentsSeparatedByString:@"\n"];

self.biglabel.text = arr[arc4random() % arr.count]; 
```

提前致谢！迈克尔

编辑：现在工作。我没有纯 txt 文件。我重命名了一个 rtf 文件，但没有用。

XCode 4.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:55:27.910

您可以将其存储为[plist](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)，然后将其直接转换为数组。

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"plist"];
NSArray* arr = [NSArray arrayWithContentsOfFile:path]; 
```

您的 plist 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <array>
        <string>...</string>
        ...
    </array>
</plist> 
```

# node.js - -参数显示未定义-

> ID：15254162
> 
> 赞同：0
> 
> 时间：2013-03-06T17:35:35.113
> 
> 标签：node.js, geddy

我已经按照[这里](http://geddyjs.org/tutorial)的教程（没有脚手架）完成了应用程序。

我的问题是：当我单击创建的项目并显示参数列表时，为什么标题和状态未定义。在项目列表中它们是正确的，但是当我单击一个项目时，它们显示为未定义。为什么会这样？

项目列表（左：标题，右：状态）：[http ://s12.postimage.org/dt262qngd/items_list.png](http://s12.postimage.org/dt262qngd/items_list.png)

项目的参数列表：http: [//s23.postimage.org/n3p5yffqj/params.png](http://s23.postimage.org/n3p5yffqj/params.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:13:31.040

您无法连接到 socket.io 服务器。在您的 http 服务器实例上添加监听。

```
var io = socketio.listen(geddy.server); 
```

看到[这个](https://github.com/mde/geddy/issues/108)。授权失败也可能导致此问题。有关 socket.io 请求的授权，请检查[此](https://github.com/LearnBoost/socket.io/wiki/Authorizing)。Geddy 可以帮助添加本地、Facebook 和 Twitter 身份验证直接使用`geedy auth`.

如果您在创建 geddy 项目时没有使用 socket.io，请使用此选项创建项目

`geddy app -rt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:56:14.750

我已经解决了这个问题......在 show.html.ejs 文件中，而不是

```
<%= p + ': ' + params[p]; %> 
```

我必须写

```
<%= p + ': ' + arithmetic_problem_type[p]; %> 
```

这具有预期的效果。

# exception - EXC_BAD_ACCESS 记录在哪里？

> ID：15254163
> 
> 赞同：0
> 
> 时间：2013-03-06T17:35:36.007
> 
> 标签：exception, documentation, exc-bad-access, memory-access

在我自己的开发（Mac、iOS）中，最常见的调试错误之一是 EXC_BAD_ACCESS。尽管它很常见，但它的起源和确切含义仍然是神秘的。谷歌列出了许多出现的错误，但我能找到的唯一[解释](http://loufranco.com/blog/understanding-exc_bad_access)是非正式的和不完整的。

我知道这个异常（如果这是正确的术语）意味着代码试图访问它没有读取和/或写入权限的地址 - 例如，空地址或进程的地址空间。但这是基于我之前在虚拟内存和受保护内存系统方面的经验的直观解释。我从来没有在任何地方看到过 EXC_BAD_ACCESS 的文档，实际上我不确定“谁”向我发送了这个异常——CPU、Mac OS、UNIX、运行时、调试器？——所以我不知道该问谁（那个是，要查阅哪类文档）。例如，我想知道与异常一起列出的“代码”是什么意思。或者另一个例子：还有哪些其他类的类似异常（大概也标有“EXC_”

我在哪里可以从权威来源找到 EXC_BAD_ACCESS、其代码和一般语义的解释？什么*是*权威来源——实际上是谁在检测和抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T18:57:11.333

[我能找到的关于 EXC_BAD_ACCESS 的唯一官方文档是名为Finding EXC_BAD_ACCESS bug in a Cocoa project](https://developer.apple.com/library/mac/qa/qa1367/_index.html)的技术问答。它已过时，仅证实了您已经知道的内容：

> 这种问题通常是过度释放对象的结果。这可能非常令人困惑，因为失败往往发生在错误发生之后。当程序深入框架代码时，也可能发生崩溃，通常在堆栈中看不到您自己的代码。

确实，它*可能*非常令人困惑。至少苹果承认这一点。:)

# mysql - MySQL：简单查询挂起

> ID：15254166
> 
> 赞同：2
> 
> 时间：2013-03-06T17:35:45.593
> 
> 标签：mysql, vpn

在摆弄了好几天之后，我决定在 SO 上发布我的第一个帖子：

我在 VPN 中有一个 MySQL 服务器。可以使用在服务器机器上运行的客户端进行连接，一切都很好。

如果我尝试从 VPN 中的另一台计算机进行连接，则可以进行身份​​验证并进入 MySQL 提示符。但是做一个 SELECT 挂起。第一次尝试是调查进程列表，它显示进程为“睡眠”。第二次尝试是进行转储，但这在前几行之后挂起。当我停止服务器时，它说：

```
-- Connecting to 192.168.111.150...
-- MySQL dump 10.13  Distrib 5.5.28, for debian-linux-gnu (x86_64)
--
-- Host: 192.168.111.150    Database: mydb
-- ------------------------------------------------------
-- Server version       5.1.66-0+squeeze1-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

和挂起。杀死服务器会导致：

```
mysqldump: Got error: 2013: Lost connection to MySQL server during query when using LOCK TABLES 
```

这里发生了什么？接下来我能做什么？

提前谢谢，

托尔斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:11:26.887

所以，又过了几个小时，又遇到了 VNC 问题，我终于找到了解决方案：VPN 接口 ppp0 的 MTU 太高（1500）。显然，这不仅会导致 VNC 连接出现空白屏幕，还会导致 MySQL 流量出现问题。将其限制在 768 就可以了。现在它就像一个魅力:-)

# android - 获取android md5指纹时访问被拒绝

> ID：15254171
> 
> 赞同：0
> 
> 时间：2013-03-06T17:35:54.997
> 
> 标签：android, cmd, key, google-maps-android-api-2

在获取我的 Android 应用程序的 md5 指纹时，我在 cmd 和 jdk bin 提示符下输入 keystore 命令时遇到了问题：

```
keystore is an invalid command 
```

在 cmd 中我得到了这个错误，我研究并发现这意味着我的密钥库路径不正确。所以我仔细检查了我的路径，它是正确的，并找到了一个教程解释通过 jdk bin cmd 提示输入相同的命令：

```
Access denied 
```

密钥存储地址是：

```
C:\Users\Brian\.android\debug.keystore 
```

我正在使用的命令如下：

```
keytool -list -alias androiddebugkey -keystore C:\Users\Brian\.android\debug.keystore   -storepass android -keypass android 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:43:42.477

你想得到什么。也许这个答案可以帮助 [https://stackoverflow.com/a/14042038/928591](https://stackoverflow.com/a/14042038/928591)

我知道您的问题是什么，您正在尝试获取**调试密钥**，但您指定了路径。但尝试只复制粘贴此命令而不修改它。

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

它为我获得了我的 facebook 应用程序的调试密钥。我可能错了，但我认为这应该有效

**编辑** 做了一些挖掘，keytool 随 java jdk 一起提供。[就像在这里](https://stackoverflow.com/questions/2997348/cant-find-the-android-keytool)回答的 commonsware 一样 ，您是否安装了 JDK 或 SDK 是我的下一个问题。

**编辑（另一个）** 在评论中回答你的问题，看看这里。 [http://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

**结局更新** 这是此特定答案的最后更新。浏览到 JDK 文件夹并从该目录执行命令。

亲切的问候

# forms - 使用文本字段中的文本自动更新文本区域

> ID：15254172
> 
> 赞同：0
> 
> 时间：2013-03-06T17:36:00.543
> 
> 标签：forms, text, textarea, field

我可以使用自定义文本和文本字段中的文本更新 textarea 字段吗？例如：我有一个带有文本字段和 textarea 的表单。当我在文本字段中输入“Samsung”时，textarea 字段将显示：我想要一部三星手机。对于 LG 会显示我想要一部 LG 手机。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:48:33.973

使用 javascript 的一种非常简单的方法：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function update(elem) { 
                document.getElementById('textareaDescription').value = " I want a " + elem.value + " phone";  
            }
        </script>
    </head>
    <body>
        Phone : <input type="text" onchange="update(this)">
        <br>
        Description : <textarea name="" id="textareaDescription" cols="30" rows="10"></textarea>
    </body>
</html> 
```

使用 onchange 事件，一旦您失去焦点（并更改！）输入，文本区域将被更新。

# ios - 具有适应不同屏幕分辨率的视图的 MVC 模式

> ID：15254178
> 
> 赞同：2
> 
> 时间：2013-03-06T17:36:37.117
> 
> 标签：ios, oop, model-view-controller, design-patterns, architecture

我开始考虑如何解决为所有具有不同屏幕（分辨率、比率、视网膜等）的 iOS 设备开发应用程序的问题。我正在使用 Adob​​e Air (AS3)，但这并不重要，因为我处于概念阶段并且我担心要使用的模式。

如果我只是为 iPad 开发，那么问题将很简单，只需将尺寸和尺寸加倍以适应视网膜和非视网膜设备。但我需要考虑到 iPhone、iPod 以及最终的 Android 以及无数的屏幕。

到目前为止，我看到了那些可能的选择。如果这些选项已经有一些术语，我很抱歉，但我只会说我自己的话。

*   具有某种流动布局的智能视图，以及适应视图分配给它们的空间的智能组件，以及适应字体大小和图像大小的屏幕 dpi。例如：视图显示“底部有一个具有此宽度/高度的按钮”。该按钮已经知道文本必须是什么字体大小，具体取决于屏幕 dpi。

*   使用不同 UI 视图类的参数进行分解。所以我有一个用于 iPad 的视图类，另一个用于 iPhone 等等，并且会有一个类会根据设备分解视图的实例化。这些类中的每一个都可以手工定制为彼此完全不同，但底层模型和（希望）控制器在每台设备上都是相同的。

*   一种中间方法：一个用于平板电脑的 UI View 类，另一个用于手机，每个都具有某种流动能力来微调元素（按钮、文本、图像等）的位置和大小。

*   根据设备为 View 提供一些参数的外部配置文件。那将是某种自定义 CSS。

我敢肯定，我不是第一个在路上发现这块石头的人。那么这个问题通常是如何解决的呢？这些场景是否有一些固定的模式？我应该阅读一些参考资料（书籍，文章）吗？

我一直无法找到对此的深入答案。如果它已经被询问/回答，请不要投反对票。在评论中发布链接，我将删除此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:03:34.107

您正在描述响应式网页设计。有多种方法和方法可以使您的站点响应（即能够在多种屏幕尺寸上运行，而无需修改或重新配置代码库或依赖用户代理来检测浏览器信息）。

从这里开始：http: [//msdn.microsoft.com/en-us/magazine/hh653584.aspx](http://msdn.microsoft.com/en-us/magazine/hh653584.aspx)

还可以考虑各种可以简化您的生活的开源 CSS 框架。例如，[Bootstrap](http://twitter.github.com/bootstrap/)和[HTML5 Boilerplate](http://html5boilerplate.com/)。这两者都相当独立于您的开发平台，并且应该与 MVC 一起工作。

# ios - 在 iOS 中将 NSString 转换为 unichar

> ID：15254179
> 
> 赞同：9
> 
> 时间：2013-03-06T17:36:40.597
> 
> 标签：ios, objective-c, nsstring, unichar

我在 stackoverflow 中看到了将 unichar 转换为 NSString 的问题，但现在我想做相反的事情。

我该怎么做？

需要一些指导..谢谢

例如，我有一个字符串数组：`[@"o",@"p",@"q"];`

这些是里面的字符串。如何将其转换回 unichar？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T17:39:44.673

只要第一个字符实际上不是两个组合字符（换句话说，只要该字符的 Unicode 值不大于 \UFFFF），以下将起作用：

```
unichar ch = [someString characterAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:45:55.737

您可以将其转换为缓冲区`NSData`：

```
if ([string canBeConvertedToEncoding:NSUnicodeStringEncoding]) {
    NSData * data = [string dataUsingEncoding:NSUnicodeStringEncoding];
    const unichar* const ptr = (const unichar*)data.bytes;
    ...
} 
```

# perl - 如何调用带有标志的脚本并获取它的全局变量？

> ID：15254185
> 
> 赞同：3
> 
> 时间：2013-03-06T17:37:00.910
> 
> 标签：perl

我正在寻找类似这样`require "peacefullscript.pl -whiteflag";`的问题，这个问题不起作用。我想要的是调用带有一些标志的脚本并将它创建的全局变量放入当前脚本中。

我怎样才能**轻松**做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:54:52.593

```
{
    local @ARGV = ("-whiteflag");
    do "peacefullscript.pl";
} 
```

该`local`关键字创建一个临时副本`@ARGV`，不会覆盖您的原始命令行参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T17:39:04.177

```
@ARGV = ("-whiteflag");
require "peacefullscript.pl"; 
```

# jquery - 使用 URL 的 jQuery 自动完成

> ID：15254190
> 
> 赞同：1
> 
> 时间：2013-03-06T17:37:19.660
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete, scriptaculous

我一直在一个当前使用 Prototype+Scriptaculous 的[Ajax.Autocomplete](http://madrobby.github.com/scriptaculous/ajax-autocompleter/)的网站上工作。目前它工作得很好，但我需要将它转换为 jQuery。

我知道**jQueryUI**有一个[Autocomplete](http://api.jqueryui.com/autocomplete/)，但我看不出是否有一种方法可以使用现有的外部 URL 而无需更改它。

使用 Scriptaculous 的 Ajax.Autocomplete 非常简单：

```
new Ajax.Autocompleter('inputID', 'destinationID', 'search.php', {
    paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    }); 
```

这几乎是不言自明的：*inputID*是 的 ID `<input>`，*destinationID*是您希望在其中显示结果的元素。*search.php*是从您的数据库返回结果的页面——包括您希望在列表中显示的 HTML .

其余的选项应该很明显:)

`search.php?q=search-query`当前返回格式良好的 HTML，如下所示：

```
<ul>
    <li id="ID">Result</li>
    <li id="ID">Result</li>
    <li id="ID">Result</li>
</ul> 
```

如果我可以将它与 jQueryUI 自动完成一起使用，那就太好了，但我不知道它是否可能（如果可以，该怎么做）。

我浏览了一堆关于使用 jQueryUI 的自动完成的教程，但它们似乎都专注于使用 Javascript 数组（对我来说没用，因为我在数据库中有数千条记录要搜索）或 JSON（其中我希望尽可能避免）。

可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:42:40.853

**编辑：手动 jQuery**

请尝试这段代码，我没有测试它，所以可能有一两个错误。这也假设 /search.php 在同一个域上。根据需要编辑设置中的值

> $（函数（）{
> 
> ```
>  var debounce;
> 
>    var settings = {
>        input: '#inputID',
>        dest: '#destID',
>        url: '/search.php?q=',
>        minLength: 2,
>        debounceDelay: 200
>    }
> 
>    $(settings.input).on('keyup', function () {
>        var q = this.value;
> 
>        if (debounce) clearTimeout(debounce);
> 
>        if (q && q.length >= settings.minLength)
>        {
>            debounce = setTimeout(function () {doSearch(q);},
>                                  settings.debounceDelay);
>        }
> 
>    });
> 
>    $(settings.dest).on("click", "li", function (e) {
>        $(settings.input).val($(this).text());
>        $(settings.dest).empty();
>    })
> 
>    function doSearch(query) {
>        $(settings.dest).load(settings.url + query);
>    }; 
> ```
> 
> });

* * *

**JSON 方法**

看看最近发布的 twitter 的 typeahead。（不要与 bootstrap 的 typeahead 混淆，这是完全独立的，只需要 jquery）

[http://twitter.github.com/typeahead.js/](http://twitter.github.com/typeahead.js/)

它的行为就像谷歌的搜索框

*   自动完成
*   自动建议
*   键盘支持
*   多个来源，本地和远程
*   结果缓存（localStorage）和请求限制
*   模板支持（需要兼容[mustache](http://mustache.github.com/)的模板引擎，例如[Hogan](http://twitter.github.com/hogan.js/)）

如果您需要有关如何使用它的任何说明，请查看下面的[示例](http://twitter.github.com/typeahead.js/examples/)或评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:34:50.857

好的，既然你不想输出 JSON，试试这个：

```
var aclist = [];
$('input#myauto').autocomplete({
  source: aclist,
  change: function( event, ui ) {
              $.ajax({
                  url: 'search.php',
                  data: {
                      'inputID': inputID,
                      'destinationID': destinationID
                  },
                  dataType: 'html',
                  success: function (html) {
                      aclist = [];
                      $('li', html).each(function () {
                          aclist.push({
                              value: this.id,
                              label: $(this).text()
                          });
                      });
                  },
                  error: function (jqXHR, textStatus, errorThrown) {
                      aclist = [];
                  }
              });
  }
}); 
```

我没有调试它，但本质上是将ajax调用链接到onChange事件并将该调用返回的html转换为正确格式的数组的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:40:17.663

您可以使用 Jquery 自动完成功能并使用函数作为源，然后在该函数上进行 ajax 调用并将脚本中的 html 解析为 javascript 数组

查看自动完成源属性的 jquery 文档[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)

# python - Python - 如何在每 3 个字符上添加空格？

> ID：15254195
> 
> 赞同：7
> 
> 时间：2013-03-06T17:37:34.013
> 
> 标签：python

我需要在 python 字符串的每 3 个字符上添加一个空格，但没有太多关于如何操作的线索。

字符串：

```
345674655 
```

我需要的输出：

```
345 674 655 
```

关于如何实现这一目标的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T17:39:12.350

您只需要一种方法以 3 块为单位迭代您的字符串。

```
>>> a = '345674655'
>>> [a[i:i+3] for i in range(0, len(a), 3)]
['345', '674', '655'] 
```

然后`' '.join`结果。

```
>>> ' '.join([a[i:i+3] for i in range(0, len(a), 3)])
'345 674 655' 
```

注意：

```
>>> [''.join(x) for x in zip(*[iter(a)]*3)]
['345', '674', '655'] 
```

也适用于对字符串进行分区。这将适用于任意可迭代对象（不仅仅是字符串），但会截断长度不能被 3 整除的字符串。要恢复原始的行为，您可以使用`itertools.izip_longest`（`itertools.zip_longest`在 py3k 中）：

```
>>> import itertools
>>> [''.join(x) for x in itertools.izip_longest(*[iter(a)]*3, fillvalue=' ')]
['345', '674', '655'] 
```

当然，您需要为后一个答案中改进的概括性支付一点阅读费用......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-31T20:02:22.323

基于[@mgilson](https://stackoverflow.com/users/748858/mgilson)答案的最佳功能

```
def litering_by_three(a):
    return ' '.join([a[i:i + 3] for i in range(0, len(a), 3)])
#  replace (↑) with you character like "," 
```

输出示例：

```
>>> x="500000"
>>> print(litering_by_three(x))
'500 000'
>>> 
```

或者`,`例如：

```
>>> def litering_by_three(a):
>>>         return ','.join([a[i:i + 3] for i in range(0, len(a), 3)])
>>>     #  replace (↑) with you character like ","
>>> print(litering_by_three(x))
'500,000'
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-19T16:14:48.800

单线解决方案将是

```
" ".join(splitAt(x,3)) 
```

然而，Python 缺少一个`splitAt()`函数，所以定义自己一个

```
def splitAt(w,n):
    for i in range(0,len(w),n):
        yield w[i:i+n] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-19T16:35:53.813

如何将字符串从单位开始反转 3，然后再次反转。目标是获得“12 345”。

```
n="12345"    
" ".join([n[::-1][i:i+3] for i in range(0, len(n), 3)])[::-1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-28T04:34:10.853

用 '-' 连接每 3 个字符的第一个、第二个和第三个字符：

```
' '.join(a+b+c for a,b,c in zip(x[::3], x[1::3], x[2::3])) 
```

确保字符串长度可被 3 整除

# java - 计算方法复杂度的原理是什么？

> ID：15254202
> 
> 赞同：2
> 
> 时间：2013-03-06T17:37:42.873
> 
> 标签：java, sonarqube, coding-style, complexity-theory, cyclomatic-complexity

在[Sonar Metrics 复杂性页面](http://docs.codehaus.org/display/SONAR/Metrics+-+Complexity)中，以下方法的复杂度为 5。

```
public void process(Car myCar){          <- +1
        if(myCar.isNotMine()){               <- +1
             return;                         <- +1
        }
        car.paint("red");
        car.changeWheel();
        while(car.hasGazol() && car.getDriver().isNotStressed()){   <- +2
             car.drive();
        }
        return;
    } 
```

这是该工具计算复杂性的方式：

> 增加复杂性的关键字：if、for、while、case、catch、throw、return（这不是方法的最后一条语句）、&&、||、？

为什么*case*语句、*if*块和*while*块会增加方法的复杂性？这种方法复杂度的度量计算背后的直觉是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:41:42.597

这是因为它们有条件增加[了确保代码正确所需的测试数量](http://en.wikipedia.org/wiki/Code_coverage#Basic_coverage_criteria)。

也可能`if`s 的复杂性低于循环 ( `while`, `for`)。还阅读了与此相关的[圈复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)。

[阅读这篇博](http://code-slim-jim.blogspot.ro/2012/07/why-inst-your-code-100-bug-free-did-you.html)文，它描述了无法测试所有内容的实际情况以及测试所有内容所需的测试数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:42:12.600

也许它是基于`Cyclomatic Complexity`McCabe 的（至少看起来像）。
该指标广泛用于软件工程领域。
看看这个：[http ://en.wikipedia.org/wiki/Cyclomatic_complexity](http://en.wikipedia.org/wiki/Cyclomatic_complexity)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:47:36.153

Somar 测量[*圈复杂度*](http://en.wikipedia.org/wiki/Cyclomatic_complexity)，它表示通过源代码的线性独立路径的数量。

The key to answering your question comes from a [research paper of Thomas McCabe, published in December of 1976](http://www.literateprogramming.com/mccabe.pdf):

> It can be shown that the cyclomatic complexity of any structured program with only one entrance point and one exit point is equal to the number of decision points (i.e., 'if' statements or conditional loops) contained in that program plus one.

This is precisely what Sonar does: it finds the decision points, which come from loops, conditional statements, and multipart boolean expressions, and counts their number.

# php - 在 x 个字符后截断字符串

> ID：15254204
> 
> 赞同：0
> 
> 时间：2013-03-06T17:37:51.213
> 
> 标签：php, string

我有一个长度和字符未知的字符串。

我希望能够在 x 个字符后截断字符串。

例如来自：

```
$string = "Hello# m#y name # is Ala#n Colem#n"
$character = "#"
$x = 4 
```

我想返回：

```
"Hello# m#y name # is Ala#" 
```

希望我不会在这里把事情复杂化！

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:42:33.583

```
function posncut( $input, $delim, $x ) {
    $p = 0;
    for( $i = 0; $i < $x; ++ $i ) {
        $p = strpos( $input, $delim, $p );
        if( $p === false ) {
            return "";
        }
        ++ $p;
    }
    return substr( $input, 0, $p );
}
echo posncut( $string, $character, $x ); 
```

它依次找到每个分隔符 ( `strpos`) 并在您要查找的分隔符之后停止。如果它首先用完文本（`strpos`返回`false`），它会给出一个空字符串。

更新：这是我制作的一个基准，将这种方法与爆炸进行了比较：http: [//codepad.org/rxTt79PC](http://codepad.org/rxTt79PC)。似乎`explode`（当与`array_pop`而不是一起使用时`array_slice`）更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T17:43:18.913

我建议`explode`-ing 字符串 on `#`，然后获取该数组中的第一个 4 个元素。

```
$string = "Hello# m#y name # is Ala#n Colem#n";
$character = "#";
$x = 4;

$split = explode($character, $string);
$split = array_slice($split, 0, $x);

$newString = implode($character, $split).'#'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:44:25.177

这些方面的东西：

```
$str_length =  strlen($string)
$character = "#"
$target_count = 4

$count = 0;
for ($i = 0 ; $i<$str_length ; $i++){
    if ($string[$i] == $character) {
        $count++
        if($count == $target_count) break;
    }

}

$result = sub_str($string,0,$i) 
```

# c++ - 在 aodv 中选择能量而不是 hp 计数

> ID：15254205
> 
> 赞同：0
> 
> 时间：2013-03-06T17:37:54.570
> 
> 标签：c++, ns2

我正在修改 NS2 的 AODV 协议以更改路由选择的标准。我已将条件更改为 aodv 代码中的能量残留，用于接收数据包和回复。谁能解释“前体”相关代码的目的。我也应该修改那部分吗？有没有其他类似我正在做的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:10:26.673

如果你想根据能量水平选择路径意味着首先你必须在路由协议中添加新的字段能量。没有该字段节点如何检查其与相邻节点的能量水平。

首先尝试在 aodv/packet.h 中添加能量场

# css - 响应式 CSS：我可以强制呈现 alt 文本吗？

> ID：15254207
> 
> 赞同：7
> 
> 时间：2013-03-06T17:38:14.567
> 
> 标签：css, responsive-design

我正在为我正在构建的网站整理一些响应式 CSS，我很好奇是否可以使用 CSS 强制图像呈现为 alt 文本而不是图像。我们正在展示共同赞助商的标志，但由于它们的大小不一，很难自信地将它们融入响应式设计中。出于这个原因，我们希望将公司名称存储为替代文本并进行渲染。当然，我们可以将名称放在单独的元素中并使用 CSS 切换可见性，但使用 alt 文本似乎更干。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T17:48:27.093

您可以将其存储在数据属性而不是替代文本中，然后执行[**以下**](http://jsfiddle.net/bevacqua/usyKb/2/)操作：

```
<span class='responsive' data-alt='foo'>
    <img src='http://www.ponyfoo.com/img/thumbnail.png' alt='' />
</span>

@media only screen and (max-width: 300px) {
    .responsive:before {
        content: attr(data-alt);
    }
    .responsive img {
        display: none;
    }
} 
```

您不能仅使用 CSS 和`img`标签来执行此操作的原因是`img`标签是因为它们被[**替换为元素**](https://developer.mozilla.org/en-US/docs/CSS/Replaced_element)，这意味着 pseudo 不适用于它们，因此 using`:before`不适用于它们。

考虑到这一点[**的另一种方法如下**](http://jsfiddle.net/bevacqua/usyKb/1/)：

```
<span class='responsive'>foo</span>

.responsive {
    background-image: url('http://www.ponyfoo.com/img/thumbnail.png');
    text-indent: -9999em;
    overflow: hidden;
    width: 180px;
    height: 180px;
    display: block;
}

@media only screen and (max-width: 300px) {
    .responsive {
        background-image: none;
        text-indent: initial;
        overflow: initial;
    }
} 
```

如果你问我，我更喜欢第二种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:20:50.197

一起去：

```
<div class="cobranding">
    <span>Brought to you by</span>
    <span class="sponsor">Joe Shmoe Inc.</span>
    <img src="img/graphics/joe_shmoe_logo.jpg">
</div> 
```

使用 CSS 根据响应断点切换 img 或“赞助商”的可见性。

Nico 的两种方法看起来都不错。唯一的问题是这些共同赞助商徽标将通过 CMS 添加，因此我想避开任何涉及个案 CSS（:before 或 background-image）的解决方案。为了时间的缘故，我继续使用上面的两个元素策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T13:17:16.097

(answered for any others looking for a solution)

***Important aside:*** **Remember the purpose of alt**: to display meaningful ALTERNATIVE information (if the image doesn't load). - so any implementation should not break that... (bad for accessibility & SEO).

That said... If the image doesn't load, the **alt** will be displayed. So (untested) but you could try messing up the src attribute by javascript... this should cause the browser to display the alt since the image wont load. - you might find this approach along with lazyload useful.

Also to note: a broken img doesn't behave like an image, so you can apply a img:before css rule (and use **content: attr(alt)** )

# c# - 仅在父元素可见时启用RequiredFieldValidator？

> ID：15254210
> 
> 赞同：0
> 
> 时间：2013-03-06T17:38:36.767
> 
> 标签：c#, asp.net, css, validation

我有一个带有几个面板的 asp.net 网络表单，每个面板里面都有几个文本框。我目前正在使用 jQuery 隐藏或显示面板，具体取决于选择了 DropDownList 中的哪个项目。

我遇到了一个问题，即必填字段验证器仍在触发，即使它附加到的元素没有显示，因为它的父面板具有`display: none`.

当它附加到的元素由于 CSS 而没有显示时，有什么方法可以禁用RequiredFieldValidator？

我知道如果在服务器端设置 Visible=false 元素根本不会呈现，但出于用户体验的原因，我更愿意将显示/隐藏逻辑保留在客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:48:29.373

我同意自定义验证器是最好的，但如果您确实需要在客户端执行此操作，您可以使用 ValidatorEnable 函数。

```
ValidatorEnable(document.getElementById("<%= RequiredFieldValidator.ClientID %>"), false); 
```

（请注意，我自己从未真正尝试过，但我听说它成功地用于禁用客户端的验证器。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:49:28.933

正如[该线程所说](https://stackoverflow.com/questions/5710342/how-not-to-trigger-requiredfieldvalidator-on-hidden-field-textbox)，您可以使用该功能。所以修改你的方法如下

```
 function cbSearchOption_SelectedIndexChanged(sender, args) {
    var x = document.getElementById('cbSearchOption').value
    if (x == 'Date')
    {
        ValidatorEnable($get(‘&lt;%=DateValidator1.ClientID %>’), true);
        document.getElementById('test').style.visibility = 'visible';
    }
    else
    {
        ValidatorEnable($get(‘&lt;%=DateValidator1.ClientID %>’), false);
        document.getElementById('test').style.visibility = 'hidden';
    }
} 
```

# android - 共享内容提供者

> ID：15254211
> 
> 赞同：9
> 
> 时间：2013-03-06T17:38:37.263
> 
> 标签：android, android-contentprovider

我的应用程序有两个版本，免费版和专业版，应用程序数据的内容提供程序需要在两者之间共享。

设计时应牢记以下几点

*   任何版本创建的数据都应该立即在另一个版本中可见
*   据我了解，专业版和免费版都不能[在清单文件中声明相同的内容提供者](https://stackoverflow.com/questions/3306639/multiple-apps-use-same-content-provider)
*   记住最后一点，我需要为免费版和专业版创建单独的提供程序

可能的解决方案：

*   创建两个内容提供者，一个由免费版创建，另一个由专业版创建
*   首次启动专业版时，如果免费版中有数据，请将其复制到专业版
*   每当在免费版或专业版中写入任何数据时，我都应该检查是否存在其他版本的 Content Provider，如果存在则写入两个 Content Provider
*   将 android:protectionLevel 属性设置为“signature”，这样两个版本都可以访问两个 Content Providers

请让我知道这是否有意义并遵循有关共享内容提供者的最佳实践。请分享任何其他方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T06:39:15.827

我在市场上有 3 个应用程序，每个应用程序都有免费和付费版本。对于给定的应用程序，我在免费和付费项目都引用的 Android 共享库项目中有 100% 的代码。这些免费和付费的 Android 项目只是虚拟项目，仅对其 AndroidManifest.xml 有用。

如果您希望启用/禁用某些功能，您始终可以根据包名称在共享库中添加相关检查。

在您的代码中（在共享库中），您可以区分免费或付费，并根据调用包启用/禁用功能。

```
if ("com.example.paid".equals(context.getPackageName()) {
    //enable pro version features
} 
```

你不能做类似的事情吗？这将为您节省大量维护开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T12:11:15.420

所以这就是我最终做的事情：

*   我**为每个版本创建了两个单独的内容提供者**（每个都有一个单独的权限）并唯一声明它们
*   将他们的**"android:exported"**设置为**"true"**以启用跨应用程序共享内容提供者数据
*   **为每个内容提供者定义了一个自定义权限**（具有读+写访问权限）以限制对数据的访问
*   对于每个权限定义，我将**“android:protectionLevel”**属性定义为**“signature”**，以便我的应用程序可以隐式且安全地相互通信
*   在任何给定版本中，然后我**使用 uses-permission android:name="MY_CUSTOM_PERMISSION 元素****明确要求访问**其他版本中的内容提供程序

 **结果：

*   两个版本现在都可以安全隐式地访问彼此的内容提供者
*   当付费版本启动时，它会默默地将免费版本的所有数据复制到付费版本，以备无缝使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:30:31.193

只是我的想法。

是否真的需要在设备中同时安装免费和付费版本？如果没有，您只需在用户首次启动付费版本时提供从免费到付费的复制功能。然后用户可以删除免费版本并专门使用付费版本。

方法很好。但我发现它有一个问题。

当内容提供者随时间变化时会发生什么？假设您决定使用更多字段来增强内容提供程序。然后用户应该升级两个版本，以便正确写入数据。

随着时间的推移，这两个内容提供商会保持不变吗？如果您决定付费版本将具有更多功能，从而捕获更多数据怎么办。**

# java - 适用于 Android 的 SAML 客户端？

> ID：15254216
> 
> 赞同：2
> 
> 时间：2013-03-06T17:38:53.997
> 
> 标签：java, android, saml, shibboleth, opensaml

我正在做一个项目，该项目需要从一些受保护的网页中解析一些数据。为了访问这些页面，我必须克服 SAML 身份验证表单 (Shibboleth)。有没有人能够在 Android (Java) 中实现这个标准？我已经阅读了这个帖子：[Android 的 SAML 客户端实现？](https://stackoverflow.com/questions/11929158/saml-client-implementation-for-android) 但这并没有给我一个好的解决方案。实际上，我需要*获取一些受保护网页的数据*才能解析它，而不是让用户看到这些页面的内容。因此，通过 WebView 登录并不是我真正需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:54:13.637

我认为 OpenSAML 是处理 SAML 部分的最佳选择，然后可能是 HttpClient 处理通常在浏览器中执行的操作。但是实现这一点将有相当多的工作。SAML 没有什么轻量级的。

OpenSAML 只是一个帮助处理 SAML 消息的库，因此它可能适用于像这样的非常定制的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:46:28.883

经过一番研究，我最终自己构建了它。我仔细跟踪了每个重定向，并记录了创建、编辑或删除的每个 cookie（Opera，其内置选项允许关闭重定向是关键）。结果是一个流程，然后我将其复制到一个*临时*包中：SetUpConnection 类，其任务是连接到主机并跟踪 cookie。SAML 类，它复制了 SAML 流，最后是 Main 类，我可以从中收集有用的信息。

希望能帮助到你。

# knockout.js - 发送子 ViewModel 而不是 foreach 绑定表达式中的子 $data？

> ID：15254217
> 
> 赞同：0
> 
> 时间：2013-03-06T17:38:56.040
> 
> 标签：knockout.js

如何将子 ViewModel 发送到 foreach 绑定表达式中的 $parent 函数？

我可以做这个：

```
 <button class="radius button small" data-bind="click:function() { $parent.openDialogueEdit($data)}">Edit</button> 
```

但这没有用，因为在 openDialogueEdit 中，我将 $data 绑定到编辑对话使用的可观察对象，并且 $data 具有评估的可观察对象，而不是可观察对象本身，我需要将 foreach 渲染中的数据绑定到编辑对话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:07:17.450

默认情况下，发送到绑定函数的项目是当前上下文，即`foreach`绑定中的子视图模型。

```
data-bind="click: $parent.selectedItem" 
```

这就是你所需要的。[你可以在这个 fiddle](http://jsfiddle.net/tyrsius/wAZxH/)中看看这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:45:21.413

要解决原型范围问题，您可以向构造函数添加绑定

```
var ViewModel = function() {
    this.removeSeat = this.removeSeat.bind(this);
};

ViewModel.prototype.removeSeat = function(seat) {
    this.seats.remove(seat);
}; 
```

`this`这将强制函数在标准`click`绑定中正确关联。它有点尴尬，但我认为它是最简单的解决方案。

# windows-phone-7 - 在用户控制页面之间导航

> ID：15254219
> 
> 赞同：1
> 
> 时间：2013-03-06T17:38:57.583
> 
> 标签：windows-phone-7, app.xaml

我喜欢在页面之间导航，同时保持相同的原始页面

MainPage.xaml 中的代码是

```
xmlns:views="clr-namespace:MainPage.View"

<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
      <views:Page1 x:Name="InterfacePage"/>
</Grid> 
```

用户控制页面中的第 1 页，其中包含一个按钮。当我按下该按钮时，我想将 Page1 更改为 Page2 另一个用户控制页面而不更改 MainPage

我一直在搜索，但在这方面找不到任何东西顺便说一句我正在使用 windows Phone 8 sdk 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:19:15.810

在 Page1 的 ButtonClick 事件中，试试这个

```
Button_Click()
{
    var contentPanel = (this.Parent as Grid);
    Page2 page2 = new Page2() { Name = "AnotherPage" };

    contentPanel.Children.Remove(this);
    contentPanel.Children.Add(page2);
} 
```

# mysql - 插入或删除行时触发运行 MySQL 查询

> ID：15254221
> 
> 赞同：-1
> 
> 时间：2013-03-06T17:39:03.040
> 
> 标签：mysql, triggers

我想在每次添加或删除新行时运行此查询

```
UPDATE brandnames updated
JOIN (select bname, count(*) as cnt 
from brandnames 
group by bname) aggregate 
ON updated.bname= aggregate.bname
set `count`= aggregate.cnt 
```

请帮助我为此触发条目。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:44:35.643

我会说[你不能](http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.5/en/stored-program-restrictions.html)：

> 存储的函数或触发器不能修改已被调用函数或触发器的语句使用（用于读取或写入）的表。

# jquery - .On 事件在 Jquery 上的 div

> ID：15254226
> 
> 赞同：0
> 
> 时间：2013-03-06T17:39:12.440
> 
> 标签：jquery, jquery-mobile

```
<div id="multiaccount"></div> 
```

如何将方法绑定到上述 div id，以便在存在上述 div id 的页面上调用该方法？

我尝试使用以下代码，但没有成功：

```
$(document).on('event', '#multiaccount', function() {
    somedivOnPage('false', ''); 
}); 
```

我正在使用`jquery-190.js`和`jqmobile-130.js`。

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:42:48.687

您在页面中引用的功能是否有效或已定义？

当我在 Fiddle 上测试您的代码时，它起作用了：

```
<div id="multiaccount">Hello</div> 
```

JS：

```
$(document).on('click', '#multiaccount', function() {
    alert("click() event fired");
}); 
```

[http://jsfiddle.net/teddyrised/ZKMhD/](http://jsfiddle.net/teddyrised/ZKMhD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:46:31.707

当页面完成加载时触发jQuery**就绪方法。**此时，如果页面上存在您的 div，length 属性将返回 1。

```
$(document).ready(function(){

    if($('#multiaccount').length > 0)somedivOnPage('true', '');
    else somedivOnPage('false', '');

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:51:54.387

不知道你是否想要这样的东西

```
 $('#multiaccount').bind('customevent', function () {
 if ($('#multiaccount').is('visible')) {
// code goes here
 }
 })
 $('#multiaccount').trigger('customevent'); 
```

# javascript - jQuery：如何从内部加载回调修改加载的内容

> ID：15254228
> 
> 赞同：3
> 
> 时间：2013-03-06T17:39:24.007
> 
> 标签：javascript, jquery, html, callback, load

我正在动态创建许多 div 元素（行）。每行都将具有相同的基本格式，只有文本更改。由于行结构很复杂，我尝试从静态 html 文件加载“基本”div，然后在加载后，使用每行的参数调整一些属性。（类似于 Android 的 xml 定义的适配器）。我正在使用 jQuery 和 jQuery Mobile。

我多次调用此函数（每行一次）。在每次调用中，我将一个`params`对象作为参数传递，其中包含该行的数据，以及一个新创建的 div 元素（使用 创建`document.createElement("div")`）：

```
 function loadRow(params, div){  
        var $div = $(div);        

        $div.load("some_page.html [data-custom-role=row]", function(){
            //FIXME Throws error: object is not a function!!
            var nameElement = $div("[data-custom-role=name]");
            nameElement.text(params.name);
        });
    } 
```

此代码在 FIXME 注释下方的第一行中引发此错误：

```
Uncaught type Error: object is not a function 
```

源 html 文件 (some_page.html) 的（简化）内容：

```
 <!DOCTYPE html>
    <html>
        <head>
            <meta charset="ISO-8859-1"> 
        </head>
        <body>
            <div data-custom-role="row">
                <p data-custom-role="name"></p>
            </div>
        </body>
    </html> 
```

我要做的是选择新加载的 div 中的“p”元素，并设置文本内容。我不能使用 id 来识别“p”元素，因为我稍后会将所有行注入页面，并且不能存在 2 个具有相同 id 的元素。这就是为什么我需要使用一个属性作为选择器，但是由于同时加载了许多行，我需要确保我只调整我正在加载的 div 内的“p”元素，而不是其他行分区。我认为该变量`$div`将在回调中可用，因为创建了一个闭包。

我究竟做错了什么？如何在回调中查询和修改加载的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:46:34.313

您正在引用包含函数但不是函数的 DOM 元素。

你不能使用`$div()`，你需要`.find()`在你的情况下使用对象的函数来找到具有属性的元素`data-custom-role=name`

尝试 ：

```
 function loadRow(params, div){  
        var $div = $(div);        

        $div.load("some_page.html [data-custom-role=row]", function(){
            $div.find("[data-custom-role=name]").html(params.name);
        });
    } 
```

# javascript - 如何在 (jQuery) FullCalendar 中更改 eventSource 的颜色？

> ID：15254229
> 
> 赞同：1
> 
> 时间：2013-03-06T17:39:24.840
> 
> 标签：javascript, jquery

我正在使用以下[插件](http://arshaw.com/fullcalendar/)并想更改 eventSource 的颜色，但我不知道该怎么做。

到目前为止，我有以下代码：

```
$('#calendar').fullCalendar({
       eventSources: [
        'events/get_events'
    ] 
```

该[文档](http://arshaw.com/fullcalendar/docs/event_data/events_array/)讨论了执行此操作的选项，但我无法正确使用语法。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:46:22.877

尝试这个：

```
 $('#calender').fullCalendar({
        eventSources: [
    'events/get_events',
    color: 'yellow',
    textColor: 'black'
   ]
}); 
```

# javascript - 骨干路由器忽略搜索路由

> ID：15254230
> 
> 赞同：1
> 
> 时间：2013-03-06T17:39:31.897
> 
> 标签：javascript, backbone.js, routes

需要一些帮助！

我正在尝试让我的主干路由器匹配此路由： `http://localhost:5150/search_results?utf8=%E2%9C%93&keywords=&location=Norfolk%2C+VA&commit=Search`

..而且没有任何效果。非常令人沮丧！
这是我第一次尝试 Backbone，所以建议会很棒。

```
 '/search_results?*': 'search_results'
  # NOPE

 '/search_results?foo=:foo': 'search_results'
  # NOPE

 '/search_results?foo*': 'search_results'
  # NOPE

 '/search_results?*queryString': 'search_results'
  # NOPE

 'search_results?*queryString': 'search_results'
  # NOPE

 'search_results?*': 'search_results'
 # NOPE

 'search_results?foo=:foo': 'search_results'
 # NOPE

 'search_results?foo*': 'search_results'
 # NOPE

'/search_results': 'search_results'
 # NOPE SERIOUSLY??

 '/search_results': 'search_results'
 # WTF!!!!!!!!!!!!!!!!!!!

 ':search_results?*': 'search_results'
 # NOPE

 ':search_results?:querystring': 'search_results'
 # NOPE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:20:25.013

Have you tried this? It should work without a leading colon, hash or slash in the route.

```
'search_results(?:queryString)': 'search_results' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:53:28.160

Okey... Backbone routes generally detect route path by # keyword as far as I know..correct me if I'm wrong. So to make the things work in your case do the following things.

1) Put the # keyword like #/search_results?....

2) Now define your route as "search_results?:queryString"

This should work :)

# google-app-engine - Google App Engine 中的 JAX-RS 服务

> ID：15254232
> 
> 赞同：4
> 
> 时间：2013-03-06T17:39:35.173
> 
> 标签：google-app-engine, rest, jersey, jax-rs, google-cloud-endpoints

我正在开发一个 Google App Enigne 应用程序，它使用一些 REST 服务并反过来提供网络服务。我正在使用 GAE Eclipse 插件。我有两个问题：

1.  现在与 GAE 一起使用的最佳 JAX-RS 库是什么？我想使用 Jersey，因为我知道它是最“标准”的库（不是吗？），但原则上我可以使用任何...我一直在寻找文档，但我只找到了一些仅适用于旧版泽西岛等的博客中的示例...

2.  对于我必须提供的 Web 服务，我也想过使用 JAX-RS，但现在我不确定它是否是最佳选择......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:51:22.560

您可以使用泽西岛 1.5。[您可以在http://code.google.com/p/googleappengine/wiki/WillItPlayInJava](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)上查看将在 GAE 上运行的所有框架

但是 GAE 在 1.7.5 版本上实现了作为实验服务端点，术语是休息服务。检查[https://developers.google.com/appengine/docs/java/endpoints/](https://developers.google.com/appengine/docs/java/endpoints/)

对于 Web 服务，我不知道您的意思是不是肥皂服务..JAX-RS 是休息服务的规范，而不是您应该使用 JAX-WS 我不尝试与该规范的兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:33:02.017

在对这个主题进行了一些研究之后，我发现从**Google App Engine**提供网络服务的最佳方式是使用**[Google Cloud Endpoints](https://developers.google.com/appengine/docs/java/endpoints/)**，这仍然是一项实验性技术，但据我尝试，它运行良好。**[此外，它还与 GAE 和Google Plugin for Eclipse](https://developers.google.com/appengine/docs/java/tools/eclipse)**很好地集成在一起。

为了使用来自 Google App Engine 的 REST 服务，我选择仅使用 Java 内置**HTTP 客户端库，如此**[**处**](http://www.mkyong.com/webservices/jax-rs/restfull-java-client-with-java-net-url/)所述。我不知道这是否是最好的方法，但它非常简单，并且您可以避免 GAE 和**JAX-RS** API（例如**[Jersey](http://jersey.java.net/)** ）之间可能出现的兼容性问题。

为了在 GAE 中使用**JSON**（对 RESTful 服务非常有用），我使用 Google 的**[gson](http://code.google.com/p/google-gson/)**，这是一个 Java 库，可用于将 Java 对象转换为其 JSON 表示形式，反之亦然。

# javascript - 定义dust.js过滤器时出错

> ID：15254233
> 
> 赞同：0
> 
> 时间：2013-03-06T17:39:39.517
> 
> 标签：javascript, dust.js

我正在使用dust.js 的完整链接版本1.2.0，并尝试定义一个过滤器以在使用灰尘模板渲染JSON 视图时使用。当我在页面脚本中包含这一行时：

```
_.extend(dust.filters, {foo: function(value){ return 'foo'; }}); 
```

它会在 Chrome 的调试器中导致此错误：

**未捕获的 ReferenceError：_ 未定义**

如果我将过滤器定义添加到灰尘 .js 文件中其他过滤器的位置，它就可以工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:35:19.580

看起来定义新过滤器的文件在运行下划线 (_) 之前正在运行。因此，下划线是未定义的。

# c# - 使用 BinaryWriter 进行部分文件更新

> ID：15254237
> 
> 赞同：0
> 
> 时间：2013-03-06T17:39:52.890
> 
> 标签：c#, file-io

我正在寻找一种方法，通过它我可以使用`BinaryWriter`. 用下面的代码覆盖一个完整的文件似乎很简单，但由于我可能有很多记录，~26,000，我担心性能会成为一个问题。（我没有运行测试来确认这一点）。

我需要它的上下文是用于通过`HttpModule`.

我的出发点：

```
using (FileStream fileStream = File.Create(this.cachedIndexFile))
{
    using (BinaryWriter binaryWriter = new BinaryWriter(fileStream))
    {
        // Put the count.
        binaryWriter.Write(this.Count);

        // Put the values.
        foreach (var pair in this)
        {
            binaryWriter.Write(pair.Key);
            binaryWriter.Write(pair.Value.ToString());
        }
    }
} 
```

如果框架中有更好的选择，我会很乐意使用它们。`BinaryWriter`是我所知道的唯一一件事，而寻找替代品已被证明是没有回报的。

我在[这里](http://www.codeproject.com/Articles/17716/Insert-Text-into-Existing-Files-in-C-Without-Temp)找到了这篇文章，但发现它很难理解，而且可下载的项目文件更加困难。也许解决方案可以基于此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:43:20.603

按照评论中的建议，我认为数据库确实是最好的主意。我已经选择了 SQLite。

# android - Android 加速度计使用情况

> ID：15254241
> 
> 赞同：-1
> 
> 时间：2013-03-06T17:40:04.190
> 
> 标签：android, accelerometer

我是 android 新手，正在尝试制作一个可以使用 android 加速度计检测车速加速和减速的应用程序。

任何人都可以建议关于加速度计的好的教程，可以帮助我解决这个问题。

另外我想知道为了显示加速度计捕获的详细信息，我们是否必须维护数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:42:06.127

Android 通过 SensorManager 支持多个传感器。例如加速度计，接近等。

从这里阅读。

[链接1](http://www.vogella.com/articles/AndroidSensor/article.html)

[链接2](http://developer.android.com/reference/android/hardware/SensorManager.html)

[链接3](http://developer.android.com/guide/topics/sensors/sensors_overview.html)

要显示您可以使用的值，并在 logcat 中显示这些值。

```
Log.v("Appname",values[0]); 
```

# libsvm - LibSVM 和 scikit-learn 的不同精度

> ID：15254243
> 
> 赞同：5
> 
> 时间：2013-03-06T17:40:10.797
> 
> 标签：libsvm, scikit-learn

对于相同的数据集和参数，我对`LibSVM`和`scikit-learn`的 SVM 实现获得不同的准确性，即使在[内部](http://scikit-learn.org/stable/modules/svm.html#implementation-details)[`scikit-learn`也使用`LibSVM`](http://scikit-learn.org/stable/modules/svm.html#implementation-details).

我忽略了什么？

LibSVM 命令行版本：

```
me@my-compyter:~/Libraries/libsvm-3.16$ ./svm-train -c 1 -g 0.07 heart_scale heart_scale.model
optimization finished, #iter = 134
nu = 0.433785
obj = -101.855060, rho = 0.426412
nSV = 130, nBSV = 107
Total nSV = 130
me@my-compyter:~/Libraries/libsvm-3.16$ ./svm-predict heart_scale heart_scale.model heart_scale.result
Accuracy = 86.6667% (234/270) (classification) 
```

Scikit-learn NuSVC 版本：

```
In [1]: from sklearn.datasets import load_svmlight_file    
In [2]: X_train, y_train = load_svmlight_file('heart_scale')    
In [3]: from sklearn import svm    
In [4]: clf = svm.NuSVC(gamma=0.07,verbose=True)   
In [5]: clf.fit(X_train,y_train)
        [LibSVM]*
        optimization finished, #iter = 118
        C = 0.479830
        obj = 9.722436, rho = -0.224096
        nSV = 145, nBSV = 125
        Total nSV = 145
Out[5]: NuSVC(cache_size=200, coef0=0.0, degree=3, gamma=0.07, kernel='rbf',
        max_iter=-1, nu=0.5, probability=False, shrinking=True, tol=0.001,
        verbose=True)
In [6]: pred = clf.predict(X_train)    
In [7]: from sklearn.metrics import accuracy_score    
In [8]: accuracy_score(y_train, pred)
Out[8]: 0.8481481481481481 
```

Scikit-learn SVC 版本：

```
In [1]: from sklearn.datasets import load_svmlight_file    
In [2]: X_train, y_train = load_svmlight_file('heart_scale')    
In [3]: from sklearn import svm    
In [4]: clf = svm.SVC(gamma=0.07,C=1, verbose=True)   
In [5]: clf.fit(X_train,y_train)
        [LibSVM]*
        optimization finished, #iter = 153
        obj = -101.855059, rho = -0.426465
        nSV = 130, nBSV = 107
        Total nSV = 130
Out[5]: SVC(C=1, cache_size=200, class_weight=None, coef0=0.0, degree=3, gamma=0.07,
        kernel='rbf', max_iter=-1, probability=False, shrinking=True, tol=0.001,
        verbose=True)
In [6]: pred = clf.predict(X_train)    
In [7]: from sklearn.metrics import accuracy_score    
In [8]: accuracy_score(y_train, pred)
Out[8]: 0.8666666666666667 
```

## 更新

**Update1：**​​将 scikit-learn 示例从 SVR 更新为 NuSVC，请参阅 ogrisel 的回答

**更新2：**添加了输出`verbose=True`

**Update3：**添加了 scikit-learn SVC 版本

所以看起来我的问题已经解决了。如果我使用 SVC`C=1`而不是 NuSVC，我会得到与 libsvm 相​​同的结果，但是有人可以解释为什么 NuSVC 和 SVC(C=1) 会给出不同的结果，即使它们应该做同样的事情（参见 ogrisel 的回答）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:11:40.103

`SVR`是回归模型，不是分类模型。`svm-train -c 1`是作为`sklearn.svm.NuSVC`类可用的 Nu-SVC 模型。

# ruby-on-rails - 如何为开发和生产设置不同的 ActionMailer Base smtp 设置？

> ID：15254244
> 
> 赞同：0
> 
> 时间：2013-03-06T17:40:13.027
> 
> 标签：ruby-on-rails, email, smtp, sendmail, actionmailer

我的 ActionMailer 在生产和开发中都能正常工作。我为每个环境使用不同的 smtp 设置，使用 gmail 进行开发，并通过 Heroku 使用 SendGrid 帐户进行生产。我手动切换 setup_mail.rb 文件中的设置以在开发中工作，然后在投入生产之前将它们切换回来。这可以防止我的 gmail 密码在 github 上公开，因为 SendGrid/Heroku 设置在文件中不需要我的密码：

开发 setup_mail.rb

```
 ActionMailer::Base.smtp_settings = {
      :address              => "smtp.gmail.com",
      :port                 => 587,
      :domain               => "mysite.com",
      :user_name            => "me@mysite.com",
      :password             => 'mypassword',
      :authentication       => "plain",
      :enable_starttls_auto => true
} 
```

生产 setup_mail.rb

```
ActionMailer::Base.smtp_settings = {
  :address        => 'smtp.sendgrid.net',
  :port           => '587',
  :authentication => :plain,
  :user_name      => ENV['SENDGRID_USERNAME'],
  :password       => ENV['SENDGRID_PASSWORD'],
  :domain         => 'heroku.com'
}
ActionMailer::Base.delivery_method = :smtp 
```

我担心我会不小心将带有密码的开发设置推送到 github。我想停止手动切换设置以防止这种情况发生。如何为开发和生产设置不同的 ActionMailer Base smtp 设置？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:46:12.680

在 production.rb 和 development.rb 中有这个设置，而不是硬编码你的密码，你也可以在本地使用环境变量，在你的项目中创建一个 .env 文件，它会在你`cd`进入时加载：

```
EMAIL=me@mysite.com
EMAIL_PASSWORD= mypassword 
```

在 development.rb 中使用`ENV['EMAIL']`AND`ENV['EMAIL_PASSWORD']`

# java - 集成 JBoss Errai 和 Spring？

> ID：15254247
> 
> 赞同：4
> 
> 时间：2013-03-06T17:40:20.580
> 
> 标签：java, spring, gwt, errai

Errai 使用 GWT “摇滚” Web 开发。但是，我想利用我的 Spring 代码库在我的 Web 应用程序后端服务中使用。

服务如：

```
@Service
public class ProductServiceImpl implements ProductService {
 // ...
} 
```

我可以在哪里从 GWT UI 端调用这个服务，当我已经在使用 JBoss Errai 时有哪些选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T17:27:50.850

这是如何将 erai 服务与 spring 集成的[示例](https://community.jboss.org/thread/221062 "例子")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:39:17.547

1.- 您可以通过一些 CDI 实现注入依赖项（对于 JBoss AS，它使用 Seam）。或者 2.- 如果你坚持使用 spring，你可以使用 Seam 来激活 spring 应用程序上下文。

在第一个选项中，您可以使用一些 erai 原型来获得应用程序的基本框架。在第二个选项中......您可以做同样的事情，但您必须阅读有关接缝弹簧上下文集成的信息。

[原型链接](https://docs.jboss.org/author/display/ERRAI/Errai+Maven+Archetype)

[弹簧集成链接](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html_single/#d0e12274)

# user-agent - 可以检测操作系统和屏幕大小的 URL 重定向服务

> ID：15254250
> 
> 赞同：1
> 
> 时间：2013-03-06T17:40:34.270
> 
> 标签：user-agent, saas, screen-size, url-redirection

是否有任何基于用户操作系统和屏幕大小的 url 重定向服务重定向。

# c# - 我如何使用 WCF 数据服务？

> ID：15254251
> 
> 赞同：4
> 
> 时间：2013-03-06T17:40:37.777
> 
> 标签：c#, asp.net, .net, wcf, wcf-data-services

我创建了一个 wcf 服务，但我使用了 3 个项目；
1）ServiceLibrary（WCF 库）
2）Web
3）ConsoleTestClient
我的`ServiceLibrary`app.config 文件如下所示；

```
 <system.serviceModel>
    <services>
      <service name="MrDAStoreJobs.ServiceLibrary.AdvertisementService">
        <clear />
        <endpoint address="basic" 
                  binding="basicHttpBinding" bindingConfiguration="" 
                  contract="MrDAStoreJobs.ServiceLibrary.Interface.IAdvertisementService" />
        <endpoint name="mexHttpBinding"
          contract="IMetadataExchange"
          binding="mexHttpBinding"
          address="mex" />

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:13758/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> <br /> 
```

现在，为了托管这个库，我在我`Web.Config`的项目文件中完成了以下设置`Web`。
svc 文件名是`WcfDataService1.svc`

```
 public class WcfDataService1 : DataService<AdvertisementService>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.UseVerboseErrors = true;
ServiceOperationRights.All);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
        }
    }
  <system.serviceModel>
    <services>
      <service name="MrDAStoreJobs.ServiceLibrary.AdvertisementService">
        <clear />
        <endpoint address="basic" 
                  binding="basicHttpBinding" bindingConfiguration="" 
                  contract="MrDAStoreJobs.ServiceLibrary.Interface.IAdvertisementService" />
        <endpoint name="mexHttpBinding"
          contract="IMetadataExchange"
          binding="mexHttpBinding"
          address="mex" />

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:13758/WcfDataService1.svc" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

现在，当我使用 WCF 测试客户端直接使用（ServiceLibrary 项目）测试此服务时，我看到以下内容并且一切正常； ![在此处输入图像描述](../Images/9676980b8b0d52a2ababa9b985597a8c.png)
问题是当我尝试运行我的`Web`项目（我将其用作 wcf 服务的主机）时。然后转到控制台测试客户端，并希望使用添加引用添加引用。我没有看到我的`Get`和`Set`方法（如测试客户端） ![在此处输入图像描述](../Images/01f704b68c00f7e054195c6e6cfd2a23.png) **为什么我没有看到我的 IAdvertisementService 接口和方法**
**我必须将它部署到实际的 IIS 吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T12:10:09.183

要使用 ASP.NET 开发服务，我们必须将 WebService 属性添加到类，并将 WebMethodAttribute 添加到任何类方法。

例子

```
[WebService] 
 public class Service : System.Web.Services.WebService 
  { 
  [WebMethod] 
  public string Test(string strMsg) 
  { 
      return strMsg; 
  } 
 } 
```

要在 WCF 中开发服务，我们将编写以下代码：

```
[ServiceContract] 
public interface ITest 
{ 
   [OperationContract] 
   string ShowMessage(string strMsg); 
 } 

public class Service : ITest 
   { 
       public string ShowMessage(string strMsg) 
       { 
          return strMsg; 
       } 
   } 
```

ServiceContractAttribute 指定接口定义WCF 服务契约，OperationContract 属性表示接口的哪些方法定义了服务契约的操作。

实现服务契约的类在 WCF 中称为服务类型。

**托管服务**

ASP.NET Web 服务被编译成一个类库程序集，一个扩展名为 .asmx 的服务文件将包含该服务的代码。服务文件被复制到 ASP.NET 应用程序的根目录中，而程序集将被复制到 bin 目录中。可以使用服务文件的 URL 访问应用程序。

WCF 服务可以托管在 IIS 或 WindowsActivationService 中。

将服务类型编译成类库 将扩展名为 .SVC 的服务文件复制到虚拟目录中，并将程序集复制到虚拟目录的 bin 子目录中。将 web.config 文件复制到虚拟目录中。

**客户开发**

ASP.NET Web 服务的客户端是使用命令行工具 WSDL.EXE 生成的。

WCF 使用 ServiceMetadata 工具 (svcutil.exe) 为服务生成客户端。

有关更多详细信息，请访问此链接 [http://www.codeproject.com/Articles/139787/What-s-the-Difference-between-WCF-and-Web-Services](http://www.codeproject.com/Articles/139787/What-s-the-Difference-between-WCF-and-Web-Services)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:55:55.050

**以前的帖子已删除：**

* * *

**更新：**

Microsoft 开发人员网络实际上对此进行了非常详细的介绍，他们提供的一些资源是：

*   [概述](http://msdn.microsoft.com/en-us/library/cc668792.aspx)
*   [代码项目教程](http://www.codeproject.com/Articles/135490/Advanced-using-OData-in-NET-WCF-Data-Services)

还有几本书我解决了这个特殊的问题。由于有人说提供解决此问题的链接并不能真正回答您的问题，因此我将尝试回答。

1.  在 Visual Studio 中单击*File*，然后继续*New Project*。
2.  在对话框中展开*Visual C#*，选择*Web*和*ASP.NET Web 窗体应用程序*。
3.  给您的项目起一个您选择的名称`NorthwindWeb`。

至此，您已经创建了一个项目；由于*服务*的复杂性，忽略一个微小的细节可能会导致灾难性的结果。这就是为什么我要从头开始。

在我的示例中，我会将其链接到*Database*。所以我将添加一个*Ado.Net Entity Data Model*。我将命名我的模型：`NorthwindModel`. 我还将根据现有的*Database*生成。因此，此时只需遵循 Visual Studio 向导即可。在这些表中选择您的*数据库对象*，然后完成。

重要的部分，构建我的`Data Service`.

1.  项目*添加新项目*。
2.  选择*Web*并选择*WCF 数据服务*。
3.  输入名称，`NorthwindCustomer`- 然后*添加*。

找到第一个`Todo:`评论并删除代码，然后输入：

```
public class DemonDbCustomer : DataService<demonDbEntities> 
```

然后在`InitializeService`Event Handler 中找到注释：

```
config.SetEntitySetAccessRule("*", EntitySetRights.All); 
```

此时按**CTRL + F5**运行服务。浏览器将打开并生成服务的 XML 模式。在*地址栏中*，在 URL 末尾输入*客户*`NorthwindCustomers.svc`，然后*按 Enter*。

** 有时 Internet Explorer 会搞砸，因此可能需要额外的故障排除。**

现在我们将创建我们的客户端部分。

1.  *添加*新*项目*
2.  选择*Windows 窗体应用程序*
3.  命名您选择的文件，`NorthwindClient`然后单击*Ok*。
4.  在*解决方案资源管理器*中选择`NorthwindClient Project`并*设置为启动项目*。
5.  右键单击项目：*添加服务引用*单击*发现*。

此时，您的 URL`NorthwindCustomers Service`将出现在该*地址*字段中。这是从该`.svc`文件生成的。

现在我们必须为我们的服务提供数据绑定。

1.  在*数据菜单*上，我们要*显示数据源*。
2.  *添加新数据源*
3.  选择类型`Data Source`并遵循向导（单击对象）。
4.  选择要绑定的对象。

现在，您只需要创建一个`User Interface`. 为此，只需将您的`Customers Node`从您`Data Sources`拖到`Form`.

*   `DataGridView`
*   `BindingSource`
*   `BindingNavigation`

它们都是自动添加的。然后只需双击您的`Form`并将以下内容添加到您的`Form1_Load Event Handler`.

```
ServiceReference1.northwindModel.northwindEntities proxy = new 
     ServiceReference1.northwindModel.northwindEntities(new
         Uri("http://localhost:53397/NorthwindCustomers.svc/"));

// As you see it pointed to our SVC file, because that includes our Address, Binding, Contract information.

this.customersBindingSource.DataSource = proxy.Customers; 
```

现在在您的*解决方案资源管理器*中右键单击它`NorthwindCustomers.svc`，然后单击*View In Browser*。将添加 XML 模式，因此您只需从*地址栏中*复制该 URL 。然后将 替换为`Uri`您刚刚复制的那个。

运行您的应用程序，您已经完成以下操作：

*   主持人
*   客户
*   服务
*   已消费

这就是如何使用**WCF 数据服务的文章，**[这里](http://msdn.microsoft.com/en-us/library/vstudio/cc668184.aspx)有更详细的文章：

希望这会有所帮助。

# xml - Powershell & Lotus Notes - 将 While 循环的输出从文本更改为 XML 输出

> ID：15254256
> 
> 赞同：1
> 
> 时间：2013-03-06T17:41:01.613
> 
> 标签：xml, powershell, view, while-loop, lotus-notes

我正在针对 Lotus Notes 服务器上的视图运行 Powershell 脚本。它目前以下列方式产生输出：

```
UserID|Name|Internet Address
user1|John Smith|john.smith@mycompany.com
user2|Joe Smith|joe.smith@mycompany.com
user3|Bill Smith|bill.smith@mycompany.com 
```

注意：标题行当前不是输出的一部分，仅出于提供信息的目的而显示。

输出当前转到一个文本文件，但我现在需要将其更改为 XML。使用以下 Powershell 脚本提取数据。

```
$session = New-Object -ComObject lotus.notessession
$session.initialize()
$session.notesversion

if (Test-Path -Path "c:\myfile.txt") {
    Remove-Item -Path "c:\myfile.txt" 
    }

$db = $session.GetDatabase("lotusServer","names.nsf")
$db.title

$view = $db.GetView('People')
Write-Host "View read : " $view.Name

# Show number of documents 
$nbrDocs = $view.AllEntries.Count 
Write-Host "Num of Docs : " $nbrDocs

# Get First Document in the View 
$doc = $view.GetFirstDocument()

#Read fields for current document 
$delim = "|" 
$i = 0 

    while ($doc -ne $null) {
        $internetAddress = [string] $doc.GetItemValue("InternetAddress") 
        $companyname = [string] $doc.GetItemValue("CompanyName") 
        $fullname = [string] $doc.GetItemValue("FullName")  
        if ( $companyname -eq "My Company") {
            $i = $i + 1
            # format the full name field
            $fullname = $fullname.Substring(3)
            $s = $fullname
            $c1 = $s.LastIndexOf(" ")
            $c2 = $s.IndexOf("/")
            $name = $s.Substring(0,$c2)
            $userID = $s.Substring($c1+1)

            $zOut = $userID + $delim + $name + $delim +  $internetAddress 
            Write-Host $zOut
            Write-Output $zOut| out-file "c:\myfile.txt" -append -width 2000
            } #end if
        $doc = $view.GetNextDocument($doc) 
    }  #end while 
```

我希望输出现在采用类似于以下内容的 XML 格式：

```
<?xml version="1.0" ?> 
<Company>
   <UserID>user1
      <Name>John Smith</Name> 
      <InternetAddress>john.smith@mycompany.com</InternetAddress> 
   </UserID> 
</Company> 
```

数据不应该有任何重复，并且（在某些时候）输出中可能有多家公司，但总体结构与上述示例不会有太大差异（名称和 InternetAddress 是 UserID 的子项）。

但是，我现在通过数据解析的方式（而 $doc -ne $null）我一次只能看到一行。我发现的示例展示了如何导出/写入 XML 一次执行，而不是一次执行一行。输出 XML 将在用于其他地方之前进行验证。我可以将此脚本的输出写入 XML 文件吗？如果可以，怎么写？

任何想法/建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:07:40.787

以下行处理记录输出。

```
$zOut = $userID + $delim + $name + $delim +  $internetAddress 
```

您需要对其进行修改，以便可以编写为 XML。

例子：

```
$zOut = "<UserID>" + $userID + "</UserID>" ..... (etc) 
```

您一次只能看到一行，因为您正在遍历视图中的一组记录。

如果您想一次性获取所有数据，您可以在视图 URL 查找中使用**?ReadViewEntries&outputformat=XML设置。**这样做是有限制的。更多细节在这里：

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_ABOUT_URL_COMMANDS_FOR_OPENING_SERVERS_DATABASES_AND_VIEWS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_ABOUT_URL_COMMANDS_FOR_OPENING_SERVERS_DATABASES_AND_VIEWS.html)

或者，您可以在 XPage 中制作它，或导出到 DXL 并通过 XSLT 进行转换。

但这些替代方案将比你现在拥有的更有效。

# javascript - 克隆和点击？

> ID：15254257
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:10.453
> 
> 标签：javascript, jquery, html, onclick

在我对它做任何事情之前，我在我的页面上克隆了一个对象：

```
var questionHTML = $('#questions:first').clone(); 
```

然后我将克隆插入页面。问题是，在插入的克隆上没有点击，例如：

```
$(".addAnswerBtn").click(function() {}); 
```

克隆对象中的上述 addAnswerBtn 不再有效（在原始对象中可以正常工作），有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:43:11.163

要完整地克隆一个对象及其所有事件，请使用`.clone(true)`. 请参阅上面的 jQuery API 文档：[在此处输入链接描述](http://api.jquery.com/clone/)

**更新**

正如一些评论中提到的，您正在克隆一个带有 ID 的对象。确保在克隆后更改 ID，否则可能会得到一些古怪的结果。

# ios - iOS 用 UIImageView 捕获 UIView

> ID：15254258
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:26.017
> 
> 标签：ios, uiview, uiimageview, image-capture

我正在尝试在 iOS 上获取 UIView 屏幕截图。

在我看来，我有两个带有动画的 UIImageView。

我使用它来捕获视图的代码是：

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, 1.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
// Read the UIImage object
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(image, self,
                               @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

结果是一张有背景的图片，只有一个 UIImageView。两个 ImageView 一直在移动。如果我拍了几张照片，那么 UIImageView 每次都在同一个位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:31:12.160

试试这个：

```
-(CGImageRef)imageCapture
{
   UIGraphicsBeginImageContext(self.view.bounds.size);
   [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
   UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   CGRect rect= CGRectMake(0,0 ,width, height);

   CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], rect);
   return imageRef;
} 
```

每当您想捕获屏幕时，请使用以下行

```
UIImage *captureImg=[[UIImage alloc] initWithCGImage:[self imageCapture]]; 
```

# php - 无法连接数据库，无法插入数据库

> ID：15254259
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:32.563
> 
> 标签：php, mysql

我在将电子邮件、密码和名称插入 mySQL 数据库时遇到问题。我准备了一个单独的类来连接我的数据库。但是当我将我的姓名、电子邮件和密码输入我的表单时（这是在另一个 php 文件中），那么我的数据库中就什么都没有了。在这里你可以找到我的代码。我已经在我的数据库中尝试了 insert 语句并且有效。

```
<?php
include_once("classes/User.class.php");
include_once("Tweet.php");

class Db
{
  private $m_sHost="localhost";
  private $m_sUser="root";
  private $m_sPassword="";
  private $m_sDatabase="phples";
  public $conn;

  public function __construct() {
    $this->conn=new mysqli($this->m_sHost,$this->m_sUser,$this->m_sPassword,$this->m_sDatabase);
    if(isset($m_bVerzend)) {
      if(!$conn->connect_errno) {
        $sql = "INSERT INTO 'tbltweet' ('Name', 'Email', 'Password') VALUES ('$m_sName', '$m_sEmail', '$m_sPassword');";
        $conn->query($sql);
      }
    }
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:48:58.043

在您的构造函数中，您使用了许多未在函数范围内设置的变量：

```
 if(isset($m_bVerzend)){
    if(!$conn->connect_errno)
    {
        $sql = "INSERT INTO 'tbltweet' ('Name', 'Email', 'Password') VALUES ('$m_sName', '$m_sEmail', '$m_sPassword');";
        $conn->query($sql);}
    } 
```

`$m_bVerzend`像,等所有变量`$m_sName`都是未定义的。

[php 手册](http://php.net/manual/en/language.variables.scope.php)中提供了有关变量范围的更多信息。

顺便说一句，您还应该使用带有绑定变量的准备好的语句，而不是在 sql 语句中转储变量，以防止 sql 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:09:11.883

函数中不存在变量 $m_bVerzend、$m_sName、$m_sEmail 和 $m_sPassword。作为标准，除非另有说明，否则 PHP 的变量被视为本地范围。

我会将值作为构造函数的参数发送，或者只是使用构造函数来实例化连接，然后使用不同的过程来接收参数、准备 SQL 语句并执行查询。

# visual-foxpro - 了解 Visual Foxpro 8.0 运行时

> ID：15254260
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:33.680
> 
> 标签：visual-foxpro

我对 Foxpro 不太了解，但我需要它来查看 DBF 文件。

在我的 PC 上，我安装了一个客户端文件：“Visual FoxPro 8.0 client.msi”。

现在我可以从复制的文件夹中运行 Visual Foxpro 8.0 的 exe 文件：

![在此处输入图像描述](../Images/7e758d62b3f61adeb4b35a81f2f204f9.png)

我没有安装任何 Visual Foxpro 程序，只有客户端。

我的问题是：我还需要 Visual Foxpro 的许可证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:07:07.493

没有 VFP 客户端之类的东西。
VFP 运行时仅包含几个 DLL 文件。
所有版本的 VFP 运行时都可以在这里找到：http: [//archive.msdn.microsoft.com/FoxPro/Release/ProjectReleases.aspx?ReleaseId =125](http://archive.msdn.microsoft.com/FoxPro/Release/ProjectReleases.aspx?ReleaseId=125)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:10:29.233

如果对 VFP8 的许可协议感到好奇，请查看此链接。否则，看起来您已经安装了完整的 VFP8。

.MSI 可能有一个现有 VFP8 安装的副本。因此，当运行时，它只是复制到目标目录而不需要 CD 密钥。

```
http://www.tedroche.com/Present/2003/RocheSoftwareLicensingPaper.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:39:27.947

我以前从未见过将 VFP 称为“客户端”，但您在屏幕截图中显示的目录结构看起来像是 VFP 8 的完整安装。您将运行 vfp8.exe 来访问您的 DBF 文件。

它在安装过程中是否要求提供许可证/CD 密钥？

# bash - 在一个命令行中从 t-shell 切换到 bash 和源文件

> ID：15254263
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:40.780
> 
> 标签：bash, ssh

从我机器上的用户，我 ssh 到另一台默认运行 t-shell 的机器上的共享用户。我想创建一个别名，让我以共享用户身份登录到另一台机器，登录到该机器上的`cd`我的个人文件夹，将 shell 切换为 bash，并获取定义一些额外别名的脚本。**我怎样才能做到这一点？**

这是我到目前为止所尝试的。从我的机器上运行：

```
ssh -ty <otheruser>@<otherhost> 'cd <myfolder>; source tsh.personal' 
```

在另一台机器上，我的文件`~/<myfolder>/tsh.personal`看起来像

```
#!/bin/tsh
/bin/bash -c 'source ~/<myfolder>/bash.personal' 
```

但是，当我使用 for 选项`-c`时`bash`，它只是运行命令然后退出，然后与其他机器的连接关闭，因为所有传递给命令的`ssh`命令都已完成。我也试过`~/<myfolder>/tsh.personal`用

```
/bin/bash -c 'source ~/<myfolder>/bash.personal; /bin/bash' 
```

它告诉 bash 启动另一个不会退出的 bash 实例。但是，当该实例启动时，就像`~/<myfolder>/bash.personal`从未获取过信息一样。每当启动新的 bash 实例时，所有别名是否都会重置，或者为什么别名没有传递给新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:50:48.323

更改`tsh.personal`为

```
exec /bin/bash --rcfile ~/<myfolder>/bash.personal 
```

不是绝对必要的，但它通过用实例替换实例`exec`来清理进程表。`tsh``bash`

# wordpress - 从 add_meta_box 中的数组中拉回帖子列表

> ID：15254268
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:50.287
> 
> 标签：wordpress, custom-post-type, meta

所以我有一个自定义帖子类型（称为 online-cpt），其 add_meta_box 为“_useraccess”

这个元框目前很高兴地保存管理员输入和更新的逗号分隔值，例如 2,3,14,56,6 等。

我现在怎样才能拉回所有在线 cpt 帖子的循环，这些帖子在 _useraccess 元框中的某处说值“3”？

我相信它是这样的，但我无法让“价值”meta_query 工作。有人发现以下有什么问题吗？

```
<?php
// The Query
$args = array('post_type' => array('online-cpt'),
          'meta_query' => array(array(
                    'key' => '_useraccess', 'value'=> '3', 'compare' => 'IN')
                            ));

$show_onlinecpt = new WP_Query ($args);

// The Loop
if($show_onlinecpt->have_posts()) :
while ( $show_onlinecpt->have_posts() ) :
    $show_onlinecpt->the_post(); ?>
<a href="<?php the_permalink() ?>">
<h6><?php the_title(); ?></h6>
<?php
endwhile; endif;
wp_reset_postdata(); ?> 
```

还是我错过了其他东西？

我已经看过这里：[https ://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:03:49.530

是的，我实际上已经通过使用 get_posts 自己解决了这个问题 - 它拉回所有自定义帖子，然后当它循环 foreach 时，我只引用元值本身。

不知道为什么 wp_query 不能像上面那样工作，但对我表示敬意！

# php - 使用基于密钥的身份验证通过 PHP 连接到 EC2 实例上的 MySql

> ID：15254269
> 
> 赞同：0
> 
> 时间：2013-03-06T17:41:51.590
> 
> 标签：php, mysql, ssh, amazon-ec2

我有一个运行 mysql 服务器的 EC2 实例，该服务器使用基于密钥的身份验证来连接它。我需要通过 PHP 从不同的非亚马逊服务器连接到此 EC2 实例上的 mysql 服务器。这可能吗？如果是这样，我该怎么做？我需要在 PHP 中使用 ssh2 连接函数吗？显然，我不能只使用 mysql_connect 因为服务器使用基于密钥的身份验证。任何人都可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:59:55.057

我将假设基于密钥的身份验证是指 ssh 密钥，而不是使用密钥连接到 mysql。

所以你有几个选择。

1.  使用 SSH 隧道。这在您的非 amzn 服务器上使用 ssh 侦听器，并通过 SSH 将所有通信转发到 mysql 实例。这更安全，但并非没有一些开销。

2.  如果安全性不是那么重要，您可以将安全组打开到非 amzn 服务器的 ip，并直接建立到端口 3306（或您使用的任何端口）的连接

无论如何，您最终都会遇到一些延迟运行这样的查询。取决于您的服务器之间的连接。

# php - Magento：以编程方式创建捆绑订单

> ID：15254271
> 
> 赞同：2
> 
> 时间：2013-03-06T17:41:55.977
> 
> 标签：php, magento

我有这个代码： http: [//pastebin.com/iFwyKM7G](http://pastebin.com/iFwyKM7G)

在客户注册后执行的事件观察者类中。它会自动创建订单，适用于简单的产品。但是，我一生无法弄清楚如何使其与捆绑产品一起使用！

如何使用捆绑产品进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:29:11.920

我做的！

我将代码更改为以下内容：

```
$customer = Mage::getSingleton('customer/customer')->load($observer->getCustomer()->getId());
        $session = Mage::getSingleton('adminhtml/session_quote');
        $order_create_model = Mage::getSingleton('adminhtml/sales_order_create');
        Mage::log($customer->debug(), null, 'toszodj_meg.log');
        //$transaction = Mage::getModel('core/resource_transaction');
        $storeId = $customer->getStoreId();
        Mage::log($customer->getDefaultBillingAddress()->debug(), null, 'toszodj_meg.log');
        $reservedOrderId = Mage::getSingleton('eav/config')->getEntityType('order')->fetchNewIncrementId($storeId);
        $session->setCustomerId((int) $customer->getId());
        $session->setStoreId((int) $storeId);
        $orderData = array(
        'session'       => array(
            'customer_id'   => $customer->getId(),
            'store_id'      => $storeId,
        ),
        'payment'       => array(
            'method'    => 'banktransfer',
            'po_number' => (string) '-',
        ),
        // 123456 denotes the product's ID value
        'add_products'  =>array(
            '2'    => array(
                    'qty' => 1,
                    'bundle_option' => array(
                        2 => 2,
                        1 => 1,
                    ),
                    'bundle_option_qty' => array(
                        2 => 1,
                        1 => 1,
                        ),
                    ),
                ),
        'order'         => array(
            'currency'  => 'EUR',
            'account'   => array(
                'group_id'  => $customer->getGroupId(),
                'email'     => (string) $customer->getEmail(),
            ),
            'comment'           => array('customer_note' => 'API ORDER'),
            'send_confirmation' => 1,
            'shipping_method'   => 'flatrate_flatrate',
            'billing_address'   => array(
                'customer_address_id' => $customer->getDefaultBillingAddress()->getEntityId(),
                'prefix'             => $customer->getDefaultBillingAddress()->getPrefix(),
                'firstname'           => $customer->getDefaultBillingAddress()->getFirstname(),
                'middlename'          => $customer->getDefaultBillingAddress()->getMiddlename(),
                'lastname'            => $customer->getDefaultBillingAddress()->getLastname(),
                'suffix'             => $customer->getDefaultBillingAddress()->getSuffix(),
                'company'              => $customer->getDefaultBillingAddress()->getCompany(),
                'street'               => $customer->getDefaultBillingAddress()->getStreet(),
                'city'                   => $customer->getDefaultBillingAddress()->getCity(),
                'country_id'           => $customer->getDefaultBillingAddress()->getCountryId(),
                'region'               => $customer->getDefaultBillingAddress()->getRegion(),
                'region_id'           => $customer->getDefaultBillingAddress()->getRegionId(),
                'postcode'               => $customer->getDefaultBillingAddress()->getPostcode(),
                'telephone'           => $customer->getDefaultBillingAddress()->getTelephone(),
                'fax'                   => $customer->getDefaultBillingAddress()->getFax(),
            ),
            'shipping_address'  => array(
                'customer_address_id' => $customer->getDefaultShippingAddress()->getEntityId(),
                'prefix'               => $customer->getDefaultShippingAddress()->getPrefix(),
                'firstname'           => $customer->getDefaultShippingAddress()->getFirstname(),
                'middlename'           => $customer->getDefaultShippingAddress()->getMiddlename(),
                'lastname'               => $customer->getDefaultShippingAddress()->getLastname(),
                'suffix'               => $customer->getDefaultShippingAddress()->getSuffix(),
                'company'               => $customer->getDefaultShippingAddress()->getCompany(),
                'street'               => $customer->getDefaultShippingAddress()->getStreet(),
                'city'                   => $customer->getDefaultShippingAddress()->getCity(),
                'country_id'           => $customer->getDefaultShippingAddress()->getCountryId(),
                'region'               => $customer->getDefaultShippingAddress()->getRegion(),
                'region_id'           => $customer->getDefaultShippingAddress()->getRegionId(),
                'postcode'               => $customer->getDefaultShippingAddress()->getPostcode(),
                'telephone'           => $customer->getDefaultShippingAddress()->getTelephone(),
                'fax'                   => $customer->getDefaultShippingAddress()->getFax(),
            ),
        ),
    );
    $order_create_model->importPostData($orderData['order']);
    $order_create_model->getBillingAddress();
    $order_create_model->setShippingAsBilling(true);
    $order_create_model->addProducts($orderData['add_products']);
    $order_create_model->collectShippingRates();
    $order_create_model->getQuote()->getPayment()->addData($orderData['payment']);
    $order_create_model
             ->initRuleData()
             ->saveQuote();
    $order_create_model->getQuote()->getPayment()->addData($orderData['payment']);
    $order_create_model->setPaymentData($orderData['payment']);
    $order_create_model
                         ->importPostData($orderData['order'])
                         ->createOrder();
    $session->clear();
    Mage::unregister('rule_data');
    Mage::log('Order Successfull', null, 'siker_bammer.log'); 
```

它有效！以为客户没有收到通知。我现在想弄清楚。

# android - 尽管使用了减小的样本大小，但 BitmapFactory.decodeStream 内存不足

> ID：15254272
> 
> 赞同：13
> 
> 时间：2013-03-06T17:41:58.063
> 
> 标签：android, bitmap, out-of-memory

我已经阅读了许多有关解码位图的内存分配问题的相关帖子，但是即使使用了官网提供的代码，我仍然无法找到以下问题的解决方案。

这是我的代码：

```
public static Bitmap decodeSampledBitmapFromResource(InputStream inputStream, int reqWidth, int reqHeight) {

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    int len;
    try {
        while ((len = inputStream.read(buffer)) > -1) {
        baos.write(buffer, 0, len);
        }
        baos.flush();
        InputStream is1 = new ByteArrayInputStream(baos.toByteArray());
        InputStream is2 = new ByteArrayInputStream(baos.toByteArray());

        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(is1, null, options);

        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
        options.inPurgeable = true;
        options.inInputShareable = true;
        options.inJustDecodeBounds = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        return BitmapFactory.decodeStream(is2, null, options);

    } catch (Exception e) {
        e.printStackTrace();

        return null;
    }
}

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
}

bitmap = decodeSampledBitmapFromResource(inputStream, 600, 600); 
```

我在这一行收到“3250016 字节分配内存不足错误”：

```
return BitmapFactory.decodeStream(is2, null, options); 
```

在我看来，3.2 MB 小到可以分配。我哪里错了？我该如何解决这个问题？

**编辑**

[在通过 N-Joy 在此处](https://stackoverflow.com/questions/10314527/caused-by-java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget/10408877#10408877)查看此解决方案后，它适用于所需尺寸 300，但我所需尺寸为 800，因此我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T09:04:17.660

该方法*`decodeSampledBitmapFromResource`*内存效率不高，因为它使用 3 个流：ByteArrayOutputStream baos、ByteArrayInputStream is1 和 ByteArrayInputStream is2，**每个流存储图像的相同流数据**（每个字节数组）。

当我使用我的设备（LG nexus 4）进行测试以将 SD 卡上的 2560x1600 图像解码为目标尺寸 800 时，需要这样：

```
03-13 15:47:52.557: E/DecodeBitmap(11177): dalvikPss (beginning) = 1780
03-13 15:47:53.157: E/DecodeBitmap(11177): dalvikPss (decoding) = 26393
03-13 15:47:53.548: E/DecodeBitmap(11177): dalvikPss (after all) = 30401 time = 999 
```

我们可以看到：分配了太多的内存（28.5 MB）只是为了解码 4096000 个像素的图像。

**解决方案**：我们读取 InputStream 并将数据直接存储到一个字节数组中，并使用这个字节数组进行其余工作。
示例代码：

```
public Bitmap decodeSampledBitmapFromResourceMemOpt(
            InputStream inputStream, int reqWidth, int reqHeight) {

        byte[] byteArr = new byte[0];
        byte[] buffer = new byte[1024];
        int len;
        int count = 0;

        try {
            while ((len = inputStream.read(buffer)) > -1) {
                if (len != 0) {
                    if (count + len > byteArr.length) {
                        byte[] newbuf = new byte[(count + len) * 2];
                        System.arraycopy(byteArr, 0, newbuf, 0, count);
                        byteArr = newbuf;
                    }

                    System.arraycopy(buffer, 0, byteArr, count, len);
                    count += len;
                }
            }

            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeByteArray(byteArr, 0, count, options);

            options.inSampleSize = calculateInSampleSize(options, reqWidth,
                    reqHeight);
            options.inPurgeable = true;
            options.inInputShareable = true;
            options.inJustDecodeBounds = false;
            options.inPreferredConfig = Bitmap.Config.ARGB_8888;

            int[] pids = { android.os.Process.myPid() };
            MemoryInfo myMemInfo = mAM.getProcessMemoryInfo(pids)[0];
            Log.e(TAG, "dalvikPss (decoding) = " + myMemInfo.dalvikPss);

            return BitmapFactory.decodeByteArray(byteArr, 0, count, options);

        } catch (Exception e) {
            e.printStackTrace();

            return null;
        }
    } 
```

进行计算的方法：

```
public void onButtonClicked(View v) {
        int[] pids = { android.os.Process.myPid() };
        MemoryInfo myMemInfo = mAM.getProcessMemoryInfo(pids)[0];
        Log.e(TAG, "dalvikPss (beginning) = " + myMemInfo.dalvikPss);

        long startTime = System.currentTimeMillis();

        FileInputStream inputStream;
        String filePath = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/test2.png";
        File file = new File(filePath);
        try {
            inputStream = new FileInputStream(file);
//          mBitmap = decodeSampledBitmapFromResource(inputStream, 800, 800);
            mBitmap = decodeSampledBitmapFromResourceMemOpt(inputStream, 800,
                    800);
            ImageView imageView = (ImageView) findViewById(R.id.image);
            imageView.setImageBitmap(mBitmap);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        myMemInfo = mAM.getProcessMemoryInfo(pids)[0];
        Log.e(TAG, "dalvikPss (after all) = " + myMemInfo.dalvikPss
                + " time = " + (System.currentTimeMillis() - startTime));
    } 
```

结果：

```
03-13 16:02:20.373: E/DecodeBitmap(13663): dalvikPss (beginning) = 1823
03-13 16:02:20.923: E/DecodeBitmap(13663): dalvikPss (decoding) = 18414
03-13 16:02:21.294: E/DecodeBitmap(13663): dalvikPss (after all) = 18414 time = 917 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T06:05:34.517

这是用户在玩大位图时通常面临的一个常见问题，并且在现场讨论了很多问题，[这里](https://stackoverflow.com/questions/11820266/android-bitmapfactory-decodestream-out-of-memory-with-a-400kb-file-with-2mb-f)，[这里](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)，[这里](https://stackoverflow.com/questions/8624086/bitmap-decodestream-outofmemory-exception)和[这里](https://stackoverflow.com/questions/2711306/out-of-memory-error)等等，即使用户无法操作确切的解决方案。

我偶然发现了一个库，它可以流畅地管理位图和我在下面列出的其他链接。希望这可以帮助！

[冰沙图书馆](https://github.com/lucasr/smoothie)

[Android-BitmapCache](https://github.com/chrisbanes/Android-BitmapCache)

[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) [OutOfMemoryError: bitmap size超出VM预算的解决方案](http://androidactivity.wordpress.com/2011/09/24/solution-for-outofmemoryerror-bitmap-size-exceeds-vm-budget/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:30:27.107

`ARGB_8888`使用更多内存，因为它需要 Alpha 颜色值，所以我的建议是按照[此处](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)`RGB_565`所述使用

注意：与 相比，质量会稍低`ARGB_8888`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T06:09:15.603

我在位图内存使用方面遇到了很多问题。

结果：

*   大多数设备的图形堆内存有限，大多数小型设备的整体应用程序限制为 16MB，而不仅仅是您的应用程序
*   如果适用，使用 4 位或 8 位或 16 位位图
*   尝试从头开始绘制形状，尽可能省略位图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T06:29:34.033

使用**WebView**动态加载任意数量的图像，它是使用 NDK（低级）构建的，因此没有 GDI 堆内存限制。它运行平稳快速:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T08:36:17.763

解码位图时的内存不足问题通常不会与您正在解码的图像大小相关联。当然，如果你尝试打开一个 5000x5000px 的图像，你会因为 OutOfMemoryError 而失败，但是对于 800x800px 的大小，它是完全合理的并且应该可以正常工作。

如果您的设备内存不足，图像为 3.2 MB，则很可能是因为您在应用程序的某处泄漏了上下文。

[这是这篇文章](https://stackoverflow.com/questions/10314527/caused-by-java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget/10408877#10408877)的第一部分：

> 我想问题不在你的布局中，问题在你代码的其他地方。并且**可能您正在某处泄漏上下文**。

这意味着您在不应该使用的组件中使用 Activity Context，从而防止它们被垃圾收集。因为组件通常由活动持有，这些活动不是 GC，您的 Java 堆会增长得非常快，您的应用程序有时会崩溃。

正如 Raghunandan 所说，您将不得不使用 MAT 来查找持有的 Activity/Component 并删除上下文泄漏。

我目前发现的检测上下文泄漏的最佳方法是方向更改。例如，多次旋转 ActivityMain，运行 MAT 并检查是否只有一个 ActivityMain 实例。如果您有多个（与旋转变化一样多），则意味着存在上下文泄漏。

几年前我发现了一个[关于使用 MAT 的好教程](https://stackoverflow.com/questions/3714394/how-to-find-memory-leak-class-activity-in-android/5855489#5855489)。也许现在有更好的。

关于内存泄漏的其他帖子：

[Android - 内存泄漏还是？](https://stackoverflow.com/questions/5577316/android-memory-leak-or/5855456#5855456)

[android模拟器上的内存不足错误，但在设备上没有](https://stackoverflow.com/questions/7427587/out-of-memory-error-on-android-emulator-but-not-on-device/7427803#7427803)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-06T17:48:29.293

您可能会保留以前的位图引用。我猜你多次执行此代码，但从未执行`bitmap.recycle()`. 内存将不可避免地耗尽。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T17:47:09.290

看看这个视频。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。不要按照视频中的建议使用 system.gc()。使用 MAT Analyzer 找出内存泄漏。我猜返回的位图太大导致内存泄漏。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T17:50:25.873

看来您有大图像要显示。

您可以下载图像并保存到 sdcard（[示例](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)），然后您可以使用[此](https://stackoverflow.com/a/15136744/1289716) 代码显示 sdcard 中的图像。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-15T13:28:24.783

我之前也遇到过同样的问题..我已经通过使用这个函数来管理它，你可以得到你需要的宽度和高度的比例。

```
private Bitmap decodeFile(FileInputStream f)
{
    try
    {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(f,null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true)
        {
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(f, null, o2);
    } 
    catch (FileNotFoundException e) {}
    return null;
} 
```

并参考[Memory Leak Error Android](https://stackoverflow.com/questions/13248070/memory-leak-error-android/13248108#13248108) and [error in loading images to gridview android](https://stackoverflow.com/questions/13248698/error-in-loading-images-to-gridview-android/13248728#13248728)

# vba - 如何在 VBS 中使用导航来使用 POST 数据

> ID：15254273
> 
> 赞同：2
> 
> 时间：2013-03-06T17:42:00.073
> 
> 标签：vba, post, vbscript, web-scraping

目前我正在尝试编写一个函数来将数据发布到 VBS 中的 IE 窗口。我正在尝试修改我在 VBA 中编写的一个运行良好的函数：

```
Sub IEPostStringRequest(URL As String, FormData As String, WebBrowser As InternetExplorer, TargetName As String)
  'Send the form data To URL As POST request
  Dim bFormData() As Byte
  ReDim bFormData(Len(FormData) - 1)

  bFormData = StrConv(FormData, vbFromUnicode)

  WebBrowser.Navigate URL, 2 + 4 + 8, TargetName, bFormData, _
    "Content-type: application/x-www-form-urlencoded" + Chr(10) + Chr(13)
  WebBrowser.Navigate
End Sub 
```

您向它发送一个 URL、作为 FormData 的查询字符串、一个已经存在的 InternetExplorer 对象和一个目标框架，然后它将发布请求发送到该框架。但是，StrConv 在 VBS 中不起作用，我还没有找到合适的替代品。似乎必须有更好的方法，因为发送 post 请求相当简单。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-28T20:20:59.560

尝试`ADODB.Stream`ActiveX 将字符串转换为二进制字节数组：

```
With CreateObject("ADODB.Stream")
    .Open
    .Type = 2 ' adTypeText
    .Charset = "us-ascii"
    .WriteText FormData
    .Position = 0
    .Type = 1 ' adTypeBinary
    bFormData = .Read
    .Close
End With 
```

# javascript - 将某个范围内的数字线性缩放到新范围

> ID：15254280
> 
> 赞同：0
> 
> 时间：2013-03-06T17:42:22.303
> 
> 标签：javascript, function, scaling

我制作了一个缩放函数，它采用区间中的数字`[oldMin,oldMax]`并将它们线性缩放到 range `[newMin,newMax]`。使用负值时它似乎不起作用。

```
function linearScaling(oldMin, oldMax, newMin, newMax, oldValue){
        var newValue;
        if(oldMin !== oldMax && newMin !== newMax){
            newValue = parseFloat((((oldValue - oldMin) * (newMax - newMin)) / (oldMax - oldMin))  + newMin);
            newValue = newValue.toFixed(2);
        }
        else{
            newValue = error;
        }
        return newValue;
} 
```

当将值从 0 -> 32761 缩放到范围范围 0 -> 10 时，此函数似乎有效。但是，当给定一个新的负范围即 -10 -> 10 时，它似乎没有给出正确的输出

我已尽力在[这个网站](https://stackoverflow.com/questions/13137348/scaling-range-of-values-with-negative-numbers)上找到答案。然而，提出这个问题的人没有提到他最终做了什么来解决这个问题。这个问题说它可能与混合数据类型有关，但是我将所有内容都转换为浮点数我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:32:45.260

现在您已经展示了如何调用函数，我可以重现您的问题 - 即应该映射到负域的引用数字不会。

这似乎是因为 Javascript 对数字和字符串之间的区别非常松散 - 如果不确定如何处理两个数字（因为其中一个似乎是字符串），它假设你想要串联而不是加法。换句话说 - 通过传递`newMin`值`'-10'`而不是`-10`混淆 JS。

举个简单的例子，

```
document.write('1' + '-2'); 
```

生产

```
1-2 
```

然而，

```
document.write(1*'1' + 1*'-2'); 
```

结果是

```
-1 
```

您在其中添加了“可能的串联”的表达式`oldMin`：

```
newValue = (((oldValue - oldMin) * (newMax - newMin)) / (oldMax - oldMin))  + newMin; 
```

将 newMin 设置为 '-10' 时，您可能会`newValue`看起来像`6-10`而不是`-4`, 来举个例子。然后，当您执行 a`parseFloat`时，Javascript 会悄悄地遍历字符串直到减号，然后返回`6`而不是评估表达式并得出`-4`.

为了消除混淆，将每个参数乘以 1 使其成为“真正的数字”：

```
oldMin = 1*oldMin;
oldMax = 1*oldMax;
newMin = 1*newMin;
newMax = 1*newMax;
oldValue = 1*oldValue; 
```

当您在函数声明的开头添加这些行时，一切都会顺利进行 - 无论您如何调用函数。或者只是用`newMin`不在引号中的值来调用它——它是在这个特定实例中造成麻烦的那个。

```
 document.writeln('the new code called with parameter = 100:\n');
  document.writeln(linearScaling('0', '32761', '-10', '10', 100)+'<br>');
  document.writeln('the old code called with parameter = 100:\n');
  document.writeln(linearScalingOld('0.0', '32761.0', '-10.0', '10.0', '100.0')+'<br>');
  document.writeln('the old code called with unquoted parameters:\n');
  document.writeln(linearScalingOld(0.0, 32761.0, -10.0, 10.0, 100.0)+'<br>'); 
```

结果如下：

```
the new code called with parameter = 100: -9.94
the old code called with parameter = 100: 0.06
the old code called with unquoted parameters: -9.94 
```

我希望这能说明问题的原因和解决方案。

# jquery - 使用 HTML 和 CSS（也许还有 jquery？）创建一个切换的、显示的、滑动的 div

> ID：15254283
> 
> 赞同：1
> 
> 时间：2013-03-06T17:42:40.973
> 
> 标签：jquery, css, html, sliding

嘿，所以我正在尝试创建一个网页，我可以在其中单击一个按钮，一个部分将从标题下方滑出，显示内容。当它滑出下面的所有元素时，它也应该向下滑动。

我有一种只使用 HTML 和 CSS 的方法......我的方法是单击它会自行滑出，当您单击并按住它时它会向下滑动。释放单击后，div 会向上滑动。

这是通过放置在滑出 div 上的 CSS 完成的：

```
#slide-out {
  -moz-transition: all 1s ease-in;
  -webkit-transition: all 1s ease-in;
  -o-transition: all 1s ease-in;
  transition: all 1s ease-in;
  z-index: -1;
  height: 73px;
  margin-top: -98px;
  position: relative ;
}

#slide-out:active {
  margin-top: 0px;
} 
```

这是伴随的HTML：

```
<div id="wrapper">
    <div class="section-title">Project</div>    

    <div id="slide-out">
    Test
    </div> <!-- of slide out -->

    <div class="section-title">The Team</div>

</div> 
```

但是我希望这样：

*   高度可以大得多，而不会影响任何后续元素
*   我不需要按住按钮让它滑出（更多的切换机制）
*   我可以单击不是 div 滑出或 div 滑出中包含的任何内容的按钮

非常感谢！

到目前为止我用来做我的代码：[http ://www.1stwebdesigner.com/tutorials/slide-out-panel-css3/](http://www.1stwebdesigner.com/tutorials/slide-out-panel-css3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:46:21.257

为什么要限制自己使用 webkit？Jquery slideDown() 可以做你需要提供更多的跨浏览器兼容性： [http ://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

# .net - 本机和托管大小 dll 大小

> ID：15254287
> 
> 赞同：0
> 
> 时间：2013-03-06T17:42:49.500
> 
> 标签：.net, dll, c++-cli

混合模式的 C++/cli dll 编译成一个比我预期的大的文件，调试时 6800 KB，发布时 3700 KB。我怀疑托管部分不必要的大，因为虽然只有一个 .cpp 是用 /clr 编译的，但很多东西都通过标头获取。Reflector 显示了大量原生结构的 .net 定义，当我尝试在调试器中使用 set next 指令时，会出现两个选项。

我敢打赌，如果我从我的托管 cpp 中包含更少的标头，情况会有所改善，但我想在采取行动之前进行衡量。什么工具可以显示一个 dll 有多少本机和托管字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:56:03.717

一种工具是 DUMPBIN.EXE。打开 Visual Studio 命令工具提示符，然后`dumpbin /?`获取有关选项的信息。命令：

```
dumpbin /headers /clrheader name.dll 
```

会让你开始。

# java - 是否有任何 Java 阻塞队列可以在达到限制时将数据保存到硬盘驱动器

> ID：15254294
> 
> 赞同：2
> 
> 时间：2013-03-06T17:43:35.220
> 
> 标签：java, queue, jms, activemq, datapersistance

我知道我可以使用 JMS 和 ActiveMQ，但我确实需要一些非常简单且没有太多开销的东西。我用 ActiveMQ 做了一些测试，并不喜欢持久队列的性能。

我正在寻找的是任何阻塞队列的基本实现，如果达到某个大小限制，则能够在 HDD 上存储消息（理想情况下）。然后它应该能够从 HDD 读取存储的消息，并在可能的情况下停止向 HDD 写入新消息（在内存使用中恢复）。

我的场景非常简单——消息（json）来自外部世界。我做了一些处理，然后将它们发送到另一个 REST 服务。当目标 REST 服务关闭或我们之间的网络不好时，可能会出现问题。在这种情况下，准备就绪事件存储在队列中，可能会填满所有可用内存。我不想/不需要将每条消息都写入 HDD/DB - 只有那些无法放入内存的消息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-19T11:38:24.200

这段代码应该适合你——它是一个内存中的持久阻塞队列——需要一些文件调整但应该可以工作

```
 package test;

     import java.io.BufferedReader;
     import java.io.BufferedWriter;
     import java.io.File;
     import java.io.FileReader;
     import java.io.FileWriter;
     import java.io.IOException;
     import java.util.ArrayList;
     import java.util.Collections;
     import java.util.LinkedList;
     import java.util.List;

     public class BlockingQueue {

    //private static Long maxInMenorySize = 1L;
    private static Long minFlushSize = 3L;

    private static String baseDirectory = "/test/code/cache/";
    private static String fileNameFormat = "Table-";

    private static String  currentWriteFile = "";

    private static List<Object>  currentQueue = new LinkedList<Object>();
    private static List<Object>  lastQueue = new LinkedList<Object>();

    static{
        try {
            load();
        } catch (IOException e) {
            System.out.println("Unable To Load");
            e.printStackTrace();
        }
    }

    private static void load() throws IOException{
        File baseLocation = new File(baseDirectory);
        List<String> fileList = new ArrayList<String>();

        for(File entry : baseLocation.listFiles()){
            if(!entry.isDirectory() && entry.getName().contains(fileNameFormat)){
                fileList.add(entry.getAbsolutePath());
            }
        }

        Collections.sort(fileList);

        if(fileList.size()==0){
            //currentQueue = lastQueue = new ArrayList<Object>();
            currentWriteFile = baseDirectory + "Table-1";
            BufferedWriter writer = new BufferedWriter(new FileWriter(currentWriteFile));
            while (!lastQueue.isEmpty()){
                writer.write(lastQueue.get(0).toString()+ "\n");
                lastQueue.remove(0);
            }
            writer.close();
        }else{
            if(fileList.size()>0){
                    BufferedReader reader = new BufferedReader(new FileReader(fileList.get(0)));
                    String line=null;
                    while ((line=reader.readLine())!=null){
                        currentQueue.add(line);
                    }
                    reader.close();
                    File toDelete = new File(fileList.get(0));
                    toDelete.delete();
            }

            if(fileList.size()>0){
                BufferedReader reader = new BufferedReader(new FileReader(fileList.get(fileList.size()-1)));
                currentWriteFile = fileList.get(fileList.size()-1);
                String line=null;
                while ((line=reader.readLine())!=null){
                    lastQueue.add(line);
                }
                reader.close();
                //lastFileNameIndex=Long.parseLong(fileList.get(fileList.size()).substring(6, 9));
            }
        }

    }

    private void loadFirst() throws IOException{
        File baseLocation = new File(baseDirectory);
        List<String> fileList = new ArrayList<String>();

        for(File entry : baseLocation.listFiles()){
            if(!entry.isDirectory() && entry.getName().contains(fileNameFormat)){
                fileList.add(entry.getAbsolutePath());
            }
        }

        Collections.sort(fileList);

        if(fileList.size()>0){
                BufferedReader reader = new BufferedReader(new FileReader(fileList.get(0)));
                String line=null;
                while ((line=reader.readLine())!=null){
                    currentQueue.add(line);
                }
                reader.close();
                File toDelete = new File(fileList.get(0));
                toDelete.delete();
        }
    }

    public Object pop(){
        if(currentQueue.size()>0)
            return  currentQueue.remove(0);

        if(currentQueue.size()==0){
            try {
                loadFirst();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        if(currentQueue.size()>0)
            return  currentQueue.remove(0);
        else
            return null;
    }

    public synchronized Object waitTillPop() throws InterruptedException{
        if(currentQueue.size()==0){
            try {
                loadFirst();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if(currentQueue.size()==0)
                wait();
        }
        return currentQueue.remove(0);
    }

    public synchronized void push(Object data) throws IOException{
        lastQueue.add(data);
        this.notifyAll();
        if(lastQueue.size()>=minFlushSize){
            BufferedWriter writer = new BufferedWriter(new FileWriter(currentWriteFile));
            while (!lastQueue.isEmpty()){
                writer.write(lastQueue.get(0).toString() + "\n");
                lastQueue.remove(0);
            }
            writer.close();

            currentWriteFile  = currentWriteFile.substring(0,currentWriteFile.indexOf("-")+1) + 
                    (Integer.parseInt(currentWriteFile.substring(currentWriteFile.indexOf("-")+1,currentWriteFile.length())) + 1);
        }
    }

    public static void main(String[] args) {
        try {
            BlockingQueue bq = new BlockingQueue();

            for(int i =0 ; i<=8 ; i++){
                bq.push(""+i);
            }

            System.out.println(bq.pop());
            System.out.println(bq.pop());
            System.out.println(bq.pop());

            System.out.println(bq.waitTillPop());
            System.out.println(bq.waitTillPop());
            System.out.println(bq.waitTillPop());
            System.out.println(bq.waitTillPop());

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-02T23:04:35.893

好的，如果您使用 RandomAccessFile、MemoryMappedFile 或 MappedByteBuffer.. 或其他等效实现来支持您的队列，那么让您的队列持久化到磁盘将起作用。如果您的 JVM 崩溃或过早终止，您几乎可以依靠您的操作系统将未提交的缓冲区持久保存到磁盘。需要注意的是，如果您的机器事先崩溃了，您可以告别队列中的任何更新，因此请确保您理解这一点。您可以同步磁盘以获得保证的持久性，尽管性能受到严重影响。从更核心的角度来看，另一种选择是复制到另一台机器以实现冗余，鉴于其复杂性，这需要单独的答案。

# api - TeamCity：如何获取当前未运行的每个构建配置的最后构建列表？

> ID：15254299
> 
> 赞同：7
> 
> 时间：2013-03-06T17:43:42.763
> 
> 标签：api, rest, teamcity

我正在使用 TeamCity 7.1。我想获取一个列表，其中包括当前未运行的每个构建配置（构建类型）的最后构建。我发现了这个问题：[TeamCity - 你如何通过rest api获取每个项目的最后完成构建的列表？](https://stackoverflow.com/questions/11089462/teamcity-how-do-you-get-a-list-of-the-last-finished-build-of-each-project-thro)但答案中的 REST URI 对我不起作用。

```
<teamcity-server>/httpAuth/app/rest/builds?locator=sinceBuild:(status:failure) 
```

似乎有效，并为我提供了之前失败后成功的所有构建。

但相反

```
<teamcity-server>/httpAuth/app/rest/builds?locator=sinceBuild:(status:success) 
```

不返回任何构建。

我知道我可以获得所有构建类型，迭代它们并使用最新完成的构建

```
<teamcity-server>/httpAuth/app/rest/buildTypes/id:<build-type-id>/builds/running:false?count=1&start=0 
```

（“count=1&start=0”可能不是必需的）但我不确定我得到的是否真的是最新版本。这也需要对所有构建类型进行多次 REST 调用。一个简洁的解决方案将只使用一个 REST 调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:12:25.523

根据[JetBrains 的 TeamCity REST API 文档](http://confluence.jetbrains.com/display/TW/REST+API+Plugin)，可以通过以下任一方式定位构建：

```
<teamcity-server>/httpAuth/app/rest/buildTypes/id:<build-type-id>/builds/running:false,status:success 
```

或者

```
<teamcity-server>/httpAuth/app/rest/builds/running:false,status:success 
```

`<buildTypeLocator>`如果您尝试在 buildType 下查询某些内容，则必须按照当前的 REST API 为 buildType 加上后缀`<buildTypeLocator> can be id:<btXXX_internal_buildConfiguration_id> or name:<Build_Configuration_name>`（引用自文档）。因此，您必须指定构建 ID 或构建名称。

但是，您所期望的理想方式将是：

```
<teamcity-server>/httpAuth/app/rest/buildTypes/builds/running:false,status:success 
```

[也许，我想你可以在TeamCity 支持](http://devnet.jetbrains.com/community/teamcity)中提出这个问题。

# logging - 如何在 mule logger 组件的消息正文中插入换行符

> ID：15254304
> 
> 赞同：10
> 
> 时间：2013-03-06T17:44:19.973
> 
> 标签：logging, mule, mule-studio

谁能告诉我如何在 mule logger 组件的消息中插入新行？

例如，我在记录器的消息中有以下内容：

```
Payload is: #[payload] 
Inbound Headers:  #[headers:INBOUND:*] 
Outbound Headers:  #[headers:OUTBOUND:*]  
Exceptions:  #[exception] 
```

我想在上述每一行之后插入一个新行。我试过只在每行的末尾添加 \n ，但这没有用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T18:20:46.733

使用 MEL：

```
 <logger
        message="#['Payload is:'+payload+'\nInbound Headers: '+message.inboundProperties.entrySet()+'\nOutbound Headers: '+message.outboundProperties.entrySet()+'\nExceptions: '+exception]"
        level="INFO" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T18:19:05.300

你可以这样做：

```
Payload is: #[payload] #[System.getProperty('line.separator')] Inbound Headers: ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T17:31:00.943

使用表达式转换器：

```
<expression-transformer expression="#[message.payload = message.payload + System.getProperty('line.separator')]" doc:name="Append CRLF"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-14T04:14:39.557

有几种方法可以做到这一点：

1）使用：#[System.getProperty('line.separator')]

2) 使用：#['\n'] 例如：#['Hello\n'+payload+'Welcome to \n new line']

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-04T09:55:47.457

我们可以为您提供以下格式

```
#['\n'] #['\n']  #['\n'] #['\n']  #[payload] #[System.getProperty('line.separator')] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-19T01:07:19.760

//这应该工作。在 mule 3.9 CE 中测试

```
<logger message="Payload is #[message.payloadAs(java.lang.String)]  #[System.lineSeparator()]  INBOUND HEADERS =  #[headers:inbound:*]" level="INFO" doc:name="Logger"/> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-08-12T07:50:53.713

在文字模式下试试这个。#["\n"] #[ 有效载荷]

# prolog - 用列表的第 N 个值统一一个术语

> ID：15254307
> 
> 赞同：0
> 
> 时间：2013-03-06T17:44:28.073
> 
> 标签：prolog

我在实现 Prolog 谓词时遇到了麻烦`vector_reference(L,N,V)`，因此当给定列表“L”和索引“N”时，它将 V 与列表的第 N 个值统一起来。

示例打印输出如下：

```
?- vector_reference([2,3,4], 3, V).
V = 4

?- vector_reference([2, [2,3],’hello’]),2,V).
V = [2,3] 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:07:57.020

在标准库中，`library(lists)`（自动加载，您不需要做任何事情）有两个谓词：`nth0/3`并且`nth1/3`完全符合您的需要。例如：

```
?- nth1(2, [2,[2,3],hello], V).
V = [2, 3]. 
```

顺便说一句，SWI-Prolog 网页有一个非常有用的搜索功能。在那里打字`nth`会给你答案。

# php - jquery ajax php调用无法正常工作

> ID：15254313
> 
> 赞同：1
> 
> 时间：2013-03-06T17:44:48.287
> 
> 标签：php, jquery, ajax

我从另一个有效的 ajax 调用复制了这个 ajax 调用，但我不知道为什么它不成功。这是代码：

```
$.ajax({
    type: "POST",
    url: "addTune.php",
    data: {
        database: setlist,
        name: tune,
        orderno: orderno,
        midi: midi
    },
    error: function (e) {
        alert("The PHP Call failed!  hmmm");
        alert(e.status);
    },
    success: function (response) {
        alert(response);
    }
}); 
```

我每次都得到错误函数。是否有任何明显的拼写错误或其他愚蠢的错误？

编辑：试图通过以下方式追查错误：

```
$.ajax({

                type: "POST",
                url: 'addTune.php',
                data: {database : setlist, name : tune, orderno : orderno, midi : midi},
                error: function(e){
                    alert("The PHP Call failed!  hmmm");
                    alert(e.status);
                $.ajaxSetup({
                    "error": function(jqXHR, status, thrownError) {
                        alert('error');
                        var responseText = jQuery.parseJSON(jqXHR.responseText);
                        console.log(responseText);
                    }
                    });
                },
                success:  function(response){
                    alert(response);

                }

            });

        }); 
```

更新：我只能用命令行添加一行。关于我可以做些什么来尝试进一步缩小范围的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:51:28.763

i am no pro at this but maybe using single quote instead of double quotes? because i'm working on a project were i also have to do ajax calls and i use single quotes

i'm just suggesting something, not really good at this

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:54:56.000

如果您进入错误回调，那么您正在调用的页面出现错误，而不是 js 代码。检查是否到达 php 页面。如果是检查 php 代码是否返回有效结果。

来自 jquery 文档。

错误

> 类型：Function(jqXHR jqXHR, String textStatus, String errorThrown) 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

# android - Android：尝试为不同的屏幕尺寸提供不同的布局

> ID：15254314
> 
> 赞同：-3
> 
> 时间：2013-03-06T17:44:54.127
> 
> 标签：android

我正在尝试为不同的屏幕尺寸设置不同的屏幕布局。在这个小组中，有人谈到将布局放在不同的文件夹中，android 会选择正确的。

现在总是选择相同的布局。我有一个小的 Vergin Andorid 智能手机和一个宏碁平板电脑。在 android 智能手机中，按钮占据了屏幕的宽度，并且正在加载来自 layout-mdpi 的布局。

在我的平板电脑上，文件是从文件夹 layout-mdpi 加载的，按钮只占屏幕宽度的一半。

目前我有以下文件夹：

```
布局
布局-hdpi
布局-ldpi
布局-mdpi
布局-xhdpi。

```

布局是相同的，只是我将 Vol 的文本更改为 vol1、vol2、vol3、vol4，所以我知道文件来自哪个文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:49:48.143

在这里你可以找到答案。我希望这会有所帮助。

[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:35:32.733

我按密度像素值拆分布局文件夹。例如，在大型平板电脑屏幕上，我会使用“layout-sw720dp”，而在中型平板电脑上，我会使用“layout-sw600dp”。如果您需要纵向和横向的不同布局结构，例如，您可以为“layout-sw720dp-land”和“layout-sw720dp-port”添加一个文件夹

# ruby-on-rails - 如何按列对 Rails ActiveRecord 结果进行分组？

> ID：15254315
> 
> 赞同：4
> 
> 时间：2013-03-06T17:44:54.253
> 
> 标签：ruby-on-rails, ruby

我正在开发一些时间跟踪应用程序，但遇到了一个我不知道如何解决的问题。我有一个`Task`模型和一个`Client`模型。每个任务都属于一个客户端。

```
class Task < ActiveRecord::Base
  belongs_to :client
  attr_accessible :client_id, :description, :start, :end

  scope :yesterday, -> {
    where('start > ?', Date.yesterday.to_time).where('start < ?', Date.today.to_time)
  }
end

class Client < ActiveRecord::Base
  attr_accessible :name
  has_many :tasks
end 
```

现在，我正在显示任务完成日期范围内的任务列表，并按完成时间排序。我想显示相同的列表，但按客户端分组，并按客户端名称排序。这是我想做的事情：

```
<div id="yesterday_summary">
  <% @yesterday_clients.each do |client| %>
    <h2><%= client.name %></h2>
    <ul>
      <% client.tasks.each do |task| %>
        <li><%= task.description %></li>
      <% end %>
    </ul>
  <% end %>
</div> 
```

在我的控制器中，我目前有：

```
@tasks_yesterday = Task.yesterday
@yesterday_clients = group_tasks_by_client @tasks_yesterday 
```

在该`group_tasks_by_client`方法中，我有一些非常丑陋的代码，目前甚至无法正常工作：

```
 def group_tasks_by_client(tasks)
    clients = []
    tasks.collect(&:client).each do |client|
      clients << {client.id => client} unless clients.has_key? client.id
    end
    clients_with_tasks = []
    clients.each do |client|
      c = Struct.new(:name, :tasks)
      cl = c.new(client.name, [])
      tasks.each do |task|
        cl.tasks << task if task.client_id = client.id
      end
      clients_with_tasks << cl
    end
    clients_with_tasks
  end 
```

我确信有一个干净、简单、rails 的方式来做到这一点，但我不知道怎么做。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:48:40.540

您可以让数据库为您执行此操作，如下所示：

```
@yesterdays_clients = Client.includes(:tasks).merge(Task.yesterday).order(:name) 
```

除了更清洁之外，它更高效，因为它可以一次性获取所有客户和任务。原始代码需要进行 N+1 次查询，因为没有预先加载。

顺便说一句，您也可以使您的范围更简单：

```
scope :yesterday, -> { where(:start => (Date.yesterday.to_time...Date.today.to_time)) } 
```

# android - 片段的 onActivityCreated 中的 setAdapter() 在点击后退按钮时导致“IllegalStateException：尚未创建内容视图”

> ID：15254319
> 
> 赞同：2
> 
> 时间：2013-03-06T17:45:04.280
> 
> 标签：android, android-listfragment

当我的应用程序在单列模式下运行时，点击**ListFragment A**中的项目会使用对主 Activity 的回调以编程方式启动**Fragment B**以显示其他信息。我以这种方式启动**Fragment B ：**

```
// Create the new fragment and set an argument pointing to the entry's ID in the database
FragmentEntryDetails newFragment = new FragmentEntryDetails();
Bundle args = new Bundle();
args.putInt("entryID", entryID);
newFragment.setArguments(args);

// Specify where in the view we want to place the fragment, then add it to the backstack so the user can
// return to the previous fragment
FragmentTransaction transaction = getFragmentManager().beginTransaction();
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);
// Commit the transaction
transaction.commit(); 
```

当我点击 Back 按钮返回**ListFragment A**中的搜索结果列表时，应用程序崩溃并出现以下 IllegalStateException：

```
03-06 09:21:53.273: E/AndroidRuntime(32760): FATAL EXCEPTION: main
03-06 09:21:53.273: E/AndroidRuntime(32760): java.lang.IllegalStateException: Content view not yet created
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.ListFragment.ensureList(ListFragment.java:386)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.ListFragment.getListView(ListFragment.java:280)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at com.test.dictApp.FragmentSearch.onActivityCreated(FragmentSearch.java:98)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.Fragment.performActivityCreated(Fragment.java:1703)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.BackStackRecord.popFromBackStack(BackStackRecord.java:764)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.FragmentManagerImpl.popBackStackState(FragmentManager.java:1484)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:490)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.Activity.onBackPressed(Activity.java:2167)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.Activity.onKeyUp(Activity.java:2145)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.Activity.dispatchKeyEvent(Activity.java:2375)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1847)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3701)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3651)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2818)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.os.Looper.loop(Looper.java:137)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-06 09:21:53.273: E/AndroidRuntime(32760):    at dalvik.system.NativeStart.main(Native Method) 
```

错误指向**ListFragment A**的 onActivityCreated() 函数中的 setAdapter() ：

```
@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    // Tell the main activity that this fragment has menu elements to declare
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true);

    adapter = new FragmentSearchCursorAdapter(getActivity(), null, 0);
    // Assign our CursorAdapter
    getListView().setAdapter(adapter);

    Bundle args = getSQLArgs("dictionary");
    // Load up the cursor that will handle the SQL grunt work
    getLoaderManager().initLoader(SEARCH_LOADER_ID, args, this);
} 
```

Why is getListView().setAdapter() causing a problem? According to the Fragment lifecycle, the listView should be available for manipulation. Should I only be setting the adapter if it hasn't already been set?

**Edit: I figured it out, see my Answer below.**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T21:14:16.260

I just recently earned enough credit to answer my own questions, so I've decided to turn my comments into an actual Answer.

The solution was to move the assignment of my FragmentSearchCursorAdapter to ListFragment A's onCreateView() method, and then use setListAdapter() instead of getListView().setAdapter(), as below:

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    // Specify the fragment layout file for this fragment class
    View view = inflater.inflate(R.layout.fragment_search, container, false);
    // Assign our CursorAdapter
    adapter = new FragmentSearchCursorAdapter(getActivity(), null, 0);
    setListAdapter(adapter);

    return view;
} 
```

# python - 如何告诉并行python进程在哪个文件夹中搜索模块？

> ID：15254322
> 
> 赞同：0
> 
> 时间：2013-03-06T17:45:18.863
> 
> 标签：python, sys, parallel-python

我正在一个计算机集群上工作，它在通常的文件夹 (/usr/lib64/....) 中安装了 NumPy 1.4.1。因为我想使用 NumPy 1.7.0，所以我已经安装了它`/.../myPath`，并添加`export PYTHONPATH=/.../myPath`到我的`.bashrc`，这样使用`import numpy`将自动加载 NumPy 1.7.0。这工作正常，除了使用[并行 python](http://www.parallelpython.com/)时的特殊性。为了在每个进程中加载​​正确的 NumPy 模块，我修改`sys.path`了 ，因为这些进程似乎忽略了该`$PYTHONPATH`变量：

```
import pp
import numpy

def try2():
  sys.path.insert(0,'/.../myPath')
  import numpy
  a=numpy.random.rand(4,4)
  return numpy.__version__

print numpy.__version__

job_server = pp.Server(2, ppservers=() )
jobs=[job_server.submit(try2,(),(),("sys",)),job_server.submit(try2,(),(),("sys",))]
for job in jobs:
  print job() 
```

输出如所愿：

```
1.7.0
1.7.0
1.7.0 
```

但是，当我用这样的`ndarray`参数调用它时

```
import pp
import numpy

def try2(a):
  sys.path.insert(0,'/.../myPath')
  import numpy
  return numpy.__version__

print numpy.__version__

a=numpy.random.rand(4,4)
job_server = pp.Server(2, ppservers=() )
jobs=[job_server.submit(try2,(a,),(),("sys",)),job_server.submit(try2,(a,),(),("sys",))]
for job in jobs:
  print job() 
```

输出变为

```
1.7.0
1.4.1
1.4.1 
```

我的解释：子进程一被调用就会收到一个参数，因此在我有机会修改之前`numpy.ndarray`搜索一个名为的模块。有想法该怎么解决这个吗？`numpy``sys.path`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:55:42.467

鉴于您在给定某个包的情况下与用户和系统范围的模块区分开来的特殊要求，我建议您考虑设置[virtualenv以在](https://pypi.python.org/pypi/virtualenv)[隔离环境](http://mitchfournier.com/2010/06/25/getting-started-with-virtualenv-isolated-python-environments/)中运行您的所有代码（引用链接）：

```
sudo pip install virtualenv
(or, sudo easy_install virtualenv if you don’t use pip)
(or, easy_install --install-dir ~/site-packages/ virtualenv on a shared host)
mkdir ~/virtualenvs   (a directory for your isolated environments)
virtualenv ~/virtualenvs/mysite.com --no-site-packages
(--no-site-packages isolates your environment from the main site-packages directory)
cd ~/virtualenvs/mysite.com/bin
source activate  (activates your new environment) 
```

这将有助于节省路径注入的需要。

# jquery - jQuery 方向与 $(window).resize 哎呀

> ID：15254324
> 
> 赞同：0
> 
> 时间：2013-03-06T17:45:23.097
> 
> 标签：jquery, orientation, window-resize, landscape-portrait

我正在努力实现以下目标：我正在开发的网站在横向模式下效果更好。我希望当设备处于纵向时显示一条消息，而在横向时不显示消息。

我在 ready() 函数中编写了以下代码：

```
 $(window).resize( function(){

    var height = $(window).height();
    var width = $(window).width(); 

    if(width>height) {
        // Landscape
        $("#landscape").css('display','none');
    }   
    else {
        // Portrait
        $("#landscape").css('display','block');
        $("#landscape").click(function(){
            $(this).hide();
        });
    } 
```

但是当页面加载（或我刷新它）时，它总是显示消息（因为它应该只在纵向模式下）。如果我然后更改浏览器大小，则代码开始工作并相应地显示/隐藏消息。我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:55:45.270

调用`.resize()`后`$(window).resize()`：

```
$(window).resize( function(){

  var height = $(window).height();
  var width = $(window).width(); 

  if(width>height) {
    // Landscape
    $("#landscape").css('display','none');
  } else {
    // Portrait
    $("#landscape").css('display','block');
    $("#landscape").click(function(){
        $(this).hide();
    });
  }
}).resize(); // <----this way 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:58:20.050

ready() 函数只会在加载时触发一次。您需要将其置于 ready 函数之外，并在加载时调用它一次，然后在窗口已重新调整大小时工作。

此外，在使用 $(window).resize 时，请确保设置时间延迟以防止多个并发发生，这已被多次介绍：

[JavaScript/JQuery: $(window).resize 调整大小完成后如何触发？](https://stackoverflow.com/questions/2854407/javascript-jquery-window-resize-how-to-fire-after-the-resize-is-completed)

[jQuery - 如何等待“调整大小”事件的“结束”然后才执行操作？](https://stackoverflow.com/questions/5489946/jquery-how-to-wait-for-the-end-or-resize-event-and-only-then-perform-an-ac)

不确定您的项目范围是什么，但仅根据方向处理项目通常被认为是一种不好的做法；特别是在您的横向功能（宽度>高度）中。如果页面宽度跨度为 1280，高度为 500，该怎么办？除非您还使用设备检测，否则您的逻辑并不总是成立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:47:52.077

当 DOM 准备好时触发你的函数。

```
$(function() {
    $(window).resize();
}); 
```

# node.js - 来自 heroku 的 https 请求

> ID：15254327
> 
> 赞同：4
> 
> 时间：2013-03-06T17:45:28.123
> 
> 标签：node.js, heroku, https

我想通过 https 协议从 vk.com api 获取数据。像这样（[api vk docs](http://vk.com/developers.php?oid=-1&p=%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BA_API)）：

```
var https = require('https');

https.get('https://api.vk.com/method/users.get?access_token=' + global['access_token'], function (d) {
  var chunk = '';
  d.on('data', function (data) {
    chunk += data;
  });

  d.on('end', function () {
    console.log(chunk);
  });
}).on('error', function (e) {
  console.error(e);
}); 
```

但在heroku日志中我看到

```
Error: Protocol:https: not supported. 
```

那么，我怎样才能得到这些数据呢？我的应用程序在 http 协议中工作，这是配置：

```
var express = require('express'),
  routes = require('./routes');

var app = express();

    app.configure(function () {
      app.set('port', process.env.PORT || 3000);
      app.set('views', __dirname + '/views');
      app.set('view engine', 'jade');
      app.use(express.favicon());
      app.use(express.logger('dev'));
      app.use(express.bodyParser());
      app.use(express.methodOverride());
      app.use(app.router);
      app.use(express.static(path.join(__dirname, 'public')));
    });

    app.configure('development', function () {
      app.use(express.errorHandler());
    });

    app.get('/', routes.index);

    http.createServer(app).listen(app.get('port'), function () {
      console.log("Express server listening on port " + app.get('port'));
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T22:08:02.870

Node v0.8.9 添加了使 https.get() 接受 URL 的功能。

除非您有非常具体的原因，否则请在 package.json 中的引擎下使用“node”：“0.10.x”。

也试试：

`var options = { 主机：'api.vk.com'，端口：443，路径：'/method/users.get?access_token=' + global['access_token'] };

https.get('选项'，函数(....`

# css - HTML/Prestashop，将类别图像向左移动

> ID：15254332
> 
> 赞同：0
> 
> 时间：2013-03-06T17:45:40.990
> 
> 标签：css, prestashop

在普通的 prestashop 主题中，类别页面顶部有一个框，用于对整个类别进行描述。该框有一个轮廓，并包含一张图片和一些文字。

文本通常位于图像下方，因此该块占用了大量空间。我想将图像浮动到左侧，并将文本环绕在它周围，所以它更小。

我怀疑这很容易，因为图像和文本都在 div 中，而且它们都在另一个 div 中作为大纲。所以我只是将 float:left 添加到图像的 DIV 中。

图像向右移动，文字也流动起来。但是，周围的 DIV 没有正确调整大小，因此图像现在立即运行。

如何让封闭的 DIV 正确调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:54:16.583

您需要强制包含 div 包装浮动内容。您可以通过几种方式做到这一点，一种是添加溢出：隐藏。

```
.content_scene_cat {overflow:hidden;} 
```

# java - OpenId+JSF 将用户重定向到他登录的页面？

> ID：15254334
> 
> 赞同：6
> 
> 时间：2013-03-06T17:45:50.297
> 
> 标签：java, jsf, openid, web.xml

我正在将 OpenId4Java 与 JSF 应用程序一起使用，我在 web.xml 中添加了类似这样的安全约束。

```
<security-constraint>
     <web-resource-collection>
       <web-resource-name>Restricted</web-resource-name>
       <url-pattern>/core/*</url-pattern>
       <http-method>GET</http-method>
       <http-method>POST</http-method>
     </web-resource-collection>
</security-constraint>
<login-config>
  <auth-method>FORM</auth-method>
  <form-login-config>
    <form-login-page>/user/login.xhtml</form-login-page>
    <form-error-page>/user/logout.xhtml</form-error-page>
  </form-login-config>
</login-config> 
```

现在当应用程序启动并且用户想要访问

> [http://www.somehost:8080/myapp/core/abc.xhtml](http://www.somehost:8080/myapp/core/abc.xhtml)

**在web.xml**的帮助下，我现在可以向用户显示登录页面**了**

> [http://www.somehost:8080/myapp/core/abc.xhtml](http://www.somehost:8080/myapp/core/abc.xhtml)

或者如果用户来自

> [http://www.somehost:8080/myapp/core/xyz.xhtml](http://www.somehost:8080/myapp/core/xyz.xhtml)

这个 url 然后在成功登录后用户将进入这个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:13:40.430

为了获取用户尝试访问的原始 url，请尝试使用变量[RequestDispatcher.FORWARD_REQUEST_URI](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#FORWARD_REQUEST_URI)。

仅当您从其他受限页面重定向到登录页面时，此变量才可用。所以，请记住有一些默认的 url，以防用户直接点击登录页面。

正如 rrufai 指出的，一旦用户请求的原始 url 可用，您可以按照[本文](http://crisdev.wordpress.com/2011/03/23/openid4java-login-example)中提到的步骤在身份验证完成后重定向到该 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:25:16.473

使用重定向在下一页转发控制。

```
String returnToUrl = returnToUrl("/nextPage.xhtml");
FacesContext.getCurrentInstance().getExternalContext().dispatch(returnToUrl); 
```

看看这个：

[http://blog.enterpriselab.ch/tdmarti/2011/04/06/openid-in-a-web-application-based-on-java-ee-and-jsf-2-0/](http://blog.enterpriselab.ch/tdmarti/2011/04/06/openid-in-a-web-application-based-on-java-ee-and-jsf-2-0/)

**更新：**

要确定从哪个页面发出请求，请参阅以下帖子：

[dispatcher.forward（request，response）后如何从servlet中的请求中获取上一页URL](https://stackoverflow.com/questions/8592929/how-to-get-the-previous-page-url-from-request-in-servlet-after-dispatcher-forwar)

[多个servlet转发后如何从servlet/jsp获取原始请求url](https://stackoverflow.com/questions/5450066/how-to-get-the-original-request-url-from-a-servlet-jsp-after-multiple-servlet-fo)

[http://www.coderanch.com/t/361942/Servlets/java/Track-Jsp-request-coming-Servlet](http://www.coderanch.com/t/361942/Servlets/java/Track-Jsp-request-coming-Servlet)

# c - 使用 C 进行自动化 2D 机器运动

> ID：15254338
> 
> 赞同：0
> 
> 时间：2013-03-06T17:46:07.233
> 
> 标签：c, linux-device-driver, embedded-linux

我有这个小项目，那是一台在 2 维中移动的机器，一次“行走”1 个街区。所以我从编程开始，我想按顺序打印数字，就像机器在运动一样。

像这样：

XOOOO

哦哦哦

哦哦哦

哦哦哦

那么下一步将是

哦哦哦

XOOOO

哦哦哦

哦哦哦

然后一直走到列的末尾，所以它移动到另一列并进行运动后院，（或者它可以去新列的第一个点并重复运动）

我正在做的是一个矩阵，并试图制作一个有限制的 for 循环，但它不起作用。我也是 C 语言的新手。

请记住，对于编程，我只想逐个打印每个位置。

另一个问题：我正在考虑买一块开发板来做这个，你怎么看？=) 我应该使用 linux 开发驱动程序吗？

非常感谢。

编辑：这是我崩溃的代码，请注意新手问题=S

```
#include <stdio.h>
#include <iostream.h>

int main()
{
    int num[625];
    int x,y,count;
    do
    { 
    printf("\n Inicializando... ");
    num[625]=num[count];
    count++;
    } 
    while (num[count]!= 25);
    if (num[count]=25)
    {
        do
        { 
        printf("\n Inicializando... ");
        num[625]=num[count];
        count++;
        } while (num[count]!= 25);

    }
    for (count=0;count<625;count++)
    printf (" %d",num[count]);

    system("pause");
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:20:12.137

这可能不是您问题的实际答案，但是：

```
int num[625];
...
    num[625]=num[count];
... 
```

将某些内容存储在实际不存在的数组位置中。而且 C 是一种相当宽松的语言，您只是在数组之后立即写入其他内容 - 可能是`x`. 这很可能不是您想要做的。

对这里的代码的一些进一步评论：

```
#include <stdio.h>
#include <iostream.h> 
```

`stdio.h`与`iostream`(`iostream.h`非常旧 - 如果您使用的是符合标准的编译器，则使用`iostream`- 但是，由于您还将其标记为 C，而不是 C++，我建议将其完全删除。

```
int main()
{
    int num[625];
    int x,y,count;
    do
    { 
    printf("\n Inicializando... ");
    num[625]=num[count]; 
```

请注意，除了我上面关于在数组外部寻址的评论之外，`num[count]`从未设置过 - 它具有该内存中恰好存在的任何值 - 这很可能只是整数范围内的任何值。

```
 count++;
    } 
    while (num[count]!= 25); 
```

由于`num[count]`未初始化，它可能永远不会是 25。一旦`count`变得足够高，它可能会崩溃。

```
 if (num[count]=25)
    {
        do
        { 
        printf("\n Inicializando... ");
        num[625]=num[count];
        count++;
        } while (num[count]!= 25);

    }
    for (count=0;count<625;count++)
    printf (" %d",num[count]); 
```

我从来都不喜欢一个函数中超过两个，甚至三个连续的空行。

```
 system("pause");
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:40:32.373

试试这个算法。

Change NR By will 它是行数或列数。

```
#include<stdio.h>

#define NR 5

int main()
{
   int i,j,loop;
   for( loop=0; loop < NR*NR; loop++)
   {
      printf("Loop %d\n",loop);
      for(i=0;i< NR; i++)
      {
         for (j=0;j<NR;j++)
         {
            if ( loop == NR*j+i )  printf("X ");
            else                  printf("0 ");
         }
         printf("\n");
      }
      printf("\n");
  }
} 
```

# flash-media-server - Cirrus 或 Adob e Media Server

> ID：15254340
> 
> 赞同：0
> 
> 时间：2013-03-06T17:46:08.417
> 
> 标签：flash-media-server, adobe-cirrus

使用 Cirrus 或 FMS 有什么区别？各自的优缺点是什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:10:52.930

此链接可能会有所帮助[http://labs.adobe.com/technologies/cirrus/](http://labs.adobe.com/technologies/cirrus/)
`Unlike Adobe Media Server,Cirrus does not support media relay, shared objects, scripting, etc. So by using Cirrus, you can only develop applications where Flash Player endpoints are directly communicating with each other.`

# android - Android：SQLite，如何从多个表中选择计数（*）？

> ID：15254341
> 
> 赞同：1
> 
> 时间：2013-03-06T17:46:11.197
> 
> 标签：android, sql

如果我使用游标，则无法将“cursor.getString”与以下代码一起使用。我发现“Cursor.count = 0”。

但是如果我在 adb shell 中执行这段代码，我可以得到结果“10|15|”。

我可以知道原因或如何实现我的目标吗？非常感谢。

```
select (select count(*) from table1) as count1, (select count(*) from table2) as count2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:55:33.263

所以通常使用两个查询

```
String[] queries = {"select count(*) from table1",
                    "select count(*) from table2"}; 
```

然后使用`Cursor`并执行查询和获取器以获取值。

```
Cursor c = null;
int index = 0;
int totalCount = 0;
while (index < queries.length) {
   c = db.rawQuery(queries[index], null);
   if (c.moveToFirst()) {
      totalCount += c.getInt(0);
   }
   index++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:50:55.677

你在用光标做什么？你怎么得到它？（内容解析器、执行原始 sql 等）。

正如相关链接清楚地显示的那样，有[更多正确](https://stackoverflow.com/questions/3094257/android-sqlite-cursor-out-of-bounds-exception-on-select-count-from-table?rq=1)的方法可以进行选择计数。

# python - db.StringProperty 但属性偶尔是 datastore_types.Text？

> ID：15254344
> 
> 赞同：3
> 
> 时间：2013-03-06T17:46:16.310
> 
> 标签：python, google-app-engine, google-cloud-datastore

在任何情况下，GAE 数据存储可能会将属性类型从更改`StringProperty`为`TextProperty`（实际上忽略模型定义）？

考虑以下情况（简化）：

```
class MyModel(db.Model):
    user_input = db.StringProperty(default='', multiline=True) 
```

我的数据存储区中此模型的某些实体实例的数据类型为`TextProperty`for 'user_input' （而不是 simple `str`），因此未编入索引。我可以通过检索实体、设置`model_instance.user_input = str(model_instance.user_input)`然后将实体放回数据存储区来解决此问题。

我不明白的是，当此模型没有更改时，这仅发生在某些实体上。db.model 的属性的“类型”是否可以从`StringProperty`to覆盖`TextProperty`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-13T14:35:43.917

**如果属性没有被索引**，至少`ndb`有一个包含 Unicode 的 StringProperties 的特殊代码路径 。在这种情况下，它变成了一个文本属性：相关的片段是：

 **```
if isinstance(value, str):
  v.set_stringvalue(value)
elif isinstance(value, unicode):
  v.set_stringvalue(value.encode('utf8'))
  if not self._indexed:
    p.set_meaning(entity_pb.Property.TEXT) 
```

我无法在 Python 端观察到这一点（请参阅[db.StringProperty，但属性偶尔是 datastore_types.Text？](https://stackoverflow.com/questions/15254344/db-stringproperty-but-property-is-occasionally-datastore-types-text#)），但我在数据存储区中看到它，并且在将数据存储区加载到 BigQuery 时引起了头痛。

所以只能使用：

*   字符串属性（索引=真）
*   文本属性（）

避免`StringProperty(indexed=False)`如果您可能将混合值`unicode`和`str`值写入属性 - 因为它往往会发生在外部数据中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:16:45.993

原来有一种方法可以绕过模型定义中的属性类型（这就是我们的例子）！以下自包含示例在交互式控制台中运行并演示了该错误。本质上，`setattr`如果您分配不同类型的现有属性，则绕过属性的类型：

```
from google.appengine.ext import db
class TestModel(db.Model):
    string_type = db.StringProperty(default='', multiline=True)
    text_type = db.TextProperty()

some_instance = TestModel()
some_instance.text_type = 'foobar'
setattr(some_instance, 'string_type', some_instance.text_type)
some_instance.put()

retrieved_instance = db.get(some_instance.key())

print id(retrieved_instance.string_type) #10166414447674124776
print id(retrieved_instance.text_type) #10166414447721032360

print type(retrieved_instance.string_type) #OOPS: string_type is now Text type! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:13:13.633

长度限制`StringProperty`为 500 个字符。我不确定，但如果超过限制，数据存储区可能会将 a 转换`StringProperty`为 a 。`TextProperty`

话虽如此，我怀疑 GAE 是否会隐式地将索引属性更改为非索引属性。但这是我能想到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:00:10.803

通过使用 setattr `setattr(some_instance, 'string_type', some_instance.text_type)`，您实际上已经使名为 string_type 属性的实例属性实际上指向 text_type 属性。所以两个名字一个属性

```
The db, ndb, users, urlfetch, and memcache modules are imported.
> from google.appengine.ext import db
> class TestModel(db.Model):
...    string_type = db.StringProperty(default='', multiline=True)
...    text_type = db.TextProperty()
... 
> 
> some_instance = TestModel()
> some_instance.text_type = 'foobar'
> setattr(some_instance, 'string_type', some_instance.text_type)
> print type(some_instance.string_type)
<class 'google.appengine.api.datastore_types.Text'>
y> repr(some_instance.string_type)
"u'foobar'"
> id(some_instance.string_type)
168217452
> id(some_instance.text_type)
168217452
> some_instance.string_type.__class__
<class 'google.appengine.api.datastore_types.Text'>
> some_instance.text_type.__class__
<class 'google.appengine.api.datastore_types.Text'>
> dir(some_instance.text_type.__class__) 
```

注意上面两个属性的id。

因此，您有效地重新绑定了实例级属性定义，然后将此修改后的模型与字段的类型一起写入数据存储区。

如果你想使用 setattr （虽然在这个人为的例子中看不到为什么）你应该首先从属性`setattr(some_instance.string_type,TestModel.string_type.get_value_for_datastore(some_instance) )`中获取值来获取要分配的值，而不是重新绑定实例属性。**

# django - 用于静态页面的 Django 站点地图

> ID：15254345
> 
> 赞同：0
> 
> 时间：2013-03-06T17:46:18.103
> 
> 标签：django

我正在为我的新站点创建站点地图。

该网站仅包含静态页面。

我试图让这个片段工作：

```
class StaticSitemap(sitemaps.Sitemap):
"""Return the static sitemap items"""
priority = 0.5

def __init__(self, patterns):
    self.patterns = patterns
    self._items = {}
    self._initialize()

def _initialize(self):
    for p in self.patterns:
        if getattr(p, 'name', None) is not None:
            print p.name
            self._items[p.name] = self._get_modification_date(p)

def _get_modification_date(self, p):
    template = getattr(p, 'template', None)
    template_path = self._get_template_path(template)
    mtime = os.stat(template_path).st_mtime
    return datetime.datetime.fromtimestamp(mtime)

def _get_template_path(self, template_path):
    for template_dir in settings.TEMPLATE_DIRS:
        path = os.path.join(template_dir, template_path)
        if os.path.exists(path):
            return path

    return None

def items(self):
    return self._items.keys()

def changefreq(self, obj):
    return 'monthly'

def lastmod(self, obj):
    return self._items[obj]

def location(self, obj):
    return reverse(obj) 
```

我从这一行得到了模板上的这个 KeyError：`template = p.default_args['template']`

如何获取模板名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:05:08.443

让它工作。刚刚将模板添加到每个 url 的 kwargs

# python - 节点创建期间的drupal 7触发脚本

> ID：15254348
> 
> 赞同：3
> 
> 时间：2013-03-06T17:46:25.313
> 
> 标签：python, drupal-7

我正在使用自定义内容类型在 Drupal 7 中创建一个站点。在创建节点时，我需要以某种方式触发 python 脚本（由其他人开发）的执行，这将：

*   从当前创建的节点传递用户输入的值
*   运行将从另一个站点检索数据的脚本
*   将检索到的数据插入到当前正在创建的节点上的字段中

我不知道从哪里开始。规则模块看起来很有希望，因为我可以定义**何时**做某事**，**但我不知道如何调用脚本、发送数据或将检索到的数据插入到我创建的节点中。

另一个想法是生成新节点的 XML 文件，以某种方式调用脚本，并让 Feeds 模块解析更新的 XML 文件（包含检索到的数据）以更新节点。

任何帮助将不胜感激。我在我头上这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:46:41.977

您可以在自定义模块中使用 hook_node_presave() 来实现这一点。

在此示例中，您的模块已命名`my_module`，您的自定义内容类型`$node->type`为`custom_type`.

您发送到 python 脚本的节点字段名称是：`field_baz`

您的 python 脚本是：`/path/to/my/python_script.py`它需要一个参数，即`field_baz`

要由您的 python 脚本的返回填充的其他节点字段是`field_data_foo`和`field_data_bar`

不清楚 python 脚本的输出是什么，所以这个例子模拟了输出是一个 JSON 字符串。

该示例使用 hook_node_presave() 在保存 $node 对象之前对其进行操作。这是在节点数据写入数据库之前处理的。节点对象被视为引用，因此对对象的任何修改都是在保存时将使用的。

逻辑会检查这一点，`!isset($node->nid)`因为您提到这仅在创建节点时发生。如果在节点更新时也需要发生这种情况，只需删除该条件即可。

```
/**
 * Implements hook_node_presave().
 */
function my_module_node_presave($node) {
  if ($node->type == 'custom_type' && !isset($node->nid)) {

    // Get the user value from the node.
    // You may have to clean it so it enters the script properly
    $baz = $node->field_baz[LANGUAGE_NONE][0]['value'];

    // Build the command string
    $cmd = '/path/to/my/python_script.py ' . $baz;

    // Execute the script and store the output in a variable
    $py_output = shell_exec($cmd);

    // Assuming the output is a JSON string.
    $data = drupal_json_decode($py_output);

    // Add the values to the fields
    $node->field_data_foo[LANGUAGE_NONE][0]['value'] = $data['foo'];
    $node->field_data_bar[LANGUAGE_NONE][0]['value'] = $data['bar'];

    // Nothing more to do, the $node object is a reference and
    // the object with its new data will be passed on to be saved.
  }
} 
```

# ssh - ssh：权限被拒绝（公钥，键盘交互）

> ID：15254349
> 
> 赞同：1
> 
> 时间：2013-03-06T17:46:27.977
> 
> 标签：ssh

我正在使用 linux 系统我在本地目录 $ ssh-keygen -t rsa -f ~/.ssh/id_rsa 上创建了一个 ssh 密钥

然后将公钥上传到planetLab系统

然后我尝试使用： ssh -v 登录PlanetLab节点
，调试信息如下：

```
 OpenSSH_5.8p2, OpenSSL 1.0.0j-fips 10 May 2012
    debug1: Reading configuration data /etc/ssh/ssh_config
    debug1: Applying options for *
    debug1: Connecting to openlab01.pl.sophia.inria.fr [138.96.116.22] port 22\. 
    debug1: Connection established.
    debug1: identity file /user/wgong/home/.ssh/id_rsa type 1
    debug1: identity file /user/wgong/home/.ssh/id_rsa-cert type -1
    debug1: identity file /user/wgong/home/.ssh/id_dsa type -1
    debug1: identity file /user/wgong/home/.ssh/id_dsa-cert type -1
    debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5
    debug1: match: OpenSSH_5.5 pat OpenSSH*
    debug1: Enabling compatibility mode for protocol 2.0 
    debug1: Local version string SSH-2.0-OpenSSH_5.8
    debug1: SSH2_MSG_KEXINIT sent
    debug1: SSH2_MSG_KEXINIT received
    debug1: kex: server->client aes128-ctr hmac-md5 none
    debug1: kex: client->server aes128-ctr hmac-md5 none
    debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
    debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
    debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
    debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
    debug1: Server host key: RSA 3b:a4:2a:ec:89:d0:7b:d7:b2:08:fe:ca:0d:24:ae:20
    debug1: Host 'openlab01.pl.sophia.inria.fr' is known and matches the RSA host key.
    debug1: Found key in /user/wgong/home/.ssh/known_hosts:10
    debug1: ssh_rsa_verify: signature correct
    debug1: SSH2_MSG_NEWKEYS sent
    debug1: expecting SSH2_MSG_NEWKEYS
    debug1: SSH2_MSG_NEWKEYS received
    debug1: Roaming not allowed by server
    debug1: SSH2_MSG_SERVICE_REQUEST sent
    debug1: SSH2_MSG_SERVICE_ACCEPT received
    debug1: Authentications that can continue: publickey,keyboard-interactive
    debug1: Next authentication method: publickey
    debug1: Offering RSA public key: /user/wgong/home/.ssh/id_rsa
    debug1: Authentications that can continue: publickey,keyboard-interactive
    debug1: Trying private key: /user/wgong/home/.ssh/id_dsa
    debug1: Next authentication method: keyboard-interactive
    debug1: Authentications that can continue: publickey,keyboard-interactive
    debug1: No more authentication methods to try.
    Permission denied (publickey,keyboard-interactive). 
```

如何处理这个问题？谢谢！

我注意到一个问题，以前，我们的组是 tika 现在它更改为 uslin 但是，即使我删除了以前的密钥并使用 ssh-keygen 生成新密钥，该组仍然如下：

```
-rw------- 1 wgong tika 1766 Mar  6 19:06 id_rsa
-rw-r--r-- 1 wgong tika  394 Mar  6 19:06 id_rsa.pub
-rw-r--r-- 1 wgong uslin   3987 Mar  6 18:11 known_hosts 
```

这是问题吗？如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:00:01.600

确保您`~/.ssh/authorized_keys`在服务器上的文件包含您的公钥。另外，请检查此文件的权限 - 如果权限太松，您将无法登录：

```
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh/
chmod 700 ~ 
```

是的，即使您的主目录的权限也可能无法使用密钥登录。

# java - 静态块实例块java顺序

> ID：15254358
> 
> 赞同：4
> 
> 时间：2013-03-06T17:46:56.720
> 
> 标签：java, block, execution

阅读此问题[后，当类加载到 JVM 中时，类的不同部分以什么顺序初始化？](https://stackoverflow.com/questions/1761377/in-what-order-are-the-different-parts-of-a-class-initialized-when-a-class-is-loa)和相关的JLS。我想更详细地了解为什么例如具有以下动物类（超类）和狗类（子类）：

```
class Animal
{
static{
System.out.println("This is Animal's static block speaking"):
}
{
System.out.println("This is Animal's instance block speaking");
}

class Dog{
static{
System.out.println("This is Dog's static block speaking");
}
{
System.out.println("This is Dog's instance block speaking");
}
public static void main (String [] args)
{
Dog dog = new Dog();
}
} 
```

好的，在实例化一个类之前，它的直接超类需要被初始化（因此所有的静态变量和块都需要被执行）。所以基本上问题是：为什么在初始化超类的静态变量和静态块之后，控制权交给子类进行静态变量初始化，而不是完成实例成员的初始化？

控制如下：

```
superclass (Animal): static variables and static blocks
subclass (Dog): static variables and static blocks
superclass (Animal): instance variables and instance blocks
sublcass (Dog):instance variables and instance blocks 
```

是什么原因导致它以这种方式而不是：

```
superclass -> static members
superclass -> instance members
subclass -> static members
sublcass-> instance members 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T17:49:00.087

> 为什么在初始化超类的静态变量和静态块之后，控制权交给子类进行静态变量初始化，而不是完成实例成员的初始化？

因为静态初始化发生**一次**，在创建**任何**实例之前。

静态对应于类，非静态对应于特定实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:53:59.403

如果你创造更多的狗是有道理的

```
superclass (Animal): static variables and static blocks
subclass   (Dog)   : static variables and static blocks

superclass (Animal): instance variables and instance blocks
subclass   (Dog)   : instance variables and instance blocks

superclass (Animal): instance variables and instance blocks
subclass   (Dog)   : instance variables and instance blocks

superclass (Animal): instance variables and instance blocks
subclass   (Dog)   : instance variables and instance blocks 
```

# asp.net - ObjectDataSource 更新期望单个字段作为参数而不是类

> ID：15254369
> 
> 赞同：0
> 
> 时间：2013-03-06T17:47:29.413
> 
> 标签：asp.net, objectdatasource

我正在尝试使用绑定到 Telerik RadGrid 的 ObjectDataSource 来执行自动选择、插入、更新和删除。ODS 的OnSelecting 方法是指MyClass 的成员方法，返回一个List。OnUpdating 方法也是该类的成员，并使用 [DataObjectMethod(DataObjectMethodType.Update, true)] 进行注释

```
 [DataObjectMethod(DataObjectMethodType.Update, true)]
    public void updateMyClass(MyClass myClassToUpdate, string UserId)
    {
        BusinessLayer.updateClass(myClassToUpdate, UserId);
    } 
```

我得到的异常表明该方法应该列出该类的各个字段。这不是我习惯这样做的方式，而且我将使用的一些课程有大量字段。这是 Telerik 还是 ObjectDataSource 问题？是否有 RadGrid 的设置或我缺少的其他设置可以让我直接通过课程？

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:27:08.033

需要在 ObjectDataSource 中设置 DataObjectTypeName 属性。这样做，它会传递一个类，但是，缺点是你不能添加额外的参数。

# visual-studio-2010 - 是否可以恢复未导出的 Visual Studio 2010 语法颜色设置？

> ID：15254371
> 
> 赞同：0
> 
> 时间：2013-03-06T17:47:32.430
> 
> 标签：visual-studio-2010, visual-studio

我在我的机器上放了一个 SSD，然后用一个新的操作系统重新开始。我忘了先导出我的 Visual Studio 配色方案。我仍然将旧的旋转硬盘驱动器放在机箱中。如果我在旧驱动器上运行 VS，它不会显示我的旧颜色，所以我无法导出它们。有没有办法从旧驱动器上的 Visual Studio 安装目录中获取颜色设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:51:10.103

查看旧硬盘驱动器上用户的文档文件夹。Visual Studio 将其设置保存在当前用户的`Documents\Visual Studio 2010\Settings`文件夹中。您应该能够从那里的文件中导入颜色设置。

# php - 如何在 Linux 上使用 cmd 行安装 phpab？

> ID：15254375
> 
> 赞同：3
> 
> 时间：2013-03-06T17:47:47.807
> 
> 标签：php, linux

我正在尝试使用 ant 运行 build.xml 文件，但出现以下错误：

```
build.xml:44: Execute failed: java.io.IOException: Cannot run program "phpab": java.io.IOException: error=2, No such file or directory
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
        at java.lang.Runtime.exec(Runtime.java:610)
        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:862)
        at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
        at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:631)
        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
        at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
        at java.lang.ProcessImpl.start(ProcessImpl.java:81)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
        ... 24 more

Total time: 0 seconds 
```

如何在 linux 上安装 phpab？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T22:38:31.743

将其下载到 bin 目录：

```
sudo wget -N --no-check-certificate -O /bin/phpab http://phpab.net/phpab-1.10.3.phar 
```

chmod 使其成为可执行文件：

```
sudo chmod +x /bin/phpab 
```

然后测试它：

```
phpab -v 
```

应该给你

```
phpab 1.10.3 - Copyright (C) 2009 - 2013 by Arne Blankerts 
```

文件来源：[https ://github.com/theseer/Autoload](https://github.com/theseer/Autoload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T18:20:43.757

对于 Fedora，这应该有效：

```
# yum install /usr/bin/phpab 
```

或使用直接包名安装：

```
# yum install php-theseer-autoload 
```

如果有兴趣，fedora 包 git repo 在这里： http: [//pkgs.fedoraproject.org/cgit/php-theseer-autoload.git/](http://pkgs.fedoraproject.org/cgit/php-theseer-autoload.git/)

# php - 将所有主键转换为 AUTO_INCREMENT 的 SQL 查询？

> ID：15254379
> 
> 赞同：-4
> 
> 时间：2013-03-06T17:47:58.587
> 
> 标签：php, mysql, sql, phpmyadmin

是否有任何我们运行的 SQL 查询，它会将每个表的主表更新`ID`为`AUTO_INCREMENT`（选中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:27:11.927

这几乎不是一个真正的问题，但我今天心情很好，我会给你你需要的资源，从那里你可以了解如何处理这些资源以实现你的目标。

首先，列出数据库中的所有表：

*   [使用 MySQLi 列出数据库中的所有表](https://stackoverflow.com/questions/4703111/list-all-tables-in-a-database-with-mysqli)

    > 有很多方法。
    > 
    > SHOW TABLES 是最简单的 SQL 语句。如果您想了解更多详细信息或进行一些过滤等，也可以查看 INFORATION_SCHEMA.TABLES。
    > 
    > SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA LIKE 'your_database';

然后，遍历您的结果，然后对于每次迭代，您都需要找到该表的主键：

*   [获取表的主键？](https://stackoverflow.com/questions/2341278/php-get-primary-key-of-table)

    > 更好的方法是使用 SHOW KEYS，因为您并不总是可以访问 information_schema。以下作品：
    > 
    > ```
    > SHOW KEYS FROM table WHERE Key_name = 'PRIMARY'
    > Column_name will contain the name of the primary key. 
    > ```

现在使用给定表的列名，将列修改为使用该最大值自动递增。

*   [Mysql - 将列更改为 AUTO_INCREMENT](https://stackoverflow.com/questions/2169080/mysql-alter-a-column-to-be-auto-increment)

    > alter table document modify column document_id int(4) auto_increment

最后，获取列的`max()`值`primary_key`并保存该数字，以便您可以使用此值设置此表的自动增量选项，因此自动增量行为将从正确的位置开始。

# nhibernate - 如何使用 NHibernate 3.3 进行依赖注入？

> ID：15254380
> 
> 赞同：0
> 
> 时间：2013-03-06T17:48:15.690
> 
> 标签：nhibernate, dependency-injection

我正在尝试使用拦截器对 NHibernate 3.3 实体进行 DI。

我的代码是：

```
public override object Instantiate( string clazz, EntityMode entityMode, object id ) {
    if( entityMode == EntityMode.Poco ) {

        dynamic x = _mappings.RootClasses.FirstOrDefault( hc => hc.Name.StartsWith( clazz ) );
        if( x == null )
            x = _mappings.SubClasses.FirstOrDefault( sc => sc.Name.StartsWith( clazz ) );
        if( x == null )
            x = _mappings.UnionSubclasses.FirstOrDefault( usc => usc.Name.StartsWith( clazz ) );

            if( x != null ) {
            Type type = Type.GetType( x.Name );  //Assembly.GetAssembly( typeof( Person ) ).GetTypes().FirstOrDefault( x => x.FullName == clazz );
            if( type != null ) {
                if( _kernel.HasComponent( type ) ) {
                    object instance = _kernel.Resolve( type );
                    _session
                        .SessionFactory
                        .GetClassMetadata( clazz )
                        .SetIdentifier( instance, id, entityMode );
                    return instance;
                }
            }
        }
    }
    return base.Instantiate( clazz, entityMode, id );
} 
```

返回的实例很好：我可以在监视窗口内检查 Id 是否设置正确。

但是，只要我不窥视对象，而是不理会它，我就会得到以下异常： **提供了错误类型的 id。预期：System.Int32，得到 UtenteProxy**

通过以下调用，我得到了相同的异常：_session.CreateCriteria().List();

关于我应该寻找什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:41:17.123

好吧，经过一夜的睡眠，我找到了解决方案：将被拦截器实例化的类需要声明 Lazy=false。

这样，NHibernate 就不需要代理，一切正常。

# magento - 更改服务器后的 Magento 管理员登录问题

> ID：15254384
> 
> 赞同：1
> 
> 时间：2013-03-06T17:48:28.240
> 
> 标签：magento

我已将当前 magento(1.4.1.1) 安装的域更改为新域。除了管理面板之外的一切都工作正常。当我尝试登录管理员（我有正确的用户名和密码）时，我无法登录并且也没有收到任何错误。我已经尝试了 magentofourum 和 stack over flow 中建议的所有可能方法，但无法解决它。我尝试注释掉 varien.php 中的代码，删除缓存等我在本地安装中也遇到了同样的错误。任何帮助将不胜感激.. 问候，狮子座

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T07:21:49.180

1）您需要设置：

suhosin.session.encrypt = 使用 suhosin 时在 php.ini 中关闭。

2) 使用不同的浏览器。我知道这听起来很愚蠢，但这就是我的问题。

# format - 在jFreeChart中设置纵轴标签的货币格式

> ID：15254385
> 
> 赞同：2
> 
> 时间：2013-03-06T17:48:28.650
> 
> 标签：format, label, jfreechart, time-series

问题的本质在标题中声明。

更多细节：我有时间序列图表，垂直轴应该有像这样的货币格式的标签

```
$100, 000, 000
$50, 000
... 
```

现在我有相同的标签，但没有美元符号和范围分隔符。

对于水平轴，我使用了这种方法：

```
DateAxis axis = (DateAxis) plot.getDomainAxis();
axis.setDateFormatOverride(new SimpleDateFormat("yyyy")); 
```

它有效。

当我尝试做类似的事情时

ValueAxis valueAxis = (ValueAxis) plot.getRangeAxis();

我找不到任何格式化标签的方法。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:11:38.500

`ChartFactory.createTimeSeriesChart()`工厂为范围提供 a ，`NumberAxis`因此您可以将for 与本地化货币格式化程序一起使用，如此[处](https://stackoverflow.com/a/14443791/230513)`setNumberFormatOverride()`所示。

# iphone - 替换 UIImagePicker 视图

> ID：15254391
> 
> 赞同：0
> 
> 时间：2013-03-06T17:48:44.113
> 
> 标签：iphone, ios, uiimagepickercontroller

我正在尝试通过使用自定义叠加视图来复制相机应用程序。当用户从自定义工具栏内单击按钮时，我需要显示图库。有没有办法用画廊视图替换相机视图？乍一看，我试图关闭 UIImagePickerController，然后再次对其进行配置以显示图库……但这不是预期的效果。关于如何做到这一点的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T01:06:49.117

您可以将对象的`sourceType`属性设置为- 这将改变您的图像选择器显示的内容。`UIImagePickerController``UIImagePickerControllerSourceTypePhotoLibrary`

[`sourceType`API 文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/doc/uid/TP40007070-CH3-SW5)

# php - 每天早上自动更新php数组

> ID：15254396
> 
> 赞同：1
> 
> 时间：2013-03-06T17:49:02.037
> 
> 标签：php, arrays, excel, automation, download

我正在从提要中获取实时拍卖数据，然后将它们保存在一个数组中，并将它们下载为一个 excel 文件（我都需要它们）。现在，对于我项目的另一部分，我需要每天早上 9 点执行此操作（从提要中收集数据并将其下载为 exc 文件）。

我怎样才能做到这一点？老实说，我对此并不陌生......所以你可能需要更彻底地向我解释你的解决方案，对不起！并感谢大家的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:51:17.313

如果您使用的是 Unix 服务器或 Windows 任务计划程序，我建议您使用[cron 作业。](http://en.wikipedia.org/wiki/Cron_%28Unix%29)

像这样，您将能够使用编程任务。

对于 Windows，这里有一个由@Chris Cooney 提供的教程：http: [//www.makeuseof.com/tag/how-to-automate-windows-programs-on-a-schedule/](http://www.makeuseof.com/tag/how-to-automate-windows-programs-on-a-schedule/)

在使用 cron 的情况下，您可以像这样轻松地做到这一点：

```
00 09 * *  php -f your_relative_or_full_path_URL/params > /dev/null 
```

前面的例子每天早上 9 点。

# linux - 让 BeagleBone 使用 OpenCV 捕获静止帧

> ID：15254397
> 
> 赞同：4
> 
> 时间：2013-03-06T17:49:03.897
> 
> 标签：linux, opencv, beagleboard, angstrom-linux, video4linux

我有一个运行[Ångström Linux](https://en.wikipedia.org/wiki/%C3%85ngstr%C3%B6m_distribution) 3.2.28 的 BeagleBone，我正在尝试从我的相机中捕捉一帧。

所以我插入了我的 USB 网络摄像头，并检查`/dev`以确保它显示出来。

确实如此，如`video0`（右下）。我知道这是正确的，因为它在我拔掉相机后消失了。

![（博](../Images/0364b100594ed5f55cdd3501f0d3257c.png)

所以现在我启动 Python 并运行以下命令：

```
root@beaglebone:/dev# python
Python 2.7.2 (default, Sep 11 2012, 16:15:43)
[GCC 4.5.4 20120305 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cv
>>> capture=cv.CaptureFromCAM(-1)
>>> img=cv.QueryFrame(capture)
>>> type(capture)
<type 'cv2.Capture'>
>>> type(img)
<type 'NoneType'> 
```

如您所见，我能够充分创建捕获对象，但无法从中拉出框架。我也尝试过使用相机 ID 的不同（或没有）整数参数（`-1`在上面的代码中），但无济于事。

作为参考，在我的笔记本电脑上使用[IPython](http://en.wikipedia.org/wiki/IPython)运行相同的代码如下所示：

```
In [1]: import cv
In [2]: capture=cv.CaptureFromCAM(-1)
In [3]: img=cv.QueryFrame(capture)
In [4]: type(capture)
Out[4]: cv2.Capture
In [5]: type(img)
Out[5]: cv2.cv.iplimage 
```

你可以看到，我确实在捕捉图像。我不确定从这里去哪里。

更新：

我已经使用[FFmpeg](http://en.wikipedia.org/wiki/FFmpeg)进行了一些尝试，并且能够通过发出以下命令让相机做出响应（即，它的灯亮起）：

```
root@beaglebone:/# ffmpeg -f video4linux2 -i /dev/video0 
```

这很有趣，因为[显然](http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=capturefromcam#capturefromcam) `CaptureFromCAM`使用了 V4L 界面……我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:15:26.910

[您需要做](https://stackoverflow.com/a/9640922/176769)的[第一件事](https://stackoverflow.com/a/8919567/176769) 是**确保****成功**：**`CaptureFromCAM()`**

```
import cv
capture = cv.CaptureFromCAM(-1)
if not capture:
    print "Unable to open device #-1"
    sys.exit(1) 
```

作为参数发送`-1`告诉 OpenCV 打开默认的相机设备。在某些系统上，这不起作用，您需要增加数量。尝试过`0`，然后`1`再过`2`。

你需要做的**第二件事**是确保`QueryFrame()`返回一些有效的东西：

```
img = cv.QueryFrame(capture)
if not img:
    print "Unable to retrieve frame from the device"
    sys.exit(1) 
```

我已经看到 OpenCV 的 Python API 和 C（甚至 C++）API 之间的奇怪行为。如果以上方法都不能帮助您解决问题，我建议您使用 OpenCV**编译一个 C 程序**（具有最可靠的 API）来从相机中检索数据。在某些情况下，OpenCV 的 C API 可以工作，而 Python 不能。

[这个 C 程序](https://stackoverflow.com/a/5385662/176769)从相机中检索帧并将它们显示在一个窗口中：

```
#include <stdio.h>
#include <highgui.h>
#include <cv.h>

int main() 
{
CvCapture* capture = NULL;
if ((capture = cvCaptureFromCAM(-1)) == NULL)
{
    fprintf(stderr, "ERROR: capture is NULL \n"); 
    return -1;
}

cvNamedWindow("mywindow", CV_WINDOW_AUTOSIZE);

cvQueryFrame(capture); // Sometimes needed to get correct data

while (1) 
{     
    IplImage* frame = cvQueryFrame(capture); // check return
    {
        fprintf( stderr, "ERROR: cvQueryFrame failed\n");
        break;
    }

    // At this point you already have the frame! There's no need to
    // repeat the thing 10x with cvGrabFrame and cvRetrieveFrame. 
    // You are probably sabotaging yourself doing this multiple times.

    cvShowImage("mywindow", frame); // Do not release the frame!

    int key = cvWaitKey(10);
    if (key  == 0x1b)
        break;
}    

cvReleaseCapture(&capture);   
cvDestroyWindow("mywindow");   

return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:42:26.423

我不确定这是否可以作为答案。请尝试以下方法。

我猜，不支持相机驱动程序。将相机连接到板上并在终端中输入“dmesg”，查看是否在其中检测到相机制造商名称。

如果消息中的任何位置都没有制造商名称，则将从终端安装相机驱动程序：

```
opkg update
opkg install kernel-module-uvcvideo
modprobe uvcvideo 
```

如果上述步骤对您没有帮助，请尝试安装[VLC 媒体播放器](http://en.wikipedia.org/wiki/VLC_media_player)或任何其他支持从摄像头输入视频的播放器，并尝试它是否可以正常工作。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T23:47:44.910

1.  尝试使用任何 V4L2 应用程序并尝试在不使用任何代码的情况下测试相机。有 Qt V4L2 软件，您可以下载和测试相机。
2.  如果第一步失败，那么您的相机驱动程序有问题，并且不受支持。
3.  如果第一步成功，请检查您的代码并尝试使用 gstreamer 或任何现成的 V4L2 捕获示例。

我遇到了可以识别相机的问题，但是驱动程序有错误，所以首先检查相机的驱动程序是否真的被您的内核支持。提及您的相机型号也很好。它是什么样的接口，[MIPI](https://en.wikipedia.org/wiki/Camera_Serial_Interface)还是 USB？我怀疑这是驱动程序的问题。

# php - 在 CakePHP 中将主域路由到控制器/动作/id

> ID：15254398
> 
> 赞同：1
> 
> 时间：2013-03-06T17:49:05.737
> 
> 标签：php, cakephp, cakephp-1.3

我想将 www.domain.com/sections/view/1 路由到 www.domain.com/..

问题是我不知道如何通过连接函数类传递 id。

```
Router::connect('/',
    array(
        'controller' => 'sections'
        ,'action' => 'view'
        ,'id' => '1'
    ), 
    array(
        'id' => '1'
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:12:03.743

```
Router::connect('/sections/view/1', '/'); 
```

或者

```
Router::connect('/sections/view/1', array(
    'controller' => 'something',
    'action' => 'whatever'
)); 
```

或者

```
Router::connect('/sections/view/:id', array(
        'controller' => 'something',
        'action' => 'whatever',
    ),
    array('id' => '[0-9]+')
); 
```

（第一个参数是您要控制的参数 - 第二个参数是您要将其发送到的参数。）

**更新每条评论（交换路线的方向）：**

```
Router::connect('/', array(
    'controller' => 'something', 'action' => 'whatever', '1'
)); 
```

# mysql - 使用 delete from 与复制数据并使用 drop 的优缺点

> ID：15254400
> 
> 赞同：0
> 
> 时间：2013-03-06T17:49:15.420
> 
> 标签：mysql, select, delete-row, mysql-5.5, drop-table

MySQL 查询

```
 delete from t where not condition; 
```

和

```
 create table s select * from t where condition;
 drop table t; 
```

非常相似。（在这里，`condition`一个查询与另一个查询相同`condition`。）
第二种方法的一个优点是它允许您`s`在删除之前进行检查`t`，以确保您的查询没有出错。这是一个非常重要的考虑因素，我不希望将其最小化，但我想知道上述任何一个查询相对于另一个查询存在哪些*其他优点和缺点。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:10:39.873

第一个要好得多，这就是为什么在 SQL 中存在删除命令的原因。**无需重新发明删除**命令：

1-当您想删除一些行时，**无需更改架构（创建 s，删除 t）。**

2- t 可能与您可能想要保留**的其他表有关系。**您甚至可能想要级联删除以删除其他一些表中的一些其他相关行，使用删除触发器和......

3- 至于在删除之前检查您提到的行的好处，您也可以在使用删除命令之前进行选择。

4-您的表可能具有**指向其他应用程序逻辑的链接**，例如 ORM 类、用于报告的 SP 等等。您是要在代码中创建一个新类还是每次要删除几行时更新现有的 SP ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:09:37.960

至于第二个查询，每当您在任何数据库中创建临时表时，都会对表空间进行碎片整理并降低数据库性能。我强烈建议不要采用第二种方法。

如果你真的想绝对确定你在做什么，你可以使用类似下面的代码：

```
/*
DELETE
-- */ SELECT *
FROM t
WHERE condition; 
```

当您确定返回的行正是您要删除的行时，您可以轻松地注释第一行的注释开头，例如：

```
-- /*
DELETE
-- */ SELECT *
FROM t
WHERE condition; 
```

`DELETE`在运行任何语句之前，我使用相同的方法。

# css - 如何编写具有灵活数量的参数的 LESS mixin？

> ID：15254402
> 
> 赞同：1
> 
> 时间：2013-03-06T17:49:25.657
> 
> 标签：css, less, css-transitions, mixins

我写了一个 LESS mixin，它使用适当的引擎前缀自动进行 CSS 转换。

```
.Transition(@Property, @Timing){
    -moz-transition: @Property @Timing linear;
    -webkit-transition: @Property @Timing linear;
    -o-transition: @Property @Timing linear;
    transition: @Property @Timing linear;
} 
```

不幸的是，我无法指定一组选定的样式来制作动画。我只能指定一种特定的样式或“全部”。如果我尝试多次使用相同的 mixin 来将更多样式添加到混合中，则转换属性只会被覆盖。例如：

```
.class { .Transition(top, .2s); .Transition(opacity, .2s); .Transition(box-shadow, .2s); } 
```

结果是：

```
.class {
    -moz-transition: box-shadow, .2s;
    -webkit-transition: box-shadow, .2s;
    -o-transition: box-shadow, .2s;
    transition: box-shadow, .2s; 
} 
```

如何编写一个 mixin，让我将灵活数量的值应用于一种样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:41:45.493

## 合并支持

LESS v1.5通过为属性添加后缀引入了对[合并规则的支持](http://lesscss.org/features/#merge-feature)`+`

> 该`merge`功能允许将来自多个属性的值聚合到单个属性下的逗号或空格分隔列表中。`merge`对于背景和变换等属性很有用。
> 
> ...
> 
> 例子：
> 
> ```
> .mixin() {
>   box-shadow+: inset 0 0 10px #555;
> }
> .myclass {
>   .mixin();
>   box-shadow+: 0 0 20px black;
> } 
> ```
> 
> 输出：
> 
> ```
> .myclass {
>   box-shadow: inset 0 0 10px #555, 0 0 20px black;
> } 
> ```

* * *

## 分号支持

LESS v1.4(?) 引入了对[带分号的多个参数的](http://lesscss.org/features/#mixins-parametric-feature-mixins-with-multiple-parameters)支持。这允许每个参数包含文字逗号而不需要多个参数。

> 使用逗号作为 mixin 分隔符使得无法创建逗号分隔的列表作为参数。另一方面，如果编译器在 mixin 调用或声明中看到至少一个分号，它假定参数用分号分隔并且所有逗号都属于 css 列表：
> 
> *   两个参数，每个参数都包含逗号分隔的列表：`.name(1, 2, 3; something, else)`,
> *   三个参数，每个参数包含一个数字：`.name(1, 2, 3)`,
> *   使用虚拟分号创建 mixin 调用，其中一个参数包含逗号分隔的 css 列表：`.name(1, 2, 3;)`，
> *   逗号分隔的默认值：`.name(@param1: red, blue;)`.

[例子]

```
.transition(@args) {
    -webkit-transition: @args;
    -moz-transition: @args;
    -o-transition: @args;
    transition: @args;
}
.selector {
    .transition(.2s top, .2s opacity, .2s box-shadow;);
    //                            this is required -^
} 
```

* * *

## 前分号支持

使用逗号前分号支持支持多个参数比最初看起来要困难一些，主要是因为 less 从`@arguments`. 我[在 github](https://github.com/zzzzBov/ZLESS)上启动了一个 ZLESS 项目，在其中添加了许多 mixin 以简化 LESS 的使用。

这是[我用于转换的代码](https://github.com/zzzzBov/ZLESS/blob/master/zless/mixins.less#L348)（没有编译器标志）：

```
.transition(@a, @b: X, ...) {
    //http://stackoverflow.com/a/13490523/497418
    @args: ~`"@{arguments}".replace(/[\[\]]|\,\sX/g, '')`;
    -webkit-transition: @args;
    -moz-transition: @args;
    -o-transition: @args;
    transition: @args;
} 
```

它将被用作：

```
.selector {
    .transition(.2s top, .2s opacity, .2s box-shadow);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:33:14.833

您基本上需要将它们作为转义字符串传递。所以修改你的代码：

```
.Transition(@transString){
    -moz-transition: @transString;
    -webkit-transition: @transString;
    -o-transition: @transString;
    transition: @transString;
} 
```

然后像这样使用它：

```
.Transition(~"top .2s linear, opacity .2s linear, box-shadow .2s linear"); 
```

产生这个：

```
-moz-transition: top .2s linear, opacity .2s linear, box-shadow .2s linear;
-webkit-transition: top .2s linear, opacity .2s linear, box-shadow .2s linear;
-o-transition: top .2s linear, opacity .2s linear, box-shadow .2s linear;
transition: top .2s linear, opacity .2s linear, box-shadow .2s linear; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:21:40.000

我认为，如果您将过渡的“财产”分开，那可能会奏效！

例如 ：

```
.transitionProperty ( @property1, @property2, @property3) {
   -moz-transition-property : @property1, @property2, @property3;
   -o-transition-property : @property1, @property2, @property3;
   -webkit-transition-property : @property1, @property2, @property3;
   transition-property : @property1, @property2, @property3;
} 
```

或类似的东西。我认为这是一个值得考虑的问题；）

# css - CSS，无法在 chrome 中对齐 div

> ID：15254407
> 
> 赞同：0
> 
> 时间：2013-03-06T17:49:31.930
> 
> 标签：css, google-chrome

我在 chrome 中的一些定位有一个神秘的问题。它是关于我的一个页面：[http ://www.iphonedeksler.no/](http://www.iphonedeksler.no/)

右侧的 div`class="content"`在 chrome 中太低了，但在 Firefox 和 IE 中完美。

更神秘的是，当您检查并切换“float:right;”时 css 规则关闭，然后再次打开，它应该像它一样对齐。

这是一个 chrome 错误，我应该只对 chrome 使用 css hack 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:03:54.003

似乎这`.main { clear: both; }`弄乱了`.content`div 对齐方式。如果删除`clear: both`，您将解决对齐问题。

# css - 加载时填充屏幕的img/div？

> ID：15254408
> 
> 赞同：0
> 
> 时间：2013-03-06T17:49:32.383
> 
> 标签：css

我正在尝试设置像[http://bklynsoap.com/](http://bklynsoap.com/)这样的背景图像，并在它下面有内容。图像不需要缩放到页面，但我希望它填充初始浏览器屏幕。我尝试查看他们的源代码以了解他们是如何做到的，但没有运气。谁能引导我朝着正确的方向前进？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:53:12.010

Look into their JS file.

It sets the dimensions of the first (top) `<div>`, and fills it out with an image. A timer is set upon page load, and after 10 seconds the window is scrolled down to the next `<div>`.

# c# - 更改 winforms 应用程序的字体系列和大小

> ID：15254409
> 
> 赞同：7
> 
> 时间：2013-03-06T17:49:36.923
> 
> 标签：c#, winforms

Winform 应用程序的默认字体系列和大小太小（恕我直言，看起来很过时）。

有什么简单的方法可以为整个应用程序更改它们吗？我不想在控件或表单的基础上设置它们——如果可能的话，只是一次性的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T18:08:31.527

```
WindowsFormsApplication1.Properties.Settings.Default.UserFont = new Font("Arial", 24, FontStyle.Bold); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T17:55:20.007

您可以`Font`在应用程序中设置表单的属性，这将更改所有具有相同字体的子控件。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-06T17:53:46.033

简短的回答：不。但是你可以解决这个问题。

让自己成为一个空的 BaseForm 并将其字体设置为您想要的字体。然后，您需要使所有其他形式继承您的基本形式。

# php - 注册进程+php mysql

> ID：15254412
> 
> 赞同：1
> 
> 时间：2013-03-06T17:49:51.813
> 
> 标签：php, mysql, dreamweaver, registration

我正在使用 php 和 mysql 创建一个注册表单，我想检查所需的字段是否为空，但问题是如果用户名字段为空，我只会收到一条错误消息，而不会显示其他错误消息，任何人都可以帮助我有这个问题？？

# 注册.php

```
<!--<?php require_once('for members/scripts/global.php');?>--> 
<?php 
$message = "";
if(isset($_POST['username'])){
  $username = $_POST['username'];
  $fname = $_POST['fname'];
  $lname = $_POST['lname'];
  $email = $_POST['email'];
  $pass1 = $_POST['pass1'];
  $pass2 = $_POST['pass2'];
  $bdate = $_POST['birthdate'];
  $phone = $_POST['phonenumber'];
  $country = $_POST['country'];
  $local_adress = $_POST['adress'];
  @$specialization = $_POST['specialisation'];

  //error handeling
  if((!$username)||(!$fname)||(!$lname)||(!$email)||(!$pass1)||(!$pass2)||(!$bdate)||(!$phone)||(!$country)||(!$local_adress)||(!$specialization)){
  $message = "please insert all fields below";

 if($username == "")
 {
      $message = "Enter User Name";
 }
 if($fname = "")
 {
     $message = "Enter First name";
 }
 if($email = "")
 {
     $message = "Enter Email Adress";
 }
  if($pass1 = "")
 {
     $message = "Enter password";
 }
  if($pass2 = "")
 {
     $message = "rechek the password ";
 }

 } 
   else if($pass1!=$pass2){
   $message = "your password do not match!";
   }else{
   //securing the data
   $username = preg_replace("#[^0-9a-z]#i","",$username);
   $fname = preg_replace("#[^0-9a-z]#i","",$fname);
   $lname = preg_replace("#[^0-9a-z]#i","",$lname);
   $pass1 = sha1($pass1);

   $email = mysql_real_escape_string($email);
   // checking for duplicate
   $user_query = mysql_query("SELECT username FROM members WHERE username = '$username'LIMIT 1") or die("could not check the username");
   $count_username = mysql_num_rows($user_query);

    $email_query = mysql_query("SELECT email FROM members WHERE email = '$email'LIMIT 1") or die("could not check the username");
   $count_email = mysql_num_rows($email_query);

    if($count_username > 0){
     $message = " your username is alredy in use";
    }elseif($count_email > 0){
      $message = "your email is alredy in use";
    }else{
      // insert the members
      $ip_adress = $_SERVER['REMOTE_ADDR'];
      $query = mysql_query("INSERT INTO members(username, firstname, lastname, email, password, ip_adress, sign_up_date)VALUES('$username', '$fname', '$lname', '$email', '$pass1', '$ip_adress',  now())")or die("could not insert data"); 
    $member_id = mysql_insert_id();
    mkdir("users/$member_id",0755);
    $message = "you have  now been registered";
    header("Location: home.php");
    }
   }
 }

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register Page</title>
<link href="style/stylesheet.css"rel="stylesheet" type="text/css"/>
</head>

<body>
<div id="visitorHeader">
<img src="web_header copy.jpg" alt="visitor header" />
</div>
<div class="container center"> 
<p><?php print("$message")?></p>
<table width="280" border="1" align="center">
<form action="register.php" method="post">
<tr>
<td><label for="username"><span class="Fields">User Name</span> <span class="requiredField">*</span></label></td>
<td>
<input type="text" name="username" placeholder="Username" /><br /></td>
</tr>
<tr>
<td><label for="firstname"><span class="Fields">First Name</span> <span class="requiredField">*</span></label></td>
<td>
<input type="text" name="fname" placeholder="Firstname" /><br /></td>
</tr>
<tr>
<td><label for="lasttname" class="Fields">Last Name</label></td>
<td>    
<input type="text" name="lname" placeholder="Lastname" /><br /></td>
</tr>
<tr>
<td><label for="birthdate" class="Fields">Birth Date</label></td>
<td>
<input type="date" name="birthdate" value= "YYYY_MM_DD"  onfocus="if (this.value == 'YYYY_MM_DD') {this.value = '';}" onblur="if (this.value == '') {this.value = 'YYYY_MM_DD';}" /><br /></td>
 </tr>
 <tr>
 <td class="Fields"><label for="phonenumber">Phone Number</label>
 <td>
 <input type="tel" name="phonenumber" value="000-0-000 000" onfocus="if (this.value == '000-0-000 000') {this.value = '';}" onblur="if (this.value == '') {this.value = '000-0-000 000';}" /></td>
</tr>
<tr>
<td class="Fields"><label for="country">Country</label></td>
<td> 
<select name="country" id="country"><option selected=>please choose coutry<option>lebanon<option>Us<option>europe 
    </select></td>
</tr>
<tr>
<td class="Fields"><label for="adress">Local Adress <span class="requiredField">*</span></label></td>
<td>
<input type="text" name="adress" placeholder="adress" /></td>
</tr>
<tr>
<td class="Fields"><label for="specialisation">Specialisation <span class="requiredField">*</span></label></td>
<td>
<select name="specialisation" id="specialisation">
    </select></td>
    </tr>

<tr>
<td class="Fields"><label for="email">Email Adress<span class="requiredField">*</span></label></td>
<td>
<input type="text" name="email" placeholder="Email Adress" /><br /></td>
</tr>
<tr>
<td class="Fields"><label for="password">Password<span class="requiredField">*</span></label></td>
<td>
<input type="password" name="pass1" placeholder="Password" /><br /></td>
</tr>
<tr>
<td class="Fields"><label for="password2">Re_Password<span class="requiredField">*</span></label></td>
<td>
<input type="password" name="pass2" placeholder="Validate Password" /><br /></td>
</tr>
<tr>
<td>
<input type="submit" value="Register"/>
</td>

</tr>
</form>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:07:30.260

您只收到一条错误消息而不是所有错误消息的一个原因是因为您`$message`每次遇到新错误时都会覆盖该变量。为此，请将字符串附加到错误消息中：

```
if ($username == "") {
    $message = $message . "Enter User Name<br/>";
} 
```

至于为什么用户名是唯一一个创建错误消息的人，这是因为您`=`在另一个 if 语句上使用了一个，如果我没记错的话，它返回分配的值，在这种情况下它是一个空字符串，它评估为假。你需要做：

```
 if($fname == "")
 {
     $message = $message . "Enter First name<br/>";
 }
 if($email == "")
 {
     $message = $message . "Enter Email Adress<br/>";
 }
  if($pass1 == "")
 {
     $message = $message . "Enter password<br/>";
 }
  if($pass2 == "")
 {
     $message = $message . "rechek the password <br/>";
 } 
```

**编辑**更改`$message .= "..."`为，`$message = $message . "..."`因此更清楚的是我们正在附加到字符串，并`<br/>`在消息中添加了标签，因为`$message`正在打印在 html 中。

# php - 在php中解析回声

> ID：15254413
> 
> 赞同：0
> 
> 时间：2013-03-06T17:49:54.003
> 
> 标签：php, parsing, echo, isset

我在 php 中有一个电子邮件表单，它有 3 种可能的外观。

首先，当未使用提交按钮时，我希望它显示为标准。

其次，当点击提交并且没有设置数据时。

第三，当数据输入可接受时，我想显示输入的内容。

但是，我是一个完全的 php 新手，我似乎无法做到正确。

```
<?php
    if(isset(sent)) {
        if(isset($_POST['forename']) && !empty($_POST['forename']) {
            echo('<input class="tbox" type="text" name="forename" value="$POST['forename']" /><br>');
        } else {
            echo('<input class="tbox bad" type="text" name="forename" value=""/><br>');
        }
    } else {
        echo('<input class="tbox" type="text" name="forename" value="" /><br>') ;
    }
?> 
```

我假设错误是 "s 和 's。我得到一个意外的 ) 异常。应该如何构造回声线以避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:56:48.840

这是你的问题：

```
echo('<input class="tbox" type="text" name="forename" value="$POST['forename']" /><br>'); 
```

变量不会在单引号内解析，只能在双引号内解析。

一个简单的解决方案是：

```
echo '<input class="tbox" type="text" name="forename" value="' . htmlspecialchars($POST['forename']) . '" /><br>'; 
```

请注意，我曾经`htmlspecialchars`避免您的变量破坏 html。使用时也不需要使用括号`echo`（虽然没有害处......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:56:33.333

此行导致错误：

```
echo('<input class="tbox" type="text" name="forename" value="$POST['forename']" /><br>'); 
```

您必须将该值与字符串的其他两个部分连接起来，`$_POST`而不是`$POST`：

```
'[…]value="' . $_POST['forename'] . '"[…]' 
```

您还应该至少使用`htmlentities`输入不会破坏您的 HTML 的值：

```
htmlentities($_POST['forename'], ENT_QUOTES, "UTF-8") 
```

# emacs - 如何在 Emacs 中默默地“保存所有缓冲区”？

> ID：15254414
> 
> 赞同：22
> 
> 时间：2013-03-06T17:49:55.927
> 
> 标签：emacs

如何在 Aquamacs Emacs 中创建“静默保存所有缓冲区”命令？

我发现这个命令`save-some-buffers`很好，但问题是它分别提示我确认我要保存的每个缓冲区。

通过谷歌搜索，我找到了一些关于名为`save-silently-p`但似乎不存在的变量的文档（在 Aquamacs 版本 2.4 中，即 Emacs 23.3.50.1）。

那么如何让它在不提示的情况下静默保存所有缓冲区呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-26T00:44:55.627

无需设置任何自定义变量，您只需：

```
C-u C-x s 
```

或长手：

`Ctrl`+ `u` `Ctrl`+`x` `s`

此外，您也可以这样做，并在提示时对所有可保存的文件缓冲区`C-x s`按“是”回答。`!`这并不是严格意义上的沉默，但它仍然非常快速/不引人注目。（信用：@phils）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-22T05:43:38.533

如果您将非零传递给`save-some-buffers`它将保存所有文件而不提示，因此您可以执行类似的操作

```
(defun save-all () (interactive) (save-some-buffers t))
(global-set-key (kbd "C-S") 'save-all) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-26T20:25:51.000

在这个例子中，第*一个*参数被设置为一个`non-nil`值——“ *[o]可选参数（前缀）`non-nil`意味着保存所有没有问题。* ”虽然它可能只是普通的旧的`t`，但我选择了一个更有意义的符号来提醒自己它代表什么——即`'no-confirm`. 如果我想收到一个确认对话框，那么我会改为使用`nil`第*一个*参数。请参阅 doc-string -- `M-x describe-function RET save-some-buffers RET`-- 以了解有关此函数如何根据*第一个*参数是`nil`或的行为方式的更多信息`non-nil`。

下面的示例使用`save-some-buffers`自定义*零参数函数*作为*第二个*参数 - 即**PRED** - 来选择应保存的缓冲区。for 的文档字符串`save-some-buffers`表明*第二个*参数 - 即**PRED** - 可能是三种可能性之一 - **(1)**如果**PRED**是`nil`，则考虑所有文件访问缓冲区；**(2)**如果**PRED**是`t`，那么*某些*非文件缓冲区也会被考虑；( **3)**如果 PRED 是*一个零参数函数，*它指示每个缓冲区在使用该缓冲区当前调用时是否考虑它。

该示例使用 的键盘快捷键`f5`，但用户可以自由地以交互方式调用此自定义函数`M-x my-save-some-buffers`-- 或完全分配不同的键盘快捷键。有几个可能的匹配已经被硬编码，用户可以自由添加/删除/修改条件：

• file-visiting-buffer **+**文件名匹配变量的值`abbrev-file-name`。

• file-visiting-buffer **+**主要模式`latex-mode`来自内置`tex-mode.el`——*不是*AUCTeX。

• 文件访问缓冲区**+**主要模式是`markdown-mode`.

• 文件访问缓冲区**+**主要模式是`emacs-lisp-mode`.

• 文件访问缓冲区**+**派生模式是`org-mode`.

```
(defun my-save-some-buffers ()
(interactive)
  (save-some-buffers 'no-confirm (lambda ()
    (cond
      ((and buffer-file-name (equal buffer-file-name abbrev-file-name)))
      ((and buffer-file-name (eq major-mode 'latex-mode)))
      ((and buffer-file-name (eq major-mode 'markdown-mode)))
      ((and buffer-file-name (eq major-mode 'emacs-lisp-mode)))
      ((and buffer-file-name (derived-mode-p 'org-mode)))))))

(global-set-key [f5] 'my-save-some-buffers) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T18:29:05.357

从信息页面`save-some-buffers`：

> （保存一些缓冲区和可选的 ARG PRED）
> 
> 保存一些修改过的文件访问缓冲区。向用户询问每一项。您可以在决定或diff-buffer-with-file之前回答`y' to save,`n' 不保存，`C-r' to look at the buffer in question with`查看缓冲区'。`d' to view the differences using`
> 
> 该命令首先保存任何“buffer-save-without-query”为非零的缓冲区，而不询问。

因此，您应该将所有文件的变量设置`buffer-save-without-query`为`t`（例如）。`(add-hook 'find-file-hook (lambda () (setq buffer-save-without-query t)))`应该做的伎俩。

# sql - SQL：如何从日期时间字段中提取月份

> ID：15254419
> 
> 赞同：2
> 
> 时间：2013-03-06T17:50:10.993
> 
> 标签：sql, sql-server

我需要从日期时间字段A 中提取月份，然后将结果作为整数放入同一表中的字段B，如果字段B 为空。

例如）`1988-02-03 00:00:00.000`只有当该字段为空时，我才需要提取 02 并将结果放入另一个字段。

我想这最终会成为一个存储过程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:51:27.327

Use [MONTH()](http://msdn.microsoft.com/en-us/library/ms187813.aspx)

```
UPDATE your_table
SET some_column = MONTH(date_column)
WHERE some_column IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:51:12.380

`MONTH(fieldA)` or `DATEPART(M, fieldA)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:51:35.870

SQL Server has a built-in function called `month()` that will return the month for date and timestamp data types

```
UPDATE yourtable
SET newcolumn = month(columnname)
WHERE newcolumn IS NULL 
```

# c# - 使用实体数据模型映射表

> ID：15254421
> 
> 赞同：0
> 
> 时间：2013-03-06T17:50:15.423
> 
> 标签：c#, .net, database, entity-framework

我是实体框架的新手。我已经有现有的数据库。我设法映射我的数据库表并生成 c# 类，但我有几个问题。

1.  有没有办法将几个表的代码生成到单个文件中？在单个文件中包含与用户相关的类对我非常有帮助。
2.  我的下一个问题是指从数据库更新模型。当我更改数据库中的字段名称并更新模型时，我在刷新后添加了新字段。不幸的是，旧字段仍保留在我的实体中，我必须手动将其删除。

    是否有任何解决方案告诉 VS 从实体中删除这些无效字段？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:01:03.443

1）您的实际代码文件是从 t4 模板生成的。您可以使用任何您想要生成它们的模板。为此，请右键单击 .edmx 文件中的画布并选择“添加代码生成项”。它将向您的项目添加几个 *.t4 文件。nuget 包管理器中有一些可用的模板。您甚至可以手动编辑它们（尽管它们很难理解）

2）从数据库更新模型时，您可以删除整个表，然后重新添加它。

另外，看看“代码优先”的方法。您基本上创建了一堆 poco 类，然后将 DbContext 子类化：

```
public class MyContext : DbContext
{
    public DbSet<MyEntity> MyEntities { get; set; }
    public DbSet<MyCoolEntity> MyCoolEntities { get; set; }
    /* ... */
} 
```

不需要 .edmx 文件。实体框架将为您处理数据库。

# node.js - node.js (socket.io) 下载示例

> ID：15254422
> 
> 赞同：0
> 
> 时间：2013-03-06T17:50:16.393
> 
> 标签：node.js

我从这个网站下载了代码[http://rawkes.com/articles/creating-a-real-time-multiplayer-game-with-websockets-and-node.html](http://rawkes.com/articles/creating-a-real-time-multiplayer-game-with-websockets-and-node.html) ( [https://github.com/robhawkes/mozilla-节日](https://github.com/robhawkes/mozilla-festival)）昨天。

但是如果我打开 localhost:8000 它只会写“欢迎来到 socket.io”。没有别的，但它应该创建新的播放器和更多的东西......我是初学者，所以我找不到任何问题......但看起来这个功能没有启动`function onSocketConnection(client) {}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T12:28:31.147

1) 使用节点在主文件夹中运行 game.js 2) 使用支持 html5 的浏览器打开 index.html 文件（在公共文件夹中）

你也可以在这里找到开发教程：[http ://rawkes.com/articles/creating-a-real-time-multiplayer-game-with-websockets-and-node.html](http://rawkes.com/articles/creating-a-real-time-multiplayer-game-with-websockets-and-node.html)

# c++ - 使用 msi 安装程序的安装程序 windows 服务

> ID：15254431
> 
> 赞同：2
> 
> 时间：2013-03-06T17:50:33.130
> 
> 标签：c++, windows, windows-installer

我是 Windows 安装程序的新手。我需要一个 .msi 安装程序，用于使用纯 c++（无 .NET）编写的 Windows 服务。我听说这是可能的，但我不知道如何。

有人可以告诉我如何让安装程序安装我的服务吗？它需要是一个 .msi 安装程序。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:10:21.120

在 WiX 工具集中，您只需添加到`Component`包含`File`服务可执行文件的文件中：

```
<ServiceInstall Id="MyService" Name="MyService" DisplayName="My Cool Service" 
                Description="Description of my cool service." 
                Start="auto" Type="ownProcess" /> 
```

# c++ - 使用 cmake 和 Visual Studio 2010 构建 yaml-cpp

> ID：15254437
> 
> 赞同：1
> 
> 时间：2013-03-06T17:50:56.040
> 
> 标签：c++, visual-studio-2010, cmake, yaml-cpp

我正在尝试在 Windows 中使用 cmake 和 Visual Studio 2010 构建 yaml-cpp。首先，我使用 gui 工具在 cmake 中打开文件，配置并生成。在指定的构建文件夹中生成一个 Visual Studio 解决方案。然后我在 vs10 中打开解决方案并构建它。生成了一些文件夹，但我找不到任何二进制文件或任何要包含在我的项目中的东西。我不习惯 C++ 或 Visual Studio，所以这超出了我的舒适区。关于如何让 yaml-cpp 库正常工作，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:06:45.673

经典Pebkac。经过一夜好眠后，我在项目中找到了该文件。libyaml-cppmdd.lib 在 Debug 文件夹中生成。在将文件添加到链接器的附加依赖项时，我忘记将 .lib 添加到文件结尾。因此链接器认为它是一个 .obj 文件并抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:07:31.257

根据`CMakeLists.txt`，你应该`yaml-cpp.dll`在你的二进制目录的根目录（你用来配置构建的目录）。

您可以尝试运行安装目标。

# shell - Unix Shell 文件未按预期工作

> ID：15254438
> 
> 赞同：0
> 
> 时间：2013-03-06T17:51:03.003
> 
> 标签：shell, unix, csv

我是 Unix shell 脚本的新手，不明白为什么这不能像命令行上的单个命令那样工作。道歉，如果它很明显。

我正在尝试使用一些 Unix 命令构建一个脚本，并在 Putty 中使用 sh script.sh 调用它。这是一个示例：

```
echo Carrying out compression
gzip -c file_1.csv > file_1.csv.gz
gzip -c file_2.csv > file_2.csv.gz
gzip -c file_3.csv > file_3.csv.gz 
```

我没有生成指定的命名输出，而是得到了非常奇怪的命名文件，例如。FTY4WG~7。那是除了最后一个正确命名的。

如果我在每一行后面放一个空格，它可以工作，但我收到一条错误消息：：没有这样的文件或目录

实际上，我正在尝试做很多事情（将 CSV 拼接在一起并压缩它们），但是如果我能破解这个简单的命令，我可能就能解决所有问题。

谢谢你的帮助！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:53:45.560

确保在脚本顶部有这一行

```
#!/bin/bash 
```

现在执行这个命令

```
dos2unix <yourfilename> 
```

现在这样做

```
chmod u+x <urfilename> 
```

可能这会做。

# json - Cocoa 错误 3840 - 单引号的 NSJSONSerialization 解析错误

> ID：15254441
> 
> 赞同：1
> 
> 时间：2013-03-06T17:51:06.960
> 
> 标签：json, xcode4.6

我正在使用 Xcode 4.6。我从服务器获得了一个有效的 Json 字符串，其中单引号已正确转义。如果我从服务器上的字段中删除单引号，我不会收到任何错误。

这是json字符串：

```
jsonStr: '{ "status": 0, "message": "success", "object": [ { "currentthreatlevelname": "Guarded", "devicename": "Virendra\'s Pad", "threatlevelname": null, "enabled": false, "practicemode": false, "locationname": null, "currentthreatlevel": 3, "status": 0, "deviceid": "APLFC8C49AF-D4DF-4AE0-9E7B-D2A3E94ED387", "threatlevel": null, "location": null } ], "site": "s2 security" }' 
```

由。。。生产

```
NSString* jsonStr = [[NSString alloc] initWithData:_receivedData encoding:NSUTF8StringEncoding]; 
```

这里的解析代码是：

```
NSDictionary *d = [NSJSONSerialization JSONObjectWithData: _receivedData
              options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments
                                                error:&jsonError]; 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:39:50.770

转义 "Virendra\'s Pad" 中的单引号会使 JSON 无效。尝试删除反斜杠。

# linux - Making it harder to accidentally delete a file in Linux

> ID：15254449
> 
> 赞同：0
> 
> 时间：2013-03-06T17:51:20.573
> 
> 标签：linux, synology

I have a synology NAS server which runs linux. I use it to back up files. I want to make it very difficult for someone to accidentally delete files. The permission model is just read / write. I need to grant write access so that users can back up files. But, I'd like to have something like when they tried to delete a file they had to enter a password or something.

Any ideas?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:10:16.347

使用别名 rm="rm -i"，这将在删除文件之前提示用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:55:53.967

*免责声明：我对 Synology 产品不熟悉，所以我只能回答一般的 Linux。*

您所问的通常是不可能的；在具有创建/写入访问权限的 Linux 系统上，意味着也具有删除功能 - 没有单独的删除权限位。进一步来说：

*   对目录具有写访问权意味着您可以创建和删除文件，而不管文件本身的权限如何。

*   对文件具有写访问权意味着您可以修改其内容，包括将其截断为零长度，但并不意味着您可以完全删除文件本身。

通常，备份应用程序需要对其执行备份的目标目录进行完全递归写入访问。因此，我希望任何可以在您的设备上*存储*文件的用户也能够删除它们。

如果您希望您的用户存储文件而不能够轻松删除它们，那么通常必须在您的设备用于提供对其文件系统的远程访问的任何服务器进程中实现此类功能。一种可能的方法是让服务器进程在备份文件和目录后自动删除文件和目录的写入权限，以便用户在删除之前必须重置它，从而提供一层防止意外删除的保护。

另一种可能更强大的方法是`chown`在创建文件后让服务器将文件提供给不同的用户，因此要求某人在删除它们之前以不同的帐户登录。这可能意味着使用不同的密码，而不必跳过各种远程访问协议不是为之设计的。

如果您无法让服务器进程提供此功能，则可以通过`cron`更改备份目录中的所有权和权限的作业（例如每隔一小时左右）来实现类似的效果。或者，如果您具有 shell 访问权限，则可以编写一个基于 shell 的守护程序，用于`inotify`在创建文件后立即执行操作。

在旁注中，如果您的设备正在为其磁盘使用文件系统，您可能需要考虑将文件系统用于`ext3`备份目录 - 只要设置了 append-only ( ) 标志，就可以创建文件但不删除文件。此外，将使目标文件不可变，防止删除和/或修改。使用所施加的限制对包括用户在内的所有用户均具有约束力。`ext4``chattr +a``a``chattr +i``chattr``root`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:46:33.610

如果他们有完整的 shell 访问权限，那就不简单了。您可以编写一个名为 'rm' 的 shell 脚本来做一些不同的事情，然后将它放在用户`PATH`之前`/bin`。它会拦截任何在没有明确路径的情况下运行“rm”的尝试。如果真正需要 rm 命令的用户需要运行任何脚本，这可能会导致问题。或者您可以编写一个 shell 函数来执行类似的操作，这也将具有优先权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T14:40:51.960

最简单的选择是

```
alias rm='rm -iv' 
```

它会要求用户按下`'y'<ENTER>`确认。可以使用`\rm`或`rm -f`代替`rm`命令行覆盖/绕过它。
这通常足以防止此类事故。

* * *

如果您想强制用户确认其他内容，例如`YES`大写字符串，您可以创建一个名为`rm`

```
function rm(){
    local REPLY
    echo you are about to execute rm command with below arguments: >&2
    echo "$@" >&2
    read -p "Enter YES to continue" REPLY
    [ "$REPLY" == "YES" ] && /bin/rm -v "$@"
} 
```

如果用户更改 PATH 变量，这不会受到影响。
这可以通过使用`command rm`或`/bin/rm`代替`rm`命令行来覆盖/绕过。

# java - If then else logic not picking up results from String targetID = ((Node) targetId.item(0)).getNodeValue();

> ID：15254452
> 
> 赞同：0
> 
> 时间：2013-03-06T17:51:24.927
> 
> 标签：java, soap

I'm using the results from `String targetID = ((Node) targetId.item(0)).getNodeValue()` in some if logic: `if (targetID == "OK")` and `else if (targetID == "UNKNOWN_USER")`, but both comparisons fail. I print out `targetID` and it displays correctly and displays as `java.lang.String`, so what am I missing here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:52:10.720

Use `equals()` and not `==` for string comparison:

```
if (targetID.equals("OK")) { ... } 
```

etc.

`s1 == s2` compares *references*, which is rarely what you want when comparing strings.

# php - Passing PHP Array to JavaScript Function Not Working

> ID：15254453
> 
> 赞同：1
> 
> 时间：2013-03-06T17:51:25.487
> 
> 标签：php, javascript, arrays, onclick

I am trying to pass a php array to The JavaScript Function `FindCheckBoxes(Test)` using `onClick` functionality. But this code does not seem to work. It Seems like `JSON_ENCODING` is not working.

How do I pass my $array variable to the JavaScript Function. I have searched the internet but can't get it to work. That is, alert spits out nothing(a blank). I want '$array' parameters to be there Here is my code:

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 lt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 lt8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->

    <head>
        <meta charset="UTF-8" />
        <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  -->
        <title>Login and Registration Form with HTML5 and CSS3</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta name="description" content="Facebook Timeline" />
        <meta name="keywords" content="html5, css3, form, switch, animation, :target, pseudo-class" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico"> 
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style1.css" />
        <link rel="stylesheet" type="text/css" href="css/animate-custom.css" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
    <?php 
    $array =array(); 
    array_push($array,"aa");
    ?>
 function comment(){
     var jFirst = document.getElementById("usernamesignup").value;
    alert("Your name is: "+ jFirst);
 }
  function findCheckedBoxes(test) {
  alert("here");
            var select_array= new Array();
alert(test);            
           var AllBoxes = $(".pp");
           for(i=0;i<AllBoxes.length;i++)
           {
               if(AllBoxes[i].checked)
               {

                   select_array.push(foo[i]);
               }
               }
               alert(select_array);
               return true;
       }
 </script>

    </head>
    <body>
    <?php
 //PostID = 0 means its not a constraint 
 function comment($pauthor, $author, $substr, $start, $postid, $end) { 
     $q = "select * from Comment where Author like '".$author."%' and Text like '%".$substr."%' and Time >= '".$start."' and Time <= '".$end."' and (PostID = ".strval($postid)." or ".strval($postid)." = 0) and PostID in (select PostID from Post where Author like '".$pauthor."%')"; 

  return $q; 

 } 

 function user($user, $pre, $post, $sepr) { 
    if($user == 1) return $pre."1".$post.$sepr.$pre."2".$post.$sepr.$pre."3".$post; 
    if($user == 2) return $pre."2".$post.$sepr.$pre."3".$post; 
    //if($user == 3)  
    return $pre."3".$post; 
 } 

 function comb($q1, $q2, $q3) { 
    $str = "'000'"; 
    for($i = $q1; $i <= 3; $i++) { 
        for($j = $q2; $j <= 3; $j++) { 
            for($k = $q3; $k <= 3; $k++) { 
                $str = $str.", '".strval($i).strval($j).strval($k)."'"; 
            } 
        } 
    } 
    return $str; 
 } 

 function perm($g1, $g2, $g3,$union,$user) { 
    if($union) { 
        if($g1 && $g2 && $g3) //return "Permission_bits like %3% or Permission_bits like %2% or Permission_bits like %1%"; 
                                                    return    user($user, "Permission_bits like '%", "%'", " or "); 
        if($g1 && $g2) return user($user, "Permission_bits like '", "__'", " or ").user($user, "Permission_bits like '_", "_'", " or "); 
        if($g2 && $g3) return user($user, "Permission_bits like '__", "'", " or ").user($user, "Permission_bits like '_", "_'", " or "); 
        if($g1 && $g3) return user($user, "Permission_bits like '", "__'", " or ").user($user, "Permission_bits like '__", "'", " or "); 
        if($g1) return user($user, "Permission_bits like '", "__'", " or "); 
        if($g2) return user($user, "Permission_bits like '_", "_'", " or "); 
        if($g3) return user($user, "Permission_bits like '__", "'", " or "); 
        return "Permission_bits = '000'"; 
    } else { 
        if($g1 && $g2 && $g3) return    "Permission_bits in (".comb($user, $user, $user).")"; 
        if($g1 && $g2) return "Permission_bits in (".comb($user, $user, 0).")"; 
        if($g2 && $g3) return "Permission_bits in (".comb(0, $user, $user).")"; 
        if($g1 && $g3) return "Permission_bits in (".comb($user, 0, $user).")"; 
        if($g1) return "Permission_bits in (".comb($user, 0, 0).")"; 
        if($g2) return "Permission_bits in (".comb(0, $user, 0).")"; 
        if($g3) return "Permission_bits in (".comb(0, 0, $user).")"; 
        return "Permission_bits = '000'"; 
    } 
 } 
 ?> 
<?php
$author=$_REQUEST['author'];
$pauthor=$_REQUEST['post_author'];
$text=$_REQUEST['text'];
$start=$_REQUEST['start'];
$end=$_REQUEST['end'];
?>

        <div class="container">
            <!-- Codrops top bar -->
            <div class="codrops-top">

                <span class="right">

                </span>
                <div class="clr"></div>
            </div><!--/ Codrops top bar -->
            <header>
                <h1>FACEBOOK TIMELINE</h1>

            </header>
            <section>               
                <div id="container_demo" >
                    <!-- hidden anchor to stop jump http://www.css3create.com/Astuce-Empecher-le-scroll-avec-l-utilisation-de-target#wrap4  -->
                    <a class="hiddenanchor" id="toregister"></a>
                    <a class="hiddenanchor" id="tologin"></a>
                    <div id="wrapper">
                        <div id="login" class="animate form">
                            <form action="comments.php" autocomplete="on"> 
                                <h1>COMMENTS</h1> 
                                <br>
                                <br>

                                <TABLE>
                                <td>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</td>
                                <td>
<img src="comments.jpg" align="center" width=400>   

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</td>

                                <td>

<FORM id="FORM"  action="comments.php" method="post">
<INPUT TYPE="submit" id="1" VALUE="START A NEW SEARCH HERE " >
</FORM>
                            </td>
                                </TABLE>
                                                                <br>
                                <br>
                                <TABLE BORDER="0" WIDTH=200px ALIGN=CENTER>
<tr>
<h1>YOUR RESULTS</h1>
<INPUT  TYPE="button"  onClick="findCheckedBoxes('<?php  json_encode($array); ?>')" VALUE="CHANGE PERMISSION TO GROUP MEMBERS ONLY" />
<INPUT  TYPE="button"  onclick="findCheckedBoxes()" VALUE="CHANGE PERMISSION TO YOUR FRIENDS ONLY"/>
<INPUT  TYPE="button"  onclick="findCheckedBoxes()" VALUE="CHANGE PERMISSION TO EVERYBODY" />
<?php 
//echo '<FORM id="MYFORM0"  onsubmit="return findCheckedBoxes()" >

//</FORM>.<br>.<br>';
 // Connects to your Database 
 mysql_connect("10.142.233.33", "root", "limiwisn") or die(mysql_error()); 
  //mysql_connect("", "root", "guitar") or die(mysql_error()); 
$count=0;
 mysql_select_db("Ass3") or die(mysql_error()); 
  $datai = mysql_query(comment($pauthor, $author, $text, $start, 0, $end))
  or die(mysql_error());
 while($infoi = mysql_fetch_array( $datai )) 
 {
$count = $count + 1;
 }  
 echo '<tr><td><font size=5>';
 echo "Total number of Comments ->".strval($count)."<br><br>";
 echo '</tr></td></font>';
 echo "<br>";
 mysql_select_db("Ass3") or die(mysql_error()); 
  $datai = mysql_query(comment($pauthor, $author, $text, $start, 0, $end))
  or die(mysql_error());
 echo '<tr><td><font size=4>';

 while($infoi = mysql_fetch_array( $datai )) 
 {
  echo $infoi['CommentID']."<br>";
  echo '<input type="checkbox" class="pp" name="sdfsdg" value="my_checkbox"/>'.'<br>';
  echo $infoi['Author']."<br>";
  echo $infoi['Text']."<br>";
  echo $infoi['Time']."<br><br><br>"; 
  array_push($array,$infoi['CommentID']);
 }  
  echo "<br>";
  echo '</td></tr></font>';
echo '</table>'; 
print_r ($array);
 ?>
                                <br>
                                <br>

                            </form>
                        </div>

                    </div>
                </div>  
            </section>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:54:50.230

`json_encode`只需返回值 - 你仍然需要告诉 php 如何处理它，即。替换这个：

`<?php json_encode($array); ?>`

有了这个：

`<?php echo json_encode($array); ?>`

长时间盯着屏幕可能出现的情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:17:45.913

您必须首先评估 json 代码。您传递给函数的参数是字符串格式。如果不是工作测试，则首先测试删除引号`eval('<?php json_encode($array); ?>')`或`eval( '(' + '<?php json_encode($array); ?>' + ')' )`

# ios - App first Run 和 NSUserDefaults，它让我眼花缭乱。

> ID：15254460
> 
> 赞同：1
> 
> 时间：2013-03-06T17:51:39.107
> 
> 标签：ios, objective-c, uiview, nsuserdefaults

我敢肯定，它告诉我更多关于我的 Objective-c 但我对第一次运行检查感到困惑。我已经阅读了几个关于这个主题的问答，但我无法让它正常工作。

就是这种情况：在 applicationDidFinishLaunchingWitObjects 的 appDelegate.m 文件中，我添加了方法

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if (![defaults objectForKey:@"firstRun"])
    [defaults setObject:[NSDate date] forKey:@"firstRun"];

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

在我的 mainViewController.m 中，我添加了

```
-(void) firstRun
 {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if([defaults objectForKey:@"firstRun"])
{
    CGRect myFrame = CGRectMake(0, 0, 320, 460);
    UIView *myView = [[UIView alloc] initWithFrame:myFrame];
    myView.backgroundColor = [UIColor blueColor];
    [self.view addSubview:myView];
}
} 
```

最后在我的 viewDidLoad 中（在 mainViewcontroller.m 文件中）：

```
 [self firstRun]; 
```

我看到视图已创建（蓝色背景颜色），但下次我再次启动应用程序时，我会看到蓝色背景视图。当我将代码放在其他地方时，根本没有蓝色背景的 UIView。谁能帮我解决这个问题，我知道我偏离了轨道。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:58:23.990

每次都会显示蓝色背景，因为您`"firstRun"`在视图加载之前将键添加到默认值中，因此在视图加载和`[self firstRun]`调用时它始终存在。

有几种方法可以解决这个问题。一个很好的解决方案是在应用程序委托中放置一个布尔属性，在`applicationDidFinishLaunchingWithObjects:`必须设置默认值时将其设置为 true。然后，该`firstRun`方法将检查委托的属性而不是默认值，以确定这是否是第一次运行。

## 例子

**编辑：**该示例现在指的是用户按下接受按钮。参考评论。

在您的 AppDelegate.h 文件中，将以下属性添加到您的界面，在`@end`.

```
@property (nonatomic) BOOL firstRun; 
```

在 AppDelegate.m 中`applicationDidFinishLaunchingWithObjects`，更改您的代码以设置属性。

```
if (![defaults objectForKey:@"firstRun"]) {
    self.firstRun = YES;
} 
```

当用户按下接受按钮时，在您的视图控制器中设置 firstRun 值。这样，如果应用程序在用户接受之前终止，他们仍然会收到他们必须接受的屏幕。

```
- (void) acceptTouched {
    ...
    if (![defaults objectForKey:@"firstRun"]) {
        [defaults setObject:[NSDate date] forKey:@"firstRun"];
    }
    ...
} 
```

最后，更改您的`firstRun`方法以查看属性而不是默认值。

```
- (void) firstRun {
    if (((AppDelegate*)[UIApplication sharedApplication].delegate).firstRun)
    {
        ...
    }
} 
```

显然，更改`AppDelegate`以匹配您的应用程序委托类的名称。

# c++ - When is it appropriate to use 'auto' in C++?

> ID：15254461
> 
> 赞同：11
> 
> 时间：2013-03-06T17:51:42.757
> 
> 标签：c++, design-patterns, auto

I'm struggling to come up with some consistent rules for myself for when to use 'auto' in a C++ program. Here are my pro/con lists, perhaps you can help me by giving me your input.

Pro:

*   'auto' is good for avoiding complex and large template declarations (e.g. the classic use case of auto to define the iteration variable over an STL container)

*   'auto' is good for future-proofing code. For example, if I have an array of ints and I want to change it to unsigned ints, if I've used 'auto' when I refer to elements of that array, things will automatically update. Of course, that would also have occurred had I used a typedef for the array.

Cons:

*   'auto' makes it hard to read code. I have no idea if the declaration is a pointer or value. I have no idea if it might have a constructor and destructor.

*   'auto' makes me lazy. I can forget about the types and just write code. But in C++, the types are very important to the semantics of the program.

**When does you guys use Auto? and when do you prefer not to use it?**

# ruby-on-rails - Rails Valums Ajax 上传

> ID：15254470
> 
> 赞同：3
> 
> 时间：2013-03-06T17:52:16.867
> 
> 标签：ruby-on-rails, ajax, upload, fine-uploader

我正在尝试让 Valums 上传器与我的 Rails 项目一起工作，但遇到了很多困难。

我目前使用标准模型和视图使用 Paperclip 进行非常简单的上传过程... **模型**

```
class User
  include Mongoid::Document
  include Mongoid::Paperclip

  has_mongoid_attached_file :image 
```

**控制器**

```
 def avatar
    @user = current_user
    respond_to do |format|
      format.html
    end
  end
  #working on the updateimage method
    def update
      file = params[:qqfile].is_a?(ActionDispatch::Http::UploadedFile) ? params[:qqfile] : params[:file]
        @user = current_user
        if @user.update_attributes(params[:user])
            render :text => '{"success": true}', :content_type => "application/json"
       else
            render :text => @user.errors.to_json, :content_type => "application/json"
       end
     end 
```

**看法**

```
= form_for(@user, :as => @user, :url => '/updateimage', :html => { :method => :post, :multipart => true }) do |f|
    #file-uploader
    =@user.firstname
    %img{:src => current_user.image}
    = f.file_field :image
    = f.submit 
```

*Sooooooo ...*这一切都有效，但是当我尝试使用Valums jQuery时：

```
 $('#file-uploader').fineUploader({
    debug: true,
    autoSubmit: true,
    allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
    sizeLimit: 1048576, // max size: 1MB
    minSizeLimit: 0, // min size
    multiple: false,
    request: {
        endpoint: '/updateimage',
        paramsInBody: true
        }
    }); 
```

我明白了：

```
undefined method `update_attributes' for nil:NilClass 
```

我很想让这个工作，但我对一般编程有点陌生，所以它对我来说仍然是一件相当抽象的事情。我很乐意提供额外的日志信息，只要告诉我在哪里可以找到它。

**路线**

```
 admin_index GET    /admin(.:format)                       admin#index
                         POST   /admin(.:format)                       admin#create
               new_admin GET    /admin/new(.:format)                   admin#new
              edit_admin GET    /admin/:id/edit(.:format)              admin#edit
                   admin GET    /admin/:id(.:format)                   admin#show
                         PUT    /admin/:id(.:format)                   admin#update
                         DELETE /admin/:id(.:format)                   admin#destroy
                  orders GET    /orders(.:format)                      orders#index
                         POST   /orders(.:format)                      orders#create
               new_order GET    /orders/new(.:format)                  orders#new
              edit_order GET    /orders/:id/edit(.:format)             orders#edit
                   order GET    /orders/:id(.:format)                  orders#show
                         PUT    /orders/:id(.:format)                  orders#update
                         DELETE /orders/:id(.:format)                  orders#destroy
                 entries GET    /entries(.:format)                     entries#index
                         POST   /entries(.:format)                     entries#create
               new_entry GET    /entries/new(.:format)                 entries#new
              edit_entry GET    /entries/:id/edit(.:format)            entries#edit
                   entry GET    /entries/:id(.:format)                 entries#show
                         PUT    /entries/:id(.:format)                 entries#update
                         DELETE /entries/:id(.:format)                 entries#destroy
              home_index GET    /home(.:format)                        home#index
                         POST   /home(.:format)                        home#create
                new_home GET    /home/new(.:format)                    home#new
               edit_home GET    /home/:id/edit(.:format)               home#edit
                    home GET    /home/:id(.:format)                    home#show
                         PUT    /home/:id(.:format)                    home#update
                         DELETE /home/:id(.:format)                    home#destroy
                  avatar        /avatar(.:format)                      home#avatar
             updateimage POST   /updateimage(.:format)                 home#update
                    root        /                                      home#home
                    root        /                                      home#index
        new_user_session GET    /users/sign_in(.:format)               devise/sessions#new
            user_session POST   /users/sign_in(.:format)               devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)              devise/sessions#destroy
 user_omniauth_authorize        /users/auth/:provider(.:format)        users/omniauth_callbacks#passthru {:provider=>/facebook/}
  user_omniauth_callback        /users/auth/:action/callback(.:format) users/omniauth_callbacks#(?-mix:facebook)
           user_password POST   /users/password(.:format)              devise/passwords#create
       new_user_password GET    /users/password/new(.:format)          devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)         devise/passwords#edit
                         PUT    /users/password(.:format)              devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                users/registrations#cancel
       user_registration POST   /users(.:format)                       users/registrations#create
   new_user_registration GET    /users/sign_up(.:format)               users/registrations#new
  edit_user_registration GET    /users/edit(.:format)                  users/registrations#edit
                         PUT    /users(.:format)                       users/registrations#update
                         DELETE /users(.:format)                       users/registrations#destroy
       user_confirmation POST   /users/confirmation(.:format)          devise/confirmations#create
   new_user_confirmation GET    /users/confirmation/new(.:format)      devise/confirmations#new
                         GET    /users/confirmation(.:format)          devise/confirmations#show
                    user GET    /users/:id(.:format)                   users#show 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:43:27.857

**更新：**我认为值得尝试不理会`users#update`并为文件上传创建单独的操作。

至于路由，FineUploader 仅执行`POST`请求，因此您必须添加新路由，因为`POST`对端点的请求`/users`会触发`users#create`您不想要的操作。

```
match '/avatar', :to => 'users#avatar', :via => :post 
```

此外，您必须在服务器端处理文件上传。[这个 wiki 页面](https://github.com/Widen/fine-uploader-server/wiki/Rails---CarrierWave)描述了两种方法。例如，您可以使用`rack-raw-upload`gem 并将控制器代码更改为以下内容：

```
def update
  # this action does not handle AJAX file upload
  # ...
end

def avatar
  file = params[:qqfile].is_a?(ActionDispatch::Http::UploadedFile) ? params[:qqfile] : params[:file]
  @user = current_user
  if @user.update_attributes({ :image => file })
    render :json => { :success => true }
  else
    render :json => { :success => false }
  end
end 
```

请注意，必须有一行`config/application.rb`（如果您使用`rack-raw-upload`gem）：

```
config.middleware.use 'Rack::RawUpload' 
```

此外，似乎`paramsInBody`应该属于`request`参数：

```
$('#file-uploader').fineUploader({
    request: {
        endpoint: "/avatar",
        paramsInBody: true
    },
    debug: true
}) 
```

**最后一点：**发出 AJAX 请求时，CSRF 令牌必须包含在标头中，以启用用户身份验证。可以通过编辑`setHeaders`函数来完成`fineuploader.js`——在这个函数中添加以下行：

```
xhr.setRequestHeader("X-CSRF-Token", $("meta[name='csrf-token']").attr("content")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:29:58.850

如果您已经发布了整个路线，那么您就错过了端点路线。例如：

```
put "/avatar" => "your_controller#update" 
```

ps：在客户端或服务器端调整http动词（放置或发布）

您的`update`JSON 输出应如下所示（根据 valums 项目 wiki）：

```
if @photo.save
  render json: {:success => true, :src => @photo.image.url(:thumb)}
else
  render json: @photo.errors.to_json
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T20:29:43.137

该错误意味着您没有在响应中返回有效的 JSON。有关更多信息，请参阅项目的[服务器端自述](http://docs.fineuploader.com/integrating/server/)文件。另一种可能性是您的端点地址不正确。

# android - how to fix invalid url or port error in Android?

> ID：15254472
> 
> 赞同：0
> 
> 时间：2013-03-06T17:52:21.623
> 
> 标签：android

```
String str1="http://10.0.2.2/moodle";   
String str4="admin";
String str5="S12345s@";

try{
    String getToken = str1 + "/login/token.php?username=" + str4 + "&password=" + str5 + "&service=moodle_mobile_app";
    String inputLine = null; 
    URL url = new URL(getToken.toString()); 
    System.out.println("Port----------->"+url.getPort());
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream())); 
    while ((inputLine = in.readLine()) != null) { 
        System.out.println("test1"+inputLine); 
    } 
    in.close(); 
} catch(Exception e) {
    System.out.println(e.toString());
}
} 
```

when i try to get the token from localhost moodle course web and i got port number as -1. I got this error":"Invalid url or port. for above code please help me to fix this error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T08:42:59.607

我有同样的问题。`config.php`为了解决它，我必须在位于 Moodle 根文件夹中的文件中编辑以下行（`/var/www/moodle/config.php`在我的例子中，在 Ubuntu 12.10 上）：

```
$CFG->wwwroot   = 'http://10.0.2.2/moodle'; 
```

您必须使用您的设备将看到的 IP 地址作为 Moodle 网络服务器的主机（在模拟器的情况下，主机位于 10.0.2.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:50:02.367

您可能想查看[URI 构造函数](http://developer.android.com/reference/java/net/URI.html)并改用它们。手工建造是一种不好的方法。

# java - 当存在非空的连续元素时需要反转数组的逻辑

> ID：15254477
> 
> 赞同：1
> 
> 时间：2013-03-06T17:52:25.283
> 
> 标签：java, arrays

**我有一个大小为 5**的数组，我需要根据非空值来反转值。

非空值是连续的，但它们可以出现在任何索引中：例如，我可以有 3 个非空值：

```
c[0], c[1], c[2] or 
c[1], c[2], c[3] or
c[2], c[3], c[4] 
```

或其中 4 个以任何顺序出现..

```
c[0], c[1], c[2], c[3] or
c[1], c[2], c[3], c[4] or 
```

仅当值非空时，我才需要反转数组。因此，在情况 1 中，我将有 c[2]、c[1]、c[0] 等等。

案例将有 c[3]、c[2]、c[1] 等等。

非空元素的数量和数组是动态的并且是根据请求生成的。我无法将元素移动到以索引 0 开头，因为某些外部代码依赖于索引。我所要做的就是反转这个数组并将其发回。

我正在尝试使用哈希图来标记索引，并标记数组中非空元素的数量。不知道在此之后如何进行，任何想法将不胜感激！

```
 HashMap<Integer, String> myHash = new HashMap<Integer, String>(); 

        for(int i = c.length-1; i<=0 ; i--)
            {
                    if(StringUtils.isNotBlank(c[i]))
                    { 
                        countNonEmpty++;
                        myHash.put(i, c[i]); //We need to mark the index and decrement by the countNonEmpty
                       }                
            }

get the first hash element - 
Iterator iter   = myHash.keySet().iterator(); 
 while(iter.hasNext())  
             {
                 Integer correctIndex = (Integer) iter.next();

//But all I need is the first element in hashMap to decide how to set the reverse array's index.           
       if(myHash.size() - correctIndex < 0 )  //This means it will have to be 0 to index for array
                  {  
                     //What is the right index for c[] 
                       c[correctIndex - myHash.size() + 1 ] = myHash.get(correctIndex);
                      continue;
                  }
                  else if(myHash.size() - correctIndex == 0)
                  {   //What is the right index for c[]
                       c[correctIndex - myHash.size() + 1 ] = myHash.get(correctIndex);
                      continue;    
                  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:56:57.957

您不需要任何辅助数据结构：

1.  通过从开始和结束扫描数组来查找第一个和最后一个非空元素的索引。

2.  交换第一个和最后一个元素。

3.  增加第一个索引，并减少最后一个索引。

4.  重复第 2 步和第 3 步`first_index < last_index`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:36:01.930

这是一个使用`java.util.Arrays`和`java.util.Collections`执行交换的解决方案的快速演示。

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class Reverse
{
    static String[] inputArray = new String[5];

    public static void main(String[] args)
    {
        inputArray[2] = "John";
        inputArray[3] = "Sally";
        inputArray[4] = "Fred";

        int startIndex = 0;
        int endIndex = inputArray.length;

        boolean foundStart = false;
        boolean foundEnd = false;
        System.out.println("before sort");
        for (int index = 0; index < inputArray.length; index++)
        {
            System.out.println(inputArray[index]);

            if (!foundStart && inputArray[index] != null)
            {
                startIndex = index;
                foundStart = true;
            }

            if (foundStart && !foundEnd && inputArray[index] == null)
            {
                endIndex = index;
                foundEnd = true;
            }
        }

        System.out.println("\nafter sort");
        List<String> swapList = Arrays.asList(Arrays.copyOfRange(inputArray, startIndex, endIndex));
        Collections.reverse(swapList);
        System.arraycopy(swapList.toArray(new String[swapList.size()]), 0, inputArray, startIndex, swapList.size());

        for (int index = 0; index < inputArray.length; index++)
        {
            System.out.println(inputArray[index]);
        }
    }
} 
```

# iphone - 从本地通知启动时，应用程序显示拉伸的应用程序图标而不是启动图像

> ID：15254478
> 
> 赞同：0
> 
> 时间：2013-03-06T17:52:28.450
> 
> 标签：iphone, ios

如果通过点击它启动它，它会在显示第一个视图控制器之前显示它的启动图像，就像往常一样。

现在，我的应用程序会定期生成本地通知。如果应用程序未处于活动状态并且用户点击通知，则应用程序启动。我希望它在显示第一个视图控制器之前显示其启动图像，就像其他应用程序从通知启动时一样。但就在显示第一个视图控制器之前，我的应用程序显示了它的应用程序图标（拉伸以填满屏幕）而不是显示启动图像。

*   **我的代码中没有**提到图标文件 ( `icon.png`) 。
***   我尝试在我的 Info.plist 文件中设置`Default.png`为的值`UILaunchImageFile`，但没有任何区别。**

 **为什么不显示启动图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:38:07.330

确保正确设置本地通知对象的[*alertLaunchImage*](http://developer.apple.com/library/ios/documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/instp/UILocalNotification/alertLaunchImage)属性。您可以在此处指定当用户使用通知打开应用程序时要显示为启动图像的图像。您可以将其设置`nil`为显示 App 默认启动画面。**

# git - 反转 git fetch

> ID：15254480
> 
> 赞同：24
> 
> 时间：2013-03-06T17:52:38.933
> 
> 标签：git, git-fetch

我对 git 以及 pull、fetch 和 merge 之间的区别有一个透彻的了解。我有一个遥控器，我偶尔会跟踪、获取和合并，假设它是源/主。我要做的是扭转'git fetch'的行为。这听起来很愚蠢，但我想取消更新我的远程跟踪分支指向的旧状态，即上次获取之前的状态。这可能吗？

例如，假设这是我的工作流程......

```
git show origin/master # shows commit abc123

git fetch              # yay i got something!

git show origin/master # shows commit def456 
```

**神秘的命令在这里，所以......**

```
git show origin/master # shows commit abc123 
```

想要这有点奇怪，但我有一个 crontab 可以监视 git repo 以检测何时需要获取某些内容，并且我在调试基于此行为执行某些操作的脚本时遇到了问题。我不想等待 origin/master 更改，而是自己更改它，以便调试我的脚本！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T18:14:36.350

你要

> `git update-ref refs/remotes/origin/master refs/remotes/origin/master@{1}`

`update-ref`想要它正在更新的 ref 的完整拼写，因为它的级别（远）低于尊重 ref 命名约定的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-28T15:45:00.960

这不是“反向 git fetch”的答案，但您的*实际*问题似乎是如何以编程方式“观察存储库的更改”，而不必以任何方式更改您的存储库。

为此，您可以使用`git fetch --dry-run`. 空运行不会对您的存储库造成任何更改，但是如果远程有更改，那么它将有一些基本的终端输出；如果没有更改，则不会有任何输出。如果您想让它作为自动脚本运行而不是手动检查，那么创建一个简单的 bash 脚本来测试`git fetch --dry-run`输出应该相对简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:10:14.830

我不确定是否有一个实际的 git 命令来执行它，这是一个很大的hackish，但是......

```
echo $OLD_COMMIT > .git/refs/remotes/origin/master 
```

应该管用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:13:23.677

我希望这次我得到了你想要的，我认为是这样的：

```
git rebase origin/master --onto origin/master^ 
```

# grails - Can I do a math operation inside a createCriteria

> ID：15254483
> 
> 赞同：0
> 
> 时间：2013-03-06T17:52:46.740
> 
> 标签：grails, createcriteria

Is it posible to do a math problem inside a createCriteria?

For example:

If in my table I have two columns, if the two together make 100 I don't want to show it in my result of the query

or

if the other column is in other table?

table

```
column 1  column 2

  50        50
  20        20 
```

I want the second row

or

```
table 1       table 2 

  50            50
  20            20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:18:21.090

一种选择是在您的域类中定义一个公式字段。就像是：

```
class SumFormula {
    Integer column1
    Integer column2
    Integer sum

    static mapping = {
        sum formula: 'column1 + column2'
    }
} 
```

然后，您可以应用以下条件：

```
SumFormula.createCriteria().list() {
    ne("sum", 100)
} 
```

# jquery - 希望优化以下 JQuery 代码

> ID：15254484
> 
> 赞同：1
> 
> 时间：2013-03-06T17:52:47.760
> 
> 标签：jquery, html, filter, switch-statement, parents

我有 4 个浮动 div，当您将鼠标悬停在 div 内的 A 标签上时，一个 div 将显示在这 4 个 div 的底部，对应于点击发生的 div。据我所知，我已经优化了 JQuery，但我只是想看看是否还有其他解决方案。

**我的小提琴：http:** [//jsfiddle.net/jonxblaze/PyHH5/](http://jsfiddle.net/jonxblaze/PyHH5/)

**HTML**

```
<div class="wrap">
<div class="promo red">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

    <p><a href="#">More</a></p>
</div> 
<div class="promo yellow">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

    <p><a href="#">More</a></p>
</div>    
<div class="promo blue">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

    <p><a href="#">More</a></p>
</div>
 <div class="promo black">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

    <p><a href="#">More</a></p>
</div>
<div style="clear:both"></div> 
```

```
<div class="red wide-full">RED CONTENTS</div>
<div class="yellow wide-full">YELLOW CONTENTS</div>
<div class="blue wide-full">BLUE CONTENTS</div>
<div class="black wide-full">BLACK CONTENTS</div> 
```

**jQuery**

```
$('.yellow.wide-full, .blue.wide-full, .black.wide-full').hide();

$('.promo a').hover( function() {

            var parentDiv = $(this).parents().filter('.promo'),
                wideFull  = $('.wide-full');    

            switch (true) { 
                case parentDiv.hasClass('red'):
                    $('.red.wide-full').show();
                    wideFull.not('.red').hide();
                    break; 
                case parentDiv.hasClass('yellow'):
                    $('.yellow.wide-full').show();
                    wideFull.not('.yellow').hide();
                    break;                  
                case parentDiv.hasClass('blue'):
                    $('.blue.wide-full').show();
                    wideFull.not('.blue').hide();
                    break; 
                case parentDiv.hasClass('black'): 
                    $('.black.wide-full').show();
                    wideFull.not('.black').hide();
                    break;  
            }
        }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:00:19.057

您还可以使用`data`属性来引用相应的 div：

```
$('.wide-full:not(.red)').hide();

$('.promo a').hover(function() {
    $('.wide-full').hide().filter('.' + $(this).data('type')).show();
}); 
```

[http://jsfiddle.net/PyHH5/3/](http://jsfiddle.net/PyHH5/3/)

为此，我稍微修改了 HTML：

```
<a href="#" data-type="yellow">More</a> 
```

# c# - 如何过滤树结构？

> ID：15254486
> 
> 赞同：1
> 
> 时间：2013-03-06T17:52:49.270
> 
> 标签：c#, tree

我有一棵对象树`MyNode`：

```
public class MyNode
{
   public int Type { get; set; }
   public List<MyNode> Children { get; set; }
}

MyNode myRootNode;
// initializing a tree structure 
```

所以我需要删除所有节点，除了

1.  具有`Type`属性的节点等于`int myType`

2.  在其子节点中包含具有`Type`属性的任何级别节点的节点等于`int myType`

我的方式：

```
bool Filter(MyNode node, MyNode parentNode, int type)
{
   bool isFound = false;

   if (node.Type == type)
      isFound = true; // There's type

   foreach (MyNode child in node.Children)
   {
      if (FilterTree(child, node, type))
          isFound = true; // There is child node who has this type
   }

   // If there aren't this type neither any of its children has it
   if (!isFound)
   {
      parentNode.Children.Remove(node);
   }

   return isFound;
} 
```

我有一个例外：`Collection was modified; enumeration operation may not execute.`我认为那是因为我删除了列表中的元素。有没有办法以正确的方式做到这一点？或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:15:27.883

假设始终保留根节点，您可以删除方法中的子节点，而不是节点本身。

```
bool Filter(MyNode node,int type)
{
//remove children
foreach(MyNode child in node.Children.Where(c=>!Filter(c, type)).ToArray())
    node.Children.Remove(child);
//return if should be retained
return node.Type==type || node.Children.Count>0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T18:17:31.570

Linq 来拯救你：

```
public static void RemoveNodesRecursive(this MyNode node, Predicate<MyNode> predicate)
{
    node.Children.RemoveAll(predicate);
    foreach (var n in node.Children)
    {
        RemoveNodes(n);
    }
} 
```

然后从根节点开始：

```
myRootNode.RemoveNodesRecursive(n => n.node.Type == myType) 
```

# windows - Windows Install of PhantomJS fails

> ID：15254488
> 
> 赞同：11
> 
> 时间：2013-03-06T17:52:53.313
> 
> 标签：windows, windows-7, gruntjs, npm, phantomjs

I am attempting to install PhantomJS 1.8.1-3 on windows via npm. It appears to fail regardless of what I do. Here's the command I am running:

```
npm install phantomjs 
```

After executing that command, it fails with the following errors:

```
 > phantomjs@1.8.1-3 install c:\johnprojects\tablet\htdocs\mini-app-sandbox\node_
modules\grunt-contrib-qunit\node_modules\grunt-lib-phantomjs\node_modules\phanto
mjs
> node install.js

Requesting c:\johnprojects\tablet\htdocs\mini-app-sandbox\node_modules\grunt-con
trib-qunit\node_modules\grunt-lib-phantomjs\node_modules\phantomjs\tmp\phantomjs
-1.8.1-windows.zip

events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: connect ECONNREFUSED
    at errnoException (net.js:770:11)
    at Object.afterConnect [as oncomplete] (net.js:761:19)
npm ERR! phantomjs@1.8.1-3 install: `node install.js`
npm ERR! `cmd "/c" "node install.js"` failed with 1
npm ERR!
npm ERR! Failed at the phantomjs@1.8.1-3 install script.
npm ERR! This is most likely a problem with the phantomjs package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node install.js
npm ERR! You can get their info via:
npm ERR!     npm owner ls phantomjs
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "c:\\Program Files (x86)\\nodejs\\node.exe" "c:\\Program Files
(x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "grunt-contrib-quni
t" "--save-dev"
npm ERR! cwd c:\johnprojects\tablet\htdocs\mini-app-sandbox
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.1.32
npm ERR! code ELIFECYCLE
npm ERR! message phantomjs@1.8.1-3 install: `node install.js`
npm ERR! message `cmd "/c" "node install.js"` failed with 1
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     c:\johnprojects\tablet\htdocs\mini-app-sandbox\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T21:41:54.907

虽然我不知道*为什么*会发生这种情况，但我可以在 phantomjs zip 文件步骤中解决来自“npm install”的 ECONNREFUSED 错误，只需手动单独下载 zip 文件，将其放在下载所在的 tmp 目录中试图写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:53:06.303

phantomjs 还不兼容节点 0.10。你需要 0.08： [https ://github.com/yeoman/yeoman/issues/986](https://github.com/yeoman/yeoman/issues/986)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T10:53:17.273

我在安装 grunt-html-snapshot@0.6.1 (html-snapshots => same prob) 时遇到了一个类似的问题，其中 phantomjs@1.9.15 是一个依赖项。

我没有得到完全相同的错误。你在哪里

```
Error: connect ECONNREFUSED 
```

我有

```
Error: EPERM, operation not permitted 
```

[我的问题是修复了权限问题，您可以在 github HERE](https://github.com/Medium/phantomjs/issues/19)上找到“BohemMedia”评论

其他方法对我不起作用。

您的问题是连接被拒绝。您是否尝试关闭防火墙和其他可能阻止连接的安全程序？

# php - 在 PHP if 语句中使用查询字符串值

> ID：15254491
> 
> 赞同：-1
> 
> 时间：2013-03-06T17:53:05.830
> 
> 标签：php, if-statement, query-string

如何在 PHP 中编写一个 IF 条件来检查 URL 是否包含名为“first”的查询字符串项并且其值设置为“true”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:55:07.787

没看懂问题，但你是这个意思吗？

```
if($_GET['first'] == 'true') {
  echo 'foo';
} 
```

# hadoop - Wrong redirect from Hadoop HDFS NameNode to localhost:50075

> ID：15254492
> 
> 赞同：2
> 
> 时间：2013-03-06T17:53:09.320
> 
> 标签：hadoop, hdfs

I have installed apache hadoop on my virtual machine and configured it to run in pseudo distributed mode. Everything seems to work fine except one thing. I can list files and create folders using hadoop command line in my virtual machine.

When i open

```
http://192.168.20.200:50070 (virtual machine IP) 
```

from my not virtual PC, i can see some NameNode information and link "Browse the filesystem". This link has following URL:

```
http://192.168.20.200:50070/nn_browsedfscontent.jsp 
```

When i click it i'm being redirected to

```
http://localhost:50075/browseDirectory.jsp?namenodeInfoPort=50070&dir=/ 
```

If i replace "localhost" to "192.168.20.200" everything works.

core-sites.xml

```
<configuration>
<property>
  <name>fs.default.name</name>
  <value>hdfs://localhost/</value>
  <description>...</description>
</property>
</configuration> 
```

hdfs-site.xml

```
<property>
  <name>dfs.replication</name>
  <value>1</value>
  <description>Default block replication.</description>
</property>
<property>
  <name>dfs.name.dir</name>
  <value>/app/hadoopstorage/name/</value>
</property>

<property>
  <name>dfs.data.dir</name>
  <value>/app/hadoopstorage/data/</value>
</property>
<property>
  <name>dfs.webhdfs.enabled</name>
  <value>true</value>
</property> 
```

Does anybody know how to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:29:33.460

当我的 /etc/hosts 文件是这样时，一切似乎都正常

```
127.0.0.1   localhost
127.0.1.1   name1
192.168.20.200 192.168.20.200  <--- added this line 
```

但它看起来很奇怪。这样做是否正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T20:08:53.397

`127.0.0.1 (localhost)`如果`HOSTNAME`在 HOSTS 文件中指定了错误的 IP 地址，则服务在 Hadoop 生态系统中获取并报告回环适配器地址是很常见的。

如果您要使用该`/etc/hosts`文件进行此路由，请确保在`::1`or`127.0.0.1`行中仅存在“localhost”或“localhost.localdomain”。

# linq - 在列表中查找重复项

> ID：15254493
> 
> 赞同：1
> 
> 时间：2013-03-06T17:53:10.290
> 
> 标签：linq, list, duplicates

我有一个与以下相同的人员列表：

```
List<Person> Persons=New List<Person> 
```

Person 类包含一些属性，例如 Id,Firstname,LastName,Age,... 在此列表中存在一些具有相同 Firstname 和 LastName 的重复对象

我如何识别和找到重复的对象 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:55:49.910

来自[Eric White 的博客](http://blogs.msdn.com/b/ericwhite/archive/2008/08/19/find-duplicates-using-linq.aspx)：

```
int[] listOfItems = new[] { 4, 2, 3, 1, 6, 4, 3 };
var duplicates = listOfItems
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key);
foreach (var d in duplicates)
    Console.WriteLine(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:56:47.507

如果我没记错的话，如果这是你所追求的，这应该创建一个唯一的列表：

```
List<String> list2 = new ArrayList<String>(new HashSet<String>(list1)); 
```

# jquery - cssHooks: multiple CSS selectors in one function

> ID：15254495
> 
> 赞同：0
> 
> 时间：2013-03-06T17:53:21.893
> 
> 标签：jquery

I have this function using cssHooks to convert the background-color's rgb color to a HEX value. My question is this, I also want to do it the border-color and text color. Do I need to create 3 separate functions or can I combine?

**EDIT**: So here's 3 functions. I'm having a hard time trying to combine all three into one - to make the code cleaner. How can I combine all 3 into one hook?

```
$.cssHooks.backgroundColor = {
get: function(elem) {
    if (elem.currentStyle)
        var bg = elem.currentStyle["background-color"];
    else if (window.getComputedStyle)
        var bg = document.defaultView.getComputedStyle(elem,
            null).getPropertyValue("background-color");
    if (bg.search("rgb") == -1)
        return bg;
    else {
        bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
        function hex(x) {
            return ("0" + parseInt(x).toString(16)).slice(-2);
        }
        return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
    }
}
}

$.cssHooks.borderColor = {
get: function(elem) {
    if (elem.currentStyle)
        var bg = elem.currentStyle["border-color"];
    else if (window.getComputedStyle)
        var bg = document.defaultView.getComputedStyle(elem,
            null).getPropertyValue("border-color");
    if (bg.search("rgb") == -1)
        return bg;
    else {
        bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
        function hex(x) {
            return ("0" + parseInt(x).toString(16)).slice(-2);
        }
        return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
    }
}
}

$.cssHooks.color = {
get: function(elem) {
    if (elem.currentStyle)
        var bg = elem.currentStyle["color"];
    else if (window.getComputedStyle)
        var bg = document.defaultView.getComputedStyle(elem,
            null).getPropertyValue("color");
    if (bg.search("rgb") == -1)
        return bg;
    else {
        bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
        function hex(x) {
            return ("0" + parseInt(x).toString(16)).slice(-2);
        }
        return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:27:36.393

这会更改所有值输入...而不仅仅是单个 CSS 选择器...

```
$.cssHooks.colorz = {
get: function(elem, rule) {
if (elem.currentStyle)
    var bg = elem.currentStyle[rule];
else if (window.getComputedStyle)
    var bg = document.defaultView.getComputedStyle(elem,
        null).getPropertyValue(rule);
if (bg.search("rgb") == -1)
    return bg;
else {
    bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T17:32:44.970

你可以这样做：

```
 function _register_jquery_get_hex_color(newname,styleattr) {
    $.cssHooks[newname] = {
        get: function(elem) {
            if (elem.currentStyle)
                var bg = elem.currentStyle[styleattr];
            else if (window.getComputedStyle)
                var bg = document.defaultView.getComputedStyle(elem,
                    null).getPropertyValue(styleattr);
            if (bg.search("rgb") == -1)
                return bg;
            else {
                bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
                function hex(x) {
                    return ("0" + parseInt(x).toString(16)).slice(-2);
                }
                return hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
            }
        }
    }
}
_register_jquery_get_hex_color("backgroundColor","background-color");
_register_jquery_get_hex_color("borderColor","border-color");
_register_jquery_get_hex_color("color","color"); 
```

# java - Prefix each member of an xpathexpression nodelist

> ID：15254496
> 
> 赞同：0
> 
> 时间：2013-03-06T17:53:27.717
> 
> 标签：java, xml, xpath

I would like to construct an xpath query such that [xpathexpression](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPathExpression.html).evaulate returns a list of values prefixed with an arbitrary string.

Achieving this with a single result is a simple `concat('PREFIX:',/returns/one/node)`, although the valid xpath query `/returns/many/nodes/concat('PREFIX:',text())` is not accepted by [xpathexpression](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPathExpression.html).evaulate.

Here is my function call:

`NodeList resultNodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET); String collectionIDs[] = new String[resultNodes.getLength()];`

This is the error I receive:

`javax.xml.transform.TransformerException: Unknown nodetype: concat`

Does anyone know of an evaluate-friendly alternative?

Thank you in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:37:00.937

那是因为您的“有效 xpath 查询”无效。`concat()`是一个接受参数的函数，这就是为什么你的第一个 xpath:`concat('PREFIX:',/returns/one/node)`被正确使用并工作的原因。

当您像在此处那样将其放置在 xpath 的末尾时：`/returns/many/nodes/concat('PREFIX:',text())`它正在尝试查找名为“concat”的节点类型，该节点类型不存在，因此您收到了错误。

`expr.evaluate()`将评估您`concat('PREFIX:',/returns/one/node)`作为参数，但由于它期望返回类型为节点列表，并`concat()`返回一个字符串类型，这也不起作用，因此您有几个选择：

你必须给你的 xpath `/returns/many/nodes`，`evaluate()`然后`String[]`用“PREFIX:”设置你的索引 0，然后再用你的 XPath 结果填充它。

或者

您可以评估`concat('PREFIX:',/returns/one/node)`xpath 并将预期类型更改为字符串，但是您需要处理一个长字符串。

# jquery - 加载时 jQuery UI Datepicker 本地化错误

> ID：15254497
> 
> 赞同：2
> 
> 时间：2013-03-06T17:53:29.277
> 
> 标签：jquery, jquery-ui, localization, datepicker

我正在尝试使用默认语言环境包含 jQuery UI 日期选择器

```
jQuery(document).ready(function($){    
    $.datepicker.setDefaults($.datepicker.regional["it"]);
    $('#div-where-place-datepicker').datepicker({
        "dateFormat": "dd/mm/yy"
    });
}); 
```

根据[文档](http://jqueryui.com/datepicker/#inline)，我将其添加到 div 中，因此日期选择器在页面加载时内联显示（如日历）。

问题是，在页面加载之后，日历没有本地化（英文文本），在我与之交互之后，它加载了本地化（它变成了意大利语）。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:09:54.373

我发现问题出在哪里并解决了:)

我在页脚中包含脚本（包括本地化 i18n）以加快页面加载（在我的初始化脚本之后），所以我将脚本移动到页眉中（在我的初始化脚本之前），现在首先加载本地化执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:00:08.123

只是猜测，但在创建 datepicker 实例后尝试设置默认值。

另一个选项可能是在创建该特定实例时尝试设置该特定实例的本地化，而不是设置默认值然后创建它。每个 jquery UI 文档

```
$( "#datepicker" ).datepicker( $.datepicker.regional[ "fr" ] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T09:11:01.890

我遇到过同样的问题。我的解决方案是不在匿名函数中包装 datepicker 函数。

```
//jQuery(function($){
    $.datepicker.regional['de'] = {...};
    $.datepicker.setDefaults($.datepicker.regional['de']);
//}); 
```

# javascript - 从 JavaScript 数组中取出 3 个随机图像和 1 个链接到其中一个图像的单词，并以单独的 div 显示在屏幕上

> ID：15254499
> 
> 赞同：2
> 
> 时间：2013-03-06T17:53:35.673
> 
> 标签：javascript, arrays, image, random

我正在创建网络游戏，其中将在屏幕上显示 3 张图像，用户必须单击与单词匹配的图像（也在屏幕上）

到目前为止，我已经制作了一个包含图像和单词的 JavaScript 数组（从数据库中填充），并设法在屏幕上的 3 个单独的 div 中从数组中打印 3 个随机图像。

目前，我真的很难同时打印出三个“属于”屏幕上随机图像之一的图像。

这是我当前的代码：-

```
 <script>
  var items = [
  <?php
  $con = mysql_connect("localhost","*****","******");
  if (!$con) {
    die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("learning_game", $con);
  $result = mysql_query("SELECT * FROM data");
  $first = true;

  while ($row = mysql_fetch_array($result)) {
    if (!$first) {
      echo ",";
    }
    $first = false;
    echo "{name:'" . $row['word'] . "',image:'" . $row['image'] ."'}";
}
  mysql_close($con);
  ?>    
  ];
for (var i = 0; i < items.length; i += 1) {

  }  

   document.write("<br /> <br /> <br />");

 console.log(items);
 top.items = items;

 var images = new Array();
  var list = document.getElementsByTagName('div')[0];
   for(i = 0; i < 3; i++) {

         // Choose a random item and remove it from the array
       var item = items.splice(Math.floor(Math.random() * items.length), 1)[0];

      // Create the image element and set its src attribute
       images[i] = document.createElement('img');
        images[i].src = item.image;

      // Add it to your container element
   }

       document.getElementById("one").appendChild(images[0]);
       document.getElementById("two").appendChild(images[1]);
        document.getElementById("three").appendChild(images[2]);

     </script> 
```

我希望总共有 4 个 div，每个图像 1 个 div，最后一个 div 用于链接/属于其中一个图像的单词。

JavaScript 数组看起来像这样：-

```
 var items = [
        {name:'Coch',image:'upload/coch.png'},                                                                           {name:'Glas',image:'upload/glas.png'},
        {name:'Melyn',image:'upload/melyn.png'},{name:'Ci',image:'upload/dog.jpg'},
        {name:'Cath',image:'upload/cath.jpg'},{name:'Gwyrdd',image:'upload/gwyrdd.png'},
        {name:'Un',image:'upload/un.jpg'},{name:'Dau',image:'upload/dau.jpg'},
        {name:'Tri',image:'upload/tri.jpg'},{name:'Bochdew',image:'upload/bochdew.jpg'},
        {name:'Piws',image:'upload/piws.png'}      ]; 
```

名称是“词”。image 是文件系统中图像的链接。

任何帮助都会很棒，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:11:41.020

只需创建一个新数组`names`并在选择图像时将三个名称添加到其中。然后使用相同的随机代码来选择其中一个。

```
…
var names = new Array()
…
    images[i].src = item.image;
    names[i] = item.name;
…
var name_to_display = names[Math.floor(Math.random() * 3)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:04:21.467

为什么不使用`splice`或修改原始数组，而不是将随机选择的项目的索引存储到一个新数组中（在确保它尚未被选择之后）？

此外，与其为每个图像都设置一个容器，为什么不让它们一个接一个地流动（当然我真的不知道你最终想要做什么）？

这是一个演示这一点的函数。[在 JS Fiddle 中查看此操作](http://jsfiddle.net/ErikE/zN93u/)或[与全屏结果交互](http://jsfiddle.net/ErikE/zN93u/embedded/result/)。

（如果您不想这样做，我很抱歉使用 jQuery；通过使用库为您提供工作演示更容易。）

```
function imageReset() {
   var selected, img,
      imageContainer = $('#images').empty();
   currentImages = [];
   while (currentImages.length < 3) {
      selected = Math.floor(Math.random() * items.length);
      if (currentImages.indexOf(selected) === -1) {
         currentImages.push(selected);
      }
   }
   selectedImage = currentImages[Math.floor(Math.random() * 3)];
   $('#word').empty().html(items[selectedImage].name);
   $.each(currentImages, function(i, imageIndex) {
       img = $('<img>').attr({
           src: items[imageIndex].image,
           width: "200",
           height: "200"
       });
       if (imageIndex === selectedImage) {
          img.data('correct', true);
       }
       img.appendTo(imageContainer).on('click', imageClick);
   });
} 
```

这是最终页面的预览：

[![图像识别器 JS 小提琴](../Images/019745e461b3f464128bab6fdb92e77e.png)](http://jsfiddle.net/ErikE/zN93u/embedded/result/)

关于不使用库的注意事项：

*   最棘手的部分将是确定是否点击了正确的图像。您可以使用诸如“数据正确”之类的扩展属性来做到这一点，但这可能很难跨浏览器进行。我使用了 jQuery 的数据存储，ala `data()`。您也可以，而不是将图像专门标记为所选图像，而是检查图像本身的“src”，然后使用它，循环遍历`currentImages`数组以查找它是哪个原始项目以及它是否是正确的。
*   `$.each()`循环遍历一个数组。你可以用`for (i = 0, l = arr.length; i < l; i += 1) {}`.
*   `empty()`删除元素的所有内容。您可以简单地删除第一个孩子，直到没有孩子为止。
*   `$('<img>')`做同样的事情`createElement('img')`。

我强烈推荐使用图书馆。除了“我只想”之外，我看不出有什么理由可以避免。即使使用库，您仍然可以通过研究底层代码来学习普通的 javascript 方法。坦率地说，如果我是一名软件开发企业主，我会*要求*我的初级 javascript 程序员使用该库，因为编码速度和质量会高得多。他们可以而且也许最终应该学会如何以“老式”的方式来做这件事，但与此同时，我不希望他们浪费时间。

# ios - MWFeedParser - 带有图像的 RSS

> ID：15254500
> 
> 赞同：1
> 
> 时间：2013-03-06T17:53:40.007
> 
> 标签：ios, xcode, image, rss

我有问题，我在我的 iOS 应用程序中使用 MWFeedParser Rss 阅读器，它运行良好，但我需要从我的提要中获取图像。你能帮我吗？

[这是 MWFeedParser 项目的网址：GitHub](https://github.com/mwaterfall/MWFeedParser)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T03:44:56.167

我在 cellForRowAtIndexPath 函数中使用了它，以便在显示单元格时搜索图像

```
MWFeedItem *item = itemsToDisplay[indexPath.row];
if (item) {
    NSString *htmlContent = item.content;
    NSString *imgSrc;

    // find match for image
    NSRange rangeOfString = NSMakeRange(0, [htmlContent length]);
    NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@"(<img.*?src=\")(.*?)(\".*?>)" options:0 error:nil];

    if ([htmlContent length] > 0) {
        NSTextCheckingResult *match = [regex firstMatchInString:htmlContent options:0 range:rangeOfString];

        if (match != NULL ) {
            NSString *imgUrl = [htmlContent substringWithRange:[match rangeAtIndex:2]];
            NSLog(@"url: %@", imgUrl);

            //NSLog(@"match %@", match);
            if ([[imgUrl lowercaseString] rangeOfString:@"feedburner"].location == NSNotFound) {
                imgSrc = imgUrl;
            }
        }
    }
} 
```

请注意，如果 URL 中有“feedburner”，我也会忽略该图像，以避免使用 feedburner 类型的图标。

稍后显示图像时，我也在使用 AFNetwork 的类

```
 if (imgSrc != nil && [imgSrc length] != 0 ) {
        [myimage setImageWithURL:[NSURL URLWithString:imgSrc] placeholderImage:[UIImage imageNamed:IMAGETABLENEWS]];
    } else {
        NSLog(@"noimage");
        cell.imageView.image = [UIImage imageNamed:IMAGETABLENEWS];
        //[myimage setImage:[UIImage imageNamed:IMAGETABLENEWS]];
    } 
```

我已经在我评论的 NSLog 部分留下了，所以你可以取消评论并检查你是否想要

确保您有一个占位符的 IMAGETABLENEWS 常量，或者根据需要删除该部分。

这只是对html文本中的图像进行非常简单的检查，并不全面。它符合我的目的，并且可以帮助您正确地做一些更详细的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T10:19:28.327

如果您[`MWFeedItem`](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/MWFeedItem.m)的图像中嵌入了图像`enclosure-tag`，您可能需要考虑执行以下操作：

`MWFeedItem`有一个名为 的属性`enclosures`。它是一个包含一个或多个字典的数组。

该词典在 `- (BOOL)createEnclosureFromAttributes:(NSDictionary *)attributes andAddToItem:(MWFeedItem *)currentItem`( [`MWFeedParser.M`](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/MWFeedParser.m)) 中生成。

这些字典具有三个键（如果可用）：`url`、`type`& `length`。

* * *

第一个可能就是你要找的那个。我设法得到它：

**提要示例**

```
 <item>
        <title>Item title</title>
        <link>http://www.yourdomain.com</link>
        <description>Item description</description>
        <pubDate>Mon, 01 Jan 2016 12:00:00 +0000</pubDate>
        <enclosure url="http://www.yourdomain.com/image.jpg" length="0" type="image/jpeg"></enclosure>
        <category>Algemeen</category>
    </item> 
```

*请注意里面的图片链接`<enclosure></enclosure>`*

**你的视图控制器.m**

```
- (void)feedParser:(MWFeedParser *)parser didParseFeedItem:(MWFeedItem *)item {
    NSArray *EnclosureArray = item.enclosures;
    NSDictionary *ImageDict = [EnclosureArray objectAtIndex:0]; // 0 Should be replaced with the index of your image dictionary.
    NSString *ImageLink = [ImageDict objectForKey:@"url"];

    // Returns: http://www.yourdomain.com/image.jpg
} 
```

# iphone - ARC情况下的警告？

> ID：15254507
> 
> 赞同：0
> 
> 时间：2013-03-06T17:54:07.260
> 
> 标签：iphone, ios, objective-c, automatic-ref-counting

我正在使用以下代码行..

```
 NSArray *emailArray = (__bridge NSArray *)ABMultiValueCopyArrayOfAllValues(emailProperty); 
```

我正在使用 ARC ，但是现在在分析它时，它给了我一个警告“对象 emailArray 的潜在泄漏”......

我该如何解决这个..？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:59:04.070

您想`__bridge_transfer`在这种情况下使用，因为您想将复制的数组的所有权转移到您的`NSArray`：

```
NSArray *emailArray = (__bridge_transfer NSArray *)ABMultiValueCopyArrayOfAllValues(emailProperty); 
```

# java - 如何更新自定义适配器中的列表视图？

> ID：15254513
> 
> 赞同：2
> 
> 时间：2013-03-06T17:54:30.570
> 
> 标签：java, android, listadapter

我有一个扩展 ArrayAdapter 的自定义适配器，它包括列表中每个项目的复选框。

在 getview 本身中，我有 onCheckedChanged 侦听器，如果选中，它会从数据库中删除一个项目。但是列表视图没有更新，我不能调用 notifyDataSetChanged() 因为我不在主类中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:12:37.920

调用`invalidate()`您的 ListView。这使得列表被刷新并再次显示。*也许*它会解决你的问题。

我不明白你为什么不能打电话`notifyDataSetChanged()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:59:39.470

发布代码，以便读者了解您的问题。

您不必在扩展 ArrayAdapter 的类中设置任何侦听器。在这个类中，我们只将数据膨胀到视图中。

删除`onCheckedChanagedListener`from`Adapter`类并将其放在使用此适配器的`ListActivity`or中。`Fragment`

# python - 如何在 Python 中更改图像的 MD5 哈希？

> ID：15254514
> 
> 赞同：2
> 
> 时间：2013-03-06T17:54:35.467
> 
> 标签：python, image, md5, md5-file

我有一个图像文件，并想使用 Python 编辑图像而不明显修改图片，同时仍更改文件的 MD5 哈希。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-11T18:10:43.867

```
import hashlib
hashlib.md5(open('image.png','rb').read()).hexdigest() # rb = readbyte ,so it will work for text as well as media (image,video) files 
```

输出 >>> '724c6d87452c3a137ef1499c2d4b6576' # md5哈希值

```
file = open('image.png', 'rb').read()
with open('new_image.png', 'wb') as new_file:
  new_file.write(file+'\0')  #here we are adding a null to change the file content

hashlib.md5(open('new_image.png','rb').read()).hexdigest() 
```

output >>> 'a345838e8af07b65344e19989c7c5d85' # 同一媒体文件的新 md5 哈希值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:06:01.930

使用@Martijn Pieters 的解决方案：只需在标题或安全的地方更改一点。

或者更简单，如果您可以更改文件大小：在文件中附加一个`'\0'`（好吧，任何字符都可以）。它仍然是一个有效的 JPEG 文件，并且没有可见的变化。

```
echo -n ' ' >> my_image.jpeg 
```

* * *

一种粗溶液是

*   将图像（一个颜色平面）转换为傅立叶空间（使用 dft/fft），
*   改变低频中的一些像素值（主要存储在二维数组的右下角），
*   并将图像转换回图像空间（使用 ifft）。

所有像素都会有所不同，几乎没有光学变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:47:10.923

我最终使用[pyexiv2](http://tilloy.net/dev/pyexiv2/overview.html)来修改图像的元数据，如下所示：

```
>>> md5sum('photo.jpg')
'89dd603a0ce14750799a5144a56fbc12'
>>> image = pyexiv2.ImageMetadata('photo.jpg')
>>> image.read()
>>> image['Exif.Image.ImageDescription'] = '%030x' % random.randrange(256**15)
>>> image.write()
>>> md5sum('photo.jpg')
'426cc91835e7f4f5e92c5a48850adc05' 
```

# windows-7 - 在 Windows 7 上访问 VS2012 中的 Windows 8 库

> ID：15254517
> 
> 赞同：0
> 
> 时间：2013-03-06T17:54:38.683
> 
> 标签：windows-7, windows-8, visual-studio-2012

在 Windows 7 Pro 上运行 VS2012 Pro，我需要为 Windows 8 环境开发一个桌面应用程序（这不是 Metro 风格的界面）。我不知道如何引用特定于 Windows 8 的库（例如，Windows.Media.Capture）。我已经下载并安装了 Windows 8 SDK，但是当我尝试添加对 Windows 8 库的引用时，Framework 或 Extensions 列表中没有可用的内容。

有任何想法吗？还是我不得不在我的开发系统上迁移到 Windows 8？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:36:39.577

您可以在 Windows 7 上开发 .NET 3.x 或 4.x 应用程序并在 Windows 8 上以桌面模式运行它。您还可以创建一个以 Win32 为目标的 C++ 应用程序，并在 Windows 8 桌面上运行它就好了。但是，您不能引用 Windows 7 上对 WinRT API 具有运行时依赖项的任何程序集。Windows.Media.Capture 和其中包含的类（例如 CameraCaptureUI）是 WinRT API，不能在 Windows 7 上使用。即使您有 Windows 8，也*很少*有 WinRT API 可以从桌面应用程序调用。Windows.Media.Capture API 只能从 Windows 应用商店（以前的 Metro）应用程序中使用。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# email - MeteorJS 电子邮件配置 SSL

> ID：15254520
> 
> 赞同：3
> 
> 时间：2013-03-06T17:54:53.783
> 
> 标签：email, ssl, meteor

我正在尝试从 Meteor JS 发送电子邮件，并采用了文档中最简单的方法。但是，发送失败，我得到以下堆栈跟踪：

```
Exception while invoking method 'sendEmail' Error: connect ETIMEDOUT
at Object.Future.wait (/usr/lib64/meteor/lib/node_modules/fibers/future.js:322:15)
at smtpSend (app/packages/email/email.js:69:43)
at Object.Email.send (app/packages/email/email.js:111:7)
at Meteor.methods.sendEmail (app/server/email.js:7:11)
at _.extend.protocol_handlers.method.exception (app/packages/livedata/livedata_server.js:593:30)
at _.extend.withValue (app/packages/meteor/dynamics_nodejs.js:33:19)
at app/packages/livedata/livedata_server.js:592:46
at _.extend.withValue (app/packages/meteor/dynamics_nodejs.js:33:19)
at _.extend.protocol_handlers.method (app/packages/livedata/livedata_server.js:591:37)
at _.extend.processMessage.processNext (app/packages/livedata/livedata_server.js:484:43)
- - - - -
at errnoException (net.js:770:11)
at Object.afterConnect [as oncomplete] (net.js:761:19) 
```

我通过以下行在服务器文件夹中的 bootstrap.js 中提供我的电子邮件设置：

```
process.env.MAIL_URL = "smtp://user@gmail.com:password@smtp.googlemail.com:465" 
```

我很确定我还必须在某处打开 SSL，但我不知道如何（我可能单独使用 Node 的 email.js）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T20:42:52.530

自己找到的——不是缺少设置 SSL 选项，而是 MAIL_URL 中的第一个“@gmail.com”。正确的行是：

```
process.env.MAIL_URL = "smtp://user:password@smtp.googlemail.com:465" 
```

# jquery - ~ 选择器移除多个元素

> ID：15254525
> 
> 赞同：1
> 
> 时间：2013-03-06T17:55:05.760
> 
> 标签：jquery

我试图在元素之后删除所有特定的元素类型`<h1>Title</h1>`，但仍保留一些元素类型：

```
 <h1>Keep</h1>
    <br />
    <label>Keep</label><br />
    <label>Keep</label><br />
    <h1>Title</h1>
    <br />
    <label>Remove</label><br />
    <input type="text" value="remove" /><br />
    <input type="text" value="remove" /><br />
    <label>Remove></label><br />
    <input type="text" value="remove" /><br />
    <p>Remove</p>
    <br />
    <hr />Keep <span>Keep</span> 
```

我当前的代码完美运行：

```
 $('h1:contains("Title")').prev('br').remove();
    $('h1:contains("Title") ~ br').remove();
    $('h1:contains("Title") ~ label').remove();
    $('h1:contains("Title") ~ input[type="text"]').remove();
    $('h1:contains("Title") ~ p').remove();
    $('h1:contains("Title")').remove(); 
```

但我正在寻找一种以最有效的方式浓缩它的方法。

Using`$('h1:contains("Title") ~ br, label, input[type="text"], p)`似乎不会选择那些元素，而是选择页面上所有这些类型的元素。

预期输出：

```
<h1>Title</h1>
<hr />Keep <span>Keep</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:02:08.577

使用`nextUntil`方法：

```
$('h1:contains("Title")').nextUntil('hr').remove(); 
```

如果您也想删除该`h1`元素：

```
$('h1:contains("Title")').nextUntil('hr').addBack().remove(); 
```

[http://jsfiddle.net/ZLHVF/](http://jsfiddle.net/ZLHVF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:10:09.750

您可以通过将标题元素保存到 jQuery 对象来修剪一些选择器：

```
var title = $('h1:contains("Title")');
$(title).prev('br').remove();
$(' ~ br, ~ label, ~ input[type="text"], ~ p', title).remove();
$(title).remove(); 
```

这是一个演示这个的小提琴（用红色背景而不是删除元素）：http: [//jsfiddle.net/cetNE/](http://jsfiddle.net/cetNE/)

这是一种相当简单的方法来解决这个问题，并且很容易看到您在代码中所做的事情。

# c# - ASPxGridview 和控件集合

> ID：15254528
> 
> 赞同：0
> 
> 时间：2013-03-06T17:55:10.177
> 
> 标签：c#, asp.net, devexpress, aspxgridview

假设我有一个 ASPxGridView，它使用几种不同类型的模板，并且每个模板上都有一个 ASPxButton。我还有一些不在 ASPxGridView 上的按钮。如果我递归遍历页面控件集合中的所有控件并更改找到的任何 ASPxButton 的按钮文本（或其他属性），则页面上的所有 ASPxButtons 都将更改，除了 ASPxGridView 上的那些。

为什么 ASPxGridView 上的 ASPxButtons 没有改变？ASPxGridView 模板上的按钮是否不在 ASPxGridViews 控件集合中？

似乎我将不得不对 ASPxGridViews 进行特殊处理才能在它们上找到按钮......我不能使用 FindTemplateControl 方法，因为我不知道 id。我怎样才能做到这一点？

提前致谢！

2013 年 3 月 7 日编辑：

这是我正在做的一个示例（这在母版页加载事件中调用，它适用于除 ASPxGridView 模板中的按钮之外的所有按钮......可能是其他模板）：

```
 /// <summary>
    /// http://stackoverflow.com/questions/2632302/loop-through-all-the-user-controls-on-a-page
    /// </summary>
    /// <param name="controls">Page.Controls or some other control collection.</param>
 private void setUseSubmitBehavior(ControlCollection controls)
    {
        foreach (Control ctrl in controls)
        {
            if (ctrl is ASPxButton)
            {
                if ((ctrl as ASPxButton).ID != GlobalProperties.SubmitButtonID)
                    (ctrl as ASPxButton).UseSubmitBehavior = false;
            }
            else if (ctrl is Button)
            {
                if ((ctrl as Button).ID != GlobalProperties.SubmitButtonID)
                    (ctrl as Button).UseSubmitBehavior = false;
            }

            try
            {
                if (ctrl.Controls.Count > 0)
                    setUseSubmitBehavior(ctrl.Controls);
            }
            catch (Exception ex)
            {
                //Don't let the page fail here... just add a log and let it fail on the page that caused the error.
                MiscUtility.ExceptionLog(Page.GetType().AssemblyQualifiedName + " - " + MethodInfo.GetCurrentMethod().Name, ex.Message, "");
            }
        }
    } 
```

这是我第一次尝试在 GridViews 模板按钮上调用它的示例......但它不起作用：

```
 private void setUseSubmitBehavior(ControlCollection controls)
    {
        foreach (Control ctrl in controls)
        {
            if (ctrl is ASPxButton)
            {
                if ((ctrl as ASPxButton).ID != GlobalProperties.SubmitButtonID)
                    (ctrl as ASPxButton).UseSubmitBehavior = false;
            }
            else if (ctrl is Button)
            {
                if ((ctrl as Button).ID != GlobalProperties.SubmitButtonID)
                    (ctrl as Button).UseSubmitBehavior = false;
            }                
            else if (ctrl is DevExpress.Web.ASPxGridView.ASPxGridView)
            {
                setUseSubmitBehaviorOnASPxGridView((ctrl as ASPxGridView));
                continue;//This one is handled differently.
            }

            try
            {
                if (ctrl.Controls.Count > 0)
                    setUseSubmitBehavior(ctrl.Controls);
            }
            catch (Exception ex)
            {
                //Don't let the page fail here... just add a log and let it fail on the page that caused the error.
                MiscUtility.ExceptionLog(Page.GetType().AssemblyQualifiedName + " - " + MethodInfo.GetCurrentMethod().Name, ex.Message, "");
            }
        }
    }

    private void setUseSubmitBehaviorOnASPxGridView(ASPxGridView theGridView)
    {
        try
        {
            List<GridViewBaseTemplateContainer> listTemplateContainers = new List<GridViewBaseTemplateContainer>();

            if (theGridView.Templates.DataItem != null)
                listTemplateContainers.Add((theGridView.Templates.DataItem as GridViewDataItemTemplateContainer));
            if (theGridView.Templates.DataRow != null)
                listTemplateContainers.Add((theGridView.Templates.DataRow as GridViewDataRowTemplateContainer));
            if (theGridView.Templates.DetailRow != null)
                listTemplateContainers.Add((theGridView.Templates.DetailRow as GridViewDetailRowTemplateContainer));
            if (theGridView.Templates.EditForm != null)
                listTemplateContainers.Add((theGridView.Templates.EditForm as GridViewEditFormTemplateContainer));
            if (theGridView.Templates.EmptyDataRow != null)
                listTemplateContainers.Add((theGridView.Templates.EmptyDataRow as GridViewEmptyDataRowTemplateContainer));
            if (theGridView.Templates.FooterCell != null)
                listTemplateContainers.Add((theGridView.Templates.FooterCell as GridViewFooterCellTemplateContainer));
            if (theGridView.Templates.FooterRow != null)
                listTemplateContainers.Add((theGridView.Templates.FooterRow as GridViewFooterRowTemplateContainer));
            if (theGridView.Templates.GroupRow != null)
                listTemplateContainers.Add((theGridView.Templates.GroupRow as GridViewGroupRowTemplateContainer));
            if (theGridView.Templates.GroupRowContent != null)
                listTemplateContainers.Add((theGridView.Templates.GroupRowContent as GridViewBaseTemplateContainer));
            if (theGridView.Templates.Header != null)
                listTemplateContainers.Add((theGridView.Templates.Header as GridViewHeaderTemplateContainer));
            if (theGridView.Templates.HeaderCaption != null)
                listTemplateContainers.Add((theGridView.Templates.HeaderCaption as GridViewBaseTemplateContainer));
            if (theGridView.Templates.PagerBar != null)
                listTemplateContainers.Add((theGridView.Templates.PagerBar as GridViewPagerBarTemplateContainer));
            if (theGridView.Templates.PreviewRow != null)
                listTemplateContainers.Add((theGridView.Templates.PreviewRow as GridViewPreviewRowTemplateContainer));
            if (theGridView.Templates.StatusBar != null)
                listTemplateContainers.Add((theGridView.Templates.StatusBar as GridViewStatusBarTemplateContainer));
            if (theGridView.Templates.TitlePanel != null)
                listTemplateContainers.Add((theGridView.Templates.TitlePanel as GridViewBaseTemplateContainer));

            foreach (GridViewBaseTemplateContainer container in listTemplateContainers)
            {
                //The problem with this and other attempts is that container is always null even if listTemplateContainers is populated.
                if (container != null)
                {
                    ControlCollection cc = container.Controls;
                    if (cc != null && cc.Count > 0)
                        setUseSubmitBehavior(cc);
                }
            }
        }
        catch (Exception ex)
        {
            //Don't let the page fail here... just add a log and let it fail on the page that caused the error.
            MiscUtility.ExceptionLog(Page.GetType().AssemblyQualifiedName + " - " + MethodInfo.GetCurrentMethod().Name, ex.Message, "");
        }
    } 
```

附带说明.... 我认为第一种方法缺少 ASPxGridView 模板上的按钮的原因是它们的 InstantiateIn 函数是在母版页加载事件之后调用的。我还尝试了母版页 preRender 事件，但之后仍会调用 InstantiateIn。

# python - python - 如何使用python numpy将多个矩阵的函数应用于矩阵列表的每个元素？

> ID：15254531
> 
> 赞同：2
> 
> 时间：2013-03-06T17:55:24.937
> 
> 标签：python, matrix, numpy, iteration

为了简单起见，让我们定义函数只做矩阵乘法：

```
f(matrix1, matrix2):
    #assume that matrix1.shape == np.transpose(matrix2).shape
    #both are 1 dimensional so this returns a scalar
    return matrix1 * matrix2 
```

现在假设我想多次运行此函数以获得总和：
- matrix1 - 每次都不同
- matrix2 - 每次都相同

我可以写一个for循环：

```
matrix_a1 = np.matrix([1,2])
matrix_a2 = np.matrix([3,4])
matrix_list = [matrix_a1, matix_a2]
matrixb = np.matrix([5,6],[7,8])
total = 0
for matrix in matrix_list
    total+= f(matrix, matrixb) 
```

我想这样写：

```
sum(f(matrix_list, matrixb)) 
```

但这不起作用，因为它试图在 matrix_list 和 matrixb 之间进行矩阵乘法，而不是遍历 matrix_list。

如何使用 numpy 遍历 matrix_list？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:09:14.403

您将矩阵列表转换为多维数组。

`matrix`如果您摆脱对象的舒适并使用普通数组，那将更容易。你的第一个函数，当给定两个数组时，可以重写[`np.dot`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html)为：

```
def f(array1, array2) :
    return np.dot(array1, array2) 
```

您现在可以执行以下操作：

```
>>> array_a1 = np.array([1, 2])
>>> array_a2 = np.array([3, 4])
>>> array_a = np.array([array_a1, array_a2])
>>> array_a
array([[1, 2],
       [3, 4]])
>>> array_b = np.array([[5, 6], [7, 8]])
>>> array_b
array([[5, 6],
       [7, 8]])
>>> f(array_a, array_b)
array([[19, 22],
       [43, 50]])
>>> np.sum(f(array_a, array_b), axis=0)
array([62, 72]) 
```

你甚至可以这样做：

```
>>> array_a1 = np.array([[1, 2], [3, 4]])
>>> array_a2 = np.array([[5, 6], [7, 8]])
>>> array_a = np.array([array_a1, array_a2])
>>> array_b = np.array([[9, 10], [11, 12]])
>>> np.sum(f(array_a, array_b), axis=0)
array([[142, 156],
       [222, 244]]) 
```

# python - 在龙卷风中处理用户会话的标准方法

> ID：15254538
> 
> 赞同：14
> 
> 时间：2013-03-06T17:55:38.937
> 
> 标签：python, tornado

所以，为了避免“没有一个最佳答案”的问题，我要问的不是最好的方式，而是使用 Tornado 框架时处理会话的标准或最常见的方式。也就是说，如果我们不使用 3rd 方身份验证（OAuth 等），而是希望在浏览器中拥有自己的带有安全 cookie 的用户表，但大多数会话信息存储在服务器上，那么最常见的方法是什么？我看到有些人使用 Redis，有些人使用他们的普通数据库（MySQL 或 Postgres 或其他），有些人使用 memcached。

我正在开发的应用程序一次不会有数百万用户，甚至可能不会有数千用户。不过，它最终需要获得一些适度复杂的授权方案。我正在寻找的是确保我们不会做一些与一般 Tornado 社区不同的“奇怪”事情，因为身份验证和授权虽然是我们需要的东西，但不是在我们产品的核心，因此不是我们应该区分自己的地方。因此，我们正在寻找大多数人（使用 Tornado）在这方面所做的事情，因此我认为这是一个（理论上）客观真实答案的问题。

当然，理想的答案是指向示例代码。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-01T14:59:03.300

以下是其他微框架处理会话的方式（例如 CherryPy、Flask）：

1.  在每个会话的基础上创建一个表格`session_id`和您想要跟踪的任何其他字段。一些框架将允许您仅将这些信息存储在每个用户的文件中，或者直接将内容存储在内存中。如果您的应用程序足够小，您也可以考虑这些选项，但您自己实现数据库应该更简单。
2.  当收到请求（`RequestHandler initialize()`我认为是函数？）并且没有 session_id cookie 时，使用随机生成器设置一个安全的 session-id。我对 Tornado 没有太多经验，但看起来设置一个安全的 cookie 应该对此有用。将该`session_id`信息和相关信息存储在您的会话表中。请注意，每个用户都会有一个会话，即使是那些未登录的用户。当用户登录时，您需要将他们的登录状态（以及他们的用户名/用户 ID 等）附加到他们的会话中。
3.  在您的`RequestHandler`初始化函数中，如果有一个 session_id cookie，请从数据库中读取您需要的任何会话信息，并可能创建您自己的 Session 对象来填充并存储为该请求处理程序的成员变量。

请记住，会话应该在一定量的不活动后过期，因此您也需要检查一下。如果您想要“记住我”类型的登录情况，则必须使用安全 cookie 来发出信号（在 OWASP 阅读此内容以确保它尽可能安全，再次认为 Tornado 的 secure_cookie 可能会有所帮助使用它），并且在收到超时会话后，您可以通过创建新会话并将任何相关信息从旧会话传输到其中来重新验证新用户。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-07T07:36:10.600

Tornado 设计为无状态并且没有开箱即用的会话支持。

使用安全 cookie 存储敏感信息，例如 user_id。使用标准 cookie 来存储非关键信息。

对于存储大对象 - 使用标准方案 - MySQL + memcache。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-02T20:17:29.550

会话的关键问题不是将它们存储在哪里，而是如何智能地使它们过期。无论会话存储在哪里，只要存储的会话数量合理（即仅存储活动会话加上一些剩余的会话），所有这些数据都将适合 RAM 并快速提供服务。如果有很多旧垃圾，您可能会预料到无法预测的延迟（需要点击磁盘来加载会话）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-10T14:04:26.587

为此目的，Tornado 中没有直接内置任何东西。正如其他人已经评论的那样，Tornado 被设计为一个非常快速的异步框架。它设计精益。但是，可以加入您自己的会话管理功能。您需要为每个将创建或获取会话容器的处理程序添加一个序言部分。您需要将会话 ID 存储在 cookie 中。如果您不是严格意义上的 HTTPS，那么您将需要使用安全 cookie。会话持久性可以是您选择的任何技术，例如 Redis、Postgres、MySQL、文件存储等...

There is a Github project that provides session management for Tornado. Even if you decide not to use it, it can provide insight into how to structure your own session management. The Github project is called [dustdevil](https://github.com/PlaidCloud/dustdevil). Full disclosure - we created this several years ago but find it very easy to use and have it in active use today.

# ios - 如何在 xcode 中为容器视图 x 和 y 位置设置动画？

> ID：15254542
> 
> 赞同：1
> 
> 时间：2013-03-06T17:55:45.853
> 
> 标签：ios, xcode, jquery-animate, container-view

我希望能够从左到右为容器视图设置动画。我计划使用容器作为菜单，在调用时从屏幕左侧滑入。有一个很好的例子吗？

我找到了这个[UIView 示例](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)，这适用于我的需要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:54:23.967

正如 Putz1103 和 Rakesh 所提到的，[列出的链接](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)可用于为容器视图设置动画。

# r - 获取“lm()”返回的“mlm”对象的剩余标准误差

> ID：15254543
> 
> 赞同：6
> 
> 时间：2013-03-06T17:55:47.380
> 
> 标签：r, regression, linear-regression, lm, mlm

我曾经`lm()`为 R 中的多个（约 100 万）响应变量拟合多个回归模型。

```
allModels <- lm(t(responseVariablesMatrix ~ modelMatrix) 
```

这将返回一个“mlm”类的对象，它就像一个包含所有模型的巨大对象。我想获得每个模型的残差平方和，我可以使用：

```
summaries <- summary(allModels)
rss1s <- sapply(summaries, function(a) return(a$sigma)) 
```

我的问题是我认为“汇总”函数也计算了一大堆其他东西，因此很慢。我想知道是否有更快的方法来提取模型的残差平方和？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:24:06.297

对象的输出中有一个分量残差`lm`，所以你得到残差平方和`sum(output$residuals^2)`。

编辑：您实际上是从摘要中取出 sigma，即 `sqrt(sum(output$residuals^2)/output$df.residuals)`

对于所有型号使用

`sapply(allModels, function(a) sqrt(sum(a$residuals^2)/a$df.residuals)))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T17:57:02.867

许多人很少知道，通用函数`deviance`可以计算“lm”和“mlm”模型的残差平方和。做你`fit`的合身模特，你能做到

```
sqrt(deviance(fit) / fit$df.residual) 
```

这里有两个优点：

1.  通用函数是完全“矢量化”的（使用`colSums`）而不是基于循环的（如解决方案 via `sapply`）；
2.  通用函数知道如何处理加权回归情况。

# php - 在 PHP 中删除查询字符串并重新加载页面

> ID：15254547
> 
> 赞同：2
> 
> 时间：2013-03-06T17:56:00.100
> 
> 标签：php, query-string

PHP 中重新加载我所在页面的最佳方法是什么，并且从 URL 中删除了所有先前的查询字符串值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:58:19.450

您可以使用[parse_url](http://php.net/manual/en/function.parse-url.php)函数取消参数：

```
$url = parse_url($url, PHP_URL_PATH) 
```

然后将[标头](http://php.net/manual/en/function.header.php)重定向与 PHP 一起使用：

```
//it there is any parameter...
if(count($_GET)) {
    header('Location: '.$url);
    die();
} 
```

`header`在生成任何输出之前，您必须使用该功能。此外，您应该定位`header`内部某种条件以避免在任何其他情况下重定向。

# python - grid.py 没有给出输出

> ID：15254555
> 
> 赞同：4
> 
> 时间：2013-03-06T17:56:23.040
> 
> 标签：python, machine-learning, svm, libsvm, pattern-recognition

我正在使用`LibSVM`并且`GRID.py`用于`SVM`. 但问题是我运行了`grid.py`一个多小时，但它没有给出任何输出。它给出的错误信息如下

```
%%%%%%%%%%%%%%%%%%%%%%%
Traceback (most recent call last):
  File "grid.py", line 266, in run
    if rate is None: raise RuntimeError('get no rate')
RuntimeError: get no rate
worker local quit.
%%%%%%%%%%%%%%% 
```

谁能告诉我有什么问题？这个“工人本地退出”是什么？如果有人想了解有关实施的更多信息或`GRID.py`请随时询问。我有超过`9000`8 个不同列的行作为数据集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-02T14:53:45.823

您`GRID.py`是使用参数*-log2c*还是*-log2g 调​​用*？

[`LocalWorker.run_one`](https://github.com/cjlin1/libsvm/blob/8f3d96edce6e9363ad40cefe6e135650a10e53fb/tools/grid.py#L290-L295)返回时似乎出现了问题`None`。

# python - numpy ndarray 切片和迭代

> ID：15254556
> 
> 赞同：0
> 
> 时间：2013-03-06T17:56:23.647
> 
> 标签：python, numpy, multidimensional-array

我正在尝试同时对多维数组进行切片和迭代。我有一个实用的解决方案，但它有点难看，我敢打赌有一种我不知道的迭代和切片的巧妙方法。这是代码：

```
import numpy as np
x = np.arange(64).reshape(4,4,4)
y = [x[i:i+2,j:j+2,k:k+2] for i in range(0,4,2) 
                          for j in range(0,4,2) 
                          for k in range(0,4,2)]
y = np.array(y)
z = np.array([np.min(u) for u in y]).reshape(y.shape[1:]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:18:55.953

您的最后一次重塑不起作用，因为`y`没有定义形状。没有它你会得到：

```
>>> x = np.arange(64).reshape(4,4,4)
>>> y = [x[i:i+2,j:j+2,k:k+2] for i in range(0,4,2) 
...                           for j in range(0,4,2) 
...                           for k in range(0,4,2)]
>>> z = np.array([np.min(u) for u in y])
>>> z
array([ 0,  2,  8, 10, 32, 34, 40, 42]) 
```

但尽管如此，您可能想要的是将数组重新整形为 6 维，这会得到与上面相同的结果：

```
>>> xx = x.reshape(2, 2, 2, 2, 2, 2)
>>> zz = xx.min(axis=-1).min(axis=-2).min(axis=-3)
>>> zz
array([[[ 0,  2],
        [ 8, 10]],

       [[32, 34],
        [40, 42]]])
>>> zz.ravel()
array([ 0,  2,  8, 10, 32, 34, 40, 42]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:25:28.100

在最后一个意思中很难准确说出你想要什么，但你可以使用 stride_tricks 来获得一种“更流畅”的方式。这相当棘手。

```
import numpy.lib.stride_tricks

# This returns a view with custom strides, x2[i,j,k] matches y[4*i+2*j+k]
x2 = numpy.lib.stride_tricks(
        x, shape=(2,2,2,2,2,2),
        strides=(numpy.array([32,8,2,16,4,1])*x.dtype.itemsize))

z2 = z2.min(axis=-1).min(axis=-2).min(axis=-3) 
```

不过，我不能说这更具可读性。（或高效，因为每个最小调用都会临时。）

请注意，我的答案与[Jaime 的](https://stackoverflow.com/a/15256085/79513)不同，因为我试图匹配您的 y 元素。您可以判断是否将 替换`min`为`max`。

# r - 在 Lattice R 中排列和调整多个图的大小

> ID：15254559
> 
> 赞同：0
> 
> 时间：2013-03-06T17:56:35.763
> 
> 标签：r, plot, lattice

我想绘制三个变化紧密的图，因此它们显示为一个字段。我的数据是不同维度的数组。这是一些显示我的问题的示例代码：

```
library(lattice)

theme.novpadding = list(layout.heights = list(top.padding = 0,
                                          main.key.padding = 0,
                                          key.axis.padding = 0,
                                          axis.xlab.padding = 0,
                                          xlab.key.padding = 0,
                                          key.sub.padding = 0,
                                          bottom.padding = 0),
                    layout.widths =  list(left.padding = 0,
                                          key.ylab.padding = 0,
                                          ylab.axis.padding = 0,
                                          axis.key.padding = 0,
                                          right.padding = 0),
                    axis.line = list(col = "transparent"))

p1 = levelplot(array(c(1:100), c(10,10)), colorkey=F, par.settings=theme.novpadding)
p2 = levelplot(array(c(1:100), c(9,9)), colorkey=F, ylab = NULL, par.settings=theme.novpadding)
p3 = levelplot(array(c(1:100), c(11,11)),  ylab=NULL, par.settings=theme.novpadding)

width = 0.33
height = 1

ph = list(5, "in")

print(p1, position = c(0, 0, width, height), panel.height=ph, more=T)
print(p2, position = c(width, 0, 2*width, height), panel.height=ph, more=T)
print(p3, position = c(2*width, 0, 3*width, height),panel.height=ph, more=F) 
```

如您所见，它们的分布非常广泛。我希望它们尽可能靠近。我使用 theme.novpadding 将边距设置为零。是一种说法，比如“地块之间的距离”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-02T18:09:34.343

如果您将数据构造成一个不错的 data.frame，这个问题很容易解决。Lattice 在 data.frames 上效果最好。请参见下面的示例：

```
g.xy <- expand.grid(1:10, 1:10)
my.data <- data.frame(x=g.xy$Var1, y = g.xy$Var2, value1=1:100, value2 = 1:100, value3=1:100, value4=1:100)
levelplot(value1+value2+value3+value4~x+y, data=my.data, scales=list(x="free", y="free")) # free
levelplot(value1+value2+value3+value4~x+y, data=my.data, scales=list(x="same", y="same")) # same range, so panels are "touching" 
```

您可以通过设置 scale 参数来控制图看起来非常接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:11:12.033

您可以使用的一个技巧是调整`position argument`. 除了不让这些区域重叠之外，您还可以这样做以使它们靠近在一起。例如，您可以将位置参数更改为：

```
ovr = 0.05
print(p1, position = c(0, 0, width + ovr, height), panel.height=ph, more=T)
print(p2, position = c(width - ovr, 0, 2*width+ovr, height), panel.height=ph, more=T)
print(p3, position = c(2*width - ovr, 0, 3*width, height),panel.height=ph, more=F) 
```

您必须对此进行一些调整，而我尚未测试此代码。但我认为总体思路应该可行。

# c# - 如何使用 C# 在 .config 文件中检索自定义配置部分的列表？

> ID：15254566
> 
> 赞同：7
> 
> 时间：2013-03-06T17:56:49.367
> 
> 标签：c#, configurationmanager, configsection

当我尝试使用检索 .config 文件中的部分列表时

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

config.Sections 集合包含一堆系统部分，但我在 configSections 标记中定义的文件中没有一个部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:09:11.350

这是一篇[博客文章](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)，应该可以为您提供所需的内容。但是为了确保答案仍然可用，我也将把代码放在这里。简而言之，请确保您引用了`System.Configuration`程序集，然后利用`ConfigurationManager`该类来获取您想要的非常具体的部分。

```
using System;
using System.Configuration;

public class BlogSettings : ConfigurationSection
{
  private static BlogSettings settings 
    = ConfigurationManager.GetSection("BlogSettings") as BlogSettings;

  public static BlogSettings Settings
  {
    get
    {
      return settings;
    }
  }

  [ConfigurationProperty("frontPagePostCount"
    , DefaultValue = 20
    , IsRequired = false)]
  [IntegerValidator(MinValue = 1
    , MaxValue = 100)]
  public int FrontPagePostCount
  {
      get { return (int)this["frontPagePostCount"]; }
        set { this["frontPagePostCount"] = value; }
  }

  [ConfigurationProperty("title"
    , IsRequired=true)]
  [StringValidator(InvalidCharacters = "  ~!@#$%^&*()[]{}/;’\"|\\"
    , MinLength=1
    , MaxLength=256)]
  public string Title
  {
    get { return (string)this["title"]; }
    set { this["title"] = value; }
  }
} 
```

确保您阅读了博客文章 - 它会为您提供背景知识，以便您可以将其融入您的解决方案。

# python - 在 Python 函数中的线程之间传递变量更改 [初学者]

> ID：15254567
> 
> 赞同：5
> 
> 时间：2013-03-06T17:56:53.397
> 
> 标签：python, multithreading, variables, loops, multiprocessing

所以我有这个代码：

```
import time
import threading

bar = False

def foo():
    while True:
        if bar == True:
            print "Success!"
        else:
            print "Not yet!"
    time.sleep(1)

def example():
    while True:
        time.sleep(5)
        bar = True

t1 = threading.Thread(target=foo)
t1.start()

t2 = threading.Thread(target=example)
t2.start() 
```

我试图理解为什么我不能`bar`去.. 如果`=`是`true`这样，那么另一个线程应该看到变化并写`Success!`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T17:58:40.400

`bar`是一个全局变量。你应该把`global bar`里面`example()`：

```
def example():
    global bar
    while True:
        time.sleep(5)
        bar = True 
```

*   **读取**变量时，首先在函数内部搜索，如果未找到，则在外部搜索。这就是为什么没有必要放在`global bar`里面`foo()`。
*   当一个变量被**赋值**`global`时，除非已经使用了语句，否则它会在函数内部本地完成。这就是为什么有必要放在`global bar`里面`example()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:58:35.673

您必须将“bar”指定为全局变量。否则，“bar”仅被视为局部变量。

```
def example():
    global bar
    while True:
        time.sleep(5)
        bar = True 
```

# c# - 异步 i/o 并在结果可用时对其进行处理

> ID：15254569
> 
> 赞同：0
> 
> 时间：2013-03-06T17:56:57.813
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await

我有一个简单的控制台应用程序，我想在其中循环调用许多 Url 并将结果放入数据库表中。我正在使用 .Net 4.5 并使用异步 i/o 来获取 URL 数据。这是我正在做的事情的简化版本。除数据库操作外，所有方法都是异步的。大家看到这个有什么问题吗？有没有更好的优化方法？

```
 private async Task Run(){
        var items = repo.GetItems(); // sync method to get list from database
        var tasks = new List<Task>();

        // add each call to task list and process result as it becomes available 
        // rather than waiting for all downloads
        foreach(Item item in items){
            tasks.Add(GetFromWeb(item.url).ContinueWith(response => { AddToDatabase(response.Result);}));
        }
        await Task.WhenAll(tasks); // wait for all tasks to complete.
    }

    private async Task<string> GetFromWeb(url) {
       HttpResponseMessage response = await GetAsync(url);
       return await response.Content.ReadAsStringAsync();
    }

    private void AddToDatabase(string item){
        // add data to database.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:19:57.870

您的解决方案非常正确，只有两个小错误（都导致编译器错误）。首先，您不调用`ContinueWith`的结果`List.Add`，您需要在任务上调用 continue ，然后将延续添加到您的列表中，只需移动括号即可解决。您还需要调用`Result`.`reponse` `Task`

这是有两个小改动的部分：

```
tasks.Add(GetFromWeb(item.url)
    .ContinueWith(response => { AddToDatabase(response.Result);})); 
```

另一种选择是利用一种方法，该方法采用一系列任务并按照完成的顺序对它们进行排序。这是我对这种方法的实现：

```
public static IEnumerable<Task<T>> Order<T>(this IEnumerable<Task<T>> tasks)
{
    var taskList = tasks.ToList();

    var taskSources = new BlockingCollection<TaskCompletionSource<T>>();

    var taskSourceList = new List<TaskCompletionSource<T>>(taskList.Count);
    foreach (var task in taskList)
    {
        var newSource = new TaskCompletionSource<T>();
        taskSources.Add(newSource);
        taskSourceList.Add(newSource);

        task.ContinueWith(t =>
        {
            var source = taskSources.Take();

            if (t.IsCanceled)
                source.TrySetCanceled();
            else if (t.IsFaulted)
                source.TrySetException(t.Exception.InnerExceptions);
            else if (t.IsCompleted)
                source.TrySetResult(t.Result);
        }, CancellationToken.None, TaskContinuationOptions.PreferFairness, TaskScheduler.Default);
    }

    return taskSourceList.Select(tcs => tcs.Task);
} 
```

使用这个你的代码可以变成：

```
private async Task Run()
{
    IEnumerable<Item> items = repo.GetItems(); // sync method to get list from database

    foreach (var task in items.Select(item => GetFromWeb(item.url))
        .Order())
    {
        await task.ConfigureAwait(false);
        AddToDatabase(task.Result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:08:39.217

您的解决方案是可以接受的。但是您应该查看[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)，它允许您设置数据流“网格”（或“管道”），然后将数据推入其中。

对于这么简单的问题，Dataflow 除了摆脱`ContinueWith`（我总是觉得手动延续很尴尬）之外不会真正添加太多。但是，如果您计划在将来添加更多步骤或更改数据流，那么您应该考虑使用 Dataflow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:51:51.893

尽管我也会用 Rx 解决方案戴上帽子

```
using System.Reactive;
using System.Reactive.Linq;
private Task Run()
{
    var fromWebObservable = from item in repo.GetItems.ToObservable(Scheduler.Default)
                            select GetFromWeb(item.url);

    fromWebObservable
                    .Select(async x => await x)
        .Do(AddToDatabase)
        .ToTask();

} 
```

# javascript - 在单元格中添加值并放在总计字段中

> ID：15254570
> 
> 赞同：0
> 
> 时间：2013-03-06T17:57:03.223
> 
> 标签：javascript

我正在尝试将用户输入的值添加到每一行的 Slots 单元格中。我想获取总数并将其放在 SlotsTotals 字段中。但是，代码根本不起作用。

```
function checkRow(){
    var table = document.getElementById('tblSample');

    for (var i = 0, row; row = table.rows[i]; i++){
            document.getElementById('SlotsTotals').value += document.getElementById('txtSlots' + i).value;
    }
 } 
```

我正在动态地将行添加到表中。用户将在槽字段中输入值。我想遍历表以获取所有值的总计，然后将总计添加到 SlotsTotal 字段。

这是我添加行的一些 html。

```
function addRow() {
    //function ValidateRow(){alert('error');}
    //function insertRow();

    var tbl = document.getElementById('tblSample');
    var lastRow = tbl.rows.length;  
    // if there's no header row in the table, then iteration = lastRow + 1
    //var iteration = lastRow;
    var iteration = lastRow;
    var row = tbl.insertRow(lastRow);

    var cell5 = row.insertCell(6);            
    var element5 = document.createElement('input');            
    element5.type = 'text';            
    element5.name = 'txtSlots' + iteration; 
    element5.id = 'txtSlots' + iteration;   
    element5.size = 10;
    cell5.appendChild(element5);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:03:39.967

你能发布一些你的html代码吗

也许试试

```
document.getElementById('SlotsTotals').innerHTML 
```

[http://www.w3schools.com/jsref/met_doc_getelementbyid.asp](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)

__

也许这可以帮助:)

```
<table id='tblSample' style='border: 1pt, solid, black;'>
  <tr>
    <td>
      ...A1
    </td>
    <td>
      ...A2
    </td>
    <td>
      ...A3
    </td>
    <td>
      ...A4
    </td>
    <td>
      ...A5
    </td>
    <td>
      <input type='text' id='txtSlots1'>
    </td>
  </tr>
  <tr>
    <td>
      ...B1
    </td>
    <td>
      ...B2
    </td>
    <td>
      ...B3
    </td>
    <td>
      ...B4
    </td>
    <td>
      ...B5
    </td>
    <td>
      <input type='text' id='txtSlots2'>
    </td>
  </tr>
  <tr>
    <td>
      ...C1
    </td>
    <td>
      ...C2
    </td>
    <td>
      ...C3
    </td>
    <td>
      ...C4
    </td>
    <td>
      ...C5
    </td>
    <td>
      <input type='text' id='txtSlots3'>
    </td>
  </tr>
  <tr>
    <td>
      ...D1
    </td>
    <td>
      ...D2
    </td>
    <td>
      ...D3
    </td>
    <td>
      ...D4
    </td>
    <td>
      ...D5
    </td>
    <td>
      <input type='text' id='txtSlots4'>
    </td>
  </tr>
 <tr>
    <td>
      ...E1
    </td>
    <td>
      ...E2
    </td>
    <td>
      ...E3
    </td>
    <td>
      ...E4
    </td>
    <td>
      ...E5
    </td>
    <td>
      <input type='text' id='txtSlots5'>
    </td>
  </tr>
</table>
<input type='button' onclick="test();" value="test">
<input type='text' id='SlotsTotals'>

<script>
  function test(){
    var table = document.getElementById('tblSample');
    res = document.getElementsByTagName('input');
    sum = 0
    for (var i = 0; i < res.length; i++){
      s = res[i].id
      if((String(s).indexOf("txtSlots") > -1)&&(res[i].type == 'text'))
      {
        sum += parseInt(res[i].value)
      }
    }
    document.getElementById('SlotsTotals').value = sum
  }
</script> 
```

# java - JPQL 参数类型错误

> ID：15254573
> 
> 赞同：1
> 
> 时间：2013-03-06T17:57:10.563
> 
> 标签：java, hibernate, jpa

在我当前的项目中，我使用休眠 JPA 作为持久性库。将参数设置为查询时，我遇到了奇怪的错误。

我有以下内容：

```
List<Location> loca = JPA.em().createQuery(
    "SELECT location FROM Location as location"
    + " where "
    + "( 6371 * acos(cos(PI() / 180 * :platitude ) * cos(PI() / 180 *location.latitude  ) * "
    + "cos(PI() / 180 *location.longitude  - PI() / 180 *:plongitude ) + sin( PI() / 180 *:platitude) * "
    + "sin(PI() / 180 *location.latitude ) ) ) < :radius")
    .setParameter("radius", 10000.0)
    .setParameter("platitude", new Double(latitude))
    .setParameter("plongitude", new Double(longitude))
    .getResultList(); 
```

结果错误是：

> [IllegalArgumentException：参数值 [43.239474] 与类型 [java.lang.Integer] 不匹配]

但是由于精度损失，这个值不能转换为整数。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T19:53:39.783

如果您在 JPA 下使用 Hibernate，则可以通过直接使用 Hibernate 会话来解决此问题。我遇到了同样的问题，找不到其他方法。

以下应该有效：

```
Session session = (Session) JPA.em().getDelegate();
List<Location> loca = session.createQuery(
    "SELECT location FROM Location as location"
    + " where "
    + "( 6371 * acos(cos(PI() / 180 * :platitude ) * cos(PI() / 180 *location.latitude  ) * "
    + "cos(PI() / 180 *location.longitude  - PI() / 180 *:plongitude ) + sin( PI() / 180 *:platitude) * "
    + "sin(PI() / 180 *location.latitude ) ) ) < :radius")
    .setParameter("radius", 10000.0, new DoubleType())
    .setParameter("platitude", new Double(latitude), new DoubleType())
    .setParameter("plongitude", new Double(longitude), new DoubleType())
    .list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T08:54:23.880

JPA 需要 :radius 的 Double 类型参数值。所以只需将半径参数分配更新为；

```
.setParameter("radius", new Double(10000.0)) 
```

# angularjs - 范围更改时视图不更新

> ID：15254577
> 
> 赞同：0
> 
> 时间：2013-03-06T17:57:25.123
> 
> 标签：angularjs, angularjs-directive

我有一个角度指令，它带有一个改变范围的方法，以便用 ng-show 显示/隐藏各种元素。范围属性有的在渲染，有的没有，这很奇怪。

指示：

```
.directive('ktTable', function(Query) {
  return {
    restrict: "AC",
    templateUrl: '/partials/table.html',
    link: function(scope, elm, attrs) {

      scope.openForm = function(options, object) {
        ...
        else if (options.checkin) {
          scope.isDocument = true;
          scope.new_object_type = "Document";
          scope.isNew = false;
          scope.isCheckin = true;
        }
        ...
      };
      scope.$watch('isNew', function(nv, ov) {
        console.log("isNew", nv, ov);
      });
      scope.$watch('isCheckin', function(nv, ov) {
        console.log("isCheckin", nv, ov);
      });
    }
  };
}); 
```

模板：

```
<fieldset class="newFile" ng-show="isNew || isCheckin">
    <legend>New {{new_object_type}}</legend>
    <input type="file" name="newFile" />
</fieldset>
    ...
<legend><span ng-show="isNew">New </span>{{new_object_type}} Information</legend> 
```

当我刷新页面时，$watch 输出是未定义的，未定义的，这很好。无论如何，表格不在视图中。当我从 ng-click 调用此方法时，控制台输出为：

```
isNew false undefined directives.js:138
isCheckin true undefined directives.js:141 
```

这正是我正在寻找的，但模板没有更新。调用 scope.$apply() 包装这些更改或在更改后调用 scope.$apply() 似乎对它没有任何作用。如果我将控制器中的 $scope.isNew 属性初始化为 true，我会看到字段集和 scope.new_object_type 属性设置正确。但是，scope.isNew/isCheckin 属性似乎永远不会影响模板。我应该怎么办？

# build - 即使测试失败，Teamcity 也会运行构建步骤

> ID：15254581
> 
> 赞同：26
> 
> 时间：2013-03-06T17:57:32.600
> 
> 标签：build, teamcity, mstest

我遇到了问题`Teamcity`，即使之前的步骤不成功，它也会继续运行构建步骤。

我的构建配置的最后一步是部署我的站点，如果我的任何测试失败，我不希望它这样做。

每个构建步骤都设置为仅在所有先前步骤都成功时才执行。

在 Build Failure Conditions 选项卡中，我检查了 Fail build if 下的以下选项：

```
-build process exit code is not zero
-at least one test failed
-an out-of-memory or crash is detected (Java only) 
```

这不起作用 - 即使测试失败 TeamCity 部署我的站点，为什么？

我什至尝试添加一个额外的构建失败条件，它将在构建日志中查找特定文本（即“测试运行失败”。）

在概览页面中查看已完成的测试时，您可以看到针对最新版本的错误消息：

“试运行失败。” 文本出现在构建日志中

但无论如何它仍然会部署它。

有谁知道如何解决这一问题？看来这个问题已经运行了很长时间，[here](http://youtrack.jetbrains.net/issue/TW-12194)。

显然有一个解决方法：

> 到目前为止，我们并不认为此功能非常重要，因为有一个明显的解决方法：脚本可以检查必要的条件，并且不会生成 TeamCity 中配置的工件。
> 
> 例如，脚本可以将工件从临时目录移动到 TeamCity 中指定的目录，作为在完成之前发布的工件，以防构建操作成功。

但这对我来说并不清楚如何做到这一点，而且听起来也不是最好的解决方案。任何帮助表示赞赏。

**编辑**：我还能够解决快照依赖项的问题，在那里我将有一个单独的“部署”构建，它依赖于测试构建，现在如果测试失败，它就不会运行。

[这](http://blogs.jetbrains.com/teamcity/2012/04/24/teamcity-build-dependencies-2/)对于设置依赖关系很有用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-13T16:29:54.290

这是 TeamCity 7.1 中的一个已知问题（参见[http://youtrack.jetbrains.com/issue/TW-17002](http://youtrack.jetbrains.com/issue/TW-17002)），该问题已在 TeamCity 8.x+ 中得到修复（请参阅[此答案](https://stackoverflow.com/a/26463649/33080)）。

TeamCity 区分失败的*构建*和失败的*构建步骤*。虽然失败的单元测试会使整个构建失败，但不幸的是，TeamCity 仍然认为测试步骤本身是成功的*，因为它没有返回非零错误代码*。因此，后续步骤将继续运行。

已经提出了各种解决方法，但我发现它们要么需要不平凡的设置，要么会影响 TeamCity 的测试体验。

但是，在查看了[来自 @arex1337 的建议](https://stackoverflow.com/questions/13212748/how-to-integrate-mstest-in-your-teamcity-build-process/)后，我们找到了一种让 TeamCity 做我们想做的事情的简单方法。只需在包含以下内联脚本的现有测试步骤之后添加一个额外的 Powershell 构建步骤（替换`YOUR_TEAMCITY_HOSTNAME`为您的实际 TeamCity 主机/域）：

```
$request = [System.Net.WebRequest]::Create("http://YOUR_TEAMCITY_HOSTNAME/guestAuth/app/rest/builds/%teamcity.build.id%")
$xml = [xml](new-object System.IO.StreamReader $request.GetResponse().GetResponseStream()).ReadToEnd()
Microsoft.PowerShell.Utility\Select-Xml $xml -XPath "/build" | % { $status = $_.Node.status }

if ($status -eq "FAILURE") {
    throw "Failing this step because the build itself is considered failed. This is our way to workaround the fact that TeamCity incorrectly considers a test step to be successful even if there are test failures. See http://youtrack.jetbrains.com/issue/TW-17002"
} 
```

这个内联 PowerShell 脚本只是使用 TeamCity REST API 来询问构建本身是否作为一个整体被认为是失败的（`%teamcity.build.id%"`当执行该步骤时，该变量将被 TeamCity 替换为实际的构建 ID）。如果整个构建被视为失败（例如，由于测试失败），则此 PowerShell 脚本会引发错误，导致进程返回非零错误代码*，从而导致单个构建步骤本身被视为不成功*. 此时，可以阻止后续步骤运行。

请注意，此脚本使用 guestAuth，这需要启用 TeamCity 来宾帐户。或者，您可以改用 httpAuth，但您需要更新脚本以包含 TeamCity 用户名和密码（例如`http://USERNAME:PASSWORD@YOUR_TEAMCITY_HOSTNAME/httpAuth/app/rest/builds/%teamcity.build.id%`）。

因此，有了这个附加步骤，如果有任何先前的单元测试失败，将跳过所有设置为执行“仅当所有先前的步骤都成功”的后续步骤。如果在 JetBrains 解决问题之前我们的任何 NUnit 测试都不成功，我们将使用它来阻止自动部署。

[感谢@arex1337 的想法。](https://stackoverflow.com/questions/13212748/how-to-integrate-mstest-in-your-teamcity-build-process/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-10-20T10:40:43.050

只是为了防止混淆，这个问题在 Team City v8.x 中得到了修复，我们现在不需要那些变通方法。

您可以通过执行步骤选项指定步骤执行策略：

**仅当构建状态成功**- 在开始步骤之前，构建代理向服务器请求构建状态，如果状态失败则跳过该步骤。

[https://confluence.jetbrains.com/display/TCD8/Configuring+Build+Steps](https://confluence.jetbrains.com/display/TCD8/Configuring+Build+Steps)

当然，如果至少有一个单元测试失败，您需要使构建失败：

[https://confluence.jetbrains.com/display/TCD8/Build+Failure+Conditions](https://confluence.jetbrains.com/display/TCD8/Build+Failure+Conditions)

在“构建失败条件”页面的“如果构建失败”区域，指定 TeamCity 构建失败的时间：

**至少一项测试失败**：如果构建失败至少一项测试，请选中此选项以将构建标记为失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T13:46:11.767

这是（正如您所发现的）TeamCity 的一个已知问题，在他们的问题跟踪器中有一组[链接问题。](http://youtrack.jetbrains.com/issue/TW-17002)这个问题有望在 TeamCity 的下一个版本（8.x 版）中得到解决

同时，我们确定解决问题的方法（对于版本 6.5.5）是下载测试结果文件作为后续步骤的一部分。然后对其进行解析以检查任何测试失败，返回错误代码并因此正确地破坏构建（执行我们需要的任何清理作为该失败的一部分），这可能对您有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T19:52:33.177

TeamCity 构建失败并不意味着它将停止构建，并且如果您的构建提供了 TeamCity 要求的构建输出文件，它将发布工件。它只会正确更新构建状态。

但是，您可以很好地通过修改构建脚本来停止构建过程，以在测试用例失败时停止构建。如果您使用的是 MSBuild，那么`ContinueOnError="false"`会这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:24:19.710

最后，我能够通过快照依赖关系解决问题，我将有一个单独的“部署”构建，它依赖于测试构建，现在如果测试失败，它就不会运行。

[这](http://blogs.jetbrains.com/teamcity/2012/04/24/teamcity-build-dependencies-2/)对于设置依赖关系很有用。

# c# - 使用程序集共享枚举

> ID：15254582
> 
> 赞同：1
> 
> 时间：2013-03-06T17:57:33.880
> 
> 标签：c#, wpf

我正在开发一个 MVVM 风格的 WPF 日志查看器应用程序，其中视图（UI）与核心逻辑分离（顺便使用视图模型）

我有一个名为 LogViewer.Core.dll 的程序集，在这个程序集中有一个枚举 LogLevel，它有一些值。

在 UI 中，即在不同的程序集 (LogViewer.UI.dll) 中，有一个列表框应该包含 LogLevel 枚举的项目源，该列表绑定到视图模型中的 LogLevel 列表，在同一个程序集中 (查询原因）

我不希望 LogViewer.UI.dll 持有对 LogViewer.Core.dll 的引用

我应该创建一个 LogViewer.Shared.dll 来保存这个命名空间和其他相同的命名空间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:04:46.860

> 我应该创建一个 LogViewer.Shared.dll 来保存这个命名空间和其他相同的命名空间吗？

是的

# jquery - jquery使用偏移量将图像从一个地方移动到另一个地方，给出奇怪的结果

> ID：15254583
> 
> 赞同：0
> 
> 时间：2013-03-06T17:57:36.180
> 
> 标签：jquery

我一直在尝试沿着直线制作图像移动动画，但惨遭失败:)它完全走错了方向，我不知道为什么......

请访问： http: [//kpi.ge/ultrasound-systems/philips-hdi5000/](http://kpi.ge/ultrasound-systems/philips-hdi5000/)

然后单击获取报价按钮旁边的“添加到比较框”。

动画从那里开始，应该直接到比较框所在的左侧......但它会下降并且出现在正确的位置。我很确定父偏移量不正确，但据我所知，偏移量与文档窗口有关，所以结果让我感到困惑......

jQuery：

```
var product_img = data;
var fdest_pos = $("#compareproducts").offset();

if (!$("#compareleft").has(".compareprodimg").length && !$(".compareboxbtn").has(".compareprodimg").length) {
    $("#clickedthis").append(product_img);
    $("#clickedthis").removeAttr("id");
    $(".compareboxbtn").children(".compareprodimg").css({
        position: "absolute"
    }).animate({
        left: fdest_pos.left,
        top: fdest_pos.top
    }, {
        complete: function () {

            $(this).removeAttr("style");
            $(this).appendTo("#compareleft");
            $("#compareleft").attr("class", "on");
            $("#compareleft").attr("href", get_param_url);

            //save to session
            $.session.set("compareLeftContent", product_img);
            $.session.set("compareLeftId", get_param_url);

            // if href is numeric turn on compare now button
            if ($("#compareleft").attr("href") > 0 && $("#compareright").attr("href") > 0) {

                $("#compareproducts .button").removeClass("off");
                $("#compareproducts .button").addClass("on");
                $("#compareproducts .button.on").on("click", function () {
                    window.location = "/kpi/compare/?product=" + $("#compareleft").attr("href") + "," + $("#compareright").attr("href");
                });

                $(".button.on").unbind("mouseenter mouseleave"); //Remove helper pop-up "add another product"

            } // if

        }
    });
} // if left 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:34:57.313

`offset()`和CSS 属性之间`left`有区别。给出与*文档*相关的位置，并且与父*容器*相关。`top``offset()`*`left``top`*

 **假设目标元素的偏移量是 100 和 150 像素。被设置动画的元素可能从 0 开始`left`，`top`所以当你使用目标偏移量设置动画时，元素会向左移动 100 像素，向下移动 150 像素。（您可以在网页上看到它：如果您查看动画运动并想象它从页面的左上角开始，它会最终到达正确的位置。）

您需要计算两个元素的偏移量之间的差异并按该量进行动画处理。像这样的东西：

```
var product_pos = $(".compareboxbtn").children(".compareprodimg").offset();
var newLeft = fdest_pos.left - product_pos.left;
var newTop = fdest_pos.top - product_pos.top;

$(".compareboxbtn").children(".compareprodimg").css({
    position: "absolute"
}).animate({
    left: newLeft,
    top: newTop
}, {
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:01:07.077

困难在于您将图像对象插入到其 offsetParent 为主体的不同 DOM 节点中。在动画之前，您的对象包含在具有多个嵌套 offsetParents 的 DOM 节点中。

这意味着在移动之前，您必须获取元素当前的总偏移量，并从那里开始动画。以下是一个更通用的解决方案，因为它适用于图像，无论它们嵌套在 DOM 中的什么位置：

```
relativeOffsetParent = function() {
    var $ctx = $(this);
    var $op = $ctx.offsetParent();
    if ($ctx.is($op) || $op.css("position") === "relative") {
        return $op;
    } else {
        return relativeOffsetParent.call($op);
    }
};

recursiveOffset = function() {
    var $ctx = $(this);
    var offset = $ctx.offset();
    var $op = relativeOffsetParent($ctx);
    if ($ctx.is($op) || $op[0].tagName.match(/BODY|body/)? true : false) {
        return offset;
    } else {
        var pOffset = recursiveOffset.call($op);
    return {
        left: pOffset.left + offset.left,
        top: pOffset.top + offset.top
    };
  }
};

var fdest_pos = $("#compareleft").offset();

$(".compareboxbtn").click(function() {
    $(this).find(".compareprodimg").each(function(){
      var o = recursiveOffset.call($(this));
      $(this)
        .removeAttr("style")
        .appendTo("#compareleft")
        .css({
            zIndex:9999,
            position: "absolute",
            left: o.left,
            top: o.top
        })
        .animate({
            left: fdest_pos.left,
            top: fdest_pos.top
        })
      ;
    })
}); 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/AMBk4/6/)**

# linkedin - linkedin 公开个人资料 url memberdata 插件

> ID：15254584
> 
> 赞同：0
> 
> 时间：2013-03-06T17:57:36.330
> 
> 标签：linkedin

我正在尝试创建一个公司目录，如果用户选择连接，该目录将提供指向公共个人资料中链接的员工的链接。

因此，在我们的员工资料页面上，用户可以选择将他们的linkedin 帐户链接到他们的员工资料。我们启动一个 oAuth 流程并检索他们的散列linkedin id，然后我们将其存储。伟大的。现在不工作的部分。

根据他们的插件示例，我有这个......

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: xxxxxxxxxxxx
    authorize: false
</script>

<script type="text/javascript">
    function INTEST() {
        IN.API.Profile().ids("pU-LBvD_y0")
            .fields(['id', 'firstName', 'lastName', 'picture-url', 'public-profile-url'])
            .result(function (result) {
                profile = result.values[0];
             })
             .error(function (errorResult) {
        var i = 0;
        });;
    }
</script> 
```

我收到了除 public-profile-url 之外的所有信息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T03:47:05.177

我相信你现在已经想通了。但为了他人的利益：

使用 JavaScript API 时，您必须将配置文件字段名称从虚线符号转换为大写字母。例如 first-name 变为 firstName。public-profile-url 变为 publicProfileUrl

[在http://developer.linkedinlabs.com/tutorials/jsapi_profile/](http://developer.linkedinlabs.com/tutorials/jsapi_profile/)参考以下 API 文档

# java - 如何让 PJAX 在按钮和链接上工作？

> ID：15254587
> 
> 赞同：0
> 
> 时间：2013-03-06T17:57:50.673
> 
> 标签：java, jquery, html, pjax

我有很多这样的按钮：

```
<button data-pjax class="btn btn-inverse" type="button" onclick="location.href='http://mybuttonurl.com'">my button</button> 
```

还有一些这样的网址：

```
<a data-pjax href="http://mylinkurl.com">My url</a> 
```

我希望 PJAX 同时处理按钮和链接。此代码适用于链接：

```
$(document).pjax('[data-pjax] a, a[data-pjax]', '#pjax-content'); 
```

这样做也是如此：

```
$(document).pjax('a', '#pjax-content'); 
```

我似乎无法让它适用于按钮和链接。即使这不适用于单独的按钮：

```
$(document).pjax('button', '#pjax-content'); 
```

我怎样才能让它工作？

注意：当我说“不起作用”时，它意味着页面会进行完全刷新，而不是仅仅将 HTML 内容加载到#pjax-content 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:58:35.793

当我使用 Twitter Bootstrap 时，我最终用链接替换了按钮：

```
<a data-pjax class="btn btn-inverse" type="button" href='http://mybuttonurl.com'>my button</a> 
```

我相信这是做我想做的事情的更好方法 + PJAX 以这种方式跨浏览器工作

# mongodb - Mongo：查询与另一个不相关的对象（多对多）

> ID：15254589
> 
> 赞同：1
> 
> 时间：2013-03-06T17:57:57.567
> 
> 标签：mongodb, many-to-many

我在 MongoDB 中有这个模式，团队和玩家之间的多对多关系：

团队：

```
{
    name: "Team1"
    players: ["1", "2"]
}
{
    name: "Team2"
    players: ["1"]
} 
```

玩家：

```
{ id: "1", name: "Player1"}
{ id: "2", name:"Player2"}
{ id: "3", name:"Player3"} 
```

我想查询所有不属于任何球队的球员。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:14:17.403

您需要分两步执行此操作。在外壳中：

```
// Find all the player ids that are part of teams
var ids = db.teams.distinct('players')

// Find all the players with ids not in that set.
db.players.find({id: {$nin: ids}}) 
```

返回：

```
{ "_id": ObjectId("5137947e0f26e0cc03fc3735"), "id": "3", "name": "Player3" } 
```

# dns - Amazon RDS - 从 DNS 记录连接

> ID：15254591
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:07.677
> 
> 标签：dns, amazon-web-services, amazon-rds

我一直在为我的网站进行新的服务器配置，现在我有点卡住了......

如何在不使用非常长的 AWS DNS 地址的情况下访问我的 RDS 实例 (MySQL)？

就像我可以通过以下方式访问我的 RDS 实例：`db.exemple.com`使用 A、CNAME 或任何其他 DNS 记录。

这是新的配置：

*   Amazon EC2 - Linux 实例 - 带 LAMP 的 Ubuntu 12.04
    *   用于 PHP、Apache、Zend 等 Web 服务。
*   Amazon RDS - MySQL 实例
    *   用于 MySQL 数据库
    *   出于性能和管理目的与 EC2 实例分离

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:40:36.377

您可以创建将映射到 RDS 地址的 CNAME 记录。但是，这将毫无意义。您将得到的只是额外的 DNS 查找。

# excel - 如何在 Excel 中创建后退按钮以将用户移动到他来自的位置？

> ID：15254592
> 
> 赞同：4
> 
> 时间：2013-03-06T17:58:09.463
> 
> 标签：excel

如果场景可行，请告诉我：用户单击`Sheet1!A1`带有“转到详细信息”按钮的单元格并将他移动到`Sheet2!B1`，他可以在同一行中单击“返回”按钮以移回`Sheet1!A`他来自的行。同样，他可以`Sheet1!J1`使用“Go Details”按钮单击单元格，将他移动到同一`Sheet2!B1`行，但这次“Back”按钮将他带回`Sheet1!J`行，以便记住用户来自的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:18:33.580

如果用户选择 Excel 选项 > 快速访问工具栏 > 所有命令。添加“Back”和“Foward”它们在跳转链接后会有前后导航，就像在网页上一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:39:42.400

在`ThisWorkbook`例程中插入此代码：

```
Private rngLastLink As Range

Private Sub Workbook_SheetFollowHyperlink(ByVal Sh As Object, ByVal Target As Hyperlink)
    If UCase(Target.Parent.Value) = "BACK" Then
        If rngLastLink Is Nothing Then
            Application.EnableEvents = False
            Target.Follow
            Application.EnableEvents = True
        Else
            rngLastLink.Worksheet.Activate
            rngLastLink.Activate
        End If
    Else
        Set rngLastLink = Target.Parent
    End If
End Sub 
```

它将存储来自任何未称为“返回”的已按下超链接的单元格。如果按下“返回”，它将重新激活该单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:01:11.193

首先，您需要创建一个新按钮，然后在成功创建按钮后会弹出分配宏屏幕。

复制此代码

```
Sub Button1_Click()
Worksheets("sheet2").Activate
End Sub 
```

作为宏

根据您的方案更改 sheet2。

```
Private Sub Workbook_SheetDeactivate(ByVal Sh As Object)
Sheets.Select
ActiveCell.EntireRow.Select
ActiveSheet.Select 
```

将在工作表之间同步整行 - 只会在您更改工作表时触发...

```
Private Sub Workbook_SheetSelectionChange(ByVal Sh As Object, ByVal Target
As Range)
Sheets.Select
ActiveCell.EntireRow.Select
ActiveSheet.Select
End Sub 
```

每次用户更改活动工作表中的单元格时都会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T18:03:22.780

我使用 Alt-Left 箭头返回。

```
Sub GoBackToWhereverYouCameFrom()
    Application.SendKeys ("%{LEFT}")
End Sub 
```

# asp.net - 读取使用 javacript:void() 打开的弹出窗口的源代码？

> ID：15254593
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:14.370
> 
> 标签：asp.net, regex, webclient

我将尽我所能，尽可能清楚地提出这个问题。是否可以编写一些 asp.net 代码，这些代码可以通过并读取通常通过单击 javascript:void() 链接打开的弹出窗口的源代码。基本上我想阅读所述弹出窗口的来源，提取特定链接，然后在网页中呈现这些链接。我想要实现的是一种让下载参议院视频变得容易的方法——他们的视频在使用 Silverlight 的新弹出窗口中打开。mp4 文件的位置在源代码中，所以我想读取那个 url。我使用下面的代码做了类似的事情。不同之处在于 mp4 链接位于主页中。代码读取源代码，然后输出视频链接，这样我就可以右键单击并另存为。这是用于德国安全会议的视频。

```
Protected Sub btnClick_Click(sender As Object, e As EventArgs) Handles btnClick.Click
    Dim r As New Regex("\bhttps?://\S+\.(?:jpg|png|gif|mp3|mp4|3gp)\b", RegexOptions.IgnoreCase)

    Dim c As New WebClient
    Dim s As String = c.DownloadString(txtUrl.Text)
    Dim sb As New StringBuilder

    For Each m As Match In r.Matches(s)
        sb.Append("<a href=" & m.Value & ">" & m.Value & "</a><br />")
        divLinks.InnerHtml = sb.ToString
    Next
End Sub 
```

# xaml - Windows 8 中使用 Popup 的上下文菜单

> ID：15254595
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:18.923
> 
> 标签：xaml, windows-8, winrt-xaml

您好我正在尝试使用 Popup 在 Windows 8 中创建上下文菜单。在右键单击按钮时，我正在调用以下函数

```
private async void UIElement_OnRightTapped(object sender, RightTappedRoutedEventArgs e)
    {
        PopupMenu popUpMenu = new PopupMenu();
        popUpMenu.Commands.Add(new UICommand("File"));
        Rect rect = GetRect(sender);
        var result= await popUpMenu.ShowForSelectionAsync(rect, Placement.Right);
    } 
```

而 GetRect 方法的定义如下：-

```
private Rect GetRect(object sender)
    {
        FrameworkElement element = sender as FrameworkElement;
        GeneralTransform elementTransform = element.TransformToVisual(null);
        Point point = elementTransform.TransformPoint(new Point());
        Size size = new Size(element.ActualWidth, element.ActualHeight);
        Rect rect = new Rect(point, size);
        return rect;
    } 
```

虽然 GetRect 返回正确的值，但我仍然得到结果为空。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:23:25.627

我无法弄清楚你为什么会遇到这个问题。在第一个视图中，一切看起来都很好。

也许 Tim Heuer [Callisto](http://visualstudiogallery.msdn.microsoft.com/0526563b-7a48-4b17-a087-a35cea701052)包包含一种更简单的方法来满足您的需求。请参阅[此](https://github.com/timheuer/callisto/wiki/Flyout)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T08:55:46.280

这是因为您没有单击“文件”命令，而是单击了页面上的其他位置。

# wpf - 表达式混合 2012 与 Visual Studio 2008 兼容

> ID：15254598
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:20.177
> 
> 标签：wpf, xaml, visual-studio-2008, visual-studio-2012, expression-blend

我们正在使用 Visual Studio 2008 并针对 .NET 框架 3.5。我安装了 Visual Studio 2008 和 2012。我正在考虑为用户界面创建一个 WPF 项目，并希望使用 Expression Blend。我的问题是 - 在 Visual Studio 2008 中创建的项目是否与与 Visual Studio 2012 捆绑的 Expression Blend 兼容？

如果没有，那么是否可以使用与 Visual Studio 2008 兼容的旧版 Expression Blend？如果属实，有链接或下载吗？是否有任何其他图形设计程序可以生成与 VS 2008 兼容的良好 XAML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:23:24.680

看起来 Microsoft Expression Blend 2 可以与 Visual Studio 2008 一起使用。

**编辑**

@Joel，是的，感谢您指出 Blend 3 也可以与 Visual Studio 2008 一起使用，这在 Microsoft[链接](http://msdn.microsoft.com/en-us/library/cc295109%28v=expression.30%29.aspx)中非常明显。

# python - 与 SQLAlchemy 上的复合键的多对多关系

> ID：15254600
> 
> 赞同：5
> 
> 时间：2013-03-06T17:58:30.010
> 
> 标签：python, sqlalchemy, composite-primary-key

假设我有以下模型：

```
class Molecule(Base):
   db = Column(Integer, primary_key=True)
   id = Column(Integer, primary_key=True)
   data = Column(Integer)

class Atom(Base):
   id = Column(Integer, primary_key=True)
   weight = Column(Integer) 
```

我想在 Molecule 和 Atom 之间建立**多对多的**关系，最好的方法是什么？注意 Molecule 的**主键**是**Composite**。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T10:14:40.310

**多对多**关联表应该这样定义：

```
molecule2atom = Table(
  'molecule2atom',
  Base.metadata, 
  Column('molecule_db', Integer),
  Column('molecule_id', Integer),
  Column('atom_id', Integer, ForeignKey('atom.id')),
  ForeignKeyConstraint( 
    ('molecule_db', 'molecule_id'),
    ('molecule.db', 'molecule.id')  ),
) 
```

并像往常一样将关系添加到模型之一，例如，在 Class Atom 中添加：

```
molecules = relationship("Molecule", secondary=molecule2atom, backref="atoms") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-26T06:44:46.167

我更喜欢这里给出的解决方案 -[多对多复合键](https://avacariu.me/writing/2019/composite-foreign-keys-and-many-to-many-relationships-in-sqlalchemy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T13:12:30.960

如果您使用关联表或完全声明的表元数据，则可以`primary_key=True`在两列中使用 ，如此处所建议[的](https://docs.sqlalchemy.org/en/14/faq/ormconfiguration.html)。

关联表示例：

```
employee_role = db.Table(
    "employee_role",
    db.Column("role_id", db.Integer, db.ForeignKey("role.id"), primary_key=True),
    db.Column("employee_id", db.Integer, db.ForeignKey("agent.id"), primary_key=True),
) 
```

元数据示例：

```
# this is using SQLAlchemy
class EmployeeRole(Base):
    __tablename__ = "employee_role"

    role_id = Column(Integer, primary_key=True)
    employee_id = Column(Integer, primary_key=True)

# this is using Flask-SQLAlchemy with factory pattern, db gives you access to all SQLAlchemy stuff
class EmployeeRole(db.Model):
    __tablename__ = "employee_role"

    role_id = db.Column(db.Integer, primary_key=True)
    employee_id = db.Column(db.Integer, primary_key=True) 
```

它的 Alembic 迁移：

```
op.create_table(
        'employee_role',
        sa.Column('role_id', sa.Integer(), nullable=False),
        sa.Column('employee_id', sa.Integer(), nullable=False),
        sa.PrimaryKeyConstraint('role_id', 'employee_id')
    ) 
```

SQL：

```
CREATE TABLE agent_role (
    role_id INTEGER NOT NULL, 
    employee_id INTEGER NOT NULL, 
    PRIMARY KEY (role_id, employee_id)
); 
```

在关系方面，在一侧声明它（这应该给你`role.employees`或`employee.roles`应该返回 a `list`）：

```
# this is using Flask-SQLAlchemy with factory pattern, db gives you access to all SQLAlchemy stuff
class Employee(db.Model):
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    roles = db.relationship("Role", secondary=employee_role, backref="employee") 
```

您的角色类可以是：

```
# this is using Flask-SQLAlchemy with factory pattern, db gives you access to all SQLAlchemy stuff
class Role(db.Model):
    __tablename__ = "role"
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    name = db.Column(db.String(25), nullable=False, unique=True) 
```

# mysql - MySQL 和文件管理：在未来的自动增量中重用已删除的 ID

> ID：15254605
> 
> 赞同：2
> 
> 时间：2013-03-06T17:58:37.740
> 
> 标签：mysql, file-upload, auto-increment

我在上传文件时使用数据库来命名文件，我的应用程序使用数据库来识别文件（用于视频流），因此它们需要相同。但是，如果上传失败，或者有人取消上传，我会留下一个浪费的 ID。

加班我浪费了更多的 ID 号码然后被使用，我创建了一个脚本，在插入行 5 天后将它们标记为未使用，并且正在考虑制作另一个脚本来使用那些“未使用”的 ID，如果不存在则插入一个新的排。但是当我有多台服务器执行该任务时，我可以看到问题。

我可以删除一行并在以后的自动增量中重新使用该行的 ID 吗？

我对完成此任务的其他方式持开放态度，但如果我可以在未来的自动增量中重新使用已删除的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:04:51.900

如果您删除该行，您可以运行

```
ALTER TABLE yourtable AUTO_INCREMENT = 1 
```

重新设置自动递增以从最后一个未使用的 ID 开始，但我没有看到这样做的意义。如果您这样做是为了数据库，请不要这样做。数据库不在乎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T20:34:06.257

如果是为了数据库，我会 +1“不要”，因为真的，它根本不在乎。话虽如此，我还是这样做了，因为我有点像一个整洁的怪胎，我会给你一个例子来说明我为什么决定这样做。

我为音乐家创建了一个服务，它使用 auto_increment 作为歌曲、购买和其他一些东西的索引参考，并且与大多数具有注册表单和邮件功能的应用程序一样，它被机器人、垃圾邮件发送者等制造了大量的和大量的免费帐户，它们经常被删除（cron 选项卡大约每 3 天自动清理一次），而我最终得到的是非常不一致的计数。1 到 41，然后 129 到 240，然后 491 到 800，依此类推。

“缩小差距”更像是个人偏好，因为正如我所说，我有点像一个整洁的怪胎，我喜欢一致性。我还必须为想要跟踪数据并且喜欢一致性的经理等打印报告，所以这很有帮助。

至于当自动增量达到一个已经存在的数字时会发生什么？它跳到下一个可用的并继续。这就是为什么您可以将其重置为 1 并且一切都很好。没有造成伤害。

# .htaccess - 如果referer url在htaccess中包含xx？

> ID：15254606
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:39.627
> 
> 标签：.htaccess

我正在尝试在 htaccess 中创建 if 语句，如果引用者包含**搜索？q=**

我想出了这个例子，如果引荐网址包括 ebay。

```
RewriteCond %{HTTP_REFERER} ^http://(www\.)?.*(-|.)ebay(-|.).*$ [NC,OR] 
```

如何将其更改为 **search?q=**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:18:11.780

尝试这个：

```
RewriteCond %{HTTP_REFERER} search?q= [NC] 
```

# c# - 摄像头服务器死机！开始录制时出现错误 100

> ID：15254609
> 
> 赞同：1
> 
> 时间：2013-03-06T17:58:44.307
> 
> 标签：c#, android, video, xamarin.android, recording

注意：我正在使用 Monodroid，期待 C# 代码。

调用 _recorder.Start() 时，我遇到了这个错误。

代码：

```
private void IniciarGrabacion()
{
    try
    {
        CamcorderProfile camProfile = CamcordeProfile.Get(CamcorderQuality.High);
        String outputFile = "/sdcard/trompiz.mp4";
        _camera.Unlock ();
        _recorder = new MediaRecorder();
        _recorder.SetCamera(_camera);
        _recorder.SetAudioSource(AudioSource.Default);
        _recorder.SetVideoSource(VideoSource.Camera);
        _recorder.SetProfile(camProfile);
        _recorder.SetOutputFile(outputFile);
        _recorder.SetPreviewDisplay(_preview.Holder.Surface);
        _recorder.Prepare();
        _recorder.Start(); // HERE IS WHERE THE ERROR APPEARS
    }
    catch(Exception ex)
    {
        string error = "Error starting Recording: " + ex.Message;
        Log.Debug("ERROR",error);
        Toast.MakeText(Application, error, ToastLength.Long).Show();
    }
} 
```

outputFile 是硬编码的，因为我仍在测试。我可以确认它存在，因为它是被创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:00:37.353

我只是想出了问题。这与如何处理相机无关。这是配置文件设置。

```
CamcorderProfile camProfile = CamcordeProfile.Get(CamcorderQuality.High); 
```

可能是设备错误，但我无法将其设置为高。为了让它工作，我把它改成了LOW。

```
CamcorderProfile camProfile = CamcordeProfile.Get(CamcorderQuality.Low); 
```

我有 Zenithink C93 Z283 (H6_2f)

我希望这可以帮助其他任何与之抗争的人......

现在我必须看看如何以高质量录制。我知道我可以，因为本机相机应用程序记录很高......

# jquery - 当没有延迟加载的访问者可以看到 img 时，为 img 创建淡入淡出效果

> ID：15254611
> 
> 赞同：0
> 
> 时间：2013-03-06T17:58:45.010
> 
> 标签：jquery, html, jquery-ui, fadein

我试图在图像对用户可见时（即用户滚动时）而不应用延迟加载效果时对图像进行淡入淡出效果。我用谷歌搜索了很多，但徒劳无功。到处都附有“延迟加载”。

我完全是 jquery noob。我尝试结合

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling)

和

[jquery 淡入淡出元素不显示样式为“可见性：隐藏”的元素](https://stackoverflow.com/questions/2435751/jquery-fade-element-does-not-show-elements-styled-visibility-hidden)

和

[如何在滚动时进行图像淡入效果（如 mashable.com）](https://stackoverflow.com/questions/2750776/how-to-do-the-image-fade-in-effect-upon-scroll-like-mashable-com)

2小时后，输出就像有jquery代码一样。

很多站点都使用这个效果。有没有更简单的技巧来实现这个？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:39:47.060

找到了一个插件，它可以让你在视口可见时执行一些事情

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

非常感谢

# c# - 如何在 foreach 中的 try/catch 中重试 try 语句

> ID：15254612
> 
> 赞同：1
> 
> 时间：2013-03-06T17:58:46.360
> 
> 标签：c#, foreach, .net-4.0, try-catch

请看这个[线程](https://stackoverflow.com/questions/1563191/c-sharp-cleanest-way-to-write-retry-logic)：

在这个线程中，我们回答了同样的问题`do...while`。但是呢`foreach`？这意味着我们如何使用另一个代理（另一个整数） 重试其中的`try`语句：`try/catch``foreach``proxy_line_num`

```
foreach (string link_1 in links_with_kid)
{
   try
   {
      getData = "";
      req = (HttpWebRequest)WebRequest.Create(link_1);
      req.Method = "GET";
      req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
      req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0";
      req.ContentType = "text/html; charset=utf-8";
      req.Referer = "http://www.example.com/";
      req.KeepAlive = true;
      req.Timeout = 25000;

      if (useproxy)
      {
         string[] Ok_ip_port_ar = list_lines_GPL[proxy_line_num].Split(':');
         proxy_line_num++;

         if (proxy_line_num == list_lines_GPL.Count)
         {
            proxy_line_num = 0;
         }
         proxy = new WebProxy(Ok_ip_port_ar[0], int.Parse(Ok_ip_port_ar[1]));
       }
       req.Proxy = proxy;
       req.CookieContainer = cookieJar1;
       res = (HttpWebResponse)req.GetResponse();

       Stream = res.GetResponseStream();
       reader = new StreamReader(Stream);
       reader_str = reader.ReadToEnd();

       htmlDoc = new HtmlAgilityPack.HtmlDocument();
       htmlDoc.LoadHtml(reader_str);

       var images = from image in htmlDoc.DocumentNode.Descendants("img")
                             select image;

       string address = string.Empty;

       foreach (var image in images)
       {
          if (image.Attributes["src"] != null)
          {
             string[] address_ar = image.Attributes["src"].Value.Split('/');
             string address_ar_last = address_ar[address_ar.Length - 1];
             char[] address_ar_last_char = address_ar_last.ToCharArray();

             if (address_ar_last_char.Length == 8
                            &&
                            Char.IsUpper(address_ar_last_char[0])
                            &&
                            Char.IsUpper(address_ar_last_char[1])
                            &&
                            Char.IsUpper(address_ar_last_char[2])
                            &&
                            Char.IsUpper(address_ar_last_char[3]))
             {
                address = image.Attributes["src"].Value;
                string localFilename = @"c:\images-from-istgah\" + address_ar_last;

                using (WebClient client = new WebClient())
                {
                   client.DownloadFile(address, localFilename);
                }
             }
           }
         }
      }

      catch (Exception ex)
      {

      }
         reader.Close();
         Stream.Close();
         res.Close();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:10:00.343

我不认为你可以用foreach。它旨在为您提供迭代器中的下一项。

如果我是你，我会使用带有迭代器的普通 for 循环。这样您就可以控制何时转到下一个项目。

编辑：

在编写它时，一段时间实际上在 C# 中更有意义。

```
IEnumerator<String> iter = list.GetEnumerator();
bool bHasMore = iter.MoveNext();
while (bHasMore) {
  try {
    ...
    bHasMore = Iter.MoveNext();
  }
  catch ...
} 
```

我脑子里没有完整的参考，所以你可能需要查找一些东西来编译它，但我希望没有。

# android - 软键盘与 TabHost 中的 EditText 重叠

> ID：15254621
> 
> 赞同：4
> 
> 时间：2013-03-06T17:59:27.377
> 
> 标签：android, android-layout

我知道以前有人问过类似的问题，但我无法弄清楚如何处理我的布局。

**问题：** 当添加许多行时，键盘与 AutoCompleteTextView 重叠。我曾尝试将所有内容包装在滚动视图等中，但这并没有帮助。 ![在此处输入图像描述](../Images/b2d6cc2f7689121d562b48a4109d6550.png) 任何帮助，将不胜感激。

提前致谢

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <HorizontalScrollView
            android:id="@+id/tabsScroll"
            android:layout_width="fill_parent"
            android:fadingEdge="horizontal"
            android:fillViewport="true"
            android:layout_height="wrap_content"
            android:scrollbars="@null">
            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0" />
        </HorizontalScrollView>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />
        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
        <ScrollView
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/scrollView1">
            <LinearLayout
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/InputOuterContainer"
                android:layout_alignParentBottom="true">
                <View
                    android:background="#ffcccccc"
                    android:layout_width="fill_parent"
                    android:layout_height="1.0px" />
                <LinearLayout
                    android:orientation="horizontal"
                    android:layout_width="fill_parent"
                    android:background="#FFFFFF"
                    android:layout_height="wrap_content"
                    android:id="@+id/InputContainer">
                    <AutoCompleteTextView
                        android:id="@+id/InputTextView"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:hint="@string/Ready"
                        android:layout_weight="1.0"
                        android:imeOptions="actionGo"
                        android:inputType="textNoSuggestions"
                        android:selectAllOnFocus="true"
                        android:focusable="true" />
                    <ImageButton
                        android:id="@+id/ButtonRun"
                        android:paddingLeft="16.0dip"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/go"
                        android:scaleType="center"
                        style="?android:attr/borderlessButtonStyle"
                        android:layout_gravity="top" />
                </LinearLayout>
            </LinearLayout>
        </ScrollView>
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:06:01.410

好的，在您的清单中，将**android:windowSoftInputMode**添加到您的活动中，

检查这个：http: [//developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

然后将**android:windowSoftInputMode**设置为**adjustPan**或**adjustResize**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:05:27.400

我在 ScrollView 标签中添加了这一行：

```
android:isScrollContainer="false" 
```

# cpu - VirtualBox Minix3 恐慌

> ID：15254625
> 
> 赞同：0
> 
> 时间：2013-03-06T17:59:40.430
> 
> 标签：cpu, virtualization, virtualbox, minix

谷歌搜索，搜索报告，如果在 PC 上禁用虚拟化，可能会出现这样的错误。我已经检查了 BIOS 配置，它已启用。我的 CPU 是酷睿 i3。

![在此处输入图像描述](../Images/2f4c86b61bfe7d7051232a587bda9c92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T08:21:45.273

如果您的硬件支持虚拟化，请确保它已在 BIOS 中激活。然后确保在 VM 设置的选项卡中选中“启用 VT-x/AMD-V”。

如果此解决方案对您没有帮助，请尝试使用此命令启动 VM：

```
VBoxSDL --startvm "Minix 3" --norawr0 --norawr3 
```

# mysql - 是否有另一个批处理表

> ID：15254627
> 
> 赞同：0
> 
> 时间：2013-03-06T17:59:57.020
> 
> 标签：mysql, sql, database, database-design, inventory

SKU 表具有以下属性

```
SKU(id, name/description, batch, type, category, price) 
```

**ID+Batch**用于定义特定项目。

为什么使用批处理属性或这是什么。当商品的价格发生变化时，批次会发生变化。因此，从规范化的角度来看，我是否有必要在另一个名为 batch 的表中记录有关批次的信息

```
sku(id, name/description, batch, type, category ,price)
batch(sku_id, batch, price) 
```

当一个项目的价格变化首先去批处理表创建新行包括新批次及其价格，然后将其映射到 sku 表。

# symfony - Symfony2 和主机名问题

> ID：15254629
> 
> 赞同：0
> 
> 时间：2013-03-06T18:00:00.833
> 
> 标签：symfony, subdomain, hostname

我可以尝试通过以下方式映射 url：

en.test.example.local | en.example.com

和

admin.test.example.local | admin.example.com

使用管理员，我没有任何问题可以正常工作，但是，当我尝试使用变量开始 uri 时，symfony 会说：格式错误的内联 YAML 字符串（{locale}{enviroment}example.{domain}）...

配置是下一个：

```
# web urls
example_web:
  host: {locale}{enviroment}example.{domain}
  requirements: { locale: en , enviroment: .|.\w+., domain: local|com }
  resource: "@ExampleWebBundle/Resources/config/routing.yml"
  prefix: /

# admin urls
example_admin:
  host: admin{enviroment}example.{domain}
  requirements: { enviroment: .|.\w+., domain: local|com }
  resource: "@ExampleAdminBundle/Resources/config/routing.yml"
  prefix: / 
```

如果我把这个：

```
# web urls
example_web:
  host: en{enviroment}example.{domain}
  requirements: { locale: en , enviroment: .|.\w+., domain: local|com }
  resource: "@ExampleWebBundle/Resources/config/routing.yml"
  prefix: / 
```

工作正常，但它是一个多语言应用程序，我需要“子域”的多语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:30:23.797

我的错误非常简单：P

```
 host: "{_locale}.{enviroment}.example.{domain}" 
```

缺少双引号，还使用 ​​_locale 在会话中保存以进行翻译谢谢 cheesemacfly

> 为什么不使用 _local 参数（symfony.com/doc/master/book/...）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:33:21.137

好吧，我用以下信息解决了它：[Symfony2 Routing - route subdomains](https://stackoverflow.com/questions/5366234/symfony2-routing-route-subdomains)

但如果有人知道更好的答案，请告诉我:)

# unicode - Unicode 字符组合拉丁小写字母 C

> ID：15254632
> 
> 赞同：2
> 
> 时间：2013-03-06T18:00:01.850
> 
> 标签：unicode, icu

我在“现实生活”中遇到[COMBINING LATIN SMALL LETTER C (U+0368)的可能性有多大（除了](http://www.fileformat.info/info/unicode/char/368/index.htm)[聪明的苏格兰人](https://plus.google.com/108389724193210567483/about)）？

我在问，因为它在[Unicode Block Combining Diacritical Marks](http://www.fileformat.info/info/unicode/block/combining_diacritical_marks/index.htm)和[Category Mark, Nonspacing [Mn]](http://www.fileformat.info/info/unicode/category/Mn/index.htm)中。

因此，[ICU Transliterator](http://userguide.icu-project.org/transforms/general)等实用程序（使用建议的音译或直接音译）似乎将其视为与[COMBINING GRAVE ACCENT (U+0300)等字符相同。](http://www.fileformat.info/info/unicode/char/300/index.htm)`"NFD; [:Nonspacing Mark:] Remove; NFC"``"Latin-ASCII"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:05:02.783

可能性是完全不确定的，只是说如果你期望它不会发生，那么它就会发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:25:44.170

可能性非常接近于零，但并不完全为零。您不能阻止任何人随意使用 Unicode 字符。Unicode 标准中没有关于 U+0368 的具体信息，但它已明确定义为一个组合字符，会导致符号 (c) 显示在前面的字符之上。我希望主要以中世纪手稿的数字化形式或类似的形式找到它。

在空格字符之后使用它，如在“聪明”页面中提到的那样，不是预期用途，但也不是无效的。Unicode 允许您在任何字符之后使用任何组合标记，无论它是否有意义。

它没有规范或兼容性分解，因此在您不能或不想保留角色的上下文中没有明确的方法来处理。

# editor - 在服务器上使用您自己的文本编辑器

> ID：15254637
> 
> 赞同：1
> 
> 时间：2013-03-06T18:00:35.317
> 
> 标签：editor, hosting

是否有任何托管服务提供商允许您使用自己的文本编辑器来编辑托管文件？目前，我使用的是 Namecheap，我只能通过他们的代码编辑器编辑托管文件，这意味着如果我想使用自己的文本编辑器，我需要在本地编辑文件，然后上传它们。我真的很想直接在服务器上开发一个站点，所以跳过这一步会节省很多时间。

具体来说，我想使用 Sublime Text 2。谷歌没有帮助，所以我希望有人听到可以为我指明正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:04:48.167

看起来[EasyEditors](http://www.easyeditors.com/)可能有你需要的东西。看来您可以在他们的网站上编辑文件。

# java - 锁定静态对象

> ID：15254638
> 
> 赞同：0
> 
> 时间：2013-03-06T18:00:38.280
> 
> 标签：java, multithreading

有多个 A 类实例同时运行。

A 类在其运行中调用 B 类的多个实例。

```
public Class Main {

    public static void main(String args[] ) {

        A a1 = new A();
        Thread t1 = new Thread(a1);
        t1.start();

        A a2 = new A();
        Thread t2 = new Thread(a2);
        t2.start();
    }
}

Class A implements Runnable {

    public void run() {

        B b1 = new B();
        Thread t11 = new Thread(b1);
        t11.start();

        B b2 = new B();
        Thread t21 = new Thread(b2);
        t21.start();
    }
} 
```

在 B 类中有一个名为“method”的方法，其中编辑了 Set Collection。该编辑是基于 B 类中的静态锁定完成的。

# **编辑**-

```
Class B implements Runnable {

    private final static Object LOCK = new Object();
    private final static Set<T> busyRecords = new HashSet<T>();

    public void waitToWorkOn(final T obj) {
        synchronized(LOCK) {
            while (busyRecords.contains(obj)) {
        LOCK.wait(); //go to sleep
       }
       busyRecords.add(obj);            
    }
    }

    public void doneWith(final T obj) {
        synchronized(LOCK) {
           busyRecords.remove(obj);
      LOCK.notifyAll(); 
    }
    }

    public void mathod(obj)  {

     try{
        waitToWorkOn(obj);

         .. do some work with obj
     }
     finally {
        doneWith(obj);
     }
    }

    public void run() {
        method(getObj())
    }
} 
```

*但是当从不同的“A”实例访问时，该 Set**不需要并发控制。**只有在一个 A 实例中，它才需要为所有 B 实例锁定*。

**我的意思是，当 A 的 2 个实例正在运行时，不应让它们等待。但是在一个 A 实例中，如果 2 个 B 对象选择相同的 obj，它们必须在 LOCK.wait 中等待。**

我不认为 LOCK 可以成为非静态的，因为 A 调用了 B 的多个实例。我们可以在这里调整 LOCK 对象以获得更好的跨 A 对象的并发性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:28:32.267

您可以创建共享集合的线程安全实例并将其传递给给定 A 的所有 B。

```
Class A implements Runnable {

    public void run() {

        // create shared set instance scoped to A, and make it thread-safe
        Set col = Collections.synchronizedSet(new HashSet());

        B b1 = new B(col);
        Thread t11 = new Thread(b1);
        t11.start();

        B b2 = new B(col);
        Thread t21 = new Thread(b2);
        t21.start();
    }
}

Class B implements Runnable {

    private final Set<T> someSet;

    private B(Set<T> someSet) {
      this.someSet = someSet;
    }

    public void method(final T obj) {
        someSet.add(obj);
    }

    public void run() {
        method()
    }
} 
```

# c++ - 如何防止 boost::optional 从被错误地构造为0？

> ID：15254639
> 
> 赞同：8
> 
> 时间：2013-03-06T18:00:40.273
> 
> 标签：c++, boost, boost-optional

`boost::optional<T>`(1.51) 提供了一种构造对象的方法，这种方法对我的用户来说是非常危险的，我想阻止这种方法。假设我有自己的整数类，我想传递一个可选的整数并将其存储在某个类中：

```
class myint {
public:
    int m_a;
    myint (int r_a) : m_a(r_a) {
    }
};

struct myclass {
    boost::optional<myint> content;
    myclass (const boost::optional<myint>& arg) : content(arg) {
    }
}; 
```

现在，这是用户使用该类的方式：

```
myclass(myint(13));            //correct use
myclass(boost::none);          //correct use
myclass(myint(0));             //correct use
myclass(0);                    //INCORRECT use, this easy typo
                               //equates boost::none which
                               //is not what the user meant 
```

我想了解这里发生了什么并防止这种行为。

* * *

有趣的是，

```
myclass(1);              //does not compile 
```

* * *

`boost::none`对于我的领域来说，这完全是一个有效的值，但是`boost::none`当用户尝试输入 a 时偷偷摸摸是`0`非常误导和危险的。

意图可能有点隐藏，因为我并没有真正推出一个`myint`课程，而且我真的没有一个`class myclass`几乎没有任何目的的课程。无论如何，我需要向函数发送 10 个左右的可选整数，而重复数据删除不起作用。（你可以想象我问了你的年龄、身高和财富，还有三个特殊的按钮可以检查你是否不想回答问题）

* * *

我发布了一个似乎在下面有效的答案（根据 Mooing 的 Duck & Ilonesmiz 建议构建，但更轻）。不过，我很高兴听到有关它的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:09:16.677

不要让构造函数`boost::optional`取而代之，我会做这样的事情。

```
struct myclass {
    boost::optional<myint> content;
    myclass () = default;
    explicit myclass(const myint& int_):content(int_){}
}; 
```

但是，当我考虑它时，我并不完全清楚您要实现的目标以及要避免发生的事情。会员的目的是什么`optional`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:54:33.403

这比我喜欢的更丑，但它似乎解决了你的担忧。它的工作原理是将给定的参数完美地转发给`myclass`一对采用 an`int`或 a的函数`boost::none_t`，绕过隐式用户定义的构造函数。这是有效的，因为`0`匹配`int`比 更好`boost::none_t`，并且隐式用户定义的构造函数是最差的匹配。

```
class myint {
public:
    int m_a;
    myint (int r_a) : m_a(r_a) {}
};    
boost::optional<myint> myintctor(int arg) {return myint(arg);}
boost::optional<myint> myintctor(boost::none_t arg) {return arg;}

struct myclass {
    boost::optional<myint> content0;
    boost::optional<myint> content1;
    boost::optional<myint> content2;

    template<class T0, class T1, class T2>
    myclass(const T0& a0, const T1& a1, const T2& a2) 
    :content0(myintctor(a0)), content1(myintctor(a1)), content2(myintctor(a2))
    {}
}; 
```

[概念证明](http://stacked-crooked.com/view?id=c44259199bdc755d380640f31c7d738c-18aa934a8d82d638dde2147aa94cac94)。现代编译器应该足够聪明，可以忽略副本，但这对于`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:24:45.220

我猜这个问题只对 optional 有意义`int`。一种解决方案可能是提供两个构造函数：

```
myclass() : content(boost::none) {}
myclass(myint input) : content(input) {} 
```

确实，您失去了`boost::optional`...的优势。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T13:50:12.687

这段代码（灵感来自 Ilonesmiz）似乎可以很好地完成这项工作，并且比 Mooing Duck 的方法要轻一些，但仍然使用神奇的模板技巧。

```
struct myprotectedclass {
    boost::optional<myint> content;

    template <class T>
    myprotectedclass(const T& a) :content(boost::optional<myint>(a)) {}

}; 
```

这是[证明](http://stacked-crooked.com/view?id=9e9e531e2117f941961823d3098dfdad-18aa934a8d82d638dde2147aa94cac94)。
当 C++ 看到 时`0`，它会认为“嗯，这可能是一个 int，但它可能是指向某个东西的指针！” （仅用于`0`，没有其他数字）但是如果你将它传递`0`给一个函数，它必须决定一个类型，所以它选择默认值`int`。而在原始版本中， a`0`被传递给期望 a`myint`或指针（`boost::none_t`是指针）的函数。`0`不是一个 myint，但它可以是一个指针，所以它选择了那个。

# php - jQuery Ajax 未运行错误

> ID：15254647
> 
> 赞同：0
> 
> 时间：2013-03-06T18:01:34.317
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试通过 jQuery 将表单数据发布到 PHP。这是代码。

-------------HTML 表单--------------

```
<div id="createQuestionBlock">
    <form id="createQuestionForm" action="" method="POST">
        Question Code: <input id="code" class="createQuestionTextBox1" type="text" name="questionCode"><span id="invalid_1"></span><br>
        Question Name: <input id="question" class="createQuestionTextBox1" type="text" name="questionName"><span id="invalid_2"></span><br>
        Correct Answer: <input id="answer" class="createQuestionTextBox1" type="text" name="correctAnswer"><span id="invalid_3"></span><br>
        Option 1: <input id="option1" class="createQuestionTextBox2" type="text" name="option_1"><span id="invalid_4"></span><br>
        Option 2: <input id="option2" class="createQuestionTextBox2" type="text" name="option_2"><span id="invalid_5"></span><br>
        Option 3: <input id="option3" class="createQuestionTextBox2" type="text" name="option_3"><span id="invalid_6"></span><br>
        Option 4: <input id="option4" class="createQuestionTextBox2" type="text" name="option_4"><span id="invalid_7"></span><br>
        Option 5: <input id="option5" class="createQuestionTextBox2" type="text" name="option_5"><span id="invalid_8"></span><br>
        <span id="quizCreated"></span>
        <input type="Submit" id="questionSubmit" value="Create Question"></input>   
    </form>
</div> 
```

----------------JAVA脚本JQUERY处理----------------

```
function SubmitFormCreationData() {
$("#createQuestionForm").submit(function(e) {
    e.preventDefault();

    alert("check1");

    $.ajax({
        url: 'InsertNewQuestion.php',
        data: $("#createQuestionForm").serialize(), 
        dataType: 'json',
        success: function(data) {
            alert("check2");

            var infoCorrect = data.infoCorrect;

            if (infoCorrect == 0) {
                alert("Quiz Created");
                window.setTimeout(delay,2000);
                return true;
            } else if (infoCorrect == 1) {
                $("#invalid_1").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 2) {
                $("#invalid_2").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 3) {
                $("#invalid_3").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 4) {
                $("#invalid_4").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 5) {
                $("#invalid_5").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 6) {
                $("#invalid_6").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else if (infoCorrect == 7) {
                $("#invalid_7").text(" Invalid!").show().fadeOut(2000);
                return false;
            } else {
                $("#invalid_8").text(" Invalid!").show().fadeOut(2000);
                return false;
            }    
        }
    });

    alert("check3");
});
} 
```

------------PHP文件-------

```
<?php
$con = mysql_connect("localhost","root","");

if (!$con) 
    die("ERROR: ".mysql_error());                   

$db_con = mysql_select_db("QuestionsDatabase",$con);

if (!$db_con) 
    die("ERROR: ".mysql_error());

$questionCode = $_POST['questionCode'];
$questionName = $_POST['questionName'];
$correctAnswer = $_POST['correctAnswer'];
$option_1 = $_POST['option_1'];
$option_2 = $_POST['option_2'];
$option_3 = $_POST['option_3'];
$option_4 = $_POST['option_4'];
$option_5 = $_POST['option_5']; 

$infoCorrect = 0;

if (CheckCodeField($questionCode) == false)
    $infoCorrect = 1;
else if (CheckQuestionAnswerField($questionName) == false)
    $infoCorrect = 2;
else if (CheckCorrectAnswerField($correctAnswer) == false)
    $infoCorrect = 3;
else if (CheckQuestionAnswerField($option_1) == false)
    $infoCorrect = 4;
else if (CheckQuestionAnswerField($option_2) == false)
    $infoCorrect = 5;
else if (CheckQuestionAnswerField($option_3) == false)
    $infoCorrect = 6;
else if (CheckQuestionAnswerField($option_4) == false)
    $infoCorrect = 7;
else if (CheckQuestionAnswerField($option_5) == false)
    $infoCorrect = 8;

if ($infoCorrect == 0) {
    $rowIDList = mysql_query("SELECT rowID FROM questions");

    $currentGreatestRowID = -1;

    $rowCount = 1;

    while($row1 = mysql_fetch_assoc($rowIDList)) {
        if ($currentGreatestRowID < $row1['rowID']) {
            $currentGreatestRowID = $row1['rowID'];
        }

        $rowCount++;  
    }   

    $currentRowID = $currentGreatestRowID+1;

    $sql = "INSERT INTO questions (rowID,questionCode,questionName,option_1,option_2,option_3,option_4,option_5,option_1_votes,option_2_votes,option_3_votes,option_4_votes,option_5_votes,correctAnswer,pollingStatus) 
    VALUES (".$currentRowID.",".$questionCode.",'".$questionName."','".$option_1."','".$option_2."','".$option_3."','".$option_4."','".$option_5."',0,0,0,0,0,".$correctAnswer.",0)";

    if (mysql_query($sql,$con)) {
        echo "Inserted values";
    }
    else {
        echo ("Could not insert values: ". mysql_error());
    }
}

/*echo "| ".false." | "."0 | ";
echo "CheckCodeField(questionCode) = ".CheckCodeField($questionCode).", ";
echo "CheckQuestionAnswerField(questionName) = ".CheckQuestionAnswerField($questionName).", ";
echo "CheckCorrectAnswerField(correctAnswer) = ".CheckCorrectAnswerField($correctAnswer).", ";
echo "CheckQuestionAnswerField(option_1) = ".CheckQuestionAnswerField($option_1).", ";
echo "CheckQuestionAnswerField(option_2) = ".CheckQuestionAnswerField($option_2).", ";
echo "CheckQuestionAnswerField(option_3) = ".CheckQuestionAnswerField($option_3).", ";
echo "CheckQuestionAnswerField(option_4) = ".CheckQuestionAnswerField($option_4).", ";
echo "CheckQuestionAnswerField(option_5) = ".CheckQuestionAnswerField($option_5).", ";
echo "infoCorrect = ".$infoCorrect;*/

$items = array('infoCorrect'=>$infoCorrect);

json_encode($items);    

mysql_close($con);

//-----------------functions--------------
function CheckCodeField($value) {
    $isCodeValid = true;

    if (is_numeric($value) == false)
        $isCodeValid = false;
    if ($value < 100000)
        $isCodeValid = false;
    if ($value > 999999) 
        $isCodeValid = false;

    return $isCodeValid;
}

function CheckQuestionAnswerField($value) {
    $isQAValid = true;

    if($value == "")
        $isQAValid = false;
    if($value == null)
        $isQAValid = false;
    for($LCV=0; $LCV<(count($value)-1); $LCV++) {
        if($value[$LCV] = "'")
            $isQAValid = false;
        if($value[$LCV] = '"')
            $isQAValid = false;
    }

    return $isQAValid;
}

function CheckCorrectAnswerField ($value) {
    $isAnswerValid = true;

    if (is_numeric($value) == false)
        $isAnswerValid = false;
    if ($value < 1)
        $isAnswerValid = false;
    if ($value > 5) 
        $isAnswerValid = false;

    return $isAnswerValid;
}
//----------------------------------------

?> 
```

现在的问题是我可以看到第一个警报（“check1”）和第二个警报（“check3”），但我看不到警报（“check2”）所以我的假设是错误是 ajax 形式。我试过直接从 html 页面运行 php 文件，它工作正常。出了什么问题？

-编辑后--

因此，我查看了在更改回显 json 编码后 json 编码发送的信息。这是发送的信息 {"infoCorrect":1}。不应该

```
else if (infoCorrect == 1) {
    $("#invalid_1").text(" Invalid!").show().fadeOut(2000);
    return false;
} 
```

自 infoCorrect 为 1 后运行。

--------------编辑后 2-------------------------------- -------------------------------------------------- -------------------- 下面是我如何调用 SubmitFormCreationData() 函数，如上所示。

```
$(document).ready(function() {
     jQueryInitialization();

    ButtonsHandling();

    SubmitFormCreationData();

    setInterval(function() {UpdateData()}, 500);
 }); 
```

--------------最后编辑（找到的解决方案）------------------------------ -----------------------------------------------------------

以下是答案中提到的解决方案的代码。它不是真正的解决方案，而是一种解决方法。我使用 post 而不是 ajax 并且它有效。还要确保您的 jQuery 文件是最新的。

```
function SubmitFormCreationData() {
$("#createQuestionForm").submit(function(e) {
    e.preventDefault();

    $.post("InsertNewQuestion.php", $("#createQuestionForm").serialize()).success(function(data) {
        var infoCorrect = data.infoCorrect;

        if (infoCorrect == 0) {
            alert("Quiz Created");
            window.setTimeout(delay,2000);
            return true;
        } else if (infoCorrect == 1) {
            $("#invalid_1").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 2) {
            $("#invalid_2").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 3) {
            $("#invalid_3").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 4) {
            $("#invalid_4").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 5) {
            $("#invalid_5").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 6) {
            $("#invalid_6").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else if (infoCorrect == 7) {
            $("#invalid_7").text(" Invalid!").show().fadeOut(2000);
            return false;
        } else {
            $("#invalid_8").text(" Invalid!").show().fadeOut(2000);
            return false;
        }        
    });
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:07:32.050

如果您将 dataType 设置为 json，但您在 json 之前回显文本，则整个响应必须是有效的 json 字符串，这将导致 jQuery 产生错误。

```
if (mysql_query($sql,$con)) {
    echo "Inserted values";
} 
```

删除回显，将任何消息放入 json 响应中，并确保输出 json ( `echo json_encode($items);`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:09:40.293

你必须`echo`输出json：

```
echo json_encode($items); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T18:40:32.087

使用 post 方法而不是 ajax 方法。请参阅问题中的最终编辑。

# c++ - 通过c ++访问精确的整数变量的值

> ID：15254651
> 
> 赞同：-4
> 
> 时间：2013-03-06T18:01:51.293
> 
> 标签：c++, solution, cplex

cplex.getvalue(x) 返回浮点值，当我将值放入 int 时，它与初始值不同。有没有更好的方法来访问整数变量的值？

现在我只是用一种幼稚的方式，我不知道它是否正确

```
val = cplex.getObjValue() + 0.1;

 for (int i = 0; i < n; i++)
   returnX[i] = cplex.getValue(x[i]) + 0.1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:07:50.383

如果您以整数类型（例如 ）存储浮点值`int`，您将丢失小数点后的任何精度。整数类型只存储整数。如果您将 a 存储`float`在 an 中`int`，您将丢失小数点后的任何内容。

如果将 0.1 添加到 a `float`，您只需得到一个比原始值大大约 0.1 的浮点值。如果将其分配给`int`，您将遇到完全相同的问题。你只是要截断一个不同的值。

如果您需要 a`float`保持其精度，只需将其存储在 a 中`float`（或 a`double`以获得更高的精度）。

如果您正在进行转换`int -> float -> int`，例如原始`int`值是一个值，而最终得到的值是不同`int`的，那么这就是发生的情况。到 a 的转换`float`是不对称的。`int`to`float`转换将转换为最接近的可表示值`float`，而`float`to`int`转换将截断。

> 浮点类型的纯右值可以转换为整数类型的纯右值。转换截断；也就是说，小数部分被丢弃。[...]
> 
> 整数类型或无作用域枚举类型的纯右值可以转换为浮点类型的纯右值。如果可能，结果是准确的。如果要转换的值在可以表示的值范围内但不能准确表示，则它是实现定义的下一个较低或较高可表示值的选择。[...]

解决方案是不转换为中间`float`. 如果你想要一个`int`，保持它一个`int`。如果由于某种原因你的函数返回 a 是有意义的，`float`尽管它计算的东西是 a`int`那么你必须接受后果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:10:35.280

首先，将其转换为 int 时会丢失精度值。你可以做的是四舍五入的价值。

**例子：**

```
float fVal = 10.89;

int nVal = (fVal > 0.0) ? (fVal + 0.5) : (fVal - 0.5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:15:28.723

因为 C++ 向零舍入（而不是四舍五入到最接近的值），并且因为浮点数存储可能不完全准确的近似值（例如*0.9999997f*），所以您会得到遇到的结果。

添加 +0.001 很好。如果您真的想四舍五入，请添加 0.5f，然后让 C++ 向下四舍五入。

```
float closerToFive = 5.454f;
float closerToSix = 5.545f;

int five = static_cast<int>(closerToFive + 0.5f);
int six = static_cast<int>(closerToSix + 0.5f); 
```

也许这是一种“幼稚的方式”，但效果很好。如果您经常这样做，请将其包装在 func 中：

```
constexpr int ftoi(float value)
{
    return static_cast<int>(value + (value > 0.0f? 0.5f : -0.5f));
}

ftoi(5.454f) -> 5
ftoi(5.545f) -> 6
ftoi(-5.454f) -> -5
ftoi(-5.545f) -> -6 
```

[http://ideone.com/gDT4GP](http://ideone.com/gDT4GP)

**编辑：**忘记考虑负浮动，如 CasperGhost 的回答所示。修复了 ftoi() 函数。

# java - Linux 中的 Spring PropertyPlaceholderConfigurer

> ID：15254654
> 
> 赞同：0
> 
> 时间：2013-03-06T18:02:05.273
> 
> 标签：java, linux, spring, amazon-ec2, spring-el

在 applicationContext.xml 中配置：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:/jdbc-${WEB_ENVIRONMENT}.properties</value>
                <value>classpath:/settings-${WEB_ENVIRONMENT}.properties</value>
            </list>
        </property>
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"></property>
        <property name="searchSystemEnvironment" value="true"></property>
</bean> 
```

我已经在我的用户和 root 的 .bashrc 文件中设置了环境变量，就像这样

```
export WEB_ENVIRONMENT=prod 
```

在启动 tomcat 时出现错误

```
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: class path resource [jdbc-${WEB_ENVIRONMENT}.properties] cannot be opened because it does not exist 
```

我也试过这样：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:/jdbc-#{T(java.lang.System).getenv('WEB_ENVIRONMENT')}.properties</value>
                <value>classpath:/settings-#{T(java.lang.System).getenv('WEB_ENVIRONMENT')}.properties</value>
            </list>
        </property>
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"></property>
        <property name="searchSystemEnvironment" value="true"></property>
</bean> 
```

这次我得到了错误

```
Caused by: java.io.FileNotFoundException: class path resource [jdbc-.properties] cannot be opened because it does not exist 
```

这意味着 SpEL 在 applicationContext.xml 中可以正常工作，但无法从系统环境中获取变量。

为了检查值是否设置正确，我运行`echo ${WEB_ENVIRONMENT}`并正确返回了值。因此，要检查 java 是否能够从我运行的环境中获取值

```
public class Test {

    public static void main(String[] args) {
        System.out.println(System.getenv("WEB_ENVIRONMENT"));
    }

} 
```

这也正确返回了“prod”

两个版本都在 Windows 中运行，**但不在 Amazon EC2 的 Linux AMI**中。

接下来我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:23:37.180

我知道的几个选项，

1.  尝试在启动应用程序时将其设置为 VM Arguments。IE`-DWEB_ENVIRONMENT=prod`

2.  如果是 Tomcat，您可以在`JAVA_OPTS`查看此[答案](https://stackoverflow.com/a/7738884/876142)中进行设置以了解如何实现。

3.  在我自己的项目中，我`catalina.properties`在最后设置了我的环境变量值`-Druntime_env=dev`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:51:36.457

对于第一次尝试，我认为你有一个母鸡和鸡蛋的问题。您想要配置`PropertyPlaceholderConfigurer`需要替换为属性的使用值。这行不通！

SpEL 方法应该可以工作，我只是在我的 mac（类 UNIX 系统）上尝试了一个类似的配置，其值`printenv`在 shell ( `USER`) 上列出。结果如预期：

```
java.io.FileNotFoundException: class path resource [settings-arne.properties] cannot be opened because it does not exist 
```

[您可以按照此处](https://stackoverflow.com/questions/5115339/tomcat-opts-environment-variable-and-system-getenv)的建议设置环境变量。另一种方法是添加变量以将其添加到 /etc/profile 全局添加 env 变量。前者是首选。

# ruby-on-rails - Active Record join with params in condition

> ID：15254655
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:05.653
> 
> 标签：ruby-on-rails, activerecord

我不确定我是否知道在活动记录中编写此 sql 查询的最佳方法，而无需完全手动编写。本质上，我想编写这两个查询的组合。

这个查询本质上是我试图重新创建的连接。我想确保返回的任何条目都只是那些将 image_path_processing 标志设置为 false 的图像。

```
@entries = ContestEntry.joins(:entry_images).where(contest_id: @contest.id, entry_images: {
        image_path_processing: false
        }).limit(10) 
```

但是，我正在编写的查询遇到的问题是我需要包含来自 url 的参数，并且我不确定上述语法是否正确删除了 sql_injection

这是我试图添加条件连接的内容。

```
@entries = ContestEntry.where("contest_id = ? and created_at > ?",
      params[:contest_id], Time.at(params[:after].to_i + 1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:51:53.377

你能试试这个吗？

```
@entries = ContestEntry.joins(:entry_images).
                        where(contest_id: params[:contest_id],
                              entry_images: { image_path_processing: false }).
                        where('contest_entries.created_at > ?', Time.at(params[:after].to_i+1)).
                        limit(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:05:21.233

首先，阅读本文档： http: [//guides.rubyonrails.org/security.html#sql-injection](http://guides.rubyonrails.org/security.html#sql-injection)

过去，主要支持的语法是

```
ContestEntry.where("contest_id = ?", params[:contest_id]) 
```

但现在你也可以使用更简单和更红宝石的

```
ContestEntry.where(:contest_id => params[:contest_id]) 
```

这两种方法都将通过 sql sanitizer 传递参数，以防止 sql-injection 攻击，如文档中所述。

还有几点：

1.  我不知道如何为除相等之外的任何东西实现后一种语法。
2.  您最近听到的有关 sql 注入的问题不适用于您正在使用的语法。它们适用于动态查找器。

最后，你不应该相信我的话。ruby 开发人员给我的最好的建议之一是*“使用 irb 来学习 ruby​​”*。如果您对某项工作的原理有疑问，请加载 irb 并对其进行测试。在您的情况下，您正在实施 rails，因此您可以使用完整的控制台。

```
sql_injection_params = "anything' OR 'x'='x"
# This string variant tells active record to use sql as is 
Model.where("name = '#{sql_injection_params}'").to_sql # bad
# This array variant tells active record to sanitize
Model.where('name = ?', sql_injection_params).to_sql # good
# This hash variant tells active record to sanitize
Model.where(:name => sql_injection_params).to_sql # good 
```

该`to_sql`调用将显示基于您的查询构建的原始 SQL 活动记录。只需更改上面的示例以使用您的数据，您就应该更好地了解 Rails 在幕后所做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:39:13.690

```
@entries = ContestEntry.where("contest_id = ? and created_at > ?",
      params[:contest_id], Time.at(params[:after].to_i + 1)) 
```

似乎是避免用户输入结果中的 sql 注入的完美方法......

# javascript - 移动任何 SVG 元素的通用 JS 函数

> ID：15254659
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:10.293
> 
> 标签：javascript, svg

考虑这个带有 2 个圆圈（红色和蓝色）的示例：

```
<svg width="500px" height="500px">
  <circle cx="100" cy="50" r="40" fill="red" id="redcircle" />
  <g transform="translate(200,-20)">
    <g transform="scale(2)">
      <g transform="rotate(45)">
        <g transform="translate(5,10)">
          <circle cx="100" cy="50" r="40" fill="blue" id="bluecircle" />
        </g>
      </g>
    </g>
  </g>
</svg> 
```

我想知道是否有办法编写通用函数，例如：

```
function move(selection){
  // ???
} 
```

这将允许写入`move("#redcircle")`或`move("#bluecircle")`在视觉上将目标元素向右移动 100 像素（例如）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T18:19:33.240

看到这个jsfiddle

```
function moveSection(idStr, xOffset, yOffset) {
var domElemnt = document.getElementById(idStr);
    if (domElemnt) {
        var transformAttr = ' translate(' + xOffset + ',' + yOffset + ')';
        domElemnt.setAttribute('transform', transformAttr);
    }
}
moveSection("bluecircle", 50, 20); 
```

[http://jsfiddle.net/dKxZt/4/](http://jsfiddle.net/dKxZt/4/)

它使用 translate 来移动元素。

在此处查看此演示以实现 SVG 元素的拖动：[获取 Rect 元素的屏幕像素坐标](https://stackoverflow.com/questions/5834298/getting-the-screen-pixel-coordinates-of-a-rect-element)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-01T10:00:43.940

它是用 JQuery 拖放 SVG 希望这个链接可以帮助 [http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/](http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/)

这是演示 [http://www.codedread.com/dragtest.svg](http://www.codedread.com/dragtest.svg)

# javascript - 如何自定义排序 2D javascript 对象？

> ID：15254660
> 
> 赞同：0
> 
> 时间：2013-03-06T18:02:11.757
> 
> 标签：javascript, sorting, javascript-objects

我从这个问题开始：[如何对对象的 JS 对象进行排序？](https://stackoverflow.com/questions/14286654/how-to-sort-a-js-object-of-objects)

从 2 条评论中，我想出了对对象的 Javascript 对象（只是一个 2D 对象）进行排序的最佳方法。

假设是一个 2D 对象变量，我按内部对象`data`的值排序。`customer`

首先，我转换为对象数组，如下所示：

```
data = $.map(data, function(k, v) {
    return [k];
}); 
```

然后我做这样的排序：

```
data = data.sort(function(a, b){
    return a.customer > b.customer? 1: -1;
}); 
```

它运作良好，但现在我想首先按日期变量排序，然后按客户变量排序。就像排序函数在 SQL ( `...sort by date desc, customer asc;`) 中的工作方式一样。

但是，实际上我想要做的实际上要简单得多。在对日期值进行排序时，我要做的就是区分`null`和`!null`值。结果将是所有空值将被组合在一起，并且所有非空值都将组合在一起。

之后，所有顶级对象都应该是`customer`有序的。

我想出了这个想法，基于我认为它应该如何工作：

```
data = data.sort(function(a, b){
    if (a.fin_date !== null){
        return 1;
    }
    return a.customer > b.customer? 1: -1;
}); 
```

这是一种工作。它将所有`null`值排序到开头，并且所有空值都按正确的字母顺序排列，但所有其他`fin_date`值 ( `!null1`) 不按字母顺序排列。他们不是按照`fin_date`任何一个顺序排列的。`fin_date`不等于的对象`null`似乎没有任何特定的顺序。

这就是我的问题：我需要带有`fin-date`!=的对象`null`按字母顺序排列。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:26:18.837

你根本没有比较日期。试试这样的排序功能：

```
function(a, b) {
    var aDate = new Date(a.fin_date),
        bDate = new Date(b.fin_date);

    if (aDate < bDate) return -1;
    else if (aDate > bDate) return 1;

    return a.customer > b.customer ? 1: -1;
} 
```

这假设您的所有日期都晚于 1970 年（因为`new Date(null)`是 1970 年 1 月 1 日 00:00:00 GMT）。

这是一个[jsFiddle](http://jsfiddle.net/trevordixon/TaSKZ/1/)。

# python - 在python中组合两个循环

> ID：15254663
> 
> 赞同：0
> 
> 时间：2013-03-06T18:02:15.287
> 
> 标签：python, optimization, coding-style

假设有两个多边形 p1 和 p2，其中 p2 完全在 p1 内

```
p1 = [(0, 10), (10, 10), (10, 0), (0, 0)]
p2 = [(2, 6), (6, 6), (6, 2), (2, 2)]

degree_of_contact = 0

xyarrays = [p1,p2]
p1_degree_of_contact = 0
for x,y in xyarrays[0]:
        if point_inside_polygon(x,y,xyarrays[1]):
            p1_degree_of_contact += 1

p2_degree_of_contact = 0
for x,y in xyarrays[1]:
        if point_inside_polygon(x,y,xyarrays[0]):
            p2_degree_of_contact += 1

degree_of_contact = p1_degree_of_contact + p2_degree_of_contact 
```

其中[point_inside_polygon](https://stackoverflow.com/questions/15179405/python-debug-a-point-inside-polygon-function)用于确定一个点是否在多边形内部（否则为 True，否则为 False），其中 poly 是包含多边形顶点坐标的对 (x,y) 的列表。该算法称为“射线投射法”

我希望以一种优雅的方式（行编码保存）将两个循环合二为一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:09:05.133

以下应该有效：

```
degree_of_contact = 0
for tmp1, tmp2 in [(p1, p2), (p2, p1)]:
    for x,y in tmp1:
        if point_inside_polygon(x, y, tmp2):
            degree_of_contact += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:18:27.333

```
degree_of_contact = sum(point_inside_polygon(x, y, i) for i, j in ((p1, p2), (p2, p1)) for x, y in j) 
```

# jsf - 如何在丰富的数据表上显示行号信息？

> ID：15254665
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:17.670
> 
> 标签：jsf, richfaces

我正在尝试在表格的页脚上显示以下文本：

```
Showing 11 to 20 of 51 entries 
```

但我找不到办法做到这一点。我没有在页脚中找到任何容易给我这些变量的变量。

我还尝试创建一个从`ExtendedDataModel`那里继承并保留值的类。

`sequenceRange`我从方法中得到了行号`walk`。但是，显然，表格的页脚是在调用方法之前呈现的`walk`，这导致我页面底部的信息因一个请求而过时。

关于如何做到这一点的任何建议？

顺便说一句，我正在使用 JSF 2.1 和 RichFaces 4.3.0 Final。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:04:39.650

您可以使用丰富面孔的内置[数据滚动功能：](http://livedemo.exadel.com/richfaces-demo/richfaces/scrollableDataTable.jsf?c=scrollableDataTable&tab=usage)

**更新 1**

滚动条具有您可能不想要的默认布局。但是你可以自定义它。[请参阅此链接](http://livedemo.exadel.com/richfaces-demo/richfaces/scrollableDataTable.jsf?c=scrollableDataTable&tab=usage)中的 Scroller Facets 使用选项卡。复制到这里：

```
<f:facet name="pages">
                        <h:panelGroup>
                            <h:outputText value="Page "/>
                            <h:selectOneMenu value="#{dataScrollerBean.scrollerPage}" 
                                onchange="#{rich:component('ds')}.switchToPage(this.value)">
                                <f:selectItems value="#{dataScrollerBean.pagesToScroll}" />
                            </h:selectOneMenu>
                            <h:outputText value=" of #{pages}" />
                        </h:panelGroup>
                    </f:facet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:53:44.250

Refer this link: [Datascroller](http://livedemo.exadel.com/richfaces-demo/richfaces/dataTableScroller.jsf?tab=scrollerfacets&cid=669327)

This example shows the number of rows in a datatable in datascroller based on size mentioned in rows attribute of dataTable.

# ruby-on-rails-3 - Rails 中关联的复数名称

> ID：15254666
> 
> 赞同：4
> 
> 时间：2013-03-06T18:02:17.613
> 
> 标签：ruby-on-rails-3, associations, relationship, model-associations, plural

我有用户模型和汽车模型

我想要一个模型来保存每辆车和每个用户的设置

所以我愿意

```
class CarSettings < ActiveRecord::Base

  belongs_to :user
  belongs_to :car
end 
```

对于用户：

```
 has_many :car_settings 
```

对于汽车：

```
 has_many :car_settings
  has_many :users, :through => :car_settings 
```

注意名称 CarSettings，这不是错误，我希望它是**设置**而不是设置

当我做

```
c=Car.first
c.users 
```

我明白了

```
NameError: uninitialized constant Car::CarSetting
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/inheritance.rb:111:in `compute_type' 
```

它正在寻找一个单一的 car_setting 而不是 car_settings。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:18:39.560

您可以使用此选项强制关联上的类名：

```
has_many :car_settings, :class_name => "CarSettings" 
```

# django - 如何在 Django 模型中获得自动递增的排序顺序

> ID：15254668
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:17.967
> 
> 标签：django, django-models

我写了这个：

```
class Department(models.Model):
    ...
    sort_order = models.IntegerField(help_text="Leave negative to place at end", default=-1)

    def save(self, *args, **kwargs):
        """ Set the sort order (if unset) to larger than the largest value"""
        if self.sort_order <= 0:
            largest = Department.objects.all().aggregate(x = models.Max('sort_order'))['x'] or 0
            self.sort_order = largest + 10
        super(Department, self).save(*args, **kwargs) 
```

但我并不为此感到自豪。有一个更好的方法吗？我可以将它滚动到一个字段中，但不确定如果我在那里重构代码，我将如何返回模型表。我不能使用自动增量列，因为作为 FK 值，这些值无法更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T13:57:03.320

看来来自[Django Positions](https://github.com/jpwatts/django-positions)的 PositionField可以做到这一点，并且目前正在与[Django CrowdSourcing 一起](https://code.google.com/p/django-crowdsourcing/)使用。这不完全是我所要求的，但似乎它可能是一个很好的、可用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:38:54.333

抱歉，如果我很迟钝，但是 django 内置的[AutoField](https://docs.djangoproject.com/en/dev/ref/models/fields/#autofield)并不能满足您的需求。

我知道您不想弄乱主键，但您可以创建另一个`AutoField`.

```
sort_field = models.AutoField() 
```

也许你可以看看覆盖 AutoField 来做你想做的事。

# popup - SugarCRM-点击保存按钮时如何获得弹出窗口？

> ID：15254673
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:35.517
> 
> 标签：popup, sugarcrm, editview

我希望在某些模块（例如联系人）的编辑视图中单击“保存”时弹出一些消息（稍后我将在该弹出窗口中获得“确定”和“取消”选项。）。

我的功能

```
YAHOO.SUGAR.MessageBox.show({msg: 'Foo'} ); 
```

当我将它放在 editviewdefs.php （我还必须包含 `cache/include/javascript/sugar_grp_yui_widgets.js`）文件的顶部时正在工作，并且在打开该视图时我会弹出该视图。但我希望它在保存时弹出，而不是在打开 EditView 时弹出（这只是向我展示该`YAHOO`功能正在工作的测试）。所以我尝试在以下位置创建单独`customJavascript.js`的文件`custom/modules/Contacts`：

```
 //<script type="text/javascript"
 src="cache/include/javascript/sugar_grp_yui_widgets.js"></script>
    function check_custom_data()
    {
    YAHOO.SUGAR.MessageBox.show({msg: 'Foo'} );

    } 
```

我修改了`custom/modules/Contacts/metadata/editviewdefs.php`

```
<?php
$module_name = 'Contacts';
$viewdefs ['Contacts'] = 
array (
  'EditView' => 
  array (
    'templateMeta' => 
    array (
      'form' => 
      array (
        'hidden' => 
        array (
          0 => '<input type="hidden" name="opportunity_id" value="{$smarty.request.opportunity_id}">',
          1 => '<input type="hidden" name="case_id" value="{$smarty.request.case_id}">',
          2 => '<input type="hidden" name="bug_id" value="{$smarty.request.bug_id}">',
          3 => '<input type="hidden" name="email_id" value="{$smarty.request.email_id}">',
          4 => '<input type="hidden" name="inbound_email_id" value="{$smarty.request.inbound_email_id}">',
        ),
      ),

      array(
         'buttons' =>
        array (
         0 =>
          array(
           'customCode' =>
            '<input title="Save [Alt+S]" accessKey="S" onclick="this.form.action.value=\'Save\'; return check_custom_data();" type="submit" name="button" value="'.$GLOBALS['app_strings']['LBL_SAVE_BUTTON_LABEL'].'">',
          ),
         1 =>'Cancel'
        )
      ),
        'includes'=> array(
   array('file'=>'custom/modules/Contacts/customJavascript.js'),
      ),
..........
....... 
```

但是当我在 EditView 中单击 Save 时没有任何反应，但我想在那一刻弹出消息（稍后我将添加 OK 和 Cancel 选项）。

我究竟做错了什么？谢谢你

仅在某些条件下更新了弹出代码：

```
....
     window.formToCheck = formname;

        var contactTypeField = document.getElementById('first_name');
        if (contactTypeField.value == 'Tori')
        {
        if (confirm("This dialog will pop-up whenever the user click on the Save button. "
                + "If you click OK, then you can execute some custom code, and then "
                + "execute the old form check function, which will process and submit "
                + "the form, using SugarCRM's standard behavior.")) {

            var customCodeVariable = 5;
            customCodeVariable = 55 + (customCodeVariable * 5);

            return window.old_check_form(formname);
        }

        return false;
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T22:32:39.230

SugarCRM 中有多种方式可以做事，这使得它非常强大，有时也很难定制——因为有很多不同的选项可供您使用。

要在单击“保存”按钮时发生某种弹出窗口或任何自定义日志，我建议使用以下解决方案，而不是更改`editviewdefs`.

以下解决方案不需要您修改任何核心 SugarCRM 文件，因此可以安全升级并且可以轻松安装在另一个实例上。

您需要做的是创建一个自定义的可安装包，并使用模块加载器将其安装到 SugarCRM。

这是您最终需要得到的目录结构的布局：

```
SugarModuelPopUp
   ->custom
      ->include
         ->customPopUps
            ->custom_popup_js_include.php
            ->customPopUpContacts.js
   ->manifest.php 
```

创建`SugarModuelPopUp`文件夹，该文件夹将作为此自定义包的根。

在里面`SugarModuelPopUp`，新建一个名为 .php 的 PHP 文件`manifest.php`。该文件告诉 SugarCRM 如何安装包。

在`manifest.php`中，粘贴以下代码：

```
<?php
$manifest = array(
        array(
                'acceptable_sugar_versions' => array()
        ),
        array(
                'acceptable_sugar_flavors' => array()
        ),
        'readme' => 'Please consult the operating manual for detailed installation instructions.',
        'key' => 'customSugarMod1',
        'author' => 'Kyle Lowry',
        'description' => 'Adds pop-up dialog on save on Contacts module.',
        'icon' => '',
        'is_uninstallable' => true,
        'name' => 'Pop-Up Dialog On Save',
        'published_date' => '2013-03-06 12:00:00',
        'type' => 'module',
        'version' => 'v1',
        'remove_tables' => 'prompt'
);

$installdefs = array(
        'id' => 'customSugarMod1',
        'copy' => array(
                array(
                        'from' => '<basepath>/custom/',
                        'to' => 'custom/'
                )
        ),
        'logic_hooks' => array(
                array(
                        'module' => 'Contacts',
                        'hook' => 'after_ui_frame',
                        'order' => 1,
                        'description' => 'Creates pop-up dialog on save action.',
                        'file' => 'custom/include/customPopUps/custom_popup_js_include.php',
                        'class' => 'CustomPopJs',
                        'function' => 'getContactJs'
                )
        )
); 
```

接下来，您将要创建`custom`文件夹。在其中，创建`include`文件夹。在其中，创建`customPopUps`文件夹。

接下来，您将要创建`custom_popup_js_include.php`文件。此文件控制您的自定义 JavaScript 何时何地被包含在页面中。粘贴以下代码：

```
<?php
// prevent people from accessing this file directly
if (! defined('sugarEntry') || ! sugarEntry) {
    die('Not a valid entry point.');
}
class CustomPopJs {
    function getContactJs($event, $arguments) {
        // Prevent this script from being injected anywhere but the EditView.
        if ($_REQUEST['action'] != 'EditView') {
            // we are not in the EditView, so simply return without injecting
            // the Javascript
            return;
        }
        echo '<script type="text/javascript" src="custom/include/customPopUps/customPopUpContacts.js"></script>';
    }
} 
```

接下来，您将需要创建`customPopUpContacts.js`文件，该文件将在单击“联系人”模块中的“保存”按钮时创建自定义弹出窗口`EditView`。粘贴以下代码：

```
function override_check_form() {
    // store a reference to the old form checking function
    window.old_check_form = window.check_form;
    // set the form checking function equal to something custom
    window.check_form = function(formname) {
        window.formToCheck = formname;
        // you can create the dialog however you wish, but for simplicity I am
        // just using standard javascript functions
        if (confirm("This dialog will pop-up whenever the user click on the Save button. "
                + "If you click OK, then you can execute some custom code, and then "
                + "execute the old form check function, which will process and submit "
                + "the form, using SugarCRM's standard behavior.")) {
            // you have clicked OK, so do some custom code here,
            // replace this code with whatever you really want to do.
            var customCodeVariable = 5;
            customCodeVariable = 55 + (customCodeVariable * 5);
            // now that your custom code has executed, you can let
            // SugarCRM take control, process the form, and submit
            return window.old_check_form(formname);
        }
        // the user clicked on Cancel, so you can either just return false
        // and leave the person on the form, or you can execute some custom
        // code or do whatever else you want.
        return false;
    }
}

// call the override function, which will replace the old form checker
// with something custom
override_check_form(); 
```

创建上述目录结构和正确文件夹中的文件后，您可以创建项目的 ZIP 文件。请务必注意，对于 SugarCRM 可安装包，您的 ZIP 文件必须包含项目目录中的所有内容。也就是说，您不会压缩`SugarModuelPopUp`文件夹，而是压缩其中的所有内容。

接下来，您将要使用 SugarCRM 的模块加载器安装自定义包。您可以通过以下方式做到这一点：

1.  转到 SugarCRM 管理页面。
2.  点击“模块加载器”。
3.  单击“浏览”并选择 ZIP 包。
4.  点击“上传”按钮。
5.  上传包后，在可安装包列表中找到它的条目，然后单击“安装”；继续进行标准的 SugarCRM 安装过程。

安装此自定义包后，每当您单击联系人模块中的“保存”按钮时`EditView`，都会弹出一个对话框。您可以用您想要的任何内容替换对话框代码，以便在不修改构建它的代码时登录。

此外，您应该能够将此项目用作 SugarCRM 未来功能添加的基础`EditViews`。任何在单击“保存”按钮时使用该`check_form`方法的模块都可以执行这种自定义逻辑。

例如，要对 Accounts 执行此操作，您将执行以下操作：

`logic_hooks`为 Accounts 的 manifest.php 中的数组元素添加一个条目。

```
'logic_hooks' => array(
                array(
                        'module' => 'Contacts',
                        'hook' => 'after_ui_frame',
                        'order' => 1,
                        'description' => 'Creates pop-up dialog on save action.',
                        'file' => 'custom/include/customPopUps/custom_popup_js_include.php',
                        'class' => 'CustomPopJs',
                        'function' => 'getContactJs'
                ),
                array(
                        'module' => 'Accounts',
                        'hook' => 'after_ui_frame',
                        'order' => 1,
                        'description' => 'Creates pop-up dialog on save action.',
                        'file' => 'custom/include/customPopUps/custom_popup_js_include.php',
                        'class' => 'CustomPopJs',
                        'function' => 'getAccountJs'
                )
        ) 
```

`CustomPopJs`在`custom_popup_js_include.php`文件中为 Accounts JavaScript添加一个新方法。

```
function getAccountJs($event, $arguments) {
        // Prevent this script from being injected anywhere but the EditView.
        if ($_REQUEST['action'] != 'EditView') {
            // we are not in the EditView, so simply return without injecting
            // the Javascript
            return;
        }
        echo '<script type="text/javascript" src="custom/include/customPopUps/customPopUpAccounts.js"></script>';
    } 
```

创建`customPopUpAccounts.js`文件，并将`customPopUpContacts.js`代码用作所需功能的基础。

在 SugarCRM 中实现目标还有其他方法，但这是我个人使用的方法，它的优点是可以安全升级并轻松迁移到其他 SugarCRM 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T02:09:47.113

我有 SugarCRM CE 6.5，但这种方法对我不起作用（我的意思是创建新模块）。但是，我修改了 logic_hook 并将文件直接放在 custom/include 文件夹中，它可以工作！

# java - BIRT 报表设计器看不到我的 java 类

> ID：15254675
> 
> 赞同：2
> 
> 时间：2013-03-06T18:02:43.287
> 
> 标签：java, javascript, designer, birt, rhino

我们正在使用 BIRT 开发一些报告，这些报告将通过报告引擎 API 运行，以根据用户的选择生成 .XLS 或 .PDF 输出。我们正在使用 BIRT RCP Designer 4.2.1（独立），因为 Eclipse 插件使 GWT 插件停止工作（完全）。所有数据访问都是通过 javascript 和脚本数据集进行的。为了更准确地预览布局，我想在 BIRT 报表设计器中运行报表时创建一些模型数据传输对象，但是当在设计器（预览选项卡）中运行时，它会抛出异常提示我的课程不是报告所期望的。我尝试将它们添加到“窗口 > 首选项 > 报表设计 > 类路径” BIRT Report Designer 作为外部类文件夹（指向 target/myProyect/WEB-INF/classes 目录）和外部 jar。在这两种情况下都会得到相同的错误。如果我尝试将我的对象创建为

```
informeSeguimiento = new Packages.my.company.project.backend.model.business.InformeSeguimiento();
informeSeguimiento.setVolumen(35800000);
informeSeguimiento.setFechaInforme(new Packages.java.util.Date()); 
```

我明白了`TypeError: [JavaPackage my.company.project.backend.model.business.InformeSeguimiento] is not a function, it is object. (/report/method[@name="initialize"]#65) (Element ID:1)`

如果我尝试用

```
importPackage( Packages.my.company.project.backend.model.business );
informeSeguimiento = new InformeSeguimiento(); 
```

我明白了`ReferenceError: "InformeSeguimiento" is not defined. (/report/method[@name="initialize"]#64) (Element ID:1)`

如果我尝试用

```
informeSeguimiento = new my.company.project.backend.model.business.InformeSeguimiento(); 
```

我`TypeError: [JavaPackage my.company.project.backend.model.business.InformeSeguimiento] is not a function, it is object. (/report/method[@name="initialize"]#63) (Element ID:1)`又来了。

关于我可以错过什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T14:19:06.853

回答有点晚，希望对其他人有所帮助，我在Eclipse Java Web Application中遇到了同样的预览报告问题。我按照此博客的说明进行操作。有效。

> 请查看[BIRT Designer Classpath Changes](http://birtworld.blogspot.de/2009/12/birt-designer-classpath-changes.html)博客页面。

检查 BIRT RCP Designer 是否有相同的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:25:10.450

您需要添加一个新的类路径变量以指向包含 java buildpath 中的 .class 文件的文件夹。去：

Windows -> 首选项 -> Java -> 构建路径 -> 类路径变量

# asp.net-mvc - MVC EditorForModel Freeman

> ID：15254677
> 
> 赞同：0
> 
> 时间：2013-03-06T18:02:44.263
> 
> 标签：asp.net-mvc, asp.net-mvc-3, editorformodel

我正在阅读一本书*Pro ASP.NET MVC3 Framework - Freeman Sandersan*，其中展示了如何在网上商店进行简单的管理。问题是当我尝试保存它不保存的一种产品的更改时。

编辑视图：

```
@using (Html.BeginForm()) {
@Html.EditorForModel()
<input type="submit" value="Save" />} 
```

编辑方法：

```
[HttpPost]
public ActionResult Edit(Product product)
{
    if (ModelState.IsValid)
    {
        repository.SaveProduct(product);
        TempData["message"] = string.Format("{0} has been saved", product.Name);
        return RedirectToAction("Index");
    }
    // there is something wrong with the data values
    return View(product);
} 
```

保存产品方法：

```
private EFDbContext context=new EFDbContext();
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
    {
        context.Products.Add(product);
    }
    context.SaveChanges();
} 
```

编辑结果：我将产品名称更改为“Kayakkkkkkkkkk”。临时消息显示保存已完成，但产品名称仍为“Kayak”。 ![编辑结果](../Images/6f03e50dc799a6749635d0b5f6ceb7fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:14:02.080

解决了。

```
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
    {
        context.Products.Add(product);
    }
    else
    {
        context.Products.Attach(product);
        context.Entry(product).State = EntityState.Modified;
    }

    context.SaveChanges();
} 
```

# c# - joliver / EventStore 最终一致性

> ID：15254684
> 
> 赞同：2
> 
> 时间：2013-03-06T18:03:14.380
> 
> 标签：c#, .net, cqrs, neventstore

我试图弄清楚我的事件存储和我的读取模型在实际的具体实现方面是如何相关的。

我对事件存储的有限了解使我相信：

1.  事件提交到事件存储
2.  调度程序运行
3.  如果我使用队列，我将消息发送到队列（比如说公共交通）
4.  我的读取模型订阅了队列，所以我的读取数据库得到了消息（mysql）
5.  我的读取模型已更新为我的数据的新更改

这意味着如果公共交通发生任何事情，我的读取数据库将不同步，我必须弄清楚如何将其同步回来。

我读过/看过的一些由 greg Young 发表的东西建议使用事件存储本身作为队列，并通过在事件存储端保持一个自动增量编号来保持一致性，以保持最终的一致性。我想知道这是否在joliver的项目中实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:31:55.760

> 所以我的读取数据库得到消息（mysql）

我会重新声明，“我的事件处理器为给定事件获取消息，并且（在我的情况下）通常会操纵 mysql 数据库中的状态”（或者你的意思是别的吗？）。

> 这意味着如果公共交通发生任何事情，我的读取数据库将不同步，我必须弄清楚如何将其同步回来。

是的，您的队列成为应用程序状态的一部分，需要备份和恢复。请注意，Dispatcher 在成功将其放入队列之前不会将提交标记为已调度，并且排队系统不会删除消息，直到您确认处理完成以进行必要的更新以同步您的状态阅读模型。

请记住，您可以将多个 Web 服务调用视为处理事件的必要工作的一部分。

要记住的另一件事是，您将希望您的事件处理器是幂等的（即能够处理至少一次交付）。

再往下看，如果事件无法完成处理，你会很高兴考虑你将要做什么——你会死信消息吗？谁来监控它？

顺便说一句，根据您的托管安排，Azure（或本地 Windows）ServiceBus 可能值得考虑）

> 我读过/看过的一些由 greg Young 发表的东西建议使用事件存储本身作为队列，并通过在事件存储端保持一个自动增量编号来保持一致性，以保持最终的一致性。我想知道这是否在joliver的项目中实施？

不，JOES 为您提供了一个 Dispatcher 钩子，然后您决定什么是适合您的。这有好有坏。有些系统根本没有将 Dispatcher 绑定到有状态的读取模型——它们只是在事件存储中查询事件并构建内存中的读取模型来短路所有这些。

不知道你所说的自动递增数字是什么意思。

请注意，GES 中的 Projection 内容尚未完全 1.0（但不用说，它非常值得您认真考虑 - 它本质上解决了您在这些问题上遇到的大部分问题）

# c# - 如何在代码中首先在 TPT（每种类型的表）继承中启用级联删除？

> ID：15254687
> 
> 赞同：9
> 
> 时间：2013-03-06T18:03:28.880
> 
> 标签：c#, sql, code-first

我将 EF 与代码优先和 TPT（每种类型的表）继承一起使用。我有以下模型：

```
public partial class AccountHolder
{
    public int AccountHolderId { get; set; }

    public virtual Address Detail { get; set; }  
    public virtual Nominee Nominee { get; set; }   
}

public partial class Nominee
{
    public int NomineeId { get; set; }             
}

public abstract class Address
{
    public int AddressId { get; set; }
    ...
}

public class PersonalDetail : Address
{
    public int PersonalDetailId { get; set; }
    ...
} 
```

流利的API：

```
 modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Nominee)
                                            .WithRequired()
                                            .WillCascadeOnDelete(); 
```

根据[本教程](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)，这里是 AccountHolder 和 Address 之间的多态关系。PersonalDetail 继承地址。我的问题是，每当我删除任何我想要的 AccountHolder 时，EF 都会负责从 Address 和 PersonalDetail 表中删除其关联的 PersonalDetail 信息，但目前这并没有发生，任何人都可以指导我如何通过 Fluent API 或其他方式实现此行为方法 ？

**编辑：**

根据我使用此配置时发布的答案：

```
 modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Detail)
                                            .WithRequired()
                                            .WillCascadeOnDelete(); 
```

用于启用级联删除，这与 AccountHolder 和 Nominee 之间现有的 1 对 1 关联冲突。例外是：

> 检测到有冲突的更改。当尝试插入具有相同键的多个实体时，可能会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:13:27.637

指定 EntityTypeConfiguration 时检查 WillCascadeOnDelete 函数

[http://msdn.microsoft.com/en-us/library/gg679348(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679348(v=vs.103).aspx)

在您在问题中发布的那个示例中，他们有：

```
modelBuilder.Entity<Customer>()
              .HasOptional(c => c.BillingAddress)
              .WithRequired(); 
```

在结束时（或对于您想要级联的任何实体）打一个 WillCascadeOnDelete(true) ，应该这样做。就像是：

```
modelBuilder.Entity<AccountHolder>().HasOptional(a => a.Address).WithRequired().WillCascadeOnDelete(true); 
```

# php - 如何在 PHP 中检查登录 nave VS 数据库表中的字段？

> ID：15254690
> 
> 赞同：0
> 
> 时间：2013-03-06T18:03:36.640
> 
> 标签：php, openldap

如何找出用户的登录信息。

我希望 php 返回 windows 的域\用户名，然后我将检查数据库是否存在，如果存在则验证它。

在 ASP.NET 中，这个函数 Page.User.Identity.Name.ToString() 正是我需要的，但我需要的是 PHP

我怎么能做到这一点是PHP？我听说过 LDAP，但我无法让它工作，而且我不确定 LDAP 是否能解决问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:11:01.597

如果你想`http://domain.com/username`

你必须使用`.htaccess`文件。阅读有关[htaccess的更多信息](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

**已编辑**

登录后，只需将用户名存储到一个变量并说出它`$username`，现在将该用户名传递给您的 index.php 文件，例如...

```
index.php?username=$username 
```

通过 htaccess 重写此 URL。

```
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?username=$1 [L] 
```

现在你可以访问它了`domain.com/username`

# asp.net - 如何在 ASP.NET 中使用母版页为 Web 窗体分配标题？

> ID：15254699
> 
> 赞同：1
> 
> 时间：2013-03-06T18:04:03.040
> 
> 标签：asp.net, html, webforms, title, master-pages

我想为在 VS 2010 中添加到我的解决方案中的每个页面分配一个单独的标题。我注意到 Site.Master 的标题始终显示在我的浏览器顶部。

即使我在 Web 窗体上指定了标题，我仍然看不到标题，它显示的是 Site.Master 上的标题。

有没有办法`Site.Master`可以继承 WebForm 的标题或简单地允许 WebForm 显示它的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:08:20.947

不久前我遇到了这个问题，如果你不熟悉它，它并不像看起来那么简单，但我的解决方案是将标题放在页面指令中，如下所示：

```
<%@ Page Title="myTitle" Language="vb" ... 
```

在被导航的页面中。我的母版页中也没有任何标题。

# r - 在使用带有 pandoc 的 R markdown 时在 pdf 上创建章节的标题和编号

> ID：15254700
> 
> 赞同：8
> 
> 时间：2013-03-06T18:04:05.863
> 
> 标签：r, markdown, knitr, pandoc

我正在使用 R 创建的降价文档，我正在尝试使用 pandoc 从降价创建 pdf 文件。其他一切正常，但我希望显示文档的标题以及部分的编号，就像默认的 Latex 文档一样。似乎在 rmarkdown 上定义的标题显示为 pdf 的部分标题。

我可以使用 options.sty 文件创建双倍行距、输入行号等。下面是我用来创建pdf的代码。

对于 options.sty 我使用：

```
 \usepackage{setspace}
\doublespacing

\usepackage[vmargin=0.75in,hmargin=1in]{geometry}
\usepackage{lineno}
\usepackage{titlesec}

\titleformat{\section}
{\color{red}\normalfont\Large\bfseries}
{\color{red}\thesection}{1em}{}

\titleformat{\subsection}
{\color{blue}\normalfont\Large\bfseries}
{\color{blue}\thesection}{0.8em}{}

\title{Monitoring Stations}
\author{Jdbaba} 
```

我使用 knitr 创建 R 降价文件。在上面的 options.sty 文件中，该程序似乎没有标题和作者部分。看来我错过了什么。

我用来将markdown转换为pdf的代码如下：

```
pandoc -H options.sty mydata.md -o mydata.pdf 
```

在乳胶文档中，pdf 也将具有自动编号。但是我的pdf缺少这一点。谁能建议如何在使用 pandoc 创建的 pdf 文档上启用编号？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T18:29:51.223

Pandoc 从 Markdown 文件中的标题栏中获取标题。这是对 Markdown 的特定于 Pandoc 的扩展。该块应具有以下格式：

```
% title
% author(s) (separated by semicolons)
% date 
```

所以，在你的情况下：

```
% Monitoring Stations
% Jdbaba
% March 6, 2013 
```

要为这些部分编号，您需要使用该`--number-sections`选项运行 Pandoc。

# asp.net - 如何使用 ASP.NET Chart 控件制作二维条形图

> ID：15254704
> 
> 赞同：1
> 
> 时间：2013-03-06T18:04:16.783
> 
> 标签：asp.net, charts

我正在使用 ASP.NET 图表控件，并希望创建一个 2D 条形图，如下例所示：

![示例 2D 条形图](../Images/9ea01a7e92c270dcbd8781caa13c8362.png)

我的数据如下所示：

![样本数据](../Images/47a4ef876106f6197a29837afc66b2e7.png)

产品 A、产品 B、产品 C 将是页面名称（请参阅我的数据），彩色条将是设备类型。谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T20:26:09.920

假设您有图表控件……包括所有 dll 和库。您首先需要...：

将图表添加到 ASP.NET 页面

```
<asp:Chart ID="Chart1" runat="server"> 
   <series> 
      <asp:Series Name="Series1"> 
      </asp:Series> 
   </series> 
   <chartareas> 
      <asp:ChartArea Name="ChartArea1"> 
      </asp:ChartArea> 
   </chartareas> 
</asp:Chart> 
```

您只需将图表控件从工具箱拖到页面上即可。

当通过客户端浏览器访问时，图表控件呈现一个 ChartHttpHandler - 处理请求。

接下来您需要指定图表数据。包括X轴和Y轴——X表示值的位置——Y值表示行的位置或列的高度。

然后，您需要使用 DataBindTable 将数据库数据绑定到图表...。

```
Using myConnection As New SqlConnection 
   myConnection.ConnectionString = ConfigurationManager.ConnectionStrings("NorthwindConnectionString").ConnectionString 

   Dim myCommand As New SqlCommand 
   myCommand.Connection = myConnection 
   myCommand.CommandText = "SELECT CategoryName, COUNT(*) as ProductCount FROM Products p INNER JOIN Categories c ON c.CategoryID = p.CategoryID GROUP BY CategoryName ORDER BY CategoryName" 

   myConnection.Open() 
   Dim myReader As SqlDataReader = myCommand.ExecuteReader() 

   chtCategoriesProductCount.DataBindTable(myReader, "CategoryName")

   myReader.Close() 
   myConnection.Close() 
End Using 
```

这将在图表控件中创建一个新系列，因此您无需在标记语言中专门定义一个系列。

获取数据的另一种方法是通过 DataSource 属性...如下。这需要明确定义图表的系列。您还需要指定是折线图还是条形图。

第一部分看起来像：

```
<asp:Chart ID="chtCategoriesProductCountBarChart" runat="server"> 
   <Titles> 
      <asp:Title Text="Number of Products in Categories"></asp:Title> 
   </Titles> 

   <Series> 
      <asp:Series Name="Categories" ChartType="Line" ChartArea="MainChartArea" BorderWidth="5" Color="Red"></asp:Series> 
   </Series>

   <ChartAreas> 
      <asp:ChartArea Name="MainChartArea"> 
      </asp:ChartArea> 
   </ChartAreas> 
</asp:Chart> 
```

绑定代码：

```
chtCategoriesProductCountBarChart.Series("Categories").XValueMember = "CategoryName" 
chtCategoriesProductCountBarChart.Series("Categories").YValueMembers = "ProductCount" 

chtCategoriesProductCountBarChart.DataSource = myReader 
chtCategoriesProductCountBarChart.DataBind() 
```

我假设您知道将这些数据放在哪里，作为图表控制器。祝你好运...

哦，这是我的资源……那里也应该有很多其他的帮助……干杯

[http://www.4guysfromrolla.com/articles/072209-1.aspx](http://www.4guysfromrolla.com/articles/072209-1.aspx)

# asp.net - 尝试连接到 Oracle DB 时如何解决“发生网络相关或特定于实例的错误”的任何想法？

> ID：15254707
> 
> 赞同：0
> 
> 时间：2013-03-06T18:04:37.450
> 
> 标签：asp.net, .net, vb.net

我正在尝试使用 asp.net 连接到 Oracle 数据库。

我在 web.config 文件中正确设置了 tns.ora 条目（我相信），如下所示：

```
<add name="constr" connectionString="Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myhostname)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=myServiceName)));User Id=myUsername;Password=myPassword;"/> 
```

然后我在代码隐藏中使用连接字符串：

```
Dim strConnString As String = ConfigurationManager.ConnectionStrings("constr").ConnectionString 
```

我声明了 Oracle 连接：

```
Imports System.Data.OracleClient 
```

首先，我收到一个错误

```
Namespace or Type declared in Imports System.Data.OracleClient
 doesn't contain any public member or is not found 
```

当我删除它时，我收到以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问...

我*认为*这与 Imports 声明有关。

任何想法如何解决这个错误？

Private Sub PopulateContinents() Dim oOracleConn As OracleConnection = New OracleConnection() Dim strConnString As String = ConfigurationManager.ConnectionStrings("constr").ConnectionString

```
Dim strQuery As String = "select deptID, DeptName from Dept"
Dim con As OracleConnection = New SqlConnection(strConnString)
Dim cmd As OracleCommand = New SqlCommand
cmd.CommandType = CommandType.Text
cmd.CommandText = strQuery
cmd.Connection = con
oOracleConn.Open()
ddlContinents.DataSource = cmd.ExecuteReader
ddlContinents.DataTextField = "deptID"
ddlContinents.DataValueField = "DeptName"
ddlContinents.DataBind()
con.Close() 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:03:21.350

似乎应用程序没有获得正确的连接字符串。

首先，尝试清除 web.config 中的所有连接字符串：

```
<connectionStrings>
  <clear />
  <add name="... 
```

其次，尝试指定您要使用的提供程序：

```
<add name="your.cs.name"
   providerName="Oracle.DataAccess.Client"
   connectionString="Data Source=//server:1521/instancename;User ID=UID;Password=PASS" /> 
```

# c# - 创建比原始元素更多的 ReactiveUI 派生集合

> ID：15254708
> 
> 赞同：11
> 
> 时间：2013-03-06T18:04:37.877
> 
> 标签：c#, system.reactive, reactiveui

是否可以创建一个包含比原始元素更多的 ReactiveUI 派生集合？

我已经看到有一种过滤集合和选择单个属性的方法，但我正在寻找的是等效于可枚举的 SelectMany 操作。

为了说明这一点，想象一下试图获得一个派生集合，该集合代表陷入交通拥堵的每位乘客。

```
class Car 
{
    ReactiveCollection<Passenger> Passengers;
}

var TrafficJam=new ReactiveCollection<Car>();
EveryPassengerInTheTrafficJam=Cars.CreateDerivedCollection(c=>c.Passengers); 
```

以上不起作用，我认为错误`IEnumerable<ReactiveCollection<Passenger>>`不能被强制转换为`ReactiveCollection<Passenger>`- 或者与类型有关的东西，无论如何。

我无法找出这种扁平化的正确方法 - 诚然，我可能在这里完全错误地吠叫，所以如果有更好的方法来实现同样的事情，请告诉我！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T01:10:32.353

目前，`CreateDerivedCollection`不支持`SelectMany`作为转换，它太棘手而无法处理删除。如果您没有很多项目，您可以每次重新生成集合：

```
cars.Changed
    .Select(_ => cars.SelectMany(x => x.Passengers).ToList())
    .ToProperty(this, x => x.Passengers); 
```

**编辑：**好的，我们开始：

```
var whenCarsOrPassengersInThoseCarsChange = Observable.Merge(
    cars.Changed
        .SelectMany(_ =>
            cars.Select(x => x.Passengers.Changed).Merge())
        .Select(_ => Unit.Default),
    cars.Changed.Select(_ => Unit.Default));

whenCarsOrPassengersInThoseCarsChange.StartWith(Unit.Default)
    .Select(_ => cars.SelectMany(x => x.Passengers).ToList())
    .ToProperty(this, x => x.Passengers); 
```

因此，我们的想法是，当我们想要重新评估乘客列表时，我们有两种主要情况：

1.  当其中一名乘客换车时
2.  当其中一辆车发生变化时

然而，棘手的部分是，*我们只想查看集合中汽车的乘客*（即如果汽车被移除，我们不再关心它的乘客）。

### 正确追踪自杀乘客

所以，那个奇怪的 SelectMany 的想法是，“每次汽车列表发生变化时，构建一个新的 Observable 列表来表示乘客集合何时发生变化，并将它们合并在一起”。

但是，如果我们*只有*该语句，我们将不得不等待添加汽车*并且*其乘客发生变化，然后才能获得新的乘客列表，因此我们还必须在汽车列表发生变化时进行更新。

### 这是什么“单位”业务？

在这种情况下，我实际上并不关心这些 Observable 输出的值，只是它们发生时。“Unit”是 void 的 Rx 版本，它只有一个值，“Unit.Default”。当你只关心事情发生时，你会使用它，而不是它的价值是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:29:03.227

嗯......我对 ReactiveUI 不是很熟悉，但只是通过阅读，看起来你需要改变你的`SelectMany`去向：

```
var jam = cars.SelectMany(x => x.Passengers).CreateDerivedCollection(p => p); 
```

# mysql - 如何验证以前导出的数据库的 MySQL 导入？

> ID：15254712
> 
> 赞同：0
> 
> 时间：2013-03-06T18:04:48.573
> 
> 标签：mysql

导出 MySQL 数据库然后导入 MySQL 数据库（使用新名称）时，如何验证没有损坏或数据丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:48:31.387

计算每个表中的行数，并确保计数前后一致。

查看每个表中的第一（最低）和最后（最高 id）行，并确保它们符合您的预期。

这将以 100 行为单位计算文本字段值的 SHA-1 哈希值。需要有`id`和`content`列才能使用它，但您可以更改它以匹配您的表格。

```
 SELECT id DIV 100 AS idbatch,  
         SHA1(GROUP_CONCAT(content ORDER BY id)) as contenthash 
    FROM table
GROUP BY id DIV 100 
```

如果您在之前和之后得到相同的结果，那么您的内容列已正确移动是一个很好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T17:32:56.363

您可以转储数据库并仅区分两者。

# struct - 更新整个结构

> ID：15254713
> 
> 赞同：1
> 
> 时间：2013-03-06T18:04:49.420
> 
> 标签：struct, scheme, set, racket, assign

假设我有一些返回结构的函数：

```
(struct layer (points lines areas))

(define (build-new-layer height)
  ...
  (layer list-a list-b list-c)) 
```

我想跟踪最后返回的结果，例如：

```
(define top-side (build-new-layer 0)) ; store the first result
...
(set! top-side (build-new-layer 0.5)) ; throw away the first result and store the new one 
```

但是，对于该特定代码，我收到错误：

```
set!: assignment disallowed;
 cannot modify a constant
  constant: top-side 
```

请告诉我什么是做我想做的事情的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:37:01.287

您使用什么语言？似乎这是一个配置问题，因为原则上你正在做的事情应该有效。转到“选择语言”窗口（在 Windows 中为 Ctrl+L），单击“显示详细信息”并查看当前使用的语言的选项之一是否不允许重新定义变量。或者，尝试使用不同的语言。

根据您将使用存储结果的确切*位置*（我无法从问题中的代码中看出），您可以将其作为函数参数传递，从而不再需要使用全局变量。这可能是一个更好的主意，在 Scheme 中不鼓励依赖全局状态和变异（`set!`操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:59:40.370

如果您总是想保留最后一层，那么您可能更喜欢在每次构建时设置最后一层。像这样。

```
(define last-layer #f)
(define build-new-layer
  (let ((save-layer #f))
    (lambda (height)
      (let ((new-layer (layer list-a ...)))
        (set! last-layer save-layer)
        (set! save-layer new-layer)
        new-layer)))) 
```

注意：如果真正的问题是“恒定性”，`last-layer`那么为自己构建一点抽象：

```
(define-values (last-layer-get last-layer-set!)
  (begin
    (define last-layer-access
      (let ((last-layer #f))
        (lambda (type . layer)
          (case type
           ((get) last-layer)
           ((set) (set! last-layer (car layer)))))))
    (values (lambda () (last-layer-access 'get))
            (lambda (layer) (last-layer-access 'set layer)))) 
```

# coldfusion - 在模型胶水事件处理程序中流动

> ID：15254714
> 
> 赞同：0
> 
> 时间：2013-03-06T18:04:50.027
> 
> 标签：coldfusion, cfml, model-glue

任何人都可以帮助我理解模型胶水事件处理程序的流程......它如此混乱或简化了下面的代码......

```
 <event-handler name="Shipment.List" type="templatedPage">
        <broadcasts>
            <message name="needShipmentList" />
        </broadcasts>
        <views>
            <include name="Primary" template="List.Shipment.cfm">
                <value name="xe_Display" value="Shipment.Display" />
                <value name="xe_Form" value="Shipment.Form" />
            </include>
        </views>
    </event-handler>

    <event-handler name="Shipment.Display" type="templatedPage">
        <broadcasts>
            <message name="needShipmentDetail" />
        </broadcasts>
        <views>
            <include name="primary" template="Display.Shipment.cfm">
                <value name="xe_ShipmentList" value="Shipment.List" />
                <value name="xe_ItemForm" value="Item.Form" />
                <value name="xe_ShipmentDisplay" value="Shipment.Display" />
                <value name="xe_ItemRemove" value="doItem.Remove" />
            </include>
        </views>
    </event-handler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:23:01.673

当您调用事件“Shipment.List”时，它将广播`"needShipmentList"`ShipmentController 的功能，执行后它将`List.Shipment.cfm`从母版页的“主要”布局返回。

*   “List.Shipment.cfm”有一个链接，触发`needShipmentDetail`函数
*   “List.Shipment.cfm”从`"Shipment.Display"-->needShipmentDetail`
*   在显示页面（`Display.Shipment.cfm`）上，有一些链接用于删除、列出...等
*   `"xe"`是退出事件的约定

# ssh - sshd 连接在 Windows 2012 上意外关闭

> ID：15254715
> 
> 赞同：0
> 
> 时间：2013-03-06T18:04:51.230
> 
> 标签：ssh, windows-server-2012

我一直在使用 FreeSSHD 连接到我的 Windows 服务器[Windows 2K3 -R2 Enterprise 服务器和 Windows 2K8-R2 Enterprise 服务器]。SSH 连接成功后会显示 Windows 命令提示符（即 Windows 平台）。

[我的观察]：在 Windows server 2012 的情况下，FreeSSHD 安装正常。我能够从远程机器与服务器建立 SSH 连接。但是，SSH 连接意外关闭，putty 终端立即关闭。我启用了 FreeSSHD 日志记录并注意到连接已成功建立但立即终止。

putty 日志显示以下错误消息：

tester@server-w12-1 的密码：无法创建子桌面：访问被拒绝。

我尝试安装 CopSSH。有了这个，我可以建立稳定的 SSH 连接。但它使用cygwin平台。我参考了“ [http://en.wikipedia.org/wiki/Comparison_of_SSH_servers](http://en.wikipedia.org/wiki/Comparison_of_SSH_servers) ”来获取可用 SSH 服务器的列表。

[改写问题]：在我的应用程序中，我使用 SSH 调用连接到服务器（Windows 和 Linux）来查询驱动器的特定详细信息。有人可以建议一个在 Windows 2012 服务器上运行的免费 SSH 服务器或建议修复 FreeSSHD 会话断开问题吗？

编辑：我无法添加答案或添加长评论。所以我发布了一个编辑。

[解决方案]

感谢特拉维斯的指导。问题已解决。我做了以下事情：

1.  在本地安全策略下禁用设置“用户帐户控制：以管理员批准模式运行所有管理员”
2.  右键单击 FreeSSHd 图标，然后单击“以管理员身份运行”
3.  在 FreeSSHd 应用程序属性的“兼容性”选项卡下选择“以管理员身份运行”选项
4.  正如 Travis 所提到的，确保 SSH 服务器正在运行。如果不将 FreeSSHd 的 SSH 选项卡下的端口号更改为 222 并使其运行。重启服务
5.  我的程序需要默认端口 22。所以我将端口改回 22 并且我能够让服务运行
6.  即使在多次重新启动后，我也能够通过 SSH 连接到服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:22:58.557

请检查以下步骤

1.) FreeSSHd 作为服务运行。

2.) SSH 服务正在 FreeSSHd 控制台上运行。![应该是这样的](../Images/12ca4cc5ae8be09cb0b7ef73c3717eb3.png)

3.) 如果它没有开始尝试更改 SSH 选项卡下的 SSH 端口（例如在我的情况下为 430）。![像这样](../Images/e6d591a90985b5357cc94aa3e5274bee.png)

希望这可以帮助。

# javascript - 为什么 JS 中的别名 'this' 如此容易出错？

> ID：15254718
> 
> 赞同：5
> 
> 时间：2013-03-06T18:04:54.067
> 
> 标签：javascript

在标题为“Faces of”的部分中阅读[编写一致、惯用的 JavaScript 的原则，](https://github.com/rwldrn/idiomatic.js/)`this`它表明`this`JavaScript 中的别名“非常容易出错”。

我个人尽可能尝试使用`_.bind()`（或类似的东西），但有谁知道为什么别名`this`如此容易出错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:14:26.513

有四种含义`this`取决于它是如何被调用的。因此，必须注意跟踪`this`正在使用哪个，我可以认为`this`其中至少有 3/4 容易出现问题。

## 作为方法调用

在`obj.myFunc()`中，`this`绑定到`obj`。

如果在回调中传递这个可能会很可怕`myFunc`，因为它会忘记它曾经是对象的一部分并被独立调用。参见例如['var that = this;' 是什么意思 在 JavaScript 中是什么意思？](https://stackoverflow.com/questions/4886632/what-does-var-that-this-mean-in-javascript)对于通常的解决方法。

## 作为独立函数调用

在 plain`myFunc()`中，`this`绑定到全局对象。

## 作为构造函数调用

调用为`new myFunc()`（非常不同！所有要调用的函数都`new`应该大写，因此看起来像一个伪类）。创建一个新对象，将其绑定到`this`并（可能）返回该对象。

当然，如果你放弃`new`你将绑定到全局对象，这可能会破坏很多东西并使你的程序处于非常破碎的状态。大小写约定*非常*重要，让 JSLint (IIRC) 解决了这个问题。

## 通过应用（或调用）调用

调用为`myFunc.apply(obj, args)`，其中`this`绑定到`obj`。请注意，这甚至具有安全隐患，因为任何调用者都可以`this`使用自己的欺骗对象进行交换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T18:13:00.353

`this`到处都是别名很容易出错，因为（对于开发人员）很难准确记住`this`在给定情况下所指的内容。这很容易导致开发人员`this`认为它指的是一个元素，而实际上它是完全不同的东西。例如：

```
$('#something').click ( function (e) {
    //this refers to the clicked element
    var _this = this;  //Tracking a reference to the clicked element `this`
    $.each(someArray, function(index, value) {
       //this refers to the current element being iterated in someArray
       $.ajax({
          url : 'some/path',
          success: function (res) {
             //this refers to the ajax request
             //_this still references the clicked element
          } 
       })
    })
}) 
```

此外，如果您需要`this`从另一个范围内访问一个`this`（例如，从 ajax 调用中单击的这个元素），您必须以某种方式保留对它的引用。我已经在代码中标记了这一点。

# python - 在 python 中使用 XML 解析 html 页面

> ID：15254725
> 
> 赞同：2
> 
> 时间：2013-03-06T18:05:14.373
> 
> 标签：python, html, xml, parsing

我试图让 python 从 HTML 页面解析这个 XML 代码：

```
<weather>
    <loc mobiurl="http://foreca.mobi/?lon=-8.6110&lat=41.1496&source=navi/" url="http://foreca.com/?lon=-8.6110&lat=41.1496&source=navi/">
        <obs station="Porto / Pedras Rubras" dist="11 km NW" dt="2013-03-06 17:00:00" t="14" tf="14" s="d320" wn="S" ws="8" p="997" rh="94" v="5000"/>
        <fc dt="2013-03-07" tx="16" tn="11" s="d220"/>
        <fc dt="2013-03-08" tx="15" tn="10" s="d220"/>
        <fc dt="2013-03-09" tx="15" tn="10" s="d220"/>
    </loc>
</weather> 
```

我想获取有关`dr`、和字段的信息`s`，但我不知道如何使用 XML 函数来完成。我尝试读取 HTML 文件，然后在前面所说的路径之后创建和箭头来存储内容，但我无法让它工作。`tx``tn`

有什么简单的方法可以用 python 获取数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:19:26.283

如果您可以轻松提取天气标签，则可以使用Python 附带的[`xml.etree.ElementTree`API 。](http://docs.python.org/2/library/xml.etree.elementtree.html)

```
import xml.etree.ElementTree as ET
tree = ET.fromstring(weatherdata)

for fcelem in tree.findall('.//fc'):
    print fcelem.attrib['tx'], fcelem.attrib['tn'] 
```

如果要从 HTML 文档中提取它，则取决于 HTML 的格式是否正确。如果它是 XHTML 文档，ElementTree API 可以很好地处理它。

否则，您需要改用 HTML 解析器。您可以安装[`lxml`库](http://lxml.de)；该库支持相同的 ElementTree API，但包含专用的 HTML 解析器。

您还可以将[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)用于替代 HTML API。事实上，`lxml`并且`BeautifulSoup`可以协同工作，为您的任务提供 API 选择；使用对您来说更容易的那个。

两者 都是外部库`lxml`。`BeautifulSoup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:52:32.710

`makeHTMLTags`使用该库的方法（`makeHTMLTags`返回一对表达式，用于开始和结束标签，但在您的示例中，只需要开始标签）可以通过 pyparsing 轻松完成一些 HTML 抓取：

```
from pyparsing import makeHTMLTags

fcTag = makeHTMLTags("fc")[0]
tagAttrs = 'dt s tx tn'.split()

for match in fcTag.searchString(htmltext):
    print ' '.join("%s:%s" % (attr,match[attr]) for attr in tagAttrs) 
```

印刷：

```
dt:2013-03-07 s:d220 tx:16 tn:11
dt:2013-03-08 s:d220 tx:15 tn:10
dt:2013-03-09 s:d220 tx:15 tn:10 
```

这使得很容易将此片段解析器与 pyparsing 的其他功能结合起来，例如运行时解析操作、语义检查等。

**编辑**

如果您希望所有 dt、s 等在它们各自的列表中（在 Python 中，我们称它们为“列表”，而不是“向量”），请执行以下操作：

```
dtArray = []
sArray = []
txArray = []
tnArray = []
for match in fcTag.searchString(htmltext):
    dtArray.append(match.dt)
    sArray.append(match.s)
    txArray.append(match.tx)
    tnArray.append(match.tn)
    print ' '.join("%s:%s" % (attr,match[attr]) for attr in tagAttrs) 
```

我以前见过这样的代码，这是一种糟糕的数据结构模式。您可以通过获取 , 等来访问原始表的第 i 个条目的`dtArray[i]`值`sArray[i]`。

请考虑使用 Python 提供的几种结构化类型之一。您有几个可供选择：

A. 使用字典。

```
fcArray = []
for match in fcTag.searchString(htmltext):
    fcArray.append(dict((attr,match[attr]) for attr in tagAttrs)) 
```

现在要获得第 i 个条目，只需 get并从该 dict`fc = fcArray[i]`访问等值。`fc['dt']``fc['s']`

B. 使用命名元组。

```
from collections import namedtuple
FCData = namedtuple("FCData", tagAttrs)

fcArray = []
for match in fcTag.searchString(htmltext):
    fcArray.append(FCData(*(match[attr] for attr in tagAttrs))) 
```

您再次使用`fc = fcArray[i]`来获取第 i 个条目，但现在您使用 , 等访问值`fc.dt`。`fc.s`我发现这种形式比 dict 形式看起来更干净，但有一些限制。所有的标签名称都必须是合法的 Python 标识符，所以如果你有一个标签“rise/run”，那么你就不能使用命名元组。此外，namedtuples 是不可变的 - 您不能获取现有的 FCData`fc`并`dt`使用`fc.dt = "new datetime value"`. 另一方面，dicts 将允许这样做。

C. 使用对象。最简单的是创建空对象实例的“bag”类型对象，您可以通过简单的赋值或 setattr 调用为其添加属性：

```
class FCData(object): pass

fcArray = []
for match in fcTag.searchString(htmltext):
    fc = FCdata()
    for attr in tagAttrs:
        setattr(fc, attr, match[attr])
    fcArray.append(fc) 
```

您使用 获得第 i 个条目`fc = fcArray[i]`，并且像 namedtuple 一样，您使用等获得属性`fc.dt`。但是如果需要，您也可以修改属性，并且分配`fc.dt = "new datetime value"`将起作用。

D. 只需使用 pyparsing 的 searchString 方法创建的对象。

```
fcArray = fcTag.searchString(htmltext) 
```

pyparsing 返回`ParseResults`，它结合了 dicts 和 namedtuples 的行为。就像在您使用 访问第 i 个条目之前一样`fc = fcArray[i]`。您可以使用或读取`dt`属性。你可以阅读，但你不能分配给它，就像命名元组一样。您*可以*分配给，就像字典一样。`fc.dt``fc['dt']``fc.dt`*`fc['dt']`*

# ios - 使用 ARC，是否需要释放 CGMutablePathRefs？

> ID：15254726
> 
> 赞同：0
> 
> 时间：2013-03-06T18:05:21.707
> 
> 标签：ios, core-graphics, automatic-ref-counting

我一直在四处寻找，但在使用 ARC (+ iOS6) 时是否需要释放核心图形原语（CGMutablePathRef、CGPath、渐变等），但没有找到明确的答案。

我已经看到了这个（[关于释放 CGMutablePathRef 对象的编译器警告静音](https://stackoverflow.com/questions/9816503/silence-a-compiler-warning-about-releasing-a-cgmutablepathref-object)）和其他一些问题，但它们要么过时，要么不完全清楚（至少对我来说）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:08:13.827

是的。

粗略地说，只有`NSObject`实例是通过 ARC 处理的。ARC 是一种编译器机制，可在需要时为您添加`release`/ `retain`。因此，它仅适用于您可以在非 ARC 情况下使用`release`/的情况。`retain`

这不包括通过 分配的内存`malloc`，也不包括低级框架（核心图形、核心音频等）。具体来说，通过低级框架分配的对象需要通过特定的方法（例如`CGImageRelease`，等）释放。

编辑：

Core Foundation 数据类型的一个非常具体的例子是*免费桥接*类型。在 ARC 之前的世界中，您可以安全地指定一个 CF 数据类型，其中对应的 Objective-C 类是预期的（例如，用 CFString 代替 NSString）。ARC 禁止这样做，因为所有权语义不清楚。因此，可以使用一组 ARC 指令来指定所有权信息（有关更多信息，请参阅[此](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html)内容），但情况并非如此`CGPath`，它不是免费桥接的（因为[CGPath 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CGPath/Reference/reference.html)中没有说明）。

顺便说一句，所有 ARC 怀疑的一个很好的资源是[Mike Ash 的这篇丰富的帖子](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)。

# java - Java StackOverflow 封装

> ID：15254728
> 
> 赞同：0
> 
> 时间：2013-03-06T18:05:25.593
> 
> 标签：java

尝试设置一个`Person class`我在尝试将信息封装在类中以使其不会被意外更改时遇到了问题。除了当我尝试使用 setter/getter 进行封装时，该类工作得非常好。我认为的问题是这些方法最终会相互循环，直到堆栈已满。

这是工作代码（剪辑）：

```
// Set this persons father
public void setFather(Person father) {
    // Adding or changing father
    if (father != null && father.isMale()) {
        // If old father, remove as child
        if (this.father != null)
            this.father.removeChild(this);
        this.father = father;
        this.father.children.add(this);  //######//
    }

    // Removing father
    if (father == null) {
        // Removing old father
        if (this.father != null)
            this.father.removeChild(this);
        this.father = null;
    }
}

// Add a child to this person
public void addChild(Person child) {
    // Add child to this persons children if not already a child
    if (!this.children.contains(child)) {
        // Add this person as mother to child if female
        if (this.isFemale()) {
            child.setMother(this);
        }

        // Add this person as father to child if male
        if (this.isMale()) {
            child.setFather(this);
        }
    }
} 
```

现在请注意，如果我将标有的行更改`//#####//`为：`this.father.addChild(this);`我得到一个 stackoverflow。

```
private String name = null;
    private char gender;
    private Person father;
    private Person mother;
    ArrayList<Person> children = new ArrayList<Person>(0); 
```

我希望孩子们保持私密，但我不知道如何摆脱这个循环。

这有点与家庭作业有关，但作业已完成并以满分更正，我只想封装我的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:08:12.547

您对 addChild 的调用（来自 setFather）再次调用 setFather。

尝试改变

```
 if (this.isMale()) {
        child.setFather(this);
    } 
```

类似于

```
 if (this.isMale() && child.father != this) {
        child.setFather(this)     
    } 
```

此检查将使您摆脱无限循环。只需确保在调用 setChild 方法**之前**在 setFather 方法中设置了父亲。

# ruby-on-rails - 在 Rails 中获取失败/错误和 NoMethod 错误

> ID：15254730
> 
> 赞同：0
> 
> 时间：2013-03-06T18:05:37.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

以下是我从控制器中搜索的方法

```
@accounts = []
    client = GameAccounts::GameAccountsClient.new

    if params[:name]

      # Try and find a game account by id using the given name
      response = client.get_accounts_by_name(params[:name])

      if response.is_a?(Net::HTTPSuccess)
        account = client.parse_json(response)
        unless account.empty?
          session[:account] = account
          redirect_to game_account_path(params[:name])
        end
      end

      json = client.get_json(params[:limit],params[:offset],params[:name])

      @presenter = GameAccountsPresenter.new(json)

    end
  end 
```

我正在尝试运行以下测试：

```
require 'spec_helper'

describe GameAccountsController do
  describe 'GET search' do
    it 'finds a named system account directly' do
     get(:search, name: 'test').to be_redirect_to(game_account_path('test'))
    end
  end
end 
```

我不断得到一个

```
GameAccountsController GET search finds a named system account directly
     Failure/Error: get(:search, name: 'test').to be_redirect_to(game_account_path('test'))
     NoMethodError:
       undefined method `to' for #<ActionController::TestResponse:0x007f8b0beb3e10>
     # ./spec/controllers/game_accounts_controller_spec.rb:6:in `block (3 levels) in <top (required)>' 
```

谁能让我知道我做错了什么？..尝试做`.should redirect_to`，我仍然得到同样的错误，但方法是“应该”。

客户端代码

模块 GameAccounts 类 GameAccountsClient

```
OAUTH_CONFIG=YAML.load_file(Rails.root.join('config','oauth.yml' ))
def consumer
  @consumer ||= OAuth::Consumer.new(OAUTH_CONFIG['oauth_key'],OAUTH_CONFIG['oauth_secret'],access_token_url: OAUTH_CONFIG['oauth_access_token_url'],signature_method: 'HMAC-SHA1')
end

def get_accounts_by_name(name)
   query_account(CGI.escape(name))
end

def get_accounts_by_id(account_id)
  response = query_account(CGI.escape(account_id))
  parse_json(response)
end

def get_json(limit,offset,name)

  limit=set_limit(limit)

  offset = set_offset(offset)

  query = "?name=#{CGI.escape(name)}&limit=#{limit}#{offset}"
  response = query_account(query)
  parse_json(response)
end

def parse_json(response)
   JSON.parse(response.body)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:44:09.937

Rspec 的请求规范可能很棘手。您应该使用参数调用“get”方法，这将创建一个响应方法，其中保存您的实际响应数据：

```
require 'spec_helper'

describe GameAccountsController do
  describe 'GET search' do
    it 'finds a named system account directly' do
      get(:search, name: 'test')
      response.should redirect_to(game_account_path('test'))
    end
  end
end 
```

希望能帮助到你 ：）

**编辑：**

这是[rspec 文档](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)的链接，2.13 版支持该`expect`语法。上面的例子也可以写成：

```
require 'spec_helper'

describe GameAccountsController do
  describe 'GET search' do
    it 'finds a named system account directly' do
      get(:search, name: 'test')
      expect(response).to redirect_to(game_account_path('test'))
    end
  end
end 
```

**编辑2：**

尝试以下代码并测试 get_* 方法的返回值（和类）：

```
def search
  @accounts = []

  if params[:name]

    if get_response.is_a?(Net::HTTPSuccess)
      unless get_account.empty?
        session[:account] = get_account
        redirect_to game_account_path(params[:name])
      end
    end

    json = get_client.get_json(params[:limit],params[:offset],params[:name])
    @presenter = GameAccountsPresenter.new(json)

  end
end

def get_client
  @client ||= GameAccounts::GameAccountsClient.new
end

# Try and find a game account by id using the given name
def get_response
  @response ||= client.get_accounts_by_name(params[:name])
end

def get_account
  @account ||= get_client.parse_json(get_response)
end 
```

# java - 具有多对多关系的 TypedQuery

> ID：15254735
> 
> 赞同：0
> 
> 时间：2013-03-06T18:06:04.987
> 
> 标签：java, hibernate, jpa, jpql

我在使用 TypedQuery 接口、NamedQuery 和多对多关系创建查询时遇到问题。这是我的报告实体：

```
@Entity
@Table(name = "REPORT")
@NamedQueries({
    @NamedQuery(name = Report.NAMED_QUERY.FIND_USERS, query = "SELECT r.users FROM Report r WHERE r = :report")})

public class Report {

  public interface NAMED_QUERY {
      String FIND_USERS = "Report.findUsers";
  }

  @ManyToMany
  @JoinTable(name = "REPORT_USER", joinColumns = @JoinColumn(name = "REPORT_ID"), inverseJoinColumns = @JoinColumn(name = "USER_ID"))
  private Set<User> users;

  //another fields, getters and setters
} 
```

和用户实体。在这里，我没有映射多对多关系的字段。

```
@Entity
@Table(name = "USER")
public class User {

  //fields, getters and setters

} 
```

我不知道如何使用这个命名查询。

```
public List<User> findUsersRelatedToReport(Report report) {
    TypedQuery<User> query = entityManager.createNamedQuery(Report.NAMED_QUERY.FIND_USERS, User.class)
            .setParameter("report", report);
    return query.getResultList();
} 
```

最后我有例外：

```
Type specified for TypedQuery [package_name.User] is incompatible with query return type [interface java.util.Set] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:56:51.313

您不能在 SELECT 中使用集合值属性（在 JPA 规范术语中：collection_valued_pa​​th_expression）。

这就是查询更复杂的原因，一种方法如下：

```
SELECT DISTINCT(u)
FROM User u 
WHERE EXISTS (
    SELECT r 
    FROM Report r 
    WHERE r = :report AND u MEMBER OF r.users) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:59:32.430

尝试将报表类中用户的数据类型更改为列表。

`private List<User> users;`

代替

```
private Set<User> users; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:29:24.793

您正在尝试将一组用户作为导致错误的选择中的列返回。

我认为您可以尝试从用户表中选择数据。尝试这样的事情： `SELECT u FROM User u WHERE u.report = :report`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T20:08:14.967

这是一个老问题，但我最近也遇到了这个问题并提出了更优雅的解决方案：确实你不能在 select 表达式中使用 collection_valued_pa​​th ，但你绝对可以在这条路径上进行连接：

```
SELECT u FROM Report r JOIN r.users u where r = :report 
```

# java - 读者/作家通过参考传递

> ID：15254737
> 
> 赞同：3
> 
> 时间：2013-03-06T18:06:20.120
> 
> 标签：java

下面的代码是 Java 中传递接力棒程序的一部分：

主 P1（写入器） P2（写入器） P3（读取器） P4（读取器）

主要的（）;

```
package ReadersPreference;

import java.util.concurrent.Semaphore;

/**
  * * @author me
 */
public class Main {

public static void main(String[] args) {

    AnyData x = new AnyData(5.7);//gives writers something to write, 
                                   //readers something to read
    Semaphore e = new Semaphore(1);//control entry
    Semaphore r = new Semaphore(0);//used to delay readers
    Semaphore w = new Semaphore(0);//used to delay writers

    int nr = 0;//readers active
    int nw = 0;//writers active

    int dr = 0;//readers waiting
    int dw = 0;//writers waiting

    P1 r1 = new P1(e, r, w, x, nr, nw, dr, dw); // #reader thread 1
    P2 r2 = new P2(e, r, w, x, nr, nw, dr, dw); // #reader thread 2
    P5 r3 = new P5(e, r, w, x, nr, nw, dr, dw); // #reader thread 3
    P6 r4 = new P6(e, r, w, x, nr, nw, dr, dw); // #reader thread 4

    P3 w1 = new P3(e, r, w, x, nr, nw, dr, dw); // #writer thread 1
    P4 w2 = new P4(e, r, w, x, nr, nw, dr, dw); // #writer thread 2

System.out.println("threads commanded to start");

r1.start();     // calls run() method in Thread
r2.start();
r3.start();     
r4.start();   
w1.start();
w2.start();
}//end of main
}//end of class 
```

读者进程

```
package ReadersPreference;

import java.util.concurrent.Semaphore;

public class P1 extends Thread {

private Semaphore e;
private Semaphore r;
private Semaphore w;
private AnyData pillarbox;
private int nw;
private int nr;
private int dr;
private int dw;

public P1(Semaphore e, Semaphore r, Semaphore w, AnyData pbox,
        int nw, int nr, int dr, int dw) {

    this.nw = nw;
    this.nr = nr;
    this.dr = dr;
    this.dw = dw;

    this.e = e;
    this.r = r;
    this.w = w;
    pillarbox = pbox;
}// end of constructor

public void run() {

PERFORM OPERATIONS          

}// end of run method
}// end of class 
```

现在，根据我的输出，它似乎可以工作。然而，我的讲师指出了两个主要缺陷。一种是计数器 (nr,nw,dr,dw) 通过值而不是通过引用传递。这意味着每个线程检查自己的数据副本而不是使用共享变量，这会阻止程序按应有的方式运行。

我一直在阅读大量关于传递值和参考的内容，起初我觉得我的头很肿，我想我现在明白了大部分，但我仍然没有看到解决方案。我可以理解为什么信号量可以工作，因为它们已经是一个引用（而不是它们被传递的值是一个引用）。我不知道计数器的问题到底出在哪里，也不知道如何解决它。

当他说线程时，他指的是进程类（构造函数/算法）还是主类中的实例化，还是两者兼而有之？

基于将原语共享为对象的阅读，我提出的最接近解决方案的解决方案如下：

```
public void setCounters(int nr){nr = newNR;} 
```

再次，虽然我对如何实现它含糊不清

第二个可能的主要缺陷是我创建了几个进程类文件并将每个文件作为一个线程运行，而不是编写两个（读取器/写入器）并根据需要使用尽可能多的对象。我很模糊这意味着什么，而且，考虑到我的输出打印语句对于每个进程都是唯一的，在输出中唯一地标识每个以进行验证，为什么这种方法在出于某种目的而被认为是缺陷时，确实它会影响读者/作者的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:42:03.723

在我开始之前有一件事，好的变量名**总是**比注释更好；坚持这条规则，你就不会出错。想象一下，我在代码的某个地方遇到了你的`e`变量，我现在必须滚动到类的顶部并阅读注释以查看它的用途，然后回到我原来的位置。这使得代码几乎不可读......

您的第一个问题是您使用`int`的是原始类型，这是按值传递的。@Marcin 的解决方案不是线程安全的；如果你做这样的事情，`int++`那么当被多个线程调用时，它可以做各种奇怪的事情（比如不递增、返回错误的值等）。**在多线程操作中始终使用线程安全对象**。

正如@Marcin 建议的那样，您可以将数据包装在一个类中以减少代码量：

```
public class SharedData<T> {

    private final T data;
    private final Semaphore entryControl = new Semaphore(1);
    private final Semaphore readerDelay = new Semaphore(0);
    private final Semaphore writerDelay = new Semaphore(0);
    private final AtomicInteger activeReaders = new AtomicInteger(0);
    private final AtomicInteger activeWriters = new AtomicInteger(0);
    private final AtomicInteger waitingReaders = new AtomicInteger(0);
    private final AtomicInteger waitingWriters = new AtomicInteger(0);

    public SharedData(final T data) {
        this.data = data;
    }
    //getters
} 
```

我已经把它变成了一个泛型类，但是如果你愿意，你可以删除泛型并将“数据”设置为“对象”——泛型更好，因为它提供了类型安全，请在[此处](http://docs.oracle.com/javase/tutorial/java/generics/types.html)阅读。

该类使用该`AtomicInteger`对象，这是一个线程安全整数，允许进行原子操作，例如- 这消除了访问*单个*`getAndSet(int newValue)`值时出现线程安全问题的可能性，但看起来您可能想要访问两个，这仍然不是线程安全的，所以你可能希望按照以下方式向数据类添加一些方法：

 *```
public synchronized void makeReaderActive() {
    //perform checks etc
    waitingReaders.decrementAndGet();
    activeReaders.incrementAndGet();
} 
```

否则，读者可能会减少`waitingReaders`然后某些东西可能会读取`activeReaders`之前增加的内容。

我认为，这涉及您的第一个查询；现在到你的第二个。您的老师说您创建了几个流程类文件而不是创建实例。这是因为您复制粘贴了同一个文件，称它为不同的东西（`P1`,`P2`等），这不是 Java 的工作方式。考虑您创建`Semaphore`s 的代码：

```
Semaphore e = new Semaphore(1);//control entry
Semaphore r = new Semaphore(0);//used to delay readers 
```

你有一个类文件（Semaphore.class），你已经创建了两个实例。您不必将 JDK 的`Semaphore`类复制到另一个文件中并创建它。您不必这样做：

```
Semaphore1 e = new Semaphore1(1);//control entry
Semaphore2 r = new Semaphore2(0);//used to delay readers 
```

所以; 在您的示例中，我假设您有一些`Reader`流程和一些`Writer`流程，然后您需要两个类：

```
public class MyReader implements Callable<Void> {

    private final String name;
    private final SharedData sharedData;

    public MyReader(final String name, final SharedData sharedData) {
        this.name = name;
        this.sharedData = sharedData;
    }

    @Override
    public Void call() {
        //do stuff
        return null;
    }
}

public class MyWriter implements Callable<Void> {

    private final String name;
    private final SharedData sharedData;

    public MyWriter(final String name, final SharedData sharedData) {
        this.name = name;
        this.sharedData = sharedData;
    }

    @Override
    public Void call() {
        //do stuff
        return null;
    }
} 
```

一类代表所有作者的工作，另一类代表所有读者的工作。我把它们做成了`Callable`s 而不是线程；这让我想到了下一点。

您不应该使用`Thread`对象，这些对象级别非常低，难以正确管理。您应该使用新的[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。所以你的`main`方法现在看起来像：

```
public static void main(String[] args) {
    final SharedData<Double> sharedData = new SharedData<Double>(5.7);
    final List<Callable<Void>> myCallables = new LinkedList<Callable<Void>>();

    for (int i = 0; i < 4; ++i) {
        myCallables.add(new MyReader("reader" + i, sharedData));
    }
    for (int i = 0; i < 2; ++i) {
        myCallables.add(new MyWriter("writer" + i, sharedData));
    }

    final ExecutorService executorService = Executors.newFixedThreadPool(myCallables.size());
    final List<Future<Void>> futures;
    try {
        futures = executorService.invokeAll(myCallables);
    } catch (InterruptedException ex) {
        throw new RuntimeException(ex);
    }
    for (final Future<Void> future : futures) {
        try {
            future.get();
        } catch (InterruptedException ex) {
            throw new RuntimeException(ex);
        } catch (ExecutionException ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

让我带您浏览这段代码，以便您了解这里发生了什么。在第一行，我们创建了一个新`SharedData`类——在本例中它是一个`SharedData<Double>`; 这意味着`data`它包含的类型是`Double`; 这可能是任何东西。

接下来我们创建一个`List`of `Callable`，这是我们的工作类将去的地方。然后我们将工作类放入我们`List`的循环中；请注意，我们为每个创建了相同类的实例，`MyReader`并且`MyWriter`- 我们不需要为每个类创建一个类文件。

然后我们创建一个新`ExecutorService`的线程池，其大小与我们创建的工作类的数量相同——注意我们可以拥有更少的线程。在这种情况下，每个线程将分配一个工作类，然后当它们完成时，它们将被赋予一个新的，直到一切都完成。在我们的例子中，有足够多的线程，因此每个简单的线程都被分配了一个工作类。

我们现在调用`invokeAll`传入`List`工作类，这是我们向`ExecutorService`所有`call`s`Callable`询问的地方。这个方法一直阻塞直到一切都完成，它可能会`InterrupedException`像任何等待的方法一样抛出一个 - 在这种情况下，我们抛出异常并退出。

最后，这就是`ExecutorService`亮点所在，我们遍历返回的`Future`类列表并调用-如果运行与该未来相关的工作有任何问题，`get`这将抛出一个问题。`ExecutionException`在这种情况下，我们抛出一个异常。

注意`Callable`s 是 type `Void`（即它们被声明为`Callable<Void>`），然后过滤到`Future`s 因为它们是 type `Future<Void>`。如果您想从每个进程返回一些数据，那么您可以将类型更改为`Callable<MyData>`，然后`get`方法`Future`将返回此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:13:53.417

考虑声明一个结构来保存变量，并传递结构而不是单个变量。这样，您的所有线程都可以处理相同的数据；即：看对方对它的改变。

例子：

```
static class Data {
    int nr = 0;
    int nw = 0;
    int dr = 0;
    int dw = 0;
} 
```

然后将引用传递给`Data`而不是原语`nr,nw,dr,dw`

例子：

```
Data d = new Data();
P1 r1 = new P1(e, r, w, x, d);
P2 r2 = new P1(e, r, w, x, d); 
```

你的构造函数声明`P1`将是：

```
public P1(Semaphore e, Semaphore r, Semaphore w, AnyData pbox, Data d) 
```

确保同步对共享`Data`的编辑`synchronized (d) {...}`

此外，也许没有必要复制 classes `P1,P2,P3,P4`，考虑使用线程的名称来区分它们以用于您的日志记录目的。

希望这可以帮助。*

# perl - 如何在输出时重新格式化数组中的元素？

> ID：15254740
> 
> 赞同：0
> 
> 时间：2013-03-06T18:06:23.910
> 
> 标签：perl, reformat

使用 Perl，我必须读取格式为逗号分隔的数据

邮政编码，邮政编码内的城市数量，邮政编码内每个城市的列表。这确实适用于虚荣城市，以便我们获得所有使用邮政编码的城市的列表。

当我写出来时，我需要有类似的东西

```
{zipcode,"number of cities,list of cities"} 
```

将 chomp 放入一个数组中，它会将邮政编码放入数组 [0]，将数字放入数组 [0]，然后为列表中命名的每个城市添加一个元素。他的列表中可能有 1 个城市或 70 个城市。我如何从那个数组变成我需要的格式。本质上，我正在获取从大数据平台创建的输入文件，并将其格式化为 C# 程序，用作平台的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:35:10.293

```
my $zipcodes = { 33401 => ['West Palm Beach','Green Acres'] }; #initial entries
push($zipcodes->{33401}, 'Jupiter'); #or add entries by pushing them into the array
print '{33401,"' . @{$zipcodes->{33401}} . ',' . join(',',@{$zipcodes->{33401}}) . "\"}\n";

#prints {33401,"3,West Palm Beach,Green Acres,Jupiter"} 
```

# org-mode - 如何让 org-mode 一致地执行代码块

> ID：15254742
> 
> 赞同：0
> 
> 时间：2013-03-06T18:06:25.063
> 
> 标签：org-mode

我在 org-mode 文件的会话中运行 R 代码块，我通常可以让它们按预期由 Cc Cc 执行。

我认为我放在文件顶部的相关 PROPERTY 行是

```
#+PROPERTY: session *R*
#+PROPERTY: cache yes
#+PROPERTY: exports both
#+PROPERTY: tangle yes 
```

有时，当我按 Cc Cc 时，什么也没有发生。AFAICT，这是一个看似随机的事件；相同的代码块可能会工作一次而失败另一次。

当这样的块失败时，我确实看到结果回显到 minibuffer，但我在 R 会话中看不到任何结果（例如，一个新的数据帧，正如我在许多情况下所期望的那样）。

如果我按 C-' 来编辑代码块，然后在每一行上按 Cj（或在每个区域上按 Cr），代码就会执行，结果会适当地回显到 org 文件并显示在 R 会话中。

以下是一些示例代码块开始行：

```
#+begin_src R :results silent :exports code 

#+begin_src R :results value :colnames yes :exports both 
```

我刚才通过执行 rm(list=ls())、运行代码块和在会话中执行 ls() 来测试两者，以查看结果是否存在。

第一个块很简单：

```
#+begin_src R :results silent :exports code 
require(stringr)
require(ggplot2)
require(scales)
require(arm)
require(YaleToolkit)
require(stinepack)
require(mixtools)
require(lubridate)
source("utilities.R")
pf <- function (x,y) {
z <- sqrt(x * x + y * y)
return(x/z)
}
#+end_src 
```

在两个测试中，它工作一次，失败一次，通过在 R 会话中查找 pf 检测到。

如果重要的话，我可以尝试生成一个经常失败的 ECM，但我怀疑这可能是某人已经看到并解决的常见设置或版本问题。它似乎与[Org-mode code block evaluation](https://stackoverflow.com/questions/9456714/org-mode-code-block-evaluation/9462567#9462567)有关，但那里的解决方案似乎是 :export results。在大多数情况下，我同时使用 :exports ，这似乎涵盖了这种情况，并且至少在某些情况下，我关心在会话中设置环境而不是导出到 org 文件。我从不通过 org-mode 传递数据；我只是为此使用会话。

顺便说一句，我在 XP Pro 64 上的 GNU Emacs 23.3.1 上运行 org-mode 7.8.03。

# google-drive-api - Google Drive SDK 刷新令牌标识符

> ID：15254745
> 
> 赞同：1
> 
> 时间：2013-03-06T18:06:33.197
> 
> 标签：google-drive-api

我有网络服务器。每个客户都在服务器上，他们可以访问他们的谷歌驱动器文件。

我已经编写了 Google drive API 的实现，但我遇到了令牌问题。

问题 1 当一个人开始访问她的 Google 驱动器时，服务器需要一个访问令牌。首先，她询问人员她是否真的需要访问文档，如果人员单击“允许访问”，则服务器返回访问令牌和刷新令牌。服务器保存当前用户的刷新令牌。

然后如果同一个人再次出现，Server 会看到她的刷新令牌，并自动生成一个新的访问令牌。用户不必再次单击“允许访问”，因为我们可以使用刷新令牌生成访问令牌。这是对的吗？因为如果我们不手动撤销刷新令牌，它将永远存在（我不知道如何撤销，但我知道如果我们不做任何事情它会永远存在）

问题 2 如果以上正确 - 如何在服务器上保存刷新令牌？另一方面，我需要用户的标识符，不是吗？因为如果另一个人来了，我应该使用她的刷新令牌生成她的访问令牌。我应该找到数据库中是否有她的刷新令牌。但是如何查看如果我没有任何标识符？

我在 API 上没有任何用户标识符： [https ://developers.google.com/drive/v2/reference/about#resource](https://developers.google.com/drive/v2/reference/about#resource)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:43:14.760

1）这是正确的，您的应用在用户第一次授予访问权限时会收到访问令牌和刷新令牌。访问令牌是短暂的，而刷新令牌很少过期，除非用户手动撤销它。当用户回到您的应用程序时，如果您有一个存储的刷新令牌，您可以使用它来检索访问令牌，而无需任何用户交互

2）您应该使用永久存储解决方案，例如数据库。密钥应该是从用户信息服务中检索到的用户 ID。

有关更多详细信息，请查看[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)

# php - PHP更新查询不会更新

> ID：15254747
> 
> 赞同：1
> 
> 时间：2013-03-06T18:06:38.170
> 
> 标签：php, login, mysqli

我正在尝试在我的登录脚本上创建蛮力保护。尽管应该更新帐户被锁定的数据库的查询不起作用。我开始感到沮丧，因为我在过去的半小时里一直在看这段代码..

无论如何这里是代码：

```
if(isset($_POST['submit'])) {
$mysqli = getConnected('*','*','*','*');
$username = $mysqli->escape_string($_POST['username']);
$password = $mysqli->escape_string($_POST['password']);
$hash = sha1($password);
$query = "SELECT * FROM users WHERE username='$username'";
$result = $mysqli->query($query);
$data = $result->fetch_assoc();

    if($data['lock'] == 0) {
        if($hash == $data['password']) {
        $_SESSION['loggedin'] = true;
        $_SESSION['username'] = $username;
        $result->free();
        $mysqli->close();
        header("Location: index.php?p=start");
        } else {
            if($data['login_attempts'] != 0) {
                $attempts_left = $data['login_attempts'] - 1;
                $query2 = "UPDATE users SET login_attempts='$attempts_left' WHERE username='$username'";
                $mysqli->query($query2);
                echo "Inloggningen misslyckades, du har ". $attempts_left ." försök kvar.";
            } else {
                $query3 = "UPDATE users SET lock='1' WHERE username='$username'";
                $mysqli->query($query3);
                echo "Ditt konto har låsts.";
            }
        }
    } else {
        echo "Ditt konto är låst, kontakta webmaster för att återställa det.";
    }
} 
```

问题是 $query3 的执行位置，尽管它根据 var_dump 正确执行。

我需要第二双眼睛来确保我不会发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:11:22.637

问题是这`lock`是[mysql 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。您需要将查询更改为：

```
$query3 = "UPDATE users SET `lock`='1' WHERE username='$username'";
                            ^^^^^^ use back-ticks to escape reserved words in mysql 
```

# c# - 实体框架代码优先：可以访问的计算属性是自己的表

> ID：15254754
> 
> 赞同：0
> 
> 时间：2013-03-06T18:07:09.823
> 
> 标签：c#, entity-framework, code-first, computed-field

是否可以首先在 EF 代码中创建一个可以使用其自己表的其他元素的计算属性？

如果不是，那么不使用上下文方法的最佳方法是什么（我想要一个属性将其绑定到 wpf UI 上而不使用转换器）？

这个例子显示了我正在尝试做的事情（在计算的 sql 字段中很容易做到）：

```
class MyEntity{

public virtual decimal Amount { get; set; }

public virtual decimal DivideOfThisAmountOnAll
{
    get
      {
        var sum = *******.sum(e=>e.Amount); //How am i supposed to acces to the others?
        return this.Amount / sum;
      }
 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:11:33.457

我建议不要直接修改您的数据库对象，而是为绑定创建一个业务逻辑层。[https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的工具可以让您轻松传输大部分表实体而无需修改，然后执行创建汇总值、复杂计算字段和其他非存储数据任务等操作。

在 MVC 中，这称为 Model、View、ViewModel、Controller，其中 ViewModel 是您绑定的对象并具有所有计算结果。

这确实引入了额外的复杂性，但它让您的模型对象单独存在（这是一件好事），并允许您将规则隔离到一个位置（ViewModel），这可以避免将相同的计算传播到许多控制器（这是一种反图案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:13:13.873

如果不访问 db 上下文，您将无法执行此操作。您可以提出一些方案，将其注入实体等，但基本上您将像查询任何其他查询一样查询数据库上下文。

```
class MyEntity{
  public virtual decimal Amount { get; set; }

  public virtual decimal DivideOfThisAmountOnAll(YourDbContext db)
  {  
        var sum = db.LinqQueryHereToAggregateAsYouPlease.Single();
        return this.Amount / sum;
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:30:07.637

我建议使用导航属性来执行此操作。

```
class MyEntity{

    public virtual decimal Amount { get; set; }

    public virtual Parent Parent { get; set; }

    public virtual decimal DivideOfThisAmountOnAll
    {
        get
        {
            var sum = Parent.MyEntities.Sum(e=> e.Amount);
            return this.Amount / sum;
        }
    }

} 
```

AaronLS 的答案也很好，但它引入了对 DbContext 的依赖（如果你关心这些事情）。

# javascript - 使 eval 同步运行异步代码

> ID：15254758
> 
> 赞同：1
> 
> 时间：2013-03-06T18:07:21.950
> 
> 标签：javascript, eval

我将 javascript 片段作为字符串传递，该字符串被调用为数据数组（csv 文件）。我只想在完成第一行后评估下一行：

CoffeeScript（编译成 javascript 并在浏览器中运行）：

```
for row in rest
  map = makeMap header,row
  json = JSON.stringify map
  eval "((#{fn})(#{json}))" 
```

Javascript 片段（存储为字符串）：

```
function(map) {
  console.log(map.customer_id);
  $.ajax("http://localhost:3000/data/" + map.customer_id,
         function(data) { console.log(data);});
} 
```

`done()`Jasmine BDD 或其他 javascript 测试框架中的一个实现是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:43:09.550

根据该`$.ajax`函数来自哪个框架，您可能能够将参数传递给它以使 AJAX 同步。

但是，并非所有异步函数都可以选择进入异步模式。在这种情况下，唯一的方法是让他们调用回调（硬编码或作为参数）。不幸的是，您需要将该 for 循环重写为递归函数（或使用为您执行此操作的异步库）。

```
var i = 0;
function processItems(i){
   if(i >= rest.length){
      return whatToDoNext();
   }else{
      runMyAsyncCode(function(){
         proccessItems(i+1);
      })
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:28:19.557

通常，您无法轻松地使 javascript 同步运行。但是，您可以使其*看起来*同步运行，例如，使用 Promise（代表函数返回的最终值的对象）。[您可以在jquery docs](http://api.jquery.com/category/deferred-object/)中阅读承诺（在 jquery 中称为延迟对象）。

这就是使用 jquery 延迟对象的 ajax 处理程序的样子（注意`done`函数的使用）

```
$.ajax("http://localhost:3000/data/" + map.customer_id).done(function(data) {
    console.log(data);});
}); 
```

# javascript - 如何在 dom（使用 jQuery）上选择具有以“created”结尾的某些数据属性的元素？

> ID：15254763
> 
> 赞同：0
> 
> 时间：2013-03-06T18:07:28.380
> 
> 标签：javascript, jquery, attributes

我在一个项目中拥有所有元素，这些元素正在与数据属性一起传输，因此 javascript 可以知道该做什么。

但是我有一个问题，应用程序的一部分必须获取所有创建的变量来比较时间，并且我将它们保存为（**data-product-created**、**data-category-created**、**data-link-created**等... ）。如果我不得不手动将它们放在 jQuery 选择器上，那将是一个巨大的头痛......

**jQuery**是否有一些方法来搜索自定义数据**属性**的存在？

像：`element[data-(.*)-created]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:39:50.307

您可以创建一个低级 Javascript 方法来循环遍历元素并提取它们创建的值：

```
var getCreateds = function($els) {
    var returnSet = [];
    $els.each(function(i, el){
        var elDict = {'el': el};
        $.each(el.attributes, function(i, attr){
            var m = attr.name.match(/data\-(.*?)\-created/);
            if (m) elDict[m[1]] = attr.value;
        });
        returnSet.push(elDict);
    });
    return returnSet;
}; 
```

## [看演示](http://jsfiddle.net/ZjVaD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:39:25.533

根据`mVChr`答案（谢谢），我用一个简单、更好和干净的代码重写了代码：

```
jQuery('div').filter(function(){
  for( var i in this.attributes ){
    if(typeof this.attributes[i] !== 'object') continue;
    if(this.attributes[i].name.match(/data\-(.*?)\-created/)) return true;
  }
  return false;
}) 
```

变化：

```
+ Verifying attribute type... some attributes are browser internal functions or callbacks.
~ Using filter handler from jQuery, its better and cleaner way.
~ Using for instead of $.each, faster indeed. 
```

# linux - 是否可以通过用括号调用它来在shell中执行一个函数

> ID：15254764
> 
> 赞同：-2
> 
> 时间：2013-03-06T18:07:29.103
> 
> 标签：linux, bash, shell

如何通过用括号调用它来在shell中执行一个函数，即：

```
my_func()
{
    echo $0
    echo $1
} 

my_func("aa","bb") 
```

不是那样的

```
my_func "aa" "bb" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:30:58.937

你不能。为什么要将其他语言的语法应用于 shell？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:41:37.307

在大多数 shell 中，您不能包含 bash，`(`并且`)`除了空`()`表单之外，它是保留的控制运算符。您可以转义或引用，但这几乎没有用。

您可以稍微滥用`{` `}` *大括号扩展*：

```
my_func {1,2,3} 
```

因为`{1,2,3}`扩展为“1 2 3”，尽管它也有其他功能。您必须确保其中没有（未引用的）空格，`{1, 2, 3}`并按原样处理。文字逗号必须被引用或`\`转义。你需要在函数名后面加一个空格，否则它会做一些完全不同的事情。

或者，如果您真的想玩游戏，也可能会被滥用，这与(aka )`[` `]`的工作方式并不完全不同，但会牺牲非平凡的解析。这是一个可以通过但不完美的例子，它说明了原因：`[``test`

```
function my_func () 
{
   local IFS=" ,"
   set -- $*; 

   for ((ff=1; ff<=$#; ff++)); do
         printf "\$%i=<%s>  " $ff "${!ff}"
    done
    printf "\n"
}

my_func [ "a",b,c ]
my_func [ 1, 2 ,3 ] 
```

`bash`不是`tcl`... 如果您尝试编写一个可作为两种或多种不同语言有效的程序，则应改为搜索[多语言](http://en.wikipedia.org/wiki/Polyglot_%28computing%29)程序。

我仍在研究[用](http://c-faq.com/cpp/slm.html)[and](http://c-faq.com/cpp/slm.html)[替换`{`and`}``BEGIN``END`](http://c-faq.com/cpp/slm.html)的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:21:06.130

> 如何通过用括号调用它来在 shell 中执行函数？

尝试这个：

```
my_func "(" ")" 
```

# jquery - 无法从单击事件中获取标题属性

> ID：15254767
> 
> 赞同：0
> 
> 时间：2013-03-06T18:07:33.757
> 
> 标签：jquery

单击某个链接时，我无法获取标题属性，这是我尝试过的：

**这是html：**

```
<li><a href="#" class="add_to_menu" title="Förderverein">+</a> test 1</li>
<li><a href="#" class="add_to_menu" title="Förderverein">+</a> test 2</li>
<li><a href="#" class="add_to_menu" title="Förderverein">+</a> test 3</li> 
```

**这是jquery脚本：**

```
$(document).ready(function() {
    $('.add_to_menu').click(function() {
        alert(this.attr("title"));
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:08:38.427

你用`this`错了。您应该将其包装为 jQuery 对象，即`$(this)`：

```
$(document).ready(function() {
    $('.add_to_menu').click(function() {
        alert($(this).attr("title"));
    });
}); 
```

或者，您是否真的倾向于按`this`原样使用：

```
$(document).ready(function() {
    $('.add_to_menu').click(function() {
        var this = $(this);
        alert(this.attr("title"));
    });
}); 
```

# php - 将画布数据保存到服务器并仅检索一块？

> ID：15254769
> 
> 赞同：0
> 
> 时间：2013-03-06T18:07:51.747
> 
> 标签：php, mysql, html5-canvas

我正在创作一件艺术品，我一直在互联网上搜索和梳理以寻求帮助，确实有很多，但我真的不明白。

大约一个月前，我开始研究 html 和 CSS，并被迫在大约 2 周内为这篇文章学习点点滴滴的 Javascript……我现在知道我需要 PHP，这是我遇到最多问题的地方。这是问题所在。

我有一个 html5 画布，用户可以在其中涂鸦。我希望他/她能够按下按钮并将他/她的图像发送到服务器（我假设使用 PHP），并且图像会一直保存到另一个人打开涂鸦网页。我希望它是一个集体艺术作品：有人画了一些东西，提交它，其他人进入页面，另一个人的“艺术”已经在那里建立起来。理想情况下，这将是随机的，但目前我很高兴将图像发送到服务器并在下次打开时将其放回页面上。

我知道我必须使用带有隐藏字段的表单？这是我发现的，但老实说，我不知道这意味着什么以及如何去做。我找到了这段代码：

```
<form action="Drawing.html" method="post">
<input type="hidden" id="formImageFileName" name="imageFileName">
<input type="hidden" id="sketch" name="imageData" value="" />
<input type="submit" class="btn btn-primary" id="saveImageButton" value="Save Image..." />
</form>

<script language="javascript" type="text/javascript">
document.getElementById('my_hidden').value = canvas.toDataURL('image/png');
document.forms["form1"].submit();
</script>
<?php 
$link = mysql_connect('localhost', 'root', 'root');
$upload_dir = somehow_get_upload_dir();
$img = $_POST['my_hidden'];
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);
$file = $upload_dir."image_name.png";
$success = file_put_contents($file, $data);
header('Location: '.$_POST['return_url']);
?> 
```

当点击按钮时，图像消失。我不知道它是否会去任何地方，或者它是否只是被擦掉了？我试图独自完成，但我决定需要帮助。我是 PHP 的大新手，就像真正的大新手一样。我不知道其中有什么作用，如果有人用简单的术语向我解释它以及如何进行，我将不胜感激。我做了一些阅读，我知道为什么有 $ 以及 POST 是什么，我阅读了 mysql，但我不知道如何访问服务器或检索数据或任何东西。

拜托，我已经走到了尽头。提前感谢任何感到慷慨的人。

PS：请不要讽刺评论，如果我遗漏了什么，请告诉我。我已经因为不知道如何做到这一点而感到难过，并且不想因为忘记包含某些内容而感到更糟。请不要评论有多少地方可以找到我正在寻找的东西，如果我来到这里，那是因为我需要认真的帮助，而这些地方并没有因为我的时间限制而减少它。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:10:19.733

您需要*大量*知识，不仅包括编码，还包括配置 PHP 服务器和 MySQL 服务器。这么多信息可能太多了，无法在这里回答。

这是一个*非常概括*的列表，列出了您必须实现的目标：

*   配置您的 PHP 服务器的 php.ini 以允许上传。
*   配置 MySQL 和 PHP 以协同工作。
*   创建一个 MySQL 数据库和表来存储您的图像。
*   创建 .php 文件以允许用户上传文件或使用 XMLHttpRequest() 为他们进行上传。
*   添加接受 POST 或 FILE 提交并将图像放入数据库的脚本。
*   创建 .php 文件以允许用户从数据库中“签出”文件。
*   添加从数据库中选择正确图像并将其下载给用户的脚本。
*   如果允许多个用户同时签出同一个文件，则在 MySQL 上处理并发问题。

我读到你是 html、webservers 和数据库的新手，所以我希望这个列表目前对你来说是具有挑战性的。所以这是我的建议：注册 Lynda.com 免费试用会员。他们有非常好的网络研讨会处理网络主题。我不隶属于 Lynda.com（这里没有推销！），但我确实发现他们的研讨会是一个很好的学习工具。

特别是，请观看名为“PHP 与 MySQL 超越基础”的教程中的这些章节：

*   照片库项目设置
*   上传文件
*   摄影课

祝你好运，继续编码......通过坚持和一些学习，你的作品将融合在一起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:28:01.997

当您按下提交时，您的客户端（浏览器）将图像上传到服务器，**但**现在期待页面加载。您必须从服务器重新发送带有画布及其内容的页面。

# iphone - 如何在 iOS 上实现我的 android 算法？

> ID：15254770
> 
> 赞同：0
> 
> 时间：2013-03-06T18:07:54.560
> 
> 标签：iphone, ios, ipad

我有一个以这种方式工作的 android 应用程序：

1.  用户使用我的特定 URL 读取 QR 码
2.  如果安装了应用程序，它会拦截此 URL 并以某种方式处理它。
3.  如果未安装应用程序，标准浏览器会打开此 URL，并在应用程序页面上引导 Google Play。
4.  当用户第一次安装和运行应用程序时，它会读取浏览器的历史记录并查找我的 URL。
5.  如果应用程序在浏览器的历史记录中找到 URL，则它会再次处理此 URL。

是否可以在 iPhone/iPad 上实现此行为？我想这里的主要功能是读取浏览器历史记录和拦截 http URL。

如果这是不可能的，你将如何在 iOS 上实现这个东西？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:23:42.563

您可以使用以下形式的自定义应用程序 URL：myApp://... 如果存在，iOS 将自动启动应用程序。处理“未安装”案例的逻辑~~必须在二维码扫描应用程序中。~~可以通过使用 iOS 自定义 URL 方案的转发链接由扫描的网站处理（这可能对使用情况统计有用）。

[有关实施自定义 URL 的其他信息...](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

# android - Android SMS Delivery Broadcast 接收器在模拟器中不起作用

> ID：15254775
> 
> 赞同：4
> 
> 时间：2013-03-06T18:08:26.067
> 
> 标签：android, sms, broadcastreceiver, android-service, android-pendingintent

我正在创建一个具有发送短信模块的应用程序。我正在使用 2 个广播接收器和待处理的意图，一个用于发送确认的短信，另一个用于发送.. 发送的短信广播接收器工作正常，但没有发送。

我在服务中使用以下代码。

```
 PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
                new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

            //---when the SMS has been sent--- is working alright
            registerReceiver(new BroadcastReceiver()
            {
                public void onReceive(Context arg0, Intent arg1)
                {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", 
                                    Toast.LENGTH_SHORT).show();

                            break;
                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Generic failure", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null PDU", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                    unregisterReceiver(this);
                }
            }, new IntentFilter(SENT));

            //---when the SMS has been delivered--- this part is not working 
            registerReceiver(new BroadcastReceiver()
            {

                @Override
                public void onReceive(Context arg0, Intent arg1) 
                {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(), "SMS not delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;           

                        default :
                            Toast.makeText(getBaseContext(), "Unable to generate delivery Report", 
                                    Toast.LENGTH_SHORT).show();
                    }
                    unregisterReceiver(this);
                }
            }, new IntentFilter(DELIVERED));        

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, msg, sentPI, deliveredPI); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T07:44:02.840

在网络服务提供商上发送的短信意味着，您可以获得送达通知。代码在设备上运行，但在模拟器中它不包含任何服务提供商。这样它就不会在模拟器上显示送达通知。

# javascript - 有什么影响 $.support.cors = true; 关于非跨浏览器 ajax 调用

> ID：15254777
> 
> 赞同：1
> 
> 时间：2013-03-06T18:08:31.310
> 
> 标签：javascript, jquery, ajax, cross-domain

全部，

我需要进行跨域 AJAX 请求，因此添加了“$.support.cors = true;” 在我的 ajax 请求之前行。

但是对于非跨域调用，我的 ajax 似乎没有命中。

这是否“$.support.cors = true;” 对非跨浏览器调用有影响还是我看错了什么？

任何帮助深表感谢！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:44:59.007

正如其他人所说，默认情况下，jQuery 应该适当地检测 CORS 请求。听起来你不应该设置`$.support.cors`. 您可能遇到的问题，如果没有设置，可能是以下之一：

*   您要访问的服务器需要允许 CORS：它需要在请求标头中放置`Access-Control-Allow-Origin`具有指定标头的标头，或者，在返回数据时；否则你的浏览器会拒绝它。`Origin``*`

*   [IE8/9 默认不允许 CORS 使用 jQuery](https://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied)，所以你需要使用这个插件：

    [https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)

# php - PHP Pear Mail 不能作为对象工作

> ID：15254780
> 
> 赞同：1
> 
> 时间：2013-03-06T18:08:36.610
> 
> 标签：php, smtp

我创建了一个用于发送电子邮件的类，但是当我集成 Pear 组件时它失败了。

“无法连接到本地主机：25 [SMTP：无法连接套接字：连接被拒绝（代码：-1，响应：）]”

程序版本运行完美，但 OOP 版本不运行。

程序版本模板可以在[这里找到](http://wiki.bitnami.org/Components/PHP#How_to_send_email_via_external_SMTP_account)

这是我的课

```
class Email{

    private $_from;
    private $_to;
    private $_subject;
    private $_body;
    private $_headers;

    # final
    private $_host = "ssl://smtp.gmail.com:465";
    private $_username = "email@mysite.com";
    private $_password = "mypass";

    function __construct()
    {
        require_once("Mail.php");
    }

    public function setup($from,$to,$subject,$body)
    {
        $this->_from    = $from;
        $this->_to      = $to;
        $this->_subject = $subject;
        $this->_body    = $body;

    }
    public function send()
    {
        if(isset($this->_from) && isset($this->_to) && isset($this->_subject) && isset($this->_body))
        {               
            $this->_headers = array ('From' => $this->_from, 'To' => $this->_to,'Subject' => $this->_subject);
            $smtp = Mail::factory('smtp',array ('host' => $_host,
            'auth' => true,
            'username' => $_username,
            'password' => $_password));

            $mail = $smtp->send($this->_to, $this->_headers, $this->_body);

            if (PEAR::isError($mail)) {
              $_POST['mail_error'] = $mail->getMessage(); 
              return false;
            } else {
              return true;
            }
        }
        else
        {
            $_POST['mail_error'] = "missing a required arguement";
            return false;
        }
    }
} 
```

不确定在构造中要求 Mail.php 是否是最佳实践，但这是我发现在此之前修复另一个连接错误的唯一方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:56:15.907

那是因为您在 Mail::factory 调用中使用了 $_host、$_username 和 $_password。我认为您的意思是 $this->_host、$this->_username 和 $this->_password – Colin Morelli

# ios - 带有 NSNumber 的 NSArray 的 NSPredicate（核心数据）

> ID：15254783
> 
> 赞同：0
> 
> 时间：2013-03-06T18:08:44.893
> 
> 标签：ios, objective-c, core-data, nspredicate

我有一个属性为的核心数据实体字段`ID`。我想在所有字段实体中搜索 ID == 1、2 或 3。

如何在不创建长附加字符串的情况下将数组添加到 NSPredicate，例如：

```
NSArray *IDArray = @[@1, @2, @3];

NSMutableString *predicateString = [NSMutableString string];

for (NSNumber *ID in IDArray) {
    [predicateString appendString:[NSString stringWithFormat:@"ID == %@, ID]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:12:40.833

这应该有效：

```
NSArray *IDArray = @[@1, @2, @3];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ID IN %@", IDArray]; 
```

*备注：*您不应该使用字符串格式化函数来组合谓词。采用

```
 [NSCompoundPredicate orPredicateWithSubpredicates:...] 
```

和类似的方法。原因是字符串和谓词有不同的规则如何扩展格式说明符。

# css - 如何制作tab效果，其中li下边框为白色

> ID：15254785
> 
> 赞同：0
> 
> 时间：2013-03-06T18:08:48.687
> 
> 标签：css

正如你在这个小提琴中看到的那样，我正在尝试创建一个标签效果：http: [//jsfiddle.net/kZTUK/](http://jsfiddle.net/kZTUK/)

问题是处于活动状态的 li 需要有一个白色的底部边框，以使其实际上看起来像一个选项卡。

在将 li 保留为块的同时，我无法弄清楚这是如何完成的（出于其他原因，我需要将它们作为 display:block 。）

任何的想法。谢谢，

```
<style>
.item-list {
border-bottom: 1px solid grey;
overflow: hidden;
}

li {
display: block;
float: right;
margin: 0 30px 0 0;
padding: 5px 10px;    
}

li.active {
border:1px solid black; 
border-bottom:none;     
}
</style>

<div class="item-list">
   <ul class="my_ul">
      <li class="first active">one</li>
      <li class="">two</li>
      <li class="">three</li>
      <li class="last">four</li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:15:25.420

在不过多调整代码的情况下，您可以在 .item-list 类中将溢出更改为静态高度。

```
.item-list {
 border-bottom: 1px solid grey;
height: 31px;
}
li {
display: block;
float: right;
margin: 0 30px 0 0;
padding: 5px 10px;
}
li.active {
border:1px solid black; 
border-bottom: 2px solid #fff;
} 
```

[http://jsfiddle.net/HEUqC/12/](http://jsfiddle.net/HEUqC/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:20:06.613

将您的静态高度更改`.item-list`为 30 - 1 = 29px ，以便边框重叠，然后将底部边框设置为白色而不是无。

```
.item-list {
    border-bottom: 1px solid grey;
    height: 29px;
}
li {
    display: block;
    float: right;
    margin: 0 30px 0 0;
    padding: 5px 10px;
}
li.active {
    border:1px solid black;
    border-bottom: 1px solid white;
} 
```

[http://jsfiddle.net/kZTUK/4/](http://jsfiddle.net/kZTUK/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:26:43.793

注意背景颜色：

```
<div class="item-list">
 <ul class="my_ul">
  <li class="first active">one</li>
  <li class="">two</li>
  <li class="">three</li>
  <li class="last">four</li>
 </ul>
</div>

.item-list {
  border-bottom: 1px solid grey;
  height: 31px;
}

li {
  display: block;
  float: right;
  margin: 0 30px 0 0;
  padding: 5px 10px;    
}

li.active {
  border:1px solid black; 
  border-bottom: solid white;
  background-color: white;
} 
```

# android - 如何调试 Android ANR？

> ID：15254788
> 
> 赞同：14
> 
> 时间：2013-03-06T18:08:52.460
> 
> 标签：android, debugging, google-analytics, stack, crash-reports

我的 Android 应用最近在 Google Play 控制台中收到了很多 ANR 报告。由于当我在应用程序中加入 Google Analytics 时就开始发生这种情况，我强烈怀疑是由 Analytics 引起的。

问题是我知道如何使用堆栈跟踪来调试崩溃。但我不确定如何调试 ANR。我猜 ANR 意味着主线程在某处被阻塞。但是如何知道它被阻塞在哪里呢？请参阅下面我最近得到的典型 ANR 之一。如何解释它并开始弄清楚应用程序挂在哪里？

PS：由于使用了 DexGuard 代码混淆器，堆栈中的一些类/方法看起来很奇怪。

ANR 报告：

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 VMWAIT
| group="main" sCount=1 dsCount=0 obj=0x40022198 self=0xcec8
| sysTid=5001 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345006496
| schedstat=( 1265991222 1037628169 649 )
at dalvik.system.DexFile.openDexFile(Native Method)
at dalvik.system.DexFile.<init>(DexFile.java:103)
at dalvik.system.DexFile.loadDex(DexFile.java:142)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at o.Ə$鷭$囃.<clinit>((null):-1)
at o.Ə$櫯.onServiceConnected(:-1)
at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1064)
at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1081)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #3" prio=5 tid=14 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x40624cc0 self=0x27eeb0
| sysTid=5046 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=2499688
| schedstat=( 946046 5981445 3 )
at dalvik.system.NativeStart.run(Native Method)

"Thread-15" prio=5 tid=13 TIMED_WAIT
| group="main" sCount=1 dsCount=0 obj=0x405e2a10 self=0x1c99e0
| sysTid=5020 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1845856
| schedstat=( 41442864 92254646 93 )
at java.lang.Object.wait(Native Method)
- waiting on <0x4050ddb0> (a o.㱽)
at java.lang.Object.wait(Object.java:395)
at o.㱽.run(:723)
at java.lang.Thread.run(Thread.java:1019)

"CookieSyncManager" prio=5 tid=12 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x40575550 self=0x1ca5a0
| sysTid=5019 nice=10 sched=0/0 cgrp=[fopen-error:2] handle=1844760
| schedstat=( 793456 13153076 3 )
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:119)
at android.os.Looper.loop(Looper.java:117)
at android.webkit.WebSyncManager.run(WebSyncManager.java:90)
at android.webkit.CookieSyncManager.run(CookieSyncManager.java:61)
at java.lang.Thread.run(Thread.java:1019)

"WebViewWorkerThread" prio=5 tid=11 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x40572d28 self=0x1cec60
| sysTid=5017 nice=1 sched=0/0 cgrp=[fopen-error:2] handle=1904424
| schedstat=( 21575930 39001463 32 )
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:119)
at android.os.Looper.loop(Looper.java:117)
at android.os.HandlerThread.run(HandlerThread.java:60)

"WebViewCoreThread" prio=5 tid=10 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x405ded38 self=0x1c9300
| sysTid=5016 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1872952
| schedstat=( 205108647 198852533 140 )
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:119)
at android.os.Looper.loop(Looper.java:117)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:685)
at java.lang.Thread.run(Thread.java:1019)

"pool-1-thread-1" prio=5 tid=9 WAIT
| group="main" sCount=1 dsCount=0 obj=0x4050daa0 self=0x1c05b8
| sysTid=5015 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1869904
| schedstat=( 5187987 16571046 6 )
at java.lang.Object.wait(Native Method)
- waiting on <0x4050dc68> (a java.lang.VMThread)
at java.lang.Thread.parkFor(Thread.java:1424)
at java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
at sun.misc.Unsafe.park(Unsafe.java:337)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2016)
at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:411)
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1021)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)

"GAThread" prio=5 tid=8 WAIT
| group="main" sCount=1 dsCount=0 obj=0x405a4518 self=0x1b8e58
| sysTid=5014 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1806224
| schedstat=( 288482667 146301269 277 )
at java.lang.Object.wait(Native Method)
- waiting on <0x405a4798> (a java.lang.VMThread)
at java.lang.Thread.parkFor(Thread.java:1424)
at java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
at sun.misc.Unsafe.park(Unsafe.java:337)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2016)
at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:411)
at o.뛖.run(:518)

"Binder Thread #2" prio=5 tid=7 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x40516ed0 self=0xe4478
| sysTid=5007 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1390912
| schedstat=( 5340576 31036382 32 )
at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=6 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x40515cb0 self=0x1534c8
| sysTid=5006 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=577280
| schedstat=( 10803221 33203131 35 )
at dalvik.system.NativeStart.run(Native Method)

"Compiler" daemon prio=5 tid=5 VMWAIT
| group="system" sCount=1 dsCount=0 obj=0x40511d80 self=0x8cce0
| sysTid=5005 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1146040
| schedstat=( 79406736 76446531 396 )
at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=4 RUNNABLE
| group="system" sCount=0 dsCount=0 obj=0x40511cc0 self=0x117af8
| sysTid=5004 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1145528
| schedstat=( 23651123 21545411 7 )
at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=3 VMWAIT
| group="system" sCount=1 dsCount=0 obj=0x40511c18 self=0x153240
| sysTid=5003 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1389056
| schedstat=( 367523192 416046141 132 )
at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=2 VMWAIT
| group="system" sCount=1 dsCount=0 obj=0x40511b60 self=0xe6980
| sysTid=5002 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=944960
| schedstat=( 52612306 103576660 48 )
at dalvik.system.NativeStart.run(Native Method) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T18:12:30.427

> 但是如何知道它被阻塞在哪里呢？

首先[启用`StrictMode`](http://developer.android.com/reference/android/os/StrictMode.html)并运行您的应用程序。如果您（或 Analytics）正在主应用程序线程上执行磁盘或网络 I/O，您将​​根据您选择的惩罚方式（例如，登录 LogCat）了解它：

```
public void onCreate() {
     if (BuildConfig.DEBUG) {
         StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectAll()
                 .penaltyLog()
                 .build());
     }

     super.onCreate();

     // rest of onCreate() logic here
 } 
```

# javascript - 如何在一组元素上使用 slideToggle？

> ID：15254792
> 
> 赞同：0
> 
> 时间：2013-03-06T18:09:04.560
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery slideToggle() 函数来最小化一组表行。我遇到的问题是，虽然行集被最小化，但动画似乎没有生效。我认为这与我使用 slideToggle 的方式有关，在一组结果而不是父元素上调用它，但我不确定。

我正在使用这段 javascript 和 jquery 来最小化一组行。

```
$('td').on("click", "a.collection-minimize, a.list-minimize", function(event) {                                          
   event.stopPropagation(); 
   // Get the class of the following row
   var minimize_class = $(this).parent().parent().next().attr('class');                                                 
   // trim whitespace
   minimize_class = minimize_class.replace(/^\s\s*/, '').replace(/\s\s*$/, '');                                         
   // Minimize all following rows of the same class.
   $(this).parent().parent().siblings('.' + minimize_class).slideToggle();                                                 
}); 
```

一组示例行：

```
<tr class="collection-original">
    <td>
        <a class="collection-minimize" onclick="return false" href="#">Minimize collection</a>
    </td>
</tr>
<tr class=" collection-original" style="display: table-row;"></tr>                 
<tr class=" collection-original" style="display: table-row;"></tr>
<tr class=" collection-original" style="display: table-row;"></tr>
<tr class=" collection-original" style="display: table-row;"></tr> 
```

可以在此处查看正在使用的实时页面：http: [//iodocs.vky.me/whitehat#Application-API-PUT-Modify-an-application](http://iodocs.vky.me/whitehat#Application-API-PUT-Modify-an-application)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:27:27.903

看到这个：http: [//jsfiddle.net/DEPjD/](http://jsfiddle.net/DEPjD/)

```
 minimize_class = minimize_class.replace(/^\s\s*/, '').replace(/\s\s*$/, '').trim(); 
```

或者：

```
minimize_class = minimize_class.replace(/^\s\s*/, '').replace(/\s\s*$/, '').replace(/ /g, ''); 
```

# javascript - 如何在 jsfiddle 中创建一个面板？

> ID：15254801
> 
> 赞同：0
> 
> 时间：2013-03-06T18:09:48.030
> 
> 标签：javascript, extjs, extjs4, jsfiddle

```
var layout = Ext.create('Ext.panel.Panel', {
    //renderTo: 'layout',
    width: 500,
    height: 500,
    //title: 'Border Layout', //no title will be blank
    layout: 'border',
    items: [{
            xtype: 'gmappanel',
            id : 'mygooglemap',
            gmapType: 'map',
            zoomLevel: 7,
            mapConfOpts: ['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
            mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],  
            setCenter: {
                lat: 3.951941,
                lng: 102.052002,
            }
        }],
    renderTo: Ext.getBody() //get the body and display Layout at there
}); 
```

我有`renderto`Body 但仍然无法显示任何内容？

这是我的 jsfiddle [http://jsfiddle.net/anthor/Y4jP4/的链接](http://jsfiddle.net/anthor/Y4jP4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:36:30.373

小步秦野，小步。

修改了您的代码以呈现：http `panel`: [//jsfiddle.net/dbrin/tayua/](http://jsfiddle.net/dbrin/tayua/)

您在小提琴中选择了 extjs 库，然后通过资源链接再次包含该库。相反，您需要包含 css 资源。

# ssas - SSAS：链接来自另一个数据库的时间维度

> ID：15254805
> 
> 赞同：0
> 
> 时间：2013-03-06T18:10:02.087
> 
> 标签：ssas, foreign-key-relationship, dimension

在一个多维数据集中，我的一个事实表中有一个复合键，它使用 DateKey + TransactionKey + MemberKey。DateKey 的数据类型为整数，看起来像 20130306。这个多维数据集建立在服务器 a 上；dw 实例 x。

在另一个链接服务器（服务器 b）上，我有 dw 实例 y，它具有我们组织中常用的时间维度。其上的 id 值与服务器 a 上的 Datekey 的数据类型/格式相同；dw 实例 x。

我想将时间维度链接到这个多维数据集。我怎样才能做到这一点？

顺便说一句，如果我要对这种关系进行建模，我将如何处理时间表与事实表之间的外键关系——因为 datekey 只是部分 fk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:54:17.470

你可以

*   通过链接服务器访问服务器 A 并在进入多维数据集之前将两个表绑定在数据库中
*   创建第二个数据源并在您的多维数据集数据源视图中绑定事实/维度

要将两列联系起来，您需要根据 DateKey 的前 8 个字符创建一列。您可以使用 Left(DateKey, 8) 作为命名查询（替换多维数据集中的表）或作为数据库中的附加列（临时或永久，取决于卷）来执行此操作。

# html - HTML/CSS 错误的标题和丢失的图像

> ID：15254806
> 
> 赞同：0
> 
> 时间：2013-03-06T18:10:02.463
> 
> 标签：html, css, image, header

我在我正在处理的网站上放错了一些标题，并且应该显示在每个标题下方的图像没有显示。你可以在这里看到我在说什么：

![](../Images/afafdbea48bfdb7d6044214c461bc69b.png)

这是我的 HTML：

```
<!-- main-content -->
<div id="main-content">    
    <h1> Check out all our DEADicated sites: </h1>
    <div class="sites">
        <a href="http://www.thedeadicated.tumblr.com" target="_blank">
        <img src="images/sites/tumblr.jpg" width="215" height="150" alt="Tumblr"/></a>
        <p> Tumblr </p>
    </div>
    <div class="sites">
        <a href="http://www.twitter.com/thedeadicated" target="_blank">
        <img src="images/sites/twitter.jpg" width="215" height="150" alt="Twitter"/></a>
        <p> Twitter </p>
    </div>
    <div class="sites">     
        <a href="http://www.youtube.com/user/DeadicatedRepository" target="_blank">
        <img src="images/sites/youtube.jpg" width="215" height="150" alt="YouTube"/></a>
        <p> YouTube </p>
     </div>

    <h2> To join TheDEADicated, click <a href="http://musichype.com/artists/dead-sara" target="_blank">HERE</a>! </h2>
    <h2> To get your own DEADicated wristband, click <a href="http://store.cinderblock.com/the-deadicated-rubber-bracelet.html" target="_blank">HERE</a>! </h2>
    <h2> Can't get enough of Dead Sara?! <a href="http://www.facebook.com/pages/Dead-Sara-Addiction-Treatment-facility/337823746314667?group_id=0" target="_blank">Dead Sara Addiction Treatment Facility</a> </h2>
    <h2> Email us at: TheDEADicated@TheDEADicated.org </h2>

</div> <!-- close main-content --> 
```

这是主要内容和标题的 CSS 代码：

```
#main-content{
    padding: 50px 50px 30px 50px;
    background: #fff url('images/shadow.png') repeat-x;
    min-height: 800px;
}

#main-content h2{
    margin-top: 30px;
    padding-bottom: 8px;
    background: url('images/ink-line.png') no-repeat left bottom;
    clear: both;
} 
```

任何形式的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:29:59.767

我不能确切地知道这里发生了什么，但是猜测标题上方的元素看起来如何，我会说你有一个浮动问题。尝试从 h2 中删除 "clear: both" 并添加 "float: left; width: 100%;" 在它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:39:37.517

评论是正确的，您并不清楚您应该看到什么但没有，但如果我正确解释您的意思是“我的标题没有显示我期望的边距和填充或背景图像”。

我将再一次充满信心地提出一个可能的解决方案。我懂了

```
</div> <!-- close main-content --> 
```

在您的 html 末尾，但我看不到`<div id="main-content>`任何地方。它应该在页面顶部，或者在 h2s 块之前，这取决于您希望结果是什么。尝试`<div id="main-content>`在第一个 h2 标记之前添加，看看是否可以为您解决问题。

**编辑：**我现在更清楚地看到了您的问题，但是如果没有实时 url 来检查，这很难解决。这可能是一个浮动问题，但 clear 应该解决这个问题，除非它被覆盖，所以你可以更改为：

`clear: both !important;`

可能是显示问题，所以尝试添加：

`h2 { display: block !important; }`

如果有一个实时网址肯定会有所帮助。最后的想法是确保整个页面 html 中的每个标签都正确打开和关闭。根据我的经验，冗余或未关闭的 div 可能会导致此类问题。

# javascript - 指定 src="" 在 是没有 .mp3 扩展名的 mp3 文件吗？

> ID：15254808
> 
> 赞同：2
> 
> 时间：2013-03-06T18:10:07.637
> 
> 标签：javascript, jquery, html, jquery-plugins, html5-audio

我需要一种方法来指定类似的东西

```
<audio src="http://somesite.com/track/377374"></audio> 
```

有一个 mp3 文件作为源。我无法在 url 末尾使用 .mp3 扩展名，所以我需要其他方法来实现这一点。我正在使用自定义播放器 jQuery 插件，如果它无法确定音频标签中指定的文件格式，它会退回到旧的浏览器版本。我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:32:23.167

有一个检查文件扩展名并尝试匹配的功能

```
 canPlayType   = function( file )
    {
        var audioElement = document.createElement( 'audio' );
        return !!( audioElement.canPlayType && 
                   audioElement.canPlayType( 'audio/' + file.split( '.' ).pop().toLowerCase() + ';' ).replace( /no/, '' ) );
    }; 
```

如果让我们说这个函数是返回 true 或被更改为：

```
 canPlayType   = function( type )// type = mp3
    {
        var audioElement = document.createElement( 'audio' );
        return !!( audioElement.canPlayType && 
                   audioElement.canPlayType( 'audio/' + type.toLowerCase() + ';' ).replace( /no/, '' ) );
    }; 
```

然后插件第 75 行的更新代码将假定文件是 mp3 并像使用 src 时那样做......源元素仍然可以以传统方式使用。

```
else if( canPlayType( 'mp3' ) ) isSupport = true; // here change this 
```

对于要检测的源类型（如@ruakh 建议的那样，需要（再次）编辑代码：

```
if( typeof audioFile === 'undefined' )
{
    $this.find( 'source' ).each( function()
    {
        audioFile = $( this ).attr( 'src' );
        var sourceType = $( this ).attr( 'type' );
        if( typeof audioFile !== 'undefined' && 
                        typeof sourceType !== 'undefined' && 
                        canPlayType( sourceType.split( '/' ).pop().toLowerCase()  ) )
        {
            isSupport = true;
            return false;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:15:47.667

`src="..."`您可以嵌套一个`<source>`元素，而不是使用。这将让您指示 MIME 类型。

对于您的示例：

```
<audio>
  <source src="http://somesite.com/track/377374" type="audio/mpeg3" />
</audio> 
```

（免责声明：我还没有测试过它的支持范围有多广，或者它是否真的解决了你在使用 jQuery 插件时遇到的问题。我只是基于[MDN 文档](https://developer.mozilla.org/en-US/docs/HTML/Element/audio)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:15:28.870

这是我尝试在这里发挥创意的第一个想法，如果您只需要在末尾添加 .mp3 而不会破坏页面链接，您可以使用哈希标签的查询字符串，例如

如果您可以修改 url，那么`<audio src="http://somesite.com/track/377374?i=.mp3"></audio>`将绕过插件并仍然允许您使用您的 url，而无需具体说明文件类型。

但是，当然，如果您不想在最后显示 .mp3，那么请放弃这个想法。

# c - 分配给类型时不兼容的类型

> ID：15254814
> 
> 赞同：-2
> 
> 时间：2013-03-06T18:10:19.370
> 
> 标签：c

我正在尝试创建一个表，并且表的条目属于结构类型。我收到错误“从类型'TableRow'分配给类型'SortTableRows'时不兼容的类型”。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct TableRow
{
    int  startingValue;
    int entries[100];
}TableRow;

typedef TableRow SortTableRows[20]; //Table Containing entries of type TableRow

SortTableRows* SortTableRowsPtr;

int main()
{

    TableRow *tableRow;
    tableRow = malloc(sizeof(TableRow));
    tableRow = NULL;
    SortTableRowsPtr[2]=*tableRow; //Error
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:15:29.760

我认为您的意思是使用`(*SortTableRowsPtr)[2]`，即分配给数组中类型的第三个数组`TableRow`条目`SortTableRows`。

或者应该`SortTableRowsPtr`是一个包含 20 个指针的数组`TableRow`？

```
typedef TableRow (*SortTableRows)[20]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:31:45.200

下面的呢？在哪里将 tableRow 分配给 SortTableRows 数组中的第三行。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct TableRow
{
    int  startingValue;
    int entries[100];
}TableRow_t;

int main()
{

    TableRow_t SortTableRows[20];
    TableRow_t *tableRow = NULL;

    /* Put some data into the 3rd row */
    SortTableRows[2].startingValue = 2;
    for (i = 0; i < 100; ++i) {
            SortTableRows[2].entries[i] = i;
    }

    tableRow = &(SortTableRows[2]);

    printf("%d: %d, %d, %d\n", 
                    tableRow->startingValue,
                    tableRow->entries[0],
                    tableRow->entries[1],
                    tableRow->entries[2]);

    return 0;
} 
```

# c# - c# 无头浏览器，带有对爬虫的 javascript 支持

> ID：15254817
> 
> 赞同：9
> 
> 时间：2013-03-06T18:10:32.710
> 
> 标签：c#, .net, webclient, headless-browser

任何人都可以建议支持 cookie 和自动执行 javascript 的 .NET 无头浏览器吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-15T14:13:27.543

[Selenium+HtmlUnitDriver/GhostDriver](http://www.seleniumhq.org/download/)正是您正在寻找的。过于简单化，Selenium 是使用各种浏览器实现自动化目的的库——测试、抓取、任务自动化。

您可以使用不同的 WebDriver 类来操作实际的浏览器。[HtmlUnitDriver](https://code.google.com/p/selenium/wiki/HtmlUnitDriver)是一个无头的。[GhostDriver](https://github.com/detro/ghostdriver)是 PhantomJS 的 WebDriver，因此您可以编写 C#，而实际上 PhantomJS 将完成繁重的工作。

[来自 Firefox 的Selenium 文档](http://docs.seleniumhq.org/docs/03_webdriver.jsp)的代码片段，但使用 GhostDriver (PhantomJS) 或 HtmlUnitDriver 的代码几乎相同。

```
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;

class GoogleSuggest
{
    static void Main(string[] args)
    {
        // driver initialization varies across different drivers
        // but they all support parameter-less constructors
        IWebDriver driver = new FirefoxDriver();
        driver.Navigate().GoToUrl("http://www.google.com/");

        IWebElement query = driver.FindElement(By.Name("q"));
        query.SendKeys("Cheese");
        query.Submit();

        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        wait.Until((d) => { return d.Title.ToLower().StartsWith("cheese"); });

        System.Console.WriteLine("Page title is: " + driver.Title);

        driver.Quit();
    }
} 
```

如果您在 Windows 机器上运行它，您可以使用实际的 Firefox/Chrome 驱动程序，因为它将打开一个实际的浏览器窗口，该窗口将按照您在 C# 中编程的方式运行。HtmlUnitDriver 是最轻量和最快速的。

我已使用[Mono](http://www.mono-project.com/)在 Linux 上成功运行 Selenium for C# (FirefoxDriver) 。我想 HtmlUnitDriver 也可以像其他人一样工作，所以如果你需要速度 - 我建议你选择 Mono（你可以在 Windows 上使用 Visual Studio 开发、测试和编译，没问题）+ Selenium HtmlUnitDriver 在没有桌面的 Linux 主机上运行.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T18:19:53.583

我不知道基于 .NET 的无头浏览器，但总是有[PhantomJS](http://phantomjs.org/)，它是 C/C++，它在帮助使用 QUnit 对 JS 进行单元测试时效果很好。

这里还有另一个可能对您有所帮助的相关问题 - [Headless browser for C# (.NET)?](https://stackoverflow.com/questions/10161413/headless-browser-for-c-sharp-net)

# javascript - 我应该如何为多行 html 插入格式化 jQuery？

> ID：15254824
> 
> 赞同：0
> 
> 时间：2013-03-06T18:10:52.650
> 
> 标签：javascript, jquery

我收到一个错误，除非我将所有 html 放在一行上，我不想这样做。

```
$(this).closest('tr').after(
    '<tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>'
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:21:57.380

```
$(this).closest('tr').after(
    '<tr> \
        <td></td> \
        <td></td> \
        <td></td> \
        <td></td> \
        <td></td> \
        <td></td> \
        <td></td> \
        <td></td> \
    </tr>'
); 
```

# php - PHP 4 代码在 php 5 上给出错误

> ID：15254825
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:10:59.493
> 
> 标签：php, diff, php4

我有 PHP 4 代码来检查两个文件的差异，这在具有 PHP 4 版本的旧服务器上运行良好，但在新服务器上我遇到了错误。例如：

> `$maxlen`没有定义

并且功能在新服务器上不起作用。任何人都知道如何为最近的 PHP 版本更改这个？

```
 function diff($old, $new){ 
            foreach($old as $oindex => $ovalue){ 
                    $nkeys = array_keys($new, $ovalue); 
                    foreach($nkeys as $nindex){ 
                            $matrix[$oindex][$nindex] = isset($matrix[$oindex - 1][$nindex - 1]) ? 
                                    $matrix[$oindex - 1][$nindex - 1] + 1 : 1; 
                            if($matrix[$oindex][$nindex] > $maxlen){ 
                                    $maxlen = $matrix[$oindex][$nindex]; 
                                    $omax = $oindex + 1 - $maxlen; 
                                    $nmax = $nindex + 1 - $maxlen; 
                            } 
                    }        
            } 
            if($maxlen == 0) return array(array('d'=>$old, 'i'=>$new)); 
            return array_merge( 
                    diff(array_slice($old, 0, $omax), array_slice($new, 0, $nmax)), 
                    array_slice($new, $nmax, $maxlen), 
                    diff(array_slice($old, $omax + $maxlen), array_slice($new, $nmax + $maxlen))); 
    } 

    function htmlDiff($old, $new){ 
    $preg="/[\s,]+/";
        $old=str_replace(">","> ",$old);
        $new=str_replace(">","> ",$new);
        $old=str_replace("<"," <",$old);
        $new=str_replace("<"," <",$new);

        $diff = diff(preg_split($preg, $old),preg_split($preg, $new)); 
        foreach($diff as $k){ 
        if(is_array($k)) 
            $ret .= (!empty($k['d'])?"<div style='BACKGROUND-COLOR: red'>".implode(' ',$k['d'])."</div> ":''). 
            (!empty($k['i'])?"<div style='BACKGROUND-COLOR: yellow'>".implode(' ',$k['i'])."</div> ":''); 
            else $ret .= $k . ' '; 
        } 
        return $ret; 
    } 
    function creatediff($oldurl,$newurl,$diffurl){ 
        $sold= file_get_contents($oldurl);
        $snew= file_get_contents($newurl);
        $diff=htmlDiff($sold,$snew);
        $diff=preg_replace('#(href|src)="([^:"]*)("|(?:(?:%20|\s|\+)[^"]*"))#','$1="'.$newurl.'/$2"',$diff);
        file_put_contents($diffurl,$diff);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:20:02.307

这不是由于版本差异，而是错误的代码。您可能已经`error_reporting`关闭/关闭了之前的安装，这可能是您没有看到它的原因。回到您的 PHP4 环境，设置`error_reporting`为`E_ALL`，您可能会看到大部分相同的警告。

因为仅在满足一个特定条件`$maxlen`时才定义，因此在其他情况下永远不会定义并生成警告。`if`您可以通过`$maxlen`在函数顶部定义或`isset()`在尝试引用变量之前使用来避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:20:22.333

您的循环包含：

```
if($matrix[$oindex][$nindex] > $maxlen) 
```

但是第一次通过循环，`$maxlen`没有设置任何东西，所以这个比较会产生一个警告（不是错误）。

您应该`$maxlen`在循环之前进行初始化，或者将其更改为：

```
if (!isset($maxlen) || $matrix[$oindex][$nindex] > $maxlen) 
```

另一个问题是函数中没有`$matrix`数组。如果这是一个全局变量，您需要：

```
global $matrix; 
```

在函数的开头。

# .htaccess - .htaccess 从非 www 重定向到 www，但页面有强制异常

> ID：15254828
> 
> 赞同：0
> 
> 时间：2013-03-06T18:11:04.643
> 
> 标签：.htaccess, redirect, web

我正在尝试将所有访问者从非 www 重定向到 www，目前通过

```
RewriteEngine On
RewriteCond %{http_host} ^mysite.com
RewriteRule ^(.*) http://www.mysite.com/$1 [R=301,L] 
```

但是希望将特定页面从 www 重定向到非 www 的强制异常...

是`RewriteRule ^/?$ exception.html [L]`唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:17:02.083

好吧，如果您想阻止非 www 页面重定向，则必须在重定向之前设置重写规则。

选项 [L] 将阻止检查下一个规则。

```
RewriteEngine On 

RewriteCond %{http_host} ^mysite.com 
RewriteRule ^exception\.html$ exception.html [L]

RewriteCond %{http_host} ^mysite.com 
RewriteRule ^(.*) http://www.mysite.com/$1 [R=301,L] 
```

我希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:28:51.827

试试这个：

## 重定向 www.mysite.com/exception.html -> mysite.com/exception.html（可选）

如果您还想将 www.mysite.com/exception.html 重定向到 mysite.com/exception.html，请仅添加此 RewriteRule。

如果您只是希望 exception.html 成为将 mysite.com 重定向到 www.mysite.com 的例外，那么您不需要此规则。

```
# Redirects www.mysite.com/exception.html to mysite.com/exception.html
RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteRule ^exception.html$ http://%1/exception.html [R] 
```

## 重定向 mysite.com -> www.mysite.com

```
# Redirects mysite.com to www.mysite.com. We must add a condition to avoid an infinite redirect loop with exception.html
RewriteCond %{HTTP_HOST} ^(mysite\.com) 
RewriteCond %{REQUEST_URI} !^exception.html$
RewriteRule (.*) http://www.%1/$1 [R=301,L] 
```

# android - 如何为两个飞溅活动继续相同的背景声音

> ID：15254832
> 
> 赞同：0
> 
> 时间：2013-03-06T18:11:17.413
> 
> 标签：android

我的 android 应用程序有两个启动画面。第一个屏幕显示公司名称 2 秒，然后屏幕显示项目名称作为第二个启动屏幕 5 秒。我想播放一个单一的声音，因为应用程序将启动，直到第二次飞溅结束，即持续 7 秒。我怎么能做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:24:30.143

您可以只使用一个初始屏幕并以所需的时间间隔更改背景并同时播放您的声音文件。

```
 ImageView splashImageView = (ImageView) findViewById(R.id.YourFirstSplash);
//after 2seconds call this method:
    splashImageView.setBackgroundResource(R.drawable.YourSecondSplash);
//after 5seconds call method to close the splash screen
finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:24:44.687

您可以启动一个服务以在后台播放音乐，以便它将在 2 个初始屏幕中连续播放，或者将 2 个初始屏幕组合成一个活动并在该屏幕上运行音乐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:25:01.410

尝试不更改活动，只需使用更改活动的布局

```
super.onCreate(savedInstanceState);

setContentView(R.layout.first_screen);
// Provide 2 Sec of wait

setContentView(R.layout.sec_screen)
//provide 5 sec of wait 
```

2 秒后。这将改变视图但是您的活动保持不变并且您想要播放的音乐对其没有影响。

# html - HTML/CSS 内联块在 div 中没有浮动 div

> ID：15254842
> 
> 赞同：0
> 
> 时间：2013-03-06T18:11:34.503
> 
> 标签：html, css-float, displaytag, css

我在一个 DIV 中有 3 个 DIV。这些盒子将有一个图像。目前它们是未来的图像占位符。

我想用`display: inline-block;`它们排成一行。由于某种原因，它们仍然是垂直的而不是水平的。我不想使用`float`，因为我觉得 float 应该在其他地方使用。

HTML：

```
<div class="quickboxes">
  <div id="box1"><img name="" src="" width="75" height="75" alt="">1</div>
  <div id="box2"><img name="" src="" width="75" height="75" alt="">2</div>
  <div id="box3"><img name="" src="" width="75" height="75" alt="">3</div>
</div> 
```

CSS：

```
.quickboxes {
    display: inline-block;
}

#box1 {
    width: auto;
}

#box2 {
    width: auto;
}

#box3 {
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:13:45.307

显示：内联块；需要在图像 div 的 css 中，而不是包含 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:14:03.480

添加规则：

```
#box1, #box2,#box3 {
display:inline-block;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/TBpXW/)**

为了使这些框成行，您还必须在它们上设置 inline-block 属性，而不仅仅是父容器（无论如何您可能不需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:25:04.927

避免使用的另一种方法`inline-block`是使用浮点数。将它们浮动到左侧并清除每个`div`s 中的浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T06:58:35.390

如果您在两者中都包含 inline-block 会更好，如下所示：

```
.quickboxes {
    display: inline-block;
}
#box1, #box2,#box3 {
display:inline-block;
} 
```

并将这些盒子居中

```
.quickboxes {
    display: inline-block;
position: relative;
left: -50%; /*- is important for outer div*/
}
#box1,#boc2,#box3{
display: inline-block;
position: relative;
left: 50%; /* + is important for inner div*/
} 
```

# java - 文件名字符串

> ID：15254846
> 
> 赞同：-4
> 
> 时间：2013-03-06T18:11:42.447
> 
> 标签：java

有人可以帮我完成这项任务吗，感谢您抽出宝贵的时间。

有大量文件名（文件名字符串），我必须从下面的示例文件名中获取每个文件名的 ID。

```
1100_007_1_ALL_GC_Identify_TOA.txt
1100_007_2_ALL_GC_Identify_TOA.txt
1100_008A_1_ALL_GC_Set_Individual_In-Active.txt
1100_008B_2_ALL_GC_Set_Individual_In-Active_TP.txt
1100_001_TOA_Indiv.txt
1100_002_TOA_Indiv.txt
1100_006_ALL_GC_Check_In_Active_TOA.txt
1100_010_TOA_Control_1.txt

Final output should be :-
File ID's:
1100_007_1
1100_007_2
1100_008A_1
1100_008B_1
1100_001
1100_002
1100_006
1100_010 
```

我尝试了以下方法，但它不适用于文件 1100_008A_1

```
public static String stripNonDigits(final String input){
   final StringBuilder sb = new StringBuilder();
   for(int i = 0; i < input.length(); i++){
      final char c = input.charAt(i);
      if(c > 47 && c < 58){
         sb.append(c);
      }
   }
   return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:16:47.877

对于您给出的示例，这将起作用：

```
String filename = "1100_007_1_ALL_GC_Identify_TOA.txt";
String id = filename.replaceAll("_\\D.*", ""); 
```

下面的正则表达式假定在 'ID' 部分之后有一个 '_' 符号，后跟一个数字以外的字符。

# css - StackOverflow 徽标的字体图标？

> ID：15254847
> 
> 赞同：1
> 
> 时间：2013-03-06T18:11:47.870
> 
> 标签：css, fonts, icon-fonts

寻找 StackOverflow 的图标字体以使用类似于[Fontello](http://fontello.com)或[Font Awesome](http://fortawesome.github.com/Font-Awesome/)的技术。

[我在这里看到了一个未解决的问题。](https://github.com/FortAwesome/Font-Awesome/issues/251)也许这已经接近了现在。

干杯，jf

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:01:56.413

此图标集包含它，它与 Bootstrap/Foundation 兼容：
[http ://aristeides.com/elusive-iconfont/](http://aristeides.com/elusive-iconfont/)

干杯! :)

该链接已失效-尝试[http://elusiveicons.com/icons/](http://elusiveicons.com/icons/)

# javascript - JavaScript 和组合

> ID：15254856
> 
> 赞同：0
> 
> 时间：2013-03-06T18:12:41.020
> 
> 标签：javascript, oop, composition

我目前正在尝试理解组合，以便能够将它们实现到我正在处理的一段代码中。我没有看到组合 atm 的重要性/用途，但就我的目的而言，我似乎必须使用它。

目前我没有任何例子可以指导自己。我已经尝试在 Google 和 YouTube 上查找。

我想用组合来完成什么可以在下面看到：

该系统旨在允许为飞机预订多个座位。我们想使用两个类来实现这个系统，一个 Flight 类和一个 Aircraft 类。每个 Flight 对象都应该包含一个 Aircraft 对象的实例。这些类的角色和属性是：

**飞机：**这个类将存储两个属性，一个字符串形式的飞机名称和一个数字最大容量。

**航班：**此类将存储预订座位所需的信息。它将存储**航班号**（作为字符串）、**保留的座位数**，并将包含一个**Aircraft 对象**，该对象将用于确定可以预订**的最大座位数。**此类必须编写一个 bookSeats(noSeats) 成员函数，用于预订座位。在 bookSeats(noSeats) 中，如果飞机上没有足够的座位允许预订，您应该抛出异常。

在定义了两个类之后，实例化一个或多个航班并尝试预订座位，这样预订就会成功，并且预订会抛出异常。

```
<html>
   <head>
      <title>Test Template</title>
      <script type="text/javascript">
         function Flight(flightNo, maxSeats, reservedSeats ){
         this.no = "AC781";
         //Aaircarft object is needeed to get max number of seats
         //this.maxSeats = 522; 
         this.reserved = 90;
         }

         //
         function Aircraft (planeName,maxSeats){
         this.planeName = "test"
         this.maxSeats = 522;
         }

         Flight.prototype.bookSeats = function(noSeats){
         if( noSeats + this.reserved <= this.maxSeats ){
         this.reserved+= noSeats
         } else {
         throw "Not enough seats";  // THROW EXCEPTION
         }
         }

         //Test the Flight implementation
         var toHalifax = new Flight();
         alert("Before update " + "No:" + toHalifax.no + 
             " Max seats:" + toHalifax.maxSeats +
             " Reserved:"   + toHalifax.reserved );
         try{      
          toHalifax.bookSeats(46);
          alert("After update " + "No:" + toHalifax.no + 
             " Max seats:" + toHalifax.maxSeats +
             " Reserved:"   + toHalifax.reserved );
         } catch ( err ){
          alert( err );
         }

      </script>
   </head>
   <body>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:31:25.867

`Aircraft`对象应该是对象的“类构造函数”的参数`Flight`。

**免责声明**

我假设您正在使用航班/飞机作为编码练习的示例，并且您没有构建真实世界的航空公司预订系统。如果您正在构建一个真实的航空公司预订系统，我会给出不同的答案。

# jquery - JQuery->检查无线电组是否有任何选择

> ID：15254859
> 
> 赞同：0
> 
> 时间：2013-03-06T18:13:00.440
> 
> 标签：jquery, radio-button

```
<table width="100%">
    <tbody>
        <tr id="InfoCol_1158341_NY" class="InfoCol">
             <td width="50%" id="InfoType_221832" class="TypeCol">
                 <input type="radio" value="221832" name="lt_1158341_221832" id="lt_1158341_221832" class="lt_">
                 <br><label id="lbl_lt_1158341_221832" for="lt_1158341_221832" class="lt_ ">Linse 1<br>Hours: 8</label>
                 <input type="hidden" name="hr_1158341_221832" id="hr_1158341_221832" value="8" class="hr_">
                 <input type="hidden" name="un_1158341_221832" id="un_1158341_221832" value="0" class="un_">
                 <input type="hidden" name="pr_1158341_221832" id="pr_1158341_221832" value="8" class="pr_">
             </td>
             <td width="50%" id="InfoType_221833" class="TypeCol">
                 <input type="radio" value="221833" name="lt_1158341_221833" id="lt_1158341_221833" class="lt_">
                 <br><label id="lbl_lt_1158341_221833" for="lt_1158341_221833" class="lt_ ">Linse 2<br>Hours: 1</label>
                 <input type="hidden" name="hr_1158341_221833" id="hr_1158341_221833" value="1" class="hr_">
                 <input type="hidden" name="un_1158341_221833" id="un_1158341_221833" value="0" class="un_">
                 <input type="hidden" name="pr_1158341_221833" id="pr_1158341_221833" value="1" class="pr_">
             </td>
         </tr>
    </tbody>
</table> 
```

以下选择器均不返回收音机。我需要知道是否都没有检查。注：PID 已通过，值为 1158341

```
$(radio[name^="lt_'+PID+'"]')

$('.TypeCol radio[name^="lt_'+PID+'"]') 
```

不能按类来做，因为在这种动态创建的形式中，输入可能会被隐藏而不是无线电。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:14:56.497

选择器：

```
$('input[type=radio][name^="lt_'+PID+'"]') 
```

要查看是否检查了其中一个：

```
if ($('input[type=radio][name^="lt_'+PID+'"]:checked').length > 0) { 
```

[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

# dropbox - 如何让 Dropbox 按原样处理符号链接？

> ID：15254860
> 
> 赞同：30
> 
> 时间：2013-03-06T18:13:00.613
> 
> 标签：dropbox, symlink

如果我在 Dropbox 文件夹中创建一个符号链接，指向 Dropbox 文件夹中的另一个文件（例如，为了维护某些目录结构），那么 Dropbox 将尝试取消引用符号链接并将其视为普通文件，而不是将其同步为一个符号链接。有时这可能非常令人沮丧，因为我不想复制同一个文件。

所以我的问题是，这是让 Dropbox 按原样同步符号链接的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T23:39:07.467

云中的目录结构与您的计算机中的不同。因此，它无法按原样同步符号链接。

在您的计算机中，链接指向原始文件（或文件夹）的绝对路径。它如下所示：

```
Original folder path: /Users/username/home/Documents/Dropbox/MyFolder/
Symbolic link: symlink -> /Users/username/home/Documents/Dropbox/MyFolder/ 
```

由于云无法指向相同的目录结构，它将取消引用它并重新复制您的文件（在云上）。

当 Dropbox 中的链接指向您的 Dropbox 文件夹之外的内容时，它的链接非常棒。这样，外部文件将被复制到云端，但不会复制到您的计算机中。

更新：关于相对符号链接的问题，我猜 Dropbox 无法同步，因为您的 Dropbox 目录结构可能与您的同事不同。

例如：

```
 Your structure:   Dropbox/Projects/  
                           - coolfile.txt
                           - SharedDirectory/

Your friend structure:   Dropbox/SharedDirectory/

Relative Symbolic link inside SharedDirectory:  link -> ../coolfile.txt 
```

该链接适用于您的结构，但不适用于您的朋友。

更新 2：Dropbox 内部的链接也被用于与该组以外的人共享共享文件夹中的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:37:27.033

我试过做你想做的事。没运气。目前没有办法让 Dropbox 正确同步符号链接。但是，有一个[关于此的功能请求](https://www.dropbox.com/votebox/350/preserve-implement-symlink-behaviour)。因此，请对请求投下您的票，并希望获得最好的结果。

# node.js - 模块内的相对文件系统写入路径

> ID：15254861
> 
> 赞同：18
> 
> 时间：2013-03-06T18:13:02.117
> 
> 标签：node.js, path, relative-path, fs

我有一个具有调试布尔值的可执行节点/javascript 脚本，如果设置为 true，将写入几个文件。这个可执行文件也是节点模块。根据运行脚本的用户的工作目录，该函数似乎找不到要写入文件的目录。

模块结构如下

```
output/
lib/
    helpers.js
index.js 
```

我最初的推理是让路径成为。

```
helper.write = function(data,filename){
    if(typeof data !== "string") data = JSON.stringify(data);
    fs.writeFileSync("./output/"+filename, data);
}; 
```

但是，这在从 node_module 文件夹中运行脚本时有效

```
fs.writeFileSync("process.cwd()+"/node_modules/the_module/output/"+filename, data); 
```

像这样

```
node ./my_app/node_modules/the_module/index.js 
```

如果模块在另一个使用该库的可执行文件中使用，这会变得更加混乱。

```
node ./my_app/run.js 
```

有没有办法独立于所有这些变量来保存文件？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-06T18:23:55.180

如果我正确理解了这个问题，您希望始终写入相对于当前脚本的路径。要获取当前正在执行的脚本所在目录的名称，可以`__dirname`这样使用：

```
var path = require('path');

helper.write = function(data,filename){
  if(typeof data !== "string") data = JSON.stringify(data);
  var file = path.join(__dirname, 'output', filename);
  fs.writeFileSync(file, data);
}; 
```

话虽如此，我认为在`node_modules`目录中写入文件并不是一个好习惯。我建议您的模块需要文件系统中其他位置的文件的完整路径。如果调用者希望写入自己项目树中的输出目录，您可以再次使用相同的`__dirname`技巧。

# asp.net - ASP.NET 3.5 看不到我的代码背后

> ID：15254863
> 
> 赞同：1
> 
> 时间：2013-03-06T18:13:03.263
> 
> 标签：asp.net, code-behind

我正在开发一个现有网站的一部分，并且在尝试将我的文件上传到服务器时遇到了很多问题。一切都在本地运行良好，但是一旦我将文件放在服务器上，事情就会开始崩溃。

现在我有一个页面出现此错误

> “解析器错误消息：无法加载类型 '[Namespace].[PageName]'

. 如果我取出继承声明，它会起作用。命名空间和页面名在后面的代码中声明，在页眉中引用。

我还刚刚注意到，在我之前的所有页面都没有代码隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:51:27.140

将文件放在 Web 服务器上有两种选择。

*   一种选择是编译它并使用“发布”功能，其中所有代码隐藏文件都不在服务器上，而是编译为 .dll。
*   另一种方法是不编译站点，只需将所有未编译的 aspx 和 .cs（或 .vb）文件复制到那里。

*实际上有三个，但我认为你现在只需要处理这两个。它们在“灵活部署”部分下的[http://msdn.microsoft.com/en-us/library/ms178466(v=vs.100).aspx中有进一步描述。](http://msdn.microsoft.com/en-us/library/ms178466(v=vs.100).aspx)*

你的前任显然使用了第一种方法。解决此问题的唯一方法是从 \bin 目录中获取已编译的 .dll 文件，然后使用[Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)或[Teleriks 的 Just Decompile](http://www.telerik.com/products/decompiler.aspx)等工具对其进行反编译。（后者免费，前者限时免费。）

或者，如果您可以获得完整的源代码，您可以简单地删除所有已经存在的内容并使用非编译方法发布它。当然，会有停机时间，你需要非常仔细地测试......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:30:25.827

测试让您的代码启动并运行的最简单方法是发布代码。在 Visual Studio 的项目中，右键单击您的应用程序并单击发布，然后您可以在本地系统上创建一个文件夹并仅选择运行此应用程序所需的文件，然后选择发布。它只会复制运行应用程序所需的文件，您可以将这些文件复制到您的服务器，一切都应该是正确的。我还将复制您的 web.config/app.config 文件，因此请确保该文件中的所有内容都正确，或者在发布完成后从目录中删除该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:18:32.493

当你有一个代码隐藏文件时，它需要被编译成一个 DLL，并且这个 DLL 需要在 webserver 的 bin 目录中。如果没有`Inherits`- 您的代码隐藏中的任何内容都不会在那里 - 它实际上可能无法正常工作 - 它最初可能只会显示正常，但不会触发任何事件。

如果站点的其余部分都是使用 .aspx 页面中包含的代码完成的，那么这些页面都是独立的。但是，如果您想使用代码隐藏，则需要发布 DLL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T04:14:36.993

因此，我最终与在该网站上工作的另一个小组的首席开发人员进行了交谈。他解释说他们进行了解决方案重建，然后只需移动任何更改的 as*x 文件和 /bin .dll。出于某种原因，当我要求我的 subversion 客户端更新时，它实际上并没有更新任何东西，所以我的分支没有其他组制作的一些新控件。当我构建我的解决方案时，它不包含新控件的 .dll，所以当我上传我的 dll 时，新控件没有定义，我得到了相同的消息。当我取下新的 dll 时，我的控件没有定义。

无论如何，我解决了这个问题。感谢您的回答。

# c++ - Qt 多系统托盘图标

> ID：15254867
> 
> 赞同：2
> 
> 时间：2013-03-06T18:13:15.107
> 
> 标签：c++, qt, qtwebkit, system-tray

我不确定这是怎么回事，但我认为是在我希望应用程序突然关闭时（例如，当用户在 SSL 错误后选择不继续时，应用程序将关闭）`exit(EXIT_FAILURE);`。

我注意到有多个系统托盘图标，每次运行我的应用程序时都有一个。

![在此处输入图像描述](../Images/ce1b23c9617d909aec0473cbc44eaf98.png)

会`exit(EXIT_FAILURE);`导致这个吗？无论如何要正确处理系统托盘对象吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:38:57.720

如果您想退出，最好让 Qt 对其进行处理，以便它可以自行清理。

从代码中的任何位置调用 qApp->quit() 或 QApplication::quit()。（qApp 是全局的）您也可以使用 exit()。

`#include <QApplication>`访问。

你可以通过'EXIT_FAILURE'来[退出](http://qt-project.org/doc/qt-5.0/qtcore/qcoreapplication.html#exit)（）：

```
#include <QApplication>
QApplication::exit(EXIT_FAILURE) 
```

如果您不使用 Qt GUI，QCoreApplication 具有相同的功能：

```
#include <QCoreApplication>
QCoreApplication::exit(EXIT_FAILURE) 
```

请注意，exit() 和 quit() 不会立即关闭您的程序，而是结束您对 application.exec() 的原始调用。在某些平台上，在某些情况下， exec() 不会返回，而在其他平台上会。

quit() 和exit() 的区别在于，quit() 是信号和槽的槽，而quit() 只是调用exit(0)。

# php - 通过ajax jquery发布数据

> ID：15254868
> 
> 赞同：0
> 
> 时间：2013-03-06T18:13:19.243
> 
> 标签：php, jquery, ajax

我想通过单击按钮将数据保存在数据库中。这是我的代码，在 Firefox 中它不起作用，它显示空警报并且数据不保存在表中。

```
 $("#Save").click(function () {  
       var price = $("#price").val(); 
       var agent_1_id= $("#agent_1_id").val();
       var type = $("#type").val();
    $.post("ajax_files/myDeals.php",
             { 
              price: price,
              agent_1_id: agent_1_id,type:type
              },
            function(data) {
                alert(data);
      });           
}); 
```

单击事件触发并调用此函数。这是 myDeals.php 上保存在表中的代码..

```
$price = $_REQUEST['price']; 
$agent_1_id = $_REQUEST['agent_1_id'];
$type = $_REQUEST['type'];
mysql_query('insert query here');

echo "Saved Successfully ";//this is not alerted? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:20:04.353

尝试将数据作为对象发送的示例：

```
function end_incident() {
    $.ajax({
       type: "POST",
       url: "http://www.example.co.uk/erc/end_incident.php",
       data: { name: "Daniel", phone: "01234123456" },
       success: function(msg){ 
            alert('Success!');
       }
    });
}; 
```

# 3d - 贝塞尔三次曲线：匀加速运动

> ID：15254869
> 
> 赞同：13
> 
> 时间：2013-03-06T18:13:19.557
> 
> 标签：3d, numerical-methods, bezier, runge-kutta

假设我有一条[贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve) `B(u)`，如果我`u`以恒定速率增加参数，我不会沿着曲线获得恒定的速度运动，因为`u`参数和获得的评估曲线的点之间的关系不是线性的。

我已经阅读并实施了 David Eberly 的[文章](http://www.geometrictools.com/Documentation/MovingAlongCurveSpecifiedSpeed.pdf)。它解释了如何沿着参数曲线以恒定速度移动。

假设我有一个`F(t)`将时间值作为输入的函数和一个返回时间值`t`的速度函数，我可以获得沿曲线的恒定速度运动，以恒定速率改变 t 参数：`sigma``t``B(F(t))`

我正在使用的文章的核心是以下功能：

```
float umin, umax; // The curve parameter interval [umin,umax].
Point Y (float u); // The position Y(u), umin <= u <= umax.
Point DY (float u); // The derivative dY(u)/du, umin <= u <= umax.
float LengthDY (float u) { return Length(DY(u)); }
float ArcLength (float t) { return Integral(umin,u,LengthDY()); }
float L = ArcLength(umax); // The total length of the curve.
float tmin, tmax; // The user-specified time interval [tmin,tmax]
float Sigma (float t); // The user-specified speed at time t.

float GetU (float t) // tmin <= t <= tmax
{
  float h = (t - tmin)/n; // step size, `n' is application-specified
  float u = umin; // initial condition
  t = tmin; // initial condition
  for (int i = 1; i <= n; i++)
  {
    // The divisions here might be a problem if the divisors are
    // nearly zero.
    float k1 = h*Sigma(t)/LengthDY(u);
    float k2 = h*Sigma(t + h/2)/LengthDY(u + k1/2);
    float k3 = h*Sigma(t + h/2)/LengthDY(u + k2/2);
    float k4 = h*Sigma(t + h)/LengthDY(u + k3);
    t += h;
    u += (k1 + 2*(k2 + k3) + k4)/6;
  }
  return u;
} 
```

它允许我`u`使用提供的时间`t`和 sigma 函数计算曲线参数。现在，当速度 sigma 为常数时，该函数可以正常工作。如果 sigma 代表一个统一的加速，我会从中得到错误的值。

这是一个直线贝塞尔曲线的示例，其中 P0 和 P1 是控制点，T0 T1 是切线。曲线的定义：

```
[x,y,z]= B(u) =(1–u)3P0 + 3(1–u)2uT0 + 3(1–u)u2T1 + u3P2 
```

![在此处输入图像描述](../Images/2f5e4cdee0234868fcef17252587a957.png)

假设我想知道 time 沿曲线的位置`t = 3`。如果我是一个恒定的速度：

```
float sigma(float t)
{
  return 1f;
} 
```

以及以下数据：

```
V0 = 1;
V1 = 1;
t0 = 0;
L = 10; 
```

我可以分析计算位置：

```
px = v0 * t = 1 * 3 = 3 
```

如果我使用我的贝塞尔样条曲线和上面的算法求解相同的方程，`n =5`我得到：

```
px = 3.002595; 
```

考虑到数值近似，该值非常精确（我对此做了很多测试。我省略了细节，但贝塞尔曲线实现很好，曲线本身的长度是使用[Gaussian Quadrature](http://en.wikipedia.org/wiki/Gaussian_quadrature)非常精确地计算出来的）。

现在，如果我尝试将 sigma 定义为均匀加速函数，我会得到不好的结果。考虑以下数据：

```
V0 = 1;
V1 = 2;
t0 = 0;
L = 10; 
```

我可以使用线性运动方程计算粒子到达 P1 的时间：

```
L = 0.5 * (V0 + V1) * t1 =>
t1 = 2 * L / (V1 + V0) = 2 * 10 / 3 = 6.6666666 
```

`t`我可以计算加速度：

```
a = (V1 - V0) / (t1 - t0) = (2 - 1) / 6.6666666  = 0.15 
```

我有所有数据来定义我的 sigma 函数：

```
float sigma (float t)
{
  float speed = V0 + a * t;
} 
```

如果我分析地解决这个问题，我希望在 time 之后粒子的以下速度`t =3`：

```
Vx = V0 + a * t = 1 + 0.15 * 3 = 1.45 
```

职位将是：

```
px = 0.5 * (V0 + Vx) * t = 0.5 * (1 + 1.45) * 3 = 3.675 
```

但如果我用上面的算法计算它，位置结果：

```
px = 4.358587 
```

这与我的预期完全不同。

很抱歉这篇文章很长，如果有人有足够的耐心阅读它，我会很高兴。

你有什么建议吗？我错过了什么？谁能告诉我我做错了什么？

* * *

编辑：我正在尝试使用 3D 贝塞尔曲线。这样定义：

```
public Vector3 Bezier(float t)
{
    float a = 1f - t;
    float a_2 = a * a;
    float a_3 = a_2 *a;

    float t_2 = t * t;

    Vector3 point = (P0 * a_3) + (3f * a_2 * t * T0) + (3f * a * t_2 * T1) + t_2 * t * P1 ;

    return point;
} 
```

和导数：

```
public Vector3 Derivative(float t)
{
    float a = 1f - t;
    float a_2 = a * a;
    float t_2 = t * t;
    float t6 = 6f*t;

    Vector3 der = -3f * a_2 * P0 + 3f * a_2 * T0 - t6 * a * T0 - 3f* t_2 * T1 + t6 * a * T1 + 3f * t_2 * P1;

    return der;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:20:45.543

我的猜测是，这`n=5`根本无法为您解决手头的问题提供足够的精度。恒速情况下可以的事实并不意味着它也适用于恒加速度情况。不幸的是，您必须为自己定义折衷方案，以提供`n`适合您的需求和资源的价值。

无论如何，如果你真的有一个足够精确的恒速参数化**X** (u(t))，那么你可以将这个“时间”参数重命名`t`为“空间”（距离）参数`s`，这样你真正拥有的是一个**X** (s)，你只需要插入你需要的s(t)：**X** (s(t))。在您的情况下（恒定加速度），s(t) = s [0] + ut + at ² / 2，其中 u 和 a 很容易从您的输入数据中确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:48:30.167

我认为您只是在实现中未显示的功能 Y 和 DY 中的某个地方有错字。我尝试了 P0 = 0、T0 = 1、T1 = 9、P1 = 10 的一维曲线，在 n=5 时得到 3.6963165，在 n=30 时提高到 3.675044，在 n=100 时提高到 3.6750002。

如果您的实现是二维的，请尝试使用 P0 = (0, 0)、T0 = (1, 0)、T1 = (9, 0) 和 P1 = (10, 0)。然后用 P0 = (0, 0)、T0 = (0, 1)、T1 = (0, 9) 和 P1 = (0, 10) 再试一次。

如果您使用的是 C，请记住 ^ 运算符并不意味着指数。您必须使用 pow(u, 3) 或 u*u*u 来获得 u 的立方体。

尝试在每次迭代中打印出尽可能多的东西的值。这是我得到的：

```
i=1
    h=0.6
    t=0.0
    u=0.0
    LengthDY(u)=3.0
    sigma(t)=1.0
    k1=0.2
    sigma(t+h/2)=1.045
    LengthDY(u+k1/2)=6.78
    k2=0.09247787
    LengthDY(u+k2/2)=4.8522377
    k3=0.12921873
    sigma(t+h)=1.09
    LengthDY(u+k3)=7.7258916
    k4=0.08465043
    t_new=0.6
    u_new=0.12134061
i=2
    h=0.6
    t=0.6
    u=0.12134061
    LengthDY(u)=7.4779167
    sigma(t)=1.09
    k1=0.08745752
    sigma(t+h/2)=1.135
    LengthDY(u+k1/2)=8.788503
    k2=0.0774876
    LengthDY(u+k2/2)=8.64721
    k3=0.078753725
    sigma(t+h)=1.1800001
    LengthDY(u+k3)=9.722377
    k4=0.07282171
    t_new=1.2
    u_new=0.20013426
i=3
    h=0.6
    t=1.2
    u=0.20013426
    LengthDY(u)=9.723383
    sigma(t)=1.1800001
    k1=0.072814174
    sigma(t+h/2)=1.225
    LengthDY(u+k1/2)=10.584761
    k2=0.069439456
    LengthDY(u+k2/2)=10.547299
    k3=0.069686085
    sigma(t+h)=1.27
    LengthDY(u+k3)=11.274727
    k4=0.06758479
    t_new=1.8000001
    u_new=0.26990926
i=4
    h=0.6
    t=1.8000001
    u=0.26990926
    LengthDY(u)=11.276448
    sigma(t)=1.27
    k1=0.06757447
    sigma(t+h/2)=1.315
    LengthDY(u+k1/2)=11.881528
    k2=0.06640561
    LengthDY(u+k2/2)=11.871877
    k3=0.066459596
    sigma(t+h)=1.36
    LengthDY(u+k3)=12.375444
    k4=0.06593703
    t_new=2.4
    u_new=0.3364496
i=5
    h=0.6
    t=2.4
    u=0.3364496
    LengthDY(u)=12.376553
    sigma(t)=1.36
    k1=0.06593113
    sigma(t+h/2)=1.405
    LengthDY(u+k1/2)=12.7838
    k2=0.06594283
    LengthDY(u+k2/2)=12.783864
    k3=0.0659425
    sigma(t+h)=1.45
    LengthDY(u+k3)=13.0998535
    k4=0.06641296
    t_new=3.0
    u_new=0.4024687 
```

我已经调试了很多这样的程序，只需打印出大量变量，然后手动计算每个值，并确保它们相同。

# java - log4j 如何在 java 代码中设置 FileAppender 编码？

> ID：15254872
> 
> 赞同：2
> 
> 时间：2013-03-06T18:13:24.090
> 
> 标签：java, encoding, utf-8, log4j

我尝试了以下方法：

```
File logFile = new File("performance.log");
FileAppender appender = new FileAppender(layout, logFile.getName() , false);
appender.setEncoding("UTF-8");
logger.addAppender(appender);

logger.setLevel((Level) Level.DEBUG);
logger.setAdditivity(false);
....
logger.info("Finished in "  + (System.nanoTime() - start) / 1000 + " \u03BCs"); 
```

但它不能正确打印希腊语 mu char。如果我根据 log4j.properties 配置我的记录器，它会起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-29T15:36:56.100

我有同样的问题，只是偶然发现了这个问题。`FileAppender`从源代码来看，当您设置编码时，它似乎完全没有任何作用。调用构造`OutputStreamWriter`函数后已经创建了默认编码。它仅从内部`void setFile(String fileName, boolean append, boolean bufferedIO, int bufferSize)`方法创建，使用起来非常不方便，但它是从`void activateOptions()`. 无论如何，这可能就是它的用途！

因此，如果有人对此仍有疑问，只需添加这个电话，您就可以开始了：

```
File logFile = new File("performance.log");
FileAppender appender = new FileAppender(layout, logFile.getName() , false);
appender.setEncoding("UTF-8");
appender.activateOptions(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T22:22:28.437

如果您使用的是 XML 配置文件：

```
<appender name="customLogFile" class="org.apache.log4j.RollingFileAppender">
    <param name="encoding" value="Cp1252" />
    ...
</appender> 
```

# php - 如何显示从现在开始的过去 24 个月？

> ID：15254876
> 
> 赞同：1
> 
> 时间：2013-03-06T18:13:29.177
> 
> 标签：php

我需要编写一个简单的循环例程来显示从今天开始的 24 个月。我该怎么做？

```
$start = date(M) - 24;
$end = date(M);

foreach() {
    echo ''; // Dec, Jan...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:16:13.823

像这样的东西应该工作：

```
for($i = 1; $i <= 24; $i++) {
    echo date("M", strtotime("-$i months")) . "\n";
} 
```

**结果**

```
二月
简
十二月
十一月
十月
九月
八月
七月
君
可能
四月
三月
二月
简
十二月
十一月
十月
九月
八月
七月
君
可能
四月
三月
```

[查看演示](http://codepad.org/KgfJq7bf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:16:09.750

```
for ($i = 1; $i <= 24; $i++) {
    $months[] = date("Y-m%", strtotime( date( 'Y-m-01' )." -$i months"));
} 
```

或者对于月份的全文表示，您需要通过“F”：

```
echo date("y:F:d"); 
```

上个月你可以使用

```
echo date("y:F:d",strtotime("-24 Months")) 
```

# templates - 具有动态内容的众多模式

> ID：15254890
> 
> 赞同：1
> 
> 时间：2013-03-06T18:14:13.043
> 
> 标签：templates, twitter-bootstrap, modal-dialog, mustache

我在整个 Web 应用程序中使用 Twitter Bootstrap 的模式。我还使用 Mustache 模板来生成要在模式中显示的信息。问题是我发现自己为几乎每一个呈现到屏幕上的表单都创建了新的模态，我觉得这违反了 DRY。我正在考虑创建一个在“窗口”对象中定义的全局模式对象，并且可以在我的整个应用程序中访问。当我想显示一个新表单时，我只需将表单渲染到全局模态对象中，然后显示它。谁能给我一些关于如何更好地使用模态处理大量表单的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:24:10.730

我认为你的想法是正确的。如果您有很多模态，创建新的模态可能会变得重复。我已经做了与您提出的类似的事情：创建一个可重复用于各种模式的单一模式对象。

过去我使用jQuery对话框，但原理完全一样。使用一些样板 HTML 创建一个 JavaScript 模块，您可以使用它来显示任意数量的表单（主要是 HTML 内容）。

我将尝试在不了解您的应用程序的情况下提出一个非常基本的实现。

[基于此处](http://twitter.github.com/bootstrap/javascript.html#modals)的 Bootstrap 示例的 HTML ：

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

        <h3 id="dynamicHeader">
            <!-- Our header will go here -->
        </h3>
    </div>

    <div class="modal-body" id="dynamicBody">
        <!-- Our body will go here -->
    </div>

    <div class="modal-footer">
        <a href="#" class="btn">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

请注意我添加到`h3`和的唯一 ID `div.modal-body`。我们将在 JavaScript 中使用它们来动态注入每个表单的标题和内容。

JavaScript：

```
var ModalManager = (function() {
    // cache some DOM references
    var $dynamicHeader = $('#dynamicHeader');
    var $dynamicBody = $('#dynamicBody');
    var $myModal = $('#myModal');

    var launch = function(header, body) {
        $dynamicHeader.html(header);
        $dynamicBody.html(body);
        $myModal.modal(/* options here */);
    };

    return {
        launch: launch
        /* expose more API methods here! */
    };
}()); 
```

这是一个示例用法！

带有 JavaScript 的 HTML：

```
<div id="form1">
    <div class="formHeader">
        Form One
    </div>

    <div class="formBody">
        <p>Html and stuff</p>
    </div>
</div>

<script type="text/javascript">
    // Using a closure to protect globals
    // This would probably go in your click handler to launch a given modal
    (function() {
        var headerHtml = $('form1 .formHeader').html();
        var bodyHtml = $('form1 .formBody').html();
        ModalManager.launch(headerHtml, bodyHtml );
    }());
</script> 
```

最后，我将所有这些都封装在一个 jsFiddle 中，该 jsFiddle 演示了启动两种不同形式的能力。

链接：[jsFiddle](http://jsfiddle.net/willslab/24CkM/1/)

我使用了 jQuery，因为它应该包含在模式的引导代码中。它将提取特定于每个表单的标题和正文 HTML，并在 DOM 中填充您的常见模式 HTML。然后，当您启动模态时，它将显示看起来像不同的模态，但您已经集中了共同方面，因此您不再重复它们！

你可以做的还有很多，但这基本上是要点。例如，我自己的实现公开意味着动态配置按钮。根据您想要配置的内容，您可以添加传递给 modal() 函数的选项参数，或者具有 ModalManager 可以处理的特定于您的应用程序的其他属性。您绝对可以使用模板来执行其中一些功能，这对我设置的示例来说不是必需的。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:13:42.720

我不太确定你在问什么。Mustache 确实具有循环功能，因此您可以传入一个模态数组，Mustache 应该生成所有代码。

实际上，我刚刚创建了一个视频，展示了如何为 Twitter Bootstrap 的 Alert 组件构建一个 Mustache 模板，并通过 PHP 和 JavaScript 实现它。它还具有我所说的循环功能。也许这会有所帮助？这是链接： http: [//mikemclin.net/mustache-templates-for-php-and-javascript/](http://mikemclin.net/mustache-templates-for-php-and-javascript/)

# javascript - 在javascript中实现扩展方法

> ID：15254894
> 
> 赞同：0
> 
> 时间：2013-03-06T18:14:37.637
> 
> 标签：javascript, backbone.js, javascript-objects

通过查看 BackboneJS 的代码，我对扩展实现感兴趣。当我尝试自己制作时，我被卡住了。我的代码如下。

```
var extend = function(child) {
  var base = this;

  if(child) {
    for(var prop in child)  {
      base[prop] = child[prop];
    }
  }

  return base;
};

var Test = Mod.Test = function()  {
  this.data = {};
}

Test.prototype.set = function(key, value) {
  this.data[key] = value;
}

Test.prototype.get = function(key)  {
  return this.data[key];
}

Test.extend = extend; 
```

当我这样尝试时，我无法将 hello 方法附加到 Mod.Test

```
var testObj = new Mod.Test.extend({
 hello : function() {
  console.log('hello');
 }
}); 
```

这怎么可能。它是如何在backbonejs中实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:28:49.413

Backbone 的 extend 方法接受两个参数——实例属性和静态属性。第一个被复制到正在创建的实例，第二个被分配给实例的原型。通常您应该在没有 new 运算符的情况下调用 extend 方法，但在这种情况下，这是您的代码的工作版本：

```
var extend = function(child) {
  var base = this;

  if(child) {
    for(var prop in child)  {
      base[prop] = child[prop];
    }

    for(var prop in child)  {
      base.prototype[prop] = child[prop];
    }
  }

  return base;
};

var Test = Backbone.Model.Test = function()  {
  this.data = {};
}

Test.prototype.set = function(key, value) {
  this.data[key] = value;
}

Test.prototype.get = function(key)  {
  return this.data[key];
}

Test.extend = extend; 
```

进而：

```
Test = Backbone.Model.Test.extend({
  hello : function() {
    console.log('hello');
  }
});
var testObj = new Test; 
```

# php - 带有术语和方面的弹性

> ID：15254896
> 
> 赞同：2
> 
> 时间：2013-03-06T18:14:44.297
> 
> 标签：php, elasticsearch, elastica

我对 elasticsearch 不熟悉，并尝试与 elastica 相处。当其中一个是 2 和/或 7 时，我试图找出一组项目中哪些项目经常一起出现。因此索引包含许多嵌套的项目集。相互项目将使用构面提取。但我似乎没有将以下查询转换为 elastica：

```
curl -X POST "http://localhost:9200/ratings/rating/_search?pretty=true" -d '
{
  "query": {
    "terms": {
      "bookid": [2, 7],
      "minimum_match" : 1
    }
  },
  "size": 0,
  "facets": {
    "bookid": {
      "terms": {
        "field": "bookid"
      }
    }
  }
}' 
```

我正在尝试这个：

```
 // Load index
        $index = $client->getIndex('ratings');
        $type = $index->getType('rating');

        // We want a Terms query.
        $query = new Elastica_Query_Terms();

        // Setting Terms
        $query->setTerms('bookid', $bookids);

        // Facets
        $facet = new Elastica_Facet_Query('matches');
        $facet->setField( 'bookid' )
            ->setSize(100);
        $facet->setQuery($query);

        $resultSet = $type->search($query);
        return $resultSet; 
```

但到目前为止还没有运气。如何添加构面属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T14:22:25.083

Elastica 查询类有一个 addFacet 方法，因此与其在 facet 上设置查询，不如将 facet 添加到查询中更有意义。

```
$facet = new Elastica_Facet_Query('matches');
$facet->setField('bookid')
      ->setSize(100);

$query = new Elastica_Query_Terms();
$query->setTerms('bookid', $bookids);
$query->addFacet($facet); 
```

# javascript - 使用 D3.json 调用两组 json

> ID：15254898
> 
> 赞同：2
> 
> 时间：2013-03-06T18:14:50.833
> 
> 标签：javascript, json, d3.js

我目前发现自己处于一种情况，我需要两组 json 和函数！

目前我有：

```
 d3.json("http://names.json", function (json) {

         }); 
```

因此，我想知道是否有可能两个调用两个不同的函数和 url，一个是默认的 json ( [http://names.json](http://names.json) )，另一个是根据布尔值调用的。

我的一个想法是在当前方法中调用另一个 d3 方法，但它没有用。

我目前只看到几个 jquery 示例，没有一个与 d3.json 方法相关。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:21:50.660

您可以`d3.json`为要获取的每个 blob 调用两次：

```
d3.json("http://names.json", function (json) {

         });

if( someBoolean ) {
    d3.json(otherUrl, function (otherJson) {

             });
} 
```

# html - KnockOutJS 条件注释在 HTML 中添加空间

> ID：15254902
> 
> 赞同：0
> 
> 时间：2013-03-06T18:15:06.807
> 
> 标签：html, css, knockout.js, knockout-2.0

我有这个问题，但我不是 100% 确定这与 KnockOutJS 有关。在网格中，行内的一些按钮是可选的，并且根据绑定项的值显示。我正在使用条件绑定来显示一些按钮或其他，但显然，即使它们没有显示，仍然以某种方式创建一个空间：

![在此处输入图像描述](../Images/438583faac9c1e723d35d333e2f75f38.png)

如您所见，这两个按钮之间出现了一个神奇的空间。

这是我编写的那 3 列的模板代码：

```
<td>
    <a href="#" class="editDetails">Edit</a>
    <a href="#" class="viewDetails">View</a>
</td>
<td>
    <!-- ko if: (CanEdit()) -->
        <a href="#" class="editPremium">Edit</a>
    <!-- /ko -->
    <!-- ko if: (!CanEdit()) -->
        <a href="#" class="createCopy">Copy</a>
    <!-- /ko -->
    <a href="#" class="viewPremiums">View</a>
</td>
<td>
    <a href="#" class="delete">Delete</a>
</td> 
```

没有与这些类关联的 CSS。

如您所见，有一个按钮未显示，这可能是其他两个按钮之间空间的罪魁祸首。这是 Google Chrome 为有问题的 TD 生成的代码：

```
<td>
    <!-- ko if: (CanEdit()) -->
       <a href="#" class="editPremium" style="visibility: visible;">Edit</a>
    <!-- /ko -->
    <!-- ko if: (!CanEdit()) -->
    <!-- /ko -->
    <a href="#" class="viewPremiums">View</a>
</td> 
```

所以中间按钮没有显示（如预期的那样），但在其他两个按钮之间创建了一个额外的空间。

我怎样才能利用两个按钮之间的空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:07:55.530

使用`visible`绑定有用吗？

```
<td>
    <a href="#" class="editPremium" data-bind="visible: CanEdit()">Edit</a>
    <a href="#" class="createCopy" data-bind="visible: !CanEdit()">Copy</a>
    <a href="#" class="viewPremiums">View</a>
</td> 
```

或者，您可以尝试删除元素周围的大部分空间：

```
<td>
    <!-- ko if: (CanEdit()) --><a href="#" class="editPremium">Edit</a><!-- /ko -->
    <!-- ko if: (!CanEdit()) --><a href="#" class="createCopy">Copy</a><!-- /ko -->
    <a href="#" class="viewPremiums">View</a>
</td> 
```

一般来说，如果你使用块元素，你在间距方面会遇到更少的麻烦。您可以使用 a`div`来包围每个，也可以`a`设置`a`as`display:block;`并添加`float:left;`以使它们水平对齐。

# javascript - 将参数添加到插件中的方法

> ID：15254903
> 
> 赞同：0
> 
> 时间：2013-03-06T18:15:07.403
> 
> 标签：javascript, jquery, plugins, methods

我正在寻找一种方法来为我的插件中的方法添加额外的参数。

这个例子我使用了一个更新方法，但它需要一个额外的参数来告诉更新什么。

// 插件封装

```
 ;(function($, window, document, undefined){

      var pluginName = 'myPlugin01';

      function Plugin(element, options){

          // vars here
      };

      Plugin.prototype = {

          init: function(){

          // init code here

          },
          update: function(param){

              // need the param value in this method
              if(param == 'bottom'){
                  alert('bottom it is...')
              }else{
                  alert('top it is...')
              }

          },
      };

      $.fn[pluginName] = function(option) {
          return this.each(function() {
              var $this   = $(this);
              var data    = $this.data(pluginName);
              var options = typeof option == 'object' && option;
              if (!data){ 
                $this.data(pluginName, (data = new Plugin(this, options)))
              }
              if (typeof option == 'string'){
                   data[option]();
              }
          });
      };

      $.fn[pluginName].defaults = {
          option1: true
      };

  })(jQuery, window, document); 
```

// 我想如何使用它

```
$('.element').myPlugin('update','bottom'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:22:07.197

不确定您要做什么，但您可以添加额外的 arg`$.fn[pluginName]`并将其用于`update`或任何方法

```
//Added additional arg
$.fn[pluginName] = function(option, mydata) { 
```

然后在调用部分，

```
data[option](mydata); 
```

# maven - Maven测试依赖：如何将兄弟项目的依赖项获取到依赖项目的测试范围

> ID：15254904
> 
> 赞同：2
> 
> 时间：2013-03-06T18:15:09.773
> 
> 标签：maven, testing, dependencies

我有一个结构的多模块 Maven 项目

```
main/
  core/
  interface/ 
```

其中**interface**依赖于**core**生成的工件。

**interface**可以正确编译、打包和安装。但是，在**interface**中运行测试时，由于未解决**core**中的依赖关系，它们会失败。

**interface**不依赖于**core**中的测试类本身，只需编译**core** pom.xml 文件中定义的范围 maven 依赖项。

我做了一次痛苦的尝试，我将**核心**中需要的每一个编译依赖声明复制到**接口**pom.xml 中，并将它们全部提供给

```
<scope>test</scope> 
```

. 这有助于测试，但破坏了安装。

**在interface**中修复这些测试的依赖关系解析的最佳方法是什么？

**这是运行接口**maven 测试目标时未解决的编译范围依赖关系的示例。

核心/pom.xml 摘录：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>${jsf-version}</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>${jsf-version}</version>
</dependency> 
```

接口/pom.xml 摘录：

```
<dependency>
  <groupId>com.mycompany</groupId>
  <artifactId>core</artifactId>
  <version>1.0-SNAPSHOT</version>       
</dependency> 
```

# regex - Perl 大括号正则表达式需要指数时间来解析

> ID：15254908
> 
> 赞同：0
> 
> 时间：2013-03-06T18:15:13.310
> 
> 标签：regex, performance, perl

我有一个 perl 脚本，它需要指数时间来根据正在解析的字符串的长度来解析正则表达式。代码如下：

```
$BRACE_MATCH = qr/ (?: [^\(\)]+ | \((??{$BRACE_MATCH})\))* /x;
$expr="(abcdef || abcdefghijklmno)"
timethis(1, sub {$expr =~ /^($BRACE_MATCH)\|\|($BRACE_MATCH)$/}); 
```

这需要 8 秒才能运行。如果我在字符串中添加另一个字母，则需要 16 个。有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:09:44.260

正如 ikegami 所说，需要这么长时间的原因是模式可以将字符串分成块的方式呈指数级增长。为了让它在 Perl 的正则表达式引擎中有效地工作，你必须限制回溯。

您可以使用`++`所有格量词来做到这一点。这通过说它是全部或全部来限制回溯。但要让它发挥作用，你必须小心它匹配的内容。

不起作用的原因`[^()]++`（您不需要那里的反斜杠，括号在字符类中并不特殊）是它也匹配`|`，这是您更大的正则表达式正在寻找的字符。您需要能够回溯`|`，但不能回溯其他字符（因为将字符串拆分为除`(` `)`或`|`不会帮助正则表达式匹配的字符）。

尝试这个：

```
$BRACE_MATCH = qr/ (?: [^()|]++ | \| | \((??{$BRACE_MATCH})\))* /x; 
```

这表示这`$BRACE_MATCH`是任意数量的 3 件事的序列：

1.  字符串以外的字符`()|`（将作为单个块回溯）
2.  一个`|`字符
3.  平衡的`(...)`表达

原因是

```
$BRACE_MATCH = qr/ (?: [^()]++ | \((??{$BRACE_MATCH})\))* /x; 
```

不匹配`(XX || YY) || ZZ`的是 . 后面有空格`)`。该空格与该`[^()]++`部分匹配，但也与字符串的其余部分匹配（因为没有更多的括号），然后不会将其部分返回（因为它是所有格量词）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:27:24.053

问题是引擎必须尝试许多可能性，然后才能确定它们都不匹配。

Perl 的引擎旨在避免不必要的回溯（即使以匹配比其他引擎慢一点为代价），但优化显然无法帮助您。

所以你需要做的是减少回溯的数量，这很容易做到。

```
our $BRACE_MATCH = qr/ (?> (?: [^()]+ | \( (??{ $BRACE_MATCH }) \) )* ) /x;
                       ^^^                                            ^ 
```

或者正如我在两小时前的评论中建议的那样：

```
our $BRACE_MATCH = qr/ (?: [^()]++ | \( (??{ $BRACE_MATCH }) \) )*+ /x;
                                 ^                                ^ 
```

通过这些更改中的任何一个，测试需要 0 秒而不是 22 秒。

* * *

顺便说一句，您可能想研究使用`(?PARNO)`

> 类似于，`(??{ code })`除了它不涉及编译任何代码

# c - 使用 fork() 和 pipe() 的竞争条件

> ID：15254909
> 
> 赞同：0
> 
> 时间：2013-03-06T18:15:18.350
> 
> 标签：c, concurrency, ipc, race-condition

我正在为一个任务编写一个程序，其中一个父级将四个与 N 个子进程连接起来。该程序使用管道在进程之间通信游戏移动。

但是，我在修复程序中存在的竞争条件时遇到问题。有一种情况是子进程在游戏结束后挂起一个 read() 调用。这似乎只在有多个子进程时才会发生。

我已经尝试了几件事，例如命名信号量，但我对分叉、管道和 IPC 仍然很陌生。我在这里发布了一个带有相关代码的要点（我试图尽可能地清理它以提高可读性）：

**[带有相关代码的要点](https://gist.github.com/chrisbenincasa/5101530)**

任何帮助将不胜感激

**编辑**

这是添加了声明的要点的相关来源。

```
int main (int argc, char const *argv[])
{
  int dimension = 8, children = 2, i;
  int child_play_to_win = 0;
  int fd[children][4];
  pid_t childpid[children];
  Board** boards = (Board**) malloc(sizeof(Board*) * children);
  GameMove* lastMove, *tmpMove;
  char buf[80];
  for(i = 0; i < children; i++) {
     generate_board(&(boards[i]), dimension);
     int tmp[2];
     pipe(tmp);

    // child read
    fd[i][0] = dup(tmp[0]);
    // parent write
    fd[i][1] = dup(tmp[1]);

    pipe(tmp);
    // parent read
    fd[i][2] = dup(tmp[0]);
    // child write
    fd[i][3] = dup(tmp[1]);

        childpid[i] = fork();

    if(childpid[i] == -1) {
        perror("fork");
        exit(1);
    }
    if(childpid[i] == 0) {
      srand(getpid());
      close(fd[i][1]);
      close(fd[i][2]);
      while(!boards[i]->finished) {
        // Read in move from parent
        printf("child[%d] about to read\n", getpid());
        read(fd[i][0], &buf, sizeof(GameMove));

        // repeat parent move on this board

        if(gameNotFinished) {
          // make child move

          // write move back to parent

          write(fd[i][3], lastMove, sizeof(GameMove));

          // If the board is finished (there was a win),
          if (!gameNotFinihsed) {
            // Child wins
            close(fd[i][0]);
            close(fd[i][3]);
            printf("child[%d] ending\n", getpid()); 
            break;
          }
        }
        else {
          // Parent won
          close(fd[i][0]);
          close(fd[i][3]);
          break;
        } 
      }
    dealloc(boards[i]);
    exit(0);
    }
}

  // When this hits children amount, all games are done
  int games_complete = 0;
  // Make first move to all children
  for (i = 0; i < children; i++) {
    close(fd[i][0]);
    close(fd[i][3]);
    lastMove = placePieceAtBestPosition(boards[i], 1);
    printf("parent writing to child[%d]\n", childpid[i]);
    write(fd[i][1], lastMove, sizeof(GameMove));
  }
  while (games_complete != children) {
    for (i = 0; i < children; i++) {
      // Read move from child
      read(fd[i][2], &buf, sizeof(GameMove));

      // repeat child move

      // Check for a child win...
      if (!checkForWin(boards[i], 2)) {
        // No win yet, place piece at best position

        lastMove = placePieceAtBestPosition(boards[i], 1);

        // check for win again
        boards[i]->finished = checkForWin(boards[i], 1);
        // Write move back to child
        write(fd[i][1], lastMove, sizeof(GameMove));

        // If we won, close everything up and increment
        // the games_complete counter.
        if(boards[i]->finished) {
          close(fd[i][1]);
          close(fd[i][2]);
          games_complete++;
        }
      } else {
    // write back child move if there was a win
        write(fd[i][1], lastMove, sizeof(GameMove));
        close(fd[i][1]);
        close(fd[i][2]);
        printf("Parent lost! ):\n");
        games_complete++;
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:50:06.950

我想我知道你的问题是什么。当你分叉每个孩子时，你关闭了它的管道的父端。但是，每个孩子仍然为所有以前的孩子打开管道的父端。因此，只有最后创建的子节点才会关闭其管道的父端。

建议你改变：

```
close(fd[i][1]);
close(fd[i][2]); 
```

类似于：

```
for (j = 0; j <=i; j++) {
  close(fd[j][1]);
  close(fd[j][2]);
} 
```

# eclipse - Tomcat 不断重置我的 tomcat-users.xml 文件

> ID：15254910
> 
> 赞同：17
> 
> 时间：2013-03-06T18:15:22.153
> 
> 标签：eclipse, tomcat

我是 Java/Tomcat 开发的新手，我看到这个问题，我的`tomcat-users.xml`文件不断被重置。我的用户不断被删除，我不知道为什么。我正在从部署到这个 Tomcat 实例的 Eclipse 启动我的应用程序。

```
C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0 
```

**虚拟机参数**

```
-Dcatalina.base="C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0" -Dcatalina.home="C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0" -Dwtp.deploy="C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\wtpwebapps" -Djava.endorsed.dirs="C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\endorsed" 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-06T18:35:56.767

我更新了in`tomcat-users.xml`下的文件。这似乎是将其复制到真正的 Tomcat 服务器上。`Servers``Project Explorer`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-07T13:38:29.917

请试试这个：

*   转到 tomcat 的 conf 文件夹并打开 server.xml 文件，在 'GlobalNamingResources' 标签之间的文件中，您将获得 'Resource' 标签，添加 readonly="true" ，这就是您所需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-17T17:05:52.717

如果使用任何 IDE，请在 Eclipse 中更新 server.xml，如下所示：

```
<Resource auth="Container" readonly="true" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/> 
```

# iphone - iPhone 6.1 模拟器

> ID：15254918
> 
> 赞同：2
> 
> 时间：2013-03-06T18:15:48.007
> 
> 标签：iphone, ios, objective-c, ios-simulator

我刚开始学习 iPhone 编程，我有一个非常普遍的问题。

我想知道为什么当我在 xcode 中运行我的程序时，即使我正在为 iPhone 5 编程，当我运行“iPhone 6.1 Simulator”而不是 iPhone 5 Simulator 并且 iPhone 4 弹出？

我在 Mac OS X - 10.7.5 和 Xcode 版本 4.6

难道是因为我用来下载xcode的苹果ID只有iPhone 4而不是5？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:17:18.673

要将您的模拟器设备更改为其他屏幕分辨率，请转到`Simulator - Device - Retina 4 inch`（适用于 iPhone 5）和`Retina 3.5 inch`适用于 iPhone 4/4S。用于`iPhone`iPhone 3GS 分辨率。

在`Window`菜单中，您可以更改比例以适应 Mac 的屏幕分辨率。（我将 75% 用于 iPhone Retina 3.5 英寸）。

`iOS 5.1 Simulator`如果你想部署应用程序，我也建议你下载`iOS 5.1`——它真的很方便，而且它确实与`iOS 6`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:19:16.407

选择“iPhone 6.1 Simulator”是告诉 Xcode 你想在 iOS 6.1 中使用当前选择的 iPhone 模拟器。

要选择特定的 iPhone 模拟器，您需要单击模拟器中的硬件然后设备菜单。

您的 Apple ID 和您注册的设备与此无关。

# asp.net - IIS 7.0 给出 503 错误并停止应用程序池

> ID：15254934
> 
> 赞同：14
> 
> 时间：2013-03-06T18:16:50.790
> 
> 标签：asp.net, iis, iis-7, application-pool, event-viewer

当我启动应用程序池并在该池中的应用程序中请求页面时，我收到“HTTP 错误 503。服务不可用”。

如果我查看 IIS 中的应用程序池，我可以看到它现在已经停止。转到事件查看器，我发现此错误消息：

'应用程序池 Badge.Web 的标识无效。为标识指定的用户名或密码可能不正确，或者用户可能没有批量登录权限。如果没有更正身份，应用程序池将在应用程序池收到第一个请求时被禁用。如果批处理登录权限导致问题，则必须在授予权限后更改 IIS 配置存储中的标识，然后 Windows Process Activation Service (WAS) 才能重试登录。如果在处理应用程序池的第一个请求后身份仍然无效，则应用程序池将被禁用。数据字段包含错误号。

我非常确定我使用的凭据是正确的。其他原因导致应用程序池停止。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-14T09:31:41.103

今天，当使用 Windows 用户身份 X 的应用程序池在该用户更改密码后停止工作时，我遇到了类似的问题。

显然，一些与旧凭据相关的信息存储在系统中，我通过以下方式解决了这个问题：

*   将应用程序池标识切换到 NetworkService
*   使用新密码将其切换回 X

到目前为止，它工作正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-07T21:54:05.023

找到一篇文章说

修复是确保服务/应用程序池帐户在服务器上具有“作为批处理作业登录”和“作为服务登录”用户权限。此权限可在本地安全策略 > 计算机配置 > Windows 设置 > 本地策略 > 用户权限分配中找到。删除冲突的组策略并修复本地策略或将权限添加到组策略。

[http://waveformation.com/2009/06/08/event-5021-the-identity-of-application-pool-lsgroupexpapppool-is-invalid/](http://waveformation.com/2009/06/08/event-5021-the-identity-of-application-pool-lsgroupexpapppool-is-invalid/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-11T20:27:27.857

虽然发生这种情况可能有多种原因，但在这种特定情况下，由于应用程序池无法启动而发生 503 错误。这是因为最近更改了应用程序池尝试运行的身份的密码。修复方法是转到 IIS 管理器 -> 应用程序池 -> 高级设置 -> 进程模型 -> 身份并将密码设置为新密码。

在继续进行进一步故障排除之前，检查事件查看器日志（事件查看器（本地）-> Windows 日志-> 应用程序以查找故障的具体原因也将有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T09:35:43.030

*通过将Application Pool Identity*更改为**NetworkService**解决了我的问题，并`Advanced Settings > Process Model > Identity > NetworkService`选择了所需的 Application Pool。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T12:03:00.347

我有同样的问题，我的解决方案是：Manager -> Application Pool -> “Select the pool” -> Advanced Settings -> Process Model -> Identity -> NetworkService

# android - 用于 XML 文件的 Eclipse 颜色选择器插件

> ID：15254938
> 
> 赞同：6
> 
> 时间：2013-03-06T18:17:02.963
> 
> 标签：android, xml, eclipse, eclipse-plugin, color-picker

[这里](https://stackoverflow.com/questions/1471546/is-there-a-color-picker-plugin-for-eclipse)有一个关于这个问题的类似问题。但它适用于 CSS。我想在处理 Android 项目时在 XML 文件中选择颜色。有没有为此目的的插件？我为此研究了大约 2-3 个小时，但我什么也做不到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T18:25:22.627

我不认为有专门针对 Android XML 编辑的插件，而且 ADT 团队似乎并不热衷于在不久的将来添加此功能。但是，使用任何生成 HEX (html) 样式颜色代码的颜色选择器都应该有效。

[这个插件](http://milanl.wz.cz/eclipse/colors/ "日食插件")看起来很有前途。应该允许您打开颜色选择器，使用系统颜色选择或通过在屏幕上采样像素来选择颜色并将 HEX 代码复制到剪贴板或将其直接插入到源代码中。

# php - PHP 必须先保存 JSON 字符串并再次打开它才能使用它

> ID：15254939
> 
> 赞同：3
> 
> 时间：2013-03-06T18:17:07.090
> 
> 标签：php, json

我有最奇怪的行为，我已经为此工作了几个小时。我通过 AJAX 向我的服务器发送一个大而复杂的 JSON 字符串，当我解码它时，我无法访问它的元素。但是当我继续将解码后的 JSON 字符串保存到一个文件并再次打开它时，我突然能够使用它的元素。我只是无法解释这种行为。这是我的代码。

***这不起作用***

```
header('Access-Control-Allow-Origin: *');

$json = $_POST['json'];
$obj = json_decode($json, true);
// At this point I cannot work with the $obj elements 
```

***这有效***

```
header('Access-Control-Allow-Origin: *');

$json = $_POST['json'];
$data = json_decode($json, true);

file_put_contents( 'test.txt', $data);
$file = file_get_contents('test.txt');
$obj = json_decode($file);
// At this point I can work with the $obj elements 
```

请注意，我需要标头，因为我从不同的服务器获取 JSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:23:27.063

看起来您的 json 是双重编码的，也就是说，当您对其进行两次解码时，它就可以工作。尝试

```
$obj = json_decode(json_decode($json, true)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:21:07.110

在您的第一次试用中，您使用了：

```
$obj = json_decode($json, true); 
```

真正的是转换为数组而不是对象

# c# - 获取资源文本文件列表

> ID：15254940
> 
> 赞同：3
> 
> 时间：2013-03-06T18:17:09.177
> 
> 标签：c#

我有几个 .txt 文件附加到我的项目中（请参阅[如何在 .NET 程序集中嵌入文本文件？](https://stackoverflow.com/questions/433171/how-to-embed-a-text-file-in-a-net-assembly)）。

如何获取这些文件的列表？我想写一些这样的代码：

```
 foreach (string textfile in thisprogram.Resources.TextFiles) {
      if (textfile.Contains(x)) { /* etc. */ }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:21:27.257

您是否尝试根据“System.String”的类型或名称为“TextFile1”来确定它是否是文本文件？基于它是一个文本文件这一事实，我不确定是否有办法做到这一点。这将显示所有字符串资源（文本文件和字符串资源），这行得通吗？：

```
using System.Collections;
using System.Resources;
using System.Globalization;

ResourceSet resourceSet = Properties.Resources.ResourceManager.GetResourceSet(CultureInfo.CurrentUICulture, true, true);
foreach (DictionaryEntry entry in resourceSet)
{
    if (entry.Value is string)
    {
        if (entry.Value.ToString().Contains(x)) { /* etc. */ }
    }
} 
```

# java - JAVA：除以2个bigdecimals并保留小数点后的最大位数

> ID：15254941
> 
> 赞同：3
> 
> 时间：2013-03-06T18:17:10.907
> 
> 标签：java, bigdecimal

我想除以 2 个大小数并在非终止除法结果中保留最大可能的位数（比如 1000 位）。我应该写什么代码来做到这一点？

请注意：当我处理重要数据时，是否有可能实现高精度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:19:15.457

使用以 a作为参数的重载`divide`方法；您可以通过这种方式获得任意比例。[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)`scale`

```
divide(BigDecimal divisor, int scale, RoundingMode roundingMode) 
```

# c++ - 条件运算符 (< , >) 在 gsl 插值函数中不起作用

> ID：15254944
> 
> 赞同：1
> 
> 时间：2013-03-06T18:17:17.113
> 
> 标签：c++, conditional-statements, gsl

我有一个对我来说似乎很不寻常的问题。我有一个不能正常工作的条件语句。特别是，我有

```
double maxx = *max_element(v1.begin(), v1.end());
if(x > maxx){
    cout << x << "\t" << maxx << endl;
    } 
```

哪里`v1`是向量。奇怪的是输出：它给了我相等的数字，ig

```
168.68 168.68 
```

该语句与 gsl 插值函数有关。事实上，它复制了一个`interp.c:150`导致错误的语句`gsl: interp.c:150: ERROR: interpolation error`。因此，当一个应该正常执行的数字出现在它实际给出的函数`true`中时`false`，我不知道为什么，因为数字 (x) 实际上等于允许的最大值。

PS：我自己检查了`if`声明（带有基本条目），它似乎工作正常。

PPS：一段代码来自`interp.c`：

```
double gsl_interp_eval (const gsl_interp * interp,
                const double xa[], const double ya[], double x,
                gsl_interp_accel * a){

 double y;

 int status;

 if (x < interp->xmin || x > interp->xmax)
   {
     GSL_ERROR_VAL("interpolation error", GSL_EDOM, GSL_NAN);
   }

 status = interp->type->eval (interp->state, xa, ya, interp->size, x, a, &y);

 DISCARD_STATUS(status);

 return y;} 
```

因此，即使对于 ，它也会返回一个错误`x = interp->xmax`，尽管它绝对不应该。

更新：我在声明中更改`double`为。`long double`这修复了一些地方（我不止一次使用这个功能），但不是全部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:29:47.700

看起来像浮点数不准确。尝试在不限制小数位数的情况下打印值或`(x-maxx)`按照 Oli Charlesworth 的建议打印。

此类问题的通常解决方案是在比较中应用一个小的“epsilon”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:31:00.020

浮点是一项棘手的工作，尤其是在比较值时。如果值非常接近，它们很可能打印相同，但仍然不同。

看一下：

[http://floating-point-gui.de/](http://floating-point-gui.de/)

# flash - Flash builder 4.7 有哪个版本的eclipse？

> ID：15254949
> 
> 赞同：1
> 
> 时间：2013-03-06T18:17:38.900
> 
> 标签：flash, flash-builder

我想在 Flash Builder 中有一个 J2EE 透视图，这怎么可能？而且我还想运行我在 Flash Builder 上构建的 Flash + Spring 项目以在 tomcat 服务器上运行。

请为我提供一些建议和解决方案，我真的很坚持，无法继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-18T19:33:10.240

如果打开以下文件：

```
C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\eclipse\.eclipseproduct 
```

然后可以看到 Flash Builder 打包的 eclipse 版本。

内容是：

```
name=Eclipse Platform
id=org.eclipse.platform
version=3.7.0 
```

Eclipse 3.7 是 Eclipse Indigo 的一个 Flavor，您可以从这个 Eclipse “Older Versions”列表中看到

[https://wiki.eclipse.org/Older_Versions_Of_Eclipse](https://wiki.eclipse.org/Older_Versions_Of_Eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:59:47.433

Flash Builder 4.7 基于 Eclipse Indigo 构建。我没有尝试将 J2EE 插件安装到 FB 中，但我采用了另一种方式（将 FB 插件添加到 Eclipse Jave EE 包中）。

详细信息在 FB 4.7 发行说明 ( [http://helpx.adobe.com/flash-builder/release-note/flash-builder-4-7-release-notes.html](http://helpx.adobe.com/flash-builder/release-note/flash-builder-4-7-release-notes.html) )

在 Flash Builder 目录中有一个实用程序目录，其中包含 Adob​​e Flash Builder 4.7 Plug-in Utility 程序。运行它以安装到现有的 Eclipse 安装中。

与 FB 4.6 不同，FB 4.7 有 32 位和 64 位版本。确保安装匹配的 Eclipse 和 Flash Builder 版本。

# javascript - 测验按钮 - 不正确的计数器

> ID：15254954
> 
> 赞同：-2
> 
> 时间：2013-03-06T18:18:12.707
> 
> 标签：javascript, counter

我正在尝试创建一个测验，每次用户单击下一个问题时，问题编号都会增加。从那里我会添加更多，但目前我的柜台似乎关闭了。我得到 10 而不是 1 作为第一个数字。这是我的代码：

```
function nextQuestions() {
    for (var qnumber = 0; qnumber < 11; qnumber++) {
        document.getElementById('questionNumber').value = qnumber;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:23:48.107

您正在替换元素*questNumber*的值，因此在循环结束时将其设置为最后一个值。所以*questNumber*的值随着循环的执行而改变：

```
value: 0
value: 1
value: 2
value: 3
value: 4
value: 5
value: 6
value: 7
value: 8
value: 9
value: 10 
```

所以最后，你看到的将是 10，因为之前的值正在被替换。

# java - 加载 saaj 类库的问题

> ID：15254956
> 
> 赞同：0
> 
> 时间：2013-03-06T18:18:14.860
> 
> 标签：java, soap, saaj

我做了功课，但仍然无法找到解决问题的方法。我通过 NetBeans 创建了一个 WAR 文件，它使用带有附件的肥皂 - saaj 技术。按照建议，我在我的项目中包括：saaj-impl.jar、saaj-ri.jar、saaj-api.jar。但是，当我“热部署”或将 WAR 文件放入 webapps 目录时，会出现以下异常：

```
java.lang.NoClassDefFoundError: com/sun/xml/messaging/saaj/soap/MessageFactoryImpl
source.pkg.SoapClient.sendSoapMessage(SoapClient.java:120)
source.pkg.Air.<init>(Air.java:233)
source.flightops.AirController.<init>(AirController.java:15)
servlets.ResultsDisplay.processRequest(ResultsDisplay.java:40)
servlets.ResultsDisplay.doGet(ResultsDisplay.java:91)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.ClassNotFoundException: com.sun.xml.messaging.saaj.soap.MessageFactoryImpl
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
source.pkg.SoapClient.sendSoapMessage(SoapClient.java:120)
source.pkg.Air.<init>(Air.java:233)
source.flightops.AirController.<init>(AirController.java:15)
servlets.ResultsDisplay.processRequest(ResultsDisplay.java:40)
servlets.ResultsDisplay.doGet(ResultsDisplay.java:91)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621 
```

我试图像这样明确指出类路径：

```
System.setProperty("java.class.path", wjp.getDataDir() + "/webapps/" + wjp.getAppContext() + "/WEB-INF/lib"); 
```

我做了更多研究并尝试调用类加载器：

```
try 
{          
Class.forName("com.sun.xml.messaging.saaj.soap.MessageFactoryImpl").getClassLoader();
} 
catch (ClassNotFoundException ex) 
{
        Logger.getLogger(AirDriver.class.getName()).log(Level.SEVERE, null, ex);
} 
```

但仍然与上述相同的例外。这很奇怪，因为当我重新启动服务器时，有时应用程序工作正常 - 收到 SOAP 响应并显示结果，但**只有**在我重新启动服务器之后。这暗示了当服务器重新启动时以某种方式找到 saaj 类的事实？但是，问题是当我“热部署”或将更新的 WAR 放入 webapps 目录而不重新启动时它必须工作。每次更新 WAR 时，我们都无法重新启动生产服务器。

另一个奇怪的问题是，在我重新启动服务器后，启动这个 WAR 应用程序它工作正常。但是，使用相同 saaj 类库的其他应用程序会抛出同样的异常！因此，要么使用此 WAR 应用程序而其他应用程序不工作，要么使用其他应用程序并且此 WAR 应用程序抛出此异常。是否存在某种有限的 saaj 库共享？我以前从未见过这样的事情。

拜托，有人可以帮我解决这个非常奇怪（和讨厌）的问题吗？

谢谢你，维克多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:59:42.177

该问题已通过在主 Web 容器（即 ROOT/WEB-INF）中重新实现应用程序而不是作为单独的 portlet 来解决。

# eclipse - 从 WSDL 生成的 Eclipse WebService 客户端无法正常工作

> ID：15254962
> 
> 赞同：0
> 
> 时间：2013-03-06T18:18:34.557
> 
> 标签：eclipse, web-services, enums, wsdl

我有一个带有以下代码的wsdl（只是一部分）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:sch="http://www.test.com/App" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://www.test.com/App" targetNamespace="http://www.test.com/App">
  <wsdl:types>
    <xs:schema xmlns:process="http://www.test.com/App" xmlns:xdb="http://xmlns.oracle.com/xdb" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.test.com/App" version="1.0" xdb:mapStringToNCHAR="true" xdb:mapUnboundedStringToLob="true" xdb:schemaURL="ddd" xdb:storeVarrayAsTable="true">
    <xs:simpleType name="ClientCountry">
        <xs:restriction base="xs:string">
            <xs:enumeration value="CLCO1">
                <xs:annotation>
                    <xs:documentation>Spain</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="CLCO2">
                <xs:annotation>
                    <xs:documentation>Portugal</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
        </xs:restriction>
    </xs:simpleType>
    </xs:schema>
  </wsdl:types>
</wsdl:definitions> 
```

我已经使用这个 wsdl 使用 Eclipse（文件->新建->其他->Web 服务->Web 服务客户端）生成 Java 源文件。它从 wsdl 生成了所有类。但是，在生成枚举类型时，就这样做了：

```
public class ClientCountry implements java.io.Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = -2280793720095616022L;
    private java.lang.String _value_;
    private static java.util.HashMap _table_ = new java.util.HashMap();

    // Constructor
    protected ClientCountry(java.lang.String value) {
        _value_ = value;
        _table_.put(_value_,this);
    }

    public static final java.lang.String _CLCO1 = "CLCO1";
    public static final java.lang.String _CLCO2 = "CLCO2";
    public static final ClientCountry CLCO1 = new ClientCountry(_CLCO1);
    public static final ClientCountry CLCO2 = new ClientCountry(_CLCO2);
    public java.lang.String getValue() { return _value_;}
    public static ClientCountry fromValue(java.lang.String value)
          throws java.lang.IllegalArgumentException {
        ClientCountry enumeration = (ClientCountry)
            _table_.get(value);
        if (enumeration==null) throw new java.lang.IllegalArgumentException();
        return enumeration;
    }
    public static ClientCountry fromString(java.lang.String value)
          throws java.lang.IllegalArgumentException {
        return fromValue(value);
    }
    public boolean equals(java.lang.Object obj) {return (obj == this);}
    public int hashCode() { return toString().hashCode();}
    public java.lang.String toString() { return _value_;}
    public java.lang.Object readResolve() throws java.io.ObjectStreamException { return fromValue(_value_);}

} 
```

I was wondering if there could be any option to make it generates a simple enumeration class using the xs:documentation description as keys for the enum.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:30:38.987

好的。使用 jaxws 和 maven，现在生成的类是：

```
@XmlType(name = "ClientCountry")
@XmlEnum
public enum ClientCountry {

    /**
     * Spain
     * 
     */
    @XmlEnumValue("CLCO1")
    CLCO_1("CLCO1"),

    /**
     * Portugal
     * 
     */
    @XmlEnumValue("CLCO2")
    CLCO_2("CLCO2");
    private final String value;

    ClientCountry(String v) {
        value = v;
    }

    public String value() {
        return value;
    }

    public static ClientCountry fromValue(String v) {
        for (ClientCountry c: ClientCountry.values()) {
            if (c.value.equals(v)) {
                return c;
            }
        }
        throw new IllegalArgumentException(v);
    }

} 
```

好多了，但仍然不完美，是吗？

# visual-studio - LNK1561 用 Visual Studio 2012 Pro 手工编码 C++ MFC hello world

> ID：15254967
> 
> 赞同：-1
> 
> 时间：2013-03-06T18:18:44.117
> 
> 标签：visual-studio, mfc, linker-errors

离开十年后，我正在使用 Jeff Prosie 的 Programing MFC 来重建我对使用 Visual Studio 2012 的 MFC 的理解。他的简单 Hello World 程序生成 LNK 1561: entry point must be defined 错误。由于我声明了一个全局 CWinApp，我不明白这一点。我看到的所有建议都引用了 VS 2012 中未出现的 VS 2010 菜单项。任何人都可以让我开始（我还不想使用 MFC 向导）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:21:43.830

如果您“手工制作”一个项目，很可能您没有正确设置 MFC 程序的所有设置，包括 MFC 库的链接和设置正确的入口点。

我知道您说您不想使用 MFC 向导，尽管我不确定您*为什么*不这样做……但答案是**使用 MFC 向导**。

# mysql - 在 Mysql 的“Order By”中使用复杂的表达式

> ID：15254968
> 
> 赞同：7
> 
> 时间：2013-03-06T18:18:50.243
> 
> 标签：mysql, sql-order-by

我有一张桌子“交易”

```
+---------+---------+
| deal_id | expired |
+---------+---------+
|       1 |       0 |
|       2 |       0 |
|       3 |       0 |
|       4 |       0 |
|       5 |       1 |
|       6 |       0 |
|       7 |       1 |
|       8 |       1 |
|       9 |       0 |
|      10 |       0 |
+---------+---------+ 
```

我想归档以下订单：

1) 底部的过期交易

2) deal_id 高于 5 在顶部的交易，按 deal_id 排序

3) 处理 id 低于/等于 5 在底部由 RAND 排序的种子

* * *

SELECT deal_id, expired FROM Deal ORDER by expired = 1, deal_id < 5, rand(1) desc

这个查询是错误的，因为表的顶部也将按 rand 排序，而我想按 deal_id desc 排序的顶部。

* * *

这是它应该照顾的方式：

```
+---------+---------+
| deal_id | expired |
+---------+---------+
|       10|       0 | top part ordered by
|       9 |       0 | deal_id desc 
|       6 |_______0 | if ( deal_id < 5 AND expired = 0 )
|       4 |       0 |  
|       1 |       0 | bottom part ordered
|       5 |       0 | by rand(seed) 
|       7 |       0 | expired = 1 at the bottom
|       5 |       1 |
|       7 |       1 |
|       8 |       1 |
+---------+---------+ 
```

是否可以通过仅使用“ORDER BY”中的表达式来存档？**我知道我可以使用 UNION，但我真的不想**，它会让我在我的框架中保持简单。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T18:26:56.667

像这样的东西？

```
SELECT
  deal_id,
  expired
FROM
  Deal
ORDER BY
  expired = 1,
  deal_id < 5,
  case when (expired=1 or deal_id<5)=false
       then deal_id
       else rand()
  end desc 
```

请[在此处](http://sqlfiddle.com/#!2/8e7c0/3)查看小提琴。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T18:23:52.983

你可以使用 CASE 语句

```
ORDER BY CASE 
 WHEN expired = 1 THEN 99 
 WHEN deal_id < 5 THEN deal_id 
 WHEN deal_id > 5 THEN Rand() + 5 //so that the value is between 5 and 6
 ELSE 100 END 
```

# jquery - 如何使用 Jquery 事件触发 window.fbAsyncInit

> ID：15254971
> 
> 赞同：1
> 
> 时间：2013-03-06T18:18:55.820
> 
> 标签：jquery, facebook-javascript-sdk

我想在用户单击我的 index.html 页面上的链接后初始化 facebook javascript sdk 并检查登录状态。由于某种原因，这行不通。jQuery 正在工作，当我单独测试初始化​​代码时它可以工作，但是当我把它放在一起时它停止工作。知道为什么吗？

这是我的 index.html 页面：

```
<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

</head>
<body>
<div id="fb-root"></div>
<script> 
```

// 这个jquery应该触发init进程

```
$('document').ready(function(){
          $('a').click(function(){
             alert("this works");

  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '39672*******', // App ID
      channelUrl : '//http://spilot.koding.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // get login status
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // connected: redirect to start scene page
    alert("testing");
  } else if (response.status === 'not_authorized') {
    // not_authorized
    login();
  } else {
    // not_logged_in
    login();
  }
 });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

//显示登录框

```
 function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            alert("connected");
        } else {
            // cancelled
        }
    });
}
});
});

</script>

<div id="findScene"><a href=""><h1>Find</h1></a></div>
<div id="startScene"><a href=""><h1>Host</h1></a></div> 
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:30:09.347

JS SDK 是异步加载的——它可能在整个页面/其余资源之前完成。

所以传递一个函数`window.fbAsyncInit`可能已经太晚了——因为你只在`$('document').ready`触发时才这样做。

将处理程序函数分配给`window.fbAsyncInit`您的`$('document').ready`函数之外。

# node.js - 如何使用 node.js 请求模块使用我自己的证书进行 SSL 调用？

> ID：15254976
> 
> 赞同：21
> 
> 时间：2013-03-06T18:19:09.420
> 
> 标签：node.js, ssl, https, request, certificate

我正在使用 node.js 和这个请求模块对另一台服务器进行 HTTP 调用。

[https://github.com/mikeal/request](https://github.com/mikeal/request)

它工作得很好。我现在需要修改此代码以使用我公司的 SSL 证书通过 SSL 进行调用。在请求模块的文档中，它说明了 strictSSL 选项：

“strictSSL - 设置为 true 以要求 SSL 证书有效。注意：要使用您自己的证书颁发机构，您需要指定使用该 ca 作为选项创建的代理。”

这听起来像是我需要做的，但我不明白这句话：“指定一个使用该 ca 作为选项创建的代理。”。

1）他们所说的“代理人”是什么意思？2) 我如何“指定代理” 3) 我如何创建代理“以该 ca 作为选项”？

一个代码示例会很棒，但任何线索都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-29T11:40:24.070

这在很大程度上详细说明了[Peter Lyons 的回答](https://stackoverflow.com/a/15255239/1080564)，并提供了一个例子。

我假设您正在请求使用由*您自己的*证书颁发机构 (ca) 签名的证书通过 HTTPS 运行的域。

当你使用[请求库](https://github.com/mikeal/request)时，不需要自己实际实例化代理，你可以简单地为`agentOptions`你提出的请求提供一些。下面是一个例子：

```
request({
  method: "POST",
  uri: "https://localhost/entries",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    name: "someEntry"
  }),
  agentOptions: {
    ca: fs.readFileSync("certs/ca.cert.pem")
  }
}, function(error, httpResponse, body) {
  //handle response
}); 
```

这里重要的是`agentOptions`，您提供 ca 的证书。现在接受所有使用由 ca 签名的证书的域。想象一个 ca **CA1**签署了三个域，**D1**，**D2**，**D3**。将 ca 设置为**CA1**会导致允许对所有域**D1**、**D2**、**D3**的请求（但不允许**D4**由不同的 ca 签名）。

要点是：`"certs/ca.cert.pem"`必须是签名证书颁发机构的证书。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T18:32:56.870

1.  “代理”是指节点标准模块中的[http.Agent实例](http://nodejs.org/docs/latest/api/all.html#all_class_http_agent)`http`
2.  文档表明该代理实例将在我相信`request`的`pool`选项中传递给，尽管我自己没有这样做，并且文档确实在这里的细节上很少。基于略读代码，我认为您可能只需要`options.ca`
3.  request 似乎直接支持`options.ca` 并在[这里使用它](https://github.com/mikeal/request/blob/master/index.js#L480)`getAgent`

所以我的猜测可能只是`options.ca`作为一个字符串传入，该字符串是贵公司证书颁发机构的公钥，然后查看请求是否从那里做正确的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-04T15:01:53.200

```
const request = require('request');

request.post({
                url: strRSAUrl,
                agentOptions: {
                    ca: fs.readFileSync('path-to-cacert.pem')
                },
                form: {
                    some_key: some_value,
                }
            }, function (error, response, body) {
                objResponse.send(body);
            }); 
```

有关详细信息，您可以参考[`nodejs#request`](https://github.com/request/request)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-12T07:34:49.470

也许我误解了这个问题，但根据我的经验，如果你不需要做任何特别的事情`require('https')`，呼叫会自动通过 SSL 发出。

我刚刚用我的谷歌地图 api 调用测试了这一点，事实上，如果我`require('http')`谷歌抱怨它希望调用通过 SSL 进行，但是当我添加时，`s`一切都按预期工作。

# wpf - 控件绑定中的控件

> ID：15254980
> 
> 赞同：0
> 
> 时间：2013-03-06T18:19:19.603
> 
> 标签：wpf, user-controls, caliburn.micro

行。所以我有以下几行的主要观点

```
<!-- The first one is commented cause I tried it and it failed harder -->
<!--<ContentControl Name="BcModel" Grid.Column="2" Width="300" Height="300"/>-->
<local:BigCalendarDateView x:Name="BcModel" Grid.Column="2" Width="300" Height="300"/> 
```

和 ViewModel

```
[Export(typeof(AppViewModel))]
public class AppViewModel : Screen
{
    public BigCalendarDateViewModel BcModel { get; set; }

    [ImportingConstructor]
    public AppViewModel(BigCalendarDateViewModel mod, IEventAggregator events)
    {
        this.DisplayName = "Calendar";
        events.Subscribe(this);
        BcModel = mod;
    }
} 
```

对于`BigCalendarDateViewModel`, 我有视图

```
<!-- Commented because I tried this also -->
<!--cal:Message.Attach="[Event Click] = [Action ChangeState]"-->
<Button Name="ChangeState" Content="Button" HorizontalAlignment="Left" Margin="76,156,0,0" Grid.Row="2" VerticalAlignment="Top" Width="138"/> 
```

在 ViewModel 中

```
[Export(typeof(BigCalendarDateViewModel))]
public class BigCalendarDateViewModel : PropertyChangedBase
{
    ...
    public void ChangeState()
    {
        Console.Beep();
    }
} 
```

我可以调试通过，AppView、AppViewModel、BigCalendarDateView和BigCalendarDateViewModel都被初始化了，BigCalendarDateViewModel直观地显示了，但是当我点击按钮时，它要么说找不到方法，要么什么都不做.

似乎 BigCalendarDateViewModel 从未连接到 BigCalendarDateView。

当我为控件创建一个引导程序时，它会在自己的窗口中弹出它，它工作正常（在新窗口中，而不是在第一个窗口中）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:26:44.160

我认为您可以通过执行以下操作显式地将视图模型提供给视图：

```
<local:BigCalendarDateView Grid.Column="2" Width="300" Height="300" cal:Bind.Model={Binding BcModel} /> 
```

# google-app-engine - 如何使用 Google App Engine Search API 找到最近的文档？

> ID：15254983
> 
> 赞同：6
> 
> 时间：2013-03-06T18:19:31.060
> 
> 标签：google-app-engine, python-2.7, gae-search

[我在GAE 搜索](https://developers.google.com/appengine/docs/python/search/overview)索引中有大约 400,000 个文档。所有文件都有一个`location` `GeoPoint`属性，并且分布在全球各地。一些文件可能与任何其他文件相距超过 4000 公里，而另一些文件可能彼此相距几米。

我想找到最接近特定坐标集的文档，但发现以下代码给出了不正确的结果：

```
from google.appengine.api import search

# coords are in the form of a tuple e.g. (50.123, 1.123)
search.Document(
    doc_id='meaningful-unique-id',
    fields=[search.GeoField(name='location' 
                            value=search.GeoPoint(coords[0], coords[1]))])

# find document function radius is in metres
def find_document(coords, radius=1000000):
    sort_expr = search.SortExpression(
        expression='distance(location, geopoint(%.3f, %.3f))' % coords,
        direction=search.SortExpression.ASCENDING,
        default_value=0)

    search_query = search.Query(
        query_string='distance(location, geopoint(%.3f, %.3f)) < %d' \
                    % (coords[0], coords[1], radius),
        options=search.QueryOptions(
            limit=1,
            ids_only=True,
            sort_options=search.SortOptions(expressions=[sort_expr])))

    index = search.Index(name='document-index')
    return index.search(search_query) 
```

使用此代码，我将获得一致但不正确的结果。例如，搜索离伦敦最近的文件表明最近的文件在苏格兰。我已经证实有成千上万的更接近的文件。

我将问题缩小到`radius`参数太大。如果半径降至 12 公里左右（`radius=12000`），我会得到正确的结果。12公里半径内一般不超过1000个文档。（可能与 相关`search.SortOptions(limit=1000)`。）

问题是，如果我在地球上一个数千英里没有任何文件的稀疏区域，我的搜索功能将不会返回任何`radius=12000`（12 公里）。无论我身在何处，我都希望它能够将最近的文件返回给我。如何通过一次调用 Search API 来始终如一地完成此任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T00:37:51.420

我相信问题如下。您的查询将选择最多 10K 个文档，然后根据您的距离排序表达式对这些文档进行排序并返回。（也就是说，排序实际上并不是所有 400k 文档。）所以我怀疑一些地理上更接近的点不包括在这个 10k 选择中。这就是为什么当您缩小搜索半径时事情会更好，因为您在该半径内的总点数较少。

从本质上讲，您希望以一种对您查询的内容有意义的方式将您的查询“命中”降低到 10k。您至少可以通过两种方式解决这个问题，您可以将它们结合起来：

*   添加排名，以便按排名顺序返回最“重要”的文档（通过某些在您的域中有意义的标准），然后这些文档将按距离排序。
*   过滤一个或多个文档字段（例如，“业务类别”，如果您的文档包含有关业务的信息）以减少候选文档的数量。

（我不相信这个 10k 阈值目前在 Search API 文档中；我已经提交了一张票来添加它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:25:39.010

我有完全相同的问题，我认为不可能。当您自己发现可能的结果多于返回的结果时，就会出现问题。谷歌算法在加载限制后退出，然后对结果进行排序。

我已经看到了与您相同的集群及其搜索 API 的一部分。

一种技巧是将您的搜索细分为子部门，同时进行多个调用，然后合并和排序结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:31:05.907

疯狂的想法，为什么不保留/记录与 3 个点的距离，然后据此计算。

# python - Pandas 按名称索引和访问列

> ID：15254984
> 
> 赞同：2
> 
> 时间：2013-03-06T18:19:32.990
> 
> 标签：python, indexing, dataframe, pandas

在使用特定列对 df 进行索引后，我试图通过列名访问 pandas 数据框，它返回不正确的列值。

```
import pandas as pd
rs =pd.read_csv('rs.txt', header="infer", sep="\t",  names=['id', 'exp','fov','cycle', 'color', 'values'], index_col=2)

rs.cycle.head() 
```

我在这里用'fov'索引df，我想访问'cycle'列，它给了我颜色列。我想我在这里遗漏了什么？

* * *

编辑输入文件的前几行是：

```
6 3 1 G 0.96593 
6 3 1 O 0.88007 
6 3 1 R 0.94305 
6 3 2 B 0.90554 
6 3 2 G 0.93146 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:33:33.107

我认为问题的出现是因为您的数据文件有 5 列，而您的`names`列表有 6 个元素。要验证，请检查列中的前几个值-如果我是对的，`id`这些都将设置为。`6`列中的前几项`exp`将具有值`3`。

要解决此问题，请像这样读取您的输入文件：

```
rs =pd.read_csv('rs.txt', header="infer", sep="\t",  names=['exp','fov','cycle', 'color', 'values'], index_col=2 
```

Pandas 会自动插入行标识符。

# excel - 循环打开 Excel 工作表时出现 VBA 错误

> ID：15254986
> 
> 赞同：0
> 
> 时间：2013-03-06T18:19:34.260
> 
> 标签：excel, vba

我正在尝试在几个 excel 表上执行一些程序并使用以下代码。我收到**Application.Workbooks.Open (StrFile)**的运行时错误 1004 。似乎无法找到该文件。我认为这是因为它没有显示文件路径，而只是屏幕截图中显示的目录中的文件：

![发生错误的位置的图像](../Images/3fa216b307e8fd97df3933db34d93151.png)

```
Sub ExcelerFinal()

Dim FileCount As Integer
Dim FileName As String, FileNameGIS As String
Dim FilePath As String, StrFile As String

FileCount = 0
FileName = "MyFile_" + CStr(FileCount)
FileNameGIS = "MyFileGIS_" + CStr(FileCount)

FilePath = "E:\Database Project\ACS Estimate 2011\LoopTest\Test_RawData\"

StrFile = Dir(FilePath & "*.xlsx")

While StrFile <> ""
    Application.Workbooks.Open (StrFile) 'Error occurs on this line 
    FileCount = FileCount + 1
    FileName = "MyFile_" + CStr(FileCount)
    FileNameGIS = "MyFileGIS_" + CStr(FileCount)

    ' Lots of code to manipulate file
    ' unrelated to issue
    Windows(FileNameGIS).Close
    StrFile = Dir
Wend
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:28:04.013

改用：

```
Application.Workbooks.Open(FilePath & strFile) 
```

# c# - 将原始数据加载到位图中 - 我做错了什么？

> ID：15254990
> 
> 赞同：2
> 
> 时间：2013-03-06T18:19:44.843
> 
> 标签：c#, .net, image

我正在使用 c sharp，.net 4（客户端配置文件，如果这很重要）并且我有一个`byte`包含图像原始数据的数组。具体来说，这张图片：

![好形象](../Images/624ca0be20dc6347593fd62df9ff356b.png)

[它是 SANE 测试后端的输出，格式在](http://www3.sane-project.org/html/doc008.html#s3.2)SANE 网站上有完整描述。顺便说一句，我已经传入了参数：

*   深度：8
*   模式：彩色

它已经返回：

*   格式：RGB
*   深度：8
*   行数：196
*   每行像素：157
*   每行字节数：471
*   一个 92316 字节长的字节流

因此，这些数字似乎是合理的 (196 * (157 * 471) = 92316) - 每个像素三个字节（24 位）。

通过阅读 SANE 文档，数据从左上角从左到右，从上到下按每个像素三个字节进行排序 - 就像这样（他们有更好的图片，对不起这种 ASCIItastic 方法）：

```
red,green,blue   red,green,blue  
--------------   --------------
    byte 1           byte 2       ... 
```

因为我对图像非常了解，所以我认为将它加载到位[图](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)中会非常简单，我敲了这个：

```
var bmp = new Bitmap(157, 196, PixelFormat.Format24bppRgb);
BitmapData bmpData = bmp
    .LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height),
              ImageLockMode.ReadWrite,
              bmp.PixelFormat);
Marshal.Copy(data, 0, bmpData.Scan0, data.Length);
bmp.UnlockBits(bmpData); 
```

但它产生了这个：

![坏形象](../Images/4ab910eda133b6d593bc23c5b5499cf2.png)

关闭，但没有雪茄，可以这么说。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:23:02.670

问题是在位图中，一行的字节和下一行的字节之间存在间隙（更多[here ）。如果速度不是您的主要关注点，您可以使用](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.bitmapdata.stride.aspx)[SetPixel](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.setpixel.aspx)和循环更轻松地做到这一点。

**编辑：**
与 SetPixel 相比，这将显着提高速度，但恐怕您仍然必须使用循环；）

```
for(int i = 0; i < bmp.Height; i++) {
    Marshal.Copy(data, 
        i * bmp.Height,
        bmpData.Scan0 + i * bmpData.Stride,
        bmp.Width * 3);
} 
```

请注意，我没有测试过代码，但它应该足以给你这个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:24:27.420

位图需要将行填充到某个特定大小（4 字节，搜索格式详细信息，即[此处](http://www.gamedev.net/page/resources/_/technical/game-programming/how-to-load-a-bitmap-r1966)）。

结果，每行 157 个像素并不完全映射为位图位的二进制格式，您会看到下一行移动了一点。我认为您需要为每行分配 158*3 字节，并将每一行从源（由于缺少填充而不是位图）格式复制到目标，用 0 填充每行的最后 3 个字节。

# google-app-engine - Google App Engine - “请改用 https://accounts.google.com/ServiceLogin。” 错误

> ID：15254991
> 
> 赞同：1
> 
> 时间：2013-03-06T18:19:45.803
> 
> 标签：google-app-engine, redirect, login, go, google-authentication

我在我的 Google App Engine Go 应用程序中遇到了一个奇怪的错误。当我提示用户登录时，他们会被重定向到 Google 的登录屏幕。登录后，他们收到一条消息

> 请改用[https://accounts.google.com/ServiceLogin](https://accounts.google.com/ServiceLogin)。

几个月来我没有碰过我的应用程序的代码，以前这不是问题。我的登录代码基本上是[官方文档中可以看到的](https://developers.google.com/appengine/docs/go/users/overview)。我可以轻松地在 Chrome 和 Firefox 以及多个帐户中重新创建此错误。

该应用程序可以在[这里](https://furstore.appspot.com/)查看（NSFW-ish），登录按钮在每个页面上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:52:51.293

我认为这可能是我们这边的一个错误。我建议您在[我们的问题跟踪器](https://code.google.com/p/googleappengine/issues/list)上提交错误报告，希望提供更多详细信息，例如您看到该消息的 URL、应用程序 ID 等。

# java - Android 应用的背景图片

> ID：15254992
> 
> 赞同：0
> 
> 时间：2013-03-06T18:19:46.003
> 
> 标签：java, android

我是一名业余 android 程序员，我正在尝试对我的应用程序进行风格化。我从网上找了一张图片，这里是[链接](https://si0.twimg.com/profile_images/1734009318/NWHS_JAG.jpg)。我想将其设置为应用程序的背景。我会这样做的。我真的不明白@drawable/background 的概念，它是如何工作的，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:27:55.290

将图片放入`res/drawable`文件夹。然后在您的布局文件 ( `layout/main.xml`) 中为您的默认项目添加此图像视图

```
<ImageView
    android:id="@+id/myImageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:scale_type="center_crop"
    android:layout_alignParentTop="true" android:src="@drawable/your_picture_name"/> 
```

但不要添加图片的文件扩展名。只有文件名。例如，如果您的图片全名 BEATIFULL_CAR`.JPG`仅添加 BEATIFULL_CAR

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:26:52.170

1.  Drawable 是您的 Android 项目中的一个资源文件夹，您可以在其中粘贴不同的数据。
2.  如果您想使用任何图像作为背景复制/粘贴到 Drawable 文件夹中，并使用`android:background="@drawable/your_image_name"`layout_main.xml 中的属性作为

    `<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" android:background="@drawable/your_picture_name" android:gravity="center_vertical|center_horizontal"`

就是这样。

[您可以在此链接](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)上了解有关 Drawable 的更多信息

# java - 将数组从主类传递到函数之间的冲突，但也想使用我的“getter”方法中的返回值

> ID：15254993
> 
> 赞同：1
> 
> 时间：2013-03-06T18:19:46.880
> 
> 标签：java, methods, static, non-static

在我的主类中，我有一个静态方法，我将数组传递到其中。这是一个静态方法，因为如果我想从主类体传递一些东西给这个方法，它必须是静态的。在一个单独的类中，我有一系列 getter 和 setter（必须是非静态的）。

如何传递我的静态数组并使用非静态 getter 和 setter？

编辑-在 arraySearch 方法中...我无法传入 Person 数组并访问 Person 类中的 getter

公共类主要{

```
public static void main(String[] args) {
    Person One = new Person("Alice","Foo", 22, false);
    Person Two = new Person("Alice", "Foo",22, false);
    Person Three = new Person("Bob","Bar",99, false);
    Person Four = new Person("Joe","Blogs",64, false);
    Person Five = new Person("Jane", "Joe",42, false);

    Person [] People = {One,Two,Three,Four,Five};
    printArray(People);

}

public static void printArray(Person [] People)
{
    for(int i=0;i<People.length;i++)
    {
        System.out.println(People[i]);
    }
}

public void arraySearch(Person [] People)
{
    for(int i=0;i<People.length;i++)                                //Searches the Array of Objects
    {
        String firstName = Person.getFirstName();
        String secondName=Person.getSecondName();
        if((firstName.equals("Joe")&&secondName.equals("B" +        //Searches for Joe Blogs and Jane Joe
                "logs"))|| ((firstName.equals("Ja" +
                        "ne")&&secondName.equals("Joe"))))
        {
            int age=Person.getAge();
            Person.setAge(age+1);                                   //Increments Age by 1
        }
    }
} 
```

}

公共类人{

```
private String mfirstName;
private  String msecondName;
private  int mage;
private boolean misRetired;

public Person(String firstName,String secondName,int age, boolean isRetired)
{
    mfirstName=firstName;
    msecondName=secondName;
    mage=age;
    misRetired=isRetired;
}

//GETTERS 

public  String getFirstName()
{
    return mfirstName;
}
public  String getSecondName()
{
    return msecondName;
}
public  int getAge()
{
    return mage;
}
public  boolean getRetired()
{
    return misRetired;
}

//SETTERS

public  void setFirstName(String firstName)
{
    mfirstName=firstName;
}
public  void setSecondName(String secondName)
{
    msecondName=secondName;
}
public  void setAge(int age)
{
    mage=age;
}
public  void setRetired(boolean isRetired)
{
    misRetired=isRetired;
}

//STRING

public String toString()
{
    return (mfirstName+"-"+msecondName+"-"+mage+"-"+misRetired);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:27:06.903

这是一个非常基本的 Java 问题。您需要从静态方法创建包含 setter/getter 的对象实例。您还可以在此对象的 setter 中传递静态数组。然后你应该能够调用那些 getter/setter 方法。

```
public class Main
{

     public static void main(String[] args)
     {
         MyClass myclass = new MyClass();
         myclass.setArgs(args);
         System.out.println(myclass.getArgs());
     }
}

public class MyClass
{
     private String[] args;

     public String[] getArgs()
     {
         return args;
     }

     public void setArgs(String[] args)
     {
         this.args= args;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:43:39.583

来自 vmoksha 的 Sunil kumar

您要求更深入的导航只需创建特定的实例或在主类中创建 getter &and setter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:35:37.537

Amit 的答案是正确的；这只是有更多信息，并且更符合您在问题中描述的情况。

你的基本前提“它是一个静态方法，因为如果我想从主类体传递一些东西给这个方法，它必须是静态的。” 是错的。将数组传递给的方法不需要是静态的。这是一些代码：

```
public final class Main
{
    private static final String[] staticOTron =
    {
        "one",
        "two",
        "three"
    };

    public static void main(final String[] args)
    {
        String[] hootBerrySause;
        Tool tool = new Tool();

        tool.setStaticOTron(staticOTron);

        hootBerrySause = tool.getStaticOTron();

        for (String value : hootBerrySause)
        {
            System.out.println("Value: " + value);
        }
    }
}

// this can be in a different file.
public final class Tool
{
    private static String[] staticOTron;

    public void setStaticOTron(final String[] newValue)
    {
        staticOTron = newValue;
    }

    public String[] getStaticOTron()
    {
        return staticOTron;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:30:37.180

您必须使用 getter 从类中创建一个对象实例。

# vb.net - Visual Basic 上的密码

> ID：15254994
> 
> 赞同：0
> 
> 时间：2013-03-06T18:19:50.993
> 
> 标签：vb.net, passwords

我在我的 ms 访问权限上设置了一个密码，该密码在我的 Visual Basic 项目中充当数据库。当我尝试运行时，我有这个错误的代码

Me.TblMedicineTableAdapter.Fill(Me.SampleDataSet.tblMedicine)

它说不是有效的密码。我不知道如何将我的密码放入代码中以便它可以访问所以任何人都可以帮助我如何输入我的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:34:58.163

转到您的项目（Visual Studio / Basic）并单击数据>显示数据源..从那里会弹出一个窗口窗格。右键单击您的数据源，然后单击使用向导配置数据源。如果系统提示您“选择数据集编辑器”，只需单击继续向导，然后单击确定。

或者

转到数据集设计器并右键单击您的数据集，然后单击“配置”。

单击“上一个”，直到您进入包含“连接字符串”的窗口。单击新建连接。将弹出一个窗口（添加连接），从这里您可以尝试测试您的连接并输入密码，每次运行代码时都会自动填写密码。选择您将使用的 DataSourceName 并填写下面的登录信息。点击“测试连接”。如果它成功了，那么这次你不应该再次得到你的错误。

我正在使用 Microsoft Visual Studio 2010 顺便说一句。如果您还有任何问题，请告诉我。