# StackOverflow 问答 15687000-15687999

# c++ - 使用 OpenCV 多通道 Mat 沿通道方向访问像素

> ID：15687005
> 
> 赞同：0
> 
> 时间：2013-03-28T16:20:42.243
> 
> 标签：c++, visual-c++, opencv, image-processing

我有一组尺寸相同并代表相同对象但有一些光线差异的图像。我想使用所有图像逐个像素地研究这些差异。我想将它们堆叠成一个 3d 数组，作为具有许多通道的多通道 Mat。我们可以说 (x,y) 是每个图像内像素的坐标，而 (x,y,z) 是 Mat 中第 z 个通道的 (x,y) 点的坐标。

我正在寻找一种使用 (x,y) 坐标索引平行六面体的方法，以便获取 z 方向上的值数组。换句话说，我正在寻找一种方法：

```
Mat 3dMat; // previously initialized as a 3d stack of images
std::vector<byte> z_values = 3dMat.z_vec(x,y); // pseudo-code to explain what I'm trying to achieve 
```

任何想法？预先感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:43:51.393

您必须创建一个数据类型，该数据类型具有您的垫子应具有的通道大小/数量。因此，您可以使用 OpenCV 类型，例如

```
Mat image(size,CV_8UC3);  // 3 -channel mat
cv::Point3_<uchar> val = image.at<cv::Point3_<uchar> >(row,column); 
```

或者您创建自己的：

```
struct MyType{ uchar x,y,z; };
MyType val = image.at<MyType>(row,column); 
```

我认为您不能直接使用向量类型。您可以使用指针，但这似乎不是您想要的。

# android - onCreate(Bundle savedInstanceState) 始终为空

> ID：15687007
> 
> 赞同：6
> 
> 时间：2013-03-28T16:20:49.327
> 
> 标签：android, android-lifecycle, activity-lifecycle

我知道，这个问题之前在 stackoverflow 上被问过，但没有一个答案对我有用。

可能值得一提：

*   我将 ActionBarSherlock 与支持包一起使用。
*   `onSaveInstanceState`当我按下主页按钮时调用方法。该方法`onCreate`总是为`Bundle savedInstanceState`.
*   `onRestoreInstanceState`根本不会调用方法。（我不介意是否`onCreate`有效；））。
*   另外（没关系）我`super.onSaveInstanceState(outState)`试着把`onSaveInstanceState`. 也没有运气。

这是代码。我希望有人遇到这个问题并解决了它。

```
public class MainActivity extends SherlockFragmentActivity {

    private static final String LOG_TAG = MainActivity.class.getSimpleName();

    private static String STATE_TO_STORE = "state_to_store";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        

        Log.d(LOG_TAG, "onCreate: savedInstanceState = " + (savedInstanceState == null ? "NULL" : "Not NULL"));

        // ... more code...
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        Log.d(LOG_TAG, "onRestoreInstanceState: savedInstanceState = " + (savedInstanceState == null ? "NULL" : "Not NULL"));
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        outState.putInt(STATE_TO_STORE, 5); // store some int

        Log.d(LOG_TAG, "onSaveInstanceState bundle: " + outState.toString());
    }

    // ... more code ...

} 
```

日志清楚地表明`onSaveInstanceState`正在调用并且 onCreate 获取`savedInstanceState = NULL`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-07T21:13:21.297

检查您的清单不包含 android:noHistory="true"。

我花了几个小时寻找答案，就这么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T21:01:53.923

就我而言，原因是特定活动没有在清单文件中声明主题。

要解决此问题，请打开 AndroidManifest.xml，单击 Application，在 Application Nodes 中选择崩溃的活动，然后在 Attributes 的 Theme 字段中添加主题。在我的情况下，它是

```
@style/Theme.AppCompat.Light.DarkActionBar 
```

但您可以从其他活动中复制主题。

PS：我知道这是一个老问题的答案，但我在寻找修复程序时偶然发现了它，但没有找到有效的解决方案，所以这可能对其他人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:34:12.350

当您按下 HOME 按钮时，您的活动会暂停并且不会被破坏因此当您从主屏幕再次启动应用程序时，不会调用 onCreate，除非操作系统杀死您的应用程序以回收内存。如果您希望在从主屏幕启动时重新创建活动，请将此行`android:finishOnTaskLaunch="true"`放在活动清单中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T16:30:44.647

onRestoreInstanceState（或保存在 onCreate 中的包）将在 Activity 由于缺乏资源而被系统杀死并在您返回时重新启动时触发。Activity 可能不会被杀死（只是停止）并在不经过 onRestoreInstanceState 的情况下重新启动。换句话说，onSaveInstanceState 会一直被调用，但是 onRestoreInstanceState 如果被系统杀死并恢复，就会被调用。不仅仅是停止和重新启动，不是暂停和恢复，也不是由新意图开始。

在这里查看我的解释。我确定它涵盖了您的问题。

[何时调用 onRestoreInstanceState？](https://stackoverflow.com/questions/15362525/when-is-onrestoreinstancestate-called/15362869#15362869)

# python - python json用于解析

> ID：15687013
> 
> 赞同：0
> 
> 时间：2013-03-28T16:21:00.323
> 
> 标签：python, json, parsing

字符串的组成如下：

```
{resp_to={request=objects_download}|objects={object1={object_name=Name of object 1|objecttype=type1}|object2={object_name=Name of object 2|objecttype=type1}}|error=0} 
```

提取对象中包含的所有对象的所有对象名称的最佳方法是什么？

我对 json 感到困惑，它让我疯狂地理解它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:49:08.303

您可以使用递归下降解析器解析文本，例如[`lepl`](http://www.acooke.org/lepl/)：

```
from string import ascii_lowercase as lowercase, digits
from lepl import AnyBut, Delayed, Drop, Integer, Word

def Parser():
    # ABNF-ish grammar:
    #   object  = '{' pair *( '|' pair )  '}' # sequence of pairs inside {}
    #   pair    = key '=' value               # key, value separated by =
    #   value   = integer / string / object   # any of ..
    #   key     = [a-z_][a-z_0-9]* # regex syntax
    #   string  = [^{}=|]+         # regex syntax
    obj = Delayed() # forward declaration
    key = Word(lowercase + '_', lowercase + '_' + digits) # digit can't be 1st
    value = (Integer() >> int) | AnyBut('{}=|')[1:,...] | obj
    pair = key & Drop('=') & value > tuple # (key, value)
    obj += Drop('{') & pair[1:,Drop('|')]  & Drop('}') > dict
    return obj.get_parse() 
```

例子：

```
import json

text = ("{resp_to={request=objects_download}|"
        "objects={object1={object_name=Name of object 1|objecttype=type1}"
        "|object2={object_name=Name of object 2|objecttype=type1}}|error=0}")
obj = Parser()(text)[0] # parse text into a dict
print(json.dumps(obj, indent=2)) # pretty print 
```

输出：

```
{
  "resp_to": {
    "request": "objects_download"
  }, 
  "objects": {
    "object1": {
      "object_name": "Name of object 1", 
      "objecttype": "type1"
    }, 
    "object2": {
      "object_name": "Name of object 2", 
      "objecttype": "type1"
    }
  }, 
  "error": 0
} 
```

# vmware - VMware 环境中的 CPU ID

> ID：15687015
> 
> 赞同：2
> 
> 时间：2013-03-28T16:21:04.357
> 
> 标签：vmware, virtual-machine

我有一个软件，它在安装时会根据 CPU ID 和主板序列号创建安装密钥。该软件安装在 VMware 虚拟机上并停止工作，说明注册适用于不同的硬件。

我的问题是程序能否看到我正在运行的实际硬件，还是只能看到 VMware 虚拟硬件？如果程序只看到虚拟机“CPU ID”可以改变吗？

另外，VMware 硬件序列号实际与物理硬件有什么关系吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:23:17.187

VMware（或任何其他虚拟化程序）提供的信息与运行它的机器完全无关。事实上，您可以将虚拟机从一台物理主机移动到另一台物理主机，而虚拟机内部的软件根本不知道发生了这种情况。这在很大程度上是 VM 的重点。

VMware 生成的硬件序列号（实际上只是一个 GUID）仅特定于该虚拟机，并且当 VM 在主机之间移动时会携带该序列号。

就基于硬件的许可而言，VM 是一件令人头疼的事情。您可以很容易地做的是检测软件正在虚拟环境中运行并拒绝执行。

# c++ - socket.connect 和 boost::asio::connect 之间的区别

> ID：15687016
> 
> 赞同：14
> 
> 时间：2013-03-28T16:21:07.320
> 
> 标签：c++, boost, tcp, boost-asio

我正在使用 boost::asio 进行网络通信，我想知道为什么在示例中有时使用 the`socket.connect(endpoint)`和其他一些时间`boost::asio::connect(socket, endpoint)`。根据代码在循环中`boost::asio::connect`调用端点迭代器。`socket.connect`所以我的问题是：

**哪个行为更好？**使用 boost::asio::connect 或 socket.connect？就我个人而言，我更喜欢 socket.connect，因为我只有一个端点。或者我可能错了并且误解了 asio 库。

我的第二个问题是，**为什么端点是迭代器？**当给出 1 个 ip 和 1 个端口时，怎么可能有多个连接？

还有一个 boost::asio::write 和 socket.write...

这些例子是：

1.  boost::asio::connect(socket, endpoint) [blocking_tcp_echo_client.cpp](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)。
2.  socket.connect(endpoint) （有点旧但仍在工作）[Daytime.1](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/tutorial/tutdaytime1/src.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T16:58:40.870

`boost::asio::connect()`是一个更高级别的自由函数，它将调用`boost::asio::ip::tcp::socket::connect()`. [文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/connect/overload1.html)在这里相当清楚

> 此函数尝试将套接字连接到一系列端点中的一个。它通过重复调用套接字的连接成员函数来做到这一点，对序列中的每个端点一次，直到成功建立连接。

两者都没有更好的行为，尽管这在很大程度上是一个主观术语。如何处理连接建立取决于您和您的应用程序。如果您需要向用户提供某种反馈，例如：`"attempting to connect to host 1 of 10"`最好`socket.connect()`在循环中使用而不是在`connect()`自由函数中使用。

free 函数需要一个端点迭代器，`connect()`因此它可以连接到所有可能解析的端点。您链接到的 tcp echo 客户端执行此操作

```
tcp::resolver resolver(io_service);
tcp::resolver::query query(tcp::v4(), argv[1], argv[2]);
tcp::resolver::iterator iterator = resolver.resolve(query);

tcp::socket s(io_service);
boost::asio::connect(s, iterator); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-17T04:44:42.130

**为什么端点是迭代器？**

1 个 ip 和 1 个端口的查询（tcp::resolver::query）只有一个端点，但查询的参数可能包含 URL：

```
boost::asio::ip::tcp::resolver::query query("www.baidu.com", "http"); 
```

查询可以获得[baidu.com](http://baidu.com)的多个ip地址，代码如下：

```
boost::asio::ip::tcp::resolver::query query1("www.baidu.com", "http");
boost::asio::ip::tcp::resolver::iterator iter = resolver.resolve(query1);
boost::asio::ip::tcp::resolver::iterator end; 
while (iter != end)
{
    boost::asio::ip::tcp::endpoint endpoint = *iter++;
    std::cout << endpoint << std::endl;
} 
```

输出：

```
180.97.33.108:80
180.97.33.107:80 
```

## ----------

在[daytime.1](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/tutorial/tutdaytime1.html)的示例中：

```
tcp::resolver::query query(argv[1], "daytime");
tcp::resolver::iterator endpoint_iterator = resolver.resolve(query); 
```

> 现在我们创建并连接套接字。上面获得的端点列表可能同时包含 IPv4 和 IPv6 端点，因此我们需要尝试每个端点，直到找到一个有效的端点。这使客户端程序独立于特定的 IP 版本。

Query 可能包含多个端点， boost::asio::connect() 可以自动连接一个。

# perl - 试图理解为什么 Perl Win32 OLE Excel Server 会抛出异常

> ID：15687020
> 
> 赞同：0
> 
> 时间：2013-03-28T16:21:19.403
> 
> 标签：perl, excel, exception, win32ole

试图了解和诊断我在 MS server 2008 上的 Excel 设置有什么问题。请参阅下面的 MWE。这在我的 Win 笔记本电脑上运行良好，但在服务器上不是很好。从干净登录开始，它第一次运行正常，但后续运行失败并显示错误文本：

```
Win32::OLE(0.1709) error 0x80010105: "The server threw an exception"
    in PROPERTYPUT "DisplayAlerts" at mwe.pl line 20 
```

第一次运行将 excel.exe 留在任务管理器中。我想第二次运行是试图重新连接到这个现有实例但失败了。请问我怎么能理解出了什么问题？

或者，如何在脚本完成后终止由 Win32::OLE 启动的 Excel 进程，以便重新运行启动一个新实例？

我的 MWE：

```
use strict;
use warnings;

use Win32::OLE qw(in with);
use Win32::OLE::Const 'Microsoft Excel';

$Win32::OLE::Warn = 3; # Die on Errors.

# use existing instance if Excel is already running
my $Excel;
eval {$Excel = Win32::OLE->GetActiveObject('Excel.Application')};
die "Excel not installed" if $@;

unless (defined $Excel) {
   print "another\n!";
   $Excel = Win32::OLE->new('Excel.Application', sub {$_[0]->Quit;})
            or die "Oops, cannot start Excel";
}

$Excel->{DisplayAlerts}=0;

$Excel->Quit();
undef $Excel; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T18:05:25.757

你可以用引号试试 $Excel->{'DisplayAlerts'} = 0 吗？我就是这样使用它并且它有效。我想所有的参考都是这样写的。

# html - 水平排列div元素并使背景滚动

> ID：15687024
> 
> 赞同：0
> 
> 时间：2013-03-28T16:21:29.083
> 
> 标签：html, css

我`column-count:2`用来在 div 中垂直添加元素，因此水平排列它们。我给 div 一个渐变背景。我希望它与滚动（背景）一起移动。我正在使用的代码是：

```
<!DOCTYPE html>
<style>
.prodLarge {
  margin-bottom:5px;
  margin-left:5px;
  width:200px;
  height:200px;
}

#dispTiles {
  position:absolute;
  top:10px;
  left:10px;
  bottom:10px;
  right:10px;
  margin:10px;
  overflow:auto;
  -moz-column-count:2;
  -webkit-column-count:2;
  column-count:2;
  padding:10px;
  background-image:linear-gradient(to left, #141414 0%, #323232 50%, #000000 100%);
  background-attachment:scroll;
}
</style>
<div id="pagecont">
    <div id="dispTiles">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
    </div>
</div> 
```

`background-attachment:scroll`似乎没有按我的意愿工作。有人可以帮忙吗？此外，即使我使用带有 repeat-x 的背景 PNG 图像，该解决方案也能工作吗？有没有比设置更好的方法来水平排列 div 元素`column:2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:21:35.230

要制作水平滚动效果，我会执行以下操作：

这是在行动：http: [//jsfiddle.net/ySHcL/](http://jsfiddle.net/ySHcL/)

**基于您的原始 CSS**

```
.prodLarge {
  margin-bottom:5px;
  margin-left:5px;
  width:100px;
  height:100px;
}
#dispTilesWrapper {
  position:absolute;
  top:10px;
  left:10px;
  bottom:10px;
  right:50px;
  margin:10px;
  overflow:auto;
}
#dispTiles {
  height: 250px;
  white-space:nowrap;
  padding:10px;
  background: repeating-linear-gradient(to left, #000000 0%, #141414 10%, #555555 20%, #000000 25%);
  /* background: url('some_path_to_an_image') repeat-x; */
  display:table;
} 
```

**带有包装元素的 HTML**

```
<div id="pagecont">
    <div id="dispTilesWrapper">
      <div id="dispTiles">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
        <img class="prodLarge" src="http://microsoft.com/favicon.ico">
      </div>
    </div>
</div> 
```

如您所见，我在#dispTiles 周围添加了一个包装器，以便您可以正确滚动背景元素。顺便说一句，`background-attachment: scroll`是默认行为，所以你不需要指定它。不过，您通常只在垂直滚动期间观察它的效果。要使背景跨越内容的宽度，您需要添加`display: table;`，否则背景只会重复视口的宽度，而不是内容的宽度。我没有使用`column-count`，而是简单地使用`white-space`设置为 的属性`nowrap`。图像倾向于内联显示，但默认情况下它们会换行......所以，这将使它们不换行并为您提供所需的行为。

希望这可以帮助。

# javascript - JavaScript - 如何计算总里程费用

> ID：15687026
> 
> 赞同：0
> 
> 时间：2013-03-28T16:21:32.650
> 
> 标签：javascript, logic, calculator

我目前正在开发一种费用表格，用户将在其中输入他们到目的地的里程以及他们从目的地的里程。

有一个里程段关税，例如： 0-10 英里的单次免税额为 20 英镑 11-20 英里的免税额为 30 英镑 21-30 英里的免税额为 40 英镑等

这个比率每年都会改变，所以我创建了一个表格，其中包含 rangeFrom 和 rangeTo 字段以及津贴总额，以便可以维护它们。

我正在苦苦挣扎的是找出用户应该为他们的旅程支付多少费用的最佳方式。例如，如果他们行驶 24 英里到达目的地，那么他们应该得到 20 英镑的津贴，但我该如何计算。

我是否从表中循环查询集，为每个里程带创建一个隐藏的表单值，然后尝试找出输入的值属于哪个带，或者是否有替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:26:50.767

我会使用一个简单的数组作为查找

```
var allowanceMapping = [
    {
       range: {low: 0, high: 10},
       allowance: 20
    }, {
       range: {low: 11, high: 20},
       allowance: 21
    }
]; 
```

然后，给定里程，只需循环遍历 range.low 和 range.high 上比较的键......

```
var given;
for (vari = 0; i < allowanceMapping.length; i++) {
    var current = allowanceMapping[i];
    if (given >= current.range.low && given < current.range.high) return current.allowance;
} 
```

# iphone - 让 UIView 在应用程序中始终处于首位？

> ID：15687032
> 
> 赞同：4
> 
> 时间：2013-03-28T16:21:50.030
> 
> 标签：iphone, ios, cocoa-touch

是否可以将 UIView 放在应用程序中的所有其他内容之上，甚至是模式等？

是否可以通过拥有两个 UIWindows 来完成，或者有推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:01:37.683

一个应用程序中可以有 2 个窗口。但这根本不推荐，如果可以的话，我们应该避免使用多个窗口。您可以在所有内容之上添加一个视图作为 UIWindow 的子视图，如下所示

```
[[UIApplication sharedApplication].keyWindow addSubview:viewName]; 
```

这不应该经常使用，但是您可以通过将其置于前面来在视图层次结构的顶部拥有一个视图

```
[self.view bringSubviewToFront:viewName]; 
```

这将视图带到了前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:39:01.507

尝试将该视图添加到应用程序的 keyWindow 中。然后将该视图带到 keyWindow 前面。所以...

```
[UIApplication sharedApplication].keyWindow addSubview:yourView];

// your code here
[UIApplication sharedApplication].keyWindow bringSubviewToFront:yourView]; 
```

# fibonacci - Io 语言斐波那契问题

> ID：15687033
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:21:50.970
> 
> 标签：fibonacci, iolanguage

我正在研究一个涉及斐波那契数列的 Io 问题。我正在尝试创建一种方法来测试一个数字是否是斐波那契数。我不知道为什么我的 IsAFib 方法不起作用，有谁知道为什么以及我可以做些什么来解决它？我对 Io 真的很陌生，对编程也很陌生，所以如果你能描述你改变事物的原因，我真的很感激！我想知道它需要有所不同，而不仅仅是应该写成什么。

```
 OperatorTable addOperator("xor", 11)
            true xor := method(bool, if(bool, false, true))
            false xor := method(bool, if(bool, true, false)) 

            doFile("isASquare.io"); 
```

然后 isASquare.io 文件：

```
 isASquare := method(n,                    
                    for(i, 1, n, 
                        if(i * i == n, return true)
                        if(i * i > n, return false)
                    )
            )

            isAFib := method(n,
                    if(isASquare(2 ** 5 * n) xor isASquare(2 ** n * 5 - 4), return true, return false)
            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:26:20.130

所以这是一个时不时出现的问题。动态运算符的工作方式是，当 vm 加载源文件时，在我们评估任何一个源文件之前，我们应用围绕运算符的规则。在第一次运行时，io 只知道它的内置操作符。一旦这个消息重新排序完成，那么我们将开始评估文件中的代码，即首先是这一行：

```
OperatorTable addOperator("xor", 11) 
```

当这段代码运行时，它对这个文件有任何影响已经太晚了。

社区中的普遍共识是将所有操作符放在您首先加载的文件中，然后在该文件的末尾，让它`doFile()`或类似地加载您将使用它们的主文件。

这有点让人头疼，但在 Io 中没有传统的编译时间。

# xamarin.ios - Xamarin/monotouch UILabel 多行

> ID：15687034
> 
> 赞同：7
> 
> 时间：2013-03-28T16:21:52.517
> 
> 标签：xamarin.ios, xamarin

我正在尝试添加多行 UILabel 表单代码。在阅读了一些问题之后，似乎答案是添加以下内容：

```
textLabel.lineBreakMode = NSLineBreakByWordWrapping;
textLabel.numberOfLines = 0; 
```

问题是我看不到它在单声道触摸中可用。

有谁知道如何在单声道触摸中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T16:27:13.760

您正在寻找的可能是 UILabel 的[LineBreakMode 属性](http://docs.go-mono.com/?link=P%3aMonoTouch.UIKit.UILabel.LineBreakMode)，它采用[UILineBreakMode](http://docs.go-mono.com/?link=T%3aMonoTouch.UIKit.UILineBreakMode)枚举值。所以是这样的：

```
textLabel.LineBreakMode = UILineBreakMode.WordWrap;
textLabel.Lines = 0; 
```

# jquery-ui - 在管理菜单区域中使用 jQuery jTable 和 Wordpress 插件

> ID：15687039
> 
> 赞同：1
> 
> 时间：2013-03-28T16:21:59.983
> 
> 标签：jquery-ui, jquery-plugins, wordpress, jquery-jtable

想要使用 jQuery-jTable 插件 ( [jtable.org](http://www.jtable.org/GettingStarted?ref=homebuttons) ) 从数据库中获取（和添加/编辑）记录。我已将所需的脚本排入队列并验证它们是通过页面源加载的，但我什么也没得到。根据入门指南，我至少应该得到一个空白表，但我得到一个空白页。我的代码在下面——有什么想法吗？

将脚本排入队列的代码：

```
function lfc_load_scripts() {
//set global variables
global $plugin_url;

//set variable to use to point to process.php path
$js_vars = array('plugin_url'=>$plugin_url,);

//Load scripts and css for Tabs UI
wp_enqueue_script('jquery-ui-tabs');
wp_enqueue_script('lfc-ui-js', $plugin_url . 'includes/js/tabs-ui.js', array('jquery'));
wp_localize_script( 'lfc-ui-js', 'js_vars', $js_vars) ;
wp_register_style( 'lfc_jquery_admin_css', $plugin_url . 'includes/css/ui.css', false, '1.0.0' );
    wp_enqueue_style( 'lfc_jquery_admin_css' );

//Load scripts and css for jTable
    wp_enqueue_script('jquery-ui-core');
    wp_enqueue_script('lfc-jtable-js', $plugin_url . 'includes/js/jtable/jquery.jtable.js', array('jquery'));
wp_register_style( 'lfc_jtable_css', $plugin_url . 'includes/js/jtable/themes/metro/blue/jtable.css', false, '1.0.0' );
    wp_enqueue_style( 'lfc_jtable_css' );

    //Load main jQuery file
wp_enqueue_script('lfc-process-js', $plugin_url . 'includes/js/process.js', array('jquery'));

}
add_action('admin_enqueue_scripts', 'lfc_load_scripts'); 
```

这是 jQuery（根据 jTable.org 页面上的说明）

```
$('#FighterTableContainer').jtable({
        title: 'Table of people',
        actions: {
            listAction: '/GettingStarted/PersonList',
            createAction: '/GettingStarted/CreatePerson',
            updateAction: '/GettingStarted/UpdatePerson',
            deleteAction: '/GettingStarted/DeletePerson'
        },            
        fields: {
            PersonId: {
                key: true,
                list: false
            },
            Name: {
                title: 'Author Name',
                width: '40%'
            },
            Age: {
                title: 'Age',
                width: '20%'
            },
            RecordDate: {
                title: 'Record date',
                width: '30%',
                type: 'date',
                create: false,
                edit: false
            }
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:06:37.077

我在一个虚拟插件中测试了 jTable，它显示了一个带有声明字段（`Name`和`Age`）`RecordDate`的空白表。

您的代码存在问题：

**1)**以下内容：

```
wp_enqueue_script( 'jquery-ui-tabs' );
wp_enqueue_script( 'lfc-ui-js', $plugin_url . 'includes/js/tabs-ui.js', array('jquery')); 
```

可以声明为：

```
wp_enqueue_script(
    'lfc-ui-js', 
    $plugin_url . 'includes/js/tabs-ui.js', 
    array( 'jquery', 'jquery-ui-tabs' ) 
); 
```

脚本也是如此`'lfc-jtable-js'`。也许，您的代码需要在[footer](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)上排队。

**2）**用 包装您的代码`(document).ready`，如下所示：

```
jQuery(document).ready(function($) {   
    $('#FighterTableContainer').jtable({
        // rest of the code
    });
}); 
```

# regex - 用 sed 替换插入符号

> ID：15687044
> 
> 赞同：2
> 
> 时间：2013-03-28T16:22:21.997
> 
> 标签：regex, sed, caret

我在一个文件中有如下所示的行：

```
FA General,1234567^^^^^FA Student Letter- General^<<undefined>>^\\path\to\file.RTF 
```

我正在尝试使用 sed 用逗号替换插入符号。如果我使用：

```
sed 's/\^/,/' file.txt 
```

没有什么变化。我也试过

```
sed 's/\\^/,/' file.txt
sed 's/^^/,/' file.txt 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:27:17.447

是否要替换所有插入符号？我敢肯定，如果您仔细查看结果，您会发现第一个插入符号已被替换。所以试试这个：

```
sed -e 's/\^/,/g' file.txt 
```

注意`g`表示全局替换，即所有匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:14:57.117

或尝试以下`y`命令：

```
sed 'y/^/,/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:29:47.193

我无法复制这个问题

```
set 'hello^world'
echo $1
sed 's/\^/,/' <<< "$1" 
```

输出

```
hello^world
hello,world 
```

# ruby-on-rails - 如何在 os x 10.8.3 上安装 rmagic 2.12.2

> ID：15687047
> 
> 赞同：4
> 
> 时间：2013-03-28T16:22:35.283
> 
> 标签：ruby-on-rails, rmagick, locomotivecms

我正在尝试将机车 gem 安装到我的 rails 应用程序中。它依赖于使用 rmagick gem 2.12.2

我成功安装了最新版本的 rmagic 2.13.2，但显然 gem 所需的旧版本在我安装 imagemagick 女巫时存在某种路径问题，版本为 6.8.0-10

我读过很多帖子都说要设置不同的环境路径，使用 brew 和 bla bla bla 重新安装 imagemagic。主要问题是 rmagic 版本，它依赖于 imagemagick 的位置和版本

我从 gem install 得到的当前错误如下。

```
 ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

        /Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:107: Use RbConfig instead of obsolete and deprecated Config.
checking for clang... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.3.5... yes
checking for HDRI disabled version of ImageMagick... yes
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
Can't install RMagick 2.12.2\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
    --with-MagickCorelib
    --without-MagickCorelib
    --with-Magicklib
    --without-Magicklib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:23:06.637

我自己也遇到了这个。问题是 rmagick 2.12.2 与 ImageMagick 6.8 或更高版本不兼容。从 rmagick 2.13.2 的更新日志：

```
RMagick 2.13.2
    o Fixed issues preventing RMagick from working with version 6.8 or higher
    o Fixed issues preventing RMagick from working with ruby 1.9.3 
```

如果您必须拥有旧版本的 rmagick，那么您必须降级 ImageMagick。在我的例子中，我只有四行代码来做一些简单的图像大小调整和格式转换，所以我从 rmagick 切换到 image_magick。它还使用 ImageMagick 库，因此它具有相同的功能，但它是该库的纯 ruby​​ 包装器，因此它似乎适用于 ImageMagick 6.4 和 6.8 之间的任何版本，并且可能版本范围更大。API 与 rmagick 非常相似，但并不完全相同。

# .net - 引发反射事件会导致错误：“对象与目标类型不匹配”

> ID：15687050
> 
> 赞同：1
> 
> 时间：2013-03-28T16:22:43.690
> 
> 标签：.net, events, reflection

我需要能够从课堂外引发事件，所以我认为反射是解决方案。但是，在检索到事件`MultiCastDelegate`及其调用方法后，我无法调用它。当我这样做时，我收到一条`TargetException`消息“对象与目标类型不匹配”。

这是一些重现问题的代码：

一个助手类：

```
public static class Reflection
{
    public static MethodInfo GetEventMethod(this object obj, string eventName, out Type targetType)
    {
        if (obj == null) throw new ArgumentNullException("obj");
        if (string.IsNullOrEmpty(eventName)) throw new ArgumentNullException("eventName");

        var mcDelegate = getEventMulticastDelegate(obj, eventName, out targetType);
        return mcDelegate != null ? mcDelegate.Method : null;
    }

    private static MulticastDelegate getEventMulticastDelegate(object obj, string eventName, out Type targetType)
    {
        // traverse inheritance tree looking for the specified event ...
        targetType = obj.GetType();
        while (true)
        {
            var fieldInfo = targetType.GetField(eventName, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.GetField);
            if (fieldInfo != null)
                return fieldInfo.GetValue(obj) as MulticastDelegate;

            if (targetType.BaseType == null)
                return null;

            targetType = targetType.BaseType;
        }
    }

    public static void RaiseEvent(this object obj, string eventName, params object[] parameters)
    {
        Type targetType;
        var methodInfo = obj.GetEventMethod(eventName, out targetType);
        if (methodInfo == null)
            throw new ArgumentOutOfRangeException("eventName", string.Format("Cannot raise event \"{0}\". Event is not supported by {1}", eventName, obj.GetType()));

        var targetObj = obj;
        if (targetType != obj.GetType())
            targetObj = obj.ConvertTo(targetType);

        methodInfo.Invoke(targetObj, parameters);  // *** ERROR HERE ***
    }
} 
```

和一些代码来测试它：

```
[TestClass]
public class Reflection
{
    [TestMethod]
    public void RaiseReflectedEvent()
    {
        var bar = new Bar();
        var isRaised = false;
        bar.TestEvent += (sender, args) => isRaised = true;
        bar.RaiseEvent("TestEvent", this, new EventArgs());
        Assert.IsTrue(isRaised);
        var foo = new Foo();
        isRaised = false;
        foo.TestEvent += (sender, args) => isRaised = true;
        foo.RaiseEvent("TestEvent", this, new EventArgs());
        Assert.IsTrue(isRaised);
    }

    private class Bar
    {
        public event EventHandler TestEvent;
    }

    private class Foo : Bar
    {
    }
} 
```

我一定错过了一些东西，但我目前没有线索，希望能得到任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:54:17.427

好吧，首先，必须说这是一个非常糟糕的设计。事件调用是有意限制的。冒充一个对象并在未经其同意的情况下引发其事件正在打破对事件所有者和任何事件侦听器的各种假设。你永远不应该在生产代码中这样做。

其次，您采用的方法通常不起作用。事件不必具有与其关联的字段，并且该字段不必与事件具有相同的名称。以下是有效的 C#：

```
class Foo {
    public event EventHandler Bar { add { } remove { } }
} 
```

（此表单通常用于将一个事件重定向到另一个事件）

第三，作为上述推论，即使您找到该字段，也可能不是调用事件的正确方法。在某些语言（例如 C++/CLI）中，事件可以显式地与`Raise`引发事件的方法相关联。在不通过`Raise`方法的情况下调用委托可能是一个严重的逻辑错误。

**但是**......如果您选择忽略不这样做的所有非常充分的理由，那么您的代码存在问题：

A`Delegate`不仅仅是一个方法引用。它是一个方法引用*和*调用该方法所需的上下文。

假设您有以下代码：

```
class Foo {
    void Bar() { }
    static void Main() {
        Foo foo = new Foo();
        Action action = new Action(foo.Bar);
    }
} 
```

`action.Method`will be 引用`Foo.Bar`，while `action.Target`will be `foo`。在您的`GetEventMethod`功能中，您正在丢弃目标！委托知道将什么对象作为“ `this`”参数传递给方法，但您忽略了它。实际上，在您的情况下，由于您使用的是 lambda 表达式`bar.TestEvent += (sender, args) => isRaised = true;`，因此 ' `this`' 参数将是编译器生成的闭包对象。您希望引用该对象的唯一方法是通过`Target`委托上的对象。

所以问题是你试图重新实现这个`Delegate`类，但你没有这样做。只需在委托实例本身上调用[DynamicInvoke 。](http://msdn.microsoft.com/en-us/library/system.delegate.dynamicinvoke.aspx)

当然，不要那样做，因为不要这样做。事件调用对于定义它们的类型是私有的（除非该类型选择公开它们）。如果不是这样，则该类型将仅公开一个`Delegate`-typed 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T03:23:53.070

我最近遇到了一种情况，我必须从派生类中引发一个事件，尽管在这里使用反射不是最好的设计，但它使我能够解决问题并在最后期限之前完成，所以我想我会把它传递下去。

下面的代码对工作代码进行了一些修改，但仍应作为在您自己的项目中实施类似解决方案的良好基础。

```
protected void RaiseReflectedEvent( string eventName, params object[] args )
{

    var bindingFlags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;

    var eventField =
        this.GetType()
        .GetField( eventName, bindingFlags );

    if( eventField != null )
    {

        var eventDelegate = eventField.GetValue( this );
        if( eventDelegate != null )
        {
            ( (Delegate)eventDelegate ).DynamicInvoke( args );
        }

    }

} 
```

# c# - 为什么我检测到无法访问的代码？

> ID：15687052
> 
> 赞同：0
> 
> 时间：2013-03-28T16:22:45.183
> 
> 标签：c#

编码：

```
catch(Exception ex)
{
  if (ex is WebException)
  {
    wccfg.failedUrls++; //  i think you forgot this
    return csFiles;
  }
  else
  {
    throw new Exception("");
    wccfg.failedUrls++;
    return csFiles;
  }
} 
```

在第二个 wccfg(another class) 上，我看到绿线说检测到无法访问的代码。我应该将此行移到 throw new Exception 行上方吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T16:23:49.393

因为一旦你：

```
throw new Exception(""); 
```

在那之后没有其他代码将被执行。

所以是的。你要么需要 a`return`要么 a `throw`，你不能同时拥有。

也没有理由测试 Exception 类型正在使用什么`if`块，因为您可以有多个`catch`语句来执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:25:09.540

您收到警告，因为之后的任何代码`throw new Exception("");`都不会被执行。

这掩盖了你的异常处理代码，老实说，是一团糟的事实。已经有一些方法可以处理不同类型的异常，而无需捕获广泛的类别并使用`is`关键字。您还通过抛出一个没有详细信息的新异常来吞下一个可能有意义的异常：

您可能需要考虑更合适的东西，例如：

```
catch(WebException ex)
{
    wccfg.failedUrls++;
    return csFiles
}
catch(Exception ex)
{
    wccfg.failedUrls++;
    throw;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:31:35.657

这个怎么样 - 它消除了你的错误（因为在 Throw 之后没有代码可以执行）并减少重复：

```
catch(Exception ex)
{
  wccfg.failedUrls++;

  if (!(ex is WebException))
  {
    throw new Exception("");
  }
}

return csFiles; 
```

# android - 在 Google Play 中发布新版本的应用

> ID：15687058
> 
> 赞同：1
> 
> 时间：2013-03-28T16:23:08.753
> 
> 标签：android, android-manifest, google-play

8 天前，我将我的应用程序的 1.0 版发布到了 Google Play。我想发布一个小更新——1.01 版。从阅读本文：

[Android Manifest 中的 versionCode 与 versionName](https://stackoverflow.com/questions/9629125/regarding-version-code-and-version-name-android-manifest)

我看到`versionCode`只有用户才能看到，`versionName`每次上传新的 APK 时都应该增加一个整数。我有以下问题：

1.  对于我的情况，我应该只在我的`AndroidManifest`versionCode`2`和 versionName 中更新到`1.01`吗？
2.  我的应用程序中有一个`SQLite`数据库，但它没有任何变化。无论是否有任何更改或保持不变，我都应该更新其中的数据库版本吗？
3.  除了更改 versionCode、versionName 和可能的 db 版本之外，唯一要做的就是上传新的 APK 吗？

下面是我的代码`AndroidManifest`。

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="matt.lyons.bibletrivia.pro"
    android:versionCode="1"
    android:versionName="1.0" > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:33:01.770

要回答您的问题：

> 对于我的情况，我是否应该将我的 AndroidManifest versionCode 更新为 2 并将 versionName 更新为 1.01？

是的。

AndroidManifest 是您唯一应该进行与您的应用版本相关的更改的地方。并且版本号/名称在您的情况下都有意义。

> 我的应用程序中有一个 SQLite 数据库，但它没有任何变化。无论是否有任何更改或保持不变，我都应该更新其中的数据库版本吗？

同样不，数据库版本控制可以与您的应用程序版本控制分开管理。但无论何时你想更新你的数据库，你都必须申请 1（更新应用程序版本）。

> 除了更改 versionCode、versionName 和可能的 db 版本之外，唯一要做的就是上传新的 APK 吗？

你已准备好出发。但不要忘记使用[Proguard](http://developer.android.com/tools/help/proguard.html)来加密你在 apk 中的代码。

# javascript - 如何为 jquery colorbox modal 设置不同的位置？

> ID：15687062
> 
> 赞同：0
> 
> 时间：2013-03-28T16:23:11.630
> 
> 标签：javascript, jquery, html

默认情况下，颜色框在屏幕上垂直和水平居中。有没有办法改变它，例如我有这样的东西：

1)foo 2)bar 2)bar 3)more 4)foobar 5)barfoo

现在当用户点击 foo 时，我希望颜色框显示为 left:20%, top:-200px; 当用户点击栏时，我希望颜色框以相同的顶部位置（-200px）显示，但这次，向左 50%，点击更多将向左 60%，foobar 将向左 70%等等。我怎样才能实现这一点而不必为每个元素设置一个类并为所有这些都做 css？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:27:50.727

使用定位设置

```
$('a#foo').colorbox({top:'-200px', left:'20%'});
$('a#bar').colorbox({top:'300px', left:'40%'}); 
```

我猜是这样的；我还没有测试过，但希望它能让你朝着正确的方向前进

```
 var topposition = '220';
 var leftposition = '10';
 $('a#bar').colorbox({top: topposition+'px', left:leftposition+'px', onComplete: function () {
    topposition = ($('#colorbox').offset().top) + 50;
    leftposition = ($('#colorbox').offset().left) + 10;
}}); 
```

看看这个小提琴，这样你就可以看到它在行动 [http://jsfiddle.net/4tkf5/13/](http://jsfiddle.net/4tkf5/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:48:36.297

听起来您正在尝试执行下拉菜单之类的操作。只要颜色框项位于菜单项中，您就可以使用 CSS 将所有内容放置在您想要的位置。

菜单项需要是相对位置，颜色框位置是绝对位置，然后您可以仅使用一个类移动它们，并使用同一类隐藏和显示它们。

希望有帮助

# java - 休眠查询的日期大于

> ID：15687066
> 
> 赞同：2
> 
> 时间：2013-03-28T16:23:18.663
> 
> 标签：java, hibernate, spring-mvc

我一直在尝试找到一种方法来查询我的表中修改日期超过 7 天的所有日期。

这是我在工作中的一些东西，但它不起作用：

```
 @SuppressWarnings({ "unchecked", "rawtypes" })
public List<Ownership> findOwnersByDate() {
    log.debug("finding a filtered list of Ownerships");
    Session session = getSessionFactory().getCurrentSession();
    try {
        session.beginTransaction();
        Criteria crit = session.createCriteria(Ownership.class)
        .add( Restrictions.gt("modDate", new Integer(7) ) ); 
        List results = crit.list();
        log.debug("get filtered ownerships successful, 
                    result size: " +  results.size());
        return results;
    } catch (RuntimeException re) {
        log.debug("query failed", re);
        log.error("get filtered ownerships failed", re);
        throw re;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:00:16.723

尝试传递与当前日期减去 7 天相对应的 Date 对象，而不是传递`new Integer(7)`to 。`Restrictions.gt()`您可以为此使用 Calendar 类，例如：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, -7);
...
Criteria crit = session.createCriteria(Ownership.class)
    .add( Restrictions.gt("modDate", cal.getTime() ) ); 
```

# python - 在 Python 应用程序中国际化子包

> ID：15687077
> 
> 赞同：1
> 
> 时间：2013-03-28T16:23:52.587
> 
> 标签：python, internationalization, gettext

我有一个针对 Python 2.7 编写的国际化应用程序。在其中，我使用了我编写的一些包。我希望翻译这些包中的用户可见文本。

鉴于应用程序使用 安装`_`到`__builtin__`命名空间中`translation.install`，我如何让各个包使用具有自己域的特定翻译来翻译其文本？例如，是否可以合并两个翻译？然后，如果我把它放在一个传统的地方，我可以让应用程序在导入时合并包翻译。

我是否必须`_`在每个子包的顶部定义我的其他 gettext 助手？如果是这样，他们如何在保持松散耦合的同时采用应用程序的配置语言？

这感觉它比它应该的更复杂，这让我相信我不理解某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:39:26.847

我建议不要安装`_`到内置程序中，而是在你的包中定义它`__init__`并在其他模块中显式导入它。

例如`mypackage/__init__.py`：

```
import gettext
translations = gettext.translation('mypackage')
_ = translations.ugettext 
```

然后在其他地方

```
from mypackage import _

some_string = _("Something that will be translated") 
```

我已经有很长时间没有真正使用 gettext 了，所以以这个例子为例（尽管它是基于[gettext 文档中的建议](http://docs.python.org/2/library/gettext#localizing-your-module)）。

我一直在使用基于 Zope 的 Web 应用程序，这些应用程序在模块导入期间无法进行翻译——我们需要将实际翻译延迟到请求呈现时间，因此我们知道用户的首选语言。我们使用 zope.i18nmessageid 的 MessageFactory 以非常相似的方式标记要翻译的字符串：

```
# mypackage/__init__.py
from zope.i18nmessageid import MessageFactory
_ = MessageFactory("mypackage")

# mypackage/somemodule.py
from mypackage import _
some_string = _("Something that will be translated later")
# e.g. with print zope.i18n.translate(some_string, request) 
```

# java - 异步任务实施问题

> ID：15687078
> 
> 赞同：0
> 
> 时间：2013-03-28T16:23:52.583
> 
> 标签：java, android, http, post, android-asynctask

我不知道我做错了什么 - 但是在结合我拥有的两个不同文件的源代码后，我在编译以下代码时遇到了几个问题。任何关于可能导致这些问题的建议（作为一种学习经验）以及解决这些问题的方法是否不太复杂，我们都将不胜感激。

（提前致谢！）

爪哇：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ProgressBar;
import android.widget.TimePicker;
import android.widget.Toast;

import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.opengl.Visibility;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;

            private EditText value;
            private Button btn;
            private ProgressBar pb;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.deviceconfig);
                value=(EditText)findViewById(R.id.editText1);
                btn=(Button)findViewById(R.id.button1);
                pb=(ProgressBar)findViewById(R.id.progressBar1);
                pb.setVisibility(View.GONE);
                nameEt = (EditText) findViewById(R.id.nameEdit);
                  capEt = (EditText) findViewById(R.id.capEdit);
                  codeEt = (EditText) findViewById(R.id.codeEdit);
                  timeEt = (TimePicker) findViewById(R.id.timeEdit);

                  Bundle extras = getIntent().getExtras(); 

                  if (extras != null)
                  {
                     rowID = extras.getLong("row_id");
                     nameEt.setText(extras.getString("name"));  
                     capEt.setText(extras.getString("cap"));  
                     codeEt.setText(extras.getString("code"));    
                     String time = extras.getString("time");
                     String[] parts = time.split(":");
                     timeEt.setCurrentHour(Integer.valueOf(parts[0]));
                     timeEt.setCurrentMinute(Integer.valueOf(parts[1]));
                     timeEt.setIs24HourView(false);
                     DecimalFormat df =   new DecimalFormat  ("00");
                     String minutes = df.format(min);
            }
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                getMenuInflater().inflate(R.menu.main, menu);
                return true;
            }

            public void onClick(View v) {
                // TODO Auto-generated method stub
                        pb.setVisibility(View.VISIBLE);
                        (value.getText().toString());       
                    }{

            new MyAsyncTask().execute

             class AddEditCountry extends AsyncTask<String, Integer, Double>{

                @Override
                protected Double doInBackground(String... params) {
                    // TODO Auto-generated method stub
                    postData(params[0]);
                    return null;
                }

                protected void onPostExecute(Double result){
                    pb.setVisibility(View.GONE);
                    Toast.makeText(getApplicationContext(), "command sent", Toast.LENGTH_LONG).show();
                }
                protected void onProgressUpdate(Integer... progress){
                    pb.setProgress(progress[0]);
                }

                public void postData(String valueIWantToSend) {
                    // Create a new HttpClient and Post Header
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://gamedemo.hostzi.com/apply.cgi");

                    try {
                        // Add your data
                        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                        nameValuePairs.add(new BasicNameValuePair("submit_button", "Wireless_MAC"));
                        nameValuePairs.add(new BasicNameValuePair("change_action", ""));
                        nameValuePairs.add(new BasicNameValuePair("action", "Apply"));
                        nameValuePairs.add(new BasicNameValuePair("wl_macmode", "allow"));
                        nameValuePairs.add(new BasicNameValuePair("wl_maclist", "32"));
                        nameValuePairs.add(new BasicNameValuePair("wait_time", "3"));
                        nameValuePairs.add(new BasicNameValuePair("wl_mac_filter", "1"));
                        nameValuePairs.add(new BasicNameValuePair("start", "allow"));
                        nameValuePairs.add(new BasicNameValuePair("wl_macmode1", "allow"));
                        nameValuePairs.add(new BasicNameValuePair("m0", "00%3A1E%3A33%3AFE%3A0D%3A38"));
                        nameValuePairs.add(new BasicNameValuePair("m16", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m1", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m17", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m2", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m18", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m3", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m19", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m4", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m20", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m5", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m21", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m6", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m22", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m7", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m23", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m8", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m24", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m9", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m25", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m10", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m26", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m11", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m27", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m12", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m28", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m13", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m29", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m14", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m30", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m15", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("m31", "00%3A00%3A00%3A00%3A00%3A00"));
                        nameValuePairs.add(new BasicNameValuePair("end", ""));

                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                        // Execute HTTP Post Request
                        HttpResponse response = httpclient.execute(httppost);

                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                    }
                }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Double doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());

              }
              else
              {
                 dbConnector.updateContact(rowID,
                         nameEt.getText().toString(),
                            capEt.getText().toString(),
                              timeEt.getCurrentHour().toString() + ":"
                                  + timeEt.getCurrentMinute().toString(),
                              codeEt.getText().toString());
              }
           }} 
```

问题：

```
 Description Resource    Path    Location    Type
The left-hand side of an assignment must be a variable  AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 116    Java Problem
The method setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments (AddEditCountry)   AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 80 Java Problem
Syntax error on token(s), misplaced construct(s)    AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 60 Java Problem
Syntax error, insert ";" to complete BlockStatements    AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 120    Java Problem
Syntax error, insert "AssignmentOperator Expression" to complete Assignment AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 120    Java Problem
Syntax error, insert "AssignmentOperator Expression" to complete Expression AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 116    Java Problem
Syntax error, insert "AssignmentOperator Expression" to complete Expression AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 116    Java Problem
Syntax error on token ".", = expected   AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 1  Java Problem
Syntax error on token(s), misplaced construct(s)    AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 122    Java Problem
Syntax error on tokens, AnnotationName expected instead AddEditCountry.java /app/Game Demo/src/com/app/gamedemo line 207    Java Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:33:29.120

我认为您在 AsyncTask 结束时忘记了一个“}”（在 onCreate 之前）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:48:12.093

据我所知，这是您的问题：

1.  你每个人最后都`nameValuePairs.add(new BasicNameValuePair(.. , ..);`需要一个额外`)`的。
2.  你缺少 a`}`来结束你的范围，`AsyncTask`我实际上认为你缺少 2 来结束你的内部类（否则你有重复的`onCreate`方法）
3.  你的`MyAsyncTask`班级有一个`public`修饰符。去掉它。
4.  你的`doInBackground`方法应该返回一个`Double`不是`Object`
5.  你`AsyncTask`现在被称为`AddEditCountry`与你的外部类相同。这是不可能的。更改其中一个名称。
6.  您的`AsyncTask`类是*在*您的`onClick(View v)`方法中定义的。将类移出方法。¨
7.  您不能使用`this`in`btn.setOnClickListener(this);`因为点击侦听器需要是一个`OnClickListener`，而您的类不是。您可以通过创建一个`OnClickListener`实现您的 onClick 方法并将其作为参数传递的新方法来解决此问题。（就像您使用保存按钮所做的那样）

我不明白为什么你有一个内部 Activity 类。我建议您重新考虑您是否真的想要这种内部活动，或者您只是想要其中的方法/功能`DeviceConfig`，`AddEditCountry`或者它们应该位于两个不同的文件中。

编辑：列出更多问题。

# c# - 检测键盘上的哪个键被按下。存在多个键盘

> ID：15687079
> 
> 赞同：1
> 
> 时间：2013-03-28T16:23:57.570
> 
> 标签：c#, winforms, keyboard

我的电脑有两个 USB 键盘。在任一键盘上按下一个键都会注册一个按键事件。我的问题是，有没有办法使用 C#/Winforms 确定按键来自哪个键盘？

# java - 如何将数据库中的数据导出到 csv 文件？

> ID：15687083
> 
> 赞同：1
> 
> 时间：2013-03-28T16:24:08.253
> 
> 标签：java, android, csv, export-to-csv

我正在开发一个 android 项目，其中一部分是将数据从我的数据库导出到 csv 文件。

我已经阅读了很多线程，尤其是***opencsv***并尝试以下操作：

```
CSVWriter writer = null;
    try {
        writer = new CSVWriter(my file name);
        // just an example
        String[] entries = "1,2,3,4,5,6".split(",");
        writer.writeNext(entries);
    } catch (IOException e) {
        // TODO: handle exception
    } 
```

该文件已创建，但其大小为 0KB。

我试图用另一种方式来解决它。请参阅下面的代码：

```
 File myFile = new File(my file name);

        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut); 
```

我用 append 放了一些信息，但我遇到了同样的问题。

> **有没有人有另一种方法来解决这个问题或者我在上面的例子中错过了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:27:42.037

你的文件真的是空的吗？根据您要导出的数据，您的文件可能确实远小于 1K。我必须承认我不了解 android 所以我不知道它如何处理非常小的文件大小指示......

# c# - 多维数组是重复向量

> ID：15687084
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:13.113
> 
> 标签：c#, .net, debugging, random

我有以下代码，它从一个列表中获取随机值并将它们放入一个多维数组中，我用它来创建 PDF：

```
protected void ConstruirExamenesAndGenerarPdf(int[] idUnidades, int numeroExamenes, int numeroReactivos)
{
    var modeloReactivos   = new ModeloReactivos();
    var reactivosUnidades = modeloReactivos.ObtenerReactivosPorIdsUnidades(idUnidades);

    var examenes = ConstruirExamenes(reactivosUnidades, numeroExamenes, numeroReactivos);

    GenerarPdf(examenes, reactivosUnidades);
}

private int[][] ConstruirExamenes(List<Reactivo> reactivosUnidades, int numeroExamenes, int numeroReactivos)
{
    var cantidadObligatorios   = reactivosUnidades.Where(r => r.obligatorio == (byte)Reactivo.Obligatoria.Si).Count();
    var cantidadNoObligatorios = reactivosUnidades.Where(r => r.obligatorio == (byte)Reactivo.Obligatoria.No).Count();

    var indicesObligatorios   = Enumerable.Range(0, cantidadObligatorios - 1).ToArray();
    var indicesNoObligatorios = Enumerable.Range(indicesObligatorios.Length, cantidadNoObligatorios - 1).ToArray();

    var examenes = new int[numeroExamenes][];

    for (var indiceExamen = 0; indiceExamen < numeroExamenes; indiceExamen++)
    {
        examenes[indiceExamen] = ConstruirExamen(indicesObligatorios, indicesNoObligatorios, numeroReactivos);
    }

    return examenes;
}

protected int[] ConstruirExamen(int[] indicesObligatorios, int[] indicesNoObligatorios, int numeroReactivos)
{
    var examen = new List<int>();

    AgregarReactivosAleatorios(examen, indicesObligatorios, numeroReactivos);
    AgregarReactivosAleatorios(examen, indicesNoObligatorios, numeroReactivos);

    return examen.ToArray();
}

private static void AgregarReactivosAleatorios(List<int> examen, int[] indicesReactivos, int numeroReactivos)
{

    var random = new Random();
    var actual = indicesReactivos.Length;

    for (var i = examen.Count; i < numeroReactivos && i < indicesReactivos.Length; i++)
    {
        var indexReactivoSeleccionar = random.Next(actual);

        var agregarEn = random.Next(0, examen.Count + 1);

        examen.Insert(agregarEn, indicesReactivos[indexReactivoSeleccionar]);

        indicesReactivos[indexReactivoSeleccionar] = indicesReactivos[--actual];
        indicesReactivos[actual]                   = examen[agregarEn];
    }
} 
```

在调试时，如果我在生成 pdf 并检查数组之前放置一个断点，它看起来像这样：

```
[ [1,15,42,58],
  [8,9,52,69],
  [1,15,42,58],
  [8,9,52,69] ] 
```

请注意，第 1 行和第 3 行是相等的，第 2 行和第 4 行也是如此。如果我在每次创建向量时都放置断点，则这些值似乎不会重复。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:01:47.753

如果该方法被多次调用，那么您不应该`Random`在该方法中创建实例。使用单个`Random`实例。原因是`Random`使用默认构造函数快速连续创建多个实例将导致它们具有相同的种子，从而产生相同的随机数序列。

# c++ - 如何将数组传递给构造函数或类？

> ID：15687086
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:16.807
> 
> 标签：c++

我是 C++ 新手，请帮助我。非常感谢。

我想将一个（新类型数组）传递给一个类。但我收到消息“抛出 bad_alloc 实例后调用 c++ 终止”这是什么意思？再次感谢！！！！

```
#include <iostream>

using namespace std;

class test {
  public:
      test (int*, int);
       void check ();
  private :
    int k;
     int *a= new int [k];
//int a;

};

int main()
{
  //int a1=5,n=4;
  int n=4;
  int *a1= new int[n];
   //int a1[4]={1,2,3,4};
  test haha(a1,n);
  haha.check();

    return 0;
}

test::test(int *aa, int kk){
a=aa;
k=kk;
}

void test::check()
{
 for(int i=0; i<k; i++){
    cout<<a<<" ";

 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:27:05.723

```
class test {
  public:
      test (int*, int);
       void check ();
  private :
    int k;
     int *a= new int [k]; <--- problem, k is undefined + you don't allocate in class declerations
//int a;

}; 
```

您不能在类声明中分配..尤其是未定义的成员:)

除此之外..你已经在c'tor中分配了指针（不是你给他们任何值......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:47:46.543

这些都是您的代码存在的所有问题，按出现顺序列出。我还为您提供了一些提示：

1.  在 C++11 之前的代码中不允许对非静态数据成员进行类内初始化。因此这一行是无效的：

    ```
    private:
    // ...
        int *a = new int [k];
    //         ^^^^^^^^^^^^^^ 
    ```

    不仅如此，这条线也是多余的。您已经有一个带有指针的构造函数，并将该指针分配给`a`. 所以不需要在课堂上进行作业。

2.  你的构造函数`test`应该在上面定义`main`。另外，提示：您应该使用[成员 initializer-list](https://stackoverflow.com/questions/7665021/c-member-initialization-list)初始化您的成员。在您的代码中看起来像这样：

    ```
    test::test(int *aa, int kk) : k(kk), a(aa) {}
    //                          ^^^^^^^^^^^^^^ 
    ```

    冒号后面是成员的初始化，每个成员用冒号分隔。

3.  以下行打印时间*地址*`a` `k`：

    ```
    cout << a << " "; 
    ```

    你不想这样做。您打印一个十六进制数字，表示您的指针指向的内存地址。要打印指针指向的*值，您必须**取消引用*指针：

    ```
    cout << *a << " "; 
    ```

    *注意：您尚未使用任何值初始化数组，因此将打印的所有内容都是堆栈中的垃圾。要为数组分配一些值，您可以这样做（在声明数组的 main 内）*：

    ```
    int *a1 = new int[n];

    a1[0] = 1;
    a1[1] = 2;
    a1[2] = 3;
    a1[3] = 4 
    ```

    或者，您可以使用 for 循环：

    ```
    for (int i = 1; i <= 4; ++i)
    {
        a1[i - 1] = i;
    } 
    ```

    或者，如果您使用 C++11 进行编译（您可能不是）：

    ```
    int *a1 = new int[n] {1, 2, 3, 4}; 
    ```

    `delete[]`但最重要的是，当你完成使用它时，不要忘记你的数组。`new`您使用/创建的任何内容`new[]`都必须删除：

    ```
    delete[] a1; 
    ```

    [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)无论如何，您可以通过使用（恕我直言更好）来避免内存分配和混乱：

    ```
    #include <vector>

    std::vector<int> a1 = {1, 2, 3, 4}; 
    ```

    [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)包含有关其大小的信息，这使得传递数组的长度变得不必要。使用向量将大大简化您的程序。

这是你的程序：

```
#include <iostream>
#include <vector>

class test {
  public:
      test(std::vector<int>);
      void check();

   private:
      std::vector<int> v;
};

test::test(std::vector<int> temp) : v(temp) {}

void test::check()
{
   std::vector<int>::const_iterator it;

   for (it = v.begin(); it != v.end(); ++it) {
      std::cout << *it << std::endl;
   }
}

int main()
{
  std::vector<int> a1 = {1, 2, 3, 4};

  test haha(a1);
  haha.check();
} 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy$3070)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:35:49.147

您可能应该使用 std::vector 而不是动态内存分配；特别是考虑到您没有删除内存。

std::vector 非常易于使用，并且有大量可用的文档。请参阅[http://en.cppreference.com/w/cpp/container/vector](http://en.cppreference.com/w/cpp/container/vector)

**例子**

```
std::vector<int> qux;

qux.push_back(6);

void foo(std::vector<int>& bah)
{

} 
```

如果你必须传递一个数组，你至少要使用 std::array，见 [http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)

**错误**

std::bad_alloc 是新操作符失败时抛出的异常

如果您不想让新的抛出该异常，您可以使用 std::nothrow，请参阅[http://en.cppreference.com/w/cpp/memory/new/nothrow](http://en.cppreference.com/w/cpp/memory/new/nothrow)

您收到此消息的原因是因为您正在传递一个未初始化的变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:28:15.670

```
int k;
 int *a= new int [k]; 
```

这就是问题所在。创建类实例时， k 未初始化，您将其用作数组大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:29:43.770

在你的课堂上：

```
 int *a= new int [k]; 
```

这将导致错误：因为 k 尚未定义。

```
error: `test::k' cannot appear in a constant-expression
error: `new' cannot appear in a constant-expression
error: ISO C++ forbids initialization of member `a'
error: making `a' static
error: invalid in-class initialization of static data member of non-integral type `int*' In constructor `test::test(int*, int)': 
```

您应该`= new int[k]`从构造函数的声明中删除`*a` 并初始化`*a`。

# javascript - 在表单提交时将 Javascript 变量添加到 MySql 数据库中

> ID：15687088
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:18.993
> 
> 标签：javascript, google-maps, geocoding, google-places-api

我有一个使用 Google Maps Places Library 的应用程序。在这一刻，用户可以使用该库搜索起点和终点，单击其中一个自动完成结果，然后使用路线服务在这两点之间绘制一条路线。

我已经到了需要将这些值添加到 MySql 数据库中的地步。我已经构建了将数据库内容转换为新地图的页面（我使用了虚拟内容）。虚拟内容由“startlat”、“startlng”、“endlat”和“endlng”组成。基本上，我需要将 Google 地图位置转换为单独的纬度和经度值，以便我可以将其传递到我的数据库中。

我已经阅读了 Google 的地理编码 API，但如果我已经在使用 Places Library，我不确定是否需要进行地理编码。下面是我使用 Places API 的方式。

```
jQuery(document).ready(function($) {  

    var rendererOptions = {
      draggable: true
    };
    var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);;
    var directionsService = new google.maps.DirectionsService();

    // Load options
    var mapOptions = {
      center: new google.maps.LatLng(-33.8688, 151.2195),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // Try HTML5 geolocation
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
      map.setCenter(pos);
    }, function() {
      handleNoGeolocation(true);
    });
  } else {
    // Browser doesn't support Geolocation
    handleNoGeolocation(false);
  }

  function handleNoGeolocation(errorFlag) {
    if (errorFlag) {
      var content = 'Error: The Geolocation service failed.';
    } else {
      var content = 'Error: Your browser doesn\'t support geolocation.';
    }

    var options = {
      map: map,
      position: new google.maps.LatLng(53.801158, -1.549158),
      content: content
    };

    var infowindow = new google.maps.InfoWindow(options);
    map.setCenter(options.position);
  }

    // Load map
    var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);

    // Popup window
    var infowindow = new google.maps.InfoWindow();
    var marker = new google.maps.Marker({
      map: map
    });

    window.startLocation = null;
    window.endLoaction = null;

  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById('directionsPanel'));

    google.maps.event.addListener(directionsDisplay, 'directions_changed', function() {
  });

    // Autocomplete start
    var startInput = document.getElementById('start');
    var autocompleteStart = new google.maps.places.Autocomplete(startInput);
    autocompleteStart.bindTo('bounds', map);

  google.maps.event.addListener(autocompleteStart, 'place_changed', function() {
    infowindow.close();
    marker.setVisible(false);
    startInput.className = '';
    var place = autocompleteStart.getPlace();
    if (!place.geometry) {
      // Inform the user that the place was not found and return.
      startInput.className = 'notfound';
      return;
    }

    // If the place has a geometry, then present it on a map.
    if (place.geometry.viewport) {
      map.fitBounds(place.geometry.viewport);
    } else {
      map.setCenter(place.geometry.location);
      map.setZoom(17);  // Why 17? Because it looks good.
    }
    var image = {
      url: place.icon,
      size: new google.maps.Size(71, 71),
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(17, 34),
      scaledSize: new google.maps.Size(35, 35)
    };
    marker.setIcon(image);
    marker.setPosition(place.geometry.location);
    marker.setVisible(true);

    var address = '';
    if (place.address_components) {
      address = [
      (place.address_components[0] && place.address_components[0].short_name || ''),
      (place.address_components[1] && place.address_components[1].short_name || ''),
      (place.address_components[2] && place.address_components[2].short_name || '')
      ].join(' ');
    }

    window.startLocation = place;
    calcRoute();

    //infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
    //infowindow.open(map, marker);
    });

    // Autocomplete end
    var endInput = document.getElementById('end');
    var autocompleteEnd = new google.maps.places.Autocomplete(endInput);
    autocompleteEnd.bindTo('bounds', map);

  google.maps.event.addListener(autocompleteEnd, 'place_changed', function() {
    infowindow.close();
    marker.setVisible(false);
    endInput.className = '';
    var place = autocompleteEnd.getPlace();
    if (!place.geometry) {
      // Inform the user that the place was not found and return.
      endInput.className = 'notfound';
      return;
    }

    // If the place has a geometry, then present it on a map.
    if (place.geometry.viewport) {
      map.fitBounds(place.geometry.viewport);
    } else {
      map.setCenter(place.geometry.location);
      map.setZoom(17);  // Why 17? Because it looks good.
    }
    var image = {
      url: place.icon,
      size: new google.maps.Size(71, 71),
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(17, 34),
      scaledSize: new google.maps.Size(35, 35)
    };
    marker.setIcon(image);
    marker.setPosition(place.geometry.location);
    marker.setVisible(true);

    var address = '';
    if (place.address_components) {
      address = [
      (place.address_components[0] && place.address_components[0].short_name || ''),
      (place.address_components[1] && place.address_components[1].short_name || ''),
      (place.address_components[2] && place.address_components[2].short_name || '')
      ].join(' ');
    }

    window.endLocation = place;
    calcRoute();

  });

  function calcRoute() {

    var selectedMode = document.getElementById("mode").value;
      if(window.startLocation && window.endLocation) {
      var request = {
        origin: window.startLocation.formatted_address,
        destination: window.endLocation.formatted_address,
        travelMode: google.maps.DirectionsTravelMode[selectedMode]
      };
      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
                    $(".distance-value").html(response.routes[0].legs[0].distance.text)
                    $(".duration-value").html(response.routes[0].legs[0].duration.text)
          directionsDisplay.setDirections(response);
        }
        });
      }
    }

    //End Maps Stuff

}); //End jQuery Document Ready 
```

更新-好的，所以我发现我不需要地理编码，而是可以使用它...

```
var startlocation = place.geometry.location;
    var startlat = location.lat();
    var startlng = location.lng();

var endlocation = place.geometry.location;
    var endlat = location.lat();
    var endlng = location.lng(); 
```

但是如何在表单提交时将这些值传递到数据库中？

# c# - jQuery 对话框立即关闭

> ID：15687093
> 
> 赞同：4
> 
> 时间：2013-03-28T16:24:34.603
> 
> 标签：c#, jquery, asp.net

我有一个 jQuery 对话框，打开后立即关闭。它设置为位于 GridView 的模板字段中的按钮。

**我的 JavaScript：**

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#txtBeginDate").datepicker();
        $("#txtEndDate").datepicker();

        $("#response").dialog({
            autoOpen: false,
            modal: true,
            title: "Equifax Response"
        });

        $("[id*=lnkEquifaxResponse]").live("click", function EquifaxResopnse() {
            $("#response").dialog("open");
        });
    });
</script> 
```

**我的相关 GridView 标记：**

```
<div id="Gridview">
    <asp:GridView ID="grClientTransactions" runat="server" AllowPaging="True" 
        PageSize="25" AutoGenerateColumns="False" DataKeyNames="ResponseXML"
        EmptyDataText="Record not found." EmptyDataRowStyle-BackColor="#CCCCCC" 
        EmptyDataRowStyle-Font-Bold="true" CssClass="mGrid" 
        PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt" 
        OnPageIndexChanging="grClientTransactions_PageIndexChanging" 
        onrowcommand="grClientTransactions_RowCommand">

        <Columns>
            <asp:TemplateField ShowHeader="false">
                <ItemTemplate>
                    <asp:LinkButton ID="lnkEquifaxResponse" runat="server" 
                        CausesValidation="False"
                        CommandName="EquifaxResponse" 
                        Text="View" 
                        CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>'>
                    </asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField Visible="false" HeaderText="Equifax Response">
                <ItemTemplate>
                    <asp:Label ID="lblEquifaxResponse" runat="server" 
                        Text='<%# Bind("ResponseXML")%>' >
                    </asp:Label></div>                            
                </ItemTemplate>
            </asp:TemplateField>                          
        </Columns> 
```

**我的 div 显示带有来自 CodeBehind 的分配字符串的标签：**

```
<div id="response">
    <asp:Label ID="lblDialog" runat="server" ></asp:Label>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:26:51.237

jQuery 的[`live()`](http://api.jquery.com/live/)方法在 1.9 版本中已被弃用和删除，并已替换为该[`on()`](http://api.jquery.com/on/)方法。

因此，替换这个：

```
$("[id*=lnkEquifaxResponse]").live("click", function EquifaxResopnse() {
    $("#response").dialog("open");
}); 
```

有了这个：

```
$("[id*=lnkEquifaxResponse]").on("click", function EquifaxResopnse() {
    $("#response").dialog("open");

    return false; // Prevents the postback
}); 
```

* * *

您可以通过不同的方式执行此操作：

```
$(document).ready(function() {

    $("[id*=lnkEquifaxResponse]").on("click", function EquifaxResopnse() {
            $("#lblDialog").empty();
        });

    if($("#lblDialog").text() != "")
    {
        $("#response").dialog("open");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:28:38.610

如果`lnkEquifaxResponse`导致回发，那就是问题所在。回发后，对话框将重新呈现为已关闭。您使用的是 UpdatePanels 还是其他任何东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:50:22.493

不推荐使用 live 方法，它应该是这样的，您应该添加一个事件参数以传递给回调。您还需要添加 preventDefault(); 这可以防止锚标记的默认行为

```
 $("[id*=lnkEquifaxResponse]").on("click", function EquifaxResopnse(ev) {
        //prevents the default behavior of the anchor tag causing the page to postback or re-render
        ev.preventDefault();
        $("#response").dialog("open");
    }); 
```

您也可以在回调结束时添加

```
return false; 
```

但这在 IE 中变得非常有问题，ev.preventDefault() 检查 IE 以及是否添加 return false 或 returnValue。IE7 喜欢看到这一点，否则将无法正常工作。

```
ev.returnValue = false; 
```

preventDefault() 的源代码在 jQuery 中看起来像这样

```
preventDefault: function() {
    this.isDefaultPrevented = returnTrue;

    var e = this.originalEvent;
    if ( !e ) {
        return;
    }

    // if preventDefault exists run it on the original event
    if ( e.preventDefault ) {
        e.preventDefault();

    // otherwise set the returnValue property of the original event to false (IE)
    } else {
        e.returnValue = false;
    }
}, 
```

# php - PHP array_merge 或 array_unique 和闭包

> ID：15687100
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:44.997
> 
> 标签：php, arrays, closures

我可以使用闭包在 PHP >=5.4 中合并数组或从数组中删除重复项，就像在 Objective C 中使用块或在 C++ 中使用 lambda 一样？

*   是否可以使用谓词/闭包/块/lambda 作为此类函数的参数。

IE：

```
$a = array('blah','bleh');
$b = array('blih, 'bloh');
$arr = array_merge( function() use (&$a,&$b) { return $a == $b ? true : false; } ); 
```

（上面的例子过于简单，我想为对象做这个）。

*   可以内联完成还是应该始终将闭包定义为 $var ？
*   是否有性能提升，还是运行相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:31:56.493

您可能可以为此使用 array_filter() 。我的猜测是您需要过滤 1 个数组作为参数并将第二个数组添加为 use()。当当前值不在use()传入的数组中时，可以添加。 [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

仅当您需要根据对象内部的值进行检查时才这样做，因为 $a == $b 对象可能会很棘手；）

# jquery - onClick“输入文本框”打开文本区域并单击它应该关闭的文档

> ID：15687101
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:24:48.967
> 
> 标签：jquery

# 1)

点击输入文字！[输入框][1]

# 2)

在此文本区域将打开之后

![文本区域][2]

3）这是我的文档，我想在此文本区域之外单击它应该隐藏。

![我的整个文档][3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:31:22.373

我很确定这是你想要做的..

```
$('input[type="text"]').bind('focus', function(){
    $('textarea').show();
}).bind('blur', function(){
    $('textarea').hide();
}); 
```

# iphone - 从转换后的 UIImageViews 生成高分辨率图像

> ID：15687102
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:49.507
> 
> 标签：iphone, objective-c, uiimage, cgcontext, cgaffinetransform

我在从转换后的 UIImageView 生成高分辨率图像时遇到了麻烦。我有一个画布视图，其中包含由用户手指转换的多个视图。所以我尝试根据它们的变换来渲染这些视图的图像。这是我用于视图的代码快照。

```
CGSize canvasSize = CGSizeMake(HIRES_WIDTH, HIRES_WIDTH);
CGAffineTransform scaleTransform = CGAffineTransformMakeScale(HIRES_WIDTH / canvasView.frame.size.width, HIRES_WIDTH / canvasView.frame.size.width);

UIGraphicsBeginImageContext(canvasSize);
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSaveGState(context);
CGPoint center = imageView.center;
CGSize size = imageView.bounds.size;
CGRect frame = CGRectMake(center.x - size.width, center.y - size.height, size.width, size.height);

CGAffineTransform transform = CGAffineTransformIdentity;
transform = CGAffineTransformTranslate(transform, size.width / 2, size.height / 2);
transform = CGAffineTransformConcat(transform, photoImageView.transform);
transform = CGAffineTransformConcat(transform, scaleTransform);
CGContextConcatCTM(context, transform);

[photoImageView.image drawInRect:frame];

CGContextRestoreGState(context);

UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是我在最终图像上得到了偏移差异。任何意见，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:30:39.380

尝试改变这一点：

```
CGRect frame = CGRectMake(center.x - size.width, center.y - size.height, size.width, size.height); 
```

对此：

```
CGRect frame = CGRectMake(center.x - size.width / 2, center.y - size.height / 2, size.width, size.height); 
```

# haskell - Haskell - 使用树递归避免控制堆栈溢出

> ID：15687103
> 
> 赞同：1
> 
> 时间：2013-03-28T16:24:50.717
> 
> 标签：haskell, recursion, brute-force, strict, knapsack-problem

对于大学作业，我们必须研究背包问题的各种解决方案，然后在 Haskell 和 Python 中实现解决方案。

我选择了蛮力。我意识到有更好的算法，但这种选择的原因超出了本文的范围。

但是，在我的两次尝试中，我在使用 HUGS 时都会出现控制堆栈溢出，但在使用 GHC 时不会。

调查似乎指出了一个关于严格/懒惰的问题，我的代码最终会产生过多的 thunk，而 GHC 的严格分析似乎正在解决这个问题。

有人可以指出我在下面提供的代码中哪里出错了，并指导我如何解决这个问题。

注意：我只有 4 周的 Haskell 经验，所以要意识到我的代码与 Haskell 专家编写的代码相比会很幼稚。

编辑：添加一些 ` `seq`` 语句使程序在 HUGS 中运行。但是，这似乎有点像黑客。还有其他可能的改进吗？我已经接受了一个答案，但任何进一步的建议将不胜感激。

```
module Main where
import Debug.Trace
import Data.Maybe

type ItemInfo = (Double,Double)
type Item = (ItemInfo,[Char])
type Solution = (ItemInfo,[Item])

-- FilterTerminationCondition should be a function that returns True if this branch of brute force should be stopped.
type FilterTerminationCondition = (Solution -> Bool)

-- FilterComparator should return which, out of two solutions, is better.
-- Both solutions will have passed FilterTerminationCondition succesfully.
type FilterComparator = (Solution -> Solution -> Solution)

-- FilterUsesTerminatingSolution is a boolean which indicates, when FilterTerminationCondition has caused a branch to end, whether to use the set of items that caused the end of the branch (True) or the set of items immeidately before (False).
type FilterUsesTerminatingSolution = Bool

-- A Filter should contain lambada functions for FilterTerminationCondition and FilterComparator
type Filter = (FilterTerminationCondition,FilterComparator,FilterUsesTerminatingSolution)

-- A series of functions to extract the various items from the filter.
getFilterTerminationCondition    :: Filter -> FilterTerminationCondition
getFilterTerminationCondition    (ftcond,fcomp,futs) = ftcond

getFilterComparator              :: Filter -> FilterComparator
getFilterComparator              (ftcond,fcomp,futs) = fcomp

getFilterUsesTerminatingSolution :: Filter -> FilterUsesTerminatingSolution
getFilterUsesTerminatingSolution (ftcond,fcomp,futs) = futs

-- Aliases for fst and snd that make the code easier to read later on.
getSolutionItems :: Solution -> [Item]
getSolutionItems (info,items) = items

getItemInfo :: Item -> ItemInfo
getItemInfo (iteminfo,itemname) = iteminfo

getWeight :: ItemInfo -> Double
getWeight (weight,profit) = weight

getSolutionInfo  :: Solution -> ItemInfo
getSolutionInfo  (info,items) = info

getProfit :: ItemInfo -> Double
getProfit (weight,profit) = profit

knapsack :: Filter -> [Item] -> Solution -> Maybe Solution -> Maybe Solution
knapsack filter []                       currentsolution bestsolution = if (getFilterTerminationCondition filter) currentsolution == (getFilterUsesTerminatingSolution filter) then knapsackCompareValidSolutions filter currentsolution bestsolution else bestsolution
knapsack filter (newitem:remainingitems) currentsolution bestsolution = let bestsolutionwithout = knapsack filter remainingitems currentsolution bestsolution
                                                                            currentsolutionwith = (((getWeight $ getSolutionInfo currentsolution)+(getWeight $ getItemInfo newitem),(getProfit $ getSolutionInfo currentsolution)+(getProfit $ getItemInfo newitem)),((getSolutionItems currentsolution) ++ [newitem]))
                                                                        in if (getFilterTerminationCondition filter) currentsolutionwith then knapsackCompareValidSolutions filter (if (getFilterUsesTerminatingSolution filter) then currentsolutionwith else currentsolution) bestsolutionwithout else knapsack filter remainingitems currentsolutionwith bestsolutionwithout

knapsackCompareValidSolutions :: Filter -> Solution -> Maybe Solution -> Maybe Solution
knapsackCompareValidSolutions filter currentsolution bestsolution = let returnval = case bestsolution of
                                                                                        Nothing       -> currentsolution
                                                                                        Just solution -> (getFilterComparator filter) currentsolution solution
                                                                    in Just returnval

knapsackStart :: Filter -> [Item] -> Maybe Solution
knapsackStart filter allitems = knapsack filter allitems ((0,0),[]) Nothing

knapsackProblemItems :: [Item]
knapsackProblemItems = 
    [
    ((4.13, 1.40),"Weapon and Ammunition"),
    ((2.13, 2.74),"Water"),
    ((3.03, 1.55),"Pith Helmet"),
    ((2.26, 0.82),"Sun Cream"),
    ((3.69, 2.38),"Tent"),
    ((3.45, 2.93),"Flare Gun"),
    ((1.09, 1.77),"Olive Oil"),
    ((2.89, 0.53),"Firewood"),
    ((1.08, 2.77),"Kendal Mint Cake"),
    ((2.29, 2.85),"Snake Repellant Spray"),
    ((3.23, 4.29),"Bread"),
    ((0.55, 0.34),"Pot Noodles"),
    ((2.82,-0.45),"Software Engineering Textbook"),
    ((2.31, 2.17),"Tinned food"),
    ((1.63, 1.62),"Pork Pie")
    ]

knapsackProblemMaxDistance :: Double -> Filter
knapsackProblemMaxDistance maxweight = ((\solution -> (getWeight $ getSolutionInfo solution) > maxweight),(\solution1 solution2 -> if (getProfit $ getSolutionInfo solution1) > (getProfit $ getSolutionInfo solution2) then solution1 else solution2),False)

knapsackProblemMinWeight :: Double -> Filter
knapsackProblemMinWeight mindays = ((\solution -> (getProfit $ getSolutionInfo solution) >= mindays),(\solution1 solution2 -> if (getWeight $ getSolutionInfo solution1) < (getWeight $ getSolutionInfo solution2) then solution1 else solution2),True)

knapsackProblem1 = knapsackStart (knapsackProblemMaxDistance 20) knapsackProblemItems
knapsackProblem2 = knapsackStart (knapsackProblemMaxDistance 25) knapsackProblemItems
knapsackProblem3 = knapsackStart (knapsackProblemMinWeight   25) knapsackProblemItems 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:51:27.673

如果我不得不猜测，我会说 the`currentsolution`和`bestsolution`论点`knapsack`的评估不够热切。您可以通过添加以下行来强制评估：

```
knapsack _ _ currentsolution bestsolution | currentsolution `seq` bestsolution `seq` False = undefined 
```

在其他两种情况之前。

顺便说一句，您应该考虑创建新的数据类型，而不是使用元组。例如

```
data Filter = Filter
   { getFilterTerminationCondition :: FilterTerminationCondition
   , getFilterComparator :: FilterComparator
   , getFilterUsesTerminatingSolution :: FilterUsesTerminatingSolution } 
```

# jquery - 避免使用 fnFilter 搜索元素值或属性

> ID：15687104
> 
> 赞同：0
> 
> 时间：2013-03-28T16:24:52.373
> 
> 标签：jquery, jquery-datatables

我注意到搜索功能不仅查找可见内容，还查找表中元素的属性。

这是一个带有复选框及其值的活生生的例子：（搜索“*演示*”或“*第二个*”） [http://jsfiddle.net/HEDvf/510/](http://jsfiddle.net/HEDvf/510/)

就我而言，我在数据表中有复选框，它们有类、数据类型和值。当用户想要使用搜索功能时，它还会查找所有这些属性，而这并不是过滤器真正应该使用的。

我的复选框示例：

```
<input type="checkbox" value="demo" class="lookForThis"> 
```

有什么办法可以避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T17:32:55.587

请参阅下面的链接，它应该可以帮助您。它列出了给这只猫剥皮的几种不同方法。

[http://datatables.net/forums/discussion/807/how-to-filter- exclude-certain-columns-or-filter-only-on-text-content-not-html-tags-within-cells/p1](http://datatables.net/forums/discussion/807/how-to-filter-excluding-certain-columns-or-filter-only-on-text-content-not-html-tags-within-cells/p1)

# awk - 原始 Awk 源代码的旧版本存档？

> ID：15687108
> 
> 赞同：4
> 
> 时间：2013-03-28T16:25:04.227
> 
> 标签：awk, history

我正在尝试找到原始 Awk（a/k/a One True Awk）的源代码的“历史”版本。我找到了[Kernighan 的偶尔更新站点](http://www.cs.princeton.edu/~bwk/btl.mirror/)，它似乎总是链接到最新版本，但我还没有找到旧版本的缓存。我给 Kernighan 的邮件（大约一个月前）也没有得到回复，所以我想我应该向更广泛的受众广播这个请求。

根据对该问题的评论，我的资产中现在有一个来自[Awk Annoyances](http://www.samiam.org/awk/annoyances.html)页面的日期为 2005-04-24 的版本，以及来自[Wayback Machine](http://web.archive.org/)的 2010-2012 日期范围内的四个版本，以及两个版本（2004-02-07 和 2007 -05-01) 通过对`awk.tar.gz`.

FWIW，我的意图是用尽可能多的版本充实我[的 One True Awk 的公共 git存储库。](https://github.com/danfuzz/one-true-awk)

* * *

2013-04-11 更新：我现在已将找到的所有版本集成到上述存储库中。不过，我仍然很想找到更多来填补空白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T20:35:06.007

这是原始（Unix 版本 7，1979）源代码：

[http://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/src/cmd/awk](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/src/cmd/awk)

# forms - 检票表单“ServletRequest 不包含多部分内容”

> ID：15687113
> 
> 赞同：3
> 
> 时间：2013-03-28T16:25:19.610
> 
> 标签：forms, file-upload, wicket, multipartform-data, wicket-6

我有一个检票口表格，上面有一个文件上传框。有时这个文件上传框是隐藏的，因为用户不需要附加文档。 **我已经调用** `setMultiPart(true)` **了表单对象**，但我仍然（但很少）得到这个错误：

> java.lang.IllegalStateException：ServletRequest 不包含多部分内容。一种可能的解决方案是显式调用 Form.setMultipart(true)，Wicket 会尽力自动检测多部分表单，但在某些情况下它不能。

有用的事实：

*   此表单每天提交约 10,000 次，我每天收到此错误 5-10 次。
*   如果收到错误的用户使用相同的数据再次填写表单，它将正常工作。
*   我根本无法在本地复制错误。
*   与我交谈过的少数收到此错误的用户说他们没有上传文件。

这是表单代码的精简版：

```
Form<MyObject> form = new Form<MyObject>("form")
{       
        @Override
        protected void onSubmit()
        {
        //saving stuff here
        }

        @Override
        protected void onValidate()
        {
            super.onValidate();
            //This just highlights the fields on the form:
            visitChildren( FormComponent.class, new FormValidationVisitor() );
        }
}       

add(form);
form.setMultiPart(true);
form.setMaxSize(Bytes.kilobytes( 5120 )); 
```

表单中添加了一个自定义验证器，并且对某些表单字段有一些 AJAX 回调，但表单本身不是 AJAXy。在浏览器中查看生成的源代码，我得到的表单声明如下所示：

```
form id="form4a" action="../wicket/page?12-1.IFormSubmitListener-form" encType="multipart/form-data" method="post" accept-charset="UTF-8" 
```

提交表单的**按钮**是 Java 端的标准检票口按钮和`input type="submit"`HTML 端的标准检票口按钮，尽管在浏览器源视图中我确实`jQuery18307179054977115189="23"`在输入中看到了一个属性。

有任何想法吗？我已经尝试了所有方法来复制这个错误并且不能所以你可以提供的任何帮助都会很棒。我正在使用 Wicket 6.6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T13:50:44.317

几分钟前我遇到了同样的问题。在外部表单中，我有一个用于文件上传组件的嵌套表单。所以，这就是我修复的方法：我的外部和内部形式都有 setMultipart(true) 并且它按预期工作。

# javascript - 除了 Document.all，我可以使用什么？

> ID：15687117
> 
> 赞同：0
> 
> 时间：2013-03-28T16:25:27.767
> 
> 标签：javascript, google-chrome, firefox

我正在为我的 Gridview 调用 javascript，但似乎 document.all 在 Chrome/Firefox 中不起作用。

我可以用什么代替它？谢谢

```
<script type="text/javascript">
    GridViewHelper.Init(document.all.GridView1, 100, 0);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:26:18.053

[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)是通常的选择（元素需要一个 id）。

不过还有很多其他选项，包括新的、闪亮的和不太受支持[`document.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)的 .

# ant - 使用 ANT 检查文件的特定模式

> ID：15687119
> 
> 赞同：1
> 
> 时间：2013-03-28T16:25:33.883
> 
> 标签：ant

我想搜索特定模式的文件。例如：假设我有 2 个文件：

1.  文件名$1.class
2.  文件名$2.class

现在我想搜索`filename$*.class`，如果存在，那么我会做一些事情。请建议在 ANT 中搜索此模式。

我做了一些功课。使用可用标签，我可以找到单个文件，但无法找到具有特定模式的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:42:30.063

使用文件[集](http://ant.apache.org/manual/Types/fileset.html)

`<fileset dir="your/dir" includes="filename$*.class"/>`

# html - 带有请求正文的 getForm()

> ID：15687125
> 
> 赞同：1
> 
> 时间：2013-03-28T16:25:45.400
> 
> 标签：html, r, api, request

我已经使用了一个月左右，我真的很喜欢它。在使用 RCurl/XML/JSON 包时，我现在有点挣扎。

我有两个不同的问题：

1- Web 服务在特定 url 发布并接受以下 HTML 查询：

```
<Object_Request>
<id>1253</id>
</Object_Request> 
```

如何在我的请求中嵌入 ID 号？我应该使用 getURL() 还是 postForm() ？

2- 对我来说另一个测试是使用 Amara API（这里：[http](http://amara.readthedocs.org/en/latest/api.html) ://amara.readthedocs.org/en/latest/api.html ）

我尝试使用 postForm()：

```
postForm(url,.params=c("X-api-username:"=my_user_id,
                   "X-apikey:"=my_code)) 
```

我收到以下错误消息：

```
Error in function (type, msg, asError = TRUE)  : 
SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

与 getURL 相同：

```
getURL(url,httpheader=c("X-api-username:"=my_user_id,
                   "X-apikey:"=my_code) ) 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T23:41:20.090

尝试`ssl.verifypeer = 1L, ssl.verifyhost = 1L, cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")` 输入您的`getURL`和`postForm`请求。

# c# - C#、Windows Phone 8 安装目录

> ID：15687126
> 
> 赞同：0
> 
> 时间：2013-03-28T16:25:55.000
> 
> 标签：c#, windows-phone

如何在 C# WindowsPhone8 SDK 中添加文件到安装目录？

我正在尝试读取文本文件，该文件位于我项目的 Content 目录中。问题是，没有文本导入器。但这没关系。真正的问题是，我不知道如何将文件添加到安装目录。内容添加文件不起作用。

我正在尝试将 Lua 脚本保存在文本文件中，然后执行它。我正在使用“Aluminium Lua”库。

```
if (runAtStartup == false)
{
    runAtStartup = true;

    try
    {
        prs = new AluminumLua.LuaParser(ctx, "main.lua");
        prs.Parse();
    }

    catch (Exception e)
    {
        System.Diagnostics.Debug.WriteLine(e.Message);
    }
} 
```

这段代码向我抛出了这个异常：

> mscorlib.ni.dll 中出现“System.IO.FileNotFoundException”类型的第一次机会异常找不到文件“C:\Data\Programs{9B9E8659-C441-4B00-A131-3C540F5CEE4F}\Install\main.lua”。

如何将文件添加到安装目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:08:50.033

将您的文件作为内容添加到您的项目中。您可以通过以下方式访问您的文件：

```
string folder = Package.Current.InstalledLocation.Path;
string path = string.Format(@"{0}\data\myData.bin", folder);
StorageFile storageFile = await StorageFile.GetFileFromPathAsync(path);
Stream stream = await storageFile.OpenStreamForReadAsync(); 
```

或类似的东西：

```
string folder = Package.Current.InstalledLocation.Path;
string currentMovieVideoPath = string.Format(@"{0}\media\video\Movie.mp4", folder);
this.MovieVideo.Source = new Uri(currentMovieVideoPath, UriKind.Absolute); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:01:42.050

通过将文件作为内容添加到我的项目树中的特定文件夹（例如/Data），我已经在我的一些手机应用程序中解决了这个问题。然后，当应用程序第一次运行时，我将内容文件复制到隔离存储中，然后我的应用程序可以根据需要读取它。这是一个简单的例子：

```
// Check for data files and copy them to isolated storage if they're not there...
// See below for methods found in simple IsolatedStorageHelper class
var isoHelper = new IsolatedStorageHelper();

if (!isoHelper.FileExists("MyDataFile.xml"))
{
    isoHelper.SaveFilesToIsoStore(new[] { "Data\\MyDataFile.xml" }, null);
}

/* IsolatedStorageHelper Methods */

/// <summary>
/// Copies the content files from the application package into Isolated Storage.
/// This is done only once - when the application runs for the first time.
/// </summary>
public void SaveFilesToIsoStore(string[] files)
{
    SaveFilesToIsoStore(files, null);
}

/// <summary>
/// Copies the content files from the application package into Isolated Storage.
/// This is done only once - when the application runs for the first time.
/// </summary>
public void SaveFilesToIsoStore(string[] files, string basePath)
{
    var isoStore = IsolatedStorageFile.GetUserStoreForApplication();

    foreach (var path in files)
    {
        var fileName = Path.GetFileName(path);

        if (basePath != null)
        {
            fileName = Path.Combine(basePath, fileName);
        }

        // Delete the file if it's already there
        if (isoStore.FileExists(fileName))
        {
            isoStore.DeleteFile(fileName);
        }

        var resourceStream = Application.GetResourceStream(new Uri(path, UriKind.Relative));

        using (var reader = new BinaryReader(resourceStream.Stream))
        {
            var data = reader.ReadBytes((int)resourceStream.Stream.Length);

            SaveToIsoStore(fileName, data);
        }
    }
} 
```

这种方法的缺点是您实际上将数据文件存储了两次。好的一面是，一旦它们处于隔离存储中，它们就很容易使用。尽管如此，我不知道 Lua API 支持什么——即我不知道它们是否可以从隔离存储中加载。如果没有，您始终可以打开文件流并可能以这种方式加载 Lua 脚本文件。

# fiddler - 使用 Fiddler 和 Firefox 捕获 Facebook 起始页 https

> ID：15687127
> 
> 赞同：0
> 
> 时间：2013-03-28T16:25:55.547
> 
> 标签：fiddler

我尝试使用 Fiddler捕获 Facebook 起始页（[https://www.facebook.com/ ）。](https://www.facebook.com/)Fiddler 为 https 正确配置：我可以使用 Chrome 和 IE 捕获 facebook 流量。

但是，如果我尝试使用 FF（最新 19.0.2）执行此操作，则由于 javascript 错误，页面呈现部分可能。Fiddler 的 DO NOT TRUST root 下面的 Fiddler 证书安装正确。

有任何想法吗？

![在此处输入图像描述](../Images/b321e4d29bf989270f93c3f944b3e7e7.png)

![在此处输入图像描述](../Images/b0baa0962991688b53ae08f43c07410d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:06.087

在您的屏幕截图中，您似乎专门为 Facebook.com 配置了**证书例外**，但 Facebook 的大部分资产实际上并不在该域中。而不是这样做，而是将 Firefox 配置为**信任 Fiddler 根证书**：

1> 在 Fiddler 中，选择工具 > Fiddler 选项 > HTTPS > 将根证书导出到桌面。

2> 在 Firefox 中，选择工具 > Firefox 选项 > 高级 > 加密 > 证书 > 授权 > 导入并从桌面导入 FiddlerRoot.cer 文件。

# ruby-on-rails - 直接连接两个表和使用第三个表进行关系有什么区别？

> ID：15687128
> 
> 赞同：0
> 
> 时间：2013-03-28T16:25:56.043
> 
> 标签：ruby-on-rails, database

如果一个人有很多帖子，我们可以有一个 People 表和一个 Posts 表。Posts 表中的每个条目都有一个指向 People 条目的键。典型的 has_many 关系。

或者我们可以有一个 People 和一个 Posts 表，以及一个关系表，其中包含来自 People 条目和 Posts 条目的键来连接它们。

似乎两者都是可行的，那么我如何决定选择哪一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:31:47.890

您公开的两个解决方案实际上解决了两个不同的问题：

*   第一个是关系（[指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-association)`one to many`中的更多信息）。基本上，一个帖子与一个独特的帖子相关联，因此不需要额外的表格。

*   如果某个帖子可以以某种方式与多个独特的人相关，那么您就有`many to many`关系（[指南中的](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)更多信息）。在这种情况下，`join tabe`介于`posts`和之间`people`可以让您知道哪些人与帖子相关联，哪些帖子与用户相关联。请注意，您也可以使用`has_many :through`（更多信息在[指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)中），但这是另一个讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:30:28.893

当您具有“多对多”关系时，您使用第三个表（连接表）。也就是说，一个人可以有很多帖子，一个帖子可以有很多人。

在您的示例中，如果帖子只能属于一个人，则它是“一对多”，您不需要也不应该创建连接表。帖子表中的外键是确保帖子只属于一个人。使用连接表，您可以打破该约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:30:36.087

不同之处在于这是两种不同的关系。

*   “has_many”（没有连接表）意味着一个人有很多帖子，一个帖子属于一个唯一的人。
*   “has_and_belongs_to_many”（带有这个连接表）意味着一个人有很多帖子，一个帖子有很多人。

[一对多、多对一和多对多的区别？](https://stackoverflow.com/questions/3113885/difference-between-one-to-many-many-to-one-and-many-to-many)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:30:48.677

您的方法 2（多对多）仅在帖子将有多个作者时才需要，这种情况很少见。

在大多数情况下，您的方法之一就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:34:49.173

如果你有一个连接表，这**通常**意味着你在两个模型之间有一个多对多的关系。在您的示例中，这意味着一个帖子可以属于多个用户，一个用户可以属于多个帖子。

如果您不使用连接表，这意味着您在两个模型之间存在一对多或一对一的关系。请看下面的案例：

**案例1：帖子中的user_id**

这意味着发布`belong_to`用户。用户可以与帖子建立`has_many`或`has_one`关系

**案例2：用户中的post_id**

显然，这与案例 1 正好相反。但我必须强调，放置外键的位置对数据库模型至关重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T16:38:19.963

当关联的条目不能在多个所有者之间共享时，您使用“一对多”关系（一个表具有另一个表的外键）。在您的示例中：如果 Post 仅属于一个用户，您将使用这种关系（Posts 表将包含 People 表的外键）。

您将使用关系表来表示“多对多”关系。仍然以您为例，如果一个 People 可以有多个 Posts，并且一个 Post 可以属于多个人（想象一个帖子可以由多个人创建），您将需要第三个表来存储这些关系。此关系表将允许您将多个人员 ID 关联到同一个帖子 ID，或者将多个帖子 ID 关联到同一个人。

问候

# mysql - mySql REGEXP中的逻辑AND运算符？

> ID：15687136
> 
> 赞同：12
> 
> 时间：2013-03-28T16:26:18.313
> 
> 标签：mysql, regex

我使用 MySql 正则表达式：

```
SELECT * FROM myTable
WHERE title REGEXP "dog|cat|mouse"; 
```

数据集很小，所以我不关心性能。我更喜欢这个而不是 LIKE 表示法，因为我不必连接一堆“LIKE”语句。

但是，上述表示法使用逻辑 OR 运算符。是否有逻辑 AND 运算符，以便仅匹配包含所有关键字的行？

（我使用的是 InnoDB，所以全文搜索不是一个选项）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T16:35:21.050

除了连接 AND 之外，真的没有很好的解决方案：

```
SELECT * FROM myTable
WHERE title REGEXP "dog"
AND title REGEXP "cat"
AND title REGEXP "mouse" 
```

否则，正则表达式将如下所示：

```
SELECT * FROM myTable
WHERE title REGEXP "(dog.*cat.*mouse)|(dog.*mouse.*cat)|(mouse.*dog.*cat)|(mouse.*cat.*dog)|(cat.*dog.*mouse)|(cat.*mouse.*dog)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:34:19.927

`AND`操作可能只能由 mysql-AND 访问：

```
WHERE title REGEXP 'dog' AND title REGEXP 'cat' AND title REGEXP 'mouse' 
```

这只会显示所有关键字都在标题字段中的条目。像

```
title = "this is about mouse, cat and dog" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:34:51.237

您可以在它们之间添加几个条件`AND`：

```
SELECT * FROM myTable
WHERE title REGEXP "dog" AND title REGEXP "cat" AND title REGEXP "mouse"; 
```

也许这里不需要 REGEXP，您可以使用[INSTR](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_instr)代替（常规通常较慢）：

```
SELECT * FROM myTable
WHERE INSTR(title, "dog") AND INSTR(title, "cat") AND INSTR(title, "mouse"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-04T11:25:05.500

您可以在布尔模式下使用全文搜索：

```
SELECT * FROM table WHERE MATCH(colmun_name) AGAINST('+dogs +cat' IN BOOLEAN MODE); 
```

您必须首先索引您的表：

```
ALTER TABLE table ADD FULLTEXT(column_name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-26T13:19:03.950

如果您的标题包含所有搜索词，例如：

`Anything mouse anything cat anything dog anything`

然后，您将以任意顺序（例如 dog、cat 和 mouse）在重复 3 次的标题中获得所有搜索词。

`Anything mouse anything cat anything DOG anything`

`Anything mouse anything CAT anything dog anything`

`Anything MOUSE anything cat anything dog anything`

因此，您可以在不连接 AND 的情况下执行此操作：

`SELECT * FROM myTable WHERE REPEAT(title,3) RLIKE '.*dog.*cat.*mouse.*';`

# c++ - #ifdef / #ifndef 和 #endif

> ID：15687138
> 
> 赞同：0
> 
> 时间：2013-03-28T16:26:24.467
> 
> 标签：c++, cuda

我有一段代码必须在 CPU 和 CUDA-GPU 上运行，而另一段代码单独在 CPU 上运行。 `#define ENABLE_CUDA`是我“打开”以在整个应用程序中启用 CUDA 代码。这是我的代码的样子......

```
# define ENABEL_CUDA is the preprocessor directive to turn ON/OFF CUDA code.

CPU and GPU code --This piece of code has to be executed irrespective of whether CUDA is ON / OFF.

standalone CPU code alone -- This piece of code has to be executed only if CUDA is OFF. 
```

我的解决方案是：

```
#ifdef ENABLE_CUDA

  CPU AND GPU code
# else
  CPU AND GPU code
  standalone CPU code 
# endif 
```

但这涉及 ifdef 和 else 块中的代码重复（CPU 和 GPU 代码），我想避免它。

我怎样才能实现它？为了避免代码重复，必须做什么？对此表示赞赏的任何指针...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:29:24.703

```
#ifdef ENABLE_CUDA

  CPU AND GPU code
# else
  CPU AND GPU code
  standalone CPU code 
# endif 
```

相当于：

```
 CPU AND GPU code
# ifndef ENABLE_CUDA
  standalone CPU code 
# endif 
```

一般来说，如果代码对两者都是通用的，那么`if`您`else`可以将其移出两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:29:03.387

为什么不简单地使用：

```
CPU AND GPU code

#ifndef ENABLE_CUDA
  standalone CPU code 
# endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:14:43.620

除了其他人已经说过的话，

```
#ifndef ENABLE_CUDA
# define __device__
#endif 
```

如果存在 CUDA，将带您编写在设备上运行的函数，如果不存在，则在主机上运行，​​而无需重复代码。

# sql - 如何编写具有多种情况的 where 子句？

> ID：15687139
> 
> 赞同：0
> 
> 时间：2013-03-28T16:26:29.833
> 
> 标签：sql, where-clause

我有一个具有可为空参数的存储过程，以下是我的查询

```
select * 
from table1
where table1.id = isnull(@id, table1.id) 
```

现在有一些特殊的 id 我会区别对待它们。我正在添加另一个表 table2，如下所示

```
combid    id
1         abc01
1         abc02
1         abc03
2         hig01
2         hig02 
```

我必须更改查询以满足以下情况

1.  如果`@id`为 null，则 where 子句将是`table1.id = table1.id`
2.  如果`@id`不为空，
    则为 2.1，如果`@id`table2 中存在，则 where 子句将为`table1.id in (select id from table2 where combid in (select combid from table2 where id=@id))`
    2.2，否则 where 子句将为`table1.id = @id`

我尝试了以下查询，但不起作用。

```
select  * from table1
where (table1.id=@id and not exists(select * from table2 where id=@id)
or @id is null
or table1.id in (select id from table2 where combid in (select combid where id=@id)) and  exists(select * from table2 where id=@id)) 
```

如何更改存储过程的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:52:26.720

```
SELECT * FROM table1
WHERE
    @id IS NULL
    OR
    (
        @id IS NOT NULL
        AND
        (      
            (
                EXISTS (SELECT * FROM TABLE2 WHERE id = @id)
                AND
                table1.id IN (SELECT id FROM table2 WHERE combid in (SELECT combid FROM table2 WHERE id=@id))
            ) 
            OR
            (
                NOT EXISTS (SELECT * FROM TABLE2 WHERE id = @id)
                AND         
                table1.id = @id
            )
        )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:45:30.583

您可以使用 if...else... 而不是只编写一个 SELECT 语句，在您的情况下使用**if else**更容易阅读。

```
 if(@id is null)
    select * from table1
else if exists (select 1 from table2 where id = @id)
    select * from table1 
    where table1.id in 
                  (select id from table2 where combid in 
                         (select combid from table2 where id=@id)
                  )
else 
   select * from table1 where table1.id=@id 
```

# windows - git add 不会暂存某些文件

> ID：15687142
> 
> 赞同：4
> 
> 时间：2013-03-28T16:26:47.337
> 
> 标签：windows, git, msysgit

我在 Win8 上运行 msysgit 1.8.1。我正在尝试对我正在从事的项目进行一些更改。我正在尝试暂存对 vcxproj 和 vcxproj.filters 文件的更改，但无论我做什么，它们始终显示为未暂存。我认为这可能是区分大小写的问题，但即使使用 core.ignorecase=true 选项也没有什么不同。有谁知道如何解决这个问题？

这是我尝试暂存其中一个文件的记录。

```
C:\sdev\realtick [dev +2 ~2 -0 | +0 ~2 -0]> git status
# On branch dev
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   rtpack.props
#       modified:   rtpack.targets
#       new file:   tools/TALRGB/TalRgb32.idb
#       new file:   tools/TALRGB/packages.props
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   TOOLS/TALRGB/TalRgb.vcxproj
#       modified:   TOOLS/TALRGB/TalRgb.vcxproj.filters
#

C:\sdev\realtick [dev +2 ~2 -0 | +0 ~2 -0]> git add TOOLS/TALRGB/TalRgb.vcxproj

C:\sdev\realtick [dev +2 ~2 -0 | +0 ~2 -0]> git status
# On branch dev
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   rtpack.props
#       modified:   rtpack.targets
#       new file:   tools/TALRGB/TalRgb32.idb
#       new file:   tools/TALRGB/packages.props
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   TOOLS/TALRGB/TalRgb.vcxproj
#       modified:   TOOLS/TALRGB/TalRgb.vcxproj.filters
#
C:\sdev\realtick [dev +2 ~2 -0 | +0 ~2 -0]> 
```

# java - 对象输入流

> ID：15687146
> 
> 赞同：0
> 
> 时间：2013-03-28T16:26:52.613
> 
> 标签：java, objectinputstream

我正在寻找如何`ObjectInputStream`用于大学项目。我发现了很多东西，但我不知道为什么我不能成功。最糟糕的是，我收到了越来越多的警告。

这是我的三门课：

```
public class Contact implements Comparable<Contact>
{
private String nom;
private String prenom;
private int numTel;
private static int nbContacts;
private int numContact;

public Contact(String nom, int tel) //Constructeur nom et numero
{
    System.out.println(this.numTel);
    this.numTel = tel;
    System.out.println(this.numTel);
    this.nom = nom;
    this.numContact=++nbContacts;
}

public Contact(String nom)  //Constructeur Nom
{
    this.nom = nom;
    this.numContact=++nbContacts;
}

public Contact(String nom, String prenom, int tel) //Constructeur Nom, prenom, numero
{
    this.numTel = tel;
    this.nom = nom;
    this.prenom = prenom;
    this.numContact=++nbContacts;
}

public String getNom()
{
    return this.nom;
}

public String getPrenom()
{
    return this.prenom;
}

public int getTelephone()
{
    return this.numTel;
}

public int getNumContact()
{
    return this.numContact;
}

public void setNom(String nom)
{
    this.nom = nom;
}

public void setNumTelephone(int num)
{ 
    this.numTel = num;
}

public boolean equals(Contact contact)
{
    if(!this.nom.equals(contact.getNom()))
    {
        return false;
    }
    if(this.numTel!=contact.getTelephone())
    {
        return false;
    }
    return true;
}

public int compareTo(Contact contact)
{
    return (Integer.valueOf(this.nom) - Integer.valueOf(contact.getNom()));
}   
public String toString()
{
    String s = this.numContact + ") ";
    s+= String.format ( "%-10s", "NOM : ")  + this.nom;
    if(this.prenom != null)
    {
        s+=" | " + String.format ( "%-10s", "PRENOM : " )  + this.prenom ;
    }
    if(this.numTel != 0)
    {
        s+=  " : " + this.numTel;
    }           
    s += "\n";      
    System.out.println(this.nom);
    return s;
}
} 
```

下一个

```
import java.util.ArrayList;
import java.util.List;
import java.io.*;
import java.util.Collections; 
public class Repertoire 
{
    private ArrayList<Contact>alContact;

public Repertoire()
{
    alContact = new ArrayList<Contact>();
    this.getData();
}

public String toString() 
{
    String s = "";
    for ( int cpt = 0; cpt < alContact.size(); cpt++ )
    {
        s += alContact.get(cpt).toString() + "\n";
    }
    return s;
}

public void addContact(String nom, int tel) //Constructeur nom et numero
{
    alContact.add(new Contact(nom, tel));
    this.sauvegarder();
}

public void addContact(String nom)  //Constructeur Nom
{
    alContact.add(new Contact(nom));
    this.sauvegarder();
}

public void addContact(String nom, String prenom, int tel) //Constructeur Nom, prenom, numero
{
    alContact.add(new Contact(nom, prenom, tel));
    this.sauvegarder();
}

// Permet d'enregistrer dans un fichier .dat les éléments du répertoire 
private void sauvegarder()
{
    try
    {
        ObjectOutputStream out = new ObjectOutputStream ( new FileOutputStream ("Rep.txt") );
        out.writeObject ( alContact );
    }
    catch ( Exception e ) {}
}

public void getData() 
{
    FileInputStream fis = null;
    ObjectInputStream in = null;
    try 
    {
        fis = new FileInputStream("~/Rep.txt");
        in = new ObjectInputStream(fis);
        alContact = (ArrayList) in.readObject();
        in.close();
    } 
    catch (IOException ex) 
    {
        System.out.println("Bordel");
    } 
    catch (ClassNotFoundException ex) 
    {
        System.out.println("Gros Bordel");
    }
}
// Permet de recuperer les donnée dans un fichier txt
private boolean charger()
{
    try
    {
        System.out.println("Dedans");
        ObjectInputStream in = new ObjectInputStream ( new FileInputStream ("Rep.txt"));
        System.out.println("Dedans");
        alContact = (ArrayList<Contact>) in.readObject();
        System.out.println("Dedans");
    }
    catch ( Exception e ) 
    {
        System.out.println("Pas de fichier");   
        return false;
    }

    Collections.sort (alContact);
    return true;
} 
```

}

只是一个测试

```
public class Test
{
    public static void main(String[] args)
    {
        int tel;
        Repertoire rep = new Repertoire();
        /*System.out.println("Entrez le numero");
        tel = Clavier.lire_int();
        rep.addContact("José", tel);
        */System.out.println(rep);
    }
} 
```

这个程序是一个电话索引。我尝试将索引保存到 .txt/.dat 中，但是当我无法将其放入程序时。我希望这是可以理解的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:28:46.843

您的`Contact`类必须实现`Serializable`才能可序列化以保存/读取/读取`InputObjectStream`/ `OutputObjectStream`。

来自[ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)文档：

> 类通过实现 java.io.Serializable 或 java.io.Externalizable 接口来控制它们的序列化方式
> 
> 实现 Serializable 接口允许对象序列化保存和恢复对象的整个状态，它允许类在写入流和读取流之间演变。它自动遍历对象之间的引用，保存和恢复整个图形。

请注意，当您`Repertoire#getData`在程序中运行并且文件为空时，您根本不会加载任何数据。因此，最好先在其中保存一些数据。您可以这样做来添加一些数据：

```
public void setStartData() {
    Contact contact = new Contact("Luiggi", "Mendoza", 12345);
    List<Contact> lstContact = new ArrayList<Contact>();
    lstContact.add(contact);
    ObjectOutputStream out = null;
    try {
        out = new ObjectOutputStream(new FileOutputStream("Rep.txt"));
        out.writeObject(lstContact);
        out.flush();
    } catch (IOException e) {
        System.out.println("Error while saving data.");
        e.printStackTrace(System.out);
    } finally {
        if (out != null) {
            out.close();
        }
    }
} 
```

附加建议：

*   `static`将数据保存在文件中时，字段不会被序列化。
*   数据将在文件中序列化，因此即使您将其视为文本文件，其内容也不会像人类可读文本中的那样（至少您会说 Java 可序列化语言）。
*   类中的每个属性`Serializable`也应该是可序列化的。这意味着，如果您在其中有一个对象实例，那么它的类**必须**实现该`Serializable`接口。
*   `transient`您可以通过添加修饰符从序列化中省略一个属性。
*   **重要提示**：如果您保存数据、更改类定义并尝试加载数据，您会收到错误消息。确保您的类在序列化/反序列化时具有**相同的结构。**看起来你在这个问题上运行最后一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:48:28.513

注意你在课堂上重写你的`equals`方法的方式`Contact`。
它的参数应该是`Object`类型。应该是这样的

```
public boolean equals(Object obj)
{
    if ( ! (obj instanceof Contact))
    return false;
    Contact contact = (Contact) obj;
    if(!this.nom.equals(contact.getNom()))
    {
        return false;
    }
    if(this.numTel!=contact.getTelephone())
    {
        return false;
    }
    return true;
} 
```

还可以通过在定义`Contact`类时`Serialzable`实现`Serializable`接口来创建`Contact`类。

你的 sauvegarder 方法应该是这样的：

```
private void sauvegarder()
{
    ObjectOutputStream out = null;
    try
    {
        out = new ObjectOutputStream ( new FileOutputStream ("Rep.txt") );
        out.writeObject ( alContact );
    }
    catch ( Exception e ) {}
    finally
    {
      if(out!=null)
      {
        try
        {
           out.close();//close the outputstream
        }catch(Exception ex){}
      }
    }
} 
```

你的`getData`方法应该是这样的：

```
public void getData() 
{
    FileInputStream fis = null;
    ObjectInputStream in = null;
    try 
    {
        fis = new FileInputStream("Rep.txt");//Why using ~/Rep.txt instead of Rep.txt?
        in = new ObjectInputStream(fis);
        alContact = (ArrayList<Contact>) in.readObject();
    } 
    catch (IOException ex) 
    {
        System.out.println("Bordel");
    } 
    catch (ClassNotFoundException ex) 
    {
        System.out.println("Gros Bordel");
    }
    finally
    {
      if(in != null)
      {
        try
        {
           in.close();
        }catch(Exception ex){}
      }
    }
} 
```

而且您正在从不存在的文件中读取数据，因为到目前为止您还没有编写任何内容，因此对于演示，您可以通过`Repertoire`以下方式更改构造函数：

```
public Repertoire()
{
    alContact = new ArrayList<Contact>();
    addContact("John",879999);
    addContact("Micky",4333);
    sauvegarder();
    this.getData();
} 
```

`Contact`并按如下方式更改您的类声明：

```
public class Contact implements Comparable<Contact>,java.io.Serializable 
```

# css - 复选框 IE9 附近的虚线边框

> ID：15687147
> 
> 赞同：0
> 
> 时间：2013-03-28T16:26:54.170
> 
> 标签：css, extjs, checkbox, internet-explorer-9, outline

我使用 EXT.Js 框架，我遇到了 IE9 的问题（在 IE8 和以前的版本中都可以正常工作）：单击它时，所有复选框附近都有一个虚线边框。我试图在主css文件中设置：

```
body.ext-ie input{
    outline: none;
} 
```

但它不起作用。

我认为它与我的复选框相关的标签有关，但我真的不知道如何修复它。

我的问题的一个例子：

![红色的错误行为](../Images/5cc0d3f25a8caa5809aceba61101a806.png)

生成此复选框的 ExtJs 代码是：

```
{
    fieldLabel: 'XXXX XXXX',    
    name: 'XXXX',                
    xtype: 'checkbox',    
    disabled: !isXXXXX} 
```

此处提供了一个 css 文件：[css 文件](http://pastebin.com/VW7PLm3J)

**更新 1**

我已将 ExtJS 文件更正如下： JS：

```
items [{
    fieldLabel: 'xxx',    
    name: 'xxx',                
    xtype: 'checkbox', 
    style: {outline: 'none'}, 
    onfocus: function() {this.style.outline = "none"; }
 }] 
```

它生成以下html：

```
<div class="x-form-check-wrap" id="ext-gen271" style="width: 180px;">
  <input type="checkbox" autocomplete="off" id="ext-comp-1161" name="persistentRecoveryEnabled" class=" x-form- 
 checkbox x-form-field" style="outline: none;" checked="">
  <label for="ext-comp-1161" class="x-form-cb-label" id="ext-gen272">&nbsp;</label>
</div> 
```

在文档模式 Quirks Mode(Page default) 中，虚线出现在“x-form-cb-label”周围。

在文档模式 IE9 标准虚线中不会出现此设置。

CSS修改根本没有帮助。

所以，有两个问题：

1.  如何为`class="x-form-cb-label"`via JS 设置样式？
2.  如何通过 JS 将文档模式 IE9 标准设置为页面默认值？(html 由 ExtJS 生成)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:27:01.840

是的，正如您所怀疑的那样，这是您所在领域的一个`outline`领域`label`。

您隐藏的代码`outline`不起作用的原因是因为您将大纲指定为字段，而不是标签。

（尽管给出了您向我们展示的代码，但我想知道为什么它是空格而不是说`XXXX XXXX`？）

如果你想隐藏它，你应该使用`label`你的选择器而不是`input`：

```
label {
    outline: 0;
} 
```

不过，在您这样做之前，值得指出的是，当前所选字段周围的虚线轮廓对于某些用户来说是一项重要功能。特别是，不能使用鼠标的残疾用户在使用键盘导航网站时依赖它，以便他们知道他们在页面上的位置。

如果您隐藏，您将积极歧视这些用户。（取决于您的网站受众，这对您来说可能并不特别重要，但请注意它在某些国家/地区是非法的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:07:15.793

试试这个

```
label:focus
{
    outline:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T15:34:46.450

我使用了类似`style='background:#fff;border:none;'`的css，它可以很好地删除ie9中复选框周围的边框。

# android - 如何通过蓝牙连接到同一应用程序的用户

> ID：15687150
> 
> 赞同：1
> 
> 时间：2013-03-28T16:27:04.530
> 
> 标签：android, bluetooth

我正在编写一个应用程序，允许其用户通过蓝牙自动与附近的其他用户交换数据。通常，这两个用户必须手动相互配对才能发生这种情况。

我想知道是否有办法绕过此步骤并自动发现并连接到我的应用程序的附近用户，也许使用某种应用程序 ID 签名来确保安全？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:36:15.773

我从您的评论中看到，您已经发现了问题的“连接”部分的解决方案：用于在没有手动配对的情况下创建不安全连接的 API。

但这仍然留下了发现。为了创建连接，您需要目标的蓝牙地址 (bd addr)。为此，您需要让一个用户的手机进入可发现模式，然后在另一部手机上进行发现。这不能静默完成——您的应用可以调用这些模式，但这会导致手机提示用户。没有那么糟糕，但可能不像你想要的那样自动。

如果两部手机在同一个网络上，它们可以通过网络交换 bd_addr - 无需发现。或者这可能发生在服务器作为中介的情况下，但如果您还没有计划拥有服务器，这将是更多的工作。

# javascript - javascript 在五秒内逐渐改变变量

> ID：15687152
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:06.973
> 
> 标签：javascript, html, css

我是 JavaScript 的初学者。我试图在五秒钟内将进度条的值从 100 更改为 0，但我无法让它正常工作。我尝试了本[教程](http://www.onlywebpro.com/2011/09/09/html5-progress-bar/)，但无法控制时间。我有一个[JSFiddle](http://jsfiddle.net/Changer098/zfuTp/3/)来展示我所拥有的。我真的很感激任何帮助。我的 Javascript

```
var correct = "a1";
function onload()
{
var question1 = "Who was the first president?";
var answers = {
  "a1":"George Washington",
  "a2":"John Adams", 
  "a3":"Bill Clinton",
  "a4":"Richard Nixon"}; 
document.getElementById("qstn").innerHTML=question1;
document.getElementById("a1").innerHTML=answers.a1;  
document.getElementById("a2").innerHTML=answers.a2;  
document.getElementById("a3").innerHTML=answers.a3; 
document.getElementById("a4").innerHTML=answers.a4;
var bar = document.getElementById("bar").value;
} 
```

我的 HTML 是

```
<body onload="onload()">
<p id="qstn"></p>
<button class="btn" onclick="checker()"><span id="a1"></span></button>
<button class="btn" onclick="checker()"><span id="a2"></span></button>
<button class="btn" onclick="checker()"><span id="a3"></span></button>
<button class="btn" onclick="checker()"><span id="a4"></span></button>
<progress value="100" max="100" id="bar"></progress>
</body> 
```

再次，任何帮助或意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:39:44.980

你可以像这样使用间隔：

```
var max = 100;
setInterval(function(){
document.getElementById("bar").value=max;
        max = max-20;
},1000); 
```

希望这有帮助！它运行 5 秒到 0 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:36:55.320

你可以试试这个： -

```
setInterval(function(){bar.value--},1000); 
```

`1000`表示第二个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:42:01.807

这是您想要的工作小提琴：

[http://jsfiddle.net/zfuTp/8/](http://jsfiddle.net/zfuTp/8/)

添加代码：

```
var interval = setInterval(update, 1000);
var i = 100;

function update() {
    document.getElementById("bar").style.width = (i-=20) + "%";      
    if(i<=0) clearInterval(interval);
} 
```

在这里，进度条的宽度在每次迭代 5 秒时减小 20%。

# forms - Symfony 2中的数字输入和无效消息

> ID：15687153
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:08.977
> 
> 标签：forms, symfony

我不知道我是否理解得很好......如果我希望我的表单输入只接收数字，我可以使用数字字段

```
$builder->add('width', 'number', array(
        'label' => $this->translator->trans('image.builder.width'),
        'invalid_message' => 'oops'
    )); 
```

当我在输入区域中键入字母时，会发生错误，但不会显示消息……什么也没有。

这是使用数字输入的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:08:43.697

确保呈现表单错误

```
{{ form_errors(form) }} 
```

如果您想在其各自字段附近显示表单错误，请参阅此问题：

[Symfony2 form_errors](https://stackoverflow.com/questions/8655410/symfony2-form-errors)

# collections - 有什么方法可以禁用 ORMLite 对使用 DataType.SERIALIZABLE 声明的字段是否实现 Serializable 的检查？

> ID：15687160
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:32.087
> 
> 标签：collections, ormlite, serializable

问题标题几乎说明了一切。我有一个这样声明的字段：

```
 @DatabaseField(canBeNull=false,dataType=DataType.SERIALIZABLE)
    List<ScheduleTriggerPredicate> predicates = Collections.emptyList(); 
```

根据上下文，`predicates`可以包含空列表或`Collections.unmodifiableList(List)`以 an`ArrayList`作为其参数返回的不可变列表。因此，我*知道*有问题的对象是可序列化的，但我无法告诉编译器（以及 ORMLite）它是可序列化的。因此我得到了这个例外：

```
SEVERE: Servlet /ADHDWeb threw load() exception
java.lang.IllegalArgumentException: Field class java.util.List for field
    FieldType:name=predicates,class=ScheduleTrigger is not valid for type 
    com.j256.ormlite.field.types.SerializableType@967d5f, maybe should be
    interface java.io.Serializable 
```

现在，如果只有某种方法可以禁用检查，那么一切显然都会正常工作......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T19:34:19.503

定义自定义数据类型在 FM 中有很好的记录：

> [http://ormlite.com/docs/custom-data-types](http://ormlite.com/docs/custom-data-types)

您可以扩展`SerializableType`类和`@Override`方法`isValidForField(...)`。在这种情况下，这将序列化集合。

```
public class SerializableCollectionsType extends SerializableType {
    private static LocalSerializableType singleton;
    public SerializableCollectionsType() {
        super(SqlType.SERIALIZABLE, new Class<?>[0]);
    }
    public static LocalSerializableType getSingleton() {
        if (singleton == null) {
            singleton = new LocalSerializableType();
        }
        return singleton;
    }
    @Override
    public boolean isValidForField(Field field) {
        return Collection.class.isAssignableFrom(field.getType());
    }
} 
```

要使用它，您必须`dataType`用`persisterClass`in替换`@DatabaseField`：

```
@DatabaseField(canBeNull = false,
    persisterClass = SerializableCollectionsType.class)
List<ScheduleTriggerPredicate> predicates = Collections.emptyList(); 
```

我已添加到单元测试中以显示使用此代码的工作代码。这是[github 更改](https://github.com/j256/ormlite-core/commit/6a9e49b8154f233fe551e13aea0892d0afaa31e6)。

# php - 构建 Joomla 3 自定义组件

> ID：15687161
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:32.127
> 
> 标签：php, joomla, joomla3.0, joomla-component

我目前正在 Joomla 3 中构建一个自定义组件，它允许用户使用前端的 Ajax 表单通过邮政编码搜索体育俱乐部。我拥有所有这些功能，现在正在处理组件的后端（在管理员中）。此部分需要允许管理员添加和删除体育俱乐部等。

我在构建自定义 Joomla 组件方面没有过多的经验，但对 MVC 有很好的工作知识，但遇到了一些问题。

该组件使用名为“Posctodes”的视图作为默认视图，该视图本身包含所有当前体育俱乐部的下拉菜单，允许用户选择俱乐部，点击提交并被带到编辑页面以更改有关该俱乐部的详细信息。这就是我遇到问题的地方。我想制作一个名为“editform”的单独视图，用户将被带到他们选择了一个俱乐部进行编辑。我不确定如何在 Joomla 框架内解决这个问题。

到目前为止，这是我的组件代码：

组件的控制器（admin/components/com_postcode/controller.php）：

```
<?php
defined('_JEXEC') or die;

class PostcodeController extends JControllerLegacy {

    protected $default_view = 'postcodes';

    public function display($cacheable = false) {           

        $view = $this->input->get('view', 'postcodes');
        $layout= $this->input->get('layout', 'postcodes');
        $id     = $this->input->getInt('id');

        return parent::display($cacheable);
    }
} 
```

?>

邮政编码视图的 view.html.php 文件 (admin/components/com_postcode/views/postcodes/view.html.php)：

```
<?php
defined('_JEXEC') or die;

class PostcodeViewPostcodes extends JViewLegacy {

    public function display($tpl = null) {
        $clubs = $this->get('Clubs');
        $this->clubs = array();
        foreach($clubs as $club) {
            $this->clubs[] = array(
                'club_id'         =>    $club['club_id'],
                'name'            =>    $club['name'],
                'postcode'        =>    $club['postcode'],
                'link'            =>    $club['link'],
                'description'     =>    $club['club_id'],
                'image'           =>    $club['club_id'],
                'address'         =>    $club['club_id']
            );
        }
        $pagination = $this->get('Pagination');

        $this->items = $items;
        $this->pagination = $pagination;

        parent::display($tpl);
    }

} 
```

?>

以及视图文件（admin/components/com_postcode/views/postcodes/tmpl/default.php）：

```
<div class="row-fluid">
<div id="filter-bar" class="btn-toolbar">
    <a class="btn" href="">Clubs</a>
    <a class="btn" href="">Postcodes</a>
</div>
<div class="span2">view

</div>
<div class="postcode_admin span10">
    <h3>Postcode Search Component</h3>      
    <form action="<?php echo JRoute::_('index.php?option=com_users&view=clubedit');?>" method="post" name="postcodeForm" id="postcodeForm">
        <select name="clubs" id="clubFilter">
            <option value="">-- Please select --</option>
            <?php foreach($this->clubs as $club) { ?>
                <option value="<?php echo $club['club_id']; ?>"><?php echo $club['name']; ?></option>
            <?php } ?>
        </select>
        <input type="submit" name="submit" id="submit" value="Submit" />
    </form> 

    <div class="club_information">

    </div>
</div> 
```

正如您从“default.php”文件中看到的那样，我告诉表单提交到“clubedit”视图，但它没有。我知道我在这里遗漏了一些东西，但是在线上没有很多关于 Joomla 3 组件的文档。任何人都可以对此有所了解吗？

谢谢！！

# php - 根据 url 的城市值更新 <option>标签的 'selected' 属性</option>

> ID：15687163
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:37.310
> 
> 标签：php, javascript, jquery, html

这是我的 URL：www.xyz.com/index?city=NY 我正在尝试根据 url 的城市值更新 <option> 标记的 'selected' 属性。这是我的部分 html：

```
 <script>
    function loadCity(val)
    {
      window.location.assign("/do/index?city="+val); //script that reload's page as per selected city value.

    }
   $(document).ready ( function(){
        var cityValue= <?=$_GET['city'] ?>;        
        var k = getElementById(cityValue);         
        k.option.setAttribute('selected', true);   
    });​                                            //this function not working
 </script>

<select id="city" onchange="loadCity(this.value)">
                    <option>Cities</option>
                        <?php $cities=get_cities(); ?>   //get cities from an array
                        <?php foreach($cities as $city): ?>

                        <option id="<?= $city?>" value="<?= $city?>"><?= $city?></option>  

                        <?php endforeach; ?>  
                    </select> 
```

尝试了一堆其他的东西，没有任何接缝可以工作。提前致谢。（非常感谢您的回复！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:29:59.920

首先你需要改变

```
var cityValue= <?=$_GET['city'] ?>; 
```

到

```
var cityValue= "<?=$_GET['city'] ?>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:31:14.827

```
$(document).ready(function(){
    var cityValue = "<?php echo $_GET['city']; ?>";
    $('#'+cityValue).prop('selected', true);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:36:53.447

为什么要在 JavaScript 中设置选定的值？您可以摆脱整个 document.ready 部分并在 PHP 中完成。

```
<select id="city" onchange="loadCity(this.value)">
    <option>Cities</option>
    <?php $cities=get_cities(); ?>   //get cities from an array
    <?php foreach($cities as $city): ?>
         <option id="<?= $city; ?>" value="<?= $city; ?>" <?= $city == $_GET['city'] ? 'selected' : '' ?> ><?= $city; ?></option>  
    <?php endforeach; ?>  
</select> 
```

或者在 jQuery 中你可以做

```
$("#city").val(cityValue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:45:02.813

您实际上可以在 php 文件中的 for 循环中添加条件，而不是使用 javascript：

```
<select id="city" onchange="loadCity(this.value)">
   <option>Cities</option>
   <?php $cities=get_cities(); ?>   //get cities from an array
   <?php foreach($cities as $city): ?>

     <option id="<?= $city?>" value="<?= $city?>" <?php if(isset($_GET['city']) && $_GET['city'] == $city) echo "selected";?>><?= $city?></option>  

   <?php endforeach; ?>  
</select> 
```

或通过 jQuery：

```
$('#city option[value="'+cityValue+'"]').prop("selected",true); 
```

# c# - 如何在数据库中为 NHibernate 设置身份

> ID：15687165
> 
> 赞同：1
> 
> 时间：2013-03-28T16:27:43.130
> 
> 标签：c#, .net, nhibernate

我们正在使用 NHibernate 2。

我创建了一个新表，如下所示：

```
Table: CategoryDependency
CategoryDependencyId    CategoryId    ParentCategoryId
--------------------    ----------    ----------------
      0                 0                NULL - root
      0                 1                0
      0                 44               1 
```

... 等等

注意 CategoryDe​​pendencyId 的零。我是 NH 的新手，所以我在 SQL Server 2008 表定义中将其设置为 PK 不为空，默认值为 0，否则如果我不默认，我将无法将数据插入此表因为它会抱怨你不能为 CategoryDe​​pendencyId 插入 null，很明显。

那么这是对的吗？然后 NHibernate 仍然会覆盖 CategoryDe​​pendencyId 并为您增加它：

我假设您会使用它来将其设置为递增：

当我运行我的代码时，我没有得到任何记录：

```
<?xml version="1.0"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace=".....our namespace is here" assembly="OurAssemblyNameIsHere">

    <class name="CategoryDependency" table="CategoryDependency">

          <id name="ID" type="int">
              <column name="CategoryDependencyId" />
              <generator class="increment" />

          </id>

        <property name="CategoryDependencyId" />
        <property name="CategoryId" />
        <property name="ParentCategoryId" />

    </class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:40:31.643

如果要生成身份，请使用`identity`.

`increment`意味着不同的东西，不应该使用它。

无论如何，`identity`也不是一个好的生成策略。如果可以，请选择`guid.comb`或`hilo`。

# ruby-on-rails - 使用在 Windows Azure VM 上运行的 Paperclip 的 Rails 应用程序

> ID：15687168
> 
> 赞同：0
> 
> 时间：2013-03-28T16:27:50.963
> 
> 标签：ruby-on-rails, azure, imagemagick, paperclip, azure-storage

我在 Windows Azure 虚拟机上运行了一个 Ruby (1.9.3) on Rails (3.2.9) 应用程序（使用 Ruby-Stack-1-9-3-6-Ubuntu-12-10 映像）。我可以使用 Capistrano 成功部署到 VM，但在文件上传和 Azure 存储方面遇到了困难。

我正在尝试实现使用waz-storage gem 的[回形针](https://github.com/gmontard/paperclip-azure-storage)[-azure-storage](https://github.com/Gabey/waz-storage) gem，但似乎无法克服此错误：

`undefined method 'new' for nil:NilClass`

每当我尝试创建/更新/销毁 Video 对象（使用简单的 Rails 表单）时，都会收到此错误。为了澄清，我在本地机器和虚拟机实例上都收到了这个错误。

我知道错误与回形针有关，因为只要我在我的视频模型中注释掉以下代码，一切正常：

`has_attached_file :pic, :storage => :azure1`

按照两个 gem 来源（上面的链接）的说明，我添加了以下文件：

*   `azure.yml`（包含我的 Azure 存储帐户名称和访问密钥）
*   `storage.rb`[（从paperclip-azure-storage](https://github.com/gmontard/paperclip-azure-storage) gem复制并添加到 /lib/paperclip）
*   `paperclip.rb`（也从 paperclip-azure-storage gem 复制并添加到初始化器列表中）

涵盖基础知识：

*   Gemfile：`gem 'paperclip'`刚刚更新到 3.4.1 版本
*   形式：`<%= form_for @video, html: { multipart: true } do |video_form| %>`尝试使用和不使用`url`选项。
*   在每个环境文件中：`Paperclip.options[:command_path] = "/opt/local/bin/convert"`
*   架构：经过验证以确保`pic`附件已正确添加到视频表中

我一直在不知疲倦地寻找答案，但似乎找不到问题的根源。是不是 ImageMagick 没有正确安装？`storage.rb`文件的放置和/或配置是否不正确`paperclip.rb`？还是完全是别的东西？

这是我的`paperclip.rb`初始化程序中的代码：

```
module Paperclip
  class Attachment
    def self.default_options
      @default_options ||= {
        :styles            => {},
        :processors        => [:thumbnail],
        :convert_options   => {},
        :default_url       => "/rails.png",
        :default_style     => :original,
        :whiny             => Paperclip.options[:whiny] || Paperclip.options[:whiny_thumbnails],
        :storage           => :azure1,
        :path              => ":modelname/:attachment/:id/:style/:filename",        
        :azure_credentials => "#{Rails.root}/config/azure.yml",
        :azure_container   => "system",
        :azure_host_alias  => "name_of_azure_storage.blob.core.windows.net",
        :url               => ':azure_domain_url',
      }
    end    
  end
end 
```

如果需要，我很乐意发布其他代码。

有没有人尝试/成功使用 Windows Azure 实现上述 gem？我会喜欢任何指导/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:48:24.737

问题似乎是当您使用格式时：

```
module Paperclip
  class attachment
    ...
  end
end 
```

不会创建 Paperclip 的内部默认选项。然后它会尝试实例化通常在这些内部默认选项中定义的 URL 生成器，这会导致您看到的错误。

为了解决这个问题，我将初始化程序格式化如下：

```
Paperclip::Attachment.default_options[:processors] = [:thumbnail]
Paperclip::Attachment.default_options[:convert_options] = {}
Paperclip::Attachment.default_options[:styles] = {}
Paperclip::Attachment.default_options[:default_url] = "/rails.png"
Paperclip::Attachment.default_options[:default_style] = :original
Paperclip::Attachment.default_options[:whiny] = Paperclip.options[:whiny] || Paperclip.options[:whiny_thumbnails]
Paperclip::Attachment.default_options[:storage] = :azure1
Paperclip::Attachment.default_options[:path] = ":modelname/:attachment/:id/:style/:filename"
Paperclip::Attachment.default_options[:azure_credentials] = "#{Rails.root}/config/azure.yml"
Paperclip::Attachment.default_options[:azure_container] = "system"
Paperclip::Attachment.default_options[:azure_host_alias] = "storageaccount.blob.core.windows.net"
Paperclip::Attachment.default_options[:url] = ':azure_domain_url' 
```

这允许默认选项与我的初始化程序中的选项成功创建/合并，并让我克服了那个错误。

由于我使用的是最新版本的 rails，接下来我遇到了 RAILS_ROOT 和 RAILS_ENV 错误，因此我调整了上述初始化程序位以使用 Rails.root 并将回形针-azure-storage 更改为使用 Rails.env 而不是 RAILS_ENV。

希望这可以帮助。

# python - 使用多个参数启动 python pdb？

> ID：15687170
> 
> 赞同：3
> 
> 时间：2013-03-28T16:27:53.590
> 
> 标签：python, vim, pdb

我想知道是否有办法用多个参数启动 pdb。

目前我知道我可以做到这一点：

```
python -m pdb script.py 
```

然后手动设置断点，使用：

```
(Pdb) break
(Pdb) break 2
Breakpoint 1 at /home/ozn/test2.py:2
(Pdb) break 3 
Breakpoint 2 at /home/ozn/test2.py:3
(Pdb) break 
```

我还可以插入：

```
pdb.set_trace() (or with ipdb.set_trace() 
```

在不同的行中（这可以通过 vim 中的 python-mode 之类的东西来缓解）。但是，如果我采用这种方法，例如

```
# note: break points from python-mode in vim
print "hello "
a = 1
import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
a =+1
import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
print a   
i = 9 
```

`break`在 inside 时，我无法使用命令列出所有断点`pdb`。这是示例：我运行文件，它产生输出并切换到`pdb`会话，但命令`break`为空：

```
[2] ozn@deboz:~ $ python 1.py
hello 
> /home/ozn/1.py(4)<module>()
      3 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
----> 4 a =+1
      5 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT

ipdb> list
      1 print "hello "
      2 a = 1
      3 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
----> 4 a =+1
      5 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
      6 print a
      7 
      8 i = 9

ipdb> break
ipdb> 
```

*理想情况下*，我想像这样启动 pdb：

```
python -m pdb script.py b 2 b 3 
```

当在里面时，提示应该这样做：

```
(Pdb) break
(Pdb) break 2
Breakpoint 1 at /home/ozn/test2.py:2
(Pdb) break 3 
Breakpoint 2 at /home/ozn/test2.py:3
(Pdb) break 
```

或者，我很乐意在`vim`运行带有一些断点的 python 模式时从内部运行我的脚本。现在，它只是挂起。`<lead>r`意思是，如果我在代码中有断点时按下，它会挂起，或者在最好的情况下会产生一些像这样的垃圾：

```
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
Code running.> /home/ozn/1.py(4)<module>()
                                                3 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT
                 ----> 4 a =+1
                                    5 import ipdb; ipdb.set_trace()  # XXX BREAKPOINT

     ipdb> 
```

将断点设置为时`import pdb; pdb.set_trace()`，vim 完全挂起并产生以下消息：

```
Code running. 
```

# 问题：

1.  可以更好地配置我的 vim python-mode 以使其与断点一起运行吗？
2.  您知道运行“调试脚本”或使用多个参数启动 pdb 的方法吗？奖励问题：
3.  插件的任何替代品`vdebug`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-30T08:17:37.243

**问题1：**

是的。在使用 python-mode 时，我也遇到了同样的问题。Vim 完全挂起，只显示 ' `Code running.`' 我发现问题出现在 ' `~/.vim/bundle/python-mode/autoload/pymode/run.vim`'。`<leader>r`使该脚本运行，并且脚本卡在“ `py execfile(vim.eval('expand("%:p")'), context)`”行。我没有努力解决脚本中的这个错误。相反，我使用一个简单的脚本来让一切运行。

我制作了一个'python.vim'文件，粘贴以下代码并将文件放在' `~/.vim/plugin/after/ftdetect/python.vim`'（如果你没有这个文件夹，创建一个）。

```
" Python
if executable("python")
  autocmd BufRead,BufNewFile *.py map <F5> :w<cr>:!python %<CR>
else
  autocmd BufRead,BufNewFile *.py map <F5> :echo "you need to install Python first!"<CR>
endif 
```

我们需要的是在vim中运行python代码和pdb，对吧？现在可以了！但是，当你`<F5>`在 vim 中按下一个 python 文件时，它会跳出 vim 在终端中运行 python，当 python 程序完成时，它会自动跳转回 vim。喜欢就好了。

不过，我找到**了更好的方法。**只需安装一个名为“ **conque** ”的vim插件，[https://code.google.com/p/conque/](https://code.google.com/p/conque/)，然后安装“ **iPython** ”。然后，您应该如下更改“python.vim”代码。

```
" Python
if executable("python")
  autocmd BufRead,BufNewFile *.py map <F5> :execute 'ConqueTermSplit ipython '.expand('%:p')<CR>
else
  autocmd BufRead,BufNewFile *.py map <F5> :echo "you need to install Python first!"<CR>
endif 
```

现在，当您按下 时，它会在 vim 内拆分一个窗口为您运行 python 代码`<F5>`。

![在此处输入图像描述](../Images/73a9ccfb905824101e0037b40e2d14c8.png)

**问题 2 和 3：**

我不知道运行 pdb 的多参数方式。也许您可以自定义上面的代码来实现这一点。但是我可以向您推荐一个很酷的 vim 中的图形化 python 调试工具，称为“vim-debug”。

[您可以从https://github.com/jaredly/vim-debug](https://github.com/jaredly/vim-debug)获取“vim-debug”

希望这些帮助！:)

# jsp - JSP 页面在 Eclipse 预览中显示正常，但在服务器上运行时显示空白页面

> ID：15687174
> 
> 赞同：1
> 
> 时间：2013-03-28T16:28:12.280
> 
> 标签：jsp, maven, extjs

我有一个`login.jsp`包含 ExtJS 代码的页面。

![Eclipse 中的 login.jsp 源](../Images/5d347f7c3baec57b64ac7953084b3585.png)

当我在 Eclipse 中单击“*预览*”选项卡时，它可以正常工作并且我可以看到页面的输出。

![Eclipse 中的 login.jsp 预览](../Images/c1f33cd6ef6c2d58dd60276a7c75f451.png)

但是，当我在服务器上运行项目时，我什么也看不到，只有一个空白页。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:58:03.647

我不确定这个问题现在是否有效，但仍然......我会尽力回答

这可能是因为您所有的变量都在 Javascript 中。Extjs 将在客户端运行

Javascript 在客户端执行，因此 Eclipse 页面中不显示任何变量值。

如果您想**检查 javascript 变量，请使用 firebug**。

如果您的代码是 JSP 代码（在 scriptlet <% %> 内），那么您应该能够看到它。

# grails - 集成测试 Grails REST 控制器

> ID：15687177
> 
> 赞同：2
> 
> 时间：2013-03-28T16:28:23.203
> 
> 标签：grails, groovy

我正在尝试为以 JSON 格式处理 REST 请求的控制器编写一些集成测试。我的控制器定义（）创建是这样的：

```
class FooController {
    ...
    def create() {
        withFormat {
            html {
                [fooInstance: new Foo(params)]
            }
            json {
                [fooInstance: new Foo(params.JSON)]
            }
        }
    }
    ...
} 
```

然后我有一个如下所示的集成测试：

```
@TestFor(FooController)
class FooControllerTests extends GroovyTestCase {
    void testCreate() {
        def controller = new FooController()

        controller.request.contentType = "text/json"

        // this line doesn't seem to actually do anything
        controller.request.format = 'json'

        // as of 2.x this seems to be necessary to get withFormat to respond properly
        controller.response.format = 'json'

        controller.request.content = '{"class" : "Foo", "value" : "12345"}'.getBytes()

        def result = controller.create()

        assert result

        def fooIn = result.fooInstance

        assert fooIn
        assertEquals("12345", fooIn.value)
    }
} 
```

但 fooIn 始终为空。如果我调试测试，我可以看到调用 FooController.create() 时，params 也是空的。诚然，我不太了解集成测试应该如何在内部运行，但我希望看到代表我的 Foo 实例的数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:20:52.887

您`withFormat`用于呈现内容，因此尽管它是控制器代码中的映射，但响应实际上是一个字符串。

`AbstractGrailsMockHttpServletResponse`提供您需要的东西（以及其他有用的方法），并且 controller.response 是测试期间的一个实例：

[http://grails.org/doc/2.1.0/api/org/codehaus/groovy/grails/plugins/testing/AbstractGrailsMockHttpServletResponse.html#getJson()](http://grails.org/doc/2.1.0/api/org/codehaus/groovy/grails/plugins/testing/AbstractGrailsMockHttpServletResponse.html#getJson())

所以你想要的是这样的：

```
controller.create()

def result = controller.response.json 
```

编辑：

正如你所问的，你应该像这样传递你的参数：

```
controller.params.value = "12345"
controller.params.'class' = "Foo" 
```

# c# - ASP.Net MVC 4 SimpleMembership“重新发送确认电子邮件”

> ID：15687178
> 
> 赞同：0
> 
> 时间：2013-03-28T16:28:26.557
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, asp.net-mvc-4

我为“自动生成的”webpages_Membership 表创建了一个模型，以便我可以读取 ConfirmationToken，以防用户丢失确认电子邮件以重新发送它。这是我在 AccountModels.cs 中的代码：

```
[Table("webpages_Membership")]
public class webpages_Membership
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public Nullable<DateTime> CreateDate { get; set; }
    public string ConfirmationToken { get; set; }
    public Nullable<bool> IsConfirmed { get; set; }
    public Nullable<DateTime> LastPasswordFailureDate { get; set; }
    public int PasswordFailuresSinceLastSuccess { get; set; }
    public string Password { get; set; }
    public Nullable<DateTime> PasswordChangedDate { get; set; }
    public string PasswordSalt { get; set; }
    public string PasswordVerificationToken { get; set; }
    public Nullable<DateTime> PasswordVerificationTokenExpirationDate { get; set; }
}

public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<webpages_Membership> webpages_Membership { get; set; }
} 
```

在创建此模型之前，我可以使用以下代码行在 App_Start 上插入单个用户：

```
if (Membership.Provider.GetUser("admin", false) == null)
        {
            ((SimpleMembershipProvider)Membership.Provider).CreateUserAndAccount("admin", "bidchuck");
        } 
```

然而，在实现了这个模型之后，该行现在抛出了一个异常：

```
[SqlException (0x80131904): Cannot insert explicit value for identity column in table 'webpages_Membership' when IDENTITY_INSERT is set to OFF.] 
```

因此，我怀疑我的模型代码从该表中读取数据的某些内容与 WebSecurity 自动生成表的方式相冲突，这就是异常的原因。谁能解释如何更改我的模型代码，以便 WebSecurity 可以以自己的方式自动创建表？

或者，为我建议其他方式来实施“重新发送确认电子邮件”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:01:29.353

问题在于：

```
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)] 
```

您明确告诉 EF 这是一个标识列（即，它应该为您生成一个 id）。但是，UserId 来自 ASP.NET 成员，因此您的表实际上不应生成 id *。*

注意：删除该行后，您必须进行迁移。

**更新**

1.  创建一个 POCO 来为表建模：

    ```
    [Table("webpages_Membership")]
    public class Membership
    {
        public Membership()
        {
            Roles = new List<Role>();
            OAuthMemberships = new List<OAuthMembership>();
        }

        [Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
        public int UserId { get; set; }
        public DateTime? CreateDate { get; set; }
        [StringLength(128)]
        public string ConfirmationToken { get; set; }
        public bool? IsConfirmed { get; set; }
        public DateTime? LastPasswordFailureDate { get; set; }
        public int PasswordFailuresSinceLastSuccess { get; set; }
        [Required, StringLength(128)]
        public string Password { get; set; }
        public DateTime? PasswordChangedDate { get; set; }
        [Required, StringLength(128)]
        public string PasswordSalt { get; set; }
        [StringLength(128)]
        public string PasswordVerificationToken { get; set; }
        public DateTime? PasswordVerificationTokenExpirationDate { get; set; }

        public ICollection<Role> Roles { get; set; }

        [ForeignKey("UserId")]
        public ICollection<OAuthMembership> OAuthMemberships { get; set; }
    } 
    ```

    基本上只是对表中的字段进行建模。这应该涵盖所有内容，但情况可能已经改变或可能添加了不同的约束。告诉 EF 要在`[Table("webpages_Membership")]`哪个表中查找，因为名称或类不完全匹配。

2.  将您的 POCO 连接到 DbContext 子类。您将希望使用与用于实际映射实体的上下文不同的上下文（用于迁移、更新数据库等的上下文）。数据库初始化策略是在 DbContext 级别设置的，因此，如果您将其添加到用于其他所有内容的同一策略中，它将尝试迁移它，最终您会遇到来自 EF 的严重错误。

    ```
    public class SimpleMembershipContext : DbContext
    {
        public SimpleMembershipContext()
            : base("name=YourConnectStringName")
        {
            // this tells EF to not worry about migrating or modifying the database
            Database.SetInitializer<SimpleMembershipContext>(null);
        }

        public DbSet<Membership> Memberships { get; set; }
    } 
    ```

    将“YourConnectionStringName”替换为项目数据库（在 web.config 中）的连接字符串的名称。如果您也将会员资料存储在其他地方，这也可能是一个完全不同的数据库。

现在，有了它，您可以像任何其他实体一样在代码中使用它：

```
var membershipDb = new SimpleMembershipContext();
var someMember = membershipDb.Memberships.Find(userId); 
```

# c - 出于实际目的，SSL_library_init 是什么意思不可重入？

> ID：15687180
> 
> 赞同：2
> 
> 时间：2013-03-28T16:28:27.353
> 
> 标签：c, thread-safety, openssl, reentrancy

我正在使用 openssl 库打开与某个服务器的 TLS 连接。阅读库文档（是的，有些人仍然阅读文档和手册页）我偶然发现了“SSL_libary_init() 不是[可重入](https://stackoverflow.com/questions/2799023/what-exactly-is-a-reentrant-function)的”这句话。

我一般理解什么是不可重入函数：即某些函数以这样的方式保持内部状态，即同时调用它两次或在执行时中断它可能会导致混乱（该函数没有按照调用者的期望执行） .

但在 SSL_library_init() 的特定情况下，我想知道它的实际含义。

*   这是否意味着如果在调用 SSL_library_init() 时发生某些中断，它将无法正确初始化 SSL 库？因此，我是否应该在调用它之前禁用所有可访问的中断并重新启用所需的中断？

*   这是否意味着它是线程不安全的，并且我应该确保两个线程不能同时调用它？（看起来很可能，即使线程安全并不完全意味着与可重入相同）。

*   这是否意味着我不应该在程序生命周期内调用它两次，或者在 SSL 连接打开时调用它会造成严重破坏？

由于我正在使用一端作为客户端，另一端作为服务器的代理，因此两端都可能使用 TLS 服务（但我也可能只是一端，或者没有）。我应该将 SSL 库作为系统范围的单例来管理吗？如果是这种情况，那么管理起来很容易，但正如我所理解的那样，这并不完全是一个可重入问题。

我不知道应该只调用一次的函数的简称...

对于 SSL_CTX_new()，我也有类似的问题。文档指出每个程序生命周期只能调用一次。这很烦人，因为它似乎限制服务器和客户端（或在同一进程中运行的多个独立服务器或客户端实例）使用相同的 SSL_METHOD 并且感觉不对，但我仍然希望在这种情况下它只是一些文档不准确.

有没有人有足够的 openSSL 经验来解释我应该或不应该对 OpenSSL 初始化代码做什么以保持安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T18:13:47.477

我可以根据我所看到的给你一个提示。我有一个 CentOS 7 / Django 1.9.3 / Apache 2.4 / mod_ssl / Python 3.4 Web 服务器，它接收来自用户的 https: 连接。在处理请求时，服务器需要向后端查询满足请求所需的信息。后端查询在独立运行时工作正常，但会生成：

```
OSError(0, 'Error')
Line 810, /lib64/python3.4/ssl.py

803  def do_handshake(self, block=False):
804      """Perform a TLS/SSL handshake."""
805      self._check_connected()
806      timeout = self.gettimeout()
807      try:
808          if timeout == 0.0 and block:
809              self.settimeout(None)
810          self._sslobj.do_handshake()          # <<<------- 
```

在 Apache WSGI 上下文中运行时。

如果实际上 mod_ssl 导致了我的错误，这意味着该库是线程安全的（因为 Apache 当然可以同时服务多个 Web 请求）但不可重入（因为 SSL 不能使用两次——例如用于前端和后端——端连接——在一个线程中）。

当然，两层 Web 服务器是一种成熟的设计模式，因此必须有一种解决方法。感谢您发布有关不可重入的内容-这是我发现的第一个线索，这可能是我的问题的原因。

作为参考，我的代码调用了一个 RESTful 服务，该服务采用从 SSL_CLIENT_CERT 中提取的用户专有名称，并以 JSON 格式返回用户属性：

```
import requests, urllib

URL = 'https://example.com/rest/user_info/'

def get_user_info(dn)
    query = URL + urllib.parse.quote(dn)
    return requests.get(query, cert=('server.crt', 'server.key'), verify='ca_bundle.crt').json() 
```

该代码在从 Web 服务器上的命令行运行时（在 WSGI 目录中以用户 apache 身份运行）完美运行，但在被 Apache 本身调用时会崩溃。

# joomla - 在忘记密码时更改电子邮件

> ID：15687183
> 
> 赞同：0
> 
> 时间：2013-03-28T16:28:35.407
> 
> 标签：joomla, joomla3.0

默认情况下，joomla 3.0 在电子邮件中发送激活码，是否可以通过链接而不是复制和粘贴此代码来进行配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:38:46.623

Nibra 是正确的，但要避免创建可能格式错误的语言文件。我强烈建议使用自 1.6 版本以来可用的内置语言覆盖。

选择`Extensions>>Language Manager>>Overrides`然后单击**新建**按钮。

在该屏幕中，您可以搜索要更改的文本“感谢您注册”或语言标记，例如：

*   `COM_USERS_EMAIL_REGISTERED_WITH_ACTIVATION_BODY`
*   `COM_USERS_EMAIL_REGISTERED_WITH_ACTIVATION_BODY_NOPW`

语言覆盖机制最好的一点是，当 3.1 或任何更高版本发布时，您可以安全地升级，而不必担心您所做的更改会被任何更新覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:19:07.347

该链接应该可以被电子邮件客户端点击。如果不是，则链接可能缺少前导“http://”。

您可以编辑语言文件 language/en-GB/en-GB.com_users.ini

```
COM_USERS_EMAIL_REGISTERED_WITH_ACTIVATION_BODY="Hello %s,\n\nThank you for registering at %s. Your account is created and must be activated before you can use it.\nTo activate the account click on the following link or copy-paste it in your browser:\nhttp://%s \n\nAfter activation you may login to %s using the following username and password:\n\nUsername: %s\nPassword: %s"
COM_USERS_EMAIL_REGISTERED_WITH_ACTIVATION_BODY_NOPW="Hello %s,\n\nThank you for registering at %s. Your account is created and must be activated before you can use it.\nTo activate the account click on the following link or copy-paste it in your browser:\nhttp://%s \n\nAfter activation you may login to %s using the following username and the password you entered during registration:\n\nUsername: %s" 
```

或者 - 更好 - 将这些行放入覆盖文件（语言/覆盖/en-GB.override.ini）。

# magento - 重复的magento扩展

> ID：15687185
> 
> 赞同：-4
> 
> 时间：2013-03-28T16:28:41.090
> 
> 标签：magento, payment

如何复制 magento 扩展并安装它们？我需要复制或重命名才能将它们用于我的结帐付款问题。付款过滤器扩展允许使用不同产品的付款。在我的网站上有很多卖家。所以我需要为我的支付网关复制 bKash [http://www.magentocommerce.com/magento-connect/catalog/product/view/id/16591/扩展。](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/16591/)因为它只取决于外部手机号码。支付。

> 很好地告诉我如何复制扩展并安装它们。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:47:22.150

*   使用此下载扩展：http: [//freegento.com/ddl-magento-extension.php](http://freegento.com/ddl-magento-extension.php)
*   提取内容
*   将所有文件中的内容从“Bkash”替换为“Bkash2”，即：

```
find . -type f | xargs sed -i "s/Bkash/Bkash2/g" 
```

*   将文件中的所有 bkash 替换为 bkash2

```
find . -type f | xargs sed -i "s/bkash/bkash2/g" 
```

*   将所有包含 Bkash 的文件和目录重命名为 Bkash2

```
mv ./app/design/frontend/base/default/template/Bkash ./app/design/frontend/base/default/template/Bkash2

mv ./app/code/local/Mediasoftbd/Bkash ./app/code/local/Mediasoftbd/Bkash2

mv ./app/etc/modules/Mediasoftbd_Bkash.xml ./app/etc/modules/Mediasoftbd_Bkash2.xml 
```

*   将所有包含 bkash 的文件和目录重命名为 bkash2

```
mv ./media/bkash ./media/bkash2

mv ./app/design/frontend/base/default/template/Bkash2/bkash_instruction.phtml ./app/design/frontend/base/default/template/Bkash2/bkash2_instruction.phtml

mv ./media/bkash2/bkashlogo.jpg ./media/bkash2/bkash2logo.jpg

mv ./media/bkash2/bkash-send-money.jpg ./media/bkash2/bkash2-send-money.jpg 
```

*   将所有文件（package.xml 除外）复制/粘贴到您的 magento 安装目录

类似的东西应该可以工作，之后新模块应该出现在系统>配置>高级下，并且新配置应该在系统>配置>销售>付款方式下可用

[https://docs.google.com/file/d/0BxJYGRqDwGT0cDBCX09QSU8xOFU/edit](https://docs.google.com/file/d/0BxJYGRqDwGT0cDBCX09QSU8xOFU/edit)

# jquery - jquery mobile的listview li item onclick未触发

> ID：15687187
> 
> 赞同：0
> 
> 时间：2013-03-28T16:28:42.247
> 
> 标签：jquery, ajax, html, jquery-mobile

我在 jquery mobile 的列表视图中有问题。

listview 动态构建。onclick li 项目事件未触发且未发生错误。

jQuery函数

```
function GetDependents() {
    var userid= checkCookie1(); 

    "use strict";
    var wcfServiceUrl = "http://xcxcxcx/PHRService/Service1.svc/XMLService/";
    $.ajax({
        url: wcfServiceUrl + "Dependents",
        data: "PatientID=" + userid + "",
        type: "GET",
        processData: false,
        contentType: "application/json",
        timeout: 10000,
        dataType: "json",
        cache:false,
        beforeSend: function (xhr) {
            $.mobile.showPageLoadingMsg();
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

        },
        complete: function () {

            $.mobile.hidePageLoadingMsg();
        },

        success: function (data) {
            var result = data.GetDependentsResult;
            var items = [];

            $.each(result, function (i, item) {

                items.push('<li><a onclick=redirect(\'AddDependents.htm?id=' + item.ItemID + '\');\>' + item.ItemName + '</a></li>');
            });
            $('#main_list').append(items.join(''));
            $('#main_list').listview('refresh');
        },
        error: function (data) {

        }
    });

} 
```

和 HTML 是

```
<div data-role="content" data-theme="c">
            <ul data-role="listview" id="main_list">
            </ul>
            <br />
            <a onclick="redirect('AddDependents.htm');" data-role="button" data-icon="plus">Add new...</a>
        </div> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:38:09.200

调用事件比使用内联 javascript 更好。

试试这个

**HTML**

```
items.push('<li><a id="'+ item.ItemID + '">' + item.ItemName + '</a></li>'); 
```

**查询**

```
$('#main_list').on('click','a',function(e){
    e.preventDefault();
    var Id=$(this).attr('id');
    redirect('AddDependents.htm?id=' +Id );
}); 
```

因为您要添加元素，所以`on`应该使用动态委托事件..

**注意：**`<a>`我可以看到标签 的额外关闭

```
<a onclick=redirect(\'AddDependents.htm?id=' + item.ItemID + '\');\>'
                                                             //---^^---here 
```

你有一个额外`\`的结束标签`<a/>`

# knockout.js - 下巴不读书 内

> ID：15687195
> 
> 赞同：4
> 
> 时间：2013-03-28T16:29:02.497
> 
> 标签：knockout.js, accessibility, screen-readers, wai-aria

我正在一个更大的站点内对一个动态构建的测验进行辅助功能工作（我们正在使用 Knockout 绑定来填充问题。）我目前正在处理我们的单选按钮问题。我们最初有一些 Knockout 将“aria-labeledby”卡在适当的位置，但我们认为它会更快的加载时间来正确处理字段集和图例。

只有在我们的框架中，在 IE8 中使用 JAWS 12，关注单选元素只会读取它的标签，而不是我期望的图例。

我什至采用了这个简单的示例代码，它可以在我们的网站上找到。当我将它卡在我们的框架中并且它停止读取图例时。

```
<fieldset id="eyeColor">
<legend>Eye Color</legend>
<ul>
<li><input type="radio" name="eye_color" id="blueEyes"/> <label for="blueEyes">Blue</label> </li>
<li><input type="radio" name="eye_color" id="brownEyes"/> <label for="brownEyes">Brown</label></li>
<li><input type="radio" name="eye_color" id="greenEyes"/> <label for="greenEyes">Green</label></li>
<li><input type="radio" name="eye_color" id="otherEyes"/> <label for="otherEyes">Other</label></li>
</ul>
</fieldset> 
```

我知道我应该从我们的网站发布整个 HTML（它是由许多模板构建的），但它是巨大的。

这是我关心的一些早期的位：

```
<div class="loading" data-bind="'visible': !Items.loaded(), 'attr': { 'aria-hidden': Items.loaded() }" style="display: none;" aria-hidden="true">
    <span class="spinner"></span>
    <span data-bind="'attr': { 'aria-hidden': Items.loaded() }" aria-hidden="true">Just one moment while we access this information...</span>
</div>
<div class="loading" data-bind="'visible': !Items.loaded(), 'attr': { 'aria-hidden': Items.loaded() }" style="display: none;" aria-hidden="true">
    <span class="spinner"></span>
    <span data-bind="'attr': { 'aria-hidden': Items.loaded() }" aria-hidden="true">Just one moment while we access this information...</span>
</div>

    <div data-bind="'css': ItemStateIdentifiers" class="Container Slide TuftsUniversityWLQ-TroubleStarting" tabindex="-1" aria-label="Well-being Module, Work Performance Subject" style="outline: none;">
<div class="loading" data-bind="'visible': !Items.loaded(), 'attr': { 'aria-hidden': Items.loaded() }" style="display: none;" aria-hidden="true">
    <span class="spinner"></span>
    <span data-bind="'attr': { 'aria-hidden': Items.loaded() }" aria-hidden="true">Just one moment while we access this information...</span>
</div> 
```

```
<div class="loading" data-bind="'visible': !Items.loaded(), 'attr': { 'aria-hidden': Items.loaded() }" style="display: none;" aria-hidden="true">
    <span class="spinner"></span>
        <span data-bind="'attr': { 'aria-hidden': Items.loaded() }" aria-hidden="true">Just one moment while we access this information...</span>
</div> 
```

这是实际的无线电问题：

```
 <h3 class="title" data-bind="'html': Title, 'visible': Title">In the past 2 weeks, how much of the time did your physical health or emotional problems make it     <span>difficult</span> for you to...</h3>
    <p class="userTip" data-bind="'foreach': Text, 'visible': Text.length &gt; 0" style="display: none;"></p>
    <div class="QuestionGroupItemsPlaceholder" data-bind="'template': {'name':TemplateNameLookup,'foreach': NonSkippedItems}">
    <div data-bind="'css': ItemStateIdentifiers" class="Question LineConnectedRadio WLQ-SlowStartToDay valid">
<label class="questionText" data-bind="'attr': {'for': ClientName}, 'foreach': Text" for="WLQ-SlowStartToDay">
        <span data-bind="'text': text, 'css': css" class="text">Get going easily at the beginning of the workday</span>
</label>
<div class="line opts6" data-bind="'css': 'opts' + choices.length"></div>
    <fieldset role="radiogroup">
        <legend class="accessibility" data-bind="'text':Text[0].text, 'attr':{ 'id': 'lbl-' + ClientName() }" id="lbl-WLQ-SlowStartToDay">Get going easily at the beginning of the workday</legend>
        <ul data-bind="foreach: choices, css: 'opts' + choices.length" class="opts6">
            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="4" id="WLQ-SlowStartToDay-idx0">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx0" id="lbl-WLQ-SlowStartToDay-idx0" class="">Difficult None of the time</label>
            </li>

            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="3" id="WLQ-SlowStartToDay-idx1">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx1" id="lbl-WLQ-SlowStartToDay-idx1" class="checked">Difficult a Slight Bit of the time</label>
            </li>

            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="2" id="WLQ-SlowStartToDay-idx2">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx2" id="lbl-WLQ-SlowStartToDay-idx2" class="">Difficult Some of the time</label>
            </li>

            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="1" id="WLQ-SlowStartToDay-idx3">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx3" id="lbl-WLQ-SlowStartToDay-idx3" class="">Difficult Most of the time</label>
            </li>

            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="0" id="WLQ-SlowStartToDay-idx4">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx4" id="lbl-WLQ-SlowStartToDay-idx4" class="">Difficult All of the time</label>
            </li>

            <li>
                <input type="radio" data-bind="'value': Value, 'checked': $parent.Answer, 'attr': { 'name': $parent.ClientName, 'id': $parent.ClientName() + '-idx' + $index()}, 'trackFocus': true" name="WLQ-SlowStartToDay" value="5" id="WLQ-SlowStartToDay-idx5">
                <label data-bind="'text': Text, 'attr': { 'for': $parent.ClientName() + '-idx' + $index(), 'id': 'lbl-' + $parent.ClientName() + '-idx' + $index() }, 'css': { 'checked': Value === $parent.Answer() }" for="WLQ-SlowStartToDay-idx5" id="lbl-WLQ-SlowStartToDay-idx5" class="">Does not apply to my job</label>
            </li>
        </ul>
    </fieldset> 
```

人们有什么想法我可能会继承导致这种情况吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-06T02:01:00.813

尝试在头部的字符集元标记之后添加 <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 并告诉我是否可以清除它。

# javascript - Angular - 没有可排序的方法

> ID：15687197
> 
> 赞同：4
> 
> 时间：2013-03-28T16:29:03.963
> 
> 标签：javascript, html, angularjs, angular-ui

我包括所有必要**的脚本（错误是脚本的顺序+缺少 jQuery）**：

```
<script src="scripts/vendor/angular/angular.js"></script>
<script src="components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script src="components/angular-ui/build/angular-ui.js"></script> 
```

并使用此代码段：

```
<div ng:controller="controller">
    <ul ui:sortable ng:model="list">
        <li ng:repeat="item in list" class="item">{{item}}</li>
    </ul>
    <hr />
    <div ng:repeat="item in list">{{item}}</div>
</div> 
```

但我不断收到此错误：

```
TypeError: Object [object Object] has no method 'sortable' 
```

有没有人经历过同样的事情并知道出路？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T16:34:50.343

您缺少[jquery-ui](http://jqueryui.com/)库。angular-ui 利用 jquery-ui 库来提供可排序的功能。

angular-ui 库依赖于 jquery-ui 库，所以下载 jquery-ui.css 和 jquery-ui.js 并将其添加到项目中。

jquery-ui 还需要[jquery library](http://jquery.com/)，所以如果你没有包含它，也下载一个包含它。

# java - 如何从另一个窗口将项目添加到 JList

> ID：15687201
> 
> 赞同：0
> 
> 时间：2013-03-28T16:29:19.680
> 
> 标签：java, swing, jbutton, actionlistener, jlist

我有 2 个窗口。一个有一个空的 JList，另一个有一个按钮。所以我想在按下按钮时将值添加到列表中。这是我的代码，但未完成：

**窗口 1**

```
final DefaultListModel<String> favouriteNames = new DefaultListModel<String>();
JList namesList = new JList(favouriteNames); 
```

**窗口 2**

```
public class button extends JFrame {

private JList namesList;
private DefaultListModel<String> favouriteNames;

this.namesList = namesList;

 JButton addThis = new JButton("Add");
 addThis.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e) {
          favouriteNames.addElement("Jack");
   }
 });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:39:40.940

将 DefaultListModel 的实例传递给构造函数中的 Window 2。

编辑添加：这是在构造函数中传递实例的方式。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class ButtonFrame implements Runnable {

    private JFrame              frame;

    private DefaultListModel    favouriteNames;

    public ButtonFrame(final DefaultListModel favouriteNames) {
        this.favouriteNames = favouriteNames;
    }

    @Override
    public void run() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton addThis = new JButton("Add");
        addThis.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                favouriteNames.addElement("Jack");
            }
        });

        frame.add(addThis);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new ButtonFrame(new DefaultListModel()));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:30:41.327

我制作了一个更简单的程序版本，但仍然有一个问题，我相信 ActionPerformed 发送了数据，但 JList 无法识别它，或者基本上不希望收到它。所以这就是我到目前为止所做的。所以这是我的更多研究和尝试，也许它提供了有关问题的更多细节。

主窗口：

```
public class main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new ClassA();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

    }

} 
```

A类：

```
public class ClassA extends JFrame {

        DefaultListModel<String> myList;
        JList list;

        public ClassA() {

        setSize(300,200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(2,1));

        myList = new DefaultListModel<String>();
        list = new JList(myList);

        //ClassB sendsText = new ClassB(myList, list);

        JButton find = new JButton("Find");
        find.addActionListener(new ActionListener(){

            public void actionPerformed(ActionEvent e) {
                new ClassB().setVisible(true);
            }

        });

        add(panel);
        panel.add(find);
        panel.add(list);
    }

} 
```

B类：

```
public class ClassB extends JFrame {

    DefaultListModel<String> myList;
    JList list;
    public ClassB(DefaultListModel<String> myList, JList list){
        this.myList = myList;
        this.list = list;
    }

    public ClassB() {
        setSize(300,200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(2,1));

        JButton addMe = new JButton("Add Me");
        addMe.addActionListener(new ActionListener(){

            public void actionPerformed(ActionEvent e) {
                myList.addElement("Danial");

            }

        });

        add(panel);
        panel.add(addMe);
    }

} 
```

# json - 如何用单个元素打开 JsonObject 并使用 Jackson 库保留 JsonObject 的名称？

> ID：15687205
> 
> 赞同：1
> 
> 时间：2013-03-28T16:29:30.053
> 
> 标签：json, playframework, jackson

在我的应用程序中，我有 Serie，每个都有 2 个字段来表示纹理和 .obj 文件。

```
@Entity
public class Serie extends Model {
    public File obj;
    public File texture;
} 
```

还有我的文件类：

```
@Entity
public class File extends Model{
     public String path;
} 
```

我想生成一个 Json 文件来描述我的对象。如您所见，File 类只有一个字段。出于这个原因，我想生成一个没有 JsonArray 的 Json 来描述我的文件字段。

使用 Jackson 库，它会生成一个这样的 json：

```
{"obj":{"path":"obj/600s"}, "texture":{"path":"text/600s"}} 
```

我想这样生成：

```
{"obj":"obj/600s", "texture":"text/600s"} 
```

一个部分有效的选项是使用杰克逊的注释@JsonUnwrapped。

```
@Entity
public class Serie extends Model {

    @JsonUnwrapped
    public File obj;

    public File texture;
} 
```

杰克逊使用它生成一个像这样的json：

```
 {"path":"obj/600s", "texture":{"path":"text/600s"}} 
```

所以这对我不起作用，因为我不能用于 obj、纹理字段，并且我想在 json 上保留字段的名称。

我知道这是一个具体的问题。无论如何，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:23:58.190

您可以编写自定义 getter 来实现您的目标：

```
public class Serie extends Model {
    public File obj;
    public File texture;

    @JsonProperty("obj")
    public String getObjPath() {
        return obj.path;
    }

    @JsonProperty("texture")
    public String getTexturePath() {
        return texture.path;
    }
} 
```

/ 我假设自动检测已关闭 /

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:01:47.670

您想要使用的是@JsonValue，但不能在字段上设置注释，只能在方法（getter）上设置：

```
@Entity
public static class File {
    public String path;

    @JsonValue
    public String getPath() {
        return path;
    } 
```

}

如果序列化是您所需要的，那么这就是您需要做的。如果您还需要反序列化，则需要一个单参数字符串构造函数或静态工厂方法，以便 json 能够反序列化您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T10:35:37.380

另一种解决方案：

```
@Entity
@JsonSerialize(using=com.fasterxml.jackson.databind.ser.std.ToStringSerializer)
public class File extends Model{
    public String path;

    // Could be generated by lombok:
    File(String path) {
        this.path = path;
    }

    @Override public String toString() {
        return path;
    }
} 
```

# javascript - 按属性排序

> ID：15687206
> 
> 赞同：-4
> 
> 时间：2013-03-28T16:29:31.740
> 
> 标签：javascript

我有这个代码

```
function Human(firstName,lastName,age)
{
    this.firstName = firstName;
    this.lastName =  lastName;
    this.age = age;
}

var firstHuman = new Human("Ivan","Ivanov",25);
var secondHuman = new Human("Petar","Petrov",34);
var thirdHuman = new Human("Ivailo", "Stoyanov",28);
var forthHuman = new Human("Petar", "Tudjarov",50);
var fifthHuman = new Human("Hari", "Qvorov",20);

var Humans = new Array (firstHuman,secondHuman,thirdHuman,forthHuman,fifthHuman); 
```

我如何按他们的名字对它们进行排序，以便让 FifthHuman（H 是字母表中最小的）在数组中排在第一位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:33:12.493

```
Humans.sort(function(a, b){return a.firstName > b.firstName}); 
```

[http://jsfiddle.net/3wyBc/](http://jsfiddle.net/3wyBc/)

# ruby - Ruby，初始化，分配变量值

> ID：15687214
> 
> 赞同：0
> 
> 时间：2013-03-28T16:29:49.570
> 
> 标签：ruby, ruby-on-rails-3, initialization

如何在 ruby​​ 初始化方法中为多个实例变量分配相同的值？希望重构以下内容：

```
def initialize
 @weekly_stats = Hash.new {|h, k| h[k]={}}
 @report_times = Hash.new {|h, k| h[k]={}}
 @email_stats = Hash.new {|h, k| h[k]={}}
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:51:59.223

不确定在单行中这样做会给你带来什么，但你可以做这样的事情：

```
%w{weekly_stats report_times email_stats}.each { |v| instance_variable_set("@#{v}", Hash.new {|h, k| h[k]={}} } 
```

或将其分成两条不重复的行，例如：

```
vars = %w{weekly_stats report_times email_stats}
vars.each { |v| instance_variable_set("@#{v}", Hash.new {|h, k| h[k]={}} } 
```

或者将它与 jvnill 的答案结合起来：

```
value = Hash.new {|h, k| h[k]={}}
vars = %w{weekly_stats report_times email_stats}
vars.each { |v| instance_variable_set("@#{v}", value.dup } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:41:31.770

您不能在一行中执行此操作，因为您正在分配哈希。使用维奈的答案

```
>> a = b = c = { a: 'b', c: 'd' }
>> a # {:a=>"b", :c=>"d"}
>> a[:a] = 2 # 2
>> b # {:a=>2, :c=>"d"} 
```

在上面的示例中，`b`更改时更改`a`. 我不确定是否有办法在一行中编写此代码，但请尝试以下代码

```
@weekly_stats = Hash.new {|h, k| h[k]={}}
@report_times = @weekly_stats.dup
@email_stats = @weekly_stats.dup 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T16:32:54.503

试试这个，

```
@weekly_stats = @report_times = @email_stats = Hash.new {|h, k| h[k]={}} 
```

这是可行的，但您应该知道，只有将变量用于数字时才对您的情况安全，这在 Ruby 中是不可变的。例如，如果您对字符串尝试相同的操作，最终可能会出现一些您没有预料到的行为：

```
ruby-1.9.2-p180 :001 > foo = bar = "string"
 => "string" 
ruby-1.9.2-p180 :002 > foo.upcase!
 => "STRING" 
ruby-1.9.2-p180 :003 > bar
 => "STRING" 
```

# ruby - Ruby：在方法链中访问调用者

> ID：15687215
> 
> 赞同：4
> 
> 时间：2013-03-28T16:29:52.220
> 
> 标签：ruby, method-chaining

我正在尝试编写一个 Or 助手（基于[Jay Fields 的 Not Method](http://blog.jayfields.com/2007/08/ruby-adding-not-method-for-readability.html)）。我想要实现的是：

```
s = ""
s.nil?             # false
s.empty?           # true
s.nil? || s.empty? # true
s.nil?.or.empty?   # should == true 
```

我可以访问结果，`nil?`但不能访问输入的内容`nil?`。

我得到：

```
NoMethodError: undefined method `empty?' for false:FalseClass 
```

这甚至可能吗？

**注意：**这需要是原生 ruby**​​ 而不是**rails！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:37:17.457

你无法做到这一点。

的返回值`s.nil?`是`true`或，它们分别是和`false`的唯一实例。您不能创建这两个类的其他实例。所以你不能猴子补丁或记住上下文。您可以在 上定义单例方法，但是，它一无所知，因此您不能链接另一个 predicate 。`TrueClass``FalseClass``TrueClass``FalseClass``s``or``true``false``s``empty?`

```
def true.or other
  true
end

def false.or other
  other
end 
```

`s.nil?.or(s.empty?)`您可以使用定义的两个辅助方法编写。

另一个想法是为所有谓词（blabla？）方法返回一个自定义对象，而不是`true`or `false`。然而，在 ruby​​ 中，只有`nil`和`false`产生假，任何其他的东西产生真。您自定义对象的实例将始终为真，这将破坏所有这些谓词方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:35:21.773

试试这个

```
p RUBY_VERSION
p s = ""
p s.nil?             
p s.empty?           
p s.nil? || s.empty? 
p (s.nil? or s.empty?) 
```

*输出：*

```
"2.0.0"
""
false
true
true
true 
```

*解释：*

```
s.nil?
#=> false

s.nil?.or.empty?
#NoMethodError: undefined method `or' for false:FalseClass
#        from (irb):5
#        from C:/Ruby200/bin/irb:12:in `<main>' 
```

上面的错误是因为`s.nil?`给了`false`and`false`是 的一个实例`FalseClass`，并且这个类没有`or`任何方法。所以实际的修复如上所示。

***编辑*****：**

```
p RUBY_VERSION
class Object

alias :oldnil :nil?

    def nil?
    @@x = self
    oldnil
    end
end

class FalseClass
    def or
    empty?
    end

    def empty?
    @@x.empty?
    end
end

class TrueClass
    def or
    empty?
    end

    def empty?
    @@x.empty?
    end
end

s = ""
p s.nil?
p s.empty?
p s.nil? || s.empty?
p s.nil?.or.empty? 
```

*输出：*

```
"2.0.0"
false
true
true
true 
```

# java - 是下面的静态实用方法 Threadsafe

> ID：15687216
> 
> 赞同：2
> 
> 时间：2013-03-28T16:29:53.407
> 
> 标签：java, multithreading

我正在编写一个静态实用程序方法。我知道方法 isEmpty() ， isNew() 是线程安全的。在 getTotal(...) 方法中，我使用 StringBuilder 作为参数 alomg 与 String 和 int.StringBuilder 是可变的。getTotal() 是线程安全的。如果是这样，请解释为什么即使 StringBuilder 是 mutable 也是如此。但我不确定 getCharge() 是否是线程安全的，因为它调用了 getTotal() 方法。有人可以判断它是否是线程安全的

```
public class NewStringUtils {

    public static boolean  isEmpty(String s){
        return (s == null || s.trim().length()==0);
    }

    public static boolean isNew(String code){
        return( "1009".equals(code) || "1008".equals(code) );
    }
    //StringBuilder is  mutable  -- is the below method threadsafe 
    public static int getTotal(StringBuilder sb,String oldCode ,int a, int b){
        //Is it Threadsafe or not .If so  just bcz every thread invoking this method will have its own copy and other threads can't see its value ?? 
        int k =0;
        if("1011".equals(oldCode) && "1021".equals(sb.toString()) {
            k = a+b;
        }
        return k;
    }
    // is the below method threadsafe 
    public static  int getCharge(String code,String oldCode,int charge1,int charge2){
        int total =0;
        StringBuilder sb = new StringBuilder("1021");
        if(!NewStringUtils.isEmpty(code)){

            if(NewStringUtils.isNew(code)){
                //here invoking a static method which has StringBuilder(Mutable) as a         parameter
                total  = NewStringUtils.getTotal(sb,oldCode,charge1,charge2);
            }
        }

        return total;
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T16:31:30.407

这是。您没有使用任何非方法范围的字段/变量，并且方法的所有参数都是不可变的，因此它是线程安全的。

不使用任何非方法范围变量的方法中唯一的线程安全风险是参数是否可变，因此可以被另一个线程修改。由于原语`String`是不可变的，所以你很好。

编辑：发表评论：

> 怎么样：如果一个方法（静态或其他）只使用方法范围的变量，只有不可变的参数并且只调用其他线程安全的方法，那么它必须是线程安全的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:32:39.533

所有变量都是局部变量，线程之间没有共享变量（静态变量，因为它是静态方法），传递的引用要么是原语，要么是不可变类的实例。因此，它是线程安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:32:08.667

您的静态方法在调用之间没有任何状态。通过参数传递的所有状态......所以它的线程安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:32:27.263

是的。`ints`是按值传递的。并且`Strings`是方法的参数。您没有使用方法外部的任何字段。

**编辑**

如果要使用`StringBuilder`而不是，则需要在对象`String`上进行同步。`StringBuilder`

```
public someMethod(StringBuilder sb, ...) {
    synchronized(sb) {

        //this will make sb thread safe.
        //but do this everywhere you access this StringBuilder Object.

    }
} 
```

# css - 如何使用 CSS 控制按钮边距（兼容 IE8）

> ID：15687221
> 
> 赞同：0
> 
> 时间：2013-03-28T16:30:22.900
> 
> 标签：css, button, internet-explorer-8, styles

我正在尝试设置按钮样式，以使文本左侧/右侧的边距远小于默认样式。

*例子：*

![在此处输入图像描述](../Images/bfdf81b6213c267d96ea44cc1b8ed2f2.png)

**如何使用与 IE8 兼容的 CSS 来做到这一点？**

我试过这个但没有用（换行符只是为了 MarkDown 的缘故）：

```
<button style="font-size=11px;
margin-right:1px;padding-right:1px;margin-left:1px;padding-left:1px;">
Copy parameters to another fund</button> 
```

我知道我可以通过设置`width`属性来调整它，但为此我必须为每个不可扩展的不同文本设置单独的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:37:48.353

确保包含一个文档类型。这对我有用：

```
<!doctype html>
<body>
<button style="font-size=11px;
      margin-right:1px;padding-right:1px;margin-left:1px;padding-left:1px;">
        Copy parameters to another fund
    </button>
</body> 
```

实际上，您不需要边距，填充就可以了。

# c++ - 在 longjmp/croak 之前显式调用析构函数

> ID：15687223
> 
> 赞同：3
> 
> 时间：2013-03-28T16:30:25.463
> 
> 标签：c++, perl, setjmp

我正在为 C++ 库编写一个 PERL XS 接口。`croak`当库抛出异常时我需要调用。

直接在异常处理程序中执行它会错过对捕获异常的析构函数的调用，正如`longjmp`调用所期望的那样。这很重要，因为异常包含不会被释放的字符串成员。

显而易见的解决方案是`croak`在 catch 块之后执行，如果捕获到异常，如下所示：

```
bool do_croak = false;
try {
    throw MyException();
} catch (MyException &e) {
    do_croak = true;
}
if (do_croak)
    croak(NULL); 
```

但我想知道：在 ? 之前显式调用捕获的异常的析构函数是否足够`longjmp`？像这样：

```
try {
    throw MyException();
} catch (MyException &e) {
    e.~MyException();
    croak(NULL);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:37:02.433

`longjmp`在 C++ 程序中安全使用几乎是不可能的。具体来说：

> C++11 18.10/4：如果将and替换为，则`setjmp`/`longjmp`调用对具有未定义的行为，并且将为任何自动对象调用任何非平凡的析构函数。`setjmp``longjmp``catch``throw`

在这种情况下，抛出异常 from`croak`将调用 的析构函数`e`，因此`longjmp`从那里调用会产生未定义的行为。自己调用析构函数只会使行为更不明确。

# c - 如何将字符添加到字符

> ID：15687226
> 
> 赞同：0
> 
> 时间：2013-03-28T16:30:32.083
> 
> 标签：c, macos, char

我在做：

```
FILE *in;
extern FILE *popen();
char buff[512];

if (!(in = popen("df / | tail -n +2 | awk '{ print $1 }'", "r"))) {
    exit(1);
}

while (fgets(buff, sizeof(buff), in) != NULL ) {
    printf("Output: %s", buff);
} 
```

所以一旦我有了`buff`如何附加额外的字符，比如`s0`到最后，这样我就可以将它传递`char`给一个函数来使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:40:18.827

对于一个非常c ++的方式：

```
#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <string>
#include <sstream>
int main() {
  FILE *in;
  char buff[512];
  if (!(in = popen("df /", "r"))) {
    return 1;
  }
  fgets(buff, sizeof(buff), in); //discard first line
  while (fgets(buff, sizeof(buff), in) != NULL ) {
    std::istringstream line(buff);
    std::string s;
    line >> s; // extract first word
    s += "s0"; // append something
    std::cout << s << '\n';
  }
  return 0;
} 
```

原标题指定 c++。对于编辑字符串，我推荐 C++ 而不是 C，除非你想过度优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:35:18.730

您不能将任何内容附加到`buff`，因为您将写入不属于您的内存。您必须在堆上分配内存并复制`buff`到该内存。确保分配足够的内存，以便实际附加某些内容。

请注意，如果`fgets`调用没有使用整个 512 个字符，您可以调用 use`strlen(buff)`来检查读取和随后写入的字符数`buff + strlen(buff)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:36:23.853

像这样的东西可以解决问题：

```
char buff[512];
size_t pos = 0;
...
while (fgets(buff + pos, sizeof(buff) - pos, in) != NULL) {
    printf("Output: %s\n", buff + pos);
    pos += strlen(buff + pos);
} 
```

如果你想添加不是来自文件的字符，你可以扩展这个想法：

```
strcpy(buff + pos, "s0");
pos += strlen(buff + pos); 
```

或者

```
buf[pos++] = 's';
buf[pos++] = '0';
buf[pos++] = '\0'; 
```

您必须确保缓冲区不会溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:33:27.767

`strcat()`当然，如果您的缓冲区足够大，您可以使用将字符附加到字符串。如果不是，则必须分配更多内存。

例如，请参见此处：[http ://www.cplusplus.com/reference/cstring/strcat/](http://www.cplusplus.com/reference/cstring/strcat/)

# c# - 在后台加载后添加 asp:TableRows 到 asp:Table

> ID：15687227
> 
> 赞同：0
> 
> 时间：2013-03-28T16:30:33.973
> 
> 标签：c#, asp.net

我正在尝试在单独的线程中向 ASP 表控件添加行。基本上这就是我到目前为止所拥有的：

代码隐藏：

```
 protected void onLoad(object sender, EventArgs e)
    {
        Thread obj = new Thread(new ThreadStart(testX));
        obj.IsBackground = true;
        obj.Start();
    }

    void testX()
    {
        System.Threading.Thread.Sleep(5000);
        Table tblOnline = (Table)FindControl("test");
        TableRow r = new TableRow();
        TableCell c1 = new TableCell();
        Label test = new Label();
        test.ForeColor = System.Drawing.Color.Black;
        test.Font.Bold = true;
        test.Text = "Rank";
        c1.Controls.Add(test);
        r.Cells.Add(c1);
        tblOnline.Rows.Add(r);
    } 
```

我的 ASPX：

```
<body>
<asp:Table runat="server" id="test"></asp:Table>
</body> 
```

当我编译网站时，5 秒后我没有看到任何行添加到表中。这是不可能的还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:44:48.407

如果您希望在渲染五秒钟后看到新行出现在客户端，则此代码不会发生这种情况。*服务器上的*后台线程不会导致*客户端*更改其外观。

如果您希望这种情况发生，您需要使用 Javascript（如果您不需要任何服务器数据）或 Ajax 调用（如果您需要）从客户端启动事件。这本身就在后台发生，因此您无需在服务器上运行单独的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:59:43.883

在 ASP.NET 中使用线程将无法按照您尝试的方式工作。

如果您想要每 5 秒向表中添加一行，我建议您使用 Timer 控件：

```
<asp:Table runat="server" ID="tableTest">
</asp:Table>
<asp:Timer ID="timerAddRow" runat="server" OnTick="timerAddRow_Tick" Interval="5000">
</asp:Timer> 
```

代码隐藏：

```
protected void timerAddRow_Tick(object sender, EventArgs e)
{            
    TableRow r = new TableRow();
    TableCell c1 = new TableCell();
    Label test = new Label();
    test.ForeColor = System.Drawing.Color.Black;
    test.Font.Bold = true;
    test.Text = "Rank";
    c1.Controls.Add(test);
    r.Cells.Add(c1);
    tableTest.Rows.Add(r);
} 
```

# ios - 从 redpark 电缆中获取串行字符串

> ID：15687228
> 
> 赞同：0
> 
> 时间：2013-03-28T16:30:34.330
> 
> 标签：ios, string

我正在从 arduino 的 redpark 电缆中获取串行数据。我正在以 12x13x14x15x16 的形式接收字符串中的数据，其中 x 分隔数据。我想知道如何显示单独传入的数据。所以我可以在应用程序中有 5 个文本框分别显示每个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:37:34.913

假设您的问题确实与 arduino 或 red park 电缆无关，但实际上是关于如何根据分隔符拆分字符串的问题，那么您只需要：

```
NSString *data = @"12x13x14x15x16";
NSArray *parts = [data componentsSeparatedByString:@"x"]; 
```

具有 5 个字符串的数组`@"12"`，`@"13"`等。

# jquery - 从无序列表中删除唯一项

> ID：15687234
> 
> 赞同：1
> 
> 时间：2013-03-28T16:30:42.400
> 
> 标签：jquery, duplicates

我有两个无序列表。我想从第一个列表中删除第二个列表中不存在的项目。

像这样：

```
<ul class="first">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
    <li><a href="#">Four</a></li>
    <li><a href="#">Five</a></li>
    <li><a href="#">Six</a></li>
</ul>

<ul class="second">
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul> 
```

...运行脚本...应该是这样的：

```
<ul class="first">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
    <li><a href="#">Four</a></li>
</ul> 
```

我的问题与此处发布的问题完全相同 - [jquery Remove items from list 1 not in list 2](https://stackoverflow.com/questions/14072505/jquery-remove-items-from-list-1-not-in-list-2)

...但是，我似乎无法让它与我的代码一起使用（它什么都不做）。

这是我尝试过的：

```
$('.first li a').filter(
    function(){
    return !$('.second li').length;
}).remove(); 
```

使用其他代码，我已经能够删除重复项。但是，我在做相反的事情时遇到了问题。我确定我忽略了一些简单的事情，如果有第二双眼睛向我指出问题所在，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:36:04.007

```
$('.first li').filter(function(){
    return ! $('.second li:contains('+$(this).text()+')').length;
}).remove(); 
```

# php - 我的 UCP 的 PayPal 问题

> ID：15687244
> 
> 赞同：1
> 
> 时间：2013-03-28T16:30:59.720
> 
> 标签：php, paypal, integration, ucp

我目前遇到了这个问题，有人告诉我在这里发帖。

基本上我有一个正在运行的游戏服务器的 UCP（用户控制面板），我遇到的问题是：

好吧，基本上有一个捐赠页面。在该页面上有一个项目列表，为了获得它们，您必须拥有积分，为了获得积分，您必须使用真钱添加它们。因此，有一个名为“获得更多积分”的按钮，一旦您单击该按钮，就会出现一个弹出窗口，说明您要添加多少积分。输入金额后，按回车键，然后进入下一页。

我遇到的问题是它没有将在 UCP 中输入的金额转移到 PayPal 页面。我试图在这方面寻求帮助，但仍然遇到问题。希望这里有人可以帮助我，这样我就可以解决这个问题。

我附上了一个`buy.php`包含所有代码的链接。我还包括了`Paypal.ipn.inc`和`ipn.php`文件。

希望有人给我解答，谢谢！

**文件：**

**购买.php** [https://www.dropbox.com/s/gtl4bq8y69bi183/buy.php](https://www.dropbox.com/s/gtl4bq8y69bi183/buy.php)

**Paypal.inc.php** [https://www.dropbox.com/s/0inzawdfb0buofm ​​/paypal.inc-1.php](https://www.dropbox.com/s/0inzawdfb0buofm/paypal.inc-1.php)

# ruby-on-rails - 跨应用程序的蜻蜓；相同的 image_uid，相同的主机，不同的 Basename

> ID：15687245
> 
> 赞同：0
> 
> 时间：2013-03-28T16:31:00.337
> 
> 标签：ruby-on-rails, dragonfly-gem

我正在尝试将现有用户从旧的 3.1 rails 应用程序移植到新的 rails 4.0 应用程序。我假设具有相同的配置和相同的 image_uid 足以移植蜻蜓图像。但是，虽然基本 url 和 image_uids 匹配，但会产生不同的 url。旧应用程序：

```
1.9.3-p194 :002 > u.image_uid
 => "2013/03/07/19/10/42/209/jake.jpg" 
1.9.3-p194 :003 > u.image.url
 => "http://images.example.com/media/BAhbBlsHOgZmSSInMjAxMy8wMy8wNy8xOS8xMC80Mi8yMDkvamFrZV9zLmpwZwY6BkVU" 
```

新应用：

```
1.9.3-p194 :002 > u.image_uid
 => "2013/03/07/19/10/42/209/jake.jpg" 
1.9.3-p194 :003 > u.image.url
 => "http://images.example.com/media/W1siZiIsIjIwMTMvMDMvMDcvMTkvMTAvNDIvMjA5L2pha2Vfcy5qcGciXV0" 
```

为什么basename不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:07:30.743

由蜻蜓版本 0.9.12 和 0.9.14 之间的安全差异引起。更改会导致 url 以不同的方式编码。

# java - 可以将二维双数组更改为输出字符串吗？

> ID：15687246
> 
> 赞同：1
> 
> 时间：2013-03-28T16:31:01.963
> 
> 标签：java, arrays, string

我制作了一个二维数组，计划将其用作以不同方式相互交互的双精度表。我遇到的问题是不需要[0,0]（表中的[x,0]是Y轴代表的数字，[0,x]是X轴代表的数字）

我希望实现的是以某种方式更改 [0,0] 以便它成为一个字符串来描述我正在打印的表格或将其留空，而不是 0 如果留空或以其他方式输入。我尝试使用一种简单的方法引入双精度并检查它是否是一些不太可能在表中计算的选定数字并将其输出为字符串，但我显然遇到了不兼容类型的墙壁（需要字符串，找到双倍的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:36:25.223

您不能将 String 存储在 double 中。

您可以做的是创建一个包含字符串和双精度数组的类。

```
public class NamedArray {
    private String description;
    private double[][] array;
} 
```

您可以填写 getter、setter 和构造函数。

编辑添加：我刚刚注意到您浪费了双数组中的大部分空间。

您可以使用 java.awt.Point 实例的 List 来表示一系列 x 和 y 坐标。像这样的东西：

```
List<ChartValue> array;

public class ChartValue {
    double value;
    Point location;
} 
```

# drupal-7 - Drupal 7 图像缓存效果不能在 Chrome 或 Safari 中呈现，但在 Firefox 中可以

> ID：15687247
> 
> 赞同：0
> 
> 时间：2013-03-28T16:31:06.470
> 
> 标签：drupal-7, drupal-views

我创建了一些显示为视图块的内容类型。我添加了一个图像字段，它应该显示具有调整大小效果的图像缓存样式（也勾选了放大）。这些在 Firefox 中显示得很好，但图像缓存效果在 Chrome 和 Safari 中完全丢失。有人遇到过这个吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:58:15.343

Inagecahe 本身绝对不依赖于浏览器，因此听起来更像是浏览器缓存问题。只需清除 Chrome 和 Safari 中的缓存并重新加载页面几次。

# ms-access - 基于 ComboBox Access 2010 的打开表单

> ID：15687248
> 
> 赞同：1
> 
> 时间：2013-03-28T16:31:07.413
> 
> 标签：ms-access

我在表单上有一个组合框，有一个未绑定的列 [系统类型]。我在 Access 的 Macro Builder 中工作，试图设置一个 If 语句。我的最终目标是打开一个表单，取决于未绑定的列。

我似乎无法弄清楚如何引用该列。我试过 [Forms]![My Form]![My Combo].Column(1)，但我得到一个无法识别的函数错误。我还从在线搜索中尝试了该声明的变体。

如何在 Access 2010 中的 MacroBuilder 的组合框中为 If 语句引用未绑定的列？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:34:51.773

如果一个组合只有一列，它是column（0），或者只是[MyCombo]，我认为你错过了组合绑定的两种类型，它可以绑定到表中的一个字段，你可以有一个绑定列，它是组合返回的值。

```
Row Source : SELECT Atext FROM ATable
Bound Column : 1
Column Count : 1

MsgBox Me.myCombo  ''Atext

Row Source : SELECT ID, Atext FROM ATable
Bound Column : 1
Column Count : 2

MsgBox Me.myCombo  ''ID
MsgBox Me.MyCombo.Column(1) ''Atext

Row Source : SELECT ID, Atext FROM ATable
Bound Column : 2
Column Count : 2

MsgBox Me.myCombo  ''atext
MsgBox Me.MyCombo.Column(0) ''ID 
```

因此，要从此表单打开一个表单：

```
DoCmd.OpenForm "aForm",,,"ID=" & Me.MyCombo ''First example 
```

从另一种形式

```
DoCmd.OpenForm "aForm",,,"ID=" & Forms!AnotherForm.MyCombo ''First example
DoCmd.OpenForm "aForm",,,"Atext='" _
   & Forms!AnotherForm.MyCombo.Column(1) ''Second example 
```

# c# - 包向导的集成测试中的 NullReferenceException

> ID：15687260
> 
> 赞同：3
> 
> 时间：2013-03-28T16:31:44.337
> 
> 标签：c#, visual-studio-2010, unit-testing, vsix, vs-extensibility

我使用 Visual Studio 2010 SP1 和包向导为扩展生成单元测试。单元测试通过，但 UIThreadInvoker.Invoke 调用上的集成测试（未修改）失败，并出现 NullReferenceException。我在向导中添加了一个菜单和一个带有复选框的工具窗口。

测试方法 VSPackage2_IntegrationTests.IntegrationTests.CSharpProjectTests.WinformsApplication 抛出异常：System.NullReferenceException：对象引用未设置为对象的实例。在 Microsoft.VSSDK.Tools.VsIdeTesting.UIThreadInvoker.Invoke(Delegate method) in f:\dd\VSSDK\VSIntegration\Tools\src\IDEHostAdapter\Framework\UIThreadInvoker.cs：VSPackage2_IntegrationTests.IntegrationTests.CSharpProjectTests.WinformsApplication() 的第 44 行在 CSharpProjectTests.cs 中：第 62 行

```
using System;
using System.Text;
using System.Collections.Generic;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Microsoft.VsSDK.IntegrationTestLibrary;
using Microsoft.VSSDK.Tools.VsIdeTesting;

namespace VSPackage2_IntegrationTests.IntegrationTests
{
    [TestClass]
    public class CSharpProjectTests
    {
        #region fields
        private delegate void ThreadInvoker();
        private TestContext _testContext;
        #endregion

    #region properties
    /// <summary>
    ///Gets or sets the test context which provides
    ///information about and functionality for the current test run.
    ///</summary>
    public TestContext TestContext
    {
        get { return _testContext; }
        set { _testContext = value; }
    }
    #endregion

    #region ctors
    public CSharpProjectTests()
    {
    }
    #endregion

    #region Additional test attributes
    //
    // You can use the following additional attributes as you write your tests:
    //
    // Use ClassInitialize to run code before running the first test in the class
    // [ClassInitialize()]
    // public static void MyClassInitialize(TestContext testContext) { }
    //
    // Use ClassCleanup to run code after all tests in a class have run
    // [ClassCleanup()]
    // public static void MyClassCleanup() { }
    //
    // Use TestInitialize to run code before running each test 
    // [TestInitialize()]
    // public void MyTestInitialize() { }
    //
    // Use TestCleanup to run code after each test has run
    // [TestCleanup()]
    // public void MyTestCleanup() { }
    //
    #endregion

    [TestMethod]
    [HostType("VS IDE")]
    public void WinformsApplication()
    {
        UIThreadInvoker.Invoke((ThreadInvoker)delegate()
        {
            TestUtils testUtils = new TestUtils();

            testUtils.CreateEmptySolution(TestContext.TestDir, "CSWinApp");
            Assert.AreEqual<int>(0, testUtils.ProjectCount());

            //Create Winforms application project
            //TestUtils.CreateProjectFromTemplate("MyWindowsApp", "Windows Application", "CSharp", false);
            //Assert.AreEqual<int>(1, TestUtils.ProjectCount());

            //TODO Verify that we can debug launch the application

            //TODO Set Break point and verify that will hit

            //TODO Verify Adding new project item to project

        });
    }

} 
```

}

UIThreadInvoker.cs 没有来源可以查看发生空异常的位置...我一定是在设置中做错了什么，所以我重新安装了 SDK 无济于事。我还再次使用包向导进行了仔细检查，第二个解决方案得到了相同的错误。我已经尝试注释掉委托的全部和部分内容，但仍然失败。所有其他集成测试也会在同一位置失败并出现相同的错误。

编辑：在进一步研究这个问题后，我将测试的初始部分修改为：

```
[TestMethod]
[HostType("VS IDE")]
public void PackageLoadTest()
{
    UIThreadInvoker.Initialize();
    UIThreadInvoker.Invoke((ThreadInvoker)OnThreadInvoker);
}

private void OnThreadInvoker()
{
    TestUtils testUtils = new TestUtils();

    testUtils.CreateEmptySolution(TestContext.TestDir, "CSWinApp");
    ....
} 
```

在调试器中，它到达最终使用 VsIdeTestHostContext.ServiceProvider 的 CreateEmptySolution 方法，该方法为空。事实上，VsIdeTestHostContext 似乎未初始化。但是我找不到初始化它的方法。由于某种原因，VS IDE 主机类型似乎没有启动，或者至少没有及时启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T08:55:58.397

关于您的编辑 - 来自“VS Team System 的 VS IDE 主机适配器（示例）”的 ReadMe.doc

> 如果 VsIdeTestHostContext.Dte 或 VsIdeTestHostContext.ServiceProvider 返回 null，请确保您的测试项目引用了正确版本的 Microsoft.Samples.VisualStudio.TestTools.VsIdeTestHostFramework.dll。如果您的项目引用了框架程序集的强签名版本，但您安装了框架程序集的未签名版本，则您可以获得 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T09:27:26.363

除了 Omer Raviv 的出色提示，我还经历过，我需要

**将VSXI包的安装目标升级到当前使用的Visual Studio版本（本例为2015）**

然后，它奏效了。

# python - 获取文本文件的特定属性

> ID：15687263
> 
> 赞同：0
> 
> 时间：2013-03-28T16:31:52.683
> 
> 标签：python, text, python-3.x

所以我有一个包含以下格式信息的文本文件：

```
|NAME|70|AST|TYPE|LOCATION|3||MNUM_1|NUM_2|DESCRIPTION| 
```

我的代码在文本文件中搜索 NAME 属性，然后返回除拆分字符“|”之外的所有信息。这是我的代码：

```
 with open('TEXT.txt') as fd:
    input=[x.strip('|').split('|') for x in fd.readlines()]
    to_search={x[0]:x for x in input}
    print('\n'.join(to_search[name])) 
```

有没有办法编辑我的代码，以便我可以在文本文件中搜索名称属性并选择我想要返回的属性并返回该属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:40:05.380

将第一行作为字段名称怎么样，然后您可以执行以下操作：

```
search_key = 'NAME'
search_query = 'foo'

with open('TEXT.txt') as fin:
    keys = fin.readline().strip('|').split('|')
    for line in fin:
        columns = line.strip().strip('|').split('|')
        obj = dict(zip(keys, columns))
        if obj[search_key] == search_query:
            ... 
```

正是出于这个原因，许多 csv 文件都遵循此约定（在第一行中命名列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:36:44.997

对于这种类型的数据文件最好使用`csv`包，但在现有代码中您可以这样做：

```
columns = ['NAME', '70', 'AST', 'TYPE', 'LOCATION', '3', 'SOMETHING', 'MNUM_1', 'NUM_2', 'DESCRIPTION']
return to_search[requested_name][columns.index(requested_column)] 
```

# java - 在 OSX 10.8 上设置 JAVA_HOME

> ID：15687271
> 
> 赞同：0
> 
> 时间：2013-03-28T16:32:12.450
> 
> 标签：java, osx-mountain-lion

我在 OSX 10.8

当我说它`javac`会打印出这个时：

```
/usr/bin/javac 
```

我用谷歌搜索设置`JAVA_HOME`，我看到人们说我应该这样做：（我也想要 Java 6.0 而不是 7）

```
export JAVA_HOME=`/usr/libexec/java_home -v 1.6` 
```

这就是我需要做的一切吗？我看到有些地方说我也应该设置 PATH ？

# jquery - 当我的下拉列表的值更改时更改操作链接的 ID

> ID：15687274
> 
> 赞同：0
> 
> 时间：2013-03-28T16:32:26.593
> 
> 标签：jquery, asp.net-mvc, drop-down-menu, actionlink

我正在创建一个 MVC 3 应用程序，我正在尝试使用 .change 事件使用 jQuery 创建一个下拉列表。我希望页面正文为空白，并且当下拉列表更改时，我希望出现链接（操作链接）并将下拉列表的 ID 或值添加到操作链接和另一个下拉列表。

如果有人可以帮助我或提供一些建议，我将不胜感激。

编辑示例：

```
$(document).ready(function () {
         $('#DivName').hide();
         $("#Dropdownname").change(function () {
             $('#DivName').show();

             var result = $('#Dropdownname').val();

             { $("#OldId").attr('id', result); });

         });
     }); 
```

我的行动链接：

```
@Html.ActionLink("Title", "Action", null, new { id = "OldId" }) 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:50:47.480

您可以将它们与 div 和 .show(); 或 .hide(); 取决于您想展示的内容，例如：

```
 $(document).ready(function () {
    $('.actionLinksdiv').hide();
      $(".dropdownclassname").click(function () {
           $('.actionLinksdiv').show();

         });    
   }); 
```

在 jquery 中更改 id

```
$("#oldId").attr('id', 'newId'); 
```

或添加属性：

```
$('#oldId').attr('value','newValue'); 
```

如果这不是您想要的，可能会发布一个代码示例以获得一些帮助。

# html - CSS 中的像素与像素密度

> ID：15687276
> 
> 赞同：4
> 
> 时间：2013-03-28T16:32:27.640
> 
> 标签：html, css

我对 HTML 和 CSS 非常陌生，我突然想到，当决定某个东西是 5px 时，因为像素的物理尺寸取决于密度，那么在 100 ppi 的屏幕上肯定 5px 看起来比在 300 ppi 的屏幕上更大ppi。

这是正确的吗？如果是的话，有什么办法可以调解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:48:42.273

绝对地！通常在桌面上，1 css 像素 = 1 像素。移动设备（尤其是带有较新的高分辨率显示器的）让我们有些头疼。这是我最喜欢的解决方法：

```
(function() {
    var meta = document.createElement("meta");
    meta.setAttribute('name','viewport');
    var content = 'initial-scale=';
    content += 1 / window.devicePixelRatio;
    content += ',user-scalable=no';
    meta.setAttribute('content', content);
    document.getElementsByTagName('head')[0].appendChild(meta);
})(); 
```

我通常将它添加为我的 body 标签的第一个子标签，但它可能应该在 head 标签中。此脚本根据显示器的像素密度修改设备的比例，并强制 1 CSS 像素等于 1 像素。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T06:17:40.703

CSS 像素不是物理像素！96 CSS px ~= 1 物理英寸。参考[https://www.w3.org/TR/css3-values/](https://www.w3.org/TR/css3-values/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T16:51:17.613

您还可以使用`@media`查询，它允许您`css`对不同大小的屏幕使用不同的：

您可以了解更多[CSS 技巧](http://css-tricks.com/css-media-queries/)

```
@media all and (max-width: 699px) and (min-width: 520px), (min-width: 1151px) {
  body {
    background: #ccc;
  }
} 
```

另一个屏幕尺寸

```
@media all and (max-width: 1000px) and (min-width: 700px) {
  #sidebar ul li a:before {
    content: "Email: ";
    font-style: italic;
    color: #666;
  }
} 
```

# r - Adaboost 实现（在 R 中获得弱分类器函数形式）

> ID：15687283
> 
> 赞同：1
> 
> 时间：2013-03-28T16:33:01.160
> 
> 标签：r, adaboost

我正在尝试在 CRAN-R 中使用 Adaboost 来解决分类问题。我找不到任何实际输出弱分类器函数形式的 R 包（例如 hi(x) * I (Y > z)，然后我可以将其编程为评分算法。谁能帮我指出一个可以提供这些的包函数/系数？谢谢！

# python - 相当于在 Python 中在字符串前面加上“r”的函数

> ID：15687286
> 
> 赞同：2
> 
> 时间：2013-03-28T16:33:11.290
> 
> 标签：python, string

能写真是太好了

```
s = r"some line\n" 
```

但是与 preprepreending with 的功能等价物是什么`r`？例如：

```
s = raw_rep( s ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:34:12.667

没有一个。`r`是[字符串文字标记](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)的组成部分，省略它是有损操作。

例如`r'\n'`，`r'\12'`和`r'\x0a'`是三个不同的字符串。但是，如果您省略`r`，它们将变得相同，从而无法分辨出它是从三个中的哪一个开始的。

出于这个原因，这不是可以 100% 重建原始字符串的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:53:15.753

```
def raw_rep(s):
    quote = '"' if "'" in s else "'"
    return 'r' + quote + s + quote

>>> print raw_rep(r'some line\n')
r'some line\n' 
```

# javascript - 在全局范围内重新初始化 JavaScript 对象会导致内存泄漏吗？

> ID：15687288
> 
> 赞同：1
> 
> 时间：2013-03-28T16:33:20.533
> 
> 标签：javascript, jquery, garbage-collection, datatables, jquery-ui-tooltip

我在使用 JQuery UI 的工具提示功能的 JQuery DataTable 中有链接。每个链接都有一个由 Ajax 调用填充的工具提示。我想将 Ajax 调用的数量限制为尽可能少。DataTable使用服务器端处理，结果是分页的，所以任何时候页面上的链接永远不会超过十个。

Ajax 调用返回的数据永远不会改变，因此可以安全地缓存。在我的测试中，我看到浏览器确实缓存了每个 Ajax 调用的结果，因此它只对每个链接进行一次调用，然后使用缓存。我担心的是，某些用户可能将他们的浏览器配置为由于某种原因不使用缓存，并且每次将鼠标悬停在链接上时，他们都会一个接一个地触发 Ajax 调用。

这是工具提示的 JavaScript：

```
$('.jobId').tooltip({
    content: function(callback) {
        var jobId = $(this).text();

        $.ajax({
            url: 'myUrl',
            data: {jobId: jobId},
            dataType: 'json',
            success: function(data) {
                var html = formatResults(data);
                callback(html);
            },
            error: function() {
                callback('An error has occurred.');
            }
        });
    }
}); 
```

我考虑将每个 Ajax 调用的结果存储在全局范围内声明的 JavaScript 对象中，然后在进行 Ajax 调用之前对其进行检查，但我有一种模糊的感觉，即这可能会以某种方式导致内存泄漏。

```
var gJobs = new Object();

$('.jobId').tooltip({
    content: function(callback) {
        var jobId = $(this).text();

        if (gJobs[jobId]) {
            callback(gJobs[jobId]);
        } else {
            $.ajax({
                url: 'myUrl',
                data: {jobId: jobId},
                dataType: 'json',
                success: function(data) {
                    var html = formatResults(data);
                    gJobs[jobId] = html;
                    callback(html);
                },
                error: function() {
                    callback('An error has occurred.');
                }
            });
        }
    }
}); 
```

我还担心如果表有大量行，gJobs 对象最终可能会使用大量内存。为了防止 gJobs 对象无限增长，每次用户转到 DataTable 中结果的下一页或上一页时，我使用 fnDrawCallback 函数重新初始化 gJobs：

```
$('#jobsTable').dataTable({
...
    "fnDrawCallback": function() {
        gJobs = new Object();
    }
}); 
```

我应该提到，由于每个 Ajax 调用返回的数据不会改变，我也可以将数据作为静态文本存储在 JSP 中，并以这种方式填充工具提示，而不是使用 Ajax。但是，我必须进行单独的 Web 服务调用来获取每个链接的数据，而不是每次用户页面向前或向后调用十次 Web 服务，我宁愿通过 Ajax 按需加载数据。

这种方法有什么问题吗？有什么方法会导致内存泄漏？我应该在重新初始化之前明确删除 gJobs 的所有属性吗？谢谢你的帮助。

# drupal - 将数据表集成到 Drupal 7

> ID：15687292
> 
> 赞同：1
> 
> 时间：2013-03-28T16:33:29.490
> 
> 标签：drupal

我对 Drupal 很陌生，我很难找到一种方法将[Datatable 模块](http://drupal.org/project/datatables)实现到我的网站中。

我想使用该模块在各种内容页面上显示数据。我需要从电子表格中轻松上传数据的灵活性，但我无法通过使用视图明确地实现这一点。

DataTables 模块将 jQuery 插件[DataTables](http://www.datatables.net/index)作为 Views 样式和可调用主题函数集成到 Drupal 中。通过视图呈现数据表似乎比尝试通过直接调用必要的脚本或函数并将其指向已格式化为显示为表格的电子表格代码来加载它要耗时得多。

我找到[了一种以编程方式呈现表格的方法](http://webwash.net/tutorials/using-datatables-drupal-7)，但我不确定如何实现该方法，或者为此格式化电子表格是否实用。

我还尝试将必要的 Datatables 文件和脚本从[基本的 Datatable 示例](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)链接到我的 html.tpl.php 文件中，但它不会将我的表数据格式化为 Datatable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:54:21.380

您要上传 .csv 文本文件然后生成表格吗？

这就是 node-import 模块所做的事情，它工作得很好：

drupal.org/documentation/modules/node_import

它使用视图来显示内容，但我也使用它来显示带有来自 csv 文件的打印机数据的谷歌图表。

# unix - 检查环境变量

> ID：15687298
> 
> 赞同：0
> 
> 时间：2013-03-28T16:33:40.947
> 
> 标签：unix

使用这个 UNIX 脚本，我可以检查变量 TEST_VAR 是否设置：

```
: ${TEST_VAR:?"Not set or empty."} 
```

我是 unix 新手，所以有人可以解释一下这个命令是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:41:28.427

从[`bash`](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)手册：

> ```
> ${parameter:?word} 
> ```
> 
> 如果 parameter 为 null 或未设置，则 word 的扩展（或如果 word 不存在，则将显示消息）写入标准错误，并且 shell，如果它不是交互式的，则退出。否则，参数的值被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:43:22.607

它是原始的 shell 注释符号（在 '#' 到行尾之前）。很长一段时间以来，Bourne shell 脚本都以冒号作为第一个字符。C Shell 将读取脚本并使用第一个字符来确定它是用于 C Shell（'#' 散列）还是 Bourne shell（':' 冒号）。然后内核开始行动并增加了对“#!/path/to/program”的支持，Bourne shell 得到了“#”注释，冒号约定被搁置了

看看这个类似的问题：

[检查环境变量是否在 Unix shell 脚本中设置的简洁方法是什么？](https://stackoverflow.com/questions/307503/whats-the-best-way-to-check-that-environment-variables-are-set-in-unix-shellscr)

# php - 两个坐标 (x, y) 之间的随机路径

> ID：15687302
> 
> 赞同：0
> 
> 时间：2013-03-28T16:33:45.237
> 
> 标签：php, algorithm

我正在为游戏工作，我需要一种算法。

我有一个网格图，每个单元格有 2 个坐标：X 和 Y。

因此，对于开始，我有一个起始单元格（例如 X=8:Y=10）和一个结束单元格（X=18:Y=15）。

我需要一种算法，它可以找到这两个点之间每个单元格的坐标（X：Y），但路径是随机的，而不是直线。如果可能的话，这些坐标之间的最大单元数。

你有什么想法？

编辑：您可以检查[http://alex.moutonking.com/wordpress/?p=44](http://alex.moutonking.com/wordpress/?p=44)，这是我的两个坐标之间直线的算法，我需要添加一个随机效果..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:43:16.300

您可以获取所有点，然后从该点返回一个随机值

```
$pt1 = array(
        8,
        10
);
$pt2 = array(
        18,
        15
);

$sl = new StraightLine($pt1, $pt2);
echo $sl->rand(true);   // return random points 
```

输出

```
{
    "x": 16,
    "y": 14
} 
```

**获得所有积分**

```
echo $sl; 
```

输出

```
[
    {
        "x": 8,
        "y": 10
    },
    {
        "x": 9,
        "y": 10.5
    },
    {
        "x": 10,
        "y": 11
    },
    {
        "x": 11,
        "y": 11.5
    },
    {
        "x": 12,
        "y": 12
    },
    {
        "x": 13,
        "y": 12.5
    },
    {
        "x": 14,
        "y": 13
    },
    {
        "x": 15,
        "y": 13.5
    },
    {
        "x": 16,
        "y": 14
    },
    {
        "x": 17,
        "y": 14.5
    },
    {
        "x": 18,
        "y": 15
    }
] 
```

**使用的类**

```
class StraightLine implements IteratorAggregate, JsonSerializable {
    private $pt1 = 0, $pt2 = 0;
    private $points = array();

    function __construct($pt1, $pt2) {
        if (count($pt1) !== 2 || count($pt2) !== 2)
            throw new InvalidArgumentException("Expexting only 2 values each");

        $this->pt1 = array_values($pt1);
        $this->pt2 = array_values($pt2);

        $this->parse();
    }

    public function getIterator() {
        return new ArrayIterator($this->points);
    }

    public function jsonSerialize() {
        return json_encode($this->points, 128);
    }

    public function __toString() {
        return $this->jsonSerialize();
    }

    public function rand($encode = false) {
        $k = array_rand($this->points);
        return $encode ? json_encode($this->points[$k], 128) : $this->points[$k];
    }

    private function parse() {
        $m = ($this->pt1[1] - $this->pt2[1]) / ($this->pt1[0] - $this->pt2[0]);
        $b = $this->pt1[1] - $m * $this->pt1[0];
        for($i = $this->pt1[0]; $i <= $this->pt2[0]; $i ++)
            $this->points[] = array(
                    "x" => $i,
                    "y" => $m * $i + $b
            );
    }
} 
```

# python - 如何在 Django 视图中解析 JSON

> ID：15687304
> 
> 赞同：2
> 
> 时间：2013-03-28T16:33:48.323
> 
> 标签：python, json

我将一些 JSON 发布到视图中。我现在想解析数据并将其添加到我的数据库中。

我需要获取属性`name`并`theme`遍历数组`pages`。我的 JSON 如下：

```
{
    "name": "xaAX",
    "logo": "",
    "theme": "b",
    "fullSiteLink": "http://www.hello.com",
    "pages": [
        {
            "id": "1364484811734",
            "name": "Page Name",
            "type": "basic",
            "components": {
                "img": "",
                "text": ""
            }
        },

        {
            "name": "Twitter",
            "type": "twitter",
            "components": {
                "twitter": {
                    "twitter-username": "zzzz"
                }
            }
        }
    ]
} 
```

这是我到目前为止所拥有的：

```
def smartpage_create_ajax(request):

    if request.POST:

         # get stuff and loop over each page?

       return HttpResponse('done') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:35:01.650

python提供[`json`](http://docs.python.org/2/library/json.html)编码/解码json

```
import json
json_dict = json.loads(request.POST['your_json_data'])
json_dict['pages']

[
    {
        "id": "1364484811734",
        "name": "Page Name",
        "type": "basic",
        "components": {
            "img": "",
            "text": ""
        }
    },

    {
        "name": "Twitter",
        "type": "twitter",
        "components": {
            "twitter": {
                "twitter-username": "zzzz"
            }
        }
    },

    }
] 
```

# javascript - 调用函数有问题

> ID：15687310
> 
> 赞同：1
> 
> 时间：2013-03-28T16:33:57.330
> 
> 标签：javascript, jquery, function

我正在尝试在按钮单击事件中调用一个函数。

```
$('#btn_save').button().click(function(){
   executeStatement(); 
});

$.fn.executeStatement = function(){
    alert("Here!!!");
    $.ajax({                                      
      url: 'api.php',                          
      data: sqlStatement,                   

      dataType: 'json',               
      success: function(data)          
      {
        alert("Success!!!");
      } 
    });
  } 
```

问题是它永远不会被调用，因为根据调试器它是未定义的：`Uncaught ReferenceError: executeStatement is not defined`

有人可以给我一个提示有什么问题吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:36:11.487

除非您尝试制作一个 jQuery 插件（我认为您不是？），否则将您的函数声明更改为：

```
function executeStatement(){
   //code here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:40:44.017

只是为了详细说明前面的答案，$.fn 有点像 jquery 的命名空间。任何以 $ 开头的东西。是 jquery 的一部分。您实际上可以通过向 $.fn 添加函数来向 jquery 添加功能，但这可能不是您想要的。

一开始我也觉得这很令人困惑，所以我想我会尽量弄清楚。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T16:40:49.610

Curt 的回答是完全正确的。但我想我会添加它。

```
function executeStatement(){} 
```

这称为函数声明，在这种情况下可以使用。

```
var executeStatement = function(){}; 
```

这称为函数表达式，在这种情况下也可以使用。

# if-statement - 如何在一个 HTML 中运行多个版本的 Jquery

> ID：15687311
> 
> 赞同：1
> 
> 时间：2013-03-28T16:33:59.727
> 
> 标签：if-statement, multiple-instances, jquery

我想知道是否有人可以告诉我是否可以在一个 html 文件中运行多个版本的 jquery？IE

我有 6 个 div，每个潜水包含一个不同的 jquery 插件。第一个插件在最新的 jquery 上运行。第二个由旧版本提供支持，依此类推。

我试图将所有这些实现到一个 html 中，但是一旦我在下面实现脚本 2，脚本 1，那么 #1 就不再工作了，但是 #2 可以。一旦我在#2 下实现#3，那么#3 就会起作用，上面的一切都会中断。

有没有具体的方法可以做到这一点？我曾尝试应用 noConflict 代码，但随后我分配给它的脚本停止工作。除非我做错了。

我有关于使用 if 语句说，如果 var=plugin 1 被点击，取消所有其他 jquery 并且只为该特定插件播放 jquery。等等所有其他插件。但我不确定这是否可行。

我还考虑过使用单独的 $(document).ready(){}; 对于每个插件，但再次不确定这是否可行。

有谁知道我该如何解决这个问题？在过去的 3 天三夜里，我一直在与这只野兽作战，我将永远欠你的债。

ps：我没有提供任何代码，因为它太多了，而且到处都是。如果你愿意，我可以。

谢谢

* * *

```
<!DOCTYPE html>
<html>
<head>

<!-- jQuery -->
<script src="jquery191.js"></script>

<!-- easing -->
<script src="js/jquery.easing.1.3.js"></script>
<!-- liteAccordion js -->
<script src="js/liteaccordion.jquery.js"></script>
<script src="js/datepicker.js"></script>
<script ></script>
<script ></script>
<script ></script>
<script ></script>

<!-- liteAccordion css -->
<link href="css/liteaccordion.css" rel="stylesheet" /> 

<!-- liteAccordion js -->
<script type="text/javascript"> 
    $(document).ready(function() { 

     $('#div1').liteAccordion({
                onTriggerSlide : function() {
                    this.find('figcaption').fadeOut();
                },
                onSlideAnimComplete : function() {
                    this.find('figcaption').fadeIn();
                },
                autoPlay : true,
                pauseOnHover : true,
                theme : 'stitch',
                rounded : true,
                enumerateSlides : true
        }).find('figcaption:first').show();

 <!-- date picker js -->     
        $('#trip input#leavedate, #trip input#returndate').datepicker({ dateFormat: 'D, M d, yy', showOn: 'button', buttonImage: 'calendar.gif', buttonImageOnly: true }); // format: Thurs, Jan 31, 2008, only show when the user clicks the calendar

    }); 
  </script> 

  // datepicker

  <link rel="stylesheet" href="ui.datepicker.css"/>
    <style type="text/css">
    body { font-family: verdana, arial, sans-serif; color: white; font-size: 0.8em; }
    #trip{ background-color: black; width: 500px;}
    #trip fieldset { border-width: 1px; width: 470px; }
    #trip .fields { padding: 25px; margin-bottom: 20px; }
    #trip div { clear: both; }
    #trip label { float: left; width: 165px; }
    #trip input { float: left; width: 200px; }
    #trip .ui-datepicker-trigger { float: left; width: 16px; }
    </style>

  // datepicker

<script src="jq.js"></script>   
<script type="text/javascript">
    var jQuery_1_2_6 = $.noConflict(true);
    </script>   

<script language="JavaScript" src="jq.date.js"></script>
<script language="JavaScript">

</script>

// Style switch

<link rel="stylesheet" type="text/css" href="styles1.css" title="styles1" media="screen" />
<link rel="alternate stylesheet" type="text/css" href="styles2.css" title="styles2" media="screen" />
<link rel="alternate stylesheet" type="text/css" href="styles3.css" title="styles3" media="screen" />

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="styleswitch.js"></script>
<script src="/mint/?js" type="text/javascript"></script>

</head>
<body>
    <div id="div1">
            <ol>
                <li>
                    <h2><span>Slide One</span></h2>
                    <div><p><img src="img-one/1.jpg">HELLO HELLOHELLOHELLOHELLO</p></div>
                </li>
                <li>
                    <h2><span>Slide Two</span></h2>
                    <div></div>
                </li>
                <li>
                    <h2><span>Slide Three</span></h2>
                    <div></div>
                </li>
                <li>
                    <h2><span>Slide Four</span></h2>
                    <div></div>
                </li>
                <li>
                    <h2><span>Slide Five</span></h2>
                    <div></div>
                </li>
            </ol>
            <noscript>
                <p>Please enable JavaScript to get the full experience.</p>
            </noscript>
    </div>

    <br><br>
    <!-- Date Picker -->
    <div id="div2">
        <form id="trip" action="#" >
            <fieldset>
                <legend>Trip Length</legend>
                    <div class="fields">
                        <div><label for="leavedate">Departure Date:</label> <input type="text" id="leavedate" name="leavedate"/></div>
                        <div><label for="returndate">Return Date:</label> <input type="text" id="returndate" name="returndate"/></div>
                    </div>

            </fieldset>

        </form>
    </div>
    <br><br><br><br>

    <!-- Style Switcher -->
    <div>
    <h1>Stylesheet switcher using jQuery</h1>
        <p>This is a simple example of my stylesheet switcher which is very simple thanks to the power of <a href="http://www.jquery.com/">jQuery</a>.</p>
        <p><strong>Update 25/08/2006:</strong> Updated to work with persistant stylesheets and new version of jQuery (r226 from SVN) [thanks Andrea]</p>
        <p><strong>Update 20/08/2006:</strong> Updated to work with new version of jQuery (r200 from SVN) ["*=style" replaced with "=*style*"]</p>
        <p>
            Currently active stylesheet:
            <span id="st1">styles1</span>
            <span id="st2">styles2</span>
            <span id="st3">styles3</span>
        </p>
        <p>Choose a different stylesheet:</p>
        <ul>
            <li><a href="serversideSwitch.html?style=style1" rel="styles1" class="styleswitch">styles1</a></li>
            <li><a href="serversideSwitch.html?style=style2" rel="styles2" class="styleswitch">styles2</a></li>
            <li><a href="serversideSwitch.html?style=style3" rel="styles3" class="styleswitch">styles3</a></li>

        </ul>
        <p>Please view source to see how it works or see the <a href="http://www.kelvinluck.com/article/switch-stylesheets-with-jquery">full article</a> about this script for more information. You can download the relevant Javascript here: <a href="styleswitch.js">styleswitch.js</a>, <a href="jquery.js">jquery.js</a></p>

    </div>

    <!-- FOUR -->

    <div>

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:37:57.607

它应该很简单：

```
<script type='text/javascript' src='js/jquery.1.0.0.js'></script>  
<script type='text/jvascript'>
  var $jq1 = jQuery.noConflict();
</script>

<script type='text/javascript' src='js/jquery.2.0.0.js'></script>  
<script type='text/jvascript'>
  var $jq2 = jQuery.noConflict();
</script>

<script type='text/javascript' src='js/jquery.3.0.0.js'></script>  
<script type='text/jvascript'>
  $(document).ready(function() {
    console.log('constructed with jQuery 3.0.0');
  });
</script> 
```

但是，您必须确保正确的脚本在正确的范围内，通常您会执行以下操作：

```
$('#id').plugin(); 
```

这必须是，例如：

```
$jq1('#id').plugin(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:37:45.417

[这是更改 jQuery 命名空间的示例](https://stackoverflow.com/questions/1535691/how-to-change-namespace-of-jquery)。您可以让旧版本在不同的命名空间上运行，以避免冲突和混乱。

# java - Java Robot 类鼠标移动到特定像素的位置（鼠标单击颜色）

> ID：15687313
> 
> 赞同：2
> 
> 时间：2013-03-28T16:34:12.337
> 
> 标签：java, colors, click, position, awtrobot

如何找到坐标变化的颜色被识别后需要点击的位置。

程序的目的是完成游戏中的任务，需要点击不同的颜色，这些颜色并不总是在相同的位置。

代码当前在执行程序 5 秒后获取鼠标坐标的颜色

* * *

```
public class RobotColorClick 
{

    public RobotColorClick () throws AWTException, IOException, InterruptedException 
    {
        Robot robot = new Robot();

        //Delay 5 seconds
        robot.delay(5000);        

        //Gets color (value of red,green,blue) from the mouse position after 5 seconds 
        Color color = robot.getPixelColor( MouseInfo.getPointerInfo().getLocation().x 
                , MouseInfo.getPointerInfo().getLocation().y);

        //Delay 3 seconds
        robot.delay(3000);

        //Mouse moves to X and Y then right click
        //Problem! How to set X and Y to position color coordinates, position will change
        robot.mouseMove(x, y);
        robot.mousePress(InputEvent.BUTTON1_MASK);
        robot.mouseRelease(InputEvent.BUTTON1_MASK);

    }

    public static void main(String[] args) throws AWTException, IOException, 
                InterruptedException 
    {
        new RobotColorClick ();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:41:12.457

您很可能需要拍摄一个屏幕截图图像，然后从原始位置螺旋出来（假设“颜色”是一条连续的路径而不是四处跳动），将该像素的颜色与您正在寻找的颜色进行比较。一旦确定了，`mouseMove(newX, newY)`然后执行`mousePress()`/`mouseRelease()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-18T19:26:04.070

如果颜色正在继续路径而不是跳跃， [请阅读 Kevin Mangold 的答案](https://stackoverflow.com/a/15687454/11627616)，否则如果它只是出现在任何地方的颜色，我认为你有 2 个选项（如果背景是恒定颜色）：

**第一个：** 您可以对其进行屏幕截图迭代并获取任何出现颜色（或特定颜色）的坐标，然后使用 Robot lib 按下它，[这可能会有所帮助](https://stackoverflow.com/questions/7995495/grab-x-y-coordinates-for-a-given-pixel-rgb) [，并且可以用于截取屏幕截图](http://www.javatechblog.com/java/how-to-take-screenshot-programmatically-in-java/)

**第二个：**如果您不想截屏，您可以使用机器人库通过 2 个嵌套的 for 循环遍历所有屏幕像素来遍历您的屏幕，[这可能会有所帮助](https://www.geeksforgeeks.org/java-robot-class-get-pixel-color-given-point/)

***如果***背景图像不是恒定的，您可以截取屏幕截图并将其与上一个进行比较，使用机器人库来按下差异。

**额外**我之前在某处阅读过使用机器人库按下按钮时，最好这样做 `robot.mousePress(InputEvent.BUTTON1_MASK); robot.delay(1); robot.mouseRelease(InputEvent.BUTTON1_MASK);` 而不是这样做

```
robot.mousePress(InputEvent.BUTTON1_MASK);
robot.mouseRelease(InputEvent.BUTTON1_MASK); 
```

**额外的东西**，你可以从你的软件中读取游戏内存并获得你想要的颜色坐标

# assembly - i386 实模式 - 从软盘加载

> ID：15687318
> 
> 赞同：2
> 
> 时间：2013-03-28T16:34:24.573
> 
> 标签：assembly, x86, nasm, real-mode, floppy

我正在接近 x86 实模式编码，我在这里找到了一些示例代码：[http ://www.nondot.org/sabre/os/files/Booting/nasmBoot.txt](http://www.nondot.org/sabre/os/files/Booting/nasmBoot.txt)

该文章中的第三个示例使用实模式下的 BIOS 调用将软盘的几个扇区加载到内存中，然后跳转到它们。它是一个简单的引导加载程序。它从第 2 个扇区加载 5 个扇区。在第二个扇区（第一个扇区的 512 字节之后），有一些用于打印一些文本的指令。

好吧，我编译了它并尝试了二进制文件，但文本没有打印出来。你能重现这个功能障碍并告诉我如何解决它吗？

我感谢您的帮助，并为我的问题平庸表示歉意。（但我不知道哪里出了问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:06:23.343

如果使用 qemu，则需要将图像填充为扇区大小的整数倍。

在 image.asm 的末尾添加：

```
times 512*2-($-$$) db 0 
```

并组装和运行：

```
nasm -f bin -o image.bin image.asm
qemu-system-i386 -fda image.bin 
```

使用另一个模拟器，您可能必须填充到 (1+5)*512 的总长度，甚至是软盘的全长（1474560 字节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:45:06.177

我可以立即告诉的一件事是该代码不能确保堆栈不在附近`1000h:0000`。

# android - onActivityResult 被立即调用

> ID：15687322
> 
> 赞同：5
> 
> 时间：2013-03-28T16:34:47.993
> 
> 标签：android

我正在使用按钮处理程序的 startActivityForResult() 启动一个活动，并且我的 onActivityResult() 被**立即**调用，甚至在目标活动的 onCreate() 被击中之前。

```
public void onGraphNext (View target) {
    Intent i = new Intent(this, AddCommentActivity.class);
    startActivityForResult(i,6);    // 6 is arbitrary request code               
} 
```

. . .

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent returnData) {
   if  ( (resultCode == RESULT_OK) && (requestCode == 6) ) {
   Bundle extras = returnData.getExtras();
   comment = extras.getString("comment");
     }
} 
```

返回的结果代码为 0，请求代码为 6。在 StackOverflow 的其他地方，我看到有人报告此问题，解决方案是不在清单中的 launchMode 使用 singeInstance。但我使用的是标准。. .

```
<activity android:name="AddCommentActivity"
          android:configChanges="orientation"
          android:screenOrientation="portrait"
          android:launchMode="standard"></activity> 
```

提前感谢您的任何见解！

**编辑：** 我做了一个简单的测试程序，当调用者（“启动器”） - 带有 onActivityResult 的活动 - 是一个单一实例并且被调用的活动（“启动者”）是标准时，我可以可靠地重现问题。IE，

```
<activity android:name="Launcher"
          android:screenOrientation="portrait"
          android:launchMode="singleInstance"></activity> 

<activity android:name="Launchee"
          android:screenOrientation="portrait"
          android:launchMode="standard"></activity> 
```

这对我来说是个问题，因为在真正的应用程序中，由于其他原因，被调用的必须是单个实例，但它希望有按钮来启动其他活动以请求用户输入。如果我不能使用 startActivityForResult 怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-18T19:11:14.243

`startActivityForResult()`如果正在启动的活动与启动它的活动不在同一任务中运行，则您无法使用。这意味着这两个活动都不能拥有`launchMode="singleInstance"`. 如果您要求这 2 个活动在不同的任务中运行，那么您需要使用不同的机制。sorta-kinda的[文档暗示了这一点：`startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)

> “例如，如果您正在启动的活动使用 singleTask 启动模式，它将不会在您的任务中运行，因此您将立即收到取消结果。”

您可以做的是简单地使用启动活动`startActivity()`并让被调用的活动调用`startActivity()`返回到您的活动，并根据需要发送回数据作为`Intent`它使用的额外内容。

但是，您可能会考虑是否真的需要这些特殊的启动模式。通常，它们仅在主屏幕更换和其他非常特殊的应用程序中是必需的。大多数使用`singleInstance`或`singleTask`启动模式的开发人员都在错误地使用它们。

# android - 在android中绘制垂直线

> ID：15687329
> 
> 赞同：4
> 
> 时间：2013-03-28T16:35:19.540
> 
> 标签：android

我尝试在 android 中绘制垂直线。

```
DrawView drawView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    drawView = new DrawView(this);
    setContentView(drawView);

}

public class DrawView extends View {
    Paint paint = new Paint();

    public DrawView(Context context) {
        super(context);
        paint.setColor(Color.RED);
    }

    @Override
    public void onDraw(Canvas canvas) {
            canvas.drawLine(0, 100, 0, 0, paint);

    }

} 
```

这仅画一条线。我想要在整个屏幕上绘制这条线。我怎样才能做到这一点？它必须在屏幕上垂直绘制。它现在垂直绘制，但只有一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:00:06.680

到目前为止，从您想要的用例来看，我认为您没有任何理由为此使用自定义视图。您可以设置启用重复的自定义背景：

**res/drawable/MyBackground.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/lines_image"
    android:tileMode="repeat" /> 
```

然后为您的视图设置背景：

**res/layout/whatever.xml**

```
<View
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/MyBackground" /> 
```

或者

```
myView.setBackgroundResource(R.drawable.MyBackground); 
```

lines_image.png 应该是一个 20 像素（或者你想要的间距）宽的图像，你的红线在右边。

这是 UI 开发的一个重要概念。当一个简单的图像解决方案就足够时，不要在代码中做复杂的事情。

**如果您绝对**必须**在代码中执行此操作，**那么您只需循环绘制画布宽度即可。

```
private static final int LINE_SPACING = 20;

@Override
public void onDraw(Canvas canvas) {
    for (int x = 0; x < canvas.getWidth(); x += LINE_SPACING) {
        canvas.drawLine(x, 0, x, canvas.getHeight(), paint);
    }
} 
```

# iphone - 用于接近检测 iOS 的蓝牙 LE RSSI

> ID：15687332
> 
> 赞同：33
> 
> 时间：2013-03-28T16:35:21.623
> 
> 标签：iphone, ios, ipad, core-bluetooth, bluetooth-lowenergy

我将从这个问题开始。

BTLE RSSI 是指示两个设备彼此接近与否的好方法吗？它是否仅适用于 fobs 等小型设备？

**问题：**

我目前正在考虑制作一个使用 BTLE 并允许基于接近度的连接的应用程序。在这方面，它很像苹果在 Advanced Core Bluetooth 主题演讲中展示的演示应用程序（当两个设备几乎接触时，它们就会连接）。

据我了解，当中央发现外围设备时，接近度是根据 RSSI 值确定的。然而，当我用两台 iPad 尝试这个时，信号似乎太强了，因为它与设备的接近度没有太大的相关性，所以它也太不一致，无法在附近进行准确的刺伤。

我已经尝试过 Apple 示例代码，这与设备的相似之处在于，这些设备根本不必靠近，信息就可以从一个设备传递到另一个设备。

如果只有一种方法可以降低外围设备广告的信号强度......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-10T10:22:51.463

马修·格里芬的经历与我相匹配。然而——当我们可以测量一段相当长的时间时，有两件事帮助我们更好地校准它。

我们确实必须在天线方向和 IMU 上包裹一个简单的（卡尔曼）滤波器才能获得粗略的运行评论 - 这不是 CPU 或电池灯。

*   使用 IMU，您可以清楚地了解行进的距离/方向——如果这是在很短的时间内——我们假设另一“边”是静止的。这有助于获得“当前”方向和“校准当前环境噪声”的值。
*   同样 - 对旋转/位置变化做同样的事情。

我们发现，一般来说，重新定位设备是获得方向的更好方法。并且该距离仅在“移动”校准后的大约 30 到 600 秒内可靠，并且只有在设备没有过度旋转的情况下。在实践中，曾经需要一些 4-5 个“其他”设备；理想情况下不要太移动，以保持自己的动态校准。

然而，反过来是相当可靠的 - 即我们知道什么时候不测量。最终结果是人们可以很好地确定诸如“在键盘上”和“重新定位”/通过特定的门/开口或方向移开之类的事情。同样通过在房间中随机跳舞来测量场地；改变方向很多 - 一旦接收器天线波瓣在静止期后得到一定程度的解决，效果就会很好。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-10T17:12:01.287

您对 RSSI 的疯狂和随机跳跃是完全正确的。您应该每两秒检索一次 RSSI 值（再快一点，就会出现一堆错误）。在向用户声明您的大致范围之前，丢弃超过 ~-40 分贝峰值的 RSSI 值并使用过去值的聚合。

至于您的以下陈述，您很幸运。

> 如果只有一种方法可以降低外围设备广告的信号强度......

您正在寻找的服务称为[TX Power Service](http://developer.bluetooth.org/TechnologyOverview/Pages/TPS.aspx)。在外围设备上实施此服务将允许您降低设备的传输功率。这样，您可以缩小广告数据可见的范围。但是很遗憾，我们无法在 iOS 设备上访问此服务。但是，如果您正在为 BLE 外围设备编写自己的固件，这就是您想要的服务。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-04T20:56:32.587

上周我一直在严格处理 RSSI，尝试使用 Wifi 和蓝牙 LE 传感器进行位置三角测量和距离转换。

不幸的是，我发现 RSSI 过于挑剔且不可靠，无法始终用于确定距离。理论上，RSSI 和距离的表现符合平方反比定律（距离加倍，RSSI 会下降固定的分贝数），但实际上 RSSI 会受到天气等不可控因素的影响（干燥天气允许 RF场更好地传播）和障碍物（从一个传感器到另一个传感器的路径中的任何金属物体或人都会导致衰减，并且靠近其中一个传感器定位的任何金属物体都会导致信号强度增益）。

有办法试图弥补这一点。[这篇论文](http://www.intechopen.com/books/emerging-communications-for-wireless-sensor-networks/indoor-location-tracking-using-received-signal-strength-indicator)是我读过的关于如何获得准确结果的最佳论文之一，但最重要的是，除非您只是想大致了解设备的位置，否则这是一种不可靠的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T14:56:22.187

如果我理解得很好，您正在尝试实现与 WWDC 演示中看到的功能以及[Bump](https://bu.mp/)等应用程序实现的功能类似的功能。对于那个 RSSI 就足够了。测试适当的阈值（例如>-30），你会没事的。

# hibernate - 为什么没有实体信息hibernate hql不能直接获取关联表（可嵌入bean）信息

> ID：15687335
> 
> 赞同：0
> 
> 时间：2013-03-28T16:35:29.233
> 
> 标签：hibernate, hql

我有一个联想，就这么简单：人与人之间的友谊联想；

```
@JoinTable(name = "friendship", joinColumns = @JoinColumn(name = "people1_id"))

@MapKeyManyToMany(targetEntity = People.class, joinColumns = @JoinColumn(name = "people2_id"))
@Column(name = "a_value")
public Map<People, Friendship> getFriendship() {
    return friendshipInfos;
}

@embeddable
class Friendship {
 Long years ;
} 
```

桌子 ：

```
friendship {
  people1_id bigint(20) NOT NULL;
  people2_id bigint(20) NOT NULL;
  years  tinyint(3) NOT NULL;

} 
```

我如何使用 hql 直接搜索友谊信息，我不需要人员信息；使用 sql 我知道：

```
select count(*) from friendship fs where  fs.year >2 ; 
```

但是 hql 如何获得可嵌入的 bean 呢？我用

```
 select fs from  Friendship fs where fs.year >2; 
```

但抛出异常

```
exception:org.hibernate.hql.ast.QuerySyntaxException: Friendship  is not mapped 
```

# android - Android 应用的初始活动不是启动器指定的活动，当使用返回按钮重新进入应用时

> ID：15687338
> 
> 赞同：0
> 
> 时间：2013-03-28T16:35:41.140
> 
> 标签：android, android-activity, back, launch

我在最近的列表中遇到了类似的问题，因为似乎有少数情况下应用程序将被完全销毁，但其他一些进程将从正在使用的最后一个活动启动应用程序。由于我的应用程序的状态建立在几个指定的活动上，我需要防止这种情况（即来自 onCreate() 的空引用）。

不检查状态是我所有的 onCreate() 函数有没有办法防止这种情况？

此外，除了启动器，最近，来自其他应用程序的后退按钮 - 如果我没有授予清单权限以明确启动它，是否还有更多条件可以启动我的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:12:44.730

如果我理解正确，您在活动 B 中进行了初始化，这些初始化依赖于活动 A 已将它们传入。如果意图首先启动活动 B，但它没有处于活动状态，或者首先由 A 启动，您的活动将崩溃。

我能想出的最简单的解决方案是让您的活动 A（我假设您的主要活动）成为您希望处理的所有意图的广播侦听器，并根据意图操作，分派给适当的子活动（B、C 等） ）。这样，活动 A 会完成所有初始化，您仍然可以启动适当的活动来处理您想要的原始意图。

或者。如果您检测到您的子活动处于无效状态，您可以将初始化放入您的所有活动扩展的父活动中。这样，如果活动是新的启动，您应该能够正确初始化。我不是这个的粉丝，我更喜欢确保我的活动是依赖注入适当的数据。

# python - 在 `range(x)` 循环中使用 `for`

> ID：15687339
> 
> 赞同：1
> 
> 时间：2013-03-28T16:35:47.373
> 
> 标签：python, python-2.7

两个代码块不应该打印相似的结果吗？为什么每次到达内部for语句时都会重新评估内部循环内部的范围函数，而外部循环中的范围函数只评估一次？

```
x = 4
for j in range(x)
   for i in range(x)
       print i
       x = 2 
```

结果
0
1
2
3
0
1
0
1
0
1

我知道打印的前 4 个整数 ( 0 - 3) 是 j in range(x): 代码的结果，但为什么还要打印以下内容？
0
1
0
1
0
1
代码

```
x = 4
for j in range(x):
    print i
    x = 5 
```

打印
0
1
2
3

IDLE 中的附加信息 Python 2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:39:42.623

函数`range(x)`产生一个列表`[0,1,2,3,4]`。在`for`循环中，您遍历此列表。

您的代码相当于：

```
for j in [0,1,2,3]:
    for i in [0,1,2,3]:
        print i
    for i in [0,1]:
        print i
    for i in [0,1]:
        print i
    for i in [0,1]:
        print i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:40:59.277

我只能通过遍历循环的迭代来解释，所以这里是：

```
x = 4
for j in range(x)
   for i in range(x)
       print i
       x = 2 
```

第一次通过。

```
x = 4
for j in [0, 1, 2, 3]
    for i in range [0, 1, 2, 3]
        print i
        x = 2 
```

印刷

```
0
1
2
3 
```

现在 x 设置为 2，但外部循环范围已经执行，因此不会重新计算。

代码现在变为：

```
for j in [0, 1, 2, 3]:
    for i in [0, 1]:
        print i
        x = 2 
```

印刷

```
0
1 
```

这种情况又持续了两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:42:09.983

range(x) 只计算一次，即循环开始时，这就是为什么在循环内修改 x 无效。

但是，在第一个代码时钟中，您在内部将 x 更改为 2，因此下一次执行内部循环时，范围仅给出 (0,1)。

编辑：您的第一个代码块相当于

```
x = 5
for i in range(x)
    print i
    x = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-08T01:17:59.017

这是我的看法：

每次外循环迭代都执行内循环

```
x = 4
j = 0
for i in range (x):
    print(i)
    x = 2
j = 1
for i in range(x) # this x is no longer 4 but it is 2
    print(i)
    x = 2
j = 2
for i in range (x): # this x is, of course, 2
    print(i)
    x = 2
j = 3
for i in range (x): # this x is, of course, 2
    print(i)
    x = 2 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-01-07T23:05:30.440

j 不打印，在“ for i in range(x):”之前插入“ print('xx', j, 'oo') ”

然后更改为“打印（'xx'，x，'oo'）

或将 'for j in range(x):' 更改为 'for j in range(225,200,-5):' 后跟 'print(j)' before 'for i in range(x):'

# c# - 在 Mono (Linux) 上为当前线程设置处理器亲和性

> ID：15687342
> 
> 赞同：3
> 
> 时间：2013-03-28T16:35:51.987
> 
> 标签：c#, linux, mono, affinity

我正在编写一个自定义任务调度程序，我想知道是否有任何方法可以为 Mono（在 Linux 上运行）上的当前线程设置处理器亲和性。

[对于在 Windows 上运行的 .NET 运行时，我已经通过遵循 Lenard Gunda 的Running .NET threads on selected processor cores](http://rebuildall.umbraworks.net/2010/03/08/Running_NET_threads_on_selected_processor_cores)文章设法让它工作；然而，他的方法在 Mono（和 Linux）上失败了，因为：

1.  它需要`GetCurrentThreadId`在`Kernel32.dll`库中调用 P/Invoke。
2.  该[`Process.Threads`](http://msdn.microsoft.com/en-gb/library/system.diagnostics.process.threads.aspx)属性当前在 Mono 上返回一个空集合。

有人请有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T14:00:56.107

[lupus](https://stackoverflow.com/a/15699745/1149773)的答案是在正确的轨道上，但我花了一些进一步的研究来实现它（例如[P/Invoke 签名`sched_setaffinity`](https://stackoverflow.com/q/17118251/1149773)和[解决方案`libc.so.6`](https://stackoverflow.com/a/15900232/1149773)）。如果有人需要，这是工作代码（不包括错误处理）：

```
[DllImport("libc.so.6", SetLastError=true)]
private static extern int sched_setaffinity(int pid, IntPtr cpusetsize, 
                                            ref ulong cpuset);

private static void SetAffinity(int processorID)
{
    ulong processorMask = 1UL << processorID;
    sched_setaffinity(0, new IntPtr(sizeof(ulong)), ref processorMask);
} 
```

**编辑**：上述签名对我的实验效果很好，但请参阅[David Heffernan 的回答](https://stackoverflow.com/a/21206833/1149773)（在我的另一个问题下）以获得建议的更正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:22:07.333

请注意，您无法真正控制任务何时运行，这取决于内核。无论如何，在 Linux 上，您需要 P/Invoke 到 sched_setaffinity() 以将线程绑定到特定的 cpu。

有关接口，请参见 man sched_setaffinity。

# javascript - 如何将文件浏览器过滤到 IE 上的特定扩展名？

> ID：15687344
> 
> 赞同：0
> 
> 时间：2013-03-28T16:35:55.173
> 
> 标签：javascript, jquery, html

我想创建上传文件操作，所以我输入了以下代码：

```
<img src="[@spring.url '/images/buttons/upload.jpg'/]" onclick="uploadFile()" title="Upload File" />

//I want to do this without showing the input file
<div style="display: none;">
    <input id="inputFile" type="file" name="upload" accept=".txt,.csv,.zip" onchange="uploadListener();">
</div> 
```

图像标签与文件无关，只是我不想显示输入文件，所以我使用图像来调用它。

和这样的js：

```
function uploadFile(){
       document.getElementById('inputFile').click();

   }

   function uploadListener(){

           alert($('#inputFile').val());
           $.ajax({
               type: "POST",
               url: "/panda/assay/designability/uploadFile.htm",
               data: {file: $('#inputFile').val()} ,
               success: function(response){

               }
           });

   } 
```

这从来没有创建自定义过滤器，我发现 IE 不支持“接受”属性，不幸的是我必须使用它。有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:39:16.343

你必须在你的服务器上检查这个。作为最佳实践，尤其是文件上传，无论如何您都应该在服务器端进行一些检查，以避免恶意脚本注入/执行。确实很容易更新 HTML/javascript 客户端以便能够上传任何类型的文件...我还建议将您的文件存储在您的 webroot 之外，但这与这个问题无关...

# git - git cherry pick - 提交范围并排除其中的一些

> ID：15687346
> 
> 赞同：32
> 
> 时间：2013-03-28T16:35:58.757
> 
> 标签：git, github, gerrit, repository

我通常使用以下 git 命令来挑选一系列 gerrits ..不，我如何排除介于两者之间的几个 gerrits .. 可以修改下面的命令，还是有一个我们可以选择一系列 gerrits 并排除我们的想..

```
git cherrypick fromgerritSHA1..togerritSHA1 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-28T17:58:49.117

您可以指定多个范围：

```
git cherry-pick A..B C..D E..F 
```

甚至是特定的提交：

```
git cherry-pick A B C D E F 
```

如果您有很多要排除的提交，那么做这样的事情可能会更容易（有点像穷人的`git rebase -i`for `git cherry-pick`）：

```
git log --pretty=oneline A..F | tac > tempfile.txt
< edit tempfile.txt to remove the commits you don't want >
git cherry-pick $(awk '{print $1}' tempfile.txt) 
```

编辑：向`tac`日志添加了建议，因为`git cherry-pick`希望以与生成的顺序相反的顺序查看提交`git log`（也可以使用`git log --reverse ...`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:11:40.607

不确定您是否可以将单个提交拉出范围`abcdef..123456`。Git 范围语法在[gitrevisions](https://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html)的文档中进行了解释，它看起来不像那样工作。不过，还有另一种方法可以仅使用范围哈希和要排除的哈希来获得所需的内容。

`fromgerritSHA1..togerritSHA1`假设您不想要的范围内的两个哈希是`skiphash1`and `skiphash2`，请尝试：

```
$ git rev-list --reverse fromgerritSHA1..togerritSHA1 | grep -vE 'skiphash1|skiphash2' | git cherry-pick --stdin 
```

`git rev-list --reverse fromgerritSHA1..togerritSHA1`打印出 range 中的提交哈希`fromgerritSHA1..togerritSHA1`，一次一行。`--reverse`需要以正确的顺序列出cherry-pick的哈希值。

`grep -vE 'skiphash1|skiphash2'`从列表中删除您不想要的两个哈希。您可以添加更多要跳过的哈希，只需将它们用`|`.

最后，仅将您想要的提交哈希列表传递给`git cherry-pick --stdin`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-09T12:27:40.697

如果您在像下面这样的樱桃挑选过程中遇到问题，请尝试**选择**比您原来的尝试更早的开始哈希值。

```
git cherry-pick a005efa..1ece685
[temp_4454kjerer3233 3520dd4] 3\. xxx.
 1 file changed, 9 insertions(+)
[temp_4454kjerer3233 791cec5] 4\. xxx.
 3 files changed, 19 insertions(+)
[temp_4454kjerer3233 2e95364] 5\. xxx.
 2 files changed, 21 insertions(+)
[temp_4454kjerer3233 59e38b9] 6\. xxx.
 3 files changed, 61 insertions(+)
error: could not apply a3b0c6b... 7\. xxx.
hint: after resolving the conflicts, mark the corrected paths
hint: with 'git add <paths>' or 'git rm <paths>'
hint: and commit the result with 'git commit' 
```

# php - PHP使用字符串作为方法名称调用方法

> ID：15687349
> 
> 赞同：1
> 
> 时间：2013-03-28T16:36:10.810
> 
> 标签：php, methods, reflection

我想在我的 php 类中有一个方法数组，用方法名称索引，这样我就可以做这样的事情：

```
public function executeMethod($methodName){
 $method=$this->methodArray[$methodName];
 $this->$method();
 // or some other way to call a method whose name is stored in variable $methodName
} 
```

我为__call找到了这个：

> 在与尚未声明或在当前范围内不可见的属性或方法交互时调用重载方法

但是，我想在 executeMethod 中使用的方法是可见的。

这样做的正确方法是什么？是否可以？

编辑：我想在executeMethod中获取一个方法名称，然后调用给定名称的方法，并且对方法数组有了一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:40:33.797

您可以使用带有语法的字符串来调用对象方法和属性

```
$method = 'your_method_name_as_string';
$this->$method(); 
```

来自[php 文档](http://php.net/manual/en/functions.variable-functions.php)

```
<?php
class Foo
{
    function Variable()
    {
        $name = 'Bar';
        $this->$name(); // This calls the Bar() method
    }

    function Bar()
    {
        echo "This is Bar";
    }
}

$foo = new Foo();
$funcname = "Variable";
$foo->$funcname();  // This calls $foo->Variable()

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:40:47.907

也许你正在寻找这样的东西：

```
public function executeMethod($methodName) {
    if (isset($this->methodArray[$methodName])) {
        $method = $this->methodArray[$methodName];
        return call_user_func(array($this, $method));
    }
    throw new Exception("There is no such method!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:44:47.763

[匿名函数](http://php.net/manual/en/functions.anonymous.php)在 php 5.3 中可用

我认为您正在尝试做类似的事情

```
$tmp['doo'] = function() { echo "DOO"; };
$tmp['foo'] = function() { echo "FOO"; };
$tmp['goo'] = function() { echo "GOO"; };

$tmp['doo'](); 
```

# mysql - 如果两个键不存在，则插入表中

> ID：15687356
> 
> 赞同：0
> 
> 时间：2013-03-28T16:36:27.850
> 
> 标签：mysql, pdo

我有一个映射 itemId(item.id) 和 tagId(tag.id) 的表。

我正在编写一个需要插入新行的查询，但前提是 itemId 和 tagId 都没有条目。最好的方法是什么？

这是我当前的查询，它尚未检查现有匹配项：

```
// create tag-item maps
$sql = 'INSERT INTO item_tag
      SELECT :itemId AS iid, tag.id AS tid
      FROM tag
      WHERE tag.name=:name';
try{
  $stmt = $db->dbh->prepare($sql);
  for($i = 0; $i < $count; $i++) {
    $data = array(':itemId' => $itemId, ':name' => $tags[$i]);
    $result = $stmt->execute($data);
    if($result !== false) {
      // Do nothing
    }else {
      return false;
    }
  }
  return true;
}catch(PDOException $e) {
 logit($e->getMessage());
 return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:01:24.127

约束将`UNIQUE`是理想的解决方案，并且根据[文档](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)MyISAM 引擎支持它们。

```
ALTER TABLE item_tag ADD CONSTRAINT item_tag_iid_tid_uq UNIQUE (iid, tid); 
```

然后，如果您`INSERT`尝试添加重复的 ( `iid`, `tid`) 对，它将抛出，您可以在`catch`代码中处理它。

如果您不想进行`UNIQUE`约束，则可以在查询中添加“存在”检查`INSERT`：

```
INSERT INTO item_tag
  SELECT :itemId AS iid, tag.id AS tid
  FROM tag
  WHERE tag.name=:name' AND NOT EXISTS (
    SELECT * FROM item_tag WHERE iid=:itemId AND tid=tag.id) 
```

我使用自己的不同名称的表对此进行了测试，因此希望我将其正确“翻译”为您的表/列名称。

# input - Jenkins - 如何与脚本输入交互 - 在运行时

> ID：15687360
> 
> 赞同：1
> 
> 时间：2013-03-28T16:36:40.050
> 
> 标签：input, jenkins, runtime, interactive

我有一个小脚本，它生成两个随机数，将它们相加并提示用户（如果 SUM 是 > 或 < 特定值）——继续与否。

因此，脚本是：

```
bash-3.00$ cat use_random.sh
#!/bin/bash

func ()
{
 a=$RANDOM
 b=$RANDOM
 sum=`expr $a + $b`

 echo A = $a
 echo B = $b
 echo
 echo Sum of A + B is : $sum
}

choice=y;
until [ "$choice" == "n" ];
do
 # call func
 echo ---------------------------------------------; echo;
 func;

 echo Sleeping for 3 seconds...
 sleep 3;
 echo -
 echo "IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'"; echo;
 echo -n "Do you want to continue (y/n)? : "; read choice;
 echo ---------------------------------------------; echo;
done

bash-3.00$ 
```

**和**

**脚本的一些运行 std.output 是**：

```
bash-3.00$ ./use_random.sh
---------------------------------------------

A = 20359
B = 15866

Sum of A + B is : 36225
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : n
---------------------------------------------

bash-3.00$ 
```

bash-3.00$

```
bash-3.00$ ./use_random.sh
---------------------------------------------

A = 18058
B = 20395

Sum of A + B is : 38453
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : n
---------------------------------------------

bash-3.00$ 
```

bash-3.00$ bash-3.00$

```
bash-3.00$ ./use_random.sh
---------------------------------------------

A = 6016
B = 13489

Sum of A + B is : 19505
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : y
---------------------------------------------

---------------------------------------------

A = 25837
B = 3852

Sum of A + B is : 29689
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : y
---------------------------------------------

---------------------------------------------

A = 7565
B = 3220

Sum of A + B is : 10785
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : y
---------------------------------------------

---------------------------------------------

A = 32092
B = 22688

Sum of A + B is : 54780
Sleeping for 3 seconds...
-
IF SUM value is greater than 3500, then press 'n' otherwise, press 'y'

Do you want to continue (y/n)? : n
---------------------------------------------

bash-3.00$ 
```

正如你在上面看到的，当我前 2 次运行脚本时，它给出的 SUM 值小于 3500，所以我按了“n”（这是我的自动化需要的必须用户提示/输入，这里我拿了这个 SUM示例并提示只是放置我的案例），当它小于 3500 时，我按“y”，N 否。直到 SUM 值小于 3500 的次数。

现在，詹金斯怎么能做到这一点？？？

我不能使用参数化构建插件（A 和 B 变量是随机生成的，所以我不希望用户传递它）即，调用脚本时不需要以下技巧：

**回声“输入” | script_or_command**
或
**script_or_command < file_with_input**

其次，用户的继续输入（按 y 或 n）取决于这 2 个随机变量值的总和。用户不知道在最终按“n”进入/退出脚本之前他必须按多少次“y”。换句话说，用户可以提前对输入进行硬编码（因为他的输入取决于运行时）。注意：我不想让 AI 足以使用 SUM 值作为用户输入来做出决策以继续是我想要在 Jenkins 中做的要求。

如果我在 Jenkins 中调用我的脚本“use_random.sh”，有什么想法可以让它工作吗？

千兆AKS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:51:02.710

实际上，当只有少数这样的脚本时，我会同意你的看法。

但是，我有数百个这样的脚本，它们提示用户输入“基于运行时条件”。

例如：当用户说 - 每天以不同的顺序运行某些东西（5 个文件/命令/等）并且这些东西（文件/命令）本质上是随机的，因为 / 用于项目/应用程序。选择继续/运行另一个脚本/ssh 到 1-N 个 ssh 服务器的值取决于这些因素。考虑这种情况：即，我得到 Shell 选择“菜单”选项，其中文件/命令/应用程序可以在 #4 或在接下来的几天它可以在 #13 或 15。因此，取决于操作系统的当前状态或应用程序是我想要弄清楚的，简而言之是：

而不是看到许多其他方式 - 我们可以使用 Jenkins 作业来做到这一点，是否有任何简单/清晰的方式来运行我上面想要的内容（即 Jenkins 在控制台输出窗口中的脚本运行期间提示“用户输入”。 .. - 非常像脚本一样，当我们在 Linux/Unix $ 提示符下运行它时）？
感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:01:49.137

除非您使用某种“AI”，否则您将无法测试这是任何类型的连续测试系统。不过，在您的情况下，这应该相对简单——您需要做的就是编写第二个脚本来调用第一个脚本，提取 SUM 的值（例如使用 grep）并相应地生成要发送到第一个脚本的输入。

# php - 访问 PHP 函数中的全局变量

> ID：15687363
> 
> 赞同：94
> 
> 时间：2013-03-28T16:36:54.180
> 
> 标签：php, scope

根据大多数编程语言的范围规则，我可以访问在它们内部的函数之外定义的变量，但为什么这段代码不起作用？

```
<?php
    $data = 'My data';

    function menugen() {
        echo "[" . $data . "]";
    }

    menugen();
?> 
```

输出是`[]`。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-03-28T16:38:58.500

它不起作用，因为您**必须**声明要访问的全局变量：

```
$data = 'My data';

function menugen() {
    global $data; // <-- Add this line

    echo "[" . $data . "]";
}

menugen(); 
```

否则，您可以将其作为`$GLOBALS['data']`. 请参阅*[变量范围](http://php.net/manual/en/language.variables.scope.php)*。

即使有点离题，我建议您完全避免使用全局变量，而更喜欢作为参数传递。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-28T16:42:03.640

您可以执行以下操作之一：

```
<?php
    $data = 'My data';

    function menugen() {
        global $data;
        echo "[" . $data . "]";
    }

    menugen(); 
```

或者

```
<?php
    $data = 'My data';

    function menugen() {
        echo "[" . $GLOBALS['data'] . "]";
    }

    menugen(); 
```

话虽如此，过度使用全局变量会导致一些糟糕的代码。通常最好传递你需要的东西。例如，您应该将一个句柄传递给数据库并对其进行操作，而不是引用全局数据库对象。这称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。当您实施自动化测试（您应该这样做）时，它会让您的生活变得更轻松。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-02-05T20:32:47.357

另一种方法：

```
<?php

$data = 'My data';

$menugen = function() use ($data) {

    echo "[".$data."]";
};

$menugen(); 
```

**更新 2020-01-13：彼得莫滕森**要求

从 PHP 5.3.0 开始，我们支持可以创建闭包的匿名函数。闭包可以访问在其范围之外创建的变量。

在示例中，闭包能够访问`$data`，因为它是在`use`子句中声明的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-28T16:40:20.683

这是范围的问题。简而言之，应该避免使用全局*变量*：

您要么需要将其作为参数传递：

```
$data = 'My data';

function menugen($data)
{
    echo $data;
} 
```

*或者*将它放在一个类中并访问它

```
class MyClass
{
    private $data = "";

    function menugen()
    {
        echo this->data;
    }

} 
```

另请参阅@MatteoTassinari 答案，因为您可以将其标记为全局以访问它，但通常不需要全局变量，因此重新考虑您的编码是明智的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-27T03:07:44.570

多年来，我一直使用这种格式：

```
<?php
    $data = "Hello";

    function sayHello(){
        echo $GLOBALS["data"];
    }

    sayHello();
?> 
```

我觉得它简单易懂。$GLOBALS 是 PHP 让您引用全局变量的方式。如果您使用过 $_SERVER、$_POST 等，那么您在不知情的情况下引用了一个全局变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-21T02:18:53.713

```
<?php

    $data = 'My data';

    $menugen = function() use ($data) {

        echo "[ $data ]";
    };

    $menugen();
?> 
```

你也可以简化

```
echo "[" . $data . "]" 
```

到

```
echo "[$data]" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-27T20:25:45.690

由于这个原因，PHP 可能会令人沮丧。上面使用的答案`global`对我不起作用，我花了一段时间才弄清楚`use`.

这是对的：

```
$functionName = function($stuff) use ($globalVar) {
 //do stuff
}
$output = $functionName($stuff);
$otherOutput = $functionName($otherStuff); 
```

这是不正确的：

```
function functionName($stuff) use ($globalVar) {
 //do stuff
}
$output = functionName($stuff);
$otherOutput = functionName($otherStuff); 
```

使用您的具体示例：

```
 $data = 'My data';

    $menugen = function() use ($data) {
        echo "[" . $data . "]";
    }

    $menugen(); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-28T16:38:29.800

您需要将变量传递给函数：

```
$data = 'My data';

function menugen($data)
{
    echo $data;
} 
```

# java - 当我从 Play 商店下载我的应用程序时，Google 地图 v2 不会出现

> ID：15687367
> 
> 赞同：1
> 
> 时间：2013-03-28T16:37:00.097
> 
> 标签：java, android, google-maps-android-api-2

我的应用程序运行完美，我使用 eclipse 显示地图，但是当我决定从 Play 商店将它下载到我的手机时，谷歌地图不会出现。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:52:17.957

正如评论中所发布的，您需要一个专门与您的发布密钥相关联的 API 密钥。您在编程时使用的 API 密钥（通过使用调试密钥的调试模式）将不起作用。生成发布密钥后，使用它生成新的 Google Maps API 密钥，并替换现有的。

正如预期的那样，新的在调试时将不起作用 - 如果您需要再次在调试模式下运行您的应用程序，您将需要切换回调试 API 密钥。

# cordova - 移动应用程序架构

> ID：15687368
> 
> 赞同：0
> 
> 时间：2013-03-28T16:37:01.863
> 
> 标签：cordova, mobile, mobile-application

我从来没有写过移动应用程序，现在打算写一个。需要有关相同架构的建议。

让我先简要介绍一下功能：

*   它是一种“常识问答”应用程序。
*   会有不同的类别，每个类别都会有不同的问题。
*   用户可以滚动浏览一个类别中的所有问题（使用 Next 或 Back 按钮），
*   每个问题都有一个“显示答案”按钮，用户想到答案后可以使用该按钮检查相同的答案。

类似于[https://play.google.com/store/apps/details?id=com.programmerworld.HRInterviewQuestionsLite&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wcm9ncmFtbWVyd29ybGQuSFJJbnRlcnZpZXdRdWVzdGlvbnNMaXRlIl0](https://play.google.com/store/apps/details?id=com.programmerworld.HRInterviewQuestionsLite&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wcm9ncmFtbWVyd29ybGQuSFJJbnRlcnZpZXdRdWVzdGlvbnNMaXRlIl0)之类的东西。

其他功能 1\. 应该适用于所有平台（androids、ios、windows mobile 等）因此计划使用phonegap

1.  问答列表应该是可更新的，就像我可以提供具有全新问答的更新，或者更好地回答旧问题或新类别等

2.  Q&A 应该是不可复制的，例如如果有人在他的手机上安装了该应用程序，他应该无法复制 Q&A 列表

3.  问答列表应安全存储在手机上

4.  允许用户为某些问题添加书签，然后仅浏览已添加书签的列表

计划为此使用PhoneGap。我不确定如何“最好”安全有效地存储问答数据，以便我的应用程序也不是很重？？？

我知道两种选择

1) Android SQLLite .. 如果我使用它，我确信它是安全的，并且易于更新，但我不确定 iOS 和其他操作系统该怎么做？是否有跨平台 SQL 引擎？这不会很重吗？我的意思是每个想要使用我的应用程序的用户也需要安装它

2) 我不能将问答存储为加密的 xml 文件吗？这样它应该很容易更新，我应该使用什么算法进行加密？它足够安全吗？任何实现加密算法的跨平台库？

3）那里的专家还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:05:59.007

一个想法是从远程服务器检索问答。您可以制作一个提供 API 的服务器，以便应用程序可以通过该 API 发出 ajax 请求以获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:00:23.087

仍在寻找更多方法，我对用户可以安装一次并在有或没有互联网的任何地方（甚至离线）使用的方法更感兴趣

# ios - tableFooterView 属性不修复表格视图底部的页脚

> ID：15687370
> 
> 赞同：33
> 
> 时间：2013-03-28T16:37:11.643
> 
> 标签：ios, uitableview

我在 viewDidLoad 方法中设置页脚视图：

```
UIView *fView = [[UIView alloc] initWithFrame:CGRectMake(0, 718, 239, 50)];
fView.backgroundColor =[UIColor yellowColor];
self.table.tableFooterView = fView; 
```

不幸的是，页脚没有在`(x,y)`上面指定的指定中绘制，但它与单元格保持一致，因此如果表格视图有 4 个单元格，页脚将在第 5 个单元格中绘制。

我什至尝试了协议方法，`tableView:viewForFooterInSection`

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{

UIView *fView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 239, 50)];
fView.backgroundColor =[UIColor yellowColor];
    return fView;
} 
```

问题没有解决，我确定`tableFooterView`属性应该是表格视图底部的页脚视图，但我不确定我可能在这里遗漏了什么？提前谢谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T16:46:51.073

由于您的目标是让页脚固定在屏幕底部，而不是随表格滚动，因此您不能使用表格视图页脚。事实上，你甚至不能使用`UITableViewController`.

您必须将视图控制器实现为`UIViewController`. 然后，您将自己的表格视图添加为子视图。您还可以将页脚添加为视图控制器视图的子视图，而不是表格视图。确保调整表格视图的大小，使其底部位于页脚视图的顶部。

您将需要使您的视图控制器符合`UITableViewDataSource`和`UITableViewDelegate`协议，并将所有内容连接起来以复制`UITableViewController`.

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-28T16:40:52.893

页脚视图将始终添加到内容的底部。
这意味着节页脚将添加到节的单元格下方，表格页脚视图将添加到所有节的底部 - 无论您在视图中设置的位置如何。

如果您想添加“静态”内容，您应该考虑在表格视图（超级视图）之外添加一个视图 - 如果您使用这是不可能的`UITableViewController`- 或者您使用`[self.table addSubView:view]`并将位置/转换调整为表格视图的`contentOffset`属性`scrollViewDidScroll:`委托方法（`UITableView`是的子类，因此`UIScrollView`您也可以得到它的委托调用），如下代码所示：

```
@implementation YourTableViewController {
    __weak UIView *_staticView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIView *staticView = [[UIView alloc] initWithFrame:CGRectMake(0, self.tableView.bounds.size.height-50, self.tableView.bounds.size.width, 50)];
    staticView.backgroundColor = [UIColor redColor];
    [self.tableView addSubview:staticView];
    _staticView = staticView;
    self.tableView.contentInset = UIEdgeInsetsMake(0, 0, 50, 0);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    _staticView.transform = CGAffineTransformMakeTranslation(0, scrollView.contentOffset.y);
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // this is needed to prevent cells from being displayed above our static view
    [self.tableView bringSubviewToFront:_staticView];
}

... 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-12-31T17:23:35.603

另一种方法是`UITableViewController`在情节提要中使用，并将其作为容器视图嵌入到 UIViewController 中。然后您可以使用自动布局来设置页脚和包含`UITableView`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-21T14:46:08.010

如果您的表视图或表视图控制器被导航控制器包装，请考虑使用导航控制器的 UIToolbar。它会一直粘在底部。

```
[self.navigationController setToolbarHidden:NO]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-24T16:26:38.413

看起来类似于下面的东西效果很好：

```
import PlaygroundSupport
import UIKit

let testVC = UITableViewController(style: .grouped)
testVC.view.frame = CGRect(x: 0, y: 0, width: 400, height: 700)
testVC.view.backgroundColor = .white

class TableViewDataSourceDelegate : NSObject {
    var rows = 2
}

extension TableViewDataSourceDelegate : UITableViewDataSource, UITableViewDelegate {

    func numberOfSections(in tableView: UITableView) -> Int {
        return 1
    }

    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return rows
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = UITableViewCell(style: .default, reuseIdentifier: nil)
        cell.backgroundColor = .red
        return cell
    }

    func tableView(_ tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat {

        let tableViewHeight = tableView.bounds.size.height
        let varticalMargin: CGFloat
        if #available(iOS 11.0, *) {
            varticalMargin = tableView.directionalLayoutMargins.bottom + tableView.directionalLayoutMargins.top
        } else {
            varticalMargin = tableView.layoutMargins.bottom + tableView.layoutMargins.top
        }

        let verticalInset: CGFloat
        if #available(iOS 11.0, *) {
            verticalInset = tableView.adjustedContentInset.bottom + tableView.adjustedContentInset.top
        } else {
            verticalInset = tableView.contentInset.bottom + tableView.contentInset.top
        }
        let tableViewContentHeight = tableView.contentSize.height - varticalMargin

        let height: CGFloat
        if #available(iOS 11.0, *) {
            let verticalSafeAreaInset = tableView.safeAreaInsets.bottom + tableView.safeAreaInsets.top
            height = tableViewHeight - tableViewContentHeight - verticalInset - verticalSafeAreaInset
        } else {
            height = tableViewHeight - tableViewContentHeight - verticalInset
        }

        if (height < 0) {
            return 0
        } else {
            return height
        }
    }

    func tableView(_ tableView: UITableView, viewForFooterInSection section: Int) -> UIView? {
        let extraButtonSpace = UIView()
        extraButtonSpace.backgroundColor = .clear
        return extraButtonSpace
    }

    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        if indexPath.row == 0 {
            tableView.beginUpdates()
            rows += 1
            tableView.insertRows(at: [indexPath], with: .automatic)
            tableView.endUpdates()
        } else if indexPath.row == 1 {
            tableView.beginUpdates()
            rows -= 1
            tableView.deleteRows(at: [indexPath], with: .automatic)
            tableView.endUpdates()
        } else {
            tableView.beginUpdates()
            tableView.endUpdates()
        }
    }
}

let controller = TableViewDataSourceDelegate()
testVC.tableView.delegate = controller
testVC.tableView.dataSource = controller
testVC.tableView.reloadData()

let extraButtonSpace = UIView(frame: CGRect(x: 0, y: 0, width: 400, height: 80))
extraButtonSpace.backgroundColor = .yellow
testVC.tableView.tableFooterView = extraButtonSpace

PlaygroundPage.current.liveView = testVC.view 
```

[![操场上的屏幕](../Images/2ae01aa538628eb98e7b15e0df5aa8cd.png)](https://i.stack.imgur.com/Y5f5J.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-08T05:54:55.397

我能够将标签固定到我的静态 UITableViewController 的底部。不是所有场景的完美解决方案，但可以满足我的简单需求。

```
UIView* v = [[UIView alloc] initWithFrame:self.view.bounds];
CGFloat labelHeight = 30;
CGFloat padding = 5;
UILabel* l = [[UILabel alloc] initWithFrame:CGRectMake(0, v.frame.size.height - labelHeight - padding, self.view.frame.size.width, labelHeight)];
l.text = @"Hello World";
[v addSubview:l];
[self.tableView setBackgroundView:v]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-18T11:44:56.047

如果要使页脚固定在底部，则应创建自定义页脚视图并在 tableView 内容大小发生变化时更改页脚框架：

```
-(void)changeCustomTableFooterYPositionWithTableFrame:(CGRect)tableFrame tableContentSize: (CGSize) tableContentSize {
    CGFloat originalTableViewTopEdgeInset = self.tableView.contentInset.top;
    CGFloat originalTableViewBottomEdgeInset = self.tableView.contentInset.bottom - self.tableFooterView.frame.size.height;

    CGFloat footerViewYPositionByContentSize = tableContentSize.height;
    CGFloat footerViewYPositionByTableSize = tableFrame.size.height - self.tableFooterView.frame.size.height - originalTableViewTopEdgeInset - originalTableViewBottomEdgeInset;
    CGFloat tableFooterViewYPosition = MAX(footerViewYPositionByContentSize, footerViewYPositionByTableSize);

    self.tableFooterView.frame = CGRectMake(self.tableFooterView.frame.origin.x, tableFooterViewYPosition, self.customTableFooterView.frame.size.width, self.customTableFooterView.frame.size.height);
} 
```

要检测 contentSize 何时更改，请将观察者添加到 contentSize：

```
 [self addObserver: self forKeyPath: @"tableView.contentSize" options: NSKeyValueObservingOptionNew + NSKeyValueObservingOptionOld context: ContentSizeContext]; 
```

插入页脚时不要忘记更改 tableView.edgeInsets：

```
self.tableView.contentInset = UIEdgeInsetsMake(self.tableView.contentInset.top, self.tableView.contentInset.left, self.tableView.contentInset.bottom + self.customTableFooterView.frame.size.height, self.tableView.contentInset.right); 
```

您可以在下面的链接中看到继承的类和示例： [TableViewWithFooterAtBottom](https://github.com/basiliusic/UVTableViewWithBottomFooter)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-16T15:38:39.350

您可以使用它根据您拥有的行数使表格看起来更小：

```
 let tblView =  UIView(frame: CGRectZero)
    tableView.tableFooterView = tblView
    tableView.tableFooterView!.hidden = true
    tableView.backgroundColor = UIColor.clearColor() 
```

另一种选择是仅根据您遇到该问题的最小行数来更改索引路径处行的高度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-23T22:21:23.793

以下是此页脚问题的解决方案，当我们不希望页脚一直粘在底部时，AKA。只有当没有足够的行来填满屏幕，或者当用户一直向下滚动屏幕时，它才会停留在底部。

将您的作为子视图添加`self.footerView`到您`self.tableView`的子视图`-viewDidLoad:`或类似的地方，然后设置委托`self.tableView`，将 tableview 的内容插入更新为`self.tableView.contentInset = UIEdgeInsetsMake(0, 0, CGRectGetHeight(self.footerView), 0);`并设置以下方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
  [self updateFooterView];
}

- (void)updateFooterView
{
  CGRect sectionFrame = [self.tableView rectForSection:0];
  CGFloat bottomSpace = self.tableView.contentOffset.y + CGRectGetHeight(self.tableView.frame) - CGRectGetMaxY(sectionFrame);
  CGFloat footerHeight = CGRectGetHeight(self.footerView.frame);
  CGFloat transformY = self.tableView.contentOffset.y + footerHeight - MIN(bottomSpace,footerHeight);

  CGRect footerFrame = self.footerView.frame;
  footerFrame.origin.y = self.tableView.bounds.size.height - footerFrame.size.height + transformY;
  self.footerView.frame = footerFrame;
} 
```

每当您需要更新页脚（即添加新行后）时，只需调用`-updateFooterView`即可

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-02-12T18:22:58.673

我对这个解决方案并不感到非常自豪，但它对我来说到目前为止只使用 IB。如果对您有用，它将使用您的 UITableViewController 的工具栏区域。

1.  创建一个新的临时 UIViewController
2.  将 Toolbar 拖入此 UIViewController
3.  在此工具栏上拖动一个 UIView。为此，我使用了左侧的元素树，这更容易。这将创建一个您将在步骤 5 中移动的 BarButtonItem。
4.  在您的 UITableViewController 上拖动一个 BarButtonItem，这将创建一个工具栏项目部分。
5.  将在步骤 3 中创建的 BarButtonItem 拖到在步骤 4 中创建的工具栏项目部分。
6.  删除 UIViewController 并根据需要编辑 BarButtonItem。

# git - 将远程 git repo 合并到本地 repo 并将结果推送回远程

> ID：15687371
> 
> 赞同：0
> 
> 时间：2013-03-28T16:37:15.540
> 
> 标签：git

我已经阅读了一些关于如何实现这一目标的指南。

我在 master/ 分支下的 git repo 中有一组本地文件。我为要下拉的遥控器添加了一个远程分支。

然后我跑去`git fetch other`把它拉到一个名为`other`.

然后我跑了`git checkout -b zzz other/master`

但我不断收到错误

```
The following untracked working tree files would be overwritten by checkout
errors. 
```

我不能再进一步了。可以借助实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:07:26.350

您在工作树中本地创建了未提交到任何分支的文件（特别是，不包含在您要切换的分支中，因此它们当前真正未被跟踪），但您要切换到的分支包括具有相同名称的文件（但不一定保证是相同甚至相关的内容）。`git`是说它不能正确地检查新分支而不覆盖它看到的其他地方没有保存的东西。

将这些文件移动到其他地方，然后执行`git checkout`，然后将分支中的这些文件的版本与您的副本进行比较，以查看您需要对它们做什么。

# ajax - JQuery 移动应用程序中的 302

> ID：15687372
> 
> 赞同：1
> 
> 时间：2013-03-28T16:37:16.227
> 
> 标签：ajax, json, jquery-mobile

我有一个 JQuery 移动应用程序。此应用程序当前在 localhost 上运行。我依赖托管在我的一些后端服务器上的一些服务。当我运行查询时，我在提琴手中注意到我得到了 302。这个 302 导致我的服务调用失败。

如果我在浏览器窗口中复制并粘贴服务的 URL，一切正常。这是我的 JQuery 代码

```
$.ajax({
  url: GetServiceUrl(),
  type: "GET",
  data: vm,
  contentType: "application/json",
  success: service_Succeeded,
  error: service_Failed
});

function service_Succeeded(result) {
    alert("received!");
}

function service_Failed() {
  alert("oops");
}

function GetServiceUrl() {
  var url = "http://www.mydomain.com/services/endpoint";
  return url;
} 
```

为什么我的应用程序会收到 302？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T09:34:08.853

您的服务正在发送重定向请求。也许您需要登录？

# sql - 查找包含特定值的列的记录

> ID：15687374
> 
> 赞同：1
> 
> 时间：2013-03-28T16:37:20.970
> 
> 标签：sql, tsql, select, join

我认为我的问题真的归结为`IN`对多个值执行 sql。

这是我到目前为止所拥有的[SQL Fiddle 。](http://www.sqlfiddle.com/#!3/6fa3ee/2)

长话短说，我`Cases`有多个`Types`.

我需要过滤`Cases`包含某些`Types`

假设我有 6 行 (col1,col2)... (1,2),(1,3)(1,4),(2,3),(2,4),(2,5) 我该怎么做只选择`Cases`在 col2 中有 2、AND 3 AND 4 的？

2,3,4 只是一个用例。它可以是任何组合（SQL Fiddle 有几个表可以确定这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:39:38.463

这更接近一点吗？

```
SELECT * from CaseTypes CT
INNER JOIN TypeBillable TB    ON CT.TypeId = TB.TypeId
where CT.CaseId in
(
select CaseID from CaseTypes
PIVOT (count (TypeId) for TypeId in ([2],[3],[4])) as x
where [2] > 0 and [3] > 0 and [4] > 0
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:46:46.153

尝试：

```
select [CaseId]
from CaseTypes
where [TypeID] in (2,3,4)
group by [CaseId]
having count(distinct [TypeID]) = 3 
```

[（这里](http://www.sqlfiddle.com/#!3/6fa3ee/7)的 SQLFiddle ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:48:55.393

您可以尝试几件事：

使用派生表：

```
SELECT a.col1
FROM (SELECT col1 FROM Cases WHERE col2 = 2) a
INNER JOIN (SELECT col1 FROM Cases WHERE col2 = 3) b ON a.col1 = b.col1
INNER JOIN (SELECT col1 FROM Cases WHERE col2 = 4) c ON a.col1 = c.col1 
```

使用聚合：

```
SELECT col1
FROM Cases
GROUP BY col1
HAVING 
   SUM(CASE col2 WHEN 2 THEN 1 ELSE 0 END) > 0 AND
   SUM(CASE col2 WHEN 3 THEN 1 ELSE 0 END) > 0 AND
   SUM(CASE col2 WHEN 4 THEN 1 ELSE 0 END) > 0 
```

# jquery - 为什么 YQL 有效但 JSONP 无效？

> ID：15687375
> 
> 赞同：0
> 
> 时间：2013-03-28T16:37:21.107
> 
> 标签：jquery, ajax, cross-domain, jsonp

我想做一些跨域数据请求。首先，我在 YQL 中进行了尝试，它起作用了：

```
<script type="text/javascript">
$(document).ready(function(){
   var myURL = 'http://example.com';
   var xpathVariable = '...';
   var yql = "http://query.yahooapis.com/v1/public/yql?q=" + encodeURIComponent("SELECT * FROM html WHERE url='" + myURL + "'") + "%20AND%20xpath%3D'%2F%2Fdiv%5B%40id%3D%22" + xpathVariable + "%22%5D" + "&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?";

   jQuery.getJSON(yql, function(data){
      var divToUpdate = $('#container');

      jQuery.each(data.query.results.span, function(i, spanItem){
         $('<div>' + spanItem.content + '</div>').appendTo(divToUpdate);
         if(i == 4) return false;
      });
   });
});
</script> 
```

结果按预期显示在 div 容器中。

然后我想我会尝试使用 jQuery 的 JSONP，这里是代码：

```
<script type="text/javascript">
$(document).ready(function(){
   var myURL = 'http://example.com/search?type=2561&location=1562';       

   jQuery.ajax({
       type: 'GET',
       url: myURL,
       dataType: 'jsonp',
       jsonp: false,
       jsonpCallback: 'requestCallback',                        
       error: function(xhr, status, error){
          alert('error');
       }
   });

   function requestCallback(data){
       console.log(data);
   }     
});

</script> 
```

此时，我只想在控制台日志中显示回调 json 数据，我不确定我做错了什么，因为它抛出了错误消息。由于 JSONP 静默失败，我无法确定代码的哪一部分不正确。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T19:08:20.900

请参阅它是 yahoo 提供的 Web 服务。据我所知，后端中的这个 Web 服务使用一些 Web 抓取工具，它会从您提供的 url 中提取数据，然后以 JSON 的形式返回提取的数据.

# xml - 通过外部 XML 在 AS3 中添加图像

> ID：15687377
> 
> 赞同：0
> 
> 时间：2013-03-28T16:37:24.897
> 
> 标签：xml, image, actionscript-3, file, external

我认为这相对简单，它似乎对我不起作用。我认为我在正确的轨道上。这就是我所拥有的：

```
import mx.controls.Image;

        public var newImage:Image;

        public var myXML:XML;
        public var myLoader:URLLoader = new URLLoader();

        public function init():void{
            myLoader.load(new URLRequest("images.xml"));
            myLoader.addEventListener(Event.COMPLETE, processXML);
        }

        public function processXML(e:Event):void{
            myXML = new XML(e.target.data);
            newImage = new Image();
            newImage.source = myXML.IMAGE.@src;
            imgGroup.addElement(newImage);

        } 
```

它没有为我显示图像。有任何想法吗？

这是我的 XML 供参考：

```
<?xml version="1.0" encoding="utf-8"?>
<GALLERY COLUMNS="5" XPOSITION="30" YPOSITION="30" WIDTH="100" HEIGHT="100">
<IMAGE src="img_data/download.jpg"  />

</GALLERY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:50:23.313

您走在正确的轨道上，但您需要先加载图像，然后才能使用它们。您可以使用[Loader 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)执行此操作，就像使用[URLLoader 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)加载 XML 一样。

请参阅[如何在 Actionscript 3.0 中加载外部图像](http://blog.728media.com/2009/03/11/how-to-load-external-images-in-actionscript-30/)

# html - HTML 添加到主屏幕后音频无法在 iPad 上播放

> ID：15687381
> 
> 赞同：1
> 
> 时间：2013-03-28T16:37:43.277
> 
> 标签：html, audio, video

这个让我难住了。我有一个使用 HTML5 标签嵌入 MP4 视频的 HTML Web 应用程序。在台式机和 iPad 的浏览器中，一切似乎都运行良好。但是当我使用添加到主屏幕按钮保存快捷方式时，我的视频不再有音频。

有任何想法吗？

```
<meta name="apple-mobile-web-app-capable" content="yes" />

<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<video id="videoContent" controls="true" width="400" height="225" preload="auto"><source src="video.mp4"></video> 
```

# javascript - 删除我的 JSON 数据前面的 u'

> ID：15687384
> 
> 赞同：3
> 
> 时间：2013-03-28T16:37:55.043
> 
> 标签：javascript, python, json

我是 python 新手，似乎我所有的 JSON 数据都与 u' 前缀组合在一起：

```
{u'number': u'12345666', u"items"...} 
```

我不需要这些数据（unicode 或其他），因为我想将**字符串**打印到 Javascript 变量中：

```
var obj = data; // data is the object above. 
```

我的 python 看起来像这样；

```
index.html:
var obj = ${data}; 
```

我正在使用 moko 框架进行模板化。

```
// getitems() return {'number':'12312...}
context = {'data': getitems(self)}
self.render_response('index.html',**context) 
```

处理后的 javascript 输出数据如下所示：

```
var obj = {u'number': u'12345666', u"items"...} 
```

这是我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T16:41:19.057

问题是您正在将字典转换为字符串（可能是 Mako`str(...)`为您做的）。但是你应该把它**jsonify**，即

```
import json
context = { 'data': json.dumps(getitems(self)) } 
```

# powershell - PowerShell：使用“7”参数调用“GetListItems”的异常

> ID：15687385
> 
> 赞同：1
> 
> 时间：2013-03-28T16:37:55.927
> 
> 标签：powershell, exception, soap, sharepoint, new-webserviceproxy

尝试使用 PowerShell 从 SharePoint 获取列表项。

我使用了此处[Windows PowerShell Blog](http://blogs.msdn.com/b/powershell/archive/2010/06/24/using-new-webserviceproxy-to-get-modify-and-add-items-to-a-list-in-sharepoint-2007.aspx)中的示例，并对其进行了修改以与我的站点一起使用。现在我收到以下错误：

```
Exception calling "GetListItems" with "7" argument(s): "Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown."
At line:30 char:1
+ $list = $service.GetListItems($listName, "", $query, $viewFields, $rowLimit, $qu ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : SoapException 
```

我正在使用的脚本：

```
# The uri refers to the path of the service description, e.g. the .asmx page            
$uri = "http://SITE/sites/DefaultCollection/Engineering/Subsite%20(UK)/_vti_bin/lists.asmx"             

# Create the service            
$service = New-WebServiceProxy -Uri $uri  -Namespace SpWs  -UseDefaultCredential            

# The name of the list             
$listName = "Test1"             

# Create xml query to retrieve list.             
$xmlDoc = new-object System.Xml.XmlDocument            
$query = $xmlDoc.CreateElement("Query")            
$viewFields = $xmlDoc.CreateElement("ViewFields")            
$queryOptions = $xmlDoc.CreateElement("QueryOptions")            
$query.set_InnerXml("FieldRef Name='Text1'")             
$rowLimit = "10"            

$list = $null             
$service = $null              

try
    {            
    $service = New-WebServiceProxy -Uri $uri  -Namespace SpWs  -UseDefaultCredential
    }            
catch
    {             
    Write-Error $_ -ErrorAction:'SilentlyContinue'             
    }

$list = $service.GetListItems($listName, "", $query, $viewFields, $rowLimit, $queryOptions, "")

if($service -ne $null)
    {            
    try
        {                    
        $list = $service.GetListItems($listName, "", $query, $viewFields, $rowLimit, $queryOptions, "")
        }            
    catch
        {             
        Write-Error $_ -ErrorAction:'SilentlyContinue'            
        }            
} 
```

以前有人试过吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-06T20:42:45.567

这是对我有用的解决方案..

将 "?WSDL" 添加到 $uri 字符串的末尾

```
$uri = "http://SITE/sites/DefaultCollection/Engineering/Subsite%20(UK)/_vti_bin/lists.asmx?WSDL" 
```

根据[此链接](http://ss64.com/ps/new-webserviceproxy.html)：要返回使用 ASP.NET 创建的 Web 服务的服务描述，请将“?WSDL”附加到 Web 服务的 URL（例如， [http://www.ss64.com/MyWebService .asmx?WSDL](http://www.ss64.com/MyWebService.asmx?WSDL) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:55:03.227

它引发错误的行是：

```
$list = $service.GetListItems($listName, "", $query, $viewFields, $rowLimit, $queryOptions, "") 
```

该行没有被捕获，但这是一个[类似的问题](https://stackoverflow.com/questions/6747910/powershell-exception-new-webserviceproxy-soap)，引发了相同的错误。如果您想尝试获得更好的异常，请将该行包装在另一个 try catch 中：

```
try{
$list = $service.GetListItems($listName, "", $query, $viewFields, $rowLimit, $queryOptions, "")
}
catch{
[System.Exception]
write-host ($_.Exception).Message
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-09T01:11:11.157

请确保将“？WSDL”添加到您的 URI，这就是代码中断的原因。假装它不知道函数的定义（至少我猜）......

比如下面这张。我很惊讶地看到这使我的代码正常工作。诡异的..

$uri = "http://<>/sites/DefaultCollection/Engineering/Subsite%20(UK)/_vti_bin/lists.asmx?WSDL"

# html - Firefox 上的 iframe 大小问题

> ID：15687391
> 
> 赞同：0
> 
> 时间：2013-03-28T16:38:00.333
> 
> 标签：html, firefox, iframe, size

我在列表中有一个 iframe（我正在使用滑块），并且在 Chrome 上完美地设置了它的大小，但在 Firefox 上，它的大小更小。

就像这样

```
<ul id="slider">
    <li><iframe src="slider1-mobile.htm" style="width:320px; height:250px;"></iframe></li>
    <li><iframe src="slider2-mobile.htm" style="width:320px; height:250px;"></iframe></li>
    <li><iframe src="slider3-mobile.htm" style="width:320px; height:250px;"></iframe></li>
    <li><iframe src="slider4-mobile.htm" style="width:320px; height:250px;"></iframe></li>
</ul> 
```

使用 Firebug，我可以看到每个 li 元素的大小为 320x250，如 css 中所述...但 iframe 切换到宽度和高度为 100%，即使我将它与我希望它们的样式属性内联320 ......无论如何，即使它是 100%，因为父级 (the `<li>`) 的大小为 320x250，宽度为 100% 的 iframe 应该具有 320 的宽度，因为 320 的 100% 是 320。

但它显示 iframe 真的很小，而不是它应该的大小。在 Chrome 上我可以完美地查看它。

你可以看到它： `http://samlizama.com/Responsive/`

我感谢任何帮助:)

这是它在 Chrome 和 Firefox 上的外观：

铬合金 [![在 Chrome 上](../Images/53229d797ca606df1b3ae37d29eafb7d.png)](https://i.stack.imgur.com/p387O.png)

火狐 [![在火狐上](../Images/4c863ce900034472128f64c0cd9d377b.png)](https://i.stack.imgur.com/abqma.png)

使用相同的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:03:51.323

你的问题是 main320.css 中的这个 CSS 规则：

```
#slider iframe{
  transform: scale(0.5);
  width:320px;
  height:250px;
} 
```

Firefox 支持无前缀 CSS 转换，因此这会将 iframe 缩小 2 倍。Chrome 仅支持`-webkit-transform`，因此忽略该`transform`规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:36:33.680

在 Firefox for Mac 中看起来不错！![在此处输入图像描述](../Images/78957cb56d445debfffb1b7cf197dd82.png)

# c++ - 将 char 转换为预定义的 ascii 值

> ID：15687395
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:38:21.730
> 
> 标签：c++, visual-studio-2010

我有一个带有 ASCII 值（198）的字符“╞”。我如何操纵这个 char 以使生成的 char 成为以下之一？

0 到 9 和 A 到 F

稍后，我想将生成的字符转换回原始字符，即'╞'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:42:06.330

我想这是一个关于十进制到十六进制转换的问题。我会这样做

```
char dec = 198;
char hex[3];
sprintf(hex, "%02X", (unsigned char)dec); 
```

要转换回来，它将是

```
int tmp;
sscanf(hex, "%X", &tmp);
dec = tmp; 
```

还有其他方法，例如使用 std::stringstream ，但以上对我来说很好。

# sql - 选择值等于或小于给定值且最接近它的行

> ID：15687398
> 
> 赞同：4
> 
> 时间：2013-03-28T16:38:33.417
> 
> 标签：sql, database, sql-server-2008

抱歉标题混乱。请告诉我是否可以通过 db 请求进行操作。假设我们有下表

```
 ind_id      name                 value       date
----------- -------------------- ----------- ----------
1           a                    10          2010-01-01
1           a                    20          2010-01-02
1           a                    30          2010-01-03
2           b                    10          2010-01-01
2           b                    20          2010-01-02
2           b                    30          2010-01-03
2           b                    40          2010-01-04
3           c                    10          2010-01-01
3           c                    20          2010-01-02
3           c                    30          2010-01-03
3           c                    40          2010-01-04
3           c                    50          2010-01-05
4           d                    10          2010-01-05 
```

我需要查询所有行以包含给定日期的每一行`ind_id`，如果没有`ind_id`给定日期，则取最近的较低日期，如果没有任何较低的日期，则返回 ind_id + name（name/ind_id 对相等）带空值。例如，日期是 2010-01-04，我希望得到以下结果：

```
ind_id      name                 value       date
----------- -------------------- ----------- ----------
1           a                    30          2010-01-03
2           b                    40          2010-01-04
3           c                    40          2010-01-04
4           d                    NULL        NULL 
```

如果可能的话，如果有人帮助我构建查询，我将不胜感激。我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:13:10.320

检查这个**[SQL FIDDLE 演示](http://sqlfiddle.com/#!3/da4ed/2)**

```
 with CTE_test
as 
(
    select int_id,
       max(date) MaxDate
    from test 
    where date<='2010-01-04 00:00:00:000'
    group by int_id
)
select A.int_id, A.[Value], A.[Date]
from test A
    inner join CTE_test B
       on a.int_id=b.int_id 
          and a.date = b.Maxdate
union all
select int_id, null, null 
from test 
where int_id not in (select int_id from CTE_test) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:01:14.023

（更新）尝试：

```
with cte as
(select m.*,
        max(date) over (partition by ind_id) max_date,
        max(case when date <= @date then date end) over 
           (partition by ind_id) max_acc_date
 from myTable m)
select ind_id,
       name,
       case when max_acc_date is null then null else value end value, 
       max_acc_date date
from cte c
where date = coalesce(max_acc_date, max_date) 
```

[（这里](http://sqlfiddle.com/#!3/ef7aa/1)的 SQLFiddle ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:50:15.277

你可以使用类似的东西：

```
declare @date date = '2010-01-04'

;with ids as
(
  select distinct ind_id
  from myTable
)
,ranks as
(
  select *
    , ranking = row_number() over (partition by ind_id order by date desc)
  from myTable
  where date <= @date
)
select ids.ind_id
  , ranks.value
  , ranks.date
from ids
  left join ranks on ids.ind_id = ranks.ind_id and ranks.ranking = 1 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/71e6e/15)。

理想情况下，您不会使用该`DISTINCT`语句来获取`ind_id`要包含的值，但我在这种情况下使用它来获得您需要的结果。

此外，此类查询的标准免责声明；如果您有重复的数据，您应该考虑在`ORDER BY`或 使用`RANK`而不是`ROW_NUMBER`.

**OP 更新后编辑**

只需将新列添加到现有查询中：

```
with ids as
(
  select distinct ind_id, name
  from myTable
)
,ranks as
(
  select *
    , ranking = row_number() over (partition by ind_id order by date desc)
  from myTable
  where date <= @date
)
select ids.ind_id
  , ids.name
  , ranks.value
  , ranks.date
from ids
  left join ranks on ids.ind_id = ranks.ind_id and ranks.ranking = 1 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/75b95/3)。

与前一个一样，如果可用，最好通过加入常设数据表来获取`ind_id`/信息。`name`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T17:08:10.663

这是一个返回您正在查找的结果的查询：

```
SELECT
    t1.ind_id
,   CASE WHEN t1.date <= '2010-01-04' THEN t1.value ELSE null END
FROM test t1
WHERE t1.date=COALESCE(
    (SELECT MAX(DATE)
    FROM test t2
    WHERE t2.ind_id=t1.ind_id AND t2.date <= '2010-01-04')
,   t1.date) 
```

这个想法是在相关查询中选择一行，使其 ID 与当前行的 ID 匹配，并且日期是您的目标日期之前的最高日期`'2010-01-04'`。

当这样的行不存在时，返回当前行的日期。此日期需要替换为`null`; 这就是`CASE`顶部的声明正在做的事情。

这是[关于 sqlfiddle 的演示](http://www.sqlfiddle.com/#!3/341b4/23)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T17:24:17.240

将选项与[EXISTS](http://msdn.microsoft.com/ru-ru/library/ms188336.aspx)运算符一起使用

```
DECLARE @date date = '20100104'
SELECT ind_id,
       CASE WHEN date <= @date THEN value END AS value,
       CASE WHEN date <= @date THEN date END AS date
FROM dbo.test57 t
WHERE EXISTS (
              SELECT 1
              FROM dbo.test57 t2
              WHERE t.ind_id = t2.ind_id AND t2.date <= @date
              HAVING ISNULL(MAX(t2.date), t.date) = t.date
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/54c0b/1)上的演示[](http://sqlfiddle.com/#!3/54c0b/1)

 *** * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T17:49:33.093

尝试

```
DECLARE @date DATETIME;

SET @date = '2010-01-04';

WITH temp1 AS
(
SELECT t.ind_id
, t.name
, CASE WHEN t.date <= @date THEN t.value ELSE NULL END AS value
, CASE WHEN t.date <= @date THEN t.date ELSE NULL END AS date
FROM test1 AS t
),

temp AS
(
SELECT *, ROW_NUMBER() OVER (PARTITION BY ind_id ORDER BY t.date DESC) AS rn
FROM temp1 AS t
WHERE t.date <= @date OR t.date IS NULL
)

SELECT *
FROM temp AS t
WHERE rn = 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T16:55:20.927

这不是确切的答案，但会给你这个概念，因为我只是在没有任何测试的情况下快速写下来。

```
use
go 
if
(Select value from table where col=@col1) is not null
--you code to get the match value
else if 
(Select LOWER(Date) from table ) is not null
-- your query to get the nerst dtae record
else
--you query withh null value
end 
```**

# css - IE 10 中缺少 preserve-3d 属性的解决方法

> ID：15687399
> 
> 赞同：5
> 
> 时间：2013-03-28T16:38:33.453
> 
> 标签：css, internet-explorer-10

微软在他们的[网站上说](http://msdn.microsoft.com/en-gb/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)

> 注意 W3C 规范为此属性定义了关键字值 preserve-3d，表示不执行展平。目前，Internet Explorer 10 不支持 preserve-3d 关键字。除了子元素的正常变换之外，您可以通过手动将父元素的变换应用于每个子元素来解决此问题。

有人可以举一个应该如何应用的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T02:17:58.730

要使用 来创建 3D 对象`transform-style: flat`，您需要从容器 div中**删除变换：**

```
.object3d {
  transform-style: preserve-3d; // remove to get the flat behavior in all browers
  transform: translateX(80px) rotateY(-35deg); // cut the container transforms.
} 
```

然后你可能需要扁平化你的 html 结构，所以**没有**带有转换的 div 位于带有转换的 div 中。

并将变换操作（以前在容器 div 上）粘贴到所有面上，然后再进行相对变换。

前：

```
.object3d__bottom { 
  transform: translateY(50px) rotateX(90deg);
} 
```

后：

```
.object3d__bottom { 
  transform: translateX(80px) rotateY(-35deg) translateY(50px) rotateX(90deg);
} 
```

演示：http: [//jsbin.com/ICuVihi/17/](http://jsbin.com/ICuVihi/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T21:35:33.643

我会说这是不可能的。（无论微软怎么说）。子元素的展平不能通过应用进一步的变换来撤消。请参阅以下演示：

[小提琴](http://jsfiddle.net/pVUud/)

使用 HTML：

```
<div class="base" id="base1">Base1
    <div class="inner" id="inner1">1</div> 
    <div class="inner" id="inner2">2</div>
    <div class="inner" id="inner3">3</div>
    <div class="inner" id="inner4">4</div>
    <div class="inner" id="inner5">5</div>
    <div class="inner" id="inner6">6</div>
    <div class="inner" id="inner7">7</div>
    <div class="inner" id="inner8">8</div>
    <div class="inner" id="inner9">9</div>
</div>
<div class="base" id="base2">Base2
    <div class="inner" id="inner1">1</div>
    <div class="inner" id="inner2">2</div>
    <div class="inner" id="inner3">3</div>
    <div class="inner" id="inner4">4</div>
    <div class="inner" id="inner5">5</div>
    <div class="inner" id="inner6">6</div>
    <div class="inner" id="inner7">7</div>
    <div class="inner" id="inner8">8</div>
    <div class="inner" id="inner9">9</div>
</div>
<div class="base" id="base3">Base3
    <div class="inner" id="inner1">1</div>
    <div class="inner" id="inner2">2</div>
    <div class="inner" id="inner3">3</div>
    <div class="inner" id="inner4">4</div>
    <div class="inner" id="inner5">5</div>
    <div class="inner" id="inner6">6</div>
    <div class="inner" id="inner7">7</div>
    <div class="inner" id="inner8">8</div>
    <div class="inner" id="inner9">9</div>
</div> 
```

和CSS：

```
.base {
   width: 200px;
   height: 250px;
   display: block;
   -webkit-transform: rotatey(-45deg);
   transform: rotatey(-45deg);
   border: solid 2px black;
}

#base1 {
   -webkit-transform-style: preserve-3d;
}

#base2 {
   left: 300px;
   top: 0px;
   position: absolute;
}

#base3 {
   left: 600px;
   top: 0px;
   position: absolute;
   -webkit-transform: rotatey(-88deg);
   transform: rotatey(-88deg);
   -webkit-transform-style: preserve-3d;
}

.inner {
   border: solid 1px black;
   height: 20px;
   background-color: red;
}

#inner1 {
   -webkit-transform: rotatey(0deg);
   transform: rotatey(0deg);
}
#inner2 {
   -webkit-transform: rotatey(20deg);
   transform: rotatey(20deg);
}
#inner3 {
   -webkit-transform: rotatey(40deg);
   transform: rotatey(40deg);
}
#inner4 {
   -webkit-transform: rotatey(60deg);
   transform: rotatey(60deg);
}
#inner5 {
   -webkit-transform: rotatey(80deg);
   transform: rotatey(80deg);
}
#inner6 {
   -webkit-transform: rotatey(100deg);
   transform: rotatey(100deg);
}
#inner7 {
   -webkit-transform: rotatey(120deg);
   transform: rotatey(120deg);
}
#inner8 {
   -webkit-transform: rotatey(140deg);
   transform: rotatey(140deg);
}
#inner9 {
   -webkit-transform: rotatey(160deg);
   transform: rotatey(160deg);
} 
```

这将创建一个旋转 -45 度的基本 div。在这个上设置了几个 div，具有不同的旋转角度。在第一个系列中，在 webkit 浏览器中看到，孩子有一个角度，给他水平位置和原始大小（比父级宽，旋转）。在第二个系列中，没有保留 3d，孩子不能超过父（表观）大小。第三个系列是一个角落的例子：在几乎 90 度的角度，父母消失了，但孩子仍然可见。

这在 IE 中不起作用，表明无法找到恢复 preserve-3d 属性的角度。

# mysql - MySQL查找按时间细分的出勤学生人数

> ID：15687402
> 
> 赞同：1
> 
> 时间：2013-03-28T16:38:39.617
> 
> 标签：mysql

我有一张表，其中包含上课学生的到达和离开时间。给定这样的数据：

```
CREATE TABLE `attendance` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `class_id` int(11) DEFAULT NULL,
  `student_id` int(11) NOT NULL DEFAULT '0',
  `arrival` datetime DEFAULT NULL,
  `departure` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `attendance` (`id`, `class_id`, `student_id`, `arrival`, `departure`)
VALUES
(1,1,1,'2013-01-01 16:00:00','2013-01-01 17:00:00'),
(2,1,2,'2013-01-01 16:00:00','2013-01-01 18:00:00'),
(3,1,3,'2013-01-01 17:00:00','2013-01-01 19:00:00'),
(4,1,4,'2013-01-01 17:00:00','2013-01-01 19:00:00'),
(5,1,5,'2013-01-01 17:30:00','2013-01-01 18:30:00'); 
```

我正在尝试以分钟为单位细分时间，以及该时间段内有多少学生在场。上述数据的结果如下：

```
Time  Students
60    2        (the first hour from 16:00 to 17:00 has students 1 & 2)
30    3        (the next 30 minutes from 17:00 to 17:30 has students 2, 3 & 4)
30    4        (etc...)
30    3
30    2 
```

到目前为止，我的选择语句正在获得一些答案，但我不能完全让它发挥作用：

```
SELECT a.id, a.arrival, b.id, LEAST(a.departure,b.departure) AS departure,
TIMEDIFF((LEAST(a.departure,b.departure)),(a.arrival)) AS subtime
FROM attendance a
JOIN attendance b ON (a.id <> b.id and a.class_id=b.class_id 
  and a.arrival >= b.arrival and a.arrival < b.departure) 
WHERE a.class_id=1
ORDER BY a.arrival, departure, b.id; 
```

提前感谢任何可以帮助我解决此问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:45:19.207

使用`correlated sub-queries`您可以创建虚拟表（与 a 不同`temporary table`，但有点相同的想法）。然后，您可以查询这些虚拟表，就好像它们真的存在一样。

```
select clocks.clock, count( att.student_id ) as numStudents
from
(
        ( select arrival as clock from attendance )
        union distinct
        ( select departure as clock from attendance )
)
as clocks
        left outer join attendance att on att.arrival <= clocks.clock and clocks.clock < att.departure
group by clocks.clock
order by 1,2
; 
```

几乎是你要找的东西。这不是按经过时间分组，而是使用实际的“事件”时间戳（到达和离开）并为您提供有用的报告。

```
clock               numStudents 
------------------- ----------- 
2013-01-01 16:00:00 2           
2013-01-01 17:00:00 3           
2013-01-01 17:30:00 4           
2013-01-01 18:00:00 3           
2013-01-01 18:30:00 2           
2013-01-01 19:00:00 0 
```

该报告显示在每个活动时间仍有多少学生“在这里”。

希望这对您有用。

# python - PyQt4：当鼠标在屏幕上的任何位置释放时发出信号

> ID：15687403
> 
> 赞同：1
> 
> 时间：2013-03-28T16:38:47.773
> 
> 标签：python, pyqt, signals, mouseevent, pyqt4

问题是：我有 QListWidget，该选择模式允许通过单击一个、拖动和释放另一个来选择多个项目。我想在屏幕上的任何地方释放鼠标时发出信号（仅当它首先被按下列表中的某个项目时）。我该怎么做？

从我到目前为止的调查来看：QListWidget 有信号 itemSelectionChanged，但是在拖动项目时选择每个新项目后都会发出信号

QListWidget 具有从 QAbstractItemView 继承的单击信号，但这仅适用于在同一项目上按下并释放鼠标

我试图扩展 QListWidget 类并在其中定义 mouseReleaseEvent，但这会覆盖原始事件并破坏列表的正确行为

我尝试使用 installEventFilter 制作空白标签，并创建类 mouseReleasedFilter，并且以某种方式起作用，但是有更优雅的方法吗？

```
class mouseReleasedFilter(QtCore.QObject):
    def __init__(self, parent = None):
        super(mouseReleasedFilter, self).__init__(parent)
    def eventFilter(self, object, event):
        if event.type() == QtCore.QEvent.MouseButtonRelease:
        print 'released'
        return False
    return True

self.filter = mouseReleasedFilter(self)

self.label.installEventFilter(self.filter) 
```

我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:55:12.810

> 我试图扩展 QListWidget 类并在其中定义 mouseReleaseEvent，但这会覆盖原始事件并破坏列表的正确行为

这是正确的做法；只需运行您正在使用的方法`super`：

```
class MyList(QtGui.QListWidget):
    def mouseReleaseEvent(self, e):
        super(MyList, self).mouseReleaseEvent(e)
        print('released', e) 
```

例子：

```
from PyQt4 import QtGui
app = QtGui.QApplication([])
class MyList(QtGui.QListWidget):
    def mouseReleaseEvent(self, e):
        super(MyList, self).mouseReleaseEvent(e)
        print('released', e)

l = MyList()
l.addItems(['hello', 'world'])
l.show() 
```

输出：

```
('released', <PyQt4.QtGui.QMouseEvent object at 0x72b4d40>)
('released', <PyQt4.QtGui.QMouseEvent object at 0x72b4d40>)
('released', <PyQt4.QtGui.QMouseEvent object at 0x72b4d40>)
('released', <PyQt4.QtGui.QMouseEvent object at 0x72b4d40>)
('released', <PyQt4.QtGui.QMouseEvent object at 0x72b4d40>) 
```

# .net - 如何在实体框架/SQL Server 2008 项目中切换到 datetime2

> ID：15687408
> 
> 赞同：20
> 
> 时间：2013-03-28T16:39:08.043
> 
> 标签：.net, sql-server, entity-framework-5, entity-framework-migrations

我们有一个实体框架 5.0 项目，该项目使用 SQL Server 2008 进行代码优先迁移，但所有日期属性都在数据库中创建为`datetime`列 - 而不是`datetime2`.

`datetime`是否可以使用将更新数据库中所有列的add-migration 创建迁移？有没有其他简单的方法可以切换到`datetime2`任何地方？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-12-11T21:41:44.293

这是一篇旧文章，但如果您想将所有日期时间列切换为 datetime2，并将 datetime2 用于您添加的任何新列（换句话说，使 EF 默认使用 datetime2），您可以将其添加到 OnModelCreating 方法你的上下文：

```
modelBuilder.Properties<DateTime>().Configure(c => c.HasColumnType("datetime2")); 
```

那会得到所有的DateTime和DateTime吗？模型中所有实体的属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-28T17:07:15.943

您可以使用 fluent API 强制`datetime2`在 DB 中创建列。

我找到了这个：

[在 Code-First Entity Framework 和 SQL Server 中使用 DateTime 属性](https://stackoverflow.com/questions/8043816/using-datetime-properties-in-code-first-entity-framework-and-sql-server/8044310#8044310)

你应该能够得到这个想法。

或者，如果您必须坚持使用现有数据库，那么您应该能够创建执行自定义 T-SQL 代码的迁移。这里有一个例子：

[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

# mysql - 从当前金额中查找最新收到的金额

> ID：15687411
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:39:16.570
> 
> 标签：mysql

我正在尝试从监视项目当前数量的表中获取最新收到的金额。

目前存储的是当前总金额，而不是每笔`-` `+`交易。生成报告时，我需要查看当前、最新收到、最新删除的金额。然后能够在给定的时间范围内做同样的事情。例如在一月份收到的物品，使用省略的时间戳列。

表布局

```
 id | item_id | amount  
 1  |  20     |   5    # +5  (initial)
 2  |  30     |   1    # +1  (initial)
 3  |  20     |   20   # +15 
 4  |  15     |   10   # +10 (initial/latest)
 5  |  20     |   25   # +5  (latest)
 6  |  20     |   4    # -21 
 7  |  30     |   2    # -1  
 8  |  30     |   5    # +3  (latest)
 9  |  15     |   2    # -8  
10  |  15     |   1    # -1 
```

**示例查询**

```
SELECT
   t1.item_id,
   t1.amount as amount,
   IFNULL(t2.amount, 0) as previous_amount,
   IFNULL(t1.amount - IFNULL(t2.amount, 0), NULL) as received_amount
FROM
   items AS t1
LEFT JOIN
   items AS t2
ON
    t1.item_id = t2.item_id
AND
    t1.id > t2.id #Get the record before the current t1.id 
```

**返回结果**

```
item_id | amount | previous_amount | received_amount | matching_ids    
20      | 5      |    0            |    5            |    1, NULL    
30      | 1      |    0            |    1            |    2, NULL    
20      | 20     |    5            |    15           |    3, 1    
15      | 10     |    0            |    10           |    4, NULL    
20      | 25     |    5            |    20           |    5, 1    
20      | 25     |    20           |    5            |    5, 3    
20      | 4      |    5            |    -1           |    6, 1    
20      | 4      |    20           |    -16          |    6, 3    
20      | 4      |    25           |    -21          |    6, 5    
30      | 2      |    1            |    1            |    7, 2    
30      | 5      |    1            |    4            |    8, 2    
30      | 5      |    2            |    3            |    8, 7    
15      | 2      |    10           |    -8           |    9, 4    
15      | 1      |    10           |    -9           |    10, 4    
15      | 1      |    2            |    -1           |    10, 9 
```

所需结果仅为最新收到的金额（如果有）。

**期望的结果**

```
#last_received_amount = (t1.amount - t2.amount)
item_id | latest_received_amount | matching_ids
   20   |    5                   |   5, 3
   15   |    10                  |   4, null
   30   |    3                   |   8, 7 
```

该查询旨在用作临时修复，直到使用单个事务对其进行重构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:52:44.267

查询中的表的 4 倍（2 获取最新的`id`，2 获取`id`之前的）：

# 最新突变

```
SELECT
   t1.item_id,
   t1.amount as amount,
   IFNULL(t3.amount, 0) as previous_amount,
   IFNULL(t1.amount - IFNULL(t3.amount, 0), NULL) as received_amount,
   CONCAT_WS(', ',t1.id, t3.id)
FROM items t1
LEFT JOIN items t2
  ON  t1.item_id = t2.item_id
  AND t2.id > t1.id
LEFT JOIN items t3
  ON  t1.item_id = t3.item_id
  AND t3.id != t1.id
LEFT JOIN items t4
  ON  t1.item_id = t4.item_id
  AND t4.id > t3.id
  AND t4.id != t1.id
WHERE 
    t1.category_id IN( '1', '2', '3' )
    AND t2.id IS NULL
    AND t4.id IS NULL;

+---------+--------+-----------------+-----------------+------------------------------+
| item_id | amount | previous_amount | received_amount | CONCAT_WS(', ',t1.id, t3.id) |
+---------+--------+-----------------+-----------------+------------------------------+
|      20 |      4 |              25 |             -21 | 6, 5                         |
|      30 |      5 |               2 |               3 | 8, 7                         |
|      15 |      1 |               2 |              -1 | 10, 9                        |
+---------+--------+-----------------+-----------------+------------------------------+ 
```

# 阳性突变

```
 SELECT
    t1.item_id,
    t1.amount as amount,
    IFNULL(t2.amount, 0) as previous_amount,
    IFNULL(t1.amount - IFNULL(t2.amount, 0), NULL) as received_amount,
    CONCAT_WS(', ',t1.id, t2.id)
  FROM items t1
  LEFT JOIN items t2
    ON  t1.item_id = t2.item_id
    AND t2.id < t1.id
    AND t2.amount < t1.amount
  LEFT JOIN items t3
    ON  t2.item_id = t3.item_id
    AND t3.id > t2.id
    AND t3.id < t1.id
  LEFT JOIN items noprev
    ON  t1.item_id = noprev.item_id
    AND noprev.id < t1.id
    AND noprev.amount > t1.amount
  WHERE
      t1.category_id IN( '1', '2', '3' )
      AND t3.id IS NULL
      AND (noprev.id IS NULL OR t2.id IS NOT NULL)

+---------+--------+-----------------+-----------------+------------------------------+
| item_id | amount | previous_amount | received_amount | CONCAT_WS(', ',t1.id, t2.id) |
+---------+--------+-----------------+-----------------+------------------------------+
|      20 |      5 |               0 |               5 | 1                            |
|      30 |      1 |               0 |               1 | 2                            |
|      20 |     20 |               5 |              15 | 3, 1                         |
|      15 |     10 |               0 |              10 | 4                            |
|      20 |     25 |              20 |               5 | 5, 3                         |
|      30 |      2 |               1 |               1 | 7, 2                         |
|      30 |      5 |               2 |               3 | 8, 7                         |
+---------+--------+-----------------+-----------------+------------------------------+ 
```

# 最新的阳性突变

```
SELECT increases.item_id, increases.amount, increases.previous_amount,increases.received_amount,increases.ids
FROM (
  SELECT
    t1.id,
    t1.item_id,
    t1.amount as amount,
    IFNULL(t2.amount, 0) as previous_amount,
    IFNULL(t1.amount - IFNULL(t2.amount, 0), NULL) as received_amount,
    CONCAT_WS(', ',t1.id, t2.id) as ids
  FROM items t1
  LEFT JOIN items t2
    ON  t1.item_id = t2.item_id
    AND t2.id < t1.id
    AND t2.amount < t1.amount
  LEFT JOIN items t3
    ON  t2.item_id = t3.item_id
    AND t3.id > t2.id 
    AND t3.id < t1.id
  LEFT JOIN items noprev
    ON  t1.item_id = noprev.item_id
    AND noprev.id < t1.id
    AND noprev.amount > t1.amount
  WHERE 
      t1.category_id IN( '1', '2', '3' )
      AND t3.id IS NULL
      AND (noprev.id IS NULL OR t2.id IS NOT NULL)
) increases
LEFT JOIN (SELECT
    t1.id,
    t1.item_id
  FROM items t1
  JOIN items t2
    ON  t1.item_id = t2.item_id
    AND t2.id < t1.id
    AND t2.amount < t1.amount
  LEFT JOIN items t3
    ON  t2.item_id = t3.item_id
    AND t3.id > t2.id 
    AND t3.id < t1.id
  WHERE 
      t1.category_id IN( '1', '2', '3' )
      AND t3.id IS NULL
) later_increases
  ON later_increases.item_id = increases.item_id
  AND later_increases.id > increases.id
WHERE later_increases.id IS NULL;

+---------+--------+-----------------+-----------------+------+
| item_id | amount | previous_amount | received_amount | ids  |
+---------+--------+-----------------+-----------------+------+
|      15 |     10 |               0 |              10 | 4    |
|      20 |     25 |              20 |               5 | 5, 3 |
|      30 |      5 |               2 |               3 | 8, 7 |
+---------+--------+-----------------+-----------------+------+ 
```

这说明了....您可能想为此使用临时表。

# php - 意外的 T_CONSTANT_ENCAPSED_STRING

> ID：15687412
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:39:27.033
> 
> 标签：php, mysql

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in C:\xampp\htdocs\system\reporting\download.php on line 136 
```

第 136 行是`$filename=strtoupper($_SESSION["SystemNameStr"])'_LOGINHISTORY_'.date('Ymd').'.CSV';`

```
if ($numlog>=1)
    {
    $filename=strtoupper($_SESSION["SystemNameStr"])'_LOGINHISTORY_'.date('Ymd').'.CSV';
    header("Pragma: public");  // Added to allow IE to download through SSL tunnels.
    header("Cache-Control: private");
    header("Content-Type: text/csv");
    header("Content-Disposition: attachment; filename=$filename "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:41:33.530

尝试使用“。” 在 strtoupper 函数之后。

```
$filename=strtoupper($_SESSION["SystemNameStr"]).'LOGINHISTORY'.date('Ymd').'.CSV'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:44:30.767

`$filename=strtoupper($_SESSION["SystemNameStr"])'_LOGINHISTORY_'.date('Ymd').'.CSV';`

您并没有像您认为的那样连接...使用：

`$filename=strtoupper($_SESSION["SystemNameStr"]).'_LOGINHISTORY_'.date('Ymd').'.CSV';`

# c# - 如何在 MVVM 中双向同步模型和视图模型？

> ID：15687415
> 
> 赞同：3
> 
> 时间：2013-03-28T16:39:34.630
> 
> 标签：c#, mvvm, view, model, synchronize

这是一个简单的问题，我在互联网上搜索了几个小时没有成功......

我有一个模型和一个具有一个属性的视图模型。为了使这个属性在视图中可见，我使用了一个应该从模型对象自动生成的视图模型对象，反之亦然。当然，下面的代码会抛出 StackOverflowException，因为模型中模型对象的更新会导致视图模型中的视图模型对象的更新，这会导致模型中的模型对象的更新等等...

```
class ModelObject
{
  ...
}

class ViewModelObject
{
  ...
}

class Model : INotifyPropertyChanged
{
  private ModelObject modelObject = new ModelObject();

  ...

  public ModelObject ModelObject
  {
    get
    {
      return this.modelObject;
    }
    set
    {
      this.modelObject = value;
      this.NotifyPropertyChanged("ModelObject");
    }
  }
}

class ViewModel : INotifyPropertyChanged
{
  private ViewModelObject viewModelObject = new ViewModelObject();
  private Model model = new Model();

  ...

  public ViewModel()
  {
    this.model.PropertyChanged += new PropertyChangedEventHandler(this.propertyChangedEvent);
  }

  public ViewModelObject ViewModelObject
  {
    get
    {
      return this.viewModelObject;
    }
    set
    {
      this.viewModelObject = value;
      this.model.ModelObject = new ModelObject(...);
      this.NotifyPropertyChanged("ViewModelObject");
    }
  }

  private void propertyChangedEvent(object sender, PropertyChangedEventArgs e)
  {
    if (e.PropertyName.Equals("ModelObject"))
    {
      this.ViewModelObject = new ViewModelObject(...);
    }
  }
} 
```

同步这两个对象的常用方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:11:08.787

没有银弹。由于模型是数据库的表示，而视图模型更接近接口，因此总是需要一些业务逻辑来将模型转换为视图模型，反之亦然。

我的视图模型类中通常有两种方法 -`SyncModel(ViewModel viewModel)`和`SyncViewModel(Model model)`

还有一个建议——

模型不应实现 INotifyPropertyChanged。视图模型应该将其实现为绑定到用户界面。为什么模型需要改变？它代表数据库中的内容。您可以刷新它，但为什么需要模型的更改通知？

编辑：[MVVM：绑定到模型，同时保持模型与服务器版本同步](https://stackoverflow.com/questions/10437241/mvvm-binding-to-model-while-keeping-model-in-sync-with-a-server-version)

硬参考。每个类都引用另一个类，监听属性更改事件并相应地更新自己。

观察者模式 - 有一个观察者类，每个类都向观察者注册自己，观察者监听任何变化并更新其所有订阅者。

还有一个可能有用的[事件聚合器。](http://www.minddriven.de/index.php/technology/development/design-patterns/event-aggregator-implementation)

如果您想要延迟更新，则需要 isDirty 属性。您更了解您的应用程序，谷歌搜索更多文章并明智地选择。

# c++ - 如何从录制的声音中获取 PCM 数据以进行傅里叶分析

> ID：15687416
> 
> 赞同：0
> 
> 时间：2013-03-28T16:39:35.113
> 
> 标签：c++, fft, wav, pcm, frequency-analysis

我一直在研究可以接收声音并输出其核心频率的 c++ 代码，就像吉他调音器一样。我可以生成我自己的随机正弦波，并成功地从一个只是幅度与时间的文本文件执行 FFT。我只是不知道如何从麦克风或声音文件中生成可用数据。

有没有一种简单的方法来采样声音并让它以幅度与时间的文本文件输出数据？

我研究了 WAV 文件格式以及各种块的工作方式，但它有点超出我的水平。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:49:13.683

如果您可以确保您的 WAV 是单声道、未压缩、16 位且具有已知的采样率，您可以跳过 WAV/RIFF/任何标头或将其像采样一样吸入（这不应该影响您的 FFT如果文件很长，结果会很多）。

除此之外，未压缩的 WAV 并不是一种非常复杂的格式。通过更多的努力，您将解析它。

# c++ - 读写二进制文件-FORTRAN 和 C++

> ID：15687424
> 
> 赞同：1
> 
> 时间：2013-03-28T16:39:46.550
> 
> 标签：c++, fortran, binaryfiles

我在 FORTRAN 中使用以下代码编写二进制文件：

```
Character(50) S
Real*8 A
A = 25.002  
OPEN(1,file='data.bin', access='stream',action='write') 
WRITE (1) A        
CLOSE(1) 
```

并尝试使用以下 C++ 代码阅读：

```
ifstream::pos_type size;
char * memblock

ifstream file ("data.bin", ios::in|ios::binary|ios::ate);
if (file.is_open())
{
  size = file.tellg();
  memblock = new char [size];
  file.seekg (0, ios::beg);
  file.read (memblock, size);
  file.close();

  delete[] memblock;
} 
```

但它不起作用！第二个代码无法读取第一个代码创建的文件。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:40:26.163

问题解决了：

```
ifstream file ("data.bin", ios::in|ios::binary);
if (file.is_open())
{     
  double a = 0;
  file.read ((char*)&a,sizeof(double));
  file.close();    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:53:12.863

file.tellg 给出当前位置。当你打开文件时，位置是0。要对文件大小进行微调，首先寻找到最后，然后执行tellg。

# java - 如何将多维节点数组放入堆栈？

> ID：15687425
> 
> 赞同：1
> 
> 时间：2013-03-28T16:39:48.807
> 
> 标签：java, arrays, object, stack, multidimensional-array

我对java有点陌生，我在将节点数组放入堆栈时遇到问题。

在这里，我创建了全局变量`myNode`和应该包含 s 数组的堆栈`myNode`。

```
static myNode[][] cells = new myNode[9][9];
static Stack<myNode[][]> myStack = new Stack<myNode[][]>(); 
```

我实例化数组中的每个元素并填充`cells[row][column].values`：

```
for(int row = 0; row < 9; row++) {
        for(int column = 0; column < 9; column++)
        {
            //instantiate each element
            cells[row][column] = new myNode();
            cells[row][column].initialize();
            //set myNodes values of each element from given input
            String value = txt[row][column].getText(); //gets string from JTextBox
            if (!value.equals("")) //empty cells will equal 0;
            {
                cells[row][column].value = Integer.parseInt(txt[row][column].getText());
            }
        }
    } 
```

我尝试推送单元格数组，然后稍后恢复（也许我做错了？）：

```
cells[0][0].value = 9;

//push cells (save state)
myStack.push(cells);

//change cells
cells[0][0].value = 12345; //for example

//pop cells (revert state)
cells = myStack.pop();

System.out.println(Integer.toString(cells[0][0].value)); //will print 12345! 
```

但这会打印出 12345 而不是所需的 9，这显示了我遇到的问题。我究竟做错了什么？是因为它正在将指针压入堆栈吗？

# java - Java SWT中如何清除窗口历史记录？

> ID：15687428
> 
> 赞同：0
> 
> 时间：2013-03-28T16:40:00.657
> 
> 标签：java, swt

我正在开发一个 Java SWT 程序，我需要一个用于用户授权的登录表单。

我的程序的入口点是 LoginWindow，当用户成功登录 LoginWindow 时，它会打开第二个窗口并将其隐藏。当我关闭新窗口时，登录窗口再次出现。如何制止这种行为？

```
public class LoginWindow
{
    private Display             display;
    private Shell               shell;

    private Text                widgetLogin;
    private Text                widgetPass;

    private DatabaseHelper      db;
    private PreferenceHelper    pref;

    /**
     * @wbp.parser.entryPoint
     */
    public static void main(String[] args)
    {
        LoginWindow window = new LoginWindow();
        window.open();
    }

    public LoginWindow()
    {
        display = Display.getDefault();
        shell = new Shell(display, SWT.DIALOG_TRIM);

        db = DatabaseHelper.getInstance();
        pref = PreferenceHelper.getInstance();

        // Auto login
        {
            String login = pref.getLogin();
            String password = pref.getPassword();

            if (login != null && password != null)
            {
                if (db.checkUserDetails(login, password))
                {
                    shell.close();

                    MainWindow window = new MainWindow();
                    window.open();
                }
                else
                {
                    pref.setLogin(null);
                    pref.setPassword(null);
                }
            }
        }
    }

    public void open()
    {
        shell.setSize(450, 230);
        shell.setText(JavaStrings.DIALOG_TITLE_LOGIN);
        shell.setLocation(ContentHelper.windowCenter((display.getPrimaryMonitor()).getBounds(), shell.getBounds()));
        shell.setImages(ContentHelper.loadAppicationIcons(display));
        GridLayout gl_shell = new GridLayout(2, true);
        gl_shell.verticalSpacing = 10;
        gl_shell.marginWidth = 10;
        gl_shell.marginHeight = 10;
        gl_shell.horizontalSpacing = 10;
        shell.setLayout(gl_shell);

        Label lblUsername = new Label(shell, SWT.NONE);
        lblUsername.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, false, false, 2, 1));
        lblUsername.setText(JavaStrings.TEXT_LOGIN);

        widgetLogin = new Text(shell, SWT.BORDER);
        widgetLogin.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 2, 1));
        widgetLogin.addKeyListener(new KeyAdapter()
        {
            public void keyReleased(KeyEvent e)
            {
                if (e.keyCode == SWT.CR || e.keyCode == SWT.KEYPAD_CR)
                {
                    widgetPass.forceFocus();
                }
            }
        });

        Label lblPassword = new Label(shell, SWT.NONE);
        lblPassword.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, false, false, 2, 1));
        lblPassword.setText(JavaStrings.TEXT_PASS);

        widgetPass = new Text(shell, SWT.BORDER | SWT.PASSWORD);
        widgetPass.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 2, 1));
        widgetPass.addKeyListener(new KeyAdapter()
        {
            public void keyReleased(KeyEvent e)
            {
                if (e.keyCode == SWT.CR || e.keyCode == SWT.KEYPAD_CR)
                {
                    tryLogin();
                }
            }
        });

        Label lblForgetPassword = new Label(shell, SWT.NONE);
        lblForgetPassword.setAlignment(SWT.RIGHT);
        lblForgetPassword.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, false, 2, 1));
        lblForgetPassword.setText(JavaStrings.TEXT_FORGET_PASS);
        lblForgetPassword.addMouseListener(new MouseButtonClick());

        Button bRegister = new Button(shell, SWT.NONE);
        bRegister.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, false, 1, 1));
        bRegister.setText(JavaStrings.BUTTON_TEXT_REGISTER);
        bRegister.addSelectionListener(new SelectionListener()
        {
            @Override
            public void widgetSelected(SelectionEvent e)
            {
                RegisterWindow window = new RegisterWindow(shell);
                window.open();
            }

            @Override
            public void widgetDefaultSelected(SelectionEvent e)
            {
                RegisterWindow window = new RegisterWindow(shell);
                window.open();
            }
        });

        Button bLogin = new Button(shell, SWT.NONE);
        bLogin.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, false, 1, 1));
        bLogin.setText(JavaStrings.BUTTON_TEXT_LOGIN);
        bLogin.addSelectionListener(new ButtonClick());

        shell.open();
        shell.layout();

        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
            {
                display.sleep();
            }
        }

        display.dispose();
    }

    private class ButtonClick implements SelectionListener
    {
        public void widgetSelected(SelectionEvent e)
        {
            tryLogin();
        }

        public void widgetDefaultSelected(SelectionEvent e)
        {
            tryLogin();
        }
    }

    private class MouseButtonClick extends MouseAdapter
    {
        @Override
        public void mouseUp(MouseEvent e)
        {
            ResetPasswordDialog dialog = new ResetPasswordDialog(shell, SWT.DIALOG_TRIM);
            dialog.open();
        }
    }

    private void tryLogin()
    {
        if (db.Status() == SqlStatus.OPEN)
        {
            String login = widgetLogin.getText().trim();
            String pass = widgetPass.getText().trim();

            if ((login.length() > 0) && (pass.length() > 0))
            {
                widgetLogin.setEnabled(false);
                widgetPass.setEnabled(false);

                User user = db.selectUser(login, pass);

                if (user != null)
                {
                    pref.setLogin(user.getLogin());
                    pref.setPassword(user.getPassword());

                    shell.close();

                    MainWindow window = new MainWindow();
                    window.open();
                }
                else
                {
                    widgetLogin.setEnabled(true);
                    widgetPass.setEnabled(true);

                    // MessageBox
                }
            }
            else
            {
                // MessageBox
            }
        }
        else
        {
            // MessageBox
        }
    }
} 
```

**主窗口**

```
public class MainWindow
{
    private Display             display;
    private Shell               shell;

    public MainWindow()
    {
        display = Display.getDefault();
        shell = new Shell();
    }

    public void open()
    {
        shell.setSize(500,500);
        shell.setText(JavaConstants.APPLICATION_NAME);
        shell.setImages(ContentHelper.loadAppicationIcons(display));

        GridLayout gl_shell = new GridLayout(1, false);
        gl_shell.verticalSpacing = 0;
        gl_shell.marginWidth = 0;
        gl_shell.marginHeight = 0;
        gl_shell.horizontalSpacing = 0;
        shell.setLayout(gl_shell);

        shell.open();
        shell.layout();

        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
            {
                display.sleep();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:25:09.163

您提供的代码片段没有提供太多信息，但看起来您没有关闭`LoginDialog`. 如果是这种情况，`LoginDialog`则将“坐在”您的后面`MainWindow`，因此如果您关闭`MainWindow`.

* * *

如果这不是您的问题的原因，这里有一个替代方法：我最近一直在编写一些非常相似的东西，并且应用程序以`MainWindow`. 然后，此窗口将创建一个[`Dialog`](http://www.vogella.com/articles/EclipseDialogs/article.html)模态窗口（如果不先关闭对话框，您将无法访问`MainWindow`）并提示用户输入凭据。Dialog 然后进行登录，并有一个字段指示登录是否成功。然后，`MainWindow`您可以简单地检查该字段并在登录不成功时关闭应用程序。

# streaming - HLS 和 MPEG-DASH 有什么区别？

> ID：15687434
> 
> 赞同：44
> 
> 时间：2013-03-28T16:40:16.320
> 
> 标签：streaming, http-live-streaming, mpeg-dash

似乎这两种协议都做同样的事情，但是一个比另一个有优势吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-12T08:36:09.743

你应该问问自己什么对你很重要（编码、加密方法、标准化等）

Jason Schneid 写了一个很好的比较： http: [//www.internetvideoarchive.com/IVA/news/2012/09/13/progressive-download-vs.-adaptive-bitrate-how-to-choose-the-format-right-为你](http://www.internetvideoarchive.com/IVA/news/2012/09/13/progressive-download-vs.-adaptive-bitrate-how-to-choose-the-format-right-for-you)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-17T17:42:17.410

这是Aquary的快速比较。内联回复太长了...

**Web 标准：** 在两种自适应流媒体协议中，MPEG-DASH 最有可能成为统一标准。

**支持：** HLS 较老且 Apple 大力支持它，因此具有更多事实上的支持，尤其是在较旧的浏览器/操作系统/设备中。您可以使用 jwplayer 在 Windows 机器上支持 HLS。

**性能：** 不确定，但 mpeg-dash 播放器 bitdash 的制造商声称：“流媒体性能比 Microsoft Smooth Streaming 高 53%，比 Apple HLS 高 101%”。

**结论：**现在是 HLS，明天是 MPEG-DASH（如果你可以管理的话，现在就可以了）。以下文章很好地评估了当今流技术的分裂状态：http: [//blogs.imediaconnection.com/blog/2012/04/27/mpeg-dash-its-time-for-apple-to-put-关闭或关闭/](http://blogs.imediaconnection.com/blog/2012/04/27/mpeg-dash-its-time-for-apple-to-put-up-or-shut-up/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-30T08:07:37.853

MPEG-DASH 是由 ISO/IEC MPEG 批准的独立于供应商的国际标准。以前的自适应流媒体技术（例如 Apple HLS）已由供应商发布，但对公司独立的流媒体服务器和播放客户端的支持有限。由于不希望出现这种依赖于供应商的情况，因此标准化机构开始了协调过程，从而获得了 MPEG-DASH 的批准。

近年来，MPEG-DASH 已被集成到新的标准化工作中，例如 HTML5 媒体源扩展 (MSE)，通过 HTML5 视频和音频标签实现 DASH 播放（与 Apple HLS 不同，Apple HLS 依赖于外部平台上的 FLASH Apple 生态系统），以及 HTML5 加密媒体扩展 (EME)，可在 Web 浏览器中启用受 DRM 保护的播放。此外，使用 MPEG-DASH 的 DRM 保护通过 MPEG-CENC（通用加密）在不同系统之间进行协调，并且通过 HbbTV 1.5 和 2.0 中的集成实现了不同 SmartTV 平台上的 MPEG-DASH 播放。

虽然 MPEG-DASH 是编解码器并且与容器无关，但 Apple HLS 例如绑定到 MP2TS 容器。还有很多不同之处。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-20T03:50:29.803

从应用程序设计人员的角度来看，尝试为 youtube 或 netflix 等视频流媒体服务选择一种技术时，我会说它们都有自己的后备方案，您应该全部使用它们。

今天的每一个常规视频流服务都会有两个问题：客户端支持（你应该想要一切，从智能手机到电视、游戏机、苹果电视和谷歌 chromecast）和服务器基础设施。

HLS 原生支持 Apple 的一切，运行非常流畅，并通过使用许多开源 js 视频播放器提供了出色的个性化。Android 有问题，但即使在 2.3 设备上，我也让 flash player 在混合应用程序上运行 HLS。性能很烂。但是您可以使用 ffmpeg 即时转码！直播也是可能的，而且非常简单。

MPEG-DASH 在较新的设备上得到了很好的支持，5 年内这个话题可能会结束。使用 ngnix 和 rtmp 扩展，你可以在半小时内构建一个视频流服务器。

我首先选择 HLS 是因为它很简单。现在，我正在同时为不同的客户端创建所有 HLS、WebM（低定义）和 MPEG-DASH，以允许它们都本地运行。

这样我就可以依赖只构建混合应用程序并在每个客户端上使用我所有的 AngularJS 代码。否则，较小的项目采用视频流服务是不切实际的。然后你就有了像 Wowza 这样的服务。

# latex - 如何对包含数学表达式的文本进行词性标注？

> ID：15687440
> 
> 赞同：2
> 
> 时间：2013-03-28T16:40:34.620
> 
> 标签：latex, nlp, mathml, mathematical-expressions, pos-tagger

目标是科学文本的句法解析。首先，我需要对此类文本的句子进行词性标注。文本来自 arxiv.org。所以它们最初是在 LaTeX 中的。从 LaTeX 文档中提取文本时，数学表达式可以转换为 MathML（或者可能是其他格式，但我更喜欢 MathML，因为这项工作是为了创建特定的网络应用程序，而 MathML 是一个方便的工具）。

我唯一的想法是用一些自然语言的短语代替数学表达式，然后使用一些实现的算法进行 pos-tagging。所以问题是如何实现这种替换，或者一般来说，如何实现对文本的后标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:24:55.000

**用一个唯一**的单词替换所有数学公式似乎是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T15:51:26.363

我在斯坦福标记器上实现了一个公式替换算法，它工作得很好。正如 abecadel 所写的那样，要走的路是用一个独特但新的单词替换每个公式，我使用了一个单词和一个哈希“formula-duwkziah”的组合。

# html - 网站在 Mozilla 中不起作用，但在 IE 和 Chrome 中起作用

> ID：15687446
> 
> 赞同：0
> 
> 时间：2013-03-28T16:40:49.800
> 
> 标签：html, css, firefox

正如标题所暗示的我的网站，[www.contrabang.com](http://www.contrabang.com)似乎在 Moxilla 中不起作用。但它在谷歌浏览器中运行良好，而在 IE 中则不太好。这是我第一次制作网站，如果我犯了任何初学者错误，请提前道歉。但我似乎无法找到解决方案。

HTML如下：

```
 <div class="icons">
              <a class="twitter" href="http://www.twitter.com/kadeemlaurie"></a>
              <a class="facebook" href="http://www.facebook.com/pages/Contrabang/127379984089682"></a>
              <a class="googleplus" href="http://googleplus.com/pages"></a>
             </div>

            <div id="wrap">
              <div id="featured">
                <div class="wrap">
                  <div class="textwidget">
                    <div class="cup">
                      <img src="..\Contrabang\img\red-cup.png" height="200">
                    </div>
                  </div>
                </div>
              </div>

              <div id="theFixed"><h1><a href="#">CONTRABANG</a></h1></div>

            <div class="bg1">

              <hgroup class="billboard second">
                <h2 style="font-size: 33px; opacity: 1; font-family: 'dosis'">
             We are an events management agency based in London. We create memorable experiences. Check out our upcoming event.</h2>

            </hgroup>

            <br>
            <br>
            <br>

            <div class="pad">
             <a href="#" target="_blank"> <img src="..\Contrabang\img\Contrabang.jpg"  width="300" height="400"></a>
            </div>
                <h2 style="font-size: 33px; opacity: 1; font-family: 'dosis'">
             Buy Tickets: 07949747971</h2>
            </div>

            </div>

            </section> 
```

& 主要的 CSS

```
 .main{text-align:center;}

                  #featured {
                    background: #E94F78 url(http://www.creativityfluid.com/wp-content/themes/creativityfluid/images/img-bubbles-red.png) no-repeat top;
                    background-size: 385px 465px;
                    color: #fff;
                    height: 535px;
                    overflow: hidden;
                    position: relative;
                    z-index: -2;
                  }

                  #featured .wrap {
                    overflow: hidden;
                    clear: both;
                    padding: 70px 0 30px;
                    position: fixed;
                    z-index: -1;
                    width: 100%;
                  }

                  #featured .wrap .widget {
                    width: 80%;
                    max-width: 1040px;
                    margin: 0 auto;
                  }

                  .textwidget{
                    padding: 0;
                  }

                  #wrap {
                    margin: 0 auto;
                    padding: 0;
                  }

                  .cup{

                    margin-top:210px;
                  }

                  body, h1, h2, h3, p {
                    margin: 0; 
                    padding: 0;
                  }

                  a { 
                    text-decoration: none;
                  }

                  #theFixed{
                    position:fixed;
                    background-image:url(http://s10.postimg.org/wyyotlk15/krystalrae_2012_fall_print_leopard_sketch.jpg);
                    width:100%;
                    text-align:center;
                    overflow: hidden;
                    background-position: center;

                  }

                  h1{
                    font: 800 1.313em "proxima-nova", sans-serif;
                    font-size:3.125em;
                    text-align:center;
                    padding:10px 10px;
                    margin:20px 20px;
                    background-color:#E94F78;
                    padding-left: 0.15em;
                    text-decoration:none;
                    display:inline-block;
                    color:yellow;

                  }

                  h1 a{
                    text-decoration: none;
                    letter-spacing: 8px;
                            padding-left: 0.15em;
                    color:yellow;

                  }

                  .bg1{
                  background-image:url(http://www.coalmarch.com/sites/all/themes/coalmarch/images/paper-background-coalmarch-website-design.jpg);
                    width: 100%;
                    height:900px;

                    background-color: #e94f78;}

                  h2{

                  font-family: georgia;
                  font-size:3em;
                    color:black;
                  }

                  .billboard {
                    overflow: hidden;
                    width: 960px;
                    margin-left: auto;
                    margin-right: auto;
                      text-align: center;
                  }

                  .pad{
                    padding:20px;
                  }
                  }

                  .billboard a {
                    color: #000000;   
                  }

                  .billboard {
                    padding-top:230px;
                  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:43:05.497

尝试移除这个额外的支架。FF 在这里可能不像 Chrome 那样宽容：

```
 .pad{
                padding:20px;
              }
              } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:52:03.340

样式表的链接设置错误，我可以想象浏览器会以不同的方式处理这个问题。此外，您正在尝试从您的 c:\drive 加载文件，这显然是行不通的

# asp.net - Visual Studio 2012 - 尝试关闭程序时 XML 文档 (0,0) 中出现错误

> ID：15687447
> 
> 赞同：0
> 
> 时间：2013-03-28T16:40:50.470
> 
> 标签：asp.net, visual-studio-2012

当我尝试关闭 Visual Studio 2012 或发布到 Azure 云时，我遇到了这个奇怪的错误。它出现了一个警告框，上面写着“XML 文档 (0, 0) 中存在错误”并且不会t让我关闭程序，我必须结束进程才能退出。当我右键单击云项目并从上下文菜单中选择发布时，它也会出现。但是我可以打包项目。我觉得很奇怪。

关于可能是什么问题的任何想法？我尝试重新安装 VS 和 Azure SDK，但仍然收到错误消息。我还卸载了我的扩展程序，但仍然收到错误消息。不知道该怎么做。

**编辑**

我只在VS2012中遇到这个问题。我可以在 VS2010 中打开同一个项目，并且在关闭程序或将其发布到 Azure 时没有任何问题

# facebook - Facebook 主页和第三方网站可以分享赞吗？

> ID：15687448
> 
> 赞同：0
> 
> 时间：2013-03-28T16:40:52.723
> 
> 标签：facebook, facebook-graph-api

我正在努力解决这个 FB API 问题，我想知道是否可以在 FB 页面和网站之间分享点赞。

例如：我有一个网站 example.com，上面有一个类似社交插件的按钮，我还有一个 FB 页面（根据 FB 推荐，不知道为什么我需要一个）example.com。当用户点击喜欢时会发生什么？是否有可能将这些实体相互连接，以免点赞分散？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:43:10.053

您可以将 Facebook 的点赞按钮更改为包含页面 ID 的[**点赞框。**](https://developers.facebook.com/docs/reference/plugins/like-box/)

这方面的一个例子是：

```
<div 
    class="fb-like-box" 
    data-href="http://www.facebook.com/example.comFB" data-width="300" 
    data-height="300" data-show-faces="true" 
    data-stream="true" data-header="true">
</div> 
```

# drupal-7 - 如何删除从视图 UI 返回的结果

> ID：15687455
> 
> 赞同：0
> 
> 时间：2013-03-28T16:41:15.880
> 
> 标签：drupal-7, drupal-views, drupal-hooks

我使用 Views UI 得到了预期的结果。但我不想显示 Views UI 的输出中的特定记录>如何实现这一点，我需要任何挂钩吗？

前任。我的视图返回结果为 1,2,3,4。现在我不想在结果中显示 1 。我无法使用 hook_views_query_alter 更改查询，因为“where”子句中使用了 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:46:37.210

通过添加一个排除结果集中不需要的记录的条件来实现[hook_views_query_alter() 。](http://api.drupal.org/api/views/views.api.php/function/hook_views_query_alter/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T07:15:13.063

试试这个代码

```
function hook_views_pre_render(&$view) {

  if($view->name=="ViewName") {  

if($view->current_display=='Display') {

  unset($view->result[1]);

}
  }
} 
```

# iphone - 将应用程序在后台保持 10 分钟，同时在后台不执行任何操作

> ID：15687459
> 
> 赞同：1
> 
> 时间：2013-03-28T16:41:23.113
> 
> 标签：iphone, ios, objective-c, xcode, app-store

我的应用程序中有此代码-

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    ...
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
            if (bgTask != UIBackgroundTaskInvalid)
            {
                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;
            }
    }];
    //NO MORE CODE AFTER THAT
} 
```

我只想延长我的应用程序在后台运行的持续时间以处理来自外部源的一些事件。通过使用此代码应用程序，*有时*应用程序会因日志而崩溃 -

> *[app-name]*有超过允许时间的活动断言

谁能帮我这个？

即使它崩溃了，它也不会影响用户。由于应用程序在后台，用户不会知道崩溃。我只是担心应用商店评论被拒绝。需要紧急帮助！:(

**编辑：** 我的应用程序是通过异步 TCP 套接字与外部设备通信。使用上面的代码，当我将我的应用程序发送到后台时，它会再接收 10 分钟的数据。**10 分钟后**，当我将应用程序带到前台时，应用程序尚未关闭，但它显示套接字连接已断开。因此，一旦应用程序在 10 分钟后进入前台，它就会开始重新建立连接。

这发生在大约 80% 的测试用例中。剩下的 20% 会导致上述崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:46:10.060

你在后台在主线程上做什么工作？如果您阻止它，则不会调用过期处理程序块，[即](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)：

> 在应用程序的剩余后台时间达到 0 之前不久将调用的处理程序。您应该使用此处理程序来清理并标记后台任务的结束。未能明确结束任务将导致应用程序终止。处理程序在主线程上同步调用，因此在通知应用程序时会暂时阻止应用程序的挂起。

这将导致看门狗将您视为未能及时终止后台任务。

# javascript - 如何使用特定的 JavaScript 对象实例有效地注册 DOM 事件

> ID：15687460
> 
> 赞同：0
> 
> 时间：2013-03-28T16:41:23.737
> 
> 标签：javascript, javascript-events

在我的 Web 应用程序中，我有一个自定义对象，我使用对象函数构造函数定义了该对象，并通过构造函数原型应用了各种共享属性。

```
MyObject = function (Name) {
  this.Name = Name;
  this.ListItem1 = document.createElement('li');
  this.ListItem1.onclick = this.SetActive;
  this.ListItem2 = document.createElement('li');
  this.ListItem2.onclick = this.SetActive;
}

MyObject.prototype.SetActive = function () {
  alert('SetActive: ' + this.Name);
} 
```

现在这是一个简化的示例，我的实际对象附加了更多的 DOM 元素，并且每个 DOM 元素都有许多不同的事件侦听器。我的对象也有许多其他属性和方法。我还可能拥有该对象的数千个实例，因此代码效率很重要。

我现在的问题是，当触发 DOM 事件时，事件处理程序的“this”属性设置为实际的 DOM 元素，而不是我的对象实例。

例如：

```
var HelloObj = new MyObject('Hello');
HelloObj.SetActive();    
    //This alerts 'SetActive: Hello'

HelloObj.ListItem1.click();    
    //This alerts 'SetActive: undefined' because 'this' in SetActive
    //becomes ListItem1 and obviously ListItem1.Name is undefined 
```

那么如何将DOM元素的事件处理程序设置为函数指针（不是每个事件处理程序的新函数实例，当有大量对象实例时效率低下）但仍然保留对象实例本身的上下文'这'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:44:31.640

试试`bind()`这样：

```
this.ListItem1.onclick = this.SetActive.bind(this); 
//and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:56:59.733

我提出并现在使用的解决方案是将对象实例的引用附加到 DOM 元素，然后使用事件处理程序的包装函数通过该引用调用所需的函数：

```
MyObject = function (Name) {
  this.Name = Name;

  this.ListItem1 = document.createElement('li');
  this.ListItem1.Context = this;
  this.ListItem1.onclick = this.SetActiveHandler;

  this.ListItem2 = document.createElement('li');
  this.ListItem2.Context = this;
  this.ListItem2.onclick = this.SetActiveHandler;
}

MyObject.prototype.SetActiveHandler = function () {
  this.Context.SetActive();
}
MyObject.prototype.SetActive = function () {
  alert('SetActive: ' + this.Name);
} 
```

这解决了我所有的问题，尽管我并不完全满意，因为有一些陷阱。从视觉上看，它并不那么漂亮，而且更加复杂。它以编程方式创建了一个循环引用，我知道它通常不受欢迎，尽管在我的情况下，我认为它不会引起任何问题，因为我只担心现代浏览器，而且我相信循环引用是完全包含的，如果所有 DOM 元素都已从文档中删除，并且我删除了对 MyObject 实例本身的引用，所有内容都应该被完全垃圾收集（对此的一些反馈将不胜感激）。而且我知道将自定义属性附加到 DOM 元素也被认为是不好的做法，尽管我不知道这是否仍然是现代浏览器的问题（再次，一些反馈会很棒）。它还破坏了面向对象的流程，不得不通过第二个函数，我希望将事件处理程序直接附加到`SetActive()`.

有没有人有任何其他的解决方案，或者可以阐明我是否真的创造了比我解决的问题更多的问题？

# android - 如何将 mySQL 文件导入我的 Android 程序？

> ID：15687464
> 
> 赞同：1
> 
> 时间：2013-03-28T16:41:36.003
> 
> 标签：android, mysql, import

我有一个应用程序可以创建和更新它自己的 MySQL 数据库。我现在想允许用户导出数据库的副本（用于备份目的），然后在以后再次导入文件。在此过程中，我无需更改数据库的格式。

我不确定最好/最简单的方法来做到这一点。我已经能够让我的应用程序使用下面的代码将数据库导出到 SD 卡，但问题是 - 我怎样才能让我的应用程序再次导入这个文件？

```
 try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

        Toast.makeText(getBaseContext(), sd.toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getBaseContext(), data.toString(), Toast.LENGTH_LONG).show();

        if (sd.canWrite()) {
            String currentDBPath = "//data//"+ packageName +"//databases//"+ class_dbname; //dbList[0];
            String backupDBPath = "//data//"+ class_dbname; //dbList[0];
            File currentDB = new File(data, currentDBPath);
            File backupDB = new File(sd, backupDBPath);

            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
            Toast.makeText(getBaseContext(), backupDB.toString(), Toast.LENGTH_LONG).show();

        }
    } catch (Exception e) {

        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:10:44.870

我正在这样做：

```
 public boolean importDatabase(String dbPath) throws IOException {
    // Close the SQLiteOpenHelper so it will commit the created empty
    // database to internal storage.
    close();
    File newDb = new File(dbPath);
    File oldDb = new File(DB_FILEPATH);
    if (newDb.exists()) {
        FileUtils.copyFile(new FileInputStream(newDb), new FileOutputStream(oldDb));
        // Access the copied database so SQLiteHelper will cache it and mark
        // it as created.
        DBHelper.getWritableDatabase().close();
        return true;
    }
    return false;
} 
```

而“copyFile()”方法是：

```
public static void copyFile(FileInputStream fromFile, FileOutputStream toFile) throws IOException {
    FileChannel fromChannel = null;
    FileChannel toChannel = null;
    try {
        fromChannel = fromFile.getChannel();
        toChannel = toFile.getChannel();
        fromChannel.transferTo(0, fromChannel.size(), toChannel);
    } finally {
        try {
            if (fromChannel != null) {
                fromChannel.close();
            }
        } finally {
            if (toChannel != null) {
                toChannel.close();
            }
        }
    }
} 
```

问候

# c# - 从 dll 调用本机方法

> ID：15687468
> 
> 赞同：0
> 
> 时间：2013-03-28T16:41:59.113
> 
> 标签：c#, .net, visual-c++, dll, c++-cli

我正在尝试`MimeTex.dll`在 C++/CLI 项目的混合模式中使用。我通过以下方式包含 dll： `#pragma comment(lib,"MimeTex.dll")`

我试图调用这个方法： `CreateGifFromEq("expression","path");`

但编译器通知它不知道 CreateGifFromEq() 方法。

我没有在网上找到有关如何 `MimeTex.dll`在 C++ 中使用的资源。我只是在Pinvok的[这个链接](http://www.codeproject.com/Articles/11406/Enable-Your-Users-to-Write-Math-Equations-in-Your)中找到了如何将它与 C# 一起使用，例如：

```
[System.Security.SuppressUnmanagedCodeSecurity()]
internal class NativeMethods
{
    private NativeMethods()
    { //all methods in this class would be static
    }

    [System.Runtime.InteropServices.DllImport("MimeTex.dll")]
    internal static extern int CreateGifFromEq(string expr, string fileName);

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    internal extern static IntPtr GetModuleHandle(string lpModuleName);

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    [return: System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.Bool)]
    internal extern static bool FreeLibrary(IntPtr hLibModule);
} 
```

然后像这样称呼它：

```
NativeMethods.CreateGifFromEq(equation, tempGifFilePath); 
```

在 C++/CLI 的混合模式下，如何在没有 Pinvok 的情况下调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:47:33.467

你肯定是想写：

```
#pragma comment(lib,"MimeTex.lib") 
```

换句话说，您将 .lib 文件而不是 .dll 传递给链接器。编译 DLL 时，将生成一个 .lib 文件。

但这不是你的直接问题。编译器没有声明`CreateGifFromEq`. 那是因为您没有在 C++ 代码中包含库的头文件。这样做应该可以解决问题。

如果您只需要一个函数，那么在您的 C++ 代码中声明它应该是微不足道的。

```
__declspec(dllimport) extern int CreateGifFromEq(char *expr, char *fileName); 
```

您可能也需要将其包装在一个`extern "C"`块中。

实际上，在查看了库之后，源代码提供的头文件并没有声明该函数，即使它存在于库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:49:14.400

在 C++/CLI 中，您可以像在 C# 中一样使用 P/Invoke。

如果您不想使用 P/Invoke，另一种方法是使用[LoadLibrary加载 DLL 并使用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)[GetProcAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)获取指向函数的指针。

* * *

下面是 C++/CLI 中的 C# 代码的等价物：

```
using namespace System;
using namespace System::Runtime::InteropServices;

private ref class NativeMethods abstract sealed
{
internal:
    [DllImport("MimeTex.dll")]
    static int CreateGifFromEq(String^ expr, String^ fileName);

    [DllImport("kernel32.dll")]
    static IntPtr GetModuleHandle(String^ lpModuleName);

    [DllImport("kernel32.dll")]
    [returnvalue: MarshalAs(UnmanagedType::Bool)]
    static bool FreeLibrary(IntPtr hLibModule);
}; 
```

如您所见，除了一些小的语法更改外，它几乎与 C# 代码相同。

下面是使用 LoadLibrary 和 GetProcAddress 的方法（其优点是不需要编组，这在 C++ 中是不必要的）：

```
HMODULE hModule = LoadLibrary(L"MimeTex.dll");
int (*fpCreateGifFromEq)(WCHAR*, WCHAR*) = GetProcAddress(hModule, "CreateGifFromEq");
(*fpCreateGifFromEq)(L"expression", L"filename"); 
```

您不需要对 GetModuleHandle 和 FreeLibrary 执行此操作，因为它们来自 kernel32.dll，因此您可以只包含 Windows.h 并正常调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:55:28.510

有一种更清洁的做事方式：

创建一个 C++/CLI 项目。它将成为 C# 和 C++ 之间的接口（这是 C++/CLI 的目标）。

使您的 C# 项目具有对这个新程序集的引用。

在您的新 C++/CLI 项目中，配置项目选项，以便您指向包含 mimetex .h 文件的目录以供编译器编译您的项目，以及包含 .lib/.dll 的目录用于链接器。

在您的 C++/CLI 部分中，您只需在函数中编写 C++。它们暴露给您的 C# 程序集，但在内部它只是像往常一样调用 C++ 函数。 *（您应该查看 C++CLI 教程以了解如何处理字符串以将它们转换为本机 char*或 std::string。我记得我必须看一下。）*

在您的 C# 部分中，您只需像普通 C# 函数一样调用 C++CLI 项目程序集公开函数，而不会注意到它背后调用的本机代码。

# maven - 在不包含内部 pom 文件的情况下创建 maven uberjar

> ID：15687469
> 
> 赞同：0
> 
> 时间：2013-03-28T16:41:59.387
> 
> 标签：maven, pom.xml, uberjar

我有一个 maven 构建设置，但有人要求我对 uberjar 进行一次更改，即不包含 pom 文件，因为它会弄乱我的客户后续构建，该构建使用我的 uberjar 作为依赖项。我知道这不是这样做的方法，但由于安全问题，我的客户无法访问我的中央仓库。因此，uberjar 被确定为一种部署方法。现在的问题是：有没有办法在通过 maven 创建 jar 时不包含 pom 文件？

谢谢，

布莱尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:47:55.290

我假设您正在使用 maven-assembly-plugin 来构建您的 uberjar 并使用程序集描述符。您要做的是指示程序集插件（通过程序集描述符）排除任何名为“pom.xml”的文件。例如：

```
<assembly>
<id>bin</id>
<formats>
    <format>jar</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<fileSets>
    <fileSet>
        <directory>target/classes</directory>
        <outputDirectory>/</outputDirectory>
    </fileSet>
</fileSets>
<dependencySets>
    <dependencySet>
        <outputDirectory>/</outputDirectory>
        <unpack>true</unpack>
        <unpackOptions>
            <excludes>
                <exclude>**/pom.xml</exclude>
            </excludes>
        </unpackOptions>
        <scope>runtime</scope>
        <useProjectArtifact>false</useProjectArtifact>
    </dependencySet>
</dependencySets>
</assembly> 
```

这里的关键是“unpackOptions”部分和其中包含的排除项。

希望对您有所帮助，如果可以，请记住将我的答案标记为正确，以便我获得声誉积分。

# c - 运行时检查失败 #2 - 在 c 编程中围绕变量堆栈

> ID：15687478
> 
> 赞同：0
> 
> 时间：2013-03-28T16:42:21.563
> 
> 标签：c

输入2时会出现“按任意键继续”，再按2次“enter”键，应该是关闭cmd，但是当按“enter”键时，会弹出run-time检查失败 #2 - 变量“user_choice2”周围的堆栈已损坏。

问题出在哪里？

这是代码

```
do{

    printf("Please key in your choice (1 to start , 2 to exit)\n>>");
    scanf("%s", &user_choice2);
    if (!isdigit(user_choice2))
    {
        printf("");
    }

}
while (!isdigit(user_choice2));
user_choice = atoi(&user_choice2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:46:51.027

正如`user_choice2`被传递给`isdigit()`我怀疑那`user_choice`是一个`char`. 使用格式说明符`"%c"`填充 a `char`，not `"%s"`。格式说明符`"%s"`将附加一个空终止符，写入不应写入的内存并在这种情况下破坏堆栈。

但是， as`user_choice2`被传递以`atoi()`将用户输入存储在`char[]`as 中`atoi()`需要一个以空字符结尾的字符串。`scanf()`通过指定要读取的最大字符数来防止缓冲区溢出：

```
char user_choice2[2];
scanf("%1s", user_choice2); 
```

然后`user_choice2[0]`在后续代码中查询。

`int`更简单：使用`scanf("%d", &user_choice);`where `user_choice`is an直接填充一个`int`。`scanf()`返回成功分配的数量，可用于检查用户输入的是否有效`int`：

```
if (scanf("%d", &user_choice) != 1)
{
    /* Not a valid int, skip input. */
    char ch;
    while ((ch = getchar()) != '\n' && ch != EOF);
} 
```

* * *

> 我可以知道如何防止用户在 int 后面跟着 char 键吗？例如 1a

该格式`"%n"`可用于确定处理结束的位置。使用`fgets()`and `sscanf()`(not `scanf()`) 来检测这个无效输入。例如：

```
char buf[32];
if (fgets(buf, 32, stdin))
{
    int value, pos;
    if (sscanf(buf, "%d%n", &value, &pos) == 1 &&
        pos == strlen(buf) - 1) /* -1 to account for new-line */
    {
        printf("value=%d\n", value);
    }
} 
```

# linux - 使用 LTTng 对 linux-kernel 跟踪中的性能计数器进行采样

> ID：15687479
> 
> 赞同：1
> 
> 时间：2013-03-28T16:42:26.440
> 
> 标签：linux, performance, kernel

我正在研究一些可用于跟踪 Linux 内核上的事件的工具和机制。我对 LTTng 工具特别感兴趣。我知道该工具允许您向跟踪事件添加额外的上下文，例如缓存未命中、分支未命中等性能计数器。有谁知道 LTTng 是否允许对性能计数器进行采样？如果是这样，您可以配置性能计数器，即选择要监视的事件吗？

# swing - 编辑组合框 Scala

> ID：15687484
> 
> 赞同：1
> 
> 时间：2013-03-28T16:42:42.393
> 
> 标签：swing, scala

我正在尝试实现一个简单的应用程序，在该应用程序中我可以在 Textfield 中编写一个项目，然后输入一个按钮，该按钮反过来通过将该项目插入组合框中来做出反应。

但是，我面临一个问题，即 scala 组合框摆动不可变（我猜）？

有没有办法使用 scala swing 使组合可变？

```
import scala.swing._
import scala.swing.event._
import scala.swing.BorderPanel.Position._

object ReactiveSwingApp extends SimpleSwingApplication {
  def top = new MainFrame {
    title = "Reactive Swing App"

    val button = new Button {
      text = "Add item" 
    }   
    var textfield = new TextField {
      text = "Hello from a TextField"
    }

    var items = List("Item 1","Item 2","Item 3","Item 4")
    val combo = new ComboBox(items)

    contents = new BorderPanel {
      layout(new BoxPanel(Orientation.Vertical) {
          contents += textfield 
          contents += button
          contents += combo   
          border = Swing.EmptyBorder(30, 30, 10, 30)
      }) = BorderPanel.Center
    }

    listenTo(button, textfield)
    reactions += {
      case ButtonClicked(button) =>
        // var items1 = textfield.text :: items  <- how can a read Item be inserted
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:46:14.017

你是对的，Scala-Swing[`ComboBox`](https://github.com/scala/scala/blob/v2.10.0/src/swing/scala/swing/ComboBox.scala#L1)包装器[`JComboBox`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)有一个不允许添加或删除的静态模型。不幸的是，Scala-Swing 中有很多功能不如底层 Java-Swing 组件。

然而，好消息是每个 Scala-Swing 组件都有一个 Java-Swing`peer`字段，您可以使用它来修补缺失的位。我认为最简单的方法是创建一个薄包装器[`javax.swing.DefaultComboBoxModel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultComboBoxModel.html)，例如：

```
class ComboModel[A] extends javax.swing.DefaultComboBoxModel {
  def +=(elem: A) { addElement(elem) }
  def ++=(elems: TraversableOnce[A]) { elems.foreach(addElement) }
} 
```

然后你的构造变成

```
val combo = new ComboBox(List.empty[String])
val model = new ComboModel[String]
model ++= items
combo.peer.setModel(model)  // replace default static model 
```

而你的反应

```
reactions += {
  case event.ButtonClicked(button) =>
    model += textfield.text
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T22:59:20.953

在“0___”，你测试过你的代码吗？它似乎有一些不匹配的问题。我正在使用 scala 2.10。

实际上有一种方法可以解决这个问题，而不必处理 ComboBoxModel。这是一个简短的例子：

```
class ComboBox(items: Array[String])
extends scala.swing.Component with java.awt.event.ActionListener with Publisher{

  override lazy val peer = new JComboBox(items)

  def +=(item: String) = peer.addItem(item)
  def -=(item: String) = peer.removeItem(item)
  def item = peer.getSelectedItem.asInstanceOf[String]
  def reset{peer.setSelectedIndex(0)}
  //additional methods

  //since its peer val is now a JComboBox

  peer.addActionListener(this)
  def actionPerformed(e: ActionEvent){
    //how to react once the selection changes
  }

  //since its also a scala.swing.Component extender
  listenTo(mouse.clicks) //and all the rest of the Publishers
  reactions += {
    case e: MouseClicked => //do something awesome
  }

  /* Also one could additionally extend the scala.swing.Publisher Trait
   * to be able to publish an event from here.
   */
  publish(MyEvent(item))
}

case class MyEvent(item: String) extends Event 
```

# ios - 在滚动视图中使用 imgview 返回视图时的 EXC_BREAKPOINT

> ID：15687485
> 
> 赞同：0
> 
> 时间：2013-03-28T16:42:43.917
> 
> 标签：ios, xcode, uiscrollview, uiimageview, xcode4.6

我从另一个视图调用像这样的滚动视图中带有 imgView 的视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    ImageViewController *view = [[self.menus objectAtIndex:[indexPath row]] objectForKey:@"VIEW"];
    view.imgPath = [[self.menus objectAtIndex:[indexPath row]] objectForKey:@"PATH"];
    [self presentViewController:view animated:YES completion:nil];
} 
```

然后我像这样在新视图中显示图像

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imgView;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSString *path = [[NSBundle mainBundle] pathForResource:self.imgPath ofType:@"png"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:path];
    self.imgView = [[UIImageView alloc] initWithImage:image];
    self.imgView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image.size};
    [self.scrollView addSubview:self.imgView];
    self.scrollView.contentSize = image.size;
    CGRect scrollViewFrame = self.scrollView.frame;
    CGFloat scaleWidth = scrollViewFrame.size.width / self.scrollView.contentSize.width;
    CGFloat scaleHeight = scrollViewFrame.size.height / self.scrollView.contentSize.height;
    CGFloat minScale = MIN(scaleWidth, scaleHeight);
    self.scrollView.minimumZoomScale = minScale;
    self.scrollView.maximumZoomScale = 1.0f;
    self.scrollView.zoomScale = minScale;

    [self centerScrollViewContents];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *doubleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(scrollViewDoubleTapped:)];
    doubleTapRecognizer.numberOfTapsRequired = 2;
    doubleTapRecognizer.numberOfTouchesRequired = 1;
    [self.scrollView addGestureRecognizer:doubleTapRecognizer];

    UITapGestureRecognizer *twoFingerTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(scrollViewTwoFingerTapped:)];
    twoFingerTapRecognizer.numberOfTapsRequired = 1;
    twoFingerTapRecognizer.numberOfTouchesRequired = 2;
    [self.scrollView addGestureRecognizer:twoFingerTapRecognizer];
}

- (void)centerScrollViewContents {
    CGSize boundsSize = self.scrollView.bounds.size;
    CGRect contentsFrame = self.imgView.frame;

    if (contentsFrame.size.width < boundsSize.width) {
        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
    } else {
        contentsFrame.origin.x = 0.0f;
    }

    if (contentsFrame.size.height < boundsSize.height) {
        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
    } else {
        contentsFrame.origin.y = 0.0f;
    }

    self.imgView.frame = contentsFrame;
} 
```

这一切都没有问题，我可以像这样忽略视图

```
- (IBAction)BackBtnPress:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

但是，当我想从 didSelectRowAtIndexPath 再次返回到图像视图时，应用程序崩溃并且我得到 EXC_BREAKPOINT

```
0x18e2756:  calll  0x1a37a00                 ; symbol stub for: getpid 
```

我已经尝试过调试，它通过 viewWillAppear 几乎没有问题，然后崩溃

关于问题可能是什么的任何想法？

谢谢！

**编辑**

启用僵尸没有帮助，禁用弧没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:54:28.837

我通过在选择行时创建新的 imageview 来修复它，而不是在加载带有 tableview 的第一个视图时，所以我的 didselectrowatindexpath 看起来像这样

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    ImageViewController *view = [ImageViewController alloc];
    view.imgPath = [[self.menus objectAtIndex:[indexPath row]] objectForKey:@"PATH"];
    [self presentViewController:view animated:YES completion:nil];
} 
```

# ios - 如何通过 AirPlay 播放加密流？

> ID：15687487
> 
> 赞同：5
> 
> 时间：2013-03-28T16:42:50.377
> 
> 标签：ios, objective-c, cocoa-touch, video-streaming, airplay

我想通过 AirPlay 播放加密流（可作为应用内购买）。这是一个示例 .m3u8 播放列表：

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXT-X-MEDIA-SEQUENCE:6849
#EXT-X-KEY:METHOD=AES-128,URI="http://auth.foo.ca/index.php?cmd=GetKey&key=bar.key"
#EXTINF:10,
http://media.foo.ca/1.ts
... 
```

当用户进行应用内购买时，会在设备上创建一个带有用户 ID 的 cookie。当用户尝试访问流时，index.php 会检查 cookie 并检查后端的用户 ID。如果用户已经为流付费，它会被解密并在设备上播放。

该流在设备上运行良好，但在 Apple TV 上出现错误。

关闭加密后，流也会在 Apple TV 上播放。

我已阅读[此](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AirPlayGuide/EncryptionandAuthentication/EncryptionandAuthentication.html)Apple 文档，但没有发现它有帮助。

# xslt - 需要根据一组规则将列表中的值转换为属性

> ID：15687489
> 
> 赞同：0
> 
> 时间：2013-03-28T16:42:59.840
> 
> 标签：xslt, xsd, xslt-1.0, xslt-2.0

我有一个 XML 事务，它有一个包含重复 DOLL 元素的容器元素 (PURCHASELIST)，其中包含一个 NAME 属性（在这种情况下，一个 NAME 说“KEN”，一个 NAME 说“BARBIE”。

```
 <PURCHASELIST>
        <DOLL NAME="KEN"/>
        <DOLL NAME="BARBIE"/>
    </PURCHASELIST> 
```

我想转换输出，以便将 NAME 属性中的值解析为具有以下规则的 BOX 属性：

如果只存在 Ken，则属性值为“KEN”。如果仅存在 Barbie，则属性值为“BRB”。如果 Ken 和 Barbie 都存在，则属性值为“ALL”。

因此，在上述情况下，我希望 RESULT 元素的 BOX 属性等于“ALL”。

```
 <RESULT TYPE="DOLLIES" SIZE=”MIN” BOX=”ALL”/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:13:40.423

XSLT 1.0 或 2.0（都可以）

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>
    <xsl:template match="PURCHASELIST">
        <RESULT TYPE="DOLLIES" SIZE="MIN">
            <xsl:attribute name="BOX">
                <xsl:choose>
                    <xsl:when test="count(DOLL[@NAME=('KEN', 'BARBIE')]) = 2">
                        <xsl:value-of select="'ALL'"/>
                    </xsl:when>
                    <xsl:when test="DOLL[@NAME='KEN']">
                        <xsl:value-of select="'KEN'"/>
                    </xsl:when>
                    <xsl:when test="DOLL[@NAME='BARBIE']">
                        <xsl:value-of select="'BRB'"/>
                    </xsl:when>
                </xsl:choose>
            </xsl:attribute>
        </RESULT>
    </xsl:template>
</xsl:transform> 
```

**[工作示例](http://xsltransform.net/b4GWV2)**

# c# - Enter 按钮自动单击按钮而不被初始化（C#/Visual Studio）

> ID：15687501
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:43:27.043
> 
> 标签：c#, winforms, enter, acceptbutton

只要您只使用鼠标导航，我的程序就可以编译并运行良好。我注意到，当我点击“Enter”时，它会自动注册为单击窗口中的一个按钮。我已经开始使用“AcceptButton”属性并将其设置为适当的按钮，甚至设置为“无”。似乎没有任何效果，它保留在默认按钮上，它似乎与“Enter”相关联。我注意到它将是我在代码中定义的第一个按钮。

长话短说，我想将 Enter 键的“默认”值删除为“AcceptButton”属性实际指定的值。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:15:23.560

假设 WinForm 有一个`TextBox`，将 TextBox.TabIndex 设置为 0。再次假设这个 TextBox 应该是用户与之交互的第一个 UI 元素。

然后，将所有按钮更改为 TabIndex > 0。

最后，将 Form.AcceptButton 更新为您希望默认接受/输入的按钮。

如果没有 TextBox 或其他可以具有较低 TabIndex 的元素，则该按钮将是加载表单时具有焦点的默认 UI 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:58:41.280

如果输入，您可以捕获`onKeyDown`事件而不处理它

```
protected override void OnKeyDown(KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        this.YOURBUTTON.PerformClick();
    }
} 
```

# ruby-on-rails - Rails 中的 ActionController::RoutingError (No route matches [GET] "/favicon.ico")

> ID：15687506
> 
> 赞同：34
> 
> 时间：2013-03-28T16:43:36.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试过用

```
<link href="/favicon.ico" rel="shortcut icon" /> 
```

还有这个

```
<link href="/assets/favicon.ico" rel="shortcut icon" /> 
```

但我仍然在日志文件中看到此错误

```
ActionController::RoutingError (No route matches [GET] "/favicon.ico"): 
```

favicon.ico 在公共文件夹中（我也将它放在 app/assets 文件夹中）

如何解决此错误？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T17:12:35.707

您收到此错误是因为您`favicon.ico`的`public/`应用程序目录中没有。因为该文件不存在，Rails 继续前进，`/favicon.ico`在`config/routes.rb`.

您可以通过以下两种方式之一解决此问题

1.  手动将`favicon.ico`文件放在`public/`应用程序的目录中。
2.  放入然后更改您的`favicon.ico`标签以使用`app/assets/images/``<link ...`[`image_path`](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path)

    ```
    <link href="<%= image_path("favicon.ico") %>" rel="shortcut icon" /> 
    ```

    这将放置`favicon.ico`in `public/assets/favicon.ico`，**而不是**文档根目录。

我建议坚持上面的**＃1**。

* * *

至于**为什么**这个请求甚至出现在您的日志中，许多现代浏览器会在域的根目录中查找`/favicon.ico`以用于书签，或在选项卡或地址栏中显示。这就是为什么最好将 保留`favicon.ico`在域的根目录中，以防浏览器决定（无论出于何种原因）忽略您的`<link rel="icon shortcut" ...`标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-19T16:38:24.933

这是 Rails 默认在 application.html.erb 中生成的：

```
<%= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon' %> 
```

当它在 /public 下时，它不会以这种方式找到 favicon.ico

如果您将标签更改为：它可以正常工作（在 /public 下找到 favicon.ico）：

```
<%= favicon_link_tag %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-23T03:17:46.897

放入`favicon.ico`我的公用文件夹不起作用，因此我结合了其他一些答案来提出这种简单的工作方法。

像这样复制[`favicon_link_tag`](http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/favicon_link_tag)和注入的输出`image_path`：

```
<link href="<%= image_path("favicon.ico") %>" rel="shortcut icon" type="image/vnd.microsoft.icon" /> 
```

现在放入`favicon.ico`您的`assets/images`文件夹中，您就可以设置了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-08T11:11:24.020

将**favicon.ico**放在**app/assets/images/**中，然后添加

```
<link href="<%= image_path("favicon.ico") %>" rel="shortcut icon" /> 
```

在布局文件中。

这对我有用。

# jquery - 使用 val("") 重置 textarea 后，jquery textarea append 不起作用

> ID：15687510
> 
> 赞同：2
> 
> 时间：2013-03-28T16:43:39.723
> 
> 标签：jquery, textarea

我能够成功地附加到 textarea 元素，如下所示：

```
jQuery("#edit-submitted-document-requests_mine").append("ITEM_0: selected \n\r"); 
```

但后来我用以下内容清空了textarea：

```
jQuery("#edit-submitted-document-requests_mine").val(""); 
```

这样做的原因是 textarea 现在是空的，但是如果我执行另一个附加操作，例如：

```
jQuery("#edit-submitted-document-requests_mine").append("ITEM_0: selected \n\r"); 
```

然后不添加此数据。

为什么在 textarea 重置后 jquery textarea append 不起作用`val("")`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:48:04.113

我不确定为什么`.append()`会这样，但您可能希望始终使用`.val()`. 您可以像这样附加：

```
jQuery("#edit-submitted-document-requests_mine").val(function(index, value) {
    return value + "ITEM_0: selected \n\r";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:46:15.857

你可以附加`val()`

```
 jQuery("#edit-submitted-document-requests_mine").val(function(i,v){ 
                       return v +  "ITEM_0: selected \n\r");
  }); 
```

# java - 如何在 Java GUI 中指定一系列有效值

> ID：15687521
> 
> 赞同：0
> 
> 时间：2013-03-28T16:44:21.147
> 
> 标签：java, swing, jslider, jspinner, ui-design

我正在创建一个 IMDB 应用程序，它显示和组织在您的计算机上找到的电影（通过 IMDB API 查找元数据）。

在我的搜索面板中，我想让用户选择查找在特定年份范围内（例如 1990 年到 2005 年之间）发行的电影。目前我使用这两个 JSpinner，一个用于最小年份，一个用于最大年份，并使用交叉验证来检查是否`maxYear >= minYear && minYear <= maxYear`但是我认为这不是非常用户友好。

我想要的是一个带有两个旋钮的 JSlider，一个用于最小值，一个用于最大值。这可能吗？您对如何使这个界面更加用户友好有任何其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:53:34.683

您可以有两个 JTextField，只需让用户键入最小和最大年份。

否则，两个 JSpinner 是另一种选择。开发用户从未见过的自定义组件对用户不友好。

您可以交叉连接两个 JSpinner，这样用户就不可能输入大于最大年份的最小年份。我还没有这样做，所以我没有代码示例向您展示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:18:54.880

这看起来很有希望：[创建一个 Java Swing 范围滑块](http://ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/)

这是我认为来自旧的 Tame 示例的另一个示例：[MThumbSlider](http://www.java2s.com/Code/Java/Swing-Components/ThumbSliderExample2.htm)

# wpf - DispatcherTimer 用于显示秒数

> ID：15687523
> 
> 赞同：1
> 
> 时间：2013-03-28T16:44:28.453
> 
> 标签：wpf, windows-phone-7, windows-mobile

我正在尝试显示一个简单的第二个计数器。我有一个刻度间隔为 1 秒的调度程序计时器和一个文本框，我在刻度处理程序中使用当前秒数更新该文本框。在滴答处理程序中有少量工作，即在某些整数上调用“tostring()”。

我的问题是秒数比应有的慢。即使我将间隔设置为 100 毫秒并在经过时进行检查，它仍然比应有的速度慢。（在一分钟的过程中，它大约慢了 6 秒）。

谁能指出我正确的方向来显示第二个准确的计数器？

编辑：这里有一些代码（在 .xaml.cs 中）。它取自一个运行良好的示例。不同之处在于我设置的是 TextBox 的 Text 属性，而不是另一个控件的 Value 属性。

```
...
        this.timer.Interval = TimeSpan.FromMilliseconds(100);
...

    private void OnDispatcherTimer_Tick(object sender, EventArgs e) {
        if (this.currentValue > TimeSpan.Zero) {
            this.currentValue = this.currentValue.Value.Subtract(TimeSpan.FromMilliseconds(100));
        } else {
            // stop timer etc
        }

        this.seconds.Text = this.currentValue.Value.Seconds.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T08:21:36.770

你记录时间的方式是有缺陷的。每次计时器滴答时，您都会增加一个计数器，但不能保证您的计时器将每 100 毫秒执行一次。即使是这样，您也必须考虑代码的执行时间。因此，无论您做什么，您的计数器都会漂移。

您必须做的是存储您开始计数器的日期。然后，每次计时器滴答作响时，您都会计算经过的秒数：

```
private DateTime TimerStart { get; set; }

private void SomePlaceInYourCode()
{
    this.TimerStart = DateTime.Now;
    // Create and start the DispatcherTimer
}    

private void OnDispatcherTimer_Tick(object sender, EventArgs e) {
    var currentValue = DateTime.Now - this.TimerStart;

    this.seconds.Text = currentValue.Seconds.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:12:28.960

如果您关心精确的时间，调度程序计时器不是一个好选择。

我觉得你应该分开计算秒数（时间）并在屏幕上显示。

使用 System.Threading.Timer 并在 Timer 回调中使用 Dispatcher.BeginInvoke()。

简单的例子：

```
 public partial class MainPage : PhoneApplicationPage
    {
        private DateTime _startDate;
        private int _secondDuration;
        private Timer _timer;
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            _startDate = DateTime.Now;
            _secondDuration = 0;

            _timer= new Timer(timerCallback, null, 0, 10);

        }

        private void timerCallback(object state)
        {
            var now = DateTime.Now;
            if (now > _startDate + TimeSpan.FromSeconds(1))
            {
                _secondDuration += 1;
                _startDate = now;
                Dispatcher.BeginInvoke(() => { Counter.Text = _secondDuration.ToString(); });
            }
        }
    } 
```

在每 10 毫秒计时器检查一秒钟后，并打印到文本框经过的秒数

或者你可以这样做：

```
public partial class MainPage : PhoneApplicationPage
{
    private Timer _timer;
    private int _secondDuration;

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        _timer = new Timer(timerCallback, null, 0, 1000);

    }

    private void timerCallback(object state)
    {

        _secondDuration += 1;
        Dispatcher.BeginInvoke(() => { Counter.Text = _secondDuration.ToString(); });

    }
} 
```

# java - Java中的细谷三角

> ID：15687526
> 
> 赞同：0
> 
> 时间：2013-03-28T16:44:33.090
> 
> 标签：java

目标：单独创建细谷三角形的递归表示。

你的任务：著名数学家 Haru Hosoya 描述了一个三角形（见下文），它是基于斐波那契数列的三角形数字排列。从用户那里获取一个高度并使用一个数组来存储每一行​​的值。使用递归方法打印出适当数量的细谷三角形。不要假设输入会很好。您还应该实现 try...catch 块来捕获错误输入。

这是我到目前为止的代码：

```
public class HosoyaTri {

    public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        boolean continueLoop = true;
        int num = s.nextInt();
        do {
            try {
                System.out.println("How many levels?");

                System.out.println(num + " levels");
                continueLoop = false;
            } catch (InputMismatchException im) {
                System.err.println("I said INTEGER, try again");
                s.nextLine();
            } catch (Exception e) {
                System.err.println("What did you do?");
            }
        } while (continueLoop);
        int triangle[][] = new int[num][num];
        for (int i = 0; i < num; i++) {
            for (int j = 0; j < num; j++) {
                triangle[i][j] = 0;
            }
        }
        for (int i = 0; i < num; i++) {
            triangle[i][0] = 1;
        }
        for (int i = 1; i < num; i++) {
            for (int j = 1; j < num; j++) {
                triangle[i][j] = triangle[i - 1][j - 1] * triangle[i - 1][j];
            }
        }
        for (int i = 0; i < num; i++) {
            for (int j = 0; j <= i; j++) {
                System.out.print(triangle[i][j] + " ");
            }
            System.out.println();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:51:01.437

一个问题是您在输入循环之前读取了一次级别数。然后，您会提示您输入一个级别，然后`num`在不给用户任何提供输入的机会的情况下进行打印！你应该解决这个问题。您还应该针对`num <= 0`.

至于如何使用递归，[细谷三角形](http://en.wikipedia.org/wiki/Hosoya%27s_triangle)中的条目可以递归定义：

> H [0, 0] = H [1, 0] = H [1, 1] = H [2, 1] = 1
> H [n, j] = H [n−1, j] + H [n−2, j]或 H [n, j] = H [n−1, j−1] + H [n−2, j−2]

另一个（等效）定义是：

> H [n, i] = F [i+1] × F [n−i+1]

其中 F [n]是第 n^个 [斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)，递归定义为：

> F [0] = 0
> F [1] = 1
> F [n] = F [n-1] + F [n-2] (n > 1)

我建议使用这些定义之一在您的类中编写一个（递归）静态方法，该方法计算三角形中一个条目的正确值（给定`n`并`j`作为参数）。然后你可以消除`triangle`变量和初始化它的所有代码。只需运行您的输出循环并替换对递归方法的调用，您现在可以在其中访问`triangle`. （如果由于某种原因您需要显式构建三角形，只需通过调用递归方法来初始化每个元素。顺便说一句：不需要将元素初始化`triangle`为 0；Java 在分配矩阵时会自动执行此操作。）

# python - 按子模型中的值获取条目

> ID：15687528
> 
> 赞同：0
> 
> 时间：2013-03-28T16:44:37.183
> 
> 标签：python, django, model, filter

我有以下模型：

```
class Parent(models.Model):
    title = models.CharField(max_length=255)

class Child(models.Models):
    title = models.CharField(max_length=255)
    parent = models.ForeignKey(Parent) 
```

如何从父级获取所有条目，其中子级计数等于 0？我需要通过父模型来完成，如下所示：

```
 Parent.objects.filter(smth_condition) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:46:37.617

. 从 django.db.models 导入计数

```
Parent.objects.annotate(cc=Count('child')).filter(cc=0) 
```

*   [一般注释文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset)
*   [在注释中使用相关模型的文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#following-relationships-backwards)
*   [按注释过滤的文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#filtering-on-annotations)

> 可以使用 annotate() 子句生成每个对象的摘要。当指定 annotate() 子句时，QuerySet 中的每个对象都将使用指定的值进行注释。
> 
> 以类似于[跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)的方式，在与您查询的模型或模型相关的字段上的聚合和注释可以包括遍历“反向”关系。此处也使用相关模型的小写名称和双下划线。
> 
> 也可以过滤带注释的值。注释的别名可以像任何其他模型字段一样在 filter() 和 exclude() 子句中使用。

另一种方法可能更有效，具体取决于您的表，就是

```
Parent.objects.filter(child=None) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:51:51.153

也试试

```
Parent.objects.filter(child=None)
# or
Parent.objects.filter(child__isnull=True) 
```

# java - Google App Engine - 登录时出现 InvalidClassException

> ID：15687529
> 
> 赞同：0
> 
> 时间：2013-03-28T16:44:39.800
> 
> 标签：java, google-app-engine, session, serialization

我正在使用自定义类 UserProfile 来管理我在 Google 应用程序引擎中的会话，但我收到错误消息（当用户访问应用程序的默认 servlet 时）：

```
javax.servlet.ServletException: java.lang.RuntimeException: java.io.InvalidClassException: ro.expert.evt.shared.entities.ObjectModel; local class incompatible: 
stream classdesc serialVersionUID = -2824144882306533912, 
local class serialVersionUID = 6500787607817458947 
```

我知道问题是我更新了我的课程，当我部署我的应用程序时，它没有 serialVersionUID。

我的问题是：

1.  如果我设置了生成的serialVersionUID，问题会再次出现吗？每次我修改我的用户类时，我都要重新生成它吗？

2.  如何为我已经登录的用户解决这个问题？我如何使他们的会话无效（“清除”他们的 cookie 应该可以工作）

编辑：清除整个内存缓存会使用户会话无效吗？

我应该调用 getSession().invalidate() 但我无法运行任何代码来捕获异常：

```
Caused by: java.lang.RuntimeException: java.io.InvalidClassException: ro.expert.evt.shared.entities.ObjectModel; local class incompatible: stream classdesc serialVersionUID = -2824144882306533912, local class serialVersionUID = 6500787607817458947
    at com.google.apphosting.runtime.SessionManagerUtil.deserialize(SessionManagerUtil.java:57)
    at com.google.apphosting.runtime.jetty.MemcacheSessionStore.getSession(MemcacheSessionStore.java:39)
    at com.google.apphosting.runtime.jetty.SessionManager.loadSession(SessionManager.java:327)
    at com.google.apphosting.runtime.jetty.SessionManager.getSession(SessionManager.java:301)
    at org.mortbay.jetty.servlet.AbstractSessionManager.getHttpSession(AbstractSessionManager.java:237)
    at org.mortbay.jetty.servlet.SessionHandler.setRequestedId(SessionHandler.java:246)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:136)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
... 16 more 
```

在我的初始 servlet 中是否有可以覆盖的方法，以便我可以捕获上面的异常并使用户的会话无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:48:49.770

是的，您必须提供明确的 serialVersionUID 值以避免此错误。您可以在部署或/和类修改之间保持相同的值。

对于现有用户，您可以使用 GAE 的版本控制功能。使用增加的版本进行部署，例如现有的 GAE 应用程序 v.1，因此将新代码部署为 v.2，然后您可以将默认版本重新指向新版本……因此现有用户仍将继续使用旧版本……但新用户将打新版本。

# ios - 创建自定义 UIButton 但出现的高度和渐变不正确

> ID：15687533
> 
> 赞同：0
> 
> 时间：2013-03-28T16:44:54.987
> 
> 标签：ios

我正在创建 UIButton 的子类并在代码中应用样式。出于某种原因，我的按钮没有选择自定义渐变，而且按钮的高度也太小了。如何调整 uibutton 的高度以获得更多填充。

![在此处输入图像描述](../Images/ef1c19b633511597d4dce473096ededf.png)

这是代码：

```
@implementation DefaultButton

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(id) initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];

    // Set the button Text Color
    [self setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [self setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];

    // Set default backgrond color
    [self setBackgroundColor:[UIColor blackColor]];

    // Draw a custom gradient
    CAGradientLayer *btnGradient = [CAGradientLayer layer];
    btnGradient.frame = self.bounds;
    btnGradient.colors = [NSArray arrayWithObjects:
                          (id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor],
                          (id)[[UIColor colorWithRed:51.0f / 255.0f green:51.0f / 255.0f blue:51.0f / 255.0f alpha:1.0f] CGColor],
                          nil];
    [self.layer insertSublayer:btnGradient atIndex:0];

    // Round button corners
    CALayer *btnLayer = [self layer];
    [btnLayer setMasksToBounds:YES];
    [btnLayer setCornerRadius:5.0f];

    // Apply a 1 pixel, black border around Buy Button
    [btnLayer setBorderWidth:1.0f];
    [btnLayer setBorderColor:[[UIColor blackColor] CGColor]];

    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:53:26.160

对于高度，您可以执行 self.frame.size.height=30; （或者任何你想要的高度），把它放在 init 方法中。

至于梯度，我不确定

# ruby-on-rails - 如何在 Rails 中执行此命令（curl）？也就是说，哪个库包含允许我以这种方式传递 API 密钥的工具？

> ID：15687537
> 
> 赞同：0
> 
> 时间：2013-03-28T16:45:10.780
> 
> 标签：ruby-on-rails, ruby, curl, sinatra

这是我需要执行的命令：（使用示例 API 密钥）

```
curl -v -u 1971800d4d82861d8f2c1651fea4d212:api_token \
-X GET https://www.toggl.com/api/v8/workspaces/777/tasks 
```

我正在编写一个基于 dashing/sinatra 的仪表板，其中显示了来自我们 Toggl 帐户的信息摘要。我的问题是，如何使用类似的东西在 sinatra 中打开这个 url

`open('http://...) do |f|`

成功的 curl 返回一个数组 (json)，我可以解析它以获取我需要的信息。

我不完全确定如何解决这个问题。我有一些想法，但它们还不够完善，无法正确评论它们。我想我会从你们所有人那里得到灵感和信息。

我全是耳朵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:48:21.787

看看 HTTParty。自述文件中的示例基本上准确地显示了您希望使用 auth 标头执行的操作：

[https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty)

# javascript - 可调整大小的元素边框

> ID：15687541
> 
> 赞同：1
> 
> 时间：2013-03-28T16:45:22.220
> 
> 标签：javascript, jquery, hover, border, children

我有一个名为“内容”的 div。“内容”的所有子 div 都是可调整大小的，并且在悬停时有一个边框，如下所示：

```
$('#content div').resizable({});
$('#content div').mouseleave(function(){
$(this).removeClass('borderClass');
});
$('#content div').mouseenter(function(){
$(this).addClass('borderClass');
}); 
```

问题是出现了可调整大小元素两侧的边框。示例：http: [//jsfiddle.net/hyEhh/6/](http://jsfiddle.net/hyEhh/6/)

我如何给“内容”的所有孩子一个边框，除了当你增加 div 时出现在边线上的边框？

编辑* 我必须能够使用 javascript/jQuery 动态添加边框。这个小提琴只是一个例子，我希望能够在悬停时添加边框，无论“内容”中有多少个 div

我尝试过但不明白为什么不起作用的一件事是：

```
if(document.body.style.cursor = "n-resize") {
        $(this).removeClass('borderClass');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:53:58.293

它基本上是创建边框的可调整大小的 div，因为 resizble 会动态地向它添加另一个 div（检查您的元素）......并且您的选择器适用于里面的所有 div `#content`。一种方法是调用所有需要单独悬停的元素...或其他方式将所有由可调整大小创建的 div 保留在选择器中...。

试试这个

```
 $('#content div').resizable({});

$('div#test,div#test2').hover(function(){
     $(this).addClass('borderClass');
    },function(){

         $(this).removeClass('borderClass');
    }); 
```

并使用`hover()`而不是两个单独的事件处理程序...悬停是`mouseenter`和的简写`mouseleave`

**更新**

```
 $('#content div:not(".ui-resizable-handle")').hover(function(){
        $(this).addClass('borderClass');
    },function(){

        $(this).removeClass('borderClass');
    }); 
```

这是没有选择动态创建的调整大小的 div.. 无需在 HTML 中添加任何内容，只需使用 jquery`not`方法...

[小提琴在这里](http://jsfiddle.net/hyEhh/8/#update)
[更新了小提琴](http://jsfiddle.net/hyEhh/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:49:39.037

为每个需要边框的元素添加一个通用类名。

```
<div id=content>
    <div id=test>BLABLA
        <div class="child" id="test2">lala</div>
    </div>
</div> 
```

然后匹配您在 jQuery 中使用的 CSS 选择器：

```
$('#content div').resizable({});
$('#content div.child').mouseleave(function(){
    $(this).removeClass('borderClass');
});
$('#content div.child').mouseenter(function(){
    $(this).addClass('borderClass');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:49:59.713

有几种方法可以做到这一点。第一种方法是给你的孩子分配一个班级并这样称呼它，

```
<div id=content>
    <div id=test>BLABLA
        <div class="className" id="test2">lala</div>
    </div>
</div>

$('#content div').resizable({});
$('#content div').mouseleave(function(){
    $('.className').removeClass('borderClass');
});
$('#content div').mouseenter(function(){
    $('.className').addClass('borderClass');
}); 
```

第二个是搜索作为父 div 的子元素的元素。

```
$('#content div').resizable({});
$('#content div').mouseleave(function(){
    $(this).children().removeClass('borderClass');
});
$('#content div').mouseenter(function(){
    $(this).children().addClass('borderClass');
}); 
```

如果您只想为悬停在其上的单个可调整大小的元素添加边框，则非常简单。您可以如上所述为元素分配一个类，使用此类选择它们，并将单击事件绑定到它。

```
<div id=content>
    <div id=test>BLABLA
        <div class="className">lala</div>
        <div class="className">lala</div>
        <div class="className">lala</div>
        <div class="className">lala</div>
    </div>
</div>

$('.className').hover(function(){
    $(this).toggleClass('borderClass');
}); 
```

请注意，我在这里使用了 toggleclass 方法，因为它将获得与在单独的行中添加和删除类相同的结果。

要实现只有顶部和底部边框，您的 css 类应该看起来像

```
.borderClass
{
border-top:2px solid #000000;
border-right:none;
border-bottom:2px solid #000000;
border-left:none;
} 
```

# ruby - 将正文拆分成句子但保留标点符号？

> ID：15687542
> 
> 赞同：6
> 
> 时间：2013-03-28T16:45:22.773
> 
> 标签：ruby, regex

我正在尝试在 2 段 html 载文文本之间产生类似 wiki 的人类可读差异。我正在使用 diff-lcs ，第一步是将字符串（字符数组）分成句子数组，但保留它们的标点符号。

```
"I am a lion. Hear me roar! Where is my cub? Never mind, found him.".magic_split(/[.?!]/)
# => "I am a lion." "Hear me roar!" "Where is my cub?" "Never mind, found him." 
```

这应该可以解决问题

```
"I am a lion. Hear me roar! Where is my cub? Never mind, found him.".gsub(/[.?!]/, '\1|').split('|') 
```

除了 gsub 似乎无法插入字符`.?!`。相反，它返回了这个

```
"I am a lion| Hear me roar| Where is my cub| Never mind, found him|" 
```

进行非破坏性拆分的最简单方法是什么？因为它保留了分割的字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T16:50:51.683

`scan`应该做的伎俩（扔`strip`在那里摆脱尾随空格）。

```
s = "I am a lion. Hear me roar! Where is my cub? Never mind, found him."
s.scan(/[^\.!?]+[\.!?]/).map(&:strip) # => ["I am a lion.", "Hear me roar!", "Where is my cub?", "Never mind, found him."] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:52:24.340

我认为应该是`\0`

```
>> string = "I am a lion. Hear me roar! Where is my cub? Never mind, found him."
>> string.gsub(/[.?!]/, '\0|') 
   # "I am a lion.| Hear me roar!| Where is my cub?| Never mind, found him.|" 
```

# android - 在 Android 上拨打和拨打号码

> ID：15687545
> 
> 赞同：0
> 
> 时间：2013-03-28T16:45:45.917
> 
> 标签：android, time, phone-call

我想编写一个应用程序来让我的生活更轻松。每次我去上班时，我都必须去一个电话，拨打一个号码并按一些数字，然后提供我的工作 ID 和功能来预订/注册我的工作时间。

所以现在我想制作一个带有一些按钮的小应用程序来注册和注销。我想按下按钮并在后台拨打电话并模拟拨打我的 ID 和功能。

我发现了如何拨打电话： [http ://www.mkyong.com/android/how-to-make-a-phone-call-in-android/](http://www.mkyong.com/android/how-to-make-a-phone-call-in-android/)

但我没有找到如何将其放入后台并让应用程序假装拨号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:49:10.333

将号码放在您的联系人列表中不是更简单吗？然后为每个创建一个小部件。当我检查我的语音邮件时，我会做同样的事情来自动输入密码。请参阅：[http ://www.androidcentral.com/adding-pauses-contacts-dialing-extensions](http://www.androidcentral.com/adding-pauses-contacts-dialing-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:49:34.987

我知道这是一个开发者问答网站，但你看过 Tasker 吗？非常健壮。非常彻底。

[https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm](https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm)

# c# - 需要 Unity Resolve 的扩展方法

> ID：15687547
> 
> 赞同：0
> 
> 时间：2013-03-28T16:45:47.033
> 
> 标签：c#, .net, dependency-injection, unity-container

我有一些对我的应用程序来说相当核心的扩展方法。我使用它们通过中央异常处理程序将所有调用路由到我的 OData 服务。它看起来像这样：

```
var results = Entites.Customers.Where(x=>x.IsActive).Invoke(); 
```

这`Invoke()`是我的扩展方法，一切都很好！

但是当我遇到异常时，我想记录它。

我发现的问题是我`ILogger`无法在`static`类内部解决（该类**必须**是静态的才能具有扩展方法。）

**有没有办法解决一个`static`类内部的统一管理接口？** 还是依赖注入模式无法处理这个 C# 特性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:49:06.187

一种选择是在静态类中没有任何实现。创建一个包含方法实现的非静态类（不是作为扩展方法），然后让扩展方法除了调用非扩展实现之外什么都不做。

之后，实现不再在静态类中。

```
public static class MyExtension
{
    public static void Invoke<T>(this IQueryable<T> query) 
    {
        MyExtensionImplementation.Invoke(query);
    }
}

internal class MyExtensionImplementation
{
    public static void Invoke<T>(IQueryable<T> query) 
    {
        //actual work
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:05:17.573

一个坏消息——没有办法做到这一点，一个好消息——你不需要在你的扩展方法中记录异常。只需让异常在静态类之外抛出并以适当的方式处理即可。

```
IResult results;
try
{
  results = Entites.Customers.Where(x=>x.IsActive).Invoke();
}
catch(YourOwnException ex)
{
  Log(ex, "The Business logic error.");
}
catch(ArgumentException ex)
{
  Log(ex, "Invalid arguments.")
}
...
catch(Exception ex)
{
  Log(ex, "Unknown error.");
} 
```

**编辑：**

> 它们中的大多数与通信相关，将在扩展方法中处理。只有少数与业务相关的内容将被重新抛出。

如果异常是“通信相关”或第 3 方，也许您不需要记录它们。在这种情况下，我将创建一个`TryInvoke()`不带日志记录的方法，该方法返回`TRUE`成功操作并有一个`OUT`参数。如果你想记录它们，你应该`ILogger`在你的`Invoke()`方法中注入。

```
if(Entites.Customers.Where(x=>x.IsActive).TryInvoke(out results))
{
  // Success
} 
```

# string - 解析字段外的数字并放入它自己的列

> ID：15687548
> 
> 赞同：0
> 
> 时间：2013-03-28T16:45:49.990
> 
> 标签：string, parsing, sql-server-2008-r2

我的数据如下所示

```
 Public Name       | Internal Name |
_____________________|_______________|
Name of object1 (#1) |    1345312    |
Name of object2 (#2) |    1387924    | 
..
object2000 (#2000)   |    6875238    | 
```

我希望将 (#*) 解析到它自己的列中。如下所示

```
Public Number |    Public Name   | Internal Name |
______________|__________________|_______________|
     (#1)     | Name of object1  |    1345312    |
     (#2)     | Name of object2  |    1387924    | 
..
     (#2000)  |    object2000    |    6875238    | 
```

我完全不知道我将如何开始这样做。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:50:42.593

```
SELECT 
  [Public Number] = CASE WHEN [Public Name] LIKE '%(#%' THEN
    SUBSTRING([Public Name], CHARINDEX('(', [Public Name]), 255)
    ELSE '' END,
  [New Public Name] = CASE WHEN [Public Name] LIKE '%(#%' THEN
    RTRIM(LEFT([Public Name], CHARINDEX('(', [Public Name])-1))
    ELSE [Public Name] END,
  [Internal Name]
FROM dbo.table; 
```

# javafx-2 - Javafx 和代理

> ID：15687549
> 
> 赞同：1
> 
> 时间：2013-03-28T16:45:53.257
> 
> 标签：javafx-2, javafx

可以将在您的网页上运行的 javafx 应用程序配置为使用代理服务器，即使 Web 浏览器未配置为使用代理服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:55:57.680

浏览器中的应用程序通常受到限制，可以使用打开 Sockets 等操作。

如果您已签署具有更广泛安全权限的应用程序，您可以为其设置代理设置，例如：

```
System.setProperty("http.proxyHost", "my-proxy.com");
System.setProperty("http.proxyPort", "80"); 
```

# r - 为什么对象在保存/加载到/从 RData 后变得不同？

> ID：15687552
> 
> 赞同：5
> 
> 时间：2013-03-28T16:45:57.507
> 
> 标签：r, object, load, save, rdata

我有一个名为的大型[ExpressionSet](http://rss.acs.unt.edu/Rdoc/library/Biobase/html/class.ExpressionSet.html)对象 ( [Bioconductor](http://bioconductor.org) ) `eset`。你能解释为什么会这样吗？为什么保存/加载后对象的副本与原始副本不同？

```
> e2=eset
> identical(e2,eset)
[1] TRUE
> save(e2,file="test.RData")
> rm(e2)
> e2 # just to check the removal
Error: object 'e2' not found
> load("test.RData")
> identical(e2,eset)
[1] FALSE 
```

还有其他方法可以检查两个对象的身份吗？

如果需要，我正在 Windows 7 下使用 R 2.15.1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T17:38:20.633

环境是少数 R 对象类型之一（连接是另一种），其保存和加载并不是完全相反的。

```
e <- new.env()
f <- e
identical(e,f)
# [1] TRUE
save("f", file="f.Rdata")
rm(f)
load("f.Rdata")
identical(e,f)
# [1] FALSE 
```

[`ExpressionSet`](http://rss.acs.unt.edu/Rdoc/library/Biobase/html/class.ExpressionSet.html)对象包含一个`assayData`槽，类[`AssayData`](http://rss.acs.unt.edu/Rdoc/library/Biobase/html/class.AssayData.html)，它被描述为“定义为和的类联合的容器类`list`” `environment`。虽然我的电脑上没有安装**eset**，但我猜想 和 的插槽`assayData`引用了不同的环境，导致返回.`eset``e2``identical(eset, e2)``FALSE`

# sqlite - 流畅的 NHibernate 单元测试

> ID：15687554
> 
> 赞同：2
> 
> 时间：2013-03-28T16:45:59.070
> 
> 标签：sqlite, unit-testing, fluent-nhibernate

我正在尝试编写一些持久性测试并验证针对数据库的映射，我的问题是（我可能在这里从根本上误解了一些东西）

前置条件

1.  数据库是手动创建的，处于不断变化的状态
2.  更改、添加或删除列名时需要更新映射
3.  我不想在测试期间影响数据库本身

理想情况下，我想采用当前的数据库模式（SQL 2008）并将其复制到内存中，这样我就可以安全地进行单元测试，因为我知道当我完成测试时，SQL 数据库将完好无损。

我已经研究过在内存中使用 SQLite，但是如果我理解正确，它将根据映射文件生成架构，而不是检查映射对数据库本身是否有效，那么我如何将我的 SQL 2008 数据库架构复制到 SQLite 中而不多努力？或者我应该在测试开始时构建一个新的 SQL 2008 数据库并在最后解构它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:22:24.947

使用内存中的副本而不是真实的数据库将证明您的实现会有所不同。

*   使用内存中的副本，您将拥有更快的集成测试，这将证明您的逻辑可以与内存中的表示一起正常工作。也许它只是用于映射目的。
*   使用真正的数据库，您将进行较慢的集成测试，这可以为您提供性能估计，并且您将证明您的逻辑在真实情况下工作得很好。显然，您需要一个临时测试数据库来在每个测试/夹具之前和之后设置和恢复。

根据我的经验，我发现第二种方法在集成测试中更有价值，而第一种方法通过模拟和存根进行单元测试。

希望这可以帮助。

# firewall - 瞻博网络网屏日志文件

> ID：15687562
> 
> 赞同：0
> 
> 时间：2013-03-28T16:46:21.277
> 
> 标签：firewall, router, scp

我正在尝试找到一种从 Juniper SSG5 复制日志文件的方法，以便我可以以编程方式分析它们。

我知道可以从瞻博网络 scp 文件，但我一直无法找到日志保存在设备上的位置。

找到这些日志（全部）的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:24:40.107

似乎没有简单的方法可以访问 Juniper Netscreen 上的日志文件，但它确实提供了使用 syslog 配置远程日志记录的选项。

这可以配置为指向网络上的系统日志服务器，该服务器又可以配置为将这些远程消息记录到本地文件（或将它们传递到另一个系统日志服务器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T20:04:09.383

show log 命令将为您提供文件名。
显示日志

user@host> 显示日志
总计 57518
-rw-r--r-- 1 个根 bin 211663 Oct 1 19:44 dcd
-rw-r--r-- 1 个根 bin 999947 Oct 1 19:41 dcd.0
-rw -r--r-- 1 个根 bin 999994 Oct 1 17:48 dcd.1
-rw-r--r-- 1 个根 bin 238815 Oct 1 19:44 rpd

# android - 使用 jni 包装 c++ 库

> ID：15687567
> 
> 赞同：2
> 
> 时间：2013-03-28T16:46:38.650
> 
> 标签：android, c++, android-ndk, java-native-interface

我已经成功地将一个 c++ 库添加到了 android 2.3.6 源代码树中。现在我想包装我的库以便从java中使用我已经在网上搜索了很多关于这样做的步骤但是我发现的几乎所有示例都是hello world示例和简单示例......来自这些示例我知道我必须创建一个 java 文件，调用我需要的本地函数，前缀为 native ，然后生成头文件并实现 c++ 文件。

但我不知道如何以这种方式调用我的库函数。这些标题和我的功能之间有什么联系..？我现在真的很困惑，我不知道如何开始所以，如果有人能告诉我包装 c++ 库的步骤（已经集成在 aosp 中），我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:23:21.447

这是一个相当复杂的问题，可能超出了这里简短回答的范围。那么，最好的办法可能是引导您找到一些比您目前找到的更好的文档。

这一系列博客文章似乎特别有用：[http ://thebreakfastpost.com/2012/01/21/wrapping-ac-library-with-jni-introduction/](http://thebreakfastpost.com/2012/01/21/wrapping-a-c-library-with-jni-introduction/)

您可能还会发现包装器自动生成器很有帮助。有一个我在这里没有尝试过：[http ://www.teamdev.com/jniwrapper/features/](http://www.teamdev.com/jniwrapper/features/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:09:57.637

如果我理解你的问题：

假设您有一个使用此方法的 c++ 库

```
int cPlusPlusMethod{
  // Your c++ implementation
} 
```

基本上你需要做的是：

1.  创建您需要的 java 方法

    本机 int javaMethod();

2.  按照您在找到的链接中看到的步骤创建 c++ 标头，您将拥有类似的内容：

    JNIEXPORT jint JNICALL Java_yourPackageName_yourJavaClass_javaMethod(JNIEnv *);

3.  现在你有了一个包含所有你需要的方法声明的 c++ 头文件。编写一个实现该头文件的 c++ 文件并复制粘贴该库的 c++ 实现。

JNIEXPORT jint JNICALL Java_yourPackageName_yourJavaClass_javaMethod(JNIEnv *env){ // 你的 c++ 实现 }

（您必须包含所有需要的导入并将 lib 的其他文件放在“jni”文件夹中。）

从你的 android 项目根文件夹执行 ndk-build ，就是这样。

也许这不是最聪明的方法，但至少对我来说它有效。显然，如果您有库源文件，如果您正在谈论静态库，那么这将有效，那么我无法为您提供帮助。

# r - ggplot2错误：signif（x，digits）错误：数学函数的非数字参数

> ID：15687569
> 
> 赞同：0
> 
> 时间：2013-03-28T16:46:44.573
> 
> 标签：r, ggplot2

我正在尝试使用 R 中的 ggplot2 使用以下数据绘制箱线图：

```
http://dl.dropbox.com/u/105195130/test.txt 
```

R代码如下：

```
#!/usr/bin/env Rscript

library(ggplot2)

f<-read.table("test.txt", header=TRUE, sep='\t')

f$Category <- factor(f$Category, levels=unique(as.character(f$Category)))
g<-ggplot(f, aes(Category, Scores)) + stat_boxplot(geom='errorbar', linetype="dashed")
 + geom_boxplot(stat="boxplot", aes(fill=Category)) + geom_vline(linetype="dashed") + 
scale_y_log2()

ggsave("test.pdf") 
```

我收到以下错误：

```
Error in signif(x, digits) : 
Non-numeric argument to mathematical function 
```

我试图用谷歌搜索错误并通过查看文件的模式和类来验证列“分数”（第二列）是否为非数字。我觉得很好。第一列是因子，第二列是数字。我无法理解我做错了什么。

任何帮助是极大的赞赏。

谢谢！

traceback() 打印以下内容：

```
19: f(unlist(l[numeric]))
18: get(x, envir = this, inherits = inh)(this, ...)
17: scales$y$labels()
16: get(x, envir = this, inherits = inh)(this, ...)
15: coord$compute_ranges(scales)
14: FUN(1:3[[1L]], ...)
13: lapply(seq_along(data), function(i) {
    layer <- layers[[i]]
    layerd <- data[[i]]
    grobs <- matrix(list(), nrow = nrow(layerd), ncol = ncol(layerd))
    for (i in seq_len(nrow(layerd))) {
        for (j in seq_len(ncol(layerd))) {
            scales <- list(x = .$scales$x[[j]]$clone(), y = .$scales$y[[i]]$clone())
            details <- coord$compute_ranges(scales)
            grobs[[i, j]] <- layer$make_grob(layerd[[i, j]], 
                details, coord)
        }
    }
    grobs
})
12: get(x, envir = this, inherits = inh)(this, ...)
11: facet$make_grobs(data, layers, cs)
10: ggplot_build(plot)
9: ggplotGrob(x, ...)
8: grid.draw(ggplotGrob(x, ...))
7: print.ggplot(plot, keep = keep, drop = drop)
6: print(plot, keep = keep, drop = drop)
5: ggsave("test.pdf") at test.R#10
4: eval(expr, envir, enclos)
3: eval(ei, envir)
2: withVisible(eval(ei, envir))
1: source("test.R") 
```

我是 R 新手，所以这对我来说没有意义，如果有人能解释我如何使用它来调试我的脚本，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:08:49.870

我的**ggplot2** (0.9.3.1) 版本没有`scale_y_log2`功能。但这是可行的：

```
library(scales)
g<-ggplot(tmp, aes(Category, Scores)) + 
    stat_boxplot(geom='errorbar', linetype="dashed")+ 
    geom_boxplot(stat="boxplot", aes(fill=Category)) + 
    geom_vline(linetype="dashed") + 
    scale_y_continuous(trans = log_trans(2)) 
```

我相信在过渡到 0.9.0 的过程中， `scale_y_log2`（连同许多其他 scale 功能）**已从 ggplot2**中移出并重新放入**scales包中。**你也许应该升级......？

# java - 将泛型返回类型与 Java 中的类似泛型变量进行比较

> ID：15687574
> 
> 赞同：0
> 
> 时间：2013-03-28T16:46:51.807
> 
> 标签：java, generics, comparison

我正在用 Java 编写一个通用链表，除了一个问题外，一切正常。

列表节点包含一个 E 类型的变量“数据”，我在通用链表代码中也有一个 E 类型的变量“tempData”。数据类型 E 将由使用链表的程序确定。

我要做的是通过调用节点函数getData（）从链接节点“数据”中检索变量并将其存储在一个名为tempData的变量中。

这是当前代码：

```
tempData = firstNode.getData(); 
```

我的问题是，在编译时我收到错误说它们是“不兼容的类型”。我知道在运行时它们将是相同的数据类型，但是我如何满足编译它的语法？

我尝试将代码放入：

```
if( firstNode.getData() instanceof tempData.getClass() ) 
```

但它不起作用，因为类应该是不允许调用任何方法的地方。我还尝试了以下方法，但它仍然有效，但我仍然得到原始编译错误。

```
if( (firstNode.getData()).getClass == tempData.getClass() ) 
```

非常感谢任何和所有的帮助，谢谢。

编辑 3-28-13

tempData 的声明是“E tempData;”

firstNode 的声明是“私有 ListNode firstNode;”

firstNode 中的数据声明为“私有 E 数据”；由 .getData() 获得；

LinkedList 类“公共类 LinkedList E”的标头

ListNode 类“公共类 ListNode E”的标头

标题中的两个 E 周围都有小于和大于符号，它们只是在发布时不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:52:08.470

一种可能的答案是将 Class 对象存储在您的列表中，如下所示：

```
Class<E> clazz; 
```

然后在构造函数中用正确的对象初始化它：

```
public MyList(Class<E> clazz) {
   this.clazz = clazz;
}

...

new MyList<E>(E.class); 
```

然后，您可以使用此类对象将对象转换为正确的类型：`clazz.cast(firstNode.getData())`.

可能有更好的解决方案，但在最坏的情况下，这种方法有效。

# php - 代码在 jsfiddle 中工作，但当我将所有代码放入我的网站时不起作用

> ID：15687576
> 
> 赞同：2
> 
> 时间：2013-03-28T16:46:57.273
> 
> 标签：php, javascript, jquery, html

我的目标是在 iframe（包含日历）的每一侧都有一个按钮，该按钮在单个 iframe 中的日历 #1 和日历 #2 之间来回切换。

有什么建议么？

```
|arrowLeft| |-----Iframe-------| |arrowRight| 
```

该代码在[jsfiddle](http://jsfiddle.net/PauWy/447/)中工作，但当我将所有代码放入我的网站时不起作用。

这是为什么？

```
HTML:

<p id="toggle">
<span> Left </span>
<span> </span>
</p>

<div id="left"> <iframe>LEFT CONTENT</iframe> L</div>
<div id="right"> <iframe>RIGHT CONTENT</iframe>R </div>

<p id="toggle">
<span></span>
<span> Right </span></p> 
```

CSS：

```
#right { display:none; } 
```

脚本：

```
$('#toggle > span').click(function() {
   var ix = $(this).index();

   $('#left').toggle( ix === 0 );
   $('#right').toggle( ix === 1 );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:18:47.357

既然你说你已经加载了 jquery ..

可能您的 onclick 设置器（jquery 代码）在加载文档之前运行（因此此时 document.body 中没有要设置的元素）。

在 jsfiddle（'No-Library' 纯 JS）中，代码（默认情况下）包装在：

```
window.onload=function(){
// your code here
}; 
```

那应该已经成功了。

当您在左侧选项面板中的“框架和扩展”下选择（默认）选项“onLoad”时，这就是 jsfiddle 所做的。

如果您选择“onDomready”，那么您的代码（当前）将被包装在一个名为 的函数中`VanillaRunOnDomReady`，如下所示：

```
var VanillaRunOnDomReady = function() {
// your code here
}

var alreadyrunflag = 0;

if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", function(){
        alreadyrunflag=1; 
        VanillaRunOnDomReady();
    }, false);
else if (document.all && !window.opera) {
    document.write('<script type="text/javascript" id="contentloadtag" defer="defer" src="javascript:void(0)"><\/script>');
    var contentloadtag = document.getElementById("contentloadtag")
    contentloadtag.onreadystatechange=function(){
        if (this.readyState=="complete"){
            alreadyrunflag=1;
            VanillaRunOnDomReady();
        }
    }
}

window.onload = function(){
  setTimeout("if (!alreadyrunflag){VanillaRunOnDomReady}", 0);
} 
```

请注意，这最终*仍会*以`window.onload`类似“onLoad”选项的形式结束。

如果您加载库 JQuery 1.9.1，那么情况会发生变化（有点）。
选项“onLoad”然后像这样包装你的代码：

```
$(window).load(function(){
// your code here
}); 
```

请注意，这基本上仍然与此答案中的第一个选项相同，但是以 JQuery 方式。

如果您选择“onDomready”选项（同时 JQuery 库在 JSFiddle 中加载），那么您的代码将被包装在：

```
$(function(){
// your code here
}); 
```

* * *

正如 ErikE 在下面的评论中指出的那样，由于您已经加载并使用了 JQuery，您可能还想使用另一种 JQuery 方式：

```
$(document).ready(function() { 
// your code here
}); 
```

最后，正如 ErikE 在他对您的问题的评论中所指出的那样（我忽略了一个严重的问题），`id`'s 是独一无二的。而你给这两个段落都赋予了id“toggle”。
相反，您应该给他们`class`“切换”并按类选择元素以分配 onclick 功能。

# javascript - 回调后的jQuery插入？

> ID：15687579
> 
> 赞同：6
> 
> 时间：2013-03-28T16:47:20.980
> 
> 标签：javascript, jquery

这不起作用：

```
$block.insertAfter(form);

$('.date', $block).datetime({
     userLang: 'en',
    americanMode: true
}); 
```

但这确实：

```
$block.insertAfter(form);

window.setTimeout(function() {
    $('.date', $block).datetime({
        userLang: 'en',
        americanMode: true
    });
}, 1000); 
```

`datetime()`是一个插件，我用 class 附加到输入元素`date`。显然 #1 不起作用，因为该元素在 DOM 中仍然不可用，等待 1 秒有效。但它很老套。如何扩展 jQuery 以接受`insertAfter()`方法或其他方式的回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:14:18.063

Wrap your code in the document-ready incantation:

```
$(function() {
    $block.insertAfter(form);

    $('.date', $block).datetime({
         userLang: 'en',
        americanMode: true
    });
}); 
```

And make sure this occurs *after* the datetime library is loaded. That is, this `<script>` tag should be after the `<script src="datetime.js">`. And make sure the `async` attribute is not set on the `<script>` tags.

# html - 当 LocalStorage 达到域的最大存储限制时会发生什么？

> ID：15687586
> 
> 赞同：2
> 
> 时间：2013-03-28T16:47:40.810
> 
> 标签：html, local-storage

当 LocalStorage 达到域的最大存储限制时会发生什么？

*   达到硬性限制并默默地停止接受新值
*   达到硬限制并抛出错误
*   达到软限制，浏览器使用修剪策略为新值腾出空间

有一个类似的 StackOverflow 问题：[localStorage 值的最大大小是多少？](https://stackoverflow.com/questions/2989284/what-is-the-max-size-of-localstorage-values)它回答了浏览器的存储限制是什么的问题，但该问题并没有询问或回答达到限制时究竟会发生什么。限制对我来说无关紧要，对我来说重要的是当达到限制时究竟会发生什么，以及我是否需要注意修剪客户端代码中的缓存，或者浏览器是否会这样做它自动为我服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:28:58.670

说明[规格](http://www.w3.org/TR/webstorage/#the-storage-interface)：

> 如果无法设置新值，则该方法必须抛出 QuotaExceededError 异常。（例如，如果用户禁用了站点的存储，或者超出了配额，设置可能会失败。）

所以理论上你应该总是使用[try-catch 子句](http://jsfiddle.net/yy5BZ/3/)来防止这个错误。

```
for (var i = 0;i<200000;i++){
    test += "sdfghyxcvbn123kjhajsdfkhuwehfkjs,dnfhkweufhkjsdf";
}
try{
    var result = window.localStorage.setItem("test",test);
} catch(e) {
    console.log(e.message);
} 
```

# c - 如何在 C 应用程序中使用 ArangoDB 图形 API

> ID：15687590
> 
> 赞同：3
> 
> 时间：2013-03-28T16:47:53.220
> 
> 标签：c, rest, arangodb

我正在尝试实现一个 C 应用程序，该应用程序使用 REST 和图形 API 从 ArangoDB 检索数据，但是当我尝试创建图形时，我收到以下消息：

> {"error":true,"code":501,"errorNum":9,"errorMessage":"未知路径 '_api/graph'"}

我可以成功使用文档 API 插入文档，但图形 API 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:14:16.667

在 ArangoDB 1.1 中，会出现此错误，因为 ArangoDB 1.1 在 /_api/graph 处还没有图形 API。

它应该适用于 ArangoDB 1.2。当前版本的 ArangoDB 可以通过以下任一方式检索

```
arangod --version 
```

或者

```
curl -X GET http://127.0.0.1:8529/_api/version 
```

（可能需要调整 IP 地址和/或端口）

如果服务器报告版本号小于 1.2，则图形 API 尚不可用。如果服务器报告的版本号至少为 1.2，那么请尝试通过 cURL 访问 URL：

```
curl -X POST --dump - --data '{"vertices":"myVertices","edges":"myEdges","_key":"myGraph"}' http://127.0.0.1:8529/_api/graph 
```

这应该返回一些非 HTTP 501 结果，例如：

```
HTTP/1.1 201 Created
server: triagens GmbH High-Performance HTTP Server
connection: Keep-Alive
content-type: application/json; charset=utf-8
content-length: 137

{"graph":{"_id":"_graphs/myGraph","_rev":"12347803","_key":"myGraph","vertices":"myVertices","edges":"myEdges"},"error":false,"code":201} 
```

# ios - 带有 UISplitViewController 的纯横向 IPad 应用程序

> ID：15687596
> 
> 赞同：1
> 
> 时间：2013-03-28T16:48:05.013
> 
> 标签：ios, xcode, ipad, object, uisplitviewcontroller

我几乎完成了一个应用程序的开发。现在我正在通过支持 iPad 到支持的设备将它转换为通用应用程序。

我可以将应用程序设置为仅使用横向方向吗，因为我正在使用 UISplitViewController 并希望主视图控制器始终保持在屏幕上？是否有任何 Apple 政策规定我不能仅将其限制为横向，而我必须同时实现纵向和横向？是否有可能通过将其设置为仅适用于 iPad 的横向来拒绝我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:50:23.507

别担心，你会没事的。如果需要，支持横向和纵向。我在商店里有类似的应用程序。

但是，请注意 UISplitViewController 确实有一个选项可以将两个视图始终保持在屏幕上，即使是纵向的。使用委托方法`splitViewController:shouldHideViewController:inOrientation:`禁止隐藏主视图：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/UISplitViewControllerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/UISplitViewControllerDelegate)

因此，如果您只是横向的*唯一*原因是您不想隐藏主视图，那么这是一个错误的原因。例如，看看 Apple 的设置应用程序，它的工作原理是这样的；它是一个拆分视图控制器，始终在所有四个方向上显示两个视图。

# android - Android 上的 Chrome：'click' 事件不起作用，但 'touchstart' 起作用，但会干扰滑动

> ID：15687598
> 
> 赞同：1
> 
> 时间：2013-03-28T16:48:13.487
> 
> 标签：android, jquery, google-chrome, click

我有这个不响应 Android 版 Chrome 上的“点击”事件的可滚动元素列表。但是，“touchstart”确实有效。问题是，使用“touchstart”会干扰列表的滑动行为。我可以使用“点击”的替代方法吗？

不起作用：

```
jQuery(document).on('click', '.items section', function(e) {
    // code
}); 
```

做：

```
jQuery(document).on('touchstart', '.items section', function(e) {
    // code
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:52:20.263

您可能需要让我们查看您正在使用的代码，然后才能得到任何人的帮助。但是您的问题可能是 touch start 绑定到用户所做的任何事情，因此您可能需要取消绑定它。

没有看到代码很难诊断问题。

# ruby - 语法类似于 GitHub Flavored Markdown 的 Ruby markdown 解释器？

> ID：15687599
> 
> 赞同：5
> 
> 时间：2013-03-28T16:48:14.843
> 
> 标签：ruby, markdown, jekyll, pygments, github-flavored-markdown

[我使用Jekyll](http://jekyllrb.com/)运行博客，并认为我会使用[Redcarpet](http://rubygems.org/gems/redcarpet) markdown 解释器，因为它是[由 GitHub 开发和使用的](https://github.com/blog/832-rolling-out-the-redcarpet)。

好吧，我只是碰巧遇到了一个错误，去检查问题，[发现了这个](https://github.com/vmg/redcarpet/issues/212)。

> 维护者说：*“你可能已经注意到了 (har har har har) 我没有时间再维护 Redcarpet。这对我来说不是优先事项（我觉得 Markdown 非常无聊）**也不是 GitHub 的优先事项，因为我们没有在生产中使用更长的时间。** ”*

所以...

1.  是否有一个可以与 Jekyll (& pygments) 一起使用的好的 Ruby markdown 解释器（即积极开发，语法健全）？

2.  更好的是，语法类似于（或至少接近）GitHub Flavored Markdown 的 Markdown 解释器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T19:33:17.913

[https://github.com/vmg/redcarpet](https://github.com/vmg/redcarpet) Redcarpet 开发非常活跃，大约在 8 小时前更新（在撰写本文时）。

对于“调味”你的 Markdown：[https ://rubygems.org/gems/github-markdown](https://rubygems.org/gems/github-markdown)

要将 Markdown 转换为 HTML：

```
GitHub::Markdown.render_gfm("# Header") 
```

在 Rails 中渲染：

```
GitHub::Markdown.render_gfm("# Header").html_safe 
```

想要语法高亮？ [https://github.com/simplabs/highlight](https://github.com/simplabs/highlight) [https://alphahydrae.com/2013/01/markdown-views-in-rails/](https://alphahydrae.com/2013/01/markdown-views-in-rails/)

干杯!

# macos - 需要 Apple launch.h api 的文档

> ID：15687600
> 
> 赞同：3
> 
> 时间：2013-03-28T16:48:21.050
> 
> 标签：macos, terminal, launch, launch-agent

我通过终端加载了一项服务作为 launchctl load /System/Library/LaunchAgent/com.example.my.plist

现在，我需要以编程方式检测服务是否正在运行并启动服务。 [http://www.opensource.apple.com/source/launchd/launchd-328/launchd/src/launch.h](http://www.opensource.apple.com/source/launchd/launchd-328/launchd/src/launch.h) 上面是Apple提供的launch.h api的链接，有助于实现这一目标。

任何人都可以帮我处理它的文档吗？或者，帮助我如何使用 api 检查服务的状态并启动它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-05T10:34:04.007

此 API 的大部分内容现已弃用（macOS 10.14 SDK）：

```
/*!
 * @header
 * These interfaces were only ever documented for the purpose of allowing a
 * launchd job to obtain file descriptors associated with the sockets it
 * advertised in its launchd.plist(5). That functionality is now available in a
 * much more straightforward fashion through the {@link launch_activate_socket}
 * API.
 *
 * There are currently no replacements for other uses of the {@link launch_msg}
 * API, including submitting, removing, starting, stopping and listing jobs.
 */ 
```

该解决方案似乎使用`launchctl`（`man launchctl`或此处的在线内容：[https](https://ss64.com/osx/launchctl.html) ://ss64.com/osx/launchctl.html ）。可能是这样`launchctl list | grep <agent label>`的。

# c - 尝试写入日志文件时权限被拒绝

> ID：15687604
> 
> 赞同：1
> 
> 时间：2013-03-28T16:48:24.780
> 
> 标签：c, windows, file, permissions, fopen

在我的 C/C++ prog 中写入日志文件时出现问题。这是发生问题的代码示例

```
EnterCriticalSection(&critical);
printf("\nWaiting for a connection on TCP port %d (nbr of current threads = %d)...\n", pServer->TCPServerPort, (*pServer->lChildInfo));
AddLog("Waiting for a connection on TCP port %d (nbr of current threads = %d)...", pServer->TCPServerPort, (*pServer->lChildInfo));
LeaveCriticalSection(&critical);

// creating variables to be passed to the thread
struct*ThreadData = (struct*) malloc(sizeof(struct));
ThreadData->csock = (int*)malloc(sizeof(int));
memcpy(&ThreadData->pServer,&pServer,sizeof(pServer));

if((*ThreadData->csock = accept( pServer->ListenSocket, (SOCKADDR*)&sadr, &addr_size))!= INVALID_SOCKET ){

    ThreadData->dwIP = sadr.sin_addr.s_addr;
    ThreadData->wPort = sadr.sin_port;

    printf("Received connection from %s:%d \n",inet_ntoa(sadr.sin_addr), ntohs(sadr.sin_port));
    AddLog("Received connection from %s:%d ",inet_ntoa(sadr.sin_addr), ntohs(sadr.sin_port)); 
```

AddLog 是我为了写入文件而编写的函数：

```
FILE *fichier = NULL;
va_list ap;
va_start(ap, log); 
//fichier = fopen("log.log","a");
fichier = _fsopen("log.log", "a", SH_DENYNO);
if (fichier == NULL)  
    printf("Error log: %d (%s)\n", errno, strerror(errno));
else {  
    fprintf(fichier,":");
    vfprintf(fichier, log, ap);
    fprintf(fichier,"\n");
    va_end(ap);
    fclose(fichier);    
} 
```

我无法真正解释的是第一个 AddLog （“等待......”和之前的所有......）被正确地写入文件中。但是当我尝试连接时，随后的日志（从...接收连接）没有写入文件，我总是收到错误 13“权限被拒绝”。我在文件中使用了 chmod 777，我还尝试了 _fsopen 函数，一旦我进入线程，我仍然会收到此错误。如果有人有任何想法，那将很有帮助。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T21:33:16.527

我不知道它是否仍然相关，但我必须建议你使用更好的解决方案：（我几天前遇到了同样的问题，解决方案很简单）我刚刚实现了一个共享队列，所有的之后我添加到队列中的日志我运行了一个工作线程，该线程正在检查队列并在队列不为空时写入文件。

我希望它有助于度过美好的一天:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T22:02:33.607

我不知道是否是问题所在，但我建议在_fsopen 中使用“a+”进行共享追加，因为线程另一个进程。

# postgresql - Postgres控制流--多个返回值

> ID：15687608
> 
> 赞同：0
> 
> 时间：2013-03-28T16:48:35.647
> 
> 标签：postgresql, postgresql-9.1

我有一堆关于地址的业务数据库查询，我经常想将它们重新分类为给定（已知）区域内部或外部。

该`SELECT CASE`构造非常适合此目的，但我经常遇到这样的情况，即我想要基于相同条件测试的多个返回值。例如，如果业务在某个区域，我将其归类为“内部”，但我也可能出于同样的原因，最好在同一个 CASE 块中，设置另一个值或标志，不同地加权观察，等等条件是 CASE 标准为真。

利用长条件语句并同时获取多个返回值的最佳/最简单方法是什么？那是`plpgsql`唯一的域吗？

编辑：添加了模拟数据，如下。这进行了分类，但如果我想衡量每个机构的就业情况，我需要一个单独的`CASE`块，具有相同的标准。这就是我想要解决的问题。

```
SELECT 
City, CASE WHEN City =ANY (ARRAY['San Francisco', 'San Mateo','Oakland','Marin','Santa Clara']) 
THEN City ELSE 'outside'::text END as area,EstabEmployees
  FROM (VALUES
('San Francisco', 14), 
('San Mateo', 23),
('San Mateo', 3),
('San Francisco', 34),
('Visalia', 65),
('Juneau', 23),
('Mendocino', 5),
('Santa Clara', 1),
('Los Angeles', 56),
('San Mateo', 11),
('Los Angeles', 30),
('Marin', 33),
('Oakland', 14),
('Oakland', 2)
) AS t (City, EstabEmployees) 
```

;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:14:37.927

最简单的方法是利用另一个或两个定义关系的表。

见：[http ://sqlfiddle.com/#!1/ef0bb/6](http://sqlfiddle.com/#!1/ef0bb/6)

为了保留以供将来使用，这里是 sqlfiddle 的“架构”（我正在使用 DDL 和 DML 的组合）

```
create table metros(
  id serial primary key,
  name varchar(100),
  data varchar (100)
);

create table metromappings  (
    id serial primary key,
    metroid int references metros(id),
    cityname varchar(100) not null
);

insert into metros(name) values ('San Francisco Area');

insert into metromappings(metroid,cityname) 
select  currval(pg_get_serial_sequence('metros', 'id')), name 
 from (values ('San Francisco'), 
  ('San Mateo'),
  ('Oakland'),
  ('Marin'),
  ('Santa Clara')) as t(name); 
```

下面是我对如何使用它的介绍：

```
select 
case when m.id IS NULL THEN 'outside::' ELSE t.City END AS area,EstabEmployees
from
(metros m inner join metromappings mm 
 on m.id = mm.metroid and m.name =ANY (ARRAY['San Francisco Area1'])) -- add more stuff here
full outer join
(VALUES
('San Francisco', 14), 
('San Mateo', 23),
('San Mateo', 3),
('San Francisco', 34),
('Visalia', 65),
('Juneau', 23),
('Mendocino', 5),
('Santa Clara', 1),
('Los Angeles', 56),
('San Mateo', 11),
('Los Angeles', 30),
('Marin', 33),
('Oakland', 14),
('Oakland', 2)
) AS t (City, EstabEmployees) on t.City = mm.cityname
order by area, EstabEmployees; 
```

请注意，如果只是为了消除将同一城市添加到同一区域两次的可能性（或者只是将这对定义为键并将 id 设置为一些唯一索引；我不确定哪个最好）。

# batch-file - 批量复制名称中带有通配符的excel文件不会复制文件中的内容

> ID：15687611
> 
> 赞同：0
> 
> 时间：2013-03-28T16:48:41.610
> 
> 标签：batch-file

我有这个批处理文件可以将公共目录上的文件复制并重命名为另一个公共目录。该文件通常大小约为 1600kb，但复制的只有 1kb。如果我将名称中的通配符更改为真实姓名，我会复制整个文件。问题是每次更新后文件名都会发生变化，例如名称 3.25.13、名称 4.12.13 等，所以我必须使用通配符，除非您有任何其他方式可以告诉我，我们将不胜感激。这是批处理的代码：

```
c:
cd U:\Sourcing\Vendor Demand Planning\Master CPFR\

copy "U:\Sourcing\Vendor Demand Planning\Master CPFR\Master CPFR*.xlsx" "U:\Sourcing\Vendor Demand Planning\Pricing Project\Master CPFR.xlsx" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:44:39.463

您可以使用 a`dir /o:-d`来获取最新的匹配文件。

```
cd /d "U:\Sourcing\Vendor Demand Planning\Master CPFR\"

for /f "delims=" %%I in ('dir /b /o:-d "Master CPFR*.xlsx"') do (
    copy "%%I" "..\Pricing Project\Master CPFR.xlsx"
    exit /b
) 
```

如果您的脚本有更多内容，只需替换`exit /b`为 a`goto label`并将 a放在循环`:label`之后的某个位置。`for`您只希望循环执行一次，然后中断。

# iphone - 以编程方式添加 UIView 不起作用（UIView 应显示 UIWebView 并打开 URL）

> ID：15687616
> 
> 赞同：0
> 
> 时间：2013-03-28T16:48:51.570
> 
> 标签：iphone, objective-c, uiview, uiwebview

目前正在为我的 iPhone 应用程序（如 Pocket，用户在第一次启动后进行一些动手操作）制作两个介绍页面（第一个显示图像，第二个应该显示一个网站）。遇到了 Matthew York 的项目，该项目与和`GitHub`完美配合。此外，我喜欢在介绍中展示一个网站，但我无法让它发挥作用。我创建的只是没有出现。`images``text``programmatically``UIWebView`

Matthew York 的`GitHub`项目： [https ://github.com/MatthewYork/iPhone-IntroductionTutorial](https://github.com/MatthewYork/iPhone-IntroductionTutorial)

显示两个介绍页面的完整代码如下所示。请注意，它`panelImage`按预期工作，但不是`panelView`。我看到第二页出现了，但没有`UIWebView`. 我想我将它添加`subview`到`view`屏幕上不可见的部分，因此我看不到它。我对吗？你能看看：`[view addSubview:aWebView];`在`method`：`showWebView`

**视图控制器.m**

```
- (void)showIntro
{
    MYIntroductionPanel *panelImage = [[MYIntroductionPanel alloc] initWithimage:[UIImage imageNamed:@"img.jpg"] description:@"TEST: IMAGE"];

    MYIntroductionPanel *panelView = [[MYIntroductionPanel alloc] initWitView:[self showWebView] description:@"TEST: VIEW"];

    MYIntroductionView *introductionView = [[MYIntroductionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) headerText:@"TESTING" panels:@[panelImage, panelView] languageDirection:MYLanguageDirectionLeftToRight];

    introductionView.BackgroundImageView.image = [UIImage imageNamed:@"BG_iPad_1024.png"];
    introductionView.delegate = self;
    [introductionView showInView:self.view];
}

- (UIView *)showWebView
{
    UIWebView *aWebView= [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 290)];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
    [aWebView loadRequest:requestObj];

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
    [view addSubview:aWebView];

    return view;
} 
```

**MYIntroductionPanel.m**

```
-(id)initWitView:(UIView *)view description:(NSString *)description{
    if (self = [super init]) {
        self.view = [[UIView alloc] init];
        self.Description = [[NSString alloc] initWithString:description];
    }
    return self;
}

-(id)initWithimage:(UIImage *)image title:(NSString *)title description:(NSString *)description{
    if (self = [super init]) {
        self.Image = [[UIImage alloc] init];
        self.Image = image;
        self.Title = title;
        self.Description = [[NSString alloc] initWithString:description];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:26:11.733

您要添加`UIWebView`的视图永远不会添加到视图层次结构本身。您似乎将 UIWebView 的超级视图传递给 MyIntroductionPanel 的`initWithView:description:`方法，但该方法只是忽略其输入视图并使用`self.view = [[UIView alloc] init]`. 请尝试`self.view = view`在您的 initWithView:description: 方法中进行设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T17:28:07.463

我并不喜欢作者的所有决定，而是遵循他的模式来实现您正在寻找的东西。

添加了以下内容：

```
// MyIntroductionPanel.h
@property (nonatomic, retain) NSURL *url;

-(id)initWithURL:(NSURL *)url;

// MyIntroductionPanel.m
-(id)initWithURL:(NSURL *)url {

    if (self = [super init]) {
        _url = url;
    }
    return self;
} 
```

那很简单。这不太容易 - 破解布局方法来处理带有 url 的面板。我没有太努力去理解这种方法，只是添加了我能做到的东西来让它工作。我的添加标有 // DANH

```
//  MYIntroductionView.m

-(UIView *)PanelViewForPanel:(MYIntroductionPanel *)panel atXIndex:(CGFloat*)xIndex{

    // snipped original code    

    NSInteger descriptionHeight = panelDescriptionTextView.contentSize.height;
    int contentWrappedScrollViewHeight = 0;
    if ((imageHeight + descriptionHeight + panelTitleLabelFrame.size.height) > maxScrollViewHeight) {
        contentWrappedScrollViewHeight = maxScrollViewHeight;
        imageHeight = contentWrappedScrollViewHeight-descriptionHeight - panelTitleLabelFrame.size.height - 10;
    }
    else if ((imageHeight+descriptionHeight + panelTitleLabelFrame.size.height) <= maxScrollViewHeight){
        contentWrappedScrollViewHeight = imageHeight + panelTitleLabelFrame.size.height + descriptionHeight;
    }

    // DANH
    if (panel.url) {
        contentWrappedScrollViewHeight = 300;
        // you can certainly do a better job than I did here, but just to get going
    }

    panelView.frame = CGRectMake(*xIndex, 0, self.ContentScrollView.frame.size.width, contentWrappedScrollViewHeight);

    //Build image container
    UIImageView *panelImageView = [[UIImageView alloc] initWithFrame:CGRectMake(5, 0, self.ContentScrollView.frame.size.width - 10, imageHeight)];
    panelImageView.contentMode = UIViewContentModeScaleAspectFit;
    panelImageView.backgroundColor = [UIColor clearColor];
    panelImageView.image = panel.Image;
    panelImageView.layer.cornerRadius = 3;
    panelImageView.clipsToBounds = YES;
    [panelView addSubview:panelImageView];

    // DANH
    // add webview on top if we have a url
    if (panel.url) {
        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.ContentScrollView.frame.size.width, 300)];
        [webView loadRequest:[NSURLRequest requestWithURL:panel.url]];
        [panelView addSubview:webView];
    }

    // snipped original code    

} 
```

现在，用示例代码调用它......

```
// MYViewController.m

MYIntroductionPanel *panel3 = [[MYIntroductionPanel alloc] initWithURL:[NSURL URLWithString:@"http://www.google.com"]];

// ...
MYIntroductionView *introductionView = [[MYIntroductionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) headerText:@"MYIntroductionView" panels:@[panel, panel2, panel3] languageDirection:MYLanguageDirectionLeftToRight]; 
```

# php - CakePHP 2/Javascript - Ajax Multi Upload - 上传完成后如何强制页面加载？

> ID：15687619
> 
> 赞同：1
> 
> 时间：2013-03-28T16:49:01.430
> 
> 标签：php, javascript, jquery, ajax, cakephp

我正在使用 cakephp 2 以及出色的 Ajax Multi Upload 插件（我在[这里](https://github.com/srs81/CakePHP-AjaxMultiUpload)得到了）

基本上，插件会创建一个按钮来激活文件浏览器。当您选择文件时，文件会自动上传。当发生这种情况时，页面上会出现一个小图形并且文件的名称在那里，所以我知道必须有某个地方可以添加更多的 javascript，但我是 JS 新手，我不知道在哪里看。

[这](https://github.com/srs81/CakePHP-AjaxMultiUpload/blob/master/webroot/js/fileuploader.js)是发生所有事情的实际 JS 文件。

我想没有人足够熟悉这个插件/蛋糕/javascript（并且足够友善）来看看并给我一些线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:03:15.020

我不确定您使用的是哪个实际的 javascript 类，但看起来各种上传器类都有`_onComplete`方法。我猜这是您需要添加一些自定义代码来更新表单的地方。

# c# - c# 网络发现

> ID：15687620
> 
> 赞同：3
> 
> 时间：2013-03-28T16:49:05.597
> 
> 标签：c#, .net, networking, discovery

我正在开发一个 C# 应用程序，我需要发现 LAN 中的计算机和打印机。如何从 .NET 执行此操作？.NET 框架中是否有我可以使用的类。感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:02:28.623

您可以使用 DirectoryServices 获取计算机。

```
 System.DirectoryServices.DirectoryEntry winNtDirectoryEntries = new System.DirectoryServices.DirectoryEntry("WinNT:");
    List<String> computerNames = (from DirectoryEntry availDomains in winNtDirectoryEntries.Children 
                                  from DirectoryEntry pcNameEntry in availDomains.Children 
                                  where pcNameEntry.SchemaClassName.ToLower().Contains("computer") 
                                  select pcNameEntry.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:56:27.040

这可能对您有所帮助：http: [//www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using](http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using)

```
using System;
using System.Runtime.InteropServices;
using System.Security;
using System.Collections;

namespace ListNetworkComputers
{
    #region NetworkBrowser CLASS
    /// <summary>
    /// Provides a mechanism for supplying
    // a list of all PC names in the local network.
    /// This collection of PC names is used in the form 
    /// 

    /// This class makes use of a DllImport instruction.
    /// The purpose of which is as follows:
    /// When a DllImport declaration is made
    /// in managed code (C#) it is a call to a legacy
    /// unmanaged code module, normally
    /// a C++ Dynamic Link Library. These C++ Dll's are
    /// usually part of the operating system API,
    /// or some other vendors API, and must be 
    /// used to carry out operations that are not
    /// native within the managed code C# framework. 
    /// This is fairly normal within the windows world.
    /// The only thing that needs careful consideration
    /// is the construction of the correct type of STRUCTS,
    /// object pointers, and attribute markers,
    /// which all contribute to making the link
    /// between managed (C#) and unmanaged code (C++)
    /// more seamless
    /// 

    /// This class makes use of the following Dll calls
    /// <list type="bullet">
    /// <item>
    /// <description> Netapi32.dll : NetServerEnum,
    /// The NetServerEnum function lists all servers
    /// of the specified type that are visible in
    /// a domain. For example, an application can call 
    /// NetServerEnum to list all domain controllers
    /// only or all SQL servers only.
    /// You can combine bit masks to list several
    /// types. For example, a value of 0x00000003 
    /// combines the bit masks for SV_TYPE_WORKSTATION
    /// (0x00000001) and SV_TYPE_SERVER (0x00000002).
    /// </description>
    /// </item>
    /// <item>
    /// <description> Netapi32.dll : NetApiBufferFree,
    /// The NetApiBufferFree function frees 
    /// the memory that the NetApiBufferAllocate
    /// function allocates. Call NetApiBufferFree 
    /// to free the memory that other network
    /// management functions return.</description>
    /// </item>
    /// </list>
    /// </summary>
    public sealed class NetworkBrowser
    {
        #region Dll Imports

        //declare the Netapi32 : NetServerEnum method import
        [DllImport("Netapi32", CharSet = CharSet.Auto,
        SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]

        /// <summary>
        /// Netapi32.dll : The NetServerEnum function lists all servers
        /// of the specified type that are
        /// visible in a domain. For example, an 
        /// application can call NetServerEnum
        /// to list all domain controllers only
        /// or all SQL servers only.
        /// You can combine bit masks to list
        /// several types. For example, a value 
        /// of 0x00000003  combines the bit
        /// masks for SV_TYPE_WORKSTATION 
        /// (0x00000001) and SV_TYPE_SERVER (0x00000002)
        /// </summary>
        public static extern int NetServerEnum(
            string ServerNane, // must be null
            int dwLevel,
            ref IntPtr pBuf,
            int dwPrefMaxLen,
            out int dwEntriesRead,
            out int dwTotalEntries,
            int dwServerType,
            string domain, // null for login domain
            out int dwResumeHandle
            );

        //declare the Netapi32 : NetApiBufferFree method import
        [DllImport("Netapi32", SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]

        /// <summary>
        /// Netapi32.dll : The NetApiBufferFree function frees 
        /// the memory that the NetApiBufferAllocate function allocates. 
        /// Call NetApiBufferFree to free
        /// the memory that other network 
        /// management functions return.
        /// </summary>
        public static extern int NetApiBufferFree(
            IntPtr pBuf);

        //create a _SERVER_INFO_100 STRUCTURE
        [StructLayout(LayoutKind.Sequential)]
        public struct _SERVER_INFO_100
        {
            internal int sv100_platform_id;
            [MarshalAs(UnmanagedType.LPWStr)]
            internal string sv100_name;
        }
        #endregion
        #region Public Constructor
        /// <SUMMARY>
        /// Constructor, simply creates a new NetworkBrowser object
        /// </SUMMARY>
        public NetworkBrowser()
        {

        }
        #endregion
        #region Public Methods
        /// <summary>
        /// Uses the DllImport : NetServerEnum
        /// with all its required parameters
        /// (see http://msdn.microsoft.com/library/default.asp?
        ///      url=/library/en-us/netmgmt/netmgmt/netserverenum.asp
        /// for full details or method signature) to
        /// retrieve a list of domain SV_TYPE_WORKSTATION
        /// and SV_TYPE_SERVER PC's
        /// </summary>
        /// <returns>Arraylist that represents
        /// all the SV_TYPE_WORKSTATION and SV_TYPE_SERVER
        /// PC's in the Domain</returns>
        public ArrayList getNetworkComputers()
        {
            //local fields
            ArrayList networkComputers = new ArrayList();
            const int MAX_PREFERRED_LENGTH = -1;
            int SV_TYPE_WORKSTATION = 1;
            int SV_TYPE_SERVER = 2;
            IntPtr buffer = IntPtr.Zero;
            IntPtr tmpBuffer = IntPtr.Zero;
            int entriesRead = 0;
            int totalEntries = 0;
            int resHandle = 0;
            int sizeofINFO = Marshal.SizeOf(typeof(_SERVER_INFO_100));

            try
            {
                //call the DllImport : NetServerEnum 
                //with all its required parameters
                //see http://msdn.microsoft.com/library/
                //default.asp?url=/library/en-us/netmgmt/netmgmt/netserverenum.asp
                //for full details of method signature
                int ret = NetServerEnum(null, 100, ref buffer,
                    MAX_PREFERRED_LENGTH,
                    out entriesRead,
                    out totalEntries, SV_TYPE_WORKSTATION |
                    SV_TYPE_SERVER, null, out 
                    resHandle);
                //if the returned with a NERR_Success 
                //(C++ term), =0 for C#
                if (ret == 0)
                {
                    //loop through all SV_TYPE_WORKSTATION 
                    //and SV_TYPE_SERVER PC's
                    for (int i = 0; i < totalEntries; i++)
                    {
                        //get pointer to, Pointer to the 
                        //buffer that received the data from
                        //the call to NetServerEnum. 
                        //Must ensure to use correct size of 
                        //STRUCTURE to ensure correct 
                        //location in memory is pointed to
                        tmpBuffer = new IntPtr((int)buffer +
                                   (i * sizeofINFO));
                        //Have now got a pointer to the list 
                        //of SV_TYPE_WORKSTATION and 
                        //SV_TYPE_SERVER PC's, which is unmanaged memory
                        //Needs to Marshal data from an 
                        //unmanaged block of memory to a 
                        //managed object, again using 
                        //STRUCTURE to ensure the correct data
                        //is marshalled 
                        _SERVER_INFO_100 svrInfo = (_SERVER_INFO_100)
                            Marshal.PtrToStructure(tmpBuffer,
                                    typeof(_SERVER_INFO_100));

                        //add the PC names to the ArrayList
                        networkComputers.Add(svrInfo.sv100_name);
                    }
                }
            }
            catch (Exception ex)
            {
                return null;
            }
            finally
            {
                //The NetApiBufferFree function frees 
                //the memory that the 
                //NetApiBufferAllocate function allocates
                NetApiBufferFree(buffer);
            }
            //return entries found
            return networkComputers;

        }
        #endregion
    }
    #endregion
} 
```

**用法**：

```
static void Main(string[] args)
{
    ListNetworkComputers.NetworkBrowser browser = new ListNetworkComputers.NetworkBrowser();
    ArrayList networks = browser.getNetworkComputers();
    foreach(object item in networks)
    {
        Console.WriteLine(item.ToString());
    }
    Console.Read();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:02:46.530

我不确定您尝试了什么；也不知道你的目标是什么。您可以通过以下方式完成它：

*   启动一个`Process`将调用批处理文件或 powershell 脚本的程序。
*   实施`DirectoryServices.dll`。

如果您实施了上述操作，则针对`Workgroup`

```
using (DirectoryEntry workgroup = new DirectoryEntry("WinNT://Workgroup"))
{
    foreach (DirectoryEntry childEntry in workgroup.Children)
    {
         Console.WriteLine(child.Name);
    }
} 
```

这将允许您针对特定的`Workgroup`. 对整体进行测试的示例`Domain`如下：

```
using (DirectoryEntry domain = new DirectoryENtry("LDAP://" + domainName))
{
     domain.Children.SchemaFilter.Add("computer");
     foreach (DirectoryEntry d in domain.Childern)
     {
          Console.WriteLine(d.Name);
     }
} 
```

如您所见，您在这里有很大的灵活性。显然，您可以`Process`为一个批处理文件实现`Netview`. 这是非常基本的。

另一个选择是 Powershell。它可以访问，`WMI`因此您将能够提取大量信息。加上大量的 IT 社区依赖它，有很多脚本可用于完成此任务。

希望这会有所帮助。

# php - Zenshop WordPress 主题 CSS

> ID：15687622
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:49:09.723
> 
> 标签：php, css, wordpress

我在编辑 zenshop 主题的 CSS 时遇到问题。在主页上有一个 4X2 网格中的产品展示，但由于我有 6 个主要类别的产品，我想将其设为 3X2，但我无法做到这一点，请帮助。我的网站[http://ruchitraders.com](http://ruchitraders.com)

我正在尝试修改以下代码

```
#shelf {
width: 980px;
margin: 0px auto;
padding:0px 10px;
}

.box {
width: 220px;
position:relative;
background: #fff;
margin: 30px 0px 30px 20px;
float: left;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
-webkit-box-shadow: 1px 1px 0px 0px #ddd;
-moz-box-shadow: 1px 1px 0px 0px #ddd;
box-shadow: 1px 1px 0px 0px #ddd; 

}

.lastbox{
float:right;
margin-right:20px;
}

.productshot{
width:170px;
height:200px;
margin:10px 25px 10px 25px;
}

.boxtitle {

}

.boxtitle h2 {
font-size: 12px;
margin: 0px 10px;
padding: 15px 10px 10px 15px;
text-align: center;
font-weight: normal;
line-height: 120%;
border-bottom:1px solid #eee;
}

.boxtitle h2 a:link,.boxtitle h2 a:visited {
color: #666;

} 
```

请帮助我是 php 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:55:51.643

只需将 .box 的宽度更改为 300px 并相应地调整边距。

您有一个 .lastbox 类，它将移至第三个框和第六个框。

还要删除您位于 LI 元素中间的清晰 div，因为 DIV 不能是 UL 的子元素。

如果您需要清除浮动添加“溢出：隐藏”到#home-content

# javascript - 如何为 JavaScript 和 HTML5+JavaScript 创建轻量级 Eclipse RCP 容器？

> ID：15687626
> 
> 赞同：2
> 
> 时间：2013-03-28T16:49:13.503
> 
> 标签：javascript, eclipse, html, node.js, eclipse-rcp

在基于 IDE 的[Nodeclipse 项目](https://github.com/Nodeclipse/)Node.js IDE 中，自然而然地与 Java 一起开发。我听说 Eclipse 计划让 JavaScript 用于表单验证等，但我想要激进的方法：只需在 WebView 中运行每个组件，并使用 Eclipse RCP 抽象，如 Editor、View 来连接它们。

**如何为 JavaScript和 HTML5+JavaScript创建轻量级 Eclipse RCP[容器？](https://github.com/Nodeclipse/JavaScriptContainer)**

我的意思不仅仅是原始的 WebView 小部件。需要一些有关该主题和研究方向的 Internet 资源。

# entity-framework - 在不删除数据的情况下更新数据库架构？

> ID：15687630
> 
> 赞同：11
> 
> 时间：2013-03-28T16:49:26.740
> 
> 标签：entity-framework, entity-framework-5

我首先使用数据库开始使用 EF 并从数据库生成我的图表。

现在我已经切换并对我的图表进行了许多更改，并希望在不丢失数据的情况下更新我的数据库模式。但是，从图中生成数据库似乎会删除所有表并重新创建它们。

我首先找到了代码的“数据迁移”。模型是否有类似的东西，或者我可以以任何方式维护数据？

我正在使用带有 EF5 的 VS 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:56:33.607

不要忘记搜索SO网站，

[http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/)

> 安装后，当你选择“Generate Database from Model...”时，它会弹出一个新的向导，你可以选择“Generate Migration T-SQL”

另一种方法是使用自定义 t4 从您的模型生成 DbMigrationsConfiguration 和 DbContext，您根本不需要运行 Enable-Migration。只需在包管理器控制台中运行 Add-Migration 和 Update-Database

[http://blog.amusedia.com/2012/08/entity-framework-migration-with-model.html](http://blog.amusedia.com/2012/08/entity-framework-migration-with-model.html)

# c# - 存在依赖关系时如何设计可模拟性？

> ID：15687631
> 
> 赞同：3
> 
> 时间：2013-03-28T16:49:29.783
> 
> 标签：c#, asp.net, unit-testing, mocking, tdd

我有一个方法，它调用 .NET XDocument.Load() 方法从 url 加载 xml 数据。我想让我的班级单元可测试。

那么如何使该调用可模拟/可单元测试？

```
private void ProcessData(string url)
{
            // todo: make this mockable
            var xDocument = XDocument.Load(url);
            // the rest of the code
} 
```

我使用的一种解决方案是将 xmlUrlLoader 注入到下面的类中：

```
private readonly Func<string, XDocument> _xmlUrlLoader;

public MyConstructor(Func<string,XDocument> xmlUrlLoader)
{
    _xmlUrlLoader = xmlUrlLoader;
}
private void ProcessData(string url)
{
            // todo: make this mockable
            var xDocument = this._xmlUrlLoader(url);
            // the rest of the code
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:55:41.987

我同意注入加载程序是正确的方法我不确定为什么它会是 Func 类型

我希望有一个类似的界面

```
public interface IXmlDocumentLoader
{
    XDocument LoadDocument(string url);
} 
```

然后你的代码看起来像

```
private readonly IXmlDocumentLoader _xmlUrlLoader;

public MyConstructor(IXmlDocumentLoader xmlUrlLoader)
{
    _xmlUrlLoader = xmlUrlLoader;
}

private void ProcessData(string url)
{
            var xDocument = this._xmlUrlLoader(url);
            // the rest of the code
} 
```

但我认为出于关注点分离的原因，文档加载器绝对应该在它自己的类中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:02:23.473

我更喜欢将逻辑与访问资源分开。在您的情况下，我会将文档传递给处理功能：

```
void ProcessData(XDocument xDocument); 
```

您可以在不模拟任何内容的情况下测试该功能。然后，如果您愿意，可以在顶部添加一个薄包装器来进行加载。

```
void ProcessUrl(string url);
{
    var xDocument = XDocument.Load(url);
    ProcessData(xDocument);
} 
```

您可以使用模拟对包装器进行单元测试，但就我个人而言，我并没有看到太多收获。我更喜欢仅在集成测试中使用这些包装器。

# php - 我如何对这个数组进行排序，以便每个类别都按 ordernum 排序？

> ID：15687632
> 
> 赞同：-2
> 
> 时间：2013-03-28T16:49:30.293
> 
> 标签：php, sorting

我有一个基于控制台的站点，但我无法弄清楚如何使用该`$consoleORDER`值对这些数据进行排序。

基本上，我正在尝试使每个类别都按`ordernum`.

编辑：好的抱歉缺少细节忘记了没有人看到实际代码执行我大声笑。

```
$dispConsoleFeatures = "";
$consoleAdmin        = "";
$consoleStaff        = "";
$consoleAccount      = "";
$consoleMember       = "";
$consoleNews         = "";
$consoleRecruitment  = "";
$consoleSecurity     = "";
$consoleDivision     = "";
$consoleTourny       = "";
$consoleTraining     = "";
$consoleAwards       = "";
$consoleInfo         = "";
$consoleUnknown      = "";
$memConsole          = getMemberInfo("console_options", $membername);
$ConsoleIDs          = explode("[sep]", $memConsole);

foreach($ConsoleIDs as $console) {
    $consoleORDER         = getConsoleInfo2("ordernum", $console);
    $consoleLINK          = getConsoleInfo2("id", $console);
    $consoleNAME          = getConsoleInfo2("displayname", $console);
    $consoleHIDE          = getConsoleInfo2("hide", $console);
    $consoleCATEGORY      = getConsoleInfo2("category", $console);
    $consoleAdmin_I       = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/admin.png'><br></td></tr>";
    $consoleStaff_I       = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/staff.png'><br></td></tr>";
    $consoleAccount_I     = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/account.png'><br></td></tr>";
    $consoleMember_I      = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/member.png'><br></td></tr>";
    $consoleNews_I        = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/news.png'><br></td></tr>";
    $consoleRecruitment_I = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/recruitment.png'><br></td></tr>";
    $consoleSecurity_I    = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/security.png'><br></td></tr>";
    $consoleDivision_I    = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/division.png'><br></td></tr>";
    $consoleTourny_I      = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/tourny.png'><br></td></tr>";
    $consoleTraining_I    = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/training.png'><br></td></tr>";
    $consoleAwards_I      = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/awards.png'><br></td></tr>";
    $consoleInfo_I        = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/info.png'><br></td></tr>";
    $consoleUnknown_I     = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/unknown.png'><br></td></tr>";

    if($console != "" AND $consoleHIDE == "0") {

        if($consoleCATEGORY == "1") {
            $consoleAdmin .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat1 = "$consoleAdmin_I<tr><td class='main' align='left'>$consoleAdmin</td></tr>";
        } elseif($consoleCATEGORY == "2") {
            $consoleMember .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat2 = "$consoleMember_I<tr><td class='main' align='left'>$consoleMember</td></tr>";
        } elseif($consoleCATEGORY == "3") {
            $consoleAccount .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat3 = "$consoleAccount_I<tr><td class='main' align='left'>$consoleAccount</td></tr>";
        } elseif($consoleCATEGORY == "4") {
            $consoleStaff .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat4 = "$consoleStaff_I<tr><td class='main' align='left'>$consoleStaff</td></tr>";
        } elseif($consoleNews == "5") {
            $consoleNews .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat5 = "$consoleNews_I<tr><td class='main' align='left'>$consoleNews</td></tr>";
        } elseif($consoleCATEGORY == "7") {
            $consoleDivision .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat7 = "$consoleDivision_I<tr><td class='main' align='left'>$consoleDivision</td></tr>";
        } elseif($consoleCATEGORY == "8") {
            $consoleTourny .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat8 = "$consoleTourny_I<tr><td class='main' align='left'>$consoleTourny</td></tr>";
        } elseif($consoleCATEGORY == "9") {
            $consoleNews .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat9 = "$consoleNews_I<tr><td class='main' align='left'>$consoleNews</td></tr>";
        } elseif($consoleCATEGORY == "10") {
            $consoleAwards .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat10 = "$consoleAwards_I<tr><td class='main' align='left'>$consoleAwards</td></tr>";
        } elseif($consoleCATEGORY == "11") {
            $consoleSecurity .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat11 = "$consoleSecurity_I<tr><td class='main' align='left'>$consoleSecurity</td></tr>";
        } elseif($consoleCATEGORY == "12") {
            $consoleRecruitment .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat12 = "$consoleRecruitment_I<tr><td class='main' align='left'>$consoleRecruitment</td></tr>";
        } elseif($consoleCATEGORY == "14") {
            $consoleTraining .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat14 = "$consoleTraining_I<tr><td class='main' align='left'>$consoleTraining</td></tr>";
        } elseif($consoleCATEGORY == "15") {
            $consoleUnknown .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat15 = "$consoleUnknown_I<tr><td class='main' align='left'>$consoleUnknown</td></tr>";
        } elseif($consoleCATEGORY == "16") {
            $consoleInfo .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat16 = "$consoleInfo_I<tr><td class='main' align='left'>$consoleInfo</td></tr>";
        }

        $dispConsoleFeatures = "<tr><td class='main' align='center'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/console.png'><br></td></tr>$dispCat1$dispCat4$dispCat2$dispCat11$dispCat12$dispCat10$dispCat14$dispCat8$dispCat9$dispCat5$dispCat7$dispCat3<br>$dispCat16<br>$dispCat15";
    }
} 
```

这样做的最终结果是：

显然我还不允许发布图片。有点烦人。所以我在这里上传了 tyhe 图片。

[http://www.swfclan.com/snippet1.jpg](http://www.swfclan.com/snippet1.jpg)

正如您在“锦标赛”下看到的那样，它的顺序是错误的，因为在我开始重新排列它们之前，我从没想过它是如何订购的。问题是顺序应该是（从上到下）进入锦标赛，创建锦标赛，添加锦标赛工作人员，删除锦标赛工作人员，锦标赛选项。

变量 $memConsole 是从成员数据中提取的，每个都是一个数字，它使用该数字来检索其余信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:49:44.017

正如@MikeBrant 在评论中提到的那样，使用提供的代码很难掌握结构。但我确实尝试过这样做。我将所有内容都放入一个数组`ordernum`中`key`，然后用于`ksort`排序。你可能不得不玩一下它。

此外，我将您更改`if-elseif`为`swicth`陈述，这是个人喜好问题，更易于阅读：

**注意：**`foreach`出于测试目的，我注释掉了您的功能并更改了您的功能。

```
$orderNum = array(1, 99, 15);
$i = 0;
foreach($orderNum as $oNum) {
    //$consoleORDER = getConsoleInfo2("ordernum", $console);
    $consoleORDER = $oNum;
    //$consoleArray['orderNum'][$consoleORDER]['LINK'] = getConsoleInfo2("id", $console);
    $consoleArray['orderNum'][$consoleORDER]['LINK'] = "Link";
    //$consoleArray['orderNum'][$consoleORDER]['NAME'] = getConsoleInfo2("displayname", $console);
    $consoleArray['orderNum'][$consoleORDER]['NAME'] = "name";
    //$consoleArray['orderNum'][$consoleORDER]['HIDE'] = getConsoleInfo2("hide", $console);
    $consoleArray['orderNum'][$consoleORDER]['HIDE'] = "hide";
    //$consoleArray['orderNum'][$consoleORDER]['CATEGORY'] = getConsoleInfo2("category", $console);
    $consoleArray['orderNum'][$consoleORDER]['CATEGORY'] = "category";
    $consoleArray['orderNum'][$consoleORDER]['Admin_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/admin.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Staff_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/staff.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Account_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/account.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Member_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/member.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['News_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/news.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Recruitment_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/recruitment.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Security_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/security.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Division_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/division.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Tourny_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/tourny.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Training_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/training.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Awards_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/awards.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Info_I'] = "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/info.png'><br></td></tr>";
    $consoleArray['orderNum'][$consoleORDER]['Unknown_I']= "<tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/unknown.png'><br></td></tr>";

    ####################################################################
    ## OTHER THAN THE CASE-SWITCH I DID NOT MODIFY THE FOLLOWING CODE ##
    ####################################################################
    if($console != "" && $consoleHIDE == "0") {
        switch ($consoleCATEGORY) {
        case "1":
            $consoleAdmin .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat1 = "$consoleAdmin_I<tr><td class='main' align='left'>$consoleAdmin</td></tr>";
            break;
        case "2":
            $consoleMember .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat2 = "$consoleMember_I<tr><td class='main' align='left'>$consoleMember</td></tr>";
            break;
        case "3":
            $consoleAccount .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat3 = "$consoleAccount_I<tr><td class='main' align='left'>$consoleAccount</td></tr>";
            break;
        case "4":
            $consoleStaff .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat4 = "$consoleStaff_I<tr><td class='main' align='left'>$consoleStaff</td></tr>";
            break;
        case "5":
            $consoleNews .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat5 = "$consoleNews_I<tr><td class='main' align='left'>$consoleNews</td></tr>";
            break;
        case "6":
            // Missing 6
            break;
        case "7":
            $consoleDivision .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat7 = "$consoleDivision_I<tr><td class='main' align='left'>$consoleDivision</td></tr>";
            break;
        case "8":
            $consoleTourny .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat8 = "$consoleTourny_I<tr><td class='main' align='left'>$consoleTourny</td></tr>";
            break;
        case "9":
            $consoleNews .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat9 = "$consoleNews_I<tr><td class='main' align='left'>$consoleNews</td></tr>";
            break;
        case "10":
            $consoleAwards .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat10 = "$consoleAwards_I<tr><td class='main' align='left'>$consoleAwards</td></tr>";
            break;
        case "11":
            $consoleSecurity .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat11 = "$consoleSecurity_I<tr><td class='main' align='left'>$consoleSecurity</td></tr>";
            break;
        case "12":
            $consoleRecruitment .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat12 = "$consoleRecruitment_I<tr><td class='main' align='left'>$consoleRecruitment</td></tr>";
            break;
        case "13":
            // Missing 13
            break;
        case "14":
            $consoleTraining .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat14 = "$consoleTraining_I<tr><td class='main' align='left'>$consoleTraining</td></tr>";
            break;
        case "15":
            $consoleUnknown .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat15 = "$consoleUnknown_I<tr><td class='main' align='left'>$consoleUnknown</td></tr>";
            break;
        case "16":
            $consoleInfo .= "&nbsp;&nbsp;&nbsp;&nbsp;<a href='console.php?pid=$consoleLINK'>$consoleNAME</a><br>";
            $dispCat16 = "$consoleInfo_I<tr><td class='main' align='left'>$consoleInfo</td></tr>";
            break;
        }
        $dispConsoleFeatures = "<tr><td class='main' align='center'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/console.png'><br></td></tr>$dispCat1$dispCat4$dispCat2$dispCat11$dispCat12$dispCat10$dispCat14$dispCat8$dispCat9$dispCat5$dispCat7$dispCat3<br>$dispCat16<br>$dispCat15";
    }
    $i++;
}
ksort($consoleArray['orderNum']);
echo '<pre>', print_r($consoleArray, true), '</pre>'; 
```

* * *

**输出：**

```
Array
(
    [orderNum] => Array
        (
            [1] => Array
                (
                    [LINK] => Link
                    [NAME] => name
                    [HIDE] => hide
                    [CATEGORY] => category
                    [Admin_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/admin.png'><br></td></tr>
                    [Staff_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/staff.png'><br></td></tr>
                    [Account_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/account.png'><br></td></tr>
                    [Member_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/member.png'><br></td></tr>
                    [News_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/news.png'><br></td></tr>
                    [Recruitment_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/recruitment.png'><br></td></tr>
                    [Security_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/security.png'><br></td></tr>
                    [Division_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/division.png'><br></td></tr>
                    [Tourny_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/tourny.png'><br></td></tr>
                    [Training_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/training.png'><br></td></tr>
                    [Awards_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/awards.png'><br></td></tr>
                    [Info_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/info.png'><br></td></tr>
                    [Unknown_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/unknown.png'><br></td></tr>
                )

            [15] => Array
                (
                    [LINK] => Link
                    [NAME] => name
                    [HIDE] => hide
                    [CATEGORY] => category
                    [Admin_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/admin.png'><br></td></tr>
                    [Staff_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/staff.png'><br></td></tr>
                    [Account_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/account.png'><br></td></tr>
                    [Member_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/member.png'><br></td></tr>
                    [News_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/news.png'><br></td></tr>
                    [Recruitment_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/recruitment.png'><br></td></tr>
                    [Security_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/security.png'><br></td></tr>
                    [Division_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/division.png'><br></td></tr>
                    [Tourny_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/tourny.png'><br></td></tr>
                    [Training_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/training.png'><br></td></tr>
                    [Awards_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/awards.png'><br></td></tr>
                    [Info_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/info.png'><br></td></tr>
                    [Unknown_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/unknown.png'><br></td></tr>
                )

            [99] => Array
                (
                    [LINK] => Link
                    [NAME] => name
                    [HIDE] => hide
                    [CATEGORY] => category
                    [Admin_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/admin.png'><br></td></tr>
                    [Staff_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/staff.png'><br></td></tr>
                    [Account_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/account.png'><br></td></tr>
                    [Member_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/member.png'><br></td></tr>
                    [News_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/news.png'><br></td></tr>
                    [Recruitment_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/recruitment.png'><br></td></tr>
                    [Security_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/security.png'><br></td></tr>
                    [Division_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/division.png'><br></td></tr>
                    [Tourny_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/tourny.png'><br></td></tr>
                    [Training_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/training.png'><br></td></tr>
                    [Awards_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/awards.png'><br></td></tr>
                    [Info_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/info.png'><br></td></tr>
                    [Unknown_I] => <tr><td align='left'>&nbsp;&nbsp;&nbsp;&nbsp;<img src='images/console/unknown.png'><br></td></tr>
                )

        )

) 
```

这是否接近您正在寻找的内容？

# c++ - C ++无法在类中调用成员函数

> ID：15687638
> 
> 赞同：2
> 
> 时间：2013-03-28T16:49:48.663
> 
> 标签：c++, static-methods

我想知道为什么不能从静态函数调用成员函数

```
#include <iostream>

class A{
public:
  A(){}
  ~A(){}
  static void astaticFunction(){
    printHello();
  }

private:
  void printHello(){
    std::cout << "Hello" << std::endl;
  }

};

int main(int argc, char **argv){
  A::astaticFunction();
  return 0;

} 
```

编译器正在返回这个

```
main.cpp: In static member function ‘static void A::astaticFunction()’:
main.cpp:8:16: error: cannot call member function ‘void A::printHello()’ without object 
```

我该如何使用它？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T16:51:03.157

您只能从静态成员函数内部调用其他静态成员函数。这是因为非静态成员函数与对象的特定实例相关联。这里没有实例。

所以一个快速的解决方法是使`printHello`静态：

```
static void printHello(){
  std::cout << "Hello" << std::endl;
} 
```

如果您*需要* `printHello`处理的特定实例`A`（因为可能在您的真实代码中它使用非静态数据成员），那么您需要创建该实例。你可以这样做：

```
static void astaticFunction(){
  A a; // Create an A object
  a.printHello();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:59:28.813

正如 sftrabbit 所说，您不能从静态成员函数访问非静态成员。正如解释为什么，使用隐式传递*this （实例指针）的调用约定来调用非静态成员函数。*所以当你调用它们时，除了定义的参数之外，还有一个隐藏的*这个*参数。

# excel - 弹出“来电”提醒？

> ID：15687641
> 
> 赞同：0
> 
> 时间：2013-03-28T16:49:55.570
> 
> 标签：excel, vba, popup, userform

我想知道是否有一个 VBA 代码可以使用，如果 R 列中的日期是今天的日期，那么可以弹出一个提醒框并说“你有电话要打”或类似的东西？可能有许多相同的日期，但只需要在打开工作表时弹出一个框，让员工查看他们的回拨列表。

我现在拥有的：

For Each c In checkhere If c.Value = Date Then MsgBox "You have some call backs to make" Exit For End If Next c

```
Dim NewControl As CommandBarControl
Application.CommandBars("Cell").Controls("Insert Date").Delete
Set NewControl = Application.CommandBars("Cell").Controls.Add
With NewControl
    .Caption = "Insert Date"
    .OnAction = "Module1.OpenCalendar"
    .BeginGroup = True
End With
 End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:12:51.997

将其放入“ThisWorkbook”

```
 Private Sub Workbook_Open()

            Dim checkhere As Range

            Set sh = Sheets("yoursheethere")
            Set checkhere = sh.Range("R1:R" & sh.Range("R1").End(xlDown).Row)

            For Each c In checkhere

                If c.Value = Date Then
                MsgBox "You have some unanswered calls"
                Exit For
                End If
            Next c

            End Sub 
```

# ruby-on-rails - CarrierWave 未使用自定义处理器保存版本

> ID：15687648
> 
> 赞同：2
> 
> 时间：2013-03-28T16:50:19.080
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我有带有 CarrierWave 上传器的模型：

```
# app/models/video.rb

class Video < ActiveRecord::Base

  mount_uploader :the_video, VideoUploader

end 
```

上传器如下所示：

```
# app/uploaders/video_uploader.rb

class VideoUploader < CarrierWave::Uploader::Base
  include CarrierWave::FLV

  storage :file

  def move_to_cache
    true
  end

  def move_to_store
    true
  end

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{model.id}"
  end

  def extension_white_list
    %w(avi mp4 mpg flv)
  end

  version :flv do
    process :put_to => 'flv'
  end

end 
```

而最有趣的部分——定制处理器：

```
# lib/carrier_wave/flv.rb

require 'streamio-ffmpeg'

module CarrierWave
  module FLV
    extend ActiveSupport::Concern

    module ClassMethods
      def put_to(format)
        process :put_to => format
      end
    end

    def put_to(format = 'flv')
      directory = File.dirname(current_path)
      tmp_path  = File.join(directory, "tmpfile")

      File.rename current_path, tmp_path

      file = ::FFMPEG::Movie.new(tmp_path)
      file.transcode(current_path, {audio_codec: 'copy', video_codec: 'copy'})

      File.delete tmp_path
    end

  end
end 
```

下一步我做：

```
irb(main):005:0> v = Video.new
irb(main):005:0> v.the_video = File.open('/path/to/video.mp4')
irb(main):005:0> v.save
irb(main):005:0> v.the_video.size
=> 0
irb(main):005:0> v.the_video.flv.size
=> 0 
```

为什么 CarrierWave 没有保存原始版本和 flv 版本？

还有一件事，当我在 video_uploader.rb 中评论版本块时 - 一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:39:47.600

我认为该`version`块不会起作用，因为转换视频不像转换图像那么容易。您需要解决用于进行该转换的不同类型的编解码器。

如果您真的想修改/操作视频，请查看此链接它描述了一个名为：**zencoder**

[http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)

希望能帮助到你。

# c# - 不止一个单例 c# 实例

> ID：15687652
> 
> 赞同：1
> 
> 时间：2013-03-28T16:50:32.220
> 
> 标签：c#, singleton

是否有一种允许创建多个实例的类单例模式的实现？

我的班级定义是：

```
public class Logger
{
    private Logger(string logPath)
    {
        this.logPath = logPath;
    }

    /// <summary>
    /// Creates singleton 
    /// </summary>
    /// <param name="logPath"></param>
    /// <returns></returns>
    public static Logger GetInstance(string logPath)
    {
        lock (instanceLock)
        {
            if (logger == null)
            {
                logger = new Logger(logPath);
            }
        }
        return logger;
    }

    public static Logger Instance()
    {
        return logger;
    }

    /// <summary>
    /// Destructor
    /// </summary>
    ~Logger()
    {
        try
        {
            this.Close();
        }
        catch (Exception)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:52:45.607

> 是否有一种类似于 Singleton 的模式的实现，它允许创建多个实例。

如果你想要多个实例，只允许直接构造类，不要让它成为单例。在您的情况下，只需将构造函数公开，并删除单例/实例逻辑。

话虽如此，有[Multiton 模式](http://en.wikipedia.org/wiki/Multiton_pattern)，它允许通过单个接口对多个实例进行键控访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:56:41.703

这是我使用的模式：

```
public class Logger
{
    private Logger(...) { ... }

    static Logger { /* initialize Errors, Warnings */ }

    public static Logger Errors { get; private set; }
    public static Logger Warnings { get; private set; }

    public void Write(string message) { ... }
} 
```

如果你想有一个`static Logger Lookup(string name)`方法，你也可以这样做。

现在在其他代码中您可以编写`Logger.Errors.Write("Some error");`或`Logger.Warnings.Write("Some warning");`.

**奖励：**您可以在方法`Environment.StackTrace`内部使用`Write`额外记录您调用`Write`的方法。

# jquery - ASP.NET MVC 远程验证钩子方法

> ID：15687654
> 
> 赞同：2
> 
> 时间：2013-03-28T16:50:46.360
> 
> 标签：jquery, asp.net-mvc, validation

是否可以在客户端添加带有远程验证的钩子方法？我想检查是否已经接收了一封电子邮件，如果是这样，我想在我的表单上添加一个按钮，该按钮将向用户显示该电子邮件地址。

注意我还检查是否需要电子邮件和/或有效的电子邮件。该按钮应仅在电子邮件已在数据库中时显示。

（验证本身有效，我只想捕捉事件并在我的视图中添加一个按钮）

这是我在模型中的代码

```
 <Remote("ValidateEmail", "User", additionalfields:="UserGuid,PersonGuid", ErrorMessageResourceType:=GetType(Resources.Messages), ErrorMessageResourceName:="UserErrorDuplicateEmail")>
    Public Property Email As String 
```

我的 javascript

```
function createValidationCheck() {
$("form input").change(function () {
    console.log("change")
    $("form").valid();
});

$("form").validate({
    invalidHandler: function (event, validator) {
        console.log("TESTING")
    }
})} 
```

这是我观点的一部分

```
@Using (Ajax.BeginForm("SaveUserDetail", New AjaxOptions With {.HttpMethod = "Post",
                                                                .UpdateTargetId = "displayContainer",
                                                                .OnFailure = "PostFailure",
                                                                .OnSuccess = "fillDisplayContainer",
                                                               .OnComplete = "userDetailFinished"
                                                              }))

         @<div id="detailInformation">
            <h2>@Resources.Labels.UserDetails</h2>

              @Html.HiddenFor(Function(m) m.UserGuid)
               @Html.HiddenFor(Function(m) m.PersonGuid)

              <div class="label">
                @Html.LabelFor(Function(m) m.Email)

            </div>
            <div class="displayForCorrector">
                @Html.TextBoxFor(Function(m) m.Email)
                 @Html.ValidationMessageFor(Function(m) m.Email,Nothing,New With{.id ="ShowEmailList"})
            </div> 
```

简而言之，如何通过 jquery 捕获验证事件并为其添加行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:40:58.230

我找到了解决方案

要添加一个事件，只需在您的 Javascript 中添加它

```
 $("form").bind('invalid-form.validate',addValidationInvalidHandler) 
```

addValidationInvalidHandler 是我自己的 javascript 函数，每次我的表单无效时都会调用它

# jquery - jQuery Backstretch 在 Refinery Rails 应用程序的多个页面上显示

> ID：15687661
> 
> 赞同：0
> 
> 时间：2013-03-28T16:51:02.580
> 
> 标签：jquery, ruby-on-rails, refinerycms, jquery-backstretch

我安装了一个 jQuery 插件[Backstretch](http://srobbin.com/jquery-plugins/backstretch/)并与我的 Refinery Rails 应用程序一起使用。

该插件会加载我在其中列出的 1 张图片

## 应用程序.js

```
 //= require 'jquery-backstretch'
$.backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjcvMjJfNTZfMjRfOTkyX3NsYXRlX2JnLnBuZyJdXQ/slate-bg.png"); 
```

我正在尝试从我发现的一个示例中工作，该示例说明“使用 if/else 语句来加载回弹。`if($("body#about"))....else if($("body#contact")...";`但是我真的不知道如何正确编写它。这是我尝试过的：

## 应用程序.js

```
 //= require 'jquery-backstretch'
if ($"body#home"($.backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjcvMjJfNTZfMjRfOTkyX3NsYXRlX2JnLnBuZyJdXQ/slate-bg.png"));
 else if ($"body#our-passion".backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjUvMDBfMTlfMjlfMzgyX2JnXzFfYmlnLnBuZyJdXQ/bg-1-big.png")); 
```

写这个的正确方法是什么？或者有没有更好的方法来达到这个效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:14:24.833

首先，为什么在 id 之前需要 body ？即***身体***#home

由于#home 和#our-passion 都是id，因此您似乎不需要body。

至于您的问题：我认为这就是您想要的，尽管您实际上想要实现的目标有点模糊：

```
if ($("#home").length != 0) {
  $.backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjcvMjJfNTZfMjRfOTkyX3NsYXRlX2JnLnBuZyJdXQ/slate-bg.png");
} else if ($("#our-passion").length != 0) {
  $.backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjUvMDBfMTlfMjlfMzgyX2JnXzFfYmlnLnBuZyJdXQ/bg-1-big.png");
} 
```

我可能解释错了。也许您正在尝试为#home 和#our-passion 添加回弹？

希望这可以帮助！

**编辑** 这里是我们的激情页面应该包含在 HTML 中的内容：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    ...
  </head>
  <body>
    <div id="our-passion"></div>
  </body>
 </html> 
```

还有其他方法可以做到这一点，但这是根据您的问题如何做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:28:15.567

这通过把

```
$(".show").backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjcvMjJfNTZfMjRfOTkyX3NsYXRlX2JnLnBuZyJdXQ/slate-bg.png");
$(".home").backstretch("/system/images/W1siZiIsIjIwMTMvMDMvMjUvMDBfMTlfMjlfMzgyX2JnXzFfYmlnLnBuZyJdXQ/bg-1-big.png"); 
```

在 application.js 文件中 - 并包含正文的内容及其相应的 div。

## 更新：

我最终在单独的视图中运行了这个脚本。

# php - iOS6 中的自动增量推送通知徽章

> ID：15687663
> 
> 赞同：3
> 
> 时间：2013-03-28T16:51:04.507
> 
> 标签：php, ios, push-notification, apple-push-notifications, badge

我从服务器收到推送通知。服务器始终在有效负载中发送 badge=1。

服务器端开发人员对此一无所知。谁能告诉我服务器端开发人员如何处理徽章计数值，以便 iOS 应用程序将获得更新的徽章计数（自动递增的徽章计数）？

1.  我可以在 iOS 应用程序端自动增加它吗？如果是这样，怎么做？

2.  如果没有，那么服务器开发人员如何处理服务器上的徽章计数？我看到几个链接告诉我服务器端应该处理徽章计数。

任何样本或参考都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:55:20.493

我认为你不能在 iOS 应用程序方面做到这一点。它必须来自服务器。

我做什么：

*   服务器为每个用户在数据库中存储一个应用程序徽章编号。
*   当服务器发送通知时，它会将该数字增加 1。
*   您还需要创建一个 Web 服务来重置您在启动应用程序时将调用的徽章编号。

您可以使用该行更改应用程序中的徽章编号（例如在 applicationDidBecomeActive 中）：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    application.applicationIconBadgeNumber = 0;
} 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:56:38.627

徽章计数是可以从服务器在 Apple 推送通知有效负载中发送的参数之一。徽章计数通常反映服务器知道并希望提醒应用程序用户的某种新数据（例如未读电子邮件）的数量。因此它应该在服务器端完成。应更改当前在徽章计数中始终发送 1 的代码以选择正确的计数。

您可以在客户端中执行此操作（每当推送通知到达时将其增加一），但这不是一个好主意，因为不能保证推送通知到达。此外，只有在通知中除了徽章编号之外还包含警报，并且用户点击通知以打开应用程序（否则，如果您的应用程序尚未运行，您的应用程序将不会获得通知数据）。 .

# jquery - 背景图像在 Firefox 上显示正常，但在 chrome 上不显示

> ID：15687667
> 
> 赞同：0
> 
> 时间：2013-03-28T16:51:25.683
> 
> 标签：jquery, google-chrome, firefox, background-image

在我的网站上，我的背景图像在 Firefox 上显示良好，但在 chrome 上，侧面有大的白色框，当 jquery 图像幻灯片移动到下一个图像时，这些框会消失。我在 CSS 中将背景图像链接到正文我的内容包括图像滑块。

**这是现场网站**

[http://wilsontsa.org/Technology%20courses/Technology%20Courses.html](http://wilsontsa.org/Technology%20courses/Technology%20Courses.html)

**HTML**

```
<body>

<div id="bar">
</div>
<center>
<div id="pagecontainer">
<div id="container">
<div id="navigation">

<ul id="navigation">
<li id="techlink" class="dropdown"><a href="../Technology courses/Technology                 Courses.html" style="color:#046f83">Technology Courses</a>
<ul class="sub_navigation">
<li><a href="../Technology courses/Computer Science.html">&nbsp;Computer &nbsp;Science</a></li>
<li><a href="../Technology courses/Digital Video.html">&nbsp;&nbsp;&nbsp;&nbsp;Digital Video&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
<li><a href="../Technology Courses/Technology Innovation.html">Technology Innovation</a></li>
<br />
<li><a href="../Technology courses/Visual Design and Image Applications.html">Visual Design and Image App.</a></li>
<br />
<li><a href="../Technology courses/Web Design.html">Web Design</a></li>
</ul>
</li>
<li id="englink" class="dropdown"><a href="../Engineering Courses/Engineering Courses.html">Engineering Courses</a>
<ul class="sub_navigation">
<li><a href="../Engineering Courses/Introduction to Engineering and Design.html">Intro to Engineering</a></li>
<br />
<li><a href="../Engineering Courses/Computer Integrated Manufacturing.html">Computer Integrated Manufact.</a></li>
<br />
<li><a href="../Engineering Courses/Principles of Engineering.html">Principles of Engineering</a></li>
<br />
<li><a href="../Engineering Courses/Digital Electronics.html">Digital Electronics</a></li>
<br />
<li><a href="../Engineering Courses/Civil Engineering and Architecture.html">Civil Engineering</a></li>
<br />
<li><a href="../Engineering Courses/Aerospace Engineering.html">Aerospace Engineering</a></li>
<br />
<li><a href="../Engineering Courses/Engineering Design and Development.html">Engineering Design</a></li>
<br />
<li><a href="../Engineering Courses/I-Stem.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I-STEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
</ul>
</li>
<li id="STEMlink"><a href="../STEM/stem.html">STEM</a></li>
<li id="weblink" class="dropdown"><a href="../Webmaster/Evolution.html">Webmaster</a>
<ul class="sub_navigation">
<li><a href="../Webmaster/Evolution.html">Evolution</a></li>
<li><a href="../Webmaster/Adapting.html">Adapting</a></li>
<li><a href="../Webmaster/Advertising.html">Business Model</a></li>
<li><a href="../Webmaster/Solution.html">Future</a></li>
</ul>
</li>

<div id="tsa" class="TSA">
  <li><a href="../TSA Chapter/TSA.html"><img  src="../Images/Design Images/TSA-LOGO.png" width="50" height="34" /></a></li>
  </div>
</ul>
</div> <!--navigation div --> 

</ul>
</center>

<div id="spacer">

<div id="wrapper">
<div>
<div class="slider-button" onclick="ss.move(-1)">&laquo;</div>
<div id="slideshow">
  <ul id="slides">
    <li><img src="../Javascript Photos/Picture1.png" width="900" height="300" alt="Coral Reef"></li>
    <li><img src="../Javascript Photos/Picture2.png" width="900" height="300" alt="Sea turtle">
    </li>
    <li><img src="../Javascript Photos/Picture3.png" width="900" height="450" alt="Coral Reef"></li>
    <li><img src="../Javascript Photos/Picture4.png" width="900" height="300" alt="Blue Fish"></li>
  </ul>
  </div>
  <div class="slider-button" onclick="ss.move(1)">&raquo;</div>
  </div>
  <ol id="pagination" class="pagination">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  </ol>
 </div> 
```

**CSS**

```
body {
background-image: url(Images/Tech nology%20Images/bg_Tech.gif);} 
```

**滑块 CSS**

```
li.current {
background:#102c75;}

#slideshow {
float:left; 
width:900px; 
height:300px; 
border:2px solid #ccc; 
background:#fff;
position:relative;
top:16px;
z-index:-1;}

#slides {
position:relative; 
width:900px; 
height:300px; 
list-style:none; 
overflow:auto;
z-index:-1;}

#slides li {
width:900px; 
height:300px;}

.fader-slide {
opacity:0; 
position:absolute;}

.fader-fade {
opacity:1;
 -webkit-transition:opacity .4s; 
 -moz-transition:opacity .4s; 
 transition:opacity .4s;}

#content {
width:900px; 
height:270px; 
padding:15px 18px 15px 18px; 
background:#fff;}

#content h1 {
font:22px Georgia,Verdana; 
margin-bottom:15px; 
color:#036;}

#caption {
background:#fff; 
position:relative;}

#caption div {
position:absolute; 
bottom:0; 
left:0; 
width:900px; 
padding:15px 18px 10px 18px; 
background:#000; 
background:rgba(0,0,0,.7);}

#caption h2 {
font:18px Georgia,Verdana; 
margin-bottom:6px; 
color:#eee;}

#caption p {
line-height:1.4; 
color:#aaa;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:04:09.100

这不好：

```
body {
background-image: url(Images/Tech nology%20Images/bg_Tech.gif);} 
```

首先，不推荐使用背景图像。其次，由于缺少引号以及空格的使用，Chrome 将无法识别该 URL。

（就在它说的地方：`/Tech nology%20Images/`- 看到那个空间吗？这是一个禁忌。%20 也可以是一个禁忌。）

它应该看起来像这样。

```
body {
    background:url('Images/TechnologyImages/bg_Tech.gif');
} 
```

注意：为此，您必须将目录重命名`Technology Images`为`TechnologyImages`. 无论如何，您确实应该这样做，因为在目录名称中包含空格不是一个好习惯。（或文件名，就此而言。使用`-`或`_`如果必须。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:59:03.680

您使用的幻灯片似乎正在破坏某些东西，而不是它似乎正在工作。如果你看一下身体的高度，它似乎大约是 90 像素。您可以使用 jQuery 将正文强制放到页面底部，或者在页面底部放置一个 CSS clear 类。

# javascript - 为什么 0 == '' 在 Javascript 中为真？

> ID：15687669
> 
> 赞同：0
> 
> 时间：2013-03-28T16:51:34.493
> 
> 标签：javascript, equals

为什么，在 Javascript 中，

```
0 == '' 
```

是真的 ？

[http://jsfiddle.net/TXhCs/](http://jsfiddle.net/TXhCs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:53:25.173

那是因为 javascript 正在尝试对 as 进行类型转换，`''`因为`''`is a type`String`并且`0`is a `number`type。`''`，当转换为数字时，是`0`

# linux - 将文本文件转换为列

> ID：15687670
> 
> 赞同：9
> 
> 时间：2013-03-28T16:51:35.097
> 
> 标签：linux, unix, awk

假设我有科学数据，所有数字都排列在单列中，但表示*n*（宽度）乘*m*（高度）的强度矩阵。输入文件的列共有*n* * *m*行。输入示例可能如下所示：

```
1  
2  
3  
......  
30 
```

新的输出应该是这样，我有*m行的**n 个*新列。坚持我的示例，输入 30 个字段，*n* = 3，*m* = 10，我需要这样的输出文件（分隔符无关紧要，可以是空白、制表符等）：

 ***```
1   11  21  
2   12  22  
... ... ...
10  20  30 
```

我在 Windows 下使用 gawk。请注意，没有特殊`FS`的，更真实的例子是 60 * 60 或更大。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T14:01:43.590

如果您不限于`awk`但拥有 GNU core-utils *(cygwin, native, ..)，*那么最简单的解决方案是使用`pr`：

```
pr -ts" " --columns 3 file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:27:24.897

我相信这会做到：

```
awk '
  { split($0,data); }
  END {
     m = 10;
     n = 3;
     for( i = 1; i<=m; i++ ) {
        for( j = 0; j<n; j++ ) {
            printf "%s ", data[j*m + i] # output data plus space in one line
        }
        # here you might want to start a new line though you did not ask for it:
        printf "\n"; 
     }
  }' inputfile 
```

我可能有错误的索引计数，但我相信你能弄清楚。诀窍是`split`在第一行。它将您的输入拆分为空格并创建一个数组`data`。该`END`块在处理您的文件后运行，仅`data`按索引访问。注意数组索引从 0 开始计数。

假设所有数据都在一行中。你的问题在这方面不是很清楚。如果它在多行上，则必须以不同的方式将其读入数组。

希望这能让你开始。

**编辑** 我注意到你在我回答的时候改变了你的问题。所以改变

```
{ split($0,data); } 
```

至

```
{ data[++i] = $1; } 
```

考虑输入在不同的行上。实际上，这将使您首先可以选择将其读入二维数组。

**编辑 2**

**读取二维数组** 要读取为二维数组，假设`m`并且`n`事先已知并且未以某种方式在输入中编码：

```
awk '
  BEGIN {
     m = 10;
     n = 3;
  }
  { 
     for( i = 0; i<m; i++ ) {
        for( j = 0; j<n; j++ ) {
            data[i,j] = $0;
        }
     }
     # do something with data
  }' inputfile 
```

但是，由于您只想重新格式化您的数据，您可以立即进行。结合两种解决方案摆脱并在命令行上`data`传递：`m``n`

```
awk -v m=10 -v n=3'
  { 
     for( i = 0; i<m; i++ ) {
        for( j = 0; j<n; j++ ) {
            printf "%s ", $0     # output data plus space in one line
        }
        printf "\n";
     }
  }' inputfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:06:36.687

这是一个相当简单的解决方案（在示例中我设置`n`为 3；为 插入适当的值`n`）：

```
awk -v n=3 '{ row = row $1 " "; if (NR % n == 0) { print row; row = "" } }' FILE 
```

这通过一次读取一行将每一行与前面的行连接起来来实现。连接行后`n`，它将连接的结果打印在一个新行上。重复此过程，直到输入中没有更多行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-07T06:49:56.457

您可以使用以下命令

```
paste - - - < input.txt 
```

默认情况下，分隔符是 TAB，要更改分隔符，请使用以下命令

```
paste - - - -d' ' < input.txt 
```***

# python - Python print 没有使用 __repr__、__unicode__ 或 __str__ 作为 unicode 子类？

> ID：15687676
> 
> 赞同：10
> 
> 时间：2013-03-28T16:51:51.267
> 
> 标签：python, class, unicode, subclass, derived-class

Python print 在打印时没有使用`__repr__`,`__unicode__`或者`__str__`我的 unicode 子类。关于我做错了什么的任何线索？

这是我的代码：

使用 Python 2.5.2（r252:60911，2009 年 10 月 13 日，14:11:59）

```
>>> class MyUni(unicode):
...     def __repr__(self):
...         return "__repr__"
...     def __unicode__(self):
...         return unicode("__unicode__")
...     def __str__(self):
...         return str("__str__")
...      
>>> s = MyUni("HI")
>>> s
'__repr__'
>>> print s
'HI' 
```

我不确定这是否是上述的准确近似值，但只是为了比较：

```
>>> class MyUni(object):
...     def __new__(cls, s):
...         return super(MyUni, cls).__new__(cls)
...     def __repr__(self):
...         return "__repr__"
...     def __unicode__(self):
...         return unicode("__unicode__")
...     def __str__(self):
...         return str("__str__")
...
>>> s = MyUni("HI")
>>> s
'__repr__'
>>> print s
'__str__' 
```

[已编辑...] 这听起来像是获取 isinstance(instance, basestring) 并提供对 unicode 返回值的控制的字符串对象的最佳方法，并且使用 unicode repr 是...

```
>>> class UserUnicode(str):
...     def __repr__(self):
...         return "u'%s'" % super(UserUnicode, self).__str__()
...     def __str__(self):
...         return super(UserUnicode, self).__str__()
...     def __unicode__(self):
...         return unicode(super(UserUnicode, self).__str__())
...
>>> s = UserUnicode("HI")
>>> s
u'HI'
>>> print s
'HI'
>>> len(s)
2 
```

上面的**_ *str* _**和**_ *repr* _**没有给这个例子增加任何东西，但它的想法是显式地显示一个模式，并根据需要进行扩展。

只是为了证明这种模式授予控制权：

```
>>> class UserUnicode(str):
...     def __repr__(self):
...         return "u'%s'" % "__repr__"
...     def __str__(self):
...         return "__str__"
...     def __unicode__(self):
...         return unicode("__unicode__")
... 
>>> s = UserUnicode("HI")
>>> s
u'__repr__'
>>> print s
'__str__' 
```

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T17:05:08.473

问题是`print`不尊重子类。`__str__``unicode`

从[`PyFile_WriteObject`](http://hg.python.org/cpython/file/2145593d108d/Objects/fileobject.c), 由`print`:

```
int
PyFile_WriteObject(PyObject *v, PyObject *f, int flags)
{
...
        if ((flags & Py_PRINT_RAW) &&
    PyUnicode_Check(v) && enc != Py_None) {
    char *cenc = PyString_AS_STRING(enc);
    char *errors = fobj->f_errors == Py_None ? 
      "strict" : PyString_AS_STRING(fobj->f_errors);
    value = PyUnicode_AsEncodedString(v, cenc, errors);
    if (value == NULL)
        return -1; 
```

`PyUnicode_Check(v)``v`如果's 的类型是`unicode` *或子类*，则返回 true 。因此，此代码直接编写 unicode 对象，无需咨询`__str__`.

请注意，子类化`str`和覆盖`__str__`按预期工作：

```
>>> class mystr(str):
...     def __str__(self): return "str"
...     def __repr__(self): return "repr"
... 
>>> print mystr()
str 
```

与调用`str`或`unicode`显式一样：

```
>>> class myuni(unicode):
...     def __str__(self): return "str"
...     def __repr__(self): return "repr"
...     def __unicode__(self): return "unicode"
... 
>>> print myuni()

>>> str(myuni())
'str'
>>> unicode(myuni())
u'unicode' 
```

我相信这可以解释为当前实现的 Python 中的一个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T16:53:33.507

您正在继承`unicode`.

它永远不会调用`__unicode__`，因为它*已经是*unicode。相反，这里发生的是对象被*编码*为`stdout`编码：

```
>>> s.encode('utf8')
'HI' 
```

除了它将使用直接 C 调用而不是`.encode()`方法。这是`print`unicode 对象的默认行为。

`print`语句调用，[`PyFile_WriteObject`](http://hg.python.org/cpython/file/2.7/Objects/fileobject.c#l2543)它又[`PyUnicode_AsEncodedString`](http://hg.python.org/cpython/file/2.7/Objects/unicodeobject.c#l1291)在处理`unicode`对象时调用。然后后者遵循当前编码*的*编码函数，这些函数使用[Unicode C 宏](http://hg.python.org/cpython/file/2.7/Include/unicodeobject.h#l431)直接访问数据结构。你不能从 Python 中截取它。

我猜你正在寻找的是一个`__encode__`钩子。由于这已经是一个`unicode`子类，`print`只需要编码，不需要再转换`unicode` *，*也不能在不显式编码的情况下将其转换为字符串。您必须与 Python 核心开发人员一起讨论这个问题，看看是否`__encode__`有意义。

# git - 通过 HTTPS 或 SSH 使用 Git 的最佳方式是什么？

> ID：15687677
> 
> 赞同：0
> 
> 时间：2013-03-28T16:51:52.320
> 
> 标签：git, github, https, ssh, bitbucket

我想知道使用 Github 和 Bitbucket 等服务的最安全方式是什么。使用 HTTPS 和使用 SSH 有什么区别？

它会改变调用存储库的方式吗？我的意思是，我见过类似的命令：

`git clone git@github.com:nsf/godit.git`

和

`git clone [https://github.com/nsf/godit.git](https://github.com/nsf/godit.git)`

我想避免这样的问题：

[git push 疑难解答 - 它要求用户/通行证](https://stackoverflow.com/questions/5813726/troubleshooting-git-push-it-asks-for-a-user-pass)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:00:13.560

区别主要在于身份验证的方式：对于 SSH，您将使用密钥进行身份验证，而 HTTPS 将使用用户名/密码。

请注意，要使用 SSH，您需要对存储库具有写入权限，而 HTTPS 可用于任何类型的存储库。[这](https://help.github.com/articles/which-remote-url-should-i-use)是一个有用的帮助页面，其中包含更多详细信息。

为避免必须使用 HTTPS 身份验证重新输入密码，请参阅[本文](https://help.github.com/articles/set-up-git#password-caching)。

# three.js - 使用 Three.js 的地形碰撞问题

> ID：15687678
> 
> 赞同：1
> 
> 时间：2013-03-28T16:51:54.433
> 
> 标签：three.js, webgl, collision, terrain, heightmap

我已经通过 Three.js 中的高度图创建了一个地形，并且正在使用 mrdoob 的 misc_controls_pointerlock 进行碰撞和移动。但是，当我做*objects.push(terrainobj);* 性能下降到大约 3fps（从大约 60 帧）并且没有与地形发生碰撞。碰撞是通过光线实现的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:33:16.260

如果它只是一个高度图，您可以避免使用射线并在位图中进行碰撞检查（使用画布和图像数据）。

您只需要将您的 XZ 世界位置转换为高度图中的 XY 像素。然后，如果您在世界中的 Y 位置低于像素的颜色值，则您向上移动对象。

# ios - IOS 推送通知错误

> ID：15687679
> 
> 赞同：0
> 
> 时间：2013-03-28T16:51:54.823
> 
> 标签：ios, objective-c, cordova

`AppDelegate.m`我已经在文件中为我的 phonegap 应用程序启用了推送通知。我使用的代码行来自视频教程，因为我并不真正了解 OBJ-C，它给了我一个格式字符串问题。这是代码以及错误。

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    NSString *deviceTokenString = [NSString stringWithFormat:@"%@", deviceToken];
    NSLog(deviceTokenString);} 
```

*格式不是字符串文字（可能很危险）*

了解 Javascript，我从字面上理解字符串的含义，但我不确定如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:57:59.257

如果错误出现在您的`NSLog`行上，那么我认为它指的是*格式字符串*- 的第一个参数`NSLog`，它告诉它您要输出的字符串（可能带有替换标记） - 是一个变量，而不是字符串字面量。您可以尝试：

```
NSLog(@"%@", deviceToken); 
```

或者如果您`deviceTokenString`在其他地方使用并希望保留该变量，您可以执行以下操作：

```
NSLog(@"%@", deviceTokenString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:58:44.597

如果您想查看设备令牌是否已注册，您真正需要的是：

```
NSLog(@"My token is: %@", deviceToken); 
```

这将为您提供设备令牌信息。摆脱字符串文字，因为您正在将字符串转换为字符串。没有必要这样做。

# c++ - 仅对部分顶点缓冲区进行矩阵运算 (opengl-tutorial.org)

> ID：15687680
> 
> 赞同：1
> 
> 时间：2013-03-28T16:51:54.847
> 
> 标签：c++, opengl

我最近了解到：

```
glBegin(GL_TRIANGLES);
glVertex3f( 0.0f, 1.0f, 0.0f);
glVertex3f(-1.0f,-1.0f, 0.0f);
glVertex3f( 1.0f,-1.0f, 0.0f);
glEnd(); 
```

并不是真的如何完成。我一直在使用[opengl-tutorial.org](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-17-quaternions/)上的教程，它向我介绍了 VBO。现在我将它全部迁移到一个类中并试图完善我的理解。
我的情况与[此](https://stackoverflow.com/questions/8951509/modern-opengl-vbo-glm-and-matrix-stacks)类似。我了解如何使用矩阵进行旋转，我可以自己完成所有操作，然后将其交给 gl 和朋友。但是我敢肯定那效率要低得多，并且会涉及与显卡的更多通信。该网站上的教程 17 展示了如何旋转事物，它使用：

```
// Send our transformation to the currently bound shader, 
// in the "MVP" uniform
glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);
glUniformMatrix4fv(ModelMatrixID, 1, GL_FALSE, &ModelMatrix[0][0]);
glUniformMatrix4fv(ViewMatrixID, 1, GL_FALSE, &ViewMatrix[0][0]); 
```

旋转对象。我认为这比我能生产的任何东西都更有效率。我想做的是做这样的事情，但只将矩阵乘以一些网格，而不将网格分成几块（因为这会破坏三角形-顶点-索引关系，我最终会手动将它缝合在一起）。
有单独的功能吗？是否有一些更高级别的库来处理我应该使用的网格和骨骼（正如对其他人的一些回复似乎暗示的那样）？我不想再次陷入使用过时和低效的东西，只是为了以后再次重做所有事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:58:34.957

制服之所以如此命名，是因为它们是*统一*的：在渲染调用过程中不变。着色器只能对输入值（每个输入类型提供。顶点着色器的每个顶点，片段着色器的每个片段等）、制服（对于单个渲染调用是固定的）和全局变量（它们是为着色器的每个实例化重置为其原始值）。

如果您想在单个渲染调用中对对象的不同部分执行不同的操作，则必须根据*输入变量*执行此操作，因为在单个渲染调用中只有输入会发生变化。听起来您正在尝试使用矩阵蒙皮或对象层次结构做某事，因此您可能希望为每个顶点提供矩阵索引或其他内容作为输入。您使用此索引来查找统一矩阵*数组*以获取您要使用的实际矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:59:58.137

# linux - 如何伪造一个进程成为另一个进程的子进程

> ID：15687683
> 
> 赞同：1
> 
> 时间：2013-03-28T16:52:00.110
> 
> 标签：linux, process

程序 A (ReportHandler) 调用程序 B (Specific Report)。为了让我得到我的“特定报告”，我需要通过程序 A，然后调用程序 B 并让我得到我的报告。我的问题是程序 B 有一个“安全”措施来检查程序 B 是否是程序 A 的子进程。（这是因为程序 A 确保没有其他人在运行这个程序 B，确保它运行在一天中的 x 和 y 小时之间，或其他可能干扰程序 B 运行的程序等）

程序 A 和 B 是基于 C 的，但我不能（不能）更改它们。我检查了代码，但我无法将参数传递给程序 A 以从控制台运行 B .. SOOO，我剩下的唯一想法是尝试“欺骗”系统，以便程序 B 显示为程序 A 的子程序，所以我可以从控制台运行它。

我尝试自动执行此操作的原因是，我每天需要拨入十几台服务器才能获取此报告......我想集中这个脚本，以便我可以远程 ssh 这个脚本到每台服务器并完成它。可以节省我一天中的一个小时。或者更多。

### 正在检查

```
if ( TRUE != child_of_Program_A() )
    {
    epause( win[MAIN], 1,
    _("This Program Must Be Run From Program A"));
    return( FAILURE );
}
STATIC BOOL child_of_Program_A()
{
    FILE *fp;

char statname[32];
pid_t ppid;
char proc_name[32];
char buffer[128];
char *ptr;

ppid = getppid();

while(ppid != 1)
    {
    snprintf(statname, sizeof(statname), "/proc/%d/status", ppid);
    if (NULL == (fp = fopen(statname, "r")))
        {
        return(FALSE);
        }

    proc_name[0] = '\0';
    ppid = -1;

    while (NULL != fgets(buffer, sizeof(buffer), fp))
        {
        if (NULL != (ptr = strtok(buffer, STAT_SEP)))
            {
            if (strcasecmp(ptr, "name") == 0)
                {
                if (NULL != (ptr = strtok(NULL, STAT_SEP)))
                    {

                    if (strcmp(ptr, "Program_A") == 0)
                        {
                        fclose(fp);
                        return(TRUE);
                        }
                    strncpy(proc_name, ptr, sizeof(proc_name));
                    }
                }
            else if (strcasecmp(ptr, "ppid") == 0)
                {
                if (NULL != (ptr = strtok(NULL, STAT_SEP)))
                    {
                    ppid = atoi(ptr);
                    }
                }
            }
        if (ppid != -1 && proc_name[0] != '\0')
            break;
        }

    fclose(fp);
    }

return(FALSE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:46:14.470

如果我理解 - 你让这比它需要的更难。自动导航菜单迷宫。除非您真的想尝试您询问的非常不寻常的事情 - 考虑这个替代方案。

以非交互方式进入程序 A 将解决问题。 `scp`您帐户中每个服务器的 shell 脚本。shell 脚本可以是此处的文档。 `stdin`成为脚本，代替键盘。

假设您有与程序 A 的正确交互会话的记录，它看起来像这样：

```
cd /foo
./programA username
password
A
/deviceA/catalog.txt
B
A
13 cows
now 
```

使用 here doc 的脚本如下所示

```
#!/bin/ksh
cd /foo
        ./programA username<<EOF
        password
        A
        /deviceA/catalog.txt
        B
        A
        13 cows
        now  
EOF 
```

您可能有每个远程服务器独有的答案，将它们合并。scp 将正确的文件发送到每个远程服务器。

```
ssh remote_server 'cd /foo && chmod +x ./myscript.sh 
```

这会设置执行权限。

在本地桌面上创建一个简单的 script.sh

```
ssh remote1  './foo/myscript.sh'
ssh remote2  './foo/myscript.sh'
ssh remote3  './foo/myscript.sh' 
```

此 script.sh 现在无需您干预即可运行您的报告。我还猜想您可能没有在远程服务器上设置 ssh 密钥 - 这允许像上面的脚本想要的那样进行无密码访问。

[http://rcsg-gsir.imsb-dsgi.nrc-cnrc.gc.ca/documents/internet/node31.html](http://rcsg-gsir.imsb-dsgi.nrc-cnrc.gc.ca/documents/internet/node31.html)

# java - 修剪掉非数字的东西并使用 replaceAll() 将它们存储在数组中

> ID：15687684
> 
> 赞同：0
> 
> 时间：2013-03-28T16:52:00.920
> 
> 标签：java, regex, string, trim

假设我输入了一行“MOVE R1，R2”，我将单词相对于空白进行拆分，并将它们分别存储到数组 token[] 中，如下所示：

```
String[] token = new String[0];// array initialization
FileInputStream fstream = new FileInputStream("a.txt");

BufferedReader br = new BufferedReader(new InputStreamReader(fstream));         
//Read file line by line and storing data in the form of tokens
While((strLine = br.readLine()) != null){
token = strLine.split(" ");// split w.r.t spaces                
} 
```

所以每个索引处的元素如下： token[0]=MOVE token[1]=R1, token[2]=R2

但我想要的是如下： token[0]=MOVE token[1]=1 token[2]=2

我只想将数值存储在 i>0 的 token[i] 中，修剪掉 R 和逗号（，）。我无法弄清楚如何将 relaceAll() 与数组一起使用。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:56:06.433

试试这个代码：

```
str = str.replaceAll("[^\\d.]", ""); 
```

这将修剪掉非数字的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:27:57.123

```
s=s.replaceAll("\\D", ""); 
```

对于while循环中的各个拆分字符串元素..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:21:14.500

在标记化之前替换：

```
while((strLine = br.readLine()) != null){
strLine = strLine.replaceAll("[^\\d]","");
token = strLine.split(" ");// split w.r.t spaces                
} 
```

# c - 使用 fscanf 读取字符时 - 是否忽略空格？

> ID：15687685
> 
> 赞同：2
> 
> 时间：2013-03-28T16:52:01.563
> 
> 标签：c, character, scanf

我正在阅读以下形式的文件：

```
c h a r a c t e r s 
```

使用 fscanf：

```
fscanf(file, "%c", address); 
```

在一个循环中。它也会读取空格吗？我想忽略空格。我应该使用

```
fscanf(file, "%c ", address); 
```

反而？但是，行中的最后一个字符之后没有空格，所以我认为它不会读取最后一个字符，因为它不在“x”中，而是在“x”中。

我无法检查，因为程序还没有完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:05:39.920

将空格放在格式前面。

```
scanf(" %c", address) 
```

空格实际上意味着“读取**零个或多个**空格”，因此`" %c"`意味着“忽略可选空格并读取一个字符（不一定是空格）”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:03:55.927

正如你所说，在字符串格式中添加空格，但在字符串格式的开头`" %c"`

```
int main()
{
    FILE *file = fopen("file.txt","r");
    char address;
    while(fscanf(file ," %c", &address)>0) {
        printf("_%c", address);
    }
    printf("_\n");
} 
```

# c# - 具有工作单元模式的实体框架和 ADO.NET

> ID：15687694
> 
> 赞同：1
> 
> 时间：2013-03-28T16:52:23.630
> 
> 标签：c#, entity-framework, transactions, domain-events

我们有一个使用 Entity Framework 5 构建的系统，用于创建、编辑和删除数据，但我们遇到的问题是有时 EF 太慢或者根本无法使用实体框架（基于用户参与为表构建数据的视图在数据库中的某些组等中），我们必须使用存储过程来更新数据。

但是我们遇到了一个问题，我们必须将更改保存到 EF 以便将数据保存在数据库中，然后调用存储过程，我们不能使用 ITransactionScope，因为它总是提升为分布式事务和/或在事务期间锁定表以进行选择。

我们还尝试引入一个 DomainEvents 模式，它将事件排队并在保存更改后引发它们，因此我们在数据库中拥有我们需要的数据，但最终我们可能会导致第一部分成功而第二部分失败。

是否有任何好的方法来处理这个问题，或者我们是否需要在这种情况下完全摆脱 EF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:18:09.093

我有类似的情况。后来我把流程分解成小流程，只用EF，把每个小流程都做短。即使整体时间更长，但系统更易于维护和扩展。我还最小化了连接，只更新实体本身，禁用 EF 的 AutoDetectChangesEnabled 和 ValidateOnSaveEnabled。
有时，如果您以不同的方式看待您的问题，您可能会有更好的解决方案。祝你好运！

# clang - 静态库链接错误。架构 armv7s 的未定义符号

> ID：15687698
> 
> 赞同：2
> 
> 时间：2013-03-28T16:52:40.440
> 
> 标签：clang, undefined-symbol

错误是..

```
Undefined symbols for architecture armv7s:
   "ABCD_Initialize(ABCD_data_type*)", referenced from:
       -[MyViewController doSomething] in MyViewController.o
   ld: symbol(s) not found for architecture armv7s
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我想列出我所做的一切

ABCD_Initialize 是我添加的静态库的头文件中的一个函数。

1.  检查了几乎所有相关的问题。
2.  添加了所有文件以正确定位。
3.  在构建阶段链接 FAT 文件（.a 文件）
4.  FAT 文件上的 lipo 表示它对 armv6 armv7 和 armv7s 有效
5.  将“仅构建活动架构”设置为“是”。
6.  添加了与 FAT 文件相关的 .h 文件
7.  重新启动 Xcode，Mac 等 :)

关于我的应用程序的一些事情

1.  创建了一个工作区
2.  向工作区添加了一些其他相关的 .xcodeproj 文件。
3.  添加了 FAT 文件（C++ 的）并在构建阶段链接
4.  在其他链接器标志中设置 -ObjC 标志（以加载静态存档库的所有成员）

环境规格

山狮 + Xcode 4.6 + iOS SDK 6.1

如果您需要更多信息，请与我们联系。任何帮助表示赞赏。

谢谢

J0k3r

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:15:57.270

***我最初的回答：***

我会说第5步是不正确的。

如果您正在构建一个库，您希望构建*所有*架构，而不仅仅是“活动架构”。

将其设置为“ `NO`”，看看效果如何。

***我的第二个回答：***

另外，请确保您`extern "C"`在库函数声明中添加了 "：

```
#ifdef __cplusplus
extern "C" {
#endif

ABCD_Initialize(ABCD_data_type*);

#ifdef __cplusplus
}
#endif 
```

当符号链接到您的应用程序时，这有助于对符号进行分解。[这是一个相关的问题，对正在发生的事情进行了很好的解释](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)。

# http - exec 函数在执行期间阻塞其他请求

> ID：15687701
> 
> 赞同：0
> 
> 时间：2013-03-28T16:52:50.500
> 
> 标签：http, request, system, exec, response

*执行*或*系统*功能正在执行时，我无法获得 http 响应。

1.  一个特定的请求启动*exec*函数`sudo find / -name toto`，这需要一段时间
2.  在执行期间，客户端发送任何其他请求
3.  我没有收到回复

你有类似的问题吗？我试过shell_exec，exec，系统......

我也试过这种情况：一个请求启动一个无限循环第二个请求启动另一个返回“toto”的脚本

它工作正常。*exec*有什么问题？

谢谢你的想法

# jquery - 使用 jQuery 替换 DIV 内容

> ID：15687704
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:53:08.713
> 
> 标签：jquery

我已经浏览了该网站，并且正在努力为我的查询找到一个可靠的答案......基本上我有这些控件；

```
<div id="prod1">
<div id="prod" class="green">
<div id="prodImg"><img src="images/prod_1_image.png" width="200" height="137" alt=""></div>
<div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
<div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
<div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div>
<div id="prodSaving"><p>Save over £150.00</p></div>
<div id="prodOffering"><p>+ Free delivery</p></div>
<div id="prodColour">
<div class="select"><a href="#" id="green"></a></div>
<div><a href="#" id="mauve" class="mauve1"></a></div>
<div><a href="#" id="brown" class="brown1"></a></div>
<div><a href="#" id="grey" class="grey1"></a></div>
<div><a href="#" id="white" class="white1"></a></div>
</div>
</div>
</div> 
```

控件在下面概述的整个脚本中重新出现；

```
<script type="text/javascript">
$(document).ready(function() {
$(".green1").click(function(e){
e.preventDefault();
var content = $(this).html();
$('#prod1').html('<div id="prod" class="green"><div id="prodImg"><img src="images/prod_1_image.png" width="200" height="137" alt=""></div><div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div><div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div><div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div><div id="prodOffering"><p>+ Free delivery</p></div><div id="prodColour"><div class="select"><a href="#" id="green"></a></div><div><a href="#" id="mauve" class="mauve1"></a></div><div><a href="#" id="brown" class="brown1"></a></div><div><a href="#" id="grey" class="grey1"></a></div><div><a href="#" id="white" class="white1"></a></div></div><div id="prodCompare"><input name="Compare" type="checkbox" value="Compare"><p> Compare</p></div></div>');
});

$(".mauve1").click(function(e){
e.preventDefault();
var content = $(this).html();
$('#prod1').html('<div id="prod" class="mauve"><div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div><div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div><div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div><div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div><div id="prodOffering"><p>+ Free delivery</p></div><div id="prodColour"><div><a href="#" id="green" class="green1"></a></div><div class="select"><a href="#" id="mauve"></a></div><div><a href="#" id="brown" class="brown1"></a></div><div><a href="#" id="grey" class="grey1"></a></div><div><a href="#" id="white" class="white1"></a></div></div><div id="prodCompare"><input name="Compare" type="checkbox" value="Compare"><p> Compare</p></div></div>');
});

$(".brown1").click(function(e){
e.preventDefault();
var content = $(this).html();
$('#prod1').html('<div id="prod" class="brown"><div id="prodImg"><img src="images/prod_3_image.png" width="200" height="137" alt=""></div><div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div><div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div><div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div><div id="prodOffering"><p>+ Free delivery</p></div><div id="prodColour"><div><a href="#" id="green" class="green1"></a></div><div><a href="#" id="mauve" class="mauve1"></a></div><div class="select"><a href="#" id="brown"></a></div><div><a href="#" id="grey" class="grey1"></a></div><div><a href="#" id="white" class="white1"></a></div></div><div id="prodCompare"><input name="Compare" type="checkbox" value="Compare"><p> Compare</p></div></div>');
});

$(".grey1").click(function(e){
e.preventDefault();
var content = $(this).html();
$('#prod1').html('<div id="prod" class="grey"><div id="prodImg"><img src="images/prod_1_image.png" width="200" height="137" alt=""></div><div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div><div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div><div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div><div id="prodOffering"><p>+ Free delivery</p></div><div id="prodColour"><div><a href="#" id="green" class="green1"></a></div><div><a href="#" id="mauve" class="mauve1"></a></div><div><a href="#" id="brown" class="brown1"></a></div><div class="select"><a href="#" id="grey"></a></div><div><a href="#" id="white" class="white1"></a></div></div><div id="prodCompare"><input name="Compare" type="checkbox" value="Compare"><p> Compare</p></div></div>');
});

$(".white1").click(function(e){
e.preventDefault();
var content = $(this).html();
$('#prod1').html('<div id="prod" class="white"><div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div><div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div><div id="prodInfo"><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div><div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div><div id="prodOffering"><p>+ Free delivery</p></div><div id="prodColour"><div><a href="#" id="green" class="green1"></a></div><div><a href="#" id="mauve" class="mauve1"></a></div><div><a href="#" id="brown" class="brown1"></a></div><div><a href="#" id="grey" class="grey1></a></div><div class="select"><a href="#" id="white"></a></div></div><div id="prodCompare"><input name="Compare" type="checkbox" value="Compare"><p> Compare</p></div></div>');
});
});
</script> 
```

脚本的重点是根据您的颜色选择更改 DIV。因此，假设我有一系列汽车并希望客户选择一种颜色，我可以让我的脚本工作一次，但之后它就不再工作了。

任何想法都将不胜感激，因为我真的很挣扎：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:59:53.867

它没有比第一次更有效的原因是，尽管类发生了变化，但事件绑定没有，所以即使类更新为“.grey1”，jQuery 代码也不知道要查找它，因为调用 $(document).ready 时它不存在（当您的页面最初加载时）。在这种情况下，Livequery 将通过动态更新您的事件绑定来提供很大帮助。

改变

```
$(".grey1").click(function(e){
  // Stuff
}); 
```

到

```
$(".grey1").livequery(function() {
  $(this).click(function(e) {
    // Stuff
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:00:21.130

```
$(".green1, .white1, .mauve1 /*etc*/ ").on("click", function(e){
  e.preventDefault();
  var newClass = $(this).getClass().substring(0, $(this).getClass().length-1);
  $('#prod').addClass(newclass);
}); 
```

但是我可能会使用 data 属性或稍微重构我的类，所以我不依赖于对类名进行子字符串化来删除 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:01:05.463

不要更改您的 div，只需创建所有这些，然后根据需要隐藏和显示它们。

```
<div id="products">
    <div id="prod1" class="prod green">
        <div id="prodImg"><img src="images/prod_1_image.png" width="200" height="137" alt=""></div>
        <div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
            <div id="prodInfo"><p>This is Green</p><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
        <div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div>
        <div id="prodSaving"><p>Save over £150.00</p></div>
        <div id="prodOffering"><p>+ Free delivery</p></div>
    </div>
    <div id="prod2" class="prod mauve">
        <div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div>
        <div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
            <div id="prodInfo"><p>This is Mauve</p><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
        <div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div>
        <div id="prodOffering"><p>+ Free delivery</p></div>
    </div>
    <div id="prod3" class="prod brown">
        <div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div>
        <div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
            <div id="prodInfo"><p>This is Brown</p><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
        <div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div>
        <div id="prodOffering"><p>+ Free delivery</p></div>
    </div>
    <div id="prod4" class="prod grey">
        <div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div>
        <div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
            <div id="prodInfo"><p>This is Grey</p><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
        <div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div>
        <div id="prodOffering"><p>+ Free delivery</p></div>
    </div>
    <div id="prod5" class="prod white">
        <div id="prodImg"><img src="images/prod_2_image.png" width="200" height="137" alt=""></div>
        <div id="prodRating"><img src="images/prod_1_rating.png" width="200" height="14" alt=""></div>
            <div id="prodInfo"><p>This is White</p><p>Brand/range name praesent eg odio arcu praesent eg odio arcu praesent eg odio arcu.</p></div>
        <div id="prodPricing"><p>£99.99* <span class="was">was £229.99</span></p></div><div id="prodSaving"><p>Save over £150.00</p></div>
        <div id="prodOffering"><p>+ Free delivery</p></div>
    </div>            
</div>
<div id="prodColour">
   <div class="select">
      <div><a href="#" id="green">Show Green</a></div>
      <div><a href="#" id="mauve" class="mauve">Show Mauve</a></div>
      <div><a href="#" id="brown" class="brown">Show Brown</a></div>
      <div><a href="#" id="grey" class="grey">Show Grey</a></div>
      <div><a href="#" id="white" class="white">Show White</a></div>
   </div>
</div>

$(document).ready(function() {
    $("#prod1").show();
    $("#prodColour .select").on("click", "a", (function(e){
       e.preventDefault();
       $(".prod").hide();
       $(".prod." + $(this).attr("id")).show();
    }));
}); 
```

# kinect - 使用 Kinect 进行部分骨骼跟踪：下半身跟踪

> ID：15687708
> 
> 赞同：0
> 
> 时间：2013-03-28T16:53:21.103
> 
> 标签：kinect, openni, openkinect

我对跟踪人体的腿和脚位置感兴趣，上半身在视野之外。从 1.5 版开始，Microsoft 的 Kinect SDK 提供了“[坐姿](http://msdn.microsoft.com/en-us/library/microsoft.kinect.skeletontrackingmode.aspx)”骨骼追踪模式，下半身关节被忽略。显然，相反的特殊模式（跟踪下躯干）似乎不可用。然而，有这个[FrameEdges 枚举](http://msdn.microsoft.com/en-us/library/microsoft.kinect.frameedges.aspx)似乎可以用来“找出用户的身体有多少是可见的 [...]”。那么这是否意味着 SDK 支持在用户上半身不在视野范围内并使用默认跟踪模式的情况下跟踪下半身关节？有没有人有这个任务的经验并有任何提示？

显然 OpenNI 提供了部分骨架跟踪，但我无法找到更多细节。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:04:58.807

您可以从[NiSimpleSkeleton](https://github.com/OpenNI/OpenNI/blob/master/Samples/NiSimpleSkeleton/NiSimpleSkeleton.cpp)示例开始。

如果应该是更换的问题

`XN_SKEL_PROFILE_ALL`

与

`XN_SKEL_PROFILE_LOWER`

在[样本中](https://github.com/OpenNI/OpenNI/blob/master/Samples/NiSimpleSkeleton/NiSimpleSkeleton.cpp#L198)。

# mysql - 以编程方式更新 Woocommerce 订单

> ID：15687709
> 
> 赞同：2
> 
> 时间：2013-03-28T16:53:22.340
> 
> 标签：mysql, wordpress, woocommerce

我有一个在 Wordpress 上运行 Woocommerce 的电子商务网站，运行它的公司已将那里的运输系统更改为一家外部公司，该公司将产品存储在他们的仓库中，并在购买产品时发货。

在自动化方面，下载新订单的信息并将其发送给运输公司很好，但是当他们用发送的订单的 XML 和相关的跟踪号回复我时，我需要能够有一个系统自动更新订单（包括发送必要的电子邮件）。但是，我目前知道如何做到这一点的唯一方法是更新 MySQL 数据库。但是使用这种方法，自动电子邮件系统会被覆盖和忽略。

有谁知道我如何以编程方式更新订单状态和其他信息，这将允许 Woocommerce 的内部功能以与手动登录管理端和更新订单相同的方式执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T10:51:41.100

找到解决方案了吗？

下面的代码用于将订单标记为完成，但不会执行您在管理员中描述的其他操作

```
// create a new checkout instance and order id
$checkout = new WC_Checkout();
$this_order_id = $checkout->create_order();

$order = new WC_Order($this_order_id);
$order->update_status('completed'); 
```

# c++ - 在 C++ `multimap` 中，如何有效地获得没有重复项的`mapped_type` 元素的集合？

> ID：15687712
> 
> 赞同：2
> 
> 时间：2013-03-28T16:53:30.147
> 
> 标签：c++, list, iterator, unique, multimap

我有一个`std::multimap< int, std::string >`这样的：

```
1 A
1 B
1 C
1 B
1 C
1 C 
```

我想得到一个`mapped_type`没有重复的元素集合，像这样：

```
1 A
1 B
1 C 
```

我的解决方案是这样的：

```
#include <map>
#include <list>
#include <string>
#include <algorithm>

int main(int argc, char* argv[])
{
   std::multimap< int, std::string > mm;
   mm.insert( std::make_pair(1,"A") );
   mm.insert( std::make_pair(1,"B") );
   mm.insert( std::make_pair(1,"C") );
   mm.insert( std::make_pair(1,"B") );
   mm.insert( std::make_pair(1,"C") );
   mm.insert( std::make_pair(1,"C") );

   auto range( mm.equal_range(1) );

   std::list< std::string > ss;
   std::transform(range.first, range.second, 
                  std::back_inserter(ss), 
                  [](const std::pair<int,std::string>& p) {
                      return p.second;
                  });
   ss.sort();
   ss.unique();
   return 0;
} 
```

有没有更有效的方式来获取收藏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:58:31.670

您可以使用 a `std::set`，它只允许唯一值，而不是 a `std::list`：

```
std::set<std::string> ss;
std::transform(range.first, range.second, 
               std::inserter(ss, ss.begin()), 
               [](const std::pair<int,std::string>& p) {
                   return p.second;
               }); 
```

现在您不必使用`sort`or `unique`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:10:18.090

从算法上讲，这已经是最有效的方式了。像 sort 和 unique 这样的批量操作几乎总是以常数因素胜过像 set-inserts 这样的在线操作。

也就是说，当性能是关键时，通常建议远离基于节点的容器，如 list、map 和 set。您可以切换到`std::vector`,`std::sort`和`std::unique`，但在您的示例中，这可能不会更快，因为在字符串周围移动实际上可能比重新排列列表节点慢。如果您有移动支持并且没有激活小字符串优化，那么可能值得一试。

# php - 使用 PHP 替换 HTML 中的 URL

> ID：15687713
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:53:32.350
> 
> 标签：php, html, url

使用 PHP 我想删除`<iframe>`包含字符串的整个元素`abc.com`

如果我要在以下内容中搜索 abc.com：

```
‹iframe src="http://abc.com/abcd.html"›‹/iframe›

‹iframe src="http://abc.com/lmno.html"›‹/iframe›

‹iframe src="http://xyz.com/wxyz.html"›‹/iframe› 
```

我希望在删除前两个元素后留下以下文本：

```
‹iframe src="http://xyz.com/wxyz.html"›‹/iframe› 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:09:50.073

你可以试试`preg_replace()`：

```
$text = preg_replace('#<iframe src=".*?abc\.com.*?"></iframe>#','',$text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:01:51.053

将所有 URL 存储在字符串数组中，然后遍历它们并应用以下测试。

```
<?php

    foreach($array_of_urls as $url) {
        if( strpos( $url, 'abc.com' ) !== false ) {
            $url = "";
        }
    }

?> 
```

# maven - 不在 Commons Logging 中显示 DateTime 戳——Maven

> ID：15687716
> 
> 赞同：0
> 
> 时间：2013-03-28T16:53:35.800
> 
> 标签：maven, logging

当我使用 Maven 从命令行构建和运行一个小程序时，我想简明地查看日志记录的输出，但目前我看到的是日志源的时间戳和 Java 类位置。我可以隐藏吗？

它一定是某个地方的设置，但我没有找到它。

输出如下所示：

```
Mar 28, 2013 9:40:57 AM com.xxcompany.app.myClient getStarted
INFO: Startup, ..  My Info here
Mar 28, 2013 9:40:58 AM com.xxcompany.app.myClient getStarted
INFO: More Info here, but I don't want a timestamp 
```

我不想看到日志信息：

```
Mar 28, 2013 9:40:57 AM com.xxcompany.app.myClient getStarted 
```

Java 代码：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

....
logger.info("More Info here, but I don't want a timestamp"); 
```

在 Maven POM 中：

```
<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency> 
```

以及对 Maven 的调用：

```
mvn compile exec:java -Dexec.mainClass="com.xxcompany.app.App" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:04:28.043

对于 maven [http://jira.codehaus.org/browse/MNG-519](http://jira.codehaus.org/browse/MNG-519)来说，这仍然是一个悬而未决的问题， 那里提供了几个解决方法（在 maven 自己的 jar 中自定义文件的外科手术和通过脚本管道的顺势疗法） .

# ios - cocos2d-x如何使用CCFadeOUT

> ID：15687717
> 
> 赞同：1
> 
> 时间：2013-03-28T16:53:46.357
> 
> 标签：ios, cocos2d-x, fadeout

我只是想知道如何使用这个简单的类，我检查了参考资料并在谷歌上搜索了没有运气的示例。请帮帮我，这让我发疯。

这是我尝试使用的代码：

```
CCFadeOut *fade = CCFadeOut::create(10);
fade->startWithTarget(someLabelWithText); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:35:08.727

```
CCFadeOut *fade = CCFadeOut::create(10.f);
someLabelWithText->runAction(fade);// 
```

# android - 当它点击它会直接在另一个xml文件中并显示数据时如何做listview？

> ID：15687718
> 
> 赞同：0
> 
> 时间：2013-03-28T16:53:50.903
> 
> 标签：android

公共类 AndroidListViewCursorAdaptorActivity 扩展 Activity {

```
private BisdakDbAdapter dbHelper;
private SimpleCursorAdapter dataAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

    dbHelper = new BisdakDbAdapter(this);
    dbHelper.open();

    //Clean all data
    dbHelper.deleteAllData();
    //Add some data
    dbHelper.insertData();

    //Generate ListView from SQLite Database
    displayListView();
        }

private void displayListView() {

    Cursor cursor = dbHelper.fetchAllData();

    // The desired columns to be bound
    String[] columns = new String[] {
            BisdakDbAdapter.ENGLISH,
            BisdakDbAdapter.TAGALOG,
            BisdakDbAdapter.BISAYA,
            BisdakDbAdapter.DESCRIPTION
    };

    // the XML defined views which the data will be bound to
    int[] to = new int[] { 
            R.id.english,
            //R.id.tagalog,
            //R.id.bisaya,
            //R.id.description,
    };

    // create the adapter using the cursor pointing to the desired data 
    //as well as the layout information

    dataAdapter = new SimpleCursorAdapter(this, R.layout.translator_info, cursor, columns, to);

    ListView listView = (ListView) findViewById(R.id.listView1);
    // Assign adapter to ListView
    listView.setAdapter(dataAdapter);

**this portion is the onclick listener Items .......**  
    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        *public void onItemClick(AdapterView<?> listView, View view, 
                int position, long id) {
            // Get the cursor, positioned to the corresponding row in the result set
            Cursor cursor = (Cursor) listView.getItemAtPosition(position); 
```

数据将显示在 searchWord 类中，如下所示

```
 **Toast.makeText(getApplicationContext(), 
                        "English: " + cursor.getString(1) + "\n" +
                        "Tagalog: " + cursor.getString(2) + "\n" + 
                        "Bisaya: " + cursor.getString(3) + "\n" + 
                        "Parts of Speech: " + cursor.getString(4),
                                                Toast.LENGTH_SHORT).show();

              Intent intent = new Intent(AndroidListViewCursorAdaptorActivity.this, searchWord.class);
              startActivity(intent);***                  

        }
    }); 
```

**我的 searchWord 类。这是下一个活动。。**

公共类 searchWord 扩展 Activity {

```
 private BisdakDbAdapter dbHelper;
    TextView textView1, textView2, textView3, textView4;
    ListView listView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.translator_info); 

    dbHelper = new BisdakDbAdapter(this);
    dbHelper.open();

}

    public void onItemClick(AdapterView<?> listView, View view, 
            int position, long id) {
    Cursor cursor = (Cursor) listView.getItemAtPosition(position);
    textView1 = (TextView) findViewById(R.id.english);
    textView1.setText(cursor.getString(1));
    textView2 = (TextView) findViewById(R.id.tagalog);
    textView2.setText(cursor.getString(2));
    textView3 = (TextView) findViewById(R.id.bisaya);
    textView3.setText(cursor.getString(3));
    textView4 = (TextView) findViewById(R.id.description);
    textView4.setText(cursor.getString(4)); 

    }; 
```

}

**数据库适配器**

公共类 BisdakDbAdapter {

```
public static final String ROWID = "_id";
public static final String ALPHABET = "alphabet";
public static final String ENGLISH = "english";
public static final String DESCRIPTION = "description";
public static final String TAGALOG = "tagalog";
public static final String BISAYA = "bisaya";

private static final String TAG = "BisdakDbAdapter";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

private static final String DATABASE_NAME = "BisdakDb";
private static final String SQLITE_TABLE = "Words";
private static final int DATABASE_VERSION = 1;

private final Context mCtx;

private static final String DATABASE_CREATE =
        "CREATE TABLE if not exists " + SQLITE_TABLE + " (" +
                ROWID + " integer PRIMARY KEY autoincrement," +
                ENGLISH + "," +
                TAGALOG + "," +
                BISAYA + "," +
                DESCRIPTION + ","+ 
                ALPHABET + ","+
                " UNIQUE (" + ENGLISH +"));";

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.w(TAG, DATABASE_CREATE);
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + SQLITE_TABLE);
        onCreate(db);
    }
}

public BisdakDbAdapter(Context ctx) {
    this.mCtx = ctx;
}

public BisdakDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    if (mDbHelper != null) {
        mDbHelper.close();
    }
}

public long createData(String alphabet, String english, 
        String description, String tagalog, String bisaya) {

    ContentValues initialValues = new ContentValues();
    initialValues.put(ALPHABET, alphabet);
    initialValues.put(ENGLISH, english);
    initialValues.put(DESCRIPTION, description);
    initialValues.put(TAGALOG, tagalog);
    initialValues.put(BISAYA, bisaya);

    return mDb.insert(SQLITE_TABLE, null, initialValues);
}

public boolean deleteAllData() {

    int doneDelete = 0;
    doneDelete = mDb.delete(SQLITE_TABLE, null , null);
    Log.w(TAG, Integer.toString(doneDelete));
    return doneDelete > 0;

}

public Cursor fetchDataByName(String inputText) throws SQLException {
    Log.w(TAG, inputText);
    Cursor mCursor = null;
    if (inputText == null  ||  inputText.length () == 0)  {
        mCursor = mDb.query(SQLITE_TABLE, new String[] {ROWID,
                ENGLISH, TAGALOG, BISAYA, DESCRIPTION}, 
                null, null, null, null, null);

    }
    else {
        mCursor = mDb.query(true, SQLITE_TABLE, new String[] {ROWID,
                ENGLISH, TAGALOG, BISAYA, DESCRIPTION}, 
                ENGLISH + " like '%" + inputText + "%'", null,
                null, null, null, null);
    }
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public Cursor fetchAllData() {

    Cursor mCursor = mDb.query(SQLITE_TABLE, new String[] {ROWID,
            ENGLISH, TAGALOG, BISAYA, DESCRIPTION}, 
            null, null, null, null, null);

    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

public void insertData() {

    createData("a","abaca","noun","abaka","abaka");
    createData("a","abandon","verb","pabayaan","biyaan");
    createData("a","abbreviate","verb","paikliin","pagmubo");
    createData("a","abdomen","noun","tiyan","tiyan");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:08:44.450

```
Intent intent = new Intent(AndroidListViewCursorAdaptorActivity.this, searchWord.class);
intent.putExtra("English", cursor.getString(1));
intent.putExtra("Tagalog", cursor.getString(2));
intent.putExtra("Bisaya", cursor.getString(3));
intent.putExtra("Parts of Speech", cursor.getString(4));
              startActivity(intent) ; 
```

然后上

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.translator_info);

Intent i = getIntent(); 
textView1 = (TextView) findViewById(R.id.english);
textView1.setText(i.getStringExtra("English"));
textView2 = (TextView) findViewById(R.id.tagalog);
textView2.setText(i.getStringExtra("Tagalog"));
textView3 = (TextView) findViewById(R.id.bisaya);
textView3.setText(i.getStringExtra("Bisaya"));
textView4 = (TextView) findViewById(R.id.description);
textView4.setText(i.getStringExtra("Parts of Speech")); 

dbHelper = new BisdakDbAdapter(this);
dbHelper.open();

} 
```

# ios - 为 iPhone 创建一个自定义弹出框——我要继承什么类？

> ID：15687720
> 
> 赞同：3
> 
> 时间：2013-03-28T16:54:02.593
> 
> 标签：ios, objective-c, uiview, ios6, uipopovercontroller

我在这里看到了这个问题（[如何在 iPhone 应用程序中创建弹出框？](https://stackoverflow.com/questions/11547969/how-to-create-popover-in-iphone-app)），并想设计一个可以创建弹出框对象的类，我发现所有弹出框库现在都没有做我想做的事.

所以我想我会创建自己的，但我对它有点陌生。我直接继承 UIView 吗？谁能为我指出这项任务的正确方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:18:17.370

子类`UIView`。实现`layerClass`自定义 UIView 子类的类方法并返回`[CAShapeLayer class]`（来自 QuartzCore 框架），或者使用自己的子类`CAShapeLayer`代替 CAShapeLayer 本身。在您的 UIView 子类的实现中，`initWithFrame:`您可以设置视图层的路径以获取您想要显示的弹出框形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T08:39:56.293

通过子类化创建弹出框是实现目标的方法之一，即使它是做谷歌的简单问题，因为 StackOverflow 上可能有类似的解决方案。

看看这个答案[这将帮助您继续。](https://stackoverflow.com/a/11827712/742815)

# delphi - 如何在不知道类型参数的情况下声明泛型类型的变量？

> ID：15687723
> 
> 赞同：1
> 
> 时间：2013-03-28T16:54:13.167
> 
> 标签：delphi, generics, type-erasure

如何定义泛型`TList`类型，以便我可以声明该类型的变量，然后为其分配任何特化`TList<>`？

我想声明这个变量：

```
var
  MyList:THowToDeclareThisListType<T>; 
```

然后像这样实例化它：

```
MyList:=THowToDeclareThisListType<integer>.Create; 
```

或者

```
MyList:=THowToDeclareThisListType<double>.Create; 
```

等等我必须在这里遗漏一些非常明显的东西。我不想要类，只是一个简单的类型定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:01:05.743

您正在尝试声明这样的变量：

```
var
  List: TList<?>; 
```

这样`List`可以分配类型为`TList<Integer>`or`TList<Double>`或的对象`TList<string>`。

这是不可能的。当您使用泛型类型定义变量时，该类型必须完全实例化。

拥有一个包含任何类型对象的变量的唯一方法`TList<T>`是，如果该变量被声明为具有`TList<T>`. 并且公共基类不能是非实例化的泛型。对于`TList<T>`唯一可能的公共基类是`TObject`.

所以你可以写

```
var
  List: TObject; 
```

然后将您的任何对象分配给`List`. 但我不确定这会非常有用！

# java - 继承：具有相同绑定的不兼容泛型类型

> ID：15687724
> 
> 赞同：0
> 
> 时间：2013-03-28T16:54:13.227
> 
> 标签：java, generics, inheritance

所以，我有 this `public interface NodeLevel<E extends NodeLevelEnum>`，它有方法`public E getParent()`和`public E getEnum()`. 一个实现`abstract public class NodeLevelAbstract<E extends NodeLevelEnum> implements NodeLevel<E>`委托到实现的类的`A`实例`public interface NodeLevelEnum<E extends NodeLevelEnum>`。最后一个声明应该意味着实现类的实例`NodeLevelEnum`可以对实现类的实例做一些事情`NodeLevelEnum`。

现在，这是`NodeLevelAbstract#getParent()`：

```
@Override
public E getParent() {
    return this.getEnum().getParent();
} 
```

导致编译器错误（我使用 NetBeans 7.2，顺便说一句）：

```
incompatible types
required: E
found:    NodeLevelEnum
where E is a type-variable:
E extends NodeLevelEnum declared in class NodeLevelAbstract 
```

对我来说，这意味着 的后代`NodeLevelEnum`是必需的，但`NodeLevelEnum`被发现了，鉴于 Java 泛型中的边界包括自身，这听起来像是胡说八道。

为什么这些类型不兼容？有什么优雅的方式来做我想做的事吗？提前致谢。=)

**更新 1**

顺便说一句，`NodeLevelEnum#getParent()`返回`<E extends NodeLevelEnum>`，而不是`NodeLevelEnum`，错误说它确实如此。

**更新 2**

```
abstract public class NodeLevelAbstract<E extends NodeLevelEnum> implements
        NodeLevel<E> {

    protected E _enum;

    @Override
    public E getEnum() {
        return this._enum;
    }

    @Override
    public E getParent() {
        return this.getEnum().getParent();
    }

    public static <E extends NodeLevelEnum<E>> E[] getEnumLineage(E _enum) {
        ArrayList<E> ancestors = new ArrayList<>();
        E currentEnum = _enum;
        do {
            ancestors.add(currentEnum);
            currentEnum = currentEnum.getParent();
        } while (currentEnum != null);
        return (E[]) ancestors.toArray();
    }

    public static <E extends NodeLevelEnum<E>> HashMap<String, String>
        getEnumLineageValueMap(
            E _enum) {
        HashMap<String, String> map = new HashMap<>();
        for (E e : getEnumLineage(_enum)) {
            map.put(e.getCode(), e.getValue());
        }
        return map;
    }
}

public interface NodeLevel<E extends NodeLevelEnum> {

    public E getEnum();

    public E getParent();
}

public interface NodeLevelEnum<E extends NodeLevelEnum> {

    public E getParent();
}

public interface FilestructureLevel<E extends NodeLevelEnum<E>> extends
        NodeLevel<E> {

    public String getPathPrefix();
}

public class FileLevel<E extends NodeLevelEnum<E>> extends NodeLevelAbstract<E>
        implements FilestructureLevel<E> {

    protected String _pathPrefix;

    @Override
    public String getPathPrefix() {
        return this._pathPrefix;
    }

    public HashMap<String, String> getValueMap(Boolean withPath) {
        return getEnumLineageValueMap(this.getEnum(), withPath);
    }

    public static <E extends NodeLevelEnum<E>> HashMap<String, String>
        getEnumLineageValueMap(
            E _enum) {
        return getEnumLineageValueMap(_enum, false);
    }

    public static <E extends NodeLevelEnum<E>> HashMap<String, String>
        getEnumLineageValueMap(
            E _enum, Boolean withPath) {
        HashMap<String, String> map = new HashMap<>();
        FileLevelEnum[] lineage = (FileLevelEnum[]) getEnumLineage(_enum);
        for (FileLevelEnum e : lineage) {
            String value = !withPath ? e.getValue() : e.getPathPrefix()
                + e.getValue();
            map.put(e.getCode(), value);
        }
        return map;
    }
} 
```

# calayer - 在 View 的标准背景颜色之上使用透明图像

> ID：15687726
> 
> 赞同：0
> 
> 时间：2013-03-28T16:54:22.910
> 
> 标签：calayer, nsview, nsoutlineview

我有一个使用`setBackroundColor:`方法设置自定义背景颜色的 NSOutlineView。之后，我不想在该背景颜色之上绘制透明图像。我尝试使用图层，但它不起作用。有谁知道该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:06:48.083

这样的事情应该适用于你的情况，

只需从我的应用程序中粘贴相关代码

我想说的是，

你需要制作一个自定义的 NSOutliveView 并覆盖它的 drawRect，

如果它不适用于您的情况，请使用自定义 NSView 并绘制透明的 NSOutlineView

```
- (void)drawRect:(NSRect)rect
{
     switch (_backgroundStyle) {
     case ImageColorBackgroundStyle:
     {  
         [self drawColor];
         [self drawCustomImage:rect];
         break;
     }
     case ColorBackgroundStyle:
     [self drawColor];
     break;
     case PatternBackgroundStyle:
     [self drawPattern];
     break;
     case ImageBackgroundStyle:
     [self drawImage];
     break;
     case GradientBackgroundStyle:
     [self drawGradient];
     break;
     case NoBackgroundStyle:
             if([self hasBorder])
                 [self drawBorder:rect];
             return;
             [[NSColor clearColor] set];
             NSRectFill(rect);
             break;
     default:
     [super drawRect:rect];
     break;
     }  
    if([self hasBorder])
        [self drawBorder:rect];

}

-(void)drawCustomImage:(NSRect)rect{
    NSRect boundsRect = [self bounds];

    NSRect imageRect;
    NSSize imageSize = [pBGroundImage size];
    int x=0;int y=0;
    switch (bgImagePosition) {
        case img_bg_lowerright:
            if(bViewClipped) return;
            x = boundsRect.size.width - imageSize.width;
                x -= (BORDER_WIDTH*2);

            break;
        default:
            if(!bViewClipped)
                return [self drawImage];
            break;
    }

    if(!bViewClipped)
    imageRect = NSMakeRect(x,y,imageSize.width,imageSize.height);
    else {
        imageRect = NSMakeRect(x,y,rect.size.width,rect.size.height);
    }

    if(imageRect.origin.x < 0 ) imageRect.origin.x = 0;

    if(!bViewClipped){
        [pBGroundImage drawInRect:imageRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    }
    else {
        CGFloat x_Res = 0.0f;
        CGFloat y_Res = 0.0f;

        x_Res = orignalSize.width/imageSize.width;
        y_Res = orignalSize.height/imageSize.height;

        CGFloat scaledHeight = orignalSize.height - rect.size.height;
        CGFloat orignal_y = scaledHeight/y_Res;
        CGFloat orignal_width = imageSize.height - orignal_y;
        NSRect srcRect;

        /* This is wrt Orignal Image */
        srcRect.origin.x = 0; 
        srcRect.origin.y = orignal_y;
        srcRect.size.width = imageSize.width;
        srcRect.size.height = orignal_width;

        [pBGroundImage drawInRect:rect 
                         fromRect:srcRect  
                         operation:NSCompositeSourceOver fraction:1.0];

    }
}

- (void)drawImage
{
    // Load the image.
    //NSString *imageName = [self GetBackGroundImage];

    //NSImage *anImage = [[NSImage alloc ]initByReferencingFile:imageName];

    // Find the point at which to draw it.
    NSPoint backgroundCenter;
    backgroundCenter.x = [self bounds].size.width / 2;
    backgroundCenter.y = [self bounds].size.height / 2;

    NSPoint drawPoint = backgroundCenter;
    drawPoint.x -= [pBGroundImage size].width / 2;
    drawPoint.y -= [pBGroundImage size].height / 2;

    [pBGroundImage drawInRect:[self bounds] fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
    //[anImage release];
} 
```

# php - 在哪里阅读访客信息

> ID：15687728
> 
> 赞同：1
> 
> 时间：2013-03-28T16:54:42.243
> 
> 标签：php, count

**更新**：

这个问题暴露了过时，最糟糕的方法，`visitors count`每个人都应该避免它。使用复杂的计数器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:56:39.757

您通常可以通过`$_SERVER['REMOTE_ADDR']`变量获取 IP 地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-09T16:12:07.137

由于我没有找到令人满意的“足够简单”的解决方案，所以我想出了自己的解决方案。创建一个名为的空文件`ip.txt`并在代码中的某处使用它：

```
$ip_all = file("ip.txt");
$ip_cur = $_SERVER['REMOTE_ADDR']."\n";
if (!in_array($ip_cur, $ip_all)) {
    $ip_all[] = $ip_cur;
    file_put_contents("ip.txt", implode($ip_all));
}

echo "visitors: " . count($ip_all); 
```

请注意，随着时间的推移，此文件可能会变得有些大，具体取决于您获得的访问者数量，因为条目不会过期并且会像 cookie 一样被删除。但正如已经提到的，我希望它尽可能简单并且不在乎。此外，我不想依赖 cookie，因为我怀疑网络爬虫和其他机器人会将它们送回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T01:05:48.830

简单的：

```
<?php
$cookie_name = 'counter';
$file = 'count.txt';

if (!isset($_COOKIE[$cookie_name])) {
    $count = strval(file_get_contents($file));
    file_put_contents($file, $count + 1);
    setcookie($cookie_name, "Checked", time() + 111400);
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-20T10:05:33.803

嗨，这是我用来注册访客 ip 的。

```
function get_IP() {

    // ADRES IP
    if     (getenv('HTTP_CLIENT_IP'))       $ipaddress = getenv('HTTP_CLIENT_IP');
    else if(getenv('HTTP_X_FORWARDED_FOR')) $ipaddress = getenv('HTTP_X_FORWARDED_FOR');
    else if(getenv('HTTP_X_FORWARDED'))     $ipaddress = getenv('HTTP_X_FORWARDED');
    else if(getenv('HTTP_FORWARDED_FOR'))   $ipaddress = getenv('HTTP_FORWARDED_FOR');
    else if(getenv('HTTP_FORWARDED'))       $ipaddress = getenv('HTTP_FORWARDED');
    else if(getenv('REMOTE_ADDR'))          $ipaddress = getenv('REMOTE_ADDR');
    else                                    $ipaddress = 'UNKNOWN';
    //
    return $ipaddress;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T17:11:27.553

您可以通过使用 w+ 打开文件来节省一些代码，它会自动为您创建它。

```
<?php
// Inits
$file = "/tmp/counts.html";
$cookie_namee='mycounterr-456';

// File, created if !exists
$fh = fopen($file, 'w+');
// Get the count, 0 if the file is empty or just created
$count = (int)fgets($fh);

//if cookie isn't already set,then increase counts 
//by one + save ip, and set a cookie to pc...
if (!isset($_COOKIE[$cookie_namee])) {
    // Increment and write the new count
    fwrite($fh, ++$count);
    setcookie($cookie_namee, "Checked", time() + 111400);
}

fclose($fh); 
```

如果您想要一种通过 IP 或其他方式强制执行计数的非常简单的方法，您必须查看[Redis](http://redis.io/)。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-06-28T09:52:13.213

如果您希望它在您的页面上显示访问者，请将其放在您的代码下。

```
<?php

include ("counts.html")

?> 
```

# git - 允许访问回购的某些部分？

> ID：15687730
> 
> 赞同：2
> 
> 时间：2013-03-28T16:54:48.477
> 
> 标签：git, github

我目前正在为我的网页设计团队使用 github 来存储我们的项目。我们有一个微型帐户，很快就需要升级。我觉得我们应该继续添加更多的 repo 是很愚蠢的，尽管当我们完成一个项目时，我们可能不会再使用 repo 了。也许在这里和那里修复一两个错误。

我想知道是否可以为我的团队创建 1 个主存储库，然后我可以将其拆分为子文件夹并根据谁在该项目上工作来授予对文件夹的访问权限。

如果我不能这样做，那么在某处设置我自己的 git 服务器有多困难？此外，为经验不足的团队成员设置一些 GUI 有多难？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:10:42.230

> 我想知道是否可以为我的团队创建 1 个主存储库，然后我可以将其拆分为子文件夹并根据谁在该项目上工作来授予对文件夹的访问权限。

不，这不是 Git 的工作方式。它专门设计为不以这种方式工作。无论您认为这是多么“愚蠢”，每个 repo 一个项目都是可行的。“理智的内容界限”是你应该遵守的词。

为 Git 存储库创建自己的服务器非常容易。如果这是您唯一担心的问题，请在您的网络上安装一个 Linux 机器并开始为人们提供 SSH 访问权限。还有像[Gitorious](http://gitorious.org/)这样的第三方 GitHub 服务，您可以将其安装在同一个盒子上以提供基于 Web 的前端。

GUI 的存在/缺失与您的存储库的托管方式**无关。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:00:11.973

我不相信您只能提供对回购的一部分的访问权限。

如果您对 git 和 Linux 有一定的了解，那么设置自己的 git 服务器并不难。如果您搜索它们，则有很多教程。或者，看看[Redmine](http://www.redmine.org)或[Gitlab 之](https://gitlab.com)类的东西，它们都可以免费使用并提供 Web 界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:02:53.390

您不能将多个项目保存在同一个存储库下。您可以使用子模块，但它们仍然需要尽可能多的 git 存储库。恐怕没有解决方法（除非您将所有项目都塞在一个存储库中并告诉人们要小心，但这并不明智）。

设置 git 服务器*非常*容易。由于存储库的每个副本都是自给自足的，因此拥有该存储库副本的每台计算机实际上几乎是一个 git 服务器。但是，您需要注意两件事：

*   `ssh`在服务器上设置。网上应该有很多关于这个的材料。
*   在服务器上制作`bare`您的存储库的副本。例如，请参阅[此问题](https://stackoverflow.com/q/2199897/912144)。

最后，您可以轻松地使您找到并喜欢的任何 git gui 与您的服务器一起使用。当您告诉软件您的存储库在哪里时，github 或个人服务器同样简单。它们都只是简单的 URL。

# iphone - “鬼矩形”影响程序？

> ID：15687735
> 
> 赞同：0
> 
> 时间：2013-03-28T16:55:14.067
> 
> 标签：iphone, ios, objective-c, frameworks

昨天有一个矩形卡在我的程序的上角，出于某种原因，无论我做什么，我都无法将它从那里取出。今天我重新运行程序，它消失了，但我相信它的内存仍然卡住了，因为它影响了我的代码。

我试图检测矩形 A（由加速度计移动）何时接触矩形 B（随机放置；静止）。当 A 接触 B 时没有任何反应，但是当我将 A 移动到昨天所有鬼矩形的顶角时，它会连续运行我的 if 语句，直到我将它移开。

这是代码以防万一

```
@synthesize Button;
@synthesize Rand;
//Awaking the accelerometer
-(void) awakeaccelerometer
{
    [[UIAccelerometer sharedAccelerometer]setUpdateInterval:1.0/50.0];//<---Sensitivity
    [[UIAccelerometer sharedAccelerometer]setDelegate:self];

    NSLog(@"Accelerometer is awake");

    float randX = arc4random() % 320;
    float randY = arc4random() % 548;

    CGPoint randNewPlace = CGPointMake(randX, randY);
    Rand.center = randNewPlace;

}

//Controlling the accelerometer
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
#define MovingObjectRadius 4

    //Acceleration for player
    valueX = acceleration.x * 10; //speeds
    valueY = acceleration.y * -10; //speeds

    //Create new integers
    int newX = (int)(Button.center.x + valueX);
    int newY = (int)(Button.center.y + valueY);

    //Position Validate...This stops the movements from going past the screen; 320 pixels
    //For X
    if (newX > (320 - MovingObjectRadius))
    {
        newX = (320 - MovingObjectRadius);
    }

    if (newX < (0 + MovingObjectRadius))
    {
        newX = (0 + MovingObjectRadius);
    }

    //For Y
    if (newY > (548 - MovingObjectRadius))
    {
        newY = (548 - MovingObjectRadius);
    }

    if (newY < (0 + MovingObjectRadius))
    {
        newY = (0 + MovingObjectRadius);
    }

    //Make the new point
    CGPoint buttonNewCenter = CGPointMake(newX,newY);
    Button.center = buttonNewCenter;

    CGRect blockRect = CGRectMake(newX, newY, 20, 20);
    CGRect targetRect = CGRectMake(randX, randY, 20, 20);

    if (CGRectIntersectsRect(blockRect, targetRect))
        {
            float tnewX = arc4random() % 320;
            float tnewY = arc4random() % 548;

            CGPoint randNewPl = CGPointMake(tnewX, tnewY);
            Rand.center = randNewPl;
        }
} 
```

# jquery - Mac Mail.app 搜索功能

> ID：15687742
> 
> 赞同：2
> 
> 时间：2013-03-28T16:55:49.177
> 
> 标签：jquery, macos, jquery-plugins

我想知道是否有任何 jQuery 插件或其他东西可以创建类似于 Mac 的 Mail 应用程序的搜索栏，您可以在其中搜索特定类别，非常棒

![Mac 邮件应用搜索](../Images/07da09bba3494ca2af391300ccb30e67.png)

提前致谢！

# php - 构建具有超过 100 个输入的 10 页 php 表单的最有效方法是什么？

> ID：15687747
> 
> 赞同：0
> 
> 时间：2013-03-28T16:56:01.120
> 
> 标签：php, javascript, mysql, ajax

我目前正在构建一个相当大的 php 表单，它将跨越 10 个页面，并且有超过 100 个输入。每个输入都将存储在数据库中。我只是想知道是否有更简单/更有效的方法来做到这一点。我什至没有完成第一页，而且我已经无法跟踪变量。我感谢任何提示或评论。谢谢！

我目前在做什么。想象一下这样做 x 10 -

表单示例

```
<form action="/db" method="post">

<div class="field-container">
    <label for="name" class="default-label">Company Name:</label>
    <input type="text" name="billing_company_name" id="name" size="50">
    <input type="hidden" name="username" value="<?php echo $current_user->user_login . "\n";?>">
</div>

<div class="field-container">
    <label for="name" class="default-label">Contact Person:</label>
    <input type="text" name="billing_contact_person" id="name" size="50">
</div>

<div class="field-container">
    <label for="name" class="default-label">Address:</label>
    <input type="text" name="billing_address" id="name" size="50">
</div>

<div class="field-container">
    <label for="name" class="default-label">City:</label>
    <input type="text" name="billing_city" id="name" size="50">
</div>

<div class="field-container">
    <label for="name" class="default-label">State:</label>
    <input type="text" name="billing_state" id="name" size="5">
</div>

<div class="field-container">
    <label for="name" class="default-label">ZIP:</label>
    <input type="text" name="billing_zip" id="name" size="8">
</div>

<div class="field-container">
    <label for="name" class="default-label">Phone:</label>
    <input type="text" name="billing_phone" id="name" size="50">
</div>

<div class="field-container">
    <label for="name" class="default-label">Email Address:</label>
    <input type="text" name="billing_email" id="name" size="50">
</div>

<input type="submit" value="Go To Step 2">
</form> 
```

保存数据

```
// Insert data into mysql
$sql="INSERT INTO Forms (Form_date, username, billing_company_name,  
billing_contact_person, billing_address, billing_city, billing_state, billing_zip,  
billing_phone, billing_email)

VALUES (NOW(),'$username', '$billing_company_name', '$billing_contact_person',   
'$billing_address', '$billing_city', '$billing_state', '$billing_zip', 
'$billing_phone', 
'$billing_email' )";
$result = mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:11:16.030

我是模板引擎的粉丝，当然你也可以用纯 PHP 来做。我建议你在一个表中插入所有需要的值，即 tb1 然后使用这个

X.php

```
 include '../../smarty/libs/Smarty.class.php';
  Class X extends Smarty {
  public function assignArray($query, $result_name='') {

  $data = mysql_query($query);

  $results = array();
   while ($row = mysql_fetch_assoc($data))
  $results[] = $row;

  if ($result_name != '') {
    $this->assign($result_name, $results);
    $this->assign($result_name.'_count', count($results));
  } else
  return $results;

}  
}

$x = new X();
$query = "SELECT name, size, label, flag, value, hidden
        FROM tb1 
        WHERE flag = 1";

    /*
    name                    |   size    |   label           |   flag    |   value   |   hidden      |
    -------------------------------------------------------------------------------------------------
    billing_company_name    |   50      |   Company Name    |   1       |   login   |   username    |
    billing_contact_person  |   50      |   Contact Person  |   0       |   NULL    |   NULL        |
    billing_state           |   5       |   State           |   0       |   NULL    |   NULL        |
    -------------------------------------------------------------------------------------------------
    */

$x->assignArray($query, 'result');

 //not neccessary to select flag, value, hidden

 $query1 = "SELECT name, size, label, flag, value, hidden 
        FROM tb1 
        WHERE flag = 0";
 $x->assignArray($query1, 'result1');
 $x->smarty->display('billings.tpl'); 
```

比林斯.tpl：

```
<form action="/db" method="post">

{section name=i loop=$result1}
<div class="field-container">
<label for="name" class="default-label">{$result1[i].label}</label>
<input type="text" name="{$result1[i].name}" id="name" size="{$result1[i].size}">
<input type="hidden" name="{$result1[i].hidden}" value="{$result1[i].value}">
</div>
{/section}

{section name=i loop=$result}
<div class="field-container">
<label for="name" class="default-label">{$result[i].label}</label>
<input type="text" name="{$result[i].name}" id="name" size="{$result[i].size}">
</div>
{/section}

<input type="submit" value="Go To Step 2">
</form> 
```

当然，如果无法从数据库中读取 value="" 字段，您仍然可以遍历您的 currentUser 方法以获得动态值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:13:27.843

您可以将表单值保存到数据库中的文本字段中，然后对 key=>values 数组进行 json_encode，这样您只有 1 个数据库数据列，并且它可以增长以容纳更多或更少的字段（json_decode 以获取数据）。然而，这样做你不能真正使用标准过滤器和来自 mysql 的排序技术直接在特定列上。您也可以两者都做，为您知道需要使用 mysql 搜索或排序的字段设置一个单独的列，并将其余部分放入 json_encoded 文本列。这可以简化数据库。至于代码和表单，通过设置配置数组并从中构建表单来执行建议（这将需要您编写脚本将配置数组转换为适当的 html/php 代码）或找到一个类他们已经可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:02:51.327

如果我在你的鞋子里，我会使用一个配置数组（我将在其中存储标签、字段名、输入类型、Db 列名......等等）。然后我将使用该数组来生成表单和插入查询。

（使用 Zend 或 Symfony 之类的框架执行此操作可能更简单，但我猜您不打算将框架仅用于表单）

# php - Wordpress PHP If else 更改不同页面上的 div

> ID：15687748
> 
> 赞同：0
> 
> 时间：2013-03-28T16:56:04.263
> 
> 标签：php, wordpress

我正在尝试编写一些 php，它将根据显示的页面更改 div 的内容。我是php的新手，所以我确定我写错了...

```
<?php if ( is_page('home') ) { ?>
    <div class="strapline">stuff 1</div>
<?php elseif ( is_page('about') ) { ?>
    <div class="strapline">stuff 2</div>
<?php elseif ( is_page('services') ) { ?>
    <div class="strapline">stuff 3</div>
<?php elseif ( is_page('blog') ) { ?>
    <div class="strapline">stuff 4</div>
<?php elseif ( is_page('portfolio') ) { ?>
    <div class="strapline">stuff 5</div>
<?php elseif ( is_page('contact') ) { ?>
    <div class="strapline">stuff 6</div>
<?php elseif ( is_page('privacy-policy') ) { ?>
    <div class="strapline">stuff 7</div>
<?php else ( is_page('terms-and-conditions') ) { ?>
    <div class="strapline">stuff 8</div>
<?php } ?> 
```

谁能帮我解决这个问题？也许它应该是一个循环？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:03:04.060

开关会更好：

（假设您有一个`get_actual_page()`返回实际页面名称的函数。

```
$page = get_actual_page();
switch ($page){
    case 'home':
        $content = 'stuff 1';
        break;
    case 'about':
        $content = 'stuff 2';
        break;
    // other cases...
}

echo '<div class="strapline">'.$content.'</div>'; 
```

通过这种方式，代码会更简洁、更易读、更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:06:14.220

将以下内容添加到您的 function.php

```
function content($content)
{
    if(is_page('home')){
      return '<div class="home">'.$content.'</div>';
    } else if(is_page('about')){
      return '<div class="about">'.$content.'</div>';
    }
      return $content;
}

add_filter('the_content','content') 
```

# java - 是否有现成的库和框架可以将 JavaScript 包含到 Java 小部件中？

> ID：15687749
> 
> 赞同：1
> 
> 时间：2013-03-28T16:56:05.230
> 
> 标签：java, javascript, frameworks, widget

是否有现成的库和框架可以将 JavaScript 包含到 Java 小部件中？

不仅仅是原始的 WebView 小部件，Java 的 UI 元素和 JavaScript 小部件和逻辑的交互高度集成的解决方案。

我需要使用 Java和[JavaScript](https://github.com/Nodeclipse/JavaScriptContainer)代码库[为 Node.js 创建 IDE 。](https://github.com/Nodeclipse)

# centos - 如何使用 Rsync 仅复制特定的子目录（多个目录中的名称相同）

> ID：15687755
> 
> 赞同：40
> 
> 时间：2013-03-28T16:56:20.010
> 
> 标签：centos, rsync, centos6

我在服务器 1 上有这样的目录结构：

*   数据
    *   公司1
        *   唯一文件夹1
        *   其他文件夹
        *   ...
    *   公司2
        *   唯一文件夹1
        *   ...
    *   ...

我想在服务器 2 上复制这个文件夹结构，但只复制 unique_folder1 的目录/子目录。即结果必须是：

*   数据
    *   公司1
        *   唯一文件夹1
    *   公司2
        *   唯一文件夹1
    *   ...

我知道这`rsync`对此非常有利。我尝试了“包含/排除”选项但没有成功。

例如我试过：

```
rsync -avzn --list-only --include '*/unique_folder1/**' --exclude '*' -e ssh user@server.com:/path/to/old/data/ /path/to/new/data/ 
```

但是，结果，我没有看到任何文件/目录：

```
receiving file list ... done
sent 43 bytes  received 21 bytes  42.67 bytes/sec
total size is 0  speedup is 0.00 (DRY RUN) 
```

怎么了？想法？

* * *

附加信息：我对两台服务器都有 sudo 访问权限。我有一个想法 - 是使用`find`命令并`cpio`一起将我需要的内容复制到新目录，然后使用`Rsync`. 但这很慢，有很多文件等。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-29T10:49:16.483

我找到了原因。至于我 - 不清楚`Rsync`以这种方式工作。
所以正确的命令（`company1`仅用于目录）必须是：

```
rsync -avzn --list-only --include 'company1/' --include 'company1/unique_folder1/***' --exclude '*' -e ssh user@server.com:/path/to/old/data/ /path/to/new/data 
```

即我们需要包含每个父`company`目录。当然我们不能`company`在命令行中手动编写所有这些目录，所以我们将列表保存到文件中并使用它。

* * *

## 最后我们需要做的事情：

1.在服务器1上生成包含文件，所以它的内容将是（我用过`ls`和`awk`）：

```
+ company1/  
+ company1/unique_folder1/***  
...  
+ companyN/  
+ companyN/unique_folder1/*** 
```

2.将include.txt复制到服务器2并使用这样的命令：

```
rsync -avzn                                        \
      --list-only                                  \
      --include-from '/path/to/new/include.txt'    \
      --exclude '*'                                \
      -e ssh user@server.com:/path/to/old/data/    \
      /path/to/new/data 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-11-06T21:50:28.457

如果第一个匹配模式排除了一个目录，那么它的所有后代将永远不会被遍历。当您想包含一个深层目录，例如`company*/unique_folder1/**`但排除所有其他目录时`*`，您需要告诉 rsync 也包含其所有祖先：

```
rsync -r -v --dry-run                       \
    --include='/'                           \
    --include='/company*/'                  \
    --include='/company*/unique_folder1/'   \
    --include='/company*/unique_folder1/**' \
    --exclude='*' 
```

您可以使用 bash 的大括号扩展来节省一些输入。大括号展开后，下面的命令和上一个命令完全一样：

```
rsync -r -v --dry-run --include=/{,'company*/'{,unique_folder1/{,'**'}}} --exclude='*' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-12-26T08:46:04.730

在许多情况下更容易理解和实施的[Andron 答案](https://stackoverflow.com/a/15701772/8096230)的替代方法是使用该`--files-from=FILE`选项。针对目前的问题，

```
rsync -arv --files-from='list.txt' old_path/data new_path/data 
```

`list.txt`简单的在哪里

```
company1/unique_folder1/
company2/unique_folder1/
... 
```

请注意，`-r`必须明确包含标志，因为`--files-from`会关闭`-a`标志的这种行为。在我看来，路径构造与其他 rsync 命令不同，因为*匹配*`company1/unique_folder1/`但`/data/company1/unique_folder1/`不匹配。

 ** * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-12T23:02:57.027

例如，如果您只想同步`target/classes/`到`target/lib/`远程系统，请执行

```
rsync -vaH --delete --delete-excluded --include='classes/***' --include='lib/***' \
      --exclude='*' target/ user@host:/deploy/path/ 
```

需要注意的重要事项：

*   不要忘记`/`路径末尾的“”，否则您将在子目录中获得副本。
*   `--include`,的顺序`--exclude`很重要。
*   与其他答案相反，以“ `/`”开头的不需要包含/排除参数，它们将自动附加到源目录（`target/`在示例中）。
*   为了测试究竟会发生什么，我们可以使用`--dry-run`标志，正如其他答案所说。
*   `--delete-excluded` *将删除目标目录中的所有内容，除了我们特别包含的子目录*。应该明智地使用它！因此，a`--delete`是不够的，它默认不删除远程端的排除文件（每隔一个，是的），它应该在普通的旁边`--delete`再次给出。*

# linux - 查看远程 linux 服务器上的 git 存储库 -> 在 Windows 中？

> ID：15687758
> 
> 赞同：0
> 
> 时间：2013-03-28T16:56:31.117
> 
> 标签：linux, windows, git, git-remote, gitk

问题：需要在 Windows 中直观地查看 Git 历史记录，存储库位于远程 Linux 服务器（Ubuntu）上。问题：在 Windows 中查看远程 linux 服务器上的 git 存储库的两种简单方法是什么？

我最初尝试镜像远程镜像，然后在本地查看它 - 需要时更新，但连接时出现错误，

```
git clone --mirror username@serveraddress.com:/home/username/projectfolder

fatal: Could not read from remote repository.
Please make sure you have the correct access rights and the repository exists. 
```

我再次在 Windows 上使用 Git Bash，试图克隆 Linux 上的远程存储库。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:45:45.840

回购所在的位置并不重要。

正如错误所说，1-确保您的地址正确

2-确保您可以访问该地址

# r - 转置数据框

> ID：15687765
> 
> 赞同：1
> 
> 时间：2013-03-28T16:56:59.160
> 
> 标签：r, plyr, reshape2

我有一个关于将数据框重新塑造（如果这是正确的话）到它的转置版本的问题。我想采取类似的东西：

```
A   B   C   
1   6   1
1   18  1
1   21  1
3   18  1
3   21  1
4   6   1
4   18  1
4   20  1
4   21  1 
```

并将其转换为如下数据框：

```
A   B_1 C_1 B_2 C_2 B_3 C_3 ...
1   6   1   18  1   21  1
3   18  1   21  1   
4   6   1   18  1   20  1   21  1 
```

R 中是否有一些我不知道的首选功能，或者我应该循环这个过程？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:30:54.123

```
DF <- read.table(text="A   B   C   
1   6   1
1   18  1
1   21  1
3   18  1
3   21  1
4   6   1
4   18  1
4   20  1
4   21  1",header=TRUE) 
```

首先创建一个索引变量：

```
library(plyr)
DF <- ddply(DF,.(A),transform,No=seq_along(A))
#   A  B C No
# 1 1  6 1  1
# 2 1 18 1  2
# 3 1 21 1  3
# 4 3 18 1  1
# 5 3 21 1  2
# 6 4  6 1  1
# 7 4 18 1  2
# 8 4 20 1  3
# 9 4 21 1  4 
```

现在融化 data.frame 并转换为宽格式：

```
library(reshape2)
DF <- melt(DF,id.vars=c("A","No"))
res <- dcast(DF,A~No+variable)
#   A 1_B 1_C 2_B 2_C 3_B 3_C 4_B 4_C
# 1 1   6   1  18   1  21   1  NA  NA
# 2 3  18   1  21   1  NA  NA  NA  NA
# 3 4   6   1  18   1  20   1  21   1 
```

公式中的顺序很重要：

```
res <- dcast(DF,A~variable+No)
#   A B_1 B_2 B_3 B_4 C_1 C_2 C_3 C_4
# 1 1   6  18  21  NA   1   1   1  NA
# 2 3  18  21  NA  NA   1   1  NA  NA
# 3 4   6  18  20  21   1   1   1   1 
```

# api - 如何访问 PowerShell 脚本的输出？

> ID：15687768
> 
> 赞同：6
> 
> 时间：2013-03-28T16:57:17.580
> 
> 标签：api, delphi, powershell, delphi-xe2

如何在 Delphi 中访问 PowerShell 脚本的输出？

我正在寻找类似于[System.Management.Automation.PowerShell](http://msdn.microsoft.com/en-us/library/dd144526%28v=vs.85%29.aspx)的东西，但在本机代码中。

更准确地说：我想处理`PSObject`PowerShell 调用返回的对象。

我想既然 PowerShell 是用 .NET 编写的，我必须在我的 Delphi 应用程序中托管 .NET 框架？

我在组件源上看到了一个名为[PowerShell Objects Delphi Edition](http://www.componentsource.com/products/powershell-objects-delphi-edition/index-eur.html)的库，但该演示不支持 XE2，而且我在制造商主页上找不到该库。

**澄清**：我不是在寻找运行 PowerShell 的方法，CreateProcess 可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:14:26.287

您可以围绕 System.Management.Automation.* 创建一个 C++/CLI 包装器，并公开一个 DLL 入口点，如`string ExecutePowerShellScript(string script)`. 那么您应该可以毫无问题地从 Delphi 调用该 DLL 入口点。

# tsung - 宋词中的“同时”是什么意思？

> ID：15687771
> 
> 赞同：0
> 
> 时间：2013-03-28T16:57:33.400
> 
> 标签：tsung

这是我的 tsung.xml：

```
<?xml version="1.0"?>

<!DOCTYPE tsung SYSTEM "/usr/local/share/tsung/tsung-1.0.dtd">
<tsung loglevel="warning" version="1.0">

  <clients>
    <client host="localhost" use_controller_vm="true" maxusers="30000"/>
  </clients>

  <servers>
      <server host="127.0.0.1" port="9988" type="tcp"/>
  </servers>
<!--
  <monitoring>
    <monitor host="localhost" type="erlang"></monitor>
  </monitoring>
-->
  <load duration="90" unit="second">
    <arrivalphase phase="1" duration="1" unit="minute">
      <users arrivalrate="300" unit="second" />
    </arrivalphase>
  </load>

  <options>
      <option name="thinktime" value="0" random="false" override="true"/>
      <option name="tcp_snd_buffer" value="4096"/>
      <option name="tcp_rcv_buffer" value="4096"/>
      <option name="ports_range" min="1025" max="65535"/>
  </options>

  <sessions>
    <session name="mysocket" probability="100" type="ts_raw">
      <request>
        <raw datasize="1" ack="local"></raw>
      </request>
    </session>
  </sessions>

</tsung> 
```

它测试了我的套接字程序，但我无法完全理解 Tsung 报告。

请帮忙看一下这张照片，“同时”是什么意思？

![同步图片](../Images/be47b6013f330aeed72fc19c6cd95248.png)

如果有人可以帮助告诉我有关报告统计信息的信息，那很好。

如下统计数据（取自 Tsung 的手册）：

```
users: Number of simultaneous users.
connected: Number of simultaneous connected users. new in 1.2.2. 
```

`users`如果和`connected`低，是好还是坏？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:49:03.090

如果一段时间内没有任何操作或过载，http 服务器将关闭 TCP 套接字。TCP Sockets 的打开和关闭由 Tsung 自动处理。也就是说，“已连接”值是连接到服务器的当前“用户”数量。希望这可以帮助

# xml - 为什么这个 XSLT 提取soap:Body 也有soap:Header 元素值

> ID：15687772
> 
> 赞同：1
> 
> 时间：2013-03-28T16:57:37.993
> 
> 标签：xml, xslt, soap

我有一个来自客户的以下肥皂信封

```
<soap:Envelope xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Header>
  <wsa:Action>http://company.com/services/InterfacePoint/CallResponse</wsa:Action>
  <wsa:MessageID>uuid:85fafb9d-9ec0-4017-a367-4f9043812310</wsa:MessageID>
  <wsa:To>http://schemas.xmlsoap.org/ws/2004/03/addressing/role/anonymous</wsa:To>
  <wsse:Security>
     <wsu:Timestamp wsu:Id="Timestamp-dc059677-19f6-4b2c-a69b-ec0dffc6b1db">
        <wsu:Created>2013-03-28T16:24:33Z</wsu:Created>
        <wsu:Expires>2013-03-28T16:29:33Z</wsu:Expires>
     </wsu:Timestamp>
  </wsse:Security>
</soap:Header>
<soap:Body>
  <TXLife xsi:schemaLocation="http://ACORD.org/Standards/Life/2 TXLife2.22.00.XSD" xmlns="http://ACORD.org/Standards/Life/2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  .
  .
  . 
  </TXLife>
 </soap:Body> 
</soap:Envelope> 
```

我只是对检索里面的内容感兴趣`soap:Body`并丢弃其他所有内容。我写这个`XSLT`来提取那个

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:template match="soap:Envelope/soap:Body">
      <xsl:copy-of select="@*|node()" />    
  </xsl:template> 
</xsl:stylesheet> 
```

`XSLT`当肥皂信封中没有标题时，这可以正常工作，但是如果我将其应用于上面`XML`，它也会输出标题元素的值，因此它产生的输出是：

```
http://company.com/services/InterfacePoint/CallResponseuuid:85fafb9d-9ec0-4017-a367-4f9043812310http://schemas.xmlsoap.org/ws/2004/03/addressing/role/anonymous2013-03-28T16:24:33Z2013-03-28T16:29:33Z<TXLife xmlns="http://ACORD.org/Standards/Life/2"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing"
        xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
        xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xsi:schemaLocation="http://ACORD.org/Standards/Life/2 TXLife2.22.00.XSD">
.
.
.
</TXLife> 
```

但我希望输出为：

```
<TXLife xmlns="http://ACORD.org/Standards/Life/2">
.
.
.
</TXLife> 
```

我不在乎是否存在其他名称空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:00:46.057

这是因为文本节点有一个默认模板，可以将其内容复制到输出。为了使您的方法有效，您需要通过添加来抑制它

```
<xsl:template match="text()" /> 
```

现在，如果您`soap:Body`只有一个子元素，您应该会得到一个格式良好的结果，但它仍然会包含额外的命名空间声明。

我会从不同的角度来解决这个问题，使用身份模板而不是副本。XSLT 2.0 有一个方便的工具`copy-namespaces="no"`，您可以使用它`<xsl:copy>`来去除不必要的命名空间声明：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!-- extract just the first child of the body -->
  <xsl:template match="/">
    <xsl:apply-templates select="/soap:Envelope/soap:Body/*[1]" />
  </xsl:template>

  <!-- identity template, but dropping namespace declarations not used
       directly by this element -->
  <xsl:template match="@*|node()">
    <xsl:copy copy-namespaces="no">
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <!-- drop xsi:schemaLocation attributes -->
  <xsl:template match="@xsi:schemaLocation" />
</xsl:stylesheet> 
```

# android - 如何让动画与 Android 中的 TextToSpeech 话语同时播放

> ID：15687775
> 
> 赞同：2
> 
> 时间：2013-03-28T16:57:51.783
> 
> 标签：android

我的 ChordActivity 应用程序在 LinearLayout 中有一组按钮。单击按钮时，我希望 TextToSpeech 引擎说出单击的按钮的名称（例如 Minor 7th ），这工作正常。我还希望出现“弹出然后返回”按钮的动画，我也有这个动画。问题是，无论我如何安排代码，语音都是先发生的，然后是动画。我希望它们同时发生。我知道 TextToSpeech 有自己的消息队列，所以我假设如果我使用 runnable 来制作动画，我可以让语音和动画同时发生，但事实并非如此。然后我退出了可运行文件，现在有以下代码。有人对此有解决方案吗？非常感激。

```
private void speakChordMessage(View v) {
        image = (ImageView) v;
        image.startAnimation(animScale);
        chordTTS.playSilence(2000, TextToSpeech.QUEUE_FLUSH, null);
        chordTTS.speak(str1, TextToSpeech.QUEUE_FLUSH, null);
        while (chordTTS.isSpeaking()) {
        }
    } 
```

animscale.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator" >
    <scale
        android:duration="200"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:pivotX="100%"
        android:pivotY="0%"
        android:repeatCount="1"
        android:repeatMode="reverse"
        android:startOffset="0"
        android:toXScale="1.3"
        android:toYScale="1.25" />
</set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:08:07.777

如果您在调用 startAnimation 之前将[AnimationListener](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)添加到动画，您将有一个回调

```
public void onAnimationStart(Animation animation){} 
```

动画与 TextToSpeech 引擎并不完全不同，它被添加到队列系统中并且不会立即执行。如果您在 onAnimationStart() 中调用 chordTTS.speak()，它应该会大大减少您看到的延迟。从那里开始，您可能需要尝试一些小的延迟来达到预期的效果。

# node.js - 如何从 Azure 移动服务脚本向 Azure 服务总线队列发送消息

> ID：15687776
> 
> 赞同：2
> 
> 时间：2013-03-28T16:57:53.573
> 
> 标签：node.js, azure, windows-phone-8, azureservicebus, azure-mobile-services

我正在尝试在 Azure 上制作一个混合应用程序，它同时使用移动服务和工作角色。在移动服务数据库上运行的脚本（Node.js）中，我想通过服务总线队列发送消息。然后我的工作角色将收到该消息并执行一些操作。但我找不到应该如何将消息发送到服务总线队列。顺便说一句，这在“[移动服务服务器脚本参考](http://msdn.microsoft.com/en-us/library/windowsazure/jj554226.aspx)”中没有提到。有没有可能？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:24:56.470

这个有可能。从您的移动服务脚本中，您可以使用 Azure 模块与服务总线通信。您可以在此处找到 Azure 模块的参考和源代码：[https](https://github.com/WindowsAzure/azure-sdk-for-node) ://github.com/WindowsAzure/azure-sdk-for-node 。有关使用 Azure 模块的示例（在这种情况下与 Blob 存储通信，但它是有用的代码），请查看此演练：[https ://www.windowsazure.com/en-us/develop/移动/教程/上传图像到存储点网/](https://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/)。

# css - 如何使用 CSS 媒体查询将背景图像缩放到查看窗口

> ID：15687778
> 
> 赞同：7
> 
> 时间：2013-03-28T16:57:59.180
> 
> 标签：css, mobile, mobile-safari, background-image, media-queries

我有这个大图像作为网站的背景：

```
body {
    background: #000 url(/assets/img/living.jpg) no-repeat center center;
    background-attachment: fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    height:100%;
} 
```

但在我的移动设备（iPhone 4S - Safari）上，`background-attachment: fixed`它的效果似乎与在台式机上的效果不同。为什么会这样，我可以使用媒体查询来解决这个问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-01T20:44:47.270

试试这个——你并不总是需要媒体查询来处理背景图像。CSS3 background-size:cover 属性可以很好地处理这一切。以下内容在我测试过的所有移动设备上都非常适合我——尤其是在 Android、移动版本浏览器和所有平板电脑上。

```
body { 
    background-image: url(/assets/img/living.jpg); 
    background-repeat: no-repeat; 
    background-position: center;
    background-attachment: fixed;       
    webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    height:100%;
    width:100%; 
} 
```

# c# - Entity Framework 5 中的直接调用用户定义函数

> ID：15687780
> 
> 赞同：2
> 
> 时间：2013-03-28T16:58:03.357
> 
> 标签：c#, asp.net, entity-framework

我在 model.store 中有我的用户定义函数，但我无法在“函数导入”中导入。我尝试使用这种语法：

```
public class dbFunction
{
    [EdmFunction("MyModel.Store", "FN_GETPARVALUE")]
    public static string FN_GETPARVALUE(decimal ditta, string par, string retIfNull)
    {
        throw new NotSupportedException("Direct calls are not supported.");
    }
} 
```

但我不能像这样直接调用：

```
CommonRepository pr = new CommonRepository();
var test = pr.parametriDittaGetValue(Near_UserDitta, "PRODGESCOL", ""); 
```

如何解决我的问题？谢谢

# sql-server - SQLQueryNotificationStoredProcedure 异常填满日志

> ID：15687782
> 
> 赞同：1
> 
> 时间：2013-03-28T16:58:12.207
> 
> 标签：sql-server, sql-server-profiler

对于不同的用户，我一遍又一遍地看到这个异常（通过 SQL Profiler 看到的异常）。关于这些来自哪里以及为什么的任何想法/线索？

**异常 数据库中已经有一个名为“SqlQueryNotificationStoredProcedure-6b3cfc31-1210-44d0-9e9b-b049ec8d54f9”的对象。SqlQueryNotificationService-6b3cfc31-1210-44d0-9e9b-b049ec8d54f9**

# c - 如何有效地释放树

> ID：15687783
> 
> 赞同：0
> 
> 时间：2013-03-28T16:58:26.780
> 
> 标签：c, tree, free

我怎样才能有效地释放这棵树？该算法应该适用于此类树中的任何给定节点。所以我会有指向节点的指针，那个节点将是“根”节点。我想释放该节点下的所有内容。 ![在此处输入图像描述](../Images/6494d497f2c37096b4ab1bc36ac88eea.png)

树中的每个节点都是这个结构：

```
 typedef struct tag
  {
      struct tag* parent;
      struct tag* nextSibling;
      struct tag* previousSibling;
      struct tag* firstChild;
      struct tag* lastChild;     
      char* name;
      char* text;     
  }node; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:03:18.380

使用任何标准的树遍历机制并删除所有元素。

[http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:07:23.997

我想这会奏效。但实际上，大流士是正确的。您只需使用有效的树遍历，并在每个节点上执行您的操作。

*问题变了：* ~~既然您希望它在树中的任何节点上运行，只需先找到根。编写一个在一个方向上进行的树遍历比在树上上下移动要容易得多。~~

您已将问题从删除树更改为删除树的子集。所以，相反，让我们这样做。首先从树中删除元素（remove_node）。然后执行与我们之前相同的自由操作。

```
void remove_node(node *self) {
    if (self->previousSibling)
        self->previousSibling->nextSibling = self->nextSibling;
    if (self->nextSibling)
        self->nextSibling->previousSibling = self->previousSibling;
    if (self->parent && self->parent->firstChild == self)
        self->parent->firstChild = self->nextSibling;
    if (self->parent && self->parent->lastChild == self)
        self->parent->lastChild = self->previousSibling;
}

void free_node(node *self) {
    // Free one node. Perhaps this is:
    free(self->name);
    free(self->text);
    free(self);
}

void iterate_nodes(node *root, void op(node *self) ) {
    if (root == NULL)
        return;
    iterate_nodes(root->nextSibling, op);
    iterate_nodes(root->firstChild, op);
    op(root);
}

int main() {
    node *node = NULL; // Some node in the tree...
    remove_node(node);
    iterate_nodes(node, free_node);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:07:34.340

您可以使用标准的后序树遍历算法来释放整棵树。要使其在任何给定节点上工作，只需从遍历所有父链接到根节点开始。例如：

```
void free_tree(node *n)
{
    // Find the root node of the tree
    while(n->parent)
        n = n->parent;

    free_tree_helper(n);
}

void free_tree_helper(node *n)
{
    // Free all children of this node in post-order traversal
    node *child = n->firstChild;
    while(child)
    {
        // Save the next sibling pointer to avoid dangling pointers
        node *next = child->nextSibling;
        free_tree_helper(child);
        child = next;
    }

    // All the children have been freed, now free the parent
    free(n->name);
    free(n->text);
    free(n);
} 
```

或者，如果您使用[内存池](http://en.wikipedia.org/wiki/Memory_pool)来分配树节点，所有节点都来自同一个池，并且该池不包含其他树的节点，您可以一次释放整个内存池，而不必遍历整棵树。这将更加有效，因为它避免了潜在大树中的大量缓存未命中，并且还避免了某些内存碎片问题。

# c - libudev 监控在 Raspbian 上返回 NULL 指针

> ID：15687784
> 
> 赞同：0
> 
> 时间：2013-03-28T16:58:27.260
> 
> 标签：c, linux, monitor, udev, raspbian

我正在尝试使用 Raspbian 将之前在 Ubuntu 系统上运行的应用程序移植到 Raspberry Pi。应用程序应检测到新的 USB 闪存驱动器。这是 udev 监控的完成方式：

```
/* Create the udev object */
udev = udev_new();
if (!udev) {
    wprinterr("Can't create udev\n");
    exit(EXIT_FAILURE);
}
mon = udev_monitor_new_from_netlink(udev, "udev");
if(mon==NULL) {
    wprinterr("Could not create udev monitor!\n");
    exit(EXIT_FAILURE);
}
if(udev_monitor_filter_add_match_subsystem_devtype(mon, "block", NULL) != 0) {
    wprinterr("Could not add subsystem match to udev monitor\n");
    exit(EXIT_FAILURE);
}
if(udev_monitor_enable_receiving(mon) != 0) {
    wprinterr("Could not enable udev monitor receiving\n");
    exit(EXIT_FAILURE);
}
while (1) {
/*
* this will block until there is a monitor event
*/
    dev = udev_monitor_receive_device(mon);
    if (dev) { 
```

这在 Ubuntu 机器上运行良好。但在 Raspberry Pi 上，udev_monitor_receive_device(mon) 立即返回一个 NULL 指针。文档 ( [Docu](http://www.freedesktop.org/software/systemd/libudev/libudev-udev-monitor.html#udev-monitor-receive-device) ) 说，如果出现错误情况，就会发生这种情况。Errno 设置为 11（资源暂时不可用）。但我不知道，出了什么问题。udev 守护进程正在运行顺便说一句。有人有什么想法吗？

我前段时间在树莓论坛上写了一个类似的问题，但没有得到答案，自己也找不到解决方案。所以我又把它贴在这里了。[链接到 Raspberry 论坛帖子](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=33&t=37780)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:10:26.560

我没有找到解决方案，但我找到了解决方法。Select 可用于阻塞，直到有监视器事件。在此之后 udev_monitor_receie_device(mon) 将返回一个指向设备的探测器指针。

我可以这样做：

```
 mon = udev_monitor_new_from_netlink(udev, "udev");
    if(mon==NULL) {
        wprinterr("Could not create udev monitor!\n");
        exit(EXIT_FAILURE);
    }
    if(udev_monitor_filter_add_match_subsystem_devtype(mon, "block", NULL) != 0) {
        wprinterr("Could not add subsystem match to udev monitor\n");
        exit(EXIT_FAILURE);
    }
    if(udev_monitor_enable_receiving(mon) != 0) {
        wprinterr("Could not enable udev monitor receiving\n");
        exit(EXIT_FAILURE);
    }    
    fd = udev_monitor_get_fd(mon);
    while (1) {
        /*
         * this will block until there is a monitor event
         */
        fd_set fds;
        int ret;
        FD_ZERO(&fds);
        FD_SET(fd, &fds);
        ret = select(fd+1, &fds, NULL, NULL, NULL);

        /* Check if our file descriptor has received data. */
        if (ret > 0 && FD_ISSET(fd, &fds)) {
            dev = udev_monitor_receive_device(mon);
            if (dev) { 
```

# c - 是否有 YACC 文件的文件包含机制？

> ID：15687789
> 
> 赞同：3
> 
> 时间：2013-03-28T16:58:41.827
> 
> 标签：c, sed, bison, yacc

我有三个程序目前正在使用 YACC 文件来进行配置文件解析。为简单起见，它们都读取相同的配置文件，但是，它们每个都唯一地响应键/值（因此相同的 .y 文件不能用于超过 1 个程序）。不必`%token`为每个令牌重复声明会很好 - 如果我想添加一个令牌，我必须更改 3 个文件？现在是哪一年？？

这些方法不起作用或给我带来了问题：

1.  C 预处理器显然是在我们对文件进行 YACC 之后运行的，因此`#include`对于一个`#define`或其他宏将不起作用。

2.  我尝试使用以下脚本编写类似的内容`sed`：

`REPLACE_DATA=$(cat <file>)`

`NEW_FILE=<file>.tmp`

`sed 's/$PLACEHOLDER/$REPLACE_DATA/g' <file> > $NEW_FILE`

但是，它似乎是在删除我的换行符，`REPLACE_DATA`然后不替换实例`$PLACEHOLDER`而不是替换 variables 的内容`PLACEHOLDER`。

YACC 中是否有真正的包含机制，还是我缺少其他解决方案？这是一场维护噩梦，我希望其他人也遇到过类似的情况。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T17:34:33.580

[这是来自http://www.grymoire.com/Unix/Sed.html#uh-37](http://www.grymoire.com/Unix/Sed.html#uh-37)的 sed 版本

```
#!/bin/sh
# watch out for a '/' in the parameter
# use alternate search delimiter
sed -e '\_#INCLUDE <'"$1"'>_{
    r '"$1"'
    d
}' 
```

但传统上，我们在 yacc 之前使用 m4 预处理器。

# ormlite - 自定义 ORMLite 持久化以返回包装器对象

> ID：15687790
> 
> 赞同：0
> 
> 时间：2013-03-28T16:58:42.247
> 
> 标签：ormlite

我正在编写一个使用 ORMLite 连接到后端数据库的应用程序。由于该应用程序将通过 VPN 运行，因此我试图最大限度地减少数据库调用。

为了最小化数据库调用，我创建了一组类来包装每个字段的值。每个包装类都存储从数据库返回的原始值以及当前值。这允许诸如恢复到原始值或检查值是否脏（即，仅在一个或多个字段脏时更新数据库）之类的事情。

这对 ORMLite 的含义是 ORMLite`null`在查询数据库时从不返回值（即使数据库返回`null`）。如果`null`数据库中有一个值，它将返回一个完全初始化的“包装器”，其中`currentValue`and`originalValue`变量设置为 null。

似乎执行此操作的正确位置是在自定义持久化器中，例如（`StatefulIntegerProperty`的包装器在哪里`Integer`）：

```
public class StatefulIntegerPersister extends BaseDataType {

    ... misc. other code

    @Override
    public Object resultToSqlArg(FieldType fieldType, DatabaseResults results, int columnPos) throws SQLException {
        Integer result = results.getInt(columnPos);
        return new StatefulIntegerProperty((results.wasNull(columnPos)) ? null : result);
    }

    @Override
    public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos) throws SQLException {
        return sqlArg;
    }

    @Override
    public Object javaToSqlArg(FieldType fieldType, Object obj) throws SQLException {
        return ((StatefulIntegerProperty)obj).getCurrentValue();
    }

    @Override
    public boolean isStreamType() {
        return true; // this is a hack to work around ORMLite setting the value to null in the FieldType.resultToJava function
    }
} 
```

我有三个问题：

1.  这是正确的方法吗？
2.  在 ORMLite`FieldType.resultToJava`函数中，它似乎进行了一次空值检查，`null`如果数据库返回空值，它将替换我的包装器。现在我通过覆盖`isStreamType`持久化器中的方法返回true来解决这个问题。这是最好的方法吗，我以后会发现意想不到的负面影响吗？
3.  `resultToSqlArg`自定义持久化器中的和方法有什么区别`sqlArgToJava`，具体来说，我应该使用其中哪一个来包装从数据库返回的值，然后我应该在另一个中做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:17:25.007

> 这是正确的方法吗？

我不明白为什么你在这里做的任何事情都会最小化数据库调用。你能开始讨论[用户的邮件列表](https://groups.google.com/forum/?fromgroups#!forum/ormlite-user)吗？

现在，`resultToSqlArg(...)`当我认为您想要`sqlArgToJava(...)`. 见下文。

> 现在，我通过覆盖持久化器中的 isStreamType 方法以返回 true 来解决这个问题。这是最好的方法吗...

人力资源管理系统。如果它可以正常工作，但以这种方式使用此设置似乎很危险。如果我更改了该`isStreamType()`方法的行为，那么这可能会破坏您的代码。至少你应该有单元测试来确认如果你升级 ORMLite 会破坏这种行为。

也就是说，如果为真，则代码中有很好的处理，特别是围绕`null`值。`isStreamType()`

> resultToSqlArg 和 sqlArgToJava 有什么区别...

我已经充实了这些的 javadocs。

*   `resultToSqlArg`从 SQL 结果中获取对象并将其转换为适合作为 SQL 命令参数的 java 对象。例如，如果您有一个 date-long 类型，这将从`Long`数据库结果中提取一个值。
*   `sqlArgToJava`获取 sql-arg 值并将其转换为我们的 Java 字段。例如，如果您有一个 date-long 类型，这将采用一个`Long`值并将其转换为`Date`与实体字段匹配的 a。

我认为你应该覆盖`sqlArgToJava`而*不是*.`resultToSqlArg`

# jquery - html5 + jquery - 如何动态创建按钮

> ID：15687794
> 
> 赞同：0
> 
> 时间：2013-03-28T16:59:01.807
> 
> 标签：jquery, html, css

我该怎么做：

通过单击一个按钮应该在一个内部创建一个新按钮`<div>`

PS：每个新按钮都会从列表的位置访问数据

有谁知道逻辑错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:07:45.630

您可能遇到的问题是为创建的按钮绑定事件点击

您应该使用该`on()`方法有 2 个实现`on()`。一种允许直接绑定到元素，但这些元素必须存在，并且不考虑期货。

另一种方法是委托方法。您将处理程序委托给更高级别的元素或文档。此方法在事件冒泡时捕获事件

[http://api.jquery.com/on/](http://api.jquery.com/on/)

`i++`您还必须在创建每个按钮时增加“i”值 =>

# ios - 设置iOS部分标签的背景颜色

> ID：15687804
> 
> 赞同：1
> 
> 时间：2013-03-28T16:59:50.927
> 
> 标签：ios, objective-c, uilabel

是否可以为标签的某些部分设置背景颜色？我正在尝试创建类似于本文底部的标签部分的内容，必要时会自动换行和字符换行。此外，文本块可以是多个单词。基本上我需要类似的东西：

```
[label setBackgroundColor:UIColor forRange:NSRange]; 
```

我需要支持 iOS 5.0+。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:26:16.560

我无法使用 NSAttributedString 让它工作。这是我的解决方案。它不是超级干净，但它工作正常。Phrases 是一个 NSStrings 数组。每个短语可以是单个词或多个词。

```
-(void)addBackgroundsToContainer:(UIView*)container color:(UIColor*)color phrases:(NSArray*)phrases {
    CGFloat x = 0.0;
    CGFloat y = 0.0;
    UIView *lbl;

    for(NSString *phrase in phrases) {
        NSLog(@"Phrase: '%@'", phrase);
        NSArray *words = [phrase componentsSeparatedByString:@" "];
        NSString *text = @"";

        for(int i = 0; i < words.count; i++) {
            NSString *word = [words objectAtIndex:i];
            CGSize wordSize = [word sizeWithFont:[self labelFont]];
            CGSize textSize = [text sizeWithFont:[self labelFont]];

            //if the word appended with the new text fits on one line, concatenate the two
            if(textSize.width + wordSize.width + x < container.frame.size.width) {
                text = [text isEqualToString:@""] ? word : [NSString stringWithFormat:@"%@ %@", text, word];

                if(i == words.count -1 ) {//add the label if it's the last word
                    lbl = [self addLabelWithX:x y:y container:container color:color text:text];
                    x = lbl.frame.size.width + lbl.frame.origin.x + 1.0;
                    text = @"";
                }

            //if the word fits on one line but can't fit on the current line.
            } else if(wordSize.width < container.frame.size.width) {
                //if it's not the first word, add the text that came before it
                if(i != 0) {
                    lbl = [self addLabelWithX:x width:container.frame.size.width - x y:y container:container color:color text:text];
                }

                x = 0.0;
                y = lbl.frame.size.height + lbl.frame.origin.y + 1.0;
                text = word;

                //if it's the last word
                if(i == words.count - 1) {
                    lbl = [self addLabelWithX:x y:y container:container color:color text:text];
                    x = lbl.frame.size.width + lbl.frame.origin.x + 1.0;
                    text = @"";
                }

            //if the word doesn't fit on one line and it 
            } else if(wordSize.width > container.frame.size.width) {
                //I don't need to do char wrapping, but this would be where it'd go

            } 
        }
    }
}

-(UIView*)addLabelWithX:(CGFloat)x y:(CGFloat)y container:(UIView*)container color:(UIColor*)color text:(NSString*)text {
    CGFloat width = [text sizeWithFont:[self labelFont]].width + 4.0;
    return [self addLabelWithX:x width:width y:y container:container color:color text:text];
}
-(UIView*)addLabelWithX:(CGFloat)x width:(CGFloat)width y:(CGFloat)y container:(UIView*)container color:(UIColor*)color text:(NSString*)text {
    CGFloat lineHeight = [@" " sizeWithFont:[self labelFont]].height;

    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(2.0, 0.0, width, lineHeight)];
    [lbl setBackgroundColor:[UIColor clearColor]];
    [lbl setTextColor:[UIColor whiteColor]];
    [lbl setText:text];
    [lbl setFont:[self labelFont]];

    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(x, y, width, lbl.frame.size.height)];
    [v setBackgroundColor:color];
    [v addSubview:lbl];
    [container addSubview:v];

    return v;
}
-(UIFont*)labelFont {
    return [UIFont fontWithName:@"Lato-Regular" size:12.0];
} 
```

编辑：我回去让这不那么可怕.h

```
#import <UIKit/UIKit.h>

@protocol WATagCloudDelegate;

@interface WATagCloud : UIView
@property(weak, nonatomic) id<WATagCloudDelegate> delegate;
@property(strong, nonatomic) NSArray *dataTags;
@property(strong, nonatomic) UIColor *tagColor;
@property(strong, nonatomic) UIFont *tagFont;

-(void)expand;
-(void)expandWithAnimation;
-(void)collapse;
-(void)collapseWithAnimation;
@end

@protocol WATagCloudDelegate <NSObject>
@required
-(void)tagCloudExpandDown:(WATagCloud*)tagCloud;
-(void)tagCloudCollapseDown:(WATagCloud*)tagCloud;
@end 
```

.m

```
#import "WATagCloud.h"
#import "WAControlsUtility.h"

@interface WATagCloud()
@property(strong, nonatomic) UIButton *btnToggleVisibility;
@property(strong, nonatomic) UIView *vExpand;
@property(strong, nonatomic) UILabel *lblExpand;
@end

@implementation WATagCloud
@synthesize dataTags = _dataTags;
@synthesize tagColor = _tagColor;
@synthesize tagFont = _tagFont;
@synthesize btnToggleVisibility;
@synthesize vExpand;
@synthesize lblExpand;

-(void)setTagColor:(UIColor *)color {
    _tagColor = color;
    [self setColorOfSubviews];
}
-(void)setDataTags:(NSArray *)tags {
    _dataTags = tags;
    [self addTags];
}
-(UIFont*)tagFont {
    if(_tagFont) {
        return _tagFont;
    } else {
        _tagFont = [UIFont fontWithName:@"Lato-Regular" size:14.0];
        return _tagFont;
    }
}
-(void)setTagFont:(UIFont *)font {
    _tagFont = font;
    [self addTags];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setClipsToBounds:YES];

        self.btnToggleVisibility = [UIButton buttonWithType:UIButtonTypeCustom];
        [self.btnToggleVisibility setFrame:CGRectMake(0.0, 0.0, self.frame.size.width, self.frame.size.height)];
        [self.btnToggleVisibility addTarget:self action:@selector(onToggleVisibilityDown:) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:self.btnToggleVisibility];

        self.vExpand = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 0.0, 0.0)];
        [self addSubview:self.vExpand];

        self.lblExpand = [[UILabel alloc] initWithFrame:CGRectMake(2.0, 0.0, 0.0, 0.0)];
        [self.lblExpand setBackgroundColor:[UIColor clearColor]];
        [self.lblExpand setTextColor:[UIColor whiteColor]];
        [self.vExpand addSubview:self.lblExpand];
    }
    return self;
}

//======================================================================
//LAYOUT LABELS
//======================================================================
-(void)addTags {
    [self clearTags];
    CGFloat x = 0.0;
    CGFloat y = 0.0;
    UIView *lbl;

    for(int j = 0; j < self.dataTags.count; j++) {
        NSString *tag = [self.dataTags objectAtIndex:j];
        NSArray *words = [tag componentsSeparatedByString:@" "];
        NSString *text = @"";

        for(int i = 0; i < words.count; i++) {
            NSString *word = [words objectAtIndex:i];
            CGSize wordSize = [word sizeWithFont:self.tagFont];
            CGSize textSize = [text sizeWithFont:self.tagFont];

            if(textSize.width + wordSize.width + x < self.frame.size.width) {//if the word appended with the new text fits on one line, concatenate the two
                text = [text isEqualToString:@""] ? word : [NSString stringWithFormat:@"%@ %@", text, word];

                if(i == words.count -1 ) {//add the label if it's the last word
                    lbl = [self addLabelWithX:x y:y text:text tag:j];
                    x = lbl.frame.size.width + lbl.frame.origin.x + 1.0;
                    text = @"";
                }

            } else if(wordSize.width < self.frame.size.width) {//if the word fits on one line but can't fit on the current line.
                //if it's not the first word, add the text that came before it
                if(i != 0) {
                    lbl = [self addLabelWithX:x width:self.frame.size.width - x y:y text:text tag:j];
                }

                x = 0.0;
                y = lbl.frame.size.height + lbl.frame.origin.y + 1.0;
                text = word;

                //if it's the last word
                if(i == words.count - 1) {
                    lbl = [self addLabelWithX:x y:y text:text tag:j];
                    x = lbl.frame.size.width + lbl.frame.origin.x + 1.0;
                    text = @"";
                }

            } else if(wordSize.width > self.frame.size.width) {//if the word doesn't fit on one line 
                NSArray *characters = [self getCharacterArrayFromString:word];  
            }
        }
    }

    //update the frame height
    [self setFrame:[WAControlsUtility updateFrame:self.frame withX:nil y:nil width:nil height:[NSNumber numberWithFloat:[WAControlsUtility getHeightOfView:self]]]];
    [self.btnToggleVisibility setFrame:CGRectMake(0.0, 0.0, self.frame.size.width, self.frame.size.height)];
}

//======================================================================
//ADD TO CONTAINER
//======================================================================
-(UIView*)addLabelWithX:(CGFloat)x y:(CGFloat)y text:(NSString*)text tag:(int)tag {
    CGFloat width = [text sizeWithFont:[self tagFont]].width + 4.0;
    return [self addLabelWithX:x width:width y:y text:text tag:tag];
}
-(UIView*)addLabelWithX:(CGFloat)x width:(CGFloat)width y:(CGFloat)y text:(NSString*)text tag:(int)tag {
    CGFloat lineHeight = [@" " sizeWithFont:[self tagFont]].height;

    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(2.0, 0.0, width, lineHeight)];
    [lbl setBackgroundColor:[UIColor clearColor]];
    [lbl setTextColor:[UIColor whiteColor]];
    [lbl setText:text];
    [lbl setFont:[self tagFont]];

    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(x, y, width, lbl.frame.size.height)];
    [v setBackgroundColor:self.tagColor];
    [v setTag:tag];
    [v addSubview:lbl];
    [self addSubview:v];

    return v;
}

//======================================================================
//UI EVENTS
//======================================================================
-(void)onToggleVisibilityDown:(id)sender {
    if(self.delegate ==nil)
        return;

    if(self.frame.size.height > [@" " sizeWithFont:[self tagFont]].height * 2.0 + 2) {//plus 2 for the spacing between lines
        [self.delegate tagCloudCollapseDown:self];
    } else {
        [self.delegate tagCloudExpandDown:self];
    }
}

//======================================================================
//PUBLIC METHODS
//======================================================================
//EXPAND
-(void)expand {
    [self modifyViewsForExpanding];
    [self setFrame:[WAControlsUtility updateFrame:self.frame withX:nil y:nil width:nil height:[NSNumber numberWithFloat:[WAControlsUtility getHeightOfView:self]]]];
    [self.btnToggleVisibility setFrame:CGRectMake(0.0, 0.0, self.frame.size.width, self.frame.size.height)];
    [self bringSubviewToFront:self.btnToggleVisibility];
}
-(void)expandWithAnimation {
    [UIView animateWithDuration:.4 animations:^{
        [self expand];
    }];
}

//COLLAPSE
-(void)collapse {
    CGFloat height = [@" " sizeWithFont:[self tagFont]].height * 2.0 + 2;//plus 2 for the spacing between lines

    [self setFrame:[WAControlsUtility updateFrame:self.frame withX:nil y:nil width:nil height:[NSNumber numberWithFloat:height]]];
    [self.btnToggleVisibility setFrame:CGRectMake(0.0, 0.0, self.frame.size.width, self.frame.size.height)];
    [self modifyViewsForCollapsing];
    [self bringSubviewToFront:self.btnToggleVisibility];
}
-(void)collapseWithAnimation {
    [UIView animateWithDuration:.4 animations:^{
        [self collapse];
    }];
}

//======================================================================
//UTILITY
//======================================================================
-(NSArray*)getCharacterArrayFromString:(NSString*)string {
    NSMutableArray *characters = [[NSMutableArray alloc] initWithCapacity:[string length]];
    for (int i=0; i < [string length]; i++) {
        NSString *ichar  = [NSString stringWithFormat:@"%c", [string characterAtIndex:i]];
        [characters addObject:ichar];
    }
    return characters;
}
-(void)setColorOfSubviews {
    for(UIView *view in self.subviews) {
        if([view isKindOfClass:[UIButton class]] == NO) {
            if(view != self.vExpand) {
                [view setBackgroundColor:self.tagColor];
            } else {
                [view setBackgroundColor:[self.tagColor colorWithAlphaComponent:.5]];
            }

        }
    }
}
-(void)clearTags {
    [self.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
    [self addSubview:self.btnToggleVisibility];
    [self addSubview:self.vExpand];
}

//EXPAND/COLLAPSE UTILITY
-(NSArray*)getNthRow:(int)nth {//starts at 1 //not zero based
    NSMutableArray *rowViews = [[NSMutableArray alloc] initWithCapacity:self.subviews.count];

    CGFloat rowOrigin = [@" " sizeWithFont:self.tagFont].height * (nth - 1) + (nth - 1);
    for(UIView *view in self.subviews) {
        if([view isEqual:self.btnToggleVisibility] || [view isEqual:self.vExpand]) {//ignore the button and expand view
            continue;
        }

        if(view.frame.origin.y == rowOrigin) {
            [rowViews addObject:view];
        }
    }

    return rowViews;
}
-(UIView*)getGreatestXOriginViewForNthRow:(int)nthRow {
    NSArray *rowViews = [self getNthRow:nthRow];
    UIView *greatestXOriginView = nil;

    for(UIView *view in rowViews) {
        if(greatestXOriginView == nil || view.frame.origin.x > greatestXOriginView.frame.origin.x ) {
            greatestXOriginView = view;
        }
    }
    return greatestXOriginView;
}
-(void)modifyViewsForCollapsing {
    if([self getNthRow:3].count == 0) {
        return;
    }
    UIView *greatestXOriginView = [self getGreatestXOriginViewForNthRow:2];

    //update the label and the container
    [self.lblExpand setText:[NSString stringWithFormat:@"+%d", self.dataTags.count - greatestXOriginView.tag]];
    [self.lblExpand setFont:self.tagFont];
    [self.lblExpand setFrame:[WAControlsUtility updateFrame:self.lblExpand.frame withX:nil y:nil width:[NSNumber numberWithFloat:[self.lblExpand.text sizeWithFont:self.tagFont].width] height:[NSNumber numberWithFloat:greatestXOriginView.frame.size.height]]];
    [self resizeLabelContainer];

    //figure out where to place the expand and how to size it and the last label on the row
    CGFloat viewXValue = (greatestXOriginView.frame.size.width + greatestXOriginView.frame.origin.x);
    CGFloat expandXValue = self.frame.size.width - self.vExpand.frame.size.width;
    CGFloat xOrigin;

    if(viewXValue < expandXValue - 1.0) {//will it all fit without modifying any existing views
        xOrigin = viewXValue + 1.0;
    } else {//shrink the last view 
        [greatestXOriginView setFrame:[WAControlsUtility updateFrame:greatestXOriginView.frame withX:nil y:nil width:[NSNumber numberWithFloat:expandXValue - 1 - greatestXOriginView.frame.origin.x] height:nil]];
        for(UIView *view in greatestXOriginView.subviews) {//shrink the label
            [view setFrame:[WAControlsUtility updateFrame:view.frame withX:nil y:nil width:[NSNumber numberWithFloat:greatestXOriginView.frame.size.width - 4.0] height:nil]];
        }

        if(greatestXOriginView.frame.size.width < 20.0) {
            [greatestXOriginView setAlpha:0.0];//hide the last view if it got shrank down a lot
        }
        xOrigin = expandXValue;
    }

    [self.vExpand setFrame:[WAControlsUtility updateFrame:self.vExpand.frame withX:[NSNumber numberWithFloat:xOrigin] y:[NSNumber numberWithFloat:greatestXOriginView.frame.origin.y] width:nil height:nil]];
    [self.vExpand setAlpha:1.0];
    [self resizeLabelContainer];
}

-(void)modifyViewsForExpanding {
    UIView *view = [self getGreatestXOriginViewForNthRow:2];
    UILabel *label;
    if(view != nil) {
        label = (UILabel*)view.subviews[0];
        CGSize labelSize = [label.text sizeWithFont:self.tagFont];
        [label setFrame:[WAControlsUtility updateFrame:label.frame withX:nil y:nil width:[NSNumber numberWithFloat:labelSize.width] height:nil]];
        [view setFrame:[WAControlsUtility updateFrame:view.frame withX:nil y:nil width:[NSNumber numberWithFloat:labelSize.width + 4] height:nil]];
        [view setAlpha:1.0];
    }

    //hide expand
    [self.vExpand setAlpha:0.0];
}
-(void)resizeLabelContainer {
    [self.vExpand setFrame:[WAControlsUtility updateFrame:self.vExpand.frame withX:nil y:nil width:[NSNumber numberWithFloat:self.lblExpand.frame.size.width + 4.0] height:[NSNumber numberWithFloat:self.lblExpand.frame.size.height]]];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:08:13.107

您可以尝试`NSAttributedString`与`NSBackgroundColorAttributeName`属性一起使用。我还没有尝试过。

# ruby - 在 Mountain Lion 上使用 RVM 安装 ruby 1.9.2

> ID：15687807
> 
> 赞同：0
> 
> 时间：2013-03-28T16:59:59.803
> 
> 标签：ruby, rvm

我正在尝试使用 RVM 安装 ruby​​ 1.9.2，但我似乎无法让它工作。我已经安装了自制软件、GCC 4.2、X-Code 命令行工具，并确保我具备所有 rvm 要求并且 RVM 是最新的。它只是行不通。这是我在终端中看到的内容的要点。非常感谢。

终端： [https ://gist.github.com/justinhenricks/5264924](https://gist.github.com/justinhenricks/5264924)

Configure.log 文件： [https ://gist.github.com/justinhenricks/5264973](https://gist.github.com/justinhenricks/5264973)

# c++ - 低级编程键盘仿真

> ID：15687820
> 
> 赞同：2
> 
> 时间：2013-03-28T17:00:42.590
> 
> 标签：c++, winapi, keyboard, emulation, postmessage

我买了一个物理按钮并将其连接到我的计算机上，使用 Arduino 它通过 USB 串行与我正在编写的 C++ 程序进行通信。现在我想让按钮模拟我电脑上的按键，这样我就可以将它用作我玩游戏的替代控制器。

如果您不熟悉 Arduino，请不要介意，我的问题完全在于 C++

解决方案非常简单，基本上可以归结为使用 SendMessage 到一个带有击键的窗口，或者许多替代方法，如 sendKeys 等等。

我已经尝试过每个可以处理此类事情的库或 Windows 函数，但它们都没有真正模拟键盘按下的击键。

到目前为止，我尝试的所有东西都适用于记事本和 Chrome 等许多程序，但没有一个适用于不听 Windows 消息来处理按键输入的游戏。

我的猜测是这些游戏使用 GetAsyncKeyState 以直接方式与物理键盘通信。

我该如何解决这个问题？什么 API 提供了这样的功能？

我在这里需要一些非常低级别的东西，甚至可能是一个模拟新键盘的程序，所以 Windows 认为我已经插入了一个物理键盘。

这对我很有帮助，我已经多次遇到这个问题，并且在不久的将来我会在其他项目中继续遇到它。

我希望有人可以帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:15:54.177

使用[`keybd_event()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304.aspx)或[`SendInput()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx)

# php - PHP strtotime 返回 false

> ID：15687822
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:00:46.177
> 
> 标签：php, date, strtotime

下面是数据库的输出，我试图从数据库中获取开始日期和日期之间的月数。下面是我的输出

```
string(10) "12/12/2010" Date : 12/12/2010 - 1292112000
string(10) "19/04/2000" Date : 19/04/2000 -
string(10) "08/08/2007" Date : 08/08/2007 - 1186527600
string(10) "20/06/2011" Date : 20/06/2011 - 
```

如您所见，第二个和第四个 unix 时间戳是空的。我不知道是什么导致了这个问题。下面是我用来回显您在上面看到的内容的代码。

```
echo "Date : " . $row['startDate'] . " - " . strtotime($row['startDate']) . var_dump($row['startDate']). "<br />"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T17:01:50.537

从[手册](http://www.php.net/manual/en/function.strtotime.php)：

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:19:11.067

解决了这个问题，我在 5.3 PHP 中使用了一些新的 DateTime 函数

```
$originalDate = str_replace("/", "-", $row['startDate']);
$date1 = new DateTime($originalDate);
$date2 = new DateTime('now');

$interval = date_diff($date1, $date2);

echo "Months" . $interval->format('%m') . ($interval->format('%y') * 12) . "<br />"; 
```

# javascript - 将图像移动到指定的最小值

> ID：15687824
> 
> 赞同：0
> 
> 时间：2013-03-28T17:01:02.750
> 
> 标签：javascript, animation, positioning

我有代码

```
$(document).keydown(function (key) {
    switch (parseInt(key.which, 10)) {
        case 38://up
            mObj.animate({
                top: "-=100px"
            });
            mObj.animate({
                top: "+=" + change + "px"
            });
            break;
        default:
            break;
    }
}); 
```

这会在向上按钮上正确地上下移动我的图像，因为马里奥在空中时没有再次按下向上按钮。我想通过一种方法来解决这种情况（当马里奥在空中时无法点击），例如我在[此处](http://jsfiddle.net/Zeaklous/WufQs/1/)找到的代码的第 43-46 行中尝试的方法。

从本质上讲，我想让马里奥在没有向上移动时简单地一直下降到设定的最低水平。关于让它执行此操作或指出为什么我的替代方法（第 43-46 行中注释掉的方法）不起作用的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:19:52.737

作为一个直接的解决方案，您可以尝试使用这个：

```
$(document).ready(function () {
    var jumping = false;
    $(document).keydown(function (key) {
        switch (parseInt(key.which, 10)) {
            case 38://up
                if (!jumping) {
                    jumping = true;

                    var jumpUp = new $.Deferred();
                    var jumpDown = new $.Deferred();

                    mObj.animate({
                        top: "-=100px"
                    }, {
                        done: function () {
                            jumpUp.resolve();
                        }
                    });
                    mObj.animate({
                        top: "+=" + change + "px"
                    }, {
                        done: function () {
                            jumpDown.resolve();
                        }
                    });
                    $.when(jumpUp, jumpDown).done(function () {
                        jumping = false;
                    });
                }
                break;
            default:
                break;
        }
    });
}); 
```

[http://jsfiddle.net/wuY9V/1/](http://jsfiddle.net/wuY9V/1/)

它基本上只是有一个马里奥是否在跳跃的“状态”。当按下“向上”箭头时，马里奥正在跳跃。一旦将他向上移动然后向下移动的动画完成，马里奥就不再跳跃。因此，当马里奥跳跃时，该功能会忽略“向上”键。我确信有一种更优雅的方式（比如内置`.animate`），但这就是我想出的。

所以显然要测试它，尝试在马里奥跳跃期间的任何时候按下“向上”键......它不应该做任何事情。

我没有仔细研究它，但我想知道为什么你有一个`setInterval`移动马里奥？我会这样做的方式只是监听`keydown`事件。如果是“向上”箭头，动画他向上移动，然后向下移动（就像你有，就像我在这里协助过的那样）。如果是向左箭头，动画他向左移动一段设定的距离。如果是右箭头，则动画他向右移动一段设定的距离。您是否有理由`setInterval`不断检查是否按下了按键？也许我错过了一些东西。

# java - 在 jframe 中单击一个按钮的按钮不会加载/显示另一个 jframe

> ID：15687825
> 
> 赞同：0
> 
> 时间：2013-03-28T17:01:03.487
> 
> 标签：java, swing, jframe, jbutton, actionlistener

我一直在研究 Swings 框架，其中大型机中有一个卡片布局面板。

我总共添加了 20 个 jpanels 到我的卡片布局面板中。在这 20 个面板中，有 3 个面板由一个按钮组成。单击此按钮会加载另一个 jframe。当我使用 IDE 运行这个 GUI 时，它运行良好，但是，当我运行 jar 文件时，在三种情况中的两种情况下单击按钮时它不会显示帧。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    JFrame f11=new JFrame("DEADLOCK SIMULATION-1");
    f11.add(new puzzle6());
    f11.setSize(1100,620);
    f11.setLocation(0,40);
    f11.setVisible(true);
} 
```

其他两个按钮的代码也相似，只是我在这些 jframe 中添加了puzzle7 和puzzle8 面板。

这是我用于按钮侦听器的代码。此按钮仅在一种情况下加载新的 jframe，在其他两种情况下不显示框架。我在这三个新 jframe 中添加的每个 java 文件都扩展了 jpanel。问题仅在我运行 jar 文件时出现，但与IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:31:47.090

你注册你的活动了吗？使用监听器类？

# python - 从内置类继承，不能改变 __init__ 的参数

> ID：15687831
> 
> 赞同：0
> 
> 时间：2013-03-28T17:01:15.510
> 
> 标签：python, class, date, python-2.7, python-datetime

我创建了一个具有`date`对象继承的类，但我无法更改应该提供给`__init__`.

```
>>> class Foo(date):
...  def __init__(self,y,m=0,d=0):
...     date.__init__(self,y,m,d)
... 
>>> Foo(1,1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Required argument 'day' (pos 3) not found 
```

我已经尝试使用`super`...

如果有人知道我们是否可以更改内置对象 args 或这样做的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:04:54.267

日期类是一个*不可变*对象，因此您需要重写[`__new__()`静态方法](http://docs.python.org/2/reference/datamodel.html#object.__new__)：

```
class Foo(date):
    def __new__(cls, year, month=1, day=1):
        return super(Foo, cls).__new__(cls, year, month, day) 
```

请注意，您至少需要将月份和日期设置为*1，0*`month`不是and`day`参数的允许值。

使用`__new__`作品：

```
>>> class Foo(date):
...     def __new__(cls, year, month=1, day=1):
...         return super(Foo, cls).__new__(cls, year, month, day)
... 
>>> Foo(2013)
Foo(2013, 1, 1) 
```

# javascript - 使用 IE 的 Iframe 使用进程栏上传文件

> ID：15687832
> 
> 赞同：0
> 
> 时间：2013-03-28T17:01:15.720
> 
> 标签：javascript, html, ajax, iframe, file-upload

我编写了代码来为 IE 上传文件 Using iframe To Do it Work 。刚刚上传完成。但是我想要一个**processbar**但是我不知道怎么办 请大家帮忙。

```
 function fileUpload(form, action_url, div_id) {
            // Create the iframe...
            var iframe = document.createElement("iframe");
            iframe.setAttribute("id", "upload_iframe");
            iframe.setAttribute("name", "upload_iframe");
            iframe.setAttribute("width", "0");
            iframe.setAttribute("height", "0");
            iframe.setAttribute("border", "0");
            iframe.setAttribute("style", "width: 0; height: 0; border: none;");
            //target = "#fileIframe"
            // Add to document...
            form.parentNode.appendChild(iframe);
            window.frames['upload_iframe'].name = "upload_iframe";

            iframeId = document.getElementById("upload_iframe");

            // Add event...
            var eventHandler = function () {

                if (iframeId.detachEvent) {
                    iframeId.detachEvent("onload", eventHandler);
    //                $('#progressNumber').text("100%");
                }
                else iframeId.removeEventListener("load", eventHandler, false);
                //            if (iframeId.addEventListener) iframeId.removeEventListener("progress", uploadProgress1, false);
                // Message from server...
                if (iframeId.contentDocument) {
                    content = iframeId.contentDocument.body.innerHTML;
                } else if (iframeId.contentWindow) {
                    content = iframeId.contentWindow.document.body.innerHTML;
                } else if (iframeId.document) {
                    content = iframeId.document.body.innerHTML;
                }

                document.getElementById(div_id).innerHTML = content;

                // Del the iframe...
                setTimeout('iframeId.parentNode.removeChild(iframeId)', 250);
            }

            if (iframeId.addEventListener) {
                iframeId.addEventListener("load", eventHandler, true);
              //  $('#progressNumber').text("Processing...");
            }
            if (iframeId.attachEvent) iframeId.attachEvent("onload", eventHandler);

            // Set properties of form...
            form.setAttribute("target", "upload_iframe");
            form.setAttribute("action", action_url);
            form.setAttribute("method", "post");
            form.setAttribute("enctype", "multipart/form-data");
            form.setAttribute("encoding", "multipart/form-data");
            // Submit the form...
            form.submit();

            document.getElementById(div_id).innerHTML = "Uploading...";
        }
        function fileSelectedIE() {
            var fullname = $('#fileToUpload').val().toString();
            var IndexExt = fullname.lastIndexOf(".");
            var ext = fullname.substr(IndexExt + 1).toString();
            var IndexFileName = fullname.lastIndexOf("\\");
            var FileName = fullname.substring(IndexFileName+1, IndexExt).toString();
            document.getElementById('fileName').innerHTML = 'Name: ' + FileName;
            document.getElementById('fileSize').innerHTML = 'Size: Not Support';
            document.getElementById('fileType').innerHTML = 'Type: ' + ext;
        }
    <input type="file" name="fileToUpload[]" id="fileToUpload" onchange="fileSelectedIE()" /></br>

    <input type="button" value="upload" onClick="fileUpload(this.form,'UploadHandler.ashx','upload'); return false;"/>
 <div id="fileName">
    </div>
    <div id="fileSize">
    </div>
    <div id="fileType">
    </div>
    <div id="progressNumber">
    </div> 
```

上传文件时如何创建进程栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:15:39.607

在支持 File API 的用户代理中跟踪文件上传进度非常容易。不幸的是，IE9 和更早版本没有。如果没有 File API 支持，您将无法（轻松）跟踪文件上传进度。理论上，可以通过 nginx 或 apache 的 FileUpload 模块来实现。这在我维护的 javascript 上传器[的功能请求](https://github.com/Widen/fine-uploader/issues/506)中有更多详细信息。

# c# - 具有默认值的.NET下拉列表与c#

> ID：15687834
> 
> 赞同：-2
> 
> 时间：2013-03-28T17:01:25.517
> 
> 标签：c#, asp.net

我有一个下拉列表，它产生以下内容：

SiteId 的可能值：

```
 "Select Site"
 "1"
 "2"
 "3"
 "4" 
```

请注意，选择站点是默认值：

```
 <asp:DropDownList ID="ddlSite" DataSourceID = "siteDS" runat="server" OnSelectedIndexChanged="ddlSite_SelectedIndexChanged" AutoPostBack="true" DataTextField="SiteName" 
            DataValueField="SiteId" AppendDataBoundItems="true">
            <asp:ListItem>Select Site</asp:ListItem>
    </asp:DropDownList> 
```

我有以下查询，但不确定是否有更好的方法

```
 // this checks to see if the value is Select Site or an actual siteid (1,2,3)
     int siteID = 0;
     int Site;
     bool result = Int32.TryParse(ddlSite.SelectedValue, out Site);
     if (result)
     {
        siteID = Site;
     }

     if (result)
     {
        NTDS.SelectCommand = "SELECT *  FROM [tbl1] where siteId = " + siteID;
     }
     else
     {
        NTDS.SelectCommand = "SELECT *  FROM [tbl1]";
     } 
```

我之所以有 if else 是因为我们如果用户选择：选择站点，我不想执行 SELECT，因为没有值为 Select Site 的 siteId。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:05:59.047

首先，我建议阅读有关[Sql Injections](http://en.wikipedia.org/wiki/SQL_injection)的内容，并且您应该真正参数化您的查询。

其次，由于您同时拥有 DataText 和 DataValue 属性，因此您可以将“SelectSite”作为`Text`属性，并将`Value`其设为 0 或 -1（或为空）。

无论哪种方式，您都可以执行以下操作：

```
if (Int32.TryParse(ddlSite.SelectedValue, out Site) && Site  > 0)
{
    // Parameterized SELECT
}
else
{
  ...
} 
```

不需要 Site*和*SiteId

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:11:00.217

```
// your initial item or better off you can add a client side validator
// preventing them from submitting the page with the initial value, also call Page.IsValid on server side to make sure they didn't hacked your client side validation.
if (ddlSite.SelectedIndex != 0)
{
   var siteId = 0;
   if (int.TryParse(ddlSite.SelectedValue, out siteId)
   {
      // then here build a helper for adding conditions if siteId is present.
      // try using parameterized queries for avoiding sql injection.
   }
   else
   {
      // call your same helper without siteId and it should be smart enough to
      // return a query without where clause.
   }
} 
```

这里有更多关于[参数化查询](http://www.dotnetperls.com/sqlparameter)的信息。

# java - 如何使图像变形？

> ID：15687836
> 
> 赞同：0
> 
> 时间：2013-03-28T17:01:30.153
> 
> 标签：java, image

你好我只是Java的初学者。

我有这样的图像：

![图片](../Images/04bf64488b7185b0bca4747eab6e254c.png)

如何使用`java.awt.Graphics2D`这样的方法将此图像变形为新形式？

![变形图像](../Images/0bd966ab1bb1f40af0107fc3208167fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:46:56.450

`Java2D`只能做仿射变换。这意味着使用与您的示例相同的矩形，您可以制作平行四边形，而不是梯形（或其他图形）。

[我从来没有使用过它，但也许你会通过Java 3D API](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138252.html)找到你需要的东西。

# java - 具有空值的 JPA 复合主键

> ID：15687837
> 
> 赞同：14
> 
> 时间：2013-03-28T17:01:30.583
> 
> 标签：java, jpa, eclipselink, jpa-2.0, ejb-3.0

我在 oracle 数据库中有一个包含客户数据的表。这是一个简化的定义：

```
CUSTOMER (CUSTOMER_ID NUMBER NOT NULL,
          SOURCE_SYSTEM VARCHAR2(30),
          FULL_NAME VARCHAR2(360),
          PHONE_NUMBER VARCHAR2(240)
          ) 
```

此表的主键是`(CUSTOMER_ID, SOURCE_SYSTEM)`.

该表有许多`SOURCE_SYSTEM`为空的行。在数据库级别，没有问题，但是当我尝试通过 JPA Entity 访问这些行中的任何一个时，它会导致一些问题：

1：使用`em.find()`获取空行`SOURCE_SYSTEM`总是导致返回空。

2：如果表中不存在该记录，则`em.merge()`用于更新具有空值的行成功，但在后续更新时失败，因为合并总是导致插入运行。`SOURCE_SYSTEM`

3：使用`em.createQuery()`显式查询空行会导致以下异常：

```
Exception [EclipseLink-6044] (Eclipse Persistence Services - 2.3.1.v20111018-r10243):
   org.eclipse.persistence.exceptions.QueryException
Exception Description: The primary key read from the row [ArrayRecord(
CUSTOMER.CUSTOMER_ID => 1
CUSTOMER.FULL_NAME => GUY PERSON
CUSTOMER.PHONE_NUMBER => 555-555-1234
CUSTOMER.SOURCE_SYSTEM => null)] during the execution of the query was detected to be null.
   Primary keys must not contain null.
Query: ReadAllQuery(referenceClass=Customer sql="SELECT CUSTOMER_ID, FULL_NAME, PHONE_NUMBER, SOURCE_SYSTEM FROM CUSTOMER WHERE ((CUSTOMER_ID = ?) AND (SOURCE_SYSTEM IS NULL))") 
```

不幸的是，“主键不能包含空值”似乎是最终的。我无法找到有关此错误解决方法的太多信息，这使得似乎没有解决方案。

**问题**：我想知道是否有人有任何不涉及更改数据库***的基于 Java 代码的解决方案。***我目前的解决方法是`ROW_ID`用作`@Id`表的 ，但这意味着我不能再使用`em.merge()`or `em.find()`。

这是我的Java类：

客户.java：

```
@Entity
@Table(name = "CUSTOMER")
public class Customer implements Serializable {
  private static final long serialVersionUID = 1L;

  @EmbeddedId
  private Customer_Id key;

  @Column(name = "CUSTOMER_ID", nullable = false, insertable = false, updatable = false)
  private Long customerId;
  @Column(name = "SOURCE_SYSTEM", length = 30, insertable = false, updatable = false)
  private String sourceSystem;

  @Column(name = "FULL_NAME", length = 360)
  private String fullName;
  @Column(name = "PHONE_NUMBER", length = 240)
  private String phoneNumber;

  //Setters, Getters, etc
  ...
} 
```

Customer_Id.java

```
@Embeddable
public class Customer_Id implements Serializable {
  private static final long serialVersionUID = 1L;

  @Column(name = "CUSTOMER_ID", nullable = false)
  private Long customerId;
  @Column(name = "SOURCE_SYSTEM", length = 30)
  private String sourceSystem;

  //Setters, Getters, etc
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:29:10.660

主键不能包含 null（在 JPA 或数据库中）。使用不同的值，例如“”或“”。

customer_id 是唯一的吗？如果是这样，那么只需从 Id 中删除 sourceSystem 。

否则，您可以尝试记录错误以添加对空 ID 的支持。

# jquery - 无法控制 $('input').click(function()

> ID：15687841
> 
> 赞同：-2
> 
> 时间：2013-03-28T17:01:48.720
> 
> 标签：jquery, function, input, click

我无法让我的点击事件正常运行。我需要它从每个`<input>`表格行中的每一个触发 - 并且只在这个表格中，而不是在`<input>`页面的其他地方（在片段中没有看到）。

```
$('input').click(function() { 
```

但是它确实从`<input>`我页面上的每个其他地方触发（在片段中没有看到）。

所以我试图通过 id 来指定它。

```
$('#File_Number').click(function() { 
```

但这仅适用于第一个表行且仅适用于第一个`<input>`.

每个表行都是从 MySQL 生成的。因此出现了很多`id="file_number"`。

这是功能源代码：http: [//jtjohnston.net/clickeventtest/database.php](http://jtjohnston.net/clickeventtest/database.php)

理想情况下，我希望点击事件从每个存在于每一行的这些 id 中触发。

```
id="File_Number"
id="File_DateTime"
id="Address"
id="File_Comments"

<tr id="2013-0469">
<td id=""><input id="File_Number" value="2013-0455" type="readonly" size="7"></td>
<td id=""><input id="File_DateTime" value="2013-03-16 03:08:12" type="readonly" size="18"></td>
<td id=""><input id="Address" value="123 Sesame Street" type="readonly" size="20"></td>
<td id=""><input id="File_Comments" value="Something said done entered" type="readonly" size="30"></td>
</tr>
<tr id="2013-0570">
<td id=""><input id="File_Number" value="2013-0965" type="readonly" size="7"></td>
<td id=""><input id="File_DateTime" value="2013-03-17 02:08:14" type="readonly" size="18"></td>
<td id=""><input id="Address" value="123 Baker Street" type="readonly" size="20"></td>
<td id=""><input id="File_Comments" value="Something said done entered" type="readonly" size="30"></td>
</tr>

<script type='text/javascript'>
//$.removeCookie("test");

//$('input').click(function() {
$('#File_Number').click(function() {
  var id = $(this).parents('tr').attr('id');
      alert(id);
//    $.cookie("Row_Id", id, {   expires : 10});
      window.open("something.php","_new");

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:03:29.517

ID**需要是唯一**的，用类替换所有输入 ID，然后通过定位类相应地调整 jQuery，例如

```
$('.File_Number').click(function() {
  var id = $(this).parents('tr').attr('id');
      alert(id);
//    $.cookie("Row_Id", id, {   expires : 10});
      window.open("something.php","_new");

}); 
```

**确保也向您的表添加一个 ID**（以防您在该页面上使用多个表）。

然后你可以像这样定位它：

```
$('#tableID').on('click', 'input', function() {

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:04:34.303

尝试这个

```
$('#tableID td input').click(function() {
.... 
```

或使用`on`

```
$('#yourTableID').on('click', 'input', function() { 
```

是的...一如既往... ID应该始终是唯一的...它可能会起作用，但以后可能会给您带来麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:05:13.073

每个 ID 在页面中应该是唯一的，因此您需要将输入 ID 替换为类似的类

```
<tr id="2013-0469">
    <td id=""><input class="File_Number" value="2013-0455" type="readonly" size="7"></td>
    <td id=""><input class="File_DateTime" value="2013-03-16 03:08:12" type="readonly" size="18"></td>
    <td id=""><input class="Address" value="123 Sesame Street" type="readonly" size="20"></td>
    <td id=""><input class="File_Comments" value="Something said done entered" type="readonly" size="30"></td>
</tr> 
```

JS

```
$('table').on('click', 'input', function(e){
  var id = $(this).parents('tr').attr('id');
      alert(id);
//    $.cookie("Row_Id", id, {   expires : 10});
      window.open("something.php","_new");

}) 
```

还要在表中添加一个 id 属性，以便您可以轻松识别它

```
<table id="my-table">
    <tr>
        <td>..... 
```

然后将脚本更改为

```
$('#my-table').on('click', 'input', function(e){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:04:54.620

使用事件委托：

```
$('#tableid').on('click', 'input', function() { 
```

`#tableid`必须是您要侦听其子输入点击的表的 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T17:05:48.187

$(#id_of_your_table tr td 输入).click(function....)

# c# - 向 ServiceStack 服务发送大消息

> ID：15687845
> 
> 赞同：2
> 
> 时间：2013-03-28T17:01:53.533
> 
> 标签：c#, web-services, servicestack

我需要创建一个允许客户端发送包含大量数据的消息的服务，但我不确定如何构建 API。

假设客户想要保存一个包含可变数量相关对象的新对象。例如，一个 Order，其中包含 OrderDetail 对象中包含的多个行项目。一个 Order 可能有超过 1000 个与之相关的 OrderDetail 对象，每个对象可能包含 20-40KB 的数据。客户端需要知道服务已收到整个订单。

我想探索使用 ServiceStack 来创建它。创建高流量服务并不是我非常熟悉的事情。我们通常会使用 WCF，似乎人们只是建议增加消息大小限制以容纳大消息。我不确定这是否是 WCF 的最佳策略，更不用说 ServiceStack。

将每个 OrderDetail 作为它自己的消息发送会更好吗？我会担心保持整个秩序沿着这条路线走下去的完整性。还是我应该将其保留为一条 20-40MB 数据的大消息？还是我应该尝试将其作为文件流式传输？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:30:16.940

使用[ServiceStack 的 ProtoBuf 支持](https://github.com/ServiceStack/ServiceStack/wiki/Protobuf-format)——协议缓冲区是目前最有效和最紧凑的有线格式。因为它更简单，所以先尝试一下，然后再研究 ServiceStack 中的 Streaming 选项。

### ServiceStack 中的流式处理选项

如果您已经确定您的服务将从 Streaming 中受益匪浅，那么这里有一篇关于[向 ServiceStack 发送流](http://www.codeproject.com/Articles/501608/Sending-stream-to-ServiceStack)的文章，它展示了如何在 ServiceStack 服务中进行流处理。它展示了如何使用[IRequiresRequestStream](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization#reading-directly-from-the-request-stream)让您在服务中流式传输请求正文：

请求 DTO：

```
[Route("/upload/{FileName}", "POST")]
public class UploadPackage : IRequiresRequestStream
{
    public System.IO.Stream RequestStream { get; set; }

    public string FileName { get; set; }
} 
```

对 Request Body Stream 的访问被注入到`RequestStream`Request DTO 的属性中。

# php - Magento 1.7 中的重新排序/侧边栏显示隐形产品 - 在早期版本中有效

> ID：15687847
> 
> 赞同：0
> 
> 时间：2013-03-28T17:02:06.700
> 
> 标签：php, magento, magento-1.7, magento-1.6

我有一个带有虚拟产品的插件，设置为`VISIBILITY_NOT_VISIBLE`. 这是一个虚拟产品。

但是，它显示在“我的订单”小部件中 - 但仅在 Magento 1.7 中。它在 1.6 和 1.5 中运行良好。我已经`Mage/Sales/Block/Reorder/Sidebar.php`在该`getItems()`方法中进行了测试，它确实具有正确的`VISIBILITY_NOT_VISIBLE`状态。

1.  在这方面，magento 1.6 到 1.7 之间有什么变化吗？我可以发现代码库中的差异，但不是导致这种行为的原因。

2.  这可能是一个错误，因为它只出现在 1.7 中？

3.  我可以在不触及原始代码库的情况下绕过它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:48:22.003

你是对的。我不确定这是否是错误（但就功能而言，这应该是错误）。

所以 1.6（和旧版本）/和 1.7 之间的区别是：

该模型

> Mage_Sales_Model_Order

有这个方法

```
protected function _getItemsRandomCollection($limit, $nonChildrenOnly = false){  

        $(...)->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInSiteIds()) // This is Visibility check ( its fine ) 
            foreach ($collection as $item) {
                $product = $productsCollection->getItemById($item->getProductId());
                if ($product) {
                    $item->setProduct($product); // Set Object Data ( 'product' ) if it exists 
                }
            }

} 
```

因此，在前面的代码中，最后订购的项目集合具有名为“产品”的属性，如果产品对象返回，则该属性保存产品对象，如果未返回，则不设置。

上面的代码很好，并且没有问题。

在模型中

> Mage_Sales_Block_Reorder_Sidebar

getItems 方法是：

```
/**
 * Get list of last ordered products
 *
 * @return array
 */
public function getItems()
{
    $items = array();
    $order = $this->getLastOrder();
    $limit = 5;

    if ($order) {
        $website = Mage::app()->getStore()->getWebsiteId();
        foreach ($order->getParentItemsRandomCollection($limit) as $item) {
            if ($item->getProduct() && in_array($website, $item->getProduct()->getWebsiteIds())) {
                $items[] = $item;
            }
        }
    }

    return $items;
} 
```

==================================================== =============================== **在 Magento 1.6 和之前的版本中**

当你调用*$item->getProduct();* 在侧边栏块中，

它将返回已在上述方法（ _getItemsRandomCollection() ）中设置的对象属性（ Mage_Catalog_Model_Product - 产品实例 - ）

或者，如果未设置，它将返回 NULL。

因此，如果它返回 Product 对象，则该项目将显示在侧边栏块中，如果不是，则返回数组将不包含该*虚拟项目*

==================================================== ================================ **在 Magento 1.7 中**

当你调用*$item->getProduct();* 在侧边栏块中，

===>>*该方法在模型中实现*

> Mage_Sales_Model_Order_Item

当您调用该方法时，它将从模型中执行（它不会查找对象属性）。

所以如果你看一下方法实现

```
/**
 * Retrieve product
 *
 * @return Mage_Catalog_Model_Product
 */
public function getProduct()
{
    if (!$this->getData('product')) { // If no object attribute set with name ('product')
        $product = Mage::getModel('catalog/product')->load($this->getProductId()); // it will always return product instance with that product id.
        $this->setProduct($product); // set it to the current sidebar item
    }

    return $this->getData('product'); // return the object property 'product'
} 
```

因此，如果方法（ _getItemsRandomCollection() ）没有设置对象属性“产品”，因为它不可见或某些东西（此方法将直接按产品 ID 分配它，而不检查可见性或其他任何东西。

**是的，我认为这是一个错误，需要修复**

*这就是为什么*

==================================================== ================================

**解决方案非常简单**

1.创建自定义模块。

2.扩展/重写模型。

> Mage_Sales_Model_Order_Item

3.重写方法和（注释代码块）或在方法中添加可见性检查。

解决方案1（注释设置项目产品的代码块）。

```
/**
 * Retrieve product
 *
 * @return Mage_Catalog_Model_Product
 */
public function getProduct()
{
    /** comment from here 
    *if (!$this->getData('product')) {
    *    $product = Mage::getModel('catalog/product')->load($this->getProductId());
    *    $this->setProduct($product);
    *}
    * Till here.
    */
    return $this->getData('product');
} 
```

**或者**

解决方案 2：将可见性检查添加到方法中，如下所示。

```
/**
 * Retrieve product
 *
 * @return Mage_Catalog_Model_Product
 */
public function getProduct()
{
    if (!$this->getData('product')) {
        $product = Mage::getModel('catalog/product')->load($this->getProductId());
        if(!$product->isVisibleInSiteVisibility()) // add visibility check here
        {
             $this->setProduct($product);
        }
    }

    return $this->getData('product');
} 
```

我花了一些时间做这个:)希望它对你有帮助！

# java - 我的带有马尔可夫链例程的文本生成器不完整如何处理 pos/word/freq 数据结构？

> ID：15687852
> 
> 赞同：0
> 
> 时间：2013-03-28T17:02:27.947
> 
> 标签：java, algorithm, markov

我想用马尔可夫链创建一个简单的文本生成器。我不明白如何使用 java 'random' 例程以及使用什么数据结构？

例如，假设我有一个加载文档的例程，然后有一个马尔科夫例程来基于单独的结构生成文档。我将如何修改/创建生成文档例程？

```
public class MarkovGenerator {

    DataStructure wordFreqMapByPos = new DataStructure();
    public void train(String doc) {
        for (word : doc) {
            // Add word to the pos,
            // Build a word frequency map AT THE POSITION IN THE DOCUMENT
            wordFreqMapByPos.put(thePos, wordsAtThisPos)
        }
    }

    public void generateDocument() {
       ?????
       for (pos : wordFreqMapByPos) {
            // Generate a word
            // Do I need to weight? generate a word based on how often
            // the word occurs at this position?
            // How?
       }
    }

} 
```

# sql - SQL CASE 语句 - 缺少操作员错误

> ID：15687856
> 
> 赞同：2
> 
> 时间：2013-03-28T17:02:46.750
> 
> 标签：sql, ms-access, operator-keyword, ms-access-2013

我是 SQL 新手，正在使用 Access 2013。我正在尝试构建一个 CASE 语句，该语句查看列中的值并将类别编号分配给列中的每条记录。当我尝试运行我的代码时，我不断收到“缺少操作员”的消息。我在下面列出了我的代码并感谢任何帮助。谢谢

```
SELECT P.REGISTRATION_NUMBER, P.DATA_INDICATOR, D.TERRITORY_ID, P.PRODUCT_NAME, P.JAN_13_TRX, P.DEC_12_TRX, P.NOV_12_TRX, P.OCT_12_TRX, P.SEPT_12_TRX, P.AUG_12_TRX, P.JULY_12_TRX, P.JUNE_12_TRX, P.MAY_12_TRX, P.APR_12_TRX, P.MAR_12_TRX, P.FEB_12_TRX, (P.JAN_13_TRX+P.DEC_12_TRX+P.NOV_12_TRX+P.OCT_12_TRX+P.SEPT_12_TRX+P.AUG_12_TRX+P.JULY_12_TRX+P.JUNE_12_TRX+P.MAY_12_TRX+P.APR_12_TRX+P.MAR_12_TRX+P.FEB_12_TRX) AS ROLLING_12 INTO ESTROGEL_WITH_ROLLING_12
FROM Ascend_presc_data AS P INNER JOIN Ascend_demo AS D ON P.REGISTRATION_NUMBER = D.REGISTRATION_NUMBER
WHERE (((P.DATA_INDICATOR)=1) AND ((P.PRODUCT_NAME)='ESTROGEL'))
(CASE 
WHEN P.ROLLING_12 > 199 THEN 10
WHEN P.ROLLING_12 > 99 THEN 9
WHEN P.ROLLING_12 > 49 THEN 8
WHEN P.ROLLING_12 > 19 THEN 7
WHEN P.ROLLING_12 > 9 THEN 6
WHEN P.ROLLING_12 > 4 THEN 5
WHEN P.ROLLING_12 = 4 THEN 4
WHEN P.ROLLING_12 = 3 THEN 3
WHEN P.ROLLING_12 = 2 THEN 2
WHEN P.ROLLING_12 = 1 THEN 1
ELSE 0
END) AS CATEGORY; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:07:56.443

CASE 在 MS Access 中不可用，请查看 Switch、IIF 或更好的值，这是一个可以连接或比较的匹配值查找表。

开关：[http ://www.techonthenet.com/access/functions/advanced/switch.php](http://www.techonthenet.com/access/functions/advanced/switch.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:09:59.130

```
 SELECT 
      P.REGISTRATION_NUMBER, 
      ...
   FROM 
      Ascend_presc_data AS P 
      ...
   WHERE (((P.DATA_INDICATOR)=1) AND ((P.PRODUCT_NAME)='ESTROGEL'))
      AND <<MISSING STATEMENT>> =
        (SWITCH
        P.ROLLING_12 > 199,10
        P.ROLLING_12 > 99, 9
        P.ROLLING_12 > 49, 8
        P.ROLLING_12 > 19, 7
        P.ROLLING_12 > 9, 6
        P.ROLLING_12 > 4, 5
        P.ROLLING_12 = 4, 4
        P.ROLLING_12 = 3, 3
        P.ROLLING_12 = 2, 2
        P.ROLLING_12 = 1, 1
        END)); 
```

# quickbooks - 当我查询客户时，没有从 Quickbooks Online 获得任何地址 ID

> ID：15687865
> 
> 赞同：0
> 
> 时间：2013-03-28T17:03:12.677
> 
> 标签：quickbooks, quickbooks-online

当我查询客户时，我会返回一个包含所有信息的客户对象。属性之一是地址。这包含客户的帐单和送货地址。但是，每个地址的 id 字段始终为空。我想知道如何在没有 id 的情况下将更新推送回 QBO？如果没有某种密钥，QBO 怎么知道我要更改哪个地址？我的目标是能够查询 QBO 并获取自指定日期以来已更改的所有客户和地址。我为客户做了所有这些工作，但需要为地址做同样的事情。我假设当 QBO 中的地址发生更改时，它会为该客户记录设置修改后的时间戳。谁能告诉我如何管理客户的地址并能够将更新推送回 QBO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:08:12.787

在更新地址时尝试使用标签（账单/送货）属性。我已经测试过了，它工作正常。

您之前提到您将地址的 id 字段设置为空。这是因为，devkit 同时适用于 - QBO 和 QBD。QBD 返回有效的元素 ID，但 QBO 不返回。因此，对于 QBO，Devkit 显示 null 代替元素 id（在您的情况下 - 地址的 id）。

您可以使用 api explorer ( [http://developer.intuit.com/apiexplorer](http://developer.intuit.com/apiexplorer) ) 测试所有这些。希望它能解决你的问题。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:18:12.513

'每个地址的 id 字段始终为空' - 这行对我来说不是很清楚。您是说客户实体的 id 吗？请解释一下。您可以从以下链接检查 QBO-Customer 对象的文档和示例更新请求 xml - [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Customer](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Customer)。对于测试，您可以使用 api-explorer。链接 - developer.intuit.com/apiexplorer

谢谢玛纳斯

# javascript - 将时区偏移小时数转换为时区偏移（军事？）小时

> ID：15687872
> 
> 赞同：1
> 
> 时间：2013-03-28T17:03:35.707
> 
> 标签：javascript, jquery, wordpress, jquery-ui

我正在使用 WordPress 和 jQuery Timepicker。

Wordpress 以小时为单位给出时区偏移量：如 +2 或 -3.5

jQuery Timepicker 在军用时间进行偏移：+0200 或 -0330

我目前正在使用这样的东西：

```
gmt_offset = -4;
hrs_offset = gmt_offset.replace('-', '-0') + "00";

= -0400 
```

但是，如果偏移量不是单个负数，那将会中断。

```
gmt_offset = -3.5;
hrs_offset = gmt_offset.replace('-', '-0') + "00";

= -03.500  //No good...

need: -0330 
```

确认！有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:12:32.443

使用 将偏移量分成两部分`.split(".")`。

如果小时部分小于 10，则给它一个“0”。如果它最初是负数，则附加一个负号。

```
var negative = hour < 0 ? true : false;
hour = Math.abs(hour) < 10 ? "0" + Math.abs(hour) : Math.abs(hour);
hour = negative ? "-" + hour : "+" + hour; 
```

要计算分钟部分，请将其乘以 6。

```
(time[1]*6).toString() 
```

这是最终的功能：

```
function convertOffset(gmt_offset) {
    var time = gmt_offset.toString().split(".");
    var hour = parseInt(time[0]);
    var negative = hour < 0 ? true : false;
    hour = Math.abs(hour) < 10 ? "0" + Math.abs(hour) : Math.abs(hour);
    hour = negative ? "-" + hour : "+" + hour;
    return time[1] ? hour+(time[1]*6).toString() : hour + "00";
}
document.write(convertOffset(-3.5)); 
```

见[演示](http://jsbin.com/uzikes/5/edit)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:33:34.110

```
function convert(gmt_offset) {
     var sign ="+";
     if(gmt_offset < 0) {
         sign="-";
         gmt_offset *= -1;
     }
     var hours = "0"+Math.floor(gmt_offset).toString();
     var minutes = "0"+(Math.round(gmt_offset % 1 * 60)).toString();
     return sign + hours.substr(hours.length - 2) + minutes.substr(minutes.length - 2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:45:14.240

这是一个非常紧凑的版本：

```
function militaryGMTOffsetFromNumeric(offset) {
   var dt = new Date(
      Math.abs(offset) * 3600000 + new Date(2000, 0).getTime()
   ).toTimeString();
   return (offset < 0 ? '-' : '+') + dt.substr(0,2) + dt.substr(3,2);
} 
```

例如，`militaryGMTOffsetFromNumeric(-3.5)`返回`-0330`.

# java - 使用字符串数组将文件名分配给 ImageIcons (Java)

> ID：15687874
> 
> 赞同：1
> 
> 时间：2013-03-28T17:03:48.830
> 
> 标签：java, swing, jbutton, imageicon, absolutelayout

嗨，我在尝试使用数组读取要分配给图像图标数组的图像文件名时遇到问题。它编译得很好，但是当我启动应用程序时，图像似乎没有出现。谁能看到我在这里所做的事情有问题？如果您觉得有必要批评程序中的任何其他内容，我愿意接受建议。提前致谢！

```
public class PokerStats extends JFrame
{
    private static final String [] names = {"First Name","Surname","Nickname",
                                            "Address1","Address2","Address3",
                                            "Nationality","Hands Played",
                                            "Hands Won","Total $ Won","Age"};

    private static final String [] imageNames = {"continue1.png","continue2.png",
                                                 "store1.png","store2.png",
                                                 "reset1.png","reset2.png",
                                                 "exit1.png","exit2.png"};

    private static final JLabel [] labels = new JLabel [names.length];
    private static final JTextField [] textFields = new JTextField [names.length];
    private static final JButton [] buttons = new JButton [4];
    private static final ImageIcon [] icons = new ImageIcon [imageNames.length];

    private static final Image img = new ImageIcon("poker.jpg").getImage();
    private static final Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));

    private static final Font f3= new Font("Bell MT",Font.PLAIN,16);

    private static final JButton button1 = new JButton (icons[3]);
    private static final JButton button2 = new JButton (icons[5]);
    private static final JButton button3 = new JButton(icons[6]);
    private static final JButton button4 = new JButton(icons[0]);

    public PokerStats() //creates a default constructor
    {
        setLayout
        (
            new FlowLayout()
        );
    }

    public PokerStats (String title) // single argument constructor
    {

        super(title); //calls on the superclass "JFrame" and sets the frame title
                      //as the string passed in from the main method

        JPanel background = new JPanel() //creates a JPanel called background
         {
            public void paintComponent(Graphics g) //overrides Jpanel Graphics to set a custom background
            {
               setPreferredSize(size);
               setSize(size);
               setLayout(null);
               g.drawImage(img, 0, 0, null);
            }
         };

            for(int count=0; count<names.length; count++) // loop used to create labels and textFields
             {
                //creates JLables and sets their attributes
                labels[count] = new JLabel(names[count]);
                labels[count].setVisible(false);
                labels[count].setForeground(Color.WHITE);
                labels[count].setFont(f3);
                background.add(labels[count]);

                //creates JTextFields and adds them to the panel
                textFields[count] = new JTextField("");
                textFields[count].setVisible(false);
                background.add(textFields[count]);
            }

            for(int count=0; count<imageNames.length; count++) // loop used to create labels and textFields
             {
                        //creates JLables and sets their attributes
                        icons[count] = new ImageIcon(imageNames[count]);

             }

        background.setLayout (null);

        button1.setToolTipText("Submit Details");
        button1.setRolloverIcon(icons[2]);
        button1.setVisible(false);
        button1.setBackground(Color.BLACK);
        button1.setBorder(null);

        button2.setToolTipText("Refresh Fields");
        button2.setVisible(false);
        button2.setRolloverIcon(icons[4]);
        button2.setBackground(Color.BLACK);
        button2.setBorder(null);
        button2.setOpaque(true);

        button3.setToolTipText("Exit Program");
        button3.setRolloverIcon(icons[7]);
        button3.setVisible(true);
        button3.setBorder(null);
        button3.setBackground(Color.BLACK);

        button4.setToolTipText("Continue");
        button4.setVisible(true);
        button4.setOpaque(true);
        button4.setBackground(Color.BLACK);
        button4.setBorder(null);
        button4.setRolloverIcon(icons[1]);

        button1.setBounds(540,440,95,40);
        button2.setBounds(650,440,95,40);
        button3.setBounds(955,577,59,59);
        button4.setBounds(420,490,210,70);

        labels[0].setBounds(220,240,110,20);
        labels[1].setBounds(220,280,110,20);
        labels[2].setBounds(220,320,110,20);
        labels[3].setBounds(220,360,110,20);
        labels[4].setBounds(220,400,110,20);
        labels[5].setBounds(220,440,110,20);
        labels[6].setBounds(540,240,110,20);
        labels[7].setBounds(540,280,110,20);
        labels[8].setBounds(540,320,110,20);
        labels[9].setBounds(540,360,110,20);
        labels[10].setBounds(540,400,110,20);

        textFields[0].setBounds(320,240,180,20);
        textFields[1].setBounds(320,280,180,20);
        textFields[2].setBounds(320,320,180,20);
        textFields[3].setBounds(320,360,180,20);
        textFields[4].setBounds(320,400,180,20);
        textFields[5].setBounds(320,440,180,20);
        textFields[6].setBounds(660,240,150,20);
        textFields[7].setBounds(660,280,110,20);
        textFields[8].setBounds(660,320,110,20);
        textFields[9].setBounds(660,360,110,20);
        textFields[10].setBounds(590,400,40,20);

        background.add(button1);
        background.add(button2);
        background.add(button3);
        background.add(button4);

        getContentPane().add(background);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

     button1.addActionListener
     (
        new ActionListener () //anonymous inner class
        {
            public void actionPerformed (ActionEvent e)
            {
                String output;

                output = textFields[0].getText() + "   " + textFields[1].getText() + "   " + textFields[2].getText() + "   " +
                         textFields[3].getText() + "   " + textFields[4].getText() + "   " + textFields[5].getText() + "   " +
                         textFields[6].getText() + "   " + textFields[7].getText() + "   " + textFields[8].getText() + "   " +
                         textFields[9].getText() + "   " + textFields[10].getText();

                try
                 {
                      BufferedWriter out = new BufferedWriter(new FileWriter("PlayerData.txt", true));

                        out.write(output);

                        out.newLine();

                        out.close();

                        JOptionPane.showMessageDialog(null, "Your Details Have Been Stored Sucessfully");

                        resetFields();
                 }

                catch(IOException e2) // Exception Handler

                 {
                        JOptionPane.showMessageDialog(null, "There has been an error writing to file");
                 }

            }//ends ActionEvent

        } //ends ActionListener

     ); //ends anonymous inner class

    button2.addActionListener
    (
        new ActionListener() //anonymous inner class
        {
            public void actionPerformed(ActionEvent e)
            {

                resetFields(); //calls resetFields method to clear TextFields

            }
        }
     ); //ends anonymous inner class

    button3.addActionListener
     (
         new ActionListener () //anonymous inner class
         {
            public void actionPerformed (ActionEvent e)
            {
                System.exit(0);
                setVisible(false);
            }
         }
     );//ends anonymous inner class

    button4.addActionListener
     (
         new ActionListener() //anonymous inner class
         {
            public void actionPerformed(ActionEvent e)
            {
                for(int count=0; count<names.length; count++)
                 {
                            labels[count].setVisible(true);
                            textFields[count].setVisible(true);
                 }

                button1.setVisible(true);
                button2.setVisible(true);
                button4.setVisible(false);
            }
         }
     ); //ends anonymous inner class

   }//end single argument constructor

    public void resetFields () //a method used to reset the textFields to an empty state
    {
        for(int count=0; count<names.length; count++)
            {
                textFields[count].setText(""); //all textFields are cleared through the for loop
            }
    }//ends resetFields method

}//end of PokerStats class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:18:26.623

您是否尝试过为图像使用完整路径？问题很可能是您提供的单个文件名（“continue1.png”、“continue2.png”等）不是该类的可用资源。如果完整路径有效，那么您可能会找到正确的相对路径（“images/continue1.png”等）。

目前的期望是这些图像与您的课程位于同一个构建文件夹中，这是不正常的。如果您正在构建一个 war 文件（或其他类型的存档），而不仅仅是使用简单的 java 执行，请记住图像可能不在您期望的位置，您应该检查构建的 war 文件。

# .net - 想要使用 microsoft.office.interop 将 pptx 或 docx 转换为 pdf，我应该包含哪些文件以进行分发？

> ID：15687875
> 
> 赞同：0
> 
> 时间：2013-03-28T17:03:50.237
> 
> 标签：.net, vb.net, pdf, office-interop

这是一个简单的问题。

1.  我制作了一个 VB.Net (framework4.0) 软件，用于将 pptx 和 docx 文件转换为 PDF 文件。

2.  它使用 Microsoft.Office.Interop.PowerPoint 和 Word 来转换文件。

3.  我想将此软件分发给一个封闭的小组。

4.  但是，当人们运行该程序时，它不起作用。它崩溃了。

5.  我认为我没有包含正确的 DLL 文件。（我已经包含了 Microsoft.Office.Interop.PowerPoint.dll 文件）

另外，我想让这个程序在没有 Microsoft Office 的计算机上可执行。是否可以在没有 Office 的计算机上使用 Office.Interop？

那么，我应该包含哪些 DLL 文件以进行分发？

还是有其他问题？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:41:03.310

正如 Prahlad 所指出的，您不能在没有安装 Office 的情况下使用 Office.Interop。Office.Interop 只是您的 .Net 类型使用 Office 的 COM 类型的桥梁

# android - 无法在 Android 项目中使用 Jar 文件

> ID：15687876
> 
> 赞同：2
> 
> 时间：2013-03-28T17:03:51.083
> 
> 标签：android, eclipse, jar

我正在尝试在我的 Android 项目中使用外部 jar 文件，我按照以下步骤将其包含在内：

*   我把jar文件放在libs中。
*   我配置了构建路径，现在我可以在项目的 Referenced Libraries 部分看到 jar 文件。
*   我使用导入将我需要的类带入程序中。

但我总是得到 NoClassDefFoundError。这个 jar 已经可以与经典的 java 程序一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:27:08.760

确保 jar 是使用应用程序构建的。在日食中，

`right click on project --> build path --> configure build path.`

确保在 Order and Export 选项卡中检查了库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:56:49.990

由于 Android SDK 17 甚至不需要手动将 jar 文件添加到 buildpath，因为它们是自动添加的，如此[处](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)所述。那我建议：

*   从构建路径中删除库
*   清理项目
*   确保 jar 文件位于项目根文件夹中名为`libs`(not ) 的文件夹中`lib`
*   刷新项目
*   运行项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:42:52.887

找到的解决方案是使用java版本6重新编译库并使用获取的jar失败

# java - 问题从 GUI 更改 ArrayList 中的值

> ID：15687880
> 
> 赞同：0
> 
> 时间：2013-03-28T17:04:03.740
> 
> 标签：java, swing, arraylist, defaultlistmodel, listselectionlistener

我有一个名为 conditionList 的 ArrayList，它存储条件名称。每当添加/编辑或删除一个时，我的 GUI 上的列表更新没有问题。

您可以在下面看到我使用 2 个模型……一个名为 condListModel 的 DefaultListModel 和一个名为 conditionModel 的 DefaultComboBoxModel。

我下面的代码是用于方法 editCondition()，在这个阶段文本已经在 GUI 上更改并且正在这里提交。在我的 GUI 上，在我提交更改后，ComboBox 和 JList 更改没有问题，所以我确定模型更改是正确的。

但是我的问题是：当我通过序列化保存 ArrayList conditionList，然后重新加载它时，更改就消失了。所以我认为我的代码在更改 ArrayList（命名条件列表）中的字符串值时存在问题，任何人都可以看看你是否注意到问题

```
String conString = jListCondition.getSelectedValue().toString(); 

    for(String c: conditionList)
    {
        if(conString.compareTo(c) == 0)
        {
            String temp = entConName.getText();
            c = temp;
            //edit the Condition jList model
            int x = condListModel.indexOf(conString);
            condListModel.setElementAt(temp, x);
            jListCondition.setModel(condListModel);
            //edit the Condition comboBox model
            int i = conditionModel.getIndexOf(conString);
            conditionModel.insertElementAt(temp, i);
            conditionModel.removeElement(conString);
            entCondition.setModel(conditionModel);

            //reset buttons
            editConConfirm.setEnabled(false);
            editCon.setEnabled(false);
            deleteCon.setEnabled(false);
            entConName.setText("");
            addCon.setEnabled(true);
        }
    } 
```

# meteor - IE8 和 9 中的空白页

> ID：15687882
> 
> 赞同：2
> 
> 时间：2013-03-28T17:04:04.560
> 
> 标签：meteor, meteorite

我最近建立并启动了这个页面：[http ://www.thaiestatenetwork.com](http://www.thaiestatenetwork.com)

它在 Chrome、Safari、Firefox 甚至 IE10 中运行良好，但在 IE8 和 9 中我得到的只是一个空白页面。

我已经阅读了关于类似问题的关于 SO 的帖子，并基于此我已经尝试过：

*   检查我的模板以试图找到 DOM 错误。
*   尝试设置位置：html和正文上的静态
*   在我的 CSS 中注释掉了 @font-face（因为我在 BrowserStack 上的 IE 中遇到与 @font-face 相关的错误）
*   检查潜在的 CORS 问题。没有找到。

它都不起作用。

奇怪的是，当我通过 BrowserStack 连接到本地开发机器时，一切都像魅力一样。

我应该补充一点，该站点是使用路由器[https://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)构建的，并使用此构建包在 Heroku 上运行：[https ://github.com/oortcloud/heroku-buildpack-meteorite](https://github.com/oortcloud/heroku-buildpack-meteorite)

我真的希望外面有人有一双新鲜的眼睛，可以带领我走上正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:37:33.023

我已经解决了！

事实证明，这个问题与我初始化 Google Analytics (GA) 的方式有关。我正在这样做：

```
Template.menu.created = function() {
  // GA initialization code here
}; 
```

我不得不这样做：

```
Template.menu.rendered = function() {
  if ( typeof ga === 'undefined' ) {
    // GA initialization code here
  }
}; 
```

所以基本上我试图在第一次创建我的菜单模板时初始化 GA，但是我不得不锁定`rendered`回调并添加一个条件以确保我只初始化 GA 一次。

总的来说，我对初始化 GA 的方法并不感到兴奋，但这完全是另一回事。有用。

# ios - Xcode 4.6 自动授权不起作用 - “没有有效的 aps 环境”

> ID：15687887
> 
> 赞同：2
> 
> 时间：2013-03-28T17:04:39.073
> 
> 标签：ios, push, token, xcode4.6

我收到了著名的错误：
*无法获取令牌，错误：错误域 = NSCocoaErrorDomain 代码 = 3000“没有为应用程序找到有效的 'aps-environment' 授权字符串” UserInfo=0x413be0 {NSLocalizedDescription=no valid 'aps-environment' 授权为应用程序找到的字符串}*

**我可以**通过编辑以下文件来修复它：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/Entitlements.plist 
```

并像这样手动添加 aps-environment 键：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>application-identifier</key>
    <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
    <key>aps-environment</key>
    <string>development</string>
    <key>keychain-access-groups</key>
    <array>
        <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
    </array>
</dict>
</plist> 
```

然后，Xcode 正在生成正确的 Xcent 文件，其中包含 aps-environment 键：

```
/Users/mySelf/Library/Developer/Xcode/DerivedData/myApp-buauvgusocvjyjcwdtpewdzycfmc/Build/Intermediates/myApp.build/Debug-iphoneos/myApp.build/myApp.xcent 
```

并且在 iPhone 上运行 App 能够产生设备令牌进行推送。
这是我发现解决问题的唯一方法。
（如果遇到此错误，您可以使用此信息进行自己的故障排除）

现在，我在另一台笔记本电脑上运行相同的项目（与 git 同步），
使用相同的 Xcode 版本 4.6。**该笔记本电脑不会出现**
此问题。 两台机器上的项目设置/配置文件等都是 100% 相同的。 （请相信我这个）

 **有人在 Xcode 4.6 中遇到过这样的问题吗？
我可能也应该在 Apple 的支持下开一张票。

只是想知道是否有另一个更优雅的解决方案可用。

## 更新：

上述修复仅适用于开发阶段，但不适用于发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T02:28:52.817

覆盖默认 Entitlements.plist 的更优雅的解决方案是复制您已编辑的默认 Entitlements.plist，并将其放入您的项目中。

然后，为您遇到问题的任何目标构建设置代码签名权利（在这种情况下，我已将其设置为调试）。

![http://i.stack.imgur.com/mph9t.png](../Images/aa9d3a21db378932674ff7e57197ac90.png)

这应该使用这个 plist 文件进行调试构建（即当简单地按下运行时），您的设备将注册到 APNs 开发服务器**

# c - OpenCL for 循环给出 CL_OUT_OF_RESOURCES

> ID：15687888
> 
> 赞同：0
> 
> 时间：2013-03-28T17:04:44.010
> 
> 标签：c, opencl

所以我目前正在传递 2 个 GPULevel，我希望内核获取它们中的每一个，然后如果在有的数组中，`levels`我`arr1`想检查值是否 >= 0 以及它是否改变了值。

我的原始代码内核代码是这样的：

```
typedef struct GPULevelDef
{
    int nInput, nOutput;
    float arr1[100];
    float arr2[100];
}GPULevel;

__kernel void levelComposition(__global GPULevel *lLevels, __global GPULevel *oLevels, __global int *LCount)
{
    int lIndex = get_global_id(1);
    int wIndex = get_global_id(0);
    int wCount = 0;
    if(lIndex < LCount)
    {
        wCount = lLevels[lIndex].nInput*lLevels[lIndex].nOutput;
        if(wIndex < wCount)
        {
            if(lLevels[lIndex].arr1[wIndex] >= 0)
            {
                oLevels[lIndex].arr1[wIndex] = (lLevels[lIndex].arr1[wIndex]) + 350;
            }
        }
    }
} 
```

但是，它会给我带来非常奇怪的结果，因为返回的第一个 GPULevel 是正确的，而第二个返回的只有 nInput 作为正确的值，其余的都是错误的。

这是我真正想要在内核方面做的事情，但是一旦我添加一个 for 循环，我就会得到一个返回的 CL_OUT_OF_RESOURCES，即使我出于实验原因将它剥离并只添加一个。

所需内核：

```
typedef struct GPULevelDef
{
    int nInput, nOutput;
    float arr1[100];
    float arr2[100];
}GPULevel;

__kernel void levelComposition(__global GPULevel *lLevels, __global GPULevel *oLevels, __global int *lCount )
{
    for(int lIndex = get_global_id(0); lIndex < lCount; lIndex++)
    {
        int wCount = lLevels[lIndex].nInput*lLevels[lIndex].nOutput;
        for(int wIndex = get_global_id(0); wIndex < wCount; wIndex++)
        {
            if(lLevels[lIndex].arr1[wIndex] >= 0)
            {
                oLevels[lIndex].arr1[wIndex] = (lLevels[lIndex].arr1[wIndex]) + 350;
            }
        }
    }
} 
```

以下是重要的主机代码：

```
GPULevel* levelIn = (GPULevel*)malloc(sizeof(GPULevel)*levelCount);
GPULevel* levelOut = (GPULevel*)malloc(sizeof(GPULevel)*levelCount);

size_t dataSize = sizeof(GPULevel)*levelCount;
layerBuffer = clCreateBuffer(gpu.context,CL_MEM_READ_ONLY,dataSize,NULL,&err);
err = clEnqueueWriteBuffer(queue,layerBuffer,CL_TRUE,0,dataSize,(void*)layerIn,0,NULL,NULL);
cl_mem bufferB = clCreateBuffer(gpu.context,CL_MEM_WRITE_ONLY,dataSize,NULL,&err);
err = clEnqueueWriteBuffer(queue,bufferB,CL_TRUE,0,dataSize,(void*)layerOut,0,NULL,NULL);

GPULayer* val1 = (GPULevel*)calloc(sizeof(levelIn), sizeof(GPULevel));
GPULayer* val2 = (GPULevel*)calloc(sizeof(levelOut), sizeof(GPULevel));
err = clEnqueueReadBuffer(queue, layerBuffer, CL_TRUE, 0, dataSize, val1, 0, NULL, NULL);
err = clEnqueueReadBuffer(queue, bufferB, CL_TRUE, 0, dataSize, val2, 0, NULL, NULL); 
```

总结一下：我使用了第一个内核，因为我认为这会给我想要的结果，因为我的印象是它是一个并行实现。我确实觉得奇怪的是 get_global_id() 对于 lIndex 确实需要为 1，对于 wIndex 需要为 0 才能使其正常工作（否则它会再次对两者产生错误的结果）。因此，当这个原始内核在第二层出现问题时，我创建了第二个内核。在第二个内核中，这正是我想要实现的，但由于某种原因，for 循环的引入会导致 CL_OUT_OF_RESOURCES 错误（-5）。我需要知道我应该使用和坚持使用哪个内核以及如何获得我想要的

谢谢

不确定这张图是否也有帮助

```
levels[0]
    nInput = 2
    nOutput = 5
    arr1  [0] = 2
     arr1 [1] = 7
     arr1 [...] = -32
     arr1 [n] = -1
    arr2  [0] = 3
     arr2 [1] = -2
     arr2 [...] = 5
     arr2 [n] = -3

levels[1]
    nInput = 5
    nOutput = 1
    arr1  [0] = 3
     arr1 [1] = 7
     arr1 [...] = 72
     arr1 [n] = -1
    arr2  [0] = 5
     arr2 [1] = -2
     arr2 [...] = 1
     arr2 [n] = -1

  Parallel           Parallel

              ------->oLevels[0].arr1[0] =lLevels[0].arr1[0] +350
   lLevels[0] ------->oLevels[0].arr1[1] =lLevels[0].arr1[1] +350
              ------->oLevels[0].arr1[...] NOTHING
              ------->oLevels[0].arr1[n] NOTHING

              ------->oLevels[1].arr1[0] =lLevels[0].arr1[0] +350
   lLevels[1] ------->oLevels[1].arr1[1] =lLevels[0].arr1[1] +350
              ------->oLevels[1].arr1[...] =lLevels[0].arr1[...] +350
              ------->oLevels[1].arr1[n] NOTHING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:14:03.457

`LCount`是一个指向 int 的指针，您将它用作整数。您的循环可能超出范围。

`CL_OUT_OF_RESOURCES`通常表示超出范围的寻址。

您的 OpenCL 编译器应该发出警告。您可能需要检查**clGetProgramBuildInfo(...,CL_PROGRAM_BUILD_LOG,...)**返回的字符串。

# python - 如何实现两个表中的每条记录都有不同的id？

> ID：15687891
> 
> 赞同：0
> 
> 时间：2013-03-28T17:04:51.227
> 
> 标签：python, python-2.7, sqlalchemy

我有两个从基表继承的表（SQLALCHEMY 模型）

```
class Base(object):
    def __tablename__(self):
        return self.__name__.lower()

    id = Column(Integer, primary_key=True, nullable=False)
    utc_time = Column(Integer, default=utc_time(), onupdate=utc_time())
    datetime = Column(TIMESTAMP, server_default=func.now(), onupdate=func.current_timestamp()) 
```

和继承的表`Person`以及`Data` 如何实现每个人和数据都有不同的id，每个id对于两个表都是唯一的？（生成 id 时要知道数据 id 的人，反之亦然）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:39:15.913

如果您使用的是 Postgresql、Firebird 或 Oracle，请使用独立于两个表的序列来生成主键值。否则，您需要滚动一些手动过程，例如“id”表或类似的东西 - 这可能很难以原子方式执行。

基本上，如果我遇到这个问题，我会问为什么两个表需要这样的唯一主键值 - 如果主键是一个自动递增的整数，那表明它没有意义。它的唯一目的是为单个表提供唯一键。

# javascript - 如何将圆圈附加到svg文件？

> ID：15687893
> 
> 赞同：1
> 
> 时间：2013-03-28T17:04:54.430
> 
> 标签：javascript, svg

我在 html 文件中嵌入了一个单独的 svg 文件，我想通过 javascript 向该 svg 添加一个圆圈。以下是我现在拥有的：

```
var mySvg=document.getElementById("SVGDoc");
var svgDom=mySvg.getSVGDocument();

.....

<object id="SVGDoc" type="image/svg+xml" data="3rdFloorVersion2.svg"></object> 
```

`svgDom`但据我所知，这个对象没有 append() 方法。有谁知道如何解决这个问题？我知道有一个解决方案需要在 html 文件中复制 svg 内容，但我想将它们分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:39:35.207

```
var circle = svgDom.createElementNS("http://www.w3.org/2000/svg", "circle");
circle.setAttribute("r", "10");
// etc for x, y 
svgDom.documentElement.appendChild(circle); 
```

请注意，您只能在`<object>`标签的 onload 事件触发后调用 mySvg.getSVGDocument() ，因此您需要执行以下操作：

```
<object id="SVGDoc" onload="go()"...></object>

<script>
function go() {
    var mySvg=document.getElementById("SVGDoc");
    var svgDom=mySvg.getSVGDocument();
    ...
}

</script> 
```

# web-services - 支持浏览器和 REST 客户端的相同 REST 端点

> ID：15687896
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:04:59.713
> 
> 标签：web-services, rest, jakarta-ee, web-applications

我们的团队目前正在考虑为新的网络监控系统开发接口。我们将支持从以下位置访问系统：

1.  网络浏览器（基于 Javascript/HTML5）

2.  任何 REST 客户端（可以是命令行 REST shell 或其他更高级别的系统，例如：做混搭）。

我们正在考虑在服务器端（基于 Java EE）提供相同的 REST 端点来支持这两种类型的客户端。这是因为，我们认为浏览器在某种意义上也是一个 REST 客户端。而且因为我们认为它将避免服务器端的任何重复。而且我们的工程师数量不足（毕竟这可能是件好事！）。

我们将使用 Ajax 在浏览器上进行异步请求/响应处理。我们认为任何其他 REST 客户端都需要处理它想要的任何异步。

1）这几天通常是这样做的吗？

2）不管有没有其他考虑，这是一个好方法吗？还是在做出此决定之前需要考虑任何其他方面？

3）我认为这意味着我们将仅从服务器以 JSON 格式发送所有响应，并且仅进行客户端渲染。对 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:56:34.067

哟是对的！这是我的看法：

```
1) Is this how it is usually done these days ? 
```

是的。大多数 REST Api 都建立在相同的服务器端 API 上。该 API 向客户端提供信息，无论客户端是什么，都必须是浏览器或命令行调用。

您可以查看免费的[Apigee 电子书](http://apigee.com/about/api-best-practices/all/ebook)，尤其是[这本](http://apigee.com/about/content/web-api-design)，以获取有关如何构建强大的 Restful api 的更多信息。

```
2) Is this a good approach, regardless of any other consideration? Or does one need to consider any other aspect, before making this decision ? 
```

我认为是最好的方法，你有一个 api 来管理你对客户的服务。

```
3) I think this implies that we are to send all responses as JSON only from the server and do client-side rendering only. Right ? 
```

对。一些 javascript 框架，如[AngularJS](http://angularjs.org/)，仅使用来自 Rest Client 的 JSON 响应在浏览器上进行所有渲染。您也可以使用 JQuery 来完成。

# css - 精确点击重叠 div

> ID：15687897
> 
> 赞同：0
> 
> 时间：2013-03-28T17:05:06.183
> 
> 标签：css, html, trim, clicking

如果标题解释得不够好，我很抱歉，但这是我能想到的最好的标题来代表我的问题。

所以我有两个div：

```
.div-arrow
{
    position: absolute;
    float: left;
    cursor: pointer;
    display:block;
    width: 136px;
    height: 54px;
    vertical-align: middle;
    border-radius: 4px;
    background: url(ImagePathHere) no-repeat scroll 0px 0px transparent;
    zoom: 50%;
}

.div-diamond
{
    position: absolute;
    float: left;
    cursor: pointer;
    display: block;
    width: 83px;
    height: 54px;
    vertical-align: middle;
    border-radius: 4px;
    background: url(ImagePathHere) no-repeat scroll -272px 0px transparent;
    zoom: 50%;
} 
```

我用它们来制作这样的布局：http: [//i.stack.imgur.com/htFRd.png](http://i.stack.imgur.com/htFRd.png)

单击红色标记所在的位置将激活绿色菱形，而不是看起来像您单击的菱形。我想知道如何修剪图像/ div 的那些看不见的部分，以便您实际单击看起来像在单击的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:09:49.860

网页上的所有元素本质上都是块 - 所以尽管您可以创建圆形或菱形等外观，但它实际上仍然是一个四面块元素。

对于您的问题，您可以考虑使用图像映射：

[http://www.w3.org/TR/html401/struct/objects.html](http://www.w3.org/TR/html401/struct/objects.html)

或者可能使用 HTML5 CANVAS 方法：

[https://developer.mozilla.org/en-US/docs/HTML/Canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas)

# javascript - jPlayer 播放列表标题元素

> ID：15687899
> 
> 赞同：1
> 
> 时间：2013-03-28T17:05:11.970
> 
> 标签：javascript, jquery, jplayer

我见过类似的问题，但没有解决方案。我让 jPlayer 工作得很好，除了一件事......在“播放列表”模式下，标题元素设置为`display:none`. 构造函数中是否有设置来覆盖它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:05:43.130

一种解决方案是使用 jQuery 侦听器并在播放时以编程方式添加标题...

```
$("#music").bind($.jPlayer.event.play, function(event)
{
    $.each(player.playlist, function(index, song)
    {
        if(index == player.current)
        {
            $(".songTitle").html(song.title);
        }
    });
}); 
```

#music 是您最初附加 jplayer 的 div 并且 .songTitle 是您希望显示标题的元素的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-07T14:40:52.580

您可以通过添加“重要”来强制 css 显示标题项，如下所示：

```
div.jp-details {
    display: block !important;
} 
```

# maven - 如何启用 jetty-maven-plugin 8 服务器调试输出？

> ID：15687902
> 
> 赞同：0
> 
> 时间：2013-03-28T17:05:21.340
> 
> 标签：maven, slf4j, maven-jetty-plugin

我正在尝试将我们的码头从 7 升级到 8，以便我们可以利用 servlet 3.0。从 7 到 8 似乎没有进行任何设置或配置更改。以前我们一直在使用 jetty-maven-plugin 7.2.0.RC0 到 mvn jetty:run （以及 catalina 6.0.29、slf4j 1.5\. 9 和 servlet 2.5)。更新 jetty 时，我必须在插件中添加 slf4j、log4j 和 javax.servlet-api 依赖项，这样就不会出现 API 问题。catalina 依赖一直存在。现在是pom：

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.10.v20130312</version>
    <dependencies>
      <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-catalina</artifactId>
        <version>7.0.37</version>
        <scope>compile</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.2</version>
        <scope>compile</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.2</version>
        <scope>compile</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.7.2</version>
        <scope>compile</scope>
      </dependency>
      <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
        <scope>compile</scope>
      </dependency>
      <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>compile</scope>
      </dependency>
    </dependencies>
    <configuration>
      <webAppConfig>
        <contextPath>/widgets</contextPath>
        <baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection">
          <resourcesAsCSV>/Users/dwinsor/neo/neo-js/src/main/webapp,/Users/dwinsor/neo/neo-js/target/neo-js</resourcesAsCSV>
        </baseResource>
        <overrideDescriptor>/Users/dwinsor/neo/neo-js/target/generated-resources/xml/override-web-default.xml</overrideDescriptor>
      </webAppConfig>
      <contextHandlers>
        <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
          <war>/Users/dwinsor/neo/neo-js/target/dependency-wars/neo.war</war>
          <contextPath>/</contextPath>
          <tempDirectory>/Users/dwinsor/neo/neo-js/target/tmp-neo</tempDirectory>
        </contextHandler>
      </contextHandlers>
      <scanTargets>
        <scanTarget>src/main/resources</scanTarget>
        <scanTarget>src/main/webapp</scanTarget>
      </scanTargets>
      <jettyConfig>/Users/dwinsor/neo/neo-js/target/generated-resources/xml/jetty.xml</jettyConfig>
      <connectors>
        <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
        </connector>
        <connector implementation="org.eclipse.jetty.server.ssl.SslSocketConnector">
        </connector>
      </connectors>
    </configuration>
  </plugin> 
```

我的问题是我不再看到我期望看到的那种调试输出。在码头 7 中，当我执行 mvn jetty:run 时，我会看到类似

> org.mortbay.jetty.plugin.JettyServer@271bc503 已停止 +-SelectChannelConnector@0.0.0.0:8080 +-SslSocketConnector@0.0.0.0:8443 +-qtp62871287{8<=5<=8/254,0} +-HandlerCollection@ c237b89 已启动 +-ContextHandlerCollection@6d836598 已启动 | +-JettyWebAppContext@17043b2f@17043b2f/widgets,[file:/Users/dwinsor/previ ... ... [INFO] Started Jetty Server

然而，现在我看到的只是最后一行，[INFO] Started Jetty Server。我希望能够看到所有漂亮的 WebAppContext 输出。我已经尝试过 -Dorg.eclipse.jetty.util.log.DEBUG=true 和 -Dorg.eclipse.jetty.LEVEL=DEBUG，但无论如何我们之前都没有使用过这两种方法。如何启用此输出？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:11:18.133

问题出在 jetty 7.3.0 上，除非在 jetty.xml 中设置了某些属性，否则不再打印出所看到的调试输出：

`<Set name="dumpAfterStart">true</Set>`

`<Set name="dumpBeforeStop">true</Set>`

# c# - AJAX 和 Web Api 发布方法 - 它是如何工作的？

> ID：15687903
> 
> 赞同：25
> 
> 时间：2013-03-28T17:05:24.060
> 
> 标签：c#, jquery, ajax, asp.net-web-api

我正在尝试使用 AJAX / Jquery 和 c# 写入我的数据库。每当我将参数传递给 C# 代码时，它都会显示为 null。我正在使用 Visual Studio 在创建控制器类时生成的默认模板。任何帮助，将不胜感激！

注意：这是我试图调用的休息服务。（一个普通的 ASP 网站......不是 MVC。此外，GET Rest api 工作得很好。）

jQuery/AJAX：

```
var dataJSON = { "name": "test" }

$('#testPostMethod').bind("click", GeneralPost);
function GeneralPost() {
    $.ajax({
        type: 'POST',
        url: '../api/NewRecipe',
        data:JSON.stringify(dataJSON),
        contentType: 'application/json; charset=utf-8',
        dataType: 'json'
    });
} 
```

C＃

```
 //If I remove the [FromBody] Tag then when I click the button this method is never called.
    public void Post([FromBody]string name)

    {

    } 
```

编辑：

我已经稍微调整了我的代码，但仍然遇到同样的问题。回顾一下，它正在加载 POST 方法，但它传入的是 null。

C＃

```
 public class RecipeInformation
    {
        public string name { get; set; }

    }

        public void Post(RecipeInformation information)

        {

        } 
```

阿贾克斯：

```
 var dataJSON = { information: { name: "test" } };

    $('#testPostMethod').bind("click", GeneralPost);
    console.log(dataJSON);
    function GeneralPost() {
        $.ajax({
            type: 'POST',
            url: '../api/NewRecipe',
            data: dataJSON,
            contentType: 'application/json; charset=utf-8',
        });
    } 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-29T09:13:46.920

对于简单类型，在服务器端：

```
public void Post([FromBody]string name)
{
} 
```

在客户端，您只需定义是否要以 json 格式发送：

```
 var dataJSON = "test";

    $('#testPostMethod').bind("click", GeneralPost);
    function GeneralPost() {
        $.ajax({
            type: 'POST',
            url: '/api/NewRecipe',
            data: JSON.stringify(dataJSON),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json'
        });
    } 
```

如果要使其以复杂类型工作，则应从服务器端定义：

```
public class RecipeInformation
{
    public string name { get; set; }
}

public class ValuesController : ApiController
{
    public void Post(RecipeInformation information)
    {
    }
} 
```

从客户端：

```
 var dataJSON = { name: "test" };

    $('#testPostMethod').bind("click", GeneralPost);
    function GeneralPost() {
        $.ajax({
            type: 'POST',
            url: '/api/NewRecipe',
            data: JSON.stringify(dataJSON),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json'
        });
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:17:36.093

我假设您使用的是 ASP.NET WebAPI，它绑定了 URL 中的所有简单类型（int、bool、string 等）和正文中的所有复杂类型。当您用`FromBody`属性标记名称时，它会从请求正文而不是 url 映射绑定它。

您可以在此处阅读有关 ASP.NET WebAPI 路由和参数绑定的更多信息：

*   [在 www.asp.net](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)
*   [在 www.west-wind.com](http://www.west-wind.com/weblog/posts/2012/Mar/21/ASPNET-Web-API-and-Simple-Value-Parameters-from-POSTed-data)
*   在[MSDN上](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:50:55.563

您可以尝试做这样的事情并使用 jquery param 方法

```
 var postData = {
        name : 'name'
    }

    $('#testPostMethod').bind("click", GeneralPost);
    function GeneralPost() {
        $.ajax({
            type: 'POST',
            url: '../api/NewRecipe',
            data: $.param(postData,true),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json'
        });
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T21:05:33.710

您缺少的一部分是数据合同属性如果您将课程设置为：

```
[DataContract]
public class RecipeInformation
{
    [DataMember]
    public string name { get; set; }
} 
```

这些属性可以在 System.Runtime.Serialization 中找到，Json 解析器 (Json.NET) 使用它们来（帮助）反序列化模型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T22:26:02.397

API 控制器中的绑定有点奇怪。我相信：

```
public void Post([FromBody]RecipeInformation information) 
```

和

```
var dataJSON = { name: "test" }; 
```

应该可以工作，如果你只是将它作为表单数据传递，肯定会工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-21T20:07:41.903

[我在Microsoft Docs](https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/sending-html-form-data-part-1#sending_form_data_via_ajax) Use JS code的帮助下发现了问题， 如前所述

```
$.post('api/updates/simple', { "": $('#status1').val() }); 
```

我错过的是添加空属性名称，所以 OP 需要做的是`{"":data:JSON.stringify(dataJSON)},`而不是`data:JSON.stringify(dataJSON),`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-15T10:55:03.100

$("#updateuser").click(function () {

```
 var id = $("#id").val();
        var dataJSON = $("#username").val();

        alert("" + dataJSON);

        $.ajax({

            url: 'http://localhost:44700/api/Home/' + id,
            type: 'PUT',
            data: JSON.stringify(dataJSON),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',

            success: function (data, textStatus, xhr) {
                $.each(data, function (key, val) {
                    $("<li>" + val + "</li>").appendTo($("#names"));
                })
            },
            error: function (xhr, textStatus, errorThrown) {
                alert('Error in Operation');
            }

            })

    }) 
```

# java - 在右键单击上下文菜单中添加一个条目，从而运行 java 程序

> ID：15687904
> 
> 赞同：4
> 
> 时间：2013-03-28T17:05:29.747
> 
> 标签：java, windows, right-click, regedit

我试图通过右键单击一个文件来调用一个 java 程序，该文件将使用该文件进行某些操作。工作应该是这样的，如果我右键单击一个文件，应该有一个菜单项，例如“ClickMe”。单击它时，应通过传递被单击文件的完整路径来调用 java 程序。

我尝试了一些使用 REGEDIT 的东西。但是，它不起作用。我用的是：

HKEY_CLASSES_ROOT\ * \shell\ClickMe\Command default="C:\Program Files\Java\jdk1.6.0_39\bin\java Test"。（Test 是类名。）

但是，在单击 ClickMe 时，会出现一个 OpenWith 窗口。

我被困在这里。我想知道是否有人把我从这个问题中拉出来。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-12T08:26:20.217

同样在这里。我借用了[这个答案](https://stackoverflow.com/a/28703971/1832104)，并使用 CMD 来启动它：

```
cmd /c javaw -jar c:\tools\convert.jar --outfile converted.csv 
```

# c++ - 函数类型的限定符 .. 具有未指定的行为

> ID：15687905
> 
> 赞同：0
> 
> 时间：2013-03-28T17:05:31.327
> 
> 标签：c++, factory

```
#ifndef SHAPEFACTORY_H_
#define SHAPEFACTORY_H_

#include <istream>
#include <map>
#include <string>

#include "shape.h"

typedef Shape *(createShapeFunction)(void);
/* thrown when a shape cannot be read from a stream */
class WrongFormatException { };

class ShapeFactory {

public:

    static void registerFunction(const std::string &string, const createShapeFunction *shapeFunction);
    static Shape *createShape(const std::string &string);
    static Shape *createShape(std::istream &ins);

private:

    std::map<std::string, createShapeFunction *> creationFunctions;
    ShapeFactory();
    static ShapeFactory *getShapeFactory();
};

#endif 
```

这是标题，我还没有实现任何方法，但我收到以下警告：

```
Qualifier on function type 'createShapeFunction' (aka 'Shape *()') has unspecified behavior 
```

ps：这个标题是我老师给的，作为作业我必须实现这些方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:09:06.477

这是一个愚蠢的警告信息。它不是未指定的，但是`const`您对第二个参数的限定`registerFunction`将被忽略。

让我们看一下`typedef`：`createShapeFunction`

```
typedef Shape *(createShapeFunction)(void); 
```

您可以将此类型理解为“一个不带参数并返回一个”的函数`Shape*`。那么你有一个这种类型的参数：

```
const createShapeFunction* 
```

这将是一个指向`const`函数类型的指针。没有`const`函数类型这样的东西，所以`const`被忽略并且参数类型等价于`createShapeFunction*`. 也就是指向上面定义的函数类型的指针。

您可能打算`createShapeFunction`成为函数指针类型本身：

```
typedef Shape *(*createShapeFunction)(void); 
```

现在您可以将此类型理解为“指向不带参数并返回的函数的指针`Shape*`”。然后这将使参数`const createShapeFunction*`成为指向`const`函数指针的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:21:50.447

发出警告是因为该类型`const createShapeFunction*`试图创建一个`const`-qualified 函数类型（因为`createShapeFunction`它被定义为返回 a`Shape*`并且不接受任何参数的函数的类型）。这就是 C++11 标准对此的看法（第 8.5.3/6 段）：

> **函数声明器中 cv-qualifier-seq 的效果与在函数类型之上添加 cv-qualification 不同。在后一种情况下，cv 限定符被忽略**。[ 注意：具有 cv-qualifier-seq 的函数类型不是 cv-qualified 类型；没有 cv 限定的函数类型。—尾注] [示例：
> 
> ```
> typedef void F();
> struct S {
>     const F f; // OK: equivalent to: void f();
> }; 
> ```
> 
> —结束示例]

因此，编译器会警告你，你的意思可能不是你实际写的，因为`const`函数类型的限定将被忽略。

# jquery - ajax 和相对 url

> ID：15687907
> 
> 赞同：8
> 
> 时间：2013-03-28T17:05:43.110
> 
> 标签：jquery, ajax, xmlhttprequest

我真的不明白这个。我有以下“获取”请求：

```
$.ajax( {
    url: "api/getdirectories/",
    dataType: 'json',
    success: function ( data ) {
        // Do stuff
    }
} ); 
```

这是在我的登台服务器为我提供的页面中，`http://atlas/Reporter`. 在我的本地开发盒上，这是可行的，并且在查看 fiddler 时，我看到了正确的 URL `http://localhost/Reporter/api/getdirectories`。然而，在登台服务器上，请求是 to `http://atlas/api/getdirectories`，这是无效的，我收到 404 错误。

为什么我的路径中的“报告者”部分被丢弃在登台服务器上？在查看文档时，URL、baseURI、documentURI 都是`http://atlas/Reporter`，域是`atlas`。与我的本地开发盒完全相同（除了它都是“localhost”而不是“atlas”。

这个问题已经困扰了我一段时间了。我想我已经弄清楚了，一切都很好，然后我又遇到了。我不认为这是同源策略问题，因为我从页面来源的同一站点请求数据。

那么，请求的完整 url 究竟是如何确定的呢？它似乎不是上面提到的被连接到我的相对 URL 上的文档变量之一......那么它是如何工作的？

`Edit: Removed the '/' from the URL as it is distracting from the real issue- behavior is the same with or without it.`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-01-25T20:25:05.203

不确定这是否相关，但是当 jQuery ajax 构建相对 url 时，当前页面 url 是否以“/”结尾很重要

* * *

如果您调用没有结尾的页面`/`：

```
http://atlas/Reporter 
```

该页面上来自 ajax 调用的相对 url 忽略了最后一段：

```
http://atlas/_relative_url_passed_to_ajax 
```

* * *

如果您以`/`：

```
http://atlas/Reporter/ 
```

相对 url 使用最后一个路径段`Reporter`：

```
http://atlas/Reporter/_relative_url_passed_to_ajax 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T17:09:13.457

`/`在 URL 的开头使其绝对。

您可能需要一个相对 URL，即

```
api/getdirectories/ 
```

或者

```
getdirectories/ 
```

或者

```
../api/getdirectories/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:08:11.513

检查服务器上的 document_root 或者是否声明了一些虚拟服务器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T20:38:50.473

我有同样的问题，我想我已经修复了它，因为我的一些 AJAX URL 已经在处理相对 URL，但我很困惑为什么我的一些 AJAX 调用没有按预期工作。这是我的第一个问题：

```
$.ajax({
            url: '/Controller/GetFiles',
            type: 'GET',
            dataType: 'json',
            data: { id: id },
            success: function (data) {
               //Business Logic Here
            },
            error: function (err) {
            },
        }); 
```

原来我的网址是`/Controller/GetFiles'`. 但是在将其部署到需要相对 URL 的登台站点时，这将不起作用。所以为了修复它。我需要删除`/`我的 URL 上的。

但后来我注意到我的一些具有相同格式的 URL 仍然无法正常工作。解决方案？`/`在我的网址末尾添加其他内容。这是结束格式：

```
$.ajax({
            url: 'Controller/GetFiles/',   
            type: 'GET',
            dataType: 'json',
            data: { id: id },
            success: function (data) {
               //Business Logic Here
            },
            error: function (err) {
            },
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T11:47:47.737

```
<html>
   <head>
      <title>tst</title>
   </head>
   <body>
      <h1>Data list</h1>
      <table border="1" width="50%" id="tblData">
         <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Location</th>
         </tr>
      </table>
      <script src="jquery.min.js"></script>
      <script>
         $(function(){
            $.ajax({
                url:'datas.txt',
                type:'post',
                datatype:'json',
                success:function(response){
                    var myDataBunch = $.parseJSON(response);
                    var txt = '';
                    for(var i=0; i<myDataBunch.length; i++){
                        txt+= '<tr><td>'+ myDataBunch[i].id +'</td><td>'+ myDataBunch[i].name +'</td><td>'+myDataBunch[i].location+'</td></tr>'
                    }
                    $('#tblData').append(txt);
                }
            })
         });
      </script>
   </body>
</html> 
```

# ajax - Yii、Selenium 和多个提交按钮

> ID：15687911
> 
> 赞同：3
> 
> 时间：2013-03-28T17:05:52.600
> 
> 标签：ajax, firefox, selenium, yii, functional-testing

我有一个带有两个提交按钮的表单，我想使用 Selenium 进行测试。

看法：

```
<?php
$form = $this->beginWidget('CActiveForm', array(
    'id' => 'profile-form',
    'enableAjaxValidation' => true,
    'action' => '',
    'clientOptions' => array(
        'validateOnSubmit' => true,
        'validateOnChange' => true,
        'validateOnType' => false,
    ),
));
?>

<input name="cancel" type="submit" value="Cancel" />
<input name="submit" type="submit" value="Save changes" />

<?php $this->endWidget(); ?> 
```

控制器没什么特别的，您可以假设它只是打印“您的个人资料已保存”或“您的个人资料未保存”，具体取决于它得到的 $_POST['cancel']

测试代码：

```
<?php
$this->open('/profile_form_url');
$submit_button_selector = 'css=#profile-form input[name="submit"]';
$cancel_button_selector = 'css=#profile-form input[name="cancel"]';

$this->clickAndWait($cancel_button_selector);
$this->assertTextPresent('Your profile was not saved');

$this->open('/profile_form_url');
$this->clickAndWait($submit_button_selector);
$this->assertTextPresent('Your profile has been saved'); 
```

问题是代码在浏览器中运行良好，但在 Selenium/Firefox 中运行测试时却不行。运行测试时，它只“看到”第一个按钮（取消），单击“保存更改”具有相同的效果。如果您先放置保存更改按钮，它将不会“看到”取消按钮。

如果您关闭 enableAjaxValidation，它可以在浏览器和 Selenium 中运行，但我当然希望有一个更优雅的解决方案。例如，在单击取消时关闭 AJAX 验证。

不，问题不取决于您为按钮使用的定位器（xpath、css、id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:18:49.280

`clickAndWait()`调用`waitForPageToLoad()`- ajax 表单验证通常不会触发此事件（除非页面加载），因此您的测试永远不会完成；这可能就是为什么如果你关闭 ajax 验证它可以工作。

您可能想查看 selenium 提供的其他选项（[这是免费 phpunit 袖珍指南的旧链接](http://docs.tadiavo.com/phpunit/www.phpunit.de/pocket_guide/3.1/en/selenium.html)，描述了一些其他选项 - 虽然它基于 phpunit 3.1），例如使用`click()`然后使用`waitForCondition()`一些 javascript 来运行并返回 true如果显示新文本。

# node.js - node.js 和 mongodb - 错误：无法连接到 [ds057900.mongolab.com:57900]

> ID：15687912
> 
> 赞同：4
> 
> 时间：2013-03-28T17:05:54.967
> 
> 标签：node.js, mongodb, heroku, mongoose, mlab

我在 Heroku 和 Mongolab 上有一个应用程序。我使用 node.js 和猫鼬。Heroku 经常记录我的内存消耗超过了他们的限制，其中一部分被交换到硬盘驱动器。我有时会断开与我的 Mongolab 数据库的连接，所以我的整个应用程序关闭了大约 5 分钟。一开始我有几个 Heroku 超时。之后，Heroku 重新启动我的应用程序，我有 Error: failed to connect to [ds057900.mongolab.com:57900] 多次。几次重新启动后，它会备份。Mongolab 团队告诉我，他们这边一切正常。Heroku 团队告诉我这可能是内存问题。一次完全重启不足以恢复我的应用程序。可能是我的应用程序中的内存泄漏问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T19:49:42.910

好像您正在使用 Heroku 的 mongo DB 插件，请尝试使用 Mongolab 或 MongoHQ 租用的任何您自己的数据库。

# paypal - 为沙盒帐户创建buynow按钮

> ID：15687915
> 
> 赞同：9
> 
> 时间：2013-03-28T17:05:57.217
> 
> 标签：paypal, paypal-sandbox

我是 paypal 开发的新手，我正在尝试在沙箱中创建一个 BuyNow 按钮，以使我能够在非生产环境中测试我的应用程序。如果我从我的普通帐户创建一个按钮，它会将我定向到 live paypal 站点，但是如果我尝试在沙盒中创建一个按钮，按钮创建页面总是在 live box 上，我无论如何都找不到创建按钮在沙箱中使用 Sandox 测试帐户，然后我可以在沙箱中进行测试付款。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T17:55:08.313

沙盒中的链接已损坏，并将您重定向到实时站点。发生这种情况时，有时您只需将沙箱添加到 URL 即可解决问题。因此，如果您单击该按钮，它会将您带到[https://www.paypal.com/button/blah_blah](https://www.paypal.com/button/blah_blah)，您只需将其更改为[https://www.sandbox.paypal.com/button/blah_blah](https://www.sandbox.paypal.com/button/blah_blah)。另一种选择是从您的实时贝宝帐户创建一个非托管的明文按钮，然后只需修改 URL 以指向沙箱而不是实时站点。所以instewad以下：

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
```

您只需将其更改为

```
<form target="paypal" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"> 
```

然后您将更新业务变量以反映您的测试沙盒卖家帐户的电子邮件地址。

创建按钮的最后一个选项是不登录您的帐户，而是使用[BMCreateButtom API](https://www.x.com/developers/paypal/documentation-tools/api/bmcreatebutton-api-operation-nvp)调用。请记住，如果您只熟悉 HTML，则可能需要做更多的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-02T07:18:05.657

我遇到了同样的问题..

当我单击“为您的网站创建付款按钮”时，它会重定向到此链接[www.paypal.com/us/webapps/mpp/standard-integration](http://www.paypal.com/us/webapps/mpp/standard-integration)，这是实时贝宝网站。您的测试帐户在那里不存在，因此您无法使用沙盒测试帐户完成其余操作。

我通过以下方式解决了它..

重定向到上述链接后...您可以编辑链接。

放“沙盒”。在链接中。编辑后的链接将是 [www.sandbox.paypal.com/us/webapps/mpp/standard-integration](http://www.sandbox.paypal.com/us/webapps/mpp/standard-integration)

现在您可以创建自定义按钮.. 生成的 HTML 将是这样的

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="hosted_button_id" value="5GW6UJKLK47R6">
      <input type="image"   src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-01T00:28:07.333

我无法发表评论，因为我的声誉不够高，但我认为将这个元素添加到萨迪德汗的正确答案中很重要。尝试将地址更改为沙箱时，您需要在子域前面添加“www”。

**sandbox.paypal.com**将重定向到沙盒的首页/主页。 **www.sandbox.paypal.com**将正确运行购买仿真

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-07T10:04:09.723

您可以设置 data-env="sandbox" 来创建一个将您重定向到沙盒网站的按钮。

```
<script type="text/javascript" charset="utf-8" 
src="/assets/paypal-button.min.js?merchant={merchant-email}"
    data-button="buynow"
    data-name="My product"
    data-amount="1.00"
    data-env="sandbox"
></script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-13T02:57:26.757

在您的[沙盒帐户中](https://www.sandbox.paypal.com/mep/dashboard#)：

1.  单击右上角的齿轮图标（配置文件）。
2.  然后选择“业务设置”，
3.  然后“在您的网站上”
4.  然后选项B添加一个支付支付按钮。

您可以在按钮的高级设置中选择“立即购买”和“立即付款”。

# c# - C# System.Net.NetworkInformation.Ping 命名空间错误

> ID：15687919
> 
> 赞同：1
> 
> 时间：2013-03-28T17:06:24.253
> 
> 标签：c#, .net

我正在使用win8并尝试在VS 2012中编写简单的ping程序。

```
using...
using System.Net.NetworkInformation;

...
Ping ping = new Ping();
PingReply pingReply = ping.Send("google.com");
var res = pingReply.Address + " " + pingReply.RoundtripTime + " " + pingReply.Status; 
```

并收到错误：

**命名空间“System.Net.NetworkInformation”中不存在类型或命名空间名称“Ping”（您是否缺少程序集引用？）**

在**cmd** `dir /b /ad /o-n %systemroot%\Microsoft.NET\Framework\v?.*`中给我：

*   v4.0.30319
*   v3.5
*   v3.0
*   v2.0.50727
*   ...

此外，`System.Net.NetworkInformation`只有*一个*代表和*两个*类：

*   NetworkAddressChangedEventHandler
*   网络变化
*   网络接口

[我在那里](http://take.ms/HUme3)

我错过了什么？为什么只有*一个*代表和*两个*班级？

# twitter-bootstrap - AngularJS：表单内的所有按钮触发提交？

> ID：15687921
> 
> 赞同：36
> 
> 时间：2013-03-28T17:06:37.333
> 
> 标签：twitter-bootstrap, angularjs

如果文档中涵盖了这一点，我会提前道歉，但我似乎找不到它。

我有一个非常简单的表单，它使用了几个按钮，因为我正在使用 twitter 引导程序。问题是单击表单中的任何按钮似乎会触发提交事件到 Angular：在我的表单中有几个输入字段，我在其中使用“require”属性，因此单击任何按钮都会打开一个对话框，说明该字段是必需的。这一切都很好，除了我只希望在用户单击实际提交按钮时进行验证。

我尝试将 ng-submit 设置为一个到目前为止只返回 false 的函数，但这似乎没有任何效果。

**更新：**我找到了一个使用 event.preventDefault() 指令的临时解决方法。然而，这似乎有点过分，也意味着我必须将它附加到每个按钮上。

```
<div class="row-fluid">
    <div class="span12">
        <form ng-submit="onSubmit()" class="form-horizontal">
            <div class="row-fluid">
                <div class="span12">
                    <div class="katana-technician-form">
                        <div class="control-group">
                            <label class="control-label">Tekniker
                                <div class="controls">
                                    <div class="input-append">
                                        <input type="text" class="span2" />
                                        <div class="btn-group">
                                            <!-- Triggers onSubmit-->
                                            <button data-toggle="dropdown" class="btn dropdown-toggle">Velg<span class="caret"></span>

                                            </button>
                                            <ul class="dropdown-menu">
                                                <li>Kake</li>
                                                <li>Bake</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <!-- Triggers onSubmit-->
                    <button type="submit"></button>
                </div>
            </div>
    </div>
    </form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-06-19T02:35:29.820

您应该尝试`type="button"`在按钮上进行设置。

[这个问题](https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms)详细说明了它的作用。

# php - 使用 Codeigniter 从数据库中填充表单字段

> ID：15687928
> 
> 赞同：1
> 
> 时间：2013-03-28T17:06:54.540
> 
> 标签：php, forms, codeigniter

我正在尝试从从数据库中检索到的数据中填充两个表单字段，以便用户更新它们。该表被调用`records`，它非常简单：

Record_ID
标题
内容

我的模型：

```
function get_data()
{
    $r = $this->uri->segment(3);

    $query = $this->db->get_where('records', array('Record_ID' => $r));
    return $query->result();
} 
```

我的控制器：

```
function set_values()
{
    $data = $this->entries_model->get_data();
    $this->load->view('update_view', $data);                       
} 
```

和我的更新记录视图：

```
<?php

echo form_open('site/update',$data);?>
Title:
<?php echo form_input('title',set_value('title'));?>
Content:
<?php echo form_input('content',set_value('content'));
echo form_submit('submit', 'Submit');?>

<?php echo form_close();?> 
```

问题是我收到以下错误：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义变量：数据
> 
> 文件名：views/update_view.php
> 
> 行号：10

我的问题是双重的：

1.  我如何在我的视图表单中访问这些数据和
2.  我如何用它填充相应的字段。

我是 Codeigniter 的新手，我的问题可能看起来很简单，但我们将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:37:46.687

您应该将数组传递给您的视图文件。所以替换：

```
$data = $this->entries_model->get_data(); 
```

和：

```
$data['entries_data'] = $this->entries_model->get_data(); 
```

并在您的视图文件中替换：

```
echo form_open('site/update',$data);?> 
```

和：

```
echo form_open('site/update',$entries_data);?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:39:44.583

这里发生了一些事情：

1.  $data 是[传递给视图](http://ellislab.com/codeigniter/user-guide/general/views.html)的数组或对象。然后它的 ELEMENTS 可用作视图中的变量。因此，控制器中的 $data['myelement'] = 'somevalue' 将在视图中作为 $somevalue 访问。

2.  如果您将第二个参数传递给[form_open()](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)方法，它应该是将要生成的标记的属性的键/值对。比如，array('class' => 'form_class', 'id' => 'form_id')

3.  如果要设置表单输入的值，请使用视图帮助函数[set_value()](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)。在您的情况下，使用控制器在您将传递给视图的 $data 数组中设置元素。`$data['form_values'] = array('title' => $title, 'content' => $content);`

然后，在视图中：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:47:32.677

首先你需要以正确的方式传递数据

代替

```
$data = $this->entries_model->get_data();

with:

$data['data'] = $this->entries_model->get_data(); 
```

要在 set_value 中设置值，您需要进行内联条件检查以检查数据是否为对象，如果对象则放置值，否则为空

```
<?php echo form_input('title',set_value((is_object($data)?$data->title:'')));?> 
```

你必须为你的所有表单域做同样的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T20:31:26.057

Jcory 已经回答了你的问题，但让我补充一点。

1.  在你的模型中而不是`return $query->result();`这样做`return $query->row();`是因为使用返回一个返回对象需要你在你的视图中循环遍历结果集
2.  而不是`$data = $this->entries_model->get_data();`这样做`$data['entry'] = $this->entries_model->get_data();`
3.  在您看来，这样做`<?php echo form_input('title',set_value('title',$entry->title));?>` 我希望这些更改可以解决问题

# coldfusion - 处理 CF 远程函数中的无效数据类型

> ID：15687930
> 
> 赞同：0
> 
> 时间：2013-03-28T17:07:04.583
> 
> 标签：coldfusion, error-handling, coldfusion-10, remoteobject

所以我有一个远程 ColdFusion 功能，例如：

```
remote string function name (required numeric varname){ 
```

这是通过 AJAX 调用访问的。Google 已自行将垃圾/空白值传递给此远程函数的 URL。我怎样才能优雅地处理那些让机器人/用户设法获得垃圾价值的东西。我尝试在函数周围/内部放置 try/catch 并且不起作用。我也尝试过设置默认值，但仍然出现错误。我希望能够返回错误消息。

想法？

现在：

```
domain.com/path/to/page.cfc?method=function&varname= 
```

正在抛出错误

```
domain.com/path/to/page.cfc?method=function&varname=5 
```

正在按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:41:20.507

**更新：**

我将这里留给后代，因为它通过验证解释了错误的原因和事件链。但是，[亚当的回应](https://stackoverflow.com/a/15691535/104223)是 IMO 的正确解决方案。

* * *

> `remote string function name (required numeric varname){`
> 
> 我尝试在函数周围/内部放置 try/catch 并且不起作用。

因为参数值在CF 执行函数内部的任何内容*之前被验证。*所以它甚至永远不会到达`try/catch`.

如果要允许非数字值，则必须将参数类型设置为并在函数*内部*`string`执行验证。IE

 *```
 // use whatever check is appropriate here
      if ( IsNumeric(arguments.varname) ) { 
          // good value. do something
      }
      else {
          // bad value. do something else
      } 
```

> 我也尝试过设置默认值，但仍然出现错误
> 
> `domain.com/path/to/page.cfc?method=function&varname=`

**更新** 它不起作用的原因是因为该`varname`参数*确实*存在。它的值是一个空字符串。只要传递*了某个*值（即使是空字符串），`default`它就会被忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T20:28:22.153

我不同意接受的解决方案是这里最好的方法。

首先，如果您的方法需要一个数字并且它被传递一个字符串，那么错误正是这里的正确反应。对于传递无效值的请求，您不应该感到需要缓解。把它想象成有人向[http://some.domain/path/to/file/wrongOne.html](http://some.domain/path/to/file/wrongOne.html)发出请求（他们应该请求[http://some.domain/path/to/file/rightOne.html](http://some.domain/path/to/file/rightOne.html)）.. . 事情在那里返回 404“错误”是完全可以的，不是吗？在这种情况下，错误响应是完全正确的。

同样，您已经规定，对于您的远程调用 URL，该参数应该是数字。所以如果它不是数字......那*是*一个错误条件。因此，您的服务器返回 500 类型的错误实际上是正确的做法。

这是“垃圾进，垃圾出”规则的一个例子。

如果您正在寻找一个优雅的解决方案，我会说您已经有了最优雅的解决方案。不要乱写特殊代码来处理不正确的请求。这*不是*一个优雅的方法。

你最好让事情出错，因为那样请求 URL 的机制将停止这样做。乱来，以便您返回一个*不*“OK”`200 OK`的请求是错误的做法。

 *错误 - 当它们是正确的结果时 - 很好。他们没有任何问题。**

# jquery - Jquery 验证插件。在字段失去焦点之前消息不可见

> ID：15687931
> 
> 赞同：1
> 
> 时间：2013-03-28T17:07:09.773
> 
> 标签：jquery, jquery-plugins, jquery-validate

我正在使用 jquery 验证插件。我发现只有在部署站点后才会出现的问题，即便如此，它似乎也是间歇性的。当我提交带有无效字段的表单时，它会阻止提交，但没有一个无效字段显示表明它们无效的消息。如果我将光标放在该字段中，然后标记出验证消息。似乎进行屏幕捕获会更新显示并导致出现消息。该问题出现在多种字段类型上，但这里以一种为例。

```
<input name="ProjectDescription" class="required" id="ProjectDescription" style="text-transform: uppercase;" type="text" maxLength="15" value=""/> 
```

这是我的验证电话。

```
 $('#RequestForm').validate({
        ignore: ":hidden",
        ignoreTitle: true,
        submitHandler: function () {
            var f = $('#RequestForm');
            var action = '/Request/Request'
            var serializedForm = f.serialize();
            $.post(action, serializedForm,
                function (rtn) {
                    $("#Submit").removeAttr('disabled');
                    if (rtn.Success == true) {
                        var data = rtn.Result;
                        $('form')[0].reset();
                        $.jGrowl("Submitted Successfully", { life: 10000 });
                    }
                    else {
                        $.jGrowl(rtn.ErrorMessage, { sticky: true });
                    }
                });
            $("#Submit").attr('disabled', 'disabled');
            return false;
        },
        invalidHandler: function (event, validator) {
            debugger
            console.log(validator);
        }
    }); 
```

还有我的按钮处理程序

```
 $('#Submit').click(function () {
        $('#RequestForm').submit();

    }); 
```

我无法在小提琴或其他任何地方复制这个问题。在编写此请求的过程中，它不再发生，但我没有进行任何代码更改。任何可能导致这种行为的帮助将不胜感激。我主要在 IE 9 中进行测试

更新：

我一直无法找到任何方法来可靠地复制该问题，但如果可以的话，我会继续尝试创建一个小提琴。在同一浏览会话期间，它会突然开始工作。通常，通过关闭并重新打开浏览器，我可以让该行为再出现 3-4 次尝试。根据我尝试在现场调用模糊和隐藏/显示的评论。这些都不会导致出现错误消息。按下打印屏幕按钮或将光标放在字段中并按下选项卡可靠地导致验证消息出现。有关解决方案的一些附加信息：

该页面由 MVC 3 生成。我经常使用 javascript 和 ajax 来显示/隐藏字段。
字段的显示/隐藏发生在 ajax 回调中。

此特定字段正在显示/隐藏

```
 if (project.PAContractClassID == "CAPITAL") { // capital
                            $('.capitalOnly').show();
                            $('.expenseOnly').hide();
                        }
                        else if (project.PAContractClassID == "EXPENSE") {  // expense
                            $('.expenseOnly').show();
                            $('.capitalOnly').hide();
                        } 
```

我的 MVC 代码生成字段

```
@Html.TextBoxFor(m => m.ProjectDescription, new { @name="ProjectDescription", @class = "required", maxlength = "15", style = "text-transform:uppercase;" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:00:08.800

同上 Sparky：如果您的提交按钮包含在 中`<form></form>`，那么绝对不需要提供单击处理函数来提交表单。

如果您没有使用提交按钮，而只是使用了一个按钮，请`type=button`尝试使用`type=submit`并查看问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:31:36.980

经过大量测试后，我隔离了我的 _Layout.cshtml 中对 jquery.unobtrusive-ajax 的引用，因为它干扰了 jquery validate 的行为。删除对 j​​query.unobtrusive-ajax 的引用后，我没有再次收到错误。我将继续做一些测试，看看我添加这些引用的顺序是否会有所不同，但我不想让这个问题悬而未决。谢谢大家的建议。

# java - Java 中的 XML XPath 解析

> ID：15687934
> 
> 赞同：0
> 
> 时间：2013-03-28T17:07:17.633
> 
> 标签：java, xpath, xml-parsing

这是以下在 Java 中使用 XPath 解析 XML 的标准代码。我无法调试为什么我得到空值。我附上了java文件、xml文件和输出。如果有人能解释一下我哪里出错了，我将不胜感激。提前致谢！:)

XPathParser.java

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

public class XPathParser {
    public static void main(String args[]) throws Exception {
        //loading the XML document from a file
        DocumentBuilderFactory builderfactory = DocumentBuilderFactory.newInstance();
        builderfactory.setNamespaceAware(true);

        //XML read
        DocumentBuilder builder = builderfactory.newDocumentBuilder();
        Document xmlDocument = builder.parse("Stocks.xml");

        // Creates a XPath factory
        XPathFactory factory = javax.xml.xpath.XPathFactory.newInstance();

        //Creates a XPath Object
        XPath xPath = factory.newXPath();

        //Compiles the XPath expression
        //XPathExpression xPathExpression_count = xPath.compile("count(//stock)");
        XPathExpression xPathExpression = xPath.compile("//stock");

        //Run the query and get a nodeset
        Object result = xPathExpression.evaluate(xmlDocument,XPathConstants.NODESET);

        //Cast the result into a DOM nodelist
        NodeList nodes = (NodeList) result;
        System.out.println(nodes.getLength());
        System.out.println(nodes.item(0));
        for (int i=0; i<nodes.getLength();i++){
          System.out.println(nodes.item(i).getNodeValue());
        }
    }
} 
```

股票.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<stocks>
       <stock>
              <symbol>ABC</symbol>
              <price>10</price>
              <quantity>50</quantity>
       </stock>
       <stock>
              <symbol>XYZ</symbol>
              <price>20</price>
              <quantity>1000</quantity>
       </stock>
</stocks> 
```

输出：

```
2
[stock: null]
null
null 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T17:29:03.533

您正在尝试`getNodeValue`在节点上调用该方法`Stock`- 这没有意义，因为它们没有值，它们是父节点。

您可以遍历的子节点`Stock`并查找信息：

```
final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes()));
final XPathExpression expression = XPathFactory.newInstance().newXPath().compile("//stock");
final NodeList nodeList = (NodeList) expression.evaluate(document, XPathConstants.NODESET);
for (int i = 0; i < nodeList.getLength(); ++i) {
    final NodeList childList = ((Element) nodeList.item(i)).getChildNodes();
    for (int j = 0; j < childList.getLength(); ++j) {
        final Node node = childList.item(j);
        if (node.getNodeType() == Node.ELEMENT_NODE) {
            System.out.println(node.getNodeName() + "=" + node.getTextContent());
        }
    }
} 
```

输出：

```
symbol=ABC
price=10
quantity=50
symbol=XYZ
price=20
quantity=1000 
```

请注意，您必须`Node`按类型过滤子节点，否则您将循环遍历子节点和节点的文本值的组合，该文本值作为文本节点出现。这是以这种方式遍历 XML 的常见问题。

您还可以遍历所有子文本节点`Stock`：

```
final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes()));
final XPathExpression expression = XPathFactory.newInstance().newXPath().compile("//stock/*/text()");
final NodeList nodeList = (NodeList) expression.evaluate(document, XPathConstants.NODESET);
for (int i = 0; i < nodeList.getLength(); ++i) {
    final Node node = nodeList.item(i);
    System.out.println(node.getNodeValue());
} 
```

输出：

```
ABC
10
50
XYZ
20
1000 
```

在这种情况下，您会遍历所有子节点的子节点的所有文本节点`Stock`——这意味着您会丢失节点名称的信息。但是您可以通过遍历所有`Stock`非文本节点的子节点来重新创建第一种方法：

```
final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes()));
final XPathExpression expression = XPathFactory.newInstance().newXPath().compile("//stock/*");
final NodeList nodeList = (NodeList) expression.evaluate(document, XPathConstants.NODESET);
for (int i = 0; i < nodeList.getLength(); ++i) {
    final Node node = nodeList.item(i);
    System.out.println(node.getNodeName() + "=" + node.getTextContent());
} 
```

输出：

```
symbol=ABC
price=10
quantity=50
symbol=XYZ
price=20
quantity=1000 
```

或者，如果您想要更具体的内容，可以在 XPath 中选择一个特定的子节点：

```
final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes()));
final XPathExpression expression = XPathFactory.newInstance().newXPath().compile("//stock/symbol/text()");
final NodeList nodeList = (NodeList) expression.evaluate(document, XPathConstants.NODESET);
for (int i = 0; i < nodeList.getLength(); ++i) {
    final Node node = nodeList.item(i);
    System.out.println(node.getNodeValue());
} 
```

输出：

```
ABC
XYZ 
```

# java - 全局与本地消息处理器

> ID：15687937
> 
> 赞同：1
> 
> 时间：2013-03-28T17:07:26.257
> 
> 标签：java, scope, global-variables, mule

我有一个关于将自定义消息处理器用作全局与本地的问题。

我一直在全球范围内定义所有自定义转换器，并在 mule 流程中引用它们。

在流中定义的对象的范围与声明为全局并在流中引用的对象的范围有什么区别？

如果消息处理器被定义为全局而不是内部流，是否会对内存产生影响？

除了可重用性之外，将处理器定义为全局还有什么好处？

```
Ex:  
Global Way of defining: 

<custom-transformer name="mycustom" class="org.MyClass" />  
<flow name="myflow">
    ...
    ...
    <transformer ref="mycustom" />
    ...
    ...
</flow>

Local Way of defining:
<flow name="myflow">
    ...
    ...
    <custom-transformer name="mycustom" class="org.MyClass" />
    ...
    ...
</flow> 
```

此信息将有助于在内存和代码可维护性方面设计最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:01:49.067

本地定义的转换器在注册表中被声明为不同的 bean，因此在本地一次又一次地声明它们肯定会产生成本。

因此，更喜欢在全球范围内声明类似的转换器（和组件、消息处理器......）。

# maps - 在事件的谷歌地图上更改 2 点之间的线的颜色

> ID：15687941
> 
> 赞同：0
> 
> 时间：2013-03-28T17:07:35.387
> 
> 标签：maps

我有一个网页，我在其中使用谷歌地图来显示一个特定的区域，我通过在各个点（这些点是我们放置的传感器）绘制线条来显示它的边界，并提供其纬度和经度。现在我想改变 2 点之间特定线的颜色。即基本上我们试图识别假设它在 1 边界，如果有任何不寻常的信号会出现。我们需要读取信号，然后在地图上更改 2 点之间特定线的颜色。我该如何实现。任何指针都会有很大帮助。谢谢 RVD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:47:41.257

您可以使用 google.maps.Polyline 以您喜欢的任何颜色绘制线条。

# regex - 保存前用下划线替换无效字符

> ID：15687942
> 
> 赞同：2
> 
> 时间：2013-03-28T17:07:35.590
> 
> 标签：regex, vbscript, regex-negation

我可以使用[这个正则表达式](http://regexlib.com/REDetails.aspx?regexp_id=85)：

```
^(?!^(PRN|AUX|CLOCK\$|NUL|CON|COM\d|LPT\d|\..*)(\..+)?$)[^\x00-\x1f\\?*:\"";|/]+$ 
```

在 VBscript 中检测无效的 Windows 文件名，并在保存前拒绝它们。我想通过用标准字符（例如下划线“_”）自动替换任何无效字符（或其连续字符）来为我的用户添加额外的服务。

因此，我需要想出另一种模式，因为据我所知，VBscript 仅提供一种在模式匹配时替换的方法：

```
with getRGX()
    .ignoreCase = TRUE
    .global = TRUE
    .pattern = < inputPattern >
    < outputCleanfileName > = .Replace( < inputDirtyFileName >, < "_" > )
end with 
```

到目前为止，我想出的最好的方法如下：

```
((PRN|AUX|CLOCK\$|NUL|CON|COM\d|LPT\d|\..*)(\..+)?)?[\\?*:\"";|/]+ 
```

不幸的是，它与扩展名混淆了：

```
INPUT    = COM1:aAZB?":a|a|a/.txt?
MATCH    = COM1:?"||/.txt?
EXPECTED = COM1:?"||/? 
```

如果我遗漏了一些明显的东西，我提前道歉，并感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:33:03.063

我认为这个正则表达式可以满足您的要求：

```
(?:^(PRN|AUX|CLOCK\$|NUL|CON|COM\d|LPT\d|\..*)(?:\.(?=.)|$)|(?:([\x00-\x1f\\?*:\"";|/]))) 
```

[您可以在Debuggex](http://www.debuggex.com/?re=%28%3F%3A%5E%28PRN%7CAUX%7CCLOCK%5C%24%7CNUL%7CCON%7CCOM%5Cd%7CLPT%5Cd%7C%5C..%2A%29%28%3F%3A%5C.%28%3F%3D.%29%7C%24%29%7C%28%3F%3A%28%5B%5Cx00-%5Cx1f%5C%5C%3F%2A%3A%5C%22%22%3B%7C%2F%5D%29%29%29&str=COM1%3AaAZB%3F%22%3Aa%7Ca%7Ca%2F.txt%3F)上看到它是如何工作的。这个想法是“反转”拒绝正则表达式的每个部分。

# android - 如何从固定尺寸的图库中裁剪图像

> ID：15687943
> 
> 赞同：1
> 
> 时间：2013-03-28T17:07:40.540
> 
> 标签：android, android-camera, android-gallery, android-camera-intent

当用户从图库中挑选照片时，我希望他们能够裁剪它。但是，我希望缩放始终是一个固定的框（正方形）。等长和等宽。

我认为在我的意图中添加这样的东西会做到这一点，但没有：

```
photoPickerIntent.putExtra("scale", true); 
```

还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:09:48.363

意识到我需要什么：

```
 photoPickerIntent.putExtra("outputX", 200);
        photoPickerIntent.putExtra("outputY", 200);
        photoPickerIntent.putExtra("aspectX", 1);
        photoPickerIntent.putExtra("aspectY", 1);
        photoPickerIntent.putExtra("scale", true); 
```

# postgresql - 使用 heroku pg:info 提取不在应用程序内的数据库上的统计信息

> ID：15687946
> 
> 赞同：0
> 
> 时间：2013-03-28T17:07:52.713
> 
> 标签：postgresql, heroku

使用 heroku 工具带，一个人可以运行以下命令并接收有关连接到应用程序的 postgres 数据库的一些统计信息：

```
pg:info 
```

如果您不在应用程序目录中，您将收到以下错误：

“未指定应用程序。”

但是如果您指定一个应用程序，那么您将只能在创建连接到应用程序的数据库上提取统计信息。但是，Heroku Postgres 允许您创建未连接到特定应用程序的数据库。

您如何将 pg:info 与 Heroku 应用程序之外的数据库一起使用？

[heroku 文档](https://devcenter.heroku.com/articles/heroku-postgresql#using-the-cli)中有一些关于如何使用 pg:info 命令的信息，但他们没有提到如何将它与独立数据库一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:12:41.603

您目前不能`pg:info`与独立 Heroku Postgres 数据库一起使用。

# c++ - 在 C++/openGL 中加载 .txt 错误

> ID：15687948
> 
> 赞同：-2
> 
> 时间：2013-03-28T17:08:02.637
> 
> 标签：c++, string

我有一个程序可以计算很多数字，我无法将数据存储在数组中，因为 RAM 内存不足以容纳数据。所以我写了一些代码，将数据放在一个 .txt 文件中。在同一个程序中，我必须逐个加载它以使用 openGL/GLUT 显示数据。

现在，.txt 文件如下所示：

```
number1;number 2;number3;number4;......number N;
number1;number 2;number3;number4;......number N;
number1;number 2;number3;number4;......number N;
...................................................................................
number1;number 2;number3;number4;......number N; 
```

请注意，在数字 N 之后；出现一个“\n”（输入）。那一行有 2500 个数字。
我必须逐行加载数据，所以我使用`getline();` 但是每一帧都需要下一行。

为了简化一点，这里是要阅读的代码：

```
ifstream file("example.txt", ifstream::in);
if(file.is_open())
{
    getline(file, b);
    cout<<b<<"\n"<<"\n";
    file.close();
} 
```

此代码不是实际程序中的代码，但它显示了问题。

代码在这里运行良好，它简单地加载第一行并将其显示在控制台屏幕上。并在openGL中的每一帧都这样做。所以每次opengl开始一个新框架时，我的控制台屏幕都会不断更新。

但是当我添加这个时：

```
ifstream file("example.txt", ifstream::in);
if(file.is_open())
{
    getline(file, b);
    strcpy(resultch, b.c_str());
    cout<<b<<"\n"<<"\n";
    file.close();
} 
```

（如果 resultch 被声明为：）`char* resultch = new char[2550];`代码只运行 1 次并且程序在它之后停止，控制台屏幕比说：

```
proces returned -1073741819 <0x0000005> 
```

为什么每次都不能正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:41:43.023

What if you:

```
ifstream file("example.txt", ifstream::in);
if(file.is_open())
{
    getline(file, b);
    resultch = malloc( b.length() + 1 );
    strcpy(resultch, b.c_str());
    cout<<b<<"\n"<<"\n";
    file.close();

    free( resultch );
} 
```

All I added was to allocate memory based on the size of the string.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T17:46:26.060

尝试这个：

```
ifstream infile;
infile.open ("example.txt", ifstream::in);

std::string line("");

int ch = infile.get();
while (infile.good()) {
    if ((char)ch=='\n'){
         resultch = line.c_str();
         line = "";
         cout << endl << endl;
    }
    else {
         line = line + (char)ch;
         cout << (char)ch; 
    }
    ch = infile.get();
}
infile.close(); 
```

这可能就是你要找的。

# c# - 如何在 C# 的函数中创建动态 (?) 变量？

> ID：15687949
> 
> 赞同：0
> 
> 时间：2013-03-28T17:08:03.613
> 
> 标签：c#, selenium-ide

我的 web.app 基本上是一个日历界面，您可以在其中将锻炼添加到一天中。我有一个 Helpers（类？），我只将所有功能放在其中一次，这样我就可以在其他地方调用它们。对不起，我已经很久没有编程了，不知道所有正确的单词。我正在将用 javascript 编写的 selenium ide 测试翻译成 c#。

所以在下面的这个 Helper 中，我将一个 run 添加到一天，并为其分配一个变量。

```
 public static Int64 AddRunToday(IWebDriver driver)
    {
        //hovers over today so day context menu appears, click Add
        Common.Helpers.WaitForElement(By.CssSelector(".day.today.ui-droppable"), driver);
        Common.Helpers.MouseHover(By.CssSelector(".day.today.ui-droppable"), driver);
        driver.FindElement(By.CssSelector(".day.today .daySettings")).Click();
        Common.Helpers.WaitForElement(By.Id("calendarDaySettingsAddLabel"), driver);
        driver.FindElement(By.Id("calendarDaySettingsAddLabel")).Click();

        // selects a Run
        Common.Helpers.WaitForElement(By.CssSelector("button[data-workoutid=\"3\"]"), driver);
        driver.FindElement(By.CssSelector("button[data-workoutid=\"3\"]")).Click();
        Common.Helpers.WaitForElement(By.Id("workoutTitleField"), driver);
        driver.FindElement(By.Id("workoutTitleField")).Click();
        driver.FindElement(By.Id("workoutTitleField")).Clear();
        driver.FindElement(By.Id("workoutTitleField")).SendKeys("Today's Run");
        Common.Helpers.WaitForElement(By.Id("saveClose"), driver);
        driver.FindElement(By.Id("saveClose")).Click();
        Common.Helpers.WaitForElement(By.CssSelector(".day.today .workout.Run[data-workoutid]"), driver);
        Int64 runTodayId = (Int64)Common.Helpers.EvalScript("window.$('.day.today .workout.Run').data('workoutid')", driver);

        return runTodayId;
    } 
```

然后在我的测试中我写

```
//adds workout
        Int64 runTodayId  = Common.Helpers.AddRunToday(driver); 
```

如何在一天中添加无限量的锻炼？所以，基本上我想写一些类似的东西

```
//adds workout
        Int64 runTodayId1 = Common.Helpers.AddRunToday(driver);
        Int64 runTodayId2 = Common.Helpers.AddRunToday(driver);
        Int64 runTodayId3 = Common.Helpers.AddRunToday(driver); 
```

我在主要功能中放了什么，这样就可以了？比如，一个动态命名的变量之类的东西，也许？或者怎么做？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:22:07.720

如果我正确理解你。您想创建一个 Int64 列表。

然而，我不明白的是什么因素会产生不止一种锻炼。你有单独的驱动程序吗？

您需要进行某种迭代（驱动程序？）以每次进行不同的锻炼。完成后你想对锻炼做什么？

```
List<Int64> workouts = new List<Int64>();

foreach(var something in Collection)
{
   workouts.Add(Common.Helpers.AddRunToday(something));
} 
```

# php - php 日期格式从 d/m/Y 转换为 date('D, j MYH:i:s')

> ID：15687955
> 
> 赞同：2
> 
> 时间：2013-03-28T17:08:17.553
> 
> 标签：php, datetime

我正在尝试在 php 中转换日期，但没有成功。任何帮助都会非常显着。

我的代码：

```
$playing_dates='06/03/2013|13/03/2013|20/03/2013|27/03/2013|03/04/2013|10/04/2013|17/04/2013|24/04/2013|01/05/2013|08/05/2013|15/05/2013|22/05/2013|29/05/2013';

$playing_dates = explode("|", $playing_dates);
for($i=0; $i<count($playing_dates);$i++){
    $playing = strtotime($playing_dates[$i]);
    echo $playing_dates[$i]." --> ".$playing." -->";
    echo date('D, j M Y H:i:s', $playing)."</br>";
} 
```

实际输出：

```
06/03/2013 --> 1370214000 -->Mon, 3 Jun 2013 00:00:00
13/03/2013 --> -->Thu, 1 Jan 1970 01:00:00
20/03/2013 --> -->Thu, 1 Jan 1970 01:00:00
27/03/2013 --> -->Thu, 1 Jan 1970 01:00:00
03/04/2013 --> 1362355200 -->Mon, 4 Mar 2013 00:00:00
10/04/2013 --> 1380841200 -->Fri, 4 Oct 2013 00:00:00
17/04/2013 --> -->Thu, 1 Jan 1970 01:00:00
24/04/2013 --> -->Thu, 1 Jan 1970 01:00:00
01/05/2013 --> 1357344000 -->Sat, 5 Jan 2013 00:00:00
08/05/2013 --> 1375657200 -->Mon, 5 Aug 2013 00:00:00
15/05/2013 --> -->Thu, 1 Jan 1970 01:00:00
22/05/2013 --> -->Thu, 1 Jan 1970 01:00:00
29/05/2013 --> -->Thu, 1 Jan 1970 01:00:00 
```

预期输出：

```
06/03/2013 --> 1370214000 -->Wed, 6 Mar 2013 00:00:00
13/03/2013 --> -->Wed, 13 Mar 2013 00:00:00
20/03/2013 --> -->Wed, 20 Mar 2013 00:00:00
27/03/2013 --> -->Wed, 27 Mar 2013 00:00:00
03/04/2013 --> 1362355200 -->Wed, 3 April 2013 00:00:00
10/04/2013 --> 1380841200 -->Wed, 10 April 2013 00:00:00
17/04/2013 --> -->Wed, 17 April 2013 00:00:00
24/04/2013 --> -->Wed, 24 April 2013 00:00:00
01/05/2013 --> 1357344000 -->Wed, 1 May 2013 00:00:00
08/05/2013 --> 1375657200 -->Wed, 8 May 2013 00:00:00
15/05/2013 --> -->Wed, 15 May 2013 00:00:00
22/05/2013 --> -->Wed, 22 May 2013 00:00:00
29/05/2013 --> -->Wed, 29 May 2013 00:00:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:16:34.913

试试这个，看看它是否有效：

```
for($i=0; $i<count($playing_dates);$i++){
    $date = DateTime::createFromFormat('d/m/Y', $playing_dates[$i]);
    $newformat = $date->format('D, j M Y H:i:s');
    $playing = strtotime($date);

    echo $playing_dates[$i]." --> ".$playing." -->";
    echo $newformat ."</br>";
} 
```

编辑：

```
<?php
$playing_dates='06/03/2013|13/03/2013|20/03/2013|27/03/2013|03/04/2013|10/04/2013|17/04/2013|24/04/2013|01/05/2013|08/05/2013|15/05/2013|22/05/2013|29/05/2013';
$playing_dates = explode("|", $playing_dates);
for($i=0; $i<count($playing_dates);$i++){
    $date = DateTime::createFromFormat('d/m/Y', $playing_dates[$i]);
    $newformat = $date->format('D, j M Y H:i:s');
    $playing = strtotime($date->format("Y-m-d"));

    echo $playing_dates[$i]." --> ".$playing." -->";
    echo $newformat ."</br>";
}
?>

06/03/2013 --> 1362524400 -->Wed, 6 Mar 2013 18:31:10
13/03/2013 --> 1363129200 -->Wed, 13 Mar 2013 18:31:10
20/03/2013 --> 1363734000 -->Wed, 20 Mar 2013 18:31:10
27/03/2013 --> 1364338800 -->Wed, 27 Mar 2013 18:31:10
03/04/2013 --> 1364940000 -->Wed, 3 Apr 2013 18:31:10
10/04/2013 --> 1365544800 -->Wed, 10 Apr 2013 18:31:10
17/04/2013 --> 1366149600 -->Wed, 17 Apr 2013 18:31:10
24/04/2013 --> 1366754400 -->Wed, 24 Apr 2013 18:31:10
01/05/2013 --> 1367359200 -->Wed, 1 May 2013 18:31:10
08/05/2013 --> 1367964000 -->Wed, 8 May 2013 18:31:10
15/05/2013 --> 1368568800 -->Wed, 15 May 2013 18:31:10
22/05/2013 --> 1369173600 -->Wed, 22 May 2013 18:31:10
29/05/2013 --> 1369778400 -->Wed, 29 May 2013 18:31:10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:18:49.570

*strtotime()*函数接受 mm/dd/yyyy 格式的参数

请参阅[此处](http://www.php.net/manual/en/datetime.formats.date.php)了解各种日期格式。

所以使用 03/06/2013 得到 Wed, 6 Mar 2013 00:00:00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:41:49.853

`strtotime()`采用大多数格式并将其转换为 unix 时间戳。但是，它会混淆`MM/DD/YYYY`和`DD/MM/YYYY`。

这里有很多解决方案......一个是使用您期望的格式来分解日期戳。

```
foreach($playingdates as $datestamp) {
    list($day, $month, $year) = explode('/', $datestamp);
    $playtime = mktime(0, 0, 0, $month, $day, $year);
    // do whatever you want with $playtime
} 
```

# python - Python，如何将非类方法保留为非类方法？

> ID：15687956
> 
> 赞同：1
> 
> 时间：2013-03-28T17:08:18.820
> 
> 标签：python, function, methods

我正在制作一组调用在不同模块中定义的函数的类。要知道他们必须调用哪个函数，该函数存储为类的变量（或者至少这是我尝试过的）。但是，当我尝试调用它时，它会自动假定该函数是一个类方法并将“self”作为参数传递，这在逻辑上会导致错误，因为该函数接收到的参数太多。你知道我怎样才能避免函数成为类方法。

代码如下：

```
# Module A
def func1(a):
    print a
def func2(a):
    print a,a

# Module B
from A import *
class Parent:
    def func():
        self.sonFunc("Hiya!")
class Son1:
    sonFunc = func1
class Son2:
    sonFunc = func2

so = Son1()
s.func()
# Should print "Hiya!"
s = Son2()
s.func()
# Should print "Hiya! Hiya!" 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:13:27.530

您正在做的事情有点不标准/奇怪，但这应该可行：

```
class Son_1(object):

    son_func = staticmethod(func_1)

class Son_2(object):

    son_func = staticmethod(func_2) 
```

通常，`staticmethod`用作装饰器，但由于装饰器只是语法糖，您也可以这样使用它们。

一种可以说更清洁但也更先进的方法是`metaclass`：

```
class HasSonMeta(type):

    def __new__(cls, name, bases, attrs):

        attrs['son_func'] = staticmethod(attrs.pop('__son_func__'))
        return type.__new__(cls, name, bases, attrs)

class Son1(object):

     __metaclass__ = HasSonMeta
     __son_func__ = func_1

class Son2(object):

    __metaclass__ = HasSonMeta
    __son_func__ = func_2 
```

使用这种形式，您还可以直接在类中定义函数（尽管这样会使阅读此代码的人更加困惑）：

```
class Son3(object):

    __metaclass__ = HasSonMeta

    def __son_func__():

        pass 
```

虽然可能有一个非常狭窄/晦涩的场景，这将是一个最佳实现，但通过将您的函数放在基类中，然后根据需要在子类中引用（或覆盖）它们，您可能会得到更好的服务。

# python - 如何在 celery worker 执行任务之前访问 args 和 kwargs？

> ID：15687959
> 
> 赞同：0
> 
> 时间：2013-03-28T17:08:33.290
> 
> 标签：python, celery

我有一个注册为 celery 任务的 python 函数，例如：

```
import celery
@celery.task(base=MyTask)
def my_fn(*args,**kwargs):# dooing stuff 
```

我想在任务执行之前检查`args`and仍然有效。`kwargs`为此，我尝试覆盖类`execute`的`run`功能，`Task`但它们没有按照那里的代码和文档中的说明执行。（至少这是我所理解的！）

[`execute`](https://github.com/celery/celery/blob/master/celery/app/task.py#L772) [`run`](https://github.com/celery/celery/blob/master/celery/app/task.py#L347)

[的示例使用`run`](http://docs.celeryproject.org/en/latest/userguide/tasks.html#custom-task-classes)，类似于我想要的

这就是我定义我的`MyTask`班级的方式：

```
from celery import Task
class MyTask(Task):
    def run(self,*args,**kwargs): #does't get called.
    def execute(self,request,*args,**kwargs): #does't get called. 
```

我应该覆盖什么类或函数？这不可能吗？

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:20:16.700

我刚刚发现，如果您覆盖`__call__`功能，它可以正常工作。

代码变为：

```
from celery import Task
class MyTask(Task):
    def __call__(self,*args,**kwargs):
        #do stuff
        return super(...)... 
```

如果有更好的解决方案，我希望看到。

# php - mysqli 返回的行数不正确

> ID：15687960
> 
> 赞同：3
> 
> 时间：2013-03-28T17:08:41.090
> 
> 标签：php, mysqli, usercake

我正在为我的网站和我的生活写一个“喜欢”功能，我就是无法让这个功能正常工作！

假设这是我的数据库结构的简化版本：

> id --- post_id --- user_id
> 
> 1 --- 1 ----------- 1
> 
> 2 --- 2 ----------- 1

这是我写的代码：

```
 public function userHasLikedPost($post_id,$user_id){
        $this->post_id_clean = sanitize($post_id);
        $this->user_id_clean = sanitize($user_id);

        global $mysqli,$db_table_prefix;
        $stmt = $mysqli->prepare("SELECT like_type FROM ".$db_table_prefix."post_likes WHERE user_id = ? AND post_id = ?");

        $stmt->bind_param("ii", $this->post_id_clean, $this->user_id_clean);

        $stmt->execute();
        $stmt->store_result();  

        $stmt->bind_result($like_type);

        $stmt->fetch();
        $result;

        if( $stmt->num_rows >0 ){
            $result = array("liked" => 1, "like_type" => $like_type);
        }else{
            $result = array("liked" => 0);
        }

        return print_r($stmt);

        $stmt->close();
    } 
```

当我调用 userHasLikedPost(1,1) 我的代码将返回**正确**的行数

> mysqli_stmt 对象 ( [affected_rows] => 1 [insert_id] => 0 [num_rows] => **1** [param_count] => 2 [field_count] => 1 [errno] => 0 [error] => [error_list] => 数组( ) [sqlstate] => 00000 [id] => 5) 1

但是，如果我调用 userHasLikedPost(2,1) 我会得到*不正确*的行数。

> mysqli_stmt 对象 ( [affected_rows] => 0 [insert_id] => 0 [num_rows] => **0** [param_count] => 2 [field_count] => 1 [errno] => 0 [error] => [error_list] => 数组( ) [sqlstate] => 00000 [id] => 5) 1

为什么会这样？我正确使用 mysqli 吗？数据存在于数据库中，如果我在 PHPMyAdmin 中手动运行查询，我将得到正确的输出。我花了大约 2 个小时试图让这个功能正常工作......在此先感谢您的回复:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:14:49.260

我已经解决了我的问题。我的绑定顺序不正确：/多么尴尬哈哈！

解决方案：

替换这行代码：

```
$stmt->bind_param("ii", $this->post_id_clean, $this->user_id_clean); 
```

和：

```
$stmt->bind_param("ii", $this->user_id_clean, $this->post_id_clean); 
```

# html - CSS3 手风琴列表问题

> ID：15687961
> 
> 赞同：0
> 
> 时间：2013-03-28T17:08:43.483
> 
> 标签：html, css

创建了一个 Css3 手风琴，但现在输出手风琴默认活动内容是最后一个。我首先需要默认的活动手风琴打开内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:42:55.453

我很确定您遇到的问题是由于您将以下属性添加到所有输入元素：

```
<input ... checked="checked" > 
```

结果？

浏览器读取第一个并看到，好的，检查，让我们打开它，但是等待，nr 2 也被检查，nr3 也被检查......所以它继续向下 DOM 直到最后一个指定为检查的，这将成为可爱的赛琳娜戈麦斯......所以它会打开那个

解决方案：

删除所有

```
checked="checked" 
```

**除了**第一个输入标签之外，您确实希望将其保持打开状态..

查看新的[FIDDLE](http://jsfiddle.net/DKb3x/7/)

# c# - 当另一个项目为空时如何在 LINQ 中选择一个项目

> ID：15687964
> 
> 赞同：0
> 
> 时间：2013-03-28T17:08:44.977
> 
> 标签：c#, linq

这可能是一个简单的问题，但我有以下代码：

```
string lol = "540";
        var values = from pv in dataRecords.Values
                     where pv.ID.Contains(lol)
                     || pv.TotalLength.Contains(lol)
                     from tv in pv.MyProperty
                     where tv.name.Contains(lol)
                     || tv.length.Contains(lol)
                     || tv.startByte.Contains(lol)

                     select 
```

但是我需要在 tv 为空时选择 pv，反之亦然，我知道这很简单，但它是一天的结束，我现在无法思考。也想增加我的 LINQ 知识，所以任何有趣的指南都会很棒。

**编辑**为了提供更多信息，tv 分解了数据记录的子类，以便我可以搜索字符串 lol 的这些字段。我只是想选择一个返回结果基本上不为空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:12:08.223

如果`pv`并且`tv`碰巧是同一类型，您可以这样做：

```
var values = from pv in dataRecords.Values
             where pv.ID.Contains(lol)
             || pv.TotalLength.Contains(lol)
             from tv in pv.MyProperty
             where tv.name.Contains(lol)
             || tv.length.Contains(lol)
             || tv.startByte.Contains(lol)
             select tv ?? pv; 
```

但是，您只能有一种返回类型，因此如果`pv`和`tv`是不同的类型，您将遇到问题。你可以这样做：

```
var values = from pv in dataRecords.Values
             where pv.ID.Contains(lol)
             || pv.TotalLength.Contains(lol)
             from tv in pv.MyProperty
             where tv.name.Contains(lol)
             || tv.length.Contains(lol)
             || tv.startByte.Contains(lol)
             select new { pv, tv };
foreach(var v in values)
{
    if (v.tv == null) ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:25:16.790

注意：这是一个**hack** ( o_O )。但是如果为null ，它将导致`tv`返回：`pv`

```
var values = from pv in dataRecords.Values
         where pv.ID.Contains(lol)
         || pv.TotalLength.Contains(lol)
         from tv in pv.MyProperty
         where tv.name.Contains(lol)
         || tv.length.Contains(lol)
         || tv.startByte.Contains(lol)
         select ((object)tv ?? (object)pv); 
```

请记住在使用 IEnumerable 之前拆箱`values`。

# java - JavaCC 使用输入作为“令牌”

> ID：15687968
> 
> 赞同：0
> 
> 时间：2013-03-28T17:08:51.393
> 
> 标签：java, variables, match, token, javacc

这几天我一直对此感到困惑，搜索似乎没有给出任何结果。让我想知道这是否可能。例如：

```
funct functionNAME (Object o) { o+1 }; 
```

关键是用户必须在花括号内使用标识符“o”，而不是其他标识符。这当然是由 (Object o) 部分中的输入指定的，其中 'o' 可以是任何东西。基本上花括号内的标识符必须与参数中定义的标识符相同。我知道我可以存储匹配的标记并将其打印到屏幕上，但是否可以将其用作词法标记本身？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:13:22.213

是的，有更好的方法来做到这一点。你需要一个符号表。符号表的工作是跟踪程序中每个点可以使用哪些标识符。通常，符号表还包含有关标识符的其他信息，例如它们表示的内容（例如变量或函数名称）以及它们的类型。

使用符号表，您可以检测在解析许多语言（但不是全部）期间不在范围内的变量的使用。例如，C 和 Pascal 是必须在使用标识符之前声明标识符的语言（有一些例外）。但是其他语言（例如Java）允许在使用标识符之后声明标识符，在这种情况下，最好不要尝试检测错误，例如在程序被解析之前使用未声明的变量。（实际上，在 Java 中，您需要等到所有文件都被解析，因为标识符可能会在另一个文件中声明。）

我假设一个简单的场景，就是你只需要记录变量的信息，没有类型信息，使用前必须声明。这会让你开始。我没有为将函数名添加到符号表而烦恼。

假设一个符号表是一堆叫做帧的东西。每个帧都是一组可变的字符串。（稍后您可能希望将其更改为从字符串到一些附加信息的可变映射。）

```
void Start(): { }
{
    <FUNCTION>
    <IDENTIFIER>
    {symttab.pushNewFrame() ;}
    <LBRACKET> Parameters()  <RBRACKET> 
    <LBRACE> Expression() <RBRACE>
    {symtab.popFrame() ; }
}
void Parameters() : {}
{
     ( Parameter() (<COMMA>   Parameter() )* )?
}
void Parameter() : {  Token x ; }
    <OBJECT> x=<IDENTIFIER>
    { if( symtab.topFrame().contains(x.image) ) reportError( ... ) ; }
    { symtab.topFrame().add(x.image) ; }
}
void Expression() : {  }
{
    Exp1() ( <PLUS> Exp1() )*
}
void Exp1() : { Token y ; }
{
    y = <IDENTIFIER>
    { if( ! symtab.topFrame().contains(y.image) ) reportError( ... ) ; }
|
    <NUMBER>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:11:06.817

您可以存储标识符 matchin 的值`o`，然后在大括号中检查标识符是否相同，否则抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:56:10.240

好的，我已经根据我在 OP 中给出的示例找到了一种方法来获得我想要的东西。这是我在我的解决方案中实现的一个简单变体，只是为了提供概念证明。为简单起见，将省略诸如令牌定义之类的琐碎事情。

```
void Start():
{
    Token x, y;
}
{
    <FUNCTION>
    <FUNCTION_NAME>
    <LBRACKET>
    <OBJECT>
    x = <PARAMETER>
    <RBRACKET>
    <LBRACE>
    y = <PARAMETER>
    {
        if (x.image.equals(y.image) == false)
        {
            System.out.println("Identifier must be specified in the parameters.");
            System.exit(0);
        }
    }
    <PLUS>
    <DIGIT>
    <RBRACE>
    <COLON>
} 
```

有一个更好的方法吗？

# javascript - 如何从 ng-grid 中删除斑马条纹

> ID：15687969
> 
> 赞同：3
> 
> 时间：2013-03-28T17:08:53.983
> 
> 标签：javascript, angularjs

似乎这应该是一件容易的事，但我没有找到它。默认情况下，ng-grid 是斑马条纹，如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:39:30.440

将此添加到您的`style`以覆盖`zebra`css：

```
<style>
    .ngRow.even {
        background-color: rgb(255, 255, 255);
    }
    .ngRow.odd {
        background-color: rgb(255, 255, 255);
    }
</style> 
```

这将使两行都变白。将其更改为您需要的任何颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-27T00:26:24.873

如果您要在 ngGrid 样式表 (ngGrid.css) 之后的样式表中添加修改，您应该这样做以避免丢失`ngRow.selected`类

```
.ngRow.even {
    background-color: #ffffff;
}

.ngRow.odd {
    background-color: #ffffff;
}

.ngRow.selected {
    background-color: #BDD5FF;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T10:10:31.083

自定义主题并添加：

`odd-row-background-color: null`

# angularjs - AngularJS 与 Sencha Touch

> ID：15687970
> 
> 赞同：8
> 
> 时间：2013-03-28T17:08:54.763
> 
> 标签：angularjs, sencha-touch

我遇到了一些使用 AngularJS 和 Sencha Touch 的项目（例如[https://github.com/tigbro/sencha-touch-angular-adapter](https://github.com/tigbro/sencha-touch-angular-adapter)）。两者一起使用有什么好处吗？如果是这样，是为了什么？我的印象是它们都是成熟的框架，你不必混合/匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T16:46:59.920

恕我直言，这不值得麻烦。

实际上，*很*容易将其他框架/库混合到 SenchaTouch/ExtJS 中，并且（我假设）人们这样做的动机主要是为了获得双向数据绑定到 ST/Ext 中的好处。

如果你只是触摸表面，一切**都会好起来的。**您的 HTML 变得干净且更易于维护，`<tpl>`在您的 JavaScript 代码中不再有“奇怪”的标签等。您项目的 UI 部分变得漂亮。

而且，您甚至可以轻松地使数据绑定与*简单* `Ext.data.Model`完美同步。

但是，如果您使用 ST/Ext 处理与后端的数据通信，那么您`Ext.data.Store`大部分时间都在处理。您收集的数据从后端返回到商店，并且您的模型的 hasMany 关联以商店的形式出现，仅举几例。

现在，如何将存储与普通 JavaScript 数组或某种用于双向数据绑定的可观察数组同步？如果绑定的数组发生了变化，存储需要做什么？如果存储发生变化，需要对绑定数组做些什么？添加、删除和插入都是相当简单的操作，那么排序和过滤呢？

因此，如果您有能力放弃`Ext.data.Store`，将 angular 与 ST/Ext 混合是相当容易的任务；否则，就坚持煎茶。

# bash - Bash 发现排除不区分大小写

> ID：15687978
> 
> 赞同：0
> 
> 时间：2013-03-28T17:09:07.097
> 
> 标签：bash, find

我正在使用以下内容查找具有我需要的匹配扩展名的文件。但是，我似乎无法让它排除我想要的某些关键字，并确保关键字不区分大小写......

```
find . -type f \(  -name \*.avi -o -name \*.mkv -o -name \*.mp4 -o -name \*.VOB \) 
```

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:24:01.973

不区分大小写：使用`-iname`而不是`-name`.

# java - Android AdMob 方法上的 NoSuchMethodError

> ID：15687980
> 
> 赞同：0
> 
> 时间：2013-03-28T17:09:20.863
> 
> 标签：java, android, xml, mobile

我不明白发生了什么。我的清单确实具有适当的 adactivity，并且该应用程序在本地运行良好。我正在完全用 Java 设置横幅广告，因为它们在 XML 中给我带来了麻烦。我在 libs 文件夹中有最新的 AdMob SDK，我尝试在没有 ProGuard 的情况下进行编译，以查看这是否导致了任何问题，但其他设备中发生了一些不影响我的事情。我知道我可以用 try/catch/finally 来掩盖问题，但我想解决根本原因。用户使用此堆栈跟踪报告崩溃（来自 Google Play 商店）：

```
 java.lang.NoSuchMethodError: com.google.ads.AdView.setY
at org.trepix.sda.adultlesson.MainMenu.onCreate(MainMenu.java:53)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1613)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1665)
at android.app.ActivityThread.access$1500(ActivityThread.java:118)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:933)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3686)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:26:05.800

如果您添加了任何外部 jar 以供参考，请确保它们是使用应用程序构建的。在日食中，

`right click on project --> build path --> configure build path.`

确保在 Order and Export 选项卡中检查了库。

# c# - C# 泛型/接口 - 根据类返回不同的类型

> ID：15687981
> 
> 赞同：2
> 
> 时间：2013-03-28T17:09:26.333
> 
> 标签：c#, generics, interface

对于工作，我们有特定类型的记录，但每个项目都有自己的实现。列等不同，但大体流程是一样的（记录分为批次、批次分配、批次完成、批次退回、批次发出等）。许多列也很常见，但有时名称会发生​​变化（一个中的 BatchId 与另一个中的 Id。[Column("name")] 解决了这个问题）。

目前，这就是我使用接口中给出的通用组件实现批处理分配功能的方法：

```
public interface IAssignment
{
   // properties
   ...
   // methods
   T GetAssignmentRecord<T>(int UserId, int BatchId) where T : IAssignment;
   List<T> GetAssignmentRecords<T>(int UserId) where T : IAssignment;
} 
```

现在我目前有两个具有批量分配的项目。由于这些是在 EntityFramework 中完成的，Namespace1 中的分配和 Namespace2 中的分配是完全不同的事情，但受某些通用组件（ID、分配的用户、签入等）的约束，这些组件驱动所有返回它们的方法。

我认为我的主要问题是我是否做错了，是否有更好的方法来实现这一点，以便我可以将数据传输到我的控制器中，并让控制器看起来有点类似于项目的项目，同时有尽可能多的方法工作被自动处理（主要是当我需要更新时会出现“修复一个，修复所有”场景）。

下面是我如何为 namespace1 进行实现的示例：

```
public class Assignment
{
    ...
    public T GetAssignmentRecord<T>(int UserId, int BatchId) where T : IAssignment
    {
        var db = new Database1Context();
        return (T) Convert.ChangeType(db.Assignment.Where(c => c.UserId == UserId && c.BatchId == BatchId && c.Assigned).First(), typeof(T));
    }
} 
```

在控制器中：

```
Assignment assignment = new Assignment();
var record = assignment.GetAssignmentRecord<Assignment>(userid, batchid);
// do stuff 
```

控制器代码实际上是我假设它会工作的方式。我已经完成了作业课程，现在如果我以正确的方式做这件事，我会感到困惑。我觉得这可能不正确的原因是我基本上是在说“接口正在寻找一个泛型，我使用实体框架从数据库中获取一个强类型对象，我将它转换为泛型，当我'正在提出请求，我正在请求我最初转换为泛型的相同强类型对象。”

有没有更好的方法来做到这一点？还是我应该走的完全不同的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:49:04.907

如果我正确理解你的目标是什么，我会这样做，例如这样......

```
interface IAssignment
{
}

interface IRepo<out T> where T : IAssignment
{
    T GetAssignmentRecord(int UserId, int BatchId);
    IEnumerable<T> GetAssignmentRecords(int UserId);
}

class AssignmentRecord : IAssignment
{
}
class AssignmentWeb : IAssignment
{
}

class RepoDb : IRepo<AssignmentRecord>
{
    public AssignmentRecord GetAssignmentRecord(int UserId, int BatchId)
    {
        //using(var db = new MyDbContext())
        //{
        //    return db.Assignment.Where(c => c.UserId == UserId && c.BatchId == BatchId && c.Assigned).First();
        //}
        return new AssignmentRecord();
    }

    public IEnumerable<AssignmentRecord> GetAssignmentRecords(int UserId)
    {
        //using(var db = new MyDbContext())
        //{
        //    return db.Assignment.Where(c => c.UserId == UserId && c.BatchId == BatchId && c.Assigned);
        //}
        return new List<AssignmentRecord> 
            {
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
                new AssignmentRecord(),
            };
    }
}

class RepoWeb : IRepo<AssignmentWeb>
{
    public AssignmentWeb GetAssignmentRecord(int UserId, int BatchId)
    {
        // fetch it from some web service...
        return new AssignmentWeb();
    }

    public IEnumerable<AssignmentWeb> GetAssignmentRecords(int UserId)
    {
        //using(var db = new MyDbContext())
        //{
        //    return db.Assignment.Where(c => c.UserId == UserId && c.BatchId == BatchId && c.Assigned);
        //}
        return new List<AssignmentWeb> 
            {
                new AssignmentWeb(),
                new AssignmentWeb(),
                new AssignmentWeb(),
            };
    }
}

class MYController
{
    public IRepo<IAssignment> Repository { get; set; } // you can inject this e.g. DI

    public IAssignment GetAssignment(int userid, int batchid)
    {
        return Repository.GetAssignmentRecord(userid, batchid);
    }

    public IEnumerable<IAssignment> GetAllAssignments(int userid)
    {
        return Repository.GetAssignmentRecords(userid);
    }
}

class ProgramAssignment
{
    static void Main(string[] args)
    {
        try
        {
            var controller = new MYController();
            controller.Repository = new RepoDb();

            IAssignment assignment = controller.GetAssignment(0, 0);
            IEnumerable<IAssignment> all = controller.GetAllAssignments(0);

            controller.Repository = new RepoWeb();

            assignment = controller.GetAssignment(0, 0);
            all = controller.GetAllAssignments(0);
        }
        catch
        {
            Console.WriteLine("");
        }
    }
} 
```

至于为什么`out`- 这是我另一篇文章中的更多内容......

[如何使泛型类包含一组仅包含其自己的类型或子类型的子类？](https://stackoverflow.com/questions/15590540/how-to-make-generic-class-that-contains-a-set-of-only-its-own-type-or-subtypes-a/15599634#15599634)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:50:55.523

假设 2 Assignment 具有不同的属性（可能是一些额外的），但有些属性是相同的，并且它们来自不同的数据库，有很多方法可以做到这一点。但是“最好的”（对我来说）是通过依赖注入。

您在作业类中的活动（方法）应移至单独的“服务”类。这增加了 Assignment 的模块化，因为它只是变成了一个 POCO。

对于数据访问，创建一个单独的类（存储库）来检索/插入/更新/删除您的数据。示例如下：

```
public AssignmentRepository: IAssignmentRepository{
  public Assignment GetAssignmentRecord(int userId, int batchId){

  }
}

public BatchAssignmentRepository: IAssignmentRepository{
  public Assignment GetAssignmentRecord(int userId, int batchId){

  }
} 
```

如果你问为什么有 2 个仓库而不是 1 个仓库，会不会让代码变得多余？是的，但您还必须考虑它会增加模块化。如果您在 BatchAssignment 中更改某些内容（可能更改列名、添加其他列等），那么您不需要在 Assignment 中应用相同内容，并避免您在内部使用“if batchAssignment else”逻辑。

调用者的使用将是这样的：

```
IAssignmentService service = new AssignmentService();
IAssignmentRepository repository = new AssignmentRepository();
Assignment a = repository.GetAssignmentRecord(userId, batchId);
service.DoSomething(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:52:48.587

考虑一个适配器层。该层应该将传入的数据转换为通用结构/类，然后可以一致地处理，尽管有泛型。当然，它也会在“出站”端重新转换为特定数据库所期望的。这假定没有数据源具有在其他数据源中未定义的数据，或者您可以为所述缺失数据定义有效的默认值。

我想您需要针对不同项目的不同适配器。也许这是[依赖注入](https://stackoverflow.com/questions/4612054/wpf-prism-what-is-a-unity-container)的工作。基本上在运行时您获取所需的特定代码（适配器类）。

[Unity 简介。](http://msdn.microsoft.com/en-us/library/ff649614.aspx)

# java - javax.ejb.CreateException：无法创建无状态 EJB

> ID：15687994
> 
> 赞同：2
> 
> 时间：2013-03-28T17:09:53.163
> 
> 标签：java, netbeans, ejb, javabeans, stateless

我正在使用 netbean 6.7.1 Glassfish v2.1 ...我正在尝试创建消息驱动的 bean。

应用程序 A（使用会话 bean，创建映射消息）--> 应用程序 B（位于此处的消息驱动 bean）。

```
@Stateless
public class AManagerBean implements AManagerRemote {
....
}

@Remote
public interface AManagerRemote {
...
} 
```

在A的主类中，

```
@EJB
public static AManagerRemote AManager;
AManager.requestFineAmt(memberID); 
```

在 requestFineAmt 方法中，它包含所有这些队列连接的东西。

当我尝试运行它时。我收到指出无法创建无状态 EJB 的错误。为什么？？？

```
WARNING: ACC003: Application threw an exception.
javax.ejb.EJBException: nested exception is: java.rmi.ServerException: RemoteException     occurred in server thread; nested exception is: 

java.rmi.RemoteException: nested exception is: javax.ejb.EJBException: nested exception   is: javax.ejb.CreateException: Could not create stateless EJB; nested exception is: 

javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not      create stateless EJB
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
java.rmi.RemoteException: nested exception is: javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB; nested exception is: 
    javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:243)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:205)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.bcel.BCELStubBase.invoke(BCELStubBase.java:225)
    at ejb.__AManagerRemote_Remote_DynamicStub.requestFineAmt(ejb/__AManagerRemote_Remote_DynamicStub.java)
    at ejb._AManagerRemote_Wrapper.requestFineAmt(ejb/_AManagerRemote_Wrapper.java)
    at lps.Main.main(Main.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.util.Utility.invokeApplicationMain(Utility.java:266)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:450)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:260)
    at com.sun.enterprise.appclient.Main.main(Main.java:200) 

Caused by: java.rmi.RemoteException: nested exception is: javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB; nested exception is: 

javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not   create stateless EJB
    at com.sun.enterprise.iiop.POAProtocolMgr.mapException(POAProtocolMgr.java:251)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1420)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1325)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:210)
    at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:117)
    at $Proxy110.requestFineAmt(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie._invoke(ReflectiveTie.java:154)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:687)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:227)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1846)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1706)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:1088)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:223)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:806)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:563)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2567)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:555)

Caused by: javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB
    at com.sun.ejb.containers.StatelessSessionContainer$SessionContextFactory.create(StatelessSessionContainer.java:785)
    at com.sun.ejb.containers.util.pool.NonBlockingPool.getObject(NonBlockingPool.java:199)
    at com.sun.ejb.containers.StatelessSessionContainer._getContext(StatelessSessionContainer.java:489)
    at com.sun.ejb.containers.BaseContainer.getContext(BaseContainer.java:1709)
    at com.sun.ejb.containers.BaseContainer.preInvoke(BaseContainer.java:1238)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:202)
    ... 17 more

javax.ejb.EJBException: nested exception is: java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.RemoteException: nested exception is: javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB; nested exception is: 
javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB
    at ejb._LPSManagerRemote_Wrapper.requestFineAmt(ejb/_LPSManagerRemote_Wrapper.java)
    at lps.Main.main(Main.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.util.Utility.invokeApplicationMain(Utility.java:266)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:450)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:260)
    at com.sun.enterprise.appclient.Main.main(Main.java:200)

Exception in thread "main" java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:462)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:260)
    at com.sun.enterprise.appclient.Main.main(Main.java:200)

Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.util.Utility.invokeApplicationMain(Utility.java:266)
    at com.sun.enterprise.appclient.MainWithModuleSupport.<init>(MainWithModuleSupport.java:450)
    ... 2 more

Caused by: javax.ejb.EJBException: nested exception is: java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.RemoteException: nested exception is: javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB; nested exception is: 
    javax.ejb.EJBException: nested exception is: javax.ejb.CreateException: Could not create stateless EJB
    at ejb._AManagerRemote_Wrapper.requestFineAmt(ejb/_AManagerRemote_Wrapper.java)
    at lps.Main.main(Main.java:23)
    ... 8 more 
```

Java 结果：1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:13:52.150

确保您的 EJB 类和其中使用的所有类都实现了该`Serializable`接口。

相关：[使用 EJB3 时，我什么时候必须使实体可序列化？](https://stackoverflow.com/q/6405630/1065197)

# android - 如何绘制从我的位置到另一个位置的路径？

> ID：15687998
> 
> 赞同：0
> 
> 时间：2013-03-28T17:10:01.317
> 
> 标签：android, maps

如何在不使用谷歌导航的情况下在我的位置和另一个位置之间绘制路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:37:33.300

我找到了答案，使用这个[http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)和位置管理器来获取你当前位置的纬度和经度