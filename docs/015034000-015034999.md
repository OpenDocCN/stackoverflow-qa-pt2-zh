# StackOverflow 问答 15034000-15034999

# php - Joomla 文章未发表

> ID：15034001
> 
> 赞同：0
> 
> 时间：2013-02-22T22:06:26.737
> 
> 标签：php, joomla, content-management-system

好吧，我有这个奇怪的问题。我有一个 joomla 网站，每次我进行任何更改然后应用这些更改时，网站都会更新。一切顺利。然而，几个小时后.. 说通常是 24 小时，更改将恢复到其原始形式（即与更改之前完全相同）。

我最近将 joomla 从 1.5.21 更新到 1.5.25。这次更新会是原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:26:26.377

听起来它可能是许多事情之一：

1) 您的托管服务提供商正在恢复您的 Joomla 数据库，这实际上是在恢复您的文章

2) 有人入侵了您的 Joomla 安装并在弄乱您的脑袋。这不太可能，所以不要惊慌

# ruby-on-rails - 查找具有与另一个模型相关联的某些条件的特定模型

> ID：15034009
> 
> 赞同：0
> 
> 时间：2013-02-22T22:07:09.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在这里检查了所有其他问题，但似乎找不到答案。我有

小路：

1.  `attr_accessible :location, :total_time, :visits`
2.  `belongs_to :trackedsite, :touch => true`

跟踪站点：

1.  `attr_accessible :total_time, :url, :visits`
2.  `has_many :paths, :autosave => true`

我想找到属于具有特定位置的 Trackedsite 的路径

我试过了：

```
@trackedsite = Trackedsite.find_by_url(params[:url_string])
@path = @trackedsite.find_by_location(params[:path_string]) 
```

但是我得到“没有这样的列：paths.trackedsite_id”（这是正确的，该列不存在，我应该在迁移中添加一些东西吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:01:51.913

关联通过具有外键来工作。如果您的路径`belongs_to`a`TrackedSite`按照惯例需要有 a `trackedsite_id`，否则实体之间没有链接。

# c++ - ifstream.eof() - 在真正结束之前到达文件末尾

> ID：15034012
> 
> 赞同：10
> 
> 时间：2013-02-22T22:07:36.710
> 
> 标签：c++, ifstream, fread

我有一个大约 11.1G 的二进制文件，其中存储了来自 Kinect 的一系列深度帧。此文件中有 19437 帧。为了每次读取一帧，我在***fstream中使用******ifstream*** ，但它在文件真正结束之前到达***eof 。***（我只得到了前 20 帧，由于***eof***标志，函数停止了）

 ***但是，可以通过在***stdio***中使用***fread***来读取所有帧。

 *谁能解释一下这种情况？感谢您在我的问题上花费宝贵的时间。

这是我的两个功能：

```
// ifstream.read() - Does Not Work: the loop will stop after 20th frame because of the eof flag
ifstream depthStream("fileName.dat");
if(depthStream.is_open())
{
  while(!depthStream.eof())
  {
    char* buffer = new char[640*480*2];
    depthStream.read(buffer, 640*480*2);

    // Store the buffer data in OpenCV Mat

    delete[] buffer;
  }
}

// fread() - Work: Get 19437 frames successfully
FILE* depthStream
depthStream = fopen("fileName.dat", "rb");
if(depthStream != NULL)
{
  while(!feof(depthStream))
  {
    char* buffer = new char[640*480*2];
    fread(buffer, 1, 640*480*2, depthStream);

    // Store the buffer data in OpenCV Mat

    delete[] buffer;
} 
```

再次感谢您在我的问题上的宝贵时间

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T22:10:21.880

您需要以二进制模式打开流，否则它将在它看到的第一个字节处停止，值为 26。

```
ifstream depthStream("fileName.dat", ios_base::in | ios_base::binary); 
```

至于为什么 26 是特殊的，它是 Ctrl-Z 的代码，它是用于标记文本文件结尾的约定。这背后的历史记录在[Raymond Chen的博客](http://blogs.msdn.com/b/oldnewthing/archive/2004/03/16/90448.aspx)中。****

# javascript - 从校验和生成特定范围内的数字

> ID：15034013
> 
> 赞同：2
> 
> 时间：2013-02-22T22:07:38.893
> 
> 标签：javascript, md5, checksum

我正在研究一个数字生成器，它以字符串作为输入，并在特定范围内生成一个数字作为输出。为此，我需要确定 md5 校验和可以具有的最小和最大可能值，然后将 md5 校验和转换为该范围内的数字。如何将 md5 校验和转换为指定范围内的数字？

```
function getNumberInRange(md5checksum, min, max){
    //generate a number between min to max, inclusive, using the md5 checksum that is entered in the input.
    //Every input should have exactly one output.
} 
```

# installation - 在 Koding 安装 Meteor

> ID：15034015
> 
> 赞同：1
> 
> 时间：2013-02-22T22:07:59.103
> 
> 标签：installation, meteor

我正在尝试在 koding 安装流星，但在最后一步出现错误，`meteor -p port`这就是我得到的：

```
 app/packages/mongo-livedata/mongo_driver.js:33
      throw err;
            ^
Error: failed to connect to [127.0.0.1:1994]
    at Server.connect.connectionPool.on.server._serverState (/Users/chlebta/meteor/dev_bundle/lib/node_modules/mongodb/lib/mongodb/connection/server.js:482:73)
    at EventEmitter.emit (events.js:126:20)
    at connection.on._self._poolState (/Users/chlebta/meteor/dev_bundle/lib/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:96:15)
    at EventEmitter.emit (events.js:99:17)
    at Socket.errorHandler (/Users/chlebta/meteor/dev_bundle/lib/node_modules/mongodb/lib/mongodb/connection/connection.js:411:10)
    at Socket.EventEmitter.emit (events.js:96:17)
    at Socket._destroy.self.errorEmitted (net.js:329:14)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:57:18.670

不知道你是否已经解决了这个问题，但我遇到了类似的问题。我最终不得不创建一个名为 MONGO_URL 的环境变量：

```
export MONGO_URL=mongodb://user:pass@host:port/dbname 
```

当然，用 Koding 分配给您的内容替换 user、pass、host、port 和 dbname。不是最安全的，所以我会找到一个更优雅的解决方案，但目前它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T03:07:24.767

[Koding wiki](http://kwiki.koding.com/wiki/Meteor)中有一个关于 Meteor 的部分。

另外，请注意，您应该在 to 的端口范围内选择一个`1024`端口`10000`。某些端口可能正在使用中，因此您可能需要尝试一些不同的端口。

# javascript - Ember Javascript 框架

> ID：15034017
> 
> 赞同：-2
> 
> 时间：2013-02-22T22:08:04.067
> 
> 标签：javascript, ember.js

我正在尝试通过 ember 绑定 DOM 元素的单击事件。我已经创建了应用程序、模型和控制器，并在 HTML 页面中使用了手柄栏模板。

我解析了 JSON 并将数据加载到视图中，但我不知道如何使用 ember 框架将点击事件绑定到 DOM 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:31:14.927

使用`{{action}}`助手，例如：

```
<button {{action buttonWasClicked}}>Click Me</button> 
```

然后将 buttonWasClicked 方法添加到您的控制器。

请参阅[http://emberjs.com/guides/templates/actions/](http://emberjs.com/guides/templates/actions/)

# tornado - C10k 在实践中怎么样？

> ID：15034018
> 
> 赞同：4
> 
> 时间：2013-02-22T22:08:05.010
> 
> 标签：tornado, c10k

我刚刚测试了一个使用*Tornado*制作的小型应用程序，但我离*10k 同时连接*还很远！为了进行测试，我使用了[Siege](http://www.joedog.org/siege-home/)，在**OpenSuse 12.2 64 bit**下，机器是**i7**和**8GB** 以下是结果：

```
siege -c 4000 localhost:8000 
```

我收到了这个错误：

```
Transactions:                   2164 hits
Availability:                  39.90 %
Elapsed time:                   6.85 secs
Data transferred:               2.52 MB
Response time:                  1.04 secs
Transaction rate:             315.91 trans/sec
Throughput:                     0.37 MB/sec
Concurrency:                  329.74
Successful transactions:        2164
Failed transactions:            3260
Longest transaction:            5.94
Shortest transaction:           0.00 
```

如果我使用 10k 连接：

```
siege -c 10000 localhost:8000 
```

我收到一个错误：

```
[error] descriptor table full sock.c:109: Too many open files 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T06:07:39.317

检查`ulimit`命令的输出。您需要增加 siege 和 tornado 网络服务器的文件描述符限制以完成您的基准测试。

# environment-variables - 如何在 Verilog/System Verilog 中读取环境变量？

> ID：15034019
> 
> 赞同：8
> 
> 时间：2013-02-22T22:08:07.290
> 
> 标签：environment-variables, verilog, system-verilog

如何在 Verilog 中读取环境变量？（在 VCS 模拟器上运行）

我正在努力完成

```
File=$fopen("$PATH/FileName","r"); 
```

$PATH 是一个环境变量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T03:15:27.397

您可以简单地使用 SystemVerilog DPI 来获取环境。并且因为`getenv`是每个 POSIX 平台的标准 C 库，所以您不需要`getenv()`再次为函数定义实现自己的等效函数。

SV 中的示例代码。

```
import "DPI-C" function string getenv(input string env_name);

module top;

  initial begin
    $write("env = %s\n", {getenv("HOME"), "/FileName"});
  end
endmodule 
```

跑步

```
ncverilog -sv dpi.v 
```

或者

```
vcs -sverilog dpi.v 
```

它会显示

```
env = /home/user/FileName 
```

在您的原始问题中还有一个问题，PATH 是可执行搜索路径的环境，并与“：”字符连接。我认为这应该是一个例子，而不是真正的“PATH”环境。否则，您的 fopen 文件名可能是`"/bin:/usr/bin:/usr/local/bin/FileName"`，这是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T00:30:59.177

您可以使用简单的 PLI 应用程序来读取环境变量。这是一个示例，没有任何错误检查：

```
#include <stdlib.h>
#include <string.h>

#include "vpi_user.h"

PLI_INT32 pli_getenv (PLI_BYTE8 * arg) {

    vpiHandle tf_obj = vpi_handle (vpiSysTfCall, NULL);
    vpiHandle arg_iter = vpi_iterate (vpiArgument, tf_obj);

    vpiHandle arg1, arg2;
    arg1 = vpi_scan (arg_iter);
    arg2 = vpi_scan (arg_iter);

    s_vpi_value vi, vo;
    vi.format = vpiStringVal;
    vpi_get_value (arg2, &vi);

    vo.format = vpiStringVal;
    vo.value.str = strdup (getenv (vi.value.str));
    vpi_put_value (arg1, &vo, NULL, vpiNoDelay);

    return 0;
} 
```

VCS 文档应说明如何将其链接到模拟器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T17:00:37.527

使用 Verilog 预处理器通常更简单

```
File = $fopen(`PATH_FILENAME, "r"); 
```

然后从您的 Makefile/shell 脚本调用模拟器，指定要替换的值

`$(SIM) -DPATH_FILENAME=\"$PATH/FileName\" blah.v ...`

我`iverilog`经常`vsim`和伊卡洛斯一起使用这个，朋友们可能支持类似的。

引号被转义，以便它们包含在替换值中，因为预处理器不会在文字值内替换。例如，这种组合*不起作用*：

```
File = $fopen("`PATH_FILENAME", "r"); 
```

...

```
`$(SIM) -DPATH_FILENAME=$PATH/FileName blah.v ...` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T09:48:20.567

在这里我可以看到所有答案，或者他们正在使用一些 DPI 或者需要一些命令行参数。所以我*只用 SystemVerilog*语法分享我的答案。答案**并不特定于任何模拟器**。但肯定是针对 Linux 环境的；对于其他操作系统，我们需要更改*$system*命令。

> 在开始模拟之前，我们需要使用一些预处理脚本或模拟脚本来设置这个“logPath”系统变量。

```
 string myPath;

 initial begin
     //Writing System Variable To A File
     $system("echo ${logPath} > logPath.txt");

     //Opening that file and reading to a string variable
     fh = $fopen ("./logPath.txt", "r");
     void'($fscanf(fh,"%s",myPath));

     //Appending File Name To That Path
     myPath = {myPath,"/note.txt"};

     //Closed and remove this temporary file
     $fclose(fh);
     $system("rm -rf logPath.txt");

     //Open a file at the path that you have extracted from System Variable
     //Do whatever you want now 
     fh = $fopen (myPath, "w");

     repeat(10) begin
         $fdisplay (fh, "%t %M: Write Line Number =|%0d| ", $time, i);
         i++;
     end

     $fclose(fh);
  end 
```

# objective-c - 从不兼容的类型'const uint8_t *const'（又名'const unsigned char *const'）分配给'NSUInteger *'（又名'unsigned long *'）

> ID：15034021
> 
> 赞同：0
> 
> 时间：2013-02-22T22:08:16.803
> 
> 标签：objective-c, variables, methods

我对目标 c 编程比较陌生，所以请不要因为这个问题而杀了我。目前我正在开发一个小程序，它应该能够对 mp4 文件的 id3 标签进行一些更改。我已经植入了 mp4v2 库，现在我正在尝试编写一种方法来读取特定文件的标签信息。我的问题是我无法将标签“contentRating”的值放入 NSUInteger 变量中。该库的引用说我得到了这样的值：“const uint8_t *”。但是我怎样才能把它放到一个 NSUInteger 变量中呢？非常感谢您提前提供的帮助！

这是我的代码：

```
- (void)getSongInfo:(NSString *)path
          title:(NSString *)t
          album:(NSString *)alb
         artist:(NSString *)art
         rating:(NSUInteger *)r
       albumart:(NSData *)aArt {

// Transform path in const char
const char *cPath = [path cStringUsingEncoding:NSASCIIStringEncoding];

// Load File
MP4FileHandle mp4File = MP4Modify(cPath);

// Create Tag var
const MP4Tags* tags = MP4TagsAlloc();

// Get Tags
MP4TagsFetch(tags, mp4File);

// Get Titel + Album + Interpret + Rating
t = [NSString stringWithUTF8String:tags->name];
alb = [NSString stringWithUTF8String:tags->album];
art = [NSString stringWithUTF8String:tags->artist];

r = tags->contentRating; <-- My Problem! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:32:06.593

你可以这样做：

```
- (void)getSongInfo:(NSString *)path
      title:(NSString **)t
      album:(NSString **)alb
     artist:(NSString **)art
     rating:(NSUInteger *)r
   albumart:(NSData **)aArt {

 ...

// Get Titel + Album + Interpret + Rating
*t = [NSString stringWithUTF8String:tags->name];
*alb = [NSString stringWithUTF8String:tags->album];
*art = [NSString stringWithUTF8String:tags->artist];

*r = (NSUInteger)(*tags->contentRating); <-- My Problem! 
```

你可以这样称呼这段代码：

```
NSString* title = nil;
NSString* album = nil;
NSString* artist = nil;
NSUInteger rating = 0;
NSData* albumArt = nil;

[self getSongInfo:path title:&title album:&album artist:&artist rating:&rating albumArt:&albumArt]; 
```

就您的代码而言，我的代码包含两种更改：

1.  参数通过引用传递（因此您可以将值“传回”给调用者）；

2.  `*contentRating`正在被转换为正确的类型（因为 NSUInteger 大于`uint8_t`，所以这个转换不会出现任何问题。

另一方面，我强烈建议创建一个类来保存有关歌曲的信息：

```
@interface MP3Info : NSObject
@property (nonatomic, retain) NSString* title;
...
@end 
```

并重新声明您的方法，例如：

```
- (MP3Info*)getSongInfo:(NSString *)path; 
```

希望能帮助到你。

# php - 使用单个组件

> ID：15034023
> 
> 赞同：0
> 
> 时间：2013-02-22T22:08:30.520
> 
> 标签：php, zend-framework

我已经使用 Zend 1.10 开发了一个 Web 应用程序，并希望开始迁移到 Zend 2，但是我对基于 ZF2 在线教程的过程感到有点畏惧。

对于 Zend Framework 1，它就像定义我的库在哪里并实例化我用于项目的特定类一样简单：

```
$library = '.:php/includes:/home/myusername/public_html/ZendFramework-1.11.11/library';
set_include_path(get_include_path() . PATH_SEPARATOR . $library); 
require_once('Zend/Loader/Autoloader.php');
Zend_Loader_Autoloader::getInstance(); 
```

然后我会使用“$dbWrite = new Zend_Db_Adapter_Pdo_Mysql($config_stuff);”连接到我的数据库 例如。

与创建一个成熟的 Zend 应用程序相比，有没有一种类似的简单方法可以零碎地从 Zend 2 中提取类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:42:39.577

为了完整起见，值得注意的是@Divey 的直接、正确和有用的答案的替代方案。

您可以使用[Composer](http://getcomposer.org/)来获取单个 ZF2 组件。所有[ZF2 组件都在 Packagist 上](https://packagist.org/users/zendframework/)

主要好处是您可以只获取您需要的组件；无需下载整个框架。任何级联依赖项——ComponentX 需要 ComponentY 才能工作——被神奇地检测到（通过 ComponentX 配置）并安装。

`composer.json`此外，使用 Composer，您只需将包添加到项目文件中，就可以访问整个类的生态系统 - ZF2 之外 - Packagist（或仅在 Github 本身，前提是该包支持 Composer）上可用.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T22:22:55.513

听起来你想要[ZF2 的 Standard Autoloader](http://framework.zend.com/manual/2.0/en/modules/zend.loader.standard-autoloader.html)。尝试使用这个：

```
require_once 'Zend/Loader/StandardAutoloader.php';
$loader = new Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));
$loader->register(); 
```

# mysql - 使用 MySQL 空间扩展选择范围内的项目？

> ID：15034024
> 
> 赞同：1
> 
> 时间：2013-02-22T22:08:41.893
> 
> 标签：mysql, geolocation, gps, geospatial, spatial

我对 MySQL 空间扩展完全陌生，所以请原谅我对这个话题的无知。

**场景：**

1）我通过纬度和经度收集用户的位置。我将该位置存储在 MySQL 表中。

2）然后我显示该用户范围内的任何其他用户。范围会很小——比如说 1000 英尺。

**问题：** 存储位置点的最佳做法是什么？查询和选择离该用户最近的点的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T06:38:16.607

*   使用**POINT** Spatial 数据类型来存储坐标。

    结构是这样的：

    ```
     CREATE TABLE gps name varchar(0), `location` point NOT NULL; 
    ```

    请注意列“**位置**”的类型。

*   之后，您必须为“位置”列定义空间索引。

    ```
    CREATE SPATIAL INDEX sp_index ON gps(`location`); 
    ```

*   插入数据（纬度和经度）

    ```
    INSERT INTO gps (name, location) VALUES ( 'India' , GeomFromText( ' POINT(31.5 42.2) ' ) ) 
    ```

    函数**GeomFromText**接受一个字符串并返回一个几何对象。这里 31.5 和 42.2 分别是纬度和经度。请注意，它们之间**没有逗号**。它们由**空格**分隔。

*   读取数据

    ```
    SELECT name, AsText(location) FROM gps; 
    ```

    AsText函数将几何的内部表示转换为字符串格式**。**

    注意：您必须使用 MySQL 5.0 或更高版本的空间扩展支持。还可以使用“MyIsam”数据库引擎进行更快的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T09:55:52.940

不幸的是，MySQL 中没有半径选择点这样的功能。但是你可以很容易地使用这个余弦定律公式：d = acos( sin(φ1)*sin(φ2) + cos(φ1)*cos(φ2)*cos(Δλ) )*R 来获得两点之间的距离。您可以在此处找到详细信息：[http](http://www.movable-type.co.uk/scripts/latlong-db.html) ://www.movable-type.co.uk/scripts/latlong-db.html SQL 查询将如下所示：

```
SELECT acos(sin(radians(Y(point1)))*sin(radians(Y(point2))) + cos(radians(Y(point1)))*cos(radians(Y(point2)))*cos(radians(X(point2))-radians(X(point1)))) * 6371 AS `distance`
FROM locations 
```

# wpf - WPF LINQ 故障

> ID：15034027
> 
> 赞同：0
> 
> 时间：2013-02-22T22:08:58.557
> 
> 标签：wpf, linq

我有一个使用内联 SQL 的 WPF 应用程序，我将应用程序转换为 LINQ，它在所有 PC 的接受上都可以正常工作。应用程序加载正常，但第一次调用包含 LINQ 的方法时，应用程序停止工作。没有错误，光标继续旋转。阻止它的唯一方法是关闭应用程序。我已尝试卸载并重新安装该应用程序以及卸载和重新安装 .net。一切都无济于事。任何人都可以给我的任何建议将不胜感激。

# c# - 为游戏创建信息表

> ID：15034035
> 
> 赞同：1
> 
> 时间：2013-02-22T22:09:25.650
> 
> 标签：c#, windows, overlay

我有兴趣将外部项目与游戏天堂 2 集成。我没有开发人员访问权限。

我设想我的项目会有一个表格，显示前 100 名 Player V Player 的状态。我很幸运地获得了前 100 名的名单，这不是我的问题

我的问题是，如何让我的表格覆盖在游戏屏幕上。我也希望它显示但不接收输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:29:46.063

我在全屏应用程序（例如游戏）上覆盖 Windows 窗体的经验将是一项非常困难的任务，但并非不可能。您可以在此处找到在 XNA 游戏开发表格中完成的示例：http: [//www.gamedev.net/topic/367591-mdxc-overlay-sample/](http://www.gamedev.net/topic/367591-mdxc-overlay-sample/)

# assembly - 尝试为 nand2tetris 书构建 PC（计数器），但我在逻辑上遇到了一些问题

> ID：15034037
> 
> 赞同：5
> 
> 时间：2013-02-22T22:09:29.123
> 
> 标签：assembly, hdl, nand2tetris

这是我的代码：

```
CHIP PC {
    IN in[16],load,inc,reset;
    OUT out[16];

    PARTS:
    Inc16(in = regout, out = incout);
    Mux16(a = regout, b = incout, sel = inc, out = incdecision);
    Mux16(a = incdecision, b = false, sel = reset, out = resetdecision);
    Mux16(a = regout, b = resetdecision, sel = load, out = loaddecision);
    Register(in = loaddecision, load = true, out = regout, out = out);
} 
```

基本上，来自寄存器的值是递增的，仅当 inc 为 1（通过 Mux 检查）时才被接受，然后通过另一个可能重置它的 Mux，然后是另一个可能会或可能不会写入它的 Mux，具体取决于负载值。然后从中产生的任何值（无论是更改的值还是来自旧寄存器的值）都被放入寄存器中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:19:45.870

您似乎没有将`In`信号连接到任何东西。如果`load`设置了信号，则需要获取适当的 Mux16 以将`In`值加载到寄存器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T19:24:55.417

改变 和 的`resetdecision`顺序`loaddecesion`。第一个具有更高的优先级。

```
Inc16(in=outpc, out=outincreased);
Mux16(a=outpc, b=outincreased, sel=inc, out=outinc);
Mux16(a=outinc, b=in, sel=load, out=outload);
Mux16(a=outload, b=false, sel=reset, out=outreset); 
    //And16(a=outLOAD, b[0..15]=reset, out=outreset);
Register(in=outreset, load=true, out=out, out=outpc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T23:55:29.387

Mux16 复位需要在加载 Mux16 之后发生。负载 Mux16 需要将“in”作为“b”引脚。

我来自 Nand2Tetris 的工作代码：

```
Inc16(in = outandabout, out = incout);
Mux16( a = outandabout, b = incout, sel = inc, out = incinc);
Mux16( a = incinc, b = in, sel = load, out = loadout);
Mux16( a = loadout, b = false, sel = reset, out= outreset);
Register(in = outreset, load = true, out = out, out = outandabout); 
```

# mysql - 使用经典asp在mysql数据库中输入日期

> ID：15034040
> 
> 赞同：0
> 
> 时间：2013-02-22T22:09:59.607
> 
> 标签：mysql, sql, asp-classic

这里的第一条消息，我不知道我为什么等了这么久。所以我目前正在修复一个使用 mysql 数据库用经典 asp 构建的网站。

在数据库中，有一个日期时间类型的日期字段。所以之前编写它的人想用 NOW() 在数据库中输入日期。NOW() 不起作用，我认为它只能在 Sql Server 上工作。我可以用什么函数替换 NOW() 以将日期输入为 2013-02-13 22:36:10 格式？

谢谢

```
SQL = "INSERT INTO MEMBERS (REFERERID, FIRSTNAME, LASTNAME, DATEJOINED) 
       VALUES ('"& Session("MEMBERID") &"', '"& FIRSTNAME &"', '"& LASTNAME &"', 
       '"& NOW() &"')"
Set objAddCus = objConn.execute(SQL) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:46:15.957

尝试这个 ;）

```
SQL = "INSERT INTO MEMBERS (REFERERID, FIRSTNAME, LASTNAME, DATEJOINED) 
   VALUES ('"& Session("MEMBERID") &"', '"& FIRSTNAME &"', '"& LASTNAME &"', NOW() )"
Set objAddCus = objConn.execute(SQL) 
```

Mysql 可以以这种方式处理 now() ，就像查询的一部分，而不是 asp 函数；)

萨卢多斯，

# android - Android，每个图像按钮的 XML？

> ID：15034045
> 
> 赞同：0
> 
> 时间：2013-02-22T22:10:11.183
> 
> 标签：android, xml, imagebutton

我希望在按下按钮时更改按钮的图像。我在一个选择器 XML 文件中这样做，这很好，并且在我迄今为止看到的所有示例中似乎都是一样的。

我是否正确地说每个按钮都需要一个单独的 XML 文件？我有一个带有 6 个按钮的活动，这是否意味着为了代表每个被按下的按钮，我需要 6 个 XML 文件？

这似乎很麻烦，所以也许有人可以阐明最好的方法。这是我要用于的图像`pressed`：
![截屏](../Images/347b3ea78276550972dc316f4b3e2ea1.png)

不是`pressed`：
![截屏](../Images/ffb18dfb358571af15bfdd25cf529e72.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:12:39.433

如果您希望所有按钮看起来都一样，您只需要一个 XML 文件来定义按钮的外观。您可以对任意数量的图像按钮使用相同的外观。如果您想要相同的背景，但不同的图标，您仍然只需要一个选择器文件，但您提供的图像应该只是红色和蓝色方块，没有问号。然后，作为 imagebutton 的 src，你可以放置问号、时钟、欧元等的透明图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:12:59.013

不，您只需要定义一次状态选择器列表，并且可以将它重用于任意数量的视图（假设您希望它们看起来都一样）。

# jquery - Jquery span 在鼠标输入时消失

> ID：15034056
> 
> 赞同：0
> 
> 时间：2013-02-22T22:11:39.903
> 
> 标签：jquery

我希望 mouseenter 后出现的跨度留在那里，并且用户能够将鼠标悬停在跨度上并单击链接......

我知道跨度正在消失，因为鼠标离开了图像......我怎样才能让跨度保持在那里并且用户能够将鼠标悬停在它上面？

继承人的html

```
 <div id="tour">
   <h2>Paris, France Tour</h2>
   <p>$2,499 for 7 Nights</p>
   <button>See photos from our last tour</button>
   <ul class="photos">
     <li>
       <img class="item1" alt="Paris1" src="http://www.cmclove.org/img/left01.jpg">
        <span class="cap1"><div class="span_padding">Arc de Triomphe</div></span>
      </li>
      <li>
        <img class="item1" alt="Paris2" src="http://www.cmclove.org/img/left01.jpg">
        <span class="cap1"><div class="span_padding">The Eiffel Tower</div></span>
      </li>
      <li>
        <img class="item1" alt="Paris3" src="http://www.cmclove.org/img/left01.jpg">
        <span class="cap1"><div class="span_padding">Notre Dame de Paris</div></span>
      </li>
      <li>
        <img class="item1" alt="Paris3" src="http://www.cmclove.org/img/left01.jpg">
       <span class="cap1"><div class="span_padding">Notre Dame de Paris</div></span>
      </li>
    </ul>
  </div> 
```

这是js

```
 $('#tour').on('click', 'button', function(e){
      $('.photos').slideToggle();
      });

       function slideDown(e) {
       var span = $(this).parents('li').find('span');
       span.fadeToggle();
          }

       $('.photos').on('mouseenter', 'img', slideDown) 
       $('.photos').on('mouseleave', 'img', slideDown) 
```

这是小提琴

[http://jsfiddle.net/N6ZW3/](http://jsfiddle.net/N6ZW3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:25:11.067

像这样 ？

[http://jsfiddle.net/N6ZW3/4/](http://jsfiddle.net/N6ZW3/4/)

```
$('#tour button').click(function(e) {
  $('.photos').slideToggle();
});

function slideDown(e) {
    var span = $(this).find('span');
    span.fadeToggle();
}

$('.photos li').mouseenter(slideDown) 
$('.photos li').mouseleave(slideDown) 
```

# php - 从不同的列中选择多个值

> ID：15034057
> 
> 赞同：1
> 
> 时间：2013-02-22T22:11:50.237
> 
> 标签：php, mysql, web

我有 5 个不同的列，每列有 100 多行，每列都有各种各样的数字。

我已经能够计算第 1 列中等于 3 的所有值

我希望能够计算所有 5 个不同列中的所有数字 3 并添加它们

```
$countquery = "SELECT COUNT(*) FROM PowerBall WHERE W1=3";
$countresult = mysql_query($countquery) or die(mysql_error());

while($countrow = mysql_fetch_array($countresult)) {
    echo "<br />";
    echo "There are ". $countrow['COUNT(*)']."-3s";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:13:22.513

您可以使用带有`CASE`表达式的聚合函数来获取所有列中 3 个值的总数。

```
Select
  sum(case when col1 = 3 then 1 else 0 end) TotalCol1,
  sum(case when col2 = 3 then 1 else 0 end) TotalCol2,
  sum(case when col3 = 3 then 1 else 0 end) TotalCol3,
  sum(case when col4 = 3 then 1 else 0 end) TotalCol4,
  sum(case when col5 = 3 then 1 else 0 end) TotalCol5
from PowerBall 
```

如果你想在一列中，那么你可以使用：

```
select TotalCol1 + TotalCol2 + TotalCol3 + TotalCol4 + TotalCol5
from
(
  Select
    sum(case when col1 = 3 then 1 else 0 end) TotalCol1,
    sum(case when col2 = 3 then 1 else 0 end) TotalCol2,
    sum(case when col3 = 3 then 1 else 0 end) TotalCol3,
    sum(case when col4 = 3 then 1 else 0 end) TotalCol4,
    sum(case when col5 = 3 then 1 else 0 end) TotalCol5
  from PowerBall
) src 
```

甚至：

```
select sum(Total)
from
(
  Select count(col1) Total
  from PowerBall
  where col1 = 3
  union all
  Select count(col2)
  from PowerBall
  where col2 = 3
  union all
  Select count(col3)
  from PowerBall
  where col3 = 3
  union all
  Select count(col4)
  from PowerBall
  where col4 = 3
  union all
  Select count(col5)
  from PowerBall
  where col5 = 3
) src 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:15:10.807

```
SELECT SUM(CASE WHEN COL1 = 3 THEN 1 ELSE 0 END) AS 'Col1',
SUM(CASE WHEN COL1 = 3 THEN 1 ELSE 0 END) AS 'Col2',
....
 FROM PowerBall WHERE W1 is not null 
```

# nservicebus - 在 NServiceBus 中添加用户和时间的正确位置在哪里？

> ID：15034058
> 
> 赞同：0
> 
> 时间：2013-02-22T22:11:55.893
> 
> 标签：nservicebus

我的一些 NServiceBus 命令将需要跟踪谁发出命令以及何时发出命令。我非常不确定推荐的实现方式：

我应该创建一个基类`MessageBase`、添加`public Dictionary<string, string> Headers;`和实现`IMutateOutgoingMessages`吗？

是否应该将其添加到 MessageContext 中？如果是这样，我如何确保总线在发送每条消息（需要标头）之前添加它？

它已经完成了，我只是不知道如何访问它？（看起来用户在原始 MSMQ 消息中......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:02:37.833

NServiceBus 已经为您提供了使用“NServiceBus.TimeSent”标头发送消息的时间。

使用内置的 NServiceBus 标头字典并跳过 MessageBase

附加用户 ID 最好在传出消息修改器中完成。只需从例如 HttpContext 中获取 ID 并将其添加为标题。

[http://support.nservicebus.com/customer/portal/articles/860492](http://support.nservicebus.com/customer/portal/articles/860492)

要获得时间（在您的处理程序/传奇中）：

`Bus.CurrentMessageContext.TimeSent`

# javascript - 了解切片在函数参数中的使用

> ID：15034059
> 
> 赞同：0
> 
> 时间：2013-02-22T22:12:01.973
> 
> 标签：javascript

我正在阅读来自 Mozilla 开发者网络的这段代码：

```
function list() {
  return Array.prototype.slice.call(arguments);
}

var list1 = list(1, 2, 3); // [1, 2, 3] 
```

函数里面的那行让我很困惑，为什么我可以`call`在不指定对象的情况下使用`this`？

如果`arguments`是`this`这种情况，那么我没有将任何参数传递给`slice`函数，对吗？

`this`如果我在得到一个空数组时放入一些随机元素，如下所示：

```
return Array.prototype.slice.call([], arguments); 
```

我知道我误解了一些东西，但是什么？:)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:14:26.233

> 如果参数是`this`这种情况

...它是

> 那么我没有将任何参数传递给切片函数，对吗？

正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:17:59.463

`slice`不带参数调用时返回整个数组的副本

```
> x = [1, 2, 3]
> x.slice()
[1, 2, 3]
> x.slice() == x
false 
```

在您的示例中，这样做是为了将`arguments`伪数组转换为真正的数组。

# sql - SELECT (SUBQUERY) 的奇怪性能问题

> ID：15034061
> 
> 赞同：0
> 
> 时间：2013-02-22T22:12:09.037
> 
> 标签：sql, sql-server

我有一个存储过程最近出现了一些问题，我最终将其缩小到 1 SELECT。问题是我无法弄清楚到底发生了什么来破坏这个查询的性能。我重写了它，但我不确定重写的是完全相同的数据。

原始查询：

```
SELECT 
    @userId, p.job, p.charge_code, p.code
, (SELECT SUM(b.total) FROM dbo.[backorder w/total] b WHERE b.ponumber = p.ponumber AND b.code = p.code)
, ISNULL(jm.markup, 0)
, (SELECT SUM(b.TOTAL_TAX) FROM dbo.[backorder w/total] b WHERE b.ponumber = p.ponumber AND b.code = p.code)
, p.ponumber
, p.billable
, p.[date]
FROM dbo.PO p
INNER JOIN dbo.JobCostFilter jcf 
    ON p.job = jcf.jobno AND p.charge_code = jcf.chargecode AND jcf.userno = @userId
LEFT JOIN dbo.JobMarkup jm
    ON jm.jobno = p.job
    AND jm.code = p.code
LEFT JOIN dbo.[Working Codes] wc
    ON p.code = wc.code
INNER JOIN dbo.JOBFILE j
    ON j.JOB_NO = p.job
WHERE (wc.brcode <> 4 OR @BmtDb = 0)
GROUP BY p.job, p.charge_code, p.code, p.ponumber, p.billable, p.[date], jm.markup, wc.brcode 
```

这个查询实际上永远不会完成运行。对于我们拥有的一些更大的工作，它实际上会超时。

如果我将选择中的 2 个子查询更改为像连接一样读取：

```
SELECT
    @userid, p.job, p.charge_code, p.code
    , (SELECT SUM(b.TOTAL))
    , ISNULL(jm.markup, 0)
    , (SELECT SUM(b.TOTAL_TAX))
    , p.ponumber, p.billable, p.[date]
FROM dbo.PO p
INNER JOIN dbo.JobCostFilter jcf 
    ON p.job = jcf.jobno AND p.charge_code = jcf.chargecode AND jcf.userno = 11190030
INNER JOIN [BACKORDER W/TOTAL] b
    ON P.PONUMBER = b.ponumber AND P.code = b.code
LEFT JOIN dbo.JobMarkup jm
    ON jm.jobno = p.job
    AND jm.code = p.code
LEFT JOIN dbo.[Working Codes] wc
    ON p.code = wc.code
INNER JOIN dbo.JOBFILE j
    ON j.JOB_NO = p.job
WHERE (wc.brcode <> 4 OR @BmtDb = 0)
GROUP BY p.job, p.charge_code, p.code, p.ponumber, p.billable, p.[date], jm.markup, wc.brcode 
```

数据看起来与我几乎完全相同（尽管总共有数千行，所以我可能是错的），并且运行得非常快。

任何想法表示赞赏..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:44:01.143

*   性能

在第二个查询中，逻辑读取次数较少，因为表 [BACKORDER W/TOTAL] 仅被扫描一次。在第一个查询中，两个独立的子查询被独立处理，并且表被扫描两次，尽管两个子查询具有相同的谓词。

*   正确性

如果要检查两个查询是否返回相同的结果集，可以使用 EXCEPT 运算符：

如果两个语句：

第一个 SELECT 查询...除了第二个 SELECT 查询...

和

第二个 SELECT 查询.. 除了第一个 SELECT 查询...

返回一个空集，结果集是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:58:04.357

就正确性而言，您`inner join`在`[BACKORDER W/TOTAL]`第二个查询中，因此如果第一个查询`Null`在子查询中有值，则这些行将在第二个查询中丢失。

就性能而言，优化器是一种启发式方法——它有时会使用非常糟糕的查询计划，即使是最小的更改有时也会导致完全不同的查询计划。您最好的机会是比较查询计划并查看导致差异的原因。

# symfony - Symfony2预期的“对象或数组”类型的参数，“字符串”给定

> ID：15034063
> 
> 赞同：3
> 
> 时间：2013-02-22T22:12:12.427
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我正在拼命地使用实体 City OneToMany Anagrafic 保存表单。我在表单中输入了“property_path”CityType 并返回错误，

```
Expected argument of type “object or array”, “string” given 
```

我不明白我做错了什么！

```
class Anagrafic
{
/**
 * @ORM\ManyToOne(targetEntity="City", inversedBy="anagrafics", cascade={"persist"})
 * @ORM\JoinColumn(name="city_id", referencedColumnName="id")
*/
private $city;
//..
//..
class City
{
/**
 * @ORM\OneToMany(targetEntity="Anagrafic", mappedBy="city", cascade={"persist"})
 */
private $anagrafics;
//...
//...
class CityType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('comune', 'hidden', array('property_path' => 'city.id'))
//..
//..
class AnagraficType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('city', new CityType()) 
```

编辑：抱歉信息不完整，这是个例外：

```
CRITICAL - Symfony\Component\Form\Exception\UnexpectedTypeException: 
Expected argument of type "object or array", "string" given (uncaught exception) at
 /var/www/MyBusiness0_1/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php line 342 

/var/www/MyBusiness0_1/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php at line 342   
    for ($i = 0; $i <= $lastIndex; ++$i) {
        if (!is_object($objectOrArray) && !is_array($objectOrArray)) {
            throw new UnexpectedTypeException($objectOrArray, 'object or array');
        }
        $property = $this->elements[$i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T17:37:07.860

问题是当你传递一个字符串或一个数字时，symfony 需要一个对象，所以我们需要实现一个 DataTransformer 来将字符串转换为对象，反之亦然。

[http://symfony.com/doc/master/cookbook/form/data_transformers.html](http://symfony.com/doc/master/cookbook/form/data_transformers.html)

问题解决了！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:01:32.070

看起来`propertyPath`需要一个对象或一个数组。所以这一行是错误的：

```
$builder->add('comune', 'hidden', array('property_path' => 'city.id')) 
```

你在`city.id`这里经过，那不应该是一个字符串。我不是 Symfony 用户，也不熟悉 FormBuilder，因此您必须查找手册如何使用该`property_path`选项。

顺便提一句。这与学说 2 无关，因此删除该标签是合适的。

# eclipse - eclipse .classpath 可以支持不同环境的多个 JRE 吗？

> ID：15034065
> 
> 赞同：1
> 
> 时间：2013-02-22T22:12:12.953
> 
> 标签：eclipse, macos, ubuntu, classpath

我们一直在使用 Java SE 7 (13) 开发 MacOSX。我们的新同事正在使用 OpenJDK 的 Ubuntu。我一直在将 .classpath 检查到 git 中，这在我们的新同事加入之前一直很好。有没有办法让 .classpath 为不同的用户支持不同的 JRE 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:10:32.220

我不记得有这样的事情，但我会这样做。

为每个环境创建一个 .classpath（.classpath.macos、.classpath.ubuntu、...）。然后从源代码控制中删除 .classpath，并确保它被您的 VCS 忽略（例如，添加到 .gitignore 以用于 git）。

然后mac上的开发者创建一个链接

```
ln -s .classpath.macos .classpath 
```

在 ubuntu 上也一样。

# c - Windows 上 C 程序中的系统调用问题

> ID：15034074
> 
> 赞同：1
> 
> 时间：2013-02-22T22:13:04.963
> 
> 标签：c, windows

在 C 程序中，我试图构建一个将在系统调用中使用的字符串：

```
 char myCommands[128];
   ...
   /* packing myCommands string */
   ..
   system(myCommands); 
```

要执行的命令字符串如下所示：

```
 setEnvVars.bat & xCmd.exe ...command-paramters... 
```

如果 "...command-parameters..." 不包含任何引号字符，则一切正常且语句成功。

如果 "...command-parameters..." 包含任何引号字符，我会收到此错误：

```
 The filename, directory name, or volume label syntax is incorrect. 
```

例子：

```
 setEnvVars.bat & xCmd.exe -e "my params with spaces" 
```

另一个奇怪的事情是，如果我将 myCommands 字符串逐字逐句放入 *.bat 文件中，引号和所有它都可以正常工作。

“系统（...）”有什么不同？

==好的，更多细节==

我有一个简单的程序来演示这个问题。这个版本**确实**有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void) {
    char cmdStr[1024];
    strcpy(cmdStr, "\"C:\\Windows\\system32\\cmd.exe\" /c echo nospaces & C:\\Windows\\system32\\cmd.exe /c echo moretext");
    printf("%s\n", cmdStr);
    system(cmdStr);
} 
```

输出：

```
"C:\Windows\system32\cmd.exe" /c echo nospaces & C:\Windows\system32\cmd.exe /c echo moretext
nospaces
moretext 
```

这**不起作用**：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void) {
    char cmdStr[1024];
    strcpy(cmdStr, "\"C:\\Windows\\system32\\cmd.exe\" /c echo nospaces & \"C:\\Windows\\system32\\cmd.exe\" /c echo moretext");
    printf("%s\n", cmdStr);
    system(cmdStr);
} 
```

输出：

```
"C:\Windows\system32\cmd.exe" /c echo nospaces & "C:\Windows\system32\cmd.exe\" /c echo moretext
The filename, directory name, or volume label syntax is incorrect. 
```

我认为它可能与“cmd.exe /S”选项有关，但尝试引入该选项不会改变行为。

cmd.exe 路径周围的引号不需要，因为没有空间，但在我的目标程序中，我试图允许所有安装路径，其中可能包括“C:\Program Files”

（认为​​路径名中有空格是个好主意的人的一个痘痘。）

（并且使用单引号不会改变行为。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:20:14.450

敲了一阵子后，我放弃了“system(cmdLine)”方法，转而使用“CreateProcess”调用（这将在 Windows 下运行）。

使用 CreateProcess 我能够绕过整个环境变量问题，这就是导致我尝试使用“cmd1 & cmd2”语法的原因。

CreateProcess 将允许您将不同的环境传递给子进程。我能够弄清楚如何重写环境并将其传递给孩子。这巧妙地解决了我的问题。

我重写环境的代码可能有点麻烦，但它可以工作并且看起来相当健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:26:35.043

您可能知道，单引号用于一个字符，双引号用于多个......您还知道，您不能在字符串中包含双引号，或者它会退出字符串并添加它们（取决于情况）.. .

尝试以下操作并告诉您会发生什么：

```
system("setEnvVars.bat & xCmd.exe -e 'my params with spaces'");

system("setEnvVars.bat & xCmd.exe -e \"my params with spaces\""); 
```

# c# - JS 填充 AJAX ToolKit ComboBox 导致错误：“SelectedIndex 无效，因为它不存在于项目列表中”

> ID：15034075
> 
> 赞同：0
> 
> 时间：2013-02-22T22:13:08.740
> 
> 标签：c#, asp.net, combobox

当使用 javascript/ajax 根据 ComboBox A 中的选择重新填充 ComboBox B 中的选项时，选择 B 中具有索引 > 原始索引集的项目会导致错误：

“'...' 有一个无效的 SelectedIndex，因为它不存在于项目列表中。参数名称：值”

显然，无论 javascript 做什么，组合框仍然链接回它们的原始数据源，所以当它真的是 y 时，它认为第 1 项是 x，或者第 2 项不存在，这是有问题的。至少这就是我从类似帖子中得到的。我没有得到的是解决方案，尽管...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:22:47.657

如果您的 ComboBox B 最初是通过数据绑定填充的，那么您的 ViewState 将反映这一点，并且您的 ComboBox B 将在回发时从 ViewState 中的信息中重新填充。因此，大于原始项目数的 SelectedIndex 会让人感到困惑。

（ComboBoxes 的内容不会回发：只是选定的项目。所以它不会知道你在客户端做了什么。）

可能的选项包括：使用 UpdatePanel 更新您的组合框而不刷新整个页面，或使您的 ComboBox B 成为普通 HTML `select`，仅从客户端填充它（通过 Ajax？）并从服务器上的 Forms 集合中获取其值回发后的一面。

# ruby - 获取扩展类的名称

> ID：15034079
> 
> 赞同：0
> 
> 时间：2013-02-22T22:13:27.273
> 
> 标签：ruby

鉴于以下情况：

```
class Animal
  def self.info
    "This is the class '#{self.class.to_s}', and the available breeds are #{BREEDS.to_s}"
  end
end

class Dog < Animal
  BREEDS = %w(x y z)
end 
```

当我打电话时：

```
Dog.info
=> This is the class 'Class' 
```

我期待`Dog`而不是`Class`，我如何从 Animal 获取当前的类名而不放入`info`类中`Dog`。

另外，我得到`undefined constant Animal::BREEDS`

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:25:43.847

`self.to_s`，不是`self.class.to_s`。你已经在“里面”`self`了`Animal`

要访问常量： `self::BREEDS`

所以：

```
class Animal
  def self.info
    "This is the class '#{self.to_s}', and the available breeds are #{self::BREEDS.to_s}"
  end
end 
```

# java - Java 数字序列生成器不工作

> ID：15034080
> 
> 赞同：0
> 
> 时间：2013-02-22T22:13:45.783
> 
> 标签：java, numbers, sequence

我正在编写的这段代码有问题。代码的目的是为数字序列制定修饰符，然后给出该序列中的前 10 个数字。但是，我的循环机制似乎有问题，因为它在应该只执行 10 时打印出无限数量的值。我计划在代码中包含除法和幂函数，但遇到了这个问题。

```
import java.util.Scanner;

public class PatternCreator {

public static void main(String[] args) {
    Scanner s = new Scanner(System.in);
    System.out
            .println("Please enter the starting value of the number sequence.");
    double sequence = s.nextInt();
    System.out
            .println("Please enter the addition/subtraction modifier; e.g. 2,-2.");
    double addsub = s.nextInt();
    System.out
            .println("Please enter the multiplication modifier; 0 for none.");
    double mult = s.nextInt();
    System.out.println("Please enter the division modifier; 0 for none.");
    double divi = s.nextInt();
    System.out
            .println("Please enter the exponential modifier; 0 for none.");
    double power = s.nextInt();

    double addonly = sequence + addsub;

    while (mult == 0 && divi == 0 && power == 0) {
        for (int count1 = 1; count1 <= 10; count1++) {
            if (count1 == 1) {
                System.out.print(sequence + " ");
            } else {
                System.out.print(addonly + " ");
                addonly = addonly + addsub;
            }
        }
    }

    double multadd = sequence + addsub * mult;

    while (mult != 0 && divi == 0 && power == 0) {
        for (int count2 = 1; count2 <= 10; count2++) {
            if (count2 == 1) {
                System.out.print(sequence + " ");
            } else {
                System.out.print(multadd + " ");
                multadd += multadd;
            }
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:15:28.227

听起来像`mult`,`divi`和`power`都是 0，而且你永远不会改变它们——因此你正在执行你的`while`循环（因此你的`for`循环）无限次。

为什么你有那个while循环呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:17:05.173

你永远不会改变多、分或权力的价值。如果这些价值观永远不会改变，你如何期望这段时间结束？

# java - 定时事件的字符串输出

> ID：15034082
> 
> 赞同：0
> 
> 时间：2013-02-22T22:13:51.003
> 
> 标签：java, android, android-layout

我开始开发一个安卓应用程序。我正在寻找启动应用程序并从 SQLite DB 中获取一条消息并将其发布在屏幕上，然后定期获取一个新查询并将旧消息交换为新消息，大约每 30 秒一次。

从本质上讲，它是在给用户一些时间阅读之后发布正在为新的报价刷新的报价。

我想知道解决这个问题的正确方法是什么？

我应该使用`Handler`类吗？或者`Timer`？还是有更好的方法来获取定时事件？

在我有定时事件之后，我将如何更新应用程序上的文本？我试图避免使用`Toast`该类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:22:16.907

最简单的方法可能是使用 AsyncTask ( [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:26:05.993

您可以使用每 30 秒获取新消息的线程。如果您不想使用 Toast，可以将 TextView 放入您的活动并刷新其文本属性。要将消息传递给活动，您可以使用 MessageHandler。

最好的祝福。

# windows-phone-8 - 在 Windows Phone 中检测耳机点击

> ID：15034084
> 
> 赞同：1
> 
> 时间：2013-02-22T22:13:57.110
> 
> 标签：windows-phone-8, windows-phone

当按下连接到手机的耳机上的按钮时，是否可以接收某种事件？默认情况下，它会接听/挂断电话，但我想重用它来暂停/恢复媒体文件。

# git - 远程 GitStack - 创建分支

> ID：15034085
> 
> 赞同：0
> 
> 时间：2013-02-22T22:13:58.777
> 
> 标签：git, git-bash, gitstack

我只是不明白为什么这么简单的东西没有写在任何地方......所以我正在努力在远程 GitStack 存储库上创建一个分支。我查看了几十个网页，发现了无数的建议，但是我尝试的任何一个，我总是以“致命：不是 git 存储库（或任何父目录）：.git”错误消息告终. 我使用 Web 界面在 GitStack 中创建了一个空存储库。到目前为止，我最好的尝试是：

```
git clone http://abc.def.ghi.jkl:9876/TestRepo.git 
```

这告诉我我克隆了一个空存储库。然后我尝试推送一个分支：

```
git push remote http://abc.def.ghi.jkl:9876/TestRepo.git 
```

为此，我每次都收到错误消息。所以基本问题：我无法将我的项目推送到 Git 存储库，因为不存在分支。但我什至无法创建一个裂缝。我哪里出错了有什么建设性的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:16:18.050

您首先必须在本地提交更改，然后才能推送它们。

```
git add .
git commit -m "Commit message" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:20:43.347

最初，您有一个空的本地存储库。

将一些文件添加到文件夹并运行这些命令

```
git add *
git commit -m 'My message' 
```

如果您正在寻找分支，请执行以下操作。

```
git checkout -b branchName 
```

这将创建一个分支并自动将您移至该分支。添加一些文件或更改一些文件并与第一次一样：

```
git add *
git commit -m 'My message' 
```

现在您在 master 分支中有一个提交，并且一个名为 branchName 的分支从第一个提交分支。现在你可以留在你的新分支并继续在那里工作，或者你可以在 master 和你的分支之间来回切换以在两个地方工作。

```
git checkout master - takes you back to master
git checkout branchName - takes you to the branch 
```

如果要将分支合并到 master，请执行以下操作：

```
git checkout master
git merge branchName 
```

然后解决冲突（如果有任何问题）并继续

```
git add *
git commit -m 'Commit message' 
```

希望我为你澄清

如果您想使用 git push 推送分支，那么只需执行此操作

git push origin branchName:remoteBranchName

branchName 是您要推送的分支的名称，remoteBranchName 是您希望它在将其推送到服务器时具有的名称。

Origin 是您第一次克隆时赋予远程仓库的默认名称。如果 origin 不存在或者你的遥控器有不同的名字，那么运行这个：

```
git remote - this will list all remotes set up 
```

然后只需使用列表中的一个名称（无论您想推送到哪个名称）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:20:51.623

```
git push remote http://abc.def.ghi.jkl:9876/TestRepo.git 
```

这意味着，您要将分支推`http://abc.def.ghi.jkl:9876/TestRepo.git`送到名为`remote`. 你正在寻找的是

```
git push origin <localBranchName>[:<remoteBranchName>] 
```

`origin`是您最初从中克隆的遥控器的默认名称。您可以随心所欲地更改它（以及您可以拥有与本地存储库关联的尽可能多的遥控器），但那是另一个主题。

`localBranchName`是本地（工作区）存储库中的分支名称。当然它必须存在

```
git branch localBranchName
git checkout localBranchName 
```

通常你应该有一些有用的东西

```
# do something useful
git add fileA
# and so on (or just "git add .")
git commit 
```

现在你可以推送它了

```
git push origin localBranchName 
```

`remoteBranchName`如果它应该与本地名称相同，您可以省略。顺便说一句：主要开发分支的（按照约定）默认分支名称是`master`（与 SVNs 比较`trunk`）

更新：要读的东西:) [http://git-scm.com/book](http://git-scm.com/book)

# r - 随机 x 位字符串的生成

> ID：15034087
> 
> 赞同：0
> 
> 时间：2013-02-22T22:14:08.387
> 
> 标签：r, random, bit

有没有一种简单的方法可以在 R 编程语言中生成随机 x 位字符串，其中 x 是位数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:59:45.937

如果您的意思是生成随机字符串`x`，请尝试以下操作：

```
x <- 10 # some number of characters

paste(letters[ sample(1:26,size=x,replace=T) ] ,collapse='') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:17:10.197

随`bit`包：

```
> as.bit(sample(2,x,replace=TRUE)==1)
bit length=50 occupying only 2 integers
    1     2     3     4     5     6     7     8          43    44    45    46 
 TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE    ..  TRUE FALSE FALSE  TRUE 
   47    48    49    50 
FALSE FALSE FALSE FALSE 
```

包将它们打印为 TRUE 和 FALSE，但如果你愿意，你可以让它做 0 和 1...

```
> x=50
> bits = as.bit(sample(2,x,replace=TRUE)==1)
> paste(as.integer(bits),collapse="")
[1] "11010000001100101001001101010001000101110001010010"
> 
```

# objective-c - Xcode 中的 Mach-O 链接器错误

> ID：15034089
> 
> 赞同：1
> 
> 时间：2013-02-22T22:14:16.720
> 
> 标签：objective-c, xcode, macos

好的，所以我有 2 个项目。我想将一个类文件从项目 1 导入到项目 2。当我导入类文件时。我收到链接器错误。这是它的样子。

```
 Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_ClassFile1", referenced from:
      objc-class-ref in ClassFile2.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:34:24.103

您的标签包括 ios 和 osx。如果您正在构建 iOS 应用程序，请检查 Xcode 项目中的架构设置。它不应该是 x86_64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:37:02.987

您可能忘记了将目标添加到该文件。在 Xcode 中，选择 .m 文件并在右窗格的“文件检查器”中选中目标成员。确保为该文件检查目标。

# applescript - 使用 AppleScript 选择组合框项目不会触发项目操作

> ID：15034090
> 
> 赞同：2
> 
> 时间：2013-02-22T22:14:17.337
> 
> 标签：applescript

我正在尝试使用 AppleScript 单击选择框中的项目。

![窗口截图](../Images/43ce49953ac4f8a193f4061aaa1bb5df.png)

当用鼠标手动单击“更多...”项目时，会打开一个标准的 OSX 文件选择器对话框，但是当我尝试使用 AppleScript 执行此操作时，“更多...”项目显示为所选项目框，但没有显示对话框。

到目前为止我已经尝试过......（元素名称来自 Automator 记录器）

```
tell application "System Events"

    click static text 1 of window 1 of application process "DYMO Word Addin"
    -- combo box arrow
    click UI Element 1 of combo box 2 of group 1 of window 1 of application process "DYMO Word Addin"

    set labelsList to (list 1 of scroll area 1 of combo box 2 of group 1 of window 1 of application process "DYMO Word Addin")
    set numLabelsInList to (count text fields of labelsList)
    set theTextField to (text field numLabelsInList of labelsList)

    if numLabelsInList > 1 then

            repeat with z from 1 to (numLabelsInList - 1)
                    key code 125 -- down arrow
            end repeat

    end if

    -- stuff I've tried

    click theTextField
    keystroke return
    key code 36 -- return
    set focused of theTextField to true
    set value of attribute "AXFocused" of theTextField to true
    perform action "AXConfirm" of theTextField

end tell 
```

...现在我没有想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:16:52.473

经过大量测试后，文件对话框仅在组合框具有焦点时打开，并且单击组合框箭头按钮和菜单项实际上并没有赋予它焦点。

[http://lists.apple.com/archives/accessibility-dev/2006/Oct/msg00013.html](http://lists.apple.com/archives/accessibility-dev/2006/Oct/msg00013.html)

在尝试了该线程中的所有方法以赋予元素焦点之后，即使“点击”也不起作用。

[https://apple.stackexchange.com/questions/40141/when-mousekeys-are-on-how-do-i-click-or-move-the-mouse-using-applescript#answer-40859](https://apple.stackexchange.com/questions/40141/when-mousekeys-are-on-how-do-i-click-or-move-the-mouse-using-applescript#answer-40859)

该答案建议[将 cliclick](http://www.bluem.net/en/mac/cliclick/)作为另一种移动和单击鼠标的方式，这很有效。

所以最后我结束了

```
click static text 1 of window 1 of application process "DYMO Word Addin"
set labelsComboBox to (combo box 2 of group 1 of window 1 of application process "DYMO Word Addin")

tell labelsComboBox
        set {xPosition, yPosition} to position of labelsComboBox
        set {xSize, ySize} to size
end tell

set {realXPosition, realYPosition} to {(xPosition + (xSize div 2)) as string, (yPosition + (ySize div 2)) as string}

do shell script "/usr/local/bin/cliclick m:" & realXPosition & "," & realYPosition & " dc:" & realXPosition & "," & realYPosition

-- combo box arrow
click UI element 1 of labelsComboBox

... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-24T02:14:02.260

在这里你可以找到有类似问题的人，答案也是 cliclick

[https://discussions.apple.com/message/17662850#17662850](https://discussions.apple.com/message/17662850#17662850)

# mysql - 如何重写此 MySQL 查询以包含参数？

> ID：15034093
> 
> 赞同：1
> 
> 时间：2013-02-22T22:14:34.457
> 
> 标签：mysql, vb.net

**晚上好，**

我今天整天都在做这件事，但无济于事。我正在使用下面的代码在文本框中获取用户输入并搜索数据库（作为用户类型）并将结果显示在 ListView 控件中。它按原样工作，但我知道它不安全，因为它没有参数化。我知道如何将参数添加到 MySQLCommand 对象，但不知道如何将其添加到查询中。任何帮助将不胜感激，谢谢。

**这是我的代码：**

```
Private Sub TextBoxSearch_TextChanged(sender As Object, e As System.EventArgs) Handles TextBoxSearch.TextChanged

    Dim dbConn As New MySqlConnection(String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password))
    Dim dbQuery As String = ""
    Dim dbCmd As New MySqlCommand
    Dim dbReader As MySqlDataReader
    Dim a, b, c, d, f, g

    Try
        dbQuery = "SELECT * FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
            "WHERE nameCOMPANY OR accountNumber LIKE '%" & TextBoxSearch.Text & "%' " & _
            "ORDER BY nameCOMPANY ASC"
        dbConn.Open()
        dbCmd = New MySqlCommand(dbQuery, dbConn)
        dbReader = dbCmd.ExecuteReader()

        ListViewRecords.Items.Clear()

        Do While dbReader.Read()

            a = (dbReader.Item("ccID").ToString())
            b = (dbReader.Item("accountNumber").ToString())
            c = (dbReader.Item("nameCOMPANY").ToString())
            d = DecryptCard(dbReader.Item("ccNumber").ToString())
            f = (dbReader.Item("ccExpireMonth").ToString())
            g = (dbReader.Item("ccExpireYear").ToString())

            Dim item As ListViewItem = ListViewRecords.Items.Add(a)
            item.SubItems.Add(b)
            item.SubItems.Add(c)
            item.SubItems.Add(d)
            item.SubItems.Add(f)
            item.SubItems.Add(g)
        Loop
        dbReader.Close()
    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                            vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    dbConn.Close()
    dbCmd.Dispose()

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:14:25.057

我假设您的问题是通配符无法正常工作。这不起作用，因为参数不能用引号引起来。

```
dbQuery = "SELECT * FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
        "WHERE nameCOMPANY OR accountNumber LIKE '%?ParameterName%' " & _
        "ORDER BY nameCOMPANY ASC" 
```

要解决此问题，您可以先将通配符连接到参数中，然后将其插入查询中。

```
Dim parameter = "%" & TextBoxSearch.Text & "%"

dbQuery = "SELECT * FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
        "WHERE nameCOMPANY OR accountNumber LIKE ?ParameterName " & _
        "ORDER BY nameCOMPANY ASC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:26:16.177

你的意思是这样的：

```
 dbQuery = "SELECT * FROM cc_master INNER JOIN customer " & _
        "ON customer.accountNumber = cc_master.customer_accountNumber " & _
        "WHERE nameCOMPANY OR accountNumber LIKE '%' + ? + '%' " & _
        "ORDER BY nameCOMPANY ASC"

    dbConn.Open()
    dbCmd.Connection = dbConn
    dbCmd.CommandType = CommandType.Text
    dbCmd.CommandText = dbQuery
    dbCmd.Parameters.AddWithValue("?", TextBoxSearch.Text)
    dbReader = dbCmd.ExecuteReader() 
```

但是，我认为您可能会更好地使用存储过程并将参数传递给[http://www.mysqltutorial.org/stored-procedures-parameters.aspx](http://www.mysqltutorial.org/stored-procedures-parameters.aspx)

# qt - Qt：信号和槽以及 Q_OBJECT

> ID：15034096
> 
> 赞同：0
> 
> 时间：2013-02-22T22:14:40.413
> 
> 标签：qt, qpushbutton

我在 Qt 中编写了一个程序，它工作正常，但单击按钮不起作用。当我在类声明之后使用 Q_OBJECT 时，它给了我编译错误。

这是我的代码：

```
 #include <QApplication>
    #include <QPushButton>
    #include <QLabel>
    #include <QWidget>

    class Communicate : public QWidget
    {
     // Q_OBJECT

      public:
        Communicate(QWidget *parent = 0);

      private slots:
        void OnPlus();
        void OnMinus();

      private:
        QLabel *label;

    };

    Communicate::Communicate(QWidget *parent)
        : QWidget(parent)
    {
      QPushButton *plus = new QPushButton("+", this);
      plus->setGeometry(50, 40, 75, 30);

      QPushButton *minus = new QPushButton("-", this);
      minus->setGeometry(50, 100, 75, 30);

      label = new QLabel("0", this);
      label->setGeometry(190, 80, 20, 30);

      connect(plus, SIGNAL(clicked()), this, SLOT(OnPlus()));
      connect(minus, SIGNAL(clicked()), this, SLOT(OnMinus()));
    }

    void Communicate::OnPlus()
    {
      int val = label->text().toInt();
      val++;
      label->setText(QString::number(val));
    }

    void Communicate::OnMinus()
    {
      int val = label->text().toInt();
      val--;
      label->setText(QString::number(val));
    }

    int main(int argc, char *argv[])
    {
      QApplication app(argc, argv);

      Communicate window;

      window.setWindowTitle("Communicate");
      window.show();

      return app.exec();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:20:18.527

您需要通过 moc 运行包含 Q_OBJECT 宏的文件，并编译并将其输出与其余应用程序链接在一起。根据您的构建系统，这会自动发生（qmake）或添加一行左右（cmake）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:20:07.113

使用 O_QBJECT 宏并纠正您得到的错误，您可以：

1) 在它自己的 .h 文件中声明您的 QWidget/QObject 派生类，并在它自己的 .cpp 文件中定义它。

2）在你拥有的.cpp中包含你的类定义之后由moc生成的.moc文件（添加类似#include“xxxx.moc”的东西）

LE：您还想使用布局而不是使用 setGeometry 将小部件放置到窗口中，请[在此处阅读更多信息](http://qt-project.org/doc/qt-4.8/layout.html)

# django - 在 Django Admin 中添加到列表样式条目

> ID：15034097
> 
> 赞同：0
> 
> 时间：2013-02-22T22:14:44.660
> 
> 标签：django, django-models, django-admin

我想创建一个模型，用户可以在其中将模型的对象添加到 Django 的列表中。

例如：

```
class Receipt(models.Model):
    items = #many to many maybe? but their is only one receipt for each item object
    #other fields

class Item(models.Model):
    name = model.CharField()
    #otherfields

Class ItemPurchase(models.Model):
    receipt = model.ForeignKey(Receipt)
    item = model.ForeignKey(Item)
    quantity = model.IntegerField()
    #other fields specific to this Receipt 
```

然后在管理员中，我想允许用户在管理面板中将 Item 对象添加到他们当前的 Receipt 对象中，并创建一个 ItemPurchase 记录，但我最好如何做到这一点？在收据完成之前无法关联收据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:16:46.043

事实证明，Django 的内联功能与自定义查询集返回相结合正是我需要做的一切，感谢@Hedde 的提示！

阅读内联： [https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)

这有多种帮助，我只需要朝着正确的方向前进： [formfield_for_foreignkey 和 Inline Admin](https://stackoverflow.com/questions/9640103/formfield-for-foreignkey-and-inline-admin)

# html - 右浮动 div 和 min-width，div 在浏览器调整大小时移动到新行

> ID：15034098
> 
> 赞同：3
> 
> 时间：2013-02-22T22:14:47.873
> 
> 标签：html, css

抱歉标题没有很好地解释，但我会尽力在这里解释问题。这个特定问题可能有一个非常简单的解决方案，如果我可以这样称呼它，但我无法仅使用 css 来解决它。

基本上我有一个父（'wrapper'）div，它有最小宽度集和 2 个浮动子级。当我创建一个动态页面时，用户将能够点击“右”浮动 div，当他点击它时，新内容将被添加到该 div 中。

如果用户想在将内容添加到 div 后调整浏览器大小，则会出现问题。因为当用户尝试减小浏览器宽度（调整浏览器大小）时，主包装器的宽度将增加（当用户添加内容时），“右”浮动 div 将转到新行。所以我的问题是：有什么方法（css）可以禁用 div 移动到新行？

这是 jsfiddle 的链接：http: [//jsfiddle.net/LKgbx/30/](http://jsfiddle.net/LKgbx/30/)

**HTML：**

```
<div id="wrapper">
     <div id="left">I'm left</div>
     <div onclick="changeText()" id="right">I'm right</div>
 </div> 
```

***CSS：***

```
#wrapper{
    min-width:400px;
    background-color:#A3F8A9;
    display:inline-block;
}
#left{
    float:left;
    width:300px;
    background-color:red;
}
#right{
    float:right;
    background-color:blue;
} 
```

**JS：**

```
function changeText(){
    document.getElementById('right').innerHTML="Just adding some text to make div longer";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:24:48.687

```
<script type="text/javascript">
function changeText(){
    document.getElementById('right').innerHTML="Just adding some text to make div longer";
}
</script>
<style type="text/css">
#wrapper{
    background-color:#A3F8A9;
    position:relative;
}
#left{
    position:absolute;
    left:0px;
    width:300px;
    background-color:red;
}
#right{
    position:absolute;
    left:300px;
    width:100%;
    background-color:green;
}
</style>

<div id="wrapper">
     <div id="left">I'm left</div>
     <div onclick="changeText()" id="right">I'm right</div>
 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:24:21.790

尝试`float:right;`从#right 中删除

```
#right{
    background-color:blue;
} 
```

# java - 在java中调试SQL存储过程调用

> ID：15034099
> 
> 赞同：0
> 
> 时间：2013-02-22T22:14:49.700
> 
> 标签：java, stored-procedures

嗨，我有一个带有大约 30 多个 IN 参数的存储过程调用。我需要知道调用 SP 的参数值，因为我得到了不正确的结果。

电话是这样的：

```
return "{call FORECASTS_PKG.GENERATE_FORECAST_TASK(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)}"; 
```

我目前已经在上面的语句上设置了断点。我看到各个参数都有值，但想知道这些值是否设置正确，因为它的结果错误。我确信参数的顺序在这里很重要，并且必须相应地设置值，使其与数据库中的顺序相同。如何查看此调用中的值？我在实现的 toString() 方法中执行 XML reperesentation，但这只是以不同的默认顺序打印。

一旦我看到这些值，我就可以将其与数据库中的定义进行比较，并查看这些值是否按预期的正确顺序设置。

# python - 在python中组合列表元素的列表

> ID：15034105
> 
> 赞同：-2
> 
> 时间：2013-02-22T22:15:12.990
> 
> 标签：python, python-2.5

假设我有一个列表列表

```
[ ['B','2'] , ['o','0'], ['y']] 
```

我想在不使用 iteratool 的情况下将列表组合成这样的东西

```
["Boy","B0y","2oy","20y"] 
```

我不能使用 itertool 因为我必须使用 python 2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:23:43.957

[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)做你想做的事。

```
>>> [''.join(x) for x in itertools.product(*[['B', '2'], ['o', '0'], ['y']])]
['Boy', 'B0y', '2oy', '20y'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:57:47.137

如果你不想使用 itertools，这个列表推导会产生你的输出：

```
>>> LoL=[['B','2'], ['o','0'], ['y']]
>>> [a+b+c for a in LoL[0] for b in LoL[1] for c in LoL[2]]
['Boy', 'B0y', '2oy', '20y'] 
```

这是一个更紧凑的版本：

```
LoL=[['B','2'], ['o','0'], ['y']]
r=[]
for a in LoL[0]:
    for b in LoL[1]:
        for c in LoL[2]:
            r.append(a+b+c)

print r 
```

在任何一种情况下，您都在生成一个[笛卡尔积，它使用](http://en.wikipedia.org/wiki/Cartesian_product)[itertools.product()](http://docs.python.org/2/library/itertools.html#itertools.product)可以更好、更灵活地完成（除非您只是对如何做到这一点感到好奇......）

# objective-c - 我的 KML 数据中的多边形未显示在我的 IOS 6 地图应用程序中

> ID：15034109
> 
> 赞同：1
> 
> 时间：2013-02-22T22:15:38.050
> 
> 标签：objective-c, ios6, mkmapview, kml

我正在构建一个具有 MKMapview 的应用程序。我的代码所在的视图扩展了 MKMapView。

获得数据后，我创建了一个 KMLParser 并让它解析我的 KML 文件，这似乎工作得很好。我通过苹果开发人员文档中的示例获得了我的 KMLParser 的代码[http://developer.apple.com/library/ios/#samplecode/KMLViewer/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/KMLViewer/Introduction/Intro.html)

就像我说的代码似乎工作。我的一些 KML 文件只在地图上加载了一个标记，它们工作得很好。KML 文件需要绘制似乎没有渲染的多边形叠加层。我想知道底部附近的 MKMapViewDelegate 代码是否没有做它需要做的事情？我在那里设置了断点，它们似乎从未被击中。

这是我的观点 .h 和 .m 的样子。

。H

```
#import <MapKit/MapKit.h>
#import "MainDM.h"
#import "BBView.h"
#import "MapPM.h"
#import "KMLParser.h"

@class MapPM;
@class MainDM;

@interface MapView : MKMapView <BBView, MKMapViewDelegate>
{
    NSArray *overlays;
    KMLParser *parser;
}

@property(nonatomic,strong)MainDM* dm;
@property(nonatomic,strong)MapPM* pm;
-(void)update:(DataObject*)data;
-(id)initWithModel:(MainDM*)dm:(CGRect)frame;
@end 
```

.m

```
#import "MapView.h"

@implementation MapView

-(id)initWithModel:(MainDM*)dm:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        _dm = dm;
        [_dm register:self];
        _pm = [[MapPM alloc] initWithModel:_dm];

        CLLocationCoordinate2D coord = {.latitude =  32.61724, .longitude =  -106.74128};
        MKCoordinateSpan span = {.latitudeDelta =  1, .longitudeDelta =  1};
        MKCoordinateRegion region = {coord, span};

        [self setRegion:region];
    }
    return self;
}

-(void)update:(DataObject*)data
{
    if([[data getType] isEqualToString:@"CURRENT_KML_CHANGE"])
    {
        KmlVO *d = (KmlVO*)[data getData];
        parser = [_pm showMKL:d];

        // Add all of the MKOverlay objects parsed from the KML file to the map.
        NSArray *o = [parser overlays];
        [self addOverlays:o];

        // Add all of the MKAnnotation objects parsed from the KML file to the map.
        NSArray *annotations = [parser points];
        [self addAnnotations:annotations];

        // Walk the list of overlays and annotations and create a MKMapRect that
        // bounds all of them and store it into flyTo.
        MKMapRect flyTo = MKMapRectNull;
        for (id <MKOverlay> overlay in o)
        {
            if (MKMapRectIsNull(flyTo))
            {
                flyTo = [overlay boundingMapRect];
            }
            else
            {
                flyTo = MKMapRectUnion(flyTo, [overlay boundingMapRect]);
            }
        }

        for (id <MKAnnotation> annotation in annotations)
        {
            MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
            MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
            if (MKMapRectIsNull(flyTo))
            {
                flyTo = pointRect;
            }
            else
            {
                flyTo = MKMapRectUnion(flyTo, pointRect);
            }
        }

        // Position the map so that all overlays and annotations are visible on screen.
        //self.visibleMapRect = flyTo;

    }
}

#pragma mark MKMapViewDelegate

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{

    return [parser viewForOverlay:overlay];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    return [parser viewForAnnotation:annotation];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:20:33.420

我发现我没有告诉视图是委托，所以底部绘制多边形层的代码没有运行。

我只是将以下内容添加到我的 initWithModel 函数中

```
self.delegate = self; 
```

# ruby - 与 Ruby 中的 splat 运算符和 Range 混淆

> ID：15034110
> 
> 赞同：2
> 
> 时间：2013-02-22T22:15:45.180
> 
> 标签：ruby

我试图了解 splat 运算符如何`range`在 Ruby 中使用。为此，在我的 IRB 中运行以下代码：

```
*a = (1..8)
#=> 1..8 
```

当上面没问题时，下面发生了什么？意味着为什么 a 给`[]`？

```
*a,b = (1..8)
#=> 1..8
b
#=> 1..8
a
#=> [] 
```

表示为什么`b`给出[]？

```
a,*b = (1..8)
#=> 1..8
a
#=> 1..8
b
#=> [] 
```

下面发生了什么优先级`Rvalues`？

```
 a,*b = *(2..8),*3,*5
# => [2, 3, 4, 5, 6, 7, 8, 3, 5]
 b
# => [3, 4, 5, 6, 7, 8, 3, 5]
 a
# => 2 
```

这是对 splat 运算符（*）的另一种尝试：-

虽然我知道在并行赋值中我们不能使用多个 splatted 变量，但为什么 splat 与 一起使用时不一样`Rvalues`呢？

```
 *a,*b = [1,2,3,4,5]
SyntaxError: (irb):1: syntax error, unexpected tSTAR
*a,*b = [1,2,3,4,5]
    ^
    from /usr/bin/irb:12:in `<main>' 
```

以上与预期一致。

```
 a = *2,*3,*5
#=> [2, 3, 5] 
```

但是无法理解上面的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:16:01.200

我认为并行赋值是设置一个变量数组等于另一个具有模式匹配的数组。

有一点是，一个范围是一个单一的值，直到你将它转换为一个数组或将它分解。例如`[1..5]`，它是范围的一个元素数组，`1..5`而不是`[1,2,3,4,5]`. 要获取您需要做的整数数组`(1..5).to_a`或`[*(1..5)]`

* * *

第一个我认为是最棘手的。如果 splatted var 分配给一个元素，则 var 本身必须是一个元素数组：

```
*a = 5
a 
# => [ 5 ] 
```

对于接下来的两个，splat 将 0 个或多个尚未分配的值放入数组中。所以以下是有道理的：

```
*a, b = (1..8) 
```

就好像

```
*a, b = "hey" 
```

这就像

```
*a, b = [ "hey" ] 
```

so `*a`is `[]`and `b`is`"hey"`并且按照相同的逻辑，如果`*a`什么都没有，则`a`必须是一个空数组。同样的想法

```
a, *b = (1..5) 
```

对于下一个，范围是 splatted 的，因此分配再次变得很有意义：

```
[*(2..4), 9, 5]
# => [2, 3, 4, 9, 5] 
```

并再次与 splat 并行分配。下一个类似：

```
[*3, *4, *5]
# => [3, 4, 5] 
```

所以就像

```
a = 3, 4, 5 
```

这就像

```
a = [3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:33:00.593

`splat`具有非常低的优先级，几乎任何事情都会在 splat 之前执行。代码飞溅，但结果被丢弃：`b = *a = (1..8); p b #=> [1, 2, 3, 4, 5, 6, 7, 8]`

# spring - JAX-RS（RESTEasy，泽西岛）+ Spring + OSGi

> ID：15034116
> 
> 赞同：0
> 
> 时间：2013-02-22T22:16:06.837
> 
> 标签：spring, jersey, osgi, jax-rs, resteasy

我正在将现有的 Java 应用程序转换为使用 Spring（注入，AOP）并通过 JAX-RS（特别是 RESTEasy）公开 REST API 的 OSGi 服务。我在互联网上四处寻找如何使这种组合一起工作，但还没有找到任何好的解决方案。

a) Spring 通过 Blueprint 项目支持 OSGi。

b) RESTEasy 通过 resteasy-spring 插件与 Spring 集成。但是没有 resteasy-blueprint 或任何可以使 OSGi+Spring 支持 RESTEasy 的东西。

c) 这同样适用于泽西岛。您可以将它作为一个捆绑包使用，也可以使用 jersey-spring 插件将其与 spring 集成。但不是两者兼而有之。

有什么建议么？谢谢！

# c - 使用 OpenGL 对彗星 Wild 2 形状数据的基本渲染

> ID：15034123
> 
> 赞同：3
> 
> 时间：2013-02-22T22:16:54.090
> 
> 标签：c, opengl

我想学习 OpenGL，并决定从一个非常简单的例子开始——根据星尘航天器的测量结果来渲染彗星 Wild 2 的形状（有关数据的详细信息，请参见：http: [//nssdc.gsfc.nasa.gov/ nmc/masterCatalog.do?ds=PSSB-00133](http://nssdc.gsfc.nasa.gov/nmc/masterCatalog.do?ds=PSSB-00133)）。请记住，我对 OpenGL 一无所知。一些 Google-fu 帮助我了解了下面提供的代码。尽管我尽了最大的努力，**我的彗星还是很糟糕**：

![彗星 Wild 2 的 OpenGL 渲染](../Images/e4f711cf3575f091ebee3f021d6d9404.png)

我希望它看起来更漂亮，但我不知道如何进行（除了阅读红皮书或类似书籍）。例如：

*   如何对形状进行非常基本的“线框”渲染？
*   假设太阳沿着“底部”方向（即，沿着-Y），我如何添加光线并看到另一侧的阴影？
*   如何添加“鼠标事件”以便我可以旋转视图并放大/缩小？

我怎样才能让这个怪物看起来更漂亮？对在线教程或代码示例的任何引用？

我将源代码、数据和 makefile（对于 OS X）放在 bitbucket 中：

hg 克隆[https://arrieta@bitbucket.org/arrieta/learning-opengl](https://arrieta@bitbucket.org/arrieta/learning-opengl)

数据由 8,761 个三元组（顶点，在身体固定框架中）和 17,518 个三角形（每个三角形是一个整数三元组，指的是 8,761 个顶点三元组之一）组成。

```
#include<stdio.h>
#include<stdlib.h>

#include<OpenGL/gl.h>
#include<OpenGL/glu.h> 
// I added this in case you want to "copy/paste" the program into a
// non-Mac computer
#ifdef __APPLE__
#  include <GLUT/glut.h>
#else
#  include <GL/glut.h>
#endif

/* I hardcoded the data and use globals. I know it sucks, but I was in
   a hurry. */
#define NF 17518
#define NV 8761
unsigned int fs[3 * NF];
float vs[3 * NV];
float angle = 0.0f;

/* callback when the window changes size (copied from Internet example) */
void changeSize(int w, int h) {
  if (h == 0) h = 1;  
  float ratio =  w * 1.0 / h;
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glViewport(0, 0, w, h);
  gluPerspective(45.0f, ratio, 0.2f, 50000.0f); /*  45 degrees fov in Y direction; 50km z-clipping*/
  glMatrixMode(GL_MODELVIEW);
}

/* this renders and updates the scene (mostly copied from Internet examples) */
void renderScene() {
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);  
  glLoadIdentity();
  gluLookAt(0.0f, 0.0f,  10000.0f, /* eye is looking down along the Z-direction at 10km */
            0.0f, 0.0f,  0.0f,     /* center at (0, 0, 0) */
            0.0f, 1.0f,  0.0f);    /* y direction along natural y-axis */

  /* just add a simple rotation */
  glRotatef(angle, 0.0f, 0.0f, 1.0f);    
  /* use the facets and vertices to insert triangles in the buffer */
  glBegin(GL_TRIANGLES);
  unsigned int counter;
  for(counter=0; counter<3 * NF; ++counter) {
    glVertex3fv(vs + 3 * fs[counter]); /* here is where I'm loading
                                          the data - why do I need to
                                          load it every time? */
  }
  glEnd();  
  angle += 0.1f;                /* update the rotation angle */
  glutSwapBuffers();  
}

int main(int argc, char* argv[]) {
  FILE *fp;
  unsigned int counter;

  /* load vertices */
  fp = fopen("wild2.vs", "r");
  counter = 0;
  while(fscanf(fp, "%f", &vs[counter++]) > 0);
  fclose(fp);

  /* load facets */
  fp = fopen("wild2.fs", "r");
  counter = 0;
  while(fscanf(fp, "%d", &fs[counter++]) > 0);
  fclose(fp);

  /* this initialization and "configuration" is mostly copied from Internet */
  glutInit(&argc, argv);
  glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
  glutInitWindowPosition(0, 0);
  glutInitWindowSize(1024, 1024);
  glutCreateWindow("Wild-2 Shape");

  glEnable(GL_LIGHTING);
  glEnable(GL_LIGHT0);
  glEnable(GL_DEPTH_TEST);

  GLfloat mat_specular[] = { 1.0, 1.0, 1.0, 1.0 };
  GLfloat mat_shininess[] = { 30.0 };
  GLfloat light_position[] = {3000.0, 3000.0, 3000.0, 0.0 };
  glClearColor (0.0, 0.0, 0.0, 0.0);
  glShadeModel (GL_SMOOTH);
  glMaterialfv(GL_FRONT, GL_SPECULAR, mat_specular);
  glMaterialfv(GL_FRONT, GL_SHININESS, mat_shininess);
  glLightfv(GL_LIGHT0, GL_POSITION, light_position);

  glutDisplayFunc(renderScene);
  glutReshapeFunc(changeSize);
  glutIdleFunc(renderScene);

  glutMainLoop();
  return 0;  
} 
```

# 编辑

它开始看起来更好了，我现在有很多资源可以暂时研究。它仍然很烂，但我的问题已得到解答！

![另一个图像，它没有那么糟糕](../Images/35b151ca887a3697ac8e194c4abfae67.png)

我添加了法线，并且可以在“纹理”和线框之间来回切换：

![有法线](../Images/0cee0fa7f16b230adec2e29d9fab010f.png)

PS。[存储库](https://arrieta@bitbucket.org/arrieta/learning-opengl)显示了根据 SeedmanJ 的建议所做的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:04:28.910

在OpenGL中更改为线框渲染真的很容易，你必须使用

```
glPolygonMode(GL_FRONT_AND_BACK, GL_LINE); 
```

并切换回填充渲染，

```
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL); 
```

关于灯光，OpenGL 允许您使用最多 8 种不同的灯光，通过法线和材质生成最终渲染。您可以通过以下方式激活照明模式：

```
glEnable(GL_LIGHTING); 
```

然后使用以下任一方法激活您的每个灯：

```
 glEnable(GL_LIGHT0);
 glEnable(GL_LIGHT1); 
```

要更改像它的位置这样的光属性，请查看 [http://linux.die.net/man/3/gllightfv](http://linux.die.net/man/3/gllightfv)

如果您使用 glBegin() 方法，则必须为您定义的每个顶点设置法线。在 VBO 渲染中它是相同的，但法线也包含在 vram 中。在 glBegin() 方法中，您可以使用

```
glNormal3f(x, y, z); for example 
```

对于您定义的每个顶点。

有关您可以做什么的更多信息，红皮书是一个很好的开始。

移动你的“场景”是 OpenGL 间接允许你做的另一件事。因为这一切都适用于矩阵，

你可以使用

```
glTranslate3f(x, y, z);
glRotate3f(num, x, y, z);
.... 
```

管理键事件和鼠标事件（我几乎可以肯定）与 OpenGL 无关，这取决于您使用的库，例如 glut/SDL/... 所以您必须参考他们自己的文档.

最后，有关您可以使用的一些功能的更多信息，[http://www.opengl.org/sdk/docs/man/](http://www.opengl.org/sdk/docs/man/)，还有一个教程部分，带您访问不同的有趣网站。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:03:15.627

> 如何对形状进行非常基本的“线框”渲染？

[`glPolygonMode( GL_FRONT, GL_LINE );`](http://www.opengl.org/sdk/docs/man2/xhtml/glPolygonMode.xml)

> 假设太阳沿着“底部”方向（即，沿着-Y），我如何添加光线并看到另一侧的阴影？

好的阴影很难，尤其是在固定功能的管道中。

但在此之前，您需要[法线](http://www.opengl.org/sdk/docs/man2/xhtml/glNormal.xml)与顶点一起使用。您可以很容易地计算[每个面的法线](http://www.opengl.org/wiki/Calculating_a_Surface_Normal)。

> 如何添加“鼠标事件”以便我可以旋转视图并放大/缩小？

试试我在[这里](https://stackoverflow.com/a/14887071/44729)做的鼠标处理程序。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-02-22T23:18:10.800

尽管我有些人喜欢说“从更简单的事情开始”，但我认为，有时您需要在很短的时间内“潜入”以获得良好的理解！做得好！

另外，如果您想要一个示例，请询问... 我已经编写了一个文档完善、高效但可读的纯 Win32（无 .NET 或 MFC）OpenGL FPS！

虽然看起来其他人回答了你们大多数问题......如果你愿意，我可以帮助你，也许可以制作一个很酷的纹理（如果你没有的话）......

要回答这个问题：

```
 glBegin(GL_TRIANGLES);
    unsigned int counter;
    for(counter=0; counter<3 * NF; ++counter) {
    glVertex3fv(vs + 3 * fs[counter]); /*   here is where I'm loading
                                            the data - why do I need to
                                            load it every time? */
}
glEnd(); 
```

那就是渲染 3D 模型的顶点（在视图发生变化的情况下）并使用 DC（设备上下文），BitBlt 的它 - 到窗口上！它必须重复进行（以防某些事情导致窗口清除）......

# android-maps-v2 - android地图平铺坐标

> ID：15034124
> 
> 赞同：0
> 
> 时间：2013-02-22T22:16:54.870
> 
> 标签：android-maps-v2

我的目标是围绕屏幕底部中心的一个点旋转地图。

为此，我需要知道该**（屏幕）点的地图坐标**，然后进行双重变换：首先 - 移动中心，然后围绕新中心旋转，但这都需要知道旋转的地图坐标观点。
我有地图的详细信息：中心、方向、缩放级别，但我找不到任何**将屏幕位置映射到地图坐标的参考。**

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:22:54.267

回答...但打赌警告，这并不简单。

我不得不深入挖掘谷歌地图平铺的神秘世界，并在[mapTiler](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)的一些帮助下，以及将[globalMercatorClass](http://www.klokan.cz/projects/gdal2tiles/)从 php 重写为 java 这就是我接近它的方式：

*   将屏幕中心（通过米）转换为当前缩放中的像素
*   使用 trig，从屏幕尺寸和屏幕中心的地图方向找到底部的像素位置、屏幕中心。
*   将其转换回纬度/经度并将其用作相机位置

它使用了大量的 CPU 周期，所以我不得不将刷新率降低到 1.5 秒，但是，嘿，它正在工作。

如果能从 API 中获得其中的一些功能，那就太好了，它可能会减少这项工作所需的马力（和脑力）。但我很高兴这是可能的。

# ruby - 在没有rails的ruby中实现rails before_filter

> ID：15034125
> 
> 赞同：8
> 
> 时间：2013-02-22T22:16:56.620
> 
> 标签：ruby, sinatra, ruby-1.9.3, before-filter

我在所有课程中都使用 ga logger。我希望每个味精都以类名和方法名开头，如下所示：

```
Class_name::Method_name 
```

这就是我现在正在做的事情：

```
class FOO

 def initialize
 end

 def bar
   msg_prefix = "#{self.class}::#{__method__}"
   ... some code ...
   @logeer = "#{msg_prefix} msg ..."
 end

 def bar2
   msg_prefix = "#{self.class}::#{__method__}"
   ... some code 2 ...
   @logeer = "#{msg_prefix} msg2 ..."
 end

end 
```

我想在 rails 中使用 before_filter 来防止重复，我正在使用`sinatra`但这些类是普通的旧`ruby 1.9.3`类

想法？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T21:19:14.863

[您可以在使用Module#method_added](http://ruby-doc.org/core-1.9.3/Module.html#method-i-method_added)创建的任何方法上获取回调，为旧方法设置别名，然后定义一个首先调用 before_filter 方法的新方法。这是我（非常）粗略的第一个概念：

```
module Filter
  def before_filter name
    @@filter = name
  end

  def method_added name
    return if @filtering # Don't add filters to original_ methods
    return if @@filter == name # Don't filter filters
    return if name == :initialize

    @filtering = true

    alias_method :"original_#{name}", name
    define_method name do |*args|
      self.send @@filter, name
      self.send :"original_#{name}", *args
    end
    @filtering = false
  end
end

class FilterTest
  extend Filter
  before_filter :prepare_logs

  def baz
    puts "#{@msg_prefix} message goes here"
  end

  def prepare_logs name
    @msg_prefix = "#{self.class}::#{name}"
  end
end

ft = FilterTest.new
ft.baz 
```

通过使用`__method__`like you were in `create_prefix`，您将获得过滤器方法的名称，而不是原始方法，因此您必须传入方法名称。可能还有其他解决方案可以使其更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T02:47:52.503

您可以使用[ActiveModel::Callbacks](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html)在普通的 Ruby 类中获得`before_filter`类似行为（尽管在您的情况下，仅执行一行可能有点过分了）：

```
require 'active_model'

class FOO
  extend ActiveModel::Callbacks

  define_model_callbacks :baz, only: :before

  before_baz :create_prefix

  def initialize
  end

  def bar
    run_callbacks :baz do
      ... some code ...
      @logeer = "#{@msg_prefix} msg ..."
    end
  end

  def bar2
    run_callbacks :baz do
      ... some code 2 ...
      @logeer = "#{@msg_prefix} msg2 ..."
    end
  end

  private

    def create_prefix
      @msg_prefix = "#{self.class}::#{__method__}"
    end
end 
```

# imagemagick - 如何将平铺应用于具体坐标和大小？

> ID：15034127
> 
> 赞同：1
> 
> 时间：2013-02-22T22:17:28.137
> 
> 标签：imagemagick

这就是我想要做的：

1- 我有这张图片（中心透明）

![bg](../Images/2fd2bda1837c7b1eacf2fe99348159c3.png)

2-我有这个“模式”

![图案](../Images/33f1f6ece63c396d860cd7314bd7f91a.png)

3-我想将此模式应用于特定的 X 和 Y，并指定重复的大小。预期结果应如下所示：

![结果](../Images/69f179064c78b1f522f5eb57cad2d1df.png)

你知道我怎么能做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:15:52.867

最简单的方法可能是创建纹理矩形，然后使用复合将其放置在圆的顶部。

```
convert circle.png \( -size 88x61 tile:texture.png \) -geometry +50+63 -composite result.png 
```

[编辑]如果你想要下面的纹理，你可以这样做：

```
convert -size 200x200 xc:transparent
-page +50+63 -size 88x61 tile:texture.png
-page +0+0 circle.png
-layers flatten result.png 
```

我认为这是不言自明的，但 88x61 是矩形的大小，200x200 是圆形图像的大小，+50+63 是您希望放置的位置，circle.png 是透明的圆形图像和纹理。 png 是无缝模式。

我用您的图像对此进行了测试并且它有效，但是您包含的模式似乎不是完整的无缝版本，因此它看起来与您的预期结果并不完全相同。

# python - 无法在 OSX 10.6 上为 Python 2.7 设置 Google App Engine

> ID：15034130
> 
> 赞同：0
> 
> 时间：2013-02-22T22:18:08.293
> 
> 标签：python, google-app-engine, python-2.7, python-2.5

尝试在 Mac OSX (10.6.8) 上为 Google App Engine 运行 Python 2.7 开发环境，但无法运行 helloworld 示例。

我无法在 Python shell 中导入 webapp2。当我尝试从 GUI 运行时，日志报告我的“Python 命令”是 /usr/bin/python2.6，尽管我的系统默认值为 2.7。当我尝试访问 localhost:8080 时，我得到“ImportError：没有名为 urllib 的模块”。

尝试使用 /usr/local/google_appengine/dev_appserver.py helloworld/ 从命令行启动。得到错误：

```
fancy_urllib.InvalidCertificateException: Host appengine.google.com returned an invalid certificate (_ssl.c:504: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed): 
To learn more, see http://code.google.com/appengine/kb/general.html#rpcssl. 
```

认为应用程序可能正在使用 2.5，并且根据“了解更多”链接，我将 ssl 安装到 Python2.5（下载的代码，<< sudo python2.5 setup.py install >>）。虽然我现在可以将 ssl 导入 Python 2.5 shell，但在运行开发服务器时仍然遇到同样的错误。

我确实在这台计算机上自己安装了 Python 2.7，所以这样做可能会破坏/错过一些微妙的东西。

此外，软件 README 仅指 2.5，最新日期为 2008 年 4 月。我在[下载页面上只看到一个 Python 下载](https://developers.google.com/appengine/downloads)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:11:16.447

`import webapp2`由于 webapp2 不在默认包中，因此您不应该在 Python shell 中使用。

确保您的计算机上正在运行最新的 MacOS 启动器并尝试以下操作：

*   运行**GoogleAppEngineLauncher**
*   **文件**>**新应用程序...**
*   选择一个名称并按**创建**
*   按**运行**
*   按**浏览**

如果按照上述步骤，您将看到**Hello, world！**在浏览器中，您可以继续您的 Hello, world！应用。

如果不确定您是否`dev_appserver.py`使用正确版本的 Python 从命令行运行，或者如果您在**首选项**中使用 Launcher 运行，则可能需要添加**Python 路径**以指向`python2.7`.

# linux - Centos 6 启动脚本

> ID：15034131
> 
> 赞同：4
> 
> 时间：2013-02-22T22:18:14.983
> 
> 标签：linux, centos, startup, centos6

我需要将启动脚本放到我的 CentOS6 服务器上。

我看到我需要一个包含启停案例的脚本。但是我有一个问题，也没有如何启动这个脚本。

任何人都可以告诉我如何添加它？

该脚本必须运行一个运行 jar 文件的简单命令：

```
java -jar FileName.jar 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T22:30:51.570

最简单的方法是将您的命令添加到文件中

```
/etc/rc.d/rc.local 
```

上述文件中的命令在启动时运行（以 root 身份）。请注意，如果您这样做，您的命令将不会响应通常的服务启动/停止命令。

# c++ - 如何解决也设置成员的吸气剂？

> ID：15034134
> 
> 赞同：4
> 
> 时间：2013-02-22T22:18:25.360
> 
> 标签：c++, design-patterns, constants, getter

我正在处理这些方面的事情：

我有一个非常复杂的类和一个成员，它依赖于一些在类初始化时未设置的东西，或者在旅途中设置。即使没有设置该成员，该类的对象也有意义。它也可以根据对其他成员所做的其他更改进行重置。

现在，假设这个“特殊”成员的设置计算成本很高，所以我会根据要求延迟计算它。

所以：

```
class Class
{
    X x;
    Y y;
    SpecialClass specialObject;
public:
    void setX(const X& newX);
    void setY(const Y& newY);

    //----
    SpecialClass getSpecialObject() /*const*/
    { 
        computeSpecialObject();
        return specialObject();
    }
private:
    void computeSpecialObject()
    {
        //specialObject depends on x and y
        //and is expensive to compute
        //this method is a bottleneck
    }
}; 
```

我不想`compute`每次更改时都调用该方法，`x`或者`y`因为它很昂贵，所以我陷入了两难境地：

*   删除`const`？从逻辑上讲，getter 应该是`const`，但它不能。还有一个缺点是它不能在`const`对象上调用。
*   我可以做`specialObject` `mutable`，但这似乎不是正确的做法。
*   抛弃一贯性？再次，看起来很腥。
*   在获取之前调用`computeSpecialObject`？- 如果有人忘记了怎么办？他们会得到一个过时的结果。

有没有处理这个问题的设计模式？一个好的方法？还是课程设计错了？（我倾向于最后一个，但改变课程并不是一个真正的选择）

注意：我已经做了会员`mutable`，想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:24:38.933

> 我可以制作 specialObject `mutable`，但这似乎不是正确的做法。

为什么这样？这正是`mutable`存在的原因：允许一个`const`函数在*逻辑上* `const`不需要物理保持对象不变（如果你制作了 object `mutable`，请记住[确保线程安全](http://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank)- 我相信你知道我的意思）。

只要对象的初始化`SpecialClass`不会改变对象的逻辑状态，这是正确的，因为这是`const`承诺不会做的事情。

在这种情况下，函数本身根本就不是`const`本质上的，它可能应该被命名为不同的东西，而不仅仅是`getSpecialObject()`:`computeAndReturnSpecialObject()`可能是一个候选者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T22:24:33.610

我会留下`const`and*要么*制作`specialObject` `mutable`或保留指向the的*指针*`specialObject`，而不仅仅是将其“嵌入”到类中。

我还将添加一个`bool dirty`标志，`mutable`并在做出使计算无效的更改时设置它。然后我会检查里面的标志`computeSpecialObject`，只有当它被设置时才做这项工作。`delete`使用指针，只要更改使现有计算无效，您甚至可以使用旧的计算对象，但这会打开一个完整的“另一罐蠕虫”。

还是我错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:46:04.680

这总是一条很好的路线，当你不需要时不调用它，而不是在调用者中引入漏洞，这意味着它可能不是并且返回不正确的结果。

我将计算移动为特殊对象的方法，并将此类视为该类计算方法的参数的包装器。一个奖励球是您可以对计算进行单元测试。

那么这只是一个决定何时需要再次调用 SpecialObject.Compute(x,y) 或简单地返回最后一个结果的问题。如果可以的话，我可能会考虑的另一件事是，如果 X 已更改但 Y 没有更改，我是否可以简化计算。即保留一些中间结果。

不知道它对你有多适用，但我经常做的一件事是注入一个做计算的东西，所以我倾向于默认使用这种模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T22:46:05.233

有两个方向你可以去，更多`OOP`或更多`Functional`。一种涉及较少关心状态操作，而是关心行为，另一种完全忘记了行为，关心返回的状态。

## 面向对象

对我来说，一个关键`OOP`原则是`Tell, Don't Ask`，或`write no getters or setters`。

设计您的对象以被告知要做什么，使其具有自主性。不要要求它返回一些您可以用来做某事的对象。只需告诉它首先做你想做的事。如果你告诉一个对象做某事，那么你可能期望它改变状态，而它是不正确的`const`。

您`SpecialClass`可以提供一些服务`doService()`。您可以改为告诉`Class`to `doSpecialService()`，这是正确的可变的。

另一种方法是创建此对象以使用其他对象进行创建。所以一个函数可以是 const 但带一个非 const 参数：

```
class Class {
public:
    void doService(ServiceProvider& serviceProvider) const {
        serviceProvider.doService(x, y);
    }
}; 
```

有了这个，您将传入 a `SpecialServiceProvider&`，它将`SpecialClass`为给定的`X`and创建正确的值`Y`。这将是可变的。在提供服务时修改状态似乎是正确的。也许您可以为 ( , ) 对设置地图缓存`SpecialClass`对象。`X``Y`

## 功能性

另一个方向是让你的对象不可变。每当您想要一些新状态时，使用旧状态作为基础来创建它。这可能会产生连锁反应，直到您（几乎）一直有海龟：

```
class SpecialBuilder {
public:
    SpecialBuilder withX(const X& newX) const;
    SpecialBuilder withY(const Y& newY) const;
    SpecialClass build() const;
};

SpecialBuilder specialBuilder;
SpecialClass special = specialBuilder.withX(x).withY(y).build(); 
```

您可以在每个返回的数据之间共享数据，`SpecialBuilder`因为它是不可变的。

# mysql - 在mysql中选择更新的行

> ID：15034136
> 
> 赞同：2
> 
> 时间：2013-02-22T22:18:34.330
> 
> 标签：mysql, sql, database

有没有简单的方法来选择更新的行？

我试图在每次读取行时存储时间戳，以便能够删除长时间未读取的数据。

首先我尝试`SELECT`先执行查询，甚至发现有点慢但简单的解决方案，比如

```
 UPDATE foo AS t, (SELECT id FROM foo WHERE statement=1)q
 SET t.time=NOW() WHERE t.id=q.id 
```

但我仍然想找到一种正常的方法来做到这一点。

我也认为先更新时间然后只选择更新的行应该容易得多，但我什至没有找到任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:34:56.807

对于 MySQL 中的*单行* `UPDATE`，您可以：

```
UPDATE foo
SET    time = NOW()
WHERE  statement = 1
AND    @var := id 
```

`@var := id`总是`TRUE`，但它会在更新*前*`id`将 的值写入变量 @var 。那么你也能：

 *```
SELECT @var; 
```

在*PostgreSQL*中，您可以使用该[`RETURNING`子句](http://www.postgresql.org/docs/current/interactive/sql-update.html)。
*Oracle*也有一个[`RETURNING`子句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10008.htm#i2126358)。
*SQL-Server*有一个[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。
但是 MySQL 没有这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T22:27:54.043

声明`time`列如下：

```
CREATE TABLE foo (
    ...
    time TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(),
    ...) 
```

然后，每当更新一行时，该列将自动更新。

更新：

我认为没有办法在 SELECT 期间自动更新，因此您必须分两步完成：

```
UPDATE foo
SET time = NOW()
WHERE <conditions>;

SELECT <columns>
FROM foo
WHERE <conditions>; 
```

只要不包括`time`我认为这应该有效的列。为了获得最大的安全性，您需要使用事务来防止其他查询干扰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:45:39.307

@Erwin Brandstetter：不难扩展使用用户变量的策略`CONCAT_WS()`来取回多个 ID。 *抱歉，仍然无法添加评论...*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-27T20:27:28.947

正如[这里](https://stackoverflow.com/a/55077611/7149182)所建议的，您可以提取修改后的主键以在之后更新其时间戳列。

> ```
> SET @uids := null;
> UPDATE footable
>    SET foo = 'bar'
>  WHERE fooid > 5
>    AND ( SELECT @uids := CONCAT_WS(',', fooid, @uids) );
> SELECT @uids; 
> ```
> 
> 来自[https://gist.github.com/PieterScheffers/189cad9510d304118c33135965e9cddb](https://gist.github.com/PieterScheffers/189cad9510d304118c33135965e9cddb)

`SELECT @uids;`因此，您应该通过拆分结果值来用更新语句替换 final `@uids`（它将是一个包含所有修改后的 id 除以 的 varchar `,`）。*

# javascript - 如何让这个字体选择器在带有选项卡的引导模式中正确显示

> ID：15034137
> 
> 赞同：6
> 
> 时间：2013-02-22T22:18:38.837
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我正在使用此处找到的字体选择[器](http://lindekleiv.bitbucket.org/fontselector/)。我把它放在一个模态里，它工作得很好。现在，我已将选项卡导航放在模态框内，并且字体选择器无法正确显示。（第一个模式的按钮是损坏的。第二个模式的按钮是同一件事的一个例子，但没有选项卡式导航。）

我设置了 style="overflow-y:visible; max-height:500px;" 在这两种情况下。

[我的小提琴](http://jsfiddle.net/kTXB7/1/)

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>

    <script>
    $(document).ready(function(){
           $('select#fonts1').fontSelector({});
           $('select#fonts2').fontSelector({});
        });

    </script>

</head>

<body>

    <!-- Button to trigger modal -->
    <a href="#myModal" role="button" class="btn" data-toggle="modal">Fontpicker w/ modal and tabbed</a>
    <a href="#myModal2" role="button" class="btn" data-toggle="modal">Fontpicker w/out the tabbed navigation</a>

    <!-- Modal -->
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body" style="overflow-y:visible; max-height:500px;">

        <ul class="nav nav-tabs">
            <li><a href="#tab1" data-toggle="tab">Tab 1</a></li>
        </ul>

        <div class="tab-content">
               <div id="tab1" class="tab-pane" style="overflow-y:visible; max-height:500px;">

                <select id="fonts2">
                    <option value="Chelsea Market">Chelsea Market</option>
                    <option value="Droid Serif" selected="selected">Droid Serif</option>
                    <option value="Ruluko">Ruluko</option>
                    <option value="Ruda">Ruda</option>
                    <option value="Magra">Magra</option>
                    <option value="Esteban">Esteban</option>
                    <option value="Lora">Lora</option>
                    <option value="Jura">Jura</option>
                  </select>
              </div>

        </div>
    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
    </div>
    </div>

        <!-- Modal --> 
    <div id="myModal2" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body" style="overflow-y:visible; max-height:500px;">

        <select id="fonts1">
                    <option value="Chelsea Market">Chelsea Market</option>
                    <option value="Droid Serif" selected="selected">Droid Serif</option>
                    <option value="Ruluko">Ruluko</option>
                    <option value="Ruda">Ruda</option>
                    <option value="Magra">Magra</option>
                    <option value="Esteban">Esteban</option>
                    <option value="Lora">Lora</option>
                    <option value="Jura">Jura</option>
                  </select>

    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
    </div>
    </div> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:50:12.413

**将此添加到您的 CSS 中：**

```
.tab-content {
    overflow: visible !important;
} 
```

**为什么这样有效：**

目前，jQuery UI 选项卡`.tab-content`溢出属性设置为自动。这意味着将使用滚动条而不是让内容溢出对话框，这就是为什么下拉菜单从视图中隐藏的原因（您必须使用微小的滚动条才能真正看到它）。

您需要`.tab-content`用可见代替自动覆盖默认的 jQuery UI 的 CSS 溢出属性，以获得所需的效果。

**查看更新的小提琴，CSS 框中的 CSS：**

[http://jsfiddle.net/samliew/kTXB7/3/](http://jsfiddle.net/samliew/kTXB7/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:53:59.837

这里的问题是`overflow:auto`在`.tab-content`元素上设置的。

删除该溢出，它将正常工作。不过要小心 - 当模式的内容过多时，该属性会启用垂直滚动条，因此只需根据您在其中显示的内容来使用它。

# r - 使用 ordinal 包中的 clmm2 无法获取 se.fit 和置信区间

> ID：15034139
> 
> 赞同：1
> 
> 时间：2013-02-22T22:18:43.537
> 
> 标签：r, interaction, predict, ordinal

我正在使用 R 中序数包中的 clmm 函数，以便将累积混合模型拟合到我的数据中。在我尝试获得预测概率之前，它工作得很好。通过指定 se.fit=TRUE 和 interval=TRUE，我无法获得 SE 或置信区间。它看起来像这样：

```
mod1<-clmm2(response~X0+X1+X2+X3+X4+X5+X7+X0*X2*X3+X2*X3*X4+X0:X4, random=X6, 
                      data=df,link ="logistic", threshold ="flexible", 
                      Hess=TRUE, nAGQ=7) 
```

如您所见，那里有很多互动（都很重要）。我试图为我的问题创建一个虚拟数据集以使其可重现，但 clmm 无法与更简单的数据集实现收敛。我获取了包序号中包含的葡萄酒数据集，并对公式进行了一些更改以模仿我自己的（但我认为这没有任何意义）：

```
library(ordinal)
data(wine)
fm1 <- clmm2(rating ~ temp + contact+bottle+temp:contact:bottle+temp:contact+ temp:bottle+bottle:contact,random=judge, data=wine,link ="logistic", threshold ="flexible", 
         Hess=TRUE, nAGQ=7)

head(do.call("cbind", predict(fm1, se.fit=TRUE, interval=TRUE))) 
```

然后我得到这个错误：

```
Error in head(do.call("cbind", predict(fm1, se.fit = TRUE, interval = TRUE))) : 
 error in evaluating the argument 'x' in selecting a method for function 'head' : Erreur dans do.call("cbind", predict(fm1, se.fit = TRUE, interval = TRUE)) : second argument must be a list 
```

我的猜测是 predict 在这种情况下甚至不会计算 SE 和 IC。有人知道为什么吗？反正有没有得到这些值？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:38:44.873

clmm2 对象的 predict 方法不提供标准错误。查看它的帮助页面。这与 R 包作者在处理混合效果模型时的惯常做法一致。

# java - 是否可以将方法级别变量设置为类级别变量？

> ID：15034140
> 
> 赞同：1
> 
> 时间：2013-02-22T22:18:48.623
> 
> 标签：java, variables

我想将我的方法级别变量设置为类级别变量。是否可以在 Java 中将方法级别变量设置为类级别变量？我想将方法​​级别变量值作为类级别变量如何获取？

```
class A {       
    void m(String s){
        String s1 = s;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:20:20.210

我猜你想要（作为一个基本的例子）

```
class A {
    String s1; 

    void m(String s) {
        s1=s;
    }
} 
```

请注意，这是使用 setter 函数执行的操作：

```
public class A {
    private String s1; 

    //Since the attribute is private, you need a function to access to the value
    public String getS1() {
        return this.s1;
    }

    public void setS1(String s) {
        this.s1 = s;
    }
} 
```

您还可以在类构造函数中传递*动态值：*

```
public class A {
    private String s1; 

    public A(String s1) {
        this.s1 = s1;
    }

    //Since the attribute is private, you need a function to access to the value
    public String getS1() {
        return this.s1;
    }

    public void setS1(String s) {
        this.s1 = s;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T09:14:07.613

试试这个代码

```
class A {
String s;
void m(String s){
    this.s=s; //this keyword is used to ambiguity between local variable and class level variable
      }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T22:21:15.860

如果您询问如何在该方法中设置**Instance 变量，请按以下步骤操作。**

```
String s;//instance var
 void m(String s)//s is dynamic value
 {
     this.s=s;
 } 
```

# sql - 是否可以仅通过每个表中的第一个 ID 连接两个多行表？

> ID：15034144
> 
> 赞同：0
> 
> 时间：2013-02-22T22:19:00.230
> 
> 标签：sql, oracle

假设我有两个数据表：

```
Table A
ID    Colors
--    ------
1     Blue
1     Green
1     Red

Table B
ID    States
--    ------
1     MD
1     VA
1     WY
1     CA 
```

是否可以加入这些表以便我得到以下而不是 12 行？

```
ID    Colors    States
--    ------    ------
1     Blue      MD
1     Green     VA
1     Red       WY
1               CA 
```

颜色和状态列之间没有关联，并且列的顺序无关紧要。（例如，蓝色可以在 MD、VA、WY 或 CA 旁边）每个 ID 每列（颜色或州）中的项目数不相等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:21:06.580

您可以通过使用`row_number()`创建一个假连接列来做到这一点：

```
select coalesce(a.id, b.id) as id, a.colors, b.states
from (select a.*, row_number() over (order by id) as seqnum
      from a
     ) a full outer join
     (select b.*, row_number() over (order by id) as seqnum
      from b
     ) b
     on b.seqnum = a.seqnum 
```

实际上，在 Oracle 中，您也可以只使用`rownum`：

```
select coalesce(a.id, b.id) as id, a.colors, b.states
from (select a.*, rownum as seqnum
      from a
     ) a full outer join
     (select b.*, rownum as seqnum
      from b
     ) b
     on b.seqnum = a.seqnum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:34:59.350

您还可以像这样使用 CTE（通用表表达式）：

```
WITH TableA (ID, Color) AS
(
    SELECT "ID", Color 
    FROM DatabaseName.TableA
)
, Joined AS (
    SELECT 
        a.ID AS "AID",
        a.Color
        b.ID AS "BID", 
        b."State"
    FROM, 
        TableA AS a
            RIGHT OUTER JOIN DatabaseName.TableB AS b ON a.ID = b.ID
)

SELECT
    AID,
    Color,
    State
FROM
    Joined 
```

# c++ - 删除指针向量中的元素

> ID：15034146
> 
> 赞同：3
> 
> 时间：2013-02-22T22:19:07.923
> 
> 标签：c++

我只是想确定这是否是删除已分配内存的正确方法，其中向量中存在指向该对象的元素；

```
vector<Fruit*> temp; 
```

假设向量中的第六个元素是否指向我要删除的对象。

```
Fruit* a = temp[5];
temp.erase(temp.begin()+5);
delete a; 
```

这是正确的吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:52:44.940

Kerrek 的建议当然没问题：

```
delete temp[5];
temp.erase(temp.begin() + 5); 
```

但是，我正在写一个答案，建议您考虑智能指针。这是一个例子：

```
std::vector<std::shared_ptr<Fruit>> v;

// add some elements

v.erase(temp.begin() + 5); 
```

在这种情况下，没有内存泄漏，因为`shared_ptr`销毁会删除它拥有的对象，或者适当地减少引用的数量。如果不涉及共享所有权，您可以使用`unique_ptr`. `boost::ptr_vector`也可能派上用场。

# php - 使用 imagecopyresampled 和 imagejpeg 调整大小不起作用

> ID：15034147
> 
> 赞同：1
> 
> 时间：2013-02-22T22:19:12.400
> 
> 标签：php, gd

我正在尝试使用以下 PHP 脚本调整图片大小。

```
$tn = imagecreatetruecolor(1836, 3264);
$newImage = imagecreatefromjpeg('user/354010050076877/2.jpg');
imagecopyresampled($tn, $newImage, 0, 0, 0, 0, 1836, 3264, 739, 1162);
imagejpeg($tn, 'MyFile.jpg'); 
```

该图像是在 MyFile.jpg 中创建的，但它仍然是原始大小。

我还尝试将第 4 行替换为 ...

```
file_put_contents('MyFile.jpg', $tn); 
```

当我尝试它返回时

“警告：file_put_contents()：提供的资源不是第 6 行 /home/content/01/7258201/html/imgTools/resize.php 中的有效流资源”

我需要在脚本中进行哪些更改才能使图像调整大小起作用？

编辑：

我在“imagecopyresampled”上混合了值的顺序，但是即使在切换它们之后它也没有真正正确地调整大小，所以我仍在寻找一个好的解决方法。[有关更多详细信息，请参阅我自己的答案](https://stackoverflow.com/a/15034299/773263)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:40:56.807

尝试这个：

```
$tn = imagecreatetruecolor(739, 1162); // the first line in your script 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:30:55.823

问题是我为新的宽度和高度输入了错误的值，并将它们与旧的更改混合在一起。

```
imagecopyresampled($tn, $newImage, 0, 0, 0, 0, 1836, 3264, 739, 1162); 
```

至

```
imagecopyresampled($tn, $newImage, 0, 0, 0, 0, 739, 1162, 1836, 3264); 
```

认为它仍然没有完全工作，因为它将旧图像调整到更大的黑色空间。

![在此处输入图像描述](../Images/b31c311a26f5f4053f9ece784a52b44c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:26:13.213

我测试了您的脚本（使用 imagejpeg 的那个），它适用于我。所以可能在您的 GD 库配置/设置中...

# java - GWT中celltable的水平滚动

> ID：15034148
> 
> 赞同：2
> 
> 时间：2013-02-22T22:19:13.707
> 
> 标签：java, gwt, scroll, celltable

在我的 GWT 2.4 应用程序中，我有超过 10 列的单元格表。我想知道如何向这些表格添加水平滚动条，因为对于某些屏幕分辨率，某些列是隐藏的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:31:14.210

您可以使用 DataGrid 代替 CellTable，也可以将 CellTable 包装在 ScrollPanel 中。

# python - 使用python将目录内容复制到目录中

> ID：15034151
> 
> 赞同：110
> 
> 时间：2013-02-22T22:19:17.877
> 
> 标签：python, shutil, copytree

我有一个包含文件和子目录的目录 /a/b/c。我需要将 /a/b/c/* 复制到 /x/y/z 目录中。我可以使用哪些 Python 方法？

我试过`shutil.copytree("a/b/c", "/x/y/z")`了，但 python 尝试创建 /x/y/z 并引发`error "Directory exists"`.

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-02-22T22:36:45.647

我发现这段代码工作正常，它是标准库的一部分：

```
from distutils.dir_util import copy_tree

# copy subdirectory example
from_directory = "/a/b/c"
to_directory = "/x/y/z"

copy_tree(from_directory, to_directory) 
```

参考：

*   Python 2：[https ://docs.python.org/2/distutils/apiref.html#distutils.dir_util.copy_tree](https://docs.python.org/2/distutils/apiref.html#distutils.dir_util.copy_tree)
*   Python 3： [https ://docs.python.org/3/distutils/apiref.html#distutils.dir_util.copy_tree](https://docs.python.org/3/distutils/apiref.html#distutils.dir_util.copy_tree)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-29T05:55:59.163

您还可以使用 glob2 递归收集所有路径（使用 ** 子文件夹通配符），然后使用 shutil.copyfile，保存路径

glob2 链接：[https ://code.activestate.com/pypm/glob2/](https://code.activestate.com/pypm/glob2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-14T13:39:45.527

```
from subprocess import call

def cp_dir(source, target):
    call(['cp', '-a', source, target]) # Linux

cp_dir('/a/b/c/', '/x/y/z/') 
```

这个对我有用。基本上，它执行 shell 命令**cp**。

* * *

## 回答 #4

> 赞同：-14
> 
> 时间：2016-08-01T12:15:12.203

这个函数的 python 库已经过时了。我做了一个可以正常工作的：

```
import os
import shutil

def copydirectorykut(src, dst):
    os.chdir(dst)
    list=os.listdir(src)
    nom= src+'.txt'
    fitx= open(nom, 'w')

    for item in list:
        fitx.write("%s\n" % item)

    fitx.close()

    f = open(nom,'r')
    for line in f.readlines():
        if "." in line:
            shutil.copy(src+'/'+line[:-1],dst+'/'+line[:-1])
        else:
            if not os.path.exists(dst+'/'+line[:-1]):
                os.makedirs(dst+'/'+line[:-1])
                copydirectorykut(src+'/'+line[:-1],dst+'/'+line[:-1])
            copydirectorykut(src+'/'+line[:-1],dst+'/'+line[:-1])
    f.close()
    os.remove(nom)
    os.chdir('..') 
```

# jquery - 图像未在 jQuery 幻灯片中显示

> ID：15034157
> 
> 赞同：1
> 
> 时间：2013-02-22T22:20:16.123
> 
> 标签：jquery, html

我正在使用 HTML、php 和 jQuery 创建幻灯片图像，但图像没有出现。我不知道错误是什么。我是 jQuery 新手，我知道肯定有一些小错误，但我不知道在哪里搜索和找到它。

索引.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>JQuery Slider</title>

<style type="text/css">
.slider{
  width:800px;
  height:350px;
  overflow:hidden;
  margin:30px auto;

}
.slider img{
 width:800px;
 height:350px;
 display:none;
}

</style>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script type="text/javascript">
 function Slider(){
 $(".slider#1").show("fade",500);

 }

</script>
</head>

<body onload="Slider();">
  <div class="slider">
    <img id="1" src="img/13052012438.jpg"border="0"alt="image1" />
    <img id="2" src="img/25052012442.jpg"border="0"alt="image2" />

    <img id="3" src="img/13052012439.jpg"border="0"alt="image3" />
    <img id="4" src="img/25052012441.jpg"border="0"alt="image4" />
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:22:31.160

为什么不使用 jQuery 团队已经创建的滑块？

[http://jqueryui.com/slider/](http://jqueryui.com/slider/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:22:41.223

您应该在选择器之间添加一个空格字符，您正在选择一个具有 class of`slider`和 ID 的元素`1`。

```
$(".slider #1").show("fade",500);
       ---^ 
```

由于 ID 是唯一的，您可以使用 ID 选择器选择元素：

```
$('#1')... 
```

另请注意，数字 ID 仅在 HTML5 文档中有效。我建议你使用像 nivoSlider 或 Flexslider 这样的幻灯片插件。

# c++ - 对对象和取消引用的指针感到困惑

> ID：15034164
> 
> 赞同：0
> 
> 时间：2013-02-22T22:20:37.937
> 
> 标签：c++, reference, temporary-objects

我不明白传递对象实例与传递取消引用对象之间的区别。我有

```
class A
{
public:
  A() {}

  void m() {}
};

void method(A& a)
{
  a.m();
}

int main(int argc,char** argv)
{
  method(A());
  return 0;
} 
```

上面的调用不适用于编译器错误：

```
In function 'int main(int, char**)':
error:no matching function for call to 'method(A)'
note: candidates are:
note: void method(A&)
note: no known conversion for argument 1 from 'A' to 'A&'
note: void method(B&)
no known conversion for argument 1 from 'A' to 'B&' 
```

但如果我写

```
method(*(new A())); 
```

确实如此。

如果我无法更改要调用的方法，谁能告诉我为什么以及如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:23:50.427

在第一种情况下，您创建一个临时对象，并尝试将其传递给`method`.
临时对象不能被修改（修改它没有意义，它会在`method`返回的那一刻消失）。因此，要通过引用传递临时值，您必须通过**const 引用**传递。

```
void method(const A& a)
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T22:23:54.560

在这里，您正在创建一个临时对象：

```
method(A()); // A() here is creating a temporary
             //     ie an un-named object 
```

您只能`const&`访问临时对象。
所以你有两个选择：

1.  更改接口以获取 const 引用。
2.  传递一个真实的对象。

所以：

```
// Option 1: Change the interface
void method(A const& a)  // You can have a const
                         // reference to a temporary or
                         // a normal object.

// Options 2: Pass a real object
A a;
method(a); // a is an object.
           // So you can have a reference to it.
           // so it should work normally. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T22:27:43.817

如果这是合法的，将会发生可怕的事情。考虑：

```
void addOne(double& j) { ++j; }

int q = 10;
addOne(q); 
```

这将创建一个临时的`double`，向其中添加一个，并保持原始`q`不变。哎哟。

如果`method`修改其参数，您的代码将被破坏。如果没有，它应该`const`参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T00:14:31.180

您看到的问题是您的函数仅接受 A 类型的左值。要解决此问题，您可以将函数更改为按值接受 A 类型：

```
void method( A a ) {} 
```

或通过 const 参考：

```
void method( const A &a ) {} 
```

或通过右值引用（如果您使用 C++11）：

```
void method( A &&a ) {} 
```

或将 A 类型的左值传递给您的方法：

```
A a; method( a ); 
```

如果您想更深入地了解问题，请阅读有关c++ 中的[左值](http://bytes.com/topic/c/answers/127955-what-lvalue)

# json - JSONKIT objectFromJSON 双值解析错误

> ID：15034165
> 
> 赞同：0
> 
> 时间：2013-02-22T22:20:41.200
> 
> 标签：json, double

当我尝试使用 `objectFromJson 解析这样的 JSON 字符串时：

```
{
"idvino": 2,
"idusuario": 2,
"notamedia": 0.0,
"numerovotaciones": 0,
"usuario": null,
"nombre": "Romanico",
"comentariocata": null,
"rutaimagen": "media/vinos/defecto.jpg",
"bodega": "",
"fechaalta": "2013-01-22",
"anio": "2009",
"barcode": "",
"pais": "España",
"tipovino": "Tinto",
"variedad": "Tempranillo",
"zona": "Ribera del Duero",
"status": "NoVerificado"
} 
```

结果是`NSDictionary`带有值的`"notamedia": 0`，但在 JSON 字符串中它是 "`notamedia": 3.3`

为什么我有这个结果`NSDictionary`？

# javascript - document.getElementById 没有找到？

> ID：15034169
> 
> 赞同：0
> 
> 时间：2013-02-22T22:21:00.333
> 
> 标签：javascript, html, dom, getelementbyid

好的，这是 php.ini 生成的正文。

```
<body>
<div id="outerBox" name="outerBox">

<div id='topNav' name='topNav'>

</div>

Content

<div id='footer' name='footer'>
Footer
</div>
</div>
<script type="text/javascript">centerbody();</script>
</body> 
```

那么这里是`centerbody`函数

```
function centerbody(){
    var container = document.getElementById('outerBox');
    var pageWidth = window.innerWidth;
    container.style.marginLeft = '50px';
    container.style.marginRight = '50px';
} 
```

为什么`getElementById`没有得到`outerBox`？我已经使用了很长时间，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:35:50.417

你有几个错别字。您的标题未关闭，您的元标记值也未关闭。这破坏了破坏 getElementById 的 DOM。

```
<meta name='keywords' content='Gatlinburg Cabins, Gatlinburg Chalets, Budget Gatlinburg Cabins, Discoung Gatlinburg Cabins, Discount Gatlinburg Chalets, Budget Gatlinburg Chalets, Pet Friendly Cabins, Pet Friendly Chalets, Smoky Mountain Cabins, Smoky Mountain Chalets' />
<title>Awesome Gatlinburg CabinsHome Page</title> 
```

# .net - 使用具有多个值的属性选择元素

> ID：15034172
> 
> 赞同：2
> 
> 时间：2013-02-22T22:21:13.617
> 
> 标签：.net, xpath

我有 xml 包含带有逗号分隔值的属性。我知道这不是一个好主意，但现在坚持下去。

我喜欢使用 XPath 选择具有匹配属性值的元素。我希望匹配只考虑完整值，而不是部分匹配。可以用 XPath 做到这一点吗？

例如，请参见下面的 C# 代码。我使用.NET 4.0。

```
string xml = @"<Foos>
                <Foo Tag=""AA, BB"" />
                <Foo Tag=""BB"" />
                <Foo Tag=""AAA, BBB"" />
                </Foos>";

using (StringReader reader = new StringReader(xml))
{
    XElement doc = XElement.Load(reader);

    // I like to select elements with tag BB:
    //  <Foo Tag=""AA, BB"" />
    //  <Foo Tag=""BB"" />

    var fooElementsWithTagBB = doc.XPathSelectElements("//Foo[@Tag = 'BB']"); // Selects only <Foo Tag=""BB"" />
    fooElementsWithTagBB = doc.XPathSelectElements("//Foo[contains(@Tag, 'BB')]"); // Selects all elements
} 
```

我想要一个一般性的查询，我知道

> Foo[@Tag = 'AA, BB' 或 @Tag = 'BB']

在这个例子中可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:10:47.743

**使用**：

```
//Foo[contains(concat(',',@Tag, ','), ',BB,')] 
```

**如果逗号和下一个值之间有空格，您可以按照以下 XPath 表达式消除它们**：

```
//Foo[contains(concat(',',translate(@Tag, ' ', ''), ','), ',BB,')] 
```

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "//Foo[contains(concat(',',translate(@Tag, ' ', ''), ','), ',BB,')]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Foos>
    <Foo Tag="AA, BB"/>
    <Foo Tag="BB" />
    <Foo Tag="AAA, BBB" />
</Foos> 
```

**对 XPath 表达式求值，并将该求值的结果（选定节点）复制到输出**：

```
<Foo Tag="AA, BB"/>
<Foo Tag="BB"/> 
```

**说明**：

这是*[哨兵编程](http://en.wikipedia.org/wiki/Sentinel_value)*的一个例证。

# xml - 如何在 SVRL 中获取 Schematron 规则上下文的 XPath 表达式？

> ID：15034174
> 
> 赞同：1
> 
> 时间：2013-02-22T22:21:21.413
> 
> 标签：xml, xpath, schematron, svrl

使用[ISO Schematron](http://schematron.com)（使用 XSLT1），如何在验证报告中获取规则匹配上下文的 XPath？¹

尝试为每个断言测试获取 XPath 显然是没有意义的，但是如果暴露给应用程序层，则重新查找应用的上下文元素的方法对于自动化处理（例如字段突出显示）将非常方便。

* * *

¹我今天找到了答案，经过一番搜索后，我发现“明显”的解决方案只是偶然发现的，而不是预期的关键字 - Schematron 肯定在 2003/2007 年达到了鼎盛时期。如果没有提交的答案，我会自己回答（一两天内），但我更喜欢提交的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:59:39.813

我会说答案是使用 SVRL，因此启用 SVRL 的样式表来处理 Schematron 规则。也在这里回答：[https ://stackoverflow.com/a/12896201/227785](https://stackoverflow.com/a/12896201/227785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T15:37:55.663

我很欣赏这是一个稍晚的答案，但出于个人原因，我想指出，还有另一个 Schematron 实现正是实现了这个特性，在[http://xml.ascc.net/schematron/1.3/old- index.html#implementations](http://xml.ascc.net/schematron/1.3/old-index.html#implementations)

> schematron-xml：生成带有属性 location 的 XML，该属性包含指向可疑元素位置的 XPath。也可用于没有命名空间的文档版本（使用新架构）。

schematron-xml 现在肯定已经过时了，但是如果您对如何为匹配的上下文生成 XPath 感兴趣，请参阅[http://xml.ascc.net/schematron/1.3/FrancisNorton中名为“mypath”的令人愉悦的简单模板/sch-xml.xsl](http://xml.ascc.net/schematron/1.3/FrancisNorton/sch-xml.xsl)。

# c# - 在 WebMatrix 中使用 razor 是否可以减轻 XSS 威胁？

> ID：15034177
> 
> 赞同：2
> 
> 时间：2013-02-22T22:21:23.580
> 
> 标签：c#, razor, xss, webmatrix, html-encode

我有目的地（用于测试）在 WebMatrix C# 中分配了以下变量：

```
string val = "<script type='text/javascript'>alert('XSS Vector')</script>"; 
```

在页面的后面，我使用 razor 将该值直接写入页面。

```
<p>
    @val
</p> 
```

它以安全的方式写入文本（即不运行警报脚本）

这一点，再加上如果 'val' 包含一个 html 实体（例如，`&lt;`），它也会准确地写入“ `&lt;`”而不是“<”，因为我希望页面呈现。

这是因为 C# 先运行，然后再渲染 html 吗？

更重要的是，当这样使用时，以这种方式使用 razor 是否适合替代 html 编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:25:38.940

该`@Variable`语法将对您传递给它的任何文本进行 HtmlEncode；因此，您可以从字面上看到您为字符串值设置的内容。您是正确的，因为这是用于 XSS 保护。这样做是 Razor 的一部分；`@Variable`语法本身。

所以基本上，使用`@Variable`语法并不是 Html 编码的“替代品”；它*是*HTML 编码。

相关：如果您想要一些字符串来*呈现*HTML，您可以在 Razor 中使用以下语法：

```
@Html.Raw(Variable) 
```

这会导致 Html 编码*未*完成。显然，这对于用户提供的输入是危险的。

# html - 关于绝对位置的 CSS

> ID：15034181
> 
> 赞同：0
> 
> 时间：2013-02-22T22:21:30.200
> 
> 标签：html, css, styles, stylesheet

这是示例[http://jsfiddle.net/FW38N/1/](http://jsfiddle.net/FW38N/1/)

我怎样才能使div（容器）具有高度：自动而不是使其具有固定高度

```
 .container{
        width:auto;
        height:auto;
        background-color:black;
        position:relative;
    }

    .text {
        position:absolute;
        width:50px;
        height:50px;
        background-color:red;
    }

<div class='container'>
        <div class='text'>

        </div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:25:37.433

我不相信不使用 JavaScript 或 jQuery 有办法做到这一点。

当一个元素有`position:absolute`时，它不会占用父元素内部的空间。它与页面的布局和流程分开（如弹出窗口）。在上面的示例中，父级的高度为零，因为它没有占用空间。这是绝对定位行为的基本部分。

出于这个原因，对高度变化的内容使用绝对定位是有问题的（除了弹出窗口和下拉菜单之类的东西，它们无论如何都不是主页布局的一部分）。实际上，每个具有绝对定位的元素都是一种弹出窗口。

如果父母有`position:absolute`而不是孩子，那么父母可以有`height:auto`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:26:09.467

只需编写`height:100%;`它会将 div 的高度设置为文本的大小+边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:33:11.097

你也可以试试

```
<p class="text">
    Lorem ipsum dolor sit amet ...
</p> 
```

而不是 div

# sql - 我正在寻找一个联合查询来产生一个总数而不是两个..想法？

> ID：15034184
> 
> 赞同：1
> 
> 时间：2013-02-22T22:21:44.283
> 
> 标签：sql, ms-access

我不是最擅长编写 SQL 的。我在 Access 中写了这个，然后转到 SQL 视图。接受了两个查询并在它们之间进行了联合。我不断从每个查询中得到一个总数。我如何只为每个产品线获得一个总数。

```
Results:
Prod Line           Period             Amount
Cash Discounts  12            -1404010.46
CASH DISCOUNTS  12                1541.19
Freight           12               4050823.43
Freight           12                  6817.27
INK           12                -24467.76
INK           12                 44414.29

Want        
Cash discounts                          -1402469.27
Freight                                   405764.70
INK                                        24467.76 
```

SQL

```
SELECT [JE Details].[Prod Line], [JE Details].Period, Sum([JE Details].Amount) AS Amount
FROM [JE Details]
GROUP BY [JE Details].[Prod Line], [JE Details].Period
HAVING ((([JE Details].Period)=12))
UNION ALL 
SELECT [AP Details].[Product Line], [AP Details].[Fiscal Period], Sum([AP Details].
[Invoice Amt]) AS Amount
FROM [AP Details]
GROUP BY [AP Details].[Product Line], [AP Details].[Fiscal Period]
HAVING ((([AP Details].[Fiscal Period])=12)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:28:07.737

怎么样：

```
SELECT [Prod Line], Sum(Amount) 
FROM 
   (SELECT [Prod Line], Amount
    FROM [JE Details] 
    WHERE Period=12
    UNION ALL 
    SELECT [Product Line] ,[Invoice Amt]
    FROM [AP Details] 
    WHERE [Fiscal Period]=12) q
GROUP BY [Product Line] 
```

# php - 提取数据并将其分配给变量 - 通过 PHP 的 MSSQL

> ID：15034185
> 
> 赞同：0
> 
> 时间：2013-02-22T22:21:45.280
> 
> 标签：php, sql, sql-server, sql-server-2008

我已经通过 PHP 连接到 MS-SQL Server 2008 数据库，现在我想将数据提取到变量中，这是如何完成的？

我有以下代码：

```
$myServer = "214187-1";
$myUser = "ytuser";
$myPass = "***********";
$myDB = "*********"; 

//create an instance of the  ADO connection object
$conn = new COM ("ADODB.Connection")
  or die("Cannot start ADO");

//define connection string, specify database driver
$connStr = "PROVIDER=SQLOLEDB;SERVER=".$myServer.";UID=".$myUser.";PWD=".$myPass.";DATABASE=".$myDB; 
  $conn->open($connStr); //Open the connection to the database

//declare the SQL statement that will query the database
$query = "SELECT FacebookAppID, FacebookAppSecret, TwitterConsumerKey, TwitterConsumerSecret, LinkedinAPIKey, LinkedinSecretKey FROM Systems WHERE SystemID = " $G_SYSTEMID;

$FacebookAppID = ;
$FacebookAppSecret = ;    
$TwitterConsumerKey = ;
$TwitterConsumerSecret = ;
$LinkedinAPIKey = ;
$LinkedinSecretKey = ;

$rs->Close();
$conn->Close();

$rs = null;
$conn = null; 
```

任何帮助将不胜感激..

新杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:30:33.203

我建议你调查一些事情——有人告诉你确切的做法对你没有帮助。

首先，学习如何使用一些基本的 SQL 知识正确地构建查询[基本 SQL 语法](http://www.w3schools.com/sql/sql_syntax.asp)

接下来，看看 php 如何执行 SQL 语句 - 您需要定义变量的两个主要命令是：

[mysql_query](http://php.net/manual/en/function.mysql-query.php) - 这用于执行查询。

和

[mysql_fetch_array](http://www.php.net/manual/en/function.mysql-fetch-array.php) - 这是为了将数据从 mysql_query 获取到一个数组中（注意：你不必使用 '...fetch_array' - 还有其他的，例如 '...fetch_row'。

阅读这些内容，您将拥有做自己想做的事情的知识。

# tsql - 如何匹配两个不同组的记录？

> ID：15034188
> 
> 赞同：1
> 
> 时间：2013-02-22T22:22:00.527
> 
> 标签：tsql, ssrs-2008, grouping

我有一个名为 Event_log 的主表，其中包含此查询所需的所有记录。在这张表中，有一列我称之为“Grp”。为简化起见，假设这个 Grp 只有两个可能的值：A 和 B。所以现在我们有一个表 Event_log，其中有一列“Grp”和一列称为“实际日期”。最后，我想在此表中再添加一个 Flag 列，其工作原理如下。

首先，我按日期降序排列所有记录，如下所示。然后，我想用 1 或 0 标记每个组“A”行。对于所有“A”行，如果前一条记录（日期较早）=“B”行，那么我想标记 1。否则标记 a 0\. 所以这个初始表在设置这个标志之前看起来像这样：

```
Actual Date         Grp           Flag
1-29-13             A
12-27-12           B
12-26-12           B
12-23-12           A
12-22-12           A 
```

但是在完成这些计算之后，它应该是这样的：

```
Actual Date         Grp           Flag
1-29-13             A              1
12-27-12           B               NULL
12-26-12           B               NULL
12-23-12           A               0
12-22-12           A               0 
```

我怎样才能做到这一点？这比查询更简单！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:31:51.357

试试这个

```
;with cte as
(

  SELECT CAST('01-29-13' As DateTime) ActualDate,'A' Grp
  UNION ALL SELECT '12-27-12','B'
  UNION ALL SELECT '12-26-12','B'
  UNION ALL SELECT '12-23-12','A'
  UNION ALL SELECT '12-22-12','A'
)
, CTE2 as 
(
  SELECT *, ROW_NUMBER() OVER (order by actualdate desc) rn
  FROM cte
)
SELECT a.*, 
case 
 when A.Grp = 'A' THEN 
      CASE WHEN b.Grp = 'B' THEN 1 ELSE 0 END
 ELSE NULL
END Flag   
from cte2 a
LEFT OUTER JOIN CTE2 b on a.rn + 1 = b.rn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T22:33:34.880

你可以使用类似的东西：

```
select el.ActualDate
  , el.Grp
  , Flag = case 
    when el.grp = 'B' then null
    when prev.grp = 'B' then 1
    else 0
    end
from Event_log el
  outer apply
  (
    select top 1 prev.grp
    from Event_log prev
    where el.ActualDate > prev.ActualDate
    order by prev.ActualDate desc
  ) prev
order by el.ActualDate desc 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/e83a1/2)。

# sql - SQL Server 2008 数据库发布向导

> ID：15034189
> 
> 赞同：0
> 
> 时间：2013-02-22T22:22:02.193
> 
> 标签：sql, sql-server-2008

我正在尝试使用 SQL Server 2008 中 SQL Server Management Studio 中的复制数据库向导工具运行数据库导入。

我已经使用该`sa`帐户连接到我的数据库，并且当我运行该进程时，我`sa`在源数据库和目标数据库上都使用了该帐户。

所有的过程都失败了

> *事件 18556，用户“{domain}\administrator”登录失败。
> 原因：无法打开明确指定的数据库。[客户： ]*

该`SA`帐户应具有足够的权限来导入数据库，并且管理员帐户肯定具有该权限。

那么，第一个问题是，既然一切都运行为 ，为什么还要提到管理员帐户`SA`？

第二个问题是，为什么管理员帐户无法打开明确指定的数据库，而该帐户完全控制了目标服务器上的所有数据库？

最后，指定的数据库到底是什么？“事件日志”的二进制部分中有数据指向`Master`但未提及其他任何地方的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:25:59.220

您是否使用直通身份验证连接到 SSMS？如果是这样，我相信您的向导将以您的用户身份运行。使用 sa 帐户连接到 SSMS 中的数据库服务器，然后尝试启动它。

给它一个到另一个数据库的有效帐户，sa 需要在本地访问，第二个帐户需要在你的另一个 SQL 服务器上访问。

或者，确保您的域用户可以访问有问题的数据库（不是服务器，数据库是不同的）并以这种方式运行它。

主数据库是所有 sys 表所在的位置，可以说是霸主数据库：http: [//msdn.microsoft.com/en-us/library/ms187837.aspx](http://msdn.microsoft.com/en-us/library/ms187837.aspx)

# java - 当列表大小未知时，在 for 循环中创建变量

> ID：15034190
> 
> 赞同：-2
> 
> 时间：2013-02-22T22:22:02.627
> 
> 标签：java, android, list, http, for-loop

如果这个问题很愚蠢，我提前道歉，但我目前正在做一些事情，这需要我实现一个循环来解析一个`List`类型的对象`MenuItem`。在循环内部，我需要将对象的名称存储在一个`String`变量中。

但是我不确定里面会有多少物品`List`，因此不知道`variables`我需要多少。我可以在循环内部以某种方式动态声明变量吗？？？以下是我当前的代码：

```
for(int i = 0; i != orderItems.size(); i++){
                MenuItem item = orderItems.get(i);
                String itemName = item.getName();
            } 
```

上面循环的原因是因为当它退出时，我想通过发布请求将所有`itemName`变量发送到数据库。`Http`所以我可以像这样作为参数传递：

```
 new RequestTask().execute(url, itemName1, itemName2, itemName3); 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:26:25.343

您可以使用 varargs 指定接受变量列表的方法。最后，它只是一个接受此类变量数组的方法。所以你会以

```
 new RequestTask().execute(url, items);  // items is String[] 
```

如果您不知道`a priori`字符串的数量，请将它们存储在列表中。然后，您可以获得列表中的项目数，创建一个足够大的数组并填充它。或者，使用`toArray`可以做到这一点的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:34:02.340

这是我在循环未知值时一直使用的 ArrayList 语法。然后我将其转换为普通数组以进行进一步处理。

```
List<String> itemNameList = new ArrayList<String>();
for(int i = 0; i != orderItems.size(); i++) {
    MenuItem item = orderItems.get(i);
    itemNameList.add(item.getName());
}
String[] itemNameArray = new String[itemNameList.size()];
itemNameList.toArray(itemNameArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:29:00.233

将它们放入某种列表中，即；

```
 ArrayList<String> itemNameList = new ArrayList<String>();
    for(int i = 0; i != orderItems.size(); i++){ 
         MenuItem item = orderItems.get(i);
         String itemName = item.getName();
         itemNameList.add(itemName);
    } 
```

# javascript - 在淘汰赛中执行嵌套的 foreach 循环

> ID：15034196
> 
> 赞同：0
> 
> 时间：2013-02-22T22:22:37.857
> 
> 标签：javascript, jquery, knockout.js

我以前从未在淘汰赛中这样做过，所以我肯定是做错了什么。

我在这里有一个 jsfiddle 显示问题：http: [//jsfiddle.net/pdavis68/xebq7/](http://jsfiddle.net/pdavis68/xebq7/)

这是相关的HTML：

```
 <!-- ko foreach: Parameters -->
        <select data-bind="attr: { id: Name }">
            <!-- ko foreach: $parent.ValidValues -->
            <option data-bind="value: Value, text: Label"></option>
            <!-- /ko -->
        </select>
    <!-- /ko --> 
```

和相关的Javascript：

```
var ViewModel = function () {
    var self = this;
    self.Parameters = ko.observableArray();
}
var currentItem;

$(document).ready() {
    currentItem = new ViewModel();       
    ko.applyBindings(currentItem);

    currentItem.Parameters.push(
        [{"Name":"WarehouseCode", "ValidValues":
          [{"Label":"Warehouse 1-- (01)","Value":"01"},
           {"Label":"Warehouse 2 -- (02)","Value":"02"}]}]);
} 
```

当然，我的目标是让 ValidValues 用于填充`<option>`我的标签`<select>`，正如您从 jsFiddle 中看到的那样，这并没有发生。

如何更正我的 HTML？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:38:34.080

你有几个问题：

1.  你的`document.ready(...)`语法是错误的。您希望该块看起来像：

    ```
    $(document).ready(function () { ... }); // <-- note the "function" 
    ```

2.  您正在将一个数组推入可观察的项目数组中。您真的想用新值*更新可观察数组：*

    ```
    currentItem.Parameters([{
        "Name": "WarehouseCode",
        "ValidValues": [{
            "Label": "Warehouse 1-- (01)",
            "Value": "01"
        }, {
            "Label": "Warehouse 2 -- (02)",
            "Value": "02"
        }]
    }]); 
    ```

3.  您在小提琴中既不包括 KnockoutJS 也不包括 jQuery。

**更新示例：http:** [//jsfiddle.net/xebq7/1/](http://jsfiddle.net/xebq7/1/)

# android - 同时流式传输到内置扬声器和蓝牙扬声器

> ID：15034198
> 
> 赞同：1
> 
> 时间：2013-02-22T22:22:41.783
> 
> 标签：android, bluetooth

在 Android 上，是否可以同时将*音频流式传输*到*蓝牙配对扬声器*和内置*扬声器*？

仔细一看`AudioManager`，好像不是这样的。我认为可能有一种方法可以通过`MediaRouter`，但我找不到任何文档可以为我指明正确的方向。

如果有人有任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-12T11:55:29.547

你可以用`AudioManager.STREAM_RING`. 此属性设置为`MediaPlayer`：

```
mediaPlayer.setAudioStreamType(AudioManager.STREAM_RING); 
```

准备好了。

**但！**你真的会遇到蓝牙设备同步的问题。现在我正在尝试解决它。

# windows-phone - 可以从 win phone 8 api 获得文本评级吗？

> ID：15034201
> 
> 赞同：0
> 
> 时间：2013-02-22T22:22:54.187
> 
> 标签：windows-phone

是否可以通过 api 从 windows phone 8 市场获取文本评级？我知道我可以在市场上获得应用程序，但不知道其他事情是否可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:46:51.943

[我认为您可以像MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394030%28v=vs.92%29.aspx)公开的那样调用 MarketplaceDetail Launcher 。

# telerik - 如何使用 Telerik Test Studio 实现页面对象模型

> ID：15034206
> 
> 赞同：0
> 
> 时间：2013-02-22T22:23:15.360
> 
> 标签：telerik, pageobjects, telerik-test-studio

我正在评估 Telerik Test Studio ( [http://www.telerik.com/automated-testing-tools](http://www.telerik.com/automated-testing-tools) ) 作为 Web 回归工具，并寻找有关设置和使用页面对象模型环境的方法，例如硒。

[http://code.google.com/p/selenium/wiki/PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)

他们的文档专注于非常脆弱的记录/播放，而且我的谷歌搜索还没有找到相关链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:28:17.657

我想说，如果你使用 Telerik Test Studio(TTS)，你真的不需要实现页面对象模型。TTS 带有自己的 AUT 对象管理器，它的质量高于平均水平，并且做得足够好。但是，如果您必须使用 Page-Object 实现；这里有一些指导方针：

1.  您必须安装 VS 2008 或更高版本，因为您真的不想在独立的 TTS 中进行大量编码。
2.  在解决方案结构中，为您要使用的每个页面添加一个类文件。
3.  将要在页面元素上执行的方法实现为相应类中的公共方法。
4.  将页面的属性声明为相应类中的变量。
5.  在 Test 类中，实例化相关的页面类。

虽然确实没有框架支持在 TTS 中实现页面对象模型，但基本本质很容易复制。除此之外，您可以将方法扩展到更高级别。

# apache - 无法为目录创建别名

> ID：15034207
> 
> 赞同：0
> 
> 时间：2013-02-22T22:23:15.543
> 
> 标签：apache, symfony, url-rewriting

我想用 URL 重写缩短我的 URL，但我不知道如何，我做了 reasearch 但没有结果（我的服务器上的 url 重写工作）：

我的网址是这样的：

```
My-Domaine.com/Directory1/web/app.php/Directory2/    (Symfony 2 project) 
```

我想做这样的事情：

```
My-Domaine.com/Directory/ 
```

我的 htaccess 是这样的：

```
RewriteEngine on
RewriteRule /Directory1/web/app.php/Directory2/ Directory/  [PT]
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
AuthName www.My-Domaine.com
RewriteCond %{HTTP_HOST} ^My-Domaine.com$ [OR]
RewriteCond %{HTTP_HOST} ^My-Domaine.com$
RewriteRule ^/?$ "3W.My-Domaine.com/Directory1/web/app.php/Directory2/" [L] 
```

对不起我的英语，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T19:05:50.120

[使用别名](http://httpd.apache.org/docs/current/mod/mod_alias.html)而不是 url 重写可能会更容易。

您只需要在主机配置中添加类似的内容。

```
Alias /Directory "var/www/Directory1/web/"
<Directory "var/www/Directory1/web/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride All
</Directory> 
```

这样，您还可以避免踩到 Symfony 用来将请求定向到前端控制器的 URL 重写的可能性。

# android - 片段无法恢复保存的即时状态

> ID：15034213
> 
> 赞同：0
> 
> 时间：2013-02-22T22:23:47.633
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

我有三个活动：（`ActivitySection`与`FragmentSection`- 列表一起使用）、`ActivityChapter`（与`FragmentChapter`- 列表一起使用）和`ActivityDetail`（与 一起使用`FragmentDetail`）。

`ActivityChapter`is a list 是根据从 中选择的项目的子列表`ActivitySection`。因此，当用户从 移动`ActivityChapter`到 时`ActivityDetail`，我存储选择部分名称，以便当他按下（在操作栏上）时，我可以恢复所选部分名称并使用相同的子列表填充片段内容。

这是我保存值的代码：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(Konstant.KEY_SAVED_SECTION, mStrSelectedSection);
} 
```

这是我恢复值的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null)
        if (savedInstanceState.containsKey(Konstant.KEY_SAVED_SECTION))
            mStrSelectedSection = savedInstanceState.getString(Konstant.KEY_SAVED_SECTION);
} 
```

当我从`ActivityChapter`to移动时`ActivityDetail`，`onSaveInstanceState()`被调用并`mStrSelectedSection`具有正确的值。当我从 回来时`ActivityDetail`，`onCreate()`of`ActivityChapter`被称为但`savedInstanceState`is `null`。

所以，我无法填充相同的子列表。

谁能告诉我我做错了什么？

# ember.js - 保存带有关联模型的表格

> ID：15034219
> 
> 赞同：0
> 
> 时间：2013-02-22T22:24:28.960
> 
> 标签：ember.js, associations, ember-data

它看起来很简单，但我坚持这个。我有一个控制器和一个专用于订单模型的视图，它有嵌套的客户端。我在 setupController 上创建空记录：

*路线：*

```
ShowroomApp.OrdersRoute = Ember.Route.extend
  model: ->
    ShowroomApp.Order.createRecord()
  setupController: (controller,model) ->
    model.set("client", ShowroomApp.Client.createRecord() )
    controller.set("content", model ) 
```

*控制器：*

```
save: ->
  @content.store.commit() 
```

在 OrdersController 上，我有保存操作以提交表单中所做的更改。它会为每个模型生成两个单独的 POST 请求，但关联不会自行建立。Orders 模型先保存，client_id 显然为 null，因为 client 尚不存在。后来去客户端发布并保存客户端，但订单模型不知道它并且没有客户端。

有什么解决办法吗？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:28:23.683

这是由于一个突出的 ember-data 问题 - [RESTAdapter: Allow new parent, child to be saved at once](https://github.com/emberjs/data/issues/437)

查看[Tom Dale 的评论](https://github.com/emberjs/data/issues/437#issuecomment-9782817)以了解可能的解决方法。它涉及手动添加对同时保存两条记录的支持。

作为替代方案，您可以考虑向`onCreate`父记录添加回调，然后在回调中创建子记录。如果您可以接受第二次 commit()，这将完成工作。

# lisp - 在方案中打破递归的标准方法

> ID：15034232
> 
> 赞同：8
> 
> 时间：2013-02-22T22:25:12.567
> 
> 标签：lisp, scheme

我正在计划中编写我的第一个程序。我对递归非常深入，因为我基本上为一个简单的机器人解释了一个程序，它可以有嵌套的过程调用。

如果我发现违规，我需要停止解释程序并返回最后一个有效状态。

我通过声明一个全局变量`(define illegalMoveFlag 0)`然后通过设置它来解决它`set!`。

它工作正常，但我猜我的导师不会喜欢它（因为我猜它不是功能性方法）

我考虑过的其他方法是在程序中递归调用的每个函数中添加一个错误参数。我不太喜欢它，因为它会使我的代码的可读性大大降低，但我想它更“实用”。

有没有我没有想到的第三种方式？我的方法在这种范式中是否合理，或者它基本上是一种代码味道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T22:37:51.937

停止递归的常用方法是停止递归。即，不再调用递归函数。:-)

如果这太难了，另一种突破的方法是在顶层捕获一个延续（在你开始递归之前），然后在你需要“转义”时调用延续。不过，您的讲师可能不喜欢这种方法。;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T10:04:31.363

由于这是您的第一个 Scheme 程序，您可能只需要引入一个条件表达式 ，`cond`以避免在到达末尾时进一步递归。例如：

```
; sum : natural -> natural
;  compute the sum 0+1+...+max
(define (sum max)
  (define (sum-helper i sum-so-far)
    (if (> i max)
        sum-so-far
        (sum-helper (+ i 1) (+ sum-so-far i))))
  (sum-helper 0 0))

(display (sum 10))
(newline) 
```

但是，如果您需要`return`像在 C 中一样返回传统`longjmp`，则需要存储和使用转义延续。这可以这样做：

```
(define (example)
  (let/ec return
    (define (loop n)
      (if (= n 100000)
          (return (list "final count: " n))
          (loop (+ n 1))))
    (loop 0)))

(display (example)) 
```

如果`let/ec`未在您的 Scheme 实现中定义，则在您的程序前加上：

```
(define-syntax let/ec 
  (syntax-rules ()
    [(_ return body ...)
     (call-with-current-continuation
      (lambda (return)
        body ...))])) 
```

更新：

请注意，`cond`有一个`=>`变体：

```
(cond
  [(call-that-can-fail)
    => (lambda (a) <use-a-here>))]
  [else <do-something-else>]) 
```

如果调用成功，则采用第一个子句并将结果绑定到 a。如果调用失败，则使用 else 子句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T22:37:52.713

您可能想使用内置过程`error`，如下所示：

```
(error "Illegal move") ; gives ** Error: Illegal move 
```

这将引发异常并停止解释程序（尽管我怀疑这可能不是您想要的）。

您还可以提供其他参数，如下所示：

```
(error "Illegal move: " move) ; gives ** Error: Illegal move: <move> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T22:38:44.600

您可以使用延续退出递归（或从任何其他进程）。在不了解更多细节的情况下，我建议您查看解释器的[文档](http://docs.racket-lang.org/reference/cont.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T10:54:54.627

使非法移动标志成为函数中的参数而不是全局变量

我会给你一个带有阶乘的简单例子

即：0！= 1个！= n * (n - 1)！当 n (1 ... 无穷大)

让我们称之为递归阶乘

```
(define (fact-r n)
    (if 
       [eq? n 0] 
       1 
       (* n (fact-r (- n 1)))
    )
) 
```

另一种方法是使用函数的参数来结束递归让我们称之为迭代阶乘

```
(define (fact-i n total)
  (if 
      (eq? n 0) 
      total
      (fact-i (- n 1) (* n total))
  )
) 
```

total 需要从 1 开始，所以我们应该创建另一个函数以更好地使用它

```
(define (nice-fact n)
  (fact-i n 1)) 
```

你可以用非法移动标志做类似的事情来避免使用全局变量至于避免使用集合！去，我们可能需要更多信息。

在某些情况下，仍然很难避免使用它。无需使用 set，Scheme 就是完全图灵完备的！但是，在访问外部信息源（例如数据库或机器人集）时！可以成为唯一可行的解​​决方案...

# jquery - 无法在 div 中显示动画文本

> ID：15034233
> 
> 赞同：0
> 
> 时间：2013-02-22T22:25:15.720
> 
> 标签：jquery

我几乎在我需要的地方。我正在尝试使用 jquery[在此处匹配此 Flash 标头。](http://www.abbingtonpartners.com/)这是我到目前为止的[链接，](http://northshorewebdesign.net/jm-demo/index2.html)当我尝试将文本从右侧滑入时，问题就开始了。它最终位于文档底部附近。我尝试了不同组合中的绝对定位和相对定位，但没有奏效。这是我的代码：

```
 // JavaScript Document
$(document).ready(function() {
    $("#wrap").css({
        'width':'900px',
        'margin':'0px auto', 
        'height':'150px', 
        'background':'#333',
        'overflow':'hidden'
        });
        // css for first text
    $("#text1").css({
        'position':'relative',
        'margin':'0px auto',
        'text-align':'center', 
        'color':'#fff', 
        'font-size':'140px',
        'top':'-120px', 
        'opacity':'0.5'
        });
        // animate first text
    $("#text1").animate({
        'top':'150px'           
        }, 3000, 'linear');

        // css for second text  
    $("#text2").css({
        'position':'relative',
        'margin':'0px auto',
        'text-align':'center', 
        'color':'#fff', 
        'font-size':'140px',
        'bottom':'-80px', 
        'opacity':'0.5'
        });
        // animate second text
    $("#text2").animate({
        'bottom':'330px'
        }, 3500, 'linear');

        // css for third text   
    $("#text3").css({
        'position':'relative',
        'margin':'0px auto',
        'text-align':'center', 
        'color':'#fff', 
        'font-size':'60px',
        'right':'0px', 
        });
        // animate third text
    $("#text3").animate({
        'right':'160px'         
        }, 3000, 'linear');

}); 
```

id 是 text3。抱歉，我无法正确格式化代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:34:29.000

在 css 中没有设置顶部，它被其他东西推下：

```
 #text3 {
    color: #FFFFFF;
    font-size: 140px;
    margin: 0 auto;
    opacity: 0.5;
    position: relative;
    text-align: center;
    top: 150px;
 } 
```

您还需要使用具有 position:relative 的#wrap 来重做此操作，因为任何左右移动都将基于窗口，因此使用 px 值会使它看起来根据窗口大小而有所不同。#text3 的宽度约为 315px，因此您需要将其设置在右侧：-315px 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:31:32.883

尝试给你的#wrap 一个相对位置，然后你在其中的移动文本一个绝对位置。它应该会减少你的头痛。

# c - 更改C中缓冲区的播放速率？

> ID：15034237
> 
> 赞同：3
> 
> 时间：2013-02-22T22:25:34.163
> 
> 标签：c, audio, buffer, rate, wav

我正在使用 Altera DE2 FPGA 板并使用 SD 卡端口和音频线路输出。我正在用 VHDL 和 C 编程，但由于缺乏经验/知识，C 部分是我被困的地方。

目前，我可以从 SD 卡播放 .wav 文件到线路输出。我通过读取和发送 SD 卡数据 > FIFO > 音频编解码器 > 线路输出来做到这一点。忽略所有其他细节，代码就是：

```
UINT16 Tmp1=0;
...
Tmp1=(Buffer[i+1]<<8)|Buffer[i];  //loads the data from the SD card to Tmp1
     //change the buffer rate?
IOWR(AUDIO_BASE, 0, Tmp1);        //sends Tmp1 data to Line Out 
```

如果我要打印 Tmp1，它基本上是正弦波上的点。我现在要做的是通过更改播放速率来调整声音的播放方式（理想情况下，我想将声音向上或向下播放一个八度音阶，这只是频率的两倍或一半）。任何人都可以在本节中提供一些关于我如何做到这一点的建议：

```
//change the buffer rate? 
```

是否可以在 C 中在该部分中编写几行代码以获得我正在寻找的内容？IE。更改我从 Tmp1 缓冲区读取到 AUDIO_BASE 的速度。

提前致谢！

~萨伦戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:45:18.980

如果 IOWR 接口没有提供这样的选项，那么您将不得不自己做：您必须重新采样声音。该理论可以在这里**[1](https://en.wikipedia.org/wiki/Sample_rate_conversion)**这里**[2](https://en.wikipedia.org/wiki/Sampling_%28information_theory%29)**这里**[3](https://en.wikipedia.org/wiki/Upsampling)**和 这里**[4](https://en.wikipedia.org/wiki/Downsampling)**找到。

将频率提高一个倍数很容易：只需删除一些样本，例如，通过从缓冲区中删除每个第二个样本来将频率降低 2 倍，这样它就有一半的大小。

降低频率更难，因为您需要您没有的信息：样本之间的样本。您可以从简单的线性插值开始，如果您认为它听起来不够好，您可以将其更改为更高级的东西。例如，您可以通过在两个具有平均值的样本之间插入样本来降低频率。如果您的波形如下所示： 5 9 7 3 您将得到 5 7 9 8 7 5 3

# c++ - OSX 64 位 C++ 逐行反汇编

> ID：15034247
> 
> 赞同：0
> 
> 时间：2013-02-22T22:26:15.393
> 
> 标签：c++, assembly, disassembly

我一直在阅读以下系列文章：[http ://www.altdevblogaday.com/2011/11/09/a-low-level-curriculum-for-c-and-c](http://www.altdevblogaday.com/2011/11/09/a-low-level-curriculum-for-c-and-c)

显示的反汇编代码和我在运行相同代码时设法生成的反汇编代码差异很大，我缺乏解释差异的理解。

有没有人可以逐行遍历它，也许可以解释它在每一步都在做什么？我从我所做的搜索中得到感觉，前几行与帧指针有关，在我的反汇编代码中似乎还有一些额外的行，以确保在将新值放入寄存器之前寄存器是空的（不存在来自文章中的代码）

我正在使用 XCode 4 中的 g++ 编译器在 OSX（原作者使用 Windows）上运行它。我真的不知道这些差异是否是由于操作系统、架构（可能是 32 位与 64 位？）或编译器本身。它甚至可能是我猜的代码——我的代码包含在主函数声明中，而原始代码没有提及这一点。

我的代码：

```
int main(int argc, const char * argv[])
{

    int x = 1;
    int y = 2;
    int z = 0;

    z = x + y;

} 
```

我的反汇编代码：

```
0x100000f40:  pushq  %rbp
0x100000f41:  movq   %rsp, %rbp
0x100000f44:  movl   $0, %eax
0x100000f49:  movl   %edi, -4(%rbp)
0x100000f4c:  movq   %rsi, -16(%rbp)
0x100000f50:  movl   $1, -20(%rbp)
0x100000f57:  movl   $2, -24(%rbp)
0x100000f5e:  movl   $0, -28(%rbp)
0x100000f65:  movl   -20(%rbp), %edi
0x100000f68:  addl   -24(%rbp), %edi
0x100000f6b:  movl   %edi, -28(%rbp)
0x100000f6e:  popq   %rbp
0x100000f6f:  ret 
```

原文章的反汇编代码：

```
mov    dword ptr [ebp-8],1
mov    dword ptr [ebp-14h],2
mov    dword ptr [ebp-20h],0
mov    eax, dword ptr [ebp-8]
add    eax, dword ptr [ebp-14h]
mov    dword ptr [ebp-20h],eax 
```

完整的逐行细分将非常有启发性，但对于理解这一点的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:29:53.243

原始文章中的所有代码都在您的代码中，只是周围有一些额外的东西。这：

```
0x100000f50:  movl   $1, -20(%rbp)
0x100000f57:  movl   $2, -24(%rbp)
0x100000f5e:  movl   $0, -28(%rbp)
0x100000f65:  movl   -20(%rbp), %edi
0x100000f68:  addl   -24(%rbp), %edi
0x100000f6b:  movl   %edi, -28(%rbp) 
```

直接对应于文章中谈到的 6 条指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:36:36.303

首先，列为“来自原始文章”的汇编程序使用“英特尔”语法，您帖子中的“反汇编输出”是“AT&T 语法”。这解释了指令的参数顺序是“从后到前”[让我们不要争论正确或错误，好吗？]，并且寄存器名称以 a 为前缀`%`，常量以 . 为前缀`$`。引用寄存器的内存位置/偏移量的方式也有所不同 -`dword ptr [reg+offs]`在英特尔汇编程序中，它转换`l`为指令的后缀，而`offs(%reg)`.

32 位与 64 位重命名了一些寄存器 -与文章代码中`%rbp`的相同`ebp`。

实际偏移量（例如`-20`）不同，部分原因是寄存器在 64 位中更大，但也因为您有`argc`和`argv`作为函数参数的一部分，它作为函数开头的一部分存储 - 我有一种原始的感觉文章实际上是在反汇编一个不同于`main`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:41:17.337

你的反汇编代码和文章的代码有两个主要区别。

一是文章使用的是 Intel 汇编器语法，而您的反汇编代码使用的是传统的 Unix/AT&T 汇编器语法。两者之间的一些差异记录在[Wikipedia](http://en.wikipedia.org/wiki/X86_assembly_language#Syntax)上。

另一个区别是文章省略了函数prologue，它建立了堆栈框架，以及函数epilogue，它破坏了堆栈框架并返回给调用者。他正在反汇编的程序必须包含执行这些操作的指令，但他的反汇编程序没有显示它们。（实际上，如果启用了优化器，堆栈帧*可以*并且可能会被省略，但显然没有启用。）

还有一些细微差别：您的代码对局部变量使用了稍微不同的布局，并且您的代码在不同的寄存器中计算总和。

在 Mac 上，g++ 不支持发出 Intel 助记符，但 clang 支持：

```
:; clang -S -mllvm --x86-asm-syntax=intel t.c
:; cat t.s
    .section    __TEXT,__text,regular,pure_instructions
    .globl  _main
    .align  4, 0x90
_main:                                  ## @main
    .cfi_startproc
## BB#0:
    push    RBP
Ltmp2:
    .cfi_def_cfa_offset 16
Ltmp3:
    .cfi_offset rbp, -16
    mov RBP, RSP
Ltmp4:
    .cfi_def_cfa_register rbp
    mov EAX, 0
    mov DWORD PTR [RBP - 4], EDI
    mov QWORD PTR [RBP - 16], RSI
    mov DWORD PTR [RBP - 20], 1
    mov DWORD PTR [RBP - 24], 2
    mov DWORD PTR [RBP - 28], 0
    mov EDI, DWORD PTR [RBP - 20]
    add EDI, DWORD PTR [RBP - 24]
    mov DWORD PTR [RBP - 28], EDI
    pop RBP
    ret
    .cfi_endproc

.subsections_via_symbols 
```

如果添加`-g`标志，编译器将添加调试信息，包括源文件名和行号。它太大了，无法完整地放在这里，但这是相关的部分：

```
 .loc    1 4 14 prologue_end     ## t.c:4:14
Ltmp5:
    mov DWORD PTR [RBP - 20], 1
    .loc    1 5 14                  ## t.c:5:14
    mov DWORD PTR [RBP - 24], 2
    .loc    1 6 14                  ## t.c:6:14
    mov DWORD PTR [RBP - 28], 0
    .loc    1 8 5                   ## t.c:8:5
    mov EDI, DWORD PTR [RBP - 20]
    add EDI, DWORD PTR [RBP - 24]
    mov DWORD PTR [RBP - 28], EDI 
```

# python - 在 Python 中智能地解析具有组织信息的人员列表

> ID：15034248
> 
> 赞同：1
> 
> 时间：2013-02-22T22:26:18.193
> 
> 标签：python, parsing

假设我有以下格式的明文：

> John Doe、Suzy Q、Sue N. Sough 和 Michael Blanks，奇才大学，英国
> 
> John Doe，Normal Place，葡萄牙和 Suzy Q，Other Place，法国
> 
> John Doe 和 Suzy Q，第三地点，德国
> 
> John Doe、Suzy Q 和 Doug Z Doug，第四地点，波兰和 Simon Pft，第五地点，韩国

正确解析后，数据应如下所示：

```
[{
    'organization': "Wizards University",
    'country': "United Kingdom",
    'authors': ["John Doe", "Suzy Q", "Sue N. Sough", "Michael Blanks"]
}]

[ {
    'organization': "Normal Place",
    'country': "Portugal",
    'authors': ["John Doe"]
}, {
    'organization': "Other Place",
    'country': "France",
    'authors': ["Suzie Q"]
} ]

[{
    'organization': "Third Location",
    'country': "Germany",
    'authors': ["John Doe", "Suzy Q"]
}]

[ {
    'organization': "Fourth Location",
    'country': "Poland",
    'authors': ["John Doe", "Suzy Q", "Doug Z. Doug"]
}, {
    'organization': "Fifth Location",
    'country': "Korea",
    'authors': ["Simon Pft"]
} ] 
```

人类查看这段文本并正确解析它是非常微不足道的，但我想知道是否有一种方法可以编写一个脚本，当它正在查看一堆一起列出的名称时，它可以阅读和识别。我的意思是，从一个只查找逗号和`and`s 的愚蠢解析器开始，

> John Doe、Suzy Q、Sue N. Sough 和 Michael Blanks，奇才大学，英国

看起来就像

> John Doe，Normal Place，葡萄牙和 Suzy Q，Other Place，法国

并且可以这样解析：

```
[{
    'organization': "Suzy Q",
    'country': "Sue N. Sough",
    'authors': ["John Doe"]
} , {
    'organization': "Wizards University",
    'country': "United Kingdom",
    'authors': ["Michael Blanks"]
}] 
```

## 关键和烦人的补充！

并不总是给出国家（呃，我知道！），尤其是当它隐含在组织名称中时。

所以*有时*记录看起来像：

> John Doe、Suzy Q、Sue N. Sough 和 Michael Blanks，奇才大学
> 
> 葡萄牙大学的 John Doe 和法国其他地方的 Suzy Q
> 
> John Doe 和 Suzy Q，第三个地点
> 
> John Doe、Suzy Q 和 Doug Z Doug，第四地点，波兰和 Simon Pft，高丽大学

因此，虽然我可以将国家名称（也以非标准方式格式化，例如韩国、韩国、大韩民国等）用于某些记录，但它并不适用于所有记录。

### 我最终做了什么……</h3>

…正在使用我所知道的最聪明的模式识别工具——我。我只是用一个正则表达式搜索和替换来扫描文档，`\s*(,|&|\band\b)\s*`如果它在我替换它`|`的名称之间，如果它在我替换它的名称组之间`;`。幸运的是，数据集足够小（总共不到 100 个），所花费的时间少于我编写一个足够智能的解析器所花费的时间。我*确实*开始使用贝叶斯分类器，它在区分人名和组织方面做得很好，但它仍然经常错误地识别一个或另一个，以至于它不适合我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:01:05.910

我认为Shasan走在正确的轨道上。国家名称定义了一个单位的结尾。倒数第二个标记（由“，”分隔）是公司名称，其余标记是名称。

如果您在同一个国家/地区有两个 people-company 元组，则可以打破这种情况的用例，例如：

> John Doe，Normal Place 和 Suzy Q，Other Place，法国

此外，如果您的文本中有逗号是公司名称的一部分。引号可以用来保护这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:38:05.770

如果国家总是在最后，组织是前一个元素，那么你可以将其他元素视为名称，并且你可以通过'and'＆','来轻松编写一些代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T00:04:09.380

```
l=Line.split(",")
Row = {
    "Org": l[-2],
    "Ctry": l[-1],
    "Authors": l[:-2]
} 
```

# ios - 显示 JSON 数据的 UITableView 中的响应滞后

> ID：15034252
> 
> 赞同：0
> 
> 时间：2013-02-22T22:26:30.127
> 
> 标签：ios, json, uitableview

在我的应用程序中，我正在解析 JSON 数据，然后在 UITableView 中显示该数据。信息显示在表格中，但触摸响应非常糟糕。我做了一些研究，发现建议对信息，尤其是图像实现异步加载，但我找不到任何适用于我的 JSON 应用程序的相关解决方案。我会很感激一些关于如何解决这个问题的建议和意见，这里是代码：

jURL 定义 www.website.com/info.json

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dispatch_async(jQueue, ^{

        NSData* data = [NSData dataWithContentsOfURL:

                        jURL];

        [self performSelectorOnMainThread:@selector(fetchedData:)

                               withObject:data waitUntilDone:NO];

    });

}

- (void)fetchedData:(NSData *)responseData {
    NSError* error;

    NSDictionary* jsonDict = [NSJSONSerialization

                          JSONObjectWithData:responseData

                          options:kNilOptions

                          error:&error];

    calRes = [jsonDict objectForKey:@"results"];

    [self.tableView reloadData];

}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSDictionary *calDict = [calRes objectAtIndex:indexPath.row];

    NSURL *imageURL = [NSURL URLWithString:[calDict objectForKey:@"image"]];

    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

    UIImage *imageLoad = [[UIImage alloc] initWithData:imageData];

    cell.textLabel.text = [calDict objectForKey:@"name"];

    cell.detailTextLabel.text = [calDict objectForKey:@"description"];    
    cell.imageView.image = imageLoad;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:37:30.530

我喜欢使用[AFNetworking 库](https://github.com/AFNetworking/AFNetworking)来轻松进行异步图像加载。您将需要包括图书馆

```
#import "AFNetworking.h" 
```

然后在 cellForRowAtIndexPath 中使用它

```
[cell.imageView setImageWithURL:[NSURL URLWithString:[calDict objectForKey:@"image"]]
    placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

您还需要提供占位符图像。我使用您想要的最终图像大小的空白 JPG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T04:14:51.817

您可以从此链接使用 SDWebImage：[https](https://github.com/rs/SDWebImage) ://github.com/rs/SDWebImage 它是用于异步图像加载的最简单、最快的库。它还提供图像缓存。您只需调用此函数即可完成整个操作：

```
[cell.imageView setImageWithURL:jURL
                   placeholderImage:[UIImage imageNamed:@"your place holder here"]]; 
```

尽情享受吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T22:57:27.947

作为后续，最好使用 Jake Marsh 的这个非常方便的插件在本地缓存图像：[JMImageCache](https://github.com/jakemarsh/JMImageCache)

这样，下次启动应用程序时就不需要从 URL 加载图像了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-30T04:50:30.887

看， cellforRowAtIndexPath 的滞后是因为这个

NSURL *imageURL = [NSURL URLWithString:[calDict objectForKey:@"image"]];

```
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

UIImage *imageLoad = [[UIImage alloc] initWithData:imageData]; 
```

你为什么不使用 GCD 添加图像？此外，您可以拥有自己的 NSCache 来存储图像，以便每次重新加载表时，都可以直接从内存中加载图像，而不是触发 url。

# actionscript-3 - 如何通过降低 CPU 速度来防止在 Flash 游戏中作弊？

> ID：15034253
> 
> 赞同：0
> 
> 时间：2013-02-22T22:26:32.290
> 
> 标签：actionscript-3, actionscript, anti-cheat

我在 AS3 中开发了一个 Flash 游戏，类似于 Facebook 上的音乐挑战赛，您需要从选择的歌曲中猜测，其中一首是正在播放的歌曲，分数基于您在 30 秒内猜到了多少，这个超时时间是由 Timer 的实例处理。

一切正常，但有人指出，通过降低 cpu 性能，计时器变慢，允许用户播放更长时间，猜测更多歌曲并最终获得更高的分数，然后我做了一些研究，并阅读以防止这种情况，我需要使用系统时间，问题是，我不知道该怎么做。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:19:27.933

你可以有一个间隔很短的重复计时器，大约 100 毫秒，并检查`new Date().getTime()`每个滴答声。默认情况下，new`Date`具有当前系统时间，并`getTime()`以毫秒为单位为您提供更简单的比较时间。将其与开始时间进行比较，并在至少经过 30 秒后结束游戏。就像是：

```
import flash.utils.Timer;
import flash.events.TimerEvent;

var ticker:Timer = new Timer(100, 0);
ticker.addEventListener(TimerEvent.TIMER, checkElapsedTime);

var startTime:Number = new Date().getTime();
ticker.start();

function checkElapsedTime(e:TimerEvent):void {

    var now:Number = new Date().getTime();

    if (now - startTime >= 30 * 1000) {

        // End the game and stop the ticker.

        ticker.stop();
        ticker.removeEventListener(TimerEvent.TIMER, checkElapsedTime);
    }

} 
```

如果计时器非常慢，显然仍然会有一些轻微的延迟，所以以防万一我在提交答案时运行相同的检查，如果在截止日期之后忽略它。

最后，要检查用户是否更改了他们的系统时钟，您可以存储以前的`now`并确保新`now`的总是更大。

# qt - 在不同的线程中启动声子播放器？

> ID：15034255
> 
> 赞同：0
> 
> 时间：2013-02-22T22:26:36.223
> 
> 标签：qt, pyqt, phonon

我有一个`Phonon.MediaObject`通过`Phonon.AudioOutput`. 因此，在运行时`play()`，主 GUI 会冻结，直到播放器开始播放（最坏情况下为 5 秒）。

这可以通过移动播放器来解决，或者至少是网络抓取任务。我已经在网上阅读了有关`moveToThread()`功能的信息，但它似乎不起作用。

我试着用它做一个线程，但没有运气：[http://pastebin.com/1iXdQD8Y](http://pastebin.com/1iXdQD8Y)（用 PyQt 编写）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:27:13.450

这将需要您进行更多的编码。

我不太了解python，但是通过查看您的代码，我认为您犯的一个错误是假设您的`PhononThread`类生活在它自己的线程中，但实际上它生活在创建它的线程中。

我什至不会尝试`MediaObject`在线程之间移动对象。一种方法是创建自己的`QObject`后代，然后在它的构造函数中创建播放音乐所需的所有对象。您还需要向您的类添加插槽，以访问您需要从主线程调用的每个声子函数。请记住在没有父对象的情况下创建此对象。然后您需要将其移动到新创建的 QThread 并连接线程之间的所有信号/插槽。

我不使用 python，但这里是伪 C++ 大纲，它应该是什么样子：

```
class MyPlayer: public QObject{
    Q_OBJECT

public:

    AudioOutput* ao;
    MediaObject* mo;

    MyPlayer() : QObject(0) {    // note no parent QObject instance
        ao = new AudioOutput();
        ... // Create and connect all objects
    }

public slots:

    void setCurrentSource ( const MediaSource & source ){
        mo->setCurrentSource(source);
    }
    // And other methods that are not slots already.
}; 
```

然后在您的应用程序中执行以下操作：

```
MyPlayer* mp = new MyPlayer();
QThread* th = new QThread();

connect(th, SIGNAL(finished()), mp, SLOT(deleteLater()));

connect( mainThreadObj, SIGNAL(setPlayerSource ( const MediaSource & ) ), mp, SLOT(setPlayerSource ( const MediaSource & ) ) );
... // and other signals; note that methods that are signals already can be conected witout wrappers:
connect( mainThreadObj, SIGNAL(playerPlay() ), mp->mo, SLOT(play()) );

mp->moveToThread(th); 
```

要停止线程，只需将信号从主线程连接到`quit()`插槽，并在需要时发出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:13:18.850

子类`QThread`，`run()`用你想在你的线程中发生的东西重新实现，然后创建你的线程的一个实例并调用`start()`它。

当您连接到线程中或线程中的东西时要小心，因为您不想进行直接或自动连接，在大多数情况下您希望进行排队连接。

此链接显示了两种使用方式`QThread`，一种如我刚刚描述的那样，它链接到另一个使用`moveToThread()`.

[实现 QThread 的正确方法是什么...（请举例...）](https://stackoverflow.com/questions/4093159/what-is-the-correct-way-to-implement-a-qthread-example-please)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:25:14.980

你试过`QtConcurrent::run`吗？它在单独的线程中运行函数。

[http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html#run](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html#run) 或在这里查看[https://stackoverflow.com/search?q=QtConcurrent%3A%3Arun](https://stackoverflow.com/search?q=QtConcurrent%3A%3Arun)

# php - foreach() SQL 查询只得到唯一的结果

> ID：15034256
> 
> 赞同：2
> 
> 时间：2013-02-22T22:26:42.223
> 
> 标签：php, sql, foreach

`performanta_cpu`我的表中有一行`modele` ，该行包含不同的数字 cpu frecv。例如：`800, 1200, 1500,`等，我想了解所有的frecv。但如果 4 台设备具有相同的 cpu 速度，则显示第 4 次相同的 frecv。

`html <select>`是否有可能在ex: `800`, `1000`, `1200`, , 等中只获得一次 frecv `1400`？

这是我的代码：

```
$sql = "SELECT * FROM $tbl_name ORDER BY performanta_cpu DESC";
    foreach ($dbh->query($sql) as $linie)
        {

    print '<option value="'.$linie["performanta_cpu"].'">'.$linie["performanta_cpu"].'</option>'; }?> 
```

这就是我得到的：

```
 <option value="800">800</option>
           <option value="800">800</option>
           <option value="2000">2000</option>
           <option value="2000">2000</option>
           <option value="1600">1600</option>
           <option value="1500">1500</option>
           <option value="1500">1500</option>
           <option value="1500">1500</option>
           <option value="1400">1400</option>
           <option value="1000">1000</option>
           <option value="1000">1000</option>
           <option value="1000">1000</option>
           <option value=""></option> 
```

正确的会是这样的：

```
 <option value="1600">1600</option>
           <option value="1500">1500</option>
           <option value="1400">1400</option>
           <option value="1300">1300</option>
           <option value="1200">1200</option>
           <option value="1100">1100</option>
           and so... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:30:03.947

将查询更改为

```
SELECT DISTINCT(performanta_cpu) FROM $tbl_name ORDER BY performanta_cpu DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T22:30:24.670

你可以`SELECT DISTINCT(performanta_cpu) FROM $tbl_name ORDER BY CAST(performanta_cpu AS UNSIGNED) DESC`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T22:34:03.860

如果您要添加 DISTINCT，它必须有效。

> SELECT **DISTINCT** (performanta_cpu) FROM $tbl_name ORDER BY performanta_cpu

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T22:31:34.140

试试这个

```
$sql = "SELECT * FROM $tbl_name ORDER BY performanta_cpu DESC";
$cpu = array();
foreach ($dbh->query($sql) as $linie)
    $cpu[] = $linie["performanta_cpu"];

$cpu = array_unique($cpu);

foreach($cpu as $val)
    print '<option value="'.$val.'">'.$val.'</option>'; }?> 
```

# javascript - iScroll 隐藏/显示滚动条

> ID：15034257
> 
> 赞同：0
> 
> 时间：2013-02-22T22:26:42.093
> 
> 标签：javascript, jquery, iscroll

我正在尝试在我的 iScroll div 上实现悬停功能，我可以在其中显示/隐藏滚动条。我想让用户将鼠标悬停在 div 上并显示滚动条，一旦用户将鼠标移出容器，滚动条就会消失。

我一直在研究这个，看看它是否可能，但没有太多运气试图找到解决方案。我发现 iScroll 有一个 hideScrollbar 参数，我可以在初始化新的 iScroll 对象时设置它，但不完全确定如何根据用户与滚动容器的交互动态设置参数。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T13:40:15.220

下面的代码将给出你想要的。:)（经过测试的桌面和 Android 和 iOS）；

```
hideScrollbar: !isIDevice || isIDevice || isAndroid,
fadeScrollbar: !isIDevice || isIDevice && has3d, 
```

这与 vletech 在 112-113 之前所说的相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:49:09.997

我似乎找不到`hideScrollbar`您上面提到的参数，但解决此问题的一种简单方法是在其上添加您自己的淡入淡出动画。

例如

```
$('#DivToHover').hover(
   function(){
      $('#ScrollBarDiv').fadeIn("fast");
   },
   function(){
      $('#ScrollBarDiv').fadeOut("fast");
   }
); 
```

但是，如果您希望这可以在移动设备上查看，这可能会导致一些问题。

**编辑**

将第 35 行更改为。

`isIDevice = (/iphone|ipad|Mozilla/gi).test(navigator.appVersion),`

**编辑 2** 再次考虑这个更好的方法是保留第 35 行`(/iphone|ipad/gi)`。但是将第 112 和 133 行更改为...

```
hideScrollbar: isIDevice && !isIDevice,
fadeScrollbar: isIDevice && !isIDevice && has3d, 
```

# android - 在猴子中运行特定命令不起作用

> ID：15034259
> 
> 赞同：1
> 
> 时间：2013-02-22T22:26:49.353
> 
> 标签：android, monkey

我读了这个页面 [http://hariniachala.blogspot.com/2011/09/android-application-ui-testing-with.html](http://hariniachala.blogspot.com/2011/09/android-application-ui-testing-with.html)

当我执行这段代码时

```
./adb -d shell monkey -p package_name --port 1080 &
./adb -d forward tcp:1080 tcp:1080
telnet localhost 1080 
```

我遇到了以下问题

```
C:\Users\subhi\Desktop>adb -d shell monkey -p package_name --port 1080
error: device not found 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-14T13:28:21.043

ADB 未找到设备的原因可能是您正在强制搜索物理设备（-d 选项）。如果您想与模拟设备交互，您应该使用 -e 甚至不使用选项（ADB 应该自动解决它）。总结一下，如果我理解你的问题，我的建议是启动一个 AVD，等到启动并使用：

```
adb shell monkey -p <app.package.name> --port <X> &
adb forward tcp:<X> tcp:<X>
telnet localhost <X> 
```

在哪里

```
<X> 
```

是您要使用的端口号。

# java - 方法操作以及如何分配它们

> ID：15034260
> 
> 赞同：-4
> 
> 时间：2013-02-22T22:26:52.600
> 
> 标签：java, methods

我几乎完成了一个项目，但几乎没有什么指导，我不确定我是否正确。下面的代码以三个带参数的方法结尾，但我不知道如何处理它们或如何回应“给他们做点什么”的评论。有什么建议么？有不止一种选择吗？谢谢。

```
public class Banktest {

    public static void main(String[] args) {
        BankAccount SM = new BankAccount("Sam", "Gamgee");
        System.out.println(SM.firstname + SM.lastname);
        SM.setAccountbalance();
        SM.setAccountNumber();
        System.out.println(SM.firstname + " " + SM.lastname 
           + " " + SM.accountbalance + " " + SM.accountnumber);
    }
} 
```

银行账户类

```
public class BankAccount {

    public String firstname;
    public double accountbalance;
    public String lastname;
    public int accountnumber;

    public BankAccount() {
    }

    public BankAccount(String firstname, String lastname, int accountnumber) {
        this.firstname = firstname;
        this.lastname = lastname;
        this.accountnumber = accountnumber;
        this.accountbalance = 0;
    }

    public BankAccount(String firstname, String lastname, 
        int accountnumber, double accountbalance) {

        this.firstname = firstname;
        this.lastname = lastname;
        this.accountnumber = accountnumber;
        this.accountbalance = accountbalance;
    }

    public BankAccount(String firstname, String lastname) {
        this.firstname = firstname;
        this.lastname = lastname;
    }

    public void setName(String firstname, String lastname) {
    }

    public void setAccountNumber(int accountnumber) {
    }

    public void setAccountbalance(double accountbalance) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:32:03.517

您的 BankAccount 类具有名字和姓氏的成员变量。此外，在调用您的方法时，您必须提供签名所期望的参数。

在 BankAccount 的实例上调用 setName 应该设置名称，确定吗？

```
this.firstname = firstname;
this.lastname = lastname; 
```

对于帐号和余额，这是类似的。

您创建或获得的方法称为 mutators/setter。您的成员变量应该是私有的，或者可以通过特定的访问器/获取器访问。

以下链接应该有助于您的理解：-

[http://java.about.com/od/workingwithobjects/a/accessormutator.htm](http://java.about.com/od/workingwithobjects/a/accessormutator.htm)

**稍微简单一点的解释**

如果您想象自己是一个非常简单的银行应用程序的软件开发人员。那个人需要一个银行账户。银行帐户必须属于某人，并且必须有银行帐号。在编写软件时，您可能必须考虑这样一种情况：一旦您拥有一个使用个人详细信息构建的银行账户对象，在某些情况下，可能需要允许这些变量发生变化。通过创建诸如“setName”之类的方法，您可以在不影响对象的其他部分（例如银行帐号）的情况下更改名称。

目前，您的 setName 方法和其他两个方法什么都不做。必须让他们有所作为，才能发挥作用。你不会想去银行要求改名，只是让他们实际上什么都不做！;-)

# ruby - 如何使用 Ruby 将键和值推送到空哈希中？

> ID：15034262
> 
> 赞同：13
> 
> 时间：2013-02-22T22:27:11.507
> 
> 标签：ruby, hash

我有一个字典类，希望能够使用“添加”方法将键（作为关键字）和值（作为定义）推送到空哈希中。我不明白如何从语法上写出来。我也包含了一个 RSPEC 文件。

**红宝石：**

```
 class Dictionary
     attr_accessor :keyword, :definition
     def entries
          @hash = {}
     end
     def add(options)
          options.map do |keyword, definition|
               @hash[keyword.to_sym] = definition
          end
     end
 end 
```

**规格：**

```
 require 'dictionary'

   describe Dictionary do
   before do
       @d = Dictionary.new
   end
   it 'can add whole entries with keyword and definition' do
       @d.add('fish' => 'aquatic animal')
       @d.entries.should == {'fish' => 'aquatic animal'}
       @d.keywords.should == ['fish']
   end 
```

任何帮助表示赞赏。谢谢！

**更新：** 感谢 Dave Newton 的回复。我使用了您的代码并收到此错误：

**错误：**

```
 *Failure/Error: @d.keywords.should == ['fish']
 NoMethodError:
 undefined method `keywords' for #<Dictionary:0x007fb0c31bd458 
 @hash={"fish"=>"aquatic animal"}>* 
```

当我使用 @hash[word.to_sym] = defintion 将 'word' 转换为符号时出现不同的错误

```
 *Failure/Error: @d.entries.should == {'fish' => 'aquatic animal'}
   expected: {"fish"=>"aquatic animal"}
        got: {:fish=>"aquatic animal"} (using ==)
   Diff:
   @@ -1,2 +1,2 @@
   -"fish" => "aquatic animal"
   +:fish => "aquatic animal"* 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-22T22:31:59.207

`Dictionary`在's中实例化您的哈希`initialize`：

```
class Dictionary
  def initialize
    @hash = {}
  end

  def add(defs)
    defs.each do |word, definition|
      @hash[word] = definition
    end
  end
end 
```

现在你没有哈希，直到你打电话`entries`，你没有。

`entries`应该*返回**现有的*哈希，而不是创建一个新的。

`keywords`应该返回哈希的键。

`keyword`和不需要访问器`definition`。这样的单数项在字典类中是没有意义的。您可能想要这样的东西`lookup(word)`返回*一个*定义。

此外，您将单词转换为符号，但我不知道为什么——特别是因为您在规范中使用了字符串键。选择一个，尽管我不相信这是符号增加价值的情况。

请仔细考虑变量命名以提供尽可能多的上下文。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T00:12:54.477

查看您的 Rspec，您似乎需要此设置。

```
class Dictionary
  def initialize
    @hash = {}
  end

  def add(key_value)
    key_value.each do |key, value|
      @hash[key] = value
    end
  end

  def entries
     @hash
  end

  def keywords
     @hash.keys
  end

end 
```

不要`key.to_sym`在 add 方法中使用，只需`key`

为了灵活地添加方法，我可以返回 self 对象以继续添加。

```
def add(key_value)
  key_value.each do |key, value|
    @hash[key] = value
  end
  self
end 
```

所以，我现在可以做到了。

```
@d.add("a" => "apple").add("b" => "bat") 
```

# python - CBC 模式下带有 AES-256 的 HMAC-SHA256

> ID：15034267
> 
> 赞同：3
> 
> 时间：2013-02-22T22:27:39.677
> 
> 标签：python, encryption, aes, hmac, pycrypto

我最近遇到[了以下代码示例](http://code.activestate.com/recipes/576980-authenticated-encryption-with-pycrypto/)，用于使用 AES-256 CBC 加密文件，并使用 SHA-256 HMAC 进行身份验证和验证：

```
aes_key, hmac_key = self.keys
# create a PKCS#7 pad to get us to `len(data) % 16 == 0`
pad_length = 16 - len(data) % 16
data = data + (pad_length * chr(pad_length))
# get IV
iv = os.urandom(16)
# create cipher
cipher = AES.new(aes_key, AES.MODE_CBC, iv)
data = iv + cipher.encrypt(data)
sig = hmac.new(hmac_key, data, hashlib.sha256).digest()
# return the encrypted data (iv, followed by encrypted data, followed by hmac sig):
return data + sig 
```

因为，就我而言，我加密的不仅仅是一个字符串，而是一个相当大的文件，我修改了代码以执行以下操作：

```
aes_key, hmac_key = self.keys
iv = os.urandom(16)
cipher = AES.new(aes_key, AES.MODE_CBC, iv)

with open('input.file', 'rb') as infile:
    with open('output.file', 'wb') as outfile:
        # write the iv to the file:
        outfile.write(iv)

        # start the loop
        end_of_line = True

        while True:
            input_chunk = infile.read(64 * 1024)

            if len(input_chunk) == 0:
                # we have reached the end of the input file and it matches `% 16 == 0`
                # so pad it with 16 bytes of PKCS#7 padding:
                end_of_line = True
                input_chunk += 16 * chr(16)
            elif len(input_chunk) % 16 > 0:
                # we have reached the end of the input file and it doesn't match `% 16 == 0`
                # pad it by the remainder of bytes in PKCS#7:
                end_of_line = True
                input_chunk_remainder = 16 - (len(input_chunk) & 16)
                input_chunk += input_chunk_remainder * chr(input_chunk_remainder)

            # write out encrypted data and an HMAC of the block
            outfile.write(cipher.encrypt(input_chunk) + hmac.new(hmac_key, data, 
                    hashlib.sha256).digest())

            if end_of_line:
                break 
```

简而言之，它一次读取 64KB 块中的输入文件并加密这些块，使用加密数据的 SHA-256 生成 HMAC，并在每个块之后附加该 HMAC。解密将通过读取 64KB + 32B 块并计算前 64KB 的 HMAC 并将其与占用块中最后 32 个字节的 SHA-256 和进行比较来进行。

这是使用 HMAC 的正确方法吗？它是否确保数据未经修改并使用正确的密钥解密的安全性和身份验证？

仅供参考，AES 和 HMAC 密钥都来自相同的密码短语，该密码短语是通过 SHA-512 运行输入文本，然后通过 bcrypt，然后再次通过 SHA-512 生成的。然后将最终 SHA-512 的输出分成两块，一个用于 AES 密码，另一个用于 HMAC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:37:49.257

**是的，有两个安全问题。**

但首先，我假设最后有这个陈述：

```
# write out encrypted data and an HMAC of the block
outfile.write(cipher.encrypt(input_chunk) + hmac.new(hmac_key, data, hashlib.sha256).digest()) 
```

你实际上的意思是：

```
# write out encrypted data and an HMAC of the block
data = cipher.encrypt(input_chunk)
outfile.write(data + hmac.new(hmac_key, data, hashlib.sha256).digest()) 
```

因为`data`没有在任何地方定义。

第一个安全问题是您要独立于其他部分验证每个部分，而不是组成部分。换句话说，攻击者可以重新洗牌、复制或删除任何块，而接收者不会注意到。

一种更安全的方法是只拥有一个 HMAC 实例，通过该[`update`](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Hash.HMAC.HMAC-class.html#update)方法将所有加密数据传递给它，并在最后输出一个摘要。

或者，如果您想让接收器在接收整个文件之前检测到篡改，您可以输出每个片段的中间 MAC。事实上，调用`digest`不会改变 HMAC 的状态；之后你可以继续打电话`update`。

第二个安全问题是你不使用盐来推导你的密钥（我这么说是因为你不发送它）。除了密码破解，如果您使用相同的密码加密超过 2 个文件，攻击者还可以自由混合任一加密文件获取的块 - 因为 HMAC 密钥是相同的。解决方法：用盐。

最后一件小事：`infile.read(64 * 1024)`可能返回少于`64*1024`字节，但这[并不意味着您已到达文件末尾](https://stackoverflow.com/questions/4426581/python-eof-for-multi-byte-requests-of-file-read)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-22T23:14:56.237

我不认为您对 HMAC 所做的操作存在安全问题（这并不意味着安全性没有问题），但我不知道 HMAC 子元素的实际值密文让你。除非您希望在发生篡改时支持对明文进行部分恢复，否则没有太多理由会产生 HMACing 64 KB 块的开销，而不是完整的密文。

从密钥生成的角度来看，使用从密码短语生成的密钥来加密两个随机生成的密钥，然后使用随机生成的密钥执行 HMAC 和 AES 操作可能更有意义。我知道对分组密码和 HMAC 使用相同的密钥是个坏消息，但我不知道使用以相同方式生成的密钥是否同样不好。

至少，您应该调整您的密钥派生机制。bcrypt 是一种密码散列机制，而不是密钥派生函数。您应该使用 PBKDF2 进行密钥派生。

# jenkins - Windows 上的 Jenkins 的 Renistall

> ID：15034278
> 
> 赞同：1
> 
> 时间：2013-02-22T22:28:49.400
> 
> 标签：jenkins

我可能需要在 Windows Server 2008 R2 Enterprise 服务器上重新安装 Jenkins。如果我为已安装的版本运行安装程序，它会为我提供卸载选项。我已经尝试过“修复”选项，但它并没有解决我的问题。如果我进行卸载，我现有的工作及其历史会怎样？整个 Jenkins 文件夹会被删除吗？如果是这样，我可以从备份的副本中恢复它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:32:11.927

我不确定 Windows，但我认为在 linux 中，jobs/configs 目录可以跨多个 Jenkins 安装复制。首先备份您的 jenkins 主目录。Jenkins 可执行文件本身不太重要，因为它可以很容易地重新安装而不会影响您的构建环境。有关更多信息，请参阅此链接：[https ://wiki.jenkins-ci.org/display/JENKINS/Administering+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Administering+Jenkins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:33:29.323

是的，您可以通过备份您的 jenkins 安装文件夹，然后在重新安装后将内容复制回 jenkins 安装文件夹来恢复它们。这适用于 linux 或 windows。所有作业信息和配置都存储在文件系统中。

# scala - Scala 对象定义中的“extends {..}”子句没有超类名称有什么作用？

> ID：15034282
> 
> 赞同：6
> 
> 时间：2013-02-22T22:29:16.953
> 
> 标签：scala, object, inheritance, syntax

*我在Programming in Scala, 2nd Ed 中*找到了这个代码示例。（第 25 章，清单 25.11）：

```
object PrefixMap extends {
  def empty[T] = ...

  def apply[T](kvs: (String, T)*): PrefixMap[T] = ...

  ...
} 
```

为什么那里的`extends`子句没有超类名称？看起来像是扩展了一个匿名类，但目的是什么？随附的文本没有在任何地方解释甚至提到这个结构。该代码实际上可以编译，并且无论有没有它都可以完美地工作。

OTOH 我在几个网页上找到了完全相同的代码，包括[这个](http://www.scala-lang.org/docu/files/collections-api/collections-impl_6.html#id4)（看起来像书中章节的原始版本）。我怀疑一个错字可能会在这么多读者的雷达之下通过……所以我错过了什么吗？

我试图用谷歌搜索它，但甚至很难找到合适的搜索词。那么**有人可以解释这个结构在 Scala 中是否有名称和/或实际用途？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:47:36.137

对我来说似乎是打印错误。不过，它仍然可以正常工作，这可能有助于一直隐藏它。

无论如何，该对象正在扩展一个结构类型，尽管它也可能是一个早期初始化，如果你`with XXX`最后有的话。嗯。它看起来更像是一个没有任何类或特征的早期初始化，实际上……我认为结构类型不包含代码。

# ios - SDWebImage 显示缓存中图像的占位符

> ID：15034283
> 
> 赞同：2
> 
> 时间：2013-02-22T22:29:25.067
> 
> 标签：ios, sdwebimage

在 iOS 5.1 项目 (iPad) 中使用 SDWebImage 3。

我们展示了相当大的图像（700x500），而且我们有很多（+1000）。我们正在预取图像并缓存到磁盘，然后允许用户浏览它们。

它工作正常。除了当您浏览图像时，您总是会看到一小会显示占位符，从而产生非常烦人的效果。

在我的用例中，等待一小段时间检查磁盘缓存和进程比显示占位符不到半秒（它基本上只是闪烁）要好得多。

我的问题与此类似：[How to get filesystem path to image cached with SDWebImage (iOS)](https://stackoverflow.com/questions/12768264/how-to-get-filesystem-path-to-image-cached-with-sdwebimage-ios)。注意：我认为尝试细化缓存的文件系统路径的方法是错误的。我只是引用它，因为它也解释了我的用例。

如果图像在本地存储中，我希望有一种方法告诉 SDWebImage 不要使用占位符。如果我不能这样做，我可能需要寻找其他图书馆（我欢迎建议）。

注意：我们也在使用 RestKit (0.20) + AFNetworking。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:49:48.220

按照@sergio 的建议，我修改了 SDWebImage。对于任何感兴趣的人，都有该项目的分叉版本：[https ://github.com/josea/SDWebImage](https://github.com/josea/SDWebImage)

用法是：[imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder.png"] syncDiskLoad:YES];

我将向所有者提出拉取请求，以查看我的更改是否已合并到主分支。

**更新：**

您可以这样做以避免闪烁（这适用于项目的主分支）：

```
[imageView setImageWithURL:url placeholderImage:imageView.image options:0 
 progress:^(NSUInteger receivedSize, long long expectedSize) {
        imageView.image = [UIImage imageNamed:@"QuestionMarkFace.png"];
 } completed:nil]; 
```

# android - 如何注册接收器以捕获已完成的下载？

> ID：15034285
> 
> 赞同：7
> 
> 时间：2013-02-22T22:29:27.283
> 
> 标签：android, receiver

我正在检查一些关于如何在 DownloadManager 完成下载时通知接收器的教程，他们像这样务实地注册接收器

```
context.registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

同时，我想在我的`manifest.xml`而不是务实地注册接收器，我发现人们正在这样做

```
<receiver 
    android:name=".DownloadReceiver"
    android:exported="true"
    android:icon="@drawable/download_icon" >
    <intent-filter>
        <action android:name="android.intent.action.DOWNLOAD_COMPLETE" />
     </intent-filter>
 </receiver> 
```

**那么android.intent.action.DOWNLOAD_COMPLETED**和**DownloadManager.ACTION_DOWNLOAD_COMPLETE**有什么区别？为什么他们不在`<action android:name="DownloadManager.ACTION_DOWNLOAD_COMPLETE" />`清单中使用？

# sharepoint-2010 - Sharepoint 2010 Enterprise 是否需要服务器排序规则 Latin1_General_CI_AS_KS_WS？

> ID：15034288
> 
> 赞同：0
> 
> 时间：2013-02-22T22:29:54.160
> 
> 标签：sharepoint-2010, sql-server-2008-r2, project-server

在 Project Server 2010 场中。SQL Server 是否需要具有 Latin1_General_CI_AS_KS_WS 服务器排序规则？该软件是：

Windows 2008 R2 企业版 SharePoint 2010 企业版项目服务器 SQL Server 2008 R2 标准版

在 SQL Server 设置中缺少排序规则。我是否可以改用另一个服务器排序规则并继续使用我的场而不会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:10:25.470

我们正在运行 Windows 2008 R2 Enterprise SharePoint 2010 Enterprise Project 2010 SQL Server 2008 R2 Enterprise

我们正在使用排序规则

Latin1_General_CI_AS

完全没有任何问题，所以猜测它对软件来说并不那么重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-02T06:45:56.390

```
The following TechNet Article talks about the SQL Server collation for the SharePoint databases
http://technet.microsoft.com/en-us/library/cc288970.aspx#section1

“The SQL Server collation must be configured for case-insensitive. The SQL Server database collation must be configured for case-insensitive, accent-sensitive, Kana-sensitive, and width-sensitive. This is to ensure file name uniqueness consistent with the Windows operating system.”

However, we do not support changing the default collation (Latin1_General_CI_AS_KS_WS) for SharePoint databases to any other collations (CI, AS, KS, WS).

We support any CI collation for the SQL instance (for master, tempdb databases). However we recommend using Latin1_General_CI_AS_KS_WS as the instance default collation (master, tempdb databases).

Note This is a "FAST PUBLISH" article created directly from within the Microsoft support organization. The information contained herein is provided as-is in response to emerging issues. As a result of the speed in making it available, the materials may include typographical errors and may be revised at any time without notice. See Terms of Use for other considerations. 
```

[https://support.microsoft.com/en-in/kb/2008668](https://support.microsoft.com/en-in/kb/2008668)

[https://social.technet.microsoft.com/Forums/en-US/b1e7fcf0-3c20-47b1-af5e-8a6577e5f88e/sharepoint-sql-collat​​ion-best-practice?forum=sharepointadminprevious](https://social.technet.microsoft.com/Forums/en-US/b1e7fcf0-3c20-47b1-af5e-8a6577e5f88e/sharepoint-sql-collation-best-practice?forum=sharepointadminprevious)

# java - 如何将二叉搜索树的节点值存储在字符串中？

> ID：15034300
> 
> 赞同：-1
> 
> 时间：2013-02-22T22:30:58.740
> 
> 标签：java, binary-tree

我正在尝试将所有节点的值以字符串的升序存储在二叉搜索树中。我设法将它们打印出来，但将它们存储在一个字符串中似乎有点复杂有什么想法吗？

这就是我打印它们的方式：

```
public void inOrder() {
    if (this.left != null) {
        this.left.inOrder();
    }
    System.out.print(this.value + " ");
    if (this.right != null) {
        this.right.inOrder();
    }
} 
```

我正在寻找这种方法：

```
public String inOrder() {
    // ???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:35:04.403

由于您递归调用您的搜索函数，我建议通过将值连接到全局字符串（`mystring`在这种情况下）

```
mystring.concat(this.value); 
```

而不是尝试从函数调用本身返回字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:37:33.380

好的，由于这里没有完整的代码示例，我将自己发布。但是，我想知道为什么互联网上没有一个例子。所以我们开始吧。我假设二叉搜索树使用整数作为其节点的值：

```
public String inOrder() {
    String asc = "";
    if (this.left != null) {
        asc += this.left.inOrder();
    }

    asc = asc + this.value + " ";

    if (this.right != null) {
        asc += this.right.inOrder();
    }
    return asc;
} 
```

如果您觉得这有帮助或者您有更好的方法，请发表评论！

# xml - 如何将换页符添加到使用 XSLT 创建的文本中？

> ID：15034302
> 
> 赞同：2
> 
> 时间：2013-02-22T22:31:11.097
> 
> 标签：xml

我需要使用 xls-text 类型的 xml pulbisher 生成文本输出。我被困在插入“换页”字符作为文本输出的一部分。有人可以帮忙吗？

文本输出用于馈送另一台支票打印机，并且需要“换页”字符作为新页面的分页符。XML 不喜欢 ascii 代码并且 {FF} 不起作用。

谢谢您的帮助。

斯泰西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:35:04.447

换页控制字符在 XML 1.0 中不是合法字符。它在 XML 1.1 中可用，因此您需要找到支持 XML 1.1 的 XSLT 处理器。撒克逊人会 - 如果您设置了适当的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T12:35:36.843

如果您要插入换页符，那么您应该生成文本输出，而不是 XML。我发现这种方法对我有用：

```
`<!DOCTYPE stylesheet [
<!ENTITY FF "<![CDATA[&#12;]]>">`
`<xsl:stylesheet ...
    :
    :
<xsl:output method="text" encoding="UTF-8"/>
    :
    <xsl:text disable-output-escaping="yes">&FF;</xsl:text>
    : 
```

`

# java - 使用 VBO 渲染多边形似乎会丢失一些顶点

> ID：15034303
> 
> 赞同：1
> 
> 时间：2013-02-22T22:31:11.150
> 
> 标签：java, opengl, polygon, vbo

我正在尝试渲染一组多边形，我有一组点并且我没有做任何三角化。

如果我使用模式渲染我的 VBO `GL_LINE_LOOP`，线条会出现正确的顶点，但是当我尝试使用相同的缓冲区渲染填充的多边形但使用`GL_POLYGON`错误的顶点时，它就像一些点就消失了。我试图禁用 OpenGl 多边形平滑，但还是一样。

有小费吗？

此图像显示了预期相同的线和多边形。

![](../Images/940b01add709cf230b689c06e3d5a15d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:59:33.210

`GL_POLYGON`仅适用于凸的共面多边形。

确保 VBO 中的点形成一个。

# windows - 使用控制台版本的 signtool.exe 使用 PKCS #7 SPC 文件对可执行文件进行签名

> ID：15034313
> 
> 赞同：0
> 
> 时间：2013-02-22T22:31:52.287
> 
> 标签：windows, ssl, key, certificate, signing

我正在尝试使用 Go Daddy 发布的 PKCS #7 SPC 文件签署可执行文件。我有与 .spc 文件同名的 CSR（代码签名请求）文件和 PrivateKey.key 文件和 .pem 文件。我正在尝试使用 signtool.exe 的控制台版本：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin>signtool sign /t http://tsa.starfieldtech.com /csp "D:\SOMENAME.spc" /k "D:\SOMENAME.key" /sha1 HASH_MATCHING_RIGHT_CERT /v file_to_sign.exe
The following certificate was selected:
    Issued to: Monster, Inc.
    Issued by: Go Daddy Secure Certification Authority
    Expires:   Fri Dec 21 06:06:06 2014
    SHA1 hash: HASH_MATCHING_PARAMETER
SignTool Error: No private key is available. 
```

我之前已将 spc 文件安装到我的商店中。我获得了代码签名证书和两个 Go Daddy 证书。

我错过了什么，我应该采取什么步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:46:49.843

我需要使用 OpenSSL 将这两个 PKCS #7 密钥转换为 .pfx 格式，然后使用以下命令使用更常见的签名方式：

```
signtool sign /t http://tsa.starfieldtech.com /d "Description" /du "www.url.com" /f "cert.pfx" /p password /v file.exe 
```

# node.js - AppFog 上的 Express 出错，但本地没有

> ID：15034317
> 
> 赞同：1
> 
> 时间：2013-02-22T22:32:04.320
> 
> 标签：node.js, express, jsdom, appfog

当我在 AppFog 上托管我的应用程序时出现错误。第 50 行，当我调用 JSDOM 时......问题没有出现在本地，我不明白为什么它在远程不起作用......

我的代码（在本地工作）：

```
exports.index = function(req, res) {
    Creation.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success( function(creations) {
        Post.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success(function(posts){
            async.map(posts, function(postEntity, callback){
                jsdom.env( // PROBLEM HERE
                    postEntity.content,
                    ["http://code.jquery.com/jquery.js"],
                    function(errors, window) {
                        if(errors) return callback(errors);
                        postEntity.content = window.$("p").text();
                        callback(null, postEntity);
                    }
                );
            }, function(err, transformedPosts){
                if(err) return callback(err);
                res.render('index', {
                    creations: creations,
                    posts: transformedPosts,
                    title: "Anthony Cluse | Portfolio"
                });
            });
        });
    });
}; 
```

我的错误（在 AppFog 上 - 我向支持人员发送了请求）：

```
TypeError: Cannot read property 'implementation' of undefined
at exports.env.exports.jsdom.env.processHTML (/mnt/var/vcap.local/dea/apps/anthonycluse-1-  0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/jsdom/lib/jsdom.js:178:59)
at Object.exports.env.exports.jsdom.env (/mnt/var/vcap.local/dea/apps/anthonycluse-1-   0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/jsdom/lib/jsdom.js:269:5)
at exports.index.Creation.findAll.success.Post.findAll.success.async.map.res.render.creations (/mnt/var/vcap.local/dea/apps/anthonycluse-1- 0c3b7373ee2a0a1334d2ea77a9bf22c8/app/routes/index.js:50:23)
at _asyncMap (/mnt/var/vcap.local/dea/apps/anthonycluse-1-0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:222:13)
at async.each (/mnt/var/vcap.local/dea/apps/anthonycluse-1-0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:99:13)
at Array.forEach (native)
at _each (/mnt/var/vcap.local/dea/apps/anthonycluse-1-0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:32:24)
at async.each (/mnt/var/vcap.local/dea/apps/anthonycluse-1-0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:98:9)
at _asyncMap (/mnt/var/vcap.local/dea/apps/anthonycluse-1-0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:221:9)
at Object.doParallel [as map] (/mnt/var/vcap.local/dea/apps/anthonycluse-1- 0c3b7373ee2a0a1334d2ea77a9bf22c8/app/node_modules/async/lib/async.js:199:23) 
```

AppFog 上的日志：

```
====> /logs/staging.log <====

# Logfile created on 2013-02-22 23:41:12 +0000 by logger.rb/25413
Skipping npm support: npm-shrinkwrap.json is not provided

====> /logs/stdout.log <====

Express server listening on port 56643
Executing: CREATE TABLE IF NOT EXISTS `Posts` (`slug` VARCHAR(255), `title` VARCHAR(255), `thumbnail` VARCHAR(255), `content` TEXT, `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Creations` (`slug` VARCHAR(255), `screenshot` VARCHAR(255), `title` VARCHAR(255), `subtitle` VARCHAR(255), `url` VARCHAR(255), `content` TEXT, `webdesigner` VARCHAR(255), `developper` VARCHAR(255), `integrator` VARCHAR(255), `designer` VARCHAR(255), `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Posts` (`slug` VARCHAR(255), `title` VARCHAR(255), `thumbnail` VARCHAR(255), `content` TEXT, `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Creations` (`slug` VARCHAR(255), `screenshot` VARCHAR(255), `title` VARCHAR(255), `subtitle` VARCHAR(255), `url` VARCHAR(255), `content` TEXT, `webdesigner` VARCHAR(255), `developper` VARCHAR(255), `integrator` VARCHAR(255), `designer` VARCHAR(255), `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: SELECT * FROM `Creations` WHERE state = 1 ORDER BY id DESC LIMIT 2;
Executing: SELECT * FROM `Posts` WHERE state = 1 ORDER BY id DESC LIMIT 2;
{ __options: 
   { timestamps: true,
     instanceMethods: {},
     classMethods: {},
     validate: {},
     freezeTableName: false,
     underscored: false,
     syncOnAssociation: true,
     paranoid: false,
     omitNull: false,
     hasPrimaryKeys: false },
  hasPrimaryKeys: false,
  selectedValues: 
   { slug: 'my-first-post',
     title: 'my first post',
     thumbnail: 'http://i.pcworld.fr/1151321-espace-sfr.jpg',
     content: '<p>\r\nun content pour le premier post\r\n</p>\r\n<img src="http://i.pcworld.fr/1151321-espace-sfr.jpg">\r\n<p>et la suite !!!</p>',
     state: 1,
     id: 1,
     createdAt: Thu Feb 21 2013 21:45:58 GMT+0000 (UTC),
     updatedAt: Thu Feb 21 2013 21:46:00 GMT+0000 (UTC) },
  slug: 'my-first-post',
  title: 'my first post',
  thumbnail: 'http://i.pcworld.fr/1151321-espace-sfr.jpg',
  content: '<p>\r\nun content pour le premier post\r\n</p>\r\n<img src="http://i.pcworld.fr/1151321-espace-sfr.jpg">\r\n<p>et la suite !!!</p>',
  state: 1,
  id: 1,
  createdAt: Thu Feb 21 2013 21:45:58 GMT+0000 (UTC),
  updatedAt: Thu Feb 21 2013 21:46:00 GMT+0000 (UTC),
  isNewRecord: false }

====> /logs/staging.log <====

# Logfile created on 2013-02-22 23:41:12 +0000 by logger.rb/25413
Skipping npm support: npm-shrinkwrap.json is not provided

====> /logs/stdout.log <====

Express server listening on port 48140
Executing: CREATE TABLE IF NOT EXISTS `Posts` (`slug` VARCHAR(255), `title` VARCHAR(255), `thumbnail` VARCHAR(255), `content` TEXT, `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Creations` (`slug` VARCHAR(255), `screenshot` VARCHAR(255), `title` VARCHAR(255), `subtitle` VARCHAR(255), `url` VARCHAR(255), `content` TEXT, `webdesigner` VARCHAR(255), `developper` VARCHAR(255), `integrator` VARCHAR(255), `designer` VARCHAR(255), `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Posts` (`slug` VARCHAR(255), `title` VARCHAR(255), `thumbnail` VARCHAR(255), `content` TEXT, `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
Executing: CREATE TABLE IF NOT EXISTS `Creations` (`slug` VARCHAR(255), `screenshot` VARCHAR(255), `title` VARCHAR(255), `subtitle` VARCHAR(255), `url` VARCHAR(255), `content` TEXT, `webdesigner` VARCHAR(255), `developper` VARCHAR(255), `integrator` VARCHAR(255), `designer` VARCHAR(255), `state` INTEGER, `id` INTEGER NOT NULL auto_increment , `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB; 
```

用 Cheerio 编辑：

```
var cheerio = require('cheerio'), $;

exports.index = function(req, res) {
    Creation.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success( function(creations) {
        Post.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success(function(posts){
            async.map(posts, function(postEntity, callback){
                $ = cheerio.load(postEntity.content);
                postEntity.content = $("p").text();
                /*
                jsdom.env(
                    postEntity.content,
                    ["http://code.jquery.com/jquery.js"],
                    function(errors, window) {
                        //deal with errors
                        if(errors) return callback(errors);
                        postEntity.content = window.$("p").text();
                        callback(null, postEntity);
                    }
                );
                */
            }, function(err, transformedPosts){
                if(err) return callback(err);
                res.render('index', {
                    creations: creations,
                    posts: transformedPosts,
                    title: "Anthony Cluse | Portfolio"
                });
            });
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:57:14.913

似乎 jsdom 依赖于在 CloudFoundry 上不起作用的本机库，这与 AppFog 使用的相同。

看到这个 jsdom 问题[https://github.com/tmpvar/jsdom/issues/436](https://github.com/tmpvar/jsdom/issues/436)

解决方法是使用 Cheerio 之类的东西（[https://github.com/MatthewMueller/cheerio](https://github.com/MatthewMueller/cheerio)）

这是主页上的一个示例：

```
var cheerio = require('cheerio');
var $ = cheerio.load('<h2 class = "title">Hello world</h2>');

$('h2.title').text('Hello there!');
$('h2').addClass('welcome'); 
```

# jquery - 在 Rails 3 中使用 JQuery 动态显示

> ID：15034324
> 
> 赞同：0
> 
> 时间：2013-02-22T22:32:49.313
> 
> 标签：jquery, ruby-on-rails-3, dynamic, partial

我正在加载一组@products，这些@products 具有我动态计算的不断变化的属性。我不想对初始页面索引上的所有@products 执行所有计算。相反，我只想在将鼠标悬停在图像上时执行和显示计算。

我首先创建 jQuery 调用来显示一个弹出框，以包含 products/index.html.erb 中每个产品的计算，如下所示：

产品/index.html.erb

```
<script type="text/javascript">
  jQuery(function($){
    <% @products.each do |product| %>
      $('#calc_<%= product.id %>').hover(function() {
        $('#pid_<%= product.id %>').show() 
      }, function() {
        $('#pid_<%= product.id %>').hide()
      });
   <% end %>
});
</script>

<table class='list'>
  <%= render :partial => "products/product", :collection => @products %>
</table> 
```

我的 _product.html.erb：

```
<%= image_tag('/images/info.png', :id => "calc_#{product.id}") %>
<div class='pid_display' id='pid_<%=product.id %>'></div> 
```

我的CSS：

```
.pid_display {
    height: 80px; 
    width: 200px; 
    background-color: #eee; 
    display: none; 
    padding-top: 8px;
    position: absolute;
} 
```

我正在尝试像这样调用对 product.id 执行计算的页面（尽管我不知道这是否正确）：

```
 jQuery.ajax("products/calculations/<%= product.id %>"); 
```

当我尝试组合对计算页面的调用以便在弹出框中显示结果时，两者都会触发。换句话说，会出现一个弹出框，并且日志显示计算是从 products_controller 执行的。

如何结合这两个调用在弹出框中显示计算结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:21:15.410

您可以使用[attr_accessible](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_accessible)来确定模型对于 @products 的第一个元素具有哪些属性，并将其保存在数组中。

然后，您可以使用这些属性使用 product.method("attribute") 从对象中获取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:07:52.800

感谢我的朋友 Marcus 将我指向这里，[http](http://tech.thereq.com/post/16479390885/loading-page-content-via-ajax-in-rails-3-1) ://tech.thereq.com/post/16479390885/loading-page-content-via-ajax-in-rails-3-1 。使用“加载”方法：

```
jQuery(function($){
  <% @products.each do |product| %>
    $('#calc_<%= product.id %>').hover(function() {
      $('#pid_<%= product.id %>').show().load('products/calculations/<%= product.id %>');
    }, function() {
      $('#pid_<%= product.id %>').hide()
    });
  <% end %>
}); 
```

# javascript - 骨干路由

> ID：15034325
> 
> 赞同：3
> 
> 时间：2013-02-22T22:32:55.663
> 
> 标签：javascript, backbone.js, underscore.js, url-routing

我正在创建一个应用程序，它将事件的日期列为按钮，然后让您添加日期并单击每个日期以获取新的“每日日历”。

这是我第一个使用主干和下划线的真实世界应用程序，所以我一直遇到障碍。我非常感谢任何帮助我的人。

我现在正处于我的收藏充满日期的地步，我可以添加这些日期。现在我想弄清楚它路由链接以切换日历，具体取决于所选日期。

到目前为止，这是我与应用程序的这一部分相关的内容：

**收藏品**

```
var Days = Backbone.Collection.extend({
  url: daysURL
});

var Calendar = Backbone.Collection.extend({
    url: URL
}); 
```

**楷模**

```
var Header = Backbone.Model.extend();
var header = new Header();

var ConferenceDay = Backbone.Model.extend();
var conferenceDay = new ConferenceDay(); 
```

**看法**

```
 var HeaderView = Backbone.View.extend({
  el: $(".conf_days"),
  template: _.template($('#days').html()),
  events: {
      'click a.day-link': 'changeDay',
      'click #add_day' : 'addDay',
      'click #previous_day' : 'prevDay',
      'click #next_day' : 'nextDay',
      'click #delete_day' : 'deleteDay'
    },
    initialize: function(){
      _.bindAll(this, "render");
      this.collection = new Days();
      this.collection.fetch();
      this.collection.bind("reset", this.render, this);
    },
    render: function(){
      var JSONdata = this.collection.toJSON();
      this.$el.html(this.template({days: JSONdata}));

      console.log(JSON.stringify(JSONdata))
      return this;

    },
    changeDay: function(e){

      AppRouter.history.navigate($(this).attr('href'));
      return false;

    },
    addDay: function() {
      newDate = Date.parse($('.day-link:first-child').text()).add(1).day();
      var newDay = new  ConferenceDay();
      newDay.set({date_formatted: newDate});

      this.collection.add(newDay)
      newDay.save({
        success: function(){
          alert('yes')
        },
        error: function(){
          alert('no')
        }
      });
    },
    deleteDay: function(event){
      var id = $('.day-link:last-child').data("id");
      $('.day-link:last-child').remove();
    },
    prevDay: function() {

    },
    nextDay: function() {

    },
    loadTimes: function(){
      var html = time.get('times');
      $('.time_td').append(html);
    }

  });
 var headerView = new HeaderView({ model: header });

        ConferenceView = Backbone.View.extend({
  el: $(".calendar"),
  template: _.template($('#calendar').html()),
  events: {

    },
    initialize: function(){

      //this.listTracks();
      this.collection = new Calendar();
      this.collection.fetch();
      this.collection.bind("reset", this.render, this);
    },
    render: function(){
      var JSONdata = this.collection.toJSON();
      this.$el.html(this.template({days: JSONdata}));
    },

    listTracks: function() {
    }

  });
 var conferenceView = new ConferenceView({model:conferenceDay}); 
```

**我目前的路线**

```
 var AppRouter = Backbone.Router.extend({
  routes: {
  '' : 'index',
  'day/:id' : 'changeDay'
  },

  initialize: function() {
  },

  index: function() {

  },
  changeDay: function(id){
    alert("changed");
    this.calender.changeDay(id);
    this.dayView = new ConferenceView({model:conferenceDay});
    $('#calender').html(this.dayView.render().el).text('test');
  },
});
 var app = {
 init: function() {
  var routes = new AppRouter();
  Backbone.history.start({pushState: true});
  }
}
 app.init(); 
```

理想情况下，我希望用户单击`day-link`按钮并通过推送状态更新 url `day/:id`，然后`#calender`模板将使用从当天更新收到的正确模型信息进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:35:11.197

*您的帖子中有很多代码，所以我不能 100% 确定以下内容会涵盖您需要做的所有事情，但这是一个开始*

此事件处理程序可能会导致一些问题：

```
changeDay: function(e){
  AppRouter.history.navigate($(this).attr('href'));
  return false;
} 
```

在细节层面上，这里有几件事：

1.  你不需要参考`history`。我不确定路由器是否有这样的属性。你应该打电话`AppRouter.navigate`。
2.  如果您希望路由器触发您的`changeDay`路由方法，则需要传递一个 option `trigger:true`，如下所示：

    ```
    AppRouter.navigate($(this).attr('href'), {trigger:true}). 
    ```

**但是**，实际的解决方案仍然比这更简单。您可以从事件哈希中完全删除`HeaderView.changeDay`事件处理程序和事件绑定。`click a.day-link`Backbone Router 会检测到改变的 URL，并自动调用匹配新 URL 的路由方法。

# wpf - 棘手的命令源问题

> ID：15034330
> 
> 赞同：0
> 
> 时间：2013-02-22T22:33:11.850
> 
> 标签：wpf, xaml, data-binding, telerik, datatemplate

我正在尝试从单独的窗口使用 RadDiagram 命令。我的绑定不起作用，因为“找不到与引用‘ElementName=Diagram’进行绑定的源”。我的（简化的）XAML 如下所示：

```
<UserControl x:Class="Client.Wpf.EditableLayoutControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:s="clr-namespace:Client.Wpf" xmlns:Converters="clr-namespace:Client.Wpf.Converters"
             mc:Ignorable="d" DataContext="{Binding RelativeSource={RelativeSource Self}}"
             d:DesignHeight="300" d:DesignWidth="800" Background="Transparent" Name="Root">
    <UserControl.Resources>
        <Converters:MultiBoolToVisibilityConverter x:Key="multiBoolToVis"/>
        <Converters:ObjectToBooleanConverter x:Key="objToBool"/>
        <telerik:InvertedBooleanConverter x:Key="invBool"/>
    </UserControl.Resources>
    <telerik:RadDocking HasDocumentHost="False" BorderThickness="0" Name="DockingStation">
        <telerik:RadSplitContainer>
            <telerik:RadPaneGroup>
                <telerik:RadPane CanDockInDocumentHost="False" Title="Controls" >
                    <telerik:RadPane.TitleTemplate>
                        <DataTemplate>
                            <Grid Margin="0 5">
                                <ContentPresenter Content="{Binding}" VerticalAlignment="Center"/>
                                <telerik:RadButton Command="telerik:DiagramCommands.Undo" CommandTarget="{Binding Path=Diagram, Source={RelativeSource FindAncestor, AncestorType={x:Type s:EditableLayoutControl}}}" />
                            </Grid>
                        </DataTemplate>
                    </telerik:RadPane.TitleTemplate>
                    <telerik:RadTabControl ...></telerik:RadTabControl>
                </telerik:RadPane>
            </telerik:RadPaneGroup>
        </telerik:RadSplitContainer>
        <telerik:RadSplitContainer>
            <telerik:RadPaneGroup>
                <telerik:RadPane PaneHeaderVisibility="Collapsed" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                    <Grid>
                        <telerik:RadDiagram Name="Diagram">...
                        </telerik:RadDiagram>
                    </Grid>
                </telerik:RadPane>
            </telerik:RadPaneGroup>
        </telerik:RadSplitContainer>
    </telerik:RadDocking>
</UserControl> 
```

有问题的代码行是来自 DataTemplate 内部的这个美丽：

```
CommandTarget="{Binding Path=Diagram, Source={RelativeSource FindAncestor, AncestorType={x:Type s:EditableLayoutControl}}}" 
```

那行代码不起作用，因为 Diagram 不是属性，并且绑定需要属性。使用 ElementName 而不是 Path 也不起作用，因为 ElementName 和 Source 是独占的。我也试过这个：

```
CommandTarget="{Binding ElementName=Diagram}" 
```

那行代码不起作用。它给出了这个错误：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=Diagram'. BindingExpression:(no path); DataItem=null; target element is 'RadButton' (Name=''); target property is 'CommandTarget' (type 'IInputElement') 
```

我也尝试过`CommandTarget="{x:Reference Diagram}"`，但该功能显然尚未在 .NET 4.0 中实现。它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:07:20.980

在这种特殊情况下，我必须在撤消按钮上设置 Loaded 事件。然后在我的事件处理程序（代码隐藏）中，我这样做了`((RadButton)e.Source).CommandTarget = Diagram;`：

# php - 比 PHP 上的 array_diff() 更快的方法是什么？

> ID：15034332
> 
> 赞同：2
> 
> 时间：2013-02-22T22:33:19.750
> 
> 标签：php, arrays, array-difference

我正在比较两个数组，每个数组都有 5000 个值。（示例值为：123456789）

我想知道是否有比比较两个数组更快的方法`array_diff()`

# php - 从另一个数组中正确提取嵌入式数组

> ID：15034335
> 
> 赞同：0
> 
> 时间：2013-02-22T22:33:38.223
> 
> 标签：php, arrays

我正在尝试使用标准 foreach 循环提取嵌入在另一个数组中的数组，问题是它不断返回不需要的数据。

**大批**

```
Array
(
    [id] => 2035443879
    [status] => Unshipped
    [sku] => 0340024275-UsedGood
    [isbn] => 0340024275
    [condition] => Used
    [number_of_items] => 1
    [title] => Linnets and Valerians (Knight Books)
    [purchase_date] => 1361536149
    [0] => Array
        (
            [status] => Shipped
            [title] => Linnets and Valerians (Knight Books)
            [date] => 1361491200
        )
 ) 
```

**打印功能**

```
function mapStatus($orders){
    foreach($orders as $order){
        echo "<pre>";
        print_r($order);
        echo "</pre>";

        foreach(array_unique($order) as $item){
            echo "-".$item["status"]."-";
        }

    }
} 
```

**结果**

```
-2--U--0--0--U--1--W--L--H--1--Shipped- 
```

正如您从我的结果中看到的那样，打印的内容并不完全符合我的预期，似乎我正在打印数组中每个索引的第一个字符，而不仅仅是我想要的实际数组。

我知道我可以使用一个`is_array()`函数来确定我正在打印的内容是否来自数组对象，但我想知道是否有正确的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:20:09.493

```
for ($i = 0; $i < $order['number_of_items']; $i++) {
  echo "-".$order[$i]["status"]."-";
} 
```

但是，我建议使用不同的数据结构。而不是将项目作为 order 数组中的索引元素，您应该有`$order['items']`，它指向一个数组。然后你可以使用：

```
foreach ($order['items'] as $item) 
```

那你就不需要`$order['number_of_items']`了，直接用就行了`count($order['items'])`。

# git - 在两个完全不同的 git 树中找到一个共同的提交

> ID：15034343
> 
> 赞同：2
> 
> 时间：2013-02-22T22:34:09.683
> 
> 标签：git, bash, git-rebase, cvs2git

以下脚本尝试查找两个分支的最新共同提交。提交应具有相同的*主题*、相同的*作者*和相同的*作者日期*。但*提交日期*和*哈希*是不同的。因此，`git rebase`无法自动找到该分支。

```
#!/bin/bash
lastbr=
lastrest=
revU=  # Update
revB=  # Base
rm -f rev.*.tmp
(
  git log --format='format:b %H %at %an %ae %f' master
  echo
  git log --format='format:u %H %at %an %ae %f' master_tmpnew
) | sort -r -t' ' -k3 | while read br rev rest; do
  echo "? $br $rev $rest"
  [ "$br" != "u" ] || revU="$rev"
  [ "$br" != "b" ] || revB="$rev"
  if [ "$lastrest" = "$rest" -a "$lastbr" != "$br" ]; then
    echo "found match: base $revB  updae $revU"
    echo "$revB" >rev.base.tmp
    echo "$revU" >rev.update.tmp
    break
  fi
  lastrest="$rest"
  lastbr="$br"
done
if [ ! -f rev.base.tmp ]; then
  echo "No matching revision found"
  exit 1
fi
revB="`cat rev.base.tmp`"
revU="`cat rev.update.tmp`"
git rebase --onto $revB $revU master_tmpnew 
```

**问题：**这个解决方案对我来说看起来不太好。你们中是否有人对如何解决这个问题有更好的想法，或者是否已经有可用的解决方案？

**背景：我尝试使用工具**[cvs2git](http://cvs2svn.tigris.org/cvs2git.html)实现增量 CVS-to-GIT 导入。正式来说，它不支持增量导入，但我找到了一个类似于[这个 workaround](http://www.oak.homeunix.org/~marcel/blog/2009/06/03/tracking-cvs-with-git-using-cvs2git)的解决方案。唯一的问题：我在做一个简单的`git rebase`. 因为分支不匹配（由于 git2svn 的性质而导致不同的哈希和提交日期），如果我在没有详细参考的情况下使用它（常见提交），它通常会重写比必要更多的提交。检查[此](http://pastebin.com/jFfnVaQj)以获取上述脚本的准备运行测试场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:08:54.703

也许 git-cherry 可以使用。它将比较更改集而不是提交哈希以确定两个提交是否包含相同的内容。

[http://www.kernel.org/pub//software/scm/git/docs/git-cherry.html](http://www.kernel.org/pub//software/scm/git/docs/git-cherry.html)

# c# - 过滤一个 IEnumerable 对于不需要的字符串

> ID：15034346
> 
> 赞同：4
> 
> 时间：2013-02-22T22:34:28.563
> 
> 标签：c#, linq, optimization

编辑：我收到了一些非常好的建议，我会尝试解决它们并在某个时候接受答案

我有一个很大的字符串列表（800k），我想尽快过滤掉不需要的单词列表（最终是亵渎，但可以是任何东西）。

我最终希望看到的结果将是一个列表，例如

```
Hello,World,My,Name,Is,Yakyb,Shell 
```

会成为

```
World,My,Name,Is,Yakyb 
```

核对后

```
Hell,Heaven. 
```

到目前为止我的代码是

```
 var words = items
            .Distinct()
            .AsParallel()
            .Where(x => !WordContains(x, WordsUnwanted));

public static bool WordContains(string word, List<string> words)
    {
        for (int i = 0; i < words.Count(); i++)
        {
            if (word.Contains(words[i]))
            {
                return true;
            }
        }
        return false;
    } 
```

目前这需要大约 2.3 秒（9.5 w/o 并行）来处理 800k 个单词，这一次没什么大不了的。然而，作为一个学习过程，有没有更快的处理方式？

不需要的单词列表长度为 100 个单词，
其中没有一个单词包含标点符号或空格

1.  删除所有列表中的重复项所采取的步骤
2.  查看使用数组是否更快（不是）的步骤 有趣的是，将参数 words 更改为 string[] 使其慢 25%
3.  添加 AsParallel() 的步骤已将时间减少到 ~2.3 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:37:13.633

尝试调用的方法`Except`。

[http://msdn.microsoft.com/en-AU/library/system.linq.enumerable.except.aspx](http://msdn.microsoft.com/en-AU/library/system.linq.enumerable.except.aspx)

```
var words = new List<string>() {"Hello","Hey","Cat"};
var filter = new List<string>() {"Cat"};

var filtered = words.Except(filter); 
```

还有怎么样：

```
var words = new List<string>() {"Hello","Hey","cat"};
var filter = new List<string>() {"Cat"};
// Perhaps a Except() here to match exact strings without substrings first?
var filtered = words.Where(i=> !ContainsAny(i,filter)).AsParallel();    
// You could experiment with AsParallel() and see 
// if running the query parallel yields faster results on larger string[]
// AsParallel probably not worth the cost unless list is large
public bool ContainsAny(string str, IEnumerable<string> values)
{
   if (!string.IsNullOrEmpty(str) || values.Any())
   {
       foreach (string value in values)
       {
             // Ignore case comparison from @TimSchmelter
             if (str.IndexOf(value, StringComparison.OrdinalIgnoreCase) != -1) return true;

             //if(str.ToLowerInvariant().Contains(value.ToLowerInvariant()))
             // return true;
       }
   }

   return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:20:33.837

几件事

**变更 1（简单易用）：** 通过使用 HashSet 而不是 Distinct 方法，我能够（部分地）加快运行速度。

```
var words = new HashSet<string>(items) //this uses HashCodes
        .AsParallel()... 
```

**变更 2（请耐心等待；））：** 关于@Tim 的评论，包含可能无法为您提供足够的搜索黑名单字词。例如**Takeshita**是一个街道名称。

你已经确定你想要这个词的有限状态（又名 Stemmed）。例如，对于 Apple，我们会将其视为 Apple。为此，我们可以使用诸如 Porter Stemmer 之类的词干提取算法。

如果我们要 Stem 一个词，那么我们可能不需要做 Contains(x)，我们可以使用 equals(x) 甚至更好地比较 HashCodes（最快的方法）。

```
var filter = new HashSet<string>(
    new[] {"hello", "of", "this", "and", "for", "is", 
        "bye", "the", "see", "in", "an", 
        "top", "v", "t", "e", "a" }); 

var list = new HashSet<string> (items)
            .AsParallel()
            .Where(x => !filter.Contains(new PorterStemmer().Stem(x)))
            .ToList(); 
```

这将比较其哈希码**int == int**上的单词。

词干分析器的使用并没有减慢速度，因为我们用 HashSet 对其进行了补充（对于过滤列表，bigO 为 1）。这返回了更大的结果列表。

我正在使用位于 Lucene.Net 代码中的 Porter Stemmer，这不是线程安全的，因此我们每次都新建一个

**Alteration 2 的问题，Alteration 2a：**与大多数自然语言处理一样，它并不简单。什么时候发生

1.  该词是禁用词“GrrArgh”的组合（其中 Grr 和 Argh 被禁用）
2.  这个词被故意拼错了“Frack”，但仍然与被禁止的词具有相同的含义（对不起论坛用户）
3.  这个词用空格“G r r”拼写。
4.  你的乐队词不是一个词而是一个短语，糟糕的例子：“桶的儿子”

通过论坛，他们使用人类来填补这些空白。

或者引入白名单（鉴于您提到了 bigO，我们可以说这将有 2n^2 的性能损失，因为我们为每个项目创建 2 个列表，不要忘记删除前导约束和如果我没记错的话，你只剩下 n^2，但我的 bigO 有点生疏）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:39:44.923

更改您的`WordContains`方法以使用单个 Aho-Corasick 搜索而不是 ~100 包含调用（当然，只需初始化一次 Aho-Corasick 搜索树）。

您可以在此处找到开源实现[http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=12383](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=12383)。

初始化类后，您将为800k 字符串中的每一个`StringSearch`调用该方法 。`public bool ContainsAny(string text)`

无论您的不需要的单词列表有多长，一次调用都将花费 O（字符串的长度）时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T22:45:01.587

啊，根据“坏”列表中的匹配项过滤单词。这是一个复杂的问题，已经测试了许多程序员的共识。我来自斯肯索普的朋友为此写了一篇论文。

您真正要避免的是在 O(lm) 中测试单词的解决方案，其中 l 是要测试的单词的长度，m 是坏单词的数量。为了做到这一点，您需要一个解决方案，而不是遍历坏词。我原以为正则表达式可以解决这个问题，但我忘记了典型的实现有一个内部数据结构，每次交替都会增加。正如其他解决方案之一所说，Aho-Corasick 是执行此操作的算法。标准实现会找到所有匹配项，您的执行会更有效率，因为您可以在第一场比赛中退出。我认为这提供了理论上的最佳解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T12:29:07.710

我很想看看我是否能想出一种更快的方法来做到这一点——但我只进行了一点优化。那是检查另一个字符串中出现的字符串的索引，因为它首先似乎比“包含”稍快，其次让您指定不区分大小写（如果这对您有用的话）。

下面包括我编写的一个测试类 - 我使用了超过 100 万个单词，并且在所有情况下都使用区分大小写的测试进行搜索。它测试你的方法，也是我试图建立的正则表达式。你可以自己试一试，看看时间；正则表达式的工作速度不如您提供的方法快，但是我可能会错误地构建它。我在 (word1|word2...) 之前使用 (?i) 来指定正则表达式中的不区分大小写（我很想知道如何优化它——它可能遇到了经典的回溯问题！）。

随着更多“不需要的”单词的添加，搜索方法（无论是正则表达式还是提供的原始方法）似乎变得越来越慢。

无论如何-希望这个简单的测试对您有所帮助：

```
 class Program
{

    static void Main(string[] args)
    {
        //Load your string here - I got war and peace from project guttenburg (http://www.gutenberg.org/ebooks/2600.txt.utf-8) and loaded twice to give 1.2 Million words
        List<string> loaded = File.ReadAllText(@"D:\Temp\2600.txt").Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries).ToList();

        List<string> items = new List<string>();
        items.AddRange(loaded);
        items.AddRange(loaded);

        Console.WriteLine("Loaded {0} words", items.Count);

        Stopwatch sw = new Stopwatch();

        List<string> WordsUnwanted = new List<string> { "Hell", "Heaven", "and", "or", "big", "the", "when", "ur", "cat" };
        StringBuilder regexBuilder = new StringBuilder("(?i)(");

        foreach (string s in WordsUnwanted)
        {
            regexBuilder.Append(s);
            regexBuilder.Append("|");
        }
        regexBuilder.Replace("|", ")", regexBuilder.Length - 1, 1);
        string regularExpression = regexBuilder.ToString();
        Console.WriteLine(regularExpression);

        List<string> words = null;

        bool loop = true;

        while (loop)
        {
            Console.WriteLine("Enter test type - 1, 2, 3, 4 or Q to quit");
            ConsoleKeyInfo testType = Console.ReadKey();

            switch (testType.Key)
            {
                case ConsoleKey.D1:
                    sw.Reset();
                    sw.Start();
                    words = items
                        .Distinct()
                        .AsParallel()
                        .Where(x => !WordContains(x, WordsUnwanted)).ToList();

                    sw.Stop();
                    Console.WriteLine("Parallel (original) process took {0}ms and found {1} matching words", sw.ElapsedMilliseconds, words.Count);
                    words = null;
                    break;

                case ConsoleKey.D2:
                    sw.Reset();
                    sw.Start();
                    words = items
                        .Distinct()
                        .Where(x => !WordContains(x, WordsUnwanted)).ToList();

                    sw.Stop();
                    Console.WriteLine("Non-Parallel (original) process took {0}ms and found {1} matching words", sw.ElapsedMilliseconds, words.Count);
                    words = null;
                    break;

                case ConsoleKey.D3:
                    sw.Reset();
                    sw.Start();
                    words = items
                        .Distinct()
                        .AsParallel()
                        .Where(x => !Regex.IsMatch(x, regularExpression)).ToList();

                    sw.Stop();
                    Console.WriteLine("Non-Compiled regex (parallel) Process took {0}ms and found {1} matching words", sw.ElapsedMilliseconds, words.Count);
                    words = null;
                    break;

                case ConsoleKey.D4:
                    sw.Reset();
                    sw.Start();
                    words = items
                        .Distinct()
                        .Where(x => !Regex.IsMatch(x, regularExpression)).ToList();

                    sw.Stop();
                    Console.WriteLine("Non-Compiled regex (non-parallel) Process took {0}ms and found {1} matching words", sw.ElapsedMilliseconds, words.Count);
                    words = null;
                    break;

                case ConsoleKey.Q:
                    loop = false;
                    break;

                default:
                    continue;
            }
        }
    }

    public static bool WordContains(string word, List<string> words)
    {
        for (int i = 0; i < words.Count(); i++)
        {
            //Found that this was a bit fater and also lets you check the casing...!
            //if (word.Contains(words[i]))
            if (word.IndexOf(words[i], StringComparison.InvariantCultureIgnoreCase) >= 0)
                return true;
        }
        return false;
    }
} 
```

# android - 将gps坐标发送到模拟器的Shell脚本？

> ID：15034350
> 
> 赞同：0
> 
> 时间：2013-02-22T22:34:54.800
> 
> 标签：android

我需要一堆 gps 坐标来获取测试数据。我考虑过是否可以使用 adb shell 来创建一个快速的 shell 脚本，该脚本在 for 循环中生成一系列 gps 坐标。但我仍然不知道如何在 shell 中启动 gps 服务，如 telnet 中的 gps fix。

谢谢你的帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:44:33.797

您可以在设备外编写脚本。`tellandroid`是[一个最近发布的 Python 实用程序](https://github.com/vbabiy/tellandroid)，它将 Android 调试控制台操作公开给您的开发计算机的命令行，因此您可以运行：

```
tellandroid geo set [--host=<host>] [--port=<port>] [--] <lat> <long> 
```

等等。然后，您的循环将在您的开发机器上（例如，作为测试套件的一部分），而不是尝试在设备上进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:46:15.180

您可以直接从 Eclipse IDE 发送 gps 坐标，将视角更改为 DDMS。

此致

# c# - 在桌子内不起作用？

> ID：15034359
> 
> 赞同：6
> 
> 时间：2013-02-22T22:35:49.947
> 
> 标签：c#, asp.net, ajax

我在结构`<asp:UpdatePanel..>`内部工作时遇到问题`<table>.. <tr> </tr>`，我不知道为什么。当 UpdatePanel 被注释掉时，一切正常，但是当我取消注释 UpdatePanel 时，`<tr> </tr>`标记的内容甚至不会出现在 Visual Studio 2010 中。当我运行网页时会显示此内容，但 UpdatePanel 不会工作。我在这个项目中的其他网页都没有这个问题，但是我再次在其中使用`<div>`s 而不是`<table`>s。另一件事。这**在我的 MasterPage 中。这是我的脚本：**

 **```
<asp:UpdatePanel ID="W9UpdatePanel" runat="server" UpdateMode="Always">
    <ContentTemplate>
        <tr>
          <td colspan="6">
            <div class="branchSetupSectionTitle">W-9 Information:</div>
          </td>
        </tr> 
        <tr>
           <td colspan="2">
             <asp:Button ID="btnDownloadW9Pdf" runat="server" 
             Text="Download W-9"  onclick="btnDownloadW9Pdf_Click" AutoPostBack="True" /> 
             <%--<asp:RegularExpressionValidator ID="RegularExpressionValidator24" 
              runat="server" ControlToValidate="txtFirstPaymentAmount" Display="Dynamic" 
              ErrorMessage="The dollar amount you entered is in the wrong format." 
              ForeColor="Red" ValidationExpression="^\d+(\.\d\d)?$">*</asp:RegularExpressionValidator>--%>
              <asp:CheckBox ID="chkW9FormSubmitted" runat="server" AutoPostBack="True" 
              oncheckedchanged="chkW9FormSubmitted_CheckedChanged" 
              Text=" I have submitted this W-9 Form" />
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
         </tr> 
    </ContentTemplate>
</asp:UpdatePanel>

   </tr> 
```

按钮和复选框都会触发该事件，但会刷新整个页面。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-20T08:13:17.997

UpdatePanel 需要渲染一个 div 或 span 才能正常工作。由于这些元素都不能在表格行之间呈现，因此 UpdatePanel 没有占位符来呈现回发响应 html，因此它不起作用。

在您的情况下，一种解决方法可能是查看页面的哪个部分不需要位于更新面板内并将其留在外面。您可以只保留`<td colspan="2">`UpdatePanel 中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T12:09:03.547

```
<asp:ScriptManager ID="scm" runat="server">
</asp:ScriptManager>
<fieldset>
<legend>Truck Master Entry Form</legend>
<asp:UpdatePanel ID="upd1" runat="server">
<ContentTemplate>
<table cellpadding="2" cellspacing="1">
<tr>
                    <td align="right">
                        Truck no :
                    </td>
                    <td align="left">
                        <asp:TextBox ID="truckno" runat="server" Width="120px" Height="20px" />
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        Size :
                    </td>
                    <td align="left">
                        <asp:DropDownList ID="drptrucksize" runat="server" Width="120px" Height="20px" DataValueField="WEIGHT"
                            DataTextField="SIZE" OnSelectedIndexChanged="drptrucksize_SelectedIndexChanged"
                            AutoPostBack="true" />
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        Type :
                    </td>
                    <td align="left">
                        <asp:TextBox ID="txttrucktype" runat="server" Width="120px" Height="20px" />
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        Weight :
                    </td>
                    <td align="left">
                        <asp:TextBox ID="txtweight" runat="server" Width="120px" Height="20px" />
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        &nbsp;
                    </td>
                    <td align="left">
                        <asp:Button ID="btnsave" runat="server" Text="Save" Width="100px" Height="50px" />
                        <asp:Button ID="btncancel" runat="server" Text="Cancel" Width="100px" Height="50px" />
                    </td>
                </tr>
            </table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T11:04:57.570

更新面板需要放在桌子外面。看着

Mohammad Shahnawaz 的密码。**

# java - 采用 ArrayList 参数的方法的 ThreadPoolExecutor 实现

> ID：15034360
> 
> 赞同：0
> 
> 时间：2013-02-22T22:35:58.070
> 
> 标签：java, jsp

我有以下代码

```
private List<String[]> userList2 = new ArrayList<String[]>(10000);

ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 10, 10, TimeUnit.SECONDS, 
new ArrayBlockingQueue<Runnable>(5), new ThreadPoolExecutor.CallerRunsPolicy()); 
```

数据库查询

```
while (rs.next()) 
{
            data = new String[2];
            data[0] = rs.getString("userid");
            data[1] = rs.getString("email");
            userList2.add(data);

           if(userList2.size()==10000)  //Confusion in this part..
           {

            final List<String[]> elist = new ArrayList<String[]>(userList2);
            executor.execute(new Runnable() {
                public void run() {

                doBilling(con,elist);  //Parallel is not happening here... 

            }
            }); 
```

我有一个方法

```
doBillng(Connection con,List<String[]> userList)
{

String list[]=null; 
String userid=" ";
 for(int i=0;i<userList.size();i++)
    {
        list=userList.get(i);
        userid=props[0];
        list = BillingDao.billById(uid, con);

    }
} 
```

当 userlist2 大小为 10000 时，我想在 10 个线程中并行运行 doBilling，以便它可以以极快的速度达到 10000 条记录。但它没有发生！请建议我做错了什么以及应该如何解决..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:43:14.030

您只向 提交了一项任务，并且在返回`executor`时会发生这种情况。因此，您可以运行**一个**来处理 ArrayList 的 10000 个元素！！！！！！！`if(userList2.size()==10000)``true` **`Thread`**

 **如果你想让 10 个线程执行 ArrayList 的 10000 个元素，你的代码应该是这样的：

```
while (rs.next()) 
{
    data = new String[2];
    data[0] = rs.getString("userid");
    data[1] = rs.getString("email");
    userList2.add(data);
    if(userList2.size()% 1000 == 0)  //Check if size is multiple of 1000(obtained by 10000/10)
    {
        final List<String[]> elist = new ArrayList<String[]>(userList2);
        executor.execute(new Runnable() 
        {
            public void run() 
            {
                doBilling(con,elist);  //create new ArrayList and assign it to a seperate thread.
            }
        });
        userList2.clear();//clearing the arrayList so that next time when submitted to executor , new elements are processed.
    }
} 
```**

# serialization - yaml 中的循环定义

> ID：15034367
> 
> 赞同：1
> 
> 时间：2013-02-22T22:36:24.197
> 
> 标签：serialization, yaml

我正在尝试使用 yaml 来表示包含车站和线路的火车网络；一个最小的工作示例可能是 3 个站点，线性连接，所以`A<->B<->C`. 我代表三个站如下：

```
---
stations:
    - A
    - B
    - C 
```

现在我想在网络上存储不同的线路，以及它们的开始/结束位置。为此，我添加了一个行数组和一些锚点，如下所示：

```
---
stations:
    - &S-A A
    - &S-B B
    - &S-C C
lines:
    - &L-A2C A to C:
        from: *S-A
        to: *S-C
    - &L-C2A C to A:
        from: *S-C
        to: *S-A 
```

这是我遇到麻烦的部分：我想在每个车站存储每条线路的下一站。理想情况下是这样的：

```
---
stations:
    - &S-A A:
        next:
            - *L-A2C: *S-B
    - &S-B B:
        next:
            - *L-A2C: *S-C
            - *L-C2A: *S-A
    - &S-C C:
        next:
           - *L-C2A: *S-B 
```

（`lines`数组保持不变）

但这失败了——至少在 Python yaml 库中，说`yaml.composer.ComposerError: found undefined alias 'L-A2C'`. 我知道为什么会这样——因为我还没有定义这条线。但是我不能先定义线路，因为它们取决于车站，但现在车站取决于线路。

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:43:34.380

恭喜！您在大多数（如果不是全部）YAML 实现中发现了一个问题。我最近也发现了这个限制，我正在研究如何解决（在 Ruby 世界中）。但这对你没有帮助。您将要做的是将“下一站”存储为一组单独的数据点。

```
next-stops:
  *S-A:
    - *L-A2C: *S-B
  *S-B:
    - *L-A2C: *S-C
    - *L-C2A: *S-A
  *S-C:
    - *L-C2A: *S-B 
```

这有帮助吗？

# php - 无法解密命令行上的 openssl_encrypt() 输出

> ID：15034368
> 
> 赞同：1
> 
> 时间：2013-02-22T22:36:27.627
> 
> 标签：php, encryption, openssl

我用 openssl 编写了一个用于对称加密的小类，它在 PHP 中可以很好地加密和解密，但我似乎无法使用命令行解密输出，或者以相同的方式加密相同的数据。

我的课是：

```
Class SimpleCrypt {

    public static function encrypt($password, $data, $enc_method='AES-256-CBC', $hash_method='SHA512') {
        self::check_methods($enc_method, $hash_method);
        $iv = self::hashIV($password, $hash_method, openssl_cipher_iv_length($enc_method));
        $infostr = sprintf('$%s$%s$', $enc_method, $hash_method);
        return $infostr . openssl_encrypt($data, $enc_method, $password, false, $iv);
    }

    public static function decrypt($password, $edata) {
        $e_arr = explode('$', $edata);
        if( count($e_arr) != 4 ) {
            Throw new Exception('Given data is missing crucial sections.');
        }
        $enc_method = $e_arr[1];
        $hash_method = $e_arr[2];
        self::check_methods($enc_method, $hash_method);
        $iv = self::hashIV($password, $hash_method, openssl_cipher_iv_length($enc_method));
        return openssl_decrypt($e_arr[3], $enc_method, $password, false, $iv);
    }

    private static function hashIV($password, $method, $iv_size) {
        $myhash = hash($method, $password, TRUE);
        while( strlen($myhash) < $iv_size ) {
            $myhash .= hash($method, $myhash, TRUE);
        }
        return substr($myhash, 0, $iv_size);
    }

    private static function check_methods($enc, $hash) {
        if( ! function_exists('openssl_encrypt') ) {
            Throw new Exception('openssl_encrypt() not supported.');
        } else if( ! in_array($enc, openssl_get_cipher_methods()) ) {
            Throw new Exception('Encryption method ' . $enc . ' not supported.');
        } else if( ! in_array(strtolower($hash), hash_algos()) ) {
            Throw new Exception('Hashing method ' . $hash . ' not supported.');
        }
    }

} // -- end class SimpleCrypt -- //

$enc = SimpleCrypt::encrypt('pass', 'test data');
$dec = SimpleCrypt::decrypt('pass', $enc);
echo $enc . "\n" . $dec;
// Output:
// $AES-256-CBC$SHA512$yH0uN95Vya0pTwcoJRFb+g==
// test data 
```

这段代码重现了 IV：

```
php -r 'echo strtoupper(bin2hex(substr(hash("SHA512", "pass", true), 0, openssl_cipher_iv_length("AES-256-CBC"))));'
//output: 5B722B307FCE6C944905D132691D5E4A 
```

但是这段代码给了我与输入不相似的乱码 otuput：

```
$ echo yH0uN95Vya0pTwcoJRFb+g== | base64 -d | openssl enc -AES-256-CBC -d -nosalt -nopad -k pass -iv 5B722B307FCE6C944905D132691D5E4A
ã`ÈAgè}½5øÍÝEÞ
00000000  e3 60 c8 41 67 e8 7d bd  35 00 f8 cd dd 45 13 de  |.`.Ag.}.5....E..| 
```

从命令行编码数据给了我：

```
$ echo "test data" | openssl enc -e -AES-256-CBC -nosalt -k pass -iv 5B722B307FCE6C944905D132691D5E4A | hexdump -C
00000000  ca fc 84 6a 95 51 8f 0e  61 14 96 77 4e 22 dd 39  |...j.Q..a..wN".9|

$ echo "test data" | openssl enc -e -AES-256-CBC -nosalt -k pass -iv 5B722B307FCE6C944905D132691D5E4A | base64
yvyEapVRjw5hFJZ3TiLdOQ== 
```

谁能告诉我我在 PHP 代码中做错了什么？

## 解决方案

只是为了从丹尼尔的答案中回顾一下解决方案，我们需要使用`-K`openssl 的参数而不是`-k`or `-pass`，它需要字符串的十六进制表示。例如：

```
echo strtoupper(bin2hex('pass'));
//output: 70617373 
```

然后正确的命令是：

```
echo yH0uN95Vya0pTwcoJRFb+g== | base64 -d | openssl enc -AES-256-CBC -d -nosalt -K 70617373 -iv 5B722B307FCE6C944905D132691D5E4A | hexdump -C
00000000  74 65 73 74 20 64 61 74  61                       |test data| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:12:12.520

`password`PHP 的命名错误的参数`openssl_encrypt()`不是密码，而是实际的密钥。`openssl enc`当使用小写的命令行时`-k`，OpenSSL 将使用密钥派生函数从密码中派生一个密钥。您想使用`openssl enc`大写`-K`和十六进制表示的密钥；并确保在争论中交出`openssl_encrypt()`足够长的钥匙。`password`

另请参阅[PHP 手册中关于 openssl_encrypt()](http://php.net/manual/en/function.openssl-encrypt.php)的第一个用户提供的注释。

# php - 返回; return true 和 return false - 有什么区别？

> ID：15034376
> 
> 赞同：2
> 
> 时间：2013-02-22T22:36:57.503
> 
> 标签：php, javascript

在像 javascript/c++ 这样的语言中，有时有`return false;`或`return 0;`正在使用。但是，在 PHP 等语言中，`return;`停止脚本并`return false;`返回 (bool) false 并继续脚本。

最近让我很困惑。

谁能解释一下return的用途是什么？

附言。我的问题主要与 PHP/javascript/jQuery 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:40:55.693

该`return`句子返回（duh）一个值，区别在于您如何处理该值。例如，如果你`return false`在一个`onclick`中，则事件不会执行，如果你是`return true`，那么它会。

`return`没有指定值，它将返回`undefined`

Javascript 示例：

```
function myFunction(){ return "asd"; }
myvar = myFunction(); 
```

然后你使用你`myvar`作为任何变量，所以如果你这样做

```
console.log(myvar); 
```

这将记录

```
"asd" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:10:07.847

在 PHP 中，

```
return; 
```

相当于：

```
return null; 
```

在 Javascript 中，它相当于：

```
return undefined; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:40:45.223

[http://php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)

> 如果未提供参数，则必须省略括号并返回 NULL。

如果传递了一个参数，那么显然该参数将被返回。

# css - 无法在滑块上显示左右箭头

> ID：15034383
> 
> 赞同：1
> 
> 时间：2013-02-22T22:37:38.940
> 
> 标签：css, slider

网站是 tolitakeover.com ...我无法在滑块上显示箭头，它们部分存在，所以看起来代码中有一些东西覆盖它？不确定..尝试调整图像大小没有用..也..我还没有尝试过，但有人可以告诉我如何让底部的点向左转角..谢谢

仅用于滑块的 css 是..

```
/* Slider */
/* Browser Resets */
.flex-container a:active,
.flexslider a:active,
.flex-container a:focus,
.flexslider a:focus  { outline: none; }

.slides,
.flex-control-nav,
.flex-direction-nav {
margin: 0;
padding: 0;
list-style: none;
}

.flexslider a img { outline: none; border: none; }

.flexslider {
margin: 0;
padding: 0;
}
.flexslider .slides > li {
display: none;
-webkit-backface-visibility: hidden;
}

.flexslider .slides img {
width: 90%;
display: block;
height: 50%;
margin:auto;

-webkit-border-radius: 2px;
-moz-border-radius: 2px;
border-radius: 2px;
}
.slides:after {
content: ".";
display: block;
clear: both;
visibility: hidden;
line-height: 0;
height: 0;
}

html[xmlns] .slides { display: block; }
* html .slides { height: 1%; }

.flexslider {
position: relative;
zoom: 1;
padding: 10px;
background: #ffffff;

-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;

-webkit-box-shadow: 0px 1px 1px rgba(0,0,0, .2);
-moz-box-shadow: 0px 1px 1px rgba(0,0,0, .2);
box-shadow: 0px 1px 1px rgba(0,0,0, .2);
}
.flex-container {
min-width: 150px;
width:100%;
margin-top:1%;
}

.flexslider .slides { zoom: 1; } 
.flex-direction-nav a {
display: block;
position: absolute;
margin: -17px 0 0 0;
width: 35px;
height: 35px;
top: 50%;
cursor: pointer;
text-indent: -9999px;

background-color: #82d344;
background-image: -webkit-gradient(linear, left top, left bottom, from(#82d344),to 
(#51af34));
background-image: -webkit-linear-gradient(top, #82d344, #51af34);
background-image: -moz-linear-gradient(top, #82d344, #51af34);
background-image: -o-linear-gradient(top, #82d344, #51af34);
background-image: linear-gradient(to bottom, #82d344, #51af34);
}
.flex-direction-nav a:before {
display: block;
position: absolute;
content: '';
width: 9px;
height: 13px;
top: 11px;
left: 11px;
background: url('http://tolitakeover.com/images/arrows.png') no-repeat;
}

.flex-direction-nav a:after {
display: block;
position: absolute;
content: '';
width: 0;
height: 0;
top: 35px; 
}
.flex-direction-nav .flex-next {
right: -5px;

-webkit-border-radius: 3px 0 0 3px;
-moz-border-radius: 3px 0 0 3px;
border-radius: 3px 0 0 3px;
}

.flex-direction-nav .flex-prev {
left: -5px;

-webkit-border-radius: 0 3px 3px 0;
-moz-border-radius: 0 3px 3px 0;
border-radius: 0 3px 3px 0;
}

.flex-direction-nav .flex-next:before { background-position: -9px 0; left: 15px; }
.flex-direction-nav .flex-prev:before { background-position: 0 0; }

.flex-direction-nav .flex-next:after {
right: 0;
border-bottom: 5px solid transparent;
border-left: 5px solid #31611e;
}

.flex-direction-nav .flex-prev:after {
left: 0;
border-bottom: 5px solid transparent;
border-right: 5px solid #31611e;
}
.flexslider .flex-control-nav {
position: absolute;
width: 100%;
bottom: -40px;
text-align: center;
margin: 0 0 0 -10px;
}

.flex-control-nav li {
display: inline-block;
zoom: 1;
}

.flex-control-paging li a {
display: block;
cursor: pointer;
text-indent: -9999px;
width: 12px;
height: 12px;
margin: 0 3px;
background-color: #b6b6b6 \9;

-webkit-border-radius: 12px;
-moz-border-radius: 12px;
border-radius: 12px;

-webkit-box-shadow: inset 0 0 0 2px #b6b6b6;
-moz-box-shadow: inset 0 0 0 2px #b6b6b6;
box-shadow: inset 0 0 0 2px #b6b6b6;
 }

.flex-control-paging li a.flex-active {
background-color: #82d344;
background-image: -webkit-gradient(linear, left top, left bottom, from(#82d344), to
(#51af34));
background-image: -webkit-linear-gradient(top, #82d344, #51af34);
background-image: -moz-linear-gradient(top, #82d344, #51af34);
background-image: -o-linear-gradient(top, #82d344, #51af34);
background-image: linear-gradient(to bottom, #82d344, #51af34);

-webkit-box-shadow: none;
-moz-box-shadow: none; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:02:56.743

您需要更正宽度、高度和定位属性。将左右箭头的图像分开并更正每个图像的代码会更简单。下面的代码修复了它。

```
media="screen"
.flex-direction-nav .flex-next::before {
background-position: -29px 0;
left: 0;

media="screen"
.flex-direction-nav a::before {
display: block;
position: absolute;
content: '';
width: 29px;
height: 30px;
top: 4px;
left: 4px;
background: url('http://tolitakeover.com/images/arrows.png') no-repeat;
z-index: 100; 
```

# c# - 如何将 Telerik 转换应用于已在 XAML 代码中创建的边框

> ID：15034386
> 
> 赞同：0
> 
> 时间：2013-02-22T22:37:48.063
> 
> 标签：c#, silverlight, xaml, telerik

我的程序中有以下 XAML

```
 <Border x:Name="topCornerBorder" CornerRadius="10" Height="auto" Width="auto" Background="White">
        <Grid x:Name="topCorner" Grid.Row="0" Grid.Column="0" Background="White" Margin="10,10,10,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="190*"/>
            <ColumnDefinition Width="30*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="270*"/>
            <RowDefinition Height="60*"/>
        </Grid.RowDefinitions>

     <StackPanel x:Name="StackPanel" Orientation="Vertical" Grid.Row="0" Grid.Column="1" >
        <Canvas x:Name="textBlockCanvas1">
        </Canvas>
     </StackPanel>

        <Canvas Grid.Row="1" Grid.Column="0" >
            <sdk:DataGrid x:Name="dataGrid" Grid.Row="1" Grid.Column="0" Height="50" Width="300" Canvas.Top="15" Canvas.Left="100" Visibility="Collapsed" AutoGenerateColumns="False" ColumnWidth="*" RowBackground="Aqua" 
                        VerticalContentAlignment="Center" HorizontalContentAlignment="Center" VerticalAlignment="Center" HorizontalAlignment="Center" CanUserResizeColumns="false" CanUserSortColumns="False" IsReadOnly="True"  BorderThickness="3"
                         CanUserReorderColumns="False" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">

                <sdk:DataGrid.Columns>

                    <!--Column stuff here not important for this question..-->

                </sdk:DataGrid.Columns>
            </sdk:DataGrid>
        </Canvas>    
    </Grid> 
```

我尝试通过执行以下操作来设置过渡：

```
 <telerik:RadTransitionControl Name="radTransitionControl" Duration="00:00:01" Content="{Binding topCornerBorder}" >
        <telerik:RadTransitionControl.Transition >
            <telerik:SlideAndZoomTransition/>
        </telerik:RadTransitionControl.Transition>
    </telerik:RadTransitionControl> 
```

但什么都没有发生。我还在后面的 C# 代码中尝试了以下内容：

```
radTransitionControl.Content = this.topCornerBorder; 
```

但这会导致错误“值不在预期范围内”。

我必须做些什么才能成功地将过渡内容属性设置为围绕我的其余 UI 元素的边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:25:24.340

您似乎错误地使用了过渡控制。

该控件只是一个内容控件，它在内容更改时触发动画。

通常，您会将视觉效果分解为单独的用户控件，并在适当的时间设置过渡控件的内容。

* * *

在最简单的示例中，您可能有两个 UserControl（View1.xaml 和 View2.xaml）。从您将设置的代码

```
radTransitionControl.Content = new View1(); 
```

然后你会设置

```
radTransitionControl.Content = new View2(); 
```

在第二个集合操作中，您会期望看到转换发生。

* * *

请注意，如果在加载转换控件之前调用设置器，则不会发生任何转换。

另请注意，这`Content="{Binding topCornerBorder}`不起作用，因为`topCornerBorder`它是一个元素，而不是一个属性。

```
Content="{Binding ElementName=topCornerBorder} 
```

在语法上是正确的，但可能会导致`exception`因为 topCornerBorder 已经是可视化树的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:13:10.823

好吧，我只需执行以下操作即可将过渡应用到边框（以及其中的所有其他内容）：

```
radTransitionControl.PrepareAnimation(); 
```

我不知道这是否是正确的方法，但到目前为止它正在工作。

# javascript - 函数表达式是否有自己的作用域/词法环境

> ID：15034389
> 
> 赞同：5
> 
> 时间：2013-02-22T22:37:57.763
> 
> 标签：javascript, scope, ecmascript-5, ecma262

我正在阅读[ECMA 262 5 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2)的执行上下文/词法环境部分。它说明了以下内容：（已添加重点）

> 词法环境是一种规范类型，用于根据 ECMAScript 代码的词法嵌套结构定义标识符与特定变量和函数的关联。一个词法环境由一个环境记录和一个对外部词法环境的可能为空的引用组成。通常，词法环境与 ECMAScript 代码的某些特定句法结构相关联，例如**FunctionDeclaration**、 WithStatement 或 TryStatement 的 Catch 子句，并且每次评估此类代码时都会创建一个新的词法环境。

我注意到它没有说明为函数表达式创建词法环境。是为函数表达式创建词法环境，还是仅为函数声明创建词法环境？我错过了什么吗？

**编辑**：我注意到函数代码将有[自己的执行上下文](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3)，这就是为什么我也很困惑为什么在词法环境部分没有提到函数表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:14:03.160

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:02:02.140

如果名称包含在*FunctionExpression*中，则该名称将成为一个只读绑定，它会隐藏任何同名的外部声明。但是该绑定本身可能会被函数中的形式参数或局部声明所掩盖。函数名称的这种绑定只为命名的*FunctionExpressions*而不是为匿名*FunctionExpressions*或 *FunctionDeclarations*创建。*FunctionDeclaration*的名称绑定是在周围的 VariableEnvironment 中创建的。

这是参考 ES5.1 规范的更详细的解释：

与功能对象关联的环境记录不止一个。每当调用一个函数时，都会创建一个新的 DeclarativeEnvironmentRecord 以包含该特定函数调用的本地绑定。该记录成为为该调用创建的 ExecutionContext 的 VariableEnvironment 和初始 LexicalEnvironment。这在第 10.4.3 节中有详细说明。

创建此环境记录时，其“外部环境”设置为正在调用的函数对象的 [[Scope]] 内部属性的值。（第 5 行，10.4.3）外部环境为所有非本地声明提供绑定。[[Scope]] 在创建函数对象时设置（参见第 13 节和第 13.2 节中的语义）。因此，特定函数对象的每个不同调用都有不同的本地环境，但该函数的所有调用共享相同的外部 [[Scope]]。

对于大多数函数，捕获的 [[Scope]] 只是创建函数时处于活动状态的 ExecutionContext 的 LexicalEnvironment。但是，包含*标识符作为函数名称的**FunctionExpressions*在其 [[Scope]] 链的头部有一个额外的 DeclarativeEnvironmentRecord 插入。（参见第 13 节中第三种算法的步骤 1-3）。

 *这个额外的环境记录用于捕获 FunctionExpression 中给定的函数名称的*绑定*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T22:39:30.713

实例化的函数具有范围。它是作为函数声明语句的一部分还是作为函数实例化表达式的一部分实例化并不重要。

（说一个实例化的函数*在被调用时*有一个作用域可能更正确，并且每次调用都会产生一个*不同的*作用域。）*

# git - 如何创建一个新的（和空的！）“根”分支？

> ID：15034390
> 
> 赞同：162
> 
> 时间：2013-02-22T22:37:57.980
> 
> 标签：git

我想在这个 git 存储库中定义一个新的“根”分支。“根”分支是指完全独立于存储库¹中所有其他分支的分支。

不幸的是，即使是在 repo 提交树的最基础的提交（我们称之为它`A`）也包含很多文件（这是一个在已经相当成熟的项目上初始化的存储库）。

这意味着，即使我`A`作为新分支`<start-point>`的`A`.

有什么方法可以在这个存储库中创建一个完全裸露的分支，并且`<start-point>`尽可能接近`A`？

* * *

¹顺便说一句，这**不**等于创建一个新的仓库。由于很多原因，单独的回购会不太方便。

* * *

**编辑**：好的，这就是我所做的，基于***vcsjones***的回答：

```
# save rev of the current earliest commit
OLDBASE=$(git rev-list --max-parents=0 HEAD)

# create a new orphan branch and switch to it
git checkout --orphan newbranch
# make sure it's empty
git rm -rf .

# create a new empty commit in the new branch, and
# save its rev in NEWBASE
git commit --allow-empty -m 'base commit (empty)'
NEWBASE=$(git rev-list HEAD)

# specify $NEWBASE as the new parent for $OLDBASE, and
# run filter-branch on the original branch
echo "$OLDBASE $NEWBASE" > .git/info/grafts
git checkout master
git filter-branch

# NOTE: this assumes that the original repo had only one
# branch; if not, a git-filter-branch -f <branch> command
# need to be run for each additional branch.

rm .git/info/grafts 
```

虽然这个过程有点复杂，但最终结果是一个***空***的基本提交，可以用作`<start-point>`任何新的“干净的分支”；我需要做的就是

```
git checkout -b cleanslate $(git rev-list --max-parents=0 HEAD) 
```

将来我将始终创建这样的新存储库：

```
git init
git commit --allow-empty -m 'base commit (empty)' 
```

...因此第一次提交是**空**的，并且始终可用于启动新的独立分支。（我知道，这将是一个很少需要的设施，但很容易让它随时可用。）

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-02-22T22:41:09.207

`--orphan`创建分支时使用：

```
git checkout --orphan YourBranchName 
```

这将创建一个零提交的新分支，但是您的所有文件都将被暂存。那时你可以删除它们。
（“删除它们”：A`git reset --hard`将清空索引，留下一个空的工作树）

查看[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)以了解有关 --orphan 的更多信息。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-24T16:57:20.997

添加到已接受的答案 -恢复到干净状态的[最佳实践是创建](https://kevin.deldycke.com/2010/05/initialize-git-repositories/)[一个初始的空提交](https://stackoverflow.com/q/9765453/281545)，以便您可以在为后代设置分支时轻松地变基。另外，由于您想要一个干净的状态，您可能已经提交了您不应该提交的文件，因此您必须将它们从索引中删除。考虑到这些，您应该：

```
$ git checkout --orphan dev2
Switched to a new branch 'dev2'
$ git reset # unstage all the files, you probably don't want to commit all of them
$ git commit --allow-empty -m 'Initial empty commit'
[dev2 (root-commit) a515c28] Initial empty commit 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-06-13T15:42:18.903

> 有什么方法可以在这个存储库中创建一个完全裸露的分支。

实际使用的命令（使用 Git 2.28+）是：

```
git switch --discard-changes --orphan newBranch
# or
git switch -f --orphan newBranch 
```

[`git switch`](https://git-scm.com/docs/git-switch)可从 Git 2.23（2019 年 8 月）获得，并替换[旧的令人困惑的`git checkout`命令](https://stackoverflow.com/a/57066202/6309).

但我会推荐 Git 2.28（2020 年第三季度），因为`git switch --discard-changes --orphan`在该版本中已经过优化。

请参阅[提交 8d3e33d](https://github.com/git/git/commit/8d3e33dadd359495e43cb65dfadd775987e3da26)和[提交 8186128](https://github.com/git/git/commit/81861288a987c6e05526526fa5dc74d2e2b80a5a)（2020 年 5 月 21 日），作者是[brian m。卡尔森 ( `bk2204`)](https://github.com/bk2204)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[ded44af 提交中](https://github.com/git/git/commit/ded44afa023c981d803b56f42284ed0597a174ee)，2020 年 6 月 9 日）)

> ## [`builtin/checkout`](https://github.com/git/git/commit/81861288a987c6e05526526fa5dc74d2e2b80a5a): 简化元数据初始化
> 
> ^(签字人：brian m. carlson)
> ^(审核人：Derrick Stolee)
> 
> 当我们调用`init_checkout_metadata`时，`reset_tree,`我们希望传递有问题的提交的对象 ID，以便它可以传递给过滤器，或者如果没有提交，则传递给树。
> 
> 我们预料到后一种情况，它可能会出现在结帐代码的其他地方，但不会出现在这里。
> 
> 我们没有提交对象的唯一情况是[`git switch`](https://git-scm.com/docs/git-switch)使用`--orphan`.
> 
> 此外，我们只能在没有提交对象的情况下使用`--force`或来访问此代码路径`--discard-changes`。
> 
> 在这种情况下，使用提交或树初始化结帐元数据是没有意义的，因为
> 
> *   (a) 没有提交，只有空树，并且
> *   (b) 我们永远不会使用这些数据，因为在签出没有文件的分支时不会弄脏文件。
> 
> 在这种情况下传递全零的对象 ID，因为我们只需要一些值，它是一个有效的指针。

测试：

```
git switch master
echo foo >foo.txt
git switch --discard-changes --orphan new-orphan2
git ls-files >tracked-files
# test_must_be_empty tracked-files 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-23T20:37:01.433

[`git switch`如果您使用 git 2.23 或更高版本，`git restore`](https://github.blog/2019-08-16-highlights-from-git-2-23/#experimental-alternatives-for-git-checkout)您可能会习惯使用`git checkout`. [如果是这样，则标志与此答案](https://stackoverflow.com/a/15034426/1858327)中提到的相同。

```
git switch --orphan YourBranchHere 
```

# mysql - 当一张表的主键与另一张表的主键不同但包含在另一张表的主键中时，如何连接表？

> ID：15034391
> 
> 赞同：0
> 
> 时间：2013-02-22T22:38:03.087
> 
> 标签：mysql

我正在使用（但尚未设计）的数据库具有奇怪的结构，因为一个表行的主键 (id) 包含在另一个表行的主键中。例如，如果 table1 有一行 id 为 '933'，table2 将有一行 id 类似但带有一个单词前缀，例如 'something933'。

```
SELECT * FROM table1, table2 WHERE table1.id = table2.id 
```

这是基本查询，但因为 table1.id 的内容类似于“933”而 table2.id 类似于“something933”，所以我需要类似 WHERE table1.id = table2.something+id 的内容。

有没有办法在一个查询中加入这些表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:42:47.343

是的，你可以这样做，但这是一个非常糟糕的设计。此外，您的查询格式错误，因为您确实应该指定连接条件，而不是为此使用 WHERE 子句。在不指定连接条件的情况下按照您的方式进行操作，将为您提供表的笛卡尔积，然后您将根据您的条件对其进行过滤。所以你可能会使用类似的东西：

```
SELECT * FROM table1
INNER JOIN table2 ON CONCAT('something', table1.id) = table2.id 
```

当然，您将失去使用 table1 上的索引进行连接的能力（因此是糟糕的设计部分）。

如果可以的话，我会更新 table2 上的那些 id 以删除前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:42:25.463

我相信您想使用 LIKE 词：

```
SELECT * FROM table1, table2 WHERE table2.id LIKE CONCAT('%', table1.id, '%'); 
```

这是一个类似的问题和答案：

[如何在 MySQL LIKE 子句中使用用户变量？](https://stackoverflow.com/questions/8537516/how-to-use-an-user-variables-in-mysql-like-clause)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:43:19.700

```
SELECT * FROM table1, table2 WHERE table2.id LIKE '%'+table1.id 
```

# haskell - 查找局部函数的推断类型

> ID：15034392
> 
> 赞同：14
> 
> 时间：2013-02-22T22:38:03.430
> 
> 标签：haskell, type-inference, ghci

ghci（或 ghc）有没有办法找到推断的局部函数类型是什么？

例如，如果我有一个功能

```
f l = map f' l
   where f' = (+1) 
```

`:t`ghci 中是否有类似的方法来查看推断的类型`f'`是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T01:41:46.937

确实有，感谢 hammar[在这里](https://stackoverflow.com/a/9987969/176841)的出色回答，我了解到这一点。这是简短的版本：

```
Prelude> :l /tmp/foo.hs
[1 of 1] Compiling Main             ( /tmp/foo.hs, interpreted )
Ok, modules loaded: Main.
*Main> :break f
Breakpoint 0 activated at /tmp/foo.hs:(1,1)-(2,18)
*Main> f [1..10]
Stopped at /tmp/foo.hs:(1,1)-(2,18)
_result :: [b] = _
[/tmp/foo.hs:(1,1)-(2,18)] *Main> :step
Stopped at /tmp/foo.hs:1:7-14
_result :: [b] = _
f' :: b -> b = _
l :: [b] = _
[/tmp/foo.hs:1:7-14] *Main> :t f'
f' :: b -> b 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T00:53:28.257

我不知道 GHCi 有什么方法可以做到这一点。

但是，如果您使用的是 Emacs 或 Vim 之类的编辑器，则可以尝试[ghc-mod](http://www.mew.org/~kazu/proj/ghc-mod/en/)。这是一个插入编辑器的外部工具，它为 Haskell 程序提供了一些类似于 IDE 的功能，包括获取任意表达式类型的能力，包括本地定义。

在 Emacs 中，您将使用`C-c C-t`来查找表达式的类型。

如果您不使用 Emacs 或 Vim，您可能可以将 ghc-mod 包装为 GHCi 扩展或其他东西，但我认为这会有些尴尬。如果没有类似编辑器的 UI，我无法想象一个好的方法。但是，ghc-mod 本身只是一个独立的命令行工具，因此很容易使用。如果您能想到一个独立于现有文本编辑器的良好用户界面，那就去吧！

当然，如果您不使用 Emacs 或 Vim，您可能应该：P。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:05:37.840

试试[hdevtools](http://hackage.haskell.org/package/hdevtools)，它非常快速且易于使用，尽管只有 Vim 的集成。

# asp.net-mvc - c# JavaScriptSerializer 序列化字符串具有反斜杠，导致 javascript 出现问题

> ID：15034394
> 
> 赞同：0
> 
> 时间：2013-02-22T22:38:06.670
> 
> 标签：asp.net-mvc, json, serialization, javascriptserializer, jsonserializer

我在 ASP.NET MVC 视图中有一行 c# 代码

```
string json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model); 
```

如果我调试这个字符串是

```
"{\"Age\":14}" 
```

因此，当我将此字符串分配给我的 javascript 代码时，它会失败

```
JSON.parse('@json'); 
```

消息是

```
Uncaught SyntaxError: Unexpected token & 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:49:41.717

看起来你至少在使用 MVC3，所以尝试使用：

```
JSON.parse( @Html.Raw(json) ); 
```

这会产生一个 HtmlString 类型，因此您可以将 for 类型改为 HtmlString，而不是 System.String `json`。此外，您可能想查看更好的[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)库（我相信也是 MVC4 中的默认值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T22:51:51.873

导致问题的不是反斜杠，而是 HTML 编码。实际上，字符串中根本没有任何反斜杠，这只是调试器显示带有引号的字符串的方式。

该`@`命令将对字符串进行 HTML 编码，因此代码如下所示：

```
JSON.parse('{&quot;Age&quot;:14}'); 
```

使用`Raw`方法输出不带 HTML 编码的字符串：

```
JSON.parse('@Raw(json)'); 
```

# c# - 需要条件验证如果不止一种类型需要该字段

> ID：15034397
> 
> 赞同：1
> 
> 时间：2013-02-22T22:38:14.617
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

如果您不能将相同的数据注释两次应用于一个属性，如下所示：

```
[RequiredIf("Country", "Canada", "Postal Code is Required") ]
[RequiredIf("Country", "France", "Postal Code is Required") ]
public string PostalCode { get; set; } 
```

您将如何检查多个国家/地区是否需要邮政编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:49:15.450

您可以为此编写自己的自定义验证器并将其放置在您的模型之上，而不是属性之上。像这样的东西又快又*脏？*这样做的方式。

```
// Not guaranteed to work since I work only with FluentValidation for past year
public class PostalCodeValidator : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        var address = (Address)value;

        if ((address.Country == "Canada" || address.Country == "France") && address.PostalCode == null)
        {
            return false;
        }

        return true;
    }
} 
```

我强烈建议在您的下一个项目中学习和使用[FluentValidation](http://fluentvalidation.codeplex.com/)，因为它将验证与模型本身分开，并且总体上使验证更容易。

# java - 协助java老虎机

> ID：15034401
> 
> 赞同：0
> 
> 时间：2013-02-22T22:38:30.890
> 
> 标签：java, variable-assignment

基本上我正在使用三重字符串在java中设计一个老虎机并且我遇到了一个小问题，到目前为止我有：

```
class TripleString {

    public static final int MAX_LEN = 20;

    private String string1;    
    private String string2;    
    private String string3;

    TripleString()    
    {
        string1 ="";    
        string2 ="";    
        string3 ="";    
    }

    public void setTripleString (String str1, String str2, String str3) {    
        string1 = str1;    
        string2 = str2;    
        string3 = str3;    
    }

    public void setStrings(String s1, String s2, String s3){    
        String str1 = s1; String str2 = s2; String str3 = s3;     
    }

    public String getstr1(){    
        return str1();    
    }

    public String getStr2(){    
        return str2();    
    }

    public String getstr3(){    
        return str3();    
    }

    private boolean vaildString( String str ) {    
        if (str.length() >0 && str.length() <= MAX_LEN) {           
            return true;    
        }    
        else {
            return false;    
        }    
    }    
} 
```

我现在遇到的问题是，当我尝试返回 str1、2 和 3 时，我收到一条错误消息，提示“str1 方法未定义用于类型 TripleString()”有谁知道我该如何解决这个问题？

编辑：这是老虎机类的另一部分，称为三重字符串，我用来定义字符串，而不是整个程序。我还没有开始 getBet() 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:41:31.603

在这个方法中

```
public void setStrings(String s1, String s2, String s3){

    String str1 = s1; String str2 = s2; String str3 = s3;

} 
```

您正在定义和设置三个字符串，然后离开`setStrings`方法的范围，导致字符串消失。

实际上，您可能想要做的是：

```
public void setStrings(String s1, String s2, String s3){

    string1 = s1; 
    string2 = s2; 
    string3 = s3;
} 
```

无论如何你已经在这里做了：

```
public void setTripleString (String str1, String str2, String str3) {  
    string1 = str1;   
    string2 = str2;  
    string3 = str3;  
} 
```

和这个：

```
public String getstr1(){    
    return str1();    
}

public String getStr2(){    
    return str2();    
}

public String getstr3(){    
    return str3();    
} 
```

应该是这样的：

```
public String getstring1(){    
    return string1;    
}

public String getString2(){    
    return string2;    
}

public String getstring3(){    
    return string3;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:42:04.387

应该像更改“return str1();”一样简单 “返回 str1；”。末尾的括号表示您要返回通过调用 str1() 方法返回的值。但是 str1 不是方法，它是一个字符串。

然而，这些是未声明的。您应该返回 string1 因为那是您实际声明的内容。我会改变你的吸气剂的外壳以保持一致。

所以基本上：

```
public String getStr1(){    
    return string1;    
}

public String getStr2(){    
    return string2;    
}

public String getStr3(){    
    return string3;    
} 
```

# node.js - 来自 Nodejitsu 的 Mongodb / MongoHQ 连接

> ID：15034402
> 
> 赞同：0
> 
> 时间：2013-02-22T22:38:31.050
> 
> 标签：node.js, mongodb, mongohq, node-mongodb-native, nodejitsu

我似乎无法在柔术上连接到 MongoHQ（通过 MongoSkin）。不过，我可以从 localhost 进行连接，而我所做的只是更改我的 env var 和 jitsu 部署。奇怪的是它在本地工作但没有部署。我曾在 IRC 上与某人交谈过，但不幸的是我没有找到解决方案。

我确实注意到了这一点，第一个错误也是我的： [http ://errors.jit.su/](http://errors.jit.su/)

Mongoskin有这样的问题吗？

我也尝试过使用其他模块（node-mongo-native 等），结果相同——我可以在本地连接到 MongoHQ，但不能在 jitsu 上连接。

感谢您的任何帮助或见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T07:37:05.737

以下：

```
mongoose.connect('mongodb://username:password@subdomain.mongohq.com:port/collectionName'); 
```

至少对我来说，在本地和柔术上都可以完美地工作。

那是nodejitsu在他们的网络界面中创建数据库时给我的字符串。

我从未尝试过任何其他 mongo orm，所以我无法通过任何其他方法来获得与 mongo 的连接。

玩得开心

亚沙

编辑：在这里使用所有脚本的最新版本

（package.json：“猫鼬”：“最新”等）

# jquery - 将计数器与 2 个表类相结合

> ID：15034404
> 
> 赞同：0
> 
> 时间：2013-02-22T22:38:40.017
> 
> 标签：jquery, html, counter

当点击一个单元格进行类测试时，我有一个 *10 的计数器，当点击一个用于类害虫的单元格时，我有一个 *20 的计数器。我如何组合这些计数器，使它们都显示在同一个 div 中？它的工作原理就像，假设我单击一个测试单元格，会显示 10 个。如果我单击另一个测试单元格，将显示 20。如果我重新单击测试单元格，则会显示 10，因为该单元格将被“停用”。同样适用于害虫细胞，但那将是 20 年代。现在，当我尝试同时单击测试单元和害虫单元时，它不能正确计算。有什么帮助吗？

```
<table>
<tr>
<td class='test' id='g'><img src='images/Cat.gif'/></td>
<td class='test' id='g'><img src='images/Dog.gif'/></td>
<td class='pest' id='e'><img src='images/Mouse.gif'/></td>
<td class='pest' id='e'><img src='images/Human.gif'/></td>
</tr>
</table> 
```

JS：

```
$(document).ready(function() { 
var clicked = [];
$('td.test').click(function() {
    var found = clicked.indexOf(this.id);       
    if(found !== -1) {
        clicked.splice(found, 1);       
    } else {
        clicked.push(this.id);
    }       
    $('#output').text(clicked.length*20);
});
});

$(document).ready(function() { 
var clicked = [];
$('td.pest').click(function() {
    var found = clicked.indexOf(this.id);       
    if(found !== -1) {
        clicked.splice(found, 1);       
    } else {
        clicked.push(this.id);
    }       
    $('#output').text(clicked.length*20);
});
}); 
```

例如：现在当我点击 1 个测试单元和 1 个害虫单元时，它显示 20 而不是 30。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:53:07.947

**演示：http:** [//jsfiddle.net/ZjsVB/](http://jsfiddle.net/ZjsVB/)

```
$(document).ready(function() {
    $('td.test, td.pest').click(function() {
        $(this).toggleClass('active');

        var testCount = $('td.test.active').length * 10;
        var pestCount = $('td.pest.active').length * 20;

        $('#output').text(testCount + pestCount);
    });
}); 
```

# java - 如何在 JavaFX 中获取 Stage 的窗口句柄 (hWnd)？

> ID：15034407
> 
> 赞同：5
> 
> 时间：2013-02-22T22:39:12.027
> 
> 标签：java, javafx-2, jna, javafx-8, hwnd

我们正在 Windows 中构建 JavaFX 应用程序，我们希望能够做一些事情来控制我们的应用程序在 Windows 7/8 任务栏中的显示方式。这需要修改一个名为“[应用程序用户模型 ID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378459%28v=vs.85%29.aspx) ”的 Windows 变量。

我们已经通过使用[JNA](https://github.com/twall/jna#readme)成功地在 Swing 中完成了我们想要的，并且我们想在 JavaFX 中重复我们的解决方案。不幸的是，要做到这一点，我们需要能够检索`hWnd`应用程序中每个窗口的（窗口句柄）。这可以通过 JNA [Native.getWindowPointer()](http://jna.java.net/javadoc/com/sun/jna/Native.html#getWindowPointer%28java.awt.Window%29)方法在 Swing/AWT 中完成，该方法`java.awt.Window`与`javafx.stage.Window`.

有谁知道有什么办法可以得到`hWnd`一个`Stage`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-28T01:40:23.803

这是一个 JavaFX2 版本（使用 Stage 而不是 Window）：

```
private static Pointer getWindowPointer(Stage stage) {
    try {
        TKStage tkStage = stage.impl_getPeer();
        Method getPlatformWindow = tkStage.getClass().getDeclaredMethod("getPlatformWindow" );
        getPlatformWindow.setAccessible(true);
        Object platformWindow = getPlatformWindow.invoke(tkStage);
        Method getNativeHandle = platformWindow.getClass().getMethod( "getNativeHandle" );
        getNativeHandle.setAccessible(true);
        Object nativeHandle = getNativeHandle.invoke(platformWindow);
        return new Pointer((Long) nativeHandle);
    } catch (Throwable e) {
        System.err.println("Error getting Window Pointer");
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-15T22:05:31.423

添加对 JNA 的依赖：

```
<dependency>
  <groupId>net.java.dev.jna</groupId>
  <artifactId>jna-platform</artifactId>
  <version>5.3.1</version>
</dependency> 
```

然后给你`Stage`一个独特的标题（在这个例子中是“MyStage”），然后像这样获取窗口 ID：

```
WinDef.HWND hwnd = User32.INSTANCE.FindWindow(null, "MyStage");

long wid = Pointer.nativeValue(hwnd.getPointer()); 
```

无论 JavaFX 版本如何，这都适用于 Windows。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T21:48:50.630

以下方法显示了如何获取 JavaFX Stage（或[Window](http://download.java.net/jdk8/jfxdocs/javafx/stage/Window.html)）的本机窗口句柄 (hWnd)，然后将其存储在 JNA [Pointer](http://twall.github.io/jna/4.0/javadoc/com/sun/jna/Pointer.html)对象中：

```
private static Pointer getWindowPointer(javafx.stage.Window window) {
    Pointer retval = null;
    try {
        Method getPeer = window.getClass().getMethod("impl_getPeer");
        final Object tkStage = getPeer.invoke(window);
        Method getPlatformWindow = tkStage.getClass().getDeclaredMethod("getPlatformWindow");
        getPlatformWindow.setAccessible(true);
        final Object platformWindow = getPlatformWindow.invoke(tkStage);
        Method getNativeHandle = platformWindow.getClass().getMethod("getNativeHandle");
        retval = new Pointer((Long) getNativeHandle.invoke(platformWindow));
    } catch (Throwable t) {
        System.err.println("Error getting Window Pointer");
        t.printStackTrace();
    }
    return retval;
} 
```

这个解决方案很脆弱并且通常不受欢迎，因为它使用反射来访问一堆私有方法。但它可以完成工作。希望 Oracle 最终会让我们直接访问本机窗口句柄，这样我们就不必这样做了。

当然，此代码仅在您在 MS Windows 上运行时才有效。此外，我只在 JavaFX 8 的早期版本中进行了尝试（但我怀疑它在 JavaFX 2 上也可以正常工作。编辑：看起来它在 JavaFX 2 中不起作用。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-12T05:01:02.763

```
com.sun.glass.ui.Window.getWindows.get(0).getNativeWindow 
```

//

```
com.sun.glass.ui.Window.getFocusedWindow.getNativeWindow 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-18T19:06:28.440

以下代码适用于 Windows 上的 JavaFX 11（我只需要它）。我没有在任何其他版本中测试过它。

它非常脆弱，但在我的情况下是可以管理的，因为我将 Java 运行时与应用程序捆绑在一起，所以我总是知道下面是什么。

如果您使用 Java 9 模块，您还需要打开调用模块的包：

`--add-opens javafx.graphics/javafx.stage=com.example`和`--add-opens javafx.graphics/com.sun.javafx.tk.quantum=com.example`

```
package com.example;

import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.WinDef;
import javafx.stage.Stage;
import javafx.stage.Window;
import java.lang.reflect.Method;

public class FXWinUtil {

    public static WinDef.HWND getNativeHandleForStage(Stage stage) {
        try {
            final Method getPeer = Window.class.getDeclaredMethod("getPeer", null);
            getPeer.setAccessible(true);
            final Object tkStage = getPeer.invoke(stage);
            final Method getRawHandle = tkStage.getClass().getMethod("getRawHandle");
            getRawHandle.setAccessible(true);
            final Pointer pointer = new Pointer((Long) getRawHandle.invoke(tkStage));
            return new WinDef.HWND(pointer);
        } catch (Exception ex) {
            System.err.println("Unable to determine native handle for window");
            return null;
        }
    }
} 
```

如果您使用的是 JNA（如果您正在做类似这样的骇人听闻的事情，这很可能），您也可以从`WinDef.HWND`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-17T04:45:53.900

JavaFX 16 的解决方案，用 Kotlin 编写（仅反射）

```
fun getPointer(scene: Scene): Long {
    val tkStage = SceneHelper.getPeer(scene)

    val windowStage = tkStage.javaClass.getDeclaredMethod("getWindowStage")
        .apply { isAccessible = true }
        .invoke(tkStage)

    val platformWindow = windowStage.javaClass.getDeclaredMethod("getPlatformWindow")
        .apply { isAccessible = true }
        .invoke(windowStage)

    // Use fields 'ptr' and 'delegatePtr' instead of getNativeHandle() to avoid Platform.runLater
    val ptr = Window::class.java.getDeclaredField("ptr")
        .apply { isAccessible = true }[platformWindow] as Long

    val delegatePtr = Window::class.java.getDeclaredField("delegatePtr")
        .apply { isAccessible = true }[platformWindow] as Long

    return if (delegatePtr != 0L) delegatePtr else ptr
} 
```

# ios - UIScrollView 和约束问题

> ID：15034413
> 
> 赞同：0
> 
> 时间：2013-02-22T22:39:51.450
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

我创建了一个 UIScrollView：

```
// datasetSubView.m
UIScrollView *scrollView = [UIScrollView new];
scrollView.translatesAutoresizingMaskIntoConstraints = FALSE;
scrollView.userInteractionEnabled = TRUE;
scrollView.scrollEnabled = TRUE;
scrollView.backgroundColor = [UIColor whiteColor];
scrollView.alpha = 0;

self.filterListView = scrollView; 
```

然后在我的 UIViewController 中，我添加滚动视图并给它一个大小：

```
[self.view addSubview:self.datasetSubBar.filterListView];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[filterListView]|" options:0 metrics:nil views:@{@"filterListView": self.datasetSubBar.filterListView}]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[filterListView][filtersSubBar]" options:0 metrics:nil views:@{@"filterListView": self.datasetSubBar.filterListView, @"filtersSubBar" : self.datasetSubBar.filtersSubBar}]];

[self.view layoutIfNeeded]; //gives the filterListView its frame 
```

然后我创建一个自定义 UIView 放置在滚动视图中：

```
[self.datasetSubBar createPanels];

[self.datasetSubBar.filterListView layoutIfNeeded]; // w/out this, the panel's size is 0

//datasetSubBar.m
-(void)createPanels {
    DatasetFilterListPanelView *panel = [[DatasetFilterListPanelView alloc] init];
    panel.translatesAutoresizingMaskIntoConstraints = FALSE;
    panel.headerLabel.text = [NSString stringWithFormat:@"Panel %d", 1];
    panel.tag = 1;

    [self.filterListView addSubview:panel];

    [self.filterListView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[panel]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(panel)]];
    [self.filterListView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[panel]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(panel)]];

    self.panels = @[panel];
} 
```

它应该将 subView 放在右上角，但它没有：

```
NSLog(@"viewDidAppear | self.datasetSubBar.filterListView: %@", self.datasetSubBar.filterListView);

NSLog(@"self.datasetSubBar.panels: %@", self.datasetSubBar.panels) 
```

.

```
2013-02-22 16:28:22.912 [5196:14003] viewDidAppear | self.datasetSubBar.filterListView: <UIScrollView: 0x8489f90; frame = (0 0; 768 934); clipsToBounds = YES; alpha = 0.8; gestureRecognizers = <NSArray: 0x848a650>; animations = { opacity=<CABasicAnimation: 0x98138b0>; }; layer = <CALayer: 0x848a160>; contentOffset: {0, 0}>
2013-02-22 16:28:22.913 [5196:14003] self.datasetSubBar.panels: (
    "<DatasetFilterListPanelView: 0x9853570; frame = (-385 20; 365 165); tag = 1; layer = <CALayer: 0x9853640>>" 
```

感觉就像在创建 subView 时，filterListView 的宽度为 0 因为如果 superView 是 768，则 subView 锚点应该是 (383, 20) {superView 的宽度 (768) - subView 的宽度 (365) - padding(20) }。

这让我很沮丧，它应该工作。UIScrollViews 对约束的行为是否不同？

编辑：

是的，UIScrollView 以不同的方式处理约束；我将滚动视图更改为 UIView 并按其应有的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:09:04.983

做了更多的挖掘并发现我需要在滚动视图中使用 contentView：

```
-(UIScrollView *)createFilterListView {    
    UIScrollView *scrollView = [UIScrollView new];
    scrollView.translatesAutoresizingMaskIntoConstraints = FALSE;

    UIView *contentView = [UIView new];

    scrollView.contentView = contentView;

    [scrollView addSubview:contentView];

    return scrollView;
} 
```

然后在实现滚动视图的地方，为其设置约束，然后将 contentView 和 contentSize 设置为您需要的大小：

```
[self.view layoutIfNeeded];

self.scrollView.contentView.frame = CGRectMake(0, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.width * 2);

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width, self.scrollView.frame.size.width * 2); // made it twice as big to test scrolling 
```

我向 UIScrollView 添加了一个类别来存储内容视图。然后，您使用约束将项目添加到 contentView。当您的项目需要滚动时，您需要调整 contentView 和 contentSize。

[iOS 6 发行说明也](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)涵盖了这一点。

# svn - Jenkins 和 SVN 集成 - 在构建 + 开发者名称之前暂停

> ID：15034417
> 
> 赞同：0
> 
> 时间：2013-02-22T22:40:16.423
> 
> 标签：svn, jenkins

我们希望持续集成，我们使用 SVN 挂钩到 Jenkins 为每次签入创建构建。我们了解如何设置它，但希望包含一些特定功能。

a) 理想情况下，我们希望在提交后等待 5 分钟左右，直到完成另一个提交以阻止 2 个构建不必要的重叠。然后，如果在那 5 分钟内有另一个提交出现，则重置时钟。

b) 是否可以获得执行签入的开发人员的姓名。如果他们的签到有问题，我们会特别通知他们。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:53:59.163

A) 转到管理 Jenkins -> 配置系统，第一个选项之一是“安静期”，它将阻止一个工作这么多分钟。[你可以在这里](http://jenkins-ci.org/content/quiet-period-feature)看到完整的解释

B) 您可以使用[email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)在构建失败时通知提交者

# php - 地穴为两个不同（相似）密码返回相同的哈希值

> ID：15034422
> 
> 赞同：5
> 
> 时间：2013-02-22T22:40:49.167
> 
> 标签：php, hash, salt, crypt

我在使用 crypt() 时遇到问题，如果用户有密码（在此示例中为密码 1），并且他们将其更改为密码 2，则散列返回相同的结果。你可以在这里测试一下：**OLD LINK** 输入密码1作为当前密码，密码2作为新密码并确认密码，你会看到结果。如果输入完全不相似的密码，则没有问题。我知道还有其他方法可以散列密码等。我比什么都好奇。我的代码如下：

```
<?php

$oldpassword="password1";

echo "<form method=\"post\">
<p>Enter Current Password: <input type=\"password\" name=\"currentpassword\" /></p>
<p>Enter New Password: <input type=\"password\" name=\"password\" /></p>
<p>Confirm New Password: <input type=\"password\" name=\"confirmpassword\" /></p>
<p><input type=\"submit\" value=\"Change Password\"></p>
</form>";

$user_id = $_SESSION['user_id'];
$pass=$_POST['password'];
$salt = 'xxxxx';
$currentpassword = crypt($_POST['currentpassword'], $salt);
$oldpassword = crypt($oldpassword, $salt);
if(isset($_POST['password'])) {
    if ($currentpassword !== $oldpassword) {
        echo "The password you entered for current password does not match our records.";
    }
    else {
        if ($_POST['password'] && $_POST['confirmpassword']) {
            if ($_POST['password'] == $_POST['confirmpassword']) {
            $hash = crypt($pass, $salt);
                if ($hash == $currentpassword) {
                    echo "Current Password:&nbsp;";
                    var_dump($_POST['currentpassword']);
                    echo "<br/>";
                    echo "New Password:&nbsp;";
                    var_dump($_POST['password']);
                    echo "<br/>";
                    echo "New Hash:&nbsp";
                    var_dump($hash);
                    echo "<br/>";
                    echo "Current Password Hash:&nbsp";
                    var_dump($currentpassword);
                    echo "<br/>";
                    echo "<hr/>";
                    echo "Your new password cannot be the same as your current password.";
                }
                else {
                    echo "Your password has been changed successfully<br/>";
                }
            } else {
                echo "Your passwords do not match. Please try again.";
            }
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T23:28:59.877

要使用[crypt](http://php.net/manual/en/function.crypt.php)，您必须提供适当的盐。每个算法都有自己的盐格式。我的猜测是您使用的随机字符很少作为盐，这与任何高级算法都不匹配，因此 php 将您的盐减少到前 2 个字符并回退到基本`DES`算法。`DES`算法哈希最多 8 个字符，并且两者`password1`都是`password2`9 个字符长，因此只能`password`从两者中使用，因此哈希值相同。

解决方案：为最强的可用算法使用适当的盐格式，为每个密码生成随机盐

推荐的解决方案：[https](https://github.com/ircmaxell/password_compat) ://github.com/ircmaxell/password_compat （用于 php 5.3.7 - 5.4.x）并在切换到 php 5.5 后：http: [//php.net/password_hash](http://php.net/password_hash)

# python - 正则表达式+python挑战！整理几乎是常规的数据

> ID：15034423
> 
> 赞同：2
> 
> 时间：2013-02-22T22:40:55.850
> 
> 标签：python, regex

我很抱歉发布这个，但我已经浪费了很多时间来解决这个问题。因此，一个正则表达式 + Python 挑战是一个和所有的：

我正在处理大多数定期格式化的数据。公司列表组合成一个字符串，如

```
`Company Inc,Company, LLC,Company` 
```

没有引号来描述条目。使用上面的常规示例，我可以执行以下操作：

```
>>> re.split(r',\b', 'Company Inc,Company, LLC,Company')                                                                                                                                                                                    
['Company Inc', 'Company, LLC', 'Company'] 
```

不幸的是，一些字符串的格式不规则，例如：

```
`IBP, Inc,Tyson Foods,Inc.` 
```

其中不被空格`,Inc`隔开。`Foods`所以，使用`r',\b'`，我得到这个：

```
>>> re.split(r',\b', 'IBP, Inc,Tyson Foods,Inc.')
['IBP, Inc', 'Tyson Foods', 'Inc.'] 
```

我想得到这个：

```
['IBP, Inc', 'Tyson Foods,Inc.'] 
```

在这个情况下，你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:04:05.353

如果知道，您可以将拆分预防字符串添加到负前瞻

```
r',\b(?!Inc\.)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:34:55.777

I would make a first split on the comma to get lists such as:

```
['IBP', 'Inc', 'Tyson Foods', 'Inc.'] 
```

and then do a second pass through the data where highly improbable company names such as 'Inc', 'Inc.', 'LLC', 'GmbH', etc. get combined with the previous entry in the list:

```
badList = originalData.split(',')
goodList = []
rejectList = ['Inc', 'Inc.', 'LLC', 'GmbH'] # etc.

for pseudoName in badList:
   pseudoName = pseudoName.strip()
   if pseudoName in rejectList:
      goodList[-1] = goodList[-1] + ", " + pseudoName
   else:
      goodList.append(pseudoName) 
```

This method would also let you do more sophisticated manipulations if you later find that your data has entries such as "Farmers Group, The" and put the articles in the right place.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:09:19.350

用稍微不同的术语来表达 Mike M 的回答，如果您可以构建一个可靠的非相关标记列表，例如“Inc.”、“Inc”和“LLC”，那么您可能有一种解析方法。即使那样，您也可能不会得到像 split() 这样的自动功能来为您工作。你可能不得不自己动手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T22:52:05.140

这取决于您必须弄清楚的条目数。基本上，就高质量数据而言，你被搞砸了。这意味着您尝试应用的任何自动化都将在处理您的数据时遇到问题。

您将不得不手动修复此问题，以恢复数据质量。数据质量问题是计算机很难处理的问题之一。

我个人会做的是编写一个快速而肮脏的启发式方法来尝试确定不符合预期结果的条目。例如，在您的示例中，我会查找“Inc”或“LLC”加上或减去几个字符的拆分条目。这将捕获似乎没有提供比公司类型更多的条目。你会赶上“公司”。并且知道*真实的*公司名称必须在附近。

完成后，您可以手动清理数据并重新处理。当您可以证明将此类纠正措施作为程序的一部分编写时，这是对数以百万计的条目的最佳选择。但是，除非你是谷歌，否则几乎可以保证你会发现它是最快最容易看到它的。

# css - 是否有用作 CSS 背景的 SVG 的 polyfill？

> ID：15034429
> 
> 赞同：7
> 
> 时间：2013-02-22T22:41:17.407
> 
> 标签：css, svg, polyfills

我想使用 SVG 而不必每次都创建 PNG 后备。这个问题的简单解决方案是什么？我看过这些项目，但不知道他们是否支持它：

[http://sie.sourceforge.jp/](http://sie.sourceforge.jp/)

[http://code.google.com/p/svgweb/](http://code.google.com/p/svgweb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T14:46:35.833

试试 GruntIcon - [http://github.com/filamentgroup/grunticon](http://github.com/filamentgroup/grunticon)

> grunticon 获取一个 SVG 文件文件夹（通常是您在 Adob​​e Illustrator 等应用程序中绘制的图标），并将它们以 3 种格式输出到 CSS：svg 数据 url、png 数据 url 和第三个后备 CSS 文件，其中引用了常规 png 图像，它们也会自动生成并放置在文件夹中。
> 
> grunticon 还生成一小部分 JavaScript 和 CSS 以放入您的站点，根据浏览器的功能异步加载适当的图标 CSS，以及带有该加载器脚本的预览 HTML 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T06:28:16.837

有很多 SVG polyfills：

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills#svg](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills#svg)

请尝试它们并使用每个结果更新您的初始问题。

# textbox - 为什么有些控制是公开的而有些是私有的？

> ID：15034432
> 
> 赞同：1
> 
> 时间：2013-02-22T22:41:21.843
> 
> 标签：textbox, label, visibility, private-members, partial-classes

我注意到这个在遗留 *.cs 文件中添加的 Windows 代码（在从代码文件中逐出类似的部分类出现之前；具体来说，这是在一个旧的 Windows CE 项目中）：

```
private System.Windows.Forms.Label lblDescription;
public System.Windows.Forms.TextBox txtItemDollar; 
```

为什么有些控制是私有的而有些是公开的？区别不是控件的类型，因为我看到 TextBox 和 Label 在某些情况下是私有的，而在其他情况下是公共的。

我猜这有点学术性。更相关的问题是：通过使用一个可见性说明符或另一个，这些控件有什么影响或重要性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:16:52.923

我可以理解对什么是有效的复合组件的私有控制。那只是你想在标签中显示一些东西，但你不想提供弄乱它的工具，改变字体，移动它等等。

公众成员，那是错误的。Someoojah.txtItemDollar.Dispose; 或=空；如果在那之后它没有倒在一大堆中，我会感到非常惊讶。它违反了许多基本的设计原则，这是不正确的。

不能说我很惊讶。早期的 .net 遭受了许多非常糟糕的实现，可能需要满足销售期限。

# compiler-errors - 收到此错误 LNK2019，不知道为什么

> ID：15034435
> 
> 赞同：0
> 
> 时间：2013-02-22T22:41:34.067
> 
> 标签：compiler-errors, linker-errors

```
#include <iostream>
#include <string>
#include <fstream>
#include <ios>
using namespace std;

static int numofPPackages=0;
static int numofOPackages=0;
static int numofTPackages=0;

class Persons {
public:
string Name;
string Address;
string City;
string State;
string Zip;

Persons ();
/*Persons (string name, string address, string city, string state, string zip) {
    Name=name; Address=address; City=city; State=state; Zip=zip;}*/
void fillpers (string name, string address, string city, string state, string zip)           {
    Name=name; Address=address; City=city; State=state; Zip=zip;}
friend ostream &operator<<(ostream &out, Persons);
string getName(){return Name;}
string getAddress(){return Address;}
string getCity(){return City;}
string getState(){return State;}
string getZip(){return Zip;}

};

class Package {
public:
int Weight;
char Ptype;
double Cost;
Persons Sender;
Persons Reciver;

Package(){}
/*Package(char ptype, int weight, double cost, Persons sender,Persons reciver){
    Ptype=ptype; Weight=weight; Cost=cost; Sender=sender; Reciver=reciver;}*/
void fillpak(char ptype, int weight, double cost, Persons sender,Persons reciver)
    {Ptype=ptype; Weight=weight; Cost=cost; Sender=sender; Reciver=reciver;}
static void printpak(Package toprint){
    cout<<"Package #"<<numofPPackages;
    cout<<"Shipper"<<endl<<toprint.Sender;
    cout<<"Reciver"<<endl<<toprint.Reciver;
    cout<<"Shipping cost for "<<toprint.Weight<<" ounces @"     <<toprint.Cost<<"/ounce is "<<toprint.Weight*toprint.Cost;
}
};

class OvernightPackage : public Package {
public:
double addcost;
//void printpak;
double Flat_rate_increase(){
    double addcost;
    ifstream readin;
    readin>>addcost;
    return addcost;
}
static void printOpak(Package toprint, double extcost){
    cout<<"Package #"<<numofOPackages;
    cout<<"Shipper"<<endl<<toprint.Sender;
    cout<<"Reciver"<<endl<<toprint.Reciver;
    cout<<"Shipping cost for "<<toprint.Weight<<" ounces @"<<toprint.Cost<<"/ounce + a flat rate of" << extcost<<" is "<<toprint.Weight*toprint.Cost+extcost;
}
};

class TwoDayPackage : public Package{
public:
double addcost;
//void printpak;
double Cost_per_ounce(int weight,double addcost){
    ifstream readin;
    readin>>addcost;
    return weight*addcost;
}
static void printTpak(Package toprint, double extcost){
    cout<<"Package #"<<numofTPackages;
    cout<<"Shipper"<<endl<<toprint.Sender;
    cout<<"Reciver"<<endl<<toprint.Reciver;
    cout<<"Shipping cost for "<<(toprint.Weight+extcost)<<" ounces @"<<toprint.Cost<<"/ounce is "<<(toprint.Weight+extcost)*toprint.Cost;
}
};

//overload for output
ostream &operator<<(ostream & out, Persons aperson)
{
out <<"Name: "<< aperson.getName()<<endl<<"Address: "<<aperson.getAddress()    <<endl<<"City, State Zip: "<<aperson.getCity()<<aperson.getState()<<aperson.getZip()<<endl;
return out;
}

int main() {
string filename;
int realfile=0;
int inWeight;
char inPtype;
double inCost;
string Name1, Address1, City1, State1, Zip1, Name2, Address2, City2, State2, Zip2;
double inaddcost;
Persons Pers1;
Persons Pers2;

Package stdpak;
TwoDayPackage tdpak;
OvernightPackage onpak;

while (realfile==0) 
{
    cout<<"Enter the file name you wish to pull data from"<<endl;
    cin>>filename;
    ifstream readin(filename+".txt");
    if (readin.is_open()){
        realfile++;
            while (!readin.eof()){

                readin>>inPtype;
                readin>>inWeight;               
                readin>>inCost;
                readin>>Name1;
                readin>>Address1;
                readin>>City1;
                readin>>State1;
                readin>>Zip1;
                readin>>Name2;
                readin>>Address2;
                readin>>City2;
                readin>>State2;
                readin>>Zip2;

                Pers1.fillpers(Name1, Address1, City1, State1, Zip1);
                Pers2.fillpers(Name2, Address2, City2, State2, Zip2);

                if (inPtype=='o'||inPtype=='O'){
                    readin>>inaddcost;
                    onpak.fillpak(inPtype, inWeight, inCost, Pers1, Pers2);
                    numofOPackages++;
                    OvernightPackage::printOpak(onpak,inaddcost);
                }
                if (inPtype=='t'||inPtype=='T'){
                    readin>>inaddcost;
                    tdpak.fillpak(inPtype, inWeight, inCost, Pers1, Pers2);
                    numofTPackages++;
                    TwoDayPackage::printTpak(tdpak,inaddcost);
                }
                else{
                    stdpak.fillpak(inPtype, inWeight, inCost, Pers1, Pers2);
                    numofPPackages++;
                    Package::printpak(stdpak);
                }
            }
        }
        else{cout<<"Try another file name."<<endl;}
    }

return 0;
} 
```

该程序将从文件中获取输入，然后将该信息打印到屏幕上。所以我不断收到此错误-（错误 1 ​​错误 LNK2019：未解析的外部符号“public：__thiscall Persons::Persons(void)”（??0Persons@@QAE@XZ) 在函数_main 中引用）有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:43:33.613

因为没有默认构造函数的实现 -

```
Persons (); 
```

您尝试使用它创建对象：

```
Persons Pers1;
Persons Pers2; 
```

还有一些提示：

*   `const`通过引用而不是值传递类类型。
*   `const`在您可以标记的地方标记成员
*   缩进代码
*   放弃`using namespace std;`
*   避免全局变量
*   使数据成员`private`
*   作文是一种`has-a`关系*——a*`Package`没有2 个人。
**   为什么`static void printpak(Package toprint)`？为什么不使用不带参数的常规参数？*   考虑`virtual`在派生类中覆盖一个单独的打印方法。*

# javascript - 如何获得这个的选定值？

> ID：15034436
> 
> 赞同：1
> 
> 时间：2013-02-22T22:41:38.077
> 
> 标签：javascript, jquery

我有一个选择标签。

这是jQuery：

```
$('#offer').change(
function(){
     alert($(this + "option:selected").val());
}); 
```

我想获得 option:selected 的值。上面的代码不起作用。但是如果我传递一个 id 它就可以了`"#idofselecet option:selected"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:42:16.953

选择值将更改为所选选项中的任何文本：

```
$('#offer').on('change', function() {
    alert( this.value );
}); 
```

你也可以做

```
$('#offer').on('change', function() {
    alert( $('option:selected', this).val() );
}); 
```

这可以通过将`this`上下文作为上下文传递给选择器来实现，但是您正在将元素 , 添加`this`到字符串`this + "option:selected"`, 并且这不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:49:21.597

您可以使用该`.find()`方法来 .

上下文选择器在内部使用它在上下文中搜索。

```
$('#offer').change(function(){
     alert($(this).find("option:selected").val());
}); 
```

# c#-4.0 - HttpClient 响应 ReadAsAsync() 没有完全反序列化对象

> ID：15034437
> 
> 赞同：4
> 
> 时间：2013-02-22T22:41:39.307
> 
> 标签：c#-4.0, asp.net-web-api

我正在尝试使用 Web API 客户端库来使用 Web 服务。我的问题是，当提交函数使用 POST 方法时，ReadAsAsync 似乎不想完全取消返回的对象。

如果我以字符串形式获得响应并手动脱轨它就可以工作。（我得到一个填充了所有字段的 apmsgMessage）

```
HttpClient client = GetClient();
var response = client.PostAsJsonAsync("api/robot/Preview", ad).Result;
var msg = response.Content.ReadAsStringAsync();
return JsonConvert.DeserializeObject<apmsgMessage>(msg.Result); 
```

我最初尝试了下面的代码，它返回一个 apmsgMessage 对象，但所有字段都是空的。

```
HttpClient client = GetClient();
var response = client.PostAsJsonAsync("api/robot/Preview", ad).Result;
var msg = response.Content.ReadAsAsync<apmsgMessage>().Result;
return msg; 
```

我的问题是为什么我的原始（PostAsJsonAsync）不返回一个完全填充的 apmsgMessage。我对 ReadAsAsync 做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T16:58:52.623

我只是遇到了同样的问题，就我而言，我通过`[Serializable]`从类中删除属性来解决它。

我不知道为什么这个属性与反序列化过程冲突，但是我一拿出来，`ReadAsAsync`方法就按预期工作了。

# c++ - HDMI 连接不发送 WM_DEVICE_ARRIVAL 消息

> ID：15034438
> 
> 赞同：1
> 
> 时间：2013-02-22T22:41:46.113
> 
> 标签：c++, winapi, port, hdmi

我正在尝试检测我的电视何时通过 HDMI 电缆连接到我的笔记本电脑。我正在使用 WinAPI 函数`RegisterDeviceNotification()`来处理设备消息。

当我将电视连接到笔记本电脑（通过 HDMI 电缆）时，我从未收到 WM_DEVICE_ARRIVAL 消息，只有 3 个 WM_DEVICE_CHANGE 事件。**这是正常的吗？**

我真的需要 WM_DEVICE_ARRIVAL 事件，因为 lParam（或 wParam，我忘记了）包含一个结构，它告诉我连接的设备类型和设备名称，而，afaik，WM_DEVICE_CHANGE 事件不包含这个结构。

如果在 HDMI 端口插入时没有收到 WM_DEVICE_ARRIVAL 消息是正常的，**我可以使用什么其他方法来确定设备连接时的名称和类型？**

我唯一的想法是：在应用程序启动时列出所有设备，在设备连接时对 WM_DEVICE_CHANGE 事件做出反应，看看设备列表是否增加了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:08:16.360

您可以投票`GetSystemMetrics(SM_CMONITORS)`或`EnumDisplayMonitors`.

该`WM_SETTINGCHANGE`消息（通常）由更改系统指标的应用程序和服务发送，包括桌面分辨率（如果桌面扩展，则在插入 HDMI 时更改，它不会用于镜像）。您可以使用它来触发上述轮询，而不是仅仅依靠计时器。

# azure - 到 Azure 的 SSL 警告发布角色

> ID：15034440
> 
> 赞同：1
> 
> 时间：2013-02-22T22:41:52.540
> 
> 标签：azure, azure-role-environment

将角色发布到 Azure 时，该进程处于挂起状态，我最终不得不取消该进程。以下警告不断重复“警告：服务器遇到未知故障：基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

到目前为止，我在发布时没有遇到任何问题，但不确定发生了什么变化。使用 VS2010、.NET 4.0、Windows Azure SDK 2011 年 11 月。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:44:56.843

由于 SSL 证书过期，Azure 正在经历全球性中断，因此如果这发生在 2013 年 2 月 22 日，那么您可能只是遇到了这个全球性中断问题，并且在 Microsoft 解决他们的证书问题之前您无能为力。

# jasper-reports - 动态选择子报表

> ID：15034447
> 
> 赞同：0
> 
> 时间：2013-02-22T22:42:22.017
> 
> 标签：jasper-reports, ireport, subreport

我的主报告中有 5 个子报告。现在我的要求是基于 UI 中的选择，我需要显示报告的组合。说：Main.jrxml sub1.jrxml sub2.jrxml sub3.hrxml

如果用户想要 sub1 和 sub3 在 main 我如何隐藏 sub2？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T03:32:31.073

您可以通过应用报表的“Print When Expression”属性来隐藏子报表。

# sql - 复合键的外键

> ID：15034449
> 
> 赞同：1
> 
> 时间：2013-02-22T22:42:30.700
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如果我有一个表，其中`AId`是主键，`BId`并且`CId`是引用其表的外键。我需要使`BId`和`CId`独特的组合。

我将如何更改表格以使组合独一无二？

谢谢

```
AId    BId   CId   Notes     Date
===    ===   ===   =====     ====
1      200   1     Random    2/2/2005
2      201   2     ETC       2/8/2007
3      202   3     ETC       2/12/2012 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T22:45:25.290

您需要创建唯一索引或唯一约束。

我通常更喜欢唯一索引，因为它们更灵活（如果需要，可以添加包含的列）并且它们不必在模式中唯一命名。

唯一索引的示例语法

```
CREATE UNIQUE NONCLUSTERED INDEX SomeIndex ON YourTable(BId,  CId) 
```

的顺序对唯一性保证没有影响，但确实会影响索引可以有效支持的查询（这种方式支持通过or但不`BId, CId`查找）`Bid``BId, CId``CId`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T22:45:20.837

试试这个：

```
ALTER TABLE myTable 
ADD CONSTRAINT myConstraint 
UNIQUE NONCLUSTERED
(
           BId, CId
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T22:52:15.243

您可以创建不是主键的唯一索引。这将强制 BId 和 CId 的组合是唯一的。

```
CREATE UNIQUE INDEX ix_ATable_AltUniqueIndex ON ATable(BId,CId) 
```

或者您可以创建一个唯一的约束

```
 ALTER TABLE ATable ADD CONSTRAINT uni_ATable UNIQUE (BId,CId) 
```

创建唯一约束似乎也创建了唯一索引。

# c++ - 使用 Lua C API 将现有 C 变量绑定到 Lua

> ID：15034450
> 
> 赞同：3
> 
> 时间：2013-02-22T22:42:32.493
> 
> 标签：c++, binding, lua

几年前，我使用 luabind 将 C++ 对象绑定到 Lua，反之亦然。有一种方法可以将现有（通过 C++ 代码中的 new 运算符分配）对象绑定到 Lua 并在如下脚本中使用它：

```
binded_object.property = new_value 
```

现在我正在开发一个新项目，我想在其中添加一些脚本。为了简单起见，不需要任何提升或任何繁重的模板。所以我的问题是如何仅使用 Lua C Api 来做到这一点？

不幸的是，我遇到的所有示例都展示了如何将自定义 C++ 类型绑定到 Lua，然后在脚本中创建该类型的新对象，最后将对象返回给 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:58:51.437

你想要[SWIG](http://www.swig.org/)。没有 Boost，没有繁重的模板，只有您可能想要的所有绑定，为了您的方便而自动生成。

现在，您的问题并不完全清楚：“仅 Lua C Api”可能是指“在我自己编写的代码中手动进行所有 Lua C API 调用”。如果这就是您的意思，请从去过那里的人那里拿走：*您实际上并不想这样做*。这既困难又没有回报，而且你什么也得不到。使用 SWIG。如果需要，您可以手动编辑它生成的绑定，但使用 SWIG。

# meteor - 如何使用 Meteor 解析 HTML 服务器端？

> ID：15034453
> 
> 赞同：15
> 
> 时间：2013-02-22T22:42:53.653
> 
> 标签：meteor

我希望能够从我使用 Meteor.http 方法获取的 HTML 页面中抓取链接。在服务器端使用 jQuery 是理想的，但我认为这行不通。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T23:12:52.407

考虑使用[cheerio](https://github.com/MatthewMueller/cheerio)，它就像jquery，但更多用于抓取。我之前尝试过回答这个问题，所以我希望这次我能做得更好。

它是一个 npm 模块，所以第一步用终端安装它（在你的项目目录中）：

```
meteor add http
cd .meteor
npm install cheerio 
```

所以现在代码：

您需要在您的服务器 js/或等效项中使用它

```
var cheerio = __meteor_bootstrap__.require('cheerio');
Meteor.methods({
last_action: function() {
       $ = cheerio.load(Meteor.http.get("https://github.com/meteor/meteor").content);
       return $('.commit-title').text().trim()      
    }
}) 
```

如果您从客户端 js 运行它，您将看到流星 github 分支上的最后一个操作：

```
Meteor.call("last_action",function(err,result){ console.log(result) } ); 
```

我从今天/2 月 23 日收到了这个

![在此处输入图像描述](../Images/4049785b272d2127987351fcb16af5dd.png)

与 github.com/meteor/meteor 上的相同

![在此处输入图像描述](../Images/c3f3a15ea173099ad2cbb64e27ab4ee7.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-22T12:27:12.583

正如 Akshat 所建议的那样使用[cheerio](https://github.com/cheeriojs/cheerio)，但到目前为止，我会推荐一种不同的使用方式，用于 Meteor 0.8.0。

首先，[为 Meteor 安装 npm](https://atmospherejs.com/package/npm)：

```
$ mrt add npm 
```

然后修改`packages.json`为（当然你可以有不同版本的cheerio，或者其他节点包）：

```
{
  "cheerio": "0.15.0"
} 
```

在`server.js`（或任何其他文件，在服务器端代码中）开始：

```
var cheerio =  Meteor.require('cheerio'); 
```

以你喜欢的方式使用cheerio。

运行后`$ meteor`它会自动安装cheerio。

# python - Python套接字聊天问题

> ID：15034457
> 
> 赞同：0
> 
> 时间：2013-02-22T22:43:12.433
> 
> 标签：python, sockets, inet-aton

我在 Python 中找到了一个聊天应用程序的代码，但我找不到任何关于作者或网站上任何人的信息来帮助我。

这是整个代码的链接：http: [//files.myopera.com/manojsheokand666/blog/chat.py](http://files.myopera.com/manojsheokand666/blog/chat.py)

我感觉有些东西不见了。我需要这个，我想修改它并尝试学习更多东西

我做了一些阅读，这是我第三次编辑这篇文章.. 现在，我可以保持连接而不会出现任何错误，但是当我尝试发送（输入）某些东西时，它既不发送也不接收。但是，每当我尝试以另一个“人”的身份运行第二个应用程序时，我都会在第一个正在运行的应用程序上收到一条消息，即“人”已连接，并且第一个应用程序因以下错误而崩溃：

KeyError: ('127.0.0.1',62833) - 注意，端口总是不同的

虽然，第二个应用程序仍然存在，但如果我再次运行该应用程序，它不会收到任何内容或崩溃。

我做了什么：

```
host = gethostbyname(gethostname()) #this actually gets 192.168.0.101 (my local IP to the router)
s.setsockopt(SOL_IP,IP_ADD_MEMBERSHIP,\
            inet_aton(addr)+inet_aton(host)) #i write 225.0.0.1 as 'addr' 
```

还有其他方法可以让这个工作吗？我可以使用 telnet 运行一个简单的服务器/聊天，但是这个 GUI（tkinter）认为这对我来说很复杂，我想了解它是如何工作的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:19:24.547

从 IP_ADD_MEMBERSHIP 选项的定义来看，第一个地址是多播组地址，第二个是接口地址。

您使用 127.0.0.1 作为第一个地址。这不是多播地址。

多播地址在 224.0.0.0/4 范围内（即 224.0.0.1 到 239.255.255.254，不包括网络和广播地址）。

例如，使用第一个（同一网段上的所有主机）多播地址就可以了：

```
>>> s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
>>> s.setsockopt(socket.SOL_IP,socket.IP_ADD_MEMBERSHIP,
                 socket.inet_aton('224.0.0.1')+socket.inet_aton('0.0.0.0')) 
```

有关多播地址的更多信息，请查看此[参考。](http://en.wikipedia.org/wiki/Multicast_address)

因此，您需要在 224/4 中为您的应用程序选择一个未分配的多播地址并使用它（例如，ad-hoc 范围内的任何内容，如 244.0.2.0）。请注意，多播地址与接口地址无关（使用“0.0.0.0”，将所有本地接口与多播地址相关联，这意味着所有接口都可用于接收/发送该组的多播数据包）。

# android - Android 系统服务不可用

> ID：15034466
> 
> 赞同：0
> 
> 时间：2013-02-22T22:43:51.553
> 
> 标签：android, android-spinner

我很想从我的网站获取数据，然后将这些信息放入微调器中。我已经使用了一些教程，我想出了这段代码

```
package com.thenewboston.christian;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class hospitalhttp extends Activity{

private ProgressDialog pDialog;
JSONParser jParser = new JSONParser();

private static String url_all_products = "http://www.photosbychristian.com/ems/hospitals.php";

//private static final String TAG_HID = "hid";
private static final String TAG_HOSPITAL = "hospital";

JSONArray hosps = null;
ArrayAdapter <String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item );

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.spinnertest);

    new LoadAllProducts().execute();

}

class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(hospitalhttp.this);
        pDialog.setMessage("Loading hospitals. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET",
                params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        try {
            // products found
            // Getting Array of Products
            hosps = json.getJSONArray("PA");

            // looping through All Products
            for (int i = 0; i < hosps.length(); i++) {
                JSONObject c = hosps.getJSONObject(i);

                // Storing each json item in variable
                //String id = c.getString(TAG_HID);
                String name = c.getString(TAG_HOSPITAL);

                adapter.add(name);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 */

                Spinner state = (Spinner) findViewById(R.id.spinner1);
                state.setAdapter(adapter);

            }
        });

    }

}
} 
```

我尝试运行我的应用程序并收到此错误

```
02-22 22:29:48.131: E/AndroidRuntime(1200): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.thenewboston.christian/com.thenewboston.christian.hospitalhttp}: java.lang.IllegalStateException: System services not available to Activities before onCreate() 
```

所以我在 oncreate bolck 之后移动了所有这些，我仍然得到同样的错误

```
private ProgressDialog pDialog;
JSONParser jParser = new JSONParser();

private static String url_all_products = "http://www.photosbychristian.com/ems/hospitals.php";

//private static final String TAG_HID = "hid";
private static final String TAG_HOSPITAL = "hospital";

JSONArray hosps = null;
ArrayAdapter <String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item ); 
```

所以我不知道该怎么做知道任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:54:50.750

移动代码不会有帮助。Java 是一种作用域语言，无论是放在方法之后还是之前，都没有关系。它仍然在同一范围内。

这个问题可能是由这一行提出的：

```
ArrayAdapter <String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item ); 
```

您想在*对象范围*的初始化程序中加载布局。这种代码甚至在构造函数之前运行。您必须将值分配移动到这样的`onCreate`方法中：

```
ArrayAdapter <String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.spinnertest);

   adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);

   new LoadAllProducts().execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:52:19.820

> 所以我在 oncreate bolck 之后移动了所有这些，我仍然得到同样的错误

该代码不能在方法内，因为您要声明静态值。因此，该代码必须驻留在任何方法之外，这意味着它将在*任何*方法之前执行，因此将在之前执行`onCreate()`。

那里的某些东西——可能是你的——正在尝试做一些在你的方法中执行*之后*`JSONParser`才能完成的事情。您的 Java 堆栈跟踪将具体告诉您这些行中的哪一行（如果有）是您的困难的根源。然后，您需要在调用*之后*执行该代码，例如将其放在方法的末尾。 *`super.onCreate()``onCreate()` *`super.onCreate()``onCreate()`**

# visual-studio-2012 - 无法连接到 VisualStudio.com：“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系”

> ID：15034468
> 
> 赞同：4
> 
> 时间：2013-02-22T22:44:03.487
> 
> 标签：visual-studio-2012

在尝试将我的项目签入到 VisualStudio.com 时，我刚开始在 Visual Studio 2012 中收到此错误。我不知道是什么原因造成的，我尝试重新启动计算机，但它并没有解决问题。有没有人见过这个？

我正在使用 Team Foundation 服务预览版。

`C:\Users\rjs3261\Documents\Visual Studio 11\MvcApplication2\MvcApplication2\MvcApplication2.csproj: The server encountered an unknown failure: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:02:42.160

Team Foundation 服务器已关闭，您可以在此处查看状态：

[http://www.windowsazure.com/en-us/support/service-dashboard/](http://www.windowsazure.com/en-us/support/service-dashboard/)

这是我的来源：http: [//blogs.msdn.com/b/tfservice/archive/2013/02/22/service-interruption-2-22-2013-update.aspx](http://blogs.msdn.com/b/tfservice/archive/2013/02/22/service-interruption-2-22-2013-update.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:04:40.770

我遇到了同样的错误。在过去的几个小时内尝试签入，每次尝试都会导致此错误。

tfs.visualstudio.com 上有一个论坛回复。看起来有导致该问题的 Azure 存储问题。

[http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/00965fe0-462e-4b73-8894-b263bbd25642](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/00965fe0-462e-4b73-8894-b263bbd25642)

我还找到了托管的 TFS 状态仪表板：[https ://tfs.visualstudio.com/en-us/support/current-service-status](https://tfs.visualstudio.com/en-us/support/current-service-status)

# windows - 使用 git 和 curl 命令行

> ID：15034471
> 
> 赞同：6
> 
> 时间：2013-02-22T22:44:37.980
> 
> 标签：windows, r, git, curl

我正在尝试编写一个函数来将项目推送到 github，而无需先在云中创建项目。[目前，您可以使用此问题](https://stackoverflow.com/questions/14912161/repo-from-rstudio-to-github)中的信息从 RStudio 中的 git 命令行执行此操作。

现在我正在尝试将它包装成一个函数，我可以使用该函数`system`从本地存储库在云中创建存储库。我正在 Windows 和 linux 机器上解决这个问题（所以还不确定它在 mac 上的效果如何）。到目前为止，这是我的代码（检测 git 位置）：

```
gitpath <- NULL
    repo <- "New"
    user <- "CantPostThat"
    password <- "blargcats"

if (Sys.info()["sysname"] != "Windows") {
    gitpath <- "git"
} else {
    if (is.null(gitpath)){  
        test <- c(file.exists("C:\\Program Files (x86)\\Git\\bin\\git.exe"),
            file.exists("C:\\Program Files\\Git\\bin\\git.exe"))
        if (sum(test) == 0) {
            stop("Git not found.  Supply path to 'gitpath'")    
        }
        gitpath <- c("\"C:\\Program Files (x86)\\Git\\bin\\git\"",
            "\"C:\\Program Files\\Git\\bin\\git\"")[test][1]
    }
} 
```

然后我尝试使用`system`：

```
system(paste(gitpath, "--version"))

> system(paste(gitpath, "--version"))
git version 1.7.11.msysgit.1 
```

看起来不错。但后来我在一个真正的代码块上尝试它：

```
cmd1 <- paste(gitpath, paste0("curl -u '", user, ":", password, 
    "' https://api.github.com/user/repos -d '{\"name\":\"", repo, "\"}'"))

system(cmd1) 
```

并得到消息：

```
> system(cmd1)
git: 'curl' is not a git command. See 'git --help'.

Did you mean this?
    pull
Warning message:
running command '"C:\Program Files (x86)\Git\bin\git" curl -u ' trinker : PASSWORD ' https://api.github.com/user/repos -d '{"name":" three "}'' had status 1 
```

如何运行此命令：

`curl -u 'USER:PASS' https://api.github.com/user/repos -d '{"name":"REPO"}'` 从控制台。

我还尝试在不先将 git 放在前面的情况下运行。我目前在win 7机器上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:00:16.300

在我看来，您似乎正在尝试将 curl 作为 git 命令运行，`system("git curl")`这显然是行不通的。我认为您需要以类似于您对上面的 Git 可执行文件所做的方式在 Windows 上找到 curl 二进制文件的安装路径。在 Mac OS X 上，您可以像这样运行命令...

```
system("curl -u \'USER:PASS\' https://api.github.com/user/repos -d \'{\"name\":\"REPO\"}\'") 
```

记住要转义字符串中的多余引号。

我猜你甚至可以只下载 curl 的编译二进制文件并从下载位置运行它？我无法在工作中使用我的 Win7 机器来测试复制和粘贴的运行，但你明白了......

```
url <- "http://curl.askapache.com/download/curl-7.23.1-win64-ssl-sspi.zip"
tmp <- tempfile( fileext = ".zip" )
download.file(url,tmp)
unzip(tmp)
system( paste0( tempdir(),"/curl", " -u \'USER:PASS\' https://api.github.com/user/repos -d \'{\"name\":\"REPO\"}\'") ) 
```

# php - 用php从返回的数组中剪切内容

> ID：15034472
> 
> 赞同：0
> 
> 时间：2013-02-22T22:44:41.117
> 
> 标签：php, arrays, explode

我试图从它拉回的 RBL 数据中删除结果。

这是代码。

```
<?
$ips = file("list.inc");
foreach($ips as $ip)
{
$rblurl = 'http://rbl-check.org/rbl_api.php?ipaddress=' . trim($ip);
$boom = fopen($rblurl, "r");
$rbl = stream_get_contents($boom);
echo "</br>";
$data = explode(";",$rbl);
print "<pre>";
print_r($data[0]);
print "</pre>";
echo "</br>";
//fclose($boom);
}
?> 
```

这就是结果。

```
emailbasura;bl.emailbasura.org;nowebsite;notlisted
Sorbs;zombie.dnsbl.sorbs.net;nowebsite;notlisted
msrbl;combined.rbl.msrbl.net;nowebsite;notlisted
nixspam;ix.dnsbl.manitu.net;nowebsite;notlisted
Spamcop;bl.spamcop.net;nowebsite;notlisted 
```

我正在尝试剪切第一部分和最后一部分，所以它只显示这个。

```
emailbasura notlisted
Sorbs notlisted
msrbl notlisted
nixspam notlisted
Spamcop notlisted 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:49:11.237

首先，您需要通过换行符来分解数据，而不仅仅是分隔符：

```
$data = explode("\n",$rbl); 
```

完成后，您只需回显数据：

```
foreach($data as $item) {
  $item = explode(';',$item);
  echo $item[0].' '.$item[3];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:53:01.317

```
foreach($data as $d) 
{
  $arr_data = explode(';',$d);
  $first_data = $arr_data[0];
  $last_data =  $arr_data[3];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:54:12.777

在这里更改

```
print "<pre>";
print_r($data[0]);
print "</pre>" 
```

作为

```
print "<pre>";
$spl = split(';', $data[0]);
echo $spl[0] . $spl[3];
print "<pre>"; 
```

# c++ - 使用按位运算符的宏的语法错误

> ID：15034479
> 
> 赞同：0
> 
> 时间：2013-02-22T22:45:33.287
> 
> 标签：c++, macros, bit-manipulation

所以我写了一个使用 XOR 位运算符交换两个数字的宏。使用 XOR 门交换数字的算法是众所周知的（即 a ^= b；b ^= a；a ^= b；），但在调用宏时我不断收到语法错误。它说它期望某个地方有一个分号。

确切的错误：

```
Line 73: error C2146: syntax error : missing ';' before identifier 'a' 
```

这是我的程序遇到问题的文件。

```
#define swapNumbers(x, y, z) z = x, x = y, y = z;
#define swapStrings(str1, str2, str3)  str3 = str1, str1 = str2, str2 = str3;
#define swapUsingXOR (a, b) a = a ^ b, b = b ^ a, a = a ^ b;

#include <iostream>
#include "protocol.h"
#include <string>

void PrintMenu()
{
std::cout << "\n\nChapter 16 -- Learn By Doings " << std::endl;
std::cout << "\n1\. Learn By Doing 16.4 " << std::endl;
std::cout << "2\. Learn By Doing 16.5 " << std::endl;
std::cout << "3\. Learn By Doing 16.6 " << std::endl;
std::cout << "4\. Exit " << std::endl;
NewLine();
}

void GetMenuChoice(int &menuChoice)
{
std::cin >> menuChoice;
}

void ExecuteMenuChoice(int &menuChoice)
{
switch(menuChoice)
{
case 1:
    {
        //Learn By Doing 16.4

        //Swap two numbers
        int x = 10;
        int y = 20;
        int z = 30;

        std::cout << "\nBefore swapping x is " << x << " and y is " << y << std::endl;
        swapNumbers(x, y, z);
        std::cout << "After swapping x is " << x << " and y is " << y << std::endl; 
        NewLine();

        //Swap two cStrings
        char * firstName = "Magnus";
        char * lastName = "Carlsen";
        char * tempName = "GOAT";

        std::cout << "\nBefore swapping, first name is " << firstName << " and last name is " << lastName << std::endl;
        swapStrings(firstName, lastName, tempName);
        std::cout << "After swapping, first name is " << firstName << " and last name is " << lastName << std::endl;

    }
    break;
case 2:
    //Learn By Doing 16.5
    {

    int x = 0;

    //Check if number is power of two
    std::cout << "\nEnter number: " << std::endl;
    std::cin >> x;

    NewLine();
    std::cout << ChangeBoolToString(isPowerOfTwo(x));

    //Swap numbers using bitwise operations
    NewLine();
    int a = 666;
    int b = 777;

    std::cout << "\n\nBefore swapping a is " << a << " and b is " << b << std::endl;
    swapUsingXOR(a, b);
    std::cout << "After swapping a is " << a << " and b is " << b << std::endl;

    }
    break;
case 3:
    //Learn By Doing 16.6

    break;
case 4:
    //Exit
    NewLine();

    break;
default:
    std::cout << "Invalid input.  Please enter a number between 1 and 4\. " << std::endl;

}
}

void NewLine()
{
std::cout << ' ' << std::endl;
}

bool isPowerOfTwo(int binaryNumber)
{
while(((binaryNumber & 1) == 0) && binaryNumber > 1)
    binaryNumber >>= 1;

if(binaryNumber == 1)
    return true;
else
    return false;
}

char * ChangeBoolToString(bool function)
{
if(function == true)
    return "Your number is a power of two! ";
else
    return "Your number is not a power of two. ";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:48:46.103

您的宏定义中有一个额外的空间：

```
#define swapUsingXOR (a, b) a = a ^ b, b = b ^ a, a = a ^ b;
                    ^
                    |--- get rid of this space 
```

分号也不是必需的。您可能想要添加一些大括号或使用 do/while(0) 技巧使您的宏表现得更像简单的语句。

如果您是初学者（看起来您是），您可能想查看[clang](http://clang.llvm.org)。在大多数情况下，它会产生比大多数其他编译器更有用的错误消息。例如，一个带有你的宏的测试程序会给出这些消息，这使得发生了什么非常清楚：

```
example.c:14:5: warning: expression result unused [-Wunused-value]
    swapUsingXOR(a, b);
    ^~~~~~~~~~~~
example.c:5:23: note: expanded from macro 'swapUsingXOR'
#define swapUsingXOR (a, b) a = a ^ b, b = b ^ a, a = a ^ b;
                      ^
example.c:14:5: error: expected ';' after expression
    swapUsingXOR(a, b);
    ^
example.c:5:29: note: expanded from macro 'swapUsingXOR'
#define swapUsingXOR (a, b) a = a ^ b, b = b ^ a, a = a ^ b;
                            ^
example.c:14:18: warning: expression result unused [-Wunused-value]
    swapUsingXOR(a, b);
                 ^
example.c:14:5: warning: expression result unused [-Wunused-value]
    swapUsingXOR(a, b);
    ^~~~~~~~~~~~
example.c:5:26: note: expanded from macro 'swapUsingXOR'
#define swapUsingXOR (a, b) a = a ^ b, b = b ^ a, a = a ^ b;
                         ^
example.c:14:21: warning: expression result unused [-Wunused-value]
    swapUsingXOR(a, b);
                    ^
4 warnings and 1 error generated. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:57:35.963

这*太可怕*了。不要做。在宏中多次引用*相同的参数是灾难的根源......告诉我你的代码对此做了什么：*

```
int *f1(); // function that returns an int pointer.
int *f2(); // function that returns an int pointer.
int x = 666;

// Quick... how many times is each function called? And is that 
// what the programmer expects based on the regular semantics of
// of the language? Are you sure it's safe to call those functions
// multiple times? Will the result be what you think it's going to be?
swapUsingXOR(*f1(), *f2());

// And what happens here?
swapUsingXOR(x, x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:58:21.620

阅读`#define`更多...

`#define`正如你所知道的宏，但是你把分号“;” 在那里！请记住，当您使用时`#define`，基本上只是为预处理器添加查找和替换注释......好吧，替换`swapNumbers(x, y, z)`会`z = x, x = y, y = z;`导致问题......它保留分号“;”，并出错......

例如，它可以将分号放在不应该放在的地方，并`swapNumbers(x, y, z);`在最后制作两个！

[在这里](http://www.cplusplus.com/doc/tutorial/preprocessor/)阅读更多:)

# python - Reportlab 构建表不重复行

> ID：15034480
> 
> 赞同：1
> 
> 时间：2013-02-22T22:45:38.410
> 
> 标签：python, reportlab

我是reportlab的新手，到目前为止我很高兴，但我遇到了一个我不知道如何解决的情况。我正在尝试使用子表构建一个表，因为我的行具有不同的列数，所以基本上我正在尝试构建一个表，其中每行本身就是一个表。这似乎可行，因为 Table 构造函数成功完成并返回一个有效的表。不过，奇怪的是，当我尝试构建文档（SimpleDocTemplate 实例）时，出现“表实例没有属性 ' **len** '”错误。我的报告生成代码是：

```
 #create the document and data list
    doc = TimeEntryReportDocTemplate(response)
    elements = []

    #add the Sustainable Development and Construction header
    elements.append(add_sdc())

    #add the header rows
    elements.append(add_header(start_date, end_date, department, unit, employee, project_name))

    #create the column header table
    t = create_column_header_table(grouping_type)
    results = []
    results.append(t)
    #elements.append(t)

    #get the grouped line item tables for inclusion
    #elements = tabulate_line_items(line_items, grouping_type, elements)
    results = tabulate_line_items(line_items, grouping_type, results)

    final_table = Table(results, repeatRows=1)
    elements.append(final_table)

    doc.build(elements) 
```

print final_table 实际上显示了包装在 Table(...data...) # end table 中的数据。为什么当我尝试构建它时它不起作用？我已经测试了我的每个返回表格的方法，它们都有效。如果我只是使用“元素”变量构建文档，则文档构建良好。我只需要在每个页面上重复元素集合中的第一行，这就是我尝试构建表格的原因。有没有更简单的方法？

# javascript - 如何重建 Math.random() 的种子？

> ID：15034485
> 
> 赞同：0
> 
> 时间：2013-02-22T22:46:16.333
> 
> 标签：javascript, random, cryptography

我知道将 Math.random() 用于加密目的是不安全的。我需要一个重构 javascript 中使用的 Math.random() 函数的示例代码来生成随机数。例如，如果我有一个由 Math.random() 生成的随机数，我怎样才能知道种子是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:31:15.970

看源头。在这种情况下，它位于[mozilla/js/src/jsmath.cpp 中](http://mxr.mozilla.org/mozilla-central/source/js/src/jsmath.cpp#525)：

```
static const uint64_t RNG_MULTIPLIER = 0x5DEECE66DLL;
static const uint64_t RNG_ADDEND = 0xBLL;
static const uint64_t RNG_MASK = (1LL << 48) - 1;
static const double RNG_DSCALE = double(1LL << 53);

/*
 * Math.random() support, lifted from java.util.Random.java.
 */

...

extern uint64_t random_next(uint64_t *rngState, int bits)
{
    uint64_t nextstate = *rngState * RNG_MULTIPLIER;
    nextstate += RNG_ADDEND;
    nextstate &= RNG_MASK;
    *rngState = nextstate;
    return nextstate >> (48 - bits);
}

static inline double random_nextDouble(JSContext *cx)
{
    uint64_t *rng = &cx->compartment->rngState;
    return double((random_next(rng, 26) << 27) + random_next(rng, 27)) / RNG_DSCALE;
} 
```

所以，

1.  称呼`Math.random()`
2.  乘以 2 ^(53)得到一个整数`n`（您需要明确使用 uint64_t）
3.  将其拆分为 RNG 输出的（高位）： top 26 bits`n>>27`和 bottom 27 bits `n&((1<<27)-1)`。
4.  27 位可以来自*第*一个或第二个 RNG 输出（如 C，我不认为 C++ 对此处的评估顺序有任何保证）。所以...
    *   迭代 2 ^(21 个)可能的低位。
    *   看看你是否可以通过向前*或*向后运行 RNG 到达那里。
    *   如果是这样，则将该数字作为候选输出。

由于 RNG 的性质，可能有多个候选人。

向后运行 RNG 对读者来说是一个练习（您只需计算 0x5DEECE66D 模 2 ^(48)的乘法逆）。或者，您可以取 26 位数字并猜测所有 2 ^(22 个)可能的输入。

# ruby-on-rails - 如何根据多个条件查找嵌入的 Mongoid 文档？

> ID：15034489
> 
> 赞同：3
> 
> 时间：2013-02-22T22:47:10.320
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个包含嵌入文档的 Mongoid 文档。我想搜索所有顶级文档，其中有一个具有多个条件的嵌入式文档。

```
TopDoc.where('inside.first_name' => 'Bob', 'inside.last_name' => 'Jones') 
```

但在我看来，这与 Bob Wever 和 Paul Jones 的 TopDoc 相匹配，这是错误的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:31:50.270

您需要使用[$elemMatch](http://docs.mongodb.org/manual/reference/operator/elemMatch/#_S_elemMatch)。使用 Mongoid，以下行应该可以解决问题

```
TopDoc.elem_match(inside: { first_name: 'Bob', last_name: 'Jones' }) 
```

这相当于：

```
TopDoc.where(:inside.elem_match => { first_name: 'Bob', last_name: 'Jones'}) 
```

# macos - 启动服务器后退出 node.js 的正确方法是什么？

> ID：15034490
> 
> 赞同：2
> 
> 时间：2013-02-22T22:47:33.723
> 
> 标签：macos, node.js

我正在开发一个服务器端 node.js 应用程序。问题是，在服务器开始使用后`sudo node myfile.js`（没有 sudo 它无法访问端口 80），除了`sudo killall node`从另一个命令提示符窗口使用之外，我无法阻止它，这似乎是错误的，因为它很费力并且不会激活事件`process.on("exit",callback)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:21:40.727

对于测试，您可以在程序中放置一个终止开关，例如：

```
if(req.url=="/shutdown"){
    res.end("Shutting down server.");
    process.exit(0);
} 
```

然后你只需要访问`http://localhost/shutdown`才能关闭服务器。您甚至可以创建一个 url 来为您启动一个新实例，只是不要忘记首先释放所需的资源，如文件和正在使用的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:55:35.250

添加 -9 杀死应该可以解决问题。

```
ps aux | grep node
kill -9 PID 
```

# java - 搜索引擎如何处理分词和索引

> ID：15034492
> 
> 赞同：2
> 
> 时间：2013-02-22T22:47:33.697
> 
> 标签：java, search, indexing, search-engine, text-segmentation

我正在考虑实现一个小型搜索引擎。但是我不确定搜索引擎如何进行分词。

我的想法是这样的：

1.  建立一个包含流行词的词典
2.  对于 html 文档中的每个句子，用空格分隔单词
3.  进行线性搜索以检查某些单词是否在字典中。如果是，这些是该页面的关键字。
4.  让关键字是数据库表。将 url 存储在所有对应的关键字表中

所以假设我们有一句话“我邀请她去市中心附近的当地餐馆吃饭”。不包括停止词的词是：{invited, Dinner, local, restaurant, Downtown}

字典只包含词{邀请、晚餐、餐厅}

以下是问题：

1.  字典外的词怎么处理？（例如市中心）
2.  如何处理过去时、复数形式等？我应该将所有带有特定前缀的单词存储在一起吗？（例如“邀请”将包含“邀请、邀请、邀请...”） 那么像“后退”和“后退”这样的词呢？
3.  如何处理“本地餐厅”之类的查询？简单地将“local”和“restaurant”的结果结合起来似乎不是一个好的解决方案，而将“local restaurant”存储为另一个关键字表可能会导致更多的重复，给分词带来困难。
4.  有什么比我的想法更好的方法吗？

欢迎任何意见。谢谢！

# php - 正则表达式匹配 if...else 语句？

> ID：15034494
> 
> 赞同：1
> 
> 时间：2013-02-22T22:47:38.680
> 
> 标签：php, regex

我需要制作一个匹配“if”结构的正则表达式。例如：

```
if(whatever) {  } else { adsffdsa } else if() { } 
```

代码块和表达式是否有效无关紧要，只要结构正确即可。我到了这一点：

```
/^if\s*\((.*?)\)\s*{(.*?)}\s*// 
```

但是，当我尝试继续匹配 else 和 else 时，如果正则表达式停止工作。我尝试了这两件事：

```
/^if\s*\((.*?)\)\s*{(.*?)}\s*else?/
/^if\s*\((.*?)\)\s*{(.*?)}\s*(else|else\s*if(\s*))?/ 
```

如果有的话，我怎样才能让我的正则表达式匹配 else 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:01:14.403

给你，这应该让你指向正确的方向，但你做得越复杂，它就会变得丑陋。

```
/^if\s*\((.*?)\)\s*{(.*?)}(\s*(else|else\s+if\s*\((.*?)\))\s*{(.*?)})*/ 
```

希望能帮助到你

它为我匹配了这个，所以它应该匹配大多数情况（只要它在块周围的任何地方都没有评论）：

```
if(whatever) {  } else { adsffdsa } else if() { }
else if() {} 
```

# java - 基于 Apache CXF 构建的 WebService Endpoint 项目未在 JBoss 中部署

> ID：15034497
> 
> 赞同：0
> 
> 时间：2013-02-22T22:48:00.873
> 
> 标签：java, web-services, tomcat, cxf, jboss6.x

我有基于 Apache CXF 构建的 WebService 端点项目（服务项目），当我使用 Tomcat 和 VMware Fabric Server（带有 Spring STS IDE）进行测试时，它工作正常。我可以启动并运行 WSDL。但是当我在 Jboss 6 中部署相同的项目时，我收到以下错误。看起来 JBoss 有自己的 CXF 实现。那怎么解决这个问题？？？需要进行一些配置更改吗？

我试过了，但也没有用 --> [http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-JBoss](http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-JBoss)

我得到的错误：

```
17:25:25,829 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service jboss.deployment.subunit."my-ear-ws-endpoint.ear"."my-web-ws-endpoint-1.0.0-BUILD-SNAPSHOT.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."my-ear-ws-endpoint.ear"."my-web-ws-endpoint-1.0.0-BUILD-SNAPSHOT.war".INSTALL: JBAS018733: Failed to process phase INSTALL of subdeployment "my-web-ws-endpoint-1.0.0-BUILD-SNAPSHOT.war" of deployment "afa-ear-ws-endpoint.ear"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:123) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_13]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_13]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_13]
Caused by: java.lang.RuntimeException: Cannot publish wsdl to: C:\jboss-eap-6.0\standalone\data\wsdl\afa-ear-ws-endpoint.ear\afa-web-ws-endpoint-1.0.0-BUILD-SNAPSHOT.war\SendACAFormSubmissionStatusDetailRequestService.wsdl
    at org.jboss.wsf.stack.cxf.deployment.WSDLFilePublisher.publishWsdlFiles(WSDLFilePublisher.java:107)
    at org.jboss.wsf.stack.cxf.deployment.EndpointImpl.publishContractToFilesystem(EndpointImpl.java:222)
    at org.jboss.wsf.stack.cxf.deployment.EndpointImpl.doPublish(EndpointImpl.java:93)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:509)
    at org.jboss.wsf.stack.cxf.configuration.NonSpringBusHolder.configure(NonSpringBusHolder.java:117)
    at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.startDeploymentBus(BusDeploymentAspect.java:113)
    at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.start(BusDeploymentAspect.java:66)
    at org.jboss.as.webservices.deployers.AspectDeploymentProcessor.deploy(AspectDeploymentProcessor.java:74)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:116) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
    ... 5 more 
```

# ruby-on-rails - 通过 a 查询模型有很多通过关联

> ID：15034501
> 
> 赞同：0
> 
> 时间：2013-02-22T22:48:24.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我需要通过关联模型查询我的模型。

伪代码：@drinks = Drink.where(drink.ingredients ARE IN cabinet.ingredients)

饮料模型

```
class Drink < ActiveRecord::Base
  attr_accessible :name

  has_many :recipe_steps, :dependent => :destroy
  has_many :ingredients, through: :recipe_steps
end 
```

成分模型

```
class Ingredient < ActiveRecord::Base
  attr_accessible :name

  has_many :recipe_steps
  has_many :drinks, through: :recipe_steps
  has_many :cabinet_ingredients
  belongs_to :cabinet
end 
```

用户模型

```
class User < ActiveRecord::Base

  has_one :cabinet
end 
```

编辑：正如我所建议的那样

```
Drink.joins(ingredients: :cabinet_ingredients) 
```

但是，当我从我的柜子和/或多个用户中喝一种含有 2 种成分的饮料时，它会返回同一种饮料的多条记录。

我只需要退回一份饮料的记录。另外，我只需要退回所有成分在柜子中匹配的饮料

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:13:40.863

这是我将如何做到的。如果所有成分都存在于给定橱柜的成分中，则选择一种饮料。我知道它`Drink.where`不像你的伪代码那样使用，但它会完成工作。

```
Drink.all.select{|drink| drink.ingredients.all?{|drink_ingredient| cabinet.ingredients.include?(drink_ingredient)}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:55:44.837

试试这个。

```
Drink.joins(ingrediants: :cabinet_ingredients).uniq 
```

# python - 使用python在大文本文件中搜索字符串的快速方法

> ID：15034504
> 
> 赞同：1
> 
> 时间：2013-02-22T22:48:43.953
> 
> 标签：python, regex, trie

这就是我现在的情况：

*   我有一个 2.5MB 的文本文件，包含大约 250k 个字符串，按字母顺序排序
*   每个字符串都是唯一的
*   我不需要修改文本文件中的条目：一旦加载了文本文件，它就永远不会被编辑
*   文本文件在开始时加载，然后我只需要通过它搜索字符串

最后一点是问题。实际上我需要搜索字符串的完全匹配和部分匹配。我写的算法只是涉及使用正则表达式，并结合了一些尝试使过程更快：例如，我将识别字母表中单数字母的字典索引硬编码到我的脚本中，然后拆分大文本文件虚构成 26 个小字典。那完全没用，脚本仍然非常慢。浏览了这里的一些帖子，我被说服尝试 mmap：但是在给定正则表达式的情况下，找到所有部分匹配项看起来毫无用处。最终我得出结论，尝试可以解决我的问题，尽管我几乎不知道这是什么。我应该尝试吗？如果是这样，我应该如何继续在 python 中创建 trie？[marisa-trie 模块好吗？](https://github.com/kmike/marisa-trie)感谢大家

编辑：通过“部分匹配”，我的意思是我有一个字符串的前缀。我不需要在最后或中间进行匹配，只需要在开始时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:15:02.687

最简单最快的解决方案：

```
#!/usr/bin/env python

d = {}

# open your file here, i'm using /etc/hosts as an example...
f = open("/etc/hosts","r")
for line in f:
    line = line.rstrip()
    l = len(line)+1
    for i in xrange(1,l):
        d[line[:i]] = True
f.close()

while True:
    w = raw_input('> ')
    if not w:
        break

    if w in d:
        print "match found", w 
```

这里稍微复杂一些，但内存效率更高：

```
#!/usr/bin/env python

d = []

def binary_search(a, x, lo=0, hi=None):
    if hi is None:
        hi = len(a)
    while lo < hi:
        mid = (lo+hi)//2
        midval = a[mid]
        if midval < x:
            lo = mid+1
        elif midval > x:
            hi = mid
        else:
            return mid
    return -1

f = open("/etc/hosts","r")
for line in f:
    line=line.rstrip()
    l = len(line)+1
    for i in xrange(1,l):
        x = hash(line[:i])
        d.append(x)
f.close()

d.sort()

while True:
    w = raw_input('> ')
    if not w:
        break

    if binary_search(d, hash(w)) != -1:
        print "match found", w 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:15:21.357

由于文件已经排序和读入，您可以对其使用二进制搜索，而无需求助于任何花哨的数据结构。Python 有一个内置的二分搜索函数[bisect.bisect_left`](http://docs.python.org/2/library/bisect.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:12:49.357

使用[trie](http://en.wikipedia.org/wiki/Trie)。

```
#dictionary is a list of words
def parse_dictionary(dictionary):
    dictionary_trie = {}
    for word in dictionary:
        tmp_trie = dictionary_trie
        for letter in word:
            if letter not in tmp_trie:
                tmp_trie[letter] = {}
            if 'words' not in tmp_trie[letter]:
                tmp_trie[letter]['words'] = []

            tmp_trie[letter]['words'].append(word)
            tmp_trie = tmp_trie[letter]
    return dictionary_trie

def matches(substring, trie):
    d = trie
    for letter in substring:
        try:
            d = d[letter]
        except KeyError:
            return []
    return d['words'] 
```

使用示例：

```
>>> import pprint
>>> dictionary = ['test', 'testing', 'hello', 'world', 'hai']
>>> trie = parse_dictionary(dictionary)
>>> pprint.pprint(trie)
{'h': {'a': {'i': {'words': ['hai']}, 'words': ['hai']},
       'e': {'l': {'l': {'o': {'words': ['hello']}, 'words': ['hello']},
                   'words': ['hello']},
             'words': ['hello']},
       'words': ['hello', 'hai']},
 't': {'e': {'s': {'t': {'i': {'n': {'g': {'words': ['testing']},
                                     'words': ['testing']},
                               'words': ['testing']},
                         'words': ['test', 'testing']},
                   'words': ['test', 'testing']},
             'words': ['test', 'testing']},
       'words': ['test', 'testing']},
 'w': {'o': {'r': {'l': {'d': {'words': ['world']}, 'words': ['world']},
                   'words': ['world']},
             'words': ['world']},
       'words': ['world']}}
>>> matches('h', trie)
['hello', 'hai']
>>> matches('he', trie)
['hello']
>>> matches('asd', trie)
[]
>>> matches('test', trie)
['test', 'testing']
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:37:09.637

So to explain arainchi's very nice answer, make a dictionary with an entry for every line in your file. Then you can match your search string against the names of those entries. Dictionaries are really handy for this kind of searching.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T23:33:03.433

使用 trie 仍然需要您构建一个 trie，它是 O(n) 来迭代整个文件——利用排序将使其成为 O(log_2 n)。因此，这个更快的解决方案将使用二进制搜索（见下文）。

此解决方案仍然需要您阅读整个文件。在更快的解决方案中，您可以预处理文件并填充所有行，使它们的长度相同（或在文件中构建某种索引结构，以使查找列表中间可行） - - 然后寻找文件的中间会带你到列表的中间。“更快”的解决方案可能只需要非常非常大的文件（千兆字节或数百兆字节）。您将他们与二进制搜索结合起来。

可能，如果文件系统支持[稀疏文件](http://en.wikipedia.org/wiki/Sparse_file)——执行上述填充方案不会增加磁盘上使用的文件实际块。

然后，此时，您可能正在接近 b-tree 或 b+tree 实现以提高索引效率。所以你可以使用[b-tree library](http://code.liw.fi/larch/docs/)。

像这样的东西：

```
import bisect

entries = ["a", "b", "c", "cc", "cd", "ce", "d", "e", "f" ]

def find_matches(ls, m):

    x = len(ls) / 2
    match_index = -1

    index = bisect.bisect_left(ls, m)
    matches = []

    while ls[index].startswith(m):
        matches.append(ls[index])
        index += 1

    return matches

print find_matches(entries, "c") 
```

输出：

```
>>> ['c', 'cc', 'cd', 'ce'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T23:14:43.963

您可以制作一个列表，让每一行成为列表的一个元素并进行二进制搜索。

# java - 封装所有原语的 Java 对象——在 OutputStreams 中很有用

> ID：15034507
> 
> 赞同：0
> 
> 时间：2013-02-22T22:48:48.380
> 
> 标签：java, class, standards, abstract-class, primitive

我有一个接收二进制数据的程序，根据它的标题，代表 a `float`, `int`, `double`, `char`,`string`等。

在程序中，我利用`ByteBuffer`类来获取它`byte[]`，然后使用`getFloat()`or`getInt()`等​​方法将内容提取成可用的形式。

我想有效地传递值`getFloat()`或`getInt()`传递值`System.out.println()`，而不使用 switch 或 if/else 语句来实现所有可能性。

由于`println()`可以接受 a或任何东西`Float`，如果有一个我可以使用的 Java 对象，我可以将数据填充到其中，而不管类型如何，然后将值返回到函数`Int`中，那就太好了。`getXXX()``println()`

唯一的问题是，我不知道有任何 Java 类可以做到这一点，而且我的 Google 搜索很枯燥。有谁知道一门课吗？

我想我可以写一个，但我尝试先用 Java 认证的方式做所有事情。

编辑：这是我当前代码的示例：

```
ByteBuffer buffer = ByteBuffer.wrap(dat.message);

if (dat.dataType.equalsIgnoreCase("float")) {

    System.out.println("Message: " + buffer.getFloat());

} else if (dat.dataType.equalsIgnoreCase("int")) {

    System.out.println("Message: " + buffer.getInt());

} else if (dat.dataType.equalsIgnoreCase("char")) {

    System.out.println("Message: " + buffer.getChar());

} else if (dat.dataType.equalsIgnoreCase("long")) {

    System.out.println("Message: " + buffer.getLong());

} else if (dat.dataType.equalsIgnoreCase("boolean")) {

    System.out.println("Message: " + buffer.get());

} else if (dat.dataType.equalsIgnoreCase("string")) {

    String str = new String(dat.message);
    System.out.println("Message: " + str);

} 
```

对我来说太丑了，Java必须有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:53:18.777

```
public Object getValue(Dat dat) {
    ByteBuffer buffer = ByteBuffer.wrap(dat.message);

    if (dat.dataType.equalsIgnoreCase("float")) {
        return buffer.getFloat();
    } else if (dat.dataType.equalsIgnoreCase("int")) {
        return buffer.getInt();
    } else if (dat.dataType.equalsIgnoreCase("char")) {
        return buffer.getChar();
    } else if (dat.dataType.equalsIgnoreCase("long")) {
        return buffer.getLong();
    } else if (dat.dataType.equalsIgnoreCase("boolean")) {
        return buffer.get() != 0;
    } else if (dat.dataType.equalsIgnoreCase("string")) {
        return new String(dat.message);
    }
}

// ...

System.out.println("Message: " + getValue(dat)); 
```

A`float`将被自动装箱为`Float`一个`Object`.
An`int`将自动装箱为 an `Integer`which is an `Object`。
等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:52:10.397

```
ByteBuffer buffer = ByteBuffer.wrap(dat.message);
System.out.println("Message: " + buffer); 
```

Java 中的所有对象都是继承自 Object 的某个类的实例。既然`println`接受`Object`了s，就不用担心传入的是什么类型了。

* * *

编辑：你能提供一份声明`dat`吗？

# python - Django 在服务器上返回 FieldDoesNotExist 错误但在 shell 中通过正常

> ID：15034509
> 
> 赞同：3
> 
> 时间：2013-02-22T22:48:52.637
> 
> 标签：python, django, django-models, python-2.6

我正在尝试使用一组特定的 FK 字段来获取 ValuesQuerySet，这些字段跨越多个表之间的关系。当我在 django shell 中运行这个查询时，甚至没有打嗝。但是当在开发服务器上运行它时，Django 在这些 FK 字段中的一些（但不是全部）上返回 FieldDoesNotExist 错误。

以下是相关模型（我使用的是标准 Django User 模型）：

```
class Profile(models.Model):

    user = models.OneToOneField(User)
    first_name = models.CharField(max_length=150,null=True)
    middle_name = models.CharField(max_length=150,null=True)
    last_name = models.CharField(max_length=150,null=True)
    headline = models.TextField(null=True)
    connections = models.ManyToManyField('self',through="Connection",symmetrical=False,related_name="connections+")
    status = models.CharField(max_length=15,default="active")

class Position(models.Model):

    entity = models.ForeignKey(Entity,related_name="positions")
    person = models.ForeignKey(User,related_name="positions")
    careers = models.ManyToManyField("Career",related_name="positions")
    title = models.CharField(max_length=150,null=True)
    summary = models.CharField(max_length=450,null=True)
    description = models.TextField(null=True)
    current = models.BooleanField(default=True)
    start_date = models.DateField(null=True)
    end_date = models.DateField(null=True)
    type = models.CharField(max_length=450,null=True)
    degree = models.CharField(max_length=450,null=True)
    field = models.CharField(max_length=450,null=True)
    status = models.CharField(max_length=15,default="active")
    created = models.DateTimeField(auto_now_add=True, null=True)
    updated = models.DateTimeField(auto_now=True, null=True)

class Entity(models.Model):

    name = models.CharField(max_length=450)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    status = models.CharField(max_length=15,default="active")

class Picture(models.Model):

    person = models.ForeignKey(Profile,related_name="pictures")
    pic = models.ImageField(max_length=450,upload_to=_get_picture_path)
    source = models.CharField(max_length=45,null=True)
    description = models.TextField(null=True)
    license = models.TextField(null=True)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    status = models.CharField(max_length=15,default="active") 
```

在一个视图中，我运行两个稍微不同的查询来获取从这些连接的表中提取信息的用户切片（一个限制为一组用户 ID，`user_ids`）：

```
some_people = User.objects.values('id','profile__headline','profile__first_name','profile__last_name','profile__pictures__pic','positions__entity__id','positions__entity__name').filter(id__in=user_ids).annotate(no_of_pos=Count('positions__id')).order_by('-no_of_pos')

all_people = User.objects.select_related('positions','profile').values('id','profile__headline','profile__first_name','profile__last_name','profile__pictures__pic','positions__entity__id','positions__entity__name').annotate(no_of_pos=Count('positions__id')).order_by('-no_of_pos') 
```

这些功能几乎相同，一个仅限于一组预定义的用户（由 id 标识），另一个则不是。我知道这些结果会返回某些信息的重复项，但我会在稍后的步骤中将这些信息组合成稍微不同的模板字典

如果我在 shell 中运行这些查询，则没有问题。查询不需要任何时间，并且所有字段都已正确评估。但是，开发服务器返回此错误：

```
User has no field named 'headline' 
```

只要包含“profile_headline *”、* “ profile_pictures_pic ”、“ positions_entity_name *”，它就会返回类似的错误**。这个错误对我没有任何意义。这些字段确实存在，但不存在于用户对象上——并且它们永远不会在用户对象上调用。另外，为什么只有这些字段？“profile* _last_name”、“profile__first_name”和“positions_ *entity* _id”应该都属于同一个bin，在我看来。

请帮我解决这个问题——有什么想法吗？

我在 Mac OS X 上运行 Django 1.4.2 和 Python 2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T05:25:50.817

发生的情况是您在开发服务器上拥有的模型定义与您拥有的物理数据库模式不匹配。可能是因为您添加了新字段但尚未迁移它们。

要检查，请运行`./manage.py migrate --list`. 如果是这种情况，开发服务器上的迁移应该可以解决问题。

# facebook - 如何让我的 Facebook 应用程序在右上角显示某些内容？

> ID：15034513
> 
> 赞同：0
> 
> 时间：2013-02-22T22:49:19.510
> 
> 标签：facebook, notifications

这是我的 Facebook 页面右上角的样子：

![Facebook主页的右上角](../Images/a29d1c6d4fa6ce6dec3321e39f8816e1.png)

“创建事件”下的区域叫什么？我看到某些应用程序可以将消息放在那里，就像您在“4 个请求”中看到的那样。我怎样才能让我的应用程序放一些东西。

我也在那里看到生日通知。当我点击通知时，会弹出一个框，我可以在其中发布到朋友的墙上。是否可以让我的应用程序也这样做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:56:00.080

这是[应用程序请求](https://developers.facebook.com/docs/concepts/requests/)显示的地方。当应用程序/用户向您发送应用程序请求时，这就是 Facebook 放置它的地方

请提供更多信息，例如您使用的编程语言以及这是您的第一个应用程序 - 这可以帮助您朝着正确的方向前进

# jquery - 如何使用jquery制作不同的项目列表

> ID：15034519
> 
> 赞同：-5
> 
> 时间：2013-02-22T22:50:11.967
> 
> 标签：jquery, html, css

它工作但.. **href=**不起作用，我不知道为什么。并且当鼠标悬停在项目上时..我无法单击按钮，也无法单击头像？..感谢您的回答。

[您可以从此处查看示例。](http://jsbin.com/ayodas/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:13:17.950

正如上面提到的评论，你的描述不是很有帮助。但是我已经从您上面的代码中创建了一个[jsFiddle](http://jsfiddle.net/RA6vQ/)，这似乎运行良好。我唯一改变的事情如下。

在您的`on`触发器上，您已定位`".kisiliste<?=$sayfa?> .kisi"`...我只能假设`.kisiliste<?=$sayfa?>`引用了您未包含的 html 元素。所以我把它改成了简单`.kisi`的。

我还在你和动画`;`的末尾添加了一个。除此之外，它工作正常。`fadeIn``fadeOut`

如果他们有帮助，请不要忘记勾选答案。

**编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------**

问题与您的CSS有关。[请参阅此固定链接。](http://jsbin.com/ayodas/4/edit)

我改变了两个元素。

从`#kisiliste .kisi .sabitle{}`我删除`z-index:-1`

并添加了块显示`#kisiliste .kisi .sabitle .avatar a{display:block}`

这似乎已经解决了悬停问题和头像点击的问题。

# c++ - 通过模板跟踪编译器错误

> ID：15034522
> 
> 赞同：2
> 
> 时间：2013-02-22T22:50:24.450
> 
> 标签：c++, templates

此代码段的最后一行有错字（缺少限定符 ::type）。

```
template<bool ci> struct comp        { typedef ci_compare_string      type; };
template<       > struct comp<false> { typedef std::less<std::string> type; };

template <typename T, bool ci = true>  //map w str keys, case sensitive option
struct mapx : std::map<std::string, T, typename comp<ci> > {};  // oops, should be comp_<ci>::type 
```

VS 2008 编译器在 std::map 源代码行报告错误，如下所示。消息是“术语不评估为采用 2 个参数的函数”。

```
...
mapped_type& operator[](const key_type& _Keyval)
    {   // find element matching _Keyval or insert with default mapped
    iterator _Where = this->lower_bound(_Keyval);
    if (_Where == this->end()
        || this->comp(_Keyval, this->_Key(_Where._Mynode())))   <=== ERROR !!!!
        _Where = this->insert(_Where,
            value_type(_Keyval, mapped_type()));
    return ((*_Where).second);
    }
};
... 
```

所以最终我发现错误一定与比较器有关，然后我盯着看，直到我意识到我忘记输入“::type”。

我以前没有使用过多的 w 模板，并且想知道追溯像这样的编译器错误的正确方法。在这种情况下应该使用任何提示/技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:14:01.020

> 消息是“术语不评估为采用 2 个参数的函数”

在 Visual Studio 中，错误列表仅显示任何错误消息的第一行。它旨在提供易于浏览的错误摘要。一些错误消息很长，尤其是在涉及模板时。完整的错误消息可以在构建的输出窗口中找到。

当模板实例化期间发生错误时，编译器将打印检测到错误时它正在实例化的模板堆栈。例如，当我使用 Visual C++ 2012 编译您的代码片段时，它会打印以下错误（Visual C++ 2008 将打印类似的消息，尽管由于标准库实现的差异，它必然会有所不同）：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xtree(1792) : error C2064: term does not evaluate to a function taking 2 arguments
        C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xtree(1153) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::_Insert_nohint<std::pair<const _Kty,_Ty>&,std::_Tree_node<_Value_type,_Voidptr>*>(bool,_Valty,_Nodety)' being compiled
        with
        [
            _Ty1=std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<const std::string,int>>>>,
            _Ty2=bool,
            _Traits=std::_Tmap_traits<std::string,int,comp<true>,std::allocator<std::pair<const std::string,int>>,false>,
            _Kty=std::string,
            _Ty=int,
            _Value_type=std::pair<const std::string,int>,
            _Voidptr=void *,
            _Valty=std::pair<const std::string,int> &,
            _Nodety=std::_Tree_node<std::pair<const std::string,int>,void *> *
        ]
        C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xtree(1153) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::_Insert_nohint<std::pair<const _Kty,_Ty>&,std::_Tree_node<_Value_type,_Voidptr>*>(bool,_Valty,_Nodety)' being compiled
        with
        [
            _Ty1=std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<const std::string,int>>>>,
            _Ty2=bool,
            _Traits=std::_Tmap_traits<std::string,int,comp<true>,std::allocator<std::pair<const std::string,int>>,false>,
            _Kty=std::string,
            _Ty=int,
            _Value_type=std::pair<const std::string,int>,
            _Voidptr=void *,
            _Valty=std::pair<const std::string,int> &,
            _Nodety=std::_Tree_node<std::pair<const std::string,int>,void *> *
        ]
        stubby.cpp(12) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::insert<std::pair<const char *,int>>(_Valty &&)' being compiled
        with
        [
            _Ty1=std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<const std::string,int>>>>,
            _Ty2=bool,
            _Traits=std::_Tmap_traits<std::string,int,comp<true>,std::allocator<std::pair<const std::string,int>>,false>,
            _Valty=std::pair<const char *,int>
        ]
        stubby.cpp(12) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::insert<std::pair<const char *,int>>(_Valty &&)' being compiled
        with
        [
            _Ty1=std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<const std::string,int>>>>,
            _Ty2=bool,
            _Traits=std::_Tmap_traits<std::string,int,comp<true>,std::allocator<std::pair<const std::string,int>>,false>,
            _Valty=std::pair<const char *,int>
        ]
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xtree(1796) : error C2064: term does not evaluate to a function taking 2 arguments
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xtree(1817) : error C2064: term does not evaluate to a function taking 2 arguments 
```

现在，根据这些术语的任何定义，这仍然不是特别容易阅读或用户友好。但它确实向您显示了错误发生的位置。三个顶级错误发生在 的第 1792、1796 和 1817 行`<xtree>`，所有这些行都尝试使用比较器来比较两个参数。

# wpf - 从 WPF 应用程序加载非托管 C++ DLL 时遇到问题

> ID：15034524
> 
> 赞同：2
> 
> 时间：2013-02-22T22:50:41.903
> 
> 标签：wpf, dllimport, unmanaged, dllexport

首先，我要感谢任何阅读本文的人的时间！我是一个消息灵通的 C# 程序员，使用 WinForms，我正在尝试 WPF。我一直无法从我的 WPF 应用程序调用函数，所以我决定创建一个非常简单的示例项目来说明我的问题。在这个应用程序中，我正在创建一个 C++ Dll（使用 Visual Studio 2012 -> Visual C++ -> Win32 控制台应用程序 -> .DLL 项目）。在这个 DLL 中，我只是创建了一个返回 DWORD 的函数。我的 DLL 如下所示：

```
// mydll.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
extern "C" __declspec(dllexport) DWORD __cdecl init();

DWORD __cdecl init()
{
    return 0x1234;
} 
```

现在我还有一个 WPF 应用程序（使用 VS 2012），我只是尝试从上述 DLL 调用和打印函数的结果。我的 WPF 代码在表单中创建了一个按钮。单击按钮后，我调用我的 DLL 函数并打开一个 MessageBox 以从函数返回值，就这么简单：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Runtime.InteropServices;
namespace testdll
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        [DllImport("mydll.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern uint init();

        public unsafe MainWindow()
        {
            InitializeComponent();

        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            uint ret = init();
            MessageBox.Show("Return = " + ret.ToString());
        }
    }
} 
```

在我的项目设置中，我在“不安全”下编译，也针对 x86 平台目标。我能够编译这两个项目，并将 DLL 项目的构建输出设置为我的 WPF 项目的相应 Release/Debug 目录。我可以在调试/发布模式下点击顶部的“开始”按钮，然后 WPF 表单打开并显示该按钮。我可以单击该按钮，然后从我的 DLL 函数中看到正确的返回代码，一切正常。但是，当我将发布文件夹复制到任何其他机器上运行它时，我的 WPF 表单仅在单击按钮（并调用我的 DLL 函数）时打开，我的程序崩溃并出现：

“testdll.exe 中 0x7c812fd3 处未处理的异常：0xE0434352：0xe0434352。”

我可以使用 Visual Studio 2005 在 C# 中创建类似的 GUI。我正在进行相同的 DLL 调用并使用相同的 C# 代码和设置。我在其他计算机上打开此应用程序没有问题，并且正确调用了 DLL 函数，没有错误。这似乎是我只在 VS2012 中遇到的问题。请注意，我在失败的计算机上安装了 .NET Framework 4 和 C++ 2012 Redistributable 包。在互联网上搜索了类似的结果，并与许多项目设置混在一起后，我仍然很难过。任何帮助将不胜感激。

# css - 左侧的css固定div

> ID：15034525
> 
> 赞同：0
> 
> 时间：2013-02-22T22:50:43.877
> 
> 标签：css

我正在尝试做由 div 分隔的 2 面页面。其中1个是内容，另一个是侧边栏。

侧边栏必须位于左侧。

这是我目前用来执行此操作的代码：

```
#SideBar
{
 float: left;
 width: 300px;
 background-color: #727272;
 height: 100%;
 position: absolute;
 top: 0px;
 bottom: 0px;
 left: 0px;
}

#Content
{
 float: left;
 right: 0px;
 top: 0px;
 bottom: 0px;
 position: absolute;
 left: 300px;
 padding: 3px;
 font-size:12px;
 overflow:auto;
} 
```

第一次它似乎工作正常，但是当我去恢复（调整大小）我的浏览器时，它坏了。

位于侧边栏中的 div 溢出。是的，我说的是侧边栏的内部元素。

为什么侧边栏不固定在左侧？

提前致谢。

**编辑：**

我的html是：

```
<div id="SideBar">
 Sidebar content goes here
</div>
<div id="Content">
 Main content goes here
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:53:13.917

根据下面的评论，添加 min-height 属性应该可以解决它。

# c# - 让两个变量之一随机具有两个选项之一的更简单方法？

> ID：15034528
> 
> 赞同：1
> 
> 时间：2013-02-22T22:51:14.700
> 
> 标签：c#, random

我有两个变量，`x`和`y`。其中之一应具有从`0`to的随机 int 值`721 - this.Width`。另一个必须是 value`0`或`721 - this.Width`. 我已经设法创建了这个，但是这么长的代码对于这么小的事情来说似乎很愚蠢。可能这是唯一（或最好）的解决方案，但我要确定的是，有没有更短的方法？

这是我的代码：

```
Random random = new Random();
int x, y;
if (random.Next(2) == 1)
{
    x = random.Next(721 - this.Width);
    if (random.Next(2) == 1)
    {
        y = 721 - this.Height;
    }
    else
    {
        y = 0;
    }
}
else
{
    y = random.Next(721 - this.Height);
    if (random.Next(2) == 1)
    {
        x = 721 - this.Width;
    }
    else
    {
        x = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:18:22.790

你可以这样写：

```
Random random = new Random();
int a = random.Next(2) * (721 - this.Width);
int b = random.Next(721 - this.Width);
int c = random.Next(2) * (721 - this.Height);
int d = random.Next(721 - this.Height);
int x, y;

Boolean t = (random.Next(2) == 1);
x = (t) ? a : b;
y = (t) ? d : c; 
```

请注意，如果您发现较长的版本更易于理解，则此代码并不比您的代码好。编写代码没有*正确的*方法，可理解性往往比简洁更有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:11:19.063

如果您希望它占用更少的行，那么您可以这样做：

```
Random random = new Random();
int x, y;
switch (random.Next(2))
{
    case 1:
        x = random.Next(721 - Width);
        y = random.Next(2) == 1 ? 721 - Height : 0;
        break;
    default:
        y = random.Next(721 - Height);
        x = random.Next(2) == 1 ? 721 - Width : 0;
        break;
} 
```

归功于 Resharper。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:12:16.700

这还不错。我认为您能做的最好的事情就是将其移至一个很好的辅助实用程序以隐藏复杂性。也许您可以将各种`random.Next(0, 1)`结果分配给命名布尔值：

```
public class PositionCalculator
{
    private Random random = new Random();

    public Point CalculatePosition(int width, int height)
    {
        int x, y;

        bool favourWidth = RandomBoolean();
        bool useZeroForOther = RandomBoolean();

        int favouredValue = random.Next(721 - (favourWidth ? width : height));
        int otherValue = useZeroForOther ? 0 : (721 - (favourWidth ? height : width));

        if (favourWidth)
        {
            x = favouredValue;
            y = otherValue;
        }   
        else
        {
            x = otherValue;
            y = favouredValue;
        }

        return new Point() { X = x, Y = y };
    }

    private bool RandomBoolean()
    {
        return random.Next(2) == 1;
    }
} 
```

至少以这种方式，但是您想玩弄内部实现，这对您的应用程序的其余部分并不重要。我得到这个`Width`并`Height`传入只是为了避免要求它具有对 UI 层的引用。

编辑：真的，即使这样，我仍然发现三元运算符很难遵循“逻辑”路径。随意使用对您最有意义的任何 ifs 或方法结构来维护它，并且当您在数月/数年后再次查看该算法时仍能理解它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:23:11.043

```
var max = 721 - this.Width;
var rand = new Random();
var r = rand.Next(max * 2);
var x = r % max;
var y = (r / max) * max;
if (rand.Next(2) == 1) {var t = x; x = y; y = t;} 
```

# xcode - 设置 UITextView 框架不起作用

> ID：15034529
> 
> 赞同：1
> 
> 时间：2013-02-22T22:51:28.223
> 
> 标签：xcode, uiscrollview, uitextview, frame, cgrect

```
CGRect tempframe = _infoText.frame;
tempframe.size.height = _infoText.contentSize.height;
_infoText.frame = tempframe;
[_infoText sizeToFit];
CGFloat height = _infoText.frame.size.height;
CGFloat start = _infoText.frame.origin.y;
_scrollView.contentSize = CGSizeMake(320, height+start); 
```

这以某种方式给了我正确的 _scrollView 大小，但是即使 _infoText.frame.size.height 目前是正确的，_infoText (UITextView) 也没有改变。也许之后它会变回原来的大小？我在 -viewDidLoad 之后 0.1 秒完成了所有这些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:49:06.387

首先设置包含视图的大小。否则，嵌套文本视图可能会在其父视图调整大小时自动调整大小。`sizeToFit`另外，设置框架后不要调用。

# camera - 确定 RTP 流中 H.264 I 帧的结尾

> ID：15034532
> 
> 赞同：1
> 
> 时间：2013-02-22T22:51:38.970
> 
> 标签：camera, ip, h.264, rtp, compression

我处理来自 IP 摄像机的 H.264 RTP 流。我使用的相机将每个 I 帧拆分为几个 NAL 单元，每个单元都拆分为 RTP 数据包（开始和结束标志确定每个单元的尺寸，而不是帧的尺寸）。

我如何知道帧传输何时完成并且我有足够的数据来解压缩它？由于帧由多个单元组成 - 标志不能用于确定其结束。

我工作的大多数相机将每一帧分割为 RTP 数据包，其中标志确定帧的开始和结束。所以我从这个等待结束标志的数据包中解包数据 - 这是一个完整的帧。

我从这台相机得到的 NAL 单元序列是：

[NAL_UT_SPS] 序列参数集 +

[NAL_UT_PPS] 图片参数集

[NAL_UT_SEI] 补充增强信息

[NAL_UT_IDR_SLICE] I 帧图像数据的第 1 部分

[NAL_UT_IDR_SLICE] I 帧图像数据的第 2 部分

[NAL_UT_IDR_SLICE] I 帧图片数据的第 3 部分

[NAL_UT_SLICE] 第一个 P 帧

[NAL_UT_SLICE] 第二个 P 帧

[NAL_UT_SLICE] 第三个 P 帧

...

从这个序列很明显，我可以将 [NAL_UT_SPS] + [NAL_UT_PPS] + [NAL_UT_SEI] + 3*[NAL_UT_IDR_SLICE] 组合成一个 I 帧，我将在最近将其提供给解码器。但是我怎样才能确定有多少图片数据部分呢？我如何知道我收到的第 #X 部分不是序列中的最后一个？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:18:22.940

我解决了这个问题。

解决方案是：将所有非图片单元（上例中的 NAL_UT_SPS、NAL_UT_PPS、NAL_UT_SEI）附加到帧的开头，对于包含图片的数据包（NAL_UT_IDR_SLICE、NAL_UT_SLICE）检查**first_mb_in_slice 字段**（对于第一个图片数据切片，第二个，第三个不相等..）。

因此，如果 first_mb_in_slice==0 并且缓冲区包含图片数据，则将其返回并将新的帧数据写入缓冲区，否则仅追加数据而不返回帧。这样，当我们开始接收第 2 帧时，我们会返回第 1 帧，并且可以确定这是一个新帧，而不是前一帧的一部分：

[NAL_UT_SPS] 帧 #1 (I) 开始

[NAL_UT_PPS] 第 1 帧继续

[NAL_UT_SEI] 第 1 帧继续

[NAL_UT_IDR_SLICE] 第 1 帧图片数据，第 1 部分：first_mb_in_slice == 0

[NAL_UT_IDR_SLICE] 第 1 帧图片数据，第 2 部分：first_mb_in_slice > 0

[NAL_UT_IDR_SLICE] 第 1 帧图片数据，第 3 部分：first_mb_in_slice > 0

[NAL_UT_SLICE] 帧 #2 (P) 开始：first_mb_in_slice == 0 <- 此时我们将返回第一帧

[NAL_UT_SLICE] 帧 #3 (P) 开始：first_mb_in_slice == 0 <- 返回第二帧

[NAL_UT_SLICE] 帧 #4 (P) 开始：first_mb_in_slice == 0 <- 返回第三帧

[NAL_UT_SPS] 帧 #5 (I) 开始 <- 返回第 4 帧

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-16T12:19:26.633

RTP 在 RPT Header 中定义了一个 Marker 位，它表示相同 RTP 时间戳的访问单元的结束。如果设置了标记位，则它是此特定 RTP 时间戳的最后一个 NALU。

如果您使用标记位，则无需等待下一个访问单元到达，从而最大限度地减少延迟。

您可以在第 5.1 节中阅读有关[H264 有效负载](https://www.ietf.org/rfc/rfc3984.txt)的 RFC 中的标记位的更多信息。第 9 页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:09:22.917

大多数 H.264 解码器接受输入流作为 NAL。除非你有一个挑剔的解码器——我只会将 NAL 输入解码器。一般来说，不能保证 NAL:frame 甚至 slice 之间的 1:1 关系。

# php - 在页面底部处理和显示 PHP 错误

> ID：15034539
> 
> 赞同：3
> 
> 时间：2013-02-22T22:52:13.080
> 
> 标签：php, html, css, error-handling

我正在使用 PHP `set_error_handler(brodeur)`，以便我可以自定义错误处理的行为。

现在我发现自己想要自定义输出的显示位置/定位。目前，正如预期的那样，错误显示在标记内有问题的 PHP 代码所在的位置。

我希望输出显示在页面的最底部或最顶部，这样它就不会*干扰*页面内容的 CSS/布局。

我的问题是我首先在我的代码中声明了*brodeur*函数，然后定义了`set_error_handler(brodeur)`代码，然后是`<HTML>...</HTML>`内容。

如果我在页面底部（或顶部）创建了一个 DIV 包装器，那么将这些错误字符串放置在该 DIV 中的最佳方法是什么，当 PHP 代码不会位于该 DIV 中时？或者有什么我错过的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:56:06.187

有多种方法可以解决这个问题。理想情况下，您已经将视图/模板与实际代码分开。如果是这样，您可以将错误设置为数组并将其传递到模板中，然后将其放在您想要的任何位置。

但是，如果您不使用该方法进行处理，则希望使用 php 的 try 和 catch 功能来处理错误：

```
$errors = array();
try {
 // do all your code here
}
catch(Exception $e)
{
  // do whatever you want with the error
  // my example is pushing it into an errors array..
  array_push($errors,$e->getMessage());
}
// now do whatever you want with $errors when you're ready.. 
```

# java - 使用 Jersey 的 Java 中的 REST Web 服务

> ID：15034541
> 
> 赞同：0
> 
> 时间：2013-02-22T22:52:15.960
> 
> 标签：java, rest, jersey

我想做的是使用 3M Healthcare Data Dictionary Access 的 Web 服务 API 将一种医学编码语言中的医学术语（即主动脉瘤）翻译成另一种医学编码语言，使用 3M HDD 映射和匹配两种不同的语言。

我对 REST 和 Jersey 很陌生，到目前为止，我已经设法使用 NetBeans 在 Tomcat 服务器上打印“Hello World”。

这听起来很简单，但我只需要稍微推动一下就可以进入大门。

* * *

以下是我从一开始就一直在努力解决的一些问题：（在 http 中添加了另一个 t，因为我无权访问）

htttp://host:port/api/cts/vb/getSupportedCodeSystems <-- 这工作并在浏览器上返回带有支持的代码系统的 XML

htttp://host:port/api/cts/vb/lookupDesignations <-- 这行不通，因为这需要 2 个参数（一个 codeSystem_ID 是特定编码语言的代码，另一个是 Concept Code 的代码一个特定的概念，即主动脉瘤的 AANS）

我应该如何使用 REST 和 Jersey 将其集成到我的 Java 代码中？

我应该如何为方法lookupDesignations插入参数？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:54:41.463

我认为它应该适合你：

```
@Path("/lookupDesignations") // or you complete path
@GET
@Produces(value = MediaType.APPLICATION_XML)
public Response getLookupDesignation(@QueryParam("codeSystemUid") String codeSystemUid, @QueryParam("conceptCode") String conceptCode) {
     // now you have codeSystemUid and conceptCode as String
     // create you entity or list for you entity to return as XML
     return Response.ok().entity(yourEntity).build();
} 
```

您可以使用[Chrome 的 Rest Console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn)来模拟对您的服务的 REST 操作。

示例：.../lookupDesignations?codeSystemUid=111&conceptCode=java

您还可以检索 URL 路径中的变量，例如：

```
@Path("/lookupDesignations/{codeSystemUid}/{conceptCode}") // or you complete path
@GET
@Produces(value = MediaType.APPLICATION_XML)
public Response getLookupDesignation(@PathParam("codeSystemUid") String codeSystemUid, @PathParam("conceptCode") String conceptCode) {
     // now you have codeSystemUid and conceptCode as String
     // create you entity or list for you entity to return as XML
     return Response.ok().entity(yourEntity).build();
} 
```

在此示例中，您可以调用 URL：.../lookupDesignations/111/java

我希望这对你有用。

如果我误解了你的问题，请告诉我！

# algorithm - 速率限制远程请求的算法

> ID：15034547
> 
> 赞同：0
> 
> 时间：2013-02-22T22:52:32.503
> 
> 标签：algorithm, distributed

假设我有一个非常大的请求池要发送到远程主机。与任何服务器一样，远程主机的容量有限。所有的消息最终都必须被传递，及时性是可取的，但并不重要。除了监视我发送的请求的响应时间和/或失败率之外，我无法知道远程主机的这个容量。

我需要开发一种算法，以在不使远程主机崩溃的情况下以最大化吞吐量的速率发送请求。

最好的输出变量似乎是请求之间的时间段，使得请求 N 在请求 N-1 之后 M 纳秒分派。

我应该如何处理确定最佳费率的问题？有没有我可以建立的论文？或者有人能想出一些神奇的算法吗？以前有人做过吗？

注意：令牌桶也不是我要寻找的答案。我已经在使用非常类似于令牌桶的东西，但我正在寻找一种方法来确定应将令牌添加到桶中的速率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:47:59.323

当我写我的网络爬虫时，我没有想出一个神奇的算法。我们使用了一些启发式方法，这些方法似乎做得相当不错，尽管肯定不是完美的。

首先，我们查看了站点的 robots.txt 文件。如果它有一个爬行延迟条目，我们不会超过它来尊重它。

对于其他服务器，我们将保持最后 n 个请求所需时间的平均运行时间（我认为我们确定了值 5），并且我们将确保我们发送请求的频率永远不会超过该平均值。我们测量了从发出请求到完成处理响应的时间。

如果服务器超时，则该请求的时间将进入运行平均值。

如果我们从服务器获得 50x，我们会在向该服务器发出另一个请求之前延迟相当长的时间（五分钟或更长时间）。重复 50 次响应将导致我们停止发出请求，直到有人可以查看问题所在。

我们还跟踪了 40 倍的响应。许多未找到或访问被拒绝会导致爬虫停止处理域并引发标记，以便有人可以查看它。

我们有一个分布式爬虫。没有单个爬虫会向同一个域发出并发请求，并且我们有一些跨服务器通信，这使得多个服务器向同一个域发出并发请求是不寻常的。

我确信这并没有*最大化*任何特定服务器上的吞吐量，但它确实让较大的站点非常繁忙。对我们来说更重要的是，它阻止了我们（大多数情况下，无论如何）被许多网站阻止。

我们还对许多使用 API 的站点进行了特殊情况处理。有些人会说他们的请求限制是多少，我们会调整这些站点的设置，以便我们直接排队。但我们只有几十个。手动配置 9,000 台服务器的请求频率（然后跟上变化）是不现实的。但是，您也许可以手动配置十几个或两个。

# perl - 重用在调用脚本时创建的对象

> ID：15034550
> 
> 赞同：1
> 
> 时间：2013-02-22T22:52:47.817
> 
> 标签：perl, object, file-io

我希望将文件中的某些文本行拆分为一个对象，然后将这些对象添加到一个数组中，每个元素都是输入文件中的一行。从那里我需要调用此脚本的脚本才能通过它们的键引用对象中的标签（而不是将所有内容传递给打印命令并在调用脚本中重新组装。

我有第一部分工作和测试，但我不清楚如何在调用脚本中发送或尊重。我尝试打印出数组的每个元素，但由于它们是对象，一旦在调用程序中，它们就无法取消引用。

这是创建数组的文件的简化版本：

```
#!/usr/bin/perl

use strict;
use warnings;
use CLASS::DATATYPE;

my $foundheaders = 0;
my $array_elem = 0;
my @MY_ARRAY = ();

open FH, '<', "dummy.txt";
# open FH, '<', "$ARGV[0]";

while (my $line = <FH>) {
    # once you've found the headers, this will begin to kickoff
    if ($foundheaders == 1)
    {
        # get line elements and create a new DATATYPE object using the elements
        # matched to the header index
        my @lineArray = split("\t", $line);
        my $thisdata = new CLASS::DATATYPE();

        $thisdata->FIRSTVAL(@lineArray[$HEADERS::FIRST]);
        $thisdata->SECONDVAL(@lineArray[$HEADERS::SECOND]);

        print "$thisdata\n";

        # Add new DATATYPE to the array
        $MY_ARRAY[$array_elem] = $thisdata;
        $array_elem ++;
    };

    # Search for line with "#R" at the beginning.  This will contain the headers
    if ($line =~ m/#R/ ) {
        # strip the first # symbol from the headers
        my $subline = substr $line, 1;
        chomp($subline);

        # split the line into an array and index headers
        my @headers = split("\t", $subline);
        &assign_headers(\@headers);

        # check off foundheaders flag
        $foundheaders = 1;
    };
};
close FH;

# test output value
my $test = $MY_ARRAY[2]->SECONDVAL();
print "$test\n";

1;

sub assign_headers
{
    package HEADERS;
    my @array = @{$_[0]};
    my $iter = 0;

    # check each array loop against known headers and assign the array index to header
    foreach (@array)
    {
        if ($_ eq "ROW1")
        {
            our $FIRST = $iter;
        };

        if ($_ eq "ROW2")
        {
            our $SECOND = $iter;
        };
        $iter++;
    }
} 
```

可以将 print 语句固定在原处，以确保至少按预期创建数据。

这是存储在 CLASS 文件夹中的 DATATYPE 包：

```
#!/usr/bin/perl

package CLASS::DATATYPE;

use strict;
use warnings;

sub new {
    my $self = {};
    $self->{FIRSTVAL} = undef;
    $self->{SECONDVAL} = undef;
    $self->{THIRDVAL} = undef;
    bless($self);
    return $self;
}

sub FIRSTVAL {
    my $self = shift;
    if (@_) { $self->{FIRSTVAL} = shift }
    return $self->{FIRSTVAL};
}

sub SECONDVAL {
    my $self = shift;
    if (@_) { $self->{SECONDVAL} = shift }
    return $self->{SECONDVAL};
}

1; 
```

我使用了一个任意的虚拟文件，任何具有匹配标题行的东西都可以：

```
## blah blah blah
## blah blah blah
#ROWS   ROW1    ROW2    ROW3
1   fwewef  aewf    sfd8y9
2   gereer  few79   dfsui
3   svfsg789    aferw789    uifdgs
4   dfsgy   78fer   fds
5   78fgds  sdf78y  sfdgh 
```

调用文件将类似于以下内容，传递输入文件并获取输出：

```
#!/usr/bin/perl

use strict;
use warnings;
use CLASS::DATATYPE;

my $file = "dummy.txt";

our @RESULTS = `/usr/bin/perl my_reader.pl $file`;

my $test = $RESULTS[2]->SECONDVAL();
print "$test\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:30:38.190

我能想到的解释我的意思的唯一方法是为你编写程序。

这个程序完全符合您的需要，我希望您能看到您编写了大量不必要的代码来做同样的事情。

我选择了你选择的类，但你所写的只是一个实现 Perl 哈希的类。

请遵守我使用的标识符的大小写。任何熟悉 Perl 的人都会习惯它们，并会感谢你。

我所做的唯一主要补充是将`List::MoreUtils`模块用于该`firstidx`功能。它返回符合给定测试的列表的第一个元素的索引。它不是核心模块，可能需要安装。如果您*真的*无法安装新模块，那么在程序中编写等效功能是一件简单的事情。如果您需要帮助，请回来。

**注意**我已经更新了代码以删除对这个模块的依赖，以防万一。

我已经让类从构造函数参数中获取初始化器，因此您可以在创建每个对象时分配值。此外，访问器返回任何更改*之前*的值，因为更改后的值不是很有用。

我希望您能看到，现在只需要`read_maf`处理其他文件格式的第二个子例程，并且不需要多个进程。

```
#!/usr/bin/perl

use strict;
use warnings;

use Class::DataType;

sub firstidx {
  my ($match, $list) = @_;
  for my $i (0 .. $#$list) {
    return $i if $list->[$i] eq $match;
  }
}

sub read_vcf {

  my ($filename) = @_;

  open my $fh, '<', $filename or die qq{Unable to open "$filename" for input: $!};

  my @columns;
  my @data;

  while (my $line = <$fh>) {
    chomp $line;
    if ( @columns ) {
        my @fields = split /\t/, $line;
        my $thisdata = Class::DataType->new(@fields[@columns]);
        push @data, $thisdata;
    }
    elsif ( $line =~ s/^#(?=R)// ) {
      my @headers = split /\t/, $line;
      @columns = map firstidx($_, \@headers), qw/ ROW1 ROW2 /;
    }
  }

  return \@data;
}

my $filename = 'dummy.txt';
my $results = read_vcf($filename);

my $test = $results->[2]->secondval;
print "$test\n"; 
```

`Class::DataType`和代码`Class/DataType.pm`

```
package Class::DataType;

use strict;
use warnings;

sub new {
  my $package = shift;
  $package = ref $package if ref $package;
  my $self = {};
  @$self{qw/ firstval secondval thirdval /} = @_;
  bless $self, $package;
}

sub firstval {
    my $self = shift;
    my $retval = $self->{firstval};
    $self->{firstval} = shift if @_;
    return $retval;
}

sub secondval {
    my $self = shift;
    my $retval = $self->{secondval};
    $self->{firstval} = shift if @_;
    return $retval;
}

sub thirdval {
    my $self = shift;
    my $retval = $self->{thirdval};
    $self->{firstval} = shift if @_;
    return $retval;
}

1; 
```

**输出**

使用您提供的数据，这将打印

```
svfsg789 
```

# matlab - .m 文件自动绘图

> ID：15034559
> 
> 赞同：-1
> 
> 时间：2013-02-22T22:53:25.480
> 
> 标签：matlab, plot

我创建了一个这样的 .m 文件：

```
function M
clc
clear
T=[
1   2   3
4   5   6
7   8   9
];
surface (T)
shading interp
end 
```

我想要的是：当点击那个 m 文件时（我的意思是当 m 文件打开时），matlab 运行它。因此用户无需单击“运行”。

编辑：我希望在打开 m 文件时运行脚本我需要这个，因为我在 C# 程序的末尾创建了这个 M 文件，而 C# 程序打开 m 文件只是为了显示图形。所以最好打开后自动运行并显示图形。（所以用户很容易看到图表，不需要运行它。）我认为可能有一种简单的方法，比如在 m-file 中编写代码，使其在打开后立即运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:11:07.827

我根本没有使用 C# 的经验，但在我看来，实现你想要的最好方法是以某种方式从 C# 程序中调用 matlab 函数。我知道 matlab 可以很容易地使用`mex`文件集成到 C 程序中。

您应该查看有关[将 matlab 与 C# 集成的](http://www.mathworks.com/matlabcentral/fileexchange/12987-integrating-matlab-with-c)链接，也许它可以帮助您。如果您能够直接从 C# 程序调用 matlab 函数，用户甚至不必单击 m 文件。

如果您真的希望用户必须单击 m 文件，而不是之后单击运行按钮，我假设您正在处理的用户不知道 matlab，因此还没有运行 matlab，所以您希望他们单击Windows（或其他操作系统）中的 m 文件，而不是 Matlab 中的 m 文件。

然后，通过单击 m 文件，应该打开一个 matlab 实例，单击的文件在编辑器中。

您可以在 matlab 的启动目录中创建或编辑该`startup.m`文件（参见[matlab 文档](http://www.mathworks.nl/help/matlab/ref/startup.html)）。这是一个在 matlab 启动时执行的脚本文件。因此，如果您`startup.m`在 C# 程序中创建一个包含调用所需 matlab 函数的行（`M`来自您的示例），则该函数应仅在单击函数文件后执行。

但是，如果 matlab 的实例已经在运行，`startup.m`则不会调用该脚本，并且该方法将不再起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T02:18:15.537

如果您试图避免让用户手动运行该函数，您可以让一个批处理文件自动启动 MATLAB 并运行该函数。创建一个批处理文件（使用文本编辑器并使用 .bat 扩展名保存）

```
matlab -r m 
```

如果您搜索[“matlab 命令行参数”](http://www.google.com/webhp?q=matlab%20command%20line%20parameters)，您可以找到更多信息和附加选项。

或者，您可以将 MATLAB 生成的图形保存为 .FIG 并让用户加载。（或另存为 pdf 并避免让他们完全使用 MATLAB）

# javascript - 将对 $.fadeIn() 的调用重定向到 $.show()

> ID：15034563
> 
> 赞同：1
> 
> 时间：2013-02-22T22:53:58.240
> 
> 标签：javascript, jquery

我有一个非常 CSS3 和图形密集型的单页应用程序，有很多盒子阴影和移动的元素。我在一台相当高端的笔记本电脑上运行，所以没问题，但是当我将笔记本电脑置于节能模式时，处理器会变慢，页面有时会变得生涩，尤其是在淡入淡出元素时。

我认为在平板电脑和其他移动设备上，这也是一个问题。我知道我可以使用全局布尔标志并在我的代码中执行类似的操作：

```
if (SlowComputer) {
  $('#SomeID').show();
} else {
  $('#SomeID').fadeIn(800);
} 
```

但是有没有办法自动将呼叫重定向到呼叫`fadeIn()`和`fadeOut()`呼叫？`show()``hide()`

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T22:58:07.950

处理这种情况的最佳方法是在这种情况下关闭动画。

```
jQuery.fx.off = true 
```

它有效地将所有动画的持续时间设置为 0。

参考：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

编辑：
更好的参考：[http ://api.jquery.com/jquery.fx.off/](http://api.jquery.com/jquery.fx.off/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:58:53.287

如何在 jquery“上方”创建一个界面？那可以处理if。你可以在你的代码中使用你的接口方法——所以不必再关心幕后到底发生了什么......

# python - 是否有 Python 列表解包（又名“*”）运算符的 Scala 等价物？

> ID：15034565
> 
> 赞同：25
> 
> 时间：2013-02-22T22:54:08.107
> 
> 标签：python, scala, argument-passing

在 Python 中，我们有星号（或“*”或“解包”）运算符，它允许我们解包列表，以便在传递位置参数时使用。例如：

```
range(3, 6)
args = [3, 6]
# invokes range(3, 6)
range(*args) 
```

在这个特定的例子中，它并没有节省太多的输入，因为`range`只需要两个参数。但是您可以想象，如果 有更多参数`range`，或者`args`从输入源读取，从另一个函数返回等，那么这可能会派上用场。

在 Scala 中，我一直无法找到等价物。考虑在 Scala 交互式会话中运行的以下命令：

```
case class ThreeValues(one: String, two: String, three: String)

//works fine
val x = ThreeValues("1","2","3")

val argList = List("one","two","three")

//also works
val y = ThreeValues(argList(0), argList(1), argList(2))

//doesn't work, obviously
val z = ThreeValues(*argList) 
```

除了中使用的方法之外，还有更简洁的方法`val y`吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-22T23:09:05.870

scala 中没有直接的等价物。您会发现最接近的是 的用法`_*`，它仅适用于可变参数方法。例如，这里是一个可变参数方法的例子：

```
def hello( names: String*) {
  println( "Hello " + names.mkString(" and " ) )
} 
```

可以与任意数量的参数一起使用：

```
scala> hello()
Hello
scala> hello("elwood")
Hello elwood
scala> hello("elwood", "jake")
Hello elwood and jake 
```

现在，如果你有一个字符串列表并想将它们传递给这个方法，解压它的方法是通过`_*`：

```
scala> val names = List("john", "paul", "george", "ringo")
names: List[String] = List(john, paul, george, ringo)
scala> hello( names: _* )
Hello john and paul and george and ringo 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T02:22:21.050

[你可以使用shapeless](https://github.com/milessabin/shapeless)来获得 Python 的一些方法，

```
Welcome to Scala version 2.11.0-20130208-073607-ce32c1af46 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_05).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import shapeless._
import shapeless._

scala> import Traversables._
import Traversables._

scala> case class ThreeValues(one: String, two: String, three: String)
defined class ThreeValues

scala> val argList = List("one","two","three")
argList: List[String] = List(one, two, three)

scala> argList.toHList[String :: String :: String :: HNil].map(_.tupled).map(ThreeValues.tupled)
res0: Option[ThreeValues] = Some(ThreeValues(one,two,three)) 
```

正如你所看到的，在 Scala 中，无形的需要更多的仪式。这是因为 shapeless 施加了保证在运行时满足的编译时间约束（与 python 不同，如果`args`大小错误或包含错误类型的元素，它将在运行时失败）......相反，你被迫指定键入您希望 List 具有的类型（在这种情况下恰好是三个`Strings`），并准备处理不满足该期望的情况（因为结果明确是`Option`of `ThreeValues`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T23:07:25.087

函数也有类似的东西：`tupled`它将一个接受 n 个参数的函数转换为一个接受一个 n 元组类型参数的函数。

有关更多信息，请参阅此问题：[scala tuple unpacking](https://stackoverflow.com/questions/3568002/scala-tuple-unpacking)

这样的数组方法没有多大意义，因为它只适用于具有多个相同类型参数的函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-23T18:50:24.417

另一种解压列表的方法：

```
val a :: b :: c :: _ = argList
val z = ThreeValues(a, b, c) 
```

# iphone - UITableView 设置 IndexTitleView 清除颜色

> ID：15034568
> 
> 赞同：0
> 
> 时间：2013-02-22T22:54:13.760
> 
> 标签：iphone, ios, objective-c, uitableview

所以我的索引标题视图让我很烦看到这个：![在此处输入图像描述](../Images/472987054397f1e4f67fa5ff357b6b4b.png)

以及子类的代码`UITableViewCell`：

```
self.contentView.backgroundColor = [UIColor blackColor]; 
```

该死的索引显示在单元格上方，我想将其 backgroundColor 设置为 clearColor 以便我可以用黑色填充我的单元格！

非常感谢 ：）

编辑：嗯，更清楚，这是 UITableViewCell ，因为我有几个部分，所以我在右边有索引，我可以触摸它带我去那个部分，看看`1`右边的小我希望它的视图有一个 clearColor 作为背景颜色，因此单元格将显示为完全填充黑色！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:32:59.217

设置普通表格的背景颜色很简单：

```
self.tableView.backgroundColor = [UIColor blackColor]; 
```

无需设置单元格或其 contentView 的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:38:09.897

将 tableview 的背景也设置为黑色。

# magento - 有没有办法将自定义查询添加到集合呈现的 magento 选择中？

> ID：15034572
> 
> 赞同：2
> 
> 时间：2013-02-22T22:54:30.517
> 
> 标签：magento, collections

我有一个 magento 集合，如果我回显 getSelect() 函数，我会得到一个类似这样的查询：

```
 SELECT 
    `table1`.*,
    `table`.*,
    `table3.fieldy` AS 'fieldname'
  .....
  FROM ....
  WHERE.... 
```

我想将此查询更改为如下内容：

```
 SELECT 
    `table1`.*,
    `table`.*,
    `table3.fieldy` AS 'fieldname',
     (SELECT col1, col2, (case when (action == 2 and state == 0) then 1 else 0 end) as state from tbl1)   AS 'fieldname2'
    ......
    FROM....
    WHERE.... 
```

现在，例如对于 where 子句，您可以使用向查询添加文本

```
productCollection->getSelect()->where('query text'); 
```

但是如何将自定义查询文本添加到选择的第一部分？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:05:47.480

您可以使用`Mage_Eav_Model_Entity_Collection_Abstract`函数`addExpressionAttributeToSelect`将 Subselect 添加到您的查询中。
或者只是添加新的子选择字段以选择为：

```
$this->getSelect()->columns(array($alias => $fullExpression)); 
```

注意：`$fullExpression`应该用引号括起来。

# java - Java setPressedIcon 不起作用

> ID：15034573
> 
> 赞同：0
> 
> 时间：2013-02-22T22:54:36.200
> 
> 标签：java, swing, jmenu, jmenuitem

我的应用程序中有菜单，我想设置菜单项正常状态图标和按下状态图标。添加了正常状态图标，但是当我按下菜单项时，按下状态图标不会改变正常状态图标。这里有什么问题：

```
 JMenu m=new JMenu(text);
        m.setBackground(getTheme().colors.menuColor());
        m.setOpaque(false);
        m.setIcon(core.getIcon(text, "normal"));
        m.setPressedIcon(core.getIcon("webmaps", "pressed")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:15:39.757

这个问题以前[见过](https://forums.oracle.com/forums/thread.jspa?threadID=2145169)。继承的[setPressedIcon](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setPressedIcon%28javax.swing.Icon%29)不会更改（或确实）`Icon`上的背景。您可以在组件上使用 a 作为解决方法：`JMenu``JMenuItem``MenuListener`

```
m.addMenuListener(new MenuListener() {

    @Override
    public void menuSelected(MenuEvent e) {
        JMenu menu = (JMenu) e.getSource();
        menu.setIcon(core.getIcon("webmaps", "pressed"));
    }

    @Override
    public void menuDeselected(MenuEvent e) {
        JMenu menu = (JMenu) e.getSource();
        menu.setIcon(core.getIcon(text, "normal"));
    }

    @Override
    public void menuCanceled(MenuEvent e) {
        JMenu menu = (JMenu) e.getSource();
        menu.setIcon(core.getIcon(text, "normal"));
    }
}); 
```

# php - mssql_select_db 工作不正常

> ID：15034578
> 
> 赞同：0
> 
> 时间：2013-02-22T22:54:42.647
> 
> 标签：php, sql-server

```
// NO PROBLEM WITH IT
$dbhandle = mssql_connect(TB_DB_SERVER, TB_DB_USERID, TB_DB_PASSWORD) or die("Database connection error.");
$imageDBhandle = mssql_connect(TB_IMAGE_SERVER, TB_IMAGE_USERID, TB_IMAGE_PASSWORD) or die("Database connection error.");

// THIS WORKS FINE TOO

mssql_select_db("database", $dbhandle);
$sql_query = "SELECT * FROM table1";
$result = mssql_query($sql_query, $dbhandle); 

// THIS COMPLAINS - message: Invalid object name 'table2'

mssql_select_db("anotherDatabase", $imageDBhandle );
$sql_query = "SELECT * FROM table2";
$result = mssql_query($sql_query, $imageDBhandle ); 
```

mssql_connect 和 mssql_select_db 在执行代码时从不抱怨。但是，第二个代码似乎有一个奇怪的问题。为什么第二部分给我一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:30:44.890

我发现我的用户 ID 没有设置为我一直试图访问的数据库的所有者...... :( 但仍然不知道 err msg 是什么意思......无论如何，它已经解决了。

# wcf - 使用 CreateChannelWithActAsToken 的标准 ChannelFactory 使用错误的信任版本来请求 ActAs 令牌

> ID：15034580
> 
> 赞同：2
> 
> 时间：2013-02-22T22:54:53.253
> 
> 标签：wcf, binding, wif, ws-federation

当我使用我的安全令牌调用 factory.CreateChannelWithActAsToken 时，它使用错误的命名空间调用我的 STS 问题并期望错误的信任版本。

我可以使用 WSTrust13 连接到我的 STS 并使用 WSTrustChannel 手动请求令牌和 ActAs 令牌，它工作得很好。但是，当我设置 WS2007FederationHttpBinding 并指向我的 STS 时，它总是使用错误的格式发出问题请求。我进入了我的 STS，不得不使用 WSTrustFeb2005ResponseSerializer 而不是 WSTrust13ResponseSerializer 反序列化消息。

```
<ws2007FederationHttpBinding>
<binding name="AdministrationServiceBinding">
  <security mode="TransportWithMessageCredential">
    <message issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0" negotiateServiceCredential="false">
      <issuer address="https://localhost:44300/WSFederationServices.svc/Issue"
        binding="wsHttpBinding" bindingConfiguration="CustomSecurityTokenServiceBinding"  />
      <issuerMetadata address="https://localhost:44300/WSFederationServices.svc/mex" />
    </message>
  </security>
</binding>
</ws2007FederationHttpBinding> 
```

我确定我可能误解了某些东西是如何工作的。但是，这似乎应该有效，但不是。有输入吗？

# sql-server - TRIM t-sql 参数

> ID：15034581
> 
> 赞同：2
> 
> 时间：2013-02-22T22:55:10.227
> 
> 标签：sql-server, sql-server-2008, tsql

```
DECLARE @Text1 varchar(10) = ' ltrim'
DECLARE @Text2 varchar(10) = 'rtrim '
DECLARE @Text3 varchar(10) = ' ltrimrtrim '

INSERT INTO TABLE
VALUES (LTRIM(RTRIM(@text1)), LTRIM(RTRIM(@text2)), LTRIM(RTRIM(@text3)))` 
```

我在下面有一条红色波浪线

```
"LTRIM(RTRIM(@text1))" 
```

部分（工具提示消息：ltrim fx 需要 1 个参数）。

我究竟做错了什么？请多多指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:58:51.770

你有`table`电话`table`吗？如果是这样，请尝试在表名周围加上方括号，`[table]`因为 table 是保留字。

您下面的代码正在工作：

```
DECLARE @Text1 varchar(10) = ' ltrim'
DECLARE @Text2 varchar(10) = 'rtrim '
DECLARE @Text3 varchar(20) = ' ltrimrtrim '

select LTRIM(RTRIM(@text1)) col1, 
  LTRIM(RTRIM(@text2)) col2, 
  LTRIM(RTRIM(@text3)) col3
into #temp

select *
from #temp 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d41d8/9392)

# postgresql - 如何确保所有 Postgres 查询都有 WHERE 子句？

> ID：15034582
> 
> 赞同：2
> 
> 时间：2013-02-22T22:55:15.850
> 
> 标签：postgresql

我正在构建一个多租户系统，其中许多客户数据将位于同一个数据库中。

我对某些开发人员忘记在每个查询中添加适当的“WHERE clientid =”感到偏执。

有没有办法在数据库级别确保每个查询都有正确的 WHERE = 子句，从而确保在不指定查询是针对哪个客户端的情况下不会执行任何查询？

我想知道查询重写规则是否可以做到这一点，但我不清楚他们是否可以这样做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:04:00.643

拒绝`t`所有用户对表的权限。然后授予他们对`f`返回表并接受参数 client_id 的函数的权限：

```
create or replace function f(_client_id integer)
returns setof t as
$$
    select *
    from t
    where client_id = _client_id
$$ language sql
;

select * from f(1);
 client_id | v 
-----------+---
         1 | 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:32:34.603

另一种方法是创建一个`VIEW`for：

```
SELECT * 
FROM t
WHERE t.client_id = current_setting('session_vars.client_id'); 
```

并`SET session_vars.client_id = 1234`在会话开始时使用。

拒绝访问表，只保留视图许可。

您可能需要为视图创建重写规则`UPDATE`, `DELETE`, `INSERT`（这取决于您的 PostgreSQL 版本）。

性能损失会很小（如果有的话），因为 PostgreSQL 会在执行前重写查询。

# unix - 将 awk/cut/sed 与包含不同数量字段的行一起使用

> ID：15034583
> 
> 赞同：1
> 
> 时间：2013-02-22T22:55:20.040
> 
> 标签：unix, sed, awk, cut

我正在使用 pinboard.in API 来获取我当前书签的列表。结果如下所示：

```
<post href="https://www.nocc.meezy.com/doc/view.cgi?id=715" time="2013-02-11T17:38:10Z" description="Disk Errors Process Flow Chart" extended="" tag="nocc work" hash="a3419515b2e956e86886ba630b6028b7" meta="d793aeef6133a26e361695181eb57b9d"    />
<post href="https://www.nocc.meezy.com/doc/view.cgi?id=39" time="2013-02-11T17:38:08Z" description="Using socat" extended="" tag="socat work" hash="fd60523bf841b2b95674a0e1d4401f4d" meta="5f2b6ad395fe4da05b2987d199b675ea"    />
<post href="https://agora.meezy.com/wiki/Development_Tools" time="2013-02-11T17:38:06Z" description="Development Tools - meezyWiki" extended="" tag="devtools work" hash="dcf904433987a125c00a88bcaf31cad27" meta="5e744562282561390a0417223d323aee"    /> 
```

我只对 URL、描述和标签感兴趣，所以我希望结果如下所示：

```
https://www.nocc.meezy.com/doc/view.cgi?id=715 description="Disk Errors Process Flow Chart" tag="nocc work"  
https://www.nocc.meezy.com/doc/view.cgi?id=39 description="Using socat" extended="" tag="socat work"  
https://agora.meezy.com/wiki/Development_Tools description="Development Tools - meezyWiki" tag="devtools work 
```

我对 awk/cut/sed 有一点了解，但不足以告诉他们在描述和标签字段包含空格和不同数量的字符串时如何正确计算字段。

如果我的生活依赖于它，我可能会拼凑出一些非常糟糕的解决方案，但我宁愿找一个比我更了解他们的人来获得一个合适的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:13:52.420

当您使用 regex/awk/sed.. 玩 xml 时，您应该知道风险。这是满足您要求的 sed one-liner：

```
 sed -r 's/^.*"(http)/\1/; s/" time=.*( desc)/ \1/; s/extended=.*( tag=")/\1/; s/hash=.*//' file 
```

用你的例子测试：

```
kent$  sed -r 's/^.*"(http)/\1/; s/" time=.*( desc)/ \1/; s/extended=.*( tag=")/\1/; s/hash=.*//' file
https://www.nocc.meezy.com/doc/view.cgi?id=715  description="Disk Errors Process Flow Chart"  tag="nocc work" 
https://www.nocc.meezy.com/doc/view.cgi?id=39  description="Using socat"  tag="socat work" 
https://agora.meezy.com/wiki/Development_Tools  description="Development Tools - meezyWiki"  tag="devtools work" 
```

# javascript - 删除 gmpanel 标记 -EXTJS 4

> ID：15034588
> 
> 赞同：0
> 
> 时间：2013-02-22T22:55:54.713
> 
> 标签：javascript, google-maps, extjs, extjs4, google-maps-markers

```
function addDoctorLocation(options) 
{
    var gm = Ext.getCmp('mygooglemap');
    var mpoint = new google.maps.LatLng(options.lat,options.lng);
    var marker = gm.addMarker(mpoint,options.marker,false,false, options.listeners);
    infoBubble = new InfoBubble({maxWidth: 300});
}

tree.on('checkchange', function(node){
    var data = node.data;

    if (data.checked == true){
        var options = {
            lat:3.951941,
            lng:102.052002,
            marker: {title:"Hello World!"},
            listeners: {
                click: function(e){

                }
            }     
        }     
        addDoctorLocation(options);           
    }

    Ext.MessageBox.show({
        title: 'Changed checkbox status',
        msg: 'MainID: ' + data.MainID + ' <br /> Checkbox status: ' + data.checked,
        icon: Ext.MessageBox.INFO
    });
}) 
```

## 问题

此代码在选中复选框时成功添加标记，但是，当未选中复选框时如何删除标记？
我需要为标记分配一个ID吗？取消选中时，我应该删除 id 的标记吗？附加：一张地图有多个标记，而不仅仅是1个标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:41:03.817

创建标记结构作为全局变量。添加标记时，也将它们添加到结构中，根据复选框键入独特的内容。因此，您可以稍后使用它来识别要隐藏的标记。如果 data.checked != true 然后`marker.setMap(null);`用来摆脱它。

就像是：

```
var markers = {};

function addDoctorLocation(options) 
{
    var gm = Ext.getCmp('mygooglemap');
    var mpoint = new google.maps.LatLng(options.lat,options.lng);
    var marker = gm.addMarker(mpoint,options.marker,false,false, options.listeners);
    infoBubble = new InfoBubble({maxWidth: 300});

    // assign it into the structure
    markers[options.MainID] = marker;
}

tree.on('checkchange', function(node){
    var data = node.data;

    if (data.checked == true){
        var options = {
            lat:3.951941,
            lng:102.052002,
            marker: {title:"Hello World!"},
            listeners: {
                click: function(e){

                }
            },
            MainID: data.MainID
        };     
        addDoctorLocation(options);           
    } else {
        markers[data.MainID].setMap(null);
    }

    Ext.MessageBox.show({
        title: 'Changed checkbox status',
        msg: 'MainID: ' + data.MainID + ' <br /> Checkbox status: ' + data.checked,
        icon: Ext.MessageBox.INFO
    });
}); 
```

# python - 熊猫组合多个数据框或用作更新

> ID：15034594
> 
> 赞同：0
> 
> 时间：2013-02-22T22:56:26.983
> 
> 标签：python, pandas

有没有办法根据索引和列连接、连接或合并数据*框*？例如，假设我有一个数据框列表，我想要类似的东西

```
df = pandas.fullConcat(dfList) 
```

where`df.index`应该是 in 中的索引的`dfList` `('outer' join)`并`df.columns`集，也应该是 中的列的并集`dfList`。我认为所有的 concat、join 和 merge 方法都只是对索引或列进行连接。我想解决方法是 stack/unstack 或 reset_index？我想念什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:08:27.763

我认为您将不得不重置索引：

```
df = df1.reset_index().merge(df2.reset_index(), on=['index','cols']).set_index('index') 
```

# javascript - 错误图像未在 jQuery 幻灯片中显示

> ID：15034600
> 
> 赞同：-1
> 
> 时间：2013-02-22T22:56:58.333
> 
> 标签：javascript, jquery, html, dreamweaver

我正在使用 jQuery 和 HTML 制作幻灯片，但我遇到了一些麻烦：显示了一张图像，而其他幻灯片没有。我无法弄清楚问题出在哪里。有没有人遇到过类似的问题？

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JQuery Slider</title>
    <style type="text/css">
      .slider{
        width:800px;
        height:350px;
        overflow:hidden;
        margin:30px auto;
      }
      .slider img{
        width:800px;
        height:350px;
        display:none;
      }
    </style>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script type="text/javascript">
 function Slider(){
 $('#img1').show("fade", 500);
 $('#img2').delay(5500).hide("slide", {direction:"left"}, 500);

 var sc=$(".slider img").size();
 var count=2;

 setInterval(function(){

     $(".slider#"+count).show("slide", {direction:"right"}, 500);
     $(".slider#"+count).delay(5500).hide("slide", {direction:"left"}, 500);

     if(count == sc){

     count=1;
     }else{
        count=count+1;
     }
     }, 6500);
 }

</script>
</head>

<body onload="Slider();">

<div class="slider">

<img id="img1" src="img/13052012438.jpg"border="0"alt="image1" />
<img id="img2" src="img/25052012442.jpg"border="0"alt="image2" />

<img id="img3" src="img/13052012439.jpg"border="0"alt="image3" />
<img id="img4" src="img/25052012441.jpg"border="0"alt="image4" />

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:04:47.253

用这个...

```
$(document).ready(function(){
 $('#img1').show("fade", 500);
 $('#img2').delay(500).hide("slide", {direction:"left"}, 500);
 var sc=$(".slider img").size();
 var count=2;

 setInterval(function(){
     $("#img"+count).show("slide", {direction:"right"}, 500);
     $("#img"+count).delay(500).hide("slide", {direction:"left"}, 500);
     if(count == sc){
         count=1;
     }else{
        count=count+1;
     }
     }, 6500);
 }); 
```

看看这个[jSfiddle 例子](http://jsfiddle.net/fmzdy/1/)

# facebook - Facebook 活动封面（图形 API）

> ID：15034602
> 
> 赞同：2
> 
> 时间：2013-02-22T22:57:05.770
> 
> 标签：facebook, events, facebook-graph-api, cover

Facebook 今天发布了活动页面的新设计 ( [http://allfacebook.com/testing-new-layout-for-events_b111326](http://allfacebook.com/testing-new-layout-for-events_b111326) )

有什么方法可以访问封面 url 并使用 Graph API 创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:12:21.683

是的，Facebook 在活动字段中添加了“封面”。您可以在 Graph API 资源管理器中轻松对其进行测试。根据我的检查，它不会总是返回指向封面图片位置的链接（即使活动有封面照片。有时它也不会返回活动的常规“图片”（对于带有封面照片和没有封面照片的活动。似乎还在测试中。

# ms-access - 使用查询和控件的搜索功能

> ID：15034614
> 
> 赞同：1
> 
> 时间：2013-02-22T22:58:31.587
> 
> 标签：ms-access

我正在尝试在表单上使用搜索功能。我将表单基于作为表副本的查询，但条件链接到表单上的控件。前任。

```
WHERE (((tblFamily.FamilyName) Like "*" & [Forms]![frmFamily]![cntrlFamilyName] & "*") 
```

我也想在地址、城市等其他领域这样做。但是，如果我对地址字段应用相同的逻辑，空白记录将被忽略并且永远不会返回，即使没有将任何内容放入控件。

如何修复它，以便当没有任何内容放入 cntrlAddress 时，搜索不会忽略具有空白地址的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:09:40.243

您可以将一个空字符串附加到您的字段并对其进行搜索：

```
WHERE tblFamily.FamilyName & "" 
   Like "*" & [Forms]![frmFamily]![cntrlFamilyName] & "*" 
```

这将意味着`tblFamily.FamilyName`不会为空，当`[Forms]![frmFamily]![cntrlFamilyName]`为空时，查询将显示：

```
Where "" Like "*"
Where "bob" Like "*" 
```

等等。

# angularjs - Angular js没有按预期更新dom

> ID：15034615
> 
> 赞同：7
> 
> 时间：2013-02-22T22:58:40.943
> 
> 标签：angularjs

我对此有一个小提琴，但基本上它所做的是对输入到文本框中的地址进行地理编码。输入地址并按下“回车”后，dom 不会立即更新，而是等待文本框的另一次更改。如何在提交后立即更新表格？我对 Angular 很陌生，但我正在学习。我觉得这很有趣，但我必须学会以不同的方式思考。

这是小提琴和我的controller.js

[http://jsfiddle.net/fPBAD/](http://jsfiddle.net/fPBAD/)

```
var myApp = angular.module('geo-encode', []);

function FirstAppCtrl($scope, $http) {
  $scope.locations = [];
  $scope.text = '';
  $scope.nextId = 0;

  var geo = new google.maps.Geocoder();

  $scope.add = function() {
    if (this.text) {

    geo.geocode(
        { address : this.text, 
          region: 'no' 
        }, function(results, status){
          var address = results[0].formatted_address;
          var latitude = results[0].geometry.location.hb;
          var longitude = results[0].geometry.location.ib;

          $scope.locations.push({"name":address, id: $scope.nextId++,"coords":{"lat":latitude,"long":longitude}});
    });

      this.text = '';
    }
  }

  $scope.remove = function(index) {
    $scope.locations = $scope.locations.filter(function(location){
      return location.id != index;
    })
  }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T23:03:39.183

您的问题是该`geocode`函数是异步的，因此会在 AngularJS 摘要周期之外进行更新。您可以通过将回调函数包装在对 的调用中来解决此问题`$scope.$apply`，这让 AngularJS 知道运行摘要，因为内容已更改：

```
geo.geocode(
  { address : this.text, 
    region: 'no' 
  }, function(results, status) {
    $scope.$apply( function () {
      var address = results[0].formatted_address;
      var latitude = results[0].geometry.location.hb;
      var longitude = results[0].geometry.location.ib;

      $scope.locations.push({
        "name":address, id: $scope.nextId++,
        "coords":{"lat":latitude,"long":longitude}
      });
    });
}); 
```

# r - 如何使用 facet_wrap 从行更改为列的主要顺序？

> ID：15034616
> 
> 赞同：7
> 
> 时间：2013-02-22T22:58:47.677
> 
> 标签：r, ggplot2

我想制作一个 2x4 的图表数组，显示分布随时间的变化。默认`ggplot`排列`facet_wrap`是第一行有系列 1&2，第二行有系列 3&4，依此类推。我想改变这一点，使第一列按顺序排列 (1->2->3->4) 和然后第二列有接下来的 4 个系列。这样，您的眼睛可以垂直比较立即相邻的时间分布（我认为它们应该如此）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-05-18T14:46:26.920

使用方向`dir`参数来`facet_wrap()`。默认是水平的，这可以切换到垂直：

```
# Horizontally
ggplot(mtcars, aes(x=hp, y=mpg)) + geom_point() + facet_wrap(~ cyl, ncol=2)

# Vertically
ggplot(mtcars, aes(x=hp, y=mpg)) + geom_point() + facet_wrap(~ cyl, ncol=2, dir="v") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T00:03:59.543

看起来您需要在 facet_wrap 调用之前使用排序因子执行此操作：

```
 fac <- factor( fac, levels=as.character(c(1, 10, 2, 20, 3, 30, 4, 40) ) ) 
```

as/table in 的默认`facet_wrap`值为 TRUE，它将把最小值（在本例中为“1”）放在左上角，将最大值（在上面的示例中为“40”）放在右下角。所以：

```
 pl + facet_wrap(~fac, ncol=2, nrow=4) 
```

您的评论表明您正在使用数字类变量。（你的评论仍然没有提供一个有效的例子，你似乎认为这是我们的责任，而不是你的责任。从哪里获得这样的权利概念？）这应该创建一个可能是“列专业”的因素，以数字或因素输入：

```
> ss <- 1:8; factor(ss, levels=ss[matrix(ss, ncol=2, byrow=TRUE)])
[1] 1 2 3 4 5 6 7 8
Levels: 1 3 5 7 2 4 6 8 
```

另一方面，我可以想到这可能是有效方法的情况：

```
> ss <- 1:8; factor(ss, levels=ss[matrix(ss, nrow=2, byrow=TRUE)])
[1] 1 2 3 4 5 6 7 8
Levels: 1 5 2 6 3 7 4 8 
```

# html - 如何删除表格元素中图像底部的边距？

> ID：15034620
> 
> 赞同：0
> 
> 时间：2013-02-22T22:59:00.043
> 
> 标签：html, css

我在表格元素中有一个图像，并且图像下方似乎总是有一个边距。下面的最小示例显示了该问题。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>                                                                           
    <head>                                                                       
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">      
        <style type="text/css">                                                  
            body {                                                               
                margin: 0;                                                       
                padding: 0;                                                      
            }                                                                    

            table {                                                              
                width: 100%;                                                     
                border-spacing: 0;                                               
            }                                                                    

            table td {                                                           
                padding: 0;                                                      
                border: 1px dotted;                                              
            }                                                                    
        </style>                                                                 
    </head>                                                                      

    <body>                                                                       
        <table>                                                                  
            <tr>                                                                 
                <td>                                                             
                    <img src="http://cdn.inquisitr.com/wp-content/2012/10/colonel-meow-facebook-e1349873175523.jpeg">
                </td>                                                            
            </tr>                                                                
        </table>                                                                 
    </body>                                                                      

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:05:40.750

将 CSS 样式添加`vertical-align: bottom;`到您的图像中，就可以了。除非您不需要图像，否则请`display: inline-block;`使用以前用户的答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:03:53.300

您需要更改图像以显示为块。将此添加到您的 css 样式中... img { display:block;}

# wcf-data-services - 使用 WCF 数据服务时如何选择要序列化的属性？

> ID：15034621
> 
> 赞同：0
> 
> 时间：2013-02-22T22:59:00.730
> 
> 标签：wcf-data-services

我开始使用 WCF 数据服务。WCF 服务要求程序员显式定义 DataContract 和构成 DataContract 的 DataMembers，但我没有看到 WCF 数据服务有任何这样的事情。给定一个类，在使用 WCF 数据服务时如何选择要序列化的属性？

当我尝试为我的 SQL Server 数据库创建 WCF 数据服务时，我收到一个错误 - 它不知道如何序列化 DbGeometry 类型的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:38:01.440

不要被 WCF 这个名字所迷惑 - WCF 数据服务比传统的 WCF 更多地是关于 OData，因此您不需要考虑根据 DataContact/DataMember 公开的数据。如果您公开 SQL 数据库的内容，请使用将隐藏数据布线内部的实体框架提供程序。否则，您将需要使用更多工作的反射或自定义提供程序（搜索示例）。

# sql - 检查 PostgreSQL 中的统计目标

> ID：15034622
> 
> 赞同：17
> 
> 时间：2013-02-22T22:59:01.693
> 
> 标签：sql, postgresql, database-design, postgresql-9.2

我已经搜索过，但找不到任何简单、直接的答案。如何检查当前使用的统计目标`ANALYZE`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-22T23:22:20.273

统计目标的设置存储在目录表中的每列中[`pg_attribute`](https://www.postgresql.org/docs/current/catalog-pg-attribute.html)。你可以这样设置：

```
ALTER TABLE myschama.mytable ALTER mycolumn SET STATISTICS 127; 
```

并像这样检查它：

```
SELECT attstattarget
FROM   pg_attribute
WHERE  attrelid = 'myschama.mytable'::regclass
AND    attname = 'mycolumn'; 
```

或者您只需在 pgAdmin 的对象浏览器中查看创建脚本，如果值与[`default_statistics_target`](https://www.postgresql.org/docs/current/runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET).

我引用手册`attstattarget`：

> attstattarget 通过 控制为该列累积的统计信息的详细程度`ANALYZE`。零值表示不应收集统计信息。**负值表示使用系统默认统计目标。**正值的确切含义取决于数据类型。对于标量数据类型，attstattarget 既是要收集的“最常见值”的目标数量，也是要创建的直方图 bin 的目标数量。

**大胆**强调我的。

普通索引列的统计信息与列统计信息相同，并且在统计信息表中没有单独的条目。**但是 Postgres 为索引表达式**收集单独的统计信息。这些可以以类似的方式进行调整：

```
ALTER INDEX myschema.myidx ALTER COLUMN 1 SET STATISTICS 128; 
```

在没有实际列名的情况下，序号用于寻址索引列，对应于`pg_attribute.attnum`：

```
SELECT attstattarget
FROM   pg_attribute
WHERE  attrelid = 'myschama.myidx'::regclass
AND    attnum = 1; 
```

该设置实际上只影响下次`ANALYZE`手动运行或由`autovacuum`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-10T11:14:09.323

这提供了正在收集的当前统计信息的更清晰视图

```
SELECT attrelid::regclass, attname, attstattarget FROM pg_attribute WHERE attstattarget >= 0 order by attstattarget desc; 
```

# php - PHP Image Uploader——截断数组后处理？

> ID：15034623
> 
> 赞同：0
> 
> 时间：2013-02-22T22:59:01.673
> 
> 标签：php, arrays

好吧，我正在为一些客户构建一个基本的图像上传器，我遇到了某种错误，我正在撕扯我的头发。

在我得到 $_FILES 数组后，我做了一些处理，以便更容易解析图像，但后处理我的值被截断。

这是相关的PHP：

```
function organizeFilesArray(&$file_post) {

    $file_array = array();
    $file_count = count($file_post['name']);
    $file_keys = array_keys($file_post);

    for ($i=0; $i<$file_count; $i++) {
        foreach ($file_keys as $key) {
            $file_array[$i][$key] = $file_post[$key][$i];
            echo "$file_array[$i][$key]";
            echo " ... ";
            echo "$file_post[$key][$i]    ";
        }
        echo "$file_count ";

    }

    return $file_array;
}

if(isset($_POST)){
    $destinationDirectory = '/Applications/MAMP/htdocs/image_upload/uploads/';

    //check if _FILES array is empty or if the file was uploaded via POST
    if(!isset($_FILES['ImageFile']) || !is_uploaded_file($_FILES['ImageFile']['tmp_name'])){
        die('Something went wrong with Upload!');
    }

    //clean up the array so I can handle it simply
    //$imageArray = organizeFilesArray($_FILES['ImageFile']);
    $file_array = organizeFilesArray($_FILES['ImageFile']);
    echo" array size pp: " . sizeof($file_array);
    foreach($file_array as $file){
        //random number to be added after image name
        $randomNumber   = rand(0, 9999999999);

        //access these values by using their index position
        //$imageName  = str_replace(' ','-',strtolower($file['name']));
        $imageName  = $file['name']; //get file name
        $imageSize  = $file['size']; // Obtain original image size
        $tempSrc    = $file['tmp_name']; // Tmp name of image file stored in PHP tmp folder
        $imageType  = $file['type']; //Obtain file type, returns "image/png", image/jpeg, text/plain etc.

        echo "This is the type before we try: " . $file['type'];
        echo "This is the name before we try: " . $file['name'];
        echo "This is the size before we try: " . $file['size'];
        //make sure filetype is supported
        switch(strtolower($imageType)){
            case 'image/png':
                $createdImage =  imagecreatefrompng($file['tmp_name']);
                break;
            case 'image/gif':
                $createdImage =  imagecreatefromgif($file['tmp_name']);
                break;
            case 'image/jpeg':
            case 'image/pjpeg':
                $createdImage = imagecreatefromjpeg($file['tmp_name']);
                break;
            default:
                die('Unsupported File!:'.$imageType); //output error and exit
        } 
```

很抱歉那里的所有回声语句，试图弄清楚发生了什么。当尝试上传一些东西时，我得到了这个（来自 Firebug）： ![在此处输入图像描述](../Images/38ba156e8b2a69c5a09f0b4896da8a92.png)

所以.. 处理后，我数组中的所有内容都被截断为第一个字符？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:28:16.783

看起来您可能只是分解了一个上传的文件。

尝试改变：

```
$file_array = organizeFilesArray($_FILES['ImageFile']); 
```

只是

```
$file_array = organizeFilesArray($_FILES); 
```

# php - 如何在 PHP 中创建对象

> ID：15034624
> 
> 赞同：-3
> 
> 时间：2013-02-22T22:59:06.540
> 
> 标签：php

我很难理解如何在我的脚本中创建对象......我收到这个错误：

```
PHP Fatal error:  Call to undefined function Object() 
```

我的代码是这样的：

```
$block = Object();  // error here
$row['x'] = 5;
$row['y'] = 7;
$row['widthx'] = 3;
$row['widthy'] = 3;

for($i = $row['x']; $i < ($row['x'] +  $row['widthx']); $i++){

    if(!is_object($block[$i])){
        $block[$i] = Object();
    }

} 
```

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:01:42.290

在最简单的形式中，对象是类。

```
class coOrds {

    // create a store for coordinates
    private $xy;

    function __contruct() {

        // it's still an array in the end
        $this->xy = array();

    }

    function checkXY($x, $y) {

        // check if xy exists
        return isset($this->xy[$x][$y]);

    }

    function saveXY($x, $y) {

        // check if XY exists
        if ($this->checkXY) {

            // it already exists
            return false;

        } else {

            // save it
            if (!isset($this->xy[$x])) {

                // create x if it doesn't already exist
                $this->xy[$x] = array();

            }

            // create y
            $this->xy[$x][$y] = '';

            // return
            return true;

        }

    }

}

$coords = new coOrds();

$coords->saveXY(4, 5); // true
$coords->saveXY(5, 5); // true
$coords->saveXY(4, 5); // false, already exists 
```

在这里开始阅读它们：[http ://www.php.net/manual/en/language.oop5.basic.php](http://www.php.net/manual/en/language.oop5.basic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:03:52.823

您需要定义类并将它们实例化为对象：

```
 class Object {
        private $name;

        __construct($name){
            $this->name=$name
        }

        public function setName($name)
        {
            $this->name = $name;

            return $this;
        }

        public function getName()
        {
            return $this->name;
        }
    }

    $block = $new Object($name); 
```

# ruby-on-rails - 当我不知道迭代的上限是多少时，如何对集合进行迭代？

> ID：15034625
> 
> 赞同：0
> 
> 时间：2013-02-22T22:59:10.923
> 
> 标签：ruby-on-rails, ruby

我有一个要从中提取数据的 API，我想从该 API 收集所有标签...但我不知道标签的数量，并且 API 通过返回的最大结果数限制访问在任何 1 个电话 (100) 中。虽然它有无限数量的页面。

所以一个调用可能看起来像这样：`Tag.update_tags(100, 5)`哪里`100`是 1 次调用中返回的最大对象数，`5`是要开始的页面（即，如果您假设标签是按顺序存储的，这就是说返回带有 ID 的标签记录的范围`401 - 500`。

问题是，我不想手动输入`5`（即我不知道上限是多少）。我无法 ping 标签的总数（如果有，我会简单地将它分开并将这个调用放在一个循环中，直到那个数字）。

我所知道的是，一旦它到达一个没有任何结果的页面，它将返回一个空数组`[]`。

那么，如何循环遍历所有标签并在返回的结果为空数组时停止（这将是返回的最终结果，因此未评估）？

那个循环是什么样子的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:45:08.800

当结果返回空数组时，使用带有 break 语句的无条件循环。

```
i = 1
loop do
  result = call_to_api(i)
  do_something_with(result)
  i += 1
  break if result.empty?
end 
```

当然，在生产场景中，您需要一些更健壮的东西，包括异常处理程序、一些进度日志报告和某种具体的迭代限制，以确保循环不会变得无限。

**更新**

这是一个使用类来包装逻辑的示例。

```
class Api
  DEFAULT_OPTIONS = {:start_position => 1, :max_iterations => 1000}

  def initialize(base_uri, config)
    @config = DEFAULT_OPTIONS.merge(config)
    @position = config[:start_position]
    @results_count = 0
  end

  def each(&block)
    advance(&block) while can_advance?
    log("Processed #{@results_count} results")
  end

  def advance(&block)
    yield result
    @results_count += result.count
    @position += 1
    @current_result = nil
  end

  def result
    @current_result ||= begin
      response = Net::HTTP.get_response(current_uri)
      JSON.decode(response.body)
    rescue
      # provide some exception handling/logging
    end
  end

  def can_advance?
    @position < (@config[:start_position] + @config[:max_iterations]) && result.any?
  end

  def current_uri
    Uri.parse("#{@base_uri}?page=#{@position}")
  end
end

api = Api.new('http://somesite.com/api/v1/resource')

api.each do |result|
  do_something_with(result)
end 
```

通过为每个线程设置启动和迭代计数，这也有一个角度允许并发，这将通过并发 http 请求明确地加快这一速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:08:11.993

嗯。您一次可以获得 100 个项目，并从特定页面开始。如何实现迭代取决于您想要做什么。假设您要收集所有唯一标签。建立一个映射（例如，一个HashMap），然后一次检索一页并处理它。当你点击一个空的页面时，你就完成了。

```
// Implements a map and methods to update it
MyHashMap uniqueTags;
// Stores a page of tags
Page page;
Do
    // get a page of tags
    page = readTags();
    if (page != null) {
        uniqueTags.getUniqueTags(page);
    } else {
        break;
    }
until (page == null); 
```

# qt - QGraphicsView 双击事件和 ScrollHandDrag 模式项问题

> ID：15034627
> 
> 赞同：5
> 
> 时间：2013-02-22T22:59:30.363
> 
> 标签：qt, python-2.7, qt4, pyqt, pyqt4

我正在尝试创建具有以下行为的 QGraphicsView：

*   当按住 control 键并按下鼠标左键时，应将视图设置为 ScrollHandDrag 模式以允许用户平移。

*   在 ScrollHandDrag 模式下，项目不应该是可选择/可移动的，如这里的问题：[在 QGraphicsView 的 ScrollHandDrag 模式中，如何停止 QGraphicsItems 在场景中的移动？](https://stackoverflow.com/questions/12928190/in-scrollhanddrag-mode-of-qgraphicsview-how-to-stop-movement-of-qgraphicsitems/12935325#12935325)

*   如果按住控制键，单击鼠标左键，然后释放控制键，则视图应保持在 ScrollHandDrag 模式，直到释放鼠标，或者如果当时按下控制键，则将保持此模式鼠标被释放。

对我来说，这听起来应该相当简单。我已经实现了来自链接问题的逻辑，以及一些额外的逻辑来满足我的额外要求。然而，这似乎会导致以下两个问题：

*   在 mousePressEvent 中，将鼠标下的项目设置为不具有可移动和可选择标志，调用基类，然后重新应用标志会导致项目“冻结”。解决这个问题的唯一方法似乎是控制+单击，释放控制+释放在项目外单击几次。此外，当它进入此状态时，无法移动任何项目（尽管它们仍然可以被选中）。

*   双击视图会导致一个 mousePressEvent，然后是两个 mouseReleaseEvents！这打破了我的逻辑。

所以我想知道如何解决当 QGraphicsView 的[In ScrollHandDrag 模式中的逻辑时项目冻结的问题，如何停止 QGraphicsItems 在场景中的移动？](https://stackoverflow.com/questions/12928190/in-scrollhanddrag-mode-of-qgraphicsview-how-to-stop-movement-of-qgraphicsitems/12935325#12935325)使用，以及如何处理奇怪的双击鼠标事件 - 有没有办法关闭它们？

这是我的代码（这也是我的 hello world Python，所以如果我犯了一些可怕的 Python 错误，请告诉我）：

```
#! /usr/bin/env python
# -*- coding: utf-8 -*-

import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyMainWindow(QMainWindow):
    def __init__(self):
        super(MyMainWindow, self).__init__()
        self.initUI()

    def initUI(self):
        self.setWindowTitle("Test")
        self.gv = MyGraphicsView()
        self.setCentralWidget(self.gv)
        self.setGeometry(170, 130, 450, 250)

class MyGraphicsView(QGraphicsView):
    def __init__(self):
        super(MyGraphicsView, self).__init__()
        self.setup()

    def setup(self):
        self.m_MouseIsDown = False
        self.m_ControlKeyDown = False
        self.setDragMode(QGraphicsView.RubberBandDrag)

    def mouseMoveEvent(self,  event):
       # print "mouseMoveEvent: " + str(event.pos().x()) + "," + str(event.pos().y())
        super(MyGraphicsView,  self).mouseMoveEvent(event);

    def mousePressEvent(self,  event):
        print "mousePressEvent"

        itemUnderMouse = self.itemAt(event.pos())
        if  itemUnderMouse is not None:
            bHadMovableFlagSet = itemUnderMouse.flags() & QGraphicsItem.ItemIsMovable
            bWasSelected = itemUnderMouse.isSelected()            
            bHadSelectableFlagSet = itemUnderMouse.flags() & QGraphicsItem.ItemIsSelectable
            if bHadMovableFlagSet:
                print "has ItemIsMovable"
            else:
                print "hasn't ItemIsMovable"
            if bHadSelectableFlagSet:
                print "has ItemIsSelectable"
            else:
                print "hasn't ItemIsSelectable"
            if bWasSelected:
                print "isSelected true"
            else:
                print "isSelected false"
            itemUnderMouse.setSelected(False)

        if event.button() == Qt.LeftButton:
            print "mousePressEvent: left button is now down"
            self.m_MouseIsDown = True

        if self.dragMode() == QGraphicsView.ScrollHandDrag and event.button() == Qt.LeftButton:
            print "mousePressEvent: left button down and ScrollHandDrag set"
            self.PreventItemsFromMovingOrBeingSelectedWhenPannning(event)
            return

        print "mousePressEvent: pass through"
        super(MyGraphicsView,  self).mousePressEvent(event)

    def mouseReleaseEvent(self,  event):
        print "mouseReleaseEvent"
        if event.button() == Qt.LeftButton:
            print "mouseReleaseEvent - left button is now up"
            self.m_MouseIsDown = False
            if self.dragMode() == QGraphicsView.ScrollHandDrag and self.m_ControlKeyDown == False:
                print "mouseReleaseEvent - left button up, in ScrollHandDrag mode and control key is not pressed, change to RubberBandDrag"
                self.setDragMode(QGraphicsView.RubberBandDrag)

        super(MyGraphicsView,  self).mouseReleaseEvent(event)

    def keyPressEvent(self,  event):
        if event.key() == Qt.Key_Control:
            print "control key down"
            self.m_ControlKeyDown = True

        # ignore if mouse already down since we don't want to suddenly change to pan mode if an item is being moved
        if event.key() == Qt.Key_Control and self.dragMode() != QGraphicsView.ScrollHandDrag and self.m_MouseIsDown == False:
            print "keyPressEvent - control key down, mouse isn't down and drag mode is not ScrollHandDrag, change to ScrollHandDrag"
            self.setDragMode(QGraphicsView.ScrollHandDrag)
        super(MyGraphicsView,  self).keyPressEvent(event)

    def keyReleaseEvent(self,  event):
        if event.key() == Qt.Key_Control:
            print "control key up"
            self.m_ControlKeyDown = False

        if event.key() == Qt.Key_Control and self.dragMode() == QGraphicsView.ScrollHandDrag and self.m_MouseIsDown == False:
            print "keyReleaseEvent - control key up and drag mode is ScrollHandDrag, mouse is not pressed, change to RubberBandDrag"
            self.setDragMode(QGraphicsView.RubberBandDrag)
        super(MyGraphicsView,  self).keyReleaseEvent(event)

    def wheelEvent(self,  event):
        factor = 1.2;
        if event.delta() < 0:
            factor = 1.0 / factor
        self.scale(factor, factor)

    def PreventItemsFromMovingOrBeingSelectedWhenPannning(self,  mouseEvent):
        itemUnderMouse = self.itemAt(mouseEvent.pos())
        if  itemUnderMouse is not None:
            print "preventing item from moving"
            bHadMovableFlagSet = itemUnderMouse.flags() & QGraphicsItem.ItemIsMovable
            itemUnderMouse.setFlag(QGraphicsItem.ItemIsMovable,  False)

            bWasSelected = itemUnderMouse.isSelected()

            bHadSelectableFlagSet = itemUnderMouse.flags() & QGraphicsItem.ItemIsSelectable
            itemUnderMouse.setFlag(QGraphicsItem.ItemIsSelectable,  False)

            super(MyGraphicsView,  self).mousePressEvent(mouseEvent)

            if bHadMovableFlagSet:
                print "set ItemIsMovable"
                itemUnderMouse.setFlag(QGraphicsItem.ItemIsMovable,  True)
            if bHadSelectableFlagSet:
                print "set ItemIsSelectable"
                itemUnderMouse.setFlag(QGraphicsItem.ItemIsSelectable,  True)
            if bWasSelected:
                print "setSelected True"
                itemUnderMouse.setSelected(True)

        else:
             print "no item under mouse - pass through"
             super(MyGraphicsView,  self).mousePressEvent(mouseEvent)

class MyGraphicsScene(QGraphicsScene):
    def __init__(self,  parent):
        super(MyGraphicsScene,  self).__init__()

def main():
    a = QApplication(sys.argv)
    w = MyMainWindow()
    w.show()

    scene = MyGraphicsScene(w)
    w.gv.setScene(scene)

    rect = scene.addRect( 10,  10,  40,  40)
    rect.setFlag( QGraphicsItem.ItemIsSelectable )
    rect.setFlag( QGraphicsItem.ItemIsMovable )

    rect = scene.addRect( 40,  40,  40,  40)
    rect.setFlag( QGraphicsItem.ItemIsSelectable )
    rect.setFlag( QGraphicsItem.ItemIsMovable )

    sys.exit(a.exec_()) 

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T17:18:01.727

如果您在平移时不调用`mouse*Event`s 中的基本实现，则项目选择不会成为问题。但是，这现在需要重新实现内置的平移功能。幸运的是，实现它并不难。

在 IRC (#pyqt @ freenode) 进行了一些迭代之后，这是最终的实现：

*   按住`CTRL`键启用平移。按下鼠标时，释放`CTRL`键保持平移模式。
*   只需按下鼠标即可激活橡胶选择
*   所有动作都被控制`Left-Button`

```
class MyGraphicsView(QGraphicsView):
    def __init__(self):
        super(MyGraphicsView, self).__init__()
        self.setDragMode(QGraphicsView.RubberBandDrag)
        self._isPanning = False
        self._mousePressed = False

    def mousePressEvent(self,  event):
        if event.button() == Qt.LeftButton:
            self._mousePressed = True
            if self._isPanning:
                self.setCursor(Qt.ClosedHandCursor)
                self._dragPos = event.pos()
                event.accept()
            else:
                super(MyGraphicsView, self).mousePressEvent(event)

    def mouseMoveEvent(self, event):
        if self._mousePressed and self._isPanning:
            newPos = event.pos()
            diff = newPos - self._dragPos
            self._dragPos = newPos
            self.horizontalScrollBar().setValue(self.horizontalScrollBar().value() - diff.x())
            self.verticalScrollBar().setValue(self.verticalScrollBar().value() - diff.y())
            event.accept()
        else:
            super(MyGraphicsView, self).mouseMoveEvent(event)

    def mouseReleaseEvent(self, event):
        if event.button() == Qt.LeftButton:
            if event.modifiers() & Qt.ControlModifier:
                self.setCursor(Qt.OpenHandCursor)
            else:
                self._isPanning = False
                self.setCursor(Qt.ArrowCursor)
            self._mousePressed = False
        super(MyGraphicsView, self).mouseReleaseEvent(event)

    def mouseDoubleClickEvent(self, event): pass

    def keyPressEvent(self, event):
        if event.key() == Qt.Key_Control and not self._mousePressed:
            self._isPanning = True
            self.setCursor(Qt.OpenHandCursor)
        else:
            super(MyGraphicsView, self).keyPressEvent(event)

    def keyReleaseEvent(self, event):
        if event.key() == Qt.Key_Control:
            if not self._mousePressed:
                self._isPanning = False
                self.setCursor(Qt.ArrowCursor)
        else:
            super(MyGraphicsView, self).keyPressEvent(event)

    def wheelEvent(self,  event):
        factor = 1.2;
        if event.delta() < 0:
            factor = 1.0 / factor
        self.scale(factor, factor) 
```

# assembly - 汇编保留寄存器值？

> ID：15034628
> 
> 赞同：3
> 
> 时间：2013-02-22T22:59:31.830
> 
> 标签：assembly, x86, printf

我在我在汇编中创建的函数中使用 printf 时遇到了一些麻烦。我做的功能是：

```
printnstars:
    movl $0, %edi
    movl 4(%esp), %ebx

starloop:
    cmpl %ebx, %edi
    je exitloop
    incl %edi
    pushl $star
    call printf
    addl $4, %esp
    jmp starloop

exitloop:
    ret 
```

该函数接受一个数字作为参数，我将其移至 %ebx，并使用以下命令打印该数量的“*”：

```
star:
    .asciz "*" 
```

该函数做了它应该做的事情，但是当我尝试做这样的事情时遇到了问题：

```
 pushl (%ecx)
    call printnstars
    pushl (%ecx)
    call printnstars 
```

其中 (%ecx) 是 2。如果我只打一次电话，它的行为与预期一样并打印 2 颗星，但当我再次调用它时，它会打印无限星。很明显 %ecx 一定是在 printf 内部弄乱了，因为我没有在我创建的任何东西中使用该寄存器。我该怎么做才能确保 (%ecx) 通过多次调用 printnstars 保持不变？

还需要注意的是，这是在一个函数内部使用的，该函数正在打印一个直方图，每行上都有星号，表示一个数字出现的次数。我的所有频率值都基于 %ecx，这就是我使用 (%ecx) 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:12:26.333

> 我该怎么做才能确保 (%ecx) 通过多次调用 printnstars 保持不变？

您将寄存器值保存在堆栈上的局部变量中。

另外，请记住，`printf()`它采用可变数量的参数，并且由于它事先不知道它们有多少以及它们的类型，因此它不会删除堆栈上的参数并将它们从堆栈中删除（通过调整`esp`）变成调用者的责任。

# iphone - 将文本字段添加到 tableviewheader

> ID：15034630
> 
> 赞同：1
> 
> 时间：2013-02-22T22:59:38.707
> 
> 标签：iphone, ios, ipad, ios6

我正在尝试将文本字段添加到标题视图。我不知道为什么我看不到我的文本字段。当我使用标签时，它可以完美运行。

以下是代码：

```
-(UIView*) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
       UIView *tableHeaderView = [[UIView alloc] initWithFrame:CGRectMake(40, 0, self.view.frame.size.width - 70, 30)];
    UITextField *sectionTitleTF1 = [[UITextField alloc] initWithFrame:CGRectMake(58, 0, 500, 30)];
    sectionTitleTF1.backgroundColor = [UIColor whiteColor];
    [sectionTitleTF1 becomeFirstResponder];
    [tableHeaderView addSubview:sectionTitleTF1];
return tableHeaderView; 
```

}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T03:40:25.593

尝试这个，

```
 You can adjust view, textfield frame based on your device ipad or iphone

 - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
return 30.0;
}

-(UIView*) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
UIView *tableHeaderView = [[UIView alloc] initWithFrame:CGRectMake(40, 0, self.view.frame.size.width - 70, 30)];
tableHeaderView.backgroundColor =[UIColor grayColor];
UITextField *sectionTitleTF1 = [[UITextField alloc] initWithFrame:CGRectMake(58, 0, 500, 30)];
sectionTitleTF1.backgroundColor = [UIColor whiteColor];
[sectionTitleTF1 setBackgroundColor:[UIColor whiteColor]];
[sectionTitleTF1 setFont:[UIFont boldSystemFontOfSize:15]];
[sectionTitleTF1 setBorderStyle:UITextBorderStyleLine];
[sectionTitleTF1 setTextAlignment:UITextAlignmentCenter];
[sectionTitleTF1 setKeyboardType:UIKeyboardTypeNumbersAndPunctuation];
[sectionTitleTF1 becomeFirstResponder];
[tableHeaderView addSubview:sectionTitleTF1];
return tableHeaderView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T09:11:15.733

只需添加这个 `sectionTitleTF1.borderStyle = UITextBorderStyleRoundedRect;` 然后你就会看到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:37:34.683

你实现了数据源的这个方法了吗？如果您希望显示部分标题，这是必须的。 `- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section`

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 30.0;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

此外，如果您不知道，您可以`UITextField`直接返回而不是添加为子视图。但是，您可能希望它作为子视图，具体取决于您想要实现的目标。

编辑：数据源不是委托

# php - 通过ssh协议访问SVN

> ID：15034633
> 
> 赞同：0
> 
> 时间：2013-02-22T23:00:25.173
> 
> 标签：php, svn, ssh, tortoisesvn

我有一个所有项目的外部 svn+ssh// url。我怎样才能访问它们？

我在 Windows 上工作，我知道我应该使用 TortoiseSVN。我应该怎么做才能从 repos 下载这些文件？

我需要非常直接的帮助，所以我会很高兴（并且觉得有义务给你买一些好的波兰伏特加 :D）如果你能写一些关于我应该一步一步做什么的观点？

（我发现的所有教程都描述了设置服务器，而不是专门访问它......）

编辑。请不要怪我问这样的问题，我这样做是因为我不想搞砸任何事情并最终删除所有存储库：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:36:33.757

[这里](http://www.vectorns.com/blog/technical-articles/1-tortoisesvn-over-ssh-on-windows-via-putty/)有一个很好的教程。本质上，您将 PuTTY 设置为通过 SSH 连接到目标服务器，然后 TortoiseSVN 将配置的 PuTTY 会话用于 SSH 连接。

# java - 错误找不到符号

> ID：15034634
> 
> 赞同：-1
> 
> 时间：2013-02-22T23:00:32.687
> 
> 标签：java, user-interface

我收到此错误 ./CreatePanel.java:35: error: cannot find symbol redText=new Jlabel(); ^ 符号：类 Jlabel 位置：类 CreatePanel 我该如何解决这个问题？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class CreatePanel extends JPanel
 {
   private Vector petList; 
   private JButton button1;
   private SelectPanel sPanel;
   private JLabel text1;
   private Jlabel redText;
   private JTextField petInput;
   private JTextArea petsIn;
   private Panel wPanel;
   private Panel alertPanel;
   private Panel petPanel;
   private Panel createPanel;

 public CreatePanel(Vector petList, SelectPanel sPanel)
  {
    this.petList = petList;
    this.sPanel = sPanel;

    // orgranize components here
    // here is an example
    text1=new JLabel("Enter a Pet Type"); 

    redText=new Jlabel();

    petInput=new JTextField();

    button1=new JButton("Create a Pet");

    petsIn=new JTextArea("No Pet");

    wPanel=new Panel(); 

    petPanel=new Panel();  

    createPanel=new Panel(); 

    alertPanel=new Panel();

    alertPanel.setLayout(new GridLayout(1,2));

    createPanel.setLayout(new GridLayout(2,3));

    petPanel.setLayout(new GridLayout(1,2));

    wPanel.setLayout(new GridLayout(3,1));  

    button1.addActionListener(new ButtonListener());

    add(wPanel);

    wPanel.add(alertPanel);

    alertPanel.add(redText);

    wPanel.add(petPanel);

    petPanel.add(text1);

    petPanel.add(petInput);

    wPanel.add(createPanel);

    createPanel.add(new JLabel());

    createPanel.add(button1);

    createPanel.add(new JLabel());  

    createPanel.add(new JLabel());  

    createPanel.add(new JLabel());

    createPanel.add(new JLabel());

    add(petsIn);

  }

  private class ButtonListener implements ActionListener
   {
    public void actionPerformed(ActionEvent event)
     {
         //when the button is pushed, the pet type
         //should be added to the list. This is also where
         //errors are handled.
         String inputPet = petInput.getText(); 

         boolean checker = false; 

         for (int p = 0; p < petList.size(); p++){ 
             if (inputPet.equalsIgnoreCase((String) petList.get(p))){
                checker = true; 

                 break;
             }
         }

         if(inputPet.equals("")){
             redText.setText("Please enter a pet type.");

             redText.setForeground(Color.red);
         } 
         else if (checker == true){
             redText.setText("The pet type already exists.");

             redText.setForeground(Color.red);
         }
          else {
             petList.add(inputPet);

             String addedPets = (String) petList.get(0);

             for(int i = 1; i < petList.size(); i++){
                 addedPets += "\n" + (String) petList.get(i);
             }
             redText.setText("Pet type added.");
             redText.setForeground(Color.red);
             petsIn.setText(addedPets);
             sPanel.updateUI();             
          } 
     } //end of actionPerformed method
         redText.setText("");

  } //end of ButtonListener class

} //end of CreatePanel class 
```

我收到此错误 ./CreatePanel.java:35: error: cannot find symbol redText=new Jlabel(); ^ 符号：类 Jlabel 位置：类 CreatePanel 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:06:16.300

看起来您对 redText 的 JLabel 声明应该是“JLabel”时是“Jlabel”。需要大写的 L。

# php - 我需要在不更改数据库的情况下从 SQL 字段中删除一些字符

> ID：15034641
> 
> 赞同：0
> 
> 时间：2013-02-22T23:01:30.783
> 
> 标签：php, mysql, sql, replace, html-table

我正在使用一个已经创建的数据库，我可以访问，但根本没有更改数据库的权限。

我正在使用查询

```
select last_count, query, job_id from twitterinblack46.job where job_id in ('.$job_id_all.') order by last_count desc; 
```

调用三列（`last_count`、`query`和`job_id`）并将它们显示在表格中。

此查询按我的意愿工作，但唯一的问题是该`query`列显示的数据在所需数据前面带有“%23”、“%40”、“%20”或“q=”。

在显示表格之前，我需要弄清楚如何摆脱这些字符串。

这是用于生成表的 while 语句：

```
while($row = mysql_fetch_array($result)){
    echo"<tr>";
    echo "<td>" . $row["job_id"] . "</td>";
    echo "<td>" . $row["last_count"] . "</td>";
    echo "<td>" . $row['query'] . "</td>";
    echo "<tr>";
}

echo "</table>"; 
```

我创建了这个查询：

```
select replace(replace(replace(REPLACE(query,'%23', ''),'%40',''),'q=',''),'%20','') from job; 
```

摆脱这些字符，它可以在我需要的时候完美运行，但是如何`$result`在创建表之前将此查询合并到我的另一个中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:39:08.073

```
$lst_search = array("%23", "%40", "%20", "q=");
$query = str_replace($lst_search, "", $row["query"]); 
```

然后在创建表时使用`$query`代替。`$row["query"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:42:57.237

您可以在打印表格时删除有问题的字符串：

```
echo "<td>" . str_replace(array('%23', '%40', '%20"', 'q='), '', $row['query']) . "</td>"; 
```

（如果您想将删除限制在字符串开头的字符，您可以查看[preg_replace](http://us.php.net/manual/en/function.preg-replace.php)）

# perl - Perl - 按值将参数传递给推送函数

> ID：15034649
> 
> 赞同：1
> 
> 时间：2013-02-22T23:01:57.350
> 
> 标签：perl

```
push (@{$processor{$-[0]}}, $metadata[$_]{"formatters"});
foreach my $key (keys @{$metadata[$_]{"formatters"}}) {
    $metadata[$_]{"formatters"}[$key]{"scope"} = "end";
}
push (@{$processor{$+[0]}}, $metadata[$_]{"formatters"}); 
```

我推`$metadata[$_]{"formatters"}`入`@{$processor{$-[0]}}`。然后我需要改变一些东西并再次推动它，但这些改变也反映在我首先推动的地方。好像我是通过`$metadata[$_]{"formatters"}`引用而不是按值传递它，但我找不到，如何按值传递它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:18:21.290

由于`$metadata[$_]{'formatters'}`它本身就是一个复杂的数据结构，它本身没有“价值”。不过，您可以推送它的副本。

只做一个浅拷贝（可能不是你想要的，因为新数组仍然会引用所有相同的哈希）：

```
$orig = $metadata[$_]{'formatters'};
$copy = [ @$orig ]; 
```

还要复制每个引用的哈希：

```
$orig = $metadata[$_]{'formatters'};
$copy = [ map +{%$_}, @$orig ]; 
```

或者只是复制任意数据结构：

```
$copy = Storable::dclone($orig); 
```

（CPAN 上有各种克隆模块也可以做到这一点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:40:11.327

我很担心你的设计。像这样的结构

```
$metadata[$_]{formatters}[$key]{scope} 
```

很复杂，而且您似乎有多个非常相似的数据副本。

但是，问题在于它`$metadata[$_]{formatters}`是对哈希数组的*引用。*无论您将该引用放在何处，它都会引用相同的数据，因此修改它将反映在对它的任何引用中。

您需要在修改哈希数组之前将其复制到相同的数据结构中，您可以使用此代码执行此操作。我怀疑该数组是一个稀疏数组（即并非所有元素都包含数据）并进行了相应编码。如果我错了，并且每个元素都是哈希引用，那么您可以将其简化为`my $copy = [ map { {%$_} } @$formatters ]`.

```
my $formatters = $metadata[$_]{formatters};

{
  my $copy = [ map $_ ? {%$_} : undef, @$formatters ];
  push @{$processor{$-[0]}}, $copy;

  for my $key (0 .. $#$copy) {
    $copy->[$key]{scope} = 'end';
  }
}

{
  my $copy = [ map $_ ? {%$_} : undef, @$formatters ];
  push @{$processor{$+[0]}}, $copy;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T23:29:36.870

这段代码甚至不会编译。您正在调用 @{$metadata[$_]{"formatters"}} 上的键，这不是哈希，而是数组。

这个问题不正确。

这段代码非常复杂且难以理解。我强烈建议在嵌套这样的结构时使用 -> 表示法，以清楚地表明您正在使用对子结构的引用。

要对结构进行深度复制，以免最终获得对子组件的引用，我建议您进行克隆。例如：

```
use Clone qw(clone);
push (@{$processor{$-[0]}}, clone($metadata[$_]{"formatters"})); 
```

# java - 地图中的 Java treeSet

> ID：15034651
> 
> 赞同：0
> 
> 时间：2013-02-22T23:02:09.637
> 
> 标签：java

Java新手，我想要做的是检索一个字符串名称，如果多个值之一在如下范围内，则打印到屏幕上：

```
public class SuperHeroes {
private Map<String, Set<Integer>> names;
private Set<Integer> pageNum;

    /**
     * Constructor for objects of class SuperHeroes
     */
    public SuperHeroes() {
        names = new HashMap<>();
        pageNum = new TreeSet<>();
    }

    /**
     * The fill() method creates 2 entries.
     */
    public void fill() {
        pageNum.add(1);
        pageNum.add(3);
        pageNum.add(7);
        names.put("Kent,Clark", pageNum);

        pageNum = new TreeSet<>();
        pageNum.add(2);
        pageNum.add(6);
        pageNum.add(4);
        names.put("Wayne,Bruce", pageNum);
    }

    public void findInRange(int num, int numb) {
        for (String eachName: names.keySet()) {
            for (int eachNum:pageNum) {
                if(eachNum >= num && eachNum <= numb) {
                    System.out.println(names.get(eachName));
                }
            }      
        }
    }
} 
```

如果 pageNum 在该范围内，则打印到屏幕的结果将是超级英雄的名字。我目前得到的输出是所有数字。任何帮助将不胜感激。如果你能指出我正确的方向将是一个帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:32:32.703

您的代码中的第一个错误是您定义名称和 pageNum 的方式。应该是这样的：

```
public SuperHeroes() 
{
    names = new HashMap<String, Set<Integer>>();
    pageNum = new TreeSet<Integer>();
} 
```

现在你可以使用`subSet()`方法`Treeset`来实现你想要的。代码如下：
**编辑**：从返回值中
检索`Treeset`给定名称时，`names`需要进行类型转换以`TreeSet`键入。`subset`使用with 的方法时也要做同样的事情`tSet`。

```
 public void findInRange(int num, int numb) 
    {
        for (String eachName: names.keySet()) 
        {
            TreeSet<Integer> tSet = (TreeSet<Integer>)names.get(eachName);
            TreeSet<Integer> subSet = new TreeSet<Integer>();
            subSet = (TreeSet<Integer>)tSet.subSet(num,true,numb,true);//for JDK 1.6 or above. returns num<=numbers<=numb
            //TreeSet<Integer> subSet = tSet.subSet(num-1, numb+1);//for JDK version less than 1.6
            if (subSet.size() != 0)
            {
                System.out.println("Hero is "+eachName);
                break;//you can ommit it if you want to print all heroes having pagenum in range num to numb
            }
        }      
    } 
```

该`fill`方法还需要修改为：

```
public void fill() 
{
    pageNum.add(1);
    pageNum.add(3);
    pageNum.add(7);
    names.put("Kent,Clark", pageNum);

    pageNum = new TreeSet<Integer>();//Use proper way of object construction with generics
    pageNum.add(5);
    pageNum.add(6);
    pageNum.add(4);
    names.put("Wayne,Bruce", pageNum);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:10:51.507

首先，您必须使用超级英雄的名字来获取树集，然后读取树中的每个项目并将其与您需要的数字进行比较，如果比较为真，则打印超级英雄的名字。

看看这个链接

[http://www.easywayserver.com/blog/java-treeset-example/](http://www.easywayserver.com/blog/java-treeset-example/)

最好的祝福

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:20:37.513

你告诉它打印与找到的名称对应的数字与行

```
 System.out.println(names.get(eachName)); 
```

如果您只想显示名称，那应该是

```
 System.out.println(eachname); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:26:48.750

好吧，我们都在这里猜测。也许你需要这个：

```
public void findInRange(int num, int numb)

    {

        for (String eachName : names.keySet())

        {
            for (int eachNum : pageNum)

            {

                if (eachNum >= num && eachNum <= numb)

                {
                    for (int temp = 0; temp < eachNum; temp ++)
                    {
                    System.out.println(eachName);
                    }
                }
            }

        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T23:45:35.040

想知道，您已经在构造函数中初始化了一个 pageNum，为什么要在方法中创建另一个 pageNum `fill()`？这可能是因为构造函数中的一个可能会“隐藏”填充方法中的第二个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T22:48:56.673

如果有人有兴趣，我用以下代码解决了这个问题：

```
public void findInRange(int num, int numb)
{
 for(String eachName: names.keySet())
 {
   pageNum = names.get(eachName);
   for (int eachNum:pageNum)
   {
    if(eachNum>=num&&eachNum<=numb||eachNum>=numb&&eachNum<=num)
    {
        System.out.println(eachName);
        break;
    }
   }
 }
} 
```

# ios - 点击手势到 UITextView 的一部分

> ID：15034652
> 
> 赞同：2
> 
> 时间：2013-02-22T23:02:11.127
> 
> 标签：ios, nsstring, uitextview, uitapgesturerecognizer

我有这个代码：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapResponse)];
singleTap.numberOfTapsRequired = 1;
[_textView addGestureRecognizer:singleTap]; 
```

这将对整个 UITextView 做出反应，但是否可以对其进行更改，使其仅在点击 UITextView 中字符串的某个部分时做出响应？例如，像一个 URL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:04:34.593

您不能将点击手势分配给普通 UITextView 中的特定字符串。您可能可以为 UITextView 设置 dataDetectorTypes。

```
textview.dataDetectorTypes = UIDataDetectorTypeAll; 
```

如果您只想检测 url，您可以分配给，

```
textview.dataDetectorTypes = UIDataDetectorTypeLink; 
```

查看文档以获取更多详细信息：[UIKit DataTypes Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitDataTypesReference/Reference/reference.html)。还要检查[UITextView 上的此文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uitextview_class/Reference/UITextView.html#//apple_ref/occ/instp/UITextView/dataDetectorTypes)

**更新：**

根据您的评论，检查如下：

```
- (void)tapResponse:(UITapGestureRecognizer *)recognizer
{
     CGPoint location = [recognizer locationInView:_textView];
     NSLog(@"Tap Gesture Coordinates: %.2f %.2f", location.x, location.y);
     NSString *tappedSentence = [self lineAtPosition:CGPointMake(location.x, location.y)];
     //use your logic to find out whether tapped Sentence is url and then open in webview
} 
```

从此[，](https://stackoverflow.com/a/11441783/1730272)使用：

```
- (NSString *)lineAtPosition:(CGPoint)position
{
    //eliminate scroll offset
    position.y += _textView.contentOffset.y;
    //get location in text from textposition at point
    UITextPosition *tapPosition = [_textView closestPositionToPoint:position];
    //fetch the word at this position (or nil, if not available)
    UITextRange *textRange = [_textView.tokenizer rangeEnclosingPosition:tapPosition withGranularity:UITextGranularitySentence inDirection:UITextLayoutDirectionRight];
    return [_textView textInRange:textRange];
} 
```

您可以尝试使用 UITextGranularitySentence、UITextGranularityLine 等粒度。在此处查看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTokenizer_Protocol/Reference/Reference.html#//apple_ref/doc/c_ref/UITextGranularity)。

# macos - 从 Mac OS X Mountain Lion 降级或删除 GCC 4.8

> ID：15034653
> 
> 赞同：0
> 
> 时间：2013-02-22T23:02:18.960
> 
> 标签：macos, gcc, osx-mountain-lion, homebrew

在确定我的 RVM 问题“与无法修复的混乱环境有关自动没有我们为 RVM2 计划的内容”在一个线程中，该线程从[SO](https://stackoverflow.com/questions/14946942/rvm-ruby-1-9-3-errors-in-mac-10-8-2)开始，并以[票据](https://github.com/wayneeseguin/rvm/issues/1549)RVM 的 github 结尾。

[我按照这里](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)的建议安装了带有命令行工具的 XCode 4.6，但此时已经完全删除了 XCode（通过删除它 - 由于版本`sudo /Developer/Library/uninstall-devtools --mode=all`不起作用），我通过运行卸载了自制软件

```
cd `brew --prefix`
brew install libtool
rm -rf Cellar
rm `git ls-files`
rm -r Library/Homebrew Library/Aliases Library/Formula Library/Contributions
rm -rf .git
rm -rf ~/Library/Caches/Homebrew 
```

并内爆了我的 rvm。但是，我不确定如何“刷新”我的 GCC 情况。如下：

```
$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
Target: x86_64-apple-darwin12.2.0
Configured with: ../gcc-4.8-20130113/configure --enable-languages=c++,fortran
Thread model: posix
gcc version 4.8.0 20130113 (experimental) (GCC) 
```

我在撤消的各个阶段都有 Time Machine 备份，并制作了 Mountain Lion 的可启动 USB，但希望在使用其中任何一种方法之前尝试重新安装 Xcode 的新副本或运行 GCC-10.7 程序安装程序。但是，我不知道我是否可以或如何在这样做之前纠正 GCC 的情况。

从阅读[Change to GCC 4.7..](https://stackoverflow.com/questions/14534584/change-gcc-version-to-4-7-on-mac-os-x)开始，似乎有一种方法可以将我的系统指向/引导到不同版本的 GCC，但如果没有 MacPorts 或自制软件，我不知道如何做到这一点。

有没有办法摆脱实验性的 GCC 4.8，这样它就不会在未来回来了？

在我安装 XCode CLT 或任何其他库之前，我已经使用 /usr/local/ 的副本运行了我的系统的 VM，但我`$ gcc -v`仍然回来了`gcc version 4.8.0`

抱歉，如果我省略和/或添加了必要/不必要的信息，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:34:04.243

这是一个令人困惑的信息转储。您不想使用 MacPorts 或 Homebrew？我强烈建议您使用 Homebrew。这应该可以轻松地将最新的 GCC 4.8 放入或关闭您的盒子。如果你不知道你当前的 gcc 4.8 在哪里，试着输入“which gcc”，它会告诉你它在哪里。它不会回来了。显然，如果键入 gcc 会调出 gcc，那么您永远不会删除它。`/usr/local/opt`应该 是在

如果您坚持手动清除所有自制软件，您`/usr/local/opt`可以删除符号链接并`/usr/local/Cellar`删除真实的东西，但我不推荐这样做。为什么？手动切换目录可能会导致您丢失数据，尤其是在您容易出错的情况下。使用 MacPorts 或 Homebrew 来删除你用来安装的任何东西。

# internet-explorer-8 - vml 元素周围的虚拟区域

> ID：15034661
> 
> 赞同：1
> 
> 时间：2013-02-22T23:02:59.550
> 
> 标签：internet-explorer-8, internet-explorer-7, internet-explorer-6, raphael, vml

这是我的第一篇文章，所以如果出现问题，我最深切的借口:)

我有一点 html-control 要写，最大的问题是 ie6-8 支持。根本没有其他方法可以跳过 ie6-8 支持 :( 所以在搜索了一段时间后，我确实找到了 Raphael，它允许我创建在 SVG 文件中定义的自定义形状。我需要附加“鼠标悬停”事件并在悬停时选择元素. 事件运行良好，但我确实在 VML 悬停行为中发现了大问题。

代码被简化为具有 VML 形状的 RAW html。

```
<html xmlns:v="urn:schemas-microsoft-com:vml">
<head>
    <style>v\: * { behavior:url(#default#VML); antialias: false; }</style>
</head>
<body>
    <div id="message">hovered: nope</div>
    <v:oval id="oval" style="width:100px; height:75px" fillcolor="#bbb"></v:oval>

    <script>
        var messageElm = document.getElementById('message');
        var ovalElm = document.getElementById('oval');

        ovalElm.attachEvent('onmouseover', function () { messageElm.innerText = 'hovered: yep'; });
        ovalElm.attachEvent('onmouseout', function () { messageElm.innerText = 'hovered: nope'; });
    </script>
</body>
</html> 
```

如果您尝试将鼠标移到椭圆元素上，您会注意到渲染的形状与悬停形状不同。我的意思是，悬停会从渲染形状（不是从每一侧）触发 2-3px。

所以问题是：如何禁用该虚拟区域（如果可能的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:27:08.113

我有同样的问题，我尝试了 usemap；

首先，我在覆盖 vml 的透明 png8 上创建了一个地图

```
 this.dom.insertAdjacentHTML("AfterBegin",'<map name="'+_id+'"></map><img id="'+_id+'" src="'+transparent.png+
        '" style="position:absolute;width:'+dom.clientWidth+';height:'+dom.clientHeight+'" />');
    var map = this.dom.getElementsByTagName('map')[0];
    this.dom.appendChild(map);
    this.map = map; 
```

然后将形状附加到一个区域；映射它；我只制作了聚演示；

```
function _getMap(shape){
    this._map = this._map || {};
    if(this._map[shape.id]){

    }else if(shape.nodeName == 'shape'){
        var arrDots = shape.childNodes[0].v.match(/(\d+),(\d+)/g)
        this._map[shape.id] = _polyMap(arrDots);    
    }
    return this.map[shape.id]

}
function _polyMap(arrDots){
    var map = this.map;
    var area = document.createElement('area');
    area.setAttribute('shape',"poly");
    area.setAttribute('coords',arrDots.join(','));
    area.setAttribute('href','##');
    area.setAttribute('alt','##');
    map.appendChild(area);
} 
```

然后你可以在它上面绑定事件；

```
function  _onIE(shape, evtname, fn){
    this._getMap(shape).attachEvent('on'+evtname, fn);
} 
```

# python - 在没有所有可能标签的情况下训练 sklearn LogisticRegression 分类器

> ID：15034664
> 
> 赞同：4
> 
> 时间：2013-02-22T23:03:30.627
> 
> 标签：python, machine-learning, scikit-learn

我正在尝试使用 scikit-learn 0.12.1 来：

1.  训练一个 LogisticRegression 分类器
2.  在保留的验证数据上评估分类器
3.  向该分类器提供新数据并为每个观察检索 5 个最可能的标签

Sklearn 让这一切变得非常简单，除了一个特点。无法保证每个可能的标签都会出现在用于适合我的分类器的数据中。有数百个可能的标签，其中一些没有出现在可用的训练数据中。

这会导致两个问题：

1.  当标签矢量化器出现在验证数据中时，它们无法识别以前看不见的标签。这很容易通过将贴标机拟合到一组可能的标签来解决，但它会加剧问题 2。
2.  LogisticRegression 分类器的 predict_proba 方法的输出是一个 [n_samples, n_classes] 数组，其中 n_classes*仅*包含在训练数据中看到的类。这意味着在 predict_proba 数组上运行 argsort 不再提供直接映射到标签矢量化器词汇表的值。

我的问题是，强制分类器识别全部可能类的最佳方法是什么，即使其中一些类没有出现在训练数据中？显然，它在学习从未见过数据的标签时会遇到麻烦，但 0 在我的情况下非常有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T11:21:31.673

这是一种解决方法。确保你有一个名为的所有类的列表`all_classes`。那么，如果`clf`是你的`LogisticRegression`分类器，

```
from itertools import repeat

# determine the classes that were not present in the training set;
# the ones that were are listed in clf.classes_.
classes_not_trained = set(clf.classes_).symmetric_difference(all_classes)

# the order of classes in predict_proba's output matches that in clf.classes_.
prob = clf.predict_proba(test_samples)
for row in prob:
    prob_per_class = (zip(clf.classes_, prob)
                    + zip(classes_not_trained, repeat(0.))) 
```

产生一个`(cls, prob)`对列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T13:56:10.883

如果您想要的是一个类似 by 返回的数组`predict_proba`，但列对应于 sorted `all_classes`，那么：

```
all_classes = numpy.array(sorted(all_classes))
# Get the probabilities for learnt classes
prob = clf.predict_proba(test_samples)
# Create the result matrix, where all values are initially zero
new_prob = numpy.zeros((prob.shape[0], all_classes.size))
# Set the columns corresponding to clf.classes_
new_prob[:, all_classes.searchsorted(clf.classes_)] = prob 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T19:24:06.490

基于 larsman 的出色回答，我得出了以下结论：

```
from itertools import repeat
import numpy as np

# determine the classes that were not present in the training set;
# the ones that were are listed in clf.classes_.
classes_not_trained = set(clf.classes_).symmetric_difference(all_classes)

# the order of classes in predict_proba's output matches that in clf.classes_.
prob = clf.predict_proba(test_samples)
new_prob = []
for row in prob:
    prob_per_class = zip(clf.classes_, prob) + zip(classes_not_trained, repeat(0.))
    # put the probabilities in class order
    prob_per_class = sorted(prob_per_class)
    new_prob.append(i[1] for i in prob_per_class)
new_prob = np.asarray(new_prob) 
```

new_prob 是一个 [n_samples, n_classes] 数组，就像 predict_proba 的输出一样，除了现在它包含先前未见过的类的 0 概率。

# objective-c - UIImagePickerView 中的异常

> ID：15034666
> 
> 赞同：0
> 
> 时间：2013-02-22T23:03:49.130
> 
> 标签：objective-c, camera, uiimagepickercontroller

我收到此错误：

[CameraViewController presentViewController:animated:completion:]：无法识别的选择器发送到实例 0x8e07d0

代码片段是：

```
self.view.alpha = 0.5f;
[self.navigationController setNavigationBarHidden:YES];
UIImagePickerController *imagepicker=[[UIImagePickerController alloc]init];
[imagepicker.view setBackgroundColor:[UIColor blackColor]];
imagepicker.delegate=self;
 imagepicker.sourceType=UIImagePickerControllerSourceTypeCamera;
[self presentViewController:imagepicker animated:YES completion:nil]; 
```

如果设备中有可用的摄像头，我已经检查了以前的控制器。当我在带有相机的设备上检查它时，就会出现这种情况。

我应该在最后一行有'nil'的地方有其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:56:56.557

该`UIViewController presentViewController:animated:completion:`方法是在 iOS 5.0 中添加的。该错误表明您使用的是早期版本的 iOS。在这种情况下，请`presentModalViewController:animated:`改用。您可以根据需要在运行时使用正确的：

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
    [self presentViewController:imagepicker animated:YES completion:nil];
} else {
    [self presentModalViewController:imagepicker animated:YES];
} 
```

关闭视图控制器的方法也有类似的情况。

# jsf-2 - ViewScope 仅实例化一次

> ID：15034669
> 
> 赞同：1
> 
> 时间：2013-02-22T23:03:55.687
> 
> 标签：jsf-2, cdi, mojarra

我有以下页面，price.xhtml 已包含 3 次。

```
<f:subview id="include">
     <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}" />
        <ui:param name="domainKey" value="KEY1" />
     </ui:include>
 </f:subview>
     <f:subview id="include2">
     <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}" />
        <ui:param name="domainKey" value="KEY3" />
     </ui:include>
 </f:subview>
     <f:subview id="include2">
     <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}" />
        <ui:param name="domainKey" value="KEY2" />
     </ui:include>
 </f:subview> 
```

我的 price.xhtml 使用了一个 ViewScope Mbean (priceMBean)，问题是，JSF 只实例化了单个 mBean。

我想要 3 个 priceMBean 实例，我该如何实现？

拉斐尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:10:45.617

对于这个典型的用例，最好使用注入而不是在面部配置中创建 N bean 请求范围

BalusC 的答案很好，可以通过 DI 和 facelets 进行改进。

```
@ManagedBean
@ViewScoped
public class Parent {
    @Inject
    private Child price1;
    @Inject
    private Child price2;
    @Inject
    private Child price3;
    // ...
} 
```

如果 Child 类始终是 Parent 的依赖类，则 Child 可以注释为依赖“@Dependent”。使用依赖，您将拥有 3 个不同的子类实例，这些实例依赖于主 bean（父）的生命周期。

您可以使用以下模板：

```
<f:subview id="include">
    <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}"/>
        <ui:param name="domainKey" value="KEY1"/>
        <ui:param name="price" value="#{priceMBean.price1}"/>
    </ui:include>
</f:subview>
<f:subview id="include2">
    <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}"/>
        <ui:param name="domainKey" value="KEY3"/>
        <ui:param name="price" value="#{priceMBean.price2}"/>
    </ui:include>
</f:subview>
<f:subview id="include2">
    <ui:include src="/secure/menu/price.xhtml">
        <ui:param name="info" value="#{msg['menu.step3.header']}"/>
        <ui:param name="domainKey" value="KEY2"/>
        <ui:param name="price" value="#{priceMBean.price3}"/>
    </ui:include>
</f:subview> 
```

# wordpress - 前端更改类别的能力

> ID：15034672
> 
> 赞同：0
> 
> 时间：2013-02-22T23:04:09.570
> 
> 标签：wordpress, frontend, custom-post-type

因此，在 wordpress 中，我有一个自定义帖子类型“wishlist”，其中包含自定义类别分类法“私人”和“共享”，我正在寻找一种在前端添加下拉菜单的方法，该菜单允许用户从中选择这两个类别并点击提交，它会改变帖子类别。任何线索如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:58:56.720

您正在寻找要`<select>`在表单中使用的标签来制作 UI。单击提交按钮后，表单的默认行为会将所有数据发送到服务器到`action`表单属性中提供的位置。

一个示例代码是：

```
<form action="/location/on/server/">
<select>
<option value="private">private</option>
<option value="shared">shared</option>
</select> 
```

# python - 解析字典以获取值

> ID：15034674
> 
> 赞同：0
> 
> 时间：2013-02-22T23:04:15.477
> 
> 标签：python

我有以下变量，我试图从中提取修订值..有人对如何做到这一点有任何意见吗？

```
u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63' 
```

输入：-

```
data ={u'status': u'MERGED', u'topic': u'', u'currentPatchSet': {u'approvals': [{u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'CRVW', u'description': u'Code Review', u'value': u'2', u'grantedOn': 1360897100}, {u'type': u'SUBM', u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'value': u'1', u'grantedOn': 1360897100}, {u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'TEST', u'description': u'Developer Verified', u'value': u'1', u'grantedOn': 1360897100}, {u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'VRIF', u'description': u'Verified', u'value': u'1', u'grantedOn': 1360897100}], u'createdOn': 1360897100, u'number': u'1', u'parents': [u'354a90cd1ae4ba9ce2a2a4ad38f8efbc8c02b02d', u'e4ffc07a6f78210a49f6ad2e0d705d7054c20ed6'], u'uploader': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'ref': u'refs/changes/52/249452/1', u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63'}, u'url': u'https://review-android.company.com/249452', u'createdOn': 1360897100, u'number': u'249452', u'lastUpdated': 1360897121, u'project': u'platform/vendor/qcom-proprietary/wlan', u'sortKey': u'00231d720003ce6c', u'branch': u'master', u'owner': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'open': False, u'id': u'Iad0beef66e5890cde6f0961ed03d8bc7e3defc63', u'subject': u'Merge "wlan: Enable ActiveModeOffload by default"'} 
```

输出：-

```
 ad0beef66e5890cde6f0961ed03d8bc7e3defc63 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:07:10.687

只需按照“currentPatchSet”键然后按“revision”键即可检索它

```
data['currentPatchSet']['revision'] 
```

显示其工作原理的交互式示例：

```
>>> import pprint # pretty print for seeing the layout of the dict
>>> data ={u'status': u'MERGED', u'topic': u'', u'currentPatchSet': {u'approvals': [{u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'CRVW', u'description': u'Code Review', u'value': u'2', u'grantedOn': 1360897100}, {u'type': u'SUBM', u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'value': u'1', u'grantedOn': 1360897100}, {u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'TEST', u'description': u'Developer Verified', u'value': u'1', u'grantedOn': 1360897100}, {u'by': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'type': u'VRIF', u'description': u'Verified', u'value': u'1', u'grantedOn': 1360897100}], u'createdOn': 1360897100, u'number': u'1', u'parents': [u'354a90cd1ae4ba9ce2a2a4ad38f8efbc8c02b02d', u'e4ffc07a6f78210a49f6ad2e0d705d7054c20ed6'], u'uploader': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'ref': u'refs/changes/52/249452/1', u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63'}, u'url': u'https://review-android.company.com/249452', u'createdOn': 1360897100, u'number': u'249452', u'lastUpdated': 1360897121, u'project': u'platform/vendor/qcom-proprietary/wlan', u'sortKey': u'00231d720003ce6c', u'branch': u'master', u'owner': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}, u'open': False, u'id': u'Iad0beef66e5890cde6f0961ed03d8bc7e3defc63', u'subject': u'Merge "wlan: Enable ActiveModeOffload by default"'} 
```

让我们可视化数据

```
>>> pprint.pprint(data)
{u'branch': u'master',
 u'createdOn': 1360897100,
 u'currentPatchSet': {u'approvals': [{u'by': {u'email': u'lnxbuild@localhost',
                                              u'name': u'Linux Build Service Account',
                                              u'username': u'lnxbuild'},
                                      u'description': u'Code Review',
                                      u'grantedOn': 1360897100,
                                      u'type': u'CRVW',
                                      u'value': u'2'},
                                     {u'by': {u'email': u'lnxbuild@localhost',
                                              u'name': u'Linux Build Service Account',
                                              u'username': u'lnxbuild'},
                                      u'grantedOn': 1360897100,
                                      u'type': u'SUBM',
                                      u'value': u'1'},
                                     {u'by': {u'email': u'lnxbuild@localhost',
                                              u'name': u'Linux Build Service Account',
                                              u'username': u'lnxbuild'},
                                      u'description': u'Developer Verified',
                                      u'grantedOn': 1360897100,
                                      u'type': u'TEST',
                                      u'value': u'1'},
                                     {u'by': {u'email': u'lnxbuild@localhost',
                                              u'name': u'Linux Build Service Account',
                                              u'username': u'lnxbuild'},
                                      u'description': u'Verified',
                                      u'grantedOn': 1360897100,
                                      u'type': u'VRIF',
                                      u'value': u'1'}],
                      u'createdOn': 1360897100,
                      u'number': u'1',
                      u'parents': [u'354a90cd1ae4ba9ce2a2a4ad38f8efbc8c02b02d',
                                   u'e4ffc07a6f78210a49f6ad2e0d705d7054c20ed6'],
                      u'ref': u'refs/changes/52/249452/1',
                      u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63',
                      u'uploader': {u'email': u'lnxbuild@localhost',
                                    u'name': u'Linux Build Service Account',
                                    u'username': u'lnxbuild'}},
 u'id': u'Iad0beef66e5890cde6f0961ed03d8bc7e3defc63',
 u'lastUpdated': 1360897121,
 u'number': u'249452',
 u'open': False,
 u'owner': {u'email': u'lnxbuild@localhost',
            u'name': u'Linux Build Service Account',
            u'username': u'lnxbuild'},
 u'project': u'platform/vendor/qcom-proprietary/wlan',
 u'sortKey': u'00231d720003ce6c',
 u'status': u'MERGED',
 u'subject': u'Merge "wlan: Enable ActiveModeOffload by default"',
 u'topic': u'',
 u'url': u'https://review-android.company.com/249452'} 
```

所以修订似乎在 currentPatchSet 字典中：

```
>>> pprint.pprint(data['currentPatchSet'])
{u'approvals': [{u'by': {u'email': u'lnxbuild@localhost',
                         u'name': u'Linux Build Service Account',
                         u'username': u'lnxbuild'},
                 u'description': u'Code Review',
                 u'grantedOn': 1360897100,
                 u'type': u'CRVW',
                 u'value': u'2'},
                {u'by': {u'email': u'lnxbuild@localhost',
                         u'name': u'Linux Build Service Account',
                         u'username': u'lnxbuild'},
                 u'grantedOn': 1360897100,
                 u'type': u'SUBM',
                 u'value': u'1'},
                {u'by': {u'email': u'lnxbuild@localhost',
                         u'name': u'Linux Build Service Account',
                         u'username': u'lnxbuild'},
                 u'description': u'Developer Verified',
                 u'grantedOn': 1360897100,
                 u'type': u'TEST',
                 u'value': u'1'},
                {u'by': {u'email': u'lnxbuild@localhost',
                         u'name': u'Linux Build Service Account',
                         u'username': u'lnxbuild'},
                 u'description': u'Verified',
                 u'grantedOn': 1360897100,
                 u'type': u'VRIF',
                 u'value': u'1'}],
 u'createdOn': 1360897100,
 u'number': u'1',
 u'parents': [u'354a90cd1ae4ba9ce2a2a4ad38f8efbc8c02b02d',
              u'e4ffc07a6f78210a49f6ad2e0d705d7054c20ed6'],
 u'ref': u'refs/changes/52/249452/1',
 u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63',
 u'uploader': {u'email': u'lnxbuild@localhost',
               u'name': u'Linux Build Service Account',
               u'username': u'lnxbuild'}} 
```

确实如此，在“修订”键下。我们检索它：

```
>>> print data['currentPatchSet']['revision']
ad0beef66e5890cde6f0961ed03d8bc7e3defc63
>>> 
```

# r - R quantmod::getFinancials

> ID：15034685
> 
> 赞同：3
> 
> 时间：2013-02-22T23:05:17.410
> 
> 标签：r, xts, quantmod

我正在使用该`quantmod`软件包。我有一个这样的股票向量：

```
c("AAPL","GOOG","IBM","GS","AMZN","GE") 
```

我想创建一个函数来计算股票的 EBIT 利润率（= 营业收入 / 总收入）。因此，对于给定的股票，我使用以下仅适用于 GE 的代码（假设在代码末尾添加了“.f”）：

```
require(quantmod)
getFinancials("GE",period="A")
ebit.margin <- function(stock.ticker.f){
   return(stock.ticker$IS$A["Operating Income",]/stock.ticker$IS$A["Total Revenue",])
}
ebit.margin("GE") 
```

我想概括这个函数以便使用该`apply`函数。有几个困难：

*   将该`quantmod::getFinancial`函数应用于股票代码时，股票的财务报表将保存在默认环境中。然后`viewFinancial`必须使用它来获取和打印财务报表。我需要一种方法可以直接在函数中访问财务报表
*   该函数的参数函数是一个类似“GE.f”的字符串，但直接输入股票代码（“GE”）会更方便。我尝试使用`paste0`and`gsub`来获取像 "GE.f" 这样的字符串，它不起作用，因为 "GE.f" 不属于`financials`该类。

总而言之，我有点失落......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T00:36:21.597

如果你使用它会更容易`auto.assign=FALSE`

```
s <- c("AAPL","GOOG","IBM","GS","AMZN","GE")
fin <- lapply(s, getFinancials, auto.assign=FALSE)
names(fin) <- s
lapply(fin, function(x) x$IS$A["Operating Income", ] / x$IS$A["Total Revenue",])
#$AAPL
#2012-09-29 2011-09-24 2010-09-25 2009-09-26 
# 0.3529596  0.3121507  0.2818704  0.2736278 
#
#$GOOG
#2012-12-31 2011-12-31 2010-12-31 2009-12-31 
# 0.2543099  0.3068724  0.3540466  0.3514585 
#
#$IBM
#2012-12-31 2011-12-31 2010-12-31 2009-12-31 
# 0.2095745  0.1964439  0.1974867  0.1776439 
#
#$GS
#2012-12-31 2011-12-31 2010-12-31 2009-12-31 
#0.2689852  0.1676678  0.2804621  0.3837401 
#
#$AMZN
#2012-12-31 2011-12-31 2010-12-31 2009-12-31 
#0.01106510 0.01792957 0.04110630 0.04606471 
#
#$GE
#2012-12-31 2011-12-31 2010-12-31 2009-12-31 
#0.11811969 0.13753327 0.09415548 0.06387029 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T01:00:12.397

另一种选择是在新环境中加载您的代码。

```
tickers <-  new.env()
s <- c("AAPL","GOOG","IBM","GS","AMZN","GE")
lapply(s, getFinancials,env=tickers)
sapply(ls(envir=tickers),
       function(x) {x <- get(x) ## get the varible name
                    x$IS$A["Operating Income", ] / x$IS$A["Total Revenue",]})

              AAPL.f     AMZN.f       GE.f    GOOG.f      GS.f     IBM.f
2012-09-29 0.3529596 0.01106510 0.11811969 0.2543099 0.2689852 0.2095745
2011-09-24 0.3121507 0.01792957 0.13753327 0.3068724 0.1676678 0.1964439
2010-09-25 0.2818704 0.04110630 0.09415548 0.3540466 0.2804621 0.1974867
2009-09-26 0.2736278 0.04606471 0.06387029 0.3514585 0.3837401 0.1776439 
```

**编辑**

无需使用`ls`, `get`.... 只是方便`eapply`（感谢@GSee）将 FUN 应用于环境中的命名值并将结果作为列表返回

```
eapply(tickers, function(x) 
              x$IS$A["Operating Income", ] / x$IS$A["Total Revenue",]) 
```

# asp.net - CS0103：当前上下文中不存在名称“rand”

> ID：15034686
> 
> 赞同：0
> 
> 时间：2013-02-22T23:05:31.000
> 
> 标签：asp.net

我知道这个错误是大约十几个问题的中心，但我在其他任何问题中都没有看到我的情况。

我在 aspx 页面的顶部有以下内容：

```
<% String rand = new Random().Next().ToString(); %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <script type="text/javascript" src="../js/script.js?v=<%=rand%>"></script> 
```

它构建得很好，但是当访问页面时，我收到错误，抱怨`<%=rand%>`该行的一部分说它不知道是什么`rand`。作为一个大型 Web 应用程序，我们不希望缓存频繁更改的代码，这就是我们正在采用的方法。事实上，这种确切的方法适用于我们的另一个页面，但由于某种原因不适用于此页面。我们只想生成一个随机数，因为它用于多个我们不想缓存的 js 文件。

我浏览了许多其他 CS0103 问题，但我读到的没有一个是关于在 aspx 页面的标记中创建的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:10:12.410

作为替代解决方案...

```
<script type="text/javascript" src="../js/script.js?v=<asp:Literal id="randNum" runat="server" />"></script> 
```

然后在你的代码后面。

```
randNum.Text = new Random().Next().ToString(); 
```

不过附带说明一下，使用这种方法来防止缓存有点麻烦。如果您使用的是 .NET 4.5，我建议您查看 scriptBundle 和 styleBundle 类，它们基本上实现了这种方法并缩小了您的脚本/css。

# java - java正则表达式，匹配数学运算符

> ID：15034693
> 
> 赞同：3
> 
> 时间：2013-02-22T23:06:15.303
> 
> 标签：java, regex

我正在尝试编写一个正则表达式来匹配数学运算符到一个字符。我尝试了很多不同的东西，但我不断得到：

> 标记上的语法错误，应改为表达式

我的代码如下所示：

```
public static void readMath(char c) {
        if(c == [+\-*/]) {
            // do some stuff
        }
    } 
```

我试过逃避不同的事情等等。我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:39:55.757

```
public static void readMath( char c ) {
    if ( String.valueOf( c ).matches( "[-+*/]" ) ) {
        // do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T23:18:46.400

您可以执行以下操作。

像这样初始化类中允许的运算符列表：

```
private static List<Character> ops = new ArrayList<Character>();

static {
    ops.add('+');
    ops.add('-');
    ops.add('*');
    ops.add('/');
} 
```

要检查 a`char` `c`是否是上述运算符之一，请使用：

```
if(ops.contains(c)) {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T23:08:00.387

您不需要正则表达式来匹配单个`char`. 无论如何，这不是您在 Java 中使用正则表达式的方式。

```
if(c == '+' || c == '-' || c == '/' || c == '*') {
      // do some stuff
} 
```

或者您可以尝试使用 switch 语句。

```
switch (c)
{
case '+':
case '-':
case '*':
case '/':
     // do some stuff
     break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:12:26.027

你真的不需要正则表达式，使用枚举或开关。这是一个枚举示例：

```
public enum Operation {
PLUS('+'),
MINUS('-'),
TIMES('*'),
DIVIDE('/')
private final char symbol;
Operation(char symbol) { this.symbol = symbol; }
public char toChar() { return symbol; }
}
public void checkOp(){
    if(Operation.PLUS.toChar()=='+') {

}
} 
```

# php - 如何禁用直接进入html？

> ID：15034695
> 
> 赞同：1
> 
> 时间：2013-02-22T23:06:22.560
> 
> 标签：php, javascript, html, url

假设我有两个名为 html1 和 html2 的 html 文件。html1 包含一个嵌入的 swf 文件。

现在我想要的是用户不能直接通过 url 访问 html2。他必须通过 html1 中 swf 中的链接单击它。有没有办法做到这一点？

如果在 html 中不可能，是否可以在 php 中使用？

谢谢

编辑：

在约翰回答后，我继续尝试他的建议，但我永远无法访问 file2.php，即使我以前去过 file1.php。它不断将我重定向回file1.php，即使它不应该这样做。

我来自 file1.php 的代码

```
//file1.php
<?php
session_start();
$_SESSION['enableAccessTill']=strtotime("+5 minutes");
?> 
```

这是file2.php

```
//file2.php
<?php
session_start();
if(!isset($_SESSION['enableAccessTil'])||$_SESSION['enableAccessTil']<time())
{
header("Location: indexFLA.php");
exit;
}
?> 
```

我可能做错了什么？

找到它，这是由于拼写错误 - “enableAccessTil”和“enableAccessTill”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:30:02.763

专业解决方案：
创建受保护的目录并`.htaccess`在目录中制作文件并将所有嵌入和部分文件复制到目录中。
此目录无法通过获取 url 访问。
但您可以包含文件 whit php`include`和`require`方法。
.htaccess 内容：

```
deny from all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:12:17.477

这在纯 html 中是不可能的。一个简单的方法是 php 在文件 1 中设置一个会话变量，并在文件 2 中测试用户已经到文件 1。

文件1：

```
 <?php
   session_start();
   $_SESSION['enableAccessTill'] = strtotime("+5 minutes"); //set the time here till when the user has access
   [...] 
```

文件2

```
 <?php
  session_start();
  if(!isset( $_SESSION['enableAccessTill'] ) || $_SESSION['enableAccessTill'] < time() ){ //If time is expired
    header("Location: file1.php"); //redirect user to the first file
    exit;
  }
[...] //continue your script here. 
```

推荐人检查的事情通常会失败（一些浏览器/防火墙阻止了该变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:09:48.783

根据您描述的选项，将 html2 设置为`php`脚本并检查[引用者](http://en.wikipedia.org/wiki/HTTP_referer)是否为 html1 文件听起来最合理。如果是这种情况，脚本应该显示正常的 html1 内容，否则会显示错误消息。

如果他们知道发生了什么，鬼鬼祟祟的用户仍然可以绕过这个问题，但对于大多数观众来说应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:10:57.710

可以用php。

在 index.php 你必须写

```
<?php
define('START', true);
include 'file.php'; 
```

在 file.php 需要写

```
<?php defined('START) or die('Direct access!!'); ?>
<embed> your swf file embed 
```

这样你就可以防止直接访问

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T23:12:42.227

您可以通过使用会话变量来使用 PHP。在 html1 中启动会话。检查 html2 中的会话。如果存在，则显示 html2。如果没有，请不要显示 html2。无论哪种情况，都在 html2 中销毁会话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T23:18:45.423

使用 html 是可行的，您有两种选择，一种是 cookie，另一种是 html5 中的本地存储

```
localStorage.hasClick = true;

alert(localStorage.hasClick); 
```

[http://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

但显然直接的解决方案是 php / c# / ruby​​ / etc...

//当我说html时，我指的是仅使用客户端html/javascript

# java - 如何使用 json 数组意图另一个类

> ID：15034697
> 
> 赞同：-4
> 
> 时间：2013-02-22T23:06:29.610
> 
> 标签：java, javascript, android, json, android-intent

我正在开发一个测验，其中我存储了 10 个问题。它是随机显示的，我的问题是在那之后我的第 10 个问题我不知道如何将它用于我的分数等级，哪个分数必须显示最近玩测验的玩家。

这是加载问题的地方：

```
public class Question1 extends Activity {

Intent menu = null;
BufferedReader bReader = null;
static JSONArray quesList = null;
static int index = 50;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question10);

    Thread thread = new Thread() {
        public void run() {
            try {
                Thread.sleep(1 * 1000);
                finish();
                loadQuestions();
                Intent intent = new Intent(Question1.this,
                        Question2.class);
                Question1.this.startActivity(intent);
            } catch (Exception e) {
            }
        }
    };
    thread.start();

}

//List<JSONObject> question = null;

private void loadQuestions() throws Exception {
    try {

        InputStream questions = this.getBaseContext().getResources()
                .openRawResource(R.raw.questions);
        bReader = new BufferedReader(new InputStreamReader(questions));
        StringBuilder quesString = new StringBuilder();
        String aJsonLine = null;
        while ((aJsonLine = bReader.readLine()) != null) {
            quesString.append(aJsonLine);
        }

        Log.d(this.getClass().toString(), quesString.toString());
        JSONObject quesObj = new JSONObject(quesString.toString());
        quesList = quesObj.getJSONArray("Questions");
        Log.d(this.getClass().getName(),
                "Num Questions " + quesList.length());

        /*  question = new ArrayList<JSONObject>();
             int n = Math.min(10, quesList.length());
             for(int i = 0; i < n; i++) {
                 JSONObject questions1 = quesList.getJSONObject(i);
                 question.add(questions1);*/

    } catch (Exception e) {

    } finally {
        try {
            bReader.close();
        } catch (Exception e) {
            Log.e("", e.getMessage().toString(), e.getCause());
        }

    }

}

public static JSONArray getQuesList()throws JSONException{

      Random rnd = new Random();

        for (int i = quesList.length() - 1; i >= 0; i--)
        {
          int j = rnd.nextInt(i + 1);
          // Simple swap
          Object object = quesList.get(j);
          quesList.put(j, quesList.get(i));
          quesList.put(i, object);
        }
        return quesList;

} 
```

这是问题所在：

```
public class Question2 extends Activity {
/** Called when the activity is first created. */

TextView question, items = null;
RadioButton answer1 = null;
RadioButton answer2 = null;
RadioButton answer3 = null;
RadioGroup answers = null;
int selectedAnswer = -1;
int quesIndex = 0;
int numEvents = 0;
int selected[] = null;
int correctAns[] = null;
boolean review = false;
Button next = null;
int score = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.startquiz);

    try {
        score = getIntent().getIntExtra("score",0);
        items = (TextView)findViewById(R.id.displayitems);
        question = (TextView) findViewById(R.id.displayquestion);
        answer1 = (RadioButton) findViewById(R.id.option1);
        answer2 = (RadioButton) findViewById(R.id.option2);
        answer3 = (RadioButton) findViewById(R.id.option3);
        answers = (RadioGroup) findViewById(R.id.QueGroup1);

        next = (Button) findViewById(R.id.selected);
        next.setOnClickListener(nextListener);

        selected = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(selected, -1);
        correctAns = new int[Question1.getQuesList().length()];
        java.util.Arrays.fill(correctAns, -1);

        this.showQuestion(0, review);

    } catch (Exception e) {
        Log.e("", e.getMessage().toString(), e.getCause());
    }

}

private void showQuestion(int qIndex, boolean review) {
    try {
        JSONObject aQues = Question1.getQuesList().getJSONObject(
                qIndex);
        String quesValue = aQues.getString("Question");
        if (correctAns[qIndex] == -1) {
            String correctAnsStr = aQues.getString("CorrectAnswer");
            correctAns[qIndex] = Integer.parseInt(correctAnsStr);
        }

        question.setText(quesValue.toCharArray(), 0, quesValue.length());
        answers.check(-1);
        answer1.setTextColor(Color.BLACK);
        answer2.setTextColor(Color.BLACK);
        answer3.setTextColor(Color.BLACK);
        JSONArray ansList = aQues.getJSONArray("Answers");
        String aAns = ansList.getJSONObject(0).getString("Answer");
        answer1.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(1).getString("Answer");
        answer2.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(2).getString("Answer");
        answer3.setText(aAns.toCharArray(), 0, aAns.length());
        Log.d("", selected[qIndex] + "");
        if (selected[qIndex] == 0)
            answers.check(R.id.option1);
        if (selected[qIndex] == 1)
            answers.check(R.id.option2);
        if (selected[qIndex] == 2)
            answers.check(R.id.option3);

        setText();
        if (quesIndex == (Question1.getQuesList().length() - 1))
            next.setEnabled(false);

        if (quesIndex < (Question1.getQuesList().length() - 1))
            next.setEnabled(true);

        if (review) {
            Log.d("review", selected[qIndex] + "" + correctAns[qIndex]);

            if (selected[qIndex] != correctAns[qIndex]) {
                if (selected[qIndex] == 0)
                    answer1.setTextColor(Color.RED);
                if (selected[qIndex] == 1)
                    answer2.setTextColor(Color.RED);
                if (selected[qIndex] == 2)
                    answer3.setTextColor(Color.RED);
            }
            if (correctAns[qIndex] == 0)
                answer1.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 1)
                answer2.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 2)
                answer3.setTextColor(Color.GREEN);
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage(), e.getCause());
    }
}

private void setAnswer() {
    if (answer1.isChecked())
        selected[quesIndex] = 0;
    if (answer2.isChecked())
        selected[quesIndex] = 1;
    if (answer3.isChecked())
        selected[quesIndex] = 2;

    Log.d("", Arrays.toString(selected));
    Log.d("", Arrays.toString(correctAns));

}

private OnClickListener nextListener = new OnClickListener() {

    public void onClick(View v) {
        int i = correctAns.length;

        if (v == next){
            if (correctAns[i] == selected[i])
                    {

                        score++;
                        Toast.makeText(getApplicationContext(), "Your answer is correct!", Toast.LENGTH_SHORT).show();
                    }else
                    {
                    Toast.makeText(getApplicationContext(), "Your answer is wrong..." + correctAns, Toast.LENGTH_SHORT).show();
                    }
        }

        quesIndex++;
        try {
            if (quesIndex >= Question1.getQuesList().length())
                quesIndex = Question1.getQuesList().length() - 1;

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        showQuestion(quesIndex, review);

    }
};
private void setText() throws JSONException {
    this.setTitle("Question " + (quesIndex + 1) + "  out of  "
            + Question1.getQuesList().length());
    items.setGravity(250);
}

public void reload() {
    setAnswer();

Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();

overridePendingTransition(0, 0);
startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:16:43.650

我无法理解您为什么要在 Question1.onCreate() 中运行单独的线程。如果要在后台加载问题，请使用 AsyncTask。就个人而言，我更喜欢使用 IntentService 来执行您希望保留结果的后台任务。IntentService 对于解码 JSON 特别有用。

您没有说您的应用程序*现在*发生了什么，但我的猜测是 Activity Question2 永远不会启动。我不确定，但我怀疑这是因为您试图从后台线程启动 Activity。您可以使用 runOnUiThread() 来解决此问题，但最好将问题加载到*IntentService*中，在加载完成后向您的 Activity 发送本地 BroadcastMessage，然后显示结果。此外，我会将 JSON 解析为数据库或内容提供程序。

# unit-testing - 单元测试项目无法运行 BuildShadowTask v11

> ID：15034700
> 
> 赞同：2
> 
> 时间：2013-02-22T23:06:58.567
> 
> 标签：unit-testing, tfs, msbuild, visual-studio-2012

我有一个正在尝试迁移到 .NET 4.5 的 Web 应用程序项目。我们正在从 TFS 构建到安装了 VS2010 的构建服务器，但它还包含 VS2012 的所有正确参考程序集并安装了 .NET 4.5 框架。

运行包含私有访问器的单元测试项目时，构建失败并出现错误 -

```
System.IO.FileNotFoundException: Could not load file or assembly 'file:///C:\LocalPath\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll' 
```

但是，如果我将 $(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\TeamTest\Microsoft.TeamTest.Targets 文件从

```
<UsingTask TaskName="BuildShadowTask" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\TeamTest\Microsoft.VisualStudio.TestTools.BuildShadowsTask.dll"/> 
```

至

```
<UsingTask TaskName="BuildShadowTask" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\TeamTest\Microsoft.VisualStudio.TestTools.BuildShadowsTask.dll"/> 
```

VS2012 不能再使用私有访问器了吗？如果是这样，为什么 Microsoft.VisualStudio.TestTools.BuildShadowsTask.dll v11 失败，而 v10 成功？

**编辑**这将在实际安装了 VS2012 的机器上编译，所以一定是我缺少程序集或注册表项。查看构建日志，在这两种情况下，它都从 v11 文件夹加载 BuildShadowTask。我想我的问题变成了，是否可以在不安装 Visual Studio 2012 的情况下使用私有访问器？如果是这样，我需要做出什么改变才能使这个目标成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:24:12.693

私有访问器在 VS2012 中已被弃用，因此您将无法使用 VS2012 创建私有访问器。这就是 11.0 dll 任务失败的原因。推荐的替代方法是使用`PrivateObject`类或`InternalsVisibleTo`属性。

# java - 向二叉搜索树添加惰性删除方法 - java

> ID：15034701
> 
> 赞同：0
> 
> 时间：2013-02-22T23:07:01.403
> 
> 标签：java, binary-search-tree, lazy-evaluation

下面的代码是我已有的，我需要添加一个懒惰的删除方法。基本上，惰性删除方法将节点标记为删除，而不是删除它。这样，删除的位置在插入时被视为空，在搜索期间被视为已占用。我假设节点中的布尔值将是最简单的方法，但我正在努力弄清楚如何配置方法以考虑节点是否已“lazyDeleted”。我已经发布了下面的代码。提前致谢。

```
/**
 * Binary Search Trees are binary trees with search functionality on the order of lg(N)
 *     (lg() is the logarithm of base 2, and N is the number of elements processed)
 * 
 * Binary Search Trees contain a root node that has exactly two child nodes of the same type
 *     These nodes are initially set to null but can be changed later
 * The Binary Tree has a root node, with everything that is larger than the root contained in
 *     the right subtree, and everything smaller than the root contained in the left subtree
 * 
 * @author Mark Allen Weiss (originally)
 *
 * @param <E> any element that is a subclass of Comparable
 */
public class BinarySearchTree<E extends Comparable<? super E>> {

    /*-----------------------*
     * Variable Declarations *
     *-----------------------*/
    private BinaryNode<E> root;

    /**
     * Constructs a tree with an empty root
     */
    public BinarySearchTree() {
        root = null;
    }

    /**
     * Releases the root of the tree, rendering it empty
     * 
     * @return void
     */
    public void makeEmpty() {
        root = null;
    }

    /**
     * Checks to see if the tree is empty
     * 
     * @return <tt>true</tt> if the tree is empty; <tt>false</tt> otherwise
     */
    public boolean isEmpty() {
        return root == null;
    }

    /**
     * Searches the tree to see if it contains the specified element
     * 
     * @param element the element to be found
     * @return <tt>true</tt> if the element is found; <tt>false</tt> otherwise
     */
    public boolean contains(E element) {
        return contains(element, root);
    }

    /**
     * Finds the smallest element in the tree
     * 
     * @return the smallest element in the tree
     */
    public E findMin() {
        if(isEmpty()) {
            // throw new UnderflowException();
            return null;
            /* The author throws a new UnderflowException, but the class is not included in the
             * standard Java API, so I return a null instead */
        } else {
            return findMin(root).element;
        }
    }

    /**
     * Finds the largest element in the tree
     * 
     * @return the largest element in the tree
     */
    public E findMax() {
        if(isEmpty()) {
            // throw new UnderflowException();
            return null;
            /* The author throws a new UnderflowException, but the class is not included in the
             * standard Java API, so I return a null instead */
        } else {
            return findMax(root).element;
        }
    }

    /**
     * Inserts the given element into the tree
     * 
     * @param element
     * @return void
     */
    public void insert(E element) {
        root = insert(element, root);
    }

    /**
     * Removes the specified element from the tree
     * 
     * @param element the element to be removed
     * @return void
     */
    public void remove(E element) {
        root = remove(element, root);
    }

    /**
     * Prints the tree contents in sorted order
     * 
     * @return void
     */
    public void printTree() {
        if(isEmpty()) {
            System.out.println("Empty Tree");
        } else {
            printTree(root);
        }
    }

    /**
     * Internal method to compute height of a subtree.
     *
     * @param t the node that roots the subtree
     */
    private int height(BinaryNode<E> t) {
        if( t == null ) {
         return -1;
        } else {
         return 1 + Math.max( height( t.left ), height( t.right ) ); 
        }
    }

    /**
     * Internal method to find an item in a subtree 
     * 
     * @param element the item to search for
     * @param t the node that roots the subtree
     * @return <tt>true</tt> if the item is found; <tt>false</tt> otherwise
     */
    private boolean contains(E element, BinaryNode<E> t) {
        if(t == null) {
            return false;
        }

        int compareResult = element.compareTo(t.element);

        if(compareResult < 0) {
            return contains(element, t.left);
        } else if(compareResult > 0) {
            return contains(element, t.right);
        } else {
            return true; // Match
        }
    }

    /**
     * Internal method to find the smallest item in a subtree
     * 
     * @param t the node that roots the subtree
     * @return the node containing the smallest item
     */
    private BinaryNode<E> findMin(BinaryNode<E> t) {
        if(t == null) {
            return null;
        } else if(t.left == null) {
            return t;
        } else {
            return findMin(t.left);
        }
    }

    /**
     * Internal method to find the largest item in a subtree
     * 
     * @param t the node that roots the subtree
     * @return the node containing the largest item
     */
    private BinaryNode<E> findMax(BinaryNode<E> t) {
        if(t == null) {
            return null;
        } else if(t.right == null) {
            return t;
        } else {
            return findMax(t.right);
        }
    }

    /**
     * Internal method to insert into a subtree
     *     Duplicates are not allowed and ignored
     *     
     * @param element the item to insert
     * @param t the node that roots the subtree
     * @return the new root of the subtree
     */
    private BinaryNode<E> insert(E element, BinaryNode<E> t) {
        if(t == null) {
            return new BinaryNode<E>(element);
        }

        int compareResult = element.compareTo(t.element);

        if(compareResult < 0) {
            t.left = insert(element, t.left);
        } else if(compareResult > 0) {
            t.right = insert(element, t.right);
        } else {
            ; // Duplicate; do nothing
        }

        return t;
    }

    /**
     * Internal method to remove an element from a subtree
     * 
     * @param element the element to be removed
     * @param t the node that roots the subtree
     * @return the new root of the subtree
     */
    private BinaryNode<E> remove(E element, BinaryNode<E> t) {
        if(t == null) {
            return t; // Item not found; do nothing
        }

        int compareResult = element.compareTo(t.element);

        if(compareResult < 0) {
            t.left = remove(element, t.left);
        } else if(compareResult > 0) {
            t.right = remove(element, t.right);
        } else if(t.left != null && t.right != null) { // Two children
            t.element =  findMin(t.right).element;
            t.right = remove(t.element, t.right);
        } else {
            t = (t.left != null) ? t.left : t.right;
        }

        return t;
    }

    /**
     * Internal method to print a subtree in sorted order
     * 
     * @param t the node that roots the subtree
     * @return void
     */
    private void printTree(BinaryNode<E> t) {
        if(t != null){
            printTree(t.left);
            System.out.println(t.element);
            printTree(t.right);
        }
    }

    /**
     * Internal class that defines a tree node with exactly two children
     * 
     * @author Mark Allen Weiss
     * 
     * @param <E> any element that is a subclass of Comparable
     */
    private static class BinaryNode<E> {

        /*-----------------------*
         * Variable Declarations *
         *-----------------------*/
        E element; // The data in the node
        BinaryNode<E> left; // The left child node
        BinaryNode<E> right; // The right child node

        /**
         * Constructs a new BinaryNode of type E that contains the given element
         * 
         * @param theElement the data to be stored in the node
         */
        BinaryNode(E theElement) {
            this(theElement, null, null);
        }

        /**
         * Constructs a new BinaryNode of type E that contains the given element and has the
         *     given nodes as its left and right children respectively
         * 
         * @param theElement the data to be stored in the node
         * @param leftChild the left child of the node
         *            (either a leaf node or a subtree)
         * @param rightChild the right child of the node
         *            (either a leaf node or a subtree)
         */
        BinaryNode(E theElement, BinaryNode<E> leftChild, BinaryNode<E> rightChild) {
            element = theElement;
            left = leftChild;
            right = rightChild;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:36:56.463

您所要做的就是向您的 TreeNodes 添加一个布尔值并将其设置为 false（或根据您的设计方式设置为 true），而不是将其从树中删除。我通过简单地重置该节点的已删除属性来处理插入。

# javascript - 尝试使用 Replace 用正则表达式替换背景位置部分来解析 URL

> ID：15034702
> 
> 赞同：0
> 
> 时间：2013-02-22T23:07:07.193
> 
> 标签：javascript, regex

我正在尝试替换此字符串`url(http://www.yahoo.com/someimage)`

```
var url  = $(someelement).css("background-image"); //url(http://www.yahoo.com/someimage)

var path = url.replace(/url(\()|(\))/, ''); 
```

我尝试了几种方法，但似乎无法得到结尾括号。我不确定我需要做什么才能正确地写这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:03:37.727

匹配字符串的`^`开头和结尾`$`，并让它知道它是`g`两个匹配的lobal；

```
/^url\(|\)$/g 
```

你也可以让它有选择地寻找这样的报价

```
/^url\(['"]?|['"]?\)$/g 
```

# c++ - C++ - 如何将 char* 转换为 std::list

> ID：15034705
> 
> 赞同：0
> 
> 时间：2013-02-22T23:07:15.583
> 
> 标签：c++, chars, stdlist

这是一个初学者类型的问题

我只是想知道是否有办法将空终止的 char* 转换为 std::list。

谢谢

```
char* data = ...
std::list<char> clist = convert_chars2list(data);
...
convert_chars2list(char* somedata)
{
    //convert
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T23:10:16.527

这可能是最简单的方法：

```
#include <list>
#include <string>

int main() 
{ 
    char const* data = "Hello world";
    std::list<char> l(data, data + strlen(data));
} 
```

`std::string`它利用了具有与 STL 容器兼容的接口的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:10:11.340

```
std::list<char> convert_chars2list(char *somedata)
{
    std::list<char> l;

    while(*somedata != 0)
        l.push_back(*somedata++);

    // If you want to add a terminating NULL character
    // in your list, uncomment the following statement:
    // l.push_back(0);

    return l;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:10:55.453

```
std::list<char> convert_chars2list(char* somedata)
{
  std::list<char> res;
  while (*somedata)
     res.push_back(*somedata++);
  return res;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:11:18.057

如果您`char*`是 C 风格的字符串，那么您可以这样做（这意味着它以 a 结尾`\0`）

```
#include <list>

int main()
{
    char hello[] = "Hello World!";

    std::list<char> helloList;

    for(int index = 0; hello[index] != 0; ++index)
    {
        helloList.push_back( hello[index] );
    }    
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-22T23:10:48.473

使用 std::list 来包含字符真的很奇怪，如果你真的想使用 stl 来包含字符，你可以使用[std::string](http://www.cplusplus.com/reference/string/string/)，它可以让你这样做：

```
char*           data = ....;
std::string     string(data); 
```

# php - PHP - 邮政编码距离函数将距离转换为英里

> ID：15034707
> 
> 赞同：0
> 
> 时间：2013-02-22T23:07:24.340
> 
> 标签：php, trigonometry, geocode, zipcode

我在这里找到了一些代码，可以在数学上找到两个邮政编码之间的距离。我正在使用 Google geocode api 从每个邮政编码中获取经纬度。一切正常，但我想知道如何将`$distance`回报转换为英里：

```
function calc_distance($zip1, $zip2)
{   
    $geo = new GoogleGeocode( $apiKey );
    $point1 = $geo->geocode( $zip1 );
    $point1 = $point1['Placemarks'][0];
    echo "P1:"; print_r( $zip1 );
    $point2 = $geo->geocode( $zip2 );
    $point2 = $point2['Placemarks'][0];
    echo "<br>P2: "; print_r( $zip2 ); echo "<br>";

    var_dump($point1); 
    echo "<br><br>";
    var_dump($point2); 
    echo "<br>";
    $radius      = 3958;      // Earth's radius (miles)
    $deg_per_rad = 57.29578;  // Number of degrees/radian (for conversion)

    $distance = ($radius * pi() * sqrt(
                ($point1['Latitude'] - $point2['Latitude'])
                * ($point1['Latitude'] - $point2['Latitude'])
                + cos($point1['Latitude'] / $deg_per_rad)  // Convert these to
                * cos($point2['Latitude'] / $deg_per_rad)  // radians for cos()
                * ($point1['Longitude'] - $point2['Longitude'])
                * ($point1['Longitude'] - $point2['Longitude'])
        ) / 180);

    echo $distance;
    return $distance;  // Returned using the units used for $radius.
} 
```

当我测试使用：`calc_distance(28025, 22044);`它返回：

```
P1:28025
P2: 22044
array(7) { ["Accuracy"]=> int(5) ["Country"]=> string(2) "US" ["AdministrativeArea"]=> string(2) "NC" ["Locality"]=> string(7) "Concord" ["PostalCode"]=> int(28025) ["Latitude"]=> float(35.3898417) ["Longitude"]=> float(-80.5216184) } 

array(7) { ["Accuracy"]=> int(5) ["Country"]=> string(2) "US" ["AdministrativeArea"]=> string(2) "VA" ["Locality"]=> string(12) "Falls Church" ["PostalCode"]=> int(22044) ["Latitude"]=> float(38.8607388) ["Longitude"]=> float(-77.1571443) } 
302.952750233 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:16:24.207

半径以英里为单位，因此返回的距离以英里为单位。您可能遇到的问题是您看到返回`302`的距离与从 google maps返回的距离之间存在差异`370`。这是因为您的函数返回的距离返回了一个精确的点到点距离……就好像一架飞机从一个点飞到另一个点一样。行驶方向包括转弯，因此距离将大于直线距离。我发现将直线距离乘以`1.25`通常会得到准确的结果。

# asp.net-mvc - 成功部署的 MVC 4 站点运行但不显示

> ID：15034710
> 
> 赞同：1
> 
> 时间：2013-02-22T23:07:40.043
> 
> 标签：asp.net-mvc, deployment, web, iis-7.5, webmatrix

我成功地将 MVC 4 应用程序部署到我的开发机器上的 IIS Express 并且一切运行良好。我也可以成功部署到我的生产服务器，但是当尝试在生产环境中访问已部署的应用程序时，它无法显示。

开发工具：Visual Studio 2012 Express for Web。

生产服务器（已安装所有更新）： - Windows Server 2008 R2 x64 - IIS 7.5 - MS .Net Framework 4.5 - 带有语言包的 ASP.Net MVC 4 - Web Deploy 2.1 和 Web Deploy 3.0 - IIS 的推荐配置。

此外，ASP.NET 在 IIS 中注册了 Framework\v4.0.30319 和 Framwork64\v4.0.30319，站点的应用程序池为 .Net Framework v4.0.30319。IIS_IUSRS 组具有继承权限（读取和执行、列出文件夹内容和读取）。

我有一个通过 DynDNS 连接到网络的生产网络服务器，我的站点使用端口 80。

网站运行但不显示的原因可能是什么？

任何帮助，将不胜感激。

**附加信息**：当我检查部署到生产服务器的任何站点的 WebMatrix 中的兼容性时，我**总是**得到简单 HTML 页面的结果“不可用”（另一方面，.Net-Framework-Version 总是给出“可用” ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:16:01.277

似乎一切正常，我遇到了 DNS 服务器错误（错误的外部服务器地址）。

# asp.net - 如何通过@Html.DropDownListFor 正确设置选定状态

> ID：15034712
> 
> 赞同：2
> 
> 时间：2013-02-22T23:07:52.407
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我的视图中有这个下拉列表我正在尝试连接到我的 MVC4 Web 应用程序中的模型。

这是我的模型对象上的一个属性：

```
 /// <summary>
    /// Used to provide values in the type drop down list in.
    /// </summary>
    public IEnumerable<SelectListItem> SomeTypes
    {
        get
        {
            var someTypeNames = new [] { "abc", "def", "xyz" };

            var someTypes = Enum.GetValues(typeof(ESomeType)).Cast<EsomeType>();
            var someTypesSelectItemsList = new List<SelectListItem>();
            someTypesSelectItemsList.Add(new SelectListItem()
            {
                Selected = true,
                Text = "Choose a type",
                Value = "-1"
            });
            foreach (var eSomeType in someTypes)
            {
                var sli = new SelectListItem()
                {
                    Selected = false,
                    Text = someTypeNames[(int)eSomeType],
                    Value = ((int)eSomeType).ToString()
                };
                someTypesSelectItemsList.Add(sli);
            }
            return someTypesSelectItemsList;
        }
        set { }
    } 
```

这是我稍后将在视图中绑定下拉列表的模型属性：

```
[DataMember, Required]
[Display(Name = "Type:")]
public virtual int SomeType { get; set; } 
```

然后我在我的视图中打印这个：

```
@Html.LabelFor(m => m.SomeType)
@Html.DropDownListFor(m => m.SomeType, new SelectList(Model.SomeTypes, "Value", "Text"), new { ng_model = "type", ng_change = "ChangeType()" })
@Html.ValidationMessageFor(m => m.SomeType) 
```

现在这一切都很好（我稍后会重构更多），但我的问题在于呈现的 html：

```
<label for="SomeType">Type:</label>
<select data-val="true" data-val-number="The field Type: must be a number." data-val-required="The Type: field is required." id="SomeType" name="SomeType" ng-change="ChangeType()" ng-model="type">
    <option value="-1">Choose a type</option>
    <option selected="selected" value="0">abc</option>
    <option value="1">def</option>
    <option value="2">xyz</option>
</select>
<span class="field-validation-valid" data-valmsg-for="SomeTypeType" data-valmsg-replace="true"></span> 
```

如您所见，“abc”选项是 selected="selected" 而不是我的“选择类型”选项，我们可以清楚地看到我的模型中的代码设置了正确的选项。这里发生了什么？

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:12:18.553

当模型绑定变量与选择列表同名时，就会出现此问题。

尝试将您的名称更改`SelectList`为**SomeTypesList**

在您**的模型**中：

```
public IEnumerable<SelectListItem> SomeTypesList 
```

并在您的**视图**中：

```
@Html.DropDownListFor(m => m.SomeType, 
                      new SelectList(Model.SomeTypesList, "Value", "Text"),
                      new { ng_model = "type", ng_change = "ChangeType()" },
                      "Choose a type"} 
```

* * *

**后续说明：**您在选择列表中设置默认值，而不是您的助手

# mysql - 将多个 SQL 选择语句组合成列

> ID：15034718
> 
> 赞同：2
> 
> 时间：2013-02-22T23:08:23.770
> 
> 标签：mysql

我很难解决这个问题，非常感谢任何帮助。

我有两个连接到 1 个或多个表的 select 语句。

```
SELECT repinfo.repName, SUM(callstatssummary.CallsIn)
FROM repinfo
LEFT JOIN callstatssummary
ON repinfo.isaacID = callstatssummary.IsaacID AND callstatssummary.ShiftDate >= '2013-02-10' AND callstatssummary.ShiftDate <= '2013-02-16'
GROUP BY repinfo.repName; 
```

第一个语句的输出是 repinfo 表中每个人的列表，以及他们在一周内接听的总电话的总和。我使用左联接将未接听电话的人包括在结果中。

```
SELECT repinfo.repName, SUM(`1036`.afterRgu) - SUM(`1036`.priorRgu)
FROM repinfo
JOIN reporders
ON repinfo.repID = reporders.oRep
JOIN `1036`
ON reporders.workOrder = `1036`.workOrder AND `1036`.entryDate >= '2013-02-10' AND `1036`.entryDate <= '2013-02-16' AND `1036`.afterRgu >= `1036`.priorRgu
GROUP BY repinfo.repName; 
```

第二条语句输出一周内每个人销售的产品数量。repinfo 表包含有关代表的信息，该信息与 reporders 表连接以匹配工单。1036 表包含有关订单的详细信息。

我希望输出这样的东西 - 基本上结合了两个 select 语句的输出：

```
|  repName  |  SUM(callstatssummary.CallsIn) |  SUM(`1036`.afterRgu) - SUM(`1036`.priorRgu)  |
______________________________________________________________________________________________
| Bruce W   | 41                             | 13                                            |
| Cathy M   | 84                             | 17                                            |
| Jonah S   | NULL                           | 29                                            | 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:15:06.377

组合这些语句的一种方法是使它们中的每一个都成为派生表/内联视图并加入`repName`。

`repinfo`请注意：显然，如果两个代表可以具有相同的名称，则您可能希望加入代表 ID 号（或您称之为表的主键的任何内容）。

```
select 
  r.repName, c.sumCallsIn, o.sumProdSold
from
  repinfo r
  left join (
    SELECT repinfo.repName, 
           SUM(callstatssummary.CallsIn) sumCallsIn
    FROM   repinfo
           LEFT JOIN callstatssummary
           ON repinfo.isaacID = callstatssummary.IsaacID 
           AND callstatssummary.ShiftDate >= '2013-02-10' 
           AND callstatssummary.ShiftDate <= '2013-02-16'
    GROUP BY repinfo.repName
  ) c
  on c.repName = r.repName
  left join (
    SELECT repinfo.repName, 
           SUM(`1036`.afterRgu) - SUM(`1036`.priorRgu) sumProdSold
    FROM   repinfo
           JOIN reporders
           ON repinfo.repID = reporders.oRep
           JOIN `1036`
           ON reporders.workOrder = `1036`.workOrder 
           AND `1036`.entryDate >= '2013-02-10' 
           AND `1036`.entryDate <= '2013-02-16' 
           AND `1036`.afterRgu >= `1036`.priorRgu
    GROUP BY repinfo.repName
  ) o
  on r.repName = o.repName
order by r.repName; 
```

# iphone - iPhone 静音时播放音频

> ID：15034719
> 
> 赞同：1
> 
> 时间：2013-02-22T23:08:30.113
> 
> 标签：iphone, ios, objective-c, audio, avaudiosession

我目前正在开发一个应用程序，即使手机静音也需要播放短音频。以下代码在手机未静音时播放音频，但在手机静音时不会播放音频，就像我想要的那样。

这是代码：

```
// set playback settings
self.audioSession = [AVAudioSession sharedInstance];
[self.audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

AudioSessionSetActive(true);
UInt32 property = kAudioSessionProperty_OtherMixableAudioShouldDuck;
AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck, sizeof(property), &property);
OSStatus result = AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck, sizeof(property), &property);
if (result) {
    NSLog(@"error seting property");
}

// set sound file settings
NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"baby_crying" ofType:@"mp3"];
AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:soundFile], &soundId);

AudioServicesPlaySystemSound(soundId); 
```

请让我知道这段代码有什么问题。

# rest - 如何通过带有 symfony2 和表单的 API 管理集合

> ID：15034722
> 
> 赞同：0
> 
> 时间：2013-02-22T23:08:48.397
> 
> 标签：rest, symfony, doctrine-orm, symfony-forms

我正在构建一个 API，用户可以在其中更新包含集合的实体。如果我自始至终都使用表单，这很好用，但我正在构建 API。我的实体如下所示：

```
<?php
class MyEntity {
    // ...

    /**
     * @ORM\OneToMany(targetEntity="TitleEntity", mappedBy="entityID", cascade={"persist"})
     */
    protected $myTitles;

    public function getMyTitles() {
        return $this->myTitles;
    }

    public function setMyTitles($titles) {
       foreach($titles as $key => $obj) { $obj->setEntity($this); }
       $this->myTitles = $collection;
    }

    public function addMyTitle($obj) {
        $obj->setEntity($this);
        $this->myTitles[] = $obj;
    }

    public function removeMyTitle($obj) {
        $this->myTitle->removeElement($obj);
    }
} 
```

是一个实体，它有一个 ID、它所附加到的`myTitles`实体的 ID，然后是一个标题。

对于 API，我将 JSON 内容主体作为对 MyEntity 对象的 PUT 请求传回，因此我最终得到了一个标题数组，并且我正在准备将它们绑定到表单以进行验证：

```
$myTitles = array();
foreach($titles as $key => $title) {
    $titleObj = new TitleEntity();
    $titleObj->setTitle($title);
}
$myEntity->setTitles($titles); 
```

但它抱怨：

```
The form's view data is expected to be of type scalar, array or an instance of
\ArrayAccess, but is an instance of class stdClass. You can avoid this error by 
setting the &quot;data_class&quot; option to "stdClass" or by adding a view 
transformer that transforms an instance of class stdClass to scalar, array or 
an instance of \ArrayAccess 
```

看起来这是因为我`getMyTitles()`在将实体绑定到我用来验证的表单之前调用。

我正在使用数组绑定到表单：

```
$form = $this->createForm(new AddEntity(), $myEntity);
$data = array( // Set all my data );
$form->bind($data);
if($form->isValid() {
// ... 
```

如果我`createForm()`先打电话，然后添加标题，我会得到：

```
Call to a member function removeElement() on a non-object 
```

这发生在里面`removeMyTitle()`。

我该如何处理？

**编辑**

这是`AddEntity()`类型：

```
<?php
class AddEntity extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options)
{

    $builder
        ->add('title', 'text')
        ->add('subheading', 'text')
        ->add('description', 'textarea')
        ->add('myTitles', 'collection', array(
            'type' => new AddMyTitles(), // Basic type to allow setting the title for myTitle entities
            'allow_add' => true,
            'allow_delete' => true,
            'prototype' => true,
            'by_reference' => false,
            'options' => array(
                'required' => false,
            ),
        ));
}

public function getName()
{
    return 'addEntity';
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'My\TestBundle\Entity\Entity',
    ));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:28:41.163

这里需要数据转换器。

[http://symfony.com/doc/2.0/cookbook/form/data_transformers.html](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)

基本上，您已经告诉表单它正在获取一个数组，并且您已经给了它其他东西。变压器应该处理这个问题。

如果您需要更多帮助，我需要更多信息。

此外，有点令人费解的是，您在散文中引用了“myCollections”，但在代码中没有显示它。^^^^^^^^^ 由编辑修复。

# c - getenv 的标准 C 用法和安全实践

> ID：15034723
> 
> 赞同：11
> 
> 时间：2013-02-22T23:08:53.390
> 
> 标签：c, unix, environment-variables, getenv

我正在尝试编写在 UNIX 环境中使用一些 ENV 变量的 C 代码。问题是：读取变量（例如 getenv()）会导致缓冲区溢出吗？此外，我怎样才能找到我的平台的 env 变量大小的限制？例如哪个头文件？

最后，阅读环境提供的变量时最安全的代码实践是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:25:51.820

读取环境变量`getenv()`不会导致缓冲区溢出。

在 Linux 上，继承的环境变量及其值由内核在`exec()`. 该`getenv()`函数只返回一个指向此现有数据的指针。由于它不复制任何数据，因此没有缓冲区，也不可能出现缓冲区溢出。

如果您尝试将过多的环境变量传递给新进程，`exec()`则会发出`E2BIG`错误信号。

## 安全问题

环境变量实际上没有任何缓冲区溢出问题。

安全问题集中在您不应该信任环境内容这一事实上。如果您的程序运行 setuid（或 setgid 等），那么环境就是攻击媒介。用户可以恶意设置`PATH`或`LD_PRELOAD`其他变量。

但是，很少编写 setuid 程序。这是一件好事，因为有很多原因使 setuid 程序难以确保安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:24:08.807

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *hai;
    printf("The current User name is\n");
    hai="USER";
    printf("%s\n",getenv(hai));
    printf("The current User Directory is\n");
    char *hai1="PWD";
    printf("%s\n",getenv(hai1));
    exit(0);
} 
```

该程序正在传递 getenv() 函数的参数，其有效方式是获取输出

```
Output:
    The current User name is

    loganaayahee

    The current User Directory is

    /home/loganaayahee/AdvanceUnix/
(or) 
```

这不是环境变量意味着 getenv() 函数返回 NULL。

```
 hai="HELLO";
    if(getenv(hai)==NULL)
        printf("This is not Env\n");
    else
        printf("%s\n",getenv(hai));

Output:
    This is Not Env 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T04:51:43.110

您必须小心环境，特别是如果您想将其传递给子进程。例如，环境应该为每个变量只包含一个值，但是很容易创建一个包含多个值的环境，如果删除第一个并将结果传递给另一个，则会暴露另一个。如果您想为儿童净化环境，请从头开始创建环境，而不是通过删除现有环境中的值。[David Wheeler 在他的网站上](http://www.dwheeler.com)有一份 Unix/Linux 安全编程指南。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:53:09.850

取决于您所说的“阅读”是什么意思。只是打电话`getenv`不会造成任何问题。但是，如果您尝试将返回的字符串复制到某种类型的缓冲区并且您不检查缓冲区的限制，则可能会出现缓冲区溢出。返回的字符串`getenv`可能很大，除了系统决定分配给环境的可用内存之外没有上限。

这与您可能获得的任何其他字符串输入没有什么不同——请注意使用它们`strcpy`，`sprintf`因为它们不会检查您的输出缓冲区的大小。

# database - 为什么 Informix 数据库，创建视图后更改我原来的 SQL 代码？

> ID：15034724
> 
> 赞同：2
> 
> 时间：2013-02-22T23:08:59.777
> 
> 标签：database, informix

嗨，提前感谢。我想知道为什么在创建新视图后我的代码发生了更改，这发生在两个不同的 IDE、Server Studio 和 RazorSQL 上，这是一个示例。

**原始代码：**

```
SELECT T_USER.ID IDUSER, T_DEP.DESCRIPTION DEPARTMENT

FROM TABLE1 T_USER
INNER JOIN TABLE2 T_DEP ON TABLE2.ID = TABLE1.ID 
```

**创建视图后**

```
DROP
    VIEW orales:vw_test;
CREATE
    view "owner".vw_test (id, description) as
SELECT
        x0.id   
        x1.description ,

FROM
    ("owner".table1 x0 JOIN "owner".table2 x1
        ON
        ((x1.id = x0.id))); 
```

我想知道如何防止编译器或其他东西覆盖我的表别名的名称和我的内部连接的子句。

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:50:50.280

您无法阻止这种行为。

实际上，*所有*数据库都这样做。您的原始查询被解析为[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，该树以专有格式存储在数据库中。

您所看到的是将该 AST 呈现为有效的 SQL 语句。

您的原始查询早已不复存在。

* * *

您不应该依赖数据库来“管理”查询的来源。您的原始查询是“代码”，应该由版本控制系统管理，就像项目中的所有其他代码一样。这样做意味着您的查询在数据库中的内部表示是无关紧要的，并且当然可以为您提供 VCS 的所有其他好处。

# c++ - 类似函数的宏和奇怪的行为

> ID：15034726
> 
> 赞同：3
> 
> 时间：2013-02-22T23:09:11.303
> 
> 标签：c++, macros, effective-c++

我已经开始阅读 Effective C++ 并且在第 2 项中的某个时间点，提到了以下内容：

```
// call f with the maximum of a and b
#define CALL_WITH_MAX(a, b) f((a) > (b) ? (a) : (b))

...

int a = 5, b = 0;
CALL_WITH_MAX(++a, b); // a is incremented twice
CALL_WITH_MAX(++a, b+10); // a is incremented once 
```

> 在这里，在调用 f 之前 a 增加的次数取决于与之比较的对象！

确实，如果我在 中使用简单的打印语句`f`，第一次调用会打印 7 ，但我终其一生都无法弄清楚原因。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:12:58.247

编译器会用您传入的内容逐字逐句替换宏。所以你最终得到

```
int a = 5, b = 0;
f((++a) > (b) ? (++a) : (b));
f((++a) > (b+10) ? (++a) : (b+10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:20:43.430

使用（如果您不使用，请`g++ -E myprog.cpp`替换`g++`为） - 它适用于几乎所有编译器，它会在预处理后生成实际的东西。`whatever-your-compiler-is``g++`

这是一个很好的例子，说明了为什么你不应该使用宏来做函数类型的东西。

如果您要使用内联函数，您将获得更多（可能）期望的结果：

```
 inline void CallWithMax(int a, int b) 
 {
     f((a) > (b) ? (a) : (b));
 } 
```

任何体面的编译器都应该能够至少像宏一样高效地执行此操作，并具有额外的优势，即您的`a`和`b`在调用代码中被评估一次，并且不会发生任何“奇怪”的事情。

如果您使用调试符号构建代码，您也可以单步执行内联函数，因此如果您想查看函数内部的值`a`和`b`实际值，您可以这样做。宏，因为它们扩展到源代码中的原始位置，所以你无法真正看到里面发生了什么。

# wcf - WCF序列化代码

> ID：15034732
> 
> 赞同：2
> 
> 时间：2013-02-22T23:09:37.047
> 
> 标签：wcf, serialization, deserialization

我刚刚开始 WCF。我有一个关于序列化的问题。我知道 WCF 默认在幕后使用 DataContract 序列化。我在 Aaron Skonnard 的文章[http://msdn.microsoft.com/en-us/magazine/cc163569.aspx](http://msdn.microsoft.com/en-us/magazine/cc163569.aspx)中查看了一些在线代码。下面的代码来自他的文章。在此，他编写了序列化 Person 对象的代码。我的问题是 WCF 不会在幕后执行此操作。为什么一定要写序列化逻辑？然后再次反序列化它。作为 WCF 初学者，我对何时编写此代码以及何时不编写感到困惑。我认为如果没有编写序列化逻辑，这将正常工作。帮助表示赞赏！

```
static void WriterPersonSerializable()
{

Person p = new Person("Bob", 34, "secret");

p.spouse = new Person("Jane", 33, "secret");

using (FileStream fs = new FileStream("person.xml", FileMode.Create))
using (XmlDictionaryWriter writer =
    XmlDictionaryWriter.CreateTextWriter(fs))
{
    DataContractSerializer serializer =
        new DataContractSerializer(typeof(Person));
    serializer.WriteObject(writer, p);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:30:32.783

你不必做那样的事情。当然，您可以设置自己的序列化。但默认情况下，如果您仅通过**[DataContract]**属性标记您的类并通过**[DataMember]**属性标记类的属性，则可以。之后，您需要做的就是通知您的服务它应该能够在**[ServiceKnownType]**属性中序列化/反序列化哪些类。就是这样，一切都会开箱即用。

# php - 将现有数据库与 Redbean 一起使用

> ID：15034738
> 
> 赞同：3
> 
> 时间：2013-02-22T23:09:51.500
> 
> 标签：php, redbean

除了 Google Groups 的帖子说你可以，但它必须 100% 匹配之外，我找不到太多关于将 RedBean 与现有数据库一起使用的信息。

我需要有关映射现有数据库以与 Redbean 一起使用的文档或信息，即我不希望 Redbean 自己创建模式，而是使用现有数据库。

有没有人有这样做的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:38:47.667

如果您的架构不遵循红豆约定，请使用学说

即是这样的：

*   对象类型 = 表名，小写
*   名为 _id 的列被视为反向引用
*   名为 _ 的表是类型 a 和类型 b 之间的多对多映射
*   主键作为整数类型的 ID。

# ruby - 遍历数组数组

> ID：15034744
> 
> 赞同：0
> 
> 时间：2013-02-22T23:10:19.457
> 
> 标签：ruby

我有一个数组，如下所示：

```
=> [[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15]] 
```

我想按内部数组中元素的顺序重新排列它，例如：

```
=> [[1,6,11],[2,7,12],[3,8,13],[4,9,14],[5,10,15]] 
```

我怎样才能做到这一点？

我知道我可以迭代一个数组数组，比如

```
array1.each do |bla,blo|
  #do anything
end 
```

但是内部数组的边不是固定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:13:41.593

```
p [[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15]].transpose
#=> [[1, 6, 11], [2, 7, 12], [3, 8, 13], [4, 9, 14], [5, 10, 15]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:14:00.783

使用[`transpose`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-transpose)方法`Array`

```
a = [[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15]]
a.transpose
#=> [[1, 6, 11], [2, 7, 12], [3, 8, 13], [4, 9, 14], [5, 10, 15]] 
```

请注意，这仅适用于数组长度相同的情况。

如果您想处理彼此具有不同长度的转置数组，应该这样做

```
class Array
  def safe_transpose
    max_size = self.map(&:size).max
    self.dup.map{|r| r << nil while r.size < max_size; r}.transpose
  end
end 
```

并将产生以下

```
a = [[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15,16]]
a.safe_transpose
#=> [[1, 6, 11], [2, 7, 12], [3, 8, 13], [4, 9, 14], [5, 10, 15], [nil, nil, 16]] 
```

# php - 我有一个 PHP 页面缓存脚本；如何让它在生成新页面之前显示以前缓存的页面？

> ID：15034745
> 
> 赞同：0
> 
> 时间：2013-02-22T23:10:25.070
> 
> 标签：php, caching

这是我正在使用的代码：

```
<?php
    $interval = 5 * 60;
    $filename = "cache/".basename( rtrim( $_SERVER["REQUEST_URI"], '/' ) ).".cache";

    if ( file_exists( $filename ) && (time() - $interval) < filemtime( $filename ) ) {
        readfile( $filename );
        exit(); 
    }

    ob_start(); 

    include 'dynamicpage.php'; 
?>

<?php
    // More page generation code goes here

    $buff = ob_get_contents(); // Retrive the content from the buffer

    // Write the content of the buffer to the cache file
    $file = fopen( $filename, "w" );
    fwrite( $file, $buff );
    fclose( $file );

    ob_end_flush(); // Display the generated page.
?> 
```

目前，如果缓存页面超过 5 分钟，此脚本将生成一个新的缓存文件来替换旧的缓存文件。有什么办法可以先显示旧缓存并在后台生成新的缓存页面？我的主机很弱，所以它需要永远等待页面完成加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:20:37.107

听起来您需要一个异步 PHP 请求。本质上，这会触发另一个脚本与您当前的脚本一起运行。@John 有正确的想法，但 crontab 只是异步运行缓存过程的一种方式。他的解决方案的缺点是它将每 5 分钟运行一次，无论是否需要。

有许多库和其他一些零碎的东西可以帮助您设置异步 PHP 处理，但正如@John 所说，它有点涉及。

这里有一些资源可以帮助解决这个问题：

*   [php-parallel-processing（PHP 库）](https://code.google.com/p/php-parallel-programming/)
*   [Gearman（原生 PHP 库）](http://www.php.net/manual/en/gearman.examples-reverse.php)
*   [异步 PHP 调用？（所以问题）](https://stackoverflow.com/questions/124462/asynchronous-php-calls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:29:49.237

Smarty 模板引擎是一个简单而小型的工具，它具有许多内置的缓存功能，没有框架规则。[http://www.smarty.net/](http://www.smarty.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:15:16.057

我会设置一个 crontab 以每 5 分钟处理一次页面，并始终为您的用户提供缓存页面。

如果您无法设置 crontab，则可以输出一个隐藏的 iframe，其中包含动态页面加载，因此页面加载速度很快，但另一个实例正在后台加载（不是一个非常简洁的解决方案，但可以工作）。

# xcode - 如何将游戏从 Stencyl 导出到 Xcode？

> ID：15034755
> 
> 赞同：1
> 
> 时间：2013-02-22T23:11:00.537
> 
> 标签：xcode, game-engine, stencyl

当我在 iOS 设备上运行测试游戏时，在 Xcode 中打开的源代码没有更新。我看到了上次成功保存并运行的代码。

它曾经完美地工作，我不确定发生了什么变化。这发生在 Stencyl 2.2.0 和 3.0.0 中。

任何帮助都将不胜感激，因为我非常渴望为我的第一场比赛画龙点睛。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T13:44:18.327

我发现，使用 Stencyl 3.0，如果你为 iOS 设备或模拟器构建，它不再打开 Xcode 来启动应用程序，但它仍然会创建 xcodeproj。

我所做的是构建，然后立即使用聚光灯搜索（命令空间）并搜索“.xcodeproj”——最近更新的将是 Stencyl 创建的。

# ruby-on-rails - Rails 3 上 postgres 适配器的自定义排序规则

> ID：15034759
> 
> 赞同：1
> 
> 时间：2013-02-22T23:11:17.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-postgresql, pg

创建数据库时支持 Postgres Collat​​e 和 Ctype 选项。

我需要在 rails 创建数据库时设置它们，但似乎在 Rails 3 的 database.yml 中没有此选项

（但在边缘 Rails 中有：[https](https://github.com/rails/rails/pull/6895) ://github.com/rails/rails/pull/6895 ）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T15:15:30.103

从阅读[官方文档开始](https://sourceforge.net/projects/ledger-smb/files/Beta%20Releases/1.3.31-rc1/)

简单来说，你可以设置环境变量来影响大部分的 initdb 设置。如果不能为 设置 arg `--lc-collate`，可以设置 的环境变量`LC_COLLATE`，为`--lc_ctype`设置`LC_CTYPE`为环境变量等。

如果环境变量可用，它将被使用。

# javascript - 如何在 for-in 中跳到 javascript 中的下一个，而在里面有一段时间？

> ID：15034763
> 
> 赞同：35
> 
> 时间：2013-02-22T23:11:26.573
> 
> 标签：javascript, for-loop, for-in-loop

我有一个简短的 javascript 代码，我需要在 for 循环中跳到下一个......见下文：

```
var y = new Array ('1', '2', '3', '4');
for (var x in y) {
   callFunctionOne(y[x]);
   while (condition){
       condition = callFunctionTwo(y[x]);
       //now want to move to the next item so 
       // invoke callFunctionTwo() again...
   }
} 
```

想要保持简单，所以语法可能没有错误。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-22T23:15:59.857

不要使用`for...in`. 该语法用于迭代对象的属性，这不是您所追求的。

至于您的实际问题，您可以使用`continue`：

```
var y = [1, 2, 3, 4];

for (var i = 0; i < y.length; i++) {
    if (y[i] == 2) {
        continue;
    }

    console.log(y[i]);
} 
```

这将打印：

```
1
3
4 
```

* * *

实际上，您似乎想跳出`while`循环。您可以`break`为此使用：

```
while (condition){
    condition = callFunctionTwo(y[x]);
    break;
} 
```

也看看[`do...while`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/do...while)循环。

# eclipse - 如何在 Eclipse 中使用 MATLAB？

> ID：15034764
> 
> 赞同：3
> 
> 时间：2013-02-22T23:11:28.910
> 
> 标签：eclipse, matlab

对于我的计算机科学课程，我们使用 MATLAB 来编写我们所有的家庭作业/测验问题等。我已经使用 eclipse 来编写我的 Java 编码和我的 Android 编码。是否可以使用 Eclipse 在 MATLAB 中编写代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:15:22.570

eclipse的MATLAB插件：

[http://code.google.com/a/eclipselabs.org/p/matclipse/](http://code.google.com/a/eclipselabs.org/p/matclipse/)

但是，您仍然需要 MATLAB 来运行您的代码。可能通过慢速远程连接做到这一点？

# jquery - JSON 理解 [object object] 与 jQuery 使用 AJAX 传递值

> ID：15034765
> 
> 赞同：-1
> 
> 时间：2013-02-22T23:11:37.913
> 
> 标签：jquery, ajax, json

我有一个值数组，并且我已经转换为 JSON，以便我可以插入一个属性（不知道有任何其他方法可以做到这一点）：

```
<div data-categories="[[{"id":"4123","name":"Sushi Restaurant","pluralName":"Sushi Restaurants","shortName":"Sushi"}]]">
</div> 
```

就是这样，然而，可能有更多的值而不是这个简单的 JSON

```
[
  [
     {"id":"4123","name":"Sushi Restaurant","pluralName":"Sushi Restaurants","shortName":"Sushi"},
     {"id":"5555","name":"More","pluralName":"More","shortName":"More"}
  ]
] 
```

就像上面这样。

现在我无法将带有 ajax 的 JSON 传递到另一个文件。

```
var cats = $('div').data('categories');
alert(cats); // this alerts object object
var categories = "cats="+cats;
$.ajax({ //json data for categories
    url: 'saving.php',
    type: 'post',
    dataType: 'json',
    data: categories
}).done(function(data){
    alert(data); //this does not get alerted
}); 
```

我想用这些数据做的是将它传递给 mysql，所以我想最终将它 json_decode 以便我可以使用某些数据

```
if(isset($_POST['cats'])){
// It doesnt' even pass through here?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:14:00.537

尝试这个：

```
var cats = $('div').data('categories');
alert(cats); // this alerts object object

$.ajax({ //json data for categories
    url: 'saving.php',
    type: 'post',
    dataType: 'json',
    data: {
        cats : cats
        },
    }).done(function(data){
    alert(data); //this does not get alerted
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:17:43.133

使用单引号而不是双引号：

```
<div data-categories='[[{"id":"4123","name":"Sushi Restaurant","pluralName":"Sushi Restaurants","shortName":"Sushi"}]]'>
</div> 
```

此外，您不能将对象与字符串连接，值变为：

```
"cats=[object Object]" 
```

由于您使用的是 POST 方法，因此您应该编码：

```
data: {
    cats: cats
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:13:17.130

如果没有收到警报，则不会返回任何内容。这可能是因为服务器错误。您可能想在浏览器上打开控制台并查看 AJAX 调用是否有任何问题

# mysql - Ruby on Rails 3 模型之间的关系

> ID：15034766
> 
> 赞同：1
> 
> 时间：2013-02-22T23:11:45.093
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.2, relationship, rails-activerecord

我正在关注为 Rails 3 制作的教程，我正在使用 Rails 3.2，但认为我正确地遵循它但出现错误，我的课程如下，当我使用 task.admin_users_tasks 时发生错误

```
class Task < ActiveRecord::Base

  attr_accessible :name, :project_id, :task_id, :permalink, :visible, :position, :created_at
  belongs_to :project
  has_and_belongs_to_many :admin_users
  has_many :admin_users_tasks
end

class AdminUsersTask < ActiveRecord::Base
  attr_accessible :admin_user_id, :task_id, :created_at, :updated_at
  belongs_to :admin_user, :class_name => "AdminUser" :foreign_key => 'admin_user_id'
  belongs_to :task
end

class AdminUser < ActiveRecord::Base

  attr_accessible :first_name, :last_name, :username, :email

  has_and_belongs_to_many :projects
  has_and_belongs_to_many :tasks
  has_many :admin_users_tasks
  has_many :admin_users_projects
end 
```

Rails 控制台

```
 1.9.3-p362 :032 > task
 => #<Task id: 1, project_id: 6, permalink: "taskytask", position: 1, visible: true,   created_at: "2013-02-21 05:08:01", updated_at: "2013-02-21 05:08:01", name: "Task Name for   Noname Project"> 
1.9.3-p362 :033 > me
 => #<AdminUser id: 1, first_name: "Larry", last_name: "David", email:         "larry.david@mail.com", hashed_password: "c9f4e8d3aaa265033c2f517abd5d347bd81d67fa",     created_at: "2013-02-21 04:43:20", updated_at: "2013-02-21 04:43:20", username: "larrydavid",     salt: "d4189f8db685776d3a3c3c4d0700786b7879362d"> 
1.9.3-p362 :034 > me.admin_users_tasks
 => [] 
1.9.3-p362 :035 > task.admin_users_tasks
NoMethodError: undefined method `admin_users_tasks' for #<Task:0x007fca9e159f58>
    from /Users/larrydavid/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-    3.2.11/lib/active_model/attribute_methods.rb:407:in `method_missing'
    from /Users/larrydavid/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-    3.2.11/lib/active_record/attribute_methods.rb:149:in `method_missing'
    from (irb):35
        from /Users/larrydavid/.rvm/gems/ruby-1.9.3-p362/gems/railties-    3.2.11/lib/rails/commands/console.rb:47:in `start'
    from /Users/larrydavid/.rvm/gems/ruby-1.9.3-p362/gems/railties-    3.2.11/lib/rails/commands/console.rb:8:in `start'
    from /Users/larrydavid/.rvm/gems/ruby-1.9.3-p362/gems/railties-    3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
from script/rails:6:in `<main>'
1.9.3-p362 :036 > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:42:54.007

修复了问题。首先，控制台尚未重新启动。

其次在 Rails 3.2 中是什么，

```
belongs_to :admin_user, :class_name => "AdminUser" :foreign_key => 'admin_user_id' 
```

应该

```
belongs_to :admin_user, class_name: "AdminUser", foreign_key: 'admin_user_id' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:30:04.350

该代码有点尴尬，主要是因为您使用 HABTM 语法以及提供模型，您应该使用 has_many :through 来完成。我会以不同的方式设置模型，然后导轨可能会不那么混乱。

```
class Task < ActiveRecord::Base
  has_many :admin_users_tasks
  has_many :admin_users, :through => :admin_users_tasks
end

class AdminUser < ActiveRecord::Base
  has_many :admin_users_tasks
  has_many :tasks, :through => :admin_users_tasks
end

class AdminUserTasks < ActiveRecord::Base
  belongs_to :admin_user
  belongs_to :task
end 
```

HABTM 适用于当您需要多对多连接时，并且您没有连接表的模型，连接的每一侧只有 2 列。没有 ID 或时间戳。

has_many :through 是当你想要一个多对多连接的时候，并且有一个连接表的模型，使它实际上是一个双多一连接，并且连接表有一个 id 列，时间戳，以及两个外部键。

同样从您的代码的外观来看，您对 AdminUser 和 Project 做同样的事情，如果有一个 AdminUserProject 模型加入这两个模型，请使用 has_many :through 而不是 HABTM。

# ruby - 黄瓜色输出根据我打印文本的位置而变化

> ID：15034767
> 
> 赞同：1
> 
> 时间：2013-02-22T23:11:47.573
> 
> 标签：ruby, cucumber

当我直接从黄瓜的 Given/When/Then 语句打印输出时，它会以漂亮的蓝色文本打印，但是如果我调用任何其他函数并在其中打印，它会以红色打印（而不是缩进）

样品特点：

```
Feature: Foo
  Scenario: Foo2
    Given something
    Then something else 
```

示例 step_def：

```
Given /^something$/ do
  puts "Pretty blue"
end

class AnyClass
  def doSomething
    puts "Scary red"
  end
end

Then /^something else$/ do
  AnyClass.new.doSomething
end 
```

在下面的示例输出中，“Scary red”是红色的，根本没有缩进，实际上是在黄瓜步骤之前打印的（“Then”子句）。“Pretty blue”为蓝色，适当缩进，在黄瓜步骤后输出。

```
Feature: Foo

  Scenario: Foo2
    Given something
      Pretty blue
Scary red
    Then something else

1 scenario (1 passed)
2 steps (2 passed)
0m0.001s 
```

我是 Ruby & cucumber 的新手，所以我什至不肯定这些是这个问题的合适标签。有没有办法让其他类中调用的方法的输出与漂亮的格式相匹配？

编辑：更多的搜索表明，步骤中的 put 处理方式与其他函数（从其他格式化程序中排除）的 put 处理方式不同（例如，如果格式不同，则包含它们）。所以也许问题是，Ruby 如何从步骤中截取 put？我怀疑他们正在实施自己的 put，这是 step 课程的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:00:35.533

在为黄瓜步骤编写语法时，黄瓜已被覆盖（语法）要着色和缓冲。颜色取决于步骤是否通过，并且缓冲发生是因为它不会在所有内容运行之前为输出着色（因此它知道要打印哪种颜色）。

从语法步骤中传递 self 并调用对象 puts 得到我所追求的行为。

红色是我默认字体颜色的副作用。

IE：

```
After /Some Condition/ do
   some_object.test_something(self)
end

class SomeObject
   def test_something(obj)
      obj.puts "SomeText"
   end
end 
```

# c# - 无法下载 utf-8 网页内容

> ID：15034771
> 
> 赞同：3
> 
> 时间：2013-02-22T23:12:21.047
> 
> 标签：c#, utf-8, webclient

我有从越南网站获取响应的简单代码：http: [//vnexpress.net](http://vnexpress.net)，但有一个小问题。第一次下载没问题，但下载后内容中包含未知符号如下：�\b\0\0\0\0\0\0�\a`I�%&/m....问题是什么？

```
 string address = "http://vnexpress.net";
    WebClient webClient = new WebClient();
    webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11 AlexaToolbar/alxg-3.1");
    webClient.Encoding = System.Text.Encoding.UTF8;
    return webClient.DownloadString(address); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T00:09:10.277

您会发现响应是 GZipped。似乎没有办法下载它`WebClient`，除非您创建派生类并修改底层`HttpWebRequest`以允许自动解压缩。

下面是你如何做到这一点：

```
 public class MyWebClient : WebClient
    {
        protected override WebRequest GetWebRequest(Uri address)
        {
            var req = base.GetWebRequest(address) as HttpWebRequest;
            req.AutomaticDecompression = DecompressionMethods.GZip;
            return req;
        }
    } 
```

并使用它：

```
string address = "http://vnexpress.net";
MyWebClient webClient = new MyWebClient();
webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11 AlexaToolbar/alxg-3.1");
webClient.Encoding = System.Text.Encoding.UTF8;
return webClient.DownloadString(address); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:37:17.100

尝试使用代码，你会没事的：

```
string address = "http://vnexpress.net";

WebClient webClient = new WebClient();

webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows NT 6.2; WOW64)   AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11 AlexaToolbar/alxg-3.1");

return Encoding.UTF8.GetString(Encoding.Default.GetBytes(webClient.DownloadString(address))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:50:54.137

DownloadString 要求服务器在 Content-Type 响应标头中正确指示字符集。如果您在 Fiddler 中观看，您会看到服务器在 HTML 响应正文中的 META 标记内发送字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

如果您需要处理这样的响应，您需要自己解析 HTML 或使用 FiddlerCore 之类的库来为您执行此操作。

# c - 将双指针地址传递给三重指针时分配内存时遇到问题

> ID：15034777
> 
> 赞同：1
> 
> 时间：2013-02-22T23:12:50.160
> 
> 标签：c

我正在创建一个双指针并发送地址以分配内存，这需要一个三重指针。另外，我正在创建单指针（目标和助攻）并发送它们的地址来分配内存，这需要双指针。我认为问题在于内存分配，但我无法弄清楚。每当我运行 readLinesFromFile 函数时，我都会保持段错误。当我尝试自己运行 allocateMemory 函数时，它不会出现段错误。问题也可能出在 readLinesFromFile 函数中

```
int main (int argc, char **argv)
{
    int numPlayers = 0;
    if (argc != 3)
    {
        printf("Missing text file");
        return 0;
    }
    char **playerNames;
    int *goals, *assists;

        FILE *filePtr = fopen(argv[1],"r");

         if(filePtr == NULL)
         {
             printf("\nFile is empty");
             return 0;
         }
  numPlayers = countLinesInFile(filePtr);

  allocateMemory(&goals,&assists,&playerNames,numPlayers);

  readLinesFromFile(filePtr,goals,assists,playerNames,numPlayers);

}

void allocateMemory(int **goals, int **assists, char *** names, int size)
{

    int i = 0;

    *goals = malloc(MAX_NAME * sizeof(int));

    *assists = malloc(MAX_NAME * sizeof(int));

    *names = malloc(MAX_NAME * sizeof(char*));

    for (i = 0; i < size; i++)
    {
        (names[i]) = malloc(MAX_NAME * sizeof(char*));
    }
}
void readLinesFromFile(FILE *fptr, int *goals, int *assists, char **names, int numLines)
{

    int i = 0, j = 0, x = 0;

    char players[MAX_LINE];

    char *tokenPtr;

   fptr = fopen(INPUT,"r");

   for(i = 0; i < numLines; i++)
   {
       fgets(players,MAX_LINE, fptr);

       tokenPtr = strtok(players," ");
       strcpy((*(names+i)), tokenPtr);

       while (tokenPtr != NULL)
       {
           tokenPtr = strtok(NULL," ");
           if (x = 0)
           {
               goals[i] = atoi(tokenPtr);
               x = 1;
           }
           else
           {
               assists[i] = atoi(tokenPtr);
               x = 0;
           }
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:29:36.517

假设`MAX_NAME`是玩家姓名的最大长度，这应该有效：

```
void AllocateMemory(char *** pppNames, int ** ppGoals, int ** ppAssists, size_t sizePlayersMax)
{
  *pppNames = malloc(sizePlayersMax * sizeof **pppNames);
  *ppGoals  = malloc(sizePlayersMax * sizeof **ppGoals);9
  *ppAssists = malloc(sizePlayersMax * sizeof **ppAssists);

  {
    size_t sizePlayersCount = 0;0
    for (; sizePlayersCount < sizePlayersMax; ++sizePlayersCount)
    {
      (*pppNames)[sizePlayersCount] = calloc(MAX_NAME + 1, sizeof *((*pppNames)[sizePlayersCount]));
    }
  }
} 
```

为了防止应用程序在播放器名称很长的情况下覆盖内存，您可能希望更改此行：

```
strcpy((*(names+i)), tokenPtr); 
```

成为：

```
if (tokenPtr) 
  strncpy((*(names+i)), tokenPtr, MAX_NAME); 
```

这会将存储的玩家姓名截断为最多`MAX_NAME`字符。后者是`AllocateMemory()`使用减号的大小`1`。`0`/需要这个备用字符`NUL`来终止字符数组，因此它可以用作“字符串”。

最后这也是危险的：

```
while (tokenPtr != NULL)
{
  tokenPtr = strtok(NULL," ");

  if (x = 0)
  { 
```

最好这样做：

```
while (NULL != (tokenPtr = strtok(NULL," ")))
{
  if (x = 0)
  { 
```

# powershell - 从包管理器控制台打开解决方案

> ID：15034778
> 
> 赞同：0
> 
> 时间：2013-02-22T23:12:50.193
> 
> 标签：powershell, nuget

我正在尝试自动化从源代码管理中打开解决方案的过程。

我打开了 VS12，但没有打开解决方案或项目。是否可以更改目录，然后从包管理器控制台打开解决方案？

（这有点离题，但如果有更好的方法来做到这一点）我正在尝试编写脚本，以便可以运行通过 nuget 安装的 powershell 模块：

```
PM> Get-MyProject 'SomeName' 
```

然后该模块将从 pwd 获取最新的源 cd 并打开解决方案。我的模块已经可以获取源代码，但我无法弄清楚如何在 powershell 中打开解决方案。似乎 $dte 应该能够做到，但我尝试了：

```
PM> $dte.Solution.Open('NugetTest.sln') 
```

我找回了错误

> 使用“1”参数调用“打开”的异常：“找不到。（来自 HRESULT 的异常：0x80030002 (STG_E_FILENOTFOUND)）”在第 1 行 char:1 + $dte.Solution.Open('NugetTest.sln ') + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + 完全限定错误 ID：COMException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:40:07.967

包管理器控制台的默认目录（除非您已经定义了一个配置文件并更改它）是 %userprofile%。可能不是您的解决方案所在的地方。如果您编写一个 powershell 脚本并将其放在您的解决方案目录中，然后从 Power Shell 控制台执行它，您可以获得解决方案的路径：

```
$path = Split-Path -parent $MyInvocation.MyCommand.Path 
```

您可以创建这样的解决方案：

```
$solution = $dte.Solution
$solution.Create("C:\Temp", "MySolution.sln") 
```

第一个参数表示您要创建解决方案的目录，第二个参数是解决方案本身的名称。

要打开现有解决方案：

```
$solution = $dte.Solution
$solution.Open("<path to your solution>") 
```

如果它不起作用，则您的路径可能不正确。

# ios - iOS 5.1 和 6.1 的 UIButton 区别

> ID：15034785
> 
> 赞同：6
> 
> 时间：2013-02-22T23:13:09.130
> 
> 标签：ios, uibutton, version

我在视图中放置了 3 个按钮，设置了背景图像，有时我需要禁用其中一个。我发现它们在 iOS 5.1 和 6.1 中看起来不同。我喜欢6.1版本。我应该怎么做才能使 5.1 中的设计与 6.1 中的设计相同？

> 1）看图片底部的白条
> 
> 2) 第三个按钮被禁用，比 6.1 轻得多

![iOS5.1](../Images/46670d5e264adbe0d2d7a962ce2ec079.png)<-- iOS5.1 ![iOS6.1](../Images/bb03c775930762175db217fa33c9464c.png)<-- iOS6.1

PS：感谢您的声誉积分:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:02:47.913

白色工件似乎是默认的白色圆形矩形框。您是否将按钮类型设置为`UIButtonTypeCustom`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:18:56.953

通常，当操作系统的两个主要版本之间存在 UI 差异时，正确的做法是顺其自然并使用每个版本附带的外观。在旧版本的操作系统中显示更新的 UI 元素看起来很奇怪——就像您的应用程序不太适合。此外，尝试模仿旧操作系统中的新外观需要做很多工作。

尝试设计您的应用程序，使其无论使用哪种按钮都看起来很棒，并且您的应用程序将与用户设备上的其他应用程序完美契合，无论他们使用什么版本。

# android - Android ListFragment 调用了两次

> ID：15034799
> 
> 赞同：0
> 
> 时间：2013-02-22T23:13:54.033
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

当我从活动开始一个片段时，方法**onCreate()**，**onViewCreated(** ) 被调用两次。

这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chapter_list);

    FragmentManager frgManager = getSupportFragmentManager();
    if (findViewById(R.id.fl_chapter_detail) != null)
    {
        mbThreePaneLayout = true;
        FragmentChapterList frgChapterList = (FragmentChapterList) frgManager.findFragmentById(R.id.frg_chapter_list);
        frgChapterList.setActivateOnItemClick(true);
    }

    if (savedInstanceState == null)
    {
        String strSelectedSection = getIntent().getStringExtra(Konstant.KEY_SELECTED_SECTION);

        if (((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) != Configuration.SCREENLAYOUT_SIZE_XLARGE) || (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT))
            currentActionBar.setTitle(strSelectedSection);

        Bundle arguments = new Bundle();
        arguments.putString(Konstant.KEY_SELECTED_SECTION, strSelectedSection);

        FragmentChapterList frgChapterList = new FragmentChapterList();
        frgChapterList.setArguments(arguments);

        FragmentTransaction frgTransaction = frgManager.beginTransaction();
        frgTransaction.add(R.id.frg_chapter_list, frgChapterList).commit();
    }
} 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:47:53.237

要解决这个问题：

*   将片段的标签类型从 <fragment /> 更改为占位符，例如 <FrameLayout />。
*   删除`name`属性。

有关更多信息，请参阅：[由 <fragment> 没有绑定类的标记引起的 InflateException](https://stackoverflow.com/questions/14471613/inflateexception-caused-by-fragment-tag-without-a-bound-class)

# javascript - 重写这个简单的 javascript 游戏作为 AMD 的一个例子

> ID：15034800
> 
> 赞同：0
> 
> 时间：2013-02-22T23:13:55.447
> 
> 标签：javascript, amd

我创建了一个非常简单的“游戏”来猜测 Javascript 中的单词。我说简单是因为它基本上是一系列进行 DOM 操作的函数。我知道这段代码的标准相当低，因为我刚开始使用 Javascript，但我想使用 AMD 框架重写它。

这主要是我掌握 AMD 的一个学习练习，我意识到这似乎是一种相当先进/复杂的 Javascript 方法。

我的问题是，在相当高的层次上，我如何摆脱我所拥有的：

[http://dl.dropbox.com/u/32332055/hangman.html](http://dl.dropbox.com/u/32332055/hangman.html)

并开始为这个简单的游戏实施 AMD 方法的任务。

# c# - 缺少实体框架连接字符串后的 Visual Studio 2012 stackoverflow

> ID：15034801
> 
> 赞同：0
> 
> 时间：2013-02-22T23:13:55.317
> 
> 标签：c#, visual-studio-2012, connection-string, entity-framework-5

我在 VS2012 中使用 win2k8 r2 64 位上的更新 1 工作。

在一个简单的类库应用程序中，我执行 Add > New Item> ADO.NET Entity Data Model

我在网络上选择了一个 SQL Server，然后选择了数据库并添加了一个表。该表已添加，我可以在我的代码中将其作为类名进行访问。

问题：当我对后端数据库执行任何操作时，使用我的库的应用程序因 stackoverflow 错误而崩溃（无异常）。例如这将崩溃：`var logs =_db_context.LOGs.ToList();`

有任何想法吗？

编辑：相同的项目在同一台机器上的 VS2010 中工作。这只是在我升级到也升级实体框架的 VS2012 时才开始发生的。还值得一提的是，如果我删除访问数据库的代码，应用程序运行得很好。此外，删除和重新添加 .edmx 也无济于事，清理/重新构建或重新启动 VS 也无济于事。

**EDIT2**：调试后我注意到何时`LogServerEntities context = new LogServerEntities()`到达该行，我尝试从“Locals”扩展上下文变量 VS 结束调试说`Managed (v4.0.30319)' has exited with code -2146233082 (0x80131506).`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:04:41.170

类库实际上是一个自定义跟踪侦听器，如下所示。当我在构造函数中注释 FirstChanceHandler 时，异常实际上进入了控制台输出：程序集引用 (System.Management.Automation) 未能加载。我真的不需要那个程序集，只是简单地删除了它，stackoverflow 错误（我猜这是一个错误）就消失了。

```
 public Listener()
    {
        AppDomain.CurrentDomain.FirstChanceException += FirstChanceHandler;
    }

    public void FirstChanceHandler(object source, FirstChanceExceptionEventArgs e)
    {
        WriteException(e.Exception);
    }

    public void WriteException(Exception e)
    {
        string app_identity = System.Reflection.Assembly.GetExecutingAssembly().ManifestModule.Name;
        string server_name = System.Environment.MachineName;

        using (LogServerEntities context = new LogServerEntities())
        {
            LOG log = new LOG();
            log.DATE = DateTime.Now;
            log.THREAD = Thread.CurrentThread.Name;
            log.MESSAGE = e.Message;
            log.LOGGER = string.Format("{0} {1}", app_identity, server_name);
            log.LEVEL = Level.Exception.ToString();
            log.EXCEPTION = e.GetType().FullName;

            var web_exception = e as WebException;
            if (web_exception != null)
            {
                if (web_exception.Status == WebExceptionStatus.ProtocolError)
                {
                    var response = web_exception.Response as HttpWebResponse;
                    if (response != null)
                        log.HTTP_RESPONSE_CODE = ((int)response.StatusCode).ToString();
                    else
                        log.HTTP_STATUS = web_exception.Status.ToString();
                }
                else
                {
                    log.HTTP_STATUS = web_exception.Status.ToString();
                }
            }

            context.LOGs.Add(log);
            context.SaveChanges();
        }
    } 
```

# java - Sax：XMLReader：流式传输 CSV 并将其转换为 Xml 并同时验证结果

> ID：15034809
> 
> 赞同：1
> 
> 时间：2013-02-22T23:14:42.677
> 
> 标签：java, xml, csv, streaming, sax

我必须将一些 CSV 文件（每个 > 600 MB）转换为 XML，同时使用 XSD 动态验证最终结果。

由于每个文件的大小，我使用 InputStreams 读取内容并使用 OutpuStreams 将结果作为 XML 流式传输回我的客户端。

让我们从简单的部分开始......（伪代码）

```
void transform(final InputStream CSVCustomerStream, final OutputStream outputStream) {
       outputStream.write("<customers>")
       foreach csvCustomerRow in CSVCustomerStream {
            String xmlCustomerRow = csvCustomerRow.toXML();
            outputStream.write(xmlCustomerRow.getBytes();
       }
       outputStream.write("</customers>")

       **MISSING_XMLVALIDATOR.parse(outputStream);**
} 
```

到目前为止，我的源 CSV 文件的每一行都转换为 xml，然后写入输出流。

很容易。

但是，实际上验证 xml 的部分仍然缺失。

为此，我研究了[XMLReader](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/XMLReader.html)的 parse() 方法。唯一的问题是 parse() 仅接受 InputSources，而同时我将要验证的内容流式传输到 OutputStream。

当然，在阅读了整个 CSV 内容之后，我可以通过以下方式将 OutputStream 转换为 InputStream

```
 new ByteArrayInputStream((outputstream).toByteArray()) 
```

但这会立即将价值 600 MB 的 XML 带回内存，违背了流式传输的全部目的。

PS：我无法控制 OutputStream 的确切实现，因为我的代码作为 REST-webservice 运行

```
 return Response.ok(new StreamingOutput() {
        @Override
        public void write(OutputStream output) throws Exception {
            ....     loading and transforming csv ...

        }
    }).build(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:14:50.960

测试可能足以确保您的转换生成使用给定 XSD 验证的 XML，或者（正如 Petru Gardea 在评论中所说）您可以使用临时字符串逐个验证。

但是假设您实际上必须即时验证，您可以尝试一些技巧，基本上是通过操纵流。

您正在生产一个`OutputStream`大概要发送给客户的产品，并且您有一个知道如何执行此操作的流程`InputStream`（实际上，`Reader`接口可能会使其中一些更容易，但修复是并行的）。

这意味着您必须“开球” `OutputStream`，即即时复制它，以便您可以将一个流发送到客户端并使用该副本进行验证解析。你需要`InputStream`从你复制的`OutputStream`.

对于“tee”过程，您应该考虑 Apache Commons [TeeOutputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/TeeOutputStream.html)，对于从输出到输入的转换，您可能应该查看[PipedInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/PipedInputStream.html)和[PipedOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/PipedOutputStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T14:49:17.400

根据您的[评论](https://stackoverflow.com/questions/15034809/sax-xmlreader-streaming-and-converting-csv-to-xml-and-validating-the-result-at#comment21132415_15034809)，让我提出“最糟糕”的可能场景，即 XSD 被创作为俄罗斯娃娃（即，除了文档根，所有其他元素和类型都在本地定义）。由于这种风格，无法针对 XSD 验证 xmlCustomerRow，因为没有与您的标签匹配的全局元素声明（假设`customer`）。

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="customers">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="customer" minOccurs="0" maxOccurs="unbounded">
                    <xsd:complexType>

                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

不过，解决方案并不那么复杂。看看这个修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="customers">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="customer" minOccurs="0" maxOccurs="unbounded">
                    <xsd:complexType>

                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="customer">
        <xsd:complexType>

        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

对于此设置，您只需将原始 XSD 作为 XML 打开，克隆`customer`元素，删除其 minOccurs/maxOccurs 属性，然后将其作为子元素插入`schema`（它将是 XML 中的文档元素）。这里的想法是您可以即时或手动进行重构等。

总是有可能你不必做任何事情，即如果`customer`元素已经是全局的，像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="customers">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="customer" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="customer">
        <xsd:complexType>

        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

可能会出现其他复杂情况，具体取决于您的 XSD 的实际外观，但我可以向您保证，其中没有任何东西可以阻止您进行任何可能需要的重构来实现您想要的。

我宁愿认为能够独立验证每条记录胜过其他任何事情。更重要的是，对于在多核/CPU 机器上运行的海量文件，您可以并行化验证，这将更有效地利用资源来提高吞吐量。

# c# - 如何解决：组件的 COM 类工厂 CLSID 错误 80080005 ASP.NET

> ID：15034813
> 
> 赞同：0
> 
> 时间：2013-02-22T23:15:01.393
> 
> 标签：c#, asp.net, web-services, rtf, dcom

我坚持这个：

这是我的场景：

我正在创建一个网站，用户选择一个 Word 文档，一个 web 服务将其保存为 RTF 格式，然后我阅读 RTF 文档以显示在 Crystal Reports 中。

首先，用户选择要保存的文档（.doc、.docx）。（单击按钮打开文件...）然后，网站调用有权将所选文件写入另一个服务器（文件服务器）的网络服务，并以不同的名称保存为 .rtf 格式以在水晶中使用报告。这是错误发生的时候：

```
COM class factory for component with CLSID {00024500-0000-0000-C000-000000000046} failed due to the following error: 80080005 
```

服务器是Windows Server 2008 R2，webservice有写权限，应用池（WsOps）的身份是有写权限的用户。如果需要 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14 中著名的 Microsoft.Office.Interop.Word.dll，服务器已经安装了 Office 2007 和 VS2010。

Y[在 ASP.NET 中尝试了此代码](http://forums.asp.net/t/1093228.aspx/1)，但没有。

一些帮助表示赞赏。

# c++ - 使用 argv 初始化 C++ 字符串

> ID：15034822
> 
> 赞同：0
> 
> 时间：2013-02-22T23:15:35.297
> 
> 标签：c++, string, argv

我有一个采用 c++ 样式字符串的函数。我想要么放入`argv[1]`一个 c++ 字符串，要么直接将它传递给我的函数。

```
#include <iostream>
#include <string>
using namespace std;

string  rev (string &reverse);

int main(int argc, char argv[])
{
if (argc != 2)
    cout << "Bad Input" << endl;
string reverse = argv[1];
cout << rev(reverse) << endl;   
} 
```

这是我到目前为止所拥有的，但是当我这样做时，我收到以下错误：

```
8.4.cpp: In function ‘int main(int, char*)’:
8.4.cpp:11: error: invalid conversion from ‘char’ to ‘const char*’
8.4.cpp:11: error:   initializing argument 1 of ‘std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:27:51.267

修复主

```
int main(int argc, char argv[])

// should be

int main(int argc, char  *    argv[]) 
        ///            ^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:43:48.007

如前所述`argv[]`，是指向内存块的指针或“指向指针的指针”。您只需要添加`*`以`argv[]`使其行为如此。

一个快速的谷歌提出了[这个](http://www.cprogramming.com/tutorial/lesson14.html)

# asp.net - ASP.NET：MVC 4 - 使用 Web 服务作为数据存储的简单登录

> ID：15034826
> 
> 赞同：0
> 
> 时间：2013-02-22T23:16:07.547
> 
> 标签：asp.net, asp.net-mvc, authentication, asp.net-mvc-4

我正在构建一个带有**表单身份验证的****ASP.NET MVC 4**应用程序。

 **在我的帐户控制器中，我从表单中收到用户名和密码。

如果用户名/密码正确，**Web 服务会返回真/假。**

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
         bool isValid=MyWebService.ValidateLogin(model.Name,model.Pass);

          if(isValid){
            *** Here: Tell ASP.NET that model.Name is a logged in user
            ***       and to keep a cookie so that they stay logged in ???
            RedirectToAction(...);
           }
     } 
```

我希望尽可能多地利用 ASP.NET 基础结构，但要使用 Web 服务来正确登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:37:10.487

使用框架级支持执行此操作的最全面方法是实现自定义`MembershipProvider`. 它非常简单，并且有非常易于实现的功能。如果您想利用其他成员资格、身份验证和授权，这可能是您的最佳途径。以下是您的步骤：

*   创建一个名为的新类`YourMembershipProvider`
*   继承`MembershipProvider`并实现抽象方法
*   查看方法并实现重要的方法，即：
    *   `ValidateUser`
    *   `GetUser`

您`GetUser`将`username`使用您的网络服务来查找您想要跟踪的任何相关会员详细信息。

`ValidateUser`将是您调用 Web 服务的位置。`true`如果用户签出，则返回。

最后，更新您的网络配置。在 System.Web 中，你需要这样的东西：

```
<membership defaultProvider="YourMembershipProvider">
  <providers>
    <clear />
    <add name="YourMembershipProvider" type="YourNamespace.YourMembershipProvider" />
  </providers>
</membership> 
```

所以，回顾一下……实现你的类，连接你的网络配置，使用框架来处理其余的。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:02:31.263

对我来说看起来不错，也许我会在您对 Web 服务的调用中添加另一个参数，以在登录时出错时返回错误值。

```
bool isValid=MyWebService.ValidateLogin(model.Name,model.Pass, rtnErrorStatusCode); 
```

一旦您的网络服务登录了用户，您可以随时检查用户是否登录

```
If (Request.IsAuthenticated = False) Then
  ' This user has not logged in
  ' redirect to login page here
End if 
```

至于 cookie，我想只有在你想保留一些会话信息时才需要它。

保存 cookie 只会为您提供一种了解用户已登录的不同方法，但“Request.Authenticated”语句还会告诉您用户是否已登录，因为它返回一个布尔值，所以可能有 cookie只是复制它，所以除非您存储会话特定信息（如用户首选项或主题等），否则可能不需要 cookie。**

# android - 为我的 Android 应用程序验证用户身份的最佳方法是什么？

> ID：15034828
> 
> 赞同：3
> 
> 时间：2013-02-22T23:16:13.323
> 
> 标签：android, security, authentication, oauth, authorization

我正在开发一个 Android 应用程序，该应用程序需要用户先向我们注册，然后只有他们才能访问。用户将获得的信息将非常敏感，所以我想要一种安全的方法来做到这一点。我以前从未在 Android 上使用过这样的身份验证功能，但是当我不得不为 Web 应用程序做类似的事情时，我会将密码 MD5 散列在 MySQL 数据库中。但我认为这不是一个非常安全的方法，是吗？

在对用户进行身份验证时，我可以做些什么来确保他们的安全？

另外，我可以在这里使用 oAuth 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:30:20.013

是的，您可以在 Android 上使用 oAuth。你应该看看官方的 Android oAuth2 培训[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

如果您决定实现自己的身份验证方法，那么存储密码将很棘手。MD5 不安全，加盐的 SHA-256 可能就足够了。在此方案中，您存储两件事：

1.  密码哈希 = SHA(密码 + 盐)
2.  盐是随机文字。

可以在[此页面上找到有关此主题的一个很好的教程和许多详细信息](http://crackstation.net/hashing-security.htm)

如果您必须处理高风险数据，我建议您联系可以帮助您创建适当解决方案的安全专家。如果您自己没有经验，那么您很可能会失败。

# sql - 恢复未保存的 SQL 查询脚本

> ID：15034832
> 
> 赞同：219
> 
> 时间：2013-02-22T23:16:39.470
> 
> 标签：sql, sql-server, tsql, sql-server-2012, ssms

如果 SSMS 崩溃/未保存的选项卡意外关闭，如何恢复未保存的脚本？

* * *

## 回答 #1

> 赞同：463
> 
> 时间：2013-02-22T23:37:04.033

发布此内容以防有人遇到同样的问题。

谷歌搜索[检索未保存的脚本](http://www.sql-programmers.com/retrieve-unsaved-sql-query-scripts.aspx)并找到了解决方案。

运行以下**`select`**脚本。它提供了一个脚本列表及其在过去 24 小时内的执行时间。如果我们在 SQL Server 管理工作室中关闭查询窗口而不保存脚本，这将有助于检索脚本。它适用于所有已执行的脚本，而不仅仅是视图或过程。

```
Use <database>
SELECT execquery.last_execution_time AS [Date Time], execsql.text AS [Script] FROM sys.dm_exec_query_stats AS execquery
CROSS APPLY sys.dm_exec_sql_text(execquery.sql_handle) AS execsql
ORDER BY execquery.last_execution_time DESC 
```

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2013-02-22T23:21:43.443

您*可以*在这些位置之一找到它们（取决于您使用的 Windows 版本）。

视窗

```
C:\Documents and Settings\YourUsername\My Documents\SQL Server Management Studio\Backup Files\ 
```

Windows Vista/7/10

```
%USERPROFILE%\Documents\SQL Server Management Studio\Backup Files 
```

或者

```
%USERPROFILE%\AppData\Local\Temp 
```

[从这个来源](http://www.sqldbpros.com/2012/06/sql-server-management-studio-recover-lost-files/)和[这个来源谷歌搜索。](http://ayesamson.com/2011/10/21/recovering-unsaved-or-modified-scripts/)

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2017-08-01T12:53:48.977

聚会有点晚了，但前面提到的位置都不适合我 - 出于某种原因，备份/自动恢复文件保存在我 PC 上的 VS15 文件夹下（这是用于 SQL Server 2016 Management Studio）

```
C:\Users\YOURUSERNAME\Documents\Visual Studio [version]\Backup Files\Solution1 
```

前任：

```
C:\Users\YOURUSERNAME\Documents\Visual Studio 2015\Backup Files\Solution1 
```

您可能想检查您的工具-选项-环境-导入和导出设置，设置文件的位置可能会将您指向您的备份文件夹 - 我永远不会在 VS15 文件夹下查看这个。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-08-23T08:57:07.150

使用以下可以找到所有文件的位置`~AutoRecover.~vs*.sql`（*自动恢复文件*）：

```
C:\Users\<YourUserName>\Documents\SQL Server Management Studio\Backup Files\Solution1 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-12-02T21:47:28.363

我知道这是一个旧线程，但对于任何希望在 ssms 崩溃后检索脚本的人来说，请执行以下操作

1.  打开本地磁盘 (C)：
2.  打开用户文件夹
3.  找到与您的用户名相关的文件夹并打开它
4.  单击文档文件夹
5.  单击 Visual Studio 文件夹或单击备份文件文件夹（如果可见）
6.  单击备份文件文件夹
7.  打开解决方案 1 文件夹
8.  任何恢复的临时文件都将在此处。这些文件将以 vs 结尾，后跟一个数字，例如 vs9E61
9.  打开文件并检查丢失的代码。希望有帮助。这些确切的步骤对我有用。我正在使用 Sql server Express 2017

前任：

```
C:\Users\[YourUsername]\Documents\Visual Studio [version]\Backup Files\Solution1 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-11-12T00:46:10.113

也许你没有找到建议的目录或者你的恢复文件丢失了，感谢上帝，我用一个未保存的脚本复制了崩溃并引导我到这个目录：

C:\Users\user\OneDrive\Documents\Visual Studio 2015\Backup Files\Solution1

所以，也许这可以节省你的时间:)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2020-07-17T06:10:30.607

对于 SSMS 18，我在以下位置找到了文件：

```
C:\Users\YourUserName\Documents\Visual Studio 2017\Backup Files\Solution1 
```

对于 SSMS 17，它曾经位于：

```
C:\Users\YourUserName\Documents\Visual Studio 2015\Backup Files\Solution1 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-04-30T06:40:40.883

我使用的是 Windows 8，并在以下路径中找到了缺少的脚本：

```
C:\Users\YourUsername\Documents\SQL Server Management Studio\Backup Files 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-12-29T06:21:22.603

转到 SSMS >> 工具 >> 选项 >> 环境 >> 自动恢复

有两种不同的设置：

1) 每分钟保存一次自动恢复信息

此选项将按一定时间间隔保存 SQL 查询文件。将此选项设置为可能的最小值以避免丢失。如果您将此值设置为 5，那么在最坏的情况下，您可能会丢失最后 5 分钟的工作。

2) 将自动恢复信息保留几天

此选项将保留指定天数的自动恢复信息。不过，如果发生意外，我建议立即打开 SQL Server Management Studio 并恢复您的文件。不要将这项重要任务拖延到未来的日期。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-12-29T14:33:15.130

SSMSBoost 插件（目前免费）

*   跟踪所有执行的语句（将它们保存在磁盘上）
*   定期保存 SQL 编辑器内容的快照。您保留脚本修改的历史记录。有时“最佳”版本不是最后一个，而您想要恢复中间状态。
*   跟踪打开的选项卡并允许在重新启动后恢复它们。未保存的选项卡也会恢复。

+吨的其他功能。（我是插件的开发者）

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-08-29T10:11:06.207

当您意外关闭 SSMS 窗口时，您可以在此处找到文件

```
C:\Windows\System32\SQL Server Management Studio\Backup Files\Solution1 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-03-16T19:53:31.277

我能够从以下位置恢复我的文件：

```
C:\Users\<yourusername>\Documents\SQL Server Management Studio\Backup Files\Solution1 
```

每个选项卡应该有不同的恢复文件。我会说寻找丢失日期的文件。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-07-22T08:53:42.597

我使用免费的文件搜索程序[Everything](https://www.voidtools.com/)，在我的 C: 驱动器中搜索 *.sql 文件，然后按 Last Modified 排序，然后按我认为它可能最后执行的日期浏览。

它通常会从各个位置调出大量自动恢复文件。而且您不必担心最新版本的 SSMS/VS 在哪里保存此版本的备份文件。

[![在此处输入图像描述](../Images/bf925ad812fff433a050f1fe0ffd6589.png)](https://i.stack.imgur.com/NUrV7.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-10-14T19:45:25.880

对于 SSMS 18（特别是 18.6），我在这里找到了我的备份`C:\Windows\SysWOW64\Visual Studio 2017\Backup Files\Solution1`。

感谢 Matthew Lock 给了我在我的整个机器上搜索的想法！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-06T15:48:00.767

上述选项都没有帮助我恢复 4 天前在远程计算机上执行的查询，该查询的脚本文件未保存并且由于公司重新启动而丢失。

我最终在系统视图*sys.query_store_query*和*sys.query_store_query_text*的帮助下恢复了我的查询。

```
SELECT t.query_sql_text 
FROM sys.query_store_query_text t
INNER JOIN sys.query_store_query q 
    ON t.query_text_id = q.query_text_id
WHERE  q.last_execution_time between '2021-06-30' and '2021-07-03' 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-10-01T06:08:44.963

如果您仍然没有找到恢复文件夹，您可以尝试以下操作：

*   打开 SSMS。
*   在上面写一些查询。
*   等待一段时间以确保文件被静默保存。
*   打开任务管理器并终止 SSMS 应用程序。
*   重新打开 SSMS。应该会提示您打开未保存的工作。
*   打开建议的文件并将鼠标悬停在文件选项卡上以查看其位置。

# mysql - 插入触发器后MySQL不起作用

> ID：15034839
> 
> 赞同：1
> 
> 时间：2013-02-22T23:17:41.767
> 
> 标签：mysql, triggers, insert, phpmyadmin

我有以下两个表，以及一个触发器，当将一条记录插入到 User 表中时，该触发器应该在 Student 表中插入一条记录，且 StudentID 中的值为非空。MySQL 在触发器上没有报告语法错误，并且对 User 表的插入按预期工作，但不会触发对 Student 表的插入。
我尝试使用 BEFORE 和 AFTER INSERT 无效。我正在使用 phpMyAdmin 版本 3.5.2.2。任何帮助将不胜感激。

```
DROP TABLE IF EXISTS `User` ;

CREATE  TABLE IF NOT EXISTS `User` (
  `UserID` INT NOT NULL AUTO_INCREMENT ,
  `FirstName` VARCHAR(45) NOT NULL ,
  `LastName` VARCHAR(45) NOT NULL ,
  `eMail` VARCHAR(60) NOT NULL ,
  `StudentID` INT NULL ,
  KEY ix_User_StudentID (StudentID),
  PRIMARY KEY (`UserID`)
)
ENGINE = InnoDB;  

DROP TABLE IF EXISTS `Student` ;

CREATE  TABLE IF NOT EXISTS `Student` (
  `StudentID` INT NOT NULL ,
  `UserID` INT NOT NULL ,
  PRIMARY KEY (`StudentID`) ,
  CONSTRAINT `fk_Student_User1`
    FOREIGN KEY (`StudentID` )
    REFERENCES `User` (`StudentID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE, 
  CONSTRAINT `fk_Student_User2`
    FOREIGN KEY (`UserID`)
    REFERENCES `User` (`UserID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE
)
ENGINE = InnoDB;

DROP TRIGGER IF EXISTS after_insert_user;

DELIMITER //
CREATE TRIGGER after_insert_user 
AFTER INSERT ON `User`
FOR EACH ROW BEGIN
    IF (NEW.StudentID <> NULL) THEN
        INSERT INTO Student VALUES (NEW.StudentID, NEW.UserID); 
    END IF;
END;
//

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:54:55.573

它*确实*需要是一个 AFTER 触发器，但是

```
IF (NEW.StudentID <> NULL) THEN 
```

不会给你你想要的。它总是返回 false。相反，使用：

```
IF (NEW.StudentID IS NOT NULL) THEN 
```

或更神秘：

```
IF (NOT IFNULL(NEW.StudentID)) THEN 
```

或更深奥的：

```
IF (NOT NEW.StudentID <=> NULL) THEN 
```

这是它的实际应用：

```
ross@pv1:~$ mysql -vvv < 15034839.sql 
--------------
DROP TABLE IF EXISTS `Student`
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
DROP TABLE IF EXISTS `User`
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
CREATE  TABLE IF NOT EXISTS `User` (
  `UserID` INT NOT NULL AUTO_INCREMENT ,
  `FirstName` VARCHAR(45) NOT NULL ,
  `LastName` VARCHAR(45) NOT NULL ,
  `eMail` VARCHAR(60) NOT NULL ,
  `StudentID` INT NULL ,
  KEY ix_User_StudentID (StudentID),
  PRIMARY KEY (`UserID`)
)
ENGINE = InnoDB
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
CREATE  TABLE IF NOT EXISTS `Student` (
  `StudentID` INT NOT NULL ,
  `UserID` INT NOT NULL ,
  PRIMARY KEY (`StudentID`) ,
  CONSTRAINT `fk_Student_User1`
    FOREIGN KEY (`StudentID` )
    REFERENCES `User` (`StudentID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Student_User2`
    FOREIGN KEY (`UserID`)
    REFERENCES `User` (`UserID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE
)
ENGINE = InnoDB
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
DROP TRIGGER IF EXISTS after_insert_user
--------------

Query OK, 0 rows affected, 1 warning (0.00 sec)

--------------
CREATE TRIGGER after_insert_user
AFTER INSERT ON `User`
FOR EACH ROW BEGIN
    IF (NEW.StudentID IS NOT NULL) THEN
        INSERT INTO Student VALUES (NEW.StudentID, NEW.UserID);
    END IF;
END;
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
INSERT INTO User VALUES (NULL, 'first', 'last', 'email', 123)
--------------

Query OK, 1 row affected (0.01 sec)

--------------
SELECT * FROM Student
--------------

+-----------+--------+
| StudentID | UserID |
+-----------+--------+
|       123 |      1 |
+-----------+--------+
1 row in set (0.00 sec)

Bye
ross@pv1:~$ 
```

# spring-mvc - 注射顺序

> ID：15034841
> 
> 赞同：0
> 
> 时间：2013-02-22T23:17:43.803
> 
> 标签：spring-mvc

从配置文件读取并注入属性后如何初始化 Log4j 的实例

我的代码是：

```
private static String LogPath;

@Value("#{settings['LogDirPath']}")
private static void setLogDirPath(String LogDirPath)
{
        LogPath = LogDirPath;
}

private static final Logger fileLogger = LoggerSetup.GetLogger(<Class Name>, <Logger Name>, LogPath); 
```

但是，当我进入 GetLogger 时，日志路径始终为空。

如何确保在配置文件注入完成后调用 fileLogger？

更新1：

```
@Value("#{settings['LogDirPath']}")
private  String LogPath;

private static Logger googleLogger = LoggerSetup.GetLogger(<Class Name>, <Logger Name>, LogPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:21:17.353

在方法中初始化 fileLogger 变量（因此不能是最终变量）`setLogDirPath()`。类字段在类加载时初始化，然后才能调用类的任何方法。

也就是说，我很确定您不能在静态方法上使用此注释。Spring 注入字段、构造函数或实例设置方法。

# css - -webkit-user-drag css 属性是什么？

> ID：15034842
> 
> 赞同：28
> 
> 时间：2013-02-22T23:17:58.043
> 
> 标签：css, html, drag-and-drop

我现在已经在几个地方看到了这个，但找不到太多关于它的信息：

```
-webkit-user-drag: element 
```

这是 HTML5 拖放标准的一部分吗？这比使用属性版本更好/更差：

```
<div draggable="true">my draggable element</div> 
```

编辑：我熟悉当前规范并使用可拖动属性，我不清楚的正是 CSS 属性 *-user-drag。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-22T23:48:53.510

这是一个特定于 Webkit 的属性。以下是[WebKit 文档](https://developer.apple.com/library/content/documentation/AppleApplications/Conceptual/SafariJSProgTopics/DragAndDrop.html#//apple_ref/doc/uid/30001233-178644)对此的说明：

> ## 使元素可拖动
> 
> WebKit 提供自动支持让用户拖动常见的项目，例如图像、链接和选定的文本。您可以扩展此支持以包含 HTML 页面上的特定元素。例如，您可以将特定的 div 或 span 标签标记为可拖动。
> 
> 要将任意元素标记为可拖动，请将`-webkit-user-drag`属性添加到元素的样式定义中。因为`-webkit-user-drag`是级联样式表 (CSS) 属性，您可以将其作为样式定义的一部分，或作为元素标记上的内联样式属性。该属性的值列在表 4-1 中。
> 
> 属性值`-webkit-user-drag`：
> 
> *   `none`：不允许拖动此元素。
>     
>     
> *   `element`：允许拖动此元素。
>     
>     
> *   `auto`：使用默认逻辑来确定是否应该拖动元素。（图像、链接和文本选择是唯一可以拖动的元素。）这是默认值。

所有使用 WebKit 渲染引擎的浏览器都支持它，因此 Chrome、Opera 的较新版本、Safari 等。使用 WebKit 的移动浏览器中的支持可能因移动操作系统而异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T23:34:26.127

简要概述：[http ://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

详细信息：[http ://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html](http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html)

演示：[http ://html5demos.com/drag](http://html5demos.com/drag)

# c# - HttpWebRequest 底层连接关闭事件/通知

> ID：15034844
> 
> 赞同：0
> 
> 时间：2013-02-22T23:18:00.967
> 
> 标签：c#, .net, notifications, httpwebrequest, timeout

我有一个带有客户端/服务器架构的 .NET 服务，其中客户端机器通过软件负载平衡器连接到服务器机器。我将该`HttpWebRequest.ServicePoint.ConnectionLeaseTimeout`属性设置为特定值，以便每隔一段时间终止连接，并且 SLB 将为客户端提供与不同（或可能相同）服务器的新连接，以防服务器行为异常。

我的问题是：

`ConnectionLeaseTimeout`有没有办法在间隔用完并启动到新服务器的新连接时得到通知？每次发生这种情况时，我都想记录新服务器的信息，以确保我确实在更新连接，而不仅仅是在某台机器上停留的时间超过了我应该的时间。

我希望对这种情况有一些内置支持，并且我不必存储当前主机的信息并每隔一段时间（每隔几个请求或每个时间间隔）检查我连接到一个新服务器（通过与以前的比较）并跟踪更改时间。即使我这样做了，也无法判断我是否在两个连续的时间间隔内连接到同一台服务器，因为我没有释放第一个连接，或者因为 SLB 将我还给了同一台服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:38:52.853

租约超时的问题是您不知道（在您的代码中）它何时会发生，因为它与您的代码是异步的。因此，*如果*它确实通知您断开连接，则它必须在某个工作线程上，您只需存储该信息并在您的主线程到达可以对该信息执行任何操作的地步时使用它。这通常是您下次想要对 Web 请求执行某些操作时。因此，您可以做的唯一真正的检测是`WebException`在下一次使用请求时简单地捕获结果。

# c# - 对 LINQ 语句进行逆向工程

> ID：15034848
> 
> 赞同：2
> 
> 时间：2013-02-22T23:18:17.187
> 
> 标签：c#, .net, linq

我正在尝试对 LINQ 语句进行逆向工程，任何帮助将不胜感激。

```
bool isAllUnchecked = !lvTech.Items.Cast<ListViewItem>().Any(lvItem => lvItem.Checked); 
```

到目前为止我的进步；

```
bool isAllUnchecked = true;
foreach(ListviewItem item in lvTech.Items)
{
    if(item.checked)
    {
      isAllUnchecked = false;
    }
} 
```

我正在使用 Resharper，它的“转换为 LINQ”到目前为止还没有出现。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:20:33.347

我认为应该是：

```
bool isAllUnchecked = false; // Variable name doesn't fit what you're doing
                             // Don't forget to change.
foreach(ListViewItem item in lvTech.Items)
{
    if(item.checked)
    {
      isAllUnchecked = true;
      break;
    }
} 
```

`Any()`检查是否有满足条件的项目，如果是则返回`true`。

你应该重命名你的变量`isAnyChecked`或者你应该否定查询的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:24:37.713

这将是正确的循环（至少这是变量名称所暗示的）：

```
bool isAllUnchecked = true;
foreach(ListviewItem item in lvTech.Items)
{
    if(item.checked)
    {
      isAllUnchecked = false;
      break;
    }
} 
```

这与 LINQ 相同：

```
bool isAllUnchecked = lvTech.Items.Cast<ListViewItem>()
                                  .All(lvItem => !lvItem.Checked); 
```

# mysql - mysql选择多个“in”

> ID：15034855
> 
> 赞同：0
> 
> 时间：2013-02-22T23:18:51.443
> 
> 标签：mysql

我需要一些有关 select 语句的帮助。

```
table: mobiles (brand,model,price) 
```

我尝试了以下语法来获取内容。

```
select * 
from mobiles 
where brand in ('apple','nokia','samsung') 
      and model in ('lumia 510','galaxy s3') 
```

上述查询仅显示“nokia lumia 510”和“samsung galaxy s3”。

我希望它显示“apple”中的所有型号，仅显示“nokia”中的“lumia 510”和“samsung”中的“galaxy s3”。

我使用语法错了吗？

我正在开发一个网站，用户可以在其中按品牌和型号过滤手机。我只需要显示用户选择的手机。对于每个品牌，如果用户选择特定型号，则只显示该型号，如果他只选择品牌，则应显示该品牌下的所有手机。

他可以选择任意数量的品牌，并且在每个品牌下他可能会选择也可能不会选择特定的型号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:32:44.653

你不能用 IN 做到这一点，因为每个品牌都有不同的型号要求。

```
SELECT *
FROM mobiles
WHERE (brand = 'apple')
OR (brand = 'nokia' AND model = 'nokia lumia 510')
OR (brand = 'samsung' AND model = 'galaxy s3') 
```

如果模型对于特定品牌总是独一无二的，您可以稍微简化一下：

```
SELECT *
FROM mobiles
WHERE brand IN ('apple')
OR model IN ('nokia lumia 510', 'galaxy s3') 
```

将所有没有选择型号的品牌放在第一个`IN`条款中，将所有型号放在第二个条款中。由于独特的关系，品牌被模型所暗示。

# css - 链接主题的 jqgrid customformatter 不可见

> ID：15034858
> 
> 赞同：1
> 
> 时间：2013-02-22T23:19:00.697
> 
> 标签：css, jquery-ui, jqgrid

美好的一天 - 我正在使用 jqGrid (4.4.4) 和 jquery ui 1.10.0

我已经设置了使用自定义formamtter来提供一个简单的链接使用

```
return "<a href='#'  onclick=\"openProlianceWindowAnchor('" + urlLink + "','" + rowObject.DocumentGuid + "'); return false;\" >" + cellvalue +"</a>"; 
```

虽然链接正常工作 - 链接上的文本被洗掉并且不可见，因为背景颜色和链接颜色几乎相同。

我使用的锚文本总是被淘汰似乎并不重要。

![在此处输入图像描述](../Images/946268d389b66c7c8aa6ecb80e4dcbf9.png)

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:27:12.440

你可以尝试添加一个`style`属性来解决这个问题吗？

例如

```
 return "<a href='#' style="color:black;" onclick=\"openProlianceWindowAnchor('" + urlLink + "','" + rowObject.DocumentGuid + "'); return false;\" >" + cellvalue +"</a>"; 
                        ^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T04:25:55.887

在自定义格式化程序函数中添加一个`ui-state-default a`如下所示的类

```
 return "<a href='#'  class="ui-state-default a" onclick=\"openProlianceWindowAnchor('" + urlLink + "','" + rowObject.DocumentGuid + "'); return false;\" >" + cellvalue +"</a>"; 
```

如果您想添加按钮而不是链接，您可以使用下面给出的类

```
ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only 
```

这些是 jquery css 类，因此将根据您选择的主题进行更改

更新：如果你不想要链接/按钮，你可以使用下面的代码

```
return "<a href='#'  class=".ui-widget-content a" onclick=\"openProlianceWindowAnchor('" + urlLink + "','" + rowObject.DocumentGuid + "'); return false;\" >" + cellvalue +"</a>"; 
```

如果您不想在链接中显示下划线，请使用以下代码

```
return "<a href='#'  class="ui-button .ui-widget-content a" onclick=\"openProlianceWindowAnchor('" + urlLink + "','" + rowObject.DocumentGuid + "'); return false;\" >" + cellvalue +"</a>"; 
```

# javascript - 在内容脚本中使用 chrome.tabs 或其他 chrome API 时“无法读取未定义的属性”

> ID：15034859
> 
> 赞同：52
> 
> 时间：2013-02-22T23:19:04.457
> 
> 标签：javascript, google-chrome, google-chrome-extension

`chrome.tabs`尽管我在权限块中设置了选项卡，但仍返回未定义。

```
"permissions": [
    "tabs",
    "http://*/*",
    "https://*/*"
],
"content_scripts": [
    {
        "matches": [
            "http://*/*",
            "https://*/*"
        ],
        "js": [
            "js/myScript.js"
        ],
        "all_frames": true
    }
], 
```

但在 myScript.js 中，以下返回未定义。

```
chrome.tabs 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-23T18:39:25.220

由于内容脚本有其自身的局限性，

`chrome.tabs`仅在后台脚本和弹出脚本中可用。

如果您想使用，`chrome.tabs`则将消息从 content_script 传递到后台脚本并使用`chrome.tabs`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-11-18T16:44:42.453

[内容脚本](https://developer.chrome.com/extensions/content_scripts)只能有限地访问 Chrome API。此访问不包括您尝试使用的 API（例如`chrome.tabs`）。如果您需要使用该 API，则必须在[后台脚本](https://developer.chrome.com/extensions/background_pages)¹中执行此操作。

如 Chrome 的[内容脚本文档](https://developer.chrome.com/extensions/content_scripts)中所列，内容脚本可用的 API 是 [我已将弃用的方法放在~~删除线~~格式]：

> *   [扩展](https://developer.chrome.com/extensions/extension)（[getURL](https://developer.chrome.com/extensions/extension#method-getURL)，[inIncognitoContext](https://developer.chrome.com/extensions/extension#property-inIncognitoContext)，[lastError](https://developer.chrome.com/extensions/extension#property-lastError)，~~[根据要求](https://developer.chrome.com/extensions/extension#event-onRequest)~~,~~[发送请求](https://developer.chrome.com/extensions/extension#method-sendRequest)~~)
> *   [i18n](https://developer.chrome.com/extensions/i18n)
> *   [运行时](https://developer.chrome.com/extensions/runtime)（[连接](https://developer.chrome.com/extensions/runtime#method-connect)、[getManifest](https://developer.chrome.com/extensions/runtime#method-getManifest)、[getURL](https://developer.chrome.com/extensions/runtime#method-getURL)、[id](https://developer.chrome.com/extensions/runtime#property-id)、[onConnect](https://developer.chrome.com/extensions/runtime#event-onConnect)、[onMessage](https://developer.chrome.com/extensions/runtime#event-onMessage)、[sendMessage](https://developer.chrome.com/extensions/runtime#method-sendMessage)）
> *   [贮存](https://developer.chrome.com/extensions/storage)

一些列出的 API 已被弃用，并且已经有一段时间了。那些已弃用的已移动到不同的位置（也在上面列出）：

*   `extension.onRequest`➞[`runtime.onMessage`](https://developer.chrome.com/extensions/runtime#event-onMessage)
*   `extension.sendRequest`➞[`runtime.sendMessage`](https://developer.chrome.com/extensions/runtime#method-sendMessage)

虽然没有正式弃用，但`extension.lastError`也可以作为[`runtime.lastError`](https://developer.chrome.com/extensions/runtime#property-lastError). 此时，通常在该位置引用它：

*   `extension.lastError`➞[`runtime.lastError`](https://developer.chrome.com/extensions/runtime#property-lastError)

## 将您的扩展划分为后台脚本和内容脚本

您需要根据每种脚本可用的功能，将您的代码分为需要在后台脚本中的内容和需要在内容脚本中的内容。内容脚本可以访问它们被注入的网页的 DOM，但对扩展 API 的访问受限。后台脚本可以完全访问扩展 API，但不能访问网页内容。您应该阅读[Chrome 扩展概述](https://developer.chrome.com/extensions/overview)，以及从那里链接的页面，以了解哪些功能应该位于哪种类型的脚本中。

通常需要在内容脚本和后台脚本之间进行通信。为此，您可以使用[消息传递](https://developer.chrome.com/extensions/messaging)。这允许您在两个脚本之间传递信息，以完成仅使用一种类型的脚本无法完成的事情。例如，在您的内容脚本中，您可能需要仅可从其他 Chrome API 之一获得的信息，或者您需要通过其他 Chrome 扩展 API 之一最合适（或仅）完成的事情。在这些情况下，您需要向后台脚本[发送消息](https://developer.chrome.com/extensions/messaging)，使用[`chrome.runtime.sendMessage()`](https://developer.chrome.com/extensions/runtime#method-sendMessage)，告诉它需要做什么，同时提供足够的信息让它能够这样做。然后，您的后台脚本可以将所需的信息（如果有）返回到您的内容脚本。或者，您有时会主要在后台脚本中完成处理。后台脚本可以注入内容脚本，或者只是向已经注入的脚本发送消息，以从页面获取信息，或对网页进行更改。

* * *

1.  后台脚本是指在后台上下文中的任何脚本。除了实际[`background`脚本](https://developer.chrome.com/extensions/background_pages)之外，这还包括弹出窗口和选项页面等。但是，您可以确保始终可以从内容脚本接收消息的唯一页面是您在*manifest.json*中定义的实际[`background`脚本](https://developer.chrome.com/extensions/background_pages)。由于用户与浏览器的交互，有时其他页面可能可用，但它们并非始终可用。

 *^(此答案是从[重复的问题](https://stackoverflow.com/questions/40679991/chrome-tabs-executescript-is-not-working)中移出的，然后进行了修改。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-09T17:53:30.813

[https://developer.chrome.com/extensions/tabs#method-getSelected](https://developer.chrome.com/extensions/tabs#method-getSelected)显示

> # 被选中
> 
> chrome.tabs.getSelected(integer windowId, function callback)
> **自 Chrome 33 起已弃用。请使用 tabs.query {active: true}。**
> 获取在指定窗口中选择的选项卡。

也许，您应该像这样在***popup.js中使用 chrome.tabs.query***

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){
    console.log(tabs[0].url);
}); 
```

，**重新加载**您的扩展程序并在您的扩展程序的检查元素中检查结果。

### [结果图像](https://i.stack.imgur.com/LFFJ8.png)

### [代码图像](https://i.stack.imgur.com/tcTEn.png)

[https://developer.chrome.com/extensions/tabs#type-Tab](https://developer.chrome.com/extensions/tabs#type-Tab)显示 **选项卡正在显示的 URL。仅当扩展程序的清单包含“选项卡”权限时，此属性才存在。**（只是为了提醒某人忘记了。我刚测试时忘记了。）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-11-09T10:49:35.793

检查这个答案也[https://stackoverflow.com/a/6718277/449345](https://stackoverflow.com/a/6718277/449345) 这个对我有用

```
chrome.tabs.getSelected(null, function(tab){
    console.log(tab);
}); 
```*

# mysql - MySQL在组中选择最大时的奇怪行为

> ID：15034860
> 
> 赞同：2
> 
> 时间：2013-02-22T23:19:19.293
> 
> 标签：mysql, sql, greatest-n-per-group

假设我有一个`surveys`这样的表：

> 客户 | 上次调查结果 | 日期（整数）

```
CREATE TABLE `surveys` (
`id`  int(11) NOT NULL AUTO_INCREMENT ,
`customer`  int(11) NULL DEFAULT NULL ,
`survey_result`  tinyint(4) NOT NULL DEFAULT '-1' ,
`date`  smallint(2) NOT NULL ,
PRIMARY KEY (`id`),
INDEX `optimize` USING BTREE (`customer`, `survey_result`, `date`)
)
ENGINE=InnoDB
ROW_FORMAT=COMPACT
; 
```

每个客户都可以进行多次评论。如果他没有完成它，`last_survey_result=-1`.

我想知道每个客户的最后评价是什么，以及不是`-1`。如果他从未回答过任何问题，则结果为默认值`-1`。

例如，如果我们有这个

```
customer | survey_result | date (int)  
    a    |    -1         |     1
    a    |     7         |     2
    b    |    -1         |     1
    b    |    -1         |     2
    c    |    10         |     1
    c    |     8         |     2
    d    |    -1         |     1
    d    |     7         |     2 
```

结果必须是：

```
customer | last_survey_result
    a    |       7
    b    |      -1
    c    |       8
    d    |       7 
```

这是我尝试过的。事实上，它适用于这些数据：

```
SELECT a.customer, a.survey_result last_survey_result
  FROM surveys a
  LEFT OUTER JOIN surveys b
  ON a.customer=b.customer AND (a.date < b.date AND b.survey_result>=0)
  WHERE b.customer IS NULL 
GROUP BY customer; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/bd4c5/3)

**问题**出在示例中，我得到了很好的结果，但是在我的数据库中，这会发生：

```
customer | survey_result | date (int)  
    a    |    -1         |     1
    a    |     5         |     2
    a    |    -1         |     3
    b    |    -1         |     1
    b    |     8         |     2
    b    |    -1         |     3

customer | last_survey_result
    a    |       -1
    b    |        8 
```

我认为这很奇怪，不知道会发生什么。它可能与索引有关吗？我完全迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:21:49.107

修改您的代码以分隔两种情况（至少一个非负结果 - 所有负结果）：

```
SELECT a.customer, a.survey_result AS last_survey_result
  FROM surveys a
  LEFT OUTER JOIN surveys b
  ON a.customer = b.customer AND (a.date < b.date AND b.survey_result >= 0)
  WHERE a.survey_result >= 0 
    AND b.customer IS NULL 

UNION ALL

SELECT customer, -1
  FROM surveys
  GROUP BY customer
  HAVING MAX(survey_result) < 0 ; 
```

在**[SQL-Fiddle测试](http://www.sqlfiddle.com/#!2/bd4c5/44)**

* * *

这里还有另外两种方法可以做到这一点，没有`UNION`. 三重奏`JOIN`：

```
-- solution 2 --
SELECT s.customer, 
       COALESCE(a.survey_result, -1) AS last_survey_result
  FROM 
      ( SELECT DISTINCT customer
        FROM surveys
      ) AS s
    LEFT JOIN
        surveys AS a
      JOIN 
        ( SELECT customer, MAX(date) AS date
          FROM surveys 
          WHERE survey_result >= 0 
          GROUP BY customer
        ) AS b
      ON  a.customer = b.customer 
      AND a.date = b.date 
    ON  s.customer = a.customer ; 
```

和 a在子句`JOIN`中带有相关子查询：`ON`

```
-- solution 3 --
SELECT s.customer, 
       COALESCE(a.survey_result, -1) AS last_survey_result
  FROM 
      ( SELECT DISTINCT customer
        FROM surveys
      ) AS s
    LEFT JOIN
      surveys AS a
    ON  a.customer = s.customer 
    AND a.date =
        ( SELECT MAX(m.date)
          FROM surveys AS m
          WHERE m.customer = s.customer 
            AND m.survey_result >= 0 
        ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:34:22.917

事实证明这比看起来更难，至少对我来说......

```
SELECT DISTINCT a.customer, COALESCE((
  SELECT     b.survey_result
  FROM surveys b
  WHERE a.customer=b.customer AND b.survey_result <> -1
  ORDER BY date DESC LIMIT 1), -1) as last_result
FROM surveys a 
```

[这是通过 SQL Fiddle 提供的示例](http://sqlfiddle.com/#!2/55769/2)

```
CREATE TABLE surveys
    (`customer` varchar(1), `survey_result` int, `date` int)
;

INSERT INTO surveys
    (`customer`, `survey_result`, `date`)
VALUES
    ('a', -1, 1),
    ('a', 5, 2),
    ('a', -1, 3),
    ('b', -1, 1),
    ('b', 8, 2),
    ('b', -1, 3),
    ('c', -1, 1),
    ('c', -1, 2),
    ('c', -1, 3),
    ('d', 9, 1),
    ('d', 6, 2),
    ('d', 4, 3)
; 
```

结果

```
CUSTOMER    LAST_RESULT
a           5
b           8
c           -1
d           4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:44:46.413

只有在or子句`GROUP BY`中存在聚合函数时才有意义。`SELECT``HAVING`

当您指定`GROUP BY`没有聚合函数的 a 时，大多数 RDBMS 都会出错，但 MySQL 不同。在 MySQL 中，子句起作用，但当不存在聚合函数时，它是*[不确定的。](http://en.wikipedia.org/wiki/Nondeterministic_algorithm)*通常它会返回它找到的表中的第一个值，但由于 SQL 标准或 MySQL 文档中都没有记录这种行为，因此不能保证这种情况，因此假设是这种情况非常危险。

这将做你想要的：

```
SELECT DISTINCT
  a.customer,
  COALESCE(b.survey_result, -1) "last_survey_result"
FROM surveys as a
LEFT OUTER JOIN (
    SELECT customer,
      survey_result,
      date
    FROM surveys
    WHERE survey_result <> -1
    GROUP BY customer
    HAVING date = max(date)) as b
  ON a.customer = b.customer 
```

请注意，您的 SQL Fiddle 返回了意外结果，因为您转置了客户“a”的`date`和`survey_results`字段。

另请注意，这在大多数其他 RDBMS 中不起作用，因为子查询正在选择`customer`并且`survey_result`仅包含`GROUP BY`子句中的这两个字段之一。如果我没有时间紧迫，我可能会通过添加第三个自连接来将其重写为更合适的查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:52:15.190

如果您不介意将结果作为字符字段返回，则以下内容将获取最新结果：

```
SELECT s.customer,
       substring_index(group_concat(s.survey_result order by date desc), ',', 1) last_survey_result
  FROM surveys s
where s.survey_result >= 0
GROUP BY customer; 
```

你可以，当然`cast`是回到一个tinyint。

要获得所有客户，但只有积极的调查结果，请将条件移至案例：

```
SELECT s.customer,
       substring_index(group_concat((cast when s.survey_result >= 0 then s.survey_result end)
                                    order by date desc), ',', 1) last_survey_result
FROM surveys s
GROUP BY customer; 
```

`group_concat()`忽略 NULL 值。

# javascript - 为什么 catch 子句有自己的词法环境？

> ID：15034864
> 
> 赞同：6
> 
> 时间：2013-02-22T23:19:49.277
> 
> 标签：javascript, scope, try-catch, ecmascript-5, hoisting

考虑以下[来自 ECMA-262 v5.1的摘录（我最近在](http://es5.github.com/#x10.2)[这个问题](https://stackoverflow.com/questions/15034389/does-a-function-expression-have-its-own-scope-lexical-environment)中看到）：

> 词法环境是一种规范类型，用于根据 ECMAScript 代码的词法嵌套结构定义标识符与特定变量和函数的关联。一个词法环境由一个环境记录和一个对外部词法环境的可能为空的引用组成。通常，词法环境与 ECMAScript 代码的某些特定句法结构相关联，例如 FunctionDeclaration、WithStatement 或 TryStatement 的 Catch 子句，并且每次评估此类代码时都会创建一个新的词法环境。

我认为这意味着`catch`子句的主体会像函数一样提升自己的变量，但显然[情况并非如此](http://jsfiddle.net/PbYRs/)：

```
var a = 1;
try {
    console.log(x); // ReferenceError
} catch(ex) {
    console.log(a); // 1, not undefined
    var a = 3;
} 
```

有人知道为什么吗？另外，为什么一个`catch`子句需要它自己的词法环境？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T23:38:17.283

是的，`catch`子句确实有自己的词法环境。查看[评估时会发生什么](http://www.ecma-international.org/ecma-262/5.1/#sec-12.14)：它创建一个新的（从当前的派生）并将异常标识符绑定到它。执行 catch 块时，当前的[执行上下文](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3) `LexicalEnvironment`切换到新的执行上下文，而`VariableEnvironment`("*其环境记录保存由`VariableStatements`and`FunctionDeclarations`* " 创建的绑定) 保持不变。

```
console.log(a); // undefined - declared from within the catch,
                // but in the current VariableEnvironment
a = 1;
console.log(typeof ex); // undefined - no binding
try {
    console.log(ex); // a ReferenceError in this LexicalEnvironment
} catch (ex) { // introducing the new LexicalEnvironment
    console.log(ex); // …and it works here!
    var a = 3; // variable declaration
} 
```

* * *

有趣的事实：如果你试图在一个子句中*声明*一个函数`catch`（尽管在一个块中语法无效，“函数声明语句”通常被接受），它的作用域将变成当前的*`VariableEnvironment`*，因此它不能访问异常：

```
try {throw "some"} catch(x) { function y(){console.log(x, typeof x);} y(); }
                    // throws a ReferenceError for x   ^ 
```

[（更新：这在 ES6 中不再适用，其中块级函数声明是有效的并且在块范围内是封闭的）]

# javascript - 屏蔽文件输入 CSS 和 javaScript

> ID：15034865
> 
> 赞同：0
> 
> 时间：2013-02-22T23:19:50.023
> 
> 标签：javascript, jquery

我可以使用以下代码屏蔽文件输入。

```
<div class="new_Btn" >Choose from computer</div>
<input type="file" name="pic" id="html_btn" style="display:none;" /> 
```

然后我使用javascript

```
 $('.new_Btn').bind("click" , function () {
            $('#html_btn').click();
        }); 
```

我想在用户选择文件时更改按钮，例如打印“添加图像”或刻度图像。

我将如何检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:23:05.173

```
 $('.new_Btn').bind("click" , function () {
            $('#html_btn').click();
            $('.new_Btn').text('Image Added');
        }); 
```

# knockout.js - 实例化一个对象的多个实例并推送到 ko.observableArray

> ID：15034871
> 
> 赞同：0
> 
> 时间：2013-02-22T23:20:27.607
> 
> 标签：knockout.js, coffeescript, singleton, instantiation

问题：在创建对象的其他实例并将其添加到数组时，数组中对象的所有实例都将成为最后添加的对象（我相信我总是在创建一个单例，尽管我没有尝试这样做）。

例子：

```
var people = ko.observableArray([]);

var Bob = new Person('Bob','supervisor');
var Tina = new Person('Tina','sales lead');

people.push(Bob);
people.push(Tina);

//Both "persons" in "people" will be "Tina" and "Bob" is nowhere 
```

这是 Person 对象（在咖啡脚本中）

```
define (require) =>
    class Person
        constructor: (name, title)-> 
            @name name
            @title title

        name: ko.observable()
        title: ko.observable() 
```

创建此输出：

```
var _this = this;

define(function(require) {
  var Person;
  return Person = (function() {

    function Person(name, title) {
      this.name(name);
      this.title(title);
    }

    Person.prototype.name = ko.observable();

    Person.prototype.title = ko.observable();

    return Person;

  })();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:46:23.337

问题是您正在创建`name`类`title`级别的属性，而不是在实例级别。因此，您实际上让每个`Person`实例共享相同的名称和标题 observables。

要创建实例属性，您需要在其中设置构造函数。

```
class Person
    constructor: (name, title) ->
        @name = ko.observable name
        @title = ko.observable title 
```

# c# - 图像旋转记忆错误

> ID：15034872
> 
> 赞同：1
> 
> 时间：2013-02-22T23:20:30.977
> 
> 标签：c#, asp.net, image

我正在使用一种简单的`Image.RotateFlip()`方法，`C#`但我不断收到错误消息“内存不足”。我通过分析器运行它，发现它发生在 System.Drawing.Image.FromFile();

这是我的代码：

```
 protected void rotatePic(object sender, EventArgs e)
    {
        ImageButton img = sender as ImageButton;
        string url = img.ImageUrl.Split('?')[0];

        System.Drawing.Image pic = System.Drawing.Image.FromFile(Server.MapPath(url));
        pic.RotateFlip(System.Drawing.RotateFlipType.Rotate270FlipNone);
        pic.Save(Server.MapPath(url));
        pic.Dispose();
        img.ImageUrl = img.ImageUrl + "?" + DateTime.Now.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:34:15.117

您的问题缺少很多相关信息。第一的; 图像有多大。其次，如何调用此代码。是不是经常被调用？你什么 时候打电话`Dispose()`？[System.Drawing.Image](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx) implements ，所以你的代码应该（可能）看起来像这样：`pic``IDisposable`

```
using(var pic = System.Drawing.Image.FromFile(Server.MapPath(url)))
{
    pic.RotateFlip(System.Drawing.RotateFlipType.Rotate270FlipNone);
    pic.Save(Server.MapPath(url));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:42:52.420

如果你多次这样做，你不应该忘记 Dispose() 你的图像。

# quickbooks - 由于以下错误，检索具有 CLSID {6C9E80E3-B780-4361-A693-5E5C6BDC83A9} 的组件的 COM 类工厂失败：80040154

> ID：15034875
> 
> 赞同：5
> 
> 时间：2013-02-22T23:20:32.973
> 
> 标签：quickbooks, qbfc, qbxml

我收到此错误：
由于以下错误，检索具有 CLSID {6C9E80E3-B780-4361-A693-5E5C6BDC83A9} 的组件的 COM 类工厂失败：80040154。

```
Dim smgrGlobal As QBSessionManager
smgrGlobal = New QBSessionManagerClass() 
```

第二行是错误的。
我仅在使用 QB2013 和 QBFC12 时收到此错误。任何以前的版本都不会发生这种情况。
据我所知，此错误是由于未针对 x86 编译的应用程序（如果使用“任何 CPU”代替。）但是我已将应用程序设置为针对 x86 而不是“任何 CPU”进行编译，我仍然收到此错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:03:57.273

COM 错误 0x80040154 字面意思是“类未注册”。所引用的“类”是您尝试实例化的组件的 COM 类。以下是您可能会收到此错误的原因：

1.  正如您所指出的，如果您使用“x64”或“Any CPU”而不是“x86”构建您的应用程序，您将看到此问题。这是因为 32 位进程使用与 64 位进程不同的注册表配置单元，而注册表是保存有关 COM 类注册信息的地方。
2.  您尚未在当前本地机器上正确安装 QBFC。无论您用于开发应用程序的 QBFC 版本是什么，都必须在运行应用程序的每台计算机上安装相同版本的 QBFC。如果你不这样做，你可能会很幸运，因为其他人安装了正确的版本，但最终你会看到这个问题。让我强调一下：QBFC 默认没有安装 QuickBooks。
3.  （不太可能但可能）QBFC 的 COM 注册信息不知何故已损坏。这个问题可以通过重新安装正确版本的 QBFC 来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-26T02:53:15.640

如果更改为 X86 不起作用，请尝试以下操作：我使用的是版本 13，也可能适用于其他版本 安装 QBFC13_0Installer.exe 确保先安装 SDK 在我的系统上，它位于：C:\Program Files(x86)\ Intuit\IDN\QBSDK13.0\tools\installers

我有两个相同的 Surface Pro 3 和 Windows 10。在一个系统上使用相同的代码副本编译并运行得很好。另一方面，我会遇到可怕的类错误。经过大量搜索并没有找到解决方案，我开始只是在黑暗中刺伤，这个特殊的刺伤解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T12:34:28.180

QB POS 2013 也有类似的问题。

使用管理员凭据运行应用程序时出现此错误 - 当我在当前用户下运行应用程序时一切正常。此错误的原因可能是 QBFC 安装程序（或合并模块）中的问题 - 两个安装程序都将 COM 组件类 ID 写入当前用户 (HKCU) 的注册表分支而不是本地计算机分支 (HKLM)。因此，当您不在当前用户（管理员或其他用户）下运行您的应用程序时，应用程序无法找到 COM 组件 ID。

此外，常规 QB XML (Interop.QBPOSXMLRPLIB) 已正确安装并在所有用户下成功运行。

请在此处查看类似[的讨论 - 如何中途注册 COM 组件？](https://stackoverflow.com/questions/6631861/how-can-a-com-component-be-registered-halfway).

# android-sqlite - 表“X”没有名为“Y”的列

> ID：15034879
> 
> 赞同：0
> 
> 时间：2013-02-22T23:20:50.273
> 
> 标签：android-sqlite

当我尝试将一条记录插入名为“提醒”的表中时，我的应用程序失败（请参阅下面的 logcat）。我查看了 20 多个类似的帖子，但我无法发现我的错误。这可能是一个明显的错误，但我能找到它。

日志猫：

```
02-22 14:10:25.884: E/SQLiteLog(2638): (1) table reminders has no column named title
02-22 14:11:22.935: D/dalvikvm(2638): threadid=11: still suspended after undo (sc=1      dc=1)
02-22 14:11:34.684: W/dalvikvm(2638): threadid=11: thread exiting with uncaught   exception (group=0x40a13300)
02-22 14:11:34.684: D/dalvikvm(2638): threadid=1: still suspended after undo (sc=1 dc=1)
02-22 14:11:39.263: D/dalvikvm(2638): threadid=1: still suspended after undo (sc=1 dc=1)
02-22 14:11:40.043: E/AndroidRuntime(2638): FATAL EXCEPTION: ModernAsyncTask #1
02-22 14:11:40.043: E/AndroidRuntime(2638): java.lang.RuntimeException: An error occured while executing doInBackground()
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.lang.Thread.run(Thread.java:856)
02-22 14:11:40.043: E/AndroidRuntime(2638): Caused by: java.lang.IllegalArgumentException: Unknown Uri: content://com.example.android.taskreminder.ReminderProvider/reminder
02-22 14:11:40.043: E/AndroidRuntime(2638):     at com.example.taskreminder.ReminderProvider.query(ReminderProvider.java:138)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.content.ContentProvider.query(ContentProvider.java:652)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.content.ContentResolver.query(ContentResolver.java:370)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.content.ContentResolver.query(ContentResolver.java:313)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:49)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:35)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
02-22 14:11:40.043: E/AndroidRuntime(2638):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-22 14:11:40.043: E/AndroidRuntime(2638):     ... 4 more
02-22 14:11:40.333: D/dalvikvm(2638): threadid=1: still suspended after undo (sc=1 dc=1)
02-22 14:11:40.473: D/dalvikvm(2638): threadid=1: still suspended after undo (sc=1 dc=1)
02-22 14:11:40.517: D/dalvikvm(2638): GC_CONCURRENT freed 233K, 3% free 11200K/11527K, paused 91ms+91ms, total 260ms
02-22 14:11:51.376: I/Process(2638): Sending signal. PID: 2638 SIG: 9 
```

以下是相关代码：

```
private static class DatabaseHelper extends SQLiteOpenHelper {      

private static final String DATABASE_CREATE = "CREATE TABLE "
            + DATABASE_TABLE + " (" + COLUMN_ROWID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COLUMN_TITLE
            + " TEXT NOT NULL, " + COLUMN_BODY + " TEXT NOT NULL, "
            + COLUMN_DATE_TIME + " INTEGER NOT NULL);";

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    // Called when the database is created for the first time
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE);            
    }

@Override
public boolean onCreate() {
    // Calls getWritableDataBase() on a DatabaseHelper object
    mDb = new DatabaseHelper(getContext()).getWritableDatabase();
    return true;        
}

private static class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_CREATE = "CREATE TABLE "
            + DATABASE_TABLE + " (" + COLUMN_ROWID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COLUMN_TITLE
            + " TEXT NOT NULL, " + COLUMN_BODY + " TEXT NOT NULL, "
            + COLUMN_DATE_TIME + " INTEGER NOT NULL);";

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE);            
    }
          }

   public Uri insert(Uri uri, ContentValues values) {       
    values.remove(ReminderProvider.COLUMN_ROWID);
    long id = mDb.insertOrThrow(ReminderProvider.DATABASE_TABLE, null, Values);
       getContext().getContentResolver().notifyChange(uri, null);
       return ContentUris.withAppendedId(uri, id);
} 
```

下面是传递给上述 db.execSQL(DATABASE_CREATE) 调用的字符串 DATABASE_CREATE（取自调试器）的值。

CREATE TABLE 提醒（_id INTEGER PRIMARY KEY AUTOINCREMENT，title TEXT NOT NULL，body TEXT NOT NULL，remind_date_time INTEGER NOT NULL）；

除非我遗漏了什么，否则它对我来说是正确的。

无论如何，在您创建数据库后（并通过 log.d() 显示）以编程方式（通过方法）检索数据库的架构，以便您可以确认它是使用适当的列创建的？我尝试在 shell 中使用 SQLite3 命令。似乎数据库存在（即，使用 .databases 命令我可以看到名称为 /data/data/com.example.taskreminder/databases/data.db 的“文件”）。但是，当我尝试查看表格时（通过 .tables 命令），我没有得到任何结果……但不确定我是否正确使用它。我可以用来诊断此类问题的步骤有什么建议吗？

顺便说一句，这是我第一次使用这个论坛...所以不确定我是否使用过

谢谢。

# javascript - 按钮文本对齐中的 iconCls - EXTJS

> ID：15034881
> 
> 赞同：5
> 
> 时间：2013-02-22T23:20:55.673
> 
> 标签：javascript, ajax, extjs, extjs4, alignment

```
var btnLogin = new Ext.Button({
             text: 'Login',
             scale   : 'large',
             width : 100,
             iconCls: 'checkicon',
             iconAlign: "right",

             handler: function(){
               if(Ext.getCmp('username').getValue() !== '' && Ext.getCmp('password').getValue() !== ''){
                 loginForm.getForm().submit({
                   url: 'authenticate.php',
                   method: 'POST',
                   params: {
                     response: hex_md5(Ext.getCmp('challenge').getValue()+hex_md5(Ext.getCmp('password').getValue()))
                   },
                   success: function(){
                     window.location = 'tabs-adv.html';
                   },
                   failure: function(form, action){
                     Ext.MessageBox.show({
                       title: 'Error',
                       msg: action.result.message,
                       buttons: Ext.Msg.OK,
                       icon: Ext.MessageBox.ERROR
                     });
                   }
                 });
               }else{
                 Ext.MessageBox.show({
                   title: 'Error',
                   msg: 'Please enter user name and password',
                   buttons: Ext.Msg.OK,
                   icon: Ext.MessageBox.ERROR
                 });
               }
             }
           }) 
```

![在此处输入图像描述](../Images/a6bc33678440a1a2fb2841910398a2e9.png)

## 问题

和`Login`对勾图标间隙太大，如何让对勾图标和登录文字粘在一起，或者让iconCls左对齐。

## 更新

```
.checkicon {
    margin-right: 25px;
    background-image:url(../images/CheckIcon.png) !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:44:08.713

这有点棘手，因为按钮图标绝对位于按钮内。你可以在你的 .checkicon 类中尝试这样的事情：

```
.checkicon {
    right: -25px !important
    background-image:url(../images/CheckIcon.png) !important;
} 
```

这应该可以达到与您使用 margin-right 相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:43:53.220

尽量不要将比例设置为大并删除宽度。它应该自动占用适量的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:18:42.303

您可以将该`margin-right`属性添加到**checkicon** CSS 类，使用您选择的值，例如 15px。这样，您的按钮宽度将保持不变，并且只会缩小文本和图标之间的空间。

# java - 用于在 Google Groups for Business 中更改用户角色的 API

> ID：15034882
> 
> 赞同：0
> 
> 时间：2013-02-22T23:21:00.060
> 
> 标签：java, python

使用配置 API，我已经能够创建组并向其中添加用户。我已经搜索了一个 API，它允许你为用户分配角色，例如让他们成为管理者或所有者。

这可以手动完成，但我还没有找到一种方法来自动化这个过程。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:51:04.640

怎么样：[https ://developers.google.com/google-apps/provisioning/reference#Group_Members_Table](https://developers.google.com/google-apps/provisioning/reference#Group_Members_Table)

更多信息：[https ://developers.google.com/google-apps/provisioning/#assigning_an_owner_to_a_group](https://developers.google.com/google-apps/provisioning/#assigning_an_owner_to_a_group)

请在将来在 SO 上发布之前尝试 Google 搜索。

# java - 在 NSIS 中检测 64 位 JVM

> ID：15034884
> 
> 赞同：0
> 
> 时间：2013-02-22T23:21:03.840
> 
> 标签：java, 64-bit, nsis

我目前使用 NSIS 为我的 Java 应用程序创建安装程序。我的应用程序需要本地库，所以目前我正在创建两个安装程序，一个是 32 位的，另一个是 64 位的库。

问题是所需的库类型取决于 JVM，而不是操作系统架构。可以理解的是，使用 64 位 Windows 的用户通常会下载 64 位安装程序，即使他们运行的是 32 位 JVM。即使我在我网站的下载页面上写了解释，用户也不太可能阅读（或理解），因此需要更好的解决方案。

任何人都可以建议一些不错的 NSIS 脚本来帮助在安装时检测 JVM 类型，以便可以安装正确的库。这样，我可以提供一个 Windows 安装程序并隐藏用户的复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:27:44.887

如果可能，您应该考虑更改您的应用程序以有条件地加载正确的本机库并创建一个安装程序。您的客户会更开心。

类似的东西（对于 Windows）：（仅教学示例 - 未准备好生产）

```
String archDataModel = System.getProperty("sun.arch.data.model");
String libName   = "Java2WinExample";
String libExt    = ".dll";
String libNameFQ = libName+archDataModel+libExt;
System.loadLibrary(libNameFQ); 
```

您的单个安装程序将同时安装 Java2WinExample32.dll 和 Java2WinExample64.dll，并且应用程序将根据调用 JVM 加载正确的库。

# graph - 如何使用 GVPR 将具有多个图形的 DOT 文件拆分为多个 DOT 文件？

> ID：15034885
> 
> 赞同：6
> 
> 时间：2013-02-22T23:21:09.930
> 
> 标签：graph, graphviz

如何使用 DOT 语言将具有多个图形的文件拆分为多个 DOT 文件`gvpr`？

输入（1 个文件）：

```
# single.dot
digraph one {
  a -> b;
}
digraph two {
  c -> d;
} 
```

输出（每个文件 1 个图表）：

```
# one.dot
digraph one {
  a -> b;
}

# two.dot
digraph two {
  c -> d;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:21:09.930

```
BEG_G {
  fname = sprintf("%s.dot",$G.name);
  writeG($G, fname);
} 
```

# java - 没有运行完整代码的程序循环

> ID：15034890
> 
> 赞同：0
> 
> 时间：2013-02-22T23:21:21.690
> 
> 标签：java, exception-handling

我正在为一个项目编写一个异常类，并且遇到了一个问题。该类要求一个包含银行帐户的文件名，读取该文件，并检查它们是否符合某些条件。如果它们不满足这些条件之一，则会引发 BankAccountException 类型的错误，这是一个自定义错误类，只是`extends`该类`Exception`并被重命名。我遇到的问题是，一旦我输入文件名，程序会立即询问另一个文件的名称。我已经坐了一段时间，无法弄清楚，任何帮助将不胜感激。

```
 import java.util.*;

 import java.io.*;

   public class BankAccountProcessor{

  public static void main(String[] args){
     boolean runProgram = true;
     Scanner input = new Scanner(System.in);
     String filename;

     while (runProgram = true){
        try{
           System.out.println("Please enter the name of the file you want to parse.");
           filename = input.next();
           File file = new File(filename);
           Scanner inputFile = new Scanner(file);
           while (inputFile.hasNext()){
              String accountLine = inputFile.nextLine();
                    if (BankAccountProcessor.isValid(accountLine) == true){
                        System.out.println("Line " + accountLine + " has been processed.");
                    }
                    runProgram = false;
           }
        }
           catch(FileNotFoundException e){
              System.out.println("That file does not exist");
           }
           catch(BankAccountException e){

           }
     }
  }

  private static boolean isValid(String accountLine) throws BankAccountException{
     StringTokenizer stringToken = new StringTokenizer(accountLine, ";");
     String tokenOne = stringToken.nextToken();
     String tokenTwo = stringToken.nextToken();
     if (stringToken.countTokens() != 2){
        throw new BankAccountException("Invalid Bank Account Info");
     }
     else if (tokenOne.length() != 10){
        throw new BankAccountException("Invalid Bank Account Info: Account Number is not 10 digits.");
     }
     else if (tokenTwo.length() < 3){
        throw new BankAccountException("Invalid Bank Account Info: Name must be more than 3 letters.");
     }
     else if (BankAccountProcessor.hasLetter(tokenOne) == true){
        throw new BankAccountException("Invalid Bank Account Info: Account Number must be all digits.");
     }
     else if (BankAccountProcessor.hasDigit(tokenTwo) == true){
        throw new BankAccountException("Invalid Bank Account Info: Account Name cannot have digits.");
     }
     return true;
  }

  private static boolean hasDigit(String str){
     for (char c : str.toCharArray()){
        if (Character.isDigit(c)){
           return true;
        }
     }
     return false;
  }

  private static boolean hasLetter(String str){
     for (char c : str.toCharArray()){
        if (Character.isLetter(c)){
           return true;
        }
     }
     return false;
  }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:23:29.260

您正在使用运算符在每个循环中分配`true`您的变量。结果是你的while循环将永远循环。使用运算符进行比较：`runProgram``=``true``==`

```
while (runProgram == true) 
```

或者更简单地说，

```
while (runProgram) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:43:20.707

试着加入一些调试`System.out.println()`语句，看看你的代码能走多远。这将帮助您缩小问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:27:09.723

如果我不得不猜测（我在猜测），我会说您传入的文件缺少任何标记，因此`while (inputFile.hasNext())`返回 false 并要求您提供下一个文件。

# php - mysql在查询中爆炸

> ID：15034893
> 
> 赞同：0
> 
> 时间：2013-02-22T23:21:46.840
> 
> 标签：php, mysql

好的，我对我想做的事情是否可行感到有点困惑。

在数据库中，“slot”字段包含格式为（第一部分：第二部分：第三部分）的信息，其中：是分隔符。

我需要与`$matchid`该领域的第一块进行比较。所以让我们说`slot1 = 100:200:300`

我需要检查是否`$matchid`等于数据库中任何字段的第一部分

```
$matchid = mysql_fetch_row(mysql_query(
     "SELECT `matchid` 
      FROM `matches` 
      WHERE `winner` = 0 AND 
            (`slot1` OR `slot2` OR `slot3` OR `slot4` OR `slot5` 
             OR `slot6` OR `slot7` OR `slot8` OR `slot9` OR `slot10`) = $matchid"
      )); 
```

如果`$matchid`最初是 100 并且`slot1 = 100:200:300`查询不会返回任何内容，但我需要这是一个匹配项。

我不知道我是否已经正确解释了这一点，但我们开始吧。我尝试使用爆炸，但并没有真正起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:30:57.267

要使其与您现有的数据结构一起使用，您可以执行以下操作：

```
SELECT `matchid` FROM `matches` 
WHERE `winner` = 0 AND (
  `slot1` LIKE "{$matchid}:%" 
  OR `slot2` LIKE "{$matchid}:%"
  /* etc, etc... */
) 
```

话虽如此，如果您将插槽分隔到它们自己的表中，您将获得更清晰的查询。此外，转义 $matchid 或使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:34:47.890

尝试：

```
$matchid = mysql_fetch_row(mysql_query("SELECT `matchid` FROM `matches` WHERE `winner` = 0 AND         (`slot1` OR `slot2` OR `slot3` OR `slot4` OR `slot5` OR `slot6` OR `slot7` OR `slot8` OR `slot9` OR `slot10`) = ".$matchid)); 
```

注意连接字符串的点。通过这种方式，php 传递了 $matchid 的实际值，而在您的代码中，您传递了字符串“$matchid”。

如果 $matchid 是整数，则必须在查询中使用 strval($matchid)。

# algorithm - 就地快速排序具有 O(n) 或 O(logn) 空间复杂度

> ID：15034897
> 
> 赞同：5
> 
> 时间：2013-02-22T23:22:28.383
> 
> 标签：algorithm, sorting

这篇维基百科文章[http://en.wikipedia.org/wiki/Quicksort#In-place_version](http://en.wikipedia.org/wiki/Quicksort#In-place_version)表明 O(logn) 是就地排序的空间时间复杂度和[http://futur3googl3r.blogspot.com/2008/08/ google-interview-questions.html](http://futur3googl3r.blogspot.com/2008/08/google-interview-questions.html)这个采访网站建议它是 O(n)。我认为答案是 O(n) 但想知道我是否正确。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T23:35:04.183

在这两篇文章中，他们所指的空间复杂度是**额外**空间（不包括存储原始数组所需的空间）。除了声明额外数组的常见情况外，这个**额外的**空间可能来自调用堆栈。每次递归调用都会在调用栈上创建一个栈帧，占用空间，栈帧的个数取决于输入大小`n`，所以需要统计。

让我们使用 Wikipedia 文章作为参考，因为正如 @Jim Mischel 所指出的那样，该博客非常不一致。

对于就地快速排序，从天真的实现进行修改将**平均提供**`O(log n)` *额外的*空间，而不是天真的实现中的*额外*空间（在所有情况下）。^(正如博客1)正确指出的那样，*额外*空间的**最坏情况**复杂性是，当算法遇到其最坏情况时（排序列表；将存在递归调用，因此调用堆栈将占用*额外*空间）。**`O(n)` ****^(`O(n)``n``O(n)`)******

 *******¹：（感谢@rici 指出）但是，博主只有在我们假设没有[维基百科文章](http://en.wikipedia.org/wiki/Quicksort#Optimizations)中提到的优化的实现时才是正确的。通过首先在较小的部分上递归并为较长的部分实现尾部调用，可以改进算法以在最坏的情况下使用`O(log n)` **额外的空间。**由于较小的部分总是小于输入大小的一半，因此最多会有`O(log n)`递归调用。假设完成了尾调用优化，较长的部分将重用当前堆栈帧，而不会产生额外的空间。如果没有进行尾调用优化，我们总是可以编写一个带有显式堆栈的迭代实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:24:53.777

> 这次采访表明它是 O(n)

不，它不会：

> 解决方案：快速排序的空间复杂度为 O(logn)，即使在最坏的情况下也是如此。*******

# php - 在 DB PHP 中列出布尔值设置为 true 的用户

> ID：15034898
> 
> 赞同：-1
> 
> 时间：2013-02-22T23:22:59.990
> 
> 标签：php, boolean

我正在开发一个基本的聊天应用程序，请记住这个想法非常简单。我想在每次用户登录时将数据库中的布尔值设置为 true，每次用户注销时设置为 false，以验证用户是否在线/离线。我将如何返回仅返回布尔值设置为 true 的用户的用户列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:25:36.073

```
$sql="SELECT * FROM users WHERE flag=1"; 
```

然后将此字符串传递给您的数据库并获取结果。

# python - Python，遍历范围内的列表

> ID：15034899
> 
> 赞同：1
> 
> 时间：2013-02-22T23:23:04.453
> 
> 标签：python

我有一个值为 0 到 30 的列表。

如何通过添加偏移量循环遍历这些值（在一个范围内）？

因为这可能没有任何意义，所以我做了一个小图：

![图表](../Images/179bc9e011d9ca52ca54fe03e0d825b6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:32:15.497

这处理环绕的情况

```
def list_range(offset, length, l):
    # this handles both negative offsets and offsets larger than list length
    start = offset % len(l)
    end = (start + length) % len(l)
    if end > start:
        return l[start:end]
    return l[start:] + l[:end] 
```

编辑：我们现在处理负索引情况。

编辑 2：交互式 shell 中的示例用法。

```
>>> l = range(30)
>>> list_range(15,10,l)
[15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
>>> list_range(25,10,l) # I'm guessing the 35 in the example was accidental
[25, 26, 27, 28, 29, 0, 1, 2, 3, 4]
>>> list_range(-8,10,l)
[12, 13, 14, 15, 16, 17, 18, 19, 20, 21] 
```

编辑 3：更新以忽略每个评论的 -8,10 案例

编辑 4：我正在使用列表切片，因为我怀疑它们比循环数据更有效。我刚刚测试了一下，我的预感是正确的，它比在列表中循环的 mVChr 版本快大约 2 倍。但是，这可能是一个过早的优化，并且在您的情况下，更 Pythonic 的答案（单行列表理解）可能会更好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:36:26.390

这将适用于所有情况，除了您最后一个具有负偏移量的情况：

```
[(i + offset) % max_range for i in xrange(count)]

# e.g.
max_range = 30
count = 10
offset = 15
print [(i + offset) % max_range for i in xrange(count)]
# [15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
offset = 25
print [(i + offset) % max_range for i in xrange(count)]
# [25, 26, 27, 28, 29, 0, 1, 2, 3, 4] 
```

这应该会让你走上正确的轨道，尽管我不确定如何最好地处理最后一个案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:30:12.610

你不能说

```
List = range(30)
newList = []
for i in range(n):
    newList.append(List[n+offset]) 
```

这不是超级通用的，但应该适用于示例文件中列出的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T23:37:07.250

```
def loopy(items, offset, num):
    for i in xrange(num):
        yield items[(offset + i) % len(items)]

>>> x = range(30)
>>> print list(loopy(x, 25, 10))
[25, 26, 27, 28, 29, 0, 1, 2, 3, 4] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T23:37:12.357

好的，假设您有一个列表，以获取您的新列表

```
list=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
newlist=[]
#let's say I want 5 through 10
for n in range(5,11):
   newlist.append(list[n]) 
```

新列表将是 5 到 10。对于循环使用负数的数字，例如 range(-1,4) 会给你 15,0,1,2,3,4

# redirect - 配置 /etc/nginx/nginx.conf 以重定向到单独的主机

> ID：15034901
> 
> 赞同：2
> 
> 时间：2013-02-22T23:23:06.660
> 
> 标签：redirect, ubuntu, nginx

有谁知道如何修改 nginx.conf 文件以重定向到另一台主机？我想将[http://mydomain.com/page1](http://mydomain.com/page1)和[http://mydomain.com/page2](http://mydomain.com/page2)指向本地网络上的单独主机。mydomain.com/page1 应该转到 10.100.0.163，mydomain.com/page2 应该转到 10.100.0.164。

这是我添加到我的 Ubuntu 服务器上 nginx.conf 文件的 HTML 部分的内容。

```
location /page1/ {
rewrite ^/page1/(.*)$ http://10.100.0.163/$1 permanent;
}

location /page2/ {
rewrite ^/page2/(.*)$ http://10.100.0.164/$1 permanent;
} 
```

还有什么我需要添加到 nginx.conf 文件中的吗？我还需要修改其他配置文件吗？

我只是做了一个标准的 nginx 安装，并没有改变任何其他东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T08:01:18.150

在基于 Debian 的发行版（包括 Ubuntu）上，以下注意事项适用于 nginx（apache 软件包使用类似的布局）：

*   `/etc/nginx/nginx.conf`是主配置文件
*   主配置文件包括所有文件`/etc/nginx/conf.d`和`/etc/nginx/sites-enabled`
*   `/etc/nginx/conf.d/<some-file>`是您*在主配置中添加*内容的地方。
    *   如果除了 nginx 之外的任何包添加配置，它们将在`/etc/nginx/conf.d/<packagename>`（想想像 gitweb 或一些 php-thing 之类的包）。
    *   添加一个文件`/etc/nginx/conf.d/local`或`/etc/nginx/conf.d/local_something`在其中添加您需要的任何内容。
    *   通过像这样将事情分开，可以很容易地确定任何潜在的问题在哪里。
*   `/etc/nginx/sites-enabled/<some-file>`是您放置*虚拟主机所需的配置添加的*位置，每个虚拟主机 1 个文件。通过分离虚拟主机，可以更容易地知道在哪里寻找更改/修复的东西（如您所知，自动忽略与该虚拟主机无关的所有内容）。
*   `/etc/nginx/sites-available/`是软件包为他们想要添加的虚拟主机放置配置的地方。*这些不会自动激活*，要启用这样的站点，您可以将其链接或复制到`/etc/nginx/sites-enabled/`

由于您要添加的内容特定于`mydomain.com` 虚拟主机，因此您应该将它们添加到`/etc/nginx/sites-enabled/mydomain.com`. 其中的内容应该是这样的：

```
server{
  server_name mydomain.com;

  location /page1/ { rewrite ^/page1/(.*)$ $scheme://10.100.0.163/$1 permanent; }
  location /page2/ { rewrite ^/page2/(.*)$ $scheme://10.100.0.164/$1 permanent; }

  #add config needed to server whatever else on 
  #location / {}
} 
```

关于该配置的注意事项：

*   如果你`rewrite`按照上面的方式进行操作*，浏览器中显示的 url 将自动更改为重写后的 url*。
*   如果您希望向用户显示的 url 保持“mydomain.com/page1”，您需要使用[proxy_pass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass "proxy_pass") -directive 而不是 rewrite（这种设置的关键字是*reverse proxy*）
*   您使用 $scheme:// 而不是 $http:// 因为如果您稍后也让该虚拟主机在 https:// 上收听，它不会破坏这种方式

# c++ - 为什么我的单个字符长度超过一个字符？

> ID：15034909
> 
> 赞同：0
> 
> 时间：2013-02-22T23:23:44.150
> 
> 标签：c++, string, vector, char

我正在尝试创建一个`char*`由字符串的第一个字符组成的。字符串保存在字符串向量中。

我尝试了以下方法：

`char* value = &cards[0][0]; cout<<"Value "<<i<<" == "<<value<<endl;`

`char* value = &cards[0].front(); cout<<"Value "<<i<<" == "<<value<<endl;`

（'cards' 是字符串的向量，每个字符串都是常规 52 卡片组中的一张卡片）

但无论我做什么，*价值*总是等于整个字符串。

如何使单个字母的*价值？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:26:17.997

按照惯例， a`char*`被解释为以 null 结尾的字符串文字。因此`cout`输出从`value`指向向上的字符到字符串末尾的所有内容。

如果你只想要一个字符，你可以使用`char`代替`char*`：

```
char value = cards[0][0];
cout << "Value " << i << " == " << value << endl; 
```

# javascript - 为什么“typeof + ''”返回'number'？

> ID：15034910
> 
> 赞同：5
> 
> 时间：2013-02-22T23:23:47.270
> 
> 标签：javascript

让我们尝试在控制台中输入以下代码：

```
typeof + '' 
```

这将返回“数字”，而没有参数的 typeof 本身会引发错误。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T23:24:41.687

一[元加号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)调用字符串的内部`ToNumber`算法。`+'' === 0`

```
typeof + ''
// The `typeof` operator has the same operator precedence than the unary plus operator,
// but these are evaluated from right to left so your expression is interpreted as:
typeof (+ '')
// which evaluates to:
typeof 0
"number" 
```

与 不同的是，运算符调用`parseInt`的内部算法将空字符串（以及只有空格的字符串）评估为 Number 。[从规范](http://es5.github.com/#x9.3.1)向下滚动一点：`ToNumber``+``0`[`ToNumber`](http://es5.github.com/#x9.3.1)

> 为空或仅包含空格的*StringNumericLiteral*`+0`将转换为.

这是控制台上的快速检查：

```
>>> +''
<<< 0
>>> +' '
<<< 0
>>> +'\t\r\n'
<<< 0
//parseInt with any of the strings above will return NaN 
```

### *以供参考：*

*   [一元加号和减号运算符的重要用途是什么？](https://stackoverflow.com/q/5450076/1331430)（所以）
*   [ES5 #9.3.1 ToNumber 应用于字符串类型](http://es5.github.com/#x9.3.1)（ES5 规范）
*   [运算符优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)(MDN)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:27:05.343

计算结果为`typeof(+'')`，而不是`(typeof) + ('')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:28:15.510

Javascript 将以下内容解释`+ ''`为`0`：

`typeof + ''`将回显“数字”

要回答你的第二个问题，`typeof`需要一个参数，所以如果你自己调用它，如果你自己调用它会抛出同样的错误`if`。

# java - 使用反射来修改方法并访问其局部变量

> ID：15034911
> 
> 赞同：2
> 
> 时间：2013-02-22T23:23:48.900
> 
> 标签：java, api, reflection, version-control, gnu

由于我[不太确定分叉 gnu.mail.providers 涉及什么，](https://stackoverflow.com/questions/15000118/how-best-to-compile-gnu-mail-providers)我想使用反射与这个类进行交互。

我认为[getMessage](http://cvs.savannah.gnu.org/viewvc/mail/source/gnu/mail/providers/nntp/NNTPFolder.java?root=classpathx&view=log)中的算术不正确：

```
 GroupResponse gr = ns.connection.group(name);
          first = gr.first;
          last = gr.last;
          count = gr.count;
          // Get article
          m = getMessageImpl(msgnum - 1 + first);
          // Cache store
          articleCache.put(key, m);
          return m; 
```

无论如何，我想在 getMessage 方法中访问上面的 GroupResponse 对象。虽然我知道反射可以按照这些方式做事，但我不确定如何从这个特定的方法中获取这个特定的对象。我使用反射来访问某些字段（first、last、count），但这似乎有点不同。

它是[GroupResponse](http://developer.classpath.org/inet/doc/gnu/inet/nntp/GroupResponse.html)类，它似乎将所有东西放在一起。

我可以使用反射来编写自定义 getMessage 方法并将其“粘贴”到 NNTPFolder 上吗？我不确定什么是可能的或可取的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T23:28:08.927

您不能使用反射来修改方法的内容。您不能使用字节码操作库来修改方法的内容。但是，通过字节码操作，您可以拦截方法调用并重定向到您选择的另一个方法。这与您将获得 afaik 差不多。

另一种选择是获取库的源代码，进行一些修改以满足您的需要，然后重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:34:01.527

看看[Byteman](https://community.jboss.org/wiki/ABytemanTutorial#top)。使用它，您可以描述一个规则，即每当`getMessage()`调用受影响类上的方法时，都会调用您自己的代码。

# c# - 如何跳过 Json.Net 中 IEnumerable 类型的默认 JavaScript 数组序列化？

> ID：15034912
> 
> 赞同：8
> 
> 时间：2013-02-22T23:24:12.890
> 
> 标签：c#, json, serialization, json.net, ienumerable

一些实现 IEnumerable 的自定义类型不一定有支持集合。它们可以动态生成，例如使用 'yield' 或 LINQ。这是一个例子：

```
public class SOJsonExample
{
    public class MyCustomEnumerable : IEnumerable<KeyValuePair<int,float>>
    {
        public List<int> Keys { get; set; }
        public List<float> Values { get; set; }

        public MyCustomEnumerable()
        {
            Keys = new List<int> { 1, 2, 3 };
            Values = new List<float> { 0.1f, 0.2f, 0.3f };
        }

        public IEnumerator<KeyValuePair<int, float>> GetEnumerator()
        {
            var kvps =
                from key in Keys
                from value in Values
                select new KeyValuePair<int, float>(key, value);

            return kvps.GetEnumerator();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return this.GetEnumerator();
        }
    }
} 
```

我发现 Json.NET 的默认序列化是枚举每个值并将值存储在 JavaScript 数组中（我不想要）。然后，默认反序列化程序将无法反序列化集合，因为它无法填充。在这些情况下，我希望 Json.NET 跳过默认的 JavaScript 数组序列化，只存储类的成员。

我想要的只是我的键和值 - 有没有捷径可以做到这一点，还是我必须实现自己的自定义序列化程序？

检查[了 this](https://stackoverflow.com/questions/1449142/json-serializing-types-derived-from-ienumerable)和[this](https://stackoverflow.com/questions/7567097/json-net-serialization-of-custom-collection-implementing-ienumerablet)，这两个都不是我的问题。也扫描[了文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)，但没有找到我要找的东西（也许我看错了地方）。

（编辑＃1 - 提高清晰度）

（编辑＃2 - 回答了我自己的问题......见下文）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T00:26:44.653

回答了我自己的问题 - 请参阅[关于 IEnumerable、Lists 和 Arrays 的优秀文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)：

> .NET 列表（继承自 IEnumerable 的类型）和 .NET 数组将转换为 JSON 数组。因为 JSON 数组只支持一系列值而不支持属性，所以在 .NET 集合上声明的任何其他属性和字段都不会序列化。在不需要 JSON 数组的情况下，可以将 JsonObjectAttribute 放置在实现 IEnumerable 的 .NET 类型上，以强制将该类型序列化为 JSON 对象。

所以，对于我的例子：

```
[JsonObject]
public class MyCustomEnumerable : IEnumerable<KeyValuePair<int,float>>
{
    ...
} 
```

# python - 是否可以禁用 PyDev 参数代码完成？

> ID：15034913
> 
> 赞同：3
> 
> 时间：2013-02-22T23:24:25.640
> 
> 标签：python, eclipse, autocomplete, pydev

我正在使用 Eclipse 的 PyDev 插件，并且大多数自动完成功能都很有用，但我宁愿不为函数填写所有参数，尤其是当某些参数是可选的时。在不完全禁用代码完成的情况下，我找不到任何方法在首选项中禁用此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:31:16.933

您可以在应用完成时按住 Ctrl 键（这会将参数和括号都排除在外——并且还会覆盖下一个单词）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T03:00:28.267

我认为在 PyDev/Eclipse 中不可能有不填写参数的功能代码完成。

但是，我不确定您为什么要禁用它，因为 Eclipse 允许您通过参数参数 进行**TAB 。****键入整个函数**也不会生成参数。

最后，请记住，您始终可以使用**Ctrl+Delete**和**Ctrl+Backspace**快速删除多余的参数。

# c++ - Opencv 未能在上一个之后尽早捕获单击

> ID：15034915
> 
> 赞同：0
> 
> 时间：2013-02-22T23:24:30.000
> 
> 标签：c++, performance, events, opencv

我为开放式 CV 编写了一个非常简单的 UI 类（基于 OpenCV 矩阵上的绘图按钮），但似乎 OpenCV 存在某种事件处理程序错误：
当我单击向下时，未捕获向上和向下第二次向下单击事件，如果我点击太快。但是，如果我单击向下、向上、向下和向上，尽管第二次向下仍然被忽略，则无论我尝试单击多快，都会捕获第二次向上事件。
调试输出（1 = 向下，-1 = 向上）：

```
Button: 1    //slow clicks
Button: -1
Button: 1
Button: -1
Button: 1
Button: -1
Button: 1
Button: -1
Button: 1   //started clicking fast
Button: -1
Button: -1
Button: 1
Button: -1
Button: -1
Button: 1
Button: -1
Button: -1
Button: 1 
```

因为我已经碰巧因为发布没有代码的问题而被否决，所以这里有一些代码：

```
void Opencv_UI::event_process(int evt, int x, int y, int flags) 
{
    int button = 0;
    switch(evt) 
    {
        case CV_EVENT_LBUTTONDOWN : button=1; break;
        case CV_EVENT_LBUTTONUP : button=-1; break;
        case CV_EVENT_RBUTTONDOWN : button=3; break;
        case CV_EVENT_RBUTTONUP : button=-3; break;
    }
    if(button==1||button==-1)
      std::cout<<"Button: "<<button<<"\n";
        //Code below does not affect event performance, I tryed the script with all this commented out
    int button_count = buttons.size();
    for(int i=0; i<button_count; i++) //Informs buttons about mouse event
    {
        buttons[i]->mouse(x, y, button);
    }
    this->render();    //Renders buttons affected by click/mousemove
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:47:08.100

事实证明，当检测到**双击**时会发送不同的事件，因此`CV_EVENT_LBUTTONDBLCLK`会发送常量。
这就是开关的样子：

```
switch(evt) 
{
       case CV_EVENT_LBUTTONDBLCLK :  //Capture doubleclick too
       case CV_EVENT_LBUTTONDOWN : button=1; break;
       case CV_EVENT_LBUTTONUP : button=-1; break;
       case CV_EVENT_RBUTTONDOWN : button=3; break;
       case CV_EVENT_RBUTTONUP : button=-3; break;
} 
```

# class - 为画布定义绘图上下文的自定义方法

> ID：15034924
> 
> 赞同：2
> 
> 时间：2013-02-22T23:24:57.643
> 
> 标签：class, user-interface, scheme, racket

在 Racket 中，我知道如何`canvas%`使用自己的 on-event 方法制作自己的自定义类：

```
(define my-canvas%
  (class canvas%
    (define/override (on-event event)
      (cond ...));; handle the event
    (super-new))) 
```

我想对返回的绘图上下文进行类似的更改，`(send canvas get-dc)`以便它具有更多绘图方法。如果我创建一个自定义`my-dc%`类，我将不得不找到一种方法来 `my-canvas%`返回*它，*而不是在`dc%`使用`get-dc`. 这可能吗？

更具体地说，`my-dc%`看起来像这样（我的定义`draw-circle`应该使用内置的`draw-arc`）：

```
(define my-dc%
  (class dc%
    (define (draw-circle x y radius)
      (draw-arc (- x radius) ; left
                (- y radius) ; top
                (* 2 radius) ; width
                (* 2 radius) ; height
                0            ; start-angle
                (* 2 pi)))   ; end-angle
    (super-new))) 
```

这样我以后就可以`(send dc draw-circle 100 100 20)`像其他绘图方法一样画一个圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:10:49.327

`dc<%>`不，基于对文档和源代码的查看，我认为不可能更改画布使用的类。

您必须改为创建`draw-circle`一个函数：

```
(define (draw-circle dc x y radius)
  (send dc draw-arc ....)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:00:30.360

您可能可以编写一个容器，将大部分工作委托给包含的 dc%。你可以这样做：

```
#lang racket
(require racket/gui/base)

(define my-dc%
  (class* object% (dc<%>)
    (init-field delegate)
    (super-new)

    (define/public (cache-font-metrics-key)
      (send delegate cache-font-metrics-key))

    (define/public (clear)
      (send delegate clear))

    (define/public (copy x y width height x2 y2)
      (send delegate copy x y width height x2 y2))

    (define/public (draw-arc x y width height start-radians end-radians)
      (send delegate draw-arc x y width height start-radians end-radians))

    ;; FILL ME IN...
)) 
```

[`dc<%>`](http://docs.racket-lang.org/draw/dc___.html)遍历界面中列出的所有方法。这种方法无疑是相当蛮力的，但它应该有效。然后你可以在这个类中添加任何你想要的额外方法，因为它是你的。

这是一个完整的例子，使用一些宏来减少我本来会做的一堆复制和粘贴：

```
#lang racket
(require racket/gui/base)

;; Defines a dc<%> implementation that can wrap around
;; another dc.
;; 
;; Can also be found at: https://gist.github.com/dyoo/5025445
;;
;; The test code near the bottom shows an example
;; of how to use the delegate.

(define wrapped-dc%
  (class* object% (dc<%>)
    (init-field delegate)
    (super-new)

    ;; This bit of code tries to generate the delegate method
    ;; given the method signature.  It's not quite perfect
    ;; yet because I'm having trouble capturing the re-write rule
    ;; for set-pen and set-brush.
    (define-syntax (write-delegate-method stx)
      (syntax-case stx ()
        [(_ (name args ...))
         (with-syntax ([(arg-ids ...)
                        (for/list ([arg (syntax->list #'(args ...))])
                          (syntax-case arg ()
                            [(id default)
                             #'id]
                            [id
                             #'id]))])
           #'(define/public (name args ...)
               (send delegate name arg-ids ...)))]))

    (define-syntax-rule (write-delegate-methods sig ...)
      (begin (write-delegate-method sig) ...))

    (write-delegate-methods 
     (cache-font-metrics-key)
     (clear)
     (copy x y width height x2 y2)
     (draw-arc x y width height start-radians end-radians)
     (draw-bitmap source dest-x dest-y 
                  (style 'solid)
                  (color (send the-color-database find-color "black"))
                  (mask #f))
     (draw-bitmap-section source dest-x dest-y src-x src-y 
                          src-width src-height
                          [style 'solid]
                          [color (send the-color-database find-color "black")]
                          [mask #f])
     (draw-ellipse x y width height)
     (draw-line x1 y1 x2 y2)
     (draw-lines points [xoffset 0] [yoffset 0])
     (draw-path path 
                [xoffset 0] [yoffset 0] 
                [fill-style 'odd-even])
     (draw-point x y)
     (draw-polygon points 
                   [xoffset 0] [yoffset 0]
                   [fill-style 'odd-even])
     (draw-rectangle x y width height)
     (draw-rounded-rectangle x y width height [radius -0.25])
     (draw-spline x1 y1 x2 y2 x3 y3)
     (draw-text text x y [combine #f] [offset 0] [angle 0])
     (end-doc)
     (end-page)
     (erase)
     (flush)
     (get-alpha)
     (get-background)
     (get-brush)
     (get-char-height)
     (get-char-width)
     (get-clipping-region)
     (get-device-scale)
     (get-font)
     (get-gl-context)
     (get-initial-matrix)
     (get-origin)
     (get-pen)
     (get-rotation)
     (get-scale)
     (get-size)
     (get-smoothing)
     (get-text-background)
     (get-text-extent string [font #f] [combine? #f] [offset 0])
     (get-text-foreground)
     (get-text-mode)
     (get-transformation)
     (glyph-exists? c)
     (ok?)
     (resume-flush)
     (rotate angle)
     (scale x-scale y-scale)
     (set-alpha opacity)
     (set-background color)
     ;(set-brush brush) ;; fixme: this is not quite right
     (set-clipping-rect x y width height)
     (set-clipping-region rgn)
     (set-font font)
     (set-initial-matrix m)
     (set-origin x y)
     ;(set-pen pen) ;; fixme: this is not quite right
     (set-rotation angle)
     (set-scale x-scale y-scale)
     (set-smoothing mode)
     (set-text-background color)
     (set-text-foreground color)
     (set-text-mode mode)
     (set-transformation t)
     (start-doc message)
     (start-page)
     (suspend-flush)
     (transform m)
     (translate dx dy)
     (try-color try result))

    ;; We'll manually write the methods for set-brush and set-pen
    ;; because they're case-lambdas and a bit unusual, rather
    ;; than complicate the macro any further.
    (public set-brush)
    (define set-brush 
      (case-lambda [(brush)
                    (send delegate set-brush brush)]
                   [(color style)
                    (send delegate set-brush color style)]))
    (public set-pen)
    (define set-pen
      (case-lambda [(pen)
                    (send delegate set-pen pen)]
                   [(color width style)
                    (send delegate set-pen color width style)]))))

(module+ test
  (define bm (make-bitmap 100 100))
  (define my-dc (new wrapped-dc% [delegate (send bm make-dc)]))
  (send my-dc draw-rectangle 10 10 30 50)
  (print bm)
  (newline)

  (define extended-dc%
    (class wrapped-dc%
      (super-new)
      (inherit draw-arc)
      (define/public (draw-circle x y radius)
        (draw-arc (- x radius) (- y radius) 
                  (* 2 radius)
                  (* 2 radius)
                  0 
                  (* 2 pi)))))

  (define bm2 (make-bitmap 100 100))
  (define my-new-dc (new extended-dc%
                         [delegate (send bm2 make-dc)]))
  (send my-new-dc set-smoothing 'aligned)
  (send my-new-dc draw-circle 50 50 30)
  (print bm2)) 
```

这里最后的`test`模块表明我们可以包装 a`dc`并根据需要扩展它。

Racket 应该在表单中对此有一些内置的支持[`surrogate`](http://docs.racket-lang.org/reference/Surrogates.html)，尽管我不得不承认我还没有尝试过。如果我有时间，我会尝试编写一个示例并修改此答案，如果它是对上述内容的改进。

# prolog - 使用 Prolog 进行决策树评估

> ID：15034925
> 
> 赞同：1
> 
> 时间：2013-02-22T23:25:12.067
> 
> 标签：prolog

表示函数

```
f(x) =
    if x < -2 then -1
    else
        if x > 2 then +1
        else
            0 
```

决策树表示为

```
[-1, [lt, -2], [1, [gt, 2], 0] ] 
```

同样，要表示函数

```
f(x) =
    if x < 0 then
       if x < -3 then -1
       else 0
    else
       if x < 3 then +1
       else +2 
```

我们使用树：

```
[-1,[lt,-3],0],[lt,0],[1,[lt,3],2]] 
```

`evaluate( DT, X, Y )`如果 Y 是通过对值 X 评估决策树 DT 获得的值，我如何为谓词编写 Prolog 代码？

样本输入输出如下：

```
?- evaluate([-1,[lt,-2],[1,[gt,2],0]],1,X).
X = 0 ? ;

?- evaluate([[-1,[lt,-3],0],[lt,0],[1,[lt,3],2]],7,X).
X = 2 ? ; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T03:11:35.263

我发现你的中间表示有点违反直觉。公平地说，这些列表应该被理解为一个 3 元组，例如：`[TrueValue, Condition, ElseValue]`、where`TrueValue`和`FalseValue`可以是值或其他有条件的 3 元组？假设这是正确的理解，我将回答。

你在这里得到的是一个基本的抽象语法树（AST）。我们将有两种模式：一个值或一个 3 元组。评估一个值很容易：

```
evaluate(Value, _, Value) :- number(Value). 
```

有了这个，评估条件就很容易了：

```
evaluate([TrueCase, Condition, FalseCase], X, Result) :-
  evaluate_condition(Condition, X) 
      -> evaluate(TrueCase, X, Result)
       ; evaluate(FalseCase, X, Result). 
```

我已将条件检查本身移至单独的谓词。这样可以方便地添加新的运算符。现在我们只需要对其进行编码：

```
evaluate_condition([lt, Y], X) :- X < Y.
evaluate_condition([gt, Y], X) :- X > Y. 
```

这甚至比您希望的要好一些，因为它不会产生虚假的选择点：

```
?- evaluate([-1,[lt,-2],[1,[gt,2],0]],1,X).
X = 0.

?- evaluate([[-1,[lt,-3],0],[lt,0],[1,[lt,3],2]],7,X).
X = 2. 
```

# c - Fork - 即使是 if else，父母和孩子如何运行

> ID：15034932
> 
> 赞同：-2
> 
> 时间：2013-02-22T23:26:10.450
> 
> 标签：c, unix, fork

问题一：

鉴于下面的代码，我知道当您调用分叉时，大多数情况下它的资源都会传递给子进程。现在，我查找的几乎每个 Fork 示例都像我所拥有的那样设置。从它的外观来看，我不明白父进程是如何被调用的，因为它位于 else 块中。

问题乙：

子进程中的代码执行完后，是不是自动知道现在要进入父进程了？我在其他示例中也看到了等待（NULL），如果它无论如何都要进入 else 块，那么等待的作用是什么。假设我想执行同一个父进程的两个子进程，这两个进程会并行运行，然后在完成后运行父进程的代码吗？谢谢。

```
#include <stdio.h>
#include <unistd.h> 

int main()
{
        pid_t pid;
        pid = fork();

        if(pid == 0){
                printf("Hello World");
        }
        else{
                printf("Hello World");
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:31:50.470

我认为你误解了这个概念。fork() 克隆进程，这意味着父进程和子进程都被执行，并且它们的代码中都有相同的 if-else（因为它们从`fork()`下往上运行相同的代码）。

子进程ID为0所以进入if，父进程ID不为0所以进入else。这是一种让进程各自做自己的事情的方法，即使它们具有相同的代码。

# ipython - 无法访问 ipython cell_magic 中的笔记本变量

> ID：15034935
> 
> 赞同：3
> 
> 时间：2013-02-22T23:26:19.403
> 
> 标签：ipython, ipython-notebook

我正在尝试对 ipython 笔记本中的 ROOT 文件进行一些操作（这里的 ROOT 是 CERN 的带有 python 接口的 ROOT 数据分析程序）。ROOT 令人讨厌的特性之一是它经常将输出直接发送到标准输出，而不是将这样的输出作为字符串返回。为了让这个输出出现在 ipython 笔记本中，我写了一点`cell_magic`：

*   告诉 ROOT 将标准输出重定向到文件
*   在单元格中运行 python 命令
*   关闭 ROOT 的输出重定向
*   读取文件并打印内容

这是我的小细胞魔法密码

```
import tempfile
import ROOT
from IPython.core.magic import register_cell_magic

@register_cell_magic
def rootprint(line, cell):
  """Capture Root stdout output and print in ipython notebook."""

  with tempfile.NamedTemporaryFile() as tmpFile:

    ROOT.gSystem.RedirectOutput(tmpFile.name, "w")
    exec cell
    ROOT.gROOT.ProcessLine("gSystem->RedirectOutput(0);")
    print tmpFile.read() 
```

如果我将此代码放入 ipython 笔记本单元格并执行它，那么效果很好。例如，

```
In [53]: f = ROOT.TFile('myRootFile.root')   # Load the Root file

In [54]: %%rootprint
         f.ls()  # Show the contents of the ROOT file

         ... f.ls() output appears here - yay! ... 
```

通常，输出`f.ls()`到标准输出并且不会作为单元格的结果出现。但是有了这个单元格魔法，输出确实出现在单元格结果中！这很棒！

但是，如果我将单元格魔术代码放入模块中，则它不起作用。例如，我将上面的代码放入`ipythonRoot.py`并`import ipythonRoot.py`在笔记本中执行。当我尝试运行`%%rootprint`上面的单元格时，我收到一条错误消息，指出`f`未定义。我尝试将`exec`线路更改为`exec cell in globals()`但没有帮助。

有没有办法做到这一点？另外，有没有更好的方法来编写`cell_magic`函数（例如我应该返回输出而不是打印它）？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T14:37:51.373

所以我通过查看 IPython 代码发现了这一点，特别是 IPython/core/magics/execution.py 有一些很好的提示。这是我的新模块

```
import tempfile
import ROOT
from IPython.core.magic import (Magics, magics_class, cell_magic)

@magics_class
class RootMagics(Magics):
  """Magics related to Root.

      %%rootprint  - Capture Root stdout output and show in result cell
  """

    def __init__(self, shell):
      super(RootMagics, self).__init__(shell)

  @cell_magic
  def rootprint(self, line, cell):
    """Capture Root stdout output and print in ipython notebook."""

    with tempfile.NamedTemporaryFile() as tmpFile:

      ROOT.gSystem.RedirectOutput(tmpFile.name, "w")
      ns = {}
      exec cell in self.shell.user_ns, ns
      ROOT.gROOT.ProcessLine("gSystem->RedirectOutput(0);")
      print tmpFile.read()

# Register
ip = get_ipython() 
ip.register_magics(RootMagics) 
```

请注意`Magics`类的使用和`shell`包含笔记本名称空间等内容的属性。这可以定期导入并且工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:03:34.410

如果我理解正确，magic/alias/user 命名空间是分开的。执行“导入”不会干扰魔术/别名命名空间。这就是为什么有 %load_ext 魔法的原因，但是你必须定义你的入口点。[R 魔法示例]。（[https://github.com/ipython/ipython/blob/master/IPython/extensions/rmagic.py#L617](https://github.com/ipython/ipython/blob/master/IPython/extensions/rmagic.py#L617)）。

另外，我建议将其视为[捕获魔术](https://github.com/ipython/ipython/blob/master/IPython/core/magics/execution.py#L1059)，它可以在没有临时文件的情况下捕获 stdout/err。

一旦这工作，您还可以将您的扩展添加到[扩展索引](https://github.com/ipython/ipython/wiki/Extensions-Index)

# oracle - 多值属性和外键

> ID：15034936
> 
> 赞同：1
> 
> 时间：2013-02-22T23:26:20.210
> 
> 标签：oracle

阅读了很多帖子，但仍然感到困惑..所以，

我想做这样的事情——一个用户有多个朋友。例如用户

user_id->U1 , frdlist->U2,U3,U4

因此，为此我有一个名为 user 的表，其 user_id 作为主键，一个名为 frdlist 的表具有 user_id 和 frd_ids，我很困惑如何制作 frdlist 表。在这个 user_id 和 frds_ids 列中，两者都是外键，引用父表（user）的同一列（user_id）。

这个怎么做。请帮忙。我正在使用 oracle 11g 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:11:55.637

很简单。您的架构将是

```
user (
    user_id       PRIMARY KEY
  , first_name
  , middle_name
  , last_name
  ....
)

frduser (
    friendshipid  PRIMARY KEY
  , user_id       FOREIGN KEY REFERENCES user(user_id)
  , friend_id     FOREIGN KEY REFERENCES user(user_id) 
```

`(user_id, friend_id)`对of的唯一约束`frduser`是不够的，因为它将寻找值的唯一组合，而不是唯一值。您将需要编写一个 DML 触发器`frduser`，以防止任何重复的用户朋友值的插入/更新/删除。

# requirejs - RequireJS 文本插件将“.js”添加到文件名但在同一个域上

> ID：15034942
> 
> 赞同：4
> 
> 时间：2013-02-22T23:26:56.400
> 
> 标签：requirejs, requirejs-text

我使用文本插件优化了 RequireJS 设置。我似乎遇到了添加到我的模块中的“.js”文件名。我正在 Firefox 17 中查看这个。

我读了这篇文章，但我很确定我所有的文件都在同一个域上。 [为什么 requirejs 试图将 '.js' 附加到使用 !text 插件加载的 .jst 模板文件？](https://stackoverflow.com/questions/11358320/why-is-requirejs-trying-to-append-a-js-to-jst-template-files-that-are-loaded)

我的文件位于

*   dev-img4.x.com/m/j/mains/main-article.js
*   dev-img4.x.com/m/j/views/logged_out.js
*   dev-img4.x.com/m/j/views/templates/logged_out.html

文本插件尝试查找 dev-img4.x.com/m/j/views/templates/logged_out.html.js，这对我来说没有意义，因为看起来我所有的依赖项都在同一个域上. 我不确定文本插件如何认为存在跨域问题。

main-article.js

```
 require.config({
        baseUrl: 'dev.x.com/m/j',
        paths: {
            'jquery': 'dev.x.com/m/j/lib/jquery',
            'backbone': 'dev.x.com/m/j/lib/backbone',
            'underscore': 'dev.x.com/m/j/lib/underscore',
            'text': 'dev.x.com/m/j/lib/text'
        },
        shim: {
            'underscore': {
                exports: '_'
            },
            'backbone': {
                deps: ['jquery', 'underscore'],
                exports: 'Backbone'
            }
        },
        urlArgs: 'buildlife=1',
        waitSeconds: 15
    });

    require(['jquery', 'modules/site', 'underscore', 'backbone', 'views/logged_out'], function($, site, _, Backbone, loggedOutView) {
            //This function will be called when all the dependencies
            //listed above are loaded. Note that this function could
            //be called before the page is loaded.
            //This callback is optional.

            var loggedOutBar = new loggedOutView();

            /* Initialize code */
            $(document).ready(function() {
                /* sitewide code */
                site.init();

                $('.rslogo').after(loggedOutBar.render());
            });
        }
    ); 
```

登录的_out.js

```
 define(['module', 'jquery', 'underscore', 'backbone', 'text!views/templates/logged_out.html'], function(module, $, _, Backbone, loggedOutTemplate) {
        /* Create a view of the logged out bar */

        var loggedOutView = Backbone.View.extend({
            className: 'loginbar',
            initialize: function() {

            },
            template: _.template(loggedOutTemplate),
            render: function() {

                this.$el.html(this.template);

                return this; /* Allow method chaining after render */
            }
        });

        return loggedOutView;
    }); 
```

登出.html

```
 <a href="#" class="signin">Sign In</a> | <a href="#" class="signup">Sign Up</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:38:17.367

使用相对网址，您所需要的只是

```
baseUrl: '/j/' 
```

然后对于配置中的每个 js 文件，您只需要从 baseUrl 恢复

```
jquery: lib/jquery 
```

如果您在 dev.x 的子域上使用 require，这将防止您可能遇到的任何跨域问题

此外，如果您正在访问 www.dev.x（dev.x 的子域），这可能会导致附加“.js”的问题。用户“liorix”在上一篇文章中发现了此问题：[https ://stackoverflow.com/a/10618426/404097](https://stackoverflow.com/a/10618426/404097)

如果这是问题，使您的 baseUrl 相对将解决您的问题。

# java - 使用 Ruby to Java Bridge (RJB) 如何访问具有通用签名的 Scala 类？

> ID：15034943
> 
> 赞同：2
> 
> 时间：2013-02-22T23:26:57.557
> 
> 标签：java, ruby, scala, rjb

例如，尝试从 Ruby 访问适用于 Kafka 的 Scala/Java API，（在 require 和 Rjb::load 步骤之后）

```
ProducerData = Rjb::import('kafka.javaapi.producer.ProducerData')
topic = "test"
msg = "message"
producer_data = ProducerData.new_with_sig('Ljava.lang.String;Ljava.lang.String;',topic,msg) 
```

在 Kafka API 中，ProducerData 方法定义为：

```
class ProducerData[K, V](private val topic: String,
                     private val key: K,
                     private val data: java.util.List[V]) 
```

运行文件后的结果是：

```
./test-rjb.rb:30:in `new_with_sig': Constructor not found (RuntimeError) 
```

如何正确访问具有泛型类型签名的类？

# regex - 尝试仅删除非 ASCII 字符

> ID：15034944
> 
> 赞同：9
> 
> 时间：2013-02-22T23:26:58.333
> 
> 标签：regex, linux, sed, tr

我正在尝试操作文本文件并从文本中删除非 ASCII 字符。我不想删除该行。我只想删除有问题的字符。我正在尝试使以下表达式起作用：

`sed '/[\x80-\xFF]/d'`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-23T00:30:21.407

对于特定版本的 sed，建议的解决方案可能会失败，例如 GNU sed 4.2.1。

使用`tr`：

```
tr -cd '[:print:]' < yourfile.txt 
```

这将删除任何不在`[\x20-\x7e]`.

如果你想保留例如换行符，只需添加`\n`：

```
tr -cd '[:print:]\n' < yourfile.txt 
```

如果您真的想保留*所有*ASCII 字符（甚至是控制代码）：

```
tr -cd '[:print:][:cntrl:]' < yourfile.txt 
```

这将删除任何不在`[\x00-\x7f]`.

# drag-and-drop - 是否可以对 dataTransfer.files 支持进行功能测试？

> ID：15034945
> 
> 赞同：3
> 
> 时间：2013-02-22T23:26:59.553
> 
> 标签：drag-and-drop, modernizr, browser-detection, feature-detection

[Modernizr](http://modernizr.com/)提供了一种检测浏览器是否支持拖放的方法，但它无法充分判断浏览器是否支持文件拖放。是否可以对此进行功能测试？或者它仍然需要浏览器嗅探？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T14:16:21.227

用于`Modernizr.filereader`检测

dataTransfer 是[不可检测](https://github.com/Modernizr/Modernizr/wiki/Undetectables)的因素之一，因为并非所有浏览器都会公开它（如 webkit），因此检测 FileReader 是否应该这样做。而且我不记得它在哪个浏览器中（android / safari等），但是文件被暴露在`target.files`而不是`dataTransfer.files`这样检测对象是否在触发事件中实际存在是最好的。

```
if( typeof(e.dataTransfer) !== 'undefined' && typeof(e.dataTransfer.files) !== 'undefined' ) {
    files = e.dataTransfer.files;
} else if( typeof(e.target.files) !== 'undefined') {
    files = e.target.files;
} else {
    //Bail out
} 
```

# angularjs - AngularJS：使用控制器构造函数或链接函数？或者：我们真的需要链接功能吗？

> ID：15034948
> 
> 赞同：1
> 
> 时间：2013-02-22T23:27:06.760
> 
> 标签：angularjs

定义新指令时，链接函数有什么重点吗？通常一个指令定义了一个控制器类，这个类可以通过 $scope 和 $element 注入。因此，我们可以将所有观察者和（单击）处理程序放在该控制器构造函数中。

是的，我知道有一些特定的参数发送到链接函数（即 attrs，所需的控制器），但我想知道对于“标准”的东西是否需要它

非常感谢您的任何想法 Lior

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:33:53.843

使用指令控制器的要点是其他指令可以请求该控制器并与您交互。如果你在链接函数中做这一切，其他指令就不能像那样交互。大多数指令不需要控制器，但有时它非常有用，ngModelController 就是一个很好的例子。你可以在这里阅读更多关于它的信息[http://docs.angularjs.org/#!/api/ng.directive:ngModel.NgModelController](http://docs.angularjs.org/#!/api/ng.directive:ngModel.NgModelController)

因此，如果不需要，不要将所有内容都放在指令控制器中。指令的核心应该放在链接函数中，除非你知道——以及为什么——你应该把它放在控制器或编译函数中。

# php - 使用 ajax 向控制器提交值时使用 Mage 寄存器

> ID：15034949
> 
> 赞同：0
> 
> 时间：2013-02-22T23:27:06.467
> 
> 标签：php, ajax, magento

我正在尝试从控制器传递数据以在视图中使用。正在发生的事情是我正在为用户选择的产品（尺寸和颜色）获取超级属性，所有这些都被序列化并传递给我获得产品对象的控制器。然后，我可以从这个对象获取可配置的 sku，然后我需要将其回显到设计 view.phtml 文件中。

控制器中的功能如下所示：

```
if($product = $this->_initProduct())
        {
           $config = $product->getSku();
          // if I echo $config here using firephp I can see that this is correct value
           Mage::register('config_product', $config);
          // I am hoping to set it as a global variable here that 
          //  I can then retrieve on the success of the ajax function
        } 
```

在 phtml 中，我有类似的东西可以将表单值发送到该控制器：

```
 var data = $("#product_addtocart_form").serialize();
            $.ajax({
                url: "/locator/item/index",
                data: data
            }).done(function(){
                <?php $currentProduct = Mage::registry('config_product'); 
                 // Why does this return blank??
                 ?>
                 <?php Mage::helper('firephp')->send( $currentProduct ); ?>                    
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:45:18.203

PHP 和 JavaScript 不能这样一起使用。PHP 用于 Web 服务器，JavaScript 安装在客户端浏览器（IE、Chrome 等）中

在您的控制器中，您需要回显一个 JSON 编码的字符串，并在您的 javascript 中将 dataType 添加到 .ajax 函数：

```
 $.ajax({
            url: "/locator/item/index",
            data: data,
            dataType: 'json'
        },function(returnedData) {
            console.log(returnedData);                   
        }); 
```

并在浏览器中打开 js 控制台以检查返回的数据。

# node.js - node.js 集群模块 + unix 套接字

> ID：15034956
> 
> 赞同：1
> 
> 时间：2013-02-22T23:27:47.687
> 
> 标签：node.js, sockets, unix, cluster-computing

我正在尝试使用节点的内置集群模块，并且在使用端口时，一切正常。但是，当尝试使用 unix 套接字时，事情并没有那么好：

错误：错误：ENOENT，取消链接“/tmp/socket.sock”

它从不创建这个文件......但是，当不使用 unix 套接字时，一切正常。

作为参考，我的代码如下所示： [https ://github.com/jmonster/node-clustrap](https://github.com/jmonster/node-clustrap)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:17:24.200

这在最新的 node-clustrap 中得到了解决——问题是在每个子进程中取消链接套接字，而不是只在主进程中执行一次。希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T15:59:22.843

我发现问题是我在无条件创建之前一直在取消链接套接字。

master 成功创建了 socket，然后每个 worker 都在删除它！

我将`unlink`调用移到仅适用于 master 修复它的代码部分。

# rest - 小服务程序上下文

> ID：15034963
> 
> 赞同：0
> 
> 时间：2013-02-22T23:28:20.103
> 
> 标签：rest, servlets, spring-mvc

我有以下 web.xml 代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class> org.springframework.web.servlet.DispatcherServlet </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>rest.service</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>*.abc</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.form</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
  </welcome-file-list>
  <jsp-config>
  <taglib>
       <taglib-uri>wcm_rates</taglib-uri>
       <taglib-location>/WEB-INF/lib/wcm-rates.tld</taglib-location>
</taglib>
  </jsp-config>  
</web-app> 
```

在 Spring MVC servlet 上下文中，我添加了一些属性。我期望在调用任何 REST URL 时，这些属性将在 servlet 上下文中可用。

但令我惊讶的是，当调用 REST Url 时，这些属性并没有出现。

我将属性添加为`servletContext.setAttribute(xmlFile.getName(), map)`；并拉为`request.getSession().getServletContext().getAttribute("test.xml");`

我已经验证我使用相同的属性名称来存储和拉取。

有人可以帮助我，以便我可以在 Spring MVC 和 REST 之间共享属性吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:46:12.473

可以直接从request中获取ServletContext，为什么要从session中获取

**从改变**

```
request.getSession().getServletContext().getAttribute("test.xml") 
```

**至**

```
 request.getServletContext().getAttribute("test.xml") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-10T05:33:33.897

您可以从以下范围之一设置/获取属性：

1.  要求
2.  会议
3.  应用

如果您正在使用`servletContext.setAttribute(xmlFile.getName(), map);`它，则意味着您正在添加到应用程序范围。因此，要检索属性值，请使用`servletContext.getAttribute("test.xml");`

查看以下链接了解更多详情，

[https://www.studytonight.com/servlet/attribute.php](https://www.studytonight.com/servlet/attribute.php)

# javascript - 从 Javascript 更改 CSS 属性

> ID：15034968
> 
> 赞同：0
> 
> 时间：2013-02-22T23:28:45.020
> 
> 标签：javascript, css

![我想使用 Javascript 将填充和顶部、宽度更改为 0](../Images/a23cacc15630b651108581f5e0683286.png)

无法做到这一点。

一直在尝试这样的事情：

```
 document.getElementById("sharebar").innerHTML="";  //This works
 alert(document.getElementById("sharebar").toString());
document.getElementById("sharebar").setAttribute("width", "0px"); //To remove formatting but this doesnt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:31:17.323

您正在尝试设置元素的属性，而不是其样式。要更改样式，请执行以下操作：

```
document.getElementById("sharebar").style.width = "0px" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T23:30:47.350

```
document.getElementById("sharebar").setAttribute("style", "width:0px;"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T23:31:30.903

```
document.getElementById("sharebar").style.width = "0"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T23:33:07.050

另一种方法是：

`document.getElementById("sharebar").style.width = "0px";`

对于具有类似 z-index 的元素，请尝试以下操作：

`document.getElementById("sharebar").style.zIndex = "10";`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T23:37:33.793

如果您尝试删除样式：

```
document.getElementById("sharebar").style.width = null; 
```

或者如果你只关心支持 IE9+

```
document.getElementById("sharebar").style.removeProperty('width'); 
```

# .net - 在反射期间使用 LINQ 访问基础类型

> ID：15034972
> 
> 赞同：0
> 
> 时间：2013-02-22T23:29:18.533
> 
> 标签：.net, linq, reflection

我有自己的小应用程序，用于在[http://projecteuler.net](http://projecteuler.net)上实现问题的解决方案。我有一个名为的基类`ProblemBase`，其中包含有关问题的元信息，例如它们的 id、名称和描述文本以及求解器函数。然后每个问题的实现都派生自这个类。

现在实现的列表变得非常大，所以我没有手动维护解决方案容器，而是第一次走进了反射领域。这个想法是找到从`ProblemBase`我的程序集中派生的所有类型，并将它们实例化到应用程序的问题枚举中（`Problems`在下面的代码中），以便我可以从我的 GUI 与它们进行交互。这是我当前的实现：

```
 private void FindProblemTypes()
    {
        var problemBaseType = typeof(ProblemBase);
        var problemTypes = (from t in Assembly.GetAssembly(problemBaseType).GetTypes()
                            where t != problemBaseType && problemBaseType.IsAssignableFrom(t)
                            select t).ToList();

        Problems = new ObservableCollection<ProblemBase>();
        foreach (var problemType in problemTypes)
        {
            Problems.Add((ProblemBase)Activator.CreateInstance(problemType));
        }

        Problems = new ObservableCollection<ProblemBase>(Problems.OrderBy(t => t.Id));
    } 
```

它工作正常，但我想清理一下。现在，我首先创建派生类型的列表，然后将它们实例化到我的集合中，然后再创建另一个集合以按类型对类型进行排序。我想要做的是直接从第一个 LINQ 集合创建我的 ObservableCollection。我只想添加`orderby t.Id`LINQ 语句，但由于类型集合包含`System.Type`对象而不是`ProblemBase`对象，因此该属性不可用，并且我无法在 LINQ 查询中将变量转换为我的基础对象。我假设这是因为我请求的类型信息在编译时是未知的，但是有没有其他方法可以将其视为`ProblemBase`查询中的对象？还是我必须坚持我所拥有的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:50:52.573

```
var problemTypes = (from t in Assembly.GetAssembly(problemBaseType).GetTypes()
    where t != problemBaseType && problemBaseType.IsAssignableFrom(t)
    select (ProblemBase)Activator.CreateInstance(t)).ToList().OrderBy(t => t.Id); 
```

这行得通吗？您仍然需要 AddRange 才能将其放入您的收藏中，但这不会遍历它们，所以这很好。我在 LINQ 方面不是最好的，所以你可能想测试一下。

我认为您永远无法将“orderby id”塞入原始查询中，因为届时不会创建项目。

# security - 更改 Joomla 管理员 URL

> ID：15034980
> 
> 赞同：11
> 
> 时间：2013-02-22T23:30:04.010
> 
> 标签：security, url, joomla, configuration, joomla3.0

**更新：**

由于有人问过这个问题，[Joomla StackExchange](https://joomla.stackexchange.com/)已设置并且[存在相同的问题，](https://joomla.stackexchange.com/questions/589/renaming-of-administrator-directory)请对该问题添加任何答案或评论

**原来的：**

我正在为一个相当大的新客户端使用 Joomla 3.0.3，安全性是必须的。因此，我决定尝试更改管理员 URL，通常

```
example.com/administrator 
```

变成

```
 example.com/newadminurl 
```

原因是如果文件夹不在潜在黑客所期望的位置，这是他们甚至可以尝试其他任何东西之前的第一个障碍。

但是，现在这意味着每当我访问新 URL 时，它都会出现 403 错误。我尝试搜索是否有需要更改的全局配置设置，但在网络或 Joomla 网站上找不到任何内容。任何人都知道如何在源代码中进行深入更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-25T10:49:03.200

**步骤 1**。在您的根目录中创建一个新目录（例如“newadminurl”）

**步骤 2**。在“newadminurl”目录中创建一个 index.php 文件。

```
$admin_cookie_code="3429020892";
setcookie("JoomlaAdminSession",$admin_cookie_code,0,"/");
header("Location: /administrator/index.php");
?> 
```

**步骤 3**。将此添加到您真正的 Joomla 管理员目录的 .htaccess 中

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/administrator
RewriteCond %{HTTP_COOKIE} !JoomlaAdminSession=3429020892
RewriteRule .* - [L,F] 
```

**说明**：

现在，您需要在打开“管理员”路径之前打开“ [http://yoursite.com/newadminurl/ ”。](http://yoursite.com/newadminurl/)在这里，我们创建了一个在会话结束时过期并重定向到实际管理页面的 cookie。在您没有打开您的秘密链接之前，您的实际“管理员”路径是无法访问的。

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T05:29:23.167

虽然有一些黑客可以做到这一点，但它们引入了新的安全问题，如 Joomla！核心不是以这种方式工作的。

事实上，在核心和 3rd 方扩展和模板中，从`/administrator`.

保护您的网站的最佳做法是：

1.  保留您的 Joomla！安装最新（最常见的原因是安装过时）
2.  不要破解核心文件，如果您需要额外的功能，请复制核心组件并扩展它，而不是核心。
3.  添加`realm`密码`/administrator`
4.  `/administrator`网址上的一个秘密词，例如`/administrator/?s3cr3tpa55w0rd`
5.  仅允许选定 IP 地址访问的 ip 白名单`/administrator`
6.  使用唯一且强密码
7.  即使与重要的其他人也不要共享密码...
8.  在您的站点上制定密码策略。
9.  将经过测试的定期站点备份保存在服务器外的存储位置。
10.  运行文件扫描程序以帮助您检测黑客攻击，以便您了解最后一次良好的回馈被带走的地方。

您可以在[Joomla!的](http://extensions.joomla.org/)[访问和安全](http://extensions.joomla.org/extensions/access-a-security)部分找到为您执行一项或多项操作的扩展程序！[扩展目录 (JED)](http://extensions.joomla.org/)，对于云或其他存储的集成备份，您无法通过[Akeeba Backup](http://extensions.joomla.org/extensions/access-a-security/site-security/backup/1606)（与我的时间成本相比，我个人使用 Pro 版本的成本很小）。

事实上， [Akeeba 的 Admin Tools Pro](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection/16363)（包含在他们的任何订阅中）也通过它的 WAF（Web 应用程序防火墙）提供了该列表中的大部分功能。唯一没有涉及的领域是[密码管理](http://extensions.joomla.org/extensions/access-a-security/site-security/password-management)，其中有几种可用的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T00:19:36.783

核心和第三方扩展中可能存在各种依赖项，这些依赖项将对管理路径进行硬编码，即使有平台变量可以帮助实现这一点。

我建议您改为配置您的 .htaccess 以防止公开查看您的管理员文件夹，并将访问权限仅限于批准的 IP 地址。这将阻止他们访问管理文件夹，但当然不能防止不需要直接访问的攻击（例如，某些第三方应用程序从前端为组件调用管理文件夹中的代码）。

*注意：这位于您文件夹中的 .htaccess 文件中，`administrator`而不是站点根目录中的 .htaccess 中，即`[siteroot]/administrator/.htaccess`*

以下是您可以配置的 .htaccess 示例：

```
ErrorDocument 403 http://www.your-ip-is-not-allowed-to-access-this-section.com
Order deny,allow
Deny from all
Allow from X.X.X.X 
```

如果`X.X.X.X.`您要允许管理部分的 IP 地址在哪里。您可以使用多行指定多个地址`Allow from X.X.X.X`。

# android - 安卓付费和免费应用

> ID：15034982
> 
> 赞同：1
> 
> 时间：2013-02-22T23:30:04.890
> 
> 标签：android, package, release

一个 android 应用程序源代码，即一个包名称可以用于免费和付费应用程序，源代码的唯一区别是一个标志吗？喜欢：

```
boolean APP_FREE = true;//for free verions
boolean APP_FREE = false;//non-for free verions 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:31:44.537

您所需要的只是一个不同的包名称。你甚至不需要一个任意的布尔标志。但是，您**必须**具有不同的包名称。

# css - 居中导航菜单

> ID：15034986
> 
> 赞同：-3
> 
> 时间：2013-02-22T23:30:16.313
> 
> 标签：css, menu, center

一直在尝试整理导航栏的居中位置，就在横幅（[链接](http://www.kolonel.net/shop)）上方。在这里浏览了一些解决方案，我已经使用自定义 CSS 来尝试某些变体，但仍然无法得到我想要的。简而言之，我只是想让菜单居中。我读过它必须是固定的宽度，但后来听说不是这样。希望解决方案是我能理解的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:44:51.587

您需要从样式表中删除一些 css 规则并添加一些规则 - 请参阅下面的 css 以获得所需的布局。

**CSS：**

```
#header #navigation {
    /*float: left;*/ /* remove this property*/
}
#header #navigation {
    background: none repeat scroll 0 center transparent;
    box-shadow: none;
    clear: none;
    /*float: right;*/ /* remove this property*/
    /*width: auto;*/ /* remove this property*/
    width: 285px; /* add width here to get the actual width of menu so we can make it center*/
} 
```

**看屏幕截图：**

![在此处输入图像描述](../Images/c7fbb84a64178ea894ce0550fd403f5e.png)

# c# - Linq 查询从对象 B 中获取与对象 A 具有相同名称和类型的属性

> ID：15034990
> 
> 赞同：1
> 
> 时间：2013-02-22T23:30:42.067
> 
> 标签：c#, .net, linq, reflection

我处于互操作场景中，因此我正在处理在不同程序集中使用的结构和类，因此转换是不够的，必须逐个字段手动进行，这非常无聊且容易出错.

所以我设计了一个复制大量简单字段/属性的函数，我只处理有问题的字段/属性。

当我仅对属性执行此操作时，它可以正常工作。但是我现在需要如何修复此`LiNQ`查询，以便能够从源对象中获取字段列表并将它们与目标对象上的属性连接起来。

下面的代码：

```
 var TypeOrig = pSource.GetType();
    var TypeDest = pTarget.GetType();
    var TypeString = typeof(System.String);

    var PropOrig = TipoOrig.GetFields(); // if it is GetProperties instead 
                                         // of GetFields works OK
    var PropDest = TipoDest.GetProperties();

    var QryPropVT =
      from
        POrig in PropOrig
      join PDest in PropDest
        on new
        {
            POrig.Name,
            POrig.FieldType
        } equals new
        {
            PDest.Name,
            PDest.PropertyType
        }
      where POrig.PropertyType.IsValueType || (POrig.PropertyType.Equals(TipoString))
      select new
      {
          PropO = POrig,
          PropD = PDest
      }; 
```

`Visual C# error: Error 2 The type of one of the expressions in the join clause is incorrect. Type inference failed in the call to 'Join'.`

编辑：我看到了价值注入器，但这就像使用死星杀死蚊子......[/编辑]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:57:03.757

您的 join 语句似乎正在创建 2 种不同的匿名类型，因为一种具有名为的属性`FieldType`，另一种具有名为 的属性`PropertyType`。LINQ 无法进行连接，除非两种类型具有完全相同的字段且顺序完全相同。[在这里找到了](http://www.codeproject.com/Articles/262949/Linq-Join-on-Mutiple-columns-using-Anonymous-type)一篇很棒的文章。

在这种情况下，您需要为您的加入执行此操作：

```
join PDest in PropDest
        on new
        {
            Name = POrig.Name,
            JoinType = POrig.FieldType
        } equals new
        {
            Name = PDest.Name,
            JoinType = PDest.PropertyType
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:33:53.030

我想你可能会在 AutoMapper 之后。[http://automapper.codeplex.com/](http://automapper.codeplex.com/)或值注入器[http://valueinjecter.codeplex.com/](http://valueinjecter.codeplex.com/)

**值注入器示例：**

```
myObject.InjectFrom(anyOtherObject);

//inject from multiple sources
a.InjectFrom(b,c,d,e);

//inject using your own injection
a.InjectFrom<MyInjection>(b); 
```

# python - 如何在 matplotlib 中使用 plotfile？

> ID：15034996
> 
> 赞同：2
> 
> 时间：2013-02-22T23:31:13.633
> 
> 标签：python, matplotlib

我正在尝试使用`plotfile`matplotlib的功能绘制一些数据，即

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from matplotlib.pyplot import *
from numpy import *

x = arange(0,10,0.001)
y = sin(x)
savetxt("test.dat",column_stack((x,y)))

plotfile("test.dat",(0,))
show() 
```

这给了我以下错误

```
ValueError: invalid literal for float(): 1.000000000000000021e-03 9.99999833333341681 
```

使用该`genfromtxt()`函数可以完美地处理生成的数据，所以我不明白为什么会出现错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:46:12.310

默认情况下[`numpy.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html#numpy.savetxt)，使用单个空格作为列分隔符。

但是，默认分隔符[`matplotlib.pyplot.plotfile`](http://matplotlib.org/api/pyplot_api.html?highlight=plotfile#matplotlib.pyplot.plotfile)是逗号。

一种解决方法是在对 的调用中指定一个逗号作为列分隔符`savetxt`，例如：

```
import numpy as np 
np.savetxt("test.dat", np.column_stack((x, y)), delimiter=',') 
```