# StackOverflow 问答 15683000-15683999

# javascript - 带有 Backbone 的详细信息屏幕上的 Boostrap 选项卡 URL

> ID：15683017
> 
> 赞同：0
> 
> 时间：2013-03-28T13:22:20.887
> 
> 标签：javascript, backbone.js, twitter-bootstrap

我的 BackboneJS 应用程序有一个详细视图，例如一本书，它由诸如**editorial/book/edit/4**之类的 url 表示。Book 视图由几个标签组成，基于 TwitterBoostrap 标记，例如标签 General/Special/Admin for a Book。

如果我按照他们的文档中的规定使用 Boostrap 选项卡，例如

```
<li><a data-toggle="tab" href="#special">Special</a></li> 
```

然后一旦点击标签，地址栏中的 URL 就会失效，而不是 siteurl/editorial/book/edit/4#special，导航栏会显示 siteurl#special。

Q1：使用 Backbone/Boostrap 构建具有有效 url 的选项卡的最佳方法是什么？The next step I aim at is to make this view reloadable, eg so that when a tab is selected and user hits "Reload" in browser, at least same view is loaded, ideally - with latest tab selected.

Q2：理想的方式是什么 - 为所有详细信息屏幕及其选项卡构建一个路由器功能，或者每个选项卡拆分为几个路由器功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:29:44.803

我的建议是通过 JS 端处理导航。

**回答问题 1**

当用户单击选项卡时，在处理程序上使用主干导航功能：

```
app.navigate("siteurl/editorial/book/edit/4" + '#' + tabId, {trigger: true}); 
```

（此示例具有硬编码的 URL 路径，只需使用`document.URL`或其他满足您需求的功能即可）

**回答问题 2**

这将取决于您需要实现的逻辑以及该逻辑是否繁重。正如您在问题中所说的那样，每个选项卡都有不同的视图，我建议将逻辑拆分到一个路由器功能中，因为它们都适用于同一路径（例如 siteurl/editorial/book/edit/4），它们只是片段 URL 不同。

```
routes: {
  "siteurl/editorial/book/edit/4#:tabId":         "tab",
}
router.on("siteurl/editorial/book/edit/4#:tabId", function(tabId) {
  //Split your logic based on the tabId
}); 
```

# django - FeinCMS，如何访问 content_types 父对象的属性

> ID：15683024
> 
> 赞同：2
> 
> 时间：2013-03-28T13:22:31.347
> 
> 标签：django, feincms

因此，假设我有一个注册到 Page 的 content_type RichTextContent。

我可以在 RichTextContent content_type 的模板中呈现 Page 实例的属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:25:02.977

是的，所有内容实例都有`parent`属性，这指的是`Page`实例。

# android - Android将base64编码的字符串转换为图像视图

> ID：15683032
> 
> 赞同：25
> 
> 时间：2013-03-28T13:22:48.717
> 
> 标签：android, imageview, base64

我想将base64编码的字符串转换为位图，这样我就可以把它放在图像视图中，但是会出现错误

D/skia(7490): --- 解码器->解码返回假，位图返回空值

我的代码是：

```
byte[] imageAsBytes = Base64.decode(imageData);

image.setImageBitmap(BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length)); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-28T13:35:04.423

首先您必须检查要解码的字符串是否有效并且具有要解码的预期值，为此，您可以执行以下操作：

```
filePath= Environment.getExternalStorageDirectory()
                        + "/SaudiScore/temporary_holder.jpg";
Bitmap selectedImage =  BitmapFactory.decodeFile(filePath);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
selectedImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] byteArray = stream.toByteArray();
String strBase64=Base64.encodeToString(byteArray, 0); 
```

然后您可以解码刚刚编码的字符串并通过执行以下操作来获取图像：

```
byte[] decodedString = Base64.decode(strBase64, Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
image.setImageBitmap(decodedByte); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-07-14T10:29:12.377

```
byte[] decodedString = Base64.decode(mBase64string, Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0,decodedString.length);
mImageView.setImageBitmap(decodedByte); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-17T08:45:12.823

```
String base = "Base64 string values of some image";

byte[] imageAsBytes = Base64.decode(base.getBytes(), Base64.DEFAULT);

ImageView image = (ImageView) this.findViewById(R.id.imageView1);

image.setImageBitmap(BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length)); 
```

试试这个代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T09:09:31.277

```
 byte[] decodedString = Base64.decode(strBase64, Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
image.setImageBitmap(decodedByte); 
```

我正在使用上述解决方案。它总是返回错误，例如解码的 String 为 null，IllegalStateException .. 我所做的只是将其包装在 try catch 中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-19T07:53:30.920

这种方法可以帮助：

```
private void setExistImage(ImageView imageView, String base64String){
    if (!base64String.isEmpty()) {
        byte[] bytes = Base64.decode(base64String, Base64.DEFAULT);
        imageView.setImageBitmap(BitmapFactory.decodeByteArray(bytes, 0, bytes.length));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-16T15:19:18.110

> 将base64字符串解码/转换为图像

```
 imageBytes = Base64.decode(imageString, Base64.DEFAULT);
    Bitmap decodedImage = BitmapFactory.decodeByteArray(imageBytes, 0,imageBytes.length);
    image.setImageBitmap(decodedImage); 
```

# java - 更改数组中的值在传递给对象时不会更改值

> ID：15683033
> 
> 赞同：0
> 
> 时间：2013-03-28T13:22:50.043
> 
> 标签：java, arrays, object

我正在解决这个非常奇怪的问题，我希望有人可以向我解释原因。

我有这段代码通过套接字连接从文件传输数据。

```
 byte[] chunk = new byte[Constants.TRANSFER_CHUNK_SIZE];
    try (InputStream fileInputStream = new FileInputStream(sourceFile); BufferedInputStream buffFileInputStream = new BufferedInputStream(fileInputStream)) {
        while (offset < sourceFileSize) {
            int numBytes = buffFileInputStream.read(chunk, 0, Constants.TRANSFER_CHUNK_SIZE);
            Message chunkMessage = new Message(MessageType.SPM_TRANSFER_CHUNK, numBytes, null, chunk);
            this.sendMessage(chunkMessage);
        }
    } 
```

方法 sendMessage 没有做任何特别的事情，只是通过 ObjectOutputStream 发送对象：

```
private void sendMessage(Message message) {
    try {
       this.conOutputStream.writeObject(message);
       this.conOutputStream.flush();
    } catch (IOException ex) {
            ......
    }
} 
```

Message 类本身如下所示：

```
public class Message implements Serializable {

protected final MessageType type;
protected final int intValue;
protected final String stringValue;
protected byte[] data;
protected final long longValue;

public Message(MessageType type, int intValue, long longValue, String stringValue, byte[] data) {
    this.type = type;
    this.intValue = intValue;
    this.stringValue = stringValue;
    this.data = data;
    this.longValue = longValue;
}

................ 
```

}

当我在发送端打印出块数组时，数据正常，但在接收端我总是从第一个块接收数据，比如（只打印前三个字节）：

```
RC: 73 68 51
RC: 73 68 51
RC: 73 68 51
RC: 73 68 51
....... 
```

我已经知道的：

*   问题不在运输途中。
*   **在该while循环的每个循环中创建一个新数组可以解决这个问题（但是内存效率低，这就是我改变它的原因。）**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:26:57.770

```
public SyncPlaneMessage(MessageType type, int intValue, long longValue, String stringValue, byte[] data) {
    // ...
    this.data = data;
    // ...
} 
```

您正在保存对传入数组的引用。如果该数组在构造函数调用后发生更改，那么`this.data`. 这就是为什么创建数组的副本可以解决问题。

复制数组确实会占用更多内存，但您有什么选择？制作副本的正确位置至少是在构造函数中，而不是在`while`循环中。

```
this.data = Arrays.copyOf(data, data.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:43:11.440

终于找到了解决这个问题的办法。此问题是由序列化缓存引起的。**ObjectOutputStream 不会**发送相同的对象（即使已更改），如果它之前已发送到相同的流。

在发送每条消息之前重置**ObjectOutputStream**解决了我的问题，可能会有一些性能损失，但问题解决了。现在**ObjectOutputStream**总是发送新数据。

所以在我的例子中，我修改了方法 sendMessage()，所以它现在在发送消息对象之前重置**ObjectOutputStream 。**

```
private void sendMessage(Message message) {
    try {
       this.conOutputStream.reset();
       this.conOutputStream.writeObject(message);
       this.conOutputStream.flush();
    } catch (IOException ex) {
            ......
    }
} 
```

# jquery - jQuery ajax 自动完成与 PHP

> ID：15683038
> 
> 赞同：0
> 
> 时间：2013-03-28T13:23:03.070
> 
> 标签：jquery, database

我有一个 jquery 函数，它从数据库中获取数据并成功地将其显示为我的搜索框下方的国家列表。我想单击其中一个国家，然后用该国家/地区填充搜索框的值。

这是jQuery函数

```
<script>
$(document).ready(function() {
    $(".search").keyup(function() { 
    $('#result').html("looking for your country ...");
        var search = $("#search").val();
        $.get('search.php', { 'search': search }, 
        function(server_response) {
            $('#result').html(server_response);
            });
        });
    });
</script> 
```

我基本上需要 jquery 函数中的几行，它允许我单击`enter code here`国家并使用该值填充搜索输入。

感谢任何人的帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:02:53.017

很难说不知道你从服务器返回了什么......

请注意，我在这里做了很多假设。

如果是列表：

```
$('#result').on('click', 'li', function(e) {
    var clicked_value = $(this).text();
    $(".search").val( clicked_value );
}); 
```

如果它类似于选择选项：

```
$('#result').on('change', 'select', function(e) {
    var clicked_value = $(this).val();
    $(".search").val( clicked_value );
}); 
```

我没有以任何方式测试过这段代码，只是把它写下来。请让我知道这对你有没有用。

# arrays - as3 如何从移除的颈背体中移除图形

> ID：15683041
> 
> 赞同：0
> 
> 时间：2013-03-28T13:23:06.457
> 
> 标签：arrays, actionscript-3, for-loop, reset

我已将moviecCip 的多个实例附加到多个颈背主体，并有一个重置按钮将它们恢复到原始位置。当调用重置功能时，身体被重置并附有mc。问题是最初的 mc 仍然在舞台上冻结在调用重置时的位置。

```
private var brickGraphic:MovieClip = new Brick();
private var brickArray:Array;

private function setUp():void
{
    var brickType:CbType = new CbType();
    var w:int = stage.stageWidth;
var h:int = stage.stageHeight;
var ag:int = stage.stageHeight - 58;// height ofarea above ground
    brickArray = new Array  ;

    //wall
    for (var i:int = 0; i < 10; i++)
    { 
    var brick:Body = new Body(BodyType.DYNAMIC);
    var brickShape:Polygon = new Polygon(Polygon.box(10,25));
    var brickGraphic:MovieClip = new Brick();
    brickGraphic.width = 10;
    brickGraphic.height = 25;
    addChild(brickGraphic);
    brickGraphic.cacheAsBitmap = true;
    brick.shapes.add(brickShape);
    brick.position.setxy(450, ((ag ) - 30 * (i + 0.5)));
    brick.angularVel = 0;
    brick.shapes.at(0).material.elasticity = .5;
    brick.shapes.at(0).material.density = 150;
    brick.cbTypes.add(brickType);
    brick.space = space;
    brickGraphic.stop();

    brick.userData.sprite = brickGraphic;
    brick.userData.sprite.x = brick.position.x;
    brick.userData.sprite.y = brick.position.y;

    this.brickArray.push(brick);
    }
}

private function reset():void
{
    space.clear();
    setUp();
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:28:27.683

添加一条语句，将链接的 MovieClip 从这些颈背主体中删除到您的`reset()`函数中。我希望这是您需要的：

```
private function reset():void
{
    if (contains(brick.userData.sprite)) removeChild(brick.userData.sprite);
    space.clear();
    setUp();
} 
```

# javascript - jQuery 选项卡小部件显示问题

> ID：15683046
> 
> 赞同：0
> 
> 时间：2013-03-28T13:23:17.470
> 
> 标签：javascript, html, css

我在渲染 jQuery 选项卡小部件时遇到了困难。在[这个](http://jsfiddle.net/cvh2013/JWgRB/1/)小提琴中，您将看到两个图像。如果您单击专业顾问图像，则会显示一个选项卡小部件。如果单击 Industry 小部件，则会呈现一个 jQuery 模式对话框。

问题在于标签小部件的显示方式 - 它应该在图像下方的区域中整齐地打开，模态对话框也是如此。我不确定这是否是 CSS 问题（我尝试以各种方式设置 #tabs 元素的样式但没有成功）或者我是否需要重新调整我的 s （我尝试将 #tabs div 放入专业顾问 div没有成功）。

**HTML**

```
<a href="#" id="professional-advisers-image">
    <div class="circle hovershadow advisers advisers-box-shadow text">Professional
        advisers</div>
</a>
<a href="#" id="industry-image">
    <div class="circle hovershadow industry industry-box-shadow">Industry</div>
</a>

<div id="tabs">
<ul>
    <li><a href="#tabs-1">Law firms</a>
    </li>
    <li><a href="#tabs-2">Accounting and audit firms</a>
    </li>
    <li><a href="#tabs-3">Management consultants and economists</a>
    </li>
    <li>
        <button id="closeTabs">X</button>
    </li>
</ul>
<div id="tabs-1">
    <p>Law firm text goes here</p>
</div>
<div id="tabs-2">
    <p>Accounting and audit firm text goes here</p>
</div>
<div id="tabs-3">
    <p>Management consultants and economists text goes here.</p>
</div>
</div>
<div id="industry-dialog" class="dialog" title="Industry">Industry text goes here</div> 
```

**Javascript**

```
$("#tabs").tabs().hide();
$("#professional-advisers-image").click(function () {
$("#tabs").toggle();
});

$("#closeTabs").click(function () {
$("#tabs").hide();
});

$("#industry-dialog").dialog({
autoOpen: false
});
$("#industry-image").click(function () {
$("#industry-dialog").dialog("option", "modal", true);
$("#industry-dialog").dialog("option", "height", "auto");
$("#industry-dialog").dialog("option", "width", 600);
$("#industry-dialog").dialog("open");
}); 
```

**CSS**

```
.circle {
width: 220px;
height: 220px;
border-radius: 50%;
border: 2px solid #fff;
float: left;
display: inline-block;
/* text styling for circles - see also the .text style below */
font-size: 35px;
color: #FFF;
line-height: 220px;
text-align: center;
font-family: Ubuntu, sans-serif;
}
#dialog #tabs {
font-family:'Istok Web', sans-serif;
font-size: 14px;
line-height: 1.8em;
}
.advisers {
background: #5E2750;
margin-left: 28%;
margin-right: 13%;
}
.advisers-box-shadow {
box-shadow: 0px 0px 1px 1px #5E2750
}
.industry {
background: #DD4814;
}
.industry-box-shadow {
box-shadow: 0px 0px 1px 1px #DD4814
}
.hovershadow:hover {
box-shadow: 0px 0px 4px 4px #AEA79F
}
.text {
/* used by professional advisers circle */
line-height: 40px;
padding-top: 70px;
height: 150px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:31:40.823

在您的圈子之后尝试清除 div：

[http://jsfiddle.net/JWgRB/2/](http://jsfiddle.net/JWgRB/2/)

```
<a href="#" id="professional-advisers-image">
    <div class="circle hovershadow advisers advisers-box-shadow text">Professional
        advisers</div>
</a>
<a href="#" id="industry-image">
    <div class="circle hovershadow industry industry-box-shadow">Industry</div>
</a>

<div style="clear: both;"></div>

<div id="tabs"> 
```

# php - 如何一键更新各种输入字段？

> ID：15683047
> 
> 赞同：0
> 
> 时间：2013-03-28T13:23:19.313
> 
> 标签：php, e-commerce

如果我的问题问得不够清楚或问题中的措辞模棱两可，我深表歉意。

我目前正在为电子商务网站编写购物车，我一直在使用教程来帮助我进入当前阶段，但现在我被卡住了。

以下是允许客户更改数量的特定行以及旁边出现的“更改”按钮。

```
<form action="cart.php" method="post">
<input name="quantity" type="text"  class="form-element text-element form-element-small" value="' . $each_item['quantity'] . '" size="1" maxlength="2" />
<input name="adjustBtn' . $item_id . '" type="submit" value="change" />
<input name="item_to_adjust" type="hidden" value="' . $item_id . '" />
</form> 
```

上面的代码是 $cartOutput 的一部分——稍后会在 DIV 中回显。

以下是我尝试创建的用于更新所有数量的按钮，但现在它所做的只是刷新页面。

```
<form action="cart.php" method="post">
<input class="btn sub-btn" name="adjustBtn' . $item_id . '" type="submit" value="Update">Update Cart</input>
<input name="item_to_adjust" type="hidden" value="' . $item_id . '" />
</form> 
```

从字面上看，这方面的任何帮助都会很棒！

编辑：

这是第一段代码来自的完整 php 块：

```
<?php 

$cartOutput = "";
$minicartOutput = "";
$cartTotal = "";
$pp_checkout_btn = '';
$product_id_array = '';
if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1) {
    $cartOutput = "<h2 align='center'>Your shopping cart is empty</h2>";
    $minicartOutput = "<p>You have no items in your cart</p>";
} else {
    // Start PayPal Checkout Button
    $pp_checkout_btn .= '<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_cart">
    <input type="hidden" name="upload" value="1">
    <input type="hidden" name="xxxxxxxxx" value="xxxxxxxxxx">';
    // Start the For Each loop
    $i = 0; 
    foreach ($_SESSION["cart_array"] as $each_item) { 
        $item_id = $each_item['item_id'];
        $sql = mysql_query("SELECT * FROM products WHERE id='$item_id' LIMIT 1");
        while ($row = mysql_fetch_array($sql)) {
            $product_name = $row["product_name"];
            $price = $row["price"];
            $shade = $row["shade"];
            $details = $row["details"];
        }
        $pricetotal = $price * $each_item['quantity'];
        $cartTotal = $pricetotal + $cartTotal;
        setlocale(LC_MONETARY, "en_US");
        $pricetotal = money_format("%10.2n", $pricetotal);
        // Dynamic Checkout Btn Assembly
        $x = $i + 1;
        $pp_checkout_btn .= '<input type="hidden" name="item_name_' . $x . '" value="' . $product_name . '">
        <input type="hidden" name="amount_' . $x . '" value="' . $price . '">
        <input type="hidden" name="quantity_' . $x . '" value="' . $each_item['quantity'] . '">  ';
        // Create the product array variable
        $product_id_array .= "$item_id-".$each_item['quantity'].","; 
        // Dynamic table row assembly
        $minicartOutput .= '<div class="form shopping-cart-form">

                                                        <form id="update_cart_form" method="post" action="/cart.php"  >

                                <ul class="listing cart-ul quick-cart-ul">
                                                            <li class="listing-li cart-li quick-cart-li first-li" data-quantity="1" data-id="149"> 
                                    <div class="box cart-item-box"> 
                                        <fieldset class="form-data-group">
                                            <legend class="form-legend">' . $product_name . '</legend>
                                            <dl class="meta-listing cart-item-dl">
                                                <dt class="meta-listing-dt cart-item-dt">Quantity</dt>
                                                <dd class="meta-listing-dd cart-item-dd">' . $each_item['quantity'] . '</dd>
                                                <dt class="meta-listing-dt cart-item-dt quick-cart-item-dt-price hide-me"><!--Price--></dt>
                                                <dd class="meta-listing-dd cart-item-dd quick-cart-item-dd-price">' . $pricetotal . '</dd>
                                            </dl>
                                            <div class="related cart-item-related">
                                                <div class="media img-media cart-item-img-media">
                                                    <figure>

                                                        <img width="56" height="56" src="../uploads/inventory/' . $item_id . '.jpg" alt="' . $product_name . '" />                                                      
                                                                                                            </figure>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </li>

                                                        </ul>
                                                        </form>';
        $cartOutput .= '<div class="form shopping-cart-form">
                                <form id="update_cart_form" method="post" action="/cart.php"  >

                            <ul class="listing cart-ul">
                                                            <li class="listing-li cart-li first-li">
                                    <div class="box cart-item-box"> 
                                        <fieldset class="form-data-group">
                                            <legend class="form-legend">' . $product_name . '</legend>
                                            <dl class="meta-listing cart-item-dl cart-item-dl-price">
                                                <dt class="meta-listing-dt cart-item-dt">Price</dt>
                                                <dd class="meta-listing-dd cart-item-dd cart-item-dd-price">' . $pricetotal . '</dd>
                                            </dl>
                                            <dl class="meta-listing cart-item-dl">
                                                <dt class="meta-listing-dt cart-item-dt">Shade</dt>
                                                <dd class="meta-listing-dd cart-item-dd">' . $shade . '</dd>
                                                <dt class="meta-listing-dt cart-item-dt">Quantity</dt>
                                                <dd class="meta-listing-dd cart-item-dd">
                                                     <form action="cart.php" method="post">
                                                        <input name="quantity" type="text"  class="form-element text-element form-element-small" value="' . $each_item['quantity'] . '" size="1" maxlength="2" /><input name="adjustBtn' . $item_id . '" type="submit" value="change" /><input name="item_to_adjust" type="hidden" value="' . $item_id . '" /></form> 
                                                </dd>
                                            </dl>
                                                <form action="cart.php" method="post"><input name="deleteBtn' . $item_id . '" class="form-label remove-from-cart-form-label delete-from-cart" type="submit" value="Remove From Cart" /><input name="index_to_remove" type="hidden" value="' . $i . '" /></form>
                                            <div class="related cart-item-related">
                                                <div class="media img-media cart-item-img-media">
                                                    <figure>

                                                           <img width="56" height="56" src="../uploads/inventory/' . $item_id . '.jpg" alt="' . $product_name . '" />

                                                                                                            </figure>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </li>                               
                                                            </ul>

                                </form>';
        $i++; 
    } 
```

?>

（还有一点，但这与Paypal Check out有关）

这应该是最后的编辑......这是处理调整数量的 php 块。

```
<?php 
if (isset($_POST['item_to_adjust']) && $_POST['item_to_adjust'] != "") {
    // execute some code
    $item_to_adjust = $_POST['item_to_adjust'];
    $quantity = $_POST['quantity'];
    $quantity = preg_replace('#[^0-9]#i', '', $quantity); // filter everything but numbers
    if ($quantity >= 100) { $quantity = 99; }
    if ($quantity < 1) { $quantity = 1; }
    if ($quantity == "") { $quantity = 1; }
    $i = 0;
    foreach ($_SESSION["cart_array"] as $each_item) { 
              $i++;
              while (list($key, $value) = each($each_item)) {
                  if ($key == "item_id" && $value == $item_to_adjust) {
                      // That item is in cart already so let's adjust its quantity using array_splice()
                      array_splice($_SESSION["cart_array"], $i-1, 1, array(array("item_id" => $item_to_adjust, "quantity" => $quantity)));
                  } // close if condition
              } // close while loop
    } // close foreach loop
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:12:58.627

更新多个项目不依赖于按钮，而是依赖于保留值的输入字段。您应该为每个项目使用一个类型的字段，即如果您需要字段“item_to_adjust”和“数量”，每个项目都应该有这些字段。
看看你的表格，我认为这会做：

```
<form action="cart.php" method="post">
<?php
// loop through your items/item-ids/whatever you use
foreach($cart_items as $item) {
    $item_id = $item['id']
    echo '
    <input name="quantity[]" type="text"  class="form-element text-element form-element-small" value="' . $item['quantity'] . '" size="1" maxlength="2" />
    <input name="item_to_adjust[]" type="hidden" value="' . $item_id . '" />
} ?>
<input name="adjustBtn" type="submit" value="change" />
</form> 
```

你会得到：

```
<?php
    $_POST['item_to_adjust'] = array([0] => 127, [1] => 6, [...]); // item-ids
    $_POST['quantity'] = array([0] => 1, [1] => 15, [...]); // quantities 
```

将 item-ids 设置为 quantites，您将拥有所有项目，并且可以使用您的代码调整数量：

```
<?php
// $cart_items_ne will be: array('127' => 1, '6' => 15, [...]);
$cart_items_new = array_combine($_POST['item_to_adjust'],$_POST['quantity']);

// update items
foreach($cart_items_new as $item_id => $quantity) {
    // do stuff here
} 
```

那是你寻找的答案吗？

# android - 奇怪的 CheckedTextView 行为

> ID：15683048
> 
> 赞同：1
> 
> 时间：2013-03-28T13:23:21.193
> 
> 标签：android, gridview, android-fragments, xamarin.android

好的，请耐心等待这是一个非常奇怪和复杂的问题，我很难解释它。我正在使用 Xamarin.Android (Monodroid) 虽然问题的根源可能是 android 的东西。

我有一个 Activity，它通过添加和删除 Fragments 来手动分页。

```
next = Fragments[nextIndex];
FragmentTransaction ftx = FragmentManager.BeginTransaction ();
ftx.SetTransition (FragmentTransit.FragmentFade);

ftx.SetCustomAnimations (Resource.Animator.slide_in_right, Resource.Animator.slide_out_left);
ftx.Remove (CurrentFragment);
ftx.Add (Resource.Id.fragmentContainer, next, next.Tag);
ftx.Commit(); 
```

Fragments 有一个 LinearLayout，它在运行时填充了行视图。（ListViews 在验证文本输入时引入了太多焦点问题）。

```
// Manual ListView
this.Layout.RemoveAllViewsInLayout ();
for (int n = 0; n < Adapter.Count; n++)
{
    View view = Adapter.GetView(n,null,Layout);
    if (view != null) {
        if (view.Parent != Layout) {
            Layout.AddView(view);
        }
    }
} 
```

其中一些行视图中有一个 GridView。（gridview 不滚动）

```
TextView title = view.FindViewById<TextView>(Resource.Id.titleView);
GridView grid = view.FindViewById<GridView>(Resource.Id.gridView);
if (grid.Adapter == null) {
    InlineAdapter adapter = new InlineAdapter(view.Context, list, this.Adapter);
    // Set Grid's parameters
    grid.Adapter = adapter;
    grid.OnItemClickListener = adapter;
    grid.SetNumColumns(adapter.GetColumns(((Activity)view.Context).WindowManager));
    grid.StretchMode = StretchMode.StretchColumnWidth;
}
grid.ClearChoices();

// Get Current Value(s)
if (list.Mode == ListMode.SingleSelection)
{
    grid.ChoiceMode = ChoiceMode.Single;

    for (int b = 0; b < list.Selections.AllItems.Count; b++)
    {
        grid.SetItemChecked(b, false);
    }
    grid.SetItemChecked(list.GetSelectedIndex(DataStore), true);
} 
```

网格视图中有 CheckedTextViews（单选或多选）。

```
// From "InlineAdapter"
public override View GetView(int position, View convertView, ViewGroup parent)
{
    GridView grid = ((GridView)parent);

    int layout = (list.Mode == ListMode.MultiSelection) ? Resource.Layout.RowListInclusive : Resource.Layout.RowListExclusive;

    CheckedTextView view = (CheckedTextView)convertView;
    if (view == null)
    {
        view = (CheckedTextView)inflator.Inflate(layout, parent, false);
    }
    view.Text = items[position];

    // Calabash
    view.ContentDescription = list.ContentDescription + "." + Selections.ContentDescription(items [position]);

    return view;
} 
```

当一个片段第一次出现时（在它被删除之前），一切都按预期执行。

当片段第二次和后续出现时（在它被删除和重新添加之后），只有最后一个网格视图接受用户输入。此外，在最后一个网格视图上选择的所有网格视图都选择。（例如，如果最后一个选择选项 2，则所有网格视图都更改为选择选项 2）

我有：

*   验证基础数据是否正确
*   使用`.GetHash()`所有 CheckedTextViews、GridViews 和 Adapters 对其给定行进行验证。
*   验证触摸传播到正确的 CheckedTextViews，并修改正确的数据。
*   已验证`NotifyDataSetChanged()`调用正确的 GridView。

我个人很难理解这一点。

# ruby-on-rails - 贝宝重定向后会话变量变为 nil

> ID：15683052
> 
> 赞同：1
> 
> 时间：2013-03-28T13:23:30.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在我的应用程序中使用 PAYAPAL 支付类型，我将用户的产品 ID 存储在会话中。但是，当页面从 PAYPAL 网站重定向回我的应用程序时，会话变量会丢失，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:24:25.233

根据我的经验，问题出在您使用的 url，让我解释一下案例 1

1.  我在 url 中登录[https://myurl.com](https://myurl.com)
2.  我从贝宝重定向到网址[https://www.myurl.com](https://www.myurl.com)

案例2

1.  我在 url 中登录[https://www.myurl.com](https://www.myurl.com)
2.  我从贝宝重定向到网址[https://myurl.com](https://myurl.com)

在这两种情况下，我都会失去我的会话

原因：

[https://myurl.com](https://myurl.com)和[https://www.myurl.com](https://www.myurl.com)都将采用不同的会话

要解决此问题，您可以编写一个前置过滤器以始终重定向到非 www url

（或者）

在 session.rb 初始化文件中给出域名 .myurl.com 。

# c# - TaskScheduler.FromCurrentSynchronizationContext 块 ui

> ID：15683057
> 
> 赞同：1
> 
> 时间：2013-03-28T13:23:45.833
> 
> 标签：c#, wpf, task-parallel-library, async-await, c#-5.0

我有这个 xaml

```
<Window x:Class="TestCloseWindow.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Width="500" Height="400">
<StackPanel>
    <TextBlock x:Name="Seconds"></TextBlock>
    <Button Content="fasdfd" Click="ButtonBase_OnClick"></Button>
</StackPanel>
</Window> 
```

而这段代码

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
    }
    private async void ButtonBase_OnClick(object sender, RoutedEventArgs e)
    {
         await CountToTen();
    }

    private Task CountToTen()
    {
       return Task.Factory.StartNew
              (() =>
                  {
                      for (var i = 1; i <= 10; i++)
                      {
                        Seconds.Text = i.ToString(CultureInfo.InvariantCulture);
                        Task.Delay(1000).Wait();
                      }
                   }
                   , CancellationToken.None
                   , TaskCreationOptions.None
                   , TaskScheduler.FromCurrentSynchronizationContext()
              );
    }
} 
```

在这段代码中，我使用 TaskScheduler.FromCurrentSynchronizationContext() 来从后台任务访问 UI。
我希望我可以看到程序计数到 10，但不是它，而是我在 TextBlock 中看到 10 秒和 10 秒后的阻塞 UI

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:39:04.887

`Wait`您正在`CountToTen`函数中使用阻塞调用。要解决此问题，您将需要`await`改用。这也需要一些其他的改变。

```
async private Task CountToTen()
{
    await Task.Factory.StartNew( async () =>
        {
            for (var i = 1; i <= 10; i++)
            {
                Seconds.Text = i.ToString(CultureInfo.InvariantCulture);
                //Task.Delay(1000).Wait();
                await Task.Delay(1000);
            }
        }, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:59:18.870

通过使用`StartNew`with `TaskScheduler.FromCurrentSynchronizationContext()`，在这种特殊情况下，您实际上并没有做任何事情。由于整个任务将在 UI 线程中运行，因此与直接在那里执行它没有什么不同。

您的问题的主要来源是`Task.Delay(1000).Wait();`. 您正在*等待*一秒钟，并且您正在*从 UI thread*执行此操作。您可以重构代码以不进行阻塞等待，还可以删除不必要的任务创建。这就是你所需要的：

```
private async void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
    for (var i = 1; i <= 10; i++)
    {
        Seconds.Text = i.ToString(CultureInfo.InvariantCulture);
        await Task.Delay(1000)
    }
} 
```

# spring - 控制器中的 ID 字段为空

> ID：15683065
> 
> 赞同：1
> 
> 时间：2013-03-28T13:24:00.947
> 
> 标签：spring, hibernate, spring-mvc

我正在使用带有休眠和JPA的spring mvc。我有一个**Person**类，它由另一个名为**Agent**的类继承。映射实现如下：

```
@Entity
@Table(name = "Person")
@Inheritance(strategy = InheritanceType.JOINED)
public class Person extends Auditable implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "PersonId")
    protected Long id;

    //other variables
    ...
}

@Entity
@PrimaryKeyJoinColumn(name = "PersonId")
public class Agent extends Person implements Serializable {
    //additional agent specific variables go here 
    ...
} 
```

保存新数据很顺利，我没有问题。但是，当我编辑数据时，除了 id 值之外的所有内容都绑定到控制器方法的模型属性。我已经使用 chrome 的开发人员工具验证了该 ID 已与浏览器中的其他项目一起发送。但控制器上的 id 字段始终为空，因此数据不会更新。这是我的控制器方法的样子：

```
@RequestMapping(value = "register", method = RequestMethod.POST)
public @ResponseBody CustomAjaxResponse saveAgent(ModelMap model, @ModelAttribute("agent") @Valid Agent agent, BindingResult result) {
    ...
} 
```

我怀疑问题可能出在我的继承映射上，因为我有其他类继承自**Person**类，我也面临类似的问题。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:32:14.117

你需要一个公共的 id 设置器。

在这种情况下，我通常为表单使用特定的 dto，和/或实现一个[转换服务](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/validation.html#core-convert-ConversionService-API)，该服务通过基于 id 的休眠检索实体，然后执行合并。

# jquery - 用于 CSS3 过渡的 JQuery 回退

> ID：15683067
> 
> 赞同：6
> 
> 时间：2013-03-28T13:24:08.653
> 
> 标签：jquery, css, transition, fallback

我正在寻找一个简单的 CSS3 转换代码的 JQuery/JS 后备。我的 javascript 非常基础，因此我很难找到并编写替换代码。我已经检查了modernizr，但我并没有真正理解很多文档。

`transform: rotate(20deg)`这是一个在悬停时使用的图标 （这不是问题，因为它在 IE 中支持）。但问题是过渡，我正在使用

```
 .icon{
....other css code
-webkit-transition: all 300ms linear;
-moz-transition: all 300ms linear;
-o-transition: all 300ms linear;
-ms-transition: all 300ms linear;
transition: all 300ms linear;
} 
```

有没有为此的 JQuery 后备？我正在考虑，`fadeIn();`但我不知道我将如何编码。像这样的东西？：

```
<script>$(icon).hover(function (){$(icon).fadeIn("slow");}); </script> 
```

以及如何让浏览器知道这是一个后备，以便他们只选择 JQuery，如果它是 IE？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T13:46:57.950

我想你已经有了答案，你应该使用modernizr，它并不像你想象的那么复杂，modernizr 有两种方法可以指定哪些功能可用，哪些不可用，第一种是通过一组 CSS 类HTML 元素：

```
<html class="js no-flexbox canvas canvastext postmessage no-websqldatabase ... "> 
```

如果可用，它将显示名称，如果不可用，它将显示带有“no-”前缀的名称，例如“no-flexbox”，第二个是通过javascript：

```
if(!Modernizr.csstransitions) 
```

Modernizr 有一组布尔变量可以告诉你它是否可用，所以如果你想为你的动画设置一个后备，我建议你使用 Modernizr 类来为具有此功能的浏览器指定动画：

```
.csstransitions #element{
-webkit-transition: ... ;
-moz-transition: ... ;
-o-transition: ... ;
-ms-transition: ... ;
transition: ... ;
} 
```

然后使用modernizr检查该功能是否可用的变量创建一个javascript文件，如果不可用则指定动画：

```
if(!Modernizr.csstransitions)
    $("#element").hover(function(){ $(this).animate({ ... your animation ... }, 5000); }); 
```

这可能会让您了解 Modernizr 的工作原理（我希望如此），无论如何，如果您有问题，您可以查看我很久以前发表的这篇[博](http://mechdeveloper.com/blog/things-you-should-do-support-css3)文，上面写着类似 CSS3PIE 之类的其他内容（这不是垃圾邮件，我只是想帮忙）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T13:33:49.023

[Transit](http://ricostacruz.com/jquery.transit/)将 jQuery animate 调用转换为 CSS3 动画，并针对不受支持的浏览器回退到常规 js。

或者，您可以扩展 $.support 以检查[这样](https://gist.github.com/jonraasch/373874)的转换，并在测试失败时使用 jQuery animate。

# windows - 在 Windows 中将 APR (Apache Portable Runtime) 与 CMake 链接

> ID：15683068
> 
> 赞同：2
> 
> 时间：2013-03-28T13:24:11.953
> 
> 标签：windows, cmake, lnk2019, apr

我想使用 apache 可移植运行时库 (APR) 和 cmake 编译一个项目。与 linux 一起运行时看起来一切都很好（因为我可以使用 apr-1-config shell 脚本）。然而，在 Windows 中，它看起来`cmake`没有正确绑定或链接包含的文件。我尝试了一些不同的方法，比如导入`libapr-1.lib`静态库或`target_link_library`所有东西，但似乎没有任何效果。我总是得到

```
error LNK2019: unresolved external symbol 
```

使用 Visual Studio 编译时出现链接器错误。我正在调用哪个函数并不重要，例如我正在调用的函数`apt_pool_create`，因为它不需要任何参数。我仍然想知道，因为 Visual Studio 正在使用 IntelliSense 查找文件并向我展示所有内联文档。`apt_pool*`此外，当指针对象被定义并使用 NULL 初始化时，编译器也不会构建失败。

也许有人确实知道为什么会出现这些链接器问题。以下是`CMakeLists.txt`文件中的一些片段：

**CMakeLists.txt（部分）**

```
# Include unimrcp requirements (apr package)  
IF(WIN32) # Search APR in windows  
  INCLUDE(${PROJECT_SOURCE_DIR}/cmake_modules/FindAPR_windows.cmake)  
ELSE(WIN32) # Search APR in unix  
  INCLUDE(${PROJECT_SOURCE_DIR}/cmake_modules/FindAPR_unix.cmake)  
ENDIF(WIN32)  

# Set link libraries
SET(TARGET_LINK_LIBS
    ${APR_LIBRARIES}
    ${APRUTIL_LIBRARIES}
    ${PTHREADS}
)

SET(CLIENT_SOURCES ...)
SET(CLIENT_HEADERS ...)

# Include intermediary files
INCLUDE_DIRECTORIES(
    ${CMAKE_CURRENT_BINARY_DIR} 
    ${APR_INCLUDE_DIR} 
    ${APRUTIL_INCLUDE_DIR}
)

# Add executable and link libraries
ADD_EXECUTABLE(${CLIENT_TARGET} src/main.cpp ${CLIENT_SOURCES} ${CLIENT_HEADERS})
TARGET_LINK_LIBRARIES(${CLIENT_TARGET} ${TARGET_LINK_LIBS}) 
```

这`CLIENT_TARGET`只是输出的预定义目标名称。

[对于 Windows，我正在使用以下 FindAPR.cmake 模块（FindAPR_windows.cmake 文件）]（ [https://svn.apache.org/repos/asf/incubator/celix/trunk/cmake/modules/FindAPR.cmake](https://svn.apache.org/repos/asf/incubator/celix/trunk/cmake/modules/FindAPR.cmake)）。

[对于 linux，我正在使用以下 FindAPR.cmake 模块（FindAPR_unix.cmake 文件）](https://github.com/FreeSWITCH/FreeSWITCH/blob/master/cmake_modules/FindAPR.cmake)。

它搜索`apr-1-config`并执行 shell 脚本。

在 linux 中，我的 APR_LIBRARIES 变量如下所示：

```
-L/usr/lib;-lapr-1 
```

Windows 直接使用该库及其路径：

```
{path_to_lib}/libapr-1.lib 
```

CMake 没有公布任何链接错误，如上所述，Visual Studio 在调用任何 apr 函数时确实给了我 LNK2019 错误。

也许有人对这个问题有提示？

# sql - UPDATE 语句在存储过程中不起作用；没有错误，也没有异常发生

> ID：15683075
> 
> 赞同：3
> 
> 时间：2013-03-28T13:24:27.100
> 
> 标签：sql, stored-procedures, plsql, oracle10g, sql-update

我在 Oracle 中创建了一个存储过程。该过程编译成功，没有错误。该过程有 3 个更新查询，更新 3 个表“TBLHOTEL”、“TBLHOTELDETAIL”和“TBLHOTELFARE”。

在每个 Update 语句之后，变量successCnt1 递增以获取成功插入查询的数量。最后将successCnt1赋值给successCnt来存储最终结果。如果在任何查询中发生异常，则将其设置为 0 ，表示没有发生插入。

**问题是**没有异常发生，数据库也没有发生更新。

这是我的代码：

***架构：***

***TBLHOTEL 架构：*** {DATE1 (DATE) , ACROOMS (NUMBER) , NACROOMS (NUMBER), HOTELID (VARCHAR2(10)) }

***TBLHOTELFARE 模式：*** {HOTELID (VARCHAR2(10)), CLASS (VARCHAR2(5)), FARE (NUMBER)}

***TBLHOTELDETAIL 模式：*** {HOTELID (VARCHAR2(10)) , PLACE (VARCHAR2(15)) , HOTELNAME (VARCHAR2(15)) }

***程序：***

```
CREATE OR REPLACE PROCEDURE TableUpdateByParameter (acrooms   in number,
                                           nacrooms  in number,
                                           date1      in date,
                                           hotelid   in varchar2,
                                           fare in number,
                                           place in varchar2,
                                           hotelname in varchar2,
                                           class in varchar2,
                                           successCnt  out number) IS

successCnt1 number(6) NOT NULL := 0;
rowUpdated1 number(6) NOT NULL := 0;
rowUpdated2 number(6) NOT NULL := 0;
rowUpdated3 number(6) NOT NULL := 0;

BEGIN
  SAVEPOINT before;

  UPDATE tblhotel
     SET acrooms = acrooms, nacrooms = nacrooms
   WHERE date1 = (to_date(date1, 'mm/dd/yyyy'))
     AND hotelid = 'hotelid' ;

rowUpdated1 := SQL%RowCount;
successCnt1 := successCnt1 + 1;

   dbms_output.put_line('Successful Insertion tblhotel. count ='||successCnt1);
   dbms_output.put_line('Successful Insertion tblhotel. Row Updated ='||rowUpdated1);

  UPDATE tblhoteldetail
 SET place = 'place', hotelname = 'hotelname'
   WHERE hotelid = 'hotelid' ;

rowUpdated2 := SQL%RowCount;
successCnt1 := successCnt1 + 1;

dbms_output.put_line('Successful Insertion tblhoteldetail. count ='||successCnt1);
dbms_output.put_line('Successful Insertion tblhoteldetail. Row Updated= '||rowUpdated2);

  UPDATE tblhotelfare
     SET fare = fare
   WHERE hotelid = 'hotelid' 
     AND class = 'class';

rowUpdated3 := SQL%RowCount;
successCnt1 := successCnt1 + 1;
successCnt := successCnt1;

 COMMIT;

 dbms_output.put_line('Successful Insertion tblhotelfare. count ='||successCnt);
dbms_output.put_line('Successful Insertion tblhotelfare. Row Updated= '||rowUpdated3);

EXCEPTION
  WHEN Others THEN
    successCnt1 := 0;
    successCnt := successCnt1;
    dbms_output.put_line('An error has occured. count ='||successCnt);

    ROLLBACK TO before;

END; 
```

***来电声明***

```
DECLARE 
 C  number;

BEGIN

   TableUpdateByParameter (140,200,TO_DATE('03/24/2013','MM/DD/YYYY'),'H1',3000,'GANGTOK','TRIPTI','AC',C);
END; 
```

***数据库管理系统输出：***

```
Successful Insertion tblhotel. count =1
Successful Insertion tblhotel. Row Updated =0
Successful Insertion tblhoteldetail. count =2
Successful Insertion tblhotel. Row Updated =0
Successful Insertion tblhotelfare. count =3
Successful Insertion tblhotel. Row Updated =0 
```

请帮我找出问题所在。如果需要额外的信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:36:32.543

该`UPDATE`语句**正在**运行，但更新了 0 行，如您的日志 ( `Row Updated =0`) 所示。这不是错误，您的更新评估 where 子句，找到 0 行匹配，并执行 0 修改。在 Oracle 中，与 where 子句中的任何行都不匹配的更新仍然是成功的。

现在为什么会这样。让我们进行第一次更新：

```
UPDATE tblhotel
   SET acrooms = acrooms, nacrooms = nacrooms
 WHERE date1 = (to_date(date1, 'mm/dd/yyyy'))
   AND hotelid = 'hotelid' ; 
```

我认为您想更新具有`hotelid`作为参数传递的值的列的行。这样做有几个问题：

*   首先，您不是在比较列和参数，而是比较具有常数的列。参数不使用引号。常量（VARCHAR2）可以。
*   其次，您不应该调用与您的列同名的参数，这会导致混淆，甚至可能导致[变量 shadowing](http://en.wikipedia.org/wiki/Variable_shadowing)。我建议使用在您的架构中没有任何列使用的前缀。参数的一个常见前缀是`p_`.
*   最后，如果你的参数是好的类型，你就不需要转换函数（因为你的参数`p_date1`是日期类型，你不需要这个`to_date`函数）。

因此，如果您重命名参数`p_hotelid`和`p_date1`，您的语句应为：

```
UPDATE tblhotel
   SET acrooms = acrooms, nacrooms = nacrooms
 WHERE date1 = p_date1
   AND hotelid = p_hotelid; 
```

在这种情况下，不会出现混淆或转换错误。

* * *

在一个不相关的注释上：

*   您的过程名称与其生成的日志之间似乎不匹配：更新语句永远不会进行插入。
*   不要抓住`when others`，让错误传播。如果错误传播，PL/SQL[将回滚过程更改。](https://stackoverflow.com/questions/1468116/does-oracle-roll-back-the-transaction-on-an-error)PL/SQL 语句（DML 和块）本质上是**原子**的，它们要么[完全失败，要么完全成功](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:43818437682131)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:39:34.370

如果`hotelid`是数据库中的列，您几乎肯定不想重载名称以将其用作过程参数的名称。这样做会使在 SQL 语句中使用参数变得相当复杂。大多数人制定某种约定来区分两者。我更喜欢在参数名称前加上 a 前缀，`p_`这是一种相对常见的约定。

```
CREATE OR REPLACE PROCEDURE TableUpdateByParameter (p_acrooms   in number,
                                           p_nacrooms  in number,
                                           p_date1      in date,
                                           p_hotelid   in varchar2,
                                           p_fare in number,
                                           p_place in varchar2,
                                           p_hotelname in varchar2,
                                           p_class in varchar2,
                                           p_successCnt  out number) 
IS 
```

您的 SQL 语句将变为

```
 WHERE tblhoteldetail.hotelid = p_hotelid 
```

如果您真的想重载参数名称，则必须在参数名称前加上过程名称。但这通常会给你带来无尽的悲伤，因为你无意中编写了类似的代码

```
 WHERE tblhoteldetail.hotelid = hotelid 
```

并无意中更新了表中的每一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:30:21.170

您的每个`where`陈述都与此类似：

```
AND hotelid = 'hotelid' 
```

这将每次将表上的hotelid 列与该字符串文字“hotelid”进行匹配，而不是传递给proc 的值。

要让他们引用您需要使用的参数，例如：

```
AND tblhotel.hotelid = TableUpdateByParameter.hotelid 
```

其中左侧是表格上的列，右侧是您的 proc 参数。

另一种方法是有一个命名约定，所有参数都以“p”为前缀，以便您可以使用：

```
AND tblhotel.hotelid = photelid 
```

# jsf - 在 Web 应用程序中使用库中的 Facelets 文件

> ID：15683076
> 
> 赞同：0
> 
> 时间：2013-03-28T13:24:28.700
> 
> 标签：jsf, jsf-2, jar, facelets

是否可以从我包含的 JAR 中在我的 Web 应用程序中使用 Facelets 文件`/WEB-INF/lib`？

结构是这样的：

*   网络模块
    *   网络信息
        *   库
            *   通用组件.jar
    *   页面
        *   索引.xhtml

是否可以提供`common-component.jar`来自 Web 模块本身的页面以及来自 Web 模块本身的页面？

# jquery - Fancybox iframe 大小

> ID：15683079
> 
> 赞同：1
> 
> 时间：2013-03-28T13:24:34.823
> 
> 标签：jquery, iframe, fancybox

我到处寻找这个问题。当用户点击一个链接时，它会加载一个带有 iframe 的fancybox。然而，出于某种原因，iframe 的尺寸很小。我尝试过调整宽度、高度、minWidth 和 minHeight 设置，但没有区别。

这是标题中的相关代码（我链接了所有 Fancybox 脚本）：

```
 <script type="text/javascript">
$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script>

<script type="text/javascript">
    $(document).ready(function() {
     $("iframe").fancybox({
        'width': 600,
        'height': 250,
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'type': 'iframe'
    });
});
</script> 
```

和html：

```
 <a class="fancybox fancybox.iframe"  href="iframe.html">link here </a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:20:01.107

如果你有这个 html

```
<a class="fancybox fancybox.iframe"  href="iframe.html">link here </a> 
```

那么你绑定到 fancybox 的选择器是`.fancybox`.

`fancybox.iframe`另一方面，它是**2.x 版本**中引入的一个特殊*类*，它指示fancybox 需要打开的内容，您不需要对它做任何特定的事情，所以：**`type`**

 **```
<script type="text/javascript">
    $(document).ready(function() {
     $(".fancybox").fancybox({
        'width': 600,
        'height': 250,
        'transitionIn': 'elastic', // this option is for v1.3.4
        'transitionOut': 'elastic', // this option is for v1.3.4
        // if using v2.x AND set class fancybox.iframe, you may not need this
        'type': 'iframe',
        // if you want your iframe always will be 600x250 regardless the viewport size
        'fitToView' : false  // use autoScale for v1.3.4
    });
});
</script> 
```

这应该够了吧。

**请记住**，如果您使用的是 fancybox v2.x，API 选项是新的，并且与以前的版本不兼容。查看[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)以获取该版本的选项、方法和回调的完整列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:30:00.850

尝试设置`autoScale=false`

朱利安**

# java - 使用 OpenGL 将网格移动到给定位置

> ID：15683087
> 
> 赞同：0
> 
> 时间：2013-03-28T13:24:56.380
> 
> 标签：java, c++, opengl, 3d

如果您在了解影片剪辑的工作原理之前就使用过 Actionscript，那么您可以在它们上设置宽度、高度、x、y 值，并且更改它们非常简单。

但是现在，我尝试使用 libgdx (Java) 和 LibCinder (C++)，其中有很多内容，现在渲染是通过 OpenGL 完成的，并且需要着色器等，我设法导入了我用它的纹理创建的 3d 网格，但是现在在改变网格的位置/大小时事情有点奇怪..

在我尝试使用的两个库中，没有像我想的那样改变网格的大小或位置的真正方法..（起初，我期待像mesh.width/height、mesh.scale、mesh.x这样的东西/y/z)

所以我的问题是，设置这些值的实际方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:45:17.437

你需要做的就是调用`3d transformations`。

它在 OpenGL 或 Direct3D 中完成的方式通常是将网格的顶点与变换矩阵相乘。

网格大部分时间是从建模程序中导出的，并且它们位于对象空间中。要将这些网格放置在您的世界中，您需要通过将它们与世界矩阵相乘来将它们带入世界空间。这个世界矩阵可以在一个矩阵中包含平移、旋转和缩放。DirecXMath 库为您提供了轻松创建这些矩阵的方法，并且还有用于 OpenGL 的免费库。

创建世界矩阵后，将其传递给顶点着色器，并将每个传入的顶点与矩阵相乘，以获得世界空间中的顶点。

一个基本的顶点着色器在 HLSL 中看起来像这样：

```
cbuffer cbPerObject : register(b0)
{
    float4x4 world;
    float4x4 viewProj;
};

struct VS_INPUT
{
    float3 position:SV_POSITION;
};

struct VS_OUTPUT
{
    float4 position:SV_POSITION;
};

VS_OUTPUT main( VS_INPUT vsin )
{
    VS_OUTPUT output;

    float3 position = mul( float4(vsin.position,1.0), world).xyz;
    output.position = mul(float4(position,1.0), viewProj);

    return output;
} 
```

因此，如果您为每个网格实例提供不同的世界矩阵，它们都可以放置在不同的位置并具有不同的比例和旋转。

这`viewProj`是视图和投影矩阵的组合，它是根据您的相机和投影设置（如视图方向、位置/旋转、FOV、近/远平面等）计算得出的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:44:49.123

读入模型矩阵和视图矩阵。您使用对象坐标生成这些，然后将生成的矩阵传递给将为您移动网格的着色器。

[http://www.songho.ca/opengl/gl_transform.html](http://www.songho.ca/opengl/gl_transform.html)

# c# - 在桌面上强制使用 jQuery Mobile

> ID：15683090
> 
> 赞同：0
> 
> 时间：2013-03-28T13:25:02.303
> 
> 标签：c#, .net, google-chrome, jquery-mobile, mobile

我正在使用 jQuery 移动版本 1.3.0 创建一个移动应用程序。

在 Android 版 Chrome 的最新更新后，浏览器会显示该网站的无样式版本。基本上它看起来像桌面版本。

我的问题可以采取以下两个答案之一：如何在桌面网站上强制使用 jQuery 移动样式？或者有没有其他人遇到过这个问题并解决了这个问题？

作为背景知识，我的网站是一个带有底层 C# 的 ASP.net 页面。此外，我不得不在页面上禁用 AJAX 以解决一些回发问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:51:57.757

所以这很奇怪......不过我修好了。

问题是使用https。这显然阻止了 jQuery 移动...

# vb.net - vb.net 图像保存到内存流导致 ArgumentNullException

> ID：15683096
> 
> 赞同：2
> 
> 时间：2013-03-28T13:25:08.030
> 
> 标签：vb.net, image, memorystream, argumentnullexception

在 VB.NET 中，我有以下函数，可让我计算尚未保存到文件的图像的哈希值：

```
Public Function pictureHash(ByVal image As System.Drawing.Image) As String
  Try
    If image Is Nothing Then Return Nothing
    Dim ha As HashAlgorithm = HashAlgorithm.Create()
    Dim ms As New MemoryStream()
    image.Save(ms, image.RawFormat)
    ms.Position = 0
    Dim imageHash As Byte() = ha.ComputeHash(ms)
    ms.Close()
    Return BitConverter.ToString(imageHash)
  Catch ex As Exception
    Return Nothing
  End Try
End Function 
```

问题是我在指令上得到一个 ArgumentNullException `image.Save(ms, image.rawFormat)`。

这是异常的详细信息：

```
System.ArgumentNullException occurred
  Message="Value cannot be null. Parameter name: encoder"
  ParamName="encoder"
  Source="System.Drawing"
  StackTrace:
       at System.Drawing.Image.Save(Stream stream, ImageCodecInfo encoder, EncoderParameters encoderParams)
       at System.Drawing.Image.Save(Stream stream, ImageFormat format)
       at MyProgram.pictureHash(Image image) 
```

问题是，当我查看堆栈跟踪时，最后一次使用 3 个参数（崩溃的那个）调用 Image.Save 甚至不是由我进行的，而是由之前的 Image.Save 调用进行的。

知道我该怎么做吗？

非常感谢您的帮助，

问候，

乔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:31:38.757

根据[Image.Save 方法](http://msdn.microsoft.com/en-us/library/ms142147%28v=vs.90%29.aspx)的社区内容，某些图像格式没有关联的编码器，并且由于您报告的错误而失败。

将文件保存到 MemoryStream 时不能使用标准格式（例如 bmp 或 png）吗？为此，请使用类似于以下内容的方法替换对 Save 的调用：

```
image.Save(ms, ImageFormat.Png) 
```

# r - 在 R 中存储 100 个矩阵的最佳方法？

> ID：15683097
> 
> 赞同：1
> 
> 时间：2013-03-28T13:25:08.950
> 
> 标签：r, matrix

我正在编写一个生成 100 个矩阵的函数。一旦有了这个，我需要遍历每个矩阵的第一个超对角线并提取值。这些值应该进入一个数据框 - 每个超对角线都有 1 列。让我举例说明：

### 第一个矩阵（应提取标记为 X 的位置）

```
 [,1] [,2] [,3] [,4]
[1,]  1    X   .2   .1
[2,] .7   .8    X   .5
[3,] .6   .9   .4    X
[4,] .5   .1   .1   .2 
```

所以我需要遍历这些矩阵中的 100 个，将每个矩阵的所有位置标记为 X（第一个超对角线），然后我需要将每个第一个超对角线放在这样的数据框中：

### 输出数据框

```
 matrix1 matrix2 matrix3
[1,2]    .5      .2      .1
[2,3]    .5      .1      .2
[3,4]    .3      .7      .8 
```

鉴于这种情况，存储我稍后将访问以创建**输出数据帧**的 100 个矩阵的最佳方法是什么？对象？由矩阵组成的数据框？

此外 - 除了我发布的影响我选择数据结构的因素之外，还有其他因素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:31:48.660

用我的手机写信，但你可以试试这个：

```
as.data.frame(lapply(matrixList, function(M) diag(M[, -1]) )) 
```

或者，如果它们都完全正确`10x10`，您可以将其替换为上面的“函数（M）”

```
 M[(1:9)*11] 
```

# javascript - SVG 形状和文本拖放

> ID：15683102
> 
> 赞同：1
> 
> 时间：2013-03-28T13:25:20.087
> 
> 标签：javascript, text, svg, drag-and-drop, rectangles

我正在尝试制作一个带有可拖动文本的 SVG 形状，尽管我让它可拖动，但文本仍然是与形状分开的实体。可以将文本和形状合二为一，以便我可以将它们拖到一起吗？

先感谢您。

SG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:47:03.523

当然，将文本和形状都设为元素的子`<g>`元素并使其`<g>`可拖动。您可能希望在`<g>`pointer-events="none" 中创建文本和形状，以便所有鼠标事件都转到`<g>`.

# c# - 获取数据时的异常 - 使用 OracleDB 的 C#

> ID：15683104
> 
> 赞同：2
> 
> 时间：2013-03-28T13:25:31.163
> 
> 标签：c#, oracle11g

```
static public void ConnectAndQuery()
        {

            string connectionString = GetConnectionString();
            using (OracleConnection conn = new OracleConnection())
            {
                conn.ConnectionString = connectionString;
                conn.Open();
                Console.WriteLine("State: " + conn.State);
                Console.WriteLine("Connection String: " + conn.ConnectionString);

                OracleCommand command = conn.CreateCommand();
                string sql = "SELECT * FROM users";
                command.CommandText = sql;

                OracleDataReader reader = command.ExecuteReader();

                while (reader.Read())
                {
                    string myField = (string)reader["MYFIELD"];
                    Console.WriteLine(myField);
                }
            }

        } 
```

连接已建立并处于打开状态，但`IndexOutOfRangeException`在尝试从数据库获取数据时我得到了。异常被捕获

```
string myField = (string)reader["MYFIELD"]; 
```

为了理解读者，我查找了有关 OracleDataReader 和命令的信息，但是......它是否将获取的数据存储在数组或任何其他序列中？为什么我会得到`IndexOutOfRangeException`以及为什么读者需要`[]`括号中的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:27:38.813

您可能没有名为 MYFIELD 的字段。请记住，字段名称区分大小写...尝试使用索引，即 reader[0]

# controller - 防止在 Ember.js 中使用重定向挂钩时执行路由

> ID：15683106
> 
> 赞同：4
> 
> 时间：2013-03-28T13:25:41.627
> 
> 标签：controller, routes, ember.js

我正在用 Ember.js 制作一个应用程序。这是一个小测验，其中问题与图片一起显示，同时在音频播放器中播放，一个接一个。当一个问题被回答时，下一个问题通过转换到 questionRoute 来显示，下一个问题作为模型。

为了防止用户使用浏览器后退按钮，我检查问题是否已经在我的问题路由的重定向功能中完成。在这种情况下，我将它们转换回下一个问题。

那行得通，但是函数 setupController 仍然会为我刚刚重定向的已完成问题执行。这会导致在音频播放器中再次播放已完成的问题，并且同时播放新问题。

有没有办法阻止路由在重定向后进一步执行 setupController() 和 renderTemplate() ？

现在我使用自己的变量来查看路由是否已被重定向，但这感觉像是一种骇人听闻的方式，如果有更好的方法，我现在想这样做。

这是我的代码：

```
//question route

Player.QuestionRoute = Em.Route.extend({
    redirect: function(question){

        Player.Quiz.setCurrentQuestion(question);

        nextQuestion = Player.Quiz.getNextQuestion();

        if(question.get('finished') == true && nextQuestion != null) {
            this.transitionTo('question', nextQuestion);
            //hackish way to prevent the other functions from executing
            this.set('hasBeenRedirected', true);
            return;
        }

        //hackish way to prevent the other functions from executing
        this.set('hasBeenRedirected', false);

    }, 
    setupController: function(controller, model){
        //hackish way to prevent the other functions from executing
        if(this.get('hasBeenRedirected') == true) return;
        controller.set('content', model);

        /* do some other things */

        controller.startQuestion();
    },
    renderTemplate: function(controller, model) {
        //hackish way to prevent the other functions from executing
        if(this.get('hasBeenRedirected') == true) return;

        this.render('stage'); 
        this.render('dock', {
            outlet: 'dock'
        }); 

        this.render(model.getPreferredTemplate(), {
            into: 'stage',
            outlet: 'question'
        });

        this.render("quizinfo", {
            into: 'stage',
            outlet: 'quizinfo',
            controller: this.controllerFor('quiz', Player.Quiz),
        });

    },
    model: function(param){
        return Player.Quiz.getQuestionAt(param.question_id);
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T14:18:26.097

尝试将您的 transitionTo 放入 Ember.run.next

```
 if(question.get('finished') == true && nextQuestion != null) {
        var _self = this;
         Ember.run.next(function() {
            _self.transitionTo('question', nextQuestion);
        });
        return;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T15:47:31.773

最新版本的 ember 已弃用`redirect`和`beforeModel`hooks `afterModel`。这使您可以更精细地控制用户输入路线时发生的情况，尤其是在前进/后退按钮的情况下。

```
App.QuestionRoute = Ember.Route.extend({
  afterModel: function(question, transition) {
    nextQuestion = Player.Quiz.getNextQuestion();
    if (question.get('finished') == true && nextQuestion != null) {
      this.transitionTo('question', nextQuestion);
    }
  }
}); 
```

要使用这些新钩子，您需要使用 ember-latest。有关更改的详细信息，请查看[此要点](https://gist.github.com/machty/5723945)。

# javascript - 了解 JavaScript 代码片段

> ID：15683107
> 
> 赞同：0
> 
> 时间：2013-03-28T13:25:43.440
> 
> 标签：javascript, jquery, jsonp

此代码来自[http://twitter.github.com/](http://twitter.github.com/)

```
(function ($, undefined) {
    // more code ...

    $.getJSON("https://api.github.com/orgs/twitter/members?callback=?", function (result) {
        var members = result.data;
        $(function () {
            $("#num-members").text(members.length);
        });
    });

    // more code ...
})(jQuery); 
```

首先，我理解的事情：

*   所有代码都包含在 IIFE 中
*   他们使用 Github API 来获取会员
*   URL 包含字符串 '?callback=?' 因此请求被视为 JSONP。

我不明白的是：为什么他们`$(function() ...`在请求成功时执行的函数内部使用。

这段代码等效吗？

```
$(function() {
    $.getJSON("https://api.github.com/orgs/twitter/members?callback=?", function (result) {
        var members = result.data;
         $("#num-members").text(members.length);
    });
}); 
```

也许我错了，但我认为第二个代码片段等待文档加载然后请求成员......所以没有并行性？在第一个代码片段中，请求与文档加载并行完成。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:29:45.693

> 也许我错了，但我认为第二个代码片段等待文档加载然后请求成员

你没有错。这正是发生的事情。第一个片段最有可能使用，因此可以在等待 DOM 准备好时发出/返回 JSONP 请求。他们只是在充分利用可用的时间。

DOM 可能会在 AJAX 请求完成时准备好，但为了安全起见，将其包装在准备好的事件处理程序中没有害处（如果 DOM 已经准备好，jQuery 会立即执行回调）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:30:08.117

该`$`函数，如果它被传递一个函数作为它的参数（它是一个可怕的重载函数），将在 DOM 准备好时调用该函数。

在 DOM 完成之前，它会阻止内部代码（尝试修改 DOM）运行。

如果在调用之前 DOM 已经完成`$`，则该函数将立即被调用。

请注意，发送的 HTTP 请求可能会在浏览器完成加载和解析原始文档的 DOM*之前或之后*`getJSON`得到响应。

 *这允许发送数据请求而无需等待 DOM 准备好，同时仍可防止过早修改。

> 这段代码等效吗？

**没有**。在它甚至发送数据请求之前等待 DOM 准备好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:41:00.807

如您所知，这个库使用了 jQuery。现在，我知道我们有多[喜欢 jQuery](http://i.stack.imgur.com/ssRUr.gif)了，但是如果我想使用另一个库，例如 MooTools 或 Prototype，重新定义`$`我们都知道和喜爱的角色怎么办？使用您给出的第二个示例，它破坏了代码，因为作者试图使用`$`可能不再存在的属性，因为`$ != jQuery`.

但是在 Twitter 代码片段中，`$`是一个**局部变量**，是 IIFE 的一个参数，而 jQuery 对象（*不太*可能被覆盖）作为该参数传入。所以现在，任何希望使用这个函数/库的人都可以继续使用它，而不必担心如果他们将它与另一个使用 $.

总之，这都是关于**命名空间**的，以防止另一个库覆盖`$`和破坏你的函数定义。*

# css - 如果 Column 视图标题为空，则标题不会填满 IE 中的完整大小

> ID：15683109
> 
> 赞同：0
> 
> 时间：2013-03-28T13:25:48.673
> 
> 标签：css, xpages

没有截图很难描述这个问题......

我已经使用这个 css 设置了 xpages 中视图的列视图标题，只是为了在所有浏览器中获得渐变：

```
.xspPanelViewColumnHeader {
       background: #58a8cd; /* Old browsers */
       /* IE9 SVG, needs conditional override of 'filter' to 'none' */
       background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzU4YThjZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzBjODNiMiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzBmNmM5NSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxMjdkYWEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
       background: -moz-linear-gradient(top,  #58a8cd 0%, #0c83b2 50%, #0f6c95 51%, #127daa 100%); /* FF3.6+ */
       background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#58a8cd), color-stop(50%,#0c83b2), color-stop(51%,#0f6c95), color-stop(100%,#127daa)); /* Chrome,Safari4+ */
       background: -webkit-linear-gradient(top,  #58a8cd 0%,#0c83b2 50%,#0f6c95 51%,#127daa  100%); /* Chrome10+,Safari5.1+ */
       background: -o-linear-gradient(top,  #58a8cd 0%,#0c83b2 50%,#0f6c95 51%,#127daa 100%); /* Opera 11.10+ */
       background: -ms-linear-gradient(top,  #58a8cd 0%,#0c83b2 50%,#0f6c95 51%,#127daa 100%); /* IE10+ */
       background: linear-gradient(to bottom,  #58a8cd 0%,#0c83b2 50%,#0f6c95 51%,#127daa 100%); /* W3C */
       background-position: left top;
       color: #FFFFFF;
       padding: 4px 4px 4px 4px;
       font-weight: bold;
 } 
```

到目前为止工作正常。但如果列视图标题没有标签，则 IE9 中的渐变存在问题（不是 Firefox）。

在 IE9 中，渐变不会填满标题的完整大小 - 我可以看到两个块（一个水平块和一个垂直块），但都只有几个像素宽。但列标题的其余部分保持白色。

一旦我输入一个标签（即使它只是一个“。”），标题将照常显示（全高和全宽渐变）。

这种方式有效：

```
<xp:viewColumnHeader id="viewColumnHeader1" value="."></xp:viewColumnHeader> 
```

这不会：

```
<xp:viewColumnHeader id="viewColumnHeader1"></xp:viewColumnHeader> 
```

所以问题是（如果有人可以按照我的描述进行操作）：如何编辑 css 以防止列标题在没有定义标签的情况下缩小？

# c# - C# 字典错误 - 已添加具有相同键的项目

> ID：15683114
> 
> 赞同：-2
> 
> 时间：2013-03-28T13:26:03.113
> 
> 标签：c#, asp.net, .net, dictionary

我`ID[KEY]`在字典中插入一个唯一的及其对应的`time[VALUE]`. 我在 ID 列中只有唯一值，但出现以下错误

> *“已添加具有相同密钥的项目”*

```
for (int j = 0; j < pro1.Count; j++)
{

  string startend = "Select Id, CStart, CEnd from MBA1 where Channel='" + mbaChannel[allchan] + "' and Product='" + pro[allpro] + "' and ProgDate='" + pro1[j] + "'";
  SqlCommand dat = new SqlCommand(startend, conn);
  SqlDataReader datrdr = dat.ExecuteReader();
  while (datrdr.Read())
  {
      start.Add(datrdr["Id"].ToString(), datrdr.GetDateTime(1));
      end.Add(datrdr["Id"].ToString(), datrdr.GetDateTime(2));

  }
  datrdr.Close(); 
```

我确定我的`ID`专栏中没有重复。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:30:16.587

您的查询和字典更新处于循环中。如果列中没有重复值`Id`，那么您的查询将在两个不同的查询中返回至少 1 行（`j`在您的示例中为不同的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:30:46.617

您正在运行您的查询 pro1.Count 次。如果 pro1.Count > 1，您将尝试将重复项放入您的字典中。

# objective-c - 多个类实例

> ID：15683121
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:26:14.010
> 
> 标签：objective-c

有同一个类（RandomClass）的instance1和instance2。

我想设置`instance1.string`as`@"instance 1 string"`和`instance2.string`as `@"instance2 2 string"`，并以不同的方式访问它们，但看起来当我设置 instance2.string 时 instance1.string 也改变了它的值。我正在使用 sharedInstance 方法；

就像是：

```
RandomClass *instance1 = [RandomClass sharedInstance];
instance1.string = @"instance 1 string";

RandomClass *instance2 = [RandomClass sharedInstance];
instance2.string = @"instance 2 string";

NSLog(@"%@", instance2.string); // wich results 'instance 2 string'    
NSLog(@"%@", instance1.string); // wich results 'instance 2 string' 
```

如您所见，instance2.string 更改了 instance1 字符串值。

有没有办法分别创建不同的实例，将类对象作为唯一值（由它自己的实例访问）处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:28:18.283

`instance1`并且`instance2`引用与 相同的对象`[RandomClass sharedInstance]`。如果您修改其中任何一个，所有更改都将影响原始`sharedInstance`.

如果你想要两个不同的对象，你必须实例化两次（如果`RandomClass`提供了任何初始化方法）：

```
RandomClass *instance1 = [[RandomClass alloc] init];
instance1.string = @"instance 1 string";

RandomClass *instance2 = [[RandomClass alloc] init];
instance2.string = @"instance 2 string";

NSLog(@"%@", instance1.string); // wich results 'instance 1 string'    
NSLog(@"%@", instance2.string); // wich results 'instance 2 string' 
```

（顺便说一下，`RandomClass`看起来像一个[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)，所以可能没有办法实例化多个对象。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:28:51.267

您的示例无效，因为您没有同一类的两个实例，您只有一个单例实例。请注意，`[RandomClass sharedInstance]`始终返回相同的实例，您只有两个引用。

创建实例的正常方法是

```
[[RandomClass alloc] init...]
```

请不要`thread`在类和实例的上下文中使用该术语，这只会使问题更加混乱。

我相信你应该先访问一些 Obj-C 教程或一些 OOP 教程。

# android - 防止 KeyEvent - 键码输入

> ID：15683122
> 
> 赞同：1
> 
> 时间：2013-03-28T13:26:24.347
> 
> 标签：android

我有一个物理键盘连接到我的 android 设备。我有一个带有两个按钮的应用程序，以下两个函数处理 KeyEvent：

```
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if(state==State.INI){
        char unicodeChar = (char)event.getUnicodeChar();
        Log.d("CHAR", "UP: "+Character.toString(unicodeChar)+" - "+Integer.toString(keyCode));
    }
    return true;
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(state==State.INI){
        char unicodeChar = (char)event.getUnicodeChar();
        Log.d("CHAR", "DOWN: "+Character.toString(unicodeChar)+" - "+Integer.toString(keyCode));
    }
    return true;
} 
```

但即使它处理 ENTER 键也不会阻止它由系统处理：s 例如，我将 return true 更改为 false 并且我可以使用按钮之间的箭头键导航，因此使用 return true 它几乎可以工作除了 ENTER 之外的每个键：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:53:40.343

解决方法：

```
public boolean dispatchKeyEvent(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
        Log.d("CHAR","YOU CLICKED ENTER KEY");
            return false;
    }
    return super.dispatchKeyEvent(e);
}; 
```

# javascript - 如果正则表达式被字符包围，请不要替换它

> ID：15683128
> 
> 赞同：9
> 
> 时间：2013-03-28T13:26:38.770
> 
> 标签：javascript, jquery, regex

我想将所有由 包围的`-`字符串替换为由 包围的字符串`~`，但如果该字符串再次由 包围，则不是`*`。

例如，这个字符串...

```
The -quick- *brown -f-ox* jumps. 
```

……应该变成……

```
The ~quick~ *brown -f-ox* jumps. 
```

我们看到`-`只有在它*不在*的时候才会被替换`*<here>*`。

我现在的javascript-regex（不管它是否被包围`*`）：

```
var message = source.replace(/-(.[^-]+?)-/g, "~$1~"); 
```

编辑：请注意，可能存在奇数个`*`s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:32:29.487

这对正则表达式来说是一件棘手的事情。我想我会做的是这样的：

```
var msg = source.replace(/(-[^-]+-|\*[^*]+\*)/g, function(_, grp) {
  return grp[0] === '-' ? grp.replace(/^-(.*)-$/, "~$1~") : grp;
}); 
```

**[jsFiddle 演示](http://jsfiddle.net/Zb6BU/)**

这会查找*一个* `-`或多个`*`组，并且只对虚线执行替换。一般来说，“嵌套”语法对于正则表达式来说是具有挑战性的（或不可能的）。（当然，作为对问题注释的评论，有一些特殊情况——悬空元字符——也使问题复杂化。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:36:51.743

我会通过拆分数组来解决它，`*`然后只替换偶数索引。匹配不平衡的星比较棘手，它需要知道最后一项索引是奇数还是偶数：

```
'The -quick- *brown -f-ox* jumps.'
    .split('*')
    .map(function(item, index, arr) { 
        if (index % 2) {
            if (index < arr.length - 1) {
                return item; // balanced
            }
            // not balanced
            item = '*' + item;
        }
        return item.replace(/\-([^-]+)\-/, '~$1~');
    })
    .join(''); 
```

[**演示**](http://jsbin.com/afexud/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:38:15.130

找出匹配项是否*没有*被某些分隔符包围是一项非常复杂的任务 - 另请参见此[示例](https://stackoverflow.com/q/12884573/1048572)。[Lookaround](http://www.regular-expressions.info/lookaround.html)可能会有所帮助，但 JS 只支持lookahead。*所以我们可以将“不被”包围的`~`*“改写为”，*后跟一个偶数或`~`*“，然后匹配：

```
source.replace(/-([^-]+)-(?=[^~]*([^~]*~[^~]*~)*$)/g, "~$1~"); 
```

但更好的是我们同时匹配`-`and `*`，这样我们也可以消费任何包装在`*`s 中的东西，然后可以在回调函数中决定不替换它：

```
source.replace(/-([^-]+)-|\*([^*]+)\*/g, function(m, hyp) {
    if (hyp) // the first group has matched
        return "~"+hyp+"~";
    // else let the match be unchanged:
    return m;
}); 
```

这样做的好处是能够更好地指定“*封闭*”，例如通过在“内部”添加单词边界，以便更好地处理无效模式（例如，@Maras 提到的奇数 * 字符） - 当前的正则表达式只是接下来的两次出场。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:43:04.257

杰克非常明确的答案的简洁版本。

```
source.split(/(\*[^*]*\*)/g).map(function(x,i){
return i%2?x:x.replace(/-/g,'~');
}).join(''); 
```

似乎工作，干杯。

# objective-c - 开始/结束外观转换的不平衡呼叫

> ID：15683132
> 
> 赞同：0
> 
> 时间：2013-03-28T13:26:45.020
> 
> 标签：objective-c, xcode, ads

我尝试将 TapforTap 广告添加到我的 iPhone 应用程序中，广告出现，但我在控制台中显示此消息“不平衡调用开始/结束外观转换。” 在任何页面导航然后应用程序崩溃之后，调用 TapForTap 广告的以下代码。我该如何解决这个问题？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGFloat y = self.view.frame.size.height - 50.0;

    TapForTapAdView *adView = [[TapForTapAdView alloc] initWithFrame: CGRectMake(0, y, 320, 50) delegate: self];
    [self.view addSubview: adView];

    [TapForTapAppWall prepare];
    [TapForTapAppWall showWithRootViewController: self]; // or possibly self.navigationController
} 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:56:26.180

我不确定。但是试试这个：

```
- (void) ShowTapAd {

    CGFloat y = self.view.frame.size.height - 50.0;

    TapForTapAdView *adView = [[TapForTapAdView alloc] initWithFrame: CGRectMake(0, y, 320, 50) delegate: self];
    [self.view addSubview: adView];

    [TapForTapAppWall prepare];
    [TapForTapAppWall showWithRootViewController: self]; // or possibly self.navigationController

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self performSelectorOnMainThread:@selector(showTapAd) withObject:nil waitUntilDone:NO];
} 
```

当您使用两个（或更多）segue、Navigation Controller 推送或呈现模态类型的进程时，会出现运行时警告。这意味着当您在前者完全完成之前启动一个。

我很惊讶当你在 viewDidLoad 中调用某些东西时会发生这些事情。因此，您可能会发现根本原因不在您显示的代码片段中。但如果是这样，那么这可以解决问题。

它的作用：它只是确保在 viewDidLoad 正确完成后执行您的广告视图设置。由于 viewDidLoad 像所有与 UI 相关的东西所做的（或应该做的）一样在主踏板上运行，因此到那时应该完成当前的外观转换。

希望这可以帮助。同样，这只是一个猜测。

# c++ - 如何使用 Outlook 对象模型 C++ 禁用 Outlook 安全弹出窗口

> ID：15683135
> 
> 赞同：0
> 
> 时间：2013-03-28T13:26:49.163
> 
> 标签：c++, security, email, outlook, mapi

我们使用 Outlook 对象模型如下读取所有 Outlook 联系人：

*   Outlook 对象模型
*   微软 Office 2010 64 位
*   Windows 7旗舰版

```
 #import "mso.dll" named_guids
    #import "msoutl.olb" no_namespace
    ...
    ...
    void OutlookFeaturesImpl::getContactsFromOutlook()
    {
        _NameSpacePtr pNameSpace = m_ApplicationPtr->GetNamespace(_bstr_t("MAPI"));
        ....
        MAPIFolderPtr pFolder = pNameSpace->GetDefaultFolder(olFolderContacts);
        if( pFolder )
        {
            ....
            _ItemsPtr pItems = pFolder->GetItems();
            ....
            _ContactItemPtr contact = pItems->Find(bstrFilter);
            if( contact )
            {
                collectContactDetails(contact)
            }
        }
    }

    void OutlookFeaturesImpl::collectContactDetails( _ContactItemPtr pContact )
    {
        // The following 2 lines work fine. No Outlook security popup.
        _bstr_t bstrFirstName = pContact->GetFirstName();
        _bstr_t bstrLastName = pContact->GetLastName();

        // The following calls to get Email address and Properties trigger the Outlooks' security prompt since they are part of the "Outlook security object model guard" as you may see from this link: 
        // http://www.vbforums.com/showthread.php?402086-FAQ-s-OD-Why-do-I-get-an-Outlook-Security-Prompt
        _bstr_t emailAddType = pContact->GetEmail1AddressType();
        _bstr_t bstrEmailAddress = pContact->GetEmail1Address();
        _PropertyAccessorPtr p = pContact->GetPropertyAccessor();
    } 
```

为了摆脱 Outlook 安全弹出消息，我在互联网上找到了一些解决方案，如下所示：

```
 void OutlookFeaturesImpl::collectContactDetails( _ContactItemPtr pContact )
    {
        CComQIPtr pIMessage;
        // we should use late binding when calling GetMAPIOBJECT()
        CComQIPtr pIDispatch(pContact);
        OLECHAR FAR* szMember = L"MAPIOBJECT";
        DISPID dispID;
        hr = pIDispatch->GetIDsOfNames( IID_NULL, &szMember, 1, LOCALE_USER_DEFAULT, &dispID );
        if( SUCCEEDED(hr) )
        {
            DISPPARAMS params = {0, 0, 0, 0};
            params.cArgs = 0;
            _variant_t varResult;

            hr = pIDispatch->Invoke( dispID, IID_NULL, LOCALE_USER_DEFAULT, DISPATCH_METHOD, ¶ms, &varResult, NULL, NULL );
            if( SUCCEEDED(hr) )
            {
                pIMessage = varResult; // pIMessage will be NULL after this assignment
            }
        }

        if( pIMessage ) // It is NULL and hence does not go inside
        {
            LPSPropTagArray lpNamedPropTags = NULL;
            MAPINAMEID NamedID = {0};
            LPMAPINAMEID lpNamedID = &NamedID;
            NamedID.lpguid = (LPGUID)&PSETID_Address;
            NamedID.ulKind = MNID_ID;
            NamedID.Kind.lID = dispidEmailOriginalDisplayName;

            hr = pIMessage->GetIDsFromNames(1, &lpNamedID, NULL, &lpNamedPropTags);

            if (SUCCEEDED(hr) && lpNamedPropTags)
            {
                SPropValue* pPropValue = NULL;
                SPropTagArray sPropTagArray;
                sPropTagArray.cValues = 1;
                sPropTagArray.aulPropTag[0] = CHANGE_PROP_TYPE(lpNamedPropTags->aulPropTag[0],PT_STRING8);
                ULONG cProps = 0;

                hr = pIMessage->GetProps(&sPropTagArray, NULL, &cProps, &pPropValue);

                if (SUCCEEDED(hr) && 1 == cProps && pPropValue && PT_STRING8 == PROP_TYPE(pPropValue[0].ulPropTag) && pPropValue[0].Value.lpszA)
                {
                    _bstr_t bstrEmail1Address = pPropValue->Value.lpszA;
                }
            }
        }
    } 
```

注意：这些是上面代码中使用的魔术字符串：

```
 #define dispidEmailOriginalDisplayName 0x8084
    const GUID PSETID_Address = {0x00062004, 0x0000, 0x0000, {0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46}}; 
```

问题是如何将 Outlook 对象模型与我们现有的代码（如上面的代码块所示）一起使用，以避免 Outlook 安全弹出窗口。

请在这些代码块内的评论中查看我们的发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:13:01.433

[查看OutlookSpy](http://www.dimastr.com/outspy/)的联系人- 单击 IMessage 按钮，查看您尝试检索的属性。

调用 GetProps 时，可以对 PR_GIVEN_NAME 和 PR_SURNAME 进行硬编码（这些不是命名属性）。对于 Email1AddressType 和 Email1Address，您需要使用 OutlookSpy 显示的适当 GUID 和 id 来首先确定属性标签（使用 GetIDsFromNames）。

# symfony-1.4 - 如何在 javascript 中使用 php 变量和 symfony 助手

> ID：15683141
> 
> 赞同：1
> 
> 时间：2013-03-28T13:26:59.577
> 
> 标签：symfony-1.4

我有一些带有`<script>`块的 symfony 模板文件，显然这需要放在头脑中。

这些 javascript 块使用了诸如`url_for`symfony 模板变量之类的辅助函数。

我需要能够使用`include_javascript`或类似方法加载此 javascript，但什么是仍然使用 symfony 模板函数并访问生成脚本所需的变量的最佳方法，同时将其加载到头部而不是页面的正文中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:53:55.683

在这种情况下，我使用了一个特殊的 Symfony 模块，它用 PHP 代码填充 JavaScript 变量。

为此，您可以创建一个名为“javascript”的模块，例如，其中包含一个操作。与此操作关联的模板必须具有以下名称：...Success.js.php。

在这个模板中，你可以像这样填写你的 JavaScript 变量：

```
 var global = {
        misc: {
            userCulture : "<?php echo $sf_user->getCulture() ?>",
            serverName : "<?php echo $_SERVER["SERVER_NAME"]?>",
        },
    ...
    } 
```

然后，在您的 *appName*Configuration.class.php（位于应用程序的 config 文件夹中）中，您必须添加以下代码：

```
 class indexConfiguration extends sfApplicationConfiguration
    {
        public function configure()
        {
          $this->dispatcher->connect('context.load_factories', array($this, 'listenToContextLoadFactoriesEvent'));
        }

        public function listenToContextLoadFactoriesEvent(sfEvent $event)
        {
                $event->getSubject()->getResponse()->addJavascript($event->getSubject()->getRouting()->generate('javascript_variables'));
        }
    } 
```

然后，您必须将以下路由添加到您的 routing.yml 文件中：

```
 javascript_variables:
      url:    /*moduleName*/*actionName*.:sf_format
      param:  { module: *moduleName*, action: *actionName*, sf_format: js } 
```

现在，您可以在任何 js 文件中访问这些 JavaScript 变量，即：

```
 $(document).ready(function() {
            alert(global.misc.userCulture);
    }); 
```

# c# - 以编程方式在表中启动新的 TableRow

> ID：15683148
> 
> 赞同：0
> 
> 时间：2013-03-28T13:27:07.687
> 
> 标签：c#, html, html-table

我正在尝试加载模型并将每个模型单独设置，`<td>`当我达到 5 时，`<td>`我想自动启动一个新模型，`<tr>`但它并不能真正使用 if 语句。有可能还是我应该采用完全不同的方法？

这是我的代码：

```
<tr>
        @for (int i = 0; i < Model.Count; i++)
        {
            <td>
                <img width="200px" src="@Url.Action("GetImage", "Beheer", new { productId = Model[i].product_id }) " alt="pasfoto"/><br />
                <center><b>@Html.ActionLink(Model[i].naam, "PrProduct", "Categorie", new { id = Model[i].product_id }, null)</b></center>
                <center>€ @Html.Label(Model[i].prijs)</center> 
            </td>
        }
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:55:02.477

使用模运算符`%`。每次`i%5 == 0`，在周围打印一行`td`

```
@for (int i = 0; i < Model.Count; i++)
{
    @if(i%5 == 0)
    {
        <tr>
    }
    <td>
        <img width="200px" src="@Url.Action("GetImage", "Beheer", new { productId = Model[i].product_id }) " alt="pasfoto"/><br />
        <center><b>@Html.ActionLink(Model[i].naam, "PrProduct", "Categorie", new { id = Model[i].product_id }, null)</b></center>
        <center>€ @Html.Label(Model[i].prijs)</center> 
    </td>
    @if(i%5 == 0)
    {
        </tr>
    }
} 
```

因此，当 0、5、10、15 等时，您将有一个表格行`i`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:36:46.587

```
@for (int i = 0; i < Model.Count; i++)
{
@if(i%5 == 0)
{
    <tr></tr>
}
<td>
    <img width="200px" src="@Url.Action("GetImage", "Beheer", new { productId = Model[i].product_id }) " alt="pasfoto"/><br />
    <center><b>@Html.ActionLink(Model[i].naam, "PrProduct", "Categorie", new { id = Model[i].product_id }, null)</b></center>
    <center>€ @Html.Label(Model[i].prijs)</center> 
</td>
} 
```

上面的代码对我有用。与Havelock给出的答案没有太大区别，但是如果您不关闭同一if语句中的html标签，它不会关闭上述代码中的括号。如果您使用边框，这种方式可能看起来不太好，因为我认为它会显示一个空行？但是，对我来说，这很好:)

# eclipse - Javadoc 中的 Unicode 字符

> ID：15683153
> 
> 赞同：0
> 
> 时间：2013-03-28T13:27:26.817
> 
> 标签：eclipse, unicode, javadoc

在我的 Eclipse 项目中，源文件使用 UTF-8，我可以使用例如

```
ε (epsilon) 
```

在源文件的 Javadoc 注释中。但是，当我生成 Javadoc（项目 - 生成 Javadoc）时，epsilon 字符没有正确显示 - 如何解决这个问题？

感谢您的任何提示！

# highcharts - 在饼图切片内绘制数据值

> ID：15683155
> 
> 赞同：12
> 
> 时间：2013-03-28T13:27:32.693
> 
> 标签：highcharts, slice, pie-chart

如何在饼图中的切片内添加数据值。任何人都可以帮助我吗？这是否可能？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-28T14:25:41.480

您可以使用 datalalabels - 距离参数：[http ://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance)

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/pie-datalabels-distance/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/pie-datalabels-distance/)

```
 plotOptions: {
        pie: {
            dataLabels: {
                distance: -30,
                color: 'white'
            }
        }
    }, 
```

# php - 如何用其内部 html 内容替换锚点？

> ID：15683156
> 
> 赞同：0
> 
> 时间：2013-03-28T13:27:33.437
> 
> 标签：php, html, regex

你好，我怎样才能用它的内部内容替换一个锚。我的意思是说我有`<a someAttrs>someHtmlContent</a>` 并且我想要一些HtmlContent 作为使用PHP 的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:02:46.873

如果`<a someAttrs>someHtmlContent</a>`可以，请使用php 中的[strip_tags() 函数去除](http://www.w3schools.com/php/func_string_strip_tags.asp)字符串中的任何标签并转换为`someHtmlContent`.

例如：

```
<?php
echo strip_tags("<a someAttrs>someHtmlContent</a>");
?> 
```

会给你想要的答案。但如果你必须先找到锚标签，请参考预览答案。

您还可以[在此处](http://php.net/manual/en/function.strip-tags.php)找到 strip_tags 函数的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:35:24.563

使用这个库会很好： http: [//simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

或这里提到的其他一些内容： [How do you parse and process HTML/XML in PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)

# android - ektorp couchDB 到 android 复制

> ID：15683166
> 
> 赞同：2
> 
> 时间：2013-03-28T13:27:49.187
> 
> 标签：android, couchdb, httpclient, replication, ektorp

我正在尝试将我的 CouchDB 与我的 android 同步，使其离线工作与在线一样好，据我所知 .continues(true/false) 是实现此目的的方法。但是有没有办法在运行时以某种方式实际改变它？我正在考虑让 BroadcastReciever 监听是否有任何 CONNECTIVITY_SERVICE 并相应地设置 .continues() 的值，但我无法让它工作......有什么建议吗？

```
protected void startEktorp() {
    httpClient = new TouchDBHttpClient(server);
    dbInstance = new StdCouchDbInstance(httpClient);

    HamsterSyncEktorpAsyncTask startupTask = new HamsterSyncEktorpAsyncTask() {

        @Override
        protected void doInBackground() {
            // create a local database
            dbConnector = dbInstance.createConnector(DATABASE_NAME, true);
        }

        @Override
        protected void onSuccess() {
            // Create the query and get the results
            queryDB();
            // Start doing the replications!
            startReplications();
        }
    };
    startupTask.execute();
}

public synchronized void queryDB() {
    ViewQuery viewQuery = new ViewQuery()
            .designDocId("_design/" + dDocName).viewName(viewName)
            .reduce(false).includeDocs(true);
    ViewResult viewResult = dbConnector.queryView(viewQuery);
    Log.v("SUCCESS", viewResult.getRows().toString());

    notifyHandlers(viewResult);
}

/**
 * Replicates the database from server to the phone and vice versa.
 */
public void startReplications() {
    // pull this database to the test replication server
    pullCommand = new ReplicationCommand.Builder().source(DATABASE_PATH)
            .target(DATABASE_NAME).continuous(true).build();

    pushCommand = new ReplicationCommand.Builder().source(DATABASE_NAME)
            .target(DATABASE_PATH).continuous(true).build();

    HamsterSyncEktorpAsyncTask pushReplicaton = new HamsterSyncEktorpAsyncTask() {

        @Override
        protected void doInBackground() {
            dbInstance.replicate(pullCommand);
            ReplicationStatus status = dbInstance.replicate(pushCommand);
            Log.e(TAG, status.getSessionId().toString());
        }
    };
    pushReplicaton.execute();
} 
```

我还想知道是否有任何方法可以知道复制是否以及何时实际发送/获取新内容并在应用程序中更新我的列表视图，以显示我的数据库中的所有文档（queryDB() 函数）？

# python - 使用 Python SMPP 接收短信

> ID：15683168
> 
> 赞同：1
> 
> 时间：2013-03-28T13:28:02.173
> 
> 标签：python, sms-gateway, smpp

我是使用 SMPP 的新手。我不太确定传入的消息是否有效。我正在使用 smpplib 在 Python 2.7 中实现这一点。我能够连接到 SMPP 服务并使用 bind_transmitter 发送 SMS。

在示例中，有一个函数调用 recv_handler，但是我没有看到它在任何地方调用。这是功能：

```
 def recv_handler(self, **args):
        print 'Message received:', args 
```

任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-12T00:37:57.080

来自 Twilio 的梅根在这里。

我知道这个问题有点老了。但是对于登陆这里寻找如何处理传入短信的人来说，您可以[在这里](https://www.twilio.com/docs/quickstart/python/sms/hello-monkey)快速开始：

```
from flask import Flask, request, redirect
import twilio.twiml

app = Flask(__name__)

@app.route("/", methods=['GET', 'POST'])
def hello_monkey():

    resp = twilio.twiml.Response()
    resp.message("Hello, Mobile Monkey")
    return str(resp)

if __name__ == "__main__":
    app.run(debug=True) 
```

希望这可以帮助！

# c# - 删除按钮上的虚线

> ID：15683177
> 
> 赞同：9
> 
> 时间：2013-03-28T13:28:27.467
> 
> 标签：c#, winforms

当按钮被选中（通过选项卡或单击它们）时，如何删除出现在按钮上的虚线？

这个问题是为了`winforms`- 任何帮助表示赞赏。

![在此处输入图像描述](../Images/43e217b301acfe5a9827ea5a06eb3faa.png)

编辑：我为重复的问题道歉。我确实搜索了答案，但我不知道这个问题是由于按钮的“焦点”造成的。结果我没有找到合适的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:49:24.650

您是否尝试过从按钮上移开焦点。

只需`Focus();`在单击按钮时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:52:45.380

发生这种情况是因为您的`Button`收益集中。可以将其删除，但这意味着当您的按钮的焦点[Enter 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)被触发时，将焦点放在其他东西上。

```
private void button1_Enter(object sender, EventArgs e)
{
    // give focus to something else
} 
```

这样做的问题是您无法使用键盘来选择按钮（使用选项卡）。

此外，更正确的方法是将焦点放在最后一个具有焦点的控件上，而不是将其传递给固定的控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-07T06:55:16.640

创建自定义控件添加 ShowFocusCues 并构建以使用

例子

```
public class button : System.Windows.Forms.Button
    {
        protected override bool ShowFocusCues
        {
            get
            {
                return false;
            }
        }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:31:43.757

查找按钮边框设置。

 如果我在  部分中设置`BorderSize`为 ，我没有得到这个边框 `0``FlatAppearance`

从[标签c＃winforms上的删除按钮边框](https://stackoverflow.com/questions/9966462/remove-button-border-on-tab-c-sharp-winforms)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-21T08:30:20.423

您可以将人员设置`ShowFocusRectangle`为`false`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-28T16:58:32.293

这里唯一真正有效而无需破解（将焦点转移到另一个控件）的答案是 Wongsathon Tuntanakan 的答案。

我参考了他的回答，另外，我已将他的代码转换为 VB：

```
Public Class YourButtonClass
    Inherits System.Windows.Forms.Button

    Protected Overrides ReadOnly Property ShowFocusCues As Boolean
        Get
            Return False
        End Get
    End Property
End Class 
```

# ios - 使用 route-me 库时找不到 FMDatabase.h

> ID：15683180
> 
> 赞同：0
> 
> 时间：2013-03-28T13:28:32.157
> 
> 标签：ios, objective-c, xcode, fmdb, route-me

所以我试图在我的应用程序中使用 route-me 小部件，但 xcode 一直抱怨它找不到 FMDatabase.h，但它包含在项目中（尽管在包含在我的项目中的不同项目下）。我已经复制了示例应用程序的制作方式，但示例项目没有出现此错误。RMDBMapSource.h 文件包含在 MapView 项目中，所以我自己不需要包含 fmdb 的东西（并且因为示例项目不这样做）

![在此处输入图像描述](../Images/cf7385340ce4f89da95fd2606989938f.png)

![在此处输入图像描述](../Images/39d30fb5cb68663c106f96bb0bcf747c.png)

当然，如果文件在构建阶段下的编译源/复制标头下，这意味着它应该能够找到该文件吗？这是对我的问题的一个相当乏味的解释，但是如果有人之前使用过 route-me 库，他们可能遇到过同样的问题并且可以为我指明正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:03:34.067

解决了我自己的错误。首先在主项目的构建设置中，“搜索​​标头路径”设置不正确，它被设置为`/MapView/`而不是`/MapView/**`解决 FMDatabase.h 缺失错误。

然后，如果其他人在我解决第一个问题后遇到像我一样的链接器错误，请确保您已将`libMapView.a`链接二进制文件包含在库部分中。（我之前有过，但是在版本控制提交期间，不知何故我们的项目文件决定不再添加该库，我完全忘记了它，所以我花了很长时间才发现它丢失了）

# java - REST GET/POST 如何发送和接收复杂的参数？

> ID：15683182
> 
> 赞同：1
> 
> 时间：2013-03-28T13:28:40.687
> 
> 标签：java, rest, jersey

我正在使用 Jersey 并将我现有的数据服务转换为 RESTful 数据服务。我可以成功转换的最简单的 GET 和 PUT。但以下是一些我无法转换的：

1.  X Get (T) // 用于具有复杂结果的复杂查询
2.  X Post (T) // 用于创建复杂结果
3.  X PUT (T) // 用于更新一些成功消息对象

其中 T 和 X 是复杂对象

我已经尝试了@queryparam、@pathparam 以及带有@consume 和@produce 的GET 上的复杂对象，但这些都不起作用。还尝试了使用 url 编码的 POST（尽管我真的需要 GET），但也没有用。

请帮忙。我需要执行此操作的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:03:42.460

REST 并非旨在处理复杂*查询*，因为查询实际上是 URL。当您检索资源时，您指定所需资源的 ID。这只是一个数字或字符串，例如很容易在 URL 中表示；

```
http://host/employee/57 
```

会给你员工 57。如果你的要求更复杂，那么你可能想要使用搜索方法，在其中传递几个参数。您可以[`@QueryParam`](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/QueryParam.html)在此处使用，但这并不是真正的纯 REST。

如果您正在 POST 或 PUTting 数据，那么您使用与执行 GET 时相同的 URL，只是这次您在内容正文中发送数据。由于您能够序列化对象以将其返回到 GET 请求，因此您的客户端也应该能够对其进行序列化以在 PUT 或 POST 中将其发送给您。

这是 GET 和 POST 的示例；

```
@XmlType
public class Employee {
  private int id;
  private String name;

  //getters and setters
}

@Path("/employee")
public class EmployeeService {

  @GET
  @Path("/{id}")
  @Produces(MediaType.APPLICATION_XML)
  public Employee get(@PathParam("id") String id) {
    Employee e = employeeDao.getEmployee(id);
    if (e != null) {
      return e;
    } else {
      throw new WebApplicationException(404);
    }
  }

  @POST
  @Consumes(MediaType.APPLICATION_XML)
  @Produces(MediaType.APPLICATION_XML)
  public Employee post(Employee employee) {
    return employeeDao.insertEmployee(employee); //Assumes your DAO sets the ID
  }

} 
```

# android - 当我尝试在 Android-NDK 上使用 getPerspectiveTransform 转换透视图像时，断言失败

> ID：15683184
> 
> 赞同：4
> 
> 时间：2013-03-28T13:28:48.433
> 
> 标签：android, opencv, android-ndk, computer-vision

所以我试图在ndk上使用opencv检测android上的正方形对象，并将其裁剪为2D图形，我检测到正方形的点，但是当我尝试使用getPerspectiveTRansform（src，dst）时，我收到此错误消息：

```
OpenCV Error: Assertion failed (src.checkVector(2, CV_32F) == 4 && dst.checkVector(2, CV_32F)  == 4) in cv::Mat cv::getPerspectiveTransform(cv::InputArray, cv::InputArray), file /home/reports/ci/slave/50-SDK/opencv/modules/imgproc/src/imgwarp.cpp, line 3607 
```

这是我在 android 中的活动：

```
package org.opencv.samples.tutorial1;

import java.io.ByteArrayOutputStream;

import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.CameraBridgeViewBase.CvCameraViewFrame;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;
import org.opencv.android.Utils;
import org.opencv.core.CvException;
import org.opencv.core.CvType;
import org.opencv.core.Mat;
import org.opencv.core.Size;
import org.opencv.imgproc.Imgproc;
import org.opencv.android.CameraBridgeViewBase;
import org.opencv.android.CameraBridgeViewBase.CvCameraViewListener2;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.SurfaceView;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.Toast;

public class Tutorial1Activity extends Activity implements
        CvCameraViewListener2 {
    private static final String TAG = "OCVSample::Activity";

    private Mat mRgba;
    private Mat mGrayMat;
    private Mat imageTaken;

    private CameraBridgeViewBase mOpenCvCameraView;
    private boolean mIsJavaCamera = true;
    private MenuItem mItemSwitchCamera = null;

    private BaseLoaderCallback mLoaderCallback = new BaseLoaderCallback(this) {
        @Override
        public void onManagerConnected(int status) {
            switch (status) {
            case LoaderCallbackInterface.SUCCESS: {
                Log.i(TAG, "OpenCV loaded successfully");

                System.loadLibrary("native_sample");

                mOpenCvCameraView.enableView();
            }
                break;
            default: {
                super.onManagerConnected(status);
            }
                break;
            }
        }
    };

    public Tutorial1Activity() {
        Log.i(TAG, "Instantiated new " + this.getClass());
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "called onCreate");
        super.onCreate(savedInstanceState);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

        setContentView(R.layout.tutorial1_surface_view);

        mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial1_activity_native_surface_view);

        mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);

        mOpenCvCameraView.setCvCameraViewListener(this);
    }

    @Override
    public void onPause() {
        super.onPause();
        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();
    }

    @Override
    public void onResume() {
        super.onResume();
        OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this,
                mLoaderCallback);
    }

    public void onDestroy() {
        super.onDestroy();
        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        Log.i(TAG, "called onCreateOptionsMenu");
        // mItemSwitchCamera = menu.add("Toggle Native/Java camera");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        String toastMesage = new String();
        Log.i(TAG, "called onOptionsItemSelected; selected item: " + item);

        if (item == mItemSwitchCamera) {
            mOpenCvCameraView.setVisibility(SurfaceView.GONE);
            mIsJavaCamera = !mIsJavaCamera;

            if (mIsJavaCamera) {
                mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial1_activity_java_surface_view);
                toastMesage = "Java Camera";
            } else {
                mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial1_activity_native_surface_view);
                toastMesage = "Native Camera";
            }

            mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);
            mOpenCvCameraView.setCvCameraViewListener(this);
            mOpenCvCameraView.enableView();

            mOpenCvCameraView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    takePicture();
                }
            });

            Toast toast = Toast.makeText(this, toastMesage, Toast.LENGTH_LONG);
            toast.show();
        }

        return true;
    }

    public void takePicture() {

        if (imageTaken != null) {

            Bitmap resultBitmap = null;

            try {
                // Imgproc.cvtColor(imageTaken, imageTaken,
                // Imgproc.COLOR_BGR2GRAY);
                // Imgproc.cvtColor(imageTaken, imageTaken,
                // Imgproc.COLOR_GRAY2RGBA, 4);

                /*
                 * Mat test =
                 * Imgproc.getPerspectiveTransform(ImageSrc,ImageDst);
                 * Imgproc.warpPerspective(ImageSrc, ImageDst, test,
                 * ImageDst.size());
                 */

                resultBitmap = Bitmap.createBitmap(imageTaken.cols(),
                        imageTaken.rows(), Bitmap.Config.ARGB_8888);
                //
                Utils.matToBitmap(imageTaken, resultBitmap);

                byte[] sendData = codec(resultBitmap,
                        Bitmap.CompressFormat.JPEG, 50);

                Intent i = new Intent(getApplicationContext(),
                        ShowImageActivity.class);
                i.putExtra("data", sendData);
                startActivity(i);

            } catch (CvException e) {
                // TODO: handle exception
                e.printStackTrace();
            }

        }

    }

    private byte[] codec(Bitmap src, Bitmap.CompressFormat format, int quality) {
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        src.compress(format, quality, os);

        byte[] array = os.toByteArray();
        System.out.println(array.length);

//      return BitmapFactory.decodeByteArray(array, 0, array.length);
        return array;

    }

    public void onCameraViewStarted(int width, int height) {
        mRgba = new Mat();
        mGrayMat = new Mat();
        imageTaken = new Mat();
    }

    public void onCameraViewStopped() {
        mRgba.release();
        mGrayMat.release();
        imageTaken.release();
    }

    public Mat onCameraFrame(CvCameraViewFrame inputFrame) {

        /*long start = System.currentTimeMillis();

        Size originalSize = inputFrame.rgba().size();

        Imgproc.resize(inputFrame.rgba(), mRgba, new Size(800, 480));

        */
//      FindSquares(inputFrame.rgba().getNativeObjAddr(), 1);
        // imageTaken = inputFrame.clone();

//      System.out.println(inputFrame.rgba().type());

        findSquare(inputFrame.rgba().getNativeObjAddr(), imageTaken.getNativeObjAddr(),  1);

        // if (mDraw == 1) {
        /*Imgproc.resize(mRgba, inputFrame.rgba(), originalSize);
        // }

        long end = System.currentTimeMillis();
        Log.d("Frame time", "" + (end - start) + " ms");
*/
        return inputFrame.rgba();

    }

    public native void FindFeatures(long matAddrGr, long matAddrRgba);

    public native int FindSquares(long matAddrRgba, int draw);

    public native void findSquare(long matAddrRgba, long matAddrDescriptor, int draw);
} 
```

这是我的 jni 代码：

```
JNIEXPORT jint JNICALL Java_com_gconsent_opencv_MainActivity_findSquare(JNIEnv*,
        jobject, jlong addrRgba, jlong addrDescriptor, jlong addrSrc, jlong addrDst, jint draw){

    Mat& image = *(Mat*) addrRgba;

    Mat& imageCropped = *(Mat*) addrDescriptor;

    Mat& imageSrc = *(Mat*) addrSrc;
    Mat& imageDst = *(Mat*) addrDst;

    Mat newSrc = image.clone();
    imageCropped = image.clone();
    Mat testImage = image.clone();

    // blur will enhance edge detection
    Mat blurred(testImage);
    medianBlur(testImage, blurred, 9);

    Mat gray0(blurred.size(), CV_8U), gray;
    vector < vector<Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++) {
        int ch[] = { c, 0 };
        mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++) {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0) {
                Canny(gray0, gray, 10, 20, 3); //

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, Mat(), Point(-1, -1));
            } else {
                gray = gray0 >= (l + 1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            vector < Point > approx;
            for (size_t i = 0; i < contours.size(); i++) {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx,
                        arcLength(Mat(contours[i]), true) * 0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 && fabs(contourArea(Mat(approx))) > 1000
                        && isContourConvex(Mat(approx))) {
                    double maxCosine = 0;

                    for (int j = 2; j < 5; j++) {
                        double cosine = fabs(
                                angle(approx[j % 4], approx[j - 2],
                                        approx[j - 1]));
                        maxCosine = MAX(maxCosine, cosine);
                    }

                    if (maxCosine < 0.3) {

                        line(image, approx[0], approx[1],
                                Scalar(0, 255, 0, 255), 2, 4, 0);
                        line(image, approx[1], approx[2],
                                Scalar(0, 255, 0, 255), 2, 4, 0);
                        line(image, approx[2], approx[3],
                                Scalar(0, 255, 0, 255), 2, 4, 0);
                        line(image, approx[3], approx[0],
                                Scalar(0, 255, 0, 255), 2, 4, 0);

                        vector<Point2f> src(4);

//                      src.push_back(approx[0]);
//                      src.push_back(approx[1]);
//                      src.push_back(approx[2]);
//                      src.push_back(approx[3]);

                        src[0] = approx[0];
                        src[1] = approx[1];
                        src[2] = approx[2];
                        src[3] = approx[3];

                        cv::Mat quad = cv::Mat::zeros(300, 220, CV_8U);

                        // transformed quadrangle
                        vector < Point2f > quad_pts(4);

//                      Point2f quad_pts[4];

                        quad_pts.push_back(Point(0, 0));
                        quad_pts.push_back(Point(quad.cols, 0));
                        quad_pts.push_back(Point(quad.cols, quad.rows));
                        quad_pts.push_back(Point(0, quad.rows));

//                      quad_pts[0] = Point(0, 0);
//                      quad_pts[1] = Point(quad.cols, 0);
//                      quad_pts[2] = Point(quad.cols, quad.rows);
//                      quad_pts[3] = Point(0, quad.rows);

                        imageSrc = Mat(src);
                        imageDst = Mat(quad_pts);

                        Mat transmtx = getPerspectiveTransform(src, quad_pts);
                        warpPerspective(src, quad, transmtx, quad.size());

                        imageCropped = quad.clone();

                    }
                }
            }
        }

    }

//  imageCropped = getPolygon(newSrc);

    return 1;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T06:18:02.207

将输入`cv::Mat`类型更改为`CV_32FC2`. 也看看[这个](https://groups.google.com/forum/?fromgroups=#!topic/android-opencv/CPDMJsmYVBI)。

# mysql - IF...ELSE 在 WHERE 子句 MySQL

> ID：15683185
> 
> 赞同：11
> 
> 时间：2013-03-28T13:28:49.840
> 
> 标签：mysql, if-statement

我试图在 MySQL WHERE 语句中使用 IF...ELSE 函数但没有成功。

我有这个查询：

```
SELECT id 
FROM mytable 
WHERE restrcountry NOT LIKE '%*nl*%' 
  AND (IF languages LIKE '%*nl*%', 1, 0) = 1; 
```

好的，这是我对 IF 语句的查询。

但是，我怎样才能使用“ELSE”呢？

例如，我想做类似的事情：

如果语言匹配*nl ---> 选择语言为**nl*的 id 字段

 *ELSE IF language NOT match *nl ---> 选择语言为**en*的 id 字段

 *请问如何在 MySQL 查询中执行此操作？

谢谢大家！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T13:34:20.023

的语法`IF`是：

```
 IF(test_expr, then_expr, else_expr) 
```

所以你可以做类似的事情，`IF(test1, result1, IF(test2, result2, else_result))`但它不会很容易阅读，所以有`CASE`这个目的的表达。

```
CASE WHEN  test1 THEN result1
WHEN test2 THEN result2
ELSE else_result END 
```

如果要条件选择列，可以`IF`直接在选择字段中使用：

```
SELECT IF(match, nl_column en_column) AS lang 
FROM table 
```

请注意 where 子句中的表达式是`TRUE`or `FALSE`，所以写作

```
IF(expr, TRUE, FALSE) 
```

是相同的

```
expr 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T13:35:10.167

改用 CASE

```
CASE
    WHEN languages LIKE '%*nl*%' THEN 1 
    WHEN languages NOT LIKE '%*nl*%' THEN 0
 END as languages 
```**

# php - 检测 tablesorter 表中的输入何时被关注

> ID：15683186
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:28:50.917
> 
> 标签：php, javascript

我有一个 tablesorter 表，它可以正常工作，但是，我需要知道何时关注文本字段，以便我可以在那里捕获值。这样做的原因是我需要确保该值不会更改为超过原始值的 10%。我试图使用焦点事件并调用警报，如以下代码所示：

```
 $('#price').focus(function(){ alert("Blur works");
}); 
```

当我专注于球场时，什么都没有开火。#price 是我表中文本字段的 ID。最终我认为我可以使用这段代码来完成我想要的，但我愿意接受任何建议。

```
 $('#price').focus(function(){ 
var tempPrice = $(this).find('#price').val();
$('#price').change(function(){
    if ($(this).find('#price').val() > (tempPrice+(tempPrice*.1))){
    $('#price').val(tempPrice);
    }
});
}); //end of blur function 
```

我查看了其他类似的问题，但似乎没有什么对我有用。我在主页上使用 JS 和 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:30:03.640

以下是我如何设法解决无法选择除第一行之外的任何行的问题，经过多次试验和错误：

```
 $('#tally tr').live ('click', function(){
var tempPrice =0;
 tempPrice = $(this).find('#price').val(); 
```

我仍在解决剩下的问题。

# android - android：如何用动态创建的许多文本视图填充相对布局（屏幕大小）？

> ID：15683188
> 
> 赞同：0
> 
> 时间：2013-03-28T13:28:52.257
> 
> 标签：android, textview, fill-parent

我尝试使用下面的代码，但文本视图在到达屏幕末尾后不会改变行。

```
 RelativeLayout ll = (RelativeLayout)findViewById(R.id.viewObj);
    int lastid=0;
    for (int i=0; i<100; i++) {
        String teststr =  " hello ";
        TextView textView2 = new TextView(this); 
        textView2.setId(i+1);
        textView2.setTextSize(30);
        textView2.setBackgroundColor(Color.GREEN);
        textView2.setTextColor(Color.RED);
        textView2.setTypeface(Typeface.MONOSPACE);
        textView2.setText(teststr+String.valueOf(i));  
        if (i>0)
        {
            RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            lay.addRule(RelativeLayout.RIGHT_OF, lastid);
            ll.addView(textView2, lay);             
        } else {
            ll.addView(textView2);
        };
        lastid = textView2.getId();

    } 
```

但是，我不知道如何确定何时换线。我只是继续将新的文本视图放在最后一个创建的右侧。谁能告诉我完成这项任务的正确逻辑？非常感谢。

![](../Images/038e3dc0062b208978a0be81596dc5b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:37:23.707

轻松修复。切换到动态创建的 LinearLayout，并将其方向设置为垂直：

```
lay.setOrientation(LinearLayout.VERTICAL); 
```

# shell - 所有执行某个命令的用户。grep

> ID：15683189
> 
> 赞同：0
> 
> 时间：2013-03-28T13:28:53.163
> 
> 标签：shell, grep

我想找到正在执行作为参数给出的某个命令的所有用户的名称。必须使用 grep。我试过：ps aux | grep $1 | cut -d" " -f1，但这不是想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:11:17.113

我猜你正在寻找这个。

```
# cat test.sh
ps aux | grep $1 | grep -v grep | awk '{print $1}'
# ./test.sh bash
root
root
root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:33:10.457

```
/usr/ucb/ps aux | awk '/<your_command_as_parameter>/{print $1}'|sort -u 
```

例如：

```
> /usr/ucb/ps aux | awk '/rlogin/{print $1}' | sort -u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:03:41.373

获取进程信息而不是正在搜索进程的进程有一个技巧，即将名称变成正则表达式。例如，如果您要搜索`ls`，请将搜索词设为`grep '[l]s'`。除非您搜索`grep`自身或单字母命令名称，否则此方法有效。

这是`procname`我使用的脚本；它适用于大多数 POSIX shell：

```
#! /bin/ksh
#
#   @(#)$Id: procname.sh,v 1.3 2008/12/16 07:25:10 jleffler Exp $
#
#   List processes with given name, avoiding the search program itself.
#
#   If you ask it to list 'ps', it will list the ps used as part of this
#   script; if you ask it to list 'grep', it will list the grep used as
#   part of this process.  There isn't a sensible way to avoid this.  On
#   the other hand, if you ask it to list httpd, it won't list the grep
#   for httpd.  Beware metacharacters in the first position of the
#   process name.

case "$#" in
1)
    x=$(expr "$1" : '\(.\).*')
    y=$(expr "$1" : '.\(.*\)')
    ps -ef | grep "[$x]$y"
    ;;
*)
    echo "Usage: $0 process" 1>&2
    exit 1
    ;;
esac 
```

在`bash`中，您可以使用变量子串操作来避免以下`expr`命令：

```
case "$#" in
1)  ps -ef | grep "[${1:0:1}]${1:1}"
    ;;
*)
    echo "Usage: $0 process" 1>&2
    exit 1
    ;;
esac 
```

这两个都运行`ps -ef`；`ps aux`如果您愿意，可以使用。对“命令”名称的搜索不受命令的命令部分的限制，因此您可以使用它`procname root`来查找由 root 运行的进程。匹配也不限于一个完整的单词；你可以考虑`grep -w`（一个 GNU`grep`扩展）。

这些的输出是来自的全行数据`ps`；如果您只想要用户（第一个字段），则将输出通过管道传输到`awk '{print $1}' | sort -u`.

# r - 如何在matlab或R中绘制实体？

> ID：15683191
> 
> 赞同：0
> 
> 时间：2013-03-28T13:28:58.767
> 
> 标签：r, matlab, plot

我有一个`3D`由以下 3 个方程和轴包围的区域。 `x+y<1`, `x>(z/(1+z))*(1-y)`, `x>1-((1+z)*y/z)`. `x`,`y`并且`z`有界于`0`和`1`。

以下 matlab 代码生成 3D 图，我想将有界区域显示为实体。怎么做 ？

```
y=0:0.05:1; %v2
z=0:0.05:1; % delta
[Y,Z]= meshgrid(y,z);
X = 1-Y;
axis([0 1 0 1 0 1]);
surf(X,Y,Z);
hold on;
X = (Z./(1+Z))*(1-Y);
axis([0 1 0 1 0 1]);
surf(X,Y,Z);
X = 1-((1+Z)./Z)*Y;
axis([0 1 0 1 0 1]);
surf(X,Y,Z); 
```

请将解决方案限制为`Matlab`or `R`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:29:51.813

% 将单位立方体的曲面细分构建为单纯复形 sc = tessellatelattice({0:.1:1,0:.1:1,0:.1:1});

% 截断它以创建一个直角三棱柱，% 使得 x + y <= 1 sc = planetruncate(sc,[.5 .5 0],-[1 1 0]);

% 提取点，创建一组非线性约束 x = sc.domain(:,1); y = sc.domain(:,2); z = sc.domain(:,3); % 建立非线性表面约束 sc.range = [x - (z./(1+z)).*(1-y), x - (1-((1+z).*y./z)) ];

% 截断不符合这些约束的部分 % x>(z/(1+z))*(1-y) sc = isotruncate(sc,0,1,'range','above');

% x>1-((1+z)*y/z) sc = isotruncate(sc,0,2,'range','above');

% 绘制结果 blob plotsc(sc,'marker','none')

![三角斑点](../Images/ca90862974c5e5230e043374cd1b99e3.png)

如您所见，它是一个直角三棱柱，但有两个“面”，有点像双曲线。

![斑点](../Images/ebf59915a2754d888cd1b459e72d0a96.png)

这使用了我的简单复杂工具箱，我偶尔会给出，但没有发布，因为学习使用需要一些努力。一旦学会了，它就是有用的东西，如果愿意花精力去学习它。

# web-services - Liferay 网络服务

> ID：15683192
> 
> 赞同：0
> 
> 时间：2013-03-28T13:29:00.587
> 
> 标签：web-services, soap, liferay

我使用与 Tomcat 服务器和 Oracle 10g 数据库捆绑的 Liferay 6.1.1-ce-ga2。我的目标是插入一些内容，作为期刊文章，并将它们显示在 Asset Publisher 中（具有结构和模板，已经工作）。

我使用`JournalArticleServiceSoap.addArticle(...)`了正确的字段`(groupid, structureid, templateid, ...)`。内容已“正确”插入数据库中，我可以在管理员内容面板的 Web 内容中看到它们。内容也`"Approved"`有地位。这是通过设置完成的：

```
serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH) 
```

但是，我看不到插入的内容与 Asset Publisher 中的其他内容一起显示，直到我再次打开它进行编辑并单击发布按钮（即使没有进行任何更改）。然后按预期发布内容。问题是内容的数量。它大约是 600，所以我无法为每个人执行此操作。

我不明白这是怎么回事以及如何解决？换句话说，我需要做什么才能使 Web 服务插入的 Web 内容自动显示在 Asset Publisher 中？

或者，究竟做了`"Publish"`什么，以便我可以尝试使用 SOAP 服务（或插入后的 SQL）以编程方式重现？

预先感谢您的帮助。

[我还在 Liferay 的论坛中发布了相同的问题：[显示由 SOAP Web 服务插入的 JournalArticle 的问题](http://www.liferay.com/community/forums/-/message_boards/view_message/23098918)]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:35:07.770

您可以尝试记录从 Liferay 访问的数据库，并查看手动保存文章后会更改的内容。此处将 hibernate 的日志记录级别设置为 info 或 debug。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:43:53.237

你是这样设置 serviceContext 的吗？

```
ServiceContext serviceContext = new ServiceContext();
serviceContext.setAddGuestPermissions(true);
serviceContext.setAddGroupPermissions(true);
serviceContext.setScopeGroupId(groupId);
serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-22T14:25:30.887

您必须像这样设置 serviceContext：

```
 ServiceContext serviceContext = new ServiceContext();
    //serviceContext.setAddGuestPermissions(true);
    //serviceContext.setAddGroupPermissions(true);
    serviceContext.setScopeGroupId(groupId);
    serviceContext.setWorkflowAction(1);
    serviceContext.setIndexingEnabled(true); 
```

serviceContext.setIndexingEnabled(true); 非常重要。

以下代码不是必须的。

```
serviceContext.setAddGuestPermissions(true);

serviceContext.setAddGroupPermissions(true); 
```

# jquery - 如何在动态创建的元素中应用 jquery 时间选择器（添加更多按钮）？

> ID：15683194
> 
> 赞同：1
> 
> 时间：2013-03-28T13:29:13.080
> 
> 标签：jquery

我正在使用[jquery 时间选择器](https://github.com/Sonelal/jquery-timepicker)。它显示所有元素的时间下拉列表，但是当我将其应用于动态创建的文本字段（通过带有“添加更多”按钮的 javascript 动态创建表单元素）时，它不起作用。

下面是我实现的代码。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="../include/jquery_time_picker/jquery.timepicker.js" ></script>
<link rel="stylesheet" type="text/css" href="../include/jquery_time_picker/jquery.timepicker.css" />
<script>

$(function() {
     $(".Time_Pic").timepicker();
});

function add_more_element()
{
   //code for creating form elements
}
</script> 
```

请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:32:07.453

我会在你的`add_more_element()`函数中调用它

```
function add_more_element()
{
//code for creating form elements
    $(".Time_Pic").timepicker();
} 
```

这样，每次创建新元素时，都会`timepicker`对其应用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:32:37.830

在您的添加功能中尝试这样

```
function add_more_element()
{
    //code for creating form elements
   //add element here like
    $('div').append("<input type='text' class='time'>");
    $('.time').timtpicker();
} 
```

# sql - Dapper.net 的奇怪超时问题

> ID：15683197
> 
> 赞同：14
> 
> 时间：2013-03-28T13:29:28.203
> 
> 标签：sql, dapper, database-performance

出于性能原因，我不久前开始使用 dapper.net，与仅在 LINQ To SQL 中运行“ExecuteQuery”相比，我真的很喜欢命名参数功能。

它适用于大多数查询，但我有时会遇到一些非常奇怪的超时。最奇怪的是，这种超时只发生在通过 dapper 执行 SQL 时。如果我从分析器中复制执行的查询并在 Management Studio 中运行它，它的速度很快，而且效果很好。这不仅仅是一个暂时的问题。查询始终通过 dapper 超时，并且在 Management Studio 中始终正常工作。

```
exec sp_executesql N'SELECT Item.Name,dbo.PlatformTextAndUrlName(Item.ItemId) As PlatformString,dbo.MetaString(Item.ItemId) As MetaTagString, Item.StartPageRank,Item.ItemRecentViewCount
                    NAME_SRCH.RANK as NameRank,
                    DESC_SRCH.RANK As DescRank, 
                    ALIAS_SRCH.RANK as AliasRank, 
                    Item.itemrecentviewcount,
                    (COALESCE(ALIAS_SRCH.RANK, 0)) + (COALESCE(NAME_SRCH.RANK, 0)) + (COALESCE(DESC_SRCH.RANK, 0) / 20) + Item.itemrecentviewcount / 4 + ((CASE WHEN altrank > 60 THEN 60 ELSE altrank END) * 4) As SuperRank
                    FROM dbo.Item
                    INNER JOIN dbo.License on Item.LicenseId = License.LicenseId

                    LEFT JOIN dbo.Icon on Item.ItemId = Icon.ItemId
                    LEFT OUTER JOIN FREETEXTTABLE(dbo.Item, name, @SearchString) NAME_SRCH ON
                    Item.ItemId = NAME_SRCH.[KEY] 
                    LEFT OUTER JOIN FREETEXTTABLE(dbo.Item, namealiases, @SearchString) ALIAS_SRCH ON
                    Item.ItemId = ALIAS_SRCH.[KEY] 
                    INNER JOIN FREETEXTTABLE(dbo.Item, *, @SearchString) DESC_SRCH ON
                    Item.ItemId = DESC_SRCH.[KEY]
                    ORDER BY SuperRank DESC OFFSET @Skip ROWS FETCH NEXT @Count ROWS ONLY',N'@Count int,@SearchString nvarchar(4000),@Skip int',@Count=12,@SearchString=N'box,com',@Skip=0 
```

那是我从 SQL Profiler 复制粘贴的查询。我在我的代码中这样执行它。

```
 using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["Conn"].ToString())) {
            connection.Open();
            var items = connection.Query<MainItemForList>(query, new { SearchString = searchString, PlatformId = platformId, _LicenseFilter = licenseFilter, Skip = skip, Count = count }, buffered: false);
            return items.ToList();
        } 
```

我不知道从哪里开始。我想 dapper 一定有什么问题，因为当我执行代码时它工作正常。

正如您在此屏幕截图中看到的那样。这是先通过代码然后通过 Management Studio 执行的相同查询。

![在此处输入图像描述](../Images/986c4b36624ad00954bbb08247c487dd.png)

我还可以补充一点，只有（我认为）当我有两个或更多单词或搜索字符串中有“停止”字符时才会发生这种情况。所以它可能与全文搜索有关，但我不知道如何调试它，因为它可以在 Management Studio 中完美运行。

更糟糕的是，它在我的本地主机上运行良好，并且具有几乎相同的数据库，无论是来自代码还是来自 Management Studio。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T09:42:04.170

Dapper 只不过是 ado.net 上的实用程序包装器；它不会改变 ado.net 的运作方式。在我看来，这里的问题是“在 ssms 中有效，在 ado.net 中失败”。这不是唯一的：偶尔会发现这种情况很常见。可能的候选人：

*   “set”选项：这些在 ado.net 中具有不同的默认值 - 并且可能会影响性能，特别是如果您有计算 + 持久 + 索引列之类的东西 - 如果“set”选项不兼容，它可以决定它不能使用存储的值，因此不是索引 - 而是表扫描和重新计算。还有其他类似的场景。
*   系统负载/事务隔离级别/阻塞；在 ssms 中运行某些东西并不会及时重现整个系统负载
*   缓存查询计划：有时会缓存和使用 duff 计划；从 ssms 运行通常会强制执行一个新计划 - 自然会针对您在测试中使用的参数进行调整。更新所有索引统计信息等，并考虑添加“优化”查询提示

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-11T13:15:18.810

在 ADO 中，CommandTimeout 的默认值为 30 秒，在 Management Studio 中为无穷大。调整调用 Query<> 的命令超时时间，见下文。

```
var param = new { SearchString = searchString, PlatformId = platformId, _LicenseFilter = licenseFilter, Skip = skip, Count = count };
var queryTimeoutInSeconds = 120;
using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["Conn"].ToString()))
{
    connection.Open();
    var items = connection.Query<MainItemForList>(query, param, commandTimeout: queryTimeoutInSeconds, buffered: false);
    return items.ToList();
} 
```

另请参阅 [MSDN 上的 SqlCommand.CommandTimeout 属性](https://msdn.microsoft.com/de-de/library/System.Data.SqlClient.SqlCommand.CommandTimeout(v=VS.110).aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-22T07:32:42.450

对于 Dapper，默认超时为 30 秒，但我们可以通过这种方式增加超时。在这里，我们将超时时间增加 240 秒（4 分钟）。

```
 public DataTable GetReport(bool isDepot, string fetchById)
    {
        int? queryTimeoutInSeconds = 240;
        using (IDbConnection _connection = DapperConnection)
        {
            var parameters = new DynamicParameters();
            parameters.Add("@IsDepot", isDepot);
            parameters.Add("@FetchById", fetchById);
            var res = this.ExecuteSP<dynamic>(SPNames.SSP_GetSEPReport, parameters, queryTimeoutInSeconds);
            return ToDataTable(res);
        }
    } 
```

在存储库层，我们可以使用附加参数“queryTimeoutInSeconds”为存储过程调用自定义的 ExecuteSP 方法。

以下是 dapper 的“ExecuteSP”方法：-

```
 public virtual IEnumerable<TEntity> ExecuteSP<TEntity>(string spName, object parameters = null, int? parameterForTimeout = null)
    {
        using (IDbConnection _connection = DapperConnection)
        {
            _connection.Open();
            return _connection.Query<TEntity>(spName, parameters, commandTimeout: parameterForTimeout, commandType: CommandType.StoredProcedure);
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T13:41:06.623

可能是在 Dapper 中设置命令超时的问题。下面是如何在 Dapper 中调整命令超时的示例： [Setting Command Timeout in Dapper](https://stackoverflow.com/questions/8794858/adjusting-commandtimeout-in-dapper-net)

# python - 双向链表的长度实现，python

> ID：15683201
> 
> 赞同：1
> 
> 时间：2013-03-28T13:29:39.203
> 
> 标签：python

我的程序调用 len(list)，我对 len 的定义如下。

```
 def __len__(self):
    if not self.head:
        return '[]'
    else:
        return self.size 
```

这是我得到的错误

```
 assert len(testList) == 0, "List should be empty, but length is %r" % len(testList)
 TypeError: __len__() should return an int 
```

所以基本上我必须在列表为空时返回'[]'，否则我需要返回它的长度。我将如何去做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:30:49.550

的返回值`__len__` **必须**是`int`. 所以当列表为空时返回 0。

* * *

从[文档](http://docs.python.org/2/reference/datamodel.html#object.__len__)：

```
object.__len__(self) 
```

> 调用以实现内置函数 len()。**应返回对象的长度，整数 >= 0。**此外，未定义`__nonzero__()`方法且其`__len__()`方法返回零的对象在布尔上下文中被认为是假的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:37:40.263

`__len__`应该返回一个`int`> = 0。请参阅[文档](http://docs.python.org/2/reference/datamodel.html#object.__len__)
这就是错误所说的。

您正在返回一个字符串 ( `'[]'`)，它不是 a `int`，因此会引发此错误。
返回 0 会更合适。

# wordpress - Wordpress 搜索自定义表单

> ID：15683203
> 
> 赞同：0
> 
> 时间：2013-03-28T13:29:42.063
> 
> 标签：wordpress

我的 WP 中有标准搜索表单。

```
<form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
    <label for="s" class="assistive-text"><?php _e( 'Search', 'twentyeleven' ); ?></label>
    <input type="text" class="field" name="s" id="s" placeholder="<?php esc_attr_e( 'Search', 'twentyeleven' ); ?>" />
    <input type="submit" class="submit" name="submit" id="searchsubmit" value="<?php esc_attr_e( 'Search', 'twentyeleven' ); ?>" />
</form> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:22:27.247

`searchform.php`只需在您的主题文件夹中创建一个。从标准代码中复制 php-tags，以实现类似的行为。也不要更改名称属性，否则它将不起作用。

```
<form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
  <div><label class="screen-reader-text" for="s">Search for:</label>
    <input type="text" value="" name="s" id="s" />
    <input type="submit" id="searchsubmit" value="Search" />
  </div>
</form> 
```

请参阅此[Codex 页面上的示例](http://codex.wordpress.org/Function_Reference/get_search_form#Examples)

# php - prolog DOM 中不允许使用 XML 内容

> ID：15683209
> 
> 赞同：0
> 
> 时间：2013-03-28T13:29:55.987
> 
> 标签：php, xml, dom, domdocument

我有这个测试 xml 文件。我将它上传到亚马逊网络服务，响应是：prolog DOM 中不允许 XML 内容。

我在十六进制编辑器中搜索过，之前没有空格，什么都没有。有人可以帮助我吗？

```
 <?xml version="1.0" encoding="UTF-8"?>
    <AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amznenvelope.xsd">
      <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>A3VK0G8OPY5KRQ</MerchantIdentifier>
        <MessageType>Price</MessageType>
        <Message>
          <MessageID>1</MessageID>
          <Price>
            <SKU>459</SKU>
            <StandardPrice currency="USD">34.5</StandardPrice>
          </Price>
        </Message>
        <Message>
          <MessageID>2</MessageID>
          <Price>
            <SKU>718</SKU>
            <StandardPrice currency="USD">95</StandardPrice>
          </Price>
        </Message>
        <Message>
          <MessageID>3</MessageID>
          <Price>
            <SKU>1007</SKU>
            <StandardPrice currency="USD">63.25</StandardPrice>
          </Price>
        </Message>
        <Message>
          <MessageID>4</MessageID>
          <Price>
            <SKU>3200</SKU>
            <StandardPrice currency="USD">258.75</StandardPrice>
          </Price>
        </Message>
        <Message>
          <MessageID>5</MessageID>
          <Price>
            <SKU>3800</SKU>
            <StandardPrice currency="USD">166.75</StandardPrice>
          </Price>
        </Message>
      </Header>
    </AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:46:23.370

此错误消息始终是由开始元素中的无效 XML 内容引起的。例如，超小点“.” 在 XML 元素的开头。

“”之前的任何字符

一个小点“。” 之前 ”

```
.<?xml version="1.0"?>
<company>
    <staff>
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

要修复它，只需在开始时删除所有那些奇怪的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T14:30:21.083

查看代码编辑器中的保存选项。

文件可以保存为 utf-8。文件编辑器可以选择保存在“utf-8”或“utf-8 without BOM”中，更改为对我有用的第二个选项......并在

我猜您正在使用 php 脚本生成此文件，请确保所有包含文件也保存时没有 BOM（字节顺序标记）

# mips - 给定操作码和寄存器大小的 MIPS 寄存器文件大小

> ID：15683211
> 
> 赞同：0
> 
> 时间：2013-03-28T13:29:58.600
> 
> 标签：mips, cpu-registers, instruction-set

我得到了一个带有两个寄存器的简单 ISA。

操作码：2 位，寄存器 1：3 位，寄存器 2：3 位。

它要求我找到寄存器文件的大小，可以寻址多少个寄存器，如果每个寄存器的大小与指令的大小相同，那么内存的大小（以字节为单位）是多少？

我不是在要求确切的答案，但我真的无法在网上或我的笔记中找到任何地方，说明如何根据给定的信息确定寄存器文件的大小。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:27:38.913

> 它要求我查找寄存器文件的大小，可以寻址多少个寄存器

如果指令使用`X`位对寄存器操作数进行编码，则提供`2^X`了指令可以寻址的可能寄存器。

> 如果每个寄存器的大小与指令的大小相同，那么内存的大小（以字节为单位）是多少？

这个问题对我来说似乎不完整，因为答案取决于 ISA 提供的寻址模式。如果我们假设只允许寄存器间接内存访问（例如`ld r0,(r1)`）没有缩放，我们最终`2^InstructionWidth`会得到可寻址内存的字节数。

# database - 用于在云上构建企业 Web (RIA) 应用程序的数据库架构（单个数据库与客户端特定数据库）

> ID：15683213
> 
> 赞同：3
> 
> 时间：2013-03-28T13:30:01.233
> 
> 标签：database, database-design, architecture, cloud, saas

我们正在努力重写我们现有的 RIA 并重新设计我们的数据库以重新构建它的设计。现在我们对数据库有两种看法：

（此选项适用于基于 SaaS 的托管。）

1) 每个客户的个人数据库。

2) 所有客户的单一数据库。

我们期待大量的数据，我们的一些客户的数据库大小从 2GB 到 10GB 不等。# 表大约有 100 个。

我能得到一个关于我们应该选择哪个选择的答案吗？

到目前为止，我们还没有考虑 NoSQL 解决方案，但我们计划使用 JPA（Java Persistence API）支持大约 4-5 个数据库，其中包括 MySQL、Postgres、Oracle、MSSQL。

PS：我们可能会利用亚马逊云进行托管。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-29T04:28:54.173

下面是通常应用于这种多租户需求的数据库使用的三种主要技术。您已经指定了其中一些。

1.  每个租户的单独数据库：
    *   成本非常高，易于维护/定制，易于调整，易于备份，易于编码。
2.  共享数据库但不同的架构：
    *   与 (1) 相比，成本较低，可能会遇到数据库大小增加、每个租户易于个性化、每个租户难以备份/恢复、易于编码等问题。
3.  共享数据库共享模式：
    *   成本低，一个租户的负载会影响其他租户，安全和应用程序开发是一个挑战，每个租户难以个性化，难以恢复/备份。

我认为以上几点适用于在本地或云上托管。如果您看到租户数量增加或数据变大，那么 1) 或 2) 会更好。我使用了选项 2) 并看到它有助于开发和维护。

# iphone - 这是在 iOS 设置中模拟推送通知的开关的好方法吗？

> ID：15683215
> 
> 赞同：0
> 
> 时间：2013-03-28T13:30:06.560
> 
> 标签：iphone, ios, objective-c

直到今晚晚些时候我才能正确测试这段代码，但为了避免事先出现一些错误，这可以用来打开和关闭通知吗？这`NSUserDefault`是来自 switch 语句，应该是不言自明的。注册和注销是否模仿 iOS 设置推送通知开关的功能（打开和关闭通知）？

```
-(void)notification{
   if ([[NSUserDefaults standardUserDefaults] boolForKey:@"Switch"]) {
      [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];
   }
   if (![[NSUserDefaults standardUserDefaults] boolForKey:@"Switch"]) {
      [[UIApplication sharedApplication]unregisterForRemoteNotifications];   
   }    
} 
```

# javascript - 在 Ajax / Javascript textarea 字段上设置 TinyMce

> ID：15683217
> 
> 赞同：1
> 
> 时间：2013-03-28T13:30:15.643
> 
> 标签：javascript, ajax, tinymce

我有一个带有一点 Ajax/Javascript 的表单，可以添加/编辑/删除。

JS 的功能之一如下所示：

```
$(".edit_row input:radio[type=radio]").live("click",function() {
var val=$(this).val();

var parent=$(this).parents("li").attr("id");

var text=jQuery("#"+parent).find("[name=text]").val();

switch(val){
case "1":   
var v='<input type="text" class="txtsmall" name="text" value="'+text+'" >';
jQuery("#"+parent).find(".resize").html(v);
break;
case "2":
var v='<input type="text" name="text" class="txtbig" value="'+text+'" >';
jQuery("#"+parent).find(".resize").html(v);
break;
case "3":
var v='<textarea name="text" class=" tinymce" rows="10">'+text+'</textarea>';
jQuery("#"+parent).find(".resize").html(v);
break;

}
}); 
```

我想做的一件事是将' **case 3** '从一个普通的变成一个tinymce（所见即所得）。

通常在页头我们会启动tinymce：

```
$().ready(function() {
$('textarea.tinymce').tinymce({
script_url : '/javascript/wysiwyg/tiny_mce.js',
theme : "advanced"
});
}); 
```

然后对 textarea class="tinymce" 进行分类，TinyMce 就完成了。

当我在 javascript 中设置类时 – 它只是不显示/调用。

有人可以帮助我调用逻辑以充当所见即所得的字段吗？

仍然通过 js 找到我的方式——任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:36:21.910

你可以给你的 textarea 一个 id 并使用这个调用来初始化你的编辑器：

```
tinymce.execCommand('mceAddControl',true,'your_editor_id'); 
```

# c++ - 如何每 x 秒调用一次函数

> ID：15683221
> 
> 赞同：1
> 
> 时间：2013-03-28T13:30:26.383
> 
> 标签：c++, windows

我想编写一个程序来模拟一个食堂，其中顾客每隔 10~50 秒进入食堂。所以我希望每 10~50 秒调用一次函数，以显示要调用的函数中存在的菜单卡

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:43:42.947

[Boost库在](http://boost.org)[Boost.Asio](http://www.boost.org/doc/libs/release/libs/asio/)中提供了这一点，并在其教程中明确介绍了这一点：

*   [同步定时器](http://www.boost.org/doc/libs/release/doc/html/boost_asio/tutorial/tuttimer1.html)，即等到定时器到期。

*   [异步计时器](http://www.boost.org/doc/libs/release/doc/html/boost_asio/tutorial/tuttimer2.html)，即继续您的程序并在计时器到期时调用回调函数。

如果您在网上搜索 C++ 时没有找到 Boost 库，那么您的 google-fu 很弱。;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T13:32:36.770

在您的主循环中，获取时间并将其与您上次调用该函数的时间进行比较（在声明它时初始化为“现在”）。如果它大于您的时间间隔，则调用您的函数并将“上次调用”变量设置为当前时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:34:11.100

有两种方法： 1.异步 2.同步

1.  假设您使用的是 Win32、C++。您可以使用 Win32 API [SetTimer](http://msdn.microsoft.com/en-us/library/ms644906%28VS.85%29.aspx)

    UINT_PTR timerid = SetTimer(NULL, 0, 毫秒, &callback);

2.  如果您想要一种轮询方法，您最好使用类似的方法

    ```
     for(;;) 
        {

        Say_Hello();
        // Sleep for 50*1000ms
        Sleep(50000);

        } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:06:31.510

对于更跨平台并利用 c++ STL 的计时器，请查看[C++ Cross-Platform High-Resolution Timer](https://stackoverflow.com/questions/1487695/c-cross-platform-high-resolution-timer)。

从那里，只需使用上面提到的两个跨平台计时器，每 10 到 50 秒循环创建和调用一个函数。

# java - 使用 net.sf.saxon.Query 从 Java 程序运行 saxon xquery

> ID：15683223
> 
> 赞同：1
> 
> 时间：2013-03-28T13:30:39.730
> 
> 标签：java, xml, xquery, saxon

我正在使用 Saxon 9.0.4 并将 Home Edition jar 包含在我的 Eclipse 项目中。但是每当我发出查询字符串时，什么都没有发生，也没有得到任何输出。当我从命令行使用以下命令时，我得到了正确的结果：

```
java -cp saxon.jar net.sf.saxon.Query samplequery.xqy 
```

这是我的查询：

```
doc("rcmdemo5.xml")/book/chapter 
```

这是代码，我正在使用：

```
XQDataSource xqds = new SaxonXQDataSource();
XQConnection conn = xqds.getConnection();
XQExpression expr = conn.createExpression();
String es = "doc(\"rcm.xml\")/book/chapter";
XQResultSequence result = expr.executeQuery(es);
while (result.next()) { 
    String str  = result.getAtomicValue();
    System.out.println("Product name: " + str);
}
result.close();
expr.close();
conn.close(); 
```

我哪里错了？另外，是否可以从字符串而不是文件中获取输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:39:37.590

您的查询返回零个或多个元素节点的序列（我假设您所说的实际上是一个或多个）。XQJ 规范规定，当您调用 getAtomicValue() 时，结果序列中的当前项必须是原子值，否则会引发异常（它不会原子化结果）。所以我希望这会引发异常。

# c# - 带有破折号的 Razor 文件名

> ID：15683233
> 
> 赞同：3
> 
> 时间：2013-03-28T13:31:04.317
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我需要我的页面名称在名称中包含破折号。EG我们的愿景

我是 MVC 和 c# 的新手，所以我可能会遇到所有这些错误。

这是我的控制器：

```
 public class HomeController : Controller
    {
        //
        // GET: /Home/
        public ActionResult Index()
        {
            return View();
        }
        //
        // GET: /our-vision/
        public ActionResult ourVision()
        {
            return View();
        }
    } 
```

然后在我看来，我有 Views/Home/ourVision.cshtml。

当我编译并转到`http://localhost/ourVision`它时，它可以工作，但是当我转到`http://localhost/our-vision`它时却不行。

这是我的路由：

```
 routes.MapRoute(
            "Default", // Route name
            "{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:36:32.960

您需要做一些事情才能实现这一目标。

首先，要实现`our-Vision`，您需要为您的操作方法提供`ActionName`属性，如下所示：

```
[ActionName("our-Vision")]
public ActionResult ourVision() 
```

接下来，您必须将`ourVision.cshtml`视图重命名为`our-Vision.cshtml`

最后，无论何时使用`Url.Action`or `ActionLink`，都需要使用`our-Vision`and **not** `vision`，如下所示：

```
Url.Action("our-Vision", "Home"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:44:07.220

恕我直言

最好的方法是在路由引擎中定义新路由：

```
routes.MapRoute(
            "OurVision", // Route name
            "our-vision", // URL with parameters
            new { controller = "Home", action = "ourVision" } // Parameter defaults
        ); 
```

# android - 在Android中追加SQLite字符串？

> ID：15683238
> 
> 赞同：0
> 
> 时间：2013-03-28T13:31:19.597
> 
> 标签：android

下面我提到了我的代码。我想要字符串追加，但这不起作用。

```
public String fetchresturantID(String resturantID)
{
    String query = "select  "+resturantID+" From " + TABLErestaurant;

    mCursor =db.rawQuery(query, null);
    StringBuffer buf = new StringBuffer();
    if (mCursor.moveToNext()) {

        buf.append(mCursor.getString(0));
        String str = buf.toString();
        System.out.println("**************"+str);

    }

   return buf.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:55:53.963

以这种方式替换您的代码

```
String s="";
    if (mCursor.moveToNext()) {

        s+=mCursor.getString(0);

        System.out.println("**************"+s);

    }

   return s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:04:10.677

如果您在使用 StringBuffers 时遇到问题，可以尝试使用字符串数组的简单方法，如下所示：

```
String str[]= new String[0];
str[0]="0";             
mCursor= db.rawQuery(Query, null);                      
if (mCursor.moveToNext()) {         
str[0]=mCursor.getString(0);
System.out.println("**************"+str[0]);
} 
```

# android - Android获取少量外部数据的最佳方式

> ID：15683240
> 
> 赞同：0
> 
> 时间：2013-03-28T13:31:22.793
> 
> 标签：android, performance, android-asynctask

我必须得到一些外部数据。长话短说 - 它是一个用于自动完成字段的字符串数组。我`AsyncTask`在我的`Activity`. 一切正常，我只是从外部服务器获取文件，将其放入字符串数组并附加到我的自动完成字段：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
    SearchActivity.this, android.R.layout.select_dialog_item,
    result);
AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.editCity);
textView.setAdapter(adapter); 
```

问题是我每次去特定的`Activity`. 每次`AsyncTask`启动时，有时都会使我的应用程序变慢一点。什么是只获取一次数据然后在整个应用程序生命周期中保留它的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:40:46.857

您始终可以对数据使用静态引用，这样您就可以确保只要 VM 正在运行，它就会一直存在。

您可以创建一个类并将其命名为类似的`DataStorage`名称，并在该类中添加一个静态 ArrayAdapter 对象

```
public class DataStorage{
  public static ArrayAdapter<String> sharedData;
} 
```

并且无论何时要加载该适配器，都可以从代码中的任何位置：

```
if (DataStorage.sharedData == null){
     // write code to set sharedData
} 
```

这称为单例模式，您可以在此处阅读更多信息：[Singleton Wiki](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:33:28.050

您可以一次获取此数据，然后将其存储在您`Application`的应用程序类中。因此，下次打开此功能时，请先`Activity`检查应用程序类中的数组是否不为空并且不运行`AsyncTask`.

要将 Application 类添加到您的应用程序，请执行以下操作：

**1.**创建一个扩展 Application 的类，如下所示：

```
public class YourApplicationClass extends Application
{   
    ....
} 
```

**2.**并在您的清单中将其定义为您的应用程序类，如下所示：

```
<application
    android:allowBackup="true"
    android:name=".YourApplicationClass"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" >
    .... 
```

您的应用程序中的所有其他 Activity 类都可以访问此类。

**文档：http:** [//developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

# math - 关于正方形内11个正方形的最佳包装

> ID：15683241
> 
> 赞同：1
> 
> 时间：2013-03-28T13:31:24.717
> 
> 标签：math, optimization

我想知道是否有人知道以下问题的合适算法。

我们得到了 11 个边长为 1 的正方形。它们不能与其他正方形重叠。这十一个方格能容纳多大的方格？

好的，这是未解决的，[https://math.stackexchange.com/questions/8698/eleven-unit-squares-inside-a-larger-square](https://math.stackexchange.com/questions/8698/eleven-unit-squares-inside-a-larger-square)。但是计算机能找到多好的结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:25:50.250

最著名的最优解是[Walter Trump 在 1979 年](http://en.wikipedia.org/wiki/Walter_Trump#cite_note-1)发现的。

这个问题是一个包装问题，更具体地说，是[一个正方形问题中的一个正方形包装](http://en.wikipedia.org/wiki/Square_packing_in_a_square)。

如果您想通过算法找到解决方案，您应该使用基于 2d 打包启发式或元启发式（例如进化算法）的近似方法。关于组合优化中的每个问题和算法都有很多文献。它本身可能是一项研究。

快速谷歌搜索后，下面的一些链接开始：

*   [一种方形包装的近似算法](http://www.mpi-inf.mpg.de/~vanstee/square2.pdf)
*   [将正方形包装成正方形](http://www.ime.usp.br/~cris/gcomb/pronex/ps-dvi-files/yo/pack_square_square.ps.gz)
*   [一种包装正方形的算法](http://www.sciencedirect.com/science/article/pii/S0097316597928363)
*   [打包和调度问题的组合算法](http://www.mpi-inf.mpg.de/~vanstee/habil.pdf)

# postsharp - 如何排除构造函数受到命名空间范围的影响

> ID：15683242
> 
> 赞同：1
> 
> 时间：2013-03-28T13:31:27.357
> 
> 标签：postsharp, aop

我刚刚开始使用 Postsharp 作为在项目上进行日志记录等的一种方式，并且遇到了一个我尚未解决的问题。

在我的项目中，我创建了我的 LogAttribute，它正确地注销了我正在尝试执行的信息，例如参数输入和输出方法。唯一的问题是它也对所有构造函数都这样做，我不想被记录下来。

有没有办法排除构造函数被注销？

我的 GlobalAspects.cs 看起来类似于：

```
using PostSharp.Patterns.Diagnostics;
using PostSharp.Extensibility;

[assembly: TraceAttribute(AttributeTargetTypes = "myNamespace.toLog.*", AttributeTargetTypeAttributes = MulticastAttributes.Public, AttributeTargetMemberAttributes = MulticastAttributes.Public)] 
```

我的属性中的 OnEntry、OnSuccess 和 On Exception 方法都是以下方面的变体：

```
 StringBuilder output = new StringBuilder();
        output.Append("Entering: ");
        output.Append(this.methodName);

        for (int i = 0; i < args.Arguments.Count; i++)
        {
            output.Append("  Argument: " + i + " - ");
            output.Append(args.Arguments.GetArgument(i) ?? "null");
        }

        m_logger.Trace(output); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:25:12.247

通过将以下内容添加到属性声明中，似乎已经解决了该问题：

```
[MulticastAttributeUsage(MulticastTargets.Method, TargetMemberAttributes = MulticastAttributes.Instance)]
[Serializable]
public class TraceAttribute : OnMethodBoundaryAspect
{
} 
```

# c# - 从一个程序集在另一个程序集但在同一个项目中获取类的实例

> ID：15683243
> 
> 赞同：2
> 
> 时间：2013-03-28T13:31:28.413
> 
> 标签：c#, .net

我编写了一个包含几个类库的项目。在下层，我有一个如下所示的类：

```
namespace firstclasslibrary
{

    public abstract class Base<T> where T :SomeClass
    {
            public static Base<T> Current 
            { 
                 get 
                 {
                       return new Base() ;
                 }
            }
    }
} 
```

然后在另一个类库中我有：

```
namespace secondclasslibrary
{
      public class Derived : Base
      {
           ///some kind of singleton ....
      }
} 
```

现在在第一个类库中，我有另一个使用抽象类的类，如下所示：

```
namespace firstclasslibrary
{
      public class JustAClass
      {
            public Base<SomeClass> baseclass = baseclass.Current;

            ////do some other things.....
      }
} 
```

如果所有类都在同一个类库下，我能够获得 Derived 的实例，但由于它是一个不同的库，我得到 null 它没有得到我在主项目中创建的实例。

有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:34:11.327

只要第二个类库引用了第一个类库，您就应该能够执行您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:56:53.213

如果第一个库没有对第二个库的引用，那么它不知道该类的具体实现，因此它不能自己创建它的实例。

您必须告诉班级如何创建实例，例如：

```
namespace firstclasslibrary {

  public abstract class Base {

    private static Base _current = null;

    public static Func<Base> CreateInstance;

    public static Base Current { 
      get {
        if (_current == null) {
          _current = CreateInstance();
        }
        return _current;
      }
    }

  }

} 
```

在使用`Current`属性之前，您必须设置`CreateInstance`属性，以“学习”类如何创建实例：

```
Base.CreateInstance = () => new Derived(); 
```

您还可以通过使`_current`属性受保护来对此进行扩展，以便`Derived`如果您创建类的实例而不是使用该`Current`属性，则类的构造函数可以将自己设置为当前实例。

# java - 在eclipse中打开浏览器哪种方式更好？

> ID：15683246
> 
> 赞同：5
> 
> 时间：2013-03-28T13:31:44.343
> 
> 标签：java, eclipse, swt

我找到了两种在 Eclipse 应用程序的外部浏览器中打开 url 的方法。

关于哪种方式更好的任何线索？（便携性、可靠性……）

1-简单直接使用系统默认：

```
org.eclipse.swt.program.Program.launch(url) 
```

2-使用浏览器支持打开外部浏览器：

```
PlatformUI.getWorkbench().getBrowserSupport().getExternalBrowser().openURL(url) 
```

(1) 的代码看起来很简单，但 Eclipse 提供 BrowserSupport 一定是有原因的 :) 有人可以教育我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:00:06.623

在这种情况下没有“更好”，如果你只是触发 URL，你可以使用任何一种机制来达到同样的效果。

首先，简单的操作只会打开系统定义的外部浏览器，仅此而已；它被移交了，您根本无法与之互动。

这`getBrowserSupport().getExternalBrowser()`将允许您与浏览器交互 - 例如，`close()`调用可能实际上关闭了浏览器。

您将与之交互的更可能的原因`getBrowserSupport()`是使用（可能提供的）内部浏览器。

对于 AWT/Swing 应用程序，还有：

```
java.awt.Desktop.getDesktop().browse(new URI(url)); 
```

`Program.launch()`这将完成与使用 url 调用相同的事情。

您可以做的另一件事`Program.launch()`是打开文档、文件夹等。

# operating-system - 中断处理程序如何知道将数据传递给哪个线程？

> ID：15683247
> 
> 赞同：1
> 
> 时间：2013-03-28T13:31:45.050
> 
> 标签：operating-system, interrupt, interrupt-handling

假设我们在一个 unix shell 中工作并输入了一个命令“ls”。当我们按下回车键时，一个中断请求 (IRQ) 从键盘控制器发送到处理器。当收到 IRQ 时，处理器停止它正在做的任何事情，保存执行上下文并运行中断处理程序。我很好奇关于按下了什么键的信息是如何传递给感兴趣的线程的（在我们的例子中，它是一个属于 unix shell 进程的线程）？我猜这就是中断处理程序的作用？中断发生时运行的代码不一定是 unix shell 的代码，对吧？原因是当线程在等待 IO 时它被阻塞了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:39:22.360

中断处理程序很可能只是将关键代码保存在数据结构中并发出某种事件的信号，以便 desktop/window_manager/whatever_it_is 然后可以获取数据并将其提供给当前活动（控制台）窗口。

显然，数据可以在任何时候到达，而不一定是当您的程序（或外壳）在内部`getchar()`或类似的地方等待它时。由于数据传输的异步特性，需要缓冲数据。

ISR 几乎不知道关于 shell 或您的程序的任何事情，或者桌面事物如何处理其余的键盘数据传递。

# r - R中的rasterImage（）创建带有白色边框的图像

> ID：15683250
> 
> 赞同：4
> 
> 时间：2013-03-28T13:31:59.233
> 
> 标签：r, graphics

这可以正常工作，创建一个填充窗口的图像：

```
z <- matrix(runif(500*500), ncol=500)
par(mar=c(0,0,0,0))
image(z, col=grey(0:255/255),zlim=c(0,1)) 
```

但是 rasterImage() 会在图像周围设置边框，即使我将边距设置为零：

```
z <- matrix(runif(500*500), ncol=500)
par(mar=c(0,0,0,0))
plot.new()
rasterImage(z,0,0,1,1,interpolate=FALSE) 
```

我已经尝试使用 plot() 和 mar() 参数进行各种修复。请告诉我使用 rasterImage() 时如何去除边框。

如果这很重要，我正在使用 Windows 7。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:04:22.060

看起来您需要稍微过度填充绘图区域。感觉有点像黑客，但它确实有效。我不确定它为什么会发生，但请观察...之间的区别

```
par(mar=c(0,0,0,0))
plot.new()
rasterImage(z,-0.03,-0.03,1.03,1.03,interpolate=FALSE) 
```

... 给出一个非常窄的白色边框。和...

```
par(mar=c(0,0,0,0))
plot.new()
rasterImage(z,-0.04,-0.04,1.04,1.04,interpolate=FALSE) 
```

...在边界上绘制到边缘。在某处引入了某种扩展因子，但这会覆盖它。仔细看图片的边框。 ![光栅](../Images/566176ae0b8209a493b4fa8b202b3a3e.png)

# javascript - 如何使用箭头键浏览元素？（并突出显示它们）

> ID：15683251
> 
> 赞同：1
> 
> 时间：2013-03-28T13:32:00.137
> 
> 标签：javascript, navigation, arrow-keys

我正在独立开发对*openerp*（一种开源 erp 解决方案）的键盘支持，到目前为止工作已经完成。但是有最后一部分我无论如何都无法解决，无论如何。挑战是通过箭头创建导航并突出显示您当前所在的对象。为了更好地理解，这是 xml 的结构，我想确保用户知道关注的产品是哪个产品。

```
<t t-name="ScaleScreenWidget">
     "<div class="scale-screen screen">
 >           <header><h2>Product Weighting</h2></header>
        <div class="display">
            <span class="weight">
                <p>
                    <t t-esc="widget.get_product_weight().toFixed(3)" />
                    Kg
                </p>
            </span>
            <span class="product-name" >
                <t t-esc="widget.get_product_name()" />
            </span>
            <div class="product-picture">
                <span class="product-price">
                    <t t-esc="widget.format_currency(widget.get_product_price()) + '/Kg'" />
                </span> 
                <t t-if="widget.get_product()">
                    <img t-att-src="widget.get_product().get_image_url()" />
                </t>
            </div>
        </div>
    </div>
</t> 
```

我不是一个懒惰的人，我全心全意地尝试找到这个问题的解决方案，但我做不到，所以我真的很感激一些帮助，因为这将帮助很多想要一个好的销售点但不能的人买不起触摸屏硬件。提前致谢。

# iphone - 发布到用户墙时，标语不会出现在 Iphone for facebook 应用程序上？

> ID：15683255
> 
> 赞同：1
> 
> 时间：2013-03-28T13:32:18.847
> 
> 标签：iphone, facebook, facebook-graph-api

我有一个可以将（消息、链接、图像）发布到用户墙
的 facebook 应用程序当我看到用户墙或主页时，标语（通过状态应用程序名称）没有出现
**这是代码**：

```
 // in case of image
        $image = "image url"
        $attachment = array(
            'message' => $message,
            'source' => $image,
            'url' => $image
        );
        $photo = true;
   // in case of youtube link
        $attachment = array(
            'message' => $message,
            'link' => 'http://www.youtube.com/watch?v=' . $video_id,
            'source' => 'http://www.youtube.com/v/' . $video_id,
            'description' => $description,
            'picture' => 'http://img.youtube.com/vi/' . $video_id . '/0.jpg',
        );
    //incase of text
        $attachment = array(
            'message' => $message,
            'name' => $title,
        );
    }
foreach($users as $uid=>$token){
    $attachment['access_token'] = $token;
    if (isset($photo)) {
                $facebook->setFileUploadSupport(true);
                $fb_result = $facebook->api('/' . $uid . '/photos', 'post', $attachment);
            } else {
                $fb_result = $facebook->api('/' . $uid . '/feed/', 'post', $attachment);
            }
} 
```

# java - Android：带有adMob的屏幕宽度对话框

> ID：15683259
> 
> 赞同：3
> 
> 时间：2013-03-28T13:32:28.230
> 
> 标签：java, android, dialog, admob

我想用 adMob 创建对话框，但它总是给出一个错误，它没有足够的地方放置它。那么是否可以使对话框宽度等于屏幕宽度？

这是我创建这一切的方式：

```
public void CreateDialog(){
    Dialog d = new Dialog(this);
    d.setTitle("Loading...");
    LinearLayout ll = new LinearLayout(d.getContext());
    ll.setLayoutParams( new  LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    ll.addView(adView);
    d.setContentView(ll);
    d.show();
} 
```

// AdView 加载正常，无对话框工作；

# java - NoSuchMethodError：JsonFactory.fromInputStream

> ID：15683260
> 
> 赞同：0
> 
> 时间：2013-03-28T13:32:28.593
> 
> 标签：java, maven, glassfish, jackson, google-api-java-client

我正在尝试获取 Google API OAuth2 身份验证的干净代码示例。我的代码主要基于[https://code.google.com/p/google-api-java-client/wiki/OAuth2上的解释](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

我偏离本教程是因为我希望我的库由 Maven 管理，并且因为我想创建一个没有 Google Apps Engine 依赖项的项目。

每次我尝试在 Glassfish 服务器上运行项目时，都会收到以下错误，可能表明存在依赖冲突。

java.lang.NoSuchMethodError: com.google.api.client.json.JsonFactory.fromInputStream(Ljava/io/InputStream;Ljava/lang/Class;)Ljava/lang/Object;

我的 pom.xml 的相关部分：

```
<dependencies>
    <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.google.http-client</groupId>
        <artifactId>google-http-client</artifactId>
        <version>1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.google.api-jackson2</groupId>
        <artifactId>google-api-jackson2</artifactId>
        <version>1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.google.apis</groupId>
        <artifactId>google-api-services-calendar</artifactId>
        <version>v3-rev34-1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.google.oauth-client</groupId>
        <artifactId>google-oauth-client</artifactId>
        <version>1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>2.1.3</version>
    </dependency>
    <dependency>
        <groupId>com.google.oauth-client</groupId>
        <artifactId>google-oauth-client-servlet</artifactId>
        <version>1.14.1-beta</version>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.1.0.CR2</version>
    </dependency>
    <dependency>
        <groupId>javax.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <version>1.1-PRD</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>javax.annotation</groupId>
        <artifactId>jsr250-api</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
    </dependency>
</dependencies> 
```

请帮助我找到此错误的根本原因，因为使用的依赖项对我来说似乎很好，并且我找不到类似的问题案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:21:14.207

jackson2 的正确依赖关系是：

```
<dependency>        
    <groupId>com.google.http-client</groupId>
    <artifactId>google-http-client-jackson2</artifactId>
    <version>1.14.1-beta</version>
</dependency> 
```

一旦我改变了它，项目就成功构建了，我可以很好地调用有问题的方法。

类路径上可能有其他东西在干扰。我建议您运行程序`-verbose: class`（有关更详细的说明，请参见[此处](https://stackoverflow.com/questions/10230279/java-verbose-class-loading)），它将显示任何冲突。

# apache-flex - 在 flex 3 中添加

> ID：15683266
> 
> 赞同：1
> 
> 时间：2013-03-28T13:32:41.690
> 
> 标签：apache-flex, flex3, addition

我最近正在开发一个基于 flex 3 的结账系统，并且有一个对我来说没有意义的订单总数。我添加了小计、运费和税金。所有 3 个值都四舍五入到小数点后 2 位，但我的答案似乎根本没有四舍五入。

在调查了发生的事情后，我发现任何时候你添加 0.95 和 0.15 而不是得到 1.1，你会得到 1.09999999 重复。从它的变化开始并没有什么不同，在我原来的情况下是（17.95 + 5 + 1.15）。Flex 给了我 24.09999。

是否有一个原因？我可以再次对最终数字进行四舍五入并得到正确的结果，但这种基本算术错误似乎很奇怪。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:01:26.953

由于计算机处理浮点数的方式，它们通常会非常接近您输入的值，但并不完全相同。该数字必须适合固定数量的位，因此会因空间的折衷而损失一些分辨率。这是计算机的限制，而不是灵活的。
一个相当简单的解释
[http://joshblog.net/2007/01/30/flash-floating-point-number-errors/](http://joshblog.net/2007/01/30/flash-floating-point-number-errors/)
更深入的解释 [https://en.wikipedia.org/wiki/Floating_point](https://en.wikipedia.org/wiki/Floating_point)

# asp.net - 将数据表传递到不同的页面以在gridview中进行透析

> ID：15683268
> 
> 赞同：0
> 
> 时间：2013-03-28T13:32:46.890
> 
> 标签：asp.net, c#-4.0, gridview, datatable

我有一个带有gridview 控件的aspx 页面。此页面的代码隐藏填充数据表，然后在网格视图中显示数据表。然后，我需要将数据表传递给单独的 aspx 页面，并在该页面上的 gridview 中再次显示它。我不知道该怎么做。

在第二页的代码隐藏中，我将有一个简单的函数来接收数据表并将其显示在网格视图中，但是做我想做的事情的最佳方法是什么？我需要gridview显示在原始页面上，但也显示在新页面上。

所以......以某种方式在page1上显示gridview，然后弹出打开新页面并将数据表传递给我的函数？在这里不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:53:30.827

您可以尝试使用 Sessions，一旦您第一次显示 GridView，只需将它加载到 Session 中的 DataTable 保存，例如`Session["griddata"] = myDataTable`. 然后在另一个页面中将其从 Session 中拉出，`DataTable myDataTable = (DataTable)Session["griddata"];`然后将其绑定到网格。

# iphone - Flash CS6 中基于屏幕方向（横向或纵向）的导航

> ID：15683270
> 
> 赞同：1
> 
> 时间：2013-03-28T13:32:50.423
> 
> 标签：iphone, ios, actionscript-3, flash, flash-cs6

如果手机是横向或纵向，我正在创建一个具有不同菜单的应用程序。

我想当手机从横向移动到纵向时，我必须告诉 flash 移动到新帧，反之亦然，但我不确定创建方向事件侦听器后的确切代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:29:14.403

有两种方法。听一个[`StageOrientationEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/StageOrientationEvent.html)或听一个`Event.RESIZE`。我个人更喜欢使用 RESIZE，因为它的调用频率稍高一些，并且可以使您的界面更加同步。

```
var landscapeNav:Sprite; // this would be your landscape nav. Obviously does not have to be a Sprite
var portraitNav:Sprite; // same as landscapeNav, but this represents your portrait nav
stage.addEventListener( Event.RESIZE, this.stageResizeHandler );

function stageResizeHandler( e:Event ):void {
    if ( stage ) { //just to make sure the stage is loaded in this class so we avoid null refs
        if ( stage.stageWidth >= stage.stageHeight ) {
            landscapeNav.visible = true;
            portraitNav.visible = false;
        }
        else {
            landscapeNav.visible = false;
            portraitNav.visible = true;
        }
    }
} 
```

这绝对可以清理（`landscapeNav.visible = stage.stageWidth > stage.stageHeight`），但这应该给你一些继续。如果您想按照 Atriace 的建议制作动画，您可以在函数的条件内执行 TweenLite/Max 调用，而不是将 visible 设置为 true/false（不过，在动画完成后，您应该将 visible 设置为 false优化相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:21:13.323

您无需创建新框架。[事实上，观看旧菜单滑出，新菜单滑入（就像TweenLite](http://www.greensock.com/tweenlite/)一样）可能更具视觉吸引力。

有关方向更改的文档可以在 @Adobe 的[特定于移动 AIR 应用程序的 ActionScript API 中找到：“屏幕方向”](http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b24b55b57a124b32b5b57-7ffe.html)和[API](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/StageOrientationEvent.html)。

# jquery - asp.net fileupload 控件应该加载而不提交

> ID：15683271
> 
> 赞同：3
> 
> 时间：2013-03-28T13:32:54.310
> 
> 标签：jquery, asp.net, file-upload

在 ASP.NET 中，我使用 fileupload 控件将文件上传到我的服务器，就像每个人一样。但是我的屏幕上有两个按钮，第一个是 filupload 的按钮，它打开“文件选择屏幕”，第二个按钮是提交选择的文件上传。我不想要第二个按钮。

我想要的是，我希望用户单击第一个按钮，当用户选择文件并关闭该屏幕时，我希望它自动上传。我不希望用户点击...

我怎样才能用javascript或C#做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:40:00.717

[使用 AjaxControlToolkit 中的AsyncFileUpload](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)控件的另一种方法。

看起来这是来自[这里](https://stackoverflow.com/questions/1904168/how-do-i-submit-a-file-input-without-submit-button-with-javascript)的重复问题。

# ember.js - 将外键保存到具有 hasMany 关系的其他模型

> ID：15683273
> 
> 赞同：2
> 
> 时间：2013-03-28T13:33:01.387
> 
> 标签：ember.js, ember-data

我有以下问题。

在我的应用程序中，我有一个屏幕可以创建一个新的`Site`. `action`但是当我通过控制器上的an 保存新站点时， `languages`-property 不会与`POST`-request 一起发送到服务器。

添加新站点的模板是这样的：

```
<form class="form-horizontal">
<div class="control-group">
    <label class="control-label" for="name">Name</label>
    <div class="controls">
        {{view Ember.TextField valueBinding="name"}}
    </div>
</div>
<div class="control-group">
    <label class="control-label" for="languages">Languages</label>
    <div class="controls">
        {{view Ember.Select contentBinding="controllers.languages" selectionBinding="languages" optionValuePath="content.id" optionLabelPath="content.description" multiple="true"}}
            </div>
</div>
<div class="form-actions">
    <button {{ action "createSite" }} class="btn btn-primary">Save</button>
</div> 
```

我这样定义我`Store`的：

```
App.Store = DS.Store.extend({
    revision : 12,
    adapter : DS.RESTAdapter.extend({
        namespace : 'rest'
    })
}); 
```

这是我的控制器：

```
App.SitesNewController = Em.ObjectController.extend({
    needs: ['languages'],
    name: null,
    languages: null,
    createSite : function() {
        var self = this;
        var name = this.get('name');
        var languages = this.get('languages');
        // Create the new Site model
        var s = App.Site.createRecord({
            name : name
        });
        $.each(languages,function(i,lang) {
            s.get('languages').addObject(lang);
        });

        this.get('store').commit();
    }
}); 
```

这是`Site`模型

```
App.Site = DS.Model.extend({
    name : DS.attr('string'),
    languages : DS.hasMany('App.Language')
}); 
```

`Language`-模型：

```
App.Language = DS.Model.extend({
    description : DS.attr('string')
}); 
```

`POST`发送到我的服务器的-request 数据是这样的：

```
{
  "site":{"name":"test"}
} 
```

所以我想念`language`- 属性。实际上，我期望一个`language_ids`具有一组 id 的属性。

当我`RESTAdapter`像这样编辑我的配置时：

```
DS.RESTAdapter.map('App.Site', {
    languages: { embedded: 'always' }
}); 
```

现在`POST`-request 数据是：

```
{
  "site": {
    "name":"test",
    "languages":[{
      "id":2,"description":"English"
    },{
      "id":3,"description":"Deutsch"
    }]
  }
} 
```

语言已知嵌入在请求数据中。这没问题，在`id`我保存之前我会在后端得到它。但要知道它也希望将`language`-data 嵌入到 GET 响应中。

`id`在 POST 数据中仅发送 's 的方法是什么？我希望它是这样的：

```
{
  "site": {
    "name":"test",
    "languages":[2,3]
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:17:02.380

这个答案很大程度上来自[这个其他 StackOverflow 答案](https://stackoverflow.com/a/15145803/2166890)。

```
App.Store = DS.Store.extend({
    revision : 12,
    adapter : DS.RESTAdapter.extend({
        namespace : 'rest',
        serializer: DS.RESTSerializer.extend({
            addHasMany: function (hash, record, key, relationship) {
                var type = record.constructor,
                    name = relationship.key,
                    serializedHasMany = [], 
                    manyArray, embeddedType;

                embeddedType = this.embeddedType(type, name);
                if (embeddedType !== 'always') { return; }

                manyArray = record.get(name);

                manyArray.forEach(function (record) {
                    serializedHasMany.push(record.get('id'));
                }, this);

                hash[this.singularize(key) + '_ids'] = serializedHasMany;
            }

        })

    })
}); 
```

`JSONSerializer`作为参考，您可以查看`RESTSerializer`大部分继承自的 . `addHasMany`可以在[此处](https://github.com/emberjs/data/blob/7e968d4b365cbec242cb820ec8cae9e46abdddf7/packages/ember-data/lib/serializers/json_serializer.js#L119-155)找到执行操作的代码。

请注意，对于上述代码段，唯一真正不同的行是最后几行。不是序列化嵌入的记录，而是将 id 推送到单数化键下的哈希中（`RESTSerializer#keyForHasMany`如果它没有[自己的嵌入类型检查，](https://github.com/emberjs/data/blob/7e968d4b365cbec242cb820ec8cae9e46abdddf7/packages/ember-data/lib/serializers/rest_serializer.js#L21-23)我会使用它。

# java - 保持子类中抽象方法的可见性

> ID：15683279
> 
> 赞同：4
> 
> 时间：2013-03-28T13:33:33.817
> 
> 标签：java, abstract-class, visibility

我有以下抽象类：

```
public abstract class AbstractCreateActionHandler {

    protected IWorkItem mCurrentWI;

    public AbstractCreateActionHandler(IWorkItem wi) {
      this.mCurrentWI = wi; 
    }

    public final void invoke() {
      try {
          if (checkForLockingFile()) {
            this.executeAction();
            Configuration.deleteInstance();
          }
      } catch (IOException e) {
          Configuration.deleteInstance();
          e.printStackTrace();
      }
    }

    protected abstract void executeAction();    

    private boolean checkForLockingFile() throws IOException {
      String path = Configuration.getInstance().getProperty("path");
      File lock = new File(path + "lock_"+mCurrentWI.getId()+"__.tmp");
      if(!lock.exists()) {
          lock.createNewFile();
          return true;
      }
      return false; 
    }
} 
```

子类扩展抽象类：

```
public class MyAction extends AbstractCreateActionHandler {

    public MyAction(IWorkItem wi) {
      super(wi);
    }

    @Override
    protected void executeAction() {
      // Implementation
    }

    // ALSO POSSIBLE...
    /* @Override
    public void executeAction() {
      // Implementation
    }*/
} 
```

**问题：**

扩展抽象类和实现`executeAction()`方法的开发人员是否可能不允许更改可见性`executeAction()`？

目前，开发人员可以简单地将方法的可见性更改为“public”，创建子类的对象并调用`executeExtion()`。可见性修饰符可以更改，抽象方法仍被接受为“已实现”。

`invoke()`因此可以绕过在抽象类方法中执行的“正常”调用顺序和检查。有没有办法检查该`invoke()`方法是否被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:38:17.570

> 扩展抽象类并实现 executeAction() 方法的开发人员是否可能不允许更改 executeAction() 的可见性？

不，这是不可能的。

第[8.4.8.3 章。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)Java 语言规范的[覆盖和隐藏要求指定：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)

> 覆盖或隐藏方法的访问修饰符（第 6.6 节）必须提供至少与覆盖或隐藏方法一样多的访问权限，如下所示： ...

因此，总是有可能让覆盖方法提供比父类中的覆盖方法**更多的访问权限。**

另请参见[java 访问修饰符和覆盖方法](https://stackoverflow.com/questions/6851612/java-access-modifiers-and-overriding-methods)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T13:39:39.560

不，没有真正的方法来限制它。您是否担心恶意开发人员或无知的同事？如果是后者，那么您只需要建立诸如“不要增加方法的可见性”之类的编码约定，并将一些 javadoc 放在抽象方法上，以指示正确使用。如果是前者，那么您可能需要以不同的方式设计代码（可能使用策略模式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:39:07.920

允许将修饰符更改为 public ，因为它不违反[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

> 因此可以绕过在抽象类方法 invoke() 中执行的“正常”调用序列和检查。有没有办法检查是否调用了 invoke() 方法？

如果您将引用传递给某人，`AbstractCreateActionHandler`那么调用者将无法看到该方法`executeAction`，因为它在类中*不是公共*`AbstractCreateActionHandler`的。因此，如果您将对基类的引用传递给调用者，调用者将**无法绕过执行顺序。**如果您传递对 Concrete 类的引用，则可以破坏序列。

# c# - 使用 LINQ 查询对内部中继器进行排序

> ID：15683284
> 
> 赞同：4
> 
> 时间：2013-03-28T13:34:03.087
> 
> 标签：c#, asp.net, linq, asprepeater

我试图列出一组关联，在每个关联中都有一个分配给关联的“小部件”。该列表将包括关联名称和分配给它的任何小部件。问题是内部小部件列表需要按 DisplaySequence 排序。

**EDMX 型号如下：** ![EDMX 模型](../Images/19e5778cf92c4664fa6147698b1dda7e.png)

**简化的中继器标记**

```
<asp:Repeater ID="rptAssociations" runat="server">
    <ItemTemplate>      
        <div data-type="assn" id="<%# ((Association)Container.DataItem).AssociationID %>">
            <h3 style="margin-top:15px;"><%# ((Association)Container.DataItem).Acronym %> - <%# ((Association)Container.DataItem).Name %></h3> 
            <asp:Repeater runat="server" ID="rptWidgets" DataSource="<%# ((Association)Container.DataItem).AssociationWidgets %>" >
                <HeaderTemplate>                
                    <ul class="WidgetList">
                </HeaderTemplate>
                <ItemTemplate>
                    <li id="<%# ((AssociationWidget)Container.DataItem).DisplaySequence %>"><%# ((AssociationWidget)Container.DataItem).Widget.Name %></li>
                </ItemTemplate>
                <FooterTemplate>
                    </ul>
                </FooterTemplate>
            </asp:Repeater>
        </div>      
    </ItemTemplate>
</asp:Repeater> 
```

**当前查询**

```
var associations = (from a in 
    context.Associations.Include("AssociationWidgets")
                        .Include("AssociationWidgets.Widget")
    orderby a.Acronym
    select a).ToList();

rptAssociations.DataSource = associations;
rptAssociations.DataBind(); 
```

我目前能够通过我现在拥有的设置获取我正在寻找的数据。我正在寻找获取相同数据的最有效方法，但是，以正确的显示顺序列出小部件。

我应该采用不同的 linq 查询方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:41:34.813

我会这样处理（未经测试）：

```
var associations = 
    context.Associations.Select( a => 
       new {
          //... specific properties you need 
          AssociationId = a.AssociationId,
          Name = a.Name,
          ... etc
          Widgets = a.AssociateWidgets.OrderBy(aw => aw.DisplaySequence)
                                      .Select(aw => aw.Widget)
       }
    ); 
```

在这里，您将获得一组匿名类型。您可以使用具体类型，例如

```
public class AssociationInfo
{
    public string Name {get;set;}
    ...
    public IEnumerable<Widget> Widgets{ get;set; }
} 
```

如有必要，替换 `'new {'`为`'new AssociationInfo {'`

# c# - 所有复选框的单个事件处理程序

> ID：15683285
> 
> 赞同：1
> 
> 时间：2013-03-28T13:34:06.637
> 
> 标签：c#, winforms, event-handling, controls

我正在尝试轻松制作自定义复选框。我想通过选中状态在每个复选框的顶部绘制一个图像。如何为**所有**复选框创建**单个**事件处理程序？我有很多复选框，我不想为它编写每个事件处理程序：

 **```
 private void checkbox1_Paint(object sender, PaintEventArgs e)
    {
        Rectangle rect = new Rectangle(0, 0, 16, 16);
        if (checkbox1.Checked)
        {
            e.Graphics.DrawImage(Properties.Resources.checkbox_checked, rect);
        }
        else
        {
            e.Graphics.DrawImage(Properties.Resources.checkbox_unchecked, rect);
        }
    }
    private void checkbox2_Paint(object sender, PaintEventArgs e)
    {
        Rectangle rect = new Rectangle(0, 0, 16, 16);
        if (checkbox2.Checked)
        {
            e.Graphics.DrawImage(Properties.Resources.checkbox_checked, rect);
        }
        else
        {
            e.Graphics.DrawImage(Properties.Resources.checkbox_unchecked, rect);
        }
    }
    // etc... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:36:44.143

将此处理程序分配给所有复选框。请注意我如何`sender`转换以`CheckBox` 获取触发事件的控件。

```
private void checkbox_Paint(object sender, PaintEventArgs e)
{
    var checkbox = sender as CheckBox // Here you get the current checkbox
    Rectangle rect = new Rectangle(0, 0, 16, 16);
    if (checkbox.Checked)
    {
        e.Graphics.DrawImage(Properties.Resources.checkbox_checked, rect);
    }
    else
    {
        e.Graphics.DrawImage(Properties.Resources.checkbox_unchecked, rect);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:36:24.007

您可以多次使用相同的方法，只需在 Paint 事件中分配它（通过设计器或代码）。

获取当前复选框将发件人转换为复选框。

```
private void checkbox1_Paint(object sender, PaintEventArgs e)
{
CheckBox chk = sender as CheckBox;
..
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:36:38.717

我假设这是基于上下文的 Windows 窗体？

您选择每个`checkbox`（您可以在表单设计器上进行多选），单击面板中的闪电`Properties`，找到 Paint 事件并将您的方法名称：`checkbox1_Paint` 放在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:26:56.150

其实我自己找到了答案。这比手动将绘制事件分配给每个复选框更容易，因为它是通过编程完成的。

```
public void SetAllCheckboxes(Control where)
{
    foreach (Control control in where.Controls)
    {
        if (control.GetType().Name == "CheckBox")
            control.Paint += new PaintEventHandler(this.checkbox_Paint);
        else if (control.Controls.Count > 0)
            SetAllCheckboxes(control);
    }
} 
```

然后就调用它：

```
SetAllCheckboxes(this); 
```**

# linux - 如何以特定用户身份启动/停止/重新启动服务并记录此操作？

> ID：15683293
> 
> 赞同：0
> 
> 时间：2013-03-28T13:34:20.560
> 
> 标签：linux, shell, service, logic

我想以用户身份执行我的`/sbin/service storm start`脚本`storm_deployer`。所以为此我创建了一个用户`storm_deployer`并将其添加到`/etc/sudoers`

```
hornet_deployer ALL=(ALL) NOPASSWD:/sbin/service 
```

并`storm`在`/etc/init.d`

```
#!/bin/bash
#===================================================================================
#FILE: storm
#USAGE: storm [start] [stop] [status]
#DESCRIPTION: storm start, stop, restart service
#
#OPTIONS:
# REQUIREMENTS: ---
# BUGS: ---
# NOTES: ---
#
#AUTHOR: Valter Henrique, valter.silva@company.com
#COMPANY: company
#VERSION: 1.0
#CREATED: 03.27.13
#REVISION: 03.27.13
#===================================================================================
#
# chkconfig: 345 90 12
# description: storm start, stop, restart service
# processname: storm
#
# Get function from functions library
. /etc/init.d/functions

folder=/company/storm/bin #folder to the application
service="storm" #name of the service

startup=$folder/run.sh
shutdown=$folder/stop.sh
deployer=storm_deployer
process="63987524-22fc-4674-8896-11230716bc62"

#=== FUNCTION ================================================================
#
#NAME: start
# DESCRIPTION: Start the service storm
# PARAMETER 1: ---
#===============================================================================
start() {

  #----------------------------------------------------------------------
  # getting the process PID
  #----------------------------------------------------------------------
  pid_process=`ps -ef | grep $process | grep -v grep |awk -F' ' '{ print $2 }'`;

  if [ $pid_process ]; then
    echo "#######################"
    echo "$service is running!"
    echo "Stop then first!"
    echo "#######################"
  else
    action $"Starting $service: " su - $deployer -c $startup
    RETVAL=$?
  fi
}

#=== FUNCTION ================================================================
#
#NAME: stop
# DESCRIPTION: Stop the service storm
# PARAMETER 1: ---
#===============================================================================
stop() {

  #----------------------------------------------------------------------
  # getting the process PID
  #----------------------------------------------------------------------
  pid_process=`ps -ef | grep $process | grep -v grep |awk -F' ' '{ print $2 }'`;

  if [ $pid_process ]; then
    action $"Stopping $service: " su - $deployer -c $shutdown
    RETVAL=$?
  else
    echo "#######################"
    echo "$service is not running"
    echo "#######################"
  fi
}

#=== FUNCTION ================================================================
#
# NAME: status
# DESCRIPTION: Status of the service
# PARAMETER 1: ---
#===============================================================================
status() {

  #----------------------------------------------------------------------
  # getting the process PID
  #----------------------------------------------------------------------
  pid_process=`ps -ef | grep $process | grep -v grep |awk -F' ' '{ print $2 }'`;

 if [ $pid_process ]; then
    echo "#######################"
    echo "$service is RUNNING"
    echo "#######################"
  else
    echo "#######################"
    echo "$service is NOT RUNNING"
    echo "#######################"
  fi
}

#----------------------------------------------------------------------
# Main Logic
#----------------------------------------------------------------------
case "$1" in
  start)
        start
        ;;
  stop)
        stop
        ;;
  status)
        status
        ;;
  restart|reload|condrestart)
        stop
        start
        ;;
  *)
        echo $"Usage: $0 {start|stop|restart|reload|status}"
        exit 1
esac
exit 0 
```

`storm_deployer`因此，我以用户身份登录`sudo su storm_deployer`并运行，`/sbin/service hornet start`但每次运行此服务时都会询问密码。

**更新**

我的 /et/sudoers

```
## Sudoers allows particular users to run various commands as
## the root user, without needing the root password.
##
## Examples are provided at the bottom of the file for collections
## of related commands, which can then be delegated out to particular
## users or groups.
## 
## This file must be edited with the 'visudo' command.

## Host Aliases
## Groups of machines. You may prefer to use hostnames (perhap using 
## wildcards for entire domains) or IP addresses instead.
# Host_Alias     FILESERVERS = fs1, fs2
# Host_Alias     MAILSERVERS = smtp, smtp2

## User Aliases
## These aren't often necessary, as you can use regular groups
## (ie, from files, LDAP, NIS, etc) in this file - just use %groupname 
## rather than USERALIAS
# User_Alias ADMINS = jsmith, mikem

## Command Aliases
## These are groups of related commands...

## Networking
#Cmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping, /sbin/dhclient, /usr/bin/net, /sbin/iptables, /usr/bin/rfcomm, /usr/bin/wvdial, /sbin/iwconfig, /sbin/mii-tool

## Installation and management of software
#Cmnd_Alias SOFTWARE = /bin/rpm, /usr/bin/up2date, /usr/bin/yum

## Services
#Cmnd_Alias SERVICES = /sbin/service, /sbin/chkconfig

## Updating the locate database
#Cmnd_Alias LOCATE = /usr/bin/updatedb

## Storage
#Cmnd_Alias STORAGE = /sbin/fdisk, /sbin/sfdisk, /sbin/parted, /sbin/partprobe, /bin/mount, /bin/umount

## Delegating permissions
#Cmnd_Alias DELEGATING = /usr/sbin/visudo, /bin/chown, /bin/chmod, /bin/chgrp 

## Processes
#Cmnd_Alias PROCESSES = /bin/nice, /bin/kill, /usr/bin/kill, /usr/bin/killall

## Drivers
#Cmnd_Alias DRIVERS = /sbin/modprobe

# Defaults specification

#
# Disable "ssh hostname sudo <cmd>", because it will show the password in clear. 
#         You have to run "ssh -t hostname sudo <cmd>".
#
#Defaults    requiretty
# 
# Refuse to run if unable to disable echo on the tty. This setting should also be
# changed in order to be able to use sudo without a tty. See requiretty above.
#
Defaults   !visiblepw

Defaults    env_reset
Defaults    env_keep = "COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR \
                        LS_COLORS MAIL PS1 PS2 QTDIR USERNAME \
                        LANG LC_ADDRESS LC_CTYPE LC_COLLATE LC_IDENTIFICATION \
                        LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC \
                        LC_PAPER LC_TELEPHONE LC_TIME LC_ALL LANGUAGE LINGUAS \
                        _XKB_CHARSET XAUTHORITY"

## Next comes the main part: which users can run what software on 
## which machines (the sudoers file can be shared between multiple
## systems).
## Syntax:
##
##      user    MACHINE=COMMANDS
##
## The COMMANDS section may have other options added to it.
##
## Allow root to run any commands anywhere 
root    ALL=(ALL)       ALL

User_Alias SUPERADMIN = %superadmin

SUPERADMIN ALL=(ALL) NOPASSWD: ALL
hornet_deployer ALL=(ALL) NOPASSWD:/sbin/service

## Allows members of the 'sys' group to run networking, software, 
## service management apps and more.
# %sys ALL = NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE, DRIVERS

## Allows people in group wheel to run all commands
# %wheel        ALL=(ALL)       ALL

## Same thing without a password
# %wheel        ALL=(ALL)       NOPASSWD: ALL

## Allows members of the users group to mount and unmount the 
## cdrom as root
# %users  ALL=/sbin/mount /mnt/cdrom, /sbin/umount /mnt/cdrom

## Allows members of the users group to shutdown this system
# %users  localhost=/sbin/shutdown -h now
nagios ALL=(ALL) NOPASSWD:/bin/touch, /bin/rm
User_Alias SUPERSUDOERS = %supersudoers
SUPERSUDOERS ALL=NOPASSWD:/usr/sbin/tcpdump,/sbin/service,/usr/bin/kill,/usr/bin/killall,/usr/bin/iptraf 
```

~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:07:21.830

sudoers 文件中的这一行：

```
hornet_deployer ALL=(ALL) NOPASSWD:/sbin/service 
```

是在所有其他组/用户之后还是像这样（介于两者之间）？

```
root    ALL=(ALL:ALL) ALL
hornet_deployer ALL=(ALL) NOPASSWD:/sbin/service
%admin ALL=(ALL) ALL
%sudo   ALL=(ALL:ALL) ALL 
```

# php - Yii 向模板添加另一个 $content

> ID：15683295
> 
> 赞同：4
> 
> 时间：2013-03-28T13:34:28.997
> 
> 标签：php, javascript, yii

我有 Yii 模板的结构是：

1.  将 CSS 文件包含在
2.  回显 $content 之后
3.  在 $content 之后包含 Javascript 文件（如 JQPlot）

我想做的是在包含所有 Javascript 文件之后添加 Javascript/PHP 代码的自定义组合。我知道这可以通过将代码添加到模板中来完成。

但是我有许多带有自定义 JS/PHP 代码的页面，我想只包含该页面的特定代码以避免加载时间过长。

我可以创建像 $content 一样工作的新元素，但它会包括例如来自与“index.php”相同的视图文件夹中的“js.php”？“js.php”将位于我需要自定义代码的每个视图文件夹中，并包含该特定页面的 js/php 代码组合。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:28:01.477

你可以试试：

**Yii::app()->clientScript->registerCssFile(Yii::app()->baseUrl.'/css/example.css');**
**Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl.'/css/example.js');**

您可以从控制器调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:52:41.627

剪辑是您最好的选择，正如@jfrej 通过将您指向讨论剪辑的论坛主题所建议的那样。

**在常规情况下，每个控制器都关联了一个放置其所有视图的文件夹，并且您希望在布局**末尾包含一些 PHP+Javascript 内容（这是引用它们的方式，而不是*模板*）这对于控制器中的所有操作都是通用的。

我会覆盖`CController::afterRender()`方法来为您的剪辑捕获内容；让我们打电话给你的剪辑`controller_content`：

```
afterRender(string $view, string &$output)
    $this->beginClip('controller_content');
    // output here any content you want to capture into your clip
    // e.g. renderPartial, echo, etc.
    ...
    $this->endClip();
    parent::afterRender($view, $output);
} 
```

然后，在您的布局中，您将在始终存在的所有内容之后渲染您的剪辑，例如：

```
// register your CSSs
// output $content variable
// register Javascript
...
<?= $this->clips['controller_content'] ?> 
```

当然，您可以通过多种方式生成剪辑内容。在这里，我覆盖了该`CController::afterRender()`方法，但您也可以使用过滤器、行为或任何其他最适合您需求的方法。

# java - 当 sonar 对 webapp 进行分析时，它只是在分析 java 代码吗？

> ID：15683296
> 
> 赞同：1
> 
> 时间：2013-03-28T13:34:30.070
> 
> 标签：java, sonarqube

当声纳对 webapp 进行分析时，它只是分析 java 代码吗？

在仪表板上，指定的语言是“java”，所以我假设代码的总行数和所有指标都基于 java 代码。声纳工具不包括 .jsp 、 .css 、 .html 文件等。很明显它不包括 .css 文件，但我只是确保。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:09:23.170

目前，Sonar 只能同时分析一种语言。因此，如果您没有指定其他语言（通过“sonar.language”属性），Sonar 将仅分析您的应用程序的 Java 代码。

# php - SoapFault 异常：[HTTP] SSL 支持在此版本中不可用

> ID：15683297
> 
> 赞同：2
> 
> 时间：2013-03-28T13:34:29.950
> 
> 标签：php, soap, https, openssl

我正在尝试发送安全的肥皂消息，但收到此错误： *SoapFault 异常：[HTTP] SSL 支持在此版本中不可用*

我可以毫无问题地向我的服务器发出 https 请求。我还确保：

1.  extension=php_openssl.dll 在我的 php.ini 中存在且未注释
2.  LoadModule ssl_module modules/mod_ssl.so 在我的 httpd.conf 中存在且未注释

当我查看我的 phpinfo SSL 时，除了 PHAR 之外的所有地方都显示为已启用（我怀疑它在那里很重要，但如果我弄错了，请纠正我）。

如果有帮助，我将在 Windows 上使用 XAMPP。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T05:37:44.517

对于 Unix-

添加此行/取消注释此行。

```
extension=openssl.so 
```

对于 Windows-

添加此行/取消注释此行。

```
extension=php_openssl.dll 
```

# devexpress - 如何在报告表中动态创建特定数量的行

> ID：15683298
> 
> 赞同：1
> 
> 时间：2013-03-28T13:34:33.663
> 
> 标签：devexpress, xtrareport

问题有点奇怪。我的数据源对象有一些布尔属性，我想根据这些属性的值创建一个包含行数的表。例如，如果值为 True、True、False，我需要 2 行。如何完成这样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:44:40.777

您可以使用 XRTable。在那里，您可以轻松地动态添加行。只需创建 XRTableRow 对象。用一些 XRTableCell 对象填充它，然后说：

```
XRTable.InsertRowBelow(); 
```

因此，您可以遍历对象并 foreach boolean = true，创建一行并将其插入表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:10:54.743

我建议您使用[XtraReportBase.FilterString 属性](http://documentation.devexpress.com/#XtraReports/DevExpressXtraReportsUIXtraReportBase_FilterStringtopic)来过滤数据源中的行。

# eclipse - 如何在 Eclipse 中配置 Java EE maven 项目？

> ID：15683299
> 
> 赞同：7
> 
> 时间：2013-03-28T13:34:35.087
> 
> 标签：eclipse, maven, java-ee-6

我非常了解 Maven，但我通常使用 Netbeans，这使得部署 Java EE 应用程序非常容易 - 并处理任何更改的热部署。

现在与我合作的团队使用 Eclipse 作为他们选择的 IDE，但他们之前都没有使用过 Maven 项目；所以我需要知道如何正确地将 Eclipse 的项目方面添加到我们拥有的 maven 项目中，以便通过 WTP 支持（热）部署。我们正在使用 Weblogic 12c 来完成这项特殊的工作。

我们的项目布局非常简单：

```
super-project (pom)
    project-ear (pom)
    project-ejb (pom)
    project-web (pom) 
```

感谢您可以指出我的任何资源。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-29T01:36:14.643

我想您已经为 Eclipse 安装了所有必需的插件。正如@Michał Politowski 提到的，[M2E](http://eclipse.org/m2e/)、[M2E-WTP](http://www.eclipse.org/m2e-wtp/)等等。

### 添加原型目录

1.  转到菜单`Window--->Preferences`。

2.  在`Preferences window`, 选择`Maven---->Archetypes`,

3.  在 上`Right Panel`，单击`Add Remote Catalog...`按钮。

4.  在`Remote Archetype Catalog windows`输入以下内容： -

    1.  `Catalog file`：[http ://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)
    2.  `Description`Maven 中心
5.  添加更多远程目录。

    1.  `Catalog file`：http: [//download.java.net/maven/2](http://download.java.net/maven/2)
    2.  `Description`Java.Net
6.  单击`OK`以应用更改。

### 创建父项目

1.  转到菜单`File ---> New ---> Other`。
2.  在 处`Select Wizard Windows`，选择`Maven ---> Project`。
3.  单击下一步并输入所需的信息，以便我们在`New Maven Project`.
4.  在`Filter`文本框中，输入`pom`
5.  选择`org.codehaus.mojo.archetypes:pom-root:1.1`
6.  单击下一步并输入所需信息，以便完成父级创建。

### 创建子项目

1.  右键单击父项目并选择`New ---> Other`.
2.  1.  在 处`Select Wizard Windows`，选择`Maven ---> Project`。
3.  单击下一步并输入所需的信息，以便我们在`New Maven Project`.
4.  你会看到`Parent Project`=`MY PARENT`
5.  输入`Module name`，例如 my-ear、my-ejb 或 my-web。然后点击`Next`按钮，
6.  在`Filter`文本框中，输入以下一些内容
    1.  `org.codehaus.mojo.archetypes:webapp-javaee6:1.5`
    2.  `org.codehaus.mojo.archetypes:ejb-javaee6:1.5`
    3.  `org.codehaus.mojo.archetypes:ear-javaee6:1.5`
7.  单击下一步并输入所需信息，以完成子项创建。

### 概括

我同时使用了 NetBeans 7.x 和 Eclipse Juno。当我搬到 Eclipse 时，我遇到的问题和你的一样。然后我从 NetBeans 日志中一一捕获上述步骤，并使用 Eclipse 手动执行相同的操作。

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-08T23:45:22.713

我会做一个小改动：

创建子项目

```
Right click at the parent project and select New ---> Other.
    At the Select Wizard Windows, select Maven ---> **Maven Module** 
```

这样它会自动将其识别为父项目的子项目。

# javascript - 将 html 标签添加到 JSLint

> ID：15683303
> 
> 赞同：0
> 
> 时间：2013-03-28T13:35:00.910
> 
> 标签：javascript, jslint

如何将 html 标签添加到 JSLint ？

我的消息有一些错误：

```
JSLint: Unrecognized tag 'foo'. 
```

我想将标签*foo*添加到 JSLint 识别的 html_tag 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:38:15.797

除了编辑 JSLint 源代码本身之外，没有其他方法可以做到这一点。如果这是您愿意做的事情，那将非常简单。只需将您的标签添加到[`html_tag`对象](https://github.com/douglascrockford/JSLint/blob/d9c3940eaef07669324843394fae6c01f3146d6d/jslint.js#L751)：

```
html_tag = {
    a:        {},
    abbr:     {},
    // etc...
},
// ... 
```

但是，我会考虑您实际上首先要实现的目标...如果该`foo`标签不在列表中，则它不是有效的 HTML 标签。

**但是**……请注意，在[最近的一次提交](https://github.com/douglascrockford/JSLint/commit/267939b9168419312782a8533e35c60243215d56)中，从 JSLint 中删除了 HTML 支持。如果您希望它能够正常工作，您将需要使用旧版本。

# bash - 如何在一个变量中指定命令参数？

> ID：15683304
> 
> 赞同：0
> 
> 时间：2013-03-28T13:35:02.693
> 
> 标签：bash, shell, curl

在测试脚本中，我多次使用命令“curl”。为了优化代码，我希望“curl”选项在全局变量中执行。

我阅读了“curl”的使用条款，它说要传递包含空格的参数必须用单引号括起来。

但它不起作用。

```
$ curl_options="-i -L -k -S --connect-timeout 30 --user-agent 'Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.14'"
$ curl $curl_options "http://google.com" 
```

输出结果：

```
curl: (6) Couldn't resolve host'' Opera ' 
curl: (6) Couldn't resolve host '(Windows' 
curl: (6) Couldn't resolve host 'NT' 
curl: (6) Couldn't resolve host '6 .1; ' 
curl: (6) Couldn't resolve host 'WOW64)' 
curl: (6) Couldn't resolve host 'Presto' 
curl: (6) Couldn't resolve host 'Version' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:41:16.247

在`bash`中，您应该使用数组。这样，您不必担心字符串中的空格是选项的一部分，还是分隔两个选项：

```
curl_options=( ... )
curl_options+=( "--user-agent" "Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.14")

curl "${curl_options[@]}" "http://google.com" 
```

* * *

如果您不能使用数组（例如，它们在您使用的 shell 中不可用），您将不得不回退到 using `eval`：

```
$ curl_options="-i -L -k -S --connect-timeout 30 --user-agent 'Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.14'"
$ eval "curl $curl_options http://google.com" 
```

这并不理想，因为您需要非常小心如何设置 的值`curl_options`，因为`eval`不知道*该*值代表什么。shell 只是将值插入到传递给的字符串中`eval`，然后`eval`执行它。错别字可能会产生意想不到的后果。

# php - 排除组正则表达式

> ID：15683309
> 
> 赞同：0
> 
> 时间：2013-03-28T13:35:18.543
> 
> 标签：php, regex

我在 Stackoverflow 中搜索了许多线程，但没有找到与我的案例相关的任何内容。

这是源文本：

```
<span class="red"><span>70</span><span style="display:none">1</span><span>,89</span> € TTC<br /></span> 
```

我想用正则表达式提取 70,89。

所以我尝试了：

```
<span class="red"><span>([0-9]+)(<\/span><span style="display:none">1<\/span><span>)(,[0-9]+)<\/span> 
```

它返回一个包含 3 个组的数组（在 PHP 中使用 preg_match_all）：

1/ 70

2/

```
</span><span style="display:none">1</span><span> 
```

3/ ,89

我想排除第 2 组并合并 1 和 3。

所以我也试过：

```
<span class="red"><span>([0-9]+)(?:<\/span><span style="display:none">1<\/span><span>)(,[0-9]+)<\/span> 
```

但它返回：

1.  70
2.  ,89

如何合并两个组？

非常感谢您的回答，我会疯狂地寻找这个正则表达式！:)

祝你有美好的一天 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:41:14.193

只需匹配用 plain 包裹的数字`<span>`：

```
$str = '<span class="red"><span>70</span><span style="display:none">1</span><span>,89</span> € TTC<br /></span>';

if (preg_match_all('#<span>([,\d]+)</span>#', $str, $matches)) {
    echo join('', $matches[1]);
}
// output: 70,89 
```

# c# - WPF添加datagrid图像列可能吗？

> ID：15683314
> 
> 赞同：12
> 
> 时间：2013-03-28T13:35:34.047
> 
> 标签：c#, wpf, datagrid

使用 C#.Net 4.5、Visual Studio 2012 Ulti、WPF。

我有一些旧的 win-forms 代码，我想在这个新的 WPF 应用程序中执行这些代码。

代码如下：

```
DataGridViewImageCell pNew = new DataGridViewImageCell();

ParetoGrid.Columns.Add(new DataGridViewImageColumn() { CellTemplate = pNew, FillWeight = 1, HeaderText = "pNew", Name = "pNew", Width = 30 });

ParetoGrid.Columns["pNew"].DisplayIndex = 18; 
```

3 行代码添加一个可以处理图像的列。在 WPF 中，我看到它有点不同。我需要添加“图像列”吗？或者 WPF 列是否支持图像？还是有另一种语法不同的 3 班轮解决方案？

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T13:39:58.963

看到这个答案：

[WPF DataGrid 中的图像列](https://stackoverflow.com/questions/7938779/image-column-in-wpf-datagrid)

```
 <DataGridTemplateColumn Header="Image" Width="SizeToCells"
 IsReadOnly="True">
   <DataGridTemplateColumn.CellTemplate>
      <DataTemplate>
           <Image Source="{Binding Image}" />
      </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

在代码中添加一列之后：

```
DataGridTextColumn textColumn1 = new DataGridTextColumn();
textColumn1.Header = "Your header";
textColumn1.Binding = new Binding("YourBindingField");
dg.Columns.Add(textColumn1); 
```

用于`DataGridTemplateColumn`添加自定义列请参阅：[如何以编程方式在 wpf datagrid 列中显示图像？](https://stackoverflow.com/questions/1951839/how-do-i-show-image-in-wpf-datagrid-column-programmatically)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-24T05:10:13.683

这就是我所做的。使用这样的图像控件在数据网格中添加数据模板

```
 <DataGridTemplateColumn Header="File Type" Width="*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Height="25" Width="50" Source="{Binding FileIcon}"  />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

如您所见，我正在将 Image 与一个名为“FileIcon”的属性绑定，该属性在类版本中使用，如下所示

```
 public class Version
            {
              public string FileIcon { get; set; }
            } 
```

现在您要做的就是绑定提供“FileIcon”的路径并像这样更新DataGrid的ItemSource

```
 ObservableCollection<Version> items = new ObservableCollection<Version>();

            items.Add(new Version()
            {
                FileIcon = "/AssemblyName;component/Images/eye.png",
            });
            YourDataGrid.ItemsSource = null;
            YourDataGrid.ItemsSource = items; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-08T05:28:07.690

这是 MainWindow.xaml 的代码，只是为了更好地理解

`

```
<Window x:Class="Pic_in_Datagrid.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Pic_in_Datagrid"
        mc:Ignorable="d"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <DataGrid x:Name="dt1" ColumnWidth="*" AutoGenerateColumns="False">

        </DataGrid>
    </Grid>
</Window> 
```

之后是我的 MainWindow.xaml.cs 的图像或文本代码，用于动态添加 datadrid ......

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Windows;
using System.Windows.Data;
using System.Windows.Media.Imaging;
using System.Windows.Controls;    
namespace Pic_in_Datagrid
        {
            /// <summary>
            /// Interaction logic for MainWindow.xaml
            /// </summary>
            public partial class MainWindow : Window
            {
                public StudentData stu_data { get; set; }
                public MainWindow()
                {
                    InitializeComponent();
                    stu_data = new StudentData();

                    List<StudentData> stu = new List<StudentData>();
                    stu.Add(new StudentData() { image = toBitmap(File.ReadAllBytes(@"D:\1.jpg")), stu_name = "abc" });
                    stu.Add(new StudentData() { image = toBitmap(File.ReadAllBytes(@"D:\1.jpg")), stu_name = "def" });

                    FrameworkElementFactory factory = new FrameworkElementFactory(typeof(System.Windows.Controls.Image));
                    Binding bind = new System.Windows.Data.Binding("image");//please keep "image" name as you have set in your class data member name
                    factory.SetValue(System.Windows.Controls.Image.SourceProperty, bind);
                    DataTemplate cellTemplate = new DataTemplate() { VisualTree = factory };
                    DataGridTemplateColumn imgCol = new DataGridTemplateColumn()
                    {
                        Header = "image", //this is upto you whatever you want to keep, this will be shown on column to represent the data for helping the user...
                        CellTemplate = cellTemplate
                    };
                    dt1.Columns.Add(imgCol);

                    dt1.Columns.Add(new DataGridTextColumn()
                    {
                        Header = "student name",
                        Binding = new Binding("stu_name") //please keep "stu_name" as you have set in class datamember name
                    });

                    dt1.ItemsSource = stu;    
                }

                public static BitmapImage toBitmap(Byte[] value)
                {
                    if (value != null && value is byte[])
                    {
                        byte[] ByteArray = value as byte[];
                        BitmapImage bmp = new BitmapImage();
                        bmp.BeginInit();
                        bmp.StreamSource = new MemoryStream(ByteArray);
                        bmp.EndInit();
                        return bmp;
                    }
                    return null;
                }
            }

           public class StudentData
           {
                    public BitmapImage image { get; set; }
                    public string stu_name { get; set; }
            }
        } 
```

以上所有代码均取自不同的资源...感谢开发和共享这些代码的他们...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T09:51:30.093

您可以尝试通过以下模式将 Image 添加到 DataGridTextColumn。您可以排序并复制到剪贴板效果很好。使用您的转换器，或绑定到您的财产。

```
<DataGridTextColumn  Header="Level"  IsReadOnly="True" Binding="{Binding Level,Converter={StaticResource LogLevelStringConverter}}"   >
    <DataGridTextColumn.CellStyle>
        <Style TargetType="DataGridCell" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Grid Background="{TemplateBinding Background}" >
                            <ContentPresenter VerticalAlignment="Center" Margin="20,0,0,0" HorizontalAlignment="Left"  />
                            <Image Grid.Column="0" Width="18" Height="18" Source="{Binding Level,Converter={StaticResource LogLevelIconConverter}}"  HorizontalAlignment="Left" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </DataGridTextColumn.CellStyle>
</DataGridTextColumn> 
```

# r - 将数据存储在 100 个对象中以供以后检索的最佳方式？

> ID：15683323
> 
> 赞同：0
> 
> 时间：2013-03-28T13:36:03.413
> 
> 标签：r

在进行排序时，我通常将`TraMineR`'s`seqdef`函数应用于数据集以生成单个序列对象：

```
sequence_object <- seqdef(data) 
```

但是，假设我想遍历一个数据帧并为每 10 列的每个块生成 1 个序列对象。然后我会做这样的事情：

```
colpicks <- seq(10,1000,by=10)
mapply(function(start,stop) seqdef(df[,start:stop]), colpicks-9, colpicks) 
```

现在，我想以某种合适的方式存储这些对象。两个问题：

1.  存储（或者可能只是自动命名）100 个对象的最合适的方式是什么，以便我以后可以轻松地遍历它们中的每一个？
2.  如何修改上面的代码，以便根据您对 (1) 的回答存储数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:46:23.417

“最合适”是完全主观的，取决于你的目标。
我假设这个问题与你之前的问题有关，因此我建议将`simplify`参数设置`mapply`为 FALSE

```
myMatrixList <- mapply(.... , simplify=FALSE) 
```

但是，即使这样也不是必需的，因为您可以结合`sapply`上一个问题中的并跳过中间步骤

# java - Netbeans (7.3) - 如何在一个项目中创建“Java Web 应用程序”和 HTML/JavaScript“HTML 5 应用程序”？

> ID：15683324
> 
> 赞同：1
> 
> 时间：2013-03-28T13:36:15.820
> 
> 标签：java, html, netbeans-7

我想创建一个基于“HTML Web 应用程序”项目类型的新 Netbeans 7.3 项目，但它还需要与服务器通信，所以我想添加“Java Web 支持”，但它们已列出作为两个独立的项目类型。

如何创建 Java Web 应用程序并将 HTML 5 支持添加到其中？创建“合并”项目类型需要哪些步骤？ ![在此处输入图像描述](../Images/595d80ebf2ebe50f69bbceba19863c21.png) ![在此处输入图像描述](../Images/e7d659049542ee8d0da2e713d1162e29.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:44:32.033

显然它还没有紧密集成在 Netbeans 中，但我能够通过创建两个单独的项目然后进入 Web 应用程序项目属性并在“打包”选项卡中添加一个条目来做到这一点（参见屏幕截图）。

![在此处输入图像描述](../Images/93a6a36d735526fa50fd415ec28ba554.png)

# java - 在 loadrunner 9.52 中使用 java over WEB(http/html) 协议

> ID：15683325
> 
> 赞同：0
> 
> 时间：2013-03-28T13:36:20.660
> 
> 标签：java, http, scripting, loadrunner

我是 loadrunner 工具的新手，我在某处读到 loadrunner 支持 Java 作为脚本语言。我要做的是选择 WEB(html/http) 协议，在记录设置时，我只能看到 C 语言而不是 Java。谁能告诉我解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:38:25.117

Java over HTTP 适用于使用 HTTP 作为传输机制而不是直接套接字连接或使用诸如 CORBA 或 RM/I 之类的解决方案来处理 Java 到 Java 进程间通信时

Java 作为 LoadRunner 的一种语言以多种形式受到支持。您可以拥有直接的 Java 模板虚拟用户，也可以将基于 Web 的虚拟用户（默认记录 C）转换为 VB 或 Java 作为语言。

由于您是 LoadRunner 的新手，因此您应该期待以下内容

*   如果有人没有审查您作为绩效测试员的核心基础技能，那么现在应该完成并解决任何差距，或者您是否与另一位具有互补基础技能的测试员配对，以便您作为一个团队工作
*   训练。您应该接受有关流程和工具的培训
*   实习。成为一名性能测试员与成为一名石匠、水管工、电工、会计师甚至美容师没有什么不同。经过一段时间的培训并解决任何基础技能差距后，您应该接受专业大师的指导。将此称为作为性能测试专业人​​员的熟练/学徒阶段。根据您的基础技能强度以及对工具和概念的掌握程度，这段时间可能短至六个月或长达一年。如果你打了一年而且仍然很虚弱，那么最好找一个新的职业。

如果你被要求担任这个角色，那么那些要求你的人应该武装你以获得成功。上述模型在培养有效的性能测试专业人​​员方面具有公认的成功率。那些在模型之外取得成功的人是罕见的例外，他们通常受益于数十年的扎实工程经验和坚如磐石的基础技能。

期望花费大量时间阅读手册，特别是如果您没有从培训或实习中受益。作为一个从事这个行业近 20 年的人，我可以告诉你，缺乏正式的开发模型，你的效率将受到重创。那些缺乏扎实的基础技能并且没有通过培训和实习的人需要花费五到十倍的时间来完成与性能测试相关的核心任务，而交付品的整体质量较低。

# python - Eclipse 无法在虚拟环境中获取有关解释器的信息

> ID：15683329
> 
> 赞同：2
> 
> 时间：2013-03-28T13:36:29.147
> 
> 标签：python, django, eclipse, pydev

我在 Mac OS X 10.8 上。运行安装了 Pydev 的 Eclipse 4.2.2。

我有一个 Django 项目，由于明显的原因（库版本控制等），我在虚拟环境中运行

当我尝试将 Eclipse 指向虚拟环境的 bin 文件夹中的解释器“python2.7”时，Eclipse 会吐出无法获取解释器信息的错误。要么它不受支持（它是 2.7，所以我们在那里很好）或者它是一个无效的解释器（但我指的是别名）。

![文件夹](../Images/1dc39d42b5ed9a8ecab4b56424554e32.png) ![日食错误](../Images/d626412cbafd2f01368ca302b25a0b04.png)

有什么想法可能导致此问题，或解决此问题的步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:11:18.623

我最终重置了我的虚拟环境并解决了问题。我需要做的就是进入虚拟环境所在的目录并输入：

```
virtualenv . 
```

像魅力一样工作。

如果需要，可以在此处完成设置虚拟环境的完整步骤：http: [//simononsoftware.com/virtualenv-tutorial/](http://simononsoftware.com/virtualenv-tutorial/)

# silverlight - Resharper 在输出窗口中截断单元测试消息并显示父异常消息

> ID：15683335
> 
> 赞同：1
> 
> 时间：2013-03-28T13:36:40.107
> 
> 标签：silverlight, resharper, mstest

我正在运行 R# 7.1.2 并尝试使用 MS 单元测试框架测试 SL 项目。我的测试在 R# 中运行良好，但输出消息包括父异常（不仅仅是我的自定义消息）并且它们被截断：

例如，而不是

```
"No user context set" 
```

我明白了

```
Test method Some.Quite.Long.Namespace.And.Test_Method_Name threw exception: Microsoft.VisualStudio.T 
```

我什至不介意该消息是否包含程序集限定方法名称...

```
Test method Some.Quite.Long.Namespace.And.Test_Method_Name threw exception: Microsoft.VisualStudio.Blah.Blah.Blah, No user context set 
```

但相反它被截断了！

显然，很难判断单元测试是否由于预期的断言或其他问题（如配置问题）而失败

我在 R# 选项中找不到与此相关的任何内容...

有没有其他人有这个问题或知道问题可能是什么？我怀疑这与对单元测试框架的引用有关，因为我也无法使用该`[ClassInitialize]`属性（它抱怨签名中 arg #1 的类型错误，即使预期的类型是正确的！）

# flex4 - AIR 应用程序中的 Flex 注销功能

> ID：15683338
> 
> 赞同：0
> 
> 时间：2013-03-28T13:36:45.560
> 
> 标签：flex4, logout, navigatetourl

登录后，我在 Flex 4 AIR 应用程序中从 Login ViewStack 导航到 Application ViewStack。

在 Application ViewStack 中，数据网格和其他控件由来自服务器的数据填充。

现在，在注销时，我将切换回 Login ViewStack。但是，再次登录时，我可以看到之前填充的数据。

如何在注销时重置 Application ViewStack 中的所有字段。我想到了两种方法：

```
1\. Reset all fields in the Application ViewStack individually. But, then for every addition of control, I have to update logout.
2\. Could I use navigateToURL() in AIR application to solve this problem? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:30:19.963

根据您的描述，我有点困惑 - 我假设您的应用程序 ViewStack 有许多不同的视图，并且您需要在注销时让它们中的每一个都清除它们的状态。

我可以想到几个想法：1）让每个视图为注销事件添加一个事件侦听器，并在注销发生时调度该事件。事件侦听器将在注销发生时清除数据。

2) 遍历 ViewStack 子节点，并在每个子节点上调用一个注销方法。

我个人偏爱 (1)，因为 (2) 要求 ViewStack 的所有子项都实现注销方法 - 耦合太紧密而无法重用。

# opencv - ORB 特征检测器

> ID：15683340
> 
> 赞同：1
> 
> 时间：2013-03-28T13:36:47.373
> 
> 标签：opencv, feature-detection, homography, orb, pose-estimation

我正在使用 Open CV 开发一个减少 Marker 的增强现实项目。目前我正在使用 ORB 来检测特征并增强 3D 对象。到目前为止，模型的增强效果很好，但增强并不像预期的那样平滑。增强的 3D 模型很紧张。

有哪些可能的细化方法将导致帧之间的平滑相机姿态估计。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:32:44.983

大多数特征检测器固有的像素级精度可能会导致小的抖动。您可以尝试通过调用对检测到的点执行亚像素细化[`cv::cornerSubPix()`](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=cornersubpix#cornersubpix)。

一种相当常见的平滑姿势的方法是[双指数](http://en.wikipedia.org/wiki/Exponential_smoothing#Double_exponential_smoothing)滤波，它[声称](http://cs.brown.edu/~jjl/pubs/vr2003_laviola.pdf)以低计算成本获得高精度。第一个链接还提到了您可能希望实现的其他方法。

# c# - 评论中的错误..？

> ID：15683343
> 
> 赞同：0
> 
> 时间：2013-03-28T13:36:52.227
> 
> 标签：c#, visual-studio-2010, syntax-error

我收到了一些奇怪的错误，包括评论中的错误（见截图）。

视觉工作室 2010

面向 .NET 4

插件：

*   PInvoke.net
*   适用于 Visual Studio 2010 的 PowerCommands
*   生产力电动工具
*   SQL Server Compact 工具箱
*   视觉辅助 X

![评论中的错误。 也就是让我的意见错了](../Images/625fe9d414eb92154e0f597a60b77913.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:08:55.323

检查您正在使用哪些附加组件。有时他们会尝试验证路径（甚至在评论中）。虽然在我确定这可能是原因之前我还没有看到这会阻止构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:12:47.970

在我看来，有两种类型的错误：

1.  **语法错误**（例如`connection`下划线 - 可能是因为声明被注释掉了）。

2.  **语法错误**（例如评论中的“Dropbox”）。
    如今，大多数 IDE 使用字典（同义词库）检查您的文档注释中的拼写错误。如果一个词不在字典中，则加下划线。当然，语法检查通常无法识别路径，它只是将每个路径组件视为一个单词。

# c# - 在实现命令行标志时，我应该使用正斜杠 (/) 还是连字符 (-) 作为前缀？

> ID：15683347
> 
> 赞同：13
> 
> 时间：2013-03-28T13:36:59.357
> 
> 标签：c#, command-line, console-application, command-line-arguments

从命令行读取参数/标志时，他们是否有任何约定（书面或一般理解）何时使用**正斜杠**（/）或**连字符（-）？**

```
C:\> myprogram.exe -a
C:\> myprogram.exe /a 
```

根据我的经验，这两者似乎可以互换，但我没有使用足够的命令行工具来说明我发现了任何规则或模式。

是否有充分的理由使用它们中的任何一个？如果我愿意，理论上可以使用**星号(*) 吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T13:46:28.747

你可以（理论上）使用你想要的任何东西，因为参数只是传递给你的命令行程序的字符串。

Windows 约定似乎更喜欢使用正斜杠`ipconfig /all`，尽管有些程序采用连字符`gacutil -i`甚至是某种环境变量语法`setup SKUUPGRADE=1`。

*Nix 约定似乎更喜欢`-v`单字母参数的连字符`--verbose`和多字母参数的双连字符。

我倾向于更喜欢连字符，因为它们与操作系统无关（**正斜杠在某些操作系统中是路径分隔符**）并且用于更现代的 Windows 应用程序（例如 nuget）。

**编辑：**

这将是推荐一个执行 .NET 命令行参数解析的库的好地方：http: [//commandline.codeplex.com/](http://commandline.codeplex.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T13:49:38.200

另请参阅[命令行选项样式 - POSIX 还是什么？](https://softwareengineering.stackexchange.com/questions/70357/).

DOS 和 Windows 中的传统是使用正斜杠，如`/a`or `/extend`。使用的传统`-a`来自 Unix（也可能来自其他地方）。

有一个[GNU 标准](http://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html)，其中单个破折号用于单字母标志，例如`-e -d`，并且它们可以合并到`-ed`（因此`-ed`等同于`-e -d`）。然后多字母开关需要两个破折号，如`--extend --display`. 有时只需要写出足以推断出 switch 含义的单词，例如，如果没有其他 switch 以字母开头，则`--disp`可能是缩写。`--display``disp...`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T13:46:17.330

通常它`/`在 Windows 和`-`/`--`在 Unix 系统上用于短/长选项。但这没有规定，所以这实际上取决于你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-21T01:00:29.850

旧的 DOS 命令使用前缀 / 作为可选参数。Microsoft 现在正朝着支持 Posix 使用 - 表示参数的方向发展，如其 PowerShell 命令行标准文档中所述。这是因为他们的操作系统现在将 \ 和 / 都视为目录分隔符。

[https://technet.microsoft.com/en-us/library/ee156811.aspx](https://technet.microsoft.com/en-us/library/ee156811.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:42:24.440

你可以使用任何你想要的东西，或者根本不用主角。更重要的是遵守标准。当其他用户使用您的应用程序时，他们会认为在添加参数时包含 - 或 /，因为这是他们习惯的做法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T13:49:16.067

前导正斜杠 (/) 在 Windows 应用程序中很常见。在符合 POSIX 标准的应用程序中，单连字符 (-) 通常用于短选项（由单个字母组成的选项）。对于此类应用程序中的长选项，双连字符 (--) 很常见。

[有关 POSIX 信息，请参阅此链接。](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html "POSIX 标准。") [或者，请参阅此 SO 帖子。](https://stackoverflow.com/questions/2160083/what-is-the-general-syntax-of-a-unix-shell-command/2160165#2160165)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-15T22:33:31.080

约定是：

*   `-`对于单字母标志，它们可以链接起来（例如：`rm -Rf`与 相同`rm -R -f`）

*   `--`对于具有多个字母的标志（例如`rm --recursive --force`：）

Using`/`是 Windows 继承 DOS 的旧标准，DOS 继承自 CP/M，不宜用于新软件。它在非 Windows 系统上和对读者造成歧义。.NET 和 PowerShell 等现代 Microsoft 工具`-`用于标志，因此即使是 Microsoft 也不想再使用`/`了。

# javascript - 基于 URL 位置的 Jquery 重定向

> ID：15683348
> 
> 赞同：0
> 
> 时间：2013-03-28T13:37:09.627
> 
> 标签：javascript, regex, redirect

这就是我要解决的问题...

1.  仅当 URL 在 mydomain.com 上明确包含 /foldername/index.htm && /foldername/ 时，才会重定向到[http://www.example.com](http://www.example.com)
2.  URL 是否应该包含**任何**URL 参数 /foldername/index.htm?example 它不应该**重定向**
3.  所有其他 URL 不应重定向

这是我的 javascript，它不完整，但最终是我要解决的问题......

```
var locaz=""+window.location;
if (locaz.indexOf("mydomain.com") >= 0) {
    var relLoc = [
        ["/foldername/index.htm"],
        ["/foldername/"]
    ];
    window.location = "http://www.example.com"; 
} 
```

这是为了管理一些用户基于特定方式（如书签）点击的 URL。在不删除页面的情况下，我们希望在采取进一步行动之前监控有多少人点击了该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:09:29.327

页面不会总是在同一个域上，如果 url 包含`/foldername/pagename.htm`它是否也已经包含`/foldername`？因此，`&&`检查将是多余的。

试试下面的代码。

```
var path = window.location.pathname;

if  ( (path === '/foldername' || path === '/foldername/index.html') && !window.location.search ) {
    alert('should redirect');
} else {
    alert('should not redirect');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:57:43.423

```
var url = window.location;
var regexDomain = /mydomain\.com\/[a-zA-Z0-9_\-]*\/[a-zA-Z0-9_\-]*[\/\.a-z]*$/    
if(regexDomain.test(url)) { 
  window.location = "http://www.example.com"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:44:17.780

熟悉[定位](https://developer.mozilla.org/en-US/docs/DOM/window.location)对象。它提供和作为属性`pathname`，为您省去了 RegExp 的麻烦（无论如何，您最想[弄错](http://medialize.github.com/URI.js/about-uris.html#problems)）。您正在寻找以下方面的内容：`search``hostname`

```
// no redirect if there is a query string
var redirect = !window.location.search 
  // only redirect if this is run on mydomain.com or on of its sub-domains
  && window.location.hostname.match(/(?:^|\.)mydomain\.com$/)
  // only redirect if path is /foldername/ or /foldername/index.html
  && (window.location.pathname === '/foldername/' || window.location.pathname === '/foldername/index.html');

if (redirect) {
  alert('boom');
} 
```

# javascript - 使用 Javascript 突出显示表格的一行

> ID：15683349
> 
> 赞同：0
> 
> 时间：2013-03-28T13:37:16.763
> 
> 标签：javascript, html, html-table

你好 StackOverflow 的好人，

提前为我的愚蠢行为道歉，但我需要你的帮助。

我有一个由 SQL 查询生成的表，用户需要能够选择一行，它将一个值传递到隐藏的文本框中。这一点我已经成功了，但是我需要显示他们选择了哪一行，如果他们改变主意然后选择了不同的行，那么只有新行会突出显示。

我知道这应该是非常基本的，但我无法弄清楚逻辑。到目前为止，我有这个：

```
function getOLBC(olbc)
{
    document.getElementById("ANSWER.TTQ.MENSYS.1.").value=olbc;
    var rows = document.getElementById("results").getElementsByTagName("tr").length;
    for (var i =0; i < rows; i++)
    {
        var answer = document.getElementById("ANSWER.TTQ.MENSYS.1.").value
        if (answer = olbc)
        {
            document.getElementById(olbc).style.background="red";
            document.getElementById(olbc).style.color="white";
        }
        else 
        {
            document.getElementById(olbc).style.background="white";
        }
    }
} 
```

HTML 如下所示：

```
 <tr class="unselected" id="AL-AAA98"onclick="getOLBC('AL-AAA98')"><td class="OLBC">AL-AAA98</td><td>AAAL</td><td>Grade A in Economics<br />Grade A in Mathematics<br />Grade A in Business Studies</td><td></td></tr>
    <tr class="unselected" id="AL-AAA77"onclick="getOLBC('AL-AAA77')"><td class="OLBC">AL-AAA77</td><td>AAAL</td><td>Grade A in Economics<br />Grade A in Mathematics<br />Grade A in Spanish</td><td></td></tr>
    <tr class="unselected" id="AL-AAA42"onclick="getOLBC('AL-AAA42')"><td class="OLBC">AL-AAA42</td><td>A*AAL</td><td>Grade A in Mathematics<br />Grade A in Human Biology<br />Grade A in Physics</td><td></td></tr> 
```

任何人都可以帮忙吗？为这个问题的n00bish-ness道歉。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:13:05.133

我认为这就是您要寻找的...我删除了 onclick dom 元素（最好将 js 与 dom 分开）。

使用 jquery：http: [//jsfiddle.net/cr1urhv6/](http://jsfiddle.net/cr1urhv6/)

```
$("#myTable tr").click(function(e) {
  $("#myTable tr").removeClass("highlight");
  $(this).addClass("highlight");
}); 
```

或纯js：http: [//jsfiddle.net/cr1urhv6/1/](http://jsfiddle.net/cr1urhv6/1/)

```
var rows = document.querySelectorAll("#myTable tr");
for (var i = 0; i < rows.length; i++) {
    rows[i].addEventListener('click', function() {
        [].forEach.call(rows, function(el) {
            el.classList.remove("highlight");
            });
        this.className += ' highlight';
    }, false);
} 
```

这是删除任何当前突出显示...然后将突出显示类添加到我们在其中单击的 TR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:45:36.127

尝试做

```
if (answer == olbc) 
```

代替

```
if (answer = olbc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:20:37.983

我最终也进行了足够的修补以找到自己的解决方案，这可能不如 Smerny 的答案那么优雅，但它是：

```
 function getOLBC(olbc){
    var selectedCount = document.getElementsByClassName("selected").length;

    if (selectedCount <= 0)
        {
        document.getElementById("ANSWER.TTQ.MENSYS.1.").value=olbc;
        document.getElementById(olbc).className="selected"
        }
    else 
        {
        var selectedRow = document.getElementsByClassName("selected")[0].id
        document.getElementById(selectedRow).className="deselected";
        document.getElementById("ANSWER.TTQ.MENSYS.1.").value=olbc;
        document.getElementById(olbc).className="selected"
        } 
```

# javascript - jQuery中的内联if else语句

> ID：15683352
> 
> 赞同：7
> 
> 时间：2013-03-28T13:37:28.207
> 
> 标签：javascript, jquery

我有一个由两个不同按钮执行的 jQuery 函数。

```
$("#btnSearch, #btnDirectorSearch").click(function () { 
```

此函数构建的部分 html 取决于点击了哪个按钮。我正在使用 data- 属性来存储我的变量，如下所示：

```
var div = $(this).data("str"); 
```

我正在构建的 html 字符串取决于变量“div”的值。有没有办法在 jQuery 中执行内联 if/else 语句？

```
if div = "choice1" {
    html += '<tr data-str = "str1" data-dataItem = "dataItem1" data-result-title = "' + name + '" data-result-id="' + sel + '">';

} else {
    html += '<tr data-str = "str2" data-dataItem = "dataItem2" data-result-title = "' + name + '" data-result-id="' + sel + '">';
} 
```

这看起来很麻烦，我希望有更好的 jQuery 方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-28T13:40:32.030

你有一个语法错误

```
if div = "choice1" 
```

应该

```
if (div == "choice1") 
```

无论如何，您正在寻找的模式是：

```
div == "choice1" ? <code for true> : <code for false> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:42:08.550

您可以使用`condition ? code when true: code when false`

但我建议你只坚持使用花括号，因为它看起来更好，更容易调试。还有一件事，如下所示

```
if(div==="choice1"){

}
else{
} 
```

使用[===](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T13:44:39.840

因为它只是输出中改变的数字，你可以这样做：

```
var num = div == "choice1" ? 1 : 2;
html += '<tr data-str="str'+num+'" data-dataItem="dataItem'+num+'" data-result-title="'+name+'" data-result-id="' + sel + '">'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:48:09.723

如果您的选择有限，您可以添加一个小的查找数组：

```
var choices = {
    choice1: {
        str: "str1",
        data: "dataItem1"
    },
    choice2: { ... }
};

html += '<tr data-str="' + choices[div].str 
    + '" data-dataItem="' + choices[div].data
    + '" data-result-title="' + name + ... etc; 
```

# java - java.lang.UnsatisfiedLinkError 当我加载一个 jar 时。

> ID：15683357
> 
> 赞同：1
> 
> 时间：2013-03-28T13:37:46.550
> 
> 标签：java, eclipse, jvm, classloader, unsatisfiedlinkerror

我正在用 JSE 编程，我正在用另一个 java 程序加载一个 jar（我做的）。我认为问题出在java虚拟机的classLoader中。我说那是因为我试图用 java -jar "file.jar" 执行文件 jar 并且它运行。我正在使用带有 Eclipse 的 xubuntu。在 Eclipse 中，我有 2 个项目，分别是加载 jar 和 jar 软件的第一个软件。要导出 jar 文件，我使用向导“导出 -> jar ecc ....”我该如何解决这个问题？

线程“主”java.lang.UnsatisfiedLinkError 中的异常：/media/sda4/so_project/proj/example/first.jar：/media/sda4/so_project/proj/example/first.jar：无效的 ELF 标头（可能的原因：字节序不匹配) 在 java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939) 在 java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864) 在 java.lang.ClassLoader$NativeLibrary.load(Native Method) 在 java.lang .ClassLoader.loadLibrary(ClassLoader.java:1825) 在 java.lang.Runtime.load0(Runtime.java:792) 在 java.lang.System.load(System.java:1059) 在 it.unicam.project.Binterpreter。 getClassHandle(Binterpreter.java:170) 在 it.unicam.project.Binterpreter.(Binterpreter.java:100) 在 it.unicam.project.Test.main(Test.java:12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:43:21.760

那是因为您在 64 位平台上运行 32 位 JVM

# mysql - 使用 MySQL（或实际上任何 SQL）跨多个游戏的排行榜

> ID：15683359
> 
> 赞同：0
> 
> 时间：2013-03-28T13:37:54.473
> 
> 标签：mysql, leaderboard

好奇用 SQL 数据库在多个游戏中实现排行榜的最优雅方式是什么？

我有游戏 G1，玩家在那里得到不同的分数（从 0 到 100） 我有游戏 G2，玩家在那里也得到不同的分数（但从 0 到 1000） 我有游戏 G3，玩家在那里也得到不同的分数（从 1000 到 10000）

可能是共享玩家（但不是必需的） 我如何实现排行榜，这样我就可以在所有游戏中显示排名前 5 的玩家，并且它不会用大量 SQL 查询杀死我的数据库？我正在谈论这个排行榜的数百甚至数千个请求/秒。

我几乎没有自己的想法，但它们看起来都不够优雅和简单......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:51:57.833

一种方法是将“排名”放在内存表中并以 1x/秒的速度更新它。然后查询“显示排行榜”页面。这样，您的服务器只会以 1x / 秒的速度查询游戏排名。无论如何，对“排行榜”表的查询都来自内存，并且通常来自查询缓存（如果您启用了它）。

由于排名是派生表，因此没有任何理由将其写入磁盘。

哦——按照@bestprogrammerintheworld 所说的去做——重用你的连接。

# jquery - 使用 jQuery 将选中的复选框从一个列表移动到另一个列表

> ID：15683362
> 
> 赞同：1
> 
> 时间：2013-03-28T13:38:04.427
> 
> 标签：jquery, list, checkbox, move

单击链接时，我试图在列表之间移动选中的项目：

```
$('#add').click(function() {
    return !$('#select1 li:checked').appendTo('#select2');
});
$('#remove').click(function() {
    return !$('#select2 li:checked').appendTo('#select1');
});

<ul id="select1">
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup1" value="checkbox" id="CheckboxGroup1_0" />Checkbox 1</label>
    </li>
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup1" value="checkbox" id="CheckboxGroup1_1" />Checkbox 2</label>
    </li>
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup1" value="checkbox" id="CheckboxGroup1_2" />Checkbox 3</label>
    </li>
</ul>

<ul id="select2">
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup2" value="checkbox" id="CheckboxGroup2_0" />Checkbox 4</label>
    </li>
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup2" value="checkbox" id="CheckboxGroup2_1" />Checkbox 5</label>
    </li>
    <li>
        <label>
            <input type="checkbox" name="CheckboxGroup2" value="checkbox" id="CheckboxGroup2_2" />Checkbox 6</label>
    </li>
</ul>

<a href="#" id="add">add</a>
<a href="#" id="remove">remove</a> 
```

目前，如果我点击添加或删除链接，它只会移动整个列表之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:44:00.957

您的选择器不正确。选择器查找被选中的`:checked`输入元素（例如复选框或单选按钮），但您试图找到`<li>`被选中的元素（不可能发生的事情）。

相反，您需要做的是找到`:checked`元素*内部*的`<li>`元素，然后获取对其包含`<li>`元素的引用，然后移动它们。执行此操作的代码如下所示：

```
$('#add').click(function() {
    return !$('#select1 li :checked').closest('li').appendTo('#select2');
});
$('#remove').click(function() {
    return !$('#select2 li :checked').closest('li').appendTo('#select1');
}); 
```

如果你想看看[这个工作示例](http://jsfiddle.net/EEhbQ/)。

# javascript - 如何查找 ID 是否存在于具有 HTML 内容的变量中

> ID：15683370
> 
> 赞同：0
> 
> 时间：2013-03-28T13:38:33.623
> 
> 标签：javascript, jquery

我正在尝试查找 ID 是否存在于具有 HTML 内容的变量中。

ID 名称通过动态变量附加到 DIV 元素。

```
strHTML = "<div id='"+var1+var2+"'>" 
```

现在，我想检查 strHTML 中是否存在特定 ID。

我怎么做。？

提前致谢。

**已编辑**

添加了实际代码以更清晰...

```
for(data in ArrayOFObjects)

var splitDate = ArrayOFObjects[data]["NewsDate"].split("-");

**if(!$(strHTML).find('#'+splitDate[1]+splitDate[0]))** // if condition is not correct, just my try
{   

strHTML += "<div id='"+splitDate[1]+splitDate[0]+"></div>"
                                                       }
                                                        } 
```

因此，当下一个**for in**循环发生时，我想检查**ID 是否已经存在**于**strHTML**中，如果存在，那么我不希望**创建 DIV**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:40:16.860

如果您想知道您的 HTML 是否包含一个 id 包含某个值的元素，您可以这样做

```
var $elements = $('[id~="'+someValue+'"]', '<div>'+strHTML+'</div>');
var doContain = $elements.length>0; 
```

如果您的字符串 strHTML 确实类似于`"<div id='"+var1+var2+"'>"`，则只需使用正则表达式：

```
var id = strHTML.match(/["']([^\"']*)["']/)[1]; 
```

并寻找`id`你的身份证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:42:01.127

您可以使用 javaScript 的搜索功能：

```
var n=strHTML.search(var1+var2);
if (n > -1)
{
  // found it!
} 
```

# elmah - Elmah 日志条目不包括服务器变量

> ID：15683371
> 
> 赞同：2
> 
> 时间：2013-03-28T13:38:34.690
> 
> 标签：elmah

我在 Elmah 中记录我的错误，`ErrorLog.GetDefault`因为我想使用 ErrorId。但是，当我这样做时，服务器变量不包含在日志条目中。谁能解释为什么，如果可能的话，如何解决这个问题？

```
public void LogExceptionToElmah(Exception exception)
{
    //Includes Server Variables
    ErrorSignal.FromContext(HttpContext.Current).Raise(exception);

    //Does not include Server Variables
    var elmahId = Elmah.ErrorLog.GetDefault(HttpContext.Current).Log(new Error(exception));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:50:38.720

我能够通过包含`HttpContext.Current`在 Elmah 错误中来解决这个问题。

```
var elmahId = ErrorLog.GetDefault(HttpContext.Current).Log(new Error(exception, HttpContext.Current)); 
```

我仍然想知道为什么`ErrorLog.GetDefault`需要 a`HttpContext`因为它似乎对它没有任何作用。

# mysql - 如何使用 PHP 在 mySQL 中存储表单中的预加载图像

> ID：15683372
> 
> 赞同：0
> 
> 时间：2013-03-28T13:38:38.913
> 
> 标签：mysql, image, binary-data

我需要存储一个预先加载在 MySQL 数据库中的 blob 中的表单中的图像。

这是表单代码：

```
<form id="form1" name="form1" method="POST" action="<?php echo $editFormAction; ?>">
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>Image Name</td>
      <td><input type="text" name="imgName" id="imgName" /></td>
    </tr>
    <tr>
      <td>Image</td>
      <td><input type="image" name="myImg" id="myImg" src="images/1209894_11404408.jpg" /></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td colspan="2" align="center" valign="middle"><input type="submit" name="Submit" id="Submit" value="Submit" /></td>
    </tr>
  </table>
  <input type="hidden" name="MM_insert" value="form1" />
</form> 
```

这是表结构创建语句。我正在使用 InnoDB：

```
CREATE TABLE IF NOT EXISTS `img` (
  `img_id` int(11) NOT NULL AUTO_INCREMENT,
  `img_name` varchar(200) DEFAULT NULL,
  `img_img` longblob,
  PRIMARY KEY (`img_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我正在使用的插入查询是：

```
INSERT INTO img (img_name, img_img) VALUES ('$_POST['imgName']', '$_POST['myImg']') 
```

TIA

杨瑜珈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:47:22.807

首先，您需要设置您的 html 表单以支持文件上传，允许这样做的正确表单标签将是：

```
<form enctype="multipart/form-data" id="form1" name="form1" action="<?php echo $editFormAction; ?>" method="post"> 
```

处理上传表单的 PHP 脚本将类似于：

```
if (isset($_FILES['myImg']) && $_FILES['myImg']['size'] > 0) {
  $tmpName = $_FILES['myImg']['tmp_name'];
  $fp = fopen($tmpName, 'r');
  $data = fread($fp, filesize($tmpName));
  $data = addslashes($data);
  fclose($fp);

  //Fill all the other form vars

  $query = "INSERT INTO img ";
  $query .= "(img_img) VALUES ('$data')";
  $results = mysql_query($query, $link);
 } 
```

当然你需要先打开你的 MySQL 连接，完成后关闭它。

希望能帮助到你。

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:00:10.340

最后我找到了解决方案。

这是我必须用来将图像正确保存到 MySQL 的代码。

```
INSERT INTO img (img_name, img_img) VALUES ('$_POST['imgName']', base64_decode(substr('$_POST['myImg']', 22))); 
```

同样，如果我们想将文件保存到服务器，我们可以在 PHP 中使用以下代码

```
$myid = fopen($filesavepath.$imgfilename,'wb');
$svgimg=$_REQUEST['svgimg'];
fputs($myid, base64_decode(substr($_POST['myImg'], 22)));
fclose($myid); 
```

希望这可以帮助某人。

杨瑜珈

# c# - 从数据库下载并连接多个文件

> ID：15683378
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:04.723
> 
> 标签：c#, sql-server

我已将多个 txt 文件上传并存储到 SQL Server 数据库中。这里的想法是，用户可以选择他们想要的文件，然后让 C# 代码从每个文件中读取数据，并创建一个包含每个选定文件的所有数据的文本文件。然后使合并的文件可供下载

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:41:55.180

```
 StreamWriter Writer = new StreamWriter("Filename");
    string SQL = "select Item from Table where ID in (1, 2, 3)";
    SqlCommand Command = new SqlCommand(SQL, Con);
    SqlDataReader Reader = Command.ExecuteReader();
    while (Reader.Read())
        Writer.WriteLine(Reader["Item"].ToString());
    Reader.Close();
    Writer.Close(); 
```

使文件可供下载是另一个问题。

# python - Python Curses 中 derwin() 对象中的 .addstr() 出现奇怪错误

> ID：15683382
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:15.080
> 
> 标签：python, curses, python-curses

我正在尝试将curses中的一个窗口分割成几个子窗口（带有`derwin()`）。

该代码创建了两个子窗口，我可以添加一个字符串；第一个功能没问题。第二个几乎完全相同，但是当我尝试添加一个字符串时给我一个错误`addstr()`

```
class Window(GUI):
'''
Window-object
'''

def __init__(self, y_max , x_max, y_pos , x_pos, Target, screen):
    self.Win_Count = 0
    self.y_pos = y_pos
    self.x_pos = x_pos
    self.y_max = y_max
    self.x_max = x_max
    self.parent = screen 
    self.Target = Target

    #Window-Objects
    self.Win = self.create_win_parent(y_pos)
    self.Name_Win = self.create_name_win(self.Win)
    self.IP_Win = self.create_ip_win(self.Win)

def create_win_parent(self, y_pos):
    y_size = 1
    x_size = self.x_max - self.x_pos
    new_win_obj = self.parent.derwin(y_size, x_size, self.y_pos, 0)
    self.Win_Count += 1
    return new_win_obj

def create_name_win(self, Win_Obj):
    x = Win_Obj.derwin(1,40, 0,0)
    x.box()
    x.addstr(0,5," CUSTOMER NAME ")
    return x

def create_ip_win(self, Win_Obj):
    x = Win_Obj.derwin(1,15, 0,41)
    x.box()
    x.addstr(0,5," IP-ADDRESS ")
    return x 
```

我收到这个模糊的错误：

```
 Traceback (most recent call last):
  File "./2pollng.py", line 229, in <module>
    wrapper(main)                    # Enter the main loop
  File "/usr/lib/python2.6/curses/wrapper.py", line 43, in wrapper
    return func(stdscr, *args, **kwds)
  File "./2pollng.py", line 222, in main
    Main_App.Run(screen)
  File "./2pollng.py", line 106, in Run
    self.Create_Win(self.Inv.index(e), e)
  File "./2pollng.py", line 90, in Create_Win
    Win_Obj = Window(self.y_max, self.x_max, y_pos, x_pos, Target_x, self.screen)
  File "./2pollng.py", line 141, in __init__
    self.IP_Win = self.create_ip_win(self.Win)
  File "./2pollng.py", line 160, in create_ip_win
    x.addstr(0,5," IPADDRESS ")
_curses.error: addstr() returned ERR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T13:04:02.753

```
def create_ip_win(self, Win_Obj):
    x = Win_Obj.derwin(1,15, 0,41)
    x.box()
    x.addstr(0,5," IP-ADDRESS ")
    return x 
```

在这个函数`Win_Obj.derwin(1,15, 0,41)`中显示 x-pos 应该在 0 和 14 之间。而在代码中`addstr(0,5," IP-ADDRESS ")`x 从 5 开始并且字符串的长度`" IP-ADDRESS "`大于（15-5）。所以你得到了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T14:07:03.067

不太确定具体细节，但它（如解释器所示，duh）与字符串有关，并且它们在我创建的子窗口中没有足够的空间。

# .htaccess - .htaccess 从子目录重写到顶级域

> ID：15683383
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:16.180
> 
> 标签：.htaccess, url-rewriting, rewrite

我有一个域设置为 shop.mydomain.com - 但是域名正在更改为 www.mydomain.com

因此，所有来自 shop.mydomain.com 的流量都需要重定向到 www.mydomain.com

例如 shop.mydomain.com/product001.html 需要重定向到 www.mydomain.com/product001.html

这可以通过重写规则实现吗？所有站点 URL 保持不变，但它们现在位于 www.mydomain.com 而不是 shop.mydomain.com

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:37:29.770

根据这篇[文章](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)

```
RewriteCond %{HTTP_HOST} ^shop.mydomain.com$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

# uiimageview - iOS UIImageView动画图像显示远程图片

> ID：15683384
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:21.333
> 
> 标签：uiimageview

我有三个网址，就像“ [http://xxx.x.xx.xx:8180/admin/upload/advert/advert_img.jpg](http://xxx.x.xx.xx:8180/admin/upload/advert/advert_img.jpg) ”，

它们是远程服务器中的图片。

我有一个 UIImageView，我想使用：

```
_imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 504.0, 320.0, 40.0)];
NSArray *images = [NSArray arrayWithObjects:[UIImage imageNamed:@"advert_img"],[UIImage imageNamed:@"img01"],[UIImage imageNamed:@"img02"], nil];
_imageView.animationImages = images;
_imageView.animationDuration = 15;
[_imageView startAnimating]; 
```

显示这些图片。我怎样才能做到这一点？非常感谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T12:46:54.547

试试这个 ：

```
 NSArray *frames = [NSArray arrayWithObjects:
       [UIImage imageWithName:@"advert_img.png"],
       [UIImage imageWithName:@"img01.png"],
       [UIImage imageWithName:@"img02.png"],
       nil];

       UIImageView *animatedIMvw = [[UIImageView alloc] init];
       animatedIMvw.animationImages = frames;
       [animatedIMvw startAnimating]; 
```

# c# - 将c函数和参数指针结构实现到c#？

> ID：15683385
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:27.130
> 
> 标签：c#, pointers, parameters, struct, dllimport

我有一个关于将 C++ DLL 实现为 C# 的问题

我的头文件代码是这样的：

```
typedef struct{    
 uchar  Command[4];     
 ushort Lc;    
 uchar  DataIn[512];    
 ushort Le;    
}CON_SEND;

typedef struct{    
 ushort LenOut;     
 uchar  DataOut[512];    
 uchar  outA;    
 uchar  outB;    
}CON_RESP;

SDK_C_DLL_API int   Csdk_Cmd(uchar port, CON_SEND * ConSend,CON_RESP * ConResp);
SDK_C_DLL_API int   Csdk_Open(uchar port); 
```

和我的 C# 类

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct CON_SEND
{
    public byte[] Command;
    public System.UInt16 Lc;
    public byte[] DataIn;
    public System.UInt16 Le;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct CON_RESP
{
    public System.UInt16 LenOut;
    public byte[] DataOut;
    public byte outA;
    public byte outB;
}

[DllImport("SDK_C.dll")]
public static extern System.Int16 Csdk_Cmd(System.Byte port, ref CON_SEND ConSend, ref CON_RESP ConResp);

[DllImport("SDK_C.dll")]
public static extern System.Int16 Csdk_Open(System.Byte port); 
```

现在我使用 Csdk_Cmd；这段代码工作没问题：

```
if(SDK_C.Csdk_Open(0x00)== 0)
    lblStatus.Text = "Gate 0 is busy";
else
    lblStatus.Text = "You can use Gate 0"; 
```

但是当我尝试使用此代码时 Csdk_Cmd 给出“NotSupportedException”

```
CON_SEND SendCon = new CON_SEND(); 
 SendCon.Command = new byte[] { 0xE0, 0xA0, 0xC4, 0x72 };
 SendCon.DataIn = new byte[]{0xAA, 0xAB, 0xAC, 0xAD, 0xAE, 0xAF, 0xA0};
 SendCon.Lc = 0x0007;
 SendCon.Le = 0x0000;

CON_RESP RespCon = new CON_RESP();
 RespCon.DataOut = new byte[512];

SDK_C.Csdk_Cmd(0, ref SendCon, ref RespCon); // THIS LINE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:56:49.383

您的结构声明不正确。C 代码具有内联字节数组，简单地说，它们与`byte[]`. 修复它的最简单方法是使用`MarshalAs(UnmanagedType.ByValArray)`. 像这样：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct CON_SEND
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public byte[] Command;
    public ushort Lc;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 512)]
    public byte[] DataIn;
    public ushort Le;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct CON_RESP
{
    public ushort LenOut;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 512)]
    public byte[] DataOut;
    public byte outA;
    public byte outB;
} 
```

您的函数也有不正确的返回值。AC`int`映射到 C# `int`。所以他们的声明应该是：

```
[DllImport("SDK_C.dll")]
public static extern int Csdk_Cmd(byte port, ref CON_SEND ConSend, 
    ref CON_RESP ConResp);

[DllImport("SDK_C.dll")]
public static extern int Csdk_Open(byte port); 
```

要仔细检查的另一件事是调用约定。上面的 C# 函数使用默认的`Stdcall`. 你确定C代码也可以吗？由于返回值和函数名之间没有指定任何内容，我怀疑这些函数实际上是`Cdecl`. 在这种情况下，您需要：

```
[DllImport("SDK_C.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int Csdk_Cmd(byte port, ref CON_SEND ConSend, 
    ref CON_RESP ConResp);

[DllImport("SDK_C.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int Csdk_Open(byte port); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:49:40.920

这实际上更像是一种猜测，但是您在 C++ 中使用内联（固定）数组声明结构，因此您也需要告诉 c# 也这样做。您可以使用[Fixed Size Buffers](http://msdn.microsoft.com/en-us/library/zycewsya%28v=vs.80%29.aspx)执行此操作：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct CON_SEND
{
   public fixed byte Command[4];
   public System.UInt16 Lc;
   public fixed byte DataIn[512];
   public System.UInt16 Le;
} 
```

警告：此代码需要使用 unsafe 编译并出现在 unsafe 块中。

或者，您可以考虑更好地为您的结构定义编组属性：

[http://www.codeproject.com/Articles/66244/Marshaling-with-C-Chapter-2-Marshaling-Simple-Type](http://www.codeproject.com/Articles/66244/Marshaling-with-C-Chapter-2-Marshaling-Simple-Type)

（见@DavidHeffernan，在下面回答）

# c# - 无需任何安装程序即可将 VS2012 应用程序编译为 .exe

> ID：15683392
> 
> 赞同：0
> 
> 时间：2013-03-28T13:39:48.930
> 
> 标签：c#, wpf, visual-studio-2012, exe, publish

有没有办法在没有任何安装程序的情况下将 VS2012 App (WPF) 发布到 .exe？我知道如何使用 ClickOnce 安装程序，但我想知道是否可以更进一步。

许多小程序似乎以 .rar 的形式出现，其中包含一些应用程序文件和一个无需安装即可运行的 .exe。这在VS2012中可能吗？（或 2010 年）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:41:47.780

是的，当然，这是可能的。只需在 Release 模式下编译您的应用程序，然后在 Release 文件夹中获取所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:55:19.757

这可以通过 Visual Studio 2012 实现，具体取决于您的需求和开发应用程序的方法。我将列出几个选项，但不要认为这是详尽无遗的，因为有很多方法可以完成同样的事情。我假设您想要为用户提供“一键式”解决方案。

1.  您可以[将应用程序的所有资源](http://support.microsoft.com/kb/319292)嵌入到应用程序中，让您的用户能够简单地下载或复制 .exe 并从任何地方运行它，并且它“正常工作”。

优点：唯一可以满足您要求的方法。无需安装程序的单个 .exe。

缺点：如果不重新编译应用程序，您将无法编辑任何嵌入式资源。出于同样的原因，您也不能存储用户设置（尽管您可以在其中`App_Data`或类似文件中静默创建设置文件）。

1.  [自解压存档](http://www.jackmccarthy.com/malware/WinRAR_Archive_Creation.htm)。这是您在问题中提到的 WinRAR 方法。您将应用程序嵌入到自解压存档中，该存档设置为提取到用户 Temp 目录或 App_Data（或类似目录）并在成功提取后启动您的 exe。

优点：您可以更新资源，因为它们没有嵌入到您的实际应用程序中。

缺点：从技术上讲，这仍然是一个安装程序；尽管它是一个非常轻量级且独立的。

还有更多，比如点击一次；等等，但这解释了总体思路。

**注意：**需要安装正确的 .NET 版本才能像我描述的那样简单地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:51:10.110

以下是我能想到的安装程序会处理您需要担心的问题：

1.  正确的 .NET 框架已经存在。
2.  您从 GAC 引用的任何程序集都已安装。
3.  您不需要授予任何自定义注册表项或权限。
4.  当用户未以管理员身份运行时，您的应用不会访问任何会阻止其在“低信任”环境中工作的内容。

当然还有更多，但基本上如果您的应用程序是独立的并且不使用任何外部资源并且安装了正确的 .NET 框架，您应该能够复制构建输出并继续。

# excel - 使用 VBA 在 Excel 中检查工作表

> ID：15683401
> 
> 赞同：2
> 
> 时间：2013-03-28T13:40:15.267
> 
> 标签：excel, vba

我的 Excel 工作簿中可能有名为 Data1、Data2、...的工作表。我想知道我的工作簿中有多少这样的工作表。

我试图比较工作表名称并保持计数。但它不能正常工作。

所以希望有人可以在这里帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:49:28.153

试试这个

```
msgbox thisworkbook.sheets.count 
```

这将返回工作簿中的工作表数量。

要返回名称如“数据”的工作表数量，请执行以下操作：

```
Dim iCountSheets As Integer
Dim oSheet As Worksheet
'
For Each oSheet In Sheets
    If oSheet.Name Like "Data*" Then
       iCountSheets = iCountSheets + 1
    End If
Next

MsgBox iCountSheets & " sheets like data" 
```

另一种方法是按索引遍历工作表集合：

```
Dim iCountSheets As Integer, iIdx As Integer
Dim oSheet As Worksheet
'
For iIdx = 1 To Sheets.Count ' non-zero based collection
    If Sheets(iIdx).Name Like "Data*" Then
       iCountSheets = iCountSheets + 1
    End If
Next

MsgBox iCountSheets & " sheets like data" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T13:49:37.000

这是你正在尝试的吗？

```
'~~> Case Sensitive
Sub Sample()
    Dim ws As Worksheet
    Dim shCount As Long

    For Each ws In ThisWorkbook.Sheets
        If ws.Name Like "Data*" Then shCount = shCount + 1
    Next ws

    Debug.Print shCount
End Sub

'~~> Or use the below if you have sheets like data1, Data2, DaTa3 etc
Sub Sample()
    Dim ws As Worksheet
    Dim shCount As Long

    For Each ws In ThisWorkbook.Sheets
        If UCase(ws.Name) Like "DATA*" Then shCount = shCount + 1
    Next ws

    Debug.Print shCount
End Sub 
```

# ios - 手势转文字

> ID：15683402
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:40:16.510
> 
> 标签：ios, drawing, ocr

我正在尝试开发应用程序，在该应用程序中向用户询问可能答案（a，b，d）的问题。我要他，得出他的答案。为此，有一些教程，例如[这个](http://www.ifans.com/forums/threads/tutorial-drawing-to-the-screen.132024/)。下一部分是将其转换为 nsstring。一种选择是使用像[Terresact](https://github.com/ldiqual/tesseract-ios)这样的 OCR 库。然而，仅编译它就非常复杂。即使我设法编译它，我也不确定它是否会起作用，因为您需要配置可能的字体，并且绘制的字母可能与任何已知字体都不匹配。因此，我想问一下，如果你们知道任何其他方法如何达到相同的结果。（在视图上绘制，将其转换为字符串并与字母进行比较）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:38:36.780

你可以创建一个继承的类`UIGestureRecognizer`并且必须覆盖

```
–touches...:withEvent: 
```

检测正确手指运动以识别您想要的曲线的方法。它可以是一个字母，也可以是一个抽象的形状，或者其他任何东西。

当手指的运动形成所需的曲线（字母、圆圈、复选标记等）时，您需要将其设置`state`为`UIGestureRecognizerStateEnded`，您将从自定义`UIGestureRecognizer`类中获得关于识别自定义手势的反馈。

您必须以编程方式为每个字母或形状定义每个手势。

习惯`UIGestureRecognizer`应该承认序列和曲线只是更加通用，因为没有人写出完全相同大小的线条或曲线。

例如，如果您为复选标记创建一个识别器，您应该即时检查两条线之间的角度，如果复选标记的第二行应该比第一行长，那就太好了。看起来很简单，但字母比较难，因为你写的同一个字母和我写的不一样，比如小写字母`f`，也许你没有为字母写任何曲线，但我做了两个循环，我不会提及字母的小写或大写版本。

因此，对于这些，您需要不同的手势识别器。

所以，不幸的是，它可能有点复杂。

但是，您可以使用第 3 部分 ORC 库（如您最初想要的那样），因为它可以工作，而且实现一个现成的库可能比为每个字母或符号创建手势识别器更容易。

# jenkins - 如果另外三个构建链成功，如何运行 Jenkins 构建？

> ID：15683409
> 
> 赞同：0
> 
> 时间：2013-03-28T13:40:28.180
> 
> 标签：jenkins, jenkins-plugins

```
Build_1 --  Build_2.1 -- build_2.1.1 -- Build_3
       \--  Build_2.2 -----------------/ 
```

你好。

我需要一个建议如何在 Jenkins 中创建这样的工作流程。**Build_3**只有在**build_2.1**、**build_2.1.1**和**build_2.2**成功时才应该启动。

我尝试使用 Promotion 插件，但它不允许将**build_2.1.1**设置为标准，因为它不是**build_1的下游作业**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:37:59.973

为什么你不能在工作中使用默认配置？在配置上，您可以添加**构建后**操作： ![在此处输入图像描述](../Images/3e64642ac6df4627c56d1126056ba917.png) 添加此操作并配置您的所有作业。还是我没听懂你？

# c# - File.Copy 错误：由于文件系统限制，请求的操作无法完成

> ID：15683417
> 
> 赞同：6
> 
> 时间：2013-03-28T13:40:41.700
> 
> 标签：c#, exception, .net

在结构中获得超过 4000000 个 jpeg 文件后，我们在添加新文件时遇到了问题。File.Copy 抛出异常：由于文件系统限制，请求的操作无法完成。

有什么解决办法吗？

**信息**

*   **系统：** Windows Server 2008 SP1 x64
*   **安装路径： http:** [//support.microsoft.com/kb/967351/en-us ?fr=1](http://support.microsoft.com/kb/967351/en-us?fr=1)
*   **碎片整理：**完成

**代码**

```
 public bool AddFile(Uri uri, string path, bool withDelete = false)
    {
        var sourceFilePath = path;
        var destinationFilePath = Path.GetFullPath(uri.LocalPath);

        try
        {
            if (!File.Exists(sourceFilePath))
            {
                sourceFilePath = Directory.EnumerateFiles(sourceFilePath).FirstOrDefault();
                destinationFilePath = Path.Combine(destinationFilePath, Path.GetFileName(sourceFilePath));
            }

            if (!Directory.Exists(Path.GetDirectoryName(destinationFilePath)))
                Directory.CreateDirectory(Path.GetDirectoryName(destinationFilePath));

            if (withDelete && File.Exists(destinationFilePath))
                File.Delete(destinationFilePath);

            File.Copy(sourceFilePath, destinationFilePath);

            return true;
        }
        catch (Exception exc)
        {
            ServiceCore.GetLogger().Error(exc);
            throw exc;
        }
    } 
```

**堆栈跟踪**

```
 2013-03-28 14:10:48.3784[Info]: 47356388:Unive.NetService.SimpleServices.DocumentManagementSerivce..ctor: Entry
    2013-03-28 14:10:48.4740[Info]: Static:Unive.NetService.SimpleServices.DocumentManagementSerivce..ctor: Success
    2013-03-28 14:10:48.4899[Info]: 47356388:Unive.NetService.SimpleServices.DocumentManagementSerivce.UploadFile: Entry
    2013-03-28 14:11:26.3277[Error]: Exception
    Message:The requested operation could not be completed due to a file system limitation

    Source:mscorlib
    Stack Trace:   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)
       at Unive.NetService.Business.SimpleFileClient.AddFile(Uri uri, String path, Boolean withDelete) in D:\Tag Prografix\Unive.NetService\Business\SimpleFileClient.cs:line 33
    TargetSite:Void WinIOError(Int32, System.String)
    2013-03-28 14:11:26.5029[Error]:                         47356388:Unive.NetService.SimpleServices.DocumentManagementSerivce.UploadFileException
    Message:The requested operation could not be completed due to a file system limitation

    Source:mscorlib
    Stack Trace:   at Unive.NetService.Business.SimpleFileClient.AddFile(Uri uri, String path, Boolean withDelete) in D:\Tag Prografix\Unive.NetService\Business\SimpleFileClient.cs:line 42
       at Unive.NetService.Business.FileService.UploadFile(Int64 fileId, String fileName, String path, Boolean isDiagram) in D:\Tag Prografix\Unive.NetService\Business\FileService.cs:line 80
       at Unive.NetService.SimpleServices.DocumentManagementSerivce.UploadFile(Int64 fileId, String fileName, String path) in D:\Tag Prografix\Unive.NetService\SimpleServices\DocumentManagementSerivce.asmx.cs:line 100
    TargetSite:Void WinIOError(Int32, System.String) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:40:08.350

您应该划分和拆分目录以避免出现问题。Windows 不喜欢包含数百万文件的目录。

为避免此问题，我的文件始终以 db 行 ID（即 guid）命名。
然后 guid 的每个部分都是一个目录，除了最后一个：ID 为 02510b5a-a605-4a4e-b00a-f554998378a9 的文件存储在目录 02510b5a/a605/4a4e/b00a/ 中，名称为 f554998378a9。所以我可以直接使用ID直接访问文件，数以百万计的文件被拆分在很多目录中。

编辑：自从我在这里发布以来，我注意到我的解决方案的一个评论：在 .NET Guid 中生成，因此第一部分经常更改，而最后一部分不那么频繁（或很少）。使用上述拆分会导致很多一级目录，然后每个子目录中只有一个子目录等。所以这仍然会创建很多一级目录，你也可能达到系统限制（我不知道在哪里限制，但 Windows 肯定不喜欢在同一目录中有 4 000 000 个子目录）

解决方案：解决方案是在创建目录时恢复为 Guid 部分。

示例：对于本指南`02510b5a-a605-4a4e-b00a-f554998378a9`，您应该使用目录`f554998378a9\b00a\4a4e\a605`和文件名`02510b5a`

请注意，.NET Guid 是使用当前时间生成的，因此如果您在循环中创建数百万个 Guid，它们看起来都一样（只是第一部分会有所不同）并使用我的解决方案最终在同一个目录中。

# c++ - 理解大代码

> ID：15683421
> 
> 赞同：4
> 
> 时间：2013-03-28T13:40:59.937
> 
> 标签：c++

理解大代码的问题之前已经得到了很好的回答。但是我觉得我应该再问一次这个问题来问我一直面临的问题。

我刚刚开始了一份学生工作。我是一名初级程序员，两个月前才了解课程。不过，在这份工作中，我收到了一个代码，它是一个大型软件的一部分。我了解该代码应该做什么（读取文件）。但是在花了几个星期试图理解代码并修改它以达到我们想要的结果之后，我得出的结论是我需要理解代码的每一行。代码大约1300行。

现在，当我开始阅读代码时，我发现，例如，一个变量被定义为：

```
VarType VarName 
```

Now`VarType`不是`int`or之类的类型`float`。这是一个用户定义的类型，所以我必须去上课看看这个类型是什么。

在下一行，我看到一个函数被调用，比如`points.interpolate(x)`; 现在我必须进入另一个班级，看看插值函数做了什么。

这种情况经常发生，这意味着即使我尝试理解一小部分代码，我也必须去 3 或 4 个不同的课程，并同时记住它们，而不会失去主要目标，这很困难。

我可能不是一个熟练的程序员，但我希望能够做到这一点。我可以对我应该如何处理这个问题提出一些建议吗？

另外（当我问这个问题时，我听起来真的很愚蠢）什么是调试器？我希望这能让您了解我的立场（以及再次提出这个问题的必要性）。:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:46:49.910

运气好的话，这些函数和类应该至少有一些文档来描述它们的作用。**您无需了解*它们*的工作方式即可了解它们的*工作*。**当您看到`interpolate`. 相反，阅读它的文档，它应该会告诉你理解使用它的代码所需要知道的一切。

如果没有文件，我会同情你。我可以提出两个建议：

1.  **从函数或类的名称、返回类型和参数以及使用它的周围代码对函数或类将做什么**做出一般假设，直到发生与这些假设相矛盾的事情。**我可以很好地猜测`interpolate`它是如何工作的，而无需阅读它是如何工作的。这仅在函数或类的名称具有足够的自文档性时才有效。**

***   如果您*需要*深入了解某些代码的工作原理，**请从底部开始向上工作**。这样做意味着当您搜索代码库时，您最终不必记住您在某些高级代码中的位置。在尝试理解这些类型的高级应用之前，先对低级基础类有一个很好的理解。

    这也意味着您将在一般意义上理解函数和类，而不是在引导您使用它们的代码的上下文中。当你找到 时`points.interpolate(x)`，不要想知道这个特定参数`interpolate`对这些特定的做了什么，而是找出它的一般作用。稍后，您将能够将新发现的知识应用于使用相同功能的任何代码。`points``x`** 

 **尽管如此，我不会担心 1300 行代码。这基本上是一个小项目。它只比示例和大学作业大。如果您考虑到这些提示，那么该数量的代码应该很容易管理。

* * *

[调试器](http://en.wikipedia.org/wiki/Debugger)是帮助您调试代码的程序。调试器的共同特性允许您逐行执行代码并观察变量值的变化。您还可以在代码中设置感兴趣的*断点*，调试器会在遇到断点时通知您。一些调试器甚至允许您在执行时更改代码。有许多不同的调试器都具有不同的功能集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T13:46:47.600

尝试根据其标题对代码的作用做出假设。例如，假设该`interpolate`函数正确地插入了您的观点；只有在输出看起来可疑时才去挖掘那段代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:18:25.970

首先，考虑获得具有以下功能的**编辑器/IDE**：

*   括号/括号/大括号匹配
*   大括号之间代码块的折叠/展开
*   类型突出显示（在工具提示中）
*   宏扩展（在工具提示或单独的窗口/面板中）
*   函数原型扩展（在工具提示或单独的窗口/面板中）
*   快速导航到类型、函数和类并返回
*   在不同位置的多个窗口/面板中打开同一个文件
*   搜索特定类型、变量、函数或类的所有提及/使用，并将其显示为列表
*   调用树/图构建/导航
*   除了简单搜索之外的正则表达式搜索
*   书签？

[Source Insight](http://www.sourceinsight.com/)就是这样的工具之一。一定还有其他人。

其次，**考虑在阅读代码时对其进行注释**。执行此操作时，请注意（写下）以下内容：

*   **不变量**（始终正确或必须始终正确）
*   **假设**（可能不正确，例如缺少检查/验证或无根据的期望），思考“如果”
*   一段代码的目标（**什么）**
*   实现的特性/细节（**如何**；例如是否抛出异常以及哪些异常，返回哪些错误代码以及何时）
*   一个简化的调用树/图来查看**代码流**
*   **对数据流**做同样的事情

 ****绘制图表**（ASCII 码或纸/纸板）；我有时会为我的论文或黑板拍照。具体来说，绘制**框图**和**状态机**。

**使用不同抽象/细节级别的**代码。放大看细节，缩小看结构。折叠/展开代码块和调用树/图的分支。

另外，有一个你要做什么的**清单。**检查您已完成的项目。根据需要添加更多。如果合适的话，为工作项目分配优先级。

* * *

**调试器**是一个程序，可让您逐步执行程序并检查其状态（变量）。它还允许您修改状态，这有时也很有用。

如果您对代码或编程语言不太熟悉，则可以使用调试器来理解您的代码。

另一件可能派上用场的事情是为您的程序**编写测试**或输入数据测试集。它们可能会揭示逻辑和性能方面的问题和限制。

* * *

另外，不要忽视**文档**和**人员**！如果有某事或某人可以为您提供有关项目/代码的更多信息，请使用该某事或某人。征求**意见**。

* * *

我知道这听起来很多，但无论如何你最终都会做一些这样的事情。等待一个足够大的项目。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:58:13.550

已经给出了许多很好的答案。我想增加我作为前学生的理解（不久前）以及我学到的知识来帮助我理解代码。这对我特别有帮助，因为我开始了一个项目，将我多年前用 Java 编写的数据库转换为 C++。

```
1\. **Code Reading** - Do not underestimate this important task.  The ability to write code  
   does not always translate into the ability to read it -- and reading it can be more 
   frustrating than writing it. 
```

花点时间仔细发现每一行代码的作用。这肯定会帮助您避免做出假设，除非您遇到您熟悉的代码并且可以掩饰它。

```
2\. Don't hesitate to follow references, locate declarations, and uncover definitions of 
   code elements you are reading. What you learn about how a particular variable, 
   method call, or class are defined all contribute to learning and ultimately to you 
   being able to perform your task. 
```

这一点特别重要，因为侦探和有效的侦探工作是理解代码的小部分的重要部分，这样您将来就可以更轻松地掌握较大的部分。

其他人已经发布了有关什么是调试器的信息，您会发现它是跟踪代码错误的宝贵资产，而且我认为它有助于代码阅读、知识获取和理解，因此您可以成为一名成功的程序员。

这是一个使用 Visual Studio 的调试器教程的[链接](http://courses.cs.tamu.edu/choe/12fall/315/lectures/VS-Debugger_Tutorial.pdf)，可以让您至少对手头的过程有一个深刻的理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:04:02.133

**“尝试调试器方法”**

[更新：调试器是一个特殊程序，它可以让您暂停正在运行的程序以检查程序的状态（变量值/哪个函数正在运行/谁是父函数等）]

对于我想了解的用例，我这样做的方法是逐步调试代码。

如果您使用的是 Advanced/Mordern IDE，那么在入口点（如 main() 或兴趣点）设置断点相当容易。然后从那里进入您想要检查或超越该功能的功能。

给你一步一步的方法

1.  在 main() 方法（入口点）开始表达式中设置断点。
2.  在调试活动的情况下运行程序
3.  程序将在断点处中断。
4.  现在，如果跨步直到遇到一个看起来很有趣的函数/表达式。（比如说，你的`points.interpolate(x);`）函数
5.  进入函数，并实时检查程序状态，如变量和函数堆栈。
6.  避免使用复杂的系统库。只是跨过/走出。（例如：避免类似的东西`MathLib.boringComputaion()`）
7.  重复直到程序退出。

我发现这种学习方式非常快速，可以让您快速了解任何复杂/大型软件。

使用 Eclipse，或者如果你不能尝试 GDB，如果它的 C/C++。每种流行的编程语言都有一个不错的调试器。

了解基本的调试操作将是一个好处：

1.  设置断点。
2.  在断点处停止。
3.  检查/观察变量。
4.  检查函数堆栈（函数调用的层次结构）
5.  单步 - 单步执行代码中的下一行。
6.  步入函数。
7.  跳出一个函数。
8.  跳过一个函数。
9.  跳转到下一个断点（兴趣点）。

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T13:54:08.713

您可能首先需要了解被调用的函数的功能是什么，然后了解该函数的输入和输出是什么，例如，如果您确实需要了解如何`interpolate`完成，则可以进入细节。通常，函数的名称是不言自明的，如果代码写得好，你可以从函数的名称中感受到函数的作用。

您可能想要尝试的另一件事是运行一些玩具示例来浏览代码，您可以使用一些可以帮助您浏览代码的调试器或 IDE。理解大规模代码需要时间和经验，耐心点。****

# php - 将示例日期格式转换为所需格式

> ID：15683423
> 
> 赞同：1
> 
> 时间：2013-03-28T13:41:06.283
> 
> 标签：php, date, datetime

我会收到物流合作伙伴的回复，比如`2013-03-28T13:15:00+05:30`我想要 IST 格式的日期。我如何正确转换它。

```
$addTime = explode('+',$response->TrackDetails->ActualDeliveryTimestamp);
if($addTime[1] == '05:30'){
$time = '';
$time = strtotime('+5:30 hrs',$addTime[0]); 
echo date('Y-m-d H:i:s',strtotime($addTime[0]));
} 
```

我试过上面的代码。但不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:42:48.240

```
$addTime = explode('+','2013-03-28T13:15:00+05:30');
list($hours, $minutes) = explode(':', $addTime[1]);

$dt = new DateTime($addTime[0]);
$dt->add(new DateInterval('PT'.intval($hours).'H'));
$dt->add(new DateInterval('PT'.intval($minutes).'M'));
echo $dt->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://3v4l.org/SJ2db)

**编辑**

这更准确，尽管由于夏令时结果不是您所期望的：

```
$dt = new DateTime('2013-03-28T13:15:00+05:30');
$dt->setTimeZone(new DateTimeZone('UTC'));
echo $dt->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://3v4l.org/6nTdo)

# wordpress - 如何显示非特色的wordpress帖子

> ID：15683425
> 
> 赞同：0
> 
> 时间：2013-03-28T13:41:07.310
> 
> 标签：wordpress

我已经上传了一个插件作为“特色帖子”来添加特色帖子，还添加了常规帖子，这两种帖子都具有默认类别（比如，购买知道）。我只想显示常规帖子（即非精选），但我无法仅显示常规帖子，它显示总帖子（即常规加精选）。请任何人帮助我只显示常规帖子。谢谢莎玛

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-09-03T10:18:15.433

```
$feature_ids=array();   

$query=query_posts('featured'=>'yes');

while(have_posts()):the_post();

$feature_ids[]=get_the_ID();

endwhile;wp_reset_query();

// now your feature posts id store in $feature_ids as array then
// in actual query

$query=new WP_Query('post__not_in'=>$feature_ids);

 // it will exclude the posts that are feature

if(have_posts()):while(have_posts()):the_post();
// yours data

endwhile;endif;wp_reset_query(); 
```

# c# - 如何将 linq 中的两列连接到 sql 查询的选择投影

> ID：15683426
> 
> 赞同：3
> 
> 时间：2013-03-28T13:41:07.857
> 
> 标签：c#, linq, linq-to-sql

1-我使用 linq to sql 来查询数据库表。
2- 在我的实际表格中，我将电话国家代码、电话号码和电话分机存储在不同的列中。
3-当我获得数据时，我需要电话等于电话国家代码、电话号码和电话分机的串联。
4- 对于某些记录，这 3 列中的任何一个都可能具有空值。
5- 如果一列为空，则整个串联产生空值。

```
from s in test
select new{
          Phone = s.PhoneCountryCode + s.PhoneNumber + s.PhoneExtension
} 
```

6-我尝试了以下方法，但没有奏效。仍然产生空值。

```
from s in test
select new{
          Phone = s.PhoneCountryCode == null ? "" : s.PhoneCountryCode + s.PhoneNumber       == null ? "" : s.PhoneNumber + s.PhoneExtension == null ? "" : s.PhoneExtension
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:47:28.417

您可以[`??`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)按如下方式使用运算符：

```
from s in test
select new
{
    Phone = (s.PhoneCountryCode ?? "") + (s.PhoneNumber ?? "") + (s.PhoneExtension ?? "")
} 
```

# android - 为什么我应该在 Android 中手动关闭 AlertDialog？

> ID：15683432
> 
> 赞同：6
> 
> 时间：2013-03-28T13:41:19.933
> 
> 标签：android, memory-leaks, android-alertdialog

为什么要在销毁 Activity 之前为 AlertDialog 调用dismiss() 方法？有些东西泄漏了，但究竟是什么？那么为什么 PopupWindow 可以处理 Activity 销毁呢？

我在 Android 资源中发现每个警报对话框都会创建窗口：

```
Window w = PolicyManager.makeNewWindow(mContext); 
```

这意味着什么？为什么它不能只使用从活动中获得的 PhoneWindow？

添加

比如说，AlertDialog 引用 Context，Context 什么都不引用，那么 GC 应该垃圾收集这两个对象（因为它们不是从“外部”引用的）。还有什么对 AlertDialog 的引用？换句话说，内存泄漏到底在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:06:50.127

> 警报对话框使用 id 附加到我们的活动，此[链接](http://1.bp.blogspot.com/-6t7vz5ovazE/TpsasQkETuI/AAAAAAAACUo/SNvzOVQoWWQ/s1600/1.jpg)显示警报对话框的活动，一旦显示警报对话框，它就是一个单独的窗口（你设置取消 false 然后你强制管理它）如果它在后面运行并且你的活动被销毁与它相关的每个内存都将被释放，包括 AlertDialog 的 id。那就是弹出错误。我认为现在很清楚。

# jqgrid - 如何在 JQGrid 编辑中禁用输入键？

> ID：15683439
> 
> 赞同：2
> 
> 时间：2013-03-28T13:41:37.473
> 
> 标签：jqgrid

我使用的是 JQgrid，并且使用内联编辑一切正常，但我需要禁用 Enter 按键。表示如果用户输入值并单击输入，则不需要执行任何操作。现在它试图根据编辑 url 存储数据。但我不需要这个功能。

只需禁用 JQGrid 上的输入键。任何人都可以帮忙吗？

嗨奥列格你问我粘贴我的代码有点长，所以我发布了需要的部分。

```
$("#RevenueReporttbl").jqGrid({
                contentType: "application/json; charset=utf-8",
                mtype: 'GET',
                //                    url: '/AMForecast/Index/',
                height: 'auto',
               // width: 'auto',
                   width: '1150',
                gridview: true,
                datatype: "local",
                loadonce: true,
                data: search_result,
                colNames: ['ForecastId', 'CustomerId', 'Customer Name', 'UserId', 'Person', 'ProjectId', 'Project Name', 'Edit', 'Ytd'],

                colModel: [
                    { name: 'ForecastId', index: 'ForecastId', editable: false, sortable: false, hidden: true, fixed: true },
                    { name: 'CustomerId', index: 'CustomerId', editable: false, sortable: false, hidden: true, fixed: true },
                    { name: 'CustomerName', index: 'CustomerName', width: 130, editable: false, sortable: false, fixed: true },
                    { name: 'UserId', index: 'UserId', width: 130, editable: false, sortable: false, hidden: true, fixed: true },
                    { name: 'Manager', index: 'Manager', align: 'left', width: 130, editable: false, sortable: false, fixed: true },
                    { name: 'ProjectId', index: 'ProjectId', editable: false, sortable: false, hidden: true, fixed: true },
                    { name: 'ProjectName', index: 'ProjectName', editable: false, sortable: false, hidden: true, fixed: true },
                    { name: 'Edit', index: 'Edit', editable: false, width: 40, align: 'center', hidden: false, sortable: false, fixed: true },

                    { name: 'Ytd', index: 'Ytd', editable: false, width: 40, align: 'right', sortable: false, summaryType: 'sum', fixed: true }],
                     rowNum: 99,
                pager: '#pager',
                footerrow: true,
                userDataOnFooter: true,
                altRows: false,
                rowList: [100, 200, 300, 400, 500],
                multipleSearch: true,
                //multiselect: true,
                multipleGroup: true,
                shrinkToFit: true,
                viewrecords: true,
                sortorder: "desc",
                subGrid: true,
                grouping: true, //changed
                groupingView: {
                    groupField: ['CustomerType'],
                    groupSummary: [true],
                    groupColumnShow: [false],
                    groupText: ['<b>{0}</b>'],
                    groupCollapse: false,
                    groupOrder: ['asc'],
                    groupDataSorted: true
                 },
                jsonReader: {
                    root: "gridModel",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: false,
                    cell: "cell",
                    id: "id",
                    subgrid: {
                        root: "gridModel",
                        repeatitems: true,
                        cell: "cell",
                        id: "id"
                    }
                } 
```

所以我也使用带有只读选项的子网格。请告诉如何使输入键为假？当我在编辑模式下单击输入时，我不想做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:30:36.427

您是否看到有关`keys`设置的文档部分：

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)

它说：

> 如果keys为真，那么剩余的设置——successfunc、url、extraparam、aftersavefunc、errorfunc和afterrestorefunc——在按下[Enter]键时作为参数传递给saveRow方法（saveRow不需要定义，因为jqGrid调用它自动地）。有关详细信息，请参阅下面的 saveRow 方法。

# sql - 使用 4 个变量的 SQL 搜索

> ID：15683447
> 
> 赞同：1
> 
> 时间：2013-03-28T13:42:09.847
> 
> 标签：sql, postgresql

我想知道有没有办法搜索一个表给 4 个变量（列），但是在这 4 个变量中，可以激活任何或所有变量来进行搜索，问题是如果我要编写 if 语句根据输入，我将有 16 个 if 函数（我为我的 2 个变量问题写了 4 个 if 语句）

例子：

我有一个名为的表，`cc_music`它有 4 列`track_name`、和。`artist``album``genre`

问题：用户正在寻找歌曲。用户可以输入所有 4 列，或者输入任何 1 列或根本不输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:44:23.033

您需要`WHERE`像这样构建您的子句以允许添加但*“动态”*的搜索条件：

```
WHERE
     (@trackName IS NULL OR track_name = @trackName)
 AND (@artist IS NULL OR artist = @artist)
 AND (@album IS NULL OR album = @album)
 AND (@genre IS NULL OR genre = @genre) 
```

您还需要考虑稍微修改一下以包括部分匹配，例如：

```
 AND (@artist IS NULL OR artist LIKE '%' + @artist + '%') 
```

请注意对大量列执行此操作的性能影响。检查你的索引！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:00:19.790

假设您使用的是 oracle sql

使用以下 sql：

```
select * from cc_music where track_name like "%"||:track_name||"%" and artist like "%"||:artist||"%" and album like "%"||:album||"%" and genre like "%"||:genre||"%" ; 
```

其中 : 是绑定变量名。

无需 16 种不同的功能

# android - 使用选择器设置视图背景

> ID：15683448
> 
> 赞同：0
> 
> 时间：2013-03-28T13:42:10.360
> 
> 标签：android, selector

在我的应用程序中，我有 ImageView 以编程方式添加到其父级的 onLayout 方法中。我希望它具有不同的背景，当它在按下时聚焦不同，在正常状态下聚焦不同。我在值文件夹中定义了一些颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <color name="cream">#FBF9F5</color>
   <color name="green">#93D932</color>
   <color name="blue">#0095FF</color>
</resources> 
```

然后我在名为 table_background_selector.xml 的 drawables 文件夹中定义了选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_selected="true" android:drawable="@color/green" />:
   <item android:state_pressed="true" android:drawable="@color/blue" />:
   <item android:drawable="@color/cream" />:
</selector> 
```

然后我在初始化它的父级的 onLayout 方法后尝试设置背景：

```
v.setBackground(getContext().getResources().getDrawable(R.drawable.table_background_selector)); 
```

那就是 IntelliJ 向我展示问题的时候：

```
"Cannot resolve method 'setBackground(android.graphics.drawable.Drawable)'" 
```

我不明白为什么，因为 View 类有方法 setBackground(Drawable background)

这是我用 setImageResource 设置的 .png：

[http://imgur.com/Skwzd2z](https://imgur.com/Skwzd2z)

![在此处输入图像描述](../Images/082e42009222aeda4998dc8ace4b671a.png)

它的中心是透明的，现在它显示为应用程序设置的任何背景，但我希望它在按下或聚焦时显示不同的颜色

我会感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:45:35.980

检查您是否`R`错误地导入了 android 文件而不是您的本地文件，它看起来确实如此。

**更新：**

和设置`ImageView`背景这样做：

```
image.setImageResource(R.drawable.your_drawable_resource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:47:51.443

首先清理和构建您的项目，然后您仍然会遇到相同的错误

请在导入区域检查您是否包含此语句

导入android.R；

如果是，那么您需要使用包含 R 的包名称，例如 my.package.R。

# xpath - 从 XPATH 结果中排除节点

> ID：15683454
> 
> 赞同：0
> 
> 时间：2013-03-28T13:42:49.107
> 
> 标签：xpath

我尝试从下面的 div 标签中提取每个 text() ，但在 a 标签之间没有 text() 。

**我用这个没有成功：**

```
//div[@class="availability"]/*[not(self::a)]/text() 
```

**这是html**

```
<div class="availability">
   Available. Delivered from UK <br><a href="test.com">Click for more</a>
</div>

<div class="availability">
   Available. Delivered from HK <br><a href="test.com">Click for more</a>
</div>

<div class="availability">
   Available. Delivered from USA <br><a href="test.com">Click for more</a>
</div>

<div class="availability">
   Available. Delivered from DE <br><a href="test.com">Click for more</a>
</div> 
```

感谢您引导我走向正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:27:48.607

`//div[@class="availability"]/text()`

# android - VideoView 作为列表视图中的项目在列表视图的上部和下部创建工件。如何解决？

> ID：15683456
> 
> 赞同：2
> 
> 时间：2013-03-28T13:42:51.243
> 
> 标签：android, video-streaming, android-videoview

您好，我正在开发具有自定义布局的列表视图，其中包含 imageview、AudioPlayeer 和 Video 视图。我在项目中一次显示和隐藏上述两个视图。

但是我可以完美地在项目中显示图像和`AudioPlayer`（使用一些按钮自定义），但是当`i tried to display videoView it will render the view on the upper and down side of the list view.`有任何解决方案可以`VideoView`在`ListvieW`.

在android中显示`VideoView`里面的解决方法是什么？`Listview`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T14:34:54.873

好的，我现在得到的解决方案是你不能同时使用它们。由于 Listview 在滚动时删除并重新创建对象，用于内存管理。

解决方案是要么避免在 ListView 中使用 videoView，要么使用 A ScrollView 而不是 ListView。在第二种方案中，可以将LinearLayouts依次放在一个Layout中，然后将布局放到ScrollView中。仅当您没有太多要显示的视频视图时，此方法才有效，否则滚动时会滞后。

# exception - 有人可以解释一下大 fs:0 吗？

> ID：15683458
> 
> 赞同：6
> 
> 时间：2013-03-28T13:42:56.990
> 
> 标签：exception, assembly, x86, guard, disassembly

```
:0378CED0                 push    ebp    
:0378CED1                 mov     ebp, esp     
:0378CED3                 push    0FFFFFFFFh    
:0378CED5                 push    3927B50h    
:0378CEDA                 push    38DB344h   
:0378CEDF                 mov     eax, large fs:0    
:0378CEE5                 push    eax   
:0378CEE6                 mov     large fs:0, esp   
:0378CEED                 add     esp, 0FFFFF928h   
:0378CEF3                 push    ebx   
:0378CEF4                 push    esi   
:0378CEF5                 push    edi   
:0378CEF6                 mov     [ebp+var_18], esp   
:0378CEF9                 mov     [ebp+var_20], 1   
:0378CF00                 mov     [ebp+var_1C], 0   
:0378CF07                 mov     eax, [ebp+arg_8]    
:0378CF0A                 mov     [ebp+var_230], eax   
:0378CF10                 mov     [ebp+var_22C], 0   
:0378CF1A                 mov     [ebp+var_4], 0   
:0378CF21                 jmp     loc_3B62B79 
```

我无法理解从 0378CEDF 到 0378CEE6 的含义。请有人解释一下...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T05:00:15.633

在 Windows 上，段寄存器 FS 指向 Win32 线程信息块。[http://en.wikipedia.org/wiki/Win32_Thread_Information_Block](http://en.wikipedia.org/wiki/Win32_Thread_Information_Block)

因此，如果这是来自 win32 应用程序的代码，则 0378CEDF 到 0378CEE6 正在保存 FS:0（SEH 帧），然后用 esp 中的任何内容覆盖它。

# perl - perl Openssh ConnectionTimeout 不起作用

> ID：15683461
> 
> 赞同：1
> 
> 时间：2013-03-28T13:43:09.603
> 
> 标签：perl, amazon-ec2, openssh

我有一个 perl 脚本启动一个 EC2 实例，然后使用 Net::OpenSSH 连接并运行一些命令。

```
my $ssh = Net::OpenSSH->new( $username . "\@" . $host, 
          key_path => $key_path,
          master_opts => [-o => "ConnectionAttempts=30", -o => "ConnectTimeout=30"] );

if ( $ssh->error ) {
  die "Timeout: " . $ssh->error . "\n";
} 
```

这似乎不起作用 - 这应该尝试 15 分钟，然后退出，但它几乎立即返回。我从来没有收到 Timeout: 错误消息，所以 ssh 没有返回错误。

这是正确的语法吗？有没有更好的方法来处理 EC2 实例可能需要几分钟才能可用的事实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:40:34.997

根据 CPAN 文档，我可以看到`ConnectionAttempts`并且`ConnectTimeout`应该去`default_ssh_opts`而不是`master_opts`. 请尝试一下。

# php - php包含来自另一个目录的文件

> ID：15683465
> 
> 赞同：7
> 
> 时间：2013-03-28T13:43:28.100
> 
> 标签：php, include

这是一个结构示例：

```
/main
 /css
  style.css
 /include
  article1.php
  article2.php
 header.php
 index.php 
```

在我的 header.php 中，我有以下 CSS 代码：

```
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

而且，例如，在我的 index.php 中，我将以下内容作为第一行：

```
<?php include 'header.php'; ?> 
```

现在，一切正常。接下来我将在 article1.php 文件中插入以下代码：

```
<?php include '../header.php'; ?> 
```

内容（菜单和其他 html）已正确显示，但 CSS 根本不会显示/识别。基本上发生的事情是包含头文件，但服务器不尊重目录父级。为了正确显示 CSS，我必须将`link rel`for CSS更改为`../css/style.css`，但如果我这样做，它将不适用于位于主目录中的文件。

我希望我把我的问题说清楚了。我究竟做错了什么？如何包含来自不同目录的文件并保留其中的链接？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T14:39:06.803

在您网站的`<head>`部分中，插入具有该属性[的`<base>`元素。](https://developer.mozilla.org/en/docs/HTML/Element/base)`href`将该`href`属性设置为您网站的基本 URL，所有*相关*请求都将通过该基本 URL 发送。

```
<base href="http://my-website-url.com/" />
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

使用正确设置的`base`标签，用户的浏览器将尝试从 URL 加载您的样式表`http://my-website-url.com/css/style.css`。

注意：这不仅会影响样式表，还会影响文档中的所有相关链接。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-28T13:46:46.293

它与路径在包含中的工作方式有关。我建议尽可能从 doc 根目录中查找内容。

```
<?php include( $_SERVER['DOCUMENT_ROOT'] . '/header.php' ); ?> 
```

这将适用于您的任何文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T13:48:16.170

而不是使用相对路径：

```
href="css/style.css" 
```

使用来自 webroot 的绝对路径：

```
href="/css/style.css" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-28T13:46:54.490

您应该从根目录包含您的 css 文件。所以 /css/style.css 所以它总是从根开始，然后从那里向下。我相信这应该在所有情况下都能解决您的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-28T13:51:13.580

首先，问题在于您指向 CSS 文件的链接是错误的。最好的办法是查看页面中 HTML 的输出（查看源代码）。所以让我们分解一下（表格 index.php）：

`Index.php`位于`domain.tld/index.php`。您的 css 文件位于`domain.tld/css/*`. 查看索引文件时，您的标题是

```
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

之所以有效，是因为您位于目录（或根目录）的顶部，并且链接是相对于该目录建立的。现在当你上升到 时`domain.tld/include/article1.php`，你不再是根。它正在尝试访问：

```
domain.tld/include/css/style.css 
```

这意味着您必须建立完整的链接或更改您的亲戚。由于CSS位于根目录，因此简单的方法就是使用以下内容

```
<link rel="stylesheet" type="text/css" href="/css/style.css" />
                                             ^ 
```

这意味着它将查看 css 目录的域根目录`domain.tld/css/styles.css`。如果您的顶级目录是`/main`，请使用`/main/css/styles.css`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-28T13:51:35.473

使用已被称为包含的文件中的相对包含始终是一个问题，每次指定相对位置时，请替换您的

```
../some_directory/some_file.php 
```

和

```
dirname(dirname(__FILE__)) . '/some_directory/some_file.php' 
```

`dirname(__FILE__)`是当前目录。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-28T13:58:31.047

我可以解释一下你的问题以及如何解决它。

php 中的包含与 C 中的一样。当您包含一个将页面内容复制/粘贴到第一个页面中的页面时。

所以，有两个文件：

*包含.php*

```
<?php
$var = 'PHP';
?> 
```

*主文件*

```
<?php
include 'include.php';
echo $var; // affiche 'PHP'
?> 
```

当您请求“main.php”页面时，您将获得以下信息：

```
<?php
$var = 'PHP';
echo $var; // affiche 'PHP'
?> 
```

因此，如果您需要在页面中包含一个元素。你有两个选择：

**1.绝对路径（更好的方式）**

不要使用相对路径，而是使用绝对路径。这种方式允许您在不使用当前路径的情况下从任何地方包含文件。

**2.变量**

您可以使用包含存储库/网站根目录的相对路径的变量。所以每次你必须包含一个页面或创建一个页面时，你必须定义一个变量，如下所示：

*包含.php*

```
<?php
$var = 'PHP';
echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"".$currentPath."css/style.css\" />";
?> 
```

*主文件*

```
<?php
# path to the root of the website
$currentPath = "../";

include 'include.php';
echo $var; // affiche 'PHP'
?> 
```

要了解有关包含的更多信息，[请参阅此页面](http://php.net/manual/en/function.include.php)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-28T13:51:23.470

你有两个选择

1.  传递包含文件的相对路径

IE。

```
<link rel="stylesheet" type="text/css" href="<?=$path ?>css/style.css" /> 
```

和

```
$path = "../";
include "header.php"; 
```

或 2\. 您使用文件的绝对路径

```
<link rel="stylesheet" type="text/css" href="/css/style.css" /> 
```

# php - Riak 搜索返回 null

> ID：15683470
> 
> 赞同：3
> 
> 时间：2013-03-28T13:43:46.290
> 
> 标签：php, nosql, riak, riak-search

我正在尝试在 PHP 上与 Riak 合作。我阅读了文档，但没有运气。所以我已经将 /etc/init.d/app.conf 中的“搜索”选项配置为 true。因此， print_r($results) 返回为空数组。

```
# Connect to Riak
$client = new RiakClient('127.0.0.1', 8098);

$bucket = $client->bucket("searchbucket");
$bucket->newObject("one", array("foo"=>"one", "bar"=>"red"))->store();
$bucket->newObject("two", array("foo"=>"two", "bar"=>"green"))->store();

# Execute a search for all objects with matching properties
$results = $client->search("searchbucket", "foo:one OR foo:two")->run();

print_r($results); 
```

我的代码有什么问题？我误解了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:24:51.217

除了在 app.config 文件中启用搜索之外，您还需要为您希望能够搜索的存储桶显式启用它。这可以通过[将 Riak Search 提交挂钩添加到存储桶属性来完成。](http://docs.basho.com/riak/latest/cookbooks/Riak-Search---Indexing-and-Querying-Riak-KV-Data/)

如果您检索“searchbucket”的[存储桶属性](http://docs.basho.com/riak/latest/references/apis/http/HTTP-Get-Bucket-Properties/)，您应该能够看到列出的提交挂钩。

# java - Ant exec：暂停构建以接受执行程序所需的用户输入

> ID：15683474
> 
> 赞同：0
> 
> 时间：2013-03-28T13:43:51.377
> 
> 标签：java, ant

我在构建后使用 Ant exec 运行程序，该程序是一个 java 程序，它有一个等待用户输入的扫描仪，在它做任何事情之前选择一个选项，目前 ant exec 只是运行程序，显示选项并继续其他目标

```
jar:
  [jar] Building jar: /home/me/workspace/app/build/somejar.jar

my.app:
[exec] 
[exec]  Choose one of the following menus 
[exec]  
[exec] 0\. Exit 
[exec] 1\. do something 
[exec] 2\. do something  
[exec] 3\. do something amazing 
[exec] 4\. do something wonderful 
[exec]  
[exec] 

some.next.target: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:19:33.440

考虑使用 <input> 任务来获得选择，然后将其作为输入属性传递给 <exec> 任务，或者如果您的程序将接受命令行参数，则将其用作 <exec> 任务的参数。

# wordpress - 具有多个元键和值的嵌套 Wordpress 循环

> ID：15683484
> 
> 赞同：1
> 
> 时间：2013-03-28T13:44:28.760
> 
> 标签：wordpress, loops, nested

> 所以，我正在开发一个社会政治网站。目前我正在处理包含所有 100 个北卡罗来纳县的地图页面，当您将鼠标悬停在每个县时，它会显示相应的选举结果/数据。对于第一个循环，我将提取每个政党（共和党、民主党、其他）的选举结果数字和百分比。为了显示每个选举结果的对应候选人，我必须创建一个嵌套循环。我决定将嵌套循环放入一个函数中，这样它就不会与模板上的其余代码一起存在。这就是我的 functions.php 文件中的样子：

```
function grabcandidatename($county, $office, $party) {

$args = array(array('key' => 'county', 'value' => $county),array('key' => 'office', 'value' => $office),array('key' => 'party', 'value' => $party) );
$c_query = new WP_Query(array(
    'post_type' => 'government_officials',
    'show_posts' => 1,
    'meta_query' => array(
        'relation' => 'AND',
        $args
    )
));
if($c_query->have_posts() ) :
    while ($c_query->have_posts()) : $c_query->the_post(); 
        echo the_title();
    endwhile;
wp_reset_postdata();
endif;
} 
```

> 好的，现在 - 这是我的模板文件中的样子：

```
//This pulls information from the election results that each candidate custom post type can relate to.
$category = get_the_category();
$officer = get_field('office'); 
```

> 这是被调用的函数。请记住，它在选举结果的循环中被调用。

```
grabcandidatename($category,$officer,'republican'); 
```

> 现在，我从这一切中得到的结果是：我正在获取候选人姓名，但不是获取相应选举结果的候选人姓名，而是将所有候选人姓名与每个选举结果一起列出。所以，我的想法是我的元键和值被忽略了。我知道现在我把它们塞进了我的 $args 变量中，但这只是为了整理东西。如果我使用“meta_query”列出数组，那么我的候选人姓名甚至不会出现在我的选举结果页面上。
> 
> 提前致谢！

好的，我已经修好了。

好的，所以上面的代码有效。我只是个白痴，忘记输入县和办公室的元数据选项。但是，为了让我不必重新进入所有 100 个县，我刚刚将用于选举结果的分类法也与候选人联系起来。所以，代码如下。

要共享分类：

```
register_taxonomy('the_county', array('election_results','government_officials'), $args); 
```

要在函数内创建嵌套循环：

```
function grabcandidatename($county, $office, $party) {
$c_query = new WP_Query(array(
    'post_type' => 'government_officials',
    'show_posts' => 1,
    'taxonomy' => 'the_county',
    'term' => $county,
    'meta_query' => array(
        'relation' => 'AND',
        array(
            'key' => 'office',
            'value' => $office
        ),
        array(
            'key' => 'party',
            'value' => $party
        ),
    )
));
if($c_query->have_posts() ) :
    while ($c_query->have_posts()) : $c_query->the_post(); 
        echo the_title();
    endwhile;
wp_reset_postdata();
endif;
} 
```

然后，在页面模板的另一个循环中调用包含嵌套循环的函数：

```
grabcandidatename($termname,$officer,'republican'); 
```

# java - 对 JavaFX 感到好奇

> ID：15683490
> 
> 赞同：1
> 
> 时间：2013-03-28T13:44:42.290
> 
> 标签：java, javafx, netbeans-7

我对在 Netbeans IDE 中使用 JavaFX 和标准 Java 编程非常好奇。

如果我使用标准 GUI 界面开发标准 Java 应用程序，然后我决定对这个应用程序应用一些 JavaFX 效果，我需要创建什么类型的项目，或者我必须将我的项目更改为 javaFX 应用程序（因为我只决定使用javaFX）？

如果我已经决定要在我的应用程序中使用 JavaFX，那会有什么不同？我会创建一个标准的 java 项目，然后导入 javaFX 外部包，还是创建一个 JavaFX 项目？

如果我决定使用 JavaFX，我永远不确定要创建什么项目。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:54:06.877

JavaFx 应该在 SE 8 到 9 中完全合并。一开始我在将 jfx 添加到现有项目时遇到了一些麻烦。目前没有什么好的方法，但是将 javafx 添加到旧项目的最佳方法是创建一个新的 FX 项目并[查看此帖子](https://stackoverflow.com/questions/9671597/add-java-fx-2-0-to-existing-netbeans-project)。

普通 java 项目和 fx 项目之间的区别在于使用的模板和依赖项（见上文）。所以真正的问题是你是否需要模板提供的骨架代码。我发现它最初有助于我了解 FXML，但[Scene Builder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)自动完成了大部分工作。

# magento - Magento : 从产品 ID 和当前类别 ID 中获取相关产品

> ID：15683491
> 
> 赞同：3
> 
> 时间：2013-03-28T13:44:43.840
> 
> 标签：magento, magento-1.7

我在培训期间完全从 Magento 开始。我已经在一个项目上工作了两个星期，有时我不知道如何进行。

我将尝试代表我的类别树：

```
- accessories
    * visors
    * communication systems
    * other
- helmets
    * a lot of subcategories and subcategories... 
```

我的实际问题是：我属于配件子类别之一（例如遮阳板）。我添加了一个`select`允许选择头盔型号的表格。提交后`select`，我想显示与所选头盔型号相关的遮阳板列表（实际上是 a `virtual product`）。

我可以获得当前的类别 ID（在本例中为面罩）和虚拟产品 ID（即头盔型号）。但我不知道如何通过产品 ID 和类别 ID 显示相关产品。

我试过这样的东西：

```
$relatedProducts = Mage::getModel('catalog/product_link')
                         ->getCollection()
                         ->addCategoryFilter($myCurrentCat)
                         ->addFieldToFilter('product_id',$myVirtualProductId)
                         ->addFieldToFilter('link_type_id','1'); 
```

但这似乎不起作用。

欢迎任何帮助。谢谢。

编辑：我问了这个问题 10 天后，我仍然不知道如何解决我的问题。如果有人可以提供帮助，即使是一点点，只是一个线索......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:21:42.760

我目前无法对此进行测试，但您可以尝试执行以下操作：

```
 $collection = Mage::getSingleton('catalog/product_link')
    ->useRelatedLinks()
    ->getProductCollection()
    ->setIsStrongMode();
$product = Mage::getModel('catalog/product')->load($productId);
$collection->setProduct($product);
$collection->addCategoryFilter($category); //I'm not sure if this will work correctly 
```

我会测试它，当我有更多时间的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:35:39.413

其实我只是自己解决了我的问题。

如果将来可以帮助任何人，这是我的解决方案：

```
$mainProduct = Mage::getModel('catalog/category')->load($myCurrentCat->getId());
$mainProduct = $mainProduct->getProductCollection();
$mainProduct = $mainProduct->addAttributeToFilter('product_id', $myVirtualProductId);

foreach ($mainProduct as $product) {
    $related = $product->getRelatedProductIds();
    if ($this->array_contains($related, $myVirtualProductId)) {
        //TODO
    }
} 
```

# algorithm - 银行家算法

> ID：15683495
> 
> 赞同：-6
> 
> 时间：2013-03-28T13:44:50.647
> 
> 标签：algorithm, language-agnostic, resources, deadlock, bankers-algorithm

我有一个关于 Dijkstra 银行家算法问题的答案的问题（问题在下面的屏幕截图中提供）。

我认为这个问题的答案应该是“是的，有可能做到”。我的想法是，一旦用户 1 完成，我们可以将他弹出并释放他请求的资源（10 个 A 和 5 个 B），并将他使用的资源返回到可用资源池，这将帮助其他人完成。

相反，答案（在问题下方的屏幕截图中）表明这是不可能的。我哪里做错了？为什么这是不可能的答案？

![在此处输入图像描述](../Images/043ea33de68f29d029117dd036634367.png)

回答： ![在此处输入图像描述](../Images/ecf877e13ca07805ce1734b8182d6fef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:56:35.307

我认为这只是一个措辞不佳的问题。问题描述指出可用资源是`A = 10`和`B = 15`。

在银行家的算法中，如果一个进程可以分配它需要的最大资源，它就被认为是“安全的”。（过程 1 需要 10 个 A 和 5 个 B）

然后答案表明可用资源是`A = 1`和`B = 2`。如果查看当前分配的所有进程号：

进程 1 有 2 个资源
进程 2 有 3 个资源
进程 3 有 2 个资源
进程 4 有 2 个资源
--------------- ------------
使用中的总 A 资源 = 9

很明显，这个问题意味着这些是整个系统资源，而不是当前可用的资源。因此 9 A 资源正在使用中，进程 1 最多需要 10 个（它有 2 个），所以它还需要 8 个；在这种情况下，答案是否定的，这是不安全的。

# c# - 如果 Windows Phone 应用程序不处于前台状态，它是否可以与 Web 服务通信？

> ID：15683496
> 
> 赞同：1
> 
> 时间：2013-03-28T13:44:58.653
> 
> 标签：c#, windows-phone

Windows Phone 应用程序是否可以从 Web 服务接收消息并在它不在前台时响应它们？例如，在来电期间。因为如果web服务没有收到客户端的响应，客户端就会断开连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:02:04.277

如果用户不关闭应用程序，那将耗尽电池电量。考虑允许客户端断开连接，因为移动应用程序总是因为信号而任意断开连接。

如果您的应用程序是位置跟踪应用程序，您可以在后台运行您的应用程序。如果您滥用此功能，您可能无法通过认证。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:37:45.573

我可以验证您是否可以在后台运行时发送 API 请求。

存在电池耗尽问题。您应该自己监控电池电量，如果您的应用注意到电池电量低于某个百分比，您应该停止进行 API 调用。如果你不这样做，系统会为你做的。至少如果你这样做，你可以通知用户。

# c# - c#: 字符串格式

> ID：15683499
> 
> 赞同：5
> 
> 时间：2013-03-28T13:44:59.913
> 
> 标签：c#, string

我遇到了一个代码。任何人都可以对此有所了解。如果有人觉得它有点基本，请善待。

```
string str= String.Format("{0,2:X2}", (int)value); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T13:48:24.130

`X`格式返回[您](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#XFormatString)的`value`.

例如`String.Format("{0:X}", 10)`将返回`"A"`，而不是`"10"`

`X2`如果您的十六进制表示少于两个符号，将在左侧添加**零**

例如`String.Format("{0:X2}", 10)`将返回`"0A"`，而不是`"A"`

`0,2`如果生成的符号数小于 2，将在左侧添加**空格。**

例如`String.Format("{0,3:X2}", 10)`会返回`" 0A"`，但不会`"0A"`

因此，这种格式`{0,2:X2}`将以十六进制表示法返回您的值，如果它只有一个符号，则从左侧附加一个零，如果是一个符号，则从左侧附加空格。多次阅读后，您可以看到，这是多余的，并且可以在不改变行为的情况下将`,2`这种格式简化为。`{0:X2}`

一些注意事项：

`:`**分隔索引号和应用于该对象的**特定格式。例如这段代码

```
String.Format("{0:X} {1:N} {0:N}", 10, 20) 
```

显示，我想以`10`十六进制格式化（索引 0），然后以数字方式显示`20`（索引 1），然后`10`以数字方式格式化（索引 0）。

`0,2`从半列的左侧部分指示索引位置`0`和格式`,2`应用于**结果字符串**，而不是特定对象。所以这段代码

```
String.Format("{0,1} {1,2} {0,4}", 10, 20) 
```

将打印带有至少一个符号的第一个数字，第二个带有至少两个符号的数字，然后再次打印带有至少四个符号的第一个数字。如果结果字符串中的符号数量较少 - 它们将由空格填充。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T13:47:01.430

```
{0,2:X2} 
```

它分为

1.  `0,2`- 将数字格式化`10`为`10`
2.  `X2`- 将数字格式化`10`为十六进制值`0A`。

## 更新

**代码**

```
String.Format("{0,2:X2}", (int)value); // where value = 10 
```

**结果：** `0A`

现场示例：http: [//ideone.com/NW0U26](http://ideone.com/NW0U26)

**我的结论**
你可以在这里更改`"{0,2:X2}"`为`"{0:X2}"`，[现场示例](http://ideone.com/rN3rCE)。

参考链接：[MSDN](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T13:48:50.197

[根据 MSDN](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)，格式字符串具有以下格式：

```
{index[,alignment][:formatString]} 
```

我们可以在您的格式字符串中找到所有这些组件（最后两个是可选的）：

**`0`**是要使用的参数的**索引**。
**`,2`**是**对齐**部分，如果结果比这短，则用空格填充。
**`:X2`**是**formatString**部分。这意味着该数字将被格式化为十六进制（大写）格式，最小宽度为 2。如果生成的数字少于 2 位，则在左侧填充零。

在这种特定情况下，对齐说明符是多余的，因为`X2`已经指定了最小宽度为 2。

有关格式字符串的更多信息，请参见此处：
[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)
[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

# c# - 您如何跟踪线程/线程上下文？

> ID：15683505
> 
> 赞同：1
> 
> 时间：2013-03-28T13:45:10.933
> 
> 标签：c#, multithreading, f#

我有一个服务应用程序，我希望每个条目/调度都与某种上下文相关联。我注意到，有时当“创建”新线程时，系统似乎只是在重新使用现有线程。

当我创建一个新线程/任务时，是否有一些独特的信息可以表明我是在线程 A 还是线程 B 上（即使 CLR 选择使用相同的线程）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:50:27.623

当你创建一个新线程时，它总是会创建一个新线程。

当您使用线程池线程时，您故意不创建新线程，而是重新使用池中的线程。

默认情况下，当您使用`Task`它时，将使用线程池线程，除非`LongRunning`给出了任务创建/继续选项。

您可以使用它`Thread.CurrentThread.ManagedThreadId`来获取当前线程的 ID，但除了用于调试/开发目的之外，您可能不应该依赖它。

一般来说，无论是创建一个新线程还是重用一个新线程，对您的代码来说都无关紧要。如果它确实重要，则表明您的代码有问题，您应该仔细查看您所依赖的内容以及原因。

# r - 在二进制矩阵中每 10 列聚合一次

> ID：15683506
> 
> 赞同：2
> 
> 时间：2013-03-28T13:45:10.910
> 
> 标签：r, date, matrix, aggregate

我是 R 新手。我想像这样转换二进制矩阵：
示例：

```
"   1874 1875 1876 1877 1878 .... 2009  
F     1     0     0     0     0   ...  0
E     1     1     0     0     0   ...  0
D     1     1     0     0     0   ...  0
C     1     1     0     0     0   ...  0
B     1     1     0     0     0   ...  0
A     1     1     0     0     0   ...  0" 
```

因为，列名是年，我想在几十年内聚合它们并获得类似的东西：

```
"1840-1849 1850-1859 1860-1869 .... 2000-2009
F     1     0     0     0     0   ...  0
E     1     1     0     0     0   ...  0
D     1     1     0     0     0   ...  0
C     1     1     0     0     0   ...  0
B     1     1     0     0     0   ...  0
A     1     1     0     0     0   ...  0" 
```

我习惯了python，不知道如何在不制作循环的情况下进行这种转换！谢谢，伊莎贝尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:19:18.003

目前尚不清楚您想要什么聚合，但使用以下虚拟数据

```
set.seed(42)
df <- data.frame(matrix(sample(0:1, 6*25, replace = TRUE), ncol = 25))
names(df) <- 1874 + 0:24 
```

以下计算每 10 年期间的事件。

将年份作为数字变量获取

```
years <- as.numeric(names(df)) 
```

接下来我们需要一个每个十年开始的指标

```
ind <- seq(from = signif(years[1], 3), to = signif(tail(years, 1), 3), by = 10) 
```

`ind`然后我们应用( )的索引`1:(length(ind)-1)`，从中选择`df`当前十年的列并`1`使用 计算 s `rowSums`。

```
tmp <- lapply(seq_along(ind[-1]),
              function(i, inds, data) {
                rowSums(data[, names(data) %in% inds[i]:(inds[i+1]-1)])
              }, inds = ind, data = df) 
```

接下来，我们`cbind`将生成的向量放入数据框中并修复列名：

```
out <- do.call(cbind.data.frame, tmp)
names(out) <- paste(head(ind, -1), tail(ind, -1) - 1, sep = "-")
out 
```

这给出了：

```
> out
  1870-1879 1880-1889 1890-1899
1         4         5         6
2         4         6         6
3         2         5         5
4         5         5         7
5         3         3         7
6         5         5         4 
```

如果您只想要一个二进制矩阵，其中`1`表明该十年内发生了至少 1 个事件，那么您可以使用：

```
tmp2 <- lapply(seq_along(ind[-1]),
               function(i, inds, data) {
                 as.numeric(rowSums(data[, names(data) %in% inds[i]:(inds[i+1]-1)]) > 0)
               }, inds = ind, data = df)
out2 <- do.call(cbind.data.frame, tmp2)
names(out2) <- paste(head(ind, -1), tail(ind, -1) - 1, sep = "-")
out2 
```

这使：

```
> out2
  1870-1879 1880-1889 1890-1899
1         1         1         1
2         1         1         1
3         1         1         1
4         1         1         1
5         1         1         1
6         1         1         1 
```

如果您想要不同的聚合，请修改`lapply`调用中应用的函数以使用`rowSums`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:50:39.357

This is another option, using modular arithmetic to aggregate the columns.

```
# setup, borrowed from @GavinSimpson
set.seed(42)
df <- data.frame(matrix(sample(0:1, 6*25, replace = TRUE), ncol = 25))
names(df) <- 1874 + 0:24

result <- do.call(cbind, 
    by(t(df), as.numeric(names(df)) %/% 10 * 10, colSums))

# add -xxx9 to column names, for each decade
dimnames(result)[[2]] <- paste(colnames(result), as.numeric(colnames(result)) + 9, sep='-')

#    1870-1879 1880-1889 1890-1899
# V1         4         5         6
# V2         4         6         6
# V3         2         5         5
# V4         5         5         7
# V5         3         3         7
# V6         5         5         4 
```

If you wanted to aggregate with something other than `sum`, replace the call to `colSums` with something like `function(cols) lapply(cols, f)`, where f is the aggregating function, e.g., `max`.

# android - 将数据传递到键值对

> ID：15683507
> 
> 赞同：0
> 
> 时间：2013-03-28T13:45:12.867
> 
> 标签：android, http-post

如何通过使用“=”代替“：”将键值对中的数据传递到`HttpPost`Android中？

像这样：

```
"firstName" = "abc"
"lastName" = "xyz" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:49:00.720

我不知道您使用“=”代替“：”是什么意思，但我猜您正在尝试使用参数发布。你可以尝试这样的事情：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
nameValuePairs.add(new BasicNameValuePair("firstName", "abc"));
nameValuePairs.add(new BasicNameValuePair("lastName", "xyz"));
try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    httpClient.execute(httpPost);
} 
```

# android - Android布局难点——参数和内容的动态控制。最好的编码方式？

> ID：15683508
> 
> 赞同：0
> 
> 时间：2013-03-28T13:45:12.927
> 
> 标签：android, layout, dynamic

我正在尝试在仅限纵向的布局中在黑色背景上制作一个 8x8 彩色正方形矩阵。我需要所有正方形的大小都相等，并且整个矩阵是屏幕宽度的 60% 和相等的高度。由于我的代码，我还需要动态控制每个方块的颜色，如果您愿意，可以将其称为模式设置代码。这是我需要最终产品看起来像的示例：

[画面示例](http://i.stack.imgur.com/fPH2B.jpg)

我一直在研究不同的方法来做到这一点，并希望得到一些关于最佳方法的建议。以下是我的一些想法：

1）使用`GridLayout`（不是GridView）并将每个单元格的背景设置为所需的颜色。使用 java 应该不难控制，但是如何强制执行正确的尺寸？我需要用一定大小的东西填充每个网格单元，还是可以使用`layout_weight`属性来控制尺寸？

2) 使用 和 的组合并`RelativeLayout`显示本地保存的彩色方块图像。我可以用来控制这些图像的大小吗？如果这些图像太小，它们会被拉伸以填充所需的尺寸吗？（我正在考虑更大的平板电脑屏幕。）`LinearLayout``ImageView``layout_weight`

我真正需要的是一些示例代码来实现我需要的一个非常简单的版本（例如屏幕中心的一个正方形，我可以动态控制颜色）。显然，我可以将其扩展到我的特定要求。如果需要更多详细信息或代码，我会很乐意发布它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:04:37.413

也许您可以创建一个自定义 View 对象，并在 onDraw 方法中呈现适当的位图？使用布局对象似乎有点矫枉过正，除非您打算做的不仅仅是渲染颜色方块？

编辑：或者，我曾经使用以下帖子中的信息以编程方式构建布局网格。这并不*完全*是您所需要的（它会根据需要生成尽可能多的水平“单元格”），但应该有助于深入了解操作布局尺寸：

[Android 的换行小部件布局](https://stackoverflow.com/questions/549451/line-breaking-widget-layout-for-android)

# iphone - 在tableview的单行中显示多个值

> ID：15683509
> 
> 赞同：0
> 
> 时间：2013-03-28T13:45:14.030
> 
> 标签：iphone, uitableview, ios6

我在数组中有动态值。我必须在一行中显示 4 个值，在另一行中显示剩余值。

例如。数组计数为 10。

第一行包含 1、2、3、4 第二行包含 5、6、7、8
第三行包含 9、10。

但我的问题是，我将 tableview 单元格设置为：

第一排：1,2,3,4 第二排：2,3,4,5 第三排：3,4,5,6

我正在尝试很多事情，但没有得到确切的灵魂。

索引路径处的行单元格：

```
if (rowcount % 4)
 {
     for (k=0; k<4; k++)
     {
       btnexpand = [[UIButton alloc] init];
       btnexpand = [UIButton buttonWithType:UIButtonTypeCustom];
       btnexpand.frame = CGRectMake(j, 5, 80, 40);
       [btnexpand setTitle:[NSString stringWithFormat:@"Step %d",[[[[appDelegate.array_proj objectAtIndex:indexPath.section] arr_task] objectAtIndex:indexPath.row - 1+k] taskid]] forState:UIControlStateNormal];

       [cell.contentView addSubview:btnexpand];

        j = j + 65;
       }
    }
    else
    {
       for (k=0; k<rowcount%4; k++)
        {
           btnexpand = [[UIButton alloc] init];
           btnexpand = [UIButton buttonWithType:UIButtonTypeCustom];
           btnexpand.frame = CGRectMake(j, 5, 80, 40);

            [btnexpand setTitle:[NSString stringWithFormat:@"Step %d",[[[[appDelegate.array_proj objectAtIndex:indexPath.section] arr_task] objectAtIndex:indexPath.row - 1+k] taskid]] forState:UIControlStateNormal];

             [cell.contentView addSubview:btnexpand];

              j = j + 65;
       }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:02:26.063

你可以这样做

```
int initialIndex = indexPath.row * 4;
for (int i=initialIndex ; i<initialIndex+4 && i< totalValues ; i++)
{
    //USE i for getting IndexValue

} 
```

# php - PHP重写规则不适用于查询字符串

> ID：15683510
> 
> 赞同：1
> 
> 时间：2013-03-28T13:45:17.137
> 
> 标签：php, url-rewriting

我在 htaccess 文件中编写以下规则以将查询字符串更改为目录结构

```
 RewriteRule ^dashboard/([0-9]*)?$ dashboard.php?user_id=$1 
```

用于重写url。它工作正常

```
localhost/project/dashboard // (dashboard.php) 
```

所有链接都为

```
localhost/project/css/style.css
localhost/project/js/script.js 
```

但是当我附加一个 id

```
localhost/project/dashboard/1 // (dashboard.php?user_id=1) 
```

它将所有链接更改为

```
localhost/project/dashboard/css/style.css
localhost/project/dashboard/js/script.js 
```

为什么将 附加`dashboard`到所有链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:55:44.550

这是因为你“告诉他”这样做。

```
RewriteRule ^dashboard/([0-9]*)?$ dashboard.php?user_id=$1
         //  ^here you tell him to print that "dashboard" 
```

当然，其他链接也有效——您甚至不将它们与该规则匹配。

我在[这里](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)找到了你的东西，向下滚动到标题“Strip Query Strings”。在那里，它说你这样做：

```
RewriteCond %{QUERY_STRING} example=
RewriteRule (.*) http://www.domain.com/$1? [R=301] 
```

当然，只需将该网址更改为您自己的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:02:07.690

您的 html 文件中如何引用 style.css？

如果你有这样的href="css/style.css"，HTML 不知道你正在重写，认为/1 是一个文件夹，会在dashboard/css/style.css 中查找

任何使用 url 重写的系统通常都必须写入样式和脚本的所有路径以避免这种情况。所以你必须像这样引用你的风格 href="http://localhost/project/css/style.css"

如果您有一个生产和开发环境，它将帮助您拥有一个变量，例如

```
if($SERVER['SERVER_NAME']=='localhost'){
  $BASE_URL = "http://localhost/project/"
}else{
  $BASE_URL = "http://mydomain.com/"
} 
```

并将其放在对 css、脚本或图像的任何调用之前；）

# php - Codeigniter 插入批处理不起作用

> ID：15683519
> 
> 赞同：1
> 
> 时间：2013-03-28T13:45:41.727
> 
> 标签：php, mysql, codeigniter, activerecord

我的功能是：

```
function saveproduct($p_arrProductInfo,$p_arrProductLangInfo){
        $this->db->trans_start();       
        $this->db->insert_batch('t_product', $p_arrProductInfo);    
        $this->db->insert_batch('t_productlang', $p_arrProductLangInfo); 
        $this->db->trans_complete();    
} 
```

我的错误是：

```
INSERT INTO t_productlang (a_active, a_availablefororder, a_categorydefaultid, a_condition, a_createdby, a_createddate, a_ean13, a_ecotax, a_manufacturerid, a_onlineonly, a_onsale, a_price, a_productid, a_quantity, a_reference, a_showprice, a_styleguideurl, a_supplierid, a_upc, a_weight, a_wholesaleprice, a_createdby, a_createddate, a_description, a_descriptionshort, a_lang, a_linkrewrite, a_metadescription, a_metakeywords, a_metatitle, a_name, a_productid, a_shopid, a_tags) VALUES ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'1',''), ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'2',''), ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'3',''), ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'4',''), ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'5',''), ('1','2013-03-28 07:10:24','&lt;p&gt;With a contemporary approach to the latest fashion trends, &lt;strong&gt;People&lt;/strong&gt; is a brand that gives a completely modern spin to ethnic wear for women.&lt;/p&gt;&lt;p&gt;This &lt;strong&gt;3/4 sleeved, printed, short kurta&lt;/strong&gt; boasts of a &lt;strong&gt;printed yoke&lt;/strong&gt; and a &lt;strong&gt;pleated front&lt;/strong&gt;. Pair it with a fitted churidar for a style statement that will definitely make heads turn wherever you go. Buy online now!&lt;/p&gt;','Featuring People&amp;#39;s Ethnic, All-over print Short Kurta with a Band Collar, 3/4th sleeve and . It comes in Regular Fit. Wash as indicated on label.','1','printed-band-collar-kurta','Buy PEOPLE Dupatta &amp; Kurta for women at Trendin.com - Shop online for Printed Band Collar Kurta for women at best price with Free Shipping &amp; 15 days Exchange policy','printed band collar kurta, women kurta, women dupatta, buy kurta online, buy dupatta online, kurta dupatta online shop, buy kurta for women, kurtis online, online kutis for sale, trendin','PEOPLE Kurta &amp; Dupatta Online -Printed Band Collar Kurtaat Trendin.com','Printed Band Collar Kurta',3629,'6','') 
```

实际上，第一个和第二个 arr 键和值在事务中合并，它显示发生数据库错误

```
 Error Number: 1136 Column count doesn't match value count at row 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:52:18.870

如此简单，错误清楚地说明了这一点。

我看到您对记录 1 的查询它提到了 34 列并且只给出了 27 列值。存在不匹配。

# java - java swing应用程序中mac os x上的功能键

> ID：15683520
> 
> 赞同：2
> 
> 时间：2013-03-28T13:45:45.017
> 
> 标签：java, macos, swing

我有一个 java swing 应用程序，它有一些快捷键（`F10`，`F12`等）。
问题是，当我在 MacOS X 上运行此应用程序时，按下快捷键时它们在 Mac OS 上具有默认行为。

是否有可能通过我的 Swing 应用程序以编程方式禁用 MacOS 上 F 键的默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:52:48.187

不，这些设置在`System preferences > Keyboard > Keyboard Shortcuts`. 当然，没有什么可以阻止您为所选的[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)添加修饰符，[例如](https://stackoverflow.com/a/5129757/230513)。理想情况下，您应该让用户[保留一个偏好](https://stackoverflow.com/a/11114200/230513)。

# excel - VBA 2003 中的局部非静态变量错误太多？

> ID：15683522
> 
> 赞同：0
> 
> 时间：2013-03-28T13:45:57.737
> 
> 标签：excel, excel-2003, vba

嗨，我在 VBA Excel 2003 中为 MS access 数据库的插入查询遇到编译错误。如何克服这个错误？

```
Public Function InsertSheetCurrent()
    Static intK As Integer
    Call clsadodb.ConnecttoDatabase
    objRSet.CursorType = adOpenStatic

    For intK = 0 To WSCurrentHCV.Range("A10:HN223").Rows.Count - 1
        clsadodb.objCon.Execute "insert into tblCurrentHCV(fldVersion,fldCountry,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220)" & _
        " values('" & WSCurrentHCV.Cells(intK + 10, 1).Text & "','" & WSCurrentHCV.Cells(intK + 10, 2).Text & "','" & WSCurrentHCV.Cells(intK + 10, 3) & "','" & WSCurrentHCV.Cells(intK + 10, 4).Text & "','" & WSCurrentHCV.Cells(intK + 10, 5).Text & "','" & WSCurrentHCV.Cells(intK + 10, 6).Text & "','" & WSCurrentHCV.Cells(intK + 10, 7).Text & "','" & WSCurrentHCV.Cells(intK + 10, 8).Text & "','" & WSCurrentHCV.Cells(intK + 10, 9).Text & "','" & WSCurrentHCV.Cells(intK + 10, 10).Text & "','" & WSCurrentHCV.Cells(intK + 10, 11).Text & "','" & WSCurrentHCV.Cells(intK + 10, 12).Text & "','" & WSCurrentHCV.Cells(intK + 10, 13).Text & "','" & WSCurrentHCV.Cells(intK + 10, 14).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 15).Text & "','" & WSCurrentHCV.Cells(intK + 10, 16).Text & "','" & WSCurrentHCV.Cells(intK + 10, 17).Text & "','" & WSCurrentHCV.Cells(intK + 10, 18).Text & "','" & WSCurrentHCV.Cells(intK + 10, 19).Text & "','" & WSCurrentHCV.Cells(intK + 10, 20).Text & "','" & WSCurrentHCV.Cells(intK + 10, 21).Text & "','" & WSCurrentHCV.Cells(intK + 10, 22).Text & "','" & WSCurrentHCV.Cells(intK + 10, 23).Text & "','" & WSCurrentHCV.Cells(intK + 10, 24).Text & "','" & WSCurrentHCV.Cells(intK + 10, 25).Text & "','" & WSCurrentHCV.Cells(intK + 10, 26).Text & "','" & WSCurrentHCV.Cells(intK + 10, 27).Text & "','" & WSCurrentHCV.Cells(intK + 10, 28).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 29).Text & "','" & WSCurrentHCV.Cells(intK + 10, 30).Text & "','" & WSCurrentHCV.Cells(intK + 10, 31).Text & "','" & WSCurrentHCV.Cells(intK + 10, 32).Text & "','" & WSCurrentHCV.Cells(intK + 10, 33).Text & "','" & WSCurrentHCV.Cells(intK + 10, 34).Text & "','" & WSCurrentHCV.Cells(intK + 10, 35).Text & "','" & WSCurrentHCV.Cells(intK + 10, 36).Text & "','" & WSCurrentHCV.Cells(intK + 10, 37).Text & "','" & WSCurrentHCV.Cells(intK + 10, 38).Text & "','" & WSCurrentHCV.Cells(intK + 10, 39).Text & "','" & WSCurrentHCV.Cells(intK + 10, 40).Text & "','" & WSCurrentHCV.Cells(intK + 10, 41).Text & "','" & WSCurrentHCV.Cells(intK + 10, 42).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 43).Text & "','" & WSCurrentHCV.Cells(intK + 10, 44).Text & "','" & WSCurrentHCV.Cells(intK + 10, 45).Text & "','" & WSCurrentHCV.Cells(intK + 10, 46).Text & "','" & WSCurrentHCV.Cells(intK + 10, 47).Text & "','" & WSCurrentHCV.Cells(intK + 10, 48).Text & "','" & WSCurrentHCV.Cells(intK + 10, 49).Text & "','" & WSCurrentHCV.Cells(intK + 10, 50).Text & "','" & WSCurrentHCV.Cells(intK + 10, 51).Text & "','" & WSCurrentHCV.Cells(intK + 10, 52).Text & "','" & WSCurrentHCV.Cells(intK + 10, 53).Text & "','" & WSCurrentHCV.Cells(intK + 10, 54).Text & "','" & WSCurrentHCV.Cells(intK + 10, 55).Text & "','" & WSCurrentHCV.Cells(intK + 10, 56).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 57).Text & "','" & WSCurrentHCV.Cells(intK + 10, 58).Text & "','" & WSCurrentHCV.Cells(intK + 10, 59).Text & "','" & WSCurrentHCV.Cells(intK + 10, 60).Text & "','" & WSCurrentHCV.Cells(intK + 10, 61).Text & "','" & WSCurrentHCV.Cells(intK + 10, 62).Text & "','" & WSCurrentHCV.Cells(intK + 10, 63).Text & "','" & WSCurrentHCV.Cells(intK + 10, 64).Text & "','" & WSCurrentHCV.Cells(intK + 10, 65).Text & "','" & WSCurrentHCV.Cells(intK + 10, 66).Text & "','" & WSCurrentHCV.Cells(intK + 10, 67).Text & "','" & WSCurrentHCV.Cells(intK + 10, 68).Text & "','" & WSCurrentHCV.Cells(intK + 10, 69).Text & "','" & WSCurrentHCV.Cells(intK + 10, 70).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 71).Text & "','" & WSCurrentHCV.Cells(intK + 10, 72).Text & "','" & WSCurrentHCV.Cells(intK + 10, 73).Text & "','" & WSCurrentHCV.Cells(intK + 10, 74).Text & "','" & WSCurrentHCV.Cells(intK + 10, 75).Text & "','" & WSCurrentHCV.Cells(intK + 10, 76).Text & "','" & WSCurrentHCV.Cells(intK + 10, 77).Text & "','" & WSCurrentHCV.Cells(intK + 10, 78).Text & "','" & WSCurrentHCV.Cells(intK + 10, 79).Text & "','" & WSCurrentHCV.Cells(intK + 10, 80).Text & "','" & WSCurrentHCV.Cells(intK + 10, 81).Text & "','" & WSCurrentHCV.Cells(intK + 10, 82).Text & "','" & WSCurrentHCV.Cells(intK + 10, 83).Text & "','" & WSCurrentHCV.Cells(intK + 10, 84).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 85).Text & "','" & WSCurrentHCV.Cells(intK + 10, 86).Text & "','" & WSCurrentHCV.Cells(intK + 10, 87).Text & "','" & WSCurrentHCV.Cells(intK + 10, 88).Text & "','" & WSCurrentHCV.Cells(intK + 10, 89).Text & "','" & WSCurrentHCV.Cells(intK + 10, 90).Text & "','" & WSCurrentHCV.Cells(intK + 10, 91).Text & "','" & WSCurrentHCV.Cells(intK + 10, 92).Text & "','" & WSCurrentHCV.Cells(intK + 10, 93).Text & "','" & WSCurrentHCV.Cells(intK + 10, 94).Text & "','" & WSCurrentHCV.Cells(intK + 10, 95).Text & "','" & WSCurrentHCV.Cells(intK + 10, 96).Text & "','" & WSCurrentHCV.Cells(intK + 10, 97).Text & "','" & WSCurrentHCV.Cells(intK + 10, 98).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 99).Text & "','" & WSCurrentHCV.Cells(intK + 10, 100).Text & "','" & WSCurrentHCV.Cells(intK + 10, 101).Text & "','" & WSCurrentHCV.Cells(intK + 10, 102).Text & "','" & WSCurrentHCV.Cells(intK + 10, 103).Text & "','" & WSCurrentHCV.Cells(intK + 10, 104).Text & "','" & WSCurrentHCV.Cells(intK + 10, 105).Text & "','" & WSCurrentHCV.Cells(intK + 10, 106).Text & "','" & WSCurrentHCV.Cells(intK + 10, 107).Text & "','" & WSCurrentHCV.Cells(intK + 10, 108).Text & "','" & WSCurrentHCV.Cells(intK + 10, 109).Text & "','" & WSCurrentHCV.Cells(intK + 10, 110).Text & "','" & WSCurrentHCV.Cells(intK + 10, 111).Text & "','" & WSCurrentHCV.Cells(intK + 10, 112).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 113).Text & "','" & WSCurrentHCV.Cells(intK + 10, 114).Text & "','" & WSCurrentHCV.Cells(intK + 10, 115).Text & "','" & WSCurrentHCV.Cells(intK + 10, 116).Text & "','" & WSCurrentHCV.Cells(intK + 10, 117).Text & "','" & WSCurrentHCV.Cells(intK + 10, 118).Text & "','" & WSCurrentHCV.Cells(intK + 10, 119).Text & "','" & WSCurrentHCV.Cells(intK + 10, 120).Text & "','" & WSCurrentHCV.Cells(intK + 10, 121).Text & "','" & WSCurrentHCV.Cells(intK + 10, 122).Text & "','" & WSCurrentHCV.Cells(intK + 10, 123).Text & "','" & WSCurrentHCV.Cells(intK + 10, 124).Text & "','" & WSCurrentHCV.Cells(intK + 10, 125).Text & "','" & WSCurrentHCV.Cells(intK + 10, 126).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 127).Text & "','" & WSCurrentHCV.Cells(intK + 10, 128).Text & "','" & WSCurrentHCV.Cells(intK + 10, 129).Text & "','" & WSCurrentHCV.Cells(intK + 10, 130).Text & "','" & WSCurrentHCV.Cells(intK + 10, 131).Text & "','" & WSCurrentHCV.Cells(intK + 10, 132).Text & "','" & WSCurrentHCV.Cells(intK + 10, 133).Text & "','" & WSCurrentHCV.Cells(intK + 10, 134).Text & "','" & WSCurrentHCV.Cells(intK + 10, 135).Text & "','" & WSCurrentHCV.Cells(intK + 10, 136).Text & "','" & WSCurrentHCV.Cells(intK + 10, 137).Text & "','" & WSCurrentHCV.Cells(intK + 10, 138).Text & "','" & WSCurrentHCV.Cells(intK + 10, 139).Text & "','" & WSCurrentHCV.Cells(intK + 10, 140).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 141).Text & "','" & WSCurrentHCV.Cells(intK + 10, 142).Text & "','" & WSCurrentHCV.Cells(intK + 10, 143).Text & "','" & WSCurrentHCV.Cells(intK + 10, 144).Text & "','" & WSCurrentHCV.Cells(intK + 10, 145).Text & "','" & WSCurrentHCV.Cells(intK + 10, 146).Text & "','" & WSCurrentHCV.Cells(intK + 10, 147).Text & "','" & WSCurrentHCV.Cells(intK + 10, 148).Text & "','" & WSCurrentHCV.Cells(intK + 10, 149).Text & "','" & WSCurrentHCV.Cells(intK + 10, 150).Text & "','" & WSCurrentHCV.Cells(intK + 10, 151).Text & "','" & WSCurrentHCV.Cells(intK + 10, 152).Text & "','" & WSCurrentHCV.Cells(intK + 10, 153).Text & "','" & WSCurrentHCV.Cells(intK + 10, 154).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 155).Text & "','" & WSCurrentHCV.Cells(intK + 10, 156).Text & "','" & WSCurrentHCV.Cells(intK + 10, 157).Text & "','" & WSCurrentHCV.Cells(intK + 10, 158).Text & "','" & WSCurrentHCV.Cells(intK + 10, 159).Text & "','" & WSCurrentHCV.Cells(intK + 10, 160).Text & "','" & WSCurrentHCV.Cells(intK + 10, 161).Text & "','" & WSCurrentHCV.Cells(intK + 10, 162).Text & "','" & WSCurrentHCV.Cells(intK + 10, 163).Text & "','" & WSCurrentHCV.Cells(intK + 10, 164).Text & "','" & WSCurrentHCV.Cells(intK + 10, 165).Text & "','" & WSCurrentHCV.Cells(intK + 10, 166).Text & "','" & WSCurrentHCV.Cells(intK + 10, 167).Text & "','" & WSCurrentHCV.Cells(intK + 10, 168).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 169).Text & "','" & WSCurrentHCV.Cells(intK + 10, 170).Text & "','" & WSCurrentHCV.Cells(intK + 10, 171).Text & "','" & WSCurrentHCV.Cells(intK + 10, 172).Text & "','" & WSCurrentHCV.Cells(intK + 10, 173).Text & "','" & WSCurrentHCV.Cells(intK + 10, 174).Text & "','" & WSCurrentHCV.Cells(intK + 10, 175).Text & "','" & WSCurrentHCV.Cells(intK + 10, 176).Text & "','" & WSCurrentHCV.Cells(intK + 10, 177).Text & "','" & WSCurrentHCV.Cells(intK + 10, 178).Text & "','" & WSCurrentHCV.Cells(intK + 10, 179).Text & "','" & WSCurrentHCV.Cells(intK + 10, 180).Text & "','" & WSCurrentHCV.Cells(intK + 10, 181).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 182).Text & "','" & WSCurrentHCV.Cells(intK + 10, 183).Text & "','" & WSCurrentHCV.Cells(intK + 10, 184).Text & "','" & WSCurrentHCV.Cells(intK + 10, 185).Text & "','" & WSCurrentHCV.Cells(intK + 10, 186).Text & "','" & WSCurrentHCV.Cells(intK + 10, 187).Text & "','" & WSCurrentHCV.Cells(intK + 10, 188).Text & "','" & WSCurrentHCV.Cells(intK + 10, 189).Text & "','" & WSCurrentHCV.Cells(intK + 10, 190).Text & "','" & WSCurrentHCV.Cells(intK + 10, 191).Text & "','" & WSCurrentHCV.Cells(intK + 10, 192).Text & "','" & WSCurrentHCV.Cells(intK + 10, 193).Text & "','" & WSCurrentHCV.Cells(intK + 10, 194).Text & "','" & WSCurrentHCV.Cells(intK + 10, 195).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 196).Text & "','" & WSCurrentHCV.Cells(intK + 10, 197).Text & "','" & WSCurrentHCV.Cells(intK + 10, 198).Text & "','" & WSCurrentHCV.Cells(intK + 10, 199).Text & "','" & WSCurrentHCV.Cells(intK + 10, 200).Text & "','" & WSCurrentHCV.Cells(intK + 10, 201).Text & "','" & WSCurrentHCV.Cells(intK + 10, 202).Text & "','" & WSCurrentHCV.Cells(intK + 10, 203).Text & "','" & WSCurrentHCV.Cells(intK + 10, 204).Text & "','" & WSCurrentHCV.Cells(intK + 10, 205).Text & "','" & WSCurrentHCV.Cells(intK + 10, 206).Text & "','" & WSCurrentHCV.Cells(intK + 10, 207).Text & "','" & WSCurrentHCV.Cells(intK + 10, 208).Text & "','" & WSCurrentHCV.Cells(intK + 10, 209).Text & "'," & _
        " '" & WSCurrentHCV.Cells(intK + 10, 210).Text & "','" & WSCurrentHCV.Cells(intK + 10, 211).Text & "','" & WSCurrentHCV.Cells(intK + 10, 212).Text & "','" & WSCurrentHCV.Cells(intK + 10, 213).Text & "','" & WSCurrentHCV.Cells(intK + 10, 214).Text & "','" & WSCurrentHCV.Cells(intK + 10, 215).Text & "','" & WSCurrentHCV.Cells(intK + 10, 216).Text & "','" & WSCurrentHCV.Cells(intK + 10, 217).Text & "','" & WSCurrentHCV.Cells(intK + 10, 218).Text & "','" & WSCurrentHCV.Cells(intK + 10, 219).Text & "','" & WSCurrentHCV.Cells(intK + 10, 220).Text & "','" & WSCurrentHCV.Cells(intK + 10, 221).Text & "','" & WSCurrentHCV.Cells(intK + 10, 222).Text & "')"
    Next intK

    If clsadodb.objCon.State = adStateOpen Then clsadodb.objCon.Close
    If objRSet.State = adStateOpen Then objRSet.Close
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:40:28.917

创建一个字符串变量并循环遍历`WSCurrentHCV.Cells(intK + 10, i).Text`字段以填充它，而不是将它们全部拼写出来：

```
Dim strTemp as String, i as Integer
strTemp = ""
For i = 1 to 222
    strTemp = strTemp & WSCurrentHCV.Cells(intK + 10, i).Text & ","
Next
    'Remove trailing ","
    strTemp = Left(strTemp, len(strTemp)-1) 
```

构建字符串后，您可以替换所有重复项：`" values('" & strTemp & "')"`

# iphone - 未知类型名称“XMLParser”；你的意思是“NSXMLParser”吗？

> ID：15683526
> 
> 赞同：1
> 
> 时间：2013-03-28T13:46:12.190
> 
> 标签：iphone, xml, xcode, parsing

为什么我收到此错误**“未知类型名称'XMLParser'；您的意思是'NSXMLParser'吗？”** ? 我已经导入了 XMLParser.h，所以我无法理解问题所在。

```
#import <UIKit/UIKit.h>
#import "XMLParser.h"
#import "televisionList.h"
#import "ListingCell.h"

@interface TelevisionDetail : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    XMLParser *xmlParser;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:51:12.633

看起来像 Xcode 错误，但避免在 .h 文件中进行不必要的导入也是一个好习惯。

所以尝试在之前添加这个`@interface..`：

```
@class XMLParser; 
```

并添加`#import "XMLParser.h"`您的 .m 文件。

# android - 如何在一行中显示多个图标

> ID：15683531
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:18.707
> 
> 标签：android, image, listview

我有一个按钮。它使用自定义列表视图调用另一个活动，其中包含图像和复选框，标记的位置被传递给另一个活动。它运作良好，但我需要检索几个图标以连续显示到按钮中，如图所示：

![在此处输入图像描述](../Images/8aaa3442627e31f236736b20008bf7c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:11:02.620

将 ImageViews 放在 LinearLayout 中？你的问题真的很难理解，但如果我从表面上看，那就是你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:14:54.693

在您的 XML 布局中，使用`LinearLayout`具有水平方向的 a。

您放置在容器中的项目应具有固定宽度或设置为`wrap_content`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:45:49.090

创建一个名为`row_lauout.xml`并`LinearLayout`在其中使用的 xml 文件，并在其中`orientation horizontal`安排所有按钮。

在您`main.xml`创建一个`List`并根据您的设计对齐它。

在 java 代码中编写一个名为的类，该类`ListAdapter`扩展`BaseAdapter`（或根据您的需要的任何其他适配器）和覆盖`getView`方法。

内部`getView`方法将 row_layout.xml 膨胀为

```
 View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.row_layout,
            null); 
```

然后为方法`onClick`中的所有按钮实现`getView`。

**另一个建议在 android 中**搜索单元重用概念。这将有助于使滚动非常流畅。

# javascript - 如何使用 javascript 从 Json 中删除以前的值并添加新值？

> ID：15683534
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:23.247
> 
> 标签：javascript, json

我有这个 html 代码部分

```
 <div id="prt">
         <select name="selectPrt" class="span12" onchange="sta_callPRT();">
          <option value="noPrt">Choose one vehicle.</option>
          <option value="prt1">PRT 1</option>
          <option value="prt2">PRT 2</option>
          <option value="prt3">PRT 3</option>
          <option value="prt4">PRT 4</option>
          <option value="prt5">PRT 5</option>
        </select>
        <div class="row-fluid">
         <div class="span6">
           <div class="section">
            <div class="sectionTitle">
              <h3>Vehicle Info</h3>
            </div>
          </div>
<div id="state"><strong>State:</strong> </div>
          <div id="freeSeats"><strong>freeSeats:</strong></div>
          <div id="battery"><strong>battery:</strong></div>
          <div id="totalDistance"><strong>totalDistance:</strong></div>
          <div id="location"><strong>Location:</strong></div>
          <div id="estimatedTime"><strong>estimatedTime"</strong></div>
          <div id="estimatedDistance"><strong>estimatedDistance:</strong></div>
          <div id="speed"><strong>speed:</strong></div> 
```

而这个 Javascript

```
function sta_callPRT(){

    $.getJSON('PRTInfoGenerator.php', function(json){

        $.each(json, function(key, value) {

       if(key=="state") {
          //$('#state').empty();
          //document.getElementById("parameters").appendChild(divTag);
          $('#state').append(value);
                      }
       if(key=="freeSeats") {
          $('#freeSeats').append(value);
        }
       if(key=="estimatedDistance"){
        $('#estimatedDistance').append(value);
       }
        if(key=="estimatedTime"){
        $('#estimatedTime').append(value);
       }
        if(key=="battery"){
        $('#battery').append(value);
       }
        if(key=="speed"){
        $('#speed').append(value);
       }
        if(key=="location"){
          $.each(json.location, function(par_key, par_value) {

        $('#location').append(par_key+': '+par_value+'  ');
      });
       }
       if(key=="totalDistance"){
        $('#totalDistance').append(value);
       }
    });

  });
  } 
```

我想在 html 中随机写入车辆值。我还有 php 代码来为车辆生成随机值。当我选择车辆时，它会显示一些值，但在第二次选择中，新值被添加到第一个的末尾。如何删除以前的值，并在进行新选择时添加新值？例如这是网页中的第一个选择；

```
State: Running
freeSeats:0
battery:95
totalDistance:8541
Location:x: -5 y: 34
estimatedTime:15
estimetedDistance:809
Speed:18 
```

这是第二个；

```
State: RunningRunning
freeSeats:04
battery:9540
totalDistance:85411848
Location:x: -5 y: 34 x: 84 y: -70
estimatedTime:15269
estimetedDistance:809513
Speed:1818 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:02:14.533

将前缀文本移到 div 之外`freeseats: <div id="freeSeats"></div>`，使用`$('#freeSeats').text(value)`而不是 `$('#freeSeats').append(value);` 追加将追加已经存在的内容，但文本将替换该值。

更改强标签中的文本，`$('#freeSeats strong')`但我建议不要使用强标签，而是在 div/div 上使用样式属性。

这是您的更新代码：

```
<div id="prt"> 
          <select name="selectPrt" class="span12" onchange="sta_callPRT();">
          <option value="noPrt">Choose one vehicle.</option>
          <option value="prt1">PRT 1</option>
          <option value="prt2">PRT 2</option>
          <option value="prt3">PRT 3</option>
          <option value="prt4">PRT 4</option>
          <option value="prt5">PRT 5</option>
        </select>
        <div class="row-fluid">
         <div class="span6">
           <div class="section">
            <div class="sectionTitle">
              <h3>Vehicle Info</h3>
            </div>
          </div>
          State:<div id="state"></div>
          freeSeats:<div id="freeSeats"></div>
          battery:<div id="battery"></div>
          totalDistance:<div id="totalDistance"></div>
          Location:<div id="location"></div>
          estimatedTime"<div id="estimatedTime"></div>
          estimatedDistance:<div id="estimatedDistance"></div>
          speed:<div id="speed"></div> 
```

和脚本：

```
function sta_callPRT(){

$.getJSON('PRTInfoGenerator.php', function(json){

    $.each(json, function(key, value) {

   if(key=="state") {
      $('#state').text(value);
                  }
   if(key=="freeSeats") {
      $('#freeSeats').text(value);
    }
   if(key=="estimatedDistance"){
    $('#estimatedDistance').text(value);
   }
    if(key=="estimatedTime"){
    $('#estimatedTime').text(value);
   }
    if(key=="battery"){
    $('#battery').text(value);
   }
    if(key=="speed"){
    $('#speed').text(value);
   }
    if(key=="location"){
      $.each(json.location, function(par_key, par_value) {

    $('#location').text(par_key+': '+par_value+'  ');
  });
   }
   if(key=="totalDistance"){
    $('#totalDistance').text(value);
   }
}); 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:13:28.690

每次清除 div...

```
function sta_callPRT(){
     $('#state, #freeSeats, #battery').empty();

     $.getJSON('PRTInfoGenerator.php', function(json){
           ... 
```

# php - Memcached 质量集/添加卡住问题

> ID：15683535
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:25.610
> 
> 标签：php, bash, memcached

我正在尝试使用 bash/php 对 memcached 服务器 v 1.4.13 从文件进行批量设置/添加操作。它正常启动但达到〜1000个项目（〜200KB）我看到脚本操作仍在继续，而memcached项目的数量仍然保持在〜1000！我使用 memcache-top 和我自己的脚本来测量 memcached 项目的数量。

所有键/值在输入文件中都是唯一的。我试图在添加/集之间添加延迟，但它仍然没有帮助！

服务器标志：/usr/bin/memcached -v -m 2048 -p 11211 -u memcache -c 16384

所以我的问题是： 1\. 我做错了什么？2\. 如何将文件中的所有数据导入memcached？

卡住时的统计输出：

```
STAT pid 13531
STAT uptime 31
STAT time 1364475756
STAT version 1.4.13
STAT libevent 2.0.16-stable
STAT pointer_size 64
STAT rusage_user 0.200012
STAT rusage_system 0.600037
STAT curr_connections 10
STAT total_connections 5177
STAT connection_structures 12
STAT reserved_fds 20
STAT cmd_get 0
STAT cmd_set 5135
STAT cmd_flush 0
STAT cmd_touch 0
STAT get_hits 0
STAT get_misses 0
STAT delete_misses 0
STAT delete_hits 0
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT touch_hits 0
STAT touch_misses 0
STAT auth_cmds 0
STAT auth_errors 0
STAT bytes_read 777987
STAT bytes_written 68220
STAT limit_maxbytes 2147483648
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 4
STAT conn_yields 0
STAT hash_power_level 16
STAT hash_bytes 524288
STAT hash_is_expanding 0
STAT expired_unfetched 0
STAT evicted_unfetched 0
STAT bytes 206141
STAT curr_items 1036
STAT total_items 1036
STAT evictions 0
STAT reclaimed 0
END 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:50:51.527

话题已关闭。

转储无关紧要，并且包含许多重复的密钥。我的错！无论如何，没有办法完全转储密钥......

见[http://blog.elijaa.org/index.php?post/2010/12/24/Understanding-Memcached-stats-cachedump-command](http://blog.elijaa.org/index.php?post/2010/12/24/Understanding-Memcached-stats-cachedump-command)

# javascript - 从 Firefox 扩展获取变量

> ID：15683539
> 
> 赞同：1
> 
> 时间：2013-03-28T13:46:31.847
> 
> 标签：javascript, firefox-addon

我正在做一些非常简单的事情......我无法弄清楚。我创建了一个扩展，它所做的只是获取一个变量。我希望能够从我的网页访问该变量。有什么想法吗？

我为什么要这样做的一点背景。我需要有 chrome 访问权限才能获得这个变量，这就是我首先制作这个扩展的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:07:20.710

您可能想查看此链接：[Interaction between privileged and non-privileged pages](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages) for some code-samples on send data from chrome (priveleged) to unprivileged document (webpage).

在扩展中：

```
var myExtension =
{
  myListener: function(evt)
  {
    alert("Received from web page: " + 
           evt.target.getAttribute("attribute1") + "/" +
           evt.target.getAttribute("attribute2"));

/* the extension answers the page*/
    evt.target.setAttribute("attribute3", "The extension");

    var doc = evt.target.ownerDocument;

    var AnswerEvt = doc.createElement("MyExtensionAnswer");
    AnswerEvt.setAttribute("Part1", "answers this.");

    doc.documentElement.appendChild(AnswerEvt);

    var event = doc.createEvent("HTMLEvents");
    event.initEvent("MyAnswerEvent", true, false);
    AnswerEvt.dispatchEvent(event);
  }
}

document.addEventListener("MyExtensionEvent", function(e) { myExtension.myListener(e); }, false, true);
// The last value is a Mozilla-specific value to indicate untrusted content is allowed to trigger the event. 
```

在网页中：

```
document.addEventListener("MyAnswerEvent",function(e) { ExtensionAnswer(e); },false);

var element;

function CallExtension()
{
  var element = document.createElement("MyExtensionDataElement");
  element.setAttribute("attribute1", "foobar");
  element.setAttribute("attribute2", "hello world");
  document.documentElement.appendChild(element);
  var evt = document.createEvent("Events");
  evt.initEvent("MyExtensionEvent", true, false);
  element.dispatchEvent(evt);
}

function ExtensionAnswer(EvtAnswer)
{
  alert(element.getAttribute("attribute3") + " " +
        EvtAnswer.target.getAttribute("Part1"));
} 
```

希望这可以帮助。

# javascript - 适用于 Android 的 phonegap 中的 WebSocket HTML5

> ID：15683542
> 
> 赞同：4
> 
> 时间：2013-03-28T13:46:38.903
> 
> 标签：javascript, android, html, cordova, websocket

我正在开发一个需要使用 websocket 的 HTML5 webapp，因为 webapp 需要连接到服务器（websocket 服务器），一直以来，webapp 在桌面浏览器 Chrome 中运行良好，

但是现在 web-app 需要在智能手机上运行，​​android 将是第一要务（我没有任何开发 android 应用程序的经验），然后我找到一个解决方案将 web-app 构建为 android-app 使用电话间隙，

不幸的是，它还不支持 websocket，我发现了很多插件，但它们都有自己的服务器（java），我需要的是一个 javascript 库，它可以让我让 websocket 像以前在 chrome 中一样正常运行, 到任何可用的 ws 服务器（我已经使用 Visual Studio 在 .NET 中制作了一个）

任何想法或参考？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T16:38:50.370

你可以试试[https://github.com/mkuklis/phonegap-websocket 。](https://github.com/mkuklis/phonegap-websocket)演示应用程序在这里：[https ://bitbucket.org/mkuklis/phonegap-websocket-demo](https://bitbucket.org/mkuklis/phonegap-websocket-demo)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:31:53.203

并非所有 android 浏览器都原生支持 Websocket。我最好的猜测是为 websockets 使用 Phonegap 插件。

我建议您看一下[https://github.com/FreakDev/PhoneGap-Android-HTML5-WebSocket](https://github.com/FreakDev/PhoneGap-Android-HTML5-WebSocket)或（较旧的）[https://github.com/anismiles/websocket-android-phonegap](https://github.com/anismiles/websocket-android-phonegap)

# html - 一条记录的HTML编码解码c#MVC4

> ID：15683544
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:43.097
> 
> 标签：html, asp.net-mvc-4

我正在尝试使用富文本编辑器保存在 .NET MVC 4 应用程序中，并且可以正常工作，但是我无法在其他地方显示格式化的 HTML。

我能够让@Html.Raw(Model.text) 在网格的一行中工作：

```
@foreach (var item in Model) {

   @Html.Raw(item.Body)
} 
```

但不在没有该循环的页面中：

```
@Html.DisplayFor(model => model.Body) //commented out to do this instead:
@Html.Raw(model => model.Body) 
```

这告诉我“模型”在这种情况下不存在。有人知道怎么做吗？我从这里得到的：[HTML 编码解码 c#MVC4](https://stackoverflow.com/questions/9050145/html-encode-decode-c-sharp-mvc4/15644818#15644818)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:57:42.873

用解决方法回答了我的问题。屏幕只显示一条记录，为了显示带有 HTML 格式的“正文”字段，我在 Details 方法中添加了一行：

```
public ActionResult Details(int id = 0)
{
        Advisory advisory = db.Advisories.Find(id);
        if (advisory == null)
        {
            return HttpNotFound();
        }
        //added this line for solution
        ViewBag.htmlBody = advisory.Body.ToString();

        return View(advisory);
    } 
```

在我看来，然后我使用了这个：

```
@Html.Raw(ViewBag.htmlBody) 
```

不确定这是否是最好的方法，但它确实有效。

# accelerometer - 寻找加速迹象

> ID：15683547
> 
> 赞同：1
> 
> 时间：2013-03-28T13:46:45.337
> 
> 标签：accelerometer, game-physics, android-sensors

如何判断设备是从 3 轴加速度计加速还是减速？sqrt(x^2+y^2+z^2) 将给出加速度的大小，但要确定它是加速还是减速，我想必须进行一些向量数学运算。如果有人可以指导我或将我与某些来源联系起来，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:43:43.140

我认为您的问题没有完美的解决方案：减速是一种与实际速度相反的方向，并且您没有（好的）方法来访问设备的速度。

只是给您一些想法：您可以保留 acc(t) 的最后 N 个值（作为向量 (xyz)）的数组。如果您将加速度计移动到某个方向然后停止，我希望在该阵列中有类似 { A1 A2 A3 A4 D1, D2, D3, D4 } 的东西，其中所有 A 或多或少都是所选方向上的向量（大小会有所不同）并且所有 D 都是与所选方向相反的向量。两个 A 向量的点积将是正的，与两个 D 向量一样，但点积 Ax*Dy 将是负的，这应该给你一个“加速度计正在停止”的提示......

另一件需要注意的事情：根据我的经验，加速度计数据变化很大，因此通常最好计算这些值的“移动平均值”并使用这些值

# sql - SQLPlus 尾随空格问题

> ID：15683548
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:45.293
> 
> 标签：sql, oracle, sqlplus

我的脚本将一些查询的输出假脱机到一个文本文件。

```
set linesize 200
set trimspool on
....

spool "C:\someFile.txt"
SELECT rpad(field1, 50)||rpad(field2, 50) FROM table1;
SELECT rpad(field3, 200) FROM table2;
spool off 
```

我想要的是查询 1 中的每一行输出为 100 个字符，包括尾随空格，查询 2 中的每一行输出为 200 个字符，包括尾随空格。

如果`trimspool`关闭，则每行有 200 个字符，这不是我想要的。如果打开，那么在field3只有10个字符的情况下，输出文件中该行的长度只有60个字符（需要为100个）。每行都需要固定长度，因为文件将被发送到外部服务器，并且基于它是固定长度的假设进行解析。

有没有办法避免修剪我明确输出的空白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:00:38.733

这将起作用：

```
set trimspool off
spool "C:\someFile.txt"
set linesize 100
SELECT rpad(field1, 50)||rpad(field2, 50) FROM table1;
set linesize 200
SELECT rpad(field3, 200) FROM table2;
spool off 
```

输出包括命令本身，因此如果您想摆脱这些并仅包括查询结果，请将所有命令放在脚本文件中并执行脚本文件。还将这些添加到脚本的顶部：

```
set echo off
set termout off
set pagesize 0
set feedback off 
```

# android - Android联系人光标需要太多时间来迭代

> ID：15683552
> 
> 赞同：0
> 
> 时间：2013-03-28T13:46:49.720
> 
> 标签：android, sqlite, cursor, android-contacts, android-cursor

我想从电话联系人应用程序中获取所有联系人并插入到本地 sqlite 数据库中。但问题是android接触光标需要时间来迭代......

代码：

```
private Cursor getContacts() {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
                + ("1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";
        return managedQuery(uri, projection, selection, selectionArgs,
                sortOrder);
    } 
```

插入数据库：

```
long mStartTime = System.currentTimeMillis();

        int batch = 50;

        try {

            SQLiteDatabase db = this.getWritableDatabase();

            // InsertHelper insertHelper = new InsertHelper(db,
            // TABLE_USER_INFO);
            // String insertSql =
            // "INSERT INTO UserInfo (firstname,lastname,userid,serveruserid,phonenumber,emailaddress,street,state,city,country) VALUES (?,?,?,?,?,?,?,?,?,?) ";
            // SQLiteStatement sqLiteStatement = db.compileStatement(insertSql);

            if (cursor != null) {
                if (cursor.moveToFirst()) {

                    for (int i = 0; i < cursor.getCount() / batch
                            + (((cursor.getCount() % batch) > 0) ? 1 : 0); i++) {
                        mStartTime = System.currentTimeMillis();
                        StringBuilder sqlBuilder = new StringBuilder();
                        db.beginTransaction();

                        sqlBuilder
                                .append("INSERT INTO UserInfo (firstname,lastname,userid,serveruserid,phonenumber,emailaddress,street,state,city,country) ");

                        for (int j = 0; j < batch; j++) {

                            String name = cursor
                                    .getString(cursor
                                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                            long _id = cursor
                                    .getLong(cursor
                                            .getColumnIndex(ContactsContract.Contacts._ID));

                            // ADDRESS
                            Cursor address = context
                                    .getContentResolver()
                                    .query(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_URI,
                                            null,
                                            ContactsContract.CommonDataKinds.StructuredPostal.CONTACT_ID
                                                    + " = " + _id, null, null);
                            String street = null, city = null, state = null, country = null;
                            while (address.moveToNext()) {
                                street = address
                                        .getString(address
                                                .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                                city = address
                                        .getString(address
                                                .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                                state = address
                                        .getString(address
                                                .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                                country = address
                                        .getString(address
                                                .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));

                            } // address.moveToNext()
                            address.close();

                            // PHONE NO
                            String phoneNumber = null;
                            Cursor phones = context
                                    .getContentResolver()
                                    .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                            null,
                                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                                    + " = " + _id, null, null);
                            while (phones.moveToNext()) {
                                phoneNumber = phones
                                        .getString(phones
                                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                            }
                            phones.close();

                            // EMAIL ID
                            String emailId = null;
                            Cursor emails = context
                                    .getContentResolver()
                                    .query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                                            null,
                                            ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                                    + " = " + _id, null, null);
                            while (emails.moveToNext()) {
                                emailId = emails
                                        .getString(emails
                                                .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                            }
                            emails.close();

                            // INSERT INTO DB
                            ContentValues values = new ContentValues();

                            String[] names = name.split(" ");
                            if (name != null && names.length == 1) {
                                values.put(KEY_FIRST_NAME, name);
                                values.put(KEY_LAST_NAME, "");
                            } else if (name != null && names.length > 1) {
                                values.put(KEY_FIRST_NAME, names[0]);
                                values.put(KEY_LAST_NAME, names[1]);
                            }

                            // Log.d(TAG, "User Id:" + _id);

                            values.put(KEY_USER_LOCAL_ID, _id);
                            values.put(KEY_SERVER_USER_ID, "0");

                            if (phoneNumber != null
                                    && !phoneNumber.equalsIgnoreCase("0")) {
                                // REPLACE "-" FROM PHONE NO
                                phoneNumber = phoneNumber.replace("-", "")
                                        .trim();
                                values.put(KEY_PH_NO, IOUtils
                                        .getFormatedPhoneNo(context,
                                                phoneNumber));
                                Log.e(TAG, "Inserting contacts into db name:"
                                        + name + " Phone:" + phoneNumber);
                            }

                            if (emailId != null)
                                values.put(KEY_EMIAL, emailId);

                            if (street != null)
                                values.put(KEY_STREET, street);
                            if (state != null)
                                values.put(KEY_STATE, state);
                            if (city != null)
                                values.put(KEY_CITY, city);
                            if (country != null)
                                values.put(KEY_COUNTRY, country);

                            if (emailId == null && phoneNumber == null) {
                                // Log.d(TAG, "email,ph no not found:" + name);
                            } else {

                                Log.e(TAG, "*** Name:" + name + " Email id:"
                                        + emailId + " phone:" + phoneNumber);

                                if (j == 0)
                                    sqlBuilder.append(" SELECT ");
                                else
                                    sqlBuilder.append(" UNION SELECT ");

                                sqlBuilder
                                        .append("'"
                                                + values.getAsString(
                                                        KEY_FIRST_NAME)
                                                        .replace("'", "") + "'")
                                        .append(" AS " + KEY_FIRST_NAME + ", ");
                                sqlBuilder.append(
                                        "'"
                                                + values.getAsString(
                                                        KEY_LAST_NAME).replace(
                                                        "'", "") + "'").append(
                                        " AS " + KEY_LAST_NAME + ", ");
                                sqlBuilder
                                        .append("'"
                                                + values.getAsString(KEY_USER_LOCAL_ID)
                                                + "'")
                                        .append(" AS " + KEY_USER_LOCAL_ID
                                                + ", ")

                                        //
                                        .append("'")
                                        .append((values
                                                .getAsString(KEY_SERVER_USER_ID) != null) ? values
                                                .getAsString(KEY_SERVER_USER_ID)
                                                : " ")
                                        .append("'")
                                        .append(" AS " + KEY_SERVER_USER_ID
                                                + ", ")

                                        //
                                        .append("'")
                                        .append((values.getAsString(KEY_PH_NO) != null) ? values
                                                .getAsString(KEY_PH_NO) : "")
                                        .append("'")
                                        .append(" AS " + KEY_PH_NO + ", ")

                                        //
                                        .append("'")
                                        .append((values.getAsString(KEY_EMIAL) != null) ? values
                                                .getAsString(KEY_EMIAL) : "")
                                        .append("'")
                                        .append(" AS " + KEY_EMIAL + ", ")

                                        //
                                        .append("'")
                                        .append((values.getAsString(KEY_STREET) != null) ? values
                                                .getAsString(KEY_STREET) : "")
                                        .append("'")
                                        .append(" AS " + KEY_STREET + ", ")

                                        //
                                        .append("'")
                                        .append((values.getAsString(KEY_STATE) != null) ? values
                                                .getAsString(KEY_STATE) : "")
                                        .append("'")
                                        .append(" AS " + KEY_STATE + ", ")
                                        //
                                        .append("'")
                                        .append((values.getAsString(KEY_CITY) != null) ? values
                                                .getAsString(KEY_CITY) : "")
                                        .append("'")
                                        .append(" AS " + KEY_CITY + ", ")

                                        //
                                        .append("'")
                                        .append((values
                                                .getAsString(KEY_COUNTRY) != null) ? values
                                                .getAsString(KEY_COUNTRY) : "")
                                        .append("'")
                                        .append(" AS " + KEY_COUNTRY);
                            }
                            if (!cursor.moveToNext()) {
                                Log.d(TAG, "Cursor pos" + cursor.getPosition());
                                break;

                            }
                        }

                        // Log.d(TAG, "BUILDER: " + sqlBuilder.toString());
                        db.execSQL(sqlBuilder.toString());
                        db.setTransactionSuccessful();
                        db.endTransaction();
                        Log.e("Time:",
                                "operatio time"
                                        + (mStartTime - System
                                                .currentTimeMillis()));
                    }
                }
            }

            // CLOSE DB

            db.close();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // insertHelper.c
        } 
```

插入需要4分钟....

请建议迭代光标的有效方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:13:57.593

使用 a`managedQuery(...)`您可以投射查询投影（以要提取的列数组的形式）并提取更大的数据。通过这样做，您可以缓解单独查询数据库的问题。这是这个过程中最大的要求。

此外，支持包 v4 中还有一个新`CursorLoader`类，用于异步加载该数据。

此外，您可以使用`moveToNext()`循环进行迭代，`while`因为游标总是在数据“之前”开始。

# jquery - JQuery：使用 ajax 响应填充文本区域

> ID：15683560
> 
> 赞同：1
> 
> 时间：2013-03-28T13:47:01.817
> 
> 标签：jquery, populate

我有一个动态创建的下拉列表，我可以在其中从我的 MySQL 数据库中选择时事通讯。重点是，当我选择时事通讯时，数据库中的内容会插入到文本区域中。

下拉列表是这样的：

```
<?php
    echo "<select id=\"NieuwsbriefSelect\" name=\"show\">"; 
    echo "<option size =30 selected>Select</option>";
    if(mysql_num_rows($sql_result)) 
    { 
    while($row = mysql_fetch_assoc($sql_result)) 
    { 
    echo "<option value=\"$row[Titel]\">$row[Titel]</option>"; 
    } 

    } 
    else {
    echo "<option>No Names Present</option>";  
    } 
?> 
```

jquery是这样的：

```
<script>
// variable to hold request
var request;
$(document).ready(function() {

$('#NieuwsbriefSelect').change(function() { 
//send Ajax call to get new contents 
var selected_text = $(this).val(); 
// setup some local variables 
var $form = $("#myForm"); 
// let's select and cache all the fields 
var $inputs = $form.find("input, select, button, textarea"); 
// serialize the data in the form 
var serializedData = $form.serialize(); 

alert(serializedData); 

// fire off the request to /get_my_contents.php 
request = $.ajax({ 
url: "/get_my_contents.php", 
type: "GET", 
data: serializedData 
}); 

alert("ajax call done"); 

// callback handler that will be called on success 
request.done(function (response, textStatus, jqXHR){ 
//populate the TextArea 
alert(response); 
$("textarea[name='content']").html(response); 
}); 

});

});
</script> 
```

get_my_contents.php：

```
<?php 
$title = $_REQUEST["show"]; 
mysql_connect('localhost','root','root'); 
mysql_select_db('NAW') or die (mysql_error()); 
$strSQL = "SELECT Content from NAW.Mail where Titel = '$title' "; 
$sql_result = mysql_query($strSQL); 

$row = mysql_fetch_assoc($sql_result); 

print urldecode($row["Content"]); 
?> 
```

所以它应该做的是将响应添加到文本区域中。然而问题是 ajax 请求似乎没有做任何事情。当我运行它并从下拉列表中选择一个时事通讯时，我将收到前 2 个警报，但之后它什么也不做。我还要提到我基本上没有使用 Jquery 的经验，但其他人建议我应该使用它并帮助我像当前状态一样获得它。如果有人能看到问题所在或提出另一种方法，那就太好了！

***注意：*** 我知道我不应该使用 mysql_* 并且稍后我将更改为 PDO！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T02:59:27.857

“数据”可能有换行符

```
$("textarea[name='content']").html(data); 
```

=

```
$("textarea[name='content']").html('line number1
line number2

line number3 with a previous blank line'); 
```

并且换行导致js出错

你只需要修复换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:07:11.577

我不确定，如果这是一个问题，但我会重写这样的代码：

```
request = $.ajax({ 
url: "/get_my_contents.php", 
type: "GET", 
data: serializedData
success: function(data)
    {
    //populate the TextArea 
    alert(data);
    $("textarea[name='content']").html(data); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T09:53:45.053

```
var myTextareaVal = $('#message-textarea').val();

$.ajax({                                       
      type: "GET",
      url: "myPhpFile.php",           
      data: "text=" + myTextareaVal,           
      cache: false,
      dataType: "html",           
      success: function(data) {   
            $('.modal_content').find('.message:last').before(data);
      }
}); 
```

# c# - Xaml 绑定全景 Windows Phone 8

> ID：15683563
> 
> 赞同：2
> 
> 时间：2013-03-28T13:47:07.530
> 
> 标签：c#, wpf, windows-phone-7, xaml, windows-phone-8

这开始让我烦恼，但我一定是犯了一些非常简单的错误。我目前有以下 XAML 代码：

```
 <Grid x:Name="LayoutRoot" 
       DataContext="{StaticResource JourneyViewModel}">
    <phone:Panorama Title="Journeys" 
                    ItemsSource="{Binding journeys}">
        <DataTemplate>
            <TextBlock Text="{Binding name}" />
        </DataTemplate>

    </phone:Panorama>
</Grid> 
```

在我需要用名称初始化文本块之前，它一直有效。我有“旅程”参数提供的项目。但是，我想提取旅程的名称并将其放入根本不起作用的文本块中。我的猜测是我的 XAML 代码没有正确完成。以下是使用的类：

```
 public ObservableCollection<JourneyModel> journeys
    {
        get
        {
            //I can verify with the debugger 
            //that this is not null and 
            //the variables inside the JourneyModels are set
            return _journeyModels;
        }
    } 
```

和 JourneyModel：

```
 public string name
 {
      get { return _journey.name; }
      set
      {
          if (_journey.name != value)
                 _journey.name = value;
      }
 } 
```

如果我正确设置了 MVVM，您可以纠正我，这是我第一次尝试。如果您需要更多代码位，请告诉我。我希望我把这个问题说得足够清楚。任何帮助是极大的赞赏！

编辑：

加载视图模型：

```
<UserControl.Resources>
    <my:JourneyViewModel  x:Key="JourneyViewModel"/>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:21:26.333

代码很好，但你看不到它`TextBlock`本身。您需要将 放在`DataTemplate`or`ItemTemplate`中`HeaderTemplate`。

```
<phone:Panorama Title="Journeys" ItemsSource="{Binding journeys}">
   <phone:Panorama.HeaderTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding name}" />
      </DataTemplate>
   </phone:Panorama.HeaderTemplate>
</phone:Panorama> 
```

# c# - 如何填充 ASPxComboBox？

> ID：15683564
> 
> 赞同：2
> 
> 时间：2013-03-28T13:47:12.723
> 
> 标签：c#, devexpress, aspxgridview, aspxcombobox

我有 Editable ASPxGridView 并且对如何填充 ASPxComboBox init 感到困惑。

考虑以下场景，其中我们有一个带有颜色的汽车列表。

![初始网格视图](../Images/df715090cdc3cf6d4a4be0c9e750b558.png)

单击编辑后。

![按下编辑按钮后的 GridView](../Images/6f4a103acd3ca0ef34daa94a36468bbc.png)

我想将数据源添加到这个突​​出显示的颜色组合框中。我的代码如下：

ASP 代码

```
<dx:ASPxGridView ID="grid" runat="server" AutoGenerateColumns="False" 
KeyFieldName="ID" onstartrowediting="ASPxGridView1_StartRowEditing">
<Columns>
    <dx:GridViewCommandColumn VisibleIndex="0">
        <EditButton Visible="True">
        </EditButton>
    </dx:GridViewCommandColumn>
    <dx:GridViewDataTextColumn Caption="ID" FieldName="ID" Name="ID" 
        VisibleIndex="1">
    </dx:GridViewDataTextColumn>
    <dx:GridViewDataTextColumn Caption="Car" FieldName="Car" Name="Car" 
        VisibleIndex="2">
        <EditItemTemplate>
               <dx:ASPxComboBox ID="ASPxComboBox1" runat="server" 
                           Text='<%# Eval("Car") %>'>
               </dx:ASPxComboBox>
        </EditItemTemplate>
    </dx:GridViewDataTextColumn>
    <dx:GridViewDataTextColumn Caption="Color" FieldName="Color" Name="Color" 
        VisibleIndex="3">
        <EditItemTemplate>
            <dx:ASPxComboBox ID="colorCombo" runat="server">
            </dx:ASPxComboBox>
        </EditItemTemplate>
    </dx:GridViewDataTextColumn>
</Columns> 
```

C# 代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("ID");
            dt.Columns.Add("Car");
            dt.Columns.Add("Color");

            DataRow dr = dt.NewRow();
            dr["ID"] = "1";
            dr["Car"] = "Suzuki";
            dr["Color"] = "Green";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "2";
            dr["Car"] = "Toyota";
            dr["Color"] = "Blue";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "3";
            dr["Car"] = "Toyota";
            dr["Color"] = "Black";
            dt.Rows.Add(dr);

            grid.DataSource = dt;
            grid.DataBind();
        }

        protected void ASPxGridView1_StartRowEditing(object sender,
                          DevExpress.Web.Data.ASPxStartRowEditingEventArgs e)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("ID");
            dt.Columns.Add("Color");

            DataRow dr = dt.NewRow();
            dr["ID"] = "1";
            dr["Color"] = "Green";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "2";
            dr["Color"] = "Blue";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "3";
            dr["Color"] = "Black";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "4";
            dr["Color"] = "Red";
            dt.Rows.Add(dr);

            dr = dt.NewRow();
            dr["ID"] = "5";
            dr["Color"] = "Yellow";
            dt.Rows.Add(dr);

            ASPxComboBox cb=(ASPxComboBox)grid.FindEditRowCellTemplateControl(
                                 grid.Columns["Color"] as GridViewDataColumn  
                                , "colorCombo");
            cb.DataSource = dt;
            cb.DataBind();

        } 
```

在 cb.Datasource = dt; 上放置断点后 已验证值已填充但未在页面上查看。无法在 page_load() 上填充组合框。如果有人知道解决方案，请用简单明了的语言告诉我。

注意：`Datasource`来自`database`，这里我只是将它硬编码为`Pageload()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:42:23.963

您可以使用 XML 数据源执行此操作。这样你就可以避免后面的代码，填充列表并显示当前的颜色选择。您需要将 GridViewDataTextColumn 转换为 GridViewDataComboBoxColumn，然后将 XML 数据源添加到其中。也可以添加一个 xml 数据源，只需右键单击 App_Data 文件夹并选择 Add->New Item。选择一个 xml 文件并将其命名为 colors.xml。下面的代码：

XML:

```
<colors>
  <item ID="1" Color="Green"></item>
  <item ID="2" Color="Blue"></item>
  <item ID="3" Color="Black"></item>
  <item ID="4" Color="Red"></item>
  <item ID="5" Color="Yellow"></item>
</colors> 
```

添加到 ASPX 的行：

```
<asp:XmlDataSource ID="colorsXML" runat="server" DataFile="~/App_Data/colors.xml" XPath="colors/item" ></asp:XmlDataSource> 
```

改变：

```
<dx:GridViewDataTextColumn Caption="Color" FieldName="Color" Name="Color" 
    VisibleIndex="3">
    <EditItemTemplate>
        <dx:ASPxComboBox ID="colorCombo" runat="server">
        </dx:ASPxComboBox>
    </EditItemTemplate>
</dx:GridViewDataTextColumn> 
```

对此：

```
<dx:GridViewDataComboBoxColumn Caption="Color" FieldName="Color" Name="Color" VisibleIndex="3">
<PropertiesComboBox DataSourceID="colorsXML" ValueField="ID" TextField="Color"></PropertiesComboBox>
</dx:GridViewDataComboBoxColumn> 
```

清除 StartRowEditing 函数中的代码，您将不需要它：

```
protected void ASPxGridView1_StartRowEditing(object sender, DevExpress.Web.Data.ASPxStartRowEditingEventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:21:10.883

我采用 dcreight 所示的方法。

如果您使用 objectdata 源来绑定您的组合框，您可以修改他建议的代码如下：

```
 <dx:GridViewDataComboBoxColumn Caption="Color" FieldName="ID" Name="Color" VisibleIndex="3">
<PropertiesComboBox DataSourceID="objColors" ValueField="ID" TextField="Color" ValueType="System.String"></PropertiesComboBox>
</dx:GridViewDataComboBoxColumn> 
```

确保 propertiescombobox 的 fieldname 和 valuefield 匹配。还要在gridview之外的代码中定义objectdatasource

```
 <asp:ObjectDataSource ID="objColors" SelectMethod="GetColors" TypeName="ClassFileName"
 runat="server"></asp:ObjectDataSource> 
```

# sql - 添加过滤器以提高 SQL 性能

> ID：15683567
> 
> 赞同：0
> 
> 时间：2013-03-28T13:47:17.960
> 
> 标签：sql, sql-server, performance, sql-server-2005

只是一个基本的问题...

添加更多过滤器会提高表扫描的性能吗？

例如，如果我有一个包含很多 NULL 值的列的表，但我只寻找 > 35 的值。

这样做更快`WHERE something IS NOT NULL AND something > 35`还是我应该坚持使用`WHERE something > 35`.

运行 MS SQL Server 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:49:20.717

这两种配方在功能上是等效的。

进行全表扫描时，开销在于将页面加载到页面缓存中。进行测试是计算工作的最小部分。如果 NULL 检查两次，性能上的差异可能无法衡量。

之间的选择：

```
 where something > 35 
```

和

```
where something > 35 and something is not null 
```

是查询的表达能力的问题。我更喜欢明确并在`where`子句中检查 NULL。但是，两者是等价的。

# php - 更新包含包含文件的 div

> ID：15683570
> 
> 赞同：1
> 
> 时间：2013-03-28T13:47:25.557
> 
> 标签：php, javascript, jquery

我是 PHP 新手，我正在尝试更新包含包含文件的 div 的一部分，如下所示：

```
<div id="hello"><?php  include("include_file.php");?></div> 
```

在 ajax 成功时，我想更新该 div 以便它向我显示更新的字段。我试过这个：

```
$(document).on('click','a#relatedUser', function(event){
         event.preventDefault();
        $.ajax({
            url:'loadmsg.php',
            type:"GET",
            async:false,
            success:function(data){
              $('.loadmsg').html(data);  
              $('div#hello').load('include_file.php');

            }
        });

}); 
```

但它遇到了会话问题，我无法在“include_file.php”文件中包含会话。我尝试了很多，但我没有得到解决方案。我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:51:45.110

从您提供的代码来看，您所遇到的问题类型并不清楚。

我可以猜到，您需要`session_start();`在 include_file.php 和 loadmsg.php 的开头添加什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:58:04.887

目前尚不清楚您要更新哪个字段或元素。...所以我认为这可能是您想要的：

HTML：

```
 <div id="hello">These are the contents that will be updated on the ajax call </div>
   <a id="relatedUser" href="#" >Click Here </a>

   <script>
     $(document).ready( $("#relatedUser").click(
     function () {
     $.ajax({
            url:'/path/to/include_file.php',
            type:"GET",
            success:function(data){
              $("#hello:).html(data);  
            }
        });
} ) 
```

);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:16:36.813

jQuery 的负载是对服务器的另一个 ajax 请求的简写（to `include_file.php`）。

这是一个单独的请求，当您在单独的请求中调用它时，该脚本中没有任何其他脚本的（会话）变量可用。要模仿这种行为，只需尝试`include_file.php`直接在浏览器中打开即可。

因此，如果您需要在该脚本中使用会话变量，则如果会话尚未启动，则需要启动会话。您可以这样做，例如：

```
if (session_id() === '')
{
     // a session has not yet been started
     session_start();
} 
```

在顶部`include_file.php`。

# asp.net - 当 css 文件位于 web 应用程序的 bin 文件夹中时，无法加载 css

> ID：15683572
> 
> 赞同：1
> 
> 时间：2013-03-28T13:47:36.393
> 
> 标签：asp.net, asp.net-mvc-3, web

我正在开发一个有很多网站（asp.net mvc3.0）的项目。我们需要为所有网站维护相同的 UI。所以我创建了一个类库并将内容和脚本文件夹作为嵌入式资源放入该库中。它适用于 java 脚本文件，但无法下载 css 类。

加载资源失败：服务器响应状态为 404 (Not Found) weburl/bin/Content/Site.css

请提出一些解决方案。

谢谢，纳宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:53:20.657

你不想让它成为一个嵌入式资源（如果你这样做了，你会错误地访问它）。

单击解决方案资源管理器中的 css 文件，然后在属性中将构建操作更改为内容。接下来将 Copy to Output Directory 更改为 Copy if Newer。

这将完成你想要的......虽然......我不会以这种方式分享css......

# c# - 使用linq将数组拆分为更小的数组？

> ID：15683574
> 
> 赞同：0
> 
> 时间：2013-03-28T13:47:47.380
> 
> 标签：c#, .net

我有一个未知大小的数组，我想将它分成小数组。

例如，733 项数组将变为 7 100 项数组和一个 33 项数组的列表。

```
List<List<T>> Split(List<T> list, uint sublistsize) 
```

我可以编写一些代码来做到这一点，但是有内置的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:55:50.100

```
static List<List<T>> Split<T>(IEnumerable<T> list, int sublistsize)
{
    return list.Select((i, idx) => new { Item = i, Index = idx })
         .GroupBy(x => x.Index / sublistsize)
         .Select(g => g.Select(x => x.Item).ToList())
         .ToList();
} 
```

# java - 简单的 Android 应用程序没有响应

> ID：15683575
> 
> 赞同：1
> 
> 时间：2013-03-28T13:47:49.980
> 
> 标签：java, android

该应用程序工作正常，直到我为按钮分配一个 Id，然后它开始变得无响应。代码最少，但我在另一个小测试项目中遇到了同样的事情。问题是我不明白为什么它不起作用，尤其是如何修复它，即使我做了所有的互联网搜索。我刚开始学习 Android 基础知识，所以如果错误看起来太简单，我深表歉意。任何帮助是极大的赞赏。谢谢。

## 主要课程：

```
public class Test extends Activity 
{
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button m = (Button) findViewById(R.id.test);
    m.setOnClickListener
      (
      new View.OnClickListener() 
        {
        public void onClick(View v) 
          {
                    // some code
          }
        }
      );
    }
} 
```

这是 main.xml

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<Button 
    android:id="@+id/test"
    android:text="asdas"
></Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:49:58.453

您还需要`android:layout_width & height`按钮的属性，我不确定您是否可以按照现在的方式进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:03:06.067

至少`android:layout_width`和`android:layout:height`缺失，所以按钮无法显示。你可以做的是使用 Eclipse 的 android sdk 提供的图形布局编辑器，从那里添加一个按钮，然后观察 xml 是如何构建的，以完全理解所有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:13:34.877

您需要指定按钮的宽度和高度。

例子：

```
<Button 
    android:text="Click"
    android:layout_width="100dp"
    android:layout_height="50dp" />
</Button> 
```

其中 dp (dip) 是与密度无关的像素：[更多](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

如果没有这些属性，应用程序将编译，但以错误结束：

```
Unable to start activity ComponentInfo... You must supply a layout_width attribute. 
```

# ios - 对核心数据属性/列执行基本计算

> ID：15683581
> 
> 赞同：1
> 
> 时间：2013-03-28T13:48:03.137
> 
> 标签：ios, objective-c, sqlite, core-data, nsfetchrequest

我正在使用基于核心数据的时间序列（实体/表），它由以下属性/列组成：

```
dateTime mc nd re 
```

根据公式`result = (mc + nd) / re`，我想计算每一行的结果并在数组中返回结果（日期时间 + 值）。

我尝试使用以下代码在数据库级别执行计算，但在我的结果数组中确实得到了错误的结果（每行多个 dateTime 值，错误的计算结果）。但是，`NSExpressionDescription`在 NSLogging 时返回正确的公式。

您对我的代码可能有什么问题有任何想法吗？

```
NSString *divisorKeyPath = @"revenue"
NSExpression *marketCapExpression = [NSExpression expressionForKeyPath:@"mc"];
NSExpression *netDebtExpression   = [NSExpression expressionForKeyPath:@"nd"];
NSExpression *divisorExpression   = [NSExpression expressionForKeyPath:
    divisorKeyPath];
NSExpression *evExpression        = [NSExpression expressionForFunction:
    @"add:to:"  
    arguments:@[marketCapExpression,netDebtExpression]];
NSExpression *divisionExpression  = [NSExpression expressionForFunction:
    @"divide:by:"
    arguments:@[evExpression, divisorExpression]];
NSString *divisionExpressionName = @"division";
NSExpressionDescription *divisionDescription  = [[NSExpressionDescription alloc] init];
divisionDescription.name                      = divisionExpressionName;
divisionDescription.expression                = divisionExpression;
divisionDescription.expressionResultType      = NSDoubleAttributeType;

NSFetchRequest *divisionRequest = [NSFetchRequest fetchRequestWithEntityName:
   NSStringFromClass([SharePrice class])];
divisionRequest.propertiesToFetch = @[@"dateTime",divisionDescription];
divisionRequest.resultType = NSDictionaryResultType;
NSSortDescriptor *sortDescriptor = [NSSortDescriptor 
   sortDescriptorWithKey:@"dateTime" ascending:YES];
divisionRequest.sortDescriptors = @[sortDescriptor];

NSError *error;
NSArray *divisionResults = [self.managedDocument.managedObjectContext
   executeFetchRequest:divisionRequest error:&error];
NSLog(@"results: %@",divisionResults); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:45:56.283

这似乎是核心数据中的一个错误。如果您设置启动参数“-com.apple.CoreData.SQLDebug 3”，那么您可以看到表达式描述被转换为 SQLite 查询

```
SELECT t0.ZDATETIME,  t0.ZMARKETCAP +  t0.ZNETDEBT /  t0.ZREVENUE FROM ZENTITY t0 ORDER BY t0.ZDATETIME 
```

并不是

```
SELECT t0.ZDATETIME,  (t0.ZMARKETCAP +  t0.ZNETDEBT) /  t0.ZREVENUE FROM ZENTITY t0 ORDER BY t0.ZDATETIME 
```

应该是这样。

`divisionExpression`本身是正确的。如果将其应用于`sharePrice`实体的单个对象，请使用

```
NSNumber *x = [expression expressionValueWithObject:sharePrice context: nil]; 
```

它返回预期的结果。

# java - 安卓报警管理器。如何兼顾时区的转换，以及冬夏时间的转换？

> ID：15683582
> 
> 赞同：4
> 
> 时间：2013-03-28T13:48:05.090
> 
> 标签：java, android, timezone, alarmmanager

面对这个问题 - 我需要组织一个通知（通知），它将检查一周中的某一天、小时和分钟（例如每个星期五的 17:00 - 17:59）。想使用重复间隔 7 * AlarmManaget.INTERVAL_DAY = 604800000 ms。但是有一个问题与用户可以在时区之间旅行以及如何解决从夏季到冬季的过渡问题相关联。在时区之间的转换（例如从两个到三个的转换）带通知不会出现在 17:00 和 18:00。我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:11:43.857

注册一个“时区更改”的广播接收器

```
<receiver android:name=".TimeZoneBroadcastReceiver">
    <intent-filter>
        <action android:name="android.intent.action.TIMEZONE_CHANGED " />
    </intent-filter>
</receiver> 
```

在该`onReceive`方法上，[取消](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)所有待处理的警报并重新安排它们。

# jna - 如何使用 JNA sendMessage 从记事本中获取文本

> ID：15683583
> 
> 赞同：1
> 
> 时间：2013-03-28T13:48:05.677
> 
> 标签：jna

如何使用 JNA 从记事本中获取文本？

我尝试了以下代码：

```
 public final int WM_GETTEXT = 0x00D;
    public final int WM_GETTEXTLENGTH = 0x00A;
    ...

    byte[] windowText = new byte[512];
    WinDef.LRESULT res = User32.INSTANCE.SendMessage(hwnd, User32.WM_GETTEXTLENGTH, 0, 0);
    User32.INSTANCE.SendMessage(hwnd, User32.WM_GETTEXT, res.intValue() + 1, windowText);

    Native.toString(windowText); 
```

但 Native.toString(windowText) 返回“0”

# android - 标签写在android上实际运行的例子或代码

> ID：15683585
> 
> 赞同：0
> 
> 时间：2013-03-28T13:48:08.347
> 
> 标签：android, nfc

我在 Stack Overflow 上就标签编写进行了各种讨论。但是没有找到任何实际的代码示例，可以帮助我构建使用 Android NFC 功能在标签上写入的功能。

我正在尝试在 Android Jelly Bean 上构建标签编写功能。但无法在标签上写字。

任何人都可以帮我提供一些示例代码或示例吗？

谢谢你的分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:51:17.580

这是我使用我[在此处](https://gist.github.com/germanviscuso/1595378)发布的 Android 的 Nfc 实用程序类编写标签的方法：

```
 @Override
    protected void onNewIntent(Intent intent) {
        // Tag writing mode
        if (writeMode && nfcUtil.checkTagIntentMatch(intent)) {
            Tag detectedTag = nfcUtil.getTag(intent);
            try {
                Util.playSound(this);
            } catch (Exception e) { }
            nfcUtil.writeTag(movie.asNdef(), detectedTag);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:15:25.487

请参阅我创建[的 Android 项目的 NDEF 工具。](http://code.google.com/p/ndef-tools-for-android/)它包含用于在 Android 上读取、写入和发送的代码。另请参阅有助于学习 NDEF 格式的[NFC Eclipse 插件。](http://code.google.com/p/nfc-eclipse-plugin/)

# python - 遍历熊猫数据框

> ID：15683588
> 
> 赞同：4
> 
> 时间：2013-03-28T13:48:22.587
> 
> 标签：python, pandas

我有一个熊猫数据框，其中一列表示另一列中的位置值是否在其下方的行中更改。举个例子，

```
2013-02-05 19:45:00   (39.94, -86.159)     True
2013-02-05 19:50:00   (39.94, -86.159)     True
2013-02-05 19:55:00   (39.94, -86.159)    False
2013-02-05 20:00:00  (39.777, -85.995)    False
2013-02-05 20:05:00  (39.775, -85.978)     True
2013-02-05 20:10:00  (39.775, -85.978)     True
2013-02-05 20:15:00  (39.775, -85.978)    False
2013-02-05 20:20:00   (39.94, -86.159)     True
2013-02-05 20:30:00   (39.94, -86.159)    False 
```

所以，我想要做的是逐行遍历这个数据框并检查带有`False`. 然后（可能会添加另一列）在那个地方花费的总“连续”时间。可以再次访问同一个地方，就像上面的例子一样。在这种情况下，它被视为一个单独的条件。因此，对于上面的示例，类似于：

```
2013-02-05 19:45:00   (39.94, -86.159)     True    0
2013-02-05 19:50:00   (39.94, -86.159)     True    0
2013-02-05 19:55:00   (39.94, -86.159)    False   15
2013-02-05 20:00:00  (39.777, -85.995)    False    5  
2013-02-05 20:05:00  (39.775, -85.978)     True    0
2013-02-05 20:10:00  (39.775, -85.978)     True    0
2013-02-05 20:15:00  (39.775, -85.978)    False   15
2013-02-05 20:20:00   (39.94, -86.159)     True    0 
2013-02-05 20:25:00   (39.94, -86.159)    False   10 
```

然后，我将绘制每天使用 hist() 函数所花费的这些“连续”时间的直方图。如何通过迭代数据框从第一个数据框获取第二个数据框？我是 python 和 pandas 的新手，真正的数据文件很大，所以我需要一些相当有效的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T17:54:13.810

这是另一个镜头

```
df['group'] = (df.condition == False).astype('int').cumsum().shift(1).fillna(0)

df
             date    long     lat condition  group
2/5/2013 19:45:00  39.940 -86.159      True      0
2/5/2013 19:50:00  39.940 -86.159      True      0
2/5/2013 19:55:00  39.940 -86.159     False      0
2/5/2013 20:00:00  39.777 -85.995     False      1
2/5/2013 20:05:00  39.775 -85.978      True      2
2/5/2013 20:10:00  39.775 -85.978      True      2
2/5/2013 20:15:00  39.775 -85.978     False      2
2/5/2013 20:20:00  39.940 -86.159      True      3
2/5/2013 20:25:00  39.940 -86.159     False      3

df['result'] = df.groupby(['group']).date.transform(lambda sdf: 5 *len(sdf))

df
             date    long     lat condition  group result
2/5/2013 19:45:00  39.940 -86.159      True      0     15
2/5/2013 19:50:00  39.940 -86.159      True      0     15
2/5/2013 19:55:00  39.940 -86.159     False      0     15
2/5/2013 20:00:00  39.777 -85.995     False      1      5
2/5/2013 20:05:00  39.775 -85.978      True      2     15
2/5/2013 20:10:00  39.775 -85.978      True      2     15
2/5/2013 20:15:00  39.775 -85.978     False      2     15
2/5/2013 20:20:00  39.940 -86.159      True      3     10
2/5/2013 20:25:00  39.940 -86.159     False      3     10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T14:44:39.407

您将需要 0.11-dev。我认为这会给你你正在寻找的东西。请参阅本节：[http](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas) : //pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas 了解更多信息，因为 timedeltas 是 pandas 支持的较新数据

这是您的数据（为了方便，我将 long/lat 分开，关键是条件列是 bool）

```
In [137]: df = pd.read_csv(StringIO.StringIO(data),index_col=0,parse_dates=True)

In [138]: df
Out[138]: 
               date    long       lat condition
2013-02-05 19:45:00  39.940   -86.159      True
2013-02-05 19:50:00  39.940   -86.159      True
2013-02-05 19:55:00  39.940   -86.159     False
2013-02-05 20:00:00  39.777   -85.995     False
2013-02-05 20:05:00  39.775   -85.978      True
2013-02-05 20:10:00  39.775   -85.978      True
2013-02-05 20:15:00  39.775   -85.978     False
2013-02-05 20:20:00  39.940   -86.159      True
2013-02-05 20:25:00  39.940   -86.159     False

In [139]: df.dtypes
Out[139]: 
date         float64
long lat     float64
condition       bool
dtype: object 
```

创建一些作为索引的日期列（这些是 datetime64[ns] dtype）

```
In [140]: df['date'] = df.index   
In [141]: df['rdate'] = df.index 
```

将 False 的 rdate 列设置为 NaT（np.nan 转换为 NaT）

```
In [142]: df.loc[~df['condition'],'rdate'] = np.nan 
```

从前一个值向前填充 NaT

```
In [143]: df['rdate'] = df['rdate'].ffill() 
```

从日期中减去 rdate，这将生成 timedelta64[ns] 类型的时间差列

```
In [144]: df['diff'] = df['date']-df['rdate']

In [151]: df
Out[151]: 
                                   date  long lat condition               rdate  \
2013-02-05 19:45:00 2013-02-05 19:45:00   -86.159      True 2013-02-05 19:45:00   
2013-02-05 19:50:00 2013-02-05 19:50:00   -86.159      True 2013-02-05 19:50:00   
2013-02-05 19:55:00 2013-02-05 19:55:00   -86.159     False 2013-02-05 19:50:00   
2013-02-05 20:00:00 2013-02-05 20:00:00   -85.995     False 2013-02-05 19:50:00   
2013-02-05 20:05:00 2013-02-05 20:05:00   -85.978      True 2013-02-05 20:05:00   
2013-02-05 20:10:00 2013-02-05 20:10:00   -85.978      True 2013-02-05 20:10:00   
2013-02-05 20:15:00 2013-02-05 20:15:00   -85.978     False 2013-02-05 20:10:00   
2013-02-05 20:20:00 2013-02-05 20:20:00   -86.159      True 2013-02-05 20:20:00   
2013-02-05 20:25:00 2013-02-05 20:25:00   -86.159     False 2013-02-05 20:20:00   

                        diff  
2013-02-05 19:45:00 00:00:00  
2013-02-05 19:50:00 00:00:00  
2013-02-05 19:55:00 00:05:00  
2013-02-05 20:00:00 00:10:00  
2013-02-05 20:05:00 00:00:00  
2013-02-05 20:10:00 00:00:00  
2013-02-05 20:15:00 00:05:00  
2013-02-05 20:20:00 00:00:00  
2013-02-05 20:25:00 00:05:00 
```

diff 列现在是 timedelta64[ns]，因此您需要以分钟为单位的整数（仅供参考，现在这有点笨拙，因为 pandas 没有类似于日期时间戳的标量类型 Timedelta）

（另外，在填充之前，您可能必须在这个 rdate 系列上做一个 shift()，我想我在某个地方偏离了 1）......但这就是想法

```
In [175]: df['diff'].map(lambda x: x.item().seconds/60)
Out[175]: 
2013-02-05 19:45:00     0
2013-02-05 19:50:00     0
2013-02-05 19:55:00     5
2013-02-05 20:00:00    10
2013-02-05 20:05:00     0
2013-02-05 20:10:00     0
2013-02-05 20:15:00     5
2013-02-05 20:20:00     0
2013-02-05 20:25:00     5 
```

# java-me - 来自 servlet 的 java.io.EOFException

> ID：15683590
> 
> 赞同：1
> 
> 时间：2013-03-28T13:48:30.463
> 
> 标签：java-me

在运行以下应该为我的 j2me 检索 mysql 数据库表的 servlet 后，我​​得到了一个 java.io.eofexception。我正在开发一个 j2me cldc 应用程序，它应该在 mysql 数据库中显示一个表。现在 j2me 继续显示 servlet jsp 页面上显示的 http 错误。帮帮我，让我大学毕业！

包 midletservlet；

```
enter code here

import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class getConn extends HttpServlet {
    String query;
    String printrow;
    String id;
    String car_model;
    String price;
    Statement stmt;
    ResultSet res;
    Connection conn;

    @Override
    public void init(){
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    DataInputStream in = new DataInputStream((InputStream)request.getInputStream());
    String db = in.readUTF();
    String user = in.readUTF();
    String pwd = in.readUTF();
    String message = "jdbc:mysql://localhost:3306/"+db+","+user+","+pwd;
    String mess = "no data";
    try{
        connect(db.toLowerCase().trim(), user.toLowerCase().trim(),    pwd.toLowerCase().trim());

        message +="100 ok";
    } catch(Throwable t){
        message +="200" +t.toString();
    }
    try{
        String query = "SELECT id, car_model, price FROM car_prices";
        stmt = conn.createStatement();
        res = stmt.executeQuery(query);

    }
    catch(SQLException error){

    }
    boolean Records;
    try {
        Records = res.next();
        if(!Records){
        System.out.println(mess);

    }
    } catch (SQLException ex) {
        Logger.getLogger(getConn.class.getName()).log(Level.SEVERE, null, ex);
    }
    try{
        do{
            id = res.getString(1);
            car_model = res.getString(2);
            price = res.getString(3);
            printrow = id + " " + car_model + " " + price;
            System.out.print(printrow);
        }
       while(res.next());
        stmt.close();
    }
    catch(SQLException error){
        System.err.print("data display error" +error);
    }

    response.setContentType("text/plain");
    response.setContentLength(message.length());
    PrintWriter out = response.getWriter();
    out.println(message);

    in.close();
    out.close();
    out.flush();
  }

   @Override
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
         doPost(request, response);
  }

  private String connect(String db, String user, String pwd) throws Exception{

    try{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306  /"+db,user,pwd);
        Statement stmt = conn.createStatement();
        ResultSet res = stmt.executeQuery("SELECT * from car_prices");
        if(res.next()) {
            return res.getString(1);
        }
        else {
            return null;
        }   

    } catch(Exception e){
        return e.toString();
    }

} 
```

}

# html - 当窗口宽度小于正常值时，右浮动 div 位于左 div 后面，没有浮动

> ID：15683591
> 
> 赞同：2
> 
> 时间：2013-03-28T13:48:36.257
> 
> 标签：html, css, css-float, scrollbar

我在这样的固定标题中有两个 div

**HTML**

```
<div id="commit-header_panel">
   <div id="commit-header_panel_right" style="float:right;backg..."></div>
   <div id="commit-header_panel_left"></div>
   <div style="clear:both;"></div>
</div> 
```

**CSS**

```
#commit-header_panel
{
    background-color: #c5e8fc;
    height:74px;
}
#commit-header_panel_left
{
    height:74px;
    min-width: 630px;
}

#commit-header_panel_right
{
    min-width: 573px;
    width:expression(document.body.clientWidth < 573? "573px": "auto" );
    height:74px;
} 
```

问题是当我将窗口调整为更小的宽度时，右 div 与左 div 相交。

我想要第二个（右浮动）不要落后于左一个。右 div 应该停止向左移动，并让用户在需要时使用浏览器窗口水平滚动条查看右侧部分。

**问题** ![在此处输入图像描述](../Images/f99bd0432eebe44800767732298c8520.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:54:43.377

如果你想要水平滚动条，那么为你的标题设置一个最小宽度

```
#commit-header_panel
{
    min-width: 1203px
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:54:45.503

您可以使用媒体查询来定义您的 CSS：

*   [媒体查询](http://css-tricks.com/css-media-queries/)

例如：

```
@media all and (max-width: <SET WIDTH HERE>) and (min-width: <SET WIDTH HERE>) {
    //Define CSS here for screen size 
} 
```

或者您可以更改定义使用百分比的`width`方式`<div>`。

像这样：

```
#commit-header_panel_left
{
    height:74px;
    min-width: 30%; //replace with required value
}

#commit-header_panel_right
{
    min-width: 30%; //replace with required value
    width:expression(document.body.clientWidth < 573? "573px": "auto" );
    height:74px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:07:33.433

修复`width`你的`commit-header_panel`div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T17:29:12.107

最简单的方法是找到面板开始重叠的宽度，然后设置最小宽度：Xpx; 到父容器。这允许面板动态响应窗口大小调整，但会创建一个停止点，在该停止点处面板将不再移动。

您可能还想将面板宽度设置为 width: auto; 或宽度：X%；因为某些浏览器可能会简单地捕捉到最小宽度而不响应不断变化的窗口大小。

```
#commit-header_panel {
background-color: #c5e8fc;
height:74px;
width: 100%;
min-width: 900px;
} 
```

然后一定要清除浮动：

```
<div style="clear: both;"></div> 
```

# uitableview - UITableViewCell 上的 AFNetworking setImageWithURL 视网膜尺寸错误

> ID：15683592
> 
> 赞同：0
> 
> 时间：2013-03-28T13:48:36.417
> 
> 标签：uitableview, afnetworking

使用带有 20x20px 图像的 setImageWithURL 加载图像的最简单示例最终会使默认单元格的图像视图改为 10x10px。

如果我使用以下代码在没有 AFNetworking 的类别方法的情况下加载图像，则图像按预期设置为 20x20：

关于这是为什么的任何线索？（我修复了之前的代码）。

```
 UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Whatever"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Whatever"];
    }

    if (indexPath.row == 0) {
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://acidblue.com/images/Gender_Male.png"]];
    } else {
        cell.imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://acidblue.com/images/Gender_Male.png"]]];
    } 
```

示例代码可在以下位置找到： [https ://www.dropbox.com/s/ha9lw7suenolzb2/AFNetworkingCellExample.zip](https://www.dropbox.com/s/ha9lw7suenolzb2/AFNetworkingCellExample.zip)

还有一些奇怪的行为，因为来自 AFNetworking 调用的图标每次都不会立即显示。我认为这是一个线程问题，但我已经检查并在主线程上设置了图标。现在，如果图标没有出现，请将表格拉下来，它会重新绘制。这是我正在尝试解决的另一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:43:07.133

将您的图像视图框架设置为 20x20

你能提供那个图片的网址吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T19:04:34.667

只需设置`contentMode`为`UIImageView`“ `UIViewContentModeScaleAspectFit`”。

```
self.avatarImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,kAvatarDimension,kAvatarDimension)];
[self.avatarImageView setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.avatarImageView setContentMode:UIViewContentModeScaleAspectFit];
[self.avatarImageView setImageWithURL:[NSURL URLWithString:@"http://example.comsomeimage.jpg"] placeholderImage:[UIImage imageNamed:@"avatar_default_black"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:48:38.240

我不知道 AFNetworking 的内部工作原理，但这可能是相同的原因，如果您希望 UIImage`size`返回像素，则在 Retina 显示器上查询时会得到“意外”值。原因是在 Retina 显示屏上将像素转换为点

来自苹果参考

> @property(nonatomic, readonly) CGSize 大小
> 
> 在 iOS 4.0 及更高版本中，该值反映了图像的逻辑大小，以磅为单位。在 iOS 3.x 及更早版本中，此值始终反映以像素为单位测量的图像尺寸。

请参阅以下问题和答案：（不特定于 AFNetworking）

[为什么 UIImage 视图显示错误的图像大小](https://stackoverflow.com/questions/10084130/why-uiimage-view-showing-wrong-size-of-image)

# javascript - 输入类型文本 - 如何根据其在网页中的位置在下方或上方添加 div

> ID：15683599
> 
> 赞同：1
> 
> 时间：2013-03-28T13:48:51.380
> 
> 标签：javascript, html, css

我的页面中有一个文本字段：

```
<input type='text' /> 
```

我有一些逻辑，如果输入了某些内容，则会在下面出现一个 div。（div 就像一个组合中的弹出窗口，给你一个想法）

问题是，如果文本字段位于页面底部，我宁愿 div 出现在文本字段的顶部。

有没有简单的方法来实现这一点？

另一种表达方式是：

我如何知道在另一个 HTML 元素底部添加 div 是否不适合当前页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:50:38.447

您可以检查元素下方的可用空间并根据需要确定位置。

```
var popupTop = <offset-top-of-element> + element.offsetHeight;

if(window.offsetHeight - popupTop > 100) { // change 100 as needed
   // display below
}
else {
   // display above
} 
```

为了找到元素的偏移顶部，您需要递归添加 parent.offsetTop 直到没有父级，如此答案：[https ://stackoverflow.com/a/6780661/921204](https://stackoverflow.com/a/6780661/921204)

*注意*：我没有测试`window.offsetHeight`跨浏览器的兼容性。您可能需要相同的多浏览器代码。除此之外，这几乎适用于所有浏览器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T14:20:59.497

你可以看这里[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)。根据您的描述，我猜您需要一个工具提示。这个库会自动定位你的 div。

# android - 如何在android中创建这个“类似对话框”的弹出窗口？

> ID：15683600
> 
> 赞同：0
> 
> 时间：2013-03-28T13:48:52.413
> 
> 标签：android, android-layout

我正在创建一个相机应用程序，我想做一些类似于原生相机应用程序为 Galaxy S3 所做的事情。以下是一些屏幕截图，可以让您了解我在说什么。 ![肖像](../Images/d172f677447f97317c257f30c04393fb.png) ![景观](../Images/0de6c99c3632913ee6fd3d54dcaf27e0.png)

首先，我不认为它们是DialogFragments，因为它后面的屏幕没有变暗，而且它们可以旋转（不旋转整个屏幕）。这对我很重要，因为我也在制作一个相机应用程序，它将被“锁定”在肖像中，并让 UI 元素自行旋转。

有谁知道如何为 Android 显示这样的叠加层？我的第一个猜测可能是某种自定义视图实现，但我不确定。

# asp.net-web-api - ASP.Net Web API 帮助页面：文档复杂类型属性

> ID：15683602
> 
> 赞同：8
> 
> 时间：2013-03-28T13:48:56.617
> 
> 标签：asp.net-web-api

我有一个 post 操作接收 Person 类型的 FromBody 参数。在 HelpPage 中，我获得了有关 Person 参数的信息。是否可以在 Person 中列出有关属性的信息，并使用 XML 文档文件中的文档来获取每个属性的描述？

```
public class PersonController : ApiController
{
    /// <summary>
    /// Add a person
    /// </summary>
    /// <param name="person">Person to add</param>
    /// <returns></returns>
    [HttpPost]
    public HttpResponseMessage Add([FromBody] Person person)
    {
        // ...

        return Request.CreateResponse(HttpStatusCode.Created);
    }
}

/// <summary>
/// A person
/// </summary>
public class Person
{
    /// <summary>
    /// The name of the person
    /// </summary>
    public String Name { get; set; }

    /// <summary>
    /// The age of the person
    /// </summary>
    public Int32 Age { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:25:50.683

目前不支持开箱即用。有一个相关的工作项要求为模型上使用的数据注释属性生成帮助页面。您的方案应该在其修复后工作：http: [//aspnetwebstack.codeplex.com/workitem/877](http://aspnetwebstack.codeplex.com/workitem/877)

# sql - 在双别名表上连接 SQL 语句时出现问题

> ID：15683603
> 
> 赞同：0
> 
> 时间：2013-03-28T13:49:00.680
> 
> 标签：sql, sql-server

我不知道如何命名这个问题，下面是我想要做的一个例子，它是创建两个超过阈值的总值和一个低于阈值的值，但是这两个语句是相互排斥的。我认为使用左连接或左连接可能会起作用。请问有什么想法吗？

```
SELECT Count(Sale1.id) above500, 
       Count(sale2.id) below500, 
       employee.name 
FROM   employeesale es 
       INNER JOIN employee 
               ON es.employeeid = employee.id 
       LEFT JOIN sale Sale1 
              ON es.saleid = sale1.id 
       LEFT JOIN sale Sale2 
              ON es.saleid = sale2.id 
WHERE  Sale1.value >= 500 
       AND Sale2.value < 500 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:52:22.773

你不需要两个连接。进行条件聚合：

```
SELECT sum(case when sale.value >= 500 then 1 else 0 end) as above500, 
       sum(case when sale.value < 500 then 1 else 0 end) as below500, 
       employee.name 
FROM   employeesale es 
       INNER JOIN employee 
               ON es.employeeid = employee.id 
       LEFT JOIN sale
              ON es.saleid = sale.id 
group by employee.name 
```

我添加了`group by`条款。此外，您似乎不需要employeesale 表，除非您将其用于过滤目的。

# java - Cassandra 上的计数器查询期间的字符串验证错误

> ID：15683605
> 
> 赞同：4
> 
> 时间：2013-03-28T13:49:10.760
> 
> 标签：java, cassandra, apache-storm, hector

我的代码上有以下计数器查询：

```
private CounterSlice<String> queryLastCounts(Long key, String columnFamily,
                                                            int maxLength) {
    SliceCounterQuery<Long, String> query = 
            HFactory.createCounterSliceQuery(cassandra.getKeyspace(), 
                                                            LONG_S, STRING_S);
    query
        .setColumnFamily(columnFamily)
        .setKey(key)
        .setRange("", "", true, maxLength);
    return query.execute().get();
} 
```

在我的单元测试中，代码运行良好。但是当运行正确的应用程序（我为此使用storm）时，我收到以下错误：

```
Caused by: InvalidRequestException(why:String didn't validate.)
at org.apache.cassandra.thrift.Cassandra$get_slice_result.read(Cassandra.java:7756)
at org.apache.cassandra.thrift.Cassandra$Client.recv_get_slice(Cassandra.java:570)
at org.apache.cassandra.thrift.Cassandra$Client.get_slice(Cassandra.java:542)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl$8.execute(KeyspaceServiceImpl.java:308)
... 25 more 
```

我也在使用 Hector 访问 Cassandra。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T18:55:38.247

正如@Ar3s 所建议的，这里是这个问题的解决方案。

我将列验证器保留为默认值，它使用 UTF8。解决方案是将其更改为 Long 验证器，一切正常。

这里的教训是：

> 检查有问题的列的数据验证器。

# java - 通过不同帧处理动作

> ID：15683608
> 
> 赞同：1
> 
> 时间：2013-03-28T13:49:20.213
> 
> 标签：java, swing, action

我有一个看起来有些基本的设计问题，但我正在努力寻找合适的解决方案，因为我在 OO 设计方面没有太多经验。

我有一个系统，它有很多框架，用户需要在其中识别企业/公司。这样做的一种方法是单击一个按钮，该按钮将打开第二个框架，使用户能够选择公司。选择完成后，公司的代码和名称应在原始框架的文本字段中初始化。

我认为在需要公司标识的每一帧中复制操作代码并不是一个好的设计选择。不过，我不知道如何在不引用触发动作的框架的情况下创建单个`ActionListener`（或`javax.swing.Action`），因为我无法初始化文本字段（或者我会？）。

我的第一个想法是为所有需要使用单一方法（如`setCorporation(Corporation corporation)`. 这样，当我创建一个 时`ActionListener`，我会传递一个实现接口的框架实例的引用。

问题是这个解决方案会创建双重引用（`addActionListener(new SearchAction(this))`），我必须为每个类似的问题（比如搜索客户端）实现一个接口。

解决此类问题的最佳方法是什么？

# android - 对话框打开动画在 Android 4.2 上不起作用

> ID：15683611
> 
> 赞同：4
> 
> 时间：2013-03-28T13:49:24.567
> 
> 标签：android

这就是我打开对话框的方式：

```
Dialog dialog = new Dialog(MainActivity.this);
dialog.setTitle("Animation Dialog");
dialog.getWindow().getAttributes().windowAnimations = R.style.AddDialogAnim;
dialog.show(); 
```

R.style.AddDialogAnim 看起来像这样：

```
<style name="AddDialogAnim">
  <item name="android:windowEnterAnimation">@anim/slide_in</item>
  <item name="android:windowExitAnimation">@anim/slide_out</item>
</style> 
```

在 Android 2.2（模拟器）上，进入和退出动画都可以正常工作。

然而，在 Android 4.2 (Galaxy Nexus) 上，对话框会立即出现，并且只有退出动画有效。

我尝试了不同的方法——使用 DialogFragment、设置动画的不同方式等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:15:46.340

尝试通过以下参考代码调用您的对话框：

```
 Dialog imageDiaglog= new Dialog(MainActivity.this,R.style.AddDialogAnim); 
```

它在所有版本中都可以正常工作。

# java - Java 消息传递服务队列会话

> ID：15683614
> 
> 赞同：0
> 
> 时间：2013-03-28T13:49:35.730
> 
> 标签：java, jms, spring-jms

我是 JMS 的新手。我正在尝试一个示例示例，在该示例中，我将消息发送到会话中的队列，并根据标志值会话被提交。我对代码的期望是，当我的标志为假时，消息仍保留在队列中并且不会被删除。如果标志为真，则会话被提交并且我收到消息。我无法完成前一部分，即当 flg 值为 false 时将消息保存在队列中。

我正在使用 MDPListener 和 spring 框架。以下是我的代码：

```
public void onMessage(Message message,Session session) {

        System.out.println("New Message arrived part2 .. Passing to Controller");

        Boolean g=false;

        if(g==true)
        {
            System.out.println("Data true..session committed!!");
            try {
                session.commit();
            } catch (JMSException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else
        {
            try {
                System.out.println("Sesison not commds!!");

                //HERE I WANT THE CODE TO STORE THE MESSAGE IN THE QUEUE, SO THAT NEXT TIME WHEN THE FLAG IS TRUE, MESSAGE GETS DELIVERED! 
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:59:13.700

你用的是哪个版本的spring。

无论如何检查一下：

[http://forum.springsource.org/showthread.php?21601-JMS-queue-message-viewing-without-removing-it-from-the-queue](http://forum.springsource.org/showthread.php?21601-JMS-queue-message-viewing-without-removing-it-from-the-queue)

希望你觉得它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:33:10.970

容器提交会话（除非侦听器抛出异常）。

# c# - en-ZA .net 中的格式文化问题

> ID：15683617
> 
> 赞同：1
> 
> 时间：2013-03-28T13:49:39.603
> 
> 标签：c#, javascript, .net, regex, culture

我有一个用 asp .net C# 编写的小应用程序，它在文本框中接受用户的输入，有两个按钮 - 单击第一个按钮时，我将使用文化特定值填充第二个文本框。我正在尝试将输入值设置为文化 en-ZA。

这是我在cs文件中的代码，

```
protected override void InitializeCulture()
{
    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-ZA");
    //base.InitializeCulture();
}

protected void btnCulture_Click(object sender, EventArgs e)
{
    decimal val = Convert.ToDecimal(txtValue.Text, System.Globalization.CultureInfo.CurrentCulture);
    txtConverted.Text = val.ToString("0,0.00");
} 
```

现在，在第二个按钮单击时，我编写了一个 javascript 函数，它将从文本框中读取值并尝试将其与正则表达式匹配。

示例输入 12345 被解析为 12 345.00 并且希望正则表达式是这样的 --> ^[+-]?[\d\ ] *.?\d* ([][+-]?\d+ )?$ 但这不起作用。在调试时，从文本框中读取的值是 12-345.00，但“-”不完全是连字符。我在网上搜索并找到了一些对 '\xa0' 的引用，它是十六进制空格，但我没有找到任何方法在正则表达式中处理这个问题。这是javascript函数：

```
function regexTest() {                        
    var exp = new RegExp("^[+-]?[\\d\\ ]*\\.?\\d*([][+-]?\\d+)?$");

    var price = document.getElementById("txtConverted").value;

    if (price.match(exp)) {
        alert("pass");
        return true;
    }
    else {
        alert("fail");
        return false;
    }
} 
```

编辑：为了进一步理解，我得到了这样的角色-

![在此处输入图像描述](../Images/ee90cd87aff45893ff6a8d43376ab0d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:18:45.363

您可以使用下面的这个表达式来捕捉空格或连字符。但我建议您先使用 string.Replace("-", "") 删除连字符。

```
var exp = new RegExp(@"^[+-]?[\d\s|-]*\.?\d*([][+-]?\d+)?$"); 
```

字符串前面的@ 去除转义字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:26:58.873

您可以将`\xao`（不间断空格）添加到字符类，即`[\\d\\xao]`.
它是一个十六进制转义序列，表示十进制 unicode 代码点 160 处的字符。

# forms - 使用 yesod-form 在 POST/Redirect/GET 后保留不正确的用户输入

> ID：15683619
> 
> 赞同：8
> 
> 时间：2013-03-28T13:49:42.893
> 
> 标签：forms, haskell, yesod, post-redirect-get

最近我偶然发现了以下问题：
使用[`yesod`](http://www.yesodweb.com/)我想

1.  显示一个应用表单并让用户将他的数据发布到一个特殊的处理程序
2.  `FormFailure` *将浏览器重定向*到上一页
3.  打印错误信息...
4.  ...并重新显示***已经填写***了错误的用户提供的数据的表单

就我而言，这就是[`POST/Redirect/GET`](http://en.wikipedia.org/wiki/Post/Redirect/Get)全部。

虽然第 <1-3> 点需要简单直接的实现，但我发现无法实现第 <4> 点！
yesod *-form*包会自动处理这个问题，但不允许在表单解析 <2> 和错误处理 <3,4> 之间进行任何重定向，就像我希望的那样。

## 回应迈克尔斯诺伊曼的回答

您建议我应该序列化提交的数据并在重定向后以某种方式将其注入表单。这导致了更详细的问题：

1.  如何获取要序列化的数据？

    我知道我可以使用，但哪些是相关信息（字段的 s 是自动生成的）？[`runRequestBody`](http://hackage.haskell.org/packages/archive/yesod-core/latest/doc/html/Yesod-Handler.html#v%3arunRequestBody)`:: GHandler s m RequestBodyContents``name`

2.  如何将数据注入表单？

    如果您查看例如[aopt的类型](http://hackage.haskell.org/packages/archive/yesod-form/latest/doc/html/Yesod-Form-Functions.html#v%3aaopt)

    ```
    aopt :: Field sub master a -> FieldSettings master -> Maybe (Maybe a) -> AForm sub master (Maybe a) 
    ```

    您会看到它要求默认值与 的类型相同`Field`，因此无法重新插入可能无法正确解析的用户提供的数据。

    示例：用户在`intField`. 现在我希望能够在重定向后在同一字段中显示“A”，但 API 不允许我这样做。

我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:31:30.500

我个人认为用 POST 请求返回填写好的表单是可以接受的，这就是 yesod-form API 的优化目标。如果您还想在表单提交失败时强制重定向，则需要序列化提交的数据并将其存储在某处，例如：

1.  在数据库中。
2.  在用户会话中。
3.  作为您重定向到的 URL 的查询字符串参数的一部分。请注意，这种方法不适用于敏感数据，因为任何中间代理都会缓存表单数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-27T07:59:36.480

老问题，但我今天需要这个，所以不妨将它发布给遇到同样问题的其他人。

基本上，正如迈克尔建议的那样，我们可以将数据序列化到会话中。这样做很棘手，而且把它变成一个表格更棘手。我不得不撕掉它们`postEnv`，`postHelper`因为`Yesod.Form.Functions`它们没有被导出，但需要这样做。

然后，您可以`setLastInvalidPost`在重定向之前在您的处理程序中使用，然后`generateFormFromLastPost`在目标处理程序中使用。

请注意，使用类似的东西`Data.Serialize`进行序列化可能会更好；但是，`Show`/`Read`实例足以满足我的需求（而且更简单）。

这是好东西。如果你想要一个完整的工作片段，[你可以查看我的 gist](https://gist.github.com/carymrobbins/5cdcc4b1eb4eced7afde)。

```
-- Create a form from last post data in the session if exists, otherwise create a blank form.
generateFormFromLastPost :: (RenderMessage (HandlerSite m) FormMessage, MonadHandler m) =>
                            (Markup -> MForm m (FormResult a, xml)) -> m (xml, Enctype)
generateFormFromLastPost form = do
    env <- getLastInvalidPost
    case env of
        Nothing -> generateFormPost form
        Just _ -> first snd <$> postHelper form env

lastInvalidPostSessionKey :: Text
lastInvalidPostSessionKey = "lastInvalidPost"

-- Sets the post data retreived from postEnv, ignoring the FileEnv.
setLastInvalidPost :: MonadHandler m => Maybe (Env, FileEnv) -> m ()
setLastInvalidPost Nothing = return ()
setLastInvalidPost (Just (env, _)) = sessionSetter lastInvalidPostSessionKey env

-- Retrieves the previous post data to be passed to postHelper.
getLastInvalidPost :: MonadHandler m => m (Maybe (Env, FileEnv))
getLastInvalidPost = do
    result <- sessionGetter lastInvalidPostSessionKey
    return $ case result of
        Nothing -> Nothing
        Just env -> Just (env, Map.fromList [])

sessionSetter :: (MonadHandler m, Show a) => Text -> a -> m ()
sessionSetter key = setSession key . pack . show

sessionGetter :: (MonadHandler m, Read b) => Text -> m (Maybe b)
sessionGetter key = do
    m <- lookupSession key
    return $ readMaybe . unpack =<< m 
```

# java - sqlite 中的更新方法没有抛出异常？

> ID：15683622
> 
> 赞同：0
> 
> 时间：2013-03-28T13:49:53.577
> 
> 标签：java, android, sqlite, exception, try-catch

我正在从网络上获取有关项目的信息，我希望我的应用程序检查某些行是否存在。如果它们确实存在，那么应用程序应该更新这些行，否则它应该创建新行：

```
try {
    mDb.execSQL("UPDATE ["
    + ParseReciverAddList.tableName
    + "] SET purchased = " + pCheck
    + " WHERE id =" + (thisId));
    mDb.execSQL("UPDATE ["
    + ParseReciverAddList.tableName
    + "] SET name = '" + (PName)
    + "' WHERE id =" + (thisId));
    mDb.execSQL("UPDATE ["
    + ParseReciverAddList.tableName
    + "] SET quantity = '" + (pQuantity)
    + "' WHERE id =" + (thisId));
    Log.d("p", "e");
} catch (Exception e) {
    Log.d("p", "ne");
    mDb.execSQL("INSERT INTO ["+ParseReciverAddList.tableName+"] VALUES ("+thisId+","+pCheck+", '"+PName+"','"+pQuantity+"');");
} 
```

我想我会尝试更新它，如果它抛出`Exception`那么这意味着行不存在并且它将创建它。

但是，我遇到了一个问题：即使该行不存在，它也不会抛出`Exception`. `catch`关于为什么在行已经存在时它不触发子句的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:14:23.457

> 但是，我遇到了一个问题：即使该行不存在，它也不会抛出异常。关于为什么当行已经存在时它不触发 catch 子句的任何想法？

原因是仅在您的字符串无效的情况下才会[`execSQL()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)抛出。但是您的问题是，如果行不存在，则不会应用简单的语句，但这并不意味着String 不正确。`SQLException``SQL``UPDATE``SQL`

解决方案是使用例如[`update()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL)返回受影响行数的 API 方法，如果它返回 0，则只需执行`INSERT`。

**伪代码：**

```
int rowsAffected = db.update("table", values, "id = ?", 
                   new String[] {String.valueOf(thisId)});
if (rowsAffected == 0) {
   // perform insert
} 
```

# iphone - EXC_BAD_ACCESS (SIGABRT)，ios 崩溃日志

> ID：15683624
> 
> 赞同：5
> 
> 时间：2013-03-28T13:49:56.217
> 
> 标签：iphone, xcode, unity3d, sigabrt, crash-log

我的 iPhone/ipad 应用程序有问题。它已在应用商店中发布，但现在似乎有一些用户在尝试启动应用时遇到了崩溃。有时它有助于硬重启。如果有人能帮我弄清楚发生了什么，我会很高兴。如果这很重要，该应用程序是在统一 3d 中构建的。这是我的崩溃日志：

```
Hardware Model:      iPad2,3
Process:         thegame [3955]
Path:            /var/mobile/Applications/...thegame.app/thegame
Identifier:      thegame
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]
Date/Time:       2013-03-18 23:00:43.195 +0000
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGABRT)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3a863350 __pthread_kill + 8
1   libsystem_c.dylib               0x3a7da11e pthread_kill + 54
2   libsystem_c.dylib               0x3a81696e abort + 90
3   thegame                         0x00bc6288 0x1000 + 12341896
4   thegame                         0x00bb6e64 0x1000 + 12279396
5   libsystem_c.dylib               0x3a7e3e90 _sigtramp + 40
6   thegame                         0x007b9688 0x1000 + 8095368
7   thegame                         0x007b9688 0x1000 + 8095368
8   Foundation                      0x32e110f0 __NSThreadPerformPerform + 456
9   CoreFoundation                  0x324cf680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
10  CoreFoundation                  0x324ceee4 __CFRunLoopDoSources0 + 208
11  CoreFoundation                  0x324cdcb2 __CFRunLoopRun + 642
12  CoreFoundation                  0x32440eb8 CFRunLoopRunSpecific + 352
13  CoreFoundation                  0x32440d44 CFRunLoopRunInMode + 100
14  GraphicsServices                0x35ff52e6 GSEventRunModal + 70
15  UIKit                           0x343562fc UIApplicationMain + 1116
16  thegame                         0x00006a94 0x1000 + 23188
17  thegame                         0x00003324 0x1000 + 8996

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3a853648 kevent64 + 24
1   libdispatch.dylib               0x3a783974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3a783654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 2:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 3:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3a852eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a853048 mach_msg + 36
2   CoreFoundation                  0x324cf040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x324cdd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x32440eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32440d44 CFRunLoopRunInMode + 100
6   WebCore                         0x38407500 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
8   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x3a852f04 semaphore_wait_trap + 8
1   thegame                         0x00c999d8 0x1000 + 13208024
2   thegame                         0x00bff558 0x1000 + 12576088
3   thegame                         0x00c7773c 0x1000 + 13068092
4   thegame                         0x00c92bec 0x1000 + 13179884
5   thegame                         0x00cada2c 0x1000 + 13290028
6   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
7   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 6:
0   libsystem_kernel.dylib          0x3a852f04 semaphore_wait_trap + 8
1   thegame                         0x009401f4 0x1000 + 9695732
2   thegame                         0x0098b714 0x1000 + 10004244
3   thegame                         0x0098bc08 0x1000 + 10005512
4   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
5   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 7:
0   libsystem_kernel.dylib          0x3a852f04 semaphore_wait_trap + 8
1   thegame                         0x00a228ac 0x1000 + 10623148
2   thegame                         0x00a3f800 0x1000 + 10741760
3   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
4   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 8 name:  AURemoteIO::IOThread
Thread 8:
0   libsystem_kernel.dylib          0x3a852eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a853048 mach_msg + 36
2   AudioToolbox                    0x31fc391c AURemoteIO::IOThread::Run() + 104
3   AudioToolbox                    0x31fc5c84 AURemoteIO::IOThread::Entry(void*) + 4
4   AudioToolbox                    0x31f03882 CAPThread::Entry(CAPThread*) + 294
5   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
6   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 9:
0   libsystem_kernel.dylib          0x3a8636a4 __semwait_signal + 24
1   libsystem_c.dylib               0x3a7c13ce nanosleep + 138
2   libsystem_c.dylib               0x3a7c133a usleep + 46
3   thegame                         0x00a22cb0 0x1000 + 10624176
4   thegame                         0x00a3f858 0x1000 + 10741848
5   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
6   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 10:
0   libsystem_kernel.dylib          0x3a852eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a853048 mach_msg + 36
2   CoreFoundation                  0x324cf040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x324cdd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x32440eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32440d44 CFRunLoopRunInMode + 100
6   CFNetwork                       0x321a22ca CFURLConnectionSendSynchronousRequest + 330
7   Foundation                      0x32e351c2 +[NSURLConnection sendSynchronousRequest:returningResponse:error:] + 242
8   thegame                         0x007b4a6c 0x1000 + 8075884
9   thegame                         0x007b4704 0x1000 + 8075012
10  thegame                         0x007b8b64 0x1000 + 8092516
11  Foundation                      0x32e10e80 __NSThread__main__ + 968
12  libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
13  libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 11 name:  com.apple.NSURLConnectionLoader
Thread 11:
0   libsystem_kernel.dylib          0x3a852eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a853048 mach_msg + 36
2   CoreFoundation                  0x324cf040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x324cdd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x32440eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32440d44 CFRunLoopRunInMode + 100
6   Foundation                      0x32d8d3d0 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x32e10e80 __NSThread__main__ + 968
8   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
9   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 12:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 13:
0   CoreFoundation                  0x3243e660 CFBasicHashAddValue + 180
1   CoreFoundation                  0x32446310 uniquedName + 124
2   CoreFoundation                  0x3244ad88 _CFXNotificationPost + 740
3   Foundation                      0x32d61594 -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
4   Foundation                      0x32e11362 __NSFinalizeThreadData + 250
5   CoreFoundation                  0x324caf7e __CFTSDFinalize + 62
6   libsystem_c.dylib               0x3a7af128 _pthread_tsd_cleanup + 172
7   libsystem_c.dylib               0x3a7aedfe _pthread_exit + 114
8   libsystem_c.dylib               0x3a7c8160 pthread_exit + 24
9   Foundation                      0x32d99a2e +[NSThread exit] + 6
10  Foundation                      0x32e10e9e __NSThread__main__ + 998
11  libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
12  libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 14:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 15:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 16:
0   libsystem_kernel.dylib          0x3a863d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a7b1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a7b1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a7b18a0 start_wqthread + 4

Thread 17:
0   libsystem_kernel.dylib          0x3a8636a4 __semwait_signal + 24
1   libsystem_c.dylib               0x3a7c13ce nanosleep + 138
2   thegame                         0x0098ba8c 0x1000 + 10005132
3   thegame                         0x0093ec54 0x1000 + 9690196
4   thegame                         0x0093ec80 0x1000 + 9690240
5   thegame                         0x0098bc08 0x1000 + 10005512
6   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
7   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 18 name:  com.apple.CFSocket.private
Thread 18:
0   libsystem_kernel.dylib          0x3a863594 __select + 20
1   CoreFoundation                  0x324d31f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x3a7bc30e _pthread_start + 306
3   libsystem_c.dylib               0x3a7bc1d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3c34f534
    r4: 0x00000006    r5: 0x3c34fb88      r6: 0x01095260      r7: 0x2fdfebbc
    r8: 0x0000000b    r9: 0x000008c8     r10: 0x00000000     r11: 0x01090770
    ip: 0x00000148    sp: 0x2fdfebb0      lr: 0x3a7da123      pc: 0x3a863350
  cpsr: 0x00000010 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:37:50.240

`EXC_BAD_ACCESS`当脚本级别出现问题时抛出（例如空引用异常，但可能是任何其他异常）。

我开发了一个游戏内开发控制台，在其中转发 Unity 和我们的脚本抛出的所有调试日志（请参阅 Unity 提供的漂亮回调[http://docs.unity3d.com/Documentation/ScriptReference/Application.LogCallback.html](http://docs.unity3d.com/Documentation/ScriptReference/Application.LogCallback.html)） .

将游戏构建为开发构建（检查构建设置），对 Unity 库进行符号链接并在需要时检查脚本调试，您可以尝试重现导致您的应用程序因某些用户而崩溃的步骤。这样，当发生异常时，它不会在 iOS 上崩溃。

看看这个 DebugConsole 实现，它可以非常快速地集成（尽管您也需要一些小的更改来转发 Unity 日志）并且可以为您完成这项工作：[https ://gist.github.com/darktable/1412228](https://gist.github.com/darktable/1412228)

在我们的开发版本中，除非我们的应用程序滥用内存，否则我们不再会崩溃。即使在这种情况下，您也可以跟踪发生了什么。

# android - Android 在特定时间运行一些代码，但只运行一次

> ID：15683627
> 
> 赞同：1
> 
> 时间：2013-03-28T13:50:08.610
> 
> 标签：android

我想在特定时间运行一些代码，例如在 18:22 但只运行一次。

我尝试使用：

```
AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE); 
```

好用吗：

```
alarmManager.set(AlarmManager.RTC_WAKEUP, cal_alarm.getTimeInMillis(), pendingIntent); 
```

还是更好地用于`handler`在特定时间运行特定代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:55:07.190

最好使用 AlarmManager 进行如此精确的计时。

使用处理程序将要求您的应用程序始终保持活动状态，这可能会对设备的电池产生负面影响。另一方面，AlarmManager 会在所需时间到来时启动您的应用程序，您不需要一直保持它运行。

# lockbox-3 - DCPCrypt 到 Lockbox3 的迁移

> ID：15683629
> 
> 赞同：0
> 
> 时间：2013-03-28T13:50:20.280
> 
> 标签：lockbox-3

我是加密/解密例程的新手。我正在尝试使用我想将我的应用程序迁移到的 Lockbox3，以便解密使用 DCPCrypt 加密的字符串。假设我有这个加密功能：

```
function TfrmMain.Encrypt(value: string): string;
var
  CipherR : TDCP_rijndael;
  m, sm, Key, IV: string;
  Data: string;
begin
  Key := PadWithZeros(m, KeySize);
  IV := PadWithZeros(sm, BlockSize);
  Data := PadWithZeros(value, BlockSize);
  m := 'SOMEWORDSOMEWORD';
  sm := 'WORDSOMEWORDSOME';

  Key := PadWithZeros(m, KeySize);
  IV := PadWithZeros(sm, BlockSize);
  CipherR := TDCP_rijndael.Create(Self);
  if Length(m) <= 16 then
    CipherR.Init(Key[1], 128, @IV[1])
  else if Length(m) <= 24 then
    CipherR.Init(Key[1], 192, @IV[1])
  else
    CipherR.Init(Key[1], 256, @IV[1]);
  CipherR.EncryptCBC(Data[1], Data[1], Length(Data));
  CipherR.Free;
  FillChar(Key[1], Length(Key), 0);
  code := Base64EncodeStr(Data);
  Result := code;
end; 
```

我现在想解密使用 Lockbox3 以这种方式加密的字符串，但我应该使用 encrypt 函数中使用的值作为 m 和 sm，我知道我该怎么做 - 如果可以的话。我想使用 sm 值来设置 Codec1.Password 但这不起作用。

任何的想法？感谢大家的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:35:13.690

怎么样 ...

```
function TfrmMain.Encrypt( const value: string): string;
var
  Codec: TCodec;
  Lib  : TCyptographicLibrary;
  Ciphertext: ansistring;
begin
Codec := TCodec.Create( nil);
Lib   := TCyptographicLibrary.Create( nil);
Codec.CryptoLibrary := Lib;
Codec.StreamCipherId := BlockCipher_ProgId;
Codec.BlockCipherId := 'native.AES-256'; // AES-256 cipher
Codec.ChainModeId := CBC_ProgId;         // CBC chaining
Codec.Password := 'WORDSOMEWORDSOME';
Codec.EncryptString( Value, Ciphertext); // Assumes UNICODE supporting compiler.
result := Ciphertext; // Implicit utf8string --> unicode string coersion here.
Codec.Burn;
Lib.Free;
Codec.Free;
end;

function TfrmMain.ShowCiphertextOfSomeWords;
begin
ShowMessage( 'base64 of ciphertext = ' + Encrypt( 'SOMEWORDSOMEWORD'))
end; 
```

所有这些都显示在捆绑的演示程序和在线帮助中。捆绑的演示程序和在线帮助应该是您的第一参考点。请在访问 Stackoverflow 或论坛之前检查这些内容，因为回答者会倾向于重复已经为您编写的内容。

# opengl - 无法链接 glsl 顶点着色器

> ID：15683630
> 
> 赞同：0
> 
> 时间：2013-03-28T13:50:20.500
> 
> 标签：opengl, glsl

我正在学习 OpenGL 并尝试做一些简单的纹理。因此，我提供我的纹理坐标作为属性。

我的顶点着色器有一个奇怪的错误：

```
#version 150

in vec2 position;
in vec3 color;
in vec2 texcoord;

out vec3 Color;
out vec2 Texcoord;

void main()
{
    Color = color;
    Texcoord = vec2 (1.0, 0.5); /* just for debugging hardcode texcords */
    gl_Position = vec4( position, 0.0, 1.0 );
} 
```

着色器编译得很好，但是当我尝试链接着色器所属的程序时，glGetProgramInfoLog() 日志显示：

> 错误：编译的顶点着色器已损坏。

当我删除

```
in vec2 texcoord; 
```

错误消失。我如何命名属性并不重要。一旦我添加第三个，我就会收到此错误。

没有编译错误。只是这个链接错误。

我在 OS X 10.8.3 上使用 OpenGL 3.2 核心上下文。我使用 GLEW。

更新：

现在我可以链接这个：

```
#version 150

in vec2 position;
in vec3 color;
in vec2 texcoord;

out vec3 Color;
out vec2 Texcoord;

void main()
{
    Color = color;
    gl_Position = vec4( position, 0.0, 1.0 );
} 
```

但我一加

```
Texcoord = texcoord; 
```

主函数着色器变得损坏。我很绝望。这是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-14T07:53:27.977

您在上面的评论中指出，将您的代码从

```
const char* shaderSource = loadFile(path.c_str()).c_str(); 
```

到

```
string shaderString = loadFile(path.c_str());
const char* shaderSource = shaderString.c_str(); 
```

解决了你的问题。

std::string 对象正在被破坏，因为没有对它的引用，这反过来又会破坏 c 字符串缓冲区。读取时该缓冲区的内容是什么是运气问题。

# javascript - 外部列表共享点 javascript

> ID：15683632
> 
> 赞同：0
> 
> 时间：2013-03-28T13:50:26.407
> 
> 标签：javascript, list, sharepoint, external

嗨，我需要使用来自 SP 的外部列表，我需要这样的东西，使用 javascript 或任何其他代码

数据库

```
Name ID Value Value2 Value3

Nam1 01 00000 000000 000000

Nam2 02 11111 111111 111111

Nam3 03 22222 222222 222222 
```

然后在我的外部列表中我想按名称过滤，所以我选择 Nam1

```
Description Value

Value      00000

Value2     000000

Value3     000000

ID         01 
```

如果我选择 Nam2 那将是

```
Description Value

Value       11111

Value2      111111

Value3      111111

ID          02 
```

有没有办法做到这一点？

希望你能理解我的问题，英语不是我的母语

# c# - WPF C# Frame Navigation 从页面导航

> ID：15683635
> 
> 赞同：3
> 
> 时间：2013-03-28T13:50:36.377
> 
> 标签：c#, wpf, c#-4.0, visual-studio-2012

我在这个窗户上有一个窗户和一个框架。框架在页面中导航并进入此页面，我有一个按钮。该页面是动态创建的，所以我想在页面中添加一个按钮 onclick 事件，允许我将新页面导航到窗口框架中。

我正在谷歌上写关于自定义事件的文章，它可以允许我在与窗口中的事件相关的页面中引发事件。

你能帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:42:22.987

如果我理解正确，您想使用`event`?从一个页面导航到另一个页面。

如果是这种情况，请查看下面的以下链接 - 这些链接将使您更好地了解如何通过提供示例和示例应用程序的 WPF 应用程序进行导航。

[如何构建、管理和导航 WPF 应用程序的用户界面](http://code.msdn.microsoft.com/How-to-Build-Manage-and-fdd0074a)

[简单导航](http://www.paulstovell.com/wpf-navigation)

这就是我实现它的方式。在应用程序背后的代码中，执行类似这样的操作来帮助导航到单击事件的下一页；

```
private void btnClick_HomeClick(object sender, RoutedEventArgs e)
{
     FrameContent.Navigate(new ExampleView()); //FrameContent is the name given to the frame within the xaml.
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-24T15:17:02.413

我猜这里的场景是他有一个带框架的窗口，并且导航方法也在这个窗口中。

您可以做的是将您的窗口传递给那些动态创建的页面。

```
//Main Window
public class MainWindow
{
   public void NavigatePage(Page page)
   {
      YourFrameInstance.Navigate(page)
   }
 }

//Your Page
public class Page
{
    private readonly Window _mainWindow;

    public Page(Window mainWindow)
    {
       _mainWindow = mainWindow;
    }

    void Button_Click(object sender, RoutedEventArgs e)
    {
        var page = new Page(_mainWindow);
        _mainWindow.NavigatePage(page);
    }
 } 
```

# algorithm - 哲学家晚餐的叉子是固定的吗？

> ID：15683638
> 
> 赞同：0
> 
> 时间：2013-03-28T13:50:44.657
> 
> 标签：algorithm, dining-philosopher

哲学家晚餐是一个经典的并发问题。请参阅[此处](http://en.wikipedia.org/wiki/Dining_philosophers_problem)的说明。在[导体解决方案](http://en.wikipedia.org/wiki/Dining_philosophers_problem#Conductor_solution)中，叉子放回特定位置或只是放入一般堆中。那么任何哲学家的左叉都会是同一个左叉吗？或者随着晚上的进行，它可以是一个不同的叉子吗？

# javascript - 使用 Javascript 检查给定 HTML 元素中是否存在子元素

> ID：15683639
> 
> 赞同：2
> 
> 时间：2013-03-28T13:50:56.673
> 
> 标签：javascript, html, dom, xhtml

我正在尝试编写一个纯 javascript 函数，该函数将从页面中获取一个元素（通常是 <div>），然后从那里计算出它是否具有任何*特定的*子元素。本质上是任何表示文本内容的标签，so:`<p>`或任何标题标签 so ( `<h1>`.. `<h6>`) 或列表等。

我不想操纵这些元素只是检查它们的存在。

所以函数将采用以下形式

```
/**
 * Takes an element and returns whether
 * the element contains content
 * @return boolean (true/false)
 */
var isContent = function (elementToCheck) {

}; 
```

我目前正在使用`document.getElementsByTagName('div')`获取`<div>`页面的所有元素。然后，我将一次将它们解析为函数。

我目前已经把它搞定了

```
var isContent = function (elementToCheck) {
    if (elementToCheck.hasChildNodes()) {
        var children = elementToCheck.childNodes;

        for (var i = 0; i < children.length; i++) {
            // handle children[i]
        }
   }
} 
```

我一直在尝试使用`chilren[i].nodeValue`和测试各种事物的相等性，但我无法让它们中的任何一个通过。

进行此操作的最佳方法是什么？我认为它正在变成一个混乱的功能，因为我必须将所有元素放在此之外，循环它们并在此处解析它们，然后执行另一个循环。我开始怀疑是否可以使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:52:49.993

如果您想要找到`<div>`至少具有一个具有非空内容模型的子节点的所有元素，那么在所有浏览器（包括）IE8 中都可以使用类似的方法：

```
function findDivWithContents() {
  var allDivs = document.getElementsByTagName('div');
  var di, divs = [];
  for (di = 0; di < allDivs.length; ++di) {
    if (allDivs[di].querySelectorAll('p, span, h1, h2, h3, h4, ... ').length > 0)
      divs.push(allDivs[di]);
  return divs;
} 
```

这用于`.querySelectorAll()`查找您的容器元素。（当然，您必须完成清单。）

*或者，您可以向后进行编辑*：遍历您感兴趣的所有容器类型元素，并检查它们的父级是否为`<div>`：

```
function findTheDivs() {
  var containers = document.querySelectorAll('p, span, div, h1, h2, h3, ... ');
  var i, divs = [];
  for (i = 0; i < containers.length; ++i) {
    if (containers[i].parentNode.tagName === 'DIV')
      divs.push(containers[i].parentNode);
  return divs;
} 
```

我认为这可能更有效。（可能需要为每个添加一个无意义的“类”标记，`<div>`以避免将其多次添加到列表中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:56:53.187

尽管 Pointy 提到了一个对我来说很新的函数`querySelectorAll()`，它可能会让你切断`containsTextElements`循环，但我对此感到很高兴。

```
var textTags = ["h1", "h2", "h3", "h4", "h5", "h6", "p"];

var containsTextElements = function(elementToCheck) {

    for (var i = 0; i < textTags.length; i++) {
        if(elementToCheck.getElementsByTagName(textTags[i]).length > 0)
            return true;    
    }
    return false;
}

var doStuffToDivsWithText = function(callback) {

    var divs = document.getElementsByTagName("div");
    for(var i = 0; i < divs.length; i++ ) {
        if(containsTextElements(divs[i]))
            callback(divs[i]); 
    };
}

doStuffToDivsWithText(function(div) {
    console.log(div.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:59:47.200

这样您就不需要 jQuery，不需要（但可以）指定您想要的文本内容的标签，并且可以将正则表达式应用于找到的文本。

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    function logTextContent(elem) {
    var childNodes = elem.childNodes;
    for(var i=0; i<childNodes.length; i++) {
        var nodex = childNodes[i];
        if(nodex.nodeType == 3 /* text node */) {
        var textContent = nodex.nodeValue;
        if(textContent.match(/\S+/) /* apply regex */) {
            console.log("found text: "+textContent);
        }
        }
        else if (nodex.nodeType == 1 /* element node*/) {
        logTextContent(nodex)
        }
    }
    }
    function findDocumentTexts() {
    var docElems = document.getElementsByTagName("body");
    for(var i=0; i<docElems.length; i++) {
        var elem = docElems[i];
        logTextContent(elem);
    }
    }
</script>
</head>
<body>
<button onclick="findDocumentTexts()">find document texts</button>
<!-- I will fail -->
<div>
    <!-- I will pass -->
    <div>
    <h1>Heading</h1>
    <p>
        I should be found straight away
    </p>
    </div>
    <!-- I will fail -->
    <div>
    <!-- I will pass -->
    <div>
        <p>
        I will be missed by the first div but found by the second
        </p>
    </div>
    </div>
</div>
</body>
</html> 
```

# jsf - primefaces 扩展形式。保存或加载后清除表格

> ID：15683640
> 
> 赞同：0
> 
> 时间：2013-03-28T13:51:00.700
> 
> 标签：jsf, primefaces, primefaces-extensions

我已经使用此处显示的组件构建了一个 primefaces 扩展向导，例如带有步骤的表单：

[http://fractalsoft.net/primeext-showcase-mojarra/sections/masterDetail/wizardLikeNavigation.jsf](http://fractalsoft.net/primeext-showcase-mojarra/sections/masterDetail/wizardLikeNavigation.jsf)

我的后台 bean 是 View Scoped 但是当我完成这些步骤并保存表单时，在后续表单加载时它不会被刷新清除（我在第一次提交表单时选择的值仍然存在）......

我的命令按钮位于我的向导面板代码的末尾，如下所示：

```
<h:form id="WizardForm">            
<pe:masterDetail id="masterDetail" level="#{reviewWizard.currentLevel}" showBreadcrumb="false" style="margin-top:20px"> 
    <f:facet name="header">
    ...
    </f:facet>
    <pe:masterDetailLevel level="1">        
    <p:dataTable id="patients" var="patient"
                value="#{reviewWizard.cRImageDataListPatients}"
                selection="#{reviewWizard.selectedPatients}" rowKey="#{patient}"
                paginator="true" rows="10" paginatorAlwaysVisible="false"
                emptyMessage="No records found" >
        <p:ajax event="rowToggle" listener="#{reviewWizard.onRowToggle}"
                update=":WizardForm:patients:selectedPatientImages" />
        <f:facet name="header"> 
            Select one or many images using the checkboxes and press &quot;Next&quot; button to proceed.  
        </f:facet>
        <p:column selectionMode="multiple" style="width:18px" styleClass="mandara"/>
        <p:column style="width:18px">
        <p:rowToggler />
        </p:column>
        <p:column headerText="Patient ID">  
        #{patient}  
        </p:column>                     
            <p:rowExpansion>
            <p:dataTable id="selectedPatientImages" var="cRImageData"
                    value="#{reviewWizard.getSelectedPatientImages()}"
                    rowKey="#{cRImageData.imId}" emptyMessage="No records found"
                    style="padding:10px 40px;">
                <p:column headerText="Image Name">  
                #{cRImageData.imName}  
                </p:column>
                <p:column headerText="Image Type">  
                #{cRImageData.imType}  
                </p:column>
                ...                 
            </p:dataTable>
            </p:rowExpansion>
            ...
            </p:dataTable>
        <p:commandButton value="Next" process="masterDetail" style="margin-top: 10px;" icon="ui-icon-arrowthick-1-e">
        <pe:selectDetailLevel step="1"/>
        </p:commandButton>
    </pe:masterDetailLevel>
    <pe:masterDetailLevel level="2">
    ... 
    </pe:masterDetailLevel>
    <pe:masterDetailLevel level="3">
    ...
    </pe:masterDetailLevel>    
    <pe:masterDetailLevel level="4">        
        ...
    </pe:masterDetailLevel>
    <pe:masterDetailLevel level="5">        
            <p:panel header="Confirmation">            
            <p:panel style="border:none;">
                <h:outputText value="Selected Patients: " style="font-weight:700;"/>
                <h:outputText value="#{reviewWizard.getSelectedPatiensString()}" />
            </p:panel>      
            <p:panel style="border:none;">      
                    <h:outputText value="Selected Features: "  style="clear:left;font-weight:700;"/>
                    <h:outputText value="#{reviewWizard.getSelectedFeaturesString()}" />
            </p:panel>      
            <p:panel style="border:none;">
                    <h:outputText value="Selected Reviewers: "  style="clear:left;font-weight:700;"/>
                    <h:outputText value="#{reviewWizard.getSelectedReviewersString()}" />
            </p:panel>      
            <p:panel style="border:none;">
                    <h:outputText value="Protocol Description: "  style="clear:left;font-weight:700;"/>
                    <h:outputText value="#{reviewWizard.getReviewProtocolDesc()}" />
            </p:panel>        
                   <p:commandButton value="Back" style="margin-top: 10px;" icon="ui-icon-arrowthick-1-w"  
                     process="@this" immediate="true">  
                        <pe:selectDetailLevel step="-1"/>  
                   </p:commandButton>  
                   <p:commandButton value="Submit" process="masterDetail"  
                     actionListener="#{reviewWizard.save}"  
                     style="margin-top: 10px;" icon="ui-icon-disk">
                        <pe:selectDetailLevel level="1" resetInputs="@all"/>  
                    </p:commandButton>        
             </p:panel>
    </pe:masterDetailLevel> 
</pe:masterDetail>          
</h:form> 
```

还有我的后备豆（在“保存”操作结束时创建新的空对象，如 primefaces extensions 相关示例中所建议的那样）：

```
ManagedBean(name = "reviewWizard")
@ViewScoped
public class ReviewWizard implements Serializable {

private static final long serialVersionUID = -7410916604435445849L;

private List<String> cRImageDataListPatients;
private List<CRImageData> cRImageDataListPatientImages;
private CRImageData[] selectedImages;
private String[] selectedPatients;

private List<CRVariable> availableCRVariables;  
private CRVariable[] selectedVariables;

private CRReviewProtocol reviewProtocol;
private String reviewProtocolDescription;

private List<User> availableReviewers;
private User[] selectedReviewers;

private List<CRReviewerData> availableReviewersInternal;
private CRReviewerData[] selectedReviewerInternal;

private CRTask[] cRTask;

private int currentLevel = 1;   

// Logger   
private static Logger logger = Logger.getLogger(ReviewWizard.class.getName());
private static final String SUCCESS = "success";
private static final String ERROR   = "error";

//on report form load do
@SuppressWarnings("unchecked")
@PostConstruct
public void init(){

    //call SOAP service to UPM to fetch patients
    CallWebService callWebService = new CallWebService();
    cRImageDataListPatients = callWebService.call("PatientIds");

    availableCRVariables = getCRVariables();

    // Set selectedImages to avoid null pointer exceptions
    selectedImages = new CRImageData[0];
    selectedPatients = new String[0];
    selectedVariables = new CRVariable[0];

    try {
        availableReviewers = getReviewers();
        } catch (PortalException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }

    selectedReviewers = new User[0];                
    reviewProtocolDescription = new String() ;
    setSelectedReviewerInternal(new CRReviewerData[0]);
}

//on save report form do
public void save(ActionEvent actionEvent) {
    String result = null;       

    List<CRVariable> mySelectedVariables = Arrays.asList(selectedVariables);
    List<String> mySelectedPatients = Arrays.asList(selectedPatients);
    List<User> mySelectedReviewers = Arrays.asList(selectedReviewers);
    List<CRReviewerData> mySelectedReviewersInternal = transformLusers(mySelectedReviewers);        

    Date now = new Date();

    Session session = HibernateUtil.getSessionFactory().openSession();

    CRReviewProtocol reviewProtocol = new CRReviewProtocol();

    reviewProtocol.setRevProtDescription(this.getReviewProtocolDescription());      
    reviewProtocol.setCrimagedata(mySelectedPatients);
    reviewProtocol.setCrvariables(mySelectedVariables);     
    reviewProtocol.setcRReviewerData(mySelectedReviewersInternal);

    Transaction tx = null;
    try 
    {
        tx = session.beginTransaction();
        session.save(reviewProtocol);
        tx.commit();
        logger.debug("New Record :" + reviewProtocol + ", wasCommitted : " + tx.wasCommitted());
        result = SUCCESS;
    } 
    catch (Exception e) 
    {
        if (tx != null) 
        {
            tx.rollback();
            result = ERROR;
            e.printStackTrace();
        }
    } 
    finally 
    {
       //session.close();
    }

    infoMsg("Successful", "The Review Protocol has been succesfully created!");

    for(int j=0;j<mySelectedPatients.size();j++){

        System.out.println(">>>> For patient " + j + " with id " + mySelectedPatients.get(j));
        List<CRImageData> patientImages = getPatientImages(mySelectedPatients.get(j));

        for (int k=0;k<patientImages.size();k++){

            System.out.println(">>> For image with id " + patientImages.get(k).getImId());

            for(int i=0;i<mySelectedReviewersInternal.size();i++){

                System.out.println(">>>> For reviewer with id: " + mySelectedReviewersInternal.get(i).getUserEmail());

                CRTask cRTask = new CRTask();

                cRTask.setcRReviewProtocol(reviewProtocol);
                cRTask.setStatus("Open");
                cRTask.setDescription("Default description");
                cRTask.setCreationDate(now);
                cRTask.setReviewerId(mySelectedReviewersInternal.get(i).getUserId());
                cRTask.setPatientId(mySelectedPatients.get(j));
                cRTask.setImageId(patientImages.get(k).getImId());

                System.out.println(">>>>> task object created");

                try 
                {
                    tx = session.beginTransaction();
                    session.save(cRTask);
                    tx.commit();
                    logger.debug("New Record :" + cRTask + ", wasCommitted : " + tx.wasCommitted());
                    result = SUCCESS;
                } 
                catch (Exception e) 
                {
                    if (tx != null) 
                    {
                        tx.rollback();
                        result = ERROR;
                        e.printStackTrace();
                    }
                }
        }
        }
    }
    //}
    //finally 
    //{
       session.close();
    //}

    //create an empty review protocol   
    CRImageData[] selectedImages = new CRImageData[0];
    String[] selectedPatients = new String[0];
    CRReviewProtocol reviewProtocol1 = new CRReviewProtocol();
    ReviewWizard reviewWizard = new ReviewWizard(); 
    currentLevel=1;     
}

public ReviewWizard(){  

}

//method to transform user object to crreviewerdata
public List<CRReviewerData> transformLusers(List<User> selectedReviewers){

    List<CRReviewerData> selectedReviewersInternal = new ArrayList<CRReviewerData>();

    for(int i=0;i<selectedReviewers.size();i++){

        CRReviewerData selectedReviewerInternal = new CRReviewerData();
        selectedReviewerInternal.setUserId(selectedReviewers.get(i).getUserId());
        selectedReviewerInternal.setUserFname(selectedReviewers.get(i).getFirstName());
        selectedReviewerInternal.setUserLname(selectedReviewers.get(i).getLastName());
        selectedReviewerInternal.setUserEmail(selectedReviewers.get(i).getEmailAddress());
        selectedReviewersInternal.add(selectedReviewerInternal);            
    }       
    return selectedReviewersInternal;   
} 
```

关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:56:16.740

编辑：

您正在该变量中创建新的空对象，`reviewProtocol = new CRReviewProtocol();`该变量仅在您的`save(ACtionEvent actionEvent)`方法范围内可见。

如果您在链接中的示例中看到类似的内容，则应该具有以下内容：

```
<p:inputText required="true" label="Firstname" value="#wizardMasterDetailController.user.firstname}"/> 
```

您必须设置`user = new User()`它才能重置它。在这种情况下，用户是一个类变量，你是如何调用的，那是你必须重置的变量。

请发布更多您的面板以更好地帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:52:58.640

通过在保存操作的底部设置我选择的变量来解决问题，例如：

```
...
//create an empty review protocol
ReviewWizard reviewWizard = new ReviewWizard();     
setSelectedImages(null);
setSelectedPatients(null);
setSelectedVariables(null);
setSelectedReviewers(null);
setReviewProtocolDescription(null);
currentLevel=1;
... 
```

# android - 在android中持久化数据的最佳方法是什么？

> ID：15683643
> 
> 赞同：0
> 
> 时间：2013-03-28T13:51:07.270
> 
> 标签：android

在我的 android 应用程序中，我想在系统终止或强制停止我的活动或进程时保留一些信息。Bundle 和 sqlite 数据库中哪个是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:52:18.740

> 当系统终止或强制停止我的活动或进程时，我想保留一些信息。

你不能。当系统强制停止您的应用程序时，它会被简单地杀死。不调用回调。

每当调用 Activity 的 onPause() 方法时，您都应该保留数据。

对于简单的 int、String 等值，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。对于更有组织或更大的数据集，您应该使用[SQLite 数据库](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:53:16.557

这取决于您要维护的数据。对于一些配置信息或单个变量，只需使用 Bundle。SQlite 更复杂，但允许使用 Bundle 进行科学搜索和数据编辑。一般来说，除非需要，否则使用 Bundle。显然，Bundle 的使用不是自动的，您必须在应用程序被终止之前，在 onDestroy() 或 onPause() 中将数据写入其中。它旨在正确地保存从一次运行到另一次运行相同活动的动态数据。在最简单的情况下，对于少数字符串或整数，如果您想持久保存数据，您应该选择第三个选项，SharedPreferences。

# mysql - MySql 可以悄悄地放弃外键失败的插入吗？

> ID：15683649
> 
> 赞同：5
> 
> 时间：2013-03-28T13:51:14.537
> 
> 标签：mysql, sql

我正在执行`INSERT INTO Foo VALUES (a, b, c, ...)`，有时 , 等之一`a`不满足`b`外键约束。

在这种情况下，我希望插入不会发生并且不会产生错误。

我可以在单个语句中执行此操作，还是必须单独执行`IF EXISTS`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:53:23.983

是的，使用[ignore](http://dev.mysql.com/doc/refman/5.5/en/insert.html)关键字：

```
INSERT IGNORE INTO `foo` (...) VALUES (...); 
```

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。

另一方面，如果您的担心是由于您在父母行之前插入孩子，您也可以在插入父母后禁用约束并启用它们：

```
SET FOREIGN_KEY_CHECKS=0;

-- do your inserts not caring about foreign keys

SET FOREIGN_KEY_CHECKS=1; 
```

但这只有在您*知道*自己尊重数据完整性的情况下。

* * *

在旁注中，我认为值得添加有关在 mysql 网站中找到的[延迟约束的评论：](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

> 与一般的 MySQL 一样，在插入、删除或更新许多行的 SQL 语句中，InnoDB 逐行检查 UNIQUE 和 FOREIGN KEY 约束。在执行外键检查时，InnoDB 在它必须查看的子记录或父记录上设置共享行级锁。InnoDB 立即检查外键约束；检查不推迟到事务提交。根据 SQL 标准，默认行为应该是延迟检查。也就是说，仅在处理完整个 SQL 语句后才检查约束。在 InnoDB 实现延迟约束检查之前，有些事情是不可能的，例如删除使用外键引用自身的记录。

我们知道 MySQL innoDB 将来也可能会实现这个特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:09:46.833

如果您可以完全控制插入的 SQL 结构，则可以尝试以下操作：

```
insert into Foo (a, b, c)
select
    x.a,
    x.b,
    x.c
from 
    (select
        101 as a,
        202 as b,
        'ABC123' as c
    from dual ) x
    inner join other_table y
        on x.b = y.pkid 
```

在这种情况下，由于您正在对数据及其父表执行内连接，如果您的数据中的外键值在主表中没有对应的值，则不会插入任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T18:39:51.750

最好的方法是使用：

```
INSERT INTO table (col1, col2) SELECT val1, val2 FROM table2 WHERE val3 = 123 
```

当`WHERE`部分结果为`false`整个时`INSERT`，不执行。同时`SELECT val1, val2`可以包含任何你想要的子查询。

在您的情况下，您可能会检查`WHERE`条件中是否存在外键。

有关更详细的说明，请参阅[MySQL INSERT IF（自定义 if 语句）](https://stackoverflow.com/questions/6854996/mysql-insert-if-custom-if-statements)。

# objective-c - 动态创建 uitextfield 的屏幕位置

> ID：15683650
> 
> 赞同：0
> 
> 时间：2013-03-28T13:51:18.580
> 
> 标签：objective-c, uitextfield

我正在开发一个 iphone 应用程序作为一个新手。我像动态创建 UItextFields

```
for (int i = 0; i <= currentAnswerLen; i++) {
    [textField4 setTag:i];
    textField4 = [[UITextField alloc] initWithFrame:CGRectMake((50 + (i * 40)), 180, 30, 35)];
etc.......
} 
```

问题是，当我单击字段键盘时，会出现文本字段并且看不到文本字段。键盘出现在他们身上。键盘出现时如何更改文本字段的位置？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:35:15.863

在您的 Xib 中添加一个 UIScrollView 并建立 IBOutlet 连接，以添加您动态创建的所有标签。我对你的代码做了一些修改。它工作正常。

```
-(void)setAnswerField
{
    int len = 10;
    int commonSpace = 20;
    for (int i=0;i<=len;i++)
    {
        if(i != 0)
            commonSpace += 40;
        textF=[[UITextField alloc] initWithFrame:CGRectMake(((i * 60))+commonSpace,180,60,35)];
        [textF setTag:i];
        [textF setDelegate:self];
        [textF setReturnKeyType:UIReturnKeyDone];
        [textF setBackgroundColor:[UIColor grayColor]];
        [textF addTarget:self action:@selector(textFieldFinished:) forControlEvents:UIControlEventEditingDidEndOnExit];
        textF.clearButtonMode=UITextFieldViewModeWhileEditing;
        [textF addTarget:self action:@selector(keyDown:)forControlEvents:UIControlEventEditingDidEndOnExit];
        [_textfieldsScrollView addSubview:textF];
    }

     _textfieldsScrollView.contentSize=CGSizeMake(1000, 500);
} 
```

在单击文本字段 textViewDidBeginEditing 方法 fire 时，只需像这样更改内容偏移值。

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{

        [_textfieldsScrollView setContentSize:CGSizeMake(320, 400)];
        [_textfieldsScrollView setContentOffset:CGPointMake(0, 100) animated:YES];

} 
```

之后像这样恢复到原来的位置。

```
- (void)textViewDidEndEditing:(UITextView *)textView
{
    //Back to normal state. 
    [_textfieldsScrollView setContentOffset:CGPointMake(0, 0) animated:YES];    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:49:15.663

在您的界面中添加此变量

```
@interface example : UIViewController
{
    CGFloat animatedDistance;

} 
```

在你的实现类中添加这个

```
static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 216;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 162; 
```

然后添加这两个委托方法

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];

    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator = (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

} 
```

然后只需记住设置您的 textField 委托。

# android - android结合2个位图而不在画布上绘制它们

> ID：15683654
> 
> 赞同：2
> 
> 时间：2013-03-28T13:51:35.113
> 
> 标签：android, canvas, reference, bitmap

我的名字是约翰，我有一个问题。我需要从 2 个位图 1 制作而不在画布上绘制它们。正如我在可能的网上看到的那样[http://www.jondev.net/articles/Combining_2_Images_in_Android_using_Canvas](http://www.jondev.net/articles/Combining_2_Images_in_Android_using_Canvas)他们使用画布来捕获图像。我不想绘制它们的原因是因为我需要使用这个 bmp 作为参考来对其他图像做一些效果。在此先感谢。抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:25:37.010

我不太确定我是否 100% 理解了这个问题，但是是否不可能创建您需要参考的效果的位图的克隆。然后使用克隆的位图在画布上绘制，同时保留对原始的引用以用于您的效果？

如果我错过了您的问题的重点，希望这会有所帮助和抱歉。

# android - 调用 HP ePrint Android 应用程序

> ID：15683657
> 
> 赞同：5
> 
> 时间：2013-03-28T13:51:42.323
> 
> 标签：android

我正在开发一个应该调用 android HP ePrint 应用程序进行无线打印的 android 应用程序。为此，我正在使用代码：

```
Intent intent = new Intent("com.hp.android.print.PRINT");
intent.setPackage("com.hp.android.print");

startActivityForResult(intent, 0);
```

我很确定我没有正确执行 Intent 的操作...有人知道调用此 HP ePrint 应用程序的正确操作是什么吗？以及如何将确切的文件传递给打印（intent.putExtra（...））。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T13:05:31.023

10个多小时后，我设法找到了解决方案。调用 HP ePrint 应用程序的正确代码如下：

```
    Uri uri = Uri.fromFile( f );
    Intent intent = new Intent ("org.androidprinting.intent.action.PRINT");
    intent.setDataAndType(uri, "text/plain" );
    context.startActivityForResult(intent, 0);

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T00:21:08.873

在我的 android 5.0.1 应用程序创建 JPEG 文件后，我使用以下代码启动无线打印操作（通过 HP ePrint 3.4 版）：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
Uri uri = Uri.fromFile(new File("something.jpg"));
intent.setDataAndType(uri, "image/*");
activity.startActivity(intent); 
```

代码运行良好，但每次打印时，我都必须手动将纸张尺寸设置为“A4”，将纸张类型设置为“普通”。（默认为“照片”。）

我会对有关如何将 Intent 参数传递给 HP ePrint 的文档非常感兴趣。

# makefile - Cygwin 使依赖项失败

> ID：15683659
> 
> 赞同：0
> 
> 时间：2013-03-28T13:51:43.317
> 
> 标签：makefile, dependencies, cygwin

我使用的是 Windows 7，并且命令 make dependencies 在 CYGWIN 中失败。'make' 工作并显示可用目标的完整列表。make clean 工作而不产生错误消息。其余的都失败了，错误是：

```
$ make dependencies
Installing depencies
make: Rscript : commande introuvable
../Makefile:39: recipe for target `dependencies' failed
make: *** [dependencies] Error 127 
```

我已经仔细检查了我所有的环境变量，PATH 和 CYGWIN_HOME 等，仍然无法正常工作。非常感谢遇到相同问题的人的任何建议。

# c# - 如何在 MVC4 中使用 XSD 作为 ReportViewer 数据源？

> ID：15683661
> 
> 赞同：0
> 
> 时间：2013-03-28T13:51:45.957
> 
> 标签：c#, asp.net-mvc, entity-framework, reportviewer

我的 MVC4 项目中有一份报告 (rdlc)。我能够添加以显示它，但仍然出现以下错误：

```
A data source instance has not been supplied for the data source 
```

如何使用我创建的 XSD 作为 rdlc 的数据源？XSD 拉起多个存储过程。

# prolog - AI Prolog 练习

> ID：15683665
> 
> 赞同：-3
> 
> 时间：2013-03-28T13:52:02.340
> 
> 标签：prolog, artificial-intelligence

这是以下问题：

对于这个问题，我们考虑二叉表达式树，其叶子要么是`tree(empty, Num, empty)`Num 是数字的形式，要么`tree(empty, z, empty)`在这种情况下我们会将字母 z 视为一种“变量”。

每棵树要么是叶子，要么是`tree(L, Op, R)`L 和 R 是左子树和右子树的形式，Op 是算术运算符“+”、“-”、“*”、“/”之一（表示加法、减法、乘法和除法）。

编写一个谓词`tree_eval(Value, Tree, Eval)`，将 Eval 绑定到表达式树树的计算结果，变量 z 设置为等于指定的值。例如：

```
?- tree_eval(2, tree(tree(empty,z,empty),
             '+',tree(tree(empty,1,empty),
                  '/',tree(empty,z,empty))), Eval).
Eval = 2.5 ;
false.

?- tree_eval(5, tree(tree(empty,z,empty),
             '+',tree(tree(empty,1,empty),
                  '/',tree(empty,z,empty))), Eval).
Eval = 5.2 ;
false. 
```

一些好主意？

我们可以在不使用 cut(!) 的情况下实现它吗？

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:37:07.343

在寻求帮助之前，您甚至不会尝试解决它，这是一种耻辱。

您的问题几乎直接转化为解决方案。当树中间有一个 Num 时：

```
tree_eval(_Value, tree(empty,Num,empty), Num). 
```

当有变量时：

```
tree_eval(Value, tree(empty,z,empty), Value). 
```

一般情况：

```
tree_eval(Value, tree(tree(LL,LOp,LR),Op,tree(RL,ROp,RR)), Eval) :-
    tree_eval(Value, tree(LL,LOp,LR), LEval),
    tree_eval(Value, tree(RL,ROp,RR), REval),
    Expr =.. [Op,LEval,REval], % is there an easier way to do this?
    Eval is Expr. 
```

现在你注意到了，这个解决方案没有任何削减。它们不是必需的，因为一次只能三个子句中的一个为真。然而，对于其中一个条款，我想不出一种方法来使头部明确。[这](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.6%27,swi%28%27/doc/Manual/typetest.html%27%29%29)可能会有所帮助。

# java - 生成唯一的位数

> ID：15683667
> 
> 赞同：1
> 
> 时间：2013-03-28T13:52:06.287
> 
> 标签：java, string, random, concatenation

下面的代码编译得很好，但它们不会生成位数

```
ganerateNewRandom("aaaa", 3) 
```

结果将是`aaa435`。

下面的代码编译得很好，但它们不会生成位数

```
import java.util.*;

public class Student
{
    private String studentId;

    private String name;

    private Random random;

    public Student( String name)

    {
        studentId = "UnKnow";

        this.name = name;

        random = new Random();

    }

    public String ganerateNewRandom(String prefix, int number)

    {

        int index = random.nextInt(number);

        return prefix + number + "";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:57:19.123

```
 public String ganerateNewRandom(String prefix, int number) {  //sic

    StringBuffer ret = new StringBuffer(prefix);

    for(int i=0;i<number;i++) ret.append(random.nextInt(1000));

    return ret.toString();

} 
```

在您上面引用的情况下，nextInt(3) 将返回 0、1 或 2。没有您要查找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:00:16.163

状态API [`Random.nextInt(int n)`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)：

> 返回介于 0（包括）和指定值（不包括）之间的伪随机、均匀分布的 int 值

如果要生成 3 个随机数，请创建一个`for-loop`以附加`n`生成数字`Random`并将其附加到`prefix`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:28:32.573

可能值得`String.format`在这里使用：

```
static private Random random = new Random();

public static String ganerateNewRandom(String prefix, int digits) {
  return String.format("%s%03d", 
                       prefix, 
                       random.nextInt((int)Math.pow(10, digits)));
} 
```

笔记：

*   参数 to`random.nextInt`是上限，而不是位数。你需要`10^digits`得到你想要的号码。
*   使用`%03d`将为您填充任何小于 100 的数字。

# android - PostEcecute 上的 CustomAdapter java.lang.NullPointerException

> ID：15683669
> 
> 赞同：0
> 
> 时间：2013-03-28T13:52:11.150
> 
> 标签：android, list, listview, ui-thread, custom-adapter

我有一个应用程序，它从数据库中检索数据并使用 CustomListView 显示它。当应用程序要显示 ListView 时，它会因以下日志而崩溃：

```
 03-28 13:22:16.963: E/AndroidRuntime(853): java.lang.NullPointerException
03-28 13:22:16.963: E/AndroidRuntime(853):  at com.gabriele.tesina.Leggi_Pizzaiolo$LoadAllProducts$1.run(Leggi_Pizzaiolo.java:162)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.app.Activity.runOnUiThread(Activity.java:4644)
03-28 13:22:16.963: E/AndroidRuntime(853):  at com.gabriele.tesina.Leggi_Pizzaiolo$LoadAllProducts.onPostExecute(Leggi_Pizzaiolo.java:156)
03-28 13:22:16.963: E/AndroidRuntime(853):  at com.gabriele.tesina.Leggi_Pizzaiolo$LoadAllProducts.onPostExecute(Leggi_Pizzaiolo.java:1)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.os.AsyncTask.finish(AsyncTask.java:631)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.os.Looper.loop(Looper.java:137)
03-28 13:22:16.963: E/AndroidRuntime(853):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-28 13:22:16.963: E/AndroidRuntime(853):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 13:22:16.963: E/AndroidRuntime(853):  at java.lang.reflect.Method.invoke(Method.java:511)
03-28 13:22:16.963: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-28 13:22:16.963: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-28 13:22:16.963: E/AndroidRuntime(853):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我遇到问题的活动：

```
public class Leggi_Pizzaiolo extends Activity
{
    // Progress Dialog
    private ProgressDialog pDialog;
    public List list = new LinkedList();
    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://10.0.2.2/tesina/Leggi_Pizzaiolo.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "Esito";
    private static final String TAG_PRODUCTS = "comande";
    private static final String TAG_PID = "ID";
    private static final String TAG_NAME = "Nome";
    private static final String TAG_TABLE = "Tavolo";
    public ListView lv;
    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ordini_cuoco);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        lv = (ListView)findViewById(R.id.listView1);

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> 
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Leggi_Pizzaiolo.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);
                        int Tavolo= c.getInt(TAG_TABLE);

                        list.add(new Comanda(name, id, Tavolo));

                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            Listino.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) 
        {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating listview
            runOnUiThread(new Runnable() 
            {
                public void run() 
                {
                    Context context = getApplicationContext();
                    ComandaCursorAdapter adapter = new ComandaCursorAdapter(context, R.layout.comanda_cuoco, list);
                    lv.setAdapter(adapter);
                }
            });

        }

    }

} 
```

和 CustomAdapter Comanda：

```
public class ComandaCursorAdapter extends ArrayAdapter<Comanda>
{

    public ComandaCursorAdapter(Context context, int comandaCuoco, List list) {
        super(context, comandaCuoco, list);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.comanda_cuoco, null);

        TextView Nome = (TextView)convertView.findViewById(R.id.Comanda);
        TextView Tavolo = (TextView)convertView.findViewById(R.id.Tavolo);
        TextView Codice = (TextView)convertView.findViewById(R.id.Codice);

        Comanda c = getItem(position);

        Nome.setText(c.getNome());
        Tavolo.setText(c.getTavolo());
        Codice.setText(c.getCodice());

        return convertView;

    }

} 
```

我在 Google 上搜索过，如果您需要显示视觉对象，则 UI Thread 是必要的，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:55:49.180

起初不需要显式调用[`runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)，因为 onPostExecute() 已经与 UI 线程同步。

然后我认为你正在**`NPE`**这条线上：

```
Context context = getApplicationContext(); 
```

其中上下文分配给**`NULL`**。由于您`AsyncTask`是 Activity 类的内部类，因此您无需调用 getApplicationContext()。在其他情况下，您也不应该调用它，还有更好的方法。Activity 扩展自 Context，因此您可以简单地使用返回 Context 的**ActivityName.this**。

所以用这条线改变你的：

```
new ComandaCursorAdapter(Leggi_Pizzaiolo.this, R.layout.comanda_cuoco, list); 
```

现在它应该可以工作了。让我知道。

## 更新：

> 按照您的建议完成，NPE 现在位于 lv.setAdapter(adapter)

现在，很可能您的 ListView 已分配给**`NULL`**. 我认为您应该在执行 AsyncTask 之前对其进行初始化：

```
lv = (ListView)findViewById(R.id.listView1);
new LoadAllProducts().execute(); 
```

# jquery - ClientScriptManager 在加载客户端脚本后稍后加载脚本

> ID：15683675
> 
> 赞同：3
> 
> 时间：2013-03-28T13:52:20.870
> 
> 标签：jquery, web-controls, client-side-scripting

我正在创建一个自定义 web 控件，在该控件的 OnPreRender 中像这样注册 Jquery 脚本

> clientScriptManager.RegisterClientScriptResource(typeof(mycontrol), "jquery")

在我的 aspx 脚本中，我使用的是 jquery 函数。

```
<script type="text/javascript">

        $(document).ready(function () { });
  </script> 
```

它显示`$ is undifined`，当控件来到客户端脚本时，js 没有加载。

这有什么方法可以在客户端脚本加载之前注册脚本文件？

# internet-explorer - Internet Explorer 中的 Worklight MBS 未正确显示

> ID：15683676
> 
> 赞同：0
> 
> 时间：2013-03-28T13:52:21.417
> 
> 标签：internet-explorer, ibm-mobilefirst

当我通过 Internet Explorer v8 使用 Worklight 的 MBS（移动浏览器模拟器）或 RPE（富页面编辑器）时，图像和其他内容无法正确显示或根本无法显示。是否有关于在 Internet Explorer 上运行 Worklight MBS 的设置或一些信息？我有 Worklight 5.0.5 和 5.0.6 环境。谢谢！

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:55:07.337

根据 IBM 文档，[IE 不是 MBS 支持的浏览器](http://publib.boulder.ibm.com/infocenter/radhelp/v8r5/index.jsp?topic=/com.ibm.etools.webtoolscore.doc/topics/cmbs.html)。只有 Firefox 3.6+ 和 Chrome 17+。

至于 RPE，[请参阅文档](http://publib.boulder.ibm.com/infocenter/radhelp/v8r5/index.jsp?topic=%2Fcom.ibm.etools.rpe.doc%2Ftopics%2Ftrpebrowsersupport.html)。添加屏幕截图以及用于图像的标记和 CSS。也许那里有什么不对劲。

# mysql - 如果一个查询等待另一个查询持有的锁，死锁是如何发生的

> ID：15683679
> 
> 赞同：1
> 
> 时间：2013-03-28T13:52:44.633
> 
> 标签：mysql, concurrency

我面临以下异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction 
```

我可以说的是，我有多个线程在同一张表上并行执行查询。但我不明白为什么会发生这种异常。因为如果一个查询锁定了一张表，那么另一个线程中的同一个查询（或同一张表上的其他查询）将等待锁定。死锁是怎么产生的？

我换个说法，我理解异常，但我不明白的是一个查询正在等待另一个查询，另一个查询应该执行，离开锁，等待查询可以获得锁，为什么死锁？

如果有人想查看实际的查询（这些查询在多个线程中以与此处打印的顺序相同的顺序执行，**没有任何事务**）：

```
UPDATE daily_stats, account, campaign SET campaign_messages_cost = campaign_messages_cost + (IF(current_free_sms >= ?, campaign.campaign_cost, campaign.campaign_cost + (account.sms_charging_rate * ? ))), campaign_messages_delivered_count = campaign_messages_delivered_count + 1 WHERE daily_stats_id = ? AND campaign.id = ? AND daily_stats.account_id = account.id

update account a JOIN campaign b ON a.id = b.account_id set campaign_cost = IF(current_free_sms >= ?, campaign_cost, campaign_cost + (a.sms_charging_rate * ? )), delivered_count = delivered_count + ?, credit = IF(current_free_sms >= ?, credit, credit - (a.sms_charging_rate * ?)), current_free_sms = IF (current_free_sms >= ?, current_free_sms - ?, current_free_sms) where b.id = ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:26:32.060

MySQL 将任何查询语句视为事务（至少在使用默认 InnoDB 引擎时），但如果 @@autocommit 变量设置为 1（默认值），所有语句都会立即自动提交，从而有效地隐藏事务发生。尽管没有开始/提交/回滚，这可以解释“发现死锁”错误，尽管错误消息的“回滚”部分有点神秘，而且我以前没有见过。

MySQLs 提出的处理死锁的方法是组合查询结构以最小化问题，以及编写代码在它们发生时处理它们——因为它们将在像你这样的软件中。我的方法很简单但很有效：睡眠 500 毫秒并重试。在处理相当高负载的系统上（尽管在公司环境中），我很少看到超过两次连续重试。

您还应该查看[有关如何处理死锁的 MySQL 建议。](http://dev.mysql.com/doc/refman/5.5/en/innodb-deadlocks.html)

# symfony - sass/scss @import 当相对路径是符号链接时

> ID：15683685
> 
> 赞同：1
> 
> 时间：2013-03-28T13:52:51.683
> 
> 标签：symfony, import, sass, relative-path, symlink

我们在处理`@import`symfony2 中另一个包的 scss 文件时遇到了麻烦。

*   源代码（hg repo）`/files/...`位于机器 A 中。
*   在开发中，apache 从`/var/www/...`机器 A 提供服务，**链接**到`/files/...`机器 A。
*   在生产中，apache 从`/var/www/...`机器 B 中提供服务，其中包含源文件的**副本**。

让我们关注一个`Layout.scss`包含颜色和尺寸定义的文件。这些是我的路径：

```
# Source code (machine A)
xavi@bromo$ cd /files/custom_www/guparty/workspace/guparty/Applications/Common/bundles/LayoutBundle/Resources/public/Sass
xavi@bromo$ ls -l Layout.scss
-rw-rw-r-- 1 xavi xavi 7528 2013-03-28 12:18 Layout.scss

# Devel (machine A)
xavi@bromo$ cd /var/www/guparty/workspace/www/frontend/src/gUparty/
xavi@bromo$ ls -l Common
lrwxrwxrwx 1 xavi xavi 71 2013-03-28 12:26 Common -> /files/custom_www/guparty/workspace/guparty/Applications/Common/bundles

# Production (machine B)
ubuntu@ProductionLarge1$ cd /var/www/www.guparty.com/src/gUparty/
ubuntu@ProductionLarge1$ ls -ld Common/
drwxr-xr-x 21 www-data www-data 4096 2013-03-28 07:35 Common/ 
```

现在让我们考虑`Test.scss`将包含前一个文件的文件：

```
# Seen from the source code point of view:
/files/custom_www/guparty/workspace/guparty/Applications/FrontEnd/bundles/TestingBundle/Resources/public/Sass/Test.scss

# Seen from the devel apache point of view (links to the one above):
/var/www/guparty/workspace/www/frontend/src/gUparty/FrontEnd/TestingBundle/Resources/public/Sass/Test.scss

# Seen from the production apache point of view:
/var/www/www.guparty.com/src/gUparty/FrontEnd/TestingBundle/Resources/public/Sass/Test.scss 
```

该`Test.scss`文件以`@import`这样的指令开头：

```
@import "../../../../../../../src/gUparty/Common/LayoutBundle/Resources/public/Sass/Layout.scss"; 
```

**麻烦**

从包含文件副本的生产机器上看，它就像一个魅力。

尽管如此，当从开发机器运行时，我希望它能够工作，因为**相对**路径是相同的。相反，操作系统**不会显示**链接到 apache/php 的文件，并且似乎资产“需要知道”真实路径。

在开发中，导入失败，如果我把它`@import`改成这个，它工作正常：

```
@import "../../../../../../../Applications/Common/bundles/LayoutBundle/Resources/public/Sass/Layout.scss"; 
```

**我看到的解决方案，但不知道如何实施**

a）也许我可以配置一些东西，以便 PHP 看到“相对路径而不映射符号链接”。

b）也许我可以将parameters.ini或类似文件中的“变量”传递到.scss文件中，这样我就可以“发现”我是否处于“链接模式”或“复制模式”并`@import`使用一个路径或另一个。

有什么方法可以实现a或b？这两种策略之间有什么偏好吗？有什么替代策略吗？

谢谢！哈维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:37:05.943

Both solutions are possible.

> a) Maybe I could configure something so the PHP sees the "relative paths without demapping the symlinks".

Make sure your Apache configuration has FollowSymLinks enabled and PHP configuration has all the projects directories in the include_path.

> b) Maybe I can pass a "variable" from the parameters.ini or similar into the .scss file so I can "discover" if I'm in "linked mode" or "copied mode" and make the @import to use one path or the other.

Create a custom SASS function that returns different result depending on from what project it is called. This will let importing different paths from public/sass/upgrade/index.scss depending on which project you're compiling.

See [Compass: Importing files from another project directory](https://stackoverflow.com/questions/14656555/compass-importing-files-from-another-project-directory/15683333#15683333) for details on both.

# .htaccess - 无法重定向 .htaccess 规则

> ID：15683687
> 
> 赞同：1
> 
> 时间：2013-03-28T13:53:03.040
> 
> 标签：.htaccess, mod-rewrite

我需要的是，如果有人会点击 mydomain.com/mydirectory/about-us-new，那么它应该留在页面上，如果有人点击同一域上的任何其他 url，它应该将用户重定向到 google.com。

我为此目的使用以下代码：

```
#urls to exclude
RewriteCond %{REQUEST_URI} !^/mydirectory/about-us-new$

#send to root
RewriteRule . http://google.com? [R=302,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:12:49.753

尝试转义重写条件

```
RewriteCond %{REQUEST_URI} !^/mydirectory/about\-us\-new$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:25:58.090

您在上面提供的重写代码对我有用。

如果安装了 mod_rewrite，您可以尝试确保启用 RewriteEngine。

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_URI} !^/some/url/here$
    RewriteRule . http://www.google.com? [R=302,L]
</IfModule> 
```

# cognos - Cognos 报告多个评论

> ID：15683688
> 
> 赞同：1
> 
> 时间：2013-03-28T13:53:03.183
> 
> 标签：cognos

我有一个报告返回用户在工单上添加的评论，但是，它只显示第一条评论。如何设置报告以显示所有评论，包括日期/时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:17:02.423

在标题/详细信息关系中是否有工作订单表和单独的评论表？

IE。WORK_ORDER表有一个WO_NUMBER字段WORK_ORDER_COMMENTS表有一个对应的WO_NUMBER，那么每个工单有多条记录，每条评论一条记录？

如果是这种情况，那么该关系在框架管理器中定义。它应该类似于“1 到 n”记录和“n 到 1”，这样工单表有 1 条记录，工单注释表有 n 条记录。

如果他们的关系定义为“1 对 1”，那么 Cognos 将获取它为工作订单找到的第一个评论，并为每个工作订单返回 1 条评论。

如果可以，请提供更多详细信息，例如您使用的 Cognos 版本、表/关键字段是什么以及它们在框架管理器中的映射方式。

# networking - 如何允许分段数据包通过防火墙（ipv4/v6）？

> ID：15683690
> 
> 赞同：2
> 
> 时间：2013-03-28T13:53:11.510
> 
> 标签：networking, firewall, iptables

是否有允许分段 ipv4/v6 数据包的 iptables 规则？

我在网上搜索它显示碎片数据包不包含端口号，因此防火墙只是丢弃数据包，顶部应用程序将在选择或读取调用中等待并且不会收到任何数据包。

需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:39:18.763

> 我在网上搜索它显示碎片数据包不包含端口号

不要相信你在网上读到的一切。TCP 预先对其分段进行分段，因此它们以后不应被重新分段，分段分段确实包含端口号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T11:49:21.333

如果您进行任何形式的状态/连接跟踪，内核将直接处理片段。

但是，如果您有无状态路由器，则可以添加 -f 以匹配分段数据包。这对于分段的 udp 数据包很有用。允许所有碎片数据包通过路由器并让主机处理它们：iptables -A FORWARD -f -j ACCEPT

# opengl - 使用 glsl 的 'attribute' 和 'in' 有什么区别？

> ID：15683694
> 
> 赞同：5
> 
> 时间：2013-03-28T13:53:21.387
> 
> 标签：opengl, glsl

写和写有什么区别

```
in vec3 position; 
```

或者

```
attribute vec3 position; 
```

在 glsl 着色器中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T14:45:10.380

`attribute`自 glsl 1.3 起已弃用，并`varying`在 glsl 1.4 中删除：

这里是[glsl 1.4 规范](http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.40.08.pdf)的摘录（*1.2.6 与版本 1.2 的功能差异摘要*）：

> 以下是 1.3 版中已弃用的功能的摘要：
> 
> *   使用关键字*属性*和*变化*（使用*in*和*out*）。

# php - 编码帮助（HTTP 错误 500）

> ID：15683699
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:53:25.323
> 
> 标签：php, html

所以假设我有这个 code.txt 文件：

```
<html>
<head>
<title><?php echo $title; ?></title>
</head>
<body>
<?php echo $content; ?>
</body
<html> 
```

每当我想添加一个页面时，我只需创建一个名为 page.php 的文件：

```
<?php
$title="page title";
$content="Page content coded in html";

require 'code.txt';
?> 
```

每当我在 $content 字符串上添加 HTML 元素（如超链接）时，page.php 文件都会在浏览器上返回 HTTP 错误 500。我该如何解决 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:55:01.623

不要`.txt`为 PHP/HTML 使用文件扩展名。使用扩展 PHP 将识别 like`.php`或`.inc`.

# ruby - 如何在方法之间传递块？

> ID：15683702
> 
> 赞同：1
> 
> 时间：2013-03-28T13:53:30.843
> 
> 标签：ruby

我有两种方法，除了块之外，其中一种方法需要将其块传递给另一个。

```
def one(&block)
  two(block)
end

def two(&block)
  block.call
end 
```

在实际代码中，传递了其他参数，并且`one`是语法糖`two`。

我希望能够同时调用`one`和`two`使用块。

```
one { } # => okay
two { } # => ArgumentError: wrong number of arguments (1 for 0) 
```

我可以明白为什么我得到`ArgumentError`,`two`不需要这样的论点。我不太确定如何表达这一点，但`&block`指定块出现在传入的参数之后，因此出现错误。

红宝石 1.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:57:20.933

您可以`&block`像这样将 传递给您的第二种方法：

```
def one(&block)
  two(&block)
end

def two(&block)
  block.call
end

one { puts "Hello World" }
Hello World
#=> nil 
```

**更新**

你也可以做这样的事情

```
def one
  two(&Proc.new)
end

def two(&block)
  block.call
end 
```

它将具有与上述相同的输出。请注意，如果没有给一个块，它会引发一个，`ArgumentError: tried to create Proc object without a block`所以你必须检查块是否通过调用`if block_given?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:11:27.687

你可以这样做`yield`：

```
def one
  two { yield }
end

def two
  yield
end 
```

# html - 邮件附件

> ID：15683704
> 
> 赞同：0
> 
> 时间：2013-03-28T13:53:39.483
> 
> 标签：html, servlets

我正在使用 html 和 java servlet 实现带有附件的邮件应用程序

这是html代码

```
<input type="file" name="attachment" size="20" multiple> 
```

在 servlet 中，

```
String attachments[]=  request.getParameterValues("attachment"); 
```

正在返回 null 我可以用什么其他方式来实现这个

# routing - ZF2 主机名路由，默认值为找到的值

> ID：15683708
> 
> 赞同：0
> 
> 时间：2013-03-28T13:53:56.877
> 
> 标签：routing, zend-framework2

我想创建一个支持白标签的站点，并希望为此使用主机名路由。我为所有其他路由创建了一个父路由，它只是将找到的主机名存储在一个名为“whitelabel”的变量中

创建的数组：

```
<?php
$route = array(
'type' => 'Hostname',
    'options' => array(
    'route' => ':whitelabel',
    'defaults' => array(
        '__NAMESPACE__' => 'Application\Controller',
        'controller' => 'Index',
        'action' => 'index',
    ),
),
);
?> 
```

现在，每当我在视图中调用 url 助手时，它都无法找到“whitelabel”的值。如何将找到的值存储为 url 助手的默认值？

# c# - C#：COM 端口，GSM 设备只是发回我发给他的东西

> ID：15683709
> 
> 赞同：0
> 
> 时间：2013-03-28T13:53:59.263
> 
> 标签：c#, serial-port, gsm

我正在尝试使用连接到 COM 端口的 GSM 调制解调器发送和接收数据。这是我的代码的重要部分：

```
 SerialPort sp = new SerialPort();
        sp.PortName = "COM1";
        sp.BaudRate = 9600;
        sp.DataBits = 8;
        sp.Parity = Parity.None;
        sp.StopBits = StopBits.One;
        sp.ReadTimeout = 5000;

                sp.Open();
                if (sp.IsOpen)
                {
                    Console.WriteLine(sp.PortName + " is open");

                    Console.WriteLine("Trying to write data");
                    sp.Write("AT");
                    Console.WriteLine("Data has been sent");

                    Console.WriteLine("Trying to read data");
                    char[] read = new char[200];
                    sp.Read(read, 0, 20);
                    foreach (char chr in read)
                    {
                        Console.Write(chr);
                    }
                    Console.WriteLine();

                } 
```

我没有收到任何错误，但 GSM 设备只是将我发给他的任何东西都发回给我。在这种情况下，AT。如果我发送“BOO”，他会发回“BOO”（虽然有时我只收到第一个字母，但我认为这是因为我读取数据的方式，应该在单独的线程中不？我可以轻松做到这一点之后）。

当我给他发“AT”时，我期待他给我发回“OK”。

无论我发送给他什么，设备都会将我发送回去，这有什么解释。我在想可能是端口通信设置不正确，我实际上没有到达设备，只是将其发送回给自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:02:15.197

你和 PuTTY 沟通过吗？您应该首先尝试从终端应用程序（[PuTTY 下载链接](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)）发送和接收数据以排除调制解调器本身的任何问题，然后继续编写应用程序进行通信。

至于代码，您应该使用 sp.WriteLine 而不是 sp.Write... 调制解调器需要看到换行符才能知道您的命令已完成。您可以使用 sp.NewLine 设置换行符，使其与调制解调器需要查看的内容相匹配。或者，您可以将 '\r' 附加到您正在编写的任何 AT 命令中。

我用过的 GSM 调制解调器默认都开启了回显，你可以通过发送 'ATE0' 来禁用回显。当 echo 打开时，调制解调器将首先回显您发送的任何内容，然后发送它的响应。由于您读取数据的方式，我怀疑您看到的是回声而不是响应。试试这个方法来读取数据：

```
//add this just before opening the port
sp.DataReceived += new 
    SerialDataReceivedEventHandler(port_DataReceived); 
```

在设置端口的方法之外添加以下方法：

```
private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
  Console.WriteLine(port.ReadExisting());
} 
```

# domain-driven-design - 事件溯源 - 如何恢复错过的事件

> ID：15683710
> 
> 赞同：2
> 
> 时间：2013-03-28T13:54:07.063
> 
> 标签：domain-driven-design, cqrs

假设我在两个单独的服务中部署了两个聚合。聚合 2 监听聚合 1 的事件。

当我长时间停止聚合服务2时，如何恢复所有错过的事件？

1.  从聚合 1 个事件存储中检索所有错过的事件？
2.  如果聚合 1 已经积累了很多事件怎么办。聚合 2 是否允许使用聚合 1 的快照？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:45:33.607

> 1) 从聚合 1 事件存储中检索所有错过的事件？

是的。

> 2) 如果聚合 1 已经积累了很多事件怎么办。聚合 2 是否允许使用聚合 1 的快照？

是的。

但是，在一个高度断开连接的上下文中，**分区容错性**优于**一致性**，您必须为聚合 2 处理的所有事件安排补偿操作。实际上，您可能会遇到聚合 2 处理的事件如果它无法处理的情况。已正确接收来自聚合 1 的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:53:03.463

> 从聚合 1 个事件存储中检索所有错过的事件？

是的，这将是一般方法。在基础架构级别，您可以记住最后看到的序列号，然后请求将此后的事件推送给您。

> 如果聚合 1 已经积累了很多事件怎么办。聚合 2 是否允许使用聚合 1 的快照？

这里的答案可能不是——如果两者能够共享快照，那么首先可能值得重新考虑聚合边界是否正确。但是，这实际上取决于聚合 1 的提要的性质。我通常会避免这种情况，除非您确实遇到了必要的问题。

# html - 使用引导 css/css/html 对齐输入字段

> ID：15683713
> 
> 赞同：1
> 
> 时间：2013-03-28T13:54:13.233
> 
> 标签：html, css, twitter-bootstrap

我想调整以下内容：

```
<div class="span5">
                    <div class="">
                        <span class="label">Label1</span>
                        <input type="text" class="input-medium" placeholder="0">
                    </div>
                    <div class="">   
                        <span class="label">Label2</span>
                        <input type="text" class="input-medium" placeholder="0" >
                    </div>
                    <div class="">   
                        <label class="checkbox inline">
                        <input type="checkbox"><span>Something</span>
                        </label> 
                        <input type="text" class="input-medium" placeholder="0">
                    </div>       
                    <div class="">     
                        <span class="label">Label4</span>  
                        <input type="text" class="input-medium" placeholder="0">
                    </div>
                    <div class="">
                        <span class="label label-inverse">Label5</span>
                        <input type="text" class="input-medium" placeholder="0">  
                    </div>
                </div> 
```

这是小提琴：http: [//jsfiddle.net/qP46X/1267/](http://jsfiddle.net/qP46X/1267/)

我尝试了正确的保证金，但没有帮助。我不确定如何将文本框对齐在一起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:02:05.257

`.label`为元素使用设置宽度。理想情况下，您应该在布局中保持一致，您也可以为所有文本使用标签，但设置宽度 +`display: inline-block`将起作用。您当然可以根据需要更改宽度。

[http://jsfiddle.net/qP46X/1268/](http://jsfiddle.net/qP46X/1268/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:22:40.290

您还可以使用 twitter bootstrap `form-horizontal`css 类及其子组件类来满足您的要求。我修改了您的代码的一些样式，但您可能会从以下参考中获得您想要的（请参阅下面链接中的**水平形式）**

**参考**：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

**演示**：http: [//jsfiddle.net/qP46X/1269/](http://jsfiddle.net/qP46X/1269/)

# android - 在 Google Play 上隐藏应用程序

> ID：15683714
> 
> 赞同：3
> 
> 时间：2013-03-28T13:54:13.497
> 
> 标签：android, google-play, in-app-billing, publishing

为了在应用计费中进行测试，我必须在 google play 上发布我的应用程序。但我不希望我的应用程序对下载可见，因为在应用程序计费中没有测试，并且还有一些其他错误。是否有可能以某种方式“隐藏”应用程序，但让它处于发布模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:56:29.277

要在应用计费中进行测试，您的 apk 只需处于草稿模式即可。

因此，您上传 apk，但不要单击应用程序的发布按钮。如果您已经单击它，请单击取消发布，该应用将从列表中删除。只要上传了具有应用内计费权限和版本代码的apk，就可以进行测试。

# jquery - JQuery toggleClass - ajax 调用中断事件

> ID：15683715
> 
> 赞同：1
> 
> 时间：2013-03-28T13:54:18.360
> 
> 标签：jquery

设想：

*   链接上的简单打开关闭切换类（添加 class="selected"） - 打开一个 div 面板
*   面板包含带有链接的日历 - 一切正常
*   日历具有“下一个”和“上一个”月份链接 - 通过 ajax 在所选月份单击一个加载

单击日历中的链接只是重新加载页面，并且面板再次关闭 - 没关系（即删除了“选定的切换类”）

单击月份调用 ajax，但也删除了选定的切换类，因此面板关闭

尝试的补救措施：单击下一个/上一个链接时，将另一个类添加到链接容器以强制它保持打开状态 - 这有效，但意味着删除了初始切换选择的类 - 因此容器处于“错误”状态 -因为它应该被选中但不是但仍然是打开的 - 所以它现在不“同步”

有点难以复制 - 尝试添加到小提琴：http: [//jsfiddle.net/tapiman/ZJMKD/3/](http://jsfiddle.net/topiman/ZJMKD/3/)

* * *

```
//Show Hide toggle
$('#showhide').click(function () {
  $(this).toggleClass('selected');
  $('#pickdate').removeClass('stayopen');
  $('.showhide').slideToggle('fast');
  return false;
});

//calendar date toggle
$('.date-prev a').click(function () {
  $('#pickdate').addClass('stayopen');
  return false;
}); 
```

* * *

但它在那里工作正常 - 所以它是打破它的 Ajaxing 动作/我无法在那里复制。

提前致谢

# c# - Unicode 到 ASCII 转换/映射

> ID：15683717
> 
> 赞同：4
> 
> 时间：2013-03-28T13:54:34.410
> 
> 标签：c#, encoding, ascii

我需要某种转换/映射，例如，由 CLCL 剪贴板管理器完成。

它的作用是这样的：

我复制以下 Unicode 文本：ūī
并且 CLCL 将其转换为：ui

有什么技术可以进行这种转换吗？或者也许有可以用来转换的映射表，比方说，符号 ū 映射到 u。

**更新**

感谢大家的帮助。这是我带来的（两种解决方案的混合体），一种由 Erik Schierboom 发布，另一种来自[http://blogs.infosupport.com/normalizing-unicode-strings-in-c/#comment-8984](http://blogs.infosupport.com/normalizing-unicode-strings-in-c/#comment-8984)

```
public static string ConvertUnicodeToAscii(string unicodeStr, bool skipNonConvertibleChars = false)
{
    if (string.IsNullOrWhiteSpace(unicodeStr))
    {
        return unicodeStr;
    }

    var normalizedStr = unicodeStr.Normalize(NormalizationForm.FormD);

    if (skipNonConvertibleChars)
    {
        return new string(normalizedStr.ToCharArray().Where(c => (int) c <= 127).ToArray());
    }

    return new string(
        normalizedStr.Where(
            c =>
                {
                    UnicodeCategory category = CharUnicodeInfo.GetUnicodeCategory(c);
                    return category != UnicodeCategory.NonSpacingMark;
                }).ToArray());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:59:05.183

我已经使用以下代码一段时间了：

```
private static string NormalizeDiacriticalCharacters(string value)
{
    if (value == null)
    {
        throw new ArgumentNullException("value");
    }

    var normalised = value.Normalize(NormalizationForm.FormD).ToCharArray();

    return new string(normalised.Where(c => (int)c <= 127).ToArray());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T13:57:50.740

通常，无法将 Unicode 转换为 ASCII，因为 ASCII 是 Unicode 的子集。

也就是说，可以将 Unicode 的 ASCII 子集中的字符转换为 Unicode。

在 C# 中，通常不需要进行转换，因为默认情况下所有字符串都是 Unicode，并且所有组件都支持 Unicode，但如果必须进行转换，请使用以下命令：

```
 string myString = "SomeString";
 byte[] asciiString = System.Text.Encoding.ASCII.GetBytes(myString); 
```

# c++ - 将名称转换为数字，然后生成输出

> ID：15683722
> 
> 赞同：1
> 
> 时间：2013-03-28T13:54:53.893
> 
> 标签：c++, string, visual-c++

好的，我正在学习 C++ 课程并尝试构建一个控制台程序，用户输入他/她的姓名，然后程序根据用户姓名的每个字母输出一个新名称。

我试图用一个字符串来做这个，但还没有找到如何正确地将字符串转换为每个字母的 int。

我在这个程序中唯一拥有的是每个 char 的替换字符串，但是 google 和 stackoverflow 没有显示任何我可以应用于我当前情况的内容。这是我的字符串：

```
string ninjaName[28] = {"ka", "zu", "mi", "te", "ku", "lu","ji", 
    "ri", "ki", "zu", "me", "ta", "rin", "to", "mo", "no","no", 
    "ke", "shi", "ari", "chi", "do", "ru", "mei", "na", "fu", "zi"}; 
```

该字符串代表字母表中的 28 个字母，并且基于“忍者名称”图片。

我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:21:48.150

```
 #include<iostream>
#include <string>
using namespace std;
string ninjaName[28] = {"ka", "zu", "mi", "te", "ku", "lu","ji", 
"ri", "ki", "zu", "me", "ta", "rin", "to", "mo", "no","no", 
"ke", "shi", "ari", "chi", "do", "ru", "mei", "na", "fu", "zi"};

int main()
{
    string name,outstr;
    int cindex=0;

    cout << "Enter Your Name:\t";
    cin >> name;
    size_t sz = name.size();
    for (int i = 0; i < sz; i++)
    {
        if(!isalpha(name[i]))
        {
            outstr+=name[i];
            continue;
        }
        cindex = tolower(name[i])-'a';
        outstr.append(ninjaName[cindex]);
    }
    cout << "\nyour new Ninja Name is:\t" <<outstr << "\n";
    return 0;
} 
```

~~那主要是在 C 中，而不是 C++ 中，但~~它可以满足我的需求。
一个字符串是一个字符数组，一个字符只是一个数字。

*编辑*
将代码更新为 c++，进而修复 James Kanze 指出的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:53:05.750

据我了解，您正在尝试使用用户输入的每个字符中的 ASCII 码并将其替换为另一个字符串。

我个人有两种方法：

1.  我会维护你在那里的数组。对于用户输入中的每个字符，我将测试它是否是大写/小写字符，如果是，我将相对于 ASCII 表索引 ninjaName 数组。

例子：

```
#include <ctype.h>
#include <iostream>
#include <string>

std::string ninjaName[28] = {"ka", "zu", "mi", "te", "ku", "lu","ji", 
    "ri", "ki", "zu", "me", "ta", "rin", "to", "mo", "no","no", 
    "ke", "shi", "ari", "chi", "do", "ru", "mei", "na", "fu", "zi"};

int main(void)
{
    std::string input, newName;
    std::getline(std::cin,input);
    newName = "";
    char c; 

    for(unsigned int i=0; i < input.length(); ++i)
    {
        c = input[i];
        if (!isalpha(c))
            newName += c;
        else
            newName += ninjaName[tolower(c) - 'a'];     
    }

    std::cout << "Generated name: " << newName << std::endl; 
    std::cin.get();

    return 0;
} 
```

谷歌 ASCII 表。

另一种解决方案包括使用 std::map，但在性能和简单性方面，上述解决方案会更好。

# android - 带有页面的拖放视图

> ID：15683729
> 
> 赞同：0
> 
> 时间：2013-03-28T13:55:03.380
> 
> 标签：android, android-custom-view, android-launcher

我正在寻找一个行为类似于启动器应用程序的自定义视图：

*   显示多个图标
*   支持拖放
*   支持外拖删除
*   支持多页
*   指示当前页面
*   在 Android 预版本 3 上工作

有人知道这样的观点吗？

# iphone - 在 DrawRect 方法中收到内存警告

> ID：15683733
> 
> 赞同：1
> 
> 时间：2013-03-28T13:55:09.430
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在开发一个应用程序，我在其中**记录了主屏幕**并被`SetNeedsDisplay method`使用。

但问题是它需要大量内存，即使我没有录制屏幕。

我想减少下面提到的代码的内存使用量。

有什么解决办法吗？

提前致谢。

```
- (void) drawRect:(CGRect)rect
{
    NSDate* start = [NSDate date];
    CGContextRef context = [self createBitmapContextOfSize:self.frame.size];
    //NSLog(@"context value %@",context);
    //not sure why this is necessary...image renders upside-down and mirrored
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, self.frame.size.height);
    CGContextConcatCTM(context, flipVertical);

    [self.layer renderInContext:context];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage* background = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);
    self.currentScreen = background;

    if (_recording) {
        float millisElapsed = [[NSDate date] timeIntervalSinceDate:startedAt] * 1000.0;
        [self writeVideoFrameAtTime:CMTimeMake((int)millisElapsed, 1000)];
    }

    float processingSeconds = [[NSDate date] timeIntervalSinceDate:start];
    delayRemaining = (1.0 / self.frameRate) - processingSeconds;

    //redraw at the specified framerate
    [self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:delayRemaining > 0.0 ? delayRemaining : 0.01];
}

 -(CGContextRef) createBitmapContextOfSize:(CGSize) size 
{

    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    bitmapBytesPerRow   = (size.width * 4);
    bitmapByteCount     = (bitmapBytesPerRow * size.height);
    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (bitmapData != NULL) {
        free(bitmapData);
    }
    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL) {
        fprintf (stderr, "Memory not allocated!");
        return NULL;
    }

    context = CGBitmapContextCreate (bitmapData,
                                     size.width,
                                     size.height,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaNoneSkipFirst);

    CGContextSetAllowsAntialiasing(context,NO);
    if (context== NULL) {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
        return NULL;
    }
    CGColorSpaceRelease( colorSpace );

    return context;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:21:00.647

您每帧创建一个上下文，但从不释放它，尝试将其添加到末尾：

```
CGContextRelease(context); 
```

# php - PHP 转换时间格式并添加随机时间变量

> ID：15683739
> 
> 赞同：2
> 
> 时间：2013-03-28T13:55:20.520
> 
> 标签：php, random, time, formatting

我需要生成一个时间格式：`[ Y-m-d H:i:s ]`从看起来像的字符串`7/03/2013`（是的，可以是 7 或 07）。

我用

```
$date = '7/03/2013';
$date = date('Y-m-d H:i:s', strtotime($date)); 
```

这很好用。那么问题出在哪里？

问题是我没有这个`H:i:s`零件，但我需要它才能插入数据库。

所以我只是尝试随机它：

```
$rand = rand(00,24); 
$datenew = date('Y-m-d '.$rand.':i:s', strtotime($date)); 
```

但这会产生类似`4`或`6`我需要`04`的时间`06`等等：

```
$rand = rand(0,2) . rand(1,4) ;
$datenew = date('Y-m-d '.$rand.':'.$rand.':s', strtotime($date)); 
```

但在我看来，这显然不是优雅的。

我还需要会议记录，所以我需要以某种方式格式化`rand(00,60)`；

但结合起来也会创造不切实际的时代，比如`24:26:00`

那么我怎样才能花时间使用 format `7/03/2013`，转换为`H:i:s`并添加随机的小时，分​​钟（也许是秒）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:58:02.137

```
$dt = DateTime::createFromFormat('n/d/Y', '7/03/2013');
echo $dt->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://3v4l.org/3QF7S)

时间将根据您运行代码的时间而有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T13:57:45.550

你可以`Y-m-d 00:00:00`改用。或者，如果你需要它是随机的，你可以使用类似的东西：

```
date('Y-m-d ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:03:35.980

这将为 HH:ii:ss 生成一个随机数

```
$date = '7/03/2013';

$new_date  = date('Y-m-d', strtotime($date));
$new_date .= date(' H:i:s', mt_rand(0,1262055681)); 
```

# javascript - 在一个视图中模板两个模型 - Backbone/Marionette

> ID：15683743
> 
> 赞同：8
> 
> 时间：2013-03-28T13:55:38.773
> 
> 标签：javascript, model-view-controller, backbone.js, marionette

我试图在一个视图中使用两个模型，并使用它们的模板。我正在和木偶一起工作。这是我对视图的初始化：

```
main_app_layout.header.show(new APP.Views.HeaderView({
 model: oneModel,
 model2 : twoModel}
)); 
```

这是我的看法：

```
APP.Views.HeaderView = Backbone.Marionette.ItemView.extend({

    template : '#view_template',

    className: 'container',

    initialize: function() {
               //This correctly logs the second model
                console.log(this.options.model2);

    }

}); 
```

这是模板：

```
 <script id="view_template" type="text/template">
        <p>{{twoModel_label}} {{oneModel_data}}</p>
        <p>{{twoModel_label2}} {{oneModel_data2}}</p>
    </script> 
```

它使用 oneModel 数据正确渲染所有内容，但不渲染第二个，即使它正确记录它。我使用 Mustache 作为我的模板语言。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T03:04:03.363

您可以覆盖`serializeData`视图上的方法并让它返回两个模型的数据：

```
 APP.Views.HeaderView = Backbone.Marionette.ItemView.extend({

  // ...

  serializeData: function(){
    return {
      model1: this.model.toJSON(),
      model2: this.options.model2.toJSON()
    };
  }

}); 
```

然后您的模板将如下所示：

```
<script id="view_template" type="text/template">
    <p>{{model1.label}} {{model1.data}}</p>
    <p>{{model2.label}} {{model2.data}}</p>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:22:28.717

尝试创建一个包含两个模型的复杂模型，这个新模型将其他两个作为属性，您可以像这个答案解释的那样访问每个模型的属性。

[从 Mustache 模板访问嵌套的主干模型属性](https://stackoverflow.com/questions/6234071/access-nested-backbone-model-attributes-from-mustache-template#)

# php - 如何从水银编辑器保存到 php 数据库

> ID：15683749
> 
> 赞同：0
> 
> 时间：2013-03-28T13:55:51.473
> 
> 标签：php, jquery, editor, mercury-editor

我正在使用水星编辑器（非导轨）开发内容管理系统。但问题是我不知道如何保存从水银编辑器提供的 JSON 字符串。

这是编辑器提供的 JSON 字符串。

```
{
"get_title": {
"type": "simple",
"data": {},
"value": "skdhfzsd"
},
"title": {
"type": "simple",
"data": {},
"value": "This is a test page"
},
"content": {
"type": "full",
"data": {},
"value": "<p>What is this kind of page ?</p><p>Well this is my cool test page to try out different stuff.</p><p><a href=\"http://www.domeinz.nl\" target=\"_blank\">Woot</a></p><p><iframe style=\"width: 560px; height: 349px;\" src=\"http://www.youtube.com/embed/ixifxQ_MDu4?wmode=transparent\" frameborder=\"0\" allowfullscreen=\"true\"></iframe><br></p><p><iframe style=\"width: 400px; height: 225px;\" src=\"http://player.vimeo.com/video/22193086?title=1&byline=1&portrait=0&color=ffffff\" frameborder=\"0\"></iframe><br></p><p>☃ ©&lt;/p><p><br></p>",
"snippets": {}
}
} 
```

问题是我不知道如何将其保存到我的 save.php 文件以及如何获取请求。

打招呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:23:16.670

您应该将此 json 字符串发送到 PHP 文件（它基本上是一个数组）。

然后 PHP 文件可以处理信息并将其插入到数据库中。

不要害怕如何处理结果。尝试执行 print_r($_GET) 或 print_r($_POST)，您将在 php 文件中看到编辑器发送给您的确切信息。

应该使 PHP 文件以与任何其他形式发送信息的方式完全相同的方式处理信息，这就是这个编辑器的美妙之处。

# mysql - MySQL 将 2 个表中的数据合并到第 3 个表中

> ID：15683754
> 
> 赞同：1
> 
> 时间：2013-03-28T13:55:56.087
> 
> 标签：mysql, sql, join, sql-insert

我目前有 2 张桌子：

```
CrawlData
id (autoincrement), Source, Destination, and some more columns

Nodes
id (autoincrement), URL 
```

**Nodes表包含来自****CrawlData**的不同 Source 值

 **现在我想要一个表，它是一种查找表，其中包含来自节点的 ID，而不是来自**CrawlData的 Source 和 Destination 中的文本**

我可以在 URL=Source 和 URL=Destination 上使用 Join 来获取所有 ID，但不知道如何将它们组合起来，然后将它们放入具有 2 列的新表**Edges中：**

*   SourceNode（= 来自 CrawlData.Source = URL 的节点的 ID）
*   DestinationNode（= 来自 CrawlData.Destination = URL 的节点的 ID）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:00:04.643

您可以使用语句语句`INSERT`返回的记录。`SELECT``INSERT INTO...SELECT`

```
INSERT INTO Edges(SourceNode, DestinationNode)
SELECT  b.ID SourceNode,
        c.ID DestinationNode
FROM    CrawlData a
        INNER JOIN Nodes b
            ON a.Source = b.URL
        INNER JOIN Nodes c
            ON a.Destination = c.URL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

为了更快地执行，请执行以下语句以添加`INDEX`列以避免`FULL TABLE SCAN`在大型 RDBMS 上执行时可能会很慢。

```
ALTER TABLE Nodes ADD INDEX (URL); 
```

如果 和 的所有值`Source`都`Destination`出现在 上`Nodes.URL`，则将这些列声明为外键，

```
ALTER TABLE CrawlData 
      ADD CONSTRAINT cd_fk1 FOREIGN KEY (Source) REFERENCES Nodes(URL)
ALTER TABLE CrawlData 
      ADD CONSTRAINT cd_fk2 FOREIGN KEY (Destination) REFERENCES Nodes(URL) 
```

否则，在它们上添加普通索引

```
ALTER TABLE CrawlData ADD INDEX (Source);
ALTER TABLE CrawlData ADD INDEX (Destination); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:00:43.103

您可以两次加入节点表。一次，使用 Source 加入 URLK。下次使用目的地。

从概念上讲，这就像使用节点表的两个副本，每个副本都有不同的名称（例如“S”和“D”）。你得到：

```
select S.ID As SOURCE_ID, D.ID As DEST_ID
from CrawlData
join Nodes S on Source = S.URL
join Nodes D on Destination = D.URL 
```**

# emacs - 影响emacs中行间距的希腊字符

> ID：15683756
> 
> 赞同：3
> 
> 时间：2013-03-28T13:55:59.193
> 
> 标签：emacs, unicode, fonts

当我在 emacs 中有希腊字符时，下一行之前的行距会增加，这很烦人也很奇怪。奇怪的是，任何其他 unicode 字符似乎都很好。

这里发生了什么，如何使行距与其他字符一致？

![带有希腊字符的奇怪行距](../Images/4c7d83cd93b925c667b781c42325ab86.png)

emacs 的版本是：GNU Emacs 24.1.1 (x86_64-pc-linux-gnu, GTK+ Version 2.24.12) of 2012-09-22 on batsu, Debian 修改

在 linux mint 上（并使用 xmonad 作为窗口管理器，但我怀疑这与它有什么关系）。

上面的示例使用从没有 .Xdefaults 文件的 urxvt 终端启动的“emacs -q”（然后我启用了 linum-mode 以便行距更加明显）。

编辑：如果使用“-Q”选项也会发生同样的事情（我只是发现了-q和-Q之间的区别）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:23:29.757

希腊字母似乎来自完全不同的字体。除了风格上的差异外，这可能会导致不同的行高。因此，请检查您是否可以将字体更改为包含所有所需字符的字体。

# c# - 如何开始在我的 WebMatrix 站点上使用 OpenID/OAuth？

> ID：15683760
> 
> 赞同：6
> 
> 时间：2013-03-28T13:56:14.853
> 
> 标签：c#, oauth, openid, webmatrix, asp.net-webpages

如果我误用或混淆了 OpenID 和 OAuth 这两个术语，我深表歉意，我对整个去中心化登录过程还是新手。

几天来，我一直在尝试让我的网站（内置于 WebMatrix）识别 Google 登录。问题是我的文件中需要这行代码（根据我的研究）`_AppStart.cshtml`：

```
OAuthWebSecurity.RegisterGoogleClient(); 
```

但是，当我在此语句到位后尝试运行此站点时，我只是得到一个服务器错误，指出`OAuthWebSecurity.RegisterGoogleClient();`当前上下文中不存在。

我想我可能需要 OAuth 库、不同的帮助程序或其他一些包，但我看到的唯一相关包（*Microsoft WebPages OAuth library 2.0.20710.0*）我无法获得，因为 WebMatrix 不支持 NuGet 的版本它说我需要（2.0）。

我以前从未使用此方法登录，我想了解如何为我的客户构建此功能。我**不想**做的是打开入门模板，然后复制我的文件。我在使用我不理解的代码时遇到问题。我觉得这对我来说是一个糟糕的习惯（在我什至会使用 jQuery 插件之前，我花了一些时间说服自己）。还可能值得一提的是，我不会使用任何其他第三方服务进行此登录。我们将 gmail 用于员工的公司电子邮件帐户，因此我**只需要 Google**登录即可使用此解决方案。

我尝试过的事情：

*   谷歌搜索像我这样的其他场景。**失败，因为没有找到相关的搜索结果（即，我无法找到与我的场景匹配的结果）**
*   搜索*Microsoft WebPages OAuth 库 2.0.20710.0*包的早期版本。**失败，因为我的搜索没有返回这样的包。**
*   使用`OAuthWebSecurity.RegisterOpenIDClient(BuiltInOpenIDClient.Google);`而不是`OAuthWebSecurity.RegisterGoogleClient();` **失败的原因与使用时相同`OAuthWebSecurity.RegisterGoogleClient();`**
*   访问站点管理并下载 OAuth 库。 **由于 NuGet 需要更新而失败**
*   **由于此处提到的内容（显然，WebMatrix 的一个已知错误），** 更新 Nuget失败： [http ://forums.asp.net/t/1836913.aspx/1?Error+updating+DotNetOpenAuth+updates+with+NuGet+Gallery](http://forums.asp.net/t/1836913.aspx/1?Error+updating+DotNetOpenAuth+updates+with+NuGet+Gallery)
*   打开 Starter Site Template，它已经内置了 OAuth 并且可以正常工作。**未能告诉我为什么该站点可以识别`OAuthWebSecurity.RegisterGoogleClient()`而我的站点不能识别，因为没有明确的方法（我知道）来说明第三方软件的哪些软件包、更新和/或版本可能不同。**
*   创建一个新的起始站点并从 *"App_Data"* 和*"bin"*文件夹中复制任何基于 OAuth 的缺失文件。**失败在于没有观察到行为变化。**

-----------------------------------------**更新**-------- --------------------------------

到目前为止，至少对我来说，这个问题的最佳解决方案是只使用 WebMatrix 中的“Starter Site”模板，无论我喜欢与否。

然而，我这样做的最大担忧之一是，有太多无关的文件，我不确定我可以删除哪些文件以保持网站清洁，同时仍然让`OAuthWebSecurity()`课程完全可访问和正常运行。但是，我只保留了“Starter Site”模板中的“bin”和“App_Data”文件夹（当然包括它们的所有内容），并在移动文件之前删除了其他所有内容（包括 web.config 文件），到目前为止，这对我来说似乎效果很好。

使用上面提到的步骤，我保持我的站点没有不必要的代码，同时仍然可以访问`OAuthWebSecurity()`该类。

将来（我想当 WebMatrix 3 发布时）这个错误可能会得到修复，并且 OAuth 库的简单管理站点安装将不需要 WebMatrix 不支持的 NuGet 版本，但在那之前，这是最好的替我回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:08:45.033

这个[GitHub 项目是否有帮助：WorldDomination.Web.Authentication](https://github.com/PureKrome/WorldDomination.Web.Authentication) ??

![在此处输入图像描述](../Images/cdef11021bbdb56b4af02fa390ef0a05.png)

如果您喜欢的话，还有一个[MVC](http://nuget.org/packages/WorldDomination.Web.Authentication.Mvc/0.17.0)和[NancyFX](http://nuget.org/packages/Nancy.Authentication.WorldDomination/) nuget 包可以进行一些自动接线。

免责声明：我从来没有尝试过`Webmatrix`，也永远不会打算尝试它。也就是说，它可能仍然有效！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T14:26:58.013

您是否尝试过以下软件包？

```
PM> Install-Package Microsoft.AspNet.WebPages.OAuth 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-15T04:47:58.123

安装**Microsoft.AspNet.WebPages.OAuth**包。

您可以使用包管理器控制台或在 GUI 包管理器中安装它。

# android - activity onPause如何保存界面数据

> ID：15683765
> 
> 赞同：0
> 
> 时间：2013-03-28T13:56:24.583
> 
> 标签：android, android-activity, onresume, onpause

您好，我在我的应用程序 2 活动中，我希望当我在它们之间切换时，用户界面和变量不会改变，有什么办法可以做到这一点。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:03:12.510

SharedPreferences 似乎是您实现它的最简单方法，因为您可以使用 SharedPreferences 方法永久保存任何内容（嗯，任何基本数据类型）。

```
/**
 * Retrieves data from sharedpreferences
 * @param c the application context
 * @param pref the preference to be retrieved
 * @return the stored JSON-formatted String containing the data 
 */
public static String getStoredJSONData(Context c, String pref) {
    if (c != null) {
        SharedPreferences sPrefs = c.getSharedPreferences("AppPreferences", Context.MODE_PRIVATE);
        return sPrefs.getString(pref, null);
    }
    return null;
}

/**
* Stores the most recent data into sharedpreferences
* @param c the application context
* @param pref the preference to be stored
* @param policyData the data to be stored
*/
public static void setStoredJSONData(Context c, String pref, String policyData) {
    if (c != null) {
        SharedPreferences sPrefs = c.getSharedPreferences("AppPreferences", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = sPrefs.edit();
        editor.putString(pref, policyData);
        editor.commit();
    }
} 
```

其中字符串 'pref' 是用于引用该特定数据的标签，例如：“taylor.matt.data1”将引用一段数据，可用于从 SharedPreferences 检索或存储它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:05:02.667

如果您想保存原始数据类型（字符串、整数、布尔值等），请使用 SharedPreferences，这将永久保存您的值，直到用户重新安装（清除数据）应用程序。共享首选项的工作原理是这样的

```
// save string in sharedPreferences
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putString("some_key", string); // here string is the value you want to save
                    editor.commit(); 
```

// 恢复 sharedPreferences 中的字符串

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
string = settings.getString("some_key", ""); 
```

# jsf - 使用 ui:include 的 primefaces 中的动态选项卡内容不起作用

> ID：15683767
> 
> 赞同：3
> 
> 时间：2013-03-28T13:56:27.420
> 
> 标签：jsf, primefaces, facelets

我无法在 tabView 中使用 ui:include。我正在尝试使用包含的 Facelet 制作动态选项卡。

这是我的代码：

```
<p:tabView id="panelGl" var="tabContent" value="#{mainPageBackingBean.tabs}" widgetVar="panelGlJs" style="height: 100%;" dynamic="true" >
            <p:ajax event="tabClose" listener="#{mainPageController.onTabClose}" oncomplete="questionDialogWV.show()" update="@(this) :questionForm:questionFormPanel" />
            <p:ajax event="tabChange" onstart="setActive()" update="@(this)" />         
            <p:tab title="#{tabContent.title}" titletip="#{tabContent.description}" closable="true">
                <ui:include src="#{mainPageBackingBean.tabContents}" />
            </p:tab>
</p:tabView> 
```

`#{mainPageBackingBean.tabContents}`运行时值指向这个 Facelet ：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:fn="http://java.sun.com/jsp/jstl/functions"
 xmlns:p="http://primefaces.org/ui">
 <p:panel>
    <h:form> 
        <p:commandButton id="testEmail" value="" process="@this" actionListener="#{communicationChannelsController.testEmailChannel()}"/>
    </h:form>
 </p:panel>
</ui:composition> 
```

`ui:include`当我在外部使用上述内容时，`p:tabView`它可以正常工作（我可以`communicationChannelsController.testEmailChannel()`毫无问题地调用）。此外，当我将上述文件的内容复制到里面时，`p:tab`一切正常。

问题是，当组合`p:tab`并且`ui:include`不起作用时，不会调用此 bean 方法。

`mainPageBackingBean`在我的示例中使用一些导航 bean 创建动态选项卡的最佳方法是什么？

# java - 为什么 java 连接不能 createstatement() 而 executeQuery() 正在处理中？

> ID：15683770
> 
> 赞同：0
> 
> 时间：2013-03-28T13:56:35.843
> 
> 标签：java, static, executequery

我有一个到数据库的静态 java 连接。

**第一个线程**

通过我的静态连接，我正在创建一个语句并调用 executeQuery() 方法。此时我正在等待，因为查询结果非常大，我必须等待超过 15 分钟。

**第二个线程**

使用相同的静态连接，我正在尝试调用 createStatement() 方法。这里第二个线程被阻塞了。

有很多方法可以解决这个问题，但我找不到任何地方为什么这种方法不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:37:43.627

`Connection`常见的方式是通过`Sockets`机制实现对数据库的单向。最好说，您的单曲`connection`是某种管道，用于每次执行一个的具体查询。

很难想象这样一种*最优*和高性能的代码实现，尽管一个套接字多个查询及其结果是并行发送的。这样的实现可能会导致与数据包的混淆，至少会导致它们丢失。

正如上面评论中提到的[karmanaut](https://stackoverflow.com/users/2155859/karmanaut)，您需要实现DB pool，即连接池，它将同时用于每个语句。

# javascript - 如何让用户拥有最新的非缓存代码？

> ID：15683773
> 
> 赞同：1
> 
> 时间：2013-03-28T13:56:44.090
> 
> 标签：javascript, css, html, caching, web-applications

这是一种核心的 Web 开发主题，而且很难搜索。

我正在运行一个中型网站，每天约 2500 个用户。我们每个月都在大力开发新功能。我们有一个带有 master、dev/master 和一些其他开发分支的 GIT 设置。我们有一个登台服务器和一个开发服务器，而且我们都在本地工作，直到我们推送到开发。

但是，当我将更改推送到 dev 甚至 live 时，通常情况下用户必须刷新缓存，否则他们会看到错误。

我们确实使用 HTML5 应用程序缓存，当我们更改清单时，它会让所有文件重置。但是我们并没有为整个应用程序使用 App Cache，只是一些使应用程序更快的资源。

撇开应用缓存不谈，这在我们的旧网站中仍然是个问题，即使没有应用缓存。我知道你可以在 JS 和 CSS 文件之后做 ?timestamp 。但我希望用户缓存这些。它加快了他们的体验。

那么，如何让用户缓存内容以提高速度，但在我推送更新时获得最新内容？大佬们是怎么处理的呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:27:33.720

我想在这里给出一个明确的答案，因为这个问题的解决方案太棒了。这基本上就是凯所说的。

在 PHP 中，我们这样做`define("GIT_HASH",exec(GIT." rev-parse --short HEAD 2>&1"));` ，其中 GIT 是您的 git bin 的路径。在 linux 上它只是 git，在 mac 上它就像 /usr/local/bin/git

然后我们将我们的 GIT 哈希放入 JS 中以与 require.js 一起使用

```
<script>
    window.app_hash = '<?=GIT_HASH;?>' || '';
</script> 
```

现在我们有了哈希值，所以我们只是更改了 require.js 的配置

```
require.config({
baseUrl: '__' + app_hash, 
```

我们也有这个用于硬编码的 PHP url /css/main.css">

最后我们使用了 NGINX 重写规则来允许这个

```
rewrite ^/__[^/]*/(.+) /$1 last; 
```

对于 htaccess 中的 apache

```
RewriteRule ^__[^/]*/(.+) /$1 
```

__ 是我们用于哈希的前缀，只是为了清楚起见。NGINX 中的最后一个是我们的其余规则会受到影响，而对于 htaccess，您不需要它。

我们没有使用像 ?whatever 这样的查询字符串的原因是因为某些浏览器永远不会缓存带有这样的查询字符串的 URL。我们不想要这样，我们想要缓存，而不是在部署时。

如果您不使用 require.js - 您必须将所有 URL 更改为语法，但它值得。

如果您使用 html5 应用程序缓存，请务必取出其中的所有 css 和 js。

谢谢凯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:07:30.970

从我读过的内容来看，当您添加查询字符串时，浏览器缓存文件的方式有所不同。所以我使用的解决方案是让 URL 看起来像这样：

```
<script type="text/javascript" src="/resources/cacheholder1/js/site.js" /> 
```

每次我构建我的项目并准备部署新版本时，我都会增加这个数字。当然，当你有几十/几百行这样的行时，这很烦人。因此，我编写了一个 bash 脚本来检查我的项目并查找与以下模式匹配的任何内容：

```
/resources/cacheholder(#)/ 
```

然后取匹配的数字，增加它，然后更新/保存文件。

当然，使用项目编号而不是任意数字可能更明智，只要您实际跟踪项目编号并且它会自动更改。这对我们现在有效，所以我坚持使用它，但一直计划使用项目编号。

这应该可以正确缓存文件，因为它是一个“新” URL，而不仅仅是查询字符串的更改。同时，我花了一些额外的配置来允许这个 URL 方案，因为“缓存持有者”部分发生了变化（数字），所以你不能在你的项目中硬编码 URL 映射。

查询字符串的问题是浏览器不应该缓存带有查询字符串的请求，所以在做和不做之间有一个混合。而且我敢打赌（因为我记得它发生过）唯一的就是IE。其他浏览器似乎遵循规范不缓存带有查询字符串的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:06:13.627

中的查询字符串`asset?timestamp`使 Firefox 向服务器询问每个请求。即使您可以使用 304 响应，这也是资源和用户时间的浪费。

我`www.example.com/assets/<git hash>/name.js`在我的项目中使用它，它工作正常。仅当内容被编辑时，修订才会更改，因此不会有不必要的查询。

静态内容设置为 1 个月后过期：

```
最后修改时间：2013 年 3 月 28 日星期四 12:16:21 GMT
缓存控制：公共，最大年龄=2678400
过期：2013 年 4 月 28 日星期日 14:00:58 GMT
ETag：“flask-1364472981.38-9149-1640239173”

```

在您的部署过程中，您必须替换`<git hash>`布局文件中的 。

您会在上次修改资产时获得修订：

```
git log --format=%h -1 -- path/to/asset.js 
```

# ruby-on-rails-3 - 日本地址的地址表单字段

> ID：15683778
> 
> 赞同：0
> 
> 时间：2013-03-28T13:56:56.887
> 
> 标签：ruby-on-rails-3, internationalization, rails-i18n

我正在为日本的一个说英语的客户构建一个小型应用程序。作为应用程序的一部分，用户需要能够输入他们的地址。不幸的是，我找不到任何关于通常如何以在线表格处理地址的参考资料。

我知道有不同的区/都道府县/城市组合；这些通常在数据库中都有自己的字段吗？所有这些都进入一般“城市”类型的领域是标准的吗？这种事情的标准 UI 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:34:14.520

万国邮政联盟汇编了不同国家地址格式的[信息](http://www.upu.int/en/activities/addressing/postal-addressing-systems-in-member-countries.html)。另请参阅邮政地址的非官方[指南。](http://www.columbia.edu/~fdc/postal/)

但作为一项规则，软件的国际化通常意味着对于邮政地址，您避免强加任何特定格式。相反，您将使用足够大小的自由格式文本输入区域。一个国家通常使用多种形式的地址（日本也不例外），通常您不需要强制执行任何特定格式 - 相反，您希望人们知道自己的地址以及如何输入地址，以便邮政部门能够理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:09:19.007

这取决于您与地址的关系：

如果你必须：

*   检查必填字段
*   验证字段，或
*   查询城市、都道府县、邮政编码等

那么你应该使用单独的字段。UI：带有文本输入（甚至可能是菜单）的表单。

不要使用不必要的字段，因此如果您没有任何上述需求，只需使用文本字段（UI：textarea）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T21:54:07.883

日语地址的第一部分很简单：Todofuken 将是 2 或 3 个字符，后跟“都”、“道”、“府”或“県”。棘手的是地址的其余部分，因为较小的区域并不总是整齐地划分他们的城市。

我所看到的使这更容易的是使用邮政编码来呈现地址。坏消息是我在 Ruby 中没有看到任何这些，但我在其他语言中看到过，所以希望这会有所帮助。

这个网站只有日文，但也许你可以下载代码并查看： [http ://www.kawa.net/works/ajax/ajaxzip2/ajaxzip2.html](http://www.kawa.net/works/ajax/ajaxzip2/ajaxzip2.html)

还有这个用于转换地址的 Excel 加载项。该代码可能对您有所帮助：http: [//office.microsoft.com/ja-jp/excel-help/HP010077514.aspx](http://office.microsoft.com/ja-jp/excel-help/HP010077514.aspx)

希望这可以帮助。

# python - python models.py syncdb 不起作用

> ID：15683782
> 
> 赞同：1
> 
> 时间：2013-03-28T13:57:10.373
> 
> 标签：python, mysql, database, django, python-2.7

安装 Python 2.7.2 和 Django 1.5 并创建我的第一个应用程序的第二天，现在**我无法同步 models.py 并更新我的数据库。**

工具：Windows Vista、Putty SSH 位置：Bluehost (www.bluehost.com) 服务器

这是我已经阅读但没有解决我的问题的主题： [Why did I get error for python manage.py syncdb (IndentationError: unexpected indent)](https://stackoverflow.com/questions/8758025/why-did-i-get-error-for-python-manage-py-syncdb-indentationerror-unexpected-in)

建议是关于 models.py 中的*制表符和空格*（**缩进**），但请相信我使用了正确的缩进，如下所示（models.py）。

```
from django.db import models

# Create your models here.

class posts(models.Model):

    author = models.CharField(max_lenght = 30)
    title = models.CharField(max_lenght = 100)
    bodytext = models.TextField()
    timestamp = models.DateTimeField() 
```

# 我已经做了什么：

我已经安装了 Python 2.7.2，请检查：

```
username@domain.com [~]# python -V
Python 2.7.2 
```

我已经安装了 Django 1.5，检查

```
username@domain.com [~]# python
Python 2.7.2 (default, Mar 27 2013, 12:07:49)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from django import get_version
>>> get_version()
'1.5'
>>> 
```

我已经安装了 MySQL-python-1.2.4 （**在这一点上我不确定它是否正常工作**）：

```
username@domain.com [~]# python
Python 2.7.2 (default, Mar 27 2013, 12:07:49)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import MySQLdb
>>> 
```

我遇到[了 django-admin.py 的问题，通过更改 .bashrc PATH 条目解决了它](https://stackoverflow.com/questions/15671877/django-admin-py-command-not-found-bluehost-server)，并成功运行了colde：

```
django-admin.py startproject mysite 
```

然后我像这样修改了*models.py*（创建一个简单的博客）：

```
from django.db import models

# Create your models here.

class posts(models.Model):

    author = models.CharField(max_lenght = 30)
    title = models.CharField(max_lenght = 100)
    bodytext = models.TextField()
    timestamp = models.DateTimeField() 
```

然后我创建了一个***mysql 数据库***和一个***用户***，将用户添加到数据库并赋予**所有权限**（全部在 bluehost 前端面板中完成）。

然后我像这样修改了*settings.py*：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'domain_dbname',                      # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': 'domain_username',
        'PASSWORD': 'password',
        'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '',                      # Set to empty string for default.
    }
} 
```

# 问题

现在是更新数据库的时候了，我试试这个：

```
python models.py syncdb 
```

这就是我得到的：

```
Traceback (most recent call last):
  File "models.py", line 1, in <module>
    from django.db import models
  File "/home1/domain/python/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if settings.DATABASES and DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/home1/domain/python/lib/python2.7/site-packages/django/conf/__init__.py", line 52, in __getattr__
    self._setup(name)
  File "/home1/domain/python/lib/python2.7/site-packages/django/conf/__init__.py", line 45, in _setup
    % (desc, ENVIRONMENT_VARIABLE))
django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings. 
```

# 所以我的问题是：

为什么这条线不起作用？

```
python models.py syncdb 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:02:28.993

用这个：

```
python manage.py syncdb 
```

# javascript - 拖放和鼠标滚轮？

> ID：15683789
> 
> 赞同：5
> 
> 时间：2013-03-28T13:57:22.700
> 
> 标签：javascript, drag-and-drop, mousewheel

**简短版：可以在拖放操作过程中触发鼠标滚轮事件吗？**

长版：

我目前正处于此特定功能的设计阶段，所以我还没有任何代码。我问这个是为了知道走这条路是否浪费时间，所以我可以设计其他东西。

基本上，我的一侧有一个物品清单，另一侧有一个篮子。就目前而言，每个项目都有一个输入框和一个按钮，因此您可以输入数量并将其添加到购物篮中（反之亦然）。我想添加拖放功能，以便您可以以一种或另一种方式拖动项目。如果您只想要一个项目，这很好用，但我想添加一种在拖动时调整数量的方法。想到了鼠标滚轮，因为您首先已经在使用鼠标进行拖动。

所以在深入研究代码之前，我需要知道在拖动过程中是否真的可以接收鼠标滚轮事件，如果可以，我应该在哪里添加监听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-29T17:06:50.877

如果要检查`wheel`事件期间是否按下了主鼠标按钮，可以使用以下命令：

```
addEventListener('wheel', function (event) {
  if (event.buttons & 1) {
    alert("You scrolled while the primary mouse button was down!");
  }
} 
```

不幸的是，如果您使用带有属性的[拖放 API](https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API) ，并且在拖动过程中不会触发事件，那么您将无法触发和处理事件。`draggable='true'``wheel``scroll``scroll`

# java - aurora.jar 的 NoClassDefFoundError

> ID：15683790
> 
> 赞同：0
> 
> 时间：2013-03-28T13:57:28.313
> 
> 标签：java, class

我正在尝试下一步执行：

```
C:\dev\sources\boSchedules\loadJavaLibs>java -cp aurora.jar; ojdbc6.jar
oracle.aurora.server.tools.loadjava.LoadJavaMain -thin -user login/pass@myserv:mysid
 %BOS_SRC%/credit/card/api/ScheduleCardApi 
```

我得到下一个：

```
Exception in thread "main" java.lang.NoClassDefFoundError: ojdbc6/jar
Caused by: java.lang.ClassNotFoundException: ojdbc6.jar
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: ojdbc6.jar.  Program will exit. 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:07:14.987

查看[Java Application Launcher](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)手册页。

```
java -cp aurora.jar; ojdbc6.jar
oracle.aurora.server.tools.loadjava.LoadJavaMain -thin -user sched/sched@teach:prod
 %BOS_SRC%/credit/card/api/ScheduleCardApi 
```

您的类路径条目之间有一个空格`aurora.jar; ojdbc6.jar`。启动器认为第一个 jar 是唯一的类路径条目，并且`ojdbc6.jar`是包含该`main(String[] args)`方法的类。它还将之后的所有内容视为传递给该`main(String[] args)`方法的参数。删除那个空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:17:43.600

去掉aurora.jar之间的空格；和 ojdbc6.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T13:07:46.863

空格相互分隔参数。JVM 将命令解释为您运行“ojdbc6.jar”类：“jar”作为类名，“ojdbc6”作为包。

要为特定类运行连接要放入类路径的库的名称，请使用不带空格的分号作为“lib1;lib2”

**PS：**请问您的同事是否可以将我们的一些凭据粘贴到 SO 中？:)

# javascript - 添加http后的jquery域验证

> ID：15683791
> 
> 赞同：0
> 
> 时间：2013-03-28T13:57:33.610
> 
> 标签：javascript, jquery

我需要对 CS 表单进行 URL 验证。我已经有一个脚本可以检查 http 并在不存在时添加它。但是，如果我添加另一个函数来进行验证，无论我把它放在哪里，它都会返回 URL 无效。

这就是我正在运行的

```
<script type="text/javascript">
$(function(){
$('.url').blur(function(e) {
    if ($(this).val().match(/^http/) || $(this).val().match(/^https/)) /*define the    http & https strings */ {
        $.noop() /*if strings exist, do nothing */
    }
    else {
        // get value from field
        var cur_val = $(this).val(); 
        // do with cur_val
        $(this).val('http://' + cur_val);
    }        

});

});  

</script> 
```

这是我用于验证的第二个函数：

```
<script type="text/javascript">
function validate() {
    var url = document.getElementById("url").value;
    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
    if (pattern.test(url)) {
        alert("Url is valid");
        return true;
    } 
        alert("Url is not valid!");
        return false;

}
</script> 
```

我究竟做错了什么？我试图合并这两个函数，但我的 js 技能选择了失败的那一刻。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:10:51.467

我不知道，如果这正是你要找的，

```
var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

pattern.test("http://google.com");   // True
pattern.test("google.com");          // False 
```

您使用的 if 条件是无用的，因为无论如何您都会返回模式匹配的结果。

所以更新后的**Validate**函数应该简单地返回模式结果 & 应该如下所示：

```
function validate() {

    var url = document.getElementById("url").value; 

    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

    return pattern.test(url);
} 
```

假设有一个 id 为**url**的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:10:34.347

乍一看，您的“添加 http”功能似乎正在寻找带有 . 的标签`class="url"`，而 validate 功能正在寻找带有 . 的标签`id="url"`。如果你没有那个 id，那么我想它总是会返回无效的。

# java - 如何在 EmbeddedId 中强制执行 @Enumerated(EnumType.STRING)

> ID：15683792
> 
> 赞同：3
> 
> 时间：2013-03-28T13:57:33.997
> 
> 标签：java, hibernate, jpa

我有以下映射：

```
public enum JobType {
    CLEANER,
    CRAWLER, ...
 }

public class JobId implements Serializable {
    private int accId;
    private String env;
    private JobType jobType;
 }

@SuppressWarnings("serial")
@Entity
@Table(name = "jobs")
public class JobExecution {

    @EmbeddedId
    @AttributeOverrides({
        @AttributeOverride(name = "accId", column = @Column(name = "acc_id")),
        @AttributeOverride(name = "env", column = @Column(name = "env")),
        @AttributeOverride(name = "jobType", column = @Column(name = "agg_type")) })
    private JobId jobId;

    @Enumerated(EnumType.STRING)
    @Column(name = "Job_STATUS")
    private JobStatus jobStatus;

    //...  other staff 
} 
```

作业状态枚举列写入 OK，其中包含字符串值。

但是 jobType 写的是序数值 (0,1,...) 而不是名称 (CLEANER, CRAWLER ...)。

我想将 JobType 枚举名称写入数据库，而不是它的 ordinal() 值。

我可以将哪个映射添加到 @EmbeddedId 以提示 jobType 列的此属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:06:09.600

这样做的方法是直接在字段上使用[@Enumerated 注释：](http://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html)

```
@Enumerated(EnumType.STRING) 
```

如果需要，我想您可以使用注释您的`JobId`类，`@Embeddable`然后将`@Enumerated`注释放在您的`JobType`字段中：

```
@Embeddable
public class JobId implements Serializable {
    private int accId;
    private String env;

    @Enumerated(EnumType.STRING)
    private JobType jobType;
} 
```

# android - 像标签故事一样的Android翻转

> ID：15683793
> 
> 赞同：1
> 
> 时间：2013-03-28T13:57:39.550
> 
> 标签：android, flip

当移动到下一个活动时，我希望我的应用程序像[**Tabtale 应用程序一样翻转。**](http://tabtale.com)

我玩过卷页、动画、淡入淡出。

我可以使用一些示例代码或数学方程式吗？

请帮助对android还是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:56:08.390

我认为他们使用的是 cocos2d 之类的游戏引擎或类似的东西，并且没有使用 page curl 实现它。

# datetime - 当 WebSecurity 登录失败时，它会将 LastPasswordFailureDate 存储为错误的 11 小时

> ID：15683796
> 
> 赞同：2
> 
> 时间：2013-03-28T13:57:43.640
> 
> 标签：datetime, asp.net-mvc-4, simplemembership, iis-8, sql-server-2012-express

现在是 2013 年 3 月 29 日上午 12:56（澳大利亚）。

当我输入用户名/密码组合错误时，数据库报告上次登录失败是

```
2013-03-28 13:56:18.517 
```

它落后了 11 个小时。我正在使用开箱即用的`WebSecurity`和`SimpleMembershipProvider`.

`SELECT GETDATE()`SQL Server 2012 中的 A说`2013-03-29 00:58:40.930`。没关系。

发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:59:46.850

我相信它将日期存储为协调世界时 (DateTime.UtcNow())。这可以解释为什么你要减掉这么多钱。

为什么这是一件好事，就像您要跨时区共享数据库/服务器（想想负载平衡）一样 - 您的 DateTime 条目将保持“同步”的一个例子。

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)的有关 UTC 时间/日期时间函数的更多信息

# android - 从 Android 中的 onClick 方法启动 PreferenceActivity

> ID：15683797
> 
> 赞同：2
> 
> 时间：2013-03-28T13:57:45.353
> 
> 标签：android, menu, onclick, preferences

我使用以下教程创建了我的首选项页面： [http](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)
://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html 但我希望配置显示在另一个活动中（工作正常）并且我想从我的一种方法（而不是从onOptionsItemSelected）调用此页面
当我尝试使用时`startActivity(new Intent(this, QuickPrefsActivity.class));`出现错误：

```
The constructor Intent(new View.OnLongClickListener(){}, Class<QuickPrefsActivity>) is undefined 
```

我想这是因为它不是基本活动，所以我怎么能打开这个偏好页面？（不是通过菜单点击）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:58:46.380

您不能`this`在单击按钮时使用 inside，而是使用`ClassName.this`

例如

```
Intent i = new Intent(ClassName.this, SecondClass.class);
startActivity(i); 
```

# queue - 逆马尔可夫链

> ID：15683802
> 
> 赞同：0
> 
> 时间：2013-03-28T13:57:55.950
> 
> 标签：queue, markov-chains

马尔可夫链的状态序列完全由它的出生率 l(t)（对于 lambda）和它的死亡率 m(t)（对于 mu）和给定初始状态的初始概率分布 P0 来表征。还有最大数量的状态 c（对于容量）。

假设通过上述生死系统获得的状态序列 y(t) 可用作测量值，并且 m(t)、P0 和 c 也是已知的。

如何获得系统的逆并计算 l(t)，它在给定 mu(t) 和 P0 和 c 的情况下创建 y(t)？

如果 mu(t) 或 P0 不再可用怎么办。还有可能吗？

# sql - 如何获取多个 POST 数据？

> ID：15683804
> 
> 赞同：0
> 
> 时间：2013-03-28T13:57:59.230
> 
> 标签：sql, post, input

我正在尝试从一些输入字段中获取 $_POST 数据，但问题是我正在从我的数据库中获取字段数：

```
$query2 = $DB->prepare("SELECT * FROM params WHERE modulid = $parameterid");
$query2->execute();

<td>Parameter unit:</td>
<?php  while (($row2 = $query2->fetch()) != false)
  {
  $unit = $row2->name;
  ?><td><input type="text" name="<?php echo $row2->id; ?>" value="<?php echo $unit; ?>" class="textbox"></td><?php
  }
  ?> 
```

从所有这些中获取发布数据的代码是什么，以便如果用户想在输入中键入新数据，我可以更新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:02:33.023

您可以通过遍历以下全局变量来获取表单提交的所有值：

```
$_POST 
```

通过使用 foreach 循环，您可以检查填充了哪些值并使用它们生成 UPDATE SQL 语句。

获取所有非空值的示例：

```
$changed = array();
foreach($_POST as $key => $value) {
    if(!empty($value)) {
        $changed[$key] = $value;
    }
} 
```

然后使用 $changed 数组创建查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:03:04.477

你为什么不做这样的事情

```
$temp=$row2->id;

mysql_query("insert into params (modulid) values ('$temp')"); 
```

# c# - 没有从“V”到“System.IEquatable”的装箱转换或类型参数转换 '

> ID：15683807
> 
> 赞同：6
> 
> 时间：2013-03-28T13:58:02.403
> 
> 标签：c#, generics

我有以下扩展方法，它们编译成功并按设计运行。

```
public static IEnumerable<T> WhereNotEmpty<T>(this IEnumerable<T> source) where T : struct {
    return source.Where(item => !item.Equals(default(T)));
}

public static IEnumerable<V> SelectNotEmpty<T, V>(this IEnumerable<T> source, Func<T, V> selector) where V : struct {
    return source.Select(selector).WhereNotEmpty();
} 
```

但是，为了避免装箱，我添加了一个新的通用约束，如下所示：

```
public static IEnumerable<T> WhereNotEmpty<T>(this IEnumerable<T> source) where T : struct, IEquatable<T> {
    return source.Where(item => !item.Equals(default(T)));
}

public static IEnumerable<V> SelectNotEmpty<T, V>(this IEnumerable<T> source, Func<T, V> selector) where V : struct, IEquatable<T> {
    return source.Select(selector).WhereNotEmpty(); // compile error!
} 
```

我现在在`SelectNotEmpty`调用时遇到编译错误`WhereNotEmpty`：

> 类型“V”不能用作泛型类型或方法“MyExtensions.WhereNotEmpty(System.Collections.Generic.IEnumerable)”中的类型参数“T”。没有从“V”到“System.IEquatable”的装箱转换或类型参数转换。

我确定我犯了一个愚蠢的错误，但我看不到它。有人可以为我指出吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:05:03.263

您对 V 的约束应该是

```
where V : struct, IEquatable<V> 
```

WhereNotEmpty 中的类型`T`应该是`IEquatable<T>`，并且您在应用转换后将`IEnumerable<V>`传入`WhereNotEmpty`from `SelectNotEmpty`。

```
public static IEnumerable<V> SelectNotEmpty<T, V>(this IEnumerable<T> source, Func<T, V> selector) where V : struct, IEquatable<V>
{
    return source.Select(selector).WhereNotEmpty();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:06:10.187

尝试改变：

```
public static IEnumerable<V> SelectNotEmpty<T, V>(this IEnumerable<T> source, Func<T, V> selector) where V : struct, IEquatable<T> {
    return source.Select(selector).WhereNotEmpty(); 
} 
```

在

```
 public static IEnumerable<V> SelectNotEmpty<T, V>(this IEnumerable<T> source, Func<T, V> selector) where V : struct, IEquatable<V> {
    return source.Select(selector).WhereNotEmpty(); 
} 
```

# mysql - 从 CSV 中的 mysql 位字段中加载数据

> ID：15683809
> 
> 赞同：4
> 
> 时间：2013-03-28T13:58:06.577
> 
> 标签：mysql, csv, sql-insert

`bit(1)`在“MySQL”的类型列中插入值的正确语法是什么？

我的列定义是：

```
payed bit(1) NOT NULL 
```

我正在从`csv`数据保存为`0`或的位置加载数据`1`。我尝试使用以下方法进行插入：

```
b'value' or 0bvalue (example b'1' or 0b1) 
```

如[手册](http://dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html)所示。

但我不断收到此错误：

```
 Warning | 1264 | Out of range value for column 'payed' at row 1 
```

插入`bit`值的正确方法是什么？

我不是手动插入，而是从`csv`（使用`load data infile`）加载数据，其中列的数据是`0`或`1`。

这是我的`load`查询，我已重命名隐私问题的字段，该定义没有错误：

```
load data local infile 'input_data.csv' into table table
fields terminated by ',' lines terminated by '\n'
(id, year, field1, @date2, @date1, field2, field3, field4, field5, field6, payed, field8, field9,   field10, field11, project_id)
set
date1 = str_to_date(@date1, '%a %b %d %x:%x:%x UTC %Y'),
date2 = str_to_date(@date2, '%a %b %d %x:%x:%x UTC %Y');
show warnings; 
```

这是我的 CSV 的示例行：

```
 200014,2013,0.0,Wed Feb 09 00:00:00 UTC 2014,Thu Feb 28 00:00:00 UTC 2013,2500.0,21,Business,0,,0,40.0,0,PROSPECT,1,200013 
```

**更新：** 我没有找到解决方案`bit`，所以我将列数据类型从 更改`bit`为`tinyint`以使其工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-24T15:15:18.907

我终于找到了解决方案，并将其发布在这里以供将来参考。我在[mysql 加载数据手册页](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)中找到了帮助。

因此，出于测试目的，我的表结构是：

```
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| id     | int(11)     | NO   | PRI | NULL    |       |
| nome   | varchar(45) | YES  |     | NULL    |       |
| valore | bit(1)      | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+ 
```

我的`csv`测试文件是：

```
1,primo_valore,1
2,secondo_valore,0
3,terzo_valore,1 
```

将 加载`csv`到表中的查询是：

```
 load data infile 'test.csv' into table test
    fields terminated by ',' lines terminated by '\n'
    (id, nome, @valore) set
       valore=cast(@valore as signed);
    show warnings; 
```

如您所见，加载`csv`您需要进行强制转换`cast(@valore as signed)`，并且`csv`您可以使用整数表示法`1`或`0`指示`bit`值。这是因为无法使用二进制表示法（例如`b'011010'`）加载 BIT 值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-24T14:16:06.863

用任何值替换 csv 中的“0”值。这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:04:35.860

您可以像这样使用[BIN()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_bin)函数：

```
INSERT INTO `table` VALUES (`column` = BIN(1)), (`column` = BIN(0)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:15:50.513

让我猜猜，但我认为您应该在 LOAD 查询中忽略 CSV 文件的第一行。

请参阅“忽略数字行”

# clojure - 这个 defn method1 [{:keys [abc] :as obj}] 映射方法是如何工作的？

> ID：15683810
> 
> 赞同：1
> 
> 时间：2013-03-28T13:58:09.590
> 
> 标签：clojure

我有以下 Clojure 代码

```
(defn myFunction [{:keys [a b c] :as myAtom}]
  (let [new-a 1]
    (+ new-a a)
  (assoc myAtom :a new-a))) 
```

我想知道 :keys 和 :as 是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:17:53.140

第一行定义了一个函数（在 var 中），它接受一个参数，该参数必须是一个映射

```
(defn myFunction [{:keys [a b c] :as myAtom}] 
```

然后它创建一个 let 语句，将给定的符号绑定`a` `b` `c`到通过在该参数中查找每个符号作为关键字获得的值，并将名称 myatom 绑定到原始映射

```
 (let [new-a 1] 
```

然后绑定`new-a`到值 1

```
 (+ new-a a) 
```

做一些数学运算并忽略结果

```
 (assoc myAtom :a new-a))) 
```

最后一段使用绑定到整个映射的符号（作为参数传递）并调用 assoc 创建一个新映射，将 :a 与 new-a 中的值相关联。然后将其作为函数的值返回。

这将为 :a 返回一个值为 1 的新映射

```
user> (myFunction {:a 3 :b 3 :c 3})
{:a 1, :c 3, :b 3} 
```

# c# - 单元测试方法因 lambda 表达式而失败

> ID：15683811
> 
> 赞同：0
> 
> 时间：2013-03-28T13:58:16.020
> 
> 标签：c#, unit-testing, mstest, rhino-mocks

我正在尝试编写单元测试。

```
[TestInitialize()]
public void MyTestInitialize()
{
    _mocks=new MockRepository();
    MockFactory.Reset();
    _scheduledOrderprovider = new ScheduledOrderProvider();
    _scheduledOrderRepository = MockRepository.GenerateMock<ScheduledOrderRepository>(); 
}

[TestMethod()]
public void GetScheduledOrderMessageStatusIDsTest()
{                
    int NofOrdersPerMessage = 1;
    int[] expected = GetMockScheduledOrderMessageStatusIDs(NofOrdersPerMessage);
    _scheduledOrderRepository.Expect(x => x.GetOrderMessageStatusIDs(1)).Return(expected);
    int[] actual=_scheduledOrderprovider.GetScheduledOrderMessageStatusIDs(NofOrdersPerMessage);
    _scheduledOrderRepository.VerifyAllExpectations();
    Assert.AreEqual(expected[0], actual[0]);
} 
```

它失败并出现以下错误：

> 表达式不能包含 lambda 表达式 rhinomock

# jquery - 实现多个 CSS 属性的问题

> ID：15683812
> 
> 赞同：3
> 
> 时间：2013-03-28T13:58:20.453
> 
> 标签：jquery

我想使用 jQuery 更改元素的 css。

```
$('p').css({
    padding-left : '6px',
    border-left : '5px solid #555'
}); 
```

这没用。

但是，当我使用

```
$('p').css('padding-left','6px');
$('p').css('border-left','5px'); 
```

有用...

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:59:55.417

您必须将属性（样式属性）包装在 qoutes（'' 或 ""）中。

这是因为它们包含破折号 (-)。

[**工作演示**](http://jsfiddle.net/WshgS/)

```
$('p').css({
    'padding-left' : '6px',
    'border-left' : '5px solid #555'
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:03:45.933

更好地使用这种方式：

### [在这里检查一下小提琴](http://jsfiddle.net/NFfd9/)

```
$('p').css({
    paddingLeft : '6px',
    borderLeft : '5px solid #555'
}); 
```

在 css 中，我们使用连字符`-`分隔所有小写字母并用`""`单引号或双引号括起来。这种方式在 js/jQuery 中：

```
 'padding-left' : '6px',
    'border-left' : '5px solid #555'
//--^-----------^----------------------here 
```

在 js 中，所有 css 属性都可以通过以下方式在 camelCase 中访问：

```
 paddingLeft : '6px',
    borderLeft : '5px solid #555'
//--^^^^^^^^^^------------------------this way 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T14:00:10.817

因为您没有在第一段代码的引号内定义它们。

```
$('p').css({
    'padding-left' : '6px',
    'border-left' : '5px solid #555'
}); 
```

应该管用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:59:59.040

只是缺少引号

```
$('p').css({
    'padding-left' : '6px',
    'border-left' : '5px solid #555'
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T14:01:57.233

尝试

```
$('p').css({
    'padding-left':'6px',
    'border-left':'5px solid #555'
}); 
```

# android - onPageFinished 没有在 android 中调用

> ID：15683813
> 
> 赞同：2
> 
> 时间：2013-03-28T13:58:25.923
> 
> 标签：android, android-webview

`onPageFinished`当 webview 没有任何物理接口时，实际上并没有调用。我的意思是不查看就像....

```
WebView webView = new WebView(this);
webView.setWebViewClient(loadWordWebViewClient);
webView.loadUrl("http://www.google.co.in/"); 
```

我知道它何时有效，`WebView webView = (WebView) findViewById(R.id.myWebView);`但假设我只想在服务中加载 url。那么有可能吗？

# python - MongoEngine：嵌入式文档中的数组位置投影

> ID：15683815
> 
> 赞同：3
> 
> 时间：2013-03-28T13:58:28.087
> 
> 标签：python, mongodb, mongoengine

我正在尝试使用 MongoEngine 在 python 中重现以下查询，但没有取得多大成功。

数据和查询的原始来源：http: [//docs.mongodb.org/manual/reference/projection/positional/#prj._S_](http://docs.mongodb.org/manual/reference/projection/positional/#prj._S_)

该查询基本上返回嵌入文档中匹配的第一个元素，而不是整个嵌入文档本身。

我的代码：

```
from mongoengine import *
connect('test')

class Student(Document):
    semester = IntField()
    grades = ListField(EmbeddedDocumentField('Grade'))

class Grade(EmbeddedDocument):
    value = FloatField()

    def __str__(self):
        return "%s" % self.value

student_1 = Student(semester=1, grades=[Grade(value=70), Grade(value=87), Grade(value=90)]).save()
student_2 = Student(semester=1, grades=[Grade(value=90), Grade(value=88), Grade(value=92)]).save()

result = Student.objects(semester=1, grades__value__gte=85).only("grades.$")

for r in result:
    print r.grades 
```

当我这样做时，我得到一个错误：

```
Traceback (most recent call last):
  File "test_me_so.py", line 21, in <module>
    result = Student.objects(semester=1, grades__value__gte=85).only("grades.$")
  File "/.../lib/python2.7/site-packages/mongoengine/queryset.py", line 1225, in only
    return self.fields(**fields)
  File "/.../lib/python2.7/site-packages/mongoengine/queryset.py", line 1271, in fields
    fields = self._fields_to_dbfields(fields)
  File "/.../lib/python2.7/site-packages/mongoengine/queryset.py", line 1289, in _fields_to_dbfields
    field = ".".join(f.db_field for f in QuerySet._lookup_field(self._document, field.split('.')))
  File "/.../lib/python2.7/site-packages/mongoengine/queryset.py", line 1289, in <genexpr>
    field = ".".join(f.db_field for f in QuerySet._lookup_field(self._document, field.split('.')))
AttributeError: 'str' object has no attribute 'db_field' 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:58:25.180

我不确定 mongoengine 的语法，但我认为你不需要“唯一”位。

$位置指示符通常会从数组中抓取相关值，听起来好像会涉及到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:35:09.317

[位置运算符](http://docs.mongodb.org/manual/reference/projection/positional/)用于更新与您的查询匹配的数组中的第一个元素。

查询语言是关于查找文档的，目前您无法过滤文档中的数组。您可以切片并返回数组的子集，但不仅返回匹配的子集。

因此，在这种情况下，您必须在 python 中过滤成绩并作为循环的一部分。

另一种策略可能是使用[聚合框架](http://docs.mongodb.org/manual/core/aggregation/)来 $unwind 数组和 $match ，然后重建 Grades 数组 - 但目前 mongoengine 还没有内置。

# ruby-on-rails - Ruby on Rails 中的 SQL JOIN 等效项

> ID：15683817
> 
> 赞同：0
> 
> 时间：2013-03-28T13:58:31.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这些是我的模特

> > User -> has many Pins
> > Pins -> has many votes
> > vote -> 有 user_id 和 pin_id

如何以最有效的方式获得用户投票的所有 Pin 图？基本上，我想在 Ruby 中模拟这个查询。

```
SELECT * FROM PINS a JOIN VOTES b ON a.id = b.pin_id WHERE b.user_id = current_user.id 
```

我该怎么做？我可以使用 , `db.execute`，但不使用 SQL 就不能做任何事情吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:06:07.310

看到 a 投票`belongs to`a `user`， a `user`should have_many `votes`，您可以通过 a has many through association 获得引脚

```
class User < ActiveRecord::Base
   has_many :votes
   has_many voted_pins, through: :votes, source: :pin 
```

# encryption - 加密识别

> ID：15683818
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:58:35.253
> 
> 标签：encryption

我已经下载了一个服务器应用程序，并且注册密码加密看起来像这样（示例）：

```
y3CfIdk8ozzzbfE2uhzp9ViHz6E= 
```

这是什么加密方式？我想为我的服务器创建一个 Web 注册，但我不知道加密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:03:12.923

它是[Base 64](http://en.wikipedia.org/wiki/Base64)编码。它解码为（十六进制）
`70CB 219F 3CD9 3CA3 6DF3 36F1 1CBA F5E9 8758 A1CF`

鉴于这是 20 个字节（160 位），我猜它是一个[SHA-1](http://en.wikipedia.org/wiki/SHA-1)哈希。

可能不涉及加密。密码通常不加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:03:41.507

如果您提及您正在使用的应用程序/Web 服务器会有所帮助。应用程序通常不要求其用户知道使用了哪种加密方法。

# c# - Windows 窗体 - ToolStripItem Visible 属性始终设置为 false

> ID：15683820
> 
> 赞同：8
> 
> 时间：2013-03-28T13:58:46.177
> 
> 标签：c#, winforms, toolstripdropdown

我正在开发一个`MDI Windows Forms`应用程序。我的父表单有`ToolStrip`menu 和一些`ToolStripDropDownButtons`. 我想根据用户的许可`Visible`将 or 的属性更改为它具有`ToolStripDropDownButton`的某些`ToolStripItems`（子按钮）。

这是我为管理此问题而编写的方法的一部分：

```
private void SetToolStripDropDownVisibility(ToolStripDropDownButton mainBtn, params ToolStripItem[] item)
{
     mainBtn.Visible = false;
     foreach (ToolStripItem tempItem in item)
     {
         tempItem.Visible = true;
     }
} 
```

我将作为第一个参数`ToolStripDropDownButton`和所有其他“子按钮”作为参数列表传递。`foreach (ToolStripItem tempItem in item)`但是，当我在部分中进入调试模式时，`tempItem`Visible 属性被标记为 false。然而，在设计器中，此属性设置为 true。您可以看到我什至尝试明确地将值更改为 true -`tempItem.Visible = true;`但似乎这条线什么也没做。`Visible`留下的价值，`false`我无法改变。

这只是方法的开始，我想不出其他代码会弄乱这些`ToolStrip`项目。我试图将值更改`mainBtn.Visible`为真或假，认为可能存在任何联系，但似乎这不是问题所在。所以任何想法为什么会发生这种情况，为什么我不能改变`Visible`价值，当然还有任何方式来做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-01T11:22:51.253

解决方案很简单，但并不明显。当我们必须处理`ToolStripItems`其中的一部分`ToolSTripDropDownButton`并解决可见性问题时，就像我们过去使用普通按钮解决它的方式一样，我们必须使用`Available`属性。它正是为此目的而设计的。希望有人能通过阅读本文花更少的时间来处理这个问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:02:10.373

以下将在所有`toolstripitems`范围内进行`menuStrip1`：

```
 List<ToolStripMenuItem> allItems = new List<ToolStripMenuItem>();
            foreach (ToolStripMenuItem toolItem in menuStrip1.Items) 
            {
                allItems.Add(toolItem);
                //add sub items
                allItems.AddRange(GetItems(toolItem));
            }
            foreach (ToolStripMenuItem item in allItems)
            {
                //make your toolstripMenuItem invisible or whatever you want to do with it.
            }
            allItems.Clear(); 
```

更改`menuStrip1`为您所称的任何`toolstrip`.

# encryption - 哪个是我可以用来验证两个相同数据的最快哈希码？

> ID：15683823
> 
> 赞同：0
> 
> 时间：2013-03-28T13:58:49.220
> 
> 标签：encryption, cryptography

我想检查两个数据是否具有相同的值，所以我使用 CRC32 是否比其他哈希函数好。我不需要保安。我正在文件中写入哈希值并检查另一个哈希值以比较两个缓冲区是否相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:32:36.777

1.  CRC32 不是加密功能强大的函数。
2.  遍历数据计算哈希，然后比较哈希与比较数据块本身的速度相同。并且比较数据块可以保证结果，而任何散列都不能（总是有与散列发生冲突的空间）。在将现有散列与新数据进行比较时，散列当然可以更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:07:19.313

CRC32 不是加密哈希函数。这是一个简单的校验和，仅此而已。你想做什么，它需要有多安全？

# c# - C#：从没有管理权限的文件中删除只读属性

> ID：15683824
> 
> 赞同：3
> 
> 时间：2013-03-28T13:58:55.163
> 
> 标签：c#, file, attributes, readonly

如果用户不是管理员，有没有办法删除文件的只读属性？

如果您是管理员，这可以工作，但如果您不是管理员怎么办？

```
FileInfo myFile = new FileInfo(pathToFile);
myFile.IsReadOnly = false; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T14:02:01.220

您需要对该文件具有读/写权限。

我最好使用这样的方法：

```
FileSystemInfo fsi = new FileSystemInfo(pathToFile);
fsi.Attributes = FileAttributes.Normal; 
```

或者

```
File.SetAttributes(pathToFile, FileAttributes.Normal); 
```

但正如我所说，如果没有特定文件的读/写权限，这是不可能的。

# php - htaccess 最佳实践

> ID：15683837
> 
> 赞同：5
> 
> 时间：2013-03-28T13:59:42.963
> 
> 标签：php, mod-rewrite

我想得到这个最终的网址：

'理想网址'

```
domain/services/city/name/ 
```

从这个网址：

'真实网址'

```
domain/page.php?s=services&c=city&a=name 
```

这在用户键入“理想”网址和从按钮单击“真实”网址时都应该有效。

我希望这也适用于`domain/services/`as`domain/page.php?s=services`或`domain/services/city/`as `domain/page.php?s=services&c=city`。

我不是在问代码，而是在问什么是实现这个结果的最佳实践。

我应该只使用 htaccess 并为每种情况编写命令，还是必须做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:13:38.483

你必须使用`.htaccess`off course，是要走的路。

一个规则是：

```
 RewriteEngine On

 <IfModule mod_rewrite.c>
      RewriteEngine On 
      RewriteRule ^([^/.]+)/([^/.]+)/([^/.]*)?$ page.php?s=$1&c=$2&a=$3&%{QUERY_STRING}
  </IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:13:21.677

最佳实践是编写查询解析器。请参阅 TinyMVC 框架中的示例，或 serach google 中的路由器、前端控制器、调度程序等。

这可能很难实现，因为您有自定义参数名称，例如“c”和“a”。因此，您必须编写一些映射，将人类可读的参数名称分配给变量名称，例如：

```
'city' => 'c'
'name' => 'a' 
```

您的查询解析器还可以通过某种方式自动分配变量，例如：

```
/domain/services/c=london/n=peter/ 
```

如果您将所有请求重新映射到 .htaccess 中的一个 php 文件（通常是 index.php），这种调度程序可以与您的所有链接一起运行，不包括图像、swf、css、js 等。

您将决定如何规划您的 url 路由逻辑。记住特殊字符和 url 编码。

考虑按数字顺序获取参数值，例如“第一个参数”、“第二个参数”，以创建通用 url 模式，例如 /module/action/param1/param2/ 等。因此，您始终可以通过数字获取参数，而与参数名称无关。

您当然可以在 htaccess 中编写命令，但是添加新操作时会出现问题。

如果即使用户单击链接、提交表单等，您也想提升那些“理想”的 url，您不能只更改 .htaccess 或编写路由器。您还必须更改代码中的链接/操作或编写 URL 构建器，例如

`<a href="<?php buildUrl( 'modulke' , 'action' , 'param1' , 'param2' ); ?>">aaaa</a>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:16:57.007

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# redirects /page.php?s=services&c=city&a=name to /services/city/name/
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+page\.php\?s=([^&]+)&c=([^&]+)&a=([^&]+) [NC]
RewriteRule ^ /%1/%2/%3? [R=301,L]

# forwards /services/city/name/to /page.php?s=services&c=city&a=name
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /page.php?s=$1&c=$2&a=$3 [L,QSA] 
```

**PS：**请注意，上述规则仅处理`/services/city/name/`URI。要处理`/services/city/`，`/services/`您需要添加类似的规则集（每个 URI 1 个重定向和 1 个转发；从最具体到最通用）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:21:33.847

[http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)有你正在寻找开始的所有答案。

正如@Uberfuzzy 所说，最好的做法是首先定义最具体的，这样：

```
RewriteRule    ^domain/services/city    domain/page.php?s=services&c=city    [NC,L]
RewriteRule    ^domain/services/        domain/page.php?s=services           [NC,L] 
```

您通常需要使用 htaccess 并为每种情况编写命令。例外情况是当您使用框架（Zend Framewor）或其他为您处理 url 重写的工具时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:12:54.830

您可以移动决策逻辑，某种在 php 端的调度程序上。在 htacess 中，通过某种模式将任何不存在的 url 重定向到某些 /index.php?url=$bla 或 /rewrite.php?url=$bla

然后从那里包含您的代码。大多数框架都以这种方式工作。

这里的主要问题是忽略 100% 非 php 代码，例如不存在的图像、CSS、javascript 等。

# c++ - HLS 流在 iPad1 上滞后（在 iPad2 上正常播放）

> ID：15683838
> 
> 赞同：0
> 
> 时间：2013-03-28T13:59:43.413
> 
> 标签：c++, ios, http-live-streaming

我们有自己的 HLS 流服务器实现，但是当我们在真实设备上测试它的流时，存在一个问题。在 iPad2 上看起来不错。在 iPad1 上，大多数时候，它看起来与 iPad2 上的相似![在此处输入图像描述](../Images/76093d479a5c81b5978dc2685c270753.png)

但有时，它会滞后，看起来像：![在此处输入图像描述](../Images/a9e98a4c3f4048e27448a3f276854b8e.png)几秒钟。哪些视频设置可以使 iPad1 以这种方式显示视频，而在 iPad 2 上它运行良好？我首先需要以什么方式思考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:18:26.060

问题，我几乎可以 100% 肯定地说，原来的 iPad 运行的处理器大约是 iPad 2 处理器图形能力的 40%。因此，原来的 iPad 在玩大游戏时总是会滞后（甚至小）视频文件。

# java - ActionBar.setHomeButtonEnabled 中的 NullPointerException

> ID：15683842
> 
> 赞同：9
> 
> 时间：2013-03-28T13:59:53.867
> 
> 标签：java, android

晚上好。我有`android:minSdkVersion="14" android:targetSdkVersion="16"`

我在 onCreate 方法中有一个 NullPointerException：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tain);

    mCollectionPagerAdapter = new CollectionPagerAdapter(
            getSupportFragmentManager());

    final ActionBar actionBar = getActionBar();

    //Here is the error
    actionBar.setHomeButtonEnabled(false);

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mCollectionPagerAdapter);
    mViewPager.setOnPageChangeListener(
            new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

        for (int i = 0; i < mCollectionPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setText(mCollectionPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

} 
```

我在其他项目中有一个类似的代码，它工作正常。两个项目中的库版本也相似。什么可能导致此异常，我可以更改什么？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T14:06:26.817

在您的清单中确保您的活动具有（类似的）：

```
<activity android:theme="@android:style/Theme.Holo"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T14:07:08.880

您的错误是由该`getActionBar()`方法引起的。

检查此链接：

[getActionBar() 返回 null](https://stackoverflow.com/questions/6867076/getactionbar-returns-null)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-20T17:38:42.127

删除清单文件中的 android:theme="@style/AppTheme"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T17:42:26.293

对 AndroidManifest 文件进行以下更改对我有用

```
 @android:style/Theme.Holo.Light.DarkActionBar 
```

# javascript - Google Analytics（分析）虚拟浏览量跟踪代码不一致地记录浏览量

> ID：15683845
> 
> 赞同：1
> 
> 时间：2013-03-28T13:59:56.513
> 
> 标签：javascript, cookies, google-analytics, analytics

我正在使用 Javascript 图像库，其中下一个/上一个转换记录浏览器历史记录，或者至少通过更改 URL 和后退按钮行为来伪造它。

因此，如果画廊位于：

`http:://example.com/gallery/`

“下一张”按钮将您带到下一张照片，JavaScript 将 URL 转换为：

`http://example.com/gallery/#/1`

在画廊的下一个/上一个`onclick`活动中，我有这样的事情：

```
var loc =  window.location; 
_gaq.push(['_trackPageview', loc]); 
```

因此，在默认概览（当前月份）的 Google Analytics（分析）仪表板中，图库显示了网页浏览量与访问者相比的预期上升......它相当大，大约 200%。但是，当我们将时间范围限制为一天（画廊上线的第一天，也是它获得大部分流量的那一天）时，它的*浏览量*会下降到我们每篇文章的典型浏览量在我们的网站上有。

我不知道这是否是 GA 汇总中的侥幸，即月度统计比单个日统计更新。但是，我也想知道我发送它的时髦 URL 结构`_trackPageview`是否不符合犹太教规。也就是说，`gallery/#/number`结构，特别是主题标签，不会导致正确的 cookie 操作。

但我可能只是不正确地使用了 GA 代码（异步版本）。所以不确定我现在处于哪种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T08:09:37.627

如果内容是通过 AJAX 加载的，最好使用[虚拟浏览量](https://stackoverflow.com/questions/21032351/analytics-on-a-bootstrap-modal-with-pageview-and-time-related-metrics/)或事件进行跟踪。

但是，如果你想像现在这样发送位置，我认为发送`window.location`是一种错误的方式。这是因为`window.location`是一个对象，而不是一个字符串。您必须发送`window.location.href`包含完整 URL 的字符串。但这也将包含协议（http:// 或 https://）和域名（subdomain.domain.com/），因此您必须使用它。或者，如果您不需要 Google Analytics (GA) 和 Universal Analytics (UA) 默认情况下都不会跟踪的查询字符串，请将其发送为`window.location.pathname`，这将是 GA/UA 期望的相对路径。

希望有帮助。:)

我建议您尽快迁移到UA。GA 即将退役。

# ruby-on-rails - /usr/bin/gem:8:in `require': 没有要加载的文件 -- ruby gems

> ID：15683847
> 
> 赞同：0
> 
> 时间：2013-03-28T14:00:02.917
> 
> 标签：ruby-on-rails, gem

我安装和卸载 ruby​​ 1.8 和 1.9，然后再次安装，现在我迷路了......

“宝石”不起作用......这是我得到的唯一消息：

> /usr/bin/gem:8:in `require': 没有要加载的文件——来自 /usr/bin/gem:8 的ruby​​gems (LoadError)

gem -v - 返回相同的结果

* * *

说明：Ubuntu 10.04.4 LTS

哪个红宝石：
/usr/bin/ruby

哪个宝石
/usr/bin/gem

ruby -v
ruby​​ 1.8.7 (2010-01-10 补丁级别 249) [x86_64-linux]

apt-get install ruby ​​gems ruby
​​gems 已经是最新版本。

rails -v
getopt: 无效选项 -- 'v'
终止...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:27:05.203

您必须使用 apt-get 卸载，然后重新安装 ruby​​。您说您已经安装了两个不同版本的 ruby​​（1.8.x 和 1.9.x），所以都必须安装。

```
sudo apt-get uninstall ruby1.8
sudo apt-get uninstall ruby
sudo apt-get purge ruby1.8
sudo apt-get purge ruby
sudo apt-get autoremove --purge 
```

如果 purge 和 autoremove 命令告诉您什么都没做，请不要担心。

现在做：

```
sudo apt-get install ruby 
```

这将为您提供 ruby​​ 版本 1.9.3——这是我使用 apt-get 的最新版本。完成后，请执行以下操作：

```
gem list --local 
```

你应该得到一个简短的清单。

要获得轨道，请执行以下操作：

```
sudo apt-get install rails 
```

# hibernate - 运行时异常：使用@OneToMany 或@ManyToMany 针对未映射的类

> ID：15683848
> 
> 赞同：3
> 
> 时间：2013-03-28T14:00:04.440
> 
> 标签：hibernate, hibernate-mapping

请问有人可以帮助我吗？当我在 Client.class 中保存数据时出现此错误

客户端类

```
package com.pojo;

import java.io.Serializable;
import java.util.List;
import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;

@Entity
public class Client implements Serializable {
private String Name;
private String Address;
private float balance;
@Id
@GeneratedValue
private int client_id;

@OneToMany(targetEntity=Ledger.class,mappedBy="client",cascade= CascadeType.ALL,fetch= FetchType.EAGER)
private List<Ledger> ledger;

public float getBalance() {
    return balance;
}

public void setBalance(float balance) {
    this.balance = balance;
}

public List<Ledger> getLedger() {
    return ledger;
}

public void setLedger(List<Ledger> ledger) {
    this.ledger = ledger;
}

public String getAddress() {
    return Address;
}

public void setAddress(String Address) {
    this.Address = Address;
}

public String getName() {
    return Name;
}

public void setName(String Name) {
    this.Name = Name;
}

public int getClient_id() {
    return client_id;
}

public void setClient_id(int client_id) {
    this.client_id = client_id;
}

} 
```

分类帐类

```
package com.pojo;

import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;

@Entity
public class Ledger implements Serializable {
@Id
private int id;
@ManyToOne
private Client client;
private Date date_of_purchase;

@OneToMany(targetEntity=QuantityBought.class,mappedBy="belongs_to_ledger",cascade= CascadeType.ALL,fetch= FetchType.EAGER)
private List<QuantityBought> quantitybought;
private float sum_total;

public Client getClient() {
    return client;
}

public void setClient(Client client) {
    this.client = client;
}

public Date getDate_of_purchase() {
    return date_of_purchase;
}

public void setDate_of_purchase(Date date_of_purchase) {
    this.date_of_purchase = date_of_purchase;
}

    public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}
    public List<QuantityBought> getQuantitybought() {
    return quantitybought;
}

public void setQuantitybought(List<QuantityBought> qb) {
    this.quantitybought = qb;
}

public float getSum_total() {
    return sum_total;
}

public void setSum_total(float sum_total) {
    this.sum_total = sum_total;
}
} 
```

当我通过 servlet 添加数据时：

```
response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    AnnotationConfiguration ac=new AnnotationConfiguration();
    ac.addAnnotatedClass(Client.class);
    ac.configure();
    SessionFactory factory=ac.buildSessionFactory();
    Session s=factory.openSession();
    try {
       Client c=new Client();
       c.setAddress(request.getParameter("address"));
       c.setBalance(Float.parseFloat(request.getParameter("balance")));
       c.setName(request.getParameter("name"));
       QuantityBought qb=new QuantityBought();
       Ledger l=new Ledger();
       l.getQuantitybought().add(qb);
       c.getLedger().add(l);

       s.beginTransaction().begin();
       s.save(c);
       s.beginTransaction().commit();
        response.sendRedirect("../Project_pepsi/front.jsp");
    }catch(Exception e)
    {
    out.print(e);
    }
    finally {            
        out.close();
        s.close();
        factory.close();

    } 
```

它显示此错误..

```
org.hibernate.AnnotationException: Use of @OneToMany or @ManyToMany targeting an unmapped class: com.pojo.Client.ledger[com.pojo.Ledger] 
```

请有人帮助我..:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:34:44.993

您忘记添加 `ac.addAnnotatedClass(Ledger.class);` 到您的 Hibernate 配置

以及`QuantityBought`_

无论如何，您不想`SessionFactory`为每个 servlet 调用创建一个

# highcharts - 关闭 Highcharts 工具提示的可点击 HTML 元素

> ID：15683850
> 
> 赞同：0
> 
> 时间：2013-03-28T14:00:05.610
> 
> 标签：highcharts

我需要实现一个带有关闭图标的工具提示，如果点击它将关闭工具提示。该图标是使用格式化程序函数 jsFiddle 呈现的 HTML 元素：http: [//jsfiddle.net/e56KT/](http://jsfiddle.net/e56KT/)

```
<div>Clickable close</div> 
```

是一个将被图标替换的节点）。

有没有办法实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:27:12.157

您可以使用隐藏工具提示`chart.tooltip.hide()`，例如：http: [//jsfiddle.net/e56KT/1/](http://jsfiddle.net/e56KT/1/)

# haskell - Haskell 在 3 部分元组上执行 fst

> ID：15683851
> 
> 赞同：12
> 
> 时间：2013-03-28T14:00:07.867
> 
> 标签：haskell

我有以下 Haskell 元组：

```
 [("string",1,1)] 
```

我需要提取其中的第一个元素，显然使用 'fst' 在这里不起作用，因为有 3 个组件。

最好的使用方法是什么？[塞尔](http://hackage.haskell.org/packages/archive/tuple/0.2.0.1/doc/html/Data-Tuple-Select.html)？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T14:04:05.093

您可以为此键入自己的函数（我们将使用模式匹配）：

```
fst3 :: (a, b, c) -> a
fst3 (x, _, _) = x 
```

你像这样使用它：

```
fst3 ("string", 1, 1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T14:20:19.743

`sel`可以通过以下方式使用：

```
$ cabal install tuple
$ ghci
>>> :m +Data.Tuple.Select
>>> sel1 ("string",1,1)
"string" 
```

它与任何其他功能一样工作`map`

```
>>> map sel1 [("One",1,0),("Two",2,0),("Three",3,0)]
["One","Two","Three"] 
```

主要优点是它适用于更大的元组

```
>>> sel1 ("string",1,1,1)
"string" 
```

以及标准元组

```
>>> sel1 ("string",1)
"string" 
```

因此无需单独处理它们。

* * *

更多示例：

```
>>> map sel2 [("One",1,0),("Two",2,0),("Three",3,0)]
[1,2,3]
(0.06 secs, 4332272 bytes)
>>> map sel3 [("One",1,0),("Two",2,0),("Three",3,0)]
[0,0,0]
(0.01 secs, 2140016 bytes)
>>> map sel4 [("One",1,0),("Two",2,0),("Three",3,0)]

<interactive>:6:5:
.... error 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T16:22:44.037

您还可以使用 [镜头](http://hackage.haskell.org/package/lens)包：

```
> import Control.Lens
> Prelude Control.Lens> view _1 (1,2)  -- Or (1,2) ^. _1
1
> Prelude Control.Lens> view _1 (1,2,3) -- Or (1,2,3) ^. _1
1
> Prelude Control.Lens> view _1 (1,2,3,4) -- Or (1,2,3,4) ^. _1
1
> Prelude Control.Lens> view _1 (1,2,3,4,5) -- Or (1,2,3,4,5) ^. _1
1 
```

这不仅适用于第一个元素

```
> import Control.Lens
> Prelude Control.Lens> view _2 (1,2)  -- Or (1,2) ^. _2
2
> Prelude Control.Lens> view _3 (1,2,3) -- Or (1,2,3) ^. _3
3
> Prelude Control.Lens> view _4 (1,2,3,4) -- Or (1,2,3,4) ^. _4
4
> Prelude Control.Lens> view _5 (1,2,3,4,5) -- Or (1,2,3,4,5) ^. _5
5 
```

我还写了一个类似问题的答案，不仅涵盖元组： [https ://stackoverflow.com/a/23860744/128583](https://stackoverflow.com/a/23860744/128583)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-28T14:08:49.893

我只想定义一个函数

```
fst3 :: (a,b,c) -> a
fst3 (x,_,_) = x 
```

这很容易理解并且没有奇怪的类型（类型可能会令人困惑`sel1`）`Sel1 a b => a -> b`

或者您可以通过模式匹配提取您感兴趣的值，如`[x | (x,_,_) <- myThreeTupleList`.

最后，最好的解决方案是使用更结构化的数据类型！当然，字符串和两个整数具有更多含义，以某种方式对其进行编码是个好主意……

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-28T14:06:13.483

你可以这样做：

```
Prelude> let [(a,_,_)]=[("string",1,1)]
Prelude> a
"string" 
```

# asp.net - 如何使用转换语法更改 web.config 设置？

> ID：15683854
> 
> 赞同：21
> 
> 时间：2013-03-28T14:00:18.103
> 
> 标签：asp.net, web-config, config-transformation

我的 web.config 文件中存储了一个值，我想在网站发布时更改该值。我想将其从 TEST 更改为 LIVE。

```
<appSettings>
    <add key="RequestMode" value="TEST" />
    // other keys here
</appSettings> 
```

这可以使用 web.config 转换语法吗？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-28T14:03:42.787

是的，这可以通过转换语法实现。这种转换应该可以解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <appSettings>
    <add key="RequestMode" value="LIVE" xdt:Transform="SetAttributes" xdt:Locator="Match(key)"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:06:49.270

这可以使用 Visual Studio 2010 开箱即用。唯一需要注意的是，当您使用其中的发布工具时，此过程是在 Visual Studio 中运行的。您将无法从 MSBuild 获得这种转换（这会妨碍自动构建）。

```
<appSettings xdt:Transform="Replace">  <add key="ProdKeyA" value="ProdValA"/>  <add key="ProdKeyB" value="ProdValB"/>  <add key="ProdKeyC" value="ProdValC"/></appSettings> 
```

来源：[Web.Config 转换 VS 2010](http://weblogs.asp.net/srkirkland/archive/2009/10/13/common-web-config-transformations-with-visual-studio-2010.aspx)

还要确保您的 Web.Config.XXXX 转换文件与您的构建定义相匹配。例如，默认情况下支持调试和发布，因此您需要有一个 Web.Config.Release 以在发布模式下发布时调整 Web.Config。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T10:23:39.170

我在[http://mundrisoft.com/tech-bytes/web-config-transformation-for-project-deployment/](http://mundrisoft.com/tech-bytes/web-config-transformation-for-project-deployment/)找到了以下代码，该代码正在运行：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <connectionStrings>
    <add name="MyDB" 
      connectionString="ReleaseSQLServer" 
      xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
  </connectionStrings>
</configuration 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T09:55:18.533

您还可以使用 CTT 工具执行 Web 转换[CTT 网站](https://ctt.codeplex.com) 您可以在发布文件后，在部署之前使用 powershell 转换 Web 配置（保留转换文件），然后在部署期间简单地更改名称

# crash - 由于 Hibernate session.createQuery() 导致应用程序实例终止

> ID：15683856
> 
> 赞同：0
> 
> 时间：2013-03-28T14:00:20.290
> 
> 标签：crash, jvm

我们在 session.createQuery() 处面临 Web 应用程序实例终止

我们使用的是 Linux 和 jboss-4.0.3 AS 版本，因为它给出了以下异常我们每次调用它时都没有遇到问题，但有时我们会遇到问题。

```
HibernateTemplate hibernateTemplate = HibernateUtil.getHibernateTemplate();
session = hibernateTemplate.getSessionFactory().openSession();
session.createQuery("update  PpmTaridApproveSLAEntity  set slaStartTimeStamp=to_date('"
                                    + slastarttime
                                    + "','YYYY-MM-DD HH24:MI:SS') ,slaEndTimeStamp=to_date('"
                                    + slaendtime
                                    + "','YYYY-MM-DD HH24:MI:SS'),APPROVEDTIME=to_date('"
                                    + approveTime
                                    + "','YYYY-MM-DD HH24:MI:SS'),status ='"
                                    + status + "', source= '" + source
                                    + "',target='" + target
                                    + "',rejectremarks='" + rejectremarks
                                    + "',SLAFINALVAL='" + slafinavalue + "'"
                                    + " ,APPROVED_BY='" + userid + "'"
                                    + " ,USERNAME='" + username + "'"   
                                    + "  where tarid='" + tarid + "'").executeUpdate(); 
```

在此错误之后，jboss 实例将自动终止（JVM 正在崩溃）。请找到以下 JVM 日志：

```
 2013-03-07 16:41:24,109 WARN  [org.apache.catalina.loader.WebappClassLoader] Failed to open JAR
    java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:203)
        at java.util.jar.JarFile.<init>(JarFile.java:132)
        at java.util.jar.JarFile.<init>(JarFile.java:97)
        at org.apache.catalina.loader.WebappClassLoader.openJARs(WebappClassLoader.java:1544)
        at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:1763)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1570)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at com.tcs.telecom.ppm.actions.CrystalBallEmpowerAction.submitCase(CrystalBallEmpowerAction.java:105)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:274)
        at org.apache.struts.actions.LookupDispatchAction.execute(LookupDispatchAction.java:160)
        at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)
        at com.tcs.telecom.ppm.actions.PPMRequestProcessor.processActionPerform(PPMRequestProcessor.java:34)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at com.tcs.telecom.ppm.filter.SessionIdFilter.doFilter(SessionIdFilter.java:66)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at com.tcs.telecom.ppm.filter.LoginFilter.doFilter(LoginFilter.java:500)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:159)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
        at java.lang.Thread.run(Thread.java:595)
    2013-03-07 16:41:24,111 WARN  [org.apache.catalina.loader.WebappClassLoader] Failed to open JAR
    java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:203)
        at java.util.jar.JarFile.<init>(JarFile.java:132)
        at java.util.jar.JarFile.<init>(JarFile.java:97)
        at org.apache.catalina.loader.WebappClassLoader.openJARs(WebappClassLoader.java:1544)
        at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:1763)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1570)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at com.tcs.telecom.ppm.actions.CrystalBallEmpowerAction.submitCase(CrystalBallEmpowerAction.java:105)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:274)
        at org.apache.struts.actions.LookupDispatchAction.execute(LookupDispatchAction.java:160)
        at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)
        at com.tcs.telecom.ppm.actions.PPMRequestProcessor.processActionPerform(PPMRequestProcessor.java:34)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at com.tcs.telecom.ppm.filter.SessionIdFilter.doFilter(SessionIdFilter.java:66)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at com.tcs.telecom.ppm.filter.LoginFilter.doFilter(LoginFilter.java:500)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:159)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
        at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:38:26.937

有几次当我有这样的奇怪行为时，我追踪到重复的 jar 文件。

在休眠的情况下，JBoss 中可能有一个 hibernate3.jar 文件，并且在部署到服务器的一个或多个应用程序（如 war 或 ear 文件）中也有一个 hibernate3.jar。我什至遇到过 hibernate3.jar 在同一个 JBoss 安装中出现两次导致问题的情况。

# django - 在 Django forms.ChoiceField 上获取选定的值

> ID：15683857
> 
> 赞同：3
> 
> 时间：2013-03-28T14:00:28.767
> 
> 标签：django, django-forms

我正在研究 Django，我需要知道如何在`forms.ChoiceField`

表格.py

```
class FilterForm(forms.Form):
    continent = forms.ChoiceField(choices=Select_continent()) 
```

我试过：views.py

```
def Select_continent():
    db = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor = db.cursor()
    sql = "SELECT Continent FROM myform_servercomponents"

    try:
        cursor.execute(sql)
        results = cursor.fetchall()
        continents = []
        i=0
        for row in results:
            continents.append(('i',row[0]))
            i+=1
    except:
        print "Error: unable to fetch data"
    db.close()
    return continents
def affiche_all(request, currency):
    if request.method == 'POST':                                                                                                                                                 
        form = FilterForm(request.POST)                                                                                                                                            
        if form.is_valid() : 
            Continent = form.cleaned_data['Continent']
            Continent = dict(form.fields['Continent'])[Continent]
            url = reverse('affiche_all', args=(),   kwargs={'continent': Continent})
            return HttpResponseRedirect(url) 
```

但`Continent`总是返回最后一个值，`ChoiceField`我需要的是选定的值。
有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:18:47.600

`dict(form.fields['Continent'])`看起来很奇怪，你的意思是：

```
continent = dict(continents())[form.cleaned_data['Continent']]
# or
continent = dict(form.fields['Continent'].choices)[form.cleaned_data['Continent']] 
```

PS我已经使用`continent`而不是`Continent`作为变量名。带有第一个大写字母的名称通常用于命名类。

# c# - RestSharp 打印原始请求和响应标头

> ID：15683858
> 
> 赞同：78
> 
> 时间：2013-03-28T14:00:33.373
> 
> 标签：c#, restsharp

我[`RestSharp`](http://restsharp.org/)用来调用网络服务。一切都很好，但我想知道是否可以打印发出的原始请求标头和正文以及返回的原始响应标头和响应正文。

这是我创建请求并获得响应的代码

```
public static TResponse ExecutePostCall<TResponse, TRequest>(String url, TRequest requestData, string token= "") where TResponse : new()
{
    RestRequest request = new RestRequest(url, Method.POST);
    if (!string.IsNullOrWhiteSpace(token))
    {
        request.AddHeader("TOKEN", token);
    }

    request.RequestFormat = DataFormat.Json;
    request.AddBody(requestData);

    // print raw request here

    var response = _restClient.Execute<TResponse>(request);

    // print raw response here

    return response.Data;
} 
```

那么，是否可以打印原始请求和响应？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2016-05-19T09:51:56.550

RestSharp 没有提供一种机制来准确实现您想要的功能，并且激活 .Net 跟踪对 IMO 来说有点矫枉过正。

出于记录（调试）目的（例如，我可以在 PROD 中打开一段时间），我发现这种方法非常有用（尽管它有一些关于如何调用它的详细信息，请阅读下面的代码）：

```
private void LogRequest(IRestRequest request, IRestResponse response, long durationMs)
{
        var requestToLog = new
        {
            resource = request.Resource,
            // Parameters are custom anonymous objects in order to have the parameter type as a nice string
            // otherwise it will just show the enum value
            parameters = request.Parameters.Select(parameter => new
            {
                name = parameter.Name,
                value = parameter.Value,
                type = parameter.Type.ToString()
            }),
            // ToString() here to have the method as a nice string otherwise it will just show the enum value
            method = request.Method.ToString(),
            // This will generate the actual Uri used in the request
            uri = _restClient.BuildUri(request),
        };

        var responseToLog = new
        {
            statusCode = response.StatusCode,
            content = response.Content,
            headers = response.Headers,
            // The Uri that actually responded (could be different from the requestUri if a redirection occurred)
            responseUri = response.ResponseUri,
            errorMessage = response.ErrorMessage,
        };

        Trace.Write(string.Format("Request completed in {0} ms, Request: {1}, Response: {2}",
                durationMs, 
                JsonConvert.SerializeObject(requestToLog),
                JsonConvert.SerializeObject(responseToLog)));
} 
```

**注意事项：**

*   标头、Url 段、QueryString 参数、正文等都被视为 RestSharp 的参数，所有这些都出现在请求的参数集合中，并具有相应的类型。
*   必须在请求发生后调用 log 方法。这是需要的，因为 RestSharp 的工作方式，Execute 方法将添加标头，运行身份验证器（如果已配置）等，所有这些都将修改请求。因此，为了记录所有发送的真实参数，应该在记录请求之前调用 Execute 方法。
*   RestSharp 本身永远不会抛出（而是将错误保存在 response.ErrorException 属性中），但我认为反序列化可能会抛出（不确定）而且我需要记录原始响应，所以我选择实现自己的反序列化。
*   请记住，RestSharp 在转换参数值以生成 Uri 时使用自己的格式，因此序列化参数以记录它们可能不会显示与放入 Uri 完全相同的内容。这就是为什么`IRestClient.BuildUri`获取实际调用的 Uri（包括基本 url、替换的 url 段、添加的 queryString 参数等）的方法非常酷的原因。
*   **编辑：**还请记住，RestSharp 用于正文的序列化程序可能与此代码使用的不同，所以我猜代码可以调整为`request.JsonSerializer.Serialize()`用于呈现正文参数（我没有尝试过） .
*   需要一些自定义代码来在日志中对枚举值进行很好的描述。
*   `StopWatch`可以移动使用以在测量中包括反序列化。

这是一个带有日志记录的基本完整基类示例（使用 NLog）：

```
using System;
using System.Diagnostics;
using System.Linq;
using NLog;
using Newtonsoft.Json;
using RestSharp;

namespace Apis
{
    public abstract class RestApiBase
    {
        protected readonly IRestClient _restClient;
        protected readonly ILogger _logger;

        protected RestApiBase(IRestClient restClient, ILogger logger)
        {
            _restClient = restClient;
            _logger = logger;
        }

        protected virtual IRestResponse Execute(IRestRequest request)
        {
            IRestResponse response = null;
            var stopWatch = new Stopwatch();

            try
            {
                stopWatch.Start();
                response = _restClient.Execute(request);
                stopWatch.Stop();

                // CUSTOM CODE: Do more stuff here if you need to...

                return response;
            }
            catch (Exception e)
            {
                // Handle exceptions in your CUSTOM CODE (restSharp will never throw itself)
            }
            finally
            {
                LogRequest(request, response, stopWatch.ElapsedMilliseconds);
            }

            return null;
        }

        protected virtual T Execute<T>(IRestRequest request) where T : new()
        {
            IRestResponse response = null;
            var stopWatch = new Stopwatch();

            try
            {
                stopWatch.Start();
                response = _restClient.Execute(request);
                stopWatch.Stop();

                // CUSTOM CODE: Do more stuff here if you need to...

                // We can't use RestSharp deserialization because it could throw, and we need a clean response
                // We need to implement our own deserialization.
                var returnType = JsonConvert.DeserializeObject<T>(response.Content);
                return returnType;
            }
            catch (Exception e)
            {
                // Handle exceptions in your CUSTOM CODE (restSharp will never throw itself)
                // Handle exceptions in deserialization
            }
            finally
            {
                LogRequest(request, response, stopWatch.ElapsedMilliseconds);
            }

            return default(T);
        }

        private void LogRequest(IRestRequest request, IRestResponse response, long durationMs)
        {
            _logger.Trace(() =>
            {
                var requestToLog = new
                {
                    resource = request.Resource,
                    // Parameters are custom anonymous objects in order to have the parameter type as a nice string
                    // otherwise it will just show the enum value
                    parameters = request.Parameters.Select(parameter => new
                    {
                        name = parameter.Name,
                        value = parameter.Value,
                        type = parameter.Type.ToString()
                    }),
                    // ToString() here to have the method as a nice string otherwise it will just show the enum value
                    method = request.Method.ToString(),
                    // This will generate the actual Uri used in the request
                    uri = _restClient.BuildUri(request),
                };

                var responseToLog = new
                {
                    statusCode = response.StatusCode,
                    content = response.Content,
                    headers = response.Headers,
                    // The Uri that actually responded (could be different from the requestUri if a redirection occurred)
                    responseUri = response.ResponseUri,
                    errorMessage = response.ErrorMessage,
                };

                return string.Format("Request completed in {0} ms, Request: {1}, Response: {2}",
                    durationMs, JsonConvert.SerializeObject(requestToLog),
                    JsonConvert.SerializeObject(responseToLog));
            });
        }
    }
} 
```

此类将记录类似这样的内容（非常适合在此处粘贴）：

```
Request completed in 372 ms, Request : {
    "resource" : "/Event/Create/{hostId}/{startTime}",
    "parameters" : [{
            "name" : "hostId",
            "value" : "116644",
            "type" : "UrlSegment"
        }, {
            "name" : "startTime",
            "value" : "2016-05-18T19:48:58.9744911Z",
            "type" : "UrlSegment"
        }, {
            "name" : "application/json",
            "value" : "{\"durationMinutes\":720,\"seats\":100,\"title\":\"Hello StackOverflow!\"}",
            "type" : "RequestBody"
        }, {
            "name" : "api_key",
            "value" : "123456",
            "type" : "QueryString"
        }, {
            "name" : "Accept",
            "value" : "application/json, application/xml, text/json, text/x-json, text/javascript, text/xml",
            "type" : "HttpHeader"
        }
    ],
    "method" : "POST",
    "uri" : "http://127.0.0.1:8000/Event/Create/116644/2016-05-18T19%3A48%3A58.9744911Z?api_key=123456"
}, Response : {
    "statusCode" : 200,
    "content" : "{\"eventId\":2000045,\"hostId\":116644,\"scheduledLength\":720,\"seatsReserved\":100,\"startTime\":\"2016-05-18T19:48:58.973Z\"",
    "headers" : [{
            "Name" : "Access-Control-Allow-Origin",
            "Value" : "*",
            "Type" : 3
        }, {
            "Name" : "Access-Control-Allow-Methods",
            "Value" : "POST, GET, OPTIONS, PUT, DELETE, HEAD",
            "Type" : 3
        }, {
            "Name" : "Access-Control-Allow-Headers",
            "Value" : "X-PINGOTHER, Origin, X-Requested-With, Content-Type, Accept",
            "Type" : 3
        }, {
            "Name" : "Access-Control-Max-Age",
            "Value" : "1728000",
            "Type" : 3
        }, {
            "Name" : "Content-Length",
            "Value" : "1001",
            "Type" : 3
        }, {
            "Name" : "Content-Type",
            "Value" : "application/json",
            "Type" : 3
        }, {
            "Name" : "Date",
            "Value" : "Wed, 18 May 2016 17:44:16 GMT",
            "Type" : 3
        }
    ],
    "responseUri" : "http://127.0.0.1:8000/Event/Create/116644/2016-05-18T19%3A48%3A58.9744911Z?api_key=123456",
    "errorMessage" : null
} 
```

希望你觉得这个有用！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-24T14:00:51.647

.net provides its own yet powerful logging feature. This can be turned on via config file.

I found this tip [here](https://groups.google.com/forum/#!topic/restsharp/OizC-C06PcI). John Sheehan pointed to [How to: Configure Network Tracing](http://msdn.microsoft.com/en-us/library/ty48b824.aspx) article. (a note: I edited the config provided, turned off unnecessary (for me) low level logging).

```
 <system.diagnostics>
    <sources>
      <source name="System.Net" tracemode="protocolonly" maxdatasize="1024">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Cache">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Http">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="System.Net" value="Verbose"/>
      <add name="System.Net.Cache" value="Verbose"/>
      <add name="System.Net.Http" value="Verbose"/>
      <add name="System.Net.Sockets" value="Verbose"/>
      <add name="System.Net.WebSockets" value="Verbose"/>
    </switches>
    <sharedListeners>
      <add name="System.Net"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="network.log"
      />
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-26T21:25:53.437

我刚刚在 RestSharp 示例中找到了以下代码。它允许您打印原始响应。

```
client.ExecuteAsync(request, response =>
                   {
                       Console.WriteLine(response.Content);
                   }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-18T23:28:50.590

您必须遍历`request.Parameters`列表并将其格式化为您喜欢的任何格式的字符串。

```
var sb = new StringBuilder();
foreach(var param in request.Parameters)
{
    sb.AppendFormat("{0}: {1}\r\n", param.Name, param.Value);
}
return sb.ToString(); 
```

如果您希望输出显示请求标头，然后显示类似于 Fiddler 的正文，您只需按请求标头然后按请求正文对集合进行排序。集合中的`Parameter`对象有一个`Type`参数枚举。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-14T09:14:40.673

您可以使用[Fiddler](http://www.telerik.com/fiddler)来捕获 HTTP 请求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-29T11:33:49.953

一个选项是使用您自己的身份验证器。RestSharp 允许注入验证器：

```
var client = new RestClient();
client.Authenticator = new YourAuthenticator(); // implements IAuthenticator

public interface IAuthenticator
{
    void Authenticate(IRestClient client, IRestRequest request);
}

internal class YourAuthenticator: IAuthenticator
{
  public void Authenticate(IRestClient client, IRestRequest request)
  {
    // log request
  }
} 
```

> 身份验证器的 Authenticate 方法是调用 RestClient.Execute 或 RestClient.Execute 时调用的第一件事。[Authenticate 方法被传递给当前正在执行的 RestRequest，使您可以访问来自 RestSharp 的 wiki](https://github.com/restsharp/RestSharp/wiki/Authenticators)的请求数据的每个部分（标头、参数等）

这意味着您可以在 Authenticate 方法中记录请求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-01T11:39:54.867

作为部分解决方案，您可以使用 RestClient 的`BuildUri`方法：

```
var response = client.Execute(request);
if (response.StatusCode != HttpStatusCode.OK)
    throw new Exception($"Failed to send request: {client.BuildUri(request)}"); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-10-21T16:29:15.477

你可以尝试使用

```
Trace.WriteLine(request.JsonSerializer.Serialize(request)); 
```

得到请求和

```
response.Content(); // as Luo have suggested 
```

请求不一样，正如 Fiddler 所示，但它包含所有数据并且是可读的（最后有一些 RestSharp 垃圾）。

# javascript - 打字稿中的动力学形状

> ID：15683866
> 
> 赞同：2
> 
> 时间：2013-03-28T14:01:32.130
> 
> 标签：javascript, typescript, kineticjs

我正在尝试基于以下 kineticjs JavaScript 代码创建一个形状：

```
var triangle = new Kinetic.Shape({
    drawFunc: function(canvas) {
      var context = canvas.getContext();
      context.beginPath();
      context.moveTo(200, 50);
      context.lineTo(420, 80);
      context.quadraticCurveTo(300, 100, 260, 170);
      context.closePath();
      canvas.fillStroke(this);
    },
    fill: '#00D2FF',
    stroke: 'black',
    strokeWidth: 4
  }); 
```

这是可以在以下位置找到的示例：http: [//www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

我的打字稿看起来像这样：

```
var square = new Kinetic.Shape({
        drawFunc: (canvas: any) => {
            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.moveTo(25, 25);
            ctx.lineTo(475, 25);
            ctx.lineTo(475, 475);
            ctx.lineTo(25, 475);
            ctx.closePath();
            canvas.fillStroke(this);
        },
        fill: '#FF0000',
    }); 
```

生成的 JavaScript 如下所示：

```
var square = new Kinetic.Shape({
        drawFunc: function (canvas) {
            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.moveTo(25, 25);
            ctx.lineTo(475, 25);
            ctx.lineTo(475, 475);
            ctx.lineTo(25, 475);
            ctx.closePath();
            canvas.fillStroke(_this);
        },
        fill: '#FF0000'
    }); 
```

问题出现`canvas.fillStroke(_this)`在线路上。这`_this`是引用我的打字稿类，而不是像 JavaScript 示例中那样生成的形状。我也尝试将`canvas.fillStroke(this)`我的打字稿中的 替换为`() => canvas.fillStroke(this)`，但结果是一样的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:13:44.470

我认为您只需要避免使用粗箭头表示法，它故意保留`this`as的当前上下文`_this`。

所以`drawFunc: (canvas: any) => {`应该是`drawFunc: function(canvas:any){`等等。

在这里查看区别：http: [//bit.ly/10cpdWw](http://bit.ly/10cpdWw)

这里的评论对`_this`和有用`this`： http: [//typescript.codeplex.com/workitem/248](http://typescript.codeplex.com/workitem/248)

# android - NumberPicker 中最小值和最大值之间的块转换

> ID：15683867
> 
> 赞同：11
> 
> 时间：2013-03-28T14:01:39.267
> 
> 标签：android, numberpicker

我正在开发一个 Android 应用程序。在里面的某个地方，我正在显示`NumberPicker`小部件。

如何禁用最小值和最大值之间的转换？

我的意思是，我正在使用一个数字选择器，最小值为 0，最大值为 9999。看起来像这样，

![号码选择器](../Images/20a3c7ecb1eb947f09638ab64c729705.png)

这样，用户就可以快速地把小部件从 0 跳到 9999。我不希望这种行为。现在的数字选择器小部件看起来像一个封闭的圆圈，我试图看看如何在最小值和最大值之间准确地打破圆圈，以便从最小值和最大值看起来像这样：

![数字选择器最小值](../Images/2eb9be4dd6264b5f8037501abb2e308a.png) ![数字选择器最大值](../Images/51cef2d4fd3ddb5130df8d0cca2ee91d.png)

我怎样才能做到这一点？

我尝试过的：

*   我在`NumberPicker`API 中到处搜索，这似乎不是一个可以简单地使用方法设置的东西。
*   我认为我可以使用方法`setDisplayedValues(String[] displayedValues)`方法在最小值之前和最大值之后添加空字符串，以便在最小值之前或最大值之后不显示任何值，**但**用户仍然可以跳过它们或 WORSE：选择空值。

有任何想法吗？我是否必须亲自动手并深入研究小部件的实现？也许在触摸监听器内部？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-11T17:59:37.137

您必须调用`setWrapSelectorWheel(false)`号码选择器。*在*调用. `setMinimumValue(...)`_ _ 如果你不这样做，它根本就行不通。`setMaximumValue(...)` *`setWrapSelectorWheel(false)`*

 *像我一样，你可能正在寻找一种通过 xml 来做到这一点的方法，但当时没有办法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-25T10:01:10.597

这不是`setWrapSelectorWheel(false)`（[来自API](http://developer.android.com/reference/android/widget/NumberPicker.html#setWrapSelectorWheel%28boolean%29)）吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T12:01:24.957

正如所指出的， setWrapSelectorWheel(false) 可以解决问题，因此应该接受所提供的答案之一。

通常，这种调用顺序有效：

```
picker.setMinValue(0);
picker.setMaxValue(stringValuesArray.length - 1);
picker.setDisplayedValues(stringValuesArray);
picker.setValue(defaultValue);
picker.setWrapSelectorWheel(false); 
```*

# performance - Firebug 中的性能事实与 YSlow 相矛盾

> ID：15683868
> 
> 赞同：2
> 
> 时间：2013-03-28T14:01:43.840
> 
> 标签：performance, firebug, yslow, bundling-and-minification

我有一个简单的基于 ASP.Net MVC3 的网络应用程序。我最近一直在做一些性能调整。我在 Mozilla 中使用 Firebug 来查看资源负载大小和时间。后来，我使用 YSlow 推导出一些可能的优化。

我想将重点缩小到“**捆绑和**缩小”的一般优化概念，我们将 js 和 css**缩小**并**捆绑**成单个组合的 js 和 css。根据 YSlow，它节省了额外的服务器请求以及一些带宽/时间。但是，就我而言，它是矛盾的！我正在使用[SquishIt lib](http://www.codethinked.com/SquishIt-The-Friendly-ASPNET-JavaScript-and-CSS-Squisher)。

这是我的统计数据（请查看附件图片）

```
Old Login page: Requests(10), Size(434), Load Time in seconds(29), YSlow grade C(78)
New Login page: Requests(6), Size(414), Load Time in seconds(42), YSlow grade B(88) 
```

旧的原始页面 - ![原始旧页面](../Images/c3bd66b87dbc02d1120c1bc724de44f2.png) 这是新的优化页面 - ![新优化页面](../Images/fbf01a2e888e81e2657bddb704bb93ff.png)

> **理想情况下，它必须反转！**但看起来组合的 js 文件占用了更多时间。我已经放慢了我的带宽以获得更准确的差异，并且我已经在非缓存中测试了它（也做了 Ctrl+F5），以确保两个页面都有公平的机会。他们使用相同的设置在同一个服务器上。

***注意：****请忽略图像中的最后一个图像重新加载 - 我做了刷新。我在登录页面上预加载了一些额外的 jQuery 库，以便后续页面获得缓存资源。您可以忽略这些事情，但请让我知道这是可能的还是我犯了一些错误？*

**关于捆绑和缩小的另一个查询**- 如果我将 CDN 引用用于我的资源（不能捆绑），我认为它不适用。在那种情况下，什么是首选 - CDN 引用或捆绑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:41:14.330

总的来说，我认为你走在正确的轨道上：更少的请求 + 更小的总请求大小 = 对大多数用户来说更好的性能。

在您的测试结果中，我认为您看到了几件事：

1.  使用较大的组合文件的一个缺点是您失去了并行下载的一些好处。我认为这不是您案例的主要贡献者，但您可以在原始案例中看到许多 jquery JS 文件正在并行下载。
2.  根据网络速度和服务器负载，总页面时间负载可能因运行而异。在您原来的情况下，jquery-ui 文件为 222KB，耗时 27.8 秒，速度约为 8 KB/秒。在您优化的页面中，新组合的 JS 为 254KB，耗时 41 秒，速度为 6.2 KB/s。这是非常粗略的数学，但我认为它可能会为您所看到的差异提供线索。

如果您的网站在公共互联网上可用，您可以使用[WebPageTest](http://www.webpagetest.org/ "网页测试")或[GTmetrix](http://gtmetrix.com/ "GTmetrix")等工具从外部服务器（和多个位置）运行一些测量。

对于 CDN 与捆绑的问题，最终您可以以任何一种方式测试一些原型，看看哪种方式更适合您。一种选择是拥有来自 CDN 的不经常更改的大型文件，例如来自 CDN 的 jQuery，以及您自己的所有 JS 托管在您的服务器上（捆绑）。

关于静态文件的 CDN 托管需要记住的一件事，最大的好处是当您拥有一个地理分布的用户群时。然后他们可以利用全球 CDN 网络，从离他们更近（因此更快）的服务器获得静态文件。相反，如果您的用户群没有分布在世界各地，或者这是一个内部应用程序，那么使用 CDN 可能没有太多好处。

# gradle - 从 Artifactory 下载 Gradle Wrapper 时出现 502 错误

> ID：15683869
> 
> 赞同：1
> 
> 时间：2013-03-28T14:01:44.407
> 
> 标签：gradle, artifactory

我无法让 Gradle 包装器从 Artifactory 实例下载 -bin.zip 文件。我想通过我们的 Artifactory 工件管理器分发我的公司修改（添加的初始化脚本）版本的 Gradle，但从 Artifactory 服务器收到 502 错误。不幸的是，Artifactory 服务器的日志中对此请求没有任何用处。`http://testlab3:8081/artifactory/simple/ext-release-local/gradle/gradle/1.4/gradle-1.4-bin.zip`如果我将文件输入到位置栏中，我已经验证我的浏览器可以成功并完全下载文件。

这是相关的关闭：

```
task wrapper(type: Wrapper) {
    distributionUrl = 'http://testlab3:8081/artifactory/simple/ext-release-local/gradle/gradle/1.4/gradle-1.4-bin.zip'
} 
```

然后我执行

```
$gradle wrapper 
```

这是我尝试使用包装器时得到的跟踪：

```
c:\Development\Intellij\projectName>gradlew tasks
Downloading http://testlab3:8081/artifactory/simple/ext-release-local/gradle/g
radle/1.4/gradle-1.4-bin.zip

Exception in thread "main" java.io.IOException: Server returned HTTP response co
de: 502 for URL: http://testlab3:8081/artifactory/simple/ext-release-local/gra
dle/gradle/1.4/gradle-1.4-bin.zip
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLCon
nection.java:1612)
        at org.gradle.wrapper.Download.downloadInternal(Download.java:63)
        at org.gradle.wrapper.Download.download(Download.java:49)
        at org.gradle.wrapper.Install.createDist(Install.java:51)
        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:129)
        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:48) 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:20:16.597

我最好的选择是您的 Gradle 代理配置丢失或不正确（例如没有`http.nonProxyHosts`设置）。[您可以在Gradle 用户指南](http://www.gradle.org/docs/current/userguide/userguide_single.html#sec%3aaccessing_the_web_via_a_proxy)中了解有关 Gradle 代理配置的更多信息。

PS：请不要在这里和[http://forums.gradle.org](http://forums.gradle.org)上重复发布。这只会为每个人创造更多的工作。

# c++ - Qt 布局间隔大小

> ID：15683870
> 
> 赞同：2
> 
> 时间：2013-03-28T14:01:45.717
> 
> 标签：c++, qt, layout

我在水平布局中创建了 2 个按钮。然后我添加了一个垫片，但它几乎看不见。我也不能改变这个垫片的大小。
我无法在任何布局中更改**任何尺寸！**我尝试了一切，更改了尺寸政策等，但没有任何效果。我观看了这个视频，这个人创建了两个按钮并将它们放在一个水平布局中。他加了一个垫片，就像我一样，他可以改变它的大小！：

[Qt 布局教程](http://www.youtube.com/watch?v=2edb0VOkx-k&list=SP2D1942A4688E9D63&index=6)

我究竟做错了什么？我完全按照他的做法做了，但它不起作用>.< 那么如何更改布局中项目的大小（尤其是垫片的大小）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:13:55.900

尝试使用`QBoxLayout::addStretch()`代替`addSpacerItem()`or `addSpacing()`。

# php - php - 逐行显示表格

> ID：15683874
> 
> 赞同：0
> 
> 时间：2013-03-28T14:02:00.823
> 
> 标签：php

我这样打印我的表格：

```
print $tableHeader . $dataRow . $tableFooter; 
```

$dataRow 是循环的结果（从数据库获取数据并构建行，没什么异常），它类似于：

```
while ($obj = mysql_fetch_object($res)) { 
  $dataRow .= ' <td width="210" style="...">' . $obj->title . ' <br /> '. $obj->screenName .' </td>';
  ...
  ...
} 
```

问题是当有大量信息需要处理 => 在显示最终表格之前要构建大量行时。

我怎么能告诉 Apache 逐行显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:10:47.380

你可以用 Ajax 做到这一点。

1.  你可以做一个分页。当您单击一个页面时，您只加载 x 个结果。
2.  您可以触发用户的滚动并加载更多结果。

我个人使用 DataTables 可以做两件事：[http ://www.datatables.net/](http://www.datatables.net/)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:09:05.200

不能分页吗？

要走的路是告诉php逐个显示，但是您必须将代码更改为类似的东西。

```
print $tableHeader 
while ($obj = mysql_fetch_object($res)) { 
   print ' <td width="210" style="...">' . $obj->title . ' <br /> '. $obj->screenName .' </td>';
  flush();
}
print $tableFooter; 
```

# sql - 有没有办法在多列的选择语句中使用变量？

> ID：15683884
> 
> 赞同：0
> 
> 时间：2013-03-28T14:02:34.653
> 
> 标签：sql, sql-server

我有一段动态的 SQL。运行大约需要 4 分钟。如果我改为将其设为静态 SQL，则大约需要 20 秒。

几乎，这两个查询是：

```
@myVar = 1
SELECT *
FROM TABLE
WHERE someColumn = myVar 
```

与：

```
@myQuery = '
SELECT *
FROM TABLE
WHERE someColumn = myVar'

EXEC sp_executesql @myQuery,
    N'@myVar INT,
    @myVar 
```

我的真实查询要复杂得多。从统计数据来看，动态的比`10x`读取次数多。我想让这个查询静态来解决这个问题。它是动态的全部原因是我的插入和选择是使用变量进行的。

我有类似的东西：

```
@someVar1 = "column1, column2, column3"
@someVar2 = "column4, column5, column6" 
```

然后会有

```
@myQuery = 'INSERT INTO '+ @someVar1 + 
           'SELECT ' + @someVar2 + ' FROM ....' 
```

等等

有什么办法我可以做类似的事情：

```
INSERT INTO @myVar1
SELECT @myVar2
FROM
... 
```

我不知道如何修复这个查询，它迫切需要修复。

**编辑**我做了一些改变。我忘了提到动态的东西也在插入语句中。这就是我刚醒来后发帖时发生的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:33:59.643

你在追逐独角兽。SQL Server 不允许您在非动态查询中`@var`替换为。`column1, column2`语法只是不支持您希望它做的事情（无论如何它不会改善这种情况）。

所以你需要通过其他方式来解决这个“问题”。我发现很难相信同一查询的动态版本会导致读取次数增加 10 倍。如果是这种情况（并且您不只是为了效果而夸大其词-请出示证据），几乎可以肯定是由于参数嗅探，其中缓存的（静态）查询使用了导致一个计划形状的参数，并且该计划shape 对于具有不同查询文本或不同参数或两者兼有的其他（动态）查询不是最佳的。`RECOMPILE`您可以通过在运行时强制并确保每次查询文本都相同（这包括空格、大写等）来抵消这种情况。

```
SET @myQuery = N'INSERT dbo.DestinationTable(' 
  + @DestinationColumns + ')
  SELECT ' + @SourceColumns + '
  FROM dbo.SourceTable
  WHERE someColumn = @myVar OPTION (RECOMPILE);'; 
```

但我也不相信这是你的问题。我认为这可能比实际观察更多的是感知/恐惧。

正如我在评论中提到的，如果您正在构建许多不同的动态 SQL 语句，您应该考虑打开该`optimize for ad hoc workloads`设置，这将防止您的计划缓存因您不再使用的计划而变得臃肿。

[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/)的免费版本将允许您在大约半秒内轻松混淆您的计划，甚至可以让您将它们上传到我们可以查看的地方。这不会让我们剖析实际的查询文本，但它会表明查询本身的计划存在差异——查询是否是动态构造的并不重要，只是它不同而已。*免责声明：我为 SQL Sentry 工作。*

# jquery - JSON 未在 IE7 和 8 中加载

> ID：15683885
> 
> 赞同：0
> 
> 时间：2013-03-28T14:02:36.580
> 
> 标签：jquery, ajax, json, internet-explorer-8, internet-explorer-7

我的 JSON 内容在除 IE7 和 8 之外的所有浏览器中加载，我不确定为什么它不起作用，以下是代码，有什么想法吗？谢谢！

```
 $(document).ready(function() {

function loadContent(){ 
    $.ajax({
        url: "json/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showStartpage(data);
            showInfo(data);
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 

}

function showStartpage(){
        $(".start .text3").html(data[lang]['startpage']['text3']);
        $(".start .text4").html(data[lang]['startpage']['text4']);
        $(".start .text5").html(data[lang]['startpage']['text5']);
        $(".start .text6").html(data[lang]['startpage']['text6']);
        $(".start .text7").html(data[lang]['startpage']['text7']);
}

loadContent();
showStartpage();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T20:30:07.783

您需要包含以下 ajax 设置才能使其正常工作：

```
$.ajaxSetup({ 
      contentType: "application/json; charset=utf-8"
}); 
```

添加这个解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:07:11.490

尝试包含`json.js`在您的代码中，这可能对我有所帮助。

从[**这里**](https://github.com/douglascrockford/JSON-js)下载，包括`json2.js`

# jquery - IE8 上的自定义工具提示标题

> ID：15683888
> 
> 赞同：0
> 
> 时间：2013-03-28T14:02:53.273
> 
> 标签：jquery, html, css, tooltip, title

我想在 IE8 上设置浏览器给出的默认工具提示，最好只从 css 设置，所以我该怎么做。我已经阅读了很多关于的文章，直到现在我什么都没有。

所以我的 html 看起来像：

```
<a href="#" title="Show this title on IE8" class="title">hover me to see the tooltip</a> 
```

小提琴：http: [//jsfiddle.net/uGudk/36/](http://jsfiddle.net/uGudk/36/)

所以我如何设置这个工具提示的样式以便在 IE8 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:04:38.497

您无法设置 TITLE 工具提示的样式，它不是 HTML 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:06:49.037

你可以试试这个： `<a class="tooltip" href="#">Click<span>This is a tooltip</span></a>`

```
<style type="text/css">
.tooltip {
    border-bottom: 1px dotted #000000;
    color: #000000;
    outline: none;
    cursor: help; 
    text-decoration: none;
    position: relative;
}
.tooltip:hover span {
    font-family: Calibri, Tahoma, Geneva, sans-serif;
    position: absolute;
    left: 1em;
    top: 2em;
    z-index: 99;
    margin-left: 0;
    width: 250px;
    display: block;
}
span{
   display: none;    
}
</style> 
```

[资源](http://sixrevisions.com/css/css-only-tooltips/)

[jsFiddle](http://jsfiddle.net/9edge/uwP2q/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:07:48.543

```
 .tooltip {
    border-bottom: 1px dotted #000000; color: #000000; outline: none;
    cursor: help; text-decoration: none;
    position: relative;
            }

.tooltip:hover span {
            border-radius: 5px 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; 
            box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 5px 5px rgba(0, 0, 0, 0.1); -moz-box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
            font-family: Calibri, Tahoma, Geneva, sans-serif;
            position: absolute; left: 1em; top: 2em; z-index: 99;
            margin-left: 0; width: 250px;
        } 
```

[**工作演示**](http://downloads.sixrevisions.com/css-tooltips/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T18:36:51.080

您在一些评论中列出的小提琴基本上在 IE8 中有效。但是，您应用的大多数实际样式都是 IE8 无法识别的（`box-shadow`, `linear-gradient`, 并且`border-radius`在 IE8 中都不受支持）。如果您使用 IE8 可识别的样式（`background-color`例如，或使用实际图像作为`background-image`），那么它也将在 IE8 中设置样式。

这是一个带有 的示例`background-color`，因此您可以在 IE8 中看到它：http: [//jsfiddle.net/elezar/w8bBk/](http://jsfiddle.net/elezar/w8bBk/)

此外，从技术上讲，您在该示例中所做的并不是设置标题的样式。它基本上与@sureh 和@9edge 推荐的做法相同，但您是通过CSS 而不是在HTML 本身中添加额外的元素。除了您正在添加和设置样式的工具提示之外，您实际上仍会看到标题工具提示。

# functional-programming - 具有多个文件的记录的可变字段

> ID：15683892
> 
> 赞同：4
> 
> 时间：2013-03-28T14:03:11.333
> 
> 标签：functional-programming, ocaml, mutable, imperative-programming

我正在处理多个文件，但一个可变字段有问题。在 file1.ml 中，我声明：

```
type mytype = {
     mutable numbers : int list;
} 
```

所以，在file2.ml 中，我有mytype 类型的元素。但是，当我尝试制作时：

```
myElement.numbers 
```

返回以下错误： 错误：未绑定记录字段标签编号。

谢谢，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:12:38.373

使用来自 file2 的完全限定名称：`myElement.File1.numbers`

或添加`open File`到您的文件。

或使用本地模块打开`let open File2 in myElement.numbers`

# wpf - 基于标签内容的堆栈面板可见性不起作用

> ID：15683895
> 
> 赞同：6
> 
> 时间：2013-03-28T14:03:19.247
> 
> 标签：wpf, xaml

我有一个堆栈面板，我想根据标签的内容使其可见。只是不确定为什么它不适合我。以粗体突出显示的是我想要隐藏的内容。有什么建议吗？

```
<StackPanel Orientation="Horizontal">
<Label Nane="lblCarrier" Content="{Binding Path=Carrier}" />
**<StackPanel Orientation="Horizontal">
    <StackPanel.Style>
        <Style TargetType="StackPanel">
            <Setter Property="Visibility" Value="Visible" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding Content, ElementName=lblCarrier}" Value="">
                    <Setter Property="Visibility" Value="Hidden" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </StackPanel.Style>
    <Label x:Name="lblCarrierGrade" Content="Grade Carrier:" />
    <TextBox x:Name="txtCarrierGrade1" />
    <TextBox x:Name="txtCarrierGrade2" />
</StackPanel>** 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:08:44.517

可能`Content`是 null 而不是`String.Empty`。

您可以尝试使用[TargetNullValue](http://msdn.microsoft.com/en-gb/library/system.windows.data.bindingbase.targetnullvalue.aspx)

```
<DataTrigger Binding="{Binding Content, ElementName=lblCarrier,TargetNullValue=''}" Value="">
      <Setter Property="Visibility" Value="Hidden" />
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:07:45.597

为什么不使用转换器？像这样向您的项目添加一个类文件：

```
class VisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.IsNullOrEmpty(value as string) ? Visibility.Hidden : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在您的`Window`定义中添加：

```
xmlns:myNamespace="clr-namespace:[YourProjectName]" 
```

然后在资源的某个地方添加这个

```
<myNamespace:VisibilityConverter x:Key="myConverter"/> 
```

现在你可以使用它了：

```
 <Style TargetType="StackPanel">
        <Setter Property="Visibility" 
                Value="{Binding Content, ElementName=lblCarrier,
                                Converter = {StaticResources myConverter}}"/> 
```

# json - 在 JSP 中使用 Jquery Ajax 自动完成

> ID：15683896
> 
> 赞同：0
> 
> 时间：2013-03-28T14:03:19.253
> 
> 标签：json, jsp, jquery, autocomplete

我正在尝试遵循[此](http://jqueryui.com/autocomplete/#remote-jsonp)示例，并且在 JSP 页面中有以下内容

```
(getData.jsp)

Department t = new Department ();    
    String query = request.getParameter("q");    
    List<String> tenders = t.getDepartments(query); 

    Iterator<String> iterator = tenders.iterator();
    while(iterator.hasNext()) {
        String deptName= (String)iterator.next();
        String depto = (String)iterator.next();
        out.println(deptName);
    } 
```

如何使用上述内容在 Jquery autcomplete 中使用？当我尝试时没有输出。

我的 Jquery 自动完成代码

```
 <script>
$(function() {

$( "#dept" ).autocomplete({
source: function( request, response ) {
$.ajax({
url: "getData.jsp",
dataType: "jsonp",
data: {
featureClass: "P",
style: "full",
maxRows: 12,
name_startsWith: request.term
},
success: function( data ) {
response( $.map( data.<??>, function( item ) {
return {
label: item.name + (item.<??> ? ", " + item.<??> : "") + ", " + item.<??>,
value: item.name
}
}));
}
});
},
minLength: 2,
select: function( event, ui ) {
alert(ui.item.label);
}
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:17:44.810

您的回复是 JSON 格式吗？

这是我在使用 Jquery UI 自动完成时所做的：

1.  创建一个类，其参数是您说 item.name 时将使用的参数

    ```
    public string Pam1{ get; set; }

    public string Pam2{ get; set; }

    public string Pam3{ get; set; }

    public SomeResponse(string SomePam)
    {
        // Pam1 = ???
        // Pam2 = ???
        // Pam3 = ??? 
    } 
    ```

2.  在您的处理程序中：

    ```
     context.Response.ContentType = "application/json";
        string query = (string)context.Request.QueryString["query"];
        var json = new JavaScriptSerializer();

        context.Response.Write(
            json.Serialize(new SomeResponse(query))
        );

        context.Response.Flush();
        context.Response.End(); 
    ```

**编辑**

1.  javascript（这是一个示例，用户可以选择多个选项，以逗号分隔。如果您不想要，请将其删除。） txt_autocomplete 是 TextBox 的类。

    ```
    $(function () {
        function split(val) {
            return val.split(/,\s*/);
        }

        function extractLast(term) {
            return split(term).pop();
        }

        $(".txt_autocomplete")
        // don't navigate away from the field on tab when selecting an item
        .bind("keydown", function (event) {
            if (event.keyCode === $.ui.keyCode.TAB &&
                $(this).data("ui-autocomplete").menu.active) {
                event.preventDefault();
            }
        })
            .autocomplete({
            source: function (request, response) {
                $.getJSON("handlers/autocomplete.ashx?query=" + extractLast(request.term), {
                    term: extractLast(request.term)
                }, response);
            },
            search: function () {
                var term = extractLast(this.value);
                if (term.length < 2) {
                    return false;
                }
            },
            focus: function () {
                return false;
            },
            select: function (event, ui) {
                var terms = split(this.value);
                terms.pop();
                terms.push(ui.item.Pam1);
                terms.push("");
                this.value = terms.join(", ");
                console.log("Pam1 is :" + ui.item.Pam1 + " Pam2 is: " + ui.item.Pam2 + " Pam 3 is : " + ui.item.Pam3);
                return false;
            }
        });
     }); 
    ```

# php - 如何在 php 站点中集成 gzip 压缩？

> ID：15683900
> 
> 赞同：1
> 
> 时间：2013-03-28T14:03:37.787
> 
> 标签：php, gzip

想在我的 php 站点上集成 gzip 压缩，但是在我实现代码时 ob_start("ob_gzhandler"); 尽管服务器中存在该页面，但它给了我一个错误“此网页不可用”，服务器中也启用了 gzip 压缩。请提出一种实施方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:18:07.070

试试这个，希望对你有帮助

在你的索引页的顶部把它

```
ob_start("ob_gzhandler"); 
```

你需要做的更多。只需在您的 .htaccess 中写下

```
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css          application/x-javascript application/javascript
</IfModule> 
```

# ios - 默认ios背景

> ID：15683904
> 
> 赞同：4
> 
> 时间：2013-03-28T14:03:42.383
> 
> 标签：ios, objective-c, uiimageview, background-image

我想为我的应用程序使用这样的背景。此图像来自 ios 6。它是以编程方式将其附加到视图的方式吗？不想在项目中包含此图像并使用 UIImage 视图，因为它已经存储在 ios 中

![在此处输入图像描述](../Images/bd981fdad281377bbfcf509518ea0db5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:10:04.643

是的，您可以通过在*Attributes inspector中选择***View** of your View来做到这一点，选择**其他**，然后选择第三个选项卡 -> iPhone/iPad SDK -> ScrollViewTexturedBackground（如下面的屏幕截图所示）。

 ***![在此处输入图像描述](../Images/09d964d6e9b0c2ed5e3eacccb66e39d7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:15:19.953

UIColor 类有以下类方法

```
+ (UIColor *)scrollViewTexturedBackgroundColor 
```

尝试设置背景颜色。

```
myView.backgroundColor = [UIColor scrollViewTexturedBackgroundColor]; 
```***

# javafx - javaFX：TableView的cellvalue不足以分列显示，会被裁剪，如何在这样的cell上显示提示？

> ID：15683907
> 
> 赞同：0
> 
> 时间：2013-03-28T14:03:43.307
> 
> 标签：javafx, tableview

javaFX：TableView 的单元格值不足以显示在列中，它会被截断'...' 的末尾，如何在这样的单元格上显示提示？我需要一个小费，因为有时我无法拖动柱子的头部。所以我看不到单元格的全部内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:06:27.797

下面的 TableCell 子类用于设置单元格的 ToolTip。它不区分文本适合的单元格和文本太大的单元格。它在单元工厂中用于表格列。

```
import javafx.application.Application;
import javafx.beans.property.ReadOnlyStringWrapper;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TableColumn.CellDataFeatures;
import javafx.scene.control.Tooltip;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
import javafx.util.Callback;

public class SO extends Application {
    static class XCell extends TableCell<String, String> {
        @Override
        protected void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);
            this.setText(item);
            this.setTooltip(
                    (empty || item==null) ? null : new Tooltip(item));
        }
    }
    @Override
    public void start(Stage primaryStage) throws Exception {
        StackPane pane = new StackPane();
        Scene scene = new Scene(pane, 300, 100);
        primaryStage.setScene(scene);
        ObservableList<String> list = FXCollections.observableArrayList(
                "Short",
                "This is quite long - almost very long");
        TableView<String> tv = new TableView<>(list);
        TableColumn<String, String> col = new TableColumn<>("Column");
        col.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<String,String>, ObservableValue<String>>() {
            @Override
            public ObservableValue<String> call(CellDataFeatures<String, String> param) {
                return new ReadOnlyStringWrapper(param.getValue());
            }
        });
        col.setMaxWidth(50);
        col.setCellFactory(new Callback<TableColumn<String,String>, TableCell<String,String>>() {
            @Override
            public TableCell<String, String> call(TableColumn<String, String> param) {
                return new XCell();
            }
        });
        tv.getColumns().add(col);
        pane.getChildren().add(tv);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

结果将如下所示：

![带有工具提示的单元格](../Images/ad176d885e0b80bc31c4718c763b2afd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T20:43:02.657

这实际上应该可以解决您的问题。

```
column.setCellFactory(col -> new TableCell<Object, String>()
    {
        @Override
        protected void updateItem(final String item, final boolean empty)
        {
            super.updateItem(item, empty);
            setText(item);
            TableColumn tableCol = (TableColumn) col;

            if (item != null && tableCol.getWidth() < new Text(item + "  ").getLayoutBounds().getWidth())
            {
                tooltipProperty().bind(Bindings.when(Bindings.or(emptyProperty(), itemProperty().isNull())).then((Tooltip) null).otherwise(new Tooltip(item)));
            } else
            {
                tooltipProperty().bind(Bindings.when(Bindings.or(emptyProperty(), itemProperty().isNull())).then((Tooltip) null).otherwise((Tooltip) null));
            }

        }
    }); 
```

# sql - 根据带有电子邮件地址的表格，访问 2010/2007 VBA 电子邮件每日报告给公司

> ID：15683909
> 
> 赞同：0
> 
> 时间：2013-03-28T14:04:01.337
> 
> 标签：sql, vba, ms-access, outlook, ms-access-2010

基本上我需要每天向我们支付资金的经销商发送一份报告。我有一张表，上面有经销商名称、ID 号和他们的电子邮件地址。

对于每个报告，我需要遍历此表并按 ID 号向相应的经销商发送电子邮件。

经销商信息：

```
SELECT DealerDetail.dealer_id, DealerDetail.dealer_name, DealerDetail.email
FROM DealerDetail; 
```

我的报告使用的查询：

```
SELECT LoanDetail.Book_Date, LoanDetail.DLR_Name, 
  LoanDetail.DLR_ID, LoanDetail.Cust_ID, LoanDetail.Amt_Fin, 
  LoanDetail.APR, LoanDetail.Buy_Rate, LoanDetail.Pmt_Amt, 
  LoanDetail.TERM, LoanDetail.Part, LoanDetail.[Flat Fee]
FROM LoanDetail
WHERE (((LoanDetail.Book_Date)=Date()-1)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:40:43.417

另一种方法是循环并创建一个 Outlook 实例来发送电子邮件，如下面的代码所示

```
Private Function SendEmail(attachment, subject,strContactEmail,strEmailText,strCc)

Dim olLook As Object                     'Start MS Outlook
Dim olNewEmail As Object                 'New email in Outlook

Set olLook = CreateObject("Outlook.Application")
Set olNewEmail = olLook.createitem(0)

   With olNewEmail   'Attach template
      .To = strContactEmail
      .cc = strCc
      .body = strEmailText
      .subject = subject
  .attachments.Add (attachment)
  .display
   End With
 .send

End Function 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:14:13.387

一种方法是遍历经销商表并使用[SendObject](http://msdn.microsoft.com/en-us/library/office/bb214075%28v=office.12%29.aspx)发送报告：

```
Dim rs AS DAO.Recordset

   Set rs = CurrentDB.OpenRecordset("SELECT email FROM DealerDetail")

   Do While Not rs.EOF
      DoCmd.SendObject acReport, "ReportName", _
           acFormatPDF, rs!Email, , , "Report", "Here is the report", True
      rs.MoveNext
   Loop 
```

# iphone - iphone中的prepareForSegue方法

> ID：15683914
> 
> 赞同：0
> 
> 时间：2013-03-28T14:04:13.510
> 
> 标签：iphone, uistoryboardsegue

当我单击一个按钮时，使用 Soap 调用 Web 服务，然后我使用 firstviewcontroller 类中的 nsxml 解析器解析数据。现在我有一个 secondviewcontroller 类，我需要在其中显示来自 firstviewcontroller 类的解析数据。我添加了一个 segue 来连接按钮（在 firstviewcontroller 中，与我提到的按钮相同）和 seconviewcontroller。完成代码后，当我单击按钮时出现一个新屏幕，但我显示的数据不存在。当我使用导航控制器返回按钮返回并再次单击按钮（在 firstviewcontroller 上）时，现在显示数据。 . 为什么每次运行程序第一次都不显示？在我看来 prepareForSegue 方法是在 Web 服务调用和解析之前调用的，如果是这样，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:05:51.580

与其在您按下按钮时立即发生 segue，不如`performSegueWithIdentifier`在您的 Web 服务调用完成解析后调用。或者，您可以让您的第二个视图控制器在 Web 服务调用完成解析时重新加载其数据

# javascript - 在 Internet Explorer 中为多个 jQuery 版本编写 onreadystatechange 竞争条件

> ID：15683928
> 
> 赞同：4
> 
> 时间：2013-03-28T14:04:41.327
> 
> 标签：javascript, jquery, internet-explorer, onreadystatechange

想象一下下面的设置：一个页面有一个旧的 jQuery 版本（比如 1.5.2）——我无法控制——从我的服务器加载一个 Javascript 文件，该文件也需要 jQuery，但更新版本。（例如 1.8.3）现在我的脚本尝试执行以下操作：

```
var script = document.createElement("script");
script.setAttribute("type", "text/javascript");
script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js");
script.onreadystatechange = function() { // IE
  if (script.readyState === "complete" || script.readyState === "loaded") {
    ready();
  }
};
script.onload = function() { // other browsers
  ready();
};
(document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script); 
```

该`ready`函数然后检查是否`$`有正确的 jQuery 版本，如果有，它会将该 jQuery 实例绑定到另一个变量并返回`$`到原始 jQuery 版本，通过`newjQuery = window.jQuery.noConflict(true);`.

现在这一切正常，而且在加载“我的”jQuery 版本和将 $ 恢复到“他们的”jQuery 版本之间没有（外部）代码执行——至少在 Chrome、Firefox 等上。这种方法失败的地方是 Internet Explorer ，由于某种原因，它会处理至少 1 个可能并行运行的 Javascript 代码“滴答”。这往往会弄乱与“我的”jQuery 版本不兼容的代码，并且恰好在 IE 尚未执行就绪事件的 5 毫秒内执行。

**这是一个示例小提琴：http:** [//jsfiddle.net/w5pPp/3/](http://jsfiddle.net/w5pPp/3/)

在小提琴中，我每 10 毫秒测试一次当前绑定的 jQuery 版本。只有在 IE9 中，有时会出现短时间跨度`$`指“我的”jQuery，如“这不应该发生”日志所示。

现在我的问题是： **将“我的”jQuery 版本加载到它自己的变量中而不会在调用 noConflict 之前覆盖“他们的”jQuery 的短时间内执行页面代码时不会导致任何问题的最佳解决方案是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:27:14.980

当您加载您的 jQuery 版本时，请尝试以下操作：

```
<!-- load your jQuery version -->
<script type="text/javascript" src="http://example.com/jquery-1.9.1.js"></script>
<script type="text/javascript">
    var $_mine = $.noConflict(true);
</script>

<!-- initialize their scripts -->
<script type="text/javascript" src="http://example.com/their-jquery.js"></script>
<script type="text/javascript" src="http://example.com/their-script.js"></script> 
```

这应该会导致您`$_mine`可以使用您的 jQuery 版本，而不会与其他脚本冲突，并且它的使用`$`将引用过时的版本。

如上文评论所述，请参阅[我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)有关更多详细信息/信息/示例。

**编辑**：

根据上面的评论，这听起来好像不能解决您的问题。在这种情况下，我的怀疑是您实际上看到了 CDN 之间下载速度不同步的问题。尝试以相同的方式加载您和他们的 jQuery 版本，一个接一个。

换句话说：

```
function loadScript(variable_name, script_url) {
    var script = document.createElement("script");
    script.setAttribute("type", "text/javascript");
    script.setAttribute("src", script_url);
    script.onload = function() {
        if (variable_name != undefined) {
            window[variable_name] = jQuery.noConflict(true);
            console.log("after attach: " + window[variable_name].fn.jquery);
        }
    };
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script);
};

loadScript('newjQuery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js');
loadScript('$', 'http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js');
//loadScript(undefined, 'http://example.com/some/dependent/script/requiring-1.5.2.js'); 
```

这是一个工作的 jsFiddle，它显示了这种方法的工作原理：http: [//jsfiddle.net/w5pPp/5/](http://jsfiddle.net/w5pPp/5/)

诀窍是顺序加载这两个项目，并在 jQuery 版本到位后加载依赖项。

# adobe-analytics - 框架集中的 Omniture 标记不起作用

> ID：15683930
> 
> 赞同：0
> 
> 时间：2013-03-28T14:04:44.827
> 
> 标签：adobe-analytics

我正在我的一个项目中实施omniture标签。全方位标签由客户提供。问题是 Web 应用程序加载 a 并且omniture 标记在其中。现在，由于某种原因，omniture 标签没有被触发。我打开了omniture 调试器，没有跟踪任何标签。出于测试目的，我删除了omniture标签开始工作。

这是问题 HTML 的示例：

```
<frameset>
    <frame id="pageFrame">
        #document
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            </head>
            <body>

                <div id="somediv">
                    <script type="text/javascript" language="javascript" src="tracking.JS"></script>
                    <script type="text/javascript">
                    <!--
                    console.log("Testing");
                    s.channel="test";
                    s.prop50=s.channel+":INTERNET";
                    s.pageName=s.prop50+":User name";
                    //-->
                    </script>

                    <script type="text/javascript" language="javascript" src="morescript.JS"></script>
                </div>

            </body>

        </html>
    </frame>
</frameset> 
```

Omniture 内部是否存在任何已知的固有问题？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:38:32.340

调试器通常不会在帧中显示图像请求。在这种情况下，我建议使用数据包监视器，例如[开发者工具](https://developers.google.com/chrome-developer-tools/docs/network)或[HTTPFox](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)中的 Chrome 网络选项卡。

最新版本的[调试器](http://microsite.omniture.com/t2/help/en_US/home/index.html#kb-using-digitalpulse-debugger)也可能很有用，但是您的里程可能会因帧而异。

# javascript - 在 Appcelerator Titanium 中解析写得不好的 HTML

> ID：15683933
> 
> 赞同：4
> 
> 时间：2013-03-28T14:04:57.827
> 
> 标签：javascript, html-parsing, titanium

我试图从 Titanium 中的一小段 HTML 中获取一些值。我尝试使用这个库：[https](https://gist.github.com/bob-sims/4406293) ://gist.github.com/bob-sims/4406293作为另一个问题的回答（[用于 Titanium Mobile 的 HTML Parser](https://stackoverflow.com/questions/14335431/html-parser-for-titanium-mobile)），但我无法从中得到任何东西。它根本没有文档，而且我是 Titanium 的新手，这一事实可能无济于事。

html来自此页面：[http](http://www.ctt.pt/feapl_2/app/open/objectSearch/cttObjectSearch.jspx?showResults=true&lang=01&pesqObjecto.objectoId=RD057055721PT) ://www.ctt.pt/feapl_2/app/open/objectSearch/cttObjectSearch.jspx?showResults=true&lang=01&pesqObjecto.objectoId=RD057055721PT我正在尝试获取以下值：`<tr id="object_RD057055721PT" class="object">`和`<tr id="details_0" class="detailsDiv detailsHide">`这是我写的代码：

```
var select = require('lib/soupselect').select, htmlparser = require('lib/htmlparser');

var handler = new htmlparser.DefaultHandler(function(err, dom) {
    if (err) {
        alert('Error: ' + err);
    } else {
        Ti.API.info("dom" + dom);
        var body = select(dom, 'meta[property="og:object_RD057055721PT"]');
        rows.forEach(function(body) {
            Ti.API.info(body.children[0].data)
        });

        var rows = select(dom, 'div.row');
        Ti.API.info("rows: " + rows)

        rows.forEach(function(row) {
            Ti.API.info(row.children[0].data)
        });
    }
});

function renderXML() {
    var httpResponse = this.responseText;

    var parser = new htmlparser.Parser(handler);
    parser.parseComplete(httpResponse);
};

var xhr = Ti.Network.createHTTPClient({
    onload : renderXML,
    onerror : errorMessage,
})

xhr.open("GET", "http://www.ctt.pt/feapl_2/app/open/objectSearch/cttObjectSearch.jspx?showResults=true&lang=01&pesqObjecto.objectoId=RD057055721PT");
xhr.send(); 
```

但是我从中得到的所有输出是：

> dom[对象对象],[对象对象],[对象对象],[对象对象],[对象对象]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T10:15:11.343

尝试使用[YQL](http://developer.yahoo.com/yql/)，它将更好地解析未知的 HTML 并返回漂亮的 JSON 响应。

# eclipse - eclipse + FindBugs：可能触发 SVN 同步？

> ID：15683938
> 
> 赞同：2
> 
> 时间：2013-03-28T14:05:10.670
> 
> 标签：eclipse, svn, findbugs

我正在使用 Eclipse 3.6.2 和 FindBugs 2.0.1 并将我的代码与 SVN 存储库同步。

每当我与存储库同步时，是否可以从 Eclipse 触发 FindBugs 以在“传出更改”文件列表中查找错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:16:41.523

不容易，特别是如果您希望 FindBugs 结果在 Eclipse GUI 中很好地显示，就像您通过 FindBugs Eclipse 插件运行它时一样。如果您想按要求执行此操作，则可能需要进行一些开发。

FindBugs 的提交时执行不适用于 FindBugs、FindBugs Eclipse 插件、Subversive Eclipse 插件或 Subclipse Eclipse 插件。TortoiseSVN 确实支持可以运行 FindBugs 的预提交操作，但它不能在 Eclipse 中运行，并且 FindBugs 结果需要以某种方式重新导入到 FindBugs Eclipse 插件中。一些从命令行使用 SVN 的人为 svn 客户端编写包装脚本以在提交前执行检查，但这并不能很好地解决 Eclipse 中的问题，因为我们无法轻松控制 Subversive 或 Subclipse 使用什么可执行文件。

与您所要求的最接近的解决方案：Subversive Eclipse 插件提供了一个用于添加提交挂钩的[扩展点](http://www.eclipse.org/subversive/documentation/gettingStarted/aboutSubversive/extensions.php)，但实现它并不是一项简单的任务。此外，如果您希望将 Eclipse 集成到您的 FindBugs 结果中，您可能还需要将 Subversive 扩展设置为 Eclipse 插件，以便您可以触发 FindBugs Eclipse 插件（而不是直接触发 FindBugs 本身）。您的个人资料表明您可能对 Java 和 Eclipse 感到满意，可以尝试此方法（并可能与 FindBugs 和 Subversive 社区分享），但随着工具的发展，它看起来确实需要大量维护，因此我不愿推荐此解决方案.

其他选项：可以被认为是预提交操作的依赖项通常最好留给专为管理依赖项而设计的工具，例如 Maven 或 Ant（或无数其他好的工具）。此外，等到提交时间执行/强制执行此类检查可能不是最好的主意，因为它可能导致在最后一刻而不是在构建周期的早期发现问题。当 FindBugs 结果可以早在编译时获得时，谁想要阻止他们当天的最后一次提交？如果您使用 Ant，我建议将[FindBugs ant 任务](http://findbugs.sourceforge.net/manual/anttask.html)添加到您的构建过程中；使用一点 Ant-fu，FindBugs ant 任务的类参数可用于将检查限制为从 Subversion 存储库中更改的项目。

如果你真的不需要很早就来自 FindBugs 的代码反馈（或者你已经在你的构建中拥有它）并且你真的只需要一个强制机制，我建议你使用一个持续集成服务器，比如 Jenkins (jenkins-ci.org)测试所有签入代码的合规性。Jenkins 与 Subversion 很好地集成，它可以强制检查所有新文件，或者如果需要，可以将强制执行限制在子团队或子系统中，它可以让您知道何时发生违规，并且它具有不阻止某人的额外好处避免在不方便的时候提交代码。

# java - 在用户登录时，想要检查当前时间并与 JSP 中以前的登录时间进行比较

> ID：15683939
> 
> 赞同：0
> 
> 时间：2013-03-28T14:05:20.800
> 
> 标签：java, jsp, login

在用户登录时，我想检查当前时间并将其与 JSP（JAVA）中的先前登录时间进行比较。我将每次登录时的时间都存储在数据库中。现在我想这样做只是将登录时间与以前登录时间的平均值进行比较，如果时间与用户通常的登录时间相似，则返回 true。否则返回假。谁能建议我一个很好的功能来做到这一点。我的代码如下，

```
public boolean login_checking(String username) {
    public boolean login = false;
    try {
        PreparedStatement ps = con.prepareStatement("select (case when ((timediff(time(now()),time(accesstime)))<'02:00:00') then 1 else 0 end)from tbl_login_history where uid = ?");
        ps.setString(1, username);
        ResultSet rs = ps.executeQuery();
        if (rs.first()) {
         //   login = rs.getInt(1) < 0;
         //   System.out.println(rs.getInt(1));
        }
        else
        {
            System.out.println("Not exist");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return login;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:17:39.827

你可以试试这个。

有一个栏目命名为通常时间什么的，当用户登录时，

> 1.从 db 获取正常时间。
> 2.如果为空，则插入db。
> 3.如果不为空，则获取当前时间并检查是否接近正常时间。
> 4.如果接近，通常时间=（通常时间+当前时间）/2，更新db中的新通常时间并返回true
> 5.如果不接近，不更新db并返回false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:32:09.650

我更正了代码。我只是将查询更改如下，

```
SELECT (select count(*) from tbl_login_history where hour(accesstime) between 4 and 12 AND uid=?),(select count(*) from tbl_login_history where hour(accesstime) between 13 and 19 AND uid=?),(select count(*) from tbl_login_history where hour(accesstime) between 19 and 1 AND uid=?); 
```

在这个查询中，我将时间划分为 3 个不同的区域，并检查每个区域的登录次数。如果需要更准确的时间，可以将时间划分为更多的区域。对于我的系统 3 就足够了。然后我检查用户从哪个区域有更多的登录。如果用户当前在通常的时区登录，则返回 true。否则为假。感谢所有试图帮助我的人。

# android - 切换 textColor 不起作用

> ID：15683941
> 
> 赞同：1
> 
> 时间：2013-03-28T14:05:24.327
> 
> 标签：android, components, switch-statement, textcolor

我对标准的 android Switch 组件有一个奇怪的问题。

我已经分配了我的自定义跟踪器和拇指可绘制对象 - 一切看起来和工作正常，除了 textColor 属性的颜色总是很暗（可能是主题颜色）。

试图通过 android:textColor 属性以十六进制分配颜色，作为资源和选择器。不幸的是，每一次努力都未能实现改变的目标

有没有人遇到过这个问题？

这是我的用法：

```
<Switch
    android:id="@id/settings_lock_screen_compound_btn"
    android:layout_width="97dp"
    android:layout_height="24dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:textOff="Off"
    android:textOn="On"
    android:textSize="12sp"
    android:thumb="@drawable/switch_thumb"
    android:track="@drawable/switch_track_bg" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:12:45.983

事实证明，您必须使用 switchTextAppearance 并在样式资源中定义 textAppeareance 属性才能更改（或在您的 java 代码中进行等效操作）。

在这种情况下， Switch 类中的 textColor 属性非常具有误导性，但由于该类（不是直接）从 TextView 类继承，因此是必要的

# apache-camel - 我们是否需要 @InOnly 注释或 如果我们使用 ProducerTemplate 的 sendBody 方法？

> ID：15683944
> 
> 赞同：1
> 
> 时间：2013-03-28T14:05:43.267
> 
> 标签：apache-camel

对于 POJO 生产，Camel 文档中提到 InOut 是默认设置。但是，如果我们使用 ProducerTemplate 的 sendBody()，是否还需要设置 @InOnly，如下例所示。

```
public class MyBean {

@Produce(uri = "direct:hello")
private ProducerTemplate producerTemplate;

@InOnly
void someInOnlyMethod()
{
...
producerTemplate.sendBody("mystr");
...
}
} 
```

同样在下面的示例中，如果 direct:hello 从上面配置的没有 @InOnly 注释的 MyBean 对象中获取消息，我们是否需要 setExchangePattern 元素？

```
 <route>
 <from uri="direct:hello"/>
 <setExchangePattern pattern="InOnly"/>
 <to uri="mock:result"/>      
 </route> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:50:18.287

1) 不，当您使用生产者模板时，MEP 将根据您在模板上使用的方法进行设置。例如，所有发送方法都是 InOnly，所有请求方法都是 InOut。虽然有些方法有一个模式参数，您可以在其中指定 MEP。

2）不，您通常不必设置/更改 MEP。尽管在将消息发送到同时支持 InOnly 或 InOut（并且行为不同）的端点的情况下，您可能希望根据您的需要明确设置 MEP。

有关详细信息，请参阅这些 EIP

*   [http://camel.apache.org/event-message.html](http://camel.apache.org/event-message.html)
*   [http://camel.apache.org/request-reply.html](http://camel.apache.org/request-reply.html)

例如，JMS 端点可以执行 InOnly（仅发送到队列）或 InOut（通过 JMS 请求/回复）等。

# android - Android 完成使用后我需要将每个对象设置为 null 吗？

> ID：15683947
> 
> 赞同：2
> 
> 时间：2013-03-28T14:05:56.597
> 
> 标签：android, memory-management, garbage-collection

我创建了这个对象，其中包含对其他一些对象的引用：

```
public class ListHandler {

    private AppVariables app; //AppVariables instance
    private Extra extra; //the extra argument represanting the list
    private ArrayList<FacebookUser> arrayList; //the array list associate with the list given
    private Comparator<FacebookUser> comparator; //the comparator of the list
    private String emptyText; //list empty text

    /**
     * Constructor - initialize a new instance of the listHandler
     * @param app the current {@link AppVariables} instance
     * @param extra the {@link Extra} {@link Enum} of the list
     */
    public ListHandler(AppVariables app, Extra extra)
    {
        this.app = app;
        this.extra = extra;
         //set the array list to match the list given in the arguments
        setArrayList(); 
        setComparator();
        setEmptyTest();
    }
    /**
     * Clear all resources being held by this object
     */
    public void clearListHandler()
    {
        this.arrayList = null;
        this.comparator = null;
        this.app = null;
        this.emptyText = null;
        this.extra = null;      
    } 
```

我已经构建了该`clearListHandler()`方法，以便`null`在完成使用`ListHandler`.

有必要吗？我是否需要清除所有对象以便稍后将它们垃圾收集起来，或者 GC 是否会知道该对象不再使用，因为初始化它的对象不再使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:14:04.250

垃圾收集非常聪明，您通常不需要将对象显式设置为 null（尽管在使用位图时在某些情况下会有所帮助）。

如果一个对象无法从任何活动线程或任何静态引用访问，则该对象有资格进行垃圾收集或 GC，换句话说，如果一个对象的所有引用都为空，则您可以说该对象有资格进行垃圾收集。循环依赖不计为引用，因此如果对象 A 具有对象 B 的引用并且对象 B 具有对象 A 的引用并且它们没有任何其他实时引用，那么对象 A 和 B 都将有资格进行垃圾收集。通常，在以下情况下，对象可以在 Java 中进行垃圾回收：

1.  该对象的所有引用都显式设置为 null，例如 object = null
2.  对象是在块内创建的，一旦控制退出该块，引用就会超出范围。
3.  父对象设置为 null，如果一个对象持有另一个对象的引用，并且当您将容器对象的引用设置为 null 时，子对象或包含的对象自动成为垃圾回收的条件。
4.  如果一个对象只有通过 WeakHashMap 的实时引用，它将有资格进行垃圾收集。

[您可以在此处](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html#ixzz2OqNBx2W9)找到有关垃圾收集的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:22:38.417

你不应该那样做。垃圾收集器将自动确定何时最好清除所有对象。尝试阅读[这个](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html)和[这个](http://docs.oracle.com/javase/tutorial/java/javaOO/usingobject.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:19:23.590

不会。Dalvik/Java 虚拟机将分配内存，并根据需要取消分配内存。

你正在做的事情没有问题，只是没有必要。

# matlab - 仅使用深度优先和/或广度优先遍历将表达式树转换回字符串形式

> ID：15683949
> 
> 赞同：0
> 
> 时间：2013-03-28T14:05:58.490
> 
> 标签：matlab, tree, expression-trees, depth-first-search, breadth-first-search

我正在研究一个涉及表达式树的遗传编程问题。我使用的树数据结构仅在深度优先和广度优先遍历方面提供访问器。我只使用这些提供的方法从树中恢复表达式的有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:08:25.043

Ok, problem solved by using a recursive BFS search. Basically the function calls itself on the subtrees unless the subtree is a terminal node, in which case the value of the node is returned.

# javascript - 使用 ASPxGridView.GetSelectedFieldValues 读取客户端数据而不是服务器

> ID：15683951
> 
> 赞同：0
> 
> 时间：2013-03-28T14:06:02.717
> 
> 标签：javascript, asp.net, devexpress, client-side, aspxgridview

我有以下代码

```
objGrid.GetSelectedFieldValues("IsEnabled", function (values)
{
    if (values[0])
    {
        $('#btnEnable').hide();
        $('#btnDisable').show();
    }
    else
    {
        $('#btnEnable').show();
        $('#btnDisable').hide();
    }
} 
```

这可以正常工作，但是当数据已经在客户端中时，网格会为数据执行回调到服务器。

如何让网格改为读取客户端数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:37:30.687

[ASPxClientGridView.GetSelectedFieldValues](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_GetSelectedFieldValuestopic)始终使用回调来获取数据。你无法避免这一点。
有两种方法可以在没有 ASP.NET 回调的情况下获取行数据： 1.[本文](http://www.devexpress.com/Support/Center/e/E123.aspx)
解释的客户端数据缓存 2\. 使用 ajax 查询。[使用ASPxClientGridView.GetRowKey](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_GetRowKeytopic)获取行键。实现将接收行键和表/对象名称的 http 处理程序。获取您需要的数据并将其发送回浏览器。您可以为此使用 jquery.ajax。

# android - 在 Android 原生来电屏幕上弹出窗口，如真正的来电者 Android 应用程序

> ID：15683952
> 
> 赞同：52
> 
> 时间：2013-03-28T14:06:03.217
> 
> 标签：android, android-layout, android-widget, broadcastreceiver, android-broadcast

我正在为Android中的来电开发一个广播接收器，并且在接到来电时，我想在本地来电屏幕上弹出一个弹出窗口。

我完成了那个代码。但现在的问题是，在[Android 4.1 (Jelly Bean) API 级别 17](http://en.wikipedia.org/wiki/Android_version_history#Android_4.2_Jelly_Bean_.28API_level_17.29)中，当电话响起时，将`PHONE_STATE`作为`OFF HOOK`，如果我正在调用一个活动，它会被调用，但它下面的代码不会被执行。我列出了代码：

### 我的广播接收器

```
package com.example.popwindowonincomingcallscreen;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;
import android.util.Log;

public class IncomingBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        Log.d("IncomingBroadcastReceiver: onReceive: ", "flag1");

        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        Log.d("IncomingBroadcastReceiver: onReceive: ", state);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)
                || state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)) {

            Log.d("Ringing", "Phone is ringing");

            Intent i = new Intent(context, IncomingCallActivity.class);
            i.putExtras(intent);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            Wait.oneSec();
            context.startActivity(i);
        }
    }
} 
```

我正在调用的活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.View.MeasureSpec;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;

public class IncomingCallActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        try {
            Log.d("IncomingCallActivity: onCreate: ", "flag2");

            */ After this line, the code is not executed in Android 4.1 (Jelly Bean) only/*

            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
            getWindow().addFlags(
                    WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

            Log.d("IncomingCallActivity: onCreate: ", "flagy");

            setContentView(R.layout.main);

            Log.d("IncomingCallActivity: onCreate: ", "flagz");

            String number = getIntent().getStringExtra(
                    TelephonyManager.EXTRA_INCOMING_NUMBER);
            TextView text = (TextView) findViewById(R.id.text);
            text.setText("Incoming call from " + number);
        } 
        catch (Exception e) {
            Log.d("Exception", e.toString());
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

后

```
try {
    Log.d("IncomingCallActivity: onCreate: ", "flag2");
} 
```

该代码不在 Android 4.1 (Jelly Bean) 中执行，但在其他版本中它正在运行。

我已经尝试了几乎所有我能做到的方法。此代码在本机呼叫屏幕上显示半透明活动，并且它不会阻止背景控件，例如拿起电话。但我希望它像真正的来电者一样。我附上了关于真正来电者如何在来电屏幕上显示窗口的快照。

如何为 Android 应用程序实现此功能？

这就是真正的调用者的工作方式：

![在此处输入图像描述](../Images/46f7cc805e057eb5a19e9721d7f70a8c.png)

我现在的输出：

![在此处输入图像描述](../Images/28dbb257889136b320319dabcc779be6.png)

## 更新 1

在赏金之后，我也没有得到我正在寻找的确切东西，但我会回复所有人；我正在努力。无论如何，此代码适用于大多数 Android 手机。如果有人要使用并捕获它的解决方案，请在此处写下，以便每个人都能从中受益。

## 更新 2

我尝试在广播接收器的 onReceive 方法中实现 Toast，因为 toast 是 Android 的本机组件，但它也没有在 Android 4.1 (Jelly Bean) 中显示。

我的想法是在广播接收器的 onReceive 方法中实现 Toast，然后根据我们的需要更改其设计并调整其显示持续时间。但另一个问题是**findViewById**在广播接收器中不起作用，所以我认为我们必须以编程方式制作一个 LinearLayout 来自定义 toast。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T05:32:55.480

I am not sure that your custom GUI will always be on top of the default one, because the system broadcast receiver and your receiver are both trying to display its GUI on top of the screen. We are not sure which one is called first, but one tricky work to make your GUI on top of the screen is when the phone is ringing call your activity after 1-2 second(s) used handler for that.

```
new Handler().postDelayed(new Runnable() {

     @Override
     public void run() {
         // TODO Auto-generated method stub
         Intent intent = new Intent(context, AcceptReject.class);
         intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         context.startActivity(intent);
     }
 }, 2000); 
```

I hope it may help you.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T10:14:27.750

在方法之前尝试代码`super.onCreate`。我认为在调用 super 之后代码会被跳过。有时这种技巧对我有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-18T06:38:15.927

我刚刚在[Android 4.2 (Jelly Bean)](http://en.wikipedia.org/wiki/Android_version_history#Android_4.2_Jelly_Bean_.28API_level_17.29)模拟器上进行了测试，它可以完美地阻止整个来电屏幕，就像 truecaller 一样：

```
public void onReceive(Context context, Intent intent) {

    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        LayoutParams.MATCH_PARENT,
        LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.TYPE_SYSTEM_ALERT |
        WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
        PixelFormat.TRANSPARENT);

    params.height = LayoutParams.MATCH_PARENT;
    params.width = LayoutParams.MATCH_PARENT;
    params.format = PixelFormat.TRANSLUCENT;

    params.gravity = Gravity.TOP;

    LinearLayout ly = new LinearLayout(context);
    ly.setBackgroundColor(Color.RED);
    ly.setOrientation(LinearLayout.VERTICAL);

    wm.addView(ly, params);
} 
```

在清单中：

```
<receiver android:name=""  android:enabled="true" >
    <intent-filter android:priority="-1">
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-15T07:22:30.187

我也在努力（我在​​这里理解你可能是错误的）。您想要实现的是在 Android 4.2 (Jelly Bean) 中显示该活动。我只是延迟显示活动。我在不同的班级中使用过 PhoneStateListener。我能够在呼叫者屏幕上显示新活动。这是我的完整代码：

![在此处输入图像描述](../Images/851b4c181627d0d5a739ac98f7419262.png)

### 文件 MyBroadcastReceiver.java

```
public class MyBroadcastReceiver extends BroadcastReceiver {
    static CustomPhoneStateListener phoneStateListener;
    Context context;
    Intent intent;

    @Override
    public void onReceive(Context context, Intent intent) {
        this.context = context;
        this.intent = intent;
        // TODO Auto-generated method stub

            TelephonyManager telephonyManager = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);           
            phoneStateListener = new CustomPhoneStateListener(context);
            telephonyManager.listen(phoneStateListener,
                    PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

### 文件 CustomPhoneStateListener.java

```
public class CustomPhoneStateListener extends PhoneStateListener {

    // private static final String TAG = "PhoneStateChanged";
    Context context; // Context to make Toast if required
    private AudioManager amanager;
    Intent i1;

    public CustomPhoneStateListener(Context context) {
        super();
        this.context = context;
        i1 = new Intent(context, YourActivity.class);       
        i1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        i1.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            Toast.makeText(context, "Phone state Idle", Toast.LENGTH_LONG)
                    .show();

            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:

            Toast.makeText(context, "Phone state Off hook", Toast.LENGTH_LONG)
                    .show();

            break;
        case TelephonyManager.CALL_STATE_RINGING:           
            try {
                Thread.sleep(3000);
                context.startActivity(i1);              
            } catch (Exception e) {
                e.getLocalizedMessage();
            }

        default:
            break;
        }
    } 
```

并且 YourActivity 将保留为您创建的...注意：我在此代码中也遇到了一些问题，它们在这里。

1.  当呼叫关闭时（未接来电或被拒绝），活动不会被关闭。
2.  我无法点击 Activity（我想为我的应用放一个按钮）
3.  它只在第一次工作。当我第二次拨打电话时，我的应用程序停止了（我认为这是因为呼叫被解除时 Activity 没有被关闭）

（帮助接受这些问题。谢谢。可能会帮助一些人）

**更新**

这是如何实现此目标的[小演示](https://github.com/dharmikvyas/CallBlocker/tree/master)链接。

1.  当呼叫关闭时（未接来电或被拒绝），活动不会被关闭。- 解决了
2.  我无法点击活动（我想为我的应用程序放一个按钮） - 已解决
3.  它只在第一次工作。当我第二次拨打电话时，我的应用程序停止了（我认为这是因为呼叫被解除时 Activity 没有被关闭） - 已解决

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-20T07:01:38.177

我认为你不应该开始活动来达到所描述的结果。`LayoutParams.TYPE_SYSTEM_OVERLAY`您需要一个在其布局参数中设置的单独视图。

您可以将此视图放置在屏幕上的任何位置，或仅覆盖整个屏幕。

下面是几行代码：

```
 _av = new ActivatorView(this);
 _avLayoutParams = new WindowManager.LayoutParams(0, 0, 0, 0,
     WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
     WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,
     PixelFormat.OPAQUE);
 _avLayoutParams.screenBrightness = _fScreenBrightness = 20f;

 WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
 wm.addView(_av, _avLayoutParams); 
```

[https://bitbucket.org/gyrussolutions/yaab/src/f01cc8aff690cae1b1107287cb17835b8a3c1643/src/biz/gyrus/yaab/LightMonitorService.java?at=default#cl-338](https://bitbucket.org/gyrussolutions/yaab/src/f01cc8aff690cae1b1107287cb17835b8a3c1643/src/biz/gyrus/yaab/LightMonitorService.java?at=default#cl-338) - 完整的源代码，将其视为示例。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-08-02T04:04:44.950

我正在尝试类似的方法，在来电屏幕上添加一个额外的按钮。

尽管我从 PhoneStateListener 调用代码，但 Sam Adams 发布的答案对我有用。除此之外，他的代码唯一真正的区别是我正在夸大一个布局：

```
overlay = (RelativeLayout) inflater.inflate(R.layout.overlay, null);
wm.addView(overlay, params); 
```

它适用于模拟器以及 HTC One S（运行 Android 4.1.1）。

您需要记住的是保留对您正在添加的覆盖视图的引用，并在电话回到空闲状态（当侦听器获取 TelephonyManager.CALL_STATE_IDLE 时）再次删除它（在 windowmanager 实例上调用 removeView()），否则您的叠加层将留在屏幕上。

```
 WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    if(overlay!=null)
    {
        wm.removeView(overlay);
        overlay = null;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-24T09:10:26.100

尝试这个

```
AlertDialog.Builder builder = new AlertDialog.Builder(context.getApplicationContext());
            LayoutInflater inflater = LayoutInflater.from(context);
            View dialogView = inflater.inflate(R.layout.caller_dialog, null);
            ImageView button = dialogView.findViewById(R.id.close_btn);
            builder.setView(dialogView);
            final AlertDialog alert = builder.create();
            alert.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
            alert.getWindow().setType(WindowManager.LayoutParams.TYPE_PHONE);
            alert.setCanceledOnTouchOutside(true);
            alert.show();
            WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
            Window window = alert.getWindow();
            window.addFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE);
            window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            window.setGravity(Gravity.TOP);
            lp.copyFrom(window.getAttributes());
            //This makes the dialog take up the full width
            lp.width = WindowManager.LayoutParams.MATCH_PARENT;
            lp.height = WindowManager.LayoutParams.WRAP_CONTENT;
            window.setAttributes(lp);
            button.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    //close the service and remove the from from the window
                    alert.dismiss();
                }
            }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-14T22:47:20.333

我们也遇到了类似的问题，即覆盖没有显示在带有 pin 锁的设备上。对我们有用的解决方案如下：

```
mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
    mParams = new LayoutParams(
        LayoutParams.MATCH_PARENT,
        LayoutParams.WRAP_CONTENT,
        LayoutParams.TYPE_SYSTEM_ERROR,
        LayoutParams.FLAG_NOT_FOCUSABLE,
        PixelFormat.TRANSLUCENT); 
```

正是它`LayoutParams.TYPE_SYSTEM_ERROR`造成了差异。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-28T09:51:41.810

我的方法：

1.  使用接收器接收电话事件
2.  使用服务制作覆盖

    ```
    ps:wmParams.type = WindowManager.LayoutParams.TYPE_PHONE; 
    ```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-26T06:51:55.177

```
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        Intent i = new Intent(context, CallingIncoming.class);
        i.putExtras(intent);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK /*| Intent.FLAG_ACTIVITY_CLEAR_TASK*/);
        context.startActivity(i);
    }
}, 450);//It will help you to delay your screen and after it your screen will be top of default app screen 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-15T11:17:55.983

使用一个简单的广播接收器并将此代码放入广播接收器中：

```
public void onReceive(final Context context, final Intent intent) {

    Log.v(LOG_TAG, "Receieved notification about network status");
    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.TYPE_SYSTEM_ALERT |
            WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
                    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
            PixelFormat.TRANSPARENT);

    params.height = WindowManager.LayoutParams.MATCH_PARENT;
    params.width = WindowManager.LayoutParams.MATCH_PARENT;
    params.format = PixelFormat.TRANSLUCENT;

    params.gravity = Gravity.TOP;

    LinearLayout ly = new LinearLayout(context);
    ly.setBackgroundColor(Color.RED);
    ly.setOrientation(LinearLayout.VERTICAL);

    wm.addView(ly, params);

} 
```

# windows - 如何升级 sharepoint Foundation 2010 以使用 SQL Server 2008 R2（标准版）？

> ID：15683964
> 
> 赞同：0
> 
> 时间：2013-03-28T14:06:27.880
> 
> 标签：windows, sharepoint-2010

我们正在开发使用 SharePoint Foundation 2010 来存储和检索文档的 asp.net 应用程序。我们已经安装了“独立”SharePoint Foundation 2010 并使用 SQL Server 2008 R2（标准版）作为 SharePoint Foundation 2010 的数据库。这是错误的，因为我们需要使用“Server Farm”安装 SharePoint Foundation 2010 才能使用 SQL Server 2008 R2 （标准版）作为数据库。现在我们想知道我们应该如何处理现有安装来安装使用 SQL Server 2008 R2（标准版）作为数据库的 SharePoint Foundation 2010（服务器场）。当我们单击 SharePoint Foundation 2010 的 setup.exe 时，它​​会提供选项 - 修复和删除。我们是否需要从此选项中删除 SharePoint 并再次以服务器场类型安装它，还是需要卸载所有内容并重新安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:09:57.837

是的，您应该重新安装 Sharepoint 2010 才能使用 SQL Server 2008 R2 作为数据库服务器。独立安装根本不支持移动数据库。

# iphone - 从情节提要中获取继承的视图控制器的视图

> ID：15683968
> 
> 赞同：0
> 
> 时间：2013-03-28T14:06:43.863
> 
> 标签：iphone, uiviewcontroller, storyboard

我有两个班级：`AViewController : UIViewController`和`BViewController : AViewController`。

当我使用 AViewController.xib 时，我可以`BViewController` **从一个常见的 xib**创建实例：

```
BViewController *bVC = [[BViewController alloc] initWithNibName:@"AViewController" bundle:nil];    
[self presentViewController:bVC animated:YES completion:NULL]; 
```

故事板可以实例化`AViewController`：

```
AViewController *aVC = [self.storyboard instantiateViewControllerWithIdentifier:@"AViewController"]; 
```

如何`BViewController`使用标识符为“AViewController”的视图从 Storyboard 中实例化？

# spring - 使用 @RequestMapping 匹配 URL 模式

> ID：15683973
> 
> 赞同：3
> 
> 时间：2013-03-28T14:06:49.630
> 
> 标签：spring, jsp, url, spring-mvc

[这与这个](https://stackoverflow.com/questions/14856149/spring-request-mapping-matching-with-url-pattern)问题非常相似，但我只是不知道如何匹配 url 模式。

网页.xml：

```
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/activate/*</url-pattern>
</servlet-mapping> 
```

我的控制器：

```
@RequestMapping(value = {"activate/{key}"}, method = RequestMethod.GET)
public ModelAndView activate(@PathVariable(value = "key") String key) {
  ...
} 
```

当我尝试访问`localhost:9999/myApp/activate/123456789`时，我收到以下错误：

```
No mapping found for HTTP request with URI [/myApp/activate/123456789] in DispatcherServlet with name 'dispatcher' 
```

我也试过`<url-pattern>/*</url-pattern>`，同样的事情发生。

但是，通过更改`<url-pattern>/activate/*</url-pattern>`为 `<url-pattern>/**</url-pattern>`不出现错误，但我仍然得到 404。那么，如何映射此 url 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:16:30.647

您需要在 上加上斜线`@RequestMapping`，例如：

```
@RequestMapping(value = {"/activate/{key}"}, method = RequestMethod.GET)
public ModelAndView activate(@PathVariable(value = "key") String key) {
  ...
} 
```

无论如何，如果您想访问以下上下文：

```
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/activate/</url-pattern>
</servlet-mapping> 
```

你不能试试这个：

```
@RequestMapping(value = {"/{key}"}, method = RequestMethod.GET)
public ModelAndView activate(@PathVariable(value = "key") String key) {
  ...
} 
```

[已编辑]

就像 Leonel 说的，你应该有这个配置来使用完整的 URL（`@RequestMapping(value = {"/activate/{key}"}`）：

```
<url-pattern>/</url-pattern> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:30:46.867

将 url-pattern 元素更改为以下内容。一个**斜杠**，**没有星号**：

```
<url-pattern>/</url-pattern> 
```

发生的情况是，首先 servlet 容器将请求的 URL 匹配到模式中，然后它调用 Spring 的 DispatcherServlet，它分派到正确的控制器。

当你有斜杠 + 星号时，`/*`URI 的片段`/activate/123456789`被匹配，它为 DispatcherServlet 找到控制器留下空字符串。

当您有单斜杠时，`/`servlet 容器仅匹配斜杠，从而使字符串`/activate/123456789`由 DispatcherServlet 匹配；使用此字符串，DispatcherServlet 能够找到控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:14:05.433

我见过的所有请求映射都使用了前导斜杠。你试过这个：@RequestMapping("/activate/{key}")

# sql-server-2008 - T-SQL 中的 IF、ELIF、ELSE

> ID：15683975
> 
> 赞同：13
> 
> 时间：2013-03-28T14:06:58.400
> 
> 标签：sql-server-2008, tsql

我正在使用 SQL Server 2008 并尝试在我的代码部分中使用`IF, ELIF, ELSE`语句。`SELECT`我想要做的是以下内容：

```
IF BO.VALUE < BO.REFERENCELOWERLIMIT
    THEN (BO.VALUE - BO.REFERENCELOWERLIMIT) #I WANT THIS TO BE NEGATIVE
ELSE IF BO.REFERENCELOWERLIMIT <= BO.VALUE <= BO.REFERENCEUPPERLIMIT
    THEN BO.VALUE
ELSE
    (BO.REFERENCEUPPERLIMIT - BO.VALUE) 
```

问题是我不明白如何在 SQL 中进行 IF、ELIF、ELSE 类型的事务。我试图搜索这种类型的示例，但遇到了 python 示例...错误的语言，所以我在 MSDBN 网站上进行了搜索，没有看到这种工作，只有 IF/ELSE。

谢谢你

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T14:09:00.840

你想要一个`CASE`表达。 `CASE`按顺序计算，第一个匹配是查询中返回的内容。

```
SELECT
  CASE WHEN BO.VALUE < BO.REFERENCELOWERLIMIT 
           THEN (BO.VALUE - BO.REFERENCELOWERLIMIT)
       WHEN BO.VALUE BETWEEN BO.REFERENCELOWERLIMIT AND BO.REFERENCEUPPERLIMIT
           THEN BO.VALUE
       ELSE  (BO.REFERENCEUPPERLIMIT - BO.VALUE)
  END as MyColumnAlias
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T14:11:30.273

```
SELECT 
    col = CASE 
            WHEN BO.VALUE < BO.REFERENCELOWERLIMIT 
                THEN BO.VALUE - BO.REFERENCELOWERLIMIT
            WHEN BO.VALUE BETWEEN BO.REFERENCELOWERLIMIT AND BO.REFERENCEUPPERLIMIT 
                THEN BO.VALUE
            ELSE BO.REFERENCEUPPERLIMIT - BO.VALUE
FROM tbl 
```

# pushsharp - 使用 PushSharp 的正确方法是什么？

> ID：15683976
> 
> 赞同：9
> 
> 时间：2013-03-28T14:07:06.133
> 
> 标签：pushsharp

我使用 PushSharp 为一些应用程序发送通知。PushSharp 很棒，它确实简化了推送服务的工作，我想知道使用它的正确方法是什么？我还没有找到关于那个的例子/解释。

现在，当我有消息要发送时，我...

1.  创建一个 PushSharp 对象
2.  为所有设备执行 PushService.QueueNotification()
3.  做一个 PushService.StopAllServices 发送所有排队的消息
4.  退出方法（并终止 PushService 对象）。

我应该以这种方式工作，还是让这个 PushService 对象保持活动状态并在需要时调用它的方法？

我应该如何使用 PushService 对象来获取未注册的设备 ID？有一个专用实例？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T12:24:30.823

这是一个经常出现的问题。

答案不一定是一种方式或另一种方式，但这取决于您的情况。在大多数情况下，在需要时创建 PushBroker 实例绝对没问题，因为大多数平台使用基于 HTTP 的协议来发送通知。对于 Apple，他们在其文档中声明您应该保持与 APNS 的连接打开，以最大限度地减少打开和关闭安全连接的开销。

但是，在实践中，我认为这意味着他们不希望您非常频繁地连接和断开连接（例如：他们不希望您为您发送的每条消息创建一个新连接）。实际上，如果您每隔一段时间（比如说每 15 分钟或每小时）发送一批通知，他们可能不会有问题，您为每批打开一个新连接，然后在完成后关闭它。

我从未听说有人因为这样做而被 Apple 的 APNS 服务器阻止。事实上，在使用推送通知的早期，我有一个错误导致为每个通知创建一个新的 apns 连接。我每天发送数千条这样的通知，但从未从 Apple 那里听到任何消息（最终我将其识别为错误并修复了它）。

至于收集反馈，ApplePushService 默认会在启动 10 秒后轮询反馈服务器，之后每 10 分钟轮询一次。如果您想禁止这种情况发生，您只需将 ApplePushChannelSettings.FeedbackIntervalMinutes 设置为 <= 0。然后您可以在需要时手动使用 FeedbackService 类轮询反馈。

# character-encoding - 防止对表单值进行 HTML 解码

> ID：15683978
> 
> 赞同：0
> 
> 时间：2013-03-28T14:07:08.307
> 
> 标签：character-encoding, special-characters, html-encode

我有一个表单元素，例如： `<input type="text" value="O&rsquo;Reilly" />`

但是当这个表单被提交时，传递给表单处理程序的值被解码并发送 ' 字符而不是原始字符串`&rsquo;`

我需要以文字/原始形式获取原始字符串，但我似乎无法强制页面停止为我解码这些 HTML 元素。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:08:56.333

用 HTML 编码 &`&amp;`以防止它成为转义序列的一部分：`<input type="text" value="O&amp;rsquo;Reilly" />`

# java - Selenium 能够验证元素，无法访问/使用这些元素

> ID：15683980
> 
> 赞同：0
> 
> 时间：2013-03-28T14:07:11.447
> 
> 标签：java, xpath, selenium

所以正如标题所说，当我使用 verifyElement 并按 ID 搜索时，测试不会崩溃。但是当我尝试输入数据（特别是输入文本框）时，测试失败了。

文本框：

```
<span><input type="text" name="searchString" maxlength="100" value="" id="searchString" class="commonTextBox"></span> 
```

这不会失败：

```
automation.verifyElement(AutomationConstants.FIND_ID, "searchString", false); 
```

这失败了：

```
automation.enterInputBox(AutomationConstants.FIND_XPATH, "//input[@id='searchString'and @class='commonTextBox']", "Alex", false); 
```

我还使用了 FIND_ID 而不是 XPATH，这也失败了。

我没主意了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:53:41.813

```
driver.findElement(By.xpath("//input[@id='searchString'and @class='commonTextBox']")).sendKeys("YOUR TEXT"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:57:37.693

测试不会在验证时崩溃。您应该使用断言而不是验证。在这种情况下，您将确定该元素确实包含您需要的内容。

# batch-file - 批处理文件：命令在主例程中工作 - 调用时失败（使用变量）

> ID：15683983
> 
> 赞同：1
> 
> 时间：2013-03-28T14:07:13.217
> 
> 标签：batch-file

我需要帮助填补知识空白。不知道为什么处理不同，但肯定有一个合乎逻辑的解释。

以下代码适用于主例程。

```
IF exist "%pathfile%.mkv" (
set file_error=0
) ELSE (
        set file_error=1    
        call :ERROR
) 
```

然而，在我的脚本运行后，我回顾了我的结构化编程大学时代，并决定应该清理它并更有逻辑地组织它。所以我把这个文件检查移到一个可以从主程序调用的子程序中。

```
:ISFILETHERE
echo "%pathfile%.mkv"   -->placed only for debug
IF exist "%pathfile%.mkv" (
    set file_error=0
) ELSE (    
set file_error=1
ECHO -----------------------------ERROR------------------------------------------
ECHO   %file%.mkv does not exist in %fullpath%
ECHO ----------------------------------------------------------------------------
)
GOTO :EOF 
```

变量说明：

```
set basepath=\\opennas\media\Movies\
set basefolder=%~1
set file=%~2
set fullpath=%basepath%%basefolder%\
set pathfile=%basepath%%basefolder%\%file% 
```

所以 %pathfile%.mkv 是一个存储完整路径和文件名（不带扩展名）的变量，该变量来自上述预设默认值 + 用户条目的组合。

如果我在“%pathfile%.mkv”上做一个回显，输出就是我所期望的。然而，它似乎有一个问题，`IF exist "%pathfile%.mkv" (` 它在主系统中正确地通过它，但当它在从主系统调用的子系统中时却没有。setlocal 设置在文件的开头，没有 endlocal 也没有额外的选项。

尝试运行脚本的输出： `>mkv2wtv "Gattaca (1997)" "Gattac"` sub 内的调试回显，它简单地回显 %pathfile%：（`"\\opennas\media\Movies\Gattaca (1997)\Gattac.mkv"`引号在输出中应该是这样）下一行，应该是 If 语句，错误：'\ 在这个时间。'

我错过了什么，必须是合乎逻辑的，为什么这在主程序中有效，但是具有相同内容的变量的完全相同的代码在子程序中不起作用。

谢谢你看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:22:39.257

解析时，会扫描`IF`从 到右括号的整个语句，并将**ANY** %var% 替换为其**PARSE-TIME**内容。`IF`

 ****因此，右括号 in`(1997)`被视为`IF`和***THAT**的右括号将代码转换为错误格式。

解决方法是用插入符号 ( `^`) 转义该右括号，但如果它位于变量中，这可能会很不方便。

以下是一些可能有帮助的代码：

```
@ECHO OFF
SETLOCAL
SET var=1234)567)89
ECHO %var%
SET var=%var:)=^^^^)%
ECHO %var% 
```****

# java - 移除分离的实例

> ID：15683985
> 
> 赞同：2
> 
> 时间：2013-03-28T14:07:18.070
> 
> 标签：java, hibernate

我想删除一个对象会出现以下错误：

> javax.ejb.EJBException：java.lang.IllegalArgumentException：删除分离的实例。

我的代码：

```
public void remover(MensagemContato param) {
    PersistenciaMensagemContato pParam = new PersistenciaMensagemContato();     
    pParam.delete(param);
    pParam.close();
} 
```

有没有人在使用hibernate简单删除对象时遇到过这个问题？

谢谢！

黛博拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:15:55.200

您不能删除不是来自数据库的实体。您只能删除具有 ID 值的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:08:49.917

`PersistenciaMensagemContato`您的实体中没有指定 ID 。Hibernate 如何知道要删除哪个引用？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:38:48.797

[This is a good tutorial.... http://www.tutorialspoint.com/hibernate/hibernate_examples.htm](http://www.tutorialspoint.com/hibernate/hibernate_examples.htm)

```
public void deleteEmployee (Integer EmployeeID){
  Session session = factory.openSession();
  Transaction tx = null;
    try {
        tx = session.beginTransaction();
        Employee employee =
                    (Employee) session.get(Employee.class, EmployeeID);
        session.delete(employee);
        tx.commit();
    } catch (HibernateException e) {
        if (tx != null) tx.rollback();
        e.printStackTrace();
    } finally {
        session.close();
    }
} 
```

# python - 使用 Python Cassandra 模块的参数化查询

> ID：15683989
> 
> 赞同：1
> 
> 时间：2013-03-28T14:07:22.850
> 
> 标签：python, cassandra, cql

我一直在试验 Python 的 CQL 插件（[http://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/](http://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/)），它支持参数化查询。从他们的文档中：

```
import cql
connection = cql.connect(host, port, keyspace)
cursor = connection.cursor()
cursor.execute("CQL QUERY", dict(kw='Foo', kw2='Bar', etc...)) 
```

我的问题是是否可以在一个循环中多次参数化和执行相同的查询，以及实现这一点的方法是什么样的。对不起，但文档很少，所以我正在寻找答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:13:30.633

[查看测试](http://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/source/browse/#git/test)中的代码以获取更多示例

```
import cql
connection = cql.connect(host, port, keyspace)
cursor = connection.cursor()

query = "UPDATE StandardString1 SET :c1 = :v1, :c2 = :v2 WHERE KEY = :key"
cursor.execute(query, dict(c1="ca1", v1="va1", c2="col", v2="val", key="ka"))
cursor.execute(query, dict(c1="cb1", v1="vb1", c2="col", v2="val", key="kb"))
cursor.execute(query, dict(c1="cc1", v1="vc1", c2="col", v2="val", key="kc"))
cursor.execute(query, dict(c1="cd1", v1="vd1", c2="col", v2="val", key="kd")) 
```

或者更具体地说，您关于在循环中运行它的问题：

```
import cql
connection = cql.connect(host, port, keyspace)
cursor = connection.cursor()

query = "UPDATE StandardString1 SET :c1 = :v1, :c2 = :v2 WHERE KEY = :key"
values = [dict(c1="ca1", v1="va1", c2="col", v2="val", key="ka"),
          dict(c1="cb1", v1="vb1", c2="col", v2="val", key="kb"),
          dict(c1="cc1", v1="vc1", c2="col", v2="val", key="kc"),
          dict(c1="cd1", v1="vd1", c2="col", v2="val", key="kd")]

for value in values:
    cursor.execute(query, value) 
```

# javascript - jquery .live函数抛出错误“对象[对象对象]没有方法'live'”

> ID：15683997
> 
> 赞同：-4
> 
> 时间：2013-03-28T14:07:44.887
> 
> 标签：javascript, html, jquery

我试图`click`在我的项目中向 div Id 添加一个事件，但它抛出了一个错误。我不知道为什么。有人可以看看代码吗？

HTML：

```
<div id="container">
    <div id="header1">
        <input type="button" value="Search and Highlight!!" style="position: absolute; right: 100px; top: 10px;" />
    </div>
... 
```

jQuery：

```
 var searchAttachPoint = document.querySelector('.header1');
  $('#header1').live("click", function () {
      myNameSpace.searchPrompt("Key the text and press Ok", false)
  }); // The error is thrown in this line
  var attachpoint = document.querySelector('.buttonAttachPoint');
  $(document).on('load', myNameSpace.LoadAllBooks("ajax/metadata.json", this.attachpoint)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:12:37.453

`.live()`已折旧，可以替换为`.on()`

所以，

改变：`$('#header1').live('click',function(){...})`

至：`$('body').on('click','#header1',function(){...})`

`body`应替换为最近的静态父级`#header1`

# forms - ZF2 相关表单域

> ID：15683999
> 
> 赞同：0
> 
> 时间：2013-03-28T14:07:46.190
> 
> 标签：forms, filter, zend-framework2

如何设置依赖于另一个输入字段的输入过滤器。我只想在选择其他表单域（复选框）时才根据需要设置表单域。

我如何在 zf2 中处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:37:59.850

I use the same idea as Crisp but I prefer to do it in the Form classes instead of the controller. I think it's better to have all validators defined all together in the same place. I do it this way:

**1** - All Form classes inherits from a custom BaseForm:

```
class BaseForm extends ProvidesEventsForm
{
    private $postData;

    protected function getPostData() {
        return $this->postData;
    }

    public function __construct( $name = null, $serviceManager ) {
        parent::__construct( $name );

        $this->serviceManager = $serviceManager;
        $this->request = $serviceManager->get( 'Application' )->getMvcEvent()->getRequest();
        $this->postData = get_object_vars( $this->request->getPost() );
    }
} 
```

This way you can easily pick any value from the post, like your checkbox (you can do the same approach with the route parameters, so you'll have all the view data in your Form).

**2** - In the FormEdit class that inherits from BaseForm, you pass the getPostData() value to the SomeFilter this way:

```
class FormEdit extends BaseForm
{
    public function __construct( $name = null, $serviceManager ) {
        parent::__construct( $name, $serviceManager );

        $filter = new SomeFilter( $this->getPostData() );

        $this->setInputFilter( $filter );
    } 
```

**3** - And now just use it in the SomeFilter:

```
class SomeFilter extends InputFilter
{
    public function __construct( $postData ) {
        if ( $postData[ 'checkbox' ] ) {
            $this->add( array(
                'name'      => 'other_input',
                'required'  => true,
            ) );
        }
    }
} 
```

This way you keep the Controller clean and all the validators in the same place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:47:38.047

您可以测试复选框是否已填充并`setValidationGroup`相应地在表单上进行验证，然后在您的控制器操作中进行验证...

```
public function someAction()
{
    $form = new MyForm; // contains name, title, checkbox, required_if_checked fields
    // usual form related setup

    if ($request->isPost()) {
        $form->setData($request->getPost());
        // see if the checkbox is checked
        $checked = $this->params()->fromPost('checkbox', false);
        // not checked, set validation group, omitting the dependent field
        if (!$checked) {
            $form->setValidationGroup(array(
                'name',
                'title',
                'checkbox', // could probably skip this too
            ));
        }        
        if ($form->isValid()) {
            // do stuff with valid data
        }
   }
} 
```