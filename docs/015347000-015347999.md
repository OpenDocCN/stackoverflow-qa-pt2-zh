# StackOverflow 问答 15347000-15347999

# macos - 难以理解 NSRemoteOpenPanel 与沙盒应用程序的差异

> ID：15347000
> 
> 赞同：1
> 
> 时间：2013-03-11T19:32:14.040
> 
> 标签：macos, cocoa, sandbox, codesign, nsopenpanel

我目前正在尝试对我的应用程序进行沙箱处理，并且遇到了 NSOpenPanel 的一些奇怪问题。当我尝试显示我的 NSOpenPanel 时，我目前收到以下错误：

```
Error:  Objective-C runtime exception: 
-[NSRemoteOpenPanel orderFront:]: unrecognized selector sent to instance 0x16a1630 
```

我已经阅读了一些其他帖子，这些帖子解释了当您启用沙盒时，操作系统将使用 NSRemoteOpenPanel 而不是 NSOpenPanel，并且此类可能不会直接从 NSOpenPanel 继承，并且可能不会实现其所有方法。这是一个讨论这个的stackoverflow帖子：

[带有应用沙盒功能的 Cocoa 应用程序中的 NSOpenPanel 出现错误](https://stackoverflow.com/questions/9272599/nsopenpanel-in-cocoa-app-with-app-sandboxing-gives-an-error)

现在这一切都很好，但我想知道如何知道哪些方法不能与沙盒化的 NSOpenPanel 一起使用。似乎没有关于 NSRemoteOpenPanel 的公开文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:45:09.703

您可以依靠围绕面板意图进行的基本操作（获取文件/目录、指定过滤器等）。更具体地说，只有在 NSSavePanel 和 NSOpenPanel 中定义的方法可供您使用。您不应围绕基本窗口功能进行编码，因为您的应用程序无法控制窗口。

来自 Apple 的文档：

> NSOpenPanel 或 NSSavePanel 对象继承的 App Sandbox 方法更少。如果您尝试向 NSOpenPanel 或 NSSavePanel 对象发送消息，并且该方法在 NSPanel、NSWindow 或 NSResponder 类中定义，系统会引发异常。Xcode 编译器不会发出警告或错误来提醒您注意此运行时行为。

如果您直接调用`openFront`以将其显示为面板，请改用 NSSavePanel `beginWithCompletionHandler:`。

# java - 使用 java 封装的 C++ 代码是否可以在所有操作系统上运行？

> ID：15347006
> 
> 赞同：0
> 
> 时间：2013-03-11T19:32:26.090
> 
> 标签：java, c++, c, swig

我有一个关于 C/C++ 代码的问题，如果它们用 Java 包装并在这种情况下作为 Java Applet 运行，它可以在任何操作系统上运行还是仅在它所针对的操作系统上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:38:14.683

这取决于 C++ 代码的可移植程度，但无论如何，如果没有一些工作，C++ 代码将无法在不同的平台上运行——您必须为每个目标平台构建特定于平台的本机代码版本。

Java 代码没有这个问题，因为 JVM 使您免受（大多数）平台依赖性的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:36:33.540

如果我正确理解您的问题，您指的是使用 Java 中的 JNI。在这种情况下，是的，C/C++ 代码已经编译，因此只能在该平台上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:37:56.933

至少，您必须为目标平台重新编译它。

至于需要做多少工作，这取决于您编写可移植代码的仔细程度——用 C 或 C++ 编写的代码可以运行从完全可移植到*完全*不可移植或任何地方的整个范围介于两者之间。从 Java/JNI 使用它不会改变这一点。

# php - 谷歌登录按钮 - PHP

> ID：15347007
> 
> 赞同：0
> 
> 时间：2013-03-11T19:32:30.873
> 
> 标签：php, sign

我在服务器端实现了谷歌登录按钮。

我在该行收到语法错误：

```
$tokenInfo = json_decode($client::getIo()->authenticatedRequest($req)->getResponseBody()); 
```

然而，这直接取自[https://developers.google.com/+/web/signin/server-side-flow](https://developers.google.com/+/web/signin/server-side-flow)。

我是 PHP 新手，因此无法清楚地理解这些 PHP 语法。符号 :: 是什么意思？这是否需要任何特定版本的 php？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T21:07:53.133

See my answer to [this question](https://stackoverflow.com/questions/26901775/google-login-api-problems/27006723) which I think may be your problem.

In the line you are having trouble with:

```
$tokenInfo = json_decode($google::getIo()->authenticatedRequest($req)->getResponseBody()); 
```

`::` change to `->`. and `getIo()` should be changed to `getAuth()` due to (I think) a migration within the api.

After that, I encountered another error in which I changed: `if ($token->error)` to `if(isset($tokenInfo->error))`

Good Luck!

# ruby - Ruby regexp 抛出无效的反向引用编号/名称错误

> ID：15347009
> 
> 赞同：1
> 
> 时间：2013-03-11T19:32:38.403
> 
> 标签：ruby, regex

我当前的代码旨在通过一个巨大的 .csv 文件并将某些日期重新格式化为 SQL 日期时间友好格式。它们目前是 DDMMYYYY，我希望它们为 YYYYMMDD，这是我采用的方法（从另一个 SO 问题中提取）：

```
CSV.foreach('file.csv') do |x|
if x[0] == "1"
    x.gsub(/([0-9]{2})-+([0-9]{2})-+([0-9]{4})/,/\3-\2-\1/)

else
end 
```

这会引发错误“无效的反向引用编号/名称”。

文档告诉我，我可以通过用 定义组`?<name>`并用 反向引用它们来避免这种情况`\k<name>`，但是我所有这样做的尝试都以失败告终。有人可以告诉我它的外观，或提供替代解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:44:23.670

没有正则表达式：

```
str = "DDMMYYYY"
p new_str = str[4..7] << str[2..3] << str[0..1]
#=> "YYYYMMDD" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T19:37:36.923

gsub 的第二个参数应该是字符串，而不是正则表达式（请参阅[文档](http://ruby-doc.org/core-2.0/String.html#method-i-gsub)）。

做：

```
x.gsub(/([0-9]{2})-+([0-9]{2})-+([0-9]{4})/,'\3-\2-\1') 
```

请注意，第二个参数使用`'replacement string'`而不是`/replacement string/`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-20T23:32:56.043

我认为值得补充的是，虽然上述答案是正确的，但它们并没有解决 OP 遇到的错误。此错误不是第二个参数是正则表达式的问题。事实上，在上述情况下，ruby 从未真正调用 gsub 方法，因为第二个参数中的正则表达式不会解析。后跟任何数字的反斜杠将导致此错误。这是一个无效的正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:42:00.187

用于`'`分隔您的第二个`gsub`参数（替换字符串），而不是`/`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:00:19.130

我会选择[`Date::strptime`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-c-_strptime)和[`Date#strftime`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-strftime)：

```
dates = %w[12122012 10121012 12032013]
#=> ["12122012", "10121012", "12032013"]

dates.each do |date_str|
  date = Date.strptime(date_str, '%d%m%Y')
  puts date.strftime('%Y %m %d')
end

# 2012 12 12
# 1012 12 10
# 2013 03 12 
```

# python - Python 中的 XLRD 和 HTTP Excel 文件

> ID：15347011
> 
> 赞同：0
> 
> 时间：2013-03-11T19:32:56.570
> 
> 标签：python, excel, http, xlrd

我可以直接从 HTTP 位置读取以与 xlrd 一起使用吗？

我尝试了以下方法：

```
import ntlm, urllib2
url = 'http://myurl/file.xls'
passman.add_password(None, url, login, password)
auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)
opener = urllib2.build_opener(auth_NTLM)
sock = urllib2.urlopen(url)
content = sock.read() 
```

并具有`ReadFromExcel`读取 Excel 文件并返回一些数据的函数，但它无法从内容中读取。

```
ReadFromExcel(content) 
    book = xlrd.open_workbook(filename)
  File "C:\Python27\lib\site-packages\xlrd\__init__.py", line 400, in open_workbook
    f = open(filename, "rb")
TypeError: file() argument 1 must be encoded string without NULL bytes, not str 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:44:09.143

您应该传递文件名而不是文件的内容：

```
import os
import tempfile

with tempfile.NamedTemoraryFile(suffix='.xls') as file:
    file.write(content)
    file.delete = False

try:
    result = ReadFromExcel(file.name)
finally:
    os.remove(file.name) 
```

或使用[`file_contents`参数](https://stackoverflow.com/a/13807545/4279)。

# javascript - 在 RAILS 应用程序中使用 javascripts

> ID：15347023
> 
> 赞同：0
> 
> 时间：2013-03-11T19:33:27.160
> 
> 标签：javascript, ruby-on-rails

导轨 3.2.6

据我了解，通过在 /app/assets/javascripts 中包含所有 javascript，应用程序模块可以访问它们。我正在关注一个教程，在 application.html.erb 的末尾，他们添加了以下行：

```
<%= javascript_include_tag "application" %> 
```

这是多余的，还是有目的将它包含在 application.html.erb 的末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:50:36.847

之所以将 javascript_include_tag 放在 application.html.erb 文件的末尾，是为了先加载页面的内容，然后再加载 javascript。无论哪种方式都可以，但是将 javascript_include_tag 放在末尾时性能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:51:59.537

默认情况下，资产不包含在您的视图中。这就是为什么您必须在布局文件中使用 javascript_include_tag、stylesheet_link_tag 的原因。至于为什么在最后添加它 - 以改善页面加载时间。[更多关于这里](http://developer.yahoo.com/performance/rules.html#js_bottom)

# c# - WPF 中的便签项目。模型、视图、视图模型

> ID：15347025
> 
> 赞同：1
> 
> 时间：2013-03-11T19:33:43.280
> 
> 标签：c#, .net, wpf, xaml, mvvm

我正在开发一个 Sticky Notes 项目并在 WPF 中做 UI，显然将 MVVM 作为我的架构设计选择。我正在重新考虑我的模型、视图和视图模型应该是什么。

我有一个名为 Note 的类，如下所示：

```
class Note
{
    public Guid ID { get; set; }
    public string Note { get; set; }
} 
```

我也有用户，它存储笔记的集合：

```
public class User
{
    public Guid ID { get; set; }
    public Dictionary<Guid, Note> Notes = new Dictionary<Guid,Note>();
} 
```

所以现在我需要制作我的模型和视图模型。首先，我想采用最明显的方法，即 Note 本身就是 Model，然后为 ViewModel 设置一个 NoteViewModel。但是后来我想，如果我将 User 作为模型并为 ViewModel 提供一个 UserViewModel 类会怎样。如果我这样做了，我该如何实现 INotifyPropertyChanged。如果我的模型是 Note，INotifyPropertyChanged 的​​实现很简单。您对此的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:50:41.310

我认为你需要拓宽你对模型的看法。简而言之：模型是您将使用的“对象”的表示（可以是带有表的数据库或您定义的 POCO）。User 和 Note 都可能是模型的一部分，就像**客户端**表和**clientOrders**表是数据库中模型的一部分一样。ViewModel 处理与模型交互的业务逻辑，并通过 wpf 属性绑定将该数据公开给视图。

至于INotifyPropertCHanged，这里有一个简单的用法（vb）：

```
Imports System.ComponentModel

Public Property CustomerName() As String 
        Get 
            Return Me.customerNameValue
        End Get 

        Set(ByVal value As String)
            If Not (value = customerNameValue) Then 
                Me.customerNameValue = value
                NotifyPropertyChanged()
            End If 
        End Set 
    End Property 
```

C＃：

```
 using System.ComponentModel

 public string CustomerName
        {
            get
            {
                return this.customerNameValue;
            }

            set
            {
                if (value != this.customerNameValue)
                {
                    this.customerNameValue = value;
                    NotifyPropertyChanged();
                }
            }
        } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:41:39.490

YouTube 上提供了有关如何执行此操作的更具说明性的方法。底线是 UserViewModel 将是父视图模型，而多个 NoteViewModel 将是子视图模型。父视图模型将负责创建子视图模型。享受视频，就像作者说的那样——编码愉快！

[http://www.youtube.com/watch?v=Dzv8CtUCchY](http://www.youtube.com/watch?v=Dzv8CtUCchY)

# c# - MVC4：从字符串到对象的映射中获取有用的模型绑定的最简单方法

> ID：15347029
> 
> 赞同：1
> 
> 时间：2013-03-11T19:33:49.470
> 
> 标签：c#, asp.net-mvc

我在 MVC 控制器中。我有一个类，我希望 MVC 以与处理 a`Guid`或 a`DateTime`完全相同的方式处理此类的值 那是：

*   当将类类型的实例写入表单时，它是单个格式化字符串，而不是单独的字段。
*   当一个值（以字符串形式）被回发时，它会自动转换回该类的一个实例。

从概念上讲，实现这一点应该只需要每个方向的转换函数。假设我们有一个或多个对象实现了这个接口：

```
namespace SomeExample
{
    public interface SomeStringConversion<T>
    {
        T ConvertFromString(string str);
        string ConvertToString(T obj);
    }
}

// Example: What such a class for Guid might look like
namespace SomeExample
{
    public class SomeGuidStringConversion : SomeStringConversion<Guid>
    {
        public Guid ConvertFromString(string str)
        {
            return Guid.Parse(str);
        }

        public string ConvertToString(Guid g)
        {
            return g.ToString();
        }
    }
} 
```

并且说我们不在乎验证超出接受或拒绝的内容`ConvertFromString()`。

`SomeStringConversion<T>`从集合到使用它们的控制器的最直接路径是什么（即，模型绑定的无关特征尽可能少的无关细节） ？

编辑：我做开发人员已经有一段时间了，但在 MVC 方面我是新鲜人。我需要一个可以向后工作的代码示例。高级别的描述不会有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:40:58.210

我能看到的最直接的实现方式是使用自定义模型绑定器。

binder 检查要绑定的模型类型是否实现了`SomeStringConversion<T>`接口，如果实现了，则尝试将模型绑定到传入的字符串值。如果没有，它只是遵循`DefaultModelBinder`默认的模型绑定过程。

如果字符串结构格式正确，您可以实现 a`ValueProvider`以将值提供给模型绑定器以进行模型绑定。

# javascript - 在 JavaScript/jQuery 中的两个元素之间包装元素？

> ID：15347032
> 
> 赞同：1
> 
> 时间：2013-03-11T19:33:57.940
> 
> 标签：javascript, jquery

如何创建一个将内容包装在两个元素之间的元素？

这是我正在处理的代码的简化示例：

```
<p>
Some text some text <span class="foo">some more text</span> additional text.
</p>
<p>
I am bad at coming up with <span class="foo">fake text</span>, I should have looked it up lorem ipsum somewhere.
</p> 
```

我想要的是第一个跨度结束和第二个跨度开始之间的所有文本都被包裹在一个 div 中，这样我就可以例如为文本着色不同。

这样的事情可能吗？如果没有，有什么聪明的方法可以解决这个问题吗？

编辑：我不完全确定我希望代码在一天结束时如何显示。我只关心结果，即我能够将特定样式应用于跨度之间的文本，尽管它们有不同的父级。例如，如果我可以设置文本并在其周围加上边框，那将是非常棒的，这样最终结果看起来像这样：

一些文字 一些文字 一些文字

```
------------------------------
|additional text              |
|I am bad at coming up with   |
----------------------------- 
```

假文本，我应该在某个地方查找 lorem ipsum。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:47:47.880

这*太可怕*了，但这是我能想到的最好的：

```
$('p').each(function(i){
    var that = $(this),
        foo = that.find('.foo');
    if (i==0){
        var tN = foo[0].nextSibling;
        $('<span />',{class : 'fooSibling', text: tN.nodeValue}).insertAfter(foo);
    }
    else if (i==1){
        var tN = foo[0].previousSibling;
        console.log(tN,tN.nodeValue);
        $('<span />',{class : 'fooSibling', text: tN.nodeValue}).insertBefore(foo);
    }
    this.removeChild(tN);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/z8phA/)。

稍微改进，稍微不那么可怕：

```
$('p').each(function(){
    var that = $(this),
        foo = that.find('.foo');
    if (that.next().find('.foo').length){
        $(foo[0].nextSibling).wrap('<span class="fooSibling"></span>')
    }
    else if (that.prev().find('.foo').length) {
        $(foo[0].previousSibling).wrap('<span class="fooSibling"></span>')
    }
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/z8phA/1/)。

# java - 在 Java 中执行某些操作并返回表明该操作成功的布尔值的良好做法是什么？

> ID：15347034
> 
> 赞同：4
> 
> 时间：2013-03-11T19:34:09.500
> 
> 标签：java, methods

我的意思是，我读到编写方法的一种好方法是遵循一条规则：一种方法应该只完成一项任务。如果我有不同的顺序操作，那么我需要将方法分成几个。它应该使代码更简洁、易于解释的方法名称。但是，如果我想实现应该做某事然后返回布尔值的方法——true 表示成功，false 表示失败。例如，假设我们有一个名为 setObjectValue() 的 setter。[再次，这只是一个例子]。

问题：使用此名称并返回布尔值会更好，还是应该是：isSuccessfullsetObjectValue()、setObjectValueAndCheckIsOk()，还是应该有两种方法或什么？因为名称“setObjectValue()”并没有告诉您该方法除了设置值之外还在做其他事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T19:37:55.157

除非有充分的理由，否则我通常会使用 Exceptions 来表明这一点。这有两个好处：

1.  您遵循 1 方法 - 1 想法的约定
2.  你强迫自己（如果检查了异常）来处理失败的情况。如果你返回一个布尔值，那么代码很容易忽略这种情况。

如果你做这样的事情：

```
try{

  setObjectValue("foo")
} catch(SomeKindOfException e){
  //handle
} 
```

然后你会得到它的进一步好处，读起来像英语：“尝试设置对象值，但如果你不能处理它......”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:50:38.423

在我看来，詹姆斯的回答非常好。但是想想更多的 setter 和由此产生的 try-catch-blocks。一种稍微不同的方法是通过验证器为这些设置器处理您的值，例如，用户进行了一些输入或类似的事情。

```
String userInput = ...;
if (myValidator.isValid(userInput)) {
   myObject.setObjectValue(userInput);
} 
```

该方法`isValid(boolean valueToCheck)`表明它将返回一个布尔值。您`setObjectValue(String newValue)`只需完成工作而不返回任何价值。

您仍然可以在您的 setter 中检查 newValue。如果这是一个无效的输入，你会抛出一个`IllegalArgumentException`（快速失败）。

```
if (newValue==null || newValue.contains("foo")) {
  throw new IllegalArgumentException("Illegal value for newValue: "+newValue);
}
this.value = newValue; 
```

因此，在您的代码中，您可以将您的设置器用于您自己的值。我的意思是，你写了这个方法并且应该知道你的输入，所以这应该没问题。如果用户进行了一些输入，请为您的设置器使用验证器。会有奇怪的输入，相信我！;-)

结果是，您不必处理这么多的 try-catch 块，也不必知道如果遇到异常（如果您不使用验证器）该去哪里寻找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:46:18.713

这实际上取决于您的代码在做什么，但是根据您的描述，它非常有意义并且可能是理想的行为（再次取决于您的代码在做什么）。

例如，如果[Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#add%28E%29)因操作而改变，则返回一个布尔值。另一个例子是[AtomicBoolean](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html#compareAndSet%28boolean,%20boolean%29)。在这些情况下，由于您可能需要知道是否修改了某些内容，因此返回布尔值是有意义的。只要有意义，方法的命名实际上并不重要。

在这些示例中，了解您的系列是否成功非常重要，这是唯一可以实际执行此操作的地方。但是，我不会有用于设置一些值的方法，该方法也会执行许多其他不相关的操作。

此外，如果您在示例中返回 false 的原因是某些验证错误的结果，那么您很可能希望在尝试设置值之前进行检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:31:33.420

可以创建一个检查某些条件并返回布尔值的方法，以及另一个可能在执行某些操作之前使用条件检查的方法。

```
boolean checkSomeCondition(); 
```

而且您的代码不会受到影响

```
if (checkSomeCondition()) {...}
else {...} 
```

但如果方法无法执行其名称中所述的操作，则应使用异常。它们实际上是为此而创建的。

```
try {
   DoSmth();
} catch (ParticularError e) {
   ...
} 
```

它通常是使用的样式，并且可能是处理函数体内发生的错误的最佳方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:05:52.203

Setters generally should be void (not return a value). There are several ways to accomplish your goal without making your setter return a boolean. One way would be to set a boolean flag as an instance variable that gets set to true whenever you set a particular value. This flag could be accessed via a getter of its own.

For example, you've got a class Person with Name and Phone Number attributes. You want to be able to set a person's phone number and later determine whether or not this phone number has been set:

```
public class Person 
{
   private String name;
   private String phone;
   private boolean hasPhone;

   public void setName(String name)
   {
      this.name = name;
   }

   public String getName()
   {
      return name;
   }

   public void setPhone(String phone)
   {
      this.phone = phone;
      hasPhone = true;
   }

   public String getPhone()
   {
      return phone;
   }

   public boolean hasPhone()
   {
      return hasPhone;
   } 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T19:39:50.713

从我的角度来看，setter 不应该返回值，除非您调用慢速存储设备（如 Web 服务），但是在这种情况下抛出异常会更干净。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T19:39:53.903

我认为返回一个布尔值而不明确说明方法签名中的值代表什么是可以的，只要您提到返回值在 JavaDoc 中的用途。这是在整个 Java Collections API 中完成的（并不是 Collections API 是黄金标准），因此在 Java 中这样做通常是一种公认​​的做法。

# r - 适用于 R 中的 xts 对象

> ID：15347040
> 
> 赞同：1
> 
> 时间：2013-03-11T19:34:44.717
> 
> 标签：r, time-series, xts, zoo

我有一个`xts`对象。我想对每一行取平均值并将其合并回我的对象​​。前任：

```
require(xts)
obj = xts(matrix(1:100, ncol=2), order.by=seq.Date(from=as.Date("2012-01-01"), by=1, length=50))
another_obj = apply(obj, 1, mean) 
```

这现在只是一个以日期为名称的向量。

```
class(another_obj)
   [1]  "numeric" 
```

我可以再次将其转换为`xts`并使用名称`order.by`，然后将所有内容合并回 obj ，但这非常乏味。

```
another_obj = as.xts(another_obj, order.by=as.Date(names(another_obj)))
obj = merge(obj, another_obj) 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:43:18.527

这将添加一列，每行的平均值

```
obj <- cbind(obj, rowMeans(obj)) 
```

**编辑**澄清为什么在`cbind`这里工作：

我在这里使用`cbind.xts`的是一个电话`merge.xts`。所以上面等价于：

```
obj <- merge(obj, rowMeans(obj)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:45:07.167

你的意思是这样的？

```
 obj <- as.xts(transform(obj, another_obj=rowMeans(obj))) 
```

# oracle10g - Oracle 10g：如何在到达页面末尾时重复矩阵报告

> ID：15347044
> 
> 赞同：1
> 
> 时间：2013-03-11T19:35:01.200
> 
> 标签：oracle10g, oraclereports

由于重复框架中的项目数量，我有一个跨越多个页面的 Oracle 报告 (10g)。有没有办法让重复帧在到达页面末尾时“换行”（基本上在原始值下方开始新的一行值）？

我尝试将打印方向属性设置为横向/向下，但它给了我一个“REP-1232: Matrix '' has an invalid source frame”。错误。

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T18:34:16.260

在重复帧高级布局部分的属性检查器中：打印对象在：第一页基础打印：封闭对象与锚定对象保持一致：是

# javascript - CSS Zoom 不影响 Javascript 添加的 SVG 元素

> ID：15347049
> 
> 赞同：2
> 
> 时间：2013-03-11T19:35:13.437
> 
> 标签：javascript, html, css, svg

我们有一个问题似乎发生在旧版本的 WebKit（例如 iOS5）上，其中使用 javascript 添加 svg + svgText 元素，如下所示：

```
var box =  document.createElementNS("http://www.w3.org/2000/svg","svg");
var text = document.createElementNS("http://www.w3.org/2000/svg","text"); 
```

然后在设置了缩放的 div 内，svgTexts 不会像其他所有元素（包括 svg 图形等）一样被缩放缩小或放大。

我已经确认，简单地从 DOM 中获取生成的 html 并直接添加会导致正确应用缩放，因此它的问题在于 javascript 添加文本元素的方式由于某种原因不受缩放影响。

有没有人遇到过类似的问题&有什么想法？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T13:16:13.553

我遇到了同样的问题。简单地更新视图框对我有用。我对不同平板电脑的测试表明，此问题已在 WebKit 版本 535 或 536 中得到修复。

我在 Raphael 中使用以下内容： pPaper.setViewBox( 0, 0, pPaper.width, pPaper.height );

由于我使用滑块来缩放和重置视图框需要花费大量时间，因此我正在检查浏览器版本并仅在必要时应用它。如果你有时间，你可能想写一个功能检查。

# ruby-on-rails - 在没有活动记录的情况下使用 will_paginate

> ID：15347051
> 
> 赞同：4
> 
> 时间：2013-03-11T19:35:26.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

主持人：

# 应用程序/演示者/games_presenter.rb

```
class GamesPresenter

  attr_reader :games, :next_page, :previous_page

  def initialize json
    @games = json['machine-games']

    paging = json['paging']
    if paging && paging['next']
      next_page_query = paging['next'].match(/\?.*/)[0]
      @next_page = "/machine_games/search#{next_page_query}"
    end

    if paging && paging['previous']
      previous_page_query = paging['previous'].match(/\?.*/)[0]
      @previous_page = "/machine_games/search#{previous_page_query}"
    end
  end

end 
```

控制器动作：

```
def show
  # ...
  @presenter = GamesPresenter.new(json)
end 
```

意见：

```
<% @presenter.games.each do |game| %>
  ...
<% end %>

<%= link_to "Previous", @presenter.previous_page %>
<%= link_to "Next", @presenter.next_page %> 
```

为了告诉 Rails 加载 apps/presenters/ 目录以及 models/、controllers/、views/ 等，请将其添加到 config/application.rb：

```
config.after_initialize do |app|
  app.config.paths.add 'app/presenters', :eager_load => true
end 
```

我只是想知道如何在上述情况下使用 will_paginate ？。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:19:23.230

假设`@presenter.games`是一个数组，试试这个：

```
# Gemfile

gem 'will_paginate'

# /config/initializers/will_paginate_array.rb

require 'will_paginate/collection'

Array.class_eval do
  def paginate(page = 1, per_page = 15)
    page = 1 if page.blank? # To fix weird params[:page] = nil problem
    WillPaginate::Collection.create(page, per_page, size) do |pager|
      pager.replace self[pager.offset, pager.per_page].to_a
    end
  end
end

# /app/controllers/games_controller.rb

def show
  @presenter = GamesPresenter.new(json)
  @games = @presenter.games.paginate(params[:page], 5)
end

# /app/views/games/index.html.erb

<% @games.each do |game| %>
  ...
<% end %>

<%= will_paginate @games %> 
```

这基本上将`.paginate`方法添加到所有数组。更多关于此的文档可以在[https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/collection.rb找到](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/collection.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:11:19.833

我有同样的问题，我找到了一些最简单的解决方案。

创建文件 config/initializers 并且只需要 'will_paginate/array' 作为：

`require 'will_paginate/array'`

您也可以在任何其他适当的文件上要求它。它适用于任何阵列。

希望它会有所帮助。

谢谢[**--TechBrains**](http://tech-brains.blogspot.in/)

# javascript - 为什么这段代码在 Chrome 上不起作用？

> ID：15347060
> 
> 赞同：0
> 
> 时间：2013-03-11T19:36:14.663
> 
> 标签：javascript, jquery

我刚刚安装了mobiscroll。我使用日期滚动条。我使用下面的代码来管理文本框。

```
<script type="text/javascript">
    $(function() {
        // create a datepicker with default settings
        $("#beginDate")
            .mobiscroll()
            .date({
                invalid: {
                    daysOfWeek: [0, 6],
                    daysOfMonth: ['5/1', '12/24', '12/25'],
                    theme: 'android-ics light',
                    display: 'bottom',
                    mode: 'scroller'
                }
            });
    });
</script> 
```

它在 Firefox 上运行良好，但在 Chrome 上无法运行。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:38:19.450

这里有一个额外的逗号，我是一个语法错误。

```
 , mode: 'scroller', } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:39:47.513

去掉逗号

```
mode: 'scroller', });
    }); 
```

# objective-c - 如何识别可变对象？

> ID：15347061
> 
> 赞同：7
> 
> 时间：2013-03-11T19:36:18.997
> 
> 标签：objective-c, cocoa, immutability, introspection

在我的应用程序中，有时我需要识别可变对象以适当地处理它们。事实证明这比看起来更困难。

如果我`isKindOfClass:[NSMutableString class]`在 a 上使用`NSString`，所有字符串似乎都是可变的。

如果我问他们是否回应`@selector(appendString:)`，他们都会回应。

如果我真的试图在一个......块中改变它们`@try`，`@catch`那么`@finally`真相就会被揭露。然而，它非常不优雅而且非常缓慢。

最好的行动方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:13:36.993

如果您想忽略可变性，您可以遍历循环并使用每个字符串制作可变副本`-mutableCopy`（无论如何，它都会创建 NSMutableStrings）。反之亦然：通过发送`-copy`到每个对象，您可以保证获得一个不可变的 NSString。不幸的是，由于 NSString 是一个类集群，可变性不是一个完全可测试的概念。使用该行检查类`@"__NSCFString"`是非常不安全的，因为 Apple 有权随时更改底层类。

# php - 使用 wamp 在 localhost 上查看图像时出现问题

> ID：15347062
> 
> 赞同：0
> 
> 时间：2013-03-11T19:36:19.390
> 
> 标签：php, .htaccess, drupal, wamp

所以我下载了一个我需要处理的网站，但图像无法正常工作。这个问题似乎很容易解决，我只是不知道解决方案或搜索什么来找到它。

我的图像标签是这样出来的：

```
<img src="/sites/all/themes/dttulsa/gfx/SN_Header_std.png" /> 
```

问题是来自 src 的额外 / in。如果我使用开发工具对其进行编辑以：

```
<img src="sites/all/themes/dttulsa/gfx/SN_Header_std.png" /> 
```

有用！有没有我可以用来解决这个问题的 htaccess 规则？一些wamp选项？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:00:03.680

您的第二个 url 相对于您从中访问它的位置页面，我猜您在 apache 中的网站路径设置不正确，因此导致您的第一个 url 找不到文件（例如它可能正在查找当您的实际站点位于 C:/wamp/www/mysite 时，C:/wamp/www)。我会查看 apache 配置，看看你是否能在那里找到任何东西。

# php - 使用 jquery 抓取数据并填充 html 表单

> ID：15347069
> 
> 赞同：0
> 
> 时间：2013-03-11T19:36:39.757
> 
> 标签：php, jquery, html, sql, drop-down-menu

嗨，我需要帮助根据下拉更改获取数据。基本上从下拉列表中选择项目 ID，然后使用数据库中的值填充文本框和其他下拉列表。（其他下拉列表已经填充并且具有赋值运算符“<”、“>”、“=”。我只想在下拉列表中选择与数据库匹配的确切值。棘手的部分是一些文本框默认隐藏在页面上(使用 jquery) 并且仅在选择适当的下拉值时显示。我如何做到这一点。

```
 <select name='Item' id='Item' >
            <option value='123'>123</option>
            <option value='124' >124</option>
            <option value='125' >125</option>
         </select>

<select name='oper' id='oper' >
        <option value='='>Equal</option>
        <option value='between' >Between</option>
        <option value='in' >In</option>
    </select>

<input id="CLEQ" name = "Clientequal" type="text" size="20" maxlength = "08" data-  bvalidator="digit,minlength[08],required">      
<input id="CLBE" name = "ClientBetween" type="text" size="20" maxlength = "08" data-bvalidator="digit,minlength[08],required">
<input id="CLIN"  name = "ClientIn" type="text" size="100" maxlength = "100" data-bvalidator="Client,required"> 
```

我的 jquery 函数显示隐藏文本框。

```
$(document).ready(function() {  
        $("#CLEQ").show();
        $("#CLIN").hide();
        $("#CLBE").hide();   
$('#oper').change(function() {
    var selectedValue = $(this).val();

    if(selectedValue  === '=') {
        $("#CLEQ").show();
        $("#CLIN").hide();
        $("#CLBE").hide();
    } else if (selectedValue === 'between') {
       $("#CLEQ").show();
        $("#CLIN").hide();
        $("#CLBE").show();
    } else {
       $("#CLEQ").hide();
        $("#CLIN").show();
        $("#CLBE").hide();
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:21:16.403

好的，所以找到了这个使用 json_encode 来抓取数组并解析它以重新填充 html 表单的答案。谢谢大家的帮助

# javascript - 历史操作会干扰 iframe

> ID：15347071
> 
> 赞同：1
> 
> 时间：2013-03-11T19:36:47.610
> 
> 标签：javascript

我有这个网站，它通过动态加载内容。javascript。其中一个页面上有一个 iframe，出于某种原因，应该操纵窗口历史的脚本改为操纵 iframe。

```
$('.section-back').on('click', function(e) {
    e.stopPropagation();

    if(self.history.length == 0) {
        getPage($(this).attr('data-parent'));   
    }
    else self.history.back(); 
}); 
```

有人告诉我使用`self`，所以我尝试了，但仍然没有希望。

有谁知道为什么会发生这种情况并可能有解决方案？非常感谢，这个问题困扰我很久了。

# android - 如何从 TabsAdapter、ViewPager 和 SherlockFragmentActivity 中删除 Fragment

> ID：15347076
> 
> 赞同：0
> 
> 时间：2013-03-11T19:36:55.647
> 
> 标签：android, actionbarsherlock, android-viewpager

我正在使用 ActionBarSherlock，有一些与 SherlockFragments 连接的选项卡，用户可以更改这些选项卡（仅选择其中一些以显示在设置中）。

如何删除所有片段并仅添加选定的片段？

```
public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:43:23.387

我认为这只是在用户更改所选选项卡时正确实施`getCount()`和调用的问题。`notifyDataSetchanged()`

# ios - 设置 UIAlertView 委托

> ID：15347078
> 
> 赞同：0
> 
> 时间：2013-03-11T19:37:02.257
> 
> 标签：ios, xcode

我正在尝试使用以下代码从 viewcontroller A 将委托发送给 viewcontroller B 中的 UIAlertView：

在 ViewcontrollerA.m 中

```
-(IBAction)callCancelAlert:(id)sender{

ViewcontrollerB *controller = [[PhotoViewController alloc] init];

UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: PhotoViewController
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show];
//[alert release];
} 
```

和#import ViewcontorllerB.h

...但我收到错误“意外的接口名称 ViewcontorllerB：预期的表达式”。这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:40:47.717

您的委托必须是 ViewControllerB 的实例，而不是类。

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: PhotoViewController
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil]; 
```

到

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: controller
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:40:57.700

您可能不是说`delegate: PhotoViewController`，这意味着“将委托设置为 PhotoViewController 类”。

相反，您可能想要这个：

```
UIAlertView *alert = [[UIAlertView alloc]
                  initWithTitle: @"Announcement"
                  message: @"It turns out that you are playing Addicus!"
                  delegate:controller
                  cancelButtonTitle:@"OK"
                  otherButtonTitles:nil]; 
```

# c++ - 如何找到我们的 pthread 的创建顺序？

> ID：15347080
> 
> 赞同：2
> 
> 时间：2013-03-11T19:37:07.853
> 
> 标签：c++, pthreads

我正在使用 C++ 和 pthread，我需要找出创建 pthread 的顺序，我需要一个唯一的整数来告诉我首先创建哪个 pthread，第二个等等。

我的第一个想法是使用`pthread_self()`，尽管这个函数返回一个唯一的 id，它几乎是一个巨大的随机数。

我的第二个想法是传递我在循环中的 create 方法中使用的计数器：

```
pthread_t pthreads[pthreadsNum]; 
    for(int i = 0; i < pthreadsNum; i++){
        if (pthread_create(&pthreads[i], NULL, process, (void *)&i) != 0){
            cerr << "Error in pthread creation" << endl;
            return PTHREAD_CREATION_FAILED;
        }
    } 
```

但是，这也不起作用。在我的函数中，`process`我尝试打印`i`计数器的值，但我感到困惑。显然，计数器在一些 pthread 接收它和混乱规则时得到更新：

```
void *process(void* arg_ptr)
{
  int i = *((int*)arg_ptr);
  cout << i << endl;
  //rest of code
} 
```

给我随机输出：3 3 4 3 以及这个相同随机输出的其他组合。

总之，我有以下问题：

1 - 我做错了什么？

2 - 如何安全有效地通过柜台？

3 - 是否有另一种解决方案来获取创建 pthread 的顺序？

在此先感谢您的帮助：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:48:09.737

> 计数器在一些 pthread 正在接收它和混乱规则时得到更新

是的，这就是在没有同步的情况下使用并行性最终得到的结果：事情永远不会按照您期望的顺序发生。

在您的情况下，将计数器传递给线程的一种简单方法是将其转换为指针。为确保您使用的整数类型与指针大小相同，请使用`uintptr_t`（标准保证指针和 (u)intptr_t 之间的转换没有任何损失）：

```
#include <stdint.h>

for (uintptr_t i = 0; i < pthreadsNum; ++i) {
    if (pthread_create(&pthreads[i], NULL, process, reinterpret_cast<void*>(i)) != 0) {
        ... 
```

和

```
void* process(void* arg_ptr) {
    uintptr_t i = reinterpret_cast<uintptr_t>(arg_ptr);
    ... 
```

但是 cHao 的评论非常中肯：如果您需要对线程的执行顺序进行如此多的控制，那么您就有问题了。更好地使用同步（互斥锁、条件变量等）来保护用于线程间通信的关键数据结构（例如消息队列、其他复杂对象甚至简单的标量），您将不需要这种精细控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:50:37.280

您传入了 的地址`i`，当您的线程读取 的值时`i`，它很可能已被更改。因为您创建的线程和运行循环并更新值的主线程`i`并行运行。

如果我这样做，我会这样做：

```
pthread_t pthreads[pthreadsNum];
int ids[pthreadsNum];
for(int i = 0; i < pthreadsNum; i++){
    ids[i] = i;
    if (pthread_create(&pthreads[i], NULL, process, (void *)&ids[i]) != 0){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:13:46.210

首先，有两个问题：为什么需要这些信息？你想解决什么问题？

话虽如此，为什么不简单地包装`pthread_create`一个函数，该函数维护一些数据结构（例如 std::vector<> 或链表）。包装器调用pthread_create，并将每个创建的线程的线程id添加到数据结构中？请记住添加一些锁定/序列化。以及删除已退出线程的代码（如果需要）。

最后，当您需要创建的“顺序”时，只需在您的数据结构中找到线程 id 的“索引”即可。

# php - 从 MySQL 更新 PHP 变量

> ID：15347081
> 
> 赞同：0
> 
> 时间：2013-03-11T19:37:12.290
> 
> 标签：php, mysql, database

我在我的 MySQL 数据库中检索商品的价格，如下所示：

```
$result = mysqli_query("SELECT 'price' FROM 'items'");
$price = $result; 
```

我在页面上回显这个`$price`变量。但是，由于您可以对商品出价，因此您需要知道第二次出价的价格是多少。因此，我需要能够更新商品的价格（任何新出价都存储在同一个数据库中，覆盖旧条目）。

如何在*不*更新整个页面的情况下定期更新`$price`数据库中的变量？

 *编辑：澄清一下：我不是在寻找更新我的 MySQL 数据库的函数，而是在寻找一个允许我在不更新文档的情况下绘制新的 MySQL 查询的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:40:13.490

您可以使用 jQuery 更新字段。在您的#price div 中，使用jQuery ajax 每秒获取并更新该div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:42:00.083

这可能有助于使用 jQuery 和 PHP 构建 Ajax 驱动的网页 [http://www.ibm.com/developerworks/opensource/library/os-php-jquery-ajax/index.html](http://www.ibm.com/developerworks/opensource/library/os-php-jquery-ajax/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:47:01.100

假设您有以下html ...

```
<div id="price"></div>
New Bid Amount <input type="text" id="bid" /> 
<button id="updatePrice">Update</button> 
```

您可能想要发布新的出价金额以保存它，以便将以下内容发布到名为 update-bid.php 的文件中

```
<script>
    $("#updatePrice").click(function() {
        bid = $('#bid').val();
        $.post("update-bid.php", { bid: bid }, function(req) {
            if ($.trim(req) == 'success') $('#price').html(bid);
        });
    });
</script> 
```*

# scala - 喷涂路由 404 响应

> ID：15347088
> 
> 赞同：16
> 
> 时间：2013-03-11T19:37:43.500
> 
> 标签：scala, akka, spray

我有一项服务在未来返回 Option[ProductDoc] （作为 akka 询问）

如何在喷涂路由中响应，以便有效产品响应产品但未知但格式良好的产品返回 404？

我希望代码在这里填补空白：

```
get {
    path("products" / PathElement) { productID:String =>
      val productFuture = (productService ? ProductService.Get(productID)).mapTo[Option[ProductDoc]]

      // THE CODE THAT GOES HERE SO THAT
      // IF PRODUCT.ISDEFINED RETURN PRODUCT ELSE REJECT

    }
} 
```

我可以开始工作的唯一方法就是使用这种可憎的东西：

```
get {
    path(PathElement) { productID:String =>
      val productFuture = (productService ? ProductService.Get(productID)).mapTo[Option[ProductDoc]]
      provide(productFuture).unwrapFuture.hflatMap {
        case x => provide(x)
      } { hResponse:shapeless.::[Option[ProductDoc], HNil] =>
        hResponse.head match {
          case Some(product) => complete(product)
          case None => reject
        }
      }
    }
  } 
```

这肯定不是实现这一目标的正确方法吗？这似乎是一个非常简单的模式，一定已经有人解决了！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T09:23:09.107

Spray 已经支持您的用例：默认情况下将选项值`None`编组为`EmptyEntity`。这可能是您在进行任何更改之前所看到的：带有空文档的 200。有一个指令可以将空文档转换为 404, `rejectEmptyResponse`，您可以将其包裹在您想要此行为的部分路径中。

您的路线将如下所示：

```
 rejectEmptyResponse {
    path("products" / PathElement) { productID:String =>
      val productFuture = // same as before
      complete(productFuture)
    }
  } 
```

当然，你可以`rejectEmptyResponse`根据你是否想用它包裹更多的路线部分来把路径放在里面。

更多信息：

*   [https://github.com/spray/spray/blob/master/spray-routing/src/main/scala/spray/routing/directives/MiscDirectives.scala#L117](https://github.com/spray/spray/blob/master/spray-routing/src/main/scala/spray/routing/directives/MiscDirectives.scala#L117)
*   [http://spray.io/documentation/spray-routing/key-concepts/rejections/#empty-rejections](http://spray.io/documentation/spray-routing/key-concepts/rejections/#empty-rejections)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:07:13.117

几天前我遇到了同样的问题并提出了这个解决方案：

我将此方法添加到我的演员

```
def failIfEmpty[T](item: Future[Option[T]], id: String) = {
    (item map {
      case Some(t) => t
      case None => throw NotFoundException(Message(s"id '$id' could not be        found",`ERROR`))
    }) pipeTo sender
} 
```

当然你可以选择一个你喜欢的异常，NotFoundException是我自己的一个......

在你的结果上调用这个来回答你的演员的问题（这是一个使用 ReactiveMongo 的例子，`collection.find(query).headOption`用你的替换`Future[Option]`）：

```
failIfEmpty(collection.find(query).headOption, id) 
```

然后将 ExceptionHandler 添加到您的服务（定义路由的位置），如下所示：

```
implicit val klaraExceptionHandler = ExceptionHandler.fromPF {
    case InternalServerErrorException(messages) => complete(InternalServerError, messages)
    case NotFoundException(message) => complete(NotFound, message)
    case ValidationException(messages) => complete(PreconditionFailed, messages)
    [and so on]
} 
```

这样，您可以处理我在未来结果中出现的几个不同的错误。

# function - 如何在 Haskell 中定义中缀函数？

> ID：15347092
> 
> 赞同：3
> 
> 时间：2013-03-11T19:37:53.513
> 
> 标签：function, haskell, infix-notation

我想将一个函数定义为中缀，这样用户就不必手动用反引号包围该函数来调用它。具体来说，我正在编写一个类似 DSL 的函数，该函数接受 Rank 和 Suit 并构造扑克牌记录：

```
-- pseudocode
data PokerCard = PokerCard { rank :: Rank, suit :: Suit } deriving (Eq)

of :: Rank -> Suit -> PokerCard
r of s = PokerCard { rank = r, suit = s }

pokerDeck = [
  Ace of Spades,
  Two of Spades,
  ...
  ] 
```

我相信`of`它被保留为`case ... of`表达式的语法，所以我必须将它重命名为`of'`, `.of`,`+of`等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T19:41:10.063

无法使用字母数字名称作为中缀来定义函数。Haskell 的语法规则只允许使用符号名称或用反引号包围的函数名称作为中缀使用 - 没有办法改变它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T21:27:37.113

这是一个带有一些额外输入但没有反引号的 hacky 解决方案！我首先在reddit上发布了这个，如果可以的话。

我假设你已经导出`Enum`了 for `Rank`。

```
data OF = OF
ace :: OF -> Suit -> PokerCard
ace _ s = PokerCard Ace s

-- or point-free
two :: OF -> Suit -> PokerCard
two _ = PokerCard Two

-- or with const
three :: OF -> Suit -> PokerCard
three = const (PokerCard Three)

-- you get the idea!
-- the rest in one line:
four,five,six,seven,eight,nine,ten,jack,king :: OF -> Suit -> PokerCard
[four,five,six,seven,eight,nine,ten,jack,king] = map (const . PokerCard) [Four .. King]

 -- now you can write
 pokerDeck = [
   ace OF Spades, two OF Spades -- and so on
   ] 
```

OF 数据类型不是绝对必要的，但可以防止混淆（但非常金属）的东西，例如`ace "Motorhead" Spades`. 你仍然可以写`ace undefined Spades`，我认为真的没有办法。

如果`of`不是关键字，你甚至可以写`of = OF`.

* * *

还有一个非常邪恶的黑客可以完全摆脱'of'，并使用数字作为卡片：

```
{-# LANGUAGE FlexibleInstances #-} -- this goes on top of your file

instance Num (Rank -> Suit) where
  fromInteger n = (undefined : map Card[Ace .. King]) !! (fromInteger n) 
```

现在`2 Spades :: Card`类型检查（但您需要显式类型！）并且是您认为的那样:-) 但是，我强烈建议您不要在严肃的代码中这样做；但它看起来很酷。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-11T20:03:22.270

好吧，您可能已经知道这一点，但是（当然）运算符 / 可以 / 是中缀。所以你可以，而`r of s`不是`r >| s`。

# java - Hadoop mapper/reducer 重用

> ID：15347095
> 
> 赞同：0
> 
> 时间：2013-03-11T19:38:00.887
> 
> 标签：java, hadoop, mapreduce

mapper/reducer 实例如何在永久保持活动状态的 jvm 中重用？

例如，假设我想做这样的事情：

```
public class MyMapper extends MapReduceBase implements Mapper<K1, V1, K2, V2> {

    private Set<String> set = new HashSet<String>();

    public void map(K1 k1, V1 v1, OutputCollector<K2, V2> output, Reporter reporter) {
        ... do stuff ...

        set.add(k1.toString()); //add something to a list so that it can be used later

        ... do other stuff ...

        if(set.contains("someString"))
            emitSomeKindOfOutput(output);
        else
            emitSomeOtherKindOfOutput(output);
    }

} 
```

如果同一个映射器可用于多个任务/作业，则成员集可能会导致问题，因为它仍会包含来自先前任务/作业的其他垃圾。这种重用在hadoop中是可能的吗？减速机呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:01:02.077

你绝对安全。Mapper 和 reducer 实例不被重用。如果您需要执行一些初始化或清理，您可以覆盖这两个方法`configure`并由`close`MapReduceBase 提供。您的代码示例不需要这样做。

如果`set`是一个静态变量，那么您必须`clear`在`close()`方法中使用它以确保安全，即使大多数站点配置都不需要（基本上默认情况下，每个地图都会派生一个新的 JVM，您必须进行配置`reuse.jvm.num.tasks`以启用 JVM 重用）。两个 map 任务永远不会在同一个 JVM 中同时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:16:59.930

据我所知，Hadoop 基于无共享架构，因此您的“私有集集”变量不会在不同的映射器之间共享。因此，正如您所提到的，不应该有任何问题 - '来自以前的映射器的垃圾'。

# php - 调色板 PHP 函数 ( png & gif 支持 )

> ID：15347101
> 
> 赞同：1
> 
> 时间：2013-03-11T19:38:19.473
> 
> 标签：php, function, color-scheme

我发现了一个很棒的功能，可以在图像中显示调色板。我唯一的问题是我还需要能够支持 png 和 gif 文件。不确定这是否容易修复。感谢任何帮助或指导。

```
function colorPalette($imageFile, $numColors= 5, $granularity = 5) { 
   $granularity = max(1, abs((int)$granularity)); 
   $colors = array(); 
   $size = @getimagesize($imageFile); 
   if($size === false) { 
      user_error("Unable to get image size data"); 
      return false; 
   } 
   $imgData = file_get_contents($imageFile);
   $img = @imagecreatefromstring($imgData);
   unset($imgData); 
   if(!$img) { 
      user_error("Unable to open image file"); 
      return false; 
   } 
   for($x = 0; $x < $size[0]; $x += $granularity) { 
      for($y = 0; $y < $size[1]; $y += $granularity) { 
         $thisColor = imagecolorat($img, $x, $y); 
         $rgb = imagecolorsforindex($img, $thisColor); 
         $red = round(round(($rgb['red'] / 0x33)) * 0x33);  
         $green = round(round(($rgb['green'] / 0x33)) * 0x33);  
         $blue = round(round(($rgb['blue'] / 0x33)) * 0x33);  
         $thisRGB = sprintf('%02X%02X%02X', $red, $green, $blue); 
         if(array_key_exists($thisRGB, $colors)) { 
            $colors[$thisRGB]++; 
         } else { 
            $colors[$thisRGB] = 1; 
         } 
      } 
   } 
   arsort($colors); 
   return array_slice(array_keys($colors), 0, $numColors); 
} 
```

**编辑**

我更改了上面的代码以反映我想要完成的事情。

这就是函数的使用方式

```
$palette = colorPalette('image_path_here', 5); 
echo "<table>\n"; 
foreach($palette as $color) { 
   echo "<tr><td style='background-color:#$color;width:2em;'>&nbsp;</td><td>#$color</td></tr>\n"; 
} 
echo "</table>\n"; 
```

该功能的功劳在这里：[http ://board.phpbuilder.com/showthread.php?10355107-How-to-get-color-palette-from-images-using-PHP](http://board.phpbuilder.com/showthread.php?10355107-How-to-get-color-palette-from-images-using-PHP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:42:05.953

imagecreatefromjpeg 具有其他格式的等价物，imagecreatefrompng 和 imagecreatefromgif。您可以查看文件扩展名并使用适当的扩展名。

# objective-c - 在.mm文件objective-c / xcode中使用没有标题的C文件

> ID：15347106
> 
> 赞同：0
> 
> 时间：2013-03-11T19:39:03.007
> 
> 标签：objective-c, xcode

我有一个 .c 文件（无标题），其中包含一些功能。我有另一个 .mm 文件，应该调用该 .c 文件中的函数。这适用于我从中获取文件的 xcode 项目。但是，当我将此文件添加到我自己的项目并执行此操作时。我收到以下错误：

```
Undefined symbols for architecture armv7:
  "Init(Context*)", referenced from:
      -[EAGLView initWithFrame:] in EAGLView.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的 .mm 文件中有这一行：

```
int Init(Context *context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:41:30.570

也许`.c`文件没有标题是有原因的——里面的函数是私有的，它们有可能被定义为`static`. 如果是这种情况，请删除`static`关键字并重新编译。

# .htaccess - 删除文件夹和随机 3 个字符 htaccess

> ID：15347110
> 
> 赞同：0
> 
> 时间：2013-03-11T19:39:30.493
> 
> 标签：.htaccess

我有一个类似于的 url 结构

```
http://www.domain.com/sessionID/ABC/product-name 
```

我使用 RewriteCond %{REQUEST_URI} ^/sessionID/ 来捕获 sessionID 但后续文件夹是随机的 3 个字符代码。我想删除所有这些，所以我的重写是

```
http://www.domain.com/product-name 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:13:44.667

谢谢，但这没有用，在经过一些跟踪和错误之后，以下方法成功了，但我不完全确定它是否正确使用，但它有效。

```
RewriteCond %{REQUEST_URI} ^/sessionID/.../\&?(.*)$
RewriteRule ^(.*) http://domain.com/%1%2 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:07:41.303

您可以单独使用 RewriteRule 提取产品名称

```
RewriteRule ^.+?/.../(.+)$ /$1 
```

如果`sessionID`是字面意思在您的 URL 中，您也可以使用

```
RewriteRule ^sessionID/.../(.+)$ /$1 
```

# heroku - X-Heroku-Dynos-In-Use 标头是什么意思？

> ID：15347111
> 
> 赞同：1
> 
> 时间：2013-03-11T19:39:31.960
> 
> 标签：heroku

Heroku 为应用程序提供了 X-Heroku-Dynos-In-Use 标头，但没有提供关于这意味着什么的文档（[https://devcenter.heroku.com/articles/http-routing](https://devcenter.heroku.com/articles/http-routing)）：

```
X-Heroku-Dynos-In-Use: the number of dynos currently serving requests 
```

我们有一个带有 50 多个 dyno 的 node.js 应用程序，它仍然会出现 H12 超时。X-Heroku-Dynos-In-Use 通常是 1，并且从不超过 2 或 3。所以很明显，这不是整个应用程序中使用的 dynos 的数量。这个数字实际上意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:48:26.703

我已经稍微澄清了有关该标题的[文档](https://devcenter.heroku.com/articles/http-routing#heroku-headers)`X-Heroku-Dynos-In-Use`：“ ：当前为该路由器提供请求的测功机数量。因为其他请求可能由其他路由器路由，所以此数字不能很好地指示当前处理的测功机总数应用程序的请求。”

# excel - 高级过滤器的宏无法自动工作

> ID：15347112
> 
> 赞同：1
> 
> 时间：2013-03-11T19:39:32.507
> 
> 标签：excel, vba

我目前有一个宏来自动过滤我的数据。当单元格更改时，我无法让它自动运行。我希望宏在单元格中的值发生变化时运行。将不胜感激任何帮助。我想知道问题是否出在我将代码放入哪个工作表中。

我的代码如下。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim KeyCells As Range

    ' The variable KeyCells contains the cells that will
    ' cause an alert when they are changed. In this case, 
    ' Cell B2 will be changed when a value is selected on
    ' another worksheet.
    Set KeyCells = Range("B1:B2")

    If Not Application.Intersect(KeyCells, Range(Target.Address)) _
       Is Nothing Then

    ' Perform advanced filter on data
    ' Place your code here.
     Range("B4:H976").AdvancedFilter Action:=xlFilterInPlace, CriteriaRange:= _
        Range("SalesByLocation!Criteria"), Unique:=False

End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:57:02.227

对我来说很好。

尝试打开即时窗口 (Ctrl+G) 并键入以下内容，然后按 Enter：

```
 Application.EnableEvents = True 
```

现在看看代码是否有效？
这将确保应用程序正在侦听要触发的事件。

作为测试，我一直在使用以下内容，并且消息框看起来很好：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim KeyCells As Range
    Set KeyCells = Range("B1:B2")

    If Not Application.Intersect(KeyCells, Range(Target.Address)) Is Nothing Then

            ' Perform advanced filter on data
            ' Place your code here.
            MsgBox "Hello Event"

    End If

End Sub 
```

B1:B2 中的值如何变化？- 通过单元格中的公式？还是用户进入单元格，更改值，然后按 Enter 键？...第二个选项是已经实施的。

* * *

**编辑**

我认为您需要探索该`worksheet_calculate`事件

[参考其他 SO 文章](https://stackoverflow.com/questions/11754047/worksheet-calculate-on-multiple-ranges)

* * *

**进一步编辑**

您可能会更好地为组合框的更改事件创建一个事件过程，该事件在`B1:B2`. 这个封闭的问题实际上是一个很好的起点，因为它与其他问题有很多链接：

[参考其他关于组合框事件的文章](https://stackoverflow.com/questions/13842253/excel-2010-vba-is-it-possible-to-create-a-change-event-on-all-the-comboboxes-on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:44:37.217

欢迎来到 SO！

您需要将代码放在要应用更改的工作表模块中。即不要将它放在任何模块中，而是双击项目的SheetX（X 是工作表的编号）。

查看您的代码，您可能还应该插入

```
Application.EnableEvents = False

```

在`IF`子句之后然后

```
Application.EnableEvents = True

```

之前`End If`。否则事件代码可能会再次触发事件，导致实际的堆栈溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:25:55.157

我解决了这个问题！我最终将代码分成不同的形式，然后调用高级过滤器宏。我想我前面的代码有点问题。把它改成这样。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Intersect(Target, Range("C4")) Is Nothing Then
        Exit Sub
    Else
        Call Sheet4.AFilter
    End If
End Sub 
```

# bezier - 将具有 N 点的贝塞尔曲线转换为许多三次贝塞尔曲线

> ID：15347115
> 
> 赞同：1
> 
> 时间：2013-03-11T19:39:34.487
> 
> 标签：bezier, cubic

我有大约 48 个 ctrl 点的贝塞尔曲线，我想将其转换为许多三次贝塞尔曲线......任何算法、数学理论或只是一个链接都可能有帮助:) ??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:36:17.100

数学理论：你不能这样做。n 阶贝塞尔曲线不能表示为任意数量的 (n-1) 阶贝塞尔曲线，因为曲率不能如实表示。您可以对其进行近似，但不会得到相同的结果。

练习：您可以将您的 48 阶曲线切割成简单曲线的部分，其中所有控制点都在开始/结束基线的同一侧，并且您的控制变量曲线上的中点大致位于曲线的中心曲线的凸包。对于此类曲线，低水平曲线是合理的近似值。您可以通过使用 48 阶曲线的一阶、二阶等导数根来查找曲线上的拐点（参见[http://pomax.github.com/bezierinfo/#derivatives](http://pomax.github.com/bezierinfo/#derivatives)和[http://pomax.github .com/bezierinfo/#splitting](http://pomax.github.com/bezierinfo/#splitting)) 然后运行 ​​de Casteljau 的算法来分割每个拐点的控制变量值之间的曲线。然后，您可以使用三次曲线近似每个生成的子曲线，结果看起来与原始曲线非常接近（或在像素级别看起来相同）。

那就是说：为什么你甚至有48阶曲线，这太疯狂了=P

# c++ - 如何从 std::vector 构造 std::string ?

> ID：15347123
> 
> 赞同：56
> 
> 时间：2013-03-11T19:39:48.433
> 
> 标签：c++, stl, string-concatenation, stringstream, stdstring

我想`std::string`从`std::vector<std::string>`.

我可以使用`std::stringsteam`，但想象有一种更短的方法：

```
std::string string_from_vector(const std::vector<std::string> &pieces) {
  std::stringstream ss;

  for(std::vector<std::string>::const_iterator itr = pieces.begin();
      itr != pieces.end();
      ++itr) {
    ss << *itr;
  }

  return ss.str();
} 
```

我还能怎么做？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-09-09T17:30:04.863

# C++03

```
std::string s;
for (std::vector<std::string>::const_iterator i = v.begin(); i != v.end(); ++i)
    s += *i;
return s; 
```

# C++11 *（MSVC 2010 子集）*

```
std::string s;
std::for_each(v.begin(), v.end(), [&](const std::string &piece){ s += piece; });
return s; 
```

# C++11

```
std::string s;
for (const auto &piece : v) s += piece;
return s; 
```

**不要`std::accumulate`用于字符串连接**，它是经典[的 Schlemiel the Painter 算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)，甚至比 C 中使用的通常示例更糟糕`strcat`。如果没有 C++11 移动语义，它会为向量的每个元素产生两个不必要的累加器副本。即使使用移动语义，它仍然会为每个元素产生一个不必要的累加器副本。

上面的三个例子是**O(n)**。

`std::accumulate`对于字符串是**O(n²)**。

> 您可以`std::accumulate`通过提供自定义函子为字符串制作 O(n)：
> 
> ```
> std::string s = std::accumulate(v.begin(), v.end(), std::string{},
>     [](std::string &s, const std::string &piece) -> decltype(auto) { return s += piece; }); 
> ```
> 
> 请注意，`s`必须是对非常量的引用，lambda 返回类型必须是引用（因此`decltype(auto)`），并且主体必须使用 `+=`not `+`。

# C++20

在预计将成为 C++20 的当前草案中，`std::accumulate`已[更改](http://wg21.link/p0616r0)为`std::move`在附加到累加器时使用的定义，因此从 C++20 开始，字符串`accumulate`将是**O(n)**，并且可以使用作为单线：

```
std::string s = std::accumulate(v.begin(), v.end(), std::string{}); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-11T19:43:11.620

您可以使用标头中的[`std::accumulate()`](http://en.cppreference.com/w/cpp/algorithm/accumulate)标准函数（它之所以有效，是因为为 s 定义了`<numeric>`一个重载，它返回其两个参数的串联）：`operator +``string`

```
#include <vector>
#include <string>
#include <numeric>
#include <iostream>

int main()
{
    std::vector<std::string> v{"Hello, ", " Cruel ", "World!"};
    std::string s;
    s = accumulate(begin(v), end(v), s);
    std::cout << s; // Will print "Hello, Cruel World!"
} 
```

或者，您可以使用更高效、更小的`for`循环：

```
#include <vector>
#include <string>
#include <iostream>

int main()
{
    std::vector<std::string> v{"Hello, ", "Cruel ", "World!"};
    std::string result;
    for (auto const& s : v) { result += s; }
    std::cout << result; // Will print "Hello, Cruel World!"
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-17T17:44:29.007

我个人的选择是基于范围的 for 循环，如[Oktalist 的回答](https://stackoverflow.com/a/18703743/341970)。

Boost 还提供了一个不错的解决方案：

```
#include <boost/algorithm/string/join.hpp>
#include <iostream>
#include <vector>

int main() {

    std::vector<std::string> v{"first", "second"};

    std::string joined = boost::algorithm::join(v, ", ");

    std::cout << joined << std::endl;
} 
```

这打印：

> 第一秒

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-11T19:43:59.350

为什么不直接使用运算符 + 将它们相加呢？

```
std::string string_from_vector(const std::vector<std::string> &pieces) {
   return std::accumulate(pieces.begin(), pieces.end(), std::string(""));
} 
```

std::accumulate 默认在后台使用 std::plus，在 C++ 中添加两个字符串是连接，因为运算符 + 为 std::string 重载。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-13T03:04:37.390

Google Abseil 具有功能 absl::StrJoin 可以满足您的需求。

[他们的头](https://github.com/abseil/abseil-cpp/blob/04edad3801ec0b1091df9157b879d8f6a50c5036/absl/strings/str_join.h#L40)文件中的示例。请注意，分隔符也可以是`""`

```
//   std::vector<std::string> v = {"foo", "bar", "baz"};
//   std::string s = absl::StrJoin(v, "-");
//   EXPECT_EQ("foo-bar-baz", s); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-23T11:18:05.340

聚会有点晚了，但我喜欢我们可以使用初始化列表的事实：

```
std::string join(std::initializer_list<std::string> i)
{
  std::vector<std::string> v(i);
  std::string res;
  for (const auto &s: v) res += s;
  return res;   
} 
```

然后你可以简单地调用（Python风格）：

```
join({"Hello", "World", "1"}) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-11T20:22:01.730

使用 c++11 的**stringstream**方式并不太可怕：

```
#include <vector>
#include <string>
#include <algorithm>
#include <sstream>
#include <iostream>

int main()
{
    std::vector<std::string> v{"Hello, ", " Cruel ", "World!"};
   std::stringstream s;
   std::for_each(begin(v), end(v), [&s](const std::string &elem) { s << elem; } );
   std::cout << s.str();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-17T01:24:47.060

如果不需要尾随空格，请使用自定义连接 lambda`accumulate`中的定义。`<numeric>`

```
#include <iostream>
#include <numeric>
#include <vector>

using namespace std;

int main() {
    vector<string> v;
    string s;

    v.push_back(string("fee"));
    v.push_back(string("fi"));
    v.push_back(string("foe"));
    v.push_back(string("fum"));

    s = accumulate(begin(v), end(v), string(),
                   [](string lhs, const string &rhs) { return lhs.empty() ? rhs : lhs + ' ' + rhs; }
    );
    cout << s << endl;
    return 0;
} 
```

输出：

```
fee fi foe fum 
```

# java - StackOverFlow 和 OutOfMemory 的区别？

> ID：15347127
> 
> 赞同：-2
> 
> 时间：2013-03-11T19:39:58.530
> 
> 标签：java, exception, recursion

我的意思是当程序无限递归并且计算机内存不足时，java编译器是否会抛出堆栈溢出错误或内存不足错误？

我很确定它已经失忆了，但是这是一个漫长的夜晚，几乎没有睡眠，有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:41:56.343

通常你会得到一个堆栈溢出异常。

也就是说，它可以是任何一种，这取决于首先耗尽的是堆栈内存还是堆内存。这又取决于每个递归调用需要多少堆栈/堆内存，以及有多少可用（堆大小和堆栈大小可以相互独立配置）。

# javascript - lodash中的独特联合

> ID：15347128
> 
> 赞同：3
> 
> 时间：2013-03-11T19:40:01.207
> 
> 标签：javascript, arrays, lodash

我有两种收藏：

fieldMappingViewModel.MappedFields():

```
[
{ "EmailField" : "FirstName", "CrmField" : "FirstName" },
{ "EmailField" : "LastName", "CrmField" : "LastName" },
{ "EmailField" : "Job", "CrmField" : "JobTitle" }...
] 
```

_全部：

```
[
    { "EmailField" : "FirstName", "CrmField" : null },
    { "EmailField" : "LastName", "CrmField" : "LastName" },
    { "EmailField" : "Job", "CrmField" : "JobTitle" }...
    ] 
```

我正在尝试使用以下方法创建这两者的独特联合：

```
fieldMappingViewModel.allMappings(_.uniq(_.union(fieldMappingViewModel.MappedFields(), _all),
                function (item, key) {
                    // not the ones that their item.EmailField() already exists with a CrmField value
                })); 
```

当然，严格相等仍然存在于具有重复电子邮件字段但其 CrmField 不同的结果对象中。

如何从我的最终结果中摆脱带有 CrmField: Null 的那些？（我只想过滤那些存在非空对的空值。否则我想保留其中包含空值的对）

所以我最终没有

```
{ "EmailField" : "FirstName", "CrmField" : "FirstName" } 
```

和

```
{ "EmailField" : "FirstName", "CrmField" : null } 
```

两者都在最终结果中。但只有：

```
{ "EmailField" : "FirstName", "CrmField" : "FirstName" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:23:43.387

我的理由是你需要一个函数来实现：

```
{ "EmailField" : "FirstName", "CrmField" : "FirstName" } 
```

和

```
{ "EmailField" : "FirstName", "CrmField" : null } 
```

相同的值，因此 uniq 操作只会选择其中一个，但是取决于哪个先出现，您最终可以选择其中任何一个。就 uniq 而言，唯一的另一种方法是区分它们，在这种情况下，你最终会得到你不想要的两者。

我建议您使用过滤器操作，该操作将删除 uniq 之后的空值。

一个可能的解决方案，尽管由于函数的广泛使用可能不是最好的解决方案是：

```
var arr1 = 
    [
    { "EmailField" : "FirstName", "CrmField" : null },
    { "EmailField" : "LastName", "CrmField" : "LastName" },
    { "EmailField" : "Job", "CrmField" : "JobTitle" }
    ];

var arr2 = 
    [
    { "EmailField" : "FirstName", "CrmField" : "FirstName" },
    { "EmailField" : "LastName", "CrmField" : "LastName" },
    { "EmailField" : "Job", "CrmField" : "JobTitle" },
    ];

var res = _.flatten(_.map(_.groupBy(_.union(arr1, arr2), function (item) {
    return item.EmailField;
}), function (set) {
        if (set.length > 1) {
            return _.filter(_.uniq(set, function (item) {
                return item.EmailField + ' ' + item.CrmField;
            }), function (item) {
                return item.CrmField != null;
            });
        }
        return set;        
}));

console.log(res); 
```

uniq 操作被 groupBy 替换，然后我们使用 map 和 filter 来清除空值，考虑到我们有多少个 EmailField 实例 - 如果只有一个，我们保留它。最后，我们使用 flatten 再次拥有一个对象数组。

# lua - Lua“尝试索引？（零值）

> ID：15347134
> 
> 赞同：1
> 
> 时间：2013-03-11T19:40:20.977
> 
> 标签：lua, computercraft

所以我和我的朋友正在尝试为 ComputerCraft (Minecraft Mod) 编写一个程序，它使用 Lua 作为编程语言。我以前没有做过任何 Lua，他玩过它。基本上，我们试图用 清除一行文本`m.clear()`，但我认为它可能不知道`m`, 是什么，即使我试图定义它。

抱歉，如果问题措辞不当，代码如下：

```
m = peripheral.wrap("right")
m.write("Shutting down.")
m.clear()
sleep(.1)
m.setcursorpos(1,1)
print("Shutting Down..") 
```

其余代码的功能（只是更多相同）我不会发布，因为程序的功能是让它每次添加一个`.`，如果你明白我的意思. 但是，这不是重要的部分。:)

笔记：其实我也不知道是什么`peripheral.wrap("right")`意思，取自ComputerCraft论坛的另一个人的代码（他也想清屏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T19:14:24.067

该函数`peripheral.wrap(string side)`返回一个表，其中包含来自计算机指定端外设的一些函数（如果没有找到，则返回`nil`）。您收到错误是因为您试图以 nil（nil = 无）访问变量。

调用以下命令将打印`Hello, World`到监视器的前面：

```
monitor = peripheral.wrap("top")
monitor.print("Hello, World") 
```

同样，您可以对终端执行相同操作（计算机 gui，您不必包装它）：

```
term.print("Hello, World") 
```

如果您只想与 gui（而不是外部监视器）进行交互，则需要使用 table 术语而不是 peripheral.wrap()。

```
term.write("Shutting down.")
term.clear()
sleep(.1)
term.setCursorPos(1,1) --This is supposed to be setCursorPos not setcursorpos!!!
print("Shutting Down..") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T07:34:51.270

这是在显示器上吗？

如果是，则显示器必须位于计算机的右侧。`m.clear()`实际上理解为`peripheral.wrap("right").clear()`并且会访问到右边的监视器并使用命令`clear()`。

如果您想在计算机上清除它，只需使用`term.clear()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T05:52:52.320

尝试先检查它是否为零..

```
if m ~= nil then
  m.clear()
else 
 print("can't connect")
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T10:55:43.343

尝试使用`term.clear()`而不是`m.clear()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-09T23:35:24.710

我认为第一行应该是“local m =...” 另外，peripheral.wrap("right") 意味着它可以通过在计算机右侧发送任何命令而不是尝试发送任何命令来使计算机右侧的调制解调器、打印机等可用在计算机上运行它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-08T05:04:29.547

而不是 m.clear() 你应该使用 term.clear()

# ios - iOS Crashlytics 报告了无数罕见的崩溃。这种现象是否很好理解？

> ID：15347135
> 
> 赞同：10
> 
> 时间：2013-03-11T19:40:34.713
> 
> 标签：ios, objective-c, ios6, crash-reports

我想由你们来运行这个，看看这里是否有人有类似的经历。

在过去的几个月里，我们在 App Store 上提供了一些应用程序，其中 Crashlytics 用作崩溃报告服务。在那几个月里，我们设法在大约 5 万用户中积累了 60 多种不同类型的崩溃。

一些崩溃是明显的错误，影响了很大一部分用户群，我们立即修复它们。另一方面，在过去几个月中，所有这些用户中的某些事件发生了 1 到 5 次。

*   显然，从商业角度来看，修复那些千载难逢的错误是没有意义的，但我仍然想了解是否存在一种众所周知的问题类型会影响每个 iOS 应用程序，而这是一个根本无法解决的问题抵御。例如，用户在非常不方便的时间点按下主页按钮，可能是在某种过渡期间。或者，应用程序被从内存中逐出导致报告崩溃等。

我在崩溃报告中找不到一个共同点，尽管我确实找到了一些类似的线索：

```
-[UIGestureRecognizer _shouldBegin]
-[UIApplication sendAction:to:from:forEvent:]
objc_msgSend 
```

*   你怎么处理这样的错误？密切关注它们，但除非它们变得更严重，否则不要花时间追赶它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:15:23.473

我的应用程序中有同样的问题。许多奇怪的崩溃与模糊的类/方法名称，我的应用程序在堆栈跟踪中无处可寻。

我通过电子邮件发送了 Crashlytics 支持（顺便说一句，这很棒），这是他们的回复：

> 此外，这些问题中的大多数只有一两次崩溃。当遇到在几周或几个月内影响极少数用户的问题时，我建议不要太担心这些问题。原因是可以存在许多不同的内存状态。可能会出现随机 RAM 问题、内存状态、内存交换和其他您无法控制的情况。

我正在关闭这些问题，但会继续监控它们以确保它们确实是异常事件。

# java - Python 装饰器与 Java 注释或带有 Aspects 的 Java 相同吗？

> ID：15347136
> 
> 赞同：61
> 
> 时间：2013-03-11T19:40:39.170
> 
> 标签：java, python, python-decorators, java-annotations

Python 装饰器与 Java 注释或诸如 Spring AOP 或 Aspect J 之类的东西是否相同或相似，或根本不同？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-11T19:46:32.423

Python 装饰器只是将一个函数传递给另一个函数并用结果替换第一个函数的语法糖：

```
@decorator
def function():
    pass 
```

是语法糖

```
def function():
    pass
function = decorator(function) 
```

Java 注释本身只存储元数据，您必须有一些东西来检查它们以添加行为。

Java AOP 系统是建立在 Java 之上的巨大的东西，装饰器只是语言语法，几乎没有附加语义，你无法真正比​​较它们。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-03-19T06:06:47.087

这是一个非常有效的问题，任何同时涉足这两种语言的人都可以得到。我自己花了一些时间在 python 上，最近一直在让自己跟上 Java 的速度，这是我对这个比较的看法。

Java 注释就是——就是这样：注释。它们是标记；关于它们正在标记/注释的底层对象的附加元数据的容器。它们的存在不会改变底层的执行流程，或者不会在底层之上添加某种封装/包装器。那么他们如何提供帮助呢？它们由注释处理器读取和处理。它们包含的元数据可以被定制编写的注释处理器用来添加一些辅助功能，使生活更轻松；但是，同样，它们既不会改变底层的执行流程，也不会环绕它们。

对于使用过 python 装饰器的人来说，“不改变执行流程”的压力是显而易见的。Python 装饰器虽然在外观和感觉上类似于 Java 注释，但在底层却大不相同。他们采用底层证券并根据用户的需要以任何方式将其包裹起来，如果有人选择这样做，甚至可能完全避免运行底层证券本身。他们拿走底层证券，将自己包裹起来，然后用被包裹的底层证券替换底层证券。他们有效地“代理”了底层证券！

现在*这*与 Aspects 在 Java 中的工作方式非常相似！就其机制和灵活性而言，各个方面本身已经相当进化。但从本质上讲，他们所做的是 - 采用“建议”方法（我说的是 spring AOP 命名法，不确定它是否也适用于 AspectJ），将功能与谓词等一起包装在它们周围，并且'用包装的方法代理'建议的'方法。

请注意，这些思考处于非常抽象和概念的层面，以帮助了解全局。当你开始深入研究时，所有这些概念——装饰器、注释、方面——都有相当大的涉及范围。但在抽象层面上，它们是非常可比的。

**TLDR**

在外观方面，python 装饰器可以被认为类似于 Java 注释，但在底层，它们的工作方式与 Java 中 Aspects 的工作方式非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-22T06:00:03.207

我以类似的方式使用它们：打开/关闭调试或测试选项。

例如（Python 装饰器）：

```
def measure_time(func):
    def _measure_time(*args, **kwargs):
        t0 = time.time()
        ret = func(*args, **kwargs)
        print "time=%lf" % (time.time()-t0)
        ...
        return ret
    return _measure_time

@measure_time
def train_model(self):
    ... 
```

对于 Java 注解，使用[getAnnotation 等](https://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AnnotatedElement.html)可以完成类似的工作或更复杂的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-01T16:45:08.987

Python 装饰器和 Java 注释共享相同的语法，但有两个非常不同的目的！它们是不兼容或不可互换的！

在最近的一个项目中，我有必要在 python 脚本上使用 java 注释语义，我搜索了一种模拟它的方法并发现了这个：

在 Python 中有一个称为“Docstring”的功能！

它只不过是一个特殊的注释行，它必须是模块、类或函数的第一行！

就像注释行一样，您可以使用任何形式的文本。但在这种情况下，它对我来说如此特别的是它可以被 python 自省读取！

所以它可以像 Java Annotation 一样工作，也需要 Java 反射来解释和响应从它携带的元数据！

遵循一个简短的示例：

源 a.py

```
```
def some_function():
    '''@myJavaLikeAnnotation()'''
    ... (my function code) ...
``` 
```

源 b.py（我必须在其中处理 @myJavaLikeAnnotacion()）：

```
import a

for element_name in dir(a):
    element = getattr(a, element_name)
    if hasattr(element, '__call__'):
        if not inspect.isbuiltin(element):
            try:
                doc = str(element.__doc__)
                if not doc == '@myJavaLikeAnnotation()':
                    # It don't have the 'java like annotation'!
                    break

                ... It have! Do what you have to do...  
            except:
                pass 
```

显然，缺点是必须自己解析在“python java like annotations”中使用的所有元数据！

# jquery - 在 Wordpress 的 html 标头中实现时 jquery 无法正常工作

> ID：15347137
> 
> 赞同：1
> 
> 时间：2013-03-11T19:40:48.027
> 
> 标签：jquery, wordpress

我正在尝试在 wordpress 安装的页面中使用 jquery，但似乎没有任何效果。它是通过 php 行调用的（如果我做对了）：

wp_enqueue_script('jquery');

我假设一些 jquery 脚本正在工作（这些脚本与我正在使用的主题一起使用），但由于某种原因，我想添加的任何其他脚本都不会起作用。我尝试在我的索引页面的标题或 js 文件中实现它/它们，但这些方法似乎都不起作用。这是链接：[http ://selectedworx.com](http://selectedworx.com)

感谢您提供有关如何使其工作的任何提示……这让我发疯了：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:51:40.733

演示： http: [//jsfiddle.net/7uAUg/](http://jsfiddle.net/7uAUg/) 您的代码似乎工作正常，$ 运算符可能被分配了不同的含义。这可能发生在您页面中发生的 40 多个包含之一中。

```
Uncaught TypeError: Property '$' of object [object Object] is not a function 
```

是您遇到的唯一例外，而不是

```
<script type="text/javascript">
$(document).ready(function(){                          
     $("div").css("border", "3px solid red");
});
</script> 
```

利用

```
<script type="text/javascript">
$(document).ready(function(){                          
     jQuery("div").css("border", "3px solid red");
});
</script> 
```

正如@wirey所说

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:47:40.560

尝试`<?php wp_head();?>`在您的页眉和页脚内`<?php wp_footer();?>`添加还为您的 Jquery 添加无冲突模式：

```
jQuery(document).ready(function($){

    alert('This is a alert!!');
    //So now you can call your functions with $ !
            $('.someclass').hide();//for example    
    }); 
```

# sql - SQL Inner JOIN 与查询

> ID：15347144
> 
> 赞同：0
> 
> 时间：2013-03-11T19:41:09.817
> 
> 标签：sql, activerecord, arel

我正在尝试做这样的事情，但我不确定你是否可以通过内部连接来做到这一点：

```
SELECT "scores".* 
FROM "scores" 
    INNER JOIN "games" ON "games"."id" = "scores"."games_id" 
WHERE 
    "games"."date" >= '2013-02-11 19:30:11.799227' 
AND "scores".value > 350; 
```

谢谢您的帮助。此外，如果您知道如何编写 ActiveRecord / arel 语句，那么查询也会有所帮助。

我的模型如下所示：

```
class Score < ActiveRecord::Base
  belongs_to :game
  delegates :date, to: game
end

class Game < ActiveRecord::Base
  has_many :scores, dependent: :destroy
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:19:46.527

ActiveRecord 查询如下所示：

```
some_date = DateTime.parse('2013-02-11 19:30:11.799227')
score = 350
Score.joins(:game).
      where("games.date >= ? AND scores.value > ?", some_date, score) 
```

这假设您`belongs_to :game`在分数模型中有。

# php - PDO 实现、MySQL、SQL 注入

> ID：15347156
> 
> 赞同：1
> 
> 时间：2013-03-11T19:41:54.187
> 
> 标签：php, sql, pdo, sql-injection

我一直在为一个视频网站做一个项目。它从数据库中提取信息并在需要的地方插入详细信息。

到目前为止一切都运行良好，但我刚刚进行了 SQL 注入测试，一切都完全开放。我一直在寻找答案以关闭它并使事情更加安全。

我试图实现 PDO 语句，但我无法理解它。这个月我只在研究 php/sql，所以我非常新。

任何帮助或其他解决方案都会很棒，下面的代码是我的页面的主要连接点，我认为这也是最脆弱的部分

```
<?php
$username="********"; 
$password="*******";
$database="*******";

$id = $_GET['id']; 
$badchars = array("\"", "\\", "/", "*", "'", "=", "-", "#", ";", "<", ">", "+", "%");
$myid = str_replace($badchars, "", $id); 
mysql_connect('localhost',$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$result = mysql_query("SELECT * FROM Videos WHERE id='$id'");
while($row = mysql_fetch_array($result)) {
    $title=mysql_result($result,0,"title");
    $url=mysql_result($result,0,"url");
    $id=mysql_result($result,0,"id");
    $description=mysql_result($result,0,"description");
    $source=mysql_result($result,0,"source");
    $type=mysql_result($result,0,'type');
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:31:43.740

这是您重写为使用 PDO 的示例，并附有解释。

```
<?php
$username="********"; 
$password="*******";
$database="*******";

try {
  $pdo = new PDO("mysql:host=localhost;dbname=$database", $username, $password);
} catch (PDOException $e) {
  error_log("PDO connection error: " . $e->getMessage());
  header("Location: http://www.example.com/error.php");
  exit;
} 
```

您可以将 GET 参数强制转换为 int，它将只使用数字部分并去掉其他任何内容。

```
$id = (int) $_GET['id']; 
```

在要替换动态值的查询中保留一个占位符。您可以将*位置*参数与`?`符号一起使用，也可以将*命名*参数与冒号前缀语法一起使用。

```
$sql = "SELECT * FROM Videos WHERE id = :id"; 
```

每次调用prepare() 或execute() 后测试错误很重要。

最好不要简单地出现错误`die()`，让浏览器出现白屏，但如果可能的话它们应该恢复，或者至少显示一个友好的“哎呀！” 页面，以便用户可以继续使用您的网站。

```
$stmt = $pdo->prepare($sql);
if ($stmt === false) {
  $err = $pdo->errorInfo();
  error_log("PDO prepare error: " . $err[2]);
  header("Location: http://www.example.com/error.php");
  exit;
} 
```

传递参数值数组以替换为 execute() 的参数。在命名参数的情况下，它是一个关联数组。在位置参数的情况下，使用简单的序数数组。

```
if ($stmt->execute(array(":id"=>$id)) === false) {
  $err = $stmt->errorInfo();
  error_log("PDO execute error: " . $err[2]);
  header("Location: http://www.example.com/error.php");
  exit;
} 
```

然后，您可以从语句的结果集中每行获取一个关联数组：

```
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
  extract($row);
} 
```

注意我展示了[extract()](http://www.php.net/manual/en/function.extract.php)的使用，这是一个 PHP 内置函数，它根据关联数组 $row 的键创建变量 $title、$url 等。但我这样做只是为了匹配您的代码；通常我只会引用这些字段`$row["title"]`，依此类推。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T19:45:58.307

```
$result = mysql_query("SELECT * FROM Videos WHERE id='" . mysql_real_escape_string($_GET['id']) . "'"); 
```

...您可能还想考虑使用[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php) () 而不是 mysql_fetch_array() ，这将大大简化结果值。根本不需要那些对 mysql_result() 的调用。

# ios - 将 UISwitch 添加到 TableView 中的一个单元格

> ID：15347161
> 
> 赞同：1
> 
> 时间：2013-03-11T19:42:03.033
> 
> 标签：ios, objective-c, uitableview, uiswitch

我试图将 UISwitch 添加到我的表格视图中的一个单元格中，代码如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    FormCell *cell = (FormCell *) [tableView dequeueReusableCellWithIdentifier: @"FormCell"];
    if(cell == nil) cell = [[FormCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"FormCell"];

    if(indexPath.row == 3)
    {
        UISwitch *mySwitch = [[UISwitch alloc] initWithFrame:CGRectMake(100, 9, 50, 50)];
        [mySwitch addTarget: self action: @selector(flip:) forControlEvents:UIControlEventValueChanged];
        [cell.contentView addSubview:mySwitch];

        [[UISwitch appearance] setOnTintColor:[UIColor colorWithRed:163.0/255.0 green:12.0/255.0 blue:17.0/255.0 alpha:1.0]];
    }

    return cell;
} 
```

它的工作，问题是当我向上或向下滚动表格视图时，它会复制 UISwitch，但最终或在表格视图的开头......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:51:09.700

记住细胞被重复使用。你最好用自己的标识符创建一个自定义的 UITableViewCell 。在那里做你的定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:51:14.780

UITableView 是高度优化的，主要优化之一是尽可能重用表格单元格对象。这意味着表格行和 UITableViewCell 对象之间没有永久的一对一映射。

因此，一个单元对象的同一个实例可以重复用于多行。一旦单元格的行滚动到屏幕外，该行的单元格就会进入“回收”堆，并且可能会被重新用于屏幕上的另一个行。

通过创建 Switch 对象并将它们添加到单元格，每次第三行出现在屏幕上时，您都会再次将其添加到任何 Cell 对象中，该表恰好为第 3 行“出列”。

如果您要向可重用单元格添加内容，则必须具有相应的代码，以便在将单元格重用于另一个表格行时将其重置为默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:50:32.057

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
  FormCell *cell = (FormCell *) [tableView dequeueReusableCellWithIdentifier: @"FormCell"];

  if(cell == nil){    
      cell = [[FormCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"FormCell"];
  }
 else
  {
    for (UIView *subview in [cell subviews]) 
    {
        [subview removeFromSuperview];
    }
  }

if(indexPath.row == 3)
{
    UISwitch *mySwitch = [[UISwitch alloc] initWithFrame:CGRectMake(100, 9, 50, 50)];
    [mySwitch addTarget: self action: @selector(flip:) forControlEvents:UIControlEventValueChanged];
    [cell.contentView addSubview:mySwitch];

    [[UISwitch appearance] setOnTintColor:[UIColor colorWithRed:163.0/255.0 green:12.0/255.0 blue:17.0/255.0 alpha:1.0]];
}

return cell;
} 
```

这不会复制表格滚动上的 UISwitch 另一种方法是将 设置`reuseIdentifier`为`nil`。希望这可以帮助。

# c++ - 如何持续监控一个消息队列？

> ID：15347167
> 
> 赞同：1
> 
> 时间：2013-03-11T19:42:22.467
> 
> 标签：c++, unix, ipc, message-queue

所以在 c++ 中，我有一个父进程，它分叉了 N 个子进程。父进程及其所有子进程都可以访问消息队列，我希望父进程持续“监视”消息队列，并在`msgrcv()`每次来自子进程的新消息出现在消息队列中时执行。我该怎么做呢？我已经阅读`msg_qnum`了消息队列数据结构中的一个变量，但不确定如何使用它。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:56:35.923

通常的方法就是`msvrcv`循环调用。调用将`msgrcv`阻塞，直到收到消息，此时该过程将继续。处理完消息后，它会循环回`msgrcv`调用阻塞，直到收到下一条消息。

# rally - 无论结果如何，在 RALLY 中查找所有测试用例。（查询未运行的测试用例）

> ID：15347170
> 
> 赞同：1
> 
> 时间：2013-03-11T19:42:30.840
> 
> 标签：rally, testcase

我正在尝试构建一个查询，该查询将找到每个创建的测试用例，即使它尚未运行（尚未分配结果）。

我开始根据 TestCase Pass/Fail 历史报告构建自定义应用程序（起点的源代码可在此处找到[http://developer.help.rallydev.com/test-case-passfail-history-app](http://developer.help.rallydev.com/test-case-passfail-history-app)）

但是，此应用程序的工作方式与我的预期相反。它首先找到一个测试用例结果，然后向后查找该结果属于哪个测试用例。因此，它不会找到没有分配判定（无结果）的测试用例。

这是初始查询，直接来自 Rally 的源代码：

```
 function runMainQuery(rallyDataSource) {
        document.getElementById("TestCaseInfo").innerHTML = "";
        busySpinner = new rally.sdk.ui.basic.Wait({hideTarget: false});
        busySpinner.display('spinner');
        var daySpan = 30; // how many days back from today for TestCaseResult inclusion
        var dateBoundingClause = '(Date >= "' + previousDate(daySpan) + '")';
        querySpec = {
            key   : "testcaseresults",
            type  : "testcaseresults",
            fetch : 'ObjectID,Build,Date,Verdict,Duration,Tester,UserName,DisplayName,TestCase,FormattedID,Name,WorkProduct',
            query : dateBoundingClause,
            order : 'Date Desc'
        };

        rallyDataSource.findAll(querySpec, showResults);
    } 
```

仅搜索 TestCaseRESULTS

我需要一个搜索没有结果（尚未运行）的测试用例。

问题是，我不太了解 Rally 数据库结构（表/列名），无法知道如何构造这样的查询。

我试过了

`querySpec = { key : "testcase", type : "testcase", fetch : 'Name,WorkProduct', query : dateBoundingClause, order : 'Date Desc' };`

但我真的只是在黑暗中拍摄，因为我不知道数据库结构是什么样的。

任何想法都非常感谢！

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:57:07.267

[位于此处](https://rally1.rallydev.com/slm/doc/webservice/)的 WSAPI 文档允许您浏览所有可用的对象并查看可用的字段。不幸的是，API 不支持基于空集合 (Results.count = 0) 的查询，因此您只需拉回所有 TestCase 对象，在您的获​​取中包含 Results 并检查每个 Results.length 是否为 0一。

# css - 通过 MAMP localhost 运行时 CSS 中的图像不显示

> ID：15347171
> 
> 赞同：1
> 
> 时间：2013-03-11T19:42:31.200
> 
> 标签：css, codeigniter, web, mamp

刚开始建立一个网站，这是我第一次使用 MAMP 和 CodeIgniter 框架。我正在尝试从 CSS 代码中获取要显示的图像，但是当我在 localhost 中打开网站时它们没有显示出来。我的问题是：

我需要将图像放在 MAMP 文档中的特定位置吗？还是有什么我没有先配置的？...（我敢打赌，我还没有做过一些小事情。）请注意，我曾尝试更改 URL 和文件位置几次，但没有运气..

这是链接到我要显示的图像的 CSS 代码，除图像未显示外，其他一切正常。

请帮忙。

```
#header {
overflow: hidden;
width: 1000px;
height: 50px;
margin: 00px auto 20px auto;
background: url(/Applications/MAMP/htdocs/website/application/views/images/img03.jpg) no-repeat right top;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:47:28.673

```
background: url(/Applications/MAMP/htdocs/website/application/views/images/img03.jpg) 
```

“localhost”指向 htdocs，您必须设置从那里开始路由

```
background: url(/website/application/views/images/img03.jpg) 
```

如果图像的正确路径使用 chrome，则可以与 F12 一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:45:15.063

更改图像路径。例如，如果您的 css 文件位于名为 的文件夹中`css`，则您的图像位于其中，`views`并且 2 个文件夹位于同一级别：

```
background: url(../views/images/img03.jpg) no-repeat right top; 
```

# python - Python 寻找质因数

> ID：15347174
> 
> 赞同：85
> 
> 时间：2013-03-11T19:42:33.373
> 
> 标签：python, primes

两部分问题：

1.  试图确定 600851475143 的最大素数，我在网上发现这个程序似乎可以工作。问题是，我很难弄清楚它是如何工作的，尽管我了解程序正在做什么的基础知识。另外，我希望您能阐明您可能知道的任何寻找素因数的方法，也许无需测试每个数字，以及您的方法是如何工作的。

这是我在网上找到的用于素数分解的**代码 [注意：此代码不正确。请参阅下面 Stefan 的答案以获得更好的代码。]**：

```
n = 600851475143
i = 2
while i * i < n:
     while n % i == 0:
         n = n / i
     i = i + 1

print(n)

#takes about ~0.01secs 
```

2.  为什么那段代码比这段代码快这么多，只是为了测试速度，除此之外没有任何实际用途？

    i = 1 while i < 100: i += 1 #takes about ~3secs

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2014-04-02T10:17:10.287

这个问题是我google时弹出的第一个链接`"python prime factorization"`。正如@quangpn88 所指出的，这个算法对于完美的正方形是*错误的（！）*`n = 4, 9, 16, ...`但是，@quangpn88 的修复也不起作用，因为如果最大的素因数出现 3 次或更多次，它会产生不正确的结果，例如，`n = 2*2*2 = 8`或`n = 2*3*3*3 = 54`。

我相信 Python 中正确的蛮力算法是：

```
def largest_prime_factor(n):
    i = 2
    while i * i <= n:
        if n % i:
            i += 1
        else:
            n //= i
    return n 
```

不要在性能代码中使用它，但是对于中等数量的快速测试是可以的：

```
In [1]: %timeit largest_prime_factor(600851475143)
1000 loops, best of 3: 388 µs per loop 
```

如果寻求完整的素数分解，这是蛮力算法：

```
def prime_factors(n):
    i = 2
    factors = []
    while i * i <= n:
        if n % i:
            i += 1
        else:
            n //= i
            factors.append(i)
    if n > 1:
        factors.append(n)
    return factors 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-06-26T04:05:44.407

好的。所以你说你了解基础知识，但你不确定它是如何工作的。首先，这是对它源于的 Project Euler 问题的一个很好的回答。我对这个问题做了很多研究，这是迄今为止最简单的回应。

为了解释的目的，我会让`n = 20`. 要运行真正的 Project Euler 问题，让`n = 600851475143`.

```
n = 20 
i = 2

while i * i < n:
    while n%i == 0:
        n = n / i
    i = i + 1

print (n) 
```

这个解释使用了两个`while`循环。关于循环要记住的最重要的事情`while`是它们会一直运行到不再​​存在为止`true`。

外循环声明 while`i * i`不大于`n`（因为最大的素因数永远不会大于 的平方根），在内循环运行后`n`添加`1`到。`i`

内部循环声明 while均`i`分为`n`，替换`n`为`n`除以`i`。这个循环不断地运行，直到它不再是真的。对于`n=20`and `i=2`，`n`被 替换`10`，然后又被 替换`5`。因为`2`没有均匀地分成`5`，所以循环停止，`n=5`外循环结束，产生`i+1=3`。

最后，因为`3`squared 大于`5`，外部循环不再是`true`并打印 的结果`n`。

感谢您发布此信息。在意识到它是如何工作的之前，我一直在查看代码。希望这是您在回复中寻找的内容。如果没有，请告诉我，我可以进一步解释。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-01-28T23:44:54.883

看起来人们正在做 Project Euler 的事情，你自己编写解决方案。对于其他想要完成工作的人来说，有一个[primefac 模块](https://pypi.python.org/pypi/primefac)可以非常快速地处理非常大的数字：

```
#!python

import primefac
import sys

n = int( sys.argv[1] )
factors = list( primefac.primefac(n) )
print '\n'.join(map(str, factors)) 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-11T19:53:45.223

对于素数生成，我总是使用[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)：

```
def primes(n):
    if n<=2:
        return []
    sieve=[True]*(n+1)
    for x in range(3,int(n**0.5)+1,2):
        for y in range(3,(n//x)+1,2):
            sieve[(x*y)]=False

    return [2]+[i for i in range(3,n,2) if sieve[i]]

In [42]: %timeit primes(10**5)
10 loops, best of 3: 60.4 ms per loop

In [43]: %timeit primes(10**6)
1 loops, best of 3: 1.01 s per loop 
```

您可以使用[Miller-Rabin 素数检验](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)来检查一个数字是否为素数。[你可以在这里](http://web.archive.org/web/20130328080230/http://en.literateprograms.org/Miller-Rabin_primality_test_%28Python%29?)找到它的 Python 实现。

总是使用[`timeit`](http://docs.python.org/2/library/timeit.html)模块来计时你的代码，第二个只需要`15us`：

```
def func():
    n = 600851475143
    i = 2
    while i * i < n:
         while n % i == 0:
            n = n / i
         i = i + 1

In [19]: %timeit func()
1000 loops, best of 3: 1.35 ms per loop

def func():
    i=1
    while i<100:i+=1
   ....:     

In [21]: %timeit func()
10000 loops, best of 3: 15.3 us per loop 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-05-12T04:31:28.980

```
"""
The prime factors of 13195 are 5, 7, 13 and 29.

What is the largest prime factor of the number 600851475143 ?

"""

from sympy import primefactors
print(primefactors(600851475143)[-1]) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-10-19T12:32:02.180

```
def find_prime_facs(n):
  list_of_factors=[]
  i=2
  while n>1:
    if n%i==0:
      list_of_factors.append(i)
      n=n/i
      i=i-1
    i+=1  
  return list_of_factors 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-10-17T20:37:50.800

27的最大质因数不是3吗？上面的代码可能是最快的，但它在 27 上失败了，对吧？27 = 3*3*3 以上代码返回 1 据我所知.....1 既不是素数也不是合数

我认为，这是更好的代码

```
def prime_factors(n):
    factors=[]
    d=2
    while(d*d<=n):
        while(n>1):            
            while n%d==0:
                factors.append(d)
                n=n/d
            d+=1
    return factors[-1] 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-11-15T06:10:12.910

如果您正在寻找维护良好的预先编写的代码，请使用SymPy[的函数](https://www.sympy.org/en/index.html)[sympy.ntheory.primefactors](https://docs.sympy.org/latest/modules/ntheory.html#sympy.ntheory.factor_.primefactors)。

它返回 的素因子的排序列表`n`。

```
>>> from sympy.ntheory import primefactors
>>> primefactors(6008)
[2, 751] 
```

将列表传递给以`max()`获得最大的主要因素：`max(primefactors(6008))`

如果您想要它们的主要因素`n`以及每个因素的多重性，请使用[sympy.ntheory.factorint](https://docs.sympy.org/latest/modules/ntheory.html#sympy.ntheory.factor_.factorint)。

> 给定一个正整数`n`，`factorint(n)`返回一个字典，其中包含 的素因子`n`作为键，它们各自的多重性作为值。

```
>>> from sympy.ntheory import factorint
>>> factorint(6008)   # 6008 = (2**3) * (751**1)
{2: 3, 751: 1} 
```

该代码针对 Python 3.6.9 和 SymPy 1.1.1 进行了测试。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-04-18T10:42:05.277

另一种方法：

```
import sys
n = int(sys.argv[1])
result = []
for i in xrange(2,n):
    while n % i == 0:
        #print i,"|",n
        n = n/i
        result.append(i)

    if n == 1: 
        break

if n > 1: result.append(n)
print result 
```

示例输出：
python test.py 68
[2, 2, 17]

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-07-16T09:01:15.187

代码错误为 100。它应该检查 case i * i = n：

我认为应该是：

```
while i * i <= n:
    if i * i = n:
        n = i
        break

    while n%i == 0:
        n = n / i
    i = i + 1

print (n) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-09-29T21:21:34.960

**我的代码：**

```
# METHOD: PRIME FACTORS
def prime_factors(n):
    '''PRIME FACTORS: generates a list of prime factors for the number given
    RETURNS: number(being factored), list(prime factors), count(how many loops to find factors, for optimization)
    '''
    num = n                         #number at the end
    count = 0                       #optimization (to count iterations)
    index = 0                       #index (to test)
    t = [2, 3, 5, 7]                #list (to test)
    f = []                          #prime factors list
    while t[index] ** 2 <= n:
        count += 1                  #increment (how many loops to find factors)
        if len(t) == (index + 1):
            t.append(t[-2] + 6)     #extend test list (as much as needed) [2, 3, 5, 7, 11, 13...]
        if n % t[index]:            #if 0 does else (otherwise increments, or try next t[index])
            index += 1              #increment index
        else:
            n = n // t[index]       #drop max number we are testing... (this should drastically shorten the loops)
            f.append(t[index])      #append factor to list
    if n > 1:
        f.append(n)                 #add last factor...
    return num, f, f'count optimization: {count}' 
```

**我将其与得票最多的代码进行了比较，速度非常快**

```
 def prime_factors2(n):
        i = 2
        factors = []
        count = 0                           #added to test optimization
        while i * i <= n:
            count += 1                      #added to test optimization
            if n % i:
                i += 1
            else:
                n //= i
                factors.append(i)
        if n > 1:
            factors.append(n)
        return factors, f'count: {count}'   #print with (count added) 
```

**TESTING，（注意，我在每个循环中添加了一个 COUNT 来测试优化）**

```
# >>> prime_factors2(600851475143)
# ([71, 839, 1471, 6857], 'count: 1472')
# >>> prime_factors(600851475143)
# (600851475143, [71, 839, 1471, 6857], 'count optimization: 494') 
```

我认为可以轻松修改此代码以获得（最大因素）或其他任何需要。我对任何问题持开放态度，我的目标是针对更大的素数和因数进一步改进这一点。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-11-04T00:52:50.930

如果您想使用 numpy，这里有一种方法可以创建一个包含不大于 n 的所有素数的数组：

`[ i for i in np.arange(2,n+1) if 0 not in np.array([i] * (i-2) ) % np.arange(2,i)]`

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-09-12T17:59:24.173

看看这个，它可能对你的理解有所帮助。

```
#program to find the prime factors of a given number
import sympy as smp

try:
    number = int(input('Enter a number : '))
except(ValueError) :
    print('Please enter an integer !')
num = number
prime_factors = []
if smp.isprime(number) :
    prime_factors.append(number)
else :
    for i in range(2, int(number/2) + 1) :   
        """while figuring out prime factors of a given number, n
        keep in mind that a number can itself be prime or if not, 
        then all its prime factors will be less than or equal to its int(n/2 + 1)"""
        if smp.isprime(i) and number % i == 0 :
            while(number % i == 0) :
                prime_factors.append(i)
                number = number  / i
print('prime factors of ' + str(num) + ' - ')
for i in prime_factors :
    print(i, end = ' ') 
```

[![在此处输入图像描述](../Images/5e92ca8b90c51fb53ffc5b9ff5a5439c.png)](https://i.stack.imgur.com/1808Q.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-05-07T20:05:05.320

这是我的 python 代码：它可以快速检查素数并检查从最高到最低的素数因子。如果没有新的数字出来，你必须停下来。（对此有什么想法吗？）

```
import math

def is_prime_v3(n):
    """ Return 'true' if n is a prime number, 'False' otherwise """
    if n == 1:
        return False

    if n > 2 and n % 2 == 0:
        return False

    max_divisor = math.floor(math.sqrt(n))
    for d in range(3, 1 + max_divisor, 2):
        if n % d == 0:
            return False
    return True

number = <Number>

for i in range(1,math.floor(number/2)):
    if is_prime_v3(i):
        if number % i == 0:
            print("Found: {} with factor {}".format(number / i, i)) 
```

第一个问题的答案在几分之一秒内就出现了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-22T04:31:18.880

以下是有效生成给定数的素数的两种方法：

```
from math import sqrt

def prime_factors(num):
    '''
    This function collectes all prime factors of given number and prints them.
    '''
    prime_factors_list = []
    while num % 2 == 0:
        prime_factors_list.append(2)
        num /= 2
    for i in range(3, int(sqrt(num))+1, 2):
        if num % i == 0:
            prime_factors_list.append(i)
            num /= i
    if num > 2:
        prime_factors_list.append(int(num))
    print(sorted(prime_factors_list))

val = int(input('Enter number:'))
prime_factors(val)

def prime_factors_generator(num):
    '''
    This function creates a generator for prime factors of given number and generates the factors until user asks for them.
    It handles StopIteration if generator exhausted.
    '''
    while num % 2 == 0:
        yield 2
        num /= 2
    for i in range(3, int(sqrt(num))+1, 2):
        if num % i == 0:
            yield i
            num /= i
    if num > 2:
        yield int(num)

val = int(input('Enter number:'))
prime_gen = prime_factors_generator(val)
while True:
    try:
        print(next(prime_gen))
    except StopIteration:
        print('Generator exhausted...')
        break
    else:
        flag = input('Do you want next prime factor ? "y" or "n":')
        if flag == 'y':
            continue
        elif flag == 'n':
            break
        else:
            print('Please try again and enter a correct choice i.e. either y or n') 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-02T02:40:25.060

由于没有人试图用旧的好`reduce`方法来破解它，我将接受这个职业。此方法对于此类问题不灵活，因为它对参数数组执行重复操作的循环，并且默认情况下无法中断此循环。在我们实现了自己的`interupted reduce`for 中断循环之后，大门打开了，如下所示：

```
from functools import reduce

def inner_func(func, cond, x, y):
    res = func(x, y)
    if not cond(res):
        raise StopIteration(x, y)
    return res

def ireducewhile(func, cond, iterable):
    # generates intermediary results of args while reducing
    iterable = iter(iterable)
    x = next(iterable)
    yield x
    for y in iterable:
        try:
            x = inner_func(func, cond, x, y)
        except StopIteration:
            break
        yield x 
```

之后，我们可以使用一些与标准 Python [reduce 方法](https://docs.python.org/3/library/functools.html#functools.reduce)`func`的输入相同的内容。让其以下列方式定义：`func`

```
def division(c):
    num, start = c
    for i in range(start, int(num**0.5)+1):
        if num % i == 0:
            return (num//i, i)
    return None 
```

假设我们要分解一个数字 600851475143，重复使用此函数后此函数的预期输出应为：

```
(600851475143, 2) -> (8462696833 -> 71), (10086647 -> 839), (6857, 1471) -> None 
```

元组的第一项是一个数字，该`division`方法从第二项开始尝试除以最小除数，并以该数字的平方根结束。如果不存在除数，则返回 None。现在我们需要从这样定义的迭代器开始：

```
def gener(prime):
    # returns and infinite generator (600851475143, 2), 0, 0, 0...
    yield (prime, 2)
    while True:
        yield 0 
```

最后，循环的结果是：

```
result = list(ireducewhile(lambda x,y: div(x), lambda x: x is not None, iterable=gen(600851475143)))
#result: [(600851475143, 2), (8462696833, 71), (10086647, 839), (6857, 1471)] 
```

输出素数除数可以通过以下方式捕获：

```
if len(result) == 1: output = result[0][0]
else: output = list(map(lambda x: x[1], result[1:]))+[result[-1][0]]
#output: [2, 71, 839, 1471] 
```

# 笔记：

为了提高效率，您可能希望使用位于特定范围内的预生成素数，而不是该范围内的所有值。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-07-20T07:49:57.593

你不应该循环到数字的平方根！有时可能是对的，但并非总是如此！

10 的最大素数是 5，大于 sqrt(10)（3.16，aprox）。

33 的最大素数是 11，大于 sqrt(33)（5.5,74，aprox）。

您将这与规定的适当性混淆了，即如果一个数字的素因数大于其 sqrt，则它必须至少有另一个其他素因数小于其 sqrt。所以，如果你想测试一个数字是否是素数，你只需要测试到它的 sqrt。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-06-15T11:57:45.057

```
def prime(n):
    for i in range(2,n):
        if n%i==0:
            return False
    return True

def primefactors():
    m=int(input('enter the number:'))
    for i in range(2,m):
        if (prime(i)):
            if m%i==0:
                print(i)
    return print('end of it')

primefactors() 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2015-06-19T22:59:33.480

处理 2 后跳过偶数的另一种方法：

```
def prime_factors(n):
   factors = []
   d    = 2
   step = 1
   while d*d <= n:
      while n>1:
         while n%d == 0:
            factors.append(d)
            n = n/d
        d += step
        step = 2

  return factors 
```

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2017-03-18T20:02:26.617

```
n=int(input("Enter the number"))
if n==1 :  #because the below logic doesn't work on 1
    print(n)
for i in range(2 , n+1):
    if n%i==0 :
        n1=i  #get factor
        for b in range(2,n+1): #check if it is prime
            if ((n1%b)==0) & (n1==b):
                print(n1)
            elif (n1%b)==0 or n1<b:  #if not then pass
                break 
```

我确信这是最糟糕的逻辑，但它是我在 .py 中所拥有的所有知识，该程序将从用户那里获取一个数字并打印它的所有因子数字，例如 12 它将给出 2,3

# ios - iPad 应用程序：不断收到此错误“NSInternalInconsistencyException”，原因：“无法在包中加载 NIB

> ID：15347178
> 
> 赞同：0
> 
> 时间：2013-03-11T19:42:50.927
> 
> 标签：ios, objective-c, ipad

我对目标 c 相当陌生，所以这似乎是一个愚蠢的问题，但如果有人能帮助我解决这个问题，我将不胜感激。

我一直在我的终端里收到这个

> 2013-03-11 19:34:41.658 ColourPattern [380:c07] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“MainView.xib” ' *** First throw call stack: (0x190c012 0x168fe7e 0x190bdeb 0x7f2fac 0x7f498d 0x5d6ceb 0x5d7002 0x5d5ed6 0x5e7315 0x5e824b 0x5d9cf8 0x2774df9 0x2774ad0 0x1881bf5 0x1881962 0x18b2bb6 0x18b1f44 0x18b1e1b 0x5d57da 0x5d765c 0x22bd 0x21f5) libc++abi.dylib: terminate called throwing an exception (lldb)

在我的主要课程中

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[])

{

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

我一直在这条线旁边收到线程 1:signal SIGABRT - int retVal = UIApplicationMain(argc, argv, nil, nil);

我的应用程序加载但只显示黑屏，我曾经让它工作过，但无法弄清楚为什么它现在不工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:46:03.223

您的文件列表中有 MainView.xib 吗？是不是被删了？由于找不到 MainView.xib，因此正在生成错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:59:38.207

关闭自动布局或在 iOS 6 中运行应用程序。

# r - Plotrix R 包 polar.plot 符号覆盖

> ID：15347179
> 
> 赞同：3
> 
> 时间：2013-03-11T19:43:08.247
> 
> 标签：r, plot, polar-coordinates, azimuth, plotrix

我正在使用极坐标图来描述时间序列中的卫星位置。以下问题使用 R 包 plotrix 中的 polar.plot 函数。一个示例图：

```
library(plotrix)
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
                          point.symbols=19,radial.lim=c(0,5),boxed.radial=F) 
```

我遇到的问题是这个函数在数据值上绘制标签和轴（参见径向位置 0 和 3），我看不到控制这种行为的方法。我可以通过关闭轴和标签再次添加数据值（添加到上一个图）来运行解决方法，但这并不优雅：

```
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
           grid.left=F,point.symbols=19,show.radial.grid=FALSE,
           show.grid.labels=FALSE,show.grid=FALSE,labels=NULL,add=TRUE) 
```

我的问题有两个：

1.  有没有办法在我在文档中错过的 plotrix 中控制它？
2.  是否有其他软件包可以轻松处理这种方位极坐标图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:23:55.150

您可以使用两个参数控制这些径向标签的显示方式：`show.grid.labels`和`radial.labels`。有关`?radial.plot`更完整的信息，请参阅。

`show.grid.labels`接受从 1 到 4 的值（类似于`pos`or `axis`，参见`?par`or `?axis`）控制它们显示的一侧。`radial.labels`接受标签向量，所以如果你想拒绝标签：`radial.labels = ""`有效，

```
library(plotrix)
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
           point.symbols=19,radial.lim=c(0,5),boxed.radial=FALSE, 
           show.grid.labels=2) 
```

![在此处输入图像描述](../Images/f22c094cb36b4ffa8126faf1b47761a1.png)

```
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
           point.symbols=19,radial.lim=c(0,5),boxed.radial=FALSE, 
           show.grid.labels=2, radial.labels=c("",1:5)) 
```

![在此处输入图像描述](../Images/6ffb05c6b95f4f76f9168bbed649ea1c.png)

您还可以使用以下方法摆脱轴线`show.radial.grid`：

```
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
           point.symbols=19,radial.lim=c(0,5),boxed.radial=FALSE, 
           show.grid.labels=2, radial.labels=c("",1:5), 
           show.radial.grid=FALSE) 
```

![在此处输入图像描述](../Images/f5acc4f3db980df6cad4ce1db9808a67.png)

然而，似乎没有办法让线条位于标签和点的后面，所以如果你确实希望线条出现在后面，那么你最初的想法可能是最好的：

```
polar.plot(NA,NA,start=90,clockwise=TRUE,rp.type="",
           radial.lim=c(0,5),boxed.radial=FALSE, show.grid.labels=2,
           radial.labels=c("",1:5)) # First plotting the grid
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",
           point.symbols=19,radial.lim=c(0,5),show.grid=FALSE, 
           show.radial.grid=FALSE, add=TRUE)  # Then the points without the grid 
```

![在此处输入图像描述](../Images/3d842e06df746a515c35977fc50e9fee.png)

我不知道有任何其他包具有处理这种情节的函数，但是如果你想创建自己的函数，[这个对你之前问题的回答](https://stackoverflow.com/questions/10856882/r-interpolated-polar-contour-plot)绝对可以帮助你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T22:23:52.727

这似乎已经修复。我没有查看更改日志来确定更改发生的位置，但它至少在 plotrix 3.5-12 中已修复。

```
library(plotrix)
polar.plot(c(0,1,3,4),c(30,60,90,120),start=90,clockwise=TRUE,rp.type="s",point.symbols=19,radial.lim=c(0,5),boxed.radial=F,grid.col="red",point.col="green") 
```

![极坐标图](../Images/b10849320e36ea284b037c029a21ce69.png)

目前，轴已正确绘制在数据点下方。标签（合理地）绘制在顶部。如果需要让数据覆盖标签，上面讨论的 overplot 选项会很好地工作。

# javascript - 将两个 javascript 对象合并到新键：值对象

> ID：15347186
> 
> 赞同：0
> 
> 时间：2013-03-11T19:43:21.007
> 
> 标签：javascript, jquery

将这两个对象合并为一个并添加键的最佳方法是什么。我已经尝试了很多，但我对 javascript 在对象和数组上的工作方式感到迷茫......谁能引导我走向正确的方向？使用纯 JS 或 jquery。

**对象 1**

```
["EUR 1,99", "EUR 0,99", "EUR 4,99", "EUR 2,29", "EUR 1,43", "EUR 1,60", "EUR 1,79", "EUR 1,79", "EUR 1,39", "EUR 6,30", "EUR 1,43", "EUR 1,78", "EUR 1,90", "EUR 1,24", "EUR 1,41"] 
```

**对象 2**

```
["Popken", "Lucky Animal", "mein-terrarium", "zooup", "zoofair", "XL-Hundeshop", "tiierisch-de", "Zoo Galaxie", "Petshop", "Danto GmbH", "Heimtierbedarf-Mazinke", "TIERKOSMOS", "Gazoma", "Zooheld", "dasko24"] 
```

**所需对象**

```
[[Price="EUR 1,99",Name="Popken"],[Price="EUR 0,99",Name="Lucky Animal"],[Price="EUR 4,99",Name="mein-terrarium"], etc....] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:46:53.730

```
var newList = [];

for(var i=0; i<obj1.length; i++){
    newList.push({
        Price: obj1[i],
        Name: obj2[i]
    });
} 
```

这没有错误处理，并且可能有更好的方法使用 Array 的 map 函数，但只要两个原始对象的长度相同，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:48:24.793

应该很简单。假设`arr1`您的数组带有价格，并且`arr2`您的数组带有名称：

```
var newarr = [],
    len = (number of items);

for(var i=0;i<len;i++){
    newarr.push({
        Price:arr1[i];
        Name:arr2[i];
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:53:26.613

在 underscore.js 中使用 zip 函数的解决方案

```
var prices = ["EUR 1,99", "EUR 0,99", "EUR 4,99", "EUR 2,29", "EUR 1,43", "EUR 1,60", "EUR 1,79", "EUR 1,79", "EUR 1,39", "EUR 6,30", "EUR 1,43", "EUR 1,78", "EUR 1,90", "EUR 1,24", "EUR 1,41"];

var products = ["Popken", "Lucky Animal", "mein-terrarium", "zooup", "zoofair", "XL-Hundeshop", "tiierisch-de", "Zoo Galaxie", "Petshop", "Danto GmbH", "Heimtierbedarf-Mazinke", "TIERKOSMOS", "Gazoma", "Zooheld", "dasko24"];

var result = _.map(_.zip(products, prices), function(arr) {
    return {
        Price: arr[1],
        Name: arr[0]
    };
});

console.log(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T22:05:19.417

这是一个通用的解决方案——它将“折叠”一个对象，以便您获得对象列表而不是列表对象。

```
function refold_list_from_object(data) {
    "use strict"    
    var keys = Object.keys(data),
        descriptor = {configurable: true, enumerable: true, writable: true, value: null},
        properties = keys.reduce(function(p, k){
            p[k] = descriptor
            return p
        }, {}),
        nrecords = Math.max.apply(null, keys.map(function(k){return data[k].length})),
        records  = [], vi
    function makerecord() {
        return Object.create(null, properties)
    }
    function record_from_value_index(vi) {
        return keys.reduce(function(obj, k) {
            obj[k] = data[k][vi] || null
            return obj
        }, makerecord())
    }
    for (vi = 0; vi < nrecords; vi++) {
        records.push(record_from_value_index(vi))
    }
    return records
} 
```

`data`应该是一个对象，列表由它们的字段名索引：

```
var data = {
    Price: ["EUR 1,99", "EUR 0,99", "EUR 4,99", "EUR 2,29", "EUR 1,43", "EUR 1,60", "EUR 1,79", "EUR 1,79", "EUR 1,39", "EUR 6,30", "EUR 1,43", "EUR 1,78", "EUR 1,90", "EUR 1,24", "EUR 1,41"],
    Name: ["Popken", "Lucky Animal", "mein-terrarium", "zooup", "zoofair", "XL-Hundeshop", "tiierisch-de", "Zoo Galaxie", "Petshop", "Danto GmbH", "Heimtierbedarf-Mazinke", "TIERKOSMOS", "Gazoma", "Zooheld", "dasko24"],
    // An extra field to demonstrate padding:
    Description: ['Foo', 'Bar', 'Baz']
}

var recordlist = refold_list_from_object(data) 
```

`recordlist`看起来像这样：

```
[
  {"Price":"EUR 1,99", "Name":"Popken",         "Description":"Foo"},
  {"Price":"EUR 0,99", "Name":"Lucky Animal",   "Description":"Bar"},
  {"Price":"EUR 4,99", "Name":"mein-terrarium", "Description":"Baz"},
  {"Price":"EUR 2,29", "Name":"zooup",          "Description":null},
  {"Price":"EUR 1,43", "Name":"zoofair",        "Description":null},
  {"Price":"EUR 1,60", "Name":"XL-Hundeshop",   "Description":null},
  {"Price":"EUR 1,79", "Name":"tiierisch-de",   "Description":null},
  {"Price":"EUR 1,79", "Name":"Zoo Galaxie",    "Description":null},
  {"Price":"EUR 1,39", "Name":"Petshop",        "Description":null},
  {"Price":"EUR 6,30", "Name":"Danto GmbH",     "Description":null},
  {"Price":"EUR 1,43", "Name":"Heimtierbedarf-Mazinke", "Description":null},
  {"Price":"EUR 1,78", "Name":"TIERKOSMOS",     "Description":null},
  {"Price":"EUR 1,90", "Name":"Gazoma",         "Description":null},
  {"Price":"EUR 1,24", "Name":"Zooheld",        "Description":null},
  {"Price":"EUR 1,41", "Name":"dasko24",        "Description":null}
] 
```

# matlab - Matlab - 匿名函数作为输入参数

> ID：15347187
> 
> 赞同：0
> 
> 时间：2013-03-11T19:43:21.973
> 
> 标签：matlab

下面我在 Matlab 中有一个泰勒多项式计算器的函数

```
function j= taylor(f,a,b,n)
syms p d x;
p=0;
d=f;
for i=[0:n];
    p=p+subs(d,a)*((x-a)^i)/(factorial(i));
    d=diff(d);
end
j=subs(p,b); 
```

当我用这个测试它时：taylor(@(x) exp(x),0,2,5)，它返回错误。但是当我像这样测试它时它不会返回错误 taylor(x,exp(x),0,2,5)

当我以这种格式使用匿名函数时，如何修复它以确保没有错误：@(x) 作为输入？

# java - 如何根据当前地图过滤器和标记具有的 HashMap 字符串组合设置 Google 地图标记图标

> ID：15347190
> 
> 赞同：0
> 
> 时间：2013-03-11T19:43:30.163
> 
> 标签：java, icons, hashmap, google-maps-markers, android-maps-v2

如果有人对实现代码以设置地图标记图标的最有效方法有任何建议，那将非常有帮助：

*   用户定义的过滤器指定要显示的标记（`boolean`）
*   包含在`HashMap<String, Integer>`与标记相关联的键 - in`class CrimePoint`

**过滤器用户定义的选项：**

```
 boolean displayAntiSocialBehaviourMarkers;
    boolean displayBurglaryMarkers;
    boolean displayCriminalDamageArsonMarkers;
    boolean displayDrugsMarkers;
    boolean displayOtherTheftMarkers;
    boolean displayPubDisorderWeaponsMarkers;
    boolean displayRobberyMarkers;
    boolean displayShopliftingMarkers;
    boolean displayVehicleCrimeMarkers;
    boolean displayViolentCrimeMarkers;
    boolean displayOtherCrimeMarkers; 
```

每个标记都是用`CrimePoint`一个类创建的，该类包含绘制标记所需的所有信息

**犯罪点类变量：**

```
private final Double latitude;
private final Double longitude;
private final String title;

//SNIPPET
//The HashMap storing the categories associated with this CrimePoint.
//Category name is the key and the number of crimes in that category is the Value
//
private Map<String, Integer> crimeCategories;

//An integer to hold the references to the icon image to use
//Example: R.drawable.image002;
private int iconResource; 
```

**标记图标：**

地图有**12 个**不同的标记图标。每个过滤器选项一个 [如上所示] 和一个特殊情况标记（多重犯罪），其中：
-`CrimePoint`具有多个犯罪类别 ( `crimeCategories.size() > 1`)**并且**
- 包含在其中的多个犯罪类别`CrimePoint`使用过滤器选项设置为可见

仅当显示一个（或多个）犯罪类别时才会绘制标记。

任何帮助或建议都会很棒，因为我花了很长时间来处理我需要的逻辑并且没有想出太多。

注意：每次用户更改过滤器选项时，都需要调用此函数来更改地图上的图标和隐藏/显示标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:21:35.150

首先，你应该考虑改变你的表现。从列举犯罪类型开始：

```
enum CrimeType { AntiSocialBehaviour, ..., Count } 
```

现在您的标志可以创建为枚举集：

```
EnumSet<CrimeType> showMarkers = new EnumSet<CrimeType>(); 
```

这就像普通的 Java 一样工作，`Set`但效率更高。如果不需要散列的力量，请在标记中使用它们而不是散列。

要打开和关闭标记，请注意[文档中的可见性属性](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker)。更改过滤器标志时，遍历标记列表以适当地设置可见性。然后使地图片段或视图无效。绘制时间将支配可见性设置时间，因此这是尽可能高效的。

我推断您对效率的问题有很多标记。如果您有太多标记以致地图因重叠而变得混乱，那么您必须实施一种合并算法来用一个表示多个标记。我早些时候在这个主题上发布了[这个问题，但没有收到任何回复。](https://stackoverflow.com/questions/11748150/deconflicting-markers-in-map-overlays)我的解决方案在那里解释得很好，虽然没有我想要的那么快（2-3 秒，Nexus 平板电脑上有大约 15,000 个标记）。

对于非标准标记外观，请研究[“更改默认标记”下的文档](https://developers.google.com/maps/documentation/android/marker)。

这很清楚。如果您有具体问题并显示代码，我们可以提供详细信息。

# java - 为什么我的进程终止？

> ID：15347191
> 
> 赞同：6
> 
> 时间：2013-03-11T19:43:33.080
> 
> 标签：java, multithreading, process

我有一个 Runnable 对象，它运行一个 ping 操作 -

```
Runnable r1 = new Runnable() {
            @Override
            public void run() {
                try{
                    List<String> commands = new ArrayList<String>();
                    commands.add("ping");
                    commands.add("-c");
                    commands.add("10");
                    commands.add("google.com");

                    System.out.println("Before process");
                    ProcessBuilder builder = new ProcessBuilder(commands);
                    Process process = builder.start();

                    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
                    String line = null;
                    while ((line=reader.readLine()) != null){
                        System.out.println(line);
                    }
                    process.waitFor();
                    System.out.println("After process");

                }catch (Exception ex){
                   ex.printStackTrace();
                }
            }
        }; 
```

如果我像这样在当前线程中启动它：

```
r1.run(); 
```

我得到这个输出：

```
Before process
PING google.com (173.194.32.33): 56 data bytes
64 bytes from 173.194.32.33: icmp_seq=0 ttl=53 time=34.857 ms
64 bytes from 173.194.32.33: icmp_seq=1 ttl=53 time=39.550 ms
64 bytes from 173.194.32.33: icmp_seq=2 ttl=53 time=44.212 ms
64 bytes from 173.194.32.33: icmp_seq=3 ttl=53 time=38.111 ms
64 bytes from 173.194.32.33: icmp_seq=4 ttl=53 time=39.622 ms
64 bytes from 173.194.32.33: icmp_seq=5 ttl=53 time=41.391 ms
64 bytes from 173.194.32.33: icmp_seq=6 ttl=53 time=41.280 ms
64 bytes from 173.194.32.33: icmp_seq=7 ttl=53 time=39.645 ms
64 bytes from 173.194.32.33: icmp_seq=8 ttl=53 time=35.931 ms
64 bytes from 173.194.32.33: icmp_seq=9 ttl=53 time=38.245 ms

--- google.com ping statistics ---
10 packets transmitted, 10 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 34.857/39.284/44.212/2.575 ms
After process 
```

但是，如果我在这样的新线程中运行它：

```
 Thread thread = new Thread(r1);
    thread.start(); 
```

我明白了：

```
Before process 
```

为什么输出不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T19:45:46.653

如果您在单独的线程中运行，您的主线程可能会在之前完成，因此您`r1`将没有足够的时间来完成。如果您从当前线程开始，您将等到完成。尝试`thread.join()`在开始后添加，看看发生了什么。

# ios - 在 UITableViewCell 上单击附件时的运行方法

> ID：15347192
> 
> 赞同：0
> 
> 时间：2013-03-11T19:43:34.277
> 
> 标签：ios, objective-c, uitableview

我有一个带有几个 UITableViewCells 的 UITableView，它们都是静态单元格，因为它是由用户填写的表单。在其中一个单元格上，我有一个附件图标，我想在按下按钮时运行一个方法（在当前视图上选择日期选择器），似乎没有任何 TouchUpInside 或类似内容。我浏览了文档，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:49:24.847

如果您使用的是标准附件类型之一，则`tableView:accessoryButtonTappedForRowWithIndexPath:`当点击附件时，表格视图将发送给它的委托。

如果您将 a 设置`UIButton`为自定义附件视图，则可以将 a 连接`UIButton`到`IBAction`您的视图控制器。

如果您使用一些自定义`UIView`子类作为附件视图，则可以`UITapGestureRecognizer`向其中添加一个并将识别器设置为`IBAction`向您的视图控制器发送一个。

# android - 将文件写入 getFilesDir() 失败 - NoSuchElementException

> ID：15347193
> 
> 赞同：1
> 
> 时间：2013-03-11T19:43:38.793
> 
> 标签：android, file, fileinputstream, filewriter

这就是我正在做的事情：

1-从我的资产中获取文件并将其放入字符串中-成功

2-制作文件`getFilesDir()`-失败（还没有崩溃）

3- 使用 - FAILS 将我得到的字符串写入此文件`FileWriter`（还没有崩溃）

4-阅读我刚刚制作的新文件 - 失败（抛出 NoSuchElementException）

这是你必须看到的东西：

我使用的一个有用的小方法：

```
public String inputStreamToString(InputStream stream){

        Scanner s = new Scanner(stream).useDelimiter("\\A");
        String aa = s.next();
        return aa;

    } 
```

MainActivity.java 的片段：

```
//B2 and text are a well defined Button and TextView respectively, ensured through previous testings
B2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                AssetManager as = getAssets();
                InputStream stream = null;
                try {
                    stream = as.open("updater-script");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Scanner s = new Scanner(stream).useDelimiter("\\A");
                String aa = s.next();
                text.setText(aa);

                File file = new File(getFilesDir() + "/updater-script");
                try {
                    boolean b = file.createNewFile(); //returns false, indicating the file wasn't made
                    text.setText(text.getText()+String.valueOf(b));
                    new File(getFilesDir().getAbsolutePath()).mkdirs();
                    FileWriter write = new FileWriter(getFilesDir().toString()+File.pathSeparator+"updater-script");
                    Show(getFilesDir().toString());
                    write.write(aa);
                    write.close();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                }
        });
        B2.setOnLongClickListener(new View.OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                File file = new File(getFilesDir(), "updater-script");
                try {
                    FileInputStream in = new FileInputStream(file);
                    String aa = inputStreamToString(in);
                    text.setText(aa);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return true;
            }
        }); 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="seaskyways.testingproject"
    android:versionCode="1"
    android:versionName="beta" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STROAGE"/>
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name="seaskyways.testingproject.MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Holo"
            android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.testingproject.MenuActivity"
            android:label="@string/title_activity_menu" >
        </activity>
        <activity
            android:name="seaskyways.testingproject.Splash"
            android:label="@string/title_activity_splash"
            android:theme="@style/Theme.Sherlock.Dialog" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.testingproject.HorizontalScrollView"
            android:label="@string/title_activity_splash" >
            <intent-filter>
                <action android:name="android.intent.action.HSV" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.testingproject.ExpandableLists"
            android:label="@string/title_activity_expandable_lists"
            android:parentActivityName="seaskyways.testingproject.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="seaskyways.testingproject.MainActivity" />
        </activity>
        <activity
            android:name="seaskyways.testingproject.SwipeStrips"
            android:label="@string/title_activity_swipe_tabs"
            android:parentActivityName="seaskyways.testingproject.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="seaskyways.testingproject.MainActivity" />
        </activity>
        <activity
            android:name="seaskyways.testingproject.SwipeTabs"
            android:label="@string/title_activity_swipe_tabs"
            android:parentActivityName="seaskyways.testingproject.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="seaskyways.testingproject.MainActivity" />
        </activity>
    </application>

</manifest> 
```

堆栈跟踪 ：

```
03-11 21:23:08.241: E/AndroidRuntime(3958): FATAL EXCEPTION: main
03-11 21:23:08.241: E/AndroidRuntime(3958): java.util.NoSuchElementException
03-11 21:23:08.241: E/AndroidRuntime(3958):     at java.util.Scanner.next(Scanner.java:1007)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at java.util.Scanner.next(Scanner.java:980)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at seaskyways.testingproject.MainActivity.inputStreamToString(MainActivity.java:44)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at seaskyways.testingproject.MainActivity$7.onLongClick(MainActivity.java:171)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.view.View.performLongClick(View.java:4240)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.widget.TextView.performLongClick(TextView.java:8060)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.view.View$CheckForLongPress.run(View.java:17339)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.os.Handler.handleCallback(Handler.java:725)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.os.Looper.loop(Looper.java:137)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at android.app.ActivityThread.main(ActivityThread.java:5237)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at java.lang.reflect.Method.invokeNative(Native Method)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at java.lang.reflect.Method.invoke(Method.java:511)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-11 21:23:08.241: E/AndroidRuntime(3958):     at dalvik.system.NativeStart.main(Native Method) 
```

请不要解决方法，因为我有未来的计划......感谢您的帮助！如果您需要更多信息，请在此处，评论框向下几厘米：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:52:56.380

从[本文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)中，我了解到您实际上应该使用[.hasNext()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext%28%29)保护您的 .next() 调用。

例如这里：

```
public String inputStreamToString(InputStream stream){

    Scanner s = new Scanner(stream).useDelimiter("\\A");
    if (s.hasNext()){
       return s.next();
    }else{
       return null;
    }       
} 
```

而且，如果您的权限写入正确，则此

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STROAGE"/> 
```

权限实际上并不存在。它应该是

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:52:42.040

我说：“boolean b = file.createNewFile(); //returns false,表示文件没有被制作”这不是真的，b = false没有任何例外意味着文件已经被制作了......但是崩溃是因为创建的文件没有任何要读取的文本，这将导致崩溃，因为我什么都没读...

所以要纠正它，我不需要任何权限，只需要 Java ......我所要做的就是在尝试读取该文件之前向该文件写入一些内容，或者对我的类进行编程，这给了我一个`String`返回的`InputStream`东西而不是什么都没有，崩溃：

所以第一个解决方案是这样的：

```
File file = new File(get_data_dir(getApplicationContext()), "updater-script");
                try {

                    InputStream stream = null;
                    try {
                        stream = getAssets().open("updater-script");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    FileOutputStream ou = new FileOutputStream(file);
                    byte[] buffer = inputStreamToString(stream).getBytes();
                    ou.write(buffer);//Now the file has something to be read ...

                    FileInputStream in = new FileInputStream(file);

                    String aa = inputStreamToString(in); 
```

第二个似乎更容易的解决方案是：

```
public String inputStreamToString(InputStream stream){
        String aa;
        Scanner s = new Scanner(stream).useDelimiter("\\A");
        if(s.hasNext()){
            aa = s.next();
        }else{
            aa = "";
        }

        return aa;//Now it returns something no matter what ...

    } 
```

# sql - 同时检索“计数位置”和总体计数

> ID：15347194
> 
> 赞同：1
> 
> 时间：2013-03-11T19:43:38.927
> 
> 标签：sql, sqlite

我有一个餐厅评分和评论数据库，每家餐厅可能有 1 到 1000 条评论。

我首先尝试查找哪些餐厅的评论中包含“taco”这个词的评论最多 4+，然后我使用下面的代码让它工作：

```
 select id, count(id) from test where (comment like '%taco%') AND rating >= 3 group by id order by count(id) DESC; 
```

因此，例如，如果 X 餐厅有 30 条 4+ 包含“taco”的评分评论，我会为该行获得“X|30”。

我想添加两个附加功能：

1.  列出每家餐厅的评论总数（无条件）
2.  对包括“taco”在内的所有餐厅评论进行平均评分。

如果餐厅 X 总共有 150 条评论，其中 30 条评分为 4+，包括“taco”，这 30 条评论的平均评分为 2.5，我会得到：

'X|30|150|2.5|'

我如何得到这个结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:50:50.950

这样的事情可能会奏效。

```
select id
, count(*) totalreviews
, sum(case when rating >= 3 and comment like '%taco%' then 1 else 0 end) ratings4plus
, avg(case when rating >= 3 and comment like '%taco%' then rating else null end) avgratings4plus
from test
group by id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:52:06.783

这是未经测试的，但你可以尝试类似

```
select id,
       count(id), 
       sum(case when (comment like '%taco%' and rating >=3) then 1 
                else 0 end) taco_rating, 
       avg(case when comment like '%taco%' then rating else null end ) avg_taco
  from test
 group by id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:50:46.983

使用子查询：

```
SELECT id,
       (SELECT COUNT(*)
        FROM test
        WHERE id = t1.id
          AND comment LIKE '%taco%'
          AND rating >= 3),
       (SELECT COUNT(*)
        FROM test
        WHERE id = t1.id),
       (SELECT AVG(rating)
        FROM test
        WHERE id = t1.id
          AND comment LIKE '%taco%'
          AND rating >= 3),
FROM (SELECT DISTINCT id
      FROM test) AS t1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:55:26.553

对于`4+`，您的测试应该是`rating > 3`而不是`rating >= 3`，但这会做到：

```
select
    id,
    sum(case when comment like '%taco%'
            AND rating > 3 then 1 else 0 end) as rating4plus_count,
    count(*) as all_ratings_count,
    avg(case when comment like '%taco%'
            AND rating > 3 then rating else null end) as rating4plus_avg
from test
group by id
order by 1 DESC; 
```

注意简写`order by 1`，这是按“列号 1”排序的 SQL 标准方式（而不是在 order by 子句中重复列 1 的表达式）

# android - 有什么更好的方法在 List Adabpter 中的行项目上实现 OnClickListner

> ID：15347197
> 
> 赞同：0
> 
> 时间：2013-03-11T19:43:59.150
> 
> 标签：android, listview

我已经实现了自定义适配器并在列表行中有多个视图（ImageView、TextView）。我想在每一个上设置监听器。

这就是我所做的

```
if (containerRow == null)  { 
viewHolder.item.setOnClickListener(new OnImageViewClickListener(position, context, viewHolder));
} 
```

现在这给了我在 OnImageViewClickListener 中的错误位置，因为 viewHolder.item.setOnClickListener 在（containerRow == null）时只被调用一次。如果我在其他部分执行此操作，而不是为多个项目（ImageView、TextView）和该行数创建大量侦听器对象（对吗？）

据我了解，我无法在 ListView 的 setOnItemClickListener 中实现这一点，因为我无法获得用户点击的项目。

请建议我一些巧妙的方法来在这些行项目上实现监听器并获得正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:14:50.823

这似乎适用于 ListItem 是一个包含列表项数据的 POJO ......

```
public class ListItemAdapter extends ArrayAdapter<ListItem>
{
    private static final String TAG    = "ListItemAdapter";
    private Activity            mContext;
    private int                 mLayoutResourceId;
    private List<ListItem> mItems = null;

static class ViewHolder
{
    public TextView  text1;
    public TextView  text2;
    public ImageView image;
}

public ListItemAdapter(Activity context, int textViewResourceId, List<ListItem> items)
{
    super(context, textViewResourceId, items);
    mContext = context;
    mLayoutResourceId = textViewResourceId;
    mItems = items;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View v = convertView;
    if (v == null)
    {
        LayoutInflater inflater = mContext.getLayoutInflater();
        v = inflater.inflate(mLayoutResourceId, parent, false);

        ViewHolder viewHolder = new ViewHolder();
        viewHolder.text1 = (TextView) v.findViewById(android.R.id.text1);
        viewHolder.text1.setOnClickListener(new ItemClickListener(position));
        viewHolder.text2 = (TextView) v.findViewById(android.R.id.text2);
        viewHolder.text2.setOnClickListener(new ItemClickListener(position));
        viewHolder.image = (ImageView) v.findViewById(android.R.id.icon);
        viewHolder.image.setOnClickListener(new ItemClickListener(position));

        v.setTag(viewHolder);
    }

    ListItem item = mItems.get(position);
    Log.v(TAG, item.toString());

    ViewHolder holder = (ViewHolder) v.getTag();

    String text = item.getText1();
    holder.text1.setText(text);

    text = item.getText2();
    holder.text2.setText(text);

    Drawable img = item.getImage();
    Log.v(TAG, "image : " + img);

    holder.image.setImageDrawable(img);
    return v;
}

class ItemClickListener implements View.OnClickListener
{
    int position;

    public ItemClickListener(int pos)
    {
        this.position = pos;
    }

    public void onClick(View v)
    {

        Toast.makeText(mContext, "Item clicked in row - " + position, Toast.LENGTH_SHORT).show();

    };
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:01:24.300

将位置设置为每个视图的标签，并在每个可点击视图上设置监听器

将监听器定义为内部类，并从视图中获取标签

```
if (containerRow == null)  { 
    ....
    ....
    viewHolder.txv.setOnClickListener(clickListener);
    viewHolder.img.setOnClickListener(clickListener);
    .....
    .....
}else{
    viewHolder = containerRow.getTag();
}

viewHolder.txv.setTag(position);
viewHolder.img.setTag(position); 
```

OnClickListener：

```
private View.OnClickListener clickListener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Integer position = (Integer) v.getTag();
        // you have the correct position
        switch(v.getId()){
        ......
        ......
        }
    }
}; 
```

# c++ - 与DLL混淆。没有 .lib 或 .h

> ID：15347200
> 
> 赞同：0
> 
> 时间：2013-03-11T19:44:04.653
> 
> 标签：c++, dll, com

我目前有一个使用 32 位 dll 的 C# 项目。我想做的是在 C++ 项目中使用 dll，不幸的是，项目中引用的 dll 没有附带 .h 或 .lib 文件，所以我对如何访问 dll 中的类或使用感到困惑我的 C++ (Visual Studio 2010) 项目中的 dll 文件。[我在这里](https://stackoverflow.com/questions/8578871/how-to-use-a-dll-without-the-need-of-its-h-and-lib-files-in-a-vc-6-0-project)读到，如果一个 dll 文件包含类，它很有可能是一个 COM 组件。关于我应该查看什么以便在该 dll 中集成和使用方法和对象的任何建议。

**更新：**

我通过导入语句检查它是否是 COM。但是我得到一个“找不到 .tlb 文件”。然后我决定使用依赖walker来检查任何导出的方法（对象），似乎没有。我单击了主文件（已突出显示）并且看不到任何导出的函数。关于下一步我应该检查什么的任何提示？这是我从依赖步行者那里得到的。 ![在此处输入图像描述](../Images/8cd725ed0915efe4bf89877f82dfd2bc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:51:43.893

只有一个 .dll 而没有相应的 .h 或 .exp，您可能会尝试查找的一个地方是导出表。[Dependency Walker](http://dependencywalker.com/)等工具可以向您显示此信息。

Dependency Walker 的一个警告是，您需要为二进制文件（您的 DLL）使用正确的版本（x86 或 x86_64）。如果您不确定，请选择一个版本并尝试加载它。在中央面板的 CPU 列下，查看它是否显示“x64”或“x86”，以确定您应该使用哪一个。

使用提供的 Dependency Walker 屏幕截图（表明依赖于 MSCOREE.DLL），我同意 Eugene 的观点——这很可能是一个 .NET 库，而不是 COM 库。您将需要检查有关从 C/C++ 调用 .NET 托管代码的其他问题之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:45:39.067

dll 很可能是一个 .Net 程序集（看到它导入 mscoree.dll），所以您可能想要这个：[如何从 C/C++ 调用 .NET 程序集？](https://stackoverflow.com/questions/106033/how-do-i-call-a-net-assembly-from-c-c)

# jquery - jsonpCallback 没有调用函数

> ID：15347201
> 
> 赞同：1
> 
> 时间：2013-03-11T19:44:07.730
> 
> 标签：jquery, ajax, jsonp

这是我无法工作的 jquery 片段。我正在尝试通过 jsonpCallback 调用 blackBackground()

```
$(document).ready(function()
{

    function blackBackground(data, status)
    {
        console.log("black background");
            //I want to eventually change the body style to black
    }

    $.ajax({
        url: 'http://localhost:3000/someurl',
        dataType: 'jsonp',

        jsonp: false,
        jsonpCallback: 'blackBackground'
    });

}); 
```

更新：

```
jsonpCallback: 'blackBackground' 
```

到

```
jsonpCallback: blackBackground 
```

连同将 blackBackground 移动到全局范围。感谢所有的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:47:05.063

这里的问题是该函数`blackBackground`在全局范围内不可用。

您可以通过像这样声明它来在全局范围内公开该函数：

```
window.blackFunction = function(){ .. } 
```

...或在 ajax 配置中使用匿名函数：

```
jsonpCallback: function(result){ .. } 
```

我推荐后者，因为它会让你的全局范围更整洁:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:48:28.630

> “这是我的 JSONP”

那是 JSON，不是 JSONP。

由于您指定`jsonp: false`了 ，因此您需要自己在全局范围内定义回调。

```
function blackBackground(data, status)
{
    console.log("black background");
        //I want to eventually change the body style to black
}
// document ready isn't really needed here either, but you can make that choice.
$(document).ready(function()
{   
    $.ajax({
        url: 'http://localhost:3000/someurl',
        dataType: 'jsonp',
        jsonp: false,
        jsonpCallback: 'blackBackground'
    });

}); 
```

并且您的服务器应该响应：

```
blackBackground({
    "name": "async-poll",
    "description": "api for asynchronous polls",
    "version": "0.0.1",
    "dependencies": {
        "express": "3.x"
    }
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T20:11:04.507

去掉单引号

```
jsonpCallback: blackBackground 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:51:32.540

~~`dataType: "jsonp"`~~

~~不是有效的数据类型。~~要执行 jsonp，您需要添加`callback=?`到 URL 查询字符串

`url: 'http://localhost:3000/someurl?callback=?',`

# mysql - Mysql，结合子查询或临时表查询结果

> ID：15347203
> 
> 赞同：1
> 
> 时间：2013-03-11T19:44:14.900
> 
> 标签：mysql, subquery, temp-tables

我在以下情况下遇到了一些麻烦：我有一个创建两个临时表的查询，以及以下选择将它们连接在一起 -

```
 SELECT * FROM result 
    INNER JOIN result2 ON result2.packetDetailsId = result.packetDetailsId 
```

然后，我尝试通过连接一些结果字段来创建另一列，然后使用它来引用/查询另一个表。有没有办法在一个查询中完成这个？我应该远离临时表吗？

再次提前感谢您。

* * *

更新：如果我尝试为两个临时表的组合设置别名，我会收到一条错误消息，指出 [Err] 1060 - Duplicate column name 'packetDetailsId'

```
 select * from (
    SELECT * FROM result 
    INNER JOIN result2 ON result2.packetDetailsId = result.packetDetailsId) as myalias 
```

* * *

另一个更新：我几乎让它作为一个查询工作，但我在我连接的列中得到结果“（BLOB）”：

```
 select packet_details.packetDetailsId,products.productId,Credit,AccountNum,OrderStat,          CONCAT(products.productId,Credit,'_',OrderStat) as consol from (
    select packetDetailsId, GROUP_CONCAT(Credit) AS Credit, GROUP_CONCAT(AccountNum) AS AccountNum, GROUP_CONCAT(OrderStat) AS OrderStat FROM
 ( SELECT pd_extrafields.packetDetailsId,
CASE WHEN pd_extrafields.ex_title LIKE ('%Credit%') 
THEN pd_extrafields.ex_value ELSE NULL END as Credit,
CASE WHEN pd_extrafields.ex_title LIKE ('%Account%') 
THEN pd_extrafields.ex_value ELSE NULL END as AccountNum,
CASE WHEN pd_extrafields.ex_title LIKE ('%Existing%') 
THEN pd_extrafields.ex_value ELSE NULL END as OrderStat
FROM pd_extrafields  )AS TempTab GROUP BY packetDetailsId ) as alias2

    INNER JOIN packet_details ON alias2.packetDetailsId = packet_details.packetDetailsId 
```

在 packet_details.packetDetailsId = sales.packetDetailsId 上的 INNER JOIN sales

在 sales.saleId = sold_products.saleId 内加入已售产品

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:47:56.470

如果我理解正确，您已经创建了临时表，您需要“连接”结果，使用`from ... inner join ...`

您可能遇到的唯一限制是您只能在子句中引用临时表*一次；*`from`除此之外，没有其他限制（我经常使用临时表作为创建最终结果的中间步骤）。

* * *

## 尖端

假设您的临时表是`temp_result1`and `temp_result2`。两个表都有一个字段`packedDetailsId`，将在该字段上执行连接。请记住在每个表上创建适当的索引；至少您需要`packedDetailsId`在两个表上建立索引：

```
alter table temp_result1
    add index PDI(packedDetailsId);
alter table temp_result2
    add index PDI(packedDetailsId); 
```

现在，只需使用所需的连接和连接执行查询。如果`concat`返回`BLOB`，则将结果转换为`char`（当然，我假设您需要一个文本字符串）：

```
select r1.*, r2.*, cast(concat(r1.field1, ',', r2.field2) as char) as data_concat
from temp_result1 as r1
    inner join temp_result2 as r2 on r1.packedDetailsId = r2.packedDetailsId; 
```

我看到你的问题是`GROUP_CONCAT`返回`BLOB`值......这很正常（MySQL 不知道如何*先验*地返回值，所以它返回二进制数据）；只需使用该`cast`功能。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:51:37.957

因此，如果 result2 和 result 都是临时表，则必须包含 # if local temp table 和 ## if global temp table

所以你的陈述应该是：

```
SELECT * FROM #result 
INNER JOIN #result2 ON #result2.packetDetailsId = #result.packetDetailsId 
```

我的错。这仅适用于 MS SQL

# javascript - jquery选项卡通过单击链接阻止打开新的浏览器窗口

> ID：15347205
> 
> 赞同：0
> 
> 时间：2013-03-11T19:44:25.650
> 
> 标签：javascript, jquery, jquery-ui, jquery-tabs

您好，我对 jQuery 很陌生，我正在尝试使用带有 ajax 加载内容的选项卡。类菜单中的链接工作正常，但页脚中的链接也应加载到 tab-spacer div 中（现在不使用）。

也许制表符对我来说也不正确，我只想在制表符间隔 div 中加载 ajax 内容。我想显示来自这个 div 中任何链接的任何内容。我希望你能帮帮我！

这是我的代码

```
 <head><link rel="stylesheet" href="js/css/jquery-ui.css" />
<script src="js/jquery/js//jquery-1.9.1.js"></script>
<script src="js/jquery/js/jquery-ui-1.10.1.custom.js"></script><script>
  $(function() {
    $( "#tabs" ).tabs({
      beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
          ui.panel.html(
            "Error" );
        });
      }
    });
  });
  </script>

<script>
$('#tabs').tabs({
    load: function(event, ui) {
        $(ui.panel).delegate('a', 'click', function(event) {
            $(ui.panel).load(this.href);
            event.preventDefault();
        });
    }
});
</script>
</head>
<body>
<div class="wrapper">

      <div class="container">

        </div>
        <div id="tabs">
        <div class="menu">
        <ul>
        <li><a href="#tabs-1">home</a></li>
        <li><a href="ajax/content1.html">1</a></li>
        <li><a href="ajax/content2.html">2</a></li>
        <li><a href="ajax/content3.php">3</a></li>

        </ul>
        </div>
        <div id="tabs-spacer" class="tabs-spacer tab-style"></div>
        <div id="tabs-1">
      <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tortor velit, suscipit at luctus vitae, lobortis facilisis arcu. Suspendisse potenti. Quisque tempor magna a lorem tempor luctus. Curabitur erat nisl, rutrum adipiscing imperdiet ac, elementum et magna. Vivamus id erat sapien. Nam sapien justo, elementum vel blandit commodo, tristique ac ligula. Duis interdum, elit sit amet molestie hendrerit, ligula lacus consequat tortor, sed tempor arcu velit vel nibh. Etiam condimentum erat at mauris malesuada sollicitudin tincidunt mi ultricies. In hac habitasse platea dictumst. Duis mollis, turpis at porttitor pharetra, magna tellus faucibus libero, ut vehicula tortor nunc quis erat. Nunc tristique nibh eu sapien cursus ac imperdiet eros malesuada. </p>

     </div><div class="footer"><ul><li><a href="ajax/4.php" id ="link">4</a></li>
                                                                 <li><a href="ajax/5.php" id ="link">5</a></li>
                                   <li><a href="ajax/6.php" id ="link">6</a></li>

     </ul></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:40:18.260

只需使用

```
$('#link').click(function(){return false;}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:58:00.767

嗯，我真的不明白我做错了什么。我现在正在研究一个没有 jQueryUI 选项卡功能的解决方案

在我的 head 部分中包含 jquery.js 之后，我已经尝试添加这些脚本：

```
$('#link').live('click', function(ev) {
    // Stop regular handling of "click" in most non-IE browsers
    ev.preventDefault();
    ev.stopPropagation();

    // Load the new content into the div (same code you had)
    $('#tabs-spacer').load($(this).attr('href'));

    // Stop regular handling of "click" in IE (and some others)
    return false;
}); 
```

当然，所有链接都有 id =link

我也试过这个：

```
<script>
$('#link').bind('click', function(event) {
    var url = $(this).attr('href');
    $('#tabs-spacer').load(url);
    return false;  // cancel anchor action
});</script> 
```

但是没有任何效果，所有链接都在离开页面时加载。

# java - NetBeans 不会打印到控制台 JAVA

> ID：15347206
> 
> 赞同：0
> 
> 时间：2013-03-11T19:44:25.820
> 
> 标签：java, netbeans

我使用 Java 在 NetBeans IDE 中编写了一个简单的程序。今天早上对 main 方法进行了一些更改后，当我运行程序时，控制台没有打印任何内容。我只是想让它到达 startMenus(sc)。编辑：我现在已经放入了一些 System.out.println() 并且它没有达到“Blah2”，这是在我的第一个循环之后......

```
public class Calculator {

public static int[] NUMBERS;    //global value for the array

public static void main(String[] args) throws FileNotFoundException {      
    File file = new File("data.txt");
    Scanner sc = new Scanner(file);

    System.out.println("Blah1");

    int counter = 0;
    while (sc.hasNextInt()) {
        counter = counter++;
    }

    System.out.println("Blah2");

    int lenth = counter;

    NUMBERS = new int[lenth];

    System.out.println("Blah3");

    sc.close();

    File file2 = new File("data.txt");
    Scanner sc2 = new Scanner(file2);

    System.out.println("Blah4");

    int i = 0;

    while (sc2.hasNextInt()) {
        NUMBERS[i] = sc2.nextInt();
        ++i;
    }

    System.out.println("Blah5");

    sc2.close();

    System.out.println("Welcome to Calculation Program!\n");
    startMenus(sc);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:50:58.990

System.out 调用可能尚未到达，因为您的循环之一执行时间太长，比您愿意等待的时间更长。从循环内部记录一些内容以获得更多反馈，该程序可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:47:34.740

您确定在应用程序到达 System.out.println 之前没有抛出任何其他会杀死您的应用程序的异常吗？从您的描述来看，您可能想要调试或将其他一些 println 语句放在链上，因为它可能会因某些事情而死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:56:57.790

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

public class Calculator {    

    public static int[] NUMBERS;    //global value for the array

    public static void main(String[] args) throws FileNotFoundException, IOException {
    File file = new File("data.txt");
    file.createNewFile();
    Scanner sc = new Scanner(file);

    int counter = 0;
    while (sc.hasNextInt()) {
        counter = counter++;
    }

    int lenth = counter;

    NUMBERS = new int[lenth];

    sc.close();

    File file2 = new File("data.txt");
    file2.createNewFile();
    Scanner sc2 = new Scanner(file2);

    int i = 0;

    while (sc2.hasNextInt()) {
        NUMBERS[i] = sc2.nextInt();
        ++i;
    }

    sc2.close();

    System.out.println("Welcome to Calculation Program!\n");
    startMenus(sc);

}

    private static void startMenus(Scanner sc) {
        System.out.println("Run your code here!!!");
    }
} 
```

几件事：

1.  您需要导入不属于您的核心项目的其他类。Exceptions、File 和 Scanner 都属于这一类。
2.  您需要运行 createNewFile() 方法来实际创建文件。您的原始代码引发了 FileNotFound 异常，因为该文件从未被创建。
3.  您需要在调用它之前定义 startMenus 方法。

我已经包含了一些更正的代码。希望这可以帮助！

# c++ - 完全释放 std::vector 容器的内存

> ID：15347212
> 
> 赞同：2
> 
> 时间：2013-03-11T19:45:02.207
> 
> 标签：c++, memory-management, vector, stl

从[向量文档](http://www.cplusplus.com/reference/vector/vector/)看来，完全解除分配具有类成员指针的值向量的正确方法，例如：

```
std::vector<MyObject>* mvMyObjectVector_ptr;
...
//In the class constructor:
mvMyObjectVector_ptr = new std::vector<MyObject>(); 
```

将是在类的析构函数实现中按顺序调用以下内容

```
mvMyObjectVector_ptr->clear();
delete mvMyObjectVector_ptr; 
```

但是，这似乎会导致 SIGABRT '指针被释放但未分配' 错误。上述成语是否是完全释放由指向向量的指针指向的地址所持有的内存的正确方法（如果是，我假设我的错误来自其他东西）？如果没有，正确的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T19:46:44.857

是的，这是正确的，*前提`mvMyObjectVector_ptr`是已使用`new`*.

此外，`MyObject`需要满足某些要求才能与`std::vector`.

调用`clear()`是多余的，可以省略。

一些可能的原因`SIGABRT`包括：

*   `mvMyObjectVector_ptr`尚未使用`new`;分配
*   `MyObject`违反[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)；
*   包含向量的类违反了三法则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T19:49:41.407

我认为您的问题在于您向我们展示的代码。

这一行：

```
//In the class constructor: 
```

建议你在一个类中使用它而不是正确地**实现三规则。**

一个更好的主意是不使用指向向量的指针。
只需将其声明为普通的自动成员即可。

```
class MyClassContainingVector
{
     public: 
         std::vector<MyObject>          mvMyObjectVector;
                        //   ^^^^^ notice no pointer.
}; 
```

现在它将被正确自动地创建和销毁。
您的构造函数或析构函数都不需要任何代码来管理此对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T19:50:55.437

是的，通过调用动态分配`std::vector`对象`new`并通过调用调用其销毁`delete`将导致内部用于保存其元素的内存被释放。

[然而，遵循RAII 习语](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)并使用具有自动存储持续时间的对象会更简单、更可靠：

```
{
    std::vector<MyObject> myVector;
    ...
} // <-- memory is freed here 
```

当执行离开这个范围时（注意它也可能是由抛出异常等引起的），保证`myVector`对象将被破坏并且内存将被释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:56:14.323

向量通常不应该作为动态分配的指针。*在大多数情况下*，它们应该只是类的成员变量（尽管总是有例外）。如果它们*是*由“new”分配的指针，那么简单的“delete”*应该可以*工作。

向量为您处理内存分配，因此您不必这样做。但是，如果您想真正释放向量中的所有存储内存，即使它在堆栈上，也有一个新函数。

因为矢量。[reserve](http://www.cplusplus.com/reference/vector/vector/reserve/) () 只扩展内存，从不收缩，在 C++11 中，为了释放保留的内存，增加了一个新函数：vector. [收缩到适合](http://www.cplusplus.com/reference/vector/vector/shrink_to_fit/)（）。实现和自由做他们想做的事，但你基本上是在要求实现释放内存，所以他们应该以合理的方式回答请求。

您可以通过以下方式真正清除矢量：

```
vector.clear(); //Erases the elements.
vector.shrink_to_fit(); //Erases the memory no longer needed by the elements. 
```

向量保留其内存的原因是出于性能原因，因此只有在您真正了解它们为什么保留内存并且愿意处理（或知道您不必处理）任何性能时才应该这样做因对内存进行微观管理而产生的命中率。

# php - 自动完成 SQL 查询建议 (Ajax+PHP)

> ID：15347223
> 
> 赞同：1
> 
> 时间：2013-03-11T19:45:45.047
> 
> 标签：php, jquery, mysql, sql, ajax

在制定用于自动完成表单（jquery Axax + PHP）的查询时，我有一个关于 SQL 最佳实践的问题。

让我们假设以下内容：

*   我有一个包含书名的数据库
*   有些书的标题没有定冠词（“The”或“A”），例如“Life of Pi”
*   有些书的标题带有定冠词（“The”或“A”），例如“The Catcher in the Rye”

结果，用户将在开头使用“The”或简单地省略“The”来输入书名并开始查询而没有任何定冠词。

似乎存在三个可能的查询：

```
SELECT 'title' FROM 'books' WHERE 'title' LIKE '%$string' 
```

或者

```
SELECT 'title' FROM 'books' WHERE 'title' LIKE '$string%' 
```

或者

```
SELECT 'title' FROM 'books' WHERE 'title' LIKE '%$string%' 
```

当使用第一个查询方法（其中 % 在字符串之前）时，很难得到任何结果，因为字符串之前的通配符似乎表现错误。

使用第二个查询时，似乎更倾向于在标题前使用“The”进行完全匹配。因此，搜索“麦田里的守望者”的用户会找到这本书，但搜索“麦田里的守望者”的用户不会。

最后一个结果是最好的，因为它在字符串前后都有一个通配符。但是，它也给出了最长的自动完成列表。用户必须输入几个字母来缩小搜索结果的范围。

关于实现更有效查询的任何想法？或者第三种选择是最好的选择（因为将书名中的定冠词分开是不可行的？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:08:57.050

您可以使用正则表达式进行搜索（查询结果很快）并且不要忘记为您的结果添加限制。

一个小例子

```
SELECT title FROM books WHERE title REGEXP '$string' LIMIT 20 
```

或者你可以使用单词边界

```
SELECT title FROM books WHERE title REGEXP '[[:<:]]$string[[:>:]]' LIMIT 20 
```

查看文档[http://dev.mysql.com/doc/refman/5.5/en/regexp.html](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:51:56.517

我建议在字符串的任一侧使用带有通配符的第三种方法。如果您担心返回结果集的大小，也许将结果限制在一定数量，随着用户键入，列表自然会变得更小更具体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:52:36.730

您也可以考虑允许搜索仍然匹配的“Catcher Rye”。

在这种情况下 - 您将标记标题中的每个单词以及用户输入的单词并找到最佳匹配。

否则只有在输入 4 个或更多字符后才自动完成，并使用选项 3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T20:15:32.363

```
$query = mysqi_query("SELECT title FROM books WHERE title REGEXP '$string'");
if($query->num_rows() == 0) {

     //First remove all the stop words like for, the, of, a from the search string.
     $stopWords = array('/\bfor\b/i', '/\bthe\b/i', '/\bto\b/i', '/\bof\b/i','/\ba\b/i');
     $string = preg_replace($stopWords, "", $string);

     //Then, use 
     mysqli_query("SELECT title FROM books WHERE title REGEXP '$string'");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:50:22.280

如果您担心建议的数量，您是否可以修改更改事件以仅在他们在字段中输入了一些最少字符数后才检索建议？

# ruby-on-rails - Rails 3：我应该避免“随机”控制器动作吗？

> ID：15347227
> 
> 赞同：1
> 
> 时间：2013-03-11T19:45:48.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, controller, actioncontroller

在我的 Rails 3.1 控制器`ActivitiesController`中，我有一个名为`random`(ie `/activities/random`) 的操作，它找到一个随机活动，然后重定向到该活动（该`show`操作是实际呈现活动的内容）。

到目前为止，这对我来说效果很好，但现在我正在对应用程序进行 Ajax-ify 处理，我开始觉得* 可能有一个单独的控制器操作`random`是一个糟糕的设计选择。

将随机化功能整合到`show`动作中会更好吗？

***更新/澄清：**添加 Ajax 功能时，我意识到 a`views/activities/random.js`与 a 相同`views/activities/show.js`。毕竟，从渲染的角度来看，这两个动作是相同的，唯一的区别是`:id => 'random'`.

# r - R 中 twitteR 的 SSL 证书失败

> ID：15347233
> 
> 赞同：17
> 
> 时间：2013-03-11T19:46:02.690
> 
> 标签：r, ssl, twitter, oauth, twitter-oauth

我知道类似的问题又被问到了。但是，我已经尝试了在这里和谷歌上找到的所有东西，但似乎没有什么对我有用。

我的代码如下：

```
reqURL <- "http://api.twitter.com/oauth/request_token"
accessURL <- "http://api.twitter.com/oauth/access_token"
authURL <- "http://api.twitter.com/oauth/authorize"
consumerKey <- "xxxxxxxxxxx"
consumerSecret <- "xxxxxxxxxxxxxxxxxxx"
twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                         consumerSecret=consumerSecret,
                         requestURL=reqURL,
                         accessURL=accessURL,
                         authURL=authURL)
twitCred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))
registerTwitterOAuth(twitCred) 
```

我在这里得到： `[1] TRUE`

但如果我试试这个： `tweets = searchTwitter('blabla', n=1500)`

我收到以下错误： `[1] "SSL certificate problem, verify that the CA cert is OK. Details:\nerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed" Error in twInterfaceObj$doAPICall(cmd, params, "GET", ...) : Error: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed`

以下是我 PC 上的软件包和版本：

> sessionInfo() R 版本 2.15.1 (2012-06-22) 平台：i386-pc-mingw32/i386 (32-bit)

```
locale:
[1] LC_COLLATE=Greek_Greece.1253  LC_CTYPE=Greek_Greece.1253   
[3] LC_MONETARY=Greek_Greece.1253 LC_NUMERIC=C                 
[5] LC_TIME=Greek_Greece.1253    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ROAuth_0.9.2   digest_0.6.2   twitteR_1.1.0  rjson_0.2.12  
[5] RCurl_1.95-4.1 bitops_1.0-5  

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

任何帮助都会非常有用！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-08T09:59:12.853

首先执行以下操作，然后运行您的代码：

```
library(RCurl) 

# Set SSL certs globally
options(RCurlOptions = list(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))) 
```

这通常可以纠正您遇到的问题。

**编辑（2014 年 8 月）：** *或者更好的是，尝试改用 httr 包（它是 RCurl 的友好包装器，为您设置了有用的默认选项）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T21:35:44.490

终于找到解决办法了，试试这个方法。这很容易

```
library(devtools)
install_github("twitteR", username="geoffjentry")
library(twitteR)

api_key = "aaa"
api_secret = "bbb"
access_token = "ccc"
access_token_secret = "ddd"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:59:53.797

您可能需要更新您的 cacert.pem 文件。有关此问题的其他问题的链接，请参见[此处](https://superuser.com/a/442797)和[此处。](https://stackoverflow.com/q/6414232/1478381)我看到这对使用 的其他人不起作用`download.file()`，但这可能直接使用 Curl。您可以像这样更新捆绑文件：

```
system( paste0( "curl http://curl.haxx.se/ca/cacert.pem -o " , tempdir() , "/cacert.pem" ) )
#Then you can use it like so
twitCred$handshake( cainfo = paste0( tempdir() , "/cacert.pem" ) ) 
```

高温高压

# objective-c - 无法从菜单栏打开新文档

> ID：15347236
> 
> 赞同：0
> 
> 时间：2013-03-11T19:46:05.857
> 
> 标签：objective-c, xcode, macos, cocoa

我有一个加载项目的菜单栏（如下）。单击时，我想打开一个新文档，就像从“文件”菜单中打开它一样。我正在使用`NSDocumentController`and `newDocument:`，但我什么也没得到 - 没有错误。

我收到“无法创建文档”错误，但我通过添加新的文档类型解决了这个问题……如果这与它有关的话。知道为什么我的文档没有打开吗？

**更新**如下，`NSLog`我可以看到文档已创建，但我看不到它！

```
+ (void)buildMenuWithNotifs {
    NSMenuItem* newNoteItem;
    newNoteItem = [[NSMenuItem alloc] initWithTitle:@"New Note" action:@selector(newNote) keyEquivalent:@""];
    [newNoteItem setTarget:[self class]];
    [sm addItem:newNoteItem];
}

+(void)newNote {
    [NSApp activateIgnoringOtherApps:YES];  //app is running as agent
    NSDocumentController *dc = [NSDocumentController sharedDocumentController];
    [dc newDocument:nil];
    NSLog(@"dc: %@", dc);
} 
```

**更新 3：**

使用此代码，我得到用 NSLog 打印的“无错误”。我从 Document 调用的 NSLog`init` *被*调用，但`windowControllerDidLoadNib`仍然没有。

```
KBDocument *d = [[KBDocument alloc] init];
if (![NSBundle loadNibNamed:@"KBDocument" owner:d]) {
    NSLog(@"error");
} else {
    NSLog(@"no error");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:23:50.273

我终于知道问题出在哪里 - 在我的 .plist 中，我最初删除了 Document types 键，因为我不需要它。当我重新创建它时，它默认为 NSDocument 类。我不得不将该键值更改为我自己的子类名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:50:57.513

这里有一些代码可以帮助你解决这个问题：

```
NSError *error = nil;
KBDocument *document = [dc openUntitledDocumentAndDisplay:YES error:&error];
NSLog(@"document: %@ error: %@", document, error); 
```

我还建议添加 NSLog`-[KBDocument init]`并`-[KBDocument windowControllerDidLoadNib:]`找出是否被调用。

# google-apps-script - 如果单元格中的值为日期，则运行自定义函数

> ID：15347237
> 
> 赞同：6
> 
> 时间：2013-03-11T19:46:07.373
> 
> 标签：google-apps-script, google-sheets

我是谷歌脚本的新手。我想检查单元格中的值是否为日期，如果是，则更改日期的默认格式，然后返回新的格式化日期值。

这是我想要的一个例子：

```
var activeCellValues = SpreadsheetApp.getActiveRange().getValues();
if ( activeCellValues = "Is_Type_Date")
       {   
          var activeCellValues = Utilities.formatDate(pubDateCell,"PST", "MM/dd/yyyy")
       } 
```

这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-14T13:58:05.593

使用`isDate()`下面的功能来完成您的要求。可以更改日期格式以满足其他需要。有关详细信息，请参阅 [ `Utilities.formatDate()`][3]。

```
// From http://stackoverflow.com/questions/1353684
// Returns 'true' if variable d is a date object.
function isValidDate(d) {
  if ( Object.prototype.toString.call(d) !== "[object Date]" )
    return false;
  return !isNaN(d.getTime());
}

// Test if value is a date and if so format
// otherwise, reflect input variable back as-is. 
function isDate(sDate) {
  if (isValidDate(sDate)) {
    sDate = Utilities.formatDate(new Date(sDate), "PST", "MM/dd/yyyy");
  }
  return sDate;
} 
```

在您的脚本中，您使用了该`Range.getValues()`函数，它将返回给定范围内数据的二维数组。（在您的情况下，您的整个工作表。）因此，您需要遍历读取的值并在您感兴趣的任何单元格上调用此函数，然后将信息写回电子表格。在 Google 的文档和 Stackoverflow 上都有很多这样的例子。

# c# - 如何在 C# 中创建链接数组列表

> ID：15347238
> 
> 赞同：0
> 
> 时间：2013-03-11T19:46:07.420
> 
> 标签：c#, arrays, collections, linked-list

我需要创建一个具有链表容量的数组。

基本上，我需要一个基于静态索引的列表（如数组），但有可能获取下一个和上一个字段（并且可以轻松地循环遍历列表，如链表）。 *注意：数组是二维的。我使用自定义类作为数组值。所以我可以为每个实例设置上一个和下一个属性。*

是否有内置的 C# 集合？如果没有，关于如何创建一个非常简单的版本的任何建议？（我已经有一个版本，由 2 个方法组成。一个向前循环设置前一个字段，一个向后循环设置下一个字段，但它仍然很混乱）。

提前致谢

**编辑：**

问题是我使用二维数组。如果遍历我的数组：

```
 for (byte x = 0; x < Grid.GetLength(0); x++) 
            {
                for (byte y = 0; y < Grid.GetLength(1); y++) /
                {
                    //At certain point, I need to get the previous field. I can do:
                    if (y != 0)
                    {
                        y -= 2; //-2 because I will y++ in for. Already getting messy
                    }
                    else 
                    {
//What if y == 0? Then I can't do y--. I should get max y and  do x-- to get previous element:

                        y = (byte)(Grid.GetLength(1) - 1); //to get max value y

                        x--;
                    }
}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:49:16.990

有一个内置[`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)类。

但是根据您的描述，为什么数组不起作用？它是静态的，基于索引的，您可以通过递增/递减索引轻松获取下一个和上一个元素。很难从代码中准确看出您需要什么，但我想指出，您可以使用以下方法轻松枚举多维数组：

```
var arry = new int[2,3];
foreach(var item in arry)
{
    ...
} 
```

因此，您也许可以将其与`Stack<T>`结构结合起来（将项目推入堆栈并将它们弹出以获取前一个）。

或者，您可以将数组`LinkedList`直接转换为 a。

```
var list = new LinkedList(arry.Cast<int>()); // flattens array 
```

或者要保留原始数组中的索引并仍然以链表的形式循环遍历这些值，请使用：

```
var list = new LinkedList(arry.Cast<int>.Select((item, i) => new 
{ 
    Item = item, 
    Index1 = i % arry.GetLength(1), 
    Index2 = i / arry.GetLength(0) 
}));
var node = list.First;
while(node.Next != null)
{
    Console.WriteLine("Value @ {1}, {2}: {0}", node.Value.Item, node.Value.Index1, node.Value.Index2);
    // on some condition move to previous node
    if (...)
    {
        node = node.Previous;
    }
    else
    {
        node = node.Next;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:17:26.777

不，你没有。不要放弃传统数组来代替“智能链接节点数组”，这似乎是您的目标，而是尝试在循环体中添加几个变量：

```
byte x_len = Grid.GetLength(0);
byte y_len = Grid.GetLength(1);
byte prev_x, next_x, prev_y, next_y;

for (byte x = 0; x < x_len; ++x) 
{
  prev_x = x == 0? x_len - 1 : x - 1;
  next_x = x == x_len - 1? 0 : x + 1;
  for (byte y = 0; y < y_len; ++y)
  {
    prev_y = y == 0? y_len - 1 : y - 1;
    next_y = y == y_len - 1? 0 : y + 1;

    // here, you have access to the next and previous
    // in both directions, satisfying your requirements
    // without confusing your loop variables.

  }
} 
```

# javascript - jQuery.each 返回索引数组

> ID：15347239
> 
> 赞同：-1
> 
> 时间：2013-03-11T19:46:09.193
> 
> 标签：javascript, jquery

我有这个代码：

```
function gatherFollowers() {
            var followers = [];
            jQuery('.follower').each(function(index, value) {
                var i = parseInt(jQuery(this).attr('data-id'));
                followers.push(i);
            });
            return followers;
        } 
```

那应该抓住所有属性，但结果它返回：

```
[100, 99, 88, 72, 63, 34, 31, 30, 29, each: function, eachSlice: function, all: function, any: function, collect: function…] 
```

我怎样才能让它返回这样的简单数组：

```
[4,29,30,31,32,34,36,37,60,61,63,72,76,77,88,99,100] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:54:49.777

我相信你可以使用[map()](http://api.jquery.com/jQuery.map/)来获得你需要的东西 - 和 .get()

```
function gatherFollowers() {
    return jQuery('.follower').map(function(i,v){
        return $(v).data('id');
    }).get();
} 
```

[小提琴](http://jsfiddle.net/xnZBc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:51:48.000

尝试

```
function gatherFollowers() {
    var followers = $.map($('.follower'), function(value) {
        return parseInt($(this).data('id'), 10);
    });

    // followers should be an array of numbers
} 
```

我已将您的代码更改为使用[`$.map`](http://api.jquery.com/jQuery.map/)以及[`.data()`](http://api.jquery.com/data/#data-html5)用于访问 HTML 5 数据`id`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:04:00.810

好吧，实际上将这个函数结果推入对象确实帮助了我 `followers.data = gatherFollowers();`

现在 console.log 显示

```
Object {data: Array[9], type: "custom"}
data: Array[9]
0: "100"
1: "99"
2: "88"
3: "72"
4: "63"
5: "34"
6: "31"
7: "30"
8: "29"
length: 9
__proto__: Array[0]
type: "custom" 
```

正如预期的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-23T16:25:19.483

我试过这个：

```
//HTML
//<div id="1" class="follower">follower1</div>
//<div id="2" class="follower">follower2</div>

var followers = [];
$('.follower').each( function(index, value){
    var follower_id = $('.follower:eq(' + index + ')').attr('id');
    followers.push(follower_id)
});
console.log(followers)
//output [1,2] 
```

# .htaccess - 翻译 nginx 的 htaccess 重写规则

> ID：15347240
> 
> 赞同：0
> 
> 时间：2013-03-11T19:46:09.417
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, nginx, rewrite

我想为 nginx 翻译以下 apache htaccess 重写规则。

```
 RewriteCond %{REQUEST_FILENAME} -f [OR]
 RewriteCond %{REQUEST_FILENAME} -d
 RewriteRule ^(.+) - [PT,L]
 RewriteRule ^(.+) /index.php 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:12:34.567

apache重写规则[在另一个问题](https://stackoverflow.com/questions/2102128/mod-rewrite-what-does-this-rewriterule-do/2102189#2102189)中解释得很清楚，特别是用于非替换的特殊破折号“-”规则。这可以重写为 nginx 中的[try_files](http://wiki.nginx.org/HttpCoreModule#try_files)指令。

您的问题没有列出空字符串（主页）的规则（只有非空字符串 (.+)）。所以我假设你在其他地方有一个主页规则。nginx 中的规则可能是

```
location = / {
   # your nginx rule matching the empty string (for your home page)
}

# all other locations try in the order: file => directory => index.php
location / {
  try_files $uri $uri/ /index.php;
} 
```

# javascript - getJson 后 getJson 不工作

> ID：15347242
> 
> 赞同：0
> 
> 时间：2013-03-11T19:46:11.630
> 
> 标签：javascript, jquery, ajax, getjson

单击按钮时，我正在尝试发出请求。

如果是第一次单击它，我会创建一个 getJson 来获取一个包含第二个请求的 ID 的数组。

问题是，当它发出第一个请求时，它会在第二个请求之前停止，所以我必须再次单击才能发出第二个请求。

这是我的脚本代码：

```
<script  type="text/javascript">
$(document).ready(function() {
    var IDs = new Array();
    var iterator = 0;
    // When id with Action is clicked
    $("#Action").click(function() {
        if(IDs.length <= 0){
            // Load generator.php as JSON and assign to the data variable
            $.getJSON('generator.php', {tags : "lol"},  function(data) {
                IDs = data.value;               
            });
        }

        //PAGE STOPS HERE

        $.getJSON('imagem.php', {ids : IDs[iterator]}, function(data) {
            iterator++;
            document.title = "IMG2";

            $("#Imagem").html(data.value);  
            if(iterator > IDs.length-1)
                iterator = 0;
        });

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:57:28.363

该`$.getJson()`函数是异步的。这意味着当它执行那段代码时，它会继续执行。第二个调用取决于第一个调用，因此应该嵌套在成功回调中，如下所示：

```
$.getJSON('generator.php', {tags : "lol"},  function(data) {
   IDs = data.value;               

   $.getJSON('imagem.php', {ids : IDs[iterator]}, function(data) {
      iterator++;
      document.title = "IMG2";

      $("#Imagem").html(data.value);  
      if(iterator > IDs.length-1)
         iterator = 0;
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:59:05.887

这是因为 $getJSON 是一个异步事件，因此您的 $getJSON 函数调用都是同时发生的，而您的第二个函数调用需要第一个函数的结果。请使用来自 jquery 的成功事件：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

来自上述网站的示例：

```
$.getJSON("example.json", function() {
  alert("success");
})
.success(function() { alert("second success"); }); 
```

新代码：

```
<script  type="text/javascript">
    $(document).ready(function() {
        var IDs = new Array();
        var iterator = 0;
        // When id with Action is clicked
        $("#Action").click(function() {
            if(IDs.length <= 0){
                // Load generator.php as JSON and assign to the data variable
                $.getJSON('generator.php', {tags : "lol"},  function(data) {
                    IDs = data.value;
                }).success(function() {
                    $.getJSON('imagem.php', {ids : IDs[iterator]}, function(data) {
                        iterator++;
                        document.title = "IMG2";

                        $("#Imagem").html(data.value);  
                        if(iterator > IDs.length-1)
                                iterator = 0;
                    });
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:00:37.683

从您的代码访问中，我们认为 -

这是一个典型的ajax调用案例...

要在第一次通话后进行第二次通话，您应该在第一次 getjson 回调中调用第二次 getjson 以使其正常工作 - 即 -

```
<script  type="text/javascript">
                $(document).ready(function() {
                    var IDs = new Array();
                    var iterator = 0;
                    // When id with Action is clicked
                    $("#Action").click(function() {
                        if(IDs.length <= 0){
                        // Load generator.php as JSON and assign to the data variable
                        $.getJSON('generator.php', {tags : "lol"},  function(data) {
                            IDs = data.value;               
                            $.getJSON('imagem.php', {ids : IDs[iterator]}, function(data) {
                            iterator++;
                            document.title = "IMG2";

                            $("#Imagem").html(data.value);  
                            if(iterator > IDs.length-1)
                                    iterator = 0;
                        });

                        });
                        }
                    });
                });
            </script> 
```

我以前也遇到过同样的情况，在不同的应用程序中调用 ajax。希望这对您有所帮助。

# z3 - 简化 Z3 中的未解释函数

> ID：15347244
> 
> 赞同：4
> 
> 时间：2013-03-11T19:46:14.253
> 
> 标签：z3

有没有办法将简化应用于 z3 中定义的未解释函数，而不是目标和子目标？

我有以下 z3 代码：

* * *

```
(declare-fun f (Bool Bool) Bool)
(assert (forall ((b1 Bool) (b2 Bool))
        (implies b2 (f b1 b2))))
(assert (exists ((b1 Bool) (b2 Bool))
        (not (f b1 b2))))
(check-sat)
(get-model) 
```

* * *

我得到以下输出：

* * *

```
sat
(model 
(define-fun b1!1 () Bool
  false)
(define-fun b2!0 () Bool
  false)
(define-fun k!7 ((x!1 Bool)) Bool
  false)
(define-fun f!8 ((x!1 Bool) (x!2 Bool)) Bool
  (ite (and (= x!1 false) (= x!2 true)) true
  false))
(define-fun k!6 ((x!1 Bool)) Bool
  (ite (= x!1 false) false
  true))
(define-fun f ((x!1 Bool) (x!2 Bool)) Bool
  (f!8 (k!7 x!1) (k!6 x!2)))
) 
```

* * *

事实证明，通过将重写规则应用于 f 的定义，我们可以通过以下推导得到 f 等于第二个参数 (x!2)：

```
(f!8 (k!7 x!1) (k!6 x!2))
= (f!8 false (k!6 x!2))
= (f!8 false x!2)
=(x!2) 
```

有没有办法让 z3 自动生成以下定义？

* * *

```
(define-fun f ((x!1 Bool) (x!2 Bool)) Bool
  (x!2)) 
```

* * *

谢谢你的帮助。问候，奥斯瓦尔多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:21:55.620

一种选择是让 Z3 计算表达式`(f x y)`where`x`和`y`是新的布尔常量。该`eval`命令将在当前模型中进行评估`(f x y)`，并将`y`在您的示例中生成。这是完整的示例（也可[在此处](http://rise4fun.com/Z3/BH6w)在线获得）：

```
(declare-fun f (Bool Bool) Bool)

; x and y are free Boolean constants that will be used to create the expression (f x y)
(declare-const x Bool)
(declare-const y Bool)

(assert (forall ((b1 Bool) (b2 Bool))
        (implies b2 (f b1 b2))))
(assert (exists ((b1 Bool) (b2 Bool))
        (not (f b1 b2))))
(check-sat)

(eval (f x y)) 
```

# common-lisp - CL 和 SWIG：工作示例？

> ID：15347247
> 
> 赞同：6
> 
> 时间：2013-03-11T19:46:18.383
> 
> 标签：common-lisp, swig, sbcl

做一个[SWIG 教程](http://www.swig.org/tutorial.html)，并使用他们在那里提供的 example.c、example.i。我生成了 lisp 文件`swig -cffi example.i`。

但是当我`test.lisp`使用 SBCL 运行时，我收到关于未定义外星函数的投诉，以及编译`example.lisp`自身时的投诉。我很确定我仍然需要将我的 example.c 编译到一个库中，然后以某种方式告诉 SBCL 加载它！[但是除了this](http://swig.10945.n7.nabble.com/Re-SWIG-and-CFFI-td10143.html)之外，文档对此非常缺乏。

有人可以告诉我如何做到这一点，还是有比 SWIG 更好的方法来自动从 C/C++ 源生成 CFFI 绑定？

sbcl 输出：

```
...
; 
; caught STYLE-WARNING:
;   Undefined alien: "fact"
; 
; compilation unit finished
;   caught 1 STYLE-WARNING condition
; 
; caught STYLE-WARNING:
;   Undefined alien: "my_mod"
... 
```

测试.lisp

```
;call C functions defined in example.c

(require :cffi)
;;;(require :example "example.lisp")
(load "example.lisp")
(fact 2)
(quit) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T20:08:15.610

首先，您需要编译 C 库。执行以下操作：

```
gcc -shared example.c -o libexample.so 
```

当然，对于复杂的现有库编译可能要复杂得多——如果您要包装现有库，它可能带有某种 Makefile 来帮助您构建它。

然后，在 Lisp 中，使用 CFFI 来定义和加载库。这似乎是您缺少的主要部分。

```
(cffi:define-foreign-library libexample
    (t (:default "libexample"))) ;; note no .so suffix here
(cffi:use-foreign-library libexample) 
```

这部分：

```
(t (:default "libexample")) 
```

是一个条件，您可以使用它为不同的平台提供不同的加载指令。(t ...) 是包罗万象的选项，就像 COND 一样。您可以在 define-foreign-library 的文档中找到确切的语法。

您现在通常使用 cffi:defcfun 等来定义库中的函数。这就是 SWIG 生成的文件为您所做的，因此请加载它：

```
(load "example.lisp") 
```

您现在可以像普通的 Lisp 函数一样调用这些函数：

```
(fact 5)
  => 120 
```

# python - 使用 python 发布表单的问题

> ID：15347248
> 
> 赞同：2
> 
> 时间：2013-03-11T19:46:20.537
> 
> 标签：python, http, post, urllib2, urllib

我正在使用 urllib、urllib2 的组合来发布一些表单数据。

这是我需要提交的表格

```
<form method="post" action="show_bug.cgi">
            <input type="hidden" name="ctype" value="xml">
            <input type="hidden" name="id" value="788604">
            <input type="hidden" name="id" value="793892">
            <input type="hidden" name="id" value="823569">
            <input type="hidden" name="id" value="823585">
            <input type="hidden" name="id" value="825904">
            <input type="hidden" name="id" value="827493">
            <input type="hidden" name="excludefield" value="attachmentdata">
            <input type="submit" value="XML" id="xml">
</form> 
```

我正在创建表单的元组列表`[ (name,value), ... ]`

由于提交类型元素没有名称，我不知道如何以及是否使用 urllib/urllib2 发送该元素。

当我尝试将此数据发布到 show_bug.cgi 时，我收到 HTTP404 错误。

我对如何发布表单感到困惑，尤其是提交输入类型。到目前为止，我一直认为 Submit 类型的 value 和 id 无关紧要，到目前为止它似乎对我有用。

* * *

这是 TamperData 捕获的发布请求

![POST 参数](../Images/a537db4819313681822428dda5851c8b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:01:55.500

以下请求有效：

```
from urllib import urlencode
from urllib2 import urlopen

url = 'https://bugzilla.mozilla.org/show_bug.cgi'
data = urlencode([('ctype', 'xml'), ('id', [788604, 793892]),
                  ('excludefield', 'attachmentdata'),
                  ], doseq=True)
response = urlopen(url, data)
print(response.code) # -> 200
xml = response.read() 
```

如果`doseq=True`then`('id', [788604, 793892])`被编码为`id=788604&id=793892`.

没有`doseq`，`('id', 788604), ('id', 793892)`产生相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:04:34.260

[`requests`](http://docs.python-requests.org/en/master/)图书馆呢？

它使事情变得更简单，请参阅有关如何发出发布请求的[文档。](http://requests.readthedocs.org/en/latest/user/quickstart/#more-complicated-post-requests)

我想你应该这样做：

```
import requests

host = "my_host/"
url = host + "show_bug.cgi"

params = {'ctype': 'xml', 
          'excludefield': 'attachmentdata',
          'id': [788604,...,827493],
          'xml': 'XML'}
response = requests.post(url, data=params) 
```

# .net - CLR 字符串的基于字节的长度

> ID：15347258
> 
> 赞同：1
> 
> 时间：2013-03-11T19:46:44.883
> 
> 标签：.net, string, oracle, varchar

**问题的简短版本：**`VARCHAR(n)`有没有一种方法可以计算将字符串的字符存储在 Oracle 数据库的列中需要多少字节？

**更长的版本：**以下 Oracle SQL 脚本将在第三条语句处失败。它将尝试在一`VARCHAR(10)`列中插入 10 个字符；但是，这些字符之一是带有重音的 A。

```
CREATE TABLE TESTTABLE (NAME VARCHAR(10) NULL);

INSERT INTO TESTTABLE (NAME) VALUES ('abcdefghij');
--1 rows inserted.

INSERT INTO TESTTABLE (NAME) VALUES ('ábcdefghij');
--ORA-12899: value too large for column "ACME"."TESTTABLE"."NAME" (actual: 11, maximum: 10) 
```

我的 C# 应用程序将字符串存储在 Oracle 数据库中，我不能只将列类型更改为`NVARCHAR2(10)`，这将起作用。该应用程序预计会将任何较大的字符串修剪到 10 个字符的限制，因此 Oracle 不会抱怨它的长度。但是`String.Length`基于 - 的修剪是一种非常幼稚的策略：它会盲目地保留*“ábcdefghij”*及其所有 10 个 CLR 字符。

如何检测*'á'*将在数据库行中占用 2 个字节，以便在发出语句之前将字符串修剪为*“ábcdefghi”*`INSERT`？

**编辑：**这个问题类似于[基于字节长度缩短 UTF8 字符串的最佳方法](https://stackoverflow.com/questions/1225052/best-way-to-shorten-utf8-string-based-on-byte-length)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:02:25.273

Oracle 函数`length(string)`返回字符数，`lengthb(string)`返回字节数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T20:23:18.317

默认情况下，`VARCHAR2(10)`分配 10 个字节的存储空间，这可能等于也可能不等于 10 个字符，具体取决于数据库字符集和数据。但是，您可以声明该列，使其始终存储 10 个字符。

当您使用可变宽度字符集时，您几乎总是希望使用字符长度语义来声明列`VARCHAR2(10 CHAR)`。然后，无论您是否碰巧有一些字符需要超过 1 个字节的存储空间，您始终可以存储 10 个字符。

如果由于某种原因您无法使用字节长度语义来声明列，则可以使用`LENGTHB`or`VSIZE`函数以字节为单位返回字符串的长度。

```
select lengthb('ábcdefghij'), vsize('ábcdefghij')
  from dual; 
```

将为结果的两列返回 11。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T19:52:13.630

这取决于 Oracle 设置使用的编码。您可以使用相应的实例将字符串实例转换为字节数组`System.Text.Encoding`，例如`System.Text.Encoding.UTF8`. （您正在寻找“GetBytes”方法）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:57:44.750

您可以像这样获取字符串的字节长度：

```
UTF8Encoding Encoding = new UTF8Encoding();
byte[] UTF8String = Encoding.GetBytes("ábcdefghij");
int StringLenght = UTF8String.Length 
```

实际上，对于您的示例，它返回 11。

# android - Android TabsAdapter 处理片段

> ID：15347261
> 
> 赞同：1
> 
> 时间：2013-03-11T19:46:46.200
> 
> 标签：onTabSelected, android, android-fragments, android-tabs

我想处理 tabsadapter 中的一个片段，它是我的 Activity 中的一个静态类。问题是如何在[onTabSelected](/questions/tagged/getfragmentbytag "显示标记为“getfragmentbytag”的问题")中获取 getfragmentbytag？

从 onCreate 我有这个代码：

```
Tab tab1 = actionBar.newTab().setText("ABOUT");
tabsAdapter.addTab(tab1, PoiAboutFragment.class, null); 
```

我的标签适配器类如下，可以正常工作。

```
public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    private Object gridTag;

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager,
            ActionBar actionBar) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = actionBar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        if(clss.equals(GridFragment.class))
            gridTag = tab.getTag();
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        Log.i(TAG, "onTabSelected has been called");
        if(tag.equals(gridTag))
            Log.i(TAG, "gridtab has been called");
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    } 
```

问题是我想在 oncreate 方法和 tabsAdapter 中处理我的一个片段，但我既没有片段标记也没有片段 ID。我如何从我的活动中处理他们的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:21:13.557

[FragmentPagerAdapter 源](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/FragmentPagerAdapter.java)的`makeFragmentName`方法显示片段是使用以下标签创建的：

```
"android:switcher:" + viewId + ":" + id 
```

其中viewId是ViewPager的id，即使用

```
activity.getSupportFragmentManager().findFragmentByTag(
                "android:switcher:" + pager.getId() + ":0" 
```

得到第一个片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:14:40.413

[我在这个网站android-er.blogasppot](http://android-er.blogspot.com/2012/06/communication-between-fragments-in.html)中找到了我正在寻找的答案

# node.js - 如何通过社交服务进行用户认证

> ID：15347265
> 
> 赞同：2
> 
> 时间：2013-03-11T19:46:56.510
> 
> 标签：node.js, authentication, express

我想尝试通过我的节点 js/express 应用程序中的社交服务进行用户身份验证。但我不知道。你能推荐一个好的模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:50:23.987

例如：

*   [所有人](https://github.com/bnoguchi/everyauth "所有人")
*   [护照](http://passportjs.org/ "护照")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T15:57:22.253

这是我放在一起的社交登录样板应用程序：

[https://github.com/nikolaydyankov/node-social-auth](https://github.com/nikolaydyankov/node-social-auth)

它通过 Facebook、Twitter 和 Google 提供简单的身份验证。它使用 Express、Passport 和 MongoDB 来存储会话。

# javascript - 在返回值之前检查地理位置是否已保存

> ID：15347269
> 
> 赞同：1
> 
> 时间：2013-03-11T19:47:08.833
> 
> 标签：javascript, html, geolocation

## 我正在尝试做的事情：

我需要请求用户的位置并将纬度和经度保存到一个对象中。由于这可能需要一些时间，我需要偶尔检查一下坐标是否已保存。我正在使用 setTimeout 来检查坐标是否每 500 毫秒保存一次。一次`

## 问题：

`checkCoords()`运行一次并返回“用户坐标不存在”，但它似乎不会继续运行。

`userGeometry`保存坐标后确保返回的最佳方法是什么？

```
EXAMPLE.GetUserGeometry = function() {
  console.log("Starting geolocation...");

  var userGeometry = navigator.geolocation.getCurrentPosition(save_location);

  function save_location(position) {
    var user_coordinates = {
      latitude: position.coords.latitude,
      longitude: position.coords.longitude
    };

    console.log(user_coordinates);
    return user_coordinates;
  }

  setTimeout(checkCoords(userGeometry), 500);

  function checkCoords(coords) {
    if (typeof coords === 'undefined') {
      console.log("user coords don't exist");
    } else {
      console.log("user coords saved");
    }
  }

}; 
```

# android - 使用Android时的不同环境变量

> ID：15347270
> 
> 赞同：3
> 
> 时间：2013-03-11T19:47:10.073
> 
> 标签：android, c++, android-emulator, android-source

我已经修改了一些 Android 源代码，以便在运行 init.rc 期间为我创建一个套接字。发生的情况是套接字的描述符被创建并保存在环境变量中。这类似于在 init.rc 中创建其他套接字的方式（例如 ANDROID_SOCKET_zygote）。我的问题是我不知道如何访问我的环境变量（名为 ANDROID_SOCKET_mySocket）。

从命令行，我可以输入“adb shell printenv”，这将正确打印出我的套接字和另一个套接字（ANDROID_SOCKET_adbd）。

现在在 android 源代码中，我试图访问我的套接字描述符（特别是在 DisplayDevice.cpp 中）。我调用 getenv 函数来尝试获取我的 env 变量，但它没有找到。我什至打印出该文件中所有可用的环境变量，但找不到我正在寻找的环境变量。

有谁知道为什么会这样。如果需要，我可以提供更多信息。

# java - How can I set the version number of iaik.x509.X509Certificate explicitly?

> ID：15347272
> 
> 赞同：0
> 
> 时间：2013-03-11T19:47:18.267
> 
> 标签：java, jce, iaik-jce

The documentation at [this page](http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html#X509Certificate%28%29) states that

`Any value may be set using the corresponding set<Value> method.`

However, I am not sure how to interpret this statement. I have tried the following but none of them compile, and nor did I expect them to.

```
certificate.set3();
certificate.setThree();
serverCertificate.set<3>(); 
```

What is the correct method call to set the version number explicitly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:54:42.287

You can not. It explicitely says:

> This class represents a X.509 **version 3** certificate, as specified by ISO/IEC and ANSI X9\.

**Update:** Seems that you can not actually set the version. It "configures" itself the proper version depending on which extensions you use. In V1 there were no extensions and in V2 just few.

> The version number per default is set to 1 indicating a Version 1 certificate. When including subjectUniqueID or issuerUniqueID, the version automatically will be set to 2, and when adding an extension increased to 3.

# jquery - jQuery隐藏显示元素逻辑

> ID：15347274
> 
> 赞同：0
> 
> 时间：2013-03-11T19:47:28.913
> 
> 标签：jquery, html, css

我有一个图像列表，我希望在单击它们时在它们旁边显示文本。我在默认状态下将图像的不透明度设置为 0.5，当用户将鼠标悬停在图像上时，不透明度变为完全或 1。

现在，只要文本框打开，我希望图像的不透明度为 1。

[您可以通过查看此小提琴链接](http://jsfiddle.net/zQxuR/)获得更好的主意。

我已经为我的javascript尝试了这个，但它不起作用：

```
$('.team-text .close').click(function () {
    $(this).parent('.team-text').hide();
});

$('.team-member .team-photo, .team-member .bio-button, .team-member-minor .team-photo, .team-member-minor .bio-button').on('click', function(){
  $(this).find('.team-text:visible').hide();
  $(this).find('.team-member img, .team-member-minor img').css('opacity','0.5');
});

$('.team-photo, .bio-button').on('click', function () {
   $('.team-text').hide();
   $(this).prevAll('.team-text:hidden').show();
   $(this).prevAll('.team-member img, .team-member-minor img').css('opacity','1');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:05:44.093

在您的“活动”状态下将 css 类（例如`active`）应用到`.team-member`div，这样您就不必手动设置每个项目的不透明度。这也使事情变得更清洁，更易于维护。

编辑：我已经按照@Alexander 下面的建议更改了类名。[http://jsfiddle.net/Lh6xU/](http://jsfiddle.net/Lh6xU/)这是他的[小提琴](http://jsfiddle.net/Lh6xU/)

**css**

```
.team-member-minor img {
 opacity:.5; /* the default state for images; no need for jQuery */
}
.team-text {
display:none; 
}
/* "active" class */
.team-member-minor.active img {
opacity:1;
}

.active .team-text {
display:inline;
} 
```

**JS**

```
$('.team-member-minor').on('click', function(){
     $(this)
      .addClass('active')
      .siblings('.team-member-minor')
      .removeClass('active');
}

// if a user "closes" the textbox, reset our team member

$('.team-text .close').click(function () {
   $(this).parent('.team-text').removeClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:56:03.123

您可以将以下内容添加到`.on('click')`作品中`.team-photo,.bio-button`：

```
$('img').removeAttr('style');
$(this).find('img').css({opacity:1}); 
```

这将删除现有图像上的任何样式标记（通过更改其不透明度添加），然后将单击的不透明度设置`img`为 1。

要在关闭文本部分时重置不透明度，只需`removeAttr('style');`单击`.close`：

```
$('img').removeAttr('style'); 
```

我想这就是你想要的。我还更新了你的 jsFiddle。

# r - 在列中拆分分隔字符串并作为新行插入

> ID：15347282
> 
> 赞同：133
> 
> 时间：2013-03-11T19:47:55.807
> 
> 标签：r, dataframe, reshape, data-manipulation, strsplit

我有一个数据框如下：

```
+-----+-------+
|  V1 |  V2   |
+-----+-------+
|  1  | a,b,c |
|  2  | a,c   |
|  3  | b,d   |
|  4  | e,f   |
|  .  | .     |
+-----+-------+ 
```

每个字母表都是一个用逗号分隔的字符。我想在每个逗号上拆分 V2 并将拆分字符串作为新行插入。例如，所需的输出将是：

```
+----+----+
| V1 | V2 |
+----+----+
|  1 |  a |
|  1 |  b |
|  1 |  c |
|  2 |  a |
|  2 |  c |
|  3 |  b |
|  3 |  d |
|  4 |  e |
|  4 |  f |
+----+----+ 
```

我试图先`strsplit()`吐出 V2，然后将列表转换为数据框。它没有用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2014-12-08T15:07:53.283

截至 2014 年 12 月，这可以使用 Hadley Wickham 的 tidyr 包中的 unnest 函数来完成（请参阅发行说明[http://blog.rstudio.org/2014/12/08/tidyr-0-2-0/](http://blog.rstudio.org/2014/12/08/tidyr-0-2-0/)）

```
> library(tidyr)
> library(dplyr)
> mydf

  V1    V2
2  1 a,b,c
3  2   a,c
4  3   b,d
5  4   e,f
6  .     .

> mydf %>% 
    mutate(V2 = strsplit(as.character(V2), ",")) %>% 
    unnest(V2)

   V1 V2
1   1  a
2   1  b
3   1  c
4   2  a
5   2  c
6   3  b
7   3  d
8   4  e
9   4  f
10  .  . 
```

2017 年更新：注意`separate_rows`下面@Tif 描述的功能。

它工作得更好，它允许在单个语句中“取消嵌套”多个列：

```
> head(mydf)
geneid              chrom    start  end strand  length  gene_count
ENSG00000223972.5   chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1    11869;12010;12179;12613;12613;12975;13221;13221;13453   12227;12057;12227;12721;12697;13052;13374;14409;13670   +;+;+;+;+;+;+;+;+   1735    11
ENSG00000227232.5   chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1;chr1  14404;15005;15796;16607;16858;17233;17606;17915;18268;24738;29534   14501;15038;15947;16765;17055;17368;17742;18061;18366;24891;29570   -;-;-;-;-;-;-;-;-;-;-   1351    380
ENSG00000278267.1   chr1    17369   17436   -   68  14
ENSG00000243485.4   chr1;chr1;chr1;chr1;chr1    29554;30267;30564;30976;30976   30039;30667;30667;31097;31109   +;+;+;+;+   1021    22
ENSG00000237613.2   chr1;chr1;chr1  34554;35277;35721   35174;35481;36081   -;-;-   1187    24
ENSG00000268020.3   chr1    52473   53312   +   840 14

> mydf %>% separate_rows(strand, chrom, gene_start, gene_end)
geneid  length  gene_count  strand  chrom   start   end
ENSG00000223972.5   1735    11  +   chr1    11869   12227
ENSG00000223972.5   1735    11  +   chr1    12010   12057
ENSG00000223972.5   1735    11  +   chr1    12179   12227
ENSG00000223972.5   1735    11  +   chr1    12613   12721
ENSG00000223972.5   1735    11  +   chr1    12613   12697
ENSG00000223972.5   1735    11  +   chr1    12975   13052
ENSG00000223972.5   1735    11  +   chr1    13221   13374
ENSG00000223972.5   1735    11  +   chr1    13221   14409
ENSG00000223972.5   1735    11  +   chr1    13453   13670
ENSG00000227232.5   1351    380 -   chr1    14404   14501
ENSG00000227232.5   1351    380 -   chr1    15005   15038
ENSG00000227232.5   1351    380 -   chr1    15796   15947
ENSG00000227232.5   1351    380 -   chr1    16607   16765
ENSG00000227232.5   1351    380 -   chr1    16858   17055
ENSG00000227232.5   1351    380 -   chr1    17233   17368
ENSG00000227232.5   1351    380 -   chr1    17606   17742
ENSG00000227232.5   1351    380 -   chr1    17915   18061
ENSG00000227232.5   1351    380 -   chr1    18268   18366
ENSG00000227232.5   1351    380 -   chr1    24738   24891
ENSG00000227232.5   1351    380 -   chr1    29534   29570
ENSG00000278267.1   68  5   -   chr1    17369   17436
ENSG00000243485.4   1021    8   +   chr1    29554   30039
ENSG00000243485.4   1021    8   +   chr1    30267   30667
ENSG00000243485.4   1021    8   +   chr1    30564   30667
ENSG00000243485.4   1021    8   +   chr1    30976   31097
ENSG00000243485.4   1021    8   +   chr1    30976   31109
ENSG00000237613.2   1187    24  -   chr1    34554   35174
ENSG00000237613.2   1187    24  -   chr1    35277   35481
ENSG00000237613.2   1187    24  -   chr1    35721   36081
ENSG00000268020.3   840 0   +   chr1    52473   53312 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-03-11T19:58:33.590

这是另一种方法..

```
df <- read.table(textConnection("1|a,b,c\n2|a,c\n3|b,d\n4|e,f"), header = F, sep = "|", stringsAsFactors = F)

df
##   V1    V2
## 1  1 a,b,c
## 2  2   a,c
## 3  3   b,d
## 4  4   e,f

s <- strsplit(df$V2, split = ",")
data.frame(V1 = rep(df$V1, sapply(s, length)), V2 = unlist(s))
##   V1 V2
## 1  1  a
## 2  1  b
## 3  1  c
## 4  2  a
## 5  2  c
## 6  3  b
## 7  3  d
## 8  4  e
## 9  4  f 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-06-22T22:01:58.870

现在您可以使用 tidyr 0.5.0`separate_rows`代替`strsplit`+ `unnest`。

例如：

```
library(tidyr)
(df <- read.table(textConnection("1|a,b,c\n2|a,c\n3|b,d\n4|e,f"), header = F, sep = "|", stringsAsFactors = F)) 
```

> ```
>  V1    V2
> 1  1 a,b,c
> 2  2   a,c
> 3  3   b,d
> 4  4   e,f 
> ```

```
separate_rows(df, V2) 
```

给出：

> ```
>  V1 V2
> 1  1  a
> 2  1  b
> 3  1  c
> 4  2  a
> 5  2  c
> 6  3  b
> 7  3  d
> 8  4  e
> 9  4  f 
> ```

见参考：[https ://blog.rstudio.org/2016/06/13/tidyr-0-5-0/](https://blog.rstudio.org/2016/06/13/tidyr-0-5-0/)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-03-11T20:08:50.443

这是一个`data.table`解决方案：

```
d.df <- read.table(header=T, text="V1 | V2
1 | a,b,c
2 | a,c
3 | b,d
4 | e,f", stringsAsFactors=F, sep="|", strip.white = TRUE)
require(data.table)
d.dt <- data.table(d.df, key="V1")
out <- d.dt[, list(V2 = unlist(strsplit(V2, ","))), by=V1]

#    V1 V2
# 1:  1  a
# 2:  1  b
# 3:  1  c
# 4:  2  a
# 5:  2  c
# 6:  3  b
# 7:  3  d
# 8:  4  e
# 9:  4  f

> sapply(out$V2, nchar) # (or simply nchar(out$V2))
# a b c a c b d e f 
# 1 1 1 1 1 1 1 1 1 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-03-11T19:55:51.220

你可以从我`cSplit`的`direction = "long"`“splitstackshape”包中考虑。

用法是：

```
cSplit(mydf, "V2", ",", "long")
##    V1 V2
## 1:  1  a
## 2:  1  b
## 3:  1  c
## 4:  2  a
## 5:  2  c
## 6:  3  b
## 7:  3  d
## 8:  4  e
## 9:  4  f 
```

* * *

### 老答案....

这是使用基础 R 的一种方法。它假设我们从一个`data.frame`名为“mydf”的开始。它用于`read.csv`将第二列作为单独的 读取`data.frame`，我们将其与源数据中的第一列结合起来。最后，您使用`reshape`将数据转换为长格式。

```
temp <- data.frame(Ind = mydf$V1, 
                   read.csv(text = as.character(mydf$V2), header = FALSE))
temp1 <- reshape(temp, direction = "long", idvar = "Ind", 
                 timevar = "time", varying = 2:ncol(temp), sep = "")
temp1[!temp1$V == "", c("Ind", "V")]
#     Ind  V
# 1.1   1  a
# 2.1   2  a
# 3.1   3  b
# 4.1   4  e
# 1.2   1  b
# 2.2   2  c
# 3.2   3  d
# 4.2   4  f
# 1.3   1  c 
```

另一个相当直接的选择是：

```
stack(
  setNames(
    sapply(strsplit(mydf$V2, ","), 
           function(x) gsub("^\\s|\\s$", "", x)), mydf$V1))
  values ind
1      a   1
2      b   1
3      c   1
4      a   2
5      c   2
6      b   3
7      d   3
8      e   4
9      f   4 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-14T17:55:25.630

另一种`data.table`解决方案，它不依赖于原始数据中是否存在任何唯一字段。

```
DT = data.table(read.table(header=T, text="blah | splitme
    T | a,b,c
    T | a,c
    F | b,d
    F | e,f", stringsAsFactors=F, sep="|", strip.white = TRUE))

DT[,.( blah
     , splitme
     , splitted=unlist(strsplit(splitme, ","))
     ),by=seq_len(nrow(DT))] 
```

重要的是`by=seq_len(nrow(DT))`，这是发生分裂的“假”唯一ID。改用它很诱人`by=.I`，因为它应该定义相同，但`.I`似乎是一种改变其价值的神奇事物，最好坚持使用`by=seq_len(nrow(DT))`

输出中有三列。我们简单地命名两个现有列，然后将第三个列计算为拆分

```
.( blah       # first column of original
 , splitme    # second column of original
 , splitted = unlist(strsplit(splitme, ","))
 ) 
```

# python - Python+SQLAlchemy：从 InstrumentedList 获取映射器类？

> ID：15347288
> 
> 赞同：2
> 
> 时间：2013-03-11T19:48:10.580
> 
> 标签：python, orm, sqlalchemy

我想动态获取 InstrumentedList 实例使用的 SQLAlchemy 映射器类。

我有一个 1-M ParentClass-ChildClass（我们称列 myRelation），而 parentInstance.myRelation 是 InstrumentedList 实例。我可以破解它并获取 InstrumentedList 中第一个实例的类，但如果 InstrumentedList 中没有对象，这将不起作用。

原因：我需要将包含映射器类 X 的属性的 Python 字典附加到 InstrumentedList，但我不知道运行时的映射器类。由于我无法附加字典，因此我需要获取映射器类。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:26:40.533

该关系通过 与检测列表相关联`property`。所以从这个普通的香草映射开始：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class A(Base):
    __tablename__ = "a"
    id = Column(Integer, primary_key=True)
    bs = relationship("B")

class B(Base):
    __tablename__ = "b"
    id = Column(Integer, primary_key=True)
    a_id = Column(Integer, ForeignKey('a.id')) 
```

在任何最新版本的 SQLAlchemy 中，您都可以像这样看到它：

```
print A.bs.property.mapper.class_ 
```

在 0.8 中有更多可用的 API，您可以这样做：

```
from sqlalchemy import inspect
print inspect(A.bs).mapper.class_ 
```

检查文档-> [http://docs.sqlalchemy.org/en/rel_0_8/core/inspection.html](http://docs.sqlalchemy.org/en/rel_0_8/core/inspection.html)

“mapper->class_”的文档-> [http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#sqlalchemy.orm.mapper.Mapper.class_](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#sqlalchemy.orm.mapper.Mapper.class_)

# filemaker - 计算的容器字段永远不会重新计算

> ID：15347289
> 
> 赞同：0
> 
> 时间：2013-03-11T19:48:15.987
> 
> 标签：filemaker

我有一个`Container`设置为`Auto-enter Calculation replaces existing value`. 我知道字段在设置后不会重新计算，除非它们是 type `Calculation`。有没有办法让我根据其他字段中的值在我的容器中显示动态图像，并在字段中的值发生变化时让图像发生变化？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:21:47.123

设置为替换现有值的自动输入计算将根据它们所依赖的字段的变化重新计算。通常这些字段在公式中使用；如果不是，您可以像这样添加“触发器”：

```
Case( True or MyField or MyOtherField /* trigger */;
    /* the rest of the formula */ ) 
```

当您更改 MyField 或 MyOtherField 时，此计算将发生变化；True 用于简化表达式并直接进入公式。字段必须在同一个表中；相关字段将不起作用。

# html - IE10 直接写入“空文本节点”？

> ID：15347290
> 
> 赞同：2
> 
> 时间：2013-03-11T19:48:20.143
> 
> 标签：html, internet-explorer, dom, internet-explorer-10, jquery-datatables

最近在IE10上做了很多测试，最近遇到了一个很奇怪的错误。

在关闭 jQuery UI 对话框后，IE10 会立即打开一个光标并允许用户直接在页面中键入内容。但是，没有允许他们输入内容的输入，并且从使用 Microsoft 的 F12 开发人员工具来看，它似乎是直接写入 DOM ——这是一个“文本 - 空文本节点”的区域。我不知道这些节点来自哪里，也不知道为什么用户可以将文本放入其中之一。我真的没有要显示的代码，因为它似乎与任何东西无关，而且当我不断切割层时，它似乎仍然存在。

有没有其他人遇到过这个？它似乎也发生在 IE9 中。我在这里不知所措。

编辑：此外，我认为说我在这里使用[jQuery](http://www.datatables.net/)数据表可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:15:54.037

好的，所以我在这方面取得了一些进展。

事实证明 IE10 并没有将数据直接写入 DOM —— 相反，它动态地创建了一个文本输入，没有识别它，然后将其删除。您可以直接在其中输入，但如果您单击关闭或专注于其他任何内容，那么它就会消失并完全离开。

我还没有诊断出问题的根源——我知道它只发生在 IE 中，并且可能包括数据表或 jQuery UI。我倾向于相信它是特定于 IE 的，因为它是如此罕见，并且在其他任何地方都没有它的踪迹。

希望这个对话框可以帮助其他人。如果您找到更好的答案，请发布！

# php - 一个允许用户输入 6 位数字并搜索我们的数据库的搜索引擎

> ID：15347292
> 
> 赞同：-5
> 
> 时间：2013-03-11T19:48:25.803
> 
> 标签：php, mysql, database, search-engine

```
<?php
 include "db.php";

 $var = @$_POST['find'];

 //check for empty string and display a message.
 if($var == ""){
echo "<p>Please input a valid 6-digit ID number</p>";
exit;
 } else {

$searchMember = "SELECT * FROM $tablename WHERE id='$var'";

$numresults=mysql_query($searchMember);
$numrows=mysql_num_rows($numresults);

if($numrows == 1){
    echo $searchMember['displayname'];
} else if ($numrows == 0){
    echo "<p>Sorry, we couldn't find anything that matches your input. Try again?</p>";
} 
   }

?> 
```

我在 db.php 中包含了连接到数据库的信息。以下是表单的外观：

```
<body>
<?php 
include "db.php";
include "searchSystem.php"; 
?>
<form name="search" method="post" action="searchSystem.php">
    Input a 6-digit ID number: <input type="text" name="find" />

    <input type="submit" name="search" value="Search" />
</form> 
```

所以我的表中有一列有 6 位用户 ID。我们想让他们搜索他们朋友的 ID 号码并查看他们的个人资料。

* * *

所以这就是我刚刚写的：

```
<?php
include "db.php";

$var = isset($_POST['find']) ? $_POST['find'] : '';

//check for empty string and display a message.
if($var == ""){
echo "<p>Please input a valid 6-digit ID number</p>";
exit;

} else {

$searchMember = $db->query("SELECT * FROM $tablename WHERE id='$var'");
$row_count = $searchMember->row_count();
$result =$searchMember->fetchALL(PDO::FETCH_ASSOC);

if($row_count == 1){
    echo $result['displayName'].' '.$result['id'];
} else if ($row_count == 0){
    echo "<p>Sorry</p>";
}
}

?> 
```

还是不行:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:54:15.993

你有两个明显的问题：

*   `$tablename`从未定义
*   `$searchMember`是一个字符串而不是一个关联数组，所以`$searchMember['displayname']`没有意义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:57:44.233

这里有很多问题，但如果其中任何一个是您的实际问题，我不能说：

```
$var = @$_POST['find']; 
```

不要抑制错误，而是测试正确的输入：

```
$var = isset($_POST['find']) ? $_POST['find'] : ''; 
```

这很容易受到 SQL 注入的影响：

```
$searchMember = "SELECT * FROM $tablename WHERE id='$var'"; 
```

而是正确地转义变量：

```
$searchMember = sprinf("SELECT * FROM $tablename WHERE id='%s'", mysql_real_escape_string($var)); 
```

此外`$tablename`，除非它在您包含的文件中，否则永远不会定义。

`$searchMember`不是数组。我认为您的意思是引用查询的结果，但要做到这一点，您需要这样做：

```
$memberResult = mysql_fetch_assoc($numrows);
echo $memberResult['displayname']; 
```

最后你不应该使用`mysql_*`你应该使用`PDO`or `Mysqli`。

# java - 制作一个按钮 - java

> ID：15347293
> 
> 赞同：2
> 
> 时间：2013-03-11T19:48:27.560
> 
> 标签：java, swing, transparency, jbutton

好的，我知道以前有人问过这个问题，但我似乎无法在其他人的帖子的帮助下让我的应用程序正常工作。

我只是想用我制作的图片制作一个屏幕，然后是 3 个按钮（就像游戏菜单一样）。我已经完成了图像，现在我正在尝试制作这样的 3 个按钮。

![屏幕](../Images/dd43314de9dc0667687048a05ed6ca08.png)

我现在的代码是这样的：

```
public class Test {
   static int WIDTH = 700;
   static int HEIGHT = 600;

   public static void main(String[] args) {
      JLabel label = new JLabel();
      JFrame f = new JFrame();
      JPanel panel = new JPanel();
      JButton button = new JButton("hello again");
      button.addActionListener ((ActionListener) new Action1());

      label.setIcon(new ImageIcon("C:\\Users\\barney\\workspace\\game\\res\\background.jpg"));
      f.add(panel);
      f.add(label);
      f.setVisible(true);
      f.setDefaultCloseOperation(f.EXIT_ON_CLOSE);
      f.setSize(WIDTH, HEIGHT);
      f.setResizable(false);
      f.setLocationRelativeTo(null);
      f.setTitle("2d platformer v1.1");
      f.setVisible(true);
   }
} 
```

那么我将如何添加图片中的按钮

你能告诉我我是否把我的代码设置错了，因为我是java新手。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:55:05.093

我会因为这个被打脸...

```
label.setLayout(new GridBagLayout());
GridBagConstraints gbc = GridBagConstraints();
gbc.insets = new Insets(4, 0, 4, 0);
gbc.gridwidth = GridBagConstraints.REMAINDER;

label.add(button, gbc);
// add the other buttons 
```

**更新**

就个人而言，我会创建一个 custom `JPanel`，它会绘制背景，然后使用`GridBagLayout`上面的

**更新**

这个问题的问题是“取决于”

这取决于您希望如何实现实际按钮。因为您留下了“空白”空间，所以我假设您打算在图像上渲染一些按钮。我个人会渲染一个完整的图像，然后添加一些普通按钮，但这是你的项目，不是我的。

如果您想使用类似`JButton`（或任何其他`Component`）的东西，您将需要一个自定义布局管理器来帮助您将组件与您留下的间隙对齐。因此，我会简单地做一个漂亮的背景并使用类似的东西`GridBagLayout`......

抱歉，我可能有点过火了，但我玩得很开心。

![在此处输入图像描述](../Images/a7e797130a940bb487d78ac4387d552d.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RadialGradientPaint;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.RoundRectangle2D;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ButtonImage {

    public static void main(String[] args) {
        new ButtonImage();
    }

    public ButtonImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MenuPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class MenuPane extends JPanel {

        public static final Rectangle NEW_GAME_BOUNDS = new Rectangle(221, 157, 262, 85);
        public static final Rectangle LOAD_GAME_BOUNDS = new Rectangle(221, 276, 262, 85);
        public static final Rectangle EXIT_GAME_BOUNDS = new Rectangle(221, 396, 262, 85);
        private BufferedImage img;
        private Rectangle selectedBounds;

        public MenuPane() {
            try {
                img = ImageIO.read(getClass().getResource("/vtr1a.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            MouseAdapter mouseHandler = new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    if (getNewGameBounds().contains(e.getPoint())) {
                        System.out.println("in new");
                        selectedBounds = getNewGameBounds();
                    } else if (getLoadGameBounds().contains(e.getPoint())) {
                        System.out.println("in load");
                        selectedBounds = getLoadGameBounds();
                    } else if (getExitGameBounds().contains(e.getPoint())) {
                        System.out.println("in exit");
                        selectedBounds = getExitGameBounds();
                    } else {
                        selectedBounds = null;
                    }
                    repaint();
                }

                @Override
                public void mouseClicked(MouseEvent e) {
                    if (getNewGameBounds().contains(e.getPoint())) {
                        System.out.println("New Game");
                    } else if (getLoadGameBounds().contains(e.getPoint())) {
                        System.out.println("Load Game");
                    } else if (getExitGameBounds().contains(e.getPoint())) {
                        System.out.println("Exit Game");
                    }
                }
            };
            addMouseListener(mouseHandler);
            addMouseMotionListener(mouseHandler);
        }

        @Override
        public Dimension getPreferredSize() {
            return img == null ? super.getPreferredSize() : new Dimension(img.getWidth(), img.getHeight());
        }

        protected Point getImageOffset() {

            Point p = new Point();
            if (img != null) {
                p.x = (getWidth() - img.getWidth()) / 2;
                p.y = (getHeight() - img.getHeight()) / 2;
            }

            return p;

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (img != null) {
                Graphics2D g2d = (Graphics2D) g.create();

                Point p = getImageOffset();

                g2d.drawImage(img, p.x, p.y, this);

                drawText(g2d, "New Game", getNewGameBounds());
                drawText(g2d, "Load Game", getLoadGameBounds());
                drawText(g2d, "Exit Game", getExitGameBounds());

                g2d.dispose();
            }
        }

        protected void drawText(Graphics2D g2d, String text, Rectangle bounds) {

            FontMetrics fm = g2d.getFontMetrics();

            g2d.setColor(Color.GRAY);
            if (selectedBounds != null) {
                if (bounds.contains(selectedBounds)) {
                    RadialGradientPaint rpg = new RadialGradientPaint(
                            new Point(bounds.x + (bounds.width / 2), bounds.y + (bounds.height / 2)),
                            Math.min(bounds.width, bounds.height), 
                            new float[]{0f, 1f},
                            new Color[]{new Color(252, 180, 42), new Color(97, 205, 181)}
                            );
                    g2d.setPaint(rpg);
                    RoundRectangle2D fill = new RoundRectangle2D.Float(bounds.x, bounds.y, bounds.width, bounds.height, 22, 22);
                    g2d.fill(fill);
                    g2d.setColor(Color.WHITE);
                }
            }

            g2d.drawString(
                    text,
                    bounds.x + ((bounds.width - fm.stringWidth(text)) / 2),
                    bounds.y + ((bounds.height - fm.getHeight()) / 2) + fm.getAscent());

        }

        protected Rectangle getNewGameBounds() {
            return getButtonBounds(NEW_GAME_BOUNDS);
        }

        protected Rectangle getLoadGameBounds() {
            return getButtonBounds(LOAD_GAME_BOUNDS);
        }

        protected Rectangle getExitGameBounds() {
            return getButtonBounds(EXIT_GAME_BOUNDS);
        }

        protected Rectangle getButtonBounds(Rectangle masterBounds) {
            Rectangle bounds = new Rectangle(masterBounds);
            Point p = getImageOffset();
            bounds.translate(p.x, p.y);
            return bounds;
        }
    }
} 
```

您可以轻松地为每个按钮使用单独的图像，而不是渲染文本/图形，而是在所需位置渲染图像。

查看[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T19:52:05.787

我猜你没有添加 Button`JFrame`

```
f.add(button) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:54:52.570

由于您需要与 Swing 按钮不同的按钮，为了使事情更简单，您可以在 JPanel 中绘制按钮（使用 paintComponent 方法和 Java 2D）。每个 JPanel 都是一个按钮。他们，您将使用一些鼠标事件来检测点击等。另一种方法是对您的背景做同样的事情（几个带有图像的 JLabel）并在每个标签中注册鼠标事件。您还可以为您的按钮创建自己的外观和感觉，但这并不是那么简单。当然，您需要更改布局管理器以适合您的按钮。

# android - SDK 工具修订版 21 中的 UI Automator 查看器

> ID：15347294
> 
> 赞同：2
> 
> 时间：2013-03-11T19:48:27.640
> 
> 标签：android, android-layout

每当我不确定哪个视图与谁重叠时，我都会使用**UI Automator Viewer进行各种 UI 调整。**特别是当它脱离图形布局时，即自定义和运行时组件。

虽然我主要将它用于纵向屏幕。我也找不到在横向模式下使用的任何方法。SDK 工具修订版 21 发行说明与往常一样不完整。

**有谁知道如何让它在横向模式下工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T14:18:51.850

很高兴看到谷歌通过他们的 SDKTools 升级修复了它。现在我可以扭转一切。

# php - 如何在 Shopify 中创建包含以前订购的产品的列表？

> ID：15347300
> 
> 赞同：3
> 
> 时间：2013-03-11T19:49:08.630
> 
> 标签：php, html, css, shopify

有什么方法可以在 Shopify 中创建先前订购的商品列表以及图片？基本上，我所追求的是首页上用户先前购买的 3 件商品的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:06:20.040

当客户登录时，将有一个`customer`液体变量可用，其中包含有关用户的大量数据。如果您查看[文档](http://wiki.shopify.com/Customer_variable#customer.orders)，有一个名为的成员变量`order`将为您提供所有用户订单的数组。还有一个名为的变量`recent_order`，它将为您提供用户最近的订单。

如果您熟悉 Shopify 使用的 Liquid 模板语言，这应该足以让您入门。一般来说，[Shopify wiki](http://wiki.shopify.com/Main_Page)非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:29:33.683

用户需要登录才能进行以下操作。如果用户已登录，那么您可以使用以下代码来显示他们的订单。这将仅显示 3 个订单。

```
{% if customer.orders.size != 0 %}
<table>
  <thead>
    <tr>
      <th class="order_number">Order</th>
      <th class="date">Date</th>
      <th class="payment_status">Payment Status</th>
      <th class="fulfillment_status">Fulfillment Status</th>
      <th class="total">Total</th>
    </tr>
  </thead>
  <tbody>
  {% for order in customer.orders limit:3 %}
    <tr class="{% cycle 'odd', 'even' %} {% if order.cancelled %}cancelled_order{% endif %}">
      <td>{{ order.name | link_to: order.customer_url }}</td>
      <td><span class="note">{{ order.created_at | date: "%b %d, %Y" }}</span></td>
      <td><span class="status_{{ order.financial_status }}">{{ order.financial_status }}</span></td>
      <td><span class="status_{{ order.fulfillment_status }}">{{ order.fulfillment_status }}</span></td>
      <td><span class="total money">{{ order.total_price | money }}</span></td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
    <p>You haven't placed any orders yet.</p>
{% endif %} 
```

# list - 在列表中的给定位置插入元素

> ID：15347303
> 
> 赞同：1
> 
> 时间：2013-03-11T19:49:23.030
> 
> 标签：list, scheme, cons

我不知道如何在列表中的 n 位置附加一个元素。例如：

```
(insert-at new k lis)
(insert-at ’N 2 ’(a b c d e f))
=>
’(a b N c d e f) 
```

没关系？：

```
(define (insert-at new k lis)
  (cond (( null? lis)
         (list new))   
        (zero? k   
         (cons new lis))   
        (else       
         (cons (car lis)
               (insert-at new (- k 1) (cdr lis)))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:54:01.797

我会给你一些提示 - 因为这看起来像家庭作业，我不能给你一个直接的答案，如果你通过自己的方式得出解决方案会更有用。填空：

```
(define (insert-at new k lis)
  (cond (<???>       ; if the list is empty
         <???>)      ; return a list with the single element `new`
        (<???>       ; if `k` is zero
         <???>)      ; cons `new` with the list
        (else        ; otherwise
         (cons <???> ; cons the lists' current element and
               (insert-at new <???> <???>))))) ; advance the recursion 
```

请注意，这里的“推进递归”意味着传递列表的其余部分并将`k`索引递减一个单位。`k`一旦索引为零或到达列表的末尾，我们就完成了。不要忘记测试程序：

```
(insert-at 'N 2 '(a b c d e f))
=> '(a b N c d e f)

(insert-at 'N 0 '(a b c))
=> '(N a b c)

(insert-at 'N 3 '(a b c))
=> '(a b c N) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:11:35.350

如果你有两个功能：

1.  take-n - 作为列表返回前 N 个元素，并且
2.  last-n - 作为列表返回最后 N 个元素

那么你可以写：

```
(define (insert-at value index list)
  (let ((len (length list)))
    (assert (<= 0 index len))
    (append (take-n index list)
            (list value)
            (last-n (- len index) list)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T09:49:11.040

（DEFUN INS-ELEM（第 N 项列表）

（条件

((< Nth 1) (ERROR "Index too small ~A" Nth))

((= Nth 1) (CONS 项目列表))

（（ENDP 列表）（错误“索引太大”））

(T (CONS (FIRST list) (INS-ELEM (1- Nth) item(REST list))))))

然后，只需调用 (INS-ELEM 2 'A '(BCDEF)) 并自己查看结果。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T17:59:15.683

**#lang 球拍**

```
(define (insert-at Index item lst)

(cond

[(< Index 1) (error "Index too small: " Index)]

[(= Index 1) (cons item lst)]

[(> Index (length lst)) (error "Index too big: " Index)]

[else (cons (first lst) (insert-at (- Index 1) item (rest lst)))])) 
```

# 用户3660248

您关于如何解决此问题的想法似乎是正确且有意义的，但是您在 Racket 中的实现是不正确的，我修复了它，现在它可以工作了:)

# parsing - 在地图上显示 kml 文件

> ID：15347309
> 
> 赞同：0
> 
> 时间：2013-03-11T19:49:43.310
> 
> 标签：parsing, google-maps-api-3, overlay, kml, geoxml3

在我的应用程序中，我想使用谷歌地图 api v3 在谷歌地图上显示一个 kml 文件。

在寻找解决方案时，我遇到了 geoxml3，但我并不真正了解它的用途和用途。

任何人都可以解释它是否是使用 geoxml3 覆盖本地存储在我的应用程序中的 kml 文件的解决方案。

或者geoxml3的主要用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:01:18.703

用于显示 KML（使用基于切片的渲染）的 Google Maps API v3 方法是[KmlLayer](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)

[开发人员指南（包括示例）](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

[geoxml3](http://code.google.com/p/geoxml3/)是在 KmlLayer 发布之前开发的，它将 KML 解析为原生 Google Maps API 对象（失去了基于图块渲染的好处，但允许访问单个对象）

KmlLayer 要求 Google 的服务器可以访问 KML。如果文件是本地文件，geoxml3 可以访问本地文件（在某些条件下，使用某些浏览器）并在 Google 地图上呈现它们，但请记住，除非您有营业执照，否则要满足使用条款，您的地图必须是公开的可用（或者您的应用程序必须是 IANAL，您自己阅读[条款](https://developers.google.com/maps/faq#tos)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:01:43.693

geoxml3 是与 Google Maps v3 API 一起使用的 KML 处理器。它允许您在 Google 地图应用程序上呈现 KML 数据。此 KML 数据可用于生成标记、折线或您希望的任何其他对象。

# mysql - 使用 MySQL 在 SQL 中拆分字符串

> ID：15347310
> 
> 赞同：1
> 
> 时间：2013-03-11T19:49:44.260
> 
> 标签：mysql, sql

我需要采用如下邮政编码：

```
S7Y 6H5 
```

在表格中并将其显示为

```
S7Y & 6H5 
```

我找不到在 sql 中拆分字符串的命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:52:37.220

MySQL 不包含拆分功能，但确实包含替换功能。你可以使用：

```
SELECT REPLACE('S7Y 6HS', ' ', ' & ') 
```

不过，对我来说更大的问题是，为什么不在应用程序代码中这样做呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:52:42.247

尝试这个：

```
Select REPLACE ('S7Y 6H5', ' ', ' & ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:56:09.437

您可以使用`INSERT` `INSERT(str,pos,len,newstr)`

```
 SELECT INSERT('S7Y 6H5', 4, 0, ' & '); 
```

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_insert](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_insert)

# xml - 谷歌电子表格到自定义 XML

> ID：15347314
> 
> 赞同：1
> 
> 时间：2013-03-11T19:50:01.873
> 
> 标签：xml, google-sheets

我正在尝试将 Google 电子表格导出到 XML。我搜索了函数 ContentService.MimeType.XML 但不明白如何设置参数。您是否碰巧有一个简单的示例来说明如何加载和显示 XML 内容？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T11:57:14.517

我也搜索了各种选项，因为我的工作依赖于它。我在谷歌上搜索了一个庞大但没有找到任何解决方案和解决方案的形式，这样的内容服务对我不起作用。但这项工作对我来说可能也适合你。

将谷歌电子表格下载为 csv 文件并在 excel 中打开，然后选择所有 (clt+A) 并复制并粘贴到链接[http://www.convertcsv.com/csv-to-xml.htm](http://www.convertcsv.com/csv-to-xml.htm)希望你得到你需要的xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:34:44.007

看起来有几种方法可以做到这一点。一种方法是使用电子表格 API。Google 现在使用 API 的 3.0 版，因此任何 v1 或 v2 代码都不再有效。

[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

您可以做的另一件事是将电子表格发布到 ATOM 或 RSS 提要。如果您转到文件 ->“发布到 Web”，在“获取已发布数据的链接”下，您可以从下拉列表中选择 ATOM 或 RSS 并获取 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T20:51:42.467

对验尸感到抱歉。

试试[这里](https://mashe.hawksey.info/2012/08/templated-export-for-google-spreadsheets/)解释*的电子表格模板导出*。

该技巧包括一个脚本，该脚本可以导入电子表格以添加各种格式的导出功能。甚至还有一段[youtube 视频](https://www.youtube.com/watch?v=1CAHXLaCatA)解释了如何将工作表的片段导出为 JSON。

# html - 画一堆形状

> ID：15347315
> 
> 赞同：1
> 
> 时间：2013-03-11T19:50:07.140
> 
> 标签：html, canvas, svg, webgl

我正在尝试构建一个 Web 工具来生成由一堆形状组成的图像。每个形状元素都源自一个原始形状；推导基本上是通过扩展*x*像素，然后将其旋转*y*度，然后将其放置在堆栈的“末尾”来创建的。在下图中，原始形状是一个白色的七边形，边上略微弯曲。粉红色派生是通过以下步骤创建的：

1.  复制白色七边形并将其放大 10 像素。
2.  将其旋转 +/- 8 度。
3.  把它放在白色七边形后面。

我的问题是哪种网络技术适合（也是最简单的）来完成这项任务？HTML5 画布、SVG 还是 WebGL？我倾向于画布，但[它只支持一种原始形状，即矩形](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes?redirectlocale=en-US&redirectslug=Canvas_tutorial/Drawing_shapes)。

对于弯曲的一面，我认为没有一个库可以自动执行此操作。我可能需要求助于手动操作，例如在画布中使用*arcs() 。*

![一堆形状](../Images/112711ea06d05bad3f2aaf73c5811a79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:35:50.963

**这是绘制一堆同心旋转多弧形状的代码**

![在此处输入图像描述](../Images/f0f49f389857106501bb22382447e89a.png)

此代码允许您定义多边形中的边数以及弧的插入大小。

此代码只是从下到上堆叠形状，但您始终可以使用 ctx.globalCompositeOperation="destinationover" 在当前形状后面绘制。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/KkteA/](http://jsfiddle.net/m1erickson/KkteA/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        drawArcInsetPolygon(7,100,.8,200,150,2,"gray","pink",-90);

        drawArcInsetPolygon(7,100,.8,200,150,2,"gray","white",45);

        function drawArcInsetPolygon(sideCount,size,arcInset,centerX,centerY,strokeWidth,strokeColor,fillColor,rotationDegrees){
            var radians=rotationDegrees*Math.PI/180;
            ctx.save();
            ctx.translate(centerX,centerY);
            ctx.rotate(radians);
            ctx.beginPath();
            ctx.moveTo (size * Math.cos(0), size *  Math.sin(0));          
            for (var i = 1; i <= sideCount;i += 1) {
                  var cpX= (size*arcInset) * Math.cos((i-.5) * 2 * Math.PI / sideCount);
                  var cpY=( size*arcInset) * Math.sin((i-.5) * 2 * Math.PI / sideCount);
                  var endX= size * Math.cos(i * 2 * Math.PI / sideCount); 
                  var endY= size * Math.sin(i * 2 * Math.PI / sideCount);
                  ctx.quadraticCurveTo(cpX, cpY, endX,endY);
            }
            ctx.fillStyle=fillColor;
            ctx.strokeStyle = strokeColor;
            ctx.lineWidth = strokeWidth;
            ctx.stroke();
            ctx.fill();
            ctx.restore();        
        }

    }); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=400 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:07:02.627

Canvas 应该非常有能力让您轻松克隆、更改和重绘绘图背后的元素 :)。

对于一些简单的事情，截至 2013 年 3 月，我建议使用[Kinetic JS](http://kineticjs.com/)

Blobs 会像这样轻松地为您提供拱形多边形：

```
new Kinetic.Blob({
    x: 200,
    y: 200,
    scale: 2,
    offset: [50, 50],
    points: [{
        x: 36,
        y: 0
    }, {
        x: 81,
        y: 10
    }, {
        x: 100,
        y: 50
    }, {
        x: 81,
        y: 90
    }, {
        x: 36,
        y: 100
    }, {
        x: 0,
        y: 73
    }, {
        x: 0,
        y: 27
    }],
    fill: '#AAFFDD',
    strokeWidth:0.2,
    tension: 1.1
}); 
```

> （链接仅用于历史目的，它不再有效）检查一下~ jsfiddle.net/jaibuu/VUzKP/

# html - 如何更改 Prestashop 1.5.3 默认主题中的颜色？

> ID：15347320
> 
> 赞同：1
> 
> 时间：2013-03-11T19:50:26.037
> 
> 标签：html, css, prestashop

如何更改 Prestashop 1.5.3 默认主题中的特定颜色？

[样品1](http://img29.imageshack.us/img29/2718/sample1hl.jpg)

[样品2](http://img580.imageshack.us/img580/2571/sample2yu.jpg)

[样品3](http://img252.imageshack.us/img252/7856/sample3tl.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:53:00.817

在浏览器中使用任何检查软件（例如 Firefox 中的 FireBug），您将看到需要更改的 CSS 类。

例如对于示例 2 图像，在 global.css 中查找

```
#footer {
background: none repeat scroll 0 0 #333333;
color: #FFFFFF; 
```

}

其中一些可能在 /css 文件夹中，而另一些可能在 modules 文件夹中（要覆盖模块 CSS，请检查此链接[Prestashop Module's CSS Override](https://stackoverflow.com/questions/15343000/prestashop-modules-css-override)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:14:16.063

如果您使用的是 firefox，请使用 firebug 并检查要更改颜色的元素。Firefox 将显示 css 元素（类或 id）、css 文件名和位置以及 css 文件中的行号。这样就很容易找到 css 文件和 css 类/id 并添加您自己的颜色。firebug 还提供了直接在其中添加颜色以用于测试目的的功能，而无需对 css 文件进行任何更改，这样有助于即时查看 css 更改效果。

# c++ - 未定义的静态类变量

> ID：15347326
> 
> 赞同：0
> 
> 时间：2013-03-11T19:50:45.670
> 
> 标签：c++, class, static, undefined

我有以下代码：

```
class gptr_timer {

private:

  static qtimer_t gptr_get_timer;

public:

  static void create_gptr_get_timer(){
    gptr_get_timer = qtimer_create();
  }

  static void destroy_gptr_get_timer(){
    qtimer_destroy(gptr_get_timer);
  }

  static void start_gptr_get_timer(){
    qtimer_start(gptr_get_timer);
  }

  static void stop_gptr_get_timer(){
    qtimer_stop(gptr_get_timer);
  }

  static double get_gptr_get_time(){
    return qtimer_secs(gptr_get_timer);
  }

}; 
```

这会产生以下编译错误：

```
/home/knusbau2/barnes/qppl/gptr.h:24: undefined reference to `ppl::gptr_timer::gptr_get_timer' 
```

我有点困惑，因为我清楚地定义了 gptr_get_timer。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:52:34.477

通过添加定义：

```
class gptr_timer { /* ... */ };       // class definition;
                                      // *delcares* static member variables

qtimer_t gptr_timer::gptr_get_timer;  // *define* static member variables 
```

静态成员定义必须进入一个单独的翻译单元，而类定义通常在标题中。谨防。

成员定义也是*初始化*的地方，除了一些特殊情况（即静态常量表达式）可以在类定义中初始化。

# c# - 验证我的模型中的属性是否高于另一个属性

> ID：15347333
> 
> 赞同：0
> 
> 时间：2013-03-11T19:50:57.763
> 
> 标签：c#, asp.net-mvc, html

我有这个模型，它包含以下两个属性：

```
public int m_ID
public int m_NbrInStock
public int m_QtyToShow 
```

这是我实际呈现的视图：

```
<script src="/Scripts/jquery-1.7.1.min.js"
        type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#selectAll").click(function ()
        {
            var chkValue = $(this).is(":checked");
            $(".divChckBox").prop("checked", chkValue);
        });
    });
</script>
<p>
    @using (Html.BeginForm("SendItems", "Inventory"))
    {
        <p>
            Select / UnSelet All Items @Html.CheckBox("selectAll", true) 
        </p>
        <table>
            <tr>
                <th>Obj Name</th>
                <th>Number In Stock</th>
                (...)
                <th>Quantity</th>
            </tr>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <tr>
                    <td>@Html.DisplayFor(x => x[i].m_Card.m_CardName)</td>
                    <td>@Html.DisplayFor(x => x[i].m_NbInStock)</td>
                    (...)
                    <td>
                        <input type="checkbox" name="itemSending" class="divChckBox" checked="true" value="@Model[i].m_ID"/>
                    </td>

                    <td>@Html.TextBoxFor(x => x[i].m_QtyToShow</td>
                </tr>
            }

        </table>
        <div class="float-right">
            <input type="submit" value="Send"/>
        </div>
    }
</p> 
```

我这里有很多问题：

1.  首先，我需要保留 QtyToShow，因为它稍后将用于数据管理，但由于 HTTPPost，数据无法在模型中存活；
2.  我还需要验证 QtyToShow 永远不会高于 m_NbrInStock 或在这种情况下显示错误消息。

这不是一个简单的任务，因为我在 MVC 开发方面没有太多经验，所以我不知道我该怎么做。你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:02:49.327

有两种方法可以做到这一点：

*   在控制器中手动验证数据
*   编写自定义验证器

第一个是最简单的，第二个是更好的做法。

To get you off the ground and get your app working, you can implement the first way, and then come back and refactor when you're more comfortable with mvc.

So add a property to your viewModel

```
public string QuantityValidationMsg {get; set} 
```

Then in your view display the message

```
<td>@Html.TextBoxFor(x => x[i].m_QtyToShow
 <span>@Html.DisplayFor(x => x[i].m_QuantityValidationMsg)</span></td> 
```

Then in your post action (which needs to accept a `List<yourViewModel>`, *not* a `List<int>`, btw)

```
viewModel.QuantityValidationMsg = null;
if (viewModel.QtyToShow > viewModel.NbrInStock)
{
  viewModel.QuantityValidationMsg = "Error Message!";
} 
```

For the second approach, you would create a new class that implements `ValidationAttribute` and define something along the lines of:

```
public class ValidateQuantity : ValidateAttribute
{
  private const string MESSAGE = "Error Message";
  public ValidateQuantity (int qtyInput, int qtyConfirm)
      : base( MESSAGE )
  {
     Input = qtyInput;
     Confirm = qtyConfirm;
  }

  public int Input {get; private set;}
  public int Confirm {get; private set;}

  public override bool IsValid (object value)
  {
    var properties = TypeDescriptor.GetProperties(value);
    var input = properties.Find(Input, false).GetValue(value); 
    var confirm = properties.Find(Confirm, false).GetValue(value); 
    if( input > confirm)
    {
      return false;
    }
    return true;
  }
} 
```

Then decorate the model property with the new attribute

```
public int m_ID
public int m_NbrInStock

[ValidateQuantity]
public int m_QtyToShow 
```

And add the validation message in the view

```
@Html.ValidationMessageFor(m => m.m_QtyToShow) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:00:18.120

This kind of thing is terribly easy to express in Mkay, a custom attribute I wrote for ad hoc rules like this. It's available as a nuget package. After installing, all you need to do is annotate your model property like this:

```
[Mkay(">= m_NbrInStock")]
public int m_QtyToShow 
```

If you're interested, you can read more about how Mkay works at my blog: [https://einarwh.wordpress.com/2013/02/15/mkay-one-validation-attribute-to-rule-them-al/](https://einarwh.wordpress.com/2013/02/15/mkay-one-validation-attribute-to-rule-them-al/)

# excel - Open XML SDK - 动态创建行

> ID：15347339
> 
> 赞同：2
> 
> 时间：2013-03-11T19:51:26.953
> 
> 标签：excel, insert, row, openxml-sdk

我需要使用 XML SDK 创建一个 Excel 文件。我以前用 XML SDK 做过，但不确定如何根据数据动态创建行。

因此，我有静态的页眉和页脚。对于正文，不确定如何动态添加行。

有没有人可以链接到我可以进一步理解的地方或一些示例代码。

顺便说一句，我正在将它与 c# 一起使用。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T16:35:37.837

您必须跟踪动态插入的行之后的所有行的行 ID 和更新行 ID。您会发现自己正在编写一个库来建模和编写所有内容。与其重新发明轮子，不如使用已经开发的第三方库来消除这种头痛，例如 ClosedXML [http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)怎么样？

# algorithm - 在 2D 平面中找到正方形边长是 R 吗？

> ID：15347347
> 
> 赞同：3
> 
> 时间：2013-03-11T19:51:53.260
> 
> 标签：algorithm, data-structures, computational-geometry, graph-algorithm

我在高频交易公司面试，他们问我

在二维平面中找到一个长度大小为 R 且具有给定 n 个点的正方形

条件：

--平行于轴的边，它至少包含n个点中的5个

运行复杂度与 R 无关

他们告诉我给他们 O(n) 算法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:35:10.880

有趣的问题，感谢发布！这是我的解决方案。感觉有点不雅，但我认为它符合问题定义：

输入：`R`,`P = {(x_0, y_0), (x_1, y_1), ..., (x_N-1, y_N-1)}`

输出：`(u,v)`使得有角的正方形`(u,v)`至少`(u+R, v+R)`包含 5 个点`P`，如果不`(u,v)`存在，则为 NULL

约束：渐近运行时间应该是`O(n)`

`RxR`考虑用正方形平铺平面。构造一个稀疏矩阵，`B`定义为

```
B[i][j] = {(x,y) in P | floor(x/R) = i and floor(y/R) = j} 
```

在构建`B`时，如果您找到包含至少五个元素的条目，则停止并输出包含五个点的矩阵条目`(u,v) = (i*R, j*R)`。`i,j`

如果 的构造`B`没有产生解决方案，那么要么没有解决方案，要么边长的正方形`R`与我们的平铺不对齐。为了测试第二种情况，我们将考虑来自四个相邻图块的点。

迭代中的非空条目`B`。对于每个非空条目`B[i][j]`，请考虑条目本身所表示的图块以及上方和右侧的图块中包含的点的集合。这些是条目中的要点：`B[i][j], B[i+1][j], B[i][j+1], B[i+1][j+1]`。这个集合中的点不能超过 16 个，因为每个条目必须少于 5 个。检查这个集合并测试这个集合中的点中是否有 5 个点满足问题标准；如果是这样，请停止并输出解决方案。（我可以更详细地指定这个算法，但是因为（a）这样一个算法显然存在，并且（b）它的渐近运行时间是`O(1)`，所以我不会详细说明）。

如果在迭代后`B`没有找到解决方案中的条目，则输出 NULL。

的构造`B`只涉及一次传递`P`，因此是`O(N)`。 `B`不超过`N`元素，所以迭代它是`O(N)`. 中的每个元素的算法`B`考虑不超过 16 个点，因此不依赖于`N`和`O(1)`，因此整体解决方案符合`O(N)`目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:05:49.220

Run through set once, keeping the 5 largest x values in a (sorted) local array. Maintaining the sorted local array is O(N) (constant time performed N times at most).

Define xMin and xMax as the x-coordinates of the two points with largest and 5th largest x values respectively (ie (a[0] and a[4]).

Sort a[] again on Y value, and set yMin and yMax as above, again in constant time.

Define deltaX = xMax- xMin, and deltaY as yMax - yMin, and R = largest of deltaX and deltaY.

The square of side length R located with upper-right at (xMax,yMax) meets the criteria.

Observation if R is fixed in advance:

*   O(N) complexity means no sort is allowed except on a fixed number of points, as only a Radix sort would meet the criteria and it requires a constraint on the values of xMax-xMin and of yMax-yMin, which was not provided.
*   Perhaps the trick is to start with the point furthest down and left, and move up and right. The lower-left-most point can be determined in a single pass of the input.
*   Moving up and right in steps and counitng points in the square requries sorting the points on X and Y in advance, which to be done in O(N) time requiress that the Radix sort constraint be met.

# sass - Gruntjs：为什么将 scss 编译为空文件？使用 grunt-contrib-sass 插件

> ID：15347348
> 
> 赞同：4
> 
> 时间：2013-03-11T19:51:54.860
> 
> 标签：sass, gruntjs

我正在尝试使用 grunt-contrib-sass 插件（使用 grunt v0.4.0）编译 scss 文件。编译结果是一个空的 css 文件。下面是 base.scss、Gruntfile.js 和 package.json 文件。

基础.scss

```
$color: #000;

header{
color: $color;  
} 
```

Gruntfile.js

```
module.exports = function(grunt) {
// Project configuration.
grunt.initConfig({
    // Metadata.
    pkg: grunt.file.readJSON('package.json'),       
    sass: {
        dist: {
            options: { style: "expanded", trace: true },
            files: { "base.css": "base.scss" }
        }       
    }
});

grunt.loadNpmTasks('grunt-contrib-sass');

// Default task.
grunt.registerTask("default", [""]);
grunt.registerTask("sass--",["sass"]);
}; 
```

包.json

```
{
"name": "my_grunt",
"version": "1.0.0",
"description": "New to Grunt",
"main": "index.js",
"scripts": {
    "test": "test"
},
"repository": {
    "type": "git",
    "url": "none"
},
"keywords": [
        "none"
],
"author": "none",
"license": "BSD",
"devDependencies": {
        "grunt-contrib-sass": "~0.2.2"
}
} 
```

结果：

我运行 sass 命令“grunt sass”或“grunt sass--”，结果只是一个没有任何错误的空 css 文件。

非常感谢您的帮助

纽索尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T22:11:42.593

如果你还没有全局安装 Grunt，你要么安装 Grunt，要么将 Grunt 添加为依赖项。否则 Grunt 将无法工作。

要在终端中全局安装 Grunt`npm install -g grunt-cli`或添加为“devDependency”：

```
"devDependencies": {
      "grunt": "0.4.x",
      "grunt-contrib-sass": "0.7.x",
   } 
```

* * *

**编辑：** 在谷歌上搜索这个问题时，我偶然发现了一个在 Github 上报告的错误，该错误来自解决了他的问题的同一用户。仅针对可能遇到相同问题的每个人，这是他的解决方案：

> 该错误是由我在命令处理器（Windows 注册表）中设置的手动配置引起的，我从中添加了一个自动运行来更改默认命令提示符。

# wpf - WPF 缩放但保留一些项目的宽度、高度和位置

> ID：15347353
> 
> 赞同：1
> 
> 时间：2013-03-11T19:52:01.527
> 
> 标签：wpf, zooming

我想要得到的是对控件集合进行缩放但保留此控件子集的宽度、高度和位置的任何方式。我已经看到了[如何在 WPF 放大和缩小时保持元素大小的问题？](https://stackoverflow.com/questions/13337386/how-to-keep-element-size-while-wpf-zoom-in-and-out)，似乎非常符合我的要求，但没有得到回答，也不是很明确，所以会改进这个问题。

目前我正在使用扩展为 .net 框架 4.0 的 WPF 工具包附带的 Zoombox 控件，但我可以更改它。我拥有的结构如下：

```
<Border x:Name="drawRegionBorder" Grid.Column="1" Grid.Row="1" d:LayoutOverrides="Width, Height" BorderThickness="1" CornerRadius="4" BorderBrush="{StaticResource BorderBrush}" >
        <xctk:Zoombox x:Name="zoomBox">
            <Grid x:Name="drawRegion" Height="{Binding Height}" Width="{Binding Width}" HorizontalAlignment="Left" VerticalAlignment="Top" Background="{DynamicResource DrawBackgroundBrush}">
                <Image Source="{Binding Image}" ... />
                <ListBox x:Name="points" ItemsSource="{Binding Points}">
                    <ListBox.Template>
                        <ControlTemplate>
                            <Canvas IsItemsHost="True"/>
                        </ControlTemplate>
                    </ListBox.Template>
                </ListBox>
                <ListBox x:Name="paths" ItemsSource="{Binding SomePaths}">
                    <ListBox.Template>
                        <ControlTemplate>
                            <Canvas IsItemsHost="True"/>
                        </ControlTemplate>
                    </ListBox.Template>
                </ListBox>
                <!--... Others ...-->
            </Grid>
        </xctk:Zoombox>
</Border> 
```

我在这里有几个列表框，在一个网格内，每个列表框的项目面板是一个画布，所以每个子项（但图像）都将位于画布内，每个子项都将设置`Canvas.X`和`Canvas.Y`属性。所以我想要的是任何方式进行缩放（放大或缩小），并保持点（椭圆）或路径的大小......

由于缩放，是 wpf 的缩放转换，我想可能是在放大时执行此操作的一种方法，将缩小到要保持大小的控件，反之亦然。

特定行为的一个示例是混合设计器，例如，当您放大具有行和列的网格时，列指示器保持原始大小，类似的东西是我想要的点和路径。

我会欣赏任何解决方案，可能是库、附加属性、行为或代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:38:25.017

Blend 设计器使用 Adorners 作为其操纵器。大小是根据缩放当前缩放计算的。如果您对使用类似的技术感兴趣，那么自己进行计算实际上并不难。

您将创建一个设置为控件边界的装饰器，然后根据设计器中的缩放应用比例因子。因此，如果您缩放 2.0，那么您将 Scale 2.0 的 RenderTransform 应用到您的缩放控件，同时将您的装饰器计算为缩放控件的 ActualWidth 和 ActualHeight 的 2.0（因为这两个属性不考虑 RenderTransformations）。好消息是，由于一切都使用双精度数，因此在进行此类计算时，您可以获得像素完美的精度。

通过使用这种方法，您可以获得缩放主控件的能力，而您的操纵器只是缩放到缩放的控件，但始终保持其控件大小。

[本](http://www.dotnetfunda.com/articles/article1201-wpf-adorner.aspx)教程是一个很好的起点。在 OnRender 方法中，您要应用缩放因子（通过根据 UIElement 的 ActualWidth/Height 计算装饰器的边界，然后乘以缩放因子）。你如何应用你的装饰器很大程度上取决于应用程序的上下文——如果你正在做一个设计师，那么你会想要在设计画布中应用装饰器或根据项目选择来应用装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:36:26.143

我进行了一项研究并发现了一些有用的东西，例如，如果您正在使用 Adorner，您可以覆盖`GetDesiredTransform`以设置您希望您的 adorner 执行的转换，在这里您可以将对您的 adorner 进行的转换设为 null . 有关更多详细信息，请参阅[如何在 Adorner GetDesiredTransform 方法中从 GeneralTransform 中排除 scaleTransform。](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/ff1764d7-9012-43bf-a0c9-09c5c0242f91/)在女士。但我认为如果我想在控件上实现它，我需要自己控制变换。

# java - 改变jButtons的功能是不好的设计吗？

> ID：15347356
> 
> 赞同：1
> 
> 时间：2013-03-11T19:52:09.017
> 
> 标签：java, swing, jbutton, actionlistener

我正在编写一个使用 jButton 的小型应用程序。为了这个问题，我们称它为`nextButton`。在整个程序生命周期中更改 jButton 的功能是不好的设计吗？有点像状态机。

因此，每次单击`nextButton`我的应用程序模式都会转换到下一个“状态”，并且视图会相应地改变。

IE

```
class NextButtonListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        ServiceMode mode = model.getMode();    
        switch (mode) {
            case SELECT:
                // alter view and give nextButton function1
                ...
                model.setMode(ServiceMode.CHECK);         
            break;
            case CHECK:
                // alter view and give nextButton function2
                ...
                model.setMode(ServiceMode.COPY);    
            break;                
            case COPY:
                // alter view and give nextButton function3
                ...
                model.setMode(ServiceMode.END);                    
            break;                
            case END:
                // alter view and give nextButton function4                   
                ... 
            break;
        }
    }
} 
```

只实例化具有自己功能的新按钮会更好吗？或者如果可能的话，使用一个具有多种功能的按钮会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:57:16.737

为了确保用户知道这次按下按钮后会发生这种情况，我建议根据上下文（[JButton.setText](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setText%28java.lang.String%29)）更改按钮标签甚至图标。

否则，似乎不是问题。根据上下文改变、出现或消失的按钮很常见，尤其是在工具栏等地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:56:13.023

不，这不是糟糕的设计。沿着这个走。

# gradle - Gradle multiproject 给出“在项目中找不到属性‘sourceSets’”错误

> ID：15347364
> 
> 赞同：22
> 
> 时间：2013-03-11T19:52:33.633
> 
> 标签：gradle, multi-project

我有很好的 gradle 配置，一切都很好。但是我的多项目构建中的一个项目非常多地来自其他项目，我很乐意将它移动到另一个 git repo 并配置子模块来处理它。

首先，我将 Project 及其资源移至 subfolder `Libraries/MovedProject`。在 gradle 配置中更改了一些行后，它工作正常。但后来我决定为这个项目编写一个新的 build.gradle，并将所有配置从主配置移到那里。

这就是一切停止工作的地方。当我尝试调用任何任务时，它总是以`Could not find property 'sourceSets' on project ':Libraries/MovedProject'`. 负责它的线路是：

```
dependencies {
    ...
    if (noEclipseTask) {
        testCompile project(':Libraries/MovedLibrary').sourceSets.test.output
    }
} 
```

我用它来运行测试，在这些测试中我使用来自其他项目的类。如果我删除该行，则构建仅在到达使用 MovedProject 的项目的 compileTestJava 任务时才会失败。如果我删除那条线并打电话，`gradle :Libraries/MovedLibrary:properties`我可以看到：

```
...
sourceCompatibility: 1.7
sourceSets: [source set main, source set test]
standardOutputCapture: org.gradle.logging.internal.DefaultLoggingManager@1e263938
... 
```

虽然`gradle :Libraries/MovedLibrary:build`正确构建。

目前，我已将所有内容设置如下：

1.  目录：

    *   /SomeMainProject1
    *   /SomeMainProject2
    *   /SomeMainProject3
    *   /图书馆
        *   /已移动项目
            *   构建.gradle
            *   依赖项.gradle
            *   项目.gradle
            *   任务.gradle
    *   /建造者
        *   依赖项.gradle
        *   项目.gradle
        *   任务.gradle
    *   构建.gradle
    *   设置.gradle
2.  设置.gradle

    ```
    include Libraries/MovedProject,
            SomeMainProject1,
            SomeMainProject2,
            SomeMainProject3 
    ```

3.  MovedProject 的源集定义在`Libraries/MovedProject/project.gradle`：

    ```
    sourceSets {
        main {
            java {
                srcDir 'src'
                srcDir 'resources'
            }
            resources { srcDir 'resources' }
        }
        test { java {
            srcDir 'test/unit'
        } }
    } 
    ```

4.  使用 sourceSets.test.output 的依赖项存储在 中`Builder/dependancies.gradle`，并为需要 MovedProject 运行测试的每个项目设置：

    ```
    project(':SomeMainProject1') {
        dependencies {
            ...

            if (noEclipseTask) {
                testCompile project(':Libraries/net.jsdpu').sourceSets.test.output
            }
        }
    } 
    ```

摆脱该错误并使用当前目录结构制作 gradle 构建项目的最简单方法是什么？我想了解为什么 gradle 看不到该属性。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T12:48:45.957

有问题的行是有问题的，因为它假设项目在当前项目之前`:Libraries/MovedLibrary`被*评估*（未执行），但情况可能并非如此。如果不是，则尚未配置其他项目的源集。（甚至没有`sourceSets`属性，因为该`java-base`插件尚未应用。）

一般来说，最好不要接触其他项目的项目模型，特别是如果它们不是当前项目的子项目。在项目 A 使用项目 B 的测试代码的情况下，推荐的解决方案是让项目 B 公开一个测试 Jar（通过`artifacts {}`块），然后由项目 A 使用。

如果您想保持原样，您可以使用`gradle.projectsEvaluated {}`or来解决问题`project.evaluationDependsOn()`。有关更多信息，请参阅[Gradle 构建语言参考](http://gradle.org/docs/current/dsl/index.html)。

# internet-explorer-8 - ie8 -> ie9 升级和 x-ua

> ID：15347366
> 
> 赞同：0
> 
> 时间：2013-03-11T19:52:34.407
> 
> 标签：internet-explorer-8, cross-browser

我有一个以 ie8 作为当前强制浏览器的公司应用程序。机器被锁得很紧，我什至无法测试其他任何东西，因为我无法安装其他任何东西。没有使用其他版本的ie。它是 100% ie8。没有 7，没有 9。它们默认以 ie 7 compat / ie8 quirks 模式运行。

为了让东西正常工作并强制标准模式，我不得不使用 html 5 DTD（为将来准备好移动开发人员的网站而不是 xhtml4）和

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

模板中的标题。

我不知道他们什么时候会去 ie9... 甚至跳到 ie10。

在无法在 ie9 或 ie10 或壁虎浏览器中对其进行测试的情况下，未来证明这个 Intranet 站点的最佳方法是什么？我尝试遵循严格的标准并使用 jquery 和 css 保持干净，并且没有内联标记。

ie9 在看到 ie=8 x-ua 标头时会做什么？我应该用别的东西代替这个吗？搬家时我可能不在使用这个应用程序。我应该为未来的开发人员留下哪些注意事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:45:47.537

将 X-UA-Compatible 设置为 IE=8。IE9 和 IE10 会尝试切换到 IE8 模式。

# wcf - 在 WCF 中使用实体框架的步骤

> ID：15347374
> 
> 赞同：2
> 
> 时间：2013-03-11T19:52:43.743
> 
> 标签：wcf, entity-framework, wcf-data-services

我有一个在 WCF 中使用实体框架的问题。我正在使用 .NET 4.5 和 EF DbContext。

以下是我知道在 WCF 中使用 EF 时要做的事情。可能是它们不够，或者有些不是必需的。

1.  创建 EF ADO.NET 模型。
2.  使用 DbContext 模板生成器将 POCO 类分离到一个单独的项目 (ProjectName: Entities)。
3.  将POCO项目的TT模板指向数据项目中的edmx文件（ProjectName：Data）。“..\数据\MyEdmx.edmx”
4.  在 POCO 项目的 .TT 文件中添加 [DataContract(IsReference(True))] 和 [DataMemeber] 属性，以便类和属性具有序列化属性。将 Runtime.Serialization 引用添加到项目并将命名空间添加到 .TT 文件。这使得在保存 .TT 文件或添加新实体时重新创建类时不会丢失您的属性声明。
5.  添加 ProjectName：对 Data 项目的实体引用。
6.  在数据项目的 Context.tt 文件中关闭 ProxyCreation 和 LazyLoading。
7.  将 (ProjectName: Entities) 和 (ProjectName: Data) 添加到您的 wcf 服务项目。
8.  将 EntityFramework 连接字符串复制到您的 WCF 项目。
9.  如果您希望填充导航对象，则服务中的所有选择方法都必须使用 .Include。当您想要加载或想要显示限制数据时，这可以提供更好的控制。此外，由于延迟加载关闭，您不会自动获得孩子/相关。
10.  插入或更新或删除，服务必须创建上下文并手动设置要修改或添加的对象状态？否则将不会保存更改。使用 DbContext.Attach 适当地附加和设置实体的状态已添加、已修改等。

我遇到的问题是我找不到一个很好的示例来执行将 EF 与 WCF 结合使用的步骤。我只能看到零碎的东西。可能我是 WCF EF 世界的迟到者，因此找不到。

不确定我是否可以使用代理 WCF。我还没有完全理解代理的优势。

我还阅读了使用 DTO 作为 EF 和服务之间的层的建议。这需要一个映射器到位。我不知道我是否需要它。但是这个想法很清楚，它有助于隐藏业务对象中显示的任何不必要的数据库列。例如，审计列，如创建者、更新者等，我们不会在客户端中显示。

我没有选择使用 DataServices，因为我失去了从 WCF 获得的其他绑定选项。我不知道失去 DataServices 考虑需要/支持其他绑定机制的客户端的未来需求的简单性是否是一件好事。

任何建议表示赞赏。

**额外更新**

我确实在 MSDN [http://msdn.microsoft.com/en-us/library/ee705457(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee705457(v=vs.100).aspx)中找到了这个。一些链接指向预发布文档。但这为我在使用 EF 和 WCF 时提供了更多的想法。

本文展示了如何在 WCF 中使用代理，对 POCO 进行更改跟踪。这对我来说是一个好的开始。如果有人有更多建议，请提供您的想法。

**更新 2** * *N-Tier 的另一个优秀链接**

[http://msdn.microsoft.com/en-us/magazine/dd882522.aspx](http://msdn.microsoft.com/en-us/magazine/dd882522.aspx)

我很高兴我所花费的时间真的在教育我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:27:15.320

经过大量阅读这里和其他论坛后，我在将 EF 与 WCF 结合使用方面取得了进展。

我按照前面的步骤进行。我能够看到使用 DTO 的优势。这确实允许您隐藏不需要向客户端或其他服务公开的字段。但由于时间限制，我不愿引入 DTO。

我使用了 context.Attach、context.Add 和 context.Entry。

我还做了一个小原型来使用 WCF 数据服务。那是非常快节奏的发展。由于学习其功能的时间限制，我暂时不使用 WCF 数据服务。

# javascript - FB.getLoginStatus 不会在原生 Android 浏览器中触发回调

> ID：15347379
> 
> 赞同：1
> 
> 时间：2013-03-11T19:53:19.690
> 
> 标签：javascript, facebook, authentication, sdk

当我在 ICS 和 Jellybean 的原生 Android 浏览器上查看它时，这个问题刚刚出现在我的应用程序中。一切都可以在桌面浏览器甚至 Android 版 Chrom 上正常运行。过去几天发生了这种情况，上周工作正常，代码中没有任何变化。

下面的代码是我的应用程序的简化版本，本质上是我正在做的启动与 FB 的连接。我期待 A 和 B 中的警报，或者 A 和 C 会弹出，但相反，什么也没有发生。

```
window.fbAsyncInit = function () {
    FB.init({
        appId: '', // App ID
        channelUrl: 'http://localhost/fb/channel', // Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true // parse XFBML
    });

    FB.getLoginStatus(function (response) {
        alert("any response"); //<-- A
        if (response.status == 'connected') {
            alert("connected"); // <-- B
        } else {
            //somehow user was not already signed in or did not fully authorize
            FB.login(function (response) {
                if (response.authResponse) {
                    alert("connected"); // <-- C
                } else {
                    console.log('User cancelled login or did not fully authorize.');
                }
            });
        }
    });
};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk',
        ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

有没有人遇到同样的情况并有解决方法或解决方案？

# javascript - 发送带有表单的 javascript 函数变量

> ID：15347383
> 
> 赞同：0
> 
> 时间：2013-03-11T19:53:33.170
> 
> 标签：javascript, html

我需要发送一个带有表单的 javascript 函数返回的变量。

```
<form name="RegForm"  method="post" action="/validate_accountinfo.php" onsubmit="send()">
</form>

function send()
{
   var number = 5;
   return number;
} 
```

在 validate_accountinfo.php 我想返回函数的值。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:58:11.460

在您的表单中放置一个隐藏字段，并在您的 javascript 函数中设置其值。

隐藏字段：

```
<input type="hidden" id="hdnNumber"> 
```

JavaScript：

```
function send(){
    var number = 5;
    document.getElementById("hdnNumber").value = number;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:57:06.293

向表单添加一个`<input hidden id="thevalue" name="thevalue" />`，使用 javascript 设置其值，然后提交表单。

```
<form id="RegForm" name="RegForm"  method="post" action="/validate_accountinfo.php" onsubmit="send()">
    <input hidden id="thevalue" name="thevalue" />
</form>

<script type="text/javascript">
function send()
{
   var number = 5;
   return number;
}
document.getElementById('thevalue').value = send();
document.getElementById('RegForm').submit();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:57:25.287

使用 jQuery创建一个`<input type="hidden" id="field" />`并更新它的值。

```
$("#field").attr({value: YourValue }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:58:11.537

添加隐藏输入并在发送前填充它。确保您指定了一个`name=`属性。

```
<form name="RegForm"  method="post" action="/validate_accountinfo.php" onsubmit="send()">
    <input type="hidden" name="myvalue"/>
</form>

function send()
{
    var number = 5;

    // jQuery
    $('input[name=myvalue]').val( number )

    return true;
} 
```

# c++ - 如何在 C++ 中打印堆栈

> ID：15347384
> 
> 赞同：1
> 
> 时间：2013-03-11T19:53:36.750
> 
> 标签：c++, stack

所以对于我的一个任务，我们必须修改一个堆栈类并测试它。我已经成功地添加了所有必要的方法，但我坚持的是当我演示它时如何最好地打印出堆栈中的内容。所以基本上，我要用随机数据填充堆栈并测试我实现的各种方法，但我不知道如何将堆栈打印到控制台以表明我实际上已经完成了我应该做的事情. 我知道这是一个非常基本的问题，但我只是被困在这里。我猜我必须以某种方式使用 getTop 方法，但是如何使用它来打印堆栈中的内容。这是我所有的文件：

StackP.cpp

```
 #include <cassert>

    using namespace std;

     #include "StackP.h"

     Stack::Stack()
        : topPtr(0) {
     }

     Stack::Stack(const Stack& aStack)
        throw(OutOfStorageException) {

        // Original list is empty
        if (aStack.topPtr == 0) {
           topPtr = 0;
        }
        else {
           try {
              // Copy first node
              topPtr = new StackNode;
              topPtr->item = aStack.topPtr->item;

              // Copy rest of list
              StackNode* newPtr = topPtr;    // Pointer to new list 
              for (StackNode* origPtr = aStack.topPtr->next;
                   origPtr != 0;
                   origPtr = origPtr->next) {
                 newPtr->next = new StackNode;
                 newPtr = newPtr->next;
                 newPtr->item = origPtr->item;
              }

             newPtr->next = 0;
           }
           catch (const bad_alloc&) {
           // Release all memory successfully allocated in this copy
              while (!isEmpty() ) {
                pop();
              }
              throw OutOfStorageException("Out of memory");
           }
        }
     }

     Stack::~Stack() {

        // Pop until stack is empty
    while (!isEmpty() ) {                            
       pop();
    }
    assert(topPtr == 0);
 }

 bool Stack::isEmpty() const {

    return topPtr == 0;
 }

 void Stack::push(const StackItemType& newItem)
    throw(OutOfStorageException) {

    try {
       StackNode* newPtr = new StackNode;

       newPtr->item = newItem;

       newPtr->next = topPtr;
       topPtr = newPtr;
    }
    catch (const bad_alloc&) {
       throw OutOfStorageException("Out of memory");
    }
    }
 }

 void Stack::pop()
    throw(OutOfDataException) {

    if (isEmpty() ) {
       throw OutOfDataException("Cannot pop an empty stack.");
    }
    StackNode* temp = topPtr;
    topPtr = topPtr->next;

    temp->next = 0;  // safeguard
    delete temp;
 }

 void Stack::pop(StackItemType& stackTop)
    throw(OutOfDataException) {

    if (isEmpty() ) {
       throw OutOfDataException("Cannot pop an empty stack.");
    }
    stackTop = topPtr->item;
    StackNode* temp = topPtr;
    topPtr = topPtr->next;

    temp->next = 0;  // safeguard
    delete temp;
 }

 void Stack::getTop(StackItemType& stackTop) const
    throw(OutOfDataException) {

    if (isEmpty() ) {
       throw OutOfDataException("Cannot get the top of an empty stack.");
    }
    stackTop = topPtr->item;
 }

  void Stack::popAndDiscard(int count) {

    while (count>0 && !isEmpty()) {

      pop();
      count--;
      }//end while

    }// end popAndDiscard 
```

StackP.h：

```
#ifndef STACKP_H
 #define STACKP_H 1

 #include "OutOfStorageException.h"
 #include "OutOfDataException.h"

 typedef int StackItemType;

 class Stack {
 public:

    Stack();

    Stack(const Stack& aStack)
       throw(OutOfStorageException);

    ~Stack();

    bool isEmpty() const;

    void push(const StackItemType& newItem)
       throw(OutOfStorageException);

    void pop()
       throw(OutOfDataException);

    void pop(StackItemType& stackTop)
       throw(OutOfDataException);

    void getTop(StackItemType& stackTop) const
       throw(OutOfDataException);

    void popAndDiscard(int count);

 private:

    struct StackNode {
       StackItemType item;

       StackNode* next;
    };

    StackNode* topPtr;
 };

  #endif 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:41:48.913

您应该按照@WhozCraig 的建议添加打印功能：

```
void print(std::ostream& os)
{
    StackNode* current = topPtr;
    while(current != NULL)
    {
        os<<current->item<< " ";
        current = current->next;
    }
} 
```

不要忘记`#include <ostream>`

# c++ - set::erase() 对于 set::end 作为其参数有何表现？

> ID：15347386
> 
> 赞同：0
> 
> 时间：2013-03-11T19:53:40.347
> 
> 标签：c++, stl, segmentation-fault, set

假设我们有这段代码：

```
set<int> s;
set<int>::iterator it = s.find(val);
s.erase(it); 
```

正如 cplusplus.com 所说，如果在then`int val`中不存在，将返回.`set<int> s``s.find(val)``set::end`

现在我的问题是，如果我们传递`set::end`给`set::erase()`?

是否可以接收诸如`segmentation fault`or之类的信号`aborted`并得到运行时错误？还是这个特殊情况被处理了`set`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:57:28.090

这是未定义的行为。即它可能什么都不做，使程序崩溃等。不要这样做，即使您的stdlib 实现“工作正常”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T20:00:16.267

在 C++03 中`std::set::erase()`，采用单个迭代器的 的行为在表 69 中定义，其中具有以下假设（添加了突出显示）：

> 在表 69 中，X 是关联容器类，a 是 X 的值，a_uniq 是 X 支持唯一键时的值，a_eq 是 X 的值，当 X 支持多个键时，i 和 j 满足输入迭代器要求并引用 value_type 的元素，[i, j) 是有效范围，p 是 a 的有效迭代器，**q 是 a 的有效可解引用迭代器**，[q1,q2) 是 a 中的有效范围，t 是值X::value_type 的值，k 是 X::key_type 的值，c 是 X::key_compare 类型的值。

表 69 对此`erase()`函数进行了说明：

> `a.erase(q)`- 擦除指向的元素`q`

换句话说，迭代器必须是可解引用的。如果不是，则它是未定义的行为，因为未满足前提条件。

没有关于图书馆以任何特定方式行事的承诺。某些库（例如 MSVC）可以在某些配置中包含迭代器调试。例如，在带有调试配置的 VS 2012 中运行时，您将看到以下内容：

```
---------------------------
Microsoft Visual C++ Runtime Library
---------------------------
Debug Assertion Failed!

Program: C:\Windows\system32\MSVCP110D.dll
File: c:\program files (x86)\microsoft visual studio 11.0\vc\include\xtree
Line: 1326

Expression: map/set erase iterator outside range

For information on how your program can cause an assertion
failure, see the Visual C++ documentation on asserts.

(Press Retry to debug the application)

---------------------------
Abort   Retry   Ignore   
--------------------------- 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T19:58:43.950

对于关联容器，`erase`定义如下：

> `a.erase(q)`
> 返回类型：`iterator`
> 擦除 指向的元素`q`。返回一个迭代器，该迭代器指向紧跟`q`在被擦除元素之前的元素。如果不存在这样的元素，则返回`a.end()`。

此函数仅根据 定义`q`。`q`被描述为“一个有效的可取消引用的 const 迭代器`a`”。过去的迭代器是不可取消引用的，所以你会得到未定义的行为。

> 是否有可能接收到诸如分段错误或中止之类的信号并获得运行时错误？

是的，这是可能的，但你根本无法保证会发生什么。

# linux - SPIKE fuzzer 在 ubuntu 上给出了 LD_LIBRARY_PATH 问题

> ID：15347398
> 
> 赞同：0
> 
> 时间：2013-03-11T19:54:29.923
> 
> 标签：linux, ubuntu, ubuntu-12.04

我正在尝试在 Ubuntu 机器上配置 SPIKE 文件模糊器。它给`Now you need to set your LD_LIBRARY_PATH to include the path to libdisasm.so and the path to libdlrpc.so`.

我确实使用导出设置了 LD_LIBRARY_PATH。但它仍然再次显示相同的错误。似乎 LD_LIBRARY_PATH 不适用于 SPIKE。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:57:43.880

使用您的 LD_LIBRARY_PATH 设置在模糊器可执行文件上运行 ldd （我假设它是一个可执行文件）。它应该向您显示已使用和可能丢失的库。继续修复你的路径，直到满足所有依赖项。

```
[user@host jobs]$ ldd `which gcc`
linux-vdso.so.1 =>  (0x00007fff3e193000)
libm.so.6 => /lib64/libm.so.6 (0x00007fa2c1f4c000)
libz.so.1 => /lib64/libz.so.1 (0x00007fa2c1d34000)
libc.so.6 => /lib64/libc.so.6 (0x00007fa2c197d000)
/lib64/ld-linux-x86-64.so.2 (0x00007fa2c2275000) 
```

# performance - 当优化不再是“微优化”

> ID：15347400
> 
> 赞同：3
> 
> 时间：2013-03-11T19:54:32.273
> 
> 标签：performance, optimization, project-management

我是一名从开发人员职位上脱颖而出的团队负责人/功能架构师，所以我有编码经验，而且现在正在发展的许多事情都是由我首先实现的。现在到重点：为了重构（和一些怀旧）而审查一些代码 我发现了很多可以优化的地方，所以作为一个练习，我给了自己 2 天的时间来探索和改进很多东西。运行基准测试后，我发现总体模块性能提高了约 5%。

因此，我联系了一些同事（以及我管理的团队）并介绍了我的更改。我对“微优化”的一般印象感到惊讶。如果您确实查看每一个优化，那么是的，它们是微观的，但是如果您看大局......

所以我的问题是：什么时候优化不再被视为“微”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:30:26.917

优化是否是微观的通常并不重要。重要的是它是否能让你物有所值。

你写道，你花了整整两个工作日来提高 5% 的性能。你是否明智地度过了那些日子？您修复了应用程序中“最慢”的部分，或者至少是那些最容易修复的性能问题？您的更改是否使您达到了绩效目标（您以前没有这样做过）？在您的情况下，5% 的性能是否重要？通常，如果您发现需要提高绩效，您会希望提高 100% 或 1000%。

您能否在不影响代码的可读性和/或可维护性的情况下执行优化？

此外，这些优化还带来了哪些其他成本？您需要执行多少回归测试？你创造了多少新的错误？

我知道，这看起来更像是问题而不是答案，但这些问题应该决定您是否做出优化的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:30:08.440

就个人而言，我会区分导致算法时间或空间复杂度降低的更改（例如从`O(N^2)`到`O(N)`）和加速代码或减少其内存需求但保持整体复杂性相同的更改。我称后者为微优化。

但是，请记住，虽然这是一个精确的定义，但它不应该是决定是否值得保留更改的唯一标准：降低代码复杂性（如难以理解）通常更重要，尤其是在速度和内存要求不高的情况下不是引起关注的主要原因。

最终，答案将取决于您的项目：对于在嵌入式设备上运行的软件，规则与在 Hadoop 集群上运行的东西不同。

# html - HTML5 输入类型检查用户输入的信息

> ID：15347406
> 
> 赞同：0
> 
> 时间：2013-03-11T19:55:04.823
> 
> 标签：html

我快速浏览了一下，找不到我需要的东西。我希望它是简单的东西。我有一个输入文本框，其类型设置为范围在 1 到 20 之间的数字。这非常有效。

但是，用户可以只输入`abc`or `21`，这不符合这一点。如何设置它以使文本框不允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:10:33.667

Firefox 不支持输入 type="number" 和 "range"。

您可能想使用 javascript 来解决，或者，如果只是 20 个数字（即 1-20）的问题，为什么不使用下拉菜单呢？

如：

```
<select>
    <option>1</option>
</option> 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:59:57.653

也许你可以使用“模式”

```
<input type="text" pattern="[0-9]+" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:13:10.917

HTML5 有一个“数字”类型的输入元素。它看起来像这样：

```
<input type="number" name="quantity" min="1" max="5"> 
```

你可以在这里看到它的作用：[http ://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_number](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_number)

但是，并不是每个浏览器都支持这一点，因此您可能需要验证用户提供的输入。此页面将告诉您哪些浏览器支持此功能：

[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

# error-handling - 执行 strtol 后的错误处理

> ID：15347413
> 
> 赞同：3
> 
> 时间：2013-03-11T19:55:28.617
> 
> 标签：error-handling, errno, strtol

我正在尝试读取 上的几个数字`stdin`，每行一个数字。如果任何行上有任何数字和字符串，我想忽略任何尾随文本。为了实现这一点，我使用了以下代码：

```
while (getline(cin, str)) {
    num = strtol(str.c_str(), NULL, 0);

    if (errno != ERANGE && errno != EINVAL) {
        arr[i++] = num;
        req_pages_size++;
        cout << arr[i-1] << "\t";
    }

    str.clear();
} 
```

ISSUE: 转换不成功后，errno 不会更新为成功转换情况的错误值。对于以前不成功的调用，它的值保持不变。

请让我知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:08:17.407

状态的联机帮助页`errno`：

> `errno`绝不会被任何系统调用或库函数设置为零

但您可以按照手册页中的说明将其设置为零`strtol()`

> 调用程序在调用前应设置`errno`为0，然后通过检查`errno`调用后是否有非零值来判断是否出错。

所以只需添加

```
errno = 0; 
```

打电话之前`strtol()`

# python - 无法导入 UnicodeWriter python 2.7

> ID：15347414
> 
> 赞同：2
> 
> 时间：2013-03-11T19:55:29.380
> 
> 标签：python, csv, unicode, dictionary

我正在尝试将包含带有 unicode 字符的值的字典写入文本文件，并且正在考虑使用 python csv 文档中提到的 UnicodeWriter。但我无法导入它，因为 python 无法识别该模块。我想知道这是否是我的python版本的问题？此外，如果不可能这样做，是否有任何方法可以在 python 中使用 dictWriter 类时指定编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:02:18.497

`UnicodeWriter`不是任何版本的 Python 中的实际模块。文档中给出的代码是一个示例，您必须将其复制到您自己的项目中。

# asp.net-mvc - 在 MVC4 _layout 页面中导入外部标题（链接）？

> ID：15347416
> 
> 赞同：0
> 
> 时间：2013-03-11T19:55:34.740
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的公司有用 php 开发的通用标头。我需要将该页面导入项目中的布局页面。标题可以称为“company.com/inc/custom/footer2sn/”

这怎么能叫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T06:06:05.010

如果要包含的页面是静态 HTML 页面，则可以使用 Partial。只需将 somepage.html 更改为 somepage.cshtml。

例子：

```
@Html.Partial("~/Path/to/somefile.cshtml") 
```

尝试渲染一个普通的 HTML 文件会给你一个错误，例如找不到页面或找不到渲染引擎。

因此，如果您有一个静态 HTML 页面，请将扩展名更改为 CSHTML 并使用 @Html.Partial()

或者

如果您要包含的标头是 PHP 文件，则只要您的服务器已启动并运行并准备好从 PHP 页面提供生成的 HTML，就可以。

你可以编写一个自定义的 HTML Helper

```
public static class MyHelpers
{
  public static HtmlString RenderPHP(this HtmlHelper helper, string path)
  {
    var requestContext = helper.ViewContext.RequestContext;
    UrlHelper url = new UrlHelper(requestContext);
    var client = new WebClient();
    var returnString= client.DownloadString(new Uri(string.format("Http://{0}{1}",      requestContext.HttpContext.Request.Url.Host, url.Content(path))));
    return MvcHtmlString.Create(returnString);
  } 
```

}

简而言之，这只是获取从 PHP 页面生成的 HTML 并将其注入页面中的一个部分。

要在页面中使用它，请使用 Razor 语法，如下所示：

```
<div id="phpPage">
   @Html.RenderPHP("company.com/inc/custom/footer2sn/somepage.php"). <!-- Note this must on a server capable of rendering the php  --> 
```

[来源](http://weblogs.asp.net/imranbaloch/archive/2011/12/10/using-classic-asp-php-and-webform-pages-in-asp-net-mvc-views.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:15:02.747

您可以使用`Html.RenderPartial`：

```
@{ Html.RenderPartial("SomeView"); } 
```

但是，最好让您的布局分层地相互继承，并将您的 HTML 直接放在它所属的层中以用于常见的布局元素：

**_Layout.cshtml**

```
<!doctype html>
<html>
    <head>
        ...
    </head>
    <body>
        <header>
            ...
        </header>

        @RenderBody()

        <footer>
            ...
        </footer>
    </body>
</html> 
```

**_TwoColumnLayout.cshtml**

```
@{ Layout = "~/Views/Shared/_Layout.cshtml"; }

<div id="container">

    <div id="content">
        @RenderBody()
    </div>

    <aside id="sidebar">
        ...
    </aside>
</div> 
```

您可以根据需要继续构建这样的层。只需设置`Layout`它应该继承的模板，然后将`@RenderBody()`下一个子模板或视图的内容放在应该去的地方。

# java - 有没有办法在 Tomcat 中以编程方式将 SSL 设置为强制（例如，不通过 web.xml）？

> ID：15347423
> 
> 赞同：3
> 
> 时间：2013-03-11T19:56:13.923
> 
> 标签：java, tomcat, ssl

我们有一个 java Web 应用程序，它使用 Tomcat 7 部署在许多不同的客户端中。我们的一个客户希望我们强制使用 SSL，以便强制执行 https。其他部署应该没有 SSL，因为它们没有 SSL 证书。

我们知道如何通过 web.xml 中的安全约束标签来强制执行它，但我们希望避免必须对单个客户端进行特殊构建的麻烦，并且希望能够将其设置为数据库参数将由应用程序读取，然后以编程方式强制实施 SSL。

这可能吗？我们如何做到这一点？

提前非常感谢。

乔纳萨斯

* * *

更新：我们需要的是，在这个特定环境中，应用程序会自动将端口 80 重定向到端口 443，禁用端口 80 不是一个可行的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:08:01.603

您可以定义一个过滤器来验证连接是否安全，通过`ServletRequest.isSecure`. 如果不安全，并且上下文中的应用程序需要安全连接，则重定向到您的“https”端点。否则，继续。

伪代码：

```
public class SecureConnectionFilter implements Filter {
    private boolean requireSecure;

    @Override
    public void destroy() {
        return;
    }

    @Override
    public void doFilter(final ServletRequest request,
            final ServletResponse response, final FilterChain filterChain)
            throws IOException, ServletException {
        if(requireSecure && ! (request.isSecure())) {
            // Redirect to secure endpoint
        } else {
            filterChain.doFilter(request,  response);
        }
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        // Determine wether the application in context is required
        // to be secure or not. If this information is not available
        // at startup time then defer this logic to `doFilter`
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:58:57.710

如果这仅适用于一个客户端，只需在 server.xml 中注释掉普通的 http 连接器（和相应的端口），并只保留安全连接器和端口可用。
简单的解决方案，不会影响您的代码或其他部署，您的客户得到他想要的

**更新：**
您可以重定向到 https。尝试：

```
 <Connector port="80" protocol="HTTP/1.1"
               redirectPort="443"/> 
```

另请[参阅](http://www.itworld.com/development/79351/how-configure-tomcat-always-require-https)

# kml - 链接 KML 气球

> ID：15347432
> 
> 赞同：2
> 
> 时间：2013-03-11T19:57:02.643
> 
> 标签：kml, google-earth, kmz

大局：我正在使用 C++ 中的自定义 KML 编写器编写自己的 KML。我有一组共享一些（不是全部）属性的地标。目前，我将共享属性存储为地标所在的父文件夹的属性。这些 KML 可在 Google 地球中查看。

用户可以使用与存储在每个地标/文件夹中的[ExtendedData](https://developers.google.com/kml/documentation/kmlreference#extendeddata)链接的 BalloonStyle 来查看这些数据。地标为其独特的数据共享一个气球样式，当他们单击 Google 地球中的文件夹时，共享数据将使用父文件夹的气球样式显示。

我不能复制每个地标中的共享数据，这就是我将其存储在父文件夹中的原因。

**备选方案 1：**有没有办法在孩子的气球内提供一个用户可点击的指向父文件夹气球的链接？

**备选方案 2：**是否可以在地标的信息气球中显示另一个地标/功能的数据？

据我所知，这两种选择都是不可能的。

**编辑：**简化示例代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <Document>
        <name>MyKml</name>
        <Style id="Style8">             <!-- style for child point -->
            <BalloonStyle>
                <text>
                Point: $[name]&lt;br/&gt;
                Code: $[code]&lt;br/&gt;
                Number of Points: $[numpts] <!-- Alt2: numpts belongs to the parent - this syntax is obviously wrong -->
                Link to parent: $[parentid] <!-- Alt1: if I can't display the parent's properties, can I at least give a clickable link to it? -->
                </text> 
            </BalloonStyle>
        </Style>
        <Style id="Style12">            <!-- style for parent folder -->
            <BalloonStyle>
                <text>
                Point Group: $[name]&lt;br/&gt;
                Number of Points: $[numpts]
                </text>
            </BalloonStyle>
        </Style>
        <Folder>
            <name>Point Group 1</name>
            <styleUrl>#Style12</styleUrl>
            <ExtendedData>
                <Data name="numpts">
                    <value>4</value>
                </Data>
            </ExtendedData>
            <Placemark>
                <name>PT1</name>
                <styleUrl>#Style8</styleUrl>
                <ExtendedData>
                    <Data name="code">
                        <value>TAT1</value>
                    </Data>
                </ExtendedData>
                <MultiGeometry>
                    <Point>
                        <coordinates>-121,47,110</coordinates>
                    </Point>
                </MultiGeometry>
            </Placemark>
            <Placemark>
                <name>PT2 - PT4</name>
                <styleUrl>#Style8</styleUrl>
                <ExtendedData>
                    <Data name="code">
                        <value>TAT2</value>
                    </Data>
                </ExtendedData>
                <MultiGeometry>
                    <Point>
                        <coordinates>-121.090,47.430,1224</coordinates>
                    </Point>
                    <Point>
                        <coordinates>-121.470,47.621,122</coordinates>
                    </Point>
                    <Point>
                        <coordinates>-121.990,47.121,122</coordinates>
                    </Point>
                </MultiGeometry>
            </Placemark>
        </Folder>
    </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:44:20.973

**备选方案 1：有没有办法在孩子的气球内提供一个用户可点击的指向父文件夹气球的链接？**

这是使用[功能锚](https://developers.google.com/kml/documentation/kmlreference#featureanchor)`<a href="target">`来实现的，您可以在描述/气球中使用其 KML id 来引用和链接到地标。如果目标 Feature 具有[LookAt](https://developers.google.com/kml/documentation/kmlreference#lookat)或[Camera](https://developers.google.com/kml/documentation/kmlreference#camera)元素，则从指定的视点查看 Feature。

*href*可以是片段 URL（即，带有 # 符号后跟 KML 标识符的 URL）。您还可以使用分号 (;) 和以下限定符之一将操作附加到 URL：

*   ;flyto (默认) - 飞到特征
*   ;balloon - 打开功能的气球，但不飞到功能
*   ;balloonFlyto - 打开功能的气球并飞到功能

如果您想从该点显示文件夹气球，您可以如下更新 BalloonStyle 文本，并将“id”属性添加到您要引用的文件夹。

```
<Style id="Style8">
  <BalloonStyle>
    <text>
    <![CDATA[ 
    Point: $[name]<br/>
    Code: $[code]<br/>
    Number of Points: $[numpts]
    <BR><a href="#parent;balloon">Link to parent</a>
    ]]>
    </text> 
  </BalloonStyle>
</Style>
<Folder id="parent"> *** Must add "id" attribute to link to it ***
    ...
</Folder> 
```

**备选方案 2：是否可以在地标的信息气球中显示另一个地标/功能的数据？**

不能直接在另一个地标的气球中包含另一个地标的元数据，但可以链接到它并通过用户单击链接切换到显示其他地标。

您可以添加指向地标描述的链接，以通过其 id 链接到 Folder 的相同方式相互链接，然后将*$[description]*占位符添加到 BalloonStyle 文本。

```
 <Style id="style9"> <!-- style for child point -->
        <BalloonStyle>
            <text>
            <![CDATA[
            Point: $[name]<br/>
            Code: $[code]<br/>
            <a href="#parent;balloon">Link to parent</a>
            <br>$[description]
            ]]>
            </text>
        </BalloonStyle>
    </Style>
    ...
    <Placemark id="pt1">
        ...
    </Placemark>
    <Placemark id="pt2">
        <name>PT2 - PT4</name>
        <description>
         <![CDATA[
            <a href="#pt1;balloon">Show P1</a><BR>
             ]]>
        </description>
        <styleUrl>#style9</styleUrl>
        ...
    </Placemark> 
```

# scala - 如何将特征与同名但不同类型的隐式 val 混合？

> ID：15347434
> 
> 赞同：1
> 
> 时间：2013-03-11T19:57:11.823
> 
> 标签：scala, traits

我有来自两个第三方库的特征，我正试图将它们融入我自己的特征中。他们都定义了`implicit val`s named `log`。

但是，它们有不同的类型——一种是 SLF4J `Logger`，另一种是 Spray `LoggingContext`（实际上是 Akka `LoggingAdapter`）。事实上，第二个特征来自 Spray，它是一个`HttpServer`. （不是你可以在 Github 上找到的最新版本，它不再有`val`）。

所以，这里是代码（库一重命名，因为它是专有的，喷雾代码被剪断以显示相关部分）：

```
object LibraryOneShim {
    trait LibraryOne {
        implicit val log: org.slf4j.Logger = ...
    }
}

// https://github.com/spray/spray/blob/a996a5b6bdd830e613583fed86e87bf049fdb8c0/spray-routing/src/main/scala/spray/routing/HttpService.scala
trait HttpService extends Directives {
    val log = LoggingContext.fromActorRefFactory // this is a LoggingContext/LoggingAdapter
}

trait MyTrait extends HttpService with LibraryOne {
    val myRoute = ...
}

class MyActor extends Actor with MyTrait {
    def receive = runRoute(myRoute)
} 
```

这不会编译。编译器抱怨：

> 错误：使用 spray.util.LoggingContext 覆盖类型为 java.lang.Object 的 trait HttpService 中的惰性值日志；org.slf4j.Logger 类型的特征 LibraryOne$class 中的惰性值日志需要 `override' 修饰符 trait DemoService extends HttpService with LibraryOne {

有什么办法可以将这两个特征混合在一起吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:59:35.800

据我所知，唯一的方法是创建一个`CombinedLogger`

```
class CombinedLogger(l1:Logger, l2:LoggingAdapter) extends Logger with LoggingAdapter {
   // proxy methods to the correct logger
} 
```

如果两个记录器都被声明为`def`你可以这样使用它：

```
override def log = new CombinedLogger(super[LibraryOne].log, super[HttpService].log) 
```

在这种情况下，这很棘手，因为它们被定义为`val`告诉 Scala 编译器它们是不会改变的单个值。正因为如此，它不允许你打电话`super.log`。所以你需要复制被覆盖特征的逻辑。

在这种情况下，另一个棘手的部分是您需要在`CombinedLogger`.

# ios - UIAlertView 委托使应用程序崩溃

> ID：15347435
> 
> 赞同：0
> 
> 时间：2013-03-11T19:57:14.470
> 
> 标签：ios, xcode

我通过以下方式将委托设置为 UIAlertView：

```
PhotoViewController *controller = [[PhotoViewController alloc] init];

UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: controller
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show]; 
```

其中 PhotoViewController 不是当前的 UIviewContorller。警报加载正常，但只要我按下确定按钮，应用程序就会崩溃并且我收到此错误：

0x3a61a5b0: ldr r3, [r4, #8] EXC 错误访问

这是什么意思？

编辑：

```
+ (DejalActivityView *)activityViewForView:(UIView *)addToView withLabel:(NSString *)labelText width:(NSUInteger)aLabelWidth;
{
// Immediately remove any existing activity view:
if (dejalActivityView)
    [self removeView];

// Remember the new view (so this is a singleton):
dejalActivityView = [[self alloc] initForView:addToView withLabel:labelText width:aLabelWidth];

if ([labelText isEqualToString:@"Uploading photo (this process might take a while)"]) {
buttonCancel = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[buttonCancel addTarget:dejalActivityView
                 action:@selector(callCancelAlert:)
       forControlEvents:UIControlEventTouchDown];
buttonCancel.frame = CGRectMake(230, 540, 265, 40);
[addToView addSubview:buttonCancel];
[buttonCancel setImage:[UIImage imageNamed:@"socialize-navbar-bg.png"] forState:UIControlStateNormal];
[buttonCancel setTitle:@"Cancel upload" forState:UIControlStateNormal];
}

return dejalActivityView;
}

-(IBAction)callCancelAlert:(id)sender{

PhotoViewController *controller = [[PhotoViewController alloc] init];

UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: controller
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show];
//[alert release];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:23:11.230

委托不是保留属性。这意味着当`controller`超出范围时，ARC 将释放它，并且由于它没有被另一个对象保留，它将被释放。当警报视图尝试向其代理发送消息时，该地址不再有效，并且您会遇到异常。

警报视图的委托需要比警报视图本身更长的寿命。通常，创建警报视图的对象应该是委托。您应该将委托代码移动到创建警报视图的类中。

# php - Modx 画廊错误

> ID：15347437
> 
> 赞同：0
> 
> 时间：2013-03-11T19:57:17.190
> 
> 标签：php, gallery, modx, portfolio

我有一个包含带有图像和链接的小框的投资组合页面。这似乎（在代码中挣扎之后）可以工作，但图像不起作用。

对于投资组合页面上的每个项目：

```
[[!Gallery? &album=`[[+tv.gallery]]` &limit=`1` &thumbWidth=`870` &thumbHeight=`400` &thumbZoomCrop=`2` &toPlaceholder=`projecten`]]

<li class="[[dynamicWidget]]" id="[[+tv.category]]">
[[!+projecten:notempty=`
<div class="item">
  <a href="[[~[[+id]]]]" title="[[+description]]">
    <img src="[[+projecten.image]]" alt="[[+description]]" />
  </a>
</div>
`]]
</li> 
```

（我正在使用默认的画廊功能） thetv.gallery 是我喜欢使用的画廊的 id，但现在我只拿第一张专辑，而不是项目的第一张照片。

它有效，但只有选定的图像不是专辑的第一个项目（tv.gallery），而是该专辑中的第一张或第二张图片。

所以： - 我有 2 页，每页都有一个图片库 - 代码给了我第一个带有图片 1 和图片 2 的相册。

如何解决这个问题，请给我一些建议，因为我真的希望这个脚本完成。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:49:19.090

不确定我是否完全理解您想要做什么，但也许您应该在这种情况下使用[GalleryAlbums](http://rtfm.modx.com/display/ADDON/Gallery.GalleryAlbums)片段，并结合该`albumCoverSort`选项。

**编辑：**根据您的评论，看起来[画廊](http://rtfm.modx.com/display/ADDON/Gallery.Gallery)可能是最佳选择：

```
[[!Gallery? &album=`myProject` &limit=`1` &sort=`rank`]] 
```

有关如何对显示的缩略图进行排序的更多信息，请参阅文档。

# jquery - 在灯箱中嵌入 infusionsoft 表单/iframe

> ID：15347438
> 
> 赞同：0
> 
> 时间：2013-03-11T19:57:20.150
> 
> 标签：jquery, lightbox, infusionsoft

我有一个 infusionsoft 注册表单，我想将它嵌入到灯箱中。

我有表单的脚本： `<script src="https://st990.infusionsoft.com/app/form/iframe/4342343243243" type="text/javascript"></script>`

和一个有效的示例灯箱：

`<a rel="wwlba" href="http://www.youtube.com/watch?v=3434343?hd=1&amp;width=870&amp;height=490&amp;fmt=22"> <img class="alignnone size-full wp-image-1949 opaque" style="border: 0pt none; margin: 0px;" title="req" src="http://www.ccc.com/wp-content/uploads/video_screen.jpg" alt="" width="280" height="116" /> </a>`

但是，当我尝试使用 infusionsoft iframe 执行此操作时，它根本不会渲染任何内容。

``<a rel="wwlb" href="https://st990.infusionsoft.com/app/form/iframe/4342343243243"> <img class="alignnone size-full wp-image-1949 opaque" style="border: 0pt none; margin: 0px;" title="req" src="http://www.ccc.com/wp-content/uploads/video_screen.jpg" alt="" width="280" height="116" /> </a>`

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T17:06:16.887

尝试使用 infusionsoft 表单的 html 版本。

# security - 如何将 Web 应用程序的访问权限限制在特定位置/计算机？

> ID：15347440
> 
> 赞同：2
> 
> 时间：2013-03-11T19:57:21.633
> 
> 标签：security, web, ip

我正在开发一个网络应用程序，餐厅将使用该应用程序让收银员访问有关客户、预订等的数据。

不过，我的一位测试客户表示，他希望收银员只有在使用餐厅计算机时才能访问 Web 应用程序。换句话说，他不希望他的员工能够登录到网络应用程序并从他们的家中或从其他位置/计算机访问客户信息。

我的第一个想法是在 web 应用程序上检查客户端的 IP 地址，并且只允许某些 IP（即餐厅连接的 IP）访问它。

问题是大多数餐厅的 Internet 连接都使用 DHCP，因此它们的 IP 不断变化。我只能检查 IP 的前 2 个字节（例如，106.280），但这不是 100% 安全的，在某些 ISP 上，甚至第二个字节也会不时更改。

**关于如何解决这个问题的任何其他想法？**

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:00:20.587

最好的方法是使用客户端证书身份验证。

[http://www.impetus.us/~rjmooney/projects/misc/clientcertauth.html](http://www.impetus.us/~rjmooney/projects/misc/clientcertauth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:05:35.203

Like @Eric said, it might work fine. Plus, you can self issue a certificate, it doesn't have to be purchased. The only difference is you will get the "Certificate Authority" warning when using it for the first time in a browser.

But a self-issued certificate might be a simple fix.

# ios - iOS - 在 UIWebView 中处理重定向

> ID：15347444
> 
> 赞同：2
> 
> 时间：2013-03-11T19:57:29.823
> 
> 标签：ios, objective-c, uiwebview

我在 web 视图中有这个 bool 函数来检查关键字“youtube”，如果链接中有关键字“youtube”，它将在应用程序 web 视图而不是 safari 中打开。这工作正常，但有一个问题，我碰到了。如果 youtube 链接被[https://bitly.com/](https://bitly.com/)缩短，它将在 safari 中打开。有没有办法防止这种情况。我仍然需要[https://bitly.com/](https://bitly.com/)在 safari 中为除 youtube 之外的所有其他关键字打开。

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
if ( inType == UIWebViewNavigationTypeLinkClicked ) {
 if ([[inRequest.URL absoluteString] rangeOfString:@"youtube"].location==NSNotFound){
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }
}
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:09:24.290

您可以使用[**knowurl**](http://knowurl.com)服务从微小的缩短链接扩展原始 URL

```
- (BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType 
 {
      @try
         {
           BOOL _returnVal = YES;

          //convert your bitly url to KowUrl if its contains `bit.ly`

          if ( inType == UIWebViewNavigationTypeLinkClicked ) 
          {
              if ([[inRequest.URL absoluteString] rangeOfString:@"youtube"].location==NSNotFound)
              {
                 [[UIApplication sharedApplication] openURL:[inRequest URL]];
                 _returnVal =  NO;
              }
           }
      }
      @catch (NSException *exception)
      {
         NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
      }
     @finally
     {
       return loadedImages;
     }    
} 
```

# highcharts - highcharts中多个系列的动态更新

> ID：15347445
> 
> 赞同：8
> 
> 时间：2013-03-11T19:57:33.853
> 
> 标签：highcharts

我有一个`highcharts-chart`四行（`series`）。我想用一个点 ( `value`) 更新每个系列，并同时动态移动这四行（1 进 - 1 出）。这适用于图表中的一个系列：

```
chart.series[0].addPoint([x, 5], true, true); 
```

有没有一种快速的方法可以一次将点添加到所有四行？

汉斯彼得

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T20:06:56.493

You can can update each series on one line, but only make the last one redraw the chart like so:

```
chart.series[0].addPoint([x, 5], false, true);
chart.series[1].addPoint([x, 5], false, true);
chart.series[2].addPoint([x, 5], false, true);
chart.series[3].addPoint([x, 5], true, true); 
```

Here is a JSFiddle illustrating the concept: [http://jsfiddle.net/mkremer90/yZSzZ/](http://jsfiddle.net/mkremer90/yZSzZ/)

# c# - 使用 c# 为列表视图设置数据绑定

> ID：15347446
> 
> 赞同：1
> 
> 时间：2013-03-11T19:57:34.147
> 
> 标签：c#, asp.net, linq, frameworks, entity

我对使用实体框架和 Linq 还很陌生。当从页面顶部的下拉列表中选择“区域”时，我在 web 表单中有一个 ListView，我想填充它。数据将基于下拉列表中选择的内容。我使用 EF 填充下拉列表的选项，我的挑战是让页面在页面回发时从 selectedValue 填充数据。我到了页面发回的地步，它返回“没有返回数据”，这是我在 EmptyDataTemplate 中的文本。在某处它没有检索我的数据，所以我希望有人能告诉我我做错了什么。

```
<section class="featured" style="text-align:center; background-color: #fff; padding:15px">
                <asp:Label ID="lblChooseArea" runat="server" Text="Choose an area: "></asp:Label>
                <asp:DropDownList ID="AreaDropDown" 
                    ItemType="Level1One.Classes.Area" AutoPostBack="true"
                    runat="server" DataTextField="AreaName"
                    SelectMethod="GetAreas" >                  
                </asp:DropDownList>
                <br /><hr /><br />

                <ul> 
                        <asp:ListView ID="ticketList" runat="server"                              
                            GroupItemCount="3"  
                            ItemType="Level1One.Classes.Ticket" >                            
                            <EmptyDataTemplate>      
                                <table id="Table1" runat="server" >        
                                    <tr>          
                                        <td>No data was returned.</td>        
                                    </tr>     
                                </table>  
                            </EmptyDataTemplate>  
                            <EmptyItemTemplate>     
                                <td id="Td1" runat="server" />  
                            </EmptyItemTemplate>  
                            <GroupTemplate>    
                                <tr ID="itemPlaceholderContainer" runat="server">      
                                    <td ID="itemPlaceholder" runat="server"></td>    
                                </tr>  
                            </GroupTemplate>  
                            <ItemTemplate>    
                                <td id="Td2" runat="server">      
                                    <table>        
                                        <tr>          
                                            <td>&nbsp;</td>                                            
                                            <td>
                                                <a href="ProductDetails.aspx?ticketID=<%#:Item.TicketID%>">
                                                    <span class="ProductName">
                                                        <%#:Item.TicketSubArea%>
                                                    </span>
                                                </a>            
                                                <br />
                                                <span class="ProductPrice">           
                                                    <b>Description: </b><%#:Item.Description%>
                                                </span>
                                                <br />            
                                            </td>        
                                        </tr>      
                                    </table>    
                                </td>  
                            </ItemTemplate>  
                            <LayoutTemplate>    
                                <table id="Table2" runat="server">      
                                    <tr id="Tr1" runat="server">        
                                        <td id="Td3" runat="server">          
                                            <table ID="groupPlaceholderContainer" runat="server">            
                                                <tr ID="groupPlaceholder" runat="server"></tr>          
                                            </table>        
                                        </td>      
                                    </tr>      
                                    <tr id="Tr2" runat="server"><td id="Td4" runat="server"></td></tr>    
                                </table>  
                            </LayoutTemplate>
                        </asp:ListView>
                </ul>

            </section> 
```

这是后面的代码：

```
public partial class TicketList : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {

            string dllArea = AreaDropDown.SelectedValue;
            int dllAreaNum;

            int.TryParse(dllArea, out dllAreaNum);

            using (TicketContext adrop = new TicketContext())
            {
                var result = (from a in adrop.Tickets
                              where (a.AreaID == dllAreaNum)
                              select new { a.TicketSubArea, a.Description, a.TicketID }).ToList();

                ticketList.DataSource = result;
                ticketList.DataBind();

            }
}   

    }        

    public IQueryable<Area> GetAreas()
    {
        var db = new Level1One.Classes.TicketContext();
        IQueryable<Area> query = db.Areas;
        return query;
}
} 
```

我的课程和背景：

```
using System.Data.Entity;

namespace Level1One.Classes
{
    public class TicketContext : DbContext
    {
        public TicketContext() : base("Level1One")
        {
        }
        public DbSet<Ticket> Tickets { get; set; }
        public DbSet<Area> Areas { get; set; }
    }
} 
```

.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace Level1One.Classes
{
    public class Ticket
    {
        [ScaffoldColumn(false)]
        public int TicketID { get; set; }

        [Required, StringLength(100), Display(Name = "Area")]
        public string TicketArea { get; set; }

        [Required, StringLength(100), Display(Name = "SubArea")]
        public string TicketSubArea { get; set; }

        [Required, StringLength(10000), Display(Name = "Description"), DataType(DataType.MultilineText)]
        public string Description { get; set; }

        public int? AreaID { get; set; }

        public virtual Area Area { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:21:53.653

添加`DataValueField = AreaID`到您的区域下拉列表

将此替换为

```
 if (IsPostBack)
        {

            string dllArea = AreaDropDown.SelectedValue;
            int dllAreaNum;

            int.TryParse(dllArea, out dllAreaNum);

            using (TicketContext adrop = new TicketContext())
            {
                var result = (from a in adrop.Tickets
                              where (a.AreaID == dllAreaNum)
                              select new { a.TicketSubArea, a.Description, a.TicketID }).ToList();

                ticketList.DataSource = result;
                ticketList.DataBind();

            } 
```

和：

```
 if (IsPostBack)
                {

                    string dllArea = AreaDropDown.SelectedValue;
                    int dllAreaNum;

                    int.TryParse(dllArea, out dllAreaNum);

                       IQueryable<Ticket> result = getTicketbyArea(dllAreaNum)

                        ticketList.DataSource = result.ToList();
                        ticketList.DataBind();
        }
   } 
```

删除这个：

```
 using (TicketContext adrop = new TicketContext())
        {
            var result = (from a in adrop.Tickets
                          where (a.AreaID == dllAreaNum)
                          select new { a.TicketSubArea, a.Description, a.TicketID }).ToList();

            ticketList.DataSource = result;
            ticketList.DataBind();

        } 
```

将此方法添加到您将在页面加载时调用的代码中。

```
public IQueryable<Ticket> getTicketbyArea(int dllAreaNum)
{
     var _db = new TicketContext();

     var query = _db.Tickets
                    .Where(x => x.AreaID== dllAreaNum).Select(x =>x)
                  return query;

} 
```

# java - Twitter4j v2.2.6 带有地理定位的流式 API

> ID：15347462
> 
> 赞同：1
> 
> 时间：2013-03-11T19:58:14.847
> 
> 标签：java, api, geolocation, streaming, twitter4j

我正在使用 twitter4j v2.2.6 的流 API 并且有一些过滤问题。我可以很好地获取示例流，但是当我尝试添加地理位置过滤器时，流输出不会改变（我仍然收到没有地理位置和 geoloc 但在我的边界框之外的推文）。这是我的一些代码：

```
private static FilterQuery getBoundingBoxFilter() {
    // New Delhi India
    double lat = 28.6;
    double lon = 77.2;
    double lon1 = lon - .5;
    double lon2 = lon + .5;
    double lat1 = lat - .5;
    double lat2 = lat + .5;

    double bbox[][] = {{lon1, lat1}, {lon2, lat2}};        
    FilterQuery filtro = new FilterQuery();
    return filtro.locations(bbox);        
}

public static void streamIt() {
    TwitterStream twitterStream = new TwitterStreamFactory().getInstance();
    FilterQuery fq = getBoundingBoxFilter();
    StatusListener listener = new StatusListener() {
        @Override
        public void onStatus(Status status) {
            GeoLocation gl = status.getGeoLocation();
            StringBuilder msg = new StringBuilder();
            if (gl != null) {
                msg.append("Lat/Lon: ").append(gl.getLatitude()).append(",").append(gl.getLongitude()).append(" - ");
                msg.append(status.getText());
                LOG.info(msg.toString());
            } else {
              msg.append(status.getText());
              LOG.info(msg.toString());
            }
        }

        @Override
        public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice) {
            System.out.println("Got a status deletion notice id:" + statusDeletionNotice.getStatusId());
        }

        @Override
        public void onTrackLimitationNotice(int numberOfLimitedStatuses) {
            System.out.println("Got track limitation notice:" + numberOfLimitedStatuses);
        }

        @Override
        public void onScrubGeo(long userId, long upToStatusId) {
            System.out.println("Got scrub_geo event userId:" + userId + " upToStatusId:" + upToStatusId);
        }

        @Override
        public void onException(Exception ex) {
            if (!(ex instanceof IllegalStateException)) {
                ex.printStackTrace();
            }
        }

        @Override
        public void onStallWarning(StallWarning sw) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    };
    twitterStream.addListener(listener);
    if (fq != null) {
        twitterStream.filter(fq);
    }        
    twitterStream.sample();        
} 
```

那么，我做错了什么？有任何想法吗？

问候，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:43:19.693

删除以下行，然后重试。

```
twitterStream.sample(); 
```

# powershell - PowerShell中的AddDays

> ID：15347466
> 
> 赞同：0
> 
> 时间：2013-03-11T19:58:41.640
> 
> 标签：powershell

我有一个存储过程，它有两个参数@from，@to，我想传递@from $from 的值，它是从powershell GUI 输入的。我希望@to 在@from 之后 1 天。我有以下代码。哪个值似乎传递给@from，但没有传递给值。有什么建议吗？

```
$param1=$sqlcmd.Parameters.Add("@from" , [System.Data.SqlDbType]::DateTime)
$param1.Value=Get-Date $from -format "yyyy-MM-dd HH:mm:ss.fff"
$param2=$sqlcmd.Parameters.Add("@to", [System.Data.SqlDbType]::DateTime)
$param2.Value=Get-Date ($from).AddDate(1) -format "yyyy-MM-dd HH:mm:ss.fff" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:06:18.883

If I recall correctly from your previous question, `$from` is a string, not a date. You can't add days to a string, so you need to convert it to a date first. Also you need `.AddDays(1)`, not `.AddDate(1)`.

```
$param2.Value = Get-Date (Get-Date $from).AddDays(1) `
  -format "yyyy-MM-dd HH:mm:ss.fff" 
```

# jquery - 运行函数的 jQuery 链接

> ID：15347471
> 
> 赞同：1
> 
> 时间：2013-03-11T19:58:58.857
> 
> 标签：jquery, html

我想在我的网页上有一个运行功能的链接：我使用以下内容实现链接：

```
<a href="#" id="reply">Reply</a> 
```

我创建了这样的函数：

```
$(function reply(){
        $("#reply").click(function(){
         $('#txt').append('sample text');
         return false;
        });
    }); 
```

但是每次我点击 think 链接时，它都会转到 # 页面而不是运行该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:01:29.053

添加`event.preventDefault();`.

```
$(function reply(){
    $("#reply").click(function(event){
       event.preventDefault();
       $('#txt').append('sample text');
       return false;
    });
}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

看看这个[jsFiddle](http://jsfiddle.net/X7vA3/1/)

**编辑**

由于您将链接附加到文档，因此事件没有被绑定。您可以做两件事来让事件绑定到动态添加的元素。

1.  将追加放在代码中的单击侦听器*之前*
2.  使用 .on() 绑定事件；

    ```
    $(document).on("click", "#reply", function(event){
      event.preventDefault();
      $('#txt').append('sample text');
    });

    $("#content").append("<a href=\"#\" id=\"reply\">Reply</a>"); 
    ```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

查看[jsFiddle](http://jsfiddle.net/ahSBf/1/)

# pixelsense - Surface 2.0 SDK 的输入模拟器错误

> ID：15347472
> 
> 赞同：1
> 
> 时间：2013-03-11T19:58:59.450
> 
> 标签：pixelsense

这可能是深奥的，但在这里。

我正在 WPF 中开发一个用于多点触控屏幕的程序。我正在使用 Surface 2.0 SDK 并试图让工具包模拟输入并运行压力测试。但是`SurfaceStress.exe`抛出一个错误：

```
Error 0: Cannot get reference to virtual digitizer controller. 
```

并且输入模拟器给了我一个寻找控制器的超时错误。

我已经在 MSDN [http://msdn.microsoft.com/en-us/library/ff727911.aspx上阅读过它](http://msdn.microsoft.com/en-us/library/ff727911.aspx)

我知道它不能同时运行两个控制器，而且它不在 SUR40 上。它说“平板电脑设置”只有在输入模拟器运行时才会出现。但它无论如何都在运行，它的设置按钮是灰色的。我没有触摸屏，但我连接了 Wacom Bamboo 数位板。平板电脑和 Surface 输入模拟器之间有其他人干扰吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:31:49.870

它在设备管理器中。Bamboo 触控驱动程序禁用了虚拟数字化仪控制器，该控制器也被列为设备。拨动开关，骑马驶向日落。干得好，我！o/

# c# - 获取单个子元素的最佳方法

> ID：15347475
> 
> 赞同：0
> 
> 时间：2013-03-11T19:59:20.930
> 
> 标签：c#, xml, xpath, linq-to-xml

我们有 C# 代码来遍历我们创建的各种 XML 文档。通常我们需要获取一个已知的子元素（它可以是唯一的子元素，也可以是其他兄弟元素）。我有一个给定父元素的函数，子名称将返回子元素：

```
public static XmlElement GetChildElement(XmlElement parentElement, string childName) 
{
    return parentElement.GetElementsByTagName(childName).Cast<XmlElement>().FirstOrDefault();
} 
```

这很好用，但前几天我想知道是否可以使用 XPath 或 LINQ to XML 更简洁、更轻松地完成它。我发现的大多数 XPath 示例似乎都想知道文档的整个结构，并且我想要一个只知道父项和子项的通用函数。Linq to XML 似乎更有希望，但我还没有找到与我正在寻找的匹配的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:03:51.743

那么 LINQ to XML 使这*非常*容易 - 您只需使用以下[`XContainer.Element`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)方法：

```
XElement child = parent.Element(elementName); 
```

如果有任何元素，这将为您提供第一个元素，否则为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:14:27.650

[XmlNode.SelectSingleNode](http://msdn.microsoft.com/en-us/library/fb63z0tw.aspx)是您在无法使用 XElement 时寻找的方法：

```
 var result = parentElement.SelectSingleNode(
      string.Format("*[local-name()='{0}']", nameWithoutPrefix)); 
```

请注意，我的示例使用名称空间作弊（接受任何名称），您应该了解在您的情况下是否需要正确支持名称空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:14:45.327

鉴于您已经拥有的，您可以这样做：

```
public static XmlElement GetChildElement(XmlElement parentElement, string childName) 
{
    return parentElement[childName];
} 
```

这将返回第一个匹配的子元素，如果没有，则返回 null。哎呀，我不确定为此使用便捷方法是否有意义，但是如果您已经引用了此方法，则上述修改将起作用。

这里要注意的一点是，您提供的代码不会返回第一个匹配的*子*元素；它返回第一个匹配的*后代*元素。如果这实际上是你想要的，你可以这样做：

```
public static XmlElement GetChildElement(XmlElement parentElement, string childName) 
{
    return parentElement.SelectSingleNode("//" + childName) as XmlElement;
} 
```

# jquery - Ajax 两次点击

> ID：15347476
> 
> 赞同：0
> 
> 时间：2013-03-11T19:59:22.977
> 
> 标签：jquery, ajax, click, double, hide

单击以下链接后，我有此 jquery 代码用于隐藏广告框：

```
$('a.close').click(function () {
   var parent = $(this).parent().parent();
   var adid = $(parent).attr('id');
   $.ajax({
       type: "POST",
       url: "./setcookie.php",
       data: "adid=" + adid,
       cache: false,
       dataType: 'json',
       success: function (cook) {
           if (cook.set === 'success') {
               parent.fadeOut(1000);
           }
       },
       error: function () {
           $(".guestwarn").html("<font color='red'>There was an error submitting the form. Please try again.</font>").fadeIn(1000);
       }
   });
   return false; 
```

});

所以我想通过cookies关闭框。我的 html(php) 是：

```
<?php if(isset($_COOKIE[ "msg1"])){?>
<div id="msg1" class="msgbox">
    <div class="guestwarn">
        <a href="#" class="close">X</a>
        Something goes here...
    </div>
</div>
<?php } ?> 
```

所以我的工作 setcookie.php 是：

```
$adcookies = array();
$value = $_POST['adid'];
if ($value) {
    setcookie($value, $value, time() + 3600);
    if (isset($_COOKIE[$value])) {
        $adcookies['set'] = "success";
    } else {
        $adcookies['set'] = "error";
    }
    echo json_encode($adcookies);
} 
```

为什么 adbox (.msgbox) 在两次点击后隐藏？代码有什么问题？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:11:33.437

我会赌饼干。如果您设置了一个 cookie，那么在您刷新页面后（在您的情况下是第二个 AJAX 请求），它对您“可见”，这就是您必须单击两次的原因。您可以使用会话而不是 cookie 来解决它。

# javascript - 在 ._contains(arr, val) 中使用正则表达式；

> ID：15347477
> 
> 赞同：0
> 
> 时间：2013-03-11T19:59:43.063
> 
> 标签：javascript, underscore.js

我有一个数组：

```
var myArray = ['1','3','3-4','4','4-8','5-8','9']; 
```

我还有一个等于**4的变量**

我想在数组中找到符合以下条件的任何值：

1.  等于 4

2.  4-*

3.  *-4

所以在上面的例子中，我会找到 3-4, 4-8, 4

`_.contains(myArray, 4)`解决了#1，但我将如何使用正则表达式在上面的列表中找到#2 和#3。请记住**4**将是我需要放入 RegEx 的变量

你能在`_.contains`我似乎找不到任何例子中使用正则表达式吗

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:10:11.903

您可以`_.filter`改为使用来查找所需的元素。

```
_.filter(myArray, function(x){
    return x.match(/^(\d-)?4(-\d)?$/) !== null;
}); 
```

# java - 带有 PersistenceContext 和 LockType.READ 的单例 ejb

> ID：15347479
> 
> 赞同：1
> 
> 时间：2013-03-11T19:59:47.697
> 
> 标签：java, jpa, ejb, ejb-3.1

像这样的@Singleton EJB：

```
 @Singleton
  public class MySingleton {
     @PersistenceContext
     private EntityManager em;
     ...

     @Lock(LockType.READ)
     public void doPersistanceAction() {
     }

  } 
```

所以 MySingleton#doPersistanceAction() 的所有调用者都会同时使用同一个 EntityManager 实例。附加实体的持久性上下文将在调用者之间共享。一个调用者启动的事务可能由另一个调用者提交。ejb容器是否能处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:19:09.410

> 所以 MySingleton#doPersistanceAction() 的所有调用者都会同时使用同一个 EntityManager 实例

是的，但它不是首选并且不是线程安全的。相反，您应该注入`EntityManagerFactory`& 然后在您可以从中获得的方法中`EntityManager`。

> 带有附加实体的持久性上下文将在调用者之间共享

是的，同一个`EntityManager`实例是共享的。

> 一个调用者启动的事务可能由另一个调用者提交

**LockType.READ ：**用于只读操作。只要没有持有 WRITE 锁，就允许同时访问指定为 READ 的方法。

因此，由于您具有只读操作，所以没关系，但您需要重新设计。

> ejb容器是否能处理这种情况？

Container 将负责单例 bean 的初始化、注入、并发等，但您必须正确使用它。

# javascript - 同时将 JavaScript 对象扩展为 init

> ID：15347480
> 
> 赞同：0
> 
> 时间：2013-03-11T19:59:49.197
> 
> 标签：javascript, oop

扩展函数的最佳方法是什么，以便在调用它时也调用新的扩展类。

参加以下课程：

```
var class = {}

class.init = function(){
 //do something
}; 
```

例如，现在扩展 init：

```
class.init.prototype.extend = function(){
 console.log("hey look at me, I get called too!");
} 
```

这里的想法是，当调用 class.init() 时，我们希望扩展类也被自动调用。目标是扩展类，例如将点击事件绑定到链接，但不修改原始函数中的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:05:30.467

You can overwrite the function with one that also calls the overwritten one:

```
(function (old) {
    class.init = function() {
        console.log("hey look at me, I get called before!");
        var result = old.apply(this, arguments);
        console.log("hey look at me, I get called after!");
        return result;
    };
}(class.init)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:04:22.567

您可以重新分配`class.init`给调用原始函数和新函数的代理函数。

像这样的东西：

```
var class = {}

class.init = function(){
 //do something
};

(function(){
    var _old = class.init;
    class.init = function(){
        console.log("hey look at me, I get called too!");
        return _old.apply(this, arguments);
    };
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:42:02.837

一种更通用的`extend`方法，可以扩展任何方法，而不仅仅是 init：

[住在JSBin](http://jsbin.com/opucub/4/edit?javascript,console)

```
function Klass(name){
  this.name = name;
  this.staticMethod = function(){console.log('static method at Klass');};
}

Klass.prototype.someMethod = function(){console.log('Klass.someMethod');};

Klass.extend = function(extention){
  function extendMethod(method1, method2){
    var args = arguments;
    var contex = this;
    return function(){
      method1.apply(contex, args);
      method2.apply(contex, args);
    };
  }

  var proto = new Klass();
  var Extended = function(){Klass.apply(this, arguments);};
  for(var key in extention){
    if(typeof proto[key] === 'function' && typeof extention[key] === 'function'){
      var oldMethod = proto[key];
      proto[key] = extendMethod(oldMethod, extention[key]);
    }
  }
  Extended.prototype = proto;
  return Extended;
};

var ExKlass = Klass.extend({
  someMethod: function(){
    console.log('ExKlass.someMethod');
  }
});

var k = new Klass();
var ek = new ExKlass();

k.someMethod();
ek.someMethod(); 
```

# python - 格式中的 valueError 零长度字段名称

> ID：15347483
> 
> 赞同：3
> 
> 时间：2013-03-11T19:59:55.870
> 
> 标签：python

我正在使用 python 版本 2.7.3 并试图以某种格式打印出一些信息。

```
final="<".join('< {} >'.format(' '.join(items)) for items in list) 
```

但是我在格式错误中得到了一个 valueError 零长度字段名称，这是因为我的 python 版本不允许某些语法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T20:06:28.117

Pyhon2.6 requires you to put a positional argument in the `{}`

```
'< {0} >'.format(' '.join(items)) 
```

# objective-c - 创建的 NSButtonCell 是唯一的吗？

> ID：15347486
> 
> 赞同：0
> 
> 时间：2013-03-11T20:00:00.710
> 
> 标签：objective-c, uniqueidentifier, nsbuttoncell

那么，按钮可以识别吗？

我需要在`Button Cell`a 中识别一个 cell-botton ( )`NSTableView`以检测它是否已被按下。表格总是可以通过用户输入来改变。我的好主意是，如果创建的按钮（按钮单元）是唯一的，那么它将是可识别的。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:36:06.810

单元格与成熟的控件略有不同。`NSTableView`为一列的所有行重复使用单个单元格。当`NSTableView`绘制一行时，或者当它处理用户输入时，它为有问题的行/列配置单元格。

听起来在您的情况下，您有一个`NSButtonCell`并且您想知道单击了哪一行。`clickedRow`您可以通过在按钮单元格的操作方法中检查表格视图的属性来确定单击了哪一行。[这个问题的答案](https://stackoverflow.com/questions/8522965/nsbuttoncell-in-nstableview-click-handling)解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:03:18.560

嗯，只要这些按钮是UIView的子类，也就是UIButtons，那么就可以用tag字段来携带一个数字信息。将 celForRowAtIndexPath 中的 button.tag 设置为 indexPath.row ，您可以在 IBAction 方法中获取按钮在按下时应该 inovke 的标签。

# java - 动态添加对象到数组

> ID：15347487
> 
> 赞同：1
> 
> 时间：2013-03-11T20:00:00.867
> 
> 标签：java, arrays, list, oop, dynamic-allocation

我有这段代码，它工作正常：

```
News news_data[] = new News[] {
new News("1","news 1","this is news 1"),
new News("2","news 2","this is news 2"),
new News("2","news 1","this is news 2"),
}; 
```

在这段代码中，我添加了 3 个新对象，但我必须在循环中动态添加它们。我怎样才能做到这一点？我其实不明白这个数组结构。请向我解释这段代码，如果你能让它简单的话

我试过了，但它不起作用：

```
 News news_data[];
   for(i=1;i<3;i++){
      news_data=new News[] {
          new News("1","news 1","this is news 1"),
          new News("2","news 2","this is news 2"),
          new News("2","news 1","this is news 2"),
      };
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:03:42.583

中没有动态分配`Java`，[`Lists`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)都是为了这个目的。例如, `List`, `ArrayList`, `LinkedList`...

以这种方式使用：

```
// Declaring, initializing the list
ArrayList<News> list = new ArrayList<News>();
// Adding a news :
News news = new News("1","news 1","this is news 1");
list.add(news); 
```

如果您已经有一个数组`News`（在您的示例中`news_data`），您可以快速填写您的列表以开始：

```
for(News n : news_data) { list.add(n); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T20:01:44.847

使用[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。这就是列表的用途：

```
List<News> news = new ArrayList<News>();
news.add(new News(...)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:14:19.370

如果您主要在列表中间添加和删除对象（顺序很重要），最好使用 LinkedList。如果经常使用随机访问，ArrayList 会是更好的选择，在这种情况下，您可以在 O(1) 时间内将一个元素添加到末尾。请参阅[http://en.wikiversity.org/wiki/Java_Collections_Overview](http://en.wikiversity.org/wiki/Java_Collections_Overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:12:06.973

```
News news_data[] = new News[3]; // defining the size of Array to 3
new_data[0] = new News("1","news 1","this is news 1"),
new_data[1] = new News("2","news 2","this is news 2"),
new_data[2] = new News("2","news 1","this is news 2"), 
```

但更好的方法是用户 ArrayList。它们是为动态结构而设计的。

```
List<news> news_data = new ArrayList<News>();
news_data.add(new News("1","news 1","this is news 1"));
news_data.add(new News("2","news 2","this is news 2"));
news_data.add(new News("2","news 1","this is news 2")); 
```

# php - Symfony LDAP 提供者凭据

> ID：15347491
> 
> 赞同：1
> 
> 时间：2013-03-11T20:00:15.990
> 
> 标签：php, symfony

我有一个使用 LDAP 身份验证的 php / Symfony 2 应用程序。我想使用相同的登录凭据将用户登录到另一个使用来自同一 Active Directory 的身份验证的网站。在我的控制器中，我知道我可以执行以下操作来获取登录用户：

```
$loggedInUser = $this->get('security.context')->getToken()->getUser(); 
```

我可以看到用户名。但是，我看不到密码。这大概是件好事。但是，如果没有密码，我不确定我是否知道如何登录用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:36:59.013

不确定这是否真的是一个答案，但是，我决定对此采取不同的方法。我重新提示用户输入密码。这对我来说最有意义。

# dotnetnuke - DotNetNuke 中的执行函数

> ID：15347495
> 
> 赞同：1
> 
> 时间：2013-03-11T20:00:26.533
> 
> 标签：dotnetnuke, average

我根本不是软件开发人员，我需要知道如何平均表单和列表模块内的 DotNetNuke 表中的一组值。我试过用这个来表达：

```
'AVG('+[Num1]+','+[Num2]+','+[Num3]+')' 
```

但这只会在我设置 10,20,30 的值后返回连接：AVG(10,20,30)。

任何人的想法？

```
 $(document).ready(function() 
    { $("#budgetWorksheet tbody tr").change(rowAverage); });
    function rowAverage() { var totalAvg = 0; $("tbody tr").slice(0,-1).each(function()
    { var row_total = 0; var i = "td:not(.subtotal)                                    input:text",                       
    this).each(function() { row_total +=      parseInt(this.value || 0, 10);  
    }).length; if (row_total > 0) { var avg =  Math.floor(parseInt(row_total, 10) /  
    i); $(".subtotal input:text", this).val(avg);  totalAvg += avg; } });
    $(.totalAvg input").val(totalAvg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:21:55.350

您可能需要使用 XSLT 来执行此操作，FnL 支持 XSL 模板，您可以创建它们并将它们应用到模块的配置中。

使用标准的 Grid 布局可能会更困难一些，但可以通过 jQuery 来完成。这是一个 SO 问题，它使用一些 jQuery 来计算平均值[https://stackoverflow.com/questions/8812548/sum-table-row-text-fields-with-running-overall-total-in-text-field](https://stackoverflow.com/questions/8812548/sum-table-row-text-fields-with-running-overall-total-in-text-field)

# ruby-on-rails - 需要为 Rails 应用程序构建移动 UI

> ID：15347501
> 
> 赞同：0
> 
> 时间：2013-03-11T20:00:51.070
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要开始为我的一个 Rails 应用程序构建移动 UI。快速搜索将我带到了 Titanium 平台。对使用这个有什么想法吗？也欢迎/赞赏替代建议。

除了我的应用程序呈现 HTML 之外，我还能够轻松地创建一个将呈现 JSON 的 API——如果这对答案有任何影响的话。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:42:24.763

没有使用 Titanium 的经验，但我会从针对移动（小型）设备优化的 Web UI 开始。这将避免您构建几个（嗯，两个：一个 Android 和一个 iOS）不同的客户端应用程序。

许多当前的 Web 框架现在有助于构建移动 Web 应用程序（以[Twitter Boostrap 响应特性](http://twitter.github.com/bootstrap/scaffolding.html#responsive)为例）。

之后您可能需要一个本机应用程序，尤其是在以下情况下：

1.  您想与手机/设备交互（获取联系人、推送通知、使用传感器）
2.  本机外观对您的应用程序非常重要

即便如此，许多非常好的应用程序实际上是“混合体”，将原生小部件与 webview 混合在一起（看看 37 个关于他们新的 Basecamp iOS 应用程序的信号[讨论）。](http://37signals.com/svn/posts/3438-drawing-the-nativeweb-line-in-basecamp-for-iphone)

此外，如果您采用原生方式并且是一名 Ruby 开发人员（我想是这样），您可能想看看[Ruboto](http://ruboto.org/)（允许在 Ruby 中为 Android 编写应用程序）和[RubyMotion](http://www.rubymotion.com/)（对于 iOS 也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:31:45.233

我决定进一步使用 Titanium，并且很可能会创建一个混合应用程序。也就是说，JQuery Mobile 和 Twitter Bootstrap 看起来也不错！感谢大家观看。

# git - 单个开发人员的 GIT 远程服务器，有意义吗？

> ID：15347503
> 
> 赞同：3
> 
> 时间：2013-03-11T20:00:55.177
> 
> 标签：git

在工作中，我们只有 2 名开发人员，而且在大多数情况下，我们每个人都从事独立的项目。因此，如果我们要共享代码，我需要一个集中式服务器（这仍然值得怀疑，因为它只有我们两个人，我怀疑我们是否会在这家公司获得第三轮）。我想这对于“备份”目的也很有意义，我经常可以将最稳定的代码推送到服务器，所以如果我的笔记本电脑死机或被盗，我至少会有最稳定的状态在其他地方进行项目。但除了这些原因，对于一个人的开发项目，是否应该关心一个集中式服务器？

假设我的个人项目只有我一个人，我应该获得一个集中的存储库，还是我可以在我的 PC 上提交和管理整个九码并完成它？这只是偏好问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:09:18.097

我的观点是，它确实有道理。

我使用中央服务器（主要是 github 和 bitbucket），所以我可以获得备份，在我的所有计算机之间轻松共享（不会忘记哪个 repo 是授权）、访问控制、自动 web ui、集成 wiki 以及其他工具当我一个人做一个项目时。使用中央服务器，我可以将其插入 CI（持续集成）系统，而无需在我自己的计算机上增加负载，即使只有我和我的代码，CI 也有助于快速诊断任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:19:12.703

在单独处理一些项目时，我发现保管箱的每小时/每日快照是我在问题的备份部分使用最多的功能。这不是 git afaik 提供的。

在 Dropbox 上工作了一段时间后，我添加了一个远程 git-repo 以便能够向其他人显示一些代码。

到目前为止，我只为一些小分支使用了 git 功能，这可以在本地完成，但是 IMO 使用 git 的“成本”不是你决定推送到远程仓库的任何东西，而是学习一个基础知识版本控制系统。

# javascript - 如何使用 javascript 选择 CKEditor 工具栏项？

> ID：15347505
> 
> 赞同：1
> 
> 时间：2013-03-11T20:00:59.283
> 
> 标签：javascript, iphone, ios, xcode, ckeditor

我在我的 iOS 应用程序上实现 CKEditor，问题是我需要检测工具栏项目上的触摸。我有一个 UIWebView，它显示 CKEditor 'demo.html' 和一个用于测试过程的按钮，当单击按钮时它在“demo.html”文件上触发一个javascript函数，代码如下：

**来自“demo.html”的 Javascript：**

```
<script type="text/javascript">

    function mateus(){

        // SIMULATE TOUCH ON TOOLBAR ITEM

    }

    CKEDITOR.replace( 'editor1',
            {
                extraPlugins : 'uicolor',
                removePlugins: 'elementspath',
                toolbar :
                [
                    [ 'Bold', 'Italic', 'Underline','NumberedList','BulletedList']
                ]
});
</script> 
```

UIButton 动作：

```
-(IBAction)buttonTester:(id)sender{

    [webView stringByEvaluatingJavaScriptFromString:@"mateus()"];

} 
```

这部分工作正常，问题是，就像我之前说的，我需要模拟工具栏项目上的触摸，我不知道该怎么做！

简化：

**如何使用 javascript 选择 CKEditor 工具栏项？**

**编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ---------------------**

我搜索了一下，我在 CKEditor 文档中找到了这个片段：

```
editorInstance.execCommand( 'bold' ); 
```

但我无法让它发挥作用，这是我的新尝试：

```
function mateus(){

            CKEDITOR.instances.editor1.execCommand('bold');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:05:17.150

最后我明白了，就像看起来一样简单：

要选择一个工具栏项，认为一个 javascript 函数很简单，请使用以下代码段：

```
function mateus(){

    //Desired item from toolbar, like:('Italic','Underline','Image');
    CKEDITOR.instances.editor1.execCommand('bold');

} 
```

# windows - Windows 上 Ruby-on-Rails 应用程序 + Web 服务器的简单设置向导

> ID：15347507
> 
> 赞同：1
> 
> 时间：2013-03-11T20:01:02.920
> 
> 标签：windows, ruby-on-rails-3, deployment, installation

我正在开发一个使用 MS SQL Server db 的 Ruby-on-Rails 应用程序。我需要自动部署到 Windows 服务器，因为它将通过不同的渠道分发，并且设置需要尽可能自动化。我读过 IIS 不是一个好的解决方案，因此设置过程需要安装一个 Web 服务器（apache、Nginx 或瘦）。我没有使用过 JRuby，但我听说它在 Windows 上可能会使事情变得更简单。有什么好的资源、软件包或建议可以解决这个问题吗？

约翰

# javascript - Dojo FilteringSelect 中的自动完成项列表

> ID：15347521
> 
> 赞同：0
> 
> 时间：2013-03-11T20:01:40.230
> 
> 标签：javascript, dojo

我有一个典型的 FilteringSelect，当我输入它时可以工作，我可以从框中检索值，这很好。但是，我正在尝试确定是否可以访问它返回的项目列表。

例如，如果我的商店中有以下物品：

```
apple
axe
bananna 
```

然后我输入“a”，我想得到一个数组，它可以让我得到“苹果”和“斧头”。

我假设这将在 onKeyPress: function 的某个地方出现，我只是对文档不够熟悉。我已经查看了 dijit.byId('selectId') 但从那里我只是不太了解 API/文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:42:43.290

您应该查看[API 文档](http://dojotoolkit.org/api/1.8/dijit/form/FilteringSelect)。在那里，您可以看到所有可能事件的摘要。当您阅读它时，您应该来到`onSearch`返回 3 个参数的事件调用：

*   查询
*   结果
*   一些选项

所以你想要的是 onSearch 事件并读取`results`参数。我制作了一个[JSFiddle](http://jsfiddle.net/tbPnd/3/)来向您展示一个示例。

另一种可能的解决方案是直接查询商店，如果您不需要 ，这可能很有用`FilteringSelect`，但如果您只想根据查询获取项目列表。您还可以在我的 JSFiddle 中看到它是如何工作的。

编辑：我刚刚注意到您无法访问 API 文档。那么你真的应该尝试另一个浏览器，因为 API 文档包含很多有趣的东西，并且通常是事件/方法和属性的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:35:52.410

我会从 Dojo API 页面查看以下属性： [https](https://dojotoolkit.org/api/) ://dojotoolkit.org/api/ （单击 dijit/form/FilteringSelect）

**询问**

由 dijit/form/_SearchMixin 定义

可以传递给 store 以初步过滤项目的查询。ComboBox 覆盖对 searchAttr 的任何引用，并将其设置为 queryExpr 并替换用户的输入。

**查询表达式**

由 dijit/form/_SearchMixin 定义

这根据用户键入的内容指定将什么查询发送到数据存储。更改此表达式将修改结果是否仅是完全匹配、“开始于”匹配等 dojo.data 查询表达式模式。${0} 将替换用户文本。* 用于通配符。${0}* 表示“开始于”，*${0}*表示“包含”，${0} 表示“是”

**搜索属性**

由 dijit/form/_SearchMixin 定义

在数据存储中搜索此属性（在项目中）与用户键入的内容相匹配的项目

例如（没有尝试过，所以不确定它是否会起作用）： * 使用 attr 检索或设置 dojo 属性。

```
var srchItems = dijit.byId('resistForm').attr("searchAttr","a"); 
```

# java - 我可以在所有手机上使用的单个 Google Map API 密钥

> ID：15347522
> 
> 赞同：0
> 
> 时间：2013-03-11T20:01:40.790
> 
> 标签：java, android, google-maps

我有一个有谷歌地图的安卓应用程序。目前我已经生成了 MD5 指纹，并在此基础上获得了我在代码中使用的 Map API 密钥。我可以在模拟器和我的 Android 手机中看到地图。

但是假设我将相同的代码提供给我的一位朋友。然后他还需要生成 MD5 指纹，然后在此基础上他将获得一个新的 Map API 密钥，然后他需要用他生成的那个替换我的 XML 文件中的 API 密钥以使 Map 工作正常。正确的？

有没有什么方法可以让我在我的 XML 文件中插入一个 Map API 密钥，无论是在模拟器还是手机上运行该项目的人，他都应该能够在手机中看到 Google 地图，而无需更改 XML 文件中的任何内容？

我的主要目标是，如果我将我的项目提供给我的朋友，他们应该能够在 Android 手机上运行我的项目，而无需对与 Google Map API 密钥相关的 XML 文件进行任何更改。

我正在关注本教程[- https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:16:00.270

Map API 密钥是根据您对 .apk 文件进行签名的密钥库生成的。如果您的朋友使用 debug.keystore 运行您的应用程序（例如，他们从 eclipse 运行它），那么他们必须使用与您相同的 debug.keystore。如果你真的需要，试着给他们你的 debug.keystore。当然，如果你的朋友只需要运行你的应用程序，你可以给他们一个用你的密钥库签名的 apk。它适用于所有设备。

# vb.net - 如何在 Visual Basic 中搜索文本文件

> ID：15347527
> 
> 赞同：0
> 
> 时间：2013-03-11T20:01:50.000
> 
> 标签：vb.net

因此，我的老师希望全班在文件中搜索作者姓名，并将该作者的所有信息显示在一个文本框中，如邮寄标签。

这是我的代码，我在下面添加了一张图片。对于让程序获取作者字符串并搜索另一个文件，我真的很迷茫。我可以完美地显示作者姓名，但是您如何在另一个文件中搜索该姓名并在该行上显示有关作者的信息？

```
Imports System.IO

Public Class Form1
'   CSCI 6
'   Alex Smutny
'   Lab #3
'
' DATE: 3/1/2013

Dim SR As IO.StreamReader

'   initial start spot for the record Count 
Dim RecordCount As Integer = 0
Dim Author As String = File.ReadAllText("Authors.txt")

Private Sub btnQuit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles quitBtn.Click
    '   Properly Exits the application.

    Me.Close()
End Sub

Private Sub btnClose_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles closeBtn.Click
    readBtn.Text = "Read"
    SR.Close()

    '   Changes the button statuses Locked or unlocked and sets default settings.
    openBtn.Enabled = True
    quitBtn.Enabled = True
    readBtn.Enabled = False
    closeBtn.Enabled = False
    SearBtn.Enabled = False

    RecordCount = 0

    recordNum.Clear()
    bookNum.Clear()
    isbnNum.Clear()
    bookTitle.Clear()
    authorName.Clear()
    bookPrice.Clear()
    bookQuanity.Clear()
    reorderPoint.Clear()

End Sub

Private Sub btnOpen_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles openBtn.Click
    '   Sets the file to read from and opens it.
    SR = IO.File.OpenText("Books.Txt")

    '   Changes the status of the buttons again now that the File is open and ready to read.

    openBtn.Enabled = False
    quitBtn.Enabled = False
    readBtn.Enabled = True
    closeBtn.Enabled = True
    SearBtn.Enabled = True

End Sub

Private Sub btnRead_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles readBtn.Click
    'Changes the Read button to say next because it makes more since.
    readBtn.Text = "Next"
    '   Setting all the variables.
    Dim srIndex1 As Integer = 18
    Dim srTitle As Integer
    Dim srAuthor As Integer
    Dim srPrice As Integer
    Dim srDPrice As Double
    Dim srData As String
    Dim srLength As Integer

    If SR.Peek() = -1 Then
        MessageBox.Show("End of file")
    Else
        '   Starts to read
        srData = SR.ReadLine

        '   Increment counter by 1.
        RecordCount = RecordCount + 1

        '   Determine the record length.
        srLength = srData.Length

        '   gets the book number
        bookNum.Text = srData.Substring(0, 3)

        '   ISBN number
        isbnNum.Text = srData.Substring(4, 13)

        '   Book title
        For srTitle = 1 To srLength Step 1
            If srData.Substring(srIndex1 + srTitle, 1) = "," Then
                bookTitle.Text = srData.Substring(srIndex1, srTitle)
                srIndex1 = srIndex1 + srTitle + 1
                srTitle = srLength + 1
            End If
        Next

        '   Book Author
        For srAuthor = 1 To srLength Step 1
            If srData.Substring(srIndex1 + srAuthor, 1) = "," Then
                authorName.Text = srData.Substring(srIndex1, srAuthor)
                srIndex1 = srIndex1 + srAuthor + 1
                srAuthor = srLength + 1
                Author = authorName.Text
            End If
        Next

        '   Book Price
        For srPrice = 1 To srLength Step 1
            If srData.Substring(srIndex1 + srPrice, 1) = "," Then
                srDPrice = CDbl(srData.Substring(srIndex1, srPrice))
                bookPrice.Text = srDPrice.ToString("C")
                srIndex1 = srIndex1 + srPrice + 1
                srPrice = srLength + 1
            End If
        Next

        '   Quanity
        bookQuanity.Text = srData.Substring(srIndex1, 2)
        srIndex1 = srIndex1 + 3

        '   Reorder Point
        reorderPoint.Text = srData.Substring(srIndex1, 2)

    End If

    '   record count
    recordNum.Text = RecordCount

End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    openBtn.Enabled = True
    quitBtn.Enabled = True
    readBtn.Enabled = False
    closeBtn.Enabled = False
    SearBtn.Enabled = False

End Sub

Private Sub SearBtn_Click(sender As System.Object, e As System.EventArgs) Handles SearBtn.Click
    SR = IO.File.OpenText("Authors.Txt")

    SR.Close()
    readBtn.Text = "Restart"
    RecordCount = 0
    SR = IO.File.OpenText("Books.Txt")
End Sub 
```

结束类

![程序](../Images/d0262dd15ecad8435f3a790aa391ce58.png)

作者档案[http://pastebin.com/t7C8ye9e](http://pastebin.com/t7C8ye9e) 书籍档案[http://pastebin.com/y6DNyUFd](http://pastebin.com/y6DNyUFd)

所以我的目标是只获取当前作者的信息，然后从另一个文件中获取它并取出所有尾随空格并将其显示为邮寄标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T17:19:44.570

有多种好方法可以做到这一点。现在，让我们假设每行有一个作者。如果有，您可以获取整个字符串`My.Computer.FileSystem.ReadAllText()`并使用`String.Split(Environment.NewLine)`它在每个新行上拆分它。无论如何，您需要有某种方法来分隔列表中的每个作者。`String.Split`返回一个字符串对象数组。然后，您可以遍历数组以确定某个词是否与搜索匹配。这是 for 循环的示例。

```
'... search term given in param

'... after loading text file
Dim StrArr() As String

StrArr = AuthorsString.Split(Environment.NewLine)
Dim i as Integer

For i=0 to StrArr.Length - 1 Step 1

If StrArr(i).toLower = SearchTerm.toLower Then

'String is a match! Case insensitivity should make it a little easier for     the user.

End If

Next 
```

如果您有任何问题，请告诉我。

# jquery - 如何使用布局网格在引导程序中标记表单字段

> ID：15347528
> 
> 赞同：1
> 
> 时间：2013-03-11T20:01:54.043
> 
> 标签：jquery, twitter-bootstrap

我发现了一种使用引导网格系统布局表单字段的好方法。请参阅 jsfiddle 链接。 [http://jsfiddle.net/kUNVs/](http://jsfiddle.net/kUNVs/)

当我在邮政编码字段上贴上标签时，一切看起来都还不错。但是当我使用相同的“逻辑”将标签应用于城市字段时，它位于邮政编码标签下方。或者在第二个例子中，我让它完全适应了布局。

所以问题是，基于上面 jsfiddle 中的示例，我如何向城市字段添加标签并将其定位在城市上方而不是邮政编码？

我试过这个。

```
<label for="zipcode">Zip Code</label>
<label for="city">City</label>
<div class="controls controls-row">
 <input type="text" id="zipcode" class="span1" placeholder="Zipcode"/>
 <input type="text" id="city" class="span2" placeholder="City"/>
</div> 
```

还有这个

```
<div class="controls controls-row">
 <label for="zipcode">Zip Code</label>
 <input type="text" id="zipcode" class="span1" placeholder="Zipcode"/>
 <label for="city">City</label>
 <input type="text" id="city" class="span2" placeholder="City"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:08:35.353

这应该给你一个好的开始：

```
<form>
    <div class="controls controls-row">
        <label for="street">Address</label>
        <input type="text" class="span3" id="street" name="street" placeholder="Street"/>
    </div>
    <div class="controls controls-row">
        <div class="row">
            <div class="span2">
                <label for="zipcode">Zip</label>
                <input type="text" id="zipcode" class="span1" placeholder="Zipcode"/>
            </div>
            <div class="span4">
                <label for="city">City</label>
                <input type="text" id="city" class="span2" placeholder="City"/>
            </div>
        </div>
    </div>
</form> 
```

`**[Live Demo - Basic](http://jsfiddle.net/kUNVs/55/)**`

我刚刚为邮政编码和城市添加了一行，使用两个跨度（`.span2`和一个`.span4`）来分隔它们。如果我是你，我也会更新输入本身的跨度类以匹配它们的容器跨度。

`**[Live Demo - With Input Spans](http://jsfiddle.net/kUNVs/56/)**`

# android - Eclipse ADT 虚拟机无法启动

> ID：15347530
> 
> 赞同：1
> 
> 时间：2013-03-11T20:02:05.880
> 
> 标签：android, eclipse, android-emulator, adt, eclipse-adt

请注意，这不是重复的。我没有找到可以解决我的问题的线程。

我用 hello world 示例打开了全新安装的 eclipse adt 并打开了 Android 虚拟设备管理器。在这里，我添加了几个具有不同配置的设备并在每个设备上点击启动，但我得到的只是启动虚拟设备然后.. 没有任何反应。没有日志，没有警报，什么都没有。

事情，我试过了：

1.  运行后等待 10 分钟，没有任何反应。
2.  将 adb.exe 的优先级更改为实时
3.  杀死 adb.exe（在这里，控制台开始显示连接尝试：1..2..3 ...仅此而已）
4.  将视角更改为 DDMS。在这里，没有找到任何设备。点击“reset adb”（这里，控制台显示一个现有的连接被远程主机强行关闭）
5.  在 Window->Preferences->Android 检查 SDK 位置（无空格）
6.  从命令行运行 emulator.exe -avd test2（emulator-arm.exe 停止工作）
7.  安装了不同的 API。我有 API 17 并安装了 API 16（所有子事物）
8.  运行配置Lauch as ...（不是Launch Def. Activity）
9.  删除用户数据折叠中 avd 的内容并创建新的
10.  以管理员身份运行
11.  检查stackoverflow以获取所有可能的解决方案
12.  轻微重启，创建新的 AVD，不同的设置，内存大小和东西..

注意： - 我有新 PC，没有性能问题 - 我正在使用 Adt bundle windows x86_64 - 2013 02 19 build 21.1.0-569685 - UAC 和所有这些东西都被禁用 - Windows 7 64 位 - 再次，从未做过它锁定屏幕，没有可用的日志

# jquery - 如何移动父 div？

> ID：15347531
> 
> 赞同：0
> 
> 时间：2013-03-11T20:02:10.837
> 
> 标签：jquery

让我先说一下我知道图像显示不正确（除非您已经加载了它们），我只是不知道为什么 imgur 不想与 JSFiddle 一起玩。

我有几个 Div（每个都有一个单独的 ID），其中包含一个 3 选项单选按钮。我想将整个 div 移动到适当的框中。也就是说，如果用户单击第一个选项，整个单选按钮将移至 High Interest DIV，如果他们单击第三个选项，它将移至#lowI，中间按钮应将其移回。我能够通过为每个单选按钮创建一个单独的函数来使其工作，但我觉得应该可以创建 3 个函数，一个用于单击是、确定和否，将父 div 移动到适当的位置。

[这是最新的小提琴](http://jsfiddle.net/aslum/r4crr/5/)

这是我微弱的 jquery 代码：

```
$('.no').on("click", function (e) {
    $("label.no").parent().appendTo("#lowI");
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:30:18.923

Clicking on labels is flimsy. I would use the radio change event. It is much more semantically appropriate.

```
$(document).ready(function(){
   $("input:radio").change(function () {
       var tmp = $(this).parent("div").detach();

       if($(this).val() == "yes"){
           tmp.appendTo('#highI');
       } else if($(this).val() == "ok"){
           tmp.appendTo('#nI');
       } else {
           tmp.appendTo('#lowI');
       }
    });
 }); 
```

Also see the [fiddle](http://jsfiddle.net/2ZjWj/2/). The original fiddle didn't have jQuery enabled, so it was confusing for a bit. Don't forget to include it or nothing will work!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:13:12.403

您的单选按钮将 css 属性显示为无。所以 JQuery 不会处理对它们的点击。

您需要处理对标签的点击，例如

```
$("label.no").on("click", function (e) {
    $(this).parent().appendTo("#lowI");
    e.preventDefault();
}); 
```

编辑更改了选择器，假设标签的类别为 no

# javascript - Javascript：如何打开一个包含参数的表单？

> ID：15347532
> 
> 赞同：0
> 
> 时间：2013-03-11T20:02:12.557
> 
> 标签：javascript, jstl

我想打开一个表单，其中的字段填充了与某条记录相对应的数据。

例子：

*   假设某种形式：

    # 小狗

    ```
     <table id="tabledogs" class="ui-widget ui-widget-content">
                <thead>
                    <tr class="ui-widget-header ">
                        <th>ID</th>
                        <th>Name</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach var="dog" items="${sessionScope.dogs}">
                        <tr>
                            <td width="50%" align="left">${dog.id}</td>
                            <td width="50%" align="left">${dog.name </td>
                            <td><button id="update">Update</button> </td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
        </div> 
    ```

*   我想打开下面的表格，里面有相应的狗数据（为了节省空间，这里没有显示其他表格配置）：

    ```
     <form>
            <fieldset>

                <label for="id">ID</label> 
                <input type="text" name="id" id="id" class="text ui-widget-content ui-corner-all" /> 

                <label for="name">Name</label> 
                <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all" /> 

            </fieldset>
        </form>
    </div> 
    ```

虽然我有以下 JavaScript，但它会打开表单但没有数据：

```
$("#update").button().click(function() {
    $("#dialog-form").dialog("open");
}); 
```

*   所有这些东西都在正常工作。如何将狗的数据传递给要显示的表单？正如您可能看到的，我在 SessionScope 中有一组“狗”对象。谢谢帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:27:03.553

Jquery has a [.val()](http://api.jquery.com/val/%20.val%28%29) function that should do what you want.

# php - Google+ 分享片段未填充博客中的数据

> ID：15347534
> 
> 赞同：0
> 
> 时间：2013-03-11T20:02:13.863
> 
> 标签：php, seo, wordpress-theming, google-plus

[我们刚刚对与我合作的公司 wordpress 博客](http://blog.voicebunny.com/2013/02/21/how-voicebunny-gets-professional-voice-overs-so-fast/)进行了重新设计，使其对 SEO 更友好，尽我们所能。但是我仍然对[Google+ 分享按钮](https://developers.google.com/+/web/share/)有疑问，您可以看到我们有 2 组社交按钮 3 在标题（facebook、google+ 和 twitter）中，这些按钮用于分享网站和 3 个按钮在帖子末尾旁边的“*你喜欢这篇文章吗？分享吧！* ”分享文章。

单击“ **G+ 分享**”按钮时，片段插件未使用网站的元数据，如标题和描述：

![在此处输入图像描述](../Images/db852b35d757e909d828165b2e19c8a8.png)

在[文档](https://developers.google.com/+/web/snippet/)中它说这就是我所需要的，因为我使用的是**Open Graph 协议**，但是当我测试它时，这是结果，它没有使用元数据中设置的信息：

[https://plus.google.com/share?url=http://blog.voicebunny.com/2013/02/21/how-voicebunny-gets-professional-voice-overs-so-fast/](https://plus.google.com/share?url=http://blog.voicebunny.com/2013/02/21/how-voicebunny-gets-professional-voice-overs-so-fast/)

我完全迷失的最后一件事是使用丰富的片段工具进行测试时一切看起来都很好：

[http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fblog.voicebunny.com%2F2013%2F02%2F21%2Fhow-voicebunny-gets-professional-voice-overs-so-快速%2F&html=](http://www.google.com/webmasters/tools/richsnippets?url=http://blog.voicebunny.com/2013/02/21/how-voicebunny-gets-professional-voice-overs-so-fast/&html=)

知道如何修复片段吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:50.337

为了清楚地记录一个明显的解决方案：

将 data-href 标记作为显式指向页面的一部分将明确应从何处提取元数据。尽管它可以通过其他方式获取此数据（例如，规范链接），但最好将其明确作为按钮的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:18:13.283

不完全确定，但我认为您还必须更新（或删除？）`itemprop`模板开头的元数据：

```
<meta itemprop="name" content="The Carrot Chronicle">
<meta itemprop="description" content="The Official Blog of Mr. VoiceBunny"> 
```

# jsp - 如何使用 EL 设置 JavaBean 的属性？

> ID：15347537
> 
> 赞同：0
> 
> 时间：2013-03-11T20:02:21.683
> 
> 标签：jsp, javabeans, el

我知道如何使用 EL 检索（获取）bean 的属性。如何使用 EL**设置**JavaBean 的属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:24:44.897

JSP 用于从控制器放置在请求属性中的 bean 生成标记。它不应该改变 bean 的属性。仅从 bean 中读取。所以我会首先检查你正在做的事情是否不应该在控制器而不是视图中完成。

也就是说，要设置 bean 属性，您可以使用`<c:set>`JSTL 的标记：

```
<c:set target="${someBean}" property="foo" value="someValue"/> 
```

# unix - 使用 awk 命令创建换行符？

> ID：15347540
> 
> 赞同：1
> 
> 时间：2013-03-11T20:02:28.683
> 
> 标签：unix, geektool

我试图在极客工具（桌面小部件的 mac 应用程序）中编辑脚本，有人可以帮我做这个声明，每行只打印 10 个左右的单词吗？

```
curl -s www.brainyquote.com/quotes_of_the_day.html | egrep '(div class="bqQuoteLink")|    (ahref)' | sed -n '19p; 20p;' | sed -e 's/<[^>]*>//g'\ 
```

刚才所有的东西都打印在一个大行上。

我想我可以使用 awk 命令，虽然我不确定如何在这个输出上这样做。

任何帮助，将不胜感激 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:08:06.483

尝试运行它：

```
| fold -s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:04:21.107

将此添加到命令的末尾

```
 | awk '{ print $1 $2 $3 $4 $5 $6 $7 $8 $9 }' 
```

这应该只打印每行的前九个单词，假设它们是空格分隔的。

# sql-server - ApplicationIntent=ReadOnly 在连接字符串中是什么意思

> ID：15347541
> 
> 赞同：29
> 
> 时间：2013-03-11T20:02:36.377
> 
> 标签：sql-server, ms-access

我正在使用 MS Access 通过 DSN 连接连接到 Sql Server。这是一个到 sql server 后端的链接表。这是连接字符串

```
ODBC;DSN=mydsn;Description=mydesc;Trusted_Connection=Yes;APP=Microsoft Office 2010;DATABASE=mydb;ApplicationIntent=READONLY;;TABLE=dbo.mytable 
```

如您所见`ApplicationIntent=READONLY`，连接字符串中有一个标签。这是什么意思。我是否以只读方式连接到数据库？是否建议使用此连接字符串执行更新和插入？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-11T20:12:22.623

这意味着如果您在 SQL Server 2012 中使用可用性组，引擎知道您的连接是只读的，并且可以路由到只读副本（如果它们存在）。这里的一些信息：

[在可用性副本上配置只读访问](http://msdn.microsoft.com/en-us/library/hh213002.aspx)

[可用性组侦听器、客户端连接和应用程序故障转移](http://msdn.microsoft.com/en-us/library/hh213417.aspx)

如果您当前未使用可用性组，则将其保留在其中以实现前向兼容性*可能*是个好主意，但这实际上取决于您是否有意仅阅读。这应该可以防止写入，但有一些警告。这些 Connect 项目可能很有用，也可能会让您摸不着头脑。我承认我没有把它们读完。

[ApplicationIntent=ReadOnly 允许更新数据库](http://connect.microsoft.com/SQLServer/feedback/details/697217/applicationintent-readonly-allows-updates-to-a-database)

[ApplicationIntent=ReadOnly 不发送连接到辅助副本](http://connect.microsoft.com/SQLServer/feedback/details/700331/applicationintent-readonly-does-not-send-the-connection-to-the-secondary-copy)

# shell - Makefile 中的递归清理

> ID：15347543
> 
> 赞同：3
> 
> 时间：2013-03-11T20:03:04.690
> 
> 标签：shell, recursion, makefile

我正在尝试创建一个可以在调用时递归构建/清理的 Makefile。我的构建工作正常，但是 clean 命令出现错误。

我的目录结构是这样的：

```
main
 |
 +-- Makefile
 |
 +-- common
 |      |
 |      +-- gcas_debug
 |      |      |
 |      |      +-- Makefile
 |      + -- gcas_nvdata
 |             |
 |             +-- Makefile
 +-- gcinit
        +-- Makefile 
```

当我`make`在主目录中调用时，它会按照我的意愿进行构建并构建所有内容，但是当我调用`make clean`它时：

```
mike@mike-VirtualBox:~/iCOM/framework$ make clean
for d in common/gcas_debug common/gcas_nvdata; \
    do \
    make --directory=$f clean; \
    done
make: the `-C' option requires a non-empty string argument
Usage: make [options] [target] ...
Options:
  -b, -m                      Ignored for compatibility.
... 
```

我不明白为什么 clean 命令不起作用...有什么建议吗？
完整（主要）Makefile：

```
lib_gcas_debug := common/gcas_debug
lib_gcas_nvdata := common/gcas_nvdata
libraries := $(lib_gcas_debug) $(lib_gcas_nvdata)
DESTDIR=$(PWD)/output
bindir=

gc_init := gcinit
EXE := $(gc_init)/$(gc_init)

.PHONY: all $(gc_init) $(libraries)
all: $(gc_init)

$(gc_init) $(libraries):
    $(MAKE) --directory=$@

$(gc_init): $(libraries)

install: $(gc_init)
    install -d -m 0755 $(DESTDIR)$(bindir)
    install -m 0755 $(EXE) $(DESTDIR)$(bindir)

clean:
    for d in $(libraries); \
    do \
    $(MAKE) --directory=$$f clean; \
    done 
```

* * *

编辑：如果我交换我`for d`得到`for $d`：

```
mike@mike-VirtualBox:~/iCOM/framework$ make clean
for  in common/gcas_debug common/gcas_nvdata; \
    do \
    make --directory= clean; \
    done
/bin/sh: -c: line 0: syntax error near unexpected token `common/gcas_debug'
/bin/sh: -c: line 0: `for  in common/gcas_debug common/gcas_nvdata; \'
make: *** [clean] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-25T17:34:46.413

这对我有用：

```
SUBDIRS := foo bar baz

.PHONY: subdirs $(SUBDIRS) clean all

subdirs: $(SUBDIRS) 

$(SUBDIRS):
    $(MAKE) -C $@ $(MAKECMDGOALS)

clean: $(SUBDIRS)
    rm -rf dist

dist: $(SUBDIRS) dist/.build_marker

dist/.build_marker: 
    mkdir -p dist
    for d in $(SUBDIRS) ; do cp $$d/dist/* dist ; done
    touch dist/.build_marker 
```

我只需要使用*dist*目标中的 for 循环来复制文件。这允许`make -j`构建并行性，更不用说更易于阅读的 Makefile。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:06:04.663

Read the for loop again:

```
for d in [...]; do make --directory=$f 
```

Didn't you mean `$d`, as in

```
for d in [...]; do make --directory=$d 
```

So, the Makefile should look:

```
for d in common/gcas_debug common/gcas_nvdata; \
do \
    make --directory=$d clean; \
done 
```

# javascript - Jquery导致表单输入继承错误类

> ID：15347547
> 
> 赞同：0
> 
> 时间：2013-03-11T20:03:21.287
> 
> 标签：javascript, jquery, html

输入有效电子邮件时；表格的延续显示/向上滑动。惊人的！但是，下一个输入继承了`.tobefixed`(error) 类。

我做了一个[小提琴](http://jsfiddle.net/SQaSr/43/)来展示我正在处理的事情。如何仅`.tobefixed`在尝试提交后显示要显示的错误类？

如果我能对此有所了解，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:15:10.597

Apply 按钮导致表单提交甚至触发，因为它位于表单内部。

如果您给该按钮一个虚拟表单名称，它将与 startform 断开连接。

```
<button **form=""** data-next-id="form1" validationDiv="signup" class="continue button button-action apply">Apply</button> 
```

# asp.net-mvc - 是否可以在 Orchard CMS 中使用剃须刀布局并绕过主题

> ID：15347551
> 
> 赞同：4
> 
> 时间：2013-03-11T20:03:34.600
> 
> 标签：asp.net-mvc, orchardcms

**一点上下文**

我们有一个最近被很多人使用的 MVC4 Web 应用程序，我们希望将其移植到 Orchard CMS。即使这是一个“管理”类型的应用程序，我们也不希望它成为 Orchard 管理部分的一部分。此应用程序目前已上线，我们希望迁移到 Orchard 对最终用户而言尽可能不可见。

**我们现在在哪里**

我们按照这个答案作为如何[将现有的 ASP.NET MVC 应用程序与 Orchard CMS 集成，](https://stackoverflow.com/questions/5269170/integrate-existing-asp-net-mvc-application-with-orchard-cms/5270458#5270458%20answer)但我们使用布局（Razor 不是 Orchard），并且它在 Orchard 呈现页面的方式（默认情况下）不起作用（控制器操作返回的视图是不显示布局 - _ViewStart.cshtml 被忽略）。我试图在 View 方法中指定布局的路径，但它不起作用或路径不好，因为我们在一个模块中。有没有办法告诉 Orchard 使用 _layout.cshtml 文件并绕过 Orchard 主题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:00:33.397

可以绕过 Orchard 主题。请注意，我使用 MvcMailer 执行此操作，因此输出的电子邮件是带有布局的“模板化”HTML。我不能肯定地说这适用于常规页面，但您可以尝试一下。只需在你的视野中拍下这个：

```
@inherits System.Web.Mvc.WebViewPage<object>
@{
  Layout = "_Layout.cshtml";
} 
```

警告：您不能使用较新的 @model 指令。我只是回到旧样式并将我的模型放在“对象”所在的位置：

```
@using Namesapce.ViewModels
@inherits System.Web.Mvc.WebViewPage<MyViewModel> 
```

否则，创建主题并覆盖 Orchard 的任何形状都非常简单。我有两种方法：

1.  创建一个简单的主题，覆盖形状（假设你想要一个不同的登录，只需在主题的 ~/View 文件夹中创建 Login.cshtml），使用替代（使用 Layout-homepage.cshtml 覆盖主页的布局），拥有你的 . css等；
2.  使用一些技巧来使用模块中的代码覆盖主题，并在主题文件夹中创建自己的视图和形状。例如，您可以在主题中有一个 Layout.cshtml 文件，其中包含显示形状的代码。但是，形状本身（.cshtml 文件）存在于您的模块中，这非常适合使用仪表板类型主题，该主题将调用在不同模块中名称相同但显示不同内容的形状。这方面的代码更深入一些。只需询问您是否需要样品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:04:07.540

**tl;博士**不，这是不可能的。

我不喜欢回答我自己的问题，但由于 Bertrand Le Roy 评论了我的问题而不是回答它（没有难过的感觉）而且他是 Orchard 团队的一员（或者曾经是？），我会用我所知道的来回答，直到有人有一个更好的答案。

据我了解，成为 Orchard 项目的一部分就是一路拥抱它，没有中间地带。无法在模块中绕过自定义（Orchard）视图引擎（与区域、布局、小部件、形状等一起使用）（回退到默认 MVC 引擎）。正如 Bertrand 建议的那样，我应该将我的项目转换为 Orchard 主题。

# asp.net - ASP.NET 按钮单击事件问题（回发）

> ID：15347553
> 
> 赞同：0
> 
> 时间：2013-03-11T20:03:39.977
> 
> 标签：asp.net, sql, vb.net, postback

我遇到的问题是，通过单击按钮1 应保存在文本框中输入的数据（请参阅代码），但是当页面回发时，数据未保存（不出现确认消息），然后如果我再次单击它确实保存记录，有时需要 3 次以上才能存储每个确认消息的数据。

**这是一个 Con.Dispose 问题吗？？？我应该使用 con.close 吗？**
注意：在代码中我有 Con.CLOSE 但是页面部署在 Con.Dispose() 下注
2：我计划修复代码中发现的更多“新手”问题，但回发问题中仍然存在紧急问题。

```
 ' *--------Empty Text Validation-------*
    If TextBox10_AddData_LabInvest.Text <> "" AndAlso TextBox3_AddData_LabInvest.Text <> "" AndAlso TextBox4_AddData_LabInvest.Text <> "" AndAlso TextBox5_AddData_LabInvest.Text <> "" AndAlso TextBox6_AddData_LabInvest.Text <> "" AndAlso TextBox7_AddData_LabInvest.Text <> "" Then

        ' *--------SQL Insert command-------*
        SqlDataSource_AddData_LabInvest.InsertCommand = "INSERT INTO [LabInvest] (ID_LabInvest, LabInvest_Load, LabInvest_SeqRef_CH, LabInvest_SeqRef_Year, LabInvest_Owner, LabInvest_Subject, LabInvest_DueDate, LabInvest_Code, LabInvest_QSNCCode, LabInvest_OpenByOwner, LabInvest_OpenDateOwner, Status_Text, Status_Int ) VALUES(@ID_LabInvest, @LabInvest_Load, @LabInvest_SeqRef_CH, @LabInvest_SeqRef_Year, @LabInvest_Owner, @LabInvest_Subject, @LabInvest_DueDate, @LabInvest_Code, @LabInvest_QSNCCode, @LabInvest_OpenByOwner, @LabInvest_OpenDateOwner, @Status_Text, @Status_Int)"
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("ID_LabInvest", TextBox10_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_Load", "N/A")
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_SeqRef_CH", TextBox1_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_SeqRef_Year", TextBox2_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_Owner", TextBox3_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_Subject", TextBox4_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_DueDate", TextBox5_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_Code", TextBox6_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_QSNCCode", TextBox7_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_OpenByOwner", TextBox8_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("LabInvest_OpenDateOwner", TextBox9_AddData_LabInvest.Text)
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("Status_Text", "Stage 1 - Just Added")
        SqlDataSource_AddData_LabInvest.InsertParameters.Add("Status_Int", "1")

        Try
            SqlDataSource_AddData_LabInvest.Insert()

            ' *--------Get Unique ID-------*
            Dim Con As New SqlConnection
            Dim SQL As String
            Dim com As SqlCommand = Con.CreateCommand
            Con.ConnectionString = "removed"
            Con.Open()
            SQL = "SELECT ID_LabInvest FROM LabInvest WHERE ID_LabInvest=" + TextBox10_AddData_LabInvest.Text
            Dim cmd As New SqlCommand(SQL, Con)
            Dim obj = cmd.ExecuteScalar()
            Label1_AddData_LabInvest.Text = "Your record ID is: " + obj.ToString()

            ' *--------Get Stage-------*
            Dim SQL2 As String
            SQL2 = "SELECT Status_Text from LabInvest WHERE ID_LabInvest=" & obj
            Dim cmd2 As New SqlCommand(SQL2, Con)
            Dim obj2 = cmd2.ExecuteScalar()
            Label2_AddData_LabInvest.Text = "Record Stage: " + obj2.ToString()
            con.close()
            Button4_AddData_LabInvest.Enabled = False

            ' *--------SQL Audit Insert command-------*
            Dim Usercheck As String
            Usercheck = Request.ServerVariables("LOGON_USER")
            SqlDataSource_LabInvest_Audit.InsertCommand = "INSERT INTO [AuditTrial] (ID_Table, AuditTableName, AuditAction, AuditUser, AuditValue1Before, AuditValue2Before, AuditValue1After, AuditValue2After, AuditMasterReason, AuditMasterChange) VALUES(@ID_Table, @AuditTableName, @AuditAction,  @AuditUser, @AuditValue1Before, @AuditValue2Before, @AuditValue1After, @AuditValue2After, @AuditMasterReason, @AuditMasterChange)"
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("ID_Table", obj)
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditTableName", "LaboratoryInvestigations_Add")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditAction", "Added New Record")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditUser", Usercheck)
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditValue1Before", "N/A")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditValue2Before", "N/A")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditValue1After", "N/A")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditValue2After", "N/A")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditMasterReason", "N/A")
            SqlDataSource_LabInvest_Audit.InsertParameters.Add("AuditMasterChange", "N/A")
            SqlDataSource_LabInvest_Audit.Insert()

        Catch ex As Exception
            Label1_AddData_LabInvest.Text = "Duplicate NumberID, Please Review Data"
        End Try

    Else
        Label1_AddData_LabInvest.Text = "Please Fill All Options"
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:47:16.977

该问题是在应用程序驻留在具有 NLB 的 Web 服务器场中时发现的，因此空白回发是由于 NBL 将用户从原始连接重定向到另一台服务器。（不同的解决方案可能会应用链接 NO Cache、Connection Affinity 等）希望它在未来对某人有所帮助。

# android - AudioRecording的基本理解

> ID：15347559
> 
> 赞同：1
> 
> 时间：2013-03-11T20:03:56.343
> 
> 标签：android, audio-recording

使用 AudioRecord 录制时，我在计算每帧的时间时遇到问题。因此，如果有人可以成为兄弟并解释将不胜感激的基础知识。

以下是什么意思？

*   sampleRate - 它是您作为样本提供的字节数吗？或成为要使用 AudioRecord 检查的样本的字节数
*   FFT - 简单来说是什么意思？
*   你如何计算时间？你是通过buffersize / frameByteSize来计算的吗？

参考从 Jacquet Wong 复制的示例代码

```
public class RecorderThread extends Thread {

private AudioRecord audioRecord;
private boolean isRecording;
private int channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;
private int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;
private int sampleRate = 44100;
private int frameByteSize = 2048; // for 1024 fft size (16bit sample size)
byte[] buffer;

public RecorderThread(){
    int recBufSize = AudioRecord.getMinBufferSize(sampleRate, channelConfiguration, audioEncoding); // need to be larger than size of a frame
    audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleRate, channelConfiguration, audioEncoding, recBufSize);
    buffer = new byte[frameByteSize];
}

public AudioRecord getAudioRecord(){
    return audioRecord;
}

public boolean isRecording(){
    return this.isAlive() && isRecording;
}

public void startRecording(){
    try{
        audioRecord.startRecording();
        isRecording = true;
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void stopRecording(){
    try{
        audioRecord.stop();
        isRecording = false;
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public byte[] getFrameBytes(){
    audioRecord.read(buffer, 0, frameByteSize);

    // analyze sound
    int totalAbsValue = 0;
    short sample = 0; 
    float averageAbsValue = 0.0f;

    for (int i = 0; i < frameByteSize; i += 2) {
        sample = (short)((buffer[i]) | buffer[i + 1] << 8);
        totalAbsValue += Math.abs(sample);
    }
    averageAbsValue = totalAbsValue / frameByteSize / 2;

    //System.out.println(averageAbsValue);

    // no input
    if (averageAbsValue < 30){
        return null;
    }

    return buffer;
}

public void run() {
    startRecording();
} 
```

}

对不起，我不是一个容易学习录音的人。我似乎还不能让它点击。希望各位大神能解答一下这个问题。

# haskell - 从 Bytestring 中获取任意位片

> ID：15347560
> 
> 赞同：2
> 
> 时间：2013-03-11T20:04:01.263
> 
> 标签：haskell, binary, bits, bytestring, bitstream

我想用一个lazy`Bytestring`来表示一个比特流。我需要能够有效地从该流中获取任意位片。例如，我可能有一个`ByteString`长度为 10 的 a，我想`ByteString`从原始的`ByteString`.

问题是s`ByteStrings`的数组`Word8`，所以取不是 8 的倍数的范围很困难。我能想到的最好的就是这个，使用`Data.Binary`and `Data.Binary.Bits`。请注意，这`get32BitRange`专门针对范围 <= 32。

```
get32BitRange :: Int -> Int -> ByteString -> ByteString
get32BitRange lo hi = runPut . putWord32be
                    . runGet (runBitGet . block $ word8 (8 - (lo `quot` 8)) *> word32be len)
                    . drop offset
    where len = hi - lo
          lo' = lo `div` 8
          offset = fromIntegral lo' - 1 
```

算法是：

*   找到第一个`Word8`包含我想要的位的索引
*   从最高下降`ByteString`到该指数
*   如果位范围的低端不是 8 的倍数，则在 的开头会有一些多余的位`Word8`，所以跳过那些
*   获取 (hi - lo) 位，并存储在`Word32`
*   把它`Word32`放进一个`ByteString`

它看起来有点难看，有没有更有效的方法可以从 a 中获取任意切片`ByteString`？

编辑：这是一个更有效的版本

```
get32BitRange :: Int -> Int -> ByteString -> Word32
get32BitRange lo hi = runGet get
    where get = runBitGet . block $ byteString byteOff *> word8 bitOff *> word32be len
          len = hi - lo
          (byteOff, bitOff) = lo `quotRem` 8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:31:21.120

我认为其他解决方案更好*，但*您可以使用 Internal 模块来获取底层结构：[http ://hackage.haskell.org/packages/archive/bytestring/0.10.2.0/doc/html/src/Data-ByteString -Internal.html#ByteString](http://hackage.haskell.org/packages/archive/bytestring/0.10.2.0/doc/html/src/Data-ByteString-Internal.html#ByteString)

```
data ByteString = PS {-# UNPACK #-} !(ForeignPtr Word8) -- payload
                     {-# UNPACK #-} !Int                -- offset
                     {-# UNPACK #-} !Int                -- length 
```

然后，您可以使用标准指针工具生成`ByteString`s 指向您想要的位置，通过`ForeignPtr`直接操作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:15:20.117

您无法将其`ByteString`作为您的 API 类型来提高效率，因为它不携带您想要的“位”真正从第一个字节的某个偏移量开始的信息。

最好的办法是制作一个包装器类型：

```
data BitStream =
    BitStream {
        info :: ByteString,
        -- values from 0-7: ignore all bits in the first byte up to
        -- but not including this offset
        firstBitOffset :: !Int,to but not including this offset
        -- values from 0-7: ignore all bits in the last byte after
        -- but not including this offset
        lastBitOffset :: !Int
    } 
```

然后你可以围绕这个设计一个基于位的 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-13T00:51:45.923

我将把它标记为已解决。这就是我最终使用的：

```
get32BitRange :: Int -> Int -> ByteString -> Word32
get32BitRange lo hi = assert (lo < hi) $
    runGet (runBitGet bitGet)
    where bitGet = block $ byteString byteOff
                         *> word8 bitOff
                         *> word32be len
          len = hi - lo
          (byteOff, bitOff) = lo `quotRem` 8 
```

# crystal-reports - Crystal Reports 公式变量传递

> ID：15347561
> 
> 赞同：1
> 
> 时间：2013-03-11T20:04:02.337
> 
> 标签：crystal-reports, formula

我正在处理此报告，以显示按月分组的所有预计采购，显示总和（每月调用`"Monthly_Total"`以及显示预算（调用`"Monthly_Budget"`当月。我还有一个使用共享 currencyvar 的子报表`"Starting_Balance"`。这个共享变量每当运行报告时更新。我需要找到一种方法来进行以下计算：

第一个月（在这种情况下，报告从 3 月开始）应该是

```
"Starting_Balance" + "Monthly_Total") - "Monthly_Budget" = "New_Balance" 
```

随后的每个月份都将使用该公式

```
("New_Balance" + "Monthly_Total") - "Monthly_Budget" 
```

我可以让它为第一个组页脚工作，但是之后每个月都引用回`"Starting_Balance"`而不是`"New_Balance"`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:07:12.510

尝试使用一个标志变量来说明第一个月是否已经报告。我最初虽然使用 New_Balance 作为 0，但这可能会自然发生。

所以，像

报告标题中的初始化程序：

```
WhilePrintingRecords;
Global BooleanVar First_Month_Done := false; // have we printed the first month?
""; // print nothing on screen 
```

每月公式

```
WhilePrintingRecords;  // Optional when using shared variables
Global BooleanVar First_Month_Done;
Global CurrencyVar New_Balance;  //or whatever it is
Shared CurrencyVar Starting_Balance;
// Assuming "Monthly_Total" and "Monthly_Budget" are formulas, not variables

If First_Month_Done
    Then New_Balance := New_Balance + {@Monthly_Total} - {@Monthly_Budget}
    Else New_Balance := Starting_Balance + {@Monthly_Total} - {@Monthly_Budget};

First_Month_Done := true;
New_Balance 
```

# html - 一个元素在另一个元素上的背景图像

> ID：15347562
> 
> 赞同：1
> 
> 时间：2013-03-11T20:04:04.680
> 
> 标签：html, css

目标是在 div#slider 元素的背景图像上呈现“a”元素的背景图像。

首先，这是代码：

```
<div id="top_bg">
    <div id="top">
        <nav>
            <ul>
                <li><a href="#">Link onegfdgdfg gd</a></li>
                <li><a href="#">Link two</a></li>
                <li><a href="#">Link three</a></li>
                <li><a href="#">Link four</a></li>
                <li><a href="#">Link five</a></li>
            </ul>
        </nav>
    </div>
</div>

<div id="slider">
</div> 
```

jFiddle 链接包含我对此的尝试：http: [//jsfiddle.net/zorza/drBBC/11/](http://jsfiddle.net/zorza/drBBC/11/)

我尝试在相对“li”中使用“a”元素的绝对定位，这使我能够为它提供 z-index，因此它可以出现在#slider 上。它几乎可以工作，但需要“li”具有恒定的宽度才能在其中定位“a”，当内部文本比恒定宽度宽时会导致不好的方式（参见第一个菜单项）。

我想要的是一个“a”元素来根据内部文本设置它自己的宽度并摆脱“li”元素的恒定宽度，因此菜单项之间的间隙将是均匀的。

我想出的第二种方法是将#slider 背景分割成两个图形，并将其中一个（具有箭头高度的那个）放在#top div background-image 中。这样，“a”元素就不需要绝对定位。但是这种解决方案一点也不优雅，当需要更改图像时会产生各种麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:06:31.503

```
#top-bg{
    background-image:url('yourImage.png');
} 
```

That will work. No need for div#background.

Edit try this:

```
a:hover :after{
    width:0;
    height:0;
    content:'';
    border:10px solid transparent;
    border-top-color:#333333;
    position:absolute;
    top:100%;
    left:49%;
} 
```

I think that should work. Without adding the image and without positioning new elements and repositioning the anchors

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T01:53:07.163

你有没有试过，一个项目的宽度都是一样的大小

```
li, a {
display: /*block or inline-block depending on the layout you were after*/
} 
```

并自动宽度为

```
a {
width: auto;
} 
```

# android - 恢复中断的线程

> ID：15347572
> 
> 赞同：3
> 
> 时间：2013-03-11T20:04:46.973
> 
> 标签：android, multithreading

`Thread`是否可以在 Android中恢复中断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:08:47.900

您不应该通过其 API 恢复 Thread，`resume()`方法已弃用（[原因](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)）。

您可以通过杀死线程并启动一个新线程来模拟恢复线程：

```
/**
Since Thread can't be paused we have to simulate pausing. 
We will create and start a new thread instead. 
*/
public class ThreadManager
{
    private static GameThread gameThread = new GameThread();

    public static void setRunning(boolean isRunning)
    {
        if (isRunning)
        {
            gameThread = new GameThread();
            gameThread.setRunning(true);
            gameThread.start();
        }
        else
        {
            gameThread.setRunning(false);
        }
    }

    public static boolean isRunning()
    {
        return gameThread.isRunning();
    }

    public static void join() throws InterruptedException
    {
        gameThread.join();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:12:56.680

[Thread](http://developer.android.com/reference/java/lang/Thread.html)不支持这些操作，因为相关方法已被弃用。

*   [暂停（）](http://developer.android.com/reference/java/lang/Thread.html#suspend%28%29)
*   [恢复（）](http://developer.android.com/reference/java/lang/Thread.html#resume%28%29)

# android - object recognition in real time on Android with FAST detector

> ID：15347574
> 
> 赞同：4
> 
> 时间：2013-03-11T20:04:56.863
> 
> 标签：android, opencv

The aim of this work is to extract real-time key points from an existing image in a video scene processFrame has the execution that does not work, due to match, is that I can just display the key points of correspondence in the form of circles on the image in real time

```
class Sample1View extends SampleViewBase {
    public static final int     VIEW_MODE_RGBA   = 0;
    public static final int  VIEW_MODE_BLUE  = 1; 
    public static final int  VIEW_MODE_YELLOW = 2;
    public static final int  VIEW_MODE_DE = 3;
    private Mat mYuv;
    private Mat mRgba;
    private Mat mGraySubmat;
    private Mat mResult;
    private Mat mIntermediateMat;
 private Bitmap mBitmap;
 private int mViewMode;
 private Mat mColor;
 private Mat mHsv;
 TimingLogger timings;
   private Mat img1;
    private Mat descriptors;
    private MatOfKeyPoint keypoints;
    private FeatureDetector detector;
    private DescriptorExtractor descriptor;
    private DescriptorMatcher matcher;

 private static final String TAG ="Sample::View";

    public Sample1View(Context context) {
        super(context);
        mViewMode = VIEW_MODE_RGBA;

 try {
 img1=Utils.loadResource(getContext(), R.drawable.wings);
 } catch (IOException e) {
 // TODO Auto-generated catch block
 Log.w("Activity::LoadResource","Unable to load resource R.drawable.wings");
 e.printStackTrace();
 }
        descriptors = new Mat();
        keypoints = new MatOfKeyPoint();
        detector = FeatureDetector.create(FeatureDetector.FAST);
        detector.detect(img1, keypoints);
        descriptor = DescriptorExtractor.create(DescriptorExtractor.ORB);
        descriptor.compute(img1, keypoints, descriptors);
        matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING);
    }

 @Override
 protected void onPreviewStarted(int previewWidth, int previewHeight) {
     Log.i(TAG, "preview Started");
     synchronized (this) {
         mYuv = new Mat(getFrameHeight() + getFrameHeight() / 2, getFrameWidth(), CvType.CV_8UC1);
         mGraySubmat = mYuv.submat(0, getFrameHeight(), 0, getFrameWidth());
         mRgba = new Mat();
         mIntermediateMat = new Mat();
         mBitmap = Bitmap.createBitmap(previewWidth, previewHeight, Bitmap.Config.ARGB_8888); 
         mHsv = new Mat();
         mColor = new Mat();
         mResult = new Mat();
         }
 }

 @Override
 protected void onPreviewStopped() {
     Log.i(TAG, "preview Stopped");
     if(mBitmap != null) {
   mBitmap.recycle();
  }

  synchronized (this) {
            // Explicitly deallocate Mats
            if (mYuv != null)
                mYuv.release();
            if (mRgba != null)
                mRgba.release();
            if (mGraySubmat != null)
                mGraySubmat.release();
            if (mIntermediateMat != null)
                mIntermediateMat.release();
            mYuv = null;
            mRgba = null;
            mGraySubmat = null;
            mIntermediateMat = null;
            if (mResult != null)
             mResult.release();
            if (mHsv != null)
             mHsv.release();
            if (mColor != null)
             mColor.release();
            mColor = null;
         mResult = null;
         mHsv = null;
        }
    } 
```

// cvt_YUVtoRGBtoHSV :

```
 @Override
    protected Bitmap processFrame(byte[] data) {

        mYuv.put(0, 0, data);
        final int viewMode = mViewMode;

                 ColorDetection.cvt_YUVtoRGBtoHSV(mYuv,mGraySubmat);

      MatOfKeyPoint mKeyPoints = new MatOfKeyPoint();
    MatOfDMatch  matches = new MatOfDMatch();
      detector.detect(mGraySubmat, mKeyPoints);
      descriptor.compute(mGraySubmat, mKeyPoints, mIntermediateMat);
      matcher.match(mIntermediateMat, descriptors, matches);
      mIntermediateMat2.create(resultSize, CvType.CV_8UC1);

      Features2d.drawMatches(mGraySubmat, mKeyPoints, mGraySubmat, mKeyPoints, matches, mIntermediateMat2);
      Imgproc.resize(mIntermediateMat2, mIntermediateMat2, mRgba.size());
      Imgproc.cvtColor(mIntermediateMat2, mRgba, Imgproc.COLOR_RGBA2BGRA, 4);
        break;
        }
    Bitmap bmp = mBitmap;

    try {
      Utils.matToBitmap(mRgba, bmp);

    } catch(Exception e) {
        Log.e("org.opencv.samples.*", "Utils.matToBitmap() throws an exception: " + e.getMessage());
        bmp.recycle();
        bmp = null;
    }
    return bmp;
    }

    public void setViewMode(int viewMode) {
     mViewMode = viewMode;
    }
} 
```

and that in the Log

CvException [org.opencv.core.CvException: /home/reports/ci/slave/50-SDK/opencv/modules/features2d/src/draw.cpp:207: error: (-215) i1 >= 0 && i1 < static_cast(keypoints1.size()) in function void cv::drawMatches(const cv::Mat&, const std::vector&, const cv::Mat&, const std::vector&, const std::vector&, cv::Mat&, const Scalar&, const Scalar&, const std::vector&, int)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T17:51:45.067

这篇文章有点旧，但我给出了答案。

您的 drawMatches 函数的前四个参数不正确。前两个和后两个是一样的。
您可以从 (mGraySubmat, mKeyPoints, mGraySubmat, mKeyPoints, ...) 更改 drawMatches 的前四个参数；
到
    （mGraySubmat，mKeyPoints，img1，关键点，...）；
或
    (img1, 关键点, mGraySubmat, mKeyPoints, ...);
使用适合您的那个。

对于其他读者，如果他们有同样的问题，他们可以尝试用后两个参数更改前两个参数。
例如：
    （image1，keypointsImage1，image2，keypointsImage2，...）；
到
    (image2, keypointsImage2, image1, keypointsImage1, ...);

对我来说，它解决了我的错误。

# objective-c - 财产在 IBAction 中失去价值

> ID：15347576
> 
> 赞同：2
> 
> 时间：2013-03-11T20:05:24.313
> 
> 标签：objective-c, cocoa

我正在为一个窗口设置父属性，当我签入该属性时`windowDidLoad`，一切都很好。但是当我检查它时`IBAction`，它是零。我在这里想念什么？

应用控制器.m

```
loginController = [[LoginController alloc] initWithWindowNibName:@"Login" owner:self];
loginController.parent = self;
[[loginController window] makeKeyAndOrderFront:self]; 
```

登录控制器.h

```
@property (nonatomic, weak) AppController *parent; 
```

LoginController.m @synthesize 父级；

```
- (void)windowDidLoad
{
    [super windowDidLoad];

    NSLog(@"Parent: %@", self.parent); //<--- Parent: <AppController: 0xblahblah>
}

- (IBAction)login:(id)sender
{
    NSLog(@"Parent: %@", self.parent); //<--- nil
} 
```

![在此处输入图像描述](../Images/2d5441c74252d94f797b15a4530529db.png)![在此处输入图像描述](../Images/e689ae3fb6160a00657267f46798840e.png)![在此处输入图像描述](../Images/3d693c468b5f34bd829f90aa744d7f83.png)![在此处输入图像描述](../Images/c45047064a0b2e1498bb5d15045bb89d.png)![在此处输入图像描述](../Images/ae817817f51614e875332ceba54ffdb8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:27:10.550

我认为您的问题只是您设置了错误的文件所有者，是保存 xib 文件的登录控制器，因此它绑定了所有 IBOutlets 和 IBActions。

调用 initWithWindowNibName: 而不是 initWithWindowNibName:owner: ，这样文件所有者将是新创建的登录控制器，而不是应用程序控制器：

```
loginController = [[LoginController alloc] initWithWindowNibName:@"Login"]; 
```

**编辑**

就像我怀疑的那样，您有两个单独的登录控制器实例，而您认为只有一个。查看 xib 文件：

![在此处输入图像描述](../Images/7a531a221de85a20cdc5b5638635e76c.png)

xib 文件中的该对象“登录控制器”创建另一个登录控制器实例。它与您在应用程序控制器中分配的实例不同。

解决方案是让 parent 成为 IBOutlet：

```
@property (nonatomic, weak) IBOutlet AppController *parent; 
```

并且不要在应用程序控制器中分配它，它将自动从 xib 文件中加载。**您所要做的就是将它绑定到 xib 文件中的登录控制器实例**（如果文件所有者是应用程序控制器，您应该 ctrl-拖动父属性到对象图标，告诉我您是否遇到问题） . 这就是它打印 null 的原因：该操作由另一个对象处理，该对象尚未初始化 parent 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:45:24.513

在 viewDidLoad 中，您访问一个名为 的 iVar `parent`。在登录中：您访问该属性`self.parent`。这可以是相同的，也可以是不同的。

你`@synthesize`有财产吗？如果是这样，没有任何额外的选择？那你应该没事。父母和`self.parent`应该是同一件事。

你是自动合成的吗？那没问题。但随后会调用相应的 iVar `_parent`。这意味着你必须有一个额外的 ivar `parent`，它不是同一个 ivar。

将所有声明添加到您的问题中以获取更多详细信息。

# c# - 参考路线和 Web API

> ID：15347578
> 
> 赞同：0
> 
> 时间：2013-03-11T20:05:29.913
> 
> 标签：c#, routes, asp.net-web-api

我在某些路线上遇到了一些问题。首先，看这篇文章： [REST api, POST entity with Relations？](https://stackoverflow.com/questions/15341788/rest-api-post-entity-with-relationships)

我不确定如何为该答案实际创建路线/路线，所以我开始这样做：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        //Artist/////////////////////////////
        config.Routes.MapHttpRoute(
            name: "ArtistAlbum",
            routeTemplate: "api/artist/{id}/album",
            defaults: new { controller = "ArtistAlbum" }
        );
        //////////////////////////////////// 
```

但是第一条路线也可以通过简单地导航到`/api/ArtistAlbum/{artistid}/album`我不想要的内容来发布、获取等。

我想限制用户只能通过使用`/api/artist/{id}/album`路由来获取、发布、放置、删除等。有任何想法吗？

如果您问我，由于手动创建大量路线，因此有关如何执行此操作的任何建议似乎都不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:09:16.700

订单很重要。如果你想`api/artist/{id}/album`优先于类似的东西`api/artist/{id}`，那么你需要将你的调用顺序切换到`config.Routes.MapHttpRoute`

这样`api/artist`路由将优先于`api/ANYTHING`.

# c - how to parse/extract some info out of an xml file in C

> ID：15347580
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:05:30.600
> 
> 标签：c, xml-parsing

> **Possible Duplicate:**
> [XML Parser for C](https://stackoverflow.com/questions/399704/xml-parser-for-c)

Hello there I need some quick help on how to parse/extract information out of an XML file using C.

The project I am trying to work on is just for personal learning. I'm trying to learn C on my own. I am trying to write a program that will search about spacefic text or the name of the author from a pregenerated XML config file.

Below is a copy of what my XML looks like:

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<config>
    <quote>
    <text>
        "Moral indignation is jealous with a halo."
    </text>
    <author>
        H.G. Wells
    </author>
    <livedfrom>
        1866-1946
    </livedfrom>
    <extrainfo />
</quote> 
```

If someone can just help me get started or direct me to some reading material online or tutorial, I would greatly appreciate.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:27:59.223

无论如何，这将归结为解析文本的艺术。你应该阅读形式语法，也许看看如何使用 Flex 和 Bison 构建一个简单的解析器。

否则，构建解析器的经典方法是使用一个前瞻令牌来执行所谓的递归体面解析器。

然而，解析器总是与分词器协同工作。标记器的任务是将某些字符串转换为标记（通常实现为数值）。令牌通常携带生成它的字符串（或从字符串生成的某个值（不是令牌值），例如某个数字常量），因此解析器可以采取适当的行动。正则表达式通常用于告诉分词器将什么字符串转换为什么令牌。

所以再次回到递归体面的解析器。它本质上看起来像下面的代码。但请查看例如[Wikipedia](http://en.wikipedia.org/wiki/Recursive_descent_parser)以获取更多信息。

```
void handle_token_foo()
{
  //Do something now when we know we handle token FOO
  ....
  //Find next token and take appropriate action
  Token t = tokenizer.get_next_token();
  if(t == TOKEN_TYPE_BAR)
  {
    parse_token_bar();  
  }
  else if(t == TOKEN_TYPE_FOO)
  {
    parse_token_foo();
  }
  else if(t == TOKEN_TYPE_END)
  {
     return;
  }
  throw ParseError();
  return 
}

void handle_token_bar()
{
  //Do something now when we know we handle token BAR
  ....
  //Find next token and take appropriate action

  Token t = tokenizer.get_next_token();
  if(t == TOKEN_TYPE_BAR)
  {
    parse_token_bar();  
  }
  else if(t == TOKEN_TYPE_FOO)
  {
    parse_token_foo();
  }
  else if(t == TOKEN_TYPE_END)
  {
     return;
  }
  throw ParseError();
  return;
} 
```

“做某事”可以将值和运算符压入堆栈以实现某种形式的[分流场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。或者构建一个[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。

然而，在 Boost`boost::spirit`中也有一个很好的库可以用来构建解析器。

所以另一方面，如果您只想要一个 XML 解析器，则有许多现成的可供选择。在 SO 上看到了一些很好的流程图，描述了 witch XML 解析器是否很好，具体取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:48:45.027

如果你也对 C++ 感兴趣，你可以试试 rapidxml：

[http://rapidxml.sourceforge.net/](http://rapidxml.sourceforge.net/)
[http://rapidxml.sourceforge.net/manual.html](http://rapidxml.sourceforge.net/manual.html)

在这里，我编写了一个示例代码，它解析和打印深度为三个级别的 xml 的内容（与您的一样）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "./rapidxml-1.13/rapidxml.hpp"
#include "./rapidxml-1.13/rapidxml_print.hpp"
#include <iostream>
#include <fstream>

using namespace std;
using namespace rapidxml;

void process_xml(const char* xml){
    xml_document<> doc;
    char text[strlen(xml)+1];
    strcpy(&text[0], xml);
    try{
        doc.parse<parse_default>(text);
    }
    catch(rapidxml::parse_error &ex){
        cout << "error: rapidxml::parse_error\n";
        return;
    }

    xml_node<> *ptr=NULL;
    try{
        if (doc.first_node()!=NULL){
            for (xml_node<> *node=doc.first_node(); node; node=node->next_sibling()){
                cout << "node->name: " << node->name() << endl;
                if (strcmp(node->name(), "")!=0){
                    xml_node<> *content_node = node->first_node();
                    ptr=content_node;
                    while ((content_node!=NULL) && (strcmp(content_node->name(), "")!=0)){
                        cout << "\t>>" << content_node->name() << endl;

                        for (xml_node<> *node_3rd=content_node->first_node(); node_3rd; node_3rd=node_3rd->next_sibling()){
                            cout << "name: " << node_3rd->name() << "; ";
                            cout << "value: " << node_3rd->value() << endl;
                        }

                        content_node=content_node->next_sibling();
                    }
                }
            }
            cout << "\n";
        }
    }
    catch(...){
        cout << "error: in reading an event!";
    }
}

int main(void){
    //read the xml from an input file
    std::ifstream ifs("in_file.txt");
    std::string xml;
    xml.assign(std::istreambuf_iterator<char>(ifs), std::istreambuf_iterator<char>());

    //process the xml
    process_xml(xml.c_str());

    return 0;
} 
```

*   注意：要将您的 xml 转换为有效的 xml，您必须关闭所有标签，因此您应该`</config>`在末尾添加，因为您`<config>`在开头有。

要运行此代码，您必须从我提供的链接下载 rapidxml 并将其解压缩到您的项目文件夹中。编译不需要额外的标志。

然后，使用带有更正 xml 的输入文件“in_file.txt”（*参见上面的通知），此代码将作为输出生成：

```
node->name: config
    >>quote
name: text; value: 
            "Moral indignation is jealous with a halo."

name: author; value: 
            H.G. Wells

name: livedfrom; value: 
            1866-1946

name: extrainfo; value: 
```

然后，您可以将结果值存储在变量、结构或任何您想要的东西中。

# ios - 奇怪的将 NSString 转换为 int 问题

> ID：15347588
> 
> 赞同：0
> 
> 时间：2013-03-11T20:05:50.787
> 
> 标签：ios, nsstring, timestamp

我正在将项目的 NSString 转换为 int，以便比较时间戳。这是我转换它时从我的 NSLog 得到的响应。

```
Server Time Stamp = 1363032033711 AND Server Time Stamp CONVERTED: 2147483647 
```

我正在使用此代码进行转换：

```
NSString *msg = [NSString stringWithFormat:@"%@", message];
NSArray *subString = [msg componentsSeparatedByString:@" "];
NSString *timeStamp = [subString lastObject];
int serverTimeStamp = [timeStamp intValue];
NSLog(@"Server Time Stamp = %@ AND Server Time Stamp CONVERTED: %d", timeStamp, serverTimeStamp); 
```

我不确定为什么转换后的数字如此奇怪，是我的代码有问题，还是将字符串转换为整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:11:03.163

`1363032033711`太大了。它无法转换为`int`（在 iOS 上似乎是 32 位长）。如果您在 Google 上搜索`2147483647`，您会发现它是 32 位有符号 的最大值`int`。也许这就是`- [NSString intValue]`它是否发现一个太大而无法转换的数字的方式。

解决方案：使用更广泛的数字类型和`NSScanner`：

```
NSScanner *scn = [NSScanner scannerWithString:[subString lastObject]];
long long serverTimeStamp;
[scn scanLongLong:&serverTimeStamp]; 
```

# javascript - 在特定时区格式化日期

> ID：15347589
> 
> 赞同：223
> 
> 时间：2013-03-11T20:05:51.597
> 
> 标签：javascript, timezone, momentjs

我正在使用[Moment.js](http://momentjs.com/)在我的网络应用程序中解析和格式化日期。作为 JSON 对象的一部分，我的后端服务器以 UTC 纪元（Unix 偏移量）的毫秒数发送日期。

解析**特定时区中的**日期很容易——只需在解析之前将 RFC 822 时区标识符附加到字符串的末尾：

```
// response varies according to your timezone
const m1 = moment('3/11/2012 13:00').utc().format("MM/DD HH:mm")

// problem solved, always "03/11 17:00"
const m2 = moment('3/11/2012 13:00 -0400').utc().format("MM/DD HH:mm")

console.log({ m1, m2 })
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
```

但是如何**在特定时区**格式化日期？

无论浏览器的当前时间如何，我都想要一致的结果，但我不想以 UTC 显示日期。

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2013-05-23T00:03:59.220

[正如Manto 的回答](https://stackoverflow.com/a/32107411/687315)中所指出的，[`.utcOffset()`](http://momentjs.com/docs/#/manipulating/utc-offset/)从 Moment 2.9.0 开始是首选方法。此函数使用与 UTC 的实际偏移量，而不是反向偏移量（例如，DST 期间的纽约为 -240）。像“+0400”这样的偏移字符串的工作方式和以前一样：

```
// always "2013-05-23 00:55"
moment(1369266934311).utcOffset(60).format('YYYY-MM-DD HH:mm')
moment(1369266934311).utcOffset('+0100').format('YYYY-MM-DD HH:mm') 
```

Moment.js 2.9.0中**弃用**了较旧[`.zone()`的 setter 。](https://github.com/timrwood/moment/pull/671)它接受包含时区标识符的字符串（例如，-4 小时的“-0400”或“-04:00”）或代表 UTC 后分钟数的数字*（*例如，DST 期间的纽约为 240）。

 ***```
// always "2013-05-23 00:55"
moment(1369266934311).zone(-60).format('YYYY-MM-DD HH:mm')
moment(1369266934311).zone('+0100').format('YYYY-MM-DD HH:mm') 
```

* * *

要使用命名时区而不是数字偏移量，请包含[Moment Timezone](http://momentjs.com/timezone/)并`.tz()`改用：

```
// determines the correct offset for America/Phoenix at the given moment
// always "2013-05-22 16:55"
moment(1369266934311).tz('America/Phoenix').format('YYYY-MM-DD HH:mm') 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2018-07-13T22:03:04.957

一些答案已经提到时刻时区是使用命名时区的方式。我只是想澄清一些关于这个库的事情，这让我很困惑。这两种说法是有区别的：

```
moment.tz(date, format, timezone)

moment(date, format).tz(timezone) 
```

* * *

**假设传入的日期中未指定时区：**

第一个代码接受日期并假设时区是传入的。第二个代码将接受日期，假设来自浏览器的时区，然后根据传入的时区更改时间和时区。

例子：

```
moment.tz('2018-07-17 19:00:00', 'YYYY-MM-DD HH:mm:ss', 'UTC').format() // "2018-07-17T19:00:00Z"

moment('2018-07-17 19:00:00', 'YYYY-MM-DD HH:mm:ss').tz('UTC').format() // "2018-07-18T00:00:00Z" 
```

我的时区是 UTC 的 +5。因此，在第一种情况下，它不会更改，而是将日期和时间设置为 utc 时区。

在第二种情况下，它假设传入的日期为 -5，然后将其转换为 UTC，这就是它吐出日期“2018-07-18T00:00:00Z”的原因

**注意：格式参数非常重要。如果省略时刻可能会退回到 Date 类，这可能会发生不可预测的行为**

* * *

**假设时区在传入的日期中指定：**

在这种情况下，它们的行为相同

* * *

尽管现在我明白它为什么会这样工作，但我认为这是一个非常令人困惑的功能，值得解释。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2015-04-18T18:52:51.547

使用[时刻时区](http://momentjs.com/timezone/docs/)

```
moment(date).tz('Europe/Berlin').format(format) 
```

在能够访问特定时区之前，您需要像这样加载它（或使用[此处](http://momentjs.com/timezone/docs/#/data-loading/)描述的替代方法）

```
moment.tz.add('Europe/Berlin|CET CEST CEMT|-10 -20 -30') 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-08-19T23:45:11.927

.zone() 已被弃用，您应该使用 utcOffset 代替：

```
// for a timezone that is +7 UTC hours
moment(1369266934311).utcOffset(420).format('YYYY-MM-DD HH:mm') 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-09-17T16:18:53.870

我对 Moment.js 也有同样的问题。我已经安装了时刻时区，但问题没有解决。然后，我做了这里暴露的事情，设置时区，它就像一个魅力：

```
moment(new Date({your_date})).zone("+08:00") 
```

非常感谢！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-27T10:26:39.523

刚刚来了这个，因为我有同样的问题，我只是发布我想出的结果

解析时，您可以更新偏移量（即我正在解析数据（1.1.2014），我只想要日期，2014 年 1 月 1 日。在 GMT+1 上，我会得到 31.12.2013。所以我首先偏移该值。

```
moment(moment.utc('1.1.2014').format()); 
```

好吧，对我支持跨时区很有用

乙

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-03-08T10:32:56.633

如果您将时间戳作为参数传递给`moment()`（例如，如果时区是 Asia/Hong_kong，即 +08:00），我要做的是：

```
const localDateTime = moment((item.createdAt.seconds + 8 * 3600) * 1000).format('YYYY-MM-DD HH:mm:ss'); 
```

* * *

## 回答 #8

> 赞同：-9
> 
> 时间：2018-08-21T09:52:13.723

你可以试试这个，

在这里，您可以根据客户端时区（浏览器）获取日期。

```
moment(new Date().getTime()).zone(new Date().toString().match(/([-\+][0-9]+)\s/)[1]).format('YYYY-MM-DD HH:mm:ss') 
```

正则表达式基本上可以为您提供偏移值。

干杯！！***

# c# - Strange button style behaviour, changing colors like storyboard

> ID：15347593
> 
> 赞同：0
> 
> 时间：2013-03-11T20:06:14.547
> 
> 标签：c#, wpf, button, triggers, styles

I want to style a button depending on a ViewModel property, which is not part of the button.

So I created the following

The Button XAML:

```
<Button Content="DisableButton" 
            Height="27" 
            HorizontalAlignment="Left" 
            Margin="95,197,0,0" 
            VerticalAlignment="Top" 
            Width="120" 
            Style="{DynamicResource ButtonOffline}"
            Click="ButtonDisableClick">
    </Button> 
```

The style (the Trigger with Property does not work. also tried DataTrigger)

```
<Grid.Resources>
        <Style x:Key="ButtonOffline" TargetType="{x:Type Button}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsOnline}" Value="false">
                    <Setter Property="Background" Value="#FF808080"></Setter>
                    <Setter Property="BorderBrush" Value="Red"></Setter>
                    <Setter Property="BorderThickness" Value="5"></Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsOnline}" Value="true">
                    <Setter Property="Background" Value="#FF990000"></Setter>
                    <Setter Property="BorderBrush" Value="Blue"></Setter>
                    <Setter Property="BorderThickness" Value="2"></Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Resources> 
```

The property

```
private bool isOnline;
        public bool IsOnline
        {
            get
            {
                return isOnline;
            }
            set
            {
                isOnline = value;
                NotifyPropertyChanged("IsOnline");
            }
        } 
```

And my click handler

```
private void ButtonDisableClick(object sender, RoutedEventArgs e)
        {
            var isOnline = (this.DataContext as ComboBoxSampleViewModel).IsOnline;
            (this.DataContext as ComboBoxSampleViewModel).IsOnline = !isOnline;
        } 
```

Now if I click the button, something like a storyboard begins and the buttons starts to change colors like an animation.

Whats wrong with the code?

**Update** Reproduced in a small sample which just has the button features posted here. Nothing (except the basic INotifyPropertyChanged implementation) else which is not posted here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:33:35.213

您必须将`Focusable`属性设置为 false，这将停止按钮闪烁。

```
<Button Content="DisableButton" 
        Focusable="False"
        Height="27"             
        HorizontalAlignment="Left" 
        Margin="95,197,0,0" 
        VerticalAlignment="Top" 
        Width="120" 
        Style="{DynamicResource ButtonOffline}"
        Click="ButtonDisableClick">
    </Button> 
```

发生这种情况是因为默认模板中必须有一些触发器正在更改背景属性。

第二种解决方案是创建自己的按钮模板。

```
<Grid.Resources>
    <Style x:Key="ButtonOffline" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Grid">
                        <Border CornerRadius="2" x:Name="Border" Background="{TemplateBinding Background}" 
                        BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" 
                        Padding="{TemplateBinding Padding}"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                        Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                        RecognizesAccessKey="True"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsOnline}" Value="False">
                <Setter Property="Background" Value="#FF808080"></Setter>
                <Setter Property="BorderBrush" Value="Red"></Setter>
                <Setter Property="BorderThickness" Value="5"></Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding IsOnline}" Value="True">
                <Setter Property="Background" Value="#FF990000"></Setter>
                <Setter Property="BorderBrush" Value="Blue"></Setter>
                <Setter Property="BorderThickness" Value="2"></Setter>
            </DataTrigger>              
        </Style.Triggers>
    </Style>
</Grid.Resources> 
```

# android - Force links on external site to open up outside of UIWebView on iOS or Android app

> ID：15347598
> 
> 赞同：0
> 
> 时间：2013-03-11T20:06:39.927
> 
> 标签：android, ios, uiwebview, android-webview

Is there a way to prevent my site from being opened inside a `UIWebView` of **any** iOS or Android app, such as formatting the URL in a special way? These are apps that I do not own, so the call is coming from my page, not from the app.

Preferably, when an app tries to open the page on my site from within the `UIWebView`, it would automatically open up the page in the Safari or native browser app instead of inside the users application.

Otherwise, it looks like I would have to [run some javascript](https://stackoverflow.com/questions/6783185/detect-inside-android-browser-or-webview) to determine if the page is opened inside of a `UIWebView` and then just restrict access.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:33:20.227

不，浏览器只是一个应用程序。使用 webview 的浏览器应用程序和另一个应用程序之间没有具体区别。用于 javascript 浏览器检测的链接对于这种情况几乎没有用处。应用程序可以将其用户代理设置为他们想要的任何内容，包括与本机浏览器应用程序使用的用户代理相同的用户代理。基本上，您尝试用来检测默认浏览器的任何东西都可以被另一个应用程序模仿。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T22:16:01.890

您可以将自己应用程序中的用户代理更改为您可以使用 javascript 检测到的特定内容。

您还可以从您的 iOS 代码调用 webview 中的 javascript 函数，这样您就可以等待显示内容，直到该调用来自您的应用程序。

虽然这些东西很容易被模仿，并且不会阻止忽略 javascript 的爬虫，但不太可能有人会经历所有的麻烦。如果您想要进一步的保护，您将不得不引入某种形式的身份验证。

# netty - Which is more efficient: Netty's HashedWheelTimer or Quartz's scheduler?

> ID：15347600
> 
> 赞同：3
> 
> 时间：2013-03-11T20:06:50.273
> 
> 标签：netty, quartz-scheduler

[HashedWheelTimers](http://docs.jboss.org/netty/3.1/api/org/jboss/netty/util/HashedWheelTimer.html) are based on [this 1987 paper](http://www.cs.columbia.edu/~nahum/w6998/papers/sosp87-timing-wheels.pdf) about how traditional timers consume O(N) processing to maintain (for N timers), but hashed wheels can consume O(1). I'm unsure if Quartz's job scheduling just managers timers underneath, or actually uses an O(1) solution under the covers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:03:49.357

Quartz 调度器是为调度持久作业而设计的。因此，当 Quartz 在下降后出现时，它可以看到哪些作业应该运行但没有运行，并且可以选择运行它们。

HashedWheelTimer 旨在扩展到数千个计时器。他们正在解决两个截然不同的问题。

# python - Python packaging distribute post-install step

> ID：15347602
> 
> 赞同：3
> 
> 时间：2013-03-11T20:06:58.393
> 
> 标签：python, packaging, setuptools, distutils, distribute

I am packaging a project that uses nltk. When you install nltk with pip, you get core functionalitiy, but not all the modules that come with it. To get those modules, you call nltk's download method.

I tried the following, but it doesn't work, saying `ImportError: No module named nltk`. I assume this is happening because import nltk occurs before nltk is installed by the call to `setup(...)`.

Is there a clean way of having a post-install step with [distribute](http://pythonhosted.org/distribute/) that executes one of the following?

```
$ python -m nltk.downloader punkt
>>> import nltk; nltk.download('punkt') 
```

Here's my failed attempt at `setup.py`:

```
class my_install(install):
    def run(self):
        install.run(self)
        import nltk
        nltk.download('punkt')

setup(
    ...
    install_requires = [..., 'nltk==2.0.4'],
    cmdclass={'install': my_install},
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:14:51.387

pip 不处理依赖项，因此您需要编写一个 README 文件并解释您的用户他们需要安装什么，或者一个脚本在您需要的所有东西上运行 pip install。

第二种方式是我认为的方式，以及解释正在发生的事情的 README 文件。

作为一个 debian 维护者，我可以告诉你，在那里执行下载东西的安装命令被认为是不可接受的，它必须被打包列出对其他包的依赖关系，然后在满足依赖关系时安装你的，我认为它是一般而言，这是一种理智的方式。[http://wiki.debian.org/UpstreamGuide#No_Downloads](http://wiki.debian.org/UpstreamGuide#No_Downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-25T06:56:15.323

我用命令行安装方法，成功了。像这样...

```
import subprocess

class my_install(install):
    def run(self):
        install.run(self)
        cmd = ["python", "-m", "nltk.downloader", "punkt"]
        with subprocess.Popen(cmd, stdout=subprocess.PIPE) as proc:
            print(proc.stdout.read()) 
```

# c# - 隔离存储 - 不允许操作/在 Windows Phone 中复制 html 文件时

> ID：15347606
> 
> 赞同：0
> 
> 时间：2013-03-11T20:07:24.533
> 
> 标签：c#, windows-phone, isolatedstorage

当我跑

```
IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication();
myStore.CopyTextFile("HTDocs\\help.html", true); 
```

我有错误：“IsolatedStorageFileStream 上不允许操作。” 它来自[教程](http://technodave.wordpress.com/2010/11/11/moving-files-from-xap-to-isolated-storage-for-local-html-content-on-windows-phone-7/)。我应该如何解决这个问题？

```
public static class ISExtensions
    {
        public static void CopyTextFile(this IsolatedStorageFile isf, string filename, bool replace = false)
        {
            if (!isf.FileExists(filename) || replace == true)
            {
                StreamReader stream = new StreamReader(TitleContainer.OpenStream(filename));

                IsolatedStorageFileStream outFile = isf.CreateFile(filename);
                //

                //
                string fileAsString = stream.ReadToEnd();
                byte[] fileBytes = System.Text.Encoding.UTF8.GetBytes(fileAsString);

                outFile.Write(fileBytes, 0, fileBytes.Length);

                stream.Close();
                outFile.Close();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:52:36.523

尝试这样的事情：

```
// isolated storage
IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication();
// access to resource files
StreamResourceInfo streamInfo = Application.GetResourceStream(new Uri(@"HTDocs\help.html", UriKind.Relative));
using (Stream origFileStream = streamInfo.Stream)
{
    // open the filestream for the isostorage file and copy the content from the original stream
    using (IsolatedStorageFileStream fileStream = myStore.CreateFile("help.html"))
    {
        origFileStream.CopyTo(fileStream);
        origFileStream.Close();
    }
} 
```

# ruby-on-rails-3 - 运行 rake 任务 rails

> ID：15347609
> 
> 赞同：0
> 
> 时间：2013-03-11T20:07:27.843
> 
> 标签：ruby-on-rails-3, rake, rake-task

我正在尝试运行 rake 任务，基本上是屏幕抓取，然后将数据发布到模型。我有一个任务，但不确定如何让它运行

```
namespace :grab do
task :fixtures => :environment do
MatchFixtures::MatchFixtures.new.perform
end
end 
```

我离开这里，但我以为是

```
rake namespace:task 
```

但我明白了

```
dont know how to build task 'namespace:task' 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:11:52.743

你应该在那里替换你自己的命名空间/任务，所以：

```
rake grab:fixtures 
```

# reporting-services - SSRS 2008 的表值参数

> ID：15347610
> 
> 赞同：2
> 
> 时间：2013-03-11T20:07:31.847
> 
> 标签：reporting-services, ssrs-2008, table-valued-parameters

我们需要生成 SSRS 报告，我们需要将多值字符串和整数参数转换为数据表并将其传递给存储过程。存储过程包含多个表类型参数。之前我们使用`varchar(8000)`过，但它也超过了数据类型限制。然后我们想到引入数据表的概念。但是我们不知道如何从 SSRS 传递值。

我们从 GruffCode 中找到了[使用 SQL Server Reporting Services 使用表值参数](http://gruffcode.com/2012/06/21/using-table-valued-parameters-with-sql-server-reporting-services/)的解决方案。

该解决方案解决了我的问题，我们能够生成报告。但是，有时 SSRS 会返回以下两个错误：

> 报告处理过程中发生错误。
> 数据集“DSOutput”的查询执行失败。
> 字符串或二进制数据将被截断。该语句已终止。

和

> 报告处理中出现意外错误。
> 引发了“System.OutOfMemoryException”类型的异常。

我不确定它何时何地导致了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:03:56.410

该博客文章中概述的方法依赖于在内存中构建一个巨大的字符串，以便将所有选定的参数值加载到表值参数实例中。如果您选择大量值传递到查询中，我可能会看到它可能会导致“System.OutOfMemoryException”，同时尝试构建包含将加载参数的插入语句的字符串。

至于“字符串或二进制数据将被截断”错误，这听起来像是源自报告用于收集其数据的查询或存储过程。在没有看到 t-sql 的样子的情况下，我无法说出为什么会这样，但我猜想它也与选择大量参数值有关。

不幸的是，我不确定是否有解决方法，除了尝试查看是否可以找到一种方法来选择更少的参数值。这里有几个粗略的想法：

1.  如果您遇到用户可能选择少数参数值或**所有**参数值的情况，那么您可以让查询简单地采用一个非常简单的布尔值，指示所有值都已被选择，而不是让报告通过范围。
2.  您还可以考虑稍微“缩小”您的参数值并以某种方式将它们组合在一起（如果它们适合的话）。这样，用户将从较少数量的参数值中进行选择，这些参数值代表一组全部汇总的单个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T22:31:16.173

我不喜欢在 SQL 语句中使用 Text 参数和 EXEC，就像您引用的文章所描述的那样，这样做会受到 SQL 注入的影响。将查询发送到 SQL 服务器时，具有多值参数的默认 SSRS 行为直接替换以逗号分隔的值列表来代替参数。这对于简单的 IN 查询很有用，但在其他地方可能不受欢迎。通过将 DataSet 上的 Parameter Value 设置为`=Join(Parameters!CustomerIDs.Value, ", ")`. 完成后，您可以使用以下 SQL 加载表变量：

```
DECLARE @CustomerIDsTable TABLE (CustomerID int NOT NULL PRIMARY KEY)

INSERT INTO @CustomerIDsTable (CustomerID)
SELECT DISTINCT TextNodes.Node.value(N'.', N'int') AS CustomerID
FROM (
    SELECT CONVERT(XML, N'<A>' + COALESCE(N'<e>' + REPLACE(@CustomerIDs, N',', N'</e><e>') + N'</e>', '') + N'</A>') AS pNode
    ) AS xmlDocs
CROSS APPLY pNode.nodes(N'/A/e') AS TextNodes(Node)

-- Do whatever with the resulting table variable, i.e.,
EXEC rpt_CustomerTransactionSummary @StartDate, @EndDate, @CustomerIDsTable 
```

如果使用文本而不是整数，那么有几行会像这样更改：

```
DECLARE @CustomerIDsTable TABLE (CustomerID nvarchar(MAX) NOT NULL PRIMARY KEY)

INSERT INTO @CustomerIDsTable (CustomerID)
SELECT DISTINCT TextNodes.Node.value(N'.', N'nvarchar(MAX)') AS CustomerID
FROM (
    SELECT CONVERT(XML, N'<A>' + COALESCE(N'<e>' + REPLACE(@CustomerIDs, N',', N'</e><e>') + N'</e>', '') + N'</A>') AS pNode
    ) AS xmlDocs
CROSS APPLY pNode.nodes(N'/A/e') AS TextNodes(Node)

-- Do whatever with the resulting table variable, i.e.,
EXEC rpt_CustomerTransactionSummary @StartDate, @EndDate, @CustomerIDsTable 
```

这种方法也适用于处理用户输入的逗号分隔项字符串。

# c# - 使用 linq to entity 检查数据库中是否已存在实体列表

> ID：15347613
> 
> 赞同：1
> 
> 时间：2013-03-11T20:07:41.173
> 
> 标签：c#, linq-to-entities, entity-framework-5

我有一个来自外部来源的实体列表。我需要将它与我已经拥有的进行比较，并且只添加那些不存在的。伪代码如下。

```
 var newVersions = item.Versions
      .Where(s => db.ExistingVersions
           .Select(t=>t.versionID)
           .DoesNotContains(s.versionID)); 
```

这显然不起作用，我不知道如何解决它。我不想使用 for 循环，因为我相信这意味着我将有数百个数据库命中，只是为了检查每个项目的版本。我正在加载多个项目，每个项目有多达 100 个版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:17:04.903

如果这个问题没有我想的那么复杂，那么它不应该是复杂的。

假设这`VersionID`是唯一标识符，那么您可以这样做：

```
var existingVersions = db.ExistingVersions.Select(x => x.VersionID).ToList(); 
```

请注意，因为`Contains`最好：

```
var existingVersions = new HashSet(db.ExistingVersions.Select(x => x.VersionID).ToList()); 
```

**[编辑]：**根据 Magnus 的评论，您可以`ToList`从上面的代码片段中删除。

接着：

```
var newVersions = items.Versions.Where(x => !existingVersions.Contains(x.VersionID)); 
```

这可能是最高效的，因为在调用数据库时，您只选择`VersionID`. 其他选项涉及编写自定义[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)和使用[`Except`](http://msdn.microsoft.com/en-us/library/bb336390.aspx)，但您必须从数据库中提取所有内容，这可能会更昂贵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:18:56.947

你可以尝试这样的事情：

```
// in memory: get list of potential version ids
var potentialIds = item.Versions.Select( o => o.versionID ).ToList();

// hit database ( once ) : get existing version ids
var existingIds = db.ExistingVersions
  .Where( o => potentialIds.Contains( o.versionID ) )
  .Select( o => o.versionID )
  .ToList();

// in memory: filter potential objects
var newVersions = item.Versions
  .Where( o => !existingIds.Contains( o.versionID ) )
  .ToList();

// database inserts:
foreach( var newVersion in newVersions )
{
  ... 
```

要记住的一件事是，这不是线程安全的：如果其他东西同时添加`ExistingVersion`行，您可能会尝试插入在检查数据库后添加的记录。

# ios - UITapGestureRecognizer 在 iPad 上触发，但在 iPhone 上不触发，但代码相同

> ID：15347616
> 
> 赞同：0
> 
> 时间：2013-03-11T20:07:54.870
> 
> 标签：ios, uitapgesturerecognizer

我有一个不应该的小问题......我正在为 iOS 制作一个通用应用程序，但我遇到了在 iPad 上触发但在 iPhone 上没有触发的 UITapGestureRecognizer 问题。

**更新开始**

我在 iPhone 上强制使用 iPad 笔尖，它可以工作！所以我的 iPhone nib 文件有问题，因为两个 nib 都只包含 UIView 和 UIScrollView，因为使用代码放置其他任何东西都可能有问题......

**更新结束**

我的识别器是为 UIView 子类添加的：

h 文件：

```
#import <UIKit/UIKit.h>

@interface POI : UIView <UIGestureRecognizerDelegate>{
    UIImageView *pointBgView;
    float tipHeight;
    float tipWidth;
}
-(id)initWithPointBg:(NSString *)pointBgURL andFrame:(CGRect)frame;
@property (nonatomic) float tipHeight;
@property (nonatomic) float tipWidth;
@end 
```

m 文件：

```
#import "POI.h"
#import <QuartzCore/QuartzCore.h>

@implementation POI

@synthesize tipHeight,tipWidth;

-(id)initWithPointBg:(NSString *)pointBgURL andFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        UITapGestureRecognizer *tapRecognizer =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(respondToTap:)];
        // Specify that the gesture must be a single tap
        tapRecognizer.numberOfTapsRequired = 1;
        [tapRecognizer setDelegate:self];
        // Add the tap gesture recognizer to the view
        [self addGestureRecognizer:tapRecognizer];

        pointBgView = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:pointBgURL]];
        pointBgView.layer.shadowColor = [[UIColor blackColor] CGColor];
        pointBgView.layer.shadowOpacity = 0.7;
        pointBgView.layer.shadowRadius = 4.0;
        pointBgView.clipsToBounds = NO;
        pointBgView.userInteractionEnabled = YES;

        pointBgView.layer.shadowOffset = CGSizeMake(0, 0);
        pointBgView.layer.shadowPath = [UIBezierPath bezierPathWithRect:pointBgView.bounds].CGPath;

        [pointBgView.layer setBorderColor: [[UIColor whiteColor] CGColor]];
        [pointBgView.layer setBorderWidth: 2.0];

        [self addSubview:pointBgView];
        [self setBackgroundColor:[UIColor clearColor]];
        self.tipHeight = 30;
        self.tipWidth = 50;

    }
    return self;

}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
{
    NSLog(@"TAP");
    return YES;
}

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    NSLog(@"StartTap");
    return YES;
}

-(void)respondToTap:(UITapGestureRecognizer *)recognizer
{
    NSLog(@"UITAP");
    [[NSNotificationCenter defaultCenter]
 postNotificationName:@"POITap"
 object:self];

} 
```

以上是有问题的代码...

在 iPad 上进行测试时，所有 NSLog 都会被触发，而不是在 iPhone 上（无论是否为模拟器）。

所以 ：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

不开枪……

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    NSLog(@"StartTap");
    return YES;
} 
```

不开枪……

```
-(void)respondToTap:(UITapGestureRecognizer *)recognizer
{
    NSLog(@"UITAP");
    [[NSNotificationCenter defaultCenter]
 postNotificationName:@"POITap"
 object:self];

} 
```

……没有开火！？

我必须说，对于这个应用程序使用两个单独的笔尖（显然一个用于 iPad，另一个用于 iPhone），并且它们包含的内容完全相同......

我添加了代表，因为它不能在 iPhone 上运行，所以我想看看它是否有帮助，没有运气......

到底是什么原因导致了这种行为？

感谢您能给我带来的任何帮助与和平：）

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:20:10.327

看起来这是 UIScrollView 的问题，即使在 iPad 上，如果滚动视图出现时它不可见（在 UIScrollView 的可见框架之外），我将无法点击 imageView。

至少我知道我没疯:)

谢谢

# php - PHP：file_get_contents 挂在特定的 URL

> ID：15347617
> 
> 赞同：0
> 
> 时间：2013-03-11T20:07:55.527
> 
> 标签：php, rss, simplexml, file-get-contents

所以我有一个简单的 php 文件，它应该读取 rss 提要的源并将其写入 SimpleXML 对象。我的代码适用于大多数网址。我已经与 CNN 和其他一些人进行了测试。但是，我实际上需要它来处理的 URL 挂起。我已经与托管内容的公司谈了一些，他们说没有什么特别的，它应该可以工作。任何人都可以抛出任何关于为什么特定 URL 会挂起的想法吗？（仅供参考，内容来自 Compendium 托管的博客）

这是我的代码：

```
$url = "http://www.example.com/rss?compendium_feed_count=3";
$xml = file_get_contents($url);
print_r($xml);
$xmldoc = new SimpleXMLElement($xml);
print_r($xmldoc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:35:01.697

答案是因为我试图从中提取的博客与它来自的主机共享相同的域名。我编写的脚本位于 example.com，博客位于 example.com/blog。它们是独立的服务器，但显然服务器会看到脚本试图访问的 url，并且在内部而不是外部查看。如果我将脚本放在不同的主机上进行测试，它可以正常工作。所以现在我必须弄清楚如何让服务器将这种请求推送出去。

编辑：所以，问题在于网络服务器为指向另一台服务器的“/博客”路径设置了反向代理。我也必须通过代理路由请求。它是这样完成的：

```
$aContext = array('http'=>array('proxy'=>'tcp://client-proxy.exampleproxy.com:80','request_fulluri'=>true));
$url = "http://www.example.com/rss?compendium_feed_count=3";
$cxContext = stream_context_create($aContext);
$xml = file_get_contents($url,FALSE,$cxContext);
$xmldoc = new SimpleXMLElement($xml); 
```

# actionscript-3 - 什么时候加载舞台？

> ID：15347627
> 
> 赞同：-3
> 
> 时间：2013-03-11T20:08:41.767
> 
> 标签：actionscript-3, flash, flash-cs5

我正在 Adob​​e Flash Professional CS5 中构建一个项目（使用 ActionScript 3.0）。

在其中一个类中，我想根据场景的大小向场景中添加一些对象。

我在构造函数中使用以下代码：

```
stageWidthint = stage.stageWidth;
stageHeightint = stage.stageHeight;
startMenu.x = stageWidthint / 2;
startMenu.y = ((stageHeightint / 2) - 40);
instructionsMenu.x = stageWidthint / 2;
instructionsMenu.y = ((stageHeightint / 2) + 2);
highscoreMenu.x = stageWidthint / 2;
highscoreMenu.y = ((stageHeightint / 2) + 44);
quitMenu.x = stageWidthint / 2;
quitMenu.y = ((stageHeightint / 2) + 86);
this.addChild(startMenu);
this.addChild(instructionsMenu);
this.addChild(highscoreMenu);
this.addChild(quitMenu); 
```

我在`stage`. 经过快速搜索，我发现`stage`当时尚未加载。尽管如此，我还是想把这些孩子加入班级。舞台什么时候加载？我怎样才能解决这个问题并在游戏开始时仍然显示所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:24:51.327

在构造函数中使用 ADDED_TO_STAGE 事件。

```
 public function ConstructorName():void 
 {
     addEventListener(Event.ADDED_TO_STAGE,onAddedToStage); 
 }

 private function onAddedToStage(e:Event):void 
 {   
      removeEventListener(Event.ADDED_TO_STAGE,onAddedToStage);
      // add init code here
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:26:24.300

我不确定使用场景时的工作方式，但您可以尝试：

```
package  {
  import flash.display.*;
  import flash.events.*;

  public class Test extends MovieClip {

    public function Test() {
      if (stage) {
        init();
      } else {
        addEventListener(Event.ADDED_TO_STAGE, init);
      }
    }

    protected function init(event:Event = null):void {
      trace("init");
      if (event) { removeEventListener(Event.ADDED_TO_STAGE, init) };
      //your code here
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:44:43.553

[Stage](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html)对象不是全局可用的。
扩展 MovieClip 的类将具有属性“stage”（小写）
“stage”属性为 null，直到您的类的实例被添加到 stage。
这就是我们监听 ADD_TO_STAGE 事件的原因。

stage = null 有一些变通方法，其中之一是将 stage 作为参数传递到构造函数 IE 中： var xxx:MyClass = new MyClass(stage); 也就是说，如果创建实例的类已经引用了 stage。

我想补充一点，在您的自定义类中访问阶段不是一个好的 OOP 实践，因为类应该只关心它们自己。我建议的是覆盖宽度设置器/获取器。这是因为尺寸可以改变，例如横向到纵向旋转。

# jquery - 在 MVC 布局视图中加载 jQuery 的正确位置

> ID：15347628
> 
> 赞同：38
> 
> 时间：2013-03-11T20:08:43.097
> 
> 标签：jquery, asp.net-mvc

我使用默认模板创建了一个 MVC 4，`@Script.Render(~"bundles/jquery")`在`@RenderBody()`. 根据[这篇](https://stackoverflow.com/questions/11926405/jquery-after-body-asp-net-mvc-4)文章，这是推荐的执行顺序，以防止加载脚本来阻止页面的呈现。

我想在我的视图或我的`RenderBody()`部分中添加一个小的 jQuery 调用。它看起来像这样，在我的视图顶部：

```
<script type="text/javascript">
$(document).ready(function()
{
    $("#eta_table").tablesorter({
        headers: {
            0: { sorter: false }
        }
    });
}); 
```

但是，这总是会抛出错误`Error: '$' is undefined`，因为 jQuery 直到`RenderBody()`.

我无法想象这是一个新问题，这似乎是一个相当普遍的任务......关于如何处理这个问题的任何建议？

作为参考，这里是 jQuery 的加载位置：

```
 @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

**编辑**

我最终将上面的脚本移动到我的 scripts.js 文件中，并将其加载到布局页面中的 jQuery 下面，如下所示：

```
 bundles.Add(new ScriptBundle("~/bundles/custom").Include(
                    "~/Scripts/Custom/tablesorter.js",
                    "~/Scripts/Custom/scripts.js")); 
```

和 HTML：

```
 @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/custom")
    @RenderSection("scripts", required: false)
</body> 
```

除了这似乎仍然是错误的，因为现在必须为使用主布局视图的每个页面加载脚本。它正在工作，但是，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-11T20:27:23.507

在所有其他库脚本下方创建一个新部分 MyScripts

_布局

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false)
@RenderSection("MyScripts", required: false) 
```

我的观点

```
@section MyScripts {
    <script type="text/javascript">
        $("#eta_table");
        ...
    </script>
} 
```

现在，您的自定义页面脚本只会在 jQuery 加载后加载一次。

# php - 读取目录在窗口的浏览器中远程打开，但在 php 脚本 opendir() 函数中不起作用

> ID：15347631
> 
> 赞同：1
> 
> 时间：2013-03-11T20:08:48.590
> 
> 标签：php, file

我正在尝试从另一个共享系统读取远程目录文件，能够在浏览器中打开文件，但在使用 php 脚本`opedir()`函数读取时出错。

代码：

```
$filesDir = "file://css-app-002-s/cs/files/";

var_dump(is_dir($filesDir));

if ($handle = opendir($filesDir)) {
    $dirList = array_diff(scandir($filesDir), array('..', '.'));
}

print_r($dirList); 
```

错误：

> 警告：opendir() [function.opendir]：不支持远程主机文件访问，file://css-app-002-s/cs/files/

# performance - 从列表中的对象列表中过滤掉值

> ID：15347636
> 
> 赞同：0
> 
> 时间：2013-03-11T20:09:10.260
> 
> 标签：performance, linq, entity-framework, collections

我有一个 UnitGroup: 的 IEnumerable 集合`IEnumerable<UnitGroup>`，

```
class UnitGroup
    {      
        string key { get; set; }              
        List<UnitType> NameList { get; set; }
    }
class UnitType
    {               
        String UnitName{ get; set; }
        Description { get; set; }
    } 
```

现在我想`IEnumerable<UnitGroup>`根据 UnitType 的 UnitName 进行过滤。

例如，我只想获取包含字符串的 UnitName 记录并删除剩余的记录。

像这样的东西：

```
IEnumerable<UnitGroup> Groups;
IEnumerable<UnitGroup> filteredResult = Groups.NameList(o => o.UnitName.contains("test")); 
```

并`IEnumerable<UnitGroup>`仅使用 UnitGroup 下的 UnitType 下过滤的 UnitNames。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:17:06.553

我不是 100% 确定您要达到的目标。您能否提供一些示例数据以使其更清楚？

虽然，我认为它可能符合您的目标：

```
IEnumerable<UnitGroup> Groups;
var filteredResult = Groups.Select(g => new UnitGroup {
                                            key = g.key,
                                            NameList = g.NameList
                                                        .Where(n => n.UnitName == "test")
                                                        .ToList()
                                        })
                           .Where(g => g.NameList.Count > 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:54:50.187

这是另一种应该做@MarcinJuraszek回答的方法。（我也在猜测这个问题的意图。）

```
IEnumerable<UnitGroup> Groups;
var filteredResult = Groups.Where (g => g.NameList.Count() > g.NameList.RemoveAll(nl => nl.UnitName != "Name1")); 
```

如果删除项目的数量少于原始数量，那么我们有感兴趣的项目，因此选择父项。

注意：这将修改原始集合，因此如果您需要多次过滤它，那么这不是您要寻找的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:19:46.607

试试这个：

```
 var filteredList = from g in Groups 
                     where g.NameList.Exists(i=>i.UnitName=="test")
                     select g; 
```

# java - 所有线程完成后打印数据

> ID：15347643
> 
> 赞同：3
> 
> 时间：2013-03-11T20:09:26.523
> 
> 标签：java, multithreading

我只想在我创建的 2 个线程是完成运行方法之后打印一个数组。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:11:56.360

看看方法[`Thread#join()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join())。例如：

```
Thread a = ...;
a.start();
a.join(); // wait until Thread a finishes 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T20:15:40.220

简单的。使用[Thread.join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)。在生成线程时，将它们添加到列表中并循环遍历该列表并调用 thread.join()。一旦你退出那个循环，你的所有线程都被确认完成。然后你可以在那之后有打印语句。

像这样的东西：

```
import java.lang.*;

public class ThreadDemo implements Runnable {

   public void run() {

      //some implementation here
   }

   public static void main(String args[]) throws Exception {

      List<Thread> threadList = new ArrayList<Thread>();
      Thread t1 = new Thread(new ThreadDemo());
      t1.start();
      threadList.add(t1);
      Thread t2 = new Thread(new ThreadDemo());
      t2.start();
      threadList.add(t2);
      for(Thread t : threadList) {
          // waits for this thread to die
          t.join();
      }
      System.out.print("All the threads are completed by now");
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:11:14.863

你试过什么吗？

让代码等待线程完成的标准方法是在该线程上调用 join() 方法；当它返回时，线程就完成了。试着查一下，看看你能弄清楚什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:10:51.510

您可以将这些作业提交给 Executor，每个作业都会返回一个`Future`对象。对这些期货中的每一个调用 get() 方法，您将阻塞直到所有期货都完成：

```
String[] myArr = new String[0];
ExecutorService service = Executors.newSingleThreadExecutor();

//Just one task, but repeat with as many as needed.
Future f = service.submit(new Runnable() {
    public void run() {
        //Executing code
    }
});
f.get();

System.out.println(Arrays.toString(myArr));  //Print array. 
```

`Thread.join()`是等待特定线程完成的更标准的方法，但就个人而言，在这个时代我更喜欢这种方法 - 以后应该更容易说将单线程执行器换成并发线程池（或类似的）需求出现了，我个人也觉得它更整洁。它也可以很容易地重构为与`Callable`s 一起工作，提供一个`Future`可以直接获取并发计算结果的函数。

任何一种方法都行得通，哪种方法更适合您将取决于您的用例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:17:32.563

我的意见是你应该使用[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)。

在打印之前，您应该显示以下内容：

```
CountDownLatch startSignal = new CountDownLatch(2);

// Create your threads and add startSignal as parameters to them 
```

在每个线程结束时，您应该调用：

```
startSignal.countDown(); 
```

之后，在打印之前，您应该调用：

```
startSignal.await();
// print... 
```

这将在计数器达到零后继续。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T20:15:24.853

看看这篇文章（**如何等待一组线程完成？**，[如何等待多个线程完成？](https://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete)）。

# java - Android Eclipse 如何将渲染的 GLsurfaceView 保存为 *.png 图像

> ID：15347644
> 
> 赞同：4
> 
> 时间：2013-03-11T20:09:28.020
> 
> 标签：java, android, eclipse, opengl-es, photography

嗨，我正在制作照片效果应用程序。所以，我从相机加载位图（我保存了原始图像，然后加载）到 glsurfaceview 并应用了一些效果，但我找不到将更改的图像保存为图像文件 *.png 或 *.jpg 的方法。

我几乎到处都看过，但它们对我的应用程序不可用..当我尝试保存时总是强制关闭。

这是我的代码。

我找到了一些保存代码，但我找不到工作。

主要的.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.opengl.GLSurfaceView
        android:id="@+id/effectsview"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.05" />

    <GridLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </GridLayout>

        <GridLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:columnCount="1" >

<Button
    android:id="@+id/button1"
    android:layout_width="159dp"
    android:layout_height="wrap_content"
    android:layout_column="0"

    android:layout_row="0"
    android:onClick="saverenderedimage"
        android:layout_gravity="left|top"
    android:text="Save Image" />

<Button
    android:id="@+id/Button01"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="left|top"
    android:onClick="gomain"
    android:text="Go Main Menu without saving" />

<Button
    android:id="@+id/button2"
    android:layout_width="156dp"
    android:layout_column="0"
    android:layout_gravity="right|top"
    android:layout_row="0"
    android:onClick="sharedialog"
    android:text="Share" />

        </GridLayout>

</LinearLayout> 
```

效果选择器和应用程序.java

```
 public class Effects_selevtor extends Activity implements GLSurfaceView.Renderer {

         i declared some strings ints (deleted)

      String imagefilepath =  Environment.getExternalStorageDirectory().getAbsolutePath() + "/filename.jpg";

      int mCurrentEffect;

      public void setCurrentEffect(int effect) {
          mCurrentEffect = effect;
      }

      public void onCreate(Bundle savedInstanceState) {
            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_effects_selevtor);
          mEffectView = (GLSurfaceView) findViewById(R.id.effectsview);
          mEffectView.setEGLContextClientVersion(2);
          mEffectView.setRenderer(this);
          mEffectView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
          mCurrentEffect = R.id.none;

          Uri imageFileUri = Uri.parse("file:///sdcard/filename.jpg");
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageFileUri);
            startActivityForResult(cameraIntent, 2);

      }

      public void gomain(View View) {

            startActivity(new Intent(Effects_selevtor.this,HelloEffects.class));

        }

      @Override
      protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == 2) {

            try {

                if (bitmap != null) {
                  bitmap.recycle();
                }

                GLES20.glGenTextures(2, mTextures, 0);

                // Load input bitmap
                Bitmap bitmap = BitmapFactory.decodeFile(imagefilepath);
                mImageWidth = bitmap.getWidth();
                mImageHeight = bitmap.getHeight();
                mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

                // Upload to texture
                GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
                GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

                // Set texture parameters
                GLToolbox.initTexParams();

                Toast.makeText(getApplicationContext(), "Touch your phone's Menu button to select effects ",  Toast.LENGTH_SHORT).show();

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
      }

      public static Bitmap SavePixels(int x, int y, int w, int h, GL10 gl)
      {  
           int b[]=new int[w*(y+h)];
           int bt[]=new int[w*h];
           IntBuffer ib=IntBuffer.wrap(b);
           ib.position(0);
           gl.glReadPixels(x, 0, w, y+h, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, ib);

           for(int i=0, k=0; i<h; i++, k++)
           {//remember, that OpenGL bitmap is incompatible with Android bitmap
            //and so, some correction need.        
                for(int j=0; j<w; j++)
                {
                     int pix=b[i*w+j];
                     int pb=(pix>>16)&0xff;
                     int pr=(pix<<16)&0x00ff0000;
                     int pix1=(pix&0xff00ff00) | pr | pb;
                     bt[(h-k-1)*w+j]=pix1;
                }
           }

           Bitmap sb=Bitmap.createBitmap(bt, w, h, Bitmap.Config.ARGB_8888);
           return sb;
      }

        public static void SavePNG(int x, int y, int w, int h, String name, GL10 gl)
        {
            Bitmap bmp=SavePixels(x,y,w,h,gl);
            try 
            {
                FileOutputStream fos=new FileOutputStream("/sdcard/CamWay/"+name);
                bmp.compress(CompressFormat.PNG, 100, fos);
                try 
                {
                    fos.flush();
                } 
                catch (IOException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                try 
                {
                    fos.close();
                } 
                catch (IOException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            } 
            catch (FileNotFoundException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       
        }

          public void saverenderedimage(View view) {

//i tried save but it not worked i don't understand what should i declare for "gl" 

              SavePNG(0, 0,mEffectView.getWidth() , mEffectView.getHeight(), "CamWay.png", gl);
            //  SavePNG(0, 0,mEffectView.getWidth() , mEffectView.getHeight(), imagefilepath, gl);
              startActivity(new Intent(Effects_selevtor.this,HelloEffects.class));

            }

      public void OnClickselector(View arg0) {

        startActivity(new Intent(Effects_selevtor.this,HelloEffects.class));
     }

      private void loadTextures() {
          // Generate textures
          GLES20.glGenTextures(2, mTextures, 0);

          // Load input bitmap
          Bitmap bitmap = BitmapFactory.decodeFile(imagefilepath);

          // Load input bitmap

          mImageWidth = bitmap.getWidth();
          mImageHeight = bitmap.getHeight();
          mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

          // Upload to texture
          GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
          GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

          // Set texture parameters
          GLToolbox.initTexParams();
      }

      private void initEffect() {
          EffectFactory effectFactory = mEffectContext.getFactory();
          if (mEffect != null) {
              mEffect.release();
          }
          /**
           * Initialize the correct effect based on the selected menu/action item
           */
          switch (mCurrentEffect) {

              case R.id.none:
                  break;

              case R.id.vignette:
                  mEffect = effectFactory.createEffect(
                          EffectFactory.EFFECT_VIGNETTE);
                  mEffect.setParameter("scale", .5f);
                  break;

    //and a lot effect more i deleted for readability

              default:
                  break;

          }
      }

      private void applyEffect() {
          mEffect.apply(mTextures[0], mImageWidth, mImageHeight, mTextures[1]);
      }

      private void renderResult() {
          if (mCurrentEffect != R.id.none) {
              // if no effect is chosen, just render the original bitmap
              mTexRenderer.renderTexture(mTextures[1]);
          }
          else {
              // render the result of applyEffect()
              mTexRenderer.renderTexture(mTextures[0]);
          }
      }

      @Override
      public void onDrawFrame(GL10 gl) {
          if (!mInitialized) {
              //Only need to do this once
              mEffectContext = EffectContext.createWithCurrentGlContext();
              mTexRenderer.init();
              loadTextures();
              mInitialized = true;
          }
          if (mCurrentEffect != R.id.none) {
              //if an effect is chosen initialize it and apply it to the texture
              initEffect();
              applyEffect();
          }
          renderResult();

      }

      @Override
      public void onSurfaceChanged(GL10 gl, int width, int height) {
          if (mTexRenderer != null) {
              mTexRenderer.updateViewSize(width, height);
          }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:02:27.530

我通过交叉编译[libpng](http://www.libpng.org/pub/png/libpng.html)并通过JNI使用它实现了将GLSurfaceView保存为PNG。

# jquery - 在 jQuery 中使用特殊字符

> ID：15347645
> 
> 赞同：1
> 
> 时间：2013-03-11T20:09:33.103
> 
> 标签：jquery

我想用 jQuery 替换导航中的文本。我知道如何进行替换，但我的某些类型有西班牙语和法语的重音符号。有谁知道将它们转换为 JS 编码的参考？这是我的代码：

```
var d = $('.navItem3');
d.text(d.text().trim().replace(/Where/i, "D&oacute;nde")); 
```

ó 是带重音的 o。我试过 %B3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:19:03.340

您应该使用`html`方法而不是`text`方法。

```
$('.navItem3').html(function(i, oldHTML){
   return $.trim(oldHTML).replace(/.../gi, "...");
}); 
```

注意IE8及以下不支持该`trim`方法，可以使用jQuery`$.trim`实用函数代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:19:41.680

如果您想使用 html entity ，那么您应该按照@undefined 的建议`&oacute;`将调用更改`.text()`为。`.html()`

您还可以使用 ó 字符的 unicode 表示形式，即`\u00F3`，并继续使用`.text()`。您将使用`"D\u00F3nde"`字符串。

您甚至应该能够`ó`直接使用字符并将其`"Dónde"`用于字符串。如果您不能直接输入，您只需将其粘贴到您的代码中。

[jsfiddle 上的演示](http://jsfiddle.net/john_s/wJKph/)

# c# - InstallShield：无法提取索引为 0 的图标（用于假人）

> ID：15347646
> 
> 赞同：0
> 
> 时间：2013-03-11T20:09:35.327
> 
> 标签：c#, visual-studio-2012, installation, installshield-le

是的，我先做功课。我仍然被困住了。首先让我表达我对微软弃用安装程序项目类型的愤怒。他们真丢人。

回到我的问题，这是错误：

```
Error   3   -3204: Cannot extract icon with index 0 from file <some_path>\obj\Debug\MyProject.Gui.exe. 
```

尝试 #1：[InstallShield：无法提取索引为 0 vb.net 的图标](https://stackoverflow.com/questions/11954618/installshield-cannot-extract-icon-with-index-0-vb-net)

- 答案说在我的 exe 中包含一个图标类型的对象并重建。为此，我尝试了以下方法：

1.  右键单击我的Windows窗体项目，添加新项目，图标，保存所有

2.  打开第1步的图标文件，在里面画一些文字，全部保存

3.  右键单击项目并选择重建（没有错误，看起来不错）

4.  左键单击'Specify Application Data'->'Files'，选择项目中的*.ico（注意：我可以看到它清楚地列出，它在对话框中显示为index0）

5.  左键单击“常规信息”->“显示图标”-> 浏览 *.ico（位于 MyProject.Gui.exe 的项目文件夹中）

6.  全部保存并重建

...我仍然收到相同的错误消息。

如何“重新编译您的 EXE 以包含图标并且消息将消失”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T12:51:07.297

我遇到过同样的问题。您的问题是因为您需要将图标嵌入到可执行文件中。执行此操作的方法是在 Visual Studio 的项目属性窗口中（Alt-Enter 或右键单击 -> 解决方案资源管理器中项目根目录的属性）。

在 Application 下的项目属性中，有一个名为 Resources 的组框。如下所示添加您的图标并安装防护罩将构建良好。

希望有帮助。

![在此处输入图像描述](../Images/8d371cf62060ba3cda30e3fed9ce77e9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T16:00:05.923

我遇到了这个问题，我在网上尝试了很多解决方案，但唯一对我有用的方法：

1.  展开右侧面板（解决方案资源管理器）上的部署解决方案 (+)
2.  展开菜单“配置目标系统”
3.  双击快捷方式文件夹
4.  在这里，您将找到您在项目向导中设置的 2 个输出。
5.  选择其中一个，然后找到属性图标，单击 (...) 以浏览属性图标。
6.  对第二个输出构建的解决方案执行相同的操作。
7.  重建你的项目！

问候，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:38:53.073

您需要将图标文件复制到 Windows 应用程序的调试文件夹中才能成功编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T11:28:07.617

1.  转到配置目标系统下的快捷方式/文件夹。

![在此处输入图像描述](../Images/8afb933db29580ba2471849acff8e830.png)

2.  从树中选择您的应用程序。
3.  选择图标并将索引更改为 2（或 0 以外的值） ![在此处输入图像描述](../Images/258a3ed92540b33f93ccd7dd5268af9f.png)
4.  构建它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T14:01:07.027

如果问题是您将图标与安装程序相关联并将其嵌入到应用程序中，但仍然出现此错误，请尝试向防病毒软件添加文件夹例外。例外应该是您的源代码所在的文件夹并且输出可执行文件。

症状是您在构建过程中随机收到此错误。这是由您的防病毒软件阻止 installshield 图标提取器访问您的应用程序可执行文件引起的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-11T14:05:48.530

这也发生在我身上。我的应用程序在后台运行，所以我没有为它创建图标。发生此错误时，我分配了一个图标，一切正常。

# wordpress - 谷歌索引不存在的 URL。WordPress 不显示 404

> ID：15347647
> 
> 赞同：2
> 
> 时间：2013-03-11T20:09:37.690
> 
> 标签：wordpress, http-status-code-404, unix-timestamp, permalinks

我正在检查 Google 搜索结果：“site:mywordpress.org”。并找到不应该存在的索引的地段或页面。

这里有两个问题：

1.  我不知道 Google 是如何定位、抓取或找到这些网址的。

2.  Wordpress 没有显示 404 错误，因此看起来像是重复的内容。

我尝试了 Wordpress 支持论坛，但没有人回应。我也找不到任何人报告这个问题。这是我所看到的示例：

```
mywordpress.org/blog-post/
mywordpress.org/blog-post/1363035032000/ 
```

我已经为头部添加了一个规范链接引用，并且我一直在做很多谷歌 WMT 删除请求，但我仍然看到一些这样的结果。

我已经在几个 wordpress 安装中对此进行了测试，似乎如果您在永久链接的末尾添加任何数字字符串，它仍然会显示内容而不是显示 404 错误。

我还注意到添加到永久链接的数字是 UNIX 时间戳，末尾有几个零。在这篇文章中，当前的 UNIX 时间戳为：1363035971。

我正在寻找一些关于我应该做什么的建议。我对一个 PHP 函数特别感兴趣，它会检查 url 以查看末尾是否有一串数字，如果有，301 将其重定向到正确的永久链接。我还重视关于为什么 Google 会发现这些错误的 url 以及 UNIX 时间戳是否是线索的任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:31:58.730

您是否检查过某些插件是否导致此问题？还要检查**设置>永久链接下的永久链接设置**

在您找到问题的根源之前，您可以尝试使用[Redirect plugin](http://wordpress.org/extend/plugins/redirection/)来解决它。

该插件具有许多功能，对您的案例很重要的两个功能是：

*   所有 URL 都可以重定向，而不仅仅是不存在的 URL
*   完整的正则表达式支持

因此，借助正则表达式，您可能能够将带有数字的 URL 重定向到正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T16:52:21.363

我有同样的问题，并找到了解决这个问题的方法。

只需将其添加到functions.php

```
 add_action( 'template_redirect', 'so16179138_template_redirect', 0 );
function so16179138_template_redirect()
{
    if( is_singular() )
    {
        global $post, $page;
        $num_pages = substr_count( $post->post_content, '<!--nextpage-->' ) + 1;
        if( $page > $num_pages ){
            include( get_template_directory() . '/404.php' );
            exit;
        }
    }
} 
```

# safari-extension - 在不使用 globalPage.contentwindow 的情况下，在 Safari 扩展中的弹出窗口和全局页面之间传递消息

> ID：15347649
> 
> 赞同：2
> 
> 时间：2013-03-11T20:09:39.713
> 
> 标签：safari-extension

有没有办法使用 dispatchMethod() 将消息从弹出窗口传递到全局页面，而不是使用 safari.extension.globalPage.contentWindow 调用全局页面的函数。

目前我在网页内使用动态创建的 iframe 来模拟弹出框。这使用 Safari 的消息传递与全局页面进行通信。所以我想在以后的 Safari 版本中支持这个以及新的弹出框。

弹出框和全局页面之间的消息传递将帮助我重用代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:18:26.787

似乎没有办法让弹出框使用 dispatchMessage 向全局页面发送消息，反之亦然。但是，您可以使用 HTML5 标准 window.postMessage 来执行等效操作，但如果不进行一些修改，您将无法重用现有代码。

要使用 popover 中的 postMessage，您可以执行以下操作：

```
var gw = safari.extension.globalPage.contentWindow;
gw.postMessage("hello there", window.location.origin); 
```

并在全局页面中接收它：

```
window.addEventListener('message', function (msg) {
    if (msg.origin == window.location.origin) {
        msg.source.postMessage("got your message", window.location.origin);
        doSomethingWithMessageData(msg.data);
    }
}, false); 
```

这个消息传递协议与特定于扩展的协议非常相似，您可能可以重用大部分现有代码，只需添加一个薄抽象层。

# controller - ASP.Net Web API。一个项目中的 JSON 和 XML 响应

> ID：15347652
> 
> 赞同：4
> 
> 时间：2013-03-11T20:09:41.903
> 
> 标签：controller, xml-serialization, asp.net-web-api, jsonserializer

我有一个 ASP.Net Web API 项目，它已经包含以 JSON 格式返回结果的控制器。现在我必须添加应该只接收和返回 XML 的新控制器。我知道我可以使用以下选项来推送控制器以返回 XML 序列化对象：

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true 
```

但是，如果我这样做，我希望旧控制器也会返回 XML 格式的数据，对吧？这不是我需要的。那么，我怎样才能实现我的目标并仅从某些控制器返回 XML 序列化对象？谢谢你。

**更新**

我已经尝试过建议的方法，但它对我不起作用。我正在使用 Fiddler 进行测试。请注意结果仍然是 JSON（最后一个截图）这是附加信息：

控制器：

![控制器](../Images/a700bcefe9f9a9d1a9543f48edab0ed2.png)

请求类：

![请求类](../Images/5c46581ba012496de7ce1081bceb50cc.png)

响应类：

![响应类](../Images/459220022d4f485ea039393f1eb1c448.png)

Fiddler 中的请求：

![Fiddler 中的请求](../Images/384da4c85db7aa554252f5a904329615.png)

Fiddler 中的响应：

![Fiddler 中的响应](../Images/50ca0760b6880aa4cae21939ae62197e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:33:40.360

内容协商或序列化不是控制器应该关心的事情。

开箱即用的 ASP.NET Web API 可以返回 XML 和 JSON 内容，客户端可以通过设置 Accept HTTP 标头来请求某种格式。

将其设置为：

```
Accept: application/json 
```

如果你想取回 JSON

```
Accept: application/xml 
```

如果你想取回 XML

编辑：另请注意，Web API 默认使用 DataContractSerializer，回答您评论中的问题：

```
[DataContract(Namespace = "schemas.datacontract.org/2004/07/Test.Models" )]
public class TheThing
{
    [DataMember]
    public string Name { get; set; }
    [DataMember(Name = "contentname")]
    public string ContentName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T14:21:06.180

我遇到了一些接受不起作用的 API。如果我将“Content-Type”标头设置为，Accept 不起作用，我会在这些 API 上找到

`Content-Type: application/xml`

这将导致控制器以 XML 响应的形式进行响应。

确实，在 Webapi2 中，Accept 标头现在确实导致控制器返回预期的应用程序/xml 响应。这可能是早期版本的 WebAPI 的问题。

# php - 仅允许在指定的虚拟主机上访问 PhpMyadmin

> ID：15347653
> 
> 赞同：1
> 
> 时间：2013-03-11T20:09:48.957
> 
> 标签：php, apache, phpmyadmin, virtual-hosts

我正在开发一个多虚拟主机环境。我已经为 Mysql Remote Control 安装了 PhpMyadmin。

环境配置如下：

```
one.domain.com
two.domain.com
onlyphpmyadmin.domain.com 
```

现在，如果我访问三个域之一

```
http://one.domain.com/phpmyadmin/
http://two.domein.com/phpmyadmin/
http://onlyphpmyadmin.domain.com/phpmyadmin/ 
```

结果是一样的，允许访问 Phpmyadmin。

目标是获得像下面这样的情况

```
http://one.domain.com/phpmyadmin/ --> access denied
http://two.domein.com/phpmyadmin/ --> access denied 
http://onlyphpmyadmin.domain.com/phpmyadmin/ -->access allowed 
```

没有类似的hack

```
<?php 
if($_SERVER['HTTP_HOST'] != 'onlyphpmyadmin.domain.com')
die('access denied');

 ...
 ?> 
```

在一些 Phpmyadmin 文件上。

* * *

```
Alias /phpmyadmin /usr/share/phpmyadmin

<Directory /usr/share/phpmyadmin>
    Options FollowSymLinks
    DirectoryIndex index.php

    <IfModule mod_php5.c>
        AddType application/x-httpd-php .php

        php_flag magic_quotes_gpc Off
        php_flag track_vars On
        php_flag register_globals Off
        php_admin_flag allow_url_fopen Off
        php_value include_path .
        php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp
        php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/
    </IfModule>

</Directory>

# Authorize for setup
<Directory /usr/share/phpmyadmin/setup>
    <IfModule mod_authn_file.c>
    AuthType Basic
    AuthName "phpMyAdmin Setup"
    AuthUserFile /etc/phpmyadmin/htpasswd.setup
    </IfModule>
    Require valid-user
</Directory>

# Disallow web access to directories that don't need it
<Directory /usr/share/phpmyadmin/libraries>
    Order Deny,Allow
    Deny from All
</Directory>
<Directory /usr/share/phpmyadmin/setup/lib>
    Order Deny,Allow
    Deny from All
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:23:26.600

如果所有三个虚拟主机都指向同一个文档根目录，则只需在您希望它工作的虚拟主机配置上为 phpmyadmin 添加一个别名。

```
Alias /phpmyadmin /var/www/apps/some/place/where/virtualhosts/cant/access/phpmyadmin 
```

# clojure - IntelliJ IDEA / La Clojure 中的 Clojure 编译器消息

> ID：15347654
> 
> 赞同：3
> 
> 时间：2013-03-11T20:09:57.170
> 
> 标签：clojure, intellij-idea, la-clojure

版本：

*   想法：12.0.4
*   LaClojure：0.5.228

* * *

我正在开发一个混合 Clojure/Java 项目，其中一个 Clojure 主方法调用 Java 和其他 Clojure 代码。这个项目在 Eclipse 中工作。在尝试将项目移动到 IntelliJ IDEA 时，我失败了，出现了一条神秘的错误消息。

在我的 4 个 Clojure 命名空间中，有 3 个可以使用`Ctrl-Shift-F9`. 我的 3 个 Java 文件也可以。但是主要的 Clojure 命名空间会产生：

```
! Error: Clojure Compiler: 
```

同样的事情发生在`Rebuild project`,`Make module`或`Make project`上。

如果在我的 33 行源代码中潜伏着一个在 Eclipse 中编译没有显示的错误，那么这个错误消息肯定太少而无法显示。

有谁知道如何让 LaClojure 生成的编译器进程提供更多信息？

# java - 使用 apache commons 从 tar 解压缩文件 - 可能是重复条目

> ID：15347662
> 
> 赞同：1
> 
> 时间：2013-03-11T20:10:24.383
> 
> 标签：java, tar, apache-commons

**场景：**使用 Apache commons 解压缩 tar 文件。

**问题：**我使用的 tar 是一个构建 tar，它被部署到 Web 服务器中。此 tar 包含重复的条目，如下所示。

1.  appender_class.xml
2.  APPENDER_CLASS.xml

使用以下代码提取时，仅提取 appender_class.xml 但我想要这两个文件我该怎么做？在飞行中重命名很好，但我怎么能做到这一点？

```
public static void untar(File[] files) throws Exception {
        String path = files[0].toString();
        File tarPath = new File(path);
        TarEntry entry;
        TarInputStream inputStream = null;
        FileOutputStream outputStream = null;
        try {
            inputStream = new TarInputStream(new FileInputStream(tarPath));
            while (null != (entry = inputStream.getNextEntry())) {
                int bytesRead;
                System.out.println("tarpath:" + tarPath.getName());
                System.out.println("Entry:" + entry.getName());
                String pathWithoutName = path.substring(0, path.indexOf(tarPath.getName()));
                System.out.println("pathname:" + pathWithoutName);
                if (entry.isDirectory()) {
                    File directory = new File(pathWithoutName + entry.getName());
                    directory.mkdir();
                    continue;
                }
                byte[] buffer = new byte[1024];
                outputStream = new FileOutputStream(pathWithoutName + entry.getName());
                while ((bytesRead = inputStream.read(buffer, 0, 1024)) > -1) {
                    outputStream.write(buffer, 0, bytesRead);
                }
                System.out.println("Extracted " + entry.getName());
            }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:26:32.350

尝试像这样打开您的 FileOutputstream：

```
File outputFile = new File(pathWithoutName + entry.getName());
for(int i = 2; outputFile.exists(); i++) {
    outputFile = new File(pathWithoutName + entry.getName() + i);
}
outputStream = new FileOutputStream(outputFile); 
```

如果遇到以前创建的名为 APPENDER_CLASS.xml 的文件，它应该生成一个名为 APPENDER_CLASS.xml2 的文件。如果存在 APPENDER_CLASS.xml2，它将无限创建 APPENDER_CLASS.xml3。

File.exists() 考虑了区分大小写（windows 文件名不区分大小写，而 unix、linux 和 mac 区分大小写）。因此，在不区分大小写的文件系统上使用上面的代码，文件将被重命名，而在区分大小写的文件系统上，文件不会被重命名。

# ruby-on-rails-3.2 - 在带有 D3 的 Rails 应用程序中显示一个 hello world

> ID：15347663
> 
> 赞同：4
> 
> 时间：2013-03-11T20:10:31.377
> 
> 标签：ruby-on-rails-3.2, d3.js

我在 index.html 中的所有内容是：

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>

<script src="d3/d3.v3.js"></script>

<script>
    d3.selectAll("body").text("hi")
</script>

</body> 
```

D3 的结构看起来像这样：

![在此处输入图像描述](../Images/07a9e60a38fd0812027218142ea682e0.png)

但是当我启动 Rails 并转到 localhost3000 时，页面上没有显示任何内容。我确信我在那里做了一些愚蠢的事情，但对 D3 来说还是很新的，并试图找出我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:20:48.647

您是否在控制台上收到 javascript 错误？您在视图中使用相对路径。将文件移动到文件`/public/d3`夹并尝试：

```
<script src="/d3/d3.v3.js"></script> 
```

实际上，`assets`如果您使用资产管道，您应该将 javascript 放在文件夹中。

在您的 Gemfile 中使用`d3_rails`gem (get [here )：](https://github.com/logical42/d3_rails)

`gem 'd3_rails'`

要使用资产管道，请添加到`application.js`

`//= require d3.v3`

d3 javascript 将自动包含在您的 javascript`application.js`文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:01:56.717

如果问题是您无法打印出消息，可能是因为您没有指定在正文中附加“文本”以包含文本本身。这有效（请注意，我从网上调用 d3.js 库）：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
    <style type="text/css">     
    </style>
</head>
<body>
    <script type="text/javascript">

        //Width and height
        var w = 600;
        var h = 250;

        d3.selectAll("body")
            .append("text")
            .text("hi");

    </script>
</body>
</html> 
```

# c# - 未知项目类型 GUID

> ID：15347666
> 
> 赞同：7
> 
> 时间：2013-03-11T20:10:34.133
> 
> 标签：c#, visual-studio-2010, silverlight

我最近从乌克兰的一家商店接手了一个 Silverlight 应用程序的维护工作，但在打开 csproj 文件时遇到了问题。我检查了[mztools](http://www.mztools.com/articles/2008/mz2008017.aspx)和[onlinecoder](http://onlinecoder.blogspot.com/2009/09/visual-studio-projects-project-type.html)，并用谷歌搜索了它们中的每一个，但无法识别其中的两个：

> 88A30576-7583-4F75-8136-5EFD2C14ADFF
> 4C25E9B5-9FA6-436c-8E19-B395D2A65FAF

如果相关的话，我目前正在使用 Visual Studio 2010 Express。
任何关于它们是什么或如何找出的见解都将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T21:05:37.707

88A30576-7583-4F75-8136-5EFD2C14ADFF 是插件包的 CRM 包 GUID。

您需要下载 CRM 2011 SDK 并安装它。然后，在 SDK 文件夹中，运行 tools\developertoolkit\crmdevelopertools_installer.exe

另一个GUID，4C25E9B5-9FA6-436c-8E19-B395D2A65FAF，我在网上找不到，但我怀疑这只是插件GUID，因为我在我的插件项目中只看到这个。

# c# - C# 错误需要修复和信息

> ID：15347667
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:10:41.830
> 
> 标签：c#, coding-style, computer-science, development-environment

如何修复此代码中的错误？

```
 PS3TMAPI.GetProcessList(0, out processIDs);  
    ulong uProcess = processIDs[0];  
    ProcessID = Convert.ToUInt32(uProcess);  
    PS3TMAPI.ProcessAttach(0, PS3TMAPI.UnitType.PPU, ProcessID);  
    PS3TMAPI.ProcessContinue(0, ProcessID);  
    Info = "The Process" + ProcessID.ToString("") + " Has Been Attached !"; 
```

1.  对于这一行 PS3TMAPI.GetProcessList(0, out processIDs); 我得到“PS3TMAPI.GetProcessList(int, out uint[]) 的最佳重载方法匹配有一些无效参数”

2.  参数 2：无法从 out processIDs 转换为 out uint[]

3.  对于我得到的所有 processID 在当前上下文中都不存在

4.  对于我得到的所有 ProcessID 在当前上下文中都不存在

5.  我得到信息在当前上下文中不存在

另外，我如何在此视频中执行此操作，例如在左下角，那个人按下按钮，连接后未连接的红色变为绿色 我在我的程序中连接了一个信箱，但让我知道它是否连接成功我想要为此，在视频中，它位于 1:22 - 1:27 的左下角[http://www.youtube.com/watch?v=uUI5IIhrj78](http://www.youtube.com/watch?v=uUI5IIhrj78)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:20:27.477

您需要发布更多（全部？）相关代码以获得任何真正的帮助。没有更多可以继续下去，你可能会得到的最好的就是这个。

1.  processIDs 不是 uint[] （请参阅下面的答案 3）。
2.  见 1 的答案。
3.  processIDs 在其他地方（在此方法之外）声明或根本不声明。
4.  ProcessID 在其他地方（在此方法之外）声明或根本不声明。
5.  信息在其他地方（在此方法之外）声明或根本不声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:14:42.410

您可以通过添加来修复几个错误

```
 uint[] processIDs = null; 
```

在开始时

但我同意乔恩（duuh）的观点，即问题不是很清楚。

# authentication - 使用 REST 通过 ACS 对 Microsoft 帐户用户进行身份验证

> ID：15347668
> 
> 赞同：3
> 
> 时间：2013-03-11T20:10:46.243
> 
> 标签：authentication, azure, acs

我想利用 ACS 在网站上对 Windows 帐户用户（以及将来来自其他身份提供者的最终用户）进行身份验证。

我找到了很多关于 ACS 的资源，但大多数都围绕使用 WIF/在 UI 层中使用托管代码来验证用户。我想避免这种情况。是否可以通过使用 javascript/jQuery 对 ACS 进行基于 REST 的调用来检索 Microsoft 帐户用户的令牌，从而从 ACS 检索令牌？

我看到的一个接近的例子是这个链接，但是它使用服务身份而不是利用身份提供者。 [http://code.msdn.microsoft.com/windowsazure/MVC4-Web-API-With-SWT-232d69da](http://code.msdn.microsoft.com/windowsazure/MVC4-Web-API-With-SWT-232d69da)

这是我的最终目标：

1.  该网站将有两层，一个 UI 层 (MVC 4) 和一个服务层 (MVC WebAPI)。这两个层都需要在 Azure 中相互独立地扩展。
2.  我想让 UI 层调用 ACS 来确定当前会话是否经过身份验证。如果是，我希望 ACS 将令牌返回给客户端。我想将该令牌存储在客户端上，以便在步骤 3 中使用。
3.  用户登录后，我想让客户端对服务层进行基于 REST 的调用，并在每个请求的标头中传递 Microsoft 帐户/ACS 用户令牌，完全绕过第二个服务请求的 UI 层. 服务层将对每个请求的用户进行身份验证。
4.  客户端将通过重定向到登录页面或显示结果来处理来自服务层的响应代码（200、401 等）。

我不确定第 2 步。客户端浏览器如何从 ACS 检索令牌以传递给服务层？

我基本上想做 Vittorio 在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/79e09d59-08b9-446a-8ead-209134a4326d)描述的事情，但我想使用 MVC4 网络应用程序而不是 Windows 8 商店应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:25:38.387

在第 2 步中，您的 MVC4 Web 应用程序是一个依赖方，因此依赖于主题/用户提供的令牌中的声明。因此，它实际上只是将用户重定向到 ACS 进行身份验证，而不是 UI 调用 ACS。无论如何，根据您的要求和描述，我相信这是您正在寻找的解决方案。

[http://blogs.msdn.com/b/vbertocci/archive/2013/01/09/using-the-jwt-handler-for-implementing-poor-man-s-delegation-actas.aspx](http://blogs.msdn.com/b/vbertocci/archive/2013/01/09/using-the-jwt-handler-for-implementing-poor-man-s-delegation-actas.aspx)

希望这可以帮助。-瑞克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:50:50.430

在阅读 Rick 链接到的 Vittorio 的博客文章之前，我写了这个答案。这似乎几乎是你想要的。无论如何，我会回答以提供有关 WIF 的更多背景信息以及此场景的工作原理，但您应该查看该帖子。

首先，需要注意的是，在 MVC 4 应用程序中使用 WIF 时，UI/表示层中不会发生身份验证或验证。WIF 在请求层工作，如果您选择使用 Javascript 路线，您必须自己做很多事情（我认为这不是一个有效的路线，尽管它可能需要做很多工作）。

它是这样的：当用户点击需要身份验证的页面时，WIF 会将他们重定向到 ACS，然后您将被发送到 Google/Microsoft 登录（身份提供者）。在您通过身份提供者进行身份验证后，ACS 会将生成的访问令牌和有关经过身份验证的用户的声明发送回您的应用程序（ACS 配置中的返回 URL）。最后，WIF 处理验证由 ACS 发送的令牌（不小的任务），并在您的应用程序中创建一个可用于识别用户的 ClaimsPrincipal 对象。

听起来您想要的是模拟/委托，用户登录并且他们的凭据从前端传递到后端。对于这种情况，我认为您没有理由不只在 MVC 4 应用程序中使用 WIF 进行用户身份验证。用户进行身份验证并 WIF 处理/验证令牌（尽管因为您正在调用 Web API，您可能应该使用[JWTTokenHandler](https://nuget.org/packages/Microsoft.IdentityModel.Tokens.JWT "JWTTokenHandler")来实现其轻量级）。您在 MVC 项目中创建一个操作，该操作使用 Authorization 标头中的令牌向您的 Web API 发送请求。您的 Web API 被配置为读取传入请求的授权标头，使用 JWTTokenHandler 验证令牌，然后您就完成了。您可以从此代码示例中窃取 Web API 部分的大部分代码（尤其是 Global.asax.cs 中的代码）：[http://code.msdn.microsoft.com/AAL-Native-Application-to-fd648dcf](http://code.msdn.microsoft.com/AAL-Native-Application-to-fd648dcf)

# scala - 通过 java/scala 将向量/输入流传递给 clojure 函数

> ID：15347675
> 
> 赞同：2
> 
> 时间：2013-03-11T20:11:13.820
> 
> 标签：scala, clojure, clojure-java-interop

我需要从 java/scala 调用一个 clojure 函数，它需要一个向量或一个输入流作为它的第一个参数。

这样做总是会产生以下异常：

执行异常[[UnsupportedOperationException: pdf (clj-pdf.main/-pdf not defined?)]]

我正在使用[clj-pdf](https://github.com/yogthos/clj-pdf)并且需要调用 pdf-function

```
(defn pdf
  "usage:
   in can be either a vector containing the document or an input stream. If in is an input stream then the forms will be read sequentially from it.
   out can be either a string, in which case it's treated as a file name, or an output stream.
   NOTE: using the :pages option will cause the complete document to reside in memory as it will need to be post processed."
  [in out]
  (if (instance? InputStream in)
    (stream-doc in out)
    (write-doc in out))) 
```

我已经修改了源代码，通过

```
leiningen uberjar 
```

对 cjl-pdf 的 project.clj 的修改可以在最后 2 行看到：

```
(defproject clj-pdf 
  "1.0.6"
  :description "PDF generation library"
  :url "https://github.com/yogthos/clj-pdf"
  :license {:name "GNU Lesser General Public License - v 3"
            :url "http://www.gnu.org/licenses/lgpl.html"
            :distribution :repo
            :comments "same as  iText and JFreeChart"}
  :dependencies [[org.clojure/clojure "1.5.0"]
                 [jfree/jfreechart "1.0.13"]                 
                 [itext-min "0.2"]]

  :aot [clj-pdf.main]
  :main clj-pdf.main) 
```

在我添加的 main.clj 中：

```
(ns clj-pdf.main
  (:gen-class
   ;; neither java.io.InputStream nor ArrayList work:
   :methods [#^{:static true} [pdf [java.util.ArrayList, java.io.OutputStream] void]])
  (:use clj-pdf.core))

(defn -main [& args]) 
```

我正在使用我的 scala 代码中的 lib，如下所示：

```
val output = new ByteArrayOutputStream()
val list = new java.util.ArrayList[String]
list.add( """[:list {:roman true} 
             [:chunk {:style :bold} "a bold item"] "another item" "yet another item"]
             [:phrase "some text"]                                   
             [:paragraph "yet more text"]]""")

clj_pdf.main.pdf(list, output) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:27:02.437

它适用于 Java：

```
 java.util.ArrayList a = new java.util.ArrayList();
    java.io.ByteArrayOutputStream b = new java.io.ByteArrayOutputStream();
    clj_pdf.main.pdf (a, b); 
```

如果我添加到 main.clj：

```
 (defn -pdf [in out] (pdf in out)) 
```

并使用`lein uberjar`来构建项目。

另一种选择是`clojure.lang.RT`按照[https://stackoverflow.com/a/6410926/151650使用](https://stackoverflow.com/a/6410926/151650)

# jsf - primefaces更新属性不起作用

> ID：15347678
> 
> 赞同：0
> 
> 时间：2013-03-11T20:11:26.917
> 
> 标签：jsf, jsf-2, primefaces

每当我在 Home.xhtml 页面上运行以下代码时，都会出现以下异常。我尝试调用面板的内容`id = items`但没有成功。它说编译器找不到带有`items`标识符的组件。

1) Home.xhtml 的一部分

```
<h:form>
    <p:commandButton type="submit" value="Speak Out" action="#{statusBean.save}" ajax="true" styleClass="buttonstyle" update="items"/>                          
</h:form>

<p:panel id="items">    
    //content       
</p:panel> 
```

2)异常

```
Mar 12, 2013 1:38:04 AM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/Home.xhtml]
javax.faces.FacesException: Cannot find component with identifier "items" in view.
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:249)
    at org.primefaces.renderkit.CoreRenderer.buildAjaxRequest(CoreRenderer.java:222)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:81)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:53)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:879)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1650)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:164)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:300)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:181)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:125)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1643)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:389)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Mar 12, 2013 1:38:04 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [Cannot find component with identifier "items" in view.] with root cause
javax.faces.FacesException: Cannot find component with identifier "items" in view.
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:249)
    at org.primefaces.renderkit.CoreRenderer.buildAjaxRequest(CoreRenderer.java:222)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:81)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:53)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:879)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1650)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:164)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:300)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:181)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:125)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1643)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:389)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:23:47.047

好的，很快你应该尝试一下 `:items`，因为它在组件树之外。有关使用 primefaces 的 ajax 行为的更多详细信息，您可以从[此处](http://www.primefaces.org/showcase/ui/pprPartialTree.jsf)查看展示中的示例。此外，您可以在这种情况下使用[firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)来观察您的组件。 **编辑：** 在 BalusC 发出警告之后，您的问题不是因为它不在同一个组件树内，而是因为它不在同一个 NamingContainer 中，这是正确的。

标准组件如`h: form`,`f: subview`和`h: dataTable`是命名容器。大多数组件集都包含在某些命名容器中，因此在您的情况下，它在标签之外，因为这个原因`:items`将是引用它的正确方法。

请参阅这些帖子以帮助您很好地理解该主题：

*   [jsf如何创建命名容器](https://stackoverflow.com/questions/3449370/jsf-how-to-create-a-naming-container)
*   [命名容器和 Jsf](http://www.rponte.com.br/2008/07/01/jsf-e-naming-container/)

# python - 具有从子模块导入根命名空间的方法的 Python 模块

> ID：15347682
> 
> 赞同：6
> 
> 时间：2013-03-11T20:11:40.530
> 
> 标签：python, module

我想创建一个像 NumPy 一样工作的 Python 模块。这些方法不仅是模块源树的叶子中的子模块。有一个根模块包含许多我可以直接调用的方法，还有子模块。问题是必须在某处定义根方法。我在想有一个目录结构：

```
module/
  __init__.py
  core.py
  stuff1.py
  submodule/
    __init__.py
    stuff2.py
    stuff3.py 
```

现在我想要将“core”中的所有内容导入“module”命名空间，就好像它是一个module.py文件一样，并且core.py的内容在这个module.py中。问题是模块是一个目录而不是一个文件，那么我该如何定义这些应该位于模块根目录中的方法呢？

**我尝试在init** .py 中放入“from core import *” ，但这没有用。（编辑：实际上确实如此。）

我是否应该在“module.py”文件中包含核心方法以及模块目录？我不知道这是否有效，但它看起来很尴尬。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:59:10.720

我认为你想要的是能够做到这一点：

```
# some_other_script.py

import module
# Do things using routines defined in module.core 
```

当您要求 Python `import module`（在*非常*基本的意义上）`module/__init__.py`运行时，会发生什么情况，并且会创建一个`module`对象并将其导入您的命名空间。这个对象（同样，非常基本）包含运行时发生的事情`__init__.py`：名称定义等。这些可以通过`module.something`.

现在，如果您的设置如下所示：

```
# module/__init__.py

from module.core import Clazz
c = Clazz()
print c # Note: demo only! Module-level side-effects are usually a bad idea! 
```

当你 import 时`module`，你会看到这样的打印语句：

```
<module.core.Clazz object at 0x00BBAA90> 
```

伟大的。但是，如果您随后尝试访问`c`，您将获得`NameError`：

```
# some_other_script.py
import module # prints "<module.core.Clazz object at 0x00BBAA90>"
print c # NameError (c is not defined) 
```

这是因为你还没有导入`c`；你已经导入了`module`. 相反，如果您的入口点脚本如下所示：

```
# some_other_script.py
import module # prints "<module.core.Clazz object at 0x00BBAA90>"
print module.c  # Access c *within module* 
```

一切都会运行良好。这**也**可以与`from core import *`and/or一起正常工作`from module import *`，但我（和 PEP8）建议不要这样做，因为当你开始使用狂野的导入时，脚本中发生了什么并不是很清楚。为了清楚起见：

```
# module/core.py

def core_func():
    return 1 
```

```
# module/__init__.py

from core import *
def mod_func():
    return 2 
```

上面的内容真的很好，尽管您不妨将其设为`core`“私有”（重命名为`_core`）以表明没有理由再从包外部触摸它。

```
# some_other_script.py

from module import *

print core_func() # Prints 1
print mod_func() # Prints 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:21:38.610

查看有关[`__all__`](https://stackoverflow.com/q/44834/90322)列表的信息。它允许您定义导出的名称。

这样标记它，您可以设置一个函数来确定从子模块中提取什么：

```
@property
all(self):
    #Whatever introspective code you may want for your modules
    __all__ += submodule.__all__ 
```

如果你只想要模块空间中的整个该死的shabang，这里有一种方法：

```
$ ipython
In [1]: from foomod import *

In [2]: printbar()
Out[2]: 'Imported from a foreign land'

In [3]: ^D
Do you really want to exit ([y]/n)?
$ ls foomod/
__init__.py __init__.pyc    core.py         core.pyc        submodule
$ grep . foomod/*.py 
foomod/__init__.py:from foomod.core import *
foomod/core.py:def printbar():
foomod/core.py:     return "Imported from a foreign land" 
```

...如果我们`__init__.py`做空：

```
$ echo > foomod/__init__.py
$ ipython

In [1]: from foomod import *

In [2]: printbar()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-2-ba5b6693441e> in <module>()
----> 1 printbar()

NameError: name 'printbar' is not defined 
```

# javascript - 在 Netsuite suitescript 中将项目添加到销售订单

> ID：15347683
> 
> 赞同：4
> 
> 时间：2013-03-11T20:11:41.627
> 
> 标签：javascript, netsuite

我试图找出查看包含名为“**修复**”的项目的新销售订单背后的代码，并在用户提交之前添加第二个名为“**修复成本”的项目。**我有点迷茫，我欢迎任何可以提供的帮助。我希望这个脚本在 Javascript 中，我会将它附加到 Netsuite 中的销售订单表单中以运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:01:06.420

这是一个示例解决方案：

我们仍然假设项目内部 id 是 Repair = 100 和 Repair Cost = 200

```
function recalc(type)
{
    if(type == 'item')
    {
        var itemId = nlapiGetCurrentLineItemValue('item', 'item'); //Get the Item ID
        if(itemId == 100) //Repair Cost
        {
                //Insert item
                nlapiSelectNewLineItem('item');
                nlapiSetCurrentLineItemValue('item', 'item', 200); //Repair Cost
                nlapiSetCurrentLineItemValue('item', 'quantity', 1);
                nlapiSetCurrentLineItemValue('item', 'amount', '0.00');
                nlapiCommitLineItem('item');
        }
    }
    return true;
} 
```

将其部署为客户端代码并确保该函数是 Recalc。

要了解有关客户端脚本的更多信息：[https ://system.na1.netsuite.com/help/helpcenter/en_US/Output/Help/SuiteFlex/SuiteScript/SSScriptTypes_ClientScripts.html#1016773](https://system.netsuite.com/help/helpcenter/en_US/Output/Help/SuiteFlex/SuiteScript/SSScriptTypes_ClientScripts.html#1016773)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:33:04.220

您需要做的第一件事是获取项目“修复”和“修复成本”的内部 id。

在此示例中，假设 Repair 的内部 id = 100 和 Repair Cost = 200

这是代码：

```
function afterSubmit(type)
{
    if(type == 'create' || type == 'edit')
    {
        var record = nlapiLoadRecord(nlapiGetRecordType(), nlapiGetRecordId()); //Load the record

        //Loop to all sublist item
        var count = record.getLineItemCount('item');
        for(var i = 1; i <= count; i++)
        {
            var item = record.getLineItemValue('item', 'item', i); //This will return the internal id of the item
            if(item == 100) //Item is equal to 100; insert one item
            {
                record.insertLineItem('item', i);
                record.setLineItemValue('item', 'item', i, 200); //Repair Cost internal id
                record.setLineItemValue('item', 'quantity', i, 1); //You should put some quantity; depending on your account setup all required fields should be set here.
            }
        }

        //Submit the changes
        nlapiSubmitRecord(record, true);
    }
} 
```

要了解套件脚本 API 和暴露给销售订单的字段，请查看此 Netsuite 帮助指南：

[https://system.netsuite.com/help/helpcenter/en_US/RecordsBrowser/2012_2/Records/salesorder.html](https://system.netsuite.com/help/helpcenter/en_US/RecordsBrowser/2012_2/Records/salesorder.html)

# jquery - JQuery Mobile：单击按钮时重定向

> ID：15347684
> 
> 赞同：1
> 
> 时间：2013-03-11T20:11:46.527
> 
> 标签：jquery, button, mobile, onclick

我想根据列表选择重定向到不同的页面。我可以获得点击句柄上的按钮，但我如何重定向到页面。下面是我的代码

```
 <div data-role="page" id="page1">
   <!-- Header --> 
   <div data-role="header"> 
<a href="#detailpage" data-rel="back" data-icon="arrow-l">back</a>
    <h1>List</h1>
    <a href="#" data-icon="arrow-r" data-iconpos="right" id="disnext">Next</a>      
   </div>  <!-- /Header -->
   <!-- Contents -->
   <div data-role="content">
    <ul data-role="listview" data-filter="true" id="list">
      <li data-name="val1">Value 1</li>
      <li data-name="val2">Value 2</li>
      <li data-name="val3">Value 3</li>
    </ul>
  </div>
 </div> <!-- /Contents -->
 </div>

 <!-- /Contents -->
 $("#disnext").click(function(e){

    alert("Button is clicked");
    // HERE I WANT TO REDIRECT TO DIFFERENT PAGE BASED ON LIST SELECTION

    return false;
    }); 
```

如果用户选择值 1，它应该转到第 1 页，如果用户选择值 2，它应该像这样转到第 2 页。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:15:38.653

像这样简单的东西会起作用：

```
window.location.href = "http://somesite.com/" + $('#list').val(); 
```

[类似的问题](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:14:44.560

使用列表视图的 .index() 属性，您可以获得选定的索引。

```
$("#disnext").click(function(e){
    alert("Button is clicked");
    // HERE I WANT TO REDIRECT TO DIFFERENT PAGE BASED ON LIST SELECTION
    var selectedIndex = $("#list").index();

    //Logic here
    return false;
}); 
```

# python - 可变数量范围（n）的乘积

> ID：15347687
> 
> 赞同：0
> 
> 时间：2013-03-11T20:11:48.857
> 
> 标签：python, range, product, itertools

我试图了解如何编写将输出数字的所有除数的代码。我最感兴趣的方法从一个返回字典的函数开始，其中键是主要除数，值是可除数。我已经像这样编写了这个函数：

```
def div_pair(num):
    divPair = {}
    for prime in prime_gen():
        primeDegree = 0
        while num % prime == 0:
            num = int(num / prime)
            primeDegree += 1
        if primeDegree > 0:
            divPair[prime] = primeDegree
        if num == 1:
            return divPair 
```

例如，数字 84,000 输出字典

```
{2: 5, 3: 1, 5: 3, 7: 1} 
```

我想从这里做的是生成由不同数字 divPair 返回的任何给定值的幂集（？），然后将这些幂集乘以它们匹配的素数。这是一个示例，它使用我试图用来生成 powerset 的那种代码：

```
from itertools import product
list(product(range(5+1), range(1+1), range(3+1), range(1+1))) 
```

输出这个：

```
[(0, 0, 0, 0),
 (0, 0, 0, 1),
 (0, 0, 1, 0),
 (0, 0, 1, 1),
 (0, 0, 2, 0),
 (0, 0, 2, 1),
 (0, 0, 3, 0),
 (0, 0, 3, 1),
 (0, 1, 0, 0),
 (0, 1, 0, 1),
 (0, 1, 1, 0),
 (0, 1, 1, 1),
 (0, 1, 2, 0),
 (0, 1, 2, 1),
 (0, 1, 3, 0),
 (0, 1, 3, 1),
 (1, 0, 0, 0),
 (1, 0, 0, 1),
 (1, 0, 1, 0),
 (1, 0, 1, 1),
 (1, 0, 2, 0),
 (1, 0, 2, 1),
 (1, 0, 3, 0),
 (1, 0, 3, 1),
 (1, 1, 0, 0),
 (1, 1, 0, 1),
 (1, 1, 1, 0),
 (1, 1, 1, 1),
 (1, 1, 2, 0),
 (1, 1, 2, 1),
 (1, 1, 3, 0),
 (1, 1, 3, 1),
 (2, 0, 0, 0),
 (2, 0, 0, 1),
 (2, 0, 1, 0),
 (2, 0, 1, 1),
 (2, 0, 2, 0),
 (2, 0, 2, 1),
 (2, 0, 3, 0),
 (2, 0, 3, 1),
 (2, 1, 0, 0),
 (2, 1, 0, 1),
 (2, 1, 1, 0),
 (2, 1, 1, 1),
 (2, 1, 2, 0),
 (2, 1, 2, 1),
 (2, 1, 3, 0),
 (2, 1, 3, 1),
 (3, 0, 0, 0),
 (3, 0, 0, 1),
 (3, 0, 1, 0),
 (3, 0, 1, 1),
 (3, 0, 2, 0),
 (3, 0, 2, 1),
 (3, 0, 3, 0),
 (3, 0, 3, 1),
 (3, 1, 0, 0),
 (3, 1, 0, 1),
 (3, 1, 1, 0),
 (3, 1, 1, 1),
 (3, 1, 2, 0),
 (3, 1, 2, 1),
 (3, 1, 3, 0),
 (3, 1, 3, 1),
 (4, 0, 0, 0),
 (4, 0, 0, 1),
 (4, 0, 1, 0),
 (4, 0, 1, 1),
 (4, 0, 2, 0),
 (4, 0, 2, 1),
 (4, 0, 3, 0),
 (4, 0, 3, 1),
 (4, 1, 0, 0),
 (4, 1, 0, 1),
 (4, 1, 1, 0),
 (4, 1, 1, 1),
 (4, 1, 2, 0),
 (4, 1, 2, 1),
 (4, 1, 3, 0),
 (4, 1, 3, 1),
 (5, 0, 0, 0),
 (5, 0, 0, 1),
 (5, 0, 1, 0),
 (5, 0, 1, 1),
 (5, 0, 2, 0),
 (5, 0, 2, 1),
 (5, 0, 3, 0),
 (5, 0, 3, 1),
 (5, 1, 0, 0),
 (5, 1, 0, 1),
 (5, 1, 1, 0),
 (5, 1, 1, 1),
 (5, 1, 2, 0),
 (5, 1, 2, 1),
 (5, 1, 3, 0),
 (5, 1, 3, 1)] 
```

这真的是我想要的输出。我只需要修改代码以某种方式接受 divPair.values() 。所以我写这个：

```
from itertools import product
divPair = div_pair(84000)
list(product(range(i+1) for i in divPair.values())) 
```

在我看来它应该是正确的，但它输出了这个混乱：

```
[(range(0, 6),), (range(0, 2),), (range(0, 4),), (range(0, 2),)] 
```

我不知道如何解决它。[这里](https://stackoverflow.com/questions/171765/what-is-the-best-way-to-get-all-the-divisors-of-a-number "这里")有一篇文章为我正在尝试做的事情提供了极好的解决方案。我只是想用我所知道的向他们努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:14:10.383

`product`返回其参数的乘积，并且您已将其传递给它一个，即 `(range(i+1) for i in divPair.values())`生成器。生成器产生了一个`range`对象列表。就像这样做：

```
>>> list(product(['range', 'range', 'range']))
[('range',), ('range',), ('range',)] 
```

您必须将范围作为单独的参数传递。

做这个：

```
list(product(*[range(i+1) for i in divPair.values()])) 
```

（或这个）

```
list(product(*(range(i+1) for i in divPair.values()))) 
```

# c++ - For循环中的switch语句无法检查某些值的变量

> ID：15347691
> 
> 赞同：0
> 
> 时间：2013-03-11T20:12:15.833
> 
> 标签：c++, collision-detection, game-physics, sfml

正如标题所暗示的，我遇到了一个`switch`语句未能检查循环`i`内的变量`for`某个值的问题。下面的布尔函数模拟两个精灵之间的定向边界框碰撞，`i`变量代表定向边界框的每个面。但是，当函数返回时`false`，`i`仅在值`0`和处检查`1`，而当函数返回时`true`，`i`仅在值`2`和处检查`3`。

我不知道是`for`循环还是`switch`语句导致了这个错误，我已经仔细检查了碰撞是否在定向边界框的所有面上都有效，我可以确认它确实完美无缺。任何形式的帮助将不胜感激！

碰撞.cpp：

```
bool Collision::orientedBoundingBoxTest(const sf::Sprite &object1, const sf::Sprite &object2, int object1Width, int object1Height, int object2Width, int object2Height)
{
    /*Variables assigned and declared here*/

    for (int i = 0; i < 4; i++)
    {
        float faceX = collisionObject1.getPoint(i).x - collisionObject1.getPoint((i + 1) % 4).x;
        float faceY = collisionObject1.getPoint(i).y - collisionObject1.getPoint((i + 1) % 4).y;

        float perpendicularAxisX = -faceY;
        float perpendicularAxisY = faceX;

        float normalizedAxisLength = sqrt(perpendicularAxisX * perpendicularAxisX + perpendicularAxisY * perpendicularAxisY);
        perpendicularAxisX /= normalizedAxisLength;
        perpendicularAxisY /= normalizedAxisLength;

        float object1Min = std::numeric_limits<float>::max(), object1Max = -object1Min;
        float object2Min = std::numeric_limits<float>::max(), object2Max = -object2Min;

        for(int j = 0; j < 4; j++)
        {
            float object1Projection = (perpendicularAxisX * (collisionObject1.getPoint(j % 4).x + collisionObject1.getPosition().x) + perpendicularAxisY * (collisionObject1.getPoint(j % 4).y + collisionObject1.getPosition().y)) / (perpendicularAxisX * perpendicularAxisX + perpendicularAxisY * perpendicularAxisY);
            object1Min = min(object1Projection, object1Min);
            object1Max = max(object1Projection, object1Max);
        }

        for(int j = 0; j < 4; j++)
        {
            float object2Projection = (perpendicularAxisX * (collisionObject2.getPoint(j % 4).x + collisionObject2.getPosition().x) + perpendicularAxisY * (collisionObject2.getPoint(j % 4).y + collisionObject2.getPosition().y)) / (perpendicularAxisX * perpendicularAxisX + perpendicularAxisY * perpendicularAxisY);
            object2Min = min(object2Projection, object2Min);
            object2Max = max(object2Projection, object2Max);
        }

        switch (i) //Switch statement failing to check "i" variable at certain values
        {
        case 0:
            deltaY = -(object1Max - object2Min);
            break;
        case 1:
            deltaX = object1Min - object2Max;
            break;
        case 2:
            deltaY = object1Min - object2Max;
            break;
        case 3:
            deltaX = -(object1Max - object2Min);
            break;
        }

        if (! (object1Max >= object2Min && object1Min <= object2Max))
            return false;
    }
    return true;
} 
```

引擎.cpp：

```
void Engine::physics(sf::RenderWindow& _window)
{
    for (int i = 0; i < 5; i++)
    {
        if (collision.orientedBoundingBoxTest(collisionArray[i].collisionObjectSprite, player.playerSprite, collisionArray[i].width, collisionArray[i].height, player.width, player.height))
        {
            currentCollisionObjectIndex = i;
            player.hitTest = true;
            break;
        }
        else
        {
            player.hitTest = false;
        }
    }

    /*Additional code here*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:21:35.440

在我看来，你的结论是错误的，放在s`cout << i << endl;`之间`case`，并确保你的结果。

我确信每个`0..3`迭代都会在每个迭代 ot 上遇到`i`，除非`return`调用该语句。

```
 switch (i)
    {
    case 0:
        deltaY = -(object1Max - object2Min); cout << i << endl;
        break;
    case 1:
        deltaX = object1Min - object2Max; cout << i << endl;
        break;
    case 2:
        deltaY = object1Min - object2Max; cout << i << endl;
        break;
    case 3:
        deltaX = -(object1Max - object2Min); cout << i << endl;
        break;
    } 
```

# javascript - 通过鼠标操作更改浏览器文本输入时做出反应

> ID：15347692
> 
> 赞同：1
> 
> 时间：2013-03-11T20:12:16.923
> 
> 标签：javascript, jquery

我有一个文本输入字段和一个复选框。当且仅当在文本字段中有输入时，必须禁用该复选框。我有一个适用于大多数情况的解决方案：

HTML：

```
<input type="text" id="search" />
<input type="checkbox" id="cb" />
<label for="cb">Enabled only if no search term</label> 
```

jQuery：

```
$('#search').keyup(function (e) {
    var enable = $(this).val() == 0;
    if (enable) {
        $('#cb').removeAttr('disabled');
    } else {
        $('#cb').attr('disabled', 'disabled');
    }
}); 
```

[在 jsFiddle 上](http://jsfiddle.net/ericjohannsen/WDMCX/)看到它。

这适用于使用键盘键入或删除文本以及使用键盘粘贴文本时。

如果用户使用右键单击上下文菜单粘贴文本，或者用户按下 IE 添加到输入字段以允许清除输入字段的小“X”，则会失败。

**问题**

如何改进代码，使其也适用于这些场景？等待文本框失去焦点会提供较差的用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:07:16.420

[实时验证](http://www.zurb.com/playground/jquery-text-change-custom-event)jQuery 插件解决了这个问题。但是，它目前[似乎](https://stackoverflow.com/q/15348467/141172)不适用于委托事件。

> 实现这一点需要将事件绑定到 keyup 事件，如果您想检测剪切和粘贴时的文本更改，还需要几个其他事件。即使你是 JavaScript 大神，一遍又一遍地编写这个逻辑也是乏味的。聪明点，改用 ZURB 文本更改事件插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:19:13.687

您可以使用jquery更改方法：

[http://jsfiddle.net/WDMCX/1/](http://jsfiddle.net/WDMCX/1/)

```
$('#search').change(function() {

    if( $(this).val() === '' ){
        $('#cb').attr('disabled', 'disabled');
    } else {
        $('#cb').removeAttr('disabled');
    }

}); 
```

# wpf - 如何重用 wpf 视图？

> ID：15347693
> 
> 赞同：1
> 
> 时间：2013-03-11T20:12:18.007
> 
> 标签：wpf, caliburn.micro

有没有办法通过 Caliburn.Micro 重用 WPF 视图？

在示例中，我有一个带有 SaveAndClose 和 Cancel 按钮的 DetailViewBase.xaml。现在我想在 PersonView(Model) 中使用 DetailViewModelBase 和 XAML。

我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:24:23.030

如果我的假设是正确的，我认为您的意思是您想从几个更简单的视图模型中“组合”一个更复杂的视图。您可以从视图模型继承，但显然视图模型一次只能有一个活动视图。

但是，使用绑定，您可以组合多个视图模型，并让它们一起呈现各自的视图，以制作更复杂的 UI

例如

带有保存/取消按钮的虚拟机

```
public class ActionsViewModel
{
    public void Save()
    {
    }

    public void Cancel()
    {
    }
} 
```

对应视图：

```
<UserControl>
   <StackPanel Orientation="Horizontal">
       <Button x:Name="Save">Save</Button>
       <Button x:Name="Cancel">Cancel</Button>
   </StackPanel>
</UserControl> 
```

组成自己的另一种观点和`ActionsViewModel`

```
public class ComposedViewModel
{
    public ActionsViewModel ActionsView
    {
        get; set;
    }

    public ComposedViewModel()
    {
        ActionsView = new ActionsViewModel();
    }      

    public void DoSomething()
    {
    }
} 
```

风景：

```
<UserControl>
   <StackPanel Orientation="Horizontal">
       <TextBlock>Hello World</TextBlock>
       <Button x:Name="DoSomething">Do Something</Button>
       <ContentControl x:Name="ActionsView" />
   </StackPanel>
</UserControl> 
```

当您使用约定绑定（或使用附加属性）来绑定`ContentControl`CM 时，会自动将 VM 绑定到`DataContext`并连接视图。通过这种方式，您可以将多个 VM 组合成一个更复杂的功能。

此外，由于动作消息冒泡 - 如果您要删除 'Ok' 和 'Cancel' 实现`ActionsViewModel`并将它们放入`ComposedViewModel`实现中，则动作消息将冒泡到`ComposedViewModel`实例并在那里触发方法

例如

```
public class ActionsViewModel
{
    // Remove the command handlers
}

public class ComposedViewModel
{
    public ActionsViewModel ActionsView
    {
        get; set;
    }

    public ComposedViewModel()
    {
        ActionsView = new ActionsViewModel();
    }      

    public void DoSomething()
    {
    }

    // CM will bubble the messages up so that these methods handle them when the user clicks on the buttons in the ActionsView
    public void Save()
    {
    }

    public void Cancel()
    {
    }
} 
```

编辑：

抱歉，我忘记了这一点 - 基于约定的绑定不允许消息冒泡，但您可以使用`Message.Attach`附加的属性使其工作：

```
// Make sure you include the caliburn namespace:
<UserControl xmlns:cal="http://www.caliburnproject.org">
   <StackPanel Orientation="Horizontal">
       <Button x:Name="Save" cal:Message.Attach="Save">Save</Button>
       <Button x:Name="Cancel" cal:Message.Attach="Cancel">Cancel</Button>
   </StackPanel>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:37:45.780

您可以使用如下代码将 ViewModel 显式绑定到 View：

```
cal:Bind.Model={Binding DetailViewModelBase} 
```

# c# - 如何在 List 中获取不区分大小写的匹配项 ?

> ID：15347696
> 
> 赞同：7
> 
> 时间：2013-03-11T20:12:18.687
> 
> 标签：c#, .net-4.0

我有一个列表中的单词列表。使用 .Contains()，我可以确定一个单词是否在列表中。如果我指定的单词在列表中，我如何从列表中获取单词的区分大小写的拼写？例如，当单词是“磷酸钠”但列表包含“磷酸钠”时，.Contains() 为真。如何执行不区分大小写的搜索（“磷酸钠”）但从列表中返回区分大小写的匹配项（“磷酸钠”）？

我更喜欢避免使用键为大写且值正确大小写的字典，反之亦然。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T20:14:34.203

你想要这样的东西：

```
string match = list.FirstOrDefault(element => element.Equals(target, 
                                     StringComparison.CurrentCultureIgnoreCase)); 
```

如果找不到匹配项，这将`match`作为`null`参考。

（您可以使用[`List<T>.Find`](http://msdn.microsoft.com/en-gb/library/x0b5b5bc.aspx)，但 using`FirstOrDefault`使代码更通用，因为它可以在*任何*字符串序列上使用 -`using System.Linq;`在文件顶部使用指令。）

 *请注意，我假设列表中没有空元素。如果您想处理这个问题，您可能需要使用静态方法调用：`string.Equals(element, target, StringComparison.CurrentCultureIgnoreCase)`.

另请注意，我假设您想要一个文化敏感的比较。请参阅[`StringComparison`](http://msdn.microsoft.com/en-gb/library/system.stringcomparison.aspx)其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:20:28.663

考虑具有不区分大小写比较的[字典是否适合您。](http://msdn.microsoft.com/en-us/library/ms132072.aspx)除非您关心单词的顺序，否则您`Dictionary`的查找性能会比列表好得多。

```
Dictionary<string, string> openWith = 
      new Dictionary<string, string>( 
         StringComparer.CurrentCultureIgnoreCase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T09:10:42.637

您也可以`StringComparer`在列表中使用

```
if (listOfValues.Contains(value, StringComparer.OrdinalIgnoreCase)) 
```*

# javascript - 更改父类 onfocus

> ID：15347699
> 
> 赞同：1
> 
> 时间：2013-03-11T20:12:33.103
> 
> 标签：javascript, javascript-events

我有一个字段，我希望选择其中一个输入框来更改字段的背景颜色。我的尝试是通过简单的 onfocus 操作更改输入的父级（即字段）的 html 类，但我没有看到任何反应。

我有以下内容，并仔细检查了类名。

在脚本中：

```
function changefield()
{
document.getElementById(this.parentNode).className = "temp_field";
} 
```

在 html 中：

```
<input class="type1" type="text" size="30" onFocus="changefield()"> 
```

这感觉就像我犯了一些相当明显的初学者错误，但我已经有两个人玩它无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:15:54.590

两件事情：

*   里面`changefield`,`this`指的是`window`，它没有`parentNode`属性，所以你传递`undefined`给`getElementById`。
*   即使它有一个父节点，`this.parentNode`也会返回一个 DOM 节点，而`getElementById`需要一个字符串。

一个快速的解决方案是将要修改的 DOM 元素传递给函数：

```
function changefield(element) {
    element.className = "temp_field";
} 
```

和

```
onFocus="changefield(this.parentNode)" 
```

`.parentNode`即使父节点有一个 ID，如果您已经有对 id ( )的引用，则搜索该节点也没有意义。

有关事件处理以及如何绑定事件处理程序的更多信息，请查看[quirksmode.org 上的优秀文章](http://www.quirksmode.org/js/introevents.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:15:19.583

你正在传递`this.parentNode`给`getElementById()`.

`getElementId()`需要一个 id 字符串作为参数（不是 DOM 元素）。

# php - 将错误从 exec() 转发到文件

> ID：15347700
> 
> 赞同：1
> 
> 时间：2013-03-11T20:12:36.790
> 
> 标签：php, exec, command-line-interface

我正在使用`exec()`. 如何将回显到一个文件中的任何内容和所有错误发送到另一个文件中？

这是我目前拥有的：

```
exec("$php_locataion $cwd/phpExcel.php \"$data\" > $cwd/phpExcel.txt &"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:14:04.247

使用此语法：

```
exec("$php_locataion $cwd/phpExcel.php \"$data\" > $cwd/phpExcel.txt 2>error.txt &"); 
```

这里`2>error.txt`会将stderr 重定向到文件error.txt。

# apache - .htaccess 中的 ModPagespeed 域动态 url

> ID：15347701
> 
> 赞同：0
> 
> 时间：2013-03-11T20:12:38.140
> 
> 标签：apache, .htaccess, pagespeed, mod-pagespeed

我目前在我的 .htaccess 中为 Pagespeed 使用这段代码：

```
<IfModule pagespeed_module>
ModPagespeedDomain cdn.example.com
ModPagespeedMapRewriteDomain cdn.example.com *example.com
</IfModule> 
```

我想要这样的东西（不起作用）：

```
<IfModule pagespeed_module>
ModPagespeedDomain cdn.%{HTTP_HOST}
ModPagespeedMapRewriteDomain cdn.%{HTTP_HOST} *%{HTTP_HOST}
</IfModule> 
```

我正在寻找一种方法来保持这些变量动态，这样我就不必为每个客户手动添加它。如果有办法将所有内容保存在 .htaccess 中，我也会尝试避免创建 PHP 脚本来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T15:36:57.853

PageSpeed 目前没有办法让您更轻松，抱歉！解释`%{VARIABLE}`s 将是一个很好的添加功能。

# php - 在类中使用 memcache

> ID：15347704
> 
> 赞同：0
> 
> 时间：2013-03-11T20:12:43.353
> 
> 标签：php, mysql, memcached

所以我昨天才开始学习如何使用memcache。所以还有很多事情要做。到目前为止，我已经了解了如何安装它，并看到了一些关于如何使用它的教程。但他们都解释了如何静态地输入它。我在类中执行所有数据库查询，并通过 foreach 循环返回的数据运行。我让它工作没有任何编译错误，但内存缓存实际上不会工作。我很困惑为什么。我的班级是这样设置的。

```
class Feed extends Database
{
private $Memcache;

public function __construct()
{
    parent::__construct();
    $this->Memcache = new Memcache;
} //end __construct

public function getFeed ($var)
{
    $feed = array(); //Initialize an empty array

    $this->Memcache->connect('localhost', 11211);
    $key = "SELECT col FROM table WHERE value = " . $var . " ORDER BY timestamp DESC LIMIT 30";
    $cache = $this->Memcache->get($key);
    if ($cache)
    {
        $feed = '';
    }
    else
    {
        //Query the database
        $Statement = $this->Database->prepare("SELECT col FROM table WHERE value = ? ORDER BY timestamp DESC LIMIT 30");
        $Statement->execute(array($var));

        while($row = $Statement->fetch(PDO::FETCH_ASSOC))
        {
            $feed[] = array("row1" => $row["col1"], 
                            "row2" => $row["col2"] );

        }

        $this->Memcache->set($key, $row, 0, 40); // Store the result of the query for 40 seconds
    }

    return $feed;
} //end getFeed
} //end Feed 
```

输出设置如下

```
<?php foreach ($Feed->getFeed($var) as $feed): ?>

    <p><?php echo $feed["row1"]; ?></p>

<?php endforeach; ?> 
```

所以很明显，如果 memcache 正在工作，它们将是一个编译错误，因为我使用 foreach 循环运行 $feed。由于我对 memcache 的了解有限，你们中的任何人都知道它为什么不检索数据。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:29:16.400

来自 Memcache[协议描述](https://github.com/memcached/memcached/blob/master/doc/protocol.txt)：

> ## 钥匙
> 
> memcached 存储的数据是在密钥的帮助下识别的。密钥是一个文本字符串，它应该为有兴趣存储和检索数据的客户唯一标识数据。目前密钥的长度限制设置为 250 个字符（当然，通常客户端不需要使用这么长的密钥）；键不得包含控制字符或空格。

您的密钥包含空格字符，因此失败。您可以检查这一点，因为 Memcache::set() 在失败时返回 FALSE。

防止这种情况的简单方法：从您的 $key 创建一个 MD5 哈希并将其用作 $key：

```
$key = md5("SELECT col FROM table WHERE value = " . $var . " ORDER BY timestamp DESC LIMIT 30"); 
```

*注意：Memcache 值不能大于 1MB。*

# php - vqmod 和替换 php if 语句中的代码

> ID：15347706
> 
> 赞同：1
> 
> 时间：2013-03-11T20:12:48.733
> 
> 标签：php, xml, opencart

我正在尝试创建一个 vqmod 文件来替换 if 语句中的一些文本（目录/视图/主题/主题名/模板/产品/产品.tpl）：

```
<file name="catalog/view/theme/*/template/product/product.tpl">
  <operation>
    <search position="replace"><![CDATA[<a href="#tab-related"><?php echo $tab_related; ?> (<?php echo count($products); ?>)</a>]]></search>
    <add><![CDATA[<a href="#tab-related" class="testing"><?php echo $tab_related; ?> (<?php echo count($products); ?>)</a>]]></add>
  </operation>      
</file> 
```

似乎如果一行代码在 if 语句中，vqmod 不会替换它。但这在[vqmod 脚本 wiki](https://code.google.com/p/vqmod/wiki/Scripting)中没有说明。我在这里错了吗？还是我错过了什么？

无论哪种方式，有什么方法可以让这个 vqmod 工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:23:59.793

```
<file name="catalog/view/theme/*/template/product/product.tpl">
  <operation>
    <search position="replace"><![CDATA[<a href="#tab-related">]]></search>
    <add><![CDATA[<a href="#tab-related" class="testing">]]></add>
  </operation>      
</file> 
```

您不需要匹配整行。`<a>`您可以像我上面那样简单地匹配开始标签

# svg - 将矢量填充模式转换为显式对象

> ID：15347707
> 
> 赞同：2
> 
> 时间：2013-03-11T20:12:51.977
> 
> 标签：svg, postscript

我正在创建一些用于光刻的掩模，这些掩模在 4"x4" 的跨度上具有 50 µm 的特征阵列。

将我的蒙版对象隐式表示为填充图案的 SVG 文件是微不足道的：

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="4in" xmlns="http://www.w3.org/2000/svg" version="1.1" height="4.25in">
<defs>
  <pattern height="0.100000mm" width="0.100000mm" patternUnits="userSpaceOnUse" y="0" x="0" id="tile">
    <rect y="0" width="0.100000mm" fill="black" x="0" height="0.100000mm" />
    <rect y="0.025000mm" width="0.050000mm" height="0.050000mm" x="0.025000mm" fill="white" />
  </pattern>
</defs>

<rect y="0" width="4in" height="4in" x="0" fill="url(#tile)" />
<text font-size="6pt" y="4.1in" x="0.1cm" font-family="Consolas">50 µm squares, 50 µm pitch; tds 3/6/13</text>

</svg> 
```

我们的打印提供商说他们可以获取 EPS 文件。在 Illustrator 中进行从 SVG 到 EPS 的往返可以正常工作，但生成的 EPS 文件仍然隐含表示蒙版特征，并且印刷厂说他们看不到任何东西。我认为我需要明确表示每个功能，而不是使用填充模式。

将矢量填充模式转换为显式渲染的矢量对象的最佳方法是什么（使用 Postscript？）？我可以手动生成 SVG，但天哪，那将是一个巨大的文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:53:26.127

您应该能够通过选择“对象”>“扩展”（确保选择“填充”）将其从 Illustrator 中的图案转换为实际的矢量数据。请注意，这将生成**许多**路径，并且您生成的文件确实应该很大。

# node.js - MongoDB 的 Node.js 驱动程序是否支持作为选择器的函数？

> ID：15347709
> 
> 赞同：0
> 
> 时间：2013-03-11T20:12:54.533
> 
> 标签：node.js, mongodb, node-mongodb-native

[Node.js mongoDB](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#find)驱动程序是否支持/操作中的[`$where`](http://docs.mongodb.org/manual/reference/operator/where/)谓词？它似乎适用于常规，但我收到其他操作的意外结果（误报）。`remove(…)``count(…)``find(…)`

# asp.net-mvc - 带有文件扩展名的 ASP.NET MVC 路由不再在生产中工作

> ID：15347711
> 
> 赞同：2
> 
> 时间：2013-03-11T20:12:57.350
> 
> 标签：asp.net-mvc, iis, azure, asp.net-mvc-routing

我有一个在 Azure 上运行的 ASP.NET MVC 4 应用程序。我有一些看起来像文件名的自定义路由（即“favicon.ico”）。这些类似文件名的路由在过去 2 年中运行良好，没有出现任何问题。但是，当我从 Azure SDK 1.7 升级到 1.8 时，这些类似文件名的路由停止工作。

它在带有 IIS express 的本地调试环境中运行良好，因此它似乎不是 web.config 文件或 RouteCollection 问题。

我们将“runAllManagedModulesForAllRequests”设置为“true”和“RouteTable.Routes.RouteExistingFiles = true”。此外，这些类似文件的路由在磁盘上不存在。

我在升级前和升级后的机器上检查了失败的请求跟踪日志。它们看起来很相似，只是工作升级前部署有一个从“StaticFile”到“System.Web.Mvc.MvcHandler”的FREB“HANDLER_CHANGED”事件，而错误的升级后部署从来没有（它与“StaticFile”保持一致" handler) 并最终发送一个 404。

因此，如果 UrlRoutingModule 具有扩展名并因此不提供 MvcHandler，则它似乎不再正确解析路由。但是，所有非扩展路由都工作正常（即“一些/测试”），因此即使在 FREB 日志中我在“UrlRoutingModule-4.0”模块。

我错过了一些基本的东西吗？我接下来应该看哪里？

**更新：**将我们的 ServiceConfiguration.Cloud.cscfg 升级到“osFamily”3（Windows Server 2012），因此 IIS 8 也解决了这个问题。我不确定发生了什么，但很高兴它不再存在。我很想在评论或其他答案中听到进一步的调试见解，这可能对此类情况有所帮助，因为 FREB-ing 并没有我希望的那么有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:52:37.950

刚刚查看了我们的配置和服务器。我们通过更新到 SDK 1.8 切换到 Server 2012。我们使用 Server2012-> osFamily="3" osVersion="*" schemaVersion="2012-10.1.8" 并毫无问题地提供动态 XML（即 sitemap.xml）：

*   “runAllManagedModulesForAllRequests”设置为“真”
*   我们**没有**指定 RouteTable.Routes.RouteExistingFiles

路由配置如下：

```
routes.MapRoute(
    "sitemap.xml",
    "sitemap.xml",
    new { controller = "Sitemap", action = "sitemap.xml" }
); 
```

并且 Action 方法装饰有：

```
[ActionName("sitemap.xml")] 
```

# asp.net - 为什么这个 ASP.Net 代码隐藏中的 if 语句不起作用？

> ID：15347715
> 
> 赞同：3
> 
> 时间：2013-03-11T20:13:09.130
> 
> 标签：asp.net, drop-down-menu, controls

我有一个用整数填充的下拉列表。When "1" is selected, a text box is supposed to appear. 我在另一个项目中做过类似的事情，但在这里行不通。

任何帮助表示赞赏。

C#代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ddlHowMany.Items.Add(new ListItem("0", "0"));
        ddlHowMany.Items.Add(new ListItem("1", "1"));
        ddlHowMany.Items.Add(new ListItem("2", "2"));
        ddlHowMany.Items.Add(new ListItem("3", "3"));
    }
}

protected void ddlHowMany_SelectedIndexChanged(object sender, EventArgs e)
{
    // int howMany = Convert.ToInt32(ddlHowMany.SelectedValue);
    if (ddlHowMany.SelectedIndex == 1)
    {
        txtGraphic1Desc.Visible = true;
    }
} 
```

默认.aspx 代码：

```
 <asp:DropDownList ID="ddlHowMany" runat="server"  
                    onselectedindexchanged="ddlHowMany_SelectedIndexChanged" 
                    style="margin-left: 8px" Width="50px">
                </asp:DropDownList>
                <br />
                <br />
                <asp:TextBox ID="txtGraphic1Desc" class="descriptions" runat="server" Height="92px" 
                    TextMode="MultiLine"
                    Width="328px" Font-Names="Trebuchet MS" Visible="False">Description of graphic #1</asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:16:09.397

您想将[autoPostBack="true"](http://www.ezineasp.net/post/ASP-Net-DropDownList-OnSelectedIndexChanged-Event.aspx)添加到下拉列表。

```
 <asp:DropDownList ID="ddlHowMany" runat="server"  
                    onselectedindexchanged="ddlHowMany_SelectedIndexChanged" 
                    style="margin-left: 8px" Width="50px" AutoPostBack="true"> 
```

# sql-server - 将生产复制到测试环境，每个环境中有 2 个服务器

> ID：15347720
> 
> 赞同：1
> 
> 时间：2013-03-11T20:13:28.867
> 
> 标签：sql-server, sql-server-2008, replication

我总共有 4 台服务器。**生产端有从EARTH**到**TR**的实时复制。开发端有从**KOHOUTEC**到**CROMELIN**的实时复制。我想拍一张从 EARTH 到 KOHOUTEC 的快照。

当我设置它时，我收到一个错误：

> 无法删除表“dbo.SomeTable”，因为它正在用于复制。

谷歌搜索，我发现了这个：http: [//support.microsoft.com/kb/326352](http://support.microsoft.com/kb/326352)。

那篇文章使用这个脚本：

```
sp_configure 'allow updates', 1
go
reconfigure with override
go
begin transaction
update sysobjects set replinfo = 0 where name = 'object_name'
commit transaction
go
sp_configure 'allow updates', 0
go
reconfigure with override
go 
```

但它也有一些非常严重的警告：

> **重要提示：**当对象被标记为要复制时，3724 消息可能会合法出现。如果对象正在用于复制，请不要使用以下解决方法。

和：

> **重要信息：**在数据库上运行 sp_removedbreplication 会从数据库中删除所有复制对象。因此，数据库中的所有发布和订阅都将被删除。

所以我对这样做有点紧张是可以理解的，特别是因为我不是 100% 确定首先发生了什么。

归根结底，我想要的只是让开发环境拥有生产环境的每晚副本。如果复制不是这样做的方法，我愿意接受任何建议。

谢谢！

# ms-access - 多对多访问

> ID：15347722
> 
> 赞同：1
> 
> 时间：2013-03-11T20:13:42.990
> 
> 标签：ms-access

我正在尝试摆脱现实世界的多对多关系（并且因为无法做到而感到愚蠢），或者找到将其输入 Access 的正确方法。我已经尝试了几种连接表设置，但似乎只是将多对多问题传递给另一个表。

以下是两个表的缩略示例：

表格1：

```
Amp_Number      Amp_S.Name
103             Rag1
194             Osd4
230             Lew6
321             Ooi4
550             Qwd3
629             Crd5
687             Rab4
879             Pra2 
```

表 2：

```
Plas_Number         Plas_Amp
55                  Rab4
82                  Osd4 & Qwd3 & Lew6
94                  Rab4 & Rag1 & Ooi4
102                 Ooi4 & Lew6
125                 Pra2 & Rag1 & Crd5
142                 Qwd3 & Ooi4 & Rag1
146                 Lew6 & Osd4 & Rab4
154                 Rab4 & Lew6 & Ooi4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:20:46.913

`Plas_Number`您需要一个将 to 映射到的联结表`Amp_Number`，它可以为表 1 或表 2 提供一条或多条记录：

表格1：

```
Amp_Number      Amp_S.Name
103             Rag1
194             Osd4
230             Lew6
321             Ooi4
550             Qwd3
629             Crd5
687             Rab4
879             Pra2 
```

表 2：

```
Plas_Number
55
82
94
102
125
142
146
154 
```

连接表：

```
Plas_Number    Amp_Number
55             687
82             194
82             550
82             230
etc. 
```

*   表 1 和连接表之间是一对多的
*   表 2 和连接表之间是一对多的

# php - PHP：活跃用户

> ID：15347723
> 
> 赞同：2
> 
> 时间：2013-03-11T20:13:55.517
> 
> 标签：php, login

我刚遇到一个问题。我目前正在为学校做一个项目，我希望在侧边栏中拥有所有活跃用户（类似于聊天，但不是）。

首先我想到了这个（伪代码）：

```
<?php
    ...
    class user {
        //Some instance vars.

        public function __construct(){
            //Write username in a textfile/database
        }
        public function logout {
            //Delete username from textfile/database
        }
    }
    ...
?> 
```

问题是：

1）用户对象存储在`$_SESSION[]`数组中。所以我不能使用魔法方法`__destruct()`。这就是我制作`logout()`方法的原因。（问题解决了^^）

2) 如果我们假设用户使用相同的 ID 在 2 台设备（例如笔记本电脑、智能手机）上登录并且他退出了一台设备上的会话，那么另一台设备也将被删除。

3）用户可能不想按注销，而只是关闭浏览器窗口。我怎么知道，他注销/退出会话。

我知道，PHP 不是这种任务的最佳编程语言，但我真的很想用 PHP 来做这个项目。如果这个问题已经被问过，我真的很抱歉，但我仔细搜索了所有相关问题，所有这些问题（或多或少）都与我的不同。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:19:25.110

我认为更好的方法（也是通常使用的方法）是有一个包含两列的表。用户 ID 和用户上次在站点上处于活动状态的时间。

您会在登录时更新此表，并可能在每次用户加载页面或在网站上执行一些重要操作时保持更新。

为了显示谁在线，您可以在此表中查询在过去 N 秒/分钟内活跃的任何用户。

您可能希望添加一个“清理”作业，将用户从上次活动超过（>N）秒/分钟前的表中删除，以防止该表变得太大。

# python - 线程与线程模式

> ID：15347725
> 
> 赞同：0
> 
> 时间：2013-03-11T20:14:03.313
> 
> 标签：python, multithreading

关于这个主题有几个问题，但我找不到我的问题的答案。甚至 python 文档也没有那么描述性。

我的问题很简单：我想将一个巨大的列表分成几部分并并行处理每一部分。

所以我的问题是解释器是等到所有线程都完成后再启动程序的下游行（在我的情况下 - 合并处理列表）还是我必须将下游进程定义为单独的线程并使用`join`.

虽然，我阅读了有关该主题（[线程与线程](https://stackoverflow.com/questions/5568555/thread-vs-threading)）的帖子，但我仍然不太了解`thread`和之间的区别`threading`。

请指导我阅读有关该主题的好文章。文档信息量不大。

PS（@zzk）所以即使我使用多处理，在所有进程结束后我将如何执行公共代码？例如，5 个进程产生 5 个列表。现在我必须合并这些列表，排序并写入文件。

[*代码不准确，仅用于说明情况*]

```
def fun(x,y):
    y=someprocessing(x) #type(y)=List

if __name__ == '__main__':
    for i in listofprocesses:
        p = Process(target=fun, args=(i,y))
        p.start()

# DOWNSTREAM CODE#
yy=y1+y2+y3+y4+y5; 
yy.sort()
for j in yy:
    outfile.write(j) 
```

我想将`y`不同流程产生的产品组合起来进行合并。这里有两个疑问：

1.  由于变量名相同，我是否必须将输出列表 ( `y`) 作为参数传递

2.  假设是这样，并且所有处理的列表都保存为`y1,y2,y3,y4`& `y5`，将执行下游代码。如何确保所有流程都已结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:15:33.037

[由于GIL](http://wiki.python.org/moin/GlobalInterpreterLock)，线程或线程不会帮助您。

> 在 CPython 中，全局解释器锁或 GIL 是一个互斥锁，可防止多个本机线程同时执行 Python 字节码。这个锁是必要的，主要是因为 CPython 的内存管理不是线程安全的。

您可能需要[多处理](http://docs.python.org/2/library/multiprocessing.html)

# c# - 分组专家导致锁定

> ID：15347732
> 
> 赞同：0
> 
> 时间：2013-03-11T20:14:19.503
> 
> 标签：c#, .net, visual-studio, crystal-reports

我正在编写 Visual Studio/Crystal Reports (2005) 中的报告。每当访问分组专家时，开发环境就会锁定。当我尝试直接打开它时，以及尝试使用设计专家生成新报告时，都会发生这种情况。

我以前做过很多水晶报表，没有这个麻烦。当我重新访问现有报告时会发生锁定。

我不知道如何找到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:23:40.227

原因是专家对话框在以前的情况下被移到了第二个屏幕。一旦我发现了这一点，就很容易将其移回视野。（Alt-Space，选择移动，用箭头键移动它。）

我使用 Bing 在 Microsoft Q/A 网站上找到了解决方案。毫不奇怪，我发现 Bing 比 Google 对 MS 数据的覆盖率更高。

# ibm-mobilefirst - 注册用户..按钮未显示

> ID：15347733
> 
> 赞同：0
> 
> 时间：2013-03-11T20:14:24.440
> 
> 标签：ibm-mobilefirst

这是 Worklight 服务器 5.0.5。

在 Worklight 应用程序中心的用户/组选项卡下，当我单击左侧面板上的“已注册用户”选项时，未显示注册用户 ... 按钮。任何想法？

请注意，当我单击左侧面板上的“用户组”选项时，我确实看到了创建组...按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:30:07.690

如果 Worklight Application Center 配置为使用 LDAP，那么不会显示此按钮。事实上，在这种情况下，用户是直接从 LDAP 中检索的。否则应显示此按钮以注册在服务器中声明的用户。

希望这有帮助，

达米安

# html - 居中 div 而不增加它们的大小并将标题与文本保持在一起？

> ID：15347735
> 
> 赞同：0
> 
> 时间：2013-03-11T20:14:33.567
> 
> 标签：html, css, layout

我意识到我在这里问了两个不同的问题，但由于我对 HTML 和 CSS 缺乏经验，我觉得它们是相互关联的。如果不出意外，我不确定如何提出一个问题，同时确保我得到的答案与另一个问题兼容。

所以，这里是：

我正在制作一个小型计算器，它需要在不同的窗口大小下看起来不错。我有一些按钮分组，它们都需要放在一起，而不同的分组会根据窗口大小移动。下面是“良好行为”的截图：

![截图 1](../Images/ed20d55fcabce7e71ae6f691e9122cbb.png)

内容与标题一起，并且没有奇怪的空格。

然后我们得到下一个行为：在窗口宽度发生微小变化时，一些材料被向下移动，但不是整个 div - 标题保持：

![截图 2](../Images/a10871a1bd9a2dfbacbaf2d07ca06a65.png)

如何使标题跟随内容向下？

最后，当窗口宽度变得更小时，标题也会向下移动：

![在此处输入图像描述](../Images/5e0257a85aa0b686ffb85652a4a3a28d.png)

这种行为很好，但我希望顶部的剩余内容能够利用额外的空间并水平居中。知道怎么做吗？我看过一些问题，例如[如何使用 CSS 轻松地将 <div> 水平居中？](https://stackoverflow.com/questions/618097/how-do-you-easily-horizontally-center-a-div-using-css)，但它们似乎都需要增加我想要居中的元素的宽度，这破坏了屏幕截图 #1 中的行为。

在这里可以看到一个例子：

![截图 4](../Images/57407421efca159efed2b7aa864809c1.png)

如何在不影响 #1 的情况下修复屏幕截图 #2 和 #3？

我当然也做了一个小提琴，但我认为截图会更好：

[http://jsfiddle.net/eEPmw/](http://jsfiddle.net/eEPmw/)

其中是：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      .incbut,.decbut,.rollButton{
        background-color:#FF961F;
      }
      .regular-checkbox{
        border-color:#FF961F;
      }

      body {
        background-color:#FCB41B;
        color:#753B08;
      }

      .modifiers{
        text-align:left;
        min-width:8em;
      }
      .center{
        margin-left:auto;
        margin-right:auto;
      }
      .inputField {
        max-width:2em;
        border:1px #bababa solid;
        vertical-align:middle;
        text-align:center;
      }
      .incbut,.decbut {
        border: 1px transparent solid;
        display: inline-block;
        text-align: center;
        vertical-align: middle;
        cursor: pointer;
        padding: 4px 10px;
        position: relative;
        width: 2.5em;
      }
      .rollButton{
        border: 1px transparent solid;
        display: inline-block;
        text-align: center;
        vertical-align: middle;
        cursor: pointer;
        padding: 4px 10px;
        position: relative;#FF0000
      }
      button:active{
        background-color:#FF0000;
      }
      .fieldCol{
        float:left;
        text-align:center;
        max-width=45%;
        height:9em;
      }
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .incbut,.inputField, .decbut{
        min-height:2em;
        margin-right:0.5em; 
        margin-bottom:0.3em; 
      }
      h2{
        margin:0.1em;
        font-weight:500;
      }
      h2,button, input{
        font-family:inherit;
      }
      .outputField{
        padding:2px;
        margin:3px;
        border:1px #753B08 solid;
        width=2em;
        line-height:1.7em;
        white-space:nowrap; 
      }
      label {
        display: inline;
      }
      .checkBoxLabel{
        margin-left:5px;
        font-size:90%;
      }
      .regular-checkbox {
        display: none;
      }
      .regular-checkbox + label {
        border: 3px solid #FF961F;
        padding: 9px;
        background-color: #FFFFFF;
        display: inline-block;
        position: relative; 
        vertical-align:middle;
        margin: .1em;
      }
      .regular-checkbox:checked + label {
      border: 3px solid #FF961F;
      }
      .regular-checkbox:checked + label:after {
        content: '\2716';
        font-size: 1em;
        position: absolute;
        top: 0px;
        left: 10%;
        color: #753B08;
        font-weight: 600;
      }
      .checkboxbox2{
        width:8em;
        float:left;
      }
      .colContainer{
        text-alignment:center;
      }
      div.centre{
        text-align: left;
        width: 17em;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
    </style>
  </head>
  <body style="text-align:center;font-family: 'Segoe UI', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;" class="center">      

<!--
<div class="colContainer">
<div class="centre">
-->
  <section id="bal_attacker" class="fieldCol">
    <h2>Attacker:</h2>
    <label for="bal_BS1">BS:</label> <br>
    <button type="button" id="bal_BS1inc" class="incbut"> + </button> 
    <input type="number" id="bal_BS1" value="1" class="inputField"> 
    <button type="button" id="bal_BS1dec" class="decbut"> - </button> <br> 
    <label for="bal_S">S:</label> <br>
    <button type="button" id="bal_Sinc" class="incbut"> + </button> 
    <input type="number" id="bal_S" value="1" class="inputField"/>
    <button type="button" id="bal_Sdec" class="decbut"> - </button> 
  </section>
  <section id="bal_defender" class="fieldCol" >
    <h2>Defender:</h2>
    <label for="bal_T">T:</label> <br>
    <button type="button" id="bal_Tinc" class="incbut"> + </button> 
    <input type="number" id="bal_T" value="1" class="inputField"> 
    <button type="button" id="bal_Tdec" class="decbut"> - </button>  <br> 
  </section>

<!--
</div>
</div>

-->
  <div>

  <section title="bal_Modifiers" class="modifiers">
    <h2 style="text-align:center;">Modifiers:</h2><br>
    <span class="checkboxbox2">
      <input type="checkbox" id="bal_harmConv" class="regular-checkbox" /><label for="bal_harmConv"></label>
      <label for="bal_harmConv" class="checkBoxLabel">Harm. Conv.</label>
    </span>
    <span class="checkboxbox2">
      <input type="checkbox" id="bal_rrToHit" class="regular-checkbox" /><label for="bal_rrToHit"></label>
      <label for="bal_rrToHit" class="checkBoxLabel">R.r. to hit</label>
    </span>
    <span class="checkboxbox2">
      <input type="checkbox" id="bal_rrToW" class="regular-checkbox" /><label for="bal_rrToW"></label>
      <label for="bal_rrToW" class="checkBoxLabel">R.r. to wound</label>
    </span>
    <div style="clear: both;"></div>
  </section>
  <div style="clear: both;"></div>
  </body>
 </html> 
```

我很抱歉这不是一个最小的工作示例 - 我已经尝试了一段时间来进一步减少它，但是当我尝试时我似乎破坏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:56:09.710

轻松修复：

把所有东西都放在一个持有人的 div 中（“包装”，有些人称之为）：

```
<div id="holder">
   <section> .... </section>
   <section> .... </section>
   <section> .... </section>
</div> 
```

然后制作支架`text-align:center;`和部分`display:inline-block;`，很可能你会想要`vertical-align:top;`。

```
#holder{
   text-align:center;
}
section{
   display:inline-block;
   vertical-align:top;
} 
```

从您的 jsFidle 中，您还需要`float:left;`从`.fieldCol`

[这是您的 jsFiddle 更新](http://jsfiddle.net/daCrosby/eEPmw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:19:24.257

如果您想创建具有您指定的响应能力的布局，Flexbox 就是您正在寻找的。我稍微简化了标记：

[http://codepen.io/cimmanon/pen/djwsz](http://codepen.io/cimmanon/pen/djwsz)

```
<div id="calculator">
    <section id="bal_attacker" class="fieldCol">
        <h2>Attacker:</h2>

        <div>
            <label for="bal_BS1">BS:</label> <br>
            <button type="button" id="bal_BS1inc" class="incbut"> + </button> 
            <input type="number" id="bal_BS1" value="1" class="inputField"> 
            <button type="button" id="bal_BS1dec" class="decbut"> - </button>
        </div>

        <div>
            <label for="bal_S">S:</label> <br>
            <button type="button" id="bal_Sinc" class="incbut"> + </button> 
            <input type="number" id="bal_S" value="1" class="inputField"/>
            <button type="button" id="bal_Sdec" class="decbut"> - </button>
        </div>
    </section>

    <section id="bal_defender" class="fieldCol" >
        <h2>Defender:</h2>

        <div>
            <label for="bal_T">T:</label> <br>
            <button type="button" id="bal_Tinc" class="incbut"> + </button> 
            <input type="number" id="bal_T" value="1" class="inputField"> 
            <button type="button" id="bal_Tdec" class="decbut"> - </button>
        </div>
    </section>

    <section title="bal_Modifiers" class="modifiers">
        <h2>Modifiers:</h2>

        <ul>
            <li><label><input type="checkbox" id="bal_harmConv" class="regular-checkbox" /> Harm. Conv.</label></li>
            <li><label><input type="checkbox" id="bal_rrToHit" class="regular-checkbox" /> R.r. to hit</label></li>
            <li><label><input type="checkbox" id="bal_rrToW" class="regular-checkbox" /> R.r. to wound</label></li>
        </ul>
    </section>
</div> 
```

这些应该是您需要的所有样式，我已经删除了所有与布局无关的纯美学样式（颜色、填充等）：

```
#calculator, section.modifiers ul {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}
@supports (flex-wrap: wrap) {
  #calculator, section.modifiers ul {
    display: flex;
  }
}

#calculator section {
  -webkit-flex: 1 1 30%;
  -ms-flex: 1 1 30%;
  flex: 1 1 30%;
}

section.modifiers ul {
  padding: 0;
}

section.modifiers li {
  list-style-type: none;
  -webkit-flex: 1 0 33%;
  -ms-flex: 1 0 33%;
  flex: 1 0 33%;
  white-space: pre;
} 
```

现在坏消息是目前对 Flexbox 的支持相当差。目前，只有 Opera、Chrome 和 IE10 能够呈现这种布局。

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:28:01.787

我会将标题与您希望它们保留的元素一起放在父 div 中。

```
<div class="parent">
    <h1>Header</h1>
    <div class="content">
        //Whatever your content is
    </div>
</div> 
```

至于居中，`margin: 0 auto;`通常是这样做的，但是由于您将有一个浮动，您可能必须编写一些脚本来根据`.length()`父 div 和祖父母的宽度为您处理它容器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:35:09.780

这是一个可以用来开始的快速模拟。

> 您需要进行 3 列布局，col1 = 攻击者，col2 = 防御者，col3= 修饰符。这将确保当屏幕缩小超过一个点时，该列中的所有元素都会下降。接下来，您需要在列中使用百分比以允许其中的元素均匀分布，或者给每个列一个固定的 with 以及与父列的 with 相关的内部元素的所有宽度。

**演示：http: [//jsfiddle.net/bRRqW/](http://jsfiddle.net/bRRqW/)**

HTML

```
<div class="wrapper">
    <div class="col">
        <h4>Attacker:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae dignissimos voluptatem in ut minima doloremque fuga qui saepe! Esse laudantium non voluptates deleniti soluta ab praesentium velit id omnis corrupti.</p>
    </div>
    <div c**strong text**lass="col">
        <h4>Defender:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae dignissimos voluptatem in ut minima doloremque fuga qui saepe! Esse laudantium non voluptates deleniti soluta ab praesentium velit id omnis corrupti.</p>
    </div>
    <div class="col">
        <h4>Modifier:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae dignissimos voluptatem in ut minima doloremque fuga qui saepe! Esse laudantium non voluptates deleniti soluta ab praesentium velit id omnis corrupti.</p>
    </div>
</div> 
```

CSS

```
.wrapper {
    max-width: 600px;   
    margin: 0 auto;
}

.col { 
    width: 33.333333%;
    float: left;
    position: relative;
    text-align: center;
    min-width: 150px;
    background: red;
} 
```

# c# - 使我提交的客户端日期时间与我的计时器作业保持同步

> ID：15347737
> 
> 赞同：0
> 
> 时间：2013-03-11T20:14:37.773
> 
> 标签：c#, datetime

我从客户端向服务器提交日期时间。让我们说它的加利福尼亚时间下午 1:00。提交此数据后，我解析时间并将其转换为 UTC，如下所示：

```
DateTime.SpecifyKind(DateTime.ParseExact(model.SessionStart, "MM/dd/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture).ToUniversalTime(), DateTimeKind.Utc); 
```

我在同一台服务器上运行了一个 timerjob，它检查这些日期是否小于当前时间，因此我的代码在会话开始时间处于正确时间时运行。

我怎样才能使所有这些时间与我的服务器保持同步，以便如果有人从加利福尼亚或纽约提交，一切都会正确转换并且我的计时器作业将正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:34:02.117

我认为拍卖的更好方法是让客户端以UTC发送服务器开始时间和结束时间，并让服务器计时器将现在的UTC时间与拍卖开始/结束时间进行比较。这里根本不需要使用服务器的本地时间。

唯一使用的本地时间是在客户端显示中。与服务器和服务器内部的任何交易都应始终仅使用 UTC。

至于时间同步，您可以使用 John Skeet 在此处建议的 NODA 时间： [将我的应用程序时间与外部服务器时间同步的最佳方法是什么？](https://stackoverflow.com/questions/15130459/what-would-be-the-best-way-to-synchronize-my-applications-time-with-outside-ser)

# c++ - 有条件的不起作用，总是返回第一种情况

> ID：15347747
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:14:54.593
> 
> 标签：c++, operators

结果打印出 'c' 3 次，有人知道为什么它总是满足第一个条件吗？

```
#include <iostream>

using namespace std;

char x(char y)
{
    if (y == 'a' || 'b')
    {
        return 'c';
    }
    else if (y == 'c' || 'd')
    {
        return 'e';
    }
    else
    {
        return 'g';
    }
}

int main()
{
    cout << x('a') << endl;
    cout << x('c') << endl;
    cout << x('p') << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:15:36.937

你需要某种形式的东西

```
if (y == 'a' || y == 'b') 
```

这是因为在这个表达式中

```
(y == 'a' || 'b') 
```

`y == 'a'`您正在评估and的 OR `'b'`，并且由于`'b'`评估为`true`非零，因此整个表达式的评估结果为`true`。

```
(y == 'a' || true) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T20:17:02.187

这一行：

```
if (y == 'a' || 'b') 
```

相当于：

```
if ((y == 'a') || ('b')) 
```

那是因为`==`运算符[的优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)高于`||`运算符。

由于`'b'`非零，它总是计算为真，因此`(y == 'a' || 'b')`总是计算为真。

你需要这样写：

```
if (y == 'a' || y == 'b') 
```

当然，即使优先顺序相反，

```
if (y == ('a' || 'b')) 
```

也不会是你想要的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:32:25.563

请在此处检查运算符优先级（priority）：http: [//en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

在您的情况下，条件表达式是：

```
(y == 'a' || 'b') 
```

因此，首先评估“y == 'a'”部分，这可能是真/假，具体取决于“y”的值。让我们将“y=='a'”的值称为“t”。然后表达式被评估为“t || 'b'” 在这种情况下'b'实际上是字符'b'的ASCII码值（98）肯定大于0，所以布尔表达式的结果是总是正确的。

为了消除由运算符优先级引起的任何歧义，我认为使用括号明确表示您在评估中的优先级是一个好习惯。在您的情况下，正如之前的帖子所建议的那样，它应该是：

```
if ((y=='a') || (y=='b')) 
```

# javascript - $getJSON 和 for 循环问题

> ID：15347750
> 
> 赞同：12
> 
> 时间：2013-03-11T20:15:13.503
> 
> 标签：javascript, mediawiki-api

这是用从 MediaWiki API 查询返回的结果数量填充一个表`/api.php?action=query&list=querypage&qppage=BrokenRedirects`。然后将结果的数量添加到 id 中，例如：

```
// BrokenRedirects
$.getJSON('/api.php?action=query&list=querypage&qppage=BrokenRedirects&format=json', function (data) {
    $('#BrokenRedirects').text(data.query.querypage.results.length);
}); 
```

但是当它又重复了 7 次时，我将 qppage 的参数放入一个数组中，并使用了一个 for 循环来缩短整体代码。

```
var array = ['BrokenRedirects',
             'DoubleRedirects',
             'Unusedcategories',
             'Unusedimages',
             'Wantedcategories',
             'Wantedfiles',
             'Wantedpages',
             'Wantedtemplates'];

for (var i = 0; i < array.length; i++) {
    $.getJSON('/api.php?action=query&list=querypage&qppage=' + array[i] + '&format=json', function (data) {
        $('#' + array[i]).text(data.query.querypage.results.length);
    });
} 
```

第一个未循环的版本有效。但是当我添加一个循环时它没有。该`$getJSON`部分执行，但随后无法将结果数据添加到 id。我通过 JSLint 运行它，除了抱怨循环中的函数并声明返回的帮助很少`var i`。`var array`我对javascript相对缺乏经验，所以认为一个变量可能不能在循环中使用两次？除此之外，也许与在循环中使用 id 有关？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-11T20:16:16.253

这是一个经典问题：`i`调用回调时具有循环结束的值。

你可以像这样修复它：

```
for (var i = 0; i < array.length; i++) {
    (function(i) { // protects i in an immediately called function
      $.getJSON('/api.php?action=query&list=querypage&qppage=' + array[i] + '&format=json', function (data) {
        $('#' + array[i]).text(data.query.querypage.results.length);
      });
    })(i);
} 
```

**2018 年附录：**

在当今的浏览器中，现在有另一种更清洁的解决方案：使用`let`而不是`var`：

```
for (let i = 0; i < array.length; i++) {
    $.getJSON('/api.php?action=query&list=querypage&qppage=' + array[i] + '&format=json', function (data) {
        $('#' + array[i]).text(data.query.querypage.results.length);
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:36:36.913

getJSON 是一个**异步**ajax 调用

REFER：[使用同步 ajax 调用](https://stackoverflow.com/questions/3419026/jquery-getjson-function-timing-issue)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-25T18:57:43.430

使用 Jquery [$.each()](http://api.jquery.com/jquery.each/)来迭代数组而不是 for 循环。

例如：

```
$.each(array, function(_, value) {
    var url = '/api.php?action=query&list=querypage&qppage=' + value + '&format=json';

    $.getJSON(url, function (data) {
        $('#' + value).text(data.query.querypage.results.length);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:22:41.047

你应该写一个像 -

```
function callUrl(value)
{
 $.getJSON('/api.php?action=query&list=querypage&qppage=' + value + '&format=json', function (data) {
        $('#' + value).text(data.query.querypage.results.length);
    });
} 
```

然后用一些超时选项调用它，比如 -

`setTimeout('callUrl(+ array[i] +)',500);`在循环内 -

IE

```
for (var i = 0; i < array.length; i++) {
  setTimeout('callUrl(+ array[i] +)',500);
} 
```

每次通话都需要一些延迟。

# regex - 如何使用flex在每个列表的末尾插入一个变量值？

> ID：15347759
> 
> 赞同：0
> 
> 时间：2013-03-11T20:15:33.240
> 
> 标签：regex, lex, flex-lexer

原始样本数据如下所示：

```
neg      
test  
-1.0 1.0    
-2.1 3.45 
```

我必须使用 flex 将其转换为可识别的 ocaml 输入列表，如下所示：

```
let test  
=[  
[ -1.0 ; 1.0 ; 1.0; -1.0 ];  
[ -2.1 ; 3.45 ; 1.0; -1.0 ]  
];; 
```

我可以将其转换如下：

```
let test  
=[  
[ -1.0 ; 1.0 ; 1.0 ; ]; 
[ -2.1 ; 3.45 ; 1.0 ; ]
];; 
```

我的主要问题是：

> 1.  如果原始数据显示为 neg，如何将每个列表中的最后一个元素设为 -1，如果原始数据显示为 pos，则设为 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:01:11.040

我认为您需要添加某种形式的解析。看看 Bison，它与 flex 集成得很好。所以你会得到一些看起来像这样的规则。

```
let_expression: "neg" identifier vector_list
{
//Finalize by printing stored data and add -1
}
              |  identifier vector_list
{
//Finalize by printing stored data and add 1
}

vector_list: vector_list vector
{
  //Store your number pairs in a std::vector<std::pair<T,T>>
}
           | vector
{
  //Initialize the vector list.
}

vector: const_num const_num
{
  //Store your numbers, maybe in a std::pair
  $$ = std::make_pair($1,$2)
} 
```

# ruby-on-rails - 使用 sidekiq 完成一组异步作业后更改对象的状态

> ID：15347764
> 
> 赞同：1
> 
> 时间：2013-03-11T20:15:47.700
> 
> 标签：ruby-on-rails, background-process, sidekiq

我`sidekiq`用来处理异步作业，在增加了一些复杂性之后，我很难了解作业的状态。

这是交易：

我有一个模型`Batch`在提交后调用异步方法：

```
# app/models/batch.rb
class Batch < ActiveRecord::Base

  after_commit :calculate, on: :create

  def calculate
    job_id = BatchWorker.perform_async(self.id)

    # update_column skips callbacks and validations!
    self.update_column(:job_id, job_id)
  end
end 
```

Worker 从模型中读取数据，并为每个数据调用一个异步作业，如下所示：

```
# app/workers/batch_worker.rb
class BatchWorker

  def perform(batch_id)
    batch = Batch.find(batch_id)

    ## read data to 'tab'    

    tab.each do |ts|
      obj = batch.item.create(name: ts[0], data: ts[1])
      job_id = ItemWorker.perform_async(obj.id)
      obj.update_attribute(:job_id, job_id)
    end
  end

end 
```

问题是：那些异步作业执行计算，我不能让下载结果链接在完成之前可用，所以我需要知道所有“子作业”何时完成，所以我可以`status`从`Batch`模型中更改一个属性. 换句话说，我不需要知道是否所有作业都已排队，而是需要知道由 生成的所有异步作业`ItemWorker`是否已执行，并且现在已完成。

*   实现这一目标的最佳方法是什么？在“并行计算世界”中有意义吗？

Obs.：我不确定将 job_id 存储在 db 中，因为它似乎是易变的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T22:29:16.973

也许为此使用 Redis 可能是一个不错的选择，因为您已经在基础架构中拥有它并在 Rails 应用程序中进行了配置（由于 Sidekiq）

Redis 有一个内置的发布/订阅引擎，以及对键的原子操作——使其适合管理您正在寻找的并发类型。

大概是这样的：

```
class BatchWorker

  def perform(batch_id)
    batch = Batch.find(batch_id)

    redis = Redis.new
    redis.set "jobs_remaining_#{batch_id}", tab.count
    redis.subscribe("batch_task_complete.#{batch_id}") do |on|
      on.message do |event, data|
        if redis.decr("jobs_remaining_#{batch_id}") < 1
          #UPDATE STATUS HERE
          redis.del "jobs_remaining_#{batch_id}"
        end
      end
    end

    tab.each do |ts|
      obj = batch.item.create(name: ts[0], data: ts[1])
      job_id = ItemWorker.perform_async(obj.id, batch_id)
    end
  end
end

class ItemWorker
  def perform item_id, batch_id=nil
    #DO STUFF
    if batch_id
      Redis.new.publish "batch_task_complete.#{batch_id}"
    end
  end
end 
```

# c# - Google 自定义搜索结果 - 链接目标空白未转到新的浏览器选项卡/窗口

> ID：15347769
> 
> 赞同：0
> 
> 时间：2013-03-11T20:16:03.923
> 
> 标签：c#, asp.net, html, visual-studio-2005

我将我网站的 Google 自定义搜索结果显示在新页面上。我希望每个搜索结果在单击时转到新的浏览器选项卡/窗口。

根据我对 Google GCSE 的理解，点击结果应该会自动转到新的浏览器窗口。搜索结果链接目标默认为 _blank。无论如何，我添加了显式代码。

```
<div class="searchresults-only" data-linkTarget="_blank"></div>
<gcse:searchresults-only linkTarget="_blank"></gcse:searchresults-only> 
```

我看到的是，点击搜索结果会停留在同一个浏览器窗口中，不会转到新窗口。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-04T12:20:52.447

```
<div class="searchresults-only" data-linkTarget="_blank"></div> 
```

此任务不需要 Div 代码尝试此代码

```
<gcse:searchresults-only linkTarget="_parent"></gcse:searchresults-only> 
```

它会帮助你。只需替换`linkTarget="_blank"`并`linkTarget="_parent"`运行它..

# permissions - 在 Salesforce 中的简档对象设置上禁用字段权限

> ID：15347773
> 
> 赞同：2
> 
> 时间：2013-03-11T20:16:23.687
> 
> 标签：permissions, salesforce, field, profile, user-permissions

我在 Salesforce 中有一个用户个人资料，我希望无法编辑某些字段。不幸的是，在配置文件对象设置的字段权限部分中，这些字段显示为禁用（灰色）但已选中。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:07:51.820

I'm guessing you're trying to edit one of the standard profiles that ships with salesforce. This isn't allowed. Clone the profile, edit the new profile as needed, then assign users to the new profile.

# c++ - 为什么我的函数从未被调用，即使我明确地调用它？

> ID：15347774
> 
> 赞同：0
> 
> 时间：2013-03-11T20:16:23.917
> 
> 标签：c++, visual-studio-2010, visual-c++, command-line

所以我正在编写这个简单的 CLI 工具，而且我的代码不会太繁琐，这基本上是发生了什么：

```
bool IsThing()
{
    // stuff goes here
    return false;
}

int _tmain(int argc, _TCHAR* argv[])
{
    bool IsThing_ = IsThing();
    if ( IsThing_ )
    {
        printf( "foo\n" );
        return 1;
    }

    return 0;
} 
```

当我运行这段代码时，我明确地尝试失败`IsThing()`，甚至从字面上删除其中的所有内容，除了`return false`. 但是，每一次，我都会得到一个返回码`1`。

为了调试，我`IsThing()`在`_tmain()`. 最让我沮丧的是，在里面的断点处`IsThing()`，VS会告诉我

> 没有可执行代码与此行相关联。

相反，当我单步执行 main 函数时，它实际上会转到`bool IsThing_ = IsThing();`，然后检查 if 条件**而无需进入实际函数**，并且会立即跳到条件内的内容。

为什么我的函数调用不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:50:24.223

```
bool IsThing()
{
    // stuff goes here
    return false;
}

int _tmain(int argc, _TCHAR* argv[])
{
    bool IsThing_ = IsThing();
    if ( IsThing_ )
    {
        printf( "foo\n" );
        return 1;
    }

    return 0;
} 
```

在发布模式下，Visual Studio 会将此代码转换为：

```
int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

当然，由于`IsThing`不再需要，因此不会为其生成任何代码，因此您无法在其中设置断点。

现在，如果您将足够的代码填充到实际执行某些操作的函数中（例如文件 I/O）并且不对 的返回进行硬编码`false`，那么编译器可能确实会将其变成一个可以获取的函数叫。但是如今的编译器非常擅长消除不会产生任何“有意义”的代码。

我不认为这里有什么大谜团——这只是编译器的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:52:53.150

您正在使用最有可能使用[/O1 或 /O2 优化的](http://msdn.microsoft.com/en-us/library/8f8h5cxt.aspx)**发布**配置进行编译，这旨在使您的代码更快更小。这意味着在编译期间这个函数：

```
bool IsThing() { return false; } 
```

正在内联，这导致您`main`相当于：

```
int _tmain(int argc, _TCHAR* argv[])
{
    bool IsThing_ = false;
    if ( IsThing_ )
    {
        printf( "foo\n" );
        return 1;
    }
    return 0;
} 
```

甚至`if`可能会省略语句的主体，这将导致：

```
int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

这也是使用**Debug**配置为您工作的原因。您可以尝试转到项目属性并在**C/C++ -> 优化**下将*优化*选项更改为`Disabled (/Od)`，您应该能够看到，在此更改之后，您的断点将为您工作:)

# android - DatabaseHandler.close() - 空指针异常，即使选中

> ID：15347775
> 
> 赞同：1
> 
> 时间：2013-03-11T20:16:27.547
> 
> 标签：android, sqlite, nullpointerexception

我的代码如下所示：

```
 if (dbHandler != null) dbHandler.close(); 
```

怎么可能在这条线上得到一个 nullPointerException ？看起来我在 SQLite 的系统函数中得到了一个 NPE。

当然还有更多类似的功能，但我认为基本结构已被证明。奇怪的是，这发生在一个用户身上（至少我们不知道其他人）。设备应为三星 SII，Android 4.0.4

**编辑** 通过重写databaseHandler解决了，可能还有更多的实例危险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:21:55.737

您的`dbHandler`对象可能对空的 SQLiteDatabase 的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T19:39:11.023

我想知道完全相同的事情（请参阅上面包含的代码）。发生这种情况是没有意义的。

# c# - 将文件和字符串上传到 http 然后获取响应

> ID：15347777
> 
> 赞同：0
> 
> 时间：2013-03-11T20:16:29.160
> 
> 标签：c#, upload

基本上我有一个服务器可以让你上传文件，但它需要登录，所以当我从客户端上传时，我不仅需要发送要上传的文件，还需要将用户名和密码作为字符串发送，然后读取来自服务器。我已尽力而为，但出现错误“您必须在调用 [Begin]GetResponse 之前将 ContentLength 字节写入请求流。”

我上传图片的代码：

```
string ImgFile = Path.GetTempFileName();
img.Save(ImgFile);

byte[] LoginBytes = ASCIIEncoding.ASCII.GetBytes("username=" + Username + "&password=" + Password);
byte[] ImageBytes = File.ReadAllBytes(ImgFile);
int ByteLen = LoginBytes.Length + ImageBytes.Length;

WebRequest ReqResponse = WebRequest.Create(url);
ReqResponse.Credentials = CredentialCache.DefaultCredentials;
ReqResponse.Proxy = WebRequest.DefaultWebProxy;
ReqResponse.Proxy.Credentials = CredentialCache.DefaultCredentials;
ReqResponse.Method = "POST";
ReqResponse.ContentType = "application/x-www-form-urlencoded";
ReqResponse.ContentLength = ByteLen;

ReqResponse.GetRequestStream().Write(LoginBytes, 0, LoginBytes.Length);
ReqResponse.GetRequestStream().Write(ImageBytes, 0, ImageBytes.Length);

string response = (new StreamReader(ReqResponse.GetResponse().GetResponseStream()).ReadToEnd());
MessageBox.Show(response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:32:47.857

maybe it doesn't like 2 posts? could just concat them and send them at once.

```
void Main()
{
byte[] login = BitConverter.GetBytes("loginstring");
byte[] img = BitConverter.GetBytes("fakeimagedataherereplacewithrealbytes");
byte[] tosend = login.Concat(img).ToArray();
using(WebRequest wr = WebRequest.Create("someurl"))
{
    using (Stream rs = wr.GetRequestStream())
    {
        rs.Write(LoginBytes, 0, LoginBytes.Length);
        //...whatever
    }

} 
```

}

# ruby-on-rails - 使用 Capybara 发送表单时，换行符会被前置

> ID：15347779
> 
> 赞同：5
> 
> 时间：2013-03-11T20:16:35.440
> 
> 标签：ruby-on-rails, ruby, capybara

我在 Rails 应用程序中使用 Capybara 进行了这个测试：

```
within "#register" do
  fill_in "Biography (optionnal)", :with => "Hello world!"
end

click_on "Save"

# Check that form is repopulated with old input
expect(find_field('user_bio').value).to eq('Hello world!') 
```

这是我从测试中得到的：

```
Failure/Error: expect(find_field('user_bio').value).to eq('Hello world!')   
expected: "Hello world!"
got: "\nHello world!" 
```

我绝不会手动在 user_bio 字段前添加换行符。

**这可能来自哪里？**

**编辑 1：** 经过一些谷歌搜索，Github 上似乎有一个 PR，它被合并了。所以我想这不是Capybara的错误。见[https://github.com/jnicklas/capybara/commit/755a724d4b10e6841a0eeb58af43375236b33247](https://github.com/jnicklas/capybara/commit/755a724d4b10e6841a0eeb58af43375236b33247)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T03:33:02.847

您可以执行保存前过滤器以清除该新行

在您的模型中添加

```
 before_save :clear_new_lines

 protected
 def clear_new_lines
   self.user_bio = user_bio.gsub("\n",'')
 end 
```

# visual-studio - 处理和剪贴板数据

> ID：15347781
> 
> 赞同：0
> 
> 时间：2013-03-11T20:16:40.807
> 
> 标签：visual-studio, clipboard

我想知道他们是否有任何方法可以确定剪贴板数据要粘贴到的进程的进程 ID。谢谢你。

# asp.net - 我正在构建的 MSVS 锁定文件

> ID：15347782
> 
> 赞同：2
> 
> 时间：2013-03-11T20:16:40.847
> 
> 标签：asp.net, visual-studio, dll, build

尝试构建我的项目时出现错误

> 错误 253 无法将“obj\Debug\Intranet.Web.dll”复制到“bin\Intranet.Web.dll”。重试次数超过 10。失败。Web2

我查看了哪个进程锁定了文件及其

> C:\Program Files (x86)\Common Files\microsoft shared\DevServer\11.0\WebDev.WebServer40.EXE

这是怎么回事？它是否属于视觉工作室，为什么它持有我正在尝试构建的二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T15:57:30.310

在第一次调试后，我 100% 有同样的事情。每次我想调试时都重新启动 MSVS 工作，但真的很烦人，尤其是对于一个相当大的解决方案。尝试杀死锁定我的文件的 YourProjectName.vshost.exe。

# javascript - 使用 Javascript 在 Span 标记中动态插入链接（围绕锚文本）

> ID：15347792
> 
> 赞同：1
> 
> 时间：2013-03-11T20:17:17.120
> 
> 标签：javascript, text, href

在一个 html 页面上，我有：

```
<span class="me">See More</span> 
```

我应该使用 javascript 处理它来获取它（创建文本链接）：

```
<span class="me"><a href="http://domain.com>See More</a></span> 
```

没关系 0 我发现它运作良好。我的错，对不起。

```
function changespan() {
var spans = document.querySelectorAll('span.image');
for (var i = spans.length; i--; ) {
    var a = document.createElement('a');
    a.href = "http://domain.com";
    spans[i].appendChild(a).appendChild(a.previousSibling);
}
} 
```

让我知道 appendChild(a) 和 .appendChild(a.previousSibling) 是什么？

这是演示：http: [//jsfiddle.net/8eK7z/1/](http://jsfiddle.net/8eK7z/1/)

# jquery - jq 查找图像并删除下一个标签

> ID：15347798
> 
> 赞同：1
> 
> 时间：2013-03-11T20:17:39.070
> 
> 标签：jquery

我有一个问题，wordpress 在不应该的地方给出单独的 p 标签，将图像从段落中抛出，而不是在应该的地方浮动。

所以我得到

```
<p> <img /> </p> <p> TEXT </p> 
```

代替

```
<p> <img /> TEXT </p>. 
```

这在 1 主题中应该如何工作，但不适用于移动主题，我不知道问题出在哪里，我认为让 jq 脚本找到它应该的图像会更容易（取决于 src）然后删除下一个`</p>`和`<p>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:26:43.827

正如@lbazemonger 所说，需要研究更多代码。

请记住，在 wordpress 中使用 the_content() 时，整个输出始终包含在

应该是这样。

而且，如果我没记错的话，您在 wordpress 中编写的 html 也是预先转义的，因此您不会得到重复

.

我会假设移动版本可能会发生这样的事情：

```
<p>
  <?php the_content();?>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:42:19.697

根据您的标记，您确实可以使用 jQuery 实现您的目标。正如我在您的问题下评论的那样，您可能希望以`p > img`某种方式限制以下代码中使用的选择器，除非您确实希望文档中的所有图像都触发 DOM 更新。

也就是说，将[next()元素的](http://api.jquery.com/next/)[contents()](http://api.jquery.com/contents/)匹配到包含图像的元素之后，然后在第一个元素下重新设置它的[父级](http://api.jquery.com/appendTo/)，然后删除第二个元素，这很简单。 `<p>`

但是，由于删除一个元素不会破坏其后代树，我们实际上可以在重新设置其内容之前[remove()](http://api.jquery.com/remove/)第二个`<p>`元素，这允许我们将整个操作链接到：

```
$(document).ready(function() {
    $("p > img").each(function() {
        var $p = $(this).parent();
        $p.next("p").remove().contents().appendTo($p);
    });
}); 
```

您可以在[这个 fiddle](http://jsfiddle.net/ejWH6/)中测试上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:52:29.883

如果您将 wordpress 的输出卸载到 div 中，然后使用 JQ 操作 html 代码会怎样。

# hadoop - java.io.IOException：添加数据节点失败。HDFS (Hadoop)

> ID：15347799
> 
> 赞同：0
> 
> 时间：2013-03-11T20:17:39.600
> 
> 标签：hadoop, io, hdfs

在 HDFS (cloudera 2.0.0-cdh4.2.0) 上附加文件时遇到错误。导致错误的用例是：

*   在文件系统 (DistributedFileSystem) 上创建文件。**好的**
*   附加之前创建的文件。**错误**

    `OutputStream stream = FileSystem.append(filePath); stream.write(fileContents);`

    然后抛出错误：

`Exception in thread "main" java.io.IOException: Failed to add a datanode.
User may turn off this feature by setting dfs.client.block.write.replace-datanode-on- failure.policy in configuration, where the current policy is DEFAULT. (Nodes: current=[host1:50010, host2:50010], original=[host1:50010, host2:50010]) at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.findNewDatanode(DFSOutputStream.java:792) at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.addDatanode2ExistingPipeline(DFSOutputStream.java:852) at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.setupPipelineForAppendOrRecovery(DFSOutputStream.java:958) at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:469)`

一些相关的 hdfs 配置：

`dfs.replication`设置为 2

`dfs.client.block.write.replace-datanode-on-failure.policy`设置为 true `dfs.client.block.write.replace-datanode-on-failure`设置为 DEFAULT

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:17:30.613

Problem was solved by running on file system

```
hadoop dfs -setrep -R -w 2 / 
```

Old files on file system had replication factor set to 3, setting `dfs.replication` to 2 in `hdfs-site.xml` will not solve the problem as this config will not apply to already existing files.

So, if u remove machines from cluster you better check files and system replication factor

# php - ' 字符正在破坏我用 php 生成的 json outout

> ID：15347801
> 
> 赞同：0
> 
> 时间：2013-03-11T20:17:50.910
> 
> 标签：php, json, special-characters

我似乎无法修复这个小精灵。

我有一个 mySQL 数据库，其中的表有一个描述字段。

我的客户经常使用 ' 字符，这破坏了我从 php 生成的 json。

我的脚本如下：

```
... database call...
$totalRows_rs_results = mysql_num_rows($rs_results);

            if($totalRows_rs_results >0){
                $myData = array();
                //echo('locations near this unitbase:');
                $myData['id'] = $row_rs_results['id_loc'];
                $myData['slug'] = $row_rs_results['slug_loc'];
                $myData['name'] = $row_rs_results['name_loc'];
                $myData['showname'] = $row_rs_results['showname_loc'];
                $myData['description'] = utf8_encode($row_rs_results['description_loc']);
                $myData['image'] = getDefaultLocationImage($database_reelfilm, $reelfilm, $row_rs_results['id_loc']);

                    $myAddress = ($row_rs_results['address_loc'].' '.$row_rs_results['postcode_loc']);
                    $myData['address'] = $myAddress;
                    $myData['maplat'] = $row_rs_results['maplat_loc'];
                    $myData['maplong'] = $row_rs_results['maplong_loc'];

                $myData['parking'] = $row_rs_results['parkinginfo_loc'];
                $myData['features'] = $row_rs_results['internalfeatures_loc'] . ' ' . $row_rs_results['externalfeatures_loc'];
                //$myData['categorys'] = getCategorys($database_reelfilm, $reelfilm, $row_rs_results['id_loc']);            
                $json[] = $myData;          
                $myJSON = json_encode($json);
                return $myJSON;
            };

<span class='showOnMap' data-location='<?php echo makeJSON($database_reelfilm, $reelfilm, 'location', $row_rs_locations['id_loc']);?>' '>
<img src="/images/Icons/map-icon.png" width="32" height="32">
</span> 
```

输出的 json 很好，直到我用前面提到的 ' 字符记录。

如果我从记录中删除有问题的 ' 字符，我会得到正确的输出：

```
<span class="showOnMap" data-related="" data-categorys="" data-location="[{"id":"29","slug":"the-butts","name":"The Butts","showname":"1","description":"Controllable period street location. Looks like an A road or a bus route. Surrounding houses are Georgian or early Victorian.","image":"The Butts 3.jpg","address":"Brentford\r\nLondon TW8 8BQ","maplat":"51.4847373","maplong":"-0.30824250000000575","parking":"","features":" "}]">
<img width="32" height="32" src="/images/Icons/map-icon.png">
</span> 
```

使用 ' 字符生成的数据输出：

```
<span class="showOnMap" data-related="" data-categorys="" "}]'="" 8bq","maplat":"51.4847373","maplong":"-0.30824250000000575","parking":"","features":"="" tw8="" 3.jpg","address":"brentford\r\nlondon="" butts="" victorian.","image":"the="" early="" georgian="" are="" houses="" surrounding="" route.="" bus="" a="" or="" road="" a'="" data-location="[{"id":"29","slug":"the-butts","name":"The Butts","showname":"1","description":"Controllable period street location. Looks like an ">
<img width="32" height="32" src="/images/Icons/map-icon.png">
</span> 
```

现在告诉我的客户检查并删除所有有问题的 ' 字符（有超过 1000 条记录）对我来说似乎非常不专业。

我试过 htmlspecialchars() ， utf8_encode() 来尝试解决问题，不确定我需要使用哪一个，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:20:13.780

您对嵌套引号的使用破坏了它。尝试这个：

```
<span class='showOnMap' data-location='<?php echo makeJSON($database_reelfilm, $reelfilm, "location", $row_rs_locations["id_loc"]);?>'> 
```

通过在单引号中嵌套单引号，您可以结束字符串......在单引号和双引号之间切换将正确地将它们包含在完整字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:22:29.260

您应该使用以下内容对值进行实体编码`htmlentities()`：

```
<span class='showOnMap' data-location='<?php echo htmlentities(makeJSON($database_reelfilm, $reelfilm, 'location', $row_rs_locations['id_loc']));?>'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T13:29:49.563

有很多方法可以解决

使用 addlases 函数或使用 htmlspecialchars 函数

```
$myData['description']=htmlspecialchars(utf8_encode($row_rs_results['description_loc'],ENT_QUOTES));

                     OR
    $myData['description']=addslashes($myData['description']); 
```

# c++ - “实时”约束是否会阻止使用任务调度程序？

> ID：15347802
> 
> 赞同：0
> 
> 时间：2013-03-11T20:18:02.210
> 
> 标签：c++, multithreading, c++11

通过任务调度程序，我的意思是工作线程池的任何实现，它根据他们设计的任何算法将工作分配给线程。（如英特尔 TBB）

我知道“实时”约束意味着工作在可预测的时间内完成（我不是在谈论速度）。所以我的猜测是，使用任务调度程序，据我所知，它不能保证某些任务将在给定时间之前执行，这使得应用程序无法在这些约束中使用。

还是我错过了什么？有没有办法两者兼得？也许通过强制假设可以处理的数据量？或者也许有可预测的任务调度程序？

我说的是“硬”实时约束，而不是软实时（如视频游戏）。

澄清：

众所周知，C++ 中的某些特性无法在这种上下文中使用：new、delete、throw、dynamic_cast。它们是不可预测的（您不知道可以在其中一项操作上花费多少时间，这取决于在执行之前甚至不知道的太多参数）。你不能真正在实时环境中使用它们。我要问的是，任务调度程序是否具有相同的不可预测性，会使它们在实时应用程序中无法使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:32:14.613

术语实时是相当灵活的。“硬实时”往往意味着几十微秒的时间会在“正常工作”和“不能正常工作”之间产生差异。并非所有“实时”系统都需要这种实时性。

我曾经在移动电话的无线电基站上工作过。板上的一个设备有一个中断，每 2 毫秒触发一次。为了正确操作（不丢失呼叫），我们必须处理中断，即在 100 微秒内完成中断内部的工作并用新值写入硬件寄存器 - 如果我们错过了，就会出现掉线。如果 160 微秒后没有中断，系统将重新启动。那是“硬实时”，特别是当处理器仅以几十兆赫兹运行时。

如果您制作视频播放器，它需要几毫秒范围内的实时性。

“显示股票价格”可能在 100 毫秒范围内。

对于网络服务器来说，在 1-2 秒内响应而没有任何大问题可能是可以接受的。

此外，“比 X 更糟糕的最坏情况意味着失败”之间存在差异（例如上面的 100 微秒或掉线的情况 - 如果每隔几周发生一次以上，那就很糟糕了 - 甚至一年几次也确实如此这应该是固定的）。这称为“硬实时”。

但是其他系统，错过你的最后期限意味着“哦，好吧，我们必须重新做一遍”或“一帧视频闪烁了一下”，只要它不经常发生，它可能没问题。这称为“软实时”。

许多现代硬件将使“硬实时”（10 秒或 100 微秒范围）变得困难，因为图形处理器将简单地阻止处理器访问内存，或者如果处理器变热，则将`stopclk`引脚拉出 100 微秒...

大多数现代操作系统，例如 Linux 和 Windows，并不真正意味着“硬实时”。在这些操作系统的某些部分，有些代码确实禁用了超过 100 微秒的中断。

您几乎可以肯定地从具有现代硬件的主流现代操作系统中获得一些好的“软实时”（也就是说，错过最后期限并不是失败，只是一个小烦恼）。它可能需要修改操作系统或专用的实时操作系统（可能还有合适的特殊硬件）才能使系统实时运行。

但世界上只有少数几件事需要这种硬实时。通常硬实时要求是由硬件处理的——例如，我上面描述的下一代无线电基站有更聪明的硬件，所以你只需要在接下来的 2-几毫秒，你没有“疯狂地在几十微秒内完成它”。在现代移动电话中，GSM 或 UMTS 协议主要由专用 DSP（数字信号处理器）处理。

“硬实时”要求是如果无法满足特定期限（或一组期限），即使未能满足期限仅发生一次，系统也确实失败了。但是，不同的系统有不同的系统对截止日期的实际时间有不同的敏感度（正如 Jerry Coffin 提到的）。几乎可以肯定的是，可以找到商用通用操作系统完全足以处理硬实时系统的实时要求的情况。绝对可以肯定的是，在其他情况下，如果没有专门的系统，就无法满足此类硬实时要求。

我想说，如果你想从操作系统获得亚毫秒级的保证，那么桌面 Windows 或 Linux 不适合你。这实际上取决于操作系统和调度程序设计的整体理念，并且构建一个硬实时操作系统需要大量考虑锁定和一个线程阻止另一个线程运行等的可能性。

我认为没有一个答案适用于您的问题。是的，您当然可以在具有严格实时要求的系统中使用线程池。除非操作系统对此有特定的支持，否则您可能无法以亚毫秒为单位执行此操作。而且您可能需要有专门的线程和进程来处理最高优先级的实时行为，这不是线程池本身的一部分。

抱歉，如果这不是对您的回答说“是”或“否”，但我认为您需要对操作系统的实际行为进行一些研究，看看它可以提供什么样的保证（最坏的情况）。您还必须决定最坏的情况是什么，以及如果您错过最后期限会发生什么 - 是（很多）人死亡（飞机从天上掉下来），还是某个银行家将损失数百万，是绿色在马路交叉口的两个方向上的灯会同时亮起，还是扬声器发出一些不好的声音？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:10:31.633

是的，它可以做到，但不，这不是微不足道的，是的，有限制。

您可以编写调度程序以保证（例如）中断处理程序、异常处理程序（等）被保证在没有固定时间段的情况下被调用。您可以保证任何给定的线程将（例如）在任何给定的秒（或合适的几分之一秒）内获得至少 X 毫秒的 CPU 时间。

要强制执行后者，您通常需要准入标准——调度程序能够说“对不起，但我不能将其安排为实时线程，因为 CPU 已经承受了太多的负载。

在其他情况下，它所做的只是保证至少（比如说）99% 的 CPU 时间将被分配给实时任务（如果有的话），并且这取决于在此基础上设计系统的人来安排足够少的实时任务。 - 时间任务，这将确保他们都足够快地完成。

我觉得有必要补充一点，实时要求的“硬度”几乎与所需的响应速度完全正交。相反，这几乎完全是关于迟到后果的严重性。

举个例子，考虑一个核电站。对于发生的很多事情，您正在处理以分钟为单位的时间段，在某些情况下甚至是几小时。例如，用 50 万加仑的水填充一个特定的腔室不会在几微秒或几毫秒内发生。

同时，稍后回答的后果可能是*巨大的*——很可能不仅像医院设备那样造成少数人死亡，而且可能导致数百甚至数千人死亡、数亿人的损失等。因此，它是与实时要求一样“硬”，即使按大多数典型标准而言，截止日期异常“宽松”。

另一方面，数字音频播放有*更*严格的限制。在某些情况下，延迟或丢失的声音可能会低至几分之一毫秒。同时，除非您为大型音乐会（或按此顺序）提供声音处理，否则退出的后果通常是用户的片刻小烦恼。

当然，也可以将两者结合起来——举个明显的例子，在高频交易中，截止日期可能在微秒（左右）的数量级，而错过截止日期的损失很容易达到数百万或数十万。数百万（美元|欧元|英镑|等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:09:43.707

“实时”不仅意味着“快速”，还意味着系统可以响应现实世界中的最后期限。这些截止日期取决于您在现实世界中处理的内容。

任务是否在特定时间范围内完成是任务的特征，而不是调度程序。调度程序可以决定哪个任务获得资源，如果一个任务在截止日期之前没有完成，它可能会被停止或限制其资源使用，以便其他任务可以满足它们的截止日期。

因此，您的问题的答案是您需要一起考虑工作量、截止日期和调度程序，并构建您的系统以满足您的要求。没有神奇的调度程序可以执行任意任务并让它们在可预测的时间内完成。

更新：

如果任务调度程序能够提供您需要的保证，那么它可以在实时系统中使用。正如其他人所说，有提供这些保证的任务调度程序。

关于评论：问题是所用时间的上限。

如果您重载它们以获得您所追求的性能特征，您可以使用 new 和 delete；问题不是新的和删除的，而是动态内存分配。不要求 new 和 delete 使用通用动态分配器，您可以使用它们从静态分配的池中分配，该池的大小适合您的工作负载并具有确定性的行为。

关于 dynamic_cast：我倾向于不使用它，但我不认为它的性能是不确定的，以至于它应该在实时代码中被禁止。这是同一问题的一个示例：了解最坏情况下的性能很重要。

# asp.net - 如何让 wcf 服务使用我的 asp.net 请求/响应过滤器？

> ID：15347803
> 
> 赞同：0
> 
> 时间：2013-03-11T20:18:08.090
> 
> 标签：asp.net, wcf, soap, wse

我有一个使用微软 WSE 库的旧肥皂网络服务。现在我们的目标 .net 框架和操作系统不支持它。我已将服务转换为在服务器上使用 wcf，但客户端仍将使用旧的 Web 服务代理。我目前遇到的问题是客户端压缩http请求以节省我们的带宽。在 asp.net 应用程序中，我有一个 httpmodual，它根据请求标头的内容编码检测客户端发送是否使用 gzip/deflate。现在服务是 wcf，它不会从 asp.net 请求流中读取，并且解压缩不起作用。不压缩请求的客户端当前可以工作。如何使 wcf 服务与 asp.net 管道集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:12:20.747

*压缩 HTTP请求*是非常不寻常的。请参阅[https://serverfault.com/q/56700](https://serverfault.com/q/56700)，Apache 对它有一些支持，但我很确定 ASP.NET/IIS 没有任何本机支持。所以你必须接受原始形式的流并自己解码。

# jquery - 无需刷新即可访问站点文件夹

> ID：15347805
> 
> 赞同：0
> 
> 时间：2013-03-11T20:18:28.130
> 
> 标签：jquery, ajax, refresh, preloader

我有一个疑问让我睡着了！

首先，你可以看看这个网站：[http ://coffeesurfing.illy.com/](http://coffeesurfing.illy.com/)

我想知道如何在不刷新页面的情况下链接网站的其他文件夹。比如我第一次访问网站，url是“www.site.com/home”。因此，我单击任何链接，然后转到其他文件夹，例如“www.site.com/about”，但没有刷新。请注意，经常淡出并显示预加载器。

虽然英语很差，但我希望能得到很多启发性的答案。

拥抱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:55:59.393

我认为您的意思是“如何创建基于 jQuery 的站点导航？”

看这里的演示：http: [//d2o0t5hpnwv4c1.cloudfront.net/011_jQuerySite/sample/index.html](http://d2o0t5hpnwv4c1.cloudfront.net/011_jQuerySite/sample/index.html)

如果这是您想要的，请按照本教程进行操作：http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-load-in-and-animate-content-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-load-in-and-animate-content-with-jquery/)

# javascript - Javascript中鼠标进入和鼠标离开的位置

> ID：15347806
> 
> 赞同：1
> 
> 时间：2013-03-11T20:18:29.470
> 
> 标签：javascript, events, mouse, mouseevent

我有以下脚本，并试图在幻灯片上添加鼠标进入和离开事件，这样当鼠标悬停在图像上时它不会切换到下一个，一旦移除它就会继续。

当鼠标悬停时，我可以让幻灯片停止，但是一旦鼠标移出，幻灯片将不会继续。

我不确定这两条线是否在正确的位置：

```
 ---> jQuery('#slider-holder').mouseenter(function(){MOUSE_IN = true;});
   ---> jQuery('#slider-holder').mouseleave(function(){MOUSE_IN = false;}); 
```

```
jQuery(function () {
jQuery('a').focus(function () {
    this.blur();
});
SI.Files.stylizeAll();
slider.init();

});

---> var MOUSE_IN = false;

var slider = {
num: -1,
cur: 0,
cr: [],
al: null,
at: 10 * 1000,  /* change 1000 to control speed*/
ar: true,
anim:'slide',
fade_speed:600,
init: function () {
    if (!slider.data || !slider.data.length) return false;

    var d = slider.data;
    slider.num = d.length;
    var pos = Math.floor(Math.random() * 1);
    for (var i = 0; i < slider.num; i++) {
        if(slider.anim == 'fade')
        {
          jQuery('#' + d[i].id).hide();
        }
        else{
            jQuery('#' + d[i].id).css({
                left: ((i - pos) * 1000)
            });
        }
        jQuery('#slide-nav').append('<a id="slide-link-' + i + '" href="#" onclick="slider.slide(' + i + ');return false;" onfocus="this.blur();">' + (i + 1) + '</a>');
    }
    jQuery('img,div#slide-controls', jQuery('div#slide-holder')).fadeIn();
   ---> jQuery('#slider-holder').mouseenter(function(){MOUSE_IN = true;});
   ---> jQuery('#slider-holder').mouseleave(function(){MOUSE_IN = false;});
    slider.text(d[pos]);
    slider.on(pos);
    if(slider.anim == 'fade')
    {
      slider.cur = -1;
      slider.slide(0);
    }
    else{
    slider.cur = pos;
    window.setTimeout('slider.auto();', slider.at);
    }
},
auto: function () {
    if (!slider.ar) return false;
    if(MOUSE_IN) return false;
    var next = slider.cur + 1;
    if (next >= slider.num) next = 0;
    slider.slide(next);
},
slide: function (pos) {
    if (pos < 0 || pos >= slider.num || pos == slider.cur) return;

    window.clearTimeout(slider.al);
    slider.al = window.setTimeout('slider.auto();', slider.at);

    var d = slider.data;
    if(slider.anim == 'fade')
    {
      for (var i = 0; i < slider.num; i++) {
         if(i == slider.cur || i == pos) continue;
         jQuery('#' + d[i].id).hide();
      }

      if(slider.cur != -1){
        jQuery('#' + d[slider.cur].id).stop(false,true); 
        jQuery('#' + d[slider.cur].id).fadeOut(slider.fade_speed); 
        jQuery('#' + d[pos].id).fadeIn(slider.fade_speed); 

      }
      else
      {
        jQuery('#' + d[pos].id).fadeIn(slider.fade_speed);
      }
    }
    else
    {
        for (var i = 0; i < slider.num; i++)
        jQuery('#' + d[i].id).stop().animate({
            left: ((i - pos) * 1000)
        },
        1000, 'swing');
    }
    slider.on(pos);
    slider.text(d[pos]);
    slider.cur = pos;
},
on: function (pos) {
    jQuery('#slide-nav a').removeClass('on');
    jQuery('#slide-nav a#slide-link-' + pos).addClass('on');
},
text: function (di) {
    slider.cr['a'] = di.client;
    slider.cr['b'] = di.desc;
    slider.ticker('#slide-client span', di.client, 0, 'a');
    slider.ticker('#slide-desc', di.desc, 0, 'b');
},
ticker: function (el, text, pos, unique) {
    if (slider.cr[unique] != text) return false;

    ctext = text.substring(0, pos) + (pos % 2 ? '-' : '_');
    jQuery(el).html(ctext);

    if (pos == text.length) jQuery(el).html(text);
    else window.setTimeout('slider.ticker("' + el + '","' + text + '",' + (pos + 1) + ',"' + unique + '");', 30);
}
};

if (!window.SI) {
var SI = {};
};
SI.Files = {
htmlClass: 'SI-FILES-STYLIZED',
fileClass: 'file',
wrapClass: 'cabinet',

fini: false,
able: false,
init: function () {
    this.fini = true;

    var ie = 0
    if (window.opera || (ie && ie < 5.5) || !document.getElementsByTagName) {
        return;
    }
    this.able = true;

    var html = document.getElementsByTagName('html')[0];
    html.className += (html.className != '' ? ' ' : '') + this.htmlClass;
},
stylize: function (elem) {
    if (!this.fini) {
        this.init();
    };
    if (!this.able) {
        return;
    };

    elem.parentNode.file = elem;
    elem.parentNode.onmousemove = function (e) {
        if (typeof e == 'undefined') e = window.event;
        if (typeof e.pageY == 'undefined' && typeof e.clientX == 'number' && document.documentElement) {
            e.pageX = e.clientX + document.documentElement.scrollLeft;
            e.pageY = e.clientY + document.documentElement.scrollTop;
        };
        var ox = oy = 0;
        var elem = this;
        if (elem.offsetParent) {
            ox = elem.offsetLeft;
            oy = elem.offsetTop;
            while (elem = elem.offsetParent) {
                ox += elem.offsetLeft;
                oy += elem.offsetTop;
            };
        };
        var x = e.pageX - ox;
        var y = e.pageY - oy;
        var w = this.file.offsetWidth;
        var h = this.file.offsetHeight;
        this.file.style.top = y - (h / 2) + 'px';
        this.file.style.left = x - (w - 30) + 'px';
    };
},
stylizeById: function (id) {
    this.stylize(document.getElementById(id));
},
stylizeAll: function () {
    if (!this.fini) {
        this.init();
    };
    if (!this.able) {
        return;
    };

    var inputs = document.getElementsByTagName('input');
    for (var i = 0; i < inputs.length; i++) {
        var input = inputs[i];
        if (input.type == 'file' && input.className.indexOf(this.fileClass) != -1 && input.parentNode.className.indexOf(this.wrapClass) != -1) this.stylize(input);
    };
}
};

(function (jQuery) {
jQuery.fn.pngFix = function (settings) {
    settings = jQuery.extend({
        blankgif: 'blank.gif'
    },
    settings);
    var ie55 = (navigator.appName == 'Microsoft Internet Explorer' && parseInt(navigator.appVersion) == 4 && navigator.appVersion.indexOf('MSIE 5.5') != -1);
    var ie6 = (navigator.appName == 'Microsoft Internet Explorer' && parseInt(navigator.appVersion) == 4 && navigator.appVersion.indexOf('MSIE 6.0') != -1);

    if (jQuery.browser.msie && (ie55 || ie6)) {

        jQuery(this).each(function () {
            var bgIMG = jQuery(this).css('background-image');
            if (bgIMG.indexOf(".png") != -1) {
                var iebg = bgIMG.split('url("')[1].split('")')[0];
                jQuery(this).css('background-image', 'none');
                jQuery(this).get(0).runtimeStyle.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + iebg + "',sizingMethod='" + settings.sizingMethod + "')";
            }
        });

    }
    return jQuery;
};
})(jQuery);
jQuery(function () {
if (jQuery.browser.msie && jQuery.browser.version < 7) {

}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:36:10.273

两条线的位置都很好，它们只是为鼠标输入/输出事件添加了一个事件处理程序。您遇到的问题实际上是在 tha auto 函数中，如果您注意到，在 init 函数的末尾，您有：

```
window.setTimeout('slider.auto();', slider.at) 
```

此行在滑块之后调用自动函数。在时间（在您的示例中为 10 秒），自动函数检查 MOUSE_IN 是否设置为 true，如果不是，则调用幻灯片函数，然后在幻灯片中函数你有另一个调用 auto 函数：

```
slider.al = window.setTimeout('slider.auto();', slider.at); 
```

但是，一旦您将 MOUSE_IN 变量设置为 true，auto 函数就会简单地返回并停止执行进一步的滑动函数，为了解决这个问题，您可能需要在滑动函数中处理 MOUSE_IN 逻辑，或者在 auto 函数中返回 false 之前，再次调用超时自动功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:31:47.257

认为这会起作用，但它没有，mouseleave 事件似乎没有触发。

```
jQuery('#slider-holder').mouseenter(function(){MOUSE_IN = true;});
jQuery('#slider-holder').mouseleave(function(){MOUSE_IN = false;});
while(MOUSE_IN==true)
{
jQuery('#slider-holder').mouseenter(function(){MOUSE_IN = true;});
jQuery('#slider-holder').mouseleave(function(){MOUSE_IN = false;});
} 
```

# java - 在 GitHub 上显示 JavaDocs

> ID：15347808
> 
> 赞同：45
> 
> 时间：2013-03-11T20:18:31.513
> 
> 标签：java, github, javadoc, markdown

我正在寻找一种将*javadocs*从我的开源项目（在*Eclipse*中生成）转换为*GitHub MarkDown*的方法，或者想出一些其他简单的解决方案来在 GitHub 上显示我的文档*（*简单地添加一个`docs`目录）。有一个简单的解决方案吗？我可以简单地将*GitHub* `README.md`指向我的`docs`目录吗？有什么更优雅的吗？我一直在*谷歌*上罢工。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T15:03:41.607

我认为用 MarkDown 制作可用的 Javadoc 是不可能的。最好的解决方案可能是提交您在`gh-pages`分支上生成的 Javadoc（或在`docs/`目录中，具体取决于项目的设置）。它将在以下位置提供：

[http://username.github.io/projectname](http://username.github.io/projectname)

这是我的一个项目中的一个示例：

[http://ebourg.github.io/jsign/apidocs/](http://ebourg.github.io/jsign/apidocs/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-10-19T10:23:54.297

目前，您还可以使用**Github Pages**不仅从分支托管**Javadoc** ，还可以直接从分支内的文件夹托管 Javadoc 。[您可以在此处](https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/)查看有关此主题的帮助部分（另请查看下面的附图）。**`gh-pages``/docs``master`**

 **[![在此处输入图像描述](../Images/3ff3a60a1a83ff077f54302324053bcd.png)](https://i.stack.imgur.com/34kKe.png)

另外，在 Github 上有一个项目，目标是将[Javadoc 转换为 Markdown](https://delight-im.github.io/Javadoc-to-Markdown/)（还没有尝试过，只是留下参考）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-02-13T14:46:46.577

### 不要将 Javadocs 签入项目的源代码控制中

尤其不进`master`分行！在决定这是一个非常糟糕的主意之前，我关注了这个问题的其他答案大约一年。为什么？

1.  这使得审查差异变得太困难了。我什至编写了一个脚本（见下文）来仅更新发生重大变化的 Javadoc 页面，但它仍然是一团糟。

2.  它欺骗了 IntelliJ 的重构工具。我只是试图将 .x() 更改为 .getX() 并且不得不批准/拒绝 Javadocs 中的每个“x”。也许我忘了排除 IntelliJ 中的文件夹，但如果您曾经在项目中使用 sed/grep/find，则必须记住每次都将其排除。

3.  它在 git 中添加了一堆不应该存在的数据，可能会使命令`pull`和`clone`命令花费更长的时间……永远！即使您稍后“删除”该文件夹，它仍然存储在 git 中。

### javadocs应该去哪里？

最好将它们发布在[https://javadoc.io/](https://javadoc.io/)、您的网站或 AWS 或 heroku 上。如果您必须将 javadoc 签入源代码控制，请为 Javadocs 创建一个单独的项目，这样您就永远不需要查看差异。您可以按照其他人的答案来了解如何执行此操作。

### “我看了你的帖子，但我还是这样做了”

这是我的脚本来更新更少的 javadocs。它仅将具有实质性更改的文件从`target/apidocs`文件夹复制到`docs/apidocs`文件夹。它还添加新文件并删除不再使用的文件。我想我用了不好的名字，`newfile`and `oldfile`，但它有效。我的意思是，仅仅证明将 javadoc 检查到我项目的源代码控制中是不够的，但它有帮助。

```
#!/usr/bin/env bash

# -I means ignore lines matching a regular expression
# -q means "quiet" - only tell whether files differ or not
# -r means "recursive" - explore subdirectories
# -N means "treat absent files as empty" which makes absent files show up in Quiet mode.
diff -I '<!-- Generated by javadoc ' \
     -I '<meta name="date" content="' \
     -I '<title>' \
     -I 'parent.document.title=' \
     -N \
     -qr \
     docs/apidocs/ target/apidocs/ > target/javadocPatch.txt

# Now read in the output file created by the previous command and
# Update only files that have substantial changes.
while read  ignore1 oldfile ignore2 newfile ignore3
do
  if [ ! -f "$oldfile" ]
  then
    echo "Added $oldfile"
    echo -n >$oldfile
    cp -fu $newfile $oldfile
  elif [ ! -f "$newfile" ]
  then
    echo "Deleted $newfile"
    rm $newfile
  else
    echo "cp -fu $newfile $oldfile"
    cp -fu $newfile $oldfile
  fi
done < "target/javadocPatch.txt" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-10-19T17:01:13.937

这可能有点离题，但我相信 OP 正在寻找的是一种机制，可以在发布项目的新版本时自动使 javadoc 可用。

如果是这种情况，那么您可以尝试：http: [//javadoc.io](http://javadoc.io)

它是一个免费的托管开源项目 javadocs 的服务，目前支持 maven central 和 bintray (jcenter)。

您可以生成指向项目最新版本的链接。例如，这个链接[https://javadoc.io/doc/org.springframework/spring-core](https://javadoc.io/doc/org.springframework/spring-core)总是指向*spring-core*的最新版本，在我写这个答案的时候是*5.2.0.RELEASE*。

声明者：我运行 javadoc.io**

# c# - Telerik EditableGrid 错误

> ID：15347812
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:18:50.863
> 
> 标签：c#

在我的可编辑网格视图中，我收到以下错误：“当前上下文中不存在名称 'GridButtonTupe'”和“找不到命名空间的类型（您是否缺少 using 指令或程序集引用？ )”我已经包含了所有的参考文件，你知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:11:11.760

在没有看到代码的情况下，您似乎需要通过后面代码中的 FindControl("GridButtonTupe") 访问“GridButtonTupe”。

看到这个，例如：[http](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/usercontroleditform/defaultcs.aspx) ://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/usercontroleditform/defaultcs.aspx （看看default.aspx.cs例子）

如果这不是答案，则该问题的代码示例将很有帮助。

# php - 使用 MySQL 对 Joomla 进行身份验证！2.5

> ID：15347813
> 
> 赞同：0
> 
> 时间：2013-03-11T20:18:52.983
> 
> 标签：php, mysql, mysqli, joomla2.5, joomla-extensions

我正在为我的雇主开发一个网站。我们目前有一个 Joomla！1.5 网站，并且正在完全重新设计和升级到 Joomla！2.5

我们将`Authentication - ExtDB`插件用于当前站点。此后，该插件似乎已被放弃（或至少未更新）。

是否有任何插件可以让我们使用我们的 MySQL 数据库进行身份验证？我在一些网站上读到，可以通过破解核心 Joomla！登录功能，但我宁愿避免这种情况。

如果有人有任何意见或建议，将不胜感激。

谢谢你。

**编辑：**

据我所知，我已经更新了`*.xml`和`*.php`安装工作。我现在的问题是，当我尝试使用新插件时，出现以下错误：

```
JAuthentication: :authenticate: Failed to load plugin: plgauthenticationmysql 
```

我错过了关键的一步吗？

**XML:**

```
 <files>
        <filename plugin="mysql">mysql-auth.php</filename>
        <filename>index.html</filename>
    </files>
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field name="backend_login" type="radio" default="0" label="Enable Backend Login" description="Enable backend login for the external users" >
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </field>
                <field name="@spacer" type="spacer" default="" label="" description="" />
                <field name="host" type="text" size="20" default="" label="Database Host" description="PARAMDBHOST" />
                <field name="port" type="text" size="20" default="3306" label="Server Port" description="PARAMDBPORT" />
                <field name="connectuser" type="text" size="20" default="" label="Connect username" description="PARAMCONNECTUSER" />
                <field name="connectpassword" type="password" size="20" default="" label="Connect password" description="PARAMCONNECTPASSWORD" />
                <field name="db_type" default="MySQL" type="list" label="Database Type" description="PARAMDBTYPE">
                    <option value="mysql">MySQL</option>
                </field>
                <field name="@spacer" type="spacer" default="" label="" description="" />
                <field name="dbname" type="text" size="20" default="" label="Database name" description="PARAMDBNAME" />
                <field name="table" type="text" size="20" default="" label="Table name" description="PARAMTABLE" />
                <field name="usernamefield" type="text" size="20" default="" label="Username Field" description="PARAMUSERFIELD" />
                <field name="passwordfield" type="text" size="20" default="" label="Password Field" description="PARAMPASSWORDFIELD" />
                <field name="passwordtype" default="MD5" type="list" label="Password Type" description="PARAMPWDTYPE">
                    <option value="MD5">MD5</option>
                    <option value="SHA1">SHA-1</option>
                    <option value="CRYPT">CRYPT (Linux only)</option>
                    <option value="PLAIN">Plain Text</option>
                </field>
                <field name="passwordsalt" type="text" size="20" default="" label="Password Salt" description="PARAMPASSWORDSALT" />
                <field name="@spacer" type="spacer" default="" label="" description="" />
                <field name="firstnamefield" type="text" size="20" default="" label="First name Field" description="PARAMFIRSTNAMEFIELD" />
                <field name="surnamefield" type="text" size="20" default="" label="Surname Field" description="PARAMSURNAMRFIELD" />
                <field name="emailfield" type="text" size="20" default="" label="e-mail Field" description="PARAMEMAILFIELD" />
            </fieldset>
        </fields>
    </config> 
```

**PHP：**

```
<?php
    defined('_JEXEC') or die();

    jimport('joomla.event.plugin');

    class plgAuthenticationMySQL extends JPlugin
    {
    function plgAuthenticationMySQL(& $subject, $config){
        parent::__construct($subject, $config);
        $this->loadLanguage();
    }
    function onUserAuthenticate( $credentials, $options, & $response )
    {
        $mode = $this->params->def('mode', 1);

        if(stripos($options['entry_url'], 'administrator') ){
            if ( (strcasecmp($options['group'], 'Public Backend') == 1) || ($params->get('backend_login') == 0) ){
                $response->status = JAuthentication::STATUS_FAILURE;
                $response->error_message = "You are not allow to login here.";
                return false;
            }
        }

        $driver = $params->get('db_type'); 
        $port = $params->get('port'); 
        if($port == '3306')
            $host   = $params->get('host');
        else
            $host   = $params->get('host').':'.$port;

        $user = $params->get('connectuser');            
        $pass = $params->get('connectpassword');        
        $dbase = $params->get('dbname');             
        $table = $params->get('table');                 
        $usernamefield = $params->get('usernamefield'); 
        $passwordfield = $params->get('passwordfield');   
        $passwordtype = $params->get('passwordtype');     
        $passwordsalt = $params->get('passwordsalt');     
        $firstnamefield = $params->get('firstnamefield'); 
        $surnamefield = $params->get('surnamefield');     
        $emailfield = $params->get('emailfield');        

    // Connect to the database host
        if(!($db = mysql_connect($host, $user, $pass, true)))
        {
            $response->status = JAuthentication::STATUS_FAILURE;
            $response->error_message = "Cant connect to the remote host: $host";
            return false;
        }

    if(!mysql_select_db($dbase, $db))
        {
            $response->status = JAuthentication::STATUS_FAILURE;
            $response->error_message = "Cant connect to the remote database: $dbase";
            return false;
        }

    switch ($passwordtype) {
            case 'MD5':
                $password = md5($credentials['password'].$passwordsalt);
                break;
            case 'SHA1':
                $password = sha1($credentials['password'].$passwordsalt);
                break;
            case 'CRYPT': 
                break; 
            case 'PLAIN':
                $password = $credentials['password'];
                break;
            default:
                $password = md5($credentials['password'].$passwordsalt);
                break;
        }

        $query = "SELECT `$usernamefield`" ;
        if ($firstnamefield)
            $query .= ",`$firstnamefield`";
        if ($surnamefield)
            $query .= ",`$surnamefield`";
        if ($emailfield)
            $query .= ",`$emailfield`";

        $query .= sprintf(" FROM `%s` WHERE `%s`='%s'", $table, $usernamefield, $credentials['username']);

    if ($passwordtype === 'CRYPT')
            $query .= sprintf(" AND ENCRYPT('%s', `%s`)=`%s`", $credentials['password'], $passwordfield, $passwordfield);
        else
            $query .= sprintf(" AND `%s` = '%s'", $passwordfield, $password);

        $result = mysql_query($query);
        $result_ar = mysql_fetch_assoc($result);

        mysql_close($db);

        if (!$result_ar) {
            $response->status = JAuthentication::STATUS_FAILURE;
            $response->error_message = 'Invalid User Name or Password';
            return false;
        }

        $response->username = $result_ar[$usernamefield];

        if ($firstnamefield and $surnamefield)
            $response->fullname = $result_ar[$firstnamefield] . " " . $result_ar[$surnamefield];
        else if ($firstnamefield)
            $response->fullname = $result_ar[$firstnamefield];
        else if ($surnamefield)
            $response->fullname = $result_ar[$surnamefield];

        if ($emailfield)
            $response->email = $result_ar[$emailfield];

            $record = JUser::getInstance(); 
        if (!$response->fullname)
            $response->fullname = 'No full name :)';
        if (!$response->email)
            $response->email = 'noemail@nodomain.none';

        $response->status = JAuthentication::STATUS_SUCCESS;

        return true;
    }
}
?> 
```

# iphone - 在 UIImage 中为一种颜色设置 alpha

> ID：15347815
> 
> 赞同：0
> 
> 时间：2013-03-11T20:18:57.007
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uiimage

我有这个PNG图像：（灰色边框中的区域是透明的）

![在此处输入图像描述](../Images/823b8f942d5f5336d9d004160c08f8bd.png)

我希望只有灰色角落的 alpha 为 0.5

如果我设置

```
[imgView setAlpha:0.5f]; 
```

中间的透明区域也检索到半白色。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:30:46.387

为什么您不只是更改原始图像文件？如果这不可能，您可以在图像下方放置一个不透明度为 50% 的白色（黑色？）矩形。

当然，有很多方法可以做到这一点，但您需要告诉我们更多关于您的用例的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:19:55.097

您应该在所需图像下方添加一个图像视图。并调整该图像的 alpha。

# spotify - Spotify 客户端 0.8.8 缓存 javascript 资产，因此开发人员“刷新”不再工作

> ID：15347823
> 
> 赞同：2
> 
> 时间：2013-03-11T20:19:28.007
> 
> 标签：spotify

我最近将我的播放器升级到 v. 0.8.8。现在，当我右键单击“重新加载应用程序”时，我不再能够看到我的代码更改

查看检查器中的“网络”选项卡时 - 我看到我的 javascript 资产正在从缓存中提取。另外：在播放器的 0.8.5 版本中，检查器设置中有一个选项可以禁用缓存。此选项在 0.8.8 版中不再可用。

长话短说：在新的 0.8.8 播放器中无法禁用缓存，因此在开发中对代码进行任何更改都需要完全重新启动应用程序。在 0.8.5 中，右键单击然后“刷新”就足够了。

我在 Windows 7 x64 上

Spotify 0.8.5 检查员：

![在此处输入图像描述](../Images/1ef56d38393bf6c717e43968d4ec3438.png)

Spotify 0.8.8 检查员：

![在此处输入图像描述](../Images/6f127c4ec871b346531f39efb4f4acd2.png)

如何在不退出 0.8.8 播放器中的应用程序的情况下刷新我的资产？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:13:08.150

禁用 Javascript 缓存选项将在更高版本的 Spotify 客户端中重新引入。不幸的是，目前我无法告诉您它会在哪个版本或何时发布。

# javascript - JavaScript 函数执行

> ID：15347830
> 
> 赞同：-4
> 
> 时间：2013-03-11T20:19:43.047
> 
> 标签：javascript

浏览器是否执行从未被调用的 JavaScript 函数？

除了增加文件大小之外，这些功能有什么害处吗？

```
function test() {

     // 1000 lines of code (not commented out)

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:21:17.063

只要`test()`从不调用，代码就永远不会执行。虽然它可能会被编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:21:17.193

它可能会解析该代码，但与任何其他函数一样，除非被调用，否则它不会被执行*：*

```
test(); // or any of the many other ways to call a function in JavaScript 
```

浏览器是否解析它很可能是依赖于实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:21:58.357

浏览器不会执行任何代码，除非在代码中显式引用或在脚本运行期间动态引用。

**例子**

```
function func()
{
    alert('hello');
}

window.addEventListener('load',func,false);
// With this line it will be called on load. 
```

# python - 使用 os.system 执行的命令中的 python 变量

> ID：15347837
> 
> 赞同：1
> 
> 时间：2013-03-11T20:20:33.217
> 
> 标签：python, linux

Python 快把我逼疯了；我总是很难在 PATH 中使用变量。我的版本是`Python 2.4.3`

```
>>> import os
>>> a = "httpd"
>>> cmd = '/etc/init.d/+a restart'
>>> print cmd
/etc/init.d/+a restart
>>> 
```

如何放入`/etc/init.d/httpd`变量`cmd`以便我可以使用`os.system(cmd)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:21:30.327

对于 python v > 2.7

```
cmd = '/etc/init.d/{} restart'.format(a) 
```

或者

```
cmd = '/etc/init.d/'+a+' restart' 
```

但是您可能应该考虑使用`subprocess`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:22:38.100

你需要类似的东西：

```
cmd = '/etc/init.d/%s restart' % a 
```

如果您需要进行多次替换，您可以执行以下操作：

```
cmd = '/etc/init.d/%s %s' % ( 'httpd', 'restart' ) 
```

在这种形式中，`'%s'`是一个占位符。每个`'%s'`都被运算符`tuple`右侧对应项中的一个项目替换`%`（我想这是字符串插值运算符）。可以在[参考的字符串格式部分找到更多详细信息](http://docs.python.org/2/library/stdtypes.html#string-formatting)

从 python2.6 开始，有一种使用该方法格式化字符串的新`.format`方法，但我想这对你没有多大帮助。

# ios - 如何将自定义视图添加到 iOS VoiceOver 转子？

> ID：15347839
> 
> 赞同：5
> 
> 时间：2013-03-11T20:20:46.167
> 
> 标签：ios, objective-c, accessibility, voiceover

最近，我一直在努力让我的应用程序与 VoiceOver 一起正常运行。一般来说，它简单明了，但是我想模拟来自系统应用程序的一些行为，而且我很难找到 API 来进行设置。

特别是，我有兴趣向 VoiceOver“转子”添加几个选项，并在用户增加和减少值时响应它们。然而，尽管像 Apple 的 Maps 应用程序这样的应用程序会向转子添加项目并且能够响应，但我不知道如何为我的应用程序这样做。

有没有人成功做到这一点？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:13:41.283

**更新**：iOS 10 最终添加了将自定义转子项添加到 VoiceOver 的功能（与“Actions”转子项不同） - 只需将[UIAccessibilityCustomRotor](https://developer.apple.com/reference/uikit/uiaccessibilitycustomrotor)对象数组添加到`accessibilityCustomRotors`适当的容器视图。

*旧答案*：

目前没有 API 可以添加您自己的转子项目。您只能实现一些现有转子项目的工作方式：

1.  “调整值” - 在这里你应该返回[UIAccessibilityTraitAdjustable](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAccessibility_Protocol/Introduction/Introduction.html#//apple_ref/c/data/UIAccessibilityTraitAdjustable) trait 来获取accessibilityTraits，然后实现[accessibilityIncrement](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccessibilityAction_Protocol/Introduction/Introduction.html#//apple_ref/occ/instm/NSObject/accessibilityIncrement) / [accessibilityDecrement](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccessibilityAction_Protocol/Introduction/Introduction.html#//apple_ref/occ/instm/NSObject/accessibilityDecrement)方法
2.  “标题” - 您将一些视图标记为[UIAccessibilityTraitHeader](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAccessibility_Protocol/Introduction/Introduction.html#//apple_ref/c/data/UIAccessibilityTraitHeader)，那么这些应该是用户旋转到“标题”并向上/向下滑动时用户移动的视图
3.  旧更新：“行动” - 见[`UIAccessibilityCustomAction`](https://developer.apple.com/reference/uikit/uiaccessibilitycustomaction)

如果您需要向转子添加自定义项目，我想您应该提交雷达。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-27T07:06:12.833

在 iOS 8 中，您可以使用该`-accessibilityCustomActions`方法返回一个`UIAccessibilityCustomAction`对象数组，表示您希望呈现“转子样式”的动作。

# regex - 在 Linux 中从文件名中删除空格

> ID：15347843
> 
> 赞同：27
> 
> 时间：2013-03-11T20:20:59.170
> 
> 标签：regex, linux, rename

我在不同的文件夹中有数百个 jpg 文件，如下所示：

*   304775 105_01.jpg
*   304775 105_03.jpg
*   304775 105_05.jpg
*   304775 105_07.jpg
*   304775 105_02.jpg
*   304775 105_04.jpg
*   304775 105_06.jpg

基本上，我需要删除空格。我已经知道将空格更改为下划线的命令：

```
$ rename "s/ /_/g" * 
```

但在这种情况下，我不需要下划线。我只需要删除空间。我尝试了以下方法，但没有奏效：

```
$ rename "s/ //g" * 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-11T20:25:06.713

如果它真的是一个空间，以下将起作用。

```
$ rename "s/ //g" * 
```

尝试

```
$ rename "s/\s+//g" * 
```

`\s`是一个空白字符，属于`[ \t\r\n]`.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-11T20:31:30.480

你可以这样做：

```
IFS="\n"
for file in *.jpg;
do
    mv "$file" "${file//[[:space:]]}"
done 
```

# javascript - Ember.js Uncaught TypeError：无法读取未定义的属性“处理程序”

> ID：15347845
> 
> 赞同：1
> 
> 时间：2013-03-11T20:21:05.167
> 
> 标签：javascript, forms, ember.js, handlebars.js, dynamicform

我正在尝试在 Ember 中实现动态表单。我希望用户能够从下拉列表中选择一个选项并将其添加到表单中。此外，每个添加的字段都应该有一个“x”，用于从表单中删除元素。

我已经整理了一些似乎可以工作的东西[（JSFiddle）](http://jsfiddle.net/CzbuM/3/)，但是每当删除添加的表单元素（单击它旁边的 x）时，我会在控制台中收到一条错误消息：“Uncaught TypeError: Cannot read property 'handler '未定义的”。

我认为这可能与附加到“a”标签的车把“动作”助手有关。不过我不确定。

这是一个删除函数的示例，当单击插入的输入元素旁边的“x”时调用该函数。

```
 deleteOption: function (event) {
        this.removeChild(event);
        this.rerender();
        }, 
```

这是添加新输入元素时使用的“newOption”视图的模板（单击“+”按钮后）

```
 <script type="text/x-handlebars" data-template-name="newOption">
    <p>
      <label {{bindAttr for="view.name"}}>{{view.label}}</label>
      <br /><input class="input-medium option" {{bindAttr id="view.name" name="view.name"}} type="text" maxlength="5"  />
      <a href="#" class="delete addsub" {{bindAttr id="view.name"}} {{action deleteOption view target="view.parentView" }}>X</a>
    </p>
  </script> 
```

# c - 在 Xcode 中运行除 main.c 之外的其他类

> ID：15347846
> 
> 赞同：0
> 
> 时间：2013-03-11T20:21:13.327
> 
> 标签：c, xcode, class

尽管我已经学习了 Java，但我正在学习 C。因为我在 Mac 上，所以我下载了 Xcode 来编写我的 C 代码。（我真的很喜欢 IDE，而不仅仅是使用记事本来编写代码）。

我有一些练习要做。所以我创建了一个名为 Homework 的新项目，我想我可以在这个项目中做所有不同的练习！

所以，在 Xcode 中，我创建了一个新的 C 项目。我有一个主要课程。现在我想要的是创建一个新类并运行它。问题是 Xcode 总是运行 main.c 类。如何在项目中创建一个新类并运行这个类？（不是主要课程）。或者这是不可能的，每次我想运行一个新课程时我都必须创建一个新项目？

（即使用 Eclipse for Java：您创建一个项目并在其中创建多个类，然后独立运行。）

你能帮助我吗 ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:29:54.710

You could create multiple build targets and `#ifdef` in the correct `main()` depending on the build target.

For example, if you go to `Build Settings` and find `Preprocessor Macros`, and add a macro `ASSIGNMENT1`you could create a build target called `Assignment1`.

For your 2nd assignment, you could create an `Assignment2` target and add an `ASSIGNMENT2` preprocessor macro.

Then, in your `assignment1.c`, you could have:

```
#ifdef ASSIGNMENT1
int main(int argc, char* arv[]) {
    ...
}
#endif 
```

And in your `assignment2.c`, you could have:

```
#ifdef ASSIGNMENT2
int main(int argc, char* arv[]) {
    ...
}
#endif 
```

# javascript - 移动/旋转点的算法

> ID：15347853
> 
> 赞同：1
> 
> 时间：2013-03-11T20:21:35.557
> 
> 标签：javascript, algorithm, canvas, drawing, graph-algorithm

相对于 (0, 0) 将 (x, y) 坐标中的点移动/“旋转”x 度的算法是什么？例如，在下图中，我想将点 A 移动到 B，x 度；A 和 (0, 0) 之间的距离应该与 B 和 (0, 0) 之间的距离相同。

我需要在前端环境即 JavaScript 中做。

![在此处输入图像描述](../Images/7139c1e3c31bc1acb6bc857528a5fc79.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:39:21.880

```
B.x = A.x * cos(x) - A.y * sin(x)
B.y = A.x * sin(x) + A.y * cos(x) 
```

`x`假定为弧度，否则您必须转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:26:21.287

为了帮助进行大量 Canvas（或只是 JavaScript）转换，我制作了一个小型 Transformation 类，它可以将任何类型的任意转换（旋转、缩放、平移）应用于给定点。

当您需要数学来模拟 Canvas 上的变换矩阵时，这非常有用。

[https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js](https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js)

要使用它旋转一个点，您可以：

```
var t = new Transform();
t.rotate(5); // some number of radians
t.transformPoint(ax, ay); // returns [bx, by] 
```

# objective-c - 使用带有 AVQueuePlayer 的 Switch 语句？

> ID：15347854
> 
> 赞同：0
> 
> 时间：2013-03-11T20:21:37.250
> 
> 标签：objective-c, ios6, switch-statement, avaudioplayer, avqueueplayer

我有一个由四个轨道组成的队列。当轨道改变时，我想改变一个 UIImage，关于那个特定的轨道（如果轨道 1 正在播放我想显示一个标题为 1.png 的图像，如果轨道 2 正在播放我想显示 2.png 等） .

我想使用 switch 语句，但我不确定在设置表达式时如何使用它。

```
switch(soundEmotions AVPlayerItem)
    {
        case yellowVoice:

            UIImage * yellowImage = [UIImage imageNamed:@"yellow.png"];
            [UIView transitionWithView:self.view
                              duration:1.0f
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{
                                mainImage.image = yellowImage;
                            } completion:NULL];

            break;
        case orangeVoice:

            UIImage * orangeImage = [UIImage imageNamed:@"orange.png"];
            [UIView transitionWithView:self.view
                              duration:1.0f
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{
                                mainImage.image = orangeImage;
                            } completion:NULL];

            break;
        case redVoice:

            break;
        case pinkVoice:

            break;
        default:

            break;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:36:26.133

switch 语句需要一个整数。在这种情况下，您想要的整数是当前正在播放的 AVPlayerItem 的索引。

因此，请保留您将 AVPlayerItems 数组传递给 AVQueuePlayer 的数组的副本。然后在这个数组中找到当前的播放器项目，你就会得到你的索引值。

```
NSInteger index = [self.soundEmotions indexOfObject:self.player.currentItem];
NSString *imageName = nil;
switch (index) {
    case 0:
        imageName = @"yellow";  // You don't need the ".png" part.
        break:
    case 1:
        imageName = @"orange";
        break:
    case 2:
        imageName = @"red";
        break:
    case 3:
        imageName = @"pink";
        break:
    default:
        // Any other number or NSNotFound.
        break:
}

if (imageName) {
    [UIView transitionWithView:self.view
                      duration:1.0f
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^{
                        mainImage.image = [UIImage imageNamed:imageName];
                    }
                    completion:NULL];
} 
```

此外，您可以将枚举用于常量以获得更好的可读性。这些只是顺序整数。

```
typedef enum {
    MyClassPlayerVoiceYellow = 0,
    MyClassPlayerVoiceOrange,
    MyClassPlayerVoiceRed,
    MyClassPlayerVoicePink,
} MyClassPlayerVoice; 
```

然后在交换机中使用它们：

```
switch (index) {
    case MyClassPlayerVoiceYellow:
        imageName = @"yellow";  // You don't need the ".png" part.
        break:
    case MyClassPlayerVoiceOrange:
        imageName = @"orange";
        break:
    case MyClassPlayerVoiceRed:
        imageName = @"red";
        break:
    case MyClassPlayerVoicePink:
        imageName = @"pink";
        break:
    default:
        break:
} 
```

# cookies - 如果同名cookie已经存在怎么办

> ID：15347856
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:21:39.683
> 
> 标签：cookies

如果我为我的域 (www.mydomain.com) 制作 cookie 并将其命名为“kolac”= $_COOKIE[“kolac”]。但是，如果其他站点的 cookie 与我的名称相同，该怎么办。它会取代我的cookie吗？我不明白它是如何工作的。

还有一个问题。我可以在我的 cookie 中存储哪些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:32:55.743

A cookie can only be set and is only accessible to the domain of the request so if there is a cookie set by a different domain with the same key as your cookie, you will not be able to access it. Also, it will not replace your cookie since those two values are stored in physically different files on your computer and can only be accessed by the domain that created the cookie.

A cookie can only store text information up to 4K for the entire cookie. You can still serialize other types of data into text, but generally you only want to store basic text values in a cookie.

# linux - kmalloc 功能和保护 (READ,WRITE,EXEC)

> ID：15347858
> 
> 赞同：2
> 
> 时间：2013-03-11T20:21:41.063
> 
> 标签：linux, memory-management, linux-kernel

我有一个关于 kmalloc 函数（在 linux 内核中找到）和保护的问题：

1.  kmalloc 创建的分配内存的默认保护（写/读/执行）是什么？
2.  如何更改分配区域的保护？（来自内核模式）
3.  如何找到所有内核分配的内存及其保护？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:42:44.697

Kmalloc is just an interface to the REAL memory manager, the kmem [cache allocator](http://jikos.jikos.cz/Kmalloc_Internals.html).

# ios - “'NSInvalidArgumentException'，原因：'-[UIButton intValue]: unrecognized selector sent to instance” initwithNibName: 和 viewDidLoad

> ID：15347866
> 
> 赞同：0
> 
> 时间：2013-03-11T20:22:00.497
> 
> 标签：ios, objective-c

我有一个相当简单的应用程序（我的第一个非平凡的 iOS 应用程序），我已经研究了一段时间。我已经完成并运行了应用程序，但我今天早些时候决定重构它以更好地适应 OO 设计原则（为了简单起见，我将大部分应用程序放在主视图控制器中；我回去尝试把它分成第二类）。现在，每当我尝试运行我的应用程序时，我都会在主视图加载之前崩溃并出现以下错误：

```
IntervalPlayer[1374:907] -[UIButton intValue]: unrecognized selector sent to instance 0x1c5569d0 
```

通过到处抛出打印语句，我可以说我通过了 initWithNibName:bundle: OK，但是在调用 viewDidLoad 之前应用程序崩溃了。显然，我的代码中的某些内容试图在 UIButton 上调用 intValue，但我的代码中没有任何内容可以执行此操作 - 我在整个应用程序中只使用一次 intValue，当我注释掉该行时，我得到了同样的错误。事实上，我已经尝试在调用超类构造函数之后注释掉 initWithNibName:bundle: 中的所有内容，但我在同一个地方遇到了同样的错误。因此，换句话说，据我所知，空构造函数中的某些内容导致在我的应用程序中的其他任何内容有机会运行之前在 UIButton 上调用 intValue。我认为它在代表或笔尖中的某些东西，但我已经查看了两者并且我没有看到任何不寻常的东西。

请原谅缺少代码片段，我不确定我会提供什么来说明这一点。这是空的构造函数，错误仍在发生：

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)aBundle
{
    self = [super initWithNibName:(NSString *)nibName bundle:(NSBundle *)aBundle];
    if (self) {
    }
    return self;
 } 
```

如果有人可以建议添加任何其他代码，我将编辑问题以执行此操作。

谢谢，

担

编辑：是的，我正在使用 ARC。另外，澄清一下，这发生在我的主视图控制器中，我还没有触及委托。

编辑2：崩溃在我的代表身上；根据调试器，问题行是 [self.window makeKeyAndVisible]; 由于我还没有碰过代表，我的猜测是 NIB 在某种程度上是无效的。

最终编辑：通过删除按钮直到我找到导致崩溃的按钮，然后将其重新连接到它在视图控制器中连接的所有内容，我发现当按钮连接到 UIButton 插座时它正在崩溃，而不是当它不是时崩溃。我卸下了插座，重新制作了它，现在它可以工作了。所以我不知道发生了什么，但我以某种方式修复了它。非常感谢所有提出建议的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:24:15.100

在您的应用程序中打开断点，以便 XCode 向您显示错误发生的行。

1.  打开断点导航器
2.  点击左下角的 + 按钮并添加异常断点
3.  刚打完
4.  运行您的应用程序，它将在导致问题的代码行处停止。

如果您遇到问题，请在此处发布导致崩溃的代码行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T14:44:31.373

我最终得到了同样的错误和症状。重新创建按钮并重做插座并没有帮助。不过，我并没有在 IB 连接上犯错。

我心不在焉地做的是命名按钮的出口`tag`，这为所有 UIView 具有相同名称的 NSInteger 属性命名。加载我的 NIB 时，iOS 本质上是在做某事`[tag getInt]`，但使用我的按钮而不是它想要的 NSInteger 属性。

# ruby-on-rails - Ruby On Rails 设计：注册期间如何避免重复的用户名

> ID：15347869
> 
> 赞同：1
> 
> 时间：2013-03-11T20:22:07.820
> 
> 标签：ruby-on-rails, devise

嗨，我对 Ruby on Rails 和 Devise 非常陌生，我想知道如何配置 devise 以禁止用户使用已经使用的用户名进行注册。初始配置是不允许在注册期间接收电子邮件，但我希望为我新创建的用户名字段进行相同的配置。我已经加了

```
config.authentication_keys = [ :username ] 
```

进入我的 devise.rb 文件，但它不能解决我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:40:42.850

如果需要名称是唯一的，无论大小写，您都需要这样做

```
validates_uniqueness_of :username, case_sensitive: false 
```

这是假设您不希望一个名为“Bob”的用户和另一个名为“bob”的用户。

此外，Rails 在进行检查时由于竞争条件而无法可靠地验证属性的唯一性。您必须添加唯一的数据库索引以确保数据完整性。

```
#postgresql
execute 'CREATE UNIQUE INDEX ON USERS lower(username);' 
```

Rails 无法进行唯一验证的原因是因为它会这样进行验证：

```
SELECT 1 FROM users WHERE lower(username) = 'bob'
# if nothing found
INSERT INTO USERS ... 
```

但是如果有多个 Rails 进程，几乎总是在生产中（例如，每个 Unicorn worker 都是一个进程），那么如果两个进程同时尝试添加“bob”，就会产生竞争条件，然后代码可能会执行，这样第一个 SELECT 不会为它们返回任何结果。然后，他们将几乎同时尝试插入，此时唯一能保存数据完整性的是唯一的数据库索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:24:26.610

将此添加到 user.rb 中：

> validates_uniqueness_of ：用户名

来源： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

# jquery - 获取动画滚动的每个锚链接的目标（jQuery scrolltop）

> ID：15347870
> 
> 赞同：0
> 
> 时间：2013-03-11T20:22:21.703
> 
> 标签：jquery, jquery-animate, anchor, href, scrolltop

谁能告诉我如何编辑此代码，使其适用于所有具有“enablescroll”类的锚链接，然后滚动到它们各自的目标ID？

现在我有：

```
<script>
$(document).ready(function() {
    $('.enablescroll').click(function(){  //when links with class "enablescroll" clicked
        $('.pagecontainer').animate({  //animate this container not the viewport
            scrollTop: $("#target").offset().top  //scroll to the div with id "target"
        }, 1000);
    });
});
</script> 
```

这显然只有在我有 1 个名为“target”的滚动目标时才有效。但我有 50 个链接，每个链接都有不同的目标 ID，如下所示：

```
<div class="pagecontainer">

<a href="#section1" class="enablescroll">Section 1</a>
<a href="#section2" class="enablescroll">Section 2</a>
<a href="#section3" class="enablescroll">Section 3</a>
<a href="#section4" class="enablescroll">Section 4</a>
<a href="#section5" class="enablescroll">Section 5</a>

....

<div id="section1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros ipsum, ullamcorper in tincidunt ut, fringilla vel risus. Cras purus arcu, vulputate eu tempus sit amet, gravida et diam. Nulla commodo aliquam metus.</div>

<div id="section2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros ipsum, ullamcorper in tincidunt ut, fringilla vel risus. Cras purus arcu, vulputate eu tempus sit amet, gravida et diam. Nulla commodo aliquam metus.</div>

<div id="section3">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros ipsum, ullamcorper in tincidunt ut, fringilla vel risus. Cras purus arcu, vulputate eu tempus sit amet, gravida et diam. Nulla commodo aliquam metus.</div>

<div id="section4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros ipsum, ullamcorper in tincidunt ut, fringilla vel risus. Cras purus arcu, vulputate eu tempus sit amet, gravida et diam. Nulla commodo aliquam metus.</div>

<div id="section5">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros ipsum, ullamcorper in tincidunt ut, fringilla vel risus. Cras purus arcu, vulputate eu tempus sit amet, gravida et diam. Nulla commodo aliquam metus.</div>

</div> 
```

如何获取每个链接的目标，然后将它们分配给该滚动脚本？我记得语法是这样的：

```
$(this.getAttribute("href")) 
```

但我不知道其余的语法如何。

谢谢。

# android - ScrollView 程序化滚动

> ID：15347872
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:22:25.157
> 
> 标签：android, scrollview

我想制作一个 .xml 文件，其中有一个滚动视图，我基本上可以“旋转”并让它在列表中选择一个随机项目。有谁知道我如何做到这一点并保持视觉旋转？我不希望它只是选择一个随机项目然后将其打印到屏幕上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:33:15.567

[ScrollView Documentation](http://developer.android.com/reference/android/widget/ScrollView.html)

Have a look at :

```
void fling(int velocityY)

final void smoothScrollBy(int dx, int dy);

final void smoothScrollTo(int x, int y); 
```

# xcode - 如何在 Xcode 中引用使用不同配置构建的依赖项目？

> ID：15347875
> 
> 赞同：3
> 
> 时间：2013-03-11T20:22:30.623
> 
> 标签：xcode, xcodebuild, build-dependencies

我有两个 Xcode 项目：`Super`和`Sub`. `Super`有一个自定义配置：`Enterprise`. `Sub`只有默认配置：`Debug`和`Release`. `Super`目标依赖于`Sub`. 当我`Super`使用`Enterprise`配置`Sub`构建时，使用其默认配置构建：`Release`. 这会产生以下层次结构：

```
Build
|-Products
  |-Enterprise-iphoneos
    |-Super.app
  |-Release-iphoneos
    |-libSub.a
    |-Sub
      |-Sub.h 
```

Clang 无法构建，因为`libSub.a`并且`Sub/Sub.h`通常与 位于同一目录中`Super.app`，但由于`Sub`使用`Release`配置而不是`Enterprise`. 我控制这两个项目，所以我可以轻松地添加`Enterprise`配置`Sub`，但我觉得必须有一个[Xcode Build Settings](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)的神奇咒语才能使这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:55:35.417

通过在我的父项目（通常是您的应用程序）中使用 Xcode 配置文件，我已经解决了完全相同的问题。

这些是我采取的步骤：

1.  通过 New > Other > Configuration File 在 Xcode 中创建一个基本配置文件。

2.  编写你的基本`xcconfig`文件，我的看起来有点像这样：

    ```
    /// Configure Search Paths
    HEADER_SEARCH_PATHS = "$(BUILT_PRODUCTS_DIR)/include" "$(BUILT_PRODUCTS_DIR)/usr/local/include"
    LIBRARY_SEARCH_PATHS = "$(SRCROOT)/../Externals/Libraries/GoogleAnalytics"

    /// Linker flags
    OTHER_LDFLAGS=-ObjC -all_load 
    ```

3.  这里要注意的是，这`$(BUILT_PRODUCTS_DIR)`是以下内容的串联：

    ```
    $(BUILD_DIR)/$(CONFIGURATION)-$(PLATFORM_NAME) 
    ```

4.  为自定义配置编写专门的配置。我创建了一个复制 Release 的 Ad Hoc 配置，因此我的搜索路径现在如下所示：

    ```
    #include "BaseConfig.xcconfig"

    /// Ad Hoc search paths
    HEADER_SEARCH_PATHS = "$(BUILD_DIR)/Release-$(PLATFORM_NAME)/include" "$(BUILD_DIR)/Release-$(PLATFORM_NAME)/usr/local/include"
    LIBRARY_SEARCH_PATHS = "$(BUILD_DIR)/Release-$(PLATFORM_NAME)" "$(SRCROOT)/../Externals/Sources/GoogleAnalytics" 
    ```

然后在您的应用程序项目的信息选项卡中选择您的配置，使用基本配置进行调试和发布，然后为您的自定义配置使用特殊配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-06T21:47:31.307

我在我的一个应用程序中遇到了类似的问题。在 Xcode 12.4 中，我可以通过将额外配置（我称之为 Ad Hoc for Test）的**系统框架搜索路径**`$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)`设置为.

通过选择 Target，然后选择 Build Settings 选项卡，可以在项目中找到此设置。我建议搜索“系统框架”来找到它。添加路径后，Xcode 会将其转换为系统上的实际路径，如我的屏幕截图所示。这也适用于归档。

[![构建设置示例](../Images/694de5a3ce67b98f231f4c53b16400ee.png)](https://i.stack.imgur.com/SFXE4.png)

# c# - 视图中加载的某些资源未本地化，为什么？

> ID：15347877
> 
> 赞同：8
> 
> 时间：2013-03-11T20:22:36.740
> 
> 标签：c#, .net, asp.net-mvc, localization, resources

我正在创建一个 ASP.NET MVC 4 应用程序并使用默认的 .net 资源进行本地化。
现在我有以下奇怪的行为，但仅在我的实时服务器上，而不是在我的开发机器上：
![在此处输入图像描述](../Images/a43cf0bb52d7105eae819a7562dfe79c.png)

红色和绿色通过`@Namespace.Properties.Resources.Key`直接在视图中加载，黄色通过`[Display[...]`模型中的属性和`@Html.DisplayFor(...)`.

**有谁知道为什么在实时服务器上有些加载错误？**
加载正确/实际的资源文件，作为本地化显示属性，在上次上传之前添加并且它们已正确加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:42:22.903

我发现了问题：
过去我错误配置了我的一个插件，将基础项目的资源包含到其输出中，因此这个“旧”资源文件仍然从资源中的旧发布放置在服务器上插件的文件夹，在加载插件时被复制到基本资源文件夹 - >“新上传的”原始基本资源文件被插件文件夹中的旧文件覆盖。
我只需要从服务器中删除那个文件，现在它似乎可以工作了。

关于我的声明**“加载了正确/实际的资源文件，因为在上次上传之前添加了本地化显示属性并且它们被正确加载”**：
提到的显示属性在不同的资源文件中（我有几个），这不是覆盖，因为永远不会像另一个插件那样发布错误。*

# mysql - 构建一个统计相似条目的数据库

> ID：15347882
> 
> 赞同：0
> 
> 时间：2013-03-11T20:22:47.440
> 
> 标签：mysql, database, sqlite

我是数据库新手。我正在使用`mysqlite3`. 我在表中有`ArtistName`,`SongTitle`和`AlbumTitle`字段。`Music`数据库的主要目的是查询它并返回所有歌曲少于 3 首的艺术家。

为了实现这一点，我认为我需要某种“歌曲计数”条目，每次添加来自同一艺术家的歌曲时，该条目都会增加。但是，我不确定如何创建动态条目。我知道 AUTO_INCREMENT 关键字，它具有我正在寻找的动态属性，但没有条件递增。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:28:20.423

除非我在您的请求中遗漏了某些内容，否则您不需要`songCount`列，您可以使用以下查询轻松获取少于 3 首歌曲的艺术家：

```
select artistname
from music
group by artistname
having count(SongTitle) <3 
```

这将为`artistname`每首歌曲总数少于三首的艺术家返回。

然后，如果您想对此进行扩展，可以使用以下命令返回`music`表中艺术家少于 3 首歌曲的所有列：

```
select m1.*
from music m1
where exists (select artistname
              from music m2
              where m1.artistname = m2.artistname
              group by artistname
              having count(SongTitle) <3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:29:32.943

您不需要“计数”字段。试试这个...

```
SELECT ArtistName
FROM Music
GROUP BY ArtistName
HAVING Count(ArtistName) < 3 
```

这是假设每首歌只有一个条目。

# java - URLEncoder 将空格编码为加号，然后编码为 %20。如何保持统一？

> ID：15347883
> 
> 赞同：0
> 
> 时间：2013-03-11T20:22:47.883
> 
> 标签：java, urlencode

我有一些 Java 代码接受一个 String 并将 a 转换`space`为`+`. 但是当我的程序读回该字符串时，它`+`会将`%20`.

有什么办法让我保持一致，以便它：

1.  要么将`space`直线转换为`%20`,要么
2.  `t convert the`不+ `to`% 20`

这是我的代码的样子：

```
import java.net.URLEncoder;
...
String fileNameEncoded = URLEncoder.encode(filename); 
```

所以如果`filename`是的话`foo bar.html`，第一遍会给我`foo+bar.html`，第二遍会给我`foo%20bar.html`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:03:11.697

为了理解“直接到 %20 的空格”，我们首先应该理解我们为什么要对 URL 进行编码，答案是因为 URL 中有一些字符不允许用于 URL 格式，例如“&”、“=”、“”和等等，因为它们会导致 URL 解析失败。出于这个原因，URLEncoder 将这些字符替换为 URL 格式中允许的一些常规其他字符。并且作为 URL 解析器，它会将那些常规字符替换回“&”、“=”、“”等。

# javascript - JavaScript 库触发一次调整大小/按键事件？

> ID：15347884
> 
> 赞同：0
> 
> 时间：2013-03-11T20:22:54.413
> 
> 标签：javascript, events, shared-libraries

不久前我发现了一个库，它是 XAML/.NET 解决方案的副本，用于处理多次触发的事件，我希望你们都可以帮助我找到它。

问题是当您捕获窗口调整大小事件时，它会在宽度或高度的每个像素变化时触发。按键事件也是如此；我只想在用户真正完成输入一段时间后触发我的自动完成搜索事件。

所以而不是：

```
$(window).keypress(function() { makeAjaxAutocompleteCall() }); 
```

我知道图书馆支持这样的东西：

```
$(window).collect("keypress", 250, function() { makeAjaxAutocompleteCall(); }); 
```

库在哪里收集按键事件，并且每 250 毫秒只触发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:40:29.423

我发现了一篇非常详尽的博客文章，解释了 Debounce 和 Throttle

[http://drupalmotion.com/article/debounce-and-throttle-visual-explanation](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)

> 两种技术都回答了同一个问题“随着时间的推移，可以多久调用一次某个函数？” 以不同的方式：
> 
> Debounce：将其视为“将多个事件组合在一起”。想象一下你回家，进入电梯，门正在关上……突然你的邻居出现在大厅里并试图跳上电梯。要有礼貌！并为他打开门：你正在阻止电梯离开。考虑到第三个人可能会再次发生同样的情况，依此类推……可能会延迟出发几分钟。
> 
> 节流阀：把它想象成一个阀门，它调节处决的流程。我们可以确定一个函数在特定时间内可以被调用的最大次数。所以在电梯的类比中......你有足够的礼貌让人们进入 10 秒，但一旦延迟过去，你必须走！

# javascript - 谷歌徽标动画，它们是 Flash、JavaScript 还是其他东西，以及如何通常检查所使用的内容？

> ID：15347890
> 
> 赞同：1
> 
> 时间：2013-03-11T20:23:24.467
> 
> 标签：javascript, flash

在 Google 的 logo 动画中，用户通常可以与 logo 进行交互：例如，就像一个游戏，其中有一些可以按下的按钮之类的东西，但我很好奇是否有人能告诉我他们用什么来创建这个- Flash、JavaScript 还是其他东西？

我感觉他们使用 JavaScript，但有人可以证明这一点吗？另外，我以后如何检查这个，以便我可以了解他们将来使用什么？

[https://www.google.no](https://www.google.no)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:27:18.943

Basically, nowadays, they use HTML5, CSS3 and JavaScript/jQuery. Most of the time, they use `canvas` technology, and sometimes they manipulate a sprite sheet via CSS3\. For sound, they use Java, but occasionally you'll see HTML5 `audio` technology, with Java as a fallback. Older Google animations were made purely with Java using HTML only as the vehicle.

Sometimes, they'll also use animated gifs as in [Heinrich Rudolf Hertzs 155th Birthday Doodle](http://www.google.com/doodles/heinrich-rudolf-hertzs-155th-birthday). (For the more simple ones).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:30:57.040

谷歌涂鸦使用 Javascript、CSS 和 HTML。查看它不是 Flash 应用程序的最快方法是右键单击涂鸦，如果是 Flash，您将在右键菜单“关于 Adob​​e Flash Player”中看到。如果它没有说它不是flash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:50:33.393

是的，他们使用 javascript 为 DOM 的元素和图形的 css sprite/atlases 元素设置动画。

一篇关于[Google Doodles 工作原理的精彩文章](http://zoompf.com/2012/04/how-do-google-animated-doodles-work)

[使用 css3 动画](http://thecodeplayer.com/walkthrough/google-doodle-animation-in-css3-without-javascript)创建自己的 Google 涂鸦的分步教程

编辑：www.google.no 上的涂鸦也是用 HTML5 画布元素构建的。

# jquery - jquery，不能删除新创建的li元素

> ID：15347892
> 
> 赞同：0
> 
> 时间：2013-03-11T20:23:27.143
> 
> 标签：jquery

作为一个 uni 项目，我正在制作购物车，到目前为止，您可以将产品添加到购物车，如果刷新页面，您可以从购物车中删除商品。

但是，当商品被添加到购物车时，您必须先刷新浏览器才能将其从购物车中删除。这是为什么？

这是我的删除商品表单购物车功能

```
 $('.del').on("click",function(){
    var id= this.id;
    var productId = $('#productId-'+id).text();
    var productPrice = $('#price-'+id).text();
    var total = $('#total').text();
    var newPrice = (parseFloat(total) - parseFloat(productPrice)).toFixed(2);
    var dataString = 'id='+ id;
    cartSize--;

    $('#total').html(newPrice);     
    $("#cart-"+id).slideUp('slow', function() {$(this).remove();});

    $.ajax({
        type: "POST",
        url: "resources/del.php",
        data: dataString,
        cache: false,
        success: function(html){
            $('#added-'+productId).fadeOut('Fast');
            $('#product-'+productId).delay(600).fadeIn('Fast');

            if(cartSize == 0){
                $('#noItems').fadeIn('Fast');
                $('#mainCart').fadeOut('Fast');     
            }
        }
    });
    return false;   

}); 
```

});

这是我的添加到购物车功能：

```
 $('.addToCart').click(function(){
    var id = this.id;
    var price = parseFloat($('#priceAdd-'+id).val()).toFixed(2);;
    var name = $('#name-'+id).val();
    var total =(parseFloat($('#total').text())+parseFloat(price)).toFixed(2);
    cartSize++;

    $('#product-'+id).fadeOut('fast');
    $('#added-'+id).delay(500).fadeIn('fast');

    $.ajax({
        type: "POST",
        url: 'resources/addToCart.php',
        data: { itemId: id , name: name, price: price},
        cache: false,
        success: function(html){
            $("ol").append(html).slideDown("slow");
            $('#noItems').fadeOut('fast');
            $('#total').html(total);
            $('#mainCart').fadeIn('fast');
        }
    });
}); 
```

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:26:03.800

您需要使用`.on()`它以使其适用于未来的元素，就像您*使用已弃用* `.live()`的功能一样。

注意 .on() 不仅仅是 .live() 的别名，语法不同。

```
$(document).on('click', '.del', function(){...}); 
```

我在那里使用过文档，但最好选择一个元素作为您动态创建的元素的更接近的父元素存在，例如

```
$('#basket').on('click', '.del', function(){...}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:28:34.093

您不想使用`.live()`，因为：“从 jQuery 1.7 开始，不推荐使用 .live() 方法。”

你想用`.on()`

```
$('#myListItems').on("click", ".del" ,function(e) {
   $(e.target).remove()
}); 
```

[jQuery 的 on 方法](http://api.jquery.com/on/)

# c++ - C++ 程序中未定义的引用错误

> ID：15347896
> 
> 赞同：0
> 
> 时间：2013-03-11T20:23:35.927
> 
> 标签：c++, xml-parsing, compiler-errors, linker-errors

我正在使用 RapidXML 解析 C++ 中的 XML 文件。我制作了 treeNode.h 和 treeNode.cpp 文件。我正在制作一个 treeNode 对象来帮助我进行解析。但是，当我尝试这样做时，它给了我一个未定义的参考错误。给我错误的代码行（我认为）是以下行：

```
treeNode<xml_node<> > * tn = new treeNode<xml_node<> >(root_node); 
```

如果你想知道我从哪里得到 root_node，它在我的 main.cpp 中定义如下：

```
xml_document<> doc;
doc.parse<0>(&buffer[0]);               
xml_node<> * root_node = doc.first_node(); 
```

错误信息是这样的：

```
undefined reference to `treeNode<rapidxml::xml_node<char> >::treeNode(rapidxml::xml_node<char>*)'
collect2: ld returned 1 exit status 
```

这些是我在 treeNode.h 中的三个构造函数：

```
treeNode(T* element1);
treeNode(T* element1, T* parent1);
treeNode(T* element1, T* parent1, vector<treeNode<T>*> child1); 
```

任何有关修复此错误的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:38:09.057

我怀疑你已经实现了`treeNode`“treeNode.cpp”中的方法。

在这种情况下，它们还没有被实例化。

*您的*所有*`treeNode`实现都需要在`treeNode.h`标头中，因此编译器可以在使用函数时实例化它们。
否则，您将只有声明，没有定义——因为编译器无法生成任何定义——并且您将得到相同的链接错误，就好像您根本没有任何实现一样。*

# django - Django通过一些引用条件过滤对象

> ID：15347899
> 
> 赞同：0
> 
> 时间：2013-03-11T20:23:53.073
> 
> 标签：django, reference, filtering

在 Django 中，我有两个模型，类别和产品，产品以这种方式引用类别。

```
class Category(models.Model):
    name = models.CharField(max_length=255)

class Product(models.Model):
    category = models.ForeignKey(Category, null=True) 
```

我想获得至少被一种产品引用的所有类别。

我已经通过这个解决方案实现了我的目标：

```
class Category(models.Model):
        name = models.CharField(max_length=255)

        def has_product(self):
             products = self.product_set.all()
             if(len(products) > 0):
                   return True
             else:
                   return False

category_list = []

for cat in Category.objects.all(): 
        if cat.has_products():
             category_list.append(cat) 
```

有没有更智能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:31:39.387

看起来你可以用一个列表理解来做到这一点：

```
cats_with_prod = [c for c in Category.objects.all() if c.product_set.exists()] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:35:14.147

您可以通过列表理解来做到这一点：

```
cats_with_prod = [c for c in Category.objects.all() if c.product_set.exists()] 
```

但是您可以在一个查询中完全在 DB 中完成：

```
cats_with_prod = Category.objects.filter(product_set__isnull=False).distinct() 
```

# java - 如何在java中创建可执行文件？

> ID：15347901
> 
> 赞同：2
> 
> 时间：2013-03-11T20:24:06.223
> 
> 标签：java, eclipse

我在 Eclipse 中完成了我的项目。我的Eclipse 工作区中有`*.java`、`.project`和文件。如何创建可执行文件？现在。`.classpath``*.class`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:26:24.340

Eclipse will build an executable jar file for you, which is run with Java (java.exe if you're on windows) to launch your application. On a machine correctly set up with Java installed, double clicking an executable jar should run the program.

If you want an exe, then there [are ways to do it](http://launch4j.sourceforge.net/) that will generally wrap the jar file (and sometimes the JDK.) However, first ask yourself *why* you're doing it this way - often it's just a habitual desire to have an exe, without any great technical reason. All you're really doing through this is taking a cross-platform executable, and making it only work on Windows.

If you're distributing your application and your users expect an exe, then consider building platform dependant installers for each OS you wish to support, but leaving the jar file in tact. The average user will never usually need to touch it directly if your installer places shortcuts in the correct locations, they'll only ever need to run the installer directly (so your application file format becomes irrelevant, just an implementation detail as far as they're concerned.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:26:23.240

You need to create a .jar file from your project. On windows normally with double click those files get executed if a java virtual machine is installed.

There are solutions to wrap an .exe file around your .jar, but I don't know how good they are so I can't suggest anything.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:26:34.753

Java executables are runnable .JAR files. You need to export as Runnable Jar.

In Eclipse:

1.  Right click on your project
2.  Export
3.  Export...
4.  Runnable JAR file

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:35:12.997

就像在其他回复中提到的那样，您需要创建一个`jar`文件，将所有已编译的类打包。从 Eclipse 导出时，您可以选择导出项目需要运行的依赖项。

如果你想创建一个`exe`文件，你可以使用一些软件巫婆包/包装`jar(s)`成一个可执行文件。您可以尝试[jsmooth](http://jsmooth.sourceforge.net/)，它提供了几个 exe 包装器，并且能够将您的 jar 及其依赖项集成到一个文件中，您可以分发并每次点击执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:27:15.597

You would have to use chmod in the command line. This argument can change the permission of the file. It depends on three groups. Reading, writing, and executing can all be altered using this argument.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T20:28:41.007

If you want an IDE agnostic solution, go for [launch4j](http://launch4j.sourceforge.net/)

# background - 如何在后台运行windows phone 8陀螺仪？

> ID：15347903
> 
> 赞同：0
> 
> 时间：2013-03-11T20:24:17.643
> 
> 标签：background, windows-phone-8, gyroscope

我正在尝试创建一个使用陀螺仪的 windows phone 8 应用程序。我想在后台运行这个应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:02:59.867

Windows Phone 应用程序无法在后台连续运行。

此外，只有特定的 API 可以在后台代理中使用。位于命名空间中，这是[不能使用的命名空间](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)`Gyroscope`之一。`Miscrosoft.Devices.Sensors`

即使有可能，你能做的最好的事情就是让它每半小时左右运行几秒钟，但我想这将没有什么价值。

因此，总而言之：您不能在后台使用陀螺仪。

# c - 信号终止处理程序和清理操作

> ID：15347907
> 
> 赞同：0
> 
> 时间：2013-03-11T20:24:42.170
> 
> 标签：c, signals, handler, termination

我必须管理以下信号：`SIGHUP`, `SIGINT`, `SIGQUIT`,`SIGTERM` 下面的代码是一个示例`SIGHUP`：

```
int sock_ds, acc_sock_ds; //TCP sockets

void shutdown(int sig){
    close(sock_ds);
    close(acc_sock_ds);
    raise(sig);
}

/*Sets the disposition of a signal
 * Returns 0 on success, -1 on error */
int sig_disp(int sig, void (* handler)(int), int flag){
    struct sigaction sa;
    memset((char *)&sa, 0, sizeof(sa));
    sa.sa_handler = handler;
    sa.sa_flags = flag;
    sigemptyset(&sa.sa_mask);
    return sigaction(sig, &sa, NULL);
}
int main(){

    /*...*/

    /*--- Signal management ---*/
    sigset_t set;
    /*sigset filling with all signal*/
    if(sigfillset(&set) == -1){
        fprintf(stderr, "Signal set fill error\n");
        exit(EXIT_FAILURE);
    }

    /*...*/ 

    if(sigdelset(&set, SIGHUP) == -1){
        fprintf(stderr, "Signal set action error\n");
        exit(EXIT_FAILURE);
    }

    /*...*/

   /*Changing signals disposition*/
   if(sig_disp(SIGHUP, shutdown, SA_RESETHAND));

   /*...*/

   /*Remaining signals are inserted into process signal mask (blocked) */
   if(sigprocmask(SIG_BLOCK, &set, NULL) == -1){
       fprintf(stderr, "Process signal mask action error\n");
       exit(EXIT_FAILURE);
   }

   /*...*/
} 
```

我的想法是重新激活信号的默认处理，即终止进程并在清理操作后重新引发相同的信号。

我如何传递`sig`给关机功能`sa.sa_handler = handler;`？

此外，在这些情况下，通常会采取哪些清洁措施？我的场景是带有 TCP 套接字和一些打开文件的单线程服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:35:16.800

退出时**无需**关闭套接字、文件、任何内容或释放内存。无论如何，操作系统都会这样做，你只是在浪费时间做两次事情。

终止只是使用

```
exit(0); 
```

要将信号处理程序重置为原始处理程序，而不是将 sigaction 的最后一个参数设置为 NULL，您必须传递一个指针，该指针将设置为前一个处理程序的地址。

当您使用*信号*更改处理程序时，它将返回前一个处理程序的指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:33:45.710

当您说“管理以下信号”时，您要实现什么目标？

如果只是在收到通常会终止进程的信号后进行一些自定义清理，则可以使用对[atexit](http://linux.die.net/man/3/atexit)的调用来注册清理函数。

# javascript - 如何创建一个抓取特定网页的 API

> ID：15347909
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:24:47.167
> 
> 标签：javascript, web-crawler

我想设计/创建一个抓取网页上数据的 API（网页链接将作为输入提供）并以 JSON/xml 格式返回数据。

我正在寻求一些帮助，以便我可以开始寻找特定的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:23:37.427

问题不是很清楚，但是如果您只想解析输入的 HTML 页面并从中获取外链，您可以执行以下操作

1.  获取 HTML 页面作为输入流
2.  使用 jtidy 或任何其他 HTML DOM 解析器创建一个 DOM。
3.  一旦你有一个 DOM，得到所有
4.  ，href，元素，你将拥有所有的外链。

一般来说，当您说爬行时，它应该涉及多个页面，在一个图表中，您可以使用这些链接从一个页面移动到另一个页面。所以抓取特定页面是不正确的。

# sql - 基于多列返回行

> ID：15347912
> 
> 赞同：0
> 
> 时间：2013-03-11T20:24:59.763
> 
> 标签：sql

我是 Microsoft Query 新手。我有一张桌子，上面有类似的信息

```
ckno    ckdate    type  
123     12/1/12     PV  
654     11/6/12     EP
123     12/14/12    EP
852     01/3/13     PV 
```

我想返回 ck# 相同的 PV 或 EP 类型的所有行（第 1 行和第 3 行）。sql 看起来像什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:52:43.007

你可以试试这个，它应该允许你在类型上有多个差异：

```
 SELECT *
    FROM SomeTable t
    WHERE EXISTS 
        (SELECT 1 FROM SomeTable x 
        WHERE x.ckno = t.ckno AND x.type <> t.type) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:35:44.733

```
SELECT *
FROM YourTable T
WHERE EXISTS (  SELECT ckno 
                FROM YourTable
                WHERE [type] IN ('PV','EP')
                AND ckno = T.ckno
                GROUP BY ckno
                HAVING COUNT(*)>1) 
```

# isabelle - 将部分定义提升为商类型

> ID：15347913
> 
> 赞同：2
> 
> 时间：2013-03-11T20:25:01.090
> 
> 标签：isabelle

`disj_union`我想提升到商类型 ( ) 的集合上有一个部分定义的运算符 (下面`natq`)。从道德上讲，我认为这*应该*没问题，因为总是可以在等价类中找到定义了运算符 [*] 的*一些代表。*但是，我无法完成提升定义保留等价性的证明，因为`disj_union`只是部分定义。在下面的理论文件中，我提出了一种我找到的定义`disj_union`运算符的方法，但我不喜欢它，因为它具有很多功能，`abs`而且`Rep`我认为它很难使用（对吗？）。

使用 Isabelle 中的商来定义这种事情的好方法是什么？

```
theory My_Theory imports 
  "~~/src/HOL/Library/Quotient_Set" 
begin

(* A ∪-operator that is defined only on disjoint operands. *)
definition "X ∩ Y = {} ⟹ disj_union X Y ≡ X ∪ Y"

(* Two sets are equivalent if they have the same cardinality. *)
definition "card_eq X Y ≡ finite X ∧ finite Y ∧ card X = card Y"

(* Quotient sets of naturals by this equivalence. *)
quotient_type natq = "nat set" / partial: card_eq
proof (intro part_equivpI)
  show "∃x. card_eq x x" by (metis card_eq_def finite.emptyI)
  show "symp card_eq" by (metis card_eq_def symp_def)
  show "transp card_eq" by (metis card_eq_def transp_def)
qed

(* I want to lift my disj_union operator to the natq type. 
   But I cannot complete the proof, because disj_union is
   only partially defined. *)
lift_definition natq_add :: "natq ⇒ natq ⇒ natq"
is "disj_union"
oops

(* Here is another attempt to define natq_add. I think it
   is correct, but it looks hard to prove things about, 
   because it uses abstraction and representation functions
   explicitly. *)
definition natq_add :: "natq ⇒ natq ⇒ natq"
where "natq_add X Y ≡ 
  let (X',Y') = SOME (X',Y'). 
  X' ∈ Rep_natq X ∧ Y' ∈ Rep_natq Y ∧ X' ∩ Y' = {} 
  in abs_natq (disj_union X' Y')"

end 
```

[*] 这有点像如何只在绑定变量不冲突的条件下定义避免捕获替换；始终可以通过重命名为 alpha 等价类中的另一个代表来满足的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:13:13.507

像这样的东西怎么样（只是一个想法）：

```
definition disj_union' :: "nat set ⇒ nat set ⇒ nat set"
where "disj_union' X Y ≡ 
  let (X',Y') = SOME (X',Y'). 
  card_eq X' X ∧ card_eq Y' Y ∧ X' ∩ Y' = {} 
  in disj_union X' Y'"

lift_definition natq_add :: "natq ⇒ natq ⇒ natq"
is "disj_union'" oops 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:43:18.523

为了记录，这是 Ondřej 的建议（嗯，对其进行了轻微修改，其中只有一个操作数被重命名，而不是两个）执行完成......

```
(* A version of disj_union that is always defined. *)
definition disj_union' :: "nat set ⇒ nat set ⇒ nat set"
where "disj_union' X Y ≡ 
  let Y' = SOME Y'. 
  card_eq Y' Y ∧ X ∩ Y' = {} 
  in disj_union X Y'"

(* Can always choose a natural that is not in a given finite subset of ℕ. *)
lemma nats_infinite:
  fixes A :: "nat set"
  assumes "finite A"
  shows "∃x. x ∉ A"
proof (rule ccontr, simp)
  assume "∀x. x ∈ A"
  hence "A = UNIV" by fast
  hence "finite UNIV" using assms by fast
  thus False by fast
qed

(* Can always choose n naturals that are not in a given finite subset of ℕ. *)
lemma nat_renaming:
  fixes x :: "nat set" and n :: nat
  assumes "finite x" 
  shows "∃z'. finite z' ∧ card z' = n ∧ x ∩ z' = {}"
using assms
apply (induct n)
apply (intro exI[of _ "{}"], simp)
apply (clarsimp)
apply (rule_tac x="insert (SOME y. y ∉ x ∪ z') z'" in exI)
apply (intro conjI, simp)
apply (rule someI2_ex, rule nats_infinite, simp, simp)+
done

lift_definition natq_add :: "natq ⇒ natq ⇒ natq"
is "disj_union'"
apply (unfold disj_union'_def card_eq_def)
apply (rule someI2_ex, simp add: nat_renaming)
apply (rule someI2_ex, simp add: nat_renaming)
apply (metis card.union_inter_neutral disj_union_def empty_iff finite_Un)
done 
```

# python - 图像处理python

> ID：15347918
> 
> 赞同：0
> 
> 时间：2013-03-11T20:25:17.533
> 
> 标签：python, image, image-processing

我需要使用 python 为图像构建一个 15x15 的均值滤波器。

以下是我的代码不断产生的错误：

```
Traceback (most recent call last):
  File "C:\Documents and Settings\User\My Documents\school\HUB\coding\first attempt.py", line 43, in <module>
    Array.append(Im1.getpixel((X,Y)))
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 950, in getpixel
    return self.im.getpixel(xy)
IndexError: image index out of range 
```

这是我的代码：

```
import numpy as np
from matplotlib import pyplot as plt
import Image as im
import math
import scipy as sp, Image as im, sys

def median(Array):
    sorts = sorted(Array)
    length = len(sorts)
    if not length % 2:
        return (sorts[length / 2] + sorts[length / 2-1]) / 2.0
    return sorts[length / 2]

Im1 =im.open('malaria.jpg')
#Im1.show()

[ymax,xmax] = Im1.size
print 'height =',ymax,'pixels'
print 'length =',xmax,'pixels'

Array =[]
Im2 = im.new ('RGB', (xmax-5, ymax-5))

i=5
for i in range (5, (xmax-8)):
    j=5
    for j in range(5, (ymax-8)):
        Array=[]
        k=0
        for k in range (0, 9):
            l=0
            for l in range (0, 9):
                X=(i-5+k)
                Y=(j-5+l)
                Array.append(Im1.getpixel((X,Y)))
                l+=1
            k=+1
        k=0

        m= int(np.mean(Array))
        pixel=mean,mean,mean
        Im2.putpixel ((i-5,j-5),(pixel))
        j+=1
    i+=1
print "new Image"
Im2.save('output.jpg')
Im2.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:33:06.437

您应该使用 np.convolve() 来获得平滑的图像。就像是

```
npix=15
smoothed = np.convolve(Im1, np.ones((npix, npix))/(npix**2)) 
```

如果你真的想要一个均值过滤器，应该可以解决问题。对于中值滤波器使用`scipy.signal.medfilt`

```
smoothed = scipy.signal.medfilt(Im1, (15, 15)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-06T05:39:12.063

看看[这个](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.median_filter.html)链接。就均值而言，均值滤波器类似于模糊或与一个矩阵卷积（您也应该对其进行归一化）以获得正确的描述，请参阅[此](http://homepages.inf.ed.ac.uk/rbf/HIPR2/mean.htm)

# c# - Windows 8 (RT) 上的 PDF、DOC 库

> ID：15347921
> 
> 赞同：0
> 
> 时间：2013-03-11T20:25:22.847
> 
> 标签：c#, pdf, doc

我正在寻找一个库、SDK 以将 PDF、DOC 阅读器直接集成到用 C# 开发的 Windows 应用商店 (Windows RT) 应用程序中。

经过一番研究，我发现有一些像 Foxit SDK 这样的 PDF SDK 非常昂贵。

如果有人已经尝试过 PDF 库，哪个库是最好和最便宜的？

是否有可能将 DOC Reader 直接集成到应用程序中，而不是使用 Office Reader 打开文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:09:33.497

iTextSharp 与 Windows RT 不兼容。iTextSharp 需要 System.IO 类并且不使用 Windows.Storage 类（在 WinRT 中 System.IO 已被 Windows.Storage 取代）

我认为没有可用于 WinRT 的免费 pdf 库。

我在 PDFNet 上工作，它非常强大但很昂贵：

[http://www.pdftron.com](http://www.pdftron.com)

其他一些付费 pdf 库：

[http://www.foxitsoftware.com/mswin8metro](http://www.foxitsoftware.com/mswin8metro)
[http://www.leadtools.com/sdk/winrt.htm](http://www.leadtools.com/sdk/winrt.htm)
[http://www.syncfusion.com/products/winrt](http://www.syncfusion.com/products/winrt)

# angularjs - 从链接函数范围内访问 DOM.$watch: 替换设置为 true vs false

> ID：15347922
> 
> 赞同：1
> 
> 时间：2013-03-11T20:25:28.607
> 
> 标签：angularjs, angularjs-directive

我需要从我的链接函数中操作 DOM。

我注意到，当我将替换设置为 false 时，我能够访问 DOM（[http://jsfiddle.net/bcsU8/](http://jsfiddle.net/bcsU8/)）

```
//body of directive
return {
    restrict: 'A',
    replace: false,
    scope: {
        bar: '@myDir'
    },
    template: '<div id="{{bar}}">foo bar is <span>{{bar}}</span></div>',
    link: function(scope, element, attr) {
        scope.$watch('myDir', function(value) {
            console.log('In watch - scope.bar: ', scope.bar);
            console.log('DOM accesible? ', $("#"+scope.bar).length == 1);
        });
    }
}; 
```

但是当我将其设置为 true 时，我不能（[http://jsfiddle.net/PpXgb/](http://jsfiddle.net/PpXgb/)）

```
return {
    restrict: 'A',
    replace: true,
    scope: {
        bar: '@myDir'
    },
    template: '<div id="{{bar}}">foo bar is <span>{{bar}}</span></div>',
    link: function(scope, element, attr) {
        scope.$watch('myDir', function(value) {
            console.log('In watch - scope.bar: ', scope.bar);
            console.log('DOM accesible? ', $("#"+scope.bar).length == 1);
        });
    }
}; 
```

为什么我在替换打开时无法访问 DOM？我在文档中没有发现任何内容表明这两种情况之间应该存在差异。

从有关链接功能的文档中，听起来 DOM 在链接过程之后可用：（[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)）

链接后功能 在子元素链接后执行。**在 post-linking 函数中进行 DOM 转换是安全的。**

请注意，在我的 scope.$watch 中，我实际上是在调用一个期望 DOM 存在的 jQuery 插件，而不是通过 $() 直接访问元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:35:28.930

`link`在这种情况下，您的问题是当函数运行时元素尚未附加到 DOM 。对于您要尝试做的事情，这并不是真正的问题。问题是您尝试不通过`element`传递给`link`函数的对象而是通过 jQuery 选择器来访问元素，从而打破了最佳实践。尝试使用该`element`对象，我想你会发现你的代码突然可以工作了。

但是指令方法的执行顺序有一些注意事项，因此在*某些*情况下这仍然不起作用，但您不太可能在基本指令中遇到它们。同样，您应该阅读[有关指令的指南页面，](http://docs.angularjs.org/guide/directive)以更好地了解 AngularJS 如何处理指令。

# php - HBase - 如何根据 key-timestamp-id 进行查询？

> ID：15347924
> 
> 赞同：1
> 
> 时间：2013-03-11T20:25:32.123
> 
> 标签：php, hadoop, hbase, thrift

全部-

HBase 的新手，我终于能够实际获取我曾经存储在 MySQL 中的数据（大约 5000 万行）并将其插入到我的 HBase 表中。

我现在正在尝试根据键查询这些数据并且遇到了一些问题。

基本上我有一个构造如下的键：

> 对象名-创建时间-客户 ID

现在我需要根据对象名和创建时间的范围进行查询，有人知道我该怎么做吗？（我正在使用 PHP/Thrift，但我不需要它作为对此的具体答案）

我可以查询我是否知道确切的行/键，我只需要知道现在如何为中间属性指定一个范围。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:28:02.863

使用扫描，其中开始行是带有 key`objectname-<min created time>-customerid`的行，而停止行是 key `objectname-<max created time>-customerid`。

[http://wiki.apache.org/hadoop/Hbase/ThriftApi#Scanner_methods](http://wiki.apache.org/hadoop/Hbase/ThriftApi#Scanner_methods)

# php - Qt4 中的 PHP unpack() 模拟函数

> ID：15347926
> 
> 赞同：-2
> 
> 时间：2013-03-11T20:25:39.760
> 
> 标签：php, qt, unpack

如何实现 PHP 函数[解包](http://php.net/manual/en/function.unpack.php)的 Qt 逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:32:21.200

基本上，您正在考虑使用 QByteArray，并将输出类型转换为某种格式。

[http://qt-project.org/doc/qt-4.8/qbytearray.html#details](http://qt-project.org/doc/qt-4.8/qbytearray.html#details)

另一种思考方式是，您正在采用某种结构或类型，将其转换为一长串 1 和 0，然后在另一端将其切换回来。

希望有帮助。

# hibernate - 使用 Hibernate 初始化 flyway 的 schema_version 表

> ID：15347927
> 
> 赞同：0
> 
> 时间：2013-03-11T20:25:41.287
> 
> 标签：hibernate, primary-key, flyway

我们目前使用 flyway 作为独立组件来管理我们当前客户的数据库迁移。对于新客户，我们想开始使用 flyway 的 schema_version 表部署我们的应用程序，以及当前版本的条目。我们的应用程序当前使用 Hibernate 来初始化数据库（在安装期间），并提供一个 orm。

当我尝试为 schema_version 创建 xml 映射时，我发现 Hibernate[需要一个主键](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/mapping.html#mapping-declaration-id)，并且根据以下输出`show create table schema_version;`没有主键。

```
CREATE TABLE IF NOT EXISTS `schema_version` (
`version_rank` INT(11) NOT NULL,
`installed_rank` INT(11) NOT NULL,
`version` VARCHAR(50) NOT NULL,
`description` VARCHAR(200) NOT NULL,
`type` VARCHAR(20) NOT NULL,
`script` VARCHAR(1000) NOT NULL,
`checksum` INT(11) DEFAULT NULL,
`installed_by` VARCHAR(30) NOT NULL,
`installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
`execution_time` INT(11) NOT NULL,
`success` TINYINT(1) NOT NULL,
KEY `schema_version_vr_idx` (`version_rank`),
KEY `schema_version_ir_idx` (`installed_rank`),
KEY `schema_version_s_idx` (`success`) 
) ENGINE=INNODB DEFAULT CHARSET=utf8; 
```

我的问题是，如果我为主键创建了一个额外的字段，或者在 schema_version 中设置了一个复合键，flyway 会继续正常运行吗？

这是当前的 Hibernate 映射 xml：

```
<hibernate-mapping package="com.hp.cp.psp.persistence.data" catalog="orion" default-lazy="false">
<class name="Schema_VersionDO" table="schema_version" lazy="false">
    <cache usage="nonstrict-read-write"/>

    <id name="id" type="int" /><!-- added to satisfy hibernate (id|composite-id) -->
    <property name="version_rank" type="int" index="schema_version_vr_idx"  not-null="true"/>
    <property name="installed_rank" type="int" index="schema_version_ir_idx" not-null="true"/>
    <property name="version" type="string"  length="50" not-null="true"/>
    <property name="description"  type="string"  length="200" not-null="true" />
    <property name="type"  type="string"  length="20" not-null="true" />
    <property name="script" type="string" length="1000" not-null="true"/>
    <property name="checksum" type="int"/>
    <property name="installed_by" type="string" length="30" not-null="true"/>
    <property name="installedOn" not-null="true">
        <column name="installed_on" sql-type="timestamp" default="CURRENT_TIMESTAMP" />
    </property>
    <property name="execution_time" type="int"  not-null="true"/>
    <property name="success" type="byte" length="1" index="schema_version_s_idx"  not-null="true"/>
</class>
</hibernate-mapping> 
```

一如既往，非常感谢您的帮助或建议。谢谢布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:09:13.607

无需为此使用 Hibernate。`Flyway.init()`完全满足您的需求。

# google-analytics - 禁止搜索引擎爬虫，但允许谷歌分析

> ID：15347931
> 
> 赞同：4
> 
> 时间：2013-03-11T20:25:53.813
> 
> 标签：google-analytics, web-crawler, search-engine, robots.txt

看起来我的 Google Analytics 不起作用，因为我已阻止所有用户代理。我的网站仍处于测试版，所以我不想被搜索引擎看到，但我仍然想查看我的网站分析数据。

我怎样才能在我的 robots.txt 中只允许 Google Analytics？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:42:40.477

您无需在 robots.txt 中指定 Google Analytics。

由于通过 javascript（您复制/粘贴的代码）将 Google Analytics 调用到您的文件中，因此每当有人访问您的页面时，它都会连接到 Google Analytics 并注册访问。

Robots.txt 仅适用于您想阻止 Google bot 为您的网站编制索引（抓取它并将其发布到 google）。

# android - 以正确的方式调整菜单中的按钮大小

> ID：15347932
> 
> 赞同：0
> 
> 时间：2013-03-11T20:25:55.973
> 
> 标签：android, android-layout, android-relativelayout

我在做菜单。问题是我的按钮彼此太近了。我想把它们分开一点。另外我想将它们（rozszerzyć je）扩展到相似的大小。

这里有代码：

`android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_above="@+id/button2" android:layout_centerHorizontal="true"`

在这里你有这个问题的图像：

![(rysunek)](../Images/1016f9093bcc75fd0a88ed4db226554c.png)

并且 4 个按钮中的每个按钮都有类似的代码。（区别在于 layout_above.

怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:33:49.407

有什么理由必须使用 a`RelativeLayout`吗？如果你可以使用`LinearLayout`我会使用类似的东西：

```
<LinearLayout
    android:layout_width="..."
    android:layout_height="..."
    android:orientation="vertical">
    <Button
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding_top="4dp"
        android:padding_bottom="4dp"
        ... />
</LinearLayout> 
```

这将使您的所有按钮水平和垂直大小相同。您可以调整填充顶部和底部以获得所需的效果。

工作方式`layout_weight`是占用父视图的剩余空间，并根据它们的权重将它们分配给子视图。由于每个按钮的高度都是`0dp`，因此留下了 100% 的垂直空间用于分区。由于所有按钮的重量相同，因此它们的大小大致相同。

这个解释是针对垂直的`LinearLayout`。对于水平，只需切换 和 的`layout_height`值`layout_width`。

# asp.net - 在 ASP.Net 中实现用户/角色/任务安全

> ID：15347933
> 
> 赞同：0
> 
> 时间：2013-03-11T20:26:00.160
> 
> 标签：asp.net, security

早在 2008 年，我记得遇到了一个 3rd 方工具，它完成了 99.9% 的任务/角色安全实施工作。据我回忆，它只是.Net 内置功能的扩展。您运行脚本将所有需要的表添加到 SQL Server，然后使用 UI 进入并定义所有任务，然后将任务分组为角色。分配给角色的用户。强大之处在于，不同的角色可以执行相同的任务，并且全部由该系统附带的 UI 工具配置。我还以为是在 CodePlex 上，但我不记得名字了。我只记得它是 Microsoft 的名称，带有类似 Sql 或添加到它的名称中的东西。

当时，2008 年（VS2008 天），同事告诉我，微软正在减慢将整个系统消耗到 .net 中的速度。

有人知道我在想什么名字吗？它现在是 Microsoft .Net 的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:37:33.377

您是否正在考虑使用与 Microsoft AzMan 类似的授权模型的[NetSqlAzMan ？](http://netsqlazman.codeplex.com/)或者您可能正在考虑 AzMan 本身，它有一个 UI 并允许在 SQL Server 中存储？

# php - PHP会员登录系统（又是）

> ID：15347936
> 
> 赞同：1
> 
> 时间：2013-03-11T20:26:08.860
> 
> 标签：php

嘿，我都在为一个简单的会员系统而苦苦挣扎。我已经编码了一段时间，但在 php（主要是 java）中编码不多，所以如果有任何关于查看内容的帮助或建议，我将不胜感激。我似乎总是检查简单的错误，虽然我已经在语法检查器中检查过它，但我确信它是非常小的

开始..

我的 login.php 文件允许用户登录，如果他们有用户名和密码，如果没有发送适当的响应。但是，当我使用现有的用户名和密码登录时，它会转到显示您的姓名和链接以转到成员部分的下一页，但是当单击链接时，成员部分似乎无法识别我的 $_SESSION 值，因此要求用户再次登录。

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['$userid'];
$username = $_SESSION['$username'];
?>
<html>
<head>
<title>Member system - login</title>
</head>
<body>
<?php
    $form = "<form action='./login.php' method='post'>
    <table>
    <tr>
        <td>username :</td>
        <td><input type='text' name='user'/></td>
    </tr>
    <tr>
        <td>password :</td>
        <td><input type='password' name='password'/></td>
    </tr>
    <tr>
        <td></td>
        <td><input type='submit' name='loginbtn' value='Login'/></td>
    </tr>
    </table>
    </form>";

if($_POST['loginbtn']) {
    $user = $_POST['user'];
    $password = $_POST['password'];

    if($user) {
        if($password) {
            require("connect.php");

            $password = md5(md5("12345".$password."54321"));
            //make sure login info correct
            $query = mysql_query("SELECT * FROM user WHERE username='$user'");
            $numrows = mysql_num_rows($query);

            if($numrows == 1) {
                $row = mysql_fetch_assoc($query);
                $dbid = $row['id'];
                $dbuser = $row['username'];
                $dbpass = $row['password'];
                $dbactive = $row['active'];

                if($password == $dbpass) {
                    if($dbactive == 1) {
                        //set seesion info
                        $_SESSION['userid'] = $dbid;
                        $_SESSION['username'] = $dbuser;

                        echo "you have been logged in as <b>$dbuser</b> <a href='./member.php'>click here</a> to go to the member page";
                    }
                    else 
                        echo "You must be an active member. $form";
                }
                else
                    echo "you did not enter the correct password. $form";
            }
            else                    
                echo "The user name you entered was not found. $form";

            mysql_close();
        }
        else
            echo "you must enter your password. $form";
    }
    else
        echo "you must enter a user name. $form";
    }
else
 echo $form;
?> 
```

这是我完成大部分工作的登录表单

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['$userid'];
$username = $_SESSION['$username'];
?>
<html>
<head>
<title> Member system : Members</title>
</head>
<body>
<?php
    if($username && $userid) {
        echo "Welcome <b>$username</b>, <a href='./logout.php'>logout</a>";
    }
    else 
        echo "Please login in to veiw this page <a href='./login.php'>Login in</a>";

?>
</body>
</html> 
```

这是我的成员表单，它似乎无法识别会话并要求用户再次登录。

我知道这对某人来说是显而易见的尴尬，我为我的无知道歉，但我会从中吸取教训，所以如果有人能帮助我，我将不胜感激。

问候迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:54:00.373

首先，有一个小错误。在第一个脚本中，您使用 $_SESSION['userid']，在第二个脚本中使用 $_SESSION['$userid]（密钥内有一个美元）。

我不知道这是否能解决您的问题，但请尝试替换：

```
if($username && $userid) { 
```

有了这个：

```
if(isset($_SESSION['userid'],$_SESSION['username'])) { 
```

问候乔库斯！

# c# - How to create xml file from existing xsd file?

> ID：15347939
> 
> 赞同：-4
> 
> 时间：2013-03-11T20:26:16.080
> 
> 标签：c#, xml-serialization, xsd, xsd-validation

I want to create XML file with data(data is from database) using existing XSD file. Please guide me how to do this in C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:30:18.323

Here's one way:

1.  Use [`xsd.exe`](http://msdn.microsoft.com/en-us/library/x6c1kb0s.aspx) to create a set of class definitions from your schema.
2.  Populate instances of those classes from the database.
3.  Use `XmlSerializer` to serialize those instances to XML.

# actionscript-3 - Flash Error #1010, related to a class

> ID：15347945
> 
> 赞同：1
> 
> 时间：2013-03-11T20:26:28.110
> 
> 标签：actionscript-3, flash, class, actionscript, compilation

I'm making a flash AS3 platformer game, but actually after adding the "bullets" (shots) in a new class system (I didn't use classes until then), I have an error that I couldn't resolve at all : TypeError: Error #1010: A term is undefined and has no properties.

Now, I know this is a common error implying variables values, but I really couldn't tell where it came from.

The problem showed up when I added this to my main timeline code :

```
function Shoot():void {
    var directionPerso:String;
    if(perso.scaleX < 0){
        directionPerso = "gauche";
    } else if(perso.scaleX > 0){
        directionPerso = "droite";
    }

    var tir:rayon = new rayon(perso.x - scrollX, perso.y - scrollY, directionPerso);
    stage.addChild(tir);
    } 
```

And this one is for the my class file :

```
package  {
        import flash.display.MovieClip;
        import flash.events.Event;
        import flash.display.Sprite;

        public class rayon extends MovieClip{

        private var vitesse:int = 10; //Vitesse du déplacement du rayon, fonction privée car tout le programme n'a pas besoin de connaitre cette valeur

        private var xInitial:int;

        public function effacer():void
        {
            removeEventListener(Event.ENTER_FRAME, loop); 
            this.parent.removeChild(this); 
        }

        public function rayon(persoX:int, persoY:int, directionPerso:String) {
    // constructor code
            if(directionPerso == "gauche") { //Ce qui se passe si la direction du joueur est "gauche", la balle part de la position du joueur, à gauche

            vitesse = -10;
            x = persoX - 25;

        } 

            else if(directionPerso == "droite") { //Ce qui se passe si la direction du joueur est "droite", la balle part de la position du joueur, à droite

            vitesse = 10;
            x = persoX + 25
    }
            y = persoY - 75;
            xInitial = x;
    addEventListener(Event.ENTER_FRAME, loop); //Toujours pour avoir un programme bien plus fluide
}

        public function loop(e:Event):void{ //Dans une nouvelle fonction publique je crée le mouvement du rayon, relatif à la variable de vitesse créée plus haut
                x += vitesse;
                if(vitesse > 0) { //Si le rayon va vers la droite
                if(x > xInitial + 450) { //Le tir disparait au bout de 450px
                    effacer();
                                                                            }
            } else { 
                if(x < xInitial - 450) { //Quand la cartouche va vers la gauche...
                    effacer(); //Elle disparait au bout de 450px
                }
            }
        } 
```

Can someone help me with this? Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:31:05.260

解决此问题的最佳方法是转到“发布设置”并选中“允许调试”选项。这会将发生错误的行号附加到输出中，以便您可以更轻松地跟踪它。

但是，在不了解设置的情况下，我的猜测是您没有定义变量“perso”或“scrollX/scrollY”。

# php - 何时将类定义中的变量声明为 NULL 值？

> ID：15347958
> 
> 赞同：2
> 
> 时间：2013-03-11T20:27:29.917
> 
> 标签：php

这两个例子有什么区别？

```
class cl_Configuration
{
   private static $_instance = NULL;

   ... 
```

和

```
class cl_Configuration
{
   private static $_instance;

   ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:40:01.973

这些是完全相同的。声明一个没有值的 PHP 类属性将默认将“值”设置为 NULL，除非另有暗示、继承或覆盖。

您可以通过一个简单的测试自己证明这一点：请参阅[PHP Fiddle](http://phpfiddle.org/lite/code/pqz-hk5)以获取以下代码。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

class cl_Configuration {
    public static $_instance = NULL;
}

class cl_Configuration_2 {
    public static $_instance;
}

var_dump(cl_Configuration::$_instance);
var_dump(cl_Configuration_2::$_instance); 
```

# fancybox - Fancybox 2, images and video in same gallery with thumbnails

> ID：15347959
> 
> 赞同：0
> 
> 时间：2013-03-11T20:27:30.580
> 
> 标签：fancybox, fancybox-2

Using **FANCYBOX 2**, I'd like to have images and youtube embeds in the same gallery.

Having the url of the image as the href value works fine for images, but my issue is that I don't know what value to assign the video objects for them to open as iframe videos.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T18:02:55.220

找到了解决方案……</p>

1.  将此类添加到链接元素：fancybox.iframe
2.  为元素的 href 赋值：[http ://www.youtube.com/embed/YOUR_VIDEO_ID_HERE?autoplay=1](http://www.youtube.com/embed/YOUR_VIDEO_ID_HERE?autoplay=1)

# python - Reading unicode values from excel to string

> ID：15347961
> 
> 赞同：0
> 
> 时间：2013-03-11T20:27:34.263
> 
> 标签：python, excel, unicode, xlrd

I have an excel file (xlsx). The values are read as unicode values.

```
wb = xlrd.open_workbook('file.xlsx')
sh = wb.sheet_by_index(0)
first_column = sh.col_values(0)
snd_column = sh.col_values(1) 
```

Output is in the form of:

```
first_column=['', u'here', u'here i am', u'where', u'where i am']
snd_column=['', u'20 km', ' ', u'10 km', u'23 km'] 
```

Empty cells are read as normal empty strings.

How do I get output/read the file directly in strings form. like

```
first_coulmn=['', 'here', 'here i am', 'where', 'where i am']
snd_coulmn=['', '20 km', ' ', '10 km', '23 km'] 
```

I am looking are computationally effective method. Any tips?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:31:36.737

您可以使用 str() 函数将 unicode 转换为字符串。这就是你要问的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:30:26.900

How about:

```
first_column = [str(v) for v in first_column] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-06T19:45:27.197

```
worksheet.cell_value(row_index,coluna_sample) gives me --> u'7690088954'
str(worksheet.cell(row_index,coluna_sample).value) gives me --> '7690088954'
As sugested by aestrivex 
```

# java - 显示数组中没有冗余的元素

> ID：15347963
> 
> 赞同：1
> 
> 时间：2013-03-11T20:27:54.550
> 
> 标签：java, arrays, algorithm, redundancy

我做了这个代码。我认为这是错误的。

```
public void display() {
    for (int i = 0; i < tabT.length; i++)
        if (tabT[i] != null)
            for (int j = 0; j <= i; j++)
                if (tabT[i] != tabT[j])
                    System.out.println(tabT[i].getCar());
} 
```

如何在数组中显示没有冗余的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:33:07.483

比较的对象`equals()`例如

```
if (!tabT[i].equals(tabT[j])) 
```

您正在比较参考值而不是对象

```
for (int i=0; i< tabT.length; i++) {
  boolean f = false;
  for (int j=i+1; j <tabT.length; j++)
    if (tabT[i].equals(tabT[j])) {
      f=true;
      break;
    }
  if (!f)
    System.out.println(tabT[i].getCar());
} 
```

这应该为您提供所有不重复的组合`i`and `j`，因此我们不会多次比较它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:38:54.763

如果你只想使用数组，你可以这样做：

创建一个临时（助手）数组，其中将包括到目前为止在`tabT`. 然后，在打印该值之前，检查它是否没有出现在辅助数组 (tmp) 中。

例如，如果您在 中有值`tabT`，并且您不想多次打印每个值：

```
int[] tabT = {1,2,3,1,1,2,6,7,2,7,1};
int[] tmp = new int[tabT.length];
boolean flag;
for (int i = 0; i < tabT.length; i++) {
    tmp[i] = tabT[i];
    flag = true;
    for (int j = 0; j < tmp.length; j++)
        if (tabT[i] == tmp[j] && i!=j) {
            flag = false;
        }
    if(flag)
        System.out.println(tabT[i]);
} 
```

输出：[1,2,3,6,7]

您可以轻松地将这个想法应用到您的程序中，并且每个元素只打印一次：

```
Cars[] tmp = new Cars[tabT.length]; //Assuming tabT is from type Cars[]
boolean flag = true;
for (int i = 0; i < tabT.length; i++) { 
    tmp[i] = tabT[i];
    if (tabT[i] != null) {
        for (int j = 0; j < tmp.length; j++)
            if (tabT[i].getCar().equals(tabT[j].getCar()) && i!=j)
                flag = false;
        if(flag)
            System.out.println(tabT[i].getCar());
    }
} 
```

这将只打印每辆车（或您正在打印的任何东西）一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:29:41.800

将 tabT 数组放入 Set 中。不会有重复的项目。

```
Set tabTList = new HashMap(Listjava.util.Arrays.asList(tabT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:32:54.647

如果您确实想跟踪重复计数，可以考虑使用 HashMap。遍历数组一次以将对象放入具有各自计数的 HashMap 中。然后遍历数组再次检查HashMap。这将是 O(n) 时间，而不是潜在的 O(n^2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:33:24.820

`==`并`!=`在对象级别测试相等性（即，如果两个实例相同）。你需要的是比较每个对象所代表的值（例如，如果两个字符串相等），那么你需要问是否，并制作实现`!tabT[i].equals(tabT[j])`的元素）。`tabT``equals`

或者将数组转换为一个集合，从而删除重复项。

```
T[] tabT = ...
Set<T> set = new LinkedHashSet<T>(Arrays.asList(tabT))
for (T t:set) System.out.println(t); 
```

我使用 a 是`LinkedHashSet`因为它保留了数组中元素的顺序。请注意，您需要实现`equals`and `hashcode`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T20:37:17.310

为什么不尝试这样的事情？（我假设您正在使用字符串类型）

```
HashSet<String> hashSet = new HashSet<String>();

for (int i = 0; i < tabT.length; i++) {
    hashSet.add(tabT[i]);
} 
```

您不能将重复项放入集合中，因此现在您可以迭代集合以获取唯一性。

```
java.util.Iterator<String> iterator = hashSet.iterator();

while (iterator.hasNext()) {
    System.out.println((String)iterator.next());
} 
```

# firefox - Firefox html5 视频倒带而不是播放

> ID：15347964
> 
> 赞同：0
> 
> 时间：2013-03-11T20:27:58.727
> 
> 标签：firefox, video, html5-video, webm

我在我的网站上使用视频标签。它适用于所有主流浏览器，但我遇到了 Firefox 的问题。

当我点击播放按钮时，视频滚动到视频结尾！

为了开始播放视频，我需要将视频倒退到开始以外的位置，然后单击播放。奇怪的。我试图将视频的初始位置设置为 1s，但没有帮助。我仍然需要手动滚动它。任何帮助将不胜感激。谢谢

```
<video width="80% height="80%" controls id="video1">
          <source src="videos/<cfoutput>#getVideo.URL#</cfoutput>.mp4" type="video/mp4">
          <source src="videos/<cfoutput>#getVideo.URL#</cfoutput>.ogv" type="video/ogg">
          <source src="videos/<cfoutput>#getVideo.URL#</cfoutput>.webmhd.webm" type="video/webm">
          Your browser does not support the video tag. 
</video> 
```

Javascript：

*   视频 */

    function setupVideo(){ if(!myVideo){ console.log("设置视频"); myVideo=document.getElementById("video1"); timeElapsed = 0; 计时器；

    ```
     myVideo.addEventListener("play",videoStarted,false);
        myVideo.addEventListener("pause",videoPaused,false);
        myVideo.addEventListener("loadeddata",videoLoaded,false);

            console.log(" Video Element is: "+myVideo);

    }
    else{
        console.log("Video Was Already set");
        playPause();
        } 
    ```

    }

    函数 playPause() { if (myVideo.paused) myVideo.play(); 否则 myVideo.pause(); }

    function videoLoaded(e) { console.log("视频加载"); myVideo.currentTime = 1; }

    function videoStarted(e) { console.log("视频开始"); //启动定时器 timer = setInterval(videoPlaying,1000); }

    函数 videoPlaying(){ timeElapsed ++; console.log("视频播放"+myVideo.currentTime);

    ```
    if(Math.ceil(myVideo.currentTime)== 10)
    {
        console.log(" it reached 10  now display quiz");
        playPause();

    } 
    ```

    }

    函数 videoPaused(e) { clearInterval(timer); console.log("暂停"); }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:40:25.657

您的 WebM 或 OGV 视频的时间戳可能为负数或无效。某些软件生成的视频开始时间略小于零，尤其是在音频和视频帧未对齐以同时开始时。（也就是说，视频可能在 0 之前开始，而音频可能从 0 开始。）

如果视频是用 制作的`ffmpeg`，请尝试使用该选项`-avoid_negative_ts 1`。

如果您安装了[mkvtoolnix](http://www.bunkus.org/videotools/mkvtoolnix/)软件包，您可以使用命令`mkvinfo -s` *文件*.webm 查看 webm 文件中的时间戳。

# php - 在 php 运行时将片段添加到 url

> ID：15347967
> 
> 赞同：1
> 
> 时间：2013-03-11T20:28:05.440
> 
> 标签：php, fragment

好的，这就是我的情况：我有一个带有 5 个 jquery-ui 选项卡的页面，其中 3 个包含一个由 php 为数据生成的表，每个表都有一组根据日期过滤的输入，每个表格有自己的表格和更新按钮。现在我想要实现的是，一旦我刷新并回到控制器，我想根据我按下的按钮添加相应的片段。

例如：如果我从第一个选项卡单击更新按钮，我想添加#tabs-1，如果是第二个选项卡，那么我想添加#tabs-2。

现在我知道我可以做到：

```
$_SERVER['SCRIPT_URI'] = $_SERVER['SCRIPT_URI'] . "#tabs-2"; 
```

很好，这给了我正确的 url，但是我如何让浏览器在运行时去那里？有没有办法做到这一点？

这是我的控制器的一部分，主要的。

```
class PageOptimisationV2C {

public static function main() {
    $class = __CLASS__;
    $c = new $class;

    $c->get();
}

public function get() {
    $this->display();
}

private function display() {
    $tpl = new PageOptimisationV2V();

    $client = ConsulterClient::getClientByNoClient(isset($_GET['cid']) ? $_GET['cid'] : 0);
    $tpl->client = $client;

    if(isset($_GET['cid'])){

        $tpl->StatsLignesCellulaire = self::buildCellStatsReport();
    }

    $_SERVER['SCRIPT_URI'] = $_SERVER['SCRIPT_URI'] . "#tabs-2";

    $tpl->display();
} 
} 
```

然后它继续并显示页面。根据按下的提交按钮，到达页面片段的最佳解决方案是什么。

我试图制作一个 jsFiddle 来向您展示页面的外观，但它变得太乱了，无法让 CSS 正常工作。

信息的每一个细节都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:13:21.410

我知道使用 PHP 执行此操作的唯一方法是进行重定向。

```
header('Location: ' . $_SERVER['REQUEST_URI'] .'#tabs-2'); 
```

这当然会导致另一个请求，并要求您对流程做一些解决方法，但这是将新 URL 发送回浏览器的唯一方法。

虽然它不是运行时 PHP 方法，但您也可以只嵌入选择 Javascript，例如：

```
var index = $.index($(<?PHP echo $tab; ?>));
$('#tabs ul').tabs('select', index); 
```

并让它通过正常的选择过程。

您也可以只嵌入一个隐藏元素，例如

```
<input type="hidden" name="tab-selected" id="tab-selected" value="tabs-2" /> 
```

并有一些Javascript来检查元素是否存在并具有值，然后选择这样的选项卡：

```
$(function() {
    if ($('#tab-selected').val()) {
        var index = $.index($('#tab-selected').val()));
        $('#tabs ul').tabs('select', index);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:26:55.353

今天脑洞大开，一边看MWJump的回答，一边想到了别的事情……为什么不用form的action属性呢！这是有原因的！因此，对于我的每个表单（我的每个选项卡中都有一个），我将 action 属性设置为相应选项卡的片段，因此对于第一个选项卡`action="#tabs-1"`和第二个选项卡`action="#tabs2"`，依此类推...

在这种特殊情况下，我发现这个解决方案是最简单和最容易的。

# android - java.lang.NullPointerException in android emulator

> ID：15347968
> 
> 赞同：0
> 
> 时间：2013-03-11T20:28:07.793
> 
> 标签：android, android-emulator, runtimeexception

I am making a application in which i create a list view with two text fields and one check box ....and when i click or check on check box then the both text are added to database. but my emulator force stopped my application. please help ...thanx in advance.

This is my first main java class named Database2Activity

```
package data.base;
import android.app.ListActivity;
import android.os.Bundle;
public class Database2Activity extends ListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] str1 = new String[]{"Hari","Gopal","shayam","sita"};
    String[] str2 = new String[]{"123","2555","sksi","mahi"};
    setListAdapter(new Second(this, str1, str2));   
}
} 
```

This is my Second class which name Second.java

```
package data.base;

import com.example.phone_no.DBhelper;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageView;
import android.widget.TextView;

public class Second extends ArrayAdapter<String> {
 String string1[];

 Context context;
    String string[];
     TextView textView;
    TextView textView1;

    CheckBox checkBox;
    EditText editText;
    public Second(Context context, String[] objects, String[] Object1)
    {

        super(context,R.layout.main, objects);

        this.context=context;
        this.string=objects;
        this.string1=Object1;
      //  this.imageView = Object3;
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {

        LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view=inflater.inflate(R.layout.main,parent,false);
          textView=(TextView)view.findViewById(R.id.text1);

        textView1=(TextView)view.findViewById(R.id.text2);
       // imageView = (ImageView)view.findViewById(R.id.text3);
        textView.setText(string[position]);
        textView1.setText(string1[position]);

        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

                DBhelper DB = new DBhelper(context);
                DB.open();
                DB.adddata("A", string[position], string1[position]);
                DB.getAlldata();
                DB.close();

            }
        });

        return view;    //To change body of overridden methods use File | Settings | File Templates.

    }

} 
```

This is my Third Class named DBhelper which managed database actions

```
package com.example.phone_no;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBhelper {
public static final String KEY_ID = "id";
public static final String KEY_NAME = "names";

public static final String KEY_PHONE = "phoneno";

private final Context ourContext;
private static final String DATABASE_TABLE = "Contactinfo";
private static final int DATABASE_VERSION = 27;
private static final String DATABASE_NAME = "contactdata.db";
private DbHelper ourHelper;
private SQLiteDatabase ourDatabase;
// end for location
private static class DbHelper extends SQLiteOpenHelper {
    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        /*db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");*/
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");

        // string value
        String y = "CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY  , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);";

        System.out.println("query" + y);
        Log.d("query", y);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
        // TODO Auto-generated method stub
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);

    }

}

public DBhelper(Context c) {
    ourContext = c;
}
public DBhelper open() throws SQLException 
{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close() 
{
    ourHelper.close();
}
public long adddata(String id,String name,String number) 
{
    // TODO Auto-generated method stub
    // add the custom Image Gallery Image Path to Data Base
    ContentValues cv = new ContentValues();
    cv.put(KEY_ID, id);
    cv.put(KEY_NAME, name);
    cv.put(KEY_PHONE, number);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public void getAlldata() 
{
    Cursor details = null;
    if (ourDatabase.isOpen() == false)

        ourDatabase = ourHelper.getWritableDatabase();
    if (ourDatabase.isOpen()) 
    {
        details = ourDatabase.query(DATABASE_TABLE, null, null, null, null, null, null);
         for(details.moveToFirst();!details.isAfterLast();details.moveToNext())
        {
             String a=details.getString(0);
            String b=details.getString(1);
            String c=details.getString(2);
            System.out.println("id--"+a+"name"+b+"phoneno"+c);
        }

    }

}
public long delete_image(String id) 
  {
    if (ourDatabase.isOpen() == false)
        ourDatabase = ourHelper.getWritableDatabase();
      if (ourDatabase.isOpen()) 
        {
            return ourDatabase.delete(DATABASE_TABLE, KEY_ID + "=" + id, null);
        }
        return 0;
    }

} 
```

This is my main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<EditText
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:id="@+id/edit"
/>
<Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/button"
     />
  <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"
        android:layout_weight="1"
        android:id="@+id/text1"
        />
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"
        android:layout_weight="1"
        android:id="@+id/text2"
        />
    <CheckBox
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:id="@+id/check"
            />

</LinearLayout> 
```

This is Logcat Window massages

```
03-12 02:04:21.028: D/AndroidRuntime(21905): Shutting down VM
03-12 02:04:21.028: W/dalvikvm(21905): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-12 02:04:21.308: E/AndroidRuntime(21905): FATAL EXCEPTION: main
03-12 02:04:21.308: E/AndroidRuntime(21905): java.lang.NullPointerException
03-12 02:04:21.308: E/AndroidRuntime(21905):    at data.base.Second.getView(Second.java:51)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.ListView.makeAndAddView(ListView.java:1727)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.ListView.fillDown(ListView.java:652)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.ListView.fillFromTop(ListView.java:709)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.ListView.layoutChildren(ListView.java:1580)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.AbsListView.onLayout(AbsListView.java:1147)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.view.View.layout(View.java:7035)
03-12 02:04:21.308: E/AndroidRuntime(21905):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 
```

And in last This is my Manifest

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="data.base"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Database2Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="Second"/>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:29:44.663

```
Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

You need use a ListView in your ListActivity's layout (`main.xml`) with the id `android:id="@android:id/list`.

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  // This layout must have a ListView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:31:14.957

从`setContentView(R.layout.main);`您的`onCreate`- 您正在使用您为每个元素使用的布局覆盖 a `ListActivity`（包含 android.R.id.list 元素）的默认视图。

# r - Efficient transformation of a lists of x/y coordinates to a data frame in R

> ID：15347973
> 
> 赞同：1
> 
> 时间：2013-03-11T20:28:27.557
> 
> 标签：r, optimization, dataframe

I have a list of length 30,000 with data frames in it that have a x and y column. The data frame is sparse, so not each value of x exists. All x values are between 1 and 200.

I want to convert this list to a single data frame which has for each possible x value a column and each row should represent all y values of a list entry (if a x value does not exist, the entry should be 0). I have a solution which works (see below) but it's very, very slow and I think there must be a faster (and probably also more elegant way) to do so.

My current solution (which is slow) is:

```
dat <- matrix(numeric(0), 30000, 200) 
for(i in seq(along=whaledatas)) {
    for(j in row.names(whaledatas[[i]]))
        dat[i, whaledatas[[i]][j,"x"]] <- whaledatas[[i]][j,"y"]
}

dfData <- data.frame(dat, files$label)
dfData[is.na(dfData)] <- 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:37:58.980

这是一个需要合理时间的答案：

```
# function to create dummy data
my_sampler <- function(idx) {
    x <- sample(200, sample(50:100, 1))
    y <- sample(length(x))
    data.frame(x,y)
}

# create list of 30000 data.frames
in.d <- lapply(1:30000, function(x) my_sampler(x)) 
```

**解决方案：**使用`data.table`

```
require(data.table)
system.time(out.d <- do.call(rbind, lapply(in.d, function(x) {
    setattr(x, 'class', c("data.table", "data.frame")) # mnel's suggestion
    setkey(x, "x")
    x[J(1:200)]$y
})))

#   user  system elapsed 
# 47.111   0.343  51.283 

> dim(out.d)
# [1] 30000   200

# final step: replace NA with 0
out.d[is.na(out.d)] <- 0 
```

**编辑：**正如@regetz 所示，分配最终矩阵，然后用 y 值替换出现 x 的选定条目是聪明的！@regez 解决方案的一个小变化：

```
m <- matrix(0.0, nrow=30000, ncol=200)
system.time(for( i in 1:nrow(m)) {
    m[i, in.d[[i]][["x"]]] <- in.d[[i]][["y"]]
})

#   user  system elapsed 
#  1.496   0.003   1.511 
```

这似乎比@regez 更快（如下所示）：

```
> system.time(dat <- datify(in.d, xmax=200))
#   user  system elapsed 
#  2.966   0.015   2.993 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:05:12.387

我会使用一个`data.table`解决方案，如下所示：

```
whaledatas <- lapply(1:30000,function(x)data.frame(x=1:200,y=1:200))
library(data.table)
dtt <- rbindlist(whaledatas) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:15:07.483

首先，这是一个数据框列表的小例子：

```
# create some sample data
whaledatas <- list(
    data.frame(x=1:3, y=11:13),
    data.frame(x=6:10, y=16:20)
) 
```

`for`我认为这与原始问题中的循环做同样的事情？

```
# combine into single data frame
whaledatas.all <- do.call("rbind", whaledatas)

# change this to 200! kept small here for illustration...
XMAX <- 10

# create output matrix
dat <- matrix(0.0, length(whaledatas), XMAX)

# create index vector for dat rows
i <- rep(1:length(whaledatas), sapply(whaledatas, nrow))

# populate dat
dat[cbind(i, whaledatas.all[["x"]])] <- whaledatas.all[["y"]] 
```

**编辑**

随着输入数量的`rbind`增加，速度变得非常慢。这个版本（为了方便而包装在一个函数中）避免了它，并且运行得更快：

```
datify <- function(x, xmax=200) {
    dat <- matrix(0.0, length(x), xmax)
    for (i in seq_along(x)) {
        this.df <- x[[i]]
        coords <- cbind(rep(i, nrow(this.df)), this.df[["x"]])
        dat[coords] <- this.df[["y"]]
    }
    dat
} 
```

请注意，我们从 中的所有零开始`dat`，因此无需在事后修复它...

```
> datify(whaledatas, xmax=10)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]   11   12   13    0    0    0    0    0    0     0
[2,]    0    0    0    0    0   16   17   18   19    20 
```

`my_sampler`使用 Arun函数生成的 30k 长度的样本数据帧列表的计时：

```
set.seed(99)
in.d <- lapply(1:30000, function(x) my_sampler(x))
system.time(dat <- datify(in.d, xmax=200))
##   user  system elapsed 
##  1.317   0.011   1.328 
```

# tfs - Having some sort of pending check-ins in TFS

> ID：15347975
> 
> 赞同：1
> 
> 时间：2013-03-11T20:28:37.797
> 
> 标签：tfs

At my workplace, we're using `Tfs 2010` and CMMI 4.2.

I want to force the check-ins to have 3 types of reviewers.

If some developer check-ins some code, it must be reviewed by 3 senior developers for performance issues, error management issues and localization issues.

So I want to keep the change-set in some sort of `pending state`, until all reviewers approve the change.

I want to ensure that a change-set is approved due to that 3 aspects and then participate in the build.

Is it possible to have some pending change-sets, or some kind of workflow for check-ins?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:42:57.673

货架集几乎正是您所描述的。

这确实是 TFS 2012 自己的内部代码审查系统的方式。当您请求代码审查时，它只是将其放在架子上。创建代码审查时，您还具有其他功能，您可以指定审查者的数量以及您希望谁进行审查。它可能适合您的需求。

或者，使用搁板的手动系统也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:14:19.237

您可以定义所需的签到说明：“高级审阅者 1”、“高级审阅者 2”、“高级审阅者 3”。然后，在每次签到时，开发人员都必须填写姓名。请注意，没有强制执行 - 开发人员可以撒谎或输入“NA”。

TFS2012 有一个代码审查系统，可以正式执行这个过程。虽然我不知道细节。

# java - JSF + JPA（PrimeFaces 向导组件）

> ID：15347978
> 
> 赞同：0
> 
> 时间：2013-03-11T20:28:43.427
> 
> 标签：java, jakarta-ee, jsf-2, primefaces, jpa-2.0

我正在学习/培训 JSP，并决定向 PrimeFaces 向导组件 ( [http://www.primefaces.org/showcase/ui/wizard.jsf](http://www.primefaces.org/showcase/ui/wizard.jsf) ) 添加持久性。

提交保存方法时出现 NullPointerException：

```
SEVERE: 'java.lang.NullPointerException' recebido ao invocar escuta de ação '#{userWizard.save}' para o componente 'j_idt56'  
Mar 11, 2013 4:16:12 PM javax.faces.event.MethodExpressionActionListener processAction  
SEVERE: java.lang.NullPointerException  
at org.primefaces.wizard.UserRepository.adiciona(UserRepository.java:16)  
at org.primefaces.wizard.UserWizard.save(UserWizard.java:50)  

Mar 11, 2013 4:16:12 PM com.sun.faces.context.AjaxExceptionHandlerImpl log  
SEVERE: JSF1073: javax.faces.event.AbortProcessingException obtido durante o processamento de INVOKE_APPLICATION 5: UIComponent-ClientId=j_idt4:j_idt56, Message=/wizard.xhtml @128,44 actionListener="#{userWizard.save}": java.lang.NullPointerException  
Mar 11, 2013 4:16:12 PM com.sun.faces.context.AjaxExceptionHandlerImpl log  
SEVERE: /wizard.xhtml @128,44 actionListener="#{userWizard.save}": java.lang.NullPointerException  
javax.faces.event.AbortProcessingException: /wizard.xhtml @128,44 actionListener="#{userWizard.save}": java.lang.NullPointerException 
```

我认为这是一个简单的问题，但由于这对我来说是新的，而且我一直在寻找这个答案，但没有成功，我请求你的帮助。

这是托管的Bean：

```
@ManagedBean(name = "userWizard")
@SessionScoped
public class UserWizard {

    private User user = new User();
    private List<User> users;
    private boolean skip;
    private static final Logger logger = Logger.getLogger(UserWizard.class.getName());

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public boolean isSkip() {
        return skip;
    }

    public void setSkip(boolean skip) {
        this.skip = skip;
    }

    public void setUsers(List<User> users) {
        this.users = users;
    }

    public void save(ActionEvent actionEvent) {
        // Persist user
        EntityManager manager = this.getEntityManager();
        UserRepository repository = new UserRepository(manager);

        repository.adiciona(this.user);
        this.user = new User();
        // this.users = null;

        FacesMessage msg = new FacesMessage("Successful", "Welcome:" + user.getFirstname());
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }

    public List<User> getUsers() {
        if (this.users == null) {
            EntityManager manager = this.getEntityManager();
            UserRepository repository = new UserRepository(manager);
            System.out.println("**** CHAMANDO O REPOSITORIO ****");
            this.users = repository.buscaTodos();
        }
        return this.users;
    }

    public String onFlowProcess(FlowEvent event) {
        logger.log(Level.INFO, "Current wizard step:{0}", event.getOldStep());
        logger.log(Level.INFO, "Next step:{0}", event.getNewStep());

        if (skip) {
            skip = false; // reset in case user goes back
            return "confirm";
        } else {
            return event.getNewStep();
        }
    }

    private EntityManager getEntityManager() {
        FacesContext fc = FacesContext.getCurrentInstance();
        ExternalContext ec = fc.getExternalContext();
        HttpServletRequest request = (HttpServletRequest) ec.getRequest();
        EntityManager manager = (EntityManager) request.getAttribute("EntityManager");

        return manager;
    }
} 
```

（部分）wizard.xhtml：

持久性类：

```
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.Query;

public class UserRepository {
    private EntityManager manager;

    public UserRepository(EntityManager manager) {
        this.manager = manager;
    }

    public void adiciona(User user) {
        this.manager.persist(user);
    }

    @SuppressWarnings("unchecked")
    public List<User> buscaTodos() {
        Query query = this.manager.createQuery("select x from USUARIO x");
        return query.getResultList();
    }
} 
```

过滤器类（对于 EntityManager）：

```
@WebFilter(servletNames = { "Faces Servlet" })
public class JPAFilter implements Filter {

            private EntityManagerFactory factory;

            public void init(FilterConfig filterConfig) throws ServletException {
            this.factory = Persistence.createEntityManagerFactory("PrimeWizard-PU");
            }

            public void destroy() {
            this.factory.close();
            }

            public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

            EntityManager manager = this.factory.createEntityManager();
            request.setAttribute("EntityManager", manager);
            manager.getTransaction().begin();

            chain.doFilter(request, response);

            try {
            manager.getTransaction().commit();
            } catch (Exception e) {
            manager.getTransaction().rollback();
            } finally {
            manager.close();
            }
            }
            } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:39:31.397

A`NullPointerException`在这一行`this.manager.persist(user);`- 这意味着你`EntityManager`是空的。这根本与 JSF 无关。修正你获得的方式`EntityManager`，你就可以开始了。

```
private EntityManager getEntityManager() {
    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext ec = fc.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) ec.getRequest();
    EntityManager manager = (EntityManager) request.getAttribute("EntityManager");

    return manager;
} 
```

您的项目中是否有任何东西在`EntityManager`请求地图中可用？那就是我要寻找问题的地方。

# c# - 通过有边界的 WebClient 发送 POST 请求

> ID：15347979
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:28:43.723
> 
> 标签：c#, .net, post, webkit, webclient

我在通过 C# API 中的 WebClient 发送 POST 请求时遇到问题。POST 请求是：

```
POST http://aaa.com/login.php HTTP/1.1
Host: www.aaa.com
Connection: keep-alive
Content-Length: 346
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://www.aaa.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryK0J3zdRYpjgldAFy
Referer: http://www.turbotrafficbooster.com/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: bg-BG,bg;q=0.8
Accept-Charset: windows-1251,utf-8;q=0.7,*;q=0.3
Cookie: PHPSESSID=b703525853495c9257b3f3ec579c937a

------WebKitFormBoundaryK0J3zdRYpjgldAFy
Content-Disposition: form-data; name="navaction"

login
------WebKitFormBoundaryK0J3zdRYpjgldAFy
Content-Disposition: form-data; name="UserID"

test
------WebKitFormBoundaryK0J3zdRYpjgldAFy
Content-Disposition: form-data; name="Password"

test
------WebKitFormBoundaryK0J3zdRYpjgldAFy-- 
```

我知道如何处理用户代理等标题，但我对边界有疑问。我不知道如何放置它们以及在哪里做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:38:10.317

[在此处](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)查看[此答案](https://stackoverflow.com/questions/3508338/what-is-the-boundary-in-multipart-form-data)和链接规范中的示例。例子：

```
 Content-Type: multipart/form-data; boundary=AaB03x

  --AaB03x   
  Content-Disposition: form-data; name="submit-name"

  Larry   
  --AaB03x 
```

`WebKitFormBoundaryK0J3zdRYpjgldAFy`只是一个约定。如果您愿意，可以是`MyFoobaredBoundry`，只要您声明并适当地关闭它。不同的浏览器使用不同的字符串，因此接收端的任何内容都不应该因此而区分。

然而，这可能不是你必须自己做的事情......

# php - Symfony 1.0 - 扩展 sfRouting

> ID：15347982
> 
> 赞同：0
> 
> 时间：2013-03-11T20:28:58.860
> 
> 标签：php, routing, symfony1

任何人都知道在 SF1.0 中是否可以使用 routing.yml 中的以下“类”条目？我尝试添加它并覆盖一些方法，例如`getInstance()`and `getCurrentRouteName()`，但它们从未被调用，即使我手动调用它们。

```
checkout_landing:
  class: CustomRoute # Can I do this in SF1.0?
  url: /checkout/landing/:k/*
  param: { module: sharedCheckout, action: landing } 
```

我们已经在 SF1.2 中实现了这个“per-route”自定义类配置，但它似乎不适用于 SF1.0。我怀疑对于 SF1.0，我必须在 factory.yml 文件中添加一个自定义类条目，这将影响所有路由。

奖励问题：任何人都能够在 SF1.0 中模拟“extra_parameters_as_query_string”？现在，使用上面的 url 条目，GET 参数被转换为伪子目录，例如一个查询字符串，如：

```
$params = array('foo' => 'bar', 'pet' => 'dog');

$url = sprintf('@checkout_landing?%s', http_build_query($params));

// Looks like:

http://example.com/checkout/landing/foo/bar/cat/dog

// I need it to look like

http://example.com/checkout/landing?foo=bar&pet=dog 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:20:30.447

正如您所怀疑的，如果不做出您建议的 sfRouting 自定义扩展（在 中`factories.yml`）的妥协，或者为`extra_parameters_as_query_string`.

我建议您最简单的选择是升级到 sf1.3 的最新稳定版本 ( [sf1.3.11](http://symfony.com/download#symfony1) ) 并使用捆绑`sf10CompatPlugin`软件来帮助您模拟您在现有应用程序中使用的 sf1.0 功能，同时添加 sf1.您希望从 sf1.3 核心获得的 2+ 个功能。

这样做几乎没有兼容性错误，我自己在几十个项目中使用它，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:36:31.263

我浏览了已编译的路由缓存代码，果然在 SF1.0 中没有基于 yaml 文件中的“类”条目的自定义对象引用。但是，当我查看 SF1.4 中生成的路由的编译缓存代码时，自定义对象可用。

由于升级不是一种选择，我选择以老式方式手动生成 url。

# windows-8 - 将 Windows8 应用程序编译为其他版本

> ID：15347984
> 
> 赞同：0
> 
> 时间：2013-03-11T20:29:07.587
> 
> 标签：windows-8, visual-studio-2012, windows-phone-8

如果我制作一个 Windows8 应用程序（Javascript 模板），我是否也可以为 Windows Phone 8 和窗口化的 Windows 7 应用程序编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:51:37.403

不。

WinJS（或任何其他格式）Metro Store 应用程序在 Windows 7 中没有直接等效项。

对于 Windows Phone 8，您可能能够重用您的一些业务逻辑，但您需要一个新的 UI 层并且不支持 WinJS 功能。

# java - 原始内存访问 Java/Python

> ID：15347985
> 
> 赞同：1
> 
> 时间：2013-03-11T20:29:15.147
> 
> 标签：java, pointers, reference

> **内存映射硬件**
> 
> 在某些计算架构上，指针可用于直接操作内存或内存映射设备。
> 
> 在对微控制器进行编程时，为指针分配地址是一种非常宝贵的工具。下面是一个简单的例子，它声明了一个 int 类型的指针并将它初始化为一个十六进制地址，在这个例子中是常量 0x7FFF：
> 
> int *hardware_address = (int *)0x7FFF;
> 
> 在 80 年代中期，使用 BIOS 访问 PC 的视频功能很慢。显示密集型应用程序通常用于通过将十六进制常量 0xB8000 转换为指向 80 个无符号 16 位 int 值数组的指针来直接访问 CGA 视频内存。每个值由低字节中的 ASCII 码和高字节中的颜色组成。因此，要将字母“A”放在第 5 行第 2 列的亮白色蓝色上，可以编写如下代码：

```
#define VID ((unsigned short (*)[80])0xB8000)

void foo() {
    VID[4][1] = 0x1F00 | 'A';
} 
```

在没有指针的情况下，在 Java/Python 中这样的事情可能吗？

编辑：

这样的访问是否可能：

```
char* m_ptr=(char*)0x603920;
printf("\nm_ptr: %c",*m_ptr); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:42:59.337

我完全不确定上下文，因此不确定您正在尝试做的事情的有用应用，但这里有：

[Java Native Interface](http://docs.oracle.com/javase/1.3/docs/guide/jni/)应该允许在进程空间内直接访问内存。同样，[python 可以加载](http://docs.python.org/2/extending/extending.html)提供访问方法的 c 模块。

但是，除非系统加载了驱动程序来进行接口，否则任何硬件设备内存都将超出范围。即使这样，驱动程序/内核模块也必须是处理非应用程序空间内存的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:22:03.563

如果您在带有 的操作系统上`/dev/mem`，您可以在其上创建一个`MappedByteBuffer`并执行此类操作。

# post - CouchDB save doc uri incorrect

> ID：15347987
> 
> 赞同：1
> 
> 时间：2013-03-11T20:29:16.990
> 
> 标签：post, couchdb, cloudant

I am really scratching my head over this one. I am using cloudant as my couchdb provider and attempting to save a document to my db. I first establish what my db is in the following code.

db = jQuery.couch.db("[https://fullscore.cloudant.com/fullscore](https://fullscore.cloudant.com/fullscore)");

I do a console.log and see that the URI and name are correct in the object.

```
db.saveDoc(doc, {
                success: function(data) {
                    console.log("posted");
                },
                error: function(status) {
                    console.log("failure");
                }
            }); 
```

However when I look at the post, it posts to: [https://cloudant.com/https%3A%2F%2Ffullscore.cloudant.com%2Ffullscore/](https://cloudant.com/https%3A%2F%2Ffullscore.cloudant.com%2Ffullscore/)

Which as you can see is totally wrong. Obviously there is something built in to append onto cloudant.com ... anyone know how this can be overridden? Or perhaps its some other problem? I'm getting a 404 error.

--Ashley

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T16:25:16.790

为了阐明确切的代码，您需要在沙发对象上设置 URL 前缀，然后只使用数据库名称：

```
$.couch.urlPrefix = "https://username.cloudant.com";
var db = $.couch.db("dbname"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:52:45.837

我猜你是在一个你只应该传递数据库名称的地方传递完整的数据库 URL（即[https://fullscore.cloudant.com/fullscore](https://fullscore.cloudant.com/fullscore)中的后一个“fullscore”部分）。你'可能已经在您的程序中的某个较早的时间点设置了主机名。

# linux - Create directories from filenames with multiple words

> ID：15347988
> 
> 赞同：1
> 
> 时间：2013-03-11T20:29:24.803
> 
> 标签：linux, bash, directory, filenames

I have several files in one directory in Linux that look like:

```
John Smith-data.txt
Peter Walker-address.txt
... 
```

I want a script that reads these filenames and creates one directory for each name in the filename, that is

```
John Smith
Peter Walker 
```

If I do

```
for name in `ls | awk -F - '{print $1}'`; do mkdir $name; done 
```

the following directories are created

```
John
Smith
Peter
Walker 
```

by doing

```
for name in `ls | awk -F - '{print $1}'`; do mkdir "$name"; done 
```

I get the same result

Then, doing

```
for name in "`ls | awk -F - '{print $1}'"`; do mkdir "$name"; done 
```

creeates only one dir named:

```
John Smith Peter Walker 
```

Finaly, if I enter

```
for name in "`ls | awk -F - '{print $1}'"`; do mkdir $name; done 
```

again I get

```
John
Smith
Peter
Walker 
```

Any ideas ? How to use the quotes `""` ?

Thanks in advance

Xavier

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:32:31.353

您想要什么并不完全清楚，但也许：

```
for i in *.txt; do mkdir "${i%-*}"; done 
```

# matlab - Suppress kinks in a plot matlab

> ID：15347989
> 
> 赞同：0
> 
> 时间：2013-03-11T20:29:25.240
> 
> 标签：matlab, csv, plot, smoothing

I have a csv file which contains data like below:[1st row is header]

```
Element,State,Time
Water,Solid,1
Water,Solid,2
Water,Solid,3
Water,Solid,4
Water,Solid,5
Water,Solid,2
Water,Solid,3
Water,Solid,4
Water,Solid,5
Water,Solid,6
Water,Solid,7
Water,Solid,8
Water,Solid,7
Water,Solid,6
Water,Solid,5
Water,Solid,4
Water,Solid,3 
```

The similar pattern is repeated for State: "Solid" replaced with Liquid and Gas. And moreover the Element "Water" can be replaced by some other element too. Time as Integer's are in seconds (to simplify) but can be any real number. Additionally there might by some comment line starting with # in between the file.

Problem Statement: I want to eliminate the first dip in Time values and smooth out using some quadratic or cubic or polynomial interpolation [please notice the first change from 5->2 --->8\. I want to replace these numbers to intermediate values giving a gradual/smooth increase from 5--->8].

And I wish this to be done for all the combinations of Elements and States.

Is this possible through some sort of coding in Matlab etc ?

Any Pointers will be helpful !!

Thanks in advance :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:45:52.840

您在这里有很多选择，这实际上取决于您的数据的性质，但我会从一个简单的移动平均 (MA) 过滤器开始（它将每个数据点替换为相邻数据点的平均值），然后看看这需要我。它很容易实现，在一些样本数据上微调 MA-span 几次通常就足够了。

[http://www.mathworks.se/help/curvefit/smoothing-data.html](http://www.mathworks.se/help/curvefit/smoothing-data.html)

除非我真的需要压缩它，否则我不会尝试将多项式拟合到整个数据集，（但要这样做，您可以使用该`polyfit`函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:36:55.293

您可以使用该[`interp1`](http://www.mathworks.com/help/matlab/ref/interp1.html)功能进行一维插值。语法是

```
yi = interp1(x,y,xi,method) 
```

哪里`x`是你的原始坐标，`y`你的原始值，`xi`是你想要插值的坐标，是`yi`插值。`method`可以是`'spline'`（三次样条插值）、`'pchip'`（分段 Hermite）、`'cubic'`（三次多项式）等（详见文档）。

# android - How to debug C++ code on Android by using Eclipse?

> ID：15347994
> 
> 赞同：2
> 
> 时间：2013-03-11T20:29:34.140
> 
> 标签：android, c++, debugging, android-ndk

I wrote some video streamer (`C++`) on PC and now I try to to implement the same cross platform section on Android. I "played" enough with `NDK` and know a bit about how to compile and integrate `C` code with Android (aka JNI).

The problem is that sometimes my application crashes and as you know Android doesn't point me where code failed (in C/C++ part).

Video Streamer code have a lot of libraries and, lets say, open source parts I used so to leave logs - not good idea. I use Eclipse, **how can I debug C++ code or does Eclipse have any plugins to debug?**

Thanks a lot,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:25:52.950

用于本机代码的 GDB（GNU 调试器）从 Android 2.2（SDK 级别 8）开始可用。

`NDK_DEBUG=1`在命令行中使用选项重建 NDK 代码。启动应用程序。然后从 Windows 或 Cygwin 命令行调用“ndk-gdb”命令，而项目下的 jni 文件夹是当前文件夹。您将获得一个 GDB 控制台。键入`c`并按 Enter 继续程序执行（当 GDB 连接时它会暂停）。

不过，这不适合精神上的弱者。GDB 以其简洁的界面而闻名。但至少它会`bt`在崩溃发生时为您提供崩溃（命令）的堆栈回溯。

您也可以将 GDB 连接到在早期版本的 Android 上运行的进程，但该过程相当棘手。

GDB 参考在[这里](http://sourceware.org/gdb/current/onlinedocs/gdb/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:14:31.190

要记录内容并在 Android 的 logcat 中查看它，我有一个简单的类：

```
#ifndef LOG_H_
#define LOG_H_

#include <android/log.h>

#define LOGD(LOG_TAG, ...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)
#define LOGI(LOG_TAG, ...) __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define LOGV(LOG_TAG, ...) __android_log_print(ANDROID_LOG_VERBOSE, LOG_TAG, __VA_ARGS__)
#define LOGW(LOG_TAG, ...) __android_log_print(ANDROID_LOG_WARN, LOG_TAG, __VA_ARGS__)
#define LOGE(LOG_TAG, ...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)

#endif /* LOG_H_ */ 
```

你可以这样使用它：

```
LOGI("YourClassTag","let's print some stuff: %i, %s", 4, "I'm a string"); 
```

要获取有关某些崩溃的更多信息，您可以尝试使用 adb 启用[JNICheck](http://developer.android.com/training/articles/perf-jni.html#extended_checking)：

> 如果您有普通设备，则可以使用以下命令：
> 
> ```
> adb shell setprop debug.checkjni 1 
> ```
> 
> 这不会影响已经运行的应用程序，但是从那时起启动的任何应用程序都将启用 CheckJNI。（将属性更改为任何其他值或简单地重新启动将再次禁用 CheckJNI。）在这种情况下，下次启动应用程序时，您将在 logcat 输出中看到类似的内容：
> 
> D 后期启用 CheckJNI

# c# - Upload bulk data into SQL Server 2008 from .csv

> ID：15347995
> 
> 赞同：0
> 
> 时间：2013-03-11T20:29:36.257
> 
> 标签：c#, asp.net, sqlbulkcopy

I want to let my users to upload 3000-4000 rows of data into SQL Server 2008\. I would like to use `SqlBulkCopy`. What is the best policy to do it?

Option A:

*   First the `.csv` file will be uploaded to the server and then `SqlBulkCopy` operation will be started.

Option B:

*   Read `.csv` file from user's pc and then send that data to the server.

I am new to ASP.Net.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:08:41.553

这实际上取决于您的情况以及“最快”的含义。在服务器端“加载”数据服务器端（意思是选项 A，上传，然后导入）几乎肯定会在服务器端更快。但是，如果用户体验更重要，您也可以“处理”数据客户端并启动异步上传器。

我会选择选项 A，只是为了让“上传”与“导入”过程脱钩。

# php - 如何在 PHP 中过滤只有父和部分内容作为标识符的 DOM 元素

> ID：15347997
> 
> 赞同：0
> 
> 时间：2013-03-11T20:29:40.513
> 
> 标签：php, regex, dom, web-scraping

我可以选择父 div 类和所有列表项，但尝试使用 UPC 编号捕获特定项并删除标签以及内容。请注意“.parent”类下的所有子项中没有 id 或类。这是屏幕抓取，因此无法添加任何内容。此外， li 顺序可以更改，因此无需倒计时。

只想捕捉...

```
000022200000 
```

这是字符串/网页...

```
<div class="parent">
   <ul>
       <li>...</li>
       <li><b>UPC:</b>000022200000</li> 
```

（这些 upc# 显然都不同，我不想要其他内容）

我正在使用[简单的 HTML DOM](http://simplehtmldom.sourceforge.net/)来解析数据，就像这样......

```
foreach($shdom2->find('.parent ul li') as $e) {
            $shdom = $shdom.'<p>UPC: '.$e.'</p>';
    } 
```

这个循环将我带回所有列表项，现在我需要缩小到带有 UPC# 的那个。

我相信我可以使用 preg_match()，但我无法让一个为我工作。

这是对 preg_match() 的使用，它确实适用于项目中更简单的节点......

```
if (preg_match('/G00([^\/]*)/i', $e, $regs))
        {
            $r = $regs[0];
            $shdom = $shdom.$r.',';
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:42:52.113

您应该能够使用正则表达式：

```
/UPC:\<\/b\>(\d+)/ 
```

`<li>`如果您正在遍历 dom 或`preg_match_all()`针对原始文档，则针对每个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:44:22.600

您可以找到`<b>`标签，获取它的父标签，然后在其子标签中找到您的 UPC，如下所示：

```
foreach( $shdom2->find('.parent ul li b') as $b) {
    $li = $b->parent();
    foreach( $li->children() as $child) { 
        echo $child; // This should print your UPC eventually
    }
} 
```

您必须查看正在形成的 DOM，以了解 UPC 在子节点中的位置（它将是一个文本节点）。您应该可以使用索引直接访问它，就像这样，我只是不确定正确的索引值：

```
foreach( $shdom2->find('.parent ul li b') as $b) {
    if( $b->plaintext === 'UPC:') {
        $li = $b->parent();
        $upc = $li->children( 1); // Change 1 to correct value if wrong
        echo $upc;
    }
} 
```

**编辑：**我已经为 PHP 的算法[创建了一个端口](http://viper-7.com/P4ixGv)`DOMDocument`：

```
$doc = new DOMDocument;
$doc->loadHTML( $html);

$xpath = new DOMXPath( $doc);

foreach( $xpath->query( '//div[@class="parent"]/ul/li/b') as $b) {
    $li = $b->parentNode;
    $upc = $li->childNodes->item(1);
    echo $upc->wholeText;
} 
```

你可以看到[这个输出](http://viper-7.com/4UOMzX)：

```
000022200000 
```

# java - Java Package level access

> ID：15347998
> 
> 赞同：4
> 
> 时间：2013-03-11T20:29:41.003
> 
> 标签：java, oop, default, access-control, access-modifiers

I know that class members with default access control can be accessible at package level but i'm confused about what does package level access actually mean. If default members can be accessed at package level then shouldn't i be visible in class Test2 in following example? class 1-

```
package pkg1;
public class Test {
   int i=0;
} 
```

class 2-

```
import pkg1.Test;
public class Test2 {

void get(){
    Test t = new Test();
    t.i=0;
}
} 
```

Please help me getting this concept. Thanks in advance.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:31:28.213

包级访问意味着只有在同一个包中*定义*的类才能访问包级变量。如果您必须 import `Test`，那么我假设它`Test`在不同的包中，因此它无法访问`i`.

要`Test2`访问`i`，请将其定义在与`Test1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:38:56.210

你忘了写

```
package pkg1; 
```

对于 Test2 类。

它现在应该可以工作