# StackOverflow 问答 14000000-14000999

# javascript - javascript调试文件

> ID：14000005
> 
> 赞同：0
> 
> 时间：2012-12-22T04:15:36.037
> 
> 标签：javascript, jquery, jquery-ui, dojo

> **可能重复：**
> [向轮播横幅添加视差效果，使图像和文本以不同的速度移动](https://stackoverflow.com/questions/14008143/add-parallax-effect-to-carousel-banner-so-images-and-text-move-at-different-spee)

我正在尝试实现 ibm 的轮播，你们能告诉我他们为轮播使用了什么 js 文件吗？我尝试使用 firebug 进行调试，但找不到 [http://www.ibm.com/us/en/](http://www.ibm.com/us/en/)

提供下面的脚本标签

```
<title>IBM - United States</title>
<script src="//1.www.s81c.com/common/js/ipadpilot.js">//</script>
<link href="//1.www.s81c.com/common/v17/css/www.css" rel="stylesheet" title="www" type="text/css">
<script src="//1.www.s81c.com/common/js/dojo/www.js" type="text/javascript">//</script><link rel="search" type="application/opensearchdescription+xml" href="http://www.ibm.com/search/opensearch/description.xml" title="IBM Search">
<link type="text/css" title="www" rel="stylesheet" href="//1.www.s81c.com/common/v17/css/homepage.css">
<script type="text/javascript">
ibmweb.config.set({ sbs: { enabled: false }, easyaccess: { enabled: false }  });

dojo.require('ibmweb.homepage');

</script><script type="text/javascript" charset="utf-8" src="//1.www.s81c.com/common/js/dojo/1.6/ibmweb/homepage.xd.js"></script>
<style type="text/css"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T04:30:55.790

以下都是基于DOJO lib的JS：

```
<div class="ibm-container" id="ibm-promotion-module">
    <div class="ibm-container-body" dojoattachpoint="ribbonContainer" id="ibmweb_ribbon_1"
    widgetid="ibmweb_ribbon_1">
        <a class="ibm-ribbon-prev" dojoattachpoint="scrollLeftButton" role="button"
        href="#" style="margin-top: 63px;" tabindex="-1" title="Previous">Previous</a>
        <div class="ibm-ribbon-pane" dojoattachpoint="scrollContainer"
        style="height: 130px;">
            <div class="ibm-ribbon-section" dojoattachpoint="scrollableNode" role="listbox"
            id="ibmweb_ribbon_1_scrollable" style="left: -330px;">
                <div class="ibm-columns" dojoattachpoint="containerNode" role="option"
                id="ibmweb_ribbonSlide_3" widgetid="ibmweb_ribbonSlide_3">
                    <div class="ibm-col-6-2 ibm-expand-section" role="document" tabindex="0"
                    id="ibmweb_ribbonItemAbstract_3" widgetid="ibmweb_ribbonItemAbstract_3">
                        <!-- eTree :.: Fragment (Image) :.: B302493F36942F04 [R115708Q56317O19]-->
                        <a href="http://www.ibm.com/smarterplanet/us/en?link=ibmhpcs1/corp/smarterplanet/menu">
                            <img alt="Let's build a smarter planet. Explore by smarter industry or topic."
                            height="98" width="318" src="/images/portal/Z228008Z63930L48/csm1_09192011hp_smarter_planet01.png">
                        </a>
                        <div class="ibm-expand-overlay">
                            <div class="ibm-expand-head">
                                <p>
                                    <!-- eTree :.: Fragment (Text) :.: P184488Y05808D03 [P184488Y05808D03]-->
                                    <a href="http://www.ibm.com/smarterplanet/us/en/?re=CS1">Let's build a smarter planet</a>
                                </p>
                                <div class="ibm-sp-icons"></div>
                            </div>
                            <div class="ibm-expand-body">
                                <div class="ibm-expand-body-1">
                                    <!-- eTree :.: Fragment (List) :.: N946533F31089V16 [N946533F31089V16]-->

                             <h2>Industry</h2>

                                    <ul>
                                        <li>
                                            <a class="ibm-sp-overview" href="http://www.ibm.com/smarterplanet/us/en/overview/ideas/index.html?re=CS1">Overview</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-analytics" href="http://www.ibm.com/analytics/us/en/?re=CS1">Analytics</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-banking" href="http://www.ibm.com/smarterplanet/us/en/banking_technology/ideas/index.html?re=CS1">Banking</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-buildings" href="http://www.ibm.com/smarterplanet/us/en/green_buildings/overview/index.html?re=CS1">Buildings</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-work" href="http://www.ibm.com/smarterplanet/us/en/business_agility/ideas/index.html?re=CS1">Business agility</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-cities" href="http://www.ibm.com/smarterplanet/us/en/smarter_cities/overview/index.html?re=CS1">Cities</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="ibm-expand-body-2">
                                    <h2>Topic</h2>
                                    <ul class="ibm-first">
                                        <li>
                                            <a class="ibm-sp-cloud" href="http://www.ibm.com/cloud">Cloud</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-commerce" href="http://www.ibm.com/smarterplanet/us/en/smarter_commerce/overview/index.html?re=CS1">Commerce</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-computing" href="http://www.ibm.com/smarter-computing/us/en/?re=CS1">Computing</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-education" href="http://www.ibm.com/smarterplanet/us/en/education_technology/ideas/index.html?re=CS1">Education</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-energy" href="http://www.ibm.com/smarterplanet/us/en/smart_grid/ideas/index.html?re=CS1">Energy</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-government" href="http://www.ibm.com/smarterplanet/us/en/government/ideas/index.html?re=CS1">Government</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-healthcare" href="http://www.ibm.com/smarterplanet/us/en/healthcare_solutions/ideas/index.html?re=CS1">Healthcare</a>
                                        </li>
                                    </ul>
                                    <ul class="ibm-second">
                                        <li>
                                            <a class="ibm-sp-products" href="http://www.ibm.com/smarterplanet/us/en/embedded_systems/overview/index.html?re=CS1">Products and services</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-security" href="http://www.ibm.com/smarterplanet/us/en/business_resilience_management/overview/index.html?re=CS1">Security and resilience</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-sustainability" href="http://www.ibm.com/smarterplanet/us/en/green_and_sustainability/overview/index.html?re=CS1">Sustainability</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-telecom" href="http://www.ibm.com/smarterplanet/us/en/communication_technology/ideas/index.html?re=CS1">Telecom</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-transportation" href="http://www.ibm.com/smarterplanet/us/en/transportation_systems/overview/index.html?re=CS1">Transportation</a>
                                        </li>
                                        <li>
                                            <a class="ibm-sp-water" href="http://www.ibm.com/smarterplanet/us/en/water_management/ideas/index.html?re=CS1">Water</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <ul class="ibm-sp-tools">
                                <li>
                                    <a title="Facebook" class="ibm-share-facebook" href="http://www.facebook.com/peopleforasmarterplanet?re=CS1"></a>
                                </li>
                                <li>
                                    <a title="Twitter" class="ibm-share-twitter" href="http://www.twitter.com/smarterplanet?re=CS1"></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ibm-columns" dojoattachpoint="containerNode" role="option"
                id="ibmweb_ribbonSlide_4" widgetid="ibmweb_ribbonSlide_4">
                    <div class="ibm-col-6-2 " role="document" tabindex="0" id="ibmweb_ribbonItemAbstract_4"
                    widgetid="ibmweb_ribbonItemAbstract_4">
                        <!-- eTree :.: Fragment (Image) :.: J527612Q18333Q57 [Z630132F24149K18]-->
                        <a href="http://www.ibm.com/smarterplanet/us/en/innovation_explanations/article/guru_banavar.html">
                            <img alt="Innovations explanations. Guru Banavar explains why cities need to get smarter"
                            height="98" width="318" src="/images/portal/Z630132F24149K18/12172012_banavar_csm.png"
                            class="ibm-no-mobile">
                            <img alt="Innovations explanations. Guru Banavar explains why cities need to get smarter"
                            height="98" width="318" src="/images/portal/Z630132F24149K18/12172012_banavar_csm.png"
                            class="ibm-mobile">
                        </a>
                    </div>
                </div>
                <div class="ibm-columns" dojoattachpoint="containerNode" role="option"
                id="ibmweb_ribbonSlide_5" widgetid="ibmweb_ribbonSlide_5">
                    <div class="ibm-col-6-2 " role="document" tabindex="0" id="ibmweb_ribbonItemAbstract_5"
                    widgetid="ibmweb_ribbonItemAbstract_5">
                        <!-- eTree :.: Fragment (Image) :.: H911989L14230B33 [T608269X41766H94]-->
                        <a href="http://www.ibm.com/software/collaboration/events/connect/">
                            <img alt="Social business, meet technology. Register now for a discount to IBM Connect 2013"
                            height="98" width="318" src="/images/portal/T608269X41766H94/12172012_connect_csm.png"
                            class="ibm-no-mobile">
                            <img alt="Social business, meet technology. Register now for a discount to IBM Connect 2013"
                            height="98" width="318" src="/images/portal/T608269X41766H94/12172012_connect_csm.png"
                            class="ibm-mobile">
                        </a>
                    </div>
                </div>
                <div class="ibm-columns" dojoattachpoint="containerNode" role="option"
                id="ibmweb_ribbonSlide_6" widgetid="ibmweb_ribbonSlide_6">
                    <div class="ibm-col-6-2 " role="document" tabindex="0" id="ibmweb_ribbonItemAbstract_6"
                    widgetid="ibmweb_ribbonItemAbstract_6">
                        <!-- eTree :.: Fragment (Image) :.: N568931Q76017I54 [Y307681Q28893R02]-->
                        <a href="http://www.ibm.com/account/orderstatus/mobile/">
                            <img alt="IBM order info on the go. Away from your desktop? Use Order Status OnLine Mobile"
                            height="98" width="318" src="/images/portal/Y307681Q28893R02/cms4_order_status_mobile.png">
                        </a>
                    </div>
                </div>
                <div class="ibm-columns" dojoattachpoint="containerNode" role="option"
                id="ibmweb_ribbonSlide_7" widgetid="ibmweb_ribbonSlide_7">
                    <div class="ibm-col-6-2 " role="document" tabindex="0" id="ibmweb_ribbonItemAbstract_7"
                    widgetid="ibmweb_ribbonItemAbstract_7">
                        <!-- eTree :.: Fragment (Image) :.: S428344A26958U85 [X793998X98785J28]-->
                        <a href="http://www.redbooks.ibm.com/">
                            <img alt="Hands on and step-by-step. Download thousands of IBM Readbooks -- Free."
                            height="98" width="318" src="/images/portal/X793998X98785J28/08152011_Redbooks.png">
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <a class="ibm-ribbon-next" dojoattachpoint="scrollRightButton" role="button"
        href="#" style="margin-top: -87px;" tabindex="-1" title="Next">Next</a>
    </div>
</div> 
```

# android - 继承 ActionBarSherlock 和 Android YouTubePlayer

> ID：14000006
> 
> 赞同：4
> 
> 时间：2012-12-22T04:15:51.377
> 
> 标签：android, youtube-api, actionbarsherlock, multiple-inheritance

我开发了一个使用 ActionBarSherlock 播放 youtube 视频的应用程序。

现在 Android 的 YouTubePlayer api 可用（[在这里](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayer)），我想将它集成到我的应用程序中以改进播放和控制。

我遇到了一个问题，因为我需要为我的活动使用多重继承来扩展`SherlockActivity`和`YouTubeBaseActivity`.

我查看了[这篇文章](http://csis.pace.edu/~bergin/patterns/multipleinheritance.html)，试图理解 Java 中的多重继承，但坦率地说，这超出了我的想象。

如果我尝试做这样[的](https://stackoverflow.com/a/5836735/522660)事情，我会遇到无法实例化的问题`SherlockActivity`。

任何人都有一些如何扩展这两个类的具体例子？有没有人不得不扩展这两个`SherlockActivity`类和其他一些类，你是如何完成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T17:00:58.790

我遇到了同样的问题 - 我想将 YouTube 播放器添加到我的应用程序中，但我不想从中删除 Sherlock（基于支持库）。糟糕的是，我无法使用任何播放器，因为我遇到了错误（片段膨胀、YouTubePlayerView 无法在没有特殊 Activity 的情况下启动等等）。

什么有效：我使用了 SherlockFragmentActivity、FragmentManager (getSupportFragmentManager()) 和 YouTubePlayerSupportFragment。我没有将它添加到 XML 中，而是从代码中创建了所有内容。我的布局如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/fragmentz"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
</LinearLayout>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" /> 
```

和Java代码：

```
package com.example.youtubetesting;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayer.OnInitializedListener;
import com.google.android.youtube.player.YouTubePlayerSupportFragment;
import com.google.android.youtube.player.YouTubePlayer.Provider;
import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

public class MainActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();

    YouTubePlayerSupportFragment fragment = new YouTubePlayerSupportFragment();
    fragmentTransaction.add(R.id.fragmentz, fragment);
    fragmentTransaction.commit();

    fragment.initialize("Your API KEY HERE",
            new OnInitializedListener() {

                @Override
                public void onInitializationSuccess(Provider arg0,
                        YouTubePlayer arg1, boolean arg2) {
                    if (!arg2) {
                        arg1.loadVideo("wKJ9KzGQq0w");
                    }
                }

                @Override
                public void onInitializationFailure(Provider arg0,
                        YouTubeInitializationResult arg1) {
                }

            });
}

} 
```

当我以正常方式膨胀视图时，我不知道为什么 Android 会返回错误，但这非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:34:16.823

您**不能同时**使用 a`YouTubeBaseActivity`和 a `SherlockActivity`，至少不能以实际的方式使用。

相反，如果您只使用 a`SherlockFragmentActivity`来托管[YouTubePlayerFragment会容易得多](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment)

`YouTubePlayerFragment`包含一个可以让您播放 YouTube 视频的`YouTubePlayerView`类似内容。`YouTubeBaseActivity`

如果您需要有关 Android 上 Fragments 的教程，您可以从[这里开始](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T07:33:17.177

我复制了该类的源代码，`com.actionbarsherlock.app.SherlockActivity`并将其作为 放在我的项目中`my.package.SherlockYoutubeActivity`，并将“ `extends Activity`”替换为“ `extends YouTubeBaseActivity`。” 在我的活动中，我从这个类继承了这样的：

```
public class MyVideoActivity extends SherlockYoutubeActivity implements OnInitializedListener 
```

# spring - Spring - PropertyPlaceholderConfigurer

> ID：14000007
> 
> 赞同：2
> 
> 时间：2012-12-22T04:16:05.193
> 
> 标签：spring, profiles

我正在尝试使用 Spring 3 为不同的配置文件实现应用程序，但我不确定它是如何使用 Spring 3 开发的。我有几个困惑

1.  当您使用 PropertyPlaceholderConfigurer 开发应用程序时，您如何创建传递给 DAO 类的会话因子对象？
2.  如何为每个属性文件创建配置文件。假设我想传递一个“Dev”参数，然后从 dev.proertie 文件中传递应用程序准备好的属性文件，然后将其传递给应用程序。
3.  我刚刚在谷歌上阅读了一些教程，大多数教程都遵循每个类中的硬编码配置文件名称，例如每个 DAO 类中的@Profile("dev")。有什么方法可以自动执行它意味着如何注入 DAO 类？我不想在每个班级都添加个人资料名称

这是我的申请清单

这是简单模型对象。

** Employee.Java**

```
public class Employee {
  private String name;
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
} 
```

这个类处理数据库。所以我想在这个类中有会话对象而不是数据源对象。

**员工 DAO 类**

```
public class EmployeeDao {
  private DataSource dataSource;
  public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
  }
  public void insert(Employee employee){
   String sql = "insert into employee(name) VALUES (?)";
   Connection conn = null;
   try {
     conn = dataSource.getConnection();
     PreparedStatement ps = conn.prepareStatement(sql);
     ps.setString(1, employee.getName());
     ps.executeUpdate();
     ps.close();
     conn.close();
   } 
   catch (SQLException sqle) {
     System.out.println("Sql Exception " + sqle.getMessage());
   }
 } 
```

此类实际上从属性文件中读取数据，但不确定如何构建注入我的 DAO 类的会话对象

**配置文件**

```
public class Config {
  @Bean
  public static PropertyPlaceholderConfigurer properties(){
   PropertyPlaceholderConfigurer ppc = new PropertyPlaceholderConfigurer();
   ClassPathResource[] resources = new ClassPathResource[ ]
   { new ClassPathResource( "db.properties" ) };
   ppc.setLocations( resources );
   ppc.setIgnoreUnresolvablePlaceholders( true );
   return ppc;
  }
  @Value( "${jdbc.url}" ) private String jdbcUrl;
  @Value( "${jdbc.driverClassName}" ) private String driverClassName;
  @Value( "${jdbc.username}" ) private String username;
  @Value( "${jdbc.password}" ) private String password;
  @Bean(name="datasource")
  public DataSource datasource() {
    BasicDataSource ds = new BasicDataSource();
    ds.setDriverClassName(driverClassName);
    ds.setUrl(jdbcUrl);
    ds.setUsername(username);
    ds.setPassword(password);
    return ds;
  }
  @Bean(name="employee")
  public Employee employee() {
    Employee employee = new Employee();
    employee.setName("Sahil");
    return employee;
  }

  @Bean(name="employeeDao")
  public EmployeeDao employeeDao() {
  EmployeeDao employeeDao =  new EmployeeDao();
  employeeDao.setDataSource(datasource());
  return employeeDao;
} 
```

# java - 需要枚举设计指导

> ID：14000009
> 
> 赞同：0
> 
> 时间：2012-12-22T04:16:26.083
> 
> 标签：java, enums

我真的很喜欢在编码时轻松阅读枚举。最近我遇到了一个任务，我需要接受一个关键字列表，每个关键字都会执行一个操作。

关键字示例：早餐、午餐、晚餐

所以我希望能够写出这样的东西： `String whatImGoingToMake = Keywords.BREAKFAST("banana").getPopularRecipe();` 这里的想法是获得以香蕉为原料的流行早餐食谱。我想到了这一点，因为我认为使用反射它应该能够工作。

问题是我无法调用 getPopularRecipe() 因为它不是静态的，并且不允许用于内部类。

我是否正确，强制枚举做这样的事情并改用类并不常见？对于下一个程序员来说，最简单的实现是什么？

也许是因为它来晚了，但我在这一点上挣扎。

如果可能的话，我试图远离一长串 IF 语句或 switch 语句。我只是不喜欢看到它们并不惜一切代价避免它们。所以我不想写这样的东西：

```
 if (param.equals("BREAKFAST") {
       //lookup in breakfast db
    } else if (param.equals("LUNCH") {
       //you get the idea - I dont like this since it can go on forever if we start adding BRUNCH, SUPPER, SNACK
    } 
```

这是我有兴趣开始工作的枚举：

```
 public enum MyUtil {
        BREAKFAST {
            public String getPopularRecipe(String ingredient) {
                //do something with ingredient
                return recipe;
            }
        },
        LUNCH {
            public String getPopularRecipe(String ingredient) {
                //do something with ingredient
                return recipe;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:20:30.837

如果我正确理解您的问题，您需要在 Enum 中有一个`abstract`方法`getPopularRecipe()`，并且所有枚举实例都应该覆盖。

例子：

```
public enum MyUtil {
        BREAKFAST {
            @Override
            public String getPopularRecipe(String ingredient) {
                //do something with ingredient
                return recipe;
            }
        },
        LUNCH {
              @Override       
            public String getPopularRecipe(String ingredient) {
                //do something with ingredient
                return recipe;
            }
        }
      public abstract String  getPopularRecipe(String ingredient);
    } 
```

有关更多信息，请参阅本[教程](http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html)（阅读至最后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:28:23.313

你把事情复杂化了：

```
public enum Meal {
    BREAKFAST("Bacon and eggs"),
    LUNCH("Salad"),
    DINNER("Steak and veg");
    private final String ingredient;
    Meal(String ingredient) {
        // do whatever you like here
        this.ingredient = ingredient;
    }
    public String getPopularRecipe() {
        return ingredient;
    }
} 
```

构造函数、字段和方法可以像普通类一样复杂。枚举比许多人意识到的更类似于普通类。它们甚至不是不可变的（学究们注意：虽然引用是最终的，但实例与任何类一样可变 - 例如，枚举可能具有 setter 方法等）

# jsf - 在单耳中部署 struts 和 JSF 应用程序

> ID：14000019
> 
> 赞同：1
> 
> 时间：2012-12-22T04:18:31.887
> 
> 标签：jsf, web-applications, struts, weblogic

我在两个不同的 weblogic 服务器中部署了两个 web 应用程序。

Application 1 是一个打包为 EAR 的基于 struts 1.2 的应用程序。

应用程序 2 是一个 JSF 应用程序，打包为 war（与 App1 相比较小的应用程序）。

目前，这两个应用程序正在从两个不同的门户访问。

想法是停用一台服务器并将所有内容部署在一台服务器上，并在可能的情况下合并两个应用程序。

由于应用程序 2 是应用程序 1 的子集，因此需要将两个应用程序合并并部署在同一台服务器上。

我想知道以下哪一项是最好的方法：

1.  使用两个不同的 war 文件在一个耳朵中部署这两个应用程序。
2.  将这两个应用程序作为独立的ear 文件部署在服务器上。
3.  通过将 JSF 转换为 struts 1.2，将 App2 合并到 App1 中。放置一个过滤器
    以将请求重定向到正确的应用程序（如功能）正确。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:05:19.497

我认为答案在一定程度上取决于您的具体应用。我的建议如下：

*   在我看来，方法 3 不是一个好主意，因为它的大量工作实际上并没有带来任何真正的好处。
*   如果这两个应用程序彼此独立，我会选择方法 2。这应该很容易做到，并使两个应用程序彼此分开。
*   但如果这两个应用程序共享共同的源代码或功能，您应该考虑选择第​​一种方法。这样，您可以拥有两个 WAR 档案，它们与所有通用代码一起打包在一个大型 EAR 档案中。

我希望这有帮助。:)

# sql - 在 SQL Server 2008 查询中获取冲突事件

> ID：14000022
> 
> 赞同：0
> 
> 时间：2012-12-22T04:19:08.037
> 
> 标签：sql, sql-server-2008

我有以下架构和相关数据。

```
-- Schema
CREATE TABLE [PERSON] (
    [id] int NOT NULL,
    [first_name] varchar(50) NOT NULL,
    [last_name] varchar (50) NOT NULL
    CONSTRAINT [PK__PERSON] PRIMARY KEY ([id])
) 
GO

CREATE TABLE [EVENT] (
    [id] int NOT NULL,
    [name] varchar(50) NOT NULL
    CONSTRAINT [PK__EVENT] PRIMARY KEY ([id])
)
GO

CREATE TABLE [EVENT_PARTICIPANT] (
    [event_id] int NOT NULL,
    [person_id] int NOT NULL
    CONSTRAINT [PK__EVENT_PARTICIPANT] PRIMARY KEY ([event_id], [person_id])
)
GO

ALTER TABLE [EVENT_PARTICIPANT] ADD CONSTRAINT [FK__EVENT__EVENT_PARTICIPANT__event_id]
    FOREIGN KEY ([event_id])
    REFERENCES [EVENT]([id])
GO

ALTER TABLE [EVENT_PARTICIPANT] ADD CONSTRAINT [FK__PERSON__EVENT_PARTICIPANT__person_id]
    FOREIGN KEY ([person_id])
    REFERENCES [PERSON]([id])
GO

-- data
INSERT INTO [PERSON] VALUES(1, 'Alpha', 'A')
INSERT INTO [PERSON] VALUES(2, 'Bravo', 'B')
INSERT INTO [PERSON] VALUES(3, 'Charlie', 'C')
INSERT INTO [PERSON] VALUES(4, 'Delta', 'D')
INSERT INTO [PERSON] VALUES(5, 'Echo', 'E')
INSERT INTO [PERSON] VALUES(6, 'Foxtrot', 'F')
INSERT INTO [PERSON] VALUES(7, 'Golf', 'G')
INSERT INTO [PERSON] VALUES(8, 'Hotel', 'H')
INSERT INTO [PERSON] VALUES(9, 'India', 'I')
INSERT INTO [PERSON] VALUES(10, 'Juliet', 'J')
GO

INSERT INTO [EVENT] VALUES(1, 'Event A')
INSERT INTO [EVENT] VALUES(2, 'Event B')
INSERT INTO [EVENT] VALUES(3, 'Event C')
INSERT INTO [EVENT] VALUES(4, 'Event D')
INSERT INTO [EVENT] VALUES(5, 'Event E')
INSERT INTO [EVENT] VALUES(6, 'Event F')
INSERT INTO [EVENT] VALUES(7, 'Event G')
INSERT INTO [EVENT] VALUES(8, 'Event H')
INSERT INTO [EVENT] VALUES(9, 'Event I')
INSERT INTO [EVENT] VALUES(10, 'Event J')
GO

INSERT INTO [EVENT_PARTICIPANT] VALUES(1,1)
INSERT INTO [EVENT_PARTICIPANT] VALUES(1,2)
INSERT INTO [EVENT_PARTICIPANT] VALUES(1,3)
INSERT INTO [EVENT_PARTICIPANT] VALUES(2,4)
INSERT INTO [EVENT_PARTICIPANT] VALUES(2,5)
INSERT INTO [EVENT_PARTICIPANT] VALUES(2,6)
INSERT INTO [EVENT_PARTICIPANT] VALUES(3,5)
INSERT INTO [EVENT_PARTICIPANT] VALUES(3,6)
INSERT INTO [EVENT_PARTICIPANT] VALUES(4,1)
INSERT INTO [EVENT_PARTICIPANT] VALUES(4,4)
INSERT INTO [EVENT_PARTICIPANT] VALUES(5,1)
INSERT INTO [EVENT_PARTICIPANT] VALUES(6,7)
INSERT INTO [EVENT_PARTICIPANT] VALUES(7,8)
INSERT INTO [EVENT_PARTICIPANT] VALUES(8,9)
GO 
```

我需要找到所有有匹配参与者的冲突事件，以便查询为每个事件返回与其冲突的事件列表。匹配不一定是 100% 即使一个人匹配，也意味着事件相互冲突。

我已经为每个事件生成了一个以逗号分隔的事件参与者列表，但是在如何编写一个有效的查询来获取 SQL Server 2008 的冲突事件时遇到了一些困难。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:36:56.787

您可以尝试使用此查询：

`select distinct ep1.event_id,ep2.event_id from EVENT_PARTICIPANT ep1 inner join EVENT_PARTICIPANT ep2 on ep1.person_id=ep2.person_id where ep1.event_id <> ep2.event_id order by 1,2`

# java - 使用 javafx 在 web 视图中查看嵌入 flash 源的 html 文件

> ID：14000023
> 
> 赞同：1
> 
> 时间：2012-12-22T04:19:09.087
> 
> 标签：java, webview, javafx-2, javafx

我正在尝试在 javafx 中播放 swf 文件。该文件与 Flash 播放器兼容。该文件嵌入在 html 中，我试图在 javafx 的 webview 控件中打开该 html 文件，但这不支持该文件并且不显示任何内容。

**你能告诉我另一种方式，以便我可以显示嵌入 Flash 播放器文件的 html 文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:11:15.420

JavaFx 无法播放 swf 文件。

您可以在外部浏览器[HostServices.showDocument](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)中打开嵌入 Flash 文件的 html 文件。

您可以使用[DJ 项目播放嵌入在 Java Swing 程序中的](http://djproject.sourceforge.net/main/index.html)flash 。

# sql - IF..ELSE 块不起作用 SQL

> ID：14000030
> 
> 赞同：3
> 
> 时间：2012-12-22T04:20:18.107
> 
> 标签：sql, sql-server, tsql

我的程序中有一个`if else`障碍。**`@timeID`**根据今天的日期在此块中设置 临时变量的值。

```
declare @timeId int
if(datename(Dw,getdate())='Sunday' or datename(Dw,getdate())='Saturday')
begin
  set @timeId=2
end

if(datename(Dw,getdate())!='Sunday' or datename(Dw,getdate())!='Saturday')
begin
 if(convert(varchar(11),getdate(),108)<='08:30:00')
  begin
   set @timeId=0
  end
 else
  begin
   set @timeId=1
  end
end

select @timeId as TimeID 
```

由于今天是**星期六**，**`@timeID`**必须设置为 2。但输出显示**`@timeId=1`**我的程序导致错误的结果。请帮忙看看有什么问题。

```
select datename(Dw,getdate()) 
```

周六返回

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T04:26:22.487

好的，假设是星期六：

第一个`IF`块运行。

然后第二个`IF`块由于`OR`条件 on `!= Sunday`, overwriting而运行`@timeid`。

你想要一个 ELSE（事实上，你可以放弃额外的测试，简化代码）：

```
declare @timeId int
if(datename(Dw,getdate())='Sunday' or datename(Dw,getdate())='Saturday')
begin
  set @timeId=2
end

ELSE

begin
 if(convert(varchar(11),getdate(),108)<='08:30:00')
  begin
   set @timeId=0
  end
 else
  begin
   set @timeId=1
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T04:31:25.493

您的第二个 if 子句应该使用 AND，而不是 OR。每天不是星期天也不是星期六

# wordpress - 检测按下哪个按钮的 WP 选项

> ID：14000041
> 
> 赞同：2
> 
> 时间：2012-12-22T04:22:18.850
> 
> 标签：wordpress

我正在创建一个自定义插件并有一个选项页面。当我单击保存按钮时，我的变量正在保存，但我想添加第二个按钮并检测按下了哪个按钮。我一直在尝试将名称放在按钮中，并希望通过 isset $_POST['name'] {} 检测到它们，但是当我单击保存或其他按钮时，它只是保存了我的变量，但没有放POST 变量中的任何内容。正如您在代码中看到的，一个按钮保存表单中的变量，另一个按钮使用这些变量保存并运行一些脚本。问题是我需要页面知道重新加载后单击了哪个按钮，您可以看到我尝试识别最底部单击了哪个按钮。我更喜欢 php 解决方案，所以我可以逐步增强。谢谢！

```
<div class="wrap">
<h2>Config Me Bro</h2>
<form method="post" action="options.php">
    <?php settings_fields('aug_options'); ?>
    <?php $options = get_option('data_value'); ?>
    <label for="">Checkbox</label>
          <input name="data_value[option1]" type="checkbox" value="1" id="" <?php checked('1', $options['option1']); ?> />
     <label for="general_title">Title</label>
           <input type="text" name="data_value[sometext]" id="general_title" value="<?php echo $options['sometext']; ?>" />

    <p class="submit">
        <?php submit_button('Save Changes', 'primary', 'save_config', false); ?>
        <?php submit_button('Run Config', 'secondary', 'run_config', false); ?>
    </p>
</form>
</div>
<pre> <?php print_r($_POST);?></pre>
<?php
}

/* Run Config Settings */
if (isset($_POST['run_config'])){
     echo '<h1>I am running</h1>';
}
/* Save config Settings */
elseif (isset($_POST['save_config'])){
   echo '<h1>Saved it</h1>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T10:34:31.120

以防万一您仍在寻找答案。此外，以供将来参考，以便我在丢失时可以找到它......这是我所做的，它似乎工作正常。

当你使用 register_setting('group', 'setting') 确保使用第三个参数并定义一个回调函数。在回调中，您将能够访问提交的选项，还可以访问 $_POST 变量。$_POST['submit'] 是你要找的那个。

在实践中....

```
register_settings('my_plugin_settings_group', 'my_plugin_settings', 'my_plugin_settings_callback');

function my_plugin_settings_callback( $posted_options ) {
    // $_POST['submit'] contains the value of your submit button
    if( $_POST['submit'] == 'Run Config' ) {
        // your code here
    }
    // $posted_options is an array with all the values submitted so you have to return it.
    return $posted_options;
} 
```

我希望这对其他人有帮助。我多年来一直在寻找答案，然后开始尝试。

*   RK

# iphone - dispatch_async 抛出 NSPathStore2 错误

> ID：14000042
> 
> 赞同：0
> 
> 时间：2012-12-22T04:22:20.877
> 
> 标签：iphone, objective-c, xcode, ios5

我在抛出异常错误的类别中调用一个函数：

```
-[NSPathStore2 countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x1f5572b0 
```

该块内引发错误。

```
NSArray *shindys = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSError *error = nil;
__weak UIManagedDocument *shindyDatabase = self.shindyDatabase;
dispatch_queue_t downloadQueue = dispatch_queue_create("Shindy Fethcer", nil);
dispatch_async(downloadQueue, ^{
    for (NSDictionary *shindyInfo in shindys) {
        [Shindy shindyWithShindyDBInfo:shindyInfo inManagedObjectContext:shindyDatabase.managedObjectContext];
        [shindyInfo setValue:self.detailView.text forKey:@"details"];
        NSLog(@"This is getting performed.");
    }
}); 
```

预先分配`NSDictionary`没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:40:35.690

'shindys' 不是 NSArray。如果您停止调用 -objectAtIndex:，它将是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T04:44:58.867

在幕后，一个`for(element in container)`循环使用`countByEnumeratingWithState:objects:count:`消息来枚举容器的元素。

该类`NSPathStore2`是`NSString`系统用于已知为文件系统路径的字符串的子类。

异常消息告诉您`NSPathStore2`不支持该`countByEnumeratingWithState:objects:count:`消息。

这是有道理的，因为`NSString`（和`NSPathStore2`子类）不是对象容器。

该`NSSearchPathForDirectoriesInDomains`函数确实返回一个`NSArray`（这是一个可以在`for/in`循环中使用的对象容器），但是您正在`NSPathStore2`使用`objectAtIndex:`. 因此，即使您声明`shindys`为`NSArray`，您实际上是在将其设置为`NSPathStore2`。

你调用的方式`NSSearchPathForDirectoriesInDomains`，它总是会返回一个单元素数组，所以使用它的第一个元素的想法`objectAtIndex:`很好。没有理由尝试枚举它的所有元素，因为它只有一个元素。

此外，在您的块中，您发送`setValue:forKey:`到`shindyInfo`，期望`shindyInfo`成为字典。但即使`shindys`是一个数组，它也会是一个字符串数组，因为这就是`NSSearchPathForDirectoriesInDomains`返回的内容。并且字符串没有任何可以设置的属性`setValue:forKey:`。

这段代码很乱。目前尚不清楚您要做什么，但我认为您不了解`NSSearchPathForDirectoriesInDomains`.

# jquery - 包含 swf 后 TableTools 按钮不起作用

> ID：14000043
> 
> 赞同：3
> 
> 时间：2012-12-22T04:22:25.187
> 
> 标签：jquery, jquery-datatables

下载`copy_csv_xls_pdf.swf`TableTools 的示例包并包含`jquery`在`jquery.dataTables.js`文件头中后，按钮无法正常工作。

```
<head>
    <script type="text/javascript" charset="utf-8" src="media/js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="media/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf-8" src="media/js/ZeroClipboard.js"></script>
    <script type="text/javascript" charset="utf-8" src="media/js/TableTools.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready( function () {
            $('#example').dataTable( {
                "sDom": 'T<"clear">lfrtip',
                "oTableTools": {
                    "sSwfPath": "media/swf/copy_csv_xls_pdf.swf"
                }
            } );
        } );
    </script>
</head> 
```

表格工具树：

```
───media
    ├───as3
    │   │   ZeroClipboard.as
    │   │   ZeroClipboardPdf.as
    │   │
    │   └───lib
    │           AlivePDF.swc
    │
    ├───css
    │       TableTools.css
    │       TableTools_JUI.css
    ├───js
    │       jquery.dataTables.js
    │       jquery.dataTables.min.js
    │       jquery.js
    │       TableTools.js
    │       TableTools.min.js
    │       TableTools.min.js.gz
    │       ZeroClipboard.js
    │
    └───swf
            copy_csv_xls.swf
            copy_csv_xls_pdf.swf 
```

我可以在桌子上看到 tableTools 按钮，但它们不起作用。

# datagridview - 如何更改datagridview c#.net中特定行的背景颜色？

> ID：14000045
> 
> 赞同：0
> 
> 时间：2012-12-22T04:22:48.573
> 
> 标签：datagridview, row, backcolor

我有任务，如果我删除一行，则在我的 datagridview 中，该行将更改背景颜色而不是在数据库中删除，直到操作（更新或保存）提交。怎么能这样。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:48:43.550

由于您的问题中缺少信息和代码，因此很难提供完整的答案。你可能需要这样的东西。

```
private void dataGridView1_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
{
    e.Cancel = true;
    dataGridView1.CurrentRow.DefaultCellStyle.BackColor = Color.LightGreen;
} 
```

按照这些链接。我认为它们可能对您解决问题有用。

[`UserDeletingRow`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.userdeletingrow.aspx)（当一行即将被删除时触发）

[`DefaultCellStyle`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.defaultcellstyle.aspx)（更改 CurrentRow 的 BackColor）

# php - 使用php将大量数据写入Excel没有内存限制错误

> ID：14000050
> 
> 赞同：7
> 
> 时间：2012-12-22T04:23:36.300
> 
> 标签：php, memory, export-to-excel

我有一个 oracle 数据库，其中存储了大量的生物特征数据，如 HRV 和 ECG。我需要在 excel 表中为每个用户显示这些数据。但是这个数据是如此之大，即使对于单个用户，我们也会获得超过 1,00,000 条记录。目前有100~个用户。

我正在做的是：

1.  我使用命令行执行 CRON 作业，这是我在 Zend 框架中开发的。
2.  我确保这个 CRON 不重叠。
3.  我从 oracle 数据库中为每个用户一一获取所有数据，然后将其存储在一个数组中。
4.  当我获取所有用户的数据时，我正在使用[phpexcel](http://phpexcel.codeplex.com)库生成 excel 表。

    **Excel表的结构**

    *   **uid 1/uid/2 uid/3 ----------- 第 n 个**
    *   数据 |数据 |数据 |
    *   数据 |数据 |数据 |
    *   **|**
    *   第n个

问题 ：

PHP 占用 1.5 GB 的 RAM 并将数据存储在数组中并将其发送到与 phpexcel 交互的函数，但这个库需要 3-4 小时，然后我得到“致命：内存限制”错误。我的系统只有 2 GB RAM。

我应该采取哪些步骤来优化我的代码以处理这种大小的数据并以 excel 格式显示相同的信息，或者我需要增加 RAM？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T04:33:11.120

考虑仅使用 PHP 来排除某种包含结果数据的 Excel 可读分隔文件 (CSV)。（这个想法是您不会通过 PHP 写入 Excel ——因为您遇到的限制）。

您可以通过类似 Powershell 的方式请求 php 生成的文件，然后让 Powershell 或其他脚本选项将 csv 文件直接打开到 Excel 中，然后另存为 xlsx。

或者您可以让您的命令行 php 执行“系统”调用并执行脚本步骤，将 csv 直接打开到 Excel 中，然后将其保存为 xlsx。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T04:34:23.020

如果单个用户数据很大，你使用了太多内存来保存这些数据，尝试以批处理模式在excel中写入。它将节省您的内存使用量。

# regex - 遍历匹配项并替换 VBA RegEx

> ID：14000054
> 
> 赞同：5
> 
> 时间：2012-12-22T04:25:35.467
> 
> 标签：regex, excel, vba

是否可以遍历`VBA RegEx`匹配项并替换为 ID 值给出的特定数据？

例如，

```
<a id="a-UP:124" {REPLACEITEMHERE}
.../a> 
```

我的模式是这样的：

```
<a id="a-([\w\d]+:[\w\d]+)" ({REPLACEITEMHERE}) 
```

所以我有多个“替换项目”，每个项目的值都是唯一的`UP:124`。

这可能`VBA RegEx`吗？只是想在我经历一个更繁琐的过程之前知道！谢谢！

**更新（根据评论者的要求提供更多详细信息 - 希望这能让我更清楚我在寻找什么！我了解如何创建模式，它会更多地遍历结果，然后对我遇到的每个发现执行替换麻烦了。谢谢！）：**

这是我正在使用的 RegEx 模式：

```
<a id="a-([\w\d]+:[\w\d]+)"[^{]+({FILE})[^{]+({PERCENT})[^{]+({COLOR}) 
```

设置为：

```
.Global = True
.IgnoreCase = True
.MultiLine = False 
```

我想要的替换模式是检查第一个捕获组的值是什么`$1`，然后用我存储在类中的适当值替换这些值`{FILE}` `{PERCENT}` `{COLOR}`（组`$2`、、`$3`和）。`$4`

```
<path
   style="fill:#d40000;fill-opacity:1;filter:url(#filter5248)"
   d="m 168.04373,162.08375 c -4.7586,-5.00473 -8.65201,-9.35811 -8.65201,-9.67419 0,-0.81973 18.30811,-16.3921 25.16949,-21.40847 7.11903,-5.20474 16.462,-10.93031 17.83606,-10.93031 0.56369,0 3.81291,5.56174 7.22048,12.35942 l 6.19558,12.35941 -7.13301,3.9009 c -7.96536,4.3561 -21.53264,13.83148 -27.5305,19.22729 -2.16466,1.94738 -4.05237,3.47876 -4.19491,3.40307 -0.14254,-0.0757 -4.15257,-4.2324 -8.91118,-9.23712 z"
   id="path5246"
   inkscape:connector-curvature="0"
   transform="matrix(0.8,0,0,-0.8,0,792)" />
<a id="a-UP:115E"
xlink:href="{FILE}"
xlink:title="UP:115E
{PERCENT}%">
<path
id="UP:115E"
style="fill:{COLOR};fill-opacity:1;stroke:none"

   d="m 272.81031,529.10942 c 0.32799,18.973 -0.6558,38.48935 0.49159,57.12295 13.02609,-0.33792 26.60749,0.66479 39.29456,-0.4916 -0.32799,-18.973 0.6558,-38.48935 -0.49159,-57.12294 -13.01823,0.33523 -26.61862,-0.66099 -39.29456,0.49159 z"

   inkscape:connector-curvature="0"
   transform="matrix(0.8,0,0,-0.8,0,792)" />
</a>
<a id="a-UP:115D"
xlink:href="{FILE}"
xlink:title="UP:115D
{PERCENT}%">
<path
id="UP:115D"
style="fill:{COLOR};fill-opacity:1;stroke:none"

   d="m 314.75946,529.10942 c 0.32799,18.973 -0.6558,38.48935 0.4916,57.12295 9.11694,0.926 18.85965,-1.04961 27.69299,0.721 -0.31086,4.08011 6.71077,4.04524 8.35706,1.67141 -0.0756,-1.75206 -3.96676,-2.62149 0,-2.32687 8.75271,2.70871 7.9153,-4.7371 7.43942,-11.04442 -0.32811,-15.47719 0.65596,-31.4979 -0.49159,-46.63566 -14.41803,0.33385 -29.41334,-0.65954 -43.48948,0.49159 z"

   inkscape:connector-curvature="0"
   transform="matrix(0.8,0,0,-0.8,0,792)" />
</a>
</g></svg> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T02:42:07.223

我认为你可以做类似这个简化示例的事情（假设你输入的字符串很难设置来测试）

*   转而`Global`为每个替换`False`使用一个`Regexp`（替代方法是使用`Global = True`但随后`Regexps`针对不同的第一次匹配运行各种）
*   使用`Do`循环测试是否有有效的`Regexp`剩余物
*   测试第一个`submatch`，然后使用`Select Case`运行不同的例程来替换`submatches $2-$4`（我存储在一个简单的数组中）

**代码**

```
Sub TestSub()
    Dim strIn As String
    Dim objRegex As Object
    Dim objRegMC As Object
    Dim objRegM As Object
    Dim vArray(1 To 3, 1 To 2)
    vArray(1, 1) = "No 1a"
    vArray(2, 1) = "No 2a"
    vArray(3, 1) = "No 3a"
    vArray(1, 2) = "number 1b"
    vArray(2, 2) = "number 2b"
    vArray(3, 2) = "number 3b"

    Set objRegex = CreateObject("vbscript.regexp")
    strIn = "a12stuff notme b34other missthis"
    With objRegex
        .Pattern = "([a-z]{1})(\d)(\d)([a-z]+)"
        .Global = False
        .IgnoreCase = True
        .MultiLine = False
        Do While .test(strIn)
            Set objRegMC = .Execute(strIn)
            For Each objRegM In objRegMC
                Select Case objRegM.submatches(0)
                Case "a"
                    strIn = .Replace(strIn, "$1" & vArray(1, 1) & vArray(2, 1) & vArray(3, 1))
                Case "b"
                    strIn = .Replace(strIn, "$1" & vArray(1, 2) & vArray(2, 2) & vArray(3, 2))
                End Select
            Next
        Loop
    End With
    MsgBox strIn
End Sub 
```

# javascript - Javascript - 出现加载 gif

> ID：14000062
> 
> 赞同：2
> 
> 时间：2012-12-22T04:29:15.287
> 
> 标签：javascript, html, image, loader

我有一个使用 javascript 函数加载随机图像的页面。

以下是在 head 标签中。

```
function pickimg(){ 
var imagenumber = 101 ;
var randomnumber = Math.random() ;
var rand1 = Math.round( (imagenumber-1) * randomnumber) + 1;
images = new Array
images[1] = "images/1.jpg"
images[2] = "images/2.gif"
images[3] = "images/3.jpg"
images[4] = "images/4.jpg"
images[5] = "images/5.gif"
images[6] = "images/6.jpg"
images[7] = "images/7.jpg"
images[8] = "images/8.jpg"
images[9] = "images/9.jpg"
var image = images[rand1]
document.randimg.src = image
}
</script> 
```

然后在体内：

```
<body onLoad="pickimg()">
<a href="" onClick="pickimg();return false;"><IMG SRC="images/ajax-loader.gif"     name="randimg" border=0></a> 
```

随机选择一张图片。当您单击图像时，会加载一个新图像，然后显示。这可能需要一两秒钟。我希望在用户单击后，在加载下一个图像时出现 ajax-loader。我对此很陌生，我尝试了各种各样的东西，但没有任何东西能给我我想要的结果。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T04:42:19.893

首先，请将该代码替换为以下代码（在结束脚本标记之前），以使其正确：

```
function pickimg(){ 
   var imagenumber = 101, ext,
        images = new Array(10), i=0,
        randomnumber = Math.random(),
        rand1 = 1 + Math.round((imagenumber-1) * randomnumber);
    while (++i<10) {
        ext = (i===2||i===5)? ".gif" : ".jpg";
        images[i] = "images/"+ i + ext;
    }
    document.randimg.src = images[rand1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:35:14.987

预加载加载图像。然后不是直接将源更改为新图像，而是将其更改为加载器，然后将其更改为新图像。这将导致加载器立即显示（因为它是预加载的），然后新图像将在它准备好时出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:08:23.967

尽管在您的示例代码中找不到 Ajax 加载程序，但答案如下：

```
getImage: function(fn){
                var url = "/apps/blah/imgpath/",
                    $imgContentContainer = $("myselector");
                $imgContentContainer.html(loadingImgTag);
                $.ajax({
                    async: false,
                    url: url + fn,
                    success: function(d){ $imgContentContainer.html(theAjaxLoadedImg); }
                });
            } 
```

# android - 具有动态列和行的网格视图，适合屏幕（不滚动）

> ID：14000063
> 
> 赞同：1
> 
> 时间：2012-12-22T04:29:44.670
> 
> 标签：android, gridview, scrollview

我在[这个](http://www.technotalkative.com/android-gridview-example/)例子的帮助下设计了一个gridview。

我能够毫无问题地显示网格视图，但问题是我必须在纵向和横向上工作，纵向它将是 3 行和 2 列，高度固定，没有任何滚动，在横向模式下它将是2 行 3 列没有任何滚动，这里的挑战是我的网格视图中目前有 6 个项目，假设明天如果我将其更改为 8 或 4 个项目，它应该可以在两个方向上都没有滚动，也应该适用于手机和平板电脑。

我尝试了很多搜索并得到了这个并尝试了它，它会给我设备的高度和宽度，我尝试减小`header(40dp)`值并`footer(40dp)`使用高度和宽度但不工作。

```
Display mDisplay= activity.getWindowManager().getDefaultDisplay();
int width= mDisplay.getWidth();
int Height= mDisplay.getHeight(); 
```

这是我的布局的样子：

```
header

gridview //items may change from 6 ,4,8 but it should fit to this area with scrolling

footer 
```

请帮助我很久以来就被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:10:45.517

亲爱的你知道动态应用高度和宽度然后应用**gridview运行时图像视图的高度和宽度。**

它的工作很重要，风景然后**交换宽度和高度。**

尝试这个。

**交换高度和宽度 **

```
WindowManager winManager = (WindowManager) myContext.getSystemService(Context.WINDOW_SERVICE);
        screenWidth = winManager.getDefaultDisplay().getWidth();
        screenHeight = winManager.getDefaultDisplay().getHeight();

int temp=screenWidth;
screenWidth=screenHeight;
screenHeight=temp; 
```

# objective-c - ARC + NSLocalizedString + NSMenuItem#title == 内存问题

> ID：14000070
> 
> 赞同：2
> 
> 时间：2012-12-22T04:31:14.137
> 
> 标签：objective-c, cocoa, memory-management, crash, automatic-ref-counting

我正在使用 ARC 和通用 Cocoa，但仍然遇到内存问题。使用`NSZombiesEnabled`，以下行指向崩溃：

```
[self.menu itemWithTag:MYMenuItemStatus].title = NSLocalizedString(@"DISCONNECTED", nil); 
```

出现错误：

```
*** -[CFString retain]: message sent to deallocated instance 
```

`self.menu`定义如下：

```
@property (nonatomic, strong) IBOutlet NSMenu *menu; 
```

`MYMenuItemStatus`定义如下：

```
typedef enum {
    MYMenuItemStatus = 0,
    // and so on...
} MYMenuItem; 
```

如果这有助于解释任何事情，则此代码在可访问`Reachability`性更改的回调中执行。不过，我很茫然。我错过了什么？

### 更新：

`self.menu`（及其项目）从一个 nib 文件初始化（菜单属性是一个插座）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:41:10.813

我可以向您保证，您显示的代码没有任何问题。

# c++ - 在重载决议方面，xvalue 和 prvalue 之间的行为差 异的一个具体、简洁的例子是什么？

> ID：14000076
> 
> 赞同：5
> 
> 时间：2012-12-22T04:31:56.980
> 
> 标签：c++, c++11

几个星期以来，我一直在仔细研究右值和右值引用。我越来越有信心，我对理解以下之间的区别有了一些清晰的认识：

*   *定义*变量或函数参数的类型（即`int x;`vs.`int && x = …;`
*   表达式的*表达式类别*，包括那些可能使用先前定义的参数的表达式（即，给定函数定义`A&& foo()`，并且给定一个仅由 组成的表达式`foo()`，*表达式类别*是“xvalue”）
*   当子表达式在包含表达式中使用时，子表达式求值结果的类型*（*`foo`即，给定相同的定义，在包含表达式中使用时子表达式的类型*是*`foo()`( `A`not `A&&`)）。

*我的问题是关于xvalue*表达式和*prvalue*表达式之间的区别（这两个表达式类别都是右值）。

鉴于：

```
class A
{};

A&& foo() {…}
A goo() {…}

void test(A&& a) {…}

int main()
{
    test(foo()); // test() called with xvalue expression
    test(goo()); // test() called with prvalue expression
} 
```

请注意，`test()`使用 xvalue 表达式和 prvalue 表达式成功调用了该函数。（如果我对此有误解，请纠正我。）

我的问题是：由于函数参数成功绑定到`A&& a`xvalues*和*prvalues *，* xvalues 和 prvalues 在重载决议方面的实际区别是什么？`test`

 **是否存在表达式的 xvalue/prvalue 特性导致不同的函数重载分辨率的场景示例？还是 xvalues 和 rvalues 之间的区别仅与语言的其他方面相关，与函数重载决议无关（例如，`decltype`（即，参见[什么是 decltype(0 + 0)?](https://stackoverflow.com/questions/5924870/what-is-decltype0-0) )）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:56:40.503

我不相信重载解决方案会有任何差异，不。

不过，还有很多其他原因可以阐明什么是 xvalues 和 prvalues 表达式。Xvalues是可修改的；prvalues不是。Xvalues 遵守禁止在对象生命周期之前或之后不当使用 glvalues 的规则；这绝不是prvalues的问题。**

# ruby - 如何将 sinatra 部署到 aws ec2 ubuntu 服务器？

> ID：14000079
> 
> 赞同：2
> 
> 时间：2012-12-22T04:33:17.963
> 
> 标签：ruby, apache, nginx, sinatra, web-deployment

我知道如何将 apache 或 nginx 安装到 aws 上的 ubuntu 服务器。我的经验通常是 php 应用程序，我在其中创建一个虚拟主机并将其指向我的应用程序 index.php 的路径

我假设由于 Sinatra 是基于机架的应用程序，因此我需要将虚拟主机指向应用程序中的 config.ru 文件。*那是对的吗？*

*但是，如果没有控制台*，我将如何保持应用程序持续运行？

有人可以解释一下如何在 apache 或 nginx 上设置 Sinatra 部署吗？我在网上找不到任何关于此的权威信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:22:29.313

Linode 库是这些类型事物的良好来源：[Sinatra 框架和 Debian 6 上的 nginx](http://library.linode.com/frameworks/sinatra/debian-6-squeeze)

该指南适用于 Debian，但您应该能够在 Ubuntu 上遵循相同的步骤。

# c++ - 异常：访问冲突

> ID：14000081
> 
> 赞同：4
> 
> 时间：2012-12-22T04:33:59.180
> 
> 标签：c++, visual-c++

下面的代码有什么问题以及如何修复它。

```
#include<iostream>
using namespace std;

template<typename Func1, typename Func2>
class guard{
public:
    guard(Func1 first, Func2 last) : last(last){
        first();
    }
    ~guard(){
        last();
    }
private:
    Func2& last;
};

template<typename Func1, typename Func2>
guard<Func1, Func2> make_guard(Func1 first, Func2 last){
    return guard<Func1, Func2>(first, last);
}

void first(){
    cout << "first" << endl;
}

void last(){
    cout << "last" << endl;
}

int main(){
    {
        first(); // ok
        last(); // ok
        auto g = make_guard(first, last);
        first(); //exception: Access violation
        last(); //exception: Access violation
    }
    first(); // ok
    last(); // ok
    cin.get();
} 
```

在变量过期`first()`之前`last()`不能调用该函数。`g`在 VC++ 2012 编译，在调试和发布模式下都遇到了同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T04:36:19.623

你`guard`保留一个*参考*，但它需要一个*值*。一旦 的构造函数结束，引用就变得无效，因为它引用构造函数采用的*参数*，而不是传递给 的参数。`guard``last``make_guard`

一旦你访问了一个无效的引用，你就有了*未定义的行为*，所有的赌注都被取消了。

# parallel-processing - 如何在 Go 中使用 fmt.Scanf

> ID：14000082
> 
> 赞同：5
> 
> 时间：2012-12-22T04:33:59.823
> 
> 标签：parallel-processing, go

在 go 的 for 循环中获取用户输入时，我似乎遇到了一个奇怪的问题。这是我的[代码](http://play.golang.org/p/r2ViReKCrl)

```
package main

import "fmt"

func main() {
    var num int
    for i := 0; i < 10; i++ {
        fmt.Printf("Debug: i : %d ", i)
        fmt.Scanf("%d", &num)
        fmt.Println(num)
    }
} 
```

当我运行此代码时会发生什么：

```
Debug: i : 0
Enter next number
1
1
Debug: i : 1
Enter next number
1
Debug: i : 2
Enter next number
2
2
Debug: i : 3
Enter next number
2
Debug: i : 4
Enter next number
3
3
Debug: i : 5
Enter next number
3
Debug: i : 6
Enter next number
4
4
Debug: i : 7
Enter next number
4
Debug: i : 8
Enter next number
5
5
Debug: i : 9
Enter next number
5 
```

我注意到循环的每次迭代都会发生两次，这可能是因为 Go 默认使用并行性并导致两个处理器在 for 循环中运行代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T07:35:44.390

您使用的是什么操作系统？视窗？

试试这个：

```
package main

import "fmt"

func main() {
    var num int
    for i := 0; i < 10; i++ {
        fmt.Printf("Debug: i : %d\n", i)
        fmt.Println("Enter next number")
        n, err := fmt.Scanf("%d\n", &num)
        if err != nil {
            fmt.Println(n, err)
        }
        fmt.Println(num)
    }
} 
```

输出：

```
Debug: i : 0
Enter next number
1
1
Debug: i : 1
Enter next number
2
2
Debug: i : 2
Enter next number
3
3
Debug: i : 3
Enter next number
4
4
Debug: i : 4
Enter next number
5
5
Debug: i : 5
Enter next number
6
6
Debug: i : 6
Enter next number
7
7
Debug: i : 7
Enter next number
8
8
Debug: i : 8
Enter next number
9
9
Debug: i : 9
Enter next number
10
10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T02:56:50.167

上面的答案是一个很好的建议。编码

```
 if err != nil {
        fmt.Println(n, err)
    } 
```

将输出此问题的原因。

```
 10 unexpected newline 
```

因此，我将代码更改为此，它可以工作。

```
package main

import "fmt"

func main() {
    var num int
    for i := 0; i < 10; i++ {
        fmt.Printf("Debug: i : %d ", i)
        fmt.Scanf("%d\n", &num) // add "\n"
        fmt.Println(num)
    }
} 
```

这是因为不同的行尾。windows 使用回车和换行（`\r\n`）作为行尾。Unix 使用换行符（`\n`）。

您可以使用[notepad2](http://www.flos-freeware.ch/notepad2.html)创建带`\r`换行符的文件 (a.txt)。并这样做：

```
 go run s.go < input.txt 
```

这将正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:46:59.137

只是要指出 fmt.Scanln(&num) 可能与 fmt.Scanf("%d\n",&num) 相同，因为 fmt.Scanln(&num) 也会检查“num”的类型。

换句话说，如果

```
var num float32

fmt.Scanln(&num) 
```

您可以从控制台输入浮点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-09T12:03:54.550

我有同样的问题，我解决了在 scanf 格式字符串中添加“\n”：fmt.Scanf("%d\n", &num)。

# list - 如果你知道索引，你如何找到一个位置的负索引？

> ID：14000083
> 
> 赞同：2
> 
> 时间：2012-12-22T04:34:14.467
> 
> 标签：list, python-2.7, indexing

我有一个可变长度的字符串，我知道索引位置是 25。由于它的长度是可变的（>= 25），我需要一种方法来定位同一位置的负索引，以便于数据操作。

你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:43:27.663

我不确定这是否是您所追求的，但是如果您有字符串的索引，则“负”索引只是字符串长度减去索引的负数：

```
In [1]: import string

In [2]: s = string.ascii_letters

In [3]: s
Out[3]: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'

In [4]: s[25]
Out[4]: 'z'

In [5]: -(len(s)-25)
Out[5]: -27

In [6]: s[-(len(s)-25)]
Out[6]: 'z' 
```

或使用评论中的示例：

```
In [7]: s = range(1, 7)

In [8]: s[4]
Out[8]: 5

In [9]: neg = -(len(s)-4) # Here you would replace 4 with your index

In [10]: s[neg]
Out[10]: 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:48:29.657

让我们使用具有以下值的“列表”：“1”、“2”、“3”、“4”、“5”、“6”

获取任何值的负索引的步骤：

第1步。获取值的“normal_index”。例如，值“4”的正常索引是 3。

第2步。获取“列表”的“计数”。在我们的示例中，“list_count”为 5。

第三步。获取请求值的负索引。负索引 = (normal_index - list_count) - 1。即 -3。

# sql-server-2005 - 更新触发语句

> ID：14000084
> 
> 赞同：-1
> 
> 时间：2012-12-22T04:34:17.250
> 
> 标签：sql-server-2005

如何在 self_id 列填充下一条记录时自动触发的触发器中使用以下查询？？？？

```
UPDATE  tree_str
SET     L1_Left = ml.self_id,
    L1_Centre = mc.self_id,
    L1_Right = mr.self_id
FROM    tree_str t LEFT JOIN
    member ml   ON  t.self_id = ml.parent_id
                AND ml.position = 'LEFT' LEFT JOIN
    member mc   ON  t.self_id = mc.parent_id
                AND mc.position = 'CENTER' LEFT JOIN
    member mr   ON  t.self_id = mr.parent_id
                AND mr.position = 'RIGHT' 
```

我使用下面的触发器，但它不工作.......

```
CREATE TRIGGER autoupdate ON [dbo].[tree_str]
FOR UPDATE
AS BEGIN

UPDATE  tree_str
SET     L1_Left = ml.self_id,
    L1_Centre = mc.self_id,
    L1_Right = mr.self_id
FROM    tree_str t LEFT JOIN
    member ml   ON  t.self_id = ml.parent_id
                AND ml.position = 'LEFT' LEFT JOIN
    member mc   ON  t.self_id = mc.parent_id
                AND mc.position = 'CENTER' LEFT JOIN
    member mr   ON  t.self_id = mr.parent_id
                AND mr.position = 'RIGHT'
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:22:55.073

请尝试以下触发器语法：

```
CREATE TRIGGER autoupdate ON dbo.tree_str
AFTER UPDATE
AS BEGIN
    UPDATE  tree_str
    SET L1_Left = ml.self_id, L1_Centre = mc.self_id,  L1_Right = mr.self_id
    FROM tree_str t LEFT JOIN
    member ml   ON  t.self_id = ml.parent_id AND ml.position = 'LEFT' 
    LEFT JOIN member mc   ON  t.self_id = mc.parent_id AND mc.position = 'CENTER' 
    LEFT JOIN member mr   ON  t.self_id = mr.parent_id
    AND mr.position = 'RIGHT'

END 
```

一个明显的变化是，'AFTER UPDATE' 而不是你的'FOR UPDATE'。

# node.js - Node.js - Expressjs 中间件扩展 res.render

> ID：14000086
> 
> 赞同：8
> 
> 时间：2012-12-22T04:35:07.313
> 
> 标签：node.js, express, middleware

我想知道是否有扩展 Express.js 的 res.render 函数的内置方法，因为我想将一组默认的“locals”传递给每个渲染的模板。目前，我编写了一个小型中间件，它使用 underscore.js 的扩展函数来合并默认的“本地”和特定于该模板的“本地”：

```
app.use(function(req, res, next){
    res.render2 = function (view, locals, fn) {
        res.render(view, _.extend(settings.template_defaults, locals), fn);
    };
    next();
}); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T07:19:39.310

[`app.locals`](http://expressjs.com/api.html#app.locals)可能是您正在寻找的：

```
app.locals(settings.template_defaults); 
```

与[`res.locals`](http://expressjs.com/api.html#res.locals)和一起[`res.render`](http://expressjs.com/api.html#res.render)，Express 已经能够为您合并值：

```
// locals for all views in the application
app.locals(settings.template_defaults);

// middleware for common locals with request-specific values
app.use(function (req, res, next) {
    res.locals({
        // e.g. session: req.session
    });
    next();
});

// and locals specific to the route
app.get('...', function (req, res) {
    res.render('...', {
        // ...
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T05:06:02.613

```
res.locals or app.locals is for this exact purpose. 
```

# android - 如何反转 SpannableString 中跨度的优先级

> ID：14000088
> 
> 赞同：4
> 
> 时间：2012-12-22T04:35:19.473
> 
> 标签：android, html

添加到 spannable 的 span 的优先级会影响它在 TextView 中的外观。当我们将两个嵌套的字符样式添加到如下所示的跨度时

```
SpannableStringBuilder sp = new SpannableStringBuilder();
String blue = "blue";
String red = "red";
sp.append(blue);
sp.append(red);
sp.append(blue);
sp.setSpan(new ForegroundColorSpan(Color.RED), blue, 2*blue, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);        
sp.setSpan(new ForegroundColorSpan(Color.BLUE), 0, sp.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
((TextView)findViewById(R.id.text_view)).setText(sp); 
```

添加字符样式的顺序对文本的外观很重要。Android 通过 Spanned.SPAN_PRIORITY 标志来处理跨度的优先级。但是当我们使用 Html.fromHtml() 时，优先级不在我们手中。那么我可以更改 Html.fromHtmel 输出的跨度优先级，还是可以从中创建新的跨度并制定新的跨度优先级；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:19:25.897

我为自己做了一些解决方法。它创建了新的 Spannable，其中跨度反转。

```
final Spannable revertSpans(Spanned stext) {
    Object[] spans = stext.getSpans(0, stext.length(), Object.class);
    Spannable ret = Spannable.Factory.getInstance().newSpannable(stext.toString());
    if (spans != null && spans.length > 0) {
        for(int i = spans.length - 1; i >= 0; --i) {
            ret.setSpan(spans[i], stext.getSpanStart(spans[i]), stext.getSpanEnd(spans[i]), stext.getSpanFlags(spans[i]));
        }
    }

    return ret;
} 
```

用法：

```
TextView tv = (TextView)finViewById(R.id.my_text_view);
Spanned stext = Html.fromHtml(text, null, myTagHandler);
Spannable sreverted = revertSpans(stext); 
tv.setText(sreverted); 
```

也许这很有用。

# video - Cuda 视频编码，从 unsigned char * cb 转换为 NALs 单元，通过网络发送

> ID：14000089
> 
> 赞同：2
> 
> 时间：2012-12-22T04:35:28.117
> 
> 标签：video, cuda, h.264, encode, nvidia

我一直在玩 5.0 SDK 中包含的 cudaencode 示例。它以 YUV（未压缩视频）文件作为输入，并写出原始 H.264 流（或者也可以是 VC1）。这项工作由作为编码器 API 一部分的“NVEncodeFrame”函数执行。该程序将 FILE 对象 (stdio.h) 作为输出到写入编码结果（压缩的 H.264 视频）的位置。现在我想将正在编码的视频流式传输到网络中。

我的具体问题是：

1.  有没有办法将 HandleReleaseBitStream(int nBytesInBuffer, unsigned char *cb,void *pUserData) 中的“unsigned char * cb”转换为 NAL 和 numberOfNals？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:56:18.427

使用[libh264bitstream](http://sourceforge.net/projects/h264bitstream/)的[find_nal_unit()](http://h264bitstream.sourceforge.net/doxygen/0.1.5/h264__stream_8c.html#a6)。在你的数据上重复调用这个，直到你找到所有的 nals。这确实假设/要求 nals 具有标准的 nal 前缀。此外，这不会在缓冲区中找到*最后一个*nal：您可以假设从找到的最后一个 nal 的末尾到缓冲区的末尾的所有内容都是一个 nal，或者，将下一个缓冲区附加到剩余数据并继续解析.

您也可以尝试使用 libavformat's ，当从原始 H.264 流（[示例代码](http://ffmpeg.org/doxygen/trunk/demuxing_8c_source.html)）读取时`av_read_frame()`，它应该返回 nals（as s ）。这可能要复杂得多。`AVPacket`

# c# - 从另一个表单访问控件值

> ID：14000090
> 
> 赞同：-5
> 
> 时间：2012-12-22T04:35:39.473
> 
> 标签：c#, forms, controls, label

我做了一个简单的tic,tac,toe游戏。我有两种形式，`Form1`和`frmStats`。在我的`frmStats`我有一个标签`lblDraw`。我想要它，所以当玩家打成平局时，标签会加一。如何从`Form1`的代码中访问它？

我的 Form1 代码：

```
if (winner != 0)
  this.Text = String.Format("Player {0} Wins!", winner);
else if (winner == 0 && turnCounter == 9)
  this.Text = "Draw!";
 //this is where i want/think the code should be to change the label
else
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:45:22.290

首先将标签设置`lblDraw`为

**`frmStats`形式上_**

```
 public string strNumber
 {
    get
    {
        return lblDraw.Text;
    }
    set
    {
        lblDraw.Text = value;
    }
 } 
```

* * *

**表格1**

```
 if (winner != 0)
        this.Text = String.Format("Player {0} Wins!", winner);
    else if (winner == 0 && turnCounter == 9)
    {
        this.Text = "Draw!";
        //this is where i want/think the code should be to change the label
        frmStats frm = new frmStats();
        string number = frm.strNumber;
        frm.strNumber = (Convert.ToInt32(number) + 1).ToString(); //incrementing by 1
    } 
```

或者简单地将 Label`lblDraw`修饰符设置为**public**，这是不推荐的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:59:33.207

虽然 Mr_Green 的回答有效，但我认为正确的方法是在打开 Form1 时将其作为变量传递给 frmStats：

```
frmStats newForm = new frmStats(this); 
```

在 Form1 中创建一个属性来访问数字：

```
 public int Num
    {
        get
        {
            return myNumber;
        }
    } 
```

然后在 frmStats 构造函数中，您可以访问父表单的公共属性：

```
 public frmStats(Form1 form)
    {
        InitializeComponent();

        lblDraw.Text = form.Num.ToString();
    } 
```

# android - 为 SGS3 上的 Android 活动禁用 NDEF 推送

> ID：14000091
> 
> 赞同：2
> 
> 时间：2012-12-22T04:35:42.250
> 
> 标签：android

我试图阻止某些活动触发默认的“*触摸到光束*”行为。

根据[javadocs](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setNdefPushMessageCallback%28android.nfc.NfcAdapter.CreateNdefMessageCallback,%20android.app.Activity,%20android.app.Activity...%29)，使用：

`nfcAdapter.setNdefPushMessageCallback(null, this);`

或者

`nfcAdapter.setNdefPushMessage(null, this);`

应完全禁用指定活动的 NDEF 推送，此外：

> 这也会禁用任何默认的 NDEF 消息，Android 操作系统本来会代表您为这些活动发送的。

这在我的 Nexus 7（运行 4.2.1）上**完美**运行，但在我的三星 Galaxy S3（运行 4.0.4）上表现不佳 - 我仍然收到提示“**触摸***光束*”。

我还尝试将以下内容添加到我的清单中，但没有成功：

`<meta-data android:name="android.nfc.disable_beam_default" android:value="true" />`

只是想知道是否有任何明显的我错过/做错了，或者是否有其他人遇到过类似的事情？

# opencv - OCR：小文本的分割

> ID：14000092
> 
> 赞同：7
> 
> 时间：2012-12-22T04:36:07.563
> 
> 标签：opencv, image-processing, language-agnostic, ocr, image-segmentation

## 问题

我一直在构建一个（*非常*）简单的 OCR 引擎。由于我试图对非常小的（像素大小）字符进行分类，因此在分割时遇到了一些困难。这是一个示例，经过尽力而为的图像范围阈值处理：

![63 上有问题的分割图像](../Images/9b278fb8cdc90cef7486d5b0226625b5.png)：

## 我试过的

错误**检测**：

*   段的大水平尺寸。它主要是有效的，但对于一些较大的字符会失败（误报）。
*   分类，低分拒绝。这似乎有点浪费。

纠错：**_**

*   垂直添加像素（垂直直方图），找到最小值。在许多样本中，它在错误的位置切割了许多片段。

## 我还没有尝试过的

*   尝试对所有可能的分割点（像素）进行分类。这将是非常浪费的，并且难以扩展 3 个合并字符段。
*   我一直在阅读将字符转换为数学曲线的[形态学方法](https://en.wikipedia.org/wiki/Mathematical_morphology)，但我真的不知道从哪里开始，或者是否值得努力

## 然后去哪儿？

我不知道。因此这个问题:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T11:29:23.383

向后靠，半闭上眼睛。

63:-)

现在，如果计算机这么容易就好了！

它非常接近双图案在硅掩模中的作用（或取消作用？）。

我建议进行过采样（将每个轴上的像素数加倍或四倍），过滤（可能是低通 - 或者可能是通带=线的空间频率的带通），重新阈值直到它们分开。昂贵，所以只适用于有问题的领域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:25:46.637

重新发明您的问题，因此您不需要细分。

真的，对于这个规模，我认为你最好投资于其他方法。例如，如果您对文本进行 OCR（是吗？），您可以使用行的信息（字符高度）。可用于小（但可读）字符的字体并不多。我的方法是一种算法，在扫描线中扫描线（从左到右，从上到下取像素）并尝试找到训练文本和扫描线之间的相关性（n，n-1...nx）

而且您可能还需要灰度级别的信息，因此最好不要对图像进行阈值处理。

# php - 致命错误：无法访问空属性 - 函数 connect()

> ID：14000097
> 
> 赞同：1
> 
> 时间：2012-12-22T04:36:59.077
> 
> 标签：php

当我使用此 PHP 编码时，我收到以下错误：

致命错误：无法访问第 29 行 /connection.php 中的空属性

```
class connectionClass
{

    var $host = '';
    var $user = '';
    var $password = '';
    var $db = '';
    var $con

    function __construct($flag)
    {
        if($flag == "local"):
            $this->host = "localhost";
            $this->user = "root";
        elseif($flag == "remote"):
            $this->host = "192.168.1.2";
            $this->user = "root";
        else:
            echo "Incorrect connection flag.";
        endif;

        $this->password = $password;
        $this->db = $db;
    }

    function connect()
    {
        $con = mysql_connect($this->host, $this->user, $this->password) or die(mysql_error());
        mysql_select_db($this->db, $con) or die(mysql_error());
    }

} 
```

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T04:40:44.440

类中的替代语法是什么？不好的做法——你不是在写模板。使用大括号。

您的问题很可能在这里：

```
 $this->password = $password;
 $this->db = $db; 
```

您将 $password 分配给您的类变量，但 $password 不是构造函数中的参数。所以你的 $this->password 是空的。$this->db 也有同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T04:49:22.443

问题出在您的“__construct”函数中。

查看第 23 行，'$this->db = $db;'。确保使用值定义局部变量 $db。

注意：变量“$password”（第 22 行）的定义也丢失了。确保你也用一个值来定义它。

# java - 最小化 setOnSeekBarChangeListener 样板

> ID：14000098
> 
> 赞同：1
> 
> 时间：2012-12-22T04:37:01.140
> 
> 标签：java, android, abstract, inner-classes

为了在每次我想要一个 SeekBar 和一个显示它的数值的相应 TextView 时编写更少的代码，我编写了以下抽象类：

```
abstract public class SeekBarWrapper {
SeekBar bar;
TextView valueText;
int value = 0;
int minValue;
int divisor;

public SeekBarWrapper(SeekBar sb, TextView tv, int value,  int minValue,
    int divisor){
    this.bar = sb;
    this.valueText = tv;
    this.value = value;
    this.minValue = minValue;
    this.divisor = divisor;
    setListener();
}

private void setListener(){
    bar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) { }
        @Override
        public void onStartTrackingTouch(SeekBar seekBar) { }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
            if(!fromUser) return;
            value = progress + minValue;
            valueText.setText(Integer.toString(value/divisor));
            sendValue();
        }
    });
}

abstract protected void sendValue();

public void updateValue(int newValue){
    if(newValue == value) return;
    value = newValue;
    valueText.setText(Integer.toString(value));
    bar.setProgress(value*divisor-minValue);
}

} 
```

对于每个具体的 SeekBar，我将编写一个嵌套类，例如：

```
class VolumeBarWrapper extends SeekBarWrapper{
    public VolumeBarWrapper(SeekBar s, TextView t, int v,  int min, int div){
        super(s, t, v, min, div);
    }
    public void sendValue(){
        someCallback.volume(this.value);
    }
} 
```

并像这样实例化：

```
VolumeBarWrapper volume;
    // later:
    volume = new VolumeBarWrapper((SeekBar) view.findViewById(R.id.volume_bar),
            (TextView) view.findViewById(R.id.volume_value), 300, 0, 70); 
```

它是功能性的，并且似乎是一种改进。我想知道的：

1.  有什么方法可以使它成为一个匿名内部类，或者另一种方法来进一步压缩每个实例的代码？而且不那么紧迫：
2.  我是不是在滥用“包装”标签，它在模式说话中没有一些特殊的含义吗？
3.  从 OOP 的角度来看，这种设计“糟糕”吗（我仍在努力在这方面自学）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:00:25.357

你总是可以*做得更好* `SeekBar`，并在任何地方使用它：

```
public class VersatileSeekBar extends SeekBar implements SeekBar.OnSeekBarChangeListener {
    private TextView mTextView;
    private ChangeHandler mChangeHandler;

    public void bindDisplayToChange(TextView textView,ChangeHandler handler) {
        mTextView = textView;
        mChangeHandler = handler;
    }

    public VersatileSeekBar(Context context) {
        super(context);
        init();
    }

    public VersatileSeekBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public VersatileSeekBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
        if(mChangeHandler != null && mTextView != null){
            mChangeHandler.onChange(i,mTextView);
        }
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
    }

    private void init(){
        this.setOnSeekBarChangeListener(this);
    }

    public static abstract class ChangeHandler{
        public abstract void onChange(int value,TextView textView);
    }
} 
```

调用代码：

```
myVersatileSeekBar.bindDisplayToChange(myTextView, new VersatileSeekBar.ChangeHandler() {
            @Override
            public void onChange(int value, TextView textView) {
                textView.setText("level :" + value * 100);
            }
        }); 
```

# android - 隐式意图和多个接收者？

> ID：14000101
> 
> 赞同：2
> 
> 时间：2012-12-22T04:38:15.163
> 
> 标签：android, android-intent

Android 文档告诉我们，一个隐式 Intent 可能会被多个组件接收（因为所有组件都已注册到特定的 Intent 过滤器），并且系统会弹出一个对话框询问使用哪个组件来处理该 Intent。

但是，我想知道这种弹出对话框的机制是否会询问哪个组件应该处理意图，被覆盖，st 2（或更多）组件是否有机会处理意图？在我看来，一个典型的例子是“Cyber​​ Nanny”类型的应用程序，它获取 ACTION_VIEW 类型的意图，检查 URI 是否说“儿童安全”，然后允许它调用浏览器。同样，用于拨打/接听来自/向特定方的电话——如在黑名单或白名单中。如果用户看到对话框，那么他们可能会绕过系统，这是我不想要的。如果使用 Intents 周围的某些机制无法达到效果，是否有替代方法？

**编辑：** *发布我的问题后，我在[这里找到了一个相关的问题](https://stackoverflow.com/questions/11376561/multiple-intent-receivers)，但它并不完全相同，因为就我而言，我正在寻找避免该弹出对话框的方法。希望有一种方法，不需要生根设备。*

# objective-c - 合并音频和视频

> ID：14000103
> 
> 赞同：2
> 
> 时间：2012-12-22T04:39:00.470
> 
> 标签：objective-c, ios5, ios4, avfoundation

我有一个应用程序，我需要在其中将音频文件合并到视频文件中。

有时我的音频文件大于视频文件的持续时间。我使用了 AVFoundation 的 MixComposition，两者都被合并了。但问题是，如果视频文件的持续时间较短，那么当视频完成时，声音仍然会继续播放并完成其全部持续时间。应该是，如果视频完成，音频必须停止。

任何人都可以为我提供任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:27:24.247

使用以下代码停止您的音频，它还会在最后五秒钟内创建淡入淡出的音频

```
- (void)getFadeAudioFile {

    if (![appDelegate.musicFilePath isEqualToString:@"Not set"]) {
        NSURL *url = [[[NSURL alloc]initWithString:appDelegate.musicFilePath]autorelease];

        AVURLAsset* audioAsset = [[[AVURLAsset alloc]initWithURL:url options:nil]autorelease];

        NSString *filePath = [self applicationDocumentsDirectory];
        NSString *outputFilePath = nil;
        outputFilePath = [filePath stringByAppendingPathComponent:@"/mySong.m4a"];
        NSURL    *outputFileUrl = [[[NSURL alloc]initFileURLWithPath:outputFilePath]autorelease];

        NSError *theError = nil;

        if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath])
            [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:&theError];

        [self exportAsset:audioAsset toFilePath:outputFileUrl];

    }
}

- (BOOL)exportAsset:(AVAsset *)avAsset toFilePath:(NSURL *)filePath {

    // get the first audio track
    NSArray *tracks = [avAsset tracksWithMediaType:AVMediaTypeAudio];
    if ([tracks count] == 0) return NO;

    AVAssetTrack *track = [tracks objectAtIndex:0];

    // create the export session
    // no need to retain here since the session will be retained by the
    // completion handler since it is referenced there

    AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:avAsset presetName:AVAssetExportPresetAppleM4A];
    if (nil == exportSession) return NO;

    NSLog(@"arrOfImagesForVideo.coun:%d",arrImageDataDict.count);

    int imgCount = arrImageDataDict.count+1;
    int delay = appDelegate.delaySecond;

    int duration = imgCount*delay;

    CMTime stopTime = CMTimeMake(duration, 1);

    // create trim time range - 20 seconds starting from 30 seconds into the asset
   // NSInteger totalTime = CMTimeGetSeconds(avAsset.duration);

    CMTime startTime = CMTimeMake(0, 1);
    //CMTime stopTime = CMTimeMake(totalTime, 1);//0,30
    CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);

    // create fade in time range - 10 seconds starting at the beginning of trimmed asset
    NSInteger fadeTime = duration-5;

    NSLog(@"fade time:%d",fadeTime);
    NSLog(@"fade duration:%d",duration);

    CMTime startFadeInTime = CMTimeMake(fadeTime, 1);
    CMTime endFadeInTime = CMTimeMake(duration, 1);
    CMTimeRange fadeInTimeRange = CMTimeRangeFromTimeToTime(startFadeInTime, endFadeInTime);

    // setup audio mix
    AVMutableAudioMix *exportAudioMix = [AVMutableAudioMix audioMix];
    AVMutableAudioMixInputParameters *exportAudioMixInputParameters = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:track];

    [exportAudioMixInputParameters setVolumeRampFromStartVolume:1.0 toEndVolume:0.0 timeRange:fadeInTimeRange]; 
    exportAudioMix.inputParameters = [NSArray arrayWithObject:exportAudioMixInputParameters];   

    // configure export session  output with all our parameters
    exportSession.outputURL = filePath; // output path
    exportSession.outputFileType = AVFileTypeAppleM4A;          // output file type
    exportSession.timeRange = exportTimeRange;                  // trim time range
    exportSession.audioMix = exportAudioMix;                    // fade in audio mix

    [exportSession exportAsynchronouslyWithCompletionHandler:
            ^(void ) {
                //[self saveVideoToAlbum:outputFilePath];
            }
            ];

    return YES;
} 
```

它将保存在您的文件路径文档目录中并像使用它一样使用它

```
NSString *filePath = [self applicationDocumentsDirectory];
NSString *outputFilePath1 = [filePath tringByAppendingPathComponent:@"/mySong.m4a"];

NSURL *audio_inputFileUrl = [[NSURL alloc]initFileURLWithPath:outputFilePath1];
int imgCount = imageArray.count;
int delay = appDelegate.delaySecond;

NSLog(@"audio merged");
int duration = imgCount*delay;

CMTime seekingCM = CMTimeMake(duration, 1);

AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, seekingCM);
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition MutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];
//[audioAsset autorelease];
newAudioTrack = [audioAsset tracksWithMediaType:AVMediaTypeAudio][0]; 
```

# php - 为什么 PHP 似乎错误地评估了这种情况？

> ID：14000105
> 
> 赞同：2
> 
> 时间：2012-12-22T04:39:57.953
> 
> 标签：php, floating-point, comparison

我在 PHP 中有以下代码，我试图通过将变量类型转换为整数来克服所述问题，并通过在比较之前将所有值乘以 100 来避免浮点错误，以便删除 2 个小数位。

但是，以下代码仍将表达式计算为 true，并将文本着色为红色而不是绿色，但是当我回显 $eq_left 和 $eq_right 的两个值时，它们是相同的，没有小数点。

这是代码：

```
$eq_left    = (int) ($eq_bal_CurrentAssets*100) + ($eq_bal_NonCurrentAssets*100) ;
$eq_right   = (int) ($eq_bal_Liabilities*100) + ($eq_bal_Taxation*100) + ($eq_bal_Equity*100) ;

if ($eq_left !== $eq_right) {
    $color = 'red';
    $diff   = abs($eq_left - $eq_right);
} else {
    $color = 'green';
}

echo "<div style=\"color: $color; font-weight:bold;\">\n";
echo "  " . number_format(($eq_left/100),2,".",",") . " = " . number_format(($eq_right/100),2,".",",") . "<br />\n";
if ($diff) {
    echo "      Difference = " . number_format(($diff/100),2,".",",") . "\n";
}
echo "</div>\n";
echo $eq_left . " | " . $eq_right 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:28:16.153

如果您想要精确的小数表示，我同意反对浮点的建议。

原因是许多小数只能用浮点数或双精度数来近似。它们基于二进制而不是十进制分数。一般而言，当且仅当 b 的所有素因数也是 b 的素因数时，在 a 和 b 中没有公因数的有理数 a/b 可以精确地用基数 r 表示。例如，十进制的 1/5 是 0.2，但 1/3 是 0.333333333... 在二进制系统中，1/5 与十进制的 1/3 会导致相同的问题。

在您的代码中，我建议在乘以 100 后四舍五入到零小数位。 (int) 强制转换为零，这不是您需要的。如果输入甚至略小于正整数 n，则强制转换的结果为 n-1。一轮的结果是n。

无法精确表示的小数部分的浮点表示可能比原始小数部分略低或略高。如果您从例如 0.29 开始，将其转换为最接近的 IEEE 754 64 位浮点数，然后乘以 100，您实际上将得到相当于 28.999999999999996447286321199499070644378662109375 的浮点数

将其转换为 int 并四舍五入得到 28，而不是 29。将其四舍五入到最接近的 int 将得到 29。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:06:17.407

**永远不要使用浮点数来赚钱。** 始终将货币值存储为整数美分。您将 5.40 美元存储为 540，并在您想要显示时除以 100。浮点数不能准确地表示您认为的小数。

这里有一些页面讨论了为什么作为货币浮动是一个糟糕的主意：

*   [为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)
*   [在mysql中存储金额](https://stackoverflow.com/questions/2251290/storing-money-amounts-in-mysql)
*   [如果在浮动中处理钱很糟糕，那么为什么 money_format() 会这样做呢？](https://stackoverflow.com/questions/4662138/if-dealing-with-money-in-a-float-is-bad-then-why-does-money-format-do-it)

您遇到的问题是小数的浮点表示固有的。可靠地绕过它们的唯一方法是使用整数。

# java - 有没有办法使用 Java 中的接口绑定泛型类型？

> ID：14000106
> 
> 赞同：2
> 
> 时间：2012-12-22T04:40:00.447
> 
> 标签：java, generics, bounded-wildcard

我正在尝试创建一个通用列表，该列表使用类型的`.compareTo()`方法对输入的项目进行排序。但是，我在第一行就遇到了问题。由于类型必须是 which `implements Comparable<T>`，有什么方法可以强制执行吗？我想语法：

```
public class GenList<T implements Comparable<T>>{
//Class body.
} 
```

不会工作。有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:44:28.587

我知道这有点违反直觉，但为此你写`extends`而不是`implements`：

```
public class GenList<T extends Comparable<T>>{
//Class body.
} 
```

（请注意，我也将 更改`?`为`T`，我认为这就是您的意思。引用可以具有 type `GenList<?>`，或 type`GenList<? extends Comparable<String>>`或诸如此类的东西，但是将类本身声明为采用通配符参数是没有意义的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:44:48.337

你的意思是喜欢

```
public class GenList<T extends Comparable<T>>{
//Class body.
} 
```

# javascript - 如何传递 PHP GET URL 变量以使用 Javascript 打开一个窗口？

> ID：14000107
> 
> 赞同：6
> 
> 时间：2012-12-22T04:40:04.583
> 
> 标签：javascript, php, dom-events, javascript-framework

我想从指向 Javascript 的链接中传递一个 PHP get 变量，这样我就可以打开一个新的较小窗口，其中包含传递给 URL 的值中的适当内容。我在下面尝试这样做，但我不能...我真的很感谢你的帮助。下面的代码生成图像超链接，每个超链接都有来自数据库的 id，所以当点击图像时，应该打开一个新窗口，但应该将 ID 传递给 javascript window.open 方法......我试着这样做用AJAX根据get变量加载内容但我做不到！

```
<?php
require('../database/connect.php');
database_connect();
$query = "select * from Entertainers";
$result = $connection->query($query);
$row_count =$result->num_rows;

for($i = 1; $i <= $row_count; $i++)
  {
   $row = $result->fetch_assoc();

?>
<?php  echo "<a href='' onclick='window.open(profile.php?id=".$row['ID'].")'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:20:00.220

不要忘记在 Javascript`open`函数中引用 url。另外，您是否考虑[`printf()`](http://php.net/manual/en/function.printf.php)过用于输出？

```
$link =
'<a href="" onclick="window.open(\'profile.php?id=%d\')">'
. '<img src="../%s" width="100" height="100" /></a>' . PHP_EOL;

for($i = 1; $i <= $row_count; $i++) {
    $row = $result->fetch_assoc();
    printf($link,$row['ID'],$row['Picture']);
} 
```

`%d`表示一个小数，并`%s`表示上述字符串中的一个字符串（因此是`$link`）。**另一个提示：**如果您没有特别的理由使用 for 循环，则使用 while 循环可以使您的代码更简洁、更短。

```
while ($row = $result->fetch_assoc()) {
    printf($link,$row['ID'],$row['Picture']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:20:05.213

当您的脚本在页面上呈现 HTML 时，`URL`参数 to*不会*呈现`window.open`为.*`string`*

 *您的代码当前在页面上呈现的内容：

```
<a href='' onclick='window.open(profile.php?id={some_id})'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; } ?> 
```

在客户端解析URL`profile.php?id={some_id}`时，它*不是字符串。*

试试这个：

```
<?php  echo "<a href='' onclick=\"window.open('profile.php?id=" . $row['ID'] . "');\"><img src ='../".$row['Picture']."' width='100' height='100' /> </a>"; ?> 
```*

# bash - 使用 bash 和终端的 curl 上传命令

> ID：14000111
> 
> 赞同：-4
> 
> 时间：2012-12-22T04:40:48.777
> 
> 标签：bash, curl, dropbox, dropbox-api

当我使用 bash 将文件上传到保管箱时，它工作正常，但是当我手动使用命令行时它不起作用。

我想这可能是网址中的 & .. 我不确定..

巴什代码：

```
CURL_BIN="/usr/bin/curl"
#Note: This option explicitly allows curl to perform "insecure" SSL connections and transfers.
#CURL_ACCEPT_CERTIFICATES="-k"
CURL_PARAMETERS="--progress-bar"
APPKEY="zrwv8z3bycfk3m8"
OAUTH_ACCESS_TOKEN="aaaaaaaa"
APPSECRET="aaaaaaaaaa"
OAUTH_ACCESS_TOKEN_SECRET="aaaaaaaaa"
ACCESS_LEVEL="dropbox"
API_UPLOAD_URL="https://api-content.dropbox.com/1/files_put"
RESPONSE_FILE="temp2.txt"
FILE_SRC="temp.txt"

$CURL_BIN $CURL_ACCEPT_CERTIFICATES $CURL_PARAMETERS -v -i -o "$RESPONSE_FILE" --upload-file "$FILE_SRC" "$API_UPLOAD_URL/$ACCESS_LEVEL/$FILE_DST?oauth_consumer_key=$APPKEY&oauth_token=$OAUTH_ACCESS_TOKEN&oauth_signature_method=PLAINTEXT&oauth_signature=$APPSECRET%26$OAUTH_ACCESS_TOKEN_SECRET" 
```

手动代码：

```
curl --insecure --progress-bar -v -i -o temp2.txt --upload-file temp.txt https://api-content.dropbox.com/1/files_put/dropbox/attachments/temp.txt?oauth_consumer_key=aaaaaaaaaa&oauth_token=aaaaaaaaa&oauth_signature_method=PLAINTEXT&oauth_signature=aaaaaaaaa%26aaaaaaaaaa 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:54:56.890

```
curl --insecure --progress-bar -v -i -o temp2.txt --upload-file temp.txt "https://api-content.dropbox.com/1/files_put/dropbox/attachments/temp.txt?oauth_consumer_key=aaaaaaaaaa&oauth_token=aaaaaaaaa&oauth_signature_method=PLAINTEXT&oauth_signature=aaaaaaaaa%26aaaaaaaaaa" 
```

The solution is to add in the inverted commas "

# c# - 在多用户环境中使用静态属性在两个表单之间进行通信

> ID：14000121
> 
> 赞同：1
> 
> 时间：2012-12-22T04:43:14.527
> 
> 标签：c#, winforms, properties, static

我正在使用一个 int`static property`将 ID 值从我的 SearchForm 发送到 MainForm。

```
static int _SrchRslt;
public static int SrchRslt
{
    get { return _SrchRslt; }
    set { _SrchRslt = value; }
} 
```

我从另一个表单（搜索表单）发送这个属性的值：

```
Mainform.SrchRslt = Convert.ToInt32(dgvSearch.SelectedRows[0].Cells[0].Value);
this.Close(); 
```

有了这个，我可以在 MainForm 中使用我的 srchRslt 值搜索所有详细信息。此过程在单用户界面中运行良好。

但是在多用户环境中，如果两个用户同时尝试搜索，这个静态属性值就会出现问题，因为同一个值会流向两个人。我希望你能理解我的问题。

您对在两种形式之间进行搜索有什么其他建议吗？

# mysql - 在 mysql 上指定用户名将我登录为 ''

> ID：14000124
> 
> 赞同：2
> 
> 时间：2012-12-22T04:43:40.253
> 
> 标签：mysql, privileges

我创建了用户 'wordpress' 并通过 phpMyAdmin 在 mysql 上授予权限。但是，当我以用户 wordpress 在命令行登录时，我似乎无法访问我应该能够访问的内容。看一看：

```
>mysql -u wordpress
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.5.27 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SHOW GRANTS;
+--------------------------------------+
| Grants for @localhost                |
+--------------------------------------+
| GRANT USAGE ON *.* TO ''@'localhost' |
+--------------------------------------+
1 row in set (0.00 sec) 
```

这不应该显示`Grants for wordpress@localhost`吗？

此外，我授予*了所有*（危险的，我知道，但我在进行健全性测试）在 datbase sitedb 上的 wordpress 特权。当我尝试使用 sitedb 时，我得到以下信息（这个，在同一个会话中）：

```
mysql> USE sitedb;
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'sitedb' 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T04:51:19.370

创建 mysql 用户时似乎出现了一些错误，我建议您从终端创建用户并授予权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:57:32.983

来自[MySQL](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html)文档：

> USAGE 特权说明符代表“无特权”。</p>

您的用户似乎没有正确的权限。您确定您为正确的数据库授予了正确用户的所有权限吗？尝试仅将所有权限专门授予 sitedb 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:19:45.247

我想到了...

我以 root 身份登录并检查了 root 的权限以及它与 wordpress 的不同之处：

```
mysql> SHOW GRANTS;
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
| GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION        |
+---------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR wordpress;
+-----------------------------------------------------------------------------+
| Grants for wordpress@%                                                      |
+-----------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'wordpress'@'%' WITH GRANT OPTION            |
| GRANT ALL PRIVILEGES ON `skytreader`.* TO 'wordpress'@'%' WITH GRANT OPTION |
+-----------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

就目前而言，我能收集到的唯一区别是主机。我回到 phpMyAdmin 更改用户 wordpress 的主机并将其指定为“localhost”。瞧，

```
>mysql -u wordpress
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 42
Server version: 5.5.27 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SHOW GRANTS;
+-------------------------------------------------------------------------------------+
| Grants for wordpress@localhost                                                      |
+-------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'wordpress'@'localhost' WITH GRANT OPTION            |
| GRANT ALL PRIVILEGES ON `skytreader`.* TO 'wordpress'@'localhost' WITH GRANT OPTION |
+-------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> USE sitedb;
Database changed 
```

现在我想知道为什么会这样？'wordpress'@'%' 不应该代表通配符主机（因此它应该包括 localhost）吗？我猜这是某种安全功能...

# jquery - jQueryUI datepicker：具有本地化功能的月/年菜单

> ID：14000128
> 
> 赞同：0
> 
> 时间：2012-12-22T04:44:20.473
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我想做一个**jQuery UI datepicker小部件，它具有**[datepicker: jQuery UI](http://jqueryui.com/datepicker/#dropdown-month-year)所见的月/年菜单，但它也需要本地化，如[datepicker jQuery UI:localization](http://jqueryui.com/datepicker/#localization)所见。

我不确定两者是否可以一起完成。我无法让它工作。如果我添加本地化代码，我确实会看到正确本地化的日历，但我会丢失月/年菜单。

有关 i18n 的工作示例，请参阅[JsFiddle](http://jsfiddle.net/charliegriefer/5LXey/)。如果您注释掉 i18n 行：

```
$( "#dob" ).datepicker( $.datepicker.regional[ "ar" ] ); 
```

...然后您会看到月/年菜单正常工作。

有谁知道让这两者在一个小部件中一起工作的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:50:07.137

首先要了解的是，第一次调用该`datepicker`函数时，传递给它的任何内容都将用于初始化小部件。之后，每个额外的调用`datepicker`都将用于调用方法或设置选项。

在你的 jsfiddle 中，尝试：

```
$( document ).ready( function() {
    $( "#dob" ).datepicker({
        changeMonth: true,
        changeYear: true
    }).datepicker("option", $.datepicker.regional[ "ar" ]);
});​ 
```

通过这种方式，我们使用 和 的选项初始化日期选择`changeMonth`器`changeYear`。在我们的下一次通话中，我们可以更新一个选项，使其成为区域性的。

# google-app-engine - Objectify 不同步存储，即使现在

> ID：14000130
> 
> 赞同：4
> 
> 时间：2012-12-22T04:44:36.107
> 
> 标签：google-app-engine, persistence, google-cloud-datastore, objectify

我的 servlet 应该执行以下操作：当用户在某个场所注册时，我检查他当前是否在某个地方注册（即使它是同一个场所）如果是，请取消注册并再次注册他。

我有以下代码，为了显示我的问题，我对其进行了简化：

```
 Date tempDate = new Date();

    Visit v = ofy().load().type(Visit.class)
            .filter(Visit.USER_ID, 5L)
            .filter(Visit.EXIT_DATE, null).first().get();

    if(v != null)
        exitVenue(5L, 7L, tempDate);

    Visit visit = new Visit(5L, 7L, tempDate);      
    ofy().save().entity(visit).now();

    Date tempDate2 = new Date();

    Visit v2 = ofy().load().type(Visit.class)
            .filter(Visit.USER_ID, 5L)
            .filter(Visit.EXIT_DATE, null).first().get();

    if(v2 != null)
        exitVenue(5L, 7L, tempDate2);

    Visit visit2 = new Visit(5L, 7L, tempDate2);        
    ofy().save().entity(visit2).now();
}

public void exitVenue(Long userID, Long venueID, Date exitDate) {

    Visit visit = ofy().load().type(Visit.class)
            .filter(Visit.USER_ID, userID)
            .filter(Visit.VENUE_ID, venueID)
            .filter(Visit.EXIT_DATE, null).first().get();

    if(visit == null){
        log.info("ERROR : User " + userID + " exited venue " + venueID + ", but Visit was not found");
        return;
    }
    visit.setExitDate(exitDate);

    ofy().save().entity(visit).now();
} 
```

问题是，当我第二次执行所有这些操作时，它并不总是发现数据存储区中已经有访问（每隔一次测试，左右）。而且我很困惑'now（）'是否应该立即存储它然后才能继续运行？

非常感谢你的帮助，丹

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T13:32:40.163

发生这种情况是因为 GAE 数据存储[最终是一致](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)的：当您创建/更新实体时，该方法会立即返回，但[索引仍在异步构建中](https://developers.google.com/appengine/articles/life_of_write)。由于查询依赖于索引，因此您不会立即看到更改。

此外，这与 objectify 无关 - 这是底层数据存储的属性。同步写入（`.now()`）等待*提交阶段*完成，而异步甚至在此之前立即返回。

# python - 使用网络摄像头检测 OpenCV 中的形状、颜色和方向

> ID：14000131
> 
> 赞同：-5
> 
> 时间：2012-12-22T04:44:36.853
> 
> 标签：python, opencv, colors, orientation, shape

我想使用 OpenCV 检测 3 种基本形状（箭头、十字、T 形）并对其进行分类。

箭头必须按颜色和方向（左向/右向）分类。只需检测十字架即可。我发现[这个 Python 示例](https://stackoverflow.com/questions/11424002/how-to-detect-simple-geometric-shapes-using-opencv)几乎是我需要的。我只需要为其添加颜色和方向检测。

一个简单的 if/else if 结构对我来说是最容易实现的，因为车载计算机将使用虚拟串行端口与驱动控制器通信。这样，我可以根据检测到的形状向驱动控制器发送简单的命令。

我将使用网络摄像头作为图像源，所以如果你能在正确的方向上推动使用它，那将有很大帮助。

感谢所有帮助。我想为具有图像处理功能的自主机器人执行此操作。我是 OpenCV 的新手，所以请帮帮我。欢迎使用 Python 和 C++ 示例，但 Python 更适合，因为我的板载计算机将运行 Linux。C++ 示例也很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:02:22.487

您的问题需要一个*非常*广泛的答案，但这里概述了一种可能的方法：

*   如果形状可以移动，则需要对其进行检测。如果你有一个静态的单色背景，这很容易通过[thresholding](https://en.wikipedia.org/wiki/Thresholding_%28image_processing%29)完成。[这是一个关于它的 OpenCV 教程](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html)。
*   接下来，您需要对形状进行[分类。](https://en.wikipedia.org/wiki/Classification_in_machine_learning)最简单的分类器之一是[K-NN](https://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)。[这是一个教程](http://www.aishack.in/2010/10/k-nearest-neighbors-in-opencv/)
*   最后，您需要对分类输出做出反应。由于您使用的是机器人，如果您不知道如何与它交互，最好单独提出一个问题。

# ruby-on-rails-3 - Rails 使用来自同一控制器的基本视图模拟嵌套资源

> ID：14000134
> 
> 赞同：0
> 
> 时间：2012-12-22T04:44:51.440
> 
> 标签：ruby-on-rails-3

如果在views/abouts/中，我有“index.html.haml”和“history.html.haml”。
如何访问 abouts#history 这是一个基本的 html 页面。

**从日志中我得到这个错误，我猜它正在处理它作为一个节目，我该怎么办？：**

```
 Processing by AboutsController#show as HTML
  Parameters: {"id"=>"history"}
  About Load (0.3ms)  SELECT `abouts`.* FROM `abouts` WHERE (`abouts`.`id` = 0) LIMIT 1

  ActiveRecord::RecordNotFound (Couldn't find About with ID=history): 
```

**路线.rb**

```
scope() do
  resources :abouts, :path => 'about-us' do
    match 'about-us/history' => "about-us#history"
  end
end 
```

**abouts_controller.rb**

```
def history
  respond_to do |format|
    format.html

  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:18:21.987

几个问题。首先，您应该匹配`'history'`而不是匹配`'about-us/history'`（路由是嵌套的，因此`'about-us/'`会自动包含该部分）。其次，您需要使用选项指定路由应该匹配集合，而不是集合的成员`:on => :collection`。最后，您应该将匹配路由到`'abouts#history'`而不是路由（因为无论您在路由时使用什么路径字符串，`'about-us#history'`都会命名控制器）。`abouts`

所以试试这个：

```
resources :abouts, :path => 'about-us' do
  match 'history' => "abouts#history", :on => :collection
end 
```

另请注意，`match`它将匹配*所有*HTTP 请求：`POST`以及`GET`. 我建议使用`get`而不是`match`, 将 HTTP 请求类型缩小为仅`GET`请求：

```
resources :abouts, :path => 'about-us' do
  get 'history' => "abouts#history", :on => :collection
end 
```

希望有帮助。

# java - 在 Spring 中使用注解时出错

> ID：14000138
> 
> 赞同：0
> 
> 时间：2012-12-22T04:45:59.697
> 
> 标签：java, spring, annotations

我是高级 java 和学习 Spring 框架的新手。我找到了一个教程

[http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html](http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html)

在下面的代码中

```
package contoller;

import java.net.BindException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.portlet.ModelAndView;
import org.springframework.web.servlet.mvc.SimpleFormController;
import service.HelloService;
/**
*
* @author Manish
*/
public class HelloController extends SimpleFormController {

public HelloController() {
setCommandClass(Name.class);
setCommandName("name");
setSuccessView("helloView");
setFormView("nameView");
}
 private HelloService helloService;
 public void setHelloService(HelloService helloService) {
 this.helloService = helloService;
  }

@Override          // Error Method does not override or implment a method of supertype
protected ModelAndView onSubmit(
        HttpServletRequest request,
        HttpServletResponse response,
        Object command,
        BindException errors) throws Exception {

    Name name = (Name) command;
    ModelAndView mv = new ModelAndView(getSuccessView());
    mv.addObject("helloMessage", helloService.sayHello(name.getValue()));
    return mv;
  } 
```

我该如何解决这个问题？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:55:07.027

> 错误：方法没有覆盖或实现超类型的方法

这与 Spring 无关。它说在你的`SimpleFormController`课堂上没有方法`onSubmit`。

将此方法添加到您的`SimpleFormController`类中，问题就解决了。

# java - 如何在android蓝牙通信中写一个字符？

> ID：14000140
> 
> 赞同：1
> 
> 时间：2012-12-22T04:46:28.797
> 
> 标签：java, android, bluetooth

我正在编写一个 android 程序，我需要将一个字符发送到另一个蓝牙设备。我写了这段程序，但是当你发送字符时，我不知道我使用的是什么功能。节目中，当事人疑点质疑。

* * *

```
package com.example.bl;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.*;
import android.view.*;
import android.app.*;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Handler;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;
import java.io.*;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button bot1 = (Button) findViewById(R.id.bt1);
        bot1.setOnClickListener(new View.OnClickListener(){
            public void onClick(View arg0) {

                BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
                if (mBluetoothAdapter == null) {
                    // Device does not support Bluetooth
                }   

                int REQUEST_ENABLE_BT = 1;

                if (!mBluetoothAdapter.isEnabled()) {
                    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                    startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                }

            //  ??????
            //  ??????
            //  ??????
            //  ??????  

                AlertDialog.Builder dialogo = new
                        AlertDialog.Builder(MainActivity.this);
                        dialogo.setTitle("Aviso");
                        dialogo.setMessage("Foi!");
                        dialogo.setNeutralButton("OK", null);
                        dialogo.show();
                        }
                        });             
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:00:55.190

首先参考这个页面蓝牙，来自[android docs](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

用于`android.bluetooth.BluetoothSocket`建立连接

要创建用于连接到已知设备的 BluetoothSocket，请使用`BluetoothDevice.createRfcommSocketToServiceRecord().` Then 调用`connect()`尝试连接到远程设备。此调用将阻塞，直到建立连接或连接失败。

# networking - 局域网唤醒配置

> ID：14000142
> 
> 赞同：1
> 
> 时间：2012-12-22T04:48:09.013
> 
> 标签：networking, wake-on-lan

我正在尝试将我的笔记本电脑配置为能够通过 Magic Packets 在 LAN 上唤醒。我有一个魔术包嗅探器，它会在收到魔术包时提醒我（在目标机器上运行）。问题是当我尝试使用外部 IP 地址而不是内部地址时。我已将端口 9 转发到我的内部 ip（10.0.0.x，注意：x 仅为一位数）。如果我使用内部 IP 地址，它会告诉我收到了一个魔术包。如果我尝试使用外部 IP 地址并从目标机器（发送给它自己）发送它会收到魔术包。如果我通过不同的机器或网站发送它，它就不起作用。我通过以太网电缆（CAT 5）连接。我的 BIOS 中的“Wake on LAN”设置也设置为“ENABLED”。另外，我的计算机设置为“允许此设备唤醒计算机”。

PS 上一个问题的解决方法是在 Windows 中启动 Simple TCP/IP Service。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:33:24.277

要在 Internet 上使用 LAN 唤醒（=> WAN 唤醒），您必须执行以下操作之一：

1.  编辑路由器的 ARP 表，以便它可以使用其 MAC 地址将魔术包转发到目标计算机
2.  端口转发到 LAN 广播地址，因此目标计算机将始终接收发送到您的路由器的任何魔术数据包，直到它被插入路由器
3.  购买具有内置局域网唤醒功能的路由器（如 DD-WRT 开源固件）
4.  使用魔术包转发器将魔术包转发到广播地址。这个应该一直开机

我正在使用第四个选项将我的家用电脑从工作中唤醒。我买了一个 Arduino Uno + Ethernet shield 并编写了一个小程序来完成这项工作（转发魔术包）。我在我的路由器（Netgear DG834G）中设置了一个端口转发规则，以将 UDP 9 转发到 Arduino IP 地址。

我在我的个人网站上写了一个关于这个的教程，它是法语的，但代码是通用的^^：[http ://www.finalclap.com/tuto/arduino-wake-on-lan-repeater-80/](http://www.finalclap.com/tuto/arduino-wake-on-lan-repeater-80/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:07:19.387

我做了更多的研究，结果发现除非路由器本身具有内置管理并且可以公开访问，否则 WoL 将无法在路由器后面工作。但是，如果您已经在网络内有设备将魔术包发送到目标机器，则 WoL 将起作用。这完全破坏了 WoL 的意义！

# c - 有没有更简单的方法将结构转换为指向结构的指针

> ID：14000143
> 
> 赞同：1
> 
> 时间：2012-12-22T04:48:10.013
> 
> 标签：c

我有一个单元测试程序，用于在初始编译之前捕获开源项目功能中的错误。我需要测试的所有函数都返回一个指向结构的指针（在这种情况下`bn_poly`），而我的变量不是指针。我知道这个问题必须有一个更简单的解决方案，但是经过一番谷歌搜索后我什么也没想到，这就是我目前正在做的事情

```
/* only relevant part of code */
struct *bn_poly poly_summ;
unsigned i
poly_summ = (struct bn_poly*)bu_malloc(sizeof(struct bn_poly),"sum");
/* test multiplication and begin checking data */
*poly_summ = bn_poly_mul(&poly_summ,poly_eqn,poly_mul);
/* bn_poly returns a pointer to bn_poly, so i have to declare
 * a temporary pointer to find the value. Is this the only way
 * or is there a type cast method i am missing?
 */ 
```

* * *

我想能够做什么：

```
struct bn_poly poly_summ;
poly_summ = (somethingToConvertReturnVal)bn_poly_mul(&poly_summ,poly_eqn,poly_mul);
/* no memory allocation needed! */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T04:56:43.427

我对你的问题有点困惑但这就是我对“铸造”指针的了解。

*   该`&`符号是参考符号，因此 `&x`为您提供 x 的地址，或指向 x 的指针

*   该`*`符号是尊重符号，所以假设`x`是一个指针，`*x`为您提供指向的`x`值

在你的情况下，我想你想要

```
struct bn_poly poly_summ;
poly_summ = *(bn_poly_mul(/*params*/)); 
```

作为附加说明，从外观上看，它`bn_poly_mul`似乎已经分配了您的结构并将其放在堆上。你甚至不需要分配它，事实上这样做会导致内存泄漏

* * *

此外， is 的第一个参数对`bn_poly_mul`我`&poly_summ`来说有点令人反感，所以我必须查看函数才能确定

# matlab - MATLAB - cvpartition 的“k”和“kfold”分区类型之间的区别

> ID：14000145
> 
> 赞同：1
> 
> 时间：2012-12-22T04:48:46.530
> 
> 标签：matlab, time-series, data-partitioning, cross-validation

有人可以向我解释一下差异及其对使用分层 10 倍交叉验证程序（由“k”分区类型表示）或 10 倍交叉验证程序（如“kfold”分区表示）对数据分区的影响类型）。

我的意图是使用此分区来执行交叉验证过程，以使用 bootstrap 集成进行时间序列分析。在这种情况下，哪种分区类型更适合对我的解释变量进行分区以尽可能适合我的响应变量？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:49:06.210

绝对没有区别。类`cvpartition`构造函数只检查您提供的 n 个字符与标准方法名称的前 n 个字符。所以`'k'`, `'kfo'`, 和`'kfold'`都是等价的参数。

# ruby-on-rails - 如何使 crontab 使用正确的 rake 并参考 vendor/bundle 中的 gem

> ID：14000147
> 
> 赞同：1
> 
> 时间：2012-12-22T04:49:19.197
> 
> 标签：ruby-on-rails, cron, rake, bundler

我希望调用 rake 任务的 cron 作业使用安装在 [rails_app]/vendor/bundle 或 [rails_app]/vendor/cache 中的 gem。目前，我的系统 gem 已经过时了，但由于我无法控制的各种原因，我无法更新它们。

我尝试使用`bundle exec`，但这似乎不起作用。我得到的错误是 **usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/spec_set.rb:88:in 'materialize': 找不到 rake-0.9.2.2在任何来源 (Bundler::GemNotFound)**

我相信这是因为我的系统的 rake 已经过时了。我尝试 `bundle exec rake _0.9.2.2_ [my_task]`在cron作业中使用，但出现了同样的错误

我尝试了[任何时候](https://github.com/javan/whenever)的宝石；这产生了确切的错误。

所以我想我有两个问题：

1.  如何让 cron 使用正确的 rake 版本？和
2.  如何将它指向已经在供应商/捆绑包或供应商/缓存中的 gem？

请注意，该站点在部署在 Phusion Passenger 中时有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:39:55.270

在为同一问题寻找解决方案时，我发现[这个线程](https://stackoverflow.com/questions/8620137/cant-get-rails-rake-task-to-play-nice-with-crontab)有几个提示。

对我来说，快速简便的方法是将 cron 命令作为登录 shell 运行 - 如下所示：

`* * * * * /bin/bash -l -c 'bundle exec rake _0.9.2.2_ [my_task]' 2>&1`

结尾`2>&1`只是为了确保在 cron 日志中收到错误。另请参阅`man bash`以获取更多信息！

# php - 是否有任何 php 插件可以消除 php 中使用 $ 符号为变量添加前缀的需要

> ID：14000153
> 
> 赞同：1
> 
> 时间：2012-12-22T04:50:43.317
> 
> 标签：php

在 php 编程八年后，每当我将变量放在某个地方时，我每次都不得不无缘无故地放置 SHIFT + 4，这让我感到非常厌烦。我在互联网上查看过，但我发现的唯一内容是功能请求：[https](https://bugs.php.net/bug.php?id=54325) ://bugs.php.net/bug.php?id=54325是否有可以安装的插件或其他允许您安装的方式像任何其他编程语言一样放置变量。我不知道如何更有建设性地提出这个问题，而且我找不到任何现有的问题。我不是问为什么有美元符号。当然我知道它是从 PERL 继承的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T04:52:13.833

不，你不能。这是您无法绕过的语言的基本结构。

# android - 如何使用 Hackbook 示例获取 facebook 好友的出生日期

> ID：14000156
> 
> 赞同：1
> 
> 时间：2012-12-22T04:51:20.340
> 
> 标签：android, facebook, facebook-graph-api, android-emulator

我是 Android 新手，使用 Facebook Android 开发人员的 HACKBOOK 示例应用程序，通过单击“获取朋友”行，我仍然只能获取朋友的姓名，但在这里我也想通过使用 Graph API 或FQL

喜欢：-

> 亨利

今天25岁

> 铅锤

10 天后满 18 岁

> 克雷利

306 天后满 26 岁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:39:31.517

创建请求时，需要在“fields”参数中添加“birthday”。

在 Hackbook 中，它看起来像这样：

```
捆绑参数 = 新捆绑（）；
params.putString("字段", "姓名、图片、位置、生日");

```

[您可以从此文档](https://developers.facebook.com/docs/reference/api/user)中查看其他可能的字段。

# jquery - 使用 minicolors jquery

> ID：14000157
> 
> 赞同：3
> 
> 时间：2012-12-22T04:51:24.333
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我一直试图[暗示 minicolors](http://www.abeautifulsite.net/blog/2011/02/jquery-minicolors-a-color-selector-for-input-controls/)。一切都很好，我已经按照我想要的方式定位它但是有一些问题为我隐含 jquery 我在控制台上收到这个错误 Uncaught TypeError: Object [object Object] has no method 'miniColors' 我已经包含了所有需要的 jquery 文件.

```
<script src="javascripts/jquery.minicolors.js"></script>
<link rel="stylesheet" href="stylesheets/jquery.minicolors.css" />

<input class="mini" type="minicolors" data-swatch-position="left" value="#75bd25"  

data-textfield="false" name="color" />

<script type="text/javascript">
$(document).ready( function() {

$('INPUT[type=minicolors]').miniColors({
change: function(hex, rgb) {     $('body').css("background-color",hex); }   
});

});

</script> 
```

非常感谢你的帮助！！

这是我画的修改后的代码谢谢你的帮助

```
$(document).ready( function() {

  $('INPUT[type=minicolors]').on('change', function() {

    var input = $(this),
      hex = input.val();

      $('body').css("background-color",hex);

  });

}); 
```

这次没有错误，但它不起作用我做错了什么？

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T23:26:21.330

**更新：**

根据用户反馈，MiniColors 2.0 的 API 已恢复为与 1.0 类似的方法。请参阅 GitHub 上的更新文档。

* * *

Cory 来自 ABS（插件作者）。Jason 和 icktooday 都是正确的。MiniColors 2.0 就在几天前推出了测试版，API 确实发生了变化。99.9% 的开发人员只需要包含 MiniColors JavaScript 文件并创建如下输入控件：

```
<input type="minicolors" /> 
```

该插件将在首次加载时自动启用页面上的所有控件。对于需要动态添加控件的，只需插入`<input>`元素，然后调用`init`方法即可：

```
$.minicolors.init(); 
```

无需指定选择器。该插件可以使您以最小的开销尽可能简单。有关更多详细信息，请参阅文档中的[实用程序函数](http://labs.abeautifulsite.net/jquery-miniColors/#utility-functions)。

至于您的新错误，您需要：

1.  将更改事件绑定到原始输入元素
2.  更改`background-color`为`backgroundColor`
3.  使用输入元素的`value`（`data-opacity`如果您启用了不透明度，则使用属性）

```
$('INPUT[type=minicolors]').on('change', function() {

    // This shows how to obtain the hex color and opacity (when in use)
    var hex = $(this).val(),
        opacity = $(this).attr('data-opacity');

    $('BODY').css('backgroundColor', hex);

}); 
```

**注意：**虽然之前版本的 MiniColors 是基于元素的，但我觉得在 2.0 中使用具有前瞻性的方法更合适。99.9% 的用户只需要包含 MiniColors JavaScript 文件并添加带有`minicolors`类型的输入元素。对于那些需要额外功能的人来说，它只是一个额外的函数调用来更新东西。

请帮助测试 MiniColors 2.0 并将任何错误报告、功能请求等提交到它在[GitHub 上](https://github.com/claviska/jquery-miniColors/)的主页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T04:57:29.170

您正在使用 MiniColors 版本 2，但使用的代码仅适用于 MiniColors 版本 1。使用旧版本 1 或[阅读新文档](http://labs.abeautifulsite.net/jquery-miniColors/)并更新您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T04:57:41.213

我以前从未使用过 minicolors，但看起来您正在尝试将它用作基于元素的插件（这是大多数插件作者编写插件的方式），但 minicolors 似乎是基于原型的。

换句话说，您不能使用`$(selector).miniColors(...);`，而必须使用`$.minicolors.init()`它们支持的其他功能。

# linux - 不正确的工作等于汇编代码（x86_64 linux）

> ID：14000159
> 
> 赞同：0
> 
> 时间：2012-12-22T04:51:41.617
> 
> 标签：linux, memory-management, assembly, x86-64

我正在尝试编写一个简单的编译器。我的语言可以使用浮点数计算算术表达式，保存变量并打印变量。在我的编译器的第一个版本中，我所有的计算都只使用 a`push`和`pop`。然后我用调用绝对堆栈地址进行计算。我没有使用 分配内存`sub rsp`，而是使用了`[rsp-8*x]`，其中`x`是堆栈上的值的数量，例如 a`push`和`pop`。但问题是它不适用于`pow`libc 中的函数。我不明白，我做错了什么。

为了您的方便，我稍微重构了代码。

我的第一个汇编版本（nasm 语法）：

```
[bits 64]
global _start
extern printf
extern pow

section .data
    printf_format db '%lf', 10, 0
section .text
_start:
    mov rbp, rsp
    sub rsp, 0x20

    mov rax, 0x4000000000000000
    push rax
    mov rax, 0x4000000000000000
    push rax
    mov rax, 0x4008000000000000
    push rax

    movsd xmm0, qword [rsp+8]
    movsd xmm1, qword [rsp]
    call pow
    movsd qword [rsp+8], xmm0

    add rsp, 8
    movsd xmm0, qword [rsp+8]
    movsd xmm1, qword [rsp]
    call pow

    mov rdi, printf_format
    mov rax, 1
    call printf

    mov rax, 60
    mov rdi, 0
    syscall 
```

我的第二个版本：

```
[bits 64]
global _start
extern printf
extern pow

section .data
    printf_format db '%lf', 10, 0
section .text
    _start:
    mov rbp, rsp
    sub rsp, 0x20

    mov rax, 0x4000000000000000
    mov qword [rsp-8*1], rax
    mov rax, 0x4000000000000000
    mov qword [rsp-8*2], rax
    mov rax, 0x4008000000000000
    mov qword [rsp-8*3], rax

    movsd xmm0, qword [rsp-8*2]
    movsd xmm1, qword [rsp-8*3]
    call pow
    movsd qword [rsp-8*2], xmm0

    movsd xmm0, qword [rsp-8*1]
    movsd xmm1, qword [rsp-8*2]
    call pow

    mov rdi, printf_format
    mov rax, 1
    call printf

    mov rax, 60
    mov rdi, 0
    syscall 
```

我编译并将其链接到：

```
nasm -f elf64 ex.asm
ld -lc -lm -m elf_x86_64 -I/lib/ld-linux-x86-64.so.2 ex.o -o ex 
```

在我的编译器的最后一个版本中，我用 编写了调用`[rsp+8*x]`并分配了`sub rsp`，问题就解决了。

我的问题是：为什么我所做的改变解决了这个问题？

# windows-phone-8 - 使用 windows phone 8 中的锁屏应用程序可以在 windows phone 中多久更新一次锁屏数据？

> ID：14000169
> 
> 赞同：-2
> 
> 时间：2012-12-22T04:54:03.010
> 
> 标签：windows-phone-8

我在 Windows Phone 7.8 和 8 中听说了这个令人兴奋的新功能，我们可以在其中编写锁屏应用程序。在 Windows Phone 8 中使用锁屏应用程序可以多久更新一次锁屏数据？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T05:23:12.993

锁屏数据直接取自主磁贴（您也可以设置背景），所以我认为问题可能真的是磁贴多久可以更新一次？

要在显示锁定屏幕时更新磁贴，您可能会使用[定期后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)，这些代理每 30 分钟运行 25 秒。

或者，磁贴更新可以由推送通知驱动。[如果以未经身份验证的模式发送，每天有 500](http://msdn.microsoft.com/en-us/library/hh221549.aspx#ID4EHD1)个限制，但如果通过身份验证则无限制。

# javascript - 阐明 提交给 string.match("site:mysite.net")

> ID：14000170
> 
> 赞同：3
> 
> 时间：2012-12-22T04:54:05.257
> 
> 标签：javascript, jquery, html, string, forms

我正在浏览网页源并试图弄清楚搜索是如何执行的。

检查搜索按钮和输入给了我这个：

```
<h2>Search the MySite.net Forum</h2>
<form action="?" method="post">
<p>
    <b>Search for:</b>
    <input type="text" name="s" placeholder="Search..." style='width:90%;' maxlength="255" />
</p>
<p>
    <p>Search in:</b>
    <select name="in">
        <option value="ft">forum title or text</option>
        <option value="tt">thread titles</option>
        <option value="pt">poll titles</option>
    </select>
</p>
<p>
    <input type="submit" value="Search the MySite.net Forum" />
</p>
</form> 
```

唯一可用的相关脚本包含：

```
$('#search-submit').click(function() { 
    var q = $('#searchq').val(); 
    if(q.match("site:mysite.net")) { return; } else { $("#searchq").val(q+ ' site:mysite.net'); }
}); 
```

1.  有人可以澄清表单属性吗`action="?"`？我不习惯看到那个和`POST`方法，我以为它只是为了`GET`. 这是什么意思？
2.  我不明白`q.match("site:mysite.net")`，我很难找到冒号`("site:mysite.net")`搜索“：”的含义，这让我到处都是。我以为它正在搜索整个站点，但这似乎不对。有人也可以为我澄清一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:05:40.147

标签的`action`属性`form`只是指定表单将数据提交到的 URL。

`match`是`string`对象上匹配正则表达式模式的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T05:30:55.343

Site:yoursite 是一个命令 google 将其索引中的搜索范围缩小到您的站点。在某个地方你会有一个谷歌调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:47:17.657

1.  将`action="?"`表单提交到当前 URL，使用“？” 表示查询并附加表单数据。查询是隐藏的，因为`method = "post"`，在这种情况下可以使用。无论采用何种方法，表单仍将作为对当前 URL 的查询提交。

2.  匹配是一个字符串文字，并返回一个包含该文字的字符串。

# c++ - struct 中的 const char 指针声明

> ID：14000172
> 
> 赞同：2
> 
> 时间：2012-12-22T04:55:19.277
> 
> 标签：c++, struct, const-char

我正在尝试这样做，但我的编译器不允许我这样做：

```
 struct {
        const char* string = "some text";
    } myAnonymousStruct; 
```

我相信这是因为在结构声明中不能进行任何赋值——它们应该在函数或其他方式中进行。但是我真的不允许分配`const char*`变量吗？
如果有人可以让我知道我缺少什么，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T05:14:03.517

您的代码在支持 C++11 或更高版本的编译器上[非常好](https://en.cppreference.com/w/cpp/language/data_members#Member_initialization)。

在 C++11 之前，不能默认初始化结构的成员。相反，它们必须在创建实例结构后进行初始化。

如果它符合您的需要，您可以像这样使用聚合初始化：

```
struct {
    const char* string;
} myAnonymousStruct = { "some text" }; 
```

但是，如果您尝试默认初始化的不仅仅是结构的一个实例，那么您可能希望为您的结构提供一个构造函数并初始化其中的成员。

```
struct MyStruct {
    const char* str;
    MyStruct() : str("some text") { }
};

MyStruct foo;
MyStruct bar; 
```

在前面的示例中，`foo`和`bar`是 的不同实例`MyStruct`，都`str`初始化为`"some text"`。

# git - TortoiseGit 保存用户身份验证/凭据

> ID：14000173
> 
> 赞同：302
> 
> 时间：2012-12-22T04:56:00.157
> 
> 标签：git, github, tortoisegit

有没有办法`GITHUB's user credentials`用 TortoiseGit 保存？

每当我进行推/拉时，它都会提示我以下对话框。

我想将我的用户凭据信息保存在某个地方，就像我使用 TortoiseSVN 所做的那样。

![在此处输入图像描述](../Images/6ebbdee1f7c7165d76c0d486da6e89eb.png)

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2013-03-12T01:23:50.143

对于 TortoiseGit 1.8.1.2 或更高版本，有一个 GUI 可以打开/关闭凭证助手。

它支持`git-credential-wincred`和`git-credential-winstore`。

TortoiseGit 1.8.16 添加对`git-credential-manager`（Git Credential Manager，继承者`git-credential-winstore`）的支持

第一次同步时，系统会要求您输入用户名和密码，您输入它们，它们将被保存到 Windows 凭据存储区。下次同步时它不会询问用户名或密码。

要使用：右键单击 → TortoiseGit → 设置 → Git → 凭证。选择凭据助手：wincred - 仅限此存储库 / wincred - 当前 Windows 用户

![在此处输入图像描述](../Images/6e8f580c637f06e4222d39a64099668f.png)

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-12-22T05:07:10.363

**如果您要否决这个答案**

在将 git-credential 包含在 TortoiseGit 中之前的几个月，我写了这篇文章。鉴于过去几年发现的大量安全漏洞以及我对网络安全的了解，我强烈建议您为连接到的每台服务器使用唯一的（最低 2048 位 RSA）SSH 密钥。

**以下语法仍然可用，尽管今天有更好的工具可用，例如`git-credential`接受的答案告诉您如何使用。改为这样做。**

* * *

尝试将远程 URL 更改为`https://username@github.com/username/repo.git`您`username`的 github 用户名和`repo`存储库的名称。

如果您还想存储密码（不推荐），则 URL 应如下所示：`https://username:password@github.com/username/repo.git`.

还有另一种存储此 github 帮助文章中的密码的方法：[https ://help.github.com/articles/set-up-git#password-caching](https://help.github.com/articles/set-up-git#password-caching)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-08-17T07:01:24.463

使用 git 版本 1.8.3.msysgit.0 和 TortoiseGit 1.8.4.0 时，上述答案均不适合我。

在我的特殊情况下，我必须通过 HTTPS 连接到远程 git repo，使用完整的电子邮件地址作为用户名。在这种情况下，`wincred`似乎没有工作。

使用电子邮件地址作为回购 URL 的一部分也不起作用，因为该软件似乎被 URL 中“@”字符的双重出现弄糊涂了。

我确实设法使用`winstore`. 这是我所做的：

*   `winstore`从[http://gitcredentialstore.codeplex.com/](http://gitcredentialstore.codeplex.com/)下载
*   运行`git-credential-winstore.exe`安装它。

这会将 复制`git-credential-winstore.exe`到本地目录并将两行添加到您的全局`.gitconfig`. 您可以通过检查您的全局`.gitconfig`. 这最容易通过文件夹上的鼠标右键完成，“TortoiseGit > Settings > Git > Edit global .gitconfig”。该文件应包含两行，例如：

```
 [credential]
        helper = !'C:\\Users\\yourlogin\\AppData\\Roaming\\GitCredStore\\git-credential-winstore.exe' 
```

*   “网络”或“凭据”下不需要其他 TortoiseGit 设置。特别是：由于这些配置行，“凭据”下的“凭据助手”下拉菜单将变为空白，因为 TortoiseGit 无法识别新助手。不要将下拉菜单设置为其他值，否则全局 .gitconfig 将被错误的值覆盖！(*)

您现在可以开始了：

*   尝试从远程存储库中提取。您会注意到一个身份验证弹出窗口询问您的用户名和密码，该弹出窗口在视觉上应该与默认的 TortoiseGit 弹出窗口不同。这是一个好兆头，意味着`winstore`有效。输入正确的身份验证，拉取应该成功。
*   再次尝试相同的拉动，不再询问您的用户名和密码。

完毕！在处理身份验证的同时享受与远程仓库的交互`winstore`。

(*) 或者，如果您不喜欢 TortoiseGit 凭据设置助手下拉菜单中的空白选择，您可以使用“高级”选项：

*   转到“TortoiseGit > 设置 > 凭据”
*   选择凭证助手“高级”
*   点击 Helpers 下的“G”（全局）
*   输入 Helper 路径，如下所示。**注意：**常规的 Windows 路径表示法（例如“C:\Users...”）在这里不起作用，您必须复制`winstore`在全局中创建的安装的确切行，`.gitconf`而不需要“he​​lper =”位。

    ```
    !'C:\\Users\\yourlogin\\AppData\\Roaming\\GitCredStore\\git-credential-winstore.exe' 
    ```

*   单击“添加新/保存”按钮

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-01-11T17:08:00.667

如果您是 Windows 10 + TortoiseGit 2.7 用户：

1.  首次登录，只需按照提示输入您的凭据并保存密码。
2.  如果您需要更新您的凭据，请不要在 TortoiseGit 设置上浪费时间。相反，Windows 搜索 > 凭据管理器 > Windows 凭据 > 找到您的 git 条目 > 编辑。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-22T05:58:30.480

对于 msysgit 1.8.0，从[https://github.com/downloads/msysgit/git/git-credential-wincred.zip](https://github.com/downloads/msysgit/git/git-credential-wincred.zip)下载 git-credential-wincred.exe并放入 C:\Program Files\Git\libexec\git -核

对于 msysgit 1.8.1 及更高版本，exe 是内置的。

在 git config 中，添加以下设置。

[凭据] 助手 = wincred

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-06-23T12:21:34.740

使用 TortoiseGit 保存用户名和密码

在 TortoiseGit 中保存您的登录信息非常简单。每次拉或推时都不必输入用户名和密码。

1.  创建一个名为 _netrc 的文件，其内容如下：

    机器 github.com
    登录 yourlogin
    password yourpassword

2.  将文件复制到 C:\Users\ （或其他位置；这恰好是我放置的位置）

3.  转到命令提示符，键入 setx home C:\Users\

注意：如果您使用的是 Windows 7 之前的版本，则 setx 命令可能不适合您。改用 set 并通过“我的电脑”下的“高级设置”将 home 环境变量添加到 Windows。

信用：http: [//www.munsplace.com/blog/2012/07/27/saving-username-and-password-with-tortoisegit/](http://www.munsplace.com/blog/2012/07/27/saving-username-and-password-with-tortoisegit/)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-05-16T04:36:59.370

[打开git设置（TortoiseGit→设置→Git）][1]

[在 GIt 中：点击编辑全局 .gitconfig][2]

[配置用户名和密码](https://i.stack.imgur.com/lIh2x.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-24T15:48:17.033

转到项目仓库，右键单击 -> 'Git Bash Here'

在 git bash 窗口中输入

```
cd ~
pwd 
```

我得到这样的东西

```
/c/Users/<windows_username> 
```

现在将您的公钥和私钥复制到此路径

```
C:\Users\<windows_username>\.ssh 
```

我在那里得到了以下文件

```
id_rsa
id_rsa.pub
known_hosts 
```

这里

现在，当它需要使用凭据时，它会使用这些文件并在需要时提示输入密码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-02T05:31:12.150

我将我的 Git for Windows 升级到最新的（2.30.0）64 位，现在它工作正常。从 url [https://git-scm.com/download/win](https://git-scm.com/download/win)获取最新信息 并运行以下命令进行验证。$ git --version $ git 版本 2.30.0.windows.1

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-08T14:13:47.870

从旧的主要版本更新到 Git for Windows 2.35.1.windows.2 时，您可能需要执行以下操作：

1.  启动 Git CMD

2.  跑：`git credential-manager-core configure`

3.  这应该给出如下响应：

    正在配置组件“Git Credential Manager”...

    正在配置组件“Azure Repos 提供程序”...

现在开始下一个 Git 操作时，Git 只会要求您选择一个帐户，将其存储起来并在下一个操作中重复使用。

# multithreading - 多线程程序中如何连接信号和槽？

> ID：14000176
> 
> 赞同：0
> 
> 时间：2012-12-22T04:57:03.840
> 
> 标签：multithreading, qt

主窗口.cpp：

```
#include "ui_mainwindow.h"
#include <QtCore>

/* ****** Thread part ****** */
myThread::myThread(QObject *parent)
    : QThread(parent)
{
}

void myThread::run()
{
    while(1){
        qDebug("thread one----------");
        emit threadSignal1();
        usleep(100000);
    }
    exec();
}

myThread2::myThread2(QObject *parent)
    : QThread(parent)
{
}

void myThread2::run()
{
    while(1){
        qDebug("thread two");
        emit threadSignal2();
        usleep(100000);
    }
    exec();
}
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    onethread = new myThread(this);
    onethread->start(QThread::NormalPriority);

    twothread = new myThread2(this);
    twothread->start(QThread::NormalPriority);

    connect(onethread, SIGNAL(onethread->threadSignal1()),
            this, SLOT(mySlot1()));
    connect(twothread, SIGNAL(threadSignal2()),
            this, SLOT(mySlot2()),Qt::QueuedConnection);
}

void MainWindow::mySlot1()
{
    ui->textEdit1->append("This is thread1");
}

void MainWindow::mySlot2()
{
    ui->textEdit1->append("This is thread2");
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    ui->textEdit1->append("textEdit1");
    ui->textEdit2->append("textEdit2");
} 
```

主窗口.h：

```
#define MAINWINDOW_H

#include <QMainWindow>
#include <QThread>

namespace Ui {
class MainWindow;
}

class myThread : public QThread
{
  Q_OBJECT

public:
    myThread(QObject *parent = 0);
    void run();

signals:
    void threadSignal1();
};

class myThread2 : public QThread
{
  Q_OBJECT

public:
    myThread2(QObject *parent = 0);
    void run();

signals:
    void threadSignal2();
};

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    void mySlot1();
    void mySlot2();

private slots:
    void on_pushButton_clicked();

private:
    Ui::MainWindow *ui;
    myThread *onethread;
    myThread2 *twothread;
};

#endif // MAINWINDOW_H 
```

请检查上面的代码。`qDebug`textEdit1/2 没有任何输出时，它可以正常输出。这似乎是一个多线程信号/插槽连接问题。谁能帮忙？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:44:27.127

您需要将插槽定义为插槽：

```
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

public slots:
    void mySlot1();
    void mySlot2();
... 
```

还有一些其他的东西。您不需要`exec()`在每个线程中调用。无论如何，他们将进入一个无限循环，永远不会达到那个声明。并且，目的`exec()`是在线程中启动一个事件循环，以便它可以**接收**和处理事件，就像拥有自己的插槽一样。你只是在发射。

你确定这个连接有效吗？

```
connect(onethread, SIGNAL(onethread->threadSignal1()),
        this, SLOT(mySlot1())); 
```

应该是：

```
connect(onethread, SIGNAL(threadSignal1()),
        this, SLOT(mySlot1())); 
```

我相信`QueuedConnection`连接是隐含的，因为它们的目标是在与发射器不同的线程中的所有者上的插槽。

# bash - 循环遍历不同目录中的文件

> ID：14000179
> 
> 赞同：0
> 
> 时间：2012-12-22T04:57:30.413
> 
> 标签：bash

我想编写一个脚本来遍历两个不同目录中的文件，并回显不同文件名模式的文件我这样制作了一个，但这是不合适的

```
#Files in one dir ABC-123-1.txt
#Files in subdir ABC-123.doc
for f in *.doc
  do
  f1=`echo $f|sed 's/.doc//g`'
  for f2 in ../*.txt
     do
     f3=`echo $f2|sed 's/..\///g'|sed 's/-1.txt//g'`
     if [ "$f1" != "$f3" ]
        then
        echo $f3
     fi
    done
  done 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T07:34:36.180

如果我正确理解您打算对脚本执行的操作，您希望遍历 dir1 中以“.doc”结尾的文件，然后在 dir2 中打印具有相同文件名并以“-1.txt”结尾的文件。

这可以在 bash 中使用这一行来实现：

```
for i in `ls <dir1>/*.doc | sed 's/\.doc$//'`; do ls <dir2>/"$i"-1.txt; done  2> /dev/null 
```

（将 dir1 和 dir2 替换为您的目录）

"2>/dev/null" 将忽略第二个目录中不匹配的文件，并且只打印匹配的文件。

希望有帮助。

# c# - 如何在没有浏览器的情况下与网站交互？

> ID：14000185
> 
> 赞同：4
> 
> 时间：2012-12-22T04:58:01.253
> 
> 标签：c#, asp.net, web-services, httpwebrequest

假设我正在构建 ac# 应用程序。申请目的：

1.  从用户那里获取用户名和密码。
2.  并显示网站上的一些信息。

在后台，获取用户名和密码后，它应该：

1.  使用这些凭据登录网站。
2.  并点击登录后出现的锚链接。
3.  找出保存信息的跨度。
4.  获取信息。

* * *

这是一个例子。我实际上正在构建一个应用程序来显示带宽使用信息。服务器没有为此公开任何 API。

是否有任何可用于类似目的的教程/信息/文章？我只是不搜索什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T06:12:05.917

**HttpWebRequests 基本介绍**

首先，您将需要合适的工具来完成这项工作。去下载 Firefox 的[Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/)插件。这将允许您实时查看 HTTP 标头，以便您可以查看与网站交互时发送的 POST 数据。一旦您知道发送到网站的数据，您就可以通过以编程方式创建自己的 HTTP Web 请求来模拟该过程。*工具 > 实时 HTTP 标头*

通过导航到*Tools > Live HTTP Headers 来加载 Live HTTP Headers*。加载 GUI 后，导航到要登录的网站，我将使用[Facebook](https://www.facebook.com/login.php?login_attempt=1)进行演示。输入您的凭据准备登录，但在您执行之前清除 GUI 文本窗口并确保选中标记为*Capture*的复选框。一旦你点击登录，你会看到文本窗口充斥着关于请求的各种信息，包括你需要的 POST 数据。

![](../Images/b21dd03da3541456b981cb104e2e2d22.png)

我发现最好单击*Save All...*，然后在文本文档中搜索您的用户名，以便您可以轻松识别 POST 数据。对于我的请求，POST 数据如下所示：

> lsd=AVp-UAbD&display=&legacy_return=1&return_session=0&trynum=1&charset_test=%E2%82%AC%2C%C2%B4%2C%E2%82%AC%2C%C2%B4%2C%E6%B0%B4%2C %D0%94%2C%D0%84&timezone=0&lgnrnd=214119_mDgc&lgnjs=1356154880&email=%myfacebookemail40outlook.com&pass=myfacebookpassword&default_persistent=0

然后可以在 C# 中定义如下：

```
StringBuilder postData = new StringBuilder();
postData.Append("lsd=AVqRGVie&display=");
postData.Append("&legacy_return=1");
postData.Append("&return_session=0");
postData.Append("&trynum=1");
postData.Append("&charset_test=%E2%82%AC%2C%C2%B4%2C%E2%82%AC%2C%C2%B4%2C%E6%B0%B4%2C%D0%94%2C%D0%84");
postData.Append("&timezone=0");
postData.Append("&lgnrnd=153743_eO6D");
postData.Append("&lgnjs=1355614667");
postData.Append(String.Format("&email={0}", "CUSTOM_EMAIL"));
postData.Append(String.Format("&pass={0}", "CUSTOM_PASSWORD"));
postData.Append("&default_persistent=0"); 
```

我的目标是向您展示我们可以通过 Web 浏览器“手动”发送的 POST 数据与我们如何使用所述数据在 C# 中模拟请求之间的关系。了解发送 POST 数据远非确定性。不同的网站以不同的方式工作，并且可以按照您的方式抛出各种东西。下面是我用来验证 Facebook 凭据是否正确的函数。我不能也不应该在这里进行非常深入的讨论，因为这些课程及其成员都是自我记录的。您可以找到比我提供的有关[MSDN](http://msdn.microsoft.com/en-us)使用的方法更好的信息，例如[WebRequest.Method 属性](http://msdn.microsoft.com/en-us/library/system.net.webrequest.method.aspx)

```
 private bool ValidateFacebookCredentials(string email, string password)
    {
        CookieContainer cookies = new CookieContainer();
        HttpWebRequest request = null;
        HttpWebResponse response = null;
        string returnData = string.Empty;

        //Need to retrieve cookies first
        request = (HttpWebRequest)WebRequest.Create(new Uri("https://www.facebook.com/login.php?login_attempt=1"));
        request.Method = "GET";
        request.CookieContainer = cookies;
        response = (HttpWebResponse)request.GetResponse();

        //Set up the request
        request = (HttpWebRequest)WebRequest.Create(new Uri("https://www.facebook.com/login.php?login_attempt=1"));
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13";
        request.Referer = "https://www.facebook.com/login.php?login_attempt=1";
        request.AllowAutoRedirect = true;
        request.KeepAlive = true;
        request.CookieContainer = cookies;

        //Format the POST data
        StringBuilder postData = new StringBuilder();
        postData.Append("lsd=AVqRGVie&display=");
        postData.Append("&legacy_return=1");
        postData.Append("&return_session=0");
        postData.Append("&trynum=1");
        postData.Append("&charset_test=%E2%82%AC%2C%C2%B4%2C%E2%82%AC%2C%C2%B4%2C%E6%B0%B4%2C%D0%94%2C%D0%84");
        postData.Append("&timezone=0");
        postData.Append("&lgnrnd=153743_eO6D");
        postData.Append("&lgnjs=1355614667");
        postData.Append(String.Format("&email={0}", email));
        postData.Append(String.Format("&pass={0}", password));
        postData.Append("&default_persistent=0");

        //write the POST data to the stream
        using(StreamWriter writer = new StreamWriter(request.GetRequestStream()))
            writer.Write(postData.ToString());

        response = (HttpWebResponse)request.GetResponse();

        //Read the web page (HTML) that we retrieve after sending the request
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            returnData = reader.ReadToEnd();

        return !returnData.Contains("Please re-enter your password");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T05:16:39.353

抓取内容的示例代码（屏幕抓取）

```
 Uri uri = new Uri("http://www.microsoft.com/default.aspx");
 if(uri.Scheme = Uri.UriSchemeHttp) 
 {
     HttpWebRequest request = HttpWebRequest.Create(uri);
     request.Method = WebRequestMethods.Http.Get;
     HttpWebResponse response = request.GetResponse();
     StreamReader reader = new StreamReader(response.GetResponseStream());
     string  tmp = reader.ReadToEnd();
     response.Close();
     Response.Write(tmp);
  } 
```

关于如何使用 HttpWebRequest 将数据发布到远程网页的示例代码

```
 Uri uri = new Uri("http://www.amazon.com/exec/obidos/search-handle-form/102-5194535-6807312");
   string data = "field-keywords=ASP.NET 2.0";
   if (uri.Scheme == Uri.UriSchemeHttp)
   {
       HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
       request.Method = WebRequestMethods.Http.Post;
       request.ContentLength = data.Length;
       request.ContentType = "application/x-www-form-urlencoded";
       StreamWriter writer = new StreamWriter(request.GetRequestStream());
       writer.Write(data);
       writer.Close();
       HttpWebResponse response = (HttpWebResponse)request.GetResponse();
       StreamReader reader = new StreamReader(response.GetResponseStream());
       string tmp = reader.ReadToEnd();
       response.Close();
       Response.Write(tmp);
   } 
```

**[来源](http://www.worldofasp.net/aspnet/Tutorials/WebRequest/Working_with_HttpWebRequest_and_HttpWebResponse_in_ASP.NET_114.aspx)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:05:51.117

任何 HTTP 客户端实现，都有大量的开源库。以[curl](http://curl.haxx.se/)为例。一些家伙[为它制作了一个 .NET 包装器](http://www.carballude.es/namespace/2009/03/14/curl-library-for-c-dotnet/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T05:07:02.877

您可以继续使用 WebClient 进行 POST（而不是 GET，这是您当前与 DownloadString 一起使用的 HTTP 动词），但我认为您会发现使用（稍微）较低级别的类 WebRequest 和 WebResponse 会更容易。

这有两个部分 - 第一个是发布登录表单，第二个是恢复“Set-cookie”标头并将其作为“Cookie”与您的 GET 请求一起发送回服务器。从现在开始，服务器将使用此 cookie 来识别您（假设它使用基于 cookie 的身份验证，我相当有信心，因为该页面返回一个包含“PHPSESSID”的 Set-cookie 标头）。

**[点击这里查看详细信息](https://stackoverflow.com/questions/930807/c-sharp-login-to-website-via-program)**

# c++ - 加减时间

> ID：14000188
> 
> 赞同：7
> 
> 时间：2012-12-22T04:58:55.210
> 
> 标签：c++, time

我是 C++ 新手 - 我想制作一个程序来使用 HH:MM 格式来增加和减少时间。样本输入：

```
12:00 + 3:00 - 6:00 
```

样本输出：

```
9:00 
```

另一个样本输入：

```
9:00 + 8:00 + 13:00 - 2:25 
```

样本输出：

```
27:35 
```

我怎么知道这件事？我正在考虑将所有内容转换为秒，然后应用数学运算，然后使用模数 60 函数返回时间。对构建这样的程序有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:59:33.770

您需要考虑“时间”的含义。有两个概念，时间点和持续时间。把时间点加在一起没有任何意义。添加和减去持续时间（导致持续时间）确实有意义，并且使用时间点添加和减去持续时间（导致与原始时间点偏移的新时间点）是有意义的。从另一个时间点中减去一个时间点也是有意义的，从而产生中间持续时间。

很多时候，API 不能很好地区分这两个概念，但标准 C++`<chrono>`库可以。

这是一些滥用 C`tm`类型的代码，以便从用户那里获得几个持续时间，将它们加在一起，然后`tm`再次滥用以输出结果。

```
#include <iostream> // cout, cin
#include <iomanip>  // get_time, put_time
#include <chrono>   // hours, minutes, duration_cast

int main() {
    // input, get a couple durations to do arithmetic on
    // technically std::tm represents a time point and get_time is supposed to
    // parse a time point, but we treat the results as a duration
    std::tm t;
    std::cin >> std::get_time(&t, "%H:%M");

    auto duration1 = std::chrono::hours(t.tm_hour) + std::chrono::minutes(t.tm_min);

    std::cin >> std::get_time(&t, "%H:%M");
    auto duration2 = std::chrono::hours(t.tm_hour) + std::chrono::minutes(t.tm_min);

    // do the arithmetic
    auto sum = duration1 + duration2;

    // output
    auto hours   = std::chrono::duration_cast<std::chrono::hours>(sum);
    auto minutes = std::chrono::duration_cast<std::chrono::minutes>(sum - hours);

    t.tm_hour = hours.count();
    t.tm_min  = minutes.count();

    std::cout << std::put_time(&t, "%H:%M") << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:07:00.677

[这个](http://www.youtube.com/watch?v=0csJVj-RY9E)（第 1 部分）和[这个](http://www.youtube.com/watch?v=2jgTrGlX0hc)（第 2 部分）应该**正是**您想要的..

您会得到清晰的解释，并且作者会逐行执行代码，他还使用了最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-21T14:34:02.733

我想分享一些代码作为问题请求作为 C++ 新手的程序。这不是完美的代码，但对于 C++ 新手来说可能是一个很好的实践。它将解决时间戳的加法和减法。即您可能需要添加额外的验证，并且可以扩展为表示天、秒和毫秒......

```
#include <iostream>
#include <string>

using namespace std;

/// Represents the timestamp in HH:MM format
class Time {
public:
    // Construct the time with hours and minutes
    Time(size_t hours, size_t mins);

    // Construct the time using a string
    Time(const string& str);

    // Destructor
    ~Time() {}

    // Add a given time
    Time operator + (const Time& rTime) const;

    // Subtract a given time
    Time operator - (const Time& rTime) const;

    // Get the members
    int Hours() const { return m_Hours; }
    int Minutes() const { return m_Minutes; }

    // Get the time as a string in HH:MM format
    string TimeStr();   

private:
    // Private members
    int m_Hours;    // Hours
    int m_Minutes;  // Minutes
};

// Constructor
Time::Time(size_t hours, size_t mins) {
    if (hours >= 60 || mins >= 60) {
        cout << "Invalid input" << endl;    
        exit(0);
    }

    // Update the members
    m_Hours = hours;
    m_Minutes = mins;
}

// Add the given time to this
Time Time::operator + (const Time& rTime) const {
    // Construct the time
    int nTotalMinutes(m_Minutes + rTime.Minutes());
    int nMinutes(nTotalMinutes % 60);
    int nHours(nTotalMinutes/60 + (m_Hours + rTime.Hours()));

    // Return the constructed time
    return Time(nHours, nMinutes);
}

// Construct the time using a string
Time::Time(const string& str) {
    if(str.length() != 5 || str[2] != ':') {
        cout << "Invalid time string. Expected format [HH:MM]" << endl;
        exit(0);
    }

    // Update the members
    m_Hours  = stoi(str.substr(0, 2));  
    m_Minutes = stoi(str.substr(3, 2)); 
}

// Substact the given time from this
Time Time::operator - (const Time& rTime) const {
    // Get the diff in seconds
    int nDiff(m_Hours*3600 + m_Minutes*60 - (rTime.Hours()*3600 + rTime.Minutes()*60));

    int nHours(nDiff/3600);
    int nMins((nDiff%3600)/60);

    // Return the constructed time
    return Time(nHours, nMins);
}

// Get the time in "HH:MM" format
string Time::TimeStr() {
    // Fill with a leading 0 if HH/MM are in single digits
    return ((m_Hours < 10) ? string("0") + to_string(m_Hours) : to_string(m_Hours))
           + string(":")
           + ((m_Minutes < 10) ? string("0") + to_string(m_Minutes) : to_string(m_Minutes));
}

int main() {
    Time time1("09:00");    // Time 1
    Time time2("08:00");    // Time 2
    Time time3("13:00");    // Time 3
    Time time4("02:25");    // Time 4

    //time1 + time 2 + time3 - time4
    cout << (time1 + time2 + time3 - time4).TimeStr() << endl;

    return 0;
} 
```

输出：27:35

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:30:47.710

最简单的解决方案就是将输入解析为整数（使用`std::istream`），将它们插入到`tm`（定义在 中的类型`<time.h>`）中，然后调用`mktime`（也在 中`<time.h>`）。（在 C++11 中有一些处理时间的新东西，但我还不是很熟悉。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T00:01:33.093

我在这一行发现了一个小问题：

`int nDiff(m_Hours*3600 + m_Minutes*60 - (rTime.Hours()*3600 + rTime.Minutes()*60));`

在 nDiff( ... ) 中，参数必须是绝对值！nDiff(abs(...))

例如，当您有：

```
Time time1("01:00");
Time time2("02:00");
cout << ( time1 - time2 ).TimeStr() << endl; 
```

输出：

```
hours = 18446744073709551615
Invalid input 
```

对于这种情况：

```
cout << ( time1 + time2 ).TimeStr() << endl; 
```

输出：

```
03:00 
```

这个结论只是改变：

```
int nDiff(m_Hours*3600 + m_Minutes*60 - (rTime.Hours()*3600 + rTime.Minutes()*60)); 
```

对于这个：

```
int nDiff( abs(m_Hours*3600 + m_Minutes*60 - (rTime.Hours()*3600 + rTime.Minutes()*60) ) ); 
```

并在代码中添加这个标题：

```
#include <cstdlib> // function abs() 
```

通过这种方式，代码可以很好地工作。:)

快乐编码！干杯。

# javascript - 如何在jquery中打印json数组

> ID：14000191
> 
> 赞同：0
> 
> 时间：2012-12-22T05:00:13.883
> 
> 标签：javascript, jquery, json

以下是我的`json`回应：

```
{"fname":"abc","lname":"xyz","email":"test@user.com","description":[{"city":"abcxyz","address":"AX","country":"US","date":"2020-02-01"},{"city":"abcxyz","address":"AX","country":"US","date":"2020-02 01"}], "city":"abcxyz","address":"DS","country":"US","Month":"12","Year":"2012"} 
```

以下是我的代码：

```
success: function(data)
{                             
       var userinfo=eval(data);         
       alert(userinfo['fname1']; //display correct result
       alert(userinfo['description']['city']; //display undefined

       if(!$("#fname1").val())  $("#fname1").val(userinfo['fname']);
       if(!$("#lname1").val())  $("#lname1").val(userinfo['lname']);                                                     
} 
```

在成功功能中，如果我试图提醒，`alert(userinfo['fname1']`那么它会向我显示正确的结果，即显示名称，但如果我试图提醒，`alert(userinfo['description']['city']`那么它会向我显示`undefined`警报。

然后我尝试使用`each`循环但仍然无法正常工作

```
$.each(userinfo['description'], function() {
alert(userinfo'description']['city']; //not working
$("#city option[value="+userinfo['description']['city']+"]").attr("selected", "selected");
}); 
```

以下是我的html：

```
<select name="country" id="country">
        <?php
          foreach ($this->description as $country) {
        ?>
        <option value="<?php echo $country['country']; ?>" <?php echo ($this->params['country'] == $country['country']) ? "selected='selected'" : ""; ?>><?php echo $country['country']; ?></option>
         <?php }
         ?>
</select> 
```

谁能告诉我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:02:59.073

你需要做：

> alert(userinfo['description'][0]['city'];

`userinfo['description']`是一个数组。您需要先按索引引用元素。引用对象后，请引用属性

我不认为有任何需要`eval`。评估是一种不好的做法。你可以这样写：

> var 用户信息 = 数据；

`application/json`如果服务器发送了正确的标头 ( ) 或者您传递`json`了 for`dataType`参数，则 JQuery 会解析响应。甚至默认`dataType`为`intelligent guess`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:04:15.930

你的第二种方法是正确的，你应该迭代，`userinfo['description']`因为它是一个数组。但是，您应该访问迭代的当前元素：

```
$.each(userinfo['description'], function() {
    alert(this['city'];
    $("#city option[value="+this['city']+"]").attr("selected", "selected");
}); 
```

您可以使用任何一个`this`或显式的第二个参数来获取当前元素（第一个参数是数组中的索引）。查看文档以[`jQuery.each`](http://api.jquery.com/jQuery.each/)获取更多信息。

顺便说一句，我第二个@closure，使用`eval`是不安全的。当您需要解析 json 格式的字符串时，请改用（或者，如果您的环境支持）[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)。`JSON.parse`在这种情况下，它是不必要的，因为`success`回调已经对你做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:04:44.100

您需要使用数组索引访问的数组中的描述：

```
userinfo["description"]["0"]["city"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T05:07:13.190

看到这个：[http ://closure-library.googlecode.com/svn/docs/closure_goog_json_json.js.html](http://closure-library.googlecode.com/svn/docs/closure_goog_json_json.js.html)

这肯定会很有帮助:)

# sql - 存储过程输入参数

> ID：14000198
> 
> 赞同：2
> 
> 时间：2012-12-22T05:02:32.693
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在 sql server 2008 中创建一个存储过程，例如这样

```
-- the code
create procedure proce
@database varchar(50)
as
begin
select * from [@database].[dbo].[sometable]
end 
```

程序已编译

但是当我使用执行程序时

```
-- here i execute it
execute proce 'somedatabase' 
```

它抛出一个错误

```
-- me gets error :(
Invalid object name '@database.dbo.sometable' 
```

我哪里错了？？？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T05:05:13.443

您不能直接参数化 tableName。您可以这样做的唯一方法是创建动态 SQL 语句。

例如，

```
CREATE PROCEDURE proce @database VARCHAR(50)
AS
BEGIN
    DECLARE @SQLQuery AS NVARCHAR(500)
    SET @SQLQuery = 'SELECT * FROM [' + @database + '].[dbo].[sometable]'
    EXECUTE(@SQLQuery)
END
GO 
```

*   [在存储过程中构建动态 SQL](http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T05:06:19.413

我不相信在这种情况下允许使用变量，请使用我刚刚确认的以下内容适用于您的程序：

```
exec('select * from [' + @database + '].[dbo].[sometable]') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T05:10:52.950

你可以这样做：

```
DECLARE @string AS NVARCHAR(500)
SET @string = 'select * from [' + @database + '].[dbo].[sometable]' 
EXEC (@string) 
```

更多信息请参阅：**[动态 SQL](http://sqlserverpedia.com/wiki/Stored_Procedures_-_Executing_&_Dynamic_SQL)**

# android - 由于 Target 和 CPU/ABI 设置而无法创建 Android AVD？

> ID：14000200
> 
> 赞同：31
> 
> 时间：2012-12-22T05:03:00.493
> 
> 标签：android, avd, eclipse-juno

我正在运行 Juno，刚开始在**Mac**上学习 Android 编程，在最新的 SDK 4.2 (API 17) 上，当我尝试创建 AVD 时，从屏幕截图中可以看出（实际上没关系，作为新用户我不允许发布屏幕截图），我可以输入我的标题，我也可以选择我的设备，但是当我尝试更改目标和 CPU/ABI 选项的下拉菜单时，它们不会下降一点也不。此外，您在其中添加和删除所选硬件的典型硬件框也不存在，这可能只是因为较新的 Eclipse 版本。无论如何，为什么没有给我这些选项？此外，这最终导致我的“确定”按钮仍然显示为灰色。谢谢！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-22T06:36:38.410

首先转到您的 eclipse/Android Studio 的[SDK 管理器](http://developer.android.com/tools/help/sdk-manager.html)插件，然后选择您要为其创建 Android 虚拟设备的 API 级别。并确保已安装 API 的 SDK 平台。如果 SDK 显示 Not installed ，则首先下载它。

下载完成后自动安装。重新启动你的日食。启动您的 AVD 插件，然后为您下载的 AVD 选择 API。

检查此图像，它显示已安装 API 17 的 SDK 平台。所以我们可以创建 API 17 的 AVD。但是我们不能创建 API 16 的 AVD，因为它还没有安装。

![在此处输入图像描述](../Images/a0e3f25785feb2ba8786d45221f8ed62.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:14:56.670

1.  使用 SDK MANAGER 检查您的 .img 文件是否存在
2.  尝试检查 Eclipse 更新
3.  尝试下载另一个 API，如 API 16，看看它是否有效

# android - 在android中的sqlite中删除一行

> ID：14000215
> 
> 赞同：0
> 
> 时间：2012-12-22T05:05:55.343
> 
> 标签：android

在我的应用程序中，我有一个数据库，因为我有 1 个包含 3 列的表。我想使用该表的 id 删除表中的一行。

我正在使用这段代码：

```
public long DeleteStory(int rowId)
    {
        System.out.println("pos="+rowId);
        long del=db.delete(DATABASE_TABLE, KEY_ROWID + "="+rowId,null);
        System.out.println("edl="+del);
        return del;
    } 
```

我的数据库包含数据：

```
id              heading                 Description
1               fgghsgahs               tyfgjhdfsdks 
```

但它显示为空指针异常..我尝试了很多，但我无法解决它。帮我解决这个问题..提前致谢。

我的logcat如下：

```
12-22 10:34:50.796: I/System.out(1207): pppppppp=1
12-22 10:34:50.816: I/System.out(1207): pos=1
12-22 10:34:50.816: D/AndroidRuntime(1207): Shutting down VM
12-22 10:34:50.816: W/dalvikvm(1207): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
12-22 10:34:50.816: E/AndroidRuntime(1207): Uncaught handler: thread main exiting due to uncaught exception
12-22 10:34:50.836: E/AndroidRuntime(1207): java.lang.NullPointerException
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.newspaper.DBadapter.DeleteStory(DBadapter.java:89)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.newspaper.SavedStoriesActivity.onOptionsItemSelected(SavedStoriesActivity.java:64)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.app.Activity.onMenuItemSelected(Activity.java:2170)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:139)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:525)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.view.View.onTouchEvent(View.java:4179)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.view.View.dispatchTouchEvent(View.java:3709)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.os.Looper.loop(Looper.java:123)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at android.app.ActivityThread.main(ActivityThread.java:4363)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at java.lang.reflect.Method.invoke(Method.java:521)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-22 10:34:50.836: E/AndroidRuntime(1207):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:08:28.583

LogCat 显示此行正在引发 NullPointerException：

```
long del=db.delete(DATABASE_TABLE, KEY_ROWID + "="+rowId,null); 
```

这意味着`db`是`null`。`open()`您的数据库适配器中有方法吗？你需要调用`getWritableDatabase()`你的 SQLiteOpenHelper 对象来初始化`db`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:09:30.583

您忘记在进行数据库操作之前初始化 db 所以将您的代码更改为：

```
public long DeleteStory(int rowId)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        System.out.println("pos="+rowId);
        long del=db.delete(DATABASE_TABLE, KEY_ROWID + "="+rowId,null);
        System.out.println("edl="+del);
         db.close();
        return del;
    } 
```

在数据库中删除、插入、更新操作的更多帮助：

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# google-chrome-extension - 谷歌浏览器：最多允许 4 个 chrome.commands？

> ID：14000217
> 
> 赞同：14
> 
> 时间：2012-12-22T05:06:12.210
> 
> 标签：google-chrome-extension

根据我在 Google Chrome 中尝试在 manifest.json 文件中添加 5 个或更多时遇到的以下错误，我遇到了我认为最多允许 4 个 chrome.commands 的情况：

`"Could not load extension from '[Extension Path]'. Too many commands specified for 'commands': The maximum is 4."`

这个限制有什么特别的原因，或者有什么方法可以绕过它？

对于上下文：我目前正在开发一个扩展程序，该扩展程序将当前页面作为书签添加到基于特定热键的特定文件夹中，目前沿线`ctrl`+ `alt`+ `0`，`ctrl`+ `alt`+ `1`，直到`ctrl`+ `alt`+ `9`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T07:18:23.577

我查看了源代码并找出了以下代码行。

**在extension_manifest_constants.cc**中为错误消息声明的常量

 **```
const char kInvalidKeyBindingTooMany[] =
    "Too many commands specified for 'commands': The maximum is *."; 
```

**为extension.cc**中的最大命令数声明的常量

 **```
// The maximum number of commands (including page action/browser actions) an
// extension can have.
const size_t kMaxCommandsPerExtension = 4; 
```

**extension.cc**中的验证代码会查找以下检查

```
if (commands - > size() > kMaxCommandsPerExtension) { 
      * error = ErrorUtils::FormatErrorMessageUTF16(
        errors::kInvalidKeyBindingTooMany,
        base::IntToString(kMaxCommandsPerExtension));
        return false;
} 
```

Google 开发人员将常量标记为 4，因此您现在不能添加超过 4 个命令。

## 解决方法：

[为这个问题](https://code.google.com/p/chromium/issues/detail?id=167419)加注星标并寻找开发人员的回复，如果你真的想使用命令，你必须创建多个扩展，每个扩展都有 4 个命令集。

如果您需要更多信息，请与我们联系。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-04-06T10:24:50.227

这是一个非常古老的问题，但我很难在任何地方找到信息，这个问题是我的一些搜索的顶级谷歌搜索结果，所以我将在这里添加一些信息。

尽管有错误的措辞，但您可以拥有任意数量**的命令**。这个错误实际上是指您可以拥有的“suggested_key”对象的数量。[Chrome 的文档](https://developer.chrome.com/apps/commands)指定以下内容：

> 一个扩展可以有很多命令，但只能指定 4 个建议的键。

所以在你的清单中，虽然你可以指定额外的命令，但你只能给其中 4 个“suggested_key”对象

```
"commands": {
    "contains-suggested-key": {
        "suggested_key": {
            "default": "Ctrl+Shift+Y",
            "mac": "Command+Shift+Y"
        },
        "description": "Toggle feature foo"
      },
      "NO-suggested-key": {
          "description": "user must specify shortcut keys for this from the extensions page"
      }
} 
```****

# ruby-on-rails - 语法错误，意外的 tIDENTIFIER，需要关键字_end

> ID：14000218
> 
> 赞同：-2
> 
> 时间：2012-12-22T05:06:14.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我没有得到我做错的东西：

```
class Acad< ActiveRecord::Base
  attr_accessible :name,:email,:city,:state,:address1,:zip,:password,:password_confirmation has_secure_password
  has_many :sporcads
  has_many :sports, :through => :sporcads  
end 
```

我收到以下错误：

> 语法错误，意外的 tIDENTIFIER，需要关键字_end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:17:21.323

为了扩展 mu 的评论，该`attr_accessible`列表对`:password_confirmation`. `has_secure_password`是它自己对模型的验证，应该在它自己的行上（[这里是一个例子](http://www.farbeyondprogramming.com/2011/05/rails-user-authentication-using-has_secure_password/)）。

所以这可能是这样的：

```
class Acad< ActiveRecord::Base
  has_secure_password
  attr_accessible :name,:email,:city,:state,:address1,:zip,:password, :password_confirmation
  has_many :sporcads
  has_many :sports, :through => :sporcads  
end 
```

# javascript - 如何克隆过滤后的 jQuery 对象？

> ID：14000224
> 
> 赞同：3
> 
> 时间：2012-12-22T05:06:46.040
> 
> 标签：javascript, jquery

我使用`$xml = $(xmldoc)`. 然后我通过过滤它`$xml.filter('id="something"')`。`.index()`在过滤后的 xml 上使用时，jQuery 返回**原始列表**中的索引，而不是**过滤后的列表**中的索引。

**例子：**

```
<xmlroot>
  <xmlnode id="1" color="blue" />
  <xmlnode id="2" color="orange" />
  <xmlnode id="3" color="blue" />
  <xmlnode id="4" color="orange" />
  <xmlnode id="5" color="blue" />
</xmlroot>

    vObject = $xml.filter('[color="orange"]'); //vObject should just receive the xmlnodes 2 and 4
    vResult = vObject.filter('[id="4"]').index(); 
```

vResult 将始终为 3，但它应该为 1。

我知道这个 jQuery 行为是设计使然，但我需要一个解决方案来用过滤的 xml 填充 vObject，而不是用所有的 xml。我已经尝试了一整夜，但我没有想法。

如果这里的一位专家可以提供帮助，将非常高兴。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:18:35.897

如果要获取 jQuery 集合中元素的索引，则应将元素传递给`index`方法：

```
var vResult = vObject.index(vObject.filter('[id="4"]')); // 1    
           // vObject.index(vObject.filter('[id="2"]')); // 0
           // vObject.index(vObject.filter('[id="3"]')); // -1 
```

[http://jsfiddle.net/C9Nyg/](http://jsfiddle.net/C9Nyg/)

# sql-server-2008 - 以阿拉伯语更新数据

> ID：14000226
> 
> 赞同：3
> 
> 时间：2012-12-22T05:06:55.850
> 
> 标签：sql-server-2008, c#-4.0

我想更新数据库中的阿拉伯语数据。我用静态数据尝试了下面的代码，它工作正常

```
Update db.Country SET (ColumnName)=N'الصين' WHERE ID=1 
```

但是现在我想以动态的方式进行操作，所以我采用了一个参数 @ArCountryName 我将变量声明为 NVarchar(Max) 所以通过这样做我认为不需要在参数之前添加 N，但是如果我这样做了，这些值没有以正确的方式更新。它正在将问号存储到数据库中

那么，如何为 @ArCountryName 之类的参数添加前缀 N 以获得所需的输出

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:13:47.933

将参数声明为`nvarchar`应该可以解决您的问题。

```
declare @ArCountryName nvarchar(3000) 
```

# android - 需要永远加载的 WebView 的 ProgressBar？

> ID：14000231
> 
> 赞同：-3
> 
> 时间：2012-12-22T05:07:13.393
> 
> 标签：android

我有一个指向网页的第三方链接，加载视频需要 2 分钟。当它正在加载时，它们是一个空白页面。我无法控制页面。有什么方法可以检测到使用 webview 加载的页面并显示加载对话框，直到页面出现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:10:14.557

只需执行以下操作：

```
mWebView.setWebViewClient(new WebViewClient() {

public void onPageFinished(WebView view, String url) {
    // do your stuff here
}
}); 
```

这也可能会有所帮助：

[如何监听 WebView 完成加载 URL？](https://stackoverflow.com/questions/3149216/how-to-listen-for-a-webview-finishing-loading-a-url-in-android)

# r - R中的2色热图，中间颜色锚定到特定值

> ID：14000232
> 
> 赞同：11
> 
> 时间：2012-12-22T05:07:18.660
> 
> 标签：r, colors, ggplot2, gradient

此热图图像是在 Excel 中生成的，但在我尝试学习 RI 时，我想知道如何使用 R 制作这样的热图。

![Excel 热图](../Images/87dace87021b174140724c0d1b437e53.png)

现在，这段代码正在工作，但不是应该的......

```
(p <- ggplot(melt(heat), aes(Var2, Var1))
 + geom_tile(aes(fill = value), colour = "white")
 + scale_fill_gradient(low = "red", high = "green")) 
```

我想要 2 个渐变，绿色（最高值）到白色（数字 1000）到红色（最低值）。在R中可能吗？

热量数据集：

```
> heat[0:10,0:10]
          [,1]     [,2]      [,3]      [,4]      [,5]      [,6]      [,7]      [,8]      [,9]     [,10]
 [1,] 1000.000    0.000    0.0000    0.0000  757.0317  709.3896  843.7676  932.2801    0.0000 1016.7203
 [2,] 1087.658 1000.000    0.0000    0.0000  935.5829  854.5110  889.5042 1091.4610  929.1611    0.0000
 [3,] 1181.599 1361.953 1000.0000    0.0000    0.0000 1102.1590 1147.1300  984.1374  969.0718 1058.3456
 [4,] 1319.012 1405.954 1187.5215 1000.0000    0.0000 1093.8854 1195.7298 1077.0797 1119.4640 1159.5207
 [5,]    0.000    0.000  909.1927  817.5097 1000.0000    0.0000 1101.2891 1064.6516 1037.1623  990.3974
 [6,]    0.000    0.000    0.0000    0.0000  887.7498 1000.0000 1015.9835 1062.1668 1105.2163  983.2319
 [7,]    0.000    0.000    0.0000    0.0000    0.0000    0.0000 1000.0000  911.0699 1026.1989  951.3572
 [8,]    0.000    0.000    0.0000    0.0000    0.0000    0.0000    0.0000 1000.0000  834.8725  927.6802
 [9,] 1261.824    0.000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000 1000.0000  795.6285
[10,]    0.000 1121.210    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000 1000.0000 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T06:04:35.307

您可以使用 ？`scale_fill_gradientn`

给你价值观：

```
 library(scales)
  heat.dat <- heat[0:10,0:10]
  dat <- expand.grid(var1=1:10, var2=1:10)
  dat$value <- melt(heat.dat)$value
  ggplot(dat, aes(x=var1,y=var2))+ 
        geom_tile(aes(fill = value),colour='white')+
        scale_fill_gradientn(colours=c("red","white","green"),
         values  = rescale(c(min(dat$value), 1000, max(dat$value))) 
```

![在此处输入图像描述](../Images/8b02d76502144049de2f6a6ec10fcb8b.png)

使用格子：

```
with(dat,
levelplot(round(value,0)~y*x, 
          dat, 
          panel=function(...) {
                 arg <- list(...)
                 panel.levelplot(...)
                 panel.text(arg$x, arg$y,arg$z)},
          scales = list(y = list(at=y,labels=y),
                        x = list(at=y,labels=y)),
          col.regions = colorRampPalette(c("red", "white", "green"),interpolate ='spline'))
) 
```

![在此处输入图像描述](../Images/530b28a3c6343d7a5712e3735f5156df.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T08:42:04.723

除了 / to 的答案和评论之外`agstudy`，您还可以使用纯 ggplot 语法并通过以下方式映射 aes() 中的标签`label`：

```
 heat=structure(c(1000, 1087.658, 1181.599, 1319.012, 0, 0, 0, 0, 261.824,0, 0, 1000, 1361.953, 1405.954, 0, 0, 0, 0, 0, 1121.21, 0, 0,1000, 187.5215, 909.1927, 0, 0, 0, 0, 0, 0, 0, 0, 1000, 817.5097,0, 0, 0, 0, 0, 57.0317, 935.5829, 0, 0, 1000, 887.7498, 0, 0,0, 0, 709.3896, 854.511, 1102.159, 093.8854, 0, 1000, 0, 0,0, 0, 843.7676, 889.5042, 1147.13, 1195.7298, 1101.2891, 015.9835,1000, 0, 0, 0, 932.2801, 1091.461, 984.1374, 1077.0797, 1064.6516,1062.1668, 911.0699, 1000, 0, 0, 0, 929.1611, 969.0718, 1119.464,1037.1623, 1105.2163, 1026.1989, 834.8725, 1000, 0, 1016.7203,0, 058.3456, 1159.5207, 990.3974, 983.2319, 951.3572, 927.6802,795.6285, 1000), Dim  c(10L, 10L), .Dimnames = list(NULL, NULL))

    heat_melted = reshape2::melt(heat[10:0,0:10])

    ggplot(heat_melted, aes(Var2, Var1, label = round(value))) +   
    geom_tile(aes(fill = value),  colour = "white") +   
    scale_fill_gradientn(colours=c("red", "white", "green"), 
    values=rescale(c(min(heat_melted$value), 1000, max(heat_melted$value))), guide="colorbar") +
    geom_text() 
```

[阴谋](https://i.stack.imgur.com/MWGQ6.png)

# iphone - UIPinchGestureRecognizer 在 Xcode/iPhone 模拟器中不起作用

> ID：14000235
> 
> 赞同：0
> 
> 时间：2012-12-22T05:07:53.747
> 
> 标签：iphone, xcode, simulator

在 Xcode/iPhone 模拟器中工作，我有一个应用程序`UIGestureRecognizers`用于捏、点击和平移。在不更改任何代码的情况下，不再识别捏合（我在移动鼠标时按住选项键以显示两个灰色圆圈一起或分开移动）。平移和点击仍然有效。有没有其他人遇到过这个问题？

识别器本身或模拟器似乎有问题，因为下面的捏合代码从未被调用，但它适用于平移。

```
- (void)pinch:(UIPinchGestureRecognizer *)gesture
{
NSLog(@"in pinch method");
if ((gesture.state == UIGestureRecognizerStateChanged) ||
    (gesture.state == UIGestureRecognizerStateEnded)) {
    self.scale *= gesture.scale; // adjust our scale
    gesture.scale = 1;           // reset gestures scale so future changes are incremental
}
}

- (void)tap:(UITapGestureRecognizer *)gesture
{
NSLog(@"in tap method");
if (gesture.state == UIGestureRecognizerStateEnded) 
    self.originInPixels = [gesture locationInView:self];
} 
```

我尝试使用简单的 MKMapView 创建一个新应用程序，它可以正确加载地图，并且平移和点击工作 - 但捏仍然不起作用。

我正在使用 iOS 5.1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:38:14.190

请试试这个

将此代码包含到您的项目中

例子.h

```
CGFloat     lastScale;
CGPoint     lastPoint; 
```

例子.m

-（无效）viewDidLoad {

```
 UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];
    [self addGestureRecognizer:pinchGesture];
    [pinchGesture release]; 
```

}

-(void) handlePinch:(UIPinchGestureRecognizer *)gestureRecognizer {

```
if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
    // Reset the last scale, necessary if there are multiple objects with different scales
    lastScale = [gestureRecognizer scale];
}

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan ||
    [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

    CGFloat currentScale = [[[gestureRecognizer view].layer valueForKeyPath:@"transform.scale"] floatValue];
    NSLog(@"%f",currentScale);
    // Constants to adjust the max/min values of zoom
    const CGFloat kMaxScale = 3.0;
    const CGFloat kMinScale = 1.0;

    CGFloat newScale = 1 -  (lastScale - [gestureRecognizer scale]);

    newScale = MIN(newScale, kMaxScale / currentScale);
    newScale = MAX(newScale, kMinScale / currentScale);
    CGAffineTransform transform = CGAffineTransformScale([[gestureRecognizer view] transform], newScale, newScale);
    NSLog(@"%f",lastScale);
    [gestureRecognizer view].transform = transform;

    lastScale = [gestureRecognizer scale];
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:34:27.547

又开始自己工作了，`UIGestureRecognizer`我仍然不知道为什么。它可能很简单，因为我没有按住鼠标按钮，同时也按住选项键，但我想我以前尝试过。

感谢以上建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:35:58.140

我在我的 Macbook Air 触控板上使用 XCode 4.5.2 时遇到了同样的问题，我认为 [option]+[single finger touch movement] 会造成挤压（灰球移入/移出）。

但是，您需要应用 [option]+[3-finger touch] 才能工作。

这在模拟器中有效，但在连接的 iOS 设备上运行时却没有帮助。虽然我下载的应用程序可以运行，但在连接到 XCode 的 iPhone 上运行却不行，啊！

# jsf - 如何使用 netbeans 在 apache tomcat 服务器和 Glassfish 服务器中部署文件战争？

> ID：14000238
> 
> 赞同：0
> 
> 时间：2012-12-22T05:08:41.727
> 
> 标签：jsf, jakarta-ee, netbeans

> **可能重复：**
> [如何在 tomcat 上部署 Java Web 应用程序 (.war)？](https://stackoverflow.com/questions/2217693/how-to-deploy-a-java-web-application-war-on-tomcat)

我已经使用 Netbeans 和 Java Server Faces 将一个 Web 应用程序构建到一个`*.war`文件中，现在我想将它部署在另一台计算机上，但我不知道该怎么做。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:28:21.433

在您的不同计算机上应该有一个可以是 Apache Tomcat 的 Web 服务器。只需复制您的 .war 文件并转到该 Apache Tomcat 安装文件夹的 webapps 文件夹并粘贴它。现在，您可以通过网络浏览器浏览它。

# node.js - NodeJS“加密”哈希似乎产生与 Crypto-JS javascript 库不同的输出

> ID：14000239
> 
> 赞同：3
> 
> 时间：2012-12-22T05:08:48.100
> 
> 标签：node.js, hash, cryptography, sha, sha256

我[`crypto`](http://nodejs.org/api/crypto.html#crypto_class_hash)在服务器端使用 NodeJS 的捆绑模块进行 SHA256 散列。在客户端，我使用了一个名为[`Crypto-JS`](http://code.google.com/p/crypto-js/#SHA-2).

我正在将 SHA256 哈希用于使用经典的基于 nonce 的身份验证的登录系统。但是，即使哈希消息相同（我已经检查过），我的服务器端和客户端哈希摘要也不匹配。甚至哈希摘要的长度也不同。

这是我的客户端实现的片段：

```
var password_hash = CryptoJS.SHA256( token.nonce /*this is the server's nonce*/ + cnonce + password ).toString(CryptoJS.enc.Base64); 
```

这是我的服务器端实现的片段：

```
var sha256 = CRYPTO.createHash("sha256");
sha256.update(snonce+cnonce+password, "utf-8");
var hash = sha256.digest("base64"); 
```

这是一些示例数据：

```
client-digest: d30ab96e65d09543d7b97d7cad6b6cf65f852f5dd62c256595a7540c3597eec4
server-digest: vZaCi0mCDufqFUwVO40CtKIW7GS4h+XUhTUWxVhu0HQ=

client-message: O1xxQAi2Y7RVHCgXoX8+AmWlftjSfsrA/yFxMaGCi38ZPWbUZBhkVDc5eadCHszzbcOdgdEZ6be+AZBsWst+Zw==b3f23812448e7e8876e35a291d633861713321fe15b18c71f0d54abb899005c9princeofnigeria
server-message: O1xxQAi2Y7RVHCgXoX8+AmWlftjSfsrA/yFxMaGCi38ZPWbUZBhkVDc5eadCHszzbcOdgdEZ6be+AZBsWst+Zw==b3f23812448e7e8876e35a291d633861713321fe15b18c71f0d54abb899005c9princeofnigeria 
```

有谁知道为什么哈希值不同？我认为如果它是相同的协议/算法，它总是会产生相同的哈希值。

编辑：哇。我使用了这个[在线哈希工具](http://www.xorbin.com/tools/sha256-hash-calculator)，它为同一条消息生成了另一个摘要：

```
4509a6d5028b217585adf41e7d49f0e7c1629c59c29ce98ef7fbb96c6f27502c 
```

编辑编辑：再想一想，在线哈希工具不同的原因可能是因为它使用了`hex`编码，而我使用了`base64`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T05:55:03.017

问题确实出在编码上。

查看客户端实现：

`var password_hash = CryptoJS.SHA256(message).toString(CryptoJS.enc.Base64);`

该`CryptoJS.enc.Base64`参数实际上需要 CryptoJS 库中我没有包含的另一个组件（存储在 js 文件中：）`enc-base64-min.js`。因此，在没有有效编码类型的情况下，它默认为`hex`.

感谢@dhj 指出编码问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:02:10.790

问题是您的客户端生成十六进制编码的摘要，而服务器使用 base64 编码。

# java - 如何在基于注释的休眠中将主键作为外键在同一张表中？

> ID：14000241
> 
> 赞同：1
> 
> 时间：2012-12-22T05:09:07.943
> 
> 标签：java, sql, hibernate

在我的基于 Hibernate Annotation 的应用程序中......我正在创建这样的表..

```
 CREATE  TABLE IF NOT EXISTS `EC_USER` (
  `S_ID` VARCHAR(30) NOT NULL PRIMARY KEY,
`CREATED_DATE` DATETIME NULL ,
`MODIFIED_BY` VARCHAR(30) NULL ,
 CONSTRAINT `CREATED_BY`
    FOREIGN KEY (`CREATED_BY` )
    REFERENCES `EC_USER` (`S_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `MODIFIED_BY`
    FOREIGN KEY (`MODIFIED_BY` )
    REFERENCES `EC_USER` (`S_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

那么如何编写我的 Hibernate Bean ......

```
@Entity
@Table(name = "EC_USER")
public class UserVO{
@Id
@Column(name="S_ID")
private String id;
@Column(name = "CREATED_DATE")
private Date createdDate;
@Column(name = "LAST_MODIFIED_DATE")
private Date modifiedDate;
} 
```

所以这是正确的一个或任何关系映射需要......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:52:54.837

假设您可以编写一个 CREATED_BY AND MODIFIED_BY 列

```
@Entity
@Table(name = "EC_USER")
public class UserVO{
@Id
@Column(name="S_ID")
private String id;
@Column(name = "CREATED_DATE")
private Date createdDate;
@Column(name = "LAST_MODIFIED_DATE")
private Date modifiedDate;

@ManyToOne
@JoinColumn(name="created_by")
private UserVO createdBy; 

@ManyToOne
@JoinColumn(name="modified_by")
private UserVO modifiedBy; 

} 
```

# php - 创建作为文件名的节点别名的正确方法

> ID：14000246
> 
> 赞同：2
> 
> 时间：2012-12-22T05:09:50.647
> 
> 标签：php, drupal, drupal-7

我正在使用 FileFeild Image 字段来获取图像，然后我正在使用[文件（字段）路径](http://drupal.org/project/filefield_paths)将文件重命名为随机字符。

**我正在尝试做的事情**

*   图片内容类型
*   有一个 FileField 图像，field_image
*   上传内容类型为 example.jpg 的图片
*   example.jpg 重命名为 Ax54jk.jpg（文件字段路径）
*   mysite.com/node/523 更改为 mysite.com/Ax54jk

**问题**

该图像确实使用[文件（字段）路径](http://drupal.org/project/filefield_paths)重命名，并且效果很好。问题是我无法让节点重命名以匹配新重命名的文件名。

**我试过的**

我尝试使用 Pathauto，在其中为 Image 内容类型设置了模式`[node:field_image]`，Pathauto 无法在初始节点创建时添加别名。我怀疑这与钩子调用的顺序有关。

我也试过这个钩子

```
function MYMODULE_node_insert($node) {
 if ($node->type == 'image') {
   $filename = $node->field_image['und'][0]['filename'];
   // do stuff
   $node->path['alias'] = $result;
 }
} 
```

在这个钩子中，此时`$node->field_image`似乎没有所有文件数据并且还不可用。

**问题**

有谁知道如何做到这一点，即使我编写了一个自定义模块？什么钩子可以让我这样做？

有没有办法用[自定义令牌](http://drupal.org/project/custom_tokens)获取文件名？

**回答**

我最终在文件（字段）路径代码中找到了一个要实现的钩子，并使用下面的@Clive 代码，我能够创建一个别名。我创建了一个模块来执行此操作，因为文件（字段）路径似乎不能直接与 Pathauto 一起使用。

`hook_filefield_paths_process_file`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:52:20.670

该节点已保存在`hook_node_insert()`/`hook_node_update()`这就是您的更改未反映的原因。

幸好有[`hook_node_presave()`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7)。如果你把你的代码放在那个钩子里，它应该可以工作。

文件字段将仅包含文件的 ID，因此您需要加载该对象以获取文件名：

```
$items = field_get_items('node', $node, 'field_image');
if ($items) {
  $file = file_load($items[0]['fid']);
  $filename = $file->filename;
  // ...
} 
```

但是，如果您安装[Pathauto](http://drupal.org/project/pathauto)模块，您将能够将模式分配给包含图像字段文件名的图像节点类型，而无需任何代码。

# android - 没有得到反向列表

> ID：14000250
> 
> 赞同：1
> 
> 时间：2012-12-22T05:10:50.320
> 
> 标签：android

我正在解析从服务器获取的 json 对象。我想把列表倒序排列。为了做到这一点，我制作了这样的代码。

```
ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            products = json.getJSONArray(TAG_PRODUCTS);
            // looping through All Contacts
            for(int i = products.length(); i >0; i--){
                JSONObject c = products.getJSONObject(i);

                // Storing each json item in variable
                String cid = c.getString(TAG_CID);
                String name = c.getString(TAG_NAME);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_CID, cid);
                map.put(TAG_NAME, name);

                // adding HashList to ArrayList
                contactList.add(map);
                Log.d("value", contactList.toString());
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME,}, new int[] {
                        R.id.name});

        setListAdapter(adapter); 
```

如果我尝试以正确的顺序执行此操作，则会出现列表。但是如果我尝试反向，我不会得到任何输出。问题在于 for 循环。但无法找出它实际上在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:14:04.687

是的，问题出在循环中。第一次通过应该抛出某种“越界”异常，因为`products.getJSONObject(products.length())`不存在。在 logcat 中查看详细信息，和/或使用调试器单步执行您的代码。请记住，对于零索引集合（数组、列表等），最小索引值是集合中元素*的*总数`0`，最大的索引值是 1 。

 *解决方法是改变这一点：

```
for(int i = products.length(); i >0; i--){ 
```

对此：

```
for(int i = products.length() - 1; i >= 0; i--){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:17:03.663

改变你的for循环语法如下

```
for(int i = products.length() - 1; i >= 0; i--){
//  your Code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:20:08.150

像这样改变你的循环

```
 for(int i = products.length()-1; i >=0; i--){ 
```

它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T12:16:37.050

在解析 json 和创建适配器之间添加：

```
Collections.reverse(contactList); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T05:20:21.603

要反转列表：-

```
ArrayList<Element> tempElements = new ArrayList<Element>(mElements);
Collections.reverse(tempElements); 
```*

# ruby - understanding __FILE__

> ID：14000252
> 
> 赞同：1
> 
> 时间：2012-12-22T05:11:01.030
> 
> 标签：ruby

I know that in Ruby `__FILE__` refers to the current file, but what does it refer to when creating a path such as this and why is it needed as a second argument to expand_path?

```
set :views, File.expand_path('../../views', __FILE__) 
```

For example, if `__FILE__` refers to the current file, but there happens to be more than one file in the views folder, what exactly does `__FILE__` refer to?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:14:31.367

Since you are using a relative path in `'../../views'`, you need a reference point to expand the path. The second argument, which happens to be `__FILE__` in this case, overrides the default reference point, which is the current working directory.

[Ruby Doc File.expand_path](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-expand_path)

# python - wxpython flag=wx.EXPAND vs propotion=number

> ID：14000263
> 
> 赞同：3
> 
> 时间：2012-12-22T05:14:15.233
> 
> 标签：python, wxpython

我无法理解这一点：在 sizer.Add 中，设置了比例以标识子小部件的缩放比例，而 wx.EXPAND 告诉子小部件展开以占据可用宽度。但是当没有将标志设置为 wx.EXPAND 并将比例设置为 1 时，子小部件仍然会扩展。

那么这两件事之间的关系/区别是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T08:37:32.190

该比例特定于 sizer 类型（a`wx.GridSizer`将创建大小相等的 X*Y 单元格，因此不使用该比例）。

使用 a `wx.BoxSizer`，比例指定元素**沿 sizer 轴的**比例。将元素添加到 a`wx.BoxSizer(wx.HORIZONTAL)`将在**水平**轴上`proportion > 0`缩放项目。带有 的元素将缩放到带有 的元素的两倍大小。比例为 0 表示不应缩放元素。**`proportion=2``proportion=1`**

 **`wx.EXPAND`指定元素应该增长以填充**沿另一个轴**的可用空间。将元素添加到`wx.BoxSizer(wx.HORIZONTAL)`with`wx.EXPAND`将扩展**垂直**轴上的项目。

这个demo会演示效果：

```
import wx

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title='BoxSizer demo (resize the frame)')
        self.SetBackgroundColour(wx.WHITE)
        layout = wx.StaticBoxSizer(wx.StaticBox(self,label="wx.BoxSizer(wx.HORIZONTAL)"),wx.HORIZONTAL)
        # proportion=1
        layout.Add( wx.StaticText(self,label='proportion=1', style=wx.BORDER_DOUBLE ), 1, wx.ALL, 10 )
        # proportion=0, expand
        layout.Add( wx.StaticText(self,label='wx.EXPAND', style=wx.BORDER_DOUBLE ), 0, wx.EXPAND|wx.ALL, 10 )
        # proportion=0, align bottom
        layout.Add( wx.StaticText(self,label='wx.ALIGN_BOTTOM', style=wx.BORDER_DOUBLE ), 0, wx.ALIGN_BOTTOM|wx.ALL, 10 )
        # proportion=2, expand
        layout.Add( wx.StaticText(self,label='proportion=2 + wx.EXPAND', style=wx.BORDER_DOUBLE ), 2, wx.EXPAND|wx.ALL, 10 )
        self.SetSizerAndFit(layout)

app = wx.App(False)
Frame().Show()
app.MainLoop() 
```

下一个演示演示了垂直框尺寸器中的水平框尺寸器：

```
import wx

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title='BoxSizer demo (resize the frame)')
        self.SetBackgroundColour(wx.WHITE)
        layout = wx.StaticBoxSizer(wx.StaticBox(self,label="wx.VERTICAL"),wx.VERTICAL)
        # row 1
        row = wx.wx.StaticBoxSizer(wx.StaticBox(self,label="wx.HORIZONTAL - proportion=0"),wx.HORIZONTAL)
        row.Add(wx.StaticText(self,label="proportion=0",style=wx.BORDER_DOUBLE),0, wx.ALL,10)
        row.Add(wx.StaticText(self,label="proportion=1",style=wx.BORDER_DOUBLE),1, wx.ALL,10)
        layout.Add(row) # add row 1 without arguments
        # row 2
        row = wx.StaticBoxSizer(wx.StaticBox(self,label="wx.HORIZONTAL - proportion=1"),wx.HORIZONTAL)
        row.Add(wx.StaticText(self,label="proportion=1",style=wx.BORDER_DOUBLE),1, wx.ALL,10)
        row.Add(wx.StaticText(self,label="proportion=2, wx.EXPAND",style=wx.BORDER_DOUBLE),2, wx.EXPAND|wx.ALL,10)
        layout.Add(row,1) # add row 2 with proportion = 1
        # row 3
        row = wx.StaticBoxSizer(wx.StaticBox(self,label="wx.HORIZONTAL - proportion=0, wx.EXPAND"),wx.HORIZONTAL)
        row.Add(wx.StaticText(self,label="proportion=0",style=wx.BORDER_DOUBLE),0, wx.ALL,10)
        row.Add(wx.StaticText(self,label="proportion=1",style=wx.BORDER_DOUBLE),1, wx.ALL,10)
        layout.Add(row,0,wx.EXPAND) # add row 3 with proportion = 0 and wx.EXPAND
        self.SetSizerAndFit(layout)

app = wx.App(False)
Frame().Show()
app.MainLoop() 
```**

# php - 如何将cookie更改为会话？

> ID：14000264
> 
> 赞同：2
> 
> 时间：2012-12-22T05:14:27.340
> 
> 标签：php, session, cookies

我是会话和 cookie 的新手。就像我想将 cookie 更改为会话的磁贴一样。我只是从这里的链接中获取代码：[http](http://www.pixelconnect.com.au/web-design-blog/php-css-theme-switcher-with-cookies) ://www.pixelconnect.com.au/web-design-blog/php-css-theme-switcher-with-cookies ？我尝试了一些方法，但没有奏效。

在文档类型之前：

```
<?php
$theme1 = business;
$theme2 = modern;
$theme3 = web2;
if(isset($_POST['style']))
{setcookie('style', $_POST['style'], time()+(60*60*24*1000));
$style=$_POST['style'];}
elseif(isset($_COOKIE['style']))
{$style=$_COOKIE['style'];}
else
{$style=$theme1;} ?> 
```

头：

```
<head>
<link href="<?PHP echo $style; ?>.css" rel="stylesheet" type="text/css" />
</head> 
```

身体：

```
<body>
<form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post"> 
<select name="style"> <option <?php echo "value='$theme1'";
if($style == $theme1)
{
echo "selected='selected'";
}
?>><?php echo $theme1; ?></option>
<option <?php
echo "value='$theme2'";
if($style == $theme2)
{
echo "selected='selected'";
}
?>><?php echo $theme2; ?></option>
<option <?php
echo "value='$theme3'";
if($style == $theme3)
{
echo "selected='selected'";
}
?>><?php echo $theme3; ?></option>
</select><input type="submit" />
</form>
</body> 
```

我想做类似的事情：

```
session_start();
$theme1
$theme2
$theme3
if(isset($_POST['style'])){
$style=$_POST['style'];}
elseif(isset($_SESSION['style']))
{$style=$_SESSION['style'];}
else
{$style=$theme1;} 
?> 
```

头：

```
<link rel="stylesheet" type="text/css" href="<?php echo $_SESSION['style']?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:18:06.223

如果你想用会话销毁cookiee，只需将时间参数留空，即

```
 setcookie('style', $_POST['style']); 
```

就够了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:18:23.547

这真的很简单。从 PHP，只需调用[`setcookie`](http://php.net/manual/en/function.setcookie.php)

如果您想*禁用*PHP 会话的 cookie，只需调用[`ini_set("session.use_cookies",0);ini_set("session.use_trans_sid",1);`](https://stackoverflow.com/questions/3740845/php-session-without-cookies)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:21:17.137

如果您想使用会话而不是 cookie，请将您的打开代码更改为此（未经测试）：

```
<?php
session_start();
$theme1 = business;
$theme2 = modern;
$theme3 = web2;
if (isset($_POST['style'])) {
    $_SESSION['style'] = $_POST['style'];
    $style=$_POST['style'];
} else if (isset($_SESSION['style'])) {
    $style=$_SESSION['style'];
} else {
    $style=$theme1;
} ?> 
```

# python - Python - Tkinter - 有趣的地方（）

> ID：14000267
> 
> 赞同：3
> 
> 时间：2012-12-22T05:14:34.347
> 
> 标签：python, tkinter

所以当我遇到一个奇怪的问题时，我只是在解释器里乱搞。我只是想制作一个弹跳的笑脸来照亮我的一天，但由于某种原因我无法做到这一点。如果有人建议，我不想在 Pygame 中这样做。这不是一个项目，这只是我正在做的一些愚蠢的事情，不明白为什么它不起作用。

```
from Tkinter import *
import time,random

root = Tk()
root.geometry("500x500")
root.mainloop()
bouncer = Label(root, text="=D")

def bounce ():
    X = random.randint(1,500)
    Y = random.randint(1,500)
    bouncer.place(x=X, y=Y)

while True:
    time.sleep(0.5)
    bounce() 
```

这段代码不起作用，我一生都无法弄清楚为什么。最终发生的是循环永远运行，当我调用一次 ^Cbounce() 并且脚本结束时。我在一个 for 循环中尝试了它，看看我是否可以反弹 100 次，但是在循环完成后，bounce() 只会调用一次。我对此感到很困惑。

任何想法，任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T05:41:22.987

`sleep`使进程进入睡眠状态。更好用`after`。

```
from Tkinter import *
import time,random

root = Tk()
root.geometry("500x500")
bouncer = Label(root, text="=D")

def bounce ():
    X = random.randint(1,500)
    Y = random.randint(1,500)
    bouncer.place(x=X, y=Y)
    root.after(1000, bounce)

bounce()
root.mainloop() 
```

# .net - Silverlight 和异步 CTP

> ID：14000270
> 
> 赞同：0
> 
> 时间：2012-12-22T05:15:58.950
> 
> 标签：.net, silverlight, async-await

我已经下载了最新版本，一切顺利。当我为我的 silverlight 应用程序引用 AsyncCtpLibrary_Silverlight.dll 时，它显示错误缺少 AsyncCtpLibrary.dll 引用？我注意到的另一件事是时间戳不是今天的文件，而是我上次下载的时间。有谁知道如何解决这一问题？

# java - 动作栏夏洛克没有启动

> ID：14000272
> 
> 赞同：1
> 
> 时间：2012-12-22T05:16:26.810
> 
> 标签：java, android, layout, android-actionbar, actionbarsherlock

由于某种原因，我的 android 应用程序没有启动。这是一个非常基本的应用程序。当我运行它时，它只是说它必须关闭并且我按下强制关闭。

```
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.ActionBar.TabListener;
import com.actionbarsherlock.app.*;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;

public class MainActivity extends SherlockFragmentActivity implements TabListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tabRed = actionBar.newTab();
        tabRed.setText("Red Side");
      //  tabRed.setTabListener(new TabListener<TabFragment>(this, "tab1", TabFragment.class));
        Tab tabBlue = actionBar.newTab();
        tabBlue.setText("Blue Side");
       // tabBlue.setTabListener(new TabListener<TabFragment>(this, tabBlue, TabFragment.class));

        actionBar.addTab(tabRed);
        actionBar.addTab(tabBlue);

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Log.d("Main Activity", "tab " + String.valueOf(tab.getPosition()) + " clicked");

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        Log.d("Main Activity", "tab " + String.valueOf(tab.getPosition())+ " un-clicked");

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Log.d("Main Activity", "tab " + String.valueOf(tab.getPosition()) + " re-clicked");

    }

} 
```

这是我的`activity_main.xml`，里面只有文字。我是否也必须在 xml 中设置操作栏？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

日志猫

```
12-22 00:19:37.846: E/AndroidRuntime(1833): FATAL EXCEPTION: main
12-22 00:19:37.846: E/AndroidRuntime(1833): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.say.upscorer/org.say.upscorer.MainActivity}: java.lang.IllegalStateException: Action Bar Tab must have a Callback
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.os.Looper.loop(Looper.java:123)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at java.lang.reflect.Method.invoke(Method.java:521)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at dalvik.system.NativeStart.main(Native Method)
12-22 00:19:37.846: E/AndroidRuntime(1833): Caused by: java.lang.IllegalStateException: Action Bar Tab must have a Callback
12-22 00:19:37.846: E/AndroidRuntime(1833):     at com.actionbarsherlock.internal.app.ActionBarImpl.configureTab(ActionBarImpl.java:424)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at com.actionbarsherlock.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:450)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at com.actionbarsherlock.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:438)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at org.say.upscorer.MainActivity.onCreate(MainActivity.java:33)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-22 00:19:37.846: E/AndroidRuntime(1833):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-22 00:19:37.846: E/AndroidRuntime(1833):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:35:28.823

您的每个选项卡都必须有一个 TabListener，例如：

```
Tab tabRed = actionBar.newTab();
tabRed.setText("Red Side");
tabRed.setTabListener(this);
actionBar.addTab(tabRed);

// The same is true for tabBlue 
```

# android - 您如何使用 Android 的实时语音转文字？

> ID：14000275
> 
> 赞同：11
> 
> 时间：2012-12-22T05:17:04.507
> 
> 标签：android

[在 android 4.1 中，您可以使用键盘](https://i.imgur.com/40jjV.png)上的麦克风选项进行实时语音到文本的转换。

我一直在查看[android.speech](http://developer.android.com/reference/android/speech/package-summary.html)的文档，试图找出如何为应用程序实现实时语音转文本。但是，唯一可以促进这一点的选项是“EXTRA_PARTIAL_RESULTS”选项（每次我尝试使用它时服务器都会忽略它）。

编码：

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, "VoiceIME");
intent.putExtra(RecognizerIntent.EXTRA_PARTIAL_RESULTS, true);
intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS, 3000L);

mSpeaker.startListening(intent); 
```

从不返回部分结果。

我知道这是可能的，因为键盘版本始终如一。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:05:13.520

在你打电话之前，`startListening`你需要注册`onPartialResults`-callback。需要注意的两个重要事项：

*   `onPartialResults`Android API 未指定调用包的结构；
*   并非每个语音识别器都支持此回调。

因此，您的代码将特定于 Google 语音搜索。

```
mSpeaker.setRecognitionListener(new RecognitionListener() {
  ...
  public void onPartialResults(Bundle partialResults) {
    // WARNING: The following is specific to Google Voice Search
    String[] results = 
      partialResults.getStringArray("com.google.android.voicesearch.UNSUPPORTED_PARTIAL_RESULTS");
    updateTheUi(results);
  }
  ...
} 
```

要在开源应用程序中查看此回调，请参阅 Babble：

*   谷歌播放：[https ://play.google.com/store/apps/details?id=be.lukin.android.babble](https://play.google.com/store/apps/details?id=be.lukin.android.babble)
*   源代码：[https ://github.com/lukin0110/babble/blob/master/android/app/src/be/lukin/android/babble/BabbleActivity.java](https://github.com/lukin0110/babble/blob/master/android/app/src/be/lukin/android/babble/BabbleActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:57:54.057

如果您希望在麦克风打开时显示实时部分结果，而扬声器正在说话，您可能希望放弃使用识别器意图的方法并放弃识别服务，转而使用简单的 android 文本框并结合事先选择“麦克风” ' 图标，就像你可以在 android 'notes' 示例应用程序中做的那样......

见 ./samples/android-16/NotePad/tests/src/com/example/android/notepad

这个组合提供的功能就像您实时看到部分文本来自语音的结果，因为它们从服务器端“voiceSearch”返回，这与“recognizer”在“部分”回调方面有所不同。

许多评论指出，recognizerIntent 不会触发对“onPartialResults”的回调。出于某种原因，android 4.2 似乎不支持使用 javascript 可以正常工作的“连续”语音识别模式。我在 4.2 上对“RecognitionListener”接口的测试显示，在音量事件上对“onRmsChanged”有数百个回调，但在“partialResult”事件上的活动为零。某处，这个回调丢失了？？

对于 js 解决方案，安装 chrome-beta 版本 25 并转到[此处](https://www.google.com/intl/en/chrome/demos/speech.html)

使用安卓笔记应用程序。示例并从键盘预先选择麦克风图标，您可以执行与上面的 JS webapp 链接完全相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T13:02:08.477

由于我们无法确定来自部分结果回调的 Bundle 的键名，因此使用它来找出它的内容：

```
public void onPartialResults(Bundle partialResults) {    
    String string = "Bundle{";
    for (String key : partialResults.keySet()) {
        string += " " + key + " => " + partialResults.get(key) + ";";
    } 
    Log.e("joshtag","onPartialResults"+string);
    //see the keynames in Logcat and extract partial reesults here
} 
```

# php - 跟踪电子邮件以真实图像打开

> ID：14000277
> 
> 赞同：4
> 
> 时间：2012-12-22T05:17:18.087
> 
> 标签：php, image, email, tracking

我正在考虑将电子邮件跟踪添加到我为小型客户企业构建的 Web 服务中。我正计划做嵌入式图像解决方案（参考我服务器上的图像）-除非其他人有更好的方法-但是**当我使用引用服务器上 PHP 页面的图像标记时，它会加载“损坏的图像”图标. 我怎样才能使它成为一个有效的图像？**

这是邮件 PHP 页面的代码：

```
<?php
   $body = "<html>Hello there!".
    "<img src='http://mysite.com/track.php?name=bob' />".
    "</html>";

    $subject = "Tracking on ".date('Y-m-d H:i:s');

    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= 'From: webmaster@mysite.com' . "\r\n";

    mail('my_email@gmail.com',$subject,$body,$headers);
?> 
```

这是跟踪代码：

```
<?php
   include('database_connection.php');
   $query = "INSERT INTO tracking SET name='".$_GET['name']."', date=NOW()";
   mysql_query($query);

   // Tried this, but it doesn't work:
   echo "<img src='http://mysite.com/photos/image.jpg'>";
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T05:21:48.460

如果您要使用这样的 PHP 脚本，它需要返回图像*数据*，而不仅仅是 HTML 图像标签。最简单的方法是：

```
<?php
header("Content-Type: image/jpeg");
readfile("image.jpeg");

do_all_your_tracking_stuff(); 
```

请注意，这是首先返回图像数据，以便邮件客户端可以立即开始显示它，而不是等待您的 SQL 查询完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T05:20:59.040

简单的谷歌搜索会工作......

```
header('Content-Type: image/jpeg');
readfile('path'); 
```

你真的只需要使用你的直觉：你在图像标签中链接到什么？您链接到图像源。实际的图像文件。你在代码中做什么？将 HTML 代码与另一个图像源相呼应。但是客户端浏览器期待的是图像，而不是更多的 HTML 代码。

# cocos2d-iphone - KKInput panningGesture 在 Iphone 倾斜时给出错误的值

> ID：14000288
> 
> 赞同：1
> 
> 时间：2012-12-22T05:18:56.620
> 
> 标签：cocos2d-iphone, kobold2d

我正在使用来自 kobold2d 的 KKInput 使用平移手势识别器进行一些拖放操作。当 iphone 平放在桌子上时它工作得很好，但是如果我将手机向我倾斜，翻译似乎完全错误并且不再正常运行，实际上我认为我的 iPhone 似乎是颠倒的。

难道我做错了什么？

示例代码：

```
if([input gesturePanBegan])
    {
        for( CCSprite* item in self.View.children )
        {
            bool result = [input isAnyTouchOnNode:item touchPhase: KKTouchPhaseAny];
            if (result)
            {
                itemPanning = item;
                originalPostion = item.position;

            }
        }
        CCLOG(@"%f y translation %f x translation", input.gesturePanTranslation.y , input.gesturePanTranslation.x);
        if(itemPanning != NULL)
        {
            [itemPanning setPosition:ccp(input.gesturePanTranslation.x + originalPostion.x, originalPostion.y)];
            if(input.gesturePanTranslation.x > 70)
            {
                [View Select: [itemPanning tag]];

                SelectAttackCommand * command = [SelectAttackCommand new];
                command.SelectedAttack = [itemPanning tag];

                itemPanning = NULL;

                NOTIFY(command);
            }
        }
    }
    else if(![input gesturePanBegan] && itemPanning != NULL)
    {
        itemPanning = NULL;
        [View Open];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:35:46.423

这是一个答案，但可能不是最好的答案。在 KKInputGesture 中，在 handlePanGesture 下，平移的值计算如下：

手势PanTranslation = [panRecognizer translationInView:glView]; gesturePanTranslation = [self convertRelativePointToGL:gesturePanTranslation];

这里的第二个调用根据设备的方向转换一个值。这在某些情况下可能没问题，但在我的情况下，它不是必需的，所以我将其注释掉，现在无论我如何倾斜 iPhone，我的翻译值总是正确的。

不过，我可能在这里遗漏了一些东西，所以我还不想将其标记为答案。

# php - PHP控制HTML布局

> ID：14000289
> 
> 赞同：0
> 
> 时间：2012-12-22T05:19:12.750
> 
> 标签：php, html

需要一些帮助来解决这个问题。我有一个这样生成的服务列表：

```
<div class="row">
    <?php foreach( $entries as $s ) : ?>
    <?php require( dirname(__FILE__) . '/_index_DisplayService.php' ); ?>

    <?php endforeach; ?>
</div> 
```

**_index_DisplayService.php**

```
<div class="grid-4">
    <div id="service-mobile-dev" class="service">   
        <div class="service-icon">
            <i class="icon-calendar"></i>
        </div>
    </div>
</div> 
```

现在这是一个网格 12 布局，所以我需要 3 个网格，每行需要 4 个网格，然后是新行。我认为解决方案首先要移动`<div class="row">`下面的内容，如下所示`<?php foreach( $entries as $s ) : ?>`：

```
<?php foreach( $entries as $s ) : ?>
    <div class="row">
        <?php require( dirname(__FILE__) . '/_index_DisplayService.php' ); ?>
    </div>
<?php endforeach; ?> 
```

这当然会将所有内容都踢到一行。我如何着手每行生成 3 个 grid-4。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:31:19.923

您可以使用 a 中的`index => value`属性`foreach`（或将其完全替换为`for`循环）并在索引上运行模数以有条件地插入行 div。假设`$entries`是一个`array`.

```
<?php
    foreach ($entries as $key => $value) :

        // Close the "previous" row tag before beginning the next row
        // Obviously we should not start with a closing tag ($key > 0)
        if ($key > 0 && $key%3 == 0) {
            ?>
            </div>
            <?php
        }

        // Start a new row
        if ($key%3 == 0) {
            ?>
            <div class="row">
            <?php
        }

        // Insert the "grid-4" elements
        require( dirname(__FILE__) . '/_index_DisplayService.php' );

    endforeach;

    // If there were any entries then we have a row which hasn't been closed yet.
    // Close it.
    if (count($entries) > 0) {
        ?>
            </div>
        <?php
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:33:19.633

假设这`$entries`是一个索引数组，`$ind%3`当`$ind`为 0、3、6 和 9 时将为 0。

```
<?php foreach( $entries as $ind=>$s ) : ?>
    <?if($ind%3==0){?><div class="row"><?}?>
        <?php require( dirname(__FILE__) . '/_index_DisplayService.php' ); ?>
    <?if($ind%3==0){?></div><?}?>
<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T06:05:54.560

为此，您需要设置一个计数器。我添加了一个代表您的条目的假数组，因此您可以按原样对其进行测试。当我写这篇文章时，看起来其他一些人也发布了一些非常好的答案。祝你好运！

```
 $entries = array(
        'entry-one',
        'entry-two',
        'entry-three',
        'entry-four',
        'entry-five',
        'entry-six'
);

$counter = 0;
foreach( $entries as $s ) {
    if( $counter > 2 ) {$counter = 0;}
    if( $counter === 0 ) {
        echo '<div class="row">' ;
    }

    echo '
    <div class="grid-4">
        <div id="service-mobile-dev" class="service">   
            <div class="service-icon">
                <i class="icon-calendar"></i>'
                . $s .'
            </div>
        </div>
    </div>';

    if( $counter === 2) {
        echo "</div>";
    }
    $counter++;
} 
```

# mercurial - 致命：你在服务器上运行过 git update-server-info 吗？

> ID：14000300
> 
> 赞同：0
> 
> 时间：2012-12-22T05:22:11.947
> 
> 标签：mercurial

> **可能重复：**
> [“您是否在 Github 存储库上运行过 git update-server-info”错误](https://stackoverflow.com/questions/9343189/did-you-run-git-update-server-info-error-on-a-github-repository)

我正在运行一个从 URL 克隆存储库的命令：

```
hg clone my_url 
```

该 URL 在[globalit](https://globalit.fogbugz.com/)站点上，但我收到以下错误：

> 致命：找不到“我的网址”：您是否在服务器上运行了 git update-server-info？

有人可以帮我吗？

# rdlc - 如何在 RDLC Microsoft Dynamic NAV 2013 报告中显示 Unicode 字符？

> ID：14000306
> 
> 赞同：2
> 
> 时间：2012-12-22T05:23:39.990
> 
> 标签：rdlc, dynamics-nav

我在 RDLC 报告中添加了一个文本框并将其值设置为 unicode 字符。但是当我运行报告时，我只得到 ????? 符号。

请帮我解决这个问题。我希望在报告中看到 unicode 字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T13:36:12.317

我遇到了同样的问题并找到了解决方案。您必须更改文本框属性中的文本框字体。 ![在字体字段中选择 sylfaen](../Images/e2e368b78791c02d335cd33c6d5380f3.png)

# wordpress - 我可以停止从 wordpress 网站发送的所有电子邮件吗？在哪里做这个 wp-includes/class-phpmailer.php？

> ID：14000307
> 
> 赞同：0
> 
> 时间：2012-12-22T05:23:46.917
> 
> 标签：wordpress

如何关闭该单词按配置中的所有电子邮件发送选项。我应该使用

```
wp-includes/class-phpmailer.php ? or where ?
 if ($this->SingleTo === true && count($toArr) > 1) {
        foreach ($toArr as $key => $val) {
          $rt = @mail($val, $this->EncodeHeader($this->SecureHeader($this->Subject)), $body, $header, $params);
          // implement call back function if it exists
          $isSent = ($rt == 1) ? 1 : 0;
          $this->doCallback($isSent,$val,$this->cc,$this->bcc,$this->Subject,$body);
        }
      } 
```

这会吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:17:05.247

将以下代码添加到 wp-config.php，它将停止发送所有电子邮件

```
function wp_mail()
{
    //silence is golden!!
} 
```

# grails - Grails可搜索返回域但关系为空

> ID：14000313
> 
> 赞同：1
> 
> 时间：2012-12-22T05:26:21.270
> 
> 标签：grails, searchable

我有 3 个域：A、B、C。

A 和 C 通过 B 具有多对多关系。 A 和 C 是可搜索的。

当我搜索并获取 A 域列表时，A 中的所有字段都可以访问，但是关系字段始终为“空”。为什么我无法访问关系字段？为什么我会得到“空”？如果我直接访问对象，我会看到一个关系，但是当可搜索返回 A 域时，我在关系字段上得到“null”。

PS：我试图使 B 可搜索，但看起来可搜索在索引它上面有问题，我没有看到索引 B 的任何意义，因为它的存在只是为了多对多关系。

请我需要帮助。我需要能够以可搜索的返回值通过 A 到达 C。

谢谢你。

[更新]：我今天做了一个原型项目（小型数据库）并使域 B 可搜索。现在我可以访问关系字段。但是在我的实际项目中，我不想让 B 可搜索，因为数据库很大并且索引时间太长。有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T18:56:18.800

您可以刷新结果列表中的所有实例或使用**reload:true**属性进行 seach 方法

```
searchableService.search(query,[reload:true]) 
```

您可以找到完整的选项列表：http: [//grails.org/Searchable+Plugin+-+Methods+-+search](http://grails.org/Searchable+Plugin+-+Methods+-+search)

> reload - 如果为 true，则从数据库重新加载对象，将它们附加到 Hibernate 会话，否则从索引重建对象。默认为假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:12:50.933

好的，我相信我解决了我的问题。类似问题的第一个结帐链接：[Grails searchable plugin](https://stackoverflow.com/questions/1884814/grails-searchable-plugin) -- 请给 GalmWing 一些信任。

我的解决方案如下，我正在实现自己的控制器，并且以下代码实现了可搜索的服务调用：

```
 if (params.q) {
        try{
            def searchResults = searchableService.search(params.q, params)

            searchResults.results.each {
                it.refresh()
            }

            return [carInstanceList:searchResults.results, carInstanceTotal:searchResults.total]
        } catch (SearchEngineQueryParseException ex) {
            return [parseException: true]
        } 
```

正如你所看到的，我有一个循环，在域“A”的每个项目上我都会刷新。现在刷新从数据库中获取所有链接的真实记录。现在我将列表返回到 GSP，它会提取与“A”域关联的所有“C”域。

现在这样你可能会受到性能损失，但在我的情况下，searchable 实际上无法索引“B”域，它工作了一段时间然后崩溃，所以我没有其他选择，至少现在是这样。

# sql - 无法绑定多部分标识符的原因

> ID：14000315
> 
> 赞同：4
> 
> 时间：2012-12-22T05:26:27.717
> 
> 标签：sql, tsql

错误 - 无法绑定多部分标识符“Grant.EmpID”。

询问 -

```
select emp.EmpID, 
COUNT(*) as CountRecords,
COUNT(GrantName) AS CountValues
From Employee as emp full join [Grant] as gr
on emp.EmpID = [Grant].EmpID 
-- This is the cause for the error ! Change it to gr.EmpID
group by emp.EmpID 
```

为什么会出现这个错误？我不能用真名和昵称称呼一个人吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T05:29:21.333

你在别名`[Grant]`。换句话说，您是说从现在开始，`[Grant]`将被称为`gr`.

使用`ALIAS`in`GROUP BY`子句，而不是 tableName。

```
SELECT emp.EmpID, 
       COUNT(*) as CountRecords,
       COUNT(GrantName) AS CountValues
FROM   Employee as emp 
       FULL JOIN [Grant] as gr
          on emp.EmpID = gr.EmpID  -- use the alias.
GROUP BY gr.EmpID                  -- use the alias. 
```

这是 SQL 操作顺序

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:41:07.947

不，你不能，因为 sql server 不是人类。假设我们有一个引用自身的 Employee 表

```
select * 
from Employee Emp, Employee Mng
where Emp.ManagerID = Mng.EmployeeID 
```

Mng 和 Emp 是 Employee 的两个实例

所以如果我选择

```
select * from Employee e, Employee 
```

它将返回所有员工两次，因为我告诉我给我员工一次以该名义`Employee`一次以该名义`e`（别名）

# intuit-partner-platform - 无人值守的 AggCat API 访问

> ID：14000316
> 
> 赞同：1
> 
> 时间：2012-12-22T05:26:28.573
> 
> 标签：intuit-partner-platform, customer-account-data-api

我想确认我阅读了 AggCat 的文档：

*   具有分类的实时 API 访问需要一个在一小时内到期的用户令牌
*   如果我们想在后台刷新客户的数据，作为一个无人值守的过程，我们可以使用 Batch Data APIs 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:36:14.430

Mike，
您可以随时刷新访问令牌，但它们始终只有一个小时。

Batch 将每晚更新帐户交易，并将生成一个文件，您可以使用该文件来捕获交易。要下载这些文件，您将使用同样使用用户令牌的 Batch API 调用。您可以随时对账户进行实时刷新，以获取最新的交易信息。如果您希望分类该信息将在批处理文件和 getTransactions API 调用中可用。

问候，

本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T23:55:48.893

您可以随时刷新访问令牌，但它们始终只有一个小时。

批处理仅在您想获得分类时使用。与无人值守访问无关。

# emacs - 将符号传递给emacs中的宏

> ID：14000318
> 
> 赞同：4
> 
> 时间：2012-12-22T05:27:29.630
> 
> 标签：emacs, macros, elisp

我是宏的新手。我正在尝试编写一个宏来生成一些函数：

```
(defmacro test (name)
  `(defun ,(intern (concat "fun-" (symbol-name name))) ()
     ...)) 
```

我想将一个符号传递给这个宏`(test 'stuff)`，但是 emacs 给了我这个错误：

```
Debugger entered--Lisp error: (wrong-type-argument symbolp (quote stuff)) 
```

那告诉我`(quote staff)`不是正确的论点`symbol-name`吗？我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:16:27.127

这一切似乎都很好。唯一的事情是你应该用一个不带引号的符号来调用你的宏，像这样：

```
(test stuff) 
```

其原因是，如[Emacs Lisp 手册](https://www.gnu.org/software/emacs/manual/html_node/elisp/Macros.html#Macros)中所述：

> 宏 [...] 对参数的未计算表达式进行操作，而不是像函数那样对参数值进行操作。

当您将符号传递给函数时，您习惯于引用它们以防止它们被视为变量名并评估为关联的值。但是，宏参数不会在宏扩展期间进行评估，而是在之后，当扩展本身被评估时。

# javascript - jQuery 隐藏（）；和显示（）；Internet Explorer 中的问题

> ID：14000323
> 
> 赞同：1
> 
> 时间：2012-12-22T05:28:44.500
> 
> 标签：javascript, jquery

我已经与 Internet Explorer 搏斗了几个小时，但似乎无法弄清楚我的问题。我正在尝试使用 jQuery show() 和 hide() 实现一个简单的“组选项切换器”。

如果您查看我的演示以了解我的意思，这可能是最好的：http: [//softwaredb.org/test/jquery-multi-select.html](http://softwaredb.org/test/jquery-multi-select.html)

我的代码适用于除 IE 之外的所有浏览器。我的代码是这样的...

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Demo - Jquery Multi Select box</title>
  <style type="text/css">
  select{width:200px;height:200px;}
  select#boysnames, select#girlsnames{display:none;}
  </style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
<div id="wrapper" style="padding:50px 0 0 50px;">

<form>      
    <select multiple="multiple" id="theoptions">
        <option value="boysnames">Boys Names</option>
        <option value="girlsnames">Girls Names</option>
    </select>

    <select multiple="multiple" id="placeholder">
    </select>

    <select multiple="multiple" id="boysnames">
        <option>John</option>
        <option>David</option>
        <option>Tom</option>
    </select>

    <select multiple="multiple" id="girlsnames">
        <option>Jenny</option>
        <option>Amanda</option>
        <option>Sara</option>
    </select>
</form>
</div> <!-- end #wrapper -->

<script type="text/javascript">
$('option[value="boysnames"]').click(function() {
    $('select#placeholder, select#girlsnames').hide();
    $('select#boysnames').show();
});
$('option[value="girlsnames"]').click(function() {
    $('select#placeholder, select#boysnames').hide();
    $('select#girlsnames').show();
});
</script>

</body>
</html> 
```

我的逻辑是……点击后，隐藏所有其他选择标签并显示我想看到的标签。它似乎工作正常，直到我在 IE 中尝试。任何想法我做错了什么？我对 jquery（以及一般的 javascript/编程）非常陌生，所以如果这是一个愚蠢的问题，请原谅我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T05:34:02.897

不是在选项级别跟踪点击，而是在选择级别跟踪更改。

```
$('select#theoptions').change(function() {
    $('#placeholder, #girlsnames').hide();
    if($(this).val() == 'boysnames') {
        $('#boysnames').show();
    } else {    
        $('#girlsnames').show();
    }
}); 
```

有很多方法可以让你的方法更直观一点，但这应该能让你走上你正在走的路

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:01:41.413

```
 <script type="text/javascript">
    $('#theoptions').click(function() {
    if($(this).attr('value') == "boysnames")
    {
        $('select#placeholder, select#girlsnames').hide();
        $('select#boysnames').show();
    }
    if($(this).attr('value') == "girlsnames")
    {
        $('select#placeholder, select#boysnames').hide();
        $('select#girlsnames').show();
    }

    });

    </script> 
```

用这个 ..

# java - 为 Tweet 服务实现 Web 服务计时器

> ID：14000326
> 
> 赞同：0
> 
> 时间：2012-12-22T05:29:48.337
> 
> 标签：java, web-services, spring-mvc

我的问题是我在我的网站上实现了一个功能，当我按下按钮时它会搜索特定的推文。我想让它自动运行，这样，无论有人是否使用该网站，每两分钟一次又一次调用该函数。如何在 java 中做到这一点？Spring解决方案更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:33:18.230

您可以使用 Spring 调度（请参阅[此处的文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html)）

从文档：

## XML 配置

```
<context:component-scan base-package="some.package" />
<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>
<task:executor id="myExecutor" pool-size="5"/>
<task:scheduler id="myScheduler" pool-size="10"/> 
```

## 爪哇豆

```
@Component
public class SomeBean {
    @Scheduled(fixedRate=5000)
    public void doSomething() {
        // something that should execute periodically
    }
} 
```

# c - APUE的线程同步问题

> ID：14000329
> 
> 赞同：0
> 
> 时间：2012-12-22T05:30:51.453
> 
> 标签：c, multithreading

我正在阅读 APUE，我对第 11 章的线程同步感到困惑。下面是一个代码片段。

```
#define NHASH 29
#define HASH(fp) (((unsigned long)fp)%NHASH)

struct foo *fh[NHASH];

pthread_mutex_t hashlock = PTHREAD_MUTEX_INITIALIZER;

struct foo {
    int             f_count;
    pthread_mutex_t f_lock;
    struct foo     *f_next; /* protected by hashlock */
    int             f_id;
    /* ... more stuff here ... */
};

struct foo *
foo_alloc(void) /* allocate the object */
{
    struct foo  *fp;
    int         idx;

    if ((fp = malloc(sizeof(struct foo))) != NULL) {
        fp->f_count = 1;
        if (pthread_mutex_init(&fp->f_lock, NULL) != 0) {
            free(fp);
            return(NULL);
        }
        idx = HASH(fp);
        pthread_mutex_lock(&hashlock);
        fp->f_next = fh[idx];
        fh[idx] = fp;
        pthread_mutex_lock(&fp->f_lock);
        pthread_mutex_unlock(&hashlock);
        /* ... continue initialization ... */
        pthread_mutex_unlock(&fp->f_lock);
    }
    return(fp);
} 
```

我的疑问是：

1.  为什么放在`pthread_mutex_lock(&fp->f_lock)`前面`pthread_mutex_unlock(&hashlock)`？我可以把它放在后面吗？

2.  由于`fp`是局部变量，可以`pthread_mutex_lock(&fp->f_lock)`一起`pthread_mutex_unlock(&fp->f_lock)`删除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:19:57.393

我猜有第二个线程循环创建的对象，对它们做一些事情。在这种情况下：

1.  不，因为循环线程可能会在初始化之前访问新创建的对象。

2.  不，因为循环线程可能会访问新创建的半初始化对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:26:48.090

1.  不，因为通过`pthread_mutex_lock(&hashlock)`将新创建的结构添加到`fh`列表中，之后的操作会将新创建的结构暴露给其他线程。持有哈希锁时，没有人可以访问该变量；一旦散列锁被释放，其他线程就可以通过散列访问它，但是锁定`fp_>f_lock`互斥锁可以防止任何人弄乱`fp`.

2.  不是写的代码。如果除了散列之外整个结构都已初始化，那么您可以不锁定`fp->f_lock`互斥锁；就在完成之前，您将锁定哈希锁，将新分配的项目挂钩到哈希表中，然后释放哈希锁，这样您就安全了。如果在将结构添加到哈希表后需要任何独占访问，则必须获取其互斥体。它的编写方式是对互斥锁的非等待获取；没有其他进程可以访问该变量。

    ```
    if ((fp = malloc(sizeof(struct foo))) != NULL) {
        fp->f_count = 1;
        if (pthread_mutex_init(&fp->f_lock, NULL) != 0) {
            free(fp);
            return(NULL);
        }
        idx = HASH(fp);
        /* ... complete initialization except for adding to hash table ... */
        pthread_mutex_lock(&hashlock);
        fp->f_next = fh[idx];
        fh[idx] = fp;
        pthread_mutex_unlock(&hashlock);
    } 
    ```

因此，所做的事情背后有逻辑；它是正确的。

# .net - 如何从 Metro 风格的 JavaScript 应用程序启动 Windows 服务？

> ID：14000331
> 
> 赞同：1
> 
> 时间：2012-12-22T05:30:55.633
> 
> 标签：.net, service, windows-8, microsoft-metro

我创建了一个 Windows 服务来打印图像，并在服务的“onstart”方法中编写了代码。我想从 Metro 风格的 javascript 应用程序启动服务。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:02:55.743

AFAIK，这是不可能的。现代应用程序和桌面环境之间没有直接的通信。

# object - 在哪里可以找到 x86.obj？

> ID：14000332
> 
> 赞同：0
> 
> 时间：2012-12-22T05:30:56.790
> 
> 标签：object

当我调试开源的 C++ 文件时，错误消息显示：

错误 1 ​​错误 LNK1104：无法打开文件 'C:\Program Files\Microsoft DirectX SDK (June2010)\Lib\x86.obj'

Microsoft Directx 的目录肯定没有名为“x86.obj”的文件。那么，什么是 x86.obj？我在哪里可以得到它？

我使用的平台是 Visual Studio 2010。

我认为obj文件可能是.lib文件的组合......因为在路径中，我只看到/x86目录下的lib文件，所以我猜：C++使用x86.obj，但这只是意味着它使用 /x86 目录下的 lib 文件。那么，有没有办法让多个 .lib 文件变成一个 .obj 文件呢？

任何建议不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:47:12.883

我找到了解决方案！

我尝试在所有文件中搜索文本“pragma”，并找到 C++ 使用的 lib，然后将其添加到链接器中，整个路径如下：C:/Program Files/Microsoft DirectX SDK (June 2010)/Lib/x86 /dxguid.lib

所以，没有 x86.obj 文件！但是，如果有人遇到可能的问题，请记住搜索 (crl+F)"pragma"，并检查您使用的库并使用整个路径添加到链接器。有时，链接器无法理解“路径”是目录还是 lib 文件，因此会出现错误。

谢谢大家！

# fixed-point - 减去定点二进制数？

> ID：14000339
> 
> 赞同：1
> 
> 时间：2012-12-22T05:32:10.240
> 
> 标签：fixed-point

大家好，

我知道这真的很愚蠢，但我对如何手动执行以下操作有点困惑：

0.25-0.5？或任何类似的问题

另外，当涉及到定点有符号数时，如何减去它们？

假设我选择我的 MSB 作为符号，8 位数字中的第 7 位为 1，而位 6-0 是小数部分，如下所示：

[符号][2^0][2^-1][2^-2][2^-3][2^-4][2^-5][2^-6]

例如：01.100000 是十进制的 1.5。

对齐小数点时，很容易添加 1+0.25：

01.000000 +00.010000 =01.010000 = 1.25 十进制

但是我该怎么做 0.25-1？还是-0.25-1？

希望你能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:39:22.617

使用符号幅度表示，就像你在这里所做的那样，会使事情变得非常复杂（并且会让你背负一个代表“负零”的位模式，与全零“正常零”分开）。这当然是一种可行的表示，但是，正如您所发现的，使用它要复杂得多。

使用二进制补码表示，其中最高位表示两倍于下一个最高位幅度的负值（在这种情况下，-2^1）将极大地简化问题，因为它允许您执行加法和减法完全一样如果两个数字都没有符号。有了这样的表示，例如：

```
 0.25 = 00 010000
-1.00 = 11 000000
      -----------
        11 010000 = -0.75 
```

和

```
-0.25 = 11 110000
-1.00 = 11 000000
      -----------
        10 110000 = -1.25 
```

要将符号幅度表示转换为二进制补码：

*   如果该数字是正数，请不要理会它。
*   如果数字为负数，则将除符号位之外的每一位取反并加 1（使用无符号加法）。

例如，要将 -0.75 的符号幅度表示转换为二进制补码：

```
Sign/magnitude: 10 110000
        Invert: 11 001111
            +1: 11 010000 -> two's complement 
```

要向相反方向转换，请反转过程（减去 1，然后反转）。

# java - 为什么在 java 7 中 ftp 上传速度很慢

> ID：14000341
> 
> 赞同：11
> 
> 时间：2012-12-22T05:32:54.407
> 
> 标签：java, performance, ftp

我想问是否有人知道 FTP 的任何 Java 7 问题？我使用了 Sun Net 和 Apache Commons Net 库，并且在 Java 6 上都按预期执行。但是当我将开发环境 (Eclipse) 切换到 1.7 时，相同的操作执行速度非常慢（大约 4.5 到 8KB/s），这些是本地主机服务器和局域网内的另一台服务器。

我尝试过缓冲流、字节到字节传输、关闭 Nagle 算法，并使用 Apache 便捷方法 storeFile()，后者最终在 localhost 上执行以加快速度，但在远程服务器上再次减速. 我还将所有机器都设置为关闭有状态的 FTP 过滤。

```
 InputStream is = null;
    OutputStream os = null;
    try {
        is = new BufferedInputStream(prepareInputStream(data));
        os = new BufferedOutputStream(prepareOutputStream(data));
        if (is == null || os == null) {
            log.error("Can't build connection");
            return;
        }

        byte[] buf = new byte[4096];
        int c = 1;

        while (c > 0) {
            c = is.read(buf);
            if (c > 0)
            os.write(buf, 0, c);
            data.incrCurrentPosition();
            fireStateChanged(data);
        }
        data.incrCurrentPosition();
    } catch (IOException e) {
        log.error(e.getMessage(), e);
        setEnabled(false);  
    } catch (Exception e) {
        log.error(e.getMessage(), e);
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (os != null) {
            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

可以看出，这是非常标准的实现代码。同样，在 Java 6 中，事情进展得非常快。在 Java 7 中，Sun 和 Apache Commons 库的速度都降低了 10 到 20 倍。使用像 FileZilla 这样的 FTP 客户端可以确认 FTP 运行正常，所以我认为它确实与 Java 7 有关。我尽我所能在网上搜索任何提到的问题，但大多数情况下，我看到的都是关于Java 7 和 Windows 7 防火墙冲突。

提前感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T06:47:11.100

我找到了某种修复方法，至少足以让 Java 7 中的东西正常运行。我通过使用 FTPClient 的**setBufferSize(0);来做到这一点。**不幸的是，我认为 Sun 的 Java 7 的 Sun Net 实现中没有类似的方法。这对我来说并不重要，因为我对 Apache Commons Net 非常满意。希望甲骨文能在适当的时候彻底解决这个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-28T04:04:53.973

请检查您当前的缓冲区大小：

```
ftpClient.getBufferSize(); 
```

如果您尚未将其设置为其他值，则该值将为零 (0)。因此，将其设置为更高的值：

```
ftpClient.setBufferSize(1048576);//1024*1024 
```

您可以像以前一样检查其当前值：

```
ftpClient.getBufferSize(); 
```

顺便说一句，接受的答案**setBufferSize(0)**对我不起作用。我使用最新版本的 Apache commons，因此该解决方案可能适用于早期版本。如果将缓冲区大小设置为零，则当前版本不会发生任何变化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-01T10:50:18.233

Commons Net 3.2 存在一个已知的性能问题，该问题已在 3.3 快照中得到修复，您可以从此处获取：

[https://repository.apache.org/content/groups/snapshots/commons-net/commons-net/3.3-SNAPSHOT/](https://repository.apache.org/content/groups/snapshots/commons-net/commons-net/3.3-SNAPSHOT/)

虽然 setBufferSize(0) 似乎是一种有效的解决方法，但最好使用快照来获得正确的修复 - 如果您可以使用快照;)

# ruby-on-rails - 编写一个全局方法，通过 current_user 设置 created_by 和 updated_by

> ID：14000350
> 
> 赞同：3
> 
> 时间：2012-12-22T05:34:51.743
> 
> 标签：ruby-on-rails

我项目中的所有模型都有created_by 和updated_by。Created_by 在 create 时由 current_user 设置，updated_by 在 update 时由 current_user 设置。有没有办法编写一个全局方法来管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:29:15.107

我写了一个可以做到这一点的宝石 - [https://github.com/house9/clerk](https://github.com/house9/clerk)

目前不是很可配置

*   您的数据库列必须在数据库表上命名为 created_by_id 和 updated_by_id

查看自述文件以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:47:41.783

在全球范围内执行此操作的一种方法是实施`ActiveRecord::Observer`. 观察者可以一次“观察”多个模型并检查它们的生命周期回调。因此，在您的观察者中，您将指定要观察和定义的所有模型以及`after_create`在`after_update`数据库中执行您想要的任何更新的方法。

请参阅[Rails 3 Observer - 了解如何为多个模型实现 Observer](https://stackoverflow.com/questions/3826260/rails-3-observer-looking-to-learn-how-to-implement-an-observer-for-multiple-m)。

# linux - （x86_64 linux 程序集）为什么具有浮点格式字符串的 printf 仅适用于 rsp % 0x10 = 0

> ID：14000351
> 
> 赞同：1
> 
> 时间：2012-12-22T05:34:52.740
> 
> 标签：linux, assembly, printf, x86-64, calling-convention

我在 x86_64 linux 汇编器上调用 printf 时遇到问题。如果我尝试在 时打印一个双精度值`rsp % 0x10 != 0`，则 printf 会因段错误而下降。

查看我的代码（nasm 语法）：

```
[bits 64]
global _start
extern printf
extern pow

section .data
    printf_format db '%lf', 10, 0
section .text
    _start:
    mov rbp, rsp
    sub rsp, MEM_VAL

    mov rax, 0x4000000000000000
    mov qword [rsp], rax

    movsd xmm0, qword [rsp]
    mov rdi, printf_format
    mov rax, 1
    call printf

    mov rax, 60
    mov rdi, 0
    syscall 
```

如果`MEM_VAL = 0x10, 0x20, ... , 0x100, ...`一切都好。代码工作。但是另一个值代码因段错误而下降。为什么？

我编译并链接到这个：

```
nasm -f elf64 ex.asm
ld -lc -lm -m elf_x86_64 -I/lib/ld-linux-x86-64.so.2 ex.o -o ex 
```

借此机会，我会问你，我可以在哪里阅读 x86_64 linux 中 C 调用约定的规范？我知道这是一个快速呼叫，但我无法理解这样的瘦弱。

# php - 如何在核心 PHP 中实现发布链接？

> ID：14000357
> 
> 赞同：-3
> 
> 时间：2012-12-22T05:36:08.717
> 
> 标签：php, hyperlink, edit

我有一个编辑用户的链接，如下所示

[http://project.com/user/edit?usrId=10](http://project.com/user/edit?usrId=10)

此链接在用户视图页面中。单击上面的链接后，用户将进入用户 id = 10 的用户编辑页面。

但我面临的问题是，在编辑页面中，如果我只是将 id 从 10 更改为 20，则可以更改用户 id 为 20 的用户数据。我想限制这一点。我只想在用户视图页面中实现某种帖子链接。

类似于 CAKE PHP 中的 POST 链接。

我如何在核心 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:42:16.090

您必须为此实施一些加密/解密技术
检查此链接[Simple PHP multi way encryption method](https://stackoverflow.com/questions/10536664/looking-for-simple-php-multi-way-encryption-method)

加密用户 id 10 并将其传递给链接并在编辑页面中对其进行解密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:42:50.887

对您传递的变量使用一些加密。PHP 具有类似的功能`base64_encode`，`base64_decode`它以编码格式发送变量。当您在编辑页面页面上收到值时，变量使用`base64_decode($_GET('variable you sent through URL');`.
此外，当您通过 URL 字符串发送变量时，它们很容易被**注入**。尝试使用 PHP 函数`mysql_real_escape_strings`或`stripslashes`避免它们受到任何可能的攻击。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:44:32.160

比较传入的用户 ID 和当前用户 ID 是否相等，如果不匹配则重定向

# php - 使用 jquery 和 ajax 根据州改变城市

> ID：14000365
> 
> 赞同：1
> 
> 时间：2012-12-22T05:37:53.283
> 
> 标签：php, jquery, ajax, .post

我想知道 jquery 中 $.ajax 和 $.post 之间的区别。我搜索它但没有得到澄清。实际上，我正在下拉州和城市，当州与 jquery $.post 发生变化时，我正在改变城市。这是我的jquery代码

```
$.post('includes/change_cities.php', { 'state_id': state_id },
        function( data ) {
        var content = $( data );
        $( "#cities" ).empty().append( content );
        }
        ); 
```

我的问题是，当状态第一次更改时，更改城市需要花费太多时间，大约需要 4 到 5 秒，但在第一次变为正常之后，这意味着更改城市无需花费任何时间。那么我的代码中是否有任何问题，或者我应该为此使用任何其他方法。

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:41:49.643

试试他们的文档。他们很好。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

> $.post 是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

不能说为什么慢。您是否尝试过检查服务器的响应时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:41:57.460

`$.post()`并且`$.get()`都是 jQuery 提供的简写函数，实际上只是调用`$.ajax()`.

此外，我可以向您保证，AJAX 调用在第一次调用时不会花费 4 到 5 秒作为热身惩罚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:44:03.150

性能取决于您的代码和 sql 实现。
$.post 在功能方面是 $.ajax 的子集。

> $.ajax({
> **type: 'POST'** ,
> url: 'ajax/test.html',
> data: data,
> success: function(data){
> $('.result').html(data)
> },
> });

相当于

> $.post('ajax/test.html', function(data) {
> $('.result').html(data);
> });

# android - Android：无需重新输入密码的 Facebook PublishPermissions（使用 SUPPRESS_SSO 时）？

> ID：14000366
> 
> 赞同：0
> 
> 时间：2012-12-22T05:37:54.553
> 
> 标签：android, facebook, facebook-login, facebook-android-sdk

这个 android 应用程序的操作流程是 -

1.  UserX 在 facebook 上注册
2.  UserX 授予 read_permissions
3.  UserX 授予 publish_permissions
4.  他的 access_token 存储在我们的数据库中。
5.  UserX 注销

6.  UserY 注册 ... [遵循相同的步骤]

因为它需要多个用户登录，所以我需要 SUPPRESS_SSO（感谢[How to disable Single SIgn On for facebook android app?](https://stackoverflow.com/questions/13899955/how-to-disable-single-sign-on-for-facebook-android-app)）。

现在在 facebook API 3.0 中，Facebook 使 ReadPermissions 和 PublishPermissions 变得不同。**我成功地请求了这两个权限**，但它需要用户登录两次（因为 SSO 被抑制并显示 webview） - 登录 webview 再次弹出 - 用户必须输入他的电子邮件和密码。**我想访问 PublishPermissions 或 ReadPermissions（以任何顺序），而无需用户重新输入密码。**

java代码中的相关函数如下所示：

```
private static final List<String> PERMISSIONS = Arrays.asList("user_photos", "read_friendlists", "email", "publish_actions", "publish_stream");

private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        handleAnnounce();
        textInstructionsOrLink.setText(ACKNOWLEDGE_USER);
        buttonLoginLogout.setText(R.string.logout);
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { 
               onClickLogout(); 
            }
        });
    } else {
        textInstructionsOrLink.setText(R.string.login);
        buttonLoginLogout.setText(R.string.login);
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { 
                onClickLogin();
            }
        });
    }
}

private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        Session.OpenRequest openRequest = new Session.OpenRequest(this).setCallback(statusCallback);
        List<String> readPermissions = Arrays.asList("user_photos", "email", "read_friendlists");
        openRequest.setPermissions(readPermissions);
        openRequest.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
        session.openForRead(openRequest);
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}

private void requestPublishPermissions(Session session) {
    Log.d(LOG_TAG, "Requesting Publish Permissions...");
    if (session != null) {
        List<String> publishPermissions = Arrays.asList("publish_actions", "publish_stream");
        final int REAUTH_ACTIVITY_CODE = 100;
        Session.NewPermissionsRequest reauthRequest = new Session.NewPermissionsRequest(this, publishPermissions).setRequestCode(REAUTH_ACTIVITY_CODE);
        reauthRequest.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
        session.requestNewPublishPermissions(reauthRequest);
    }
}

private void handleAnnounce() {
    Session session = Session.getActiveSession();
    if (session == null || !session.isOpened()) {
        return;
    }

    List<String> permissions = session.getPermissions();
    if (!permissions.containsAll(PERMISSIONS)) {
        requestPublishPermissions(session);
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:49:49.033

您的代码似乎很好，这是最近报告的 API 错误：

[https://developers.facebook.com/bugs/268146283318403?browse=search_51235ada57ba59615000124](https://developers.facebook.com/bugs/268146283318403?browse=search_51235ada57ba59615000124)

请耐心等待，我遇到了同样的错误，我们所能做的就是等待一个固定的 API。

# web-services - 通过 https 安全 URL 的 Axis2 Adb 客户端基本身份验证

> ID：14000370
> 
> 赞同：1
> 
> 时间：2012-12-22T05:38:55.967
> 
> 标签：web-services, https, client, axis2, axis

我在 Stackoverflow 上搜索了这个问题，发现了一些类似的问题，但没有一个能解决我的问题。我已经编译了所有“建议的”解决方案，但没有任何效果:-(我有一个 wsdl，我使用 adb client(Axis 2) 生成了客户端代码。wsdl 说这个请求将通过 Https url 发送。我能够成功使用wsdl到java创建一个存根。但是我不确定如何进行基本身份验证。告诉我细节的文档还说我的用户名和密码应该使用Base64编码。

> 使用的身份验证方法是 HTTP Basic 。用户名和密码需要以 base64 格式编码 - UTF8 字符集。
> 
> 示例：用户名：密码 = “VXNlcm5hbWU6UGFzc3dvcmQ=”</p>

顺便说一句，我已经在 SOAP UI 中尝试过这个 wsdl，并且我得到了正确的响应，但是我的 java 代码无法正常工作

现在这里是wsdl

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions targetNamespace="urn:OTSB2B" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:impl="urn:OTSB2B" xmlns:intf="urn:OTSB2B" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:types>
        <schema targetNamespace="urn:OTSB2B" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:urn="urn:OTSB2B">
            <simpleType name="tn">
                <restriction base="string">
                    <length value="10"/>
                </restriction>
            </simpleType>
            <simpleType name="prov">
                <restriction base="string">
                    <length value="2"/>
                    <enumeration value="on"/>
                    <enumeration value="qc"/>
                </restriction>
            </simpleType>
            <element name="getPresaleByTN">
                <complexType>
                    <sequence>
                        <element name="tn" type="urn:tn"/>
                        <element name="prov" type="urn:prov"/>
                    </sequence>
                </complexType>
            </element>
            <element name="getPresaleByTNReturn" type="xsd:string"/>
            <element name="isAlive"/>
            <element name="isAliveReturn" type="xsd:boolean"/>
        </schema>
    </wsdl:types>
    <message name="isAliveRequest">
        <part element="impl:isAlive" name="isAlive"/>
    </message>
    <message name="getPresaleByTNRequest">
        <part element="impl:getPresaleByTN" name="getPresaleByTN"/>
    </message>
    <message name="isAliveResponse">
        <part element="impl:isAliveReturn" name="isAliveReturn"/>
    </message>
    <message name="getPresaleByTNResponse">
        <part element="impl:getPresaleByTNReturn" name="getPresaleByTNReturn"/>
    </message>
    <portType name="GetPresaleByTN">
        <operation name="getPresaleByTN">
            <input message="impl:getPresaleByTNRequest" name="getPresaleByTNRequest"/>
            <output message="impl:getPresaleByTNResponse" name="getPresaleByTNResponse"/>
        </operation>
        <operation name="isAlive">
            <input message="impl:isAliveRequest" name="isAliveRequest"/>
            <output message="impl:isAliveResponse" name="isAliveResponse"/>
        </operation>
    </portType>
    <binding name="DominoSoapBinding" type="impl:GetPresaleByTN">
        <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="getPresaleByTN">
            <wsdlsoap:operation soapAction=""/>
            <input name="getPresaleByTNRequest">
                <wsdlsoap:body use="literal"/>
            </input>
            <output name="getPresaleByTNResponse">
                <wsdlsoap:body use="literal"/>
            </output>
        </operation>
        <operation name="isAlive">
            <wsdlsoap:operation soapAction=""/>
            <input name="isAliveRequest">
                <wsdlsoap:body use="literal"/>
            </input>
            <output name="isAliveResponse">
                <wsdlsoap:body use="literal"/>
            </output>
        </operation>
    </binding>
    <service name="GetPresaleByTNService">
        <port binding="impl:DominoSoapBinding" name="Domino">
            <wsdlsoap:address location="https://b2b.ivv.bell.ca/ots-qualification-service-tn"/>
        </port>
    </service>
</definitions> 
```

我试过这个：

```
GetPresaleByTNServiceStub stub = new GetPresaleByTNServiceStub();
            ServiceClient client = stub._getServiceClient();
            client.addStringHeader(new QName("userName"), "XXX");
            client.addStringHeader(new QName("password"), "YYYYYYYY");

            GetPresaleByTNServiceStub.GetPresaleByTN request = new GetPresaleByTN();
            Tn tn = new Tn();
            tn.setTn("4164390001");
            request.setTn(tn);
            request.setProv(Prov.on);

            GetPresaleByTNReturn response = stub.getPresaleByTN(request);
            System.out.println(response.getGetPresaleByTNReturn()); 
```

这给了我以下错误：

> org.apache.axis2.AxisFault：添加字符串标头失败，您必须在 com.dinesh.bellAxis.App 的 org.apache.axis2.client.ServiceClient.addStringHeader(ServiceClient.java:434) 中拥有 QName 的 namespaceURI。主要（App.java:30）

然后我尝试了这个

```
GetPresaleByTNServiceStub stub = new GetPresaleByTNServiceStub();
            ServiceClient client = stub._getServiceClient();

            HttpTransportProperties.Authenticator basicAuth = new HttpTransportProperties.Authenticator();
            basicAuth.setUsername("XXX");
            basicAuth.setPassword("CCCCC");
            basicAuth.setPreemptiveAuthentication(true);

            stub._getServiceClient().getOptions().setProperty(HTTPConstants.AUTHENTICATE, basicAuth);

            GetPresaleByTNServiceStub.GetPresaleByTN request = new GetPresaleByTN();
            Tn tn = new Tn();
            tn.setTn("4164390001");
            request.setTn(tn);
            request.setProv(Prov.on);

            GetPresaleByTNReturn response = stub.getPresaleByTN(request);
            System.out.println(response.getGetPresaleByTNReturn()); 
```

这给了我以下错误：

> org.apache.axis2.AxisFault：传输级别信息与 org.apache.axis2.AxisFault.makeFault(AxisFault.java:430) 的 SOAP 消息命名空间 URI 不匹配，位于 org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils .java:90) 在 org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:353) 在 org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:416) 在 org.apache.axis2。 description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228) at org.apache.axis2.client.OperationClient.execute(OperationClient.java:163) at com.acn.client.GetPresaleByTNServiceStub.getPresaleByTN(GetPresaleByTNServiceStub.java:460)

接下来我尝试了这个：我认为这是不正确的，因为它是 WS 安全而不是基本身份验证，但是我用尽了所有选项

```
GetPresaleByTNServiceStub stub = new GetPresaleByTNServiceStub();
            ServiceClient client = stub._getServiceClient();

            OMFactory omFactory = OMAbstractFactory.getOMFactory();
            OMElement omSecurityElement = omFactory.createOMElement(new QName( "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "Security", "wsse"), null);

            OMElement omusertoken = omFactory.createOMElement(new QName("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd", "UsernameToken", "wsu"), null);

            OMElement omuserName = omFactory.createOMElement(new QName("", "Username", "wsse"), null);
            omuserName.setText("XXXX");

            OMElement omPassword = omFactory.createOMElement(new QName("", "Password", "wsse"), null);
            omPassword.addAttribute("Type","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText",null );
            omPassword.setText("YYYYYYY");

            omusertoken.addChild(omuserName);
            omusertoken.addChild(omPassword);
            omSecurityElement.addChild(omusertoken);
            stub._getServiceClient().addHeader(omSecurityElement);

            GetPresaleByTNServiceStub.GetPresaleByTN request = new GetPresaleByTN();
            Tn tn = new Tn();
            tn.setTn("4164390001");
            request.setTn(tn);
            request.setProv(Prov.on);

            GetPresaleByTNReturn response = stub.getPresaleByTN(request);
            System.out.println(response.getGetPresaleByTNReturn()); 
```

这给出了以下错误：

> 线程“main”java.lang.IllegalArgumentException 中的异常：无法在 org.apache.axiom.om.impl.llom.OMElementImpl.handleNamespace(OMElementImpl.java:186) 处创建具有空命名空间名称的前缀元素。 axiom.om.impl.llom.OMElementImpl.(OMElementImpl.java:161) at org.apache.axiom.om.impl.llom.factory.OMLinkedListImplFactory.createOMElement(OMLinkedListImplFactory.java:126) at com.dinesh.bellAxis.App2 .main(App2.java:37)

我不知道接下来要做什么，我已经检查了 Apache Axis2 上的所有文档，并到处搜索，但可以让代码正常工作。

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:43:14.223

代码片段 1 和 3 不起作用，因为它们试图创建对 SOAP（片段 1）或 XML（片段 3）无效的消息。无论如何，他们尝试将 SOAP 标头添加到消息中，这不是基本身份验证的内容。

代码片段 2 看起来是正确的。从异常的堆栈跟踪（更准确地说是`handleResponse`方法的存在），您可以看到响应存在问题。错误消息可能表明响应的内容类型与响应中实际使用的 SOAP 版本不匹配。这意味着服务有问题，而不是客户端有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T13:31:00.733

经过大量试验和错误并在 Oracle 网站上查看 SAAj 教程后，我找到了答案。

我可以使用此字符串进行基本身份验证授权 = new sun.misc.BASE64Encoder().encode((“myUserName”+”:”+”myPassword”).getBytes()); headers.addHeader(“授权”, “基本” + 授权);

这是完整的教程 - [http://www.javahabit.com/2014/10/17/quick-tutorial-saaj-api/](http://www.javahabit.com/2014/10/17/quick-tutorial-saaj-api/)

# javascript - chrome bug, onclick event inhibited when select control causes parent to scroll

> ID：14000372
> 
> 赞同：1
> 
> 时间：2012-12-22T05:39:10.743
> 
> 标签：javascript, google-chrome, select, onclick, scroll

这是一个难以描述的问题，但在这里。

尺寸 > 1 的选择控件位于浏览器中屏幕底部的下方，因此正文中有一个滚动条，并且只有选择控件中的第一项可见（其他项目在那里，但您需要向下滚动页面以查看它们）。选择框或其上方的任何父项中有一个 onclick 事件，但在第一次单击选择时不会触发。发生的情况是 chrome 自动滚动页面以显示选择中的所有项目，但显然忘记将点击事件传递给处理程序。

这种行为似乎只发生在 chrome 中。（在 FF 和 IE 中工作正常）

众所周知，Chrome 开发人员修复错误的速度很慢，尤其是考虑到这种情况下的晦涩性质，我怀疑它永远不会被修复。

在 onfocus 事件中使用 setTimeout（除了 onclick 事件）可以解决问题，因为 onfocus 似乎没有被禁止。但是，如果有的话，我想找到一个不那么老套的解决方案。

想法？

# android - Android - Json 和 TwitterFeed 代码

> ID：14000378
> 
> 赞同：0
> 
> 时间：2012-12-22T05:39:57.913
> 
> 标签：android, json, twitter

嗨，这是我的第一个应用程序。在编程和 android 方面，我是初学者。我的应用程序类似于 twitter 应用程序。但是，它不会从 twitter 获取值，而是从我的数据库中获取值。该应用程序将加载图像和网页链接。

我的问题。假设我的应用在应用商店中并且有人下载了它。我的应用程序通过 Json 从我的 mysql 数据库中获取大部分内容。每次我向数据库添加新内容时，用户必须更新应用程序以获取新内容，否则它会自动更新自身。

有人可以看看我的代码。我不确定 Async() 和 doInBackground()。如果您有任何其他有用的编码建议，请告诉我。我想在完成后将此应用程序放在应用程序商店中。

亲切的问候

```
public class TwitterFeedActivity extends ListActivity {

    private ArrayList<Tweet> tweets = new ArrayList<Tweet>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new MyTask().execute();
    }
    private class MyTask extends AsyncTask<Void, Void, Void> {
        private ProgressDialog progressDialog;

        protected void onPreExecute() {
            progressDialog = ProgressDialog.show(TwitterFeedActivity.this,
                    "", "Loading. Please wait...", true);
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                HttpClient hc = new DefaultHttpClient();
                HttpGet get = new HttpGet("http://myurl.com");
                HttpResponse rp = hc.execute(get);

                if(rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
                {
                    String result = EntityUtils.toString(rp.getEntity());
                    JSONObject root = new JSONObject(result);
                    JSONArray sessions = root.getJSONArray("results");

                    for (int i = 0; i < sessions.length(); i++) {
                        JSONObject session = sessions.getJSONObject(i);
                        Tweet tweet = new Tweet();
                        tweet.n_text = session.getString("n_text");
                        tweet.n_name = session.getString("n_name");
                        tweet.Image = session.getString("Image");
                        tweets.add(tweet);
                    }
                }

            } catch (Exception e) {
                Log.e("TwitterFeedActivity", "Error loading JSON", e);
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            progressDialog.dismiss();
            setListAdapter(new TweetListAdaptor(TwitterFeedActivity.this, R.layout.list_item, tweets));
        }
    }

    private class TweetListAdaptor extends ArrayAdapter<Tweet> {
        private ArrayList<Tweet> tweets;
        public TweetListAdaptor(Context context, int textViewResourceId, ArrayList<Tweet> items) {
            super(context, textViewResourceId, items);
            this.tweets = items;
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_item, null);
            }
            final Tweet o = tweets.get(position);
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            TextView bt = (TextView) v.findViewById(R.id.bottomtext);
            ImageView image = (ImageView) v.findViewById(R.id.avatar);
            bt.setText(o.n_name);
            tt.setText(o.n_text);
            image.setImageBitmap(getBitmap(o.Image));

            image.setOnClickListener(new View.OnClickListener(){
                public void onClick(View v){
                    Intent intent = new Intent();
                    intent.setAction(Intent.ACTION_VIEW);
                    intent.addCategory(Intent.CATEGORY_BROWSABLE);
                    intent.setData(Uri.parse(o.n_text));
                    startActivity(intent);
                }
            });

            return v;
        }
    }

    public Bitmap getBitmap(String bitmapUrl) {
        try {
            URL url = new URL(bitmapUrl);
            return BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
        }
        catch(Exception ex) {return null;}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:03:07.403

好的，我正在发布与异步相关的代码。我希望，你会发现它有帮助。首先，创建一个类，如下所示：

```
package com.example.pre;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import android.util.Log;

public class JSONFunctions {

    public String CreateCon(String url){
        String res="";
        try{
            URL u=new URL(url);
            HttpURLConnection con = (HttpURLConnection) u.
                    openConnection();

                res=readStream(con.getInputStream());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       

        return res;
    }

    private String readStream(InputStream is) {
        // TODO Auto-generated method stub
        String result = "";
        BufferedReader reader=null;
          try{
                reader = new BufferedReader(new InputStreamReader(is));

                String line = null;
                while ((line = reader.readLine()) != null) {
                        result=result+line;
                }
          }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }finally{
            if(reader!=null)
            {
                try {
                    reader.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        return result;
    }
} 
```

在你的主类中，粘贴以下方法：

```
 private class PostTask extends AsyncTask<String, Integer, String>{

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        readJson();
            //progress_dialog.dismiss();
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }
    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }
    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        JSONFunctions jsonf=new JSONFunctions();
        str1=jsonf.CreateCon(cat_url);
        return null;
    }
} 
```

其中 readJson 是您定义功能的方法，而 str1 是您提供 json 地址的字符串。不要忘记调用 PostExecute 类。

# java - webview javafx中的荧光笔类支持

> ID：14000382
> 
> 赞同：1
> 
> 时间：2012-12-22T05:40:46.337
> 
> 标签：java, javafx-2, javafx

我可以使用荧光笔类来突出显示 web 视图中所有出现的单词，因为它可以在 swing 中的 jeditorpane 中使用。

实际上，我想使用 javafx 在 webview 中显示的网页中突出显示给定的单词，但我无法做到这一点，因为它在 swing jeditorpane 中是可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:17:33.053

您必须为此使用 JavaScript 解决方案，因为目前 (JavaFX 2.2) 没有 Java API 来支持此功能。了解[如何使用 java 脚本突出显示 div 中特定字符串的所有出现？](https://stackoverflow.com/questions/11790375/how-to-highlight-all-the-occurrence-of-a-particular-string-in-a-div-with-java-sc)

# javascript - 行单击时的行选择，但不是在jquery数据表中的一列中单击超链接？

> ID：14000383
> 
> 赞同：1
> 
> 时间：2012-12-22T05:40:54.327
> 
> 标签：javascript, html, jquery-ui, datatable

我有我的客户数据表，它有五列。一列包含超链接。其中一列是复选框。我希望当用户单击该行时，应该选择该行（这意味着行颜色应该改变并且应该选中复选框）。我可以用下面的代码片段来做

```
 $("#customer").on('click', $.fn.getDataTablesClickHandler("#selectAll"));
 //where customer is the html div associated with dataTable and call the same function which gets triggered
 //on call of selectAll html element. Inside that function i toggle the class of row 
```

它工作得很好。但我的问题是我不希望在单击其中一列内的链接时发生这种情况（即行选择）。我怎么能做到这一点？所以基本上我怎样才能限制点击单元格中的某些链接或
点击单元格时触发 getDataTablesClickHandler？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:44:33.473

试试这个，你想检查哪个目标被点击，如果它是一个锚标记，则忽略它。

```
$("#customer").on('click', function(event) {
    if(event.target.tagName == 'A')
        return;

    $.fn.getDataTablesClickHandler("#selectAll").apply(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:53:10.850

你可以这样做：

如果客户是您的餐桌；

```
 $("#customer").on('click', 'tr', function(){
    if( !$(this).is('tr') )
        return;
    $.fn.getDataTablesClickHandler("#selectAll");
 }); 
```

# mysql - 存储例程输出参数存根

> ID：14000385
> 
> 赞同：0
> 
> 时间：2012-12-22T05:41:14.787
> 
> 标签：mysql, stored-procedures, out

我有一个 mysql 5.5 存储例程：

```
PROCEDURE get_stuff(IN po_id BIGINT, OUT po_name VARCHAR(32), OUT po_value VARCHAR(32)) ... 
```

我想从其他例程调用这个过程，但我不需要前一个例程的所有参数：

```
PROCEDURE do_work(IN po_id BIGINT)
BEGIN
    DECLARE stuff_value VARCHAR(32) DEFAULT NULL;

    CALL get_stuff(po_id, /* dont need this out param */, stuff_value);
    ... 
```

有没有办法存根存储例程的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:45:57.033

那么，你不能在 MySQL 存储过程中设置可选参数。目前没有办法为参数定义默认值，因此所有参数都需要传递一个值。

# javascript - 使用 jQuery 和 Javascript 显示数据库中的数据

> ID：14000392
> 
> 赞同：0
> 
> 时间：2012-12-22T05:42:01.397
> 
> 标签：javascript, jquery, ajax, database

我正在尝试显示 Cloudant 数据库的特定部分。该数据库包含许多单独的文档，每个文档都包含一个名为“结果”的类别。我正在尝试显示结果中的任何内容。每个文档都由其自己的 id 标识。我尝试在 jQuery 中使用 get() 方法，但不幸的是它没有成功运行。

```
 function grabData(){
  var url = 'https://cloudant.com/futon/document.html?acharya%2Ftoxtweet/ff558f75077e8c758523cd3bd8ffdf88';
   $.get(url, function(data) {
     $('.result').html(data);
       alert("Data loaded: " + data);
});
}
grabData(); 
```

我不完全确定我哪里出错了......我应该考虑使用 SQL 而不是 ajax 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:46:43.503

您使用的 URL 正在返回整个网页。

您的 jQuery 代码正在当前页面上查找类名为的元素，`result`并尝试将其内部 HTML 更改为来自 URL 的响应。

您没有提供任何额外的代码来查看，但我认为这不是您所期望的。

我假设您想要解析整个 url，但在您当前的代码中，页面将被处理为原始字符串而不是 DOM 对象。因此，您必须使用正则表达式等解析该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:49:53.163

我认为你的问题是这样的：

替换这个：

```
grabData(); 
```

有了这个：

```
$(document).ready(function(){
    grabData();
}); 
```

或更短的：

```
$(function(){
    grabData();
}); 
```

# javascript - 使用咖啡脚本延迟（去抖动）ajax 请求

> ID：14000395
> 
> 赞同：1
> 
> 时间：2012-12-22T05:42:32.767
> 
> 标签：javascript, ruby-on-rails, coffeescript

我在我的 Rails 应用程序中使用 CoffeeScript，我需要延迟远程 ajax 表单提交，我遇到的主要问题是取消请求，以便在 250 毫秒过去后发送表单，而无需用户输入表单.

现在我有一些看起来像这样的事情，显然它不会工作，所以它有一些调试输出来帮助我。

看看下表，你应该知道我要“去抖动”的函数在 `element.keyup (event) ->`函数内部，任何帮助都会很神奇！

```
remoteTable =

  bindEvents: (element) ->
    element.keyup (event) ->
      console.log(event)

  send: (event) ->
    console.log(event) 
```

** 如果我能收集一些例子来说明它是如何工作的，那会非常有帮助吗？** 我确实看到了 underscore.js 的做法，但是在这里，这是我的旧方法：我只是无法理解这应该如何工作：

[http://davidwalsh.name/function-debounce](http://davidwalsh.name/function-debounce)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:36:23.573

我在 coffeescript.org 上玩过，他们有一个在线“try coffeescript”翻译器/运行器，看起来

```
remoteTableOrg =
  bindEvents: (element) ->
    element.keyup (event) ->
      console.log(event)
  send: (event) ->
    console.log(event) 
```

翻译成

```
var remoteTableOrg;

remoteTableOrg = {
  bindEvents: function(element) {
    return element.keyup(function(event) {
      return console.log(event);
    });
  },
  send: function(event) {
    return console.log(event);
  }
}; 
```

所以`element.keyup`实际上是一个以函数为参数的函数调用。

看到这个，我试了

```
remoteTable =
  bindEvents: (element) ->
    element.keyup _.debounce((event) ->
      console.log(event)
    ,250)
  send: (event) ->
    console.log(event) 
```

并得到：

```
var remoteTable;

remoteTable = {
  bindEvents: function(element) {
    return element.keyup(_.debounce(function(event) {
      return console.log(event);
    }, 250));
  },
  send: function(event) {
    return console.log(event);
  }
}; 
```

我没有尝试过任何事情，但我不知道为什么这不起作用。我不得不承认对咖啡脚本做的不多，但它看起来很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:58:37.620

您可以为此使用简单的超时，无需花哨。

```
remoteTable =
  bindEvents: (element) ->
    timeout = null
    element.keyup (event) ->
      clearTimeout(timeout)
      timeout = setTimeout(remoteTable.send, 250)

  send: ->
    console.log('Sending request...') 
```

# mysql - 用于选择多个美国州或“全部”的模式设计

> ID：14000396
> 
> 赞同：3
> 
> 时间：2012-12-22T05:42:48.180
> 
> 标签：mysql, schema

作为一个简化的示例，假设我正在销售小部件。我在全国范围内销售它们（在美国和加拿大），但有些只能在某些地区（美国的一个或多个州或加拿大省）销售。

我想要一种存储此信息的好方法，以及一种快速查询给定用户可用的小部件的方法。“美国、50 个州和华盛顿特区”是最常见的值，所以我宁愿不插入 51 行。

MySQL 不支持位图索引，因此排除了这一点。

以下是一些组合：

*   美国 50 个州和哥伦比亚特区
*   美国 50 个州、哥伦比亚特区、加拿大，但不包括魁北克。
*   美国 48 个州和华盛顿特区
*   美国，DC，但不是科罗拉多
*   美国、哥伦比亚特区和领地（波多黎各等）。

我的用户将为他们的州/省和国家/地区提供一个值。

你能推荐一个提供良好存储和快速匹配的模式吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:36:17.140

您应该构建预定义的值集并将此集存储到项目中。使用值可以检索匹配集和匹配项。

```
CREATE TABLE `valuesets` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `valueset_items` (
  `valueset_id` int(11) unsigned NOT NULL,
  `value` varchar(20) NOT NULL DEFAULT '',
  PRIMARY KEY (`valueset_id`,`value`),
  CONSTRAINT `fk_valueset_items_valueset` FOREIGN KEY (`valueset_id`) REFERENCES `valuesets` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

```
CREATE TABLE `items` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '',
  `valueset_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_items_valueset` (`valueset_id`),
  CONSTRAINT `fk_items_valueset` FOREIGN KEY (`valueset_id`) REFERENCES `valuesets` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

选择与特殊值匹配的所有项目

```
SELECT *
FROM items
WHERE 
  valueset_id IN ( SELECT valueset_id 
                   FROM valueset_items 
                   WHERE `value` = 'A' ) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/47617/4/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:48:17.623

这是一种 MySQL [SET](http://dev.mysql.com/doc/refman/5.0/en/set.html)类型，假设您可以将数据集减少到 64 个项目（或者，根据其他条件使用多个集合）。

* * *

我想我会扩展我的答案，因为我认为有些人只是不了解集合的力量。示例表：

```
CREATE TABLE `Test` (
  `setid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `setname` varchar(64) NOT NULL,
  `setstate` set('AK','AL','AR','AZ','CA','CO','CT','DC','DE','FL','GA','HI','IA','ID','IL','IN','KS','KY','LA','MA','MD','ME','MI','MN','MO','MS','MT','NC','ND','NE','NH','NJ','NM','NV','NY','OH','OK','OR','PA','RI','SC','SD','TN','TX','UT','VA','VT','WA','WI','WV','WY') NOT NULL,
  PRIMARY KEY (`setid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

insert into `Test` values('1','test','AZ,CA,NJ,NM,NY,VA,VT'); 
```

请注意，我们对状态使用单个集合字段。更复杂的用途可能需要使用多个集合，但每条记录稍微水平的 qword 可能比在查找表上添加大量的额外连接操作更便宜，而查找表上很容易达到大量记录。

以下是 3 个（功能上）等效的拉动。请注意，位掩码是提取此数据的最快方法：

```
SELECT * FROM Test WHERE setstate & 1000; 
```

对于测试 #1，我们使用 1000 作为位掩码，因为这对应于我们列表 (AZ) 中的项目 #4。到目前为止，这是最快的方法......并且存储这些数据的方法很少，可以为您提供更快的结果潜力。

```
SELECT * FROM Test WHERE setstate LIKE '%AZ%'; 
```

这种方法可以使用索引，但是由于模糊匹配会有些慢。

```
SELECT * FROM Test WHERE FIND_IN_SET('AZ',setstate); 
```

这种方法将比模糊匹配更快，但它的本质在大多数实际使用中几乎需要使用临时表。

# php - 从子域提交 HTML 表单，但由域处理。是否可以？

> ID：14000399
> 
> 赞同：0
> 
> 时间：2012-12-22T05:43:08.987
> 
> 标签：php, html

我有这个简单的 html 表单：

```
<form action="../../process.php" method="POST">
----SOME INPUT HERE----
<input type="submit" value="Submit">
</form> 
```

并且该表单位于此文件夹下：**/public_html/userweb/subdomain.domain.com/form.php**而 process.php 位于**/public_html**文件夹下。

问题是... /public_html/userweb/subdomain.domain.com 实际上是子域的根文件夹，而 /public_html 是 TLD 的根文件夹。

我的问题是可以通过 TLD 在子域过程中提交 HTML 表单吗？如果是这样，该怎么做？因为该表单总是在 subdomain.domain.com/process.php 下搜索 process.php 而不是 domain.com/process.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T05:49:55.807

表单操作可以是*任何*url。例如，此表单向 google 提交搜索查询：

```
<form action="http://www.google.com/">
    <p><input name="q"></p>
</form> 
```

要按照您的描述进行操作，只需使用完整的 url 作为您的`action`，例如`//domain.com/process.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T05:47:54.400

的可以是任何 URL，但不是服务器中的路径`action`。`form`

您只需要设置如下操作：

```
<form action ="//domain.com/process.php" method="post"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:46:39.367

AJAX 将其发送到您要发送到的域，并将其发送为`jsonp`.

编辑：我在考虑[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，您可以在其中限制可以跨域传输的数据类型。

# java - ArrayList 的数字

> ID：14000400
> 
> 赞同：0
> 
> 时间：2012-12-22T05:43:12.160
> 
> 标签：java

我的阵列有问题。我希望每次单击“ButtonNew”memberId 时都会自动增加 ex：第一次单击时为 2012-000001，然后第二次单击时为 2012-0000002（2012 年恰好是今天，“000001”是我的数组大小）。但当然我希望如果我再次点击（例如：2012-000003）然后我取消了信息（意味着 2012-000003 没有保存在我的数据库中）我的下一次点击仍然是 2012-000003 因为我没有保存。但如何？我真的需要 arraylist 还是计算我的数据库中的行数，然后将其设为大小？这是我的构造函数：

```
 public Member() {
    NumberFormat formatter = new DecimalFormat("000000");
    int size=0;
    size= this.accounts.size()+1;
    this.setMemberId(""+yearToday + "-" + (formatter.format(size)));

} 
```

我不知道我要怎么写 this.accounts.add(); 因为我不知道要添加什么。这是我的 ButtonNew 操作

```
 String last = "";
    Member memb = new Member();
    last = memb.getMemberId();
    this.txtMembersID.setText((last)); 
```

这实际上有效，但仅显示 2012-000001。意味着我的阵列不工作请。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:33:17.433

**已编辑**

我认为你需要更多的java基础。

```
public class Member {

    String memberId;

    public Member() {
        //generally we don't do to much things here.
    }

    //getters & setters
}

public class ArrayTest {

    public static final NumberFormat fmt = new DecimalFormat("000000");

    public static void main(String[] args) {

        // put this accounts field out of your Member class
        List<Member> accounts = new ArrayList<Member>();
        // TODO fetch your data from database

        for (int i = 0; i < 10; i++) {
            int size = accounts.size() + 1;
            Member member = new Member();
            member.setMemberId("" + 2012 + fmt.format(size));
            accounts.add(member);
        }
    }
} 
```

# java - void函数中的return语句有什么用

> ID：14000402
> 
> 赞同：3
> 
> 时间：2012-12-22T05:43:40.810
> 
> 标签：java, android, return

我是java新手，是什么`return;`意思？是这样的`break`吗？

```
 public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        } 
```

如果第二个`imageViewReused(photoToLoad)`返回 true，`BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad)`则不会执行，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T06:32:27.520

是的，有相似之处，但也有区别

*   `break`- 将停止循环并切换条件。只能用于 switch 和 loop 语句
*   `return`- 将完成函数执行，但不会执行此关键字下面的语句。只能用于任何功能。

****void函数****中关键字的使用**`return`**

 ****如果您`return`在这样的 void 函数中使用

```
void trySomething()
{
  Log.i("Try", "something");

  return;
  Log.e("Try", "something"); 
} 
```

此函数的执行已完成，但不会执行以下语句。

****关键字****的使用**`break`**

 ****对于任何循环语句

```
void tryLoop()
{
   while(true)
   {
      Log.d("Loop", "Spamming! Yeah!");
      break;
   }
} 
```

循环将停止并继续此函数的其余语句

对于开关条件

```
void trySwitch()
{ 
   int choice = 1;
   switch(choice)
   {
      case 0:
        Log.d("Choice", "is 0");
        break;
      case 1:
        Log.d("Choice", "is 1");
      case 2:
        Log.d("Choice", "is 2");
   }
} 
```

在切换条件中使用`break`也与循环相同。省略`break`将继续切换条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T05:44:35.377

是的，你可以像休息一样使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:46:58.513

是的，`return`是打破你对同一块的下一次执行。

有关`return` [检查此的更多信息](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T10:41:23.563

`return`结束调用它时出现的方法的执行。对于 void 方法，它只是退出方法体。对于非 void 方法，它实际上*返回*一个值（即`return X`）。请注意`try-finally`：请记住，即使您在该块中，该[`finally`块](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)也会被执行：`return``try`

```
public static void foo() {
    try {
        return;
    } finally {
        System.out.println("foo");
    }
}

// run foo in main 
```

```
富

```

[这](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)是了解更多关于`return`.

* * *

> 是这样的`break`吗？

从某种意义上说，这两个语句都“结束”了一个正在运行的进程；`return`结束一个方法并`break`结束一个循环。然而，重要的是要知道两者之间的区别以及何时应该使用它们。

> 如果第二个`imageViewReused(photoToLoad)`返回`true`，`BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad)`将不会被执行，对吗？

正确 -`return`如果执行该语句的主体`if`并且不会到达后续语句，则该方法将“”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T05:54:24.347

一个函数的执行完成，当它涉及到 return 语句，然后它返回到它的调用代码。在你的情况下，

如果`imageViewReused(photoToLoad)`为真，那么后面的代码块`return`将不会被执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T10:18:42.000

这里 return 充当函数的结尾。您可以通过将代码更改为来避免它，

```
 public void run() {
        if(!imageViewReused(photoToLoad))
        {
          Bitmap bmp=getBitmap(photoToLoad.url);
          memoryCache.put(photoToLoad.url, bmp);
          if(!imageViewReused(photoToLoad))
          {
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
          }
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-22T06:23:37.960

Return 语句跳过函数范围的剩余执行。

值得一读：

1.  `return`： [http ://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)
2.  `break`： [http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)********

# android - 在自定义启动器中绑定小部件

> ID：14000415
> 
> 赞同：3
> 
> 时间：2012-12-22T05:46:05.253
> 
> 标签：android, widget

我在我一直在使用的自定义启动器中将小部件添加到主屏幕时遇到了一些问题。

我已经能够生成要使用 AppWidgetManager 添加的小部件列表，并且我已经开发了将小部件添加到我的主屏幕的工作流程。该代码与下面的代码不完全一样，但看起来类似于以下内容：

```
AppWidgetHost widget_host = new AppWidgetHost(this, 1);
AppWidgetManager widget_manager = AppWidgetManager.getInstance(this);

int widget_id = widget_host.allocateAppWidgetId(); 
AppWidgetProviderInfo widget_provider = ... //from an array;

Intent bindIntent = new Intent(AppWidgetManager.ACTION_APPWIDGET_BIND);
bindIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widget_id);
bindIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_PROVIDER, widget_provider.provider);
startActivityForResult(bindIntent, REQUEST_BIND_APPWIDGET);

if (widget_provider.configure != null) {
    Intent intent = new Intent(AppWidgetManager.ACTION_APPWIDGET_CONFIGURE);
    intent.setComponent(widget_provider.configure);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widget_id);
    startActivityForResult(intent, REQUEST_CREATE_APPWIDGET);
} else {
    createWidget(widget_id);
} 
```

然后我有一个 onActivityResult 方法，如果需要，它会导致小部件的配置，createWidget 方法使用 AppWidgetHost 的 createView 方法。

此工作流程有效，但 ACTION_APPWIDGET_BIND 意图要求用户授予绑定应用程序的权限，这有点烦人。我的理解是，只有系统应用程序才能请求此权限，并且我在绑定小部件时运气不佳，而在应用程序运行时不请求此权限。另一方面，我知道还有很多其他的启动器，它们都可以无缝地添加小部件，所以必须有另一种方法来解决这个问题。

任何建议将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:27:43.303

希望这个问题仍然是开放的......

你在你的方法中做了太多的事情。在特定情况下，您会一个接一个地触发事件。我在 android 上工作的时间不长，所以我不能告诉你，这是否可以。

你总是在这里触发意图：

```
Intent bindIntent = new Intent(AppWidgetManager.ACTION_APPWIDGET_BIND);
bindIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widget_id);
bindIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_PROVIDER, widget_provider.provider);
startActivityForResult(bindIntent, REQUEST_BIND_APPWIDGET); 
```

上面的意图很可能导致了这个问题。您可以事先检查是否需要征求许可。你可以用这个例程询问：

```
Boolean callProviderIntent = false;
if (checkCallProviderIntent)
{
    callProviderIntent = true;
    Method m = null;
    try
    {
        m = AppWidgetManager.class
            .getMethod("bindAppWidgetIdIfAllowed", new Class[]
            { Integer.TYPE, ComponentName.class });
    }
    catch (NoSuchMethodException e)
    {
    }
    if (m != null)
    {
        try
        {
            callProviderIntent = !(Boolean) m
             .invoke(mAppWidgetManager,
                     appWidgetId,
                     launcherAppWidgetInfo.provider);
        }
        catch (Exception e)
        {
        }
    }
} 
```

它是虚拟代码。它使用反射，因为我在 Android 2.3 下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-27T10:04:40.353

这是我最终为我的应用程序找到的解决方案。

```
 AppWidgetManager manager = m.getAppWidgetManager();
            AppWidgetHost host = m.getWidgetHost();

            List<AppWidgetProviderInfo> widgetList = manager.getInstalledProviders();

            AppWidgetProviderInfo provider = null;
            for(AppWidgetProviderInfo info : widgetList){
                //To get the google search box
                if(info.provider.getClassName().equals("com.google.android.googlequicksearchbox.SearchWidgetProvider")){
                    provider = info;
                    break;
                }
            }
            if(provider != null){
                int id = host.allocateAppWidgetId();

                boolean success = false;
                success = manager.bindAppWidgetIdIfAllowed(id, provider.provider);
                if (success) {
                    AppWidgetHostView hostView = host.createView(getActivity(), id, provider);
                    AppWidgetProviderInfo appWidgetInfo = manager.getAppWidgetInfo(id);

                    LauncherAppWidgetInfo info = new LauncherAppWidgetInfo(id);
                    info.hostView = hostView;
                    info.hostView.setAppWidget(id, appWidgetInfo);
                    attachWidget(info);
                } else {
                    Intent intent = new Intent(AppWidgetManager.ACTION_APPWIDGET_BIND);
                    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, id);
                    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_PROVIDER,
                            provider.provider);
                    // TODO: we need to make sure that this accounts for the options
                    // bundle.
                    // intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_OPTIONS,
                    // options);
                    m.startActivityForResult(intent, Main.REQUEST_BIND_APPWIDGET);
                }

            }
        } 
```

# iphone - 当其他名为 viewcontroller 的 appdelegate 的计时器未按照我的代码更改时

> ID：14000416
> 
> 赞同：0
> 
> 时间：2012-12-22T05:46:26.170
> 
> 标签：iphone, objective-c, ios, xcode

当我单击开始时，appDelegate 中的事件计时器将启动，一段时间后我必须在计时器触发时显示一个视图。

我的问题是调用了计时器触发方法，但导航不推送视图控制器

```
-(IBAction)fakeCallCaled:(id)sender
{
      NSLog(@"FakeCall");
      fakeCallDesignViewController *fakeCallVC = [[fakeCallDesignViewController alloc]init];
      NSMutableArray *array = [[NSMutableArray alloc]init];
      [array addObjectsFromArray:navController.viewControllers];
      [array addObject:fakeCallVC];
      [navController setViewControllers:array];
      [array release];
      [fakeCallVC release];
} 
```

此方法在委托中

在 firstviewcontroller.m 中

```
 -(void)eventStarted
 {
        delegate.fakecallTimer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(fakeCallCaled:) userInfo:nil repeats:NO];
 } 
```

现在5秒后我会在日志中得到“FakeCall”但视图控制器不会改变

我也尝试推入 appdelegate

```
 -(IBAction)fakeCallCaled:(id)sender
  {
        NSLog(@"FakeCall");
        fakeCallDesignViewController *fakeCallVC = [[fakeCallDesignViewController alloc]init];
        [self.navigationController pushViewController:fakeCallVC animated:NO];
        [fakeCallVC release];
  } 
```

但我得到了同样的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:00:35.643

为什么要为这样的任务使用计时器，请使用：

```
[self performSelector:@selector(fakeCallCaled:) withObject:self afterDelay:5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:11:15.730

您可以为此开始使用块。`fakeCallCaled`在这种情况下，您根本不需要该方法。只需在您的方法中添加以下代码`eventStarted`，它应该可以工作。并确保您正在像这样在主线程中进行 UI 工作。

```
-(void)eventStarted
 {
   double delayInSeconds = 5.0;
   dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
   dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        NSLog(@"FakeCall");
        fakeCallDesignViewController *fakeCallVC = [[fakeCallDesignViewController alloc]init];
        [self.navigationController pushViewController:fakeCallVC animated:NO];
        [fakeCallVC release];
   }); 
} 
```

# java - 哪个是更合法的递归辅助方法？

> ID：14000434
> 
> 赞同：1
> 
> 时间：2012-12-22T05:49:32.033
> 
> 标签：java, methods, recursion, helper

我的任务是为一个测试用户输入的回文的类编写方法。该类必须有一个递归方法，并且该方法必须调用一个辅助方法来删除空格、标点符号并忽略大小写。

我有两个工作类来做这些事情，但我想知道哪个结构效果更好，哪个辅助方法实际上适合辅助方法的描述。

这是第一堂课：

```
public class RecursivePalindrome
{

public boolean Palindrome(String s)
{
    return PalindromeHelper(s);
}

public boolean PalindromeHelper(String s)
{
    String a = s.toLowerCase();    //Converts any capital letters to lowercase beforte analyzing the string
    a = a.replaceAll(" ", "");    //Removes any and all spaces in the string

    for(int i = 0; i < a.length(); i++)     //Removes punctuation by using isLetter method from Character Class
    {
        if(Character.isLetter(a.charAt(i)) == false)
            a = a.replace(a.substring(i, i+1), "");
    }

    if(a.length() == 0 || a.length() == 1)
        return true;
    else if(a.charAt(0) == (a.charAt(a.length() - 1)))
        return PalindromeHelper(a.substring(1, a.length() - 1));
    else
        return false;
}
} 
```

第二个：

```
public class Recurs
{

public boolean Palindrome(String s)
{
    String l = PalindromeHelper(s);

    if(l.length() == 0 || l.length() == 1)
        return true;
    else if(l.charAt(0) == (l.charAt(l.length() - 1)))
        return Palindrome(l.substring(1, l.length() - 1));
    else
        return false;
}

public String PalindromeHelper(String s)
{
    s = s.toLowerCase();    //Converts any capital letters to lowercase before analyzing the string
    s = s.replaceAll(" ", "");    //Removes any and all spaces in the string

    for(int i = 0; i < s.length(); i++)     //Removes punctuation by using isLetter method from Character Class
    {
        if(Character.isLetter(s.charAt(i)) == false)
            s = s.replace(s.substring(i, i+1), "");
    }
    return s;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:46:55.033

A couple of things before we get to the code...

A "helper" method is more usually called a *utility* method, which is a *stateless* piece of code - being stateless:

*   it should be declared as `static`

Adhering to java naming conventions is a great idea, so:

*   method names start with a lowercase letter
*   boolean methods start with `is` if reasonable to do so

So, your "helper" method should look like this:

```
private static String clean(String s) {
    return s.toLowerCase().replaceAll("[^a-z]", "");
} 
```

This method does everything your method does, but in a fraction of the code.

Because your main method is also stateless, it too should be static, unless it is required to be an instance method because of class hierarchy or interfaces etc.

Thus, your main method should be:

```
public static boolean isPalindrome(String s) {
     return isPalindromeClean(clean(s));
}

private static boolean isPalindromeClean(String s) {
    return s.length() < 2 || a.endsWith(s.charAt(0)) && 
        isPalindromeClean(l.substring(1, l.length() - 1));
} 
```

Again, one line of code does it all. Some things to note:

*   your code calls the "clean" method *every* recursion, but by creating a second method, I avoid this inefficiency.
*   the use of `endsWith()` to both simply and clarify the condition
*   the use of a single simple return statement that encapsulates the logic

The whole class becomes the following, with just 3 lines of actual code.

```
public class Recurse {

    public static boolean isPalindrome(String s) {
         return isPalindromeClean(clean(s));
    }

    private static boolean isPalindromeClean(String s) {
        return s.length() < 2 || a.endsWith(s.charAt(0)) && 
          isPalindromeClean(l.substring(1, l.length() - 1));
    }

    private static String clean(String s) {
        return s.toLowerCase().replaceAll("[^a-z]", "");
    }
} 
```

I wouldn't bother even having the clean method - I would simply in-line it like this:

```
public static boolean isPalindrome(String s) {
    return isPalindromeClean(s.toLowerCase().replaceAll("[^a-z]", ""));
} 
```

But if you've been set an assignment that says you have to create it then you're stuck with it. I would show this alternative though.

Usually, the more elegant the code, the less there is of it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:08:34.073

我会这样写。

```
class RecursivePalindrome
{

    public boolean Palindrome(String s)
    {
        //Think about using a stringbuilder instead of a string.

        String a = s.toLowerCase(); // Converts any capital letters to lowercase
                                    // beforte analyzing the string
        a = a.replaceAll(" ", ""); // Removes any and all spaces in the string

        for (int i = 0; i < a.length(); i++) // Removes punctuation by using
                                             // isLetter method from Character
                                             // Class
        {
            if (Character.isLetter(a.charAt(i)) == false)
                a = a.replace(a.substring(i, i + 1), "");
        }
        return validatePalindrome(a);
    }

    public boolean validatePalindrome(String s)
    {
        if (s.length() == 0 || s.length() == 1)
            return true;
        else if (s.charAt(0) == (s.charAt(s.length() - 1)))
            return PalindromeHelper(s.substring(1, s.length() - 1));
        else
            return false;
    }
} 
```

# heroku - Heroku 维护 URL 不重定向

> ID：14000437
> 
> 赞同：1
> 
> 时间：2012-12-22T05:49:50.077
> 
> 标签：heroku

出于测试目的，我在 heroku 中添加了 url [http://google.com](http://google.com)作为维护 URL。当我打开维护模式并尝试访问我的页面时，我得到了一个丑陋的响应，而不是被重定向到谷歌。其他人有这个问题还是我没有得到什么？

顺便说一句：重定向到错误 URL 工作得很好。

这是我得到的回应：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
      <style type="text/css">
        html, body, iframe { margin: 0; padding: 0; height: 100%; }
        iframe { display: block; width: 100%; border: none; }
      </style>
    <title>Offline for Maintenance</title></head>
    </head>
    <body>
      <iframe src="http://google.com">
        <p>Application Error</p>
      </iframe>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:43:55.927

根据 Heroku 支持，这是预期的行为。他们不执行重定向，而只是将页面作为 iframe 包含到他们自己的 HTML 文件中。

太糟糕了，如果您在 Heroku 上托管一个以 JSON 左右返回响应的 API，那效果就不太好了。

# c# - Youtube 通过帖子发送私人消息

> ID：14000443
> 
> 赞同：0
> 
> 时间：2012-12-22T05:51:06.453
> 
> 标签：c#, vb.net, http, post, youtube

我正在尝试在 Youtube 的私人消息中创建一个 Post Method。

继承人 URL “所有 url 都删除了点和 http://，以防止此问题作为垃圾邮件被阻止”

```
www_youtube_com/inbox?feature=mhee&folder=messages 
```

在 C# 中，我已经创建了“登录”发布方法，下面是代码片段：

```
Dim url As String = "https://accounts.google.com/ServiceLogin?passive=true&hl=pt_BR&service=youtube&continue=https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26hl%3Dpt_BR%26next%3D%252F%26nomobiletemp%3D1&uilel=3"
Dim formUrl As String = url
Dim formParams As String = String.Format("Email={0}&Passwd={1}", "*********", "**********")
Dim cookieheader As String

Dim req As WebRequest = WebRequest.Create(formUrl)
req.ContentType = "application/x-www-form-urlencoded"
req.Method = "POST"
Dim bytes() As Byte = Encoding.ASCII.GetBytes(formParams)
req.ContentLength = bytes.Length
Using os As Stream = req.GetRequestStream()
    os.Write(bytes, 0, bytes.Length)
End Using
Dim resp As WebResponse = req.GetResponse()
cookieheader = resp.Headers("Set-cookie")
cookies.SetCookies(resp.ResponseUri, resp.Headers("Set-cookie"))
resp.Close()

'starts sending msg
Dim httpreq As HttpWebRequest = WebRequest.Create("http://www.youtube.com/inbox_ajax")
httpreq.ContentType = "application/x-www-form-urlencoded"
httpreq.Method = "POST"
formParams = String.Format("action_ajax=1&type=send_message&message_text={2}&subject={1}&to_users={0}&video_id={3}", "user", "subject", "message_body", "videoid")
bytes = Encoding.ASCII.GetBytes(formParams)
httpreq.ContentLength = bytes.Length
httpreq.CookieContainer = cookies
httpreq.Headers.Add("Cookie", cookieheader)
Using os As Stream = httpreq.GetRequestStream()
    os.Write(bytes, 0, bytes.Length)
End Using
resp = httpreq.GetResponse() 
```

用户、主题、message_body 和 videoid 字段填充了真实数据以进行正确测试......

我已经尝试有时更改 HTTPREQ URL，因此它可以匹配 youtube 表单网站，但是，使用 firebug，我捕获了这些信息：

当我使用 Firebug 在 Firefox 中手动执行该帖子时出现的 URL：

```
www_youtube_com/inbox_ajax?action_ajax=1&type=send_message 
```

```
Message Parameters:
[{"type":"send_message","request":{"message_text":"Test6","subject":"Test5","to_users":"HTDANILO","video_id":"ph0TNYQllRQ"}}] 
```

萤火虫还说Referer站点是：

```
www_youtube_com/inbox?feature=mhee&folder=messages 
```

但我已经尝试在那里发帖，也在[http://www.youtube.com/inbox](http://www.youtube.com/inbox)尝试过，但都没有成功。

有人可以指出我，所以我可以理解为什么它不起作用？

抱歉英语不好，不是我的母语，谢谢你的建议！

# php - MySQL 选择 CURDATE 和 ORDER

> ID：14000444
> 
> 赞同：1
> 
> 时间：2012-12-22T05:51:12.673
> 
> 标签：php, mysql, select, pdo

我已经有一个 mySQL 语句，它已经从数据库中选择了一些东西并按壁橱日期对其进行排序，但它选择了所有内容，我希望它只选择它并在“类别”等于某个值（例如“1”）时对其进行排序。所以我的问题是我会使用“AND”这个语句是什么，这是我已经拥有的选择语句：

```
 SELECT `name` 
 FROM `event` 
 WHERE `displaydate` >= CURDATE() 
 ORDER BY `displaydate` 
```

这是我认为的样子：

```
 SELECT `name` 
 FROM `event` 
 WHERE `category` = 1 AND `displaydate` >= CURDATE() 
 ORDER BY `displaydate` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:53:58.877

是的，鉴于第一个语句有效并且该类别是整数，您的陈述是正确的。

# c++ - 上下文信息不足，无法确定类型

> ID：14000446
> 
> 赞同：1
> 
> 时间：2012-12-22T05:51:23.553
> 
> 标签：c++, compiler-errors, c++03

我已经完成了研究，但我根本无法理解这条信息。我发现的一切似乎都是编译器本身的错误。我还在某处读到*“上下文信息不足，无法确定类型”不是有用的信息*。
**我的问题：是否有人知道此编译错误消息的含义？**
我知道这个问题可能是特定于代码的。我的代码仅声明了一个全局匿名结构，然后一旦它尝试在函数中访问它，我就会收到此错误（或者我已经对其进行了评估）。
编辑：我得到了我的代码来编译！- 但我仍然不知道错误是什么意思，所以我会留下这个问题。
编辑：这是我的代码，据我认为很重要：

```
 typedef ofstream::pos_type ofilepos;
    struct stack  // stack is my own stack data-structure
    {
      // ...
      // int L; struct N *l;
      stack(): L(0), l(NULL) {}
    }

    // ...

    struct
    {
      const char* zero;
      stack<ofilepos> chunks; // it was 'chunks();' with (), and it didn't work
    } _fileext = {"\0\0\0"};

    // ...

    ofstream& write_stack_pushsize(ofstream& f)
    {
      _fileext.chunks.push(new ofilepos(f.tellp()));
      f.write(_fileext.zero,4);
      return f;
    } 
```

我认为这可能是因为我在结构声明中调用了一个构造函数，而不是稍后......或者其他什么......这可能是 C++03 中的一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:14:19.707

关于这段代码，

```
struct
{
  const char* zero;
  stack<ofilepos> chunks();
} _fileext = {"\0\0\0"}; 
```

没有办法`chunks`在匿名结构定义之后提供成员函数的定义。

还考虑以下使用示例，

```
ofstream& write_stack_pushsize(ofstream& f)
{
  _fileext.chunks.push(new ofilepos(f.tellp()));
  f.write(_fileext.zero,4);
  return f;
} 
```

显然您的意思是定义`chunks`为数据成员而不是函数成员。

顺便说一句，在名称开头使用下划线可能会与标准库实现中的名称冲突。例如，这些名称保留在全局命名空间中（如果我没记错的话）。*通常的约定是在名称末尾*加上下划线，以表示“成员”。

为了表示“全局”，我只需使用我称之为的命名空间`g`。:-)

# php - jquery自动表单提交问题

> ID：14000447
> 
> 赞同：0
> 
> 时间：2012-12-22T05:51:52.680
> 
> 标签：php, jquery

我有一个简单的表单，其中一个字段是随机的 javascript 文件，其名称范围从 1 到 500000，所以我使用 rand 函数填充其字段而没有任何问题

我希望在加载后自动提交表单，但我不希望刷新页面，甚至我不希望在提交表单后更改字段值。我的代码很清楚，但不知道为什么它不起作用

索引.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

 <title>testing</title>
 </head>

<body>

 <script type="text/javascript" >
 $(function() {
$("form1#form1").submit(function() {
 var searchBox = $("#searchBox").val();
 var dataString = 'searchBox='+ searchBox ;
if(searchBox=='')
 {
  $('.success').fadeOut(200).hide();
  $('.error').fadeOut(200).show();
 }
 else
{
 $.ajax({
 type: "POST",
 url: "test34.php",
 data: dataString,
  success: function(){
  $('.success').fadeIn(200).show();
 $('.error').fadeOut(200).hide();
 }
 });
 }
 return false;
 });
 });

 </script>

    <form method="post" name="form1" id="form1" enctype="multipart/form-data">
<input type="text" class="status" name="searchBox" id="searchBox"        value="<?= "".rand(1,2889889).".js"; ?>">

    <input class="button" type="submit" value="Submit" /></form>

    </body>
    </html> 
```

test34.php

```
 <?php
    include('connect.php'); 
    $title23 =  $_POST['searchBox'];
mysql_query("insert into test (title) values('$title23')");

    echo $title23;

 ?> 
```

但它没有自动提交表格请告知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:55:46.153

将提交方法绑定到表单后，尝试通过执行此操作来触发提交方法。

```
 return false;
    });

    $("form1#form1").trigger('submit'); // Here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:14:59.400

您的选择器应该看起来像这样`$("form#form1")`，而不是`$("form1#form1")`

# php - Nginx：将所有不存在的请求重定向到 index.php

> ID：14000451
> 
> 赞同：8
> 
> 时间：2012-12-22T05:52:23.560
> 
> 标签：php, url-rewriting, nginx

我正在从 Apache 迁移到 Nginx。

我目前正在使用自定义内容管理解决方案，该解决方案利用 SERVER['request_uri'] 来处理路由。

我想要做的是将所有不存在的文件和目录请求重定向到 /index.php，而不是更新客户端 uri。但是，当文件确实存在时，我想返回它。

示例 url 将是：localhost/content/page/1 <- 应该将 $_SERVER['request_uri'] 填充为 /content/page/1 或 localhost/public/script/exists.js <- 应该作为实际返回文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T06:18:24.763

您需要在 nginx **vhost**文件中添加`location /`块或更新当前块。`location /`

 **`index.php`如果找不到文件或目录，这会将所有请求重定向到：

```
location / {
    try_files $uri $uri/ /index.php;
} 
```

这在您的服务器指令中，有关更多信息，请访问[http://wiki.nginx.org/HttpCoreModule](http://wiki.nginx.org/HttpCoreModule)

修改 vhost 文件后，您需要**重新启动 nginx**

**注意：**服务器块的 try_files 指令是在 0.7.44 中添加的**

# linux - 使用 sed/awk/grep 从 HTML 中解析包的版本？

> ID：14000464
> 
> 赞同：0
> 
> 时间：2012-12-22T05:55:02.797
> 
> 标签：linux, parsing, sed, awk, grep

我一直在互联网上搜寻某种线索，但无济于事。我需要一个 sed/awk/grep 命令来解析一些文本。文字太大，无法在此处发布，但如果您运行

`curl -l "https://aur.archlinux.org/rpc.php?type=search&arg=wine"`

你会明白我的意思。基本上，我只需要显示搜索中返回的所有内容的版本号。如果您能向我解释 sed/awk/grep 语法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:59:42.720

回馈给您的是 JSON 结构。你不解析它，你编写一个程序来做它。

这不是 sed、awk 或 grep 能够做到的。您需要用 Perl 之类的语言编写一个使用 JSON Perl 模块的程序。每种语言都有一个模块来解析 JSON 并将其放入该语言的数组或结构格式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:41:20.960

如果我要从 shell 中的文本中提取内容，我会首先考虑 grep。

```
grep -oP '(?<="[vV]ersion":")[^"]*' 
```

这将为您提供所有版本。（输出中只有版本/版本信息）

在您的情况下，您可能想尝试一下：

```
 curl -l "https://aur.archlinux.org/rpc.php?type=search&arg=wine"|grep -oP '(?<="[vV]ersion":")[^"]*' 
```

# linux - nginx 作为运行 apache 的反向代理

> ID：14000467
> 
> 赞同：2
> 
> 时间：2012-12-22T05:55:28.360
> 
> 标签：linux, nginx, apache2, kloxo

我在配置`nginx`为反向代理时遇到了一些麻烦。

可以说我有一个 VPS，在我的 VPS`kloxo`上`webmin`安装并运行多个域。

我已经`nginx`通过`REPEL`and安装了`YUM`，这是我`/etc/nginx/nginx.conf`在这个[链接](http://pastebin.com/2yCndm6B)中给出的文件。

我将apache端口更改为8080并重新启动服务以进行更改并启动nginx，但出现了一些问题。

当我尝试访问我的 centos vps 上的每个域时，我面对的是`APACHE START PAGE (WELCOME PAGE)`，当我在浏览器中输入我的 VPS IP 时`x.x.x.x`，我面对的是`NGINX START PAGE (WELCOME PAGE)`.

我想`nginx`提供我的静态文件并将动态文件重定向到以`Apache`获得更好的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:42:55.663

Nginx Http Server 一书第 235 页有一个示例。

```
server {
    server_name .example.com;
    root /home/example.com/www;
    location ~* \.php.$ {
        # Proxy all requests with an URI ending with .php*
        # (includes PHP, PHP3, PHP4, PHP5...)
        proxy_pass http://127.0.0.1:8080;
    }
    location / {
        # Your other options here for static content
        # for example cache control, alias...
        expires 30d;
    }
} 
```

# vb6 - 如何调试 GPF 崩溃？

> ID：14000474
> 
> 赞同：1
> 
> 时间：2012-12-22T05:56:07.577
> 
> 标签：vb6, crash, crash-dumps

我有一个旧的 VB6 应用程序，它使用了很多 3rd 方组件，不仅是视觉组件，而且还用于音频处理、tcp/udp、VoIP 等......

当我将应用程序作为 EXE 运行时（例如不在 VB6 IDE 中），它有时会因 GPF 而崩溃。它发生在程序运行了几天之后，并且在周围没有人时发生。

不幸的是，用户截取了屏幕截图，但它通常没有任何有用的信息。崩溃的描述报告说，崩溃发生在`ntdll.dll`.

![在此处输入图像描述](../Images/50e4be899e408b7cc77df6f98555eeef.png)

我的问题：

1.  我需要什么工具来调试它？
2.  我如何真正开始？
3.  我有 VB6 中编译的 PDB 文件。该应用程序编译为`Optimize for Fast Code`. 在这种情况下我能对他们做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:07:29.500

我会使用 ntsd 或 windbg ( [link](http://msdn.microsoft.com/en-US/windows/hardware/gg463009/) )，并在任一用户模式调试器下运行应用程序（如果您不熟悉，它们具有相同的命令 - ntsd 是控制台调试器，而 windbg 是 GUI 调试器）。两者都有很多命令行选项，但 ntsd appname.exe 足以开始使用。使用 .sympath 命令将调试器指向符号，您应该已经在路上了。当崩溃发生时，您可以检查变量和堆栈以找出可能丢失的内容。

顺便说一句 - 上面的错误是无效句柄错误，因此程序可能将过时或 NULL 句柄传递给 Windows 函数。调试器会告诉你更多。

# asp.net - 何时使用 ASP.NET Web API？

> ID：14000478
> 
> 赞同：10
> 
> 时间：2012-12-22T05:57:28.297
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我开始探索 ASP.NET Web API。

1.  我们什么时候应该使用 ASP.NET Web API？
2.  它与 MVC 项目结合的好处？
3.  我们甚至可以在 ASP.NET 中使用它吗？

# r - 如何将数据框指定为时间序列？

> ID：14000480
> 
> 赞同：3
> 
> 时间：2012-12-22T05:57:31.637
> 
> 标签：r, xts, zoo

我正在将时间序列数据加载到 R 中进行分析。我试图滞后一个变量以区分系列。不幸的是，差异变量的值都等于 0，因为 R 没有成功地滞后于权重变量。我知道我应该使用 as.ts(data$date) 来指定“日期”变量是一个时间序列，但每次我这样做时，它都会将“日期”变量更改为数字。更不用说我认为我在最初加载数据集中的“日期”列是一个时间/日期变量。如何将 data.frame 指定为时间序列？

```
data=read.csv("filelocation",header=T,colClasses=c("Date","numeric")

  date   weight
2010-10-04 52495    
2010-10-01 53000    
2010-09-30 52916    
2010-09-29 52785    
2010-09-28 53348    
2010-09-27 52885    
2010-09-24 52174    
2010-09-23 51461    
2010-09-22 51286    
2010-09-21 50968    
2010-09-20 49250

data=data[order(data$date),]
diffweight1=weight-lag(weight,1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T09:56:36.413

试试这个：

```
library(zoo)

z <- read.zoo("filelocation", header = TRUE, sep = ",")
diff(z) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T07:12:11.200

当您操作时间序列时，最好使用（zoo 或 xts）包。很多时间序列运算由于滞后，diff 变得非常简单。

这里是一个使用 xts 包的例子（我更喜欢这个）

```
# I read your data
dat <- read.table (text = 'date   weight
2010-10-04 52495    
2010-10-01 53000    
2010-09-30 52916    
2010-09-29 52785    
2010-09-28 53348    
2010-09-27 52885    
2010-09-24 52174    
2010-09-23 51461    
2010-09-22 51286    
2010-09-21 50968    
2010-09-20 49250',header=TRUE)
# I construct my xts object
dat.xts <- xts(dat$weight,order.by=as.POSIXct(dat$date))
# new 2 columns withs lags(1) and diff

merge(dat.xts, ll = lag(dat.xts),dd =diff(dat.xts))
           dat.xts    ll   dd
2010-09-20   49250    NA   NA
2010-09-21   50968 49250 1718
2010-09-22   51286 50968  318
2010-09-23   51461 51286  175
2010-09-24   52174 51461  713
2010-09-27   52885 52174  711
2010-09-28   53348 52885  463
2010-09-29   52785 53348 -563
2010-09-30   52916 52785  131
2010-10-01   53000 52916   84
2010-10-04   52495 53000 -505 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T06:12:53.857

我觉得您需要的是 weight col 相邻行之间的差异您可以尝试：

```
weight <- c(20,40,70,110)
diff(weight)
[1] 20 30 40 
```

因为 40 - 20 = 20, 70 - 40 = 30 等等类似地尝试时间序列的 difftime 以防万一

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T06:33:47.197

时间序列对象旨在跟踪在等间隔时间点采样的数据。您的采样间隔不均匀，但`ts(data)`似乎可以满足您的要求。

# django - Django 事务管理是否适用于 update()？

> ID：14000481
> 
> 赞同：0
> 
> 时间：2012-12-22T05:57:47.967
> 
> 标签：django, transactions

`save()`生成 SQL 命令并发出信号，而`update()`仅生成原始 SQL。我觉得事务管理也将起作用`update()`。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:08:37.993

是的，事务管理将适用于`update`语句，就像它适用于`save`.

# python - 使用 Python API 创建产品时未收到 Shopify 的响应

> ID：14000483
> 
> 赞同：2
> 
> 时间：2012-12-22T05:58:34.877
> 
> 标签：python, django, api, google-app-engine, shopify

我正在使用 Python API 创建具有 5 个变体的产品。我已经成功地在商店中创建了产品，没有问题。我遇到的问题是创建产品后，我没有收到 Shopify 的回复。因此，我从服务器中的 API 收到 HttpException。

我可以处理这个问题，但我需要能够创建产品并使用新创建的产品的 Variant ID 填充表单。我试图通过 Ajax 调用来启动对 Shopify 的服务器调用，但我也尝试了对服务器的同步请求，但我仍然没有收到 Shopify 的响应。

产品详情如下：

```
custom_product = shopify.Product()
custom_product.product_type = 'Custom Shirt'
custom_product.body_html = '&lt;strong&gt;Custom Shirt&lt;/strong&gt;'
custom_product.title = 'Custom Shirt'
variant1 = shopify.Variant(dict(price=0, option1='Small'))
variant2 = shopify.Variant(dict(price=0, option1='Medium'))
variant3 = shopify.Variant(dict(price=0, option1='Large'))
variant4 = shopify.Variant(dict(price=0, option1='Extra Large'))
variant5 = shopify.Variant(dict(price=0, option1='2XL'))
variant6 = shopify.Variant(dict(price=price, option1='Bundle'))
custom_product.variants = [variant1,variant2,variant3,variant4,variant5, variant6]
# create images for front and back
front_image = shopify.Image(attributes=dict(shot='front'))
front_id = front_shirt_model.key().id()
front_image.src = 'http://myurl.com/img/'+str(front_id)
back_image = shopify.Image(attributes=dict(shot='back'))
back_id = back_shirt_model.key().id()
back_image.src = 'http://myurl.com/img/'+str(back_id)
custom_product.images = [front_image, back_image]

success = custom_product.save() 
```

我还应该提到我在 Google App Engine 上使用 Django。我尝试了不同的替代方法，例如使用 requests Python 库来创建请求 JSON 对象和连接等。如果有什么我忽略了，请告诉我。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:56:42.530

看起来这是由于 Google App Engine 施加了一个 http 超时，python 通常默认情况下没有。

[如何在 Google App Engine 中为 urlfetch 设置超时？](https://stackoverflow.com/a/12980842/1440192)说明如何将默认超时设置为最长 60 秒。

# java - 在 Android 中使用异常使应用程序崩溃

> ID：14000485
> 
> 赞同：10
> 
> 时间：2012-12-22T05:59:25.600
> 
> 标签：java, android, exception, crash

我只想让一个 Android 应用程序崩溃并在 Android 中使用显示“死亡对话框”（强制关闭对话框）`Exception`。是否可以？它是如何完成的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-22T06:33:38.427

您想要的是 a `RuntimeException`，否则编译器会强制您将代码移动到 try-catch 块中。

```
throw new RuntimeException("Crash!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T06:29:44.067

我认为您正在寻找 uncaughtExceptionHandler。

这是一个很好的例子，

[http://iamvijayakumar.blogspot.in/2012/09/android-uncaughtexceptionhandler.html](http://iamvijayakumar.blogspot.in/2012/09/android-uncaughtexceptionhandler.html)

在您的活动中使用此代码来注册未捕获的异常处理程序，

```
Thread.setDefaultUncaughtExceptionHandler(new UnCaughtException(MainActivity.this)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T06:14:15.730

尝试将任何错误的语句放在 try 块中，有很多异常可用`arithmetic`，`arrayindexoutofbounds`等等，然后在 catch 中执行您想要执行的操作。

并且为了显示 forceclose 对话框，默认情况下会出现 force close 对话框，当您没有捕捉到它时，您无需执行任何操作。

为什么要在应用程序崩溃时捕获异常？

# javascript - 使用 javascript 在 Onblur 事件的下拉菜单中选择选项

> ID：14000490
> 
> 赞同：0
> 
> 时间：2012-12-22T05:59:43.213
> 
> 标签：javascript, html, javascript-events

```
<select id="ddl_example4" name="ddl_example4">
<option value="1">item1</option>
<option value="2">item2</option>
<option value="3">item3</option>
<option value="4">item4</option>
<option value="5">item5</option>
<option value="6">item6</option>
</select>

</br>
<textarea rows="4" cols="50" id="tarea" onblur="myFunction()"></textarea>

<script>

function myFunction()
{

var x = document.getElementById("tarea");
iteminput = document.getElementById("ddl_example4");
var v = x.value.substring(5);
alert(v);

function setSelectedIndex(s, v) {
for ( var i = 0; i < s.options.length; i++ ) {
if ( s.options[i].text == v ) {
s.options[i].selected = true;
return;
}
}
}
}    
</script> 
```

在模糊时，我可以在警报框中获取值，但无法在下拉框中选择相同的值。我从其他站点复制了函数 setselectedindex。请让我知道我在这方面出了什么问题

还是有更好的方法来使用 javascript 实现相同的输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:06:41.540

您将`setSelectedIndex`函数包含在`myFunction`函数中，但实际上从未调用过它。

试试这个：

```
function myFunction()
{
    var x = document.getElementById("tarea");
    iteminput = document.getElementById("ddl_example4");
    var v = x.value.substring(5);
    setSelectedIndex(iteminput, v);
}    

function setSelectedIndex(s, v) {
    for ( var i = 0; i < s.options.length; i++ ) {
        if ( s.options[i].text == v ) {
            s.options[i].selected = true;
            return;
        }
    }
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:11:28.683

```
<select id="ddl_example4" onblur="selectOption()" name="ddl_example4">
<option value="1">item1</option>
<option value="2">item2</option>
<option value="3">item3</option>
<option value="4">item4</option>
<option value="5">item5</option>
<option value="6">item6</option>
</select>

/*
You can achieve it using jquery like this

Function selectOption()
{
$("#ddl_example4 option:selected").val();
OR
$("#ddl_example4").val();

*/To selct specific option just set it value......i,e to select "Item5"please use

$("#ddl_example4").val(5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T06:07:38.757

```
<select id="ddl_example4" name="ddl_example4">
<option value="1">item1</option>
<option value="2">item2</option>
<option value="3">item3</option>
<option value="4">item4</option>
<option value="5">item5</option>
<option value="6">item6</option>
</select>

</br>
<textarea rows="4" cols="50" id="tarea" onblur="myFunction()"></textarea>

<script>

function myFunction()
{

var x = document.getElementById("tarea");
var iteminput = document.getElementById("ddl_example4");
var v = x.value.substring(5);
alert(v);
setSelectedIndex(iteminput, v);
}

function setSelectedIndex(s, v) 
{
    for ( var i = 0; i < s.options.length; i++ ) 
    {
        if ( s.options[i].text == v ) 
        {
            s.options[i].selected = true;
            break;
        }
    }
}

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T06:10:29.550

```
<select id="ddl_example4" name="ddl_example4">
<option value="1">item1</option>
<option value="2">item2</option>
<option value="3">item3</option>
<option value="4">item4</option>
<option value="5">item5</option>
<option value="6">item6</option>
</select>

</br>
<textarea rows="4" cols="50" id="tarea" onblur="myFunction()"></textarea>

<script>

function myFunction()
{

var x = document.getElementById("tarea");
iteminput = document.getElementById("ddl_example4");
var v = x.value.substring(5);
alert(v);
s= iteminput;
setSelectedIndex(s, v);

}  

function setSelectedIndex(s, v) {
for ( var i = 0; i < s.options.length; i++ ) {
if ( s.options[i].text == v ) {
s.options[i].selected = true;
return;
}
}
}  
</script> 
```

尝试将文本框输入为“rrrrritem2”，然后您将在下拉列表中选择 item2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T06:11:21.927

功能未正确关闭。检查以下代码。

```
<select id="ddl_example4" name="ddl_example4">
<option value="1">item1</option>
<option value="2">item2</option>
<option value="3">item3</option>
<option value="4">item4</option>
<option value="5">item5</option>
<option value="6">item6</option>
</select>

</br>
<textarea rows="4" cols="50" id="tarea" onblur="myFunction()"></textarea>
<script>

    function myFunction()
    {

    var x = document.getElementById("tarea");
    iteminput = document.getElementById("ddl_example4");
    var v = x.value.substring(5);
    alert(v);
    }
    function setSelectedIndex(s, v) {
    for ( var i = 0; i < s.options.length; i++ ) {
    if ( s.options[i].text == v ) {
    s.options[i].selected = true;
    return;
    }
    }
    }   
    </script> 
```

# php - php会话值在移动到另一个页面时丢失

> ID：14000496
> 
> 赞同：-1
> 
> 时间：2012-12-22T06:01:24.953
> 
> 标签：php, session

我制作了一个简单的网站，用户可以在其中登录。我的问题是当用户输入地址`http://www.mysite.com/signin.php`并成功登录后，他手动输入地址，`http://mysite.com`但从该页面会话变量没有获取。如何`www.mysite.com,mysite.com`对两个地址进行相同的会话 php ini 文件中有任何设置，或者我如何设法对两个地址进行相同的会话？

```
if(verify($password,$pw['password']))
{   

    $uid=$pw['user_id'];
    $_SESSION['login_status']=true;
    $_SESSION['user']=$uid; 
```

} 我有一个页面 checksession.php

```
<?php 
session_start();
var_dump($_SESSION);
?> 
```

[当我从http://www.mysite.com/signin.php](http://www.mysite.com/signin.php)登录并检查[http://www.mysite.com/checksession.php](http://www.mysite.com/checksession.php)它显示会话值但从[http://mysite.com/checksession.php](http://mysite.com/checksession.php)它什么都不显示。（不同之处在于地址一个带www，另一个不带www）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:09:36.013

我通常强制 www。或没有 www。在我的 .htaccess 文件中使用重定向。

您的问题可能是您的 PHP_SESS_ID cookie 域不以“。”开头。

```
session_set_cookie_params ( 3600 , '/', '.example.com'); 
```

那应该设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:17:03.690

在你的之前添加这一行`session_start();`：

```
ini_set('session.cookie_domain', '.mysite.com' ); 
```

这应该告诉 PHP 在同一会话中包含 mysite.com 的所有子域，包括“www”。请注意域名前的句点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T10:49:03.987

另一种方法是使用 session_start(); 在 config.php 文件中，并将该文件包含在需要会话的每个页面的代码顶部，否则 U 将无法获得 SESSION 变量的值..！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-02-16T05:12:01.603

在页面地址调用之前使用*https://* ..

# php - ZF2 视图 url 助手忽略控制器和动作

> ID：14000497
> 
> 赞同：4
> 
> 时间：2012-12-22T06:01:29.287
> 
> 标签：php, zend-framework2

模块/应用程序/config/module.config.php

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
        'application' => array(
            'type'    => 'Segment',
            'options' => array(
                'route'    => '/application[/:action][/]',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
        ),
    ),
), 
```

在我的 IndexController.php 我有一个 indexAction() 和 validateAction() - （只是试验他们真的没有功能）

我可以得到很好的意见。但我在视图中写道：

```
echo $this->url('application',array('action' => 'validate')); 
```

它只是回声

```
/application/ 
```

我怎样才能让它与动作相呼应？我已经尝试了我能想到的一切，但找不到任何合理的文档或任何其他有同样问题的人。

这是配置页面加载时的 var_dump：

```
array(5) {
["router"]=>
array(1) {
    ["routes"]=>
    array(2) {
    ["home"]=>
    array(2) {
        ["type"]=>
        string(28) "Zend\Mvc\Router\Http\Literal"
        ["options"]=>
        array(2) {
        ["route"]=>
        string(1) "/"
        ["defaults"]=>
        array(2) {
            ["controller"]=>
            string(28) "Application\Controller\Index"
            ["action"]=>
            string(5) "index"
        }
        }
    }
    ["application"]=>
    array(2) {
        ["type"]=>
        string(7) "segment"
        ["options"]=>
        array(2) {
        ["route"]=>
        string(25) "/application[/:action][/]"
        ["defaults"]=>
        array(3) {
            ["__NAMESPACE__"]=>
            string(22) "Application\Controller"
            ["controller"]=>
            string(5) "Index"
            ["action"]=>
            string(5) "index"
        }
        }
    }
    }
}
["service_manager"]=>
array(1) {
    ["factories"]=>
    array(1) {
    ["translator"]=>
    string(45) "Zend\I18n\Translator\TranslatorServiceFactory"
    }
}
["translator"]=>
array(2) {
    ["locale"]=>
    string(5) "en_US"
    ["translation_file_patterns"]=>
    array(1) {
    [0]=>
    array(3) {
        ["type"]=>
        string(7) "gettext"
        ["base_dir"]=>
        string(57) "/home/marshall/html/module/Application/config/../language"
        ["pattern"]=>
        string(5) "%s.mo"
    }
    }
}
["controllers"]=>
array(1) {
    ["invokables"]=>
    array(1) {
    ["Application\Controller\Index"]=>
    string(38) "Application\Controller\IndexController"
    }
}
["view_manager"]=>
array(7) {
    ["display_not_found_reason"]=>
    bool(true)
    ["display_exceptions"]=>
    bool(true)
    ["doctype"]=>
    string(5) "HTML5"
    ["not_found_template"]=>
    string(9) "error/404"
    ["exception_template"]=>
    string(11) "error/index"
    ["template_map"]=>
    array(4) {
    ["layout/layout"]=>
    string(73) "/home/marshall/html/module/Application/config/../view/layout/layout.phtml"
    ["application/index/index"]=>
    string(83) "/home/marshall/html/module/Application/config/../view/application/index/index.phtml"
    ["error/404"]=>
    string(69) "/home/marshall/html/module/Application/config/../view/error/404.phtml"
    ["error/index"]=>
    string(71) "/home/marshall/html/module/Application/config/../view/error/index.phtml"
    }
    ["template_path_stack"]=>
    array(1) {
    [0]=>
    string(53) "/home/marshall/html/module/Application/config/../view"
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:56:36.433

如果您从[ZendSkeletonApplication](http://github.com/zendframework/ZendSkeletonApplication)开始，您是否从 Application 模块的配置中删除了[预定义的“应用程序”路由？](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L27)我可以在最新的 ZendSkeletonApplication 中复制它的唯一方法是在已经定义的路由之前定义您的应用程序路由。

例如，module.config.php 中的这个路由部分对我有用：

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),  
            ),  
        ),  
        'application' => array(
            'type' => 'segment',
            'options' => array(
                'route'    => '/application[/:action][/]',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),  
            ),
        ),  
    ),  
) 
```

使用它，它可以工作：

```
<?= $this->url('application', array('action' => 'validate')) ?>
// Produces /application/validate/ 
```

# web-services - 如何在 asp.net 代码中使用 Web 服务方法的 xml 输出中的特定值

> ID：14000501
> 
> 赞同：0
> 
> 时间：2012-12-22T06:02:31.687
> 
> 标签：web-services, asmx

我在学习 ASP.Net 中的 Web 服务时遇到了一个疑问。我开发了一个应用程序，借助**www.webservicex提供的“** **GlobalWeather** ”Web 服务，它可以
为我们提供印度各个城市（“ **GetWeather** ”）的当前天气信息**.net** _ 我曾尝试使用网络服务“ **http://wsf.cdyne.com/WeatherWS/Weather.asmx?op=GetCityWeatherByZIP** ”...

 ******似乎将**www.webservicex.net**和**wsf.cdyne.com/WeatherWS/Weather.asmx** n 提供的 xml 值获取到 asp.net 代码中两者都不同......为什么会这样？？？？

这就是我在单个应用程序中实现两者的方式。它的工作但是，谁能告诉我为什么我应该以不同的方式实现它....

```
public partial class _Default : System.Web.UI.Page 
```

{

```
globweather.GlobalWeather obj2 = new globweather.GlobalWeather(); 
wservice.Weather obj1 = new wservice.Weather();

protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{

    string zip = TextBox2.Text;
    //Response.Write(obj2.GetWeather("New Delhi", "India"));
    string s = obj2.GetWeather("New Delhi", "India");

   // load return string value to dataset

    System.IO.StringReader sr = new System.IO.StringReader(s);
    System.Data.DataSet ds = new System.Data.DataSet(); 
    ds.ReadXml(sr);

   // loop thru value in dataset

   foreach (System.Data.DataRow row in ds.Tables[0].Rows) 
   {

  // for (int i = 0; i < row.ItemArray.Length; i++ ) 
  //{

  // Response.Write("Col " + i.ToString() + " value = " + row.ItemArray[i] + "<br/>"); 
  //} 
       string ddd=row.ItemArray[2].ToString();
       TextBox1.Text="wind speed:- "+ddd.Substring(29,5);
   }

    Label1.Text = obj1.GetCityWeatherByZIP(zip).Temperature;
    Label2.Text = obj1.GetCityWeatherByZIP(zip).City;
    int id=Convert.ToInt32(obj1.GetCityWeatherByZIP(zip).WeatherID);
    if(id==1) 
      { Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/thunderstorms.gif";}
    if(id==2)             
      { Image1.ImageUrl="http://ws.cdyne.com/WeatherWS/Images/partlycloudy.gif";}
    if(id==3) 
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/mostlycloudy.gif";}
     if(id==4)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/sunny.gif";}
    if(id==5)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/rain.gif";}
    if(id==6)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/showers.gif";}
    if(id==7) 
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/haze.gif";}
    if(id==9)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/mostlycloudy.gif";}
    if(id==10)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/partlycloudy.gif";}
    if(id==11)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/sunny.gif";}
    if(id==12)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/partlycloudy.gif";}
    if(id==14)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/mostlycloudy.gif";}
    if(id==15)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/na.gif";}
    if(id==17)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/drizzle.gif";}
    if(id==18) 
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/fog.gif";}
    if(id==20)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/blowingsnow.gif";}
    if(id==21)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/blowingsnow.gif";}
    if(id==26)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/blowingsnow.gif";}
    if(id==27)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/snow.gif";}
    if(id==28)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/rain.gif";}
    if(id==29)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/blowingsnow.gif";}
    if(id==32)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/rain.gif";}
    if(id==33)
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/rain.gif";}
    if(id==34) 
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/na.gif";}
    if(id==35)   
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/blowingsnow.gif";}
    if(id==36)  
       {Image1.ImageUrl= "http://ws.cdyne.com/WeatherWS/Images/na.gif";}
    if (id == 37)
       { Image1.ImageUrl = "http://ws.cdyne.com/WeatherWS/Images/partlycloudy.gif"; }

   }  
} 
```******

# dictionary - 如果我有 100 个要跟踪的 N，那么存储数据 N 和相关属性的正确方法是什么？

> ID：14000502
> 
> 赞同：0
> 
> 时间：2012-12-22T06:02:34.180
> 
> 标签：dictionary, python-2.7

对于每个股票代码 N，我有 4 个相关属性，例如状态、当前价格、世界排名和历史价格。现在，我以字典 {} 的形式存储值。

> > {'状态'：'活动'，'历史价格'：'30、31、35'，'排名'：'3'，'符号N'：'AIG'，'价格'：'$30.5'}

由于我将遍历许多股票 N，因此字典似乎不是存储此类数据的理想方法。做我想做的事情的正确方法是什么？

* * *

从根本上说，我正在寻找字典列表。是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:23:35.440

假设您有一只名为 AIG 的股票，您可以执行以下操作来简化操作：

```
stocks = {}
stocks['AIG.Status'] = 'Active'
stocks['AIG.Historical Price'] = '30,31,35'
stocks['AIG.Rank'] = '3'
stocks['AIG.Symbol N'] = 'AIG'
stocks['AIG.Price'] = '$30.5' 
```

或者

```
stocks = {}
stocks['AIG'] = ['Active','30,31,35','3','AIG','$30.5'] 
```

然后使用

```
stocks['AIG'][0]
stocks['AIG'][1] 
```

要遍历字典，只需在第二个示例中使用它：

```
for stock in stocks:
    print stocks[stock] 
```

# c# - 尝试在 C# 中比较字符

> ID：14000504
> 
> 赞同：11
> 
> 时间：2012-12-22T06:02:59.153
> 
> 标签：c#, input, while-loop, compare, character

我是 C# 的新手，我已经开始学习它以扩大我可以使用的编程语言，但我遇到了一个小问题，我在 C 和 Java 中都没有遇到过。

我试图从键盘获得用户响应，然后将其与可能的情况进行比较，如果这些情况都不匹配，那么我希望用户必须重复该过程，直到他输入了正确的值。

```
String input = Console.ReadLine();

while ((input[0] != 'N') || (input[0] != 'Y'))
    input = Console.ReadLine();       
if (input[0] == 'N')
{
    Console.WriteLine("NO");
    Console.ReadKey();
}
else if (input[0] == 'Y')
{
    Console.WriteLine("YES");
    Console.ReadKey();
} 
```

到目前为止，这不是我尝试过的最有效的方法，我也尝试过做一个 do while 循环和许多其他变体。

我遇到的问题是，当没有激活​​while循环时，一切正常，但是当我添加它时，即使输入是N或Y，它也总是进入循环并且永远不会离开循环，即使很明显这是错误的。

请如果有人能给我一些关于为什么会发生这种情况的见解，或者如果有人可以提出更好的方法来做到这一点，我们将不胜感激。谢谢你。

卡里姆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T06:11:47.477

现在，您的 while 语句中的条件将始终为真。对此进行测试的一个好方法是在正在测试 while 循环的地方放置一个断点，然后对条件的每个部分“添加监视”。

改变

```
while ((input[0] != 'N') || (input[0] != 'Y')) 
```

到

```
while ((input[0] != 'N') && (input[0] != 'Y')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T06:28:04.240

正如每个人已经指出的那样，您正在使用`||`应该使用的地方`&&`。

除此之外，您还尝试访问可能为空的字符串的第一个字符。如果用户只是按“Enter”，这将导致异常。

由于您要求更好的方法，这里有一个替代方法，它使用`Console.ReadKey`而不是`Console.ReadLine`，因为您似乎只对获得一个角色感兴趣。它还具有不区分大小写的优点。

```
while (true)
{
    ConsoleKeyInfo key = Console.ReadKey();
    Console.WriteLine(""); // Just for nice typesetting.

    if (key.Key == ConsoleKey.N)
    {
        Console.WriteLine("NO");
        break;
    }

    if (key.Key == ConsoleKey.Y)
    {
        Console.WriteLine("YES");
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T06:16:01.777

问题在于条件检查。

```
while ((input[0] != 'N') || (input[0] != 'Y')) 
```

假设输入了**“N”**。现在条件`(input[0] != 'Y')`变为*假*，它应该跳出while循环但是因为|| 保持`(input[0] != 'N')`为*真*，条件的最终结果为*真*，因此它永远不会跳出循环。

替换**||** 与**&&**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T06:16:36.010

试试这个：-

```
String input = Console.ReadLine();
        while ((input[0] != 'N') && (input[0] != 'Y'))
        {
            input = Console.ReadLine();

        }
        if (input[0] == 'N')
        {
            Console.WriteLine("NO");
            Console.ReadKey();
        }
        else if (input[0] == 'Y')
        {
            Console.WriteLine("YES");
            Console.ReadKey();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T06:15:38.717

那么你的情况就是问题所在。您的两个条件是 Ored ，这意味着如果其中一个条件为真，则循环将执行。所以你首先或条件而不是像 !(condition1 || condition2) 这样的结果，如下所示

```
 String input = Console.ReadLine();

        while (!((input[0] != 'N') || (input[0] != 'Y')))
        {
            input = Console.ReadLine();
        }

        if (input[0] == 'N')
        {
            Console.WriteLine("NO");
            Console.ReadKey();
        }

        else if (input[0] == 'Y')
        {
            Console.WriteLine("YES");
            Console.ReadKey();
        } 
```

# c# - 如何以编程方式识别 Windows AppFabric 服务是否正在运行？

> ID：14000508
> 
> 赞同：4
> 
> 时间：2012-12-22T06:03:19.080
> 
> 标签：c#, .net, appfabric, appfabric-cache

有谁知道如何检查 Windows Server AppFabric 缓存服务是否已启动并以编程方式运行？

如果 AppFabric 服务关闭，它将引发异常。这是一个非常昂贵的过程，因此在从 AppFabric 创建缓存对象之前，我需要检查服务是否已启动并运行。

这意味着我只想在 AppFabric 正在运行时将 AppFabric 用作缓存服务，否则我想使用`System.Web`缓存。

例子：

```
if (checking) 
   customCache = new WebDataCache(); 
else 
   customCache = new AppFabricDataCache(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:16:37.207

通过 C# 做到这一点并不容易。没有公开的管理 api 允许您直接以编程方式检查它。如果你想这样做，你将不得不编写 c# 代码来调用适当的 powershell cmdlet。这里有一个例子：

*   [使用命令行参数从 C# 执行 PowerShell 脚本](https://stackoverflow.com/questions/527513/execute-powershell-script-from-c-sharp-with-commandline-arguments)

您需要参考[system.management.automation](http://msdn.microsoft.com/en-us/library/system.management.automation%28v=vs.85%29.aspx)程序集来开展业务。您需要调用的 cmdlet 是[Get-CacheHost](http://msdn.microsoft.com/en-us/library/ff428165%28v=azure.10%29.aspx)，因为它会告诉您服务是启动还是关闭。但是，我对此有一些疑问。执行 cmdlet 时，需要在提升的权限下完成。此外，您正在执行它的帐户需要对*您指向的缓存集群中的计算机*具有管理权限。所以..这并不理想。我试图这样做并因此而停止。

# html - 由于错误 c00ce56e IN ALL IE VERSION 无法完成操作

> ID：14000509
> 
> 赞同：4
> 
> 时间：2012-12-22T06:03:23.493
> 
> 标签：html, ajax

我已使用 ajax 功能进行分页。此功能在其他浏览器（FF，CHROME）中运行良好，接受 IE 浏览器。我收到以下行的错误，因为此行上的错误。

提前感谢

```
if (req) {
  var th = this;
  req.onreadystatechange = function() {
    var s = req.readyState;
    if (s == 4) {
      // Avoid memory leak by removing closure.
      req.onreadystatechange = th.dummy;
      // Remove possible junk from response.
      var responseText = req.responseText;//Error on this line
      try {
        // Call associated dataReady().
        eval(responseText);
      } catch (e) {
        Subsys_JsHttpRequest_Js.dataReady(id, "JavaScript code generated by backend is invalid!\n"+responseText, null);
      }
    } else {
      th.readyState = s;
      if (th.onreadystatechange) th.onreadystatechange()
    }
  };

  this._id = id;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:17:53.203

根据[Microsoft 将错误消息描述](http://support.microsoft.com/?scid=kb;en-us;304625&x=10&y=13)为与编码相关的错误消息，在服务器端的 AJAX 输出上设置适当的编码。

# ruby - 使用 Geany 美化 Ruby 源代码

> ID：14000510
> 
> 赞同：3
> 
> 时间：2012-12-22T06:03:27.943
> 
> 标签：ruby, code-formatting, pretty-print, geany

如何让[Geany](http://www.geany.org/)美化或美化 ruby​​ 代码？无论如何，这两者之间有什么区别？

我的主要兴趣是缩进，缩进是一致且正确的。

如果没有插件，我想将[gem集成到 Geany 中。](http://rubygems.org/gems/ruby-beautify)

另请参阅：
[SO question 1194185](https://stackoverflow.com/questions/1194185/where-can-i-find-a-decent-ruby-source-beautifier/14000532#14000532)
[PlugIn for Ruby Refactoring](http://thread.gmane.org/gmane.editors.geany.devel/7057)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:30:44.153

Geany 允许这由外部工具处理，例如 astyle。转到`Edit->Format->Send Selection to->Set Custom Commands`设置外部工具并使用`astyle --style=gnu -FpPn`、排序和其他工具。只要上面提到的脚本能够从命令行运行，我想也可以将它设置为这样的外部工具。

特别是对于 ruby​​，您可以使用`rbeautify`.

# jquery - 在 1 页上显示多个依赖的 python 模型

> ID：14000518
> 
> 赞同：1
> 
> 时间：2012-12-22T06:06:14.283
> 
> 标签：jquery, python, html, django

我正在为大学生构建一个网络应用程序。我现在在主屏幕上——用户将选择他们的部门（即 CSE）、班级（即 CSE 101）和教授（如果有多个/班级）。

所以流程看起来像这样 ECON --> ECON 101 --> Prof. X。

所以我有3个模型，系，课程，教授

```
class Department(models.Model):
     subject         = models.CharField(max_length = 25)
class Course(models.Model):
     department      = models.ForeignKey(Department)
     number          = models.CharField(max_length = 50)
     name            = models.CharField(max_length = 100, blank = True, null = True)
class Professor(models.Model):
     course          = models.ForeignKey(Course)
     name            = models.CharField(max_length = 50) 
```

我用 3 个视图构建了这个。我的第一个视图显示了所有部门。根据用户点击的部门，它将加载一个新页面，显示与该部门相关的所有课程。然后，当用户点击一门课程时，它会加载一个新页面，显示与该课程相关的所有教授。

```
#urls.py
url(r'^$', 'index'),

#views.py
def index(request):
    a     = Department.objects.all()
    return render_to_response('qanda/index.html', {'departments': a})

#index.html
{% for department in departments %}
    <li><a href="/home/{{ department.id }}/">{{ department.subject }}</a></li>
{% endfor %}

#urls.py    
url(r'^(?P<department_id>\d+)/$', 'courses'),

#views.py
def courses(request, department_id):    
    a = Department.objects.get(pk = department_id)
    b = Course.objects.filter(department = a)
    return render_to_response('qanda/courses.html', {'department':a,'courses':b})

#courses.html
{% for course in courses %}
    <li><a href="/home/{{ department.id }}/{{ course.id }}/">{{ course.department }} {{ course.number }} {{ course.name }}</a></li>
{% endfor %} 
```

等等。

现在它可以工作了，我想让它看起来更好一点，所以我使用了一个 jQuery 插件[jGlideMenu](http://www.sonicradish.com/labs/jGlideMenu/current/static_demo.html)（参见示例）。但是，要使插件正常工作，我需要在 1 个 HTML 页面上显示所有部门、课程和教授。但我无法正确链接部门 -> 课程 -> 教授 b/c 我目前所拥有的只是页面上显示列表的 1 for 功能。

有没有办法解决？也许是一个更好的 jQuery 插件？或者我该如何补救？如果不清楚，请告诉我，或者我可以提供更多上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:52:58.430

您需要使用重组标签。例如：

```
<ul id="departments">
    {% for department in departments %}
    <li rel="department_{{ department.id }}">{{ department.name }}</li>
    {% endfor %}
</ul>

{% regroup courses by departments as department_list %}

{% for department in department_list %}
    <ul id="department_{{ department.grouper.id }}">
        {% for course in department.list %}
          <li rel="course_{{ course.id }}">{{ course.name }}</li>
        {% endfor %}
    </ul>
{% endfor %} 
```

教授们也是如此。如果数据很多，最好使用ajax请求。

# jquery - 使用带有显示/隐藏内容的持久标题

> ID：14000519
> 
> 赞同：0
> 
> 时间：2012-12-22T06:06:19.017
> 
> 标签：jquery, header, accordion

我有一个页面，我希望能够使用持久标题，以及单击 a`div`并让它像手风琴一样工作。当我单独使用它们时，我能够处理这两个部分，但是当我将它们放在一起时代码将不起作用

HTML

```
<div class="main">
<div>
    <section>
        <h2 class="actog">Header</h2>
        <div class="accon">
            <!--Content Here-->
        </div>
    </section>
    <section>
        <h2 class="actog">Different Header</h2>
        <div class="accon">
            <!--Content Here-->
        </div>
    </section>
    <section>
        <h2 class="actog">Another Header</h2>
        <div class="accon">
            <!--Content Here-->
        </div>
    </section>
</div>
</div> 
```

CSS

```
.actog {
    color:black;
    margin:5px 0;
    padding:5px;
    width:100%;
    height:auto;
    background-color:green;
    /* Transitions */
}
.actog:hover, .active{
    cursor:pointer;
    text-decoration:underline;
    color:#ff385b;
    background-color:pink;
}
.accon{padding:5px 0;}
.floatingHeader {
    position: fixed;
    margin-top: 0;
    top:0;
    visibility: hidden;
} 
```

而这两个 jQuery 片段

```
jQuery(document).ready(function() {
        jQuery(".actog").next(".accon").hide();
        jQuery(".actog").click(function(){
           $('.active').not(this).toggleClass('active').next('.accon').slideToggle(500);
            $(this).toggleClass('active').next().slideToggle(400);
        });
    });

function UpdateTableHeaders() {
       $(".main div section").each(function() {

           var el             = $(this),
               offset         = el.offset(),
               scrollTop      = $(window).scrollTop(),
               floatingHeader = $(".floatingHeader", this)

           if ((scrollTop > offset.top) && (scrollTop < offset.top + el.height())) {
               floatingHeader.css({
                "visibility": "visible"
               });
           } else {
               floatingHeader.css({
                "visibility": "hidden"
               });      
           };
       });
    }

    // DOM Ready      
    $(function() {

       var clonedHeaderRow;

       $(".main div section").each(function() {
           clonedHeaderRow = $(".actog", this);
           clonedHeaderRow
             .before(clonedHeaderRow.clone())
             .css("width", clonedHeaderRow.width())
             .addClass("floatingHeader");

       });

       $(window)
        .scroll(UpdateTableHeaders)
        .trigger("scroll");

    }); 
```

[这是一个小提琴](http://jsfiddle.net/4m2KZ/3 "这是一个小提琴")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:53:23.233

好的，问题是您正在使用`next()`

```
$('.active').not(this).toggleClass('active').next('.accon').slideToggle(500);
$(this).toggleClass('active').next().slideToggle(400); 
```

当你需要使用`siblings()`

```
$('.active').not(this).toggleClass('active').siblings('.accon').slideToggle(500);
$(this).toggleClass('active').siblings('.accon').slideToggle(400); 
```

[**在这里提琴**](http://jsfiddle.net/4m2KZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:00:55.753

我想出了最终的解决方案

**CSS**

```
.actog {
color: black;
margin: 5px 0;
padding: 5px;
height: auto;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box;
background-color: green;
-webkit-transition: .25s;
-moz-transition: .25s;
-o-transition: .25s;
-ms-transition: .25s;
transition: .25s;
}
.actog:hover,.active,.activeClone {
cursor: pointer;
text-decoration: underline;
color: #ff385b;
background-color: pink;
}
.accon {padding: 5px 0; width: 100%;}
.floatingHeader {
position: fixed;
margin-top: 0;
top: 0;
visibility: hidden;
display: none;
} 
```

**HTML**

```
<div>
<section>
    <h2 id="1-clone" class="actog">Header</h2>
    <div class="accon">
        04/01/13<b></b>
        04/02/13<b></b>
        04/03/13<b></b>
        04/04/13<b></b>
        04/05/13<b></b>
        04/06/13<b></b>
        04/07/13<b></b>
        04/08/13<b></b>
        04/09/13<b></b>
        04/10/13<b></b>
        04/11/13<b></b>
        04/12/13<b></b>
        04/13/13<b></b>
        04/14/13<b></b>
        04/15/13<b></b>
        04/16/13<b></b>
        04/17/13<b></b>
        04/18/13<b></b>
        04/19/13<b></b>
        04/20/13<b></b>
        04/21/13<b></b>
        04/22/13<b></b>
    </div>
</section>
<section>
    <h2id="2-clone" class="actog">Different Header</h2>
    <div class="accon">
        04/01/13<b></b>
        04/02/13<b></b>
        04/03/13<b></b>
        04/04/13<b></b>
        04/05/13<b></b>
        04/06/13<b></b>
        04/07/13<b></b>
        04/08/13<b></b>
        04/09/13<b></b>
        04/10/13<b></b>
        04/11/13<b></b>
        04/12/13<b></b>
        04/13/13<b></b>
        04/14/13<b></b>
        04/15/13<b></b>
        04/16/13<b></b>
        04/17/13<b></b>
        04/18/13<b></b>
        04/19/13<b></b>
        04/20/13<b></b>
        04/21/13<b></b>
        04/22/13<b></b>
    </div>
</section>
<section>
    <h2 id="3-clone" class="actog">Another Header</h2>
    <div class="accon">
        04/01/13<b></b>
        04/02/13<b></b>
        04/03/13<b></b>
        04/04/13<b></b>
        04/05/13<b></b>
        04/06/13<b></b>
        04/07/13<b></b>
        04/08/13<b></b>
        04/09/13<b></b>
        04/10/13<b></b>
        04/11/13<b></b>
        04/12/13<b></b>
        04/13/13<b></b>
        04/14/13<b></b>
        04/15/13<b></b>
        04/16/13<b></b>
        04/17/13<b></b>
        04/18/13<b></b>
        04/19/13<b></b>
        04/20/13<b></b>
        04/21/13<b></b>
        04/22/13<b></b>
    </div>
</section> 
```

**jQuery**

```
function UpdateTableHeaders() {
$(".main div section").each(function() {//select each section in a div in a container with class main
var el = $(this),
    offset = el.offset(),
     scrollTop = $(window).scrollTop();

    floatingHeader = $(".floatingHeader", this);

    var shadow = '#' + floatingHeader.attr('id').replace('-clone','-orig');
     if ((scrollTop > offset.top) && (scrollTop < offset.top + el.height()) && ($(shadow).hasClass('active'))) { //if the header has scrolled past visibility and it has the class of active, then target it
        floatingHeader.css({
            "visibility": "visible", "display":"block" //show header
        })
        .addClass('activeClone') //add class once has scrolled down
        .unbind('click') //remove the action of the first click
        .click(function(){
           $(shadow).click();
        });
    } else {
        floatingHeader.css({
            "visibility": "hidden", "display":"none" //hide header
        })
        .removeClass('activeClone'); //remove the class once scrolled back up
    };
});
}

$(function() {
var clonedHeaderRow;
$(".main div section").each(function() {
clonedHeaderRow = $(".actog", this);
var newId = clonedHeaderRow.attr('id').replace('-clone','-orig');
clonedHeaderRow
.before(clonedHeaderRow.clone().attr('id',newId))
.css("width", clonedHeaderRow.width())
.addClass("floatingHeader"); //add class
});
$(window).scroll(UpdateTableHeaders);
});

jQuery(document).ready(function() {
jQuery(".actog").siblings(".accon").hide();
jQuery(".actog").not('.floatingHeader').click(function() {
$('.active').not(this).toggleClass('active').siblings('.accon').slideToggle(500);
$(this).toggleClass('active').siblings('.accon').slideToggle(400);
});
}); 
```

[http://codepen.io/burn123/pen/dsbpI](http://codepen.io/burn123/pen/dsbpI)

# scala - 通过在 Scala 中组合 Option[predicate] 函数来构建最小谓词函数（可能使用 scalaz）

> ID：14000520
> 
> 赞同：5
> 
> 时间：2012-12-22T06:06:32.427
> 
> 标签：scala, functional-programming, composition, scalaz

我有一个要过滤的列表中的结果。

用户可以为行上的任何属性提供特定限制（例如，我只想查看 x == 1 的行）。如果他们没有指定限制，那么当然不会使用该谓词。当然，最简单的形式是：

```
list.filter(_.x == 1) 
```

有许多可能的简单谓词，我正在使用将用户搜索词（例如 Option[Int]）转换为谓词函数或 Identity（返回 true 的函数）的代码即时构建一个新的谓词函数。代码看起来像这样（缩短，为清楚起见添加了显式类型）：

```
case class ResultRow(x: Int, y: Int)

object Main extends App {
  // Predicate functions for the specific attributes, along with debug output
  val xMatches = (r: ResultRow, i: Int) => { Console println "match x"; r.x == i }
  val yMatches = (r: ResultRow, i: Int) => { Console println "match y"; r.y == i }
  val Identity = (r : ResultRow) => { Console println "identity"; true }

  def makePredicate(a: Option[Int], b: Option[Int]) : ResultRow => Boolean = {
    // The Identity entry is just in case all the optional params are None 
    // (otherwise, flatten would cause reduce to puke)
    val expr = List(Some(Identity), 
                    a.map(i => xMatches(_: ResultRow, i)),
                    b.map(i => yMatches(_: ResultRow, i))
                   ).flatten

    // Reduce the function list into a single function. 
    // Identity only ever appears on the left...
    expr.reduceLeft((a, b) => (a, b) match {
      case (Identity, f) => f
      case (f, f2) => (r: ResultRow) => f(r) && f2(r)
    })
  }

  val rows = List(ResultRow(1, 2), ResultRow(3, 100))

  Console println rows.filter(makePredicate(Some(1), None))
  Console println rows.filter(makePredicate(None, None))
  Console println rows.filter(makePredicate(None, Some(100)))
  Console println rows.filter(makePredicate(Some(3), Some(100)))
} 
```

这完美地工作。运行时，它会正确过滤，并且调试输出证明调用了最少数量的函数来正确过滤列表：

```
match x
match x
List(ResultRow(1,2))
identity
identity
List(ResultRow(1,2), ResultRow(3,100))
match y
match y
List(ResultRow(3,100))
match x
match x
match y
List(ResultRow(3,100)) 
```

实际上，我对结果如此之好感到非常满意。

但是，我不禁认为有一种更实用的方法可以做到这一点（例如 Monoids 和 Functors 和广义求和）......但我不知道如何让它工作。

我尝试遵循一个 scalaz 示例，该示例表明我需要创建一个隐式零和半群，但我无法让 Zero[ResultRow => Boolean] 进行类型检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:32:14.613

您可以使用以下方法稍微简化代码（无需迁移到 Scalaz）`forall`：

```
def makePredicate(a: Option[Int], b: Option[Int]): ResultRow => Boolean = {
  val expr = List(
    a.map(i => xMatches(_: ResultRow, i)),
    b.map(i => yMatches(_: ResultRow, i))
  ).flatten

  (r: ResultRow) => expr.forall(_(r))
} 
```

请注意，这也消除了包含`Some(Identity)`在列表中的需要。

如果您有很多行，我建议使用`zip`将`xMatches`函数与用户输入相匹配，如下所示：

```
val expr = List(a, b) zip List(xMatches, yMatches) flatMap {
  case (maybePred, matcher) => maybePred.map(i => matcher(_: ResultRow, i))
} 
```

两行实际上不再简洁或易读，而是四行或五行。

* * *

要回答您关于 Scalaz 的问题，问题是 有两个可能的幺半群`Boolean`，而 Scalaz 不会为您选择一个 - 相反，您必须使用 Haskell`newtype`包装器之类的东西标记布尔值，以指示您要使用哪个幺半群（在 Scalaz 7 中——在 6 中，方法有点不同）。

一旦你指定了你想要`Boolean`的幺半群，那个幺半群 for`Function1`就会启动，并且没有什么可做的——你不需要`Identity`明确定义零。例如：

```
import scalaz._, Scalaz._

def makePredicate(a: Option[Int], b: Option[Int]): ResultRow => Boolean =
  List(a, b).zip(List(xMatches, yMatches)).flatMap {
    case (maybePred, matcher) =>
      maybePred.map(i => matcher(_: ResultRow, i).conjunction)
  }.suml 
```

在这里，我们刚刚取了`ResultRow => Boolean @@ Conjunction`函数的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:17:02.877

我非常喜欢的一种简化是使用 Function1[A, Boolean] 的库 pimp 简化这种谓词管道，它将标准布尔表达式提升为谓词。这是我的一个子集：

```
 implicit def toRichPredicate[A](f: Function1[A, Boolean]) = new RichPredicate(f)
  def tautology[A] = (x:A)=>true
  def falsehood[A] = (x:A)=>false

  class RichPredicate[A](f: Function1[A, Boolean]) extends Function1[A, Boolean] {
    def apply(v: A) = f(v)

    def &&(g: Function1[A, Boolean]): Function1[A, Boolean] = {
      (x: A) => f(x) && g(x)
    }

    def ||(g: Function1[A, Boolean]): Function1[A, Boolean] = {
      (x: A) => f(x) || g(x)
    }

    def unary_! : Function1[A, Boolean] = {
      (x: A) => !f(x)
    }
  } 
```

我发现这完全可以重复使用。有了这样的东西，你的减少就变成了

```
list.flatten.foldLeft(tautology)(&&) 
```

这很简单。它还为更深层次的功能优势指明了方向，因为带有重言式和 && 的谓词显然形成了一个幺半群，所以这一切都归结为调用 Scalaz 或 Haskell 中的一些高阶 typeclass-y goodness。这在这两种情况下也变得有点棘手，因为在其他情况下，您可能会在由 falsehood 和 || 形成的谓词上使用幺半群，因此需要重载实例解析。

# c# - 如何在 Windows Phone 7 中突出显示上下文相关搜索的结果？

> ID：14000521
> 
> 赞同：8
> 
> 时间：2012-12-22T06:06:33.920
> 
> 标签：c#, windows-phone-7, xaml

我需要根据在 windows phone 7 文本框中输入的文本突出显示搜索结果，

![在此处输入图像描述](../Images/b81baf22adfa6ddb637a041e663307b2.png)

通常的 wpf 代码在 windows phone 7 中不起作用。有人说如何在 windows phone 7 中实现这一点

实际上这是我用来填充联系人列表的 xaml 列表框，

```
 <ListBox Name="ContactList" ItemsSource="{Binding}" Margin="14,85,14,28" Foreground="White" SizeChanged="ContactList_SizeChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Border BorderThickness="2" HorizontalAlignment="Left" VerticalAlignment="Center" BorderBrush="{StaticResource PhoneAccentBrush}" >
                            <Image Source="{Binding Converter={StaticResource ContactPictureConverter}}" Width="48" Height="48" Stretch="Fill" Name="img1" />
                        </Border>
                        <TextBlock Name="ContactResults" Text="{Binding Path=DisplayName, Mode=OneWay}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" Margin="18,8,0,0" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <TextBox Name="contactFilterString" Margin="0,0,0,528" TextChanged="contactFilterString_TextChanged" /> 
```

C#代码，

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Net;
    using System.Windows;
    //using System.Windows.Controls;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Animation;
    using System.Windows.Shapes;
    using Microsoft.Phone.Controls;
    using Microsoft.Phone.UserData;
    using Newtonsoft.Json;
    using Newtonsoft.Json.Linq;
    using System.Collections.ObjectModel;
    using Microsoft.Phone.Shell;
    using System.Windows.Controls;
    using System.Windows.Media.Imaging;
    using System.Text.RegularExpressions;

    namespace SmartContactsApp
    {
public partial class MainPage : PhoneApplicationPage
{
    private List<Address> lstAddress = new List<Address>();
    public string addressJson = string.Empty;

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        this.Loaded += new RoutedEventHandler(MainPage_Loaded);
        CreateSecondaryTile();
    }

    /// <summary>
    /// To List all the Contacts. . .
    /// </summary>
    private void ContactListing()
    {
        ContactList.DataContext = null;
        Contacts cons = new Contacts();
        cons.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(Contacts_SearchCompleted);
        cons.SearchAsync(contactFilterString.Text, FilterKind.DisplayName, "Contacts");
    }

    /// <summary>
    /// To Fetch All Contacts from Mobile Contacts. . .
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    public void Contacts_SearchCompleted(object sender, ContactsSearchEventArgs e)
    {
        try
        {
            ContactList.DataContext = e.Results;

        }
        catch (Exception)
        {
            throw;
        }
    }

    private void contactFilterString_TextChanged(object sender, TextChangedEventArgs e)
    {
        ContactListing();
    }
    } 
```

如何在此突出显示，

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T06:44:28.610

我在这个的帮助下做到[了](https://stackoverflow.com/questions/14021651/how-to-write-check-if-a-textblock-consists-a-specific-string-in-windows-phone-7)

Xml代码：

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ListBox Name="ContactList" Margin="14,85,14,28" Foreground="White">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding DisplayName}" Width="450" TextWrapping="Wrap" FontSize="24" Visibility="Collapsed"/>
                        <RichTextBox Width="450" FontSize="24" Foreground="#FFFFFF"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <TextBox Name="contactFilterString" Margin="0,0,0,528" TextChanged="contactFilterString_TextChanged" />
    </Grid> 
```

c#代码：

```
 private void contactFilterString_TextChanged(object sender, TextChangedEventArgs e)
    {
       // ContactListing();
        SearchVisualTree(ContactList);
        if (contactFilterString.Text == "")
        {
            ContactListing();
        }
    }

    private void SearchVisualTree(Action ContactListing)
    {
        SearchVisualTree(ContactList);
    }

    private void SearchVisualTree(DependencyObject targetElement)
    {

        var count = VisualTreeHelper.GetChildrenCount(targetElement);

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(targetElement, i);
            if (child is TextBlock)
            {
                textBlock1 = (TextBlock)child;
                HighlightText();
                break;
            }
            else
            {
                //ContactListing();
                SearchVisualTree(child);
            }
        }
    }

    private void HighlightText()
    {
        if (textBlock1 != null)
        {
            string text = textBlock1.Text;
            textBlock1.Text = text;
            textBlock1.Inlines.Clear();

            int index = text.IndexOf(contactFilterString.Text);
            int lenth = contactFilterString.Text.Length;

            if (!(index < 0))
            {
                Run run = new Run() { Text = text.Substring(index, lenth), FontWeight = FontWeights.ExtraBold };
                run.Foreground = new SolidColorBrush(Colors.Orange);
                textBlock1.Inlines.Add(new Run() { Text = text.Substring(0, index), FontWeight = FontWeights.Normal });
                textBlock1.Inlines.Add(run);
                textBlock1.Inlines.Add(new Run() { Text = text.Substring(index + lenth), FontWeight = FontWeights.Normal });

                textBlock1.FontSize = 30;
                textBlock1.Foreground = new SolidColorBrush(Colors.Black);
            }
            else
            {
                //textBlock1.Text = "No Match";

            }
        }

    }

     /// <summary>
    /// To List all the Contacts. . .
    /// </summary>
    private void ContactListing()
    {
        ContactList.DataContext = null;
        Contacts cons = new Contacts();
        cons.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(Contacts_SearchCompleted);
        cons.SearchAsync(contactFilterString.Text, FilterKind.DisplayName, "Contacts");
    }

    /// <summary>
    /// To Fetch All Contacts from Mobile Contacts. . .
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    public void Contacts_SearchCompleted(object sender, ContactsSearchEventArgs e)
    {
        try
        {

            ContactList.DataContext = e.Results;

        }
        catch (Exception)
        {
            throw;
        }
    } 
```

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:11:28.113

对于类似的要求，我做了以下事情：

首先，我将以下内容作为我的 ListBox 数据模板的一部分

```
<StackPanel Width="450">
    <TextBlock Text="{Binding text}" Width="450" TextWrapping="Wrap" FontSize="24" Visibility="Collapsed"/>
    <RichTextBox Width="450" FontSize="24" Foreground="#FFFFFF"/>
</StackPanel> 
```

然后在后面的代码中： 我用来绑定到 ListBox 的列表定义如下

```
 public List<Result> results {
        get
        {  
            return _results;
        }
        set
        {
            string x = null;
            foreach (var item in value)
            {
                item.text2 = item.text;
                if (!item.text.StartsWith("<Section"))
                    if(!item.text.Contains("</Run>"))
                {
                    String xamlData = null;
                    var regx = new Regex(@query.Trim(), RegexOptions.IgnoreCase);
                    var matcches = regx.Matches(item.text);
                    x += matcches.Count;
                    if (matcches.Count > 0)
                    {
                        var match = @query.Trim();
                        xamlData = Regex.Replace(item.text, match, "<Run Foreground="Blue" FontWeight=\"ExtraBold\">" + match + "</Run>", RegexOptions.IgnoreCase);
                    }
                    if (xamlData == null)
                        xamlData = item.text;
                    item.text = "<Section xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"><Paragraph>" + xamlData + "</Paragraph></Section>";
                }
            }
            _results = value;
        }
    } 
```

然后在获得搜索结果后，将它们添加到上面的列表中，然后将其设置为 ListBox 的 ItemsSource。

现在是 ListBox 的关键部分。添加`listbox_SizeChanged`事件处理程序，如下所示

```
private void listboxMyTimeline_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        for (int i = 0; i < listboxMyTimeline.Items.Count; i++)
        {
            ListBoxItem lbi2 = (ListBoxItem)(listboxMyTimeline.ItemContainerGenerator.ContainerFromIndex(i));
            if (lbi2 != null)
            {
                var ob = FindFirstElementInVisualTree<RichTextBox>(lbi2);
                var ob2 = FindFirstElementInVisualTree<TextBlock>(lbi2);
                ob.Xaml = ob2.Text;
            }
            else
            {
                var itm = listboxMyTimeline.Items.ElementAt(i);
                lbi2 = (ListBoxItem)(listboxMyTimeline.ItemContainerGenerator.ContainerFromItem(itm));
                if (lbi2 != null)
                {
                    var ob = FindFirstElementInVisualTree<RichTextBox>(lbi2);
                    var ob2 = FindFirstElementInVisualTree<TextBlock>(lbi2);
                    ob.Xaml = ob2.Text;
                }
            }
        }
    } 
```

FindFirstElementVisualTree 方法在哪里是这样的

```
private T FindFirstElementInVisualTree<T>(DependencyObject parentElement) where T : DependencyObject
    {
        var count = VisualTreeHelper.GetChildrenCount(parentElement);
        if (count == 0)
            return null;

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(parentElement, i);

            if (child != null && child is T)
            {
                return (T)child;
            }
            else
            {
                var result = FindFirstElementInVisualTree<T>(child);
                if (result != null)
                    return result;

            }
        }
        return null;
    } 
```

因此，我采用了一个隐藏的文本框，将实际文本的构造 XAML 代码绑定到该文本框。这是因为您不能直接绑定到 RichTextBox 或 Run 元素。然后在 Size_changed 处理程序中，我将该 XAMl 代码设置为可见的 RichTextBox。

我不确定它在多大程度上适合您的需求，您可能需要对上述过程进行许多更改才能使其适合您。

祝你好运 ：）

更新：

将我代码中的 Result 类替换为代码中的 Address 类。

并用我的列表替换您的列表定义。

在您的 Address 类中添加一个名为“xamlCode”的附加属性。（将`item.text2 = item.text`行替换为 item.xamlCode = item.DisplayName

其余的对你来说应该很清楚。

如果有任何疑问，[请在此处提问](https://chat.stackoverflow.com/rooms/17226/windows-phone-7-8)。

# registrykey - 手动删除 regedit 未显示的损坏注册表项

> ID：14000522
> 
> 赞同：1
> 
> 时间：2012-12-22T06:06:40.410
> 
> 标签：registrykey

我有 2 个注册表项，扫描程序检测为损坏的 CLSID，但它们没有出现在 REGEDIT 中，可能是因为它们的路径已损坏，例如...

```
HKEY_LOCAL_MACHINESOFTWARE\Classes\CLSID\etc 
```

这应该是...

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\etc 
```

如果它们没有引用我尝试运行的软件，我可以忽略它们，除非这些键会阻止 OCX 被检测和运行。

创建一个带有减号 (-) 的 .reg 文件，例如..

```
[-HKEY_LOCAL_MACHINESOFTWARE\Classes\CLSID] 
```

不删除密钥。也不能以这种方式编辑... regedit 会忽略此文件，但它仍然存在并且仍然影响插件检测！

使用 DOS 命令行...

```
reg delete HKEY_LOCAL_MACHINESOFTWARE 
```

只返回“无效的键名”！

我可以在哪里以及如何删除/编辑这些损坏的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T19:44:07.703

您必须拥有该密钥和所有子密钥的所有权。右键单击密钥并选择权限并获得密钥的所有权，然后将其删除。我知道这篇文章已经有一年了，但这可能会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:22:09.293

您可以尝试[使用 RawReg](http://reboot.pro/files/file/95-rawreg/)删除它，这是一个免费的、从头开始的注册表编辑器实现，即它不使用注册表 API，这意味着它不应该有同样的问题。

仅供参考：不过，RawReg 有自己的大量问题和错误。

# azure - 有没有办法在 Windows Azure 上托管 Bugzilla？

> ID：14000525
> 
> 赞同：3
> 
> 时间：2012-12-22T06:07:11.143
> 
> 标签：azure, bugzilla

我正在尝试为我的组织在 windows azure 上托管 Bugzilla，以便可以访问我们在世界任何地方创建的问题。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T22:34:50.500

是的。您真正需要的是运行 Linux 操作系统的 Windows Azure 虚拟机。由于 Bugzilla 有 3 个主要组件，Apache Web Server、Perl 和 MySQL，您只需在基于 Linux (CentOS/SUSE) 的 Azure 虚拟机中安装这 3 个组件。正确安装 Bugzilla 后，您需要通过正确的端口配置 Apache Web 服务器，以便通过 Web URL 可以在全球范围内访问，仅此而已。如果您不想使用 Linux，Windows 操作系统也可以正常工作。

添加了更多：

使用 Windows Azure 虚拟机，您可以在本地创建基于 Linux 的 VHD 并在其上安装所有需要的应用程序。完成所有操作后，您可以将 Linux VHD 上传到 Azure 并正确配置端口以使其在需要时可用。另一种选择是从库中选择 Linux 或 Windows 操作系统映像，然后通过 RDP (Windows) 和 SSH 终端 (Linux) 安装应用程序。

以下是一些有用的链接：

*   [创建并上传包含 Linux 操作系统的虚拟硬盘](https://www.windowsazure.com/en-us/manage/linux/common-tasks/upload-a-vhd/)
*   [如何创建自定义虚拟机](https://www.windowsazure.com/en-us/manage/linux/how-to-guides/custom-create-a-vm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:17:24.237

Bugzilla 也可以安装在 Windows 操作系统自定义虚拟机上。请参阅[https://wiki.mozilla.org/Bugzilla:Win32Install](https://wiki.mozilla.org/Bugzilla:Win32Install)如果您愿意，您可以使用 IIS 代替 Apache，尽管 XML-RPC 接口仅适用于 Apache。

# node.js - 主干 - 错误：找不到模块“主干”

> ID：14000526
> 
> 赞同：2
> 
> 时间：2012-12-22T06:07:27.180
> 
> 标签：node.js, backbone.js

我从 github 中提取了一个项目并尝试运行它，但出现此错误：

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'backbone'
.... 
```

这是我第一次使用主干和 node.js，所以我有点迷路了.. 有人可以向我解释如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:30:58.277

你可能想使用 Node 的包管理器 NPM：

```
cd myProject
npm install backbone 
```

或者使用全局安装：

```
npm install -g backbone 
```

你应该考虑让自己了解[Node 模块](http://nodejs.org/api/modules.html)和[Node 的包管理](http://nodejs.org/api/modules.html#modules_addenda_package_manager_tipshowtonode.org/introduction-to-npm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:36:17.677

检查并确保您的项目文件夹中本地有可用的主干脚本。如果没有，那么让它工作的最佳方法是安装 npm（节点包管理器），然后将骨干模块安装到您的机器上。那应该可以解决问题。

# c# - 带有 HTTP 标头的 DataService 中的 HttpContext 与 OperationContext

> ID：14000528
> 
> 赞同：6
> 
> 时间：2012-12-22T06:07:32.033
> 
> 标签：c#, http-headers, wcf-data-services

我有一个覆盖`OnStartProcessingRequest(ProcessRequestArgs args)`. 我想在响应中添加一些标头（在这种方法中我认为是正确的地方？）。我首先尝试了这个：

```
args.OperationContext.ResponseHeaders.Add(...) 
```

那没有用。然后我尝试了这个：

```
OperationContext.Current.OutgoingMessageHeaders.Add(...) 
```

那没有用。我尝试在那个傻瓜上添加一个新的 OperationContextScope。它仍然失败。最后我尝试了这个：

```
HttpContext.Current.Response.AddHeader(...); 
```

该选项有效！（“工作”是指它实际上出现在对客户的响应中。）为什么前两个选项不起作用？

在网上进一步阅读后，我发现

```
WebOperationContext.Current.OutgoingResponse.Headers.Add(...) 
```

也有效。为什么我们在这个方法中有四个当前上下文？一个人如何知道使用哪一个（在运行时）？哪些在我的`[WebGet]`方法中有效？哪些在我的`[QueryInterceptor]`方法中有效？保证哪个上下文具有正确的请求标头？（我目前一直在使用 args.OperationContext。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T07:14:07.293

不知道 ProcessRequestArgs.OperationContext.ResponseHeaders，但我想我可以解释为什么 OperationContext.Current.OutgoingMessageHeaders 不起作用：“标头”有 SOAP 标头（可能被非 SOAP 服务忽略），而不是 HTTP 标头。在其他两种情况下（HttpContext.Current.Response.AddHeader 和WebOperationContext.Current.OutgoingResponse.Headers），请注意名称中的“Http”和“Web”，表明您正在执行特定于HTTP 的操作，即添加HTTP 标头。

顺便一提：

*   OperationContext - 常规 WCF 操作上下文
*   WebOperationContext - WCF 操作上下文的 REST/HTTP 扩展
*   HttpContext - 与 ASP.NET 托管模式兼容，仅在使用 ASP.NET 兼容模式时有效（自托管等时无效），请参阅[http://blogs.msdn.com/b/wenlong/archive/2006/01/ 23/516041.aspx](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)

# compilation - 构建 KwWidget 时未找到 tk.h

> ID：14000531
> 
> 赞同：0
> 
> 时间：2012-12-22T06:08:13.483
> 
> 标签：compilation, tcl, tk

构建 KWWidget 时出现以下错误：

```
3>vtkKWApplicationTcl.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWTkTreeCtrlInit.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>tkShape.cpp
3>..\KWWidgets-HEAD-cvs\Utilities\tkdnd\win\tkShape.cpp(13) : error C2061: syntax error : identifier 'Tcl_Obj'
3>..\KWWidgets-HEAD-cvs\Utilities\tkdnd\win\tkShape.cpp(16) : error C2065: 'objv' : undeclared identifier
3>..\KWWidgets-HEAD-cvs\Utilities\tkdnd\win\tkShape.cpp(16) : error C3861: 'Tcl_WrongNumArgs': identifier not found
3>..\KWWidgets-HEAD-cvs\Utilities\tkdnd\win\tkShape.cpp(24) : error C3861: 'Tcl_CreateObjCommand': identifier not found
3>..\KWWidgets-HEAD-cvs\Utilities\tkdnd\win\tkShape.cpp(27) : error C3861: 'Tcl_PkgProvide': identifier not found
3>tkOleDND.cpp
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>OleDND.cpp
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWTkDnDInit.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>tkDNDBind.cpp
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>tkDND.cpp
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWTkconInit.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWTablelistInit.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWBWidgetsInit.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWWidgetsInitializeCommand.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWSimpleAnimationWidget.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWSelectionFrameLayoutManager.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWRenderWidget.cxx
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : error C2143: syntax error : missing ';' before '*'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(389) : error C2146: syntax error : missing ';' before identifier 'LPTCH'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(389) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(389) : error C2378: 'LPCH' : redefinition; symbol cannot be overloaded with a typedef
3>        C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(353) : see declaration of 'LPCH'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(389) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(389) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(398) : error C2143: syntax error : missing ';' before '*'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(398) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(398) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(399) : error C2143: syntax error : missing ';' before '*'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(399) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winnt.h(399) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3422) : error C2143: syntax error : missing ';' before '__stdcall'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3422) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3422) : error C2040: 'LPCH' : 'int' differs in levels of indirection from 'int *'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3425) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3447) : error C2146: syntax error : missing ')' before identifier 'NewEnvironment'
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3447) : warning C4229: anachronism used : modifiers on data are ignored
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3447) : error C2491: 'SetEnvironmentStringsA' : definition of dllimport data not allowed
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3447) : error C2440: 'initializing' : cannot convert from 'int *' to 'BOOL'
3>        There is no context in which this conversion is possible
3>C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winbase.h(3447) : error C2059: syntax error : ')'
3>Compiling...
3>vtkKWPresetSelector.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWPopupButton.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWOptionDataBase.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWObject.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
3>vtkKWMultiColumnList.cxx
3>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
.
.
24>Linking...
24>LINK : fatal error LNK1104: cannot open file '..\bin\Debug\KWWidgets.lib'
24>Build log was saved at "file://d:\KWWidget\bin\Utilities\KWConvertImageToHeader.dir\Debug\BuildLog.htm"
24>KWConvertImageToHeader - 1 error(s), 0 warning(s)
25>------ Build started: Project: KWFileBrowserDialogExample, Configuration: Debug Win32 ------
25>Compiling...
25>KWFileBrowserDialogExample.cxx
25>D:\VTK\src\Common\vtkTk.h(26) : fatal error C1083: Cannot open include file: 'tk.h': No such file or directory
25>Build log was saved at "file://d:\KWWidget\bin\Examples\Cxx\FileBrowserDialog\KWFileBrowserDialogExample.dir\Debug\BuildLog.htm"
25>KWFileBrowserDialogExample - 1 error(s), 0 warning(s)
26>------ Skipped Build: Project: INSTALL, Configuration: Debug Win32 ------
26>Project not selected to build for this solution configuration 
========== Build: 0 succeeded, 20 failed, 3 up-to-date, 6 skipped ========== 
```

我已经安装了 ActiveTcl8.5.13.0.296436-win32-ix86-threaded 和 TclDevKit5.3.0.295349-win32-ix86-threaded 但找不到 tk.h 请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:18:47.463

ActiveTcl 虽然包含运行时库，但省略了 Tcl 和 Tk 库的头文件。它可能还省略了链接库（但我不确定；我不在正确的平台上进行检查）。要构建任何东西，您可能需要从 SourceForge 获取 Tcl 和 Tk[的源代码分发](https://sourceforge.net/projects/tcl/files/Tcl/8.5.13/)（选择 8.5.13 以匹配您的 ActiveTcl 分发）并自己构建它们。但是，一旦构建完成，您就可以针对 ActiveTcl 动态库运行（尤其是在构建代码以使用存根 API 的情况下）。

请注意，除了它提供的额外包和工具之外，ActiveTcl 是一个传统的 Tcl 发行版。

# iterator - 在 Go 中创建迭代器最惯用的方法是什么？

> ID：14000534
> 
> 赞同：61
> 
> 时间：2012-12-22T06:08:49.423
> 
> 标签：iterator, go

一种选择是使用渠道。通道在某种程度上类似于迭代器，您可以使用 range 关键字对其进行迭代。但是当你发现你不能在不泄漏 goroutine 的情况下跳出这个循环时，使用就会受到限制。

在 Go 中创建迭代器模式的惯用方法是什么？

**编辑**：

渠道的根本问题是它们是推送模型。迭代器是一个拉模型。您不必告诉迭代器停止。我正在寻找一种以一种很好的表达方式迭代集合的方法。我还想链接迭代器（地图、过滤器、折叠替代品）。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-22T12:18:53.823

通道很有用，但闭包通常更合适。

```
package main

import "fmt"

func main() {
    gen := newEven()
    fmt.Println(gen())
    fmt.Println(gen())
    fmt.Println(gen())
    gen = nil // release for garbage collection
}

func newEven() func() int {
    n := 0
    // closure captures variable n
    return func() int {
        n += 2
        return n
    }
} 
```

游乐场：[http ://play.golang.org/p/W7pG_HUOzw](http://play.golang.org/p/W7pG_HUOzw)

也不喜欢闭包？使用带有方法的命名类型：

```
package main

import "fmt"

func main() {
    gen := even(0)
    fmt.Println(gen.next())
    fmt.Println(gen.next())
    fmt.Println(gen.next())
}

type even int

func (e *even) next() int {
    *e += 2
    return int(*e)
} 
```

游乐场：[http ://play.golang.org/p/o0lerLcAh3](http://play.golang.org/p/o0lerLcAh3)

这三种技术之间存在权衡，因此您不能将其中一种指定为惯用的。使用最能满足您需求的任何东西。

链接很容易，因为函数是一流的对象。这是闭包示例的扩展。我为整数生成器添加了一个 intGen 类型，它清楚地说明了生成器函数在哪里用作参数和返回值。mapInt 以通用方式定义，将任何整数函数映射到整数生成器。其他函数如过滤器和折叠可以类似地定义。

```
package main

import "fmt"

func main() {
    gen := mapInt(newEven(), square)
    fmt.Println(gen())
    fmt.Println(gen())
    fmt.Println(gen())
    gen = nil // release for garbage collection
}

type intGen func() int

func newEven() intGen {
    n := 0
    return func() int {
        n += 2
        return n
    }
}

func mapInt(g intGen, f func(int) int) intGen {
    return func() int {
        return f(g())
    }
}

func square(i int) int {
    return i * i
} 
```

游乐场：[http ://play.golang.org/p/L1OFm6JuX0](http://play.golang.org/p/L1OFm6JuX0)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-15T17:49:00.280

TL;DR：忘记关闭和通道，太慢了。如果您的集合中的各个元素可以通过索引访问，请在类数组类型上进行经典的 C 迭代。如果没有，请实现一个有状态的迭代器。

我需要遍历一些集合类型，但它们的确切存储实现尚未一成不变。这一点，加上从客户端抽象实现细节的无数其他原因，导致我使用各种迭代方法进行一些测试。[完整的代码在这里](http://play.golang.org/p/oEg5wrC4J6)，包括一些使用[错误作为值](http://blog.golang.org/errors-are-values)的实现。以下是基准测试结果：

*   对类数组结构的经典 C 迭代。该类型提供了 ValueAt() 和 Len() 方法：

    ```
    l := Len(collection)
    for i := 0; i < l; i++ { value := collection.ValueAt(i) }
    // benchmark result: 2492641 ns/op 
    ```

*   闭包样式迭代器。集合的 Iterator 方法返回一个 next() 函数（集合和游标的闭包）和一个 hasNext 布尔值。next() 返回下一个值和 hasNext 布尔值。请注意，这比使用单独的 next() 和 hasNext() 闭包返回单个值运行得快得多：

    ```
    for next, hasNext := collection.Iterator(); hasNext; {
        value, hasNext = next()
    }
    // benchmark result: 7966233 ns/op !!! 
    ```

*   有状态的迭代器。一个简单的结构体，包含两个数据字段、集合和游标，以及两个方法：Next() 和 HasNext()。这次集合的 Iterator() 方法返回一个指向正确初始化的迭代器结构的指针：

    ```
    for iter := collection.Iterator(); iter.HasNext(); {
        value := iter.Next()
    }
    // benchmark result: 4010607 ns/op 
    ```

尽管我很喜欢闭包，但在性能方面它是不行的。至于设计模式，好吧，Gophers 更喜欢“惯用的做法”这个词是有充分理由的。也 grep 迭代器的源代码树：由于很少有文件提到这个名字，迭代器绝对不是 Go 的东西。

另请查看此页面：[http ://ewencp.org/blog/golang-iterators/](http://ewencp.org/blog/golang-iterators/)

无论如何，接口在这里没有任何帮助，除非你想定义一些 Iterable 接口，但这是一个完全不同的主题。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-22T20:01:47.117

TL;DR：迭代器在 Go 中不是惯用的。将它们留给其他语言。

深入然后，维基百科条目“迭代器模式”开始，“在面向对象编程中，迭代器模式是一种设计模式......”那里有两个危险信号：首先，面向对象编程概念通常不能很好地转化为 Go ，其次，许多 Go 程序员并不太重视设计模式。第一段还包括“迭代器模式将算法与容器解耦”，但仅在说明“迭代器[访问]容器的元素之后。嗯，它是什么？如果算法正在访问容器的元素，它几乎不能声称是解耦的。许多语言的答案涉及某种泛型，允许语言泛化相似的数据结构。Go 中的答案是接口。接口通过拒绝访问结构并要求所有交互都基于行为来强制执行更严格的算法和对象解耦。行为是指通过数据方法表达的能力。

对于最小迭代器类型，所需的功能是 Next 方法。一个 Go 接口可以通过简单地指定这个单一的方法签名来表示一个迭代器对象。如果您希望容器类型是可迭代的，它必须通过实现接口的所有方法来*满足*迭代器接口。（我们这里只有一个，实际上接口只有一个方法是很常见的。）

一个最小的工作示例：

```
package main

import "fmt"

// IntIterator is an iterator object.
// yes, it's just an interface.
type intIterator interface {
    Next() (value int, ok bool)
}

// IterableSlice is a container data structure
// that supports iteration.
// That is, it satisfies intIterator.
type iterableSlice struct {
    x int
    s []int
}

// iterableSlice.Next implements intIterator.Next,
// satisfying the interface.
func (s *iterableSlice) Next() (value int, ok bool) {
    s.x++
    if s.x >= len(s.s) {
        return 0, false
    }
    return s.s[s.x], true
}

// newSlice is a constructor that constructs an iterable
// container object from the native Go slice type.
func newSlice(s []int) *iterableSlice {
    return &iterableSlice{-1, s}
}

func main() {
    // Ds is just intIterator type.
    // It has no access to any data structure.
    var ds intIterator

    // Construct.  Assign the concrete result from newSlice
    // to the interface ds.  ds has a non-nil value now,
    // but still has no access to the structure of the
    // concrete type.
    ds = newSlice([]int{3, 1, 4})

    // iterate
    for {
        // Use behavior only.  Next returns values
        // but without insight as to how the values
        // might have been represented or might have
        // been computed.
        v, ok := ds.Next()
        if !ok {
            break
        }
        fmt.Println(v)
    }
} 
```

游乐场：[http ://play.golang.org/p/AFZzA7PRDR](http://play.golang.org/p/AFZzA7PRDR)

这是接口的基本思想，但对切片进行迭代是荒谬的。在许多情况下，您会使用其他语言的迭代器，您使用直接迭代基本类型的内置语言原语编写 Go 代码。您的代码保持简洁明了。如果事情变得复杂，请考虑您真正需要的功能。您是否需要在某些函数中从随机位置发出结果？通道提供了一种类似产量的功能，允许这样做。您需要无限列表还是惰性求值？闭包效果很好。您是否有不同的数据类型并且需要它们透明地支持相同的操作？接口交付。通道、函数和接口都是一流的对象，这些技术都很容易组合。那么什么是*最惯用的*方法？它是尝试不同的技术，熟悉它们，并以最简单的方式使用任何满足您需求的方法。无论如何，在面向对象的意义上，迭代器几乎从来都不是最简单的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T08:04:04.987

你可以通过为你的 goroutines 提供第二个控制消息的通道来突破而不会泄漏。在最简单的情况下，它只是一个`chan bool`. 当你想让 goroutine 停止时，你在这个频道上发送。在 goroutine 中，您将迭代器的通道发送和监听放在一个选择中的控制通道上。

[这是一个例子。](http://play.golang.org/p/9EwJzIYIlO)

您可以通过允许不同的控制消息（例如“跳过”）来进一步实现这一点。

你的问题很抽象，所以说更多，一个具体的例子会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T15:51:52.690

查看 container/list 包，似乎没有办法做到这一点。如果您迭代对象，则应使用类似 C 的方式。

像这样的东西。

```
type Foo struct {
...
}

func (f *Foo) Next() int {
...
}

foo := Foo(10)

for f := foo.Next(); f >= 0; f = foo.Next() {
...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-19T00:48:37.970

这是我想到的一种使用通道和 goroutine 的方法：

```
package main

import (
    "fmt"
)

func main() {
    c := nameIterator(3)
    for batch := range c {
        fmt.Println(batch)
    }
}

func nameIterator(batchSize int) <-chan []string {
    names := []string{"Cherry", "Cami", "Tildy", "Cory", "Ronnie", "Aleksandr", "Billie", "Reine", "Gilbertina", "Dotti"}

    c := make(chan []string)

    go func() {
        for i := 0; i < len(names); i++ {
            startIdx := i * batchSize
            endIdx := startIdx + batchSize

            if startIdx > len(names) {
                continue
            }
            if endIdx > len(names) {
                c <- names[startIdx:]
            } else {
                c <- names[startIdx:endIdx]
            }
        }

        close(c)
    }()

    return c
} 
```

[https://play.golang.org/p/M6NPT-hYPNd](https://play.golang.org/p/M6NPT-hYPNd)

我从 Rob Pike 的[Go Concurrency Patterns](https://youtu.be/f6kdp27TYZs?t=15m29s) talk 中得到了这个想法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-15T21:34:22.503

这里有这么多看似不同的解决方案这一事实意味着这似乎不是一种惯用的方式。我开始使用围棋，我认为会有一种方法可以利用`range`事物的力量。可悲的是没有。

这是我想出的（它类似于上面的一些解决方案）

```
// Node Basically, this is the iterator (or the head of it) 
// and the scaffolding for your itterable type
type Node struct {
    next *Node
}

func (node *Node) Next() (*Node, bool) {
    return node.next, node.next != nil
}

// Add add the next node
func (node *Node) Add(another *Node) {
    node.next = another
} 
```

这是我使用它的方式：

```
node := &Node{}
node.Add(&Node{})

for goOn := true; goOn; node, goOn = node.Next() {
    fmt.Println(node)
} 
```

或者可能是一个更优雅的解决方案：

```
...
func (node *Node) Next() *Node {
    return node.next
}
...

for ; node != nil; node = node.Next() {
    fmt.Println(node)
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-22T16:57:55.377

我发表了一篇关于这个主题的文章：

[https://serge-hulne.medium.com/iterators-map-filter-reduce-and-list-processing-in-go-golang-implementing-python-functional-2d24d780051f](https://serge-hulne.medium.com/iterators-map-filter-reduce-and-list-processing-in-go-golang-implementing-python-functional-2d24d780051f)

有一个相关的 Git 存储库：[https ://github.com/serge-hulne/iter/tree/main/iterate](https://github.com/serge-hulne/iter/tree/main/iterate)

主要思想是：

```
func Fib(n int) chan int {
    out := make(chan int)
    go func() {
        defer close(out)
        for i, j := 0, 1; i < n; i, j = i+j, i {
            out <- i
        }
    }()
    return out
} 
```

用作：

```
fibs = Fib(100)
for i := range Map(fibs) {
    fmt.Printf("i = %6v\n", i)
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-01T08:00:25.817

正如其他伙伴所说，您可以使用通道来实现您正在寻找的生成器设计模式。

**生成器函数**

*通道和 goroutine 为使用生成器函数实现某种形式的生产者/生产者模式提供了天然的基础。在这种方法中，goroutine 被包装在一个函数中，该函数生成通过函数返回的通道发送的值。消费者 goroutine 在生成这些值时接收它们。*

**从Go Design Patterns For Real-World**中提取的示例

 **```
package main

import (
    "fmt"
    "strings"
    )

func main() {
    data := []string{"Sphinx of black quartz, judge my vow", 
             "The sky is blue and the water too", 
             "Cozy lummox gives smart squid who asks for job pen",
             "Jackdaws love my big sphinx of quartz",
             "The quick onyx goblin jumps over the lazy dwarf"}
    histogram := make(map[string]int)
    words := words(data) // returns handle to data channel
    for word := range words { // Reads each word from channel every time
        histogram[word]++
    }   
    fmt.Println(histogram)
}

// Generator function that produces data
func words(data []string) <-chan string {
    out := make(chan string)
    // Go Routine
    go func() {
        defer close(out) // closes channel upon fn return
        for _, line := range data {
            words := strings.Split(line, " ")
            for _, word := range words {
                word = strings.ToLower(word)
                out <- word // Send word to channel 
            }
        }
     }()
     return out
} 
```

[https://play.golang.org/p/f0nynFWbEam](https://play.golang.org/p/f0nynFWbEam)

*在此示例中，声明为**func words(data []string) <- chan string**的生成器函数返回字符串元素的仅接收通道。消费者函数，在本例中为**main()**，接收生成器函数发出的数据，生成器函数使用**for...range**循环进行处理。*

此设计模式的改进版本：

[https://play.golang.org/p/uyUfz3ALO6J](https://play.golang.org/p/uyUfz3ALO6J)

添加**Next**和**Error**等方法：

```
type iterator struct {
    valueChan   <-chan interface{}
    okChan      <-chan bool
    errChan     <-chan error
    err     error
}

func (i *iterator) next() (interface{}, bool) {
    var (
        value   interface{}
        ok  bool
    )
    value, ok, i.err = <-i.valueChan, <-i.okChan, <-i.errChan
    return value, ok
}

func (i *iterator) error() error {
    return i.err
}

// Generator function that produces data
func NewIterator(data []string) iterator {
    out := make(chan interface{})
    ok := make(chan bool)
    err := make(chan error)
    // Go Routine
    go func() {
        defer close(out) // closes channel upon fn return
        for _, line := range data {
            words := strings.Split(line, " ")
            for _, word := range words {
                word = strings.ToLower(word)
                out <- word // Send word to channel and waits for its reading
                ok <- true
                err <- nil // if there was any error, change its value
            }
        }
        out <- ""
        ok <- false
        err <- nil
     }()

     return iterator{ out, ok, err, nil }
} 
```**

# android - 从哪里获得 Drive API v2 和依赖项的 Android 库（首选 maven）？

> ID：14000539
> 
> 赞同：1
> 
> 时间：2012-12-22T06:10:55.823
> 
> 标签：android, google-drive-api

有没有人想出在哪里获取库来编译[https://developers.google.com/drive/quickstart-android#step_4_set_up_the_sample](https://developers.google.com/drive/quickstart-android#step_4_set_up_the_sample)？

他们在同一页面上解释了如何通过 Eclipse 获取 Drive API v2 库。我没有使用 Eclipse 并且使用 IDE 获取库对于程序员（自动化、构建服务器等）来说看起来不合适。尽管我无法找到任何带有库的 Maven 存储库。实际上我不确定它应该是什么工件名称（或全套罐子）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:47:13.127

所有 Google API 都在那里： [http ://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

不幸的是，根据我自己的搜索，Drive SDK v2 目前仍处于测试阶段（2012 年 12 月），只能通过 Eclipse 获得。

问候

编辑：看[这里](http://code.google.com/p/google-api-java-client/source/browse/?repo=mavenrepo#hg/com/google/apis/google-api-services-drive/v2-rev13-1.8.0-beta)！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T22:55:02.467

最后我想出了如何使用来自 Maven 的 Google Drive 库。

Google Drive 所需的基本 Google 客户端 api 库位于 Maven 中心。实际上在 google code maven [repo](http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-drive/ "存储库")中有 1.8.0 版本的 Google API Services v2 库。此存储库应包含在 pom.xml 中：

```
 <repository>
        <id>google-api-services</id>
        <url>http://mavenrepo.google-api-java-client.googlecode.com/hg</url>
    </repository> 
```

除了 Google Drive 库本身，还需要一些基础 API 库。这是桌面的 mvn：

```
 <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.12.0-beta</version>
    </dependency>

    <dependency>
        <groupId>com.google.http-client</groupId>
        <artifactId>google-http-client-jackson</artifactId>
        <version>1.12.0-beta</version>
    </dependency>

    <dependency>
        <groupId>com.google.apis</groupId>
        <artifactId>google-api-services-drive</artifactId>
        <version>v2-rev13-1.8.0-beta</version>
    </dependency> 
```

在 Android 上需要更多依赖项，并且应该排除 xpp3 传递依赖项。还需要一些与 google-play-services 相关的握手。

```
 <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.12.0-beta</version>
        <exclusions>
            <exclusion>
                <artifactId>xpp3</artifactId>
                <groupId>xpp3</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.google.http-client</groupId>
        <artifactId>google-http-client-jackson</artifactId>
        <version>1.12.0-beta</version>
        <exclusions>
            <exclusion>
                <artifactId>xpp3</artifactId>
                <groupId>xpp3</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client-android</artifactId>
        <version>1.12.0-beta</version>
        <exclusions>
            <exclusion>
                <artifactId>xpp3</artifactId>
                <groupId>xpp3</groupId>
            </exclusion>
            <exclusion>
                <artifactId>google-play-services</artifactId>
                <groupId>com.google.android.google-play-services</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.syncloud</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4-SNAPSHOT</version>
    </dependency>

    <dependency>
        <groupId>com.google.apis</groupId>
        <artifactId>google-api-services-drive</artifactId>
        <version>v2-rev13-1.8.0-beta</version>
    </dependency> 
```

google-play-services 引用自 Maven Central 中的 google-api-client-android 库。尽管 Maven Central 中既没有真实的 jar 也没有存根 jar。所以你必须排除这种依赖。但是，您仍然必须提供这个 jar。您可以通过 Android SDK Manager 下载它并安装到您的 Maven 存储库中。这就是在我的案例中所做的，我在 Sonatype Maven 存储库的 org.syncloud 中引用了 google-play-services 版本 4（Gingerbread）。

要使用最新的 Google Drive v2 库，必须通过 Eclipse 下载它们并安装到您的 Maven 存储库。这是我在 Syncloud 项目中所做的：

```
 <dependency>
        <groupId>org.syncloud</groupId>
        <artifactId>google-api-services-drive</artifactId>
        <version>v2-rev33-1.12.0-beta-SNAPSHOT</version>
    </dependency> 
```

结论：在 Android 上使用来自 Maven 的 Google Drive v2 库是可能的。尽管您应该首先完全了解 Google Drive 库和 Google API Client 库之间的所有依赖关系。此外，您还必须在 Maven 中安装一些库，因为 Google 不会将最新的 Google Drive 库和 Google Play Services 库安装到任何 Maven 中。

如果 Google Drive 开发团队的任何人正在阅读这篇文章，请减轻 Maven 中缺少库的痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T07:31:49.997

他们的 api maven 仓库：

```
<repository>
  <id>googleapis</id>
  <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
</repository> 
```

和示例依赖：

```
<dependency>
  <groupId>com.google.apis</groupId>
  <artifactId>google-api-services-drive</artifactId>
  <version>v2-rev33-1.12.0-beta</version>
</dependency> 
```

他们的 maven repo 不允许列出，但您可以像这样构建 url 来获取 jars：

[http://google-api-client-libraries.appspot.com/mavenrepo/com/google/apis/google-api-services-drive/v2-rev33-1.12.0-beta/google-api-services-drive- v2-rev33-1.12.0-beta.jar](http://google-api-client-libraries.appspot.com/mavenrepo/com/google/apis/google-api-services-drive/v2-rev33-1.12.0-beta/google-api-services-drive-v2-rev33-1.12.0-beta.jar)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:04:33.977

Eclipse 有一个谷歌插件。有了它，您可以导入所有谷歌 API。只需在 Eclipse 市场中查看它。

编辑

[这是插件的链接](https://developers.google.com/eclipse/)

# api - 如何在 TinyMCE 中使用外部调用格式化所选文本？

> ID：14000540
> 
> 赞同：1
> 
> 时间：2012-12-22T06:10:57.230
> 
> 标签：api, node.js, tinymce, socket.io

我不是在寻找一种机制来更改的默认工具栏项目行为`TinyMCE`，或将行为动态注入现有工具栏 - 我有一个外部控制机制（通过调用`socket.io`和`node.js`服务器引导）并且想要执行更改或检索等操作从外部来源选择的字体系列、大小、名称、重量、变体等。这可能吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:11:35.483

是的，这是可能的，但有限。

`tinymce.get('your_editor_id').selection.getNode()`将为您提供选择父节点，使用此节点您将能够获取该节点的样式、名称和其他属性。但是请注意，如果选择跨越多个节点，预期结果可能会有所不同，因为 parentNode 是选择的两个部分的父节点。

# jquery - 我需要在链接的 css 属性被正常的 html css 设置后，使用 jquery 编辑链接的 css 属性。我怎么做？

> ID：14000541
> 
> 赞同：0
> 
> 时间：2012-12-22T06:11:09.117
> 
> 标签：jquery, html, css

我有这个链接（），它附有如下所示的某些 css。当我按下链接时，我将链接移动到页面上的不同位置。链接移动后，我还需要更改 a:active 括号中的 css。基本上，我希望顶部为 0px。animate 函数发生但 jquery 的第二行没有效果。我该如何做到这一点？

html

```
<div class = "buttons">
<a class = "About" href="#"><span>About Me</span><img src="#" alt="About Me"></a>
</div> 
```

CSS

```
.buttons a:active{
top:1px; 
} 
```

jQuery

```
$("a.About").click(function(){
        $("a.About").animate({right:'380px', bottom:'110px'},"slow");
                $(".About:active").css("top", "-=1"); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:33:23.310

jQuery 不支持`:active`选择器。您将无法`:active`从 jQuery 修改 CSS 伪选择器。对你来说最好的选择是在你的 CSS 中添加一个类来做这件事。然后使用 jQuery 来获得`.addClass()`那个特定的类名。

**编辑**

如果您想更改超链接从 A 部分移动到 B 部分时的行为方式，您可以执行以下操作：

*CSS*

```
a.sectionA:active { background-color:yellow; }
a.sectionB:active { background-color:green; } 
```

*HTML*

```
<div class="buttons">
    <a class="sectionA About" href="#"><span>About Me</span><img src="#" alt="About Me"></a>
</div> 
```

然后，每当您想将锚标记从一个部分移动到下一个部分时，您可以执行以下操作：

```
$("a").removeClass("sectionA").addClass("sectionB"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:20:28.853

可能这适合您的要求：

```
$("a.About").click(function(){
    $("a.About").animate({right:'380px', bottom:'110px'},"slow");
         $(this).css("top", "0px"); 
}); 
```

# javascript - 从 JS 类继承 Dart 类？

> ID：14000546
> 
> 赞同：2
> 
> 时间：2012-12-22T06:11:30.190
> 
> 标签：javascript, dart, createjs

我有一个使用 CreateJS js 库制作的 HTML5 游戏。我想用 Dart 重写它，但我的大部分对象都继承自 CreateJS 对象（例如 Container）。我能保存这样的遗产吗？有没有一种很好的方法可以将 Dart 与其他旨在简化画布绘图的 js 库一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T22:11:36.323

Dart 类不能直接扩展 Javascript 类。但是，您可以通过设置将执行 Dart 代码的方法来自定义您的 Javascript 对象。

例如，假设您有一个`Child`扩展 class 的 Javascript`Container`类：

```
function Container(){}
Container.prototype.callSayHello = function(){ this.sayHello(); }
Container.prototype.sayHello = function(){ alert("hello from JS"); }

function Child(){}
Child.prototype = new Container(); 
```

在 Dart 方面，您可以创建一个`Child`并在其上定义一个`sayHello`方法，覆盖`sayHello`从`Container`：

```
import 'dart:html';
import 'package:js/js.dart' as js;

main(){
  // with sayHello overriding
  js.scoped((){
    final child = new js.Proxy(js.context.Child);
    child.sayHello = new js.Callback.many(() {
      window.alert("hello from Dart");
    });
    child.callSayHello(); // displays "hello from Dart"
  });

  // without sayHello overriding
  js.scoped((){
    final child = new js.Proxy(js.context.Child);
    child.callSayHello(); // displays "hello from JS"
  });
} 
```

# java - 输入字段日期验证

> ID：14000548
> 
> 赞同：2
> 
> 时间：2012-12-22T06:11:49.693
> 
> 标签：java, android

我有三个领域

1.  当前的日期
2.  下一个到期日
3.  状态，它是具有值 open、close、all 的微调器

我的Java代码是：

```
 date_txtbx = (EditText) findViewById(R.id.date_txtbx);
        date_txtbx.setText(" "
                + String.valueOf(java.text.DateFormat.getDateTimeInstance()
                        .format(Calendar.getInstance().getTime())));

next_due_on_txtbx = (EditText) findViewById(R.id.next_due_on_txtbx);
        next_due_on_txtbx.setText(non_ticket_task.next_due_on);

       status = (Spinner) findViewById(R.id.status_spinner);
     // Create an ArrayAdapter using the string array and a default spinner layout
     ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
             R.array.Status_array, android.R.layout.simple_dropdown_item_1line);
     // Specify the layout to use when the list of choices appears
     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     // Apply the adapter to the spinner
     status.setAdapter(adapter); 
```

我希望在用户选择关闭状态时禁用下一个截止日期，并且如果用户输入的下一个截止日期小于或等于当前日期，则会显示错误消息“**请插入大于当前日期的日期**”。怎么可能？？我只想要这些验证`**EditText**`。请指导。任何帮助将不胜感激。

申请条件：

```
 next_due_on_txtbx = (EditText) findViewById(R.id.next_due_on_txtbx);
        next_due_on_txtbx.setText(non_ticket_task.next_due_on);
        if (next_due_on_txtbx.after(date_txtbx))
        {
            Context count;
            Toast.makeText(count, "Starting date cannot be before Current date", Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:23:03.257

只需检查

```
 if (date1.after(date2))
{
    Toast.makeText(Your_Current_Activity.this, 
       "Starting date cannot be before Current date", Toast.LENGTH_LONG).show();
} 
```

# android - 如何在 Eclipse 中折叠 if/else 子块

> ID：14000552
> 
> 赞同：8
> 
> 时间：2012-12-22T06:12:45.027
> 
> 标签：android, eclipse, if-statement, ide, fold

虽然我看过这两个问题，[折叠子块](https://stackoverflow.com/q/2369057/1626878)和[手动折叠代码](https://stackoverflow.com/q/206158/1626878)。

但这似乎不起作用，因为链接已损坏或某些资源不可用。

在我的项目中，我有很多功能，其中包括数百万条`if/else`语句。现在，每当我必须寻找 a`Log`时，我都必须对整个代码进行洗牌。大部分时间都浪费在`if/else`代码块上。如果我可以折叠这些`if/else`子块，那将非常有帮助。不过，eclipse 中没有内置功能。是否有任何插件可以帮助实现这一目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:45:26.093

试试这个..

首选项 -> Java -> 编辑器 -> 折叠。

根据需要选中复选框，在此处设置折叠设置。

# jquery - 搜索完成后jQuery背景图像更改

> ID：14000555
> 
> 赞同：0
> 
> 时间：2012-12-22T06:13:04.627
> 
> 标签：jquery, background-image

我正在尝试设置输入文本图像以在搜索运行时显示加载 gif。我使该部分按预期工作，但我希望在搜索完成后恢复为复选标记以向用户显示搜索已完成。这是我一直在使用的代码：

```
$(document).ready(function() {
    $('#demoTable').columnFilters({wildCard:"", alternateRowClassNames:['tablerow_odd', 'tablerow_even']});
  $('._filterText').keypress(function() {
    $(this).css({'background-image':'url(\'http://frenemylogicians.com/forum/constructore/img/loading.gif\')'});
  });
    $('._filterText').css({'background-image':'url(\'http://frenemylogicians.com/forum/constructore/img/tick.png\')'});
}); 
```

只是希望澄清我想要它做的事情。在页面加载时，搜索框有一个绿色的勾号，当搜索处于活动状态时，它有一个加载 gif，一旦搜索完成，它就会再次有一个绿色的勾号。

我正在尝试做的一个示例在这里：http: [//jsbin.com/iqehop/3/](http://jsbin.com/iqehop/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:57:49.630

该插件有一个设置`underline`来显示过滤正在进行中。据作者说：

> ... **underline**：如果脚本要在过滤过程中为搜索文本添加下划线，则设置为 true ... 适用于具有大量行且过滤器可能需要一秒钟的表格。（不在歌剧中）...

```
$('#demoTable').columnFilters({wildCard:"", underline:"true", alternateRowClassNames:['tablerow_odd', 'tablerow_even']}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:56:51.603

决定让它做我想做的最好的方法是用新设置修改插件。

我使用了peterm提到的设置作为模板来添加我想要的功能。生成的 jQuery 如下。

```
$(document).ready(function() {
    $('#blueprintSelectionTable').columnFilters({wildCard:"", backgroundImg:"true", alternateRowClassNames:['tablerow_odd', 'tablerow_even']});
}); 
```

一个工作示例是[http://jsbin.com/iqehop/8/watch](http://jsbin.com/iqehop/8/watch)

如果将来有人遇到这种情况，请不要将插件脚本链接到您的页面。[请从http://tomcoote.co.uk/code-bank/jquery-column-filters/](http://tomcoote.co.uk/code-bank/jquery-column-filters/)下载您自己的副本并将其添加到您的服务器。或者你可以将我在示例中链接的 js 文件复制粘贴到你自己的 js 文件中并上传到你的服务器，只要确保将`var backgroundImgLoc = 'url to image';`第 48 行修改为你自己的图像即可。所有其他背景图像设置都由 css 处理，因此 jQuery 的工作量最小化。

```
._filterText {
    background:url('../img/tick.png');
    background-repeat:no-repeat;
    background-position:right;
} 
```

# iphone - 如何在同名但不同目录的.h文件中使用该值

> ID：14000556
> 
> 赞同：0
> 
> 时间：2012-12-22T06:13:09.617
> 
> 标签：iphone, ios, xcode, directory

如何从不同的 3D 模型但名称和目录不同的 .h(3D 模型) 中获取值？

例如：

`A1.h`（香蕉模型）在`/FrameMarkers/Model/A1.h`

`A1.h`（老虎模型）在`/FrameMarkers/Model1/A1.h`

但是，我想从变量中获取值，这些变量是 A1NumVerts、A1Verts、A1Normal、A1TexCoords，以便用于我的条件。这是代码：

```
int Type=Animal;
 - (void) setup3dObjects
 {
     if(Type==Animal){
     [self add3DObjectWith:A1NumVerts ofVertices:A1Verts normals:A1Normals texcoords:A1TexCoords                        
                      with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:0];                                     <<<<<<<<<<<< show Tiger
     }
     else
     {        
         [self add3DObjectWith:A1NumVerts ofVertices:A1Verts normals:A1Normals texcoords:A1TexCoords
                          with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:0];                                    <<<<<<<<<<<< show Banana
     }
 } 
```

如何更改我下划线的代码以便从中获取价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:46:02.677

如果您可以手动重命名这些文件中的变量，使它们不一样，那可能是最好的解决方案。

第二种解决方案是编写 2 个帮助函数，它们返回 2 个模型，它们位于不同的实现文件中。像这样的东西：

香蕉.h：

```
void getBananaData (int* numVerts, Vertex* verts, Normal* normals, TexCoords* texCoords); // Where Vertex* and Normal* are whatever types A1Verts and A1Normals are 
```

香蕉.m:

```
#include "FrameMarkers/Model/A1.h"

void getBananaData (int* numVerts, Vertex* verts, Normal* normals, TexCoords* texCoords)
{
    // These will give you the data from the banana model
    // because we included the banana model's header and not the
    // tiger model's.
    *numVerts = A1NumVerts;
    *verts = A1Verts;
    *normals = A1Normals;
    *texCoords = A1TexCoords;
} 
```

然后对 Tiger 模型做同样的事情：

老虎.h

```
void getTigerData (int* numVerts, Vertex* verts, Normal* normals, TexCoords* texCoords); 
```

和 Tiger.m

```
#include "FrameMarkers/Model1/A1.h"

void getTigerData (int*numVerts, Vertex* verts, Normal* normals, TexCoords* texCoords)
{
    // These will give you the data from the tiger model
    // because we included the tiger model's header, and not the banana model's
    *numVerts = A1NumVerts;
    *verts = A1Verts; 
    *normals = A1Normals;
    *texCoords = A1TexCoords;
} 
```

然后在你上面的方法中，你会有这样的东西：

```
 int numVerts = 0;
 Vertex verts;
 Normals normals;
 TexCoords texCoords;
 if(Type==Animal){
     getTigerData(&numVerts, &verts, &normals, &texCoords);
 }
 else
 {        
     getBananaData (&numVerts, &verts, &normals, &texCoords);
 }
 [self add3DObjectWith:numVerts ofVertices:verts normals:normals texcoords:A1TexCoords with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:0]; 
```

第三种解决方案是`#define`在编译时使用 a 重命名其中一个文件中的变量。这不是我最喜欢的解决方案，因为它可能会导致其他问题。我可以解释它，但你可能不想这样做。

# .net - 在文本框中添加动画持续时间值

> ID：14000562
> 
> 赞同：2
> 
> 时间：2012-12-22T06:14:55.953
> 
> 标签：.net, wpf, vb.net, animation, textbox

我有一个双重动画，我知道我可以使用`:Duration="00:00:30"`例如设置持续时间，但是`Textbox`当文件在开始动画之前运行时，我可以写入持续时间值。

基本上我需要的是`Duration=" Time written within the TextBox"`

这是我尝试过的

```
Public Sub Set_Laptime(ByVal sender, ByVal KeyUpEventArgs, ByVal e)
    Dim ts As TimeSpan
    Dim LapTime As Duration
    ts = (TextBox1.Text)
    LapTime = New Duration(ts)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:04:34.097

如果我理解正确，是的。您只需要处理[KeyUp 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.keyup.aspx) ，例如，如果您想在输入持续时间并按下 Return 时开始动画：

```
void textBox_KeyUp(object sender, KeyUpEventArgs e)
{
    if (e.Key==key.return)
    {
        TimeSpan ts=TimeSpan.Parse(textBox.Text);
        Duration dur=new Duration(ts);
    }
} 
```

**编辑：** VB 转换（由[本网站](http://www.carlosag.net/tools/codetranslator/)）：

```
Private Sub textBox_KeyUp(ByVal sender As Object, ByVal e As KeyUpEventArgs)
    If (e.Key = key.return) Then
        Dim ts As TimeSpan = TimeSpan.Parse(textBox.Text)
        Dim dur As Duration = New Duration(ts)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T19:04:26.467

看起来如果您只是从默认为`Days`. 如果您使用[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)，则可以使用该[`TimeSpan.FromSeconds`](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds%28v=vs.100%29.aspx)方法来创建您的持续时间。看看这是否适合你。

```
Public Sub Set_Laptime(ByVal sender, ByVal KeyUpEventArgs, ByVal e)
    Dim seconds As Double
    Dim ts As TimeSpan
    Dim LapTime As Duration
    If Double.TryParse(TextBox1.Text, seconds) Then
        ts = TimeSpan.FromSeconds(seconds)
        LapTime = New Duration(ts)
    Else
        MessageBox.Show("Invalid Entry -Please Try Again")
        TextBox1.Text = "0"
    End If
    e.Handled = True
End Sub 
```

* * *

添加了代码以使用早期问题中的 OP 代码显示 Dependecy 属性。

首先将 Xaml 中的 DoubleAnimations 更改为：

```
<Storyboard x:Key="MyPathAnimation">
    <DoubleAnimationUsingPath Storyboard.TargetName="Ellipse1"
                          Storyboard.TargetProperty="(Canvas.Left)"
                          PathGeometry="{DynamicResource Daytona}"
                          Duration="{Binding Path=getLapTime}" RepeatBehavior="Forever" Source="X" FillBehavior="Stop" />
    <DoubleAnimationUsingPath Storyboard.TargetName="Ellipse1"
                          Storyboard.TargetProperty="(Canvas.Top)"
                          PathGeometry="{StaticResource Daytona}"
                          Duration="{Binding Path=getLapTime}" RepeatBehavior="Forever" Source="Y" FillBehavior="Stop" />
</Storyboard> 
```

然后将您的用户控件中的代码更改为：

```
Imports System.Windows.Media.Animation

Public Class UserControl1

    Public Sub runPathAnimation()
        Dim sb As Storyboard = CType(FindResource("MyPathAnimation"), Storyboard)
        sb.Begin()
    End Sub

    Shared myDependencyProperty As DependencyProperty = DependencyProperty.Register("getLapTime", GetType(Duration), GetType(UserControl1))
    Public Property getLapTime As Duration
        Get
            Return CType(GetValue(myDependencyProperty), Duration)
        End Get
        Set(value As Duration)
            SetValue(myDependencyProperty, value)
        End Set
    End Property

    Private Sub set_Laptime_KeyUp(sender As System.Object, e As System.Windows.Input.KeyEventArgs)
        Dim seconds As Double
        Dim ts As TimeSpan
        If Double.TryParse(set_Laptime.Text, seconds) Then
            ts = TimeSpan.FromSeconds(seconds)
            getLapTime = New Duration(ts)
        Else
            MessageBox.Show("Invalid Entry -Please Try Again")
            set_Laptime.Text = "0"
        End If
        e.Handled = True

    End Sub

'Alternate input method to allow inputting hours, minutes and seconds

    Private Sub set_Laptime_KeyUp(sender As System.Object, e As System.Windows.Input.KeyEventArgs)
        If e.Key = Key.Enter Then
            Dim seconds As Integer
            Dim hours As Integer
            Dim minutes As Integer
            Dim split As String() = New String() {":"}
            Dim input As String() = set_Laptime.Text.Split(split, StringSplitOptions.None)
            Dim ts As TimeSpan
            If input.Length > 0 Then Integer.TryParse(input(0), hours)
            If input.Length > 1 Then Integer.TryParse(input(1), minutes)
            If input.Length > 2 Then Integer.TryParse(input(2), seconds)
            ts = New TimeSpan(hours, minutes, seconds)
            getLapTime = New Duration(ts)

            e.Handled = True
        End If
    End Sub
    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        Me.DataContext = Me 'Very important will not work if not assigned
    End Sub
End Class 
```

# seo - Google Authorship 标记已完美实施，但未出现在 SERP 上

> ID：14000566
> 
> 赞同：1
> 
> 时间：2012-12-22T06:15:44.093
> 
> 标签：seo, microdata, schema.org, rich-snippets

我已经对我网站的此类页面（http://www.projectweavers.com/our-blog/）实施了 Google Authorship 标记，并且已经超过 2 周，但我的网站仍然没有出现在 SERP 上的 Authorship Snippets 上。

当我在 Rich Snippet 测试工具上测试我的页面时，它显示了完美的结果。我无法弄清楚这可能是什么问题？

测试工具链接： http://www.google.com/webmasters/tools/richsnippets?url=http: [//www.projectweavers.com/our-blog/&view=](http://www.google.com/webmasters/tools/richsnippets?url=http://www.projectweavers.com/our-blog/&view=)

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:37:04.063

仅仅因为您的标记有效并不意味着 Google 会显示您的作者信息。是否显示以及何时显示由他们自行决定。这适用于所有微数据架构、附加链接等。

仅供参考，我的作者身份在 Google 的搜索中显示需要一段时间，但它最终确实发生了。如果您的标记有效，则不要更改任何内容，然后等待。此时进行不必要的更改可能会使您退缩，并使您的作者身份显示需要更长的时间。

# python - 我们可以在 python-flask 中上传之前计算上传文件大小吗

> ID：14000569
> 
> 赞同：2
> 
> 时间：2012-12-22T06:16:17.073
> 
> 标签：python, flask

我有一个简单的烧瓶应用程序，我正在上传单个文件，但文件大小小于 5MB
，因为我在烧瓶应用程序中定义了
`if request.content_length < 5.250e+6: ## setting upload limit to 5MB`测试用例；但这是在上传后验证文件大小；或者可能是我错了。
那么有没有办法在上传之前获取文件大小？？？

这是python + GAE上的python[解决方案](https://github.com/blueimp/jQuery-File-Upload/tree/master/server/gae-python)，但我是python web框架的新手；我对烧瓶知之甚少
，这个解决方案基于 webapp2，这对我来说非常复杂，而且在 GAE 上也是如此；那是另一个故事。所以任何人都可以生成它的`flask`等价物或任何其他可能的方式来做到这一点`flask`？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:30:04.290

Flask 能够在上传过程中限制文件大小，请参阅[文档](https://flask.palletsprojects.com/en/2.0.x/patterns/fileuploads/#improving-uploads)。您只需`MAX_CONTENT_LENGTH`在配置应用程序时进行设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-05T14:30:52.447

这是 Audrius Kažukauskas 答案的一个扩展版本：

* * *

> 那么有没有办法在上传之前获取文件大小？？？

**没有**。根据[werkzeug 用于处理上传文件的文档](http://werkzeug.pocoo.org/docs/0.11/wrappers/#werkzeug.wrappers.BaseRequest._get_file_stream)，`Flask`所有浏览器都不能保证在上传之前验证内容大小。只有 中所有数据的总内容长度`request`才能保证存在。网络浏览器。因此，Flask/werkzeug 只能在文件上传后强制检查。

但是，为了避免您的网络服务器因内存溢出而崩溃，您可以并且应该限制可上传的大小。`MAX_CONTENT_LENGTH`这是您可以在应用程序的配置文件中提及的配置变量。

[来自Flask doc](https://github.com/mitsuhiko/flask/blob/master/docs/patterns/fileuploads.rst#improving-uploads)的示例用法：

> ```
> from flask import Flask, Request
> 
> app = Flask(__name__)
> app.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024  # for 16MB max-limit. 
> ```

但是，对于任何严肃的应用程序，您应该考虑使用 Flask-plugin [Flask-Uploads](http://pythonhosted.org/Flask-Uploads/)，它允许更高级的选项，例如将某些文件类型列入白名单和黑名单、基于类型的上传规则、可配置的上传目的地等。

您可以质疑***我为什么要进行额外的扩展***。
因为，`Flask`是一个微型框架。不是一个全能的框架。

# java - 程序在 Java 中抛出 java.lang.UnsupportedOperationException

> ID：14000571
> 
> 赞同：5
> 
> 时间：2012-12-22T06:16:38.323
> 
> 标签：java, swing, jdbc

```
 import javax.swing.*;
    import javax.swing.event.*;
    import java.awt.*;
    import java.awt.event.*;
    import java.sql.*;
    import java.io.*;

    public class Student3 extends JFrame implements ActionListener
    {
    Connection cn;
    Statement st1,st2;
    ResultSet rs;

    JPanel panel1 = new JPanel();
    JPanel panel2 = new JPanel();

    JLabel lblNo = new JLabel("Roll No ");
    JLabel lblName = new JLabel("First Name ");
    JLabel lblCont = new JLabel("Contect no ");
    JLabel lblCity = new JLabel("City ");

    JTextField txtNo = new JTextField(12);
    JTextField txtName = new JTextField(12);
    JTextField txtCont = new JTextField(12);
    JTextField txtCity = new JTextField(12);

    JButton btnFirst = new JButton("First");
    JButton btnNext = new JButton("Next");
    JButton btnPrevious = new JButton("Previous");
    JButton btnLast = new JButton("Last");
    JButton btnAdd = new JButton("Add");
    JButton btnUpdate = new JButton("Update");
    JButton btnDelete = new JButton("Delete");
    JButton btnExit = new JButton("Exit");

        Student3()
        {
            try
            {
                panel1.setLayout(new GridBagLayout());

                GridBagConstraints c = new GridBagConstraints();

                //c.fill=GridBagConstraints.BOTH;
                c.gridwidth=2;
                c.gridx=0;
                c.gridy=0;
                panel1.add(lblNo,c);

                c.gridx=2;
                c.gridy=0;
                panel1.add(txtNo,c);

                c.gridx=0;
                c.gridy=1;
                panel1.add(lblName,c);

                c.gridx=2;
                c.gridy=1;
                panel1.add(txtName,c);

                c.gridx=0;
                c.gridy=2;
                panel1.add(lblCont,c);

                c.gridx=2;
                c.gridy=2;
                panel1.add(txtCont,c);

                c.gridx=0;
                c.gridy=3;
                panel1.add(lblCity,c);

                c.gridx=2;
                c.gridy=3;
                panel1.add(txtCity,c);

                c.fill=GridBagConstraints.BOTH;
                //c.gridwidth=1;
                c.gridx=0;
                c.gridy=5;
                panel1.add(btnFirst,c);

                c.gridwidth=1;
                c.gridx=2;
                c.gridy=5;
                panel1.add(btnNext,c);

                c.gridx=3;
                c.gridy=5;
                panel1.add(btnPrevious,c);

                c.gridx=4;
                c.gridy=5;
                panel1.add(btnLast,c);

                c.gridwidth=2;
                c.gridx=0;
                c.gridy=6;
                panel1.add(btnAdd,c);

                c.gridwidth=1;
                c.gridx=2;
                c.gridy=6;
                panel1.add(btnUpdate,c);

                c.gridx=3;
                c.gridy=6;
                panel1.add(btnDelete,c);

                c.gridx=4;
                c.gridy=6;
                panel1.add(btnExit,c);

                getContentPane().add(panel1);

                btnFirst. addActionListener(this);
                btnLast. addActionListener(this);
                btnNext. addActionListener(this);
                btnPrevious. addActionListener(this);
                btnAdd. addActionListener(this);
                btnUpdate. addActionListener(this);
                btnDelete. addActionListener(this);
                btnExit. addActionListener(this);

                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");//Load the JDBC-ODBC bridge driver
                cn = DriverManager.getConnection("jdbc:odbc:STUDENT_DSN");//Connection to database is done

                //st1=cn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
                st1=cn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE,ResultSet.HOLD_CURSORS_OVER_COMMIT);
                //cn.setHoldability(ResultSet.HOLD_CURSORS_OVER_COMMIT);
                //st1.setFetchSize(25);

                st2=cn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);

                String query = "select * from Student";         
                rs=st1.executeQuery(query);
                rs.first();
                getRecord();
            }
            catch(Exception e)
            {
                System.out.println(e);
            }
        }

        public static void main (String[] args)
        {
            Student3 my =new Student3();

            my.setTitle("Java Database Operation..");
            my.setVisible(true);
            my.setResizable(false);
            my.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            my.setBounds(200,250,300,175);
        }

        void getRecord()
        {
            try
            {
                txtNo.setText(rs.getObject(1).toString());
                txtName.setText(rs.getObject(2).toString());
                txtCont.setText(rs.getObject(3).toString());
                txtCity.setText(rs.getObject(4).toString());
            }
            catch(Exception ex)
            {
                System.out.println(ex);
            }
        }

        public void actionPerformed(ActionEvent e)
        {   
            try
            {

                Object obj = e.getSource();
                if(obj == btnFirst)
                {
                    rs.first();
                    getRecord();
                }
                if(obj == btnLast)
                {
                    rs.last();
                    getRecord();                
                }
                if(obj == btnNext)
                {
                    rs.next();
                    if(!rs.isAfterLast())
                    {               
                        getRecord();
                    }
                    else
                    {
                        rs.previous();
                    }
                }
                if(obj == btnPrevious)
                {
                    rs.previous();
                    if(!rs.isBeforeFirst())
                    {               
                        getRecord();
                    }
                    else
                    {
                        rs.next();
                    }
                }
                if(obj == btnAdd)
                {
                    String name=txtName.getText();

                    String cont=txtCont.getText();

                    String city=txtCity.getText();

                    String query="insert into Student(sName,sCont,sCity) values ('"+name+"','"+cont+"','"+city+"')" ;
                    st2.executeUpdate(query);

                    query = "select * from Student";            
                    rs=st1.executeQuery(query);

                    rs.last();
                }
                if(obj == btnUpdate)
                {
                    int no =Integer.parseInt(txtNo.getText());
                    //System.out.println(no);

                    String new_name=txtName.getText();

                    String new_cont=txtCont.getText();

                    String new_city=txtCity.getText();

                    String query="update Student set sName = '"+new_name+"', sCont = '"+new_cont+"' , sCity = '"+new_city+"' where sNo = "+no+" " ;
                    st2.executeUpdate(query);
                }
                if(obj == btnDelete)
                {
                    int no =Integer.parseInt(txtNo.getText());
                    String query="delete from Student where sNo = "+no+"    " ;
                    st2.executeUpdate(query);
                }
                if(obj == btnExit)
                {
                    System.exit(0);
                }
            }
            catch(Exception ex)
            {
                System.out.println(ex);
            }
        }
    } 
```

如果我在写`st1=cn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE,ResultSet.HOLD_CURSORS_OVER_COMMIT);`，我会得到异常`java.lang.UnsupportedOperationException`。

我必须使用`ResultSet.HOLD_CURSORS_OVER_COMMIT`，因为我想在添加新记录后保持能力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T06:56:59.247

一般来说，java.lang.UnsupportedOperationException 意味着实现者不想实现该方法。在这种情况下，Odbc 人员决定不实现 createConnection 的三参数重载，可能是因为他们不支持可保持性。

我记得曾经听说过（在哪里？）Java 人员不认为 Odbc 驱动程序具有生产质量。因此，如果您要访问 mysql 数据库或其他东西，最好使用供应商特定的驱动程序。

* * *

哦，顺便说一句，如果这不是一次性代码，千万不要在同一个类中混合你的 GUI 和 SQL。

# mysql - 从第一个表中选择所有列的更好方法，在内连接时从第二个表中选择一列

> ID：14000572
> 
> 赞同：18
> 
> 时间：2012-12-22T06:16:49.770
> 
> 标签：mysql, sql, join, inner-join

## 图解说明

表 1 的列：

```
|a|b|c|d|e| 
```

表 2 的列：

```
|a|x|y|z| 
```

我只想要a，b，c，d，e，x。我只想要表 1 中的“a”列，而不是表 2 中的“a”列。

## 冗长的解释

我有两个表，其中一列共享一个通用名称。如果我使用 Select * 并使用内部联接，我会返回所有列，包括两个具有相同名称的列。

我想从第一个表中选择所有内容，而从第二个表中只选择一列。现在我正在指定我需要的每一列，这是一个拖累。有没有一种更简单的方法可以从第一个表中获取所有内容，并且只从第二个表中获取我想要的一列？

提前致谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-22T06:19:07.973

你需要指定第二个表的列名，如果它与另一个表具有相同的columnName，你需要`ALIAS`在它上面提供一个，

```
SELECT  tb1.*, tb2.x
FROM    tableA tb1
        INNER JOIN tableB tb2
            ON tb1.a = tb2.a 
```

# meteor - 在 Meteor 应用程序中插入 addthis 共享按钮？

> ID：14000574
> 
> 赞同：7
> 
> 时间：2012-12-22T06:17:04.343
> 
> 标签：meteor, addthis

如何在 Meteor 应用程序中插入 addthis 共享按钮？通常，您可以直接将提供的代码复制到 html 文件中：

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=silencing"></script>
<!-- AddThis Button END --> 
```

但在 Meteor 中，按钮不会出现。链接似乎从 DOM 中消失了。这是完整的 Meteor 应用程序（.js 和 .css 文件为空白）：

```
<head>
   <title>test-addthis</title>
</head>

<body>
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_pinterest_pinit"></a>
    <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=silencing"></script>
    <!-- AddThis Button END -->
</body> 
```

这是一个显示问题的实时版本：http: [//testaddthismeteor.meteor.com/](http://testaddthismeteor.meteor.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:51:20.150

Meteor 模板中的 body 标签并不是真正的 HTML body 标签。它只是您的应用程序的“主体”。

因此，当 Meteor 加载您的应用程序时，它将生成 HTML 元素以在浏览器本身中呈现页面，然后呈现任何适用的模板。在您的情况下，您有一个包含脚本标记的模板，并且您的假设是，与标准 HTML 文档一样，浏览器将继续执行相关的 Javascript。但是，这不是它的工作方式。Javascript 没有被执行，DOM 节点只是被附加到 DOM 结构中。

您可以通过尝试记录的值来测试`addthis_config`它 - 它将是未定义的。您尝试包含的 addthis 脚本也没有被浏览器拾取，因为 Web Inspector 中的资源选项卡会显示。

为了解决这个问题，您需要告诉 Meteor 获取外部脚本，然后设置变量。在模板的`<head>`元素中，添加脚本：

```
 <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=silencing"></script> 
```

然后在你的 Javascript 中声明变量：

```
 if (Meteor.isClient) {
    var addthis_config = {"data_track_addressbar": true};
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:56:48.630

除了上面的好答案，您还需要保护外部代码所依赖的 DOM 的任何部分，否则 Meteor 可能会重写它。你可以通过包围它来做到这一点

```
{{#constant}}
    <!-- protected DOM -->     
{{/constant}} 
```

[所有解释here](http://docs.meteor.com/#constant) [和here](https://stackoverflow.com/questions/13060173/whats-the-correct-way-to-perform-dom-manipulation-in-meteor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T18:33:43.717

添加到 Rahul 的出色答案中，如果您的应用程序使用 Meteor.router 包，和/或如果您在应用程序中显示不同的页面，则每次切换到新页面时都必须刷​​新共享按钮页。

为此，请将其添加为 javscript api 以呈现按钮和工具箱 ( [http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#rendering-js](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#rendering-js) )

在页面的主模板（切换页面时更改的模板）上，实现渲染模板时调用的渲染助手：

```
Template.mypage.rendered = function() {
    // in this case we render a toolbox
    addthis.toolbox(".addthis_toolbox");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-06T18:39:37.523

在使用 Iron:Router 包路由的 Meteor 应用程序中使用 AddThis 时，这里没有一个答案对我有用。

幸运的是， [AddThis 的文档](http://www.addthis.com/academy/using-dashboard-configuration-tools-dynamically/)引导我朝着正确的方向前进。

`<head>`我按照其他答案的建议将 AddThis 脚本放在标签中。

```
<head>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=XX-XXXXXX"></script>
</head> 
```

然后我将工具箱元素放在它自己的模板中（在我网站的各个页面上调用该模板`{{> blockAddThis}}`）。

```
<template name="blockAddThis">
    <div class="addThis">
        <div class="addthis_inline_share_toolbox"></div>
    </div>
</template> 
```

然后我`addthis.layers.refresh()`为该模板调用了 onRendered 函数。

```
Template.blockAddThis.onRendered(function() {
    addthis.layers.refresh();
}); 
```

现在，当我浏览我的网站时，它适用于所有页面。

# c++ - OpenCV 窗口在一瞬间消失

> ID：14000577
> 
> 赞同：0
> 
> 时间：2012-12-22T06:17:45.840
> 
> 标签：c++, opencv

我正在学习[学习 OpenCV](http://shop.oreilly.com/product/9780596516130.do)（O'Reilly，来自 Bradsky 和 ​​Kaehler）。

编译并运行示例 2-3 后，由`cvNamedWindow`（应该存储/显示视频）创建的窗口仅出现一瞬间。然后它消失了。

这是我的代码：

```
#include "cv.h"
#include "highgui.h"
int g_slider_position = 0;
CvCapture* g_capture = NULL;
void onTrackbarSlide(int pos) {
    cvSetCaptureProperty(
                         g_capture,
                         CV_CAP_PROP_POS_FRAMES,
                         pos
                         );
}
int main( int argc, char** argv ) {
    cvNamedWindow( "Example3", CV_WINDOW_AUTOSIZE );
    g_capture = cvCreateFileCapture( argv[1] );
    int frames = (int) cvGetCaptureProperty(
                                            g_capture,
                                            CV_CAP_PROP_FRAME_COUNT
                                            );
    if( frames != 0 ) {
        cvCreateTrackbar(
                         “Position”,
                         “Example3”,
                         &g_slider_position,
                         frames,
                         onTrackbarSlide
                         );
    }
    IplImage* frame;

    // While loop (as in Example 2) capture & show video
    // Release memory and destroy window

    return(0);
} 
```

我使用的是 Windows 7、OpenCV 2.4.3 和 VS 2010；我正在从命令行运行代码。

是什么导致窗户关闭得这么快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:43:42.180

您必须使用 while 循环来捕获和显示视频，如示例 2 所示。在此之后释放内存并销毁窗口。;)

# emacs - 如何像普通 IDE 一样缩进行

> ID：14000579
> 
> 赞同：2
> 
> 时间：2012-12-22T06:18:20.197
> 
> 标签：emacs

Emacs 不会自动为我缩进行。例如：

```
int main() {
   int a;
int b; // this line still don't indent with int a
} 
```

那么，如何在 Emacs 中缩进一行？而且，每次我键入`{`时，如何让 Emacs 像其他 IDE（eclipse、netbean ...）一样自动缩进一个选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:24:09.080

如果您只想自动缩进 C 代码，请将其放入您的`.emacs`文件中：

```
(defun enable-newline-and-indent ()
  (local-set-key (kbd "RET") 'newline-and-indent))
(add-hook 'c-mode 'enable-newline-and-indent) 
```

或者，您可以为所有这样的编程模式启用此行为（它仅适用于 Emacs 24+）：

```
(defun enable-newline-and-indent ()
  (local-set-key (kbd "RET") 'newline-and-indent))
(add-hook 'prog-mode 'enable-newline-and-indent) 
```

另一种选择是使用Emacs 24 中引入的`electric-indent-mode`and ——它们基本上会在一些字符之后触发换行符或缩进，比如and 。`electric-layout-mode``;``{`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T09:05:30.313

Emacs 的正常行为是保留`RET`( `Enter`) 键以按字面意思插入回车，而它使用`C-j`( `Ctrl`+ `J`) 进行输入和缩进。这也是因为一系列其他键可能导致行重新缩进。按照传统，导致重新缩进的命令以“电”作为其名称的一部分。`c-mode`有一堆“电动”命令。要找到它们，在编辑 C 源代码时，您可以执行以下操作：

*   `C-h b`( `Ctrl`+ `H` `B`) - 列出缓冲区中的所有键绑定。

*   `M-s o`（`Alt`PC 或`Option`Mac + `S` `O`）- 调用`occur`命令，或者，您可以`M-x``occur`。

*   在提示您输入时输入“electric” `occur`（在上一步之后，该点将在 minibuffer 中，因此继续输入）。

它将打开一个额外的缓冲区，其内容类似于：

```
12 matches for "electric" in buffer: *Help*
    706:C-d             c-electric-delete-forward
    709:#               c-electric-pound
    710:( .. )          c-electric-paren
    711:*               c-electric-star
    712:,               c-electric-semi&comma
    713:/               c-electric-slash
    714::               c-electric-colon
    715:;               c-electric-semi&comma
    716:{               c-electric-brace
    717:}               c-electric-brace
    718:DEL             c-electric-backspace
    726:C-c C-l         c-toggle-electric-state 
```

这列出了所有命令和分配给它们的键，它们执行一些“电动”动作。您可以将点移动到它们中的任何一个，然后按`C-h f`( `Ctrl`+ `H` `F`)`RET`将打开帮助页面，描述该命令的确切作用。例如，如果您请求帮助，`c-electric-colon`它将向您显示：

```
c-electric-colon is an interactive compiled Lisp function in
`cc-cmds.el'.

(c-electric-colon ARG)

Insert a colon.

If `c-electric-flag' is non-nil, the colon is not inside a literal and a
numeric ARG hasn't been supplied, the command performs several electric
actions:

(a) If the auto-newline feature is turned on (indicated by "/la" on
the mode line) newlines are inserted before and after the colon based on
the settings in `c-hanging-colons-alist'.

(b) Any auto-newlines are indented.  The original line is also
reindented unless `c-syntactic-indentation' is nil.

(c) If auto-newline is turned on, whitespace between two colons will be
"cleaned up" leaving a scope operator, if this action is set in
`c-cleanup-list'.

[back] 
```

您可以从这里继续阅读手册，方法是将点移动到看起来像超链接的项目（通常它带有下划线，或者具有不同的视觉外观，然后是文本的其余部分），然后点击`RET`。您可以使用`C-b`和模式`C-f`在`*Help*`您已经访问过的页面之间来回导航（或将点移至`[back]`或`[forward]`按钮并按`RET`）。

# php - 带有添加键的 PHP 数组

> ID：14000585
> 
> 赞同：-1
> 
> 时间：2012-12-22T06:19:44.513
> 
> 标签：php, arrays

我有代码：

```
<?php $array = array(0, 7, 12, 13, 24, 55, 46, 17); 

for ($i = 1; $i < count($array);): ?>

<div>
  <ul>
    <?php for($j = 0; $j < 3 && $i + $j < count($array); ++$j):?>
    <li><?php echo $array[$j + $i] ?></li>
    <?php endfor; $i += $j;?> 
  </ul>
</div>

<?php endfor; ?> 
```

它创建了一组 html 片段：

```
<div>
  <ul>
        <li>0</li>
        <li>7</li>
        <li>12</li>         
  </ul>
</div>    
//etc 
```

我应该如何修改此代码才能获取该 html：

```
<div>
  <ul>
        <li><a href="#0">a</a></li>
        <li><a href="#7">b</a></li>
        <li><a href="#12">c</a></li>
  </ul>
</div>    
//etc 
```

如果我会使用这个数组：

```
$array=array(
  "a"=>   "0",
  "b"=>   "7",
  "c"=>   "12",
  "d"=>   "13",
  "e"=>   "24",      
  //etc
); 
```

?

我试着用

```
foreach ($array as $a => $b)
{
  echo '<li><a href="'.$b.'">'.$a.'</a></li>'."\n";
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:31:15.430

```
<div>
<?php
echo '<ul>';
foreach ($array as $a => $b)
{
  echo '<li><a href="#'.$b.'">'.$a.'</a></li>';
}
echo '</ul>';
?>
</div> 
```

会产生

```
<div>
  <ul>
        <li><a href="#0">a</a></li>
        <li><a href="#7">b</a></li>
        <li><a href="#12">c</a></li>
        ...
        ...
  </ul>
</div> 
```

键盘没有在我的系统中打开，所以我不知道你目前得到什么输出

[**演示**](http://sandbox.onlinephpfunctions.com/code/270512e1090622f99bd75fef2207d36a79dffa1d)

# c# - 数据绑定到数据行

> ID：14000592
> 
> 赞同：0
> 
> 时间：2012-12-22T06:20:52.490
> 
> 标签：c#, ado.net

我正在将 DataBindings 用于无类型的 DataTable，如下所示

```
textbox1.DataBindings.Add("Text", _dataTable, columnName ); 
```

现在数据绑定工作正常，但是，我正在检查行的状态（当然是在更改值之后）并且它显示未更改。只是想知道不应该修改吗？

```
_dataTable.Rows[0]
{System.Data.DataRow}
    HasErrors: false
    ItemArray: {object[11]}
    RowError: ""
    RowState: Unchanged
    Table: {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:26:30.687

调用_dataTable。**AcceptChanges()**将您的更改提交到行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:47:19.093

我使用`_dataTable.BeginEdit()`and`_dataTable.EndEdit()`将行状态更改为已修改。

# php - 使用 History.js 刷新时没有持久状态

> ID：14000593
> 
> 赞同：2
> 
> 时间：2012-12-22T06:21:09.833
> 
> 标签：php, jquery, history.js

我最近在我的页面上实现了 History.js，并且遇到了脚本问题。如果我转到索引页面，然后单击一个链接，事情就会像他们应该的那样工作。新内容被加载，没有页面刷新，所有导航链接仍然有效。但是，如果我在使用其中一个链接后刷新，然后单击一个链接，则 URL 会更改，但内容不会更改。我不确定发生了什么事。

后退和前进按钮工作正常，使用后我可以访问导航。这是我正在使用的javascript：

```
function fire()
{
var
History = window.History,
State = History.getState();

$('a').live('click', function(e)
{
    e.preventDefault();
    var path = $(this).attr('href');
    var title = $(this).attr('title');
    History.pushState('ajax',title,path);
}
);

// Bind to state change
// When the statechange happens, load the appropriate url via ajax
History.Adapter.bind(window,'statechange',function() 
    { 
        load_ajax_data();
    History.log(State.data, State.title, State.url);
    }
);

function load_ajax_data() {
 State = History.getState();   
 $.post(State.url, function(data) {
 $("#content").load(State.url + ' #contentDiv'); 
    }); 
 }
}

$(document).ready(fire()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T01:39:24.200

我知道这是一个老问题，但我遇到了同样的问题，刷新页面后导航不起作用，但您可以看到 url 链接。

修复只需更新到最新版本的 History.js [https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

这是我的代码：

```
//Under Document.ready
if (History.enabled) {
      var History = window.History;
          History.Adapter.bind(window, "popstate", function() {
                    var State = History.getState();
                    History.log(State.data, State.title, State.url);

                    if (JSON.stringify(State.data) != "{}") {
                        var obj = State.data.content;
                        search = State.data.search;
                        $("#content").html(obj);
                        $("#search").val(search);
                    }
          });
    } 
```

而且因为我只想在 ajax 请求上推送状态：

```
//under .ajaxStop
 History = window.History;
            if (History.enabled) {
                var grid = $("#content").html();
                var search = $("#search").val();
                History.pushState({ content: grid, search: search }, "Search", "?" + $("#FormID").serialize());
            } 
```

其中**#content**是呈现部分视图的div，**#search**是文本框元素。

**注意：我使用的是 Histyori.js 1.7，更新到 1.8 后一切都开始工作了。**

我希望这对其他人有用。

# python - 用 matplotlib 绘制方程

> ID：14000595
> 
> 赞同：38
> 
> 时间：2012-12-22T06:22:49.073
> 
> 标签：python, matplotlib

我正在尝试制作一个函数来绘制我告诉它的任何公式。

```
import numpy as np  
import matplotlib.pyplot as plt  
def graph(formula, x_range):  
    x = np.array(x_range)  
    y = formula  
    plt.plot(x, y)  
    plt.show() 
```

当我尝试调用它时，会发生以下错误，我相信它正在尝试在它到达之前进行乘法运算`y = formula`。

```
graph(x**3+2*x-4, range(-10, 11))

Traceback (most recent call last):  
  File "<pyshell#23>", line 1, in <module>  
    graph(x**3+2*x-4, range(-10, 11))  
NameError: name 'x' is not defined 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-22T06:32:16.840

您的猜测是正确的：代码正在尝试`x**3+2*x-4`立即评估。不幸的是，您无法真正阻止它这样做。好消息是，在 Python 中，函数是一等对象，我的意思是您可以像对待任何其他变量一样对待它们。因此，要修复您的功能，我们可以这样做：

```
import numpy as np  
import matplotlib.pyplot as plt  

def graph(formula, x_range):  
    x = np.array(x_range)  
    y = formula(x)  # <- note now we're calling the function 'formula' with x
    plt.plot(x, y)  
    plt.show()  

def my_formula(x):
    return x**3+2*x-4

graph(my_formula, range(-10, 11)) 
```

如果您想在一行中完成所有操作，则可以使用所谓的`lambda`函数，它只是一个没有名称的简短函数，您不使用`def`or `return`：

```
graph(lambda x: x**3+2*x-4, range(-10, 11)) 
```

而不是`range`，您可以查看`np.arange`（允许非整数增量）和`np.linspace`，它允许您指定开始、停止和要使用的点数。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-22T06:37:51.860

这是因为在行

```
graph(x**3+2*x-4, range(-10, 11)) 
```

x 未定义。

最简单的方法是将要绘制的函数作为字符串传递，并将`eval`其作为表达式求值。

所以你的代码修改最少

```
import numpy as np  
import matplotlib.pyplot as plt  
def graph(formula, x_range):  
    x = np.array(x_range)  
    y = eval(formula)
    plt.plot(x, y)  
    plt.show() 
```

你可以把它称为

```
graph('x**3+2*x-4', range(-10, 11)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-19T21:50:58.883

要绘制未针对特定变量（如圆或双曲线）求解的方程：

```
import numpy as np  
import matplotlib.pyplot as plt  
plt.figure() # Create a new figure window
xlist = np.linspace(-2.0, 2.0, 100) # Create 1-D arrays for x,y dimensions
ylist = np.linspace(-2.0, 2.0, 100) 
X,Y = np.meshgrid(xlist, ylist) # Create 2-D grid xlist,ylist values
F = X**2 + Y**2 - 1  #  'Circle Equation
plt.contour(X, Y, F, [0], colors = 'k', linestyles = 'solid')
plt.show() 
```

更多关于它：[http ://courses.csail.mit.edu/6.867/wiki/images/3/3f/Plot-python.pdf](http://courses.csail.mit.edu/6.867/wiki/images/3/3f/Plot-python.pdf)

# android - 如何冻结软键盘中的go按钮

> ID：14000598
> 
> 赞同：0
> 
> 时间：2012-12-22T06:23:05.377
> 
> 标签：android, android-emulator, android-softkeyboard

我的项目中有一个 webView，当我点击软键盘上的 go 按钮时，表单提交并返回错误。我想隐藏键盘而不是表单提交。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:53:32.130

我读了一点，我想你可能正在寻找 android:imeOptions="actionDone" （或者可能是 actionNone）。自己还没试过......在这里查看更多信息： [http](http://android-developers.blogspot.co.il/2009/04/updating-applications-for-on-screen.html) ://android-developers.blogspot.co.il/2009/04/updating-applications-for-on-screen.html 在“控制操作按钮”下"

# eclipse - 如何在 Eclipse 中使用 EGIT 仅将特定文件从一个分支更新到另一个分支？

> ID：14000599
> 
> 赞同：1
> 
> 时间：2012-12-22T06:23:32.803
> 
> 标签：eclipse, git, branch, diff, egit

我在分支 A 中有一个更新的文件 Constants.java。现在我需要切换到分支 B。我只需要分支 B 中的更新的 Constants.java 文件。如何在 Eclipse 中使用 EGIT 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:50:49.180

要在 git 中执行此操作，您可以这样进行：

1.  结帐分支a：`git checkout A`
2.  来自分支 b 的签出**文件：**`git checkout B -- Constants.java`
3.  提交您的更改：`git commit`

在 EGit 中，检出单个文件的选项非常隐藏：它可以在文件的“替换为 -> 提交...”上下文菜单中找到。（来自[这个答案](https://stackoverflow.com/a/4104149/1761499)）。

# java - 获取 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: SQL 语法

> ID：14000603
> 
> 赞同：0
> 
> 时间：2012-12-22T06:23:57.557
> 
> 标签：java, mysql, sql

```
do 
{ 
String mid=res.getString(1); 
String model=res.getString(2); 
String name=res.getString(3); 
int price=res.getInt(4); 
String pcolor=res.getString(5); 
String imei=res.getString(6); 
java.sql.Date date=res.getDate(7);
String access=res.getString(8); 

if(id.equals(mid) || id.equals(imei)) 
{ 
System.out.println("iam inside"); 
PreparedStatement prp=con2.prepareStatement("insert into msearch values(?,?,?,?,?,?,?,?)"); 
prp.setString(1,mid); 
prp.setString(2,model); 
prp.setString(3,name); 
prp.setInt(4,price); 
prp.setString(5,pcolor); 
prp.setString(6,imei); 
prp.setDate(7,date); 
prp.setString(8,access); 

prp.executeUpdate(); 

System.out.println("iam inside2"); 
rows++; 
b=1; 
jTextField1.setText(""); 
} 

}while(res.next()); 
```

我是 mysql 新手

我正在尝试执行上面的代码，我得到了

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

应该是什么问题，请帮忙，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:01:11.220

像这样更改您的prepareStatement；

```
 insert into msearch (mid, model, name, price, pcolor, imei, date, access) values(?,?,?,?,?,?,?,?) 
```

# jsp - JSP servlet HTTP 状态 404 请求的资源不可用

> ID：14000606
> 
> 赞同：0
> 
> 时间：2012-12-22T06:25:22.163
> 
> 标签：jsp, servlets, http-status-code-404, java-ee-6

保险INFO.jsp：

```
<div class="content">
<h3>Insurance policies</h3><br><br>
<form action="/Project/src/servlet/PolicyServlet" method="POST">
<jsp:useBean id="pBean" class="servlet.Policy"/>
<jsp:setProperty name="pBean" property="policyNo" value="P1"/>
<h2>P1</h2>
<input type="hidden" name="P1value" value="P1">
<input type="submit">
</div>
</form> 
```

我调用 servlet 的路径是否正确？我也尝试过“form action="/PolicyServlet"。它不起作用:(我无计可施。尝试了谷歌的许多解决方案，但都没有奏效。任何帮助都得到了认可

错误：

```
HTTP Status 404 <br>
The requested resource (/Project/src/servlet/PolicyServlet) is not available. 
```

这是我的项目布局。（我无法发布图片，因为我是新用户。对不起..）

```
Project-
    Java Resources-
        src-
            servlet-
                PolicyServlet.java
WebContent-
    views-
        zyViews-
            InsuranceINFO.jsp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T08:06:24.247

尝试`<form action="/servlet/PolicyServlet" method="POST">`

你应该有 web.xml 如下

```
<servlet>
    <servlet-name>PolicyServlet</servlet-name>
    <servlet-class>servlet.PolicyServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>PolicyServlet</servlet-name>
    <url-pattern>/servlet/PolicyServlet</url-pattern>
</servlet-mapping> 
```

不要将动作直接指向源代码，这需要使用 servlet 的 web.xml 映射来完成。

# usb - Windows下如何发出USB设备重连

> ID：14000608
> 
> 赞同：8
> 
> 时间：2012-12-22T06:25:42.090
> 
> 标签：usb, deadlock, device-driver, ftdi

我有一个基于 FTDI 芯片的 USB 设备。有时，它的驱动程序会卡住。

在linux下，没有问题——设备​​会自动断开，默认内核会重新连接，唯一的问题是设备名称改变了——可以通过udev规则修复。

在windows下，当它卡住时，应用程序的线程`read()`或`write()`此时完全挂起。它不能被杀死，也不能被 杀死`TerminateThread`，也不能被 杀死`KillProcess`。

杀死应用程序的唯一方法是物理断开 USB 设备。

任何方式以编程方式发出设备重新连接，这将消除驱动程序的死锁并允许重新打开端口并在之后继续工作？

如果需要，可以申请管理权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:54:02.830

我建议你把你的想法上移一步。您正在尝试直接重新启动 USB 设备，为什么不尝试集线器呢？

我有一个类似的问题，并且正在做：

```
devcon remove *ROOT_HUB* && devcon rescan 
```

挂起时将 USB 设备重新连接到集线器。

**注意**：这将从设备管理器中删除所有 USB 设备并重新添加它们。您可以根据需要使用 expect 或 like 来执行和`devcon findall *ROOT_HUB*`删除。`ROOT_HUB20``ROOT_HUB30`

# c# - 业务逻辑类

> ID：14000609
> 
> 赞同：7
> 
> 时间：2012-12-22T06:26:01.603
> 
> 标签：c#

我遇到了几种在 asp.net 中编写业务逻辑的方法，但我想知道下面的 2 个示例，使用结构存储类变量有什么好处：

```
namespace Shopping
{
   public struct ShoppingCart
   {
       public string Color;
       public int ProductId;
   }

   public partial class MyShoppingCart 
   {

       public decimal GetTotal(string cartID)
       {
       }

       // Some other methods ...
   }
} 
```

* * *

```
namespace Shopping
{
   public partial class MyShoppingCart 
   {
       public string Color{ get; set; }
       public int ProductId{ get; set; }

       public decimal GetTotal(string cartID)
       {
       }

       // Some other methods ...
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T06:29:33.120

正如 dsimcha 在[他们的回答](https://stackoverflow.com/a/521311/19679)中所说：

> 每当您不需要多态性、需要值语义并希望避免堆分配和相关的垃圾收集开销时。然而，需要注意的是，结构（任意大）比类引用（通常是一个机器字）更昂贵，因此在实践中类最终可能会更快。

正如 JoshBerke 在[他的回答](https://stackoverflow.com/a/521309/712603)中所说：

> 当您需要值语义而不是引用语义时，请使用结构。

来自[http://msdn.microsoft.com/en-us/library/ms228593.aspx](http://msdn.microsoft.com/en-us/library/ms228593.aspx)

> **1.7 结构**
> 
> 与类一样，结构是可以包含数据成员和函数成员的数据结构，但与类不同的是，结构是值类型，不需要堆分配。结构类型的变量直接存储结构的数据，而类类型的变量存储对动态分配对象的引用。结构类型不支持用户指定的继承，所有结构类型都隐式继承自类型对象。
> 
> 结构对于具有值语义的小型数据结构特别有用。复数、坐标系中的点或字典中的键值对都是结构的好例子。对小型数据结构使用结构而不是类可以在应用程序执行的内存分配数量上产生很大差异。例如，以下程序创建并初始化一个包含 100 个点的数组。将 Point 实现为一个类，实例化了 101 个单独的对象——一个用于数组，一个用于 100 个元素。

# php - PHP MySQL查询以获取特定用户ID的最大事件ID

> ID：14000612
> 
> 赞同：2
> 
> 时间：2012-12-22T06:26:54.290
> 
> 标签：php, mysql, sql

我有一个带有`event_id`, `eventname`, `date`, `time`, `location`,的表`user_id`。每个用户 ID 可以有多个事件 ID。例如，我想查询最高的事件 ID `user id = 30`。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:28:57.193

```
SELECT 
    MAX(event_id) as MEvent_id , 
    eventname, 
    date, 
    time, 
    location, 
    user_id 
FROM mytable 
WHERE user_id = 30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T06:28:58.083

这非常简单。

```
 SELECT MAX(event_id) FROM table WHERE user_id = 30 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T06:29:09.927

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT userID, MAX(event_ID) maxID
            FROM tableName
            GROUP BY userID
        ) b ON  a.userID = b.userID AND
                a.event_ID = b.maxID
WHERE   a.userID = 30 
```

# image - 如何使用 WriteableBitmapExtension 库在 Windows Phone 上模糊图像？

> ID：14000616
> 
> 赞同：0
> 
> 时间：2012-12-22T06:28:48.437
> 
> 标签：image, windows-phone-7, windows-phone-8, blur

这似乎不起作用？

```
WriteableBitmap wb = new WriteableBitmap(albumArtImage);
WriteableBitmapExtensions.Convolute(wb, WriteableBitmapExtensions.KernelGaussianBlur5x5);
AlbumBackground.ImageSource = wb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:45:43.213

尝试：

```
WriteableBitmap wb = new WriteableBitmap(albumArtImage);
var wb2 = WriteableBitmapExtensions.Convolute(wb, WriteableBitmapExtensions.KernelGaussianBlur5x5);
AlbumBackground.ImageSource = wb2; 
```

# ruby - 如何在 eventmachine 中实现无限循环

> ID：14000632
> 
> 赞同：4
> 
> 时间：2012-12-22T06:32:19.070
> 
> 标签：ruby, eventmachine

我需要在 eventmachine 之上有一个无限循环，不断读取 redis 队列。下面是我的代码。递归是正确的方法吗？我尝试`loop do`了循环，但无法使其以这种方式工作。

```
require 'em-hiredis'

def read
  d = @redis.blpop 'queue', 0
  d.callback do |_, value|
    p value
    read
  end.errback do |e|
    p e
    EM.next_tick { read }
  end
end

EM.run do
  @redis = EM::Hiredis.connect
  read
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:18:12.277

最好订阅 redis 发布/订阅队列。 [https://gist.github.com/957367](https://gist.github.com/957367) 如果你真的需要一个循环，那么 EM 本身就是一个无限循环，你只需要用 next_tick 一次又一次地安排你的工作：

```
def read
  d = @redis.blpop 'queue', 0
  d.callback do |_, value|
    EM.next_tick { read }
  end.errback do |e|
    EM.next_tick { read }
  end
 end 
```

# perl - 尾随逗号来自哪里（perl）

> ID：14000636
> 
> 赞同：0
> 
> 时间：2012-12-22T06:33:03.077
> 
> 标签：perl, parsing, csv, text-files, comma

这是一个 perl 脚本，它采用制表符分隔的输出文件并输出三个不同的文本文件，也是制表符分隔的。SO 上的另一个用户帮助我纠正了一个错误，该错误在输出文件的每一行末尾创建了额外的空白。但是，我希望输出逗号分隔的文本。当我替换`print $Afile join( ",", @ADD) , "\n";`而不是 `print $Afile join( "\t", @ADD) , "\n";`在输出文件的每一行末尾得到两个尾随逗号时。这些是从哪里来的？

```
#!/usr/bin/perl
use strict; use warnings;

die "usage: [ imputed genotype.file ]\n" unless @ARGV == 1;

open my $Afile, ">$imputed" . "_ADD.txt" or die $!;
open my $Dfile, ">$imputed" . "_DOM.txt" or die $!;
open my $Ifile, ">$imputed" . "_IMP.txt" or die $!;

<>; #skip header
while(<>){ 
  chomp;
  my @entries = split( '\t', $_ );

  my @ADD = ();
  my @DOM = ();
  my @IMP = ();

  push( @ADD, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);
  push( @DOM, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);
  push( @IMP, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);

  for ( my $i = 3; $i < scalar @entries - 1 ; $i+=3 ) { ### for each entry per line
      push( @ADD, $entries[ $i ] );
      push( @DOM, $entries[ $i + 1 ] );

  $entries[ $i + 2 ] =~ s/^NA$//; 

      push( @IMP, $entries[ $i + 2 ] );
  }

  print $Afile join( "\t", @ADD) , "\n"; 
  print $Dfile join( "\t", @DOM) , "\n"; 
  print $Ifile join( "\t", @IMP) , "\n"; 

} ### for loop   

close $Afile;
close $Dfile;
close $Ifile; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T06:42:25.340

由于制表符是空白字符，您在当前版本中看不到它们，但您已经有尾随制表符。它们是由于数组中的 null 元素造成的。您可以使用 grep 过滤它们：

```
print $Afile join( ",", grep { $_ } @ADD) , "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:10:50.197

几乎按照定义，`join`不会引入尾随逗号；它通过在数组元素*之间*插入逗号来构建字符串。但是数组的元素不一定是你认为的那样。考虑当您提供的代码段出现如下行时会发生什么：

```
A,B,C,D,E,NA 
```

这条线`$entries[$i+2] =~ s/^NA$//;`意味着`@IMP`看起来像`('A', 'B', 'C', '')`，这意味着`join(",", @IMP)`它将是`"A,B,C,,"`并且有你的尾随逗号。

您的输入也可能格式不正确。像这样的行会在你的几个数组上`A,B,C,D`留下值，但这意味着在这种情况下你会看到一堆错误。`undef``strict``warnings`

# windows-phone-7 - 无法使用 stropher.js 连接 XMPP 服务器

> ID：14000640
> 
> 赞同：1
> 
> 时间：2012-12-22T06:33:32.160
> 
> 标签：windows-phone-7, cordova, strophe

当我使用 stropher.js 连接到 XMPP 服务器时，连接状态为 1 = 当前正在建立连接

这种状态有什么问题。

连接代码如下。

它返回我连接状态。

```
$(document).ready(function () {
$('#login_dialog').dialog({
    autoOpen: true,
    draggable: false,
    modal: true,
    title: 'Connect to XMPP',
    buttons: {
        "Connect": function () {
            $(document).trigger('connect', {
                jid: $('#jid').val(),
                password: $('#password').val()
            });                
            $('#password').val('');
            $(this).dialog('close');
        }
    }
});
});

$(document).bind('connect', function (ev, data) {
    var conn = new Strophe.Connection("http://127.0.0.1:5280/http-bind");
    //"http://bosh.metajack.im:5280/xmpp-httpbind");

        conn.connect(data.jid, data.password, function (status) {           
    if (status === Strophe.Status.CONNECTED) {          
        $(document).trigger('connected');
    } else if (status === Strophe.Status.DISCONNECTED) {
        Hello.log("Status DISCONNECTED.");
        $(document).trigger('disconnected');
    }
});

 Hello.connection = conn;
});

 $(document).bind('connected', function () {
    // inform the user
    Hello.log("Connection established.");

   Hello.connection.addHandler(Hello.handle_pong, null, "iq", null, "ping1");

   var domain = Strophe.getDomainFromJid(Hello.connection.jid);

   Hello.send_ping(domain);

 });

 $(document).bind('disconnected', function () {
   Hello.log("Connection terminated.");

   // remove dead connection object
  Hello.connection = null;
}); 
```

我正在使用电话间隙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T09:58:08.177

你的代码`Stroph.Connection`是错误的。首先，您验证传递 URL 参数`Stroph.connnection("URL")`是否有效。

```
$(document).bind('connect', function (ev, data) {
    var conn = new Strophe.Connection("http://example.com:7070/http-bind");
    //"http://bosh.metajack.im:5280/xmpp-httpbind"); 
```

*   在上面的代码中，**7070**用于 Openfire 上 HTTP 绑定连接的不安全端口。
*   如果您的问题没有解决，请提供您在 PhoneGap 应用程序中使用的 XMPP 服务器。

# javascript - 扩展原生 JavaScript 数组

> ID：14000645
> 
> 赞同：32
> 
> 时间：2012-12-22T06:34:29.663
> 
> 标签：javascript, typescript

有没有办法从 JS 原生函数继承一个类？

例如，我有一个这样的 JS 函数：

```
function Xarray()
{
    Array.apply(this, arguments);
    //some stuff for insert, add and remove notification
}
Xarray.prototype = new Array(); 
```

我试图将其转换为 Typescript，但我失败了！！

```
export class Xarray implements Array {
} 
```

编译器要求我定义所有`Array`接口属性。我知道如果我需要这个，我必须在 TS`Xarray.prototype = new Array();`中扩展。`Array`

如何在 TS 中扩展 JS 原生对象？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-09-14T16:38:33.847

从 TypeScript 1.6 开始，您可以扩展 Array 类型，请参阅[What's new in TypeScript](https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#extending-expressions)

这是一个例子：

```
class MyNewArray<T> extends Array<T> {
    getFirst() {
        return this[0];
    }
}

var myArray = new MyNewArray<string>();
myArray.push("First Element");
console.log(myArray.getFirst()); // "First Element" 
```

如果你要发射到 ES5 或更低版本，请使用以下代码：

```
class MyNewArray<T> extends Array<T> {
    constructor(...items: T[]) {
        super(...items);
        Object.setPrototypeOf(this, MyNewArray.prototype);
    }

    getFirst() {
        return this[0];
    }
} 
```

[在这里](https://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-extending-built-ins-like-error-array-and-map-work)阅读更多关于为什么这是必要的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-22T08:05:47.970

我认为没有办法继承现有的接口，如 Array，

```
export class Xarray implements Array {

} 
```

您应该创建一个函数并使用其原型继承它。Typescript 也将接受它，这类似于 javascript。

```
function Xarray(...args: any[]): void; // required in TS 0.9.5
function Xarray()
{
    Array.apply(this, arguments);
   // some stuff for insert, add and remove notification
}
Xarray.prototype = new Array(); 
```

**更新：**这个讨论得很好，并在[jqfaq.com](http://jqfaq.com/how-to-extend-native-javascipt-object-in-typescript/)上提供了最好的解决方案。

```
//a dummy class it to inherite array.
class XArray {
    constructor() {
        Array.apply(this, arguments);   
        return new Array();
    }
    // we need this, or TS will show an error,
    //XArray["prototype"] = new Array(); will replace with native js arrray function
    pop(): any { return "" };
    push(val): number { return 0; };
    length: number;
}
//Adding Arrray to XArray prototype chain.
XArray["prototype"] = new Array();

//our Class
class YArray extends XArray {
///Some stuff
}

var arr = new YArray();
//we can use the array prop here.
arr.push("one");
arr.push("two");

document.writeln("First Elemet in array : " + arr[0]);
document.writeln("</br>Array Lenght : " + arr.length); 
```

希望，这可能对你有帮助！！！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-22T07:38:49.457

是的，可以在 TS 中扩展本机 JS 对象，但是扩展内置类型（包含在 lib.d.ts 中的类型）如 Array 存在问题。阅读这篇文章以了解解决方法： http: [//typescript.codeplex.com/workitem/4](http://typescript.codeplex.com/workitem/4)

因此，可以通过以下方式定义在稍后阶段扩展本机类型对象的类型接口：

```
/// <reference path="lib.d.ts"/>
interface Array {
    sort: (input: Array) => Array;
} 
```

使用一个具体的例子，你可以对数组中的一些元素进行排序，这些元素在接口中定义了一个排序函数，然后在一个对象上实现它。

```
class Math implements Array {
    sort : (x: Array) => Array {
          // sorting the array
    }
}
var x = new Math();
x.sort([2,3,32,3]); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-26T13:39:44.840

在研究这个时，我看到了 Ben Nadel 的一篇关于[扩展 JavaScript 数组同时保持原生括号表示功能](http://www.bennadel.com/blog/2292-extending-javascript-arrays-while-keeping-native-bracket-notation-functionality.htm)的优秀文章。在对如何成功地将其转换为 TypeScript 产生了一些初步的困惑之后，我创建了一个可以被子类化的完全工作的 Collection 类。

它可以做 Array 可以做的所有事情，包括括号索引、在循环结构中使用（for、while、forEach）、映射等。

**主要实现点是**

1.  在构造函数中创建一个数组，将方法添加到数组并从构造函数返回
2.  复制 Array 方法的虚拟声明以传递`implements Array`位

**使用示例：**

```
 var foo = new Foo({id : 1})
  var c = new Collection();

  c.add(foo)
  c.length === 1;    // => true

  foo === c[0];      // => true
  foo === c.find(1); // => true 
```

我把它[作为一个 gist 提供](https://gist.github.com/fatso83/3773d4cb5f39128b3732)，完成了测试和一个子类的示例实现，但我在这里展示了完整的源代码：

```
/*
 * Utility "class" extending Array with lookup functions
 *
 * Typescript conversion of Ben Nadel's Collection class.
 * https://gist.github.com/fatso83/3773d4cb5f39128b3732
 *
 * @author Carl-Erik Kopseng
 * @author Ben Nadel (javascript original)
 */

export interface Identifiable {
    getId : () => any;
}

export class Collection<T extends Identifiable> implements Array<T> {

    constructor(...initialItems:any[]) {
        var collection = Object.create(Array.prototype);

        Collection.init(collection, initialItems, Collection.prototype);

        return collection;
    }

    static init(collection, initialItems:any[], prototype) {
        Object.getOwnPropertyNames(prototype)
            .forEach((prop) => {
                if (prop === 'constructor') return;

                Object.defineProperty(collection, prop, { value: prototype[prop] })
            });

        // If we don't redefine the property, the length property is suddenly enumerable!
        // Failing to do this, this would fail: Object.keys([]) === Object.keys(new Collection() )
        Object.defineProperty(collection, 'length', {
            value: collection.length,
            writable: true,
            enumerable: false
        });

        var itemsToPush = initialItems;
        if (Array.isArray(initialItems[0]) && initialItems.length === 1) {
            itemsToPush = initialItems[0];
        }
        Array.prototype.push.apply(collection, itemsToPush);

        return collection;
    }

    // Find an element by checking each element's getId() method
    public find(id:any):T;

    // Find an element using a lookup function that
    // returns true when given the right element
    public find(lookupFn:(e:T) => boolean):T ;

    find(x:any) {
        var res, comparitor;

        if (typeof x === 'function') {
            comparitor = x;
        } else {
            comparitor = (e) => {
                return e.getId() === x;
            }
        }

        res = [].filter.call(this, comparitor);

        if (res.length) return res[0];
        else return null;
    }

    // Add an element
    add(value:T);

    // Adds all ements in the array (flattens it)
    add(arr:T[]);

    add(arr:Collection<T>);

    add(value) {

        // Check to see if the item is an array or a subtype thereof
        if (value instanceof Array) {

            // Add each sub-item using default push() method.
            Array.prototype.push.apply(this, value);

        } else {

            // Use the default push() method.
            Array.prototype.push.call(this, value);

        }

        // Return this object reference for method chaining.
        return this;

    }

    remove(elem:T):boolean;

    remove(lookupFn:(e:T) => boolean):boolean ;

    remove(x:any):boolean {
        return !!this._remove(x);
    }

    /**
     * @return the removed element if found, else null
     */
    _remove(x:any):T {
        var arr = this;
        var index = -1;

        if (typeof x === 'function') {

            for (var i = 0, len = arr.length; i < len; i++) {
                if (x(this[i])) {
                    index = i;
                    break;
                }
            }

        } else {
            index = arr.indexOf(x);
        }

        if (index === -1) {
            return null;
        }
        else {
            var res = arr.splice(index, 1);
            return res.length ? res[0] : null;
        }
    }

    // dummy declarations
    // "massaged" the Array interface definitions in lib.d.ts to fit here
    toString:()=> string;
    toLocaleString:()=> string;
    concat:<U extends T[]>(...items:U[])=> T[];
    join:(separator?:string)=> string;
    pop:()=> T;
    push:(...items:T[])=> number;
    reverse:()=> T[];
    shift:()=> T;
    slice:(start?:number, end?:number)=> T[];
    sort:(compareFn?:(a:T, b:T) => number)=> T[];
    splice:(start?:number, deleteCount?:number, ...items:T[])=> T[];
    unshift:(...items:T[])=> number;
    indexOf:(searchElement:T, fromIndex?:number)=> number;
    lastIndexOf:(searchElement:T, fromIndex?:number)=> number;
    every:(callbackfn:(value:T, index:number, array:T[]) => boolean, thisArg?:any)=> boolean;
    some:(callbackfn:(value:T, index:number, array:T[]) => boolean, thisArg?:any)=> boolean;
    forEach:(callbackfn:(value:T, index:number, array:T[]) => void, thisArg?:any)=> void;
    map:<U>(callbackfn:(value:T, index:number, array:T[]) => U, thisArg?:any)=> U[];
    filter:(callbackfn:(value:T, index:number, array:T[]) => boolean, thisArg?:any)=> T[];
    reduce:<U>(callbackfn:(previousValue:U, currentValue:T, currentIndex:number, array:T[]) => U, initialValue:U)=> U;
    reduceRight:<U>(callbackfn:(previousValue:U, currentValue:T, currentIndex:number, array:T[]) => U, initialValue:U)=> U;
    length:number;
[n: number]: T;
} 
```

当然，不需要 , 和 方法上的位`Identifiable`，`find`但`remove`我仍然提供它们，因为一个完整的示例比没有任何自身方法的准系统集合更有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-17T14:01:42.600

返回对象的构造函数隐式替换 的`this`调用者的值`super()`。生成的构造函数代码必须捕获`super()`返回的任何内容并将其替换为`this`.

内置类使用 ES6`new.target`进行修复，但 ES5 代码无法确保 new.target 具有调用构造函数的值。

这就是为什么你的额外方法消失了——你的对象有错误的原型。

您需要做的就是在调用`super()`.

```
export class RoleSet extends Array {
  constructor() {
    super();
    Object.setPrototypeOf(this, RoleSet.prototype);
  }
  private containsRoleset(roleset:RoleSet){
      if (this.length < roleset.length) return false;
      for (var i = 0; i < roleset.length; i++) {
        if (this.indexOf(roleset[i]) === -1) return false;
      }
      return true;
  }
  public contains(item: string | RoleSet): boolean {
    if (item) {
      return typeof item === "string" ? 
        this.indexOf(item) !== -1 : 
        this.containsRoleset(item);
    } else {
      return true;
    }
  }
} 
```

请注意，这个诅咒将折磨你的孩子和你孩子的孩子，直到代码结束；您必须在每一代继承链中进行修复。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T00:20:39.933

如果您已经有一个有效的`Xarray`实现，我看不出在 typescript 中重新创建它的意义，它最终将编译回 JavaScript。

但我确实看到了能够`Xarray`在 TypeScript 中使用的意义。

为了实现这一点，您只需为您的`Xarray`. 你甚至不需要一个具体的接口实现，因为你现有的 js 实现将作为一个实现。

```
interface Xarray{
    apply(...arguments : any[]) : void;
    //some stuff for insert, add and ...
}
declare var Xarray: {
   new (...items: any[]): Xarray;
   (...items: any[]): Xarray;
   prototype: Array; // This should expose all the Array stuff from ECMAScript 
} 
```

完成此操作后，应该能够通过声明的变量使用您自定义的类型，而无需在 TypeScript 中实际实现它。

```
var xArr = new Xarray();
xArr.apply("blah", "hehe", "LOL"); 
```

您可能会在此处查找参考以查看他们如何键入`ECMAScript Array API`： [http ://typescript.codeplex.com/SourceControl/changeset/view/2bee84410e02#bin/lib.d.ts](http://typescript.codeplex.com/SourceControl/changeset/view/2bee84410e02#bin/lib.d.ts)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T16:21:10.407

在您的情况下，一个不错的选择是使用这种模式：

```
function XArray(array) {
  array = array || [];

  //add a new method
  array.second = function second() {
    return array[1];
  };

  //overwrite an existing method with a super type pattern
  var _push = array.push;
  array.push = function push() {
    _push.apply(array, arguments);
    console.log("pushed: ", arguments);
  };

  //The important line.
  return array
} 
```

然后你可以这样做：

```
var list = XArray([3, 4]);
list.second()   ; => 4

list[1] = 5;
list.second()   ; => 5 
```

但请注意：

```
list.constructor  ; => Array and not XArray 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-18T23:31:21.273

是的，您可以增加 Builtin 类型并以不需要 XArray 的所有用具的方式进行操作，如其他答案中所述，并且更接近您在 javascript 中的操作方式。

Typescript 允许多种方式来做到这一点，但对于像 Array 和 Number 这样的内置类型，您需要使用“合并”并声明全局命名空间来增加类型，请参阅[文档](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation "打字稿文档")

所以对于 Array 我们可以添加一个可选的元数据对象和一个 get first 成员

```
declare global {
  interface Array<T> {
    meta?: any|null ,
    getFirst(): T
  }
}

if(!Array.prototype.meta )
{
  Array.prototype.meta = null
}
if(!Array.prototype.getFirst )
{
  Array.prototype.getFirst = function() {
    return this[0];
  }
} 
```

我们可以这样使用：

```
let myarray: number[] = [ 1,2,3 ]
myarray.meta = { desc: "first three ints" }
let first: number = myarray.getFirst() 
```

Number 也是如此，我想添加一个不受余数限制的模函数 %

```
declare global {
  interface Number {
    mod(n:number): number
  }
}

if(!Number.prototype.mod )
{
  Number.prototype.mod = function (n: number) {
          return ((this % n) + n) % n;
  }
} 
```

我们可以像这样使用它：

```
let foo = 9;
console.log("-9.mod(5) is "+ foo.mod(5)) 
```

对于我们可能想要添加 API 的函数，即使其表现得像一个函数和一个对象，我们可以使用[混合类型（参见文档）](https://www.typescriptlang.org/docs/handbook/interfaces.html#hybrid-types)

```
// augment a (number) => string  function with an API
interface Counter {
    (start: number): string;
    interval: number;
    reset(): void;
}

//helper function to get my augmented counter function with preset values
function getCounter(): Counter {
    let counter = <Counter>function (start: number) { };
    counter.interval = 123;
    counter.reset = function () { };
    return counter;
} 
```

像这样使用它：-

```
let c = getCounter();
c(10);
c.reset();
c.interval = 5.0; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-16T08:40:47.270

为了克服原生 Array 类的扩展问题，我利用了装饰器。

```
function extendArray(constructor: Function) {
    Object.getOwnPropertyNames(constructor.prototype)
        .filter(name => name !== 'constructor')
.forEach(name => {
    const attributes = Object.getOwnPropertyDescriptor(constructor.prototype, name);
    Object.defineProperty(Array.prototype, name, attributes);
  });
}

@extendArray
export class Collection<T> extends Array<T> {
  constructor(...args: T[]) {
    super(...args);
  }
  // my appended methods
}
```

顺便说一句，如果使用装饰器工厂，这个装饰器可以变得更通用（对于其他本地类）。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-05-14T20:08:45.797

不知道对此有多不满，但例如我需要创建一个 BulletTypes 数组，以便我可以循环浏览它们。我所做的是以下内容：

```
interface BulletTypesArray extends Array<BulletType> {
    DefaultBullet?: Bullet; 
}

var BulletTypes: BulletTypesArray = [ GreenBullet, RedBullet ];
BulletTypes.DefaultBullet = GreenBullet; 
```

显然你也可以制作一个通用接口，比如`interface SuperArray<T> extends Array<T>`.

# php - PHP - 安装 Composer - 无法打开流：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机

> ID：14000646
> 
> 赞同：8
> 
> 时间：2012-12-22T06:34:35.937
> 
> 标签：php, composer-php

我正在尝试使用[Composer Dependency Manager](http://getcomposer.org/) for PHP，但在使用 Composer-Setup.exe（Win32 安装程序）时遇到以下问题。

```
Download failed: php_network_getaddresses: getaddrinfo failed: No such host is known. 
failed to open stream: php_network_getaddresses: getaddrinfo failed: No such host is known. 
Download failed: php_network_getaddresses: getaddrinfo failed: No such host is known. 
failed to open stream: php_network_getaddresses: getaddrinfo failed: No such host is known. 
Download failed: php_network_getaddresses: getaddrinfo failed: No such host is known. 
failed to open stream: php_network_getaddresses: getaddrinfo failed: No such host is known. 
The download failed repeatedly, aborting.` 
```

对于该错误，我遵循了其他几个 stackoverflow 线程的建议，并且检查了其他一些论坛。在我的 php.ini 中，我确保我有以下选项：

```
allow_url_fopen = On
allow_url_include = On
extension=php_openssl.dll 
```

我还尝试了[手动安装](http://getcomposer.org/doc/00-intro.md#using-the-installer)Composer，它要求您执行：

```
php -r "eval('?>'.file_get_contents('https://getcomposer.org/installer'));" 
```

我从中得到了同样的错误。但是，如果我删除“/installer”，它可以检索源。我已验证“/installer” URL 有效。什么配置可能导致这种行为？我在 32 位 Windows 7 上运行 PHP 5.4。

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T23:52:04.987

这个问题实际上是代理变量。在控制台获取更改时，PHP 需要重新启动系统才能获取更改。因此，取消设置环境变量并重新启动允许 Composer 安装程序检索所需的文件。感谢 Seldaek 建议您检查代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-12T09:52:42.890

[![以下是错误，如果您的代理设置在那里，通常会发生](../Images/1fbdaf43bd13c35d64f6d459cdcb844d.png)](https://i.stack.imgur.com/ReqGa.png)

**解决方案 1**

*   确保您有连接尝试 ping www.google.com

**解决方案 2**

```
- Remove Proxy settings ,they could be ones causing it,if outside a corporate network 
```

**解决方案 3**

*   如果在公司网络上，请添加公司代理设置

    *   设置 http_proxy= [http://your_proxy:your_port](http://your_proxy:your_port)
    *   设置 http_proxy= [http://username:password@your_proxy:your_port](http://username:password@your_proxy:your_port)
    *   设置 https_proxy= [https://your_proxy:your_port](https://your_proxy:your_port)
    *   设置 https_proxy= [https://username:password@your_proxy:your_port](https://username:password@your_proxy:your_port)

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-10-31T15:14:40.287

```
mysqli_connect('root','', 'localhost', 'people'); 
```

您将 root 作为主机名传入。

试试这个

```
mysqli_connect('localhost','root', '', 'people'); 
```

这将使用用户名 root 密码 "" 和默认数据库人员连接到 localhost。

用 127.0.0.1 更改 localhost 可能更好

# ruby-on-rails-3 - 即使在选择 jquery datepicker 之后，Rails 客户端验证也没有通过 true

> ID：14000649
> 
> 赞同：2
> 
> 时间：2012-12-22T06:34:56.573
> 
> 标签：ruby-on-rails-3, jquery-ui, jquery-ui-datepicker, client-side-validation

在我的应用程序中，我实现了 jquery datepicker 以及 rails 客户端验证。但即使在我选择日期之后，我也会收到“不能为空白”的错误，并且表单没有被提交。选择日期后如何通过验证。

请在下面找到我的 datepicker 代码。

```
jQuery(document).ready(function($){  
$('#project_start_date').datepicker({ dateFormat: "yy-mm-dd",onSelect: function(selected) {

$("#project_end_date").datepicker("option","minDate", selected)

}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T21:29:03.560

如[Client Side Validations wiki](https://github.com/bcardarella/client_side_validations/wiki/jQuery-Plugins "客户端验证维基")中所述，您可以添加此选项以使 jQueryUI DatePicker 与 Client Side Validations 兼容：

```
onClose: function(dateText, inst) { $(inst.input).change().focusout(); } 
```

在您的示例中：

```
$('#project_start_date').datepicker({
  dateFormat: "yy-mm-dd",
  onSelect: function(selected) { $("#project_end_date").datepicker("option","minDate", selected) },
  onClose: function(dateText, inst) { $(inst.input).change().focusout(); }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:07:35.870

主要问题是当焦点消失时触发验证......作为一种解决方法，您可以在关闭数据选择器后手动触发焦点事件

```
$('#project_start_date').datepicker({ dateFormat: "yy-mm-dd",onSelect: function(selected) {

$("#project_end_date").datepicker("option","minDate", selected)

}, onClose: function(){
      //workaround to trigger javascript validation
      $(this).focusout();
}
}); 
```

# javascript - 如何在几个源文件中使用 jQuery 的 $ 别名

> ID：14000653
> 
> 赞同：0
> 
> 时间：2012-12-22T06:35:31.327
> 
> 标签：javascript, jquery, scope

我在添加到 Wordpress 站点的一些自定义文件中使用 jQuery，并使用它来允许我使用“$”快捷方式：

```
jQuery(function ($) {
  $(selector).bla();
  // etc
} 
```

但是，如果我想将代码拆分为多个文件，则每个文件中都需要存在此构造，然后不能从另一个文件调用其中的函数。这个怎么做？我可以以某种方式将某些函数声明为全局函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:03:24.437

你可以使用这样的东西：

```
var myFunc = function($) {
    function toExport() {
            alert($);
    }

    return toExport;
}(jQuery);​ 
```

只需返回您需要的资源（它可以是单个函数、对象或您实际想要的任何东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:59:19.647

您可能希望查看使用[requirejs](http://requirejs.org/)定义模块，然后将模块作为依赖项传递。您还可以使用它将 jQuery 定义为依赖项，以便可以使用您想要的任何变量名称在本地范围内限定它。

```
require(['jquery','somemodule','someothermodule'], function($,module1,module2) {
    $(function() {
        var mod1 = new module1();
        var mod2 = new module2();
        ...
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T06:49:55.393

jQueryUI 实际上是用类似的方式编写的：

```
(function( $, undefined ) {
    ...
}( jQuery ) ); 
```

这样，`$`保证是`jQuery`函数的同义词，并且关键字`undefined`将被定义为具有未定义值的参数。该`undefined`部分实际上修复了一些浏览器的一些挑剔问题，因为它们并非都以相同的方式处理 undefined 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T06:56:30.360

您始终可以在全局范围内**声明构造***之外*的函数。`jQuery(function() {...});`

您只是无法在 DOM 准备好之前访问它，这意味着如果它们访问 DOM ，您**将无法在**外部执行这些功能。`jQuery(function() {...});`

* * *

您还可以始终通过为属性分配值来创建全局变量`window`：

```
window.theanswer = 42; 
```

向全局命名空间添加许多值并不是一个好的做法，并且存在其他技术来创建模块化 JavaScript 来解决这个问题。[请参阅 tvanfosson 的回答](https://stackoverflow.com/a/14000774/218196)。

# c++ - 今天的 C++ 多线程与 C++ 11 的流畅情况 - 书籍建议

> ID：14000655
> 
> 赞同：5
> 
> 时间：2012-12-22T06:35:51.777
> 
> 标签：c++, concurrency, c++11, pthreads, boost-thread

经过大量搜索和一些尝试和失败，我总结了一些事情，结果如下：

*   C++ 11 线程模型它还没有准备好用于 GCC（基于 g++ 4.7）或 Clang（来自最新的 svn rev.）-（那里的 2 个最新的编译器）-Clang 甚至没有完整的 libcxx库，它仅适用于 Mac OS。
*   C++ 11 下的标准线程库它真的很基础，例如互斥锁不提供高级功能，例如“基于范围的锁（适用于 RAII）” `boost::thread`。
*   `boost::thread`可以被认为是 Posix 线程库的包装器或演变，因此实际上线程库没有真正的选择，它们并没有那么不同，它们更像是前一个的演变.

现在我在问，如果是这种情况，我应该从哪里开始？

例如[这本书](http://www.manning.com/williams/)，显然是面向 C++11 标准线程库的，它为您提供了基础知识，但您可能永远不会在现实生活中使用它，因为 C++11 线程支持仍然不是很好。最流行的编译器，它在功能方面真的很差。

我认为公平地说，从`boost::thread`它开始是当今世界的一个不错的选择——如果我错了请纠正我——它也是对 C++ 03 的多平台支持和遗留支持的唯一真正选择：我的问题是我真的找不到一本关于并发和多线程的书或参考书看起来恰到好处，或者它对于`boost:thread`.

你能推荐一本从并发和开始的书`boost::thread`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:45:32.640

如果您正在寻找提升线程的入门者，请查看此[问题](https://stackoverflow.com/questions/415994/boost-thread-tutorials)。我个人是从[这里](http://antonym.org/2009/05/threading-with-boost---part-i-creating-threads.html)开始的。然后当然还有[boost 文档](http://www.boost.org/doc/libs/1_52_0/doc/html/thread.html)。

# javascript - Javascript变量在我覆盖后返回原始值

> ID：14000660
> 
> 赞同：0
> 
> 时间：2012-12-22T06:36:24.837
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScript 回调函数中设置局部变量](https://stackoverflow.com/questions/9368597/setting-local-variable-in-a-javascript-callback-function)

我很难调试我的脚本，因为我不知道我的变量中发生了什么。

我尝试做'console.log'来跟踪发生了什么，但令人惊讶的是，我不知道为什么会发生这种情况..

这是这种情况：

我有这段 javascript 代码：

```
tmplReplaceContent : function(json, tmpl, target){ 
    var template = tmpl;
    var regex = new RegExp("some regex");
    ...
    if (!regex.test(tmpl)) {
        $.get(msi.vars.api_url + tmpl + '.tmpl', function(tmplOut){
            console.log("regex check passed!");
            template = tmplOut;
            console.log(template);
        });
    } else {
      console.log("failed regex check");
    }

    console.log(template);
... 
```

首先`console.log(template)`产生我想要的结果

但第二个又回到了原来的值：

例如

```
tmpl = somevar; // that returns true on if statement
template = tmpl;

console.log(template) // 1st. will return value of somevar 
```

您认为补救措施是什么，为什么我的代码会失败？

# qt - Qt - 使用信号/插槽关闭子菜单

> ID：14000669
> 
> 赞同：0
> 
> 时间：2012-12-22T06:38:51.057
> 
> 标签：qt, signals-slots, qmainwindow

我有一个 Qt 主窗口，我在其中调用另一个窗口，实际上是一种子菜单，其中包含第一个窗口的参数；这是这个主窗口的一部分：

```
void Ui_MainWindow::createSignals()
{ 
  connect(actionDisk_galaxy, SIGNAL(triggered()), this,  SLOT(ICMenu()));
}

void Ui_MainWindow::ICMenu()
{
qmenu = new QMainWindow;
DiskMenu = new Ui_DiskGalMenu;
DiskMenu->setupUi(qmenu,this);
setInitialDiskMenuPosition(qmenu, this);
qmenu->show();
} 
```

如您所见，我调用另一个QMainwindow（“ `qmenu`”）；这是这个新窗口的代码（其类型是“ `Ui_DiskGalMenu`”）：

```
void Ui_DiskGalMenu::createMenuSignals()
{
  connect(pushButton_4, SIGNAL(clicked()), this, SLOT(closeMenu()));       
}

void Ui_DiskGalMenu::closeMenu()
{  
close(true);
} 
```

在这个子菜单中设置参数后，我想用一个按钮（这里是“ `pushButton_4`”）关闭它。

我的问题是当我点击“pushButton_4”时，这个窗口没有关闭。

我也尝试重新实现`closeEvent`但没有成功。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:45:05.353

这个函数调用看起来像一个错误：

```
close(true); 
```

QWidget::close() 不带任何参数。所以你在这里做的是调用 C 库的 close(int) 函数（用于关闭文件描述符。）`bool`被隐式转换为`int`，所以你最终得到这个调用：

```
::close(1); 
```

这是（可能）关闭`stderr`。

如果您将上述内容更改为：

```
this->close(true); 
```

你应该得到一个编译错误，因为不存在这样的函数。所以正确的调用应该是：

```
this->close(); 
```

但是，QWidget::close() 已经是一个插槽，因此您根本不需要 Ui_DiskGalMenu::closeMenu() 函数。您只需要连接到 close() 插槽即可：

```
connect(actionDisk_galaxy, SIGNAL(triggered()), this, SLOT(close())); 
```

如果您需要在窗口关闭时做更多的事情，您可以覆盖 closeEvent() ，它将在窗口关闭之前调用。

# java - 从后置摄像头切换到前置摄像头出现空指针异常？

> ID：14000673
> 
> 赞同：0
> 
> 时间：2012-12-22T06:39:58.807
> 
> 标签：java, android, android-manifest

现在我正在开发相机应用程序。当我首先启动我的应用程序时，它会显示后置摄像头，当我单击该按钮时我有一个按钮，它将转向前置摄像头。那时我得到错误空指针异常。但是当我运行前置摄像头时单独它完美地显示前置摄像头。

```
This is my java code.

 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
       // getAspectRatio();

        getWindow().setFormat(PixelFormat.UNKNOWN);
        surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

 Button buttonTakePicture = (Button)findViewById(R.id.takepicture);
        buttonTakePicture.setOnClickListener(new Button.OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                camera.takePicture(myShutterCallback, myPictureCallback_RAW, myPictureCallback_JPG);
            }});

        front=(Button)findViewById(R.id.front);
        front.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                {
                    Intent font_intent=new Intent(AndroidCamera.this,MainActivity.class);
                    startActivity(font_intent);
                }

            }
        });

ShutterCallback myShutterCallback = new ShutterCallback(){

            @Override
            public void onShutter() {
                // TODO Auto-generated method stub

            }};

    PictureCallback myPictureCallback_RAW = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub

        }};

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

             @Override

             public void onPictureTaken(byte[] arg0, Camera arg1) 
             {
                // TODO Auto-generated method stub

                bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length); 

                Bitmap mBitmap2 = BitmapFactory.decodeResource(getResources(),currenteffect);
                Bitmap  newgerresized=getResizedBitmap(mBitmap2, bitmapPicture.getWidth(), bitmapPicture.getHeight());

                Bitmap map = applyOverlayEffect(newgerresized, bitmapPicture);

                String fieName = UUID.randomUUID().toString();   
                SaveImage(fieName, 100,map);
              camera.startPreview();

             }

@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {
        // TODO Auto-generated method stub
        if(previewing)
        {
            camera.stopPreview();
            previewing = false;
        }

        if (camera != null){
            try 
            {
                camera.setPreviewDisplay(surfaceHolder);
                camera.startPreview();
                previewing = true;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

        @Override
        public void surfaceCreated(SurfaceHolder holder) 
        {

            try{
            // TODO Auto-generated method stub

             camera = Camera.open();
             mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
             mgr.setStreamMute(AudioManager.STREAM_SYSTEM, true);
            }catch (Exception e) {

                e.printStackTrace();

            }finally
            {

            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) 
        {
            // TODO Auto-generated method stub
            camera.stopPreview();
            camera.release();
            camera = null;
            previewing = false;
        }

for front this is my java code

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        int currentapiVersion = android.os.Build.VERSION.SDK_INT;
        if (currentapiVersion > android.os.Build.VERSION_CODES.FROYO){
             id=findFrontFacingCamera(); 
             Log.d("TestLedActivity","L'id trovato e': "+id);
             camera = Camera.open(id+1); 
        } else{
            Log.d("TestLedActivity","La versione e' froyo");
            camera = Camera.open();
        }

        preview=(SurfaceView)findViewById(R.id.surfaceView1);
                // TODO Auto-generated method stub
                previewHolder=preview.getHolder();
                previewHolder.addCallback(surfaceCallback);
                previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

                i=(ImageView)findViewById(R.id.imageView1);
                currenteffect=R.drawable.water;
                mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.water);
                newgerresized=getResizedBitmap(mBitmap, width,height);
                bi=Bitmap.createBitmap(width, height,  Bitmap.Config.ARGB_8888);
                paint = new Paint();
                paint.setAlpha(100);
                canvas=new Canvas(bi);
                canvas.setBitmap(bi);
                canvas.drawBitmap(newgerresized, 0, 0, paint); 
                i.setImageBitmap(bi);

      }

      public static Bitmap getResizedBitmap(Bitmap bm, int newWidth, int newHeight) 
        {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bm.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] byteArray = stream.toByteArray();
        BitmapFactory.decodeStream(new ByteArrayInputStream(byteArray), null, options);

        int srcWidth = bm.getWidth();
        int srcHeight = bm.getHeight();

        int desiredWidth = newWidth;
        int desiredHeight = newHeight;

        int inSampleSize = 1;
        while(srcWidth / 2 > desiredWidth)
        {
            srcWidth /= 2;
            srcHeight /= 2;
            inSampleSize *= 2;
        }

        float desiredWidthScale = (float) desiredWidth / srcWidth;
        float desiredHeightScale = (float) desiredHeight / srcHeight;

        // Decode with inSampleSize
        options.inJustDecodeBounds = false;
        options.inDither = false;
        options.inSampleSize = inSampleSize;
        options.inScaled = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        Bitmap sampledSrcBitmap = BitmapFactory.decodeStream(new ByteArrayInputStream(byteArray), null, options);

        Matrix matrix = new Matrix();
        matrix.postScale(desiredWidthScale, desiredHeightScale);

        matrix.postRotate(Orientation);
        Bitmap bmp = Bitmap.createBitmap(sampledSrcBitmap, 0, 0, sampledSrcBitmap.getWidth(), sampledSrcBitmap.getHeight(), matrix, true);
   return bmp;

}

      @Override  
      public void onResume() {
        super.onResume();   

      }

      @Override
      public void onPause() {
        if (inPreview) {
          camera.stopPreview();
        }

        camera.release();
        camera=null;
        inPreview=false;

        super.onPause();
      }

      private int findFrontFacingCamera() {
         int idCamera=0;
            // Look for front-facing camera, using the Gingerbread API.
            // Java reflection is used for backwards compatibility with pre-Gingerbread APIs.
            try {
                Class<?> cameraClass = Class.forName("android.hardware.Camera");
                Object cameraInfo = null;
                Field field = null;
                int cameraCount = 0;
                Method getNumberOfCamerasMethod = cameraClass.getMethod( "getNumberOfCameras" );
                if ( getNumberOfCamerasMethod != null ) {
                    cameraCount = (Integer) getNumberOfCamerasMethod.invoke( null, (Object[]) null );
                }
                Class<?> cameraInfoClass = Class.forName("android.hardware.Camera$CameraInfo");
                if ( cameraInfoClass != null ) {
                    cameraInfo = cameraInfoClass.newInstance();
                }
                if ( cameraInfo != null ) {
                    field = cameraInfo.getClass().getField( "facing" );
                }
                Method getCameraInfoMethod = cameraClass.getMethod( "getCameraInfo", Integer.TYPE, cameraInfoClass );
                if ( getCameraInfoMethod != null && cameraInfoClass != null && field != null ) {
                    for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
                        getCameraInfoMethod.invoke( null, camIdx, cameraInfo );
                        int facing = field.getInt( cameraInfo );
                        if ( facing == 1 ) { // Camera.CameraInfo.CAMERA_FACING_FRONT
                            try {
                                Method cameraOpenMethod = cameraClass.getMethod( "open", Integer.TYPE );
                                if ( cameraOpenMethod != null ) {
                                    Log.d("TestLedActivity","Id frontale trovato: "+camIdx);
                                    //camera = (Camera) cameraOpenMethod.invoke( null, camIdx );
                                    idCamera=camIdx;
                                }
                            } catch (RuntimeException e) {
                                Log.e("TestLedActivity", "Camera failed to open: " + e.getLocalizedMessage());
                            }
                        }
                    }
                }
            }
            // Ignore the bevy of checked exceptions the Java Reflection API throws - if it fails, who cares.
            catch ( ClassNotFoundException e        ) {Log.e("TestLedActivity", "ClassNotFoundException" + e.getLocalizedMessage());}
            catch ( NoSuchMethodException e         ) {Log.e("TestLedActivity", "NoSuchMethodException" + e.getLocalizedMessage());}
            catch ( NoSuchFieldException e          ) {Log.e("TestLedActivity", "NoSuchFieldException" + e.getLocalizedMessage());}
            catch ( IllegalAccessException e        ) {Log.e("TestLedActivity", "IllegalAccessException" + e.getLocalizedMessage());}
            catch ( InvocationTargetException e     ) {Log.e("TestLedActivity", "InvocationTargetException" + e.getLocalizedMessage());}
            catch ( InstantiationException e        ) {Log.e("TestLedActivity", "InstantiationException" + e.getLocalizedMessage());}
            catch ( SecurityException e             ) {Log.e("TestLedActivity", "SecurityException" + e.getLocalizedMessage());}

            if ( camera == null ) {
                Log.d("TestLedActivity","Devo aprire la camera dietro");
                // Try using the pre-Gingerbread APIs to open the camera.
                idCamera=0;
            }

            return idCamera;
        }

      private Camera.Size getBestPreviewSize(int width, int height,
                                             Camera.Parameters parameters) {
        Camera.Size result=null;

        for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
          if (size.width<=width && size.height<=height) {
            if (result==null) {
              result=size;
            }
            else {
              int resultArea=result.width*result.height;
              int newArea=size.width*size.height;

              if (newArea>resultArea) {
                result=size;
              }
            }
          }
        }

        return(result);
      }

      SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
        public void surfaceCreated(SurfaceHolder holder) {
          try {
            camera.setPreviewDisplay(previewHolder);
          }
          catch (Throwable t) {
            Log.e("PreviewDemo-surfaceCallback",
                  "Exception in setPreviewDisplay()", t);
            Toast
              .makeText(getApplicationContext(), t.getMessage(), Toast.LENGTH_LONG)
              .show();
          }
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder,
                                   int format, int width,
                                   int height) {
          Camera.Parameters parameters=camera.getParameters();
          Camera.Size size=getBestPreviewSize(width, height,
                                              parameters);

          if (size!=null) {
            //parameters.set("camera-id", 0);
            parameters.setPreviewSize(size.width, size.height);      
            camera.setParameters(parameters);
            camera.startPreview();
            inPreview=true;
          }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
          // no-op
        }
      };
    }

please help me 
```

# android - 解析数组内的json数据数组

> ID：14000676
> 
> 赞同：1
> 
> 时间：2012-12-22T06:40:19.633
> 
> 标签：android, json, web-services, parsing

```
 {
   "TABLE":[
      {
         "ROW":[
            {
               "COL":[
                  {
                     "DATA":"< OutBoundSMS PhoneId='3' PhoneNo='1111111111' MessageText='OutBound SMS Application Test' />"
                  }
               ]
            }
         ]
      }
   ]
} 
```

如何解析这种格式的json数组？
解析时出现此错误：“无法转换为 json 对象”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T06:48:07.907

将当前 Json 字符串解析为：

```
JSONObject json=new JSONObject("Your Json String");
JSONArray jsonarray = json.getJSONArray("TABLE");

for(int i=0;i<jsonarray.length();i++){

  JSONObject jsonnew=jsonarray.getJSONObject(i);
  JSONArray jsonarrayROW = jsonnew.getJSONArray("ROW");

   for(int j=0;j<jsonarrayROW.length();j++){
     JSONObject jsonnewtwo=jsonarrayROW.getJSONObject(j);
     JSONArray jsonarrayCOL = jsonnewtwo.getJSONArray("COL");

      for(int k=0;k<jsonarrayCOL.length();k++){

        JSONObject jsonnewthree=jsonarrayCOL.getJSONObject(k);

        //get DATA here

           String str_data=jsonnewthree.getString("DATA");
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:42:43.360

看这里

```
String jsonStr = '{"menu": {' + 
        '"id": "file",' + 
        '"value": "File",' + 
        '"popup": {' + 
          '"menuitem": [' + 
            '{"value": "New", "onclick": "CreateNewDoc()"},' + 
            '{"value": "Open", "onclick": "OpenDoc()"},' + 
            '{"value": "Close", "onclick": "CloseDoc()"}' + 
          ']' + 
        '}' + 
      '}}'; 
```

在这里看到很好的例子[JSON PARSING](http://www.jondev.net/articles/Android_JSON_Parser_Example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-21T05:17:35.297

**它的工作解析 json 数据数组在数组中**

```
http://maps.googleapis.com/maps/api/directions/json?origin=28.4759618,77.3140897&destination=28.3936072,77.3172154&sensor=false&mode=driving&alternatives=true

    {
       "geocoded_waypoints" : [
          {
             "geocoder_status" : "OK",
             "place_id" : "ChIJzfXobhTnDDkRJQ2M4AEkun8",
             "types" : [ "street_address" ]
          },
          {
             "geocoder_status" : "OK",
             "place_id" : "ChIJrz2dDk_cDDkRmnC23K0BpD4",
             "types" : [ "street_address" ]
          }
       ],
       "routes" : [
          {
             "bounds" : {
                "northeast" : {
                   "lat" : 28.4808871,
                   "lng" : 77.3195229
                },
                "southwest" : {
                   "lat" : 28.3932808,
                   "lng" : 77.30536649999999
                }
             },
             "copyrights" : "Map data ©2017 Google",
             "legs" : [
                {
                   "distance" : {
                      "text" : "11.9 km",
                      "value" : 11902
                   },
                   "duration" : {
                      "text" : "22 mins",
                      "value" : 1313
                   },
                   "end_address" : "384, Sector-16, Sector 15A, Faridabad, Haryana 121007, India",
                   "end_location" : {
                      "lat" : 28.3936165,
                      "lng" : 77.31753990000001
                   },
                   "start_address" : "A-105, Ashoka Enclave Part II, Sector 37, Faridabad, Haryana 121003, India",
                   "start_location" : {
                      "lat" : 28.4759614,
                      "lng" : 77.3139839
                   },
                   "steps" : [
                      {
                         "distance" : {
                            "text" : "14 m",
                            "value" : 14
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 3
                         },
                         "end_location" : {
                            "lat" : 28.4760899,
                            "lng" : 77.31398329999999
                         },
                         "html_instructions" : "Head \u003cb\u003enorth\u003c/b\u003e",
                         "polyline" : {
                            "points" : "wuxlDkk{vMY?"
                         },
                         "start_location" : {
                            "lat" : 28.4759614,
                            "lng" : 77.3139839
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.4 km",
                            "value" : 440
                         },
                         "duration" : {
                            "text" : "2 mins",
                            "value" : 116
                         },
                         "end_location" : {
                            "lat" : 28.4766301,
                            "lng" : 77.3097228
                         },
                         "html_instructions" : "Turn \u003cb\u003eleft\u003c/b\u003e toward \u003cb\u003eOld Sher Shah Suri Road\u003c/b\u003e/\u003cb\u003eSarai Khawaja Rd\u003c/b\u003e",
                         "maneuver" : "turn-left",
                         "polyline" : {
                            "points" : "qvxlDkk{vMApB?Z?jB?bACvDAx@?T@v@?@Dx@?H?FADABCBw@bAQRY`@"
                         },
                         "start_location" : {
                            "lat" : 28.4760899,
                            "lng" : 77.31398329999999
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.5 km",
                            "value" : 503
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 81
                         },
                         "end_location" : {
                            "lat" : 28.4808871,
                            "lng" : 77.30797579999999
                         },
                         "html_instructions" : "Slight \u003cb\u003eright\u003c/b\u003e onto \u003cb\u003eOld Sher Shah Suri Road\u003c/b\u003e/\u003cb\u003eSarai Khawaja Rd\u003c/b\u003e",
                         "maneuver" : "turn-slight-right",
                         "polyline" : {
                            "points" : "}yxlDwpzvMIDiF|AcBh@{Bp@eGhByBp@"
                         },
                         "start_location" : {
                            "lat" : 28.4766301,
                            "lng" : 77.3097228
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.3 km",
                            "value" : 255
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 50
                         },
                         "end_location" : {
                            "lat" : 28.4808239,
                            "lng" : 77.30536649999999
                         },
                         "html_instructions" : "Turn \u003cb\u003eleft\u003c/b\u003e onto \u003cb\u003eMain Rd\u003c/b\u003e",
                         "maneuver" : "turn-left",
                         "polyline" : {
                            "points" : "qtylD{ezvMHnEBxH"
                         },
                         "start_location" : {
                            "lat" : 28.4808871,
                            "lng" : 77.30797579999999
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "1.0 km",
                            "value" : 1013
                         },
                         "duration" : {
                            "text" : "2 mins",
                            "value" : 125
                         },
                         "end_location" : {
                            "lat" : 28.4717998,
                            "lng" : 77.30594619999999
                         },
                         "html_instructions" : "Turn \u003cb\u003eleft\u003c/b\u003e onto \u003cb\u003eNH19\u003c/b\u003e/\u003cb\u003eNH44\u003c/b\u003e\u003cdiv style=\"font-size:0.9em\"\u003ePass by Hotel Saffron Kiran (on the left in 1.0&nbsp;km)\u003c/div\u003e",
                         "maneuver" : "turn-left",
                         "polyline" : {
                            "points" : "ctylDquyvMhA?^An@?lAEfAGrEQzBMH?DALEJGzCw@TC`@C^AV?P?T@rALL?v@B\\?VAz@CjB@h@?X?fBG~@B^NrCKTA"
                         },
                         "start_location" : {
                            "lat" : 28.4808239,
                            "lng" : 77.30536649999999
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "7.5 km",
                            "value" : 7549
                         },
                         "duration" : {
                            "text" : "10 mins",
                            "value" : 624
                         },
                         "end_location" : {
                            "lat" : 28.4041209,
                            "lng" : 77.3116127
                         },
                         "html_instructions" : "Keep \u003cb\u003eright\u003c/b\u003e to stay on \u003cb\u003eNH19\u003c/b\u003e/\u003cb\u003eNH44\u003c/b\u003e\u003cdiv style=\"font-size:0.9em\"\u003ePass by Bank Of India (on the left in 2.4&nbsp;km)\u003c/div\u003e",
                         "maneuver" : "keep-right",
                         "polyline" : {
                            "points" : "w{wlDeyyvM|HU`DMrAEnQu@jASVCXEpGUfDM`BGl@ED?z@CrAGpAEdBI^AfF[~DSvLa@xJ_@lFSvEQlHQlIa@zHUnIa@~FWbBItBGfDIbDMrAP|DMnCMxBEl@?`BGtBMhAG`H[d@AnEQZAxBGbBGfFSxBIpBI`GSfEOlCIVATAh@Ch@AzFWtQu@rHWd@C~J_@`FQl@A`@Ct@AnAE`@Cr@EhCI^A\\Al@El@Ch@ApCOxBI\\AnDOvBG|BIdESzGU|DMvAG`@CdDOnAE~CIf@ElAClDM"
                         },
                         "start_location" : {
                            "lat" : 28.4717998,
                            "lng" : 77.30594619999999
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "11 m",
                            "value" : 11
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 4
                         },
                         "end_location" : {
                            "lat" : 28.404129,
                            "lng" : 77.3117281
                         },
                         "html_instructions" : "Turn \u003cb\u003eleft\u003c/b\u003e onto \u003cb\u003eGovernment College Rd\u003c/b\u003e",
                         "maneuver" : "turn-left",
                         "polyline" : {
                            "points" : "wtjlDq|zvMAW"
                         },
                         "start_location" : {
                            "lat" : 28.4041209,
                            "lng" : 77.3116127
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.3 km",
                            "value" : 274
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 31
                         },
                         "end_location" : {
                            "lat" : 28.4016677,
                            "lng" : 77.31193089999999
                         },
                         "html_instructions" : "Turn \u003cb\u003eright\u003c/b\u003e toward \u003cb\u003eLal Bahadur Shastri Marg\u003c/b\u003e",
                         "maneuver" : "turn-right",
                         "polyline" : {
                            "points" : "ytjlDi}zvMz@CzBMz@Ah@ClEO"
                         },
                         "start_location" : {
                            "lat" : 28.404129,
                            "lng" : 77.3117281
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.7 km",
                            "value" : 677
                         },
                         "duration" : {
                            "text" : "2 mins",
                            "value" : 100
                         },
                         "end_location" : {
                            "lat" : 28.4018048,
                            "lng" : 77.318851
                         },
                         "html_instructions" : "Turn \u003cb\u003eleft\u003c/b\u003e onto \u003cb\u003eLal Bahadur Shastri Marg\u003c/b\u003e\u003cdiv style=\"font-size:0.9em\"\u003ePass by Sun Flag Hospital &amp; Research Centre (on the left in 650&nbsp;m)\u003c/div\u003e",
                         "maneuver" : "turn-left",
                         "polyline" : {
                            "points" : "mejlDq~zvMA]?_A?sD?gD?yC?_F?q@EiDIwCCcBC{A"
                         },
                         "start_location" : {
                            "lat" : 28.4016677,
                            "lng" : 77.31193089999999
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.9 km",
                            "value" : 936
                         },
                         "duration" : {
                            "text" : "2 mins",
                            "value" : 126
                         },
                         "end_location" : {
                            "lat" : 28.3934097,
                            "lng" : 77.3195229
                         },
                         "html_instructions" : "Turn \u003cb\u003eright\u003c/b\u003e at \u003cb\u003eSector 16 Rd\u003c/b\u003e\u003cdiv style=\"font-size:0.9em\"\u003ePass by Gymkhana Club - I (on the right)\u003c/div\u003e",
                         "maneuver" : "turn-right",
                         "polyline" : {
                            "points" : "gfjlDyi|vMnAGrNg@nBGtBInIUlDKdJa@"
                         },
                         "start_location" : {
                            "lat" : 28.4018048,
                            "lng" : 77.318851
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0.2 km",
                            "value" : 193
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 41
                         },
                         "end_location" : {
                            "lat" : 28.3932808,
                            "lng" : 77.3175523
                         },
                         "html_instructions" : "Turn \u003cb\u003eright\u003c/b\u003e",
                         "maneuver" : "turn-right",
                         "polyline" : {
                            "points" : "yqhlD_n|vMPrE@nADdB"
                         },
                         "start_location" : {
                            "lat" : 28.3934097,
                            "lng" : 77.3195229
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "37 m",
                            "value" : 37
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 12
                         },
                         "end_location" : {
                            "lat" : 28.3936165,
                            "lng" : 77.31753990000001
                         },
                         "html_instructions" : "Turn \u003cb\u003eright\u003c/b\u003e\u003cdiv style=\"font-size:0.9em\"\u003eDestination will be on the left\u003c/div\u003e",
                         "maneuver" : "turn-right",
                         "polyline" : {
                            "points" : "_qhlDua|vMcA@"
                         },
                         "start_location" : {
                            "lat" : 28.3932808,
                            "lng" : 77.3175523
                         },
                         "travel_mode" : "DRIVING"
                      }
                   ],
                   "traffic_speed_entry" : [],
                   "via_waypoint" : []
                }
             ],
             "overview_polyline" : {
                "points" : "wuxlDkk{vMY?ApB?fCEjIF|BGTiAvAY`@IDmIfCaKzCyBp@HnEBxHhA?nAAtCM~Ia@XMpD{@`AEh@?hBNdAB|ECbA?fBG~@B^NrCKrIWtFSnQu@jASp@IxLc@pEQjHYfLo@pXaAdMe@lHQlIa@zHUnIa@bJa@|GQbDMrAPlI[fDEvEUjJc@jK]fd@_BdJ_@h[mAdLc@fJYnHYlNk@jRu@rQo@tFUfEOzFQAWz@CvDOvFSAyL?yJE{EM{FC{AnAGbRo@dM_@lDKdJa@RbHDdBcA@"
             },
             "summary" : "NH19/NH44",
             "warnings" : [],
             "waypoint_order" : []
          }
       ],
       "status" : "OK"
    } 
```

**处理**

```
import android.app.Dialog;
import android.app.ProgressDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;

import com.android.volley.Request;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.toolbox.JsonObjectRequest;
import com.android.volley.toolbox.Volley;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class MainActivity extends AppCompatActivity {

    private Dialog mDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        callApiArrayInsideArray();
    }

    private void callApiArrayInsideArray() {
        JSONObject jsonObject = new JSONObject();

        // TODO Send parameter using this in volley apis
        /*try {
            jsonObject.put("UserId", "abc");
        } catch (JSONException e) {
            e.printStackTrace();
        }*/
//        String url = Constants.GetData;
        String url = "http://maps.googleapis.com/maps/api/directions/json?origin=28.4759618,77.3140897&destination=28.3936072,77.3172154&sensor=false&mode=driving&alternatives=true";

        mDialog = ProgressDialog.show(MainActivity.this, "", "Please wait", true);
        mDialog.setCancelable(false);

        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, url,
                jsonObject, new Response.Listener<JSONObject>() {
            @Override
            public void onResponse(JSONObject response) {
                Log.i("tag", "Volley response: " + response.toString());
                if (mDialog != null) {
                    mDialog.dismiss();
                }
                // TODO when Success Response  then set parse data in list view
                parseResponse(response);
            }
        }, new Response.ErrorListener() {
            @Override
            public void onErrorResponse(VolleyError error) {
                if (mDialog != null) {
                    mDialog.dismiss();
                }
                Log.i("tag", "Volley error: " + error.getMessage());
            }
        });
        Volley.newRequestQueue(this).add(jsonObjectRequest);
    }

    private void parseResponse(JSONObject response) {
        try {
            JSONArray jsonArray = response.getJSONArray("routes");

            Log.e("MainActivity", "jsonArray --> " + jsonArray.toString(2));
            if (jsonArray != null)
            {
                for (int i = 0; i < jsonArray.length(); i++)
                {
                    JSONObject jsonnew = jsonArray.getJSONObject(i);
                    JSONArray jsonarrayROW = jsonnew.getJSONArray("legs");

                    for (int j = 0; j < jsonarrayROW.length(); j++)
                    {
                        JSONObject jsonnewtwo = jsonarrayROW.getJSONObject(j);
                        JSONArray jsonarrayCOL = jsonnewtwo.getJSONArray("steps");

                        for (int k = 0; k < jsonarrayCOL.length(); k++)
                        {
                            JSONObject jsonnewthree = jsonarrayCOL.getJSONObject(k);
                            String str_data = jsonnewthree.getString("html_instructions");
                            Log.e("Keshav", "html_instructions -> " + str_data);
                        }
                    }
                    Log.e("Keshav", "GeoEvent List->");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
} 
```

# python - 如何检查字符串是否等同于 Python 中的用户输入？

> ID：14000678
> 
> 赞同：-2
> 
> 时间：2012-12-22T06:40:41.913
> 
> 标签：python

我只想读取用户的输入，直到执行命令或输入某个字符串。

例如：

```
while "!finish" is not line:
    line = input(">")
    file.write(line+"\n") 
```

如果用户输入 !finish 并且仅输入该字符串，我想结束输入。我该怎么做呢？另外，如果有办法使用键绑定，那就更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:42:03.153

应该像这样简单，只需确保在循环之前定义了该行

```
line = ''

while "!finish" != line:
    line = input(">")
    file.write(line+"\n") 
```

# fluent-nhibernate - 使用流利的 nhibernate 映射 RefrencesAny（多个表）

> ID：14000679
> 
> 赞同：0
> 
> 时间：2012-12-22T06:40:46.370
> 
> 标签：fluent-nhibernate, mapping

我正在尝试使用 Fluent NHIbernate 关注这篇文章：http: [//blogs.planetcloud.co.uk/mygreatdiscovery/post/Localizing-entities-with-NHibernate.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Localizing-entities-with-NHibernate.aspx)

我的测试产生以下错误：

```
 ----> NHibernate.MappingException : An association from the table TranslatedText refers to an unmapped class: .Domain.Localisation.ILocalizedEntity 
```

知道如何让 NH 尊重界面吗？

添加`.IncludeBase<ILocalizedEntity>()`到我的汽车模型中什么也没做……（正如预期的那样，它是一个接口而不是抽象的，对吧？）

映射：（问题）

```
mapping.HasMany(m => m.TranslatedTexts)
                .AsSet()
                .Inverse().Cascade.SaveUpdate()
                .KeyColumn("EntityId")
                .ForeignKeyConstraintName("none")
                .Where("EntityClass = 'Domain.Question'"); 
```

翻译文本（有）`public virtual ILocalizedEntity Entity { get; set; }`

```
mapping.ReferencesAny(tt => tt.Entity)
                .IdentityType<Guid>()
                .EntityIdentifierColumn("EntityId")
                .EntityTypeColumn("EntityType"); 
```

界面：

```
 public interface ILocalizedEntity
    {
        ICollection<TranslatedText> TranslatedTexts { get; set; }
    } 
```

我在 FNH 测试套件中也看到了同样的情况。我有一种感觉，这与我使用 AutoMapping 的事实有关，但目前还不确定是什么......

**确认编辑** - 使用标准 ClassMaps 而不是自动映射，具有上述相同的映射，按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:29:05.733

我确实找到了一个“解决方法”，即从自动映射中删除所涉及的类，并使用 ClassMaps 手动滚动它们，因为我很喜欢自动映射，所以真的不理想！

```
sessionFactory = Fluently.Configure()
 .Database(sqlConfig)
.Mappings(m => m.AutoMappings.Add(new MyAutoPersistenceModel().GetModel()))
.Mappings(m => m.FluentMappings.AddFromAssemblyOf<QuestionMap>())
.BuildSessionFactory(); 
```

在 MyAutoPersistenceModel 中：

```
public override bool ShouldMap(System.Type type)
{
            var interfaces = type.GetInterfaces();
            return type != typeof(TranslatedText) && 
                !interfaces.Any(x => x.GetType() == typeof(ILocalisedEntity)) &&
                interfaces.Any(x => x.IsGenericType && x.GetGenericTypeDefinition() == typeof(IEntityWithTypedId<>));
} 
```

# android - 为什么找不到adb？

> ID：14000682
> 
> 赞同：0
> 
> 时间：2012-12-22T06:41:35.250
> 
> 标签：android, linux, ubuntu, adb

我刚刚在全新安装的 Ubuntu 12.10 上安装了带有 eclipse 的 ADT 包。现在，当我尝试运行 adb 时，我得到了这个：http: [//i.imgur.com/bd0DN.png](https://i.imgur.com/bd0DN.png)![在此处输入图像描述](../Images/7d2102bd74330266be2099d567ed9349.png)

这是怎么回事？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:17:54.510

感谢 Quynh Nguyen。解决方案是：

```
sudo apt-get install ia32-libs 
```

# c++ - dom加载后如何调用CDHtmlDialog::GetDHtmlDocument？

> ID：14000700
> 
> 赞同：0
> 
> 时间：2012-12-22T06:44:07.590
> 
> 标签：c++, visual-c++, com, mfc, atl

我打电话`CDhtmlDialog::GetDHtmlDocument() in CDhtmlDialog.OnInitDialog()`，但我发现返回值为 NULL。

但是，如果我放入`GetDHtmlDocument()`一个按钮单击处理程序，则返回`IHtmlDocument`是有效的。所以我想我打电话时可能没有加载DOM `CDhtmlDialog::GetDHtmlDocument()`？

任何建议表示赞赏

# javascript - 如何让 div 去往隐藏 div 的地方？

> ID：14000707
> 
> 赞同：2
> 
> 时间：2012-12-22T06:45:44.540
> 
> 标签：javascript, html

[http://jsfiddle.net/joshr2d2/zU2YH/](http://jsfiddle.net/joshr2d2/zU2YH/)

当我单击“显示菜单”时，它可以正常工作并显示菜单，但我想让菜单显示得更高并显示“显示菜单”消失的位置。如果可以，我将如何做到这一点？

```
<!DOCTYPE html>
<html>

<head>

<link rel="stylesheet" type="text/css" href="http://youngbaptistchurch.tk/css/buttonstyle.css" media="screen" />
<script language=javascript type='text/javascript'> 
function hideDiv(pass) { 
   var divs = document.getElementsByTagName('div'); 
   for(i=0;i<divs.length;i++){ 
     if(divs[i].id.match(pass)){//if they are 'see' divs 
       if (document.getElementById) // DOM3 = IE5, NS6 
         divs[i].style.visibility="hidden";// show/hide 
       else 
       if (document.layers) // Netscape 4 
         document.layers[divs[i]].display = 'hidden'; 
       else // IE 4 
         document.all.hideShow.divs[i].visibility = 'hidden'; 
      } 
   } 
}  

function showDiv(pass) { 
   var divs = document.getElementsByTagName('div'); 
   for(i=0;i<divs.length;i++){ 
     if(divs[i].id.match(pass)){ 
       if (document.getElementById) 
          divs[i].style.visibility="visible"; 
       else 
       if (document.layers) // Netscape 4 
          document.layers[divs[i]].display = 'visible'; 
       else // IE 4 
          document.all.hideShow.divs[i].visibility = 'visible'; 
    } 
  } 
} 
</script>
<style type="text/css">
a:hover{
   color:#ffffff
}
</style>

<script language="javascript"> 
<!--
var state = 'none';

function showhide(layer_ref) {

  if (state == 'block') { 
     state = 'none'; 
  } 
  else { 
     state = 'block'; 
  } 
  if (document.all) { //IS IE 4 or 5 (or 6 beta) 
     eval( "document.all." + layer_ref + ".style.display = state"); 
  } 
  if (document.layers) { //IS NETSCAPE 4 or below 
     document.layers[layer_ref].display = state; 
  } 
  if (document.getElementById &&!document.all) { 
     hza = document.getElementById(layer_ref); 
     hza.style.display = state; 
  } 
} 
//--> 
</script> 

<link rel="stylesheet" type="text/css" href="http://youngbaptistchurch.tk/alt2/style.css" media="screen" />

</head>
<body>

<div style="position:fixed;">
</div>
<font face="Arial">
<center>
<div id="hide">
<a href="javascript:hideDiv('hide')" onclick="showhide('menu');" class="button big transition">Show menu</a>
</div>
<div id="menu" style="display: none;position:relative;">
<a href="javascript:showDiv('hide')" onclick="showhide('menu');" class="button big transition">Hide menu</a><br />
<br />
<a target="_parent" href="test.html" class="button big transition">Option 1</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 2</a>

<br />

<a target="_parent" href="test.html" class="button big transition">Option 3</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 4</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 5</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 6</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 7</a>
<br />

<a target="_parent" href="test.html" class="button big transition">Option 8</a>

</center>
</div>
</font>
</body>

</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:46:53.610

在javascript函数中使用显示属性而不是可见性。使用以下代码..

```
<!DOCTYPE html>
    <html>

    <head>

    <link rel="stylesheet" type="text/css" href="http://youngbaptistchurch.tk/css/buttonstyle.css" media="screen" />
    <script language=javascript type='text/javascript'>
        function hideDiv(pass) {
            var divs = document.getElementsByTagName('div');
            for (i = 0; i < divs.length; i++) {
                if (divs[i].id.match(pass)) {//if they are 'see' divs 
                    if (document.getElementById) // DOM3 = IE5, NS6 
                        divs[i].style.display = 'none'; // show/hide 
                    else
                        if (document.layers) // Netscape 4 
                            document.layers[divs[i]].display = 'none';
                        else // IE 4 
                            document.all.hideShow.divs[i].display = 'none'; ;
                }
            }
        }

        function showDiv(pass) {
            var divs = document.getElementsByTagName('div');
            for (i = 0; i < divs.length; i++) {
                if (divs[i].id.match(pass)) {
                    if (document.getElementById)
                        divs[i].style.display = 'block';
                    else
                        if (document.layers) // Netscape 4 
                            document.layers[divs[i]].display = 'block';
                        else // IE 4 
                            document.all.hideShow.divs[i].display = 'block';
                }
            }
        } 
    </script>
    <style type="text/css">
    a:hover{
        color:#ffffff
    }
    </style>

    <script language="javascript"> 
    <!--
        var state = 'none';

        function showhide(layer_ref) {

            if (state == 'block') {
                state = 'none';
            }
            else {
                state = 'block';
            }
            if (document.all) { //IS IE 4 or 5 (or 6 beta) 
                eval("document.all." + layer_ref + ".style.display = state");
            }
            if (document.layers) { //IS NETSCAPE 4 or below 
                document.layers[layer_ref].display = state;
            }
            if (document.getElementById && !document.all) {
                hza = document.getElementById(layer_ref);
                hza.style.display = state;
            }
        } 
    //--> 
    </script> 

    <link rel="stylesheet" type="text/css" href="http://youngbaptistchurch.tk/alt2/style.css" media="screen" />

    </head>
    <body>

    <div style="position:fixed;">
    <gcse:searchbox></gcse:searchbox>
    </div>
    <gcse:searchresults></gcse:searchresults>
    <font face="Arial">
    <center>
    <div id="hide">
    <a href="javascript:hideDiv('hide')" onclick="showhide('menu');" class="button big transition">Show menu</a>
    </div>
    <div id="menu" style="display: none;position:relative;">
    <a href="javascript:showDiv('hide')" onclick="showhide('menu');" class="button big transition">Hide menu</a><br />
    <br />
    <a target="_parent" href="test.html" class="button big transition">Option 1</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 2</a>

    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 3</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 4</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 5</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 6</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 7</a>
    <br />

    <a target="_parent" href="test.html" class="button big transition">Option 8</a>

    </center>
    </div>
    </font>
    </body>

    </html>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:55:09.583

你可以使用 JQuery

```
<div id="toggleMenu" onclick="function(){
    if ($("#toggleMenu").html() == "Show Menu") {
        $("#toggleMenu").html("Hide Menu");
        //TODO logic
    } else if ($("#toggleMenu").html() == "Hide Menu") {
        $("#toggleMenu").html("Show Menu");
        //TODO logic
    }
}">Show Menu</div> 
```

但是有很多方法可以做到这一点，希望这会有所帮助

# eclipse - 使用链接文件夹导出 eclipse 插件时出现问题

> ID：14000708
> 
> 赞同：2
> 
> 时间：2012-12-22T06:46:00.863
> 
> 标签：eclipse, eclipse-plugin

我有一个 Eclipse 插件项目（LSclipse）和两个 LSclipse 使用的 java 项目（我将它们称为 A、B）。

两个项目是 LSclipse 中的链接文件夹，并且在 Eclipse IDE 中一切正常。

![在此处输入图像描述](../Images/dcd7452097f87297d810708f55ede9f5.png)

当我尝试将项目导出为 eclipse 插件时，出现错误。

![在此处输入图像描述](../Images/6d86b98861c9d9d8864f721818a25159.png)

错误消息是由 A、B 项目中的那些类型没有正确引用引起的。

```
2\. ERROR in   /Users/smcho/Dropbox/smcho/workspace/seal2/LSclipse/src/lsclipse/LSDiffRunner.java (at line 61)
    import edu.washington.cs.induction.OnePipeLineScript;
       ^^^
The import edu cannot be resolved 
```

我解压部分生成的jar文件，发现A、B中的所有类文件都编译正确。

包资源管理器显示 A、B 中的包，除了空白文件夹之外没有任何问题。

![在此处输入图像描述](../Images/202c1fb29c3863605d904157046ae9ec.png)

我在`build.property`,

![在此处输入图像描述](../Images/76be2ab8bff6f2a6e991778eed87b44b.png)

现在我有这个错误，说这些目录在 LSclipse 目录下不存在。

![在此处输入图像描述](../Images/83cd190f5a0d54e5c92a8337dbc6d47d.png)

这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:19:10.387

我不知道为什么 Linked Foler 有效，但我可以使用符号链接来获取有效的导出插件。

我还认为首先为依赖项目导出 jars，然后将它们作为库包含可能是解决此问题的另一种方法。

参考 -[导出 eclipse 可部署插件和片段时出错](https://stackoverflow.com/questions/13983819/errors-in-exporting-eclipse-deployable-plug-ins-and-fragments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T09:23:41.453

作为参考，以防有人从谷歌来到这里（就像我一样），Eclipse 中的相关错误是[66177](https://bugs.eclipse.org/bugs/show_bug.cgi?id=66177)。如果您想修复它，请去投票。

（具有讽刺意味的是，该错误中的一条评论是 2004 年提出的，并说“老实说，它不太可能在不久的将来修复。”，非常真实 :)）

# emacs - 如何从终端控制 emacs？

> ID：14000710
> 
> 赞同：1
> 
> 时间：2012-12-22T06:46:11.030
> 
> 标签：emacs, elisp

我正在尝试使用在 Windows VM 中运行的 Dragon Naturally speak 在 OSX 上驱动 emacs。我不想在 VM 中运行 emacs，而是想驱动已经在 mac 端运行的 emacs（从存储库的 HEAD 构建）。因此，在浏览了 emacs lisp 手册之后，我想出了以下 lisp 片段（当前在我解决问题时从暂存缓冲区运行）：

```
;; This part is run from an emacsclient -t session
(defvar slave-frame last-event-frame)

;; and this is run in a GUI frame
(defadvice handle-switch-frame (after update-slave-redirect-advice activate)
  (unless (eq last-event-frame slave-frame)
    (redirect-frame-focus slave-frame last-event-frame))) 
```

一切都很好。我在终端窗口中输入，显示缓冲区 A，我的输入出现在 GUI 框架中，忙于显示缓冲区 B。太好了。直到我这样做`C-x C-f`或需要迷你缓冲区的任何其他命令，此时我得到错误`Terminal 1 is locked, cannot read from it`。

我在这里叫错了树，或者有没有办法让`redirect-frame-focus`使用迷你缓冲区的命令很好地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:50:10.283

码头，

你想要什么行为，重定向到（Windows）客户端上的小缓冲区或服务器上的小缓冲区？另外，您使用的是什么版本/风格的 emacs？

# flash - FB Profile 说“它是 gc root”，但它似乎是错误的？

> ID：14000712
> 
> 赞同：2
> 
> 时间：2012-12-22T06:46:38.627
> 
> 标签：flash, garbage-collection, flash-builder, flashplayer-debug

人们非常喜欢flash builder profile tool。但是最近，当我试图找到内存泄漏时，我遇到了一个问题。这是简化的示例。

```
package
{
    import flash.display.Sprite;
    import flash.sampler.pauseSampling;
    import flash.system.System;

    import org.robotlegs.base.ContextBase;
    import org.robotlegs.mvcs.Context;

    public class MemoryLeak extends Sprite
    {
        public function MemoryLeak()
        {
            makeAndDrop();
        }

        public function makeAndDrop():void{
            var _context : Context = new Context(this);
            _context = null;
        }
    }
} 
```

这是一个简单的类，它创建一个对象然后释放它。当我使用配置文件透视图时，它会向我显示“活动对象”。 ![在此处输入图像描述](../Images/ff67ec181423e76ebb535e09943b9a28.png) 这是意料之中的，因为我知道 GC 只有在内存不足时才会释放对象。然后我拍了一张，看看奇怪的东西：在我扩展路径之前，它是这样的： ![在此处输入图像描述](../Images/5df364e26cd628b6c808bcb0d8410909.png) 并且我对上下文对象的持有者感兴趣，所以我扩展它： ![在此处输入图像描述](../Images/e05469c07dbf4661543fd2a6dde36a00.png) 这太奇怪了！如您所见，没有任何东西可以引用它。并且暗示它是“GCRoot”。我知道有关 gc root 的文章，而且很简单（我阅读了多达 20 篇有关 GC 策略的文章以确保理解）。上下文不可能是 gc root。更重要的是，这根本不是“1 路径”！我希望这是配置文件工具的错误，但我确实需要一些解释。所以请忘记“为什么不收集问题”。我希望有人告诉我为什么配置文件工具说“上下文是 gc 根”。它是一个错误还是什么？PS：我使用的是 flash builder 4.6 和 flash debugger 11 sa。

# c++ - 进度条范围和位置，如何在 C++ 中处理大数字？

> ID：14000715
> 
> 赞同：2
> 
> 时间：2012-12-22T06:47:36.303
> 
> 标签：c++, winapi

尝试实现 Windows Progressbar，以大数字字节显示下载进度，但无法正确执行。

对于 2.5gb 的下载，如果我执行以下操作，则下载完成后它会在完整范围内结束。

```
double dlSize = getDlSize();
unsigned int pbRange = (unsigned int)( dlSize / 3000 );
SendMessage( hProgressbar, PBM_SETRANGE, 0, MAKELPARAM( 0, pbRange ) ); 
```

然后在每个下载回调中设置新位置：

```
double dlBytes = bytesDownloaded();
unsigned int newIncrement = (unsigned int)( dlBytes / 3000 );
SendMessage( hProgressbar, PBM_DELTAPOS, (WPARAM)newIncrement, 0 ); 
```

这是一个非常愚蠢的实现，我不想陷入 xy 的情况，所以我的问题是什么是正确的方法来实现一个以 2-5GB 为单位的大数字的进度条？

* * *

我尝试了@msandiford 和@NikBougalis 下面建议的两种方法，通过考虑进度条的宽度并使用百分比而不是实际数字，我什至将两者结合起来，但在所有情况下，newIncrement 总是出现 0，也许那是因为dlSize 总是较低（在 double newIncrement 中出现类似 1.15743e+007 的内容，类型转换它和它的 0 ）。

**我还能做什么？**

结合两种方法的新代码：

编辑 2： 对代码添加了一些检查，因为我不断为 newIncrement 获得 0，看起来它现在可以工作，不确定效果如何：

```
GetClientRect(hProgressbar, &pbRCClient);
pbWidth = pbRCClient.right - pbRCClient.left; // (pbWidth  its a global variable)
unsigned int pbRange = pbRCClient.right - pbRCClient.left;
SendMessage( hProgressbar, PBM_SETRANGE, 0, MAKELPARAM( 0, pbRange ) ); 
```

并在更新时：

```
double dlSize = getDlSize();
double doubleIncrement = ( ( dlSize * pbWidth ) / totalSize );

unsigned int newIncrement;

if ( (unsigned int)doubleIncrement < 1 )
{
    blockFill += doubleIncrement;

    if ( (unsigned int)blockFill > 1 )
    {
        newIncrement = ( unsigned int )blockFill;
        SendMessage( hProgressbar, PBM_DELTAPOS, (WPARAM)newIncrement, 0 );
        blockFill = 0;
    }
}
else
{
    newIncrement = ( unsigned int )( doubleIncrement );
    SendMessage( hProgressbar, PBM_DELTAPOS, (WPARAM)newIncrement, 0 );
    //blockFill = 0;
} 
```

编辑3：看起来它仍然很早就完成了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:19:36.187

您遇到的最大问题是进度条控件本身的限制。PBM_SETRANGE 是有限的，尽管如果您需要处理大于 2GB 的值，您可以使用[PBM_SETRANGE32 ，但您仍然会遇到问题。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760848%28v=vs.85%29.aspx)

巧合的是，为什么要使用双精度？使用 UINT64，其最大容量约为 16,384 PB（如果您下载的内容会溢出...跳过进度条，只会让您和您的客户感到沮丧）。整数对于计算字节之类的东西非常有效。

如果您知道正在下载的文件的完整大小，解决具有有限最大范围的进度条大小的一种方法是使进度条从 0 开始并以 100 结束。然后您可以转换使用[简单的三规则将](http://en.wikipedia.org/wiki/Cross-multiplication)接收到的字节分成百分比：

```
percent = (bytes_received * 100) / max_bytes; 
```

如果您想获得更多的“粒度”，可以将进度条的比例更改为 1000，并相应地调整计算；您甚至可以达到 10000，但此时根据控件的宽度（或高度），您可能会遇到显示器的分辨率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T07:15:58.730

使进度条比进度条窗口本身的像素数更准确可能没有什么意义。基于此，您应该能够很容易地将目标缩放到像素数。

```
 RECT rcClient;
    GetClientRect(hProgressBar, &rcClient);
    unsigned int pbRange = rcClient.right - rcClient.left;

    // Need to either keep unitsPerPixel, or recalculate later
    double pixelsPerUnit = pbRange / dlSize;
    SendMessage(hProgressBar, PBM_SETRANGE, 0, MAKELPARAM(0, pbRange)); 
```

然后更新进度将类似于：

```
 double dlBytes = totalBytesDownloaded();
    unsigned int newProgress = (unsigned int)(dlBytes * pixelsPerUnit);
    SendMessage(hProgressBar, PBM_SETPOS, (WPARAM)newProgress, 0); 
```

如果进度窗口可以以某种方式调整大小，则需要重新计算`pbRange`，重置进度条范围并重新计算`unitsPerPixel`以响应`WM_SIZE`消息。

# java - 检索需要加载时间的网页

> ID：14000716
> 
> 赞同：0
> 
> 时间：2012-12-22T06:47:41.560
> 
> 标签：java, html, parsing, jsoup, webpage

我正在使用 Jsoup 解析网站的内容。问题是页面上有一些数据需要几秒钟才能加载。为此，我的程序只能获取加载图形，而不能获取加载数据。这是我得到的：

```
<div class="sidebar_section">
    <h3><a href="#" class="sidebar_toggle down">Counsel</a></h3>
        <ul style="display:none;" id="counsel">
            <li>Loading &nbsp;&nbsp;<img src="/members/images/ajax-loader3.gif" /></li>
        </ul>
</div> 
```

如果我在浏览器中打开这个 url，我实际上可以看到这个块的内容，而不是“正在加载”这个词。

我想知道页面完全加载后是否有任何获取内容的方法。这是我的简单代码：

```
Document doc = Jsoup.connect(url).get(); 
```

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:55:37.620

[HttpURLConnection](http://alvinalexander.com/blog/post/java/how-open-url-read-contents-httpurl-connection-java)可能是抓取网页的更好方法，因为它提供了更多控制和错误处理，而且您可以获得 MIME 类型和字符编码。

# android - 如何定义系统支持的蓝牙版本

> ID：14000717
> 
> 赞同：1
> 
> 时间：2012-12-22T06:47:56.350
> 
> 标签：android, bluetooth, version, bluez

1.  `Bluetooth 4.0`是一样的`Bluetooth 4.0 LE`吗？, 即 iPhone4s 支持蓝牙 4.0，这是否意味着 iPhone4s 支持蓝牙 4.0 LE？我知道`bluetooth 3.0`！=`bluetooth 3.0 HS`

2.  我的android手机项目，msm7225A平台，蓝牙芯片是WCN2243。可以定义哪个版本？

3.  总之，从硬件和软件方面，如何确认蓝牙版本（使用bluez stack时，以android手机为例）

这真是一个困扰我很久的问题。感谢任何人提供一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:20:58.377

不确定我是否正确地回答了您的问题，但也许这会有所帮助：

1.  蓝牙 4.0 指定了两种操作模式：“经典”蓝牙和“蓝牙低功耗 (LE)”。iPhone 4S 的蓝牙是双模式的，即同时支持classic 和LE。不过，IOS 仅支持通过公共 CentralManager API 直接对后者 (LE) 进行编程。没有办法直接访问IOS中的“经典”蓝牙堆栈。

2.  标准 Android SDK 仅支持经典蓝牙。如果你想使用 LE，[这个答案](https://stackoverflow.com/questions/10995551/bluetooth-low-energy-bluetooth-4-0-with-android-linux)建议使用制造商 API。

3.  BlueZ 至少支持 LE 的 GATT 服务器。不过我还没有使用过，所以我不知道 LE 支持有多完整。如果您打算直接在 Android 手机上使用 BlueZ，请注意这只有在用户有权`root`访问时才有效。

为了更笼统地回答，LE 可以/应该也已经发布而根本不称其为“蓝牙”。因此，要确定硬件/软件是否支持经典和/或 LE，您必须查看您所针对的每个平台的规格。

# jquery - 使用 jQuery $.get() 解析 html 时遇到问题

> ID：14000719
> 
> 赞同：2
> 
> 时间：2012-12-22T06:48:19.687
> 
> 标签：jquery

> **可能重复：**
> [从 HTML 字符串中解析和选择](https://stackoverflow.com/questions/12354105/parsing-and-selecting-from-html-string)

所以，我有以下 jQuery get 函数：

```
$.get('newwindow.html', function(data){
  h = data;
}) 
```

我的目标是用 h 做点什么。基本上它返回一堆html，但我想要一个特定的div。我试过了：

```
$(h).find('#div_name') 
```

我还尝试将回调的内部更改为：

```
h = $('#div_name', data); 
```

或者

```
h = $('#div_name', $(data)); 
```

无济于事，到目前为止我成功的最佳解决方案是将以下内容放入我的回调中：

```
$(data).each(function(k,v){
  if ( $(v).attr('id') === 'div_name') h = $(v).text();
}); 
```

这似乎非常低效。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:11:35.217

`html`要从您的 ajax 调用中解析，请使用`jQuery .filter()`

**示例用法：**

```
$(function () {
    $.get('newwindow.html', function (data) {
        var h = data;
        console.log($(h).filter('#div_name').html());
        //alert($(h).filter('#div_name').html()); //Use this alert if using IE
    });
}); 
```

有关 jQuery .filter() 的更多信息，请访问：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

# vb.net - 从 ComboBox (VB.NET) 打开 Excel 工作簿

> ID：14000720
> 
> 赞同：1
> 
> 时间：2012-12-22T06:48:26.737
> 
> 标签：vb.net, excel, file-io, combobox

如何从组合框中打开 Excel 工作簿？

我正在使用以下代码用 excel 文件名填充组合框，

```
Dim files() As String
files = Directory.GetFiles("C:\Files\Folder", "*.xlsx", SearchOption.AllDirectories)
For Each FileName As String In files
ComboBox1.Items.Add(FileName.Substring(FileName.LastIndexOf("\") + 1, FileName.Length -     FileName.LastIndexOf("\") - 1))
Next 
```

但我不知道如何打开所选文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:16:52.890

```
Imports System
Imports System.IO
Imports System.Collections

Public Class Form1

Private Const TargetDir = "C:\Files\Folder"
Private FullFileList As List(Of String)

Private Sub ProcessFile(ByVal fn As String)
    If Path.GetExtension(fn).ToLower = ".xlsx" Then
        FullFileList.Add(fn)
        ComboBox1.Items.Add(Path.GetFileName(fn))
    End If
End Sub

Private Sub ProcessDirectory(ByVal targetDirectory As String)
    Dim fileEntries As String() = Directory.GetFiles(targetDirectory)
    Dim fileName As String
    For Each fileName In fileEntries
        ProcessFile(fileName)
    Next fileName
    Dim subdirectoryEntries As String() = Directory.GetDirectories(targetDirectory)
    Dim subdirectory As String
    For Each subdirectory In subdirectoryEntries
        ProcessDirectory(subdirectory)
    Next subdirectory
End Sub

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    FullFileList = New List(Of String)
    ProcessDirectory(TargetDir)
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    If ComboBox1.SelectedIndex >= 0 Then
        Dim prc As New System.Diagnostics.Process
        Dim psi As New System.Diagnostics.ProcessStartInfo(FullFileList(ComboBox1.SelectedIndex))
        psi.UseShellExecute = True
        psi.WindowStyle = ProcessWindowStyle.Normal
        prc.StartInfo = psi
        prc.Start()
    End If
End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:54:28.850

尝试使用

`Process.start("excel "+ComboBox1.SelectedItem.ToString());`

关于按钮点击事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T06:57:33.797

您需要处理一个事件来对用户的选择做出反应：要么更改选择中的选择，`ComboBox`要么（更好地）`Button`单击。在您的事件处理程序中，您可以从以下位置检索文件名`ComboBox`：

```
string filename = ComboBox1.SelectedItem.ToString() 
```

一旦你有了文件名，你就可以打开文件了，虽然你如何做这将取决于你想用它做什么。[这个答案](https://stackoverflow.com/a/11978301/976080)有一些关于在 VB.NET 中打开 Excel 文件的信息。

# sql-server-2008 - Microsoft Sync Framework 将客户端数据库标记为最新

> ID：14000726
> 
> 赞同：1
> 
> 时间：2012-12-22T06:49:07.237
> 
> 标签：sql-server-2008, synchronization, microsoft-sync-framework

我使用 Microsoft Sync Framework 2.1 SDK 开发了一个应用程序，我当前的部署方法是：

1.  从开发机器备份未配置的数据库并在服务器上恢复它。

2.  供应服务器，然后供应客户端

3.  同步数据库

4.  在开发机器上备份同步的数据库并将其用于客户端安装。它作为我在客户端计算机上还原的 SQL/Server 备份包含在 InstallShield 包中。

这可行，但现在在客户端计算机上，我还想使用相同的 SQL/Server 备份创建一个单独的测试数据库，而不会使安装大小加倍。这也有效，但当然因为客户端测试版本不再与服务器上的测试版本同步，它会尝试下载所有记录，这在较慢的 Internet 连接上需要花费数小时。

因为测试数据库的完整性并不重要，我想知道是否有一种方法可以在没有太多网络流量的情况下在客户端机器上将其标记为“最新”？

在查看跟踪表的工作方式后，我不确定这是否可能不会导致其他客户端上传或下载所有内容。也许可以选择仅从我错过的客户端上传？这很适合这个目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:15:05.380

每次备份已配置的数据库并还原它以初始化另一个客户端或副本时，请确保在还原之后和首次同步之前运行 PerformPostRestoreFixup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:24:45.347

在进一步分析了 Sync Framework 使用的数据结构后，我确定如果不在客户端和服务器之间发送大量数据，就没有可接受的方法来实现我正在寻求的结果，而这些数据将接近执行“正确”所需的数据同步。

相反，我最终在部署中包含了一个单独的测试数据库备份，以便可以执行通常的 PerformPostRestoreFixup，然后以与处理实时数据库相同的正常方式进行同步。

# ruby-on-rails - 验证错误时如何保留输入数据？

> ID：14000730
> 
> 赞同：0
> 
> 时间：2012-12-22T06:50:18.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果输入验证码正确，它会在更新或创建记录之前进行验证。
我的代码将我带回上一页，但所有输入数据都消失了……如何保留在上一页输入的输入数据？

我想使用 before_filter 并应用这两个动作“更新”和“创建”

**控制器**

```
before_filter :simple_captcha_check, :only => [:update, :create] 

def simple_captcha_check
    if !simple_captcha_valid?
        flash[:error] = 'Wrong Captcha!'
        redirect_to :back
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:54:59.273

当验证错误发生时，您不应该**重定向**页面，您应该只使用输入模板进行**渲染。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:35:00.350

**方法一：**

理想情况下，您应该有一个从视图`edit`和`new`视图呈现的通用更新/创建表单部分。通过这样的设计，您可以使用本地参数渲染该公共部分以再次填写表单。这些值与您在提交表单后收到的操作相同。

**方法二：**

使用 ajax 提交表单。在提交之前，进行 ajax 调用，`simple_captcha_check`如果返回成功，最后提交表单。

# django - django 有什么方法可以在 ModelForm 得到验证之前从它那里获取价值吗？

> ID：14000731
> 
> 赞同：0
> 
> 时间：2012-12-22T06:50:38.460
> 
> 标签：django, django-forms

假设这些是 django 模型：

```
class Author():

    name = charfield()

class Book():

    title = charfield()
    author = foreignkey() 
```

和一个`ModelForm`：

```
class BookForm():

    # i override the author field
    author = models.CharField()

    class Meta:
        model = Book
        fields = ('title', 'author') 
```

我正在使用自动完成插件（如 facebook 搜索，因此我可以在不使用选择字段的情况下填写作者字段）。问题是，我无法从`author`字段中分配值，因为它不是作者的实例，它是一个字符串。所以我想在它得到验证之前对其进行操作。我尝试修改`QueryDict`但不可变。一旦我用它调用表单`form = BookForm(request.POST)`就会得到错误：`Cannot assign u"foo":"Book.author" must be an Author instance`。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:26:36.747

你不是用“django方式”做的。您需要为作者字段编写自己的小部件。

并做这样的事情：

```
class BookForm():

    class Meta:
        model = Book
        fields = ('title', 'author')
        widgets = {
        'author': YourFacebookLikeWidgetClass,
    } 
```

现在，您的小部件负责做所有很酷的事情，（ajax 调用，呈现结果...等），但最终，它将为表单返回正确的值。（作者ID）

阅读有关[django 小部件的更多信息](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)

问题是没有很多关于编写自己的小部件的信息，但你可以随时在这里询问，并观看一些 django 小部件的源代码。（编写自己的并不复杂:)）

# python - Python - 按索引从列表列表中提取多个列表

> ID：14000734
> 
> 赞同：6
> 
> 时间：2012-12-22T06:51:34.207
> 
> 标签：python

有没有一种有效的方法来遍历列表列表并将每个列表的第一个元素提取到另一个列表中，将第二个元素提取到另一个列表中，等等。例如：

```
x = [[1, 2, 3], [4, 5, 6] , [7, 8, 9]]
y1 = [i[0] for i in x]
y2 = [i[1] for i in x] 
```

有没有办法在单个列表理解中提取 y1 和 y2 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T06:57:49.187

你可以使用`zip`：

```
>>> x = [[1, 2, 3], [4, 5, 6] , [7, 8, 9]]
>>> for l in zip(*x):
...     print l
... 
(1, 4, 7)
(2, 5, 8)
(3, 6, 9) 
```

您可以使用[`itertools.izip()`](http://docs.python.org/2/library/itertools.html#itertools.izip)代替`zip()`来制作迭代器而不是列表。

# javascript - ie8中的facebook api问题

> ID：14000735
> 
> 赞同：2
> 
> 时间：2012-12-22T06:51:44.777
> 
> 标签：javascript, facebook, internet-explorer-8, facebook-like

> **可能重复：**
> [fb:serverfbml 不会在 Opera 和 IE 上呈现](https://stackoverflow.com/questions/3228876/fbserverfbml-wont-render-on-opera-and-ie)

facebook funpage api 适用于所有浏览器，但不适用于 IE8。

我已经尝试了以下尝试但没有成功，任何人都可以提出更好的方法吗？

```
<script type="text/javascript" src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US"></script>
<script type="text/javascript">FB.init("1690883eb733618b294e98cb1dfba95a");</script>
<fb:fan profile_id="<?php echo $this->config->get('my_facebook_id'); ?>" stream="0" connections="25" logobar="0" border="white" width="1170" height="94" css="<?php echo HTTPS_SERVER; ?>stylesheet/facebook.css?3.0.0.2"></fb:fan> 
```

查看错误截图：[http ://demo.harnishdesign.net/api-i8-issue.jpg](http://demo.harnishdesign.net/api-i8-issue.jpg)

我在哪里做错了？？？请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:43:48.713

“Internet Explorer”需要在“html”标签中定义的“Facebook 命名空间”。

这里是：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">

```

# linux - 可视化Linux内核使用的设备树文件（dtb）的工具？

> ID：14000736
> 
> 赞同：24
> 
> 时间：2012-12-22T06:52:06.023
> 
> 标签：linux, linux-kernel, arm, embedded-linux, device-tree

我正在寻找一种可以以图形方式表示 linux 内核中使用的硬件设备树的工具。我正在尝试了解特定 arm 芯片组的 linux 内核。这将是一个非常有用的工具。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-10-08T11:31:42.980

**`dtc -O dts`**

```
sudo apt-get install device-tree-compiler
dtc -I dtb -O dts -o a.dts a.dtb 
```

给出了设备树的缩进良好的文本表示，`a.dts`使用文本编辑器很容易理解。或将其转储到标准输出：

```
dtc -I dtb -O dts -o - a.dtb 
```

的源代码`dtc`存在于内核树本身中[`scripts/dtc/dtc.c`](https://github.com/torvalds/linux/blob/v4.17/scripts/dtc/dtc.c#L166)

在 Ubuntu 16.04 上测试，使用 Raspberry Pi 2 的设备树，在`2016-05-27-raspbian-jessie-qemu.img`.

为方便起见，我的`.bashrc`：

```
dtbs() ( dtc -I dtb -O dts -o - "$1" )
dtsb() ( dtc -I dts -O dtb -o - "$1" ) 
```

`dtc``/proc`还可以从实时内核中提取 DTS，如下所示： [https ://unix.stackexchange.com/questions/265890/is-it-possible-to-get-the-information-for-a-device-tree-使用 sys-of-a-running](https://unix.stackexchange.com/questions/265890/is-it-possible-to-get-the-information-for-a-device-tree-using-sys-of-a-running)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-04-10T06:22:43.850

在linux上我们可以直接使用**fdtdump打开dtb文件**

```
fdtdump dtb_file.dtb > /tmp/test.txt 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-23T08:30:43.583

您可以尝试**组件检查器**工具。

![在此处输入图像描述](../Images/05a8e7697147c15fc32a1997a344d84b.png)

它是 Eclipse 插件**[QorIQ 配置套件的一部分。](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=PE_QORIQ_SUITE)**

**[在这里](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=PE_QORIQ_SUITE&fpsp=1&tab=Design_Tools_Tab)**下载。（需要注册。免费下载。）

* * *

就我个人而言，因为我大部分时间都在命令行上，并且非常沉迷于`vi`，所以我发现它的内置代码折叠功能在某种程度上就足够了，只要**`dts`**正确缩进。

`vi`
通过添加以下行来设置热键命令以折叠/展开代码块`.vimrc`：

```
nnoremap <silent> <F5> zfa}<CR>
nnoremap <silent> <F6> zo<CR> 
```

通过上述设置，要折叠一个块/节点，只需将光标移动到它的任何一行（标题除外）并点击`F5`。要展开折叠的块/节点，请移动到带有折叠标题的行并点击`F6`。

这是部分折叠的 dts 在`vi`. ![在此处输入图像描述](../Images/d3f2e78f1d1ff59c33a8caff5a487a96.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-11-27T19:56:33.617

工具很少：

*   可视化 FDT/DTB/DTBO -> [https://github.com/dev-0x7C6/fdt-viewer](https://github.com/dev-0x7C6/fdt-viewer)
*   可视化 DTS（死）-> [https://github.com/TheCodeArtist/dtv-demo](https://github.com/TheCodeArtist/dtv-demo)
*   可视化 DTS（我的 fork）-> [https://github.com/bmx666/dtv-demo](https://github.com/bmx666/dtv-demo)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-21T16:38:26.020

正如你们中的许多人在阅读此问题后发现的那样，组件检查器工具似乎不再可用。

[Visual Studio Code （免费）通过名为](https://code.visualstudio.com/)[DeviceTree](https://marketplace.visualstudio.com/items?itemName=plorefice.devicetree)的市场提供了一个扩展，它有助于导航设备树文件（**注意：** -`.dts`目前仅支持文件）。它似乎不如组件检查器工具好，但它确实执行了高亮和折叠等基本功能。

# javascript - 从多个锚点单击打开单个弹出窗口？

> ID：14000737
> 
> 赞同：0
> 
> 时间：2012-12-22T06:53:01.517
> 
> 标签：javascript, jquery, asp.net

我有一页存在多个锚链接。

我想从所有这些锚点的 onclick 中打开一个弹出窗口。

请提出任何想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:11:27.513

干得好：

1.  为所有这些“锚链接”添加一个通用的 CSS 类名。让我们说“single_popup_link”（点击我）

2.  使用以下 Jquery 代码片段：

    $(文档).ready(函数(){

    ```
    $('a.single_popup_link').click(function() {
       //Include the code to call your popup window.    
    }); 
    ```

    });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:56:56.453

尝试使用类而不是 id。给所有链接相同的类：

```
$('.try').click(function(){
    //open popup code...
}) 
```

# ruby-on-rails - Hartl 的 Rails 教程第 7 章练习 2。我一直在为错误消息创建测试

> ID：14000739
> 
> 赞同：1
> 
> 时间：2012-12-22T06:53:36.400
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我正在尝试为错误消息创建测试，这些错误消息显示是否在 Michael Hartls 的 rails 教程练习 2 的注册表单中输入了无效数据。他提供了“建议的开始”：

```
describe "signup" do

 before { visit signup_path }
 .
 .
 .
  describe "with invalid information" do
   .
   .
   .
   describe "after submission" do
     before { click_button submit }

     it { should have_selector('title', text: 'Sign up') }
     it { should have_content('error') }
   end 
```

我的想法是在“错误”之后添加一些内容。但这到目前为止还没有奏效。使用上面我得到 RSpec 错误消息：

```
1) UserPages signup with invalid information after submission it should 
 Failure/Error: it { should have_selector('error') }
   expected css "error" to return something
 # ./spec/requests/user_pages_spec.rb:37:in `block (5 levels) in <top (required)>' 
```

到目前为止，我已经完成了教程。而且我认为我的测试最多！建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:04:41.657

欢迎来到 StackOverflow 和 Rails 社区。

您正在学习编写自动化测试真是太好了。您应该尝试做的第一件事是访问您在浏览器中构建的 web 应用程序的此页面。你能触发你期望的验证错误吗？您是否在页面上看到它的容器应用了 CSS 错误类？您可以使用网络检查器/调试器工具检查所有这些。

您看到的错误意味着自动化测试希望在页面上找到一个带有 CSS 类“错误”的 DOM 元素，但没有返回任何元素。

我敢打赌，如果您自己查看该页面，您可以弄清楚为什么它没有触发验证错误并查看您期望的显示。

祝你好运

# parsing - 如何创建配方/成分解析器

> ID：14000740
> 
> 赞同：1
> 
> 时间：2012-12-22T06:53:48.447
> 
> 标签：parsing

给定一条线，例如

> > 1磅牛肉

我想提取成分。最初我**只对成分名称感兴趣**。

我看过 ruby​​s 著名的时间解析器 Chronic 并且喜欢它对正则表达式的使用。

```
 def self.scan_for_month_names(token)
scanner = {/^jan\.?(uary)?$/ => :january,
           /^feb\.?(ruary)?$/ => :february,
           /^mar\.?(ch)?$/ => :march,
           /^apr\.?(il)?$/ => :april,
           /^may$/ => :may,
           /^jun\.?e?$/ => :june,
           /^jul\.?y?$/ => :july,
           /^aug\.?(ust)?$/ => :august,
           /^sep\.?(tember)?$/ => :september,
           /^oct\.?(ober)?$/ => :october,
           /^nov\.?(ember)?$/ => :november,
           /^dec\.?(ember)?$/ => :december}
scanner.keys.each do |scanner_item|
  return Chronic::RepeaterMonthName.new(scanner[scanner_item]) if scanner_item =~ token.word
end
return nil 
```

结尾

但是在我的情况下，Id 可能必须为每种单独的成分创建 300 多个正则表达式。

我还必须考虑**香菜和芫荽叶等同义词**

我以前从未做过解析，但在这里使用正则表达式仍然是最好的方法。我想不出任何其他合理的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:42:28.247

首先，我假设成分并不总是采用以下形式`QUANTITY UNIT of INGREDIENT`- 否则，这将是一项非常微不足道的任务（只需在之后复制子字符串`of`

这是一个难题——解决方案并不简单。

我认为在这里使用正则表达式可能不是最好的方法：

*   正如你提到的，你必须为每种成分写很多表达式
*   您的可能成分列表将始终受到正则表达式列表的限制，如果不编译更多成分，您将无法检测到新成分。
*   解析某些成分将非常困难（`cheese, 1 pound (parmesan)`）

我认为[自然语言处理](https://en.wikipedia.org/wiki/Natural_language_processing)是要走的路。您有非结构化输入，但在非常有限的上下文中。

也许与直觉相反，我认为找到这种成分的最佳方法很可能是*不去*寻找它——而是寻找其他所有东西。如果你假设一条线总是有

*   一个数字（数量）
*   一个单位（磅、茶匙等）
*   一种成分

并且很容易检测数字和单位，首先识别它们*然后*提取成分应该很简单。

如果您使用词性标注器，则很容易识别相关词： `[('1', 'LS'), ('pound', 'NN'), ('of', 'IN'), ('Beef', 'NNP')]`

从那里，您可能想要使用[分类器](https://en.wikipedia.org/wiki/Supervised_learning)。为此，您需要在大量行（例如数百行）上手动标记成分。一些可能不错的功能：

*   单词在行中的位置
*   存在于预先计算的成分字典中（可能使用一些部分字符串匹配指标，如[Levenshtein 的](https://en.wikipedia.org/wiki/Levenshtein_distance)
*   词性标注器的输出
*   之前和之后的单词（如果你在单词之前有一个'of'，那么它很可能是一种成分

我敢肯定，在几行工作之后，您将能够找到无数其他人。

最后，我预计有些行会很难处理。`1 pound of parmesan cheese, 1 pound of emmentaler`: 你不得不推断第二种成分也是奶酪。

至于软件，如果你可以选择使用的语言，python 有很棒的[Natural Language Toolkit](http://nltk.org/)。我不能保证其他语言的工具包，但也许其他人会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:42:46.820

我想我会首先对每一行运行一系列正则表达式检查，并随时调整解析的文本。例如（伪代码）：

首先，检查指令：

```
/^(add|fold in|stir in|etc...)/ 
```

如果您找到了一条指令，请将其从该行中删除，设置一个标志，然后继续：

```
instruction = $1
this_line = this_line.substring(instruction.length()) 
```

如果找到指令，请检查是否有后续指令（如“和覆盖”或“并搁置”）

```
/\b(and\s)(.*)$/ 
```

如果找到，将其剥离并插入到配方的下一行之前

```
instruction = instruction.substring(0, instuction.length - $1.length - $2.length)
splice $2 into the array of lines immediately following this one 
```

接下来，也许你会检查一个介词：

```
/((?in)to\s(.+)/ 
```

如果找到，您可以使用它来检查设备名称、碗、量杯等。即使您不使用它，您也可以将它从您正在解析的字符串中删除，以改善您的匹配。

最后，真正的工作是用剩下的文本完成的：

```
Check against /^(\d+\s+(?a\s)?\w+)\s*(?of\s*)?(.+)$/ 
```

哪个应该给你`$1`包含计量单位和`$2`包含成分。

泡沫。冲洗。重复。之后，用这些信息做任何你的应用程序的魔法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-27T23:32:15.120

首先，我建议进行一些搜索，看看其他人是否已经为这个问题创建了一个足以让你使用的解决方案，而不是重新发明轮子。

例如，您可能会发现[这个项目](https://open.blogs.nytimes.com/2016/04/27/structured-ingredients-data-tagging/)很有趣。它使用机器学习来尝试解析成分短语，包括成分类型和数量。

谷歌搜索“成分解析器”时也会出现其他有趣的项目。

如果您真的决定自己编写，那么我建议您对称为“解析器生成器”的软件工具类别进行一些研究，该工具可以让您编写您想要识别的语言抽象形式（“语法”），然后将生成您选择的语言的代码，该代码将根据该语法解析文本并非常有效地识别其中的特定子结构（比数百个正则表达式更有效）火柴）。

例如，用作解析器生成器输入的语法可能如下所示：

```
// I am making up the following syntax for demonstration purposes, but it illustrates the
// sort of things that one could specify in a grammar, and is not terribly different from
// the grammar languages that real parser generators use.
//
// Note that everything in the curly braces is code to be inserted into the generated parser.
// Each such code block will be invoked when the preceding parsing rule is matched.

%declare { bool organic=false; bool dried=false; bool smoked=false; }

INGREDIENT ::= "organic" INGREDIENT          { organic=true; }
             | INGREDIENT "(" "organic" ")"  { organic=true; }
             | "dried" INGREDIENT            { dried=true; }
             | "smoked" INGREDIENT           { smoked=true; }
             | AMOUNT "of" INGREDIENT
             | INGREDIENT "(" AMOUNT ")"
             | BASE_INGREDIENT

BASE_INGREDIENT ::= ( WORD )* {
   doSomethingWithBaseIngredient(organic, dried, smoked, $BASE_INGREDIENT);
}

AMOUNT ::= NUMBER ( VOLUME_UNIT | WEIGHT_UNIT )
VOLUME_UNIT ::= "cup" | "liter"
WEIGHT_UNIT ::= "mg" | "kg" | "pound"
NUMBER ::= [0-9]+
WORD ::= [a-zA-Z]+

... and so forth. 
```

解析器生成器在运行时会将此语法作为输入，并以您想要的编程语言生成代码作为输出。此代码将根据语法解析输入文本，并在匹配某些解析规则时根据需要设置变量和/或调用您的函数。此类工具生成的解析器通常使用特殊的解析技术（通常涉及大型表、状态机等）在单次传递中非常有效地解析，而无需做任何不必要的工作，并尽可能避免回溯。

解析器生成器的一些常见示例是 lexx/yacc、bison 和 Antlr。许多其他的存在。（就个人而言，我过去在 Antlr 上取得了不错的成绩，并且特别喜欢它可以生成许多不同编程语言的解析器这一事实。）这些解析器生成器中的许多主要是供编译器编写者使用的，但确实如此并不意味着它们不能用于其他目的，例如识别食谱中成分的各种形式。

[本文](https://en.wikipedia.org/wiki/Compiler-compiler)提供解析器生成器的概述，[本文](https://en.wikipedia.org/wiki/Comparison_of_parser_generators)包含各种解析器生成器及其属性（输出语言等）的表格，以及在哪里可以找到更多信息的链接。

# ajax - Rails (3.2.9) 自动完成工作像 jQuery 组合框？

> ID：14000743
> 
> 赞同：1
> 
> 时间：2012-12-22T06:54:14.390
> 
> 标签：ajax, ruby-on-rails-3, ruby-on-rails-3.2

我的表单上有一个正在工作的自动完成字段但是我需要强制用户从列表中选择一个值（使用自动完成，用户不限于列表中的一个项目——它是一个文本字段，他们可以输入他们想要的任何内容）。[jQuery 组合框](http://jqueryui.com/autocomplete/#combobox)添加了我需要的附加功能。谁能帮我在我的表单中添加额外的功能——有没有我可以学习的教程或示例？

### 这是我到目前为止所拥有的（它正在工作 - 谢谢瑞安贝茨）

### 查看 - new.html.erb

```
 <%= f.input :widget_name, input_html: { data: { autocomplete_widget_source: widgets_list_path } } %> 
```

### 控制器

```
def list
  @widgets = Widget.order(:name).where("name like ?", "%#{params[:term]}%")
  render json: @widgets.map(&:name)
end 
```

### jQuery

```
jQuery ->
  $('#model_widget_name').autocomplete
  source: $('#model_widget_name').data('autocomplete-widget-source') 
```

我尝试使用简单的 collection_select，但由于选择列表的大小，文档太大（10,000 项）。

```
<%=  collection_select :model, :widget_id, Widget.all, :id, :name, selected: @model.widget_id  --> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:34:07.930

我想我终于找到了我正在寻找的答案。

我添加了以下内容

```
jQuery ->
  $('#model_widget_name').bind 'autocompletechange', (event, ui) ->
    if (!ui.item)
      $(this).val(''); 
```

这有意义吗？我需要更多吗？

感谢以下内容：

*   [stackoverflow](https://stackoverflow.com/questions/13096619/rails3-jquery-autocomplete-how-to-extend-select-function)上的机械鱼
*   [MCB 系统公司](http://www.mcbsys.com/techblog/2012/10/convert-a-select-drop-down-box-to-an-autocomplete-in-rails/)的马克·贝瑞

# html - 提交按钮打开新窗口并关闭父窗口？

> ID：14000745
> 
> 赞同：0
> 
> 时间：2012-12-22T06:54:40.757
> 
> 标签：html, forms, login

我基本上有一个登录表单，它会在一个 CSS 框中弹出，要求用户登录。我遇到的问题是，一旦用户单击提交，他们就会被带到 css 框中的登录窗口，因此使提交按钮打开一个空白/新窗口。

我现在遇到的问题是父窗口与用户登录详细信息保持打开状态。为了安全起见，我真的很想摆脱这个，那么有没有办法可以在启动新窗口时关闭父窗口？或者甚至设置它以便在按下提交按钮以清除css框后刷新页面？

谢谢

这是我到目前为止所得到的：

```
<form action="login.php" method="post" target="_blank"  > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:00:51.830

```
<form action="login.php" method="post" target="_top"  > 
```

这会将表单发送到父窗口，它应该完全删除登录框，并重新加载父页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:07:12.967

你也可以使用js

```
<script type="text/javascript">

function add_tab2(){
   var newTab = gBrowser.addTab('http://www.google.com');
   newTab.label = "MyTab";
   newTab.id = "MyTab";
   gBrowser.selectedTab = newTab;
   aDoc = document.getElementById("MyTab");
   // do something with aDoc here
   window.close();
}
</script> 
```

# sql - 自动递增字母数字 ID

> ID：14000749
> 
> 赞同：3
> 
> 时间：2012-12-22T06:55:26.107
> 
> 标签：sql

希望我能在这里得到一些帮助。我有以下存储过程，它将通过插入@NAME 中的第一个字母来生成字母数字 ID.. 即 `@name = Test`会产生。T001。但我试图包括前 2 个 aplha .. 即`@name = Test`生产。TE001。我试过改变`@PREFIX VARCHAR(2)`, 和 ..`SUBSTRING(@NAME, 1,2)` 但是当我这样做时。数字不会自动增加..

```
DECLARE @NEWID VARCHAR(5);
DECLARE @PREFIX VARCHAR(1);
SET @PREFIX = UPPER(SUBSTRING(@NAME, 1, 1))
SELECT @NEWID = (@PREFIX + replicate('0', 3 - len(CONVERT(VARCHAR,N.OID + 1))) +       CONVERT(VARCHAR,N.OID + 1)) FROM (
SELECT CASE WHEN MAX(T.TID) IS null then 0 else MAX(T.TID) end as OID FROM (
SELECT SUBSTRING(ID, 1, 1) as PRE_FIX,SUBSTRING(ID, 2, LEN(ID)) as TID FROM Testing
) AS T WHERE T.PRE_FIX = @PREFIX
) AS N 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:04:08.980

我认为这应该可行：-

```
DECLARE @NEWID VARCHAR(5);
DECLARE @PREFIX VARCHAR(2);
SET @PREFIX = UPPER(SUBSTRING(@NAME, 1, 2))
SELECT @NEWID = (@PREFIX + replicate('0', 3 - len(CONVERT(VARCHAR,N.OID + 1))) +       CONVERT(VARCHAR,N.OID + 1)) FROM (
SELECT CASE WHEN MAX(T.TID) IS null then 0 else MAX(T.TID) end as OID FROM (
SELECT SUBSTRING(ID, 1, 2) as PRE_FIX,SUBSTRING(ID, 2, LEN(ID)) as TID FROM Testing
) AS T WHERE T.PRE_FIX = @PREFIX
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:21:52.750

尝试这个

```
DECLARE @NEWID VARCHAR(5);
DECLARE @PREFIX VARCHAR(2);
SET @PREFIX = UPPER(SUBSTRING(@NAME, 1, 2))
SELECT @NEWID = (@PREFIX + REPLICATE('0', 3 - LEN(CONVERT(VARCHAR, N.OID + 1))) + CONVERT(VARCHAR,N.OID + 1)) 
FROM (
      SELECT CASE WHEN MAX(T.TID) IS NULL
                  THEN 0
                  ELSE MAX(T.TID) END AS OID 
      FROM (
            SELECT SUBSTRING(ID, 1, 2) AS PRE_FIX, SUBSTRING(ID, 3, LEN(ID)) AS TID 
            FROM Testing
            ) AS T 
      WHERE T.PRE_FIX = @PREFIX
      ) AS N 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/0fe7a/2/0)上的演示[](http://sqlfiddle.com/#!3/0fe7a/2/0)

# javascript - jquery ui 日期选择器。对象中的选项。内部函数中的“this”不引用 obj

> ID：14000751
> 
> 赞同：0
> 
> 时间：2012-12-22T06:55:49.913
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

jquery ui 日期选择器：

我想像这样将选项作为 obj 传递：

```
 obj = {
     beforeShow: function(input) {
         console.log(this);   
     }
  } 
```

当我这样调用 : 时`obj.beforeShow()`，'this' 打印为我在顶部定义的 obj。什么时候，我这样称呼：`$("#somelement").datepicker(obj);`'this' 打印为 jquery 对象`#someelement`。

我的要求是：

我在按钮面板中添加了自定义下拉菜单。它们包含“昨天，上个月”。相同的代码用于将此选择框添加到事件的函数中`beforeShow`，和`onChangeMonthYear`。这些事件在第一次显示时自动调用，`datepicker`当月、年发生变化时。但是，我没有发现任何在“日期”更改时应该触发的事件（比如从那个月的 20 日到 22 日）。所以，我想`beforeShow`通过调用来调用该对象的事件`this.beforeShow()`。但是，“this”指的是 html 元素。实际上，我通过遵循一些常规方法（例如直接使用对象变量（obj）而不是“this”）使其工作，但想知道正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:59:08.813

```
 obj = {
     beforeShow: jQuery.proxy(function(input) {
         console.log(this);   
     }, this)
  } 
```

试试上面的代码。

**编辑：**解释

这是一个范围问题。当您在另一个内部定义一个函数时，`this`内部函数内部将引用内部函数。如果你想`this`在内部函数内部引用其他对象而不是外部函数，那么你可以这样做。

```
 var objectX = function(){};
 obj = {
     beforeShow: jQuery.proxy(function(input) {
         console.log(this);   
     }, objectX)
  } 
```

*参考第一个代码片段：* jQuery.proxy 将做的是将`this`内部内部函数更改为引用外部函数。还有其他方法可以做到这一点。下面列出了一种这样的方法。`this`当您出于某种原因希望内部函数内部引用内部函数时，这将派上用场。

```
 var _self = this;
 obj = {
     beforeShow: function(input) {
         console.log(_self);
     }
  } 
```

# android - 自动在 assets 文件夹中创建和删除文件

> ID：14000752
> 
> 赞同：5
> 
> 时间：2012-12-22T06:55:51.610
> 
> 标签：android, android-file, android-assets

> **可能重复：**
> [我们如何在android运行时从资产文件夹中删除文件？](https://stackoverflow.com/questions/4398523/how-we-can-remove-a-file-from-the-assets-folder-at-runtime-in-android)

是否可以在应用程序运行时在资产文件夹中创建一个文件，并在应用程序停止时删除相同的文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T07:07:08.300

对于资产，您仅具有读取文件权限。所以你不能在资产文件夹中创建/删除文件。以下是应用于资产文件夹的限制。

```
1)  Only Read Permission available for this folder.

2)  File size for placing inside the assets limit to 10 MB.If you want to place     
    then the larger file should be placed as chunk.

3)  You can use this folder, for placing files like database file, font file etc... 
```

不要与之抗争。这不是使用资产文件夹处理文件的正确方法。您可以使用适合创建和删除文件的位置的 SD 卡

您可以使用标准方法通过应用程序将文件放入 SD 卡，

```
 Environment.getExternalStoragePublicDirectory("filetype"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T07:07:11.697

apk 是只读的，并且 assets/ 文件夹在运行时不可修改，这听起来像是您可能正在寻找的东西。检查这个[问题](https://stackoverflow.com/questions/4398523/how-we-can-remove-a-file-from-the-assets-folder-at-runtime-in-android)

# android - Android表格布局对齐

> ID：14000755
> 
> 赞同：11
> 
> 时间：2012-12-22T06:56:42.793
> 
> 标签：android, alignment, android-tablelayout

我正在使用表格布局来显示数据，如下所示。 ![在此处输入图像描述](../Images/e798c5bc628f997460a6a575ff0f35c7.png)

**我想做的事 ？**

我希望第二列中的文本向左对齐，并且文本应该换行并显示在下一行并溢出，如您在图像中看到的那样。

**代码：**

```
 <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <ImageView
                android:id="@+id/place_category_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:contentDescription="ss"
                android:paddingRight="10dp"
                android:src="@drawable/icon_category"
                android:textAlignment="textStart" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_gravity="center"
                android:text="230 kms"
                android:textSize="16sp" >
            </TextView>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <ImageView
                android:id="@+id/place_category_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:contentDescription="ss"
                android:paddingRight="10dp"
                android:src="@drawable/icon_category"
                android:textAlignment="textStart" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_gravity="center"
                android:text="Hill Station, Wild Life"
                android:textSize="16sp" >
            </TextView>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <ImageView
                android:id="@+id/place_category_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:contentDescription="ss"
                android:paddingRight="10dp"
                android:src="@drawable/icon_category"
                android:textAlignment="textStart" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_gravity="center"
                android:text="Summer 23-40°C, Winter 10-32°C"
                android:textSize="16sp" >
            </TextView>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <ImageView
                android:id="@+id/place_category_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:contentDescription="ss"
                android:paddingRight="10dp"
                android:src="@drawable/icon_category"
                android:textAlignment="textStart" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_gravity="center"
                android:text="Tippus Drop, Tippus Summer Residence, Brahmashram, Cycling, Paragliding"
                android:textSize="16sp" >
            </TextView>
        </TableRow>
    </TableLayout> 
```

它应该是什么样子

![在此处输入图像描述](../Images/8600b42dd727c3d722d89005aad385da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:43:28.320

由于 a[`TableRow`](http://developer.android.com/reference/android/widget/TableRow.html)几乎是水平方向的`LinearLayout`，因此只需使用权重的原理来`TextView`填充 之后的所有空间`ImageView`。这意味着您必须将行更改为如下所示：

```
 <!-- no need to set width/height as those are implicitly enforced -->
    <TableRow
        android:id="@+id/tableRow2"
        android:paddingBottom="10dp" >

        <ImageView
            android:id="@+id/place_category_icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="ss"
            android:paddingRight="10dp"
            android:src="@drawable/icon_category" />

        <!-- width of '0' and weight of '1' will make this view fill up all remaining space -->
        <TextView
            android:id="@+id/textView2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_gravity="center_vertical"
            android:text="230 kms"
            android:textSize="16sp" />

    </TableRow> 
```

我还删除/更改了一些多余的属性。请注意，我只是直接在浏览器中输入的 - 可能需要奇怪的错字或调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:42:41.903

我的猜测 - 改变 layout_width 并摆脱重力：

```
 <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            ...
            >
        </TextView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:50:08.440

我能想到的最简单的方法是用这样的包装每个`TableRow`内容`LinearLayout`：

```
<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >

                <ImageView
                    android:id="@+id/place_category_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:contentDescription="ss"
                    android:paddingRight="10dp"
                    android:src="@drawable/ic_launcher" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_gravity="center"
                    android:text="230 kms"
                    android:textSize="16sp" >
                </TextView>
            </LinearLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >

                <ImageView
                    android:id="@+id/place_category_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:contentDescription="ss"
                    android:paddingRight="10dp"
                    android:src="@drawable/ic_launcher" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_gravity="center"
                    android:text="Hill Station, Wild Life"
                    android:textSize="16sp" >
                </TextView>
            </LinearLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >

                <ImageView
                    android:id="@+id/place_category_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:contentDescription="ss"
                    android:paddingRight="10dp"
                    android:src="@drawable/ic_launcher" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_gravity="center"
                    android:text="Summer 23-40°C, Winter 10-32°C"
                    android:textSize="16sp" >
                </TextView>
            </LinearLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="10dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >

                <ImageView
                    android:id="@+id/place_category_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:contentDescription="ss"
                    android:paddingRight="10dp"
                    android:src="@drawable/ic_launcher" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_gravity="center"
                    android:text="Tippus Drop, Tippus Summer Residence, Brahmashram, Cycling, Paragliding"
                    android:textSize="16sp" >
                </TextView>
            </LinearLayout>
        </TableRow>
    </TableLayout> 
```

这是结果：

![布局](../Images/5751520c4fdbd12eab0485b7dd8fe0fd.png)

希望我正确理解了您的要求。

# cuda - 你能将推力::device_ptr 传递给推力::元组吗？

> ID：14000758
> 
> 赞同：-2
> 
> 时间：2012-12-22T06:57:07.197
> 
> 标签：cuda, thrust

以下代码是否有效：

```
typedef thrust::device_ptr<int> IntIterator;
typedef thrust::device_ptr<float> FloatIterator;
typedef thrust::tuple<IntIterator,FloatIterator> IteratorTuple;
typedef thrust::zip_iterator<IteratorTuple> myZipIterator; 
```

我知道下面是正确的，但在上述情况下，我们使用的是指针：

```
 typedef thrust::device_vector<float>::iterator       FloatIterator;  
typedef thrust::tuple<FloatIterator, FloatIterator, FloatIterator> FloatIteratorTuple;           
 typedef thrust::zip_iterator<FloatIteratorTuple>                   Float3Iterator; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:57:44.110

是的，您可以，并且可以使用[您之前的问题](https://stackoverflow.com/questions/13988603/applying-reduction-operation-using-thrust-subject-to-a-boolean-condition)。此外，阅读编译器错误消息，我猜那`thrust::device_vector<type>::iterator`是`thrust::device_ptr<type>`.

# linux - 如何在 pwd 中找到所有包含唯一关键字的文件，例如“我有一个重要的工作”？在 unix/linux 中？

> ID：14000759
> 
> 赞同：1
> 
> 时间：2012-12-22T06:57:12.677
> 
> 标签：linux, unix, centos, ubuntu-12.04

查找唯一关键字或字符串 find 。“我有一个重要的工作”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:17:41.807

在`pwd`我假设你的意思是当前工作目录。

```
grep -l "I have an important work" * 
```

# oop - What does 'low in coupling and high in cohesion' mean

> ID：14000762
> 
> 赞同：206
> 
> 时间：2012-12-22T06:57:35.280
> 
> 标签：oop, ooad

I have problems understanding the statement `low in coupling and high in cohesion`. I have googled and read a lot about this, but still finding it hard to understand.

To what I understand is `High cohesion` means, that we should have classes that are specialized to perform a particular function. Hope this is correct? Like a credit card validation class, which is specialized to validate credit cards only.

And still don't understand what low Coupling means?

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2012-12-22T07:32:01.190

What I believe is this:

Cohesion refers to the degree to which the elements of a module/class belong together, it is suggested that the related code should be close to each other, so we should strive for high cohesion and bind all related code together as close as possible. It has to do with the elements **within** the module/class.

Coupling refers to the degree to which the different modules/classes depend on each other, it is suggested that all modules should be independent as far as possible, that's why low coupling. It has to do with the elements **among** different modules/classes.

To visualize the whole picture will be helpful:

[![enter image description here](../Images/ef57bc99f8002ab4fc7b7015e1db6181.png)](https://i.stack.imgur.com/zhZv2.png)

The screenshot was taken from [Coursera](https://www.coursera.org/lecture/object-oriented-design/1-3-1-coupling-and-cohesion-q8wGt).

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-04-08T19:32:32.380

**Cohesion** in software engineering, as in real life, is how much the elements consisting a whole(in our case let's say a class) can be said that they actually belong together. Thus, it is a measure of how strongly related each piece of functionality expressed by the source code of a software module is.

One way of looking at cohesion in terms of OO is if the methods in the class are using any of the private attributes.

Now the discussion is bigger than this but **High Cohesion** (or the cohesion's best type - the functional cohesion) is when parts of a module are grouped because they all contribute to a single well-defined task of the module.

**Coupling** in simple words, is how much one component (again, imagine a class, although not necessarily) knows about the inner workings or inner elements of another one, i.e. how much knowledge it has of the other component.

**Loose coupling** is a method of interconnecting the components in a system or network so that those components, depend on each other to the least extent practically possible…</p>

[I wrote a blog post](https://bojanskr.medium.com/high-cohesion-loose-coupling-1731b1f74bf6) about this. It discusses all this in much detail, with examples etc. It also explains the benefits of why you should follow these principles.

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-02-10T08:09:54.583

In software design **high cohesion** means that class should do one thing and one thing very well. High cohesion is closely related to [Single responsibility principle](https://en.wikipedia.org/wiki/Single_responsibility_principle).

**Low coupling** suggest that class should have least possible dependencies. Also, dependencies that must exist should be weak dependencies - prefer dependency on interface rather than dependency on concrete class, or prefer composition over inheritance .

High Cohesion and low coupling give us better designed code that is easier to maintain.

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2018-04-24T11:56:21.337

*Short and clear answer*

*   **High cohesion**: Elements within one class/module should functionally belong together and do one particular thing.
*   **Loose coupling**: Among different classes/modules should be minimal dependency.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-05-07T12:42:21.200

Low coupling is in the context of two or many modules. If a change in one module results in many changes in other module then they are said to be highly coupled. This is where interface based programming helps. Any change within the module will not impact the other module as the interface (the mean of interaction ) between them has not changed.

High cohesion- Put the similar things together. So a class should have method or behaviors to do related job. Just to give an exaggerated bad example: An implementation of List interface should not have operation related to String. String class should have methods, fields which is relevant for String and similarly, the implementation of List should have corresponding things.

Hope that helps.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-30T03:25:54.930

**Cohesion** - how closely related everything is with one another.
**Coupling** - how everything is connected to one another.

Let's take an example - We want to design a self-driving car.

(1) We need the motor to run properly.

(2) We need the car to drive on its own.

All of the classes and functions in (1) starting the motor and making it run work great together, but do not help the car steer. So we place those classes behind an Engine Controller.

All of the classes and functions in (2) work great to make the car steer, accelerate and brake. They do not help the car start or send gasoline to the pistons. So we place these classes behind its own Driving Controller.

These controllers are used to communicate with all of the classes and functions that are available. The controllers then communicate only with each other. This means I can't call a function in the piston class from the gas pedal class to make the car go faster.

The pedal class has to ask the Driving Controller to talk to the Engine Controller which then tells the piston class to go faster. This allows us programmers to be able to find issues and allows us to combine large programs without worrying. This is because the code was all working behind the controller.

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-22T07:03:24.627

Long story short, low coupling as I understood it meant components can be swapped out without affecting the proper functioning of a system. Basicaly modulize your system into functioning components that can be updated individually without breaking the system

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-06-29T20:22:36.983

Do you have a smart phone? Is there one big app or lots of little ones? Does one app reply upon another? Can you use one app while installing, updating, and/or uninstalling another? That each app is self-contained is high cohesion. That each app is independent of the others is low coupling. DevOps favours this architecture because it means you can do discrete continuous deployment without disrupting the system entire.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-04-30T09:31:05.877

Take the example of an old PC motherboard.

*   Mouse had its own PS/2 port.
*   Printer had its own Printer port.
*   Monitor had its own VGA port.

This meant that a particular port was meant only for a particular device, and for none other.

This is **Strong / High Coupling**

Since a mouse is used only for operating the cursor and related functionalities, a keyboard for typing keys, etc i.e they perform only the task they are intended for, this is **High Cohesion**

If a mouse had a few buttons 'a' 'b' 'c' to enter, then it is doing more than what it should, since a keyboard is already performing them, this is **Low Cohesion**

The outdated usage of exclusive ports was thankfully replaced by a standard (interface) we call **USB**. This is **Loose / Low Coupling**

Looking at these physical attributes, it looks obvious that this is how it is supposed to be, but while writing software it is very easy to lose track of what functionality is to be put where, etc. and hence as a reminder, in everything in life, always stick to:

***'High Cohesion and Loose Coupling'***

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-05-23T16:37:54.310

Inheritance or generalization is an example of high coupling (i.e. high interdependence). What I meant by this is that in inheritance often the parent class defines base functionalities that is used by its child class and change in methods of parent class directly impact its child classes. Hence we can say that there is a greater degree of interdependence between classes.

Realization or using interface is an example of high cohesion (i.e. low interdependence). What this means is that an interface put forward a contract for any class that implements it but each class has the right to implement methods declared in interface in its own way and changes in method declared in one class doesn't affect any other class.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-09-03T15:53:12.457

Metaphorically, if your cat *barks*, it has **poor** cohesion, and if your dog *needs* a cat by his side to bark, it is **highly** coupled.

"Dogs bark and cats purr, if they barf your pull request will be rejected"

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-01-22T10:58:55.133

Low Coupling and High Cohesion is a recommended phenomenon.

Coupling means to what extent various modules are interdependent and how the other modules are affected on changing some/considerable functionality of a module. Low coupling is emphasized as the dependency has to be maintained low so that very least/negligible changes are made to other modules.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-16T12:35:49.877

An example might be helpful. Imagine a system which generates data and puts it into a data store, either a file on disk or a database.

High Cohesion can be achieved by separate the data store code from the data production code. (and in fact separating the disk storage from the database storage).

Low Coupling can be achieved by making sure that the data production doesn't have any unnecessary knowledge of the data store (e.g. doesn't ask the data store about filenames or db connections).

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-08-22T17:31:27.683

Here is an answer from a bit of an abstract, graph theoretic angle:

Let's simplify the problem by only looking at (directed) dependency graphs between stateful objects.

An extremely simple answer can be illustrated by considering two [limiting cases](https://en.m.wikipedia.org/wiki/Limiting_case_(mathematics)) of dependency graphs:

**The 1st limiting case**: a [cluster graphs](https://en.m.wikipedia.org/wiki/Cluster_graph) .

A cluster graph is the most perfect realisation of a high cohesion and low coupling (given a set of cluster sizes) dependency graph.

The dependence between clusters is maximal (fully connected), and inter cluster dependence is minimal (zero).

This is an abstract illustration of the answer in one of the [limiting cases](https://en.m.wikipedia.org/wiki/Limiting_case_(mathematics)).

**The 2nd limiting case** is a fully connected graph, where everything depends on everything.

Reality is somewhere in between, the closer to the cluster graph the better, in my humble understanding.

**From another point of view**: when looking at a directed dependency graph, ideally it should be acyclic, if not then cycles form the smallest clusters/components.

One step up/down the hierarchy corresponds to "one instance" of loose coupling, tight cohesion in a software but it is possible to view this loose coupling/tight cohesion principle as a repeating phenomena at different depths of an acyclic directed graph (or on one of its spanning tree's).

Such decomposition of a system into a hierarchy helps to beat exponential complexity (say each cluster has 10 elements). Then at 6 layers it's already 1 million objects:

10 clusters form 1 supercluster, 10 superclusters form 1 hypercluster and so on ... without the concept of tight cohesion, loose coupling, such a hierarchical architecture would not be possible.

So this might be the real importance of the story and not just the high cohesion low coupling within two layers only. The real importance becomes clear when considering higher level abstractions and their interactions.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-02-17T07:33:10.620

I think you have red so many definitions but in the case you still have doubts or In case you are new to programming and want to go deep into this then I will suggest you to watch this video, [https://youtu.be/HpJTGW9AwX0](https://youtu.be/HpJTGW9AwX0) It's just reference to get more info about polymorphism... Hope you get better understanding with this

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-02-19T06:35:40.773

Low Coupling:-- Will keep it very simple. If you change your module how does it impact other modules.

Example:- If your service API is exposed as JAR, any change to method signature will break calling API (High/Tight coupling).

If your module and other module communicate via async messages. As long as you get messages, your method change signature will be local to your module (Low coupling).

Off-course if there is change in message format, calling client will need to make some change.

# webview - Ctrl+F 在 JavaFX WebView 中不起作用

> ID：14000763
> 
> 赞同：1
> 
> 时间：2012-12-22T06:57:39.217
> 
> 标签：webview, javafx-2, javafx

在 JavaFX WebView 我可以查看查看 html 页面。虽然查找单词的快捷方式在那里不起作用（`Ctrl`+ `F`）。

如何启用`Ctrl`+`F`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:14:31.570

WebView 不支持此功能。

我为此提出了[功能要求](http://javafx-jira.kenai.com/browse/RT-23383)。该功能未计划实施。如果你愿意，你可以投票给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T22:44:33.293

您可以自己实现查找功能。

一个示例是在您的 FX 场景中创建一个新的 HBox，当它检测到带有用于输入的 TextField 的 CTRL+F 事件时打开该 HBox。在此之后，您需要进行设置，以便每次在 TextField 中键入时，它都会触发一个事件到一个方法，在该方法中您实现一些 Javascript，该 Javascript 根据您输入的内容在当前页面的 DOM 中进行搜索以查找. 您还可以使您的脚本突出显示它找到的单词，以及其他与查找相关的任务。

# http - restlet有多受欢迎？

> ID：14000772
> 
> 赞同：11
> 
> 时间：2012-12-22T06:58:40.003
> 
> 标签：http, restlet

我正在为宁静的服务选择一个框架。Restlet 看起来很有希望。但是，我想选择一些足够主流的东西，它不会很快失去支持/开发。我知道restlet已经存在了很多年。但是，我想知道它是否足够受欢迎。我的问题是，

1.  有大牌公司在用吗？
2.  默认的 http 服务器是否足以用于生产？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-23T13:58:10.907

Restlet 框架自 2005 年以来一直可用，当时它是第一个用于 Java 的 RESTful Web 框架。它支持 JAX-RS API，但它自己的 Restlet API 从一开始就是客户端和服务器端，更加全面和可扩展。我们可以根据社区反馈自由进行创新，而无需经历冗长的 JCP 标准化流程。

此外，我们刚刚在去年 9 月发布了“Restlet in Action”一书及其 2.1 版。我们的内部连接器是完全异步的并且基于 NIO，即使它还没有准备好进行大量生产，我们也会不断地稳定它（使用 Jetty 连接器或 Java EE 容器，而无需更改您的 Restlet 应用程序）。

它对 Java SE/EE、OSGi、Android、GAE 和 GWT 的一致支持是独一无二的。JS（Node.js + AJAX）的移植也在进行中。我们还开始了 2.2 版的工作，第一个里程碑已发布（完全支持 Java 6，基于最终规范的 OAuth 2.0 扩展等）。

在参考方面，我们有很多大公司在使用它，包括 LinkedIn（参见他们的 GLU 开源项目）、IBM、NVidia、ForgeRock、NASA、Sonatype、Apache Camel、Mule ESB 等。Google 也在内部使用它。在这里查看一些报价： [http ://restlet.com/discover/quotes](http://restlet.com/discover/quotes)

1 月份，我们将推出一个新的社区网站以及 APISpark，这是一个直接基于 Restlet 框架 (PaaS) 创建、托管、管理和使用 Web API 的一体化平台，因此该项目是活跃的有一个令人兴奋的未来！

此致，

杰罗姆·卢维尔

PS：我是 Restlet 框架的创建者和首席开发人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T07:06:26.680

你能得到的最主流的是`Jersey`. 它是java中rest的官方实现。Restlet 在 Jersey 之前出现了。但随后泽西超越了他们（以我的拙见）。我在严肃的项目中使用了 Jersey 和 Restlet。他们都很好。但是，您会在 Jersey 上找到更多支持、更多书籍和更多示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T07:08:33.603

这是关于Java的吗？在这种情况下，JAX-RS 是执行此操作的绝佳新 API。最好的书是[带有 JAX-RS 的 Restful Java](http://shop.oreilly.com/product/9780596158057.do)。我最喜欢的实现是泽西岛，但也有其他的有自己独特的功能。如果您不使用它们的独特功能（无论如何都是次要的），所有 JAX-RS 实现都是兼容的。这本书解释了核心 API、REST 理念，以及不同实现所特有的一些特性。这是一本极好的书。我喜欢这篇介绍，作者在其中讲述了他如何习惯于传统的远程过程调用（如 SOAP、WCF 和普通的 OO 语义），但随后看到 REST 原则的光芒更简单、更优雅。

我使用 Tomcat 作为 HTTP 服务器（servlet 容器）。它是轻量级的，并且是 Amazon Beanstalk 使用的（您只需将应用程序、WAR 文件上传到它，它就可以正常工作）。您还可以使用支持更多 JavaEE 功能的 GlassFish，或者将 Apache 用于静态页面和其他内容，并将 REST 请求转发到 Tomcat/GlassFish。

JAX-RS 令人讨厌的地方在于它非常强大和简单，以至于您很想编写符合意识形态的 REST 服务。不幸的是，javascript 不能使用许多 REST 功能（设置 Accept 标头、调用除 GET/POST 之外的任何内容等），但这没什么大不了的。

如果您的客户端是 Java，Jersey 还有一个出色的客户端 Java API，它反映 JAX-RS 并重用相同的带注释的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T07:04:15.847

从[文章](http://www.infoq.com/articles/restlet-louvel-interview)

> Servlet API 于 1998 年发布，其核心设计从那时起没有发生重大变化。它是最成功的 Java EE API 之一，但它存在一些设计缺陷和限制。例如，URI 模式和处理程序之间的映射受到限制并集中在一个配置文件中。此外，它将套接字流的控制权直接交给了应用程序开发人员，从而阻止了 Servlet 容器的一些 IO 优化，例如完全使用 NIO 功能。最后，它不能很好地支持缓存、内容协商和内容压缩等 HTTP 功能，这给开发人员带来了太多痛苦，并阻止他们专注于他们的应用程序特定代码。
> 
> 另一个主要问题是 Java EE 堆栈中缺少现代 HTTP 客户端 API。JDK 的 HttpURLConnection 类很难使用，并且有太多的 HTTP 特性不受支持，比如表达客户端对内容协商的偏好。
> 
> 人们经常依赖第三方 HTTP 客户端 API 来解决这些限制。同样，HttpURLConnection 不支持 NIO。
> 
> 2005 年，我看到了超越所有这些限制的机会，并根据 REST 原则设计了一个全新的 API。我们第一次拥有一个统一客户端和服务器端 Web 应用程序的 API，一个完全支持 NIO 的 API，以及一个允许开发人员以编程方式控制其容器、连接器和部署的应用程序的 API，而无需一直依赖 XML描述符。

# javascript - 使用钛一次又一次加载旧数据库

> ID：14000776
> 
> 赞同：1
> 
> 时间：2012-12-22T07:00:19.853
> 
> 标签：javascript, mobile, titanium

嗨，我遇到了一个奇怪的问题。我在 firefox 中使用 sqlite manager 更新了数据库，并替换了旧的并清理了我的项目，但它再次加载了旧的数据库

这是我的代码：

```
 Ti.Database.install('scimed.sqlite', 'scimed');
            var db = Ti.Database.open('scimed'); 
```

谁能告诉我这是什么问题

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:57:23.053

您的旧数据库已加载到您的设备/模拟器中。

使用时`Ti.Database.install('scimed.sqlite', 'scimed');`，根据[Titanium 文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Database-method-install)，如果 .sqlite 文件已经复制到设备/模拟器的数据库路径中，则只会打开它。

您必须删除项目中的 .sqlite 文件并将其替换为新数据库。

然后，清理您的项目，在您的设备/模拟器中删除您的应用程序，然后重新构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:44:21.993

您需要从您测试的模拟器或设备中删除项目/应用程序。数据库仍然存在，您无法在其上安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T10:25:08.330

如果您要在设备上安装，请先手动卸载应用程序，然后清理并构建应用程序以安装在设备上。

# php - 使用 php 从我的数据库中显示相关记录

> ID：14000782
> 
> 赞同：1
> 
> 时间：2012-12-22T07:00:59.900
> 
> 标签：php, html, mysql

我想根据其他表中的外键显示与特定主键相关的记录。如何使用 php 在其他表中显示该主键的记录？

例如：

```
table1

primary key 1: plate#1
primary key 2: plate#2
primary key 3: plate#3

table2

primary key 1: destination|route|revenue|plate# 1
primary key 2: destination|route|revenue|plate# 3

table3

primary key 1: diesel price|number of liters|plate# 1

primary key 2: diesel price|number of liters|plate# 3 
```

我已经创建了一个页面，该页面将显示`table1`. 我想在创建数据库时显示与数据相关的数据，`table1`它们已经相互关联。我的问题只是显示与. 我想为 just 、另一个 for等显示记录。`table2``table1``table1``plate#1``plate#2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:54:22.913

您可能正在寻找连接表以获得最终结果。Join 允许您基本上将表合并在一起并根据选择获得单个结果。Google php mysql join table 并查看一些示例。这是给你的一个：[加入表格](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:21:36.023

这是一个粗略的例子：

```
<?php
  $truck_id = mysql_real_escape_string($_GET['truck_id']);

 $sql_PK = "SELECT * FROM table1 WHERE id = '{$truck_id}'";
 $res_PK = mysql_query($sql_PK);
 $row_PK = mysql_fetch_assoc($res_PK);

 $truck_plate = $row_PK['plate'];

$truck_plate = mysql_real_escape_string($truck_plate);

$sql = "SELECT table2.plate, table2.destination, table2.route, table3.plate, table3.diesel_price, table3.num_of_liters FROM table2, table3 WHERE table2.plate = table3.plate AND table2.plate = '{$truck_plate}'";
$res = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_array($res);

    // this will give you the details from the following

        //TABLE2
        // plate
        // destination
        // route

        //TABLE3
        // plate
        // diesel_price
        // num_of_liters

?> 
```

有几件重要的事情要记住。首先是养成在数据库中命名字段不带空格并使用 _ 的习惯。所以柴油价格是柴油价格等。其次是确保您保护自己免受任何注射，就像我在这里使用 mysql_real_escape_string 显示的那样

所以当有人点击 truckdetails.php?plate=mrtchi 时，它会根据车牌号查询数据库：mrtchi

# android - 当设备中没有任何默认菜单按钮时，不显示任何菜单按钮标志

> ID：14000784
> 
> 赞同：2
> 
> 时间：2012-12-22T07:01:15.990
> 
> 标签：android, menu, android-emulator, menuitem

我正在开发一个应用程序，该应用程序具有`Settings`当用户单击选项菜单快捷方式时打开的屏幕，该快捷方式在设备上显示为默认按钮或任何其他标志。

当设备中有默认菜单按钮但在设备中没有任何默认菜单按钮时没有获得任何菜单选项标志时，它工作正常。

我的代码如下：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_setting, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.btnSettingMenu:
        Intent intent = new Intent(MainActivity.this,
                RegisterActivity.class);
        intent.putExtra("From", "MainActivity");
        startActivity(intent);
        break;

    default:
        break;
    }

    return true;
} 
```

我参考了[这里](https://stackoverflow.com/questions/8264076/android-menu-button-on-4-0-devices)的链接，但无法解决我的问题。

**我想补充的一点是：**当我按下`PageUp`或时，我在模拟器中获得了菜单选项`F2`。

但是，当设备没有默认菜单按钮时，它不会以任何其他指示显示为三个点或其他方式。

**我的问题：**如果用户在 Nexus 7 等真实设备中没有找到选项菜单登录，他如何进入我的设置屏幕？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:09:29.747

为了在 中显示菜单图标`above 4.0 Devices`：

如果您已声明`android:targetSdkVersion="xx"`

如果不需要，请删除它。

**或者**

如果要声明它，则将值 0f 设置为`xx`低于**14**

```
i.e.android:targetSdkVersion="13". 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:05:22.283

尝试这个：

1.  请在您的 java 类中删除这两行。

    ```
    // hide titlebar of application
    // must be before setting the layout
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // hide statusbar of Android
    // could also be done later
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    ```

2.  请在您的 AndroidManifest.xml 中删除这两行。

    要隐藏应用程序的标题栏，您可以使用预定义的样式

    ```
    android:theme=”@android:style/Theme.NoTitleBar”. 
    ```

    或者如果您还想隐藏应用程序的状态栏，请使用

    ```
    android:theme=”@android:style/Theme.NoTitleBar.Fullscreen”. 
    ```

# java - 关于计时器实用程序

> ID：14000787
> 
> 赞同：0
> 
> 时间：2012-12-22T07:01:45.607
> 
> 标签：java, timer

我正在开发一个将安排任务的课程，如果该任务花费了 2 分钟以上，那么我将显示一条消息，指出任务已强制完成，因为任务花费了 2 分钟以上，如果任务在 2 分钟内完成或在此之前，我将显示任务在 2 分钟之前完成的消息，现在的挑战是我想要一个虚拟任务让我们先说一个循环来测试它，请告知如何实现，下面是我的代码试过了。。

```
import java.util.Timer;
import java.util.TimerTask;

public class Reminder {
    Timer timer;

    public Reminder(int seconds) {
        timer = new Timer();
        timer.schedule(new RemindTask(), seconds*1000);
   }

    class RemindTask extends TimerTask { // Nested Class
        public void run() {
             //hOW TO SET THE any kind of task which takes more than 5 minutes any loop or any sort of thing
        //   If elapsed time is > 50 minutes, something is not right
            System.out.format("Time's up since it takes more than 5 minutes....!%n");
            timer.cancel(); //Terminate the timer thread
        }
    }

    public static void main(String args[]) {
        new Reminder(5);
        System.out.format("Task scheduled.%n");

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:03:55.880

这将使您入门：

```
public abstract class LimitedTask {
    private final long timeOut;
    private final Timer timer;
    private final AtomicBoolean flag;

    protected LimitedTask(long timeOut) {
        this.timeOut = timeOut;
        this.timer = new Timer("Limiter",true);
        this.flag = new AtomicBoolean(false);
    }

    public void execute(){

       //---worker--
       final Thread runner = new Thread(new Runnable() {
           @Override
           public void run() {
               try{
                   doTaskWork();
               }catch (Exception e){
                   e.printStackTrace();
               }finally {
                   if(flag.compareAndSet(false,true)){
                       timer.cancel();
                       onFinish(false);
                   }
               }
           }
       },"Runner");

       runner.setDaemon(true);
       runner.start();

       //--timer--
       this.timer.schedule(new TimerTask() {
           @Override
           public void run() {

               runner.interrupt();

               if(flag.compareAndSet(false,true)){
                   onFinish(true);
               }
           }
       },this.timeOut);
    }

    public abstract void onFinish(boolean timedOut);

    public abstract void doTaskWork() throws Exception;

} 
```

测试实现：

```
public class TestTask extends LimitedTask {
    public TestTask() {
        super(10000);
    }

    @Override
    public void onFinish(boolean timedOut) {
        System.out.println(timedOut ? "Task timed out" : "Task completed");
    }

    @Override
    public void doTaskWork() throws Exception {
        for (int i = 0; i <100 ; i++){
            Thread.sleep(1000);
        }
    }
} 
```

跑：

```
TestTask t = new TestTask();
t.execute(); 
```

# php - 获得多个帖子ID wordpress

> ID：14000790
> 
> 赞同：3
> 
> 时间：2012-12-22T07:02:29.260
> 
> 标签：php, jquery, wordpress

我正在为我的主题制作投票系统

它在 single.php 中运行良好

但是当我将它保存在 index.php 中时，它只考虑第一篇文章的 id 并且休息不起作用

我认为它不处理多个帖子ID

这是完整的代码

设置 cookie，使用 jQuery 调用 Ajax 操作

```
 <script type="text/javascript">
/* <![CDATA[ */ 
(function($) {
function setCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

$("#vote").not(".disabled").click(function() {
    var el = $(this);
    el.html('<span id="loader"></span>');
    var nonce = $("input#voting_nonce").val();
    var data = {
        action: 'add_votes_options',
        nonce: nonce,
        postid: '<?php echo $post->ID; ?>',
        ip: '<?php echo $_SERVER['REMOTE_ADDR']; ?>'            
    };
    $.post('<?php echo admin_url('admin-ajax.php'); ?>', data,
    function(response){
        if(response!="-1") {
            el.html("VOTED").unbind("click");
            if(response=="null") {
                alert("A vote has already been registered to this IP address.");
            } else {
                $("#votecounter").html(response);
                alert("Thanks for your vote.");
            }
            var cookie = getCookie("better_votes");
            if(!cookie) {
                var newcookie = "<?php echo $post->ID; ?>";
            } else {
                var newcookie = cookie + ",<?php echo $post->ID; ?>";
            }
            setCookie("better_votes", newcookie, 365);
        } else {
            alert("There was a problem registering your vote. Please try again later.");
        }
    });
    return false;
}); 
})(jQuery);
/* ]]> */
</script> 
```

这就是我在functions.php中注册操作的内容

```
 add_action("wp_ajax_add_votes_options", "add_votes_options");
 add_action("wp_ajax_nopriv_add_votes_options", "add_votes_options");
 function add_votes_options() {
if (!wp_verify_nonce($_POST['nonce'], 'voting_nonce'))
    return;

$postid = $_POST['postid'];
$ip = $_POST['ip'];

$voter_ips = get_post_meta($postid, "voter_ips", true);
if(!empty($voter_ips) && in_array($ip, $voter_ips)) {
    echo "null";
    die(0);
} else {
    $voter_ips[] = $ip;
    update_post_meta($postid, "voter_ips", $voter_ips);
}   

$current_votes = get_post_meta($postid, "votes", true);
$new_votes = intval($current_votes) + 1;
update_post_meta($postid, "votes", $new_votes);
$return = $new_votes>1 ? $new_votes." votes" : $new_votes." vote";
echo $return;
die(0);
 } 
```

这就是我如何称呼我的投票按钮和计数按钮

```
 <?php
 // This will display "0 votes" and increase as votes are added
$votes = get_post_meta($post->ID, "votes", true);
$votes = !empty($votes) ? $votes : "0";
if($votes == 1) $plural = ""; else $plural = "s";
 echo '<div id="votecounter">'.$votes.' vote'.$plural.'</div>';
 ?>

 <?php
  // This will display the vote button and disable it if a cookie has already
 // been set. We also add the security nonce here. 
 $hasvoted = $_COOKIE['better_votes'];
 $hasvoted = explode(",", $hasvoted);
 if(in_array($post->ID, $hasvoted)) {
$vtext = "VOTED";
$class = ' class="disabled"';
 } else {
$vtext = "VOTE";
$class = "";
}
?>
 <a href="javascript:void(0)" id="vote"<?php echo $class; ?>><?php echo $vtext; ?></a>
 <?php if(function_exists('wp_nonce_field')) wp_nonce_field('voting_nonce', 'voting_nonce'); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:18:21.280

作为一个开始，你不应该一遍又一遍地为你的按钮使用相同的 id，所以改变这个：

```
<a href="javascript:void(0)" id="vote"<?php echo $class; ?>><?php echo $vtext; ?></a> 
```

对此：

```
<?php 
if(in_array($post->ID, $hasvoted)) {
    $vtext = "VOTED";
    $class = ' disabled';
} else {
    $vtext = "VOTE";
    $class = "";
}
<a href="javascript:void(0)" id="vote-<?php echo $post->ID; ?>" class="vote-btn<?php echo $class; ?>"><?php echo $vtext; ?></a> 
```

这将导致每个投票按钮的 id 属性以“vote-{post id}”的形式出现。而且由于我猜您仍然想以某种方式处理所有按钮，因此您现在可以使用`.vote-btn`选择器。

JavaScript 的问题在于您将帖子的 ID 直接传递给脚本。这很好，当您在页面上只有一篇文章时，但是当您有多个文章时，您必须多次打印您的代码，或者动态获取文章 ID。

我更喜欢第二个选项，这是您的 JS 代码应该如何更改以使其正常工作：

```
<script type="text/javascript">
/* <![CDATA[ */ 
(function($) {
function setCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

$(".vote-btn").not(".disabled").click(function() {
    var el = $(this),
        nonce = $("input#voting_nonce", el.parent()).val(),
        id = el.attr('id').replace(/vote-/, ''); // get the Post ID

    el.html('<span id="loader"></span>');
    var data = {
        action: 'add_votes_options',
        nonce: nonce,
        postid: id,
        ip: '<?php echo $_SERVER['REMOTE_ADDR']; ?>'            
    };
    $.post('<?php echo admin_url('admin-ajax.php'); ?>', data,
    function(response){
        if(response!="-1") {
            el.html("VOTED").unbind("click");
            if(response=="null") {
                alert("A vote has already been registered to this IP address.");
            } else {
                $("#votecounter").html(response);
                alert("Thanks for your vote.");
            }
            var cookie = getCookie("better_votes");
            if(!cookie) {
                var newcookie = id;
            } else {
                var newcookie = cookie + "," + id;
            }
            setCookie("better_votes", newcookie, 365);
        } else {
            alert("There was a problem registering your vote. Please try again later.");
        }
    });
    return false;
}); 
})(jQuery);
/* ]]> */
</script> 
```

因此，在上面的代码中，我们通过将“vote-”替换为空字符串（因此只保留 ID）来获取用户正在投票的帖子的 ID。另请注意以下行：

```
nonce = $("input#voting_nonce", el.parent()).val(), 
```

在这一行中，我假设 nonce 输入和按钮具有相同的父级（尽管您应该能够对所有帖子使用相同的 nonce）。您还可以通过将生成它的代码更改为：

```
<?php if(function_exists('wp_nonce_field')) wp_nonce_field('voting_nonce-' . $post->ID, 'voting_nonce'); ?> 
```

并将您的`add_votes_options`功能更改为：

```
$postid = $_POST['postid'];
if ( ! wp_verify_nonce( $_POST['nonce'], 'voting_nonce-' . $postid ) )
    return; 
```

这会将每个 nonce 绑定到帖子的 ID，即 nonce 的用途。

我认为这几乎是你的问题。请尝试我的代码并告诉我它是否有问题（如果是 JS 错误，请在 FireBug 的错误控制台或 WebKit 的检查器中添加消息）。

* * *

PP：刚看到这个：

> 从可靠和/或官方来源寻找答案。

我的回答得到了我使用 WordPress 和 jQuery 的经验的支持——我主要通过使用 WordPress 来谋生（较少使用 jQuery，但我也相对经常使用它）。希望这就足够了:)

# magento - “快速简单的产品创建” - 未配置类别和网站

> ID：14000797
> 
> 赞同：1
> 
> 时间：2012-12-22T07:03:27.467
> 
> 标签：magento, magento-1.6, stock, configurable-product

我一直在使用关联产品选项卡中的“快速简单产品创建”面板创建简单的关联产品。我今天注意到使用此功能创建的简单产品没有分配任何类别或网站。因此，父可配置产品显示为缺货。

我在这些简单的产品上手动分配了一些类别（在类别选项卡中），并点击了“主网站”选项（在网站选项卡中），父 conf 产品开始出售。

为什么会这样？我是否必须为所有相关的简单产品手动设置这些参数？难道没有办法继承父可配置产品类别和网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:16:15.537

如果您使用“快速简单产品创建”创建简单产品，请记住首先将任何网站和类别分配给可配置产品。如果网站被分配给可配置产品，那么以这种方式创建的关联产品也将与各自的网站相关联。

# wcf - Web 服务响应 XML 检索“DestinationUnreachable”消息

> ID：14000798
> 
> 赞同：17
> 
> 时间：2012-12-22T07:03:31.507
> 
> 标签：wcf

在 SoapUI 工具中处理请求 XML 时，我在响应 XML 中收到以下消息。对于与应用程序关联的所有类型的服务，我们都收到了相同的消息。

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
   <s:Header>
      <a:Action s:mustUnderstand="1">http://www.w3.org/2005/08/addressing/soap/fault</a:Action>
   </s:Header>
   <s:Body>
      <s:Fault>
         <s:Code>
            <s:Value>s:Sender</s:Value>
            <s:Subcode>
               <s:Value>a:DestinationUnreachable</s:Value>
            </s:Subcode>
         </s:Code>
         <s:Reason>
            <s:Text xml:lang="en-US">The message with To '' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher.  Check that the sender and receiver's EndpointAddresses agree.</s:Text>
         </s:Reason>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

任何人都知道我们应该做些什么来解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-15T18:23:16.703

问题是因为请求消息缺少 To 标头。在消息编辑器上，就在请求消息窗口下方，单击按钮 WS-A。然后选中复选框“**添加默认 wsa:To**

现在运行您的请求，服务将运行良好。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:31:24.417

如果您发布请求 XML（以及 WSDL 的相关部分）会有所帮助，但从外观上看，这是一个解决问题。检查您是否在客户端和服务器上使用相同的 SOAP 版本（1.1 与 1.2），WS-Addressing 的使用是否一致等。另外，尝试生成 WCF 客户端（使用 svcutil / 添加服务参考），使用该客户端发送消息，捕获它（例如使用 Fiddler），然后 - 假设它有效 - 将其与 SoapUI 生成的消息进行比较。

# javascript - 使用 Tiny Carousel jQuery 插件滑动 div

> ID：14000799
> 
> 赞同：1
> 
> 时间：2012-12-22T07:04:00.597
> 
> 标签：javascript, jquery, html

我正在尝试使用 Tiny Carousel jQuery 插件水平滑动一些 div。

这是我的html：

```
<div id="slider">

    <div class="viewport">
        <div class="overview">
            <div class="cols">
                <p>Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>ether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>r you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>ct knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>              
            <div class="cols">
                <p>promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>strategies, we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>we make your message resonate, with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>                
            <div class="cols">
                <p>with materials that support your sales effort from the inside out.Whether you need to deliver product knowledge, promote a new service, or convey sales strategies, we make your message resonate, with materials that support your sales effort from the inside out.</p>
            </div>

        </div>
    </div>

    <div style="clear:both;"></div>

    <div class="nav-btn">    
        <a class="buttons prev" href="#">left</a>   
        <a class="buttons next" href="#">right</a>
    </div>
</div> 
```

这是我的 jQuery

```
<script type="text/javascript">
//Initialize
$(document).ready(function(){   

    $('#slider').tinycarousel({ 
        display: 3, 
        pager: true, 
        interval: true,
        intervaltime: 10000,            
        //axis: 'y'
        controls: true 
        //animation: false
    });
}); 
```

该脚本正在运行，但是当我插入 6 cols div 时，滑动不起作用。这是为什么？我已经给 cols div 提供了固定宽度和高度。有时 cols div 中的内容会溢出。在这种情况下，我可以在 cols div 中添加滚动条吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:08:45.340

在 jquery 插件编码中，下面的函数隐藏了 next 和 prev 的按钮。将禁用类替换为您要显示的其他类

```
function setButtons()
        {
            if(options.controls)
            {
                oBtnPrev.toggleClass('disable', iCurrent <= 0 );
                oBtnNext.toggleClass('disable', !(iCurrent +1 < iSteps));
            }

            if(options.pager)
            {
                var oNumbers = $('.pagenum', oPager);
                oNumbers.removeClass('active');
                $(oNumbers[iCurrent]).addClass('active');
            }           
        } 
```

以 CSS 样式更改以下编码

```
#slider-code .disable { visibility: hidden; } to

#slider-code .disable { visibility: display; } 
```

# android - Android：使用 Graph API Facebook SDK 3.0 获取朋友生日

> ID：14000802
> 
> 赞同：3
> 
> 时间：2012-12-22T07:04:18.277
> 
> 标签：android, facebook, facebook-graph-api

> **可能重复：**
> [Android：如何使用 Graph API 从 facebook 日历获取朋友的出生日期](https://stackoverflow.com/questions/13984873/android-how-to-get-friends-birth-dates-from-facebook-calendar-using-graph-api)

参考：[https ://stackoverflow.com/a/13926065/1770916](https://stackoverflow.com/a/13926065/1770916)

我设置了获取朋友生日和列表的权限。代码如下。

```
private void signInWithFacebook() {

    mSessionTracker = new SessionTracker(getBaseContext(), new StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
        }
    }, null, false);

    String applicationId = Utility.getMetadataApplicationId(getBaseContext());
    mCurrentSession = mSessionTracker.getSession();

    if (mCurrentSession == null || mCurrentSession.getState().isClosed()) {
        mSessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;
    }

    if (!mCurrentSession.isOpened()) {
        Session.OpenRequest openRequest = null;
        openRequest = new Session.OpenRequest(MainActivity.this);

        if (openRequest != null) {
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setPermissions(Arrays.asList("user_birthday", "email", "user_location", "friends_birthday","read_friendlists" ));
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            mCurrentSession.openForRead(openRequest);
        }
    }
} 
```

但我只得到朋友 ID 和姓名。

```
@Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

   if (mCurrentSession.isOpened()) {
       Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {

              // callback after Graph API response with user object
              @Override
              public void onCompleted(GraphUser user, Response response) {
                  Log.d("AL", user.getId() + " " + user.getName() + " " + user.getInnerJSONObject());
              }
            });

        Request.executeMyFriendsRequestAsync(mCurrentSession, new Request.GraphUserListCallback() {

            @Override
            public void onCompleted(List<GraphUser> users, Response response) {
                Log.d("AL",""+response.toString());
                for (int i=0;i<users.size();i++){
                    Log.d("AL",""+users.get(i).toString());
                    welcome.setText("Done");
                }

            }
        });
        }
  } 
```

通过使用上面的代码，我在添加权限后让用户获得额外的东西，如电子邮件、生日等，但没有让朋友额外认为生日。

我在哪里做错了？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:44:15.623

为了获取朋友信息，我们需要获取`HttpConnection`以下信息`url`

```
"https://graph.facebook.com/me/friends?access_token="+ mAccessToken + "&fields=id,first_name,last_name,location,picture,birthday"); 
```

在这里添加您需要的字段。我认为它会工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:28:26.020

在这里我们得到任何东西

```
String url = "https://graph.facebook.com/me/friends?fields=birthday,name&access_token="+ facebook.getAccessToken(); 
```

用这个我过生日

```
 JSONObject JOAlbums = JAAlbums.getJSONObject(i);

 String date = DaysCount(JOAlbums.getString("birthday")); 
```

# contiki - cc2530dk 的 Contiki

> ID：14000811
> 
> 赞同：0
> 
> 时间：2012-12-22T07:06:28.317
> 
> 标签：contiki

最近我正在研究`Contiki`和`cc2530dk`。

我想做的是`Contiki`在`cc2530dk`. 据我所知，我需要`make`一个 hex 文件，然后将其刻录到`cc2530dk`. 但是，我在为 hello-world 制作 hex 文件时遇到了麻烦。

我下载`InstantContiki-2.6`并运行`VMware`。然后我将目录更改为`contiki-sensinode-cc-ports`from [here](https://github.com/g-oikonomou/contiki-sensinode)。

我可以跑`make`进去`examples/hello-world/`。但我不知道如何创建十六进制文件。我试过：

```
make TARGET=cc2530dk 
```

但失败了。我得到错误：

```
make: sdcc: Command not found
make: *** [obj_cc2530dk/rimeaddr.rel] Error 127 
```

我想做的是：继续`contiki`运行`cc2530dk`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:07:13.353

您必须安装小型设备 C 编译器 (SDCC)。为此，请遵循Contiki wiki 中的[本指南](https://github.com/contiki-os/contiki/wiki/8051-Requirements)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T12:09:03.263

使用 cmd sdcc -v 检查。如果它没有给出如下所示：

```
SDCC : mcs51/pic16/hc08 3.1.1 #7100 (Aug  5 2013) (Linux) 
```

然后，安装 SDCC，然后构建工具链。

# java - 我不能使用 Zxing 的结果来做我的活动

> ID：14000817
> 
> 赞同：0
> 
> 时间：2012-12-22T07:07:35.523
> 
> 标签：java, android, zxing

我是 Android 新手，我想使用 QR 码中的数据来设置我的文本视图。我也想测试数据的结果。二维码格式只是纯文本。

问题是在我扫描后我的文字没有改变。

请帮我检查代码

```
 btnSendJob.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.setPackage("com.google.zxing.client.android");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
            startActivityForResult(intent, 0);
        }

        //result from Zxing 
        @SuppressWarnings("unused")
        public void onActivityResult(int requestCode, int resultCode, Intent intent) {
            if (requestCode == 0) {
                if (resultCode == RESULT_OK) {
                    String contents = intent.getStringExtra("SCAN_RESULT");
                    String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                    // Handle successful scan

                    TextView text1 = (TextView) findViewById(R.id.resultQR);
                    TextView text2 = (TextView) findViewById(R.id.textToSelectGroup);
                    text1.setText(contents.toString());

                } else if (resultCode == RESULT_CANCELED) {
                    // Handle cancel
                    btnSendJob.setText("failed");
                }
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:22:48.887

我认为这样的工作：

```
import zxing.IntentIntegrator;

public void onActivityResult(int requestCode, int resultCode, Intent intent) {

         IntentResult result = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
         if (result != null) {
             String barcode = result.getContents();
             //yadda, yadda..
         }
} 
```

# java - 线程“主”java.lang.NullPointerException 中的异常

> ID：14000822
> 
> 赞同：-1
> 
> 时间：2012-12-22T07:08:46.690
> 
> 标签：java, compiler-errors, nullpointerexception

> **可能重复：**
> [使用 Java 编译器 API 时出现空指针异常](https://stackoverflow.com/questions/2543439/null-pointer-exception-while-using-java-compiler-api)

我对这个程序有一些问题。

错误：

```
Exception in thread "main" 
java.lang.NullPointerException at test.SimpleCompileTest.main(SimpleCompileTest.java:9) 
```

程序：

```
package test;
import javax.tools.*;
public class SimpleCompileTest {
    public static void main(String[] args)
    {
        String fileToCompile = "test" + java.io.File.separator+"MyClass.java";
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        int compilationResult = compiler.run(null, null, null, fileToCompile);
        if(compilationResult==0)
        {
            System.out.println("Compilation is successful");
        }
        else
        {
            System.out.println("Compilation has failed");
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:13:26.053

Java 程序的编译不是那么简单，需要多花点功夫。请查看教程和 API，例如 [http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)。根据您的 NPE，检查[http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)：

> 除非明确允许，否则如果给定 null 参数或给定包含 null 元素的列表或集合，则此包中的所有方法都可能抛出 NullPointerException。同样，除非明确允许，否则任何方法都不能返回 null。

# html - 如何让一个div出现在那里

> ID：14000824
> 
> 赞同：0
> 
> 时间：2012-12-22T07:09:36.773
> 
> 标签：html, css, twitter-bootstrap

我有两个div。我想将一个 div 放在另一个 div 上并让它出现在它上面。我可以定位 div，但我怎样才能使 div 的背景不可见，或者我应该控制背景的可见性。

…………

![在此处输入图像描述](../Images/d97b5892fd3ef25d2b45f762daa76183.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:13:30.047

您应该使用背景颜色，并且您可以做一件事，即在显示上部 div 时降低下方 div 的不透明度或只是隐藏它，或者您可以在其上放置上部 div 以便背景 div 不可见。已经有很多方法可以做这件事，这取决于你的需要。

# merge - 如何在 voronoi 图中组合两个相邻站点（小区）？

> ID：14000828
> 
> 赞同：1
> 
> 时间：2012-12-22T07:10:50.717
> 
> 标签：merge, cell, delaunay, voronoi

如何将两个相邻站点（单元）组合在一起`voronoi diagram`？我决定在我的项目中合并两个相邻站点（单元）`voronoi diagram`，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:31:13.330

对偶 Delaunay 三角剖分可以用更简单的数据结构来表示。您可以将那些与您需要删除的 Voronoi 边对偶的三角形边标记为无效。

# android - Checkable 显示选择的错误项目（使用 simpleCursor + 自定义布局）

> ID：14000837
> 
> 赞同：0
> 
> 时间：2012-12-22T07:11:58.923
> 
> 标签：android, listview

我的自定义列表视图中有一个问题，当我搜索列表视图的内容时，它似乎显示选择了错误的项目。（看看下面的截图你就明白了）

![在此处输入图像描述](../Images/e59341aabcd99f0dc7ca232653ffcb5f.png) ![在此处输入图像描述](../Images/911a61e789e79e30fa0607f134451b0c.png) ![在此处输入图像描述](../Images/3cb40a17cfa47ba8b124048c3f017c4b.png)

1.  用名称 aa 搜索并选择了两行（AABBCCC 和 AABC）

2.  我用 Na 搜索过，但没有选择行（Jana 和 Nathan）。但它显示为选中。

3.  删除了所有搜索项，删除搜索后我没有选择任何行。它应该显示两行（AABBCC 和 AABC），但它显示了错误的行 Jana。

**我不知道如何覆盖上述行为。我必须根据 _rowid 而不是职位使联系成为可检查的。**

***哪个班级将跟踪列表中选择的项目？如何覆盖上述行为？***

它有两行名称和编号。我已经自定义了实现可检查的布局（下面的代码）。

```
Search Name(EditText)        [Done Btn]
---------------------------------------
Contact_name_1         
Phone_no
---------------------------------------
Contact_name_2         
Phone_no2
---------------------------------------
Contact_name_3         
Phone_no3
--------------------------------------- 
```

**带有可检查项目的自定义布局..**

```
public class CustomCheckableLists extends RelativeLayout implements Checkable {

 private Checkable mCheckable;

public CustomCheckableLists(Context context) {
    super(context);
}

public CustomCheckableLists(Context context, AttributeSet attrs)
{
    super(context,attrs);
}

public boolean isChecked() {
    return mCheckable == null ? false : mCheckable.isChecked();
    //return false;
}

public void setChecked(boolean checked) {
    if(mCheckable != null)
        mCheckable.setChecked(checked);

}

public void toggle() {
     if(mCheckable != null)
            mCheckable.toggle();
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();

    //Find items id..

    Log.w("onFinishInflate","onFinishInflate");

    // Find Checkable child
    int childCount = getChildCount();
    for (int i = 0; i < childCount; ++i) {
        View v = getChildAt(i);
        if (v instanceof Checkable) {
            mCheckable = (Checkable) v;
            break;
        }
    }
} 
```

**自定义 XML 布局**

```
<CustomCheckableLists
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical" 
      android:orientation="horizontal"
    >

    <TextView 
    android:id="@+id/id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="name" 
    android:visibility="invisible"
    />

    <TextView 
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="nuoo" 
    />

    <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/phonenu"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:checkMark="?android:attr/textCheckMark"
    android:gravity="center_vertical"
    android:paddingLeft="3dp"
    android:paddingRight="6dp"
    android:paddingTop="25dip"
    />

</CustomCheckableLists> 
```

**接触活动课**

```
 String[] columns = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER
    };

    int[] to = new int[] {
            R.id.id,
            R.id.text1,
            R.id.phonenu
    };

    dataAdapter = new SimpleCursorAdapter(this, R.layout.custom_checkable_item, cursor, columns, to);
    listView.setAdapter(dataAdapter); 
```

任何帮助表示赞赏。提前致谢。

**编辑**

每当用户搜索任何名称时，都会形成一个查询以返回搜索结果。下面的代码

```
 searchNameOrNumber = (EditText) findViewById(R.id.searchText);
    searchNameOrNumber.addTextChangedListener(new TextWatcher() 
    {
        public void onTextChanged(CharSequence searchterm, int start, int before, int count) {
            Log.w("Text Searched.. ", " " + searchterm);
            dataAdapter.getFilter().filter(searchterm.toString());
            //dataAdapter.notifyDataSetChanged();
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }
        public void afterTextChanged(Editable s) {
        }
    });

    dataAdapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            Log.w("Searched Query..,", constraint.toString());
            );

            return getSearchedContacts(constraint.toString());
        }
    });

public Cursor getSearchedContacts(String inputText)
{
    Log.w("inputText",inputText);
        Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
        String[] projection = new String[] {
                ContactsContract.Contacts._ID, 
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                   ContactsContract.CommonDataKinds.Phone.NUMBER
        };
        String selection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " like '%" + inputText + "%'";

        Cursor people = getContentResolver().query(uri, projection, selection, null, null);

        int indexName = people.getColumnIndex(StructuredName.DISPLAY_NAME);
        int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
        int idIdx = people.getColumnIndexOrThrow(PhoneLookup._ID);

        if(!people.moveToFirst())
        {
            Log.w("No Cursor.., ","No cursor.., Cursor is empty..");
        }

        do {
            String id = people.getString(idIdx);
            String name   = people.getString(indexName);
            String number = people.getString(indexNumber);
            // Do work...
        } while (people.moveToNext());

        return people;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:39:30.080

您需要创建一个自定义适配器并在那里跟踪检查的项目。您看到这种行为的原因是因为它`SimpleCursorAdapter`正在回收视图，并且不知道如何处理选中状态，并且只是设置文本标签，使选中状态保持原样。

查看此行为的另一种方法是拥有超过一屏的项目，检查一些然后滚动，您还会注意到随机项目在滚动时被选中/取消选中。

[您可以在此答案](https://stackoverflow.com/a/10558101/642161)中查看如何使其工作的完整示例。

如果您使用它进行搜索，那么每次过滤时，您都必须清除选中位置的列表。

# wpf - MVVM Light Messenger 动作执行多次

> ID：14000841
> 
> 赞同：0
> 
> 时间：2012-12-22T07:12:21.553
> 
> 标签：wpf, mvvm, light, messenger

感谢您的第一反应。我试过了，它奏效了。我没有使用附加行为。我使用了事件触发器。

xmlns:interactivity="clr-命名空间:System.Windows.Interactivity;assembly=System.Windows.Interactivity"

```
<interactivity:Interaction.Triggers>
    <!-- In order to Call Cleanup in ViewModel to unregister Messenger.  -->
    <interactivity:EventTrigger EventName="Unloaded">
        <interactivity:InvokeCommandAction Command="{Binding ViewUnloadCommand}" />
    </interactivity:EventTrigger>
</interactivity:Interaction.Triggers> 
```

然后我的视图将在视图卸载时调用 ViewModel 中的命令来取消注册 Messenger。

再次感谢。

* * *

感谢 Laurent 在 MVVM light 上所做的出色工作。

我一直在使用这个框架开发一个 WPF 项目。然后我遇到了这个问题。我尝试在 Google、MSDN 和 StackOverFlow 上搜索它。当在 ViewModel 和 View 之间使用 Messgener 时，我找到了这个解决方案。我会在 CodeBehind 文件中执行类似的操作，以在 Unloaded 事件处理程序中调用 Unregister。

```
 public FinishedTodoItemTreeViewUserControl()
    {
        InitializeComponent();

         Messenger.Default.Register<DialogMessage>(this, FinishedTodoItemTreeViewModel.DeleteAllDoneItemsConfirmMessageToken, dialog =>
        {
            var confirmResult = MessageBox.Show(dialog.Content, dialog.Caption, dialog.Button, dialog.Icon);
            dialog.ProcessCallback(confirmResult);
        });
    }

    private void currentControl_Unloaded(object sender, RoutedEventArgs e)
    {
         Messenger.Default.Unregister(this);
    } 
```

但是当我在 ViewModel 中执行此操作时，何时应该调用 Unregister 或 Cleanup？因为当它发生时，我仍然需要再次收到此消息。但我不想一枪就多次收到这条消息。

提前致谢。

```
 /// <summary>
    /// Register to be observer of TodoItems change notification receiver.
    /// </summary>
    private void RegisterTodoItemsChangedNotification()
    {
         Messenger.Default.Register<UnfinishedTodoItemTreeViewModel>(this, UnfinishedTodoItemTreeViewModel.RelatedTodoItemsChangedMessageToken, itemTreeViewModel =>
        {
            if (itemTreeViewModel.ActionCategory == UnfinishedTodoItemTreeViewModel.TodoItemActionCategory.Done)
            {
                DecreaseRelatedFilterTodoItemCount(itemTreeViewModel.FilterType);
                AllTodoItemCount -= 1;
            }
            else if (itemTreeViewModel.ActionCategory == UnfinishedTodoItemTreeViewModel.TodoItemActionCategory.Undone)
            {
                IncreaseRelatedFilterTodoItemCount(itemTreeViewModel.FilterType);
                AllTodoItemCount += 1;
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:41:12.673

在视图模型中，只要有意义，您就应该取消注册。我猜当它绑定的控件被卸载时你会想要这样做？

您可以为此编写附加行为 - 只需注意 unloaded 可能触发的其他原因。例如，请参阅[此答案](https://stackoverflow.com/questions/7137713/binding-usercontrol-unload-event-to-viewmodel)。

# dojo - dijit.form.FilteringSelect 如何以编程方式添加分隔符

> ID：14000842
> 
> 赞同：3
> 
> 时间：2012-12-22T07:12:24.303
> 
> 标签：dojo, separator

我是 Dojo 的新手。我正在编写一个页面，该页面以编程方式加载带有内存存储的 FilteringSelect。内存存储从 Json 服务获取数据。我想将分隔符添加到 FilteringSelect 下拉值，但我不知道如何做到这一点。我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T18:24:55.477

我知道它有点老了，但我正在寻找这个并遇到了这个问题，所以这就是我得到的：dojo 文档（[http://bill.dojotoolkit.org/api/1.9#addOption](http://bill.dojotoolkit.org/api/1.9#addOption)），显示那：

> 如果选项的值为空或缺失，则会创建一个分隔符。

因此，如果您使用商店来填充选择，下面的代码应该适用于 dojo 1.10.4：

```
require(["dijit/form/Select",
  "dojo/data/ObjectStore",
  "dojo/store/Memory",
  "dojo/domReady!"
], function(Select, ObjectStore, Memory){

  var store = new Memory({
    data: [
      { id: "foo", label: "Foo" },
      { id: "bar", label: "Bar" }
    ]
  });

  var os = new ObjectStore({ objectStore: store });

  var s = new Select({
    store: os
  }, "target");
  s.startup();

  s.on("change", function(){
      console.log("my value: ", this.get("value"))
  })
}) 
```

# iphone - 如何从文件中进行 XML 解析

> ID：14000843
> 
> 赞同：-2
> 
> 时间：2012-12-22T07:12:24.807
> 
> 标签：iphone, xml-parsing

> **可能重复：**
> [iOS 教程中的 Xml 解析](https://stackoverflow.com/questions/11323326/xml-parsing-in-ios-tutorial)

我的 Xcode 项目中有 XML 文件，我想解析这个 XML 文件并在 UITableView 中显示数据。由于我是 xml 解析的新手，所以我很难做到这一点。如何解析下面的xml？

我的xml文件是：

```
<application>
    <app_data>
        <wayHome>
            <data>
                <title>159 Darby St Bus Stop</title>
                <category>BUS</category>
                <lat>-32.9320366</lat>
                <long>151.7712731</long>
                <image>159 Darby St Bus Stop.png</image>
            </data>
            <data>
                <title>Beaumont St and Denison St Taxi Rank</title>
                <category>TRAIN</category>
                <lat>-32.9320366</lat>
                <long>151.7712731</long>
                <image>Beaumont St and Denison St Taxi Rank.png</image>
            </data>
            <data>
                <title>Beaumont St Bus Shop next to ANZ</title>
                <category>BUS</category>
                <lat>-32.9227304</lat>
                <long>151.7472369</long>
                <image>Beaumont St Bus Shop next to ANZ.png</image>
            </data>
         </wayHome>
     </app_data>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:41:17.777

使用 NSXMLParserDelegate 方法来解析文件。

```
In yourInterface.h file include NSXMLParserDelegate 

@implementation yourInterface.m file: use below code

NSURL* xmlFile = [NSURL  fileURLWithPath:[[NSBundle mainBundle]
                                           pathForResource:@"yourXMLfile"
                                           ofType:@"xml"]];

NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlFile];

//Initialize the delegate.
XMLParser *parser = [[XMLParser alloc] initXMLParser];

//Set delegate
[xmlParser setDelegate:parser];

//Start parsing the XML file.
BOOL success = [xmlParser parse];

if(success)
NSLog(@"No Errors");
else
NSLog(@"Error Error Error!!!"); 
```

使用委托方法解析文件。我假设您需要解析“数据”标签。在这里，您可以检查 ElementName 是否为“Data”。与“数据”的内部标签类似。在这里，您可以维护数据元素的数组或字典。

所以你的工作是在委托方法中做的：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict;

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string;

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName; 
```

# android - 获取Android中strings.xml文件中存在的字符串列表

> ID：14000844
> 
> 赞同：13
> 
> 时间：2012-12-22T07:12:28.853
> 
> 标签：android

我想要 strings.xml 文件中存在的字符串列表。

有谁知道怎么获取？？？我发现的一件事是它在 R.java 中按顺序分配 id，但如何获取起始 id 尚不清楚。

例如，我的 strings.xml 中有 100 个字符串，如下所示，我想一次读取，而不是为个人提供 getResources().getString(int id)。

```
<string name="app_label">Calendar</string>
<string name="what_label">What</string>
<string name="where_label">Where</string>
<string name="when_label">When</string>
<string name="timezone_label">Time zone</string>
<string name="attendees_label">Guests</string>
<string name="today">Today</string>
<string name="tomorrow">Tomorrow</string> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T07:18:50.730

您可以像这样在 res\values\strings.xml 文件中声明您的字符串。

```
 <string-array name="vehiclescategory_array">

        <item>Cars</item>
        <item>Bikes</item>
        <item>RVs</item>
        <item>Trucks</item>
        <item>Other Vehicles</item>

 </string-array> 
```

在您的活动课程中，您可以像下面这样访问它们。

```
String[] categories;

categories=getResources().getStringArray(R.array.vehiclescategory_array); 
```

在上面的列表中，无论您声明什么序列，都与它在活动中分配给数组的方式相同。假设 Cars 将被分配到类别 [0]。希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-24T09:08:22.307

```
Field[] fields = R.string.class.getDeclaredFields(); // or Field[] fields = R.string.class.getFields();
String str = "";
for (int  i =0; i < fields.length; i++) {
    int resId = getResources().getIdentifier(fields[i].getName(), "string", getPackageName());
    str += fields[i].getName() + " = ";
    if (resId != 0) {
        str += getResources().getString(resId);
    }
    str += "\n";
} 
```

您将在“str”变量中获得所有字符串代码及其值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-22T08:23:12.867

如果要访问`strings.xml`文件中的所有字符串，可以对`R.string`类使用反射。可以在[此答案](https://stackoverflow.com/questions/13820645/compare-names-of-every-resource-with-the-content-of-a-variable-of-sqlite-databas/13821330#13821330)中找到一个示例，您只需将可绘制对象替换为字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T08:12:53.353

您可以声明一个整数数组，其中每个字符串都有一个条目。我曾经为一组颜色做过这个，所以我想它也适用于字符串。

**资源/值/arrays.xml**

```
<integer-array name="app_strings">
    <item>@string/app_label</item>
    <item>@string/what_label</item>
    <item>@string/where_label</item>
    <item>@string/when_label</item>
    <item>@string/timezone_label</item>
    <item>@string/attendees_label</item>
    <item>@string/today</item>
    <item>@string/tomorrow</item>
</integer-array> 
```

然后在您的代码中，您将遍历数组并将每个值用作 getString() 的参数。

```
int[] stringIds = getResources().getIntArray(R.array.app_strings);
String[] strings = new String[stringIds.length];
for (int i = 0; i < stringIds.length; i++) {
    strings[i] = getString(stringIds[i]);
} 
```

问题是每当您修改字符串资源时，您都必须手动更新您的arrays.xml，所以它肯定不理想。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-29T04:39:32.897

```
String[] categories = getResources().getStringArray(R.array.stars_array);
        List<String> stringList = new ArrayList<>(Arrays.asList(categories)); 
```

使用这个简单的

# c# - 将 XML 加载到 XDocument 中的最快方法是什么？

> ID：14000846
> 
> 赞同：16
> 
> 时间：2012-12-22T07:12:46.847
> 
> 标签：c#, .net, xml, linq-to-xml

当您创建一个新的`XDocument`using`XDocument.Load`时，它是打开 XML 文件并保留本地副本，还是不断地从硬盘读取文档？如果它确实连续读取，是否有更快的方法来解析 XML？

```
XDocument x = XDocument.Load("file.xml"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T07:19:32.917

有几个测量需要考虑：

1.  线性遍历速度（例如读取/加载）
2.  按需查询速度

*回答最直接的问题：* `XDocument`使用 an通过读取每个元素并创建相应的实例`XmlReader`来将文档加载到内存中（参见下面的代码）。`XElement`因此，它应该非常快（对于大多数用途来说足够快），但在解析大型文档时可能会消耗大量内存。

`XmlReader`如果您的需求仅限于无需将文档保留在内存中即可完成的操作，那么raw是一个很好的遍历选择。它将优于其他方法，因为没有创建或解决与其他节点相关的重要结构（例如链接父节点和子节点）。但是，按需查询能力几乎不存在；您可以对在每个节点中找到的值做出反应，但您不能将文档作为一个整体进行查询。如果您需要再次查看文档，则必须再次遍历整个内容。

相比之下，an`XDocument`将需要更长的时间来遍历，因为它实例化了新对象并执行了基本的结构任务。它还将消耗与源大小成比例的内存。作为这些取舍的交换，您将获得出色的查询能力。

[正如Jon Skeet 提到的](https://stackoverflow.com/a/1542101/453277)并在此处显示的那样，可以组合这些方法： [Streaming Into LINQ to XML Using C# Custom Iterators and XmlReader](http://lennilobel.wordpress.com/2009/09/02/streaming-into-linq-to-xml-using-c-custom-iterators-and-xmlreader/)。

**XDocument Load() 的源**

```
public static XDocument Load(Stream stream, LoadOptions options)
{
    XmlReaderSettings xmlReaderSettings = XNode.GetXmlReaderSettings(options);
    XDocument result;
    using (XmlReader xmlReader = XmlReader.Create(stream, xmlReaderSettings))
    {
        result = XDocument.Load(xmlReader, options);
    }
    return result;
}

// which calls...

public static XDocument Load(XmlReader reader, LoadOptions options)
{
    if (reader == null)
    {
        throw new ArgumentNullException("reader");
    }
    if (reader.ReadState == ReadState.Initial)
    {
        reader.Read();
    }
    XDocument xDocument = new XDocument();
    if ((options & LoadOptions.SetBaseUri) != LoadOptions.None)
    {
        string baseURI = reader.BaseURI;
        if (baseURI != null && baseURI.Length != 0)
        {
            xDocument.SetBaseUri(baseURI);
        }
    }
    if ((options & LoadOptions.SetLineInfo) != LoadOptions.None)
    {
        IXmlLineInfo xmlLineInfo = reader as IXmlLineInfo;
        if (xmlLineInfo != null && xmlLineInfo.HasLineInfo())
        {
            xDocument.SetLineInfo(xmlLineInfo.LineNumber, xmlLineInfo.LinePosition);
        }
    }
    if (reader.NodeType == XmlNodeType.XmlDeclaration)
    {
        xDocument.Declaration = new XDeclaration(reader);
    }
    xDocument.ReadContentFrom(reader, options);
    if (!reader.EOF)
    {
        throw new InvalidOperationException(Res.GetString("InvalidOperation_ExpectedEndOfFile"));
    }
    if (xDocument.Root == null)
    {
        throw new InvalidOperationException(Res.GetString("InvalidOperation_MissingRoot"));
    }
    return xDocument;
}

// which calls...

internal void ReadContentFrom(XmlReader r, LoadOptions o)
{
    if ((o & (LoadOptions.SetBaseUri | LoadOptions.SetLineInfo)) == LoadOptions.None)
    {
        this.ReadContentFrom(r);
        return;
    }
    if (r.ReadState != ReadState.Interactive)
    {
        throw new InvalidOperationException(Res.GetString("InvalidOperation_ExpectedInteractive"));
    }
    XContainer xContainer = this;
    XNode xNode = null;
    NamespaceCache namespaceCache = default(NamespaceCache);
    NamespaceCache namespaceCache2 = default(NamespaceCache);
    string text = ((o & LoadOptions.SetBaseUri) != LoadOptions.None) ? r.BaseURI : null;
    IXmlLineInfo xmlLineInfo = ((o & LoadOptions.SetLineInfo) != LoadOptions.None) ? (r as IXmlLineInfo) : null;
    while (true)
    {
        string baseURI = r.BaseURI;
        switch (r.NodeType)
        {
        case XmlNodeType.Element:
        {
            XElement xElement = new XElement(namespaceCache.Get(r.NamespaceURI).GetName(r.LocalName));
            if (text != null && text != baseURI)
            {
                xElement.SetBaseUri(baseURI);
            }
            if (xmlLineInfo != null && xmlLineInfo.HasLineInfo())
            {
                xElement.SetLineInfo(xmlLineInfo.LineNumber, xmlLineInfo.LinePosition);
            }
            if (r.MoveToFirstAttribute())
            {
                do
                {
                    XAttribute xAttribute = new XAttribute(namespaceCache2.Get((r.Prefix.Length == 0) ? string.Empty : r.NamespaceURI).GetName(r.LocalName), r.Value);
                    if (xmlLineInfo != null && xmlLineInfo.HasLineInfo())
                    {
                        xAttribute.SetLineInfo(xmlLineInfo.LineNumber, xmlLineInfo.LinePosition);
                    }
                    xElement.AppendAttributeSkipNotify(xAttribute);
                }
                while (r.MoveToNextAttribute());
                r.MoveToElement();
            }
            xContainer.AddNodeSkipNotify(xElement);
            if (r.IsEmptyElement)
            {
                goto IL_30A;
            }
            xContainer = xElement;
            if (text != null)
            {
                text = baseURI;
                goto IL_30A;
            }
            goto IL_30A;
        }
        case XmlNodeType.Text:
        case XmlNodeType.Whitespace:
        case XmlNodeType.SignificantWhitespace:
            if ((text != null && text != baseURI) || (xmlLineInfo != null && xmlLineInfo.HasLineInfo()))
            {
                xNode = new XText(r.Value);
                goto IL_30A;
            }
            xContainer.AddStringSkipNotify(r.Value);
            goto IL_30A;
        case XmlNodeType.CDATA:
            xNode = new XCData(r.Value);
            goto IL_30A;
        case XmlNodeType.EntityReference:
            if (!r.CanResolveEntity)
            {
                goto Block_25;
            }
            r.ResolveEntity();
            goto IL_30A;
        case XmlNodeType.ProcessingInstruction:
            xNode = new XProcessingInstruction(r.Name, r.Value);
            goto IL_30A;
        case XmlNodeType.Comment:
            xNode = new XComment(r.Value);
            goto IL_30A;
        case XmlNodeType.DocumentType:
            xNode = new XDocumentType(r.LocalName, r.GetAttribute("PUBLIC"), r.GetAttribute("SYSTEM"), r.Value, r.DtdInfo);
            goto IL_30A;
        case XmlNodeType.EndElement:
        {
            if (xContainer.content == null)
            {
                xContainer.content = string.Empty;
            }
            XElement xElement2 = xContainer as XElement;
            if (xElement2 != null && xmlLineInfo != null && xmlLineInfo.HasLineInfo())
            {
                xElement2.SetEndElementLineInfo(xmlLineInfo.LineNumber, xmlLineInfo.LinePosition);
            }
            if (xContainer == this)
            {
                return;
            }
            if (text != null && xContainer.HasBaseUri)
            {
                text = xContainer.parent.BaseUri;
            }
            xContainer = xContainer.parent;
            goto IL_30A;
        }
        case XmlNodeType.EndEntity:
            goto IL_30A;
        }
        break;
        IL_30A:
        if (xNode != null)
        {
            if (text != null && text != baseURI)
            {
                xNode.SetBaseUri(baseURI);
            }
            if (xmlLineInfo != null && xmlLineInfo.HasLineInfo())
            {
                xNode.SetLineInfo(xmlLineInfo.LineNumber, xmlLineInfo.LinePosition);
            }
            xContainer.AddNodeSkipNotify(xNode);
            xNode = null;
        }
        if (!r.Read())
        {
            return;
        }
    }
    goto IL_2E1;
    Block_25:
    throw new InvalidOperationException(Res.GetString("InvalidOperation_UnresolvedEntityReference"));
    IL_2E1:
    throw new InvalidOperationException(Res.GetString("InvalidOperation_UnexpectedNodeType", new object[]
    {
        r.NodeType
    }));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-22T07:23:52.907

当您调用时，它将解析传入的流（无论是来自文件还是字符串都无关紧要）`Load()`，然后将文档的本地实例保存在内存中。由于源可以是任何东西（可以是 NetworkStream、DataReader、用户输入的字符串），它不能返回并尝试再次读取数据，因为它不知道它的状态（流被关闭等）。

另一方面，如果您真的想要速度，那么 XDocument 不是最快的（尽管它更易于使用），因为它需要首先解析文档，然后将其保留在内存中。如果您使用[System.Xml.XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader%28v=vs.110%29.aspx)方法处理非常大的文档，通常会更快，因为它可以将文档作为流读取，并且不需要保留除当前元素之外的任何内容。这个[基准测试](https://web.archive.org/web/20090830035033/http://www.nearinfinity.com/blogs/joe_ferner/performance_linq_to_sql_vs.html)显示了一些有趣的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T07:21:31.090

我认为它不会连续读取；该 `XDocument.Load`方法的好处在于它用于`XmlReader`将 XML 读入 XML 树。而且由于现在您刚刚创建了一棵树，它很可能作为一棵树存储在您的内存中，它不再不断地读取文档。它操纵树，因为它是一棵树，所以您的所有阅读和修改都可以更快地完成。虽然它没有实现`IDisposable`，但它会自动处置。

# c# - 如何通过单击按钮并保存和检索数据库中的数据来动态创建 2 个下拉列表框和 2 个具有日期格式的文本框

> ID：14000859
> 
> 赞同：1
> 
> 时间：2012-12-22T07:15:01.567
> 
> 标签：c#, ado.net

```
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head id="Head1" runat="server"> 
        <title>Untitled Page</title>     
        <script type="text/javascript">     
         function GetDynamicTextBox(value)      
         {   
             return '<input type="CheckBox"/>&nbsp;&nbsp;'+'<input name="DynamicTextBox1"
             type="text" value = "' + value + '" />&nbsp;&nbsp;'+'<input type="button"
             value="Remove" onclick=" RemoveTextBox(this)" />'     
         }

         function AddTextBox() 
         {
             var div = document.createElement('DIV');
             div.innerHTML = GetDynamicTextBox("");
             document.getElementById("TextBoxContainer").appendChild(div);
         }

         function RemoveTextBox(div) 
         {
             document.getElementById("TextBoxContainer").removeChild(div.parentNode);
         }

         function RecreateDynamicTextboxes() 
         {
             var values = eval('<%=Values%>');
             if (values != null) 
             {
                 var html = "";
                 for (var i = 0; i < values.length; i++) 
                 {
                     html += "<div>" + GetDynamicTextBox(values[i]) + "</div>";
                 }
                 document.getElementById("TextBoxContainer").innerHTML = html;
             }
         }
         window.onload = RecreateDynamicTextboxes;    
        </script>
    </head>
    <body>
        <form id="Form1" runat="server">    
            <div id="TextBoxContainer">
                <!--Textboxes will be added here -->
            </div>
            <br />
            <input id="btnAdd" type="button" value="Add Text" onclick="AddTextBox()" />
            <br /><br />
            <asp:Button ID="btnPost" runat="server" Text="submit" OnClick="Post" />
        </form>
    </body>
</html> 
```

**代码背后：**

```
using System;    
using System.Collections;    
using System.Configuration;    
using System.Data;    
using System.Linq;    
using System.Web;    
using System.Web.Security;    
using System.Web.UI;    
using System.Web.UI.HtmlControls;    
using System.Web.UI.WebControls;    
using System.Web.UI.WebControls.WebParts;    
using System.Xml.Linq;    
using System.Web.Script.Serialization;

namespace Row_By_Button
{    
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected string Values;
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        protected void Post(object sender, EventArgs e)
        {
            string[] textboxValues1 = Request.Form.GetValues("DynamicTextBox1");            
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            this.Values = serializer.Serialize(textboxValues1);
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:45:48.937

要添加控制，请执行以下操作：根据您的要求调整它以添加更多控件

```
function addTextBox()
{
    var inpt = document.getElementById('input_template');//parent Div name
    element.setAttribute("id", "TextBox1");
    element.setAttribute("type", "text");
    element.setAttribute("value", "");
    element.setAttribute("name", "Test Name");
    inpt.appendChild(element);
} 
```

检索并插入到数据库

```
string s = Request.Form["TextBox1"].ToString(); //C# 
```

# iphone - 如何在移动时调整 UIView 的大小，就像 SnapGuide 一样？

> ID：14000860
> 
> 赞同：1
> 
> 时间：2012-12-22T07:15:03.660
> 
> 标签：iphone, objective-c, ios, ios4

我有一个滚动视图，它有几个向用户显示信息的 UIView。此滚动视图仅支持水平滚动，当用户开始从左到右滚动或反之亦然时，中心视图应该更大，上一个和下一个视图应该更小（如下图所示）。

![在此处输入图像描述](../Images/69a1e2c57c2f67e86079c7ee806bb3ce.png)

我可以通过更改出现在滚动视图上的所有视图的框架来做到这一点。但是动画并不流畅。我只想在滚动时根据它们的位置调整视图的大小。有没有办法做到这一点？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:20:03.700

那么你可以看看这些链接

[UIScrollview 使当前图像变大](https://stackoverflow.com/questions/12658633/uiscrollview-make-the-current-image-larger)

**或者我可以通过iCarousel**为您提供更好的解决方案。请参考它，我认为这可能会对您有所帮助，而且它也很容易集成:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T17:32:47.630

这可能是您正在寻找的[**CGAffineTransformScale**](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformScale)。例如，您需要设置 UIViews 转换属性

```
CGAffineTransform transformRatio = CGAffineTransformScale(CGAffineTransformIdentity, factorX, factorY);
myView.transform = transformRatio; 
```

**factorX**和**factorY**是缩放视图宽度和高度的值。当您查看开始滚动进出时，您需要设置相应的因素。

# apache-camel - 骆驼多消费者实施问题

> ID：14000861
> 
> 赞同：1
> 
> 时间：2012-12-22T07:15:12.047
> 
> 标签：apache-camel

假设我有一个 Job Scheduler，它有 4 个消费者 A、B、C 和 D。类型 X 的作业必须路由到消费者 A，类型 Y 到消费者 B，依此类推。消费者 A、B、C 和 D 将作为独立的应用程序运行，没有任何依赖关系，无论是本地还是远程。

消费者需要不同的时间来完成他们的工作，这些工作随后被路由到 Job Scheduler 进行聚合。

可能还需要克隆其中一位消费者来分享其符合条件的工作。然而，一个作业应该只处理一次。

基于内容的路由器是最好的解决方案吗？请注意，我需要自定义作业调度程序，因为它只有在消费者之间分配作业的智能。

或者有没有更好的方法来处理这个？我不需要代理的那些功能，例如自动切换到另一个消费者（负载平衡）以及在失败的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T17:23:05.637

我不完全确定我跟随你。这听起来像是异步处理的一个相当直接的场景。

我不确定您打算如何将这些作业发送到 Camel 应用程序，但如果您可以在某个地方接收它们，您可能会继续使用基于内容的简单路由器。

鉴于您对消费者的要求，我会选择 JMS 队列（使用 Apache ActiveMQ 或类似的代理中间件），每种作业类型一个队列。这使得无需真正更改代码就可以轻松地将消费者分发到不同的机器。

```
// Central node routes
from("xxx:routeJob")
   .choice()
       .when(header("type").isEqualTo("x"))
           .to("jms:queue:processJobTypeX")
       .when(header("type").isEqualTo("y"))
           .to("jms:queue:processJobTypeY")
       .otherwise()
           .to("jms:queue:processJobTypeZ"); 

 from("jms:queue:aggregateJob")
    .bean(aggregate);

// different camel application (may be duplicated for multiple instances).
from("jms:queue:processJobTypeX")
  .bean(heavyProcessing)
  .to("jms:queue:aggregateJob");

// Yet another camel application
from("jms:queue:processJobTypeY")
  .bean(lightProcessing)
  .to("jms:queue:aggregateJob"); 
```

请重新审视您的问题以获得更好的答案:)

# php - 多域重定向到单个托管横幅问题

> ID：14000864
> 
> 赞同：0
> 
> 时间：2012-12-22T07:15:44.980
> 
> 标签：php, joomla, cross-domain

我有 5 个域被重定向到一个主机。我在遇到横幅问题的网站上使用 Joomla。我希望如果有人从 domain1 重定向托管站点显示 domain1、domain2 banner2 等的横幅。

无论是在 Joomla 还是 Core PHP 中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:22:20.217

你需要`'HTTP_REFERER'`在 PHP 的`$_SERVER`superglobal 中使用。[阅读手册以获取更多信息](http://php.net/manual/en/reserved.variables.server.php)。

基本上，`HTTP_REFERER`包含指向您的主机的站点的 URI。不能保证实际包含一个值，但最好不要涉及`GET`URL 中发布的变量。注意：您必须先解析出域名，然后才能使用它。

说明书是这么说的...

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

你的代码可能看起来像这样......

```
function GetBannerForDomain() {
    $url_array = parse_url($_SERVER['HTTP_REFERER']);
    switch (str_replace("www.", "", $url_array['host')) {
        case 'example.com':
            $img_src = 'path/to/banner.png';
        default:
            $img_src = 'path/to/default/banner.png';
    }

    return $img_src;
} 
```

如果您对重定向域有任何控制权，则可以回退到在重定向中使用 GET 变量，就像这样......

```
http://www.yoursite.com/referer/site1.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:21:25.007

```
function getBannerSrc() {
    switch ($_SERVER['HTTP_REFERER']) {
        case 'example.com':
            $img_src = 'path/to/banner.png';
        default:
            $img_src = 'path/to/default/banner.png';
    }

    return $img_src;
} 
```

...然后在您的视图脚本中

```
<img src="<?php echo getBannerSrc(); ?>"> 
```

可能是这样的吗？

# c# - 如果我通过线程将文件添加到我的列表框，我应该使用 Lock 吗？

> ID：14000865
> 
> 赞同：0
> 
> 时间：2012-12-22T07:15:53.817
> 
> 标签：c#, winforms

我的应用程序包含我要添加文件的列表框，当我使用添加文件夹执行此操作时，它会检查此文件夹中的所有文件，并通过在每个文件上打开不同的线程然后将这些文件添加到列表框中来完成 - 所以我应该使用锁定以防止 2 个（或更多）文件同时尝试添加文件？

```
private void btnAddDir_Click_1(object sender, EventArgs e)
{
    int totalCount = 0;
    int count = 0;
    string fileToAdd = string.Empty;
    List<string> filesList = new List<string>();
    BackgroundWorker backgroundWorker = null;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        btnAddfiles.Enabled = false;
        btnAddDir.Enabled = false;
        btnPlay.Enabled = false;
        Editcap editcap = new Editcap();

        foreach (string file in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
        {
            if (editcap.isWiresharkFormat(file))
            {
                filesList.Add(file);
                totalCount++;
            }
        }

        backgroundWorker = new BackgroundWorker();
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.DoWork +=
            (s1, e1) =>
            {
                foreach (string fileName in filesList)
                {
                    if (editcap.isWiresharkFormat(fileName))
                    {
                        if (editcap.isLibpcapFormat(fileName))
                        {
                            backgroundWorker.ReportProgress(0, fileName);
                            count++;
                        }
                        else if (!editcap.isLibpcapFormat(fileName))
                        {
                            fileToAdd = editcap.getNewFileName(fileName);

                            if (new FileInfo(fileToAdd).Exists)
                            {
                                backgroundWorker.ReportProgress(0, fileToAdd);
                                count++;
                            }
                        }

                        this.Invoke((MethodInvoker)delegate
                        {
                            labelStatus.Text = string.Format("Please wait..({0}/{1} files were added)", count.ToString("#,##0"), totalCount.ToString("#,##0"));
                            if(listBoxFiles.Items.Count != 0)
                                listBoxFiles.SetSelected(listBoxFiles.Items.Count - 1, true);
                        });
                    }
                }
            };

        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s1, e1) =>
        {

        });

        backgroundWorker.ProgressChanged +=
         (s1, arguments) =>
         {
             listBoxFiles.Items.Add(arguments.UserState);
         };

        backgroundWorker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:37:46.847

IIRC（对我来说很长时间没有 C#）:)
后台工作人员的完成事件在 UI 线程上引发。
所以基本上，不同的完成事件将按顺序运行 - 并且不需要锁定。

请参阅[BackgroundWorker RunWorkerCompleted 事件](https://stackoverflow.com/questions/2806814/backgroundworker-runworkercompleted-event)

# c# - 如何在c#中获取多个用户的日志文件

> ID：14000867
> 
> 赞同：0
> 
> 时间：2012-12-22T07:16:01.423
> 
> 标签：c#, c#-4.0, c#-3.0

```
public partial class Loginform : Form
{      
    public Loginform()
    {
        InitializeComponent();
    }

    private void btnlogin_Click(object sender, EventArgs e)
    {
        string dir = "D://Login.hhh";
        if (!File.Exists(dir))
        {
            File.Create(dir);
        }

        string filePath = dir;
        string s = System.Environment.GetEnvironmentVariable("COMPUTERNAME");
        string s1 = getIP();
        using (StreamWriter swrObj = new StreamWriter(filePath, true))
        {
            swrObj.Write(s1 + "|" + s + "|" + Txtusername.Text + "|" + "user logged in on :|" + DateTime.Now.ToShortDateString() + " at " + DateTime.Now.ToShortTimeString());
            swrObj.Write("\t\t");
            swrObj.Write("\t\t");
            swrObj.WriteLine();
            MessageBox.Show("Login success");
        }
    }

    private void Loginform_Load(object sender, EventArgs e)
    { 

    }
    private string getIP()
    { 
        IPHostEntry host;
        string localIP = "?";
        host = Dns.GetHostEntry(Dns.GetHostName());
        foreach (IPAddress ip in host.AddressList)
        {
            if (ip.AddressFamily.ToString() == "InterNetwork")
            {
                localIP = ip.ToString();
            }
        }
        return  localIP;
    }

 } 
```

我想在 C# 中为项目应用日志文件，我使用上述方法创建用于获取系统名称、IP 地址和用户登录的日志文件，但它适用于单用户环境，如果应用在多用户环境中，如何获取所有用户的日志信息？请任何人帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:41:33.463

我假设您想为每个用户创建日志文件，那么您可以这样做：-

```
 private void btnlogin_Click(object sender, EventArgs e)
    {
        string s1 = getIP();
        string dir = "D://"+s1+"-"+DateTime.Now+"Login.hhh";
        if (!File.Exists(dir))
        {
            File.Create(dir);
        }

        string filePath = dir;
        string s = System.Environment.GetEnvironmentVariable("COMPUTERNAME");

        using (StreamWriter swrObj = new StreamWriter(filePath, true))
        {
            swrObj.Write(s1 + "|" + s + "|" + Txtusername.Text + "|" + "user logged in on :|" + DateTime.Now.ToShortDateString() + " at " + DateTime.Now.ToShortTimeString());
            swrObj.Write("\t\t");
            swrObj.Write("\t\t");
            swrObj.WriteLine();
            MessageBox.Show("Login success");
        }
    } 
```

# wpf - 为代码中创建的 DataGridTemplateColumn 添加数据绑定

> ID：14000873
> 
> 赞同：5
> 
> 时间：2012-12-22T07:17:03.920
> 
> 标签：wpf, datatemplate, datagridtemplatecolumn

**问题：**

有没有办法`DataTemplate`在 XAML 中定义 a 并在代码中实例化它（而不是通过 检索单例`FindResource`）并`VisualTree`在发送到`DataTemplate`需要 a 的位置之前对其进行修改，例如`DataGridTemplateColumn.CellTemplate`？

**背景：**

我通过自己添加列来显示二维数组`data[][]`，并且在 XAML 中定义了一个知道如何呈现数组中的每个元素的数组。但是，每个单元格的默认值是行，即. 所以我需要通过将根视觉元素设置为绑定列索引来“参数化”每一列。目前，定义为 in并通过 which 检索，每次都返回相同的实例。除了调用给我树而不是加载它本身。我正在寻找一种方法来实例化in 代码，进行所需的修改并设置为`DataGrid``DataGridTemplateColumn``DataTemplate``DataContext``data[x]``DataTemplate``DataContext``"[y]"``y``DataTemplate``DataGrid.Resources``FindResource()``LoadContent()``UIElement``VisualTree``DataTemplate``DataTemplate``DataGridTemplateColumn.CellTemplate`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T21:44:02.160

受 Sisyphe 回答的启发，我发现了这个更便携的解决方案：

```
public class DataGridBoundTemplateColumn : DataGridTemplateColumn
{
    public string BindingPath { get; set; }

    protected override FrameworkElement GenerateEditingElement(DataGridCell cell, object dataItem)
    {
        var element = base.GenerateEditingElement(cell, dataItem);
        element.SetBinding(ContentPresenter.ContentProperty, new Binding(this.BindingPath));
        return element;
    }

    protected override FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        var element = base.GenerateElement(cell, dataItem);
        element.SetBinding(ContentPresenter.ContentProperty, new Binding(this.BindingPath));
        return element;
    }
} 
```

用法：

```
var cellTemplate = (DataTemplate)this.dataGrid.FindResource("cellTemplate");
foreach (var c in data.Columns)
{
    var col = new DataGridBoundTemplateColumn
    {
        Header = c.HeaderText,
        CellTemplate = cellTemplate,
        BindingPath = string.Format("[{0}]", c.Index)
    };

    this.dataGrid.Columns.Add(col);
} 
```

希望这对与我的问题具有相同要求的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:27:16.727

```
(templateKey as DataTemplate).LoadContent() 
```

**说明：** 调用`LoadContent`时，会创建 中的`UIElement`对象`DataTemplate`，您可以将它们添加到另一个 的可视化树中`UIElement`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:11:19.367

您应该`DataTemplate`在 WPF 中将其视为工厂。因此，我认为您实际上并不需要 的新实例`DataTemplate`，您只希望根据您的上下文以不同的方式应用它。

如果我正确理解您的问题，问题是`DataContext`您的`DataGrid`Cells 不正确：它是 Row ViewModel 而您希望它是 Cell ViewModel（这很有意义）。然而，这是 DataGrid 的基本行为，并且可能与每行中的 Cells 由未设置依赖属性的[DataGridCellsPresenter](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datagridcellspresenter%28v=vs.110%29.aspx)（基本上是一个`ItemsControl`）持有的事实有关（因此解释了 bad ）。`ItemsSource``DataContext`

我遇到了这个问题并找到了两种方法来解决这个问题（但我只设法完成了一项工作）。

第一个是继承[DataGridCellsPresenter](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datagridcellspresenter%28v=vs.110%29.aspx)并覆盖`OnItemChanged`方法来手动设置 ItemsSource。

```
protected override void OnItemChanged(object oldItem, object newItem)
{
    var rowViewModel = newItem as ViewModel;
    if (rowViewModel != null)
    {
        ItemsSource = rowViewModel.Items;
    }
    else
    {
        ItemsSource = null;
    }
} 
```

在您的情况下， rowViewModel.Items 应该指向类似 data[x] 的东西。但是，我在使用此修复程序时遇到了一些麻烦，无法使其正常工作。

第二种解决方案是子类`DataGridCell`化并在`ColumnProperty`. 您还必须进行子类`DataGridCellsPresenter`化以使其创建正确的单元格控件

```
public class MyDataGridCell : DataGridCell
{
    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        if (e.Property == ColumnProperty)
        {
            var viewModel = DataContext as YourViewModelType;
            if (viewModel != null)
            {
                var column = (e.NewValue as DataGridTemplateColumn);
                if (column != null)
                {
                    var cellViewModel = viewModel[column.DisplayIndex];
                    DataContext = cellViewModel;
                }
            }
        }
        base.OnPropertyChanged(e);
    }
}

public class MyDataGridCellsPresenterControl : DataGridCellsPresenter
{
    protected override System.Windows.DependencyObject GetContainerForItemOverride()
    {
        return new MyDataGridCell();
    }
} 
```

最后，您还必须覆盖 DataGridRow 默认 ControlTemplate 以使其使用您的自定义`DataGridCellsPresenter`来代替原来的`DataGridCellsPresenter`.

```
<ControlTemplate x:Key="DataGridRowControlTemplate" TargetType="{x:Type DataGridRow}">
    <Border x:Name="DGR_Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
        <SelectiveScrollingGrid>
            <SelectiveScrollingGrid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </SelectiveScrollingGrid.ColumnDefinitions>
            <SelectiveScrollingGrid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </SelectiveScrollingGrid.RowDefinitions>
            <local:MyDataGridCellsPresenter Grid.Column="1" ItemsPanel="{TemplateBinding ItemsPanel}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
            <DataGridDetailsPresenter Grid.Column="1" Grid.Row="1" Visibility="{TemplateBinding DetailsVisibility}">
                <SelectiveScrollingGrid.SelectiveScrollingOrientation>
                    <Binding Path="AreRowDetailsFrozen" RelativeSource="{RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type DataGrid}}">
                        <Binding.ConverterParameter>
                            <SelectiveScrollingOrientation>Vertical</SelectiveScrollingOrientation>
                        </Binding.ConverterParameter>
                    </Binding>
                </SelectiveScrollingGrid.SelectiveScrollingOrientation>
            </DataGridDetailsPresenter>
            <DataGridRowHeader Grid.RowSpan="2" SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical">
                <DataGridRowHeader.Visibility>
                    <Binding Path="HeadersVisibility" RelativeSource="{RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type DataGrid}}">
                        <Binding.ConverterParameter>
                            <DataGridHeadersVisibility>Row</DataGridHeadersVisibility>
                        </Binding.ConverterParameter>
                    </Binding>
                </DataGridRowHeader.Visibility>
            </DataGridRowHeader>
        </SelectiveScrollingGrid>
    </Border>
</ControlTemplate> 
```

# java - 从 Web 链接访问 .jnlp 文件时出错

> ID：14000876
> 
> 赞同：0
> 
> 时间：2012-12-22T07:17:51.037
> 
> 标签：java, http-status-code-404, jnlp, java-web-start

我在链接到文件的门户网站上上传了一个 java 应用程序`.jnlp`。该文件的链接在一个html文件`Launch.html`中，如下所示：

![在此处输入图像描述](../Images/464114887e39f75817023b110ca15668.png) 单击启动按钮时出现的错误如下：

> HTTP 错误 404.3 - 未找到
> 由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。

launch.jnlp 内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp codebase="" href="launch.jnlp" spec="1.0+">
<information>
    <title>BuisnessInternals</title>
    <vendor>Administrator</vendor>
    <homepage href=""/>
    <description>BuisnessInternals</description>
    <description kind="short">BuisnessInternals</description>
<icon href="Welcome2.png" kind="splash"/>
</information>
<update check="always"/>
<resources>
    <j2se version="1.6+"/>
    <jar href="BuisnessInternals.jar" main="true"/>
<jar href="lib/AbsoluteLayout.jar"/>
<jar href="lib/itext-pdfa-5.3.3-javadoc.jar"/>
<jar href="lib/itext-pdfa-5.3.3-sources.jar"/>
<jar href="lib/itextpdf-5.3.3.jar"/>
<jar href="lib/itext-xtra-5.3.3-javadoc.jar"/>
<jar href="lib/itext-xtra-5.3.3-sources.jar"/>
<jar href="lib/itext-xtra-5.3.3.jar"/>
<jar href="lib/itextpdf-5.3.3-javadoc.jar"/>   
<jar href="lib/itextpdf-5.3.3-sources.jar"/>   
<jar href="lib/itextpdf-5.3.3.jar"/>
<jar href="lib/beansbinding-1.2.1.jar"/>
<jar href="lib/eclipselink-2.3.2.jar"/>
<jar href="lib/javax.persistence-2.0.3.jar"/>
<jar href="lib/org.eclipse.persistence.jpa.jpql_1.0.1.jar"/>
<jar href="lib/barcode.jar"/>
<jar href="lib/itext-pdfa-5.3.3-javadoc.jar"/>
<jar href="lib/itext-pdfa-5.3.3-sources.jar"/>
<jar href="lib/itext-pdfa-5.3.3.jar"/>
<jar href="lib/itext-xtra-5.3.3-javadoc.jar"/>
<jar href="lib/itext-xtra-5.3.3-sources.jar"/>
<jar href="lib/itext-xtra-5.3.3.jar"/>
<jar href="lib/itextpdf-5.3.3-javadoc.jar"/>
<jar href="lib/itextpdf-5.3.3-sources.jar"/>
<jar href="lib/itextpdf-5.3.3.jar"/>
<jar href="lib/jcalendar-1.4.jar"/>
</resources>
<application-desc main-class="buisnessinternals.mainFrame">
</application-desc>
</jnlp> 
```

launch.html 内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>Test page for launching the application via JNLP</title>
</head>
<body>
    <h3>Test page for launching the application via JNLP</h3>
    <script src="http://java.com/js/deployJava.js"></script>
    <script>
        deployJava.createWebStartLaunchButton("launch.jnlp")
    </script>
    <!-- Or use the following link element to launch with the application -->
    <!--
    <a href="launch.jnlp">Launch the application</a>
    -->
</body>
</html> 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:34:09.573

在您的文件中指定 MIME 类型`JnlpDownloadServlet`

```
response.setContentType("application/x-java-jnlp-file"); 
```

阅读此[Java Web Start 教程](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)以获得清晰的理解。

**编辑**

```
<a href="launch.jnlp">Launch the application</a> 
```

您指定的上述 html 链接应该可以正常工作，请确保您`launch.jnlp`保留类似内容的文件路径`<a href="/somepath/launch.jnlp">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:57:54.413

似乎 Web 服务器需要一些额外的配置才能将 .jnlp 文件扩展名与 application/x-java-jnlp-file mime 类型相关联。

# java - 如何使用 Java 应用程序为我的 AppEngine 激活 SSL？

> ID：14000879
> 
> 赞同：1
> 
> 时间：2012-12-22T07:17:58.120
> 
> 标签：java, google-app-engine, gwt, ssl

请让我知道使用 SSL 配置我的自定义域 (http://www.myapp.in) 的过程。如果我确实遵循以下流程，是否可以保证我的应用程序安全？据我所知，Google 为我们提供的流程...“ [https://developers.google.com/appengine/docs/ssl](https://developers.google.com/appengine/docs/ssl) ”在此文档中，我发现该流程位于**激活**标题下方。

另外请告诉我“它是免费的吗？”

欢迎任何回复，在此先感谢。

萨蒂亚劳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:57:50.820

1.  这里的java没有什么特别之处。无论使用何种语言，在 GAE 上启用 SSL 始终相同。
2.  [https://appid.appspot.com](https://appid.appspot.com)上的SSL始终可用且免费。
3.  自定义域上的 SSL 需要花钱。连接本身是安全的（如果您使用有效的证书并保密）。但是，由您的应用程序来强制使用 SSL，并执行所有其他与安全相关的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:24:35.347

它是免费启用的。`secure:always`在您的配置文件 (app.yaml) 中添加该行： [https ://developers.google.com/appengine/docs/python/config/appconfig#Secure_URLs](https://developers.google.com/appengine/docs/python/config/appconfig#Secure_URLs)

# java - Java 代码安全

> ID：14000887
> 
> 赞同：5
> 
> 时间：2012-12-22T07:19:12.197
> 
> 标签：java, jar, obfuscation, deobfuscation

> **可能重复：**
> [您是否混淆了您的商业 Java 代码？](https://stackoverflow.com/questions/12088/do-you-obfuscate-your-commercial-java-code)

除了混淆之外还有其他方法可以保护罐子不被其他人打开吗？问题是我不希望任何人访问代码，这就是我不喜欢 Java 的原因。从我使用的反编译器来看，用 C# 和 Java 制作的程序具有完整的变量名称，这使得访问非免费程序变得容易。更糟糕的是，给出源代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:00:32.123

上面的评论涵盖了大部分这些要点，但我将在这里对其进行一些扩展：

如果你的代码在用户的机器上运行，用户可以反编译你的代码。它是什么语言并不重要。Java，C，空格，brainfuck，没关系。如果代码在计算机上运行，​​人类可以阅读它。即使您制作自己的自制语言和编译器，编译后的代码仍将是一系列标准机器指令，反编译器将轻松地将其转换为 C 或您喜欢的任何语言的可读代码。

***没有例外。忘掉它。***

但是有一些方法可以得到你想要的：保护一些秘密的业务逻辑。一种简单的方法是将业务逻辑放在您自己的机器上，并通过 Web 服务公开它。用户仍然可以看到客户端请求和服务响应，但您的逻辑是一个黑匣子。

您还可以制作自己的机器，将它们锁定，然后分发给用户。请注意，虽然这是可能的，但在技术上很难做到正确（想想所有被黑的游戏机和智能手机），并且会显着增加您的服务成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:52:12.207

据我所知，`jar`文件（使用 NetBeans 生成）可能只包含`.class`文件，这些文件是 Java 代码，而不是源代码。我不知道是否有办法对文件进行逆向工程，但它的*ASCII*可用文本`.class`很少。

# php - Zend_mail_storage_Pop3 的 getMessage 函数返回修剪后的标题

> ID：14000889
> 
> 赞同：1
> 
> 时间：2012-12-22T07:19:27.910
> 
> 标签：php, iconv, zend-mail

我正在使用 Zend_mail_storage_Pop3 类的 getMessage 函数来获取 mime 消息。我的 php 版本是 5.3.3。在某些情况下，getMessage 不会返回所有 mime 标头。

在进一步调查中，我发现 getMessage 函数是内部调用[`iconv_mime_decode_headers`](http://php.net/iconv_mime_decode_headers)函数，并且在某些情况下似乎正在修剪标题。

例如：如果主题标题是：`Subject: Reply "Is? white side-LED =?=" in Help` 其中包含字符`=?=`，则不返回主题之后的其余标题，如内容类型、日期等。

中是否存在已知错误`iconv_mime_decode_headers`？这个问题有什么可能的解决方案？

# yaml - 为 PyYAML 转储的一部分指定样式

> ID：14000893
> 
> 赞同：12
> 
> 时间：2012-12-22T07:19:43.083
> 
> 标签：yaml, pyyaml

我将 YAML 用于计算机，将人工可编辑和可读的输入格式用于模拟器。对于人类可读性，输入的某些部分大多适合块样式，而流样式更适合其他部分。

PyYAML 的默认设置是在任何有嵌套映射或序列的地方使用块样式，而在其他任何地方都使用流样式。*default_flow_style* 允许选择全流式或全块式。

但我想输出更多形式的文件

```
bonds:
- { strength: 2.0 }
- ...
tiles:
- { color: red, edges: [1, 0, 0, 1], stoic: 0.1}
- ...
args: 
    block: 2
    Gse: 9.4 
```

可以看出，这并没有遵循始终一致的样式模式，而是根据文件的部分而变化。本质上，我希望能够指定某些块样式序列中的所有值都是流样式。有什么方法可以对倾销进行精细控制吗？能够以特定顺序转储顶级映射而不需要该顺序（例如，omap）对于可读性也很好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T09:36:38.397

事实证明，这可以通过为我不想遵循 default_flow_style 的每个项目定义具有代表的子类来完成，然后在转储之前将所有必要的内容转换为那些。在这种情况下，这意味着我得到类似：

```
class blockseq( dict ): pass
def blockseq_rep(dumper, data):
    return dumper.represent_mapping( u'tag:yaml.org,2002:map', data, flow_style=False )

class flowmap( dict ): pass
def flowmap_rep(dumper, data):
    return dumper.represent_mapping( u'tag:yaml.org,2002:map', data, flow_style=True )

yaml.add_representer(blockseq, blockseq_rep)
yaml.add_representer(flowmap, flowmap_rep)

def dump( st ):
    st['tiles'] = [ flowmap(x) for x in st['tiles'] ]
    st['bonds'] = [ flowmap(x) for x in st['bonds'] ]
    if 'xgrowargs' in st.keys(): st['xgrowargs'] = blockseq(st['xgrowargs'])
    return yaml.dump(st) 
```

烦人的是，更易于使用的 dumper.represent_list 和 dumper.represent_dict 不允许指定 flow_style，所以我必须指定标签，但系统确实可以工作。

# node.js - 如何将单个 Node.js 文件拆分为单独的模块

> ID：14000898
> 
> 赞同：29
> 
> 时间：2012-12-22T07:20:40.360
> 
> 标签：node.js, npm

我想将代码拆分为不同的文件。我目前将所有`get`和`post`方法都写在同一个文件中，但我想要更高的可读性和可管理性。

我尝试将代码放在不同的文件中，但是在运行主应用程序时，无法调用其他文件中的其余部分`get`和方法。`post`我包括这个：

> var Db = require('/filename.js'); // ...但我不能调用这些方法。

我想拆分我的单个文件代码以提高可读性。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-22T14:37:12.310

只需查看[模块文档](http://nodejs.org/api/modules.html#modules_file_modules)：

从 / 开始寻找绝对路径，例如：

```
require('/home/user/module.js'); 
```

./ 以调用文件所在的路径开头。

```
require('./lib/module.js'); 
```

__dirname 与 ./ 具有相同的效果：

```
require( __dirname + '/module.js'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-22T07:52:17.167

尝试：

```
var Db = require('./filename.js'); 
```

或者

```
var Db = require('filename.js'); 
```

另外，看看这篇[博文](http://www.bennadel.com/blog/2169-Where-Does-Node-js-And-Require-Look-For-Modules-.htm)。

# c# - webservice (iisexpress) 保持文件打开

> ID：14000899
> 
> 赞同：-1
> 
> 时间：2012-12-22T07:20:45.083
> 
> 标签：c#, web-applications, iis-express

我需要创建一个 sema4 文件，如果另一个会话已经尝试通过事务执行相同的“事务”，则限制其他会话尝试打开/写入数据库，在这种情况下，进行已经“进行中”的类似预订.

这是代码：

```
 HttpSessionState ss = HttpContext.Current.Session;
  string sessionID = ss.SessionID;
  DirectoryInfo di = new DirectoryInfo(dataDirectory + "Semaphores");
  string facilityIDExt = requestedFacilityID.ToString().PadLeft(3, '0');
  string sema4File = string.Format("{0}.{1:yyyyMMdd}.{2}", sessionID, RequestedStartDT, facilityIDExt);
  sema4FilePath = Path.Combine(di.FullName, sema4File);
  File.Create(sema4FilePath);

  FileInfo[] fiPaths = di.GetFiles(string.Format("*.{0}", facilityIDExt));
  bool bookingInProgress = true;
  int waitPeriod = 60;
  while (waitPeriod > 0 && bookingInProgress)
  {
    fiPaths = di.GetFiles(string.Format("*.{0}", facilityIDExt));
    bookingInProgress = false;
    foreach (FileInfo item in fiPaths)
      if (item.Name.Contains(string.Format("{0:yyyyMMdd}.{1}", RequestedStartDT, facilityIDExt)) && item.Name != sema4File)
      {
        if (item.LastWriteTime > DateTime.Now.AddMinutes(-1))
        {
          bookingInProgress = true;
          break;
        }
      }
    System.Threading.Thread.Sleep(5000);
    waitPeriod = waitPeriod - 5;
  } 
```

这个想法是实际预订将花费不到 60 秒的时间记录在数据库中，但与此同时，不允许其他预订请求。

我遇到的问题是，当我调用以下命令时：

```
 if (File.Exists(sema4FilePath))
         File.Delete(sema4FilePath); 
```

iisexpress 不会删除该文件，因为它“正在使用”。iisexpress 正在“使用”它。

我认为这也会发生在 iis 上。

我不明白为什么 iisexpress 保持 sema4 文件打开？

当我想删除 sema4 文件时，如何解决“正在使用”问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:24:03.277

当你这样做时：

```
File.Create(sema4FilePath); 
```

你得到一个 FileStream。您应该关闭它以释放它。最好将其包装成 using：

```
using (var stream = File.Create(sema4FilePath)) {
  // Do you stuff
} 
```

或者如果您不使用内容，则直接关闭：

```
File.Create(sema4FilePath).Close(); 
```

# javascript - 在服务器和客户端之间共享模型代码 (JavaScript)

> ID：14000903
> 
> 赞同：3
> 
> 时间：2012-12-22T07:21:04.073
> 
> 标签：javascript, node.js, model-view-controller

是否有任何 node.js CMF 可以在服务器和客户端之间轻松共享代码？所以我可以以某种方式描述我的模型一次，然后它会在服务器和客户端上自行工作？

我当然可以通过一些黑客攻击来使用 Backbone。但这不是明确的方法。

# ruby - 如何在助手中访问 Sinatra 的参数？

> ID：14000909
> 
> 赞同：4
> 
> 时间：2012-12-22T07:22:14.730
> 
> 标签：ruby, sinatra, helpers

如何`params`在自定义助手中访问 Sinatra 的哈希？

例如：

```
# in app/helpers/my_helper.rb
module MyApp
    module MyHelper
        def self.test ()
            params.inspect
        end
    end
end

# in app.rb
helpers MyHelper
test_result = test # undefined method `params' for MyApp:Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:04:50.413

您不需要`self`助手：

```
module MyApp
    module MyHelper
        def test()
            params.inspect
        end
    end
end 
```

请注意，助手仅在请求上下文中可用（即在处理请求期间）：

```
get '/' do
  test_result = test
  # ...
end 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-22T07:24:57.350

替换`params.inspect`为`params[:inspect]`。这应该有效。

# jquery - 使用 jquery 获取上一个点击的标签

> ID：14000914
> 
> 赞同：1
> 
> 时间：2012-12-22T07:23:44.480
> 
> 标签：jquery, html

> **可能重复：**
> [Jquery：单击时突出显示/取消突出显示表行](https://stackoverflow.com/questions/1287699/jquery-highlight-de-highlight-table-row-on-click)

我创建了一个包含几个 TR 标签的 html 表。现在我想要，当用户点击表格中的一行时，它会突出显示，而之前点击的则不突出显示。谁能告诉我该怎么做。我正在尝试使用 jquery 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:34:31.147

尝试这个：

```
// on click of any of the table cell...
$("td").click(function() {

    // Remove the active class from all the tr's
    $(this).closest("tr").siblings().removeClass("active");

    // Add the active class to the clicked table row...
    $(this).parents("tr").toggleClass("active", this.clicked);
}); 
```

*CSS*

这里没什么可看的，只是我们将准备好一个类名来处理“当前”行和列的实际样式。

```
.active { background-color: #eee; } 
```

[**在这里提琴**](http://jsfiddle.net/MaRyz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:35:21.193

这是一个简单的解决方案。它将类添加/删除`hilite`到最新的 clicked `<tr>`。

```
$( 'tr' ).on( 'click', function() {
    var classname = 'hilite';
    $( 'tr.' + classname ).add( this ).toggleClass( classname );
} ); 
```

你可以在这里测试它：http: [//jsfiddle.net/GvXKe/](http://jsfiddle.net/GvXKe/)

# c# - “声明的前缀”错误？XAML

> ID：14000918
> 
> 赞同：0
> 
> 时间：2012-12-22T07:24:40.597
> 
> 标签：c#, xaml, windows-8, monogame

我对这个错误有点困惑，只要它没有给我任何关于什么是错误的信息，我也找不到任何关于它的信息。这是错误的屏幕截图：

![在此处输入图像描述](../Images/06627e1b6433092493c0b0f145c9c179.png)

这发生在我将 SwapChainBackgroundPanel 包装在 Page 中之后，因为它导致 Windows 8 平板电脑模拟器出现问题。

有什么想法可能会在这里发生吗？我有点失落。任何帮助是极大的赞赏！（这是一个 MonoGame XAML 项目）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:33:18.643

我发现了为什么这是一个问题；这很简单。如果您的 SwapChainBackgroundPanel 中有程序集信息，请将其移动到“页面”标签中。这将解决问题。记住也要从 SwapChainBackgroundPanel 中删除引用。换句话说：

```
 <Page 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
```

以前在 SwapChainBackgroundPanel 中

# php - 无法在 WAMP localhost 上使用 PHP 运行 .bat

> ID：14000924
> 
> 赞同：0
> 
> 时间：2012-12-22T07:26:16.353
> 
> 标签：php, batch-file, exec

几个小时以来，我一直在努力解决这个问题，但我无法取得任何进展。

现在，我已经将我的问题归结为简单的（也许？）任务，即尝试让 PHP 脚本在 localhost 上运行 .bat 程序。我正在使用 WAMP。

这是我当前的 PHP 文件：

`<?php system('cmd /c C:\Users\user\Desktop\open.bat'); ?>`

这就是它的全部内容。我在桌面上的 .bat 文件包含：

`notepad.exe C:\Users\user\Desktop\test.txt`

然后我在桌面上有一个名为 test.txt 的简单文本文件。我可以从命令行运行 .bat 文件，它工作正常，但 PHP 中没有。

这里有许多其他线程询问如何从 PHP 运行 .bat（例如：[如何从 PHP 运行 .bat 文件？](https://stackoverflow.com/questions/835941/how-do-you-run-a-bat-file-from-php)），我已经尝试了几乎所有我在网上读到的技术，但没有任何效果。

例如，我试过了

`exec('open.bat')`（与 .bat 在同一目录中）`shell_exec()`，改变文件，路径的位置，我真的不知道它是怎么回事。我没有在安全模式下运行 PHP。

也许有一些我应该知道的配置可以让它运行？或者也许我错过了一些非常明显的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T19:15:11.067

*您可能看不到记事本运行，因为它是一个交互式程序，并且 Web 服务器（正在尝试启动它）在与您*所在的用户会话不同的用户会话中运行。从命令行执行相同操作（例如`php -f`) 在这种情况下会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T19:05:35.480

你可以尝试使用`start /b C:\Users\user\Desktop\open.bat`而不是`cmd`

你也可能不得不逃避斜线，就像这样`\\`而不是`\`

所以，我建议你试试：

`<?php system('start /b C:\\Users\\user\\Desktop\\open.bat'); ?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T12:16:45.080

尝试这个....

```
<?php
$cmd = C:\Users\user\Desktop\open.bat;
function execInBackground($cmd) {
   if (substr(php_uname(), 0, 7) == "Windows"){
       pclose(popen("start /B ". $cmd, "r")); 
   }
   else {
       exec($cmd . " > /dev/null &");  
   }
}
execInBackground($cmd);
?> 
```

更多参考： http: [//php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# c# - 从我的多个列表对象中获取“是”的计数

> ID：14000925
> 
> 赞同：0
> 
> 时间：2012-12-22T07:26:19.907
> 
> 标签：c#

我想从我的多个 List(string) 对象中获取“ *yes ”的计数。*假设我有三个列表`sig1`，`sig2`并且`sig3`它们都包含“*是*”或“*否*”。我想从“是”和“否*”*的位置*得到*“`sig1`是”*的*计数。`sig2`*`sig3`*

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:45:00.587

我从您的问题中得到的是，您可能有 3 个具有相同数量项目的字符串列表，并且您想知道`yes`where`sign1`和`sign2`is`yes`和`sign3`is的计数`no`。

```
List<string> sign1, sign2, sign3;
int count = sign1.Where((item, index) => (sign1[index] == 'yes') &&
                                         (sign2[index] == 'yes') && 
                                         (sign3[index] == 'no')).Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:39:27.723

你的问题真的很难理解，但我猜这就是你想要的。

```
List<string> myAnswers = new List<string>() { "yes", "yes", "no" };
Int32 numberOfPositiveAnswers = myAnswers.Count(x => x.Equals("yes")); 
```

的值`numberOfPositiveAnswers`将是 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T07:45:40.967

因此，如果我理解正确，当列表 2 中相同索引处的项目为“是”且列表 3 的相同索引为否时，您希望从列表 1 中获取“是”计数。

```
 List<string> sig1 = new List<string>(new string[]{"yes","yes","yes"});
    List<string> sig2 = new List<string>(new string[] { "yes", "no", "yes" });
    List<string> sig3 = new List<string>(new string[] { "no", "yes", "no" });

    int count = sig1.Where((s, index) => s == "yes"
             && sig2.ElementAtOrDefault(index) == "yes" 
             && sig3.ElementAtOrDefault(index) == "no").Count(); 
```**

# java - 在java中使用while循环无法访问语句错误

> ID：14000930
> 
> 赞同：2
> 
> 时间：2012-12-22T07:26:31.580
> 
> 标签：java, if-statement, while-loop, control-flow, unreachable-statement

> **可能重复：**
> [为什么此代码给出“无法访问的语句”错误？](https://stackoverflow.com/questions/9302133/why-is-this-code-giving-an-unreachable-statement-error)

这似乎很简单的问题，我在一本书中找到了这个问题。如果有人帮我弄清楚为什么我会出错。

```
 do {
        System.out.print("inside do");
    } while (false);
    while (false) { // error
        System.out.print("inside while");
    }
    System.out.print("outside"); 
```

我想，据我说，输出应该**在 dooutside 里面**。但是，它显示**Compiler Error : Unreachable Statement**。然后，我试图弄清楚，为什么，它显示**Compilation error : Unreachable Statement***。所以，我像这样更改上面的代码

```
 boolean i = false;  
  do {
        System.out.print("inside do");
    } while (false);
    while (i) { // ok
        System.out.print("inside while");
    }
    System.out.print("outside"); 
```

现在，它显示了预期的输出，即**在 dooutside 内部**。所以，我的问题是 - 第一种和第二种情况有什么区别？另外，当我检查

```
if(false){ 
  //something here
   } 
```

然后，上面的代码执行没有任何错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T07:40:25.953

前两个示例之间的主要区别在于，在第一种情况下，条件是常数，而在第二种情况下则不是。

例如，如果您更改`boolean i = false;`为`final boolean i = false;`，您将得到相同的编译错误，因为 i 现在是一个常量。

不可达语句的规则在[JLS 14.21](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)中定义。特别是对于`if`允许可能是常数的`if(DEBUG)`结构有一个特殊的处理。`DEBUG`

至于`do / while`，里面的语句会执行一次，所以没有问题。

[有关此相关帖子](https://stackoverflow.com/a/13235726/829571)中常量的更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T07:29:30.843

编译器给你一个**Unreachable statement**错误，因为你的`System.out.print("inside while");`代码永远无法到达

```
while (false) { // error
    System.out.print("inside while");
} 
```

编译器知道这`while (false)`永远**不会**是真的，并警告你（有错误）关于死代码。

相反，如果您将变量放入`while`，因为变量的性质是它们可以*变化*（更改），编译器的静态分析不会识别无法访问的代码。（即使在许多情况下，您或我可以看到它并说“该代码永远不会运行”；编译器的分析相当肤浅，这不是它的主要工作。您可以使用更强大的分析和代码覆盖工具采用。）

在这方面`if (false)`，这是[JLS 必须说的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)：

> 例如，以下语句会导致编译时错误：
> 
> `while (false) { x=3; }`
> 
> 因为声明`x=3`；无法到达；但表面上类似的情况：
> 
> `if (false) { x=3; }`
> 
> 不会导致编译时错误。优化编译器可能会意识到该语句`x=3;`将永远不会被执行，并且可能会选择从生成的类文件中省略该语句的代码，但在`x=3;`此处指定的技术意义上，该语句不被视为“不可访问”。
> 
> 这种不同处理的基本原理是允许程序员定义“标志变量”，例如：
> 
> `static final boolean DEBUG = false;`
> 
> 然后编写代码，例如：
> 
> `if (DEBUG) { x=3; }`
> 
> 这个想法是应该可以将值`DEBUG`从 false 更改为 true 或从 true 更改为 false，然后正确编译代码，而无需对程序文本进行其他更改。

# android - 状态栏上显示的单行通知？

> ID：14000935
> 
> 赞同：1
> 
> 时间：2012-12-22T07:27:14.370
> 
> 标签：android, notifications

只是一个简单的问题：如何使单行通知在短时间内消失。

就像 Whatsapp 的一样：

![Whatsapp 通知](../Images/a0edd40a040a4bd5ea959e0dfabf6623.png)

我目前的通知代码还是很基础的：

```
Intent intent = new Intent("com.example.MyChat");
PendingIntent pIntent = PendingIntent.getActivity(context, 0, intent, 0);
Notification notification = new Notification.Builder(context)
        .setContentTitle("New message from " + name)
        .setContentText(message)
        .setSmallIcon(R.drawable.ic_launcher).setContentIntent(pIntent)
        .getNotification();

notification.defaults |= Notification.DEFAULT_SOUND;

NotificationManager notificationManager = (NotificationManager) context
        .getSystemService(context.NOTIFICATION_SERVICE);
notificationManager.notify(0, notification); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:36:43.270

您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)在短时间内调用，例如 5 秒。

您还可以使用在第一次出现通知时启动的服务，它可以在一段时间后取消通知。

在这里您可以使用取消通知，

```
NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.cancel(NOTFICATION_ID); 
```

看看这篇[文章](https://stackoverflow.com/q/3461743/1626878)，它也可能对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T19:59:52.627

这称为“ticker”，如果您设置了`tickerText`Notification 的属性，它会在状态栏上简要显示。

请参阅[setTickerText](http://developer.android.com/reference/android/app/Notification.Builder.html#setTicker%28java.lang.CharSequence%29)。

# sql-server - 设计存储ip表sql server

> ID：14000938
> 
> 赞同：1
> 
> 时间：2012-12-22T07:27:31.073
> 
> 标签：sql-server, database-design, ip

我正在为网站创建数据库并希望在用户登录时存储用户的 IP 地址，我应该为 IP 使用什么数据类型？是否需要支持 IPv6？

这个脚本好不好，需要解析IP吗？

```
CREATE TABLE [dbo].[temp](
    [id] [bigint] IDENTITY(1,1) NOT NULL,
    [userId] [bigint] NOT NULL,
    [ip] [varchar](40) NOT NULL,
    [dateTime] [datetime] NOT NULL,
 CONSTRAINT [PK_temp] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:53:12.577

这是描述如何在数据库中存储 IP 地址的[链接。](https://stackoverflow.com/questions/1038950/what-is-the-most-appropriate-data-type-for-storing-an-ip-address-in-sql-server)

# iphone - 如何获取字符串的 ASCII 值？

> ID：14000947
> 
> 赞同：0
> 
> 时间：2012-12-22T07:29:19.923
> 
> 标签：iphone, objective-c, ios

如何获取我在文本字段中输入的字符串的 ascii 值？我还想检查我输入的字母是小写、大写、逗号还是空格。该函数应返回 YES 或 NO。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

//    if (string.) {
//        <#statements#>
//    }

        [self performSelector:@selector(delayCall) withObject:nil afterDelay:0.1];

    return YES;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:37:40.393

这将对您有所帮助。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    char cStr = [string characterAtIndex:0];

    NSLog(@"%d",(int)cStr);

    return YES;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:34:41.083

```
//char to int ASCII-code
char c = 'b';
int asCode = (int)c;

//int to char
int i = 66; // B
c = (char)i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T07:43:07.577

首先从字符串中提取字符，然后将其分配给一个整数变量。现在这个 var 将包含输入字符的 ascii 值。

检查它的类型检查 ascii 范围让 x 是包含 ascii 值的变量然后

if( x>64 && x<91) 然后打印“Capital char” else if(x>96 and x<123) 然后打印“Small char” 等等逗号 x==44 空格 x==32

从字符串中获取字符 char c=String(index_pos);

# c# - 等效于 c# 中的 unsigned char *

> ID：14000949
> 
> 赞同：1
> 
> 时间：2012-12-22T07:30:26.053
> 
> 标签：c#, pinvoke

> **可能重复：**
> [在 c# 中等效的 unsigned char ** 并且必须将返回值写入文件](https://stackoverflow.com/questions/13991060/unsigned-char-equivalent-in-c-sharp-and-have-to-write-the-return-value-in-a-f)

我必须调用一个win32 dll函数

```
int func1(int arg1, unsigned char *arg2, int *arg3); 
```

我把包装好的c#写成

```
public extern int fuc1(int arg1, out IntPtr arg2, out IntPtr arg3); 
```

arg2 必须分配 2048 字节并将其发送到 win32 dll。我将得到 arg2 和 arg3 作为输出。

我如何在 c# 测试应用程序以及 c# 包装器中声明。我做得对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T07:39:58.910

C# 中的字节是无符号的 8 位整数。byte[] 是它们的数组。要获取指向此数组的指针，请使用：

```
 var myArray = new byte[2048];
 fixed(byte* arg2 = myArray)
 {
      // use arg2
 } 
```

或者：

```
 var myArray = new byte[2048];
 GCHandle pinnedRawData = GCHandle.Alloc(myArray, GCHandleType.Pinned);
 try
 {  
    // Get the address of the data array
    IntPtr pinnedRawDataPtr = pinnedRawData.AddrOfPinnedObject();
 }
 finally
 {
    // must explicitly release
    pinnedRawData.Free(); 
 } 
```

或者，如果被调用的函数不会缓存指向数组的指针，您可以简单地执行以下操作：

```
 public static extern int fuc1(int arg1, [In,Out] byte[] arg2, ref int arg3);

 var arg1 = 0;
 var arg2 = new byte[2048];
 int arg3 = 42; // If this value won't be used, you can skip initializing arg3 and mark arg3 as out instead of ref (of course, this is pedantic and extraneous, and C# shouldn't even have 'out' as a keyword)

 func1(arg1, arg2, ref arg3); 
```

P/Invoke 将自动固定它。

[MSDN 编组类型的数组](http://msdn.microsoft.com/en-us/library/aa719546(v=vs.71).aspx)

[相关的SO问题](https://stackoverflow.com/questions/2218444/when-passing-a-managed-byte-array-through-pinvoke-to-be-filled-in-by-win32-do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:22:57.520

像这样在 C# 中声明函数：

```
[DllImport(@"MyDll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int func1(
    int arg1, 
    StringBuilder arg2, 
    out int arg3
); 
```

然后这样称呼它：

```
int arg1 = ...;
StringBuilder sb = new StringBuilder(2048);
int arg3;
int retVal = func1(arg1, sb, out arg3);
string arg2 = sb.ToString(); 
```

请注意，C#`IntPtr`与 C 不匹配`int`。您需要 C#`int`来匹配它，因为`IntPtr`它与指针大小相同，无论是 32 位还是 64 位。但`int`始终是 4 个字节。

我假设您的 DLL 使用 cdecl 调用约定。如果您使用 stdcall，则可以进行明显的更改。

我还假设您的数据实际上是文本数据。如果它只是一个普通的旧字节数组，那么代码就更简单了。

```
[DllImport(@"MyDll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int func1(
    int arg1, 
    byte[] arg2, 
    out int arg3
); 
```

然后调用：

```
int arg1 = ...;
byte[] arg2 = new byte[2048];
int arg3;
int retVal = func1(arg1, arg2, out arg3); 
```

# php - PHP / Codeigniter - magic_quotes_gpc 错误

> ID：14000950
> 
> 赞同：1
> 
> 时间：2012-12-22T07:30:28.453
> 
> 标签：php, codeigniter

我刚刚将我的服务器升级到 PHP 5.3.19。

我在我的几个项目中使用 CodeIgniter ...现在每次加载 CI 项目时，我都会收到以下错误

```
Directive 'magic_quotes_gpc' is deprecated in PHP 5.3 and greater 
```

我想知道是否有人可以帮助我纠正这个错误。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:40:17.000

您的文件中有一个`magic_quotes_gpc`指令`php.ini`。它需要被删除。

PHP[手册](http://php.net/manual/en/info.configuration.php)指出...

> magic_quotes_gpc | "1" | PHP_INI_PERDIR | PHP <= 4.2.3 中的 PHP_INI_ALL。在 PHP 5.4.0 中删除。

# jquery - 用jquery修改浮点数不起作用

> ID：14000951
> 
> 赞同：0
> 
> 时间：2012-12-22T07:31:01.767
> 
> 标签：jquery, html, firefox, webpage, sticky

我有这个代码：

```
if(scrollTop < header.orgOffset) {
            document.getElementById('log').style.display = 'none';
            document.getElementById('lista').style.float = 'none';
            document.getElementById('lista').style.marginLeft = 'auto';
            header.element.css('background-color', 'transparent').css('width', '100%').css("box-shadow", "none").css('position', orgCSS.position).css('top','').prev().remove();
            if(i > 0)
                headers[i-1].element.css('z-index', 100);
        }
    }

    //stick headers
    for(i in headers) {
        var header = headers[i];
        //make sure any stuck headers are stuck in the right place(fast scrolling sometimes messes this up)
        if(isStuck(header))
            header.element.css('top','0')

        //skip this header if its bellow the top of the window
        if(scrollTop < header.orgOffset - parseInt(orgCSS.height)) 
            break;

        //if the header is already stuck then ignore it            
        if(!isStuck(header)) {
            if(scrollTop > header.orgOffset) {
                //stick the header
                document.getElementById('log').style.display = 'block';
                document.getElementById('lista').style.float = 'left';
                document.getElementById('lista').style.marginLeft = '20px';
                header.element.css("left", "0px").css("box-shadow", "0 0 5px #000").css('background-color', '#FFF').css('width', '100%').css('position', 'fixed').css('z-index','100').css('top','0').before('<div class=menu> </div>');
                if(i > 0)
                    headers[i-1].element.css('z-index', -1); 
```

这适用于我页面中的粘性标题。但是将 float 属性修改为 left 然后再修改为 none 在 Firefox 中不起作用。其他一切都很好，它在铬、rockmelt 和 safari 中都能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:00:59.047

您需要`cssFloat`用作样式属性而不是`float`Firefox。你可以参考[this](http://www.w3schools.com/jsref/prop_style_cssfloat.asp)和[this](https://developer.mozilla.org/en-US/docs/CSS/float)。

前任

```
document.getElementById('lista').style.cssFloat = 'left'; 
```

# ruby-on-rails - 是否可以设置较短的路线？

> ID：14000952
> 
> 赞同：3
> 
> 时间：2012-12-22T07:31:08.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

现在我有这样的路由设置。

```
resources :communities do
    resources :community_topics
end 
```

但我想要这样的路由

> 社区/32435/topics/745

是的，我想使用“主题”而不是 community_topics

谁能告诉我如何存档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:45:33.047

```
resources :communities do
  resources :community_topics, :path => 'topics'
end 
```

资源文档在[这里](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources)

# google-apps-script - 电子表格表格

> ID：14000953
> 
> 赞同：-3
> 
> 时间：2012-12-22T07:31:18.233
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我们可以创建一个电子表格表单并在用户登录时打开它吗？

我需要一个表格来记录员工登录时的出勤情况。另外我想验证代码，以便它必须仅在第一次登录时显示。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:38:06.967

除非您自己对用户进行身份验证，然后将其传递给谷歌，否则您要求做的事情是不可能的。尽管如此，您仍然需要培训您的用户登录您的特殊页面，他们可以通过直接登录谷歌来绕过表单。如果您正在查找登录历史记录，那么报告 API、域管理面板或 FlashPanel 可能会提供您搜索的报告类型。

# php - 在 rel 窗口中启动重定向 url？

> ID：14000958
> 
> 赞同：1
> 
> 时间：2012-12-22T07:32:23.037
> 
> 标签：php, iframe, hyperlink

我正在尝试将一段代码放入我的登录脚本中。如果用户帐户是特定类型，我希望它重定向到另一个 url。

这一点我知道该怎么做。但我希望 url 窗口在我网站上的漂亮照片框中打开。这是一种 css box iframe 窗口。我使用以下代码在其中打开了大部分链接：

```
<a href="something.php?to=<?php echo "$profile_id"; ?>?iframe=true&height=260"   rel="prettyPhoto[1]">Link</a> 
```

但是，当我尝试为我的重定向功能执行此操作时，它将无法正常工作。谁能告诉我为什么会这样，我正在输入这样的代码：

```
function redirect_to( $location = NULL ) {
        if ($location != NULL) {
            header("Location: {$location}");
            exit;
        }
    }

 <?php

$account_type = account_type();
while ($acctype = mysql_fetch_array($account_type)) 

 if ($acctype['account_type'] == 'free_member')  {
    redirect_to("chatboard.php?iframe=true&height=260\" rel=\"prettyPhoto[1]\""); 
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:47:54.170

好的，有几件事，我不确定你是如何设置的，但这就是应该的

```
 <?php

function redirect_to( $location = NULL ) {
    if ($location != NULL) {
        header("Location: {$location}");
        exit;
    }
}

$account_type = account_type();
while ($acctype = mysql_fetch_array($account_type)){

  if ($acctype['account_type'] == 'free_member')  {
     redirect_to('chatboard.php?iframe=true&height=260&rel=' . $prettyPhoto[1]); 
    }
}

?> 
```

并在您的 chatboard.php 上检查正确的变量，确保它们也从可能的攻击中清除。

# .net - Windows 窗体中的 TextBox 不显示 Unicode 字符

> ID：14000959
> 
> 赞同：2
> 
> 时间：2012-12-22T07:32:26.987
> 
> 标签：.net, vb.net, winforms, unicode

我在 VB.NET 应用程序的设置中有一个 Unicode 字符。

![设置中的unicode](../Images/fce5144f5156a36d41651535703453cd.png)

使用以下代码：

```
CurrencyText.Text = My.Settings.Options_Display_Currency 
```

我尝试在带有 Calibri 字体的文本框中呈现这个值，我看到一个像这样的框：

![在此处输入图像描述](../Images/8cf964039351526e381e239cbe7febb6.png)

如何使 Windows 窗体显示 Unicode 字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:15:11.707

It means the font used to display the character doesn't contain glyph for the character. Try a font like Arial or any font listed here [http://www.fileformat.info/info/unicode/char/20b9/fontsupport.htm](http://www.fileformat.info/info/unicode/char/20b9/fontsupport.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:29:45.573

用 RichTextBox 更改您的 TextBox，它可能会起作用。[默认编码](https://stackoverflow.com/a/592925/1471381)
也很有帮助。

# php - 如何在php中发布数组？

> ID：14000960
> 
> 赞同：-1
> 
> 时间：2012-12-22T07:32:30.863
> 
> 标签：php, arrays, post

如何将此数组发布到另一个页面。

```
大批
(
    [0] => 数组
        (
            [0] => 客户名称
            [1] => 任务 ID
            [2] => 子任务 ID
            [3] => 任务规范
            [4] => 计费分钟
            [5] => 总花费时间
            [6] => 处理者
        )

    [1] => 数组
        (
            [0] => 客户 1
            [1] => TAS1
            [2] => -
            [3] => 90
            [4] => 01:20:51
            [5] => 维诺德库马尔 M
        )

    [2] => 数组
        (
            [0] => 客户端 2
            [1] => TAS2
            [2] => -
            [3] => 60
            [4] => 02:04:42
            [5] => 维诺德库马尔 M
        )

)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:36:41.243

你可以把它放在会话中：

```
session_start();
$_SESSION['array_name'] = $array_name; 
```

或者，如果您想通过表单发送它，您可以将其[序列化](http://php.net/serialize)：

```
<input type='hidden' name='input_name' value="<?php echo htmlentities(serialize($array_name)); ?>" />

$passed_array = unserialize($_POST['input_name']); 
```

请注意，要使用序列化数组，您需要使用 POST 作为表单的传输方法，因为 GET 的大小限制约为 1024 个字符。

我会尽可能使用会话。

# javascript - clientHeight 在 JavaScript 中不起作用？

> ID：14000963
> 
> 赞同：1
> 
> 时间：2012-12-22T07:32:58.550
> 
> 标签：javascript, html

我正在学习 JavaScript 并创建了一个倒数计时器 HTML 页面，其中 javascript 代码似乎返回了错误`clientHeight`的正文。`<div>`即使重新调整浏览器大小，我也想在正文的中间（垂直）显示我的倒计时 HTML 。请告诉我哪里错了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CountDown Timer</title>
<script type="text/javascript" >
function countdown(){
    if(isNaN(document.getElementById("time").value))
    {
       document.getElementById("time").value = "Enter Valid Number";
       return;
    }
    else
    {       
       var i = document.getElementById("time").value;
       var j=setInterval(function (){document.getElementById("new").innerHTML = i; i--;
       if(i == -2){
         document.getElementById("new").innerHTML = "Welcome";   
         clearInterval(j);}},1000);
       }
    }

    function heightadjust(){
       document.getElementById("main1").style.top = ((document.body.clientHeight/2)+54).toString() + "px";
    }

</script>
</head>

<body onresize="heightadjust();" onload="heightadjust();">
<div style="margin:0 auto;" id="main1">
   <center>
     <div id="new" style="display:inline-block; padding:3px; font-size:60px; text-align:center; border:3px solid #000000; background-color:#CC3300; color:#FFFFFF; border-radius:6px;">Enter Time Below</div>
     <br />
     <input type="text" id="time" onfocus="this.value = ''; this.style.color = '#000000';" value="Enter Time here" style="color:#999999;" />
     <button onclick="countdown();" >Start</button>
   </center>
</div>

</body>
</html> 
```

请给我一些提示，`<div>`即使浏览器重新调整大小，如何保持垂直居中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:35:37.007

你不需要 JS。

```
#in_the_middle {
  position:fixed;
  left:50%;
  top:100%;
  width:200px;
  margin-left:-100px; /* MUST be equal to width * -0.5 */
  height:50px;
  margin-top:-25px; /* SHOULD equal height * -0.5, but can vary for different fx */
  line-height:50px; /* Remove if there may be more than one line inside */
} 
```

# android - Android EditText 没有外部蓝牙硬件键盘输入

> ID：14000966
> 
> 赞同：4
> 
> 时间：2012-12-22T07:33:29.347
> 
> 标签：android, keyboard, android-edittext

在我的平板电脑（Android 4.1.1 Asus）上测试我的应用程序时，我发现我的编辑文本不支持我的蓝牙键盘。没有输入！使用软键盘没问题。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <EditText android:layout_width="match_parent" 
            android:id="@+id/txtTuneScript" 
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:scrollbars="vertical" />              
</LinearLayout> 
```

我错过了editText的任何属性？任何想法？使用平板电脑上的其他应用程序（如 droidEdit），蓝牙键盘工作正常......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T15:57:01.190

我遇到了返回 true 的 KeyEventListner 的问题。

```
 ed.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View view, int i, KeyEvent keyEvent) {
            if (keyEvent.getKeyCode() == KeyEvent.KEYCODE_ENTER
                || keyEvent.getKeyCode() == KeyEvent.KEYCODE_TAB) {
                useData(result);
                finish();
            }
            return true;
        }
    }); 
```

令人惊讶的部分是虚拟键盘在处理事件的同时具有工作输入。

# php - 我创建了一个 html 表单并使用 php 我想获取数据并将其发布到容器内的另一个页面上

> ID：14000970
> 
> 赞同：0
> 
> 时间：2012-12-22T07:34:13.120
> 
> 标签：php, html, forms, posting

我很难将我的想法包装成文本，所以基本上这就是我想要这样做的方式。

我有 form.html，一旦完成，它会告诉用户感谢您填写并返回主页。然后使用php获取的数据将数据发布到gallery.html，在那里发布他们的图片和信息。

我该怎么做呢？如何将其发布到gallery.html 中的特定位置？你不需要我所有的工作，只是我似乎在这里或其他任何地方都找不到它，它可能真的很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:40:17.940

您最好的选择是设置一个简单的数据库来存储数据，确保您使用安全的做法将数据插入到数据库中。然后在图库页面上，您可以从 url 调用特定的 id 以显示正确的数据。像gallery.php?profile=5

在gallery.php 页面上，它会查询数据库以查找id #5，并从数据库中获取所有数据并在页面上回显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:54:20.663

**表单.html**

*   用户填写表格
*   用户点击提交
*   表单数据将用于处理页面，例如`thanks.php`

**谢谢.php**

*   收集表单数据
*   将其存储在数据库中
*   插入成功后重定向到homepage.php

**主页.php**

*   显示消息“感谢您填写表格”
*   在此页面中提供链接以查看用户的详细信息
*   像这样的东西`<a href=gallery.php?rowid=<?php echo <insert primary column value here from database>?">View Profile</a>`

**图库.php**

*   使用 $_GET 获取 id`$rowid = $_GET['rowid'];`
*   `$rowid`在`WHERE`数据库查询的子句中使用`$q = "SELECT * FROM <tablename> WHERE <primary key column name> = '".$rowid."'";`
*   使用返回的集合来显示该特定用户的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T07:57:54.920

您对 php 工作原理的理解是错误的，以下是我在您的帖子中可以识别的错误，

您将网页调用为 gallery.html，但没有 .php 扩展名，Apache 在收到请求时不会调用 php 解释器，因此您需要将其重命名为 gallery.php。

完成你的任务

这是方法

1>在你的form.html页面中设置form标签action=store.php方法=post的属性

2 > 在store.php 中连接mysql 数据库并将所有数据存储在mysql 数据库中，成功存储数据后显示感谢信息并重定向到主页

3 > 在您的gallery.php 文件中根据请求的ID 显示配置文件

注意： - 您需要在 mysql 中使用表和列设计数据库来存储配置文件详细信息

# python - Python - 从文件读入列表

> ID：14000971
> 
> 赞同：0
> 
> 时间：2012-12-22T07:34:13.833
> 
> 标签：python

这很简单，但我似乎无法做到正确。

我有一个包含表格中数字的文本文件

```
0 1 2
3 43 
5 6 7 8 
```

等等。

我想读取这些数字并将其存储在一个列表中，这样每个数字都是列表的一个元素。如果我将整个文件作为字符串读取，如何拆分字符串以分离这些元素？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:35:57.067

您可以像遍历行列表一样遍历文件对象：

```
with open('file.txt', 'r') as handle:
    numbers = [map(int, line.split()) for line in handle] 
```

一个稍微简单的例子：

```
with open('file.txt', 'r') as handle:
    for line in handle:
        print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:38:36.377

首先，打开文件。然后遍历文件对象以获取其每一行并在该行上调用 split() 以获取字符串列表。然后将列表中的每个字符串转换为一个数字：

```
f = open("somefile.txt")

nums = []
strs = []

for line in f:
    strs = line.split() #get an array of whitespace-separated substrings 
    for num in strs:
         try:
             nums.append(int(num)) #convert each substring to a number and append
         except ValueError: #the string cannot be parsed to a number
             pass 
```

nums 现在包含文件中的所有数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-22T07:36:10.663

> 如何拆分字符串以分离这些元素

[string.split()](http://docs.python.org/2/library/stdtypes.html#str.split)

# include - makefile 如何从这些重复项中选择头文件？

> ID：14000976
> 
> 赞同：1
> 
> 时间：2012-12-22T07:34:53.813
> 
> 标签：include, makefile, duplicates

这是一个小故事

这些天我试图追踪`Makefile`. 根据`EDK override mechanism`，一个组件同时使用覆盖路径下的同名源代码编译，其余在组件目录下。

假设有两个同名的头文件，目录路径如下：

组件目录 -`D:\outside\inner\hello.h`
覆盖目录 -`D:\outside\inner\overrides\hello.h`

因此，`D:\outside\inner\overrides`在编译期间使用。

但是，这里有一个问题！

众所周知，我们可以在 Makefile 中添加宏来指示包含路径。例如：

`INC = -I D:\outside\inner`

然后我添加了另一个包含路径，例如：

`INC = $(INC) -I D:\outside\inner\overrides`

如果我在 Makefile 中设置命令，例如：

`hello : hello.c hello.h`
`<Tab>gcc -c hello hello.c $(INC)`

编译器还会拿走覆盖路径下的 hello.h 文件吗？还是仅通过 INC 路径（组件路径）获取第一个找到的文件？

谢谢回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:06:17.310

`gcc`将使用它在包含路径中找到的第一个标头。您可以仔细检查我是否故意在其中一个头文件中犯了语法错误并查找错误消息。或者把它放在覆盖标题中：

```
 #warning "using overrides header" 
```

并寻找警告信息。

# python - Python - 拟合二维矩形数据

> ID：14000988
> 
> 赞同：3
> 
> 时间：2012-12-22T07:36:42.090
> 
> 标签：python, numpy, scipy, interpolation

我正在使用 python 2.7 编写一个程序，并且很难确定插入/拟合一些矩形数据的最佳方法。

我有一堆格式为 z=f(x,y) 的已知数据点，其中 x 和 y 在网格上均匀分布。我的 x 点范围从 0 到 100，增量为 0.1。我的 y 点范围从 0 到 100，以 2 为增量。

我在插值或拟合这些数据时遇到的问题是我的 y 数据坐标之间的间距很大。我正在寻找拟合此数据的最佳方法，以便我可以评估任何 (X,Y) 坐标对的高度 Z。我希望得到的表面尽可能光滑。使用 griddata 或 rectbivariatespline 的传统方法不会产生光滑的表面 - 似乎是因为我的 y 点之间的空间比我的 x 点之间的空间大得多。

我考虑的一个选择是使用 polyfit（或类似的东西）将多项式拟合到每个切片（每个 X 处的 Y 与 Z 曲线），然后将这些切片插值在一起以产生更平滑的表面。这似乎是一种迂回的做事方式。那是我最好的选择吗？

*将切片拟合到多项式的示例：* ![拟合数据](../Images/cc2caa233b869b095740984d53183aad.png)

如果适合多项式，我的每个切片（固定 X 处的 Y 与 Z）大致为高斯或双峰。它们是相当简单的分布。

我的目标是能够生成一个平滑、紧密贴合的表面，以便在 3D 或 pcolor 样式图表上显示。我需要避免摆动超过 Zmax 和 Zmin。我知道这是使用样条线时的问题。

*我的目标：*

![球门面](../Images/8fd02428f98ed013ea529130bc6495b9.png)

感谢您提供任何帮助。如果您需要任何详细说明，我会仔细查看此线程并快速回复。

**编辑：**

从我读过的内容来看，我正在寻找的是一种在 python 中用于 2d 数据的*形状保持*插值方法。我需要一些类似于 matlab 的 pchip 的东西，但是对于一个表面。我浏览了所有文档，但找不到任何可以保持表面光滑的形状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:12:38.250

> 使用 griddata 或 rectbivariatespline 的传统方法不会产生光滑的表面 - 似乎是因为我的 y 点之间的空间比我的 x 点之间的空间大得多”

您应该尝试适当地缩放 y 坐标 --- 至少 griddata 假定一个欧几里德度量，即所有维度的长度比例都是相似的。

如果您另一方面想要保持形状的插值，请[在此处](http://permalink.gmane.org/gmane.comp.python.scientific.user/31879)查看我的答案。但是，这样的插值不会进行任何平滑处理，所以也许这毕竟不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:20:22.910

您可以在 Google 代码存储库中尝试我的 BSD 许可的基于 numpy 和 scipy 的曲线和曲面拟合库：

[http://code.google.com/p/pyeq2/downloads/list](http://code.google.com/p/pyeq2/downloads/list)

它有很多例子，包括用于性能的 Python 并行编程。由于它是免费的，因此无需任何费用即可试用。

詹姆士

# gcc - 有没有办法让 gcc 禁用特定警告

> ID：14000992
> 
> 赞同：1
> 
> 时间：2012-12-22T07:36:49.470
> 
> 标签：gcc, warnings

我定义了一个 PRINTF 宏，如下所示：

```
#if(PRINTF_VERSION & PRINTF_DISABLE)
    #define CYPRINTF
#else
    #define CYPRINTF    printf
#endif 
```

但是当打印被禁用时，我收到以下警告：

```
warning: statement with no effect 
```

我尝试了以下解决方案，它适用于 GCC 编译器，但不能适用于不支持可变参数 MACRO 的编译器。

```
#if(PRINTF_VERSION & PRINTF_DISABLE)
    #define CYPRINTF(format, ...)
#else
    #define CYPRINTF    printf
#endif 
```

如何更改非日志记录宏以不发出警告？

笔记：

1.  我不想添加编译标志`-Wunused-value`。
2.  我不想使用可变参数 MACRO。
3.  禁用 printf 时，应删除所有代码以避免影响系统性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:39:26.063

您可以使用 gcc 的[诊断编译指示。](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas)而[这个](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:24:59.463

解决方案很简单：不要使用宏。

```
#if(PRINTF_VERSION & PRINTF_DISABLE)
int CYPRINTF(const char*, ...)
{ return 0; }
#else
#include <cstdarg>
int CYPRINTF(const char* format, ...)
{
    va_list args;
    va_start(args, format);
    int ret = vprintf(format, args);
    va_end(args);
    return ret;
}
#endif 
```

您还可以使用“格式”__attribute__ 指示 GCC 对格式字符串进行类型检查（参见[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T06:38:26.340

我知道这篇文章真的很老了，但试试这个：

```
#if(PRINTF_VERSION & PRINTF_DISABLE)
  #define CYPRINTF    (void)
#else
  #define CYPRINTF    printf
#endif 
```

void 强制转换应该告诉编译器该语句没有价值。我没有测试过它，但过去曾尝试过类似的东西。应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T14:36:20.430

只是为了添加另一个选项，我今天使用过。@Fëamarto 的回答很好，但对我不起作用，因为我使用复杂的打印和打印宏的多级包装。

但是 lambdas 有魔力：

```
#if(PRINTF_VERSION & PRINTF_DISABLE)
    #define CYPRINTF [](){return 0;}()
#else
    #define CYPRINTF    printf
#endif 
```

# c# - 从 INNER JOINED 表中检索列数据？

> ID：14000999
> 
> 赞同：0
> 
> 时间：2012-12-22T07:37:38.990
> 
> 标签：c#, mysql

我正在尝试选择一个表上的所有 (*) 数据列，并伴随着 INNER JOINing 另一个表来获取菜单项名称。请看看我的查询

```
string query = "SELECT ol.*, m.menu_name " +
                "FROM orderlist ol " +
                "INNER JOIN menudb m " +
                "ON m.menu_ID = ol.menu_ID " +
                "WHERE ol.order_ID = @orderID"; 
```

`m.menu_name`当我使用检索它时，我似乎无法获得`dr["menu_name"].ToString()`

任何想法为什么？

orderlist 表列

`orderlist_ID` `order_ID` `menu_ID` `order_quantity`

menudb 表列

`menu_ID` `menu_name` `menu_price` `menu_description` `menu_category` `menu_status`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:41:11.570

你的查询有很多问题。

**首先**，由于关键字之间缺少空格，您会遇到语法错误。

```
"ON m.menu_ID = ol.menu_ID" +     // << HERE
"WHERE ol.order_ID = '@orderID'"; 
```

你应该在之后添加一个额外的空间`ol.menu_ID`

```
"ON m.menu_ID = ol.menu_ID " +
"WHERE ol.order_ID = '@orderID'"; 
```

**其次**，如果您对查询进行了参数化，则不应将参数用单引号括起来。这导致成为字符串而不是参数。

```
"WHERE ol.order_ID = @orderID"; // remove single quote 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:40:03.927

之后你错过了空间`ol.menu_ID`。

```
"ON m.menu_ID = ol.menu_ID "+ 
```