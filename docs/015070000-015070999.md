# StackOverflow 问答 15070000-15070999

# jasper-reports - 根据值在 Jaspersoft iReport 中应用条件样式？

> ID：15070002
> 
> 赞同：3
> 
> 时间：2013-02-25T15:05:30.837
> 
> 标签：jasper-reports

我尝试根据值将条件样式应用到我的 iReport 中。以下是部分代码。它有效，但只有前景色。只是想知道如何让它也适用于字体大小。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Eligibility Report" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" whenResourceMissingType="Empty" uuid="519852db-b571-4ddd-86c0-9e09e13fb7e9">
    <property name="ireport.zoom" value="1.5"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>

    <style name="HBA1C">
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{HBA1C}.equals("Yes")]]></conditionExpression>
            <style forecolor="#000000"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{HBA1C}.equals("No")]]></conditionExpression>
            <style forecolor="#FF0000" backcolor="#FF0000" fontSize="40"/>
        </conditionalStyle>
    </style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:53:14.183

背景的默认设置可能设置为透明。您需要添加属性`mode="Opaque"`。确保将使用此样式的元素不会覆盖此设置。

```
<style forecolor="#FF0000" backcolor="#FF0000" mode="Opaque" fontSize="40"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T02:28:28.383

如果只有两种样式，您可以创建两个具有不同样式的字段并使用“表达式时打印”

# .net - .NET Windows 窗体 Datagridview mousedown 事件未触发

> ID：15070010
> 
> 赞同：0
> 
> 时间：2013-02-25T15:05:45.870
> 
> 标签：.net, vb.net, datagridview, mouseevent, visual-studio-debugging

我有一个在 Visual Studio 2005 上用 VS.NET Visual Basic 编写的应用程序。

它有一个 Windows 窗体，上面有一个`DataGridView`控件来显示从数据库中检索到的数据。

我希望允许用户右键单击记录，查看上下文菜单并能够单击删除以从数据库中删除该记录。

不幸的是，我什至无法按下鼠标或单击事件来触发（在调试模式下，设置了断点）

这是我的代码：

```
Private Sub DataGridView1_CellClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellClick
    MessageBox.Show("You right-clicked on the grid at", "Unpaid", MessageBoxButtons.OK)
End Sub

Private Sub DataGridView1_CellMouseDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseDoubleClick
    MessageBox.Show("You right-clicked on the grid at", "Unpaid", MessageBoxButtons.OK)
End Sub

Private Sub DataGridView1_CellMouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseDown

    If e.Button = Windows.Forms.MouseButtons.Right Then
        MessageBox.Show("Clicked right")
    else 
        MessageBox.Show("Clicked left")
    End If

    Dim r As Rectangle
    if (e.RowIndex >= 0 && e.ColumnIndex >= 0 && e.Button == MouseButtons.Right)
        DataGridView1.Rows(e.RowIndex).Selected = True
        r = DataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, True)
        contextMnu.Show(DataGridView1, r.Left + e.X, r.Top + e.Y)
    End If
End Sub

Private Sub DeleteChequeToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles DeleteChequeToolStripMenuItem.Click
    MessageBox.Show("You right-clicked on the grid", "Unpaid", MessageBoxButtons.OK)
End Sub 
```

如您所见，我正在尝试获取一些事件，任何要触发的事件，当我右键单击甚至左键单击时，没有任何代码正在运行。

顺便说一句，运行时网格中有数据，据我所知，它已启用

那么我在这里做错了什么？我需要向`DataGridView`控件添加一些功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:48:38.180

我正在使用您的代码，当单击填充的 datagridview 中某处的单元格时，CellMouseDown 工作。我在设计时手动填充了数据。在运行时模式下我没有尝试过。

即使没有填充，您也可以获得空的 DataGridView1 来触发事件 MouseDown() 和 DoubleClick()。但是，这本身并不知道您正在单击哪些单元格。此外，MouseDown 将优先于 DoubleClick，您不会在此处看到双击。

```
 Private Sub DataGridView1_MouseDown(sender As Object, e As MouseEventArgs) Handles     DataGridView1.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Right Then

        MessageBox.Show("Clicked right")
    Else
        MessageBox.Show("Clicked left")
    End If
 End Sub

 Private Sub DataGridView1_DoubleClick(sender As Object, e As EventArgs) Handles DataGridView1.DoubleClick
    MessageBox.Show("Double Clicked")
 End Sub 
```

[编辑 2/25/2013]

我尝试使用以下代码将数据动态添加到 datagridview：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim testData As New List(Of String)
    testData.Add("1")
    testData.Add("2")
    testData.Add("3")
    Dim dataBindingSource As New BindingSource
    dataBindingSource.DataSource = testData
    DataGridView1.DataSource = dataBindingSource
End Sub 
```

我仍然可以触发 DataGridView1_CellMouseDown 事件。也许您可以尝试一个仅使用 datagridview 的空项目并尝试看看您的问题可能出现在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:12:09.913

非常抱歉我的愚蠢（VS 的初学者，来自 VB6）。

事实证明，VB 项目设置将 Build only on Compile for release 设置为 True，所以即使我认为我正在运行更改后的代码，但我没有！

所以在我改变它并运行 Project...Clean 然后是 Project... Build 我的事件开始工作。

不管怎么说，还是要谢谢你！菲利普

# php - 从类中发出查询/准备好的语句

> ID：15070011
> 
> 赞同：0
> 
> 时间：2013-02-25T15:05:49.967
> 
> 标签：php, mysqli

我有一个正在使用的课程：

```
class SlayWork
{
     public function AllowDB ()
     {
          $MySQLi = new mysqli(DBAHost, DBAUsername, DBAPassword, DBADB);
     }
} 
```

我将如何从此类中的另一个公共功能与我的数据库进行通信？例子：

```
public function GetTest ()
{
   $Var = $MySQL->prepare("SELECT * FROM test");
   $Var->execute();
   $Var->bind_result($ID, $Uname);
} 
```

添加

```
public $MySQLi  = new mysqli(DBAHost, DBAUsername, DBAPassword, DBADB); 
```

没有公共函数返回：

> 解析错误：语法错误，第 16 行 C:\xampp\htdocs\Error\ClassWork.php 中的意外“新”（T_NEW）

使用公共函数添加`global`返回：

> 解析错误：语法错误，意外 '='，期待 ',' 或 ';' 在第 18 行的 C:\xampp\htdocs\Error\ClassWork.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:11:12.977

创建一个空属性，如`private $db_conn;`. 然后创建一个类构造并在其中创建如下连接：

```
$this->db_conn = new mysqli(DBAHost, DBAUsername, DBAPassword, DBADB); 
```

现在，每次实例化您的类时，您都会连接到数据库，并且您调用的所有方法都将能够与您的数据库进行通信。

# 例子：

*类.php*

```
class Database {
    private $db_conn;

    public function __construct() {
        $this->db_conn = new mysqli(DBAHost, DBAUsername, DBAPassword, DBADB);
    }

    public function GetTest () {
       $Var = $this->db_conn->prepare("SELECT * FROM test");
       $Var->execute();
       $Var->bind_result($ID, $Uname);
    }
} 
```

# html - 在 CSS 中使用 Z-index

> ID：15070012
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:05:49.853
> 
> 标签：html, css

我有 3 个 div。我正在尝试将#cover div 放在#cover-overlay div 后面，该 div 应该在#user-stuff div 后面。我似乎无法让我的 z-index 正常工作。我究竟做错了什么？

JSFIDDLE：http: [//jsfiddle.net/BafSL/1/](http://jsfiddle.net/BafSL/1/)

我的 CSS：

```
#cover {
position: relative;
height: 350px;
width: 920px;
/*  background: url('http://images.nationalgeographic.com/wpf/media-    
live/photos/000/621/cache/praia-dos-tres-irmaos-beach-portugal_62194_990x742.jpg') no-   
repeat center center; */ 
background: url('https://sphotos-b.xx.fbcdn.net/hphotos-
ash4/486464_10150990114607410_529660447_n.jpg') no-repeat center center; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
z-index: 0;
}

#cover-overlay {
position: absolute;
top: 0px;
-webkit-background-clip: border-box;
-webkit-background-origin: padding-box;
-webkit-background-size: auto;
background-attachment: scroll;
background-clip: border-box;
background-color: rgba(0, 0, 0, 0);
background-image: -webkit-linear-gradient(bottom, rgba(0, 0, 0, 0) 0px, rgba(0, 0, 0,    
0.54902) 100%);
background-origin: padding-box;
background-size: auto;
bottom: 50px;
color: rgb(51, 51, 51);
display: block;
font-family: Arial, sans-serif;
font-size: 14px;
height: 200px;
line-height: 16px;
position: absolute;
text-align: center;
text-shadow: rgb(255, 255, 255) 0px 1px 0px;
width: 100%;
z-index: 10;
}

#user-stuff {
margin: 0px 0px 0px 0px;
padding: 40px 0px 20px 10px;
height: auto;
width: 400px;
z-index: 20;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:08:35.997

[`z-index`](https://developer.mozilla.org/en-US/docs/CSS/z-index)仅适用于定位元素，因此您需要向用户内容 div 添加位置。

```
#user-stuff {
    margin: 0px 0px 0px 0px;
    padding: 40px 0px 20px 10px;
    height: auto;
    width: 400px;
    position:relative;
    z-index: 20;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BafSL/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:10:06.427

`position`中没有`#user-stuff`：

```
#user-stuff {
    margin: 0px 0px 0px 0px;
    padding: 40px 0px 20px 10px;
    height: auto;
    width: 400px;
    z-index: 20;
    position: relative;
} 
```

# javascript - 使用 javascript 将 html 写入新窗口

> ID：15070023
> 
> 赞同：2
> 
> 时间：2013-02-25T15:06:12.833
> 
> 标签：javascript, jquery, ajax, new-window

我一直在做一些关于打开一个新窗口并使用 jQuery/JavaScript 将 HTML 写入它的研究，看起来正确的方法是：

为新窗口创建一个变量

```
var w = window.open(); 
```

插入新数据并使用变量

```
$(w.document.body).html(data); 
```

对我来说，这完全有道理。但是，当我尝试将其合并到我的脚本中时（“数据”是 HTML 的持有者），它不会打开一个新窗口......除非我只是错过了一些简单的东西，据我所知它看起来很棒。 ..

```
function newmore(str) {
    var identifier = 4;
    //get the history
    $.post("ajaxQuery.php", {
        identifier : identifier,
        vanid : str
    },
    //ajax query 
    function(data) {
        //response is here
        var w = window.open();
        $(w.document.body).html(data);
    });//end ajax                
} 
```

有任何想法吗？

PS 控制台中似乎没有错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:24:46.830

您的新窗口可能被大多数浏览器内置的弹出窗口阻止程序阻止。如果您创建新窗口作为用户操作（键、单击）的直接结果，那么浏览器通常不会阻止它。但是，如果您等到稍后的某个时间（例如在 ajax 调用完成之后），那么它将被阻止，这可能就是您的情况。

因此，修复通常是立即创建窗口以直接响应用户事件（不要等到 ajax 调用完成），将窗口句柄保存在变量中，然后在 ajax 调用后将内容放入窗口中完成。

```
function newmore(str){
    var identifier = 4;
    // create window immediately so it won't be blocked by popup blocker
    var w = window.open();
    //get the history
    $.post("ajaxQuery.php", {
        identifier : identifier,
        vanid : str
    },
    //ajax query 
    function(data) {
        //response is here
        $(w.document.body).html(data);

    });//end ajax                

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:10:18.803

请尝试：

```
var w = window.open();
w.document.write(data); 
```

文档对象的“innerHTML”属性（这是 jQuery`.html()`使用的）表示 HTML 文档，新窗口没有。即使这样做了，将完整的文档*放入*HTML 文档中也没有任何意义。这是一个新创建的文档，因此您可以直接对其进行写入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T15:26:49.430

这种和平的代码将起作用：

```
var data = "<h1>Test</h1>";
var w = window.open("", "mywindow1", "width=350,height=150");
$(w.document.body).html(data); 
```

打开新窗口时必须告知一些参数。

但是，如果可能的话，我几乎不建议您使用另一种方式，例如 jquery UI 或 Twitter Bootstrap，因此您不会使用弹出窗口。

# java - Java (IntelliJ Idea) - 导入类失败

> ID：15070028
> 
> 赞同：1
> 
> 时间：2013-02-25T15:06:34.217
> 
> 标签：java, jsp, intellij-idea

我有一个 jsp 页面，它从另一个模块和包中导入一个类。

```
<%@ page language="java" import="login.UserLogin" %>
<%@ page contentType="text/html; charset=windows-1251" %>

<html>
<head>
    <title>
        Page title
    </title>
</head>
<body>

<%-- Form to initiate POST --%>
<FORM name="test_form" method="post">
    <INPUT type="submit" name="submit" value="Make Post"><BR>
</FORM>

</body>
</html> 
```

我已经更正了 IDE 中的依赖关系，但仍然收到错误日志：

```
org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.index_jsp 
```

导入的类是空的，所以没有进一步的依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:10:58.850

您的 JSP 在内部编译为名为 [your_jsp]_jsp.java 的 servlet，而您的 IDE 说它无法找到该已编译的类。

您的问题是您的项目未编译/未部署在服务器中。或者你可能没有很好地配置输出目录...我不知道，我不使用intelliJ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:05:38.090

成立！Tomcat 部署配置中的错误 - 它引用了源文件夹而不是工件

# ios - 我需要在 iOS 的班级中声明 UIApplication SharedApplication 多少次？

> ID：15070035
> 
> 赞同：0
> 
> 时间：2013-02-25T15:07:04.643
> 
> 标签：ios, cocoa-touch, appdelegate

在我的 iOS 应用程序中，我需要从`AppDelegate`. 所以我就这样用

```
- (void)ViewDidLoad
{
    self.app = [[UIApplication sharedApplication] delegate];
    [self.app.arrayFromApp addObjects:self.myArray];
    [self.app loadSomething];
} 
```

我想知道当我声明上面的代码一次`ViewDidLoad`并且我可以从这个类中的任何地方（方法、变量等）访问时，这是否足够？

或者

当我必须访问数据时，是否需要在每个方法中声明该代码`AppDelegate`？

例子。

```
- (void)methodOne
{
 self.app = [[UIApplication sharedApplication] delegate];
 self.app.isTrue = self.isTrueOrNot;
}

- (void)methodTwo
{
 self.app = [[UIApplication sharedApplication] delegate];
 [self.app loadSomething];
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:08:53.927

是的，在你的班级里有一次就足以声明你是否使用`app`班级级别`ivar`

```
 self.app = [[UIApplication sharedApplication] delegate]; 
```

`app`如果您在类中声明为属性，则不需要在每个方法中声明它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:15:39.820

另一种选择是在您的 appdelegate.h 文件中定义它

```
#define APPLICATION ((AppDelegate*)([UIApplication sharedApplication].delegate)) 
```

只是一个简写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:29:02.580

我建议将 app 设为只读属性并懒惰地实例化它。

```
@interface ViewController : UIViewController

@property (readonly, nonatomic) AppDelegate *app;

@end

@implementation ViewController

@synthesize app = _app;

- (AppDelegate *)app
{
    if (_app == nil) {
        _app = [[UIApplication sharedApplication] delegate];
    }
    return _app;
}
@end 
```

# cocoa - 来自 .xib 的可重用 NSView

> ID：15070036
> 
> 赞同：10
> 
> 时间：2013-02-25T15:07:08.087
> 
> 标签：cocoa, interface-builder, nsview, appkit, nsviewcontroller

在我的应用程序的几个部分中，我需要一个控件，用户可以在其中输入密码。密码字段是安全的，但是我希望用户能够将字段切换为纯文本并检查拼写错误等。

密码字段本身没有问题。我将 NSSecureTextField 子类化以获得我想要的行为。我使它可绑定，所以我可以从另一个控件（例如，复选框）切换显示。

![在此处输入图像描述](../Images/35cac2e5f07a7c014266f50a5eb21c02.png) ![在此处输入图像描述](../Images/352549624c1cf0b11999c28703a8d683.png)

现在，我想在我的应用程序中的多个地方重用它。我可以在需要的任何地方简单地使用我的自定义安全文本字段旁边的复选框。但我更愿意将这些部分组合成一个可重用的组件。

所以我使用界面生成器创建了一个：

![在此处输入图像描述](../Images/91fca4ac5bf812fd19249672c1ab1a59.png)

现在，我如何在不同的窗口中使用它？我在窗口中添加了一个“自定义视图”组件，并适当地设置了它的类型：

![在此处输入图像描述](../Images/44035961a530761621225edb45e685ec.png)

但在运行时，我只是得到一个空白空间。

1 - 大概是因为我的视图是在 .xib 中定义的 - 我需要在代码中做一些事情来从 .xib 加载我的 PasswordView 实例；但我到底需要做什么？我很难解决这个问题。

**具体来说：**

*   **从 .xib 加载我的视图实例的流程/API 是什么？我正在努力寻找这方面的文档。**

*   **一旦我加载了我的视图实例，如何插入它来代替我的自定义视图“占位符”？大概我需要一个出口到我的自定义视图，但是然后呢？我是否只是将加载的实例分配给插座？我应该将它作为子视图添加到插座吗？**

*   **这个逻辑应该发生在哪里？在 init 内部，在 AwakeFromNib 内部？**

2 - 我知道我可以将 NSViewController 用于我的自定义视图（[示例](https://stackoverflow.com/questions/3742720/loading-nsview-subclass-from-a-xib)），并以这种方式加载它。但是我真的需要一个视图控制器吗？看来我应该能够创建独立视图并轻松实例化它们......但这也许不是 Cocoa 的“方式”？在我看来，应该有一种直接的方法来从多个 .xib 中组合视图，而不需要为每个子视图（可能只是一个文本字段或一个按钮）设置一个控制器，但我只是没有找到它。 ..

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:43:35.353

如果我从您的问题中得到答案-您有一个具有包含密码文本字段和复选框的窗口的 XIB。

并且您希望每次需要显示密码字段时都加载此 xib 窗口。

* * *

我建议你不要创建一个窗口，你可以创建一个带有 passwordTextField 和一个复选框的 NSView。

在所有窗口中绘制一个空视图，您可以将这个 xib 视图加载到该视图上，因此可以多次使用单个对象。

* * *

**编辑**：

这是我如何在主窗口上加载 labelView 的一些示例代码。

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize myLabelViewController;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    myLabelViewController=[[LabelView alloc] initWithNibName:@"LabelView" bundle:nil];
    [_window setContentView:[myLabelViewController view]];

}

@end 
```

标签视图.h

```
#import <Cocoa/Cocoa.h>

@interface LabelView : NSViewController

@end 
```

标签视图.m

```
#import "LabelView.h"

@implementation LabelView

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
    }

    return self;
}

@end 
```

# ruby-on-rails - 未应用 CSS 样式 - 来自 Agile Web Development With Rails 的 Depot

> ID：15070037
> 
> 赞同：0
> 
> 时间：2013-02-25T15:07:08.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sass

我现在为此苦苦挣扎了几个小时，尝试了我找到的所有解决方案，但没有运气。尽管如此，我第一次尝试从书中运行 Depot 示例是在没有应用任何 CSS 的情况下运行的。

我确定 scss 已编译，因为 chrome 向我显示 application.css、scaffolds.css 和 products.css 已加载。我尝试创建其他 css 文件 - 不是 scss - 但只有部分运气，只应用了一些样式 - 其余与用户代理样式表匹配并继承了一些脚手架.css 属性 - 但不是重要的。

我在 application.html.erb 中加载所有 css：

```
<%= stylesheet_link_tag "application", :media => "all" %> 
```

在同一个文件中，我声明类：

```
<body class="<%= controller.controller_name %>"> 
```

products/index.html.rb 中的表没有什么不寻常的：

```
<table>

<% @products.each do |product| %>
  <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
    <td><%= image_tag(product.image_url, class: 'list_image') %></td>
    <td class="list_description">
      <dl>
        <dt><%= product.title %></dt>
        <dd><%= truncate( strip_tags( product.description ), lenght: 80) %></dd>
      </dl>
    </td>
    <td class="list_actions">
      <%= link_to 'Show', product %><br/>
      <%= link_to 'Edit', edit_product_path(product) %><br/>
      <%= link_to 'Delete', product, confirm: 'Are you sure?', method: :delete %>
    </td>
  </tr>
<% end %>
</table> 
```

和 products.scss（我尝试从 .css.scss 重命名，但没有改变）

```
 .products {

    ​  table {
        border-collapse:  collapse;
      }
      ​
      table tr td {
        padding:5px;
        vertical-align:top;
      }
      ​
      .list_image {
        width:60px;
        height:70px;
      }
      ​
      .list_description {
        width:60%;
        ​
        dl {
          margin:0;
        }
        ​
        dt {
          color: #244;
          font-weight:bold;
          font-size:larger;
        }

        dd {
          margin:0;
        }
      }

    ​  .list_actions {
        font-size:x-small;
        text-align:right;
        padding-left:1em;
      }

    ​  .list_line_even {
        background: #e0f8f8;
      }

    ​  .list_line_odd {
        background: #f8b0f8;
      }
} 
```

我的 application.css 看起来像这样：

```
/*
 *= require_self
 *= require_tree .
 */ 
```

显然，出了点问题。我在 Rails 3.2.12 和 Ruby 1.9.3 上运行。Ruby on Rails 对我来说是新的，但我有强烈的学习欲望（而且我有一些时间学习——可能在接下来的几个月内不会发生）但是当我像这样被困住时，我会浪费时间，什么也学不到 -或几乎没有 - 新的:)

如果它被回答并且我碰巧没有找到正确的答案，非常抱歉，只需指出我正确的方向并给予推进器踢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:19:41.480

它应该是 products.css.scss 而不是 products.scss 在 /app/assets/stylesheets/

当我查看您的示例表时，在您的表上方放置一个带有 class="products" 的 div 标签。

```
<div class="products">
  <table>
  </table>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:10:19.463

我已经开始着手解决了。CSS验证器显示有错误：

> 遇到：“\u200b”（8203），后：“”

所以现在我正在手工编写代码，一个接一个的字符，没有从书中复制/粘贴。删除 tmp/cache 和 public/application.css 后看起来它正在工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T12:38:48.850

表声明需要类，所以在索引文件中应该是

```
<table class ="products">
```

书和可下载的文件都没有这样的方式，但是通过勘误表挖掘得到了答案。[https://pragprog.com/titles/rails4/errata](https://pragprog.com/titles/rails4/errata)

# c# - System.Windows.Forms.GroupBox 隐藏框架

> ID：15070040
> 
> 赞同：18
> 
> 时间：2013-02-25T15:07:16.703
> 
> 标签：c#, winforms

在 System.Windows.Forms.GroupBox 上，有没有办法隐藏它周围的框架？我尝试更改 FlatStyle 但这并没有达到我想要的效果。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T15:14:01.737

A`Panel`可能是一个更好的选择，但如果您`GroupBox`出于某种原因确实需要 a，您可以在[此处](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/cfd34dd1-b6e5-4b56-9901-0dc3d2ca5788/)修改代码以创建一个根本不绘制边框的子类。具体来说，您需要覆盖该`OnPaint`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T15:10:31.130

据我所知，这是不可能的。

尝试改用面板。

如果你愿意，你可以在顶部放一个标签，他们实际上做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T15:10:39.367

没有（缺少自定义绘画代码）。我认为在`Panel`这里使用更好的控制，虽然你没有得到文本标题（如果你需要，只需添加一个标签）。

# jquery - jQuery Superfish 菜单悬停或切换取决于屏幕大小

> ID：15070048
> 
> 赞同：0
> 
> 时间：2013-02-25T15:07:42.227
> 
> 标签：jquery, responsive-design, superfish

我正在开发一个响应式菜单，并希望菜单在屏幕尺寸大于 767 像素时在悬停时显示，并在屏幕尺寸小于 767 像素时打开切换。

有没有办法根据屏幕大小更改 eventType 的默认设置？即是否有可以以某种方式插入到代码中的媒体查询？

我在 Github 上使用 Karl Swedberg 的 Superfish 版本：

[https://gist.github.com/917446](https://gist.github.com/917446)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:12:45.307

检查屏幕尺寸：

```
var $width = $(window).width(); 
```

然后在负载上测试：

```
$(function(){
    var $width = $(window).width();

    if($width > 767){
        // do hover
    } else {
        // do toggle
    }
}); 
```

或者您可以将其粘贴在外部函数中，因为您需要在调整窗口大小时调用它：

```
function checkWidth($width){
    if($width > 767){
        // do hover
    } else {
        // do toggle
    }
}

$(function(){
    checkWidth($(window).width());
});

$(window).on('resize',function(){
    checkWidth($(this).width());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:09:09.930

您可以使用条件语句来检查屏幕大小并相应地绑定事件。你可以使用`.bind()`它。请参阅文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:47:05.173

您可能要考虑的另一个选项是使用 Superfish v1.5.9，它会自动使用点击打开触摸设备上的子菜单，同时支持鼠标悬停和键盘导航。

# java - 使用 Y 轴上的时间创建 AChartEngine TimeChart

> ID：15070059
> 
> 赞同：1
> 
> 时间：2013-02-25T15:08:11.970
> 
> 标签：java, android, time, achartengine

我有一些数据代表在特定时间回答的问题，例如

问题 1 于 00:00:20 回答。我正在尝试使用 AChartEngine 来表示这一点，但没有运气。首先，出于某种原因，我不能将 Y 值作为这种格式，猜测它不受支持或需要自定义，直到现在还没有找到实现的方法。

我的图表最后应该有值为 1、2、3、4、5.... 的 X 轴和 00:00:20、00:00:15、00:00:05、00 的 Y 轴:00:10.... 每个问题达到的时间保存在时间对象字段中。我尝试这种方法：

```
private void fillData() {
        int i = 0;
        for (Answer answer : getAnswers()) {
            i++;
            if (answer.getEstimatedAnswerTime() != null) {
                Log.d(TAG, String.valueOf(answer.getEstimatedAnswerTime()));
                myQuestionsTimeSeries.add(new Date(DateTimeHelper.getMillisFromTime(answer.getEstimatedAnswerTime())), i);
            }
        }
    } 
```

第一个问题，无法将时间值获取到 Y 轴并且无论如何都没有正确显示。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/6b4ed138937c16209c06d3af7ce1d2bb.png)

到目前为止，我想你明白我的意思。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:06:11.790

TimeChart 在 X 轴上显示格式化的日期标签。似乎您需要在 Y 轴上执行此操作。

只需创建一个常规 LineChart 并在 Y 轴上添加自定义标签：

```
// disable the default Y labels first
renderer.setYLabels(0);
// add several custom labels
renderer.addYTextLabel(y, "label"); 
```

# wcf - FaultedException：格式化程序在尝试反序列化时抛出异常

> ID：15070060
> 
> 赞同：1
> 
> 时间：2013-02-25T15:08:16.463
> 
> 标签：wcf, collections, deserialization, readonly, formatter

*App 在调用方法Save(A a)*时失败并出现异常；

 *{“格式化程序在尝试反序列化消息时抛出异常：反序列化参数[http://tempuri.org/:infs](http://tempuri.org/:infs)时出错。InnerException 消息是 \”类型 Collection Api.BrainDictionary.Editor.DataTrasferObjects, Version = 1.0.0.0, Culture =中性，PublicKeyToken = null]] \"，仅用于返回，将返回null。输入流包含集合的元素，如果实例的值为null，则无法添加。尝试在方法中初始化集合吸气剂。\". 有关详细信息，请参阅内部异常。"}

但**我的收藏“IFNLs”不是只读的**

```
 [DataContract]
    public class A
    {

            [DataMember]
            public List<B> GVs{get; set ;}

            [DataMember]
            public List<C> SREs{get;set;}

            [DataMember]
            public List<D> TEs{get;set;}

            [DataMember]
            public List<E> INFLs{get;set;}
    } 
```

* * *

```
[DataContract]
public class E
{
       [DataMember]
       public long Id {get;set;}

       [DataMember]
       public string Description{get;set;}
} 
```

如果 1\. 属性“Infls”为空，但不为空，则不会出现此错误；其他属性不为空。2\. 属性“Infls”不为空。其他属性为空。

B、C、D、E 类**不**相互引用。我认为，可能是，有约束力的报价是有限的。但是增加绑定引号对我没有帮助。我添加到 DataContractSerializerOperationBehaviour，并设置 maxItemsInObjectGraph，这个解决方案对我也没有帮助......*

# regex - 当 `CRLF` 之后不是数字时删除 `CRLF`

> ID：15070061
> 
> 赞同：0
> 
> 时间：2013-02-25T15:08:16.953
> 
> 标签：regex, newline, notepad++

我有一个具有这种结构的文件：

```
23141601       aaaa CRLF
23141602       bbbb CRLF
23141603       cccc CRLF
23141604       dddd CRLF
23141605       eeee CRLF
23141700       ffff CRLF
fffff CRLF //problem here
23141701       gggg CRLF 
```

我需要用初始数字打破每一行。例如删除此**CRLF**

```
23141700       ffff CRLF 
fffff 
```

`CRLF`该文件有 30.000 行，当 after`CRLF`不是数字时可以删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:13:48.910

当然这是可能的（使用 Notepad++ 版本 >= 6.0）

搜索

```
\r\n(?!\d) 
```

并一无所有

*   `Search mode = Regular Expression`.

`(?!\d)`是一个[否定的先行断言](http://www.regular-expressions.info/lookaround.html)，如果模式后面没有数字，则此断言为真`\r\n`。

# python - 在 Windows 上的 virtualenv 中安装 python-ldap

> ID：15070063
> 
> 赞同：7
> 
> 时间：2013-02-25T15:08:22.547
> 
> 标签：python, django, virtualenv

我正在开发一个使用 ldap 身份验证模块的 Django 项目。这在我们的服务器上运行，但我遇到了在我的 Windows 开发机器上运行它的问题。

我的环境正在使用 virtualevn，并且在尝试安装 pip python-ldap 时收到以下消息：

```
error: Unable to find vcvarsall.bat 
```

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2019-10-04T11:55:15.940

要扩展@Brandon 的答案，使用预制轮进行安装：

1.  确保您已安装 pip 19.2+：

    ```
    $ pip --version
    pip 19.2.3 
    ```

2.  检查您的 Python 版本和架构（32/64 位）[https://stackoverflow.com/a/10966396/1026](https://stackoverflow.com/a/10966396/1026)：

    ```
    $ python -c 'import sys; print(sys.version)'
    3.7.0 (v3.7.0:1bf9cc5093, Jun 27 2018, 04:59:51) [MSC v.1914 64 bit (AMD64)] 
    ```

3.  `*.whl`从[https://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap](https://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap)下载匹配的预构建

    例如，鉴于上面的 Python，我选择了“python_ldap‑3.2.0‑<strong>cp37‑cp37m‑win_ **amd64** .whl”

4.  安装它：

    ```
    pip install path\to\your.whl 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-25T15:15:02.060

不幸的是，许多 Python 模块无法在 Windows 上安装。您收到的错误是我永远无法修复的错误，即使网络上有大量可用信息。试试这个链接的预编译版本：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap](http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap)

# c# - DirectShow.Net 没有过滤器组合，但在 GSpot 中很好

> ID：15070066
> 
> 赞同：1
> 
> 时间：2013-02-25T15:08:34.063
> 
> 标签：c#, .net, video, directshow, directshow.net

我正在尝试使用“ [http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/) ”中的 DirectShot.Net 包装器从多个视频文件中提取帧。

每当我运行 DxScan 示例应用程序时。我得到一个“找不到中间过滤器的组合来建立连接”。WMV 文件、MP4 文件、AVI 文件会发生这种情况。我指向示例应用程序的任何媒体。

如果我使用 GSpot 编解码器工具打开任何视频并要求它渲染图形，它会毫无问题地这样做。所以机器绝对有能力播放内容。

我在Win 7 64位。针对 x64、x86 或 Auto 会引发相同的错误。包括以管理员身份运行 Visual Studio。

我已修改示例代码以尝试找到包含以下 Romain R 建议的视频媒体类型的正确 pin。

我在用着：

```
 IEnumPins epins;
            capFilter.EnumPins(out epins);
            IntPtr fetched = Marshal.AllocCoTaskMem(4);
            IPin[] pins = new IPin[1];
            while (epins.Next(1, pins, fetched) == 0)
            {
                PinInfo pinfo;
                pins[0].QueryPinInfo(out pinfo);
                IEnumMediaTypes mtypes;
                pins[0].EnumMediaTypes(out mtypes);
                AMMediaType[] types = new AMMediaType[1];
                while(mtypes.Next(1, types, new IntPtr()) == 0){
                    var majorType = types[0].majorType;
                    if (majorType == MediaType.Video)
                    {
                         //This is never reached
                    }
                }
            } 
```

对于 MP4 文件，它永远不会到达上面的注释行。但是对于 WMV 文件，演示现在可以正常运行。

据推测，这是因为它没有找到合适的 MP4 文件过滤器。这是模糊的，因为内容将在 Windows 媒体播放器中正常播放。

这是一个可能的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:20:54.147

`DxScan`sample 正在以不可靠的方式构建过滤器图，特别是假设它从为媒体文件提供的源过滤器中抓取的第一个 pin 是视频 pin。并非总是如此。更好的图形构建方法应该可以正常工作。您可能需要逐步了解您在哪一行有错误。最有可能的是，它将是采样采集器过滤器输入引脚的连接。

UPD。请注意，可能会发生原始过滤器没有输入引脚的情况，它需要介于两者之间的附加过滤器，即所谓的解析器/解复用器过滤器，它将流转换为视频帧和音频样本。DirectShow API 提供了`Render*`一些方法来帮助构建图形，建议该链的所需链接以及 DxScan 正在执行的直接连接可能会或可能不会成功。

也就是说，DxScan 可能不是最好的示例，原生 API 的 MSDN 示例/参考可能更适合使用 DirectShow。

您的游乐场和主要研究和 API 探索工具应该是来自 Windows SDK（GraphStudio 或[GraphStudioNext](http://code.google.com/p/graph-studio-next/)作为替代改进选项）的 GraphEdit，而不是 DirectShow.NET 包装库示例。

> 这是模糊的，因为内容将在 Windows 媒体播放器中正常播放。

WMP 不使用 DirectShow 进行播放。

# linux - 从匹配行替换某些位置

> ID：15070069
> 
> 赞同：0
> 
> 时间：2013-02-25T15:08:40.967
> 
> 标签：linux, bash, unix, sed, awk

如果开头是给定的字符串，我正在尝试替换一行中的某些位置。这是输入文件的示例：

```
...
line1 with details 100 2566 1222
line2 with details 258 5874 5455
TOTAL text here    425 9589 8984 
```

如果`"TOTAL"`在 line 的 biginning 处找到，我想用空格替换 20 到 27 的位置：

```
...
line1 with details 100 2566 1222
line2 with details 258 5874 5455
TOTAL text here             8984 
```

关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:12:03.217

使用`sed`：

```
sed 's/\(TOTAL.\{14\}\).\{8\}\(.*\)/\1        \2/' <file> 
```

此解决方案捕获前 19 个字符，跳过接下来的 8 个字符，并捕获该行的其余部分。

```
$ sed 's/\(TOTAL.\{14\}\).\{8\}\(.*\)/\1        \2/' <<EOF
...
line1 with details 100 2566 1222
line2 with details 258 5874 5455
TOTAL text here    425 9589 8984
EOF

...
line1 with details 100 2566 1222
line2 with details 258 5874 5455
TOTAL text here             8984 
```

如果您可以拥有`TOTAL`或`SUMA_`，只需使用：

```
sed 's/\(\(TOTAL\|SUMA_\).\{14\}\).\{8\}\(.*\)/\1        \3/' <file> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:19:10.047

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")：

```
perl -pe 's/TOTAL.{20}(.*)/sprintf "%s%s%s", "TOTAL", " "x20, $1/e' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:18:13.787

我想我会为此使用 perl：

```
perl -pe 'substr($_,20,8," "x8 ) if /TOTAL/' input-file 
```

但我认为你真正想要的是：

```
awk '/TOTAL/{ $2=""; $3="" } 1 ' input-file 
```

但是，如果您需要保持格式相同，您可以执行以下操作：

```
awk '/TOTAL/{ printf( "%s%30s\n", $1, $4 ); next } 1' input-file 
```

在格式字符串中具有适当的字段宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T15:25:38.200

和`awk`

```
awk '/^TOTAL/{$0= substr($0, 1, 19)"        "substr($0,28, length($0))}1' file 
```

或者如果所有行的列数相同

```
awk '/^TOTAL/{$0=sprintf("%s%27s", $1, $6)}1' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T17:00:17.443

有趣的是，答案使用`sed`, `awk`，`perl`但没有使用`bash`. 所以，这里是：

```
while read line
do
    if [[ $line == TOTAL* ]];then
        extract=${line:19:8}
        echo "${line/$extract/        }"
    else
        echo "$line"
    fi

done << END
line1 with details 100 2566 1222
line2 with details 258 5874 5455
TOTAL text here    425 9589 8984
END 
```

这并不完美，如果数字在同一行上重复，那么我们就会遇到问题。

# assembly - 减法 35-39=6 输出错误？

> ID：15070086
> 
> 赞同：1
> 
> 时间：2013-02-25T15:09:46.023
> 
> 标签：assembly, masm, x86-16

谁能解释为什么这段代码给了我错误的o/p

```
data segment
num1 db 35h
num2 db 39h
result db 00h
data ends
code segment
assume cs: code, ds: data
start:
            mov ax,data
            mov ds ,ax
            mov ax,0000h
            mov al,num1
            sub al,num2
            aas
            mov result,al
            int 03h
            code ends
end start 
end 
```

输出：

```
-g

AX=FF06  BX=0000  CX=0024  DX=0000  SP=0000  BP=0000  SI=0000  DI=0000
DS=146C  ES=145C  SS=146C  CS=146D  IP=0013   NV UP EI PL NZ AC PO CY
146D:0013 CC            INT     3
-d ds:0l10
146C:0000  35 39 06 00 00 00 00 00-00 00 00 00 00 00 00 00   59..............
- 
```

我期待AX是FF04。

我刚开始学习它，所以尽可能使用简单的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:21:45.087

您正在使用*unpacked*指令，它在 unpacked BCD **06**`aas`中给出结果**-4**，但您正在执行*打包*BCD 并且需要*打包*变体来获得正确答案**96**。****`das`****

# sql - 复杂查询重复结果（相同的id，不同的列值）

> ID：15070087
> 
> 赞同：0
> 
> 时间：2013-02-25T15:09:45.417
> 
> 标签：sql, postgresql

我有这个查询，工作得很好：

```
 SELECT * FROM
 (
 select
        p.id,
        comparestrings('marco', pc.value) as similarity
 from
        unit u, person p
        inner join person_field pc ON (p.id = pc.id_person)
        inner join field c ON (pc.id_field = c.id AND c.flag_name = true)
     where  ( u.id = 1 ) AND p.id_unit = u.id    

 ) as subQuery
 where
        similarity is not null
        AND
        similarity > 0.35
 order by
        similarity desc; 
```

让我解释一下情况。

表格：

*   `person`ID 作为列。
    *   `field`代表一列的表，例如`name, varchar`（类似的东西）
    *   `person_field`代表那个人和那个字段的价值。像这样：
    *   `unit`与这个问题无关

例如。：

```
 Person id 1
  Field  id 1 {name, eg)
  value "Marco Noronha" 
```

所以函数“comparestrings”返回一个从 0 到 1 的双精度数，其中 1 是精确的（'Marco' == 'Marco'）。

所以，我需要所有相似度高于 0.35 的人，我也需要它的相似度。

没问题，查询工作正常，正如它所预料的那样。但是现在我有一个新要求，即“person_field”表将包含一个更改日期，以跟踪这些行的更改。

例如。：

```
 Person ID 1 
 Field  ID 1 
 Value  "Marco Noronha"
 Date - 01/25/2013

 Person ID 1
 Field  ID 1
 Value  "Marco Tulio Jacovine Noronha"
 Date - 02/01/2013 
```

所以我需要做的是，只考虑最新的行！如果我执行相同的查询，结果将是（例如）：

```
 1, 0.8
 1, 0.751121
 2, 0.51212
 3, 0.42454
 //other results here, other 'person's 
```

假设我要带的值是 1, 0.751121（女巫是 DATE 的最新值）

我想我应该做类似 `order by date desc limit 1`...

但如果我这样做，查询将只返回一个人 =/

像：

```
 1, 0.751121 
```

当我真的想要：

```
 1, 0.751121
 2, 0.51212
 3, 0.42454 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:05:35.537

您可以`DISTINCT ON(p.id)`在子查询上使用：

```
 SELECT * FROM
 (
 select
        DISTINCT ON(p.id)
        p.id,
        comparestrings('marco', pc.value) as similarity
 from
        unit u, person p
        inner join person_field pc ON (p.id = pc.id_person)
        inner join field c ON (pc.id_field = c.id AND c.flag_name = true)
     where  ( u.id = 1 ) AND p.id_unit = u.id    
     ORDER BY p.id, pc.alt_date DESC

 ) as subQuery
 where
        similarity is not null
        AND
        similarity > 0.35
 order by
        similarity desc; 
```

请注意，要使其正常工作，我需要添加`ORDER BY p.id, pc.alt_date DESC`：

*   `p.id`: 要求`DISTINCT ON`（如果使用`ORDER BY`，第一个字段必须与 完全相同`DISTINCT ON`）；
*   `pc.alt_date DESC`：您提到的更改日期（我们订购 desc，所以我们每个都得到最旧的`p.id`）

顺便说一句，您似乎根本不需要子查询（只需确保`comparestrings`标记为`stable`or `immutable`，它就会足够快）：

```
SELECT
    DISTINCT ON(p.id)
    p.id,
    comparestrings('marco', pc.value) as similarity
FROM
    unit u, person p
    inner join person_field pc ON (p.id = pc.id_person)
    inner join field c ON (pc.id_field = c.id AND c.flag_name = true)
WHERE  ( u.id = 1 ) AND p.id_unit = u.id    
    AND COALESCE(comparestrings('marco', pc.value), 0.0) > 0.35
ORDER BY p.id, pc.alt_date DESC, similarity DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:14:01.170

更改`person`对子查询的引用，如下例所示（子查询是被调用的`p`）：

```
. . .
from unit u cross join
     (select p.*
      from (select p.*,
                   row_number() over (partition by person_id order by alterationdate desc) as seqnum
            from person p
           ) p
      where seqnum = 1
     ) p
     . . . 
```

这使用`row_number()`函数来识别最后一行。我使用了一个额外的子查询来将结果限制为最新的。您也可以将其包含在一个`on`子句或一个`where`子句中。

我也将 更改`,`为显式`cross join`.

# c# - 来自 txt 文件的链接生成器

> ID：15070094
> 
> 赞同：-3
> 
> 时间：2013-02-25T15:10:11.597
> 
> 标签：c#, hyperlink, generator

我的英语不太好，但我需要你的帮助；）我想创建一个简单的 c# 表单应用程序，该应用程序打开带有如下数据的 txt 文件：

```
abc1
abc2
qwe1 
```

并为我创建这样的链接：

```
http://website.com/q='abc1'`
http://website.com/q='abc2'`
http://website.com/q='qwe1'` 
```

...

我应该使用什么？有任何想法吗？

它应该是按钮：

打开 txt 文件 -> 生成链接

在左侧，我想从 txt 文件中获取原始数据，并在右侧生成链接。

就像在这张照片上： ![在此处输入图像描述](../Images/ada563dc20e6b9a4904563ccb1530d8e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:16:50.297

您可以像这样使用 smth 从文件中读取数据并直接填充`RichTextBox`. 请务必根据您的要求添加适当的验证。如果您想在其他地方重用这些链接，您需要将它们添加到某个应用程序级集合（即`List<string>`或数组）中

```
private void button1_Click(object sender, EventArgs e)
{

    string line = null;

    OpenFileDialog loadfile = new OpenFileDialog();
    loadfile.Filter = ".txt (files txt)|*.txt";
    if (loadfile.ShowDialog() == DialogResult.OK)
    {
        using (StreamReader reader = new StreamReader(loadfile.FileName))
        {
            while ((line = reader.ReadLine()) != null)
            {
                richTextBox1.AppendText(Uri.EscapeUriString(string.Format("http://website.com/q='{0}'", line)) + Environment.NewLine);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:12:50.427

我只会使用超链接标签控件。它称为 LinkLabel 及其在 winforms 工具箱中。

# ios - 将 apns 令牌与字符串进行比较？

> ID：15070095
> 
> 赞同：1
> 
> 时间：2013-02-25T15:10:14.443
> 
> 标签：ios, apple-push-notifications

我从 apns 开始，我们在应用程序委托中有一个方法，我们在其中接收 apns 令牌。我想将它发送到我的服务器，但前提是它与上次收到的令牌不同（我认为这是正确的做法？）。

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSString* newToken = [[NSString alloc] initWithData:deviceToken encoding:NSUTF8StringEncoding];
    NSString* oldToken = [[NSUserDefaults standardUserDefaults] stringForKey:@"lastToken"];

    if ([newToken isEqualToString:oldToken]) {
        // Nothing to do, token hasn't changed.
    }
    else {
        // 1) Send token up to my server.
        // 2) On successful send, overwrite local copy of token.
    }
} 
```

我在服务器上用来发送 apns 消息的库最终希望将令牌作为字符串（我正在使用[javapns](http://code.google.com/p/javapns/)）。所以我需要在某个时候转换它。我还想将其作为字符串存储在本地。有一个更好的方法吗？

最后，这两个字符串都会被自动释放吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:13:25.227

对于 APNS 令牌，您应该将它们存储为十六进制，因此：

```
NSMutableString* binaryString = [NSMutableString stringWithCapacity:deviceToken.length];
unsigned char* bytes = (unsigned char*) [deviceToken bytes];
for (int i = 0 ; i < deviceToken.length ; i++)
    [binaryString appendFormat:@"%02x", bytes[i]]; 
```

如果您使用的是 ARC，那么它们将被自动发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:19:08.430

我采取了与您类似的方法，对此我感到非常满意：

```
NSString *tt = [NSString stringWithFormat:@"%@",devToken];
NSString *deviceToken = [[tt substringWithRange:NSMakeRange(1, [tt length]-2)]stringByReplacingOccurrencesOfString:@" " withString:@""];       

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if (![[defaults valueForKey:@"deviceToken"] isEqualToString:deviceToken]) {
    [defaults setValue:deviceToken forKey:@"deviceToken"];
    [defaults synchronize];
} 
```

# php - 如何在 Codeigniter 中进行测验机制

> ID：15070099
> 
> 赞同：0
> 
> 时间：2013-02-25T15:10:17.693
> 
> 标签：php, codeigniter

我正在 Codeigniter 中构建一个简单的测验应用程序，在该应用程序中向用户呈现图像，他们将猜测它是对还是错。类似于“热与否”。

有 25 个问题，所有答案都是“是”或“否”。我可以选择创建 25 个页面并在隐藏字段中保留以前的结果，但这似乎有点冗长和愚蠢。

我有一个视图文件，其中唯一改变的是图像。所以我想我可以将图像路径作为变量传递并动态更改它，但我无法在更抽象的层面上解决如何记录每个答案的结果，然后在最后显示结果并插入数据库.

我遇到的问题是如何加载序列中的下一个图像并记录该结果。

附言

图像将始终以相同的顺序排列。它们是否是随机的并不重要，尽管那会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:21:15.643

在我看来，您有两种选择，使用 Ajax 或不使用 Ajax。

简单的第一个，没有 ajax ：

将数据从每个问题传递给另一个问题的最佳方法是使用会话变量对其进行排序。例如，您在一个名为 $answers 的数组中对答案进行排序，如下所示：

```
$answers = $this->session->userdata('answers');
$answers[] = ** NEW ANSWER HERE **
$this->session->set_userdata('answers', $answers); 
```

为了获得图像，您可以对控制器/模型中的数组中的所有问题（图像）进行排序，并检查会话中的 $answers 包含多少项以确定接下来要显示的图像！就那么简单 ！:-)

现在使用 ajax，一切都将几乎相同，唯一改变的是您需要使用 jquery/js 有点方便，以免刷新页面而只是更改图像（问题）。

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:23:55.017

通过在数据库中创建您的测验来存储带有基本表格的答案，例如：

```
| question   |
|============|
| id (PK)    |
| no         |
| image_path |

| choice      |
|=============|
| id (PK)     |
| question_id |
| value       |

| answer              |
|=====================|
| user_id (PK, FK)    |
| question_id (PK, FK)|
| choice_id (PK, FK)  |

| user                |
|=====================|
| id (PK)             |
| session_id or email | 
```

使用这样的模式，您可以轻松地使用键`no`以连贯的顺序或`RAND()`随机顺序呈现问题。该选项是可选的，但如果您想扩展您的测验，您可以使用它来扩展选项。

为给定用户查找下一个问题可能类似于

```
SELECT * 
FROM question as q 
JOIN answer as a
  ON q.id = a.question_id 
WHERE q.id NOT IN (SELECT question_id FROM answer WHERE user_id = :user_id) 
  AND a.user_id = :user_id 
ORDER BY q.no -- or ORDER BY RAND()
LIMIT 1; 
```

这样，您将得到用户尚未回答的第一个问题。除此之外，您要保留多少有关用户的信息取决于您。

**编辑（从第一条评论添加）**

您将需要在控制器中执行 2 个操作，一个用于获取要显示的内容并将 id 发送到视图，另一个用于从用户那里获取数据并将其存储到数据库中。

在您的模型中，您将需要 2 种方法（至少），一种用于获取下一个问题，另一种用于保存答案。我不知道代码点火器的细节，但这里是主要行：

```
Controller:
displayAction()
    get user id from user model (through session variable or session id)
        If you don't have a reference for the user, you need to create one and return it
    get next question from question model (user id as param)
    send the question data to the view

saveAction()
    get user id (through session variable or session id)
    get question id (from get or post param)
    if you use a database to store choices, validate that the choice is possible, based on the current question
    send user id, question id and the choice made to the answer model for storage
    redirect to displayAction() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:45:53.030

您可以通过在数据库中插入问题来实现这一点，其中包含以下字段：

ID - 问题的 ID。图片 - 此问题的图片名称，例如“question1Image.jpg” 正确答案 - 此问题的正确答案，如果答案都是“是”/“否”，您可以使用 INT。1 表示是，0 表示否。

现在您对数据库有疑问，在您的控制器 e 上可能会创建如下内容：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Quizz extends CI_Controller {
    public function questions($idquestion){
        $this->load->model('questions_model');
        //fetch the questions from the database
        $questions = $this->questions_model->get_questions();
        //if it's a post we'll check if the answer is correct and pass the next question to the view
        if($this->input->post()){
            $answered_question = $this->questions_model->get_question($idquestion-1);
            $question = $this->questions_model->get_question($idquestion);

            if($answered_question['correct_answer']==$this->input->post('answer')){
                //if the user answered correctly do something here
            }
            $data['question'] = $question;
            //the id of the next question you'll use it for the next post
            $data['next_question'] = $idquestion+1;
            $this->load->view('your_view', $data);
        }
        //it's the first time the user uses this so we'll load the first answer
        else{
            $question = $this->questions_model->get_question(1);

            $data['question'] = $question;
            //the id of the next question you'll use it for the next post
            $data['next_question'] = 2;
            $this->load->view('your_view', $data);
        }
    }
} 
```

在你看来，你可以有这样的东西：

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Question page</title>
</head>
<body>
    <?php //we'll use the codeigniter form helper to generate manually the form
    echo form_open('quizz/questions/'.$next_question); ?>
    <!-- This will load the image dynamically-->
    <img src="<?=base_url('public/images/'.$question['image'])?>">

    <label><input type="radio" name="answer" value="1">YES</label>
    <label><input type="radio" name="answer" value="0">NO</label>
    <button type="submit" >Submit</button>
    <?=form_close();?>
</body>
</html> 
```

该模型：

```
<?php
class questions_model extends CI_Model {

    public function __construct()
    {
        $this->load->database();
    }
    public function get_questions()
    {   
        return $this->db->get('questions_table')->result_array();
    }
    public function get_question($idquestion)
    {   
        $this->db->select('questions_table.*');
        $this->db->from('questions_table');
        $this->db->where('questions_table.id', $idquestion);
        return $this->db->get()->result_array();
    }
} 
```

# android - 加载指示器仍然是 Android 上的 Worklight 应用程序

> ID：15070102
> 
> 赞同：3
> 
> 时间：2013-02-25T15:10:25.027
> 
> 标签：android, ibm-mobilefirst

我问了一个问题.. [https://www.ibm.com/developerworks/forums/thread.jspa?threadID=470749](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=470749)

除非等待下一个修复包，否则是否有任何临时修复或解决方法来阻止此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:23:39.513

是的。您可以调用

```
setTimeout(function(){
   WL.Client.__hideBusy();
}, 500); 
```

从你的 wlEnvInit 函数。

# java - ArrayList 和 HashSet 插入性能测试结果让我很困惑

> ID：15070104
> 
> 赞同：1
> 
> 时间：2013-02-25T15:10:26.777
> 
> 标签：java, performance, collections

我写了一个类来测试arraylist和hashset之间的插入性能，正如我所料，hashset的插入性能会比arraylist好得多（可能是书欺骗了我），但是测试结果让我很困惑

```
 HashSet<String> hashSet = new HashSet<String>();

    long start = System.currentTimeMillis();
    for (int i = 0; i < 900000; i++) {
        hashSet.add(String.valueOf(i));
    }

    System.out.println("Insert HashSet Time: " + (System.currentTimeMillis() - start));

    ArrayList<String> arrayList = new ArrayList<String>();

    start = System.currentTimeMillis();

    for (int i = 0; i < 900000; i++) {
        arrayList.add(String.valueOf(i));
    }
    System.out.println("Insert ArrayList Time: " + (System.currentTimeMillis() - start));

result:
Insert HashSet Time: 978
Insert ArrayList Time: 287 
```

我多次运行这个主要方法，结果与此没有更多不同，插入数组列表时间比插入哈希集时间短得多，谁能解释这个奇怪的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:18:47.720

哈希集和列表是不同类型的数据结构。所以你应该在选择一个之前考虑一下你想用它们做什么。

> **哈希集**
> 
> 更长的插入时间
> 
> 快速访问元素
> 
> **列表**
> 
> 快速追加时间
> 
> 元素访问时间长

列表更快，因为它可以只在列表末尾添加元素，哈希集必须找到插入位置然后使元素可访问，这是更多的工作（时间），因为将其添加到列表的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:28:44.687

数据结构和算法的确切性能特征是高度特定于机器和实现的。`ArrayList`但是，对于我来说插入比`HashSet`插入快一个常数因子似乎并不奇怪。要插入`ArrayList`，您只需在数组中的特定索引处设置一个值。要插入哈希集中，您需要计算插入项目的哈希码并将其映射到数组索引，检查该索引并可能根据您找到的内容执行一些操作，最后插入到数组中。此外，这`HashSet`将具有更差的内存局部性，因此您将更频繁地获得缓存未命中。

还有数组调整大小的问题，这两种数据结构都需要这样做，但是两种数据结构都需要以大致相同的速率调整大小（并且由于重新散列，哈希表调整大小也可能因常数因素而更昂贵） .

两种算法都是恒定的（预期的）时间，但是与哈希表相比，与数组列表有关的事情要多得多。因此，它会因常数因素而变慢也就不足为奇了。（同样，确切的差异在很大程度上取决于机器和实现。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:25:14.377

实际上，您得到了正确的结果。此外，正如上述答案所指出的，这些是不同类型的数据结构。比较它们就像比较自行车和汽车的速度。我认为插入 a 的时间`HashSet`必须多于插入 an 的时间，`ArrayList`因为`HashSet`不允许重复键。所以我假设在插入之前必须在插入之前对重复键进行*某种*检查，以及如何处理它们，这使得它们与`ArrayList`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:24:31.013

HashSet 由哈希表支持。如果您了解哈希表，您就会知道有一个哈希函数。当您在其中添加新元素时，还会发生碰撞处理（如果发生碰撞）。好吧 hashSet 不处理冲突，如果哈希相同，只需覆盖旧值。但是，如果达到容量，则需要调整大小，并可能重新散列。这会很慢。

ArrayList 只是将对象附加到列表的末尾。如果大小达到，它会调整大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:24:06.673

> hashset 插入性能会比 arraylist 好很多

你从哪里得到这个想法的？
`HashSet`将在搜索方面表现出色`ArrayList`，即：`get()`.
但在插入时，它们具有可比的性能。`ArrayList`如果您在数组限制内（不需要调整大小）并且哈希函数不好，实际上会更快

# iphone - 如何将没有标签栏的普通 UIViewController 与有标签栏的 UIViewController 分隔开

> ID：15070106
> 
> 赞同：1
> 
> 时间：2013-02-25T15:10:32.063
> 
> 标签：iphone, ios, objective-c, storyboard, segue

我正在开发 iOS 应用程序。

我的应用程序有 6 个按钮，每个按钮都有每个标签栏控件。

```
so Main screen is 
```

[btn1] [btn2]

[btn3] [btn4]

[btn5] [btn6]

=================== 这个屏幕没有标签栏控件。

但如果我进入 btn1

==============================

表视图

[tab1][tab2][tab3][tab4]

==============================

btn1 的屏幕有这样的标签栏控件。

我怎样才能让每个不同的选项卡分别到每个按钮。

主屏幕不应该有标签栏控件。

有谁知道类似问题的链接或解决方案？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:22:04.840

只需选择您正在使用的 ViewController（在情节提要中），然后在 XCodes 菜单栏中选择 Editor -> Embed in -> TabBarController

如果我误解了你的问题：你的故事板的（评论）截图会很有帮助

# javascript - 图像在 safari 和 chrome 中缩放，但在 ff 和 opera 中没有

> ID：15070107
> 
> 赞同：0
> 
> 时间：2013-02-25T15:10:34.073
> 
> 标签：javascript, jquery, css, jquery-ui, cross-browser

我正在使用一个名为 jb gallery 3.0 的图像滑块 - 使用 jQuery 运行。

它只是一个普通的图像滑块，但它有一个功能可以检测浏览器的大小，然后将图像缩放到浏览器的大小，即。如果您在 iPad 上观看，它会给您一个较小的图像，以便您仍然可以看到整个图片。

每次在滑块中加载图像时都会调整大小，因此如果您在幻灯片之间调整窗口大小，下次加载图像时它将被缩放......无需刷新页面。

这一切都可以在 safari 和 chrome 中正常工作，但在 Firefox 和 opera (12.14) 中却不行，它只提供裁剪后的全尺寸图像......

我已经对这里发生的事情做了一个 js 小提琴 - [http://jsfiddle.net/ktvvW/5/](http://jsfiddle.net/ktvvW/5/) - 尝试在 chrome 或 safari 中调整“结果”面板的大小，看看会发生什么。

知道为什么这在 ff 或歌剧中不起作用吗？

```
. 
```

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:15:47.113

在 jbgallery-3.0.js 脚本上强制执行 webkit 行为似乎可以解决问题。请参阅下面的选项，我正在强制 webkit 为真（忽略 userAgent）。我已经在 FF 和 Opera 上对此进行了测试，并且功能符合预期，图像显示的缩放比例与 Chrome 中的相同。

```
$(".jbgallery").jbgallery({  
    style    : "zoom",       //"centered"|"zoom"|"original" - image style  
    menu     : "simple",         //false|"numbers"|"simple"|"slider" - menu type  
    shortcuts: [37, 39],         //[prev,next] - keyboard code shortcuts  
    slideshow: true,            //true|false - autostart slideshow  
    fade     : true,             //true|false - disable all fade effects  
    popup    : false,            //true|false - modal box & traditional popup hack to display multiple gallery (3.0 : fullscreen:false)  
    randomize: 0,                //0|1|2 - randomize first image (1) or randomize "slideshow" (2) - blackout: http://www.grayhats.org  
    caption  : false,             //true|false - show/disable internal caption system  
    autohide : false,            //true|false - auto hide menu & caption  
    clickable: false,            //true|false - "image click & go"  
    current  : 1,                //number     - set initial photo (modal "hack" - see demo. don't use "hash". jbgallery use "location.hash" only in popup mode)  
//    webkit   : (navigator.userAgent.toLowerCase().search(/webkit/) != -1),  //boolean - used for specific browser hack. if you want, you can force disable this flag & try to find crossbrowser solution  
    webkit   : true,
    ie6      : (/MSIE 6/i.test(navigator.userAgent)), //boolean - IDEM  
    ie7      : (/MSIE 7/i.test(navigator.userAgent)), //boolean - IDEM  
    labels   : {                 //labels of internal menu  
        play : "play",  
        next : "next",  
        prev : "prev",  
        stop : "stop",  
        close: "close",  
        info : "info"  
    },  
    timers   : {                 //timers   
        fade    : 1000,           //fade duration  
        interval: 3000,          //slideshow interval  
        autohide: 7000           //autohide timeout  
    },  
    delays: {                    //delays (timers) to improve usability and reduce events  
        mousemove: 200,          //used by autohide. cancel autohide timeout every XXXms.   
        resize   : 10,          //used by ie6 to reduce events handled by window.resize  
        mouseover: 800           //used by tooltip. show tooltip only if the mouse STAY over thumb for XXXms  
    },  
    close    : function(){},     //callback handled by menu's button close. see demo. example : close : function(){window.close()}  
    before   : function(){},     //callback handled BEFORE image gallery loaded  
    after    : function(ev){},   //callback(ev) handled AFTER image gallery loaded. receive the native load event.  
    load     : function(ev){},   //callback(ev) handled AFTER native image load event. receive the native load event.  
    ready    : function(el){$('.jbg-menu').hide(); $('.jbg-loading').remove(); $('.jbg-caption').remove(); $('.jbg-menu-opacity').remove();},   //callback(el) handled AFTER jbgallery render. receive the HTML element.  
    fullscreen: false,            //true|false : the most important feature of jbgallery 3.0\. now jbgallery can "stay in a box" and have multiple istance in one page.  
    push      : function(o){},   //callback handled by push public method (JBGALLERY API). receive the object/string/array of objects/array of strings passed from external. useful for external menu system  
    unshift   : function(o){},   //callback handled by unshift public method (JBGALLERY API). receive the object/string/array of objects/array of strings passed from external.  
    shift     : function(){},    //callback handled by shift public method   
    pop       : function(){},    //callback handled by pop public method   
    empty     : function(){}     //callback handled by empty public method   
}); 
```

这是[**我的 jsfiddle 的链接**](http://jsfiddle.net/martyk/YpCU6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:01:12.543

似乎是CSS是一个问题。

**原来的**

```
.jbgallery .jbgallery-target.zoom {
    min-height: 50%;
    min-width: 50%;
} 
```

**修改的**

```
.jbgallery .jbgallery-target.zoom {
    height: 50%;
    width: 50%;
} 
```

**错误**必须在 css 面板中添加 css，因为原始文件在插件 css 中

*这是新 css 的链接* [http://jsfiddle.net/ktvvW/8/](http://jsfiddle.net/ktvvW/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:38:05.980

我想我知道该怎么做：

改变加载函数如下：

```
load     : function(ev){$(".zoom").css("width",$("#slider").width()),$(".zoom").css("height","auto");$(".zoom").css("left","0px");$(".zoom").css("top","auto")}, 
```

它将适用于所有浏览器，经过测试并成功运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:54:42.647

我没有完整的答案，但我过去也遇到过类似的问题。我了解到 Gecko (Firefox) 和 Webkit (Safari 和 Chrome) 处理图像的方式不同。当我尝试缩放图像时，图像大小的信息不可用，因此无法使用相同的代码对其进行缩放。

我只能建议对图像 + onload 事件进行一些研究。在我看来，这将是一个 javascript 问题。

# testing - 错误：测试用户创建期间的 OAuthException 代码 1

> ID：15070111
> 
> 赞同：3
> 
> 时间：2013-02-25T15:10:58.623
> 
> 标签：testing, facebook-test-users

自最多 1 周以来，当我尝试创建测试用户时出现此错误。

[https://graph.facebook.com/APP_ID/accounts/test-users?installed=false&name=profilname&locale=en_US&permissions=read_stream&method=post&access_token=APP_TOKEN](https://graph.facebook.com/APP_ID/accounts/test-users?installed=false&name=profilname&locale=en_US&permissions=read_stream&method=post&access_token=APP_TOKEN)

```
{
   "error": {
      "message": "An unknown error has occurred.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

认证应用类型为WEB。我的其他应用程序没有这个问题！

# ajax - p:ajax，如何从其他表单提交信息？

> ID：15070115
> 
> 赞同：0
> 
> 时间：2013-02-25T15:11:10.417
> 
> 标签：ajax, jsf, primefaces

我正在使用**PrimeFaces 3.4**。我在左侧布局单元中有 p:layout，`p:tree`在中央单元中有面板列表。选择/取消选择树上的节点后，我正在渲染/取消渲染面板。一般结构如下所示：

```
<p:layoutUnit position="west" minSize="150" size="300">
<h:form id="tree"> 
<p:tree id="tree" value="#{tree.root}" var="node"
    selectionMode="multiple" selection="#{tree.selectedNodes}">  

    <p:ajax event="select" listener="#{tree.treeSelect}" process=":main" update=":main:panels"/>
    <p:ajax event="unselect" listener="#{tree.treeUnselect}" process=":main" update=":main:panels"/>
    <p:treeNode>  
        <h:outputText value="#{node.title}" />  
    </p:treeNode>  

</p:tree>
</h:form>
</p:layoutUnit>

<p:layoutUnit position="center" header="Panels" styleClass="noscroll">
<h:form id="main"> 
<p:outputPanel id="panels" styleClass="center-panels">

<!-- here go the panels -->

</p:outputPanel>
</h:form>
</p:layoutUnit> 
```

但是面板包含输入字段。我注意到，点击树后输入字段被重置，所以我添加了 process `attribute`。我已经尝试过`:main`, `:main:panels`, `@all`，但它们都没有起作用。

我如何才能在这种情况下正确工作？PrimeFaces bugture（一个 bug 是功能）在您使用时不允许使用单一表单`p:layout`，至少在文档中说明了这一点。并且使用多种形式，我正在丢失数据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T16:44:58.103

This is working for me:

```
<p:layoutUnit position="west" header="Opciones" size="175">
                <h:form id="form1">
                    <p:panelMenu style="width:200px">   
                        <p:submenu label="Clientes" >
                            <p:menuitem value="Adicionar" update=":form2" actionListener="# {templateMB.templateAddCliente}" />
                            <p:menuitem value="Buscar"/>
                            <p:menuitem value="Listado"/>
                            <p:menuitem value="Editar"/>
                        </p:submenu> 
                        <p:submenu label="Contratos">  
                            <p:menuitem value="Adicionar"  icon="ui-icon-close"/>  
                        </p:submenu>  
                        <p:separator/>  
                        <p:submenu label="Suplementos" >  
                            <p:menuitem value="Adicionar" icon="ui-icon-signal"/>  
                        </p:submenu>  
                    </p:panelMenu>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="center">
                <h:form id="form2">  
                    <ui:include src="#{templateMB.centerTemplate}" />  
                </h:form> 
            </p:layoutUnit> 
```

# visual-studio-2012 - MSBuild 和 SQL Server 数据库项目：将部署和发布目标绑定到构建配置

> ID：15070118
> 
> 赞同：2
> 
> 时间：2013-02-25T15:11:14.653
> 
> 标签：visual-studio-2012, msbuild, database-project, sql-server-data-tools, msbuild-target

Visual Studio 2012。SQL Server 数据库项目。

解决方案中创建了四个构建配置：Debug、DevDb、TestDb、LocalDb。

在项目中创建了三个发布配置文件：DevDb.publish.xml、TestDb.publish.xml、LocalDb.publish.xml

**按下 F5 按钮（！）**我想：

*   ****如果** 构建配置为**Debug** ，则使用项目属性中的连接字符串**部署**项目。**
***   ****如果**构建配置为 **DevDb**、**TestDb**或**LocalDb** ，则使用相应发布配置文件中的连接字符串**发布**项目。****

 ****为此，我编辑项目 (.sqlproj) xml，尝试捕获对 Deploy 目标的调用并用自定义行为替换标准 Deploy 目标：

```
<Target Name="Deploy">     

    <!-- The first statment is for Debug configuration  -->

    <MSBuild Condition=" '$(Configuration)' == 'Debug' "
      Targets="Deploy"
      Projects="$(MSBuildProjectFile)"
      Properties="Configuration=$(Configuration);" 
    />

    <!-- The second statement is for DevDb, TestDb, LocalDb configurations  -->

    <MSBuild Condition=" '$(Configuration)' != 'Debug' "
      Targets="SqlPublish"
      Projects="$(MSBuildProjectFile)"
      Properties="SqlPublishProfilePath=$(Configuration).publish.xml;
                  Configuration=$(Configuration);"
    />       
 </Target> 
```

第二条语句运行良好，我将部署到正确的目的地。

问题出在第一条语句上——它产生了循环依赖。

*错误 MSB4006：在涉及目标“部署”的目标依赖图中存在循环依赖。*

我的问题是：如何与标准目标相交（捕获和替换）以及是否需要再次调用标准目标？

还是我想重新发明轮子，还有另一种方法可以做我想做的事？（我想要的内容在上面的“按下 F5 按钮”下进行了描述：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:49:46.933

我想我已经找到了解决方案。

因此，如果我们将这样一个带有 Condition 的 PropertyGroup 和一个自定义 Target 放在数据库项目 xml 文件的末尾：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">

    ----------- Skip -----------

  <PropertyGroup Condition=" '$(Configuration)' != 'Debug' and Exists('$(Configuration).publish.xml')">
    <DeployDependsOn>
      PublishDatabase
    </DeployDependsOn>
  </PropertyGroup>

  <Target Name="PublishDatabase"> <!-- Custom Target -->
    <Message 
        Text="Deploy is replaced with SqlPublish for configuration = $(Configuration)"
        Importance="high" />

    <MSBuild 
        Targets="SqlPublish" 
        Projects="$(MSBuildProjectFile)"
        Properties="SqlPublishProfilePath=$(Configuration).publish.xml;
                    Configuration=$(Configuration);" />
  </Target>
</Project> 
```

我们将得到以下行为：

*   如果解决方案构建配置与 Debug 不同且发布配置文件 *.publish.xml 存在，则 Deploy 目标和操作将替换为 SqlPublish 目标，并且此发布操作将从相应的发布配置文件中获取所需的配置，例如连接字符串.
*   如果解决方案构建配置是调试，那么当它从项目属性中获取连接字符串时，我们会保留标准的 Visual Studio 行为。****

# ruby-on-rails - 为模型编写迁移

> ID：15070120
> 
> 赞同：0
> 
> 时间：2013-02-25T15:11:24.760
> 
> 标签：ruby-on-rails

我正在尝试创建一个模型，在该模型中我将在两个位置使用相同的资源：

```
class AttachmentFileComment < ActiveRecord::Base

attr_accessible :action_type

belongs_to :attachments, :conditions=>['attachments.attachable_type=?', 'project']
belongs_to :users
belongs_to :approval_level
belongs_to :comments
belongs_to :attachments, :as=> :file_id, :conditions=>['attachments.attachable_type=?', 'attachment']

end 
```

对于上面我如何编写迁移

# c - 无法从c中的文件中读取字符串

> ID：15070121
> 
> 赞同：0
> 
> 时间：2013-02-25T15:11:44.230
> 
> 标签：c, fopen, scanf

我正在尝试逐行读取文本文件并打印前 17 个字符。

```
FILE *devices;
devices = NULL;
devices = fopen("devices.txt", "r");

char deviceaddr[17];
char addr[17];

char line[1024];

while (fgets(line,1024,devices) != NULL)
{
    fscanf(devices,"%s", deviceaddr);

    printf("%s\n", deviceaddr);
}

fclose(devices); 
```

输出应该是`00:07:80:4C:0E:EE`第一行，但它给出了`6`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:15:20.340

`while`循环正在读取一行文本，然后将`fscanf`读取下一组文本（并且可能偶然超出该缓冲区）。似乎您应该只是从缓冲区中的循环内打印所需的数据`line`。

例如，假设有三行文本。

```
00:07:80:4C:0E:EE    --> ends up line buffer line
second               --> ends up in deviceaddr
third line           --> ends up in line (unless the fscanf did not consume newline) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:17:46.270

输出不可能是`"00:07:80:4c:0E:EE"`，因为由于缓冲区溢出，这将导致未定义的行为 - 字符串需要 18 个字节，但您只提供 17 个字节。您不应该*在*未指定长度`"%s"`的情况下使用。`fscanf`

你在读了一行之后就打电话`fscanf`了；`devices`如果您正在逐行阅读，则要 `sscanf`在已阅读的行上使用。

# delphi - 动画椭圆点

> ID：15070123
> 
> 赞同：2
> 
> 时间：2013-02-25T15:11:50.380
> 
> 标签：delphi

我[`LineDDA`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145025.aspx)用来绘制动画选择：

```
procedure TFormMain.DrawMarchingAnts;
begin
  AMarchingAntsCounter := AMarchingAntsCounterStart;
  // Use LineDDA to draw each of the 4 edges of the rectangle
  LineDDA(AMarchingAntsPointA.X, AMarchingAntsPointA.Y, AMarchingAntsPointB.X, AMarchingAntsPointA.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointB.X, AMarchingAntsPointA.Y, AMarchingAntsPointB.X, AMarchingAntsPointB.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointB.X, AMarchingAntsPointB.Y, AMarchingAntsPointA.X, AMarchingAntsPointB.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointA.X, AMarchingAntsPointB.Y, AMarchingAntsPointA.X, AMarchingAntsPointA.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  if AMarchingAntsPointB.X > AMarchingAntsPointA.X then
    ARubberbandVisible := True
  else
    ARubberbandVisible := False;
end; 
```

是否有将动画椭圆添加到矩形角以获取夹点的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:41:13.773

你想要一个动画的“行军蚂蚁”圈子吗？然后创建自定义笔样式。例如，如下所示：

```
unit Unit1;

interface

uses
  Windows, Classes, Graphics, Controls, Forms, ExtCtrls, Math;

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    procedure FormPaint(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    FMarkBrush: LOGBRUSH;
    FMarkPen: HPEN;
    FPenStyle: array[0..1] of Integer;
    FStartAngle: Single;
  end;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  FPenStyle[0] := 4;
  FPenStyle[1] := 4;
  FMarkBrush.lbStyle := BS_SOLID;
  FMarkBrush.lbColor := ColorToRGB(clBlue);
  FMarkPen := ExtCreatePen(PS_GEOMETRIC or PS_USERSTYLE, 1, FMarkBrush, 2,
    @FPenStyle);
  Canvas.Pen.Handle := FMarkPen;
end;

procedure TForm1.FormPaint(Sender: TObject);
var
  X: Integer;
  Y: Integer;
begin
  Canvas.FillRect(Rect(0, 0, 50, 50));
  X := Round(25 * (1 + Cos(FStartAngle)));
  Y := Round(25 * (1 + Sin(FStartAngle)));
  Canvas.Arc(0, 0, 50, 50, X, Y, X, Y);
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  FStartAngle := FStartAngle + DegToRad(5);
  Invalidate;
end;

end. 
```

![在此处输入图像描述](../Images/6286d735b49e91dfec9a13255ed00f8d.png)

# ruby - 为什么机械化没有点击链接

> ID：15070124
> 
> 赞同：1
> 
> 时间：2013-02-25T15:11:54.510
> 
> 标签：ruby, mechanize

我正在尝试使用 Mechanize 的链接，但它似乎不起作用，语法似乎是正确的，我是否错误地引用了它，或者我需要做其他事情吗？

**问题领域**

```
agent.page.links_with(:text => 'VG278H')[2].click 
```

**完整代码**

```
require 'rubygems'
require 'mechanize'
require 'open-uri'

agent = Mechanize.new

agent.get ("http://icecat.biz/en/")

#Show all form fields belonging to the first form
form = agent.page.forms[0].fields

#Enter VG278H into the text box lookup_text, submit the data
agent.page.forms[0]["lookup_text"] = "VG278H"
agent.page.forms[0].submit  #Results of this is stored in Mechanize agent.page object

#Call agent.page with our results and assign them to a variable page
page = agent.page

agent.page.links_with(:text => 'VG278H')[2].click

doc = page.parser
puts doc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:27:17.327

您应该获取一份 Charles ( [http://www.charlesproxy.com/](http://www.charlesproxy.com/) ) 的副本，或者可以让您查看从浏览器提交表单时发生的情况的内容。无论如何，你的问题是这部分：

```
agent.page.forms[0]["lookup_text"] = "VG278H"
agent.page.forms[0].submit 
```

正在返回一个如下所示的 html 片段：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script>self.location.href="http://icecat.us/index.cgi?language=en&new_search=1&lookup_text=VG278H"</script> 
```

因此，您实际上需要直接调用它或删除 self.location.href 并让您的代理执行 get：

```
page = agent.get("http://icecat.us/index.cgi?language=en&new_search=1&lookup_text=VG278H") 
```

如果你要这样做，这有效：

```
require 'rubygems'
require 'mechanize'
require 'open-uri'

agent = Mechanize.new 

agent.get ("http://icecat.biz/en/")

page = agent.get("http://icecat.us/index.cgi?language=en&new_search=1&lookup_text=VG278H")

page = page.links_with(:text => 'VG278H')[2].click

doc = page.parser
puts doc 
```

快乐刮

# java - 编译器如何推断无参数方法的类型？

> ID：15070125
> 
> 赞同：1
> 
> 时间：2013-02-25T15:11:58.897
> 
> 标签：java, generics

从有效的Java：

> 泛型方法的一个值得注意的特性是，您不需要像调用泛型构造函数时那样显式指定类型参数的值。编译器通过检查方法参数的类型来计算类型参数的值。

那么如果方法不带参数，编译器如何推断类型呢？

例如，考虑以下静态工厂方法，该方法每次调用时都会创建一个新的 HashMap：

```
// Generic static factory method
public static <K,V> HashMap<K,V> newHashMap() {
return new HashMap<K,V>();
} 
```

当该方法被调用时：

```
Map<String,String> pair = newHashMap(); //it returns a Map<String,String> 
```

当它调用时

```
Map<String, List<String>> anagrams =newHashMap(); // it returns a Map<String,List<String> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:15:58.337

它也根据分配返回的变量类型来推断它。

```
public class GenericTest {

    public static void main(final String[] args) {
        final GenericTest test = new GenericTest();
        String data = test.echo();
    }

    public <T> T echo() {
        return null;
    }
} 
```

在上面的代码示例中，编译器根据`data`字段的类型推断泛型参数类型，在本例中为`String`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:20:54.343

编译器只有有限数量的变量来推断类型。如果一个方法不带参数，那么该方法只能是一个简单的覆盖，因为返回值不能用于类型方法，这会留下方法本身的名称。编译器必须选择继承链上多远才能选择哪个父/子类具有实际调用的方法。

# java - 仅在 Hibernate 中使用 Map 或映射文件

> ID：15070126
> 
> 赞同：1
> 
> 时间：2013-02-25T15:12:00.420
> 
> 标签：java, hibernate, orm

我实际上是在尝试将 XML 转换为 SQL。我的目标是有一个默认的模式和属性到列的映射，但是让它完全是用户可编辑的，因此未来的 XML 更改不需要用户编辑代码和重新编译。

然而，这意味着我不能使用普通的 POJO，因为如果在 XML 中添加了新属性，则没有匹配的 POJO 字段供 hibernate 使用。但是我真的在尝试使用 Hibernate 或类似的东西，所以我不必担心数据库特定的 SQL。

我将如何使用 Hibernate 作为基本的 DDL 引擎，使用基本的 Map 甚至完整的映射文件，但没有 POJO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:37:02.227

您需要使用“动态地图”作为实体模式。请参阅[动态模型](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/persistent-classes.html#persistent-classes-dynamicmodels)。我们已经在我们的一个项目中使用了它，您将失去静态类型的舒适性。您无法仅通过查看代码来判断实体中存在哪些字段。

# wpf - 如何过滤 Longlistselector WP7

> ID：15070132
> 
> 赞同：3
> 
> 时间：2013-02-25T15:12:37.640
> 
> 标签：wpf, longlistselector

尝试在 WP7 中使用文本框过滤 LongListSelector 时遇到问题。我想要

A组：AABBCC AABBDD AABBEE

B组：BBCCDD BBDDEE BBEEFF

当我在文本框中键入文本“BBCC”时，将显示列表

A组：AABBCC

B组：BBCCDD

我已经成功地用 ListBox 实现了这个过滤器。

```
ItemSearch = new CollectionViewSource();
Item = new ObservableCollection<ItemViewModel>(); 
ItemSearch.Source = Item; 
```

对于过滤器，我使用此代码

```
ItemSearch.View.Filter  = FilterList

private bool FilterList(object obj)
{
return ...... ;
} 
```

但是在 LongListSelector 中，我不知道如何使用模型视图过滤列表

```
Item = new ObservableCollection<Group<ItemViewModel>>() 
```

任何人对我有任何建议。

谢谢

# android - Android 上的背景颜色选择（下拉菜单）（opera、chrome）

> ID：15070134
> 
> 赞同：0
> 
> 时间：2013-02-25T15:12:42.923
> 
> 标签：android, css, smartphone

我想在选择菜单中设置特定选项的背景颜色。

在桌面浏览器上它工作正常，但是当我查看我的智能手机（带有 chrome 的安卓）时，没有显示背景颜色。

我这样做：

```
<select>
   <options></options>
   <options class="color"></options>
   <options></options>
 </select 
```

并设置样式：

```
.color{background-color : #999;} 
```

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:20:53.350

我看到的是无效的 css 格式。

尝试删除颜色声明的引号

```
.color{background-color : #999;} 
```

最后一次尝试，

```
.color{background-color : #999!important;} 
```

这对您有帮助吗：[http](http://www.androidpeople.com/android-custom-listview-tutorial-part-2) ://www.androidpeople.com/android-custom-listview-tutorial-part-2 ？实际上，没有足够的关于你上下文的信息来弄清楚发生了什么。（DOCTYPE、css 堆栈顺序、html 验证等）

我不确定你是否想要风格化 a`<select>`或 a`<list view>`

# php - Json解析并插入到mysql

> ID：15070135
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:12:42.953
> 
> 标签：php, mysql, arrays, json, mandrill

我正在使用 Mandrill 发布任何入站电子邮件。这是我收到新电子邮件时 Mandrill 发布的内容 -> [http://help.mandrill.com/entries/22092308-What-is-the-format-of-inbound-email-webhooks-](http://help.mandrill.com/entries/22092308-What-is-the-format-of-inbound-email-webhooks-)

这也是我在 $_REQUEST 中得到的（抱歉，它的格式不正确）： `[{\"event\":\"inbound\",\"ts\":1361798154,\"msg\":{\"raw_msg\":\"Received: from nm11-vm1.bullet.mail.sg3.yahoo.com (nm11-vm1.bullet.mail.sg3.yahoo.com [106.10.148.240])\\n\\tby ip-10-138-250-144 (Postfix) with ESMTPS id 663A4136204D\\n\\tfor <>; Mon, 25 Feb 2013 13:15:54 +0000 (UTC)\\nReceived: from [106.10.166.112] by nm11.bullet.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\\nReceived: from [106.10.151.171] by tm1.bullet.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\\nReceived: from [127.0.0.1] by omp1011.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\\nX-Yahoo-Newman-Property: ymail-3\\nX-Yahoo-Newman-Id: 250040.22861.bm@omp1011.mail.sg3.yahoo.com\\nReceived: (qmail 28099 invoked by uid 60001); 25 Feb 2013 13:15:53 -0000\\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed\\/relaxed; d=yahoo.co.in; s=s1024; t=1361798153; bh=BDFj0kYtFyAwYeMROJlckEQlebiL67q4OCeBIQv8Ptg=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=JTaQH8PfSRIt\\/tYN16h6m1TeqlfEilid7FHTCoLdgYKL1CKf1s92DXm0vNKycLvTK7vmGr61e8SOxv2yGghCgOFHEumbLrF0kz+dhDeXBzyqrMPLcXT0w4uiUTJv+YtlsXYELvzN2ULhVwE1BXst2ok\\/Fj5AxpmRSJ8\\/0lxxUrY=\\nDomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;\\n s=s1024; d=yahoo.co.in;\\n h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;\\n b=fEBcmdXcrijuQ\\/LkRh3mlZVEdQ7E\\/DzZ2rRlMZEUbr2Z6sv0SbmADNiea4a4WZImIJTyeXdgeOTrV1peLkegTUzf5UxBQW18NE0Sjlay54kAhADfgt6N+HUoiSH+Psj4gTSbOYv\\/Ij1x2CmR645JShaz2x1TfNYgvYRb05VZWv8=;\\nX-YMail-OSG: buuv6IIVM1kj3NrZiivkBVYfFcT.P8xs1KJk1zKUlFASQ5M\\n 0rxt7ojMEC0KSn8S8s4GSaBBW.f4Pd8x9V4dCr8BPKXvnvcZQhqM2Wu10meZ\\n jC.N8I7D3XXxzRI15ez1zICJg2fZkng2x5FQqUhElC.y03G6cSZJIFPSBitM\\n 0R6RnJA0zhWnWQv7UAD.KdKiKgnEPSA9lZpRqcTGHh8uNYuu6bWiKv9wXnGG\\n rzKei4dmAv5lrEhD9iXVSQCQw_2S9RzQd08B3vBg0keF3vBMBnmCCdyqdxRK\\n 4IQbYZZGBXTt3AQz.rdVxjTicu2rTvkGLkOb9JN0qA3NURs2BJYvd0TMNGQn\\n 9xWGKTIQmJ.pla6Tw8_vQUCkJuRCl7tlKavXX6U_ocY34VjDTthwKHf.pCYo\\n 8mwtfsLpHC9ZklRu4vSIM6kGZLjQoux4mz0qJduVBaYYoRboY_kH622MyI.m\\n sBA--\\nReceived: from [182.68.19.112] by web192402.mail.sg3.yahoo.com via HTTP; Mon, 25 Feb 2013 21:15:52 SGT\\nX-Rocket-MIMEInfo: 001.001,U2F5cyBXaG8BMAEBAQE-\\nX-Mailer: YahooMailWebService\\/0.8.134.513\\nMessage-ID: <1361798152.24847.YahooMailNeo@web192402.mail.sg3.yahoo.com>\\nDate: Mon, 25 Feb 2013 21:15:52 +0800 (SGT)\\nFrom: Lucky Soni <lp.soni@yahoo.co.in>\\nReply-To: Lucky Soni <lp.soni@yahoo.co.in>\\nSubject: Hello World\\nTo: \\\"\\\" <>\\nMIME-Version: 1.0\\nContent-Type: multipart\\/alternative; boundary=\\\"1577518589-1280633723-1361798152=:24847\\\"\\n\\n--1577518589-1280633723-1361798152=:24847\\nContent-Type: text\\/plain; charset=utf-8\\nContent-Transfer-Encoding: quoted-printable\\n\\nSays Who\\n--1577518589-1280633723-1361798152=:24847\\nContent-Type: text\\/html; charset=utf-8\\nContent-Transfer-Encoding: quoted-printable\\n\\n<html><body><div style=3D\\\"color:#000; background-color:#fff; font-family:ve=\\nrdana, helvetica, sans-serif;font-size:12pt\\\"><div>Says Who<\\/div><\\/div><\\/bod=\\ny><\\/html>\\n--1577518589-1280633723-1361798152=:24847--\",\"headers\":{\"Received\":[\"from nm11-vm1.bullet.mail.sg3.yahoo.com (nm11-vm1.bullet.mail.sg3.yahoo.com [106.10.148.240]) by ip-10-138-250-144 (Postfix) with ESMTPS id 663A4136204D for <>; Mon, 25 Feb 2013 13:15:54 +0000 (UTC)\",\"from [106.10.166.112] by nm11.bullet.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\",\"from [106.10.151.171] by tm1.bullet.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\",\"from [127.0.0.1] by omp1011.mail.sg3.yahoo.com with NNFMP; 25 Feb 2013 13:15:53 -0000\",\"(qmail 28099 invoked by uid 60001); 25 Feb 2013 13:15:53 -0000\",\"from [182.68.19.112] by web192402.mail.sg3.yahoo.com via HTTP; Mon, 25 Feb 2013 21:15:52 SGT\"],\"X-Yahoo-Newman-Property\":\"ymail-3\",\"X-Yahoo-Newman-Id\":\"250040.22861.bm@omp1011.mail.sg3.yahoo.com\",\"Dkim-Signature\":\"v=1; a=rsa-sha256; c=relaxed\\/relaxed; d=yahoo.co.in; s=s1024; t=1361798153; bh=BDFj0kYtFyAwYeMROJlckEQlebiL67q4OCeBIQv8Ptg=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=JTaQH8PfSRIt\\/tYN16h6m1TeqlfEilid7FHTCoLdgYKL1CKf1s92DXm0vNKycLvTK7vmGr61e8SOxv2yGghCgOFHEumbLrF0kz+dhDeXBzyqrMPLcXT0w4uiUTJv+YtlsXYELvzN2ULhVwE1BXst2ok\\/Fj5AxpmRSJ8\\/0lxxUrY=\",\"Domainkey-Signature\":\"a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.co.in; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=fEBcmdXcrijuQ\\/LkRh3mlZVEdQ7E\\/DzZ2rRlMZEUbr2Z6sv0SbmADNiea4a4WZImIJTyeXdgeOTrV1peLkegTUzf5UxBQW18NE0Sjlay54kAhADfgt6N+HUoiSH+Psj4gTSbOYv\\/Ij1x2CmR645JShaz2x1TfNYgvYRb05VZWv8=;\",\"X-Ymail-Osg\":\"buuv6IIVM1kj3NrZiivkBVYfFcT.P8xs1KJk1zKUlFASQ5M 0rxt7ojMEC0KSn8S8s4GSaBBW.f4Pd8x9V4dCr8BPKXvnvcZQhqM2Wu10meZ jC.N8I7D3XXxzRI15ez1zICJg2fZkng2x5FQqUhElC.y03G6cSZJIFPSBitM 0R6RnJA0zhWnWQv7UAD.KdKiKgnEPSA9lZpRqcTGHh8uNYuu6bWiKv9wXnGG rzKei4dmAv5lrEhD9iXVSQCQw_2S9RzQd08B3vBg0keF3vBMBnmCCdyqdxRK 4IQbYZZGBXTt3AQz.rdVxjTicu2rTvkGLkOb9JN0qA3NURs2BJYvd0TMNGQn 9xWGKTIQmJ.pla6Tw8_vQUCkJuRCl7tlKavXX6U_ocY34VjDTthwKHf.pCYo 8mwtfsLpHC9ZklRu4vSIM6kGZLjQoux4mz0qJduVBaYYoRboY_kH622MyI.m sBA--\",\"X-Rocket-Mimeinfo\":\"001.001,U2F5cyBXaG8BMAEBAQE-\",\"X-Mailer\":\"YahooMailWebService\\/0.8.134.513\",\"Message-Id\":\"<1361798152.24847.YahooMailNeo@web192402.mail.sg3.yahoo.com>\",\"Date\":\"Mon, 25 Feb 2013 21:15:52 +0800 (SGT)\",\"From\":\"Lucky Soni <lp.soni@yahoo.co.in>\",\"Reply-To\":\"Lucky Soni <lp.soni@yahoo.co.in>\",\"Subject\":\"Hello World\",\"To\":\"\\\"\\\" <>\",\"Mime-Version\":\"1.0\",\"Content-Type\":\"multipart\\/alternative; boundary=\\\"1577518589-1280633723-1361798152=:24847\\\"\"},\"text\":\"Says Who\\n\",\"html\":\"<html><body><div style=\\\"color:#000; background-color:#fff; font-family:verdana, helvetica, sans-serif;font-size:12pt\\\"><div>Says Who<\\/div><\\/div><\\/body><\\/html>\\n\",\"from_email\":\"lp.soni@yahoo.co.in\",\"from_name\":\"Lucky Soni\",\"to\":[[\"\",\"\"]],\"subject\":\"Hello World\",\"email\":\"\",\"tags\":[],\"sender\":null}}]`

我需要获取“文本”（请使用“ctrl/command + F”来查找“文本”这个词:)，然后插入到 mySQl。请帮忙。谢谢

注意：我已经尝试过 json_deocde 但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:15:27.197

您是否尝试使用 json_deocde 解码您的 json？ [https://www.php.net/manual/en/function.json-decode.php](https://www.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T19:53:43.587

我遇到了同样的问题，我最终提取了原始 HTTP POST 并首先使用 urldecode()，而不是运行 json_decode。

# magento - 将链接 rel 添加到 Magento 的头部

> ID：15070137
> 
> 赞同：-4
> 
> 时间：2013-02-25T15:12:44.947
> 
> 标签：magento, templates, seo

有没有一种快速而干净的方法可以在 Magento 的头部添加一个 rel 链接。

示例包括 home、index、next、prev、canonical。

我希望能够从助手、块、模板中做到这一点。有关更多信息，请参阅此

[http://googlewebmastercentral.blogspot.com/2011/09/pagination-with-relnext-and-relprev.html](http://googlewebmastercentral.blogspot.com/2011/09/pagination-with-relnext-and-relprev.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:22:20.073

您应该搜索 magento 核心代码，例如处理 REL 规范标签的代码：类`Mage_Catalog_Block_Category_View`：

例如在一个块中：

```
$headBlock = $this->getLayout()->getBlock('head');
$headBlock->addLinkRel('canonical', $category->getUrl()); 
```

但是您可以在任何可以访问已加载布局的地方执行此操作。

# javascript - 当另一个脚本正在工作时如何防止脚本工作

> ID：15070139
> 
> 赞同：0
> 
> 时间：2013-02-25T15:12:45.713
> 
> 标签：javascript, keyboard, conditional-statements

我有 tumblr 的这段代码，我希望当 .html_photoset fonction 发生时， .onkeyup fonction 不会发生，因为两个 fonction 都使用箭头键！我如何在第二个脚本中添加一个 if 以防止它在第一个脚本打开时发生？

```
{block:Photoset}
     {block:PermalinkPage} 

        <script type="text/javascript">
            $(document).ready(function() {
                $('.html_photoset').killPhotoset({
                    photoSize: 500
                });
            });
        </script>               

        <!-- [...] -->

        {block:PermalinkPagination} 

            <div class="permpaginate">

                {block:NextPost}
                    <a href="{NextPost}" id="prevp">Previous Project</a>
                {/block:NextPost}
                {block:PreviousPost}
                    <a href="{PreviousPost}" id="nextp">Next Project</a>
                {/block:PreviousPost}

            </div>

        {/block:PermalinkPagination}

        <script type="text/javascript">
            window.onload = function () {
                document.onkeyup = function(event) {
                    var e = (!event) ? window.event : event;
                    switch (e.keyCode) {
                        case 37:
                            window.location.href = document.getElementById('prevp').href;
                            break;
                        case 39:
                            window.location.href = document.getElementById('nextp').href;
                            break;
                    }
                };
            };
        </script>

    {/block:PermalinkPage}

{/block:Photoset} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:18:31.047

有很多方法可以解决这个问题。

1.  您可以在 html_photoset 发生时设置全局标志，然后在其他 onkeyup 处理程序中检查全局标志，如果 html_photoset 处于活动状态，则不执行任何操作。当 html_photoset 处于非活动状态时，您将清除该标志，以便您的其他 keyup 处理程序开始工作。

2.  您还可以卸载 onkeyup 处理程序并在适当的时候重新安装它。

3.  您可以在 html_photoset 处理程序中停止事件传播，`e.stopPropagation()`这样当您在 html_photoset 中处理事件时，它不会传播到您的其他 keyup 处理程序所在的文档级别。

最干净的可能是选项 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:26:48.980

您可能需要访问 Tumblr Javascript API。显然它是可用的，但前提是你登录：

[将 tumblr 博客与网站集成](https://stackoverflow.com/questions/1568210/integrating-tumblr-blog-with-website/3393151#3393151)

所以不幸的是，我无法访问它以获得更详细的信息。

一般来说，您可能还应该使用像 jquery 这样的库来抽象您的事件代码，因为您在这里使用的事件调用仅适用于某些浏览器。理想情况下，您将利用 tumblr 本身已经使用的任何事件库来完成此操作，特别是因为您将要根据它们的绑定方式干预其 onkeydown/onkeypress/onkeyup 事件。

策略是：

1.  确定 Tumblr 使用哪个事件来对此做出响应。
2.  删除事件处理程序
3.  添加您自己的副本，当箭头键被按下时，根据您希望它改变的任何上下文确定是触发您的代码还是 Tumblr（从您的问题中不清楚，但它可能取决于例如什么标签启动了事件/有焦点/等）。

# xslt - XSLT：使用一个属性合并两个标签，另一个标签使用转换/映射

> ID：15070141
> 
> 赞同：0
> 
> 时间：2013-02-25T15:12:52.593
> 
> 标签：xslt

我在**输入**文件中有两个标签，变量和类型：

```
<variable baseType="int" name="X">
</variable>

<type baseType="structure" name="Y">
    <variableInstance name="X" />
</type> 
```

我需要生成以下**输出**文件：

```
<Item name="Y">
    <Field name="X" type="Long" />
</Item> 
```

所以从概念上讲，我的方法是将类型标签转换为项目标签，将变量实例转换为字段。这工作正常：

```
<xsl:for-each select="type[@baseType='structure']">
    <Item>
        <xsl:attribute name="name"><xsl:value-of select="@name" /></xsl:attribute>
        <xsl:for-each select="variableInstance">
            <Field>
                <xsl:attribute name="name"><xsl:value-of select="@name" /></xsl:attribute>
                <xsl:attribute name="type">**THIS IS WHERE I'M STUCK**</xsl:attribute>
            </Field>
        </xsl:for-each>
    </Item>
</xsl:for-each> 
```

我坚持的问题是：

1.  我不知道如何让 variableInstance/Field 标记按名称与变量标记匹配，因此我可以访问 baseType。
2.  一旦我能够做到1，我需要将“int”映射到“Long”。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:40:19.960

问题1。

对于您遇到的第一个问题，您可以使用密钥：

```
<xsl:key name="variable-key" match="//variable" use="@name" /> 
```

该键将使用它们的名称索引文档中的所有变量元素。所以现在，我们可以使用以下 XPath 表达式访问这些元素中的任何一个：

```
key('variable-key', 'X') 
```

当您有很多可变元素时，使用这种方法是有效的。

*注意：如果每个变量都有自己的范围（即您有在文档的不同部分不可见的局部变量），则此方法无效。在这种情况下，应该修改这种方法。*

问题 2。

对于映射属性，您可以使用如下模板：

```
 <xsl:template match="@baseType[. = 'int']">
        <xsl:attribute name="baseType">
            <xsl:value-of select="'Long'" />
        </xsl:attribute>
    </xsl:template> 
```

这个转换的意思是：*每次我们匹配一个baseType属性和int值，它都必须被一个Long值替换。*

对于文档中的每个 @baseType 属性，都将进行此转换。

* * *

使用所描述的策略，解决方案可能是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />

    <!-- Index all variable elements in the document by name -->
    <xsl:key name="variable-key"
             match="//variable"
             use="@name" />

    <!-- Just for demo -->
    <xsl:template match="text()" />

    <!-- Identity template: copy attributes by default -->
    <xsl:template match="@*">
        <xsl:copy>
            <xsl:value-of select="." />
        </xsl:copy>
    </xsl:template>

    <!-- Match the structure type -->
    <xsl:template match="type[@baseType='structure']">
        <Item>
            <xsl:apply-templates select="*|@*" />
        </Item>
    </xsl:template>

    <!-- Match the variable instance -->
    <xsl:template match="variableInstance">
        <Field>
            <!-- Use the key to find the variable with the current name -->
            <xsl:apply-templates select="@*|key('variable-key', @name)/@baseType" />
        </Field>
    </xsl:template>

   <!-- Ignore attributes with baseType = 'structure' -->
    <xsl:template match="@baseType[. = 'structure']" />

    <!-- Change all baseType attributes with long values to an attribute
        with the same name but with an int value  -->
    <xsl:template match="@baseType[. = 'int']">
        <xsl:attribute name="baseType">
            <xsl:value-of select="'Long'" />
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

该代码将转换以下 XML 文档：

```
<!-- The code element is present just for demo -->
<code>
    <variable baseType="int" name="X" />
    <type baseType="structure" name="Y">
        <variableInstance name="X" />
    </type>
</code> 
```

进入

```
<Item name="Y">
    <Field baseType="Long" name="X"/>
</Item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:05:40.817

Oki 我有第 1 点[xsltcake 切片](http://www.xsltcake.com/slices/GYVTFE/7)或[使用模板](http://www.xsltcake.com/slices/GYVTFE/8)的解决方案。对于第二点，我可能会使用与 Pablo Pozo 在他的回答中使用的模板类似的模板

# jquery - 在不同的事件中使用拉斐尔动画虚线

> ID：15070145
> 
> 赞同：0
> 
> 时间：2013-02-25T15:13:05.357
> 
> 标签：jquery, canvas, jquery-animate, raphael

当用户将鼠标悬停在

：如何修改代码，以便当用户执行不同的事件（例如加载 html）时，它会启动画线的函数。谢谢！

```
$(function() {

    animateLine = function(canvas, hoverDivName, colorNumber, pathString) {
        $('#' + hoverDivName).hover(

        function() {
            var line = canvas.path(pathString).attr({
                stroke: colorNumber
            });

            var length = line.getTotalLength();

            $('path[fill*="none"]').animate({
                'to': 1
            }, {
                duration: 5000,
                step: function(pos, fx) {
                    var offset = length * fx.pos;
                    var subpath = line.getSubpath(0, offset);
                    canvas.clear();
                    canvas.path(subpath).attr({
                        stroke: colorNumber,
                        "stroke-dasharray":"--",
                        "stroke":"#a36d66"
                    });

                },
            });
        }, function() {
            $('path[fill*="none"]').stop(true, false);
        });
    };

    var canvas = Raphael('canvas', 900, 648);
    var pathString = "m441.5,223.5c67,-85 47,246 180,110c12,-43 24,-81 8,  T1600 ";

    animateLine(canvas, "canvas", "#000", pathString);

});

<div id="canvas"> 
        <p>Hover over me</p>        
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:15:47.617

Raphael 只是普通的旧 Javascript，因此您可以将代码放在函数中并在您喜欢的任何页面事件上执行它们。例如：

```
<input id="start" type="button" value="Begin!" />
<div id="canvas"></div>
<script>
    var canvas = Raphael('canvas', 900, 648);
    var pathString = "m441.5,223.5c67,-85 47,246 180,110c12,-43 24,-81 8,  T1600 ";

    $('#start').click(function(e) {
        animateLine(canvas, "canvas", "#000", pathString);
    });

    var animateLine = [etc. etc.]
<script> 
```

[jsFiddle](http://jsfiddle.net/3fmzJ/)

# java - 删除 xml 文件的缩进

> ID：15070151
> 
> 赞同：1
> 
> 时间：2013-02-25T15:13:43.727
> 
> 标签：java, regex, removing-whitespace

我正在编写一个用于单元测试的函数。我想比较 XML 文件，但由于其中一个文件将由第三方库创建，因此我想减轻由于缩进不同而导致的任何可能差异。因此，我编写了以下函数：

```
private String normalizeXML(String xmlString) {
    String res = xmlString.replaceAll("[ \t]+", " ");
    // leading whitespaces are inconsistent in the resulting xmls.
    res = res.replaceAll("^\\s+", "");
    return res.trim();
} 
```

但是，此函数不会删除 XML 每一行的前导间隔。

当我以这种方式编写函数时（第一个正则表达式的差异）：

```
private String normalizeXMLs(String xmlString) {
    String res = xmlString.replaceAll("\\s+", " ");
    // leading whitespaces are inconsistent in the resulting xmls.
    res = res.replaceAll("^\\s+", "");
    return res.trim();
} 
```

它确实删除了尾随空格，但它也使 xml 显示为单行，这在您需要比较差异时非常麻烦。

我只是无法证明为什么第一个实现不会取代领先区间。有任何想法吗？

**编辑**：更有趣的是，如果我进行单行操作：

```
String res = xmlString.replaceAll("^\\s+", ""); 
```

此行不会删除任何标识！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:23:56.113

与其尝试操纵字符串表示，不如使用专用的 XML 比较工具（例如[XMLUnit](http://xmlunit.sourceforge.net/) ）更安全，该工具允许您准确定义哪些差异是重要的，哪些不重要。尝试使用正则表达式修改 XML 数据很少是一个好主意，您应该使用正确的 XML 解析器，该解析器了解构成良好格式 XML 的所有规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:16:34.400

也许：

```
String res = xmlString.replaceAll("[ \\t]+", " "); 
```

不是\t...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:49:44.020

这个对我有用：

```
 private static String normalizeXMLs(String xmlString) {
    String res = xmlString.replaceAll("\\t", "");
    return res.trim();
} 
```

祝你好运 ：）

# vb.net - 列表框数据库

> ID：15070153
> 
> 赞同：0
> 
> 时间：2013-02-25T15:13:45.687
> 
> 标签：vb.net, datagridview, listbox

好的，所以对于一个项目，我不允许使用 Datagridview，而是在搜索数据库时必须使用列表框来显示数据库中的数据。我将在下面链接我的代码，谁能告诉我如何更改此代码以适应列表框。我是编程菜鸟，所以如果我犯了任何明显的错误，请原谅我

导入 System.Data 导入 System.Data.OleDb 公共类 frmUserList

```
Private Sub btnClose_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClose.Click
    Me.Close()
End Sub
Private Sub Load_Record()
    Dim conn As New OleDbConnection
    Dim cmd As New OleDbCommand
    Dim da As New OleDbDataAdapter
    Dim dt As New DataTable
    Dim sSQL As String = String.Empty

    'try catch block is used to catch the error
    Try
        'get connection string declared in the Module1.vb and assing it to conn variable
        conn = New OleDbConnection(Get_Constring)
        conn.Open()
        cmd.Connection = conn
        cmd.CommandType = CommandType.Text
        sSQL = "SELECT user_id,  last_name + ', ' + first_name + ' ' + mid_name as name FROM users where last_name + ', ' + first_name + ' ' + mid_name like '%" & Me.txtSearch.Text & "%' or [first_name] = '" & Me.txtSearch.Text & "'"

        cmd.CommandText = sSQL
        da.SelectCommand = cmd
        da.Fill(dt)

        Me.dtgResult.DataSource = dt
        If dt.Rows.Count = 0 Then
            MsgBox("No record found!")
        End If

    Catch ex As Exception
        MsgBox(ErrorToString)
    Finally
        conn.Close()
    End Try
End Sub

Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click
    Load_Record()
End Sub

Private Sub dtgResult_DoubleClick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtgResult.DoubleClick
    If Me.dtgResult.SelectedRows.Count > 0 Then
        Dim frm As New frmMarkSeat
        frm.txtFname.Tag = Me.dtgResult.Item(0, Me.dtgResult.CurrentRow.Index).Value
        frm.ShowDialog()
        frm = Nothing
    End If
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:19:38.583

试试看`SQLDataReader`：（未经测试的代码，只是写出来的）。

```
'start here
conn.Connection.Open()
Dim sqlDR As SqlDataReader
Dim colValue As String

 sqlDR = conn.ExecuteReader
 While sqlDR.Read
   colValue = (sqlDR.GetValue(0)).ToString
   ItemlistBox.Items.Add(colValue)
   ItemlistBox.Sorted = True
 End While

 conn.Connection.Close() 
```

或者，您可以继续使用当前对象、附加对象`DataSet`并填充列表框。

```
Dim dtset As New DataSet
Dim da As New OleDbDataAdapter

da.Fill(dtset)
ItemListBox.DataSource = dtset
ItemListBox.DisplayMember = "ColName" 
```

# html - IE7，标准模式与“IE7 标准”模式

> ID：15070155
> 
> 赞同：1
> 
> 时间：2013-02-25T15:13:55.600
> 
> 标签：html, internet-explorer-7, standards, doctype, internet-explorer-10

我有一个相当简单的 HTML5 网站，其中包含一些 jquery/javascript 和 CSS。它在 Chrome、FF 和 IE8、9 和 10 中看起来不错。但是，当我将浏览器模式切换到 IE7 时，它看起来不正确。如果我将文档模式更改为“标准”，它看起来又是正确的，仍然处于 IE7 模式。请参阅屏幕截图以进行说明。有人可以解释“标准”模式和“IE7 标准”模式之间的区别吗？以及如何更改“页面默认值”？

![IE10 调试器](../Images/eb13e57972ce49a7131852b6310e93f9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:28:12.677

您需要添加
`<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">`

在你的`<head>`标签中。

这将迫使 IE 即使在 chrome frame 中也使用最新的渲染引擎。

# jquery - 为什么鼓励我在本地下载 jQuery 而不是使用 CDN？

> ID：15070156
> 
> 赞同：-5
> 
> 时间：2013-02-25T15:14:00.550
> 
> 标签：jquery, html, css

在本地下载 jQuery 等第三方库而不是使用 CDN 或 Github 等代码存储库有什么好处？

一些答案：

1.  您的项目无需在线即可运行。如果您链接到的第三方库未缓存
    （临时存储）在您的浏览器中，那么您将必须在线获取新副本。
    例如，当使用 CTRL(CMD)-SHIFT-R 硬刷新网页时。
2.  更少的错误/更多的控制。如果您有第三方库的本地副本，则源可能会更新为新的破坏版本（通常不会，因为 URL 是版本化的，链接到不同的版本），从而将错误引入您的其余部分代码。
    如果您通过将其保留在本地并手动更新来明确控制您拥有的版本，则可以跟踪版本更改并在更新之前检查错误。

编辑：我在编程的第一天就问了这个问题。对原始质量差表示歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:15:12.543

出于一个原因，无需连接到 Internet 即可运行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:15:33.823

您需要下载它才能将其包含在您的项目中。否则你可以在这里使用谷歌托管库

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# c# - Lucene 更新文档索引

> ID：15070161
> 
> 赞同：1
> 
> 时间：2013-02-25T15:14:04.667
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, lucene.net

我按照这篇文章[http://leoncullens.nl/post/2012/11/18/Full-Text-Search-on-Azure-with-LuceneNET.aspx](http://leoncullens.nl/post/2012/11/18/Full-Text-Search-on-Azure-with-LuceneNET.aspx)来设置 Lucene 索引。

它在大多数情况下运行顺利我如何编辑它，以便如果存在与 id 绑定的现有文档以删除它然后重新插入它？

编辑以下方法：

```
public void CreateIndex() {

IndexWriter indexWriter = new IndexWriter(_directory, new StandardAnalyzer(Version.LUCENE_30), true, IndexWriter.MaxFieldLength.UNLIMITED); // Create    the IndexWriter

    foreach (Book book in _bookService.List()) // Use whatever data source you like
    {
        // NEED TO INSERT A CHECK HERE TO SEE IF A DOC EXISTS
        Document document = CreateBookDocument(book); // Create a 'Document' for each row of your data

        indexWriter.AddDocument(document);
    }

    try
    {
        indexWriter.Optimize(); // Call optimize once to improve performance
        indexWriter.Dispose(); // Commit and dispose the object

        Thread.Sleep(60 * 10 * 1000); // Sleep 10 minutes when the index is created successfully, otherwise immediately restart the process
    }
    catch (Exception)
    {
        indexWriter.Rollback();
        indexWriter.Dispose();
    }
}

private Document CreateBookDocument(Book book)
{
    Document document = new Document();
    document.Add(new Field("Id", book.Id.ToString(), Field.Store.YES, Field.Index.NO, Field.TermVector.NO)); // We want to store the ID so we can retrieve data for the ID, but we don't want to index it because it is useless searching through the IDs
    document.Add(new Field("Title", book.Title, Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
    document.Add(new Field("Publisher", book.Publisher, Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
    document.Add(new Field("Isbn10", book.Isbn10, Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));

    return document;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:24:45.477

据我了解，实际上并没有在 Lucene 中更新 Document 实例。它总是作为删除/插入完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:49:12.310

我们使用 Lucene.Net 2.0.0.4，而对于 3.0，我认为它们是相同的。

首先您需要将 ID 添加为**Field.Index.TOKENIZED**，然后您可以修改（先删除然后插入）索引。

```
document.Add(new Field("Id", book.Id.ToString(), Field.Store.YES, Field.Index.TOKENIZED)); 
```

然后打开索引而不是创建新的

```
IndexWriter indexWriter = new IndexWriter(_directory, new StandardAnalyzer(Version.LUCENE_30), false, IndexWriter.MaxFieldLength.UNLIMITED); 
```

有删除示例代码：

```
IndexReader reader = IndexReader.Open(_directory);
reader.DeleteDocuments(new Term("Id", book_id_delete));
reader.Close(); 
```

# php - CakePHP 模型->在字段中查找和 IF 条件

> ID：15070166
> 
> 赞同：1
> 
> 时间：2013-02-25T15:14:24.600
> 
> 标签：php, cakephp, models

我需要像这样构造一个 cakePHP 模型查询：

```
SELECT `Translate`.`var_name` , IF( prove_cn_sim =1, lang_cn_sim, lang_en )
FROM 'translate` AS `Translate` 
```

我试过了：

```
$this->find("list", array(
            'fields' => array("var_name","IF(prove_cn_sim = 1, lang_cn_sim, lang_en)"),
        )); 
```

但我得到了这样的东西：

```
SELECT `Translate`.`var_name`, Translate.IF(prove_cn_sim = 1, lang_cn_sim, lang_en) FROM `translate` AS `Translate` 
```

CakePHP 为 IF 添加表前缀。你知道任何解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:25:00.980

尝试向您的 Translate 模型添加一个[虚拟字段：](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

```
public $virtualFields = array(
    'lang' => 'IF(Translate.prove_cn_sim = 1, Translate.lang_cn_sim, Translate.lang_en)'
); 
```

然后，在模型上使用 find 时，您始终可以从虚拟`lang`字段中读取正确的值。在你的情况下会变成这样：

```
$this->find('list', array(
    'fields' => array('var_name', 'lang'),
)); 
```

# jquery - 滚动位置的动画条

> ID：15070167
> 
> 赞同：0
> 
> 时间：2013-02-25T15:14:37.750
> 
> 标签：jquery

我用 jquery 创建了一些动画条。我只是真的只是在学习 jQuery 和 javascript。它昨晚工作，栏在某个滚动位置时动画，但现在它不起作用，没有任何改变。有人帮我吗？或者有比我正在做的更好的方法吗？

[http://jsfiddle.net/FkUYf/1/](http://jsfiddle.net/FkUYf/1/)

```
$(document).ready(function(){
    $(document).scroll(function() {
        var top = $(document).scrollTop();
        console.log(top);
        if (top > 930) $("#html, #css").animate({width:"100%"}, 2000);
        if (top > 930) $("#javascript").animate({width:"70%"}, 2000);
        if (top > 930) $("#php").animate({width:"50%"}, 2000);
        if (top > 930) $("#mysql").animate({width:"30%"}, 2000);
        if (top > 930) $("#wordpress").animate({width:"60%"}, 2000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:19:22.727

你似乎没有达到 930 的保证金。它的`330`保证金工作正常。

[http://jsfiddle.net/FkUYf/2/](http://jsfiddle.net/FkUYf/2/)

# node.js - Cluster 如何跟上 Node 的单线程概念？

> ID：15070169
> 
> 赞同：2
> 
> 时间：2013-02-25T15:14:46.353
> 
> 标签：node.js, node-cluster

当您使用集群之类的东西分叉或启动多个工作人员时：

1.  是否正在创建节点进程的多个线程或实例？这是否打破了 Node 的单线程概念？

2.  工人之间的请求是如何处理的？Cluster 是否提供了一些智能机制来将所有请求负载平衡到多个工作人员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:19:19.430

`Cluster`使用`fork`，是的，它会自动平衡：

> 使用该`child_process.fork`方法生成工作进程，以便它们可以通过 IPC 与父进程通信并来回传递服务器句柄。
> 
> [...]
> 
> 当多个进程都`accept()`在同一个底层资源上运行时，操作系统非常有效地在它们之间进行负载平衡。Node.js 或您的程序中没有路由逻辑，工作人员之间也没有共享状态。因此，重要的是设计您的程序，使其不会过于依赖内存中的数据对象来处理会话和登录等事情。

如果您将新的 node.js 实例计为另一个线程，您可能会认为这会破坏 node.js 单线程概念，但是请记住，对给定请求的所有回调都将被处理为相同的 node.js 实例`accept`编辑了原始请求。没有竞争条件，没有共享数据，只有相当安全的进程间通信。

有关详细信息，请参阅[集群文档](http://nodejs.org/api/cluster.html#cluster_how_it_works)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:23:05.927

`Cluster`是为了弥补 的`node.js`单线程架构而开发的。现代处理器具有多个内核，单线程进程将无法利用可用内核。它确实偏离了它的单线程架构，但它从来都不是坚持它的计划。主要概念是异步的、事件驱动的执行。

> Cluster 使用 fork 创建进程。分叉进程实际上是具有自己地址空间的自己的进程 - 子进程（通常）无法影响其父进程或兄弟进程的地址空间（与线程不同）。除了在普通 ChildProcess 实例中包含所有方法外，返回的对象还具有内置的通信通道。所有分叉的进程都可以使用此通道进行通信。

注意这里的细微差别：它不是`multi-threaded`，它只是创建新的独立进程。请参阅此处[的 Threads vs Processes in Linux](https://stackoverflow.com/questions/807506/threads-vs-processes-in-linux)进行比较。每个工作人员都像以前一样采用单线程架构。所以它不会破坏节点的单线程概念。

负载平衡取决于您的代码本身（因为每个代码都是独立的）和操作系统。操作系统在所有分叉进程和原始进程之间平均平衡负载。

但是，如果您希望以不同的方式进行操作，那也是可能的。如果您使用主线程与工作线程不同，或者每个工作线程专门从事不同的任务（压缩/ffmpeg），您可以这样做。

# jasper-reports - 通过 iReport 格式化 Jasper 报表的布局，以去除带之间的空间

> ID：15070170
> 
> 赞同：0
> 
> 时间：2013-02-25T15:14:46.960
> 
> 标签：jasper-reports, ireport

我有以下报告，使用 iReport 3.0 开发（由于系统限制，我们必须使用此版本）。但无论我做什么，我都无法摆脱页眉（地址）和列标题之间的空白。

JRXML：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="customisation_summary" pageWidth="595" pageHeight="700" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isFloatColumnFooter="true">
    <style name="alternateStyle" isDefault="false" backcolor="#FFFFFF" fontName="Arial">
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue() % 2 == 0)]]></conditionExpression>
            <style isDefault="false" style="alternateStyle" backcolor="#F7F7F7"/>
        </conditionalStyle>
    </style>
    <parameter name="orderId" class="java.lang.String">
        <defaultValueExpression><![CDATA[new Integer(0).toString()]]></defaultValueExpression>
    </parameter>
    <parameter name="REPORT_IMG_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\kukri\\workspaces\\sts_3_0_0\\clubshop\\clubshop\\src\\main\\webapp\\jasper\\images\\"]]></defaultValueExpression>
    </parameter>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\kukri\\workspaces\\sts_3_0_0\\clubshop\\clubshop\\src\\main\\webapp\\jasper\\"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT so.customer_id, so.order_date, so.order_ref, p.product_code, p.colour_code, p.name, SUM(soi.quantity) AS quantity, sz.size, '-' AS uom, '-' AS location, scc.unit_charge, SUM(soi.quantity * scc.unit_charge) total_charge

                         FROM sales_order AS so, sales_order_item AS soi, product AS p, stock AS st, size AS sz, stock_currency_charge AS scc

                         WHERE so.id = soi.order_id 
                         AND soi.stock_id = st.id
                         AND st.product_id = p.id
                         AND st.id = scc.stock_id
                         AND st.size_id = sz.id
                         AND so.currency = scc.currency_code
                         AND so.id = '$P!{orderId}'

                         GROUP BY st.id

                         ORDER BY p.name, sz.display_seq]]>
    </queryString>
    <field name="customer_id" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="order_date" class="java.sql.Timestamp">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="order_ref" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="product_code" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="colour_code" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="name" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="quantity" class="java.lang.Integer">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="size" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="uom" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="location" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="unit_charge" class="java.math.BigDecimal">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="total_charge" class="java.math.BigDecimal">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <title>
        <band height="72" isSplitAllowed="false">
            <image onErrorType="Icon">
                <reportElement key="image-4" x="-1" y="0" width="555" height="71"/>
                <imageExpression class="java.lang.String"><![CDATA[$P{REPORT_IMG_DIR} + "//Top_Image.png"]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="307" y="51" width="247" height="20"/>
                <textElement textAlignment="Right">
                    <font size="14"/>
                </textElement>
                <text><![CDATA[Order Customisation Pick Sheet]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="45">
            <staticText>
                <reportElement x="399" y="2" width="62" height="18"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Order Ref: ]]></text>
            </staticText>
            <textField>
                <reportElement x="464" y="20" width="92" height="20"/>
                <textElement textAlignment="Right" verticalAlignment="Middle"/>
                <textFieldExpression class="java.util.Date"><![CDATA[$F{order_date}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="464" y="1" width="93" height="20"/>
                <textElement textAlignment="Right" verticalAlignment="Middle"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{order_ref}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="399" y="20" width="62" height="20"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Order Date: ]]></text>
            </staticText>
            <subreport>
                <reportElement x="179" y="1" width="175" height="40"/>
                <subreportParameter name="customer_id">
                    <subreportParameterExpression><![CDATA[$F{customer_id}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "customisation_jobsheet_summary_invaddy.jasper"]]></subreportExpression>
            </subreport>
            <subreport>
                <reportElement x="0" y="0" width="175" height="40"/>
                <subreportParameter name="customer_id">
                    <subreportParameterExpression><![CDATA[$F{customer_id}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "customisation_jobsheet_summary_del_addy.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </pageHeader>
    <columnHeader>
        <band height="20">
            <staticText>
                <reportElement mode="Opaque" x="23" y="1" width="79" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Product Code]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="463" y="1" width="39" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[UOM]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="178" y="1" width="231" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Product ]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="102" y="1" width="76" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Colour]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="409" y="1" width="26" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Size]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="435" y="1" width="28" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[QTY]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="501" y="1" width="55" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Location]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="2" y="1" width="21" height="18" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[#]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="19">
            <textField>
                <reportElement style="alternateStyle" isPrintRepeatedValues="false" x="21" y="1" width="79" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{product_code}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" isPrintRepeatedValues="false" x="176" y="1" width="231" height="18"/>
                <textElement/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" isPrintRepeatedValues="false" x="100" y="1" width="76" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{colour_code}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" x="433" y="1" width="28" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.Integer"><![CDATA[$F{quantity}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" x="461" y="1" width="39" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{uom}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" x="499" y="1" width="55" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{location}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="1" width="21" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.Integer"><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement style="alternateStyle" x="407" y="1" width="26" height="18"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{size}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="50"/>
    </columnFooter>
    <summary>
        <band height="80"/>
    </summary>
</jasperReport> 
```

# php - 如何检查由对象发起的操作是否有错误

> ID：15070173
> 
> 赞同：0
> 
> 时间：2013-02-25T15:14:55.800
> 
> 标签：php, web-services, asynchronous, prestashop

我正在开发 prestashop，并实现了一个 web 服务。我有大量数据，我想使用 Web 服务将其插入 prestashop。我尝试发送大块数据，一切似乎都运行良好，但是当我使用真实数据启动真实脚本时，出现问题，我会尝试解释它。我想插入所有产品的所有属性组合，所以，基本上，我有两个属性的两个 ID，例如：

> 颜色：红色（ID：1300）
> 
> 尺码 : XXL (ID:1934)

我也有我想与他们关联的产品的 ID，例如`17909`. 所有这些信息都是“直接”从数据库中获取的，所以没有网络服务，好吧，现在我想将它们发送到网络服务并告诉网络服务它必须为这个产品添加这个组合，调用是这样的：

```
$webService = new PrestaShopWebservice(PS_SHOP_PATH, PS_WS_AUTH_KEY, DEBUG);
$opt = array('resource' => 'combinations'); 
$xml_ins = $webService->get(array('url' => PS_SHOP_PATH.'/api/combinations?schema=blank')); 

$combinations = $xml_ins->children()->children();                                       
$combinations->id_product = $id_prodotto;                                       
$combinations->quantity = $quantita_combinazione;
$combinations->minimal_quantity = '1';
$combinations->default_on = '1';

unset($combinations->associations->product_option_values->product_option_value);
$combinations->associations->product_option_values->addChild('product_option_value')->addChild('id', $id_colore);
$combinations->associations->product_option_values->addChild('product_option_value')->addChild('id', $id_taglia);                               

$opt = array('resource' => 'combinations');
$opt['postXml'] = $xml_ins->asXML();        
$xml_ins = $webService->add($opt); 
```

有没有办法知道最后一行`$xml_ins = $webService->add($opt);`是否以正确的方式执行？实际上，我用 a 包围了所有内容，`try catch`但在执行大约 10 分钟后，除了几十个之外，所有组合都已插入。我没有错误，脚本只是......停止......就像在嵌套循环中打开太多try catch有点mh......很重，其中一些丢失......

我想了解该调用是否是异步调用......或者可以保持“开放”并与之后的所有其他调用堆叠的东西......一种嵌套的开放对象调用，如果你知道我的意思的话。

# matlab - 这些语句在matlab中是什么意思

> ID：15070177
> 
> 赞同：-10
> 
> 时间：2013-02-25T15:15:04.963
> 
> 标签：matlab

我来到了这两个语句，在`matlab`这里想问一下语法的含义。

`area_xy = (f > 1);`

`area_xyz = (f == 1);`

这是否意味着例如`area_xy`包含某些 vecotr 的元素，`f`使得这些元素是`> 1`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:24:07.643

在 MATLAB 中，比较运算符（例如 , , `>`）总是给出一个布尔结果：为真，为假。此外，如果其中一个操作数是向量，或者两个操作数都是大小相同的向量，则按*元素*进行比较，结果是布尔结果的向量。例如：`==``<=``1``0`

 *```
x = (1 < 2)     % x contains 1 since this is true
x = (1 == 2)    % x contains 0 since this is false

a = [ 1 3 5 3 2 ]
x = (a < 3)         % x contains [ 1 0 0 0 1 ], since 1 and 2 are less than 3 but the others are not

a = [ 1 3 5 2 3 ]
b = [ 1 4 2 2 4 ]
x = (a == b)        % x contains [ 1 0 0 1 0 ], since elements 1 and 4 are the same in each 
```

所以，`area_xy`不包含满足不等式的*元素*`f`；相反，它包含一个*掩码*，其中包含`1`不等式为真和不等式的`0`位置。您可以`f`通过评估获得满足此要求的实际值：

```
f(area_xy) 
```*

# ajax - 如何在客户端知道是否发生了回发？

> ID：15070178
> 
> 赞同：1
> 
> 时间：2013-02-25T15:15:06.393
> 
> 标签：ajax, telerik, postback, greasemonkey

我正在开发一个 Greasemonkey 脚本，这个脚本改变了表格中的一些元素。但是，当我们单击表中的按钮时，会发生异步回发并刷新表。

所以，我的元素也刷新了。我怎么知道回发已经发生，以便我可以再次运行我的脚本来更改表中的新元素？（该页面使用 Telerik。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:25:47.950

不要费心去检查回发 这几乎总是一种痛苦的做事方式。你关心表格内容，监控它。

看：

1.  [在同一页面上多次运行 Greasemonkey 脚本？](https://stackoverflow.com/questions/11195658/greasemonkey-run-script-on-same-page-multiple-times)
2.  [在 AJAX 请求上触发 Greasemonkey 脚本](https://stackoverflow.com/questions/8281441/fire-greasemonkey-script-on-ajax-request)
3.  [如何在不使用 DOM 突变事件的情况下检测 AJAX 节点插入？](https://stackoverflow.com/questions/10664669/how-can-i-detect-ajax-node-insertion-without-using-dom-mutation-events)

和其他几个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:15:16.423

正如 Brock Adams 在他的回答中所说，我决定监控表并编写以下代码：

```
function repairInputEvents() {
    for (var i = 0; i < document.getElementsByTagName("input").length; i++) {
        //Add event to buttons that cause postback.
        document.getElementsByTagName("input")[i].addEventListener("click", function() {

            //Run the following just before postback.
            document.getElementsByClassName("table")[0].setAttribute("title", "old");
            var checkAjaxInterval = setInterval(function() { checkAjax(); }, 1000);

            function checkAjax() {
                if (document.getElementsByClassName("table")[0].getAttribute("title") != "old") {
                    clearInterval(checkAjaxInterval);
                    repairInputEvents();
                    repairSelectEvents();
                }
            }

        });

    }
}

//First run
repairInputEvents();
repairSelectEvents(); 
```

# java - 来自服务器的 BufferedReader 不起作用

> ID：15070186
> 
> 赞同：0
> 
> 时间：2013-02-25T15:15:27.583
> 
> 标签：java, bufferedreader

`BufferedReader` `inClient`在这段代码中，我可以使用在客户端套接字上创建的 ,正确接收请求。然后我将请求发送到服务器，我看到服务器得到了它。但是，当我尝试从服务器读取回复（在服务器`BufferedReader` `inServer`的套接字上使用）时，它总是以`IOException: Impossible read from server`.

我指的是块################你知道任何可能的原因吗？

```
import java.io.*;
import java.net.Socket;
import java.net.ServerSocket;
import java.net.InetAddress;
import java.net.UnknownHostException;

public class ProxyMain {

public static void main(String argv[]) {

    int proxyPort = 55554;
    String proxyAddr = "127.0.0.1";
    ServerSocket proxySocket = null;

    try {
        proxySocket = new ServerSocket(proxyPort, 50, InetAddress.getByName("127.0.0.1"));
    }

    catch (Exception e) {
        System.err.println("Impossible to create socket server!");
        System.out.flush();
        System.exit(1);
    }

    System.out.printf("Proxy active on port: %d and on address %s\n", proxyPort, proxySocket.getInetAddress());
    System.out.println();

    while (true) {
        Socket client = null;
        Socket sockServ = null;
        BufferedReader inClient = null;
        PrintWriter outClient = null;
        BufferedReader inServer = null;
        PrintWriter outServer = null;
        String request = new String();
        String tmp = new String();
        String reply = new String();
        String tmpReply = new String();

        try {
            client = proxySocket.accept();
            System.out.println("Connected to: ");
            System.out.println(client.getInetAddress().toString());
            System.out.printf("On port %d\n", client.getPort());
            System.out.println();
            inClient = new BufferedReader(new InputStreamReader(client.getInputStream()));
            outClient = new PrintWriter(client.getOutputStream(), true);

        }

        /*catch (IOException e) {
            System.err.println("Couldn't get I/O for connection accepted");
            System.exit(1);
        }*/

        catch (Exception e) {
            System.out.println("Error occurred!");
            System.exit(1);
        }

        System.out.println("Received request:");

        try{
            for (int i = 0; i<2; i++) {
                tmp = inClient.readLine();
                request = request + tmp;
            }

            inClient.close();
        }
        catch (IOException ioe) {
            System.err.println("Impossible to read mhttp request!");
            System.exit(1);
        }

        System.out.println(request);
        System.out.println();

        try {

            sockServ = new Socket("127.0.0.1", 55555);
            outServer = new PrintWriter(sockServ.getOutputStream(), true);
            inServer = new BufferedReader(new InputStreamReader(sockServ.getInputStream()));

        }

        catch (UnknownHostException e) {
            System.err.println("Don't know about host: 127.0.0.1:55555");
            System.exit(1);
        }

        catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: 127.0.0.1:55555");
            System.exit(1);
        }

        outServer.println(request);
        outServer.close();

        try {
            #################################################
            while ((tmpReply = inServer.readLine()) != null) {
                System.out.println(tmpReply);
                reply = reply + tmpReply;
            }

            inServer.close();
            sockServ.close();

        }

        catch (IOException ioe) {
            System.err.println("Impossible to read from server!");
            System.exit(1);
        }

        outClient.println(reply);
        outClient.close();

        try {
            client.close();
        }

        catch (IOException ioe) {
            System.err.printf("Impossible to close connection with %s:%d\n", client.getInetAddress().toString(), client.getPort());
        }

    }

}

} 
```

更新：似乎如果我这样做： boolean res = inServer.ready(); 它总是返回假。所以服务器还没有准备好发送回复，但这很奇怪......我在 C e Python 中的项目它立即工作。为什么java应该不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:24:35.627

当您关闭时`outServer`，您关闭底层套接字。如果您*只想*关闭输出并保持输入打开，则需要使用`Socket.shutdownOutput()`. 请注意，您在关闭时遇到了同样的问题`inClient`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:38:01.430

这行得通，也许你可以从中得到一些想法......

ChatServer - 向所有连接的客户端广播

在一个命令提示符中：`java ChartServer`
在另一个命令提示符中：（`java ChatClient localhost` *或服务器运行位置的 IP 地址）*
另一个：（`java ChatClient localhost` *或服务器运行位置的 IP 地址）*

开始在客户端窗口中聊天。

像这样的服务器...

```
// xagyg wrote this, but you can copy it
import java.io.*;
import java.net.*;
import java.util.*;

public class ChatServer {

    public static List list = new ArrayList();

    public static void main(String[] args) throws Exception {

        ServerSocket svr = new ServerSocket(4444);

        System.out.println("Chat Server started!");

        while (true) {
            try {
                Socket s = svr.accept();
                synchronized(list) {
                   list.add(s);              
                }                                  
                new Handler(s, list).start();
            }
            catch (IOException e) {
                // print out the error, but continue!
                System.err.println(e);
            }
        }
    }
}

class Handler extends Thread {

    private Socket s;
    private String ipaddress;
    private List list;

    Handler (Socket s, List list) throws Exception {
      this.s = s;
      ipaddress = s.getInetAddress().toString();
      this.list = list;
    }

    public void run () {

      try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(s.getInputStream()));
        String message;
        //MyDialog x = (MyDialog)map.get(ipaddress.substring(1));
        while ((message = reader.readLine()) != null) {
            if (message.equals("quit")) {
                synchronized(list) {
                    list.remove(s);
                }
                break;
            }
            synchronized(list) {
                for (Object object: list) {
                    Socket socket = (Socket)object;
                    if (socket==s) continue;
                    PrintWriter writer = new PrintWriter(socket.getOutputStream());
                    writer.println(ipaddress + ": " + message);
                    writer.flush();
                }
            }
        }
        try { reader.close(); } catch (Exception e) {}
      }
      catch (Exception e) {
        System.err.println(e);
      }
    }
} 
```

这样的客户...

```
// xagyg wrote this, but you can copy it
import java.util.*;
import java.io.*;
import java.net.*;

public class ChatClient {

    public static void main(String[] args) throws Exception {

        Socket s = new Socket(args[0], 4444);
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        PrintWriter out = new PrintWriter(s.getOutputStream());
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        String message;
        new SocketReader(in).start();   
        while ((message = reader.readLine())!=null) {
            out.println(message);
            out.flush();
            if (message.equals("quit")) break;
        }
        in.close();
        out.close();
    }        
}

class SocketReader extends Thread {

    BufferedReader in;

    public SocketReader(BufferedReader in) {
        this.in = in;
    }

    public void run() {   
        String message;
        try {
            while ((message = in.readLine())!=null) {
                System.out.println(message);
            }
        }
        catch (Exception e) {
            throw new RuntimeException(e);
        }        
    }
} 
```

# java - 使用weblogic 10g bean注入jpa/ejb的空指针异常

> ID：15070192
> 
> 赞同：0
> 
> 时间：2013-02-25T15:15:57.257
> 
> 标签：java, jsf, jpa, netbeans, weblogic

我的 EJB / JPA 项目有问题。我使用 netbeans、weblogic 10g 和 Java EE 应用程序。

我的问题是，我创建“来自数据库的实体类”，然后创建“实体类的会话 bean”，这基本上是我的门面。

然后我回顾了我的战争项目并说“实体类的 JSF 页面”Netbeans 很好地创建了所有类。

一开始它说我必须有一个持久性提供程序，为此我添加了库“Hibernate JPA”。

这是我的 ArchJpaController：

```
package JPAControllerS;

import JPAControllerS.exceptions.NonexistentEntityException;
import JPAControllerS.exceptions.RollbackFailureException;
import entities.Arch;
import java.io.Serializable;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityNotFoundException;
import javax.persistence.Query;
import javax.transaction.UserTransaction;

public class ArchJpaController implements Serializable {

    public ArchJpaController(UserTransaction utx, EntityManagerFactory emf) {
        this.utx = utx;
        this.emf = emf;
    }
    private UserTransaction utx = null;
    private EntityManagerFactory emf;

    public EntityManager getEntityManager() {
        return emf.createEntityManager();
    }

    public void create(Arch arch) throws RollbackFailureException, Exception {
        EntityManager em = null;
        try {
            utx.begin();
            em = getEntityManager();
            em.persist(arch);
            utx.commit();
        } catch (Exception ex) {
            try {
                utx.rollback();
            } catch (Exception re) {
                throw new RollbackFailureException("An error occurred attempting to roll back the transaction.", re);
            }
            throw ex;
        } finally {
            if (em != null) {
                em.close();
            }
        }
    }

    public void edit(Arch arch) throws NonexistentEntityException, RollbackFailureException, Exception {
        EntityManager em = null;
        try {
            utx.begin();
            em = getEntityManager();
            arch = em.merge(arch);
            utx.commit();
        } catch (Exception ex) {
            try {
                utx.rollback();
            } catch (Exception re) {
                throw new RollbackFailureException("An error occurred attempting to roll back the transaction.", re);
            }
            String msg = ex.getLocalizedMessage();
            if (msg == null || msg.length() == 0) {
                Integer id = arch.getId();
                if (findArch(id) == null) {
                    throw new NonexistentEntityException("The arch with id " + id + " no longer exists.");
                }
            }
            throw ex;
        } finally {
            if (em != null) {
                em.close();
            }
        }
    }

    public void destroy(Integer id) throws NonexistentEntityException, RollbackFailureException, Exception {
        EntityManager em = null;
        try {
            utx.begin();
            em = getEntityManager();
            Arch arch;
            try {
                arch = em.getReference(Arch.class, id);
                arch.getId();
            } catch (EntityNotFoundException enfe) {
                throw new NonexistentEntityException("The arch with id " + id + " no longer exists.", enfe);
            }
            em.remove(arch);
            utx.commit();
        } catch (Exception ex) {
            try {
                utx.rollback();
            } catch (Exception re) {
                throw new RollbackFailureException("An error occurred attempting to roll back the transaction.", re);
            }
            throw ex;
        } finally {
            if (em != null) {
                em.close();
            }
        }
    }

    public List<Arch> findArchEntities() {
        return findArchEntities(true, -1, -1);
    }

    public List<Arch> findArchEntities(int maxResults, int firstResult) {
        return findArchEntities(false, maxResults, firstResult);
    }

    private List<Arch> findArchEntities(boolean all, int maxResults, int firstResult) {
        EntityManager em = getEntityManager();
        try {
            Query q = em.createQuery("select object(o) from Arch as o");
            if (!all) {
                q.setMaxResults(maxResults);
                q.setFirstResult(firstResult);
            }
            return q.getResultList();
        } finally {
            em.close();
        }
    }

    public Arch findArch(Integer id) {
        EntityManager em = getEntityManager();
        try {
            return em.find(Arch.class, id);
        } finally {
            em.close();
        }
    }

    public int getArchCount() {
        EntityManager em = getEntityManager();
        try {
            Query q = em.createQuery("select count(o) from Arch as o");
            return ((Long) q.getSingleResult()).intValue();
        } finally {
            em.close();
        }
    }
} 
```

这是我的 ArchController：

```
 package JSFClasses;

import entities.Arch;
import JSFClasses.util.JsfUtil;
import JSFClasses.util.PaginationHelper;
import JPAControllerS.ArchJpaController;

import java.io.Serializable;
import java.util.ResourceBundle;
import javax.annotation.Resource;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.faces.model.SelectItem;
import javax.persistence.EntityManagerFactory;
import javax.persistence.PersistenceUnit;
import javax.transaction.UserTransaction;

@ManagedBean(name = "archController")
@SessionScoped
public class ArchController implements Serializable {

    @Resource
    private UserTransaction utx = null;
    @PersistenceUnit(unitName = "IBB_Latest-warPU")
    private EntityManagerFactory emf = null;
    private Arch current;
    private DataModel items = null;
    private ArchJpaController jpaController = null;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ArchController() {
    }

    public Arch getSelected() {
        if (current == null) {
            current = new Arch();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ArchJpaController getJpaController() {
        if (jpaController == null) {
            jpaController = new ArchJpaController(utx, emf);
        }
        return jpaController;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {
                @Override
                public int getItemsCount() {
                    return getJpaController().getArchCount();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getJpaController().findArchEntities(getPageSize(), getPageFirstItem()));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (Arch) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new Arch();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getJpaController().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArchCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (Arch) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getJpaController().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArchUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (Arch) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getJpaController().destroy(current.getId());
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArchDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getJpaController().getArchCount();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getJpaController().findArchEntities(1, selectedItemIndex).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(getJpaController().findArchEntities(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(getJpaController().findArchEntities(), true);
    }

    @FacesConverter(forClass = Arch.class)
    public static class ArchControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ArchController controller = (ArchController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "archController");
            return controller.getJpaController().findArch(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Arch) {
                Arch o = (Arch) object;
                return getStringKey(o.getId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + Arch.class.getName());
            }
        }
    }
} 
```

最后我的例外：

```
java.lang.NullPointerException
    at JPAControllerS.ArchJpaController.getEntityManager(ArchJpaController.java:43)
    at JPAControllerS.ArchJpaController.findArchEntities(ArchJpaController.java:132)
    at JPAControllerS.ArchJpaController.findArchEntities(ArchJpaController.java:128)
    at JSFClasses.ArchController$1.createPageDataModel(ArchController.java:66)
    at JSFClasses.ArchController.getItems(ArchController.java:166)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:261)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:118)
    at com.sun.el.parser.AstEqual.getValue(AstEqual.java:41)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:192)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:413)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1750)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:134)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:43)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:43)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3496)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(Unknown Source)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

如果有人可以在这个问题上帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:55:12.597

第一：您使用的是什么版本的 JPA？1.0 还是 2.0？如果你使用 2.0，weblogic 默认不支持。但是您可以启用以下更改：

1.  找到文件 commEnv.cmd（或 sh 对于 linux）。该文件位于 WEBLOGIC_HOME/common/bin 中。Windows 示例：C:\Oracle\Middleware\wlserver_10.3\common\bin

2.  将以下行添加到文件中

    @rem JAR AGREGADOS PARA EL SOPORTE DE JPA2.0 EN WLS 设置 PRE_CLASSPATH=%MW_HOME%/modules/javax.persistence_1.0.0.0_2-0-0.jar;%MW_HOME%/modules/com.oracle.jpa2support_1.0.0。 0_2-0.jar

3.  重新启动 de weblogic 服务器

对于注入持久性单元，您可以使用

```
@PersistenceContext(unitName = "PersistenceUnitName")
private EntityManager em; 
```

在你的门面或道课上

您不需要 EntityManagerFactory 注入。

我希望这对你有帮助。

对不起我的英语......这真的很糟糕.. :-(

# sql - 如果括号和分号被过滤，则 SQL 注入

> ID：15070194
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:16:08.430
> 
> 标签：sql, sql-server, sql-injection

我有这样的声明：

```
SELECT * FROM TABLE WHERE COLUMN = 123456 
```

`123456`由用户提供，因此它容易受到 SQLi 的攻击，但是如果我去掉所有分号和括号，黑客是否可以运行`DROP,UPDATE,INSERT`除 之外的任何其他语句（如等）`SELECT`？

我已经在使用准备好的语句，但我很好奇如果输入被去掉了行终止符和括号，黑客可以以任何方式修改数据库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:18:03.653

使用 sql 参数。试图“清理”输入是一个**非常**糟糕的主意。尝试用谷歌搜索一些复杂的 sql 注入片段，你不会相信黑帽黑客的创造力有多大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:25:19.527

一般来说，很难通过尝试去除特定字符来 100% 确定您可以免受此类攻击 - 绕过代码的方法太多（通过使用字符编码等）

更好的选择是将参数传递给存储过程，如下所示：

```
CREATE PROCEDURE usp_MyStoredProcedure
    @MyParam  int
AS

BEGIN
    SELECT * FROM TABLE WHERE COLUMN = @MyParam

END
GO 
```

这样，SQL 会将传入的值视为参数，而不是其他任何内容，无论它包含什么。在这种情况下，无论如何它只会接受 int 类型的值。

如果您不想或不能使用存储过程，那么我建议您更改代码，以便输入参数只能包含预定义的字符列表 - 在这种情况下为数字字符。这样您就可以确定该值可以安全使用。

# wpf - 打开文件时出现 WPF 列表选择问题

> ID：15070195
> 
> 赞同：0
> 
> 时间：2013-02-25T15:16:09.193
> 
> 标签：wpf, popup, process.start

有一个 WPF 应用程序，它有一个悬停弹出窗口。弹出窗口包含可以打开的不同文件的列表（例如 pdf、excel 等）

您可以通过双击来导航和选择一个文件，它会按您的预期打开。

但是，如果我现在导航到另一个文件，我可以看到悬停选择现在不起作用，

如果您现在选择不同的文件，则会再次打开原始文件。

我正在使用 Process.Start 并将文件的完整路径传递给该方法。

该应用程序大小适中，因此这里是我编写的测试应用程序的一些摘录，以进一步研究

主窗口的 XAML

```
<Window x:Class="TestPopupIssue.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Canvas Margin="5" Background="Red" Width="200" Height="150" >

        <Rectangle Name="rectangle1"
           Canvas.Top="60" Canvas.Left="50"
           Height="85" Width="60" 
           Fill="Black" MouseEnter="rectangle1_MouseEnter"   MouseLeave="rectangle1_MouseLeave"  />

        <Popup x:Name="PopupWindow" PlacementTarget="{Binding ElementName=rectangle1}" Placement="Top"  MouseEnter="rectangle1_MouseEnter"  MouseLeave="rectangle1_MouseLeave">
            <ListBox MinHeight="50" ItemsSource="{Binding Files}" MouseDoubleClick="FileList_MouseDoubleClick"`enter code here` x:Name="FileList" />
        </Popup>
    </Canvas>

</Window> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
    {
        FileList f;

        public MainWindow()
        {
            InitializeComponent();

            f = new FileList();
            f.PopulateFiles();

            this.DataContext = f;
        }

        private void FileList_MouseDoubleClick(object sender, MouseButtonEventArgs e)
        {
            if (FileList.SelectedItem != null)
            {
                string item = FileList.SelectedItem as string;

                if (item != null)
                {
                   System.Diagnostics.Process.Start(item);               
                }

            }
        }

        private void rectangle1_MouseEnter(object sender, MouseEventArgs e)
        {
            PopupWindow.IsOpen = true;
        }

        private void rectangle1_MouseLeave(object sender, MouseEventArgs e)
        {
            PopupWindow.IsOpen = false;
        }
    } 
```

还有一个 FileList 类，它只有一个名为 Files 的文件路径的通用字符串列表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:03:07.317

我已经测试了您的示例应用程序，当您使用 Process.Start 打开文件时，您的焦点被打开文件的应用程序窃取。当窗口失去焦点时，弹出窗口中的列表框无法更改其 SelectedItem。

不幸的是，我没有设法将焦点重新放在窗口上，this.SetFocus() 对我不起作用。

无论如何，另一种可能的解决方案是在打开文件时关闭弹出窗口。

```
private void FileList_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    if (FileList.SelectedItem != null)
    {
        string item = FileList.SelectedItem as string;

        if (item != null)
        {
            System.Diagnostics.Process.Start(item);
            PopupWindow.IsOpen = false;
        }
    }       
} 
```

这样 ListBox 可以再次更新 selectedItem。

希望这可以帮助！

# javascript - 隐藏 JWPlayer 时无法播放音频

> ID：15070196
> 
> 赞同：1
> 
> 时间：2013-02-25T15:16:11.050
> 
> 标签：javascript, jwplayer

我目前正在尝试让 JWPlayer 在隐藏用户界面时播放音频文件。它适用于视频（播放视频中的声音），但由于某种原因，当我使用相同的技术播放音频文件时，单击自定义播放按钮时没有任何反应。

此代码按预期播放视频中的声音：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
</head>
<body>
    <div style="display: none;">
        <div id="player"></div>
    </div>
    <input onclick="jwplayer('player').play();" type="button" value="Play the hidden video!!!" />
    <script type="text/javascript">

        jwplayer("player").setup({
            levels: [
            { file: "VideoTest001.mp4" },
            { file: "VideoTest001.ogv" },
            { file: "VideoTest001.webm" }
            ]
        });

    </script>
</body>
</html> 
```

此代码可以正常播放音频（但播放器可见）：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
</head>
<body>
    <div id="player"></div>
    <input onclick="jwplayer('player').play();" type="button" value="Play the hidden audio!!!" />
    <script type="text/javascript">

        jwplayer("player").setup({
            levels: [
                { file: "AudioTest.mp3" },
                { file: "AudioTest.wav" }
            ]
        });

    </script>
</body>
</html> 
```

一旦我添加`<div style="display: none;">...</div>`音频不再播放。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
</head>
<body>
    <div style="display: none;">
        <div id="player"></div>
    </div>
    <input onclick="jwplayer('player').play();" type="button" value="Play the hidden audio!!!" />
    <script type="text/javascript">

        jwplayer("player").setup({
            levels: [
                { file: "AudioTest.mp3" },
                { file: "AudioTest.wav" }
            ]
        });

    </script>
</body>
</html> 
```

任何人都可以帮忙吗？我希望在隐藏 JWPlayer 用户界面时播放音频。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:05:04.657

据我所知，当 div 的显示样式设置为 none 时，不会加载内容。

尝试设置这样的东西

```
<div style="width: 1px; height: 1px; position: absolute; top: -9999px; left: -9999px;">
    <div id="player"></div>
</div> 
```

# internet-explorer-7 - 使用 JavaScript 显示的元素在 IE7 中显示不正确

> ID：15070200
> 
> 赞同：0
> 
> 时间：2013-02-25T15:16:37.813
> 
> 标签：internet-explorer-7

我有一个元素设置为在页面加载时不显示。当您从选择列表中选择一个数字时，该元素将与 jQuery 一起显示。这在除 IE7 之外的所有浏览器中都可以正常工作。

在 IE7 中，如果我禁用 JavaScript，一切都会正确布局。然而，随着 js 打开（然后通过选择列表显示的元素），图例出现在错误的位置。如果使用开发人员工具更改字段集的宽度并将其更改回原始值，则它会正确显示。

所以它似乎是 IE7 中隐藏元素的某种渲染问题。如果我添加这个 CSS，它会弄乱我的网站，但它解决了这个特定问题。

```
* {
position: relative !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:21:33.777

添加一个用 css 隐藏的类而不是添加 display none 作为内联样式解决了这个问题。

# sql - SQL Server 查询多对多关系 - 如何查询？

> ID：15070202
> 
> 赞同：1
> 
> 时间：2013-02-25T15:16:42.620
> 
> 标签：sql, sql-server-2008, many-to-many, pivot

这是我之前问题的更新：[多对多关系](https://stackoverflow.com/questions/14644293/sql-server-query-for-many-to-many-relationship/14644500#comment21191340_14644500)

以前的解决方案工作正常，但现在我想稍微改进一下结果。我想将所有波长值放在一行中。

因此，而不是以下结果：

```
DateTimeID  Wavelength  SensorID
11435   1581,665    334
11435   1515,166    334
11435   1518,286    335 
```

我想要类似的东西：

```
DateTimeID  Wavelength1 Wavelength2  SensorID
11435   1581,665    1515,166     334
11435   1518,286                 335 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:21:13.283

您可以使用将 a 应用于`row_number()`记录的以下内容：

```
select DateTimeID,
  [1] as Wavelength1, 
  [2] as Wavelength2,
  SensorId
from
(
  select [DateTimeID], [Wavelength], [SensorID],
    row_number() over(partition by DateTimeID, SensorId
                      order by DateTimeID) rn
  from yourtable
) src
pivot
(
  max(Wavelength)
  for rn in ([1], [2])
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/0877c/2)。

如果您将有未知数量的`wavelength`值，那么您可以使用动态 SQL 来生成：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Wavelength'+cast(rn as varchar(50))) 
                    from
                    (
                      select row_number() over(partition by DateTimeID, SensorId
                                              order by DateTimeID) rn
                      from yourtable
                    ) src
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT DateTimeID,' + @cols + ', SensorId  from 
             (
                select [DateTimeID], [Wavelength], [SensorID],
                  ''Wavelength''+cast(row_number() over(partition by DateTimeID, SensorId
                                        order by DateTimeID) as varchar(50)) rn
                from yourtable
            ) x
            pivot 
            (
                max(Wavelength)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0877c/8)

# compiler-errors - VHDL 错误（需要简单的表达式）

> ID：15070204
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:16:49.983
> 
> 标签：compiler-errors, vhdl, digital, hdl, digital-logic

我是 VHDL 新手，我的代码有问题，我似乎无法修复。我们应该使用选定的信号分配或表格查找来做到这一点。我的是两者的结合，因为我们应该使用不关心不会发生的输入。

该代码基本上应该为 2 的补码输入或偏移二进制提供相同的输出。因此，例如，十进制数 7 在偏移二进制中是“1111”，在 2 的补码中是“0111”。两种形式都应根据开关 oe 的值生成“1111100000”的输出（'1' 表示偏移二进制，'0' 表示 2 的补码）。

我已经在这个级别尽可能多地调试了我的代码，但我不明白我做错了什么。

Active-HDL 目前在第 48 行和第 55 行出现错误。我收到两个“预期的简单表达式”错误。

我的代码位于下面的 pastebin URL，因为它允许更好的可读性和语法突出显示（另外，我不喜欢摆弄 Stack Exchange 发布代码的奇怪方式）。此外，如果您对如何在维护分配说明的同时改进代码有任何提示，请随时提出任何建议。

[http://pastebin.com/aAJAs6KQ](http://pastebin.com/aAJAs6KQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:15:19.827

Just use a process to make it more readable:

```
...
-- untested
process( input, d, tmp, ob)
begin
   if ob = '1' then  
        led <= table(to_integer(unsigned(d & tmp)));
   else                 
        led <= table(to_integer(unsigned(not d & tmp)));
   end if;
end process;
... 
```

# java - 如何访问存储在服务器上的图像

> ID：15070207
> 
> 赞同：1
> 
> 时间：2013-02-25T15:16:52.860
> 
> 标签：java, jakarta-ee, file-upload, glassfish-3

我有一个托管在 jelastic.com 上的 Web 应用程序。我使用路径将图像上传到服务器的主目录`/opt/glassfish3/temp`。代码如下：

```
FileOutputStream fos = new FileOutputStream("/opt/glassfish3/temp/" + fileName);
            fos.write(uploadedFile.getContents());
            fos.flush();
            fos.close(); 
```

我正在使用图像标签来显示图像文件，但它给了我一个损坏的图像。html代码如下：

```
<img src="/opt/glassfish3/temp/${sessionScope['userdet']['image']}" width="200px" ></img> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:01:50.687

Jelastic 中的主文件夹主要用于存储目的。您最好将文件保存在 Web 服务器的文件夹中。因此尝试替换您使用的代码：

`FileOutputStream fos = new FileOutputStream("/opt/glassfish3/temp/" + fileName)`

有了这个：

`FileOutputStream fos = new FileOutputStream("/opt/glassfish3/glassfish/domains/ domain1/applications/{PUT_HERE_CONTEXT_NAME}/" + fileName);`

然后修改html代码：

`<img src="/opt/glassfish3/temp/${sessionScope['userdet']['image']}" width="200px" ></img> -> <img src="${sessionScope['userdet']['image']}" width="200px" ></img>`

# google-app-engine - 在 memcache 或内存中读/写字符串数组

> ID：15070209
> 
> 赞同：0
> 
> 时间：2013-02-25T15:16:58.220
> 
> 标签：google-app-engine

我需要每分钟多次添加到字符串数组（可能在内存缓存或内存中，但不是数据存储中）。（请记住，有一些 JVM 实例）。

然后每分钟一次，一个 cron 作业出现并获取数组内容，一旦完成，它就会清除数组。

但问题是（a）使用内存，每个 jvm 实例都有一个数组实例，因此它不起作用。以及 (b) 如何避免覆盖数据或导致同步问题使用 memcache 执行类似的操作？什么是替代方案（不使用数据存储）

该数组将永远只有大约 100 个最大条目。

# bash - 从 bash 脚本运行的 rsync 不保留所有权

> ID：15070210
> 
> 赞同：1
> 
> 时间：2013-02-25T15:16:58.283
> 
> 标签：bash, eval, rsync

我正在尝试创建一个 bash 脚本，它将指定为命令行参数的目录同步到远程服务器（也由参数指定）。目前，我正在使用`eval`，它解决了参数扩展问题，但由于某种原因导致 rsync 不保留远程文件的所有权（除了是邪恶的，我知道）。从命令提示符运行具有所有相同标志和参数的 rsync 命令可以正常工作。

我尝试使用它作为替代方案，但我在变量扩展和保护需要保护远程 rsync 路径的位（对于带空格的路径需要引号*和*反斜杠）`$()`方面陷入了真正的混乱。

 *所以 - 我猜有两个问题 - 是否有`eval`阻止`rsync`保留所有权的原因（bash 脚本在源计算机上以 root 身份运行，并且也以 root 身份运行`ssh`到远程计算机 - 就目前而言）？在这种情况下有没有办法`$()`开始工作？（修剪）代码如下：

```
#!/bin/bash

RSYNC_CMD="/usr/bin/rsync"
RSYNC_FLAGS="-az --rsh=\"/usr/bin/ssh -i \${DST_KEY}\""  # Protect ${DST_KEY} until it is assigned later

SRC=${1}  # Normally this is sense checked and processed to be a canonical path

# Logic for setting DST based on command line parameter snipped for clarity - just directly assign for testing

DST='root@some.server.com:'
DST_KEY='/path/to/sshKey.rsa'

TARG=${DST}${SRC//' '/'\ '}  # Escape whitespace for target system

eval ${RSYNC_CMD} ${RSYNC_FLAGS} \"${SRC}\" \"${TARG}\"  # Put quotes round the paths - even though ${TARG} is already escaped

# All synced OK - but ownership not preserved despite -a flag 
```

我尝试更改`RSYNC_CMD`为`sudo /usr/bin/rsync`，并添加`--rsync-path="sudo /usr/bin/rsync`到`RSYNC_FLAGS`，但都没有任何区别。我只是看不到我错过了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:10:22.413

正确的方法是使用数组。`-a`应该已经暗示了`-o`。

```
RSYNC_CMD="/usr/bin/rsync"

DST='root@some.server.com:'
DST_KEY='/path/to/sshKey.rsa'

RSYNC_FLAGS=(-az --rsh="/usr/bin/ssh -i ${DST_KEY}")

SRC=${1}
TARG="${DST}$SRC"

${RSYNC_CMD} "${RSYNC_FLAGS[@]}" "${SRC}" "${TARG}" 
```

使用`RSYNC_RSH`而不是`--rsh`，您可以在设置变量值之前导出变量。这至少可以让您将导出放在设置其余标志的同一区域。然后，您可以推迟完成其值，直到您拥有正确的身份文件。

```
RSYNC_CMD="/usr/bin/rsync"
export RSYNC_RSH="/usr/bin/ssh -i %s"  # Use a placeholder for now; set it later
RSYNC_FLAGS=( -a -z )

# Later...

DST='root@some.server.com:'
DST_KEY='/path/to/sshKey.rsa'
RSYNC_RSH=$( printf "$RSYNC_RSH" "$DST_KEY" )

SRC=${1}
TARG="${DST}$SRC"

${RSYNC_CMD} "${RSYNC_FLAGS[@]}" "${SRC}" "${TARG}" 
```*

# r - 使用“FUN=first”跳过 NA 值

> ID：15070213
> 
> 赞同：4
> 
> 时间：2013-02-25T15:17:03.103
> 
> 标签：r, function, dataframe

对于我做错了什么，可能真的有一个简单的解释，但是我今天已经为此工作了很长一段时间，但我仍然无法让它发挥作用。我认为这将是在公园里散步，但是，我的代码并没有按预期工作。

所以对于这个例子，假设我有一个如下的数据框。

```
df
Row#   user      columnB    
1        1          NA        
2        1          NA        
3        1          NA        
4        1          31        
5        2          NA        
6        2          NA        
7        2          15        
8        3          18        
9        3          16       
10       3          NA 
```

基本上，我想创建一个新列，它使用第一个（**以及最后一个**）函数（在 TTR 库包中）为每个用户获取第一个非 NA 值。所以我想要的数据框就是这个。

```
df
Row#   user      columnB    firstValue
1        1          NA        31
2        1          NA        31 
3        1          NA        31
4        1          31        31
5        2          NA        15
6        2          NA        15 
7        2          15        15
8        3          18        18
9        3          16        18
10       3          NA        18 
```

我主要使用谷歌环顾四周，但我真的找不到我的确切答案。

这是我尝试过的一些代码，但没有得到我想要的结果（注意，我是从记忆中带来的，所以还有很多变体，但这些是一般形式我一直在尝试）。

```
 df$firstValue<-ave(df$columnB,df$user,FUN=first,na.rm=True)
    df$firstValue<-ave(df$columnB,df$user,FUN=function(x){x,first,na.rm=True})
    df$firstValue<-ave(df$columnB,df$user,FUN=function(x){first(x,na.rm=True)})
    df$firstValue<-by(df,df$user,FUN=function(x){x,first,na.rm=True}) 
```

失败了，这些只是给出每个组的第一个值，即 NA。

同样，这些只是我脑海中的几个例子，我玩弄了 na.rm，使用了 na.exclude、na.omit、na.action(na.omit) 等......

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:29:41.217

一个`data.table`解决方案

```
require(data.table)
DT <- data.table(df, key="user")
DT[, firstValue := na.omit(columnB)[1], by=user] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:34:20.450

这是一个解决方案`plyr`：

```
ddply(df, .(user), transform, firstValue=na.omit(columnB)[1]) 
```

这使 ：

```
 Row user columnB firstValue
1   1    1      NA         31
2   2    1      NA         31
3   3    1      NA         31
4   4    1      31         31
5   5    2      NA         15
6   6    2      NA         15
7   7    2      15         15
8   8    3      18         18
9   9    3      16         18 
```

如果要捕获最后一个值，可以执行以下操作：

```
ddply(df, .(user), transform, firstValue=tail(na.omit(columnB),1)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T15:38:46.543

使用`data.table`

```
library (data.table)
DT <- data.table(df, key="user")
DT <- setnames(DT[unique(DT[!is.na(columnB), list(columnB), by="user"])], "columnB.1", "first") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T15:47:26.513

使用一个非常小的辅助函数

```
finite <- function(x) x[is.finite(x)] 
```

这是一个仅使用标准 R 函数的单行代码：

```
df <- cbind(df, firstValue = unlist(sapply(unique(df[,1]), function(user) rep(finite(df[df[,1] == user,2])[1], sum(df[,1] == user)))) 
```

为了更好地概述，这里是展开成“多线”的单线：

```
# for each user, find the first finite (in this case non-NA) value of the second column and replicate it as many times as the user has rows
# then, the results of all users are joined into one vector (unlist) and appended to the data frame as column
df <- cbind(
  df,
  firstValue = unlist(
    sapply(
       unique(df[,1]),
       function(user) {
         rep(
           finite(df[df[,1] == user,2])[1],
           sum(df[,1] == user)
         )
       }
    )
  )
) 
```

# java - Sonar 可以将系统属性传递给 FindBugs 吗？（例如 findbugs.assertionmethods）

> ID：15070214
> 
> 赞同：1
> 
> 时间：2013-02-25T15:17:04.047
> 
> 标签：java, sonarqube, findbugs

FindBugs 提供了一些本质上是 Java 系统属性的[分析属性](http://findbugs.sourceforge.net/manual/analysisprops.html)。当 Sonar 启动时，有没有办法将这些属性传递给 FindBugs？

在 FindBugs 的 Sonar 配置中没有这样的选项，只有 Exclude Filters、Timeout 和 Effort 的输入字段。我找不到将系统属性或 JVM 参数传递到使用 bz Sonar 的分析工具的通用选项。

我想要实现的是将`findbugs.assertionmethods`参数传递给 FindBugs 以防止由于我们创建的静态断言助手类而发生某些误报。

非常感谢帮助和想法！

# php - ldap_bind() 不工作

> ID：15070216
> 
> 赞同：2
> 
> 时间：2013-02-25T15:17:14.863
> 
> 标签：php, active-directory, ldap

我正在尝试使用 PHP 在我们的 Active Directory 中使用 LDAP 验证身份验证。

我知道有效的用户名和密码、我们的域和 LDAP 服务器。

`$ldapconn = ldap_connect($ldapserver)`工作，它返回一个“ldap链接”资源。

但是当我打电话时`ldap_bind($ldapconn, $ldaprdn, $password)`它失败了。

我已经尝试了很多设置`$ldaprdn`，但找不到有效的设置。一些例子：

`$ldaprdn = $username;`

`$ldaprdn = $username.'@'.$domain;`

`$ldaprdn = $domain.'\\'.$username;`

`$ldaprdn = "uid=$username,cn=users,dc=$ldapserver,dc=$domain,dc=com"`

`$ldaprdn = "uid=$username,dc=$domain,dc=com"`

`$ldaprdn = "uid=$username,dc=com"`

`$ldaprdn = "uid=$username,dc=$domain"`

没有任何效果，`ldap_error($ldapconn)`总是返回“无效凭据”。

登录名和密码显然是正确的，我可以登录Windows。知道我可以用什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:23:35.517

调试这种事情真的很棘手。如果您有访问权限，请使用 LDAP 服务器上的日志，或尝试类似[http://jxplorer.org/](http://jxplorer.org/)的方法来获取有关您尝试连接的用户的实际 dn/context 的更好信息。您可能有一部分丢失或不完全正确。

此外，如果您的用户名/密码包含需要在命令行上转义的字符，请确保您没有在 PHP 脚本中转义它们。

# html - www.xyz.com 和 xyz.com 之间的区别以及如何重定向 .htaccess

> ID：15070217
> 
> 赞同：1
> 
> 时间：2013-02-25T15:17:19.547
> 
> 标签：html, google-search-console

我有一个网站，并且正在使用 Google 网站管理员工具。我在该工具中为该站点创建了两次设置：一次是 www.xyz.com，一次是 xyz.com。一旦我深入了解细节，两者的统计数据就会不同。

我想坚持使用 www.xyz.com。我怎样才能让每个人去 xyz.com 被重定向到 www.xyz.com？这会损害我在谷歌中的排名或索引吗？

问候，

对不起，如果问题很简单:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:19:45.723

使用 htaccess，我将以下内容用于强制 www

```
RewriteEngine on 
RewriteCond %{HTTP_HOST} !^www 
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

尽管如果是出于 SEO 目的，您可能最好执行以下操作

```
RewriteEngine on 
RewriteCond %{HTTP_HOST} !^www 
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [L,R=301] 

RewriteCond %{THE_REQUEST} ^.*/index.php 
RewriteRule ^(.*)index.php$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^.*/index.htm
RewriteRule ^(.*)index.htm$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^.*/index.html
RewriteRule ^(.*)index.html$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^.*/home.htm
RewriteRule ^(.*)home.htm$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^.*/home.html
RewriteRule ^(.*)home.html$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

因为这也会删除 url 的任何索引或主页部分。

在设置中的站长工具中，您还可以选择始终使用 www，这会将两个域的数据合并到一个 www 域下（尽管您将能够看到 GWMT 中列出的 www 和非 www）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:21:27.203

使用首选域，这里有更多说明：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=44231](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=44231)

> 指定首选域：
> 
> ```
> On the Webmaster Tools Home page, click the site you want.
> Under Site configuration, click Settings.
> In the Preferred domain section, select the option you want. 
> ```

您也可以使用 301 重定向： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=93633](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)

# c++ - 使用 Kinect 和 OpenGL 进行投影映射

> ID：15070219
> 
> 赞同：22
> 
> 时间：2013-02-25T15:17:25.997
> 
> 标签：c++, opengl, camera, mapping, kinect

我目前使用名为**procamcalib的****JavaCV**软件来校准以 Kinect RGB 相机为原点的 Kinect 投影仪设置。此设置仅包含一个 Kinect RGB 相机（我目前大致将 Kinect 用作​​普通相机）和一个投影仪。该校准软件使用**LibFreenect** (OpenKinect) 作为 Kinect 驱动程序。

 ****一旦软件完成它的过程，它会给我相机和投影仪的内在和外在参数，这些参数被扔给**OpenGL**软件以验证校准，并且是一些问题开始的地方。一旦正确设置了投影和模型视图，我应该能够将 Kinect 看到的内容与正在投影的内容相匹配，但为了实现这一点，我必须在所有 3 个轴上进行手动平移，而最后一部分不是对我有任何意义！请各位大神帮我整理一下好吗？用于检索 Kinect 数据的 SDK 是**OpenNI**（不是最新的 2.x 版本，应该是 1.5.x）

我将准确解释我正在做什么来重现此错误。校准参数使用如下：

投影矩阵设置为（基于 [http://sightations.wordpress.com/2010/08/03/simulating-calibrated-cameras-in-opengl/](http://sightations.wordpress.com/2010/08/03/simulating-calibrated-cameras-in-opengl/)）：

```
r = width/2.0f;         l = -width/2.0f;
t = height/2.0f;        b = -height/2.0f;

alpha = fx;      beta = fy;
xo    = cx;      yo   = cy;

X = kinectCalibration.c_near + kinectCalibration.c_far;
Y = kinectCalibration.c_near*kinectCalibration.c_far;

d = kinectCalibration.c_near - kinectCalibration.c_far;

float* glOrthoMatrix = (float*)malloc(16*sizeof(float));

glOrthoMatrix[0] = 2/(r-l); glOrthoMatrix[4] = 0.0f;        glOrthoMatrix[8] = 0.0f;        glOrthoMatrix[12] = (r+l)/(l-r);
glOrthoMatrix[1] = 0.0f;    glOrthoMatrix[5] = 2/(t-b);     glOrthoMatrix[9] = 0.0f;        glOrthoMatrix[13] = (t+b)/(b-t);
glOrthoMatrix[2] = 0.0f;    glOrthoMatrix[6] = 0.0f;        glOrthoMatrix[10] = 2/d;        glOrthoMatrix[14] = X/d;
glOrthoMatrix[3] = 0.0f;    glOrthoMatrix[7] = 0.0f;        glOrthoMatrix[11] = 0.0f;       glOrthoMatrix[15] = 1;
printM( glOrthoMatrix, 4, 4, true, "glOrthoMatrix" );

float* glCameraMatrix = (float*)malloc(16*sizeof(float));

glCameraMatrix[0] = alpha;  glCameraMatrix[4] = skew;   glCameraMatrix[8] = -xo;    glCameraMatrix[12] = 0.0f;
glCameraMatrix[1] = 0.0f;   glCameraMatrix[5] = beta;   glCameraMatrix[9] = -yo;    glCameraMatrix[13] = 0.0f;
glCameraMatrix[2] = 0.0f;   glCameraMatrix[6] = 0.0f;   glCameraMatrix[10] = X;     glCameraMatrix[14] = Y;
glCameraMatrix[3] = 0.0f;   glCameraMatrix[7] = 0.0f;   glCameraMatrix[11] = -1;    glCameraMatrix[15] = 0.0f;

float* glProjectionMatrix = algMult( glOrthoMatrix, glCameraMatrix ); 
```

模型视图矩阵设置为：

```
proj_loc = new Vec3f(   proj_RT[12], proj_RT[13], proj_RT[14] );    
proj_fwd = new Vec3f(   proj_RT[8],  proj_RT[9],  proj_RT[10] );
proj_up  = new Vec3f(   proj_RT[4],  proj_RT[5],  proj_RT[6]  );
proj_trg = new Vec3f(   proj_RT[12] + proj_RT[8], 
                        proj_RT[13] + proj_RT[9], 
                        proj_RT[14] + proj_RT[10] );

gluLookAt( proj_loc[0], proj_loc[1], proj_loc[2],
           proj_trg[0], proj_trg[1], proj_trg[2],
           proj_up[0],  proj_up[1],  proj_up[2] ); 
```

最后，相机显示并移动：

```
glPushMatrix();
glTranslatef(translateX, translateY, translateZ); 
drawRGBCamera();
glPopMatrix(); 
```

其中翻译值是用键盘手动调整的，直到我有一个视觉匹配（我在校准板上投射 Kinect-rgb 相机看到的东西，所以我手动调整 opengl-camera 直到投射的图案与打印的图案匹配）。

***我的问题是为什么我必须进行手动调整？模型视图和投影设置应该处理它。***

如果在切换这样的驱动程序时出现任何问题，我也会徘徊，因为 OpenKinect 用于校准，OpenNI 用于验证。这是在研究另一种流行的校准工具 RGBDemo 时想到的，它说如果使用 LibFreenect 后端，则需要进行 Kinect 校准。

***那么，如果使用驱动程序进行校准并使用另一个驱动程序显示，校准会出错吗？***

***有没有人认为使用 OpenCV 而不是 OpenGL 会更容易取得成功？***

JavaCV 参考：[https](https://code.google.com/p/javacv/)
://code.google.com/p/javacv/ Procamcalib《短篇论文》：[http:](http://www.ok.ctrl.titech.ac.jp/~saudet/research/procamcalib/)
//www.ok.ctrl.titech.ac.jp/~saudet/research/procamcalib/ Procamcalib 源代码：[https://code.google.com/p/javacv/source/browse?repo=procamcalib](https://code.google.com/p/javacv/source/browse?repo=procamcalib)
RGBDemo校准参考：[http ://labs.manctl.com/rgbdemo/index.php/Documentation/Calibration](http://labs.manctl.com/rgbdemo/index.php/Documentation/Calibration)

如果需要，我可以上传更多东西，让我知道你们需要什么来帮助我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T17:13:02.087

我是您链接到的文章的作者，我想我可以提供帮助。

问题在于您如何设置模型视图矩阵。当您调用 gluLookAt() 时，您使用 proj_RT 的第三列作为相机的位置，但它不是相机的位置，它是*相机坐标中世界原点*的位置。我为我的新博客写了一篇文章，可能有助于澄清这一点。它描述了解释外在矩阵的三种不同（等效）方法，每种方法都有 WebGL 演示：

[http://ksimek.github.io/2012/08/22/extrinsic/](http://ksimek.github.io/2012/08/22/extrinsic/)

如果您必须使用 gluLookAt，本文将向您展示如何使用，但调用起来要简单得多`glLoadMatrix(proj_RT)`。

tl;博士：替换`gluLookAt()`为`glLoadMatrix(proj_RT)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:39:18.930

对于 Kinect 校准，请查看最新 0.7 版本的 RGBDemo [http://labs.manctl.com/rgbdemo](http://labs.manctl.com/rgbdemo)和相应的[Freenect 校准源](https://github.com/nburrus/rgbdemo/blob/master/calibration/calibrate_freenect.cpp)。

从 v0.7.0 变更日志：

> 自 v0.6.1 以来的新功能：
> 
> *   使用标记获取对象模型的新演示
> *   rgbd-multikinect 的简单校准模式
> *   在 rgbd-multikinect 中抓取速度更快
> *   保存到磁盘时添加时间戳和相机序列
> *   与 PCL 1.4 的兼容性 各种错误修复

一本非常好的书是 Jason McKesson 的[Learning Modern 3D Graphics Programming](http://www.arcsynthesis.org/gltut)你也可以阅读[Kinect 的 ROS 页面](http://www.ros.org/wiki/kinect_camera)和 Nicolas 的[Kinect 校准页面](http://nicolas.burrus.name/index.php/Research/KinectCalibration)****

# maven-2 - Maven：在 nar-plugin 中，你能指定从哪里获取包含的内容吗？

> ID：15070221
> 
> 赞同：1
> 
> 时间：2013-02-25T15:17:27.427
> 
> 标签：maven-2, maven-nar-plugin

我有一个包含多个子模块和子子模块的项目，其中包含 java 和本地语言代码（主要是本地语言）。为了处理这个本机代码，我使用`maven-nar-plugin`. 现在，我没有在本地存储库中编译本机代码所需的所有包含。有没有给目录提供目录`maven-nar-plugin`并包含其中的所有内容？

我已经在模块的pom中使用了`<systemIncludePaths>`and `<includePaths>`，但它仍然无法编译。

如果有比我要走的方向更简单的方法，请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T09:54:07.327

以下仍在进行中，但我认为我在正确的轨道上。我从以下（标准）目录结构开始，我想在其中包含一个 git c++ 项目：

```
+---src
    +---main
        +---c++
        +---java 
```

因为我不想改变原来make项目的目录结构，所以需要定义自定义的源目录和自定义的include目录。这是拉取后生成的目录结构（我省略了不相关的文件结构）：

```
+---src
    +---main
        +---c++
            +---data
                +--- ...
            +---examples
                +--- ...
            +---scripts
                +--- ...
            +---src
                +---hunalign
                    +--- ... (source files)
                +---include
                    +--- ... (header files)
                +---utils
                    +--- ... (helper classes)
            +---tools
                +--- ... 
```

通过以下配置，我编译了项目。

```
 <build>
    <plugins>
        <plugin>
            <artifactId>maven-nar-plugin</artifactId>
            <version>2.1-SNAPSHOT</version>
            <extensions>true</extensions>
            <configuration>
                <libraries>
                    <library>
                        <type>executable</type>
                        <run>true</run>
                    </library>
                </libraries>
                <!-- Here is the config for the custom source dir and includes -->
                <cpp>
                    <sourceDirectory>
                        ${basedir}/src/main/c++/src/hunalign
                    </sourceDirectory>
                    <includes>
                        <include>${basedir}/src/main/c++/src/include/*.h</include>
                    </includes>
                </cpp>
                <libraries>
                    <library>
                        <type>executable</type>
                        <run>true</run>
                    </library>
                </libraries>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

编辑：为了使 javah 正常运行，我必须对其进行符号链接，因为 maven 一直在错误的位置寻找它：

```
sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/javah /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/jre/bin/javah 
```

# asp.net - 消失 ASP.Net 中的标记

> ID：15070227
> 
> 赞同：-4
> 
> 时间：2013-02-25T15:17:52.347
> 
> 标签：asp.net, html, rendering

我有一个 ASP.Net 页面，其中我将页面上的几个元素封装在我的母版页上的一个标记中，以便我可以将样式作为一个单元应用于 div 中的所有内容。这在几个地方都可以正常工作，但有时 div 不会在客户端 HTML 中呈现，所以我的样式永远不会出现。

由于公司政策，我无法包含实际的源代码。但是，代码看起来像这样：

```
<div id="SideBarArea" class="SideBarStyle" runat="server">
  <div id="Top">
    <asp:ContentPlaceHolder="TopPlaceHolder" runat="server"/>
  </div>
  <div id="Bottom">
    <asp:ContentPlaceHolder="BottomPlaceHolder" runat="server"/>
  </div>
</div> 
```

Top 和 Bottom div 出现在呈现的 HTML 中，但 SideBarArea 没有——或者至少不总是这样。

实际上，我有几个在应用程序生命周期内创建的类似母版页。这些页面是相似的，并且都有 Top 和 Bottom div，但它们被赋予了不同的名称。这些 div 位于屏幕的左侧，逻辑上形成一个侧边栏区域；然而，从历史上看，它们并没有被绑定在一起，除了通过它们在屏幕上的位置以图形方式进行绑定。

我有一个新要求，即根据应用程序逻辑启用或禁用侧边栏区域。为此，已进入所有母版页并将顶部和底部 div 包装在名为 SideBarArea 的新 div 中，以启用或禁用包装器 div。对于大多数母版页，这种方法效果很好，但是在其中一个上，SideBarArea div 没有在最终标记中呈现，并且在后面的代码中对应的 HtmlGenericControl 为 null。

在我写这篇文章的时候，我的伙伴在 div 中添加了一个显示样式，如下所示：

```
<div id="SideBarArea" class="SideBarStyle" runat="server" style="display:block">
  <div id="Top">
    <asp:ContentPlaceHolder="TopPlaceHolder" runat="server"/>
  </div>
  <div id="Bottom">
    <asp:ContentPlaceHolder="BottomPlaceHolder" runat="server"/>
  </div>
</div> 
```

这迫使 div 在 HTML 中呈现并且是非空的，所以这个问题在这一点上没有实际意义；但是，我仍然想了解为什么此更改有效，以及它是否是解决问题的“正确”方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:00:55.977

缺少字符通常会破坏 HTML，因此`runat="server`显然会变得很糟糕。

确保正确编写标记，并注意 IDE 提供的任何错误或警告。将您的代码视为一种编译语言，一种根本无法编译的语言，更不用说可以执行了，直到一切在语法上都是正确的。事实上，如果您使用的是 Visual Studio，那么您可以对其进行配置——我会随时提出建议——将警告视为错误，从而在这些情况下导致构建失败，从而迫使您查看问题所在.

同时，完成您的报价：

```
runat="server" 
```

和：

```
id="Top" 
```

和：

```
id="Bottom" 
```

# android - 来自 Cursor 的数据使用 SimpleCursorAdapter 添加到 ListView 显示白色文本（如何使其变为黑色）

> ID：15070237
> 
> 赞同：0
> 
> 时间：2013-02-25T15:18:31.933
> 
> 标签：android, simplecursoradapter

来自 Cursor 的数据使用 SimpleCursorAdapter 添加到 ListView 显示白色文本（如何使其变为黑色） - 参见图像

![在此处输入图像描述](../Images/934ad2065a3c3b135caf06b544c63f3c.png) 这是简单的光标适配器代码

```
public void displayWords(Cursor c){

    // Creates a new SimpleCursorAdapter
    SimpleCursorAdapter mCursorAdapter = new SimpleCursorAdapter(
        getApplicationContext(),                    // The application's Context object
        android.R.layout.simple_list_item_1,        // A layout in XML for one row in the ListView
        c,                                          // The result from the query
        new String[] {DatabaseTable.COL_WORD},      // A string array of column names in the cursor
        new int[] { android.R.id.text1 });          // An integer array of view IDs in the row layout

    // Sets the adapter for the ListView
    setListAdapter(mCursorAdapter);

    /* Using SimpleCursorAdapter to get Data from DB.
     * stackoverflow.com/questions/12077955/android-using-simplecursoradapter-to-get-data-from-database-to-listview
     */
} 
```

以及 AndroidManifes 文件中使用的样式资源

```
 <style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <!-- API 14 theme customizations can go here. -->
</style>

<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
    <!-- API 11 theme customizations can go here. -->
</style>

   <style name="AppBaseTheme" parent="android:Theme.Light">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:43:39.350

就像 Egor 说的那样，如果您可以显示更多代码，那将很有帮助。

同时：看起来您正在使用具有“浅色”（全息）主题的列表视图项目，而您的应用程序（或只是该活动（）使用“深色”（全息）主题。文本视图的文本颜色是从应用程序在白色背景上的深色主题（白色字体颜色）中提取的。

要弄清楚为什么会发生这种情况，我们需要您提供更多代码（例如 AndroidManifest.xml）。

OP评论后更新：

```
public void displayWords(Cursor c){

    // Creates a new SimpleCursorAdapter
    SimpleCursorAdapter mCursorAdapter = new SimpleCursorAdapter(
        getApplicationContext(),                    // The application's Context object
        android.R.layout.simple_list_item_1,        // A layout in XML for one row in the ListView
        c,                                          // The result from the query
        new String[] {DatabaseTable.COL_WORD},      // A string array of column names in the cursor
        new int[] { android.R.id.text1 }){
        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            View newView = super.newView(context, cursor, parent);
            ((TextView)newView.findViewById(android.R.id.text1)).setTextColor(Color.BLACK);
return newView;
        }
    };          // An integer array of view IDs in the row layout

    // Sets the adapter for the ListView
    setListAdapter(mCursorAdapter);

    /* Using SimpleCursorAdapter to get Data from DB.
     * stackoverflow.com/questions/12077955/android-using-simplecursoradapter-to-get-data-from-database-to-listview
     */
  } 
```

我在您的代码中添加了对适配器的***newView***方法的覆盖，这将允许您设置/更改文本的颜色。试试看它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T14:26:34.537

使用的主题`this`与从返回的上下文使用的主题不同`getApplicationContext()`。简单的答案总是`this`用来维护你的主题。

OP 使用的是 Light 主题，它会`this`返回。 `getApplicationContext()`不包含膨胀的主题。当它膨胀时，它包括系统默认主题。

更详细的信息可以在[这里找到](http://www.doubleencore.com/2013/06/context/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:20:40.863

最近遇到了同样的问题。使用了两个 ListActivity。单击第一个项目上的项目启动第二个 ListActivity。第一个正确显示了主题，但第二个与 OP 中的屏幕截图显示相同。

唯一不同的是我在创建数组适配器时使用的上下文参数。第一个活动使用了 this 引用，第二个活动我使用了 getApplicationContext（如 OP）。将其更改为 this 引用修复了输出。

有更多知识的人可以扩展为什么getApplicationContext“主题”似乎与通过this（ListActivity）访问的主题不同。我原以为主题是在清单中的应用程序标签中设置的，除非另有设置，否则这将是所有活动使用的主题。我承认我对 getContext... 方法的了解是有限的，我可能完全错误地解释了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:40:38.163

试试这个 ：

`TextView tv = (TextView)findViewById(android.R.id.text1);`

`tv.setTextColor(Color.BLACK);`

# java - 当我创建基于 json 数组的 json 对象时内存不足

> ID：15070240
> 
> 赞同：3
> 
> 时间：2013-02-25T15:18:39.937
> 
> 标签：java, json, web-services, tomcat, out-of-memory

我在 java 中创建了一个 web 服务来返回 json 数据。好的，小数据没问题，但是当我处理大数据时，它会返回内存不足错误。

查看我的代码：

```
public void getImages() throws Exception {
      JSONObject o = new JSONObject();
      JSONArray jsonArray = new JSONArray();

      try {
                Class.forName(DRIVERNAME);
                conn = DriverManager.getConnection(URL, USER, PASS);

                Statement s = connection.createStatement();
                ResultSet r = s.executeQuery("select * from images");

                while (r.next()) {
                          JSONObject obj = new JSONObject();

                          obj.put("id", r.getInt("id"));

                          byte[] iBytes = r.getBytes("image");
                          String iBase64 = DatatypeConverter.printBase64Binary(iBytes);
                          obj.put("image", iBase64);

                          jsonArray.put(obj);
                }

                o.put("images", jsonArray);

      } catch (SQLException e) {

      }
} 
```

在 jsonArray 中添加图像时发生内存不足（java.lang.OutOfMemoryError：Java 堆空间）：

```
byte[] iBytes = r.getBytes("image");
String iBase64 = DatatypeConverter.printBase64Binary(iBytes);
obj.put("image", iBase64); 
```

知道如何解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-18T03:11:14.743

使用 Jackson Library 中的流 json（ObjectMapper、JsonFactory、JsonGenerator）解决您的问题。请看下面的代码：

```
public void getImages() throws Exception {

    ObjectMapper objectMapper = new ObjectMapper();
    JsonFactory jf = objectMapper.getFactory();
    JsonGenerator jg = f.createGenerator(new File("c:\\images.json"), JsonEncoding.UTF8);

    try {
        Class.forName(DRIVERNAME);
        conn = DriverManager.getConnection(URL, USER, PASS);

        Statement s = connection.createStatement();
        ResultSet r = s.executeQuery("select * from images");

        jg.writeFieldName("images");
        jg.writeStartArray();

        while (r.next()) {
           jg.writeBinary(r.getBinaryStream("IMAGEM"), -1);
           in.close();
        }

        jg.writeEndArray(); 
        jg.writeEndObject(); 
        jg.close();

    } catch (SQLException e) {
        //use the exceptions
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:25:03.923

为什么不简单地将 url 返回到图像并让浏览器拉取该资源？我不太明白通过您的 json 响应传递它的优势，因为您要求 java 在发送之前将图像集保存在内存中。

# java - Java中“返回methodA（）|| methodB（）”的目的是什么

> ID：15070241
> 
> 赞同：4
> 
> 时间：2013-02-25T15:18:47.973
> 
> 标签：java, return, conditional

我在我正在查看的程序中找到了这个代码片段，有人可以解释这里发生了什么吗？

```
return methodA() || methodB(); 
```

methodA 和 methodB 最终返回布尔值。这是某种异常保护还是这条语句总是返回methodA()？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T15:19:49.173

它调用`methodA`并检查结果。如果为真，则立即返回真。否则，它会调用`methodB`并返回它。

无论如何，这被称为短路运算符。我建议更多地了解 Java 的运算符，因为您可能会经常看到类似的东西。

如果不需要短路行为，他们可以使用

```
return methodA() | methodB(); 
```

它将调用这两种方法，对结果执行按位或（相当于逻辑或布尔值）并返回结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:20:02.173

这意味着如果`methodA`返回`true`则将其用作返回值，否则使用 的返回值`methodB`。一种级联评估的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:28:39.383

它是以下的缩写形式：

```
boolean a = methodA();
boolean b = methodB();

if(a) {
    return true;
}
else if(b) {
    return true;
}
else {
    return false;
} 
```

如果`methodA()`返回 true，则不会调用 methodB()，而是返回 true。如果`MethodA()`返回 false，`methodB()`则将被调用，其值将被返回。

# php - 抓取屏幕分辨率并根据大小显示结果

> ID：15070248
> 
> 赞同：0
> 
> 时间：2013-02-25T15:19:07.483
> 
> 标签：php, javascript, jquery, if-statement

我正在尝试根据屏幕分辨率大小显示来自数据库的结果。上周我发布了一个关于如何获取宽度的问题，并且能够在此处的一些想法的帮助下提出这个 jquery，但无法完成第二个方面，即根据大小显示结果：

```
<script type="text/javascript">
$(document).ready(function() {
    var $window = $(window);
    function checkWidth() {
        var windowsize = $window.width();
        if (windowsize = 1600) {
            //**This is where I need to define the $maxresults value, but how?**
        }
    }
    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(checkWidth);
});
</script> 
```

现在，这是第二部分：

```
<?php
    // get the function
    include_once ('function.php');
    $maxresults = 21;
    if ($_GET['page']) {
        $page = $_GET['page'];
    } 
    else {
        $page = 0; 
    }
    $currentpage = $page;
    $page = $page*$maxresults;
    $numpages = QuickQuery("SELECT COUNT(id) FROM books WHERE visible=1");
    $numpages = mysql_result($numpages, 0);
    $numpages = $numpages/$maxresults-1;
    //Show <maxresults> pages at a time
    $result = GetBooksByRangeID($page, $maxresults);
    DisplayResults($result); 
?> 
```

要显示的最大结果数量设置为 21，但我想使用上面的 jquery 来根据用户的屏幕分辨率定义数量；我会有各种尺寸。换句话说，我需要 if 语句说“根据找到的大小显示这么多结果”。那么我该如何写这个 if 语句呢？

* **LAST REVISION= Partially WORKING，（将所有结果设置为最大 6，尽管分辨率大小）***

```
<?php
// get the function
include_once ('function.php');
if(($_GET['w']) && ($_GET['h'])) {
    $w = $_GET['w'];
    $h = $_GET['h'];
}
if ($w == 1920) {
    $maxresults = 24;  
}
else if ($w == 1600) {
    $maxresults = 24;  
}
else if ($w == 1440){ 
    $maxresults = 12;
}
else if ($w == 1366) { 
    $maxresults = 10;
}
else if ($w == 1024) {
    $maxresults = 8;
}
else  $maxresults = 6; 
```

......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:36:36.190

使用Ajax，这是需要做的

```
<html><body>
<div id="content"></div>
....
<script>
    $(function(){
      $.ajax({
         url: 'file.php',
         type: 'GET',
         data: {h: screen.height, w: screen.width}
      }).done(function ( data ) {
         document.getElementById("content").innerHTML=data;
        });
    });
</script> 
```

然后，该 file.php 将运行您的数据库查询并根据通过 ajax 发送的 h 和 w 参数返回一组格式良好的结果（即 html 表），这些参数告诉您屏幕的高度和宽度。为此，只需根据`$_GET['w']`和变量的大小设置 $page`$_GET['h']`变量。见下文：

```
<?php
// get the function
include_once ('function.php');
$maxresults = 21;

$page = ( $_GET['page'] ? $_GET['page'] : 0 );

if(($_GET['w']) && ($_GET['h'])) {
  $w = $_GET['w'];
  $h = $_GET['h'];
  //$maxresults = // calculate this depending on w and h
  // i.e. if h > 1600 $maxresults = 20, else = 10
  $currentpage = $page;
  $page = $page * $maxresults;
  $numpages = QuickQuery("SELECT COUNT(id) FROM books WHERE visible=1");
  $numpages = mysql_result($numpages, 0);
  $numpages = $numpages/$maxresults-1;
  $result = GetBooksByRangeID($page, $maxresults);//Show <maxresults> pages at a time  
  //DisplayResults($result); 
  echo $results; // in a nice format (i.e. table) to be inserted into div via ajax
?> 
```

您可以按如下方式计算 $maxresults：

```
if($w > 640) && ($h > 480) $maxresults = 5;
if($w > 800) && ($h > 600) $maxresults = 7;
if($w > 1024) && ($h > 768) $maxresults = 12;
....
if($w > 2560) && ($h > 1600) $maxresults = 21; 
```

或者您可以按宽度对这些语句进行分组（因为我认为这不如高度重要，这意味着用户向下滚动的次数更少）：

```
if ($w <= 1024) {
  if ($h >= 768) $maxresults = 12;  // 1024x(768 or higher)
  else if ($h >= 600) $maxresults = 8; // 1024x(600~768)
  else  $maxresults = 6; // 1024x(599 or below)
}
else if ($w <= 1280) {
  if ($h >= 1024) $maxresults = 14;  // 1280x(1024 or higher)
  else if ($h >= 960) $maxresults = 12; // 1280x(960~1024)
  else if ($h >= 800) $maxresults = 10; // 1280x(800~960)
  else if ($h >= 768) $maxresults = 8; // 1280x(768~800)
  else  $maxresults = 6; // 1280x(768 or below)
}
//and so on 
```

## 见：[http ://en.wikipedia.org/wiki/Display_resolution#Computer_monitors](http://en.wikipedia.org/wiki/Display_resolution#Computer_monitors)

修订

您用于填充 maxresults 的代码编写得非常糟糕，这就是它不起作用的原因。试试这个：

```
<?php
include_once ('function.php');
$maxresults = -1;
if(($_GET['w']) && ($_GET['h'])) {
  $w = $_GET['w'];
  $h = $_GET['h'];

  if ($w == 1920) {
    $maxresults = 24;  
  } else if ($w == 1600) {
    $maxresults = 24;  
  } else if ($w == 1440){ 
    $maxresults = 12;
  } else if ($w == 1366) { 
    $maxresults = 10;
  } else if ($w == 1024) {
    $maxresults = 8;
  } else 
    $maxresults = 6;
}
echo $maxresults; 
```

如果 w 和 h 没有被发送，这将输出 -1，或者它将返回 24 或 12，依此类推，具体取决于您的屏幕宽度。学习对您的代码进行一些基本的调试。我很难在没有所有代码的情况下调试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:37:10.800

只需通过 de 传递答案来加载 ajax`$_GET['windowsize']`并使用通过“data”变量返回的结果（这可以是插入到 DOM 中的 HTML，也可以是 json 字符串或您想要的任何内容。

```
<script type="text/javascript">
$(document).ready(function() {
    var $window = $(window);
    function checkWidth() {
        var windowsize = $window.width();
        if (windowsize = 1600) {
            $.ajax('/path/to/page?windowsize='+encodeURIComponent(windowsize)).done(function(data){
                        // the stuff to do when the php is loaded, for example, document.getElementById('x').innerHTML=data;
                        });
        }
    }
    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(checkWidth);
});

</script> 
```

在 php 脚本中，您可以发布：

```
<?php
$windowsize = (int)$_GET['windowsize'];
if($windowsize >= 1200 && $windowsize < 1400)
    {
    echo "maxsize:200;minsize:300;";
    }
if($windowsize >= 1400 && $windowsize < 1600)
    {
    echo "maxsize:300;minsize:400;";
    } 
```

然后在javascript中你可以使用：

```
..........done(function(data) {
    $results = data.split(';');
    for(c=0;c<$results.length;c++)
        {
        $tmp = $results[c].split(':');
        if($tmp[0] == 'minsize')
            {
            minsize=parseInt($tmp[1]);
            }
        if($tmp[0] == 'maxsize')
            {
            maxsize=parseInt($tmp[1]);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:24:46.183

一种快速的解决方案是将每个 Ajax 的屏幕分辨率提交给 php 脚本。然后使用分辨率来确定数量并以 json 格式返回电影。

像这样的东西：

**编辑

javascript:

```
$(document).ready(function() {'use strict';

   var screenResolution, request;

   //set screen resolution here
   screenResolution = 1024;

   request = $.ajax({
     url : "url_to_php_script",
     type : "POST",
     dataType : "json",
     contentType : 'application/x-www-form-urlencoded; charset=UTF-8',
     data : {
        "screenResolution" : screenResolution               
     }
  });
   request.fail(function() {
      alert("fail");
   });

   request.done(function(movies) {
      console.log(movies);
   });
}); 
```

php:

```
$screenResolution = $_POST['screenResolution'];

//DO your normal Stuff

$jsonResult= json_encode($result);

return $jsonResult; 
```

# nhibernate - 使用 Nhibernate 为一般存储库设置 Ninject

> ID：15070253
> 
> 赞同：2
> 
> 时间：2013-02-25T15:19:18.953
> 
> 标签：nhibernate, asp.net-web-api, ninject

我正在使用 Nhibernate 和通用存储库开发一个 .NET Web API 应用程序。现在我正在尝试使用 Ninject 正确设置依赖注入。但是，我的当前配置存在一些问题：有时我的 NHibernate ISession（在下面的 UnitOfWork.cs 中）对象为空或在发出向下到 DAL 并尝试从数据库获取数据的请求时已经关闭。

我无法弄清楚为什么会发生这种情况或我的代码有什么问题。我认为我的 Ninject 范围/绑定在某种程度上不正确，但无法使其正常工作。

这是我当前的实现（我已经剥离了不相关的代码以减少显示的代码量）：

**NinjectWebCommon.cs**

```
private static void RegisterServices(IKernel kernel)
{
   UnitOfWorkFactory uow = new UnitOfWorkFactory(
      ConfigurationManager.ConnectionStrings["foo"].ConnectionString,
      Assembly.GetExecutingAssembly());

   kernel.Bind<IUnitOfWorkFactory>().ToConstant(uow).InSingletonScope();
   kernel.Bind<IUnitOfWork>().ToMethod(f => f.Kernel.Get<IUnitOfWorkFactory().BeginUnitOfWork()).InRequestScope();

   // Services
   kernel.Bind<ICustomerService>().To<CustomerService>().InRequestScope();

   // Repositories
   kernel.Bind(typeof(IRepository<,>)).To(typeof(Repository<,>)).InRequestScope();

   // Used for Basic Auth (uses customer Service)
   kernel.Bind<IPrincipalProvider>().To<MyPrincipalProvider>().InRequestScope();
} 
```

**IUnitOfWorkFactory.cs**

```
public interface IUnitOfWorkFactory : IDisposable
{
    IUnitOfWork BeginUnitOfWork();
    void EndUnitOfWork(IUnitOfWork unitOfWork);
} 
```

**UnitOfWorkFactory.cs**

```
public class UnitOfWorkFactory : IUnitOfWorkFactory
{
    public UnitOfWorkFactory(string connectionString, Assembly assembly)
    {
        var rawCfg = new Configuration();
        rawCfg.SetNamingStrategy(new MsSql2005NamingStrategy());
        var cfg = Fluently
            .Configure(rawCfg)                .Database(FluentNHibernate.Cfg.Db.MsSqlConfiguration.MsSql2005.ConnectionString(connectionString))
            .Mappings(m => m.FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly()));

        Configuration = cfg.BuildConfiguration();
        SessionFactory = Configuration.BuildSessionFactory();
    }

    protected ISessionFactory SessionFactory { get; private set; }

    protected Configuration Configuration { get; private set; }

    public IUnitOfWork BeginUnitOfWork()
    {
        return new UnitOfWork(this.SessionFactory.OpenSession());
    }

    public void EndUnitOfWork(IUnitOfWork unitOfWork)
    {
        var nhUnitOfWork = unitOfWork as UnitOfWork;
        if (unitOfWork != null)
        {
            unitOfWork.Dispose();
            unitOfWork = null;
        }
    }

    public void Dispose()
    {
        if (this.SessionFactory != null)
        {
            (this.SessionFactory as IDisposable).Dispose();
            this.SessionFactory = null;
            this.Configuration = null;
        }
    }
} 
```

**IUnitOfWork.cs**

```
public interface IUnitOfWork : IDisposable
{
    TEntity GetSingle<TEntity>(Expression<Func<TEntity, bool>> expression) where   TEntity : class;
} 
```

**UnitOfWork.cs**

```
public class UnitOfWork : IUnitOfWork
{
   public UnitOfWork(NHiberante.ISession session)
   {
      if (session == null)
      {
         throw new ArgumentNullException("session");
      }
      this.Session = session;
   }

   public NHiberante.ISession Session { get; private set; }

   private IQueryable<TEntity> Set<TEntity>() where  TEntity : class
   {
      return Session.Query<TEntity>();
   }

   public TEntity GetSingle<TEntity>(Expression<Func<TEntity, bool>> expression)  where TEntity : class
   {
      return Set<TEntity>().SingleOrDefault(expression);
   }

   public void Dispose()
   {
      if ( this.Session != null )
      {
         (this.Session as IDisposable).Dispose();
         this.Session = null;
      }
   }
} 
```

**IRepository.cs**

```
public interface IRepository<TEntity, TPrimaryKey> where TEntity : class
{
    TEntity GetSingle(Expression<Func<TEntity, bool>> expression);
} 
```

**存储库.cs**

```
public class Repository<TEntity, TPrimaryKey> : IRepository<TEntity, TPrimaryKey> where TEntity : class
{
   public Repository(IUnitOfWork unitOfWork)
   {
      if (unitOfWork == null)
      {
         throw new ArgumentNullException("unitOfWork");
      }
      this.UnitOfWork = unitOfWork;
   }

   protected IUnitOfWork UnitOfWork { get; private set; }

   public virtual TEntity GetSingle(Expression<Func<TEntity, bool>> expression)
   {
      return UnitOfWork.GetSingle(expression);
   }
} 
```

**客户服务.cs**

```
public interface ICustomerService
{
    Customer GetCustomer(string id);
} 
```

**客户服务**

```
public class CustomerService : ICustomerService
{
    private readonly IRepository<Customer, string> _customerRepo;

    public CustomerService(IRepository<Customer, string> customerRepo)
    {
        _customerRepo = customerRepo;
    }

    public Customer GetCustomer(string id)
    {
        return _customerRepo.GetSingle(l => l.ID == id);
    }
} 
```

**客户控制器.cs**

```
public class CustomerController : ApiController
{
    private ICustomerService _customerService;

    public CustomerController(ICustomerService customerService)
    {
        _customerService = customerService;
    }

    public string Get(string id)
    {
        var customer = _customerService.GetCustomer(id);
        return customer.Name;
    }
} 
```

总结一下：我提出了一个简单的 GetCustomer 请求。CustomerController 被注入了一个 CustomerService 实例。然后将 CustomerService 注入一个 Repository 实例，并将存储库本身注入一个 UnitOfWork 实现（由 UnitOfWorkFactory 类中的 BeginUnitOfWork() 方法创建）。另外值得一提的是，请求首先被身份验证委托处理程序拦截（用于基本身份验证）。此处理程序还使用 CustomerService。

当向 API 发出请求时（通过 REST 客户端或 cURL 或其他），这最初是有效的，但时不时地（或在稍后的某些后续请求中），当我尝试访问 ISession 时，我在数据层中遇到错误对象（为NULL），我必须重新启动服务器才能让它再次工作。

我错过了什么明显的东西吗？谁能解释如何解决这个问题？谢谢！

**更新**

我一直在进一步调试，发现我的 UnitOfWork 在每次请求时都被正确实例化，从而获得了一个新的 ISession。但在某些情况下，UoW Dispose() 方法会被触发两次（由于根据堆栈跟踪进行了一些 NHibernate 缓存/修剪）。这就是内部会话对象为空的原因。一旦触发了这个异常，在所有后续请求中，Ninject 显然会找到一个已经存在的 UnitOfWork 实例，以及这个空会话。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:43:43.307

该`ISession`对象不是由 ninject 管理，而是由您的示例中的 NH 管理。因此，您`IUnitOfWork`可以比 NH 管理的会话更长寿。使用 Ninject 管理所有内容或使用适当的会话上下文。问题的根本原因在于`BeginUnitOfWork`您更新工作单元和使用的位置`SessionFactory.OpenSession()`。

# c# - 如何替换 System.Xml.XmlDocument 中的节点？

> ID：15070257
> 
> 赞同：1
> 
> 时间：2013-02-25T15:19:28.790
> 
> 标签：c#, asp.net, xmldocument

考虑以下 xml：

```
<div>
   <a href="http://www.google.com/">This is:</a>
   <p>A test... <b>1</b><i>2</i><u>3</u></p>
   <p>This too</p>
   Finished.
</div> 
```

此 xml 的内容位于`System.Xml.XmlDocument`实例中。我需要替换所有`p`元素并在每个段落元素之后添加一个中断。我编写了以下代码：

```
var pElement = xmlDocument.SelectSingleNode("//p");
while (pElement != null)
{
    var textNode = xmlDocument.CreateTextNode("");
    foreach (XmlNode child in pElement.ChildNodes)
    {
        textNode.AppendChild(child);
    }    
    textNode.AppendChild(xmlDocument.CreateElement("br"));
    pElement.ParentNode.ReplaceChild(pElement, textNode);
    pElement = xmlDocument.SelectSingleNode("//p");
} 
```

我正在创建一个空节点并将每个段落节点的子节点添加到它。不幸的是，这不起作用：文本节点不能包含元素。

任何想法如何实施此替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:30:04.140

看起来我找到了使用该`InsertAfter`方法的解决方案：

```
var pElement = xmlDocument.SelectSingleNode("//p");

while (pElement != null)
{    
    //store position where new elements need to be added
    var position = pElement;

    while(pElement.FirstChild != null)
    {
        var child = pElement.FirstChild;
        position.ParentNode.InsertAfter(child, position);

        //store the added child as position for next child
        position = child;
    }

    //add break
    position.ParentNode.InsertAfter(xmlDocument.CreateElement("br"), position);

    //remove empty p
    pElement.ParentNode.RemoveChild(pElement);

    //select next p
    pElement = xmlDocument.SelectSingleNode("//p");
} 
```

思路如下：

1.  查看所有`p`节点。
2.  循环遍历所有子节点`p`。
3.  将它们添加到正确的位置。
4.  在每个`p`节点之后添加一个中断。
5.  移除`p`元素。

这个位置很难找到。第一个子节点需要`p`使用`InsertAfter`with`p`作为位置元素添加到父节点。但是下一个孩子需要在之前添加的孩子之后添加。解决方法：保存它的位置并使用它。

注意：在集合上使用`for each`迭代器是`pElement.ChildNodes`行不通的，因为在移动一半节点后，迭代器决定它完成了。看起来它使用某种计数而不是对象集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:35:40.440

如果我了解您要实现的目标，您可以尝试以下操作：

```
foreach (XmlNode node in doc.SelectNodes("//p"))
{
    node.ParentNode.InsertAfter(doc.CreateElement("br"), node);
} 
```

如果我没有理解正确，也许您可​​以发布您想要实现的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:29:28.067

修改内存中的对象是有问题的 - 请参阅[此处](https://stackoverflow.com/questions/14967293/remove-parent-node-without-childs-nodes)`XmlDocument`的类似问题。

最简单的方法是使用 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="p">
    <xsl:copy-of select="node()"/>
    <br/>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

然后你可以将它应用到你`XmlDocument`使用`XslCompiledTransform`生成字符串或输出 XML 流的类中。

# gwt - GWT 更改 HTML 内容

> ID：15070273
> 
> 赞同：0
> 
> 时间：2013-02-25T15:20:14.070
> 
> 标签：gwt, restlet

我有一个`GWT`项目正在使用`Restlet`而不是`GWT-RPC.` 似乎为了获得一些`performance`，以前的开发人员已经创建了一种机制，该机制包括在 HTML 模板中包含一些 java 脚本变量，就像这样

```
<script type="text/javascript">
 var details = $$$DETAILS$$$;
 var categories = $$$CATEGORIES$$$;
</script> 
```

where`$$$DETAILS$$$`和`$$$CATEGORIES$$$`将根据页面的请求被一些`JSON`扩展的类替换`org.restlet.Application.`

现在，计划针对`refactor`此应用程序，第一步是删除`Restlet`并返回`GWT-RPC`.

我认为这种带有`javascript`变量的方法非常难看，我们可以用. 由于我是新手，我必须承认我有点迷茫，我还没有找到答案。`asynchronous calls.``HTML``GWT``Restlet``GWT`

你有什么方法可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:13:58.110

在 GWT 中读取对象属性的方法有很多，但我看到的更简单的方法是使用[gwtquery](http://code.google.com/p/gwtquery/)。在你的情况下：

```
import static com.google.gwt.query.client.GQuery.*;
[...]

// Read an attribute from the window element
String details = $(window).prop("details");

// Set the html content of the element/s matching the css selector
$("cssSelector").html(details); 
```

# ios - 用相机测量物体的大小

> ID：15070274
> 
> 赞同：1
> 
> 时间：2013-02-25T15:20:18.520
> 
> 标签：ios, objective-c, image-processing

我需要做一个从照片中测量物体的方法......我的意思是我可以将物体与卡片中的尺寸进行比较以从物体中获取尺寸，但我不知道如何比较这个......任何想法？

这是我拍照的方式

```
- (IBAction)takePicture:(id)sender {
// Create image picker controller
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

// Set source to the camera
imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

// Delegate is self
imagePicker.delegate = self;

// Allow editing of image ?
imagePicker.allowsImageEditing = NO;

// Show image picker
[self presentModalViewController:imagePicker animated:YES];

  }

       - (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
     {
UIAlertView *alert;

// Unable to save the image
if (error)
    alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                       message:@"Unable to save image to Photo Album."
                                      delegate:self cancelButtonTitle:@"Ok"
                             otherButtonTitles:nil];
else // All is well
    alert = [[UIAlertView alloc] initWithTitle:@"Success"
                                       message:@"Image saved to Photo Album."
                                      delegate:self cancelButtonTitle:@"Ok"
                             otherButtonTitles:nil];
[alert show];
[alert release];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:30:16.697

这是一个带有一些 ios 移植[图像处理算法](http://code.google.com/p/simple-iphone-image-processing/)的站点。如果您可以检测到图像的外边缘和一些参考对象（并且知道它们处于相同的深度），您应该能够近似大小。

编辑 - 原来那个链接没有代码。 [Here's an SO answer about using OpenCV to do edge detection](https://stackoverflow.com/questions/5037502/edge-detection-of-image-in-iphone-using-image-magick)。无论如何，重点是，您需要图像处理才能从照片中提取可测量的特征。

# php - 如果复选框同时选中为选取框，则显示多个输入文本框

> ID：15070275
> 
> 赞同：1
> 
> 时间：2013-02-25T15:20:20.870
> 
> 标签：php, wordpress, textarea, html-entities, marquee

我没有这方面的经验，但我认为我做得很好。我需要有经验的人的帮助。认为这是一个有趣的问题假设有 3 个复选框和 3 个文本框。

```
<input type="checkbox" name="check[1]" value="1.">  
<textarea name="text[1]" ></textarea>

 <input type="checkbox" name="check[2]" value="2.">   
 <textarea name="text[2]" ></textarea>

 <input type="checkbox" name="check[3]" value="3.">  
 <textarea name="text[3]" ></textarea> 
```

我需要创建一个循环来检查 foreach`check[%]`是否被选中 `if (isset($_POST['check[%]']))`以将所有选中`text[%]`的文本框值添加到一些`$value`

`$value`需要作为选框中的一行输出

我认为它需要`$value`经历低谷`html_entity_decode` ，但我不确定。最终输出类似于

```
$output .= "<font><marquee scrollamount='3' BEHAVIOR=SCROLL DIRECTION="left"> $value"."</marquee>"."</font>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:22:40.500

对于初学者，对于 PHP POST，我不会在输入值的名称中使用方括号。

索引.php：

```
<form action="test.php" method="POST">
    <input type="checkbox" name="check1" value="1.">  
    <textarea name="text1" ></textarea>
    <input type="checkbox" name="check2" value="2.">   
    <textarea name="text2" ></textarea>
    <input type="checkbox" name="check3" value="3.">  
    <textarea name="text3" ></textarea>
    <button type="submit">Submit</button>
</form> 
```

测试.php：

```
 $total_checkbox_num = 3;
    $final_message = '';
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        foreach($_POST as $key => $value) {
            if (!is_array($key)) {
                $_POST[$key] = htmlspecialchars(stripslashes(trim($value)));
            }
        }
        for($i = 1; $i <= $total_checkbox_num; $i++) {
            if(isset($_POST['check'.$i])) {
                $final_message .= $_POST['text'.$i];
            }
        }
        $output = '<font><marquee scrollamount="3" behavior="scroll" direction="left">' . $final_message . '</marquee></font>';
        echo $output;
    } else echo "There was an error"; 
```

# jquery - 为什么不推荐使用 jQuery 1.9+ attr() 方法？

> ID：15070277
> 
> 赞同：28
> 
> 时间：2013-02-25T15:20:29.200
> 
> 标签：jquery, deprecated, attr, prop

`attr()`作为一名 jQuery1.9+ 软件开发人员，我可以在日常工作中“弃用”该方法吗？

* * *

正如许多问题所示，

*   [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr) （主要）
*   [jQuery attr vs. prop，有props的列表吗？](https://stackoverflow.com/q/15057281)
*   [jQuery attr 与道具？](https://stackoverflow.com/q/13247058)
*   [将 jQuery 1.8.3 迁移到 1.9.0 - 替换已弃用的 .attr()](https://stackoverflow.com/q/14602773)
*   ... ETC。 ...

*关于“使用 attr 还是使用 prop？”*有很多困惑。，并且，根据我（开发人员）的观点，对于`attr()`方法的所有用途，我们可以`prop`改用：

1.  *向后兼容性*：编码新软件不需要这个；
2.  *性能*：[John 说](http://ejohn.org/blog/jquery-16-and-attr/)“通过 .attr() 方法访问属性将比直接通过 .prop() 访问属性稍慢”；
3.  *改变属性值*：都可以通过`prop(name,newvalue)`方法改变。
4.  *移除属性*：都可以通过`removeProp(name)`方法移除。
5.  *检查 HTML 属性值*：浏览器使用 DOM，所有 HTML 都转换为 DOM，如果 DOM 受到影响，`attr(name)`方法也会受到影响。关于 prop 的“强类型”：它优于“html 字符串值”（例如“checked”与*true*）。
6.  *检查是否在“HTML 原始代码”中定义了一个属性*（假设 `attr`浏览器中的该方法返回*未定义*，如果不是）... 那么，我们需要在某些软件中使用它吗？ [在 forms](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)中，“.val() 方法是获取或设置表单值的推荐 jQuery 方法”
7.  *跨浏览器一致性*：两者（不仅是 attr）都是一致的方法。（它是？？）。

所以，在这个时候（2013 年），我没有看到 `attr`在开发新的 jQuery 代码时使用方法的好理由......但是，换句话说，**这是一个 问题：`attr`在我的日常任务？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-25T15:23:59.297

`.attr()`不被弃用，因为*它对它的用途很有用*，并且是做它的用途的唯一正确方法（缺少使用每个元素的`getAttribute`功能，它做同样的事情......或自己解析 HTML）。我们甚至进行此讨论的唯一原因是因为 jQuery（和一些旧浏览器（*咳嗽*IE*咳嗽*））错误地将属性和属性混为一谈，而*这种混乱*是他们在 1.9 中明显修复的问题。

`.attr()`检索*属性*，同时`.prop()`检索*属性*。两者是不同的东西，并且一直是正式的（尽管 DOM 通常具有对应于属性的属性）。如果您有`<p whatever="value">`, where`whatever`不是浏览器识别的属性，您将使用它`.attr()`来获取属性的值。 `.prop()`甚至无法在大多数浏览器中*看到它。*

当您关心生成的 DOM*属性*时，请使用`.prop()`. 当您关心实际的 HTML*属性*时，请使用`.attr()`. 这不是一个非此即彼的事情。您可以在相同的代码中同时使用两者，并且宇宙甚至不会内爆一次（假设您已经正确使用它们，无论如何）。:) 只需使用适合您当时正在做的工作的那个，并停止尝试“弃用”没有损坏的东西。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-25T15:43:48.510

我冒昧地为你准备了一个小提琴：

[http://jsfiddle.net/5REVP/](http://jsfiddle.net/5REVP/)

特别是这部分：

```
<div id="example" style="padding:10px"></div>

console.log("style");
var styleAttr = $("#example").attr("style");
console.log(styleAttr); // You get "padding:10px"
var styleProp = $("#example").prop("style");
console.log(styleProp); // You get a CSSStyleDeclaration object 
```

“样式”示例清楚地表明属性与属性不同（检查控制台）。

为了可读性、可维护性和向后（以及向前）兼容性，您应该始终对给定任务使用正确的方法，否则方法可能会停止像您一样运行，.attr() 方法是的例子。

.attr() 方法用于获取元素的属性，属性是一个[SGML](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.2)术语，指的是元素标签中包含的信息，您可以通过检查元素轻松读取该信息。

*   如果您获得元素的“样式”属性，则除了该属性中专门写入的信息之外，您将不会获得任何信息。
*   如果您获得复选框的“已选中”属性，您将获得“已选中”或“”。

.prop() 方法用于获取元素的 DOM 属性。

*   如果你得到了“style”属性，你没有得到设计师在 style 属性中写的东西，你得到了元素的所有实际 css 属性。
*   如果您获得复选框的“选中”属性，您将得到真或假。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T15:27:28.847

.attr() 仅访问 HTML 属性，而 .prop() 将检索不在 HTML 元素上的属性。请参阅文档：

> 例如，应使用 .prop() 方法检索和设置 selectedIndex、tagName、nodeName、nodeType、ownerDocument、defaultChecked 和 defaultSelected。在 jQuery 1.6 之前，可以使用 .attr() 方法检索这些属性，但这不在 attr 的范围内。这些没有对应的属性，只是属性。

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T13:36:56.820

我的功课...在阅读了@cHao 和@cernunnos 很好的解释之后，并在使用了几个月后...我认为我们需要另一个概念来决定，作为程序员，何时使用或不使用 prop 和 attr：

*   *HTML 源代码*及其表示：浏览器在浏览器的内存空间中加载 HTML 页面。好吧，留在内存浏览器的是 DOM 表示，但 DOM 保留了一些原始的东西，如*属性*和[cssText 属性](http://help.dottoro.com/ljiiimpl.php)，它们是“有时持久的表示”。
    PS：没有在“标准 DOM”中定义的*属性*，没有到*DOM 属性*的映射。当一个（非只读）*属性*发生变化时，如果有对应的（映射的）*属性*，则可以自动更改。

*   *DOM 状态*：动态页面需要直接在 DOM 上进行更改，这是最终用户看到的。所以，如果页面上有一些“点击和更改”的动作，那么每次 DOM 都会去一个新的页面表示，所以，每次 DOM 都有一个新的[状态](http://en.wikipedia.org/wiki/State_transition_system)。
    当一个DOM*属性*更改时，所有其他 DOM*属性*（如果需要）会一致更改。

考虑到这些概念，我们可以画出一条“**经验法则**（for `attr`vs `prop`uses）”：

1.  使用`prop`，你有 90% 的机会可以工作……如果你使用 jQuery 来*改变 DOM 状态*（和*标准的 DOM*假设），则有 99% 的机会。
2.  如果您需要更改或访问`data-*`属性，请使用`.data()`方法。
3.  否则（非 DOM、非数据或非标准事物）检查是否使用案例`.attr()`，并预留一些时间研究它（参见上面的答案）。

# python - 加快对熊猫系列的异常值检查

> ID：15070279
> 
> 赞同：5
> 
> 时间：2013-02-25T15:20:31.217
> 
> 标签：python, pandas, outliers

我正在使用不同的标准偏差标准对 pandas Series 对象进行两次通过的异常值检查。但是，我为此使用了两个循环，并且运行速度非常慢。我想知道是否有任何熊猫“技巧”来加快这一步。

这是我正在使用的代码（警告非常丑陋的代码！）：

```
def find_outlier(point, window, n):
    return np.abs(point - nanmean(window)) >= n * nanstd(window)

def despike(self, std1=2, std2=20, block=100, keep=0):
    res = self.values.copy()
    # First run with std1:
    for k, point in enumerate(res):
        if k <= block:
            window = res[k:k + block]
        elif k >= len(res) - block:
            window = res[k - block:k]
        else:
            window = res[k - block:k + block]
        window = window[~np.isnan(window)]
        if np.abs(point - window.mean()) >= std1 * window.std():
            res[k] = np.NaN
    # Second run with std2:
    for k, point in enumerate(res):
        if k <= block:
            window = res[k:k + block]
        elif k >= len(res) - block:
            window = res[k - block:k]
        else:
            window = res[k - block:k + block]
        window = window[~np.isnan(window)]
        if np.abs(point - window.mean()) >= std2 * window.std():
            res[k] = np.NaN
    return Series(res, index=self.index, name=self.name) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T15:44:30.173

我不确定你在用那个块做什么，但是在系列中查找异常值应该很容易：

```
In [1]: s > s.std() * 3 
```

其中 s 是您的系列，3 是异常值状态要超过多少标准差。此表达式将返回一系列布尔值，然后您可以通过以下方式索引该系列：

```
In [2]: s.head(10)
Out[2]:
0    1.181462
1   -0.112049
2    0.864603
3   -0.220569
4    1.985747
5    4.000000
6   -0.632631
7   -0.397940
8    0.881585
9    0.484691
Name: val

In [3]: s[s > s.std() * 3]
Out[3]:
5    4
Name: val 
```

**更新：**

解决关于块的评论。我认为您可以`pd.rolling_std()`在这种情况下使用：

```
In [53]: pd.rolling_std(s, window=5).head(10)
Out[53]:
0         NaN
1         NaN
2         NaN
3         NaN
4    0.871541
5    0.925348
6    0.920313
7    0.370928
8    0.467932
9    0.391485

In [55]: abs(s) > pd.rolling_std(s, window=5) * 3

Docstring:
Unbiased moving standard deviation

Parameters
----------
arg : Series, DataFrame
window : Number of observations used for calculating statistic
min_periods : int
    Minimum number of observations in window required to have a value
freq : None or string alias / date offset object, default=None
    Frequency to conform to before computing statistic
    time_rule is a legacy alias for freq

Returns
-------
y : type of input argument 
```

# trigger.io - 如何在不部署到 Heroku 的情况下为 Web 打包 Trigger.io 应用程序？

> ID：15070282
> 
> 赞同：4
> 
> 时间：2013-02-25T15:20:33.930
> 
> 标签：trigger.io

在 Trigger.io[文档](http://docs.trigger.io/en/v1.4/web.html?highlight=heroku)中它指出：“您生成的 Web 应用程序可以部署到任何 node.js 平台。为了使部署变得非常容易，我们添加了一个选项，可以使用单个命令将应用程序直接部署到 Heroku。”

部署到 Heroku 似乎不是可选的。我们有自己的 nodejs 托管解决方案，我们想打包我们的 web 应用程序以在没有 Heroku 部署步骤的情况下发布。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:18:37.793

如果您在`development/web`运行 web 目标后查看，您会发现一个 Express 应用程序。

您的应用程序不会像静态文件一样工作，因为我们需要代理`forge.request`调用以避开同源策略问题，但 Node 应用程序应该是一个很好的起点。

# reporting-services - 报告服务：自定义组装和订阅

> ID：15070284
> 
> 赞同：1
> 
> 时间：2013-02-25T15:20:39.700
> 
> 标签：reporting-services

我正在尝试获取一个 SSRS 报告，该报告将自定义程序集用于不同语言的标签。在预览和单个报告中，一切正常。但是，当订阅过程生成报告时，只有“#error”项目而不是标签。订阅过程中是否有特殊用户，谁需要一些特殊权限才能进行程序集？

我希望你能帮忙。

罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:32:12.047

我们解决了这个问题：

该程序集需要一些连接字符串。对于单个报告，它们必须在 web.config 中，对于订阅过程，它们必须在 ReportingServicesService.exe.config 中......

# lua - 物理层或它是什么（看图像）？

> ID：15070290
> 
> 赞同：0
> 
> 时间：2013-02-25T15:20:55.160
> 
> 标签：lua, box2d, coronasdk

![图片](../Images/26aba7a408be46cdbffddda9afba006a.png)

当 obj 进入轨道时，我需要在轨道上移动一个对象，但同时它可以很容易地通过它。

不知道怎么叫的。我正在寻找这个程序的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:06.117

据我所知，没有简单的方法可以让一个对象与另一个对象发生碰撞，然后再抑制这种行为。

当车辆改变其虚拟高度时，我建议使用 categoryBits、maskBits 相应地设置（或 isSensor=true 标志以关闭与该对象的碰撞）重新创建轨道的这一部分。

[http://developer.coronalabs.com/content/game-edition-collision-detection](http://developer.coronalabs.com/content/game-edition-collision-detection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T02:39:22.950

正如 atok 所说，我很确定在 DisplayObject 上调用physics.addBody() 之后没有任何方法可以设置碰撞掩码。这里有关于碰撞过滤器（使用 categoryBits 和 maskBits）的精彩指南，physics.addBody 的文档[在](http://docs.coronalabs.com/api/library/physics/addBody.html)[这里](http://developer.coronalabs.com/forum/2010/10/25/collision-filters-helper-chart)。[这里](http://developer.coronalabs.com/content/game-edition-collision-detection#Collision_categories_masking_and_groups)还有一些其他的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:43:41.363

如果您使用物理来检测碰撞，您可以从物理中移除物体（火车、汽车、球，任何应该在轨道下的东西）以避免碰撞，然后在物体通过时重新添加它轨道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T20:54:54.657

只需设置对象显示的顺序即可。据我所知，变量声明的顺序决定了谁优先于另一个。

为了设置碰撞（为了避免相互碰撞），只需使用 categoryBits 和 maskBits。

# xml - 存储 Windows Store 应用程序的应用程序配置的最佳方式

> ID：15070292
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:05.333
> 
> 标签：xml, configuration, visual-studio-2012, windows-runtime

我一直在阅读 WP7 的方法，但还没有看到任何关于如何处理 Windows 8 应用程序的真实文章。

所以，如果我想存储设置。有些是关于他们输入的用户的文本字段，有些是配置复选框，比如颜色偏好。什么是最好的或更重要的是，正确的方法来做到这一点。

在 Windows 应用程序的 VS2012 中，您可以将应用程序配置文件添加到项目中，但对于 Windows 商店应用程序项目/解决方案，这似乎缺少。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:34:45.520

Windows 运行时公开了可用于存储应用相关设置的 LocalSettings、RoamingSettings。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx)

您可以使用它来创建/存储应用程序特定的配置。

另一种方法是在存储配置时拥有一个 xml 文件。您可以在应用程序加载时解析 xml 并公开自定义配置类的属性

我个人创建了一个公开静态属性的 Config 类。静态属性读取/写入本地/漫游设置。

# java - 使用 Astyanax CQL3 API 批量插入？

> ID：15070293
> 
> 赞同：3
> 
> 时间：2013-02-25T15:21:10.583
> 
> 标签：java, cassandra, astyanax

我知道我们可以使用类似这样的方式将单个记录插入 Cassandra（以下示例取自[此处](https://github.com/Netflix/astyanax/wiki/Cql-and-cql3)）：

```
final String INSERT_STATEMENT = "INSERT INTO employees (empID, deptID, first_name, last_name) VALUES (?, ?, ?, ?);";

result = keyspace
    .prepareQuery(CQL3_CF)
    .withCql(INSERT_STATEMENT)
    .asPreparedStatement()
    .withIntegerValue(222)
    .withIntegerValue(333)
    .withStringValue("Eric")
    .withStringValue("Cartman")
    .execute(); 
```

是否可以使用 Astyanax 的 cql3 API（如 JDBC 的 executeBatch）进行批量插入（用于多条记录）？

注意：使用 Astyanax 的 MutationBatch（基于 Thrift，而不是 CQL）对我来说似乎不是一种选择，因为我遇到了与[这个](https://stackoverflow.com/questions/11915007/cant-create-table-with-composite-key-using-astyanax-client)相同的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:58:00.303

使用 Astyanax 实现以下目标：

使用 cqlsh：

```
cqlsh:TEST_KS> INSERT INTO "MESSAGE_CF" (KEY, "DELETED_RECEIVER", "DELETED_SENDER", "SENDER") 
               VALUES ('user-1241324', 'Yes', 'No', 'user@mail.com');
cqlsh:TEST_KS> SELECT * FROM "MESSAGE_CF";                                                                   
 key          | DELETED_RECEIVER | DELETED_SENDER | RECEIVER | SENDER
--------------+------------------+----------------+----------+---------------
 user-1241324 |              Yes |             No |     null | user@mail.com 
```

使用 Astyanax：

```
 Keyspace keyspace = Astyanax.getKeyspaceContext();
    ColumnFamily<String, String> mail = new ColumnFamily<String, String>(
        keyspace.getKeyspaceName(), // CF Name
        StringSerializer.get(),   // Key Serializer
        StringSerializer.get());  // Column Serializer

    // You could start looping here to alter what data is being inserted  
    // or make the method take in parameters and call it multiple times.         
    String  cqlStatement = 
            "INSERT INTO MESSAGE_CF (KEY, DELETED_RECEIVER, DELETED_SENDER, SENDER) "
            + "VALUES ('user-1281324', 'Yes', 'No', 'user@mail.com');";

    // execute the insertion
    OperationResult<CqlResult<String, String>> result = 
        keyspace.prepareQuery(mail).withCql(cqlStatement).execute();

   // stop looping 
```

注意：我无法使用准备好的语句来实现这一点，Astyanax 在他们的[wiki](https://github.com/Netflix/astyanax/wiki/Cql-and-cql3)（在准备好的 CQL 下）显示支持准备好的语句，但我使用的是 astyanax-1.56.21 并且`asPreparedStatement()`缺少该功能。

此外，为此，不要忘记将您的 AstyanaxContext 设置为使用 CQL3。

```
 new com.netflix.astyanax.impl.AstyanaxConfigurationImpl()      
     .setCqlVersion("3.0.0")) //using CQL3 
```

**更新**

查看**[批处理](http://cassandra.apache.org/doc/cql3/CQL.html#batchStmt)**关键字。批处理加速能力的主要因素是它节省了往返行程。管理 CQL 语句将更加困难，但它确实提高了更新速度。它可以执行 CUD 操作（插入、更新和删除），但不能执行 SELECT。另外，我建议您通读[CQL3 文档](http://cassandra.apache.org/doc/cql3/CQL.html#batchStmt)以了解 cql 可以做什么。

# symfony - 如何调试树枝？

> ID：15070300
> 
> 赞同：5
> 
> 时间：2013-02-25T15:21:22.510
> 
> 标签：symfony, twig

如何在 Twig 中进行认真的调试？我知道[如何转储单个变量](https://stackoverflow.com/questions/10120256/how-to-use-dump-in-twig)。但是，如果您不知道哪个模板正在呈现您正在查看的页面部分怎么办？或者您想知道使用哪些模板来呈现页面？

在 Drupal 6/7 中，我可以启用[主题开发者模块](http://drupal.org/project/devel_themer)。这使我可以指向并单击页面的任何部分，并获得所有使用模板的列表（以及更多信息）。也许我要求太多或做错了。

如何找到负责页面特定部分的模板？如果这太多了，我怎样才能看到 Twig 引擎调用了哪些模板？获得追踪也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:54:47.670

开发人员工具栏 (app_dev.php) 应列出用于呈现页面的所有模板。

# debugging - 梨邮件调试

> ID：15070303
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:27.483
> 
> 标签：debugging, email, pear

我对 Pear Mail 有这个愚蠢的问题：

我的脚本看起来像这样：

```
$params['host'] = $config['smtp_host'];
        $params['port'] = $config['smtp_port'];
        $params['auth'] = $config['smtp_auth'];
        $params['username'] = $config['smtp_username'];
        $params['password'] = $config['smtp_password'];
        $params['timeout'] = 10;

        $headers['From'] = 'Administrator <admin@admin.com>';
        $headers['To'] = '"'. $to .'" <' . $to . '>';
        $headers['Subject'] = "Bla";
        $headers['Content-Type'] = "text/plain; charset=\"UTF-8\"";
        $headers['Content-Transfer-Encoding'] = "8bit";
        $mail_object = & Mail::factory('smtp', $params);
        $send = $mail_object->send($to, $headers, "hi");
        if(PEAR::isError($send))
            echo $send->getMessage(); 
```

尽管设置了超时我的脚本挂起大约 60-120 秒，没有错误，什么都没有 - 电子邮件没有被发送。我不知道如何以任何方式调试它；/ 无法弄清楚我做错了什么。变量 $to 被传递给该代码内部的函数。我知道该对象正在被退回。

我如何检查出了什么问题？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:35:07.000

1.  确保您只尝试发送一封邮件进行调试
2.  安装并激活[xdebug](http://xdebug.org/)
3.  在脚本的开头，放一个`xdebug_start_trace('/tmp/foo.xt')`
4.  运行你的脚本
5.  在文本编辑器中查看函数跟踪文件。最后一行将显示哪个命令挂起。

我怀疑是网络连接挂了。您可以运行 wireshark 来查看发送了哪些数据包，以及是否收到响应。

# html - 并排对齐两个div

> ID：15070304
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:27.987
> 
> 标签：html, css

我有这段 html 代码。我喜欢 wuiLeftArea 和 wuiMainArea 始终并排。现在，当缩小浏览器窗口时，WuiMainArea div 低于 wuileftArea。有没有办法强制 wuiMainArea div 始终保持在右侧？

```
<div id="wuiLeftArea">
        <div id="wuiLefthandNavRoot">
            <div id="tree">
            </div>
    </div>
</div>

<DIV id=wuiMainArea sizcache="5" sizset="1">
    <DIV id=wuiMainContent sizcache="5" sizset="1">
        <DIV id=wuiInpageNav sizcache="5" sizset="1">
              <DIV id=chart class=wui-inpage-container style="float:right; width: 1200px;min-height:500px;display: block; overflow: hidden;">
              <p > this is the area to put charts. this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                        this is the area to put charts. 
                </p>
            </DIV>
        </DIV>
    </DIV>
</DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:24:52.680

使用基于百分比的长度。如果左侧容器占页面宽度的 25%，而主容器占页面宽度的 75%，那么无论浏览器变得多小，您都会有 1/4 3/4 的拆分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:24:37.423

[http://jsfiddle.net/XCEjf/](http://jsfiddle.net/XCEjf/)

```
.wui-inpage-container {
    width: 50%;
} 
```

通过使用相对宽度，您可以让浮动始终在页面宽度中留出空间，从而防止换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:23:25.100

除非容器上有固定大小或明确设置溢出，否则这种情况总是会发生；否则，每当调整任何容器的大小时，它都会重新排列其子级以适应宽度方向的身体。

# mysql - 如何用 MySQL REPLACE 函数替换损坏的德语变音符号？

> ID：15070306
> 
> 赞同：2
> 
> 时间：2013-02-25T15:21:33.503
> 
> 标签：mysql, encoding, utf-8, replace

*（我不小心首先在 DBA 上问了这个问题，但在常见问题解答中发现在 SO 上问 SQL 问题）*

我正在尝试“修复”从编码损坏的 SQL 文本文件导入的 MySQL 数据库（UTF-8 排序规则）。

即[德国元音变音](http://en.wikipedia.org/wiki/Germanic_umlaut)在数据库中被破坏。应该读的内容例如“ü”显示为“Ã¼”。

由于我知道[`REPLACE`功能](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)，我首先尝试了显而易见的：

```
SELECT * FROM `mydb`.`mytable` WHERE `mycolumn` LIKE '%Ã¼%'; 
```

这给了我预期的结果。

接下来我尝试替换它们：

```
UPDATE `mydb`.`mytable` SET `mycolumn` = REPLACE(`mycolumn`, 'Ã¼', 'ü'); 
```

令我惊讶的是，这导致零行受到影响。

因此，即使[对编码了解很多](http://www.joelonsoftware.com/articles/Unicode.html)，我仍然无法弄清楚如何解决这个问题（或者是否有可能）。

**我的问题：**

如何使用该`REPLACE`功能替换损坏的德语变音符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:11:04.390

为了回答我自己的问题，[链接的可能副本](https://stackoverflow.com/questions/5951871/how-to-correct-double-encoded-utf-8-strings-sitting-in-mysql-utf8-general-ci-fie)为我指明了某个方向，但对我来说不是正确的解决方案。

相反，我做了以下步骤（使用[HeidiSQL](http://www.heidisql.com/)）：

1.  右键单击树中的表。
2.  选择“编辑”
3.  将“默认排序规则”的下拉值更改为“latin_german1_ci”。没有*勾选*“转换数据”复选框。
4.  点击底部的“保存”按钮。
5.  将“默认排序规则”的下拉值更改为“utf8_general_ci”。没有*勾选*“转换数据”复选框。
6.  点击底部的“保存”按钮。

之后，我可以成功执行我的语句，例如

```
UPDATE `mydb`.`mytable` SET `mycolumn` = REPLACE(`mycolumn`, 'Ã¼', 'ü'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T13:09:50.207

您的“元音变音”没有损坏！这些只是编码为 utf-8，因此您的“带有两个点的 u”会产生 utf-8 2 字节序列。这没有什么错。您的问题是您的查看器可能以 ANSI 编码（iso-8859-1）显示，这导致字节和字符之间的关系为 1:1。但是，查看器必须“解码” utf-8 序列以获取字符的代码点，否则它将仅显示 utf-8 起始字节以及后续字节/s 作为它在 ANSI 中表示的字符。我敢打赌，您的视图未配置为查看 utf-8 编码文本。只需根据需要进行配置即可。

让你的 'u with two dot' 被 utf-8 编码，然后全世界的每个观众都可以解码它的代码点，这是一个独特的 unicode 代码点。请记住，如果您的“带两个点的 u”是 ANSI 编码的，那么当使用不同的 ANSI 编码（例如 iso-8859-5）显示时，它可能会显示不同的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T08:19:49.490

恕我直言，MySQL 存储`ü`为`Ã¼`使用 UTF-8 排序规则*`utf8_general_ci`*或更好是正确的*`utf_unicode_ci`*。[（讨论为什么更喜欢*`utf8_unicode_ci`*）](https://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci#766996)

现在，重要的是如何在将 UTF 编码的 SQL 字符串打印到 HTML、Android 或 iOS 等前端之前对其进行解码。

**HTML**

如果是 HTML，请在 HTML 页面部分设置 utf-8 字符集`<head>`，德语字符`ü`将正确显示。

```
<head>
    <meta charset="UTF-8"/>
    ...
</head> 
```

如果没有，那么在 PHP 的情况下，`utf_decode()`在打印之前将变量包装在函数中。

*注意：如果您没有在 MySQL 中使用 PHP，请以您选择的语言查找 utf-8 解码函数。*

**安卓**

安卓使用的情况下

```
Html.fromHtml(String).toString(); 
```

**iOS**

在 iOS 使用的情况下

```
(NSString *)stringByDecodingHTMLEntities; 
```

# android - 在 Android 中的视图之间滑动

> ID：15070308
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:35.897
> 
> 标签：android, views, sliding

在 Android 活动中，我正在显示一个视图

单击按钮时，我想用幻灯片替换当前视图，这意味着当前视图从右向左滑动并显示新视图。同样，当用户现在按下后退按钮时，之前的视图会从左向右滑动

请帮忙举个合适的例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:25:20.010

我认为您正在寻找的是[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

这是一个教程，介绍了如何基本上完全按照[您的要求进行操作](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:27:49.323

使用两个片段，每个视图一个，而不是您可以通过 XML 文件（或以编程方式）创建两个幻灯片动画（进出动画），用于将新片段滑入和滑出。

阅读[片段指南](http://developer.android.com/guide/components/fragments.html)以获取详细信息，可以在[此处](https://stackoverflow.com/questions/4817900/android-fragments-and-animation)找到如何使用事务动画的示例。

# python - 用于 Active Accessibility Windows 8 的 Python 绑定？

> ID：15070310
> 
> 赞同：1
> 
> 时间：2013-02-25T15:21:42.680
> 
> 标签：python, windows-7, windows-8, accessibility, accessibility-api

我不得不在 Windows 7 上重新调整和重新构建 pyAA（Microsoft Active Accessibility 的 Python 绑定），现在看来我必须将它迁移到 Windows 8。我希望我不必重新编译再次绑定！

有人知道 Windows 版本 8 的 Windows 版本之间的 Microsoft Active Accessibility 是否存在很大差异（从开发人员的角度来看）？

提前致谢！

# .net - 密码已过期

> ID：15070311
> 
> 赞同：3
> 
> 时间：2013-02-25T15:21:43.673
> 
> 标签：.net, vb.net, oracle

我在 vb.net 和 Oracle 数据库中有一个项目。当用户密码在 oracle 中过期时导致 oracle exeption。我处理了那个异常（打开一个 ChangePassword 表单并更改了密码），但是我丢失了当错误出现时我准备执行的过程：
示例：

```
 Try
            conn = New OracleConnection
            conn.ConnectionString = gApp.ConnectString
            conn.Open()

          'Let's say that error appears here, I want to retun here after password has been changed

            cmd.Connection = conn
            cmd.CommandText = "Delete_Transaction"
            cmd.CommandType = CommandType.StoredProcedure
            OracleCommandBuilder.DeriveParameters(cmd)
            cmd.Parameters("in_transaction_id").Value = TransactionId
            cmd.ExecuteNonQuery()
            conn.Close()

        Catch ex As OracleException
           'PseudoCode:  if error is PasswordExpired->open the ChengePassForm...blah,blah
           'is handled by a Error class that i have
        Finally
            If Not conn Is Nothing Then
                conn.Dispose()
            End If
        End Try 
```

主要问题是代码中到处都可能出现问题，我的意思是不同的程序，不同的形式等。
所以我需要一个通用的解决方案。实际上我什至无法想象一个正确的逻辑来解决这个问题？谁能告诉我一个方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:25:03.347

您可以制作一个需要`Action(Of OracleCommand)`.

在一个块中调用委托`Try Catch`，如果密码更改，只需再次调用操作以使用正确的密码重新运行代码。

您可以使用 lambda 表达式调用此函数。
请注意，lambda 表达式中的所有内容都可能运行不止一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:28:41.113

使用嵌套的 try catch 语句：

```
Try
    Try
        conn = New OracleConnection
        conn.ConnectionString = gApp.ConnectString
        conn.Open()

        'Let's say that error appears here, I want to retun here after password has been changed
    Catch ex1 As OracleException
       'PseudoCode:  if error is PasswordExpired->open the ChengePassForm...blah,blah
       'is handled by a Error class that i have
    Catch ex2 As Exception
        ' throw ex2 to be handled by the parent try catch
    End Try

    cmd.Connection = conn
    cmd.CommandText = "Delete_Transaction"
    cmd.CommandType = CommandType.StoredProcedure
    OracleCommandBuilder.DeriveParameters(cmd)
    cmd.Parameters("in_transaction_id").Value = TransactionId
    cmd.ExecuteNonQuery()
    conn.Close()

Catch ex As Exception
   'PseudoCode:  if error is PasswordExpired->open the ChengePassForm...blah,blah
   'is handled by a Error class that i have
Finally
    If Not conn Is Nothing Then
        conn.Dispose()
    End If
End Try 
```

# delphi - 检索子目录时从路径中删除的驱动器号

> ID：15070312
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:45.820
> 
> 标签：delphi, delphi-7, subdirectory

我正在尝试在 delphi 中检索目录的子目录，我正在使用此功能：

```
procedure GetSubDirectories(const directory : string; list : TStrings) ;
 var
   sr : TSearchRec;
 begin
   try
     if FindFirst(IncludeTrailingPathDelimiter(directory) + '*.*', faDirectory, sr) < 0 then
       Exit
     else
     repeat
       if ((sr.Attr and faDirectory <> 0) AND (sr.Name <> '.') AND (sr.Name <> '..')) then
         List.Add(IncludeTrailingPathDelimiter(directory) + sr.Name) ;
     until FindNext(sr) <> 0;
   finally
     SysUtils.FindClose(sr) ;
   end;
 end; 
```

然后我尝试了类似的东西：

```
procedure TForm1.FormCreate(Sender: TObject);
  var
    folders: TStringList;
  begin
    folders := TStringList.Create;
    try
      GetSubDirectories('c:\', folders);
      ShowMessage(folders.ValueFromIndex[0]);
    finally
      FreeAndNil(folders);
   end;
  end; 
```

消息框中显示的字符串例如：“:\Program Files”。我尝试`List.Add`在 GetSubDirectories 过程中添加一个断点，然后 var 看起来像“C:\Program Files”。

**为什么在消息框中删除了驱动器号？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:24:26.583

`ValueFromIndex`要求您在要查找的内容上使用键值对`TStringList`可能是其`Strings`属性`TStringList`也是该类的默认属性。

所以你可以使用`folders[0]`或`folders.Strings[0]`

# xcode - 在 for 循环内的 MapView 上显示多个引脚？

> ID：15070314
> 
> 赞同：0
> 
> 时间：2013-02-25T15:21:51.890
> 
> 标签：xcode, for-loop, mkmapview, pins

我正在开发一个 iphone 应用程序，我在 MapView 上显示雷达点。有超过 1000 个点。我必须显示所有点并计算雷达点和用户位置点之间的距离。我必须创建所有区域（超过 1000 个）才能显示？谁能给我一个想法，我该如何使用 for 循环来做到这一点？否则我将创建超过 1000 个区域对象。这是我的代码：

```
- (void)viewDidLoad {

//user's location information

CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:self.mapView.userLocation.coordinate.latitude longitude:self.mapView.userLocation.coordinate.longitude];

[super viewDidLoad];

[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];

//region1

MKCoordinateRegion region1 = { {0.0, 0.0 }, { 0.0, 0.0 } }; 

region1.center.latitude = 39.9828000 ;

region1.center.longitude =26.3033200 ;

region1.span.longitudeDelta = 1.90f;

region1.span.latitudeDelta = 0.00f;

[mapView setRegion:region1 animated:YES];

[mapView setDelegate:self];

DisplayMap *ann1 = [[DisplayMap alloc] init]; //display is my class to keep title,subtitle and coordinate information.

ann1.title = @" istanbul";

ann1.subtitle = @"esenler"; 

ann1.coordinate = region1.center; 

[mapView addAnnotation:ann1];

CLLocation *pinLocation1 = [[CLLocation alloc] initWithLatitude:region1.center.latitude longitude:region1.center.longitude];

CLLocationDistance distance1 = [pinLocation1 distanceFromLocation:userLocation];

if(distance1<20000){
    [lbl setText: [NSString stringWithFormat:@"Distance to point %4.2f m.",distance1]];
}

//region2

MKCoordinateRegion region2 = { {0.0, 0.0 }, { 0.0, 0.0 } }; 

region2.center.latitude = 39.9876200 ;

region2.center.longitude =26.3062700 ;

region2.span.longitudeDelta = 1.90f;

region2.span.latitudeDelta = 0.00f;

[mapView setRegion:region2 animated:YES]; 

[mapView setDelegate:self];

DisplayMap *ann2 = [[DisplayMap alloc] init];

ann2.title = @" istanbul";

ann2.subtitle = @"esenler";

ann2.coordinate = region2.center; 

[mapView addAnnotation:ann2];

//aradaki uzaklığı hesaplamak için mevcut yerin location ı cllocation class ı üzerinden hesaplanıyor.

CLLocation *pinLocation2 = [[CLLocation alloc] initWithLatitude:region2.center.latitude longitude:region2.center.longitude];

CLLocationDistance distance2 = [pinLocation2 distanceFromLocation:userLocation];

if(distance2<20000){
    [lbl setText: [NSString stringWithFormat:@"Distance to point %4.2f m.",distance2]];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:41:47.703

我会让你弄清楚如何在 Objective-C 中编写一个 for 循环，因为网络上已经有数百个源代码。您需要做的是决定如何将数据放入数组中进行循环。一旦你解决了这个问题，下面的代码就是你的一个更有效的版本，有了这些想法

*   您在 viewDidLoad 中执行此操作，但地图可能没有时间正确获取用户的位置。您最好不时添加所有注释，然后在调用用于[接收新位置](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3adidUpdateUserLocation%3a)的委托方法时，然后循环遍历`[mapView annotations]`设置所有标签的数组。
*   说到这。region1 和 region2 都设置了`lbl`文本。每个都只是覆盖最后一个。您希望有 1000 个标签，还是希望只看到您添加到地图的最后一个区域的文本？
*   为什么要放大每个区域？您真的希望地图能够一一放大到 1000 个点中的每一个吗？完成后，您将只看到第 1000 个区域并忽略所有其他点
*   为什么要设置委托 1000 次？

.

```
DisplayMap *ann1 = [[DisplayMap alloc] init];

ann1.title = @" istanbul";

ann1.subtitle = @"esenler";

ann1.coordinate = CLLocationCoordinate2DMake(39.9828000, 26.3033200);

[mapView addAnnotation:ann1];

CLLocation *pinLocation1 = [[CLLocation alloc] initWithLatitude:ann1.coordinate.latitude longitude:ann1.coordinate.longitude];

CLLocationDistance distance1 = [pinLocation1 distanceFromLocation:userLocation];

if(distance1<20000)
{
    [lbl setText: [NSString stringWithFormat:@"Distance to point %4.2f m.",distance1]];
} 
```

# c# - MVC4 TDD - System.ArgumentNullException：值不能为空。

> ID：15070315
> 
> 赞同：10
> 
> 时间：2013-02-25T15:22:02.213
> 
> 标签：c#, asp.net-mvc-4, tdd

我是 mvc4 和 TDD 的新手。

当我尝试运行此测试时，它失败了，我不知道为什么。我已经尝试了很多事情，我开始在圈子里跑来跑去。

```
 // GET api/User/5
    [HttpGet]
    public HttpResponseMessage GetUserById (int id)
    {
        var user = db.Users.Find(id);
        if (user == null)
        {
            //return Request.CreateResponse(HttpStatusCode.NotFound);
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }
        return Request.CreateResponse(HttpStatusCode.OK, user);

    }

    [TestMethod]
    public void GetUserById()
    {
        //Arrange
        UserController ctrl = new UserController();
        //Act

        var result = ctrl.GetUserById(1337);

        //Assert
        Assert.IsNotNull(result);
        Assert.AreEqual(HttpStatusCode.NotFound,result.StatusCode);

    } 
```

结果：

```
Test method Project.Tests.Controllers.UserControllerTest.GetUserById threw exception: 
System.ArgumentNullException: Value cannot be null. Parameter name: request 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T15:33:26.830

您的测试失败，因为`Request`您在 ApiController 中使用的属性未初始化。如果您打算使用它，请确保初始化它：

```
//Arrange
var config = new HttpConfiguration();
var request = new HttpRequestMessage(HttpMethod.Post, "http://localhost/api/user/1337");
var route = config.Routes.MapHttpRoute("Default", "api/{controller}/{id}");
var controller = new UserController
{
    Request = request,
};
controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;

//Act
var result = controller.GetUserById(1337); 
```

# ios - UICollectionViewFlowLayout 奇怪的行为

> ID：15070317
> 
> 赞同：1
> 
> 时间：2013-02-25T15:22:07.917
> 
> 标签：ios, uicollectionviewlayout

我正在使用带有 UICollectionView 的 UICollectionViewFlowLayout 来显示水平线图像。

这个想法是这样的（带有 3 个单元格的示例）：

```
-------------------
|cell1|cell2|cell3|
------------------- 
```

但我得到了类似的东西

```
-------------------
|cell1|cell2|     
------|cell3|------ 
```

滚动后，cell3 移动到正确的位置。

在 iPad（横向）中，我的单元格大小为 (480,640)，而我的 UIEdgeInsets 为 (150,150,150,150)。

我不知道发生了什么，有什么想法吗？

# python - 字典和迭代的简单 Python 问题

> ID：15070319
> 
> 赞同：0
> 
> 时间：2013-02-25T15:22:20.960
> 
> 标签：python

我正在用 Python 编写迭代囚徒困境的实现，并且遇到以下问题。

```
for p in players:
    for o in players:
        if p.name != o.name:
            try:
                p.history[o.name]
            except KeyError:
                p.history[o.name] = []
                o.history[p.name] = []
                for i in xrange(0,2):
                    result = play(p.logic(p.history[o.name]),
                                  o.logic(o.history[p.name]))
                    p.history[o.name].append(result[0])
                    o.history[p.name].append(result[1]) 
```

这是我的代码。“玩家”列表是一个策略对象列表，其中“名称”是一个字符串，“逻辑”是一个函数。我遇到的麻烦发生在线路上

```
p.history[o.name].append(result[0]) 
```

我正在尝试创建以下词典：

```
Player 1.history = {"Player 2 Name": [result, result, result]}
Player 2.history = {"Player 1 Name": [result, result, result]} 
```

但我得到了这个：

```
Player 1.history = {"Player 1 Name": [wrong results], 
                    "Player 2 Name": [wrong results]} 
```

结果并不全是错误的，但有些是错误的。有谁知道为什么结果不正确，或者为什么我在玩家 1 的字典中有键“玩家 1 名称”和玩家 2 的字典中的“玩家 2 名称”？

编辑：应要求提供更多代码

```
class Strategy:
    """Basic class for all strategies to use. The 'logic' function is defined oustide and governs behavior"""
    def __init__(self, logic, name):
        self.logic = logic
        self.name = name
    history = {}

def makePlayer(name):
    if name == "Defects":
        def logic(hist):
            return 1
    if name == "Tit for Tat":
        def logic(hist):
            for i in xrange(1,3):
                try:
                    if hist[len(hist) -  i][1] == 1:
                        return 1
                except IndexError:
                    pass
            return 0
    return Strategy(logic, name)

payoff = [[100, 0], [101, 1]]

def play(choice1, choice2): #choiceFoo = 0 => cooperate; 1 => defect
    return [[choice1, choice2, payoff[choice1][choice2]], [choice2, choice1, payoff[choice2][choice1]]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:33:43.000

这不是一个完整的答案，但是在异常块中做“真正的工作”必然会引起混乱。如果您想查看字典中是否有键，请使用操作显式执行此`in`操作。

您可以通过将条件更改为来删除 try/except 块

```
if p.name != o.name and o.name not in p.history: 
```

再说一遍，反复囚徒困境的一部分是策略应该与自己对抗，这样可能会更好：

```
if o.name not in p.history: 
```

如果没有更多麻烦的代码（例如`play`），就很难就这个问题给出更多建议。

# webmatrix - 单击超链接以使用 WebMatrix 下载文件时重命名文件

> ID：15070320
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:22:27.153
> 
> 标签：webmatrix

我正在使用[WebMatrix](https://en.wikipedia.org/wiki/Microsoft_WebMatrix)。我将 abc.doc 文件上传到文件夹。创建一个超链接来下载文件。示例：`<a href="~/uploads/StudyMaterial/abc.doc">`。

当我单击链接时，将下载名为 abc.doc 的文件。下载文件时如何将其重命名为 Hello.doc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:25:11.980

为了重命名文件，您可以在将标头添加到响应`filename`时设置属性：`Content-Disposition`

```
Response.AppendHeader("Content-Disposition", "attachment; filename=\"Hello.doc\""); 
```

# matlab - 如何在 matlab 中使用 (plot::Inequality) 绘制不等式

> ID：15070321
> 
> 赞同：1
> 
> 时间：2013-02-25T15:22:27.203
> 
> 标签：matlab, matlab-figure, inequality

我想用 matlab 绘制一些不等式。我正在使用这段代码：

```
figure;
plot(plot::Inequality(x^2 + y^2 < 1, x = -1.5..1.5, y = -1.5..1.5)); 
```

但我收到此错误：

```
plot(plot::Inequality(x^2 + y^2 < 1, x = -1.5..1.5, y = -1.5..1.5))
      |
Error: Unexpected MATLAB operator. 
```

我已阅读本[手册](http://www.mathworks.co.uk/help/symbolic/mupad_ref/plot-inequality.html)。还有更多：

```
>> version
ans =
8.0.0.783 (R2012b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:24:40.807

`plot::Inequality`是 Matlab 符号工具箱的一部分，在[MuPAD](http://www.mathworks.com/help/symbolic/getting-started-with-mupad.html)中被调用。
您不能像常规命令一样使用它。

# android - 首选外部应用程序安装在哪里？

> ID：15070322
> 
> 赞同：0
> 
> 时间：2013-02-25T15:22:40.913
> 
> 标签：android, adb

首先，这与[此问题](https://stackoverflow.com/questions/4469920/where-is-my-android-application)类似，尚未正确回答。

我正在尝试提取我从设备构建的 APK 作为脚本的一部分。当我开始这样做时`adb pull`，我意识到我不知道我的 APK 安装在设备上的什么位置，因为清单中有`android:installLocation=preferExternal`.

首先，我试过

```
adb ls /system/app 
```

但我的 APK 没有列出。然后我尝试了

```
adb ls /mnt/sdcard -aR | grep -i "myappname" 
```

但它什么也没返回。最后，我尝试了

```
adb ls / -aR | grep -i "myappname" 
```

但我还是什么也没发现。由于我的 SD 卡有空间，我假设我的 APK 安装在那里，但我没有看到它在那里的证据。该应用程序运行良好，并显示在我设备上的应用程序管理器中。有什么想法可以在文件系统中查找 APK 吗？我的设备没有植根或解锁，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:43:21.090

找到了解决方案：

`adb shell pm list package -f`将列出所有应用程序的安装位置。

我的 APK 的安装位置恰好在 中`/data/app`，但是因为该目录没有读取权限，所以它没有显示在`adb shell ls`. 然而，实际的 APK ( `/data/app/myappname.apk`) 具有读取权限，并且可以通过`adb pull /data/app/myappname.apk`.

同样，这些都不需要 root（至少在我的 Galaxy S3 上）。

# java - 如何确定碰撞发生在哪一侧？

> ID：15070325
> 
> 赞同：0
> 
> 时间：2013-02-25T15:23:11.307
> 
> 标签：java, 2d, collision-detection

我在 Java 中实现了一些相当简单的 2D 碰撞检测，我对如何确定碰撞发生在哪个*表面（或碰撞框的一侧）有点困惑。*

我浏览了这个网站上的问题，并在其他地方尝试了广泛的 Google-fu，最接近我的是这样的：

```
public Side getCollisionSide(Rectangle main, Rectangle incoming) {
    boolean toTheLeft = main.getX() - incoming.getX() < 0;
    boolean toTheTop = main.getY() - incoming.getY() < 0;
    // ...but what can I do from here?
} 
```

问题是这实际上并没有给出与哪一方相撞。它可以告诉我碰撞发生在哪个*象限*，在原点设置为`main`' 坐标的网格中。但是如果一个物体`main`从左侧撞击（并且恰好在 Y 轴上的区域中较低），我无法使用这种方法知道碰撞是从左侧还是从底部发生的。

有谁知道这个的解决方案，甚至只是一个不同的实现？

我看到拥有速度和方向信息是如何带来好处的（甚至是一种解决方案，如果对象一次只能通过一个维度）。但是，如果对象可以对角移动，我看不出如何逃避同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:31:36.463

您需要的参数不仅仅是矩形，因为矩形只有位置和大小信息。如果矩形发生碰撞，则其中至少有一个必须在移动，但您不传递任何速度数据。也许尝试子类化矩形：

```
public class MovingRectange extends Rectangle {

  int xVelocity;
  int yVelocity;

  //etc
} 
```

然后将 MovingRectange 实例传递给 getCollisionSide ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:43:38.067

正如另一个答案指出的那样，您需要更多参数来获取该信息。

您可以通过多种方式解决此问题，我假设这两个三角形是可移动的（或至少其中一个）并且它们具有恒定的大小。在这种情况下，您可以例如将三角形的最后 5-10 个位置保存在队列中，并能够跟踪其移动。为了简单和抽象，您甚至可以将该队列保存在矩形类中。

另一个不需要保存先前位置的解决方案是更频繁地检查位置（或设置触发器以在发生位置更改时通知您）并限制矩形仅以小步长移动。如果您的触发器包含触发器，例如： rectMoved(rectangleId, newPosition) 那么您可以轻松知道哪个矩形撞到另一个矩形以及从哪一侧

干杯

# .net - 这是否可以将“If Then Else”作为方法折叠？

> ID：15070327
> 
> 赞同：2
> 
> 时间：2013-02-25T15:23:23.183
> 
> 标签：.net, visual-studio-2010

是否可以像使用方法一样在 Visual Studio 2010 中折叠代码块（如“if ... endif”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:25:46.610

是的。选择代码，然后点击`Ctrl+M,Ctrl+H`（在默认配置中）

或者，右键单击并转到大纲 - >隐藏选择。

这是有关此功能的[MSDN](http://msdn.microsoft.com/en-us/library/td6a5x4s%28v=vs.100%29.aspx)，显然不适用于 Visual Basic 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:34:53.153

正如其他人所说，这将允许您在 C# 中明显折叠一段代码。

`#region Name of region`

`#endregion`

**然而，在实践中通常不使用区域**

为什么？如果一个方法中有太多代码，您需要使用区域，那么您的方法可能太大，您应该考虑将其拆分为更小更易于管理的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:25:52.303

使用以下

**＃地区**

//你想要折叠的代码

**#endregion**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:26:46.750

不，据我所知，两种特定语言的条件语句（C#、VB 等）都不能折叠*，以防万一这就是您的意思（由于标记不佳，我无法判断），编译条件不能是，或者（不满足一个条件时除外）。

不过，您可以使用[“大纲”](http://msdn.microsoft.com/en-us/library/td6a5x4s%28v=vs.80%29.aspx)上下文菜单来获得处理此类事情的众多选项 - 没有很好的 UI 切换东西**。

您可以[“区域化”](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.71%29.aspx)您的代码，但这很容易被滥用。

[*至少不是“按标准”或没有我不知道的第三方扩展。]

[**直到勾勒出轮廓，然后您才拥有 UI 功能。]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:27:34.220

IDE 本身并不支持方法内结构的代码折叠 - 但`#Region`/`#End Region`实现了这一点。

# ios - 将 NSString 变量从 UIView 传递到 UITableView

> ID：15070330
> 
> 赞同：0
> 
> 时间：2013-02-25T15:23:30.080
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我试图从 UIViewController.m 上声明的 UIButton 获取当前标题，将其存储在 NSString 中，然后将其传递给 UITableView 控制器以将其用作 NSFetchRequest 的参数。

MainMenuViewController.h

```
 - (IBAction)salesMan:(UIButton *)sender;
    @property (nonatomic,strong) NSString *bPerson; 
```

MainMenuViewController.m

```
 #import "MainMenuViewController.h"
    #import "DisplayResultsViewController.h"

    // more code here...

    - (IBAction)salesMan:(UIButton *)sender {

        self.bPerson = sender.currentTitle;
    }
    @end 
```

DisplayResultsViewController.h

```
 @property (nonatomic, strong) NSString *sPerson; 
```

DisplayResultsViewController.m

```
 - (void)viewDidLoad
   {
        [super viewDidLoad];
        AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
        context = [appDelegate managedObjectContext];

        MainMenuViewController *mainMenu = [[MainMenuViewController alloc]init];

        self.sPerson = mainMenu.bPerson;
        NSLog(@" %@", self.sPerson);

    } 
```

问题是它没有传递 NSLog 返回“null”的变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:28:17.760

> MainMenuViewController *mainMenu = [[MainMenuViewController alloc]init];

在上面的调用行中创建了一个新实例`alloc`，mainMenu 被使用并`init`使用默认值进行了初始化。

> self.sPerson = mainMenu.bPerson;

`self.sPerson`从默认初始化设置一个值`mainMenu.bPerson`！

> NSLog(@" %@", self.sPerson);

正如预期的那样，将打印空值，因为没有设置任何值。

可能的解决方案：

您可以使用以下任何一种：

使变量全局、静态、单例，作为参数传递，作为通知发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:00:19.503

一种可能的解决方案（不是最好的）是

在 AppDelegate.h 中（从 MainMenuViewController.h 移出）

```
@property (nonatomic,strong) NSString *bPerson; 
```

在 MainMenuViewController.m

```
 - (IBAction)salesMan:(UIButton *)sender {
    AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
        [appDelegate setBPerson:sender.currentTitle];
    } 
```

在 DisplayResultsViewController.m

```
- (void)viewDidLoad
   {
        [super viewDidLoad];
        AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
        context = [appDelegate managedObjectContext];

        MainMenuViewController *mainMenu = [[MainMenuViewController alloc]init];

        self.sPerson = [appDelegate bPerson];
        NSLog(@" %@", self.sPerson);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:18:33.563

我不确定您是否正在使用 segue 并推送 DisplayResultsViewController 但是，在 MainMenuViewController 上的准备 segue 方法中，您可以获得目标视图控制器的实例，该实例将是 DisplayResultsViewController 并在那里设置 sPerson 属性：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    DisplayResultsViewController *drvc = (DisplayResultsViewController *)[segue destinationViewController];
    drvc.sPerson = self.bPerson
} 
```

你是如何在视图控制器之间转换的？

# c# - ConnectionString odbc 密码

> ID：15070336
> 
> 赞同：0
> 
> 时间：2013-02-25T15:23:41.477
> 
> 标签：c#, asp.net, odbc, connection-string, dsn

我对以下连接字符串有疑问：

```
ConfigurationSettings.AppSettings["connstr"] = "Dsn=dsn_name; 
Trusted_Connection=yes;Uid=usrName;Pwd=some+Password;"; 
```

这会引发身份验证失败的异常。问题在于用户密码内的“+”号。

任何人都知道如何转义密码中的特殊字符？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:49:27.803

关键是，整个事物都充当字符串，`Dsn=dsn_name; Trusted_Connection=yes;Uid=usrName;Pwd=some+Password;`因此，`+`充当字符，它不充当连接。

```
string s = String.Format("Dsn={0}; 
Trusted_Connection=yes;Uid={1};Pwd={2}","dsn_name","usrName",some+"Password") ; 
```

您可以尝试`String.Format`将字符串值注入适当位置的方法。我假设这`some`是一个字符串变量。

然后，在代码中赋值 s。

```
ConfigurationSettings.AppSettings["connstr"] =s; 
```

编辑：1.如果你用 ; 分隔它，你是否尝试将整个东西放在一行中？那么就会出现问题。

2.如果这首先是身份验证失败，您必须检查您的密码用户名是否正确。你必须在之后添加你的密码`pwd=`

# vba - 如何在 Outlook 2007 中合并电子邮件和约会格式的文本？

> ID：15070337
> 
> 赞同：0
> 
> 时间：2013-02-25T15:23:43.730
> 
> 标签：vba, outlook, ms-word, outlook-2007

我有一个培训系统，它通过电子邮件将 .vcs 文件发送给我，然后我必须通过一个烦人的过程将其导入 Outlook - 电子邮件的文本是大部分有趣的信息。

虽然我可以很容易地将 .vcs 文件添加到我的日历中，但我想将电子邮件的所有文本添加到会议通知中。

我也可以轻松替换所有文本，但我想将它们组合起来，因为我可能会不小心覆盖重要信息。

我目前正在使用 WordEditor 进程来访问格式化文本（这是我发现能够做到这一点的唯一方法，如果有更好的方法，我不依赖于此）。我无法在 Outlook 版本中真正找到任何方法来做我正在寻找的事情。

```
Dim emailInsp As Outlook.Inspector
Dim apptInsp As Outlook.Inspector
Dim emailDoc As Word.Document
Dim apptDoc As Word.Document
'add the text of the email
Set apptInsp = AppointmentItem.GetInspector
Set emailInsp = myMail.GetInspector
Set emailDoc = emailInsp.WordEditor
Set apptDoc = apptInsp.WordEditor

'this will replace the appointment text with email text
apptDoc.Content.FormattedText = emailDoc.Content.FormattedText

'I want to do something like one of these but neither works
'apptDoc.Content.FormattedText = emailDoc.Content.FormattedText + apptDoc.Content.FormattedText
'apptDoc.Range(0).FormattedText = emailDoc.Content.FormattedText 
```

*   如何在 Outlook 中合并电子邮件和约会中的格式化文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T11:25:16.370

我有点晚了；）

```
apptDoc.Content.FormattedText = emailDoc.Content.FormattedText & apptDoc.Content.Format 
```

如果您使用“&”可能会起作用，您需要将两个字符串组合在一起......

# html - 使用 jQuery ajax 时 Chrome 会删除表单元素

> ID：15070339
> 
> 赞同：10
> 
> 时间：2013-02-25T15:23:52.270
> 
> 标签：html, asp.net-mvc, google-chrome, jquery

我在动作的 JSON 响应中返回了一些简单的 HTML 标记。

这是完整的响应（为便于阅读添加了换行符）：

```
 {
        "Success":true,
        "Content":"\r\n
<div class=\"editor-form\">\r\n

<form action=\"/Blah/Blah/5104?id=9\" method=\"post\">

<input data-val=\"true\" data-val-number=\"The field Id must be a number.\" data-val-required=\"The Id field is required.\" id=\"Id\" name=\"Id\" type=\"hidden\" value=\"5104\" />

<input data-val=\"true\" data-val-number=\"The field Vat Rate must be a number.\" data-val-required=\"The Vat Rate field is required.\" id=\"VatRate\" name=\"VatRate\" type=\"hidden\" value=\"1.2000\" />

<div class=\"display-field\">\r\n\t

<label for=\"Price\">Price (Ex-VAT)</label>\r\n\t

<input class=\"text-box single-line\" data-val=\"true\" data-val-number=\"The field Price must be a number.\" data-val-required=\"The Price field is required.\" id=\"Price\" name=\"Price\" type=\"text\" value=\"92.50\" />\r\n\t

</div>\r\n

</form>
</div>",
"Data":null,
"Errors":null
} 
```

以下是我在成功回复后的处理方式：

```
$("#EditPriceDialog").html(data.Content).dialog(MyProject.UI.DialogOptions({ minWidth:380, minHeight:200, modal:true })) 
```

呈现标记时，缺少表单元素。表单内的元素仍然存在。这只发生在 Chrome 中。在 IE9 和 FF 19 中，表单元素就在那里。Chrome 有什么不同？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T15:32:51.547

如果表单元素已经被另一个表单元素包围，Chrome 会删除它。此外，ASP .Net 为其服务器的所有页面呈现表单标记，因此 Chrome 剥离了 data.Content 中的表单标记。我不认为 IE 或 firefox 有这种行为。

编辑：希望您会发现这很有用，[您如何克服 html 表单嵌套限制？](https://stackoverflow.com/questions/597596/how-do-you-overcome-the-html-form-nesting-limitation)

# java - 如何使用透明填充缩放 Graphics2D 图像

> ID：15070343
> 
> 赞同：4
> 
> 时间：2013-02-25T15:24:05.860
> 
> 标签：java, image, transparency, graphics2d, alpha-transparency

我正在尝试编写一个小方法，该方法获取`BufferedImage`图像和新的宽度和高度，并通过根据图像向左/右或上/下添加透明边框来缩放图像以保持纵横比。缩放效果很好，但对于我的生活，我无法让边框变得透明。

到目前为止，我[在 pastebin.com](http://pastebin.com/eFarSKqi)上发布了以下代码，它可以很好地进行缩放。

我已经阅读了很多手册和其他 SO 问题，但无济于事。我已经尝试过填充、合成类型、图像类型等的多种排列方式。有时我会得到蓝色背景，有时会得到白色背景，但它似乎从不透明。

```
BufferedImage newImg = new BufferedImage(newWidth, newHeight, img.getType());
Graphics2D g = newImg.createGraphics();
g.setColor(Color.WHITE);
g.fillRect(0, 0, newWidth, newHeight);
g.drawImage(img, x, y, x + scaledWidth, y + scaledHeight, 0, 0,
    currentWidth, currentHeight, Color.WHITE, null);
g.dispose();
return newImg; 
```

知道我需要做什么 Graphics2D 调用才能使`Color.WHITE`背景透明*并*在新图像上绘制旧图像吗？谢谢你的帮助。

**编辑：**

原来我遇到的问题是我试图用 JPEG 图像生成透明颜色。JPEG 不支持透明度。呃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:57:07.687

我刚刚尝试过它并且它有效。

只需替换`Color.WHITE`为`new Color(0, 0, 0, 0)`,`img.getType()`和`BufferedImage.TYPE_INT_ARGB`。

* * *

```
BufferedImage img = ImageIO.read(new File("image.png"));
BufferedImage outImage = scaleWithPadding(img, 300, 100);
ImageIO.write(outImage, "png", new File("newImage.png")); 
```

**图像.png：**（204x53）

![在此处输入图像描述](../Images/237a69babe4031f48777002c48aaed8b.png)

**新图像.png：**（300x100）

![在此处输入图像描述](../Images/7704b8ef8f78492d696585bcea4938c6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T15:37:03.363

我和你和你的帖子有同样的要求，这个关于[如何使颜色透明的](http://www.rgagnon.com/javadetails/java-0265.html)页面对我有很大帮助。

这是我的最终代码：

```
public BufferedImage getTransparentScaledImage(BufferedImage originalImage, int finalWidth, int finalHeight) {
    int originalWidth = originalImage.getWidth();
    int originalHeight = originalImage.getHeight();

    int newWidth;
    int newHeight;
    if (originalWidth == 0 || originalHeight == 0
            || (originalWidth == finalWidth && originalHeight == finalHeight)) {
        return originalImage;
    }

    double aspectRatio = (double) originalWidth / (double) originalHeight;
    double boundaryAspect = (double) finalWidth / (double) finalHeight;

    if (aspectRatio > boundaryAspect) {
        newWidth = finalWidth;
        newHeight = (int) Math.round(newWidth / aspectRatio);
    } else {
        newHeight = finalHeight;
        newWidth = (int) Math.round(aspectRatio * newHeight);
    }

    int xOffset = (finalWidth - newWidth) / 2;
    int yOffset = (finalHeight - newHeight) / 2;

    LoggerManager.getInstance().debug("frontoffice",
            "Image Servlet: [" + xOffset + "] [" + yOffset + "] [" + newWidth + "] [" + newHeight + "] [" + originalWidth + "] [" + originalHeight + "] [" + finalWidth + "] [" + finalHeight + "]");

    BufferedImage intermediateImage = new BufferedImage(finalWidth, finalHeight, BufferedImage.TYPE_INT_RGB);
    Graphics2D gi = intermediateImage.createGraphics();
    gi.setComposite(AlphaComposite.SrcOver);
    gi.setColor(Color.WHITE);
    gi.fillRect(0, 0, finalWidth, finalHeight);
    gi.drawImage(originalImage, xOffset, yOffset, xOffset + newWidth, yOffset + newHeight, 0, 0, originalWidth, originalHeight, Color.WHITE, null);
    gi.dispose();

    //if image from db already had a transparent background, it becomes black when drawing it onto another
    //even if we draw it onto a transparent image
    //so we set it to a specific color, in this case white
    //now we have to set that white background transparent
    Image intermediateWithTransparentPixels = makeColorTransparent(intermediateImage, Color.WHITE);

    //finalize the transparent image
    BufferedImage finalImage = new BufferedImage(finalWidth, finalHeight, BufferedImage.TYPE_INT_ARGB);
    Graphics2D gf = finalImage.createGraphics();
    gf.setComposite(AlphaComposite.SrcOver);
    gf.setColor(new Color(0, 0, 0, 0));
    gf.fillRect(0, 0, finalWidth, finalHeight);
    gf.drawImage(intermediateWithTransparentPixels, 0, 0, finalWidth, finalHeight, new Color(0, 0, 0, 0), null);
    gf.dispose();

    return finalImage;
}

public static Image makeColorTransparent(Image im, final Color color) {
    ImageFilter filter = new RGBImageFilter() {
        // the color we are looking for... Alpha bits are set to opaque
        public int markerRGB = color.getRGB() | 0xFF000000;

        public final int filterRGB(int x, int y, int rgb) {
            if ((rgb | 0xFF000000) == markerRGB) {
                // Mark the alpha bits as zero - transparent
                return 0x00FFFFFF & rgb;
            } else {
                // nothing to do
                return rgb;
            }
        }
    };

    ImageProducer ip = new FilteredImageSource(im.getSource(), filter);
    return Toolkit.getDefaultToolkit().createImage(ip);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T13:03:37.083

我实现了上述解决方案（或非常相似），如果您不使用，请注意

```
graphics2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);
graphics2D.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);
graphics2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON; 
```

您的图像将以非常差的质量生成（由于缩放）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-09T22:23:48.027

您的原始`drawImage()`方法没有透明背景，因为正在使用背景颜色。替换为以下内容：

```
 g.drawImage(img, x, y, x + scaledWidth, y + scaledHeight, 0, 0, currentWidth, currentHeight, null); 
```

# weblogic - 修复 BEA Weblogic Server 的服务器版本披露？

> ID：15070347
> 
> 赞同：0
> 
> 时间：2013-02-25T15:24:14.503
> 
> 标签：weblogic, bea

我们正在努力强化一些服务器，首先修复基本的服务器版本泄露漏洞。我们已设法找到常见 IIS 和 Apache Web 服务器的修复程序，但似乎没有获得任何关于如何在 WebLogic 服务器上修复此问题的参考或来源。我们能得到的最好的就是一些补丁，但除此之外，我们是否需要对配置文件进行任何更改以修复此问题或其他任何问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:11:39.743

我不确定您运行的是哪个版本的 WLS。为了将来参考，如果您在询问问题时添加产品版本会有所帮助。正如您的标题所说的“BEA Weblogic Server”，我认为您的版本已经很旧了。我能找到的最佳信息是[BEA WebLogic Server 和 Express HTTP 版本披露 (WeblogicHttpVersionDisclosure)](http://www.iss.net/security_center/reference/vuln/weblogic-http-version-disclosure.htm)。如您所见，它会影响非常旧的 WLS 版本，并且有可用的补丁程序。您还可以升级到包含该修复程序的更新的服务包。看起来不需要更改代码/配置。

# c# - XNA - 模拟雪

> ID：15070348
> 
> 赞同：8
> 
> 时间：2013-02-25T15:24:20.383
> 
> 标签：c#, xna, game-physics

这更像是一个关于我应该使用哪种模式/方法的建议的问题。我对这个问题做了一些调查——结果很差。

本质上，我有一个游戏的想法，其中关键的游戏机制是基于飘落的雪——或者，在这个想法游戏的情况下——下落的粒子。

雪/颗粒需要从屏幕上掉下来 - 但会堆积成堆。问题是，当它们达到一定角度时，我需要下雪以“涓涓细流”桩的两侧，并继续积累。有可能在成堆的雪下面开洞，雪必须掉出来——想想就像沙子从沙漏里掉下来一样。

我试过这是 Box2d - 很明显 Box2d 不是 10,000 个微小粒子的正确选择 - 持续很长时间。Box 2D 很快就死了。

我尝试在屏幕上绘制 1px 位图，但每次更新处理 10,000 次碰撞也证明性能不佳。

任何想法，将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:12:36.717

Is it possibly to monitor which particles are actually being processed by the physics engine? If so, is there a way whereby you can stop processing their physics, or severely limit what is processed, if their velocity is less than 0.01 or something of the like?

If you only process the particles that need processing, then you can have as many as you like, assuming that they are not all moving at once!

If this is still a problem, it sounds like a fluid dynamics solution may be more fitting, as fluid dynamics is basically a whole lot of small, moving particles.

Here is some interesting information on 2D fluid dynamics:

[http://www.ibiblio.org/e-notes/webgl/gpu/fluid.htm](http://www.ibiblio.org/e-notes/webgl/gpu/fluid.htm)

Your physics engine may already contain what you need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:09:29.267

好吧，就像您发现的那样，没有现有的库可以帮助您，除非它非常专门针对您的场景。不幸的是，XNA 没有太多东西可供选择，而且看起来现有的粒子系统库都不支持粒子物理。

所以你需要自己做很多工作。首先，您需要考虑您可以做的所有优化。就像评论说的那样，你不应该在每一帧的所有粒子之间运行检查。您应该使用基于点的碰撞检查，而不是物理引擎通常使用的更高级的东西。在这种情况下，您应该确保粒子始终具有相同的大小（相对于参考坐标系，也就是说，这并不意味着您不能进行缩放）。当然，你需要尽可能多地跳过碰撞检查——你知道静止的粒子永远不应该被检查，就像那些在所有侧面都有相邻粒子的粒子一样——这让我想到了网格。也许您可以将整个“世界”表示为一个网格，

无论如何，我意识到我有点漫无边际，但这是一个如此开放的主题...... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:04:45.013

在这个很酷的效果（用于 XNA 和 MonoGame） [http://www.int6.org/development/cool-effects-for-xna-monogame/](http://www.int6.org/development/cool-effects-for-xna-monogame/)

没有雪景效果，但您可以使用或修改一些兴趣效果。

# php - 设置::提取 cakephp

> ID：15070349
> 
> 赞同：0
> 
> 时间：2013-02-25T15:24:21.417
> 
> 标签：php, arrays, cakephp, cakephp-1.2

我在这个结构中有一个数组：

```
Array (
[0] => Array
    (
        [cd_bibliotem] => Array
            (
                [codiceBiblio] => 119179
                [codiceTematica] => 3106
            )

    )

[1] => Array
    (
        [cd_bibliotem] => Array
            (
                [codiceBiblio] => 119178
                [codiceTematica] => 3106
            )

    ) [...] 
```

我想要一个包含所有`codiceBiblio`值的数组，我试过这个：

```
$t = Set::extract($t, '{n}.cd_bibliotem'); 
```

但我得到：

```
Array (
[0] => Array
    (
        [codiceBiblio] => 119179
        [codiceTematica] => 3106
    ) [...] 
```

什么是仅获取 codeceBiblio 值的正确语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:54:48.467

## 只有你的论点是错误的

> 我想要一个包含所有 codiceBiblio 值的数组，我试过这个：
> 
> $t = Set::extract($t, '{n}.cd_bibliotem');

问题中指定的数组路径指向一个数组 - 只需将路径更改为指向特定值，您将获得一个平面数组作为返回值：

```
$t = Set::extract($t, '{n}.cd_bibliotem.codiceBiblio'); 
```

哪个会返回：

```
array(
    119179,
    119178,
    ...
) 
```

[这与文档中Set::extract](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::extract)和[Hash::extract](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#Hash::extract)的示例几乎相同（Hash 替换了 2.2 中的 Set，尽管两者都是为了向后兼容而存在的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:45:33.610

```
$t2 = Set::classicExtract($t,'{n}.cd_bibliotem.codiceBiblio') 
```

或者：

```
$t2 = array(null);

foreach($t as $thing)
{
    $t2[] = $thing['cd_bibliotem']['codiceBiblio'];
} 
```

# html - 像浏览器高度的其余部分一样设置 div 高度

> ID：15070362
> 
> 赞同：0
> 
> 时间：2013-02-25T15:24:52.357
> 
> 标签：html, css

**目标是在名为 ( divRestOfHeight** )的表中设置第二个 div以获取屏幕的其余高度我试图用“height:100%; position absolute”来做这件事，但它将该 div 设置为屏幕的所有高度和不只是休息...

我已经看到了 javascript 的例子，但我想知道是否有办法只用 css 来做。

看法：

```
<div id="divMain">
    <div>
        <table id="tTable">
                <tr>
                    <td>                            
                        <div id="divFixedHeight" style="height:200px;background-color: red;width: 100%;position: absolute;">

                        </div>
                    </td>
                </tr>            
                <tr>
                    <td>                        
                        <div id="divRestOfHeight" style="background-color:pink">                    

                        </div>
                    </td>
                </tr>
            </table>

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:32:52.000

你的意思是你想让它溢出到 divMain 之外到浏览器窗口的底部，或者你想让它填满 divMain 内的剩余空间？

据我所知，如果它们不填充页面，它不会填充浏览器的其余部分，同时嵌入 div 标签中。

尝试增加 divMain 的高度或将底部边距设为 0px 以拉伸它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:56:29.343

这段代码做你所追求的

```
<body style="padding: 0; margin: 0;">
  <div id="divMain" style="height: 100%;">                          
    <div id="divFixedHeight" style="height:200px;background-color: red;width: 100%;position: absolute;"></div>                      
    <div id="divRestOfHeight" style="background-color:green; height: 100%;"></div>
  </div>
</body> 
```

或者你真的需要那些桌子吗？它确实看起来像丑陋的 HTML：/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:19:26.390

要将块元素设置为屏幕的 100% 高度，您还必须将其所有父级的高度设置为 100% 高度。

例如，假设您有以下内容：

```
<div class="parent">
   <div class="child">
       some content
   </div>
</div> 
```

要使高度为`.child`100%，还`.parent`必须设置为 100% 高度。像这样：

```
html,
body,
.parent,
.child { height: 100%; } 
```

# jquery - jQuery - 如何删除跨度标签内的字符

> ID：15070368
> 
> 赞同：0
> 
> 时间：2013-02-25T15:25:06.913
> 
> 标签：jquery

我正在使用 jQuery 在 span 标签内回显页面标题。这很好用，除了每个页面在标题标签中都有网站标题*和*页面标题。我怎样才能删除它并简单地拥有页面标题？

例如：**Superlong Sites 的标题 - 关于我们**应该是：**关于我们**

我的代码：

```
jQuery(document).ready(function() {
    var href = jQuery(location).attr('href');
    var url = jQuery(this).attr('title');
    jQuery('#current_url').html(url);

    $('span#current_url').each(function() { // <---the code in question
        console.log($(this).text());
        var text = $(this).text().replace('Superlong Site\'s Title- ', '');
        $(this).text(text); 
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:28:31.317

根据破折号将文本拆分为一个数组，然后获取数组中的最后一项：

```
console.log($(this).text());
var text = $(this).text().split('-');
$(this).text(text[text.length-1]); 
```

如果需要，您也可以修剪前面的空间。

编辑 - 如果您希望它更快一点，您可以使用 RegEx 替换（感谢 f00bar）：

```
$(this).text($(this).text().replace(/^[^-]+- ?/,'')); 
```

如果您对 RegEx 感到满意，这会更快，但如果不是，那么您可能会考虑其他选项，因为它更明确且可维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:29:30.410

此代码段应该对您有所帮助:)

```
var url = jQuery(this).attr('title');
var shortUrl = url.substring(url.indexOf("- ") + 1, url.length);
jQuery('#current_url').html(shortUrl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:29:55.483

那是因为您的`replace`函数没有找到所需的字符串，您的标题是`Superlong Sites' Title -`并且您正在尝试替换`Superlong Site's Title-`.

```
$(document).ready(function() {
  $('#current_url').text(function(){
     return $('title').text().replace("Superlong Site's Title - ", '');
  })
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T15:32:10.190

尝试使用 .html() 函数设置跨度内容。

# vb.net - EventHandler 误解

> ID：15070373
> 
> 赞同：1
> 
> 时间：2013-02-25T15:25:14.643
> 
> 标签：vb.net, delegates

我已阅读以下问题，该问题询问了 Delegate 和 EventHandler 之间的区别：[EventHandler 和 delegate void() 之间](https://stackoverflow.com/questions/2036656/difference-between-eventhandler-and-delegete-void)的区别。今天下午我在这里读到了其他一些问题。

我知道委托是指向函数的指针并且是多播的。我读过事件处理程序“是”代表。我注意到它有这个签名：

```
Public Delegate Sub EventHandler ( _
    sender As Object, _
    e As EventArgs _
) 
```

但是，它不继承自 Delegate。我确实使用了 VB.NET 中的 Handles 关键字，例如 Handles Button1.Click。事件处理程序的意义何在？它只是一个有两个争论的代表，即对象和事件参数？为什么 EventHandler 类不继承自 Delegate？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:50:59.550

代表不是一个类。因此它不能被继承。

正如您所观察到的，EventHandler 只是一个具有众所周知的签名的委托，因此定义了一种统一的事件触发和处理方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:27:57.900

事件处理程序是在事件发生时要执行的例程。

委托是对例程的引用。

如果您没有处理程序，则委托无法引用任何内容。

委托是 VB 处理函数指针的简单方法。EventHandler 不需要从委托继承，因为它是一个函数，而不是一个指针。

# r - 使用“L'Ecuyer-CMRG”RNG 时，R 不会重置种子？

> ID：15070377
> 
> 赞同：9
> 
> 时间：2013-02-25T15:25:18.113
> 
> 标签：r, parallel-processing, prng

我在 R 中进行了一些并行模拟，我注意到使用“L'Ecuyer-CMRG”rng 时种子没有改变。我正在阅读“Parallel R”一书，每次调用 mclapply() 时，选项 mc.set.seed = TRUE 应该给每个工人一个新的种子。

这是我的代码：

```
library(parallel)
RNGkind("L'Ecuyer-CMRG")

mclapply(1:2, function(n) rnorm(n), mc.set.seed = TRUE)
[[1]]
[1] -0.7125037

[[2]]
[1] -0.9013552  0.3445190

mclapply(1:2, function(n) rnorm(n), mc.set.seed = TRUE)
[[1]]
[1] -0.7125037

[[2]]
[1] -0.9013552  0.3445190 
```

编辑：同样的事情发生在我的台式机和笔记本电脑上（都是 Ubuntu 12.04 LTS）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T20:32:25.513

在我看来，如果您想保证在 R 会话中对 mclapply 的后续调用获得不同的随机数，您需要使用不同的值调用 set.seed，删除全局变量“.Random.seed”，或者生成在再次调用 mclapply 之前，该 R 会话中至少有一个随机数。

这种行为的原因是 mclapply（例如与 mcparallel 不同）在内部调用 mc.reset.stream。这会将隐藏在“parallel”包中的种子重置为“.Random.seed”的值，因此如果再次调用 mclapply 时“.Random.seed”没有更改，则由 mclapply 启动的工作人员将获得与以前相同的随机数。

请注意，对于 clusterApply 和 parLapply 等函数，情况并非如此，因为它们使用持久性工作者，因此会继续从其 RNG 流中提取随机数。但是每次调用 mclapply 时都会派生新的工作人员，这可能会使这种行为变得更加困难。

这是一个将种子设置为不同值的示例，以便使用 mclapply 获得不同的随机数：

```
RNGkind("L'Ecuyer-CMRG")
set.seed(100)
mclapply(1:2, function(i) rnorm(2))
set.seed(101)
mclapply(1:2, function(i) rnorm(2)) 
```

这是删除“.Random.seed”的示例：

```
RNGkind("L'Ecuyer-CMRG")
mclapply(1:2, function(i) rnorm(2))
rm(.Random.seed)
mclapply(1:2, function(i) rnorm(2)) 
```

下面是在 master 上生成随机数的示例：

```
RNGkind("L'Ecuyer-CMRG")
mclapply(1:2, function(i) rnorm(2))
rnorm(1)
mclapply(1:2, function(i) rnorm(2)) 
```

我不确定哪个是最好的方法，但这可能取决于你想要做什么。

尽管看起来简单地多次调用 mclapply 而不更改“.Random.seed”会产生可重复的结果，但我不知道这是否得到保证。为了保证可重现的结果，我认为您需要调用 set.seed：

```
RNGkind("L'Ecuyer-CMRG")
set.seed(1234)
mclapply(1:2, function(i) rnorm(2))
set.seed(1234)
mclapply(1:2, function(i) rnorm(2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-04T22:55:41.460

您是否考虑过使用`clusterApply`而不是`mclapply`？我认为使用这个框架更容易保证可重现的示例。我附上一个例子。

```
library(parallel)

#---- creating local cluster ----

clust <- makeCluster(detectCores())

#---- seed ----

RNGkind(kind = "L'Ecuyer-CMRG")
set.seed(1234)
s <- .Random.seed
clusterSetRNGStream(cl = clust, iseed = s)

#---- generating random numbers ----

clusterApply(cl = clust, x = 1:2, fun = function(i) rnorm(2))
#> [[1]]
#> [1] -0.0514128  0.7344781
#> 
#> [[2]]
#> [1]  0.3946233 -0.6649782
clusterApply(cl = clust, x = 1:2, fun = function(i) rnorm(2))
#> [[1]]
#> [1] -1.57875323 -0.07533176
#> 
#> [[2]]
#> [1] -0.3698359 -0.1564795

#---- repeating the process ----

set.seed(1234)
s <- .Random.seed
clusterSetRNGStream(cl = clust, iseed = s)

clusterApply(cl = clust, x = 1:2, fun = function(i) rnorm(2))
#> [[1]]
#> [1] -0.0514128  0.7344781
#> 
#> [[2]]
#> [1]  0.3946233 -0.6649782
clusterApply(cl = clust, x = 1:2, fun = function(i) rnorm(2))
#> [[1]]
#> [1] -1.57875323 -0.07533176
#> 
#> [[2]]
#> [1] -0.3698359 -0.1564795

# same result 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 3 月 4 日创建)

```
devtools::session_info()
#> Session info -------------------------------------------------------------
#>  setting  value                       
#>  version  R version 3.5.1 (2018-07-02)
#>  system   x86_64, linux-gnu           
#>  ui       X11                         
#>  language (EN)                        
#>  collate  en_US.UTF-8                 
#>  tz       America/Sao_Paulo           
#>  date     2019-03-04
#> Packages -----------------------------------------------------------------
#>  package   * version date       source         
#>  backports   1.1.2   2017-12-13 CRAN (R 3.5.0) 
#>  base      * 3.5.1   2018-07-03 local          
#>  compiler    3.5.1   2018-07-03 local          
#>  datasets  * 3.5.1   2018-07-03 local          
#>  devtools    1.13.6  2018-06-27 CRAN (R 3.5.0) 
#>  digest      0.6.17  2018-09-12 cran (@0.6.17) 
#>  evaluate    0.11    2018-07-17 cran (@0.11)   
#>  graphics  * 3.5.1   2018-07-03 local          
#>  grDevices * 3.5.1   2018-07-03 local          
#>  htmltools   0.3.6   2017-04-28 CRAN (R 3.5.0) 
#>  knitr       1.20    2018-02-20 CRAN (R 3.5.0) 
#>  magrittr    1.5     2014-11-22 cran (@1.5)    
#>  memoise     1.1.0   2017-04-21 CRAN (R 3.5.0) 
#>  methods   * 3.5.1   2018-07-03 local          
#>  parallel  * 3.5.1   2018-07-03 local          
#>  Rcpp        0.12.18 2018-07-23 cran (@0.12.18)
#>  rmarkdown   1.10    2018-06-11 CRAN (R 3.5.1) 
#>  rprojroot   1.3-2   2018-01-03 CRAN (R 3.5.0) 
#>  stats     * 3.5.1   2018-07-03 local          
#>  stringi     1.2.4   2018-07-20 cran (@1.2.4)  
#>  stringr     1.3.1   2018-05-10 CRAN (R 3.5.0) 
#>  tools       3.5.1   2018-07-03 local          
#>  utils     * 3.5.1   2018-07-03 local          
#>  withr       2.1.2   2018-03-15 CRAN (R 3.5.0) 
#>  yaml        2.2.0   2018-07-25 cran (@2.2.0) 
```

# java - GWT 自定义字段序列化问题

> ID：15070383
> 
> 赞同：6
> 
> 时间：2013-02-25T15:25:31.647
> 
> 标签：java, gwt, serialization

考虑一个不可变类 Foo（一个由 ID 和名称组成的 POJO），需要对其进行序列化，以便将数据从服务器发送到客户端。

```
public final class Foo
{
    private final int m_id;
    private final String m_displayName;

    private Foo(final int id, final String displayName)
    {
        m_id = id;
        m_displayName = displayName;
    }

    public static Foo create(final int id, final String displayName)
    {
         // Some error checking occurs here.
         . . . 

         m_id = id;
         m_displayName = displayName;
    }

    // Getters etc.
    . . .
} 
```

Foo 对象的实例化通过静态工厂函数发生，并且由于对象是不可变的，因此没有零参数构造函数。

考虑一个不可变的类 Bar ，它包含一个数据成员 Foo 并为其实例化实现了 Builder 模式（从代码片段中省略，因为它与问题无关）。

```
public final class Bar
{
    private final Foo m_foo;
    . . .

    private Bar(final Builder builder)
    {
        . . .
    }

    public static Builder createBuilder()
    {
        return new Builder();
    }
} 
```

在评估了我应该如何序列化这个对象而不删除它的不变性或添加任何零参数构造函数以进行序列化的选择之后，我得出结论，我需要实现一个 CustomFieldSerializer（对于客户端和服务器）。

我遵循 GWT 的[服务器通信](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication?hl=el#DevGuideSerializableTypes)文章中编写的指南，并实现了我自己的 CustomFieldSerializer，如下所示。

```
// Contains the serialization logic of the class Bar.
public final class Bar_CustomFieldSerializerBase
{
    public static Bar instantiate(final SerializationStreamReader streamReader) throws SerializationException
    {
        return Bar.createBuilder().forFoo((Foo) streamReader.readObject()).build();
    }

    public static void serialize(final SerializationStreamWriter streamWriter, final Bar instance)
        throws SerializationException
    {
        // . . .
        streamWriter.writeObject(instance.getFoo());
    }

    public static void deserialize(final SerializationStreamReader streamReader, final Bar instance)
    {
        /*
         * Empty as everything is handled on instantiateInstance().
         */
    }
}

// The CustomFieldSerializer for class Bar. 
public class Bar_CustomFieldSerializer extends CustomFieldSerializer<Bar>
{
    public static void deserialize(final SerializationStreamReader streamReader, final Bar instance) throws SerializationException
    {
    Bar_CustomFieldSerializerBase.deserialize(streamReader, instance);
    }

    public static void serialize(final SerializationStreamWriter streamWriter, final Bar instance) throws SerializationException
    {
        Bar_CustomFieldSerializerBase.serialize(streamWriter, instance);
    }

    public static Bar instantiate(final SerializationStreamReader streamReader) throws SerializationException
    {
        return Bar_CustomFieldSerializerBase.instantiate(streamReader);
    }

    @Override
    public boolean hasCustomInstantiateInstance()
    {
        return true;
    }

    @Override
    public Bar instantiateInstance(final SerializationStreamReader streamReader) throws SerializationException
    {
        return instantiate(streamReader);
    }

    @Override
    public void deserializeInstance(final SerializationStreamReader streamReader, final Bar instance) throws SerializationException
    {
        deserialize(streamReader, instance);
    }

    @Override
    public void serializeInstance(final SerializationStreamWriter streamWriter, final Bar instance) throws SerializationException
    {
        serialize(streamWriter, instance);
    }

// Server side CustomFieldSerializer for class Bar.
public class Bar_ServerCustomFieldSerializer extends ServerCustomFieldSerializer<Bar>
{
    public static void deserialize(ServerSerializationStreamReader streamReader, Bar instance,
        Type[] expectedParameterTypes, DequeMap<TypeVariable<?>, Type> resolvedTypes) throws SerializationException
    {
    /*
     * Empty as everything is handled on instantiateInstance().
     */
    }

    @Override
    public Bar instantiateInstance(ServerSerializationStreamReader streamReader) throws SerializationException
    {
        return Bar_CustomFieldSerializerBase.instantiate(streamReader);
    }

    @Override
    public void deserializeInstance(ServerSerializationStreamReader streamReader, Bar instance,
        Type[] expectedParameterTypes, DequeMap<TypeVariable<?>, Type> resolvedTypes) throws SerializationException
    {
        deserialize(streamReader, instance, expectedParameterTypes, resolvedTypes);
    }

    @Override
    public void deserializeInstance(SerializationStreamReader streamReader, Bar instance) throws SerializationException
    {
        Bar_CustomFieldSerializerBase.deserialize(streamReader, instance);
    }

    @Override
    public void serializeInstance(SerializationStreamWriter streamWriter, Bar instance) throws SerializationException
    {
        Bar_CustomFieldSerializerBase.serialize(streamWriter, instance);
    }
} 
```

由于类 bar 包含一个需要序列化的 Foo 对象，我继续并实现了另一组 CustomFieldSerializers，这一次为类 Foo 遵循相同的模式，用于客户端和服务器。

当 Bar 类发生序列化时会出现问题，特别是在这一点上：

```
public static void serialize(final SerializationStreamWriter streamWriter, final Bar instance)
        throws SerializationException
{
   // . . .
   streamWriter.writeObject(instance.getFoo());
} 
```

我收到的异常消息如下：

```
[WARN] Exception while dispatching incoming RPC call com.google.gwt.user.client.rpc.SerializationException: Type 'ui.shared.models.fooItems.Foo' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized. 
```

似乎*writeObject()*无法序列化 Foo 类型的对象，因为 Foo 类不属于白名单项，即使客户端和服务器都提供了自定义序列化程序。

我总是可以跳过*writeObject()*调用并为每个 Foo 的数据成员调用*writeInt()*和*writeString()*（运行良好），但我更愿意让*writeObject()*工作。我提出的解决方案*很*容易出现维护错误，因为将来 Foo 类的任何更改都必须反映在 Foo 的序列化程序（显而易见）和 Bar 的序列化程序（不太明显）上。

我已经尝试了几乎可以在网上找到的任何东西，从在 Foo 和 Bar 上实现*isSerializable*接口（没有任何区别，也不应该有任何区别，因为提供自己的自定义序列化程序的 AFAIK 类不需要遵守这条规则），甚至提供一个私有的零参数构造函数（这也不应该有任何区别，因为自定义字段序列化程序的实例化函数应该通过静态工厂处理这个问题）。

为什么 Foo 类没有列入白名单？我是否遗漏了一些明显的东西或误解了一些东西？

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:42:27.303

那么这里的问题是，很可能您从未在代码中的任何地方明确提及，`Foo`该类曾经发送到服务器。例如，您只有这样的服务方法：

```
interface MyService {

   Foo getFoo(Bar bar); 

} 
```

要使用`writeObject`，您需要明确提示 GWT，将`Foo`类包含到反序列化列表中，方法是添加一个以`Foo`类为参数的新服务方法：

```
interface MyService {

   Foo getFoo(Bar bar); 

   void setFoo(Foo foo);// letting GWT know that we might send Foo object over the wire, you don't have to ever call this method in your app, or implement it in some meaningful way, just let it be there

} 
```

您不必在您的应用程序中调用此方法，或为其提供任何实现。但否则它将无法正常工作。几乎没有其他方法可以为 GWT 创建此提示，但想法是相同的，您将为 GWT-RPC 显式公开 Foo 类。另请记住，如果您`Bar`在多个服务中使用类，则必须将此类方法添加到使用`Bar`类的每个服务中

**现在，详细说明为什么会发生这种情况。**在服务器端，GWT-RPC 跟踪两个列表：可以序列化的对象和可以反序列化的对象。此信息取自 RPC 策略清单。在我的第一个示例中，我只提到`Bar`了对象作为可以发送到服务器的东西。但是由于您已经在类上定义了一个自定义字段序列化`Bar`器，GWT 不会对 执行任何分析`Bar`，因此它不知道实例`Foo`可能会发送到服务器，因此它决定服务器端不需要反序列化器`Foo`。因此，当您尝试通过网络发送实例时`Bar`，服务器会尝试反序列化它，但是由于`readObject`在自定义序列化程序中使用，它也尝试为 Foo 查找反序列化程序，但不允许这样做，因此整个反序列化过程失败。如果您添加额外的服务方法，它只`Foo`通过线路发送对象，GWT 会意识到这样的对象也可以发送到服务器，因此它也标记`Foo`为可反序列化。

这非常令人困惑，我个人认为应该将具有自定义序列化的类自动添加到所有白名单中，但事实就是如此。

**编辑**

另一个（没有愚蠢的空方法的非 hacky 解决方案）将使用专门的 DTO 层进行通信（例如，仅具有默认公共构造函数的 POJO），但在您需要发送具有大量交叉的复杂对象图的情况下可能会很困难参考。

# android - 检测在 onSingleTapConfirmed 方法中点击了哪个 View

> ID：15070386
> 
> 赞同：0
> 
> 时间：2013-02-25T15:25:44.393
> 
> 标签：android, view, gesture

我的屏幕上有很多视图（FrameLayouts） - 每个都有一个 SimpleOnGestureListener 设置为 onTouchListener。

当我点击其中一个视图时，我正确地触发了 onSingleTapConfirmed 方法，但我无法确定如何确定点击了哪个视图？

有没有一种简单的方法可以从 MotionEvent 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:43:49.287

> 我的屏幕上有很多视图（FrameLayouts） - 每个都有一个 SimpleOnGestureListener 设置为 onTouchListener。

在 OnTouchListener 中保存对 View 的引用，然后当手势回调触发时，您就会知道哪个 View 被触摸了：

```
public boolean onTouch(View v, MotionEvent event) {
    // Remember which View was touched
    mCurrent = v; 

    // Pass event to gesture listener, etc
} 
```

现在使用`mCurrent`in`onSingleTapConfirmed()`和任何其他方法。

# c++ - 二进制读/写到 std::stringstream

> ID：15070390
> 
> 赞同：1
> 
> 时间：2013-02-25T15:25:51.473
> 
> 标签：c++, visual-studio-2010

我有以下代码试图将无符号整数和 std::wstring 读/写到 std::stringstream。

```
#include <memory>
#include <iostream>
#include <vector>
#include <sstream>

class SerializationException : public std::runtime_error
{
public:
    SerializationException( const char* msg ) : std::runtime_error( msg ) { }
};

class Serialization
{
public:
    static void Write( std::ostream& stream, const std::wstring& item )
    {
        Write(stream, eStdWString);
        Write(stream, item.length());
        stream.write( reinterpret_cast< const char* >( item.c_str() ), item.length() );
    }

    static std::wstring ReadWString( std::istream& stream )
    {
        const unsigned int type = ReadUInt32(stream);
        if ( type != eStdWString )
        {
            throw SerializationException("Expected eStdWString");
        }
        const unsigned int length = ReadUInt32(stream);
        std::vector< wchar_t > tmpBuf( length );
        stream.read( reinterpret_cast< char* > ( tmpBuf.data() ), length );
        return std::wstring( tmpBuf.begin(), tmpBuf.end() );
    }

    static void Write( std::ostream& stream, const unsigned int& item )
    {
        const unsigned int type = eUInt32;
        stream.write( reinterpret_cast< const char* >( &type ), sizeof(type) );
        stream.write( reinterpret_cast< const char* >( &item ), sizeof(item) );
    }

    static unsigned int ReadUInt32( std::istream& stream )
    {
        const unsigned int type = 0;
        stream.read( reinterpret_cast< char* > ( type ), sizeof(type) );
        if ( type != eUInt32 )
        {
            throw SerializationException("Expected eUInt32");
        }
        const unsigned int tmp = 0;
        stream.read( reinterpret_cast< char* > ( tmp ), sizeof(tmp) );
        return tmp;
    }

private:
    enum eTlvBlockTypes
    {
        eStdWString,
        eUInt32
    };
};

int main(int, char**)
{
    std::wstring myStr = L"HelloWorld!";
    int myInt = 0xdeadbeef;

    try
    {
        std::stringstream ss( std::ios_base::out | std::ios_base::in | std::ios_base::binary );
        Serialization::Write( ss, myStr );
        Serialization::Write( ss, myInt );

        myInt = Serialization::ReadUInt32( ss );
        myStr = Serialization::ReadWString( ss );
    }
    catch (const std::runtime_error& ex)
    {
        std::cout << ex.what() << std::endl;
    }
    return 0;
} 
```

然而，在读回流时，我得到一个断言失败，因为流是 NULL，有人可以解释这是为什么，以及如何解决它？

编辑：断言失败是 ReadUInt32() 的第二行。

```
stream.read( reinterpret_cast< char* > ( type ), sizeof(type) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:36:28.097

你需要解决这个问题：

```
stream.read( reinterpret_cast< char* > ( type ), sizeof(type) ); 
```

对此：

```
stream.read( reinterpret_cast< char* > ( &type ), sizeof(type) ); 
```

它再次表明 reinterpret_cast 是危险的

# ios - UIWebView / Facebook OAuth 对话框 - 显示“未登录”

> ID：15070392
> 
> 赞同：4
> 
> 时间：2013-02-25T15:26:00.733
> 
> 标签：ios, facebook, uiwebview, facebook-oauth

## 问题

在我的 iOS 应用中，用户通过 UIWebView 使用 Facebook 登录。有时，Facebook 会显示“未登录”消息，而不是登录页面：

![在此处输入图像描述](../Images/8377e27ac7f7d5c0bf4ecb8863596947.png)

我每次都可以用几行代码重现这个问题：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    UIWebView* web = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
    [self.window addSubview:web];
    NSString* url = @"https://m.facebook.com/dialog/oauth?client_id=9999999999999999&redirect_uri=https%3A%2F%2Fmysite.com%2FApp%2FFacebookLogin%2FCallback&response_type=code&scope=read_stream%2Cuser_about_me%2Coffline_access%2Cpublish_actions%2Cpublish_stream%2Cemail";        
    [web loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]]];
} 
```

## 我试过的

如果我在移动 safari 中打开相同的 URL，`[[UIApplication sharedApplication] openUrl:...]`那么它就可以工作。它显示了一个没有问题的登录页面。

如果我将范围更改为“电子邮件”，那么它可以在 Web 视图中正常工作。如果我通过添加一个项目来更改它，那么它仍然会中断。

我已尝试[清除 UIWebView 的 cookie](https://stackoverflow.com/a/4471747/193896)和[缓存](https://stackoverflow.com/a/5902358/193896)，并且已删除该应用程序并重新安装它以尝试清除所有内容。这些都不起作用。

`&state=abcd`如果我通过添加强制浏览器重新加载请求来更改 url ，它仍然会中断。这没有效果。

如果我使用域`www.facebook.com`而不是`m.facebook.com`那么它可以工作。

如果我登录`shouldstartloadwithrequest`UIWebView，它会显示 url 加载然后再次加载。换句话说，facebook 似乎正在重定向到它自己。

此外，我已经向 Facebook ( [https://developers.facebook.com/bugs/452609994811240](https://developers.facebook.com/bugs/452609994811240) ) 提交了一个错误，他们已将其移至“中等”，因此这可能只是他们系统上的错误。

知道如何在不弄乱范围的情况下显示登录页面吗？

# perl - 从 Perl 中的 CSV 文件中获取信息

> ID：15070393
> 
> 赞同：0
> 
> 时间：2013-02-25T15:26:01.950
> 
> 标签：perl

Perl 中可以通过 CSV 文件并创建数学计算的最简单代码是什么？
更具体地说：
我有一个 CSV 文件，其中包含：

```
Input       Execution       Output  Total
608         124800          1856    127264
512         124960          1920    127392
864         124992          1888    127744 
```

我想计算每列的标准偏差。（对于输入\执行\输出\总计）
假设这个文件位于：`myDocuments\me\info.csv`

我已经成功编写了一个循环 csv 文件并计算列输入的标准偏差的函数。但是，如果我希望它是一个通用函数，我可以从代码中的多个位置调用它，该函数接收诸如“输入”或“执行”之类的字符串，该函数应该对其进行计算 - 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:03:18.667

这将做你需要的

```
use strict;
use warnings;

use List::Util 'sum';

my @data;
while (<DATA>) {
  push @data, [ split ];
}

my $headers = shift @data;
my $n = @data;

for my $i ( 0 .. $#{$data[0]} ) {

  my $mean = sum(map $_->[$i], @data) / $n;
  my $stddev = sqrt(sum(map { ($_->[$i] - $mean) ** 2 } @data) / $n );

  printf "%-9s: Mean %.3f,  Standard Deviation %.3f\n",
      $headers->[$i], $mean, $stddev;
}

__DATA__
Input       Execution       Output  Total
608         124800          1856    127264
512         124960          1920    127392
864         124992          1888    127744 
```

**输出**

```
Input    : Mean 661.333,  Standard Deviation 148.569
Execution: Mean 124917.333,  Standard Deviation 83.989
Output   : Mean 1888.000,  Standard Deviation 26.128
Total    : Mean 127466.667,  Standard Deviation 202.947 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:52:27.363

大多数人只是使用 拼凑出一个解析器，但是已经存在用于解析和生成 CSV（和制表符分隔的数据）[`split`](http://perldoc.perl.org/functions/split.html)的快速而强大的[轮子。](http://search.cpan.org/perldoc?Text%3a%3aCSV_XS)

但是你所问的和你所拥有的似乎是不同的东西。您发布的不是 CSV，Text::CSV_XS 不会这样做。但实际上，这很简单。

您可以使用解析该行

```
my @fields = split(' ', $line); 
```

您可以使用重新创建文件（如有必要）

```
printf($fh "%-11d %-15d %-7d %d\n", @fields); 
```

* * *

所以你的问题不在于对任意列进行操作。这意味着您需要拥有可以按名称访问的数据列。这对数组的哈希大喊大叫..

```
 my $headers = <$fh>;
 my @headers = split ' ', $header;

 my %data;
 while (<$fh>) {
    my @row = split;
    for (0..$#header) {
       push @{ $data{ $headers[$_] } }, $row[$_];
    }
 }

 some_func( @{ $data{Execution} } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:15:27.333

```
the function is:
 sub parse_standard 
{

    my $filename = "myDocuments\\me\\info.csv";
        #first, calculate the Avg and the number of rows
    open(INPUT, $filename) or die "Cannot open $filename";

    # Read the header line.
    my $line = <INPUT>;
    my $sum = 0 ;
    my $counter = 0;
    #Read the lines one by one.
    while($line = <INPUT>)
    {
        chomp($line);
        my ($Input,$Execution,$Output,$Total,$SelfTest,$Log_Location,$Log_Name) = split(',', $line);
        $sum = $sum + $Input;
        $counter = $counter +1;

    }

    $avg = $sum / $counter ;
#second ,  calculate the standard deviation
    open(INPUT, $filename) or die "Cannot open $filename";
    my $line = <INPUT>;
    my $sum = 0 ;
    #Read the lines one by one.
    while($line = <INPUT>)
    {
        chomp($line);
        my ($Input,$Execution,$Output,$Total,$SelfTest,$Log_Location,$Log_Name) = split(',', $line);
        $diff = ($Input-$avg);      
        $square = $diff * $diff ;       
        $sum = $sum + $square;

    }

    $tosqrt = $sum / $counter;
    $answer = sqrt($tosqrt);
    print "standard deviation is $answer\n";
    close(INPUT);
}

parse_standard(); 
```

# jquery - 是什么导致了这个位置的变化？jQuery动画

> ID：15070394
> 
> 赞同：0
> 
> 时间：2013-02-25T15:26:01.460
> 
> 标签：jquery

该脚本运行良好：

```
var $count = 4;
var $row = 10;

function across() {
    var $active = $('#slideshow .active .current');
    var $next = $active.next();

    $next.addClass('current');
    $active.animate({ left: '+=100px' }, 800, 'swing').removeClass('current');
    $row += 10;
    $count--;

    if ($count == 0) { 
        $count = 4;
        $row = 10;
        down();
        $($active).stop();
        $('#slideshow .active .bed').animate({ left: '-=100px' }, 1);
        $('.div .bed:first-child').addClass('current');

    }
}
function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();

    $next.fadeIn("slow").addClass('active');
    $active.fadeOut("slow").removeClass('active');

    if (!$next.length) {
        $("#slideshow .div:first-child").fadeIn("slow").addClass('active');
    }
}
$(function() {
  setInterval(across, 1000);
}); 
```

[http://jsfiddle.net/QSfgG/30/](http://jsfiddle.net/QSfgG/30/)

但有一个问题。

在绿色的父方格上，橙色、紫色和灰色的 div 向右滑动，而在其他方格上，div 仅勉强向左滑动。

这与脚本第 16 行的 down() 函数有关。当它被取出时，所有的 div 都以相同的量滑动。但是，我不能省略 down()，因为我需要先调用它

```
$('#slideshow .active .bed').animate({ left: '-=100px' }, 1);
$('.div .bed:first-child').addClass('current'); 
```

在第 18 行和第 19 行。这样用户就不会看到 div 快速回到原来的位置。澄清一下，我需要橙色、紫色和灰色的 div 以相同的量滑动，**并且我需要父 div 在用户看到 div 迅速回到其原始位置之前淡出。**

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:36:52.307

问题在于这一行：

`$('#slideshow .active .bed').animate({ left: '-=100px' }, 1);`

基本上，您将`left`所有更改`.bed`为 -120px（将其完全移出屏幕）。

我建议添加一个独特的类，对其进行动画处理，然后在计数后将其删除。这是一个例子：

```
var $count = 4;
var $row = 10;

function across() {
    var $active = $('#slideshow .active .current');
    var $next = $active.next();
    $active.addClass('move'); //add class

    $next.addClass('current');
    $active.animate({ left: '+=100px' }, 800, 'swing').removeClass('current');
    $row += 10;
    $count--;

    if ($count == 0) { 
        $count = 4;
        $row = 10;
        down();
        $($active).stop();
        $('.move').animate({ left: '-=100px' }, 1); //animate class
        $('.div .bed:first-child').addClass('current');
        $('.move').removeClass('move'); //remove class
    }
}
function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();

    $next.fadeIn("slow").addClass('active');
    $active.fadeOut("slow").removeClass('active');

    if (!$next.length) {
        $("#slideshow .div:first-child").fadeIn("slow").addClass('active');
    }
}
$(function() {
  setInterval(across, 1000);
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/QSfgG/42/](http://jsfiddle.net/dirtyd77/QSfgG/42/)

但是，您也可以使用数组来实现它。

```
var $count = 4;
var $row = 10;
var $divs =[]; //make array to hold "beds"

function across() {
    var $active = $('#slideshow .active .current');
    var $next = $active.next();
    $divs.push($active); //push active "bed"

    $next.addClass('current');
    $active.animate({ left: '+=100px' }, 800, 'swing').removeClass('current');
    $row += 10;
    $count--;

    if ($count == 0) { 
        $count = 4;
        $row = 10;
        down();
        $($active).stop();
        for(var a = 0; a < $divs.length; a++){
         $($divs[a]).animate({ left: '-=100px' }, 1) //move each "bed" in array 100px
        }
        $divs=[]; //reset array
        $('.div .bed:first-child').addClass('current');

    }
}
function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();

    $next.fadeIn("slow").addClass('active');
    $active.fadeOut("slow").removeClass('active');

    if (!$next.length) {
        $("#slideshow .div:first-child").fadeIn("slow").addClass('active');
    }
}
$(function() {
  setInterval(across, 1000);
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/QSfgG/40/](http://jsfiddle.net/dirtyd77/QSfgG/40/)

# php - 如何使用我创建的算法对文件进行哈希处理

> ID：15070395
> 
> 赞同：0
> 
> 时间：2013-02-25T15:26:03.193
> 
> 标签：php, hash, cryptography

我正在尝试使用我刚刚创建的算法（MD9）对文件（称为 hash.txt）进行哈希处理。

这是代码

```
<?php

        function MD9($m)
        {
            static $s = array(
                 41,  46,  67, 201, 162, 216, 124,   1,  61,  54,  84, 161, 236, 240, 6,
                 19,  98, 167,   5, 243, 192, 199, 115, 140, 152, 147,  43, 217, 188,
                 76, 130, 202,  30, 155,  87,  60, 253, 212, 224,  22, 103,  66, 111, 24,
                138,  23, 229,  18, 190,  78, 196, 214, 218, 158, 222,  73, 160, 251,
                245, 142, 187,  47, 238, 122, 169, 104, 121, 145,  21, 178,   7,  63,
                148, 194,  16, 137,  11,  34,  95,  33, 128, 127,  93, 154,  90, 144, 50,
                 39,  53,  62, 204, 231, 191, 247, 151,   3, 255,  25,  48, 179,  72, 165,
                181, 209, 215,  94, 146,  42, 172,  86, 170, 198,  79, 184,  56, 210,
                150, 164, 125, 182, 118, 252, 107, 226, 156, 116,   4, 241,  69, 157,
                112,  89, 100, 113, 135,  32, 134,  91, 207, 101, 230,  45, 168,   2, 27,
                 96,  37, 173, 174, 176, 185, 246,  28,  70,  97, 105,  52,  64, 126, 15,
                 85,  71, 163,  35, 221,  81, 175,  58, 195,  92, 249, 206, 186, 197,
                234,  38,  44,  83,  13, 110, 133,  40, 132,   9, 211, 223, 205, 244, 65,
                129,  77,  82, 106, 220,  55, 200, 108, 193, 171, 250,  36, 225, 123,
                  8,  12, 189, 177,  74, 120, 136, 149, 139, 227,  99, 232, 109, 233,
                203, 213, 254,  59,   0,  29,  57, 242, 239, 183,  14, 102,  88, 208, 228,
                166, 119, 114, 248, 235, 117,  75,  10,  49,  68,  80, 180, 143, 237,
                 31,  26, 219, 153, 141,  51, 159,  17, 131, 20
            );

            // Step 1\. Append Padding Bytes
            $pad = 16 - (strlen($m) & 0xF);
            $m.= str_repeat(chr($pad), $pad);

            $length = strlen($m);

            // Step 2\. Append Checksum
            $c = str_repeat(chr(0), 16);
            $l = chr(0);
            for ($i = 0; $i < $length; $i+= 16) {
                for ($j = 0; $j < 16; $j++) {
                    // RFC1319 incorrectly states that C[j] should be set to S[c xor L]
                    //$c[$j] = chr($s[ord($m[$i + $j] ^ $l)]);
                    // per <http://www.rfc-editor.org/errata_search.php?rfc=1319>, however, C[j] should be set to S[c xor L] xor C[j]
                $c[$j] = chr($s[ord($m[$i + $j] ^ $l)] ^ ord($c[$j]));
                $l = $c[$j];
            }
        }
        $m.= $c;

        $length+= 16;

        // Step 3\. Initialize MD Buffer
        $x = str_repeat(chr(0), 48);

        // Step 4\. Process Message in 16-Byte Blocks
        for ($i = 0; $i < $length; $i+= 16) {
            for ($j = 0; $j < 16; $j++) {
                $x[$j + 16] = $m[$i + $j];
                $x[$j + 32] = $x[$j + 16] ^ $x[$j];
            }
            $t = chr(0);
            for ($j = 0; $j < 18; $j++) {
                for ($k = 0; $k < 48; $k++) {
                    $x[$k] = $t = $x[$k] ^ chr($s[ord($t)]);
                    //$t = $x[$k] = $x[$k] ^ chr($s[ord($t)]);
                }
                $t = chr(ord($t) + $j);
            }
        }

        // Step 5\. Output
        return bin2hex(substr($x, 0, 16));
    }

    ?> 
```

当我尝试跑步时

```
<?php

include 'md9.php';

class hashing {
     public static function filehash($file,$hash) {
     if (file_exists($file)) {
         return hash($hash,file_get_contents($file));
     }
     else {
         return "Error Occurred: File Does Not Exist";
     }
 }
 }

  echo hashing::filehash("hash.txt","md9")."<br />";

?> 
```

收到错误“警告：hash() [function.hash]：未知散列算法：md9”

我尝试过使用相同的算法对一串字符进行散列处理，并且效果很好。

我不知道算法和散列文件有什么问题。

请有人帮我解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:30:38.010

如果您阅读文档，这里是[链接](http://php.net/manual/en/function.hash.php)，您会发现您不能只插入您决定的任何算法。“md9”对 PHP 没有任何意义。这是你编造的东西。您需要自己实现该方法，对文件进行哈希处理，然后从 filehash 中调用该方法。虽然，一个忠告。编写自己的哈希算法并不是最安全的方法。已建立的散列算法（sha1、sha-2）被证明是安全的。

# c - LCD 库 - MPLAB X

> ID：15070398
> 
> 赞同：1
> 
> 时间：2013-02-25T15:26:12.100
> 
> 标签：c, pic, microchip, lcd, mplab

我正在尝试理解 Pic16F887 上的这个 LCD 示例； [http://www.mikroe.com/chapters/view/17/chapter-4-examples/#c4v12](http://www.mikroe.com/chapters/view/17/chapter-4-examples/#c4v12)

但编译器不断向我显示错误：

```
lcdpic16.c:32: warning: function declared implicit int
lcdpic16.c:33: warning: function declared implicit int
lcdpic16.c:33: error: undefined identifier "_LCD_CURSOR_OFF"
lcdpic16.c:34: error: undefined identifier "_LCD_CLEAR"
lcdpic16.c:36: warning: illegal conversion between pointer types
pointer to const unsigned char -> pointer to unsigned char
lcdpic16.c:37: warning: function declared implicit int
lcdpic16.c:38: warning: illegal conversion between pointer types
pointer to const unsigned char -> pointer to unsigned char
lcdpic16.c:43: warning: function declared implicit int
lcdpic16.c:45: warning: illegal conversion between pointer types
pointer to const unsigned char -> pointer to unsigned char
lcdpic16.c:48: warning: function declared implicit int
lcdpic16.c:54: warning: function declared implicit int
lcdpic16.c:55: warning: function declared implicit int
(908) exit status = 1
make: *** [build/default/production/lcdpic16.p1] Error 1

BUILD FAILED (exit value 2, total time: 22s) 
```

源代码 (lcdp16.c)

```
/*Header******************************************************/
#include <pic16f887.h>

// LCD module connections
#define LCD_RS RB4
#define LCD_RS RB4
#define LCD_EN RB5
#define LCD_D4 RB0
#define LCD_D5 RB1
#define LCD_D6 RB2
#define LCD_D7 RB3
#define LCD_RS_Direction TRISB4
#define LCD_EN_Direction TRISB5
#define LCD_D4_Direction TRISB0
#define LCD_D5_Direction TRISB1
#define LCD_D6_Direction TRISB2
#define LCD_D7_Direction TRISB3
// End LCD module connections

unsigned char ch;                    //
unsigned int adc_rd;                 // Declare variables
char *text;                          //
long tlong;                          //

void main() {
    INTCON = 0;                      // All interrupts disabled
    ANSEL = 0x04;                    // Pin RA2 is configured as an analog input
    TRISA = 0x04;
    ANSELH = 0;                      // Rest of pins are configured as digital

    Lcd_Init();                      // LCD display initialization
    Lcd_Cmd(_LCD_CURSOR_OFF);        // LCD command (cursor off)
    Lcd_Cmd(_LCD_CLEAR);             // LCD command (clear LCD)

    text = "mikroElektronika";       // Define the first message
    Lcd_Out(1,1,text);               // Write the first message in the first line
    text = "LCD example";            // Define the second message
    Lcd_Out(2,1,text);               // Define the first message

    ADCON1 = 0x82;                   // A/D voltage reference is VCC
    TRISA = 0xFF;                    // All port A pins are configured as inputs
    Delay_ms(2000);

    text = "voltage:";               // Define the third message

    while (1) {
        adc_rd = ADC_Read(2);        // A/D conversion. Pin RA2 is an input.
        Lcd_Out(2,1,text);           // Write result in the second line
        tlong = (long)adc_rd * 5000; // Convert the result in millivolts
        tlong = tlong / 1023;        // 0..1023 -> 0-5000mV
        ch = tlong / 1000;           // Extract volts (thousands of millivolts)
                                     // from result
        Lcd_Chr(2,9,48+ch);          // Write result in ASCII format
        Lcd_Chr_CP('.');
        ch = (tlong / 100) % 10;     // Extract hundreds of millivolts
        Lcd_Chr_CP(48+ch);           // Write result in ASCII format
        ch = (tlong / 10) % 10;      // Extract tens of millivolts
        Lcd_Chr_CP(48+ch);           // Write result in ASCII format
        ch = tlong % 10;             // Extract digits for millivolts
        Lcd_Chr_CP(48+ch);           // Write result in ASCII format
        Lcd_Chr_CP('V');
        Delay_ms(1);
    }
} 
```

谁能向我解释发生了什么？我应该创建一个自定义 LCD 库，以便编译器可以识别类似`Lcd_Init()`或什么的方法吗？（Windows 7 / XC8 / MPLAB X）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T16:12:42.273

简单的！您正在使用 MPLAB，但您正在查看的库旨在用于名为 MikroC 的完全不同的 IDE。

您将不得不编写自己的函数或更改您的 IDE。顺便说一句，编写 LCD 函数并不难，看看这个例子：

[将 PIC 连接到 HD44780 LCD](http://tutorial.cytron.com.my/2012/02/04/lcd-interfacing-with-pic-microcontrollers-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T05:31:30.733

对于 MPLAB XC8，请使用以下链接中的库：将 [LCD 与 PIC 微控制器连接 - MPLAB XC8](http://electrosome.com/lcd-pic-mplab-xc8/)

那篇文章中的示例使用 PIC 16F877A 微控制器。您只需在 MPLAB 项目设置中更改它即可将其转换为 PIC 16F877。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T15:30:16.033

嗯，第一件事。理论上你所做的一切都是正确的。但是，您将需要设计很多专门调用的函数：LCD_Init()、LCD_CMD()、LCD_OUT()。这些不是本机命令，因此您必须自己编写代码。

如果您想启动并运行它。最好的方法是找到 LCD 的文档并找出执行操作所需的位/字节。由于您已经将 LCD_RS 定义为 RB4 ，因此您必须确保 LCD 上的 RS 引脚连接到 RB4。并对所有其他引脚执行此检查。在 LCD 的文档中，它们会告诉您需要设置哪些引脚值才能执行特定操作。即 LCD_EN 可能会启用对屏幕的写入，以便您可以显示字符。虽然 D7-D4 可能是您的数据总线，但您一次从字节发送 4 位。由于 LCD 的响应时间无法立即发送数据，因此您可能需要插入延迟。

延迟相当简单，您只需要设置一个空闲计时器以以微秒为单位测量时间并引发标志，一旦引发标志，您就可以发送下一个命令。您还可以进行轮询延迟。这是通过将计时器值重置为零并等待它达到您预先确定的某个值来完成的，在代码中它将是 2000。

最后，您必须编写 ADC_Read(),ADC_Init() [这不在您的代码中，但我认为编写一个比在代码中公开寄存器操作要好]。此外，这可能看起来令人生畏，但不要担心。这是其中之一，一旦你对一个 LCD 进行了编程，你就已经对它们全部进行了编程。就个人而言，我认为您应该先编写计时器例程，然后再转到 LCD 屏幕。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-19T09:22:41.920

这个[网站](https://extremeelectronics.co.in/pic16f877a-tutorials/setup-and-use-of-lcd-library-for-pic/)提供了很好的 MPLABX IDE 和 XC8 编译器的库和示例，但不要忘记在项目属性 >> XC8 编译器中添加**_XTAL_FREQ=20000000** micro ，否则无法编译！

如果您使用 PIC16F877A，它将填满 256 字节 EEPROM 数据存储器的 20%！和 14KB 程序存储器的 1%。

# postgresql - 限制 PostgreSQL 的总内存使用量

> ID：15070399
> 
> 赞同：7
> 
> 时间：2013-02-25T15:26:16.687
> 
> 标签：postgresql

我知道`postgresql.conf`我可以限制 PostgreSQL 特定部分的内存使用量，例如共享内存或工作内存，但是有没有办法限制 PostgreSQL 服务器的总内存使用量？我未能找到执行此操作的配置属性...

顺便说一句，我需要在 Windows Server 2008 机器上运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:28:58.837

你是什​​么意思“总”内存？这是您分配给各个池的总和。

所以，简而言之......不要将各种池/缓冲区设置得太大，这就是你的总内存限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-01T15:10:52.713

PostgreSQL 没有您可以设置的任何全局限制。相反，您配置`shared_buffers`（通常大约是您打算为 PostgreSQL 授予的总 RAM 的 25% - 50%），`max_connections`（您需要多少并行客户端连接，尽量保持这个尽可能低，可能使用 PgPool 或 pgbouncer）和`work_mem`；实际内存使用量大致为`shared_buffers`+ `max_connections`* `work_mem`* `N`，这`N`取决于您的平均查询复杂度。如果你只做简单的选择，那`N`就是 1。如果你做了很多排序的子查询和复杂的多表连接，你应该假设`N`它在 4 到 10 之间。默认值为`work_mem`4 MB，除非你知道，否则你不应该减少它你甚至不能拥有那么多。根据我的经验，如果您需要设置`work_mem`高于 16-32 MB，您可能应该改进您的查询。

如果您有大量并行*序列化*事务，您可能需要`max_connections`人为地推高数字以允许获取足够的行锁以获得高性能。（PostgreSQL 会根据锁的数量缩放`max_connections`，如果您的事务需要大量锁，则默认缩放可能不够，PostgreSQL 将开始将行锁转换为表级锁，这将导致更多序列化事务回滚。但是，不要盲目规模`max_connections`太高了，因为 PostgreSQL 不断为其配置支持的最大锁计数保留内存。如果您需要超过 400 万个并行锁，预计会出现性能问题——也就是说，重叠事务读取或写入总共超过 400 万行。请注意，对大表进行顺序表扫描必须读取大量行，因此您需要正确的索引！

请注意，如果您需要节省内存，设置`shared_buffers`和设置`work_mem`较低的值将允许 PostgreSQL 在您需要的限制内工作，但性能会受到影响。我认为最小可能是`shared_buffers = 128 KB`and `work_mem = 64 KB`。但是，由于 PostgreSQL 将每个后端子进程作为单独的操作系统级别进程运行，因此在任何情况下，您通常最终都会花费至少 1-4 MB 每个后端，因此如果您希望每个连接低于 4 MB，您确实希望限制并行客户端连接。例如，`pgbouncer`将是一个不错的选择。实际上，我不建议设置`shared_buffers`小于 12 MB 或`work_mem`小于 1 MB。如果您真的负担不起，您可能需要创建一个完全不使用 SQL 数据库的完全定制设计。或者尝试使用例如 SQLite。

# java - 确定图形顶点的函数

> ID：15070400
> 
> 赞同：0
> 
> 时间：2013-02-25T15:26:18.497
> 
> 标签：java, graph, nullpointerexception

我遇到了 java 的 NullPointerException 的问题。我的函数获取 Vertex 的编号并返回一个 Vertex（我已经有这样的类）。这是我的代码

```
public class Graph {
private Set<Vertex> vertices;

public Vertex getVertexByNumber(int number) {
        Vertex answer = new Vertex(number);
        for( Vertex v : vertices ) {
            if(v.getNumber() == number) {
                answer = v;
                break;
            }
        }
        answer = null;

        return answer;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:30:01.943

为什么`answer = null;`？

因为这个声明方法`getVertexByNumber`总是会返回`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:35:13.993

我真的不明白你想做什么。但是如果你想让你的函数在没有`number`值的顶点的情况下创建一个新的顶点，你可以这样写：

```
public Vertex getVertexByNumber(int number) {
    Vertex answer;

    for (Vertex v : vertices) {
        if (v.getNumber() == number) {
            answer = v;
            break;
        }
    }

    return answer == null ? new Vertex(number) : answer;
} 
```

你也可以写

```
public Vertex getVertexByNumber(int number) {

    for (Vertex v : vertices) {
        if (v.getNumber() == number) {
            return v;
        }
    }

    return new Vertex(number);
} 
```

否则，不需要给 初始值`answer`，你只需要声明它：

```
public Vertex getVertexByNumber(int number) {
    Vertex answer;

    for (Vertex v : vertices) {
        if (v.getNumber() == number) {
            answer = v;
            break;
        }
    }

    return answer;
} 
```

或者

```
public Vertex getVertexByNumber(int number) {

    for (Vertex v : vertices) {
        if (v.getNumber() == number) {
            return v;
        }
    }

    return null;
} 
```

# jquery - Select2 - formatNoMatches 上的链接

> ID：15070401
> 
> 赞同：5
> 
> 时间：2013-02-25T15:26:25.907
> 
> 标签：jquery, coldfusion, jquery-select2

我正在使用[Select2](http://ivaynberg.github.com/select2/)来增强我的`<select>`输入。`<options>`我用coldfusion和sql填充。`formatNoMatches`如果用户搜索中没有匹配项，我想使用添加选项。我不想使用多项选择，因为它不适用于我的coldfusion，而且只需将点击事件添加到`formatNoMatches`.

在 select2.js 中的某个地方，有一些代码可以阻止鼠标事件的发生`formatNoMatches`。有没有办法破解它允许鼠标事件？

```
$(".select").select2({
    allowClear: true,
    blurOnChange: true,
    openOnEnter: false,
    formatNoMatches: function(term) {
        return "<a href='#' onclick='alert('" + term + "');'"
          + "id='newClient'>Add New Client</a>";
    }
}); 
```

我无法得到上面的代码来提醒任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T12:57:22.470

这是 select2 的问题。有一个相同的错误。但直到现在还没有解决办法。有一些想法，您可以在下面找到详细信息。

[https://github.com/ivaynberg/select2/issues/276](https://github.com/ivaynberg/select2/issues/276)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T20:35:47.440

使用 select2 createSearchChoice 函数允许用户输入他们自己的选项。然后使用 select2 上的 change 事件来监听任何新的搜索选项，并启动一个迷你表单或取消隐藏页面上的链接以添加其他详细信息（如果选择了自定义选项）。

# c# - 在表单加载时获取数据库上的多个数据

> ID：15070405
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:26:32.560
> 
> 标签：c#, winforms

我想在表单加载中获取我的数据库中的多个数据。但我发现代码很长而且重复。有人可以让这段代码更短一点吗？

这是我的代码

```
private void Form1_Load(object sender, EventArgs e)
    {
        string a = label1.Text;
        string connString = "Server=Localhost;Database=this;Uid=root;password=root";
        using (var connection = new MySqlConnection(connString))
        {
            connection.Open();
            using (var command = connection.CreateCommand())
            {
                command.CommandText = ("Select Room_name from firstfloor where Room_no=(?room)");
                command.Parameters.AddWithValue("?room", a);
                command.ExecuteNonQuery();

                MySqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    button1.Text = reader["Room_name"].ToString();
                }
            }
        }
        string b = label2.Text;
        string connString2 = "Server=Localhost;Database=this;Uid=root;password=root";
        using (var connection = new MySqlConnection(connString2))
        {
            connection.Open();
            using (var command = connection.CreateCommand())
            {
                command.CommandText = ("Select Room_name from firstfloor where Room_no=(?room)");
                command.Parameters.AddWithValue("?room", b);
                command.ExecuteNonQuery();

                MySqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    button2.Text = reader["Room_name"].ToString();
                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:38:15.333

首先，您要连接到同一个数据库两次。而且您正在以相同的方法进行操作（很明显，您完全有权决定是否只连接一次）。

其次，您可以将实际的选择执行包装在一个单独的方法中。该单独的方法应该从调用者那里接收它的连接（以便在这种特殊情况下您只能将 ONCE 连接到数据库，但可以根据需要进行尽可能多的选择）。

第三，不要使用ExecuteReader，使用ExecuteScalar。

此外：您不应该在 FormLoad 上做太多事情（UI 将冻结）。为什么要根据标签的值查询数据库？那只是您快速编写的示例以向我们展示您的意思还是实际的业务逻辑？

```
private string GetRoomName_BasedOn_RoomNumber(string roomNumber, MyConnection connection) {
    using (var command = connection.CreateCommand())
    {
         command.CommandText = ("Select Room_name from firstfloor where Room_no=(?room)");
         command.Parameters.AddWithValue("?room", roomNumber);
         //command.ExecuteNonQuery();

         object response = command.ExecuteScalar();

         return response as string; // consider <null> as a "No such Room Number" signal
    }
}

private void Form1_Load(object sender, EventArgs e)
{
    string a = label1.Text;
    string b = label2.Text;

    string connString = "Server=Localhost;Database=this;Uid=root;password=root";
    using (var connection = new MySqlConnection(connString))
    {
       connection.Open();
       button1.Text = this.GetRoomName_BasedOn_RoomNumber(a, connection);
       button2.Text = this.GetRoomName_BasedOn_RoomNumber(b, connection);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:33:37.820

例如，您可以重构代码并将以下代码提取到方法中：

```
 private void DoSomething(MySqlConnection connection)
{            
using (var command = connection.CreateCommand())
        {
            command.CommandText = ("Select Room_name from firstfloor where Room_no=(?room)");
            command.Parameters.AddWithValue("?room", b);
            command.ExecuteNonQuery();

            MySqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                button2.Text = reader["Room_name"].ToString();
            }
        }

    } 
```

# r - 动物园警告：要替换的项目数不是替换长度的倍数

> ID：15070406
> 
> 赞同：1
> 
> 时间：2013-02-25T15:26:37.310
> 
> 标签：r, zoo

我是 zoo 的新用户，并试图获取 zoo 对象中两个元素的最小值，并将其分配给其中一个。我收到以下错误消息。请帮忙解决一些问题。

```
library("tseries")
IBM <- get.hist.quote(instrument="IBM", start="2012-01-01", end="2012-12-31")
IBM[1]$Low <- min( IBM[1]$Low , IBM[2]$Low )
Warning message:
In NextMethod("[<-") :
  number of items to replace is not a multiple of replacement length 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:34:55.107

这是一个警告，而不是错误；这是由您进行子集化的特殊方式引起的。我从来没有见过有人先按行子集，然后按列使用该`$`函数。我建议您`$`先按列进行子集化，然后再按行进行子集化。

这可以在没有警告的情况下工作：

```
IBM$Low[1] <- min(IBM$Low[1:2]) 
```

# java - ElasticSearch 等效于 Solr getBeans

> ID：15070407
> 
> 赞同：5
> 
> 时间：2013-02-25T15:26:37.670
> 
> 标签：java, solr, elasticsearch

我正在尝试从 Solr 转到 Elasticsearch，我一直在将使用 Solr 的一些类转换为 Elasticsearch，但现在我陷入了困境。

在 Solr 中，我曾经有：

```
QueryResponse response = getServer().query(myQuery);
List<MyClass> result = response.getBeans(MyClass.class); 
```

就是这样，我得到了一个我可以使用的带有 MyClass 对象的列表，但是我没有在 ElasticSearch java API 中找到 getBeans 的等价物，是否有类似的东西，或者我必须使用

```
searchHit.getSourceAsString(); 
```

或者

```
searchHit.getSource(); 
```

并解析结果以创建我自己的 bean？

任何正确方向的帮助或指示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:04:14.697

Elasticsearch 允许您以不同的格式阅读整个源代码，其中对您来说最有趣的是：

*   作为一种`String`通过`SearchHit#sourceAsString`方法
*   作为一种`Map<String, Object>` 通过`SearchHit#sourceAsMap`方法

请注意，源不是获取结果的唯一方法：您还可以要求一些特定的字段，这些字段可以存储在 lucene 中，也可以在未存储时从源自动加载。然后您将`Map<String, SearchHitField>`通过该`SearchHit#fields`方法返回a。

Elasticsearch 比 Solr 更面向 json，提供高度优化的方式来读取和生成 json 对象。据我所知，没有开箱即用的方法可以直接从`SearchHit`使用 Java API 中获取 Java 对象。曾经有一个有趣的[osem 项目](https://github.com/aloiscochard/elasticsearch-osem)，它似乎做了一些类似于你正在寻找的东西，但它似乎不再被维护了。

如果您确实需要，可以使用不同的库将 Json 对象转换为 Java 对象。elasticsearch 本身在内部使用 Jackson。

否则，Java API 的替代方案是[Jest 客户端](https://github.com/searchbox-io/Jest)，它允许将文档作为 POJO 进行索引和检索。但在这种情况下，您将使用一个将 Rest 调用发送到 elasticsearch 的外部库，而不是非常强大的 Java API。另一方面，您不需要整个 elasticsearch 作为依赖项。

# ios - 在 uiwebview 中加载 youtube 视频，播放时不会全屏

> ID：15070413
> 
> 赞同：0
> 
> 时间：2013-02-25T15:26:48.613
> 
> 标签：ios, uiwebview, youtube, resize

至于现在我一直在使用我在互联网上找到的这个解决方案在 uiwebview 中加载一个 youtube 视频

```
[_youTubeView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/embed/XeIKnBDN4To"]]]; 
```

当它播放时，它会以纵向模式进入全屏并运行视频，但会抛出此错误

```
setting movie path: http://r1---sn-uxajvoxu-btxe.c.youtube.com/videoplayback?itag=18&sver=3&
expire=1361830325&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&mt=1361804717&mv=m&id=5de20a9c10cde13a&upn=0EXPt7MQ7SY&cp=U0hVRlhOTl9HT0NONV9QSFJEOmFndEpDMDA3Q21k&
source=youtube&newshard=yes&ms=au&key=yt1&ip=186.3.143.22&
fexp=917000%2C909708%2C900504%2C900222%2C916625%2C902544%2C920704%2C912806%2C902000%2C922403%2C922405
%2C929901%2C913605%2C925006%2C906938%2C931202%2C908529%2C920201%2C930101%2C906834%2C926403%2C901451&
ratebypass=yes&ipbits=8&cpn=_--u0dVaHxrCxseN&
signature=6E11DBCDC8A2585C102A4A1191636C129D04561D.84546ADF1034D266AE4258360BBBC59D0D1FD9BB 
```

这是加载 youtube 视频的正确方法，以及如何避免进入全屏模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:38:16.457

有几种方法可以在没有 Apple 特殊识别的情况下内嵌观看 YouTube 视频。有可用的库和[类别](https://github.com/enigmaticflare/UIWebView-YouTube--iOS-Category--ARC-compliant-code)。我以前使用[HCYoutubeParser](https://github.com/hellozimi/HCYoutubeParser)来提取适合在 MPMoviePlayer 中使用的 URL。

# google-analytics - 跟踪内部活动（自定义变量）

> ID：15070417
> 
> 赞同：1
> 
> 时间：2013-02-25T15:26:54.283
> 
> 标签：google-analytics

目前，我们正在使用 utm 变量来跟踪我们网站上的内部活动，但后来我了解到这是使用 UTM 变量的不正确方式。我们丢失了导致该人访问我们网站的先前 UTM 变量，并且显然它也创建了一个新会话。

所以，我读了这篇文章（[http://www.lunametrics.com/blog/2012/01/26/track-conversions-internal-external-campaigns/](http://www.lunametrics.com/blog/2012/01/26/track-conversions-internal-external-campaigns/)）并决定设置自定义变量来触发事件和跟踪内部活动就是这样。

经过几天的实施，事件和自定义变量正在触发并由 Google Analytics 记录。问题是我们的“目标”在一个单独的子域上（正在被跟踪）。不幸的是，会话级别的自定义变量似乎没有延续到该子域。因此，在 Google Analytics（分析）中，我可以看到有人点击了链接，但我无法查看他们是否真的完成了目标。

关于我能做些什么的任何想法？我是否采取了错误的方法来跟踪内部活动？

只是为了更多的背景：我们的网站是一个非营利组织，最终目标是让某人捐款（发生在子域上），我们希望能够跟踪哪些内部链接/页面导致了捐款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:56:24.950

要将 site.com 上设置的会话级别自定义变量传递到 sub.site.com，您需要避免启动第二个会话。当 GA 检测到新的流量源时，第二个会话将开始，如果您不共享 _utmz cookie（活动 cookie），这正是您跨到子域时发生的情况：GA 写入一个新 cookie，表示流量源已更改为来自 site.com 的推荐。解决方案是通过在 site.com 和 sub.site.com 中添加一行代码来共享 cookie：_gaq.push(['_setDomainName','site.com']); 有关更多信息，请参阅以下文档：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

# crystal-reports - 总和结果不正确？

> ID：15070419
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:27:01.523
> 
> 标签：crystal-reports

我曾经用下面的公式来添加 pict 存在，但结果是 31 而不是 16。我不知道为什么会这样。

![在此处输入图像描述](../Images/deaf0945386cea75f11088d31fd10bac.png) ![在此处输入图像描述](../Images/8d0e902dc5cb95177786dabd190e485b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:18:48.227

在您的水晶报表上

右键单击->插入摘要

在选择字段中---选择您的字段名称

在计算此摘要中---选择 SUM

总结位置---添加您的位置

希望这可以帮助

# android - 如何将输出（扬声器）设置为输入（麦克风）？

> ID：15070421
> 
> 赞同：2
> 
> 时间：2013-02-25T15:27:02.770
> 
> 标签：android, audio-streaming, android-audiomanager

我希望能够更改音频输入（默认情况下是麦克风），并将其更改为通常输出到扬声器的音频。

我的最终目标是能够在与电话中的某人（电话应用程序或第三方应用程序，如 Skype）交谈时，将麦克风的输入更改为简单的音频文件。因此，通话另一端的人不会从麦克风听到我的声音，而是会听到音频文件。

# android - 如果标记被触摸 3 秒怎么办

> ID：15070424
> 
> 赞同：1
> 
> 时间：2013-02-25T15:27:15.000
> 
> 标签：android, timer, android-mapview

我有一个带有 google maps api v2 的应用程序，上面有一些标记。对于每个标记，如果我单击它，它会出现一个带有一些关于它的标题等详细信息的气球。使用 SystemClock 它只等待 3 秒，但它会执行操作。

如果用户在该标记上按下 X 秒，我想做些什么？我尝试使用线程，但没有成功。

```
if (onBalloonTap(currentFocusedIndex, currentFocusedItem)) {
            long thisTime = 0;
            thisTime = SystemClock.uptimeMillis();
            if (thisTime > 3000) {

                DirectionsTask getDirectionsTask = new DirectionsTask();
                getDirectionsTask.execute(getCurrentLocation(),
                        currentFocusedItem.getPoint());
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:43:48.167

类似的东西？

```
 GeoPoint p = null, currentP = null;
    boolean isActivated = false;
    view.setOnTouchListener(new OnTouchListener() { 
        public boolean onTouch(View v, MotionEvent event) { 
            if(event.getAction()==MotionEvent.ACTION_DOWN) {
                isActivated = false;
                currentP = p ;
            }
            if(currentP == p && event.getEventTime()-event.getDownTime()>3000 && !) { 
                Toast.makeText(AudioPlayerActivity.this, "3 sec", Toast.LENGTH_LONG).show(); 
                isActivated = true; //avoid displaying a lot of toast } return true; } });
            }
            if(event.getAction()==MotionEvent.ACTION_UP) {
                currentP = null; p = null;
            }
        }
    });

     //extends Overlay type, works if the method is called when "action down"
     public boolean onTap(GeoPoint p, MapView    mapView)  {
          this.p = p;
          return true;
     } 
```

# javascript - 将谷歌可视化：折线图转换为 RTL

> ID：15070428
> 
> 赞同：3
> 
> 时间：2013-02-25T15:27:38.543
> 
> 标签：javascript, charts, line, visualization

我需要将 LTR [谷歌可视化：折线图](https://developers.google.com/chart/interactive/docs/gallery/linechart?hl=en)转换 为 RTL 这是 LTR 的一个示例

![在此处输入图像描述](../Images/bdae591e990b896384fb0f49891a50d2.png)

我需要它是这样的

![在此处输入图像描述](../Images/d039bd468cb36dae6761d2babf53f55b.png)

我已经反转了图表，但是以蓝色选择的部分的问题是 {280 , 210 , 140 , 70 , 0}

我已经在[那里](https://code.google.com/apis/ajax/playground/?type=visualization#chart_editor)通过向导编辑了这部分，但我无法提取代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T16:59:20.507

我没有找到解决方案，但我所做的就是像这样反转统计数据

![在此处输入图像描述](../Images/40427fcfec11635136ffe44a44f131a8.png)

如您所见，“ الأسبوع الأول ”是第一列，最后一列是“ الأسبوع الثامن ”，这就是我临时解决问题的方法。
为此，您需要添加此参数 { reverseCategories: true, reverseAxis: true,vAxis:direction: -1,legend: 'right'}

完整的代码是：

```
<!-- Charts library -->
<!-- Load the AJAX API -->
<script src="http://www.google.com/jsapi"></script>
<script>

    /*
     * This script is dedicated to building and refreshing the demo chart
     * Remove if not needed
     */

    // Demo chart
    var chartInit = false,
        drawVisitorsChart = function () {

            // Create our data table.
            var data = new google.visualization.DataTable();

            var lengthOfArray = '<%=tarteebLength %>';
            var arrayOfTemp = <%=tempJSON %>;

            var raw_data = new Array();

            raw_data =[[ 'ترتيبك فى الأسبوع']];
            var counter = 1;
            for (var j = 0; j < lengthOfArray; ++j) {
                raw_data[0][counter] = parseInt(arrayOfTemp[j]);
                //alert(raw_data[0][counter]);
                ++counter;
            }

            //var raw_data = [['ترتيبك فى الأسبوع', 5,4,0,0,0,0,0,0]];
            var months = ['الأسبوع الأول', 'الأسبوع الثانى', 'الأسبوع الثالث', 'الأسبوع الرابع', 'الأسبوع الخامس', 'الأسبوع السادس', 'الأسبوع           السابع', 'الأسبوع الثامن'];

            data.addColumn('string', 'Month');
            for (var i = 0; i < raw_data.length; ++i) {
                data.addColumn('number', raw_data[i][0]);
            }

            data.addRows(months.length);

            for (var j = 0; j < months.length; ++j) {
                data.setValue(j, 0, months[j]);
            }
            for (var i = 0; i < raw_data.length; ++i) {
                for (var j = 1; j < raw_data[i].length; ++j) {
                    data.setValue(j - 1, i + 1, raw_data[i][j]);
                }
            }

            // Create and draw the visualization.
            // Learn more on configuration for the LineChart: http://code.google.com/apis/chart/interactive/docs/gallery/linechart.html
            var div = $('#demo-chart'),
                divWidth = div.width();
            new google.visualization.LineChart(div.get(0)).draw(data, {
                title: 'ترتيبك على مدار المسابقة',
                width: divWidth,
                height: $.template.mediaQuery.is('mobile') ? 180 : 265,
                legend: 'right',
                yAxis: { title: '(weeks)' },
                backgroundColor: ($.template.ie7 || $.template.ie8) ? '#494C50' : 'transparent',    // IE8 and lower do not support transparency
                legendTextStyle: { color: 'white' },
                titleTextStyle: { color: 'white' },
                hAxis: {
                    textStyle: { color: 'white' },
                    //direction: -1
                },
                vAxis: {
                    gridlines: { color: '#9933ff' },
                    textStyle: { color: 'white' },
                    baselineColor: '#666666',
                    direction: -1,
                },
                chartArea: {
                    top: 35,
                    left: 30,
                    width: divWidth - 40
                },
                reverseCategories: true,
                reverseAxis: true,
                lineWidth: 5,
                legend: { position: 'bottom', textStyle: { color: 'white', fontSize: 16 } },
                colors: ['#ff9900'],
                curveType: 'function',
            });

            // Ready
            chartInit = true;
        };

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {
        'packages': ['corechart']
    });

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawVisitorsChart);

    // Watch for block resizing
    $('#demo-chart').widthchange(drawVisitorsChart);

    // Respond.js hook (media query polyfill)
    $(document).on('respond-ready', drawVisitorsChart);

</script> 
```

# json - 包含 JSON 对象的 NSDictionary 上的错误 allKeys

> ID：15070431
> 
> 赞同：0
> 
> 时间：2013-02-25T15:27:56.343
> 
> 标签：json, nsarray, nsdata

我尝试从 url 获取 json 数据，但我得到 ERROR 这是我的代码；

```
self.NsData=[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://doctorapp.5plus.co.il/categories.php"]];
id jsonCategories=[NSJSONSerialization JSONObjectWithData:NsData options:NSJSONReadingMutableContainers error:nil];
self.categoriesArray=[jsonCategories allKeys];
NSLog(@"%@",[self.categoriesArray objectAtIndex:0]); 
```

## 这是我的错误：

> [__NSArrayM allKeys]：发送到实例的无法识别的选择器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:22:11.250

```
self.data=[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://doctorapp.5plus.co.il/categories.php"]];
self.categoriesArray=[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
self.categoriesNames=[[NSMutableArray alloc]init];
for (int i = 0; i < [self.categoriesArray count]; i++) {
        NSDictionary * dic = [self.categoriesArray objectAtIndex:i];
        NSString * k;
        for (k in [dic allKeys]) {
            [self.categoriesNames addObject:[dic objectForKey:k]];
            NSLog(@"Temporary ports: %@", [dic objectForKey:k]);
        }
} 
```

# google-maps - 谷歌地图标记在 Windows 8 机器上弹跳闪烁效果

> ID：15070435
> 
> 赞同：0
> 
> 时间：2013-02-25T15:28:00.260
> 
> 标签：google-maps, google-maps-api-3

谷歌地图标记弹跳闪烁效果，这只发生在 Windows 8 机器上。是否可以纠正它？我目前正在使用**优化的谷歌地图 API 3: false;**

代码片段：

`marker = new google.maps.Marker({ position: latlng,

```
 map: map,
                    optimized: false // stops the marker from flashing
                    });` 
```

# java - Java - 使用 XOR 解密的字符串不产生原始/加密字符串

> ID：15070436
> 
> 赞同：0
> 
> 时间：2013-02-25T15:28:05.570
> 
> 标签：java, encryption

我已经获得了有关加密的具体步骤，本质上是将字符串转换为字节数组，并用特定数字“异或”每个字节数组元素，并将这个新的字节数组转换为字符串。

至于解密，我要将解密的字符串重新转换为字节数组，将每个元素与加密中使用的数字进行异或运算，然后将新的解密数组转换为字符串，以提供我开始时使用的确切字符串。

不幸的是，我无法获得我开始使用的字符串，例如，当我尝试加密 6、7、8、9、10 时，解密返回 B@722b9406 而不是 6、7、8、9、10。任何想法为什么会这样？

我的加密代码如下：

```
 //Take each array element and do "Exclusive or" with "50" 
public void XORUnencryptedByteArray() {
    System.out.println("\nPART 3:\nXORUnencryptedByteArray() - " + "UnencryptedStringAsByteArray.length IS: " + UnencryptedStringAsByteArray.length);

    byte[] UnencryptedByteArraybyXOR = new byte[UnencryptedStringAsByteArray.length];

    int XOR_Value = 50;

    byte XOR_Value_as_byte = (byte) XOR_Value;

    System.out.println("\nPART 3:\nXORUnencryptedByteArray() - " + "XOR_Value_as_byte IS: " + XOR_Value_as_byte + "\n");

    for ( int j = 0; j < UnencryptedStringAsByteArray.length; j++ ) {

        System.out.println("\nPOSITION " + j + " OF UnencryptedStringAsByteArray[j] CONTAINS: " + UnencryptedStringAsByteArray[j]);

        System.out.println("\n" + UnencryptedStringAsByteArray[j] + " ^ " + XOR_Value_as_byte + " IS: " + (UnencryptedStringAsByteArray[j] ^ XOR_Value_as_byte));

    }

            for (int i = 0; i < UnencryptedByteArraybyXOR.length; i++) { 

                    UnencryptedByteArraybyXOR[i] = (byte) (UnencryptedStringAsByteArray[i] ^ XOR_Value_as_byte);

                System.out.println( "\nPOSITION " + i + " OF UnencryptedByteArraybyXOR[i] IS: " + UnencryptedByteArraybyXOR[i]);    
            }

    //Collect all encrypted array elements and convert the byte array to string
    System.out.println("\nUnencryptedByteArraybyXOR.length IS: " + UnencryptedByteArraybyXOR.length);

    System.out.println("\nUnencryptedByteArraybyXOR.toString() AS STRING IS: " + UnencryptedByteArraybyXOR.toString());

    UnencryptedByteArraybyXORAsString = new String(UnencryptedByteArraybyXOR);

    //System.out.println("\nUnencryptedByteArraybyXORAsString IS: " + UnencryptedByteArraybyXORAsString);   

    WriteStringToFile(UnencryptedByteArraybyXOR.toString());

}

public void WriteStringToFile(String UnencryptedByteArraybyXORAsString) {
        try {
            String str = UnencryptedByteArraybyXORAsString;
            File newTextFile = new File("/Users/anmonari/Desktop/textfile.txt");

            FileWriter fw = new FileWriter(newTextFile);
            fw.write(str);
            fw.close();

        } catch (IOException iox) {
            //do stuff with exception
            iox.printStackTrace();
        }

} 
```

我的解密代码如下：

```
 public void XORDecryptedByteArray(byte[] encryptedStringAsByteArray) {

    System.out.println("\nXORencryptedByteArray() - " + "encryptedStringAsByteArray.length IS: " + encryptedStringAsByteArray.length);

    byte[] encryptedByteArraybyXOR = new byte[encryptedStringAsByteArray.length];

    int XOR_Value = 50;

    byte XOR_Value_as_byte = (byte) XOR_Value;

    System.out.println("\nXORencryptedByteArray() - " + "XOR_Value_as_byte IS: " + XOR_Value_as_byte + "\n");

    for ( int j = 0; j < encryptedStringAsByteArray.length; j++ ) {

        System.out.println("\n" + encryptedStringAsByteArray[j] + " ^ " + XOR_Value_as_byte + " IS: " + (encryptedStringAsByteArray[j] ^ XOR_Value_as_byte));

    }

            for (int i = 0; i < encryptedByteArraybyXOR.length; i++) { 

                  encryptedByteArraybyXOR[i] = (byte) (encryptedStringAsByteArray[i] ^ XOR_Value_as_byte);

                  System.out.println("\n" + "POSITION " + i + " OF encryptedByteArraybyXOR[i] CONTAINS: " + encryptedByteArraybyXOR[i]);    
            }

    System.out.println("\ndecryptedByteArraybyXOR.length IS: " + encryptedByteArraybyXOR.length);

    System.out.println("\ndecryptedByteArraybyXOR.toString() AS STRING IS: " + encryptedByteArraybyXOR.toString());

 } 
```

任何帮助表示赞赏！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:31:12.157

这是主要问题：

```
UnencryptedByteArraybyXORAsString = new String(UnencryptedByteArraybyXOR); 
```

您将任意二进制数据视为字符串。它不是。您*不能从**实际上*不是编码二进制数据的字节数组创建新字符串。

如果您真的想以可逆方式将任意字节数组转换为字符串，请使用 base64。

此外，当您通过调用`toString`它打印出一个字节数组时，您将得到一个准确的值，例如“B@722b9406”。这不是数据丢失的问题——这只是数组转换为字符串的方式。用于[`Arrays.toString(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)执行更有用的转换。

最后，我希望你不打算对任何敏感的东西使用这种“加密”——充其量只是混淆。

# css - 为什么css下拉菜单中的子菜单不可见？

> ID：15070438
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:28:13.910
> 
> 标签：css, visibility

我刚刚在这里安装了一个 CSS 下拉菜单：http: [//ilke.evaistanbul.com.tr/](http://ilke.evaistanbul.com.tr/)

菜单有子菜单。但它们是不可见的。它们似乎被一些上层元素覆盖：

鼠标悬停在菜单上：

![](../Images/5a2bf34e29bf43eeb569587244471247.png)

菜单的正常状态：

![](../Images/fd898836c63a89c86d3716be75d3e376.png)

子菜单不可见的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:32:05.640

当您删除 .lavaLampBottomStyle 的溢出：隐藏时，它将显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:31:39.727

在你的 CSS 上，

```
#cssmenu .has-sub ul {
display: none;
} 
```

你需要这样`display:block`-

```
#cssmenu .has-sub:hover ul{
display:block;
} 
```

# string - 从文本文件中选择部分字符串并使用powershell将其写入另一个

> ID：15070446
> 
> 赞同：0
> 
> 时间：2013-02-25T15:28:44.093
> 
> 标签：string, powershell, cut

我目前正在编写一个脚本，该脚本可以读取工作站上的标准打印机并将其写入文本文件。现在我需要转换或剪切输出字符串并将其写入另一个文件，以便将剪切的字符串设置为新的默认打印机。

例如，第一个文本文件内容是这样的：

> \NDPS-mydomain\myprinter.ou.cn.mydomain.de

我想得到这个：

> PS-myprinter

“myprinter”的字符数因打印机而异。

我被困在从完整的字符串中切割出我需要的部分。

背景：我进行了从 Novell 到 Microsoft 的大型打印服务器迁移。为了尽可能减少对用户的影响，我想再次使用此脚本将新部署的微软打印机设置为默认打印机。希望这是可以理解的。

对不起，我的英语不好。

提前致谢

到目前为止的示例代码：

```
$name = (get-content env:Computername)

Get-WmiObject -Class Win32_Printer -Filter "Default = $true" | 
    Select-Object - expandProperty Name | 
    Out-File  -filepath C:\"$name"_defaultprinter.txt

Get-Content "C:\"$name"_defaultprinter.txt" | 
    Foreach-Object {$_.Replace("NDPS","PS")} | 
    Set-Content "C:\"$name"_defaultprinter.txt" 
```

这是输出：

`\\mydomain\NDPS-MJP1-0014-SamsungML3471.A-Printers.MJP1.xx-xxxx.xxxxx-xxxxx.DE` `\\mydomain\NDPS-MJP1-0014-SamsungML3471.A-Printers.MJP1.xx-xxxx.xxxxx-xxxxx.DE`

输出应该只是`PS-MJP1-0014-SamsungML3471`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:46:34.110

试试这个脚本：

```
Get-WmiObject -Class Win32_Printer -Filter "Default = $true" | % {
    $_.Name -replace '(?:.*)\\NDPS-([^\.]+)(?:.*)', 'PS-$1'
} | Out-File  -FilePath "C:\$($env:COMPUTERNAME)_defaultprinter.txt" 
```

**编辑**：尝试在一台计算机上运行它。将所有输出作为对您的问题的编辑发布（不在评论中）。如果您需要隐藏一些敏感信息，只需替换单词（留下特殊字符等）：

```
Get-WmiObject -Class Win32_Printer -Filter "Default = $true" | % {
    $_.Name

    $_.Name -replace '(?:.*)\\NDPS-(?:[^\\]+)\\(.+?)\.(?:.*)', 'PS-$1'
} 
```

我提供的正则表达式与您的一个示例字符串完美配合，因此实际值似乎`$_.Name`不等于您提供的示例。所以运行上面的代码并按照我所说的提供输出，这样我们就得到了一个正确的样本。

# php - 我如何使用 php 在链中删除

> ID：15070448
> 
> 赞同：1
> 
> 时间：2013-02-25T15:28:47.437
> 
> 标签：php, url, variables, str-replace

我如何`<?= $var ?>`从链中删除（在这种情况下为 url）。

这是我已经尝试过的：

```
$link = str_replace("<?= $var ?>", "", $link); 
```

但是当我时`echo $link;`，什么都没有出现。（我认为这是打开和关闭 php 标签的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:30:14.720

“链”是指“字符串”吗？

如果不出意外，您将需要单引号来停止`$var`插值：

```
$link = str_replace('<?= $var ?>', '', $link); 
```

我还建议分解看起来像 PHP 打开/关闭标签的字符，以更好地衡量：

```
$link = str_replace('<?' . '= $var ?' . '>', '', $link); 
```

并考虑一下您使用此字符串的目的，以及在其中包含 PHP 代码是否*真的*是一个好主意。**因为它可能不是。**

另请注意，您可能没有正确解释结果。通常我们在 Web 浏览器中查看 PHP 的输出，而 Web 浏览器喜欢假设它们从您的服务器接收的内容是 HTML。`<`开始和结束的文本`>`将被解释为 HTML 标记，而不是逐字呈现；因此，请使用浏览器的“查看源代码”功能来查看您*真正*得到的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:30:19.893

您可以使用不解析变量的单引号：

```
$link = str_replace('<?= $var ?>', "", $link); 
```

# ios - 使用 Core Data 对数据进行制表 - 如何有效过滤？

> ID：15070452
> 
> 赞同：0
> 
> 时间：2013-02-25T15:29:03.463
> 
> 标签：ios, cocoa-touch, core-data, nspredicate

我正在构建一个用于报告销售数据的应用程序。核心数据结构如下

```
Product <---->> SaleAggregate
Customer <---->> SaleAggregate 
```

SaleAggregate 是某个月每个客户每个产品的总销售额。该实体具有“月”、“年”和“金额”属性。

我正在尝试以如下表格格式显示它（每个客户都有一个单独的表格）

```
+---------+---------+---------+---------+---------+
| Product | 01/2011 | 02/2011 | 03/2011 | 04/2011 |
+---------+---------+---------+---------+---------+
| Gizmo   |      40 |     120 |      83 |      48 |
| Widget  |      92 |      38 |      37 |      36 |
| Thingy  |      12 |      84 |      29 |      40 |
+---------+---------+---------+---------+---------+ 
```

每个客户都可以记录任意数量的产品的销售，我需要检索所有这些销售，以某种方式按产品对它们进行分组，然后显示每个 SaleAggregate 'Amount' 以及相应的月/年。

我可以使用 NSPredicate 轻松检索 Customer 的所有 SaleAggregates，以及使用 NSPredicate 和 出售给客户的所有唯一产品`@distinctUnionOfObjects`，但我不太确定从这里去哪里。

该表是使用 UICollectionView 实现的，但我不太确定将正确的值放在正确的单元格中的逻辑应该是什么`cellForItemAtIndexPath`。是否只是在一个查询中检索每个 SaleAggregate ，然后使用 NSPredicate 过滤数组以获得我要显示的每个单元格的正确月份/年份？我认为必须有一种更聪明的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:19:54.697

这个怎么样？

使用谓词和过滤您可以获得特定客户的以下信息吗？

```
ProductArray:
SalesAggreateDateArray: 
```

* * *

```
if section ==0 
      row==0 --> "Product"
      rest of the rows --> [ProductArray objectAtIndex:indexPath.row]
else if row ==0
      sections --> [SalesAggregateDateArray objectAtIndex:indexPath.section]
else
       each cell --> [SalesAggregateAmountObjects filter with 
                                 date= date at row 0, indexPath.section and 
                                 product = product at section 0, indexPath.row] 
```

# usb - 不同端点上的 HID 传输比较

> ID：15070453
> 
> 赞同：1
> 
> 时间：2013-02-25T15:29:04.440
> 
> 标签：usb, hid, adc

我正在使用配置为 HID 的 SiLabs C8051F320 将 ADC 数据（在 64B 或 32B 报告中）流式传输到 PC。我将我的 HID 基于 SiLabs 示例代码，其中 bInterval = 1 并尝试使用端点 1 (EP1) 与端点 2 (EP2)。

根据 C8051F320 的数据表，当端点处于拆分模式时，EP1 为 64B，EP2 为 128B，而不是双缓冲。没有双缓冲时，我的 EP1 为 64B，双缓冲时为 32B。无论是否双缓冲，EP2 都是 64B。ADC 数据为每个样本 2 个字节，因此每个报告传输 64B 报告中的 31 个样本和 32B 报告中的 15 个样本。

1) 非双缓冲 EP1（每份报告 64B）正确传输 22.5kSps ADC 数据 2) 双缓冲 EP1（每份报告 32B）正确传输 11.5kSps ADC 数据 3) 非双缓冲 EP2（每份报告 64B）可以不能正确流式传输 22.5kSps ADC 数据（我没有检查最大采样率是多少） 4）双缓冲 EP2（每个报告 64B）正确采样 22.5kSps ADC 数据 5）似乎用样本填充报告的时间必须比 bInterval 长。例如，如果 bInterval 是 10 而不是 1，则非双缓冲 EP1 可以正确传输 3kSps。

上面的场景看起来对吗？为什么 EP1 允许比 EP2 更快的传输？为什么报告填充时间需要比 bInterval 长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:32:32.213

> 似乎用样本填充报告的时间必须比 bInterval 长。

正确：HID 使用中断类型的端点，它们可以每 bInterval ms 传输一份报告。这使您可以计算每秒 64 字节 * 1000 Hz = 64000 字节的最大数据速率。样本中有 2 个字节，这将导致 32kHz 的最大采样率。

> 为什么 EP1 允许比 EP2 更快的传输？

除了编程错误之外，我看不出这种行为的原因。

注意：HID 协议对于流式数据来说是一个糟糕的选择。批量类型端点允许更高的数据吞吐量。

# php - 使用正则表达式匹配作为数组指针

> ID：15070455
> 
> 赞同：2
> 
> 时间：2013-02-25T15:29:19.570
> 
> 标签：php, regex, arrays

我想用这个数字指向的位置的数组内容替换字符串中的一些数字。

例如，将*"Hello 1 you are great"*替换为*"Hello myarray[1] you are great"*

我正在做下一个：`preg_replace('/(\d+)/','VALUE: ' . $array[$1],$string);`

但它不起作用。我怎么能做到？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:37:29.270

您应该使用回调。

```
<?php
$str = 'Hello, 1!';
$replacements = array(
    1 => 'world'
);
$str = preg_replace_callback('/(\d+)/', function($matches) use($replacements) {
    if (array_key_exists($matches[0], $replacements)) {
        return $replacements[$matches[0]];
    } else {
        return $matches[0];
    }
}, $str);
var_dump($str); // 'Hello, world!' 
```

由于您使用的是回调，因此如果您实际上想要使用数字，您可能希望将字符串编码为`{1}`or 而不是`1`. 您可以使用修改后的匹配模式：

```
<?php
// added braces to match
$str = 'Hello, {1}!';
$replacements = array(
    1 => 'world'
);

// added braces to regex
$str = preg_replace_callback('/\{(\d+)\}/', function($matches) use($replacements) {
    if (array_key_exists($matches[1], $replacements)) {
        return $replacements[$matches[1]];
    } else {
        // leave string as-is, with braces
        return $matches[0];
    }
}, $str);
var_dump($str); // 'Hello, world!' 
```

但是，如果您总是匹配已知字符串，则可能需要使用[@ChrisCooney 的解决方案](https://stackoverflow.com/a/15070805/344643)，因为它提供的搞砸逻辑的机会较少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:48:37.077

另一个答案很好。我是这样管理的：

```
 $val = "Chris is 0";
    // Initialise with index.
    $adj = array("Fun", "Awesome", "Stupid");
    // Create array of replacements.
    $pattern = '!\d+!';
    // Create regular expression.
    preg_match($pattern, $val, $matches);
    // Get matches with the regular expression.
    echo preg_replace($pattern, $adj[$matches[0]], $val);
    // Replace number with first match found. 
```

只是为问题提供另一种解决方案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:48:00.660

```
$string = "Hello 1 you are great";
$replacements = array(1 => 'I think');

preg_match('/\s(\d)\s/', $string, $matches);

foreach($matches as $key => $match) {
  // skip full pattern match
  if(!$key) {
    continue;
  }
  $string = str_replace($match, $replacements[$match], $string);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:48:17.207

```
<?php
$array = array( 2 => '**', 3 => '***');
$string = 'lets test for number 2 and see 3 the result';
echo preg_replace_callback('/(\d+)/', 'replaceNumber', $string);

function replaceNumber($matches){
 global $array;
 return $array[$matches[0]];
}
?> 
```

输出

```
lets test for number ** and see *** the result 
```

# facebook - 如何从我的网站上的 Facebook Likes 获取所有 URL 和点击数据？

> ID：15070456
> 
> 赞同：1
> 
> 时间：2013-02-25T15:29:21.130
> 
> 标签：facebook, facebook-graph-api

我想查看我网站上最“流行”的页面（以 FB 点赞数衡量）。有没有办法通过 FQL 或其他方法从 FB 中获取这些数据？

# javascript - JQuery 使用命名空间从 XML 中提取值

> ID：15070459
> 
> 赞同：1
> 
> 时间：2013-02-25T15:29:25.590
> 
> 标签：javascript, jquery, html, xml, xml-namespaces

我有一些 XML

```
<item>
<language>en-gb</language>
<attr xmlns="wab" name="date" value="23/02/2013 05:35:32"/>
<attr xmlns="wab" name="group" value="alt"/>
<attr xmlns="wab" name="guid" value="9ab6e5cb28bd457fb88fd3f47288fcd4"/>
</item> 
```

我可以使用以下 JavaScript 获取语言

```
$(this).find("language").text(); 
```

我将如何提取日期、组和 guid？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:34:34.320

尝试：

```
$(this).find('attr[name="date"]').attr("value") 
```

请参阅[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:34:21.137

在 attr 上使用属性选择器，请参阅在输入标签上执行类似操作的文档：

[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:35:21.483

`<attr/>`如果你想找到每个节点的值，也许会有这种效果：

```
var attrs = $("attr");
$.each(attrs, function(){
    console.log($(this).attr("value"));
}); 
```

# azure - 在 Windows Azure VM 上使用 LocalDB

> ID：15070460
> 
> 赞同：1
> 
> 时间：2013-02-25T15:29:28.817
> 
> 标签：azure, virtual-machine, localdb

我一直在阅读有关 LocalDB 以及它如何不能在 Azure 角色中使用（因为如果角色停止工作它们不会持续存在），并且您应该转向 Azure SQL 或 Azure 存储。

但是，是否可以在 Windows Azure VM 中使用 LocalDB？因为我目前无权访问 Azure 帐户，所以我无法自己进行测试。

亲切的问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:38:15.723

Azure VM 应该可以正常工作，因为它完全持久化并且在很大程度上与常规 Windows 兼容。请注意，我指的是新的 Azure VM 功能，而不是旧的 Azure VM 角色，因为 VM 角色没有完全持久化。只是澄清答案，以防有人没有仔细阅读问题。

# database - 使用 API 进行信息密集型应用程序和数据库设计的常见做法 Ruby on Rails

> ID：15070465
> 
> 赞同：1
> 
> 时间：2013-02-25T15:29:44.077
> 
> 标签：database, api, database-design

假设我正在使用 Ruby on Rails 上的 Expedia、Booking 等 API 开发酒店预订元搜索应用程序。

如果我想根据半径 20 英里的“到达日期”、“出发日期”和“经度”“纬度”呈现酒店列表，使用 API 的最佳方式是什么。

我有这种搜索所需的所有坐标（大约 10000 个坐标）。

因此，如果我进行这样的搜索，它会为每个坐标返回 20 英里范围内的 100 多家酒店，因此有数万家独特的酒店。

我应该在我的数据库中预先设置每个坐标的所有酒店，并且只使用可用的房间数量和其他动态变量，还是通过 Javascript 动态呈现列表会更好？

这也是完成这项任务的最佳数据库吗？我对 Expedia 会员计划特别感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:13:36.493

如果你有兴趣，我找到了我的问题的答案。

仔细查看 Expedia API 文档[http://developer.ean.com/docs/read/hotels](http://developer.ean.com/docs/read/hotels)，尤其是数据库部分（需要登录）。我发现根据应用程序的不同，可能有几种方法可以解决这个问题。我已经停止了导入整个属性数据库的选项，该数据库可在 Expedia 网站上完全访问，并且仅使用诸如房间可用性、价格等动态参数。但是这将需要频繁更新数据库。

# google-analytics - 同一页面上的多个 Google Analytics 标记

> ID：15070473
> 
> 赞同：2
> 
> 时间：2013-02-25T15:30:19.660
> 
> 标签：google-analytics, google-tag-manager

这是我的问题：我们的客户有 2 个网站，A 和 B。他们有 1 个谷歌分析帐户和 2 个属性：

*   帐户：客户名
*   特性 ：

    *   ID 为 UA-XXXXXX-1 的 SITEA
    *   带有 ID UA-XXXXXX-2 的站点

此外，我们还有 1 个具有 1 个属性的分析帐户：

*   帐户：OURNAME
*   财产 ：
    *   ID 为 UA-111111-1 的站点客户

我们希望将客户的谷歌分析标签与我们的标签（OURNAME）一起放在每个网站上，这样每个网站都会有两个代码。

在支持站点上进行一些搜索后，我发现：“[在单个网页上安装多个 Google Analytics 跟踪代码实例不是受支持的实现](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1032400&topic=1008082&ctx=topic)”

但是，在再次搜索并尝试之后（是的，我知道这很糟糕......），我发现它可以使用如下代码：

```
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(
    ['_setAccount', ACCOUNT_#1_ID],
    ['_setAllowLinker', true],
    ['_setAllowHash', false],
    ['_trackPageview'],
    ['b._setAccount', ' ACCOUNT_#2_ID '],
    ['b._setAllowLinker', true],
    ['b._setAllowHash', false],
    ['b._trackPageview'] 
```

（第一个标签没有，第二个标签是 b 等等......）。因此，我对这些标签几乎没有疑问，因为跟踪似乎是正确的：

*   我们可以跳过跟踪中的一个字母吗？例如，我们有 3 个帐户，我们想要 3 个代码，a、b 和 d（但不是 c）
*   我们可以使用 Google 跟踪代码管理器为一个页面添加 2 个或多个跟踪吗？（例如 2 GA 的类型标签，规则为“适用于所有页面”）
*   我可以在同一页面上同时拥有 1 个谷歌分析标签和 1 个 GTM 标签吗？（不是很有用，但有可能吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-22T15:01:08.967

是的，域页面上可能有多个 GA 跟踪代码。同一页面上的 2 个 GA 代码示例：

```
 <scirpt>  (function(i,s,o,g,r,a,m)......)

    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('create', 'UA-XXXXX-Z', 'auto', 'clientTracker');

    ga('send', 'pageview');
    ga('clientTracker.send', 'pageview');

    </script> 
```

更多：[https ://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers#working_with_multiple_trackers](https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers#working_with_multiple_trackers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:42:28.820

1.  是的，字母/名称由您决定……您可以为帐户添加任何您想要的前缀。它们只是用于个人寻址。
2.  是的，但请记住不能保证它们加载的顺序。您不需要为每个实例重新加载实际的 ga.js，单个实例就可以了。
3.  是的，这不是问题。

附带说明一下，如果您要从多个主机名中收集更多数据到单个网络资产中，则需要在 GA 对象中设置域名。

# ipad - 点击事件在 ipad 中不起作用

> ID：15070478
> 
> 赞同：2
> 
> 时间：2013-02-25T15:30:39.723
> 
> 标签：ipad, click

这是我的代码：

```
 var tmp = plugin.main_video_src.split("_")[1]

     if(tmp == 2)
     {
        $('.flex-direction-nav .flex-next').click();
     } 
```

这在 PC 浏览器中完美运行，但在 iPad 中无法运行。有什么解决办法吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-28T02:12:14.917

这可能是因为您试图对不可点击的 html 元素上的事件做出反应。 [本教程将解释如何](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW6)

> # 使元素可点击
> 
> 由于 iOS 上的 Safari 创建事件以模拟鼠标的方式，您的某些元素在 iOS 上的行为可能与预期不同。特别是，一些只使用 mousemove 处理程序的菜单，如清单 6-1 所示，需要更改，因为 iOS 不将它们识别为可点击元素。
> 
> 清单 6-1 使用鼠标悬停处理程序的菜单

```
<span onmouseover = "..."
  onmouseout  = "..."

WHERE TO BUY

</span> 
```

> 为了解决这个问题，添加一个虚拟的 onclick 处理程序，`onclick = "void(0)"`以便 iOS 上的 Safari 将 span 元素识别为可点击元素，如清单 6-2 所示。
> 
> 清单 6-2 添加一个 onclick 处理程序

```
<span onmouseover = "..."
  onmouseout  = "..."
  onclick = "void(0)">

WHERE TO BUY

</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T14:57:30.443

我使用了“ **touchstart** ”事件而不是“ **click** ”事件。它非常适合我。这是示例代码：

```
$("<selector>").bind("touchstart", function() {

// YOUR CODE ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:07:37.730

我有同样的问题。这对我有用。

```
$('.flex-direction-nav .flex-next').off('click').on('click'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:32:53.730

iPad 上不存在 OnClick 事件。你需要触摸事件

```
$('.flex-direction-nav .flex-next').trigger('touchstart');

document.addEventListener('touchstart', function(e) {
    //Bind your event here
}, false); 
```

您有以下事件

> 1.  触摸启动
> 2.  触摸移动
> 3.  触摸端
> 4.  触摸取消

[如何在 iPad 版 Safari 中使用 jQuery 识别触摸事件？可能吗？](https://stackoverflow.com/questions/4755505/how-to-recognize-touch-events-using-jquery-in-safari-for-ipad-is-it-possible)

# git - 将 blob 临时添加到 git 存储库

> ID：15070479
> 
> 赞同：1
> 
> 时间：2013-02-25T15:30:48.757
> 
> 标签：git

我需要将一些二进制文件添加到 Git 存储库一段时间。（实际上它们是 ODT 文档，我想将它们连续转换为可版本化的 LaTeX 源文件。我希望它们在 repo 中，因为我在多台计算机上工作并与其他人共享一些工作）。但是一旦我不再需要这些二进制文件，我希望将它们删除。可能这不是一个真正的问题，但为了保持一致性，我更愿意将它们从回购中清除。

所以我的想法是创建一个新分支并将二进制文件添加到其中，因此所有这些文件的提交都在这个单一分支的上下文中。

如果我用 删除这个分支`git branch -D`，这些文件是否会消失，或者它们是否仍会作为其历史记录的一部分存在于存储库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:35:50.140

在一段时间内，它们仍将成为*隐藏*历史的一部分：

当分支将被删除时，包含您的文件的提交将变得无法访问，即查看历史记录时无法访问。它们在对象存储中，但没有 git 巫术就无法查看它们。此外，它们不会在 fetch/pull/clone 操作中被检索到。

这些提交将在一些`git gc`运行后被清除，这将删除超过 2 周的无法访问的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:43:34.813

repo 中仍然会有一段时间。

首先，即使分支被删除，提交仍然存在并在您的 HEAD reflog 中引用（这是 HEAD 最近所在的位置）。你可以在`.git/logs/HEAD`.
通常，reflog 会在 30 天后过期（从 HEAD 或任何分支）无法访问的引用。您可以强制 reflog 过期[`git reflog expire`](http://www.kernel.org/pub//software/scm/git/docs/git-reflog.html)。

然后，一旦您的 reflog 不引用这些提交，它们将不会被删除，直到调用[`git prune`](http://www.kernel.org/pub//software/scm/git/docs/git-prune.html)or 。将自动修剪两周前创建的每个悬空（意味着它们没有在任何地方引用）提交/blob。[`git gc`](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)`git gc`

* * *

无论如何，在您的特定情况下，如果您不希望将这些文档放在 repo 中，这可能是一个很好的迹象，表明您不应该首先将它们放在这里，并且 git 不是您问题的解决方案。

像 dropbox/google drive/etc 这样的解决方案。我想会更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:39:11.817

我尝试使用原始问题的第一条评论，我想分享我的测试结果。

如果您将 OpenOffice 文档保存为“平面 XML”，您将获得可在 Git 中使用的可区分文件格式。虽然这可行，但它远非完美，因为有相当多的开销不是“内容”，而是配置信息，如时间戳、视口信息以及可见按钮或其状态之类的东西。很多这也进入了提交。这是将一段插入空文档的区别：

```
diff --git a/Test2.fodt b/Test2.fodt
index 02a528a..bec4f67 100644
--- a/Test2.fodt
+++ b/Test2.fodt
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>

 <office:document xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:config="urn:oasis:names:tc:opendocument:xmlns:config:1.0" xmlns:ooo="http://openoffice.org/2004/office" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rpt="http://openoffice.org/2005/report" xmlns:of="urn:oasis:names:tc:opendocument:xmlns:of:1.2" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:grddl="http://www.w3.org/2003/g/data-view#" xmlns:officeooo="http://openoffice.org/2009/office" xmlns:tableooo="http://openoffice.org/2009/table" xmlns:calcext="urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0" xmlns:field="urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0" xmlns:formx="urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0" xmlns:css3t="http://www.w3.org/TR/css3-text/" office:version="1.2" office:mimetype="application/vnd.oasis.opendocument.text">
- <office:meta><meta:creation-date>2013-02-26T08:36:00</meta:creation-date><meta:generator>LibreOffice/3.6$Linux_x86 LibreOffice_project/360m1$Build-2</meta:generator><meta:document-statistic meta:table-count="0" meta:image-count="0" meta:object-count="0" meta:page-count="1" meta:paragraph-count="0" meta:word-count="0" meta:character-count="0" meta:non-whitespace-character-count="0"/></office:meta>
+ <office:meta><meta:creation-date>2013-02-26T08:36:00</meta:creation-date><meta:generator>LibreOffice/3.6$Linux_x86 LibreOffice_project/360m1$Build-2</meta:generator><meta:document-statistic meta:table-count="0" meta:image-count="0" meta:object-count="0" meta:page-count="1" meta:paragraph-count="1" meta:word-count="2" meta:character-count="13" meta:non-whitespace-character-count="12"/><dc:date>2013-02-26T08:37:13</dc:date><meta:editing-duration>P0D</meta:editing-duration><meta:editing-cycles>1</meta:editing-cycles></office:meta>
  <office:settings>
   <config:config-item-set config:name="ooo:view-settings">
    <config:config-item config:name="ViewAreaTop" config:type="int">0</config:config-item>
@@ -14,7 +14,7 @@
     <config:config-item-map-entry>
      <config:config-item config:name="ViewId" config:type="string">view2</config:config-item>
      <config:config-item config:name="ViewLeft" config:type="int">6158</config:config-item>
-     <config:config-item config:name="ViewTop" config:type="int">2501</config:config-item>
+     <config:config-item config:name="ViewTop" config:type="int">2988</config:config-item>
      <config:config-item config:name="VisibleLeft" config:type="int">0</config:config-item>
      <config:config-item config:name="VisibleTop" config:type="int">0</config:config-item>
      <config:config-item config:name="VisibleRight" config:type="int">29314</config:config-item>
@@ -205,6 +205,12 @@
   <text:linenumbering-configuration text:number-lines="false" text:offset="0.499cm" style:num-format="1" text:number-position="left" text:increment="5"/>
  </office:styles>
  <office:automatic-styles>
+  <style:style style:name="P1" style:family="paragraph" style:parent-style-name="Standard">
+   <style:text-properties officeooo:paragraph-rsid="0004a3d7"/>
+  </style:style>
+  <style:style style:name="T1" style:family="text">
+   <style:text-properties officeooo:rsid="0004a3d7"/>
+  </style:style>
   <style:page-layout style:name="pm1">
    <style:page-layout-properties fo:page-width="21.001cm" fo:page-height="29.7cm" style:num-format="1" style:print-orientation="portrait" fo:margin="2cm" fo:margin-top="2cm" fo:margin-bottom="2cm" fo:margin-left="2cm" fo:margin-right="2cm" style:writing-mode="lr-tb" style:footnote-max-height="0cm">
     <style:footnote-sep style:width="0.018cm" style:distance-before-sep="0.101cm" style:distance-after-sep="0.101cm" style:line-style="solid" style:adjustment="left" style:rel-width="25%" style:color="#000000"/>
@@ -224,7 +230,8 @@
     <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
     <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
    </text:sequence-decls>
-   <text:p text:style-name="Standard"/>
+   <text:p text:style-name="P1"><text:span text:style-name="T1">One paragraph</text:span></text:p>
+   <text:p text:style-name="P1"><text:span text:style-name="T1"/></text:p>
   </office:text>
  </office:body>
 </office:document>
\ No newline at end of file 
```

# emacs - 指定 emacs 启动行为

> ID：15070481
> 
> 赞同：1
> 
> 时间：2013-02-25T15:30:50.817
> 
> 标签：emacs, elisp, config, startupscript

我有一个关于 emacs 启动行为配置的问题。我对lisp一无所知，我只是喜欢用emacs进行编辑。

我想要的是以下内容：

1.  我称emacs为`emacs FILE`
2.  emacs 打开一个窗口，标题为`FILE`
3.  emacs 水平分割窗口
4.  在上面的框架中它打开一个文件`FILE.abc`
5.  转到底部框架并打开`FILE.xyz`
6.  最佳地回到上框架

我在这里看了看： [如何在 .emacs 中创建特定的窗口设置](https://stackoverflow.com/questions/12512471/how-to-create-a-specific-window-setup-on-in-emacs) ，它已经完成了一半。但是，宏的事情在我的情况下并没有真正起作用，因为我需要传递一个参数。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:33:28.740

一般而言，如果您只停留在 Emacs 中“访问”（正如 Emacs - 40 年来 - 将其他已知的操作 - 30 年来 - 称为“打开”）文件，您会发现 Emacs 会更好地为您服务。

这是功能（未经测试）：

```
(defun open-two-files (file)
  "Open FILE.abc in the top window and FILE.xyz in the bottom window.
http://stackoverflow.com/questions/15070481/specifying-emacs-startup-behavior"
  (interactive "FEnter file base name: ")
  (let ((old-window (selected-window))
        (new-window (split-window-below)))
    (find-file (concat file ".abc"))
    (select-window new-window)
    (find-file (concat file ".xyz"))
    (select-window old-window))) 
```

您需要将其放入您的`~/.emacs.el`.

现在，如果你已经打开了 emacs，你需要`M-x open-two-files RET foo RET`打开`foo.abc`和`foo.xyz`.

如果你想开始一个新的 Emacs 会话，输入`emacs --eval '(open-two-files "foo")'`

# vba - VBA excel宏转置特定矩阵

> ID：15070487
> 
> 赞同：1
> 
> 时间：2013-02-25T15:31:17.497
> 
> 标签：vba

我是 VBA excel 的新手，我正在尝试编写一个可以转换如下表格的宏：

```
Time    Station1
0       150.0
60      250.0
200     450.0
250     650.0
...     ... 
```

像这样的转置表，其值紧随其后：

```
Time 0 60 200 250 ... Station1 150.0 250.0 450.0 650.0 
```

到目前为止，我一直在使用一些转置功能，但我需要提前知道大小。

[编辑]

我在 B2:C6 中的表格中使用了以下代码

```
Sub Worksheet_Change()

Set Target = ActiveCell
Application.ScreenUpdating = False
[B2:C6].Copy
[E2].PasteSpecial Paste:=xlPasteValues, Transpose:=True
Application.CutCopyMode = False
Target.Select

End Sub 
```

它或多或少是手动复制/粘贴..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:38:56.547

使用时`Application.WorksheetFunction.Transpose()`，不需要知道变量数组的大小。但是，如果您指的是两列中的 Last used 行，请尝试以下代码。

在您的情况下，您可以尝试使用两个变体数组将**多行放入一行中的多列中**。

**代码：**

```
Option Explicit

Sub rowsToColumns()
Dim vCol1 As Variant, vCol2 As Variant
Dim lastRow As Long
Dim WS As Worksheet

Set WS = Sheets(2)
lastRow = WS.Cells(WS.Rows.Count, "B").End(xlUp).Row
'--since data starting with row 2
lastRow = lastRow - 1
vCol1 = WorksheetFunction.Transpose(WS.Range("B2").Resize(lastRow).Value)
vCol2 = WorksheetFunction.Transpose(WS.Range("C2").Resize(lastRow).Value)

'-- output to sheet
WS.Range("B10").Resize(1, UBound(vCol1)) = vCol1
WS.Range("B11").Resize(1, UBound(vCol2)) = vCol2

End Sub 
```

**工作表视图：**

![在此处输入图像描述](../Images/b0b50c46563e99a7acd10edf1826a6ce.png)

# iphone - 如何在 iphone 中使用 fbconnect 从 facebook 访问家庭详细信息？

> ID：15070488
> 
> 赞同：1
> 
> 时间：2013-02-25T15:31:17.310
> 
> 标签：iphone, ios, fbconnect

在我的新应用程序中，我想从 facebook 访问家庭成员，包括成员照片。正在访问用户的详细信息，例如姓名和照片。

我正在使用从 facebook 访问数据的权限如下所示

```
mPermission =  [NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"offline_access",@"email",@"publish_checkins",@"manage_notifications",@"friends_photos",@"user_photos",nil];
    mFacebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];      

NSMutableDictionary * paramss = 

[NSMutableDictionary dictionaryWithObjectsAndKeys:@"SELECT uid FROM user WHERE is_app_user  AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())",@"query",nil];

[mFacebook requestWithMethodName:@"fql.query"
                       andParams:paramss
                   andHttpMethod:@"POST"
                     andDelegate:self]; 
```

我怎样才能获得家庭详细信息..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:55:15.093

Facebook 有详细解释如何查询用户的家庭。检查[此链接](https://developers.facebook.com/docs/reference/fql/family)以阅读所有相关信息。

他们要求您拥有名为“user_relationships”的额外权限。然后就可以查询族表了。它提供家庭成员的姓名、生日和关系状态。

对于个人资料图片，您必须（如果我是正确的）使用来自家庭成员的 UID 从用户表中获取这些，应该可以通过加入来实现。查找以“pic”开头的列。

# vba - Document_New 启动 Word 事件

> ID：15070492
> 
> 赞同：1
> 
> 时间：2013-02-25T15:31:23.410
> 
> 标签：vba, ms-word

我有一个 VBA 插件，每次有人打开文档时我都想运行它。打开现有文档（AutoOpen）和从“文件”>“新建”菜单（AutoNew）创建新文档都很好，但是当我第一次打开 Word 时，这些事件都没有触发。我似乎可以挂钩的唯一事件是 AutoExec 事件，这不是很好，因为文档还不存在，所以 ActiveWindow 为空。

任何人都可以帮忙吗？

```
Sub AutoNew
    MsgBox "New"
End Sub

Sub AutoOpen
    MsgBox "Open"
End Sub

Sub AutoExec
    MsgBox "Exec"
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:32:49.347

我将从 DocumentOpen 和 NewDocument 开始。如果您需要支持 ProtectedView 文档，则存在额外的复杂性；Word 触发了不同的事件。我发现如果我尝试检查该事件（并且它没有发生），它会引发错误。我没有太多的运气，最终我花费的时间是不值得的。我在下面发布了一些代码示例，这些代码在打开文档或创建新文档（假设加载项正在加载）时打开样式窗格，并在草稿视图中展开样式边距（如果尚未展开）。

在我的 UI 模块中：

```
Dim X As New clsAppEvent 'This is in the declarations

Public Sub OnRibbonLoad(objRibbon As IRibbonUI)
    Do While Documents.Count = 0
      DoEvents
    Loop ' I find this useful as sometimes it seems my ribbon loads before the document. 
    Call Register_Event_Handler
    ' Other stuff
End Sub

Private Sub Register_Event_Handler()
    Set X.App = Word.Application
End Sub 
```

然后，在一个类模块中，我调用 clsAppEvent：

```
Option Explicit

Public WithEvents App As Word.Application

Private Sub App_DocumentOpen(ByVal Doc As Document)
    App.TaskPanes(wdTaskPaneFormatting).visible = True
End Sub

Private Sub App_NewDocument(ByVal Doc As Document)
    App.TaskPanes(wdTaskPaneFormatting).visible = True
End Sub

Private Sub App_WindowActivate(ByVal Doc As Document, ByVal Wn As Window)
    If Wn.StyleAreaWidth <= 0 Then
      Wn.StyleAreaWidth = 60
    End If
End Sub 
```

除了我上面提到的警告之外，我遇到的一个问题是，如果用户的 Normal 模板中也有 Auto 代码。这只出现过一次，所以我没有调查它。

我希望我能找到我了解这一点的网站（以及从中派生 Register_Event_Handler 的网站。如果我找到它，我会添加评论。

# sql - 如何在 Oracle 中将各种 VARCHAR 作为数字进行比较

> ID：15070500
> 
> 赞同：3
> 
> 时间：2013-02-25T15:31:52.460
> 
> 标签：sql, oracle, entity-attribute-value

我有一个具有各种数字格式的表格，例如：

*   2
*   3.44189
*   4,1
*   -0.0022
*   9.9E+37
*   1.9E-12

这些是 varchar2 列中的测量值，每个测量值都有一个带有上限和下限值的规范（格式相同），所以我想要的是这些边界之间的测量值

```
SELECT VALUE, LOW, HIGH FROM MEASUREMENTS
WHERE to_number(replace(VALUE,',','.'), '999999999D99999999999999999999999999999999999999','NLS_NUMERIC_CHARACTERS = ''.,''')
    > to_number(replace(LOW,',','.'), '999999999D99999999999999999999999999999999999999','NLS_NUMERIC_CHARACTERS = ''.,''')
AND   to_number(replace(VALUE,',','.'), '999999999D99999999999999999999999999999999999999','NLS_NUMERIC_CHARACTERS = ''.,''') 
    <=to_number(replace(HIGH,',','.'), '999999999D99999999999999999999999999999999999999','NLS_NUMERIC_CHARACTERS = ''.,''') 
```

这些查询适用于上面写的每个数字，除了像 9.9E+37 这样的指数数字。我发现用 TO_CHAR 重写，但它不适用于 varchar

有没有人可以将存储为 varchar 的各种数字相互比较？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:36:30.900

如果您知道它们都是数字，我建议您使用`cast()`：

```
select cast(col as float) 
```

# mysql - 为什么同一个查询在 MySQL 中执行两次，会返回两个截然不同的响应时间？

> ID：15070502
> 
> 赞同：0
> 
> 时间：2013-02-25T15:31:59.590
> 
> 标签：mysql

我的问题如下：

为什么如果我在 shell MySql 中两次执行相同的查询会得到两个非常不同的响应时间（即，

第一次和第二次更短的时间）？

我该怎么做才能防止这种情况发生？

非常感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:35:18.160

这很可能归结为查询和/或结果缓存。如果您运行一次查询，MySQL 会存储该查询的编译版本，并将这些特定表的索引存储在内存中，因此任何后续查询都比原始查询快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:42:16.163

这可能是由于**1.查询缓存已打开或由于 2.正在执行它的系统的性能状态不同**。
在查询缓存中，如果您运行一次查询，则 mysql 存储查询的编译版本并在再次调用时获取。编译的时间不在同一个查询的重复执行中。***可以关闭查询缓存，但这不是一个好主意***

# jsf - ExternalContext#redirect() 不重定向到父目录

> ID：15070505
> 
> 赞同：7
> 
> 时间：2013-02-25T15:32:07.237
> 
> 标签：jsf, redirect, directory, parent

我有两页：

```
String page1 = "user/newuser.jsf";
String page2 = "department/newdepartment.jsf"; 
```

如果我重定向到`page1`这样：

```
FacesContext.getCurrentInstance().getExternalContext().redirect(page1); 
```

网址更改为`localhost:8080/NavFile/user/newuser.jsf`。

在此页面上，我重定向到`page2`：

```
FacesContext.getCurrentInstance().getExternalContext().redirect(page2); 
```

网址更改为`localhost:8080/NavFile/user/department/newdepartment.jsf`。但是我的应用程序中没有`user/department`目录。我的目标是重定向到`localhost:8080/NavFile/department/newdepartment.jsf`.

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T15:39:33.857

相对重定向 URL（即，当不以`/`or 方案开头时）是相对于当前请求 URL（最终用户在浏览器的地址栏中看到的）。它与服务器端的上下文路径并不神奇，因为此信息在客户端是完全未知的（您知道，重定向是由网络浏览器执行的，而不是由网络服务器执行的）。

如果要相对于上下文路径进行重定向，则应包含上下文路径，使其成为域相关的。您可以通过动态获取上下文路径[`ExternalContext#getRequestContextPath()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestContextPath%28%29)。

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
ec.redirect(ec.getRequestContextPath() + "/" + page1); 
```

如果是`page2`，则完整的重定向 URL 变为`/user/department/newdepartment.jsf`并且前导斜杠`/`将使其相对于 domain `http://localhost:8080`，这正是您想要的。

### 也可以看看：

*   [用于链接/导航到其他 JSF 页面的 URL](https://stackoverflow.com/questions/30683584/what-url-to-use-to-link-navigate-to-other-jsf-pages)
*   [重定向到 JSF 中的外部 URL](https://stackoverflow.com/questions/5092439/redirect-to-external-url-in-jsf)
*   [点击 bean 方法并在 GET 请求上重定向](https://stackoverflow.com/questions/7488211/hit-a-bean-method-and-redirect-on-a-get-request)
*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-12-02T08:02:22.923

你可以这样做：

String redirectTo = "../department/newdepartment.jsf"; FacesContext.getCurrentInstance().getExternalContext().redirect(redirectTo);

这个对我有用。

# mysql - 具有 CFTRANSACTION 的多个数据源

> ID：15070506
> 
> 赞同：5
> 
> 时间：2013-02-25T15:32:07.980
> 
> 标签：mysql, coldfusion, transactions, coldfusion-9

我遇到了以下错误：

`Datasource names for all the database tags within the cftransaction tag must be the same.`

这来自以下代码：

```
transaction action="begin" {
  try {
    var data = {};

    data.time = getTickCount();

    addToLog("Persist", "Started persist operations");

    doClientPersist();
    cleanUp(arguments.importId);

    addToLog("Persist", "Completed the persist operations successfully", ((getTickCount()-data.time)/1000));

    return true;
  } catch (any e) {
    transactionRollback();
    data.error = e;
  }
} 
```

该事务有效地将较低级别的方法包装在`doClientPersist()`. 一个这样的调用，在我们的框架数据库抽象层的深处，从一个单独的数据源（比如说邮政编码数据源）获取（SELECTs）经度和纬度信息——这个数据源是严格只读的。

```
<cffunction name="getLatitudeAndLongitude" access="package" returntype="query" output="false">
  <cfargument name="postcode" type="string" required="true" />
  <cfset var qPostcode = ''/>
  <cfquery name="qPostcode" datasource="postcodesDatasource">
    SELECT 
      a.latitude, 
      a.longitude
    FROM 
      postcodes AS a
    WHERE 
      a.postcode = <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#postcode#"/>
  </cfquery>
  <cfreturn qPostcode/>
</cffunction>

<cffunction name="getPostcodeCoordinates" access="public" returntype="struct" output="false">
  <cfargument name="postcode" type="string" required="true"/>
  <cfscript>
    var data = {};

    data.postcode = getFormattedPostcode(arguments.postcode);
    data.valid    = isValidPostcode(data.postcode);
    data.coords   = {};

    if (data.valid) {
      data.query = getLatitudeAndLongitude(data.postcode);
      if (isQuery(data.query) && data.query.recordCount) {
        data.coords["latitude"]  = data.query["latitude"][1];
        data.coords["longitude"] = data.query["longitude"][1];
      } else if (data.valid == 2) {
        /** No match, try short postcode (RECURSIVE) **/
        data.coords = getPostcodeCoordinates(trim(left(data.postcode, len(data.postcode)-3)));
      }
    }
    return data.coords;
  </cfscript>
</cffunction> 
```

阅读这个问题，文档说以下内容：

`In a transaction block, you can write queries to more than one database, but you must commit or roll back a transaction to one database before writing a query to another.`

不幸的是，如上所述，获取此邮政编码数据的代码与实际的持久化操作完全无关，因为它执行了一个无法更改的较低级别方法的网络，我无法在调用之前提交“顶级”事务远程数据源。

无论如何我可以在事务中包装“顶级”方法并且仍然可以调用“邮政编码”数据源 - 我们必须为每个客户端复制邮政编码信息是愚蠢的，但是操作**必须**是如果出现问题，则回滚。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:57:44.597

如我所见，您基本上有两种选择。

1）在交易之外查询您的数据。根据您的应用程序的具体情况，这可能是将方法移到事务块之前，拆分方法并将其部分移到事务块之前，将数据预取到 RAM 中（可能将数据作为查询保存在变量），然后让您的方法使用此预取数据，而不是直接查询数据库。

然而，所有这些解决方案的结果都是相同的。那就是 SELECT 查询本身是在事务之外执行的。

如果由于某种原因这不切实际，那么继续...

2）使用相同的数据源。请注意，您不必使用相同的*数据库*，只需使用相同的*数据源*即可。所以，你可以在 MySQL 中使用 database.tablename 语法。

通过快速搜索，我找到了一个很好的例子： [一次查询多个数据库](https://stackoverflow.com/questions/2132654/querying-multiple-databases-at-once)

比我有更好的 Google-fu 的人可能很快就能想出更好的例子。

不过，基础是您在查询中使用 FROM database.tablename 而不是 FROM tablename。

但是，我相信这将要求数据库位于同一 MySQL 服务器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:50:24.517

所以我对如何解决这个问题有点困惑。我接受了史蒂夫的回答，因为他给了我这个想法（谢谢），但添加了下面的代码以显示解决方案的简单示例。

对我来说，数据源数据不能被复制，上面的代码**需要**它的包装事务。所以它只给我留下了一个解决方案，在我看来是一个半生不熟的解决方案......

```
<cffunction name="methodA" access="public" returntype="query" output="false">
  <cfset var q = ""/>
  <cfquery name="q" datasource="test_1">
    SELECT id, name FROM table_a
  </cfquery>
  <cfset methodB = methodB()/>
  <cfreturn q/>
</cffunction>

<cffunction name="methodB" access="public" returntype="query" output="false">
  <cfset var q = ""/>
  <cfquery name="q" datasource="test_1">
    SELECT id, name FROM table_b
  </cfquery>
  <cfset methodC = methodC()/>
  <cfreturn q/>
</cffunction>

<cffunction name="methodC" access="public" returntype="void" output="false">
  <cfset var q = ""/>
  <!--- 
  This will error with the following: 
    Datasource test_2 verification failed. 
    The root cause was that: java.sql.SQLException: 
    Datasource names for all the database tags within the cftransaction tag must be the same.
  <cfquery name="q" datasource="test_1">
    INSERT INTO test_2.table_z (`id`, `name`) VALUES ('1','test'); 
  </cfquery>
  --->

  <!--- This is the same query, however I have reused the datasource test_1
  and specified the DATABASE test_2 --->
  <cfquery name="q" datasource="test_1">
    INSERT INTO test_2.table_z (`id`, `name`) VALUES ('1','test'); 
  </cfquery>

</cffunction>

<cftransaction action="begin">
  <cfset data = methodA()/>
  <cftransaction action="commit"/>
</cftransaction> 
```

因此，如果不清楚，我的解决方案是删除对第二个*数据源* `test_2`的引用并改用`test_1` *数据源*。`test_2` **这意味着在查询中对第二个数据库**名称进行硬编码。显然，这可以动态完成，但是它确实会导致现有查询出现问题，因为它们需要更改。除此之外，如果第二个数据源是不同的数据库平台，如 MSSQL，这将不起作用。谢天谢地，这对我来说不是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T19:26:12.177

有同样的问题，只是将我的 cftransaction 标记移出第二个（或第一个）数据源 cfquery。如果您在整个代码中使用它们，这包括 CFC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T06:18:56.653

我看到这个问题很老了，但它仍然是 Lucee 的一个“问题”，可能在 2021 年还可能是 Adob​​e。这是我设计的解决方案。

我想要一种将调试消息发送到我编写的电话应用程序的方法。他们共享对数据库的访问。

这是我的解决方案的改编版。我的实际代码做了一些其他的事情，所以这还没有直接经过测试

```
public numeric function QueryQueue(required string sql, struct options = {}, struct params = {}, queryset = "default") {

  param name="request.queryQueue" default="#{}#";
  if (!StructKeyExists(request.queryQueue, arguments.queryset)) {
    request.queryQueue[arguments.queryset] = []
  }

  request.queryQueue[arguments.querySet].append({sql: "#arguments.sql#",
    options: arguments.options,
    params: arguments.params,
    removed: false});

  return request.queryQueue[arguments.queryset].len();
  // returning the length, and thus the position of the query,
  // so it can be specifically called if desired.
  // This is query QueryQueueExecute doesn't actually
  // delete elements, but marks them.
}

public any function QueryQueueExecute(required numeric pos, boolean remove = true, string queryset = "default") {
  if (!request.queryQueue[arguments.queryset][arguments.pos].removed) {
    var theQuery = QueryExecute(sql = request.queryQueue[arguments.queryset][arguments.pos].sql,
      options = request.queryQueue[arguments.queryset][arguments.pos].options,
      params = request.queryQueue[arguments.queryset][arguments.pos].params);
    if (arguments.remove) {
      request.queryQueue[arguments.queryset][arguments.pos].removed = true;
    }
    return theQuery;
  } else {
    return {recordcount: -1}; // a flag to show that the query wasn't executed, because it's already been "removed"
  }
}

public array function QueryQueueExecuteAll(boolean remove = true, string queryset = "default") {
  var queryArray = [];
  for (i = 1; i <= request.queryQueue[arguments.queryset].len(); i++) {
    queryArray.append(QueryQueueExecute(i, false));
    // false is deliberately set here, rather than passing the remove argument
    // since the array will be cleared after the loop.
  }
  if (arguments.remove) {
    request.queryQueue[arguments.queryset].clear();
  }
  return queryArray;
} 
```

这些函数让我可以对查询进行排队，并执行特定的查询，或者全部执行。如果需要，还有一个可以删除的标志，尽管我无法想象为什么它不会。

就我而言，我可以在 OnRequestEnd 和 ErrorHandler 中执行 run this，因为我的用途是用于调试。

# c++ - 类图中如何显示虚拟/抽象方法？

> ID：15070508
> 
> 赞同：0
> 
> 时间：2013-02-25T15:32:11.230
> 
> 标签：c++, visual-studio-2010, class, uml, class-diagram

首先，我来自 Java 社区，并且仍然是 C++ 的学习者。

请查看以下课程

![在此处输入图像描述](../Images/fc125230c9479b31f434f36722a9227e.png)

![在此处输入图像描述](../Images/bded3c1ca40565e7a1f184708375fc0d.png)

第二张图片显示了“GameObject”类的一个子类。它也有一个`Display()`方法。GameObject类有5个子类，都有这个`Display()`方法。那么，这种显示方式`GameObject`是不是虚拟的呢？

我认为它不是抽象虚拟（100% 虚拟），因为`Display()`in`GameObject`显示了一些文本`GameObject.cpp`

无论如何，我不太确定。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:50:47.503

在 C++ 中，当且仅当在基类或类本身中明确声明虚函数时，虚函数才是虚函数。由于 GameObject 似乎没有基类，`GameObject::Display()`因此必须声明为虚拟的，如果显示 GameObject 引用（或指针）应根据该引用背后的对象的实际（即运行时）类型来表现。在 GameObject.cpp 中有一个函数体并不意味着该函数不是纯虚拟的（Java 抽象的 C++ 等价物）。`= 0`您可以通过在其声明中添加 a 来使该函数成为纯虚函数。不过，您可以为纯虚拟方法提供实现，例如，在实现该方法的派生类中显式调用默认实现：

```
class GameObject { 
  //...
public:
  virtual void Display() = 0;
};

//GameObject.cpp
void GameObject::Display() { 
  /* do something */ 
}

//DerivedGO.h
class DerivedGO : public GameObject {
public:
  // virtual can be left out here, since it's declared virtual in the base class
  virtual void Display() {
    prepDisplay(); // do some preparation
    GameObject::Display(); //call the original/default implementation
  }
}; 
```

但是请注意，使函数成为纯虚函数意味着使包含类和每个派生类都成为抽象类，并且不会覆盖其基类中的所有纯虚函数。

# scala - scala：类成员只能从子类访问，并且子类必须在同一个包中。如何？

> ID：15070510
> 
> 赞同：0
> 
> 时间：2013-02-25T15:32:17.973
> 
> 标签：scala, package, protected, modifier

```
object P{
  object P1{
    class A{
      //I want only classes/objects that extends A AND in the package P1 can access x
      //It means, the modifier `protected` and the qualifier [P1] is combined with operator `AND`:
      //protected AND [P1] means, x is:
      //    protected: not in subclass then not accessible
      //    AND [P1]: not in [P1] then not accessible
      //protected OR [P1] means, x is:
      //    protected: not in subclass then not accessible
      //    OR [P1]: not in [P1] then not accessible
      protected[P1] val x = 1

      //Like `protected[this]`: y is protected AND [this]
      //because y is accessible only in subclass AND in the same object
      //(access to y in B2.f2 is permit but in B2.f3 is deny)
      //(if protected[this] == protected OR [this] then protected[this] == protected :D)
      protected[this] val y = 2

      //Also, I don't know why the following code is valid
      //(scalac 2.10.0 compile it!). Is this an error in scala compiler?
      //But this strange modifiers combination is also not what I want!
      private[P1] protected val z = 1
    }
    class B{
      def f(a: A) = a.x + a.z //permit!
    }
  }
  object P2{
    class B2 extends P1.A{
      def f = x + z //also permit!
      def f2 = y //permit. OK
      def f3(b: B2) = b.y //deny. OK
    }
  }
} 
```

我知道 protected[P1] 修饰符`x`与 java 的 protected 相同。但是，如何只允许从包 P1 中扩展 A AND 的类/对象访问 Ax？

编辑：@Randal 问：“你为什么关心包装约束？这对你有什么好处？”

我有一个带有复杂类的大型项目。我把班级分成几个特质。但是某些特征中的某些成员打算仅用于某些（但不是全部）其他子特征。因此，我将所有需要可访问性的特征组织在一个包中。需要这些特征逻辑的可实例化类被放在另一个包中。但是该类只需要访问某些特征的成员。然后我希望只有需要的成员对班级可见：

```
package p.base
private[base] trait A{
  //x is intent to be used only in trait B and C
  protected[base] val x = 1
}
private[base] trait B{this: A =>
  //f is intent to be used only in trait C
  protected[base] def f = x
  //f2 will be used in global.D
  def f2 = f
}
private[p] trait C extends B with A{...}

package p.global
class D extends p.base.C{
  def g = f2
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:01:34.153

仅使用专门的访问修饰符是不可能的。要获得编译时间限制，您可以使用这样的技术

```
object P {
  object P1 {

    class A {
      @implicitNotFound(msg = "Only accessible when extending from A")
      sealed trait OnlyA
      protected[this] implicit object OnlyA extends OnlyA

      private[P1] def x(implicit ev: A#OnlyA) = 1

      private[P1] val z = 1
    }

    class B {
      def f(a: A) = a.z + a.x         // Will not work
    }
    class C extends A {
      def f(a: A) = a.z + a.x         // Works
    }
  }
  object P2 {

    class B2 extends P1.A {
      def f = x                       // Will not work
      def f(a: P1.A) = a.x + a.z      // Will not work
    }
  } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:01:41.723

您可以保护构造函数`private[PkgName]`并提供工厂以提供公共创建，因此子类化仅限于该包：

```
package pkg
...
  class A private[pkg] { ...
  }

  object A {
    def apply(): A = new A
  }
  ... 
```

# jquery - 链 $.when, .then(), .done()

> ID：15070511
> 
> 赞同：1
> 
> 时间：2013-02-25T15:32:27.347
> 
> 标签：jquery, jquery-deferred

我想执行一个 ajax 请求，完成后，将返回的 HTML 附加到一个 div，一旦附加了该数据，执行另一个 ajax 请求，然后将内容添加到之前附加的 HTML。但显然我有一些语法错误。我是否链接`then()`错误`done()`？

```
$.when(append_line_item())
 .then(function (line_item_data) {
    $('#line_items').append(line_item_data)}
  .done(populateMainProductsSelect())
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:34:17.083

你想多了，你不需要`$.when`或`$.then`在这种情况下。

```
// assuming append_line_item() returns a promise object
append_line_item().done(function(line_item_data){
    $('#line_items').append(line_item_data);
    populateMainProductsSelect();
}); 
```

语法错误发生在这里：

```
 done(populateMainProductsSelect()) 
```

你只需要删除`()`

```
 done(populateMainProductsSelect) 
```

# ios - iOS地图覆盖不更新

> ID：15070512
> 
> 赞同：1
> 
> 时间：2013-02-25T15:32:27.943
> 
> 标签：ios, objective-c, multithreading, overlay, mapkit

我正在创建一个应用程序，它为美国各地的任何可用用户发送呼叫请求，同时通过地图覆盖和进度条更新呼叫发送者的进度。出于某种原因，无论我尝试使用 Grand Central Dispatch、CATransaction 等什么技巧，地图和进度条都不会更新到最后一步。请注意，我使用 Parse 作为后端，并在获得目的。

```
 dispatch_queue_t main_queue = dispatch_get_main_queue();
    PFQuery *repQuery = [PFQuery queryWithClassName:@"User"];
    [repQuery getObjectInBackgroundWithId:[_currentCallObject objectForKey:@"Rep"] block:^(PFObject *repUser, NSError *error) {
        PFGeoPoint *repLocation = [repUser objectForKey:@"location"];
        dispatch_async(main_queue, ^{
            CLLocationCoordinate2D coordinates[2];
            coordinates[0] = _repMapView.userLocation.coordinate;
            coordinates[1] = CLLocationCoordinate2DMake(repLocation.latitude, repLocation.longitude);
            MKPolyline *route = [MKPolyline polylineWithCoordinates:coordinates count:2];
            MKCircle *circle1 = [MKCircle circleWithCenterCoordinate:coordinates[0] radius:40000];
            MKCircle *circle2 = [MKCircle circleWithCenterCoordinate:coordinates[1] radius:40000];
            [_repMapView addOverlay:circle1];
            [_repMapView addOverlay:circle2];
            [_repMapView addOverlay:route];
            [_repMapView setNeedsDisplay];
            [_callProgressView setProgressToStep:4];
            [CATransaction flush];
        });
    }]; 
```

进度视图包含在一个单独的 .m 文件中，但覆盖在同一个 .m 文件中绘制，如下所示：

```
- (MKOverlayView *)mapView:(MKMapView *)map viewForOverlay:(id <MKOverlay>)overlay
{
    // MKCircle and MKPolyline handled here
} 
```

我还将以下所有内容放在头文件中：MKMapViewDelegate, MKAnnotation, MKOverlay 另外，_repMapView.delegate = self; 在地图视图的初始绘图中设置。

我是否遗漏了一些明显的东西导致 UI 无法实时更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:10:11.177

啊，我在一个没有被输入的块内有那个代码，因为我假设的条件不是。验证它不是地图代码帮助我确定了这个非常基本的不相关问题。谢谢。

# java - 如何测试非线程安全类？

> ID：15070513
> 
> 赞同：4
> 
> 时间：2013-02-25T15:32:28.287
> 
> 标签：java, multithreading

我是线程的新手。我正在阅读实践中的 Java 并发。我在书中找到了以下示例。

```
@NotThreadSafe
public class UnSafeSequence
{
     private int value;
     public int getNext()
     {
         return value++;
     }
} 
```

我想通过编写几个线程（或更多）访问这个类来测试这段代码，以获得线程安全的感觉。

我尝试了这些，但不确定如何测试这些示例。

```
class MyThread implemented Runnable
{
    public void run()
    {
        //Should I create a new object for UnSafeSequence here ?
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:34:41.950

> 我想通过编写几个线程（或更多）访问这个类来测试这段代码，以获得线程安全的感觉。

如果每个线程都有自己的实例，`UnSafeSequence`那么它不会显示问题。您需要做的是在`UnSafeSequence`您的实例之外创建一个实例`MyThread`并将其传递给 each 的构造函数`MyThread`。

```
 UnSafeSequence unsafe = new UnSafeSequence();
 ...
 new Thread(new MyThread(unsafe)).start();
 new Thread(new MyThread(unsafe)).start();
 ...
 class MyThread implemented Runnable {
       private UnSafeSequence unsafe;
       public MyThread(UnSafeSequence unsafe) {
            this.unsafe = unsafe;
       }
       public void run() {
            ...
            unsafe.getNext();
            ...
       }
 } 
```

在学习线程时，请务必阅读有关线程`ExecutorService`和其他出色课程的信息。这是[来自 Sun^H^H^H Oracle 的一个很好的教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:35:19.000

不，如果您`UnSafeSequence`在`run`每个线程中创建一个新实例，将有自己的`value`成员，这不会显示问题。您有 2 个选项：

*   make`value`和`getNext()`static 并调用它`UnSafeSequence.getNext()`

*   创建一个共享对象并在创建时将其传递给您的线程

    ```
    class MyThread implemented Runnable
    {
       UnSafeSequence unsafe;
       MyThread(UnSafeSequence unsafe) { this.unsafe = unsafe; }
       public void run() { /* call unsafe.getNext(); */ }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:35:13.043

您可以为每个线程创建一个`UnSafeSequence`实例，这将是完全安全的。如果对 N 个线程执行此操作，您将拥有 N 个值副本，即有问题的非同步数据。

如果您想以线程不安全的方式访问它，您需要创建单个实例，`UnSafeSequence`然后从多个线程调用 getNext()。

# ruby - Ansicon 不适用于 Windows 8

> ID：15070524
> 
> 赞同：2
> 
> 时间：2013-02-25T15:33:18.373
> 
> 标签：ruby, windows, 64-bit

Ansicon 似乎不想与 Windows 8 一起工作。

1 - 我正确安装它：`ansicon -i`在 x64 目录下（因为我在 64 位机器上安装了 Win 8），2 - 我启动了一个新的命令窗口，运行`rspec`以在 ruby​​ 中运行单元测试

结果 - ANSI 字符仍在显示未转换的原始数据。

任何帮助，将不胜感激; 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:39:37.137

听起来`ansicon`可能没有正确安装。我在`ansicon`Ruby 1.9.3p392 的 Windows 8 64 位上运行良好。

[http://imgur.com/n28vomG](http://imgur.com/n28vomG)

尝试`ansicon -i`从提升的命令提示符运行，看看是否有任何不同。如果您没有管理员权限，请运行`ansicon -p`以挂钩当前会话的父进程，然后查看是否`rspec`返回彩色输出。

如果仍然无法正常工作，可以尝试重新安装最新版本的`ansicon`. 我在我的 Ruby目录中安装了 64 位文件（`ANSI32.dll`, `ANSI64.dll`, `ansicon.exe`, ），所以我知道它在我的 PATH 中。`ANSI-LLW.exe``bin`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T19:42:45.377

我做了一个便宜的把戏，直接在我的桌面上做了​​一个快捷方式来使用它。将它添加到路径崩溃的红宝石。

# android - GridView 3 Columns / GridView 1 Column 之间的动画

> ID：15070528
> 
> 赞同：1
> 
> 时间：2013-02-25T15:33:30.873
> 
> 标签：android, android-animation

我正在构建一个应用程序，其中我有一个结果项目的 GridView 显示在屏幕上。当用户单击其中一个项目时，结果片段被推到一边并显示一个详细片段。我使用[了 Gmail 三片段动画场景的完整工作示例中的CommonsGuy 实现（](https://stackoverflow.com/questions/12253965/complete-working-sample-of-the-gmail-three-fragment-animation-scenario) [https://github.com/commonsguy/cw-omnibus/tree/master/Animation/ThreePane](https://github.com/commonsguy/cw-omnibus/tree/master/Animation/ThreePane)） ？为了那个原因。

![在此处输入图像描述](../Images/21ea6bc055bfdac7e1315ec7f2e1b181.png)

这一切都很好，唯一的事情是我将结果片段的 GridLayout 从 3 列设置为 1 列，当它们向左推时，这看起来不像耐克并且可能会使用户感到困惑。我怎样才能为这个过渡设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:27:13.090

试试这个代码

```
Fragment newFragment;
newFragment=new one_defalut();
FragmentTransaction transation=getFragmentManager().beginTransaction();
transation.setCustomAnimations(R.anim.slide_in_right, 0);
transation.replace(R.id.myfragment, newFragment);
transation.addToBackStack(null);
                    //transation.setTransitionStyle(FragmentTransaction.TRANSIT_FRAGMENT_FADE);

transation.commit(); 
```

**slide_in_right.xml**的代码

 **```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:propertyName="x" 
    android:valueType="floatType"
    android:valueFrom="1280"
    android:valueTo="0" 
    android:duration="300"/>
</set> 
```**

# php - 在 cdata php 中使用 strong - Magento

> ID：15070532
> 
> 赞同：1
> 
> 时间：2013-02-25T15:33:45.367
> 
> 标签：php, javascript, magento

![在此处输入图像描述](../Images/4e06b1c986f4d4259c58839c3f41dffc.png)

我正在尝试将“我的搜索”的“搜索”部分加粗，但我没有得到任何结果。

我正在尝试编辑：

app/design/fontend/base/default/template/cataloguesearch/form.mini.phtml

如果我添加 strong 或 span 它看起来像这样：

![在此处输入图像描述](../Images/685fcff7a4e67f5d90330873e97fa926.png)

有问题的代码是这样的：

```
<script type="text/javascript">
    //<![CDATA[
        var searchForm = new Varien.searchForm(
            'search_mini_form', 
            'search', 
            '<?php echo $this->__('MY <span>SEARCH...</span>') ?>'
        );
        searchForm.initAutocomplete(
            '<?php echo $catalogSearchHelper->getSuggestUrl() ?>', 
            'search_autocomplete'
        );
    //]]>
</script> 
```

我认为您不能在该区域使用 strong 或 span - 还有其他方法吗？

我看了一下，但不确定如何搜索如此具体的东西，到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:38:25.657

您不能将 HTML 放在输入字段中。没有办法只突出显示或加粗某些单词，除非您以不同的方式执行此操作 - 即绝对将标签定位在空文本字段的顶部（或后面）。

（更新）

# html - 根据用于播放的设备调整 HTML5 视频的大小

> ID：15070538
> 
> 赞同：0
> 
> 时间：2013-02-25T15:34:11.803
> 
> 标签：html, video

我正在使用以下代码播放 html5 视频：-

```
<video id="my_video_1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264" data-setup="{}">
    <source src="http://s3.amazonaws.com/o2media.videolibrary/348.mp4" type='video/mp4'>
</video> 
```

当我在浏览器中播放时，它运行良好，但在 iPhone 或类似设备中无法播放。

如何调整这些视频的大小，以便它们能够在浏览器和其他设备上播放？

**编辑**

有什么方法可以在调用函数时使用 javascript 来调整窗口大小？

问候维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:57:02.937

如果要调整视频大小，有两种选择。如果您检测到您在 iPhone 上，第一个是简单地调整元素的宽度/高度参数`<video>`，第二个是调整元素的大小，但也选择更适合移动使用的比特率视频，而不是发送更高的比特率。

使用 UserAgent 检测（不太好）或 CSS 媒体查询（请参阅这篇文章 - [http://www.quirksmode.org/blog/archives/2010/08/combining_media.html](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)），您可以确定您拥有的窗口的大小，并且可以相应地更改您的代码。

调整窗口大小...大多数现代浏览器都会禁用此功能，除非它是您自己创建的窗口 -有关更多详细信息，请参阅[The javascript "resizeTo" function not working in Chrome and Opera](https://stackoverflow.com/questions/3641648/the-javascript-resizeto-function-not-working-in-chrome-and-opera)

# apache - 0.7.2 的 apache mime4j maven 依赖项

> ID：15070543
> 
> 赞同：4
> 
> 时间：2013-02-25T15:34:33.880
> 
> 标签：apache, maven

尝试对版本 0.7.2 使用 Apache Mime4J 依赖项，如下所示：

```
<repositories>
  <repository>
    <id>org.apache.james</id>
    <url>http://repo1.maven.org/maven2/</url>
  </repository>
</repositories>

<dependency>
  <groupId>org.apache.james</groupId>
  <artifactId>apache-mime4j</artifactId>
  <version>0.7.2</version>
</dependency> 
```

我收到一条错误消息，指出无法下载依赖项。检查 [http://uk.maven.org/maven2/org/apache/james/apache-mime4j/0.7.2/apache-mime4j-0.7.2.jar](http://uk.maven.org/maven2/org/apache/james/apache-mime4j/0.7.2/apache-mime4j-0.7.2.jar) 确实不存在但[http://uk.maven .org/maven2/org/apache/james/apache-mime4j/0.7.2/](http://uk.maven.org/maven2/org/apache/james/apache-mime4j/0.7.2/) 有 .bin.tar.gz 文件我使用以下方法解决了这个问题：

```
<dependency>
   <groupId>org.apache.james</groupId>
   <artifactId>apache-mime4j</artifactId>
   <version>0.6.1</version>
</dependency> 
```

因此，这不会引用更新的 0.7.2 版本。

这是我的“一组问题”：

*   为什么 0.7.2 版本不包含 Jar 文件？
*   我应该如何引用依赖项来获取最新的 Jar？
*   我还需要它吗？
*   0.7.2 和 0.6.1 版本之间有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:42:27.103

**问题 1：为什么工件可能不存在**

根据变更日志，正在进行一些重构，将功能分为三个部分：核心、dom 和存储。

**问题二：如何获取最新神器**

将依赖项修改为：

```
 <dependency>
   <groupId>org.apache.james</groupId>
   <artifactId>apache-mime4j-core</artifactId>
   <version>0.7.2</version>
 </dependency>
 <dependency>
   <groupId>org.apache.james</groupId>
   <artifactId>apache-mime4j-dom</artifactId>
   <version>0.7.2</version>
 </dependency>
    <dependency>
    <groupId>org.apache.james</groupId>
    <artifactId>apache-mime4j-storage</artifactId>
    <version>0.7.2</version>
  </dependency> 
```

**问题3：我需要吗？**

如果您想使用改进的 DOM API：是的。您将需要修改您的导入语句，并且不能再使用 new Message()。采用

```
MessageServiceFactory.newInstance().newMessageBuilder().newMessage(); 
```

反而。multipart.getBodyParts() 函数也发生了变化，现在返回一个实体。实体没有 isMimeType()。您可能想改用 getMimeType()。

**问题 4：版本之间有什么变化？**

查看[0.7.2 和 0.6.1 之间的更改日志。](http://svn.apache.org/repos/asf/james/mime4j/trunk/RELEASE_NOTES.txt)

# objective-c - 使用 OpenCV 的 Apple Mach-O 链接器和多个“未定义符号”错误

> ID：15070556
> 
> 赞同：36
> 
> 时间：2013-02-25T15:35:11.760
> 
> 标签：objective-c, xcode, opencv

我目前是 Objective C 的真正初学者，我正在使用框架 OpenCV 开发一个应用程序。

我正在关注一个教程，但是在构建项目时，我遇到了几个错误：

```
Undefined symbols for architecture i386:
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::flush()", referenced from:
      cv::gpu::error(char const*, char const*, int, char const*) in opencv2(gpumat.o)
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::sentry(std::__1::basic_ostream<char, std::__1::char_traits<char> >&)", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in opencv2(gpumat.o)
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::~sentry()", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in opencv2(gpumat.o)
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::operator<<(int)", referenced from:
      cv::gpu::error(char const*, char const*, int, char const*) in opencv2(gpumat.o)
  "std::__1::cerr", referenced from:
      cv::gpu::error(char const*, char const*, int, char const*) in opencv2(gpumat.o)
  "std::__1::ios_base::__set_badbit_and_consider_rethrow()", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in opencv2(gpumat.o)
  "std::__1::ios_base::clear(unsigned int)", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in opencv2(gpumat.o)
  "std::__1::__vector_base_common<true>::__throw_length_error() const", referenced from:
      __ZNSt3__16vectorImNS_9allocatorImEEE6assignIPmEENS_9enable_ifIXsr21__is_forward_iteratorIT_EE5valueEvE4typeES7_S7_ in opencv2(matrix.o)
      std::__1::vector<unsigned long, std::__1::allocator<unsigned long> >::vector(unsigned long) in opencv2(matrix.o)
      std::__1::vector<unsigned long, std::__1::allocator<unsigned long> >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<float, 2>, std::__1::allocator<cv::Vec<float, 2> > >::vector(unsigned long) in opencv2(matrix.o)
      std::__1::vector<int, std::__1::allocator<int> >::vector(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 128>, std::__1::allocator<cv::Vec<int, 128> > >::__append(unsigned long) in opencv2(matrix.o)
      std::__1::vector<cv::Vec<int, 64>, std::__1::allocator<cv::Vec<int, 64> > >::__append(unsigned long) in opencv2(matrix.o)
      ...
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init(char const*, unsigned long)", referenced from:
      cv::Mat::create(int, int const*, int) in opencv2(matrix.o)
      __ZN2cvL7setSizeERNS_3MatEiPKiPKmb in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Rect_<int> const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const*) in opencv2(matrix.o)
      cv::Mat::diag(int) const in opencv2(matrix.o)
      cv::Mat::Mat(_IplImage const*, bool) in opencv2(matrix.o)
      ...
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::~basic_string()", referenced from:
      cv::Mat::create(int, int const*, int) in opencv2(matrix.o)
      __ZN2cvL7setSizeERNS_3MatEiPKiPKmb in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Rect_<int> const&) in opencv2(matrix.o)
      cv::Mat::Mat(cv::Mat const&, cv::Range const*) in opencv2(matrix.o)
      cv::Mat::diag(int) const in opencv2(matrix.o)
      cv::Mat::Mat(_IplImage const*, bool) in opencv2(matrix.o)
      ...
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::resize(unsigned long, char)", referenced from:
      __ZL8icvCloseP13CvFileStoragePNSt3__112basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEE in opencv2(persistence.o)
  "std::__1::basic_string<wchar_t, std::__1::char_traits<wchar_t>, std::__1::allocator<wchar_t> >::__init(wchar_t const*, unsigned long)", referenced from:
      cv::toUtf16(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in opencv2(persistence.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init(char const*, unsigned long, unsigned long)", referenced from:
      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > std::__1::operator+<char, std::__1::char_traits<char>, std::__1::allocator<char> >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, char const*) in opencv2(system.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*)", referenced from:
      cv::tempfile(char const*) in opencv2(system.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long)", referenced from:
      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > std::__1::operator+<char, std::__1::char_traits<char>, std::__1::allocator<char> >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, char const*) in opencv2(system.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::assign(char const*)", referenced from:
      cv::tempfile(char const*) in opencv2(system.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      cv::Exception::Exception(int, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) in opencv2(system.o)
      cv::tempfile(char const*) in opencv2(system.o)
      cv::Exception::Exception(cv::Exception const&) in opencv2(system.o)
      cv::operator<<(cv::FileStorage&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in opencv2(persistence.o)
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::operator=(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      cv::Exception::formatMessage() in opencv2(system.o)
      cv::tempfile(char const*) in opencv2(system.o)
      cv::operator<<(cv::FileStorage&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in opencv2(persistence.o)
ld: symbol(s) not found for architecture i386

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我确信问题来自框架，而不是框架本身，而是它在项目中的链接方式，或者......

我准确地说我已经在 .pch 文件中以这种方式链接它

```
 #import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

真不知道该怎么办。。

编辑：忘了告诉我我将我的 .m 文件重命名为 .mm 并将我的 .h 文件重命名为 .hh 我们还需要做些什么来获得一个客观的 C++ 项目吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-02-25T16:50:03.407

基于 Cthutu 的回答，将 libc++.dylib 添加到您的项目中：

1.  在您的项目导航器中选择您的项目（蓝色文件）（命令 1，如果它是隐藏的）
2.  选择你的目标
3.  转到构建阶段
4.  展开“将二进制文件与库链接”
5.  点击“+”
6.  在搜索栏中键入 libc++.dylib。
7.  选择 libc++.dylib 文件并按“添加”

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-25T16:36:18.803

您缺少标准 C++ 库。您需要与它链接以获取您遇到错误的 STL 类的所有实现。

将 libc++.dylib 添加到您的项目中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-10T03:11:04.730

这实际上似乎隐藏了实际问题：您的 LLVM 编译器默认情况下可能没有选择合适的标准 C++ 库进行编译。你应该去

`Project (or your Target) -> Build Settings -> Apple LLVM 6.0 - Language - C++ -> C++ Standard Library`

并确保您选择`libc++`作为您的选择，而不仅仅是`Compiler Default`，因为现代 OpenCV 库与 libc++ 链接。这将解决您的问题，而无需添加额外的 libc++.dylib。`Compiler Default`如果您实际上不选择 libc++ 库，则包含 libc++.dylib 框架作为解决方法并不总是有效！

要检查“编译器默认值”是什么，您可以[执行以下操作](https://stackoverflow.com/questions/12865226/in-xcode-4-5-what-is-compiler-default-for-c-standard-library-and-c-lan)。我的以某种方式选择 c++98 作为默认值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-09T07:31:51.943

用户还可以在**“Link Binary With Libraries”**`libc++.tbd`中添加if `libc++.dylib`is not available

 **谢谢米特什

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-06T13:51:15.567

我有类似的问题，尝试从“其他链接器标志”中删除“-lopencv_ts”**

# d - 从 DMD 查看带有行号的程序集

> ID：15070559
> 
> 赞同：1
> 
> 时间：2013-02-25T15:35:16.660
> 
> 标签：d, dmd

如何查看源代码中特定行的汇编代码？

我尝试使用 DMD 和`-g`and `-gc`（在 Windows 上）编译我的源代码并用于`objconv`输出 and 的程序集`.obj`，`.exe`但似乎没有关于行号等的任何提示。但是当我使用`Code::Blocks`并设置断点时，它显示了一些像这样组装

```
004030CE    // C:\...\TEST\main.d:291   matrix.array[3] = 0;
004030CE    mov dword [ebp+0xfffffec4], 0x0 
```

所以一定有一些关于某处线路的信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:19:23.393

非常有用和简单的方法是在 Visual Studio / [Visual D](http://www.dsource.org/projects/visuald)插件中。

只需放置一个断点，在调试模式下启动程序，然后从菜单 Debug/View 中显示 Disassembly。

如果您没有 Visual Studio，您可以下载 Visual Studio Shell（空 IDE），您可以在其中安装 VisualD 插件。[VS 壳牌 2010](http://www.microsoft.com/en-us/download/details.aspx?id=115)或[VS 壳牌 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30663)

![在此处输入图像描述](../Images/021e26a105f17cfa73c8738ab4931982.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:48:29.177

您可能想要使用[http://d.godbolt.org/](http://d.godbolt.org/)（仅限 gdc）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:47:46.017

这是您可以在现有项目上创建 CodeBlocks (v10.05) 项目以`DMD`与`Ddbg_gdb`调试器一起使用并在断点处查看组件的方式：

1.  `File>New>Project...>D application`
2.  根据需要设置项目名称
3.  将“创建项目的文件夹”更改为您已经拥有源文件的目录
4.  将“结果文件名”更改为 (3) 中的目录并添加“项目文件名”。（如果您的项目文件夹是`C:\some\path\srcBaseDir`并且您的项目文件名是，`myProject.cbp`那么生成的文件应该是`C:\some\srcBaseDir\myProject.cbp`）
5.  设置“数字火星 D 编译器”并完成
6.  `Settings>Compiler and Debugger...`
    *   设置“Digital Mars D Compiler”所需的所有目录
    *   将工具链更改`executables>Debugger`为“ddbg_gdb”
    *   点击确定
7.  右键单击您的项目并递归添加文件并添加您需要的所有源文件

现在，您应该能够设置断点，Ddbg_gdb 将正确识别断点，并使用 Disassembly 视图查看程序集`Debug>Debugging Windows>Disassembly`

# python - 如何可靠地从元标记中提取属性、内容？

> ID：15070564
> 
> 赞同：0
> 
> 时间：2013-02-25T15:35:27.440
> 
> 标签：python, html, string, parsing

我有例如。以下几行 HTML。我需要提取并获取`og:image`属性`content`列表。问题是，如果我像简单的 string.split() 那样做，下面几行的结果将不一样，因为第二行的`content`值有很多空格。

我怎样才能可靠地处理这样的字符串行并获得类似的列表： `['og:image', 'http....whatever.jpg']`第二行相同？

```
 <meta property="og:image" content="http://google.com/example.jpg"/>
 <meta property="og:title" content="Fant over 300 falske personer i skattelistene"/> 
```

编辑：我现在这样解析：

```
tree = etree.HTML( xml )
m = tree.xpath("//meta[@property]")
for i in m:
    og = etree.tostring( i )
    print og # <meta property="og:image" content="http://google.com/example.jpg"/> 
```

也许有一种方法可以直接使用 XPath 将内容/属性放入列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:43:56.903

无需将元素转换回字符串，只需通过`attrib`每个元素的映射来获取属性：

```
for i in m:
    print (i.attrib['property'], i.attrib['content']) 
```

# django - 继承管理器。如何从继承模型中获取字段？

> ID：15070566
> 
> 赞同：0
> 
> 时间：2013-02-25T15:35:37.157
> 
> 标签：django

```
from model_utils.managers import InheritanceManager

class Property(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField()
    desc = models.TextField()
    objects = InheritanceManager()

class Apartament(Property):
    bedrooms = models.IntegerField()
    levels = models.IntegerField()
    something = models.CharField(max_length=255) 
```

意见：

```
p = Property.objects.get(slug=slug)
return render_to_response(...{'p':p} ...) 
```

模板：

```
{{ p.title }} 
```

我可以从 访问这些字段`Apartament`吗？例如：

```
{{ p.bedrooms }} 
```

如何在我的模板中获得卧室？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:20:01.423

`Property.objects.get`您调用的方法是 vanilla models.Manager ，它只为您提供一个`Property`对象。您需要使用`get_subclass`提供的方法`InheritanceManager`来获取派生类的实例：

```
p = Property.objects.get_subclass(slug=slug) 
```

# javascript - 每 x 秒生成随机数并显示

> ID：15070567
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:35:36.677
> 
> 标签：javascript, windows-store-apps

在我的应用程序中，我有一种始终显示的底栏，其中有一个带有 h1 的 div 和一个按钮。每次我单击我编码的按钮和动画时，都会用随机数更改 h1 的文本。到这里一切正常。

我的目标是在不按按钮的情况下制作这个东西，但在所有应用程序执行期间每隔 x 秒。我尝试使用“setInterval(func, ms);” 我没有收到任何错误，但它只是做了一次。

我认为我的错误是“在哪里放置”代码。我不明白这一点。因此，我尝试将代码放在按钮的事件处理程序上，只是为了看看它是否有效，但无论如何它还是做了一次。我需要在用户执行其他操作时继续执行此功能...就像应用程序中的时钟：它应该在您执行其他操作时连续工作。

我的功能代码：

```
function fraseCasuale(sel) {
    var i = 1 + Math.floor(Math.random() * (groupedItems.length-1));
    var oggetto = groupedItems.getAt(i);

    if (sel === 1) {
        document.getElementById("frasecasuale").textContent = oggetto.frase;
        document.getElementById("autore").textContent = oggetto.nome;
        document.getElementById("genere").textContent = oggetto.genere;
    } else {
        document.getElementById("frasecasuale2").textContent = oggetto.frase;
        document.getElementById("autore2").textContent = oggetto.nome;
        document.getElementById("genere2").textContent = oggetto.genere;
    }
} 
```

然后我怎么称呼它，例如：

```
setInterval(fraseCasuale(1), 5000); 
```

我的应用程序基于 Visual Studio 2012 for Windows Store aps 的网格模板。我将上面所说的栏添加到“default.html”中，这是其他页面的容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:40:37.500

你确定这样的事情不起作用吗？

```
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

var ms = 2000;
var func = function () {
    var randNum = getRandomInt(1, 253);    // Gets random number between 1 and 253
    document.getElementById("element_id").innerHTML = randNum;
};

setInterval(func, ms); 
```

[http://jsfiddle.net/FQSAH/1/](http://jsfiddle.net/FQSAH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:40:31.270

这应该工作...

```
var id = window.setInterval(function(){randomNumber()},1000);

function randomNumber()
{
  var rand = Math.floor(Math.random()*6)
  //Do whatever you want with that number
} 
```

快速 JSBin：http: [//jsbin.com/egajog/1/](http://jsbin.com/egajog/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T06:43:24.303

代码中的问题是您没有将函数传递给 setInterval，而是传递了函数调用 fraseCasuale(1) 的 ONE TIME 结果，因此该函数的结果就是传递给 setInterval 的结果。

由于您要向其传递参数，因此 setTimeout 允许您在函数指针和超时间隔之后指定参数，例如：

```
 setInterval(fraseCasuale,5000,1); 

```

如果您在定义的“页面”中执行此操作，您将在 home.js 中执行类似的操作

```
 WinJS.UI.Pages.define("/pages/home/home.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            setInterval(this.fraseCasuale, 1000, 656);
        },

        fraseCasuale: function (sel) {
            console.log(sel);
            var i = 1 + Math.floor(Math.random() * (4 - 1));
            var element = document.getElementById("updateMe");
            element.textContent = i;
        }
    }); 
```

或者，如果只是使用 default.js，那么您可以将您的代码放在 app.ready 中，就在上面的 ex。app.oncheckpoint （顺序实际上在任何函数之上或之下都无关紧要，只是提供一个向您展示示例的地方）

所以在 default.js 中：

```
 app.onready = function (args) {
        //1 is a placeholder for your parameter
        setInterval(fraseCasuale,5000,1);
    }; 
```

# ios - 如何从后台线程返回数据？

> ID：15070568
> 
> 赞同：0
> 
> 时间：2013-02-25T15:35:39.873
> 
> 标签：ios, multithreading, grand-central-dispatch

我有一个方法应该返回一个填充在后台线程中的数组。我想等待返回语句，直到数组完全填充。我该怎么做？我知道如何处理没有返回类型的数据，但我想调用这个函数并获取填充的数组。

示例（此处数组最终为空，因为它在填充数组之前返回 - 我想做一些事情来返回填充的数组）：

```
-(NSArray*)fetchSomeArray{

    __block NSArray *arrayToReturn;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,(unsigned long)NULL), ^(void) {

        NSArray *someArray = ...; // getting some array from database
        arrayToReturn = [NSMutableArray new];

        for(int i=0;i<someArray.count;i++){

            [arrayToReturn addObject:...];
        }

    });

    return arrayToReturn;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:42:45.110

使用委托，或阻止并取出`return arrayToReturn;`. 在您的“for”之后和“dispatch_async”内部：

```
dispatch_async(dispatch_get_main_queue(),^{
      [myDelegate passComputedArray:arrayToReturn];
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T15:45:30.723

```
- (void)someMethod:(void (^)(BOOL result))completionHandler {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //all your functionality

        // Check that there was not a nil handler passed.
        if( completionHandler ){
            //your function to so that you can return
        }
        });
    }); 
```

传递完成处理程序，完成后，执行您的功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:45:23.313

如果您想等到它返回，则无需将其置于后台。

```
-(NSArray*)fetchSomeArray{
    NSArray *someArray = ...; // getting some array from database
    return someArray;
} 
```

但我敢打赌，你真的想用返回值做一些事情，这需要一些时间来计算而不阻塞主线程，所以你可以将数组传递回同一对象或其他地方的方法。

```
-(void)fetchSomeArray{
    __block id bself = self;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,(unsigned long)NULL), ^(void) {
        NSArray *someArray = ...; // getting some array from database
        [bself arrayFetched:someArray];
    });

    return arrayToReturn;
}

-(void)arrayFetched:(NSArray*)array{
    // do something with the returned array
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:43:06.913

处理这个问题的最简单方法是在数组完成后调用一个函数并在那里处理数组。

```
-(void)fetchSomeArray{
    __block NSArray *arrayToReturn;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,(unsigned long)NULL), ^(void) {

    NSArray *someArray = ...; // getting some array from database
    arrayToReturn = [NSMutableArray new];

    for(int i=0;i<someArray.count;i++){

        [arrayToReturn addObject:...];
    }

    [self finishedArrayResult:arrayToReturn];

}); 
```

}

但是，如果您希望该返回函数更新 UI 中的任何内容，则需要在主线程而不是后台运行该函数。为此，您可以使用`performSelector: onThread: withObject: waitUntilDone:`或使用另一个`dispatch_async`使用主线程而不是全局线程。

# jquery - fancybox 链接将浏览器重定向到图像路径

> ID：15070573
> 
> 赞同：0
> 
> 时间：2013-02-25T15:36:02.103
> 
> 标签：jquery, fancybox-2

我试图在单击时显示在花式框（2）中放大的内容。问题是，当点击图像时，尽管它正确显示在幻想框内，但浏览器会离开页面并转到 href 中定义的链接。我怎样才能防止这种情况？

```
<script type="text/javascript">
  $(document).ready(function() {
  $(".fancybox").fancybox({
    helpers :{
      title :{
         type : 'over'
      }
     }
   });
 });
</script>

<table>
  <tbody>
    <tr>
      <td>
        <a class="fancybox ui-link" title="My Image href="http://localhost/images/my_image.jpg"><img style="width:64px; height:64px;" src="images/my_image.jpg" alt=""></a>
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-04T16:44:11.187

我知道已经很晚了，但是......它可以帮助某人。

我有同样的问题，并意识到我们使用**data-src**而不是 * *href*：

```
<a data-fancybox="image" data-src={{asset('uploads/sobre/'.$itemimage)}}"  data-caption="{{$item->title}}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:59:44.193

首先，您的 html 代码中的 Title 属性缺少一个 "。

其次，我不确定，但您应该尝试使用图像的相对路径而不是绝对路径。

例如 ：

```
<a class="fancybox ui-link" title="My Image" href="images/my_image.jpg"><img style="width:64px; height:64px;" src="images/my_image.jpg" alt="" /></a> 
```

# xaml - Windows 应用商店应用日历 XAML 控件

> ID：15070574
> 
> 赞同：4
> 
> 时间：2013-02-25T15:36:02.897
> 
> 标签：xaml, windows-runtime, custom-controls, windows-store-apps

我正在寻找一个日历控件来显示日程安排。虽然本机应用程序提供了这个功能，看起来像这样![日历截图](../Images/8cd877de18d6bd7c5296f2b3b7ce0c49.png)

我确实想将其包含在我自己的应用程序中。**我可以使用任何（最好是免费的）控件吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:22:09.587

日历控件在 Syncfusion WinRT studio 中可用。

[http://www.syncfusion.com/products/winrt/controls](http://www.syncfusion.com/products/winrt/controls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:59:25.063

我们发货日历控件： http: [//www.componentone.com/SuperProducts/CalendarWinRT/](http://www.componentone.com/SuperProducts/CalendarWinRT/) 试用版是免费的，大家可以看看。当前版本仅支持月视图，并没有对调度对象模型的嵌入式支持。因此，大部分工作应该从您的代码中完成，并且存在一些布局限制（您不能像在本地日历中那样在几天内显示多日事件）。这是一个交互式日历示例，可以创建、编辑和删除约会： http: [//our.componentone.com/samples/winrtxaml-calendardata](http://our.componentone.com/samples/winrtxaml-calendardata)。制作具有日程安排支持的全功能日历仍在我们的待办事项列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:06:06.197

[我在这里](http://winrtxamlcalendar.codeplex.com/)从 Silverlight Toolkit 移植了一个日历控件，但我认为它只支持月视图而不支持每日计划。不过我可能是错的，因为我从未使用过它。

# c# - 回滚后 ExecuteNonQuery 的返回值

> ID：15070579
> 
> 赞同：17
> 
> 时间：2013-02-25T15:36:25.513
> 
> 标签：c#, .net, stored-procedures, sqlclient

假设我们有一个这样的存储过程：

```
BEGIN TRANSACTION
    UPDATE sometable SET aField = 0 WHERE anotherField = 1;       
    UPDATE sometable SET aField = 1 WHERE anotherField = 2;
ROLLBACK TRANSACTION; 
```

在 C# 中，我们有这样的东西：

```
using (var connection = new SqlConnection("connection string")) 
{
    connection.Open();
    var cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "my_procedure";
    var res = cmd.ExecuteNonQuery();                
} 
```

为什么我没有得到 res == -1？我仍然得到受影响的行数。当文档指出[“如果发生回滚，返回值也是 -1”](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:59.163

似乎返回值`ExecuteNonQuery`不受回滚的影响，即使文档明确指出确实如此。以下是一些可能的解决方法。

**1) 使用 ExecuteScalar**

*SP：*

```
DECLARE @RowCount INT
DECLARE @Error INT

BEGIN TRAN

UPDATE Table1 SET Value1 = NULL

SELECT @RowCount = @@ROWCOUNT, @Error = @@ERROR

IF @Error <> 0 BEGIN
    ROLLBACK TRAN
    SELECT -1
END ELSE BEGIN
    COMMIT TRAN
    SELECT @RowCount
END 
```

*C＃*

```
using (SqlConnection dbConnection = new SqlConnection("Data Source=.;Initial Catalog=Database1;Integrated Security=True;MultipleActiveResultSets=True"))
{
    dbConnection.Open();

    using (SqlCommand command = dbConnection.CreateCommand())
    {
        command.CommandText = "QuickTest";
        command.CommandType = CommandType.StoredProcedure;

        rowsAffected = command.ExecuteScalar();
    }
} 
```

**2）使用返回/输出参数**

*SP：* 声明@RowCount INT 声明@Error INT

```
BEGIN TRAN

UPDATE Table1 SET Value1 = NULL

SELECT @RowCount = @@ROWCOUNT, @Error = @@ERROR

IF @Error <> 0 BEGIN
    ROLLBACK TRAN
    RETURN -1
END ELSE BEGIN
    COMMIT TRAN
    RETURN @RowCount
END 
```

*C＃*

```
using (SqlConnection dbConnection = new SqlConnection("Data Source=.;Initial Catalog=Database1;Integrated Security=True;MultipleActiveResultSets=True"))
{
    dbConnection.Open();

    using (SqlCommand command = dbConnection.CreateCommand())
    {
        command.Parameters.Add(new SqlParameter() {Direction = ParameterDirection.ReturnValue });
        command.CommandText = "QuickTest";
        command.CommandType = CommandType.StoredProcedure;

        command.ExecuteNonQuery();
        rowsAffected = command.Parameters[0].Value;
    }
} 
```

**3) 将回滚/提交逻辑移动到代码中**

这将使您能够确定是否发生回滚并在必要时输出 -1 值。事务语句需要从存储过程中删除。

*SP：*

```
UPDATE Table1 SET Value1 = NULL 
```

*C＃：*

```
using (SqlConnection dbConnection = new SqlConnection("Data Source=.;Initial Catalog=Database1;Integrated Security=True;MultipleActiveResultSets=True"))
{
    dbConnection.Open();

    using (SqlTransaction tran = dbConnection.BeginTransaction())
    {
        using (SqlCommand command = dbConnection.CreateCommand())
        {
            command.Transaction = tran;

            try
            {
                command.Parameters.Add(new SqlParameter() {Direction = ParameterDirection.ReturnValue });
                command.CommandText = "QuickTest";
                command.CommandType = CommandType.StoredProcedure;

                rowsAffected = command.ExecuteNonQuery();
            }

            catch (Exception)
            {
                rowsAffected = -1;
                throw;
            }

            tran.Commit();
        }
    }
} 
```

*如前所述，@@ROWCOUNT 值和 ExecuteNonQuery 结果都受触发器影响。*

# php - 带有有效 Json 的 Jquery 解析错误

> ID：15070582
> 
> 赞同：0
> 
> 时间：2013-02-25T15:36:29.623
> 
> 标签：php, json, jquery

我不知道为什么，但我得到了一个有效 JSON 的解析错误（我在 jsonlint 上检查了它）。

我使用 php 从 mysql db 获取数据并将其设为 json 字符串并将其检索到 jquery（请参见下面的代码）

这是jQuery：

```
$.ajax({
    type: "GET",
    url: "controller.php",
    data: {action:"loadObjs"},
    dataType: "json", 
    contentType: "application/json; charset=utf-8",
    async:  true,
    success: function(objs){
            //do stuff
    },
    error:function (xhr, ajaxOptions, thrownError){
        document.write(ajaxOptions);
        document.write(thrownError);
        docmuent.write(xhr);
    }
} 
```

这是controller.php 的一部分：

```
<?php
if (isset($_GET['action'])){
$action = $_GET['action'];

echo var_dump($action);

if ($action == "altaObj") {
    echo addObj();
} else if ($action == "bajaObj") {
//  delObj();
} else if ($action == "modObj") {
//  modObj();
} else if ($action == "loadObjs") {
    echo loadObjs();
} else if ($action == "loadObjProps") {

}
}

function loadObjs() {
$objs = Obj::GetAll();
return json_encode($objs);
}

?> 
```

这是 Obj 类中的 GetAll() ：

```
public static function getAll(){            
    $return = array();
    try{
            $sql = "SELECT objectId, name FROM objs";
            $result = db::executeQuery($sql);
            while (false != ($r = mysql_fetch_object($result))) {
                $foo = new Obj($r->objectId, $r->name);
                //$foo->objectName = $r->objectName;
                $return[] = $foo;
            }
            return $return;
    }catch (Exception $e){
        return $e->getMessage();
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:58:20.603

这是回声 var_dump($action);

谢谢 x4rf41

# c# - 获取有关 Windows Phone 的用户反馈

> ID：15070585
> 
> 赞同：0
> 
> 时间：2013-02-25T15:36:33.083
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8

我正在为 Windows Phone 构建一个应用程序。每次用户在应用程序中执行某些操作时，我都会在“日志”.txt 文件中写入有关该操作的内容。它还记录崩溃和未处理的异常。

如何从用户那里获取 .txt 以便我可以找到并解决可能的错误/异常？

我不想使用电子邮件编写器任务，因为用户可能会在将其发送给我之前对其进行编辑或修改。我知道我可以对数据进行编码/加密，但我正在寻找其他东西。

有没有其他方法可以做到这一点？

我想到的是一个按钮，当用户单击它时，它会连接到互联网并将 .txt 上传到某个 ftp 服务器上。或类似的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:44:14.803

为此，您需要自己的服务器，并且可以使用 http 连接。或者，如果您想要一些非常简单的东西，只需在您的应用程序中添加 Flurry 或[Bugsense](http://www.bugsense.com/features)（免费解决方案）之类的东西。

# java - 在特定点将 Bean 插入列表

> ID：15070587
> 
> 赞同：0
> 
> 时间：2013-02-25T15:36:40.530
> 
> 标签：java

我有一个 bean 列表，我正在检查该列表中是否至少有 2 个带有返回“VALUEA”和“VALUEB”的 getter 的 bean。这样我就可以为他们两个构建一个名为“VALUEC TOTAL”的“总”bean。我还在最后做了一个“总计”的豆排。

我的问题只是“VALUEC TOTAL”。我需要在原始列表中的“VALUEB”之后将该 bean 添加到列表中，而不是我在最后的操作方式。

我可以确认摘要不为空。

```
summary = new ArrayList<WorkoutPlanBean>();
beans = dao.getAppropriationSummaryBySor(criteria, summary);

//Here we are setting up lists to be used to be added to the bottom of "Rollup" as "Totals" 
List<WorkoutPlanBean> valuecList = new ArrayList<WorkoutPlanBean>();
List<WorkoutPlanBean> sumList = new ArrayList<WorkoutPlanBean>();
for (WorkoutPlanBean b: summary)
{
    //We need 2 beans...one with VALUEA and one with VALUEB
    if( b.getSor().getShortName().equals("VALUEA") || b.getSor().getShortName().equals("VALUEB"))
    {
        valuecList.add(b);
    }
    sumList.add(b);
}
// Create VALUEC totals bean.
if (valuecList.size() > 1 )
{
    WorkoutPlanBean valuecTotals = new WorkoutPlanBean();
    valuecTotals.setSor(VALUEC_TOTALS_SOR);

    for (WorkoutPlanBean bean : valuecList)
    {
        valuecTotals.setQuantity(Overview.totalsIntegerAdd(valuecTotals.getQuantity(),
                                 bean.getQuantity()));

        valuecTotals.setHours(Overview.totalsDoubleAdd(valuecTotals.getHours(),
                              bean.getHours()));

        valuecTotals.setValue(Overview.totalsBigDecimalAdd(valuecTotals.getValue(),
                              bean.getValue()));
     }
     summary.add(valuecTotals); 
 }

 // Create Totals bean.
 if (sumList.size() > 1 )
 {
     WorkoutPlanBean globalTotals = new WorkoutPlanBean();
     globalTotals.setSor(GRAND_TOTALS_SOR);

     for (WorkoutPlanBean bean : sumList)
     {
         globalTotals.setQuantity(Overview.totalsIntegerAdd(globalTotals.getQuantity(),
                                  bean.getQuantity()));
         globalTotals.setHours(Overview.totalsDoubleAdd(globalTotals.getHours(),
                               bean.getHours()));
         globalTotals.setValue(Overview.totalsBigDecimalAdd(globalTotals.getValue(),
                               bean.getValue()));
     }
     summary.add(globalTotals); 
 }

 request.setAttribute("summary", summary); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:39:28.110

您需要获取所需的索引并使用： `list.add(index, yourBean)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:48:05.857

您可以使用索引而不是 for-each 循环在列表中进行迭代：

```
for(int i = 0; i < summary.size(); i++){
    WorkoutPlanBean b = summary.get(i);
    ...
} 
```

所以你可以记住你最后一个VALUEA/VALUEB的索引，然后你可以summary.add(index, element)你的总和......

无论如何看看[ArrayList Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

顺便说一句，您还可以在第一个循环期间计算两个总数，而不需要 valuecList 和 sumList ...

这是一个仅编辑代码的示例，因此您可能必须更正一些拼写错误：

```
summary = new ArrayList<WorkoutPlanBean>();
    beans = dao.getAppropriationSummaryBySor(criteria, summary);

    WorkoutPlanBean valuecTotals = new WorkoutPlanBean();
    valuecTotals.setSor(VALUEC_TOTALS_SOR);

    WorkoutPlanBean globalTotals = new WorkoutPlanBean();
    globalTotals.setSor(GRAND_TOTALS_SOR);

    int nbMdmc = 0; // to count VALUEA & VALUEB to know if a total is needed
    int lastMdmcIndex = 0;

    for (int i=0; i< summary.size(); i++)
    {
        WorkoutPlanBean bean = summary.get(i);

        //We need 2 beans...one with VALUEA and one with VALUEB
        if( bean.getSor().getShortName().equals("VALUEA") || bean.getSor().getShortName().equals("VALUEB"))
        {
            lastMdmcIndex = i;
            // count VALUEA and VALUEB
            nbMdmc++;

            // add to valuec total
            valuecTotals.setQuantity(Overview.totalsIntegerAdd(valuecTotals.getQuantity(),
                                                               bean.getQuantity()));
            valuecTotals.setHours(Overview.totalsDoubleAdd(valuecTotals.getHours(),
                                                                bean.getHours()));
            valuecTotals.setValue(Overview.totalsBigDecimalAdd(valuecTotals.getValue(),
                                                                bean.getValue()));
        }

        // add to grand total
        globalTotals.setQuantity(Overview.totalsIntegerAdd(globalTotals.getQuantity(),
                                                               bean.getQuantity()));
        globalTotals.setHours(Overview.totalsDoubleAdd(globalTotals.getHours(),
                                                                bean.getHours()));
        globalTotals.setValue(Overview.totalsBigDecimalAdd(globalTotals.getValue(),
                                                                bean.getValue()));

    }

    if(nbMdmc > 1) summary.add(lastMdmcIndex+1, valuecTotals); 

    if(summary.size() > 1) summary.add(globalTotals); 

request.setAttribute("summary", summary); 
```

# windows-8 - 在 WinrT 中实现加载图像

> ID：15070588
> 
> 赞同：0
> 
> 时间：2013-02-25T15:36:41.887
> 
> 标签：windows-8, windows-runtime

我如何在图像加载时为我的图像控件实现默认加载图像。即最初需要显示加载图像，在实际图像加载之后，我需要将该图像设置为我的图像源。我的 windows phone 我在 LowProfileImageLoader 类的帮助下实现了相同的功能。但在 Windows 8 中，我如何实现相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:17:45.600

通过使用[异步功能](http://msdn.microsoft.com/en-us/library/windows/apps/hh464924.aspx)在 Windows 应用商店应用程序中执行此操作相当容易。例如，当您使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28VS.110%29.aspx)下载较大的图像时，您可以将图像源设置为加载图像（可能使用[ms-appx 协议并从您的包中加载它）。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322%28v=win.10%29.aspx)这是一个[关于如何异步使用 HttpClient 的示例](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)。

每条评论：当您收到 ImageOpened 事件时，您可以使用[ProgressRing 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.progressring.aspx)并更改为图像。见[这个例子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/536a3d52-0c9f-4875-8ad5-991a9eab17c8)。

# html - 停止光标在翻转热点上的变化

> ID：15070589
> 
> 赞同：1
> 
> 时间：2013-02-25T15:36:44.340
> 
> 标签：html, css, dreamweaver

我在 Dreamweaver 中创建了一个包含热点区域的图像。每当鼠标悬停在热点上时，光标就会变为手形符号。但是，我不想更改光标，因为热点必须“隐藏”。

希望任何人都可以帮助我。

:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:38:31.597

```
#element:hover { cursor: default; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:41:43.017

将 css 光标属性设置为`default`：

```
cursor:default; 
```

更多信息在这里：[http ://www.w3schools.com/cssref/pr_class_cursor.asp](http://www.w3schools.com/cssref/pr_class_cursor.asp)

# c#-4.0 - 如何在 linq 的选择主体中使用实例类

> ID：15070593
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:36:54.560
> 
> 标签：c#-4.0, xml-parsing, linq-to-xml

```
 Customer cus=new customer();

from c in doc.Descendants(XName.Get("details", name))
                     select 
{
    cus.firstname =c.Element(XName.Get("to", name)).value;
} 
```

如何在 linq 的选择主体中使用实例变量

你好，

我需要在 select 语句中访问 c​​ust 实例变量名称。

我不想创建新实例

```
select new customer
    {
        cus.firstname.
    } 
```

对此有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:41:35.337

使用基于方法的方法应该更容易：

```
cus.firstname = doc.Descendants(XName.Get("details", name))
                   .Element(XName.Get("to", name))
                   .Value; 
```

要填充更多属性，您可以将`<details>`元素保存到变量中并稍后使用：

```
var details = doc.Descendants(XName.Get("details", name)).FirstOrDefault();

if(details != null)
{
    cus.firstname = details.Element(XName.Get("to", name)).Value;
    cus.lastname= details.Element(XName.Get("from", name)).Value;
} 
```

这将防止一遍又一遍地遍历 XML。

# html - 为什么 `input type="date"` 的行为发生了变化？

> ID：15070600
> 
> 赞同：11
> 
> 时间：2013-02-25T15:37:21.003
> 
> 标签：html, google-chrome, twitter-bootstrap, datepicker

日期输入（例如`<input type="date" name="due_date" id="due_date" min="2011-09-01" maxlength="10" class="span8">`在 Chrome 中）用于允许用户查看“弹出式”日历以帮助选择日期。我昨天注意到行为已经停止；输入仅允许用户向上/向下箭头日期部分（月/日/年）。我访问了 Chrome 博客并运行了 Google 搜索，但找不到任何有关此更改的信息。**为什么行为发生了`input type="date"`变化？**奇怪的是，这种变化似乎仅限于 Bootstrap，因为[http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_date](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_date)仍然显示日期选择器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T08:13:12.917

**更新** Chromium 团队接受了这个错误并提交了一个[补丁给 WebKit](https://bugs.webkit.org/show_bug.cgi?id=110974)。更改的要点是日期控件将呈现在灵活的框元素内，而不管应用于 input[type='date'] 控件的样式如何。

* * *

我是[向 Chromium 报告此处提到的缺陷](https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=date%20picker&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&groupby=&sort=&id=178175)的人。一种建议的解决方案是应用 display: inline-block; 到日历选择器：

```
input[type="date"]::-webkit-calendar-picker-indicator{
    display:inline-block;
} 
```

但是，这是一个不稳定的解决方案，因为控件仍然移动到 input[type="date"] 控件上右对齐以外的位置。

另一种选择是向右浮动：

```
input[type="date"]::-webkit-calendar-picker-indicator {
    display:inline-block;
    margin-top:2%;
    float:right;
}
input[type="date"]::-webkit-inner-spin-button {
    display:inline-block;
    float:right;
} 
```

这具有反转微调器和日历选择器控件的副作用。

我认为最好的技巧是移除微调器并向右浮动：

```
input[type="date"]::-webkit-calendar-picker-indicator{
    display:inline-block;
    margin-top:2%;
    float:right;
}
input[type="date"]::-webkit-inner-spin-button {
    /* display: none; <- Crashes Chrome on hover */
    -webkit-appearance: none;
    margin: 0;
} 
```

![铬 25 输入[类型=](../Images/d3cbfd9d8048fdd2926f0d49a7d6b906.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T21:27:13.710

**更新**

**发现问题**

Bootstrap 使用 2 个样式属性。

1 - **display:inline-block**这使谷歌打破箭头到另一行

2 - **height: 20px**阻止你看到这条“线”

![调查结果截图](../Images/6e3efc753bc1ed1867fd6dc05fd4f1d4.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T05:24:49.313

**更新**

谷歌浏览器问题被标记为回归，所以这有望很快得到解决。作为临时解决方法，以下将起作用：

```
input[type=date]::-webkit-calendar-picker-indicator {
    display: inline-block;
} 
```

这样，您可以将输入显示属性设置为您喜欢的任何内容，并且一切都像以前一样工作。

**原始回复**

设置`display: -webkit-inline-flex`（这似乎是 的默认值`<input type="date" />`）将解决此问题，但这可能会改变布局，因为输入被视为内联元素。

这对我来说似乎是一个错误，我会看看是否有人已经提交了错误报告，否则我会。

# excel - EXCEL VBA 加速我的代码

> ID：15070601
> 
> 赞同：-3
> 
> 时间：2013-02-25T15:37:21.570
> 
> 标签：excel, vba

根据标题，以下代码位于我的`Private Sub Workbook_open()`. 因此，每次我打开我的工作簿时它都很慢。如何优化代码以最快地运行？任何帮助表示赞赏。

```
'Sheets("Summary(FG)") ComboBox1 items
For b = 3 To Sheets("CustomerList").Cells(3, 2).SpecialCells(xlLastCell).row
    If Sheets("CustomerList").Cells(b, 2) <> "" Then
        Worksheets("Summary(FG)").ComboBox1.AddItem (Sheets("CustomerList").Cells(b, 2))
    Else
    End If
Next

'Sheets("Summary(RawMat)") ComboBox1 items
For a = 2 To Sheets("RawMatList").Cells(2, 2).SpecialCells(xlLastCell).Column
    If Sheets("RawMatList").Cells(2, a) <> "" Then
        Worksheets("Summary(RawMat)").ComboBox1.AddItem (Sheets("RawMatList").Cells(2, a))
    End If
Next

'sheets("Summary(WIP)") ComboBox1 items
For c = 3 To Sheets("WIPList").Cells(3, 2).SpecialCells(xlLastCell).row
    If Sheets("WIPList").Cells(c, 2) <> "" Then
        Worksheets("Summary(WIP)").ComboBox1.AddItem (Sheets("WIPList").Cells(c, 2))
    End If
Next

For Each Worksheet In Worksheets
    Application.Goto Reference:=Range("A1"), Scroll:=True
Next Worksheet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:12:17.220

看起来您的循环正在遍历工作表上的每一行或每一列。尝试使用最后使用的行或最后使用的列，而不是使用最后一行或最后一列。这样，您只需检查包含数据的行，而不是遍历数千个空白行。

尝试：

```
'Sheets("Summary(FG)") ComboBox1 items
For b = 3 To Sheets("CustomerList").UsedRange.Rows.Count
    If Sheets("CustomerList").Cells(b, 2) <> "" Then
        Worksheets("Summary(FG)").ComboBox1.AddItem (Sheets("CustomerList").Cells(b, 2))
    Else
    End If
Next

'Sheets("Summary(RawMat)") ComboBox1 items
For a = 2 To Sheets("RawMatList").UsedRange.Columns.Count
    If Sheets("RawMatList").Cells(2, a) <> "" Then
        Worksheets("Summary(RawMat)").ComboBox1.AddItem (Sheets("RawMatList").Cells(2, a))
    End If
Next

'sheets("Summary(WIP)") ComboBox1 items
For c = 3 To Sheets("WIPList").UsedRange.Rows.Count
    If Sheets("WIPList").Cells(c, 2) <> "" Then
        Worksheets("Summary(WIP)").ComboBox1.AddItem (Sheets("WIPList").Cells(c, 2))
    End If
Next

For Each Worksheet In Worksheets
    Application.Goto Reference:=Range("A1"), Scroll:=True
Next Worksheet 
```

# rdf - RDF / OWL / etc的可表达性有哪些限制

> ID：15070602
> 
> 赞同：8
> 
> 时间：2013-02-25T15:37:23.453
> 
> 标签：rdf, owl, knowledge-management

所以我学习了 RDF 和 OWL 以及一般的“知识表示”。

**1) RDF 或 OWL 格式的限制是什么？**

有没有 RDF 不能表达的概念？但这可以用OWL来表达吗？或者反过来。

有什么概念都不能表达吗？

**2）这个（复杂的）例子呢：**

> “一个人怎么会跌倒这么远，不知不觉呢？”。

你能用 RDF 或 OWL 表达这个问题吗？或者你甚至可以表达“天空是蓝色的吗？”之类的问题。

**3）最后……有没有可以描述任何东西的知识表示语言？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:14:42.243

*1) RDF 或 OWL 格式的限制是什么？有没有 RDF 不能表达的概念？但这可以用OWL来表达吗？或者反过来。*

RDF 是一个简单的**图形**模型，只要您可以将其表示为三元组，它就可以用来捕获几乎任何东西。OWL（和 RDFS）比 RDF 更具表现力，这意味着您可以在这里捕获更复杂的关系：例如，您还可以表示事物**集合**`rdfs:SubClassOf`之间的链接（ ）或使用传递属性（例如`hasAncestor`）。OWL 也可以序列化为 RDF 图，并且与**推理**器结合使用特别有用。所以 OWL 可以表达 RDF 所能表达的一切，但仅靠 RDF 无法捕捉 OWL 中可用的一些语句。例如，当您使用推理器时，它会有所不同。

*有什么概念都不能表达吗？*

使用 RDF 或 OWL 对时间或动态信息进行建模具有挑战性。底线：只要您可以将您的信息描述为图表，您就可以将其表示为 RDF。

*2）这个（复杂的）例子怎么样：“有人怎么会跌倒这么远，却没有意识到呢？”。你能用 RDF 或 OWL 表达这个问题吗？或者你甚至可以表达“天空是蓝色的吗？”之类的问题。*

第二个问题更多地属于 RDF 和 OWL 领域。例如，假设您有一个知识库，其中包含以下语句：`sky has-color blue.`然后您可以通过查看所有已知为蓝色的事物并查看它们是否`sky`在其中来表达关于它的问题。“天空是蓝色的吗”这个问题可以用 OWL 类表达式 ( `has-color value blue`) 或通过 SPARQL 查询 ( `?thing has-color blue.`) 来表述。您可以将问题视为检索符合某些条件（使用 SPARQL 或 OWL）的一组事物，或者您在评论中提到的“我想知道 X 是否为真”。

问题“一个人怎么会跌倒这么远，却没有意识到？” 更难建模。您首先需要考虑如何在您的知识库中表示它。这是一个涉及使用 RDF/OWL 难以捕捉的动态行为的示例。

*3）最后……有没有可以描述任何东西的知识表示语言？*

也许是理论上的，在实践中，计算复杂性通常是语言表达能力的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:02:54.940

*证明*以下内容应该不难

1.  你可以用 OWL 表达的任何东西也可以用 RDF 表达，因为你可以将任何 OWL 话语表达为三元组。

2.  任何你可以用 RDF 三元组表达的东西都可以通过简单地在 OWL 中建模 RDF 三元组来用 OWL 表达。

3.  任何可以使用 1 和 0 表示的概念（即通过计算机）都可以在 RDF 中建模，因为您可以使用三元组来建模一系列 1 和 0。

4.  任何可以用英语单词“表示”的概念都可以表示为 1 和 0。

当然，这些“事实”并不能告诉你你真正想知道什么：

*   在 OWL 或 RDF 中表达复杂概念的最佳方式是什么？（甚至有一个最好的方法吗？）

*   可以在计算机中表达的概念是否存在理论或实践限制？

*   是否有更好的（现有）替代 OWL 和 RDF 来表示概念？

但我怀疑这些问题是否可以回答。

# android - Android viewPager - 片段

> ID：15070605
> 
> 赞同：1
> 
> 时间：2013-02-25T15:37:27.373
> 
> 标签：android, android-viewpager

我有一个活动，我正在设置 viewPager 适配器，如下所示

```
public class ViewPagerAdapter extends FragmentPagerAdapter {
    private int pagerLength; 
    private HashMap<Integer, String> mFragmentTags;
    private FragmentManager mFragmentManager;
    String page = "Page";
    public ViewPagerAdapter(FragmentManager fm, int numPage) {
        super(fm);
        mFragmentManager = fm;
        pagerLength = numPage;
        mFragmentTags = new HashMap<Integer, String>();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Object obj = super.instantiateItem(container, position);
        if(obj instanceof Fragment) {
            Fragment f = (Fragment) obj;
            String tag = f.getTag();
            mFragmentTags.put(position, tag);
        }
        return obj;
    }

    @Override
    public Fragment getItem(int index) {
        ImageFragment imageFragment = (ImageFragment)Fragment.instantiate(ImageActivity.this, imageFragment.class.getName(), null);
        return imageFragment;
    }

    @Override
    public int getCount() {
        return pagerLength;
    }

    public Fragment getFragment(int position) {
        String tag = mFragmentTags.get(position);
        if (tag == null) {
            return (Fragment)instantiateItem(mViewPager, position);
        }
        Fragment fragment = mFragmentManager.findFragmentByTag(tag);
        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        mFragmentTags.remove(position);
        super.destroyItem(container, position, object);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        // TODO Auto-generated method stub
        return  "TESTING";      //Remove later
    }

} 
```

ImageFragment 什么都不是，它只是一个在其布局中带有 imageView 的片段

现在我想在活动片段的 imageView 中设置一个图像，我应该怎么做？

我尝试在我的活动中进行 fn 更新并将 imageUrl 传递给片段中称为更新的函数。问题是虽然片段中的 update() 被调用并接收到图像的 url，但片段的 onCreateView() 从未被调用

# svg - Highstock 导出 .png 到变量

> ID：15070611
> 
> 赞同：0
> 
> 时间：2013-02-25T15:38:03.110
> 
> 标签：svg, png, export, highstock

我想知道是否有办法使用 Highstock 中内置的 export/getSVG 函数将导出的 PNG 保存到后台的变量中，而不是提示用户下载文件。

想法是让用户能够单击一个按钮，该按钮会将每个快照导出到后台的变量中。滚动整个图表后，随后的按钮将创建一个包含所有 PNG 图像的文档，以供单次下载。我们可以开发所有东西，但问题在于将 PNG 图像保存到变量中。我们已经能够将 SVG 字符串分配给我们维护的数组，但由于大小，这不是最好的选择。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:03:49.720

可以实现这样的事情，请参阅[常见问题解答](http://docs.highcharts.com/#faq%24export-multiple)

但是，还有另一种选择 - 获取 SVG，并根据需要使用[canvg](https://code.google.com/p/canvg/)渲染到画布，然后渲染到 PNG 文件。

# magento - Magento 自定义支付 iFrame 模块错误

> ID：15070612
> 
> 赞同：0
> 
> 时间：2013-02-25T15:38:03.360
> 
> 标签：magento, module, payment

我正在尝试编写一个将调用 iFrame 而不是标准 CC 块的 Magento 支付模块。但是，当运行下面的代码时，出现以下错误：

> 致命错误：在第 106 行的 /opt/bitnami/apps/magento/htdocs/app/code/core/Mage/Payment/Helper/Data.php 中的非对象上调用成员函数 setMethod()

配置.xml：

```
 <?xml version="1.0"?>
<config>
    <modules>
       <Lynch_Peach>
<!-- declare module's version information for database updates -->
          <version>0.1.0</version>
       </Lynch_Peach>
    </modules>

    <global>
    <blocks>
        <peach>
            <class>Lynch_Peach_Block</class>
        </peach>
    </blocks>

        <models>
            <peach>
  <class>Lynch_Peach_Model</class>
            </peach>
        </models>

<!-- declare resource setup for new module -->
        <resources>
<!-- resource identifier -->
            <peach_setup>
<!-- specify that this resource is a setup resource and used for upgrades -->
                <setup>
<!-- which module to look for install/upgrade files in -->
                    <module>Lynch_Peach</module>
                </setup>
<!-- specify database connection for this resource -->
                <connection>
<!-- do not create new connection, use predefined core setup connection -->
                    <use>core_setup</use>
                </connection>
            </peach_setup>
            <peach_write>
                <connection>
                  <use>core_write</use>
                </connection>
            </peach_write>
            <peach_read>
               <connection>
                <use>core_read</use>
              </connection>
            </peach_read>
        </resources>
    </global>

<!-- declare default configuration values for this module -->
    <default>
<!-- 'payment' configuration section (tab) -->
        <payment>
<!-- 'peach' configuration group (fieldset) -->
            <peach>
<!-- by default this payment method is inactive -->
                <active>0</active>
<!-- model to handle logic for this payment method -->
                <model>peach/paymentMethod</model>
<!-- order status for new orders paid by this payment method -->
                <order_status>pending</order_status>
<!-- default title for payment checkout page and order view page -->
                <title>Peach Payments</title>

                <cctypes>VI,MC</cctypes>

                <payment_action>authorize_capture</payment_action>
                <allowspecific>0</allowspecific>
            </peach>
         </payment>
    </default>
</config> 
```

付款方式.php

```
<?php
class Lynch_Peach_Model_PaymentMethod extends Mage_Payment_Model_Method_Cc
{

    protected $_code = 'peach';
    protected $_formBlockType = 'peach/form';
    protected $_isGateway               = false;
    protected $_canAuthorize            = false;
    protected $_canCapture              = false;
    protected $_canCapturePartial       = false;
    protected $_canRefund               = false;
    protected $_canVoid                 = false;
    protected $_canUseInternal          = false;
    protected $_canUseCheckout          = true;
    protected $_canUseForMultishipping  = false;
    protected $_canSaveCc = false;

  public function createFormBlock($name)
    {
        $block = $this->getLayout()->createBlock('peach/form', $name)
            ->setMethod('peach')
            ->setPayment($this->getPayment())
            ->setTemplate('peach/form.phtml');

        return $block;
    }

}
?> 
```

表格.php：

```
<?php
class Lynch_Peach_Block_Form extends Mage_Payment_Block_Form
{
    // {{{ _construct()
    /**
     * _construct() 
     */    
    protected function _construct()
    {
        parent::_construct();
        $$this->setTemplate( 'peach/form.phtml' );
    }
    // }}}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T05:50:46.010

您可以尝试应用以下更改。

```
protected $_formBlockType = 'peach/form'; 
```

像下面一样改变上面，

```
protected $_formBlockType = 'peach/Form'; 
```

如果您在 Windows 环境中运行应用程序，通常这无关紧要。但这在非 Windows 环境中运行时可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:41:31.357

您在表单构造函数中有双 $$。

# visual-studio - 为小型开发团队设置我的开发环境

> ID：15070615
> 
> 赞同：1
> 
> 时间：2013-02-25T15:38:11.177
> 
> 标签：visual-studio, sharepoint, visual-studio-2012, azure-devops

我正在为一个小团队建立一个新的开发环境，目前我们只有 2 个开发人员，主要我们将使用以下框架：-

1.  Asp.net MVC 框架从头开始构建一些 Web 应用程序。

2.  SharePoint 2010 或 2013 构建 Intranet/Extranet 应用程序。

所以我决定使用以下开发工具来构建 asp.net MVC Web 应用程序 + 扩展和构建 SharePoint 应用程序：-

1.  Visual Studio 2012 用于为 MVC 和 SharePoint 构建 Web 应用程序。

2.  Team Foundation Server 2012，具有版本控制、错误跟踪等。

我的问题如下： -

1.  因为我需要 SharePoint 2013 模板，所以我不能使用 Visual Studio 2012 的快速版本？因为 VS express 版本不提供 SharePoint 模板等企业功能。

2.  但是使用 TFS express 是否适合我的情况？

3.  我已经读到微软提供了一个免费计划，我可以获得免费的 Visual Studio Professional 2012 和具有所有企业功能的 Team Foundation Server，因为我的用户少于 5 个（在我的情况下是 2 个开发人员），当然我可以升级免费计划当团队成长。

4.  那么在我的情况下，从 Microsoft 获得免费计划是否会运作良好，尤其是在 Visual Studio 2012 中包含 SharePoint 模板？

此致

# scala - 使用 Slick 的递归树状表查询

> ID：15070620
> 
> 赞同：7
> 
> 时间：2013-02-25T15:38:17.953
> 
> 标签：scala, slick

我的表数据形成了一个树结构，其中一行可以引用同一个表中的父行。

我想要使​​用 Slick 实现的是编写一个查询，该查询将返回一行及其所有子项。此外，我也想做同样的事情，但编写一个查询，该查询将返回一个孩子及其所有祖先。

换句话说：

`findDown(1)`应该返回

```
List(Group(1, 0, "1"), Group(3, 1, "3 (Child of 1)")) 
```

`findUp(5)`应该返回

```
List(Group(5, 2, "5 (Child of 2)"), Group(2, 0, "2")) 
```

这是一个功能齐全的工作表（缺少的解决方案除外 ;-)。

```
package com.exp.worksheets

import scala.slick.driver.H2Driver.simple._

object ParentChildTreeLookup {

  implicit val session = Database.forURL("jdbc:h2:mem:test1;", driver = "org.h2.Driver").createSession()

  session.withTransaction {
    Groups.ddl.create
  }

  Groups.insertAll(
    Group(1, 0, "1"),
    Group(2, 0, "2"),
    Group(3, 1, "3 (Child of 1)"),
    Group(4, 3, "4 (Child of 3)"),
    Group(5, 2, "5 (Child of 2)"),
    Group(6, 2, "6 (Child of 2)"))

  case class Group(
    id: Long = -1,
    id_parent: Long = -1,
    label: String = "")

  object Groups extends Table[Group]("GROUPS") {
    def id = column[Long]("ID", O.PrimaryKey, O.AutoInc)
    def id_parent = column[Long]("ID_PARENT")
    def label = column[String]("LABEL")
    def * = id ~ id_parent ~ label <> (Group, Group.unapply _)
    def autoInc = id_parent ~ label returning id into {
      case ((_, _), id) => id
    }

    def findDown(groupId: Long)(implicit session: Session) = { ??? }

    def findUp(groupId: Long)(implicit session: Session) = { ??? }
  }

} 
```

一个非常糟糕的静态尝试`findDown`可能是这样的：

```
private def groupsById = for {
  group_id <- Parameters[Long]
  g <- Groups; if g.id === group_id
} yield g

private def childrenByParentId = for {
  parent_id <- Parameters[Long]
  g <- Groups; if g.id_parent === parent_id
} yield g

def findDown(groupId: Long)(implicit session: Session) = { groupsById(groupId).list union childrenByParentId(groupId).list } 
```

但是，我正在寻找一种让 Slick 使用 id 和 id_parent 链接递归搜索同一个表的方法。任何其他解决问题的好方法都非常受欢迎。但请记住，最好尽量减少数据库往返次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:05:01.933

您可以尝试从 slick 调用 SQL。**向上**层次结构的 SQL 调用看起来像这样（这是用于 SQL Server）：

```
WITH org_name AS 
(
    SELECT DISTINCT
        parent.id AS parent_id,
        parentname.label as parent_label,
        child.id AS child_id,
        childname.ConceptName as child_label
    FROM
        Group parent RIGHT OUTER JOIN 
        Group child ON child.parent_id = parent.id
), 
jn AS 
(   
    SELECT
        parent_id,
        parent_label,
        child_id,
        child_label
    FROM
        org_name 
    WHERE
        parent_id = 5
    UNION ALL 
        SELECT
            C.parent_id,
            C.parent_label,
            C.child_id,
            C.child_label 
        FROM
            jn AS p JOIN 
            org_name AS C ON C.child_id = p.parent_id
) 
SELECT DISTINCT
    jn.parent_id,
    jn.parent_label,
    jn.child_id,
    jn.child_label
FROM
    jn 
ORDER BY
    1; 
```

如果你想沿着层次结构改变这一行：

```
org_name AS C ON C.child_id = p.parent_id 
```

至

```
org_name AS C ON C.parent_id = p.child_id 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T16:29:00.443

在普通的 SQL 中，这会很棘手。您将有多种选择：

1.  使用存储过程（递归地）收集正确的记录。然后使用代码将这些记录转换为树
2.  选择所有记录并使用代码将它们转换为树
3.  [使用此处](http://www.codeproject.com/Articles/4155/Improve-hierarchy-performance-using-nested-sets)描述的更高级的技术（来自[树结构的优化 SQL](https://stackoverflow.com/questions/317322/optimized-sql-for-tree-structures)）和[此处](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)。然后使用代码将这些记录转换为树

根据您希望在 SQL 中执行此操作的方式，您需要构建一个 Slick 查询。[泄漏抽象](https://stackoverflow.com/questions/3883006/meaning-of-leaky-abstraction)的概念在这里非常明显。

所以得到树形结构需要两个步骤：

1.  获取正确的（或所有记录）
2.  从这些记录中构建（使用常规代码）树

由于您使用的是 Slick，我认为这不是一个选项，但另一种数据库类型可能更适合您的数据模型。查看[NoSQL](http://en.wikipedia.org/wiki/NoSQL)了解不同类型之间的差异。

# android - 在 ubuntu 上构建 android ADB 时出错

> ID：15070621
> 
> 赞同：3
> 
> 时间：2013-02-25T15:38:24.857
> 
> 标签：android, compiler-construction, makefile, adb

我在编译 android adb 源代码时遇到了问题。我遵循谷歌上的一些提示：

```
$ git clone git://android.googlesource.com/platform/system/core.git
system/core
$ git clone git://android.googlesource.com/platform/build.git build
$ git clone git://android.googlesource.com/platform/external/zlib.git 
```

外部/zlib $ git clone git://android.googlesource.com/platform/bionic.git 仿生

进展顺利。我这样做：“编辑 build/core/main.mk 并注释掉标记的部分

```
 *# Check for the correct version of java* 
```

和

```
 *# Check for the correct version of javac* 
```

由于 adb 不需要 Java，因此这些检查是不必要的。还要编辑 build/target/product/sdk.mk 并注释掉后面的“include”行

```
 *# include available languages for TTS in the system image* 
```

这避免了下载 adb 不需要的语言文件。"那么就是Makefile了。这里我不知道现在该怎么办，就像博客说的那样，我应该像这样保存Makefile然后

```
cd system/core/adb; 
make 
```

生成文件：

```
SRCS+= utils.c

VPATH+= ../libcutils SRCS+= abort_socket.c SRCS+=
socket_inaddr_any_server.c SRCS+= socket_local_client.c SRCS+=
socket_local_server.c SRCS+= socket_loopback_client.c SRCS+=
socket_loopback_server.c SRCS+= socket_network_client.c

VPATH+= ../libzipfile SRCS+= centraldir.c SRCS+= zipfile.c

VPATH+= ../../../external/zlib SRCS+= adler32.c SRCS+= compress.c
SRCS+= crc32.c SRCS+= deflate.c SRCS+= infback.c SRCS+= inffast.c
SRCS+= inflate.c SRCS+= inftrees.c SRCS+= trees.c SRCS+= uncompr.c
SRCS+= zutil.c

CPPFLAGS+= -DADB_HOST=1 CPPFLAGS+= -DHAVE_FORKEXEC=1 CPPFLAGS+=
-DHAVE_SYMLINKS CPPFLAGS+= -DHAVE_TERMIO_H CPPFLAGS+= -D_GNU_SOURCE CPPFLAGS+= -D_XOPEN_SOURCE CPPFLAGS+= -I. CPPFLAGS+= -I../include
CPPFLAGS+= -I../../../external/zlib

CFLAGS+= -O2 -g -Wall -Wno-unused-parameter LDFLAGS= -static LIBS=
-lrt -lpthread

 **TOOLCHAIN= arm-none-linux-gnueabi- CC= $(TOOLCHAIN)gcc LD= $(TOOLCHAIN)gcc**

 OBJS= $(SRCS:.c=.o)

 all: adb

 adb: $(OBJS)
       $(LD) -o $@ $(LDFLAGS) $(OBJS) $(LIBS)

 clean:
       rm -rf $(OBJS) 
```

然后出现错误：</p>

> $ make arm-none-linux-gnueabi-gcc -O2 -g -Wall -Wno-unused-parameter -DADB_HOST=1 -DHAVE_FORKEXEC=1 -DHAVE_SYMLINKS -DHAVE_TERMIO_H -D_GNU_SOURCE -D_XOPEN_SOURCE -I。-I../include -I../../../external/zlib -c -o adb_client.o adb_client.c make: arm-none-linux-gnueabi-gcc：command not found make: *** [adb_client .o] 错误 127

我认为这是我的操作系统是 ubuntu 而不是 Linux/ARM，但由于缺乏知识，我不知道我可以用这个 Makefile 做什么。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-21T07:56:47.647

您需要通过命令为 ARM 安装交叉编译器

```
sudo apt-get install gcc-4.6-multilib-arm-linux-gnueabi 
```

也许你需要为 arm 安装 g++ 交叉编译器。此致

# c# - 在 C# 中管理人造树

> ID：15070627
> 
> 赞同：2
> 
> 时间：2013-02-25T15:38:33.920
> 
> 标签：c#, tree

我的任务是向现有代码库添加一项功能。代码主要由刚离开我们团队的开发人员编写。考虑到这一点，我有一些限制：/。

开发人员之前编写了一些看起来像是 List 和 Tree 之间的交叉的代码。在用户界面中，它是一个树形结构。但是，在代码中，它是一个列表。它有点奇怪。这里定义了两个主要类：

```
public class TreeBranch
{
  public Guid ID { get; set; }
}

public class TreeItem
{
  public Guid ID { get; set; }
  public Guid TreeBranchID { get; set; }
  public Guid? ParentTreeItemID { get; set; }

  public int Level { get; set; }

  public DateTime CreatedOn { get; set; }
  public DateTime? MarkedOn { get; set; }
} 
```

因此，TreeBranch 存储在数据库表中，而 TreeItem 存储在数据库表中。执行一个查询，返回所有具有特定 TreeBranchID 的 TreeItem 元素，其 MarkedOn 值为 NULL。处理清单如下：

```
List<TreeItem> treeItems = GetTreeBranchItems("someID");
treeItems.Sory(new TreeItemComparer()); 
```

我的 TreeItemComparer 类如下所示：

```
public class TreeItemComparer: IComparer<TreeItem>
{
  // allow us to look up parent Items by GUID
  IDictionary<Guid, TreeItem> itemLookup;

  public TreeItemComparer(IEnumerable<TreeItem> list)
  {
    itemLookup = list.ToDictionary(item => item.ID);
    foreach (var item in list)
      SetLevel(item);
  }

  public int SetLevel(TreeItem item)
  {
    if ((item.Level == 0) && (item.ParentTreeItemID != Guid.Empty))
    {
      if (itemLookup.ContainsKey(item.ParentTreeItemID))
        item.Level = 1 + SetLevel(itemLookup[item.ParentTreeItemID]);
    }
    else if (item.ParentTreeItemID == Guid.Empty)
      item.Level = 1;

    return item.Level;
  }

  public int Compare(TreeItem x, TreeItem y)
  {
    // see if x is a child of y
    while (x.Level > y.Level)
    {
      if ((x.ParentTreeItemID == y.ID) || (x.ParentTreeItemID == Guid.Empty))
        return 1;
      x = itemLookup[x.ParentTreeItemID];
    }

    // see if y is a child of x
    while (y.Level > x.Level)
    {
      if ((y.ParentTreeItemID == x.ID) || (y.ParentTreeItemID == Guid.Empty))
        return -1;
    }

    // x and y are not parent-child, so find common ancestor
    while (x.ParentTreeItemID != y.ParentTreeItemID)
    {
      if (x.ParentTreeItemID != Guid.Empty)
        x = itemLookup[x.ParentTreeItemID];
      if (y.ParentTreeItemID != Guid.Empty)
        y = itemLookup[y.ParentTreeItemID];
    }

    // compare createDate of children of common ancestor
    return x.CreatedOn.CompareTo(y.CreatedOn);
  }
} 
```

此代码有效，但有一个例外。偶尔，我会得到一棵折断的树。例如，如果我的结构如下所示：

```
Item 1
  Item 1-A  (Imagine this TreeItem has a MarkedOn value that is NOT null)
    Item 1-A-a
      Item 1-A-a-1
    Item 1-A-b
  Item 1-B 
```

好吧，在上面的例子中，我应该只有以下内容：

```
Item 1
  Item 1-B 
```

但是，我越来越

```
Item 1
  Item 1-A-a
    Item 1-A-a-1
  Item 1-A-b
  Item 1-B 
```

我的问题是，具有 MarkedOn 值的 TreeItem 及其所有“子项”不应该是集合的一部分。由于我们的环境，我无法触摸数据库:(。同时，我不确定如何在代码中执行此操作。有人有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:58:02.793

从数据库中取回结果后，您可以过滤结果。

```
List<TreeItem> orphanedItems = new List<TreeItem>();
foreach (TreeItem item in results)
{
    if (item.ParentTreeItemID != Guid.Empty &&
        !results.Any(tree => tree.ID == item.ParentTreeItemID)
    {
        orphanedItems.Add(item);
    }
}
foreach (TreeItem orphan in orphanedItems)
    results.Remove(orphan); 
```

# vba - Excel 下拉列表中的多选选项

> ID：15070630
> 
> 赞同：1
> 
> 时间：2013-02-25T15:38:39.337
> 
> 标签：vba, excel

在电子表格中，如果我想创建一个项目列表供用户选择，是否可以使用复选框进行多选？

就像是

```
_ Item A
_ Item B
_ Item C
...
_ Item Z 
```

和选择后

```
_ Item A
X Item B
...
X Item Z 
```

在另一个单元格（或其他工作表中的单元格）中，有一个逗号分隔的列表

```
B,Z (or 2, 26 for the values) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:59:16.073

有几种方法可以进行多选。如果配置正确，您可以使用 ActiveX 列表框。表单控件列表框可以进行多选但没有复选框。您还可以使用常规复选框。以下是所有可用表单控件的一个很好的概述：http: [//office.microsoft.com/en-us/excel-help/overview-of-forms-form-controls-and-activex-controls-on-a-worksheet -HA010237663.aspx#BMactivex_controls_on_the_control_toolb](http://office.microsoft.com/en-us/excel-help/overview-of-forms-form-controls-and-activex-controls-on-a-worksheet-HA010237663.aspx#BMactivex_controls_on_the_control_toolb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T05:22:14.907

我有完全相同的要求，另外还需要支持取消选择。Hecen，我在电子表格单元格中发布了一个带有多个下拉列表的电子表格的工作解决方案，其中逗号（，）分隔值。我想在这里分享，因为可能对其他人有帮助。

1.  从以逗号 (,) 分隔的附加到单元格的下拉值中选择值。
2.  用户可以通过再次单击所选值来取消选择。
3.  如果用户在具有值的单元格上按删除，它将作为 un-select-all(reset) 工作。

这是问题/解决方案的[堆栈溢出链接](https://stackoverflow.com/questions/50539722/multiselect-in-excel-using-macros-how-to-un-select-the-selection)。

# android - 在运行时写入 Manifest.xml

> ID：15070637
> 
> 赞同：3
> 
> 时间：2013-02-25T15:38:49.493
> 
> 标签：android

我创建了一个作为库的项目，该库正在设置一个`ActionBarSherlock`带有`SlideMenu`. 在这个里面`Slidemenu`我有一个`ListView`. 当用户按下其中一个项目时，应该会启动`ListView`一个新项目。`Activity`我的 ListView 有一个像这样的适配器：

```
public class MenuAdapter extends BaseAdapter {

    Context context;
    Activity act;
    ArrayList<SlideMenuItem> menuItemList;

    public MenuAdapter(Activity act, int workflowMenu) {
        this.act = act;
        this.context = act.getApplicationContext();
        parseXml(workflowMenu);
    }

    @Override
    public int getCount() {
        return menuItemList.size();
    }

    @Override
    public Object getItem(int position) {
        return menuItemList.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = act.getLayoutInflater();
            rowView = inflater.inflate(R.layout.slidemenu_listitem, null);
            MenuItemHolder viewHolder = new MenuItemHolder();
            viewHolder.label = (TextView) rowView.findViewById(R.id.menuLabel);
            viewHolder.icon = (ImageView) rowView.findViewById(R.id.menu_icon);
            rowView.setTag(viewHolder);
        }

        MenuItemHolder holder = (MenuItemHolder) rowView.getTag();
        String s = menuItemList.get(position).label;
        holder.label.setText(s);
        holder.icon.setImageDrawable(menuItemList.get(position).icon);

        rowView.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                SlideMenuItem item = (SlideMenuItem) getItem(position);
                Toast.makeText(context, "Id: " + Integer.toString(item.id), Toast.LENGTH_SHORT).show(); 

            }
        });

        return rowView;
    }

    public class SlideMenuItem {
        public int id;
        public Drawable icon;
        public String label;
    }

    class MenuItemHolder {
        public TextView label;
        public ImageView icon;
    }

    private void parseXml(int menu) {

        menuItemList = new ArrayList<SlideMenuItem>();

        try {
            XmlResourceParser xpp = context.getResources().getXml(menu);

            xpp.next();
            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                if (eventType == XmlPullParser.START_TAG) {

                    String elemName = xpp.getName();

                    if (elemName.equals("item")) {

                        String textId = xpp.getAttributeValue(
                                "http://schemas.android.com/apk/res/android",
                                "title");
                        String iconId = xpp.getAttributeValue(
                                "http://schemas.android.com/apk/res/android",
                                "icon");
                        String resId = xpp.getAttributeValue(
                                "http://schemas.android.com/apk/res/android",
                                "id");

                        SlideMenuItem item = new SlideMenuItem();
                        item.id = Integer.valueOf(resId.replace("@", ""));
                        item.icon = context.getResources().getDrawable(
                                Integer.valueOf(iconId.replace("@", "")));
                        item.label = resourceIdToString(textId);

                        menuItemList.add(item);

                        Log.v("ADDED ITEM LABEL: ", item.label); //This triggers with the right labels, so the listview does exist!
                    }

                }

                eventType = xpp.next();

            }
            Log.v("MenuList: ", "Size: " + Integer.toString(menuItemList.size()));
            for(SlideMenuItem item : menuItemList) {
                Log.v("MenuList: ", Integer.toString(item.id) + ": " + item.label);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private String resourceIdToString(String text) {
        if (!text.contains("@")) {
            return text;
        } else {
            String id = text.replace("@", "");
            return context.getResources().getString(Integer.valueOf(id));

        }
    }
} 
```

workflowMenu 参数是一个包含菜单项的 xml 文件，因此可以填充列表视图：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/item_one"
        android:icon="@drawable/ic_launcher"
        android:title="Item 1">
    </item>
    <item
        android:id="@+id/item_two"
        android:icon="@drawable/ic_launcher"
        android:title="Item 2">
    </item>
    <item
        android:id="@+id/item_three"
        android:icon="@drawable/ic_launcher"
        android:title="Item 3">
    </item>
    <item
        android:id="@+id/item_four"
        android:icon="@drawable/ic_launcher"
        android:title="Item 4">
    </item>
    <item
        android:id="@+id/item_five"
        android:icon="@drawable/ic_launcher"
        android:title="Item 5">
    </item>
    <item
        android:id="@+id/item_seven"
        android:icon="@drawable/ic_launcher"
        android:title="Item 6">
    </item>
    <item
        android:id="@+id/item_six"
        android:icon="@drawable/ic_launcher"
        android:title="Item 7">
    </item>
</menu> 
```

在我的 MainProject 中，该库的名称如下：

```
public class MainActivity extends BaseWindow {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.InitializeWindow(MainActivity.this, R.layout.activity_main, R.menu.slide_menu, "Home"); 

    } 
```

将在哪里`BaseWindow`设置所有必要的 GUI。当我想启动一个新的 Activity 时，当用户按下我库中 listView 中的一项时，就会出现问题。

如果`listview`是在与我相同的项目中构建的，我可以在一个`Manifest`文件中指定活动并在适配器内启动活动，如下所示：

```
rowView.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                launchActivity(position);
            }

        });

public void launchActivity(int position) {

    Class<?> cls = null;
    switch (menuItemList.get(position).id) {
        case R.id.item_one:
            cls = FirstClass.class;
            act.finish();
            break;
    }
    Intent intent = new Intent(context, cls);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
} 
```

但由于适配器在另一个项目（库）中，我还必须在库清单中声明活动。如果我不知道此活动的名称，我不知道该怎么做。而且我想由于安全原因，在运行时无法写入清单或创建活动声明。

有谁知道我想在这里实现什么？请给我一些关于如何解决这个问题的建议。

请问有什么不清楚的地方。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:02:20.460

呵呵）

您可以从 App 项目中的库项目中声明活动。但仔细考虑一下：库中的 Activity 将如何知道在应用程序上调用哪个 Activity？

您很可能希望在您的 App 项目中扩展 LibraryActivity 并包含仅与该应用程序相关的部分代码。

# salesforce - 如何获取实现 Schedulable 接口的 Apex 类？

> ID：15070640
> 
> 赞同：1
> 
> 时间：2013-02-25T15:39:00.830
> 
> 标签：salesforce, apex-code

我有许多实现可调度接口的类。我想通过另一个顶点课程一次安排多个 Apex 课程。所以我需要查询所有实现Schedulable接口的类。

我正在使用以下代码片段来实现这一点，但我收到如下编译器错误

错误：“您必须选择实现可调度接口的 Apex 类。在第 127 行第 13 列”

代码：

```
list<ApexClass> listClasses; 

String input='0 0 8 13 2 ?';

listClasses=[Select Id, Name,body from ApexClass]   
for(ApexClass a:listClasses){            
        system.schedule(a.Name+' AutoScheduler', input, a);    
} 
```

问题：如何查询所有实现可调度接口的顶点类？这样我就可以直接将它传递给 system.schedule() 方法。

不同的尝试：收到此错误后，我尝试仅查询一个实现可调度接口的顶点类（已知类）。又没用。请参阅下面的片段以了解不同的尝试

代码：

```
list<ApexClass> listClasses; 

String input='0 0 8 13 2 ?';

//Retriving only one class of Name='SchedularTest' 

listClasses=[Select Id, Name,body from ApexClass where Name ='SchedularTest']   
for(ApexClass a:listClasses){            
        system.schedule(a.Name+' AutoScheduler', input, a);    
} 
```

错误：“您必须选择实现可调度接口的 Apex 类。在第 127 行第 13 列”

提前致谢

萨提斯库马尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:07:25.250

我会说错误信息很清楚？

您传递给 System.schedule 的最后一个参数必须是一个新对象。类的新实例。你传递的是关于类的元数据信息，它的主体等......这些东西不能像那样“运行”。

我敢打赌这`system.schedule('SchedulerTest AutoScheduler', input, new SchedulerTest());`会行得通吗？如果没有 - 确保该类编译正常，也许还确保它是否被标记为有效。

看？您如何期望代表磁盘上数据库/文件中的一行的东西像类的对象一样“工作”？

如果您需要创建仅具有此类名称的给定类的新对象 - 您可能需要检查[`Type`方法](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_type.htm)。

```
String className = 'SchedulerTest';
Type t = Type.forName(className);

System.schedule(className, '0 0 8 13 2 ?', (Schedulable)t.newInstance()); 
```

这会创建一个新对象（它实际上是一个通用对象），然后将其转换为该方法可以接受的东西。如果该类未实现接口，您将遇到运行时失败：

> System.TypeException：从运行时类型 SchedulerTest 到 system.Schedulable 的无效转换

# sql - 如何从vb中的ms访问中检索字段

> ID：15070641
> 
> 赞同：0
> 
> 时间：2013-02-25T15:39:06.923
> 
> 标签：sql, ms-access, vb6

我需要根据从vb6中的ms访问输入的用户名访问员工表的薪水字段。我在一个表单中读取用户名和密码，然后进入另一个显示用户名对应的薪水的表单。我正在使用 Adodc1 连接。我知道 SQL 但不知道如何在 vb 中实现它...我想确切地知道在哪里使用 sql 查询？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:47:38.360

如果您使用的是 DAO，这应该会有所帮助。将以下函数添加到模块中，并在 MyDB 中传递对 OPENED 数据库的引用（数据类型为 DAO.Database，使用 DAO.OpenDatabase() 函数打开数据库）：

```
Public Function GetQueryResults(ByRef MyDB as DAO.Database, SQLQuery As String) As DAO.Recordset
    Dim Q As DAO.QueryDef, R As DAO.Recordset

    Set Q = MyDB.CreateQueryDef("", SQLQuery)
    Set R = Q.OpenRecordset

    Set GetQueryResults = R
End Function

Public Function GetFirstValueFromQuery(MyDB As DAO.Database, SQLQuery As String) As String
    If (MyDB Is Nothing) Then Exit Function

    Dim RES As DAO.Recordset, T As String

    Set RES = GetQueryResults(MyDB, SQLQuery)

    With RES
        T = .Fields(0).Value
        GetFirstValueFromQueryGeneral = T
    End With

    RES.Close
End Function 
```

现在，从每个表单调用这个函数（无论你需要在哪里运行 SQL 查询）：

```
Dim A as String
A=GetFirstValueFromQuery(MyDatabase, "SELECT Employee.Salary FROM Employee WHERE Employee.UserName='"+uname+"'")
Msgbox "Salary="+A 
```

# themes - 如何在 Web 模板中修复此错误

> ID：15070643
> 
> 赞同：0
> 
> 时间：2013-02-25T15:39:23.033
> 
> 标签：themes, opencart

我刚刚安装了一个新主题，现在我遇到了问题。每当客户结帐时，都会显示以下错误：

> 注意：错误：无法加载模板 C:\xampp\htdocs\nowahala/catalog/view/theme/default/template/checkout/simplecheckout_shipping.tpl！在 C:\xampp\htdocs\nowahala\vqmod\vqcache\vq2-system_engine_controller.php 第 75 行

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:56:36.900

简单的答案是添加文件。这个错误很容易理解。您的简单结帐中缺少模板文件。打开修改并将文件加载到那里（注意它是`default`文件夹）

# javascript - 在 ExtJs 4.1.3 中添加列和子列

> ID：15070646
> 
> 赞同：0
> 
> 时间：2013-02-25T15:39:31.007
> 
> 标签：javascript, web-applications, extjs, extjs4

我正在尝试在 ExtJs 中添加一些带有子列的列标题组，但是我遇到了一些困难......

我知道当我们为网格面板指定配置时，我们可以使用树状结构来指定具有子组的列，即

```
columns[{
  text: 'column1',
  columns[{
      text: 'subcolumn'
  }]
}} 
```

这很好，但是，当我的网格面板存储加载时，我正在尝试动态执行此操作

我有一些代码可以动态创建一个网格列

```
 retCol = new Ext.grid.column.Column({
       fixed: false,
       hideable: false,
       menuDisabled: true,
       draggable: false,
       sortable: false,
       align: 'center',               
       text: monthName,
       columns: []
   }); 
```

问题是，新创建的似乎没有我提供的列的值，它隐藏在 initialConfig 中，但在那里没有用：-/

看到这段代码创建了列标题，如果我们没有列数组，就无法添加子列。我尝试添加到“项目”配置中，但这也不起作用：-/

感谢您提前提供任何帮助

巴兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:47:34.663

如果要在渲染网格后添加列，可以使用网格[重新配置](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure)方法。

我刚刚再次阅读了您的问题，重新配置也希望您在您发布的结构中提供您的列配置。不是动态创建的标题。

但是，您可以在商店加载并通过重新配置将新配置传递到网格之后动态构建列配置。

# ruby-on-rails - Rails I18n 和缺失的翻译：找出调用 t(...) 方法的位置

> ID：15070648
> 
> 赞同：2
> 
> 时间：2013-02-25T15:39:34.740
> 
> 标签：ruby-on-rails, internationalization

我们使用自己的异常处理程序来处理丢失的翻译：

```
# Logs missing I18n translations to `missing_translations.log`.
I18n.exception_handler = lambda do |exception, locale, key, options|
  e = exception.respond_to?(:to_exception) ? exception.to_exception : exception
  # log rotate, because it's not important enough to keep
  @log ||= Logger.new(File.join(Rails.root, 'log', 'missing_translations.log'),2,5*1024*1024)
  if e.is_a? I18n::MissingTranslationData
    @log.info "#{locale}.#{key}"
  else
    raise e
  end
  exception.to_s
end 
```

当我们的测试套件运行时，记录器的内容被保存到一个文件中，我们可以在其中查看是否缺少翻译。这非常有用，但通常并不清楚在哪里调用了丢失的键，因此可以修复它（例如在翻译通用键时）。遗憾的是我没有找到获取文件名和行号的方法，但我确定有解决方案吗？

我尝试了`backtrace`有关异常的方法，但这并没有提供更多信息。

```
[6] pry(main)> e
=> #<I18n::MissingTranslationData: translation missing: avatar.devise.failure.already_authenticated>
[7] pry(main)> e.to_exception
=> #<I18n::MissingTranslationData: translation missing: avatar.devise.failure.already_authenticated>
[8] pry(main)> e.to_exception.backtrace
=> nil
[9] pry(main)> e
=> #<I18n::MissingTranslationData: translation missing: avatar.devise.failure.already_authenticated>
[10] pry(main)> e.backtrace
=> nil 
```

我也发现[了这个](https://github.com/svenfuchs/i18n-missing_translations)，但这似乎已经过时了。

非常感谢您的帮助

** 更新 1 **

使用`caller`我得到以下堆栈跟踪：

```
pry(main)> caller(4)
=> ["/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:278:in `re'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:254:in `rep'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:234:in `block (3 levels) in repl'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:232:in `loop'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:232:in `block (2 levels) in repl'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:231:in `catch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:231:in `block in repl'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:230:in `catch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_instance.rb:230:in `repl'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/pry_class.rb:170:in `start'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-debugger-0.2.1/lib/pry-debugger/pry_ext.rb:15:in `block in start_with_pry_debugger'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-debugger-0.2.1/lib/pry-debugger/processor.rb:18:in `block in run'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-debugger-0.2.1/lib/pry-debugger/processor.rb:17:in `catch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-debugger-0.2.1/lib/pry-debugger/processor.rb:17:in `run'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-debugger-0.2.1/lib/pry-debugger/pry_ext.rb:14:in `start_with_pry_debugger'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/pry-0.9.12/lib/pry/core_extensions.rb:43:in `pry'",
 "/Users/josh/Documents/Work/Sientia/iq/config/initializers/i18n.rb:8:in `block in <top (required)>'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/i18n-0.6.1/lib/i18n.rb:297:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/i18n-0.6.1/lib/i18n.rb:297:in `handle_exception'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/i18n-0.6.1/lib/i18n.rb:159:in `translate'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/devise-2.1.2/app/controllers/devise_controller.rb:130:in `require_no_authentication'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:418:in `_run__818949352997764593__process_action__4268511465162580532__callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal.rb:203:in `dispatch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_controller/metal.rb:246:in `block in action'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:42:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/meta_request-0.2.1/lib/meta_request/middlewares/app_request_handler.rb:11:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-contrib-1.1.0/lib/rack/contrib/response_headers.rb:17:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/meta_request-0.2.1/lib/meta_request/middlewares/headers.rb:16:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/meta_request-0.2.1/lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/request_store-1.0.5/lib/request_store/middleware.rb:9:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/mongoid-3.0.22/lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/mongoid-3.0.22/lib/mongoid/unit_of_work.rb:39:in `unit_of_work'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/mongoid-3.0.22/lib/rack/mongoid/middleware/identity_map.rb:34:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/sass-3.2.3/lib/sass/plugin/rack.rb:54:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__2503506183694590348__call__3723261410109716825__callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:65:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/builder.rb:134:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/urlmap.rb:64:in `block in call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/urlmap.rb:49:in `each'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/urlmap.rb:49:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/capybara-1.1.4/lib/capybara/server.rb:17:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/rack-1.4.5/lib/rack/handler/thin.rb:13:in `run'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/capybara-1.1.4/lib/capybara.rb:177:in `run_default_server'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/capybara-1.1.4/lib/capybara.rb:236:in `block (2 levels) in <top (required)>'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/capybara-1.1.4/lib/capybara/server.rb:65:in `call'",
 "/Users/josh/.rvm/gems/ruby-1.9.3-p327-falcon@iq/gems/capybara-1.1.4/lib/capybara/server.rb:65:in `block in boot'"]
[2] pry(main)> 
```

可悲的是，我仍然无法真正看到翻译在哪里使用。有人看到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:19:01.127

[`Kernel#caller`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-caller)返回当前的执行堆栈，所以这样的事情应该可以工作：

```
I18n.exception_handler = lambda do |exception, locale, key, options|
  # ...
  if e.is_a? I18n::MissingTranslationData
    stack = caller(4) # omit 4 levels up to 'translate' call
    log.info "#{locale}.#{key}"
    log.info stack.join("\n")
    # ...
  end
  # ...
end 
```

# sql-server - 对 SQL Server 中的两列执行双重排序，主排序 不在前两列的评估中

> ID：15070649
> 
> 赞同：6
> 
> 时间：2013-02-25T15:39:36.483
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个使用 SQL Server 2008 的表，它有一个表，上面有两个可排序的列，一个是手动设置的，另一个是由系统过程计算的（这个过程将所有内容作为一个整体进行排序，并从 10 开始分配排序，直到最高行数字乘以 10)

```
ID    Manual     System
------------------------
1      null      300
2      2         380
3      null      500
4      null      200 
```

我试图让它将 id 排序为 4,2,1,3

我希望输出在应用后对系统进行手动排序。如果添加另一行并且它具有也需要考虑的手动排序，则会使事情进一步复杂化。

```
ID    Manual     System
-----------------------
1      null      300
2      2         380
3      null      500
4      null      200
5      5         100 
```

所以新的排序是 4,2,1,3,5

```
ID    Manual     System
-----------------------
4      null      200
2      2         380
1      null      300
3      null      200
5      5         100 
```

有任何想法吗？我已经尝试过 Rank、Dense_Rank、Row_Number 等。

对于我的示例，给出的解决方案似乎是正确的。我忘了提到第三列 personID 也是这里的一个因素。

```
ID    Manual     System    PersonID
-------------------------------------
4      null      200         22
2      2         380         22
1      null      300         22
3      null      200         22
5      5         100         22
8      1         210         25
6      1         480         25
7      null      600         25
9      4         800         25
10     null      990         25 
```

所以我首先必须按人订购，然后按手动订购，然后按分类订购。这似乎仍然给我一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:25:12.167

这是我的解决方案：[http ://sqlfiddle.com/#!3/a32a0/1/0](http://sqlfiddle.com/#!3/a32a0/1/0)

```
SELECT *
FROM
(
  SELECT
    ID
    , ROW_NUMBER() OVER (PARTITION BY PersonID ORDER BY System)-.1 AS rn
    , Manual
    , System
    , PersonID
  FROM YourTable
) t0
ORDER BY PersonID
  , COALESCE(Manual, RN) 
```

这是解释：

*   我们将行号作为基本行号。但是由于我们首先按 PersonID 的高阶索引进行排序，因此在此`PARTITION BY...`之前我`ORDER BY...`会重置每个分组的索引`MANUAL`
*   在自然排序`ROW_NUMBER`和`MANUAL`排序之间存在联系的情况下，我减去 0.1（（0,1）之间的任意数量）。`MANUAL`如果出现平局，这将优先考虑该值
*   在对最终结果进行排序时，我首先`ORDER BY`是值，首先确保正确分组，然后我按and`PARTITION BY`的第一个非空值排序`MANUAL``RN`

试试看。+指向前两个答案的起点。我以其中一个为起点，然后从那里重新编写。

编辑：删除了 .1 的减法并添加了一个新的排名函数，它“欺骗”优化器更喜欢手动而不是排名。我不知道这是否在所有情况下都成立，或者优化器在其他情况下是否无法按此顺序给出结果，但我想包括这些发现以防万一它们有帮助。

我更新的查询如下：

```
SELECT *
  FROM
  (
    SELECT
      ID
      , ROW_NUMBER() OVER (PARTITION BY PersonID ORDER BY System) AS rn
      , ROW_NUMBER() OVER (PARTITION BY PersonID ORDER BY Manual) AS rn_throwaway
      , Manual
      , System
      , PersonID
    FROM YourTable
  ) t0
ORDER BY PersonID
  , COALESCE(Manual, RN) 
```

它的使用示例位于[http://sqlfiddle.com/#!3/1831d/55/0](http://sqlfiddle.com/#!3/1831d/55/0)和[http://sqlfiddle.com/#!3/a32a0/9/0](http://sqlfiddle.com/#!3/a32a0/9/0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:57:54.443

我认为这就是你所需要的。有点难以解释。

*`Basically inserting not null manual values as row index (or row number) to the record list ordered by system.`*

[小提琴演示](http://sqlfiddle.com/#!3/a76ba/18)

```
;with cte as (
    select id, manual,system,
           convert(decimal(10,1),row_number() over(order by system)) rn
    from t
    where manual is null 
    union all
    select id, manual,system, convert(decimal(10,1),manual-0.5) rn
    from t
    where manual is not null
)
select id,manual,system
from cte
order by rn

| ID | MANUAL | SYSTEM |
------------------------
|  4 | (null) |    200 |
|  2 |      2 |    380 |
|  1 | (null) |    300 |
|  3 | (null) |    500 |
|  5 |      5 |    100 | 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T16:32:16.533

如果我了解您的要求，您想按 System 列排序，除非提供 Manual 列，在这种情况下，将其用作排序位置？如果是这样，那么这应该适合您使用`CASE`and `ROW_NUMBER`：

```
SELECT Id, Manual, System
FROM (
  SELECT Id, 
    Manual, 
    System,
    ROW_NUMBER() OVER (ORDER BY Manual, System)  rn
  FROM YourTable) t
ORDER BY CASE WHEN Manual IS NULL THEN RN ELSE Manual END, COALESCE(Manual,RN+1) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/ed7dd/8)

# wxpython - 如何通过单击按钮在 wxpython 中创建附加窗口

> ID：15070651
> 
> 赞同：3
> 
> 时间：2013-02-25T15:39:50.617
> 
> 标签：wxpython

我需要通过单击按钮在 wxpython 中创建一个额外的新窗口（它与主窗口在物理上是分开的）。我想在不关闭最后一个窗口的情况下执行此操作。

这是我到目前为止所拥有的：

```
class Prototype(wx.Frame):
     def __init__(self, parent, title):
          wx.Frame.__init__(self, None, size=(1240,705))
          self.UI()
          self.Centre()
          self.Show()

     def UI(self):
          self.panel1 = wx.Panel(self, -1)
          self.sizer = wx.BoxSizer()
          self.sizer.Add(self.panel1, 1, flag=wx.EXPAND) 
          b = wx.Button(self.panel1, label='second window', size=(180,100), pos=(650,25))
          b.Bind(wx.EVT_BUTTON, self.OnB)        

          self.panel2 = wx.Panel(self, -1)
          self.sizer.Add(self.panel2,1,flag=wx.EXPAND)
          self.panel2.Hide()
          self.panel2.SetSizer(self.vbox)
          self.SetSizer(self.sizer)  

     def OnB(self, event):
          self.panel2.Show()
          self.sizer.Layout() 

app = wx.App()
Prototype(None, title='')
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:47:15.920

这是一个工作示例：

```
 import wx

 ########################################################################
 class SecondFrame(wx.Frame):
      """"""

      #----------------------------------------------------------------------
      def __init__(self):
           """Constructor"""
           wx.Frame.__init__(self, None, title="Second Frame")
           panel = wx.Panel(self)
           txt = wx.StaticText(panel, label="I'm the second frame!")

 ########################################################################
 class Prototype(wx.Frame):

      #----------------------------------------------------------------------
      def __init__(self, parent, title):
           wx.Frame.__init__(self, None, title="First Frame", size=(1240,705))
           self.UI()
           self.Centre()
           self.Show()

      #----------------------------------------------------------------------
      def UI(self):
           self.panel1 = wx.Panel(self, -1)
           self.sizer = wx.BoxSizer()
           self.sizer.Add(self.panel1, 1, flag=wx.EXPAND) 
           b = wx.Button(self.panel1, label='second window', size=(180,100), pos=(650,25))
           b.Bind(wx.EVT_BUTTON, self.OnB)        

           self.SetSizer(self.sizer)  

      #----------------------------------------------------------------------
      def OnB(self, event):
           frame = SecondFrame()
           frame.Show()

 #----------------------------------------------------------------------
 app = wx.App(False)
 Prototype(None, title='')
 app.MainLoop() 
```

不过，我真的不建议混合使用 sizers 和绝对定位。您应该使用其中一种。除非您打算制作无法调整大小的框架，否则我建议使用 sizers。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:58:51.673

`wx.Frame`只需像您在应用程序中所做的那样创建一个新的。将一些内容添加到您的按钮事件处理程序中：

```
self.second_window = wx.Frame(None)
self.second_window.Show() 
```

# c++ - QVariantMap 的问题（“没有可用于“QBasicAtomicInt_fetchAndAddOrdered()”的源）

> ID：15070653
> 
> 赞同：2
> 
> 时间：2013-02-25T15:39:52.080
> 
> 标签：c++, qt, blackberry-10

我收到此错误（红色）：

**“ 0xba49e3f0 处的“QBasicAtomicInt_fetchAndAddOrdered() ”没有可用的源**-当我尝试在调试模式下执行以下行时：

> item.mediaUrl = results.value("itemMediaUrl").toString();

其中*results*是一个*QVariantMap*（我成功地从*results*中读取了其他值，例如其他字符串、整数等），而*item*只是一个具有*QString 类型变量 mediaUrl*的对象。

有什么帮助吗？？有什么建议么？？谢谢

附言。看来我是这样修复的：

```
QUrl url =  results.value("itemMediaUrl").toUrl();
    item.mediaUrl = url.toString(); 
```

我想如果你把这两行放在一起（即在 toUrl 之后直接应用 toString() ......它可能仍然不起作用......

# algorithm - 做一个算法，但我的智商太低

> ID：15070655
> 
> 赞同：1
> 
> 时间：2013-02-25T15:40:01.843
> 
> 标签：algorithm, math

好的，我一直在努力解决这个问题，但我觉得我太累了，无法解决这个问题。

每周我的脚本都会检查一个表格，并将 60 种新产品的状态从停用更改为启用。我想确保这 ​​60 种产品并非全部来自 1 个类别，而是来自具有可激活产品的所有类别。

示例产品表

```
| productid | category     | status      |
| 1         | iPad 2       | deactivated |
| 2         | iPod Touch 4 | deactivated | 
```

示例数组，您会看到类别名称和可以激活的产品数量。

```
array(9) {
  ["iPad 2"] => int(2)
  ["iPod Touch 5"] => int(2)
  ["iPod Touch 4"] => int(6)
  ["iPhone 3G/3GS"] => int(94)
  ["iPad 1"] => int(104)
  ["iPad Mini"] => int(150)
  ["iPhone 4/4S"] => int(174)
  ["iPhone 5"] => int(205)
  ["iPad 3/4"] => int(236)
} 
```

现在，我将如何从所有这些类别中激活产品，并很好地划分？

我可以手动粗略计算得到的数组。那将是类别名称和将被激活的产品。共有 60 种产品，很好地划分了各个类别。

```
array(9) {
  ["iPad 2"] => int(2)
  ["iPod Touch 5"] => int(2)
  ["iPod Touch 4"] => int(6)
  ["iPhone 3G/3GS"] => int(8)
  ["iPad 1"] => int(8)
  ["iPad Mini"] => int(8)
  ["iPhone 4/4S"] => int(8)
  ["iPhone 5"] => int(9)
  ["iPad 3/4"] => int(9)
} 
```

但我缺乏编写这种算法的能力。我希望今天这里有人比我聪明一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:38:09.450

在伪代码中：

```
EvenlySelect(item_list):
  sorted_items = SortLowestToHighestCount(item_list)
  remaining_num_items = CountTotalNumberOfItems(item_list)
  return_list = Empty()
  while (!Empty(sorted_items)):
    desired_quantity = remaining_num_items / Size(sorted_items))
    if desired_quantity == 0:
      break
    quantity_to_add = 0
    if desired_quantity > sorted_items[0].quantity:
      quantity_to_add = sorted_items[0].quantity
    else:
      quantity_to_add = desired_quantity
    Append(Item(sorted_items[0].category, quantity_to_add), return_list)
    remaining_num_items -= quantity_to_add
    RemoveFirstElement(sorted_items)

  return return_list 
```

这个想法是：从数量最小的类别到数量最大的类别。在每个步骤中，计算出您需要从该类别中获得多少个项目才能保持平衡（鉴于您在前面的步骤中已经选择了哪些项目）。如果该类别有足够的项目，那就拿那么多。否则尽可能多地服用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:05:37.923

```
import java.util.Arrays;
import java.util.Random;

public class Selection {
    public static void main(String[] args) {
        //input arrays
        String[] categories = {"iPad 2","iPod Touch 5","iPod Touch 4","iPhone 3G/3GS","iPad 1","iPad Mini","iPhone 4/4S","iPhone 5","iPad 3/4"};
        int[] quantities = {2,2,6,94,104,150,174,205,236};
        //ensure that there's at least one item for each category
        int[] distributions = {1,1,1,1,1,1,1,1,1};
        int[] intervals = new int[9];
        intervals[0] = 2;
        for (int i=1;i<9;i++) {
            intervals[i] = intervals[i-1]+quantities[i];
        }
        Random generator = new Random();
        int range = intervals[intervals.length-1];
        for (int j=0;j<51;j++) { //to fill the remaining 51 slots according roughly to their proportions
            int randomInt = generator.nextInt(range); //generate an integer between 0 and 2+2+6+94+104+150+174+205+236 at random
            if (randomInt < intervals[0]) {
                distributions[0]++;
            } 
            else if (randomInt >= intervals[0] && randomInt < intervals[1]) {
                distributions[1]++;
            }
            else if (randomInt >= intervals[1] && randomInt < intervals[2]) {
                distributions[2]++;
            }
            else if (randomInt >= intervals[2] && randomInt < intervals[3]) {
                distributions[3]++;
            }
            else if (randomInt >= intervals[3] && randomInt < intervals[4]) {
                distributions[4]++;
            }
            else if (randomInt >= intervals[4] && randomInt < intervals[5]) {
                distributions[5]++;
            }
            else if (randomInt >= intervals[5] && randomInt < intervals[6]) {
                distributions[6]++;
            }
            else if (randomInt >= intervals[6] && randomInt < intervals[7]) {
                distributions[7]++;
            }
            else {
                distributions[8]++;
            }
        }
        System.out.println("array(9) {");
        for (int k=0; k< 9; k++) {
            System.out.println("  [\""+categories[k]+"\"] => int("+distributions[k]+")");
        }
        System.out.println("}");
    }
} 
```

我已经测试了上面完整且有效的代码，并希望代码是不言自明的。

这是我刚刚得到的示例输出：

```
array(9) {
  ["iPad 2"] => int(1)
  ["iPod Touch 5"] => int(1)
  ["iPod Touch 4"] => int(2)
  ["iPhone 3G/3GS"] => int(6)
  ["iPad 1"] => int(7)
  ["iPad Mini"] => int(11)
  ["iPhone 4/4S"] => int(8)
  ["iPhone 5"] => int(13)
  ["iPad 3/4"] => int(11)
} 
```

这个想法很简单：我们首先为每个类别保留一个项目，这会占用 9 个插槽。一个一个地考虑剩下的 51 个插槽，每个插槽都有机会根据其比例进入各自的类别。由于项目的总数不够大，而且我们使用随机函数生成一个整数，所以我们不能保证结果完全符合每个类别的比例。尽管如此，我认为该解决方案足以满足您的目的。

# twitter-bootstrap - 带有引导日期选择器的淘汰自定义绑定显示错误视图

> ID：15070657
> 
> 赞同：1
> 
> 时间：2013-02-25T15:40:10.480
> 
> 标签：twitter-bootstrap, knockout.js

我想显示一个日期选择器以仅显示年份和月份，并将当前月份作为默认视图。问题是它仍然显示日视图，我看不出有什么问题，有什么建议吗？

```
ko.bindingHandlers.datePickerMonthYear =
    init: (element, valueAccessor, allBindingsAccessor, viewModel) ->
        value = valueAccessor()
        $('#dpMonths').data({date: value()});
        $('#dpMonths').datepicker('update');

        $(element).datepicker(
            viewMode: "years", 
            minViewMode: "months"
        ).on('changeDate', (ev) ->  
            $(this).datepicker('hide')
        ).on('click',  (ev) ->
            $(this).datepicker('show')
        )
        ko.bindingHandlers.validationCore.init(element, valueAccessor,allBindingsAccessor)
    ,
    update: (element, valueAccessor, allBindingsAccessor, viewModel) -> 
```

**HTML**

```
<div id="dpMonths" class="input-append date" data-date-minviewmode="months" data-date-viewmode="years" data-date-format="mm/yyyy" data-bind="datePickerMonthYear: startDate">
    <input class="span2" type="text" readonly="" data-bind="value: startDate">
    <span class="add-on">
        <i class="icon-calendar"></i>
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T10:58:26.013

尝试使用`dateFormat` 而不是像这样`format`在[你的小提琴](http://jsfiddle.net/DcafD/25/)中使用：

```
$(document).ready(function() {
    $('#input_date').datepicker({
        dateFormat: 'mm/yy',
        viewMode: "months", 
        minViewMode: "years",
        startView: "month"
    });
}); 
```

在这里工作：http: [//jsfiddle.net/jham/ESX6Z/1/](http://jsfiddle.net/jham/ESX6Z/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:04:54.910

根据[this](https://github.com/eternicode/bootstrap-datepicker)，您需要设置`startView`属性：

```
$(element).datepicker({
    startView: year
}) 
```

# ios - YouTube web 如何在没有用户操作的情况下在移动 Safari 上自动开始视频播放？

> ID：15070658
> 
> 赞同：2
> 
> 时间：2013-02-25T15:40:17.953
> 
> 标签：ios, video, mobile-safari, html5-video, autoplay

YouTube 网页版始终可以在移动 Safari 上自动播放视频，无需用户对 HTML 视频元素进行显式操作。YouTube 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:46:27.623

YouTube 实际上做了一些非常棘手的事情，如果您单击与当前视频相关的视频或在搜索中，它实际上并没有加载另一个页面，它使用 JavaScript 将页面更新为不同的页面，然后使用相同的单击处理程序开始播放视频，因此系统认为它是用户启动的。这就是为什么如果您在不在 YouTube 中时直接在地址栏中输入视频的 URL，它不会自动启动...

# excel - 什么打开了我的 Excel 工作簿？

> ID：15070659
> 
> 赞同：1
> 
> 时间：2013-02-25T15:40:20.323
> 
> 标签：excel, vbscript, automation, vba

我正在编写一整套 VBScript 来自动处理 Excel 工作簿。

这些工作簿包含在工作簿打开时运行的 VBA 代码。我需要 VBA 在用户打开它和我的脚本打开它时表现出不同的行为。

有谁知道我如何区分这两种情况？（我不能同时编辑 VBS 和 VBA）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:07:10.530

```
Sub Test()
'This is VBA but should easily convert to vbscript...
Dim wb As Workbook

    Application.EnableEvents = False
    Set wb = Workbooks.Open("C:\local files\tester.xlsm")
    Application.EnableEvents = True

    Application.Run "'" & wb.Name & "'!ThisWorkBook.IsAutomated"
    Application.Run "'" & wb.Name & "'!ThisWorkBook.Workbook_Open"

End Sub 
```

在“测试人员”工作簿（`ThisWorkBook`代码模块）中：

```
Private m_automated As Boolean

Public Sub IsAutomated()
    m_automated = True
End Sub

Public Sub Workbook_Open()

    If m_automated Then
        MsgBox "automated"
    Else
        MsgBox "not automated"
    End If

End Sub 
```

# prolog - 制作反向列表

> ID：15070662
> 
> 赞同：2
> 
> 时间：2013-02-25T15:40:25.323
> 
> 标签：prolog

我有以下代码。试图做一个反向列表。但它不起作用。

```
reverse([],[H|T]).
reverse([H|T],Z) :- reverse(T,[H|Z]). 
```

我在序言中运行它，我得到了这个：

```
1 ?- trace, reverse([1,2,3],X).
   Call: (7) reverse([1, 2, 3], _G396) ? creep
   Call: (8) reverse([2, 3], [1|_G396]) ? creep
   Call: (9) reverse([3], [2, 1|_G396]) ? creep
   Call: (10) reverse([], [3, 2, 1|_G396]) ? creep
   Exit: (10) reverse([], [3, 2, 1|_G396]) ? creep
   Exit: (9) reverse([3], [2, 1|_G396]) ? creep
   Exit: (8) reverse([2, 3], [1|_G396]) ? creep
   Exit: (7) reverse([1, 2, 3], _G396) ? creep
true. 
```

这应该给我 [3,2,1]，而不是 [1,2,3]。这里出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:58:32.307

当列表为空时，其反向为空。所以

```
reverse([], []). 
```

在另一种情况下，您将列表的第一个元素附加到列表其余部分的末尾。所以 ：

```
reverse([H|T],Z) :-
    reverse(T,Z1),
    append(Z1, [H], Z). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:18:17.430

你几乎做对了。您需要的是一个“累加器”，它收集到目前为止的结果并在递归结束时将其传递给返回变量：

```
reverse([],Z,Z).
reverse([H|T],Z,Acc) :- reverse(T,Z,[H|Acc]). 
```

否则，当函数从递归调用返回时，会忘记反向列表。调用时需要用空列表实例化累加器`reverse/3`：

```
?- reverse([1,2,3],X,[]). 
```

如果您进行跟踪，您将看到第二个参数在您的原始列表为空之前不会被实例化。

# objective-c - 客户端通过网络接收消息的设计建议

> ID：15070663
> 
> 赞同：1
> 
> 时间：2013-02-25T15:40:26.237
> 
> 标签：objective-c, network-programming

我正在编写一个客户端，它通过 TCP 从服务器接收一组不同的消息。我创建了一个简单的测试类，它能够连接到服务器并以 NSData 块的形式接收消息。但现在我被困在如何从这里开始并需要一些设计建议。

我的一个想法是为每条消息创建一个协议，通知委托接收到的消息类型和包含消息的对象：

**协议**

```
-(void)didReceiveLifesign:(LifesignMessage*)message;
-(void)didReceiveLocation:(LocationMessage*)message;
... 
```

**解析器**

```
-(void)didReceiveData:(NSData*)data {
    int type = getType(data);
    switch(type) {
        case 0: [self.delegate didReceiveLifesign:parseLifesign(data); break;
        case 1: [self.delegate didReceiveLocation:parseLocation(data); break;
        ...
    }
} 
```

但是随着消息数量的增加，我发现这个解决方案很混乱。有没有更漂亮的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:43:53.137

Each time you add a new type of message to the system, you will be adding new code to handle that particular type. You cannot get away from that. So, the place you can really abstract-out right now is the dispatching: the switch statement, in your case.

If very few **new** message-types will be added in the future, the simplest approach may be the one you have already taken: simply add a new "case" each time.

An alternate approach is to allow other code to register as a "listener"/"callback". That makes the dispatching generic. The logic becomes:

*   Find the message type
*   Dispatch to all registered callbacks/listeners

The new "problem" would be: you will now need to register each listener at some point. This would be sdone during some type of initialization. it may not be worth it if your message dispatcher is basically part of the overall app, and is not to be used elsewhere.

# c# - 从 DataTable 中选择不同的记录

> ID：15070664
> 
> 赞同：2
> 
> 时间：2013-02-25T15:40:28.913
> 
> 标签：c#, asp.net, datatable

我在[这里](https://stackoverflow.com/questions/1199176/how-to-select-distinct-values-from-datatable)检查了这个问题以及许多其他链接都提出了类似的解决方案，但是当我去时，`distinctTable = dt.DefaultView.ToTable(true, "FILENAME");`我收到一条错误消息：

> 在所选数据源中找不到名为“LOCATION”的字段或属性。

现在，我总共有四列：位置、文件夹、文件名和状态。我从数据库中选择的文件夹和文件名的值，但位置和状态的值是通过 C# 代码确定的。我不知道为什么它说找不到 Location 列，因为当我省略上面的行时它可以正常工作。

我认为我不能使用 SQL，因为某些记录是由用户输入生成的（即它们不是来自数据库）。

我也试过

```
view = new DataView(dt); 
distinctTable = view.ToTable(true, "LOCATION", "FOLDER", "FILENAME", "STATUS"); 
```

或仅`distinctTable = view.ToTable(true, "FILENAME");`用于后一条语句，但这似乎没有任何作用-它不会引发异常，但也不会消除重复记录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:39:02.157

读起来好像有两个问题：

1.  当您将数据绑定到（我假设）您的派生表时，您会遇到错误；
2.  当您尝试其他方法时，您不会收到错误消息，但也不会获得所需的不同记录。

您在顶部发布的代码：

```
distinctTable = dt.DefaultView.ToTable(true, "FILENAME"); 
```

...将为您提供一个只有一列的数据表：FILENAME。因此，当您绑定到它时，如果您绑定的对象也在寻找 LOCATION 列，您将收到错误消息。

您在底部发布的代码：

```
view = new DataView(dt); 
distinctTable = view.ToTable(true, "LOCATION", "FOLDER", "FILENAME", "STATUS"); 
```

...不会引发错误，因为它具有 LOCATION （和其他列）作为表的一部分，因此您绑定到的控件能够找到所有列。

但是您说它不会删除重复项。我想知道，当您说要删除重复项，但在仅指定一列输出的情况下显示代码时，您是否想要过滤掉整个记录的确切重复项，而是过滤掉那些具有相同的 FILENAME 值，但其他列的值不同。

你不能（据我所知）用`DataView.ToTable`. 但是你可以用 LINQ 做到这一点：

```
DataTable distinctTable = dt.AsEnumerable()
                            .GroupBy(r=> r.Field<string>("FILENAME"))
                            .Select(g=>g.First())
                            .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:21:18.917

使用 LINQ 怎么样？

`var items = yourdatatable.AsEnumerable().Distinct();`

# c# - Linq 多选

> ID：15070665
> 
> 赞同：3
> 
> 时间：2013-02-25T15:40:29.420
> 
> 标签：c#, linq

嗨，我正在编写 MS 101 linq 示例。

“JoinOperators”让我很难过，因为我试图将查询表达式重构为 lambda 语法，反之亦然。

无论如何，在示例[105](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)中，我看到了这个查询表达式：

```
var supplierCusts =
    from sup in suppliers
    join cust in customers on sup.Country equals cust.Country into cs
    from c in cs.DefaultIfEmpty()  // DefaultIfEmpty preserves left-hand elements that have no matches on the right side 
    orderby sup.SupplierName
    select new
    {
        Country = sup.Country,
        CompanyName = c == null ? "(No customers)" : c.CompanyName,
        SupplierName = sup.SupplierName
    }; 
```

我尝试以这种方式将其实现为 lambda：

```
// something is not right here because the result keeps a lot of "Join By" stuff in the output below
var supplierCusts =
    suppliers.GroupJoin(customers, s => s.Country, c => c.Country, (s, c) => new { Customers = customers, Suppliers = suppliers })
        .OrderBy(i => i.Suppliers)    // can't reference the "name" field here?
        .SelectMany(x => x.Customers.DefaultIfEmpty(), (x, p) =>    // does the DefaultIfEmpty go here?
            new
            {
                Country = p.Country,
                CompanyName = x == null ? "(No customers)" : p.CompanyName,
                SupplierName = p    // not right: JoinOperators.Program+Customer ... how do I get to supplier level?
            }); 
```

出于某种原因，我无法以这种方式访问​​供应商级别的信息。当我关闭`customers`with时，`suppliers`我无法访问客户级别的信息。

是否有一些过载`SelectMany()`让我从两个对象的字段级别中拉出来？

另外，我不明白为什么`GroupJoin()`似乎返回一个带有 2 个集合（`suppliers`和`customers`）的对象。不应该以某种方式加入他们吗？

我想我不明白它是如何`GroupJoin()`工作的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T15:53:22.040

您在组加入中有错误的结果选择器，这就是问题开始的地方。这是固定查询：

```
var supplierCusts =
   suppliers
     .GroupJoin(customers, 
                sup => sup.Country, 
                cust => cust.Country, 
                (sup, cs) => new { sup, cs })
     .OrderBy(x => x.sup.Name)    
     .SelectMany(x => x.cs.DefaultIfEmpty(), (x, c) =>
        new
        {
            Country = x.sup.Country,
            CompanyName = c == null ? "(No customers)" : c.CompanyName,
            SupplierName = x.sup.Name   
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:52:33.087

如果您想学习将查询表达式转换为 lambda，我建议您查看默认情况下可以执行此操作的[LinqPad 。](http://www.linqpad.net/)例如，您的查询翻译如下：

```
 Suppliers
   .GroupJoin (
      Customers, 
      sup => sup.Country, 
      cust => cust.Country, 
      (sup, cs) => 
         new  
         {
            sup = sup, 
            cs = cs
         }
   )
   .SelectMany (
      temp0 => temp0.cs.DefaultIfEmpty (), 
      (temp0, c) => 
         new  
         {
            temp0 = temp0, 
            c = c
         }
   )
   .OrderBy (temp1 => temp1.temp0.sup.CompanyName)
   .Select (
      temp1 => 
         new  
         {
            Country = temp1.temp0.sup.Country, 
            CompanyName = (temp1.c == null) ? "(No customers)" : temp1.c.CompanyName, 
            SupplierName = temp1.temp0.sup.CompanyName
         }
   ) 
```

话虽如此，我通常发现 SelectMany 使用查询语法而不是 lambda 语法更容易编码和维护。

本示例中的 GroupJoin 用于完成左连接（通过 .DefaultIfEmpty 子句）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:52:37.653

尝试这个：

```
var supplierCusts =
    suppliers.GroupJoin(customers, s => s.Country, c => c.Country, (s, c) => new { Supplier = s, Customers = c })
        .OrderBy(i => i.Supplier.SupplierName)
        .SelectMany(r => r.Customers.DefaultIfEmpty(), (r, c) => new
        {
            Country = r.Supplier.Country,
            CompanyName = c == null ? "(No customers)" : c.CompanyName,
            SupplierName = r.Supplier.SupplierName
        }); 
```

# css - Firefox 上边距 0 不起作用

> ID：15070666
> 
> 赞同：-3
> 
> 时间：2013-02-25T15:40:30.583
> 
> 标签：css, firefox, margin

为什么 margin:0 在 Chrome 和 IE 下可以正常工作，但不能在 Firefox 下工作？我的意思是Firefox下的上边距不是0。

网站[http://www.olnius.pl/](http://www.olnius.pl/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:42:34.570

您的`<ul>`with 类`.categories`有 16 px 的边距，只需添加：

```
margin: 0; 
```

你会摆脱四面八方的边缘..

这是因为某些元素具有浏览器默认设置的边距/填充 .. 重置所有默认样式的简单方法是使用 CSS 重置 .. 最流行的是 Eric Meyers 的重置，可以在[这里找到](http://meyerweb.com/eric/tools/css/reset/)

此外，如果不使用 doctype，您将触发 IE 进入 quirks 模式，因此`<!DOCTYPE html>`请在文档顶部添加。

# installation - 为什么我不能按特定顺序安装？

> ID：15070672
> 
> 赞同：1
> 
> 时间：2013-02-25T15:40:41.120
> 
> 标签：installation, installshield

我有两个安装程序和一个补丁。它们具有相同的升级代码，但产品代码不同，如下所示。

> ```
>  Version           ProductCode     UpgradeCode 
> ```
> 
> Advanced12R1 12.1 121212 555555
> Basic12R1 12.1 343434 555555
> Basic12R1 补丁 12.1 至 12.2 343434 555555

当我按以下顺序安装时，结果是：

> 1.  Advanced12R1 → Basic12R1 已安装
> 2.  Basic12R1 → Advanced12R1 已安装
> 3.  Basic12R1 → 已安装 Basic12R1 补丁
> 4.  Basic12R1 + Basic12R1 Patch → Advanced12R1 Not Installed ※这会提示类似“已安装最新版本的产品”的消息。

我的问题是为什么已经安装了Basic12R1和Basic12R1补丁后不能安装Advanced12R1。它们具有相同的升级代码，但产品代码不同。这可能是什么原因？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:07:30.783

这是我得到的答案：

Advanced12R1 和 Basic12R1 补丁的产品版本保持不变。因此，当已安装 Basic12R1 补丁时，尝试安装 Advanced12R1 时会出现错误

解决方法：将 Advanced12R1 的版本号更改为 12.2，然后安装

# javascript - 自动填充浏览器文档高度以滚动到任何元素

> ID：15070673
> 
> 赞同：0
> 
> 时间：2013-02-25T15:40:42.750
> 
> 标签：javascript, scroll, window

我有一个与页面标题匹配的目录。

所需的行为是，当我单击 TOC 中的任何标题时，文档会滚动，以使相应 TOC 单击的标题现在位于浏览器窗口的左上角。

问题是，这仅在文档在我要滚动到的标题下方有一整页内容（窗口高度）时才有效。

*   解决此问题的最佳做法是什么？
*   我应该自动创建空内容以使文档变大吗？
*   我可以检测到这种情况并使文档/视口高度更大吗？
*   有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:16:12.787

这是现代浏览器的一个片段。

JS：

```
window.onload = function () {
    var scrollTop = function (e) {
            if (e.target.tagName.toLowerCase() === 'li') {;
                document.getElementById(e.target.getAttribute('show')).scrollIntoView(true);
            }
            return;
        },
        reSize = function () {
            var s;
            document.body.style.height = '';
            s = document.body.offsetHeight + window.innerHeight - document.body.lastElementChild.offsetHeight;
            if (document.body.style.height < s){
                document.body.style.height = s + 'px';
            }
        };
    reSize();
    window.addEventListener('resize', reSize, false);
    document.getElementById('toc').addEventListener('click', scrollTop, false);
} 
```

和用于测试的 CSS + HTML：

```
#toc {
    cursor: pointer;
}
.content {
    min-height: 100px;
    border: 1px solid #000;
    margin-top: 1em;
}

<ul id="toc">
    <li show="div_1">Header 1</li>
    <li show="div_2">Header 2</li>
    <li show="div_3">Header 3</li>
</ul>
<div id="div_1" class="content">DIV 1</div>
<div id="div_2" class="content">DIV 2</div>
<div id="div_3" class="content">DIV 3</div> 
```

jsFiddle上的演示（在[jsFiddle](http://jsfiddle.net/y4YXa/2/)上效果不佳，请复制代码并在本地进行测试或某事。）由于您没有提供任何代码作为基础，因此此代码段创建得尽可能短。请不要关注HTML和点击逻辑是如何实现的，而是仔细检查，如何以及何时`body`计算高度。

# html - td 内的 Div 有一个 1 px 的边框。如何将其移除？

> ID：15070677
> 
> 赞同：0
> 
> 时间：2013-02-25T15:40:50.803
> 
> 标签：html, html-table, border

我在 td 中有一个 div，我似乎无法删除它周围的 1 px 边框。如果我尝试添加`td {padding:0}`，边框会消失，但 div 会跳到左侧，变量 td 会自动更改为 0px 宽度。如何在不弄乱整个表格的情况下删除 div 周围的边框？

```
HTML:

<table>
    <tr>
        <td class="header-left"></td>
        <td class="header">
            <div class="header-image"></div>
        </td>
        <td class="header-right"></td>
    </tr>
</table>

CSS:

table {
width:100%;
border-spacing: 0;
}

.header-left {
height:100px;
background-image:url(img/header-left.png);
background-repeat:repeat-x;

}

.header-right {
height:100px;
background-image:url(img/header.png);
background-repeat:repeat-x;
}

.header {
height:100px;
width:960px;
background-image:url(img/header.png);
background-repeat:repeat-x;
margin:0 auto;
}

.header-image {
height:100px;
width:548px;
background-repeat:no-repeat;
background-image:url(img/header-image.png);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:44:31.417

```
<table cellspacing="0" cellpadding="0" border="0"></table> 
```

这样，您在表格中创建的 td 周围不会有任何间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T15:31:15.090

尝试：

Border:none 在类头或创建类全局表 {border-collapse:collapse; 边框间距：0；边框：0；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:38:54.260

您只需设置表的属性，如下所示

```
<table cellpadding="0" cellspacing="0" border="0"> 
```

在css更改中尝试以下

```
table { border:none;} 
```

如果仍然没有得到解决方案，请给我一个在 div 周围有边框的例子，因为在这里我看不到 div 周围的任何边框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:48:56.010

在 DIV 标记中添加以下代码

```
<DIV class ="header-image" style="border:0px"> 
```

或者如果您对表格边框有疑问，请设置 `table border=0`

# objective-c - ios 符号化服务器端

> ID：15070680
> 
> 赞同：5
> 
> 时间：2013-02-25T15:41:16.870
> 
> 标签：objective-c

在无法使用 iOS 开发工具和脚本的 linux 环境中，如何在上传到服务器后符号化 ios 崩溃报告。我知道 Apple 使用 atos 和其他一些工具将十六进制地址与 .dYSM 文件一起映射到符号。

我可以将 .dYSM 文件与崩溃报告一起上传到服务器。引用了 QuincyKit，但他们在本地进行符号化。但是其他的像 HockeyApp 和 Critterism 正在远程进行。

请推荐在服务器中执行此操作的可能方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-08T13:32:20.873

It is possible. You can take a look at [https://github.com/facebook/atosl](https://github.com/facebook/atosl)

I got it working under Linux. (Ubuntu Server) However, it takes some time to get it up and running.

* * *

## Installing `atosl`

First, you need to install `libdwarf-dev`, `dwarfdump`, `binutils-dev` and `libiberty-dev`.

E.g. on Ubuntu:

```
$ sudo apt-get install libdwarf-dev dwarfdump binutils-dev libiberty-dev 
```

Download or clone the atosl repo from GitHub:

```
$ git clone https://github.com/facebook/atosl.git 
```

CD to the atosl dir

```
$ cd atosl 
```

Create a local config `config.mk.local` which contains a flag with the location of your binutil apps. (in Ubuntu by default that's `/usr/bin`). If you're not sure, you can find out by executing `cat /var/lib/dpkg/info/binutils.list | less` and copy the path of the file `objdump`. E.g. if the entry is `/usr/bin/objdump`, your path is `/usr/bin`.

So in the end, your `config.mk.local` should look like this:

```
LDFLAGS += -L/usr/bin 
```

Compile it:

```
$ make 
```

Now you can start using it:

```
$ ./atosl --help 
```

* * *

## Symbolicating example

To show how `atosl` is used, I'll provide a simple example.

Now let's take a look at a line from the crash log:

```
13  ErrorApp    0x000ea294 0xe3000 + 29332 
```

To symbolicate this, we will need the `load address`, and the `runtime address`.

In this example the `runtime address` is `0x000ea294`, and the `load address` is `0xe3000`.

Now we have everything we need:

```
$ ./atosl -o [YOUR_dSYM_FILE] -l [LOAD_ADDRESS] [RUNTIME_ADDRESS] 
```

In this example:

```
$ ./atosl -o ErrorApp.app.dSYM/Contents/Resources/DWARF/ErrorApp -l 0xe3000 0x000ea294 
```

Which returns the symbolicated line:

```
main (in ErrorApp) (main.m:16) 
```

* * *

## FYI

Your `vmaddr`, which usually is `0x00001000`, you can find by looking at the segname `__TEXT` Mach-O load command of your binary. In my example, this happens to be different, namely `0x00004000`

To find the `address`, we need to do some math.

The `address` is found by the following formula:

```
address = vmaddr + ( runtime_address - load_address ) 
```

In this example our address is:

```
0x00004000 + ( 0x000ea294 - 0xe3000 ) = 0xB294 
```

* * *

I haven't played around with this that much yet, but for now it seems to give me the results I needed. Maybe it will work for you too.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T19:05:11.203

您需要实现自己的 linux 兼容版本`atos`，`otool`和`dwarfdump`（至少是符号化所需的功能）。Apple 工具不是开源的，只能在 Mac OS X 上运行。

这些服务均未提供可供第三方在非 OS X 系统上使用的解决方案。因此，除了实现在您的 linux 系统上运行所需的功能之外，您唯一的机会是在 Mac 上像 QuincyKit 那样做，请参阅[https://github.com/TheRealKerni/QuincyKit/wiki/Remote-symbolication](https://github.com/TheRealKerni/QuincyKit/wiki/Remote-symbolication)或使用第三方服务。

注意：我是 QuincyKit 的创建者和 HockeyApp 的联合创始人。

# iphone - iPhone初学者的应用程序

> ID：15070682
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:41:18.570
> 
> 标签：iphone, ios, objective-c, cocoa

一个问题的简短**介绍**：
我申请了一个 iOS 开发者的职位。对于这个职位，他们不需要 Objective-C 或 iOS 开发知识。必备条件是具有 C/C++ 和 Linux 平台开发的良好经验。

**问题：**
面试结束后我接到了一个任务（用很容易影响的词，是吗？），我不明白是不是这样。
面试官向我展示了他 iPhone 上的一个应用程序，它看起来像： ![在此处输入图像描述](../Images/21f0d4bbd32654137d235c4d6ba04b92.png)

按下/拖动该按钮会导致出现这样的栏：

![在此处输入图像描述](../Images/91496e84544ba89c107d34b3360357fb.png)

他可以滚动它并在屏幕上拖动。当他按下控制按钮时，bar消失了。

我想提前找借口，因为我觉得自己是一个希望自己的工作被别人完成的人。但我只想了解如何解决这个问题。Cocoa 库对我来说是一头大而新的野兽。最好使用其中的哪些类/元素来实现这一目标？我以前用 Qt、Tkinter、WinAPI（gui 编程）为桌面编程，但在这里对我没有多大帮助。
我需要像面试官向我展示的那样编写类似的代码。我试图在互联网上找到类似的东西，但没有成功。

所以，我只想知道在 Cocoa 库中寻找哪些类更好。而且，如果我没有考虑到某些事情，我会很高兴（高兴）听到你的笔记。

提前感谢您的任何回复！

**解决**
了我要感谢所有回复并没有让我沉入这片未知海洋的人。
经过一周的探索，我得到了我想要的：

![在此处输入图像描述](../Images/ff30c48d68c2aaece69486fd07d05e71.png)

源代码：（我很抱歉，但我无法从虚拟 mac os 机器复制粘贴代码）

![在此处输入图像描述](../Images/959efd97d8781ffd2a4230d5593e8129.png) ![在此处输入图像描述](../Images/f83bc0f1f2dffca7c84457e16af3c28e.png)

现在我明白我的问题是多么的宽泛和愚蠢，但无论如何，它也许可以帮助某人开始。还有一[本书](https://rads.stackoverflow.com/amzn/click/com/0071703284)对我帮助很大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:49:40.463

对Objective-C没有要求，但面试官要你创建一个简单的应用程序并返回给他？有趣的采访。

至于你的问题。我在这里看到需要的类（除了您选择的 AppDelegate 和 UIViewController ）是：

`UIButton`

`UIScrollView`

`UIImageView`

按钮在这里的使用是显而易见的。滚动视图再次明显。imageview 将是滚动视图内的图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:19:47.403

好的 - 只是为了给你一些关于从什么开始以及如何进行的指导，这样你就不会迷失在可可的广阔世界中......假设你熟悉编程并且在这方面有一些体面的经验c++和java世界...

打开xcode。选择基于空白视图的应用程序。单视图应用程序就可以了。选择自动引用计数 (ARC)。

xcode 使用应用程序委托为您创建一个模板（此任务不需要）

为 iPhone 视图创建了一个视图控制器和一个 xib/nib 文件。（如果有，请忽略 ipad 视图）。

添加到您的视图控制器中，即所谓的 IBAction 方法。一个用于顶部按钮，一个用于其他按钮。当按下按钮（以及您不需要的其他事件）时，应该调用一个动作。

正确定义您将在编辑 xib 文件时在界面构建中看到该操作。添加一个按钮并将其与此操作相关联（我认为最好在内部进行修饰）。

编译这个。当你的按钮被按下时，动作就会被执行。在那里设置一个断点以确保它被调用。

现在，在此操作中，您可以调用新创建的方法 showScroller 和 hideScroller。并创建这些方法。

现在它变得有点复杂了。在 showScroller 你必须...

1.  创建一个 UIScrollView。（分配它并初始化它）
2.  创建一些 UIButtons。（没有在objective-c中初始化的alloc）
3.  将您的第二个 IBAction 方法设置为按钮的目标。
4.  相应地在 UIScrollView 中定位按钮。
5.  将 UIScrollView 放置在顶部按钮下方。
6.  将 UIButtons 作为子视图添加到滚动视图的内容视图中。
7.  将滚动视图作为子视图添加到 self.view （即底层视图，界面构建器中的灰色事物）。

在 hideScroller 中，您必须...

1.  从视图中删除 UIScrollView。为此，您可以从 self.view 中删除所有子视图，或者您必须在视图控制器中的某个实例变量中保留对滚动视图的引用。与您已经知道的 C++ 和 Java 非常相似。

作为上述方案的替代方案，您可以在界面构建器中创建所有视图，并将滚动视图预定义为隐藏在 IB（界面构建器）中，而在 showScroller 和 hideScroller 中，您只需将其 .hidden 属性设置为 YES 或 NO。但是我有一种胆量，以您的背景，您应该并且可以以编程方式执行此操作，而不是为 IB 如何连接到您的代码而烦恼。如果您真的遇到了该陷阱并且没有将最顶部的按钮正确连接到您的代码，那么也可以通过编程方式创建该按钮。

啊，我忘记了。创建所有这些 UI 元素的正确位置是 ViewController 类的 viewDidLoad 方法。在您的空 xcode 模板中已经生成了一个空的。只需在`[super viewDidLoad];`通话后启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:35:34.000

干得好：

1.  打开 XCode 并创建一个新项目。选择 iOS 空应用程序模板。

2.  转到菜单，选择文件、新建文件、Objective-C 类。将其命名为 RootViewController 并选择一个子类作为 UIViewController

3.  转到您的应用委托 .m 文件（如果您的项目名称为 Test，则此文件为 TestAppDelegate.m）。在文件顶部，在 #import "TestAppDelegate.h" 行下方添加另一行 #import "RootViewController.h"

4.  在同一个文件中有一个名为：

    ```
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    ```

    在方法结束但在返回 YES 之前；语句添加以下行：

    ```
    self.window.rootViewController = [[RootViewController alloc] init]; 
    ```

5.  现在转到您在步骤 2 中创建的 RootViewController.m 文件。并在文件顶部编辑界面以具有这个实例变量：

    ```
    @interface RootViewController ()
    {
        UIView *menuView;
    }
    @结尾
    ```

6.  在同一个文件中找到名为 - (void)viewDidLoad 的方法并在其中添加以下代码：

    ```
    - (void)viewDidLoad
    {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.view.backgroundColor =[UIColor blackColor];

    UIButton *menuButton = [UIButton buttonWithType:UIButtonTypeCustom];
    menuButton.frame = CGRectMake(100, 60, 50, 50);
    [menuButton setBackgroundImage:[UIImage imageNamed:@"menu.png"] forState:UIControlStateNormal];
    [menuButton addTarget:self action:@selector(menuButtonTapped:) forControlEvents:UIControlEventTouchDown];

    CGRect menuFrame = CGRectMake(20, menuButton.frame.origin.y + 50, 300, 60);
    menuView = [[UIView alloc] initWithFrame:menuFrame];
    menuView.backgroundColor = [UIColor purpleColor];
    menuView.hidden = YES;

    UIButton *menuButtonA = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    menuButtonA.frame = CGRectMake(5, 5, 50, 50);
    [menuButtonA setTitle:@"A" forState:UIControlStateNormal];
    [menuView addSubview:menuButtonA];

    UIButton *menuButtonB = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    menuButtonB.frame = CGRectMake(65, 5, 50, 50);
    [menuButtonB setTitle:@"B" forState:UIControlStateNormal];
    [menuView addSubview:menuButtonB];

    UIButton *menuButtonC = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    menuButtonC.frame = CGRectMake(125, 5, 50, 50);
    [menuButtonC setTitle:@"C" forState:UIControlStateNormal];
    [menuView addSubview:menuButtonC];

    UIButton *menuButtonD = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    menuButtonD.frame = CGRectMake(185, 5, 50, 50);
    [menuButtonD setTitle:@"D" forState:UIControlStateNormal];
    [menuView addSubview:menuButtonD];

    UIButton *menuButtonE = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    menuButtonE.frame = CGRectMake(245, 5, 50, 50);
    [menuButtonE setTitle:@"E" forState:UIControlStateNormal];
    [menuView addSubview:menuButtonE];

    [self.view addSubview:menuButton];
    [self.view addSubview:menuView];
    }
    ```

7.  在该方法下方添加一个新方法：

    ```
    - (void)menuButtonTapped:(id)sender
    {
        if (menuView.hidden)
            menuView.hidden = NO;
        else
            menuView.hidden = YES;
    } 
    ```

8.  在互联网上找到一些漂亮的 png 图像来代表您的菜单按钮。将其命名为 menu.png 并将其拖放到您的项目中（在左侧的“文件”菜单内）

就是这样运行项目;）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T16:01:13.070

看看这个：

[http://www.cocoacontrols.com/platforms/ios/controls/aurosetteview](http://www.cocoacontrols.com/platforms/ios/controls/aurosetteview)

当你按下一个按钮时，项目会出现，当你再次按下时，它会关闭。

源代码在库中。用它来阅读。

对于您的情况，您还需要包含滚动视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:46:04.027

刚读过iphone的初学者书。你必须先读一些书。首先尝试了解 iphone 中的基本控件和目标 c 中的基本操作

您的上述工作非常基础。现在您只需一步之遥，即阅读一本书，您将在网上获得大量免费 pdf

# visual-studio-2010 - VS2010：.DEF 文件在清理时未删除？

> ID：15070683
> 
> 赞同：1
> 
> 时间：2013-02-25T15:41:29.753
> 
> 标签：visual-studio-2010, linker

我正在 Visual Studio 2010 中的多个项目的解决方案中开发一个 C 项目。到目前为止，构建工作就像一个魅力，但是......

据我了解，DEF 文件用于链接。当我更改了一些代码中的方法声明时，由于链接问题，代码将不再构建。我尝试清理、构建和重建，但 DEF 文件不会被更改。这正常吗？它似乎不取决于我是选择发布配置还是调试配置？还是我做错了什么？

*PS对不起，如果这应该是一个太简单的问题，但我真的找不到任何东西，我真的不明白......*

# javascript - 自定义 Twitter 时间线小部件

> ID：15070687
> 
> 赞同：1
> 
> 时间：2013-02-25T15:41:44.340
> 
> 标签：javascript, jquery, css, twitter

除了网站上提供的预定义选项之外，是否可以以某种方式自定义新的 twitter 小部件？[https://twitter.com/settings/widgets/new](https://twitter.com/settings/widgets/new)

我想更改一些颜色，删除边框，添加一些其他图像等。

[我宁愿不使用 Twitter Stream API，因为使用user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)函数的每小时访问次数有限。我将不得不实现一个缓存系统并使事情变得更加复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:48:59.997

不，你不能改变它。我认为他们将其仅限于 Twitter 开发人员，因此您无法进一步对其进行自定义。我认为您只能单独更改小部件的大小。

# jquery - 在同一个地方淡入/淡出元素

> ID：15070688
> 
> 赞同：0
> 
> 时间：2013-02-25T15:41:48.043
> 
> 标签：jquery, css, slideshow

我有一个设置为全屏的无序列表，每个 li 都有一个重复的背景图案。我希望每个 li 在页面加载后每 20 秒淡入/淡出。我的jsfiddle：http: [//jsfiddle.net/uWwfv/1/](http://jsfiddle.net/uWwfv/1/)

我已经尝试过 css 方式（我的 li 元素的绝对定位），但它不适用于我的全屏脚本，因此需要纯 jQuery 来淡入/淡出每个 li。我该怎么做？

**全屏代码为：**

```
function fitElements() {

var height = $(window).height();

var width = $(window).width();

$('ul#fullscreen-slider li').css('height', height);

$('ul#fullscreen-slider li').css('width', width);

};

$(document).ready(function() {
fitElements();
}); 
```

**HTML：**

```
<section id="home">
    <ul id="fullscreen-slider">
        <li><h1 class="cherry-red"><span>Slide 1</span></h1></li>
        <li><h1 class="cherry-red"><span>slide 2</span></h1></li>
        <li><h1 class="cherry-red"><span>slide 3</span></h1></li>
        <li><h1 class="cherry-red"><span>slide 4</span></h1></li>
        <li><h1 class="cherry-red"><span>slide 5 - when complete fade to slide 1</span></h1></li>
    </ul>
</section> 
```

**注意：**我想避免使用繁重的插件，尤其是当大多数插件不适合后台重复行为时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:52:05.007

我将创建一个函数来执行此操作并使用 setInterval 调用它。

然后，当所有页面加载完毕后，调用 clearInterval 函数停止闪烁。

[http://jsfiddle.net/uWwfv/4/](http://jsfiddle.net/uWwfv/4/)

```
function fadeBlinking() {
    $('li').fadeOut(500, function () {
        $(this).fadeIn(500);
    });
}

var intervalHandle = setInterval(function () {
    fadeBlinking();
}, 20000);

fadeBlinking();

$(document).ready(function () {
    fitElements();

    //Stop blinking when your condition is met
    clearInterval(intervalHandle)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:25:27.767

JS函数

```
function slideshow() {
    $('#fullscreen-slider li:gt(0)').hide();
    setInterval(function(){$('#fullscreen-slider :first-child').fadeOut().next('li').fadeIn().end().appendTo('#fullscreen-slider');}, 3000);
} 
```

至于 CSS，添加`position:relative;`到 UL，添加`position:absolute; left:0; top:0;`到 LI，并为每个 LI 添加一个具有背景的类。

你唯一需要改变的是每个 li 需要它的类作为它的背景而不是使用 nth-child，因为这段代码现在正在弄乱 li 的组织，通过获取刚刚褪色的一个并再次附加到最后（因此可见的永远是`nth-child(0)`）。

这是Jonathan Snook对[Simplest jQuery Slideshow](http://snook.ca/archives/javascript/simplest-jquery-slideshow)的轻微修改版本。

这是我的 jsFiddle [http://jsfiddle.net/jRDkm/1/](http://jsfiddle.net/jRDkm/1/)

# javascript - 在方向改变时从目标 C 调用 javascript 函数

> ID：15070693
> 
> 赞同：1
> 
> 时间：2013-02-25T15:42:09.373
> 
> 标签：javascript, objective-c, cordova, orientation

首先，我想说我是一个绝对的 Objective C 新手。我一直在到处寻找解决方案，但不知何故我似乎无法让它发挥作用。

我想要的只是在方向改变事件发生时从 Objective C 运行一个 Javascript 函数，看看这是如何在方向改变动画开始*之前执行 Javascript 的唯一方法。*

我已经能够获得一个 NSLog 来显示何时发生方向变化，但无论我尝试什么，我都无法执行*任何*Javascript。甚至没有 console.log() 或 alert()，更不用说我想要触发的实际功能了。

谁能帮我再省一个下午的反复试验？

* * *

**解决了**

将它放在 didFinishLaunchingWithOptions (AppDelegate.m) 中：

```
 [[NSNotificationCenter defaultCenter] addObserver: self
        selector: @selector(orientationDidChange:)
        name: UIApplicationDidChangeStatusBarOrientationNotification
        object: nil]; 
```

就在下面

```
- (void) orientationDidChange: (NSNotification *) note
{
    [self.viewController.webView stringByEvaluatingJavaScriptFromString:@"hideContentsDuringOrientationChange();"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:13:05.377

你应该能够做到这一点：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [(UIWebView *)self.visibleViewController.view stringByEvaluatingJavaScriptFromString:@"someGlobalJSFunction();"];
} 
```

您对 UIWebView 的引用可能必须根据您的项目设置方式进行更改。

旋转完成后，您可以将 didRotateFromInterfaceOrientation 用于事件。不过，我发现这有时会触发 JS 重绘的时间有点早。我通过在它调用的 JS 函数中设置一个短暂的超时来解决这个问题。

# android - 我应该使用 Handler、AsyncTask 还是 Thread 哪个？

> ID：15070702
> 
> 赞同：2
> 
> 时间：2013-02-25T15:42:51.897
> 
> 标签：android

这可能是一个常见问题，但我找不到我的确切情况。我知道这在很多方面取决于开发人员的选择，但我不知道如何选择最佳。

我有我的初始应用程序启动屏幕，在检查用户登录时只会显示一个徽标。如果他们的登录详细信息已经存储在 sharedPreference 中，那么我想根据我的在线详细信息数据库检查这些详细信息以进行验证。完成所有检查后，我会将用户转到主应用程序屏幕或注册屏幕。

因此，在检查用户详细信息时，然后对其进行验证。我应该单独执行此操作还是使用处理程序？我认为不需要 AsyncTask，因为我不想将任何进度详细信息传递回 UI？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:50:15.050

您可能应该在单独的线程中执行此操作，因为它是网络活动。`IntentService`是一个不错的选择。我认为您主要关心的是，即使用户旋转屏幕并且活动被销毁并重新创建，您选择的任何方法都需要工作。

可能使用 Fragment 作为初始屏幕`setRetainInstance(true)`，因此它会在配置更改后重新附加到活动。然后，您可以传递服务 a `Handler`（或`Messenger`更准确地说是 a），或者让服务在完成工作时发送广播意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:50:31.077

我建议使用 AsyncTask。

首先，因为 AsyncTask 是一个完整的线程框架（在幕后使用 Thread 和 Handlers），它允许更好地控制单线程操作。例如`cancel()`，如果用户决定在启动屏幕完成之前离开应用程序。

> 我认为不需要 AsyncTask，因为我不想将任何进度详细信息传递回 UI？

实际上，是的，即使要启动新活动（Login 或 AlreadyLoggedIn），您也必须从 UI 线程调用 startActivity()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:01:55.937

**何时使用异步任务？**
AsyncTask 有助于将内存密集型/阻塞调用卸载到后台线程，而您的 UI 操作仍然可以在 UI 线程中进行。如果任何操作阻塞 UI 线程超过 4-5 秒，您可能还会收到 ANR（Android 无响应）对话框。`onPostExecute`当您想要在完成流程 ( ) 之后以及在启动之前( )更新 UI 时，AsyncTask 会派上用场`onPreExecute`。

**使用线程** 无论你在`doInBackground`使用 AsyncTask 中做什么，也可以使用线程来实现。但是如果您需要执行任何 UI 操作，您将需要使用`Handler`或`runOnUiThread`来完成您的任务。如果您希望使用线程，请参阅[android 中的无痛线程。](http://android-developers.blogspot.in/2009/05/painless-threading.html)

Budius说的也是真的。

在您的情况下，您可以使用 AsyncTask 在 sharedPref 中检查用户凭据，然后使用中间件进行适当的身份验证，最后在 onPostExecute 中导航到新活动。

同时，您可以向用户显示一个进度条，表示正在进行的身份验证过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T16:09:03.100

补充一点。我有一个非常相似的情况，我必须从“主屏幕”在后台验证用户登录（存储在手机中）。我使用了 IntentService ResultReceiver 模式。起初我花了一点时间来了解它，但一旦实现它就非常易于管理。

基本上，您启动作为您的意图服务的活动，将所需的任何参数（用户名、密码等）传递给它。在我的例子中，它是一个单独的类，它使用 REST 来验证用户。REST 类完成其工作后，ResultReceiver 方法 onReceiveResult 会将数据从 REST 活动返回给 UI 活动。

# c# - 从以单独形式创建的数据集填充 DataGridView

> ID：15070703
> 
> 赞同：0
> 
> 时间：2013-02-25T15:43:00.877
> 
> 标签：c#, datagridview

我有一个正在创建的数据集，我们将其称为 form1。我希望这个数据集填充一个 DataGridView，它存在于一个单独的表单中，我们将调用 form2。

我试过像这样设置数据源，但它不起作用，因为上下文不正确。

```
newShipmentGrid.DataSource = dataToWatch; 
```

具体来说，我得到的错误是“名称 newShipmentGrid 在当前上下文中不存在”。这是一个 Windows 页面表单应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:21:23.497

这是我的一些旧代码用于 Windows 窗体应用程序的一个非常简单的实现。构造函数将调用过程（另一种形式）中的 DataSet 作为唯一参数，将 DataSet 成员设置为参数的值，并使用“FillDataGrid”方法填充数据集。希望这可以帮助你。

```
public partial class HistForm : Form
{
    DataSet data;

    public HistForm(DataSet ds)
    {
        data = ds;
        InitializeComponent();
        FillDataGrid();            
    }

    private void FillDataGrid()
    {
        dataGridView1.DataSource = data.Tables[0];
    }
} 
```

此表单的调用方法：

```
private void btnHist_Click(object sender, EventArgs e)
    {
        DataSet tempDataSet = new DataSet();
        tempDataSet = userData;
        tempDataSet.Tables[0].Columns.RemoveAt(1); //remove columns 0 and 1 for display purposes
        tempDataSet.Tables[0].Columns.RemoveAt(0);
        HistForm hForm = new HistForm(tempDataSet);
        hForm.Show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:20:04.360

您必须将变量传递到第二种形式，然后在页面加载事件中填充网格。

这是一个很好的链接：

[http://msdn.microsoft.com/en-us/library/6c3yckfw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw(v=vs.100).aspx)

# javascript - Mootools 回调函数未处理

> ID：15070705
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:43:04.470
> 
> 标签：javascript, mootools

所以我有这段代码是行不通的。我试图在音频播放完毕时触发一个事件。

```
item.addEventListener("ended", function () {
  slides.show("next", function () {
    alert("TESTING!");
  });
}); 
```

幻灯片更改，但从未抛出警报。

下面的代码可以工作，但是在下一个幻灯片事件完成之前会触发警报。

```
item.addEventListener("ended", function () {
  slides.show("next");
  alert("TESTING!");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:47:24.773

假设这`slides`是一个[`Fx.Slide`](http://mootools.net/docs/more/Fx/Fx.Slide#Fx-Slide)（尽管它是复数似乎很奇怪），[根据文档](http://mootools.net/docs/more/Fx/Fx.Slide#Fx-Slide%3ashow)，没有回调 on `show`。

这是有道理的。由于`show`没有过渡/动画发生，因此不需要回调。只需在调用后放置您想要发生的下一件事`show`（如您的第二个代码块所示）。

# xcode - 以编程方式调用情节提要视图控制器时的 Xcode 断言

> ID：15070716
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:43:44.627
> 
> 标签：xcode, ios6

我正在以编程方式连接两个故事板视图控制器。我得到以下断言，

*** -[FullGalleryViewController loadView] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-2380.17/UICollectionViewController.m:104

我的代码如下：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
FullScreenViewController *myVC = (FullScreenViewController *)[storyboard instantiateViewControllerWithIdentifier:@"FullScreenViewControllerId"];
[self presentViewController:myVC animated:YES completion:nil]; 
```

我已将情节提要 ID 设置为 FullScreenViewControllerId。我无法理解我哪里出错了。请注意它的紧急和重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:47:09.070

您实例化 FullScreenViewController 并且断言失败在 FullGalleryViewController 中。不是同一个班。

# system.reactive - 我可以通过匹配键将两个序列配对在一起吗？

> ID：15070721
> 
> 赞同：5
> 
> 时间：2013-02-25T15:43:50.653
> 
> 标签：system.reactive

假设序列 1 正在网络上检索站点 1、2、3、4、5 的内容（但将以不可预知的顺序返回）。

序列 2 将进入数据库以检索有关这些相同记录 1、2、3、4、5 的上下文（但出于本示例的目的，将以不可预测的顺序返回）。

*当每个匹配对在两个序列中都准备好时*，是否有一种 Rx 扩展方法可以将它们组合成一个序列？即，如果第一个序列以 4,2,3,5,1 的顺序返回，而第二个序列以 1,4,3,2,5 的顺序返回，则合并后的序列将是 (4,4), (3 ,3), (2,2), (1,1), (5,5) - 一旦每对准备好。我看过 Merge 和 Zip，但它们似乎并不是我想要的。

我不想丢弃不匹配的对，我认为这排除了简单的 .Where.Select 组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:41:22.800

```
var paired = Observable
    .Merge(aSource, bSource)
    .GroupBy(i => i)
    .SelectMany(g => g.Buffer(2).Take(1)); 
```

下面的测试给出了正确的结果。目前它只是采用整数，如果您使用带有键和值的数据，那么您需要按 i.Key 而不是 i 进行分组。

```
var aSource = new Subject<int>();
var bSource = new Subject<int>();

paired.Subscribe(g => Console.WriteLine("{0}:{1}", g.ElementAt(0), g.ElementAt(1)));

aSource.OnNext(4);
bSource.OnNext(1);
aSource.OnNext(2);
bSource.OnNext(4);
aSource.OnNext(3);
bSource.OnNext(3);
aSource.OnNext(5);
bSource.OnNext(2);
aSource.OnNext(1);
bSource.OnNext(5); 
```

产量：

```
4:4
3:3
2:2
1:1
5:5 
```

编辑回应布兰登：

对于项目为不同类（AClass和BClass）的情况，可以进行如下调整。

```
using Pair = Tuple<AClass, BClass>;

var paired = Observable
    .Merge(aSource.Select(a => new Pair(a, null)), bSource.Select(b => new Pair(null, b)))
    .GroupBy(p => p.Item1 != null ? p.Item1.Key : p.Item2.Key)
    .SelectMany(g => g.Buffer(2).Take(1))
    .Select(g => new Pair(
      g.ElementAt(0).Item1 ?? g.ElementAt(1).Item1, 
      g.ElementAt(0).Item2 ?? g.ElementAt(1).Item2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:21:05.193

所以你有 2 个要配对的可观察序列？

[来自Rxx](http://rxx.codeplex.com/)和 GroupBy的配对可以在这里提供帮助。我认为类似于以下的代码可能会做你想要的

```
var pairs = stream1.Pair(stream2)
       .GroupBy(pair => pair.Switch(source1 => source1.Key, source2 => source2.Key))
       .SelectMany(group => group.Take(2).ToArray()) // each group will have at most 2 results (1 left and 1 right)
       .Select(pair =>
       {
           T1 result1 = default(T1);
           T2 result2 = default(T2);

           foreach (var r in pair)
           {
              if (r.IsLeft) result1 = r.Left;
              else result2 = r.Right;
           }

           return new { result1, result2 };
       }); 
```

```

我没有测试过它，也没有添加任何错误处理，但我认为这就是你想要的。

# html - 链接内的链接？

> ID：15070722
> 
> 赞同：1
> 
> 时间：2013-02-25T15:43:53.503
> 
> 标签：html, iframe

我`iframe`在我的 html 中使用一个，加载我从网上找到的图片库。每个`img`都有一个可以单击的信息栏，当信息栏打开时，它会为观众提供更多信息。

```
<a href="images/test.jpg">
        <img src="images/test.jpg", 
         data-big=""
         data-title="test title"
         data-description="test description"/>
    </a> 
```

我想`data-description`在链接图像中的元素中插入另一个链接，但我不知道这是否可行，如果可以，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:59:51.830

[http://jsfiddle.net/4YPvp/](http://jsfiddle.net/4YPvp/)

```
.link {
    position: relative;
}
.link span {
    position: absolute;
}

<a class="link" href="http://cnn.com">
    <img src="http://placehold.it/150x100" data-big="" data-title="test title" data-description="test description"/>
    <span data-url="http://npr.org">Other link</span>
</a>

$('.link span').click(function (e) {
    e.preventDefault();
    window.location = $(this).attr('data-url');
}); 
```

请注意，我在此示例中使用了 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:47:00.707

HTML 不允许嵌套链接，尽管您可以连接一个基于 JavaScript 的单击处理程序来更改链接的行为。

需要更多详细信息才能完全回答您的问题。

# c# - 如何绑定 NSObject 在单触？

> ID：15070724
> 
> 赞同：2
> 
> 时间：2013-02-25T15:43:57.943
> 
> 标签：c#, ios, objective-c, xamarin.ios

我有以下Obj-C .h，正确的绑定方法是什么？

```
@interface iSmart : NSObject<EAAccessoryDelegate>{
  id<iSmartDelegate> delegate;
}

@property(nonatomic, assign) id<iSmartDelegate> delegate;
-(id)init;

@end

__________________________________________________________________________________________

@class iSmart;

@protocol iSmartDelegate <NSObject>

-(void) iSmartDidConnect;
-(void) iSmartDidDisconnect;
-(void) cardStatusChanged:(unsigned char)status;

@end

__________________________________________________________________________________________ 
```

在这一刻，我有这个协议和接口：

```
[BaseType (typeof(NSObject))]
[Model]
interface iSmartDelegate
{
    [Export("iSmartDidConnect")]
    void iSmartDidConnect();

    [Export("iSmartDidDisconnect")]
    void iSmartDidDisconnect();

    [Export("cardStatusChanged:")]
    void CardStatusChanged(Byte status);

}

[BaseType (typeof (EAAccessoryDelegate), 
Delegates=new string [] { "WeakDelegate" },
Events=new Type [] { typeof (iSmartDelegate)})]
interface iSmart
{
    //@property(nonatomic, assign) id<iSmartDelegate> delegate;
    [Export("delegate"), NullAllowed]
    NSObject WeakDelegate { get; set; }

    [Wrap("WeakDelegate")]
    iSmartDelegate Delegate { get; set; }

    //-(id)init;        
    [Export("init")]
    NSObject init();
} 
```

当我尝试在 Xamarin Studio *错误 BI0000 中构建项目时出现此错误：意外错误 - 请在[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com) (BI0000)提交错误报告*

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:43:58.053

Protocols are just inlined in your ApiDefinition, so you implement declare the few methods of `EAAccessoryDelegate` in your iSmart definition:

```
[BaseType (typeof(NSObject))]
interface iSmart : EAAccessoryDelegate{
    //bind the protocol here
    [Export ("accessoryDidDisconnect:")]
    void AccessoryDidDisconnect (EAAccessory accessory);
} 
```

For binding the delegate, look at [http://docs.xamarin.com/guides/ios/advanced_topics/api_design#Delegates](http://docs.xamarin.com/guides/ios/advanced_topics/api_design#Delegates)

[UPDATE 2013-02-26] your delegate binding looks ok, except for the native `unsigned char` that should be marshalled to .NET `byte` as the .NET `char` type is 2 bytes long to fit unicode characters.

[UPDATE 2013-02-27] Also, as you lately added that to your question, the proper way to bind a constructor is like this (see 3.3 in [http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries)) :

```
[Export ("init")]
IntPtr Constructor (); 
```

# symfony - 具有多个角色的用户，访问总是被拒绝

> ID：15070728
> 
> 赞同：1
> 
> 时间：2013-02-25T15:44:10.283
> 
> 标签：symfony, fosuserbundle

用户可能有多个角色，例如`ROLE_USER, ROLE_SUBSCRIBTION_FOO, ROLE_SUBSCRIBTION_BAR`。

根据他们的角色，我定义了一个访问控制列表：

```
 - { path: ^/admin/helpdesk/foo, roles: ROLE_SUBSCRIPTION_FOO }
    - { path: ^/admin/helpdesk/index, roles: ROLE_ADMIN } 
```

角色层次结构

```
role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUBSCRIBTION_FOO: ROLE_ADMIN
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

现在的问题是，当用户具有角色`ROLE_SUBSCRIBTION_FOO`并访问 时，`/admin/helpdesk/foo`访问被拒绝。用户同时拥有 ROLE_ADMIN 和 ROLE_SUBSCRIBTION_FOO。但是，当我有

```
- { path: ^/admin/helpdesk/foo, roles: ROLE_ADMIN } 
```

它有效，但我需要它

```
- { path: ^/admin/helpdesk/foo, roles: ROLE_SUBSCRIPTION_FOO } 
```

哪个不起作用，但是用户确实具有角色？这有点奇怪。任何想法问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:12:55.403

对我来说，这看起来像是一个错字。您`ROLE_SUBSCRIBTION_FOO`在层次结构中定义（使用 B），但您希望使用`ROLE_SUBSCRIPTION_FOO`（使用 P）限制路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:19:25.090

查看设置，一切似乎都是正确的。

我想从我的应用程序的管理区域动态更改用户角色。因此，例如，我将 FOO 角色授予用户 BOB，并期望更改立即生效。

但这不起作用。不刷新用户 BOB 当前打开的会话。他必须重新验证自己的身份。在重新验证（注销并再次登录）后，symfonys 安全系统将正确地比较角色与给定的访问列表。

所以我希望用户会话能够自动更新，但是这对于 symfony 的默认安全系统是不可能的。我认为它需要使用基于数据库的会话管理进行扩展。这样您就可以刷新用户会话。

# asp.net - 基于下拉列表的文本框显示

> ID：15070729
> 
> 赞同：0
> 
> 时间：2013-02-25T15:44:14.437
> 
> 标签：asp.net

我有一个下拉列表，显示所有当前的工作编号。我需要一个文本框来显示这个数字的“名称”等价物。下拉列表基于对同一数据库中单独表的查询。下拉列表是：

```
<asp:DropDownList ID="dlRef" runat="server" DataSourceID="DataRef" DataTextField="Ref" 
     DataValueField="Ref" style="z-index: 1; left: 155px; top: 68px; position: absolute; 
     width: 115px; height: 29px; bottom: 254px;" AutoPostBack="True">
</asp:DropDownList> 
```

我需要做的是让文本框 tbADName 与使用查询的数据源相关联，例如从 ActiveJobs 中选择名称，其中 Ref = dlRef.DataValueField。

这是可能的还是我需要使用另一个结构来显示这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:19:28.073

您可以使用以下功能

```
onchange="showText(this.options[this.selectedIndex].text);" 
```

在您的下拉列表中添加它将是

```
<asp:DropDownList ID="dlRef" runat="server" DataSourceID="DataRef" DataTextField="Ref" 
     DataValueField="Ref" style="z-index: 1; left: 155px; top: 68px; position: absolute; 
     width: 115px; height: 29px; bottom: 254px;" AutoPostBack="True"
      onchange="showText(this.options[this.selectedIndex].text);">
</asp:DropDownList> 
```

在 java 脚本中创建一个函数

```
function showText(value)
{
   document.getElementById("textboxid").value=value
} 
```

## 编辑 1

```
<head>
    <title>DropDown</title>
    <script type="text/javascript">
    function chkind(){
    var dropdown1 = document.getElementById('dlRef');
    var textbox = document.getElementById('textbox');
    var a = dropdown1.options[dropdown1.selectedIndex].text;
    textbox.value = a;

    }
    }
    </script>
</head>

<body>
<asp:DropDownList ID="dlRef" runat="server" DataSourceID="DataRef" DataTextField="Ref" 
 DataValueField="Ref" style="z-index: 1; left: 155px; top: 68px; position: absolute; 
 width: 115px; height: 29px; bottom: 254px;" AutoPostBack="True"
 onchange="chkind()">
    <option>Hi</option>
    <option>Bye</option>
</select><br />
<asp:textbox id="textbox" type="text" runat="server" />
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:51:59.393

我会使用javascript来做到这一点。`onchange=functionName()`在您的和处理 javascript 中的 onchange 中添加一个`asp:DropDownList`以将文本框文本更改为下拉列表中的值。

编辑：

你可以像这样调用 onchange 事件：

```
<asp:DropDownList ID="dlRef" runat="server" DataSourceID="DataRef" DataTextField="Ref" 
     DataValueField="Ref" style="z-index: 1; left: 155px; top: 68px; position: absolute; 
     width: 115px; height: 29px; bottom: 254px;" AutoPostBack="True" onchange="changeTextBox(this)">
</asp:DropDownList> 
```

你的脚本是这样的：

```
<script>
    function changeTextBox(data) {
        document.getElementById("yourTextBoxId").value = data.value;
    }
</script> 
```

如果你想显示文本，我猜你应该使用 text 属性。

注意：从 html5 开始，脚本标签可以在没有 type 属性的情况下使用。

# c# - 将参数从服务发送到服务主机

> ID：15070730
> 
> 赞同：1
> 
> 时间：2013-02-25T15:44:14.267
> 
> 标签：c#, wcf, rest, servicehost

我有一个接口，用于为服务主机管理的服务设置参数。当我提交更改时，我想重新配置服务以使用新值。

```
public interface IServicesConfig
{
    [OperationContract]
    [WebInvoke(UriTemplate = "set", Method = "POST", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
    Stream SetParameters(Parameters parameters);
} 
```

其中Parameters是我的数据合同类并且有字符串成员；

这是否可以发送我的参数列表而不在 UriTemplate (set?param1={param1}&...) 中指定每个参数？

# ruby-on-rails - 如何检查字符串是否包含特定字符，以及它是否只替换了那个位？

> ID：15070731
> 
> 赞同：2
> 
> 时间：2013-02-25T15:44:14.237
> 
> 标签：ruby-on-rails, ruby

我想替换所有包含`c#`可以包括`c#-4.0`, `c#-3.0`,`ms-c#`等字符的字符串。

如何检查`c#`字符串中是否存在，如果存在，只需替换该`c#`字符串的部分？

即`c#-4.0`修改后的字符串将是`c%23-4.0`. 如果使用 Ruby 核心库的本机方法（如`String`'s 方法之一），那将是更可取的。

我试过`tagname.replace('c%23')`了，但这会替换整个字符串，而不仅仅是与模式匹配的子字符串。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:49:42.287

使用[字符串 gsub](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)方法：

```
"c#-4.0".gsub!(/c#/, "c%23") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:55:05.193

可以使用[`gsub`](http://apidock.com/ruby/String/gsub)String的方法。（[`sub`](http://apidock.com/ruby/String/sub)如果您只想在字符串中替换一次，请使用）。

```
"hello".gsub(/[aeiou]/, '*')                  #=> "h*ll*"
"hello".gsub(/([aeiou])/, '<\1>')             #=> "h<e>ll<o>"
"hello".gsub(/./) {|s| s.ord.to_s + ' '}      #=> "104 101 108 108 111 "
"hello".gsub(/(?<foo>[aeiou])/, '{\k<foo>}')  #=> "h{e}ll{o}"
'hello'.gsub(/[eo]/, 'e' => 3, 'o' => '*')    #=> "h3ll*"

# in your case :
"some string c#".gsub!('c#', 'c%23')           #=> "some string c%23" 
```

# r - 在 R 中使用 ggplot 绘图时何时使用 factor()？

> ID：15070738
> 
> 赞同：8
> 
> 时间：2013-02-25T15:44:36.867
> 
> 标签：r, ggplot2

您通常何时使用`factor`R 中的 ggplot2 对变量进行颜色/大小编码？例子：

```
ggplot(mtcars) + geom_point(aes(x=mpg, y=drat, colour=gear)) 
```

相对：

```
ggplot(mtcars) + geom_point(aes(x=mpg, y=drat, colour=factor(gear))) 
```

`factor`当用于确定形状/大小/颜色的变量是离散的而不是连续的时，是否使用一般规则？`factor`或者在这种情况下还有其他用途吗？似乎第一个命令可以像第二个命令一样使用正确的图例，即使没有`factor`. 谢谢。

*编辑*：当我使用`colour=gear`： ![在此处输入图像描述](../Images/145c7583b0a48fa7aa39eaeb0d9103d3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T15:49:25.973

问题不在于传说，而在于颜色的选择。当它不是一个因素时，这些点是相同色调的不同深浅：

```
ggplot(mtcars) + geom_point(aes(x=mpg, y=drat, colour=gear)) 
```

![在此处输入图像描述](../Images/ed0bb1d2eb5f7b7738375fe738e7c68d.png)

这传达了一个连续的点，因此对于一组单独的可能性来说并不理想。（事实上​​，一旦你有五六种可能性，颜色就很难相互区分了）。

当`gears` *被*视为一个因素时，颜色被选择为可区分的：

```
ggplot(mtcars) + geom_point(aes(x=mpg, y=drat, colour=factor(gear))) 
```

![在此处输入图像描述](../Images/7351834169dc384328d4438750b6c07d.png)

请注意，如果您在不使用 时没有得到梯度图`factor`，您应该尝试升级到更新版本的`ggplot2`.

# objective-c - 用 Cocoa 画线分隔符

> ID：15070740
> 
> 赞同：2
> 
> 时间：2013-02-25T15:44:41.047
> 
> 标签：objective-c, cocoa, nsview, nsbox

如何绘制这样的行分隔符：

![在此处输入图像描述](../Images/e0e7c25e4b1ec0fbb3a7cea3b3afe552.png)

请注意，彼此顶部有 2 条单像素线。有小费吗？

* * *

### 编辑：

这是我需要的代码，在 NSBox 子类中：（或 NSView，并不重要）：

```
- (void)drawRect:(NSRect)rect
{
    [[NSColor lightGrayColor] set];
    NSRectFill(NSMakeRect(0, 1, NSWidth(rect), 1));

    [[NSColor whiteColor] set];
    NSRectFill(NSMakeRect(0, 0, NSWidth(rect), 1));    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T16:18:48.840

通常，这种分隔符用 绘制`NSBox`，通常配置为`NSBoxSeparator`类型。不过，这不是您要寻找的外观。我建议在子类中手绘它`NSBox`（这样你就可以得到正常的`NSBox`行为）。有关子类的示例`NSBox`，请参阅 Matt Gemmell 的[RoundedBox](http://mattgemmell.com/2005/11/02/roundedbox-nsbox-subclass/)。

你只需要两行，所以`drawRect:`应该很简单。以这种方式封装它将使您非常灵活。

（当然，您也可以考虑只使用标准`NSBox`分隔符而不是创建自定义外观。这就是它的用途。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:48:46.307

我在 iOS 上用类似的东西模仿了它，假设`NSView`有一个类似的界面，我希望这会有所帮助：

```
UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(11, 99, 298, 1)];
lineView.backgroundColor = [UIColor darkGrayColor];
[panel addSubview:lineView];

UIView *lineView2 = [[UIView alloc] initWithFrame:CGRectMake(10, 100, 300, 1)];
lineView2.backgroundColor = [UIColor whiteColor];
[panel addSubview:lineView2]; 
```

* * *

自己看了一下 NSView 界面，它似乎几乎可以直接转移：

```
NSView *lineView = [[NSView alloc] initWithFrame:CGRectMake(11, 99, 298, 1)];
lineView.backgroundColor = [NSColor colorWithCalibratedRed:0.4f green:0.4f blue:0.4f alpha:1.0f];
[panel addSubview:lineView];

NSView *lineView2 = [[NSView alloc] initWithFrame:CGRectMake(10, 100, 300, 1)];
lineView2.backgroundColor = [NSColor colorWithCalibratedRed:1.0f green:1.0f blue:1.0f alpha:1.0f];
[panel addSubview:lineView2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T07:30:31.267

你也可以使用 CALayer

```
CALayer *lineLayer = [CALayer layer];
lineLayer.frame = (CGRectMake(0, 100, 300, 1));
[lineLayer setBackgroundColor:CGColorCreateGenericRGB(1.0, 1.0, 1.0, 1.0)];
[panel.layer addSublayer: lineLayer]; 
```

或（如果您无权访问图层）

```
CALayer *lineLayer = [CALayer layer];
lineLayer.frame = (CGRectMake(0, 100, 300, 1));
[lineLayer setBackgroundColor:CGColorCreateGenericRGB(1.0, 1.0, 1.0, 1.0)];
[panel setWantsLayer:YES];
[panel setLayer: lineLayer]; 
```

# c++ - 使用迭代器读取格式化的流是一件好事吗？

> ID：15070741
> 
> 赞同：5
> 
> 时间：2013-02-25T15:44:47.647
> 
> 标签：c++, stream, iterator, operators

我编写了一个类似于迭代器的类来解析 CSV 格式的文件。我还编写了其他类来读取特定的 csv 文件以直接填充 MyObject 结构。因此可以像这样使用该类（我删除了代码的错误处理部分）：

```
std::ifstream in(filename);
MyObjectParser parser(in);
MyObjectParser::Iterator it;
for (it = parser.begin(); it != parser.end(); it++)
{
   MyObject b = *it; 
   // do some stuff here ...
} 
```

该程序运行良好，我对此感到满意，但我意识到迭代器的隐含含义（仅对我自己而言？）是**它将迭代一个集合**。在这种情况下，没有集合，只有一个流。

我是否应该更喜欢一种明确建议我通过重载>>运算符来使用流的形式，从而具有类似的东西：

```
std::ifstream in(filename);
MyObjectReader reader(in);
MyObject obj;
while(reader >> obj)
{
    // do the same "some stuff" here...
} 
```

仅仅是口味问题吗？我看不清楚有什么区别（除了在第二种形式中，对象只是填充而不是复制）以及选择第一种或第二种形式的后果是什么。

我很乐意获得其他一些意见，以便确切了解我为什么使用解决方案而不是其他解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:49:27.930

如果需要，您可以将流视为集合。

但是，我要注意，通过重载，您可以同时拥有两者——您可以直接`operator>>`使用从流中显式读取数据，*或者*您可以通过将流视为集合来将其视为集合。`operator>>`*`std::istream_iterator<whatever>`*

 *既然如此，在我看来，重载`operator>>`是显而易见的选择，因为从那时起，您可以以任何一种方式处理事情，基本上不需要额外的工作。此外，using`std::istream_iterator<x>`是一个相当容易识别的习惯用法，因为它包含在标准库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:05:10.333

迭代的概念不依赖于容器的概念。迭代器迭代一系列值。不同的迭代器设计对序列的定义方式不同，但始终存在当前值、前进和结束的思想。输入迭代器的唯一问题是它们只在文件末尾终止；例如，您不能说接下来的 10 行包含双精度数，然后我们继续讨论其他内容。（当然，你可以在流中插入一个过滤streambuf来检测结束。）*

# c# - 如何将带有拆分字符串的列表转换为可能的值集？

> ID：15070743
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:44:59.347
> 
> 标签：c#, list

我需要实现一个模块，它将具有拆分字符串值的列表转换为可能的值集。

例如

考虑该列表包含以下值

```
1
1,2
3
4
5 
```

该模块应将上述列表转换为可能的值集列表

```
1,2,3,4,5
1,1,3,4,5 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:49:58.320

这将做到这一点，尽管它会以相反的顺序返回您的示例：

```
static IEnumerable<string> Permutations(
    IEnumerable<string> input,
    char separator)
{
    var sepAsString = separator.ToString();

    var enumerators = input
       .Select(s => s.Split(separator).GetEnumerator())
        .ToArray();
    if (!enumerators.All(e => e.MoveNext())) yield break;

    while (true)
    {
        yield return String.Join(sepAsString, enumerators.Select(e => e.Current));
        if (enumerators.Reverse().All(e => {
                bool finished = !e.MoveNext();
                if (finished)
                {
                    e.Reset();
                    e.MoveNext();
                }
                return finished;
            }))
            yield break;
    }
} 
```

用法：

```
var list = new[] { "1", "1,2", "3", "4", "5" }.ToList();
var perms = Permutations(list, ',').ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:09:56.347

罗林的回答非常可靠，但我觉得它不容易阅读和理解。这是另一种方式，使用较少的 Linq。

```
 private List<string> Process(IEnumerable<string> input)
    {
        List<string> data = new List<string>();
        int preExpandCount = 0, offset = 0;
        foreach (string inputItem in input)
        {
            List<string> splitItems = inputItem.Split(',').ToList();
            if (data.Count > 0)
                preExpandCount = ExpandList(data, splitItems.Count - 1);

            offset = 0;
            foreach (string splitItem in splitItems)
            {
                if (preExpandCount == 0)
                    data.Add(splitItem);
                else
                {
                    for (int i = 0; i < preExpandCount; i++)
                        data[i + offset] = String.Format("{0},{1}", data[i + offset], splitItem);
                    offset += preExpandCount;
                }
            }
        }

        return data.OrderBy(e => e).ToList();
    }

    private int ExpandList(List<string> existing, int count)
    {
        int existingCount = existing.Count;
        for (int i = 0; i < count; i++)
            existing.AddRange(existing.Take(existingCount).ToList());
        return existingCount;
    } 
```

# scala - scala中类型参数的伴随对象的类型约束

> ID：15070744
> 
> 赞同：2
> 
> 时间：2013-02-25T15:44:59.613
> 
> 标签：scala

我想定义一个名为 ExtendedNumber 的参数化类，它将采用某种形式的整数，例如 Int 或 Byte 并将其扩展为包括无穷大、-infinity 和 null。特别是，我想用 MaxValue 来表示无穷大。如果 MaxValue 是静态成员，我相信我可以这样做：

```
class ExtendedNumber[T <: {val MaxValue : T}] {
  val infinity = T.MaxValue
  ...
} 
```

但是，由于 MaxValue 是在伴随对象中定义的，我相信我需要对伴随对象进行类型约束。这可能吗？我也对一般问题的其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:58:33.060

一般的解决方案是添加一个类型类，例如：

```
trait ExtendedNumber[T] {
  def infinity: T
}

implicit object extendedInt extends ExtendedNumber[Int] {
  def infinity = Int.MaxValue
}

def foo[T](v: T)(implicit en: ExtendedNumber[T]) = v == en.infinity 
```

# c# - XmlSerializer 不填写值

> ID：15070745
> 
> 赞同：2
> 
> 时间：2013-02-25T15:45:05.560
> 
> 标签：c#, xml, serialization, xsd, xml-serialization

我从 DTD（通过 XSD 和 xsd.exe）为我的 C# 项目创建了类，因此我可以轻松地将它们反序列化为我的代码中的模型类。

我大致是这样做的：

```
XmlReaderSettings readerSettings = new XmlReaderSettings();
readerSettings.DtdProcessing = DtdProcessing.Parse;

XmlReader reader = XmlReader.Create(tipsfile.FullName, readerSettings);

XmlRootAttribute xRoot = new XmlRootAttribute();
xRoot.ElementName = "Tips";
xRoot.IsNullable = true;

XmlSerializer serializer = new XmlSerializer(typeof(Tips), xRoot);
Tips tips = (Tips)serializer.Deserialize(reader);

reader.Close(); 
```

但是，在检查 后`tips`，我发现它根本不包含原始 XML 文件中的任何值。此外，我尝试在`set`-Body 的属性的 -Body 上设置断点`Tips`，但它从未到达，尽管我确定它在原始 XML 文件中具有值。

为什么文件没有正确反序列化到类中？我的代码中是否缺少某些内容？

**编辑：**这是从 XSD 自动生成的 Tips.cs 文件

```
using System.Xml.Serialization;

namespace MyNs.Model
{
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://tempuri.org/caravan_1")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "http://tempuri.org/caravan_1", IsNullable = false)]
    public partial class Tips
    {
        private Chapter[] chapterField;

        [System.Xml.Serialization.XmlElementAttribute("Chapter")]
        public Chapter[] Chapter
        {
            get
            {
                return this.chapterField;
            }
            set
            {
                this.chapterField = value;
            }
        }
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://tempuri.org/caravan_1")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "http://tempuri.org/caravan_1", IsNullable = false)]
    public partial class Chapter
    {
        private string headingField;
        private CarType[] carTypesField;
        private Section[] sectionField;
        private string countryField;
        private string languageField;

        public string Heading
        {
            get
            {
                return this.headingField;
            }
            set
            {
                this.headingField = value;
            }
        }

        [System.Xml.Serialization.XmlArrayItemAttribute("CarType", IsNullable = false)]
        public CarType[] CarTypes
        {
            get
            {
                return this.carTypesField;
            }
            set
            {
                this.carTypesField = value;
            }
        }

        [System.Xml.Serialization.XmlElementAttribute("Section")]
        public Section[] Section
        {
            get
            {
                return this.sectionField;
            }
            set
            {
                this.sectionField = value;
            }
        }

        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string Country
        {
            get
            {
                return this.countryField;
            }
            set
            {
                this.countryField = value;
            }
        }

        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string Language
        {
            get
            {
                return this.languageField;
            }
            set
            {
                this.languageField = value;
            }
        }
    }
     [... and so on ...] 
```

以及一个示例 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Tips SYSTEM "caravan_1.dtd">
<Tips>
    <Chapter Country="dafghagt" Language="de">
        <Heading>fgagasgargaergarg</Heading>        
        <Section id="1">
            <Heading>afdhwr6u5taehtaqh5</Heading>
            <SubSection id="1">
                <Heading>46k46kw6jhadfgadfha</Heading>              
                <Table>
                    <Row id="1">
                        <Heading>sgjsfgjsgfh443q572q356</Heading>
                        <Items>
                            <Item car="motor1" id="1">
                                <BodyText color="red">130*</BodyText>
                                <Subscript>3</Subscript>
                            </Item>
                        </Items>
                    </Row>
                </Table>
            </SubSection>
        </Section>
    </Chapter>
</Tips> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:00:10.107

```
 StreamReader sw = new StreamReader(fileName, false);
        XmlTextReader xmlw = new XmlTextReader(sw);
        XmlSerializer writer = new XmlSerializer(
            type,
            GetOverrides(),
            extraTypes,
            null,
            null);

        object o = writer.Deserialize(xmlw); 
```

根据我的评论，get overrides 只是一种包含类似于您的 xml 根属性的方法，如有必要，我也可以向您展示

编辑：额外类型的一个例子

```
 public Type[] GetTypes()
    {
        return new Type[] { typeof(Class1), typeof(Class2)};
    } 
```

EDIT2：获取覆盖返回（注意这是未经测试的）

```
XmlAttributes attribs = new XmlAttributes();
//attribs.XmlRoot - can edit root here (instead of xmlrootattribute)
attribs.XmlElements.Add(myAttribute);

XmlAttributeOverrides myOverride = new XmlAttributeOverrides();
myOverride.Add(typeof(Tips), "Tips", attribs);
return myOverride 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:03:03.563

您的对象可能与 xml 模型不同。在这种情况下，您需要将类的属性映射到 xml 字段。我给你一个简单的例子，我在我的一个项目中可能会给你更多的信息。

```
namespace DatabaseModel
{
    [Description("Represents the selected nodes in the Coverage pane")]
    [Serializable()]
    [XmlRootAttribute("XmlCoverage", Namespace = "GISManager", IsNullable = false)]
    public class TXmlCoverage : IXmlPolygon
    {
        [XmlArray(ElementName = "sbets"), XmlArrayItem(ElementName = "sbet")]
        public List SbetsSelected { get; set; }
        [XmlArray(ElementName = "sdcs"), XmlArrayItem(ElementName = "sdc")]
        public List SdcsSelected { get; set; }
        [XmlElementAttribute(ElementName = "area")]
        public Boolean IsAreaSelected { get; set; }
        [XmlElementAttribute(ElementName = "fpath")]
        public Boolean IsFlightPathSelected { get; set; }
        [XmlElementAttribute(ElementName = "fpoly")]
        public Boolean IsFlightPolySelected { get; set; }
        [XmlElementAttribute(ElementName = "mpoly")]
        public Boolean IsMinePolySelected { get; set; }
        [XmlElementAttribute(ElementName = "bldg")]
        public Boolean IsBuildingsSelected { get; set; }
        [XmlElementAttribute(ElementName = "hgt")]
        public Boolean IsHeightSelected { get; set; }
        [XmlIgnore()]
        public Boolean ArePolygonsSelected { get { return IsMinePolySelected && IsBuildingsSelected && IsHeightSelected; } }

```
 public TXmlCoverage()
    {
        SbetsSelected = new List<String>();
        SdcsSelected = new List<String>();
        IsAreaSelected = false;
        IsFlightPathSelected = false;
        IsFlightPolySelected = false;
    }
} 
```

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:35:33.787

所以事实证明问题是*命名空间*。因为我的 XML 没有根命名空间：

```
<Tips> 
```

但我的模型的定义包含一个：

```
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://tempuri.org/caravan_1", IsNullable = false)] 
```

序列化器没有将任何元素匹配在一起。删除命名空间属性时，它工作正常。

所以现在，我重新设计了完整的模型并排除了任何不是绝对必要的属性（事实证明，除了一个之外，所有属性都是），所以现在每个属性都只有一个属性：`XmlElement`和配偶。

```
using System.Xml.Serialization;

namespace MyNs.Model
{
    [XmlRoot("Tips")]
    public partial class Tips
    {
        [XmlElement("Chapter")]
        public Chapter[] Chapter { get; set; }
    }

    [XmlRoot("Chapter")]
    public partial class Chapter
    {
        [XmlElement("Heading")]
        public string Heading { get; set; }

        [XmlElement("CarType")]
        public CarType[] CarTypes { get; set; }

        [XmlElement("Section")]
        public Section[] Section { get; set; }

        [XmlAttribute("Country")]
        public string Country { get; set; }

        [XmlAttribute("Language")]
        public string Language { get; set; }
    }
    [... and so on ...] 
```

通过简单的反序列化，它现在工作得很好：

```
XmlReaderSettings readerSettings = new XmlReaderSettings { DtdProcessing = DtdProcessing.Parse };
XmlSerializer serializer = new XmlSerializer(typeof(Tips));

using (XmlReader reader = XmlReader.Create(fromXmlFile.FullName, readerSettings))
{
    Tips tips = (Tips)serializer.Deserialize(reader);
    return tips;
} 
```

# yii - 内容渲染后如何注册MetaTag并替换内容？

> ID：15070747
> 
> 赞同：1
> 
> 时间：2013-02-25T15:45:07.413
> 
> 标签：yii, meta-tags

我使用带有元标记的布局；

```
<meta name="description" id="meta_description" content="content here" />
<meta name="keywords" id="meta_keywords" content="job" />

<meta property="og:title" id="meta_og_title" content="og title"/>
<meta property="og:image" id="meta_og_image" content="og image"/>
<meta property="og:site_name" id="meta_og_site_name" content="og site name"/>
<meta property="og:description" id="meta_og_description" content="og description" /> 
```

我生成内容；

在该内容中，我注册了一些元标记：

```
Yii::app()->clientScript->registerMetaTag('Job search', 'description', null, array('id'=>'meta_description'), 'meta_description');
Yii::app()->clientScript->registerMetaTag('Job search', 'keywords', null, array('id'=>'keywords'), 'meta_keywords');

Yii::app()->clientScript->registerMetaTag('mogt', '', null, array('id'=>'meta_og_title', 'property' => 'og:title'), 'meta_og_title');
Yii::app()->clientScript->registerMetaTag('mogi', '', null, array('id'=>'meta_og_image', 'property' => 'og:image'), 'meta_og_image');
Yii::app()->clientScript->registerMetaTag('mogsn', '', null, array('id'=>'meta_og_site_name', 'property' => 'og:site_name'), 'meta_og_site_name');
Yii::app()->clientScript->registerMetaTag('mogd', '', null, array('id'=>'meta_og_description', 'property' => 'og:description'), 'meta_og_description'); 
```

为什么 yii 在插入静态元标签之前注册元标签？

我想修改静态标签，我不想复制元标签；

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:17:54.347

从文档：

> **注意：**此方法的每次调用都会导致新元标记的呈现，即使它们的属性相同。

如果要覆盖现有标签，请确保已添加第一个标签，`registerMetaTag` 以便第 5 个参数`$id`相同

# ruby-on-rails - 将小文件上传到 S3 w/carrierwave_direct 时 Heroku 上的间歇性 H12 超时

> ID：15070748
> 
> 赞同：1
> 
> 时间：2013-02-25T15:45:09.047
> 
> 标签：ruby-on-rails, heroku, amazon-s3, ruby-on-rails-3.2, carrierwave

我在 Heroku 上运行 rails 3.2.11 应用程序并遇到了一个我无法弄清楚的间歇性问题。

我有一个模型，其中包含用户上传的文件。该文件通常约为 300-400Kb。当用户尝试创建或编辑此模型并上传文件时，我在生产中看到一个问题，我定期收到 h12 超时错误。很难重新创建错误，因为当我测试它几乎所有时间都可以正常工作时，包括高达 10mb，因此问题似乎并不直接取决于文件大小。

我正在使用carrierwave_direct gem 直接上传到S3。我开始使用carrierwave gem 并切换到carrierwave_direct，希望它能解决问题。我没有对文件进行任何后处理，我只需要上传它。

我在 prod 中重新创建了这个错误，除了我自己之外，服务器上没有用户，所以它似乎也不是交通问题。

示例 heroku 日志条目：

at=error code=H12 desc="Request timeout" method=POST dyno=web.1 queue=0ms wait=0ms connect=1ms service=33605ms status=503 bytes=0

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:39:06.663

Heroku 会超时需要超过 30 秒的请求 - 这始终是上传的问题。

使用 Amazon S3，您可以直接上传而无需通过 Heroku，并在上传完成后将响应传递给 Heroku，从而完全绕过 Heroku 的超时 - 您需要查看 Rackspace 是否提供此类功能。

[http://railscasts.com/episodes/383-uploading-to-amazon-s3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

上面的链接将帮助您在 carrierwave_direct 和后台作业的帮助下在 s3 上上传图像

# jquery - Ajax 表单不会在 Internet Explorer 中发布

> ID：15070753
> 
> 赞同：0
> 
> 时间：2013-02-25T15:45:26.420
> 
> 标签：jquery, ajax

以下代码在 FF 和 Chrome 中运行良好： 通过 Ajax 发布表单并出现模式窗口。在 IE9 中，出现模态窗口但不发布表单。

Javascript：

```
$(document).ready(function() {
$(document).ajaxStart(function(){
    $('#thanks').modal();
});

$('.ajaxform').submit(function () {
    $.ajax({
        url: $(this).attr('action'),
        type: $(this).attr('method'),
        dataType: 'html',
        data: $(this).serialize(),
        success: function (data) {},
        error: function () { }
    });
    return false;
}); 
```

});

HTML：

```
<form method="post" action="https://www.example.com/post.php" class="ajaxform">
<label>First name*</label>
                    <input type="text" name="fname" required>

                    <label>Last name*</label>
                    <input type="text" name="lname" required>

                    <label>Email address*</label>
                    <input type="email" name="email" required>

                    <label>Phone number*</label>
                    <input type="tel" name="phone" required>
<input class="btn btn-primary" type="submit" value="Submit Request" role="button" href="#thanks"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:13:58.157

您能否检查一下您的提交事件处理程序是否实际上在 IE 中被调用？我要问的原因是 jQuery *.submit()*文档指出：

> “JavaScript 提交事件不会在 Internet Explorer 中冒泡。但是，从 jQuery 1.4 开始，依赖事件委托和提交事件的脚本将在浏览器中始终如一地工作，这已经规范了事件的行为。”

因此，根据您使用的 jQuery 版本，这可能是一个问题……此外，使用 Fiddler 或控制台检查 Ajax 调用是否实际离开浏览器可能会给出提示。

干杯，亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:53:00.843

我看不到您的 ajax 调用在哪里将其变为实际帖子。如果它是一个获取，您可能必须在 IE 中禁用缓存。jQuery ajax 调用有一个设置：`cache: false`.

```
$('.ajaxform').submit(function () {
    $.ajax({
        cache: false,
        url: $(this).attr('action'),
        type: $(this).attr('method'),
        dataType: 'html',
        data: $(this).serialize(),
        success: function (data) {},
        error: function () { }
    });
    return false;
}); 
```

# delphi - 带 LineDDA 的椭圆点

> ID：15070755
> 
> 赞同：0
> 
> 时间：2013-02-25T15:45:31.630
> 
> 标签：delphi

我可以使用 GDI Canvas Ellipse 绘制夹点，但第二个点绘制不正确。你如何防止显示的效果？

```
procedure TFormMain.DrawMarchingAnts;
var
  iWidth: integer;
begin
  AMarchingAntsCounter := AMarchingAntsCounterStart;
  // Use LineDDA to draw each of the 4 edges of the rectangle
  LineDDA(AMarchingAntsPointA.X, AMarchingAntsPointA.Y, AMarchingAntsPointB.X, AMarchingAntsPointA.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointB.X, AMarchingAntsPointA.Y, AMarchingAntsPointB.X, AMarchingAntsPointB.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointB.X, AMarchingAntsPointB.Y, AMarchingAntsPointA.X, AMarchingAntsPointB.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  LineDDA(AMarchingAntsPointA.X, AMarchingAntsPointB.Y, AMarchingAntsPointA.X, AMarchingAntsPointA.Y,
    @MarchingAnts, LongInt(
    AMarchingAntsCanvas));
  if AMarchingAntsPointB.X > AMarchingAntsPointA.X then
    ARubberbandVisible := True
  else
    ARubberbandVisible := False;
  AMarchingAntsCanvas.Pen.Width := 1;
  AMarchingAntsCanvas.Pen.Color := clWhite;
  AMarchingAntsCanvas.Brush.Color := clRed;
  AMarchingAntsCanvas.Ellipse(AMarchingAntsPointA.X-4, AMarchingAntsPointA.Y-4, AMarchingAntsPointA.X+4, AMarchingAntsPointA.Y+4);
  iWidth := AMarchingAntsPointB.X - AMarchingAntsPointA.X;
  AMarchingAntsCanvas.Ellipse(AMarchingAntsPointA.X-4 + iWidth, AMarchingAntsPointA.Y-4, AMarchingAntsPointA.X+4 + iWidth, AMarchingAntsPointA.Y+4);
end; 
```

![在此处输入图像描述](../Images/a3aebcac2a52bd31282fb27c8b6d47fd.png)

# trigger.io - 打包 Trigger.io Web 应用以进行发布时指定应用根目录

> ID：15070765
> 
> 赞同：1
> 
> 时间：2013-02-25T15:46:30.093
> 
> 标签：trigger.io

打包的 Trigger.io Web 应用程序在 index.html 中使用绝对路径引用其 Forge 资产：

```
script src="/_forge/all.js" 
```

是否可以使此路径相对或以其他方式指定“应用程序根”以用于从 Web 服务器上的非根路径提供 nodejs Web 应用程序的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:35:21.307

当前否 -`/_forge/all.js`参考不可配置。

我认为您将其部署为另一个 Node 应用程序的一部分或与之相关联？如果您无法提供该路径，我们当然可以进行配置`all.js`- 请通过 support@trigger.io 联系以讨论时间安排。

# django - 在我的 django 应用程序中，我在哪里为 dwolla 验证我的用户？

> ID：15070768
> 
> 赞同：0
> 
> 时间：2013-02-25T15:46:48.543
> 
> 标签：django, python-2.7, oauth-2.0, dwolla

我从来没有真正使用过 API、JSON 或 OAUTH，我正在尝试在我的网站上使用 Dwolla 进行支付。由于我从未见过使用 oauth 对用户进行身份验证的过程，因此我很难弄清楚我需要放置什么，尤其是需要放置的位置。dwolla 可用的文档对我来说没有多大意义。我什至很轻松地完成了 codecademy.com 的课程，但在我的 django 项目中尝试使用它时仍然不知道从哪里开始。我使用 django-registration 允许用户在我的网站上注册，所以我应该在用户注册我的网站时使用 oauth 对用户进行身份验证，以便为他们分配一个 oauth 令牌？我是否使用模板中的链接将用户发送到 auth url，或在视图中使用代码？我是否需要创建具有外键字段的新模型以将其与我的用户关联？我真的不知道这个过程应该是什么样子，以及 Dwolla 的 API 如何与我的 django 应用程序交互。[这](https://developers.dwolla.com/dev/samples/python)是来自 dwolla 的 python 文档，[这](https://developers.dwolla.com/dev/pages/auth#oauth-token)是 dwolla 的 oauth 文档。我什至尝试阅读[此 oauth 指南](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-10)以了解发生了什么。[github 上](https://github.com/simplegeo/python-oauth2)的oauth2 概述提供了一个使用 twitter 的 API 的示例，但这让我更加困惑，因为它特定于 twitter 的 API。另外，我需要安装除 oauth2 和 dwolla 以外的任何东西吗？我知道所有的部分都在那里，我只是很难理解它们是如何组合在一起的。任何人都可以澄清我需要采取的步骤，或者至少有没有人为绝对初学者提供一个很好的教程来学习 oauth 和 API？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:30:05.427

您可以在您方便的 Django 应用程序中的任何位置对用户进行身份验证。一个好地方是用户可能正在编辑他们的帐户详细信息的页面。

为了实际编写代码，您可以从 Twitter 或任何地方收起任何 oAuth 文档。oAuth 不是您需要学习如何使用的 jQuery 之类的代码库。它只是关于开发人员如何允许其用户的帐户与其他站点上的帐户对话并相信其是同一用户的一组指导方针。

**核心思想**是站点 #1（在本例中为 Dwolla）为站点 #2（您的站点）提供 a `token`，通常是一些加密的文本字符串，例如 !432d8dk*dfas&&3，可用于或多或少地登录用户在站点 #2 上时访问站点 #1。更准确地说，令牌授予用户在站点#1 登录期间同意站点#2 访问其站点#1 帐户部分的权限。

**这是一个清单，列出了将您**网站上每个用户的身份验证与他们在**Dwolla**网站上的帐户联系起来的操作清单。这是基于[在 Github 上发布的 Dwolla 的 python API](https://github.com/Dwolla/dwolla-python)。请注意，这是针对 Flask 而不是 Django 应用程序的。

1.  向 Dwolla 注册您的应用程序，以便获取您的公钥和私钥（`_keys.apiKey, _keys.apiSecret` [在 Dwolla 的 oAuth 示例中](https://github.com/Dwolla/dwolla-python/blob/master/examples/oauth.py)列出）
2.  指示重定向 URL，`oauth_return_url`当用户在 Dwolla 上完成登录后，Dwolla 将重定向到该 URL。
3.  （可选，但可能是个好主意，因此用户只需在 Dwolla 的网站上进行一次 oAuth/登录）将`token`特定于登录 Dwolla 网站的用户存储在您的数据库中。

# c# - DataGridView CausesValidation 不起作用

> ID：15070771
> 
> 赞同：0
> 
> 时间：2013-02-25T15:46:55.250
> 
> 标签：c#, winforms, datagridview

我想关闭所有类型的验证，`DataGridView`但设置`DataGridview.CausesValidation=false`不起作用，它总是抛出异常“输入数据无法识别”

`DataGridView`绑定到具有 DateTime 数据类型列的 DataTable，但我想添加一些对某些文化无效的自定义日期格式，例如 11.12.2013、10-12-2013、11/11/2013。

因为，我需要对这些列进行排序，因此我想保留它们的日期时间而不是字符串/varchar

它是一个 C# WinForm 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:15:01.910

默认情况下不进行验证。在您的情况下，它不是`DataGridView`验证数据，而是验证基础类型`DateTime`。

如果您真的想保留 datetime 类型的列，`DateTime`您应该将所有输入数据转换为您选择的一种格式。您仍然可以通过在运行时转换为特定的文化来以不同的方式显示（在内部它们将保持默认文化）它们（尽管如果此数据不是只读的，则需要额外的代码和注意）

这是我的意思的代码片段 - 您将数据存储为`DateTime`文化 A（由您`Thread`自己定义）并将其显示为转换为特定文化 B 的字符串。

当用户尝试以任何格式输入日期时，它将被正确解析并保存在文化 B 中（但是用户将在特定文化 A 中看到它）。

这里的问题 - 如果客户在保存后以 B 以外的任何其他文化输入日期，它将在视觉上转换为 B。

这是 List 的属性，它填充`DataGridView`

```
 private DateTime _dt1; 
        public string dt1 { 
            get 
            {
                return _dt1.ToString(new CultureInfo("nl-NL"));
            } 
            set
            {
                _dt1 = DateTime.Parse(value);
            }
        } 
```

关于排序问题 - 实现自定义排序相对容易，它将比较不显示`strings`但它们的底层`DateTime`属性

# powershell - 为什么我的服务变量为空？

> ID：15070774
> 
> 赞同：0
> 
> 时间：2013-02-25T15:46:57.303
> 
> 标签：powershell, powershell-2.0

当我出于某种原因运行以下脚本时，$Service 是否为空？

我知道该服务存在，但 PowerGUI 脚本编辑器的变量部分中没有出现任何内容。这弄乱了脚本中的 IF-ELSE 语句，如果服务启动，它会向最终用户显示“已启动”。

它是服务名称中的空格吗？如果我只是自己执行服务变量，那么它会显示服务的全部内容，所以它不像找不到服务..

这是 NULL 变量为空的图片：

![在此处输入图像描述](../Images/e76e1b488170e226e43c84009719feb3.png)

脚本：

```
clear
#$ErrorActionPreference = "silentlycontinue"

Import-Module PSRemoteRegistry

$Logfile = "C:\temp\netbackup_version.log"

Function LogWrite
{
    param([string]$logstring)

    Add-Content $Logfile -Value $logstring
}

$computer = Get-Content -Path c:\temp\netbackup_servers1.txt

foreach ($computer1 in $computer){

        $Reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', $computer1)
        $RegKey= $Reg.OpenSubKey("SOFTWARE\\Veritas\\NetBackup\\CurrentVersion")
        $NetbackupVersion1 = $RegKey.GetValue("PackageVersion")

    if (test-connection $computer1 -quiet) 
    {

    $Service = Get-WmiObject Win32_Service -Filter "Name = 'NetBackup Client Service'" -ComputerName $computer1

            if($Service.state -eq 'Running')
            {
                LogWrite "$computer1 STARTED $NetbackupVersion1"

            }
            else
            {
                LogWrite "$computer1 STOPPED $NetbackupVersion1"
            }
    }
    else 
    {
        LogWrite "$computer1 is down" -foregroundcolor RED
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:03:05.360

不要期望旧版本的服务与新的更新版本具有相同的服务名称！具有旧 Netbackup 客户端的旧服务器的名称与新的不同 - 这就是脚本不显示名称的原因！感谢 Graimer 再次检查！

# php - lighttpd 上的 web2py 和 wordpress

> ID：15070777
> 
> 赞同：3
> 
> 时间：2013-02-25T15:47:04.353
> 
> 标签：php, python, wordpress, web2py, lighttpd

我在 lighttpd 服务器上安装了 python web2py，但我想为博客添加 wordpress，问题是我希望 wordpress 在 site.com/blog 上而不是子域，我如何管理 lighttpd 配置以运行！

```
url.rewrite-once = (
           "^/$" => "/ad",
            "^(/.+?/static/.+)$" => "/applications$1",
            "(^|/.*)$" => "/fcgihandler.fcgi$1", <-- tried to exclude 
            "/blog$" => "$0", <-- tried to exclude /blog from rewriting
    ) 
```

还添加了对 php-cgi 的 fastcgi 支持

```
fastcgi.server = (
            ".fcgi" => ("localhost" => (
                    "check-local" => "disable",
                    "min-procs" => "1",
                    "max-procs" => "2",
                    "socket" => "/tmp/web2py.sock"
            )),
            ".php" => ("localhost" => (
                    "socket" => "/tmp/php.socket"
            ))
    ) 
```

虽然做不到，请大家多多指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:25:20.970

试试这个重写：

```
$HTTP["host"] =~ "domain.com" {

server.document-root = "/var/www/app/webroot/"
url.rewrite-once = (
       "^/blog/(.*)$" => "/blog/index.php/$1",
       "^/$" => "/ad",
        "^(/.+?/static/.+)$" => "/applications$1",
        "(^|/.*)$" => "/fcgihandler.fcgi$1",
 )

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:40:26.453

谢谢大家，实际上您的评论对我解决问题有很大帮助，它对我有用，如下所示：

```
$HTTP["url"] =~ "^/blog(.*)$" {
            server.indexfiles = ("/")
            server.document-root = "/var/www"
    }

 url.rewrite-once = (
            "^/blog(.*)$" => "$0", <-- as @dhunter suggested 
            "^(/.+?/static/.+)$" => "/applications$1",
            "(^|/.*)$" => "/fcgihandler.fcgi$1",
    )

fastcgi.server = (
            ".fcgi" => ("localhost" => (
                    "check-local" => "disable",
                    "min-procs" => "1",
                    "max-procs" => "2",
                    "socket" => "/tmp/web2py.sock"
            )),
            ".php" => ((
                    "bin-path" => "/usr/bin/php-cgi",
                    "socket" => "/tmp/php.socket"
            )) 
```

希望以后对某人有所帮助！谢谢

# python - Python：解决我的类的问题

> ID：15070778
> 
> 赞同：0
> 
> 时间：2013-02-25T15:47:07.523
> 
> 标签：python, class, optimization, coding-style

我有以下课程

```
def get_percentile(obs,*args):
    lstper = []
    for arg in args:
        lstper.append(np.percentile(obs,arg))
    return lstper

get_percentile([1,2,3,4,5],25,50,75)
[2.0, 3.0, 4.0]

class Metric(object):
    def __init__(self,*args):
        self.max = max(args)
        self.median =np.median(args)
        self.min = min(args)
        self.percentile = get_percentile(args) 
```

我无法理解正确的集合`self.percentile = get_percentile(args)`以获得各种百分位数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:56:53.477

解决此问题的一种方法是使用命名关键字参数而不是`*args`：

```
def get_percentile(obs,*args):
    if len(args) == 0:
        args = [25,50,75] # default to quartiles
    lstper = []
    for arg in args:
        lstper.append(np.percentile(obs,arg))
    return lstper

class Metric(object):
    def __init__(self, values=[], percentiles=[]):
        self.max = max(values)
        self.median =np.median(values)
        self.min = min(values)
        self.percentile = get_percentile(values, percentiles) 
```

在行动：

```
>>> m = Metric(range(30,300,13), [20,40,60,80])
>>> m.max
290
>>> m.percentile
[[82.0, 134.0, 186.0, 238.0]] 
```

或者，如果您想继续使用`args`，您可以在列表（或元组、字典、集合...）中给出值和百分位数。这是必要的，否则无法判断一个结束，另一个开始：

```
class Metric(object):
    def __init__(self, *args):
        if not len(args) == 2:
            raise ValueError("Usage: Metric([values],[percentiles])")
        values, percentiles = args
        self.max = max(values)
        self.median =np.median(values)
        self.min = min(values)
        self.percentile = get_percentile(values, percentiles) 
```

用法同上。

# c# - 数据绑定依赖属性到数据对象

> ID：15070780
> 
> 赞同：3
> 
> 时间：2013-02-25T15:47:14.963
> 
> 标签：c#, .net, wpf, data-binding, dependency-properties

我有一个带有 DependencyProperty 的 DependencyObject：

```
public class DependencyObjectClass: DependencyObject
{
    public static DependencyProperty BooleanValueProperty = DependencyProperty.Register("BooleanValue", typeof (bool), typeof (DependencyObjectClass));
    public bool BooleanValue
    {
        get { return (bool)GetValue(BooleanValueProperty); }
        set { SetValue(BooleanValueProperty, value); }
    }
} 
```

我也有我的数据源类：

```
public class DataSource: INotifyPropertyChanged
{
    private bool _istrue;
    public bool IsTrue
    {
        get { return _istrue; }
        set 
        { 
            _istrue = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("IsTrue"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我正在尝试使用以下代码绑定上述两个对象：

```
var dependencyObject = new DependencyObjectClass();
var dataSource = new DataSource();
var binding = new Binding("IsTrue");
binding.Source = dataSource;
binding.Mode = BindingMode.TwoWay;
BindingOperations.SetBinding(dependencyObject, DependencyObjectClass.BooleanValueProperty, binding); 
```

每当我更改 DependencyObjectClass 上的 BooleanValue 属性时，DataSource 都会做出反应，但反过来却不起作用（更改 DataSource 上的 IsTrue 属性对 DependencyObjectClass 没有任何作用）。

我究竟做错了什么？我是否必须手动处理 OnPropertyChanged 事件？如果是，那将有点令人失望，因为我希望这会自动完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:07:49.733

> 更改 DataSource 上的 IsTrue 属性对 DependencyObjectClass 没有任何作用

`DependencyObjectClass.BooleanValue`我猜你是从从未调用过属性设置器这一事实得出的结论。事实上 WPF 并没有这样做。相反，它直接设置依赖属性的值，就像`SetValue`直接调用一样。

有关说明，请参阅[定义依赖属性的清单](http://msdn.microsoft.com/en-us/library/ms753358.aspx#checklist)和自定义依赖属性的[含义](http://msdn.microsoft.com/en-us/library/bb613563.aspx#implications)。

为了获得有关更改的依赖项属性值的通知，您必须在[DependencyProperty.Register](http://msdn.microsoft.com/en-us/library/ms597502.aspx)中使用依赖项属性元数据注册一个[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)。

# java - ElementCollection 中不支持带有带有 ManyToOne 引用的 Embeddable 的 Embeddable 吗？

> ID：15070783
> 
> 赞同：2
> 
> 时间：2013-02-25T15:47:21.420
> 
> 标签：java, hibernate, jpa

我想定义一个对象模型如下：

A 包含 X 的列表，每个 X 都包含一个 Y，每个 Y 都指一个 B。我已经将 A 和 B 设置为`Entity`，并且 X 和 Y 都是`Embeddable`。A 包含`@ElementCollection`X 类型的列表。这些类的代码如下。

当要求 Hibernate (3.6.10) 使用 为这个模型生成 SQL 时`SchemaExport`，我期望三个表：A、B 和一个用于从 A 到 B 的引用的集合表，其中包含 A.id、B.id 和用于保持列表顺序的顺序列。相反，Hibernate 给了我以下内容：

```
create table CollectionOfB (A_ID bigint not null, embeddableAList_ORDER integer not null, primary key (A_ID, embeddableAList_ORDER))
create table EntityA (id bigint not null, primary key (id))
create table EntityB (id bigint not null, primary key (id))
alter table CollectionOfB add constraint FKFEABC9AD9AECF0BB foreign key (A_ID) references EntityA 
```

请注意，集合表没有 B.id 列，也没有应有的外键约束。在我看来，我想要的模型应该得到支持。它是否有充分的理由不起作用（如果是，那是什么原因？），或者这是 Hibernate 或 JPA 中的错误/缺失功能？

* * *

作为一个实验，我折叠了我的`Embeddable`关系，所以它只有一个级别（完全删除 Y，将对 B 的引用放在 X 中）。有了这个改变，模式就如我所料地生成了，所以有一个`ElementCollection`where the `Embeddable`has a的基本想法是`ManyToOne`有效的：

```
create table CollectionOfB (A_ID bigint not null, B_ID bigint, embeddableAList_ORDER integer not null, primary key (A_ID, embeddableAList_ORDER))
create table EntityA (id bigint not null, primary key (id))
create table EntityB (id bigint not null, primary key (id))
alter table CollectionOfB add constraint FKFEABC9AD9AED651B foreign key (B_ID) references EntityB
alter table CollectionOfB add constraint FKFEABC9AD9AECF0BB foreign key (A_ID) references EntityA 
```

此外，如果我制作了一个不同的`Entity`C，并将其定义为具有`Embeddable`X（***不是***X的一个`ElementCollection`），则它正确地引用了 B。因此，`Embeddable`在较低级别具有 a 的地方具有两个级别的想法`ManyToOne` ***也***有效。

* * *

```
@Embeddable
public class EmbeddedX {
    // Comment out to "collapse" X and Y
    @Embedded
    EmbeddedY embeddedY;

    // Comment in to "collapse" X and Y
    //    @JoinColumn(name = "B_ID")
    //    @ManyToOne(fetch = FetchType.EAGER)
    //    EntityB entityB;
}

@Embeddable
public class EmbeddedY {
    @JoinColumn(name = "B_ID")
    @ManyToOne(fetch = FetchType.EAGER)
    EntityB entityB;
}

@Entity
public class EntityA {
    @Id
    Long id;

    @ElementCollection(fetch = FetchType.EAGER)
    @CollectionTable(name = "CollectionOfB", joinColumns = @JoinColumn(name = "A_ID"))
    @Column(name = "Bs")
    @OrderColumn
    List<EmbeddedA> embeddableAList;
}

@Entity
public class EntityB {
    @Id
    Long id;
}

public void testSchema() throws Exception {
    Configuration config = new Configuration().addAnnotatedClass(EntityA.class).addAnnotatedClass(EntityB.class);
    config.setProperty(Environment.DIALECT, HSQLDialect.class.getName());

    new SchemaExport(config).create(true, false);
} 
```

# html - 如何将图像拖放到另一个图像 HTML5 之上

> ID：15070788
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:47:51.473
> 
> 标签：html, css

我需要能够使用 HTML5 将图像拖放到另一个图像之上。任何人都可以帮忙吗？

我所找到的只是关于如何将图像拖放到一个`div`而不是另一个图像的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:06:33.770

```
 <!DOCTYPE HTML>
  <html>
  <head>
  <script>
  function allowDrop(ev)
 {
 ev.preventDefault();
   }

   function drag(ev)
   {
   ev.dataTransfer.setData("Text",ev.target.id);
   }

    function drop(ev)
   {
   ev.preventDefault();
  var data=ev.dataTransfer.getData("Text");
   ev.target.appendChild(document.getElementById(data));
   }
  </script>
 </head>
 <body>

 <div id="div1" ondrop="drop(event)"
  ondragover="allowDrop(event)"></div>

 <img id="drag1" src="img_logo.gif" draggable="true"
 ondragstart="drag(event)" width="336" height="69">

   </body>
   </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T09:35:43.573

现在回答可能为时已晚，但这里有一个解决方案，以防万一它可以提供帮助，他提供了一个聪明的技巧并链接了一个 jsfiddle： [从图像拖放到另一个图像](https://stackoverflow.com/questions/37474553/drag-and-drop-from-image-onto-another-image/37488626)

# php - PHPExcel 创建了无效文件

> ID：15070796
> 
> 赞同：0
> 
> 时间：2013-02-25T15:48:14.217
> 
> 标签：php, phpexcel, file-format

我有一个输出 Excel 文件的小 PHPExcel 脚本，问题是，当我从服务器打开它时，我可以毫无问题地打开它。但是当我通过浏览器中的标题下载它时，它不起作用。

我在互联网上搜索了这个问题，但我没有找到任何对我有帮助的东西，我尝试使用 ob_clean();，我检查了 BOM 是否是问题，没有任何效果。

所以我希望你们中的一些人有一个想法可以让我的脚本工作。

```
$this->objPHPExcel = $this->objReader->load($this->newFilePath);
    $objWorksheet = $this->objPHPExcel->getActiveSheet();
    $objWriter = PHPExcel_IOFactory::createWriter($this->objPHPExcel, 'Excel2007');
    //Adding IO General Overhead
    foreach($this->sums as $sumkey => $sumval){
        foreach($sumval as $keys => $vals){
            foreach($vals as $key => $val){
                $objWorksheet->setCellValueByColumnAndRow($key, $offset[$sumkey][$keys], $val);
            }
        }
        $objWriter->save($this->newFilePath);
    }

    ob_clean();

    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');

    // It will be called file.xls
    header('Content-Disposition: attachment; filename="'.$this->newFilePath.'"');

    header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:00:02.303

查看 /Tests 或 /Examples 中的 01simple-download-xlsx.php 以获取符合您要求的代码示例：

```
$this->objPHPExcel = $this->objReader->load($this->newFilePath);
    $objWorksheet = $this->objPHPExcel->getActiveSheet();
    $objWriter = PHPExcel_IOFactory::createWriter($this->objPHPExcel, 'Excel2007');
    //Adding IO General Overhead
    foreach($this->sums as $sumkey => $sumval){
        foreach($sumval as $keys => $vals){
            foreach($vals as $key => $val){
                $objWorksheet->setCellValueByColumnAndRow($key, $offset[$sumkey][$keys], $val);
            }
        }
    }

    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');

    // It will be called file.xls
    header('Content-Disposition: attachment; filename="'.$this->newFilePath.'"');

    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

        $objWriter->save('php://output'); 
```

# django - 在 Django 中设计访问级别感知视图

> ID：15070797
> 
> 赞同：0
> 
> 时间：2013-02-25T15:48:14.587
> 
> 标签：django, django-templates, django-views, access-levels

当在一个网站上创建一个页面时，应该根据谁在查看它来显示不同的信息，最优雅的设计是什么？我想出了几个可能性：

1.  将所有数据传递给模板，以及一个说明用户拥有何种权限的变量，并让模板根据此选择显示或不显示。

2.  根据访问级别拥有不同版本的模板。

3.  根据访问级别拥有不同版本的视图。

举个具体的例子，假设您有一个包含用户个人资料的页面。如果用户已登录，他们应该会看到他们的所有信息。如果其他用户登录，他们应该只看到该用户公开的内容。如果管理员登录，他们应该会看到所有信息和一组管理操作按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:53:34.693

版本 1 很糟糕。它将访问逻辑放置在模板中，可能（意外地）公开您可能不想公开的内容。

您绝对不应该将*所有内容都*传递给模板，并通过另一个变量来确定显示。

以某种方式在视图中（向模板显示单个正确对象）或模型中进行过滤。

虽然并不总是 100% 可能，但应该努力将业务逻辑排除在模板之外。

如果您需要根据用户的角色使用截然不同的模板，那么我会为每个角色使用单独的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:16:35.457

版本 1 是您最好的选择。我会通过上下文处理器将您需要的值注入上下文中。

# c# - 我将如何确定我的程序将处理器与服务器上的哪个位置挂钩？

> ID：15070803
> 
> 赞同：1
> 
> 时间：2013-02-25T15:48:29.027
> 
> 标签：c#, .net, performance, processing-efficiency

快速背景，我编写了一个服务，它使用 IMAP 从 Exchange 服务器中提取电子邮件并对其进行处理。

问题（嗯，其中之一）是服务器管理员注意到程序间歇性地与处理器挂钩。

现在，这里的问题是...... 什么都不应该让这种情况发生。没有什么特别密集的，没有嵌套循环，老实说，测试停滞了，所以这个过程几乎没有什么可做的！

不，该服务每 30 秒运行一次……但处理器的事情每小时只发生大约 3 次。根据我收到的图表，它也比较规律。

我怀疑连接到邮件服务器时发生了一些事情，但我需要证明那是处理器被挂钩的时候。

唯一的问题是我不知道如何证明当我遇到特定代码时它正在发生......

# php - 在 laravel 中创建可链接的方法

> ID：15070809
> 
> 赞同：6
> 
> 时间：2013-02-25T15:48:52.070
> 
> 标签：php, laravel, eloquent

我一直在尝试在 laravel 的 eloquent 中创建自己的可链接方法，但我遗漏了一些东西，但不确定是什么。这可能听起来有点疯狂，但请查看下面的函数以更好地了解我想说的内容。

```
class Post extends Eloquent{
    public static function custom_wh($data){
        return static::where_in('categories_id', $data, 'AND');
    }
}

//this works fine
$posts = Post::custom_wh(array(1, 2, 3))->get();

//but this says custom_wh is not defined in the query class
$posts = Post::where_in('tags', array(2, 3, 4), 'AND')->custom_wh(array(1, 2, 3))->get(); 
```

如果我理解正确，那么我的方法没有资格链接另一种方法？所以我想我的问题是如何在我的模型中创建一个可链接的方法？

PS 我查看了 laravel 的查询构建器类，在其中我看到可链接的方法返回该对象的实例，但除了我在上面的代码中完成的方式之外，我找不到返回对象的方法。任何形式的建议或建议都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-14T09:53:58.983

你可以在 Laravel 中使用“查询范围”来做到这一点。[你可以在这里](http://laravel.com/docs/eloquent#query-scopes)找到文档。

您只需要编写一个带有前缀的函数，`scope`您就可以像其他查询构建器一样链接此方法：

```
class Post extends Eloquent {

    public function scopeWhereCategories($query, $categories)
    {
        return $query->whereIn('categories_id', $categories, 'AND');
    }

}

$posts = Post::whereCategories([1, 2, 3])->get();
$posts = Post::orderBy('date')->whereCategories([1, 2, 3])->take(5)->get(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-03T05:29:00.767

好的...这可能会使您的大脑有些扭曲，但请坚持下去。实际定义的方法是_where()。那么 Post::where 和 $post->where 最终是如何调用 _where() 方法的呢？答案是“魔法”。:D

PHP 有这些称为“魔术方法”的东西，它们可以实现一些非常动态的行为。在这种情况下，Laravel 使用 __callStatic() 和 __call() 来处理对未定义方法的调用。这使得可以静态和非静态调用相同的方法。

```
public static function __callStatic($method, $parameters)
{
    // Create a new instance of the called class, in this case it is Post
    $model = get_called_class();

    // Call the requested method on the newly created object
    return call_user_func_array(array(new $model, $method), $parameters);
} 
```

所以基本上 Post::where() 只是 $post = new Post; 的简写。$post->where()

从这里请求转到 __call() ，其中有一组带下划线的方法名称。如果请求的方法在下划线名称列表中，则调用并返回 $this->_method()。

但这还不是全部。Drew 是正确的，因为 'where_in' 返回一个 Query 对象。您熟悉的大多数 ORM 链接方法实际上都是 ORM 查询对象的一部分。这是整个过程。

*   发布::哪里（...）
*   Post::__callStatic('where', ... )
*   $post->__call('where', ... )
*   $query->_call('where', ... )
*   $query->_where( ... )

您要扩展的类是模型使用的查询。无法在 __call() 中定义的下划线方法列表中添加另一个方法名称。您必须将 __call() 完整地复制到您的 Query 定义中，以使您的新方法具有该行为。

我在我的项目中实现了这一点，将 Eloquent（Laravel 模型的别名）指向我的扩展版本，使我的所有模型都可以使用扩展的 Query 方法。

```
// application/libraries/mylib/query.php
namespace MyLib;

class Model extends \Laravel\Model {

    // Tell \MyLib\Model to use \MyLib\Query instead of Laravels Query
    protected function query()
    { 
        return new \MyLib\Query($this);
    } 

}

// application/libraries/mylib/query.php
namespace MyLib;

class Query extends \Laravel\Database\Eloquent\Query {

    function _my_method() { ... }

    function __call() { ... }
}

// application/config/application.php
'aliases' => array(
    ...
    'Eloquent' => 'MyLib\\Model',
    ...
) 
```

[http://php.net/manual/en/language.oop5.magic.php](http://php.net/manual/en/language.oop5.magic.php) [https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/model.php#L734](https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/model.php#L734) [https:// github.com/laravel/laravel/blob/master/laravel/database/eloquent/query.php#L274](https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/query.php#L274)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:56:35.940

不确定我是否准确，但这是我快速想到的......

Post::where_in() 没有返回 Eloquent 模型，而是返回 Query 类型的对象。

对于您编写自定义函数的简单程度，我会避免使用该函数

```
$posts = Post::where_in('tags', array(2, 3, 4))->where_in('categories_ids', array(1,2,3))->get(); 
```

从我的头顶

你可以尝试类似的东西

```
class Post extends Eloquent {
    public static function custom_wh($data=array()) {
        return static::where_in('categories_id', $data);
        // return type of query not eloquent
    }
}

$posts = Post::custom_wh(array(1,2,3))->where_in('tags', array(2, 3, 4))->get(); 
```

除非你想改变查询类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T04:48:51.227

您是否尝试过使用“自我”而不是“静态”？据我所知，如果您使用 self 和属性/方法，并且您的子类和您所指的方法不会覆盖主类属性/方法，它将返回，在这种情况下，方法 'where_in ' 查询类。然后您将能够链接您的自定义方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-07T06:52:22.347

实际上，您可以轻松扩展 eloquent builder 并运行：

```
$posts = Post::custom_wh(array(1, 2, 3))->get(); 
```

您在我的回答中有说明：[Laravel 自定义模型方法](https://stackoverflow.com/questions/23658479/laravel-custom-model-methods/51720169)

另外，不要为此使用范围，除非您现在确切地在做什么，这在我的回答中也得到了澄清。

# php - PHP 图像显示

> ID：15070813
> 
> 赞同：0
> 
> 时间：2013-02-25T15:49:18.673
> 
> 标签：php, image

我有这个脚本：

```
 <?php 
                $count = 0;
        foreach(glob("images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image)
        while ($image)
        {
            if($count==3)
            {
               print "</tr>";
               $count = 0;
            }
            if($count==0)
               print "<tr>";
               print "<td>";
            ?>
               <img src="<?php echo $image;?>" width="80" height="80"/>
                <?php
            $count++;
            print "</td>";
        }
        if($count>0)
           print "</tr>";
        ?> 
```

它应该从文件夹中获取图像（在本例中为“图像”）并连续显示 3 张。但它显示一张图片 1000000 次。我能做些什么来解决这个问题？我试图修复它，我只知道问题出在“while”行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:52:53.523

尝试删除线

```
while($image) 
```

请注意，该行

```
foreach(glob("images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image) 
```

已经沿着图像循环，当目录中没有更多图像时将完成。

我稍微清理了代码：

```
<?php 
    $count = 0;
    foreach(glob("images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image)
    {
        if($count==3)
        {
           print "</tr>";
           $count = 0;
        }
        if($count==0)
           print "<tr>";

        print "<td>";
        print "<img src=$image width=\"80\" height=\"80\"/>";
        print "</td>";
        $count++;
    }
    print "</tr>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:53:00.273

问题是`$image`在while循环期间不会改变。因此，您在您的内部创建了一个无限循环，`foreach`因为`$image`继续评估为真。

while 循环在您的代码中是不必要的，可以删除。`foreach`您已经使用您的语句遍历图像。

确保将所有`foreach`逻辑包装在花括号中，如下所示：

```
foreach(glob("images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image)
{
    if($count==3)
    {
       print "</tr>";
       $count = 0;
    }
    if($count==0)
       print "<tr>";
       print "<td>";
    ?>
       <img src="<?php echo $image;?>" width="80" height="80"/>
    <?php
    $count++;
    print "</td>";
}
if($count>0)
   print "</tr>"; 
```

否则它只会循环下一行直接的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:54:42.243

你的逻辑似乎很糟糕`while`。您是说`while $image exists`执行以下操作。那么`$image`不会改变，这将导致`while`永远继续。当脚本到达`max_execution_time`.

您当前的代码旨在重复图像。如果您不想这样做，则必须`while`删除`foreach`.

另请注意，由于您没有大括号，因此只有`while`将在中执行，`foreach`并且该`if`语句将在完成后执行一次。如果不重复，请使用大括号`foreach`来确保一切都在您想要的时候运行。

像这样：

```
foreach(glob("images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image)
{
        if($count==3)
        {
           print "</tr>";
           $count = 0;
        }
        if($count==0)
           print "<tr>";
        print "<td>";
        ?>
        <img src="<?php echo $image;?>" width="80" height="80"/>
        <?php
        $count++;
        print "</td>";
}
if($count > 0)
    print "</tr>"; 
```

# python - 使用python的正则表达式不起作用

> ID：15070815
> 
> 赞同：1
> 
> 时间：2013-02-25T15:49:27.227
> 
> 标签：python, regex, python-2.7

```
import re
sum=0
file = open("pro.txt").readlines()
for lines in file:
        word= len(re.findall('(^|[^\w\-])able#1(?=([^\w\-]|$))', lines))
        if word>0:
                sum=sum+1
print sum 
```

我正在计算文本文件中的单词数，但我的程序也计算了一些我们不需要的单词，我在其中使用了 re，但它没有给我任何适当的帮助这是我的文本文件

```
0         6          9     able#1
0         11         34    unable#1
9         12         22    able#1
0         6          9     able#1-able#1
0         11         34    unable#1*able#1 
```

我不想让我的程序计算，`-able#1 ,able#1-able#1 ,unable#1*able#1`这些类型的词，我应该只计算`able#1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:24:10.303

您可以使用`\sable#1\s*$`前面需要一个空格`able`并在行尾允许零个或多个空格（仅此而已）的正则表达式。

```
import re
regex = re.compile(r'\sable#1\s*$')
count = 0
with open("pro.txt") as file:
    for line in file:
        if regex.search(line):
            count += 1
print count 
```

你也可以用`sum()`一个像这样的生成器表达式来计数：

```
with open("pro.txt") as file:
    count = sum(1 for line in file if regex.search(line)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:11:35.787

```
[^\W]*able#1\W 
```

[^\W]* 表达式表示匹配零个或多个非字母数字字符因此它不会关心“unable”中的“un”！

我会这样写正则表达式

```
if re.search('\s+[-_]*able#\S*',lines): 
```

`\s+`是任何非零数量的空白 `\S*`是任何数量的空白，包括零

编辑：更改后期要求更改以匹配“_able#”和“-able#”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:07:02.920

如果您只对计算完整单词感兴趣，可以这样做：

```
re.findall('(?:\W|\A)able#1(?=\W|\Z)', line) 
```

将`(?:\W|\A)`匹配开头`line`或不类似于单词的内容（即`[0-9a-z_]`）。

同样，是对结尾或不像单词的东西的`(?=\W|\Z)`前瞻断言。`line`

# selenium - Phing 在 PHPUnit 配置中避免 Selenium 浏览器设置

> ID：15070823
> 
> 赞同：1
> 
> 时间：2013-02-25T15:49:43.130
> 
> 标签：selenium, phpunit, phing

我设置了一个带有两个目标的 phing 项目：第一个运行`phpunit`包含 selenium 服务器的测试用例，第二个使用`phpunitreport`任务生成 phpunit 测试报告。

phpunit 任务被配置为使用一个名为“”的外部配置文件`phpunit-config.xml`。此配置 XML 文件有一个`<selenium />`标签，其中定义了两个浏览器。此浏览器设置未被处理，因此我从 Selenium RC 服务器收到异常：“ `Browser not supported:`” - 请注意此处的空浏览器名称。

如果我直接从命令行使用相同的配置 XML 文件运行 phpunit，一切都会按预期工作。

phing-build.xml：

```
<project name="test-and-report" default="gen-report" basedir=".">

<target name="gen-report" depends="run-tests" >
    <phpunitreport infile="report-junit.xml" format="frames" todir="report-phing" styledir="xsl/">
    </phpunitreport>
</target>

<target name="run-tests">
    <phpunit configuration="phpunit-config.xml">
        <formatter type="xml" outfile="report-junit.xml"></formatter>
        <batchtest>
            <fileset dir="functional">
                <include name="functional/**/*Test.php" />
            </fileset>
        </batchtest>
    </phpunit>
</target> 
```

phpunit-config.xml：

```
<phpunit bootstrap="bootstrap.php"
    colors="false"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true"
    convertWarningsToExceptions="true"
    stopOnFailure="false">

<selenium>
    <browser name="Internet Explorer" browser="*iexplore" />
    <browser name="Firefox" browser="*firefox" />
</selenium>

</phpunit> 
```

不工作场景：

```
phing -buildfile phing-build.xml 
```

工作场景：

```
phpunit --configuration phpunit-config.xml functional\ 
```

在不工作的情况下，我从 Selenium RC 服务器收到以下错误消息：

```
16:31:43.746 INFO - Command request: getNewBrowserSession[, http://localhost:8001 /index-test.php/] on session null
16:31:43.746 INFO - creating new remote session
16:31:43.746 INFO - Got result: Failed to start new browser session: java.lang.RuntimeException: Browser not supported:
(Did you forget to add a *?)

Supported browsers include:
 *firefox
 *mock
 *firefoxproxy
 <cutted here> 
```

有什么建议么？

我还为此提出了一张票：[http ://www.phing.info/trac/ticket/983](http://www.phing.info/trac/ticket/983)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T05:38:59.240

对于好奇的人，票中的讨论解决了这个问题：

> 感谢您的报告！我们的 phpunit 任务还不支持该标签，所以我将把它标记为增强，而不是缺陷 :)

# windows - 使用 Win32 API 绘制文本时如何覆盖 ClearType 设置？

> ID：15070824
> 
> 赞同：8
> 
> 时间：2013-02-25T15:49:43.807
> 
> 标签：windows, delphi, winapi, delphi-2006

我编写了一个小应用程序，它在内存图像上绘制文本并将它们写入文件。基本的 Delphi 代码类似于：

```
var
   Canvas : tCanvas;
   Text : WideString;
   TextRect : tRect;
begin
   Canvas := Bitmap.Canvas;
   Canvas.Brush.Color := clBlack;
   Canvas.Pen.Color := clBlack;
   Canvas.Font.Name := 'Courier New';
   Canvas.Font.Size := 11;
   Canvas.Font.Color := clWhite;

   TextRect := ...;  // calculate text position
   DrawTextW(Canvas.Handle, PWideChar(Text), Length(Text), TextRect, DT_NOCLIP or DT_NOPREFIX or DT_SINGLELINE or DT_CENTER or DT_VCENTER);
end; 
```

不幸的是，根据运行应用程序的计算机的 ClearType 设置，绘制的文本会有所不同。无论本地 ClearType 设置如何，我都希望在我的应用程序中获得一致的输出（无论如何，输出都不会直接显示到屏幕上）。是否有一些 Win32 API 选项可以覆盖本地 ClearType 设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T15:56:14.007

文本的字体平滑由您在设备中选择的字体决定。要了解原始 Win32 界面提供的选项，请阅读[`LOGFONT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145037.aspx)文档。

在 Delphi 中，底层的 Win32 API 字体 API 由`TFont`类封装。与这个问题相关的性质是[`Quality`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TFont.Quality)。默认值是`fqDefault`使用系统范围的字体平滑设置。您想设置`Quality`为`fqAntialiased`或`fqNonAntialiased`。

旧版本的 Delphi 没有这个属性。在这种情况下，您将需要调用`CreateFontIndirect`以创建`HFONT`具有所需质量设置的。您可以在开始绘制文本之前立即调用[此函数：](https://stackoverflow.com/questions/3716304/is-there-a-way-to-disable-font-anti-aliasing-when-using-textrect-aka-exttextout/3717053#3717053)

```
procedure SetFontQuality(Font: TFont; Quality: Byte);
var
  LogFont: TLogFont;
begin
  if GetObject(Font.Handle, SizeOf(TLogFont), @LogFont) = 0 then
    RaiseLastOSError;
  LogFont.lfQuality := Quality;
  Font.Handle := CreateFontIndirect(LogFont);
end; 
```

通过`NONANTIALIASED_QUALITY`或`ANTIALIASED_QUALITY`根据您的需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T15:55:10.510

我相信您可以创建一种不使用任何 ClearType 的新逻辑字体。确保将`NONANTIALIASED_QUALITY`标志作为`fdwQuality`参数传递[`CreateFont`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183499%28v=vs.85%29.aspx)：

> 字体从不抗锯齿，即不进行字体平滑。

# filter - 检查文本、音频和图片是否存在不当内容的解决方案

> ID：15070829
> 
> 赞同：0
> 
> 时间：2013-02-25T15:49:57.857
> 
> 标签：filter

我正在开展一个项目，我希望在检测到不当内容（脏话、成人内容等）时收到通知。

虽然我主要希望它用于文本数据，但我也会对音频文件感兴趣。

这显然是一个商业解决方案，但我找不到任何提供这些功能的东西。

它应该支持某种形式的集成（如果是托管的 API，或者是“引擎”sdk）。

这真的不存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T06:05:09.360

你能写一个 Jquery 或 JS 在页面加载后过滤掉这些单词吗？这是一个简单的“ `regexp`”（查找/替换），您可以用星号`***`或其他东西替换单词，或者只是将它们变白。

如果您可以在服务器端执行此操作，例如在保存来自用户的评论时，则可以更好地在服务器端实现正则表达式。

# php - 可以链接比较运算符吗？

> ID：15070831
> 
> 赞同：6
> 
> 时间：2013-02-25T15:49:59.480
> 
> 标签：php, comparison-operators

到目前为止，我一直无法在官方 PHP 文档或此站点上找到此信息。因此，这可能意味着我正在使用错误的术语进行搜索，或者它不受支持。我在找什么？我会描述它...

假设我在 PHP 中有以下比较：

```
if (($a == $b) && ($b == $c))
    doSomething();
else
    doSomethingElse();

if (($d < $e) && ($e < $f))
    doSomething();
else
    doSomethingElse(); 
```

PHP 是否有某种语法将比较链接在一起，而无需两个不同比较的显式 AND-ing？例如，这样的事情是否可能：

```
if ($a == $b == $c)
    doSomething();
else
    doSomethingElse();

if ($d < $e < $f)
    doSomething();
else
    doSomethingElse(); 
```

请注意，我正在寻找该语言的句法速记。我知道我可以轻松地为这些链式比较中的每一个编写一个函数，但这是一个笨拙的解决方法，而不是理想的。例如：

```
function chainedGreaterThan($args)
{
    for ($i = 0; $i < count($args) - 1; $i++)
        if ($args[$i] <= $args[$i + 1])
            return false;
    return true;
} 
```

这在技术上是可行的，但不是语言给出的句法简写。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:53:09.350

不，PHP 没有这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:02:20.423

当你有大量的东西要比较时，你可能会做这样可怕的事情。

```
<?php
$arr = [1, 2, 3];
$less_than = function($a, $b) {
    return $a < $b;
};
$greater_than = function($a, $b) {
    return $a > $b;
};

function apply_operator($arr, $operator) {
    for ($i = 0; $i < sizeof($arr) - 1; $i++) {
        if (!$operator($arr[$i], $arr[$i + 1])) {
            return false;
        }
    }
    return true;
}

var_dump(apply_operator($arr, $less_than)); // true
var_dump(apply_operator($arr, $greater_than)); // false 
```

但是对于大于/小于，您可以对原始文件进行排序和比较，对于相等，您可以检查`array_unique`.

# c# - 发送多条消息时出现 SocketException（代码 10048）

> ID：15070834
> 
> 赞同：3
> 
> 时间：2013-02-25T15:50:03.590
> 
> 标签：c#, wcf, sockets, azure, tcp

我正在使用 cloudQueue.BeginAddMessage 和 EndAddMessage 发送许多消息。我将尚未返回的开始数量限制为 500。但我遇到了代码 10048 的异常（表示套接字耗尽）。

`Microsoft.WindowsAzure.Storage.StorageException: Unable to connect to the remote server ---> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: Only one usage of each socket address (protocol/network address/port) is normally permitted`

我在搜索后发现的解决方案都建议修改注册表，但是由于这是在 Azure 中的工作角色中计划的，所以我不能这样做。

我还有其他插入表服务的功能，它们运行速度一样快，但没有任何问题。似乎 EndAddMessage 函数几乎没有关闭连接或其他东西（我对套接字的了解有限）。

**我的问题：这里有天蓝色的错误吗？除了人为地减慢消息的添加速度之外，我应该怎么做才能解决这个问题？**

这是我用来发送消息的测试功能。在我的例子中，在添加了大约 16500 条消息并且回调正确且稳定地结束后，它变慢了，过了一会儿抛出了上述异常。

对于长代码，我很抱歉，但这应该是复制粘贴，以便您重现问题。

异常从`AsyncCallback endAddCallback`.

```
 static void Main()
    {
        Console.SetBufferSize(205, Int16.MaxValue - 1);

        // Set the maximum number of concurrent connections (12*6 in my case)
        ServicePointManager.DefaultConnectionLimit = 12 * Environment.ProcessorCount;
        //setting UseNagleAlgorithm to true reduces network traffic by buffering small packets of data and transmitting them as a single packet, but setting to false can significantly reduce latencies for small packets.
        ServicePointManager.UseNagleAlgorithm = false;
        //if true, "Expect: 100-continue" header is sent to ensure a call can be made. This uses an entire roundtrip to the service point (azure), so setting to false sends the call directly.
        ServicePointManager.Expect100Continue = false;

        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(__CONN_STRING);
        CloudQueueClient client = storageAccount.CreateCloudQueueClient();
        CloudQueue queue = client.GetQueueReference(__QUEUE_NAME);
        queue.CreateIfNotExists();
        List<Guid> ids = new List<Guid>();
        for (Int32 i = 0; i < 40000; i++)
            ids.Add(Guid.NewGuid());

        SendMessages(queue, ids.Select(id => new CloudQueueMessage(id.ToString())).ToList().AsReadOnly());
    }

    public static void SendMessages(CloudQueue queue, IReadOnlyCollection<CloudQueueMessage> messages)
    {
        List<CloudQueueMessage> toSend = messages.ToList();
        Object exceptionSync = new Object();
        Exception exception = null;
        CountdownEvent cde = new CountdownEvent(toSend.Count);
        AsyncCallback endAddCallback = asyncResult =>
        {
            Int32 endedItem = (Int32)asyncResult.AsyncState;
            try
            {
                queue.EndAddMessage(asyncResult);
                Console.WriteLine("SendMessages: Ended\t\t{0}\t/{1}", endedItem + 1, toSend.Count);
            }
            catch (Exception e)
            {
                Console.WriteLine("SendMessages: Error adding {0}/{1} to queue: \n{2}", endedItem + 1, toSend.Count, e);
                lock (exceptionSync)
                {
                    if (exception == null)
                        exception = e;
                }
            }
            finally { cde.Signal(); }
        };

        for (Int32 i = 0; i < toSend.Count; i++)
        {
            lock (exceptionSync)
            {
                if (exception != null)
                    throw exception;
            }
            //if number of added but not ended is larger than the MAX, yield and check again.
            while (true)
            {
                Int32 currentOngoing = (i- (cde.InitialCount - cde.CurrentCount));
                if (currentOngoing > 500)
                    Thread.Sleep(5);
                else
                    break;
            }
            Console.WriteLine("SendMessages: Beginning\t{0}\t/{1}", i + 1, toSend.Count);
            queue.BeginAddMessage(toSend[i], endAddCallback, i);
        }

        cde.Wait();
        if (exception != null)
            throw exception;
        Console.WriteLine("SendMessages: Done.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:59:39.417

Cloud[Blob|Table|Queue]Client 不维护状态，可以跨多个对象使用。

此问题与 ServicePointManager 过载有关。队列压力场景往往会加剧这种行为，因为它们执行许多小请求（在您的情况下是一个非常小的 guid）。您可以采取一些缓解措施来缓解此问题

*   Nagle 算法旨在通过在 tcp 层将小请求批处理在一起来帮助解决这种情况，将其设置为 true 在某些情况下可能会略微增加每条消息的延迟，但在压力下这很可能可以忽略不计，因为请求不需要等待长于大于 nagle 正在寻找的窗口（1400 字节）
*   增加 ServicePointManager.DefaultConnectionLimit 以考虑快速打开和关闭套接字。
*   您能否提供有关代码运行位置的更多信息，以及在运行时是否有任何其他代码使用连接。默认情况下，客户端请求发送 keep alive = true，这应该保持与 Azure 服务的持久连接，并允许多个请求使用同一个套接字，而无需打开/关闭/重新连接。

此外，关于您对未显示相同行为的表实体的评论，表服务支持的当前有线协议是 Atom/Pub，它可能非常健谈（xml 等）。因此，一个简单的实体插入比一个简单的队列 guid 消息大得多。基本上由于大小差异，表流量在利用其下方的 TCP 层时做得更好，因此这不是真正的苹果对苹果的比较。

如果这些解决方案对您不起作用，获取更多有关您帐户的信息会很有帮助，以便我们在后端查看。

乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:30:54.503

我怀疑这是因为 CloudQueueClient 并不意味着您正在执行多线程（异步）访问。

`SendMessages`尝试像这样重新创建 CloudQueue

```
 CloudQueueClient client = storageAccount.CreateCloudQueueClient();
    CloudQueue queue = client.GetQueueReference(__QUEUE_NAME); 
```

我在许多论坛中读到 CloudXXClient 只需要使用一次即可处理。该校长可能适用于此。

由于客户端的ctor不会向队列发送请求并且存在线程问题，因此效率不会很高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:16:18.437

现在已在 Storage Client Library 2.0.5.1 中解决了这个问题。

或者，还有一种解决方法：卸载 KB2750149。

# ms-office - 在 Word 中获取自定义文档信息面板元数据

> ID：15070837
> 
> 赞同：0
> 
> 时间：2013-02-25T15:50:15.487
> 
> 标签：ms-office, infopath, infopath2010, office-2010

我使用 InfoPath 创建了一个自定义 DIP，XML 是手动生成的，因为它们没有可用的 SharePoint 文档库。首先创建 DIP，方法是将基本 XML 结构创建为空白 InfoPath 模板，然后重新导入生成的 XML 以创建 DIP。

DIP 正确显示在 word 文档中，但是我找不到在 word 文档中使用来自 DIP 的自定义数据的方法。自定义字段不会出现在快速链接下的字段中，我也不能手动引用这些字段。

任何帮助将不胜感激。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T07:41:03.900

第 1 步：设计一个 XML 来存储您的所有信息。第 2 步：将此 XML 添加为 customXMLPart（例如，使用宏：activeDocument.CustomXMLParts.Add(xmlString)） 第 3 步：在您的 Word 文档中插入一些内容控件 第 4 步：使用 XPath 表达式将内容控件映射到您的 customXML 部分。（例如 activedocument.contentcontrols(1).XMLMapping.SetMapping "myxpath-expression" 第 5 步：使用您之前设计的 XML 在 InfoPath 中创建 DIP 第 6 步：在 Word 中表明您希望新的 .xsn 文件作为 DIP

然后 DIP 将能够管理文档中的 CustomXML。由于 XML 直接映射到内容控件，通过 DIP 编辑信息将立即更改内容控件中的信息。

希望这可以帮助。也许不是为了原始海报，而是为了以后会发现这个的人。

# asp.net - ScrewTurn Wiki 活动目录支持

> ID：15070839
> 
> 赞同：2
> 
> 时间：2013-02-25T15:50:21.583
> 
> 标签：asp.net, screwturn

## 环境

*   ScrewTurn Wiki（最新的稳定版本）
*   视窗 7 x64
*   IIS 7

**在我们配置服务器时，wiki 当前安装在我的开发箱上。**

## 配置

```
GroupMap=ABC GROUP:Administrators 
```

**事实上，这*两个*词看起来很像。**

所以我安装了ScrewTurn Wiki 以及普遍接受的[Active Directory Provider](http://www.screwturn.eu/Customize.Active-Directory-Provider.ashx)。上周一切都很顺利。当域组中存在的新用户访问该站点时，会在正确的组中创建并设置一个新的 STW 用户。此外，当***我***点击该站点时，它使用我的 AD 凭据登录了我。

**但是，当我今天访问该站点时，它并没有使用我的 AD 凭据登录。**

*雪上加霜的是，我的同龄人使用他们的 AD 凭据登录就好了。*

`Error`我通过列中所说的管理控制台查看了插件`Update Status`。这会导致我的问题吗？

**难道是它在我的开发盒上运行？这没有任何意义，因为它上周还在工作——但值得一问。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:40:05.157

希望如果有人遇到这个 - 这会有所帮助。问题是 STW 创建了一个实际用户。我知道这种情况是不言而喻的——但就我而言，我也在登录和注销`admin`以管理我盒子上的其他一些东西。

因此，它没有将登录用户缓存为我的 AD 用户。当我通过登录屏幕使用我的 AD 用户名和密码登录时，它利用了 AD 身份验证并按预期登录了我。但实际上我确实必须手动登录。

# http - 是否可以在没有请求的情况下将信息从 Web 服务器发送到客户端？

> ID：15070841
> 
> 赞同：0
> 
> 时间：2013-02-25T15:50:24.247
> 
> 标签：http

HTTP 是一种请求-回复类型的协议。是否可以在没有客户端明确提出请求的情况下将信息从服务器发送到客户端？如果可能，那么客户如何*收听*该信息？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:52:51.457

是的，有办法。它称为websockets。

在这里寻找一些很好的例子：

[http://www.websocket.org/demos.html](http://www.websocket.org/demos.html)

# facebook - 实时用户朋友更新：新朋友

> ID：15070843
> 
> 赞同：1
> 
> 时间：2013-02-25T15:50:29.873
> 
> 标签：facebook, facebook-graph-api, real-time

不幸的是，facebook 实时 api 只通知应用程序用户的朋友连接发生了*变化*。

我该怎么做才能确定*UserA*刚刚与*UserX*成为朋友？

目前，每当我收到来自 facebook 实时 api的*UserA 的朋友已更改*`/UserA/friends.json`通知时，我都会收到整个结果，通过整个结果进行分页以确定自上次以来添加的内容。

虽然这可行，但感觉在计算周期中有很多浪费，我想知道是否有更优雅的方法来解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:23:16.117

这就是它的设计方式，没有“解决方案”。

> 请注意，这**不包括实际数据值**（更新之前或之后的数据）。要获得这些，您的应用**可以正常请求** 它们，但要遵守通常的隐私限制。对于您可以随时访问的数据，您可能希望在此回调之后立即查询该数据，以便在用户返回您的应用程序时准备好。

来源：[https ://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

这很有意义，因为 Facebook 能够在不知道您是否具有获取新数据的适当权限的情况下向您发送所有更新，因此在隐私方面是一种非常简单的方法。

**如果您有一个有效的用户令牌**（在您的数据库中），您可以通过 Graph API / FQL 检索更新的字段，并将其与数据库中的数据进行比较。如果没有实时 API，您需要每 x 小时/天提取一次数据，这更加浪费资源。

**如果您没有有效的用户令牌**，您可以在用户返回您的应用程序时通过 Graph API / FQL 检索更新的字段，并将其与数据库中的数据进行比较。如果没有实时 API，您总是需要在用户回来时更新/检查数据。

# javascript - Onclick 在下面的 div 中显示颜色

> ID：15070845
> 
> 赞同：1
> 
> 时间：2013-02-25T15:50:40.440
> 
> 标签：javascript, jquery, html, background

我有一个颜色列表，在我的页面上显示在一个 50 像素的方框中。

我想做的是能够单击任何颜色框，然后它将在下面的 div 中显示单击的颜色。

```
<div style="background:#000000; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#c9c9c9; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#737373; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#424242; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#184880; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#3485bf; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#9ad8e6; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#006891; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#0f6769; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#009687; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#79c7c2; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#72b88a; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#669100; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#b5cf8c; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#74750e; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#c7c25f; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#faeb69; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#ffffa8; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#ffc824; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#f5652c; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#f0ab5d; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#e36b10; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#bd3a0f; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#996751; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#78502a; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#c2ae97; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#f4f4f4; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#a31d20; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#d4536c; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#e0d1dc; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#513d7a; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#9178ad; width:50px; height:50px; float: left; margin:4px"></div>
<div style="background:#d6cee0; width:50px; height:50px; float: left; margin:4px"></div> 
```

然后当单击其中一种颜色时，它将显示在下面

```
<div id="result"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:54:52.780

试试下面的代码：

```
$("div[style]").click(function(){
    $("#result").css("background-color",$(this).css("background-color"));

}) 
```

jsFiddle 的链接[http://jsfiddle.net/ACaX9/](http://jsfiddle.net/ACaX9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:55:04.420

你可以轻松做到。
在每个 div 中插入一个类，如下所示：

```
<div class="clickme" style="background:#000000; width:50px; height:50px; float: left; margin:4px"></div> 
```

在 jquery 中，您可以执行以下操作：

```
 $(document).ready(){
       $('.clickme').click(function(){
      $('#result').html( rgb2hex($(this).css('background-color')));
   });

function rgb2hex(rgb) {
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
}
    }); 
```

[演示](http://jsfiddle.net/aV2RA/3/)

# javascript - 3个转换，转换之间的暂停时间

> ID：15070848
> 
> 赞同：1
> 
> 时间：2013-02-25T15:50:48.563
> 
> 标签：javascript, jquery, jquery-cycle, jcycle

我想获得：

淡出 1° 图像 -> 淡入 1° 图像 -> 等待 2 秒 -> 淡出 2° 图像 -> 淡入 2° 图像 -> 等待 2 秒 -> 淡出 3° 图像 -> 淡入 3° 图像 -> 等待 2 秒 - >淡出1°图像......

这是代码：

```
<div class="container">
<img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" />
<img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" />
<img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00001.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00002.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00003.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00004.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00005.jpg" />
<img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00006.jpg" />
</div> 
```

JS：

```
var numberOfGroups = 3;
var arrayOfArray = new Array(numberOfGroups);
for(var i = 0; i < numberOfGroups; i++)
{
    arrayOfArray[i] = new Array();
}
var imagesElements = $('.container').children();
imagesElements.each(function(localIndex){
    //partiziono le immagini in insiemi in base all'ordine in cui le trova in partenza
    arrayOfArray[localIndex % numberOfGroups].push(imagesElements[localIndex]);
});
$('.container').empty();
for(var j = 0; j < arrayOfArray.length; j++)
{
    //crea un nuovo div contenitore contenente le immagini come sono nell'array 2-dimensioni creato
    var newDivContainer = document.createElement('div');
    newDivContainer.setAttribute('id', 'block_'+j);
    for(var k = 0; k < arrayOfArray[j].length; k++)
    {
        newDivContainer.appendChild(arrayOfArray[j][k]);
    }

    $('.container').append(newDivContainer);
}

var newGroups = $('.container').children();
newGroups.each(function(thisIndex){
    $(newGroups[thisIndex]).cycle({
        fx:     'fade',
        delay: 2000,
        speed: 2000,
        //continuous: 1,
        timeout: 2000*numberOfGroups,
        //sync: 0,
        after: function(){
            var x = '#block_'+((thisIndex+1) % numberOfGroups);
            change(x);
            //window.setTimeout(change, 4000, x);
        }
    });
});

function change(what)
{
    jQuery(what).cycle("next");
} 
```

JSFIDDLE：http: [//jsfiddle.net/linuxatico/5e7X7/](http://jsfiddle.net/linuxatico/5e7X7/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:06:40.033

您真正需要做的就是适当地设置延迟和超时选项。您可以使用每个组的索引来增加初始延迟选项，然后从中减去总动画时间，以便您的动画立即开始。例子：

```
var animationDelay = 4000*numberOfGroups - 2000; 
$("#test").cycle({ 
    delay: (4000 * thisIndex) - animationDelay,
    speed: 2000,
    timeout: animationDelay
}); 
```

为您更新了小提琴，应该是您正在寻找的：http: [//jsfiddle.net/5e7X7/3/](http://jsfiddle.net/5e7X7/3/)

# spring - Spring GWT 集成

> ID：15070851
> 
> 赞同：1
> 
> 时间：2013-02-25T15:50:54.073
> 
> 标签：spring, gwt, servlets, service, rpc

我正在使用 GWT 和 Spring 集成为控制台编写代码。我已经按照 GWT 教程阅读了一些关于如何使用 spring qith GWT 的论坛。

我现在 RPC 调用返回 null，我似乎不明白为什么。由于英语不是我的母语，而且我对此很陌生，所以我只是将我的代码放在这里，看看是否有人可以帮助我。

服务：

```
@RemoteServiceRelativePath("GestionUserService")
public interface GestionUserService extends RemoteService {
    Collection<Usuario> dameTablaUsuarios(String entidad);

} 
```

异步：

```
public interface GestionUserServiceAsync {
    void dameTablaUsuarios(String entidad,AsyncCallback<Collection<Usuario>> callback);

} 
```

实施：

```
@SuppressWarnings("serial")
@Service("GestionUserService")
public class GestionUsersConsultImpl extends RemoteServiceServlet implements GestionUserService {

@Autowired
UserConsoleDBUtil utilDB;
Logger logger = Logger.getLogger(GestionUsersConsultImpl.class);

@SuppressWarnings("unchecked")
public Collection<Usuario> dameTablaUsuarios(String entidad) {
    GWT.log("Log");
    logger.info("He llegado al IMPL dameTablaUsuarios.======================="+entidad);
    logger.info("UtilDB "+utilDB.toString());
    return utilDB.getDao().getUsuarios(entidad);
} 
```

}

*gwt.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='userConsole'>
    <!-- Inherit the core Web Toolkit stuff. -->
    <inherits name='com.google.gwt.user.User' />

    <!-- Compilar solamente para Firefox -->
    <!--<set-property name="user.agent" value="gecko1_8"></set-property> -->

    <inherits name='com.google.gwt.user.theme.standard.Standard' />
    <inherits name="com.google.gwt.i18n.I18N" />

    <!-- Specify the app entry point class. -->
    <entry-point class='com.santander.bam.comun.userconsole.client.GestionUsers' />

    <!-- English language, independent of country -->
    <extend-property name="locale" values="es_ES" />
    <extend-property name="locale" values="en_US" />
    <extend-property name="locale" values="de_DE" />

    <!-- Specify the application specific style sheet. -->
    <stylesheet src='UserConsole.css' />

    <!-- Specify the paths for translatable code -->
    <source path='client' />
    <source path='client/services' />
    <source path='db/bean' />
</module> 
```

应用程序上下文.xml：

```
<beans>

    <!-- Activates scanning of @Autowired -->
    <context:annotation-config />   
    <context:component-scan base-package="com.santander.bam.comun.userconsole" />

    <!--  FIN Agregado de la consola gwt-spring -->

    <import resource="config.xml" />

    <util:constant id="VARCHAR" static-field="java.sql.Types.VARCHAR" />

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="myDataSource"/>
    </bean>

    <bean id="GestionUserService" class="com.santander.bam.comun.userconsole.server.GestionUsersConsultImpl"></bean>

    <bean id="utilDB" class="com.santander.bam.comun.userconsole.db.UserConsoleDBUtil">
        <property name="dao" ref="UserConsoleDAO" />
        <property name="transactionManager" ref="transactionManager"/>
    </bean>

</beans> 
```

配置文件

```
<beans >

    <bean id="UserConsoleDAO" class="com.santander.bam.comun.userconsole.db.UserConsoleDAO">
        <property name="dataSource" ref="myDataSource" />

        <!-- Definicion de consultas -->
        <property name="sqlUsuarios"
            value=" SELECT DISTINCT (IDUSER) IDUser,
                                    NOMBRE Nombre,
                                    IDPerfil IDPerfil,
                                    FECHAALTA FechaAlta,
                                    FECHABAM FechaBAM,
                                    FECHACON FechaConsola
                                FROM
                                    A_APAMA.USERS
                                WHERE
                                    EMPRESA=?" />

        <property name="sqlUsuarios2"
            value=" SELECT DISTINCT (IDUSER) IDUser
                                FROM
                                    A_APAMA.USERS
                                WHERE
                                    EMPRESA=?" />
    </bean>

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.ibm.db2.jcc.DB2Driver" />
        <property name="url"
            value="jdbc:db2://udisapma.isban.dev.corp:60090/udisapma" />
        <property name="username" value="a_apama" />
        <property name="password" value="********" />
    </bean>

    <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="myDataSource" />
    </bean>
</beans> 
```

最后是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <!-- Loads and makes available the context defined in springconfig-service.xml -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>springGwtRemoteServiceServlet</servlet-name>
        <servlet-class>org.spring4gwt.server.SpringGwtRemoteServiceServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>gestionUsersConsultImpl</servlet-name>
        <servlet-class>com.santander.bam.comun.userconsole.server.GestionUsersConsultImpl</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>springGwtRemoteServiceServlet</servlet-name>
        <url-pattern>/springGwtServices/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>gestionUsersConsultImpl</servlet-name>
        <url-pattern>/userConsole/GestionUserService</url-pattern>
    </servlet-mapping>

    <!-- Default page to serve -->
    <welcome-file-list>
        <welcome-file>GestionUsers.html</welcome-file>
    </welcome-file-list>

    <!-- Paginas de error -->
    <error-page>
        <error-code>401</error-code>
        <location>/accessDeny.html</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/serverError.html</location>
    </error-page>
</web-app> 
```

在我的主要课程中，我有这个：

```
AsyncCallback<Collection<Usuario>> getUserID2 = new AsyncCallback<Collection<Usuario>>() {
            // Failure: muestra error
            public void onFailure(Throwable caught) {
                whatever;
            }

            // Succes: obtener usuario
            public void onSuccess(Collection<Usuario> Users) {
                Whatever;
            }
        };
        gestionUservc.dameTablaUsuarios("3293", getUserID2); 
```

编辑：如果它在这里有用的是错误：

com.google.gwt.user.server.rpc.UnexpectedException：服务方法 'public abstract java.util.Collection com.santander.bam.comun.userconsole.client.GestionUserService.dameTablaUsuarios(java.lang.String)' 引发了意外异常：com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java) com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:378) 的 java.lang.NullPointerException :581) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:243) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:207) 在com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet。org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) 服务(HttpServlet.java:717) org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362) org.mortbay .jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java :729) org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) org.mortbay.jetty.handler。 RequestLogHandler.handle(RequestLogHandler.java:49) at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at org.mortbay.jetty.Server.handle(Server.java:324) at org.mortbay .jetty.HttpConnection。handleRequest(HttpConnection.java:505) at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647) at org.mortbay.jetty .HttpParser.parseAvailable(HttpParser.java:211) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395) 在 org. mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 引起：java.lang.NullPointerException: null at com.santander.bam.comun.userconsole.server.GestionUsersConsultImpl.dameTablaUsuarios(GestionUsersConsultImpl.java:31) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 处 sun.reflect.nativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 处的 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)。com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:562) 的 java.lang.reflect.Method.invoke(Method.java:597) 的 DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:207) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:243) 在 com.google .gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java :717) org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362) org.mortbay.jetty.security。SecurityHandler.handle(SecurityHandler.java:216) at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729) at org .mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler .java:49) 在 org.mortbay.jetty.HttpConnection 的 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 的 org.mortbay.jetty.Server.handle(Server.java:324)。 handleRequest(HttpConnection.java:505) at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647) at org.mortbay.jetty .HttpParser。org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395) 上 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380) 上的 parseAvailable(HttpParser.java:211) org.mortbay.thread .QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)

编辑 2：这里我的日志是这样说的：

2013-02-25 16:20:02,424 信息 [org.springframework.web.context.ContextLoader] - 根 WebApplicationContext：初始化开始于 2013-02-25 16:20:02,453 信息 [org.springframework.web.context.support。 XmlWebApplicationContext] - 刷新根 WebApplicationContext：启动日期 [Mon Feb 25 16:20:02 CET 2013]；上下文层次结构的根 2013-02-25 16:20:02,496 INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - 从 ServletContext 资源加载 XML bean 定义 [/WEB-INF/applicationContext.xml] 2013-02- 25 16:20:02,696 信息 [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - 从 ServletContext 资源 [/WEB-INF/config.xml] 加载 XML bean 定义 2013-02-25 16:20:02,724 信息 [ org.springframework.beans.factory.support.DefaultListableBeanFactory] ​​- 覆盖 bean 的 bean 定义' transactionManager'：替换[通用bean：类[org.springframework.jdbc.datasource.DataSourceTransactionManager]；范围=; 摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；销毁方法名=空；在 ServletContext 资源 [/WEB-INF/config.xml]] 中使用 [Generic bean: class [org.springframework.jdbc.datasource.DataSourceTransactionManager] 定义；范围=; 摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；销毁方法名=空；在 ServletContext 资源 [/WEB-INF/applicationContext.xml]] 2013-02-25 16:20:02,724 INFO [org.springframework.beans.factory.support. DefaultListableBeanFactory] ​​- 覆盖 bean 'GestionUserService' 的 bean 定义：替换 [Generic bean: class [com.santander.bam.comun.userconsole.server.GestionUsersConsultImpl]; 范围=单例；摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；销毁方法名=空；在文件 [D:\Workspace\USER_CONSOLE\target\UserConsole\WEB-INF\classes\com\santander\bam\comun\userconsole\server\GestionUsersConsultImpl.class]] 中使用 [Generic bean: class [com.santander.bam] 定义.comun.userconsole.server.GestionUsersConsultImpl]; 范围=; 摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；销毁方法名=空；在 ServletContext 资源 [/WEB-INF/applicationContext.xml]] 中定义 2013-02-25 16:20:02,803 INFO [org.springframework.beans.factory.support.DefaultListableBeanFactory] ​​- 在 org.springframework.beans 中预实例化单例.factory.support.DefaultListableBeanFactory@3f96ee：定义bean [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation。 internalCommonAnnotationProcessor,GestionUserService,UserConsoleDAO,myDataSource,transactionManager,VARCHAR,utilDB]; 工厂层次结构的根 2013-02-25 16:20:02,890 信息 [org.springframework.web.context.ContextLoader] - 根 WebApplicationContext：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:09:00.863

似乎在方法`dameTablaUsuarios(String entidad)`

`logger.info("UtilDB "+utilDB.toString());`导致`nullpointer exception`. _ `utilDB`是`null`。检查出来。

# mysql - 没有子查询的MySql查询优化

> ID：15070853
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:51:04.050
> 
> 标签：mysql, sql, optimization

谁能帮我优化这个查询？

```
SELECT distinct t.designation,
      (SELECT sum(time_to_sec(timediff(outtime,intime))) 
       FROM onlinetime where datecreated BETWEEN '2012-01-01 00:00:01' 
       AND '2012-12-31 23:59:59' and designation=t.designation) as totsec
FROM onlinetime t; 
```

我正在尝试从在线时间表中获取名称和秒数。它只有 8000 条记录，但上述查询需要大量时间来执行。有没有其他方法可以优化这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:55:10.477

当您可以直接获得每个名称的总摘要时，您为什么需要加入表格

```
SELECT  designation, sum(time_to_sec(timediff(outtime,intime))) totsec
FROM    onlinetime
WHERE   datecreated BETWEEN '2012-01-01 00:00:01' AND '2012-12-31 23:59:59'
GROUP   BY designation 
```

只需在列上添加索引以`datecreated`获得更快的性能。

```
ALTER TABLE onlinetime ADD INDEX (datecreated) 
```

或者也许你想要这个，

```
SELECT  a.designation, 
        COALESCE(sum(time_to_sec(timediff(b.outtime,b.intime))), 0) totsec
FROM    onlinetime a
        LEFT JOIN onlinetime b
            ON  a.designation = b.designation AND
                b.datecreated BETWEEN '2012-01-01 00:00:01' AND '2012-12-31 23:59:59'
GROUP   BY a.designation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:49:45.430

正确答案是：

```
SELECT t.designation,
       sum(case when datecreated between '2012-01-01 00:00:01' AND '2012-12-31 23:59:59'
                then sum(time_to_sec(timediff(outtime,intime)
           end) as totsec
from onlinetime t
group by t.designation 
```

将过滤放在`where`子句中错过了原始查询的意图，即保留表中的所有“指定”。

# image - reStructuredText 中带有超链接的图像

> ID：15070855
> 
> 赞同：3
> 
> 时间：2013-02-25T15:51:17.860
> 
> 标签：image, restructuredtext, docutils

我正在尝试添加带有外部链接的图像。

```
|facebook| |tw|

.. |facebook| image:: http://www.summerbounce.ca/wp-content/uploads/2012/11/facebook-logo-small.png 

.. |tw| image:: http://www.summerbounce.ca/wp-content/uploads/2012/11/facebook-logo-small.png 
```

上面的代码显示了图像，但是如何将这些图像链接到外部站点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T14:45:34.443

添加`target`选项可以解决问题。

```
|facebook| |tw|

.. |facebook| image:: http://www.summerbounce.ca/wp-content/uploads/2012/11/facebook-logo-small.png 
                   :target: http://www.facebook.com 

.. |tw| image:: http://www.summerbounce.ca/wp-content/uploads/2012/11/facebook-logo-small.png
             :target: http://www.twitter.com 
```

任何其他更好的解决方案，随时欢迎。

# java - org.springframework.web.servlet.PageNotFound - 没有找到带有 URI 的 HTTP 请求的映射

> ID：15070857
> 
> 赞同：2
> 
> 时间：2013-02-25T15:51:24.800
> 
> 标签：java, css, spring, spring-mvc

我参考了很多帖子，但我仍然无法解决这个问题。

![在此处输入图像描述](../Images/e0f66099b66f94233c676785bd122a44.png)

我试过把这个css文件夹放在WEB-INF和views文件夹中。
但是样式仍然没有反映在视图页面中。

这是我的 servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <resources mapping="/resources/**" location="/resources/" />

    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="ctc.event.control" />

</beans:beans> 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

这是我的样式表 ExpenseDetailsS​​tyles.css

```
#ItemDiv1_Table1 {
    border: 1px solid black;
}

#ItemDiv1Table2 {
    width: 20%;
    float: right;
    font-size:30px;
} 
```

和我的视图页面。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ include file="TagIncludes.jsp" %>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Expense Details</title>
<link href='<c:url value="/resources/css/ExpenseDetailsStyles.css" />' rel="stylesheet" type="text/css" media="screen" />
<script type='text/javascript' src="../js/jquery-1.9.0.js"></script>
<script type="text/javascript"></script>
</head>
<body>
    <form:form name="ExpenseDetails" method="Post"
        action="ExpenseDetailsForm.html">
        <div id="ItemDiv1">
            <table>
                <tr>
                    <td>
                        <table id="ItemDiv1_Table1">
                            <tr>
                                <td>Item</td>
                                <td><input type="text" name="Item1" id="Item1" required /></td>
                            </tr>
                            <tr>
                                <td>Expense in Rs</td>
                                <td><input type="text" name="ItemValue1" id="ItemValue1" ></td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table id="ItemDiv1_Table2">
                            <tr>
                                <td>Edit</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </form:form>
</body>
</html> 
```

这是控制器

```
@Controller
public class ExpenseFormController {

    @RequestMapping(value = "/ExpenseDetailsForm.html", method = RequestMethod.GET)
    public String openForm() {
        return "ExpenseDetailsForm";

    }

    @RequestMapping(value = "/ExpenseDetailsForm.html", method = RequestMethod.POST)
    public String submitForm() {
        return null;

    }
} 
```

stacktrace 不是错误，而是警告。

> 警告：org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/Calculator/ ] 的 HTTP 请求的映射`<c:url value="css/ExpenseDetailsStyles.css" />`，名称为“appServlet”

我认为我的 uri 在视图页面中存在一些问题，我尝试以多种不同的方式对其进行更改。谁能帮我更正uri并在视图页面上反映样式？
如果需要与此相关的任何其他信息，请发表评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:53:34.750

你有以下

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping> 
```

将一些资源映射到 Spring servlet，但您没有任何控制器处理程序方法来为它们提供服务。您应该删除上述`servlet-mapping`s 并将您的`css`资源`/resources/css`和`js`资源放入`/resources/js`. `<mvc:resources>`由于元素，Spring 会知道从那里自动获取它们。

确保还更改 html 文件中脚本和 css 的硬编码位置。

另外，在这条线上

```
<link href='<c:url value="/resources/css/ExpenseDetailsStyles.css" />' ... /> 
```

使用双引号`"`。您可能还想对此进行重构

该`<c:url>`标签会将值放入变量中，然后该变量将在您的标签`myvar`中可用。`<link>`

您还需要在 jsp 顶部的这一行告诉它您需要 jstl 标签：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c"%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:03:32.007

在您的上下文文件中，添加以下内容：

```
<mvc:resources mapping="/resources/**" location="/WEB-INF/resources/" /> 
```

这会添加一个静态路径 /resources/。只需将您的内容放在那里。

# facebook - 我应该使用“no_feed_story”=1 还是“no_feed_story”=true？

> ID：15070858
> 
> 赞同：2
> 
> 时间：2013-02-25T15:51:25.610
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, feed

从 iOs 应用程序发布 OpenGraph 对象时，我注意到可以使用“no_feed_story”。

从文档以及在社区和网络上的查看来看，我们是否应该使用整数或布尔值来将此参数设置为 true 或 false 尚不清楚。

应该使用整数 0 和 1，还是使用“字符串”真假？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:01:34.333

> 为同一个真实世界的动作发布多个动作。如果您需要发布多个操作以生成正确的时间线单元，则必须关闭这些操作的提要故事 (no_feed_story=1)。

来自 Facebook 文档：[https ://developers.facebook.com/docs/submission-process/opengraph/overview/](https://developers.facebook.com/docs/submission-process/opengraph/overview/)

我猜0和1更合适。

# jstree - 在jstree中包装叶子文本

> ID：15070859
> 
> 赞同：18
> 
> 时间：2013-02-25T15:51:26.000
> 
> 标签：jstree

我正在使用 jstree 插件根据 xml 文件填充我的树。一些节点文本大于容器 div。有没有办法对jstree节点文本进行文本换行？

```
$(document).ready(function(){
     $("#tree").jstree({  
         "xml_data" : {  

             "ajax" : {  

                 "url" : "jstree.xml" 

             },  

             "xsl" : "nest"

         },  
         "themes" : {  

             "theme" : "classic",  

            "dots" : true,  

             "icons" : true 

         },  

        "search" : {  

                 "case_insensitive" : true,  

                 "ajax" : {  

                     "url" : "jstree.xml" 

                 }  

             },  
              "plugins" : ["themes", "xml_data", "ui","types", "search"] 

    }).bind("select_node.jstree", function (event, data) {

        $("#tree").jstree("toggle_node", data.rslt.obj); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-12-01T06:04:24.777

这适用于 3.0.8

```
.jstree-anchor {
    /*enable wrapping*/
    white-space : normal !important;
    /*ensure lower nodes move down*/
    height : auto !important;
    /*offset icon width*/
    padding-right : 24px;
} 
```

对于那些使用`wholerow`插件的人；

```
//make sure the highlight is the same height as the node text
$('#tree').bind('hover_node.jstree', function() {
    var bar = $(this).find('.jstree-wholerow-hovered');
    bar.css('height',
        bar.parent().children('a.jstree-anchor').height() + 'px');
}); 
```

* * *

对于 3.1.1，以及它也可以`select_node.jstree`使用此函数：

```
function(e, data) {
    var element = $('#' + data.node.id);
    element
        .children('.jstree-wholerow')
        .css('height', element.children('a').height() + 'px')
    ;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-10T20:51:34.820

尝试将以下样式添加到 jsTree div 的子锚点：

```
#jstree_div_id a {
    white-space: normal !important;
    height: auto;
    padding: 1px 2px;
} 
```

我的 jsTree div 样式也有一个最大宽度：

```
#jstree_div_id
{
    max-width: 200px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T16:33:08.020

```
#tree_id {
  .jstree-anchor {
    white-space: normal;
    height: auto;
  }
  .jstree-default .jstree-anchor {
    height: auto;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-17T23:34:01.247

将 Hashbrown 和 TwiceB 的答案放在一起，使其与 Wholerow 插件和预选数据一起使用。

启用文本换行

```
.jstree-anchor {
    /*enable wrapping*/
    white-space : normal !important;
    /*ensure lower nodes move down*/
    height : auto !important;
    /*offset icon width*/
    padding-right : 24px;
} 
```

启用悬停时突出显示包装文本并选择

```
$('#tree').bind('open_node.jstree', function () {
    let bar = $(this).find('.jstree-wholerow-clicked');
    bar.css('height',
        bar.parent().children('a.jstree-anchor').height() + 'px');
});
$('#tree').bind('hover_node.jstree', function () {
    var bar = $(this).find('.jstree-wholerow-hovered');
    bar.css('height',
        bar.parent().children('a.jstree-anchor').height() + 'px');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T11:05:24.757

我通过巧合找到了答案，它对我有用，但是，我有另一个 css 规则阻止代码正常运行

我在“我的代码”中删除了 css 规则 (min-height:200px)，以下答案对我有用，如我所料。

```
#tree_div_id a {
white-space: normal;
height: auto;
padding: 0.5ex 1ex;
margint-top:1ex;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T03:53:38.677

这个问题在下面得到解决。

[https://www.npmjs.com/package/treeview-sample](https://www.npmjs.com/package/treeview-sample)

根据此示例，文件夹 DOM 将输出以下内容。

```
<a class="jstree-anchor jstree-anchor-formatted" href="#" tabindex="-1" role="treeitem" aria-selected="false" aria-level="3" id="grandchild2_anchor" title="Human">
  <i class="jstree-icon jstree-themeicon" role="presentation"></i>
  <span class="jstree-anchor-text">Human</span>
</a> 
```

# function - 使两个使用函数（LUA，Corona）创建的对象可触摸

> ID：15070860
> 
> 赞同：3
> 
> 时间：2013-02-25T15:51:31.797
> 
> 标签：function, lua, coronasdk, addeventlistener

我想这是一个真正的新手问题，

但我有以下代码：

```
local function createCircle()
[...]
circle = display.newCircle( positionX, positionY, circleRadius )
[...]
end

function circle:touch( event )
   if event.phase == "ended" then
      scaleCircle(self,scaleUp)
   end
   return true;
end
circle:addEventListener("touch", circle) 
```

我把它清理了一下，专注于重要的事情。

我现在的问题是：我可以触摸一个圆圈并缩放它。但这仅适用于其中一个圆圈（我想创建 3 或 4 个）。我猜它只适用于创建的最后一个圈子。

我想这里的主要问题是，我用“createCircle()”创建的所有圆圈都被命名为“圆圈”。所以 evenListener 只适用于我创建的“圈子”。

有什么想法可以选择我创建的其他圈子吗？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:00:03.223

你**必须**使用表格。例如：

```
circles = {}
local function createCircle()
  --[[ MORE CODE ]]--
  table.insert( circles, display.newCircle( positionX, positionY, circleRadius ) )
  --[[ MORE CODE ]]--
end
function circle:touch( event )
   if event.phase == "ended" then
      scaleCircle(self,scaleUp)
   end
   return true;
end
for _, circle in ipairs( circles ) do
  circle:addEventListener("touch", circle)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:06:19.727

这就是我解决它的方法：

```
local function createCircle()
  --[[ MORE CODE ]]--
   table.insert(circleTable, display.newCircle( positionX, positionY, circleRadius ) )
   --[[ MORE CODE ]]--
end

function onObjectTouch(event)
   local self = event.target
   if event.phase == "ended" then
        --[[ MORE CODE ]]--
   end
   return true;
end

local function addTouchListeners()
   for _, circle in ipairs(circleTable) do
      circle:addEventListener("touch", onObjectTouch)
   end
end

createCircle()
addTouchListeners() 
```

我想 Dream Eaters 解决方案也应该有效。但是我在调​​用我的 createCircle() 函数时又犯了一个错误。我通过为 TouchListeners 创建一个函数并在 createCircle() 函数之后调用它来解决这个问题。

希望这可以帮助其他有类似问题的人。

# wpf - 尽管样式，ComboBoxItem 继续抛出绑定错误

> ID：15070861
> 
> 赞同：5
> 
> 时间：2013-02-25T15:51:36.353
> 
> 标签：wpf, data-binding, combobox, datatemplate

我有一个通过 CollectionViewSource 填充的组合框。这些项目是通过传入项目类型（在本例中为 ProjectViewModel）的数据模板构建的。这是 .NET 4.0 中的 WPF。

在我的 window.resources 中，我指定了以下内容：

```
 <Style TargetType="{x:Type ComboBoxItem}">
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style> 
```

尽管有这种风格，我仍然收到以下错误：

> System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.ItemsControl'，AncestorLevel='1''的绑定源。BindingExpression:Path=Horizo​​ntalContentAlignment; 数据项=空；目标元素是'ComboBoxItem'（名称=''）；目标属性是“Horizo​​ntalContentAlignment”（类型“Horizo​​ntalAlignment”）

> System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.ItemsControl'，AncestorLevel='1''的绑定源。绑定表达式：路径=垂直内容对齐；数据项=空；目标元素是'ComboBoxItem'（名称=''）；目标属性是“VerticalContentAlignment”（类型“VerticalAlignment”）

我也在 ComboBox 元素上指定了 Horizo​​ntal 和 Vertical ContentAlignment，但无济于事。这不是一个可怕的问题，因为项目正确显示。但是在调试时，我在关闭窗口时确实得到了大约 10 秒的延迟，同时它向输出窗口输出了大约 4000 条错误消息（我需要打开它才能捕获合法的绑定错误。

我可能没有正确阅读错误。为什么找不到绑定的有效来源？据我所知，我使用 ComboBox 和 CollectionViewSource 的方式符合他们的意图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-03T20:02:38.967

我以为我已经在自己的程序中解决了这个问题，但发现它一直间歇性地弹出。终于找到了问题的根源。

如果您使用由 支持的组合框`ICollectionView`，并且您在事件队列上堆叠两个或更多`collectionView.Refresh()`调用（例如：由于两个不同的清理操作而调用 refresh 两次），这将导致它生成绑定错误垃圾邮件每个额外`Refresh()`调用的组合框的每个元素。此绑定错误只会在您至少打开一次组合框后发生。

重写它以便您只`Refresh()`为给定事件调用一次将防止弹出绑定错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T08:30:01.860

我只想提一下我在这个问题上挣扎了两天。最常见的建议解决方案（将 Horizo​​ntal/VerticalContentAlignment 样式添加到您的元素，甚至添加到 App.xaml）并不总能解决问题。

最终，我发现了一些对我自己的情况独特的东西——我希望它可以对某人有所帮助：**如果你正在使用 FilterEventHandler，在重新订阅之前不要取消订阅！**

每当我更改通道过滤器（调用 UpdateCorporatesList）时，我的旧代码都会继续生成“数据错误 4”消息：

```
// This code generates errors
private void UpdateCorporatesList()
{
    this.CorporatesViewSource.Filter -= new FilterEventHandler(ApplyCorporateFilter);

    if (this.ChannelFilter != null)
    {
        this.CorporatesViewSource.Filter += new FilterEventHandler(ApplyCorporateFilter);
    }
    else
    {
        this.CorporateFilter = null;
    }
}

private void ApplyCorporateFilter(object sender, FilterEventArgs e)
{
    SalesCorporate customer = e.Item as SalesCorporate;
    var currentChannel = this.Channels.FirstOrDefault(x => x.ID == this.ChannelFilter).Description;
    if ((customer.ID != null) && (customer.Channel != currentChannel))
    {
        e.Accepted = false;
    }
} 
```

...所以我将其更改为每次都重新订阅 FilterEventHandler，而是在事件处理方法中对 Channel Filter 进行 null 检查。

```
// This code works as intended
private void UpdateCorporatesList()
{
    this.CorporatesViewSource.Filter += new FilterEventHandler(ApplyCorporateFilter);

    if (this.ChannelFilter == null)
    {
        this.CorporateFilter = null;
    }
}

private void ApplyCorporateFilter(object sender, FilterEventArgs e)
{
    var currentChannel = this.Channels.FirstOrDefault(x => x.ID == this.ChannelFilter);
    if (currentChannel.ID == null)
    {
        return;
    }

    SalesCorporate customer = e.Item as SalesCorporate;
    if ((customer.ID != null) && (customer.Channel != currentChannel.Description))
    {
        e.Accepted = false;
    }
} 
```

瞧！没有更多错误:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-25T20:41:12.583

为这个错误苦苦挣扎了几个小时，尝试了谷歌的所有解决方案，只有这个有效，从你的组合框样式中删除 OverridesDefaultStyle 属性行：

```
// before
<Style x:Key="{x:Type ComboBoxItem}" TargetType="{x:Type ComboBoxItem}">
    <Setter Property="SnapsToDevicePixels" Value="true" />
    <Setter Property="OverridesDefaultStyle" Value="true" />

// after
<Style x:Key="{x:Type ComboBoxItem}" TargetType="{x:Type ComboBoxItem}">
    <Setter Property="SnapsToDevicePixels" Value="true" /> 
```

在数据网格单元格中使用组合框样式模板 [https://docs.microsoft.com/en-us/dotnet/desktop/wpf/controls/combobox-styles-and-templates?view=netframeworkdesktop-4.8](https://docs.microsoft.com/en-us/dotnet/desktop/wpf/controls/combobox-styles-and-templates?view=netframeworkdesktop-4.8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T10:33:43.270

我不知道您是否还需要这方面的帮助，但我只是想出了一种方法让这个错误/警告消失。在我的组合框中，我重新定义了 ItemTemplate 属性，如下所示：

```
<ComboBox.ItemTemplate>
    <ItemContainerTemplate>
        <TextBlock Text="{Binding Path=YourBinding}"/>
    </ItemContainerTemplate>
</ComboBox.ItemTemplate> 
```

YourBinding 是您将用作组合框的“DisplayMemberPath”的值

# c++ - unique_ptr 可以采用 nullptr 值吗？

> ID：15070862
> 
> 赞同：34
> 
> 时间：2013-02-25T15:51:36.617
> 
> 标签：c++, c++11, pointers, unique-ptr, nullptr

此代码片段是否有效？：

```
unique_ptr<A> p(new A());
p = nullptr; 
```

也就是说，我可以分配`nullptr`给 a`unique_ptr`吗？还是会失败？

**我用g++**编译器试过这个，它工作正常，但是其他编译器呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-25T15:55:28.403

**它会起作用**的。

来自 C++11 标准的第 20.7.1.2.3/8-9 段关于`unique_ptr<>`类模板：

> `unique_ptr& operator=(nullptr_t) noexcept`;
> 
> *效果*：`reset()`。
> 
> *后置条件*：`get() == nullptr`

这意味着类模板的定义`unique_ptr<>`包括一个重载，`operator =`它接受一个类型的值`nullptr_t`（例如`nullptr`）作为它的右手边；该段落还指定分配`nullptr`给 a`unique_ptr`等同于重置`unique_ptr`.

因此，在此分配之后，您的`A`对象将被销毁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-16T00:07:10.870

更常见的情况：

```
#include <iostream>
#include <string>
#include <memory>

class A {
public:
    A() {std::cout << "A::A()" << std::endl;}
    ~A() {std::cout << "A::~A()" << std::endl;}
};

class B {
public:
    std::unique_ptr<A> pA;
    B() {std::cout << "B::B()" << std::endl;}
    ~B() { std::cout << "B::~B()" << std::endl;}
};

int main()
{
    std::unique_ptr<A> p1(new A());

    B b;
    b.pA = std::move(p1);
} 
```

输出：

```
A::A()
B::B()
B::~B()
A::~A() 
```

此代码示例可能不直观：

```
#include <iostream>
#include <string>
#include <memory>

class A {
public:
    A() {std::cout << "A::A()" << std::endl;}
    ~A() {std::cout << "A::~A()" << std::endl;}
};

class B {
public:
    std::unique_ptr<A> pA;
    B() {std::cout << "B::B()" << std::endl;}
    ~B() 
    {
        if (pA)
        {
            std::cout << "pA not nullptr!" << std::endl;
            pA = nullptr; // Will call A::~A()
        }
        std::cout << "B::~B()" << std::endl;
    }
};

int main()
{
    std::unique_ptr<A> p1(new A());

    B b;
    b.pA = std::move(p1);
} 
```

输出：

```
A::A()
B::B()
pA not nullptr!
A::~A()
B::~B() 
```

# python - QTablewidget 中的智能排序

> ID：15070863
> 
> 赞同：1
> 
> 时间：2013-02-25T15:51:48.033
> 
> 标签：python, pyqt

谢谢，我说西班牙语，请耐心等待：

我需要对可能的 QTableWidget 进行智能排序，但我不知道如何执行此操作，我在表中的数据是这样的：

例子：

```
Item1: “12 GB”
Item1: “34 KB”
Item1: “45 MB”
Item1: “12 bytes”
Item1: “12 MB”
Item1: “12.3 KB”
Item1: “23.4 KB” 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:01:38.293

我建议尝试更改您的输入，以便您实际获得以字节为单位的数量，而不是人类可读的值。

之后，您仍然可以以不同的方式显示它。如果这不是一个选项，那么您可以尝试这样的方法来解码它：

```
def convert(value):                                                                                                                                                               
    number, multiplier = value.split()                                                                                                                                            
    if multiplier == 'bytes':                                                                                                                                                     
        multiplier = 1                                                                                                                                                            
    elif multiplier == 'KB':                                                                                                                                                      
        multiplier = 2**10                                                                                                                                                        
    elif multiplier == 'MB':                                                                                                                                                      
        multiplier = 2**20                                                                                                                                                        
    elif multiplier == 'GB':                                                                                                                                                      
        multiplier = 2**30                                                                                                                                                        
    else:                                                                                                                                                                         
        raise RuntimeError('Unknown unit %r in %r' % (multiplier, value))                                                                                                         

    return float(number) * multiplier 
```

# apache-camel - Apache Camel - 使聚合器“刷新”

> ID：15070864
> 
> 赞同：2
> 
> 时间：2013-02-25T15:51:48.910
> 
> 标签：apache-camel, aggregation

我实际上想要一个刷新，或者一个completionSize，但是对于聚合器中的所有聚合。就像一个全局的completionSize。

基本上，我想确保批处理中的每条消息都被聚合，然后在读取最后一条消息时立即完成该聚合器中的所有聚合。

```
e.g. 1000 messages arrive (the length is not known beforehand)

     aggregate on correlation id into bins
        A 300
        B 400
        C 300   (size of the bins is not known before hand)

     I want the aggregator not to complete until the 1000th exchange is aggregated
     thereupon I want all of the aggregations in the aggregator to complete at once 
```

CompleteSize 适用于每个聚合，而不是聚合器作为一个整体。因此，如果我设置 CompleteSize( 1000 ) 它永远不会完成，因为每个聚合必须超过 1000 才能“完成”

我可以通过构建单个 Map 对象来解决它，但这有点回避 aggregator2 中的相关性，我更喜欢理想地使用它

所以是的，无论是全局完整大小还是刷新，有没有办法智能地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:24:30.497

一种选择是简单地添加一些逻辑来保持全局计数器并在`Exchange.AGGREGATION_COMPLETE_ALL_GROUPS`到达时设置标题......

> 从 Camel 2.9 开始可用...您可以通过发送包含标头 Exchange.AGGREGATION_COMPLETE_ALL_GROUPS 设置为 true 的消息来手动完成所有当前的聚合交换。该消息仅被视为信号消息，否则不会处理消息标题/内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:51:15.677

我建议看一下 Camel aggregator eip doc [http://camel.apache.org/aggregator2](http://camel.apache.org/aggregator2)，并了解不同的完成条件。此外，Ben 提到的特殊消息可以发送给信号以完成所有飞行中的聚合。

如果您从批处理消费者[http://camel.apache.org/batch-consumer.html](http://camel.apache.org/batch-consumer.html)消费，那么您可以使用在批处理完成时完成的特殊完成。例如，如果您从 JPA 数据库表中提取文件或行等。然后，当批处理使用者的所有消息都已处理后，聚合器可以使用 completionFromBatchConsumer 选项发出所有这些聚合消息的完成信号。

此外，如果您有 Camel in Action 书籍的副本，请阅读第 8 章第 8.2 节，因为它所有关于聚合 EIP 的内容都涵盖了更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-07T14:40:46.627

使用 Exchange.AGGREGATION_COMPLETE_ALL_GROUPS_INCLUSIVE 为我工作：

```
from(endpoint)
        .unmarshal(csvFormat)
        .split(body())
        .bean(CsvProcessor())
        .choice()
        // If all messages are processed,
        // flush the aggregation
        .`when`(simple("\${property.CamelSplitComplete}"))
        .setHeader(Exchange.AGGREGATION_COMPLETE_ALL_GROUPS_INCLUSIVE, constant(true))
        .end()
        .aggregate(simple("\${body.trackingKey}"),
                AggregationStrategies.bean(OrderAggregationStrategy()))
        .completionTimeout(10000) 
```

# sql-server-2008 - 是否可以在 sql server 的临时表中创建计算字段

> ID：15070865
> 
> 赞同：4
> 
> 时间：2013-02-25T15:51:51.777
> 
> 标签：sql-server-2008, tsql

我的内联表值函数返回@table，目前我正在考虑创建要计算的字段并将公式添加到其计算列规范的可能性。我认为这可能是减少函数中 sql 语句数量的更好方法。

那么，它是否支持功能中的此类功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:04:31.440

是的你可以：

```
create function foo
(
    @seed int
)
returns @foo_t table
(
    [a] int not null,
    [b] int not null,
    [c] as ([a] + [b])
)
begin
    insert into @foo_t values (@seed, 2)
    insert into @foo_t values (@seed + 1, 3)

    return
end
go

select
    *
from foo(1)
go 
```

# android - 在android中改变imageview的高度和宽度

> ID：15070866
> 
> 赞同：7
> 
> 时间：2013-02-25T15:51:52.263
> 
> 标签：android, layout, height, imageview, width

在我的应用程序中单击按钮时，我想更改 imageview 的大小。当我单击一个按钮时，我想将 imageview 的大小增加 5（每个宽度和高度）。单击其他按钮时，我想减小 size.i试过这个。我该怎么做？下面是代码。它不起作用

```
 public void increase(View v)
{

    int height=imageView.getHeight();
    int width=imageView.getWidth();
    imageView.getLayoutParams().height = height+5;
    int h=imageView.getHeight();
    System.out.println("hhhhhhhhhh,,,,,,,,,,"+h);
    System.out.println("width n hight..."+width+"and"+height);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:59:58.943

**更新：**

做这个：

```
int height=imageView.getHeight();
int width=imageView.getWidth();
imageView.setLayoutParams(new LinearLayout.LayoutParams(height, width)); 
```

建议您的 ImageView 位于 LinearLayout 内，您需要这样做：

```
LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) imageView.getLayoutParams();
params.setHeight(XX);
params.setWidth(XX);
imageView.setLayoutParams(params); 
```

我不知道语法是否完全正确，但基本上你就是这样做的，不要忘记你需要更新你的 UI，才能看到任何变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:24:22.297

我使用以下代码：

```
your_image_view.getLayoutParams().height = 20; 
```

希望对你有帮助。。

您可以尝试以下替代方法..看看它是否有效：

```
LayoutParams params = (LayoutParams) imageView.getLayoutParams();
params.width = 120;
params.height = 120;

imageView.setLayoutParams(params); 
```

虽然两个代码几乎相同......

# xcode - UIScrollView 即使在设置 Scrollview 的大小 (10,000 , 10,000) 后也不显示所有内容

> ID：15070867
> 
> 赞同：1
> 
> 时间：2013-02-25T15:51:52.447
> 
> 标签：xcode, uiscrollview, scroll

谢谢阅读。我正在制作一个 UiScrollView 来显示内容。由于某种原因，我无法滚动到 UIScrollView 的底部以查看所有内容。不管我怎么改变我的 [scroller setContentSize:CGSizeMake(x,x)]; 到，它没有区别...... 1,1 或 10,000 ， 10,000 没有任何变化。这是我的代码。谢谢您的帮助。

```
 @interface ViewController : UIViewController {

UIScrollView *scroller;

 }

@property (nonatomic, retain) IBOutlet UIScrollView *scroller; 
```

和 .m 文件

@synthesize 滚动条，testScroll；

```
 - (void)viewDidLoad
 {
      [super viewDidLoad];
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(400,2000)];

 } 
```

我的滚动视图的大小是 (331, 1875)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:28:59.317

尝试这个，

myScrollView.contentSize = CGSizeMake(320, 500);

不要忘记设置滚动视图委托。

# android - 当应用程序在android中从纵向模式变为横向模式时值发生变化

> ID：15070868
> 
> 赞同：0
> 
> 时间：2013-02-25T15:51:53.280
> 
> 标签：android

我正在开发安卓应用程序。我的应用程序应该可以在纵向和横向模式下工作。我通过将所有布局文件保存在 layout-lan 文件夹中来调整所有布局。但是现在我的问题在于功能，即当应用程序更改为横向模式时，我的参数值正在发生变化，因此我遇到了崩溃。即我保留了一个计数器值，但是当转向端口局域网时它显示错误的计数值。因此，功能也在发生变化。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:11:38.720

每次旋转设备时，都会再次调用 onCreate 方法。您可以通过覆盖 onSavedInstanceState 来保存这些值，然后在 onRestoreInstanceState 或 onCreate 方法中将它们取回。例如：

保存值：

```
 public void onSaveInstanceState(Bundle outState) {
        outState.putBoolean("booleanValue", true);
} 
```

恢复值（您也可以在 onCreate 中调用它）：

```
 protected void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState != null && savedInstanceState.containsKey("booleanValue")) {
            boolean myBoolean = savedInstanceState.getBoolean("booleanValue");
        }
        super.onRestoreInstanceState(savedInstanceState);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:56:33.947

每次方向更改时，您的活动都会重新启动。

您必须将您的值存储`onSaveInstanceState`在`onRestoreInstanceState`. 您将在此处找到详细信息：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:07:22.457

这些值会发生变化，因为活动在轮换期间被破坏和重建，

请查看开发人员指南，了解如何保存您的活动状态。

[http://developer.android.com/training/basics/activity-lifecycle/recreating.html#SaveState](http://developer.android.com/training/basics/activity-lifecycle/recreating.html#SaveState)

# ruby-on-rails - Resque 继续使用 SQLite3 DB

> ID：15070870
> 
> 赞同：0
> 
> 时间：2013-02-25T15:51:57.567
> 
> 标签：ruby-on-rails, paperclip, capistrano, resque

我有一个设置，其中开发数据库是 SQLite3，但对于登台和生产，它是 Postgres。我也有一个 resque 任务设置来基本上异步地为数据库播种，但我一直收到这个错误：

.SQLite3::CantOpenException：无法打开数据库文件：更新“....”

我什至没有使用 sqlite 3，但由于某种原因，resque 一直在使用该数据库。

在 resque 网站上有两个选项可以解决这个问题，但都没有奏效。

将此添加到 resque 任务中

`

```
 namespace :resque do
       puts "Loading Rails environment for Resque"
       task :setup => :environment do
         ActiveRecord::Base.descendants.each { |klass|  klass.columns }
       end
    end 
```

或者使用这一行开始 resque：QUEUE=file_serve rake environment resque:work

有什么想法为什么要尝试使用 SQLite3？仅在运行 rake db:seed RAILS_ENV=staging 时，这确实可以正常工作

# android - 使用 Monodroid 进行 OpenGL 2.0 绘图（使用 OpenTK）

> ID：15070872
> 
> 赞同：1
> 
> 时间：2013-02-25T15:51:59.873
> 
> 标签：android, opengl-es, xamarin.android, opentk

我正在尝试设置一个跨平台应用程序，该应用程序使用 OpenTK-1.0 使用 OpenGL ES 2.0 中的可编程管道方法绘制一些基本的 3D 对象。我的应用程序的 iOS 端运行良好，但面向 Android 的应用程序不断`calling unimplemented OpenGL ES API`出现错误。

我相信这是因为应用程序的 Android 端没有正确设置为目标 OpenGL ES 2.0。我已经`AndroidManifest.xml`用适当的`<uses-feature>`标签更新了 ，但我无法`GLContextVersion = GLContextVersion.Gles2_0;`在被覆盖的`CreateFrameBuffer()`函数中设置`AndroidGameView`.

由于某种原因`GLContextVersion`，OpenTK 版本 1.0 中似乎不存在该属性，但在 0.9.9.3 中确实存在。如何使用 OpenTK-1.0 将上下文设置为目标 OpenGL ES 2.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:40:22.640

根据上面 Dykam 的评论，GL 上下文版本现在设置为使用`ContextRenderingApi = GLVersion.ES2;`in处理 GL ES 2.0 `CreateFrameBuffer()`。

# c# - 实体框架和 DbSet

> ID：15070874
> 
> 赞同：7
> 
> 时间：2013-02-25T15:52:09.847
> 
> 标签：c#, wcf, entity-framework-4

我正在尝试设置一个通用接口来从存储库中检索实体。问题是我需要从 WCF 服务请求数据，而泛型不适用于操作合同，据我所知。

所以我有这个在控制台应用程序中工作，而不是使用服务调用：

```
public virtual List<T> GetAll<T>() where T : MyBaseType
{
   return this.datacontext.Set<T>().Include(l => l.RelationshipEntity).ToList();
} 
```

我能看到 dong 的唯一方法是：

```
public virtual List<MyBaseType> GetAll(Type entityType)
{
   return this.datacontext.Set(entityType).Include(l => l.RelationshipEntity).ToList();
} 
```

`Set<T>()`并且`Set(Type type)`都返回一个`DbSet`但是，`Set(Type type)`没有要使用的扩展名`ToList()`，我也没有得到我的所有结果。

该`Local`属性仅显示当前执行范围内的上下文，而不是存储库中包含的内容。

所以我想要一个像这样的 WCF 合同：

```
[ServiceContract]
public interface IRulesService
{
     [OperationContract]
     MyBaseType Add(MyBaseType entity);

     [OperationContract]
     List<MyBaseType> GetAll(Type type);
} 
```

然后实现：

```
public virtual List<MyBaseType> GetAll(Type entityType)
{
    var dbset = this.datacontext.Set(entityType);
    string sql = String.Format("select * from {0}s", type.Name);

    Type listType = typeof(List<>).MakeGenericType(entityType);
    List<MyBaseType> list = new List<MyBaseType>();

    IEnumerator result = dbset.SqlQuery(sql).GetEnumerator();

    while (result.MoveNext()){
        list.Add(result.Current as MyBaseType);
    }

    return list;
}

//public virtual List<T> GetAll<T>() where T : MyBaseType
//{
//   return this.datacontext.Set<T>().Include(l => l.RelationshipEntity).ToList();
//}

public virtual MyBaseType Add(MyBaseType entity)
{
    DbSet set = this.datacontext.Set(typeof(entity));
    set.Add(entity);
    this.datacontext.SaveChanges();
    return entity; 
}

//public virtual T Add<T>(T t) where T : MyBaseType
//{
//   this.datacontext.Set<T>().Add(t);
//   this.datacontext.SaveChanges();
//   return t;
//}

public virtual List<MyBaseType> UpdateAll(List<MyBaseType> entities)
{

} 
```

任何想法最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:15:09.483

您应该能够调用`Cast<T>`扩展方法。

```
public virtual List<MyBaseType> GetAll(Type entityType)
{
   return this.datacontext.Set(entityType)
       .Include(l => l.RelationshipEntity)
       .Cast<MyBaseType>()  // The magic here
       .ToList();
} 
```

# android - 具有复杂儿童定位的自定义 AdapterView

> ID：15070875
> 
> 赞同：1
> 
> 时间：2013-02-25T15:52:11.293
> 
> 标签：android, android-layout, android-view, android-adapter, android-adapterview

我正在尝试实现一个自定义，在[制作自己的 3D 列表](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDwQFjAB&url=http://developer.sonymobile.com/2010/05/20/android-tutorial-making-your-own-3d-list-part-1/&ei=loYrUdTfAa-ziQfM6oGgBg&usg=AFQjCNHaNxzEuTB9d7tyzQQHdpFbiMOCxA&sig2=9-2-KfwYYTJoabj52skmmQ&bvm=bv.42768644,d.aGc)`AdapterView`之后以自己的方式绘制它的孩子。我想做的是将孩子们画在一个不规则位置且大小不规则的表面上。孩子是可选择的，其他功能如. 我使用 a 的原因是因为我想用一个适配器填充它，该适配器从数据库中获取它的数据。**我如何在它的位置绘制孩子并实现滚动和选择？** PS“表面”的高度是固定的，宽度设置为`AdapterView``ListView``AdapterView`**`match_parent`**

# c++ - 为忽略本机 C++ 中的语言环境的日期设置 Excel NumberFormat

> ID：15070876
> 
> 赞同：0
> 
> 时间：2013-02-25T15:52:12.307
> 
> 标签：c++, excel, com, native, office-automation

我正在使用本机 C++ 中的 Excel COM 自动化。我的目标是设置日期范围的 NumberFormat 。问题是，Excel 期望的格式字符串取决于用户的语言环境。

示例：如果语言环境是英语，我必须将 NumberFormat 设置为“dd.mm.yyyy” 如果语言环境是德语，我需要使用“TT.MM.JJJJ”来获得相同的结果。

我找到了很多.NET 的解决方案，不幸的是我没有那么奢侈。通常的解决方案是将 Excel 线程的语言环境临时设置为英语，但对于本机 C++ 似乎不可能。

我可以读取默认的系统语言环境，然后对不同的格式字符串进行硬编码，但是一旦有人使用我没有明确包含的语言环境，这将不起作用，所以这是一个糟糕的解决方案。

那么，我该如何解决这个问题，以便无论使用哪种语言环境都能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:22:52.623

一种可能的解决方案是使用系统时间格式化程序（如：_tcsftime、strftime、wcsftime）将日期/时间结构格式化为运行系统的区域设置。由于您的程序和 excel 都应该在同一台 PC 上运行，因此它应该可以正常工作，甚至不知道本地日期/时间字符串的样子。

作为一种备用解决方案，您可能必须在程序的选项配置部分提供一系列硬编码格式字符串和/或用户手动输入的字符串，以防默认语言环境格式失败。

OP首次回复评论后的其他信息：--------------

区域设置仅影响 UI 中 datetime-binary-object 的文本显示呈现。这样的日期时间二进制对象总是以非常一致的方式存储为二进制结构，无论区域设置如何，即使在其每个不同的上下文中，无论是在 Excel（日期/时间格式单元格），C++（各种结构取决于 api） ，VisualBasic（变体）。

因此，如果您的意图是将日期时间二进制结构导出到 excel，而不是作为字符串，则始终可以使用“变体”类型来存储日期值，因为 excel-automation 使用 IDispatch 接口。您可以完全忘记语言环境设置。

添加代码片段以导出日期时间变量并按代码格式化单元格：----------------

我使用的是MFC，所以代码很简单，你可能需要自己转换成winapi

```
_Application app;
if (!app.CreateDispatch("Excel.Application"))
{   AfxMessageBox("Cannot start Excel !");
    return;
}
app.SetVisible(TRUE);   
COleVariant VOptional((long)DISP_E_PARAMNOTFOUND, VT_ERROR);
Workbooks objbooks = app.GetWorkbooks();
_Workbook objbook = objbooks.Add(VOptional);
Worksheets objsheets = objbook.GetWorksheets();
_Worksheet objsheet = objsheets.GetItem(COleVariant((short)1));

// get current date time
COleDateTime timeCurrent = COleDateTime::GetCurrentTime();

// setting date values
Range range;
range = objsheet.GetRange(COleVariant("A2"), COleVariant("B3"));
range.SetValue(COleVariant(timeCurrent));
//  range.SetNumberFormat(COleVariant("dd/mm/yyyy"));
range.SetNumberFormat(COleVariant("dddd, mmmm dd, yyyy"));

AfxMessageBox("Done..."); 
```

# java - RabbitMQ 将消息分组为一条消息，即合并消息

> ID：15070878
> 
> 赞同：2
> 
> 时间：2013-02-25T15:52:15.943
> 
> 标签：java, rabbitmq, amqp, spring-integration

我试图了解在 RabbitMQ 中合并或分块传入消息的最佳方法（直接使用 Spring AMQP 或 Java 客户端）。

换句话说，我想说 100 条传入消息并将它们组合为 1 并以可靠（正确`ACK`编辑的方式）将其重新发送到另一个队列。我相信这被称为 EIP 中的[聚合器](http://camel.apache.org/aggregator2.html)模式。

我知道 Spring Integration[提供了一个聚合器解决方案](http://static.springsource.org/spring-integration/docs/2.0.0.M3/spring-integration-reference/html/aggregator.html)，但实现看起来不是故障安全的（也就是说，它看起来必须确认并使用消息来构建合并的消息，因此如果你在它这样做时关闭它，你会丢失消息吗？ ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:49:07.017

我无法直接评论 Spring Integration 库，所以我将笼统地说 RabbitMQ。

如果您不是 100% 相信 Aggregator 的 Spring Integration 实现并且打算自己实现它，那么我建议避免`tx`在 RabbitMQ 的底层使用 which uses transactions。

RabbitMQ 中的事务很慢，如果您正在构建高流量/吞吐量系统，您肯定会遇到性能问题。

相反，我建议您查看*Publisher Confirms*，它是在 RabbitMQ 中实现的 AMQP 的扩展。这是新的[http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/](http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/)的介绍。

您需要调整预取设置以获得正确的性能，请查看[http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/](http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/)了解一些细节。

以上所有内容为您提供了一些背景知识来帮助您解决问题。实现相当简单。

创建消费者时，您需要确保将其设置为需要 ACK。

1.  出列 n 条消息，当您出列时，您需要记下每条消息的 DeliveryTag（这用于确认消息）
2.  将消息聚合成新消息
3.  发布新消息
4.  确认每个出队的消息

需要注意的一件事是，如果您的消费者在 3 之后和 4 完成之前死亡，那么那些未 ACK 的消息将在恢复时重新处理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:45:19.150

如果将`<amqp-inbound-channel-adapter/>` `tx-size`属性设置为 100，容器将每 100 条消息确认一次，因此这应该可以防止消息丢失。

但是，您可能希望使聚合消息的发送（在第 100 次接收时）具有事务性，以便您可以在入站消息的 ack 之前确认代理具有该消息。

# telerik - 如何使用 Telerik:RadAjaxManager 更新特定事件的控件

> ID：15070880
> 
> 赞同：2
> 
> 时间：2013-02-25T15:52:29.963
> 
> 标签：telerik, telerik-grid

我是 Telerik 控件的新手。

我正在使用以下代码异步更新我的控件。

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" DefaultLoadingPanelID =  "RadAjaxLoadingPanel1">

    <AjaxSettings>
        <telerik:AjaxSetting EventName="OnSelectedIndexChanged" AjaxControlID="grd_optnandprcng">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="Req_items"></telerik:AjaxUpdatedControl>                    
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager> 
```

正如我的代码所示，我只想在 grd_optnandprcng (rad gridview) 的 OnSelectedIndexChanged 事件上更新控件**Req_items** ( **rad** gridview **)**。

 ****但它不起作用。它对 radgridview 的每个事件的更新控制。

任何人都有解决此问题的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:23:20.267

是的，你肯定可以做到这一点。尝试这个：

1.  在 SelectedIndexChanged 事件上调用 javascript：

    ```
    <asp:GridView ID="grd_optnandprcng" runat="server" AutoGenerateColumns="False"   
               OnSelectedIndexChanged="myGrid_SelectedIndexChanged"> 
    ```

2.  从 javascript 中，使用 RadAjaxManager 发出 ajax 请求：

    ```
    function myGrid_SelectedIndexChanged(){
        $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest("RefreshReqItems");
    } 
    ```

3.  不要忘记修改您的 RadAjaxManager：

    ```
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" 
               DefaultLoadingPanelID="RadAjaxLoadingPanel1"
               OnAjaxRequest="RadAjaxManager1_AjaxRequest">
       <AjaxSettings>
           <telerik:AjaxSetting AjaxControlID="RadAjaxManager1">
                  <UpdatedControls>
                       <telerik:AjaxUpdatedControl ControlID="Req_items">
                       </telerik:AjaxUpdatedControl>                    
                 </UpdatedControls>
           </telerik:AjaxSetting>
       </AjaxSettings>
    </telerik:RadAjaxManager> > 
    ```

4.  做任何你需要做的事情来刷新你的项目：

    ```
    protected void RadAjaxManager1_AjaxRequest(object sender, Telerik.Web.UI.AjaxRequestEventArgs e)
    {
        if (e.Argument.Equals("RefreshReqItems"))
        {
            //Refresh something or rebind something else.
        }
    } 
    ```****

# c++ - 逻辑/关系表达式优化

> ID：15070881
> 
> 赞同：1
> 
> 时间：2013-02-25T15:52:30.027
> 
> 标签：c++, c, expression, logical-operators, relational

我需要优化表单的表达式：

```
(a > b) || (a > c) 
```

我尝试了几种优化形式，其中一种如下：

```
(a * 2) > (b + c) 
```

**优化不是从编译器的角度来看的。我想将两个 > 减为一个。**

这是基于 1 <= (a, b, c) <= 26 的假设

但是，这仅适用于某些情况。我正在尝试做的优化真的可能吗？如果是的话，一个开始会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:59:02.663

答案可能是：您不想优化它。此外，我怀疑是否有任何方法可以更有效地编写此代码。如果您说 a、b 和 c 是 1 到 26 之间的值，那么如果您想获得最佳（大小），则不应该使用整数（您不需要那种精度）。

如果 a > b，则表达式 a > c 无论如何都不会被执行。所以你最多有 2 个（至少 1 个）条件操作，这真的不值得优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:00:31.157

我很怀疑在大多数情况下这甚至是一种优化。

```
 a > b || a > c 
```

将评估为：

```
 compare a b
 jump not greater
 compare a c
 jump not greater 
```

在哪里

```
 a * 2 > b + c 
```

给出：

```
 shift a left 1 (in temp1)
 add b to c (in temp2)
 compare temp1 temp2
 jump if not greater 
```

与性能一样，将您的决定基于实际性能测量（最好基于选择的处理器架构）总是要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:16:23.277

我能想到的最好的就是这个

```
char a, b, c;
std::cin >> a >> b >> c;

if (((b-a) | (c-a)) & 0x80) {
    // a > b || a > c
} 
```

这样`gcc -O2`只生成一个条件分支

```
40072e:       29 c8                   sub    %ecx,%eax
400730:       29 ca                   sub    %ecx,%edx
400732:       09 d0                   or     %edx,%eax
400734:       a8 80                   test   $0x80,%al
400736:       74 17                   je     40074f <main+0x3f> 
```

这利用了输入值的约束，因为这些值不能大于 26，所以当 时减去`a`from`b`会给你一个负值`a > b`，在二进制补码中你知道`7`在这种情况下会设置位 - 这同样适用于`c`。然后我*OR*两者，以便该位`7`指示是否`a > b || a > c`，最后​​我们`7`通过*AND*与 0x80 进行检查并在其上进行分支。

**更新：**出于好奇，我计时了 4 种不同的编码方式。为了生成测试数据，我使用了一个简单的线性同余伪随机数生成器。我在一个循环中对它进行了 1 亿次迭代。为简单起见，我假设如果条件为真，我们希望将 5 添加到计数器，否则什么也不做。我`g++ (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2)`在`Intel Xeon X5570 @ 2.93GHz`使用`-O2`优化级别上对其进行计时。

这是代码（注释掉除一个条件变量之外的所有变量）：

```
#include <iostream>
unsigned myrand() {
    static unsigned x = 1;
    return (x = x * 1664525 + 1013904223);
}

int main() {
    size_t count = 0;
    for(size_t i=0; i<100000000; ++i ) {
        int a = 1 + myrand() % 26;
        int b = 1 + myrand() % 26;
        int c = 1 + myrand() % 26;

        count += 5 & (((b-a) | (c-a)) >> 31);       // 0.635 sec
        //if (((b-a) | (c-a)) & 0x80) count += 5;     // 0.660 sec
        //if (a > std::max(b,c)) count += 5;          // 0.677 sec
        //if ( a > b || a > c) count += 5;            // 1.164 sec
    }
    std::cout << count << std::endl;
    return 0;
} 
```

最快的是对我的回答中的建议进行修改，我们使用符号扩展来生成一个 32`1s`或 32的掩码，`0s`具体取决于条件是真还是假，并使用它来掩盖`5`正在添加的内容，以便添加5 或 0。此变体没有分支。时间在每一行的注释中。最慢的是原来的表情`( a > b || a > c)`。

# c - 我们需要什么存储分配？

> ID：15070883
> 
> 赞同：2
> 
> 时间：2013-02-25T15:52:30.713
> 
> 标签：c, memory-management, storage, memory-address

我们实际上需要手动分配存储空间是什么？

我能想到的唯一可能的任务是处理不适合 32 位整数的更大二进制数据。

它是否正确？其他用例是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:57:49.200

通常，每次在编译时不知道数据大小时，您都需要进行手动存储分配。几乎所有情况都分为两类：

*   您的程序必须从文件/网络/用户输入等中读取数据，并且在编译时不知道该数据的确切数量，或者
*   您的程序必须产生并存储一些输出，而在您编写程序时，您不知道该输出的确切数量。

当精确大小在运行时确定时，许多非常常见的数据结构假定能够分配任意大小的内存。这样做可以让数据结构动态地“增长”和“收缩”，因为程序的存储需求会随着时间和它处理的数据量而变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:54:32.687

大量的例子。分配内存以填充结构，例如链表结构。

# asp.net-mvc - Web API 404.0 错误

> ID：15070888
> 
> 赞同：0
> 
> 时间：2013-02-25T15:52:42.760
> 
> 标签：asp.net-mvc, visual-studio-2012, asp.net-web-api

对于我的问题，我已经完成了大量可能的解决方案，但我仍然无法让 Web API 在我的新开发机器上正常工作。我的旧开发机器和新机器都在 Windows 7 64 位上运行 Visual Studio 2012。在 Windows Server 2012 上运行的生产网站运行良好，但我无法让我的新计算机解析 Web api 调用。电话是：

```
http://localhost/clientsite/data/getdata?key=thiskey 
```

我确保没有安装 WebDAV，安装了所有各种 Web API 组件和 MVC 4，我目前正在使用以下配置条目：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules>
    <handlers>
      <remove name="WebDAV" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" resourceType="Unspecified" requireAccess="Script"/>
    </handlers>
  </system.webServer> 
```

有人知道我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:02:26.777

这最终成为我的一个愚蠢的错误，但希望这可能对其他人有所帮助。在我的路由表中，我有 routeTemplate: ads/{controller}/{id}:

这意味着上面的 URL 实际上需要是：

```
http://localhost/clientsite/data/ads/getdata?key=thiskey 
```

# object - 获取其他对象 Kinect 的深度

> ID：15070891
> 
> 赞同：0
> 
> 时间：2013-02-25T15:52:47.920
> 
> 标签：object, opencv, kinect, tracking, depth

我是 kinect 编程的新手，我正在使用 kinect 和 opencv 进行球跟踪。我们都知道 kinect 提供深度数据，代码如下：

```
DepthImagePoint righthandDepthPoint = 
    sensor.CoordinateMapper.MapSkeletonPointToDepthPoint
    (
        me.Joints[JointType.HandRight].Position, 
        DepthImageFormat.Resolution640x480Fps30
    );

double rightdepthmeters = (righthandDepthPoint.Depth); 
```

使用这个，我可以`MapSkeletonPointToDepthPoint()`通过指定关节类型来获得右手的深度。

是否可以通过在图像中指定位置来获取其他对象的深度？给定坐标..我想获得该坐标中对象的深度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:39:01.787

从 Kinect SDK 拉取深度数据可以从[DepthImagePixel](http://msdn.microsoft.com/en-us/library/microsoft.kinect.depthimagepixel.aspx)结构中提取。

下面的示例代码循环遍历整个`DepthImageFrame`以检查每个像素。如果您希望查看特定坐标，请删除`for`循环并将 and 设置`x`为`y`特定值。

```
// global variables

private const DepthImageFormat DepthFormat = DepthImageFormat.Resolution320x240Fps30;
private const ColorImageFormat ColorFormat = ColorImageFormat.RgbResolution640x480Fps30;

private DepthImagePixel[] depthPixels;

// defined in an initialization function

this.depthWidth = this.sensor.DepthStream.FrameWidth;
this.depthHeight = this.sensor.DepthStream.FrameHeight;

this.depthPixels = new DepthImagePixel[this.sensor.DepthStream.FramePixelDataLength];

private void SensorAllFramesReady(object sender, AllFramesReadyEventArgs e)
{
    if (null == this.sensor)
        return;

    bool depthReceived = false;

    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (null != depthFrame)
        {
            // Copy the pixel data from the image to a temporary array
            depthFrame.CopyDepthImagePixelDataTo(this.depthPixels);

            depthReceived = true;
        }
    }

    if (true == depthReceived)
    {
        // loop over each row and column of the depth
        for (int y = 0; y < this.depthHeight; ++y)
        {
            for (int x = 0; x < this.depthWidth; ++x)
            {
                // calculate index into depth array
                int depthIndex = x + (y * this.depthWidth);

                // extract the given index
                DepthImagePixel depthPixel = this.depthPixels[depthIndex];

                Debug.WriteLine("Depth at [" + x + ", " + y + "] is: " + depthPixel.Depth);
            }
        }
    }
} 
```

# wcf - 带有 basicHttpbinding 和 ssl 的 UserNamePasswordValidator

> ID：15070896
> 
> 赞同：0
> 
> 时间：2013-02-25T15:52:52.603
> 
> 标签：wcf

是否可以使用带有自定义 UserNamePasswordValidator 的 BasicHttpBinding 并具有传输安全性？

*   我曾尝试使用 wsHttpBinding，但是当我无法制作此链接中解释的 php soap 客户端时。 [使用 PHP 中的 SOAP wsHttpBinding](https://stackoverflow.com/questions/4642874/using-soap-wshttpbinding-from-php)
*   在本指南中，他们谈论的好像自定义 UserNamePasswordValidator 不会在 basicHttpBinding 中被调用。 [http://www.codeproject.com/Articles/36396/Difference-between-BasicHttpBinding-and-WsHttpBind](http://www.codeproject.com/Articles/36396/Difference-between-BasicHttpBinding-and-WsHttpBind)

我只是从 php soap 获得 InvalidSecurity，如果我跟踪错误`Security processor was unable to find a security header in the message. This might be because the message is an unsecured fault or because there is a binding mismatch between the communicating parties. This can occur if the service is configured for security and the client is not using security.`

目前我正在使用 basicHttpBinding with `TransportWithMessageCredential`with`clientCredentialType="UserName" />`

如果有必要，我会包含配置，但我只需要知道它是否可以完成，否则我想我必须在每个内部调用 validate 方法`[OperationContract]`？尚未对此进行测试，但看到其他人谈论它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:05:38.413

好的，我不知道它是如何工作的，但显然我一直都做对了。使它起作用的是，在我的 php 代码中，当我指定参数被命名的用户名和密码时。

```
$soapClient = new SoapClient("https://wsdl"), array('login' => "user123", 
                                                    'password' => "pass123")); 
```

在我的自定义用户名密码验证器中也是如此。我以前在这两个地方都有过`userName`，`Password`但没有用。所以我不知道有什么区别，但它现在可以工作了……也许其他人可以回答为什么它会这样工作。

# android - Android 4.x 上的性能

> ID：15070900
> 
> 赞同：0
> 
> 时间：2013-02-25T15:53:06.003
> 
> 标签：android

我在 android 4.x 版本上面临一些性能问题（UI 加载很慢），但我的应用程序在 android 2.x 设备上运行良好。即使是几个按钮的布局和编辑文本的加载速度也很慢是否需要进行任何特定的设置或调整才能使其正常工作。

请分享您的经验，因为我正在苦苦挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:57:20.970

我已经设法解决了这个问题，我们的问题现在已经解决了。我想分享我的经验，以便它也可以帮助其他人。

我们在做什么：我们**在 textview 中使用文本阴影作为文本，**这在 android 4.x 设备中产生了问题，但在 android 2.x 设备中完美运行。

我们做了什么：我们只是从 textview 中删除了阴影元素，现在它工作得非常好。

所以这是我们在 android 4.x 版本上的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:59:45.207

您可以`android:hardwareAccelerated="true"`在清单中包含。但在我看来，您在实际代码中存在更深层次的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:20:11.670

我已经用过但没区别

.java 和布局文件中什么都没有。它只是一个登录页面，只有用户点击登录按钮才能连接到服务器。这是我的布局文件中唯一的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@drawable/bg" >

    <!-- stitches for top, bottom, right, left -->

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:adjustViewBounds="true"
        android:scaleType="matrix"
        android:src="@drawable/stitch_top_full" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:adjustViewBounds="true"
        android:scaleType="matrix"
        android:src="@drawable/stitch_bottom_full" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:adjustViewBounds="true"
        android:scaleType="matrix"
        android:src="@drawable/stitch_left_full" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dp"
        android:adjustViewBounds="true"
        android:scaleType="matrix"
        android:src="@drawable/stitch_right_full" />

    <RelativeLayout
        android:id="@+id/login_body"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/login_img_radial_bg" >

        <ImageView
            android:id="@+id/login_logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="70dp"
            android:src="@drawable/login_img_logo" />

        <EditText
            android:id="@+id/login_membership_number"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/login_logo"
            android:layout_marginLeft="30dp"
            android:layout_marginRight="30dp"
            android:layout_marginTop="30dp"
            android:background="@drawable/textbox_layout_border"
            android:ellipsize="end"
            android:hint="@string/hint_cp_membership_number"
            android:maxLength="15"
            android:maxLines="1"
            android:paddingLeft="10dp"
            android:singleLine="true" />
        <!-- android:background="@drawable/login_textbox_bg" -->

        <EditText
            android:id="@+id/login_membership_password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/login_membership_number"
            android:layout_marginLeft="30dp"
            android:layout_marginRight="30dp"
            android:layout_marginTop="15dp"
            android:background="@drawable/textbox_layout_border"
            android:hint="@string/hint_cp_membership_password"
            android:inputType="textPassword"
            android:maxLength="15"
            android:paddingLeft="10dp"
            android:singleLine="true" />

        <LinearLayout
            android:id="@+id/login_row"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/login_membership_password"
            android:weightSum="1" >

            <LinearLayout
                android:id="@+id/login_stayloggedin_bg"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="30dp"
                android:layout_marginRight="5dp"
                android:layout_marginTop="10dp"
                android:layout_weight="0.60"
                android:background="@drawable/login_img_remeber_bg"
                android:orientation="horizontal" >

                <!-- android:background="@drawable/login_stay_loggedin_bg" -->

                <ToggleButton
                    android:id="@+id/login_stay_login_btn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|center_horizontal"
                    android:layout_marginLeft="5dp"
                    android:background="@drawable/login_stay_loggin_btn_drawable"
                    android:button="@null"
                    android:textOff=""
                    android:textOn="" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_gravity="center_vertical|center_horizontal"
                    android:layout_marginLeft="5dp"
                    android:ellipsize="end"
                    android:gravity="center_vertical|center_horizontal"
                    android:maxLines="2"
                    android:paddingRight="5dp"
                    android:text="@string/stay_login_label"
                    android:textColor="@color/white" />
            </LinearLayout>

            <RelativeLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginRight="30dp"
                android:layout_marginTop="10dp"
                android:layout_weight="0.40"
                android:background="@drawable/login_img_button_bg" >

                <Button
                    android:id="@+id/login_bttn"
                    style="@style/textView_style"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:background="@drawable/login_button"
                    android:text="@string/btn_title_login" />

            </RelativeLayout>
        </LinearLayout>
        <!-- </RelativeLayout> -->

        <TextView
            android:id="@+id/login_copyright"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/login_row"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="10dp"
            android:singleLine="true"
            android:textColor="@color/white"
            android:typeface="normal" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/login_slider_open"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@drawable/login_img_slider_open"
        android:visibility="visible" >

        <TextView
            style="@style/textView_style"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="15dp"
            android:paddingRight="15dp"
            android:text="@string/not_a_member_label" />

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="60dp"
            android:background="@drawable/common_img_largebuttonbg1" >

            <Button
                android:id="@+id/login_signup_bttn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:background="@drawable/login_img_btn_signup"
                android:text="@string/btn_title_sign_up"
                android:textColor="@android:color/black"
                android:textStyle="bold" />
        </RelativeLayout>

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/login_slider_close"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@drawable/login_img_slider_closed" >

        <TextView
            style="@style/textView_style"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="15dp"
            android:paddingRight="15dp"
            android:text="@string/not_a_member_label" />
    </RelativeLayout>

</RelativeLayout> 
```

# mysql - 根据另一个表中的内容仅选择一些条目

> ID：15070901
> 
> 赞同：0
> 
> 时间：2013-02-25T15:53:07.243
> 
> 标签：mysql

我正在尝试获取提供给尚未在其项目中排队的用户的所有优惠。因此，我`OfferSuggestionHeader`根据我的用户 ID 从表中获取报价，但也尝试确保它不会获取用户已经添加到他们的项目中的任何内容（存储在`Projects`表中）

我有以下查询：

```
SELECT DISTINCT ofh.OfferID, ofh.OfferTitle, ofh.OfferVendor, ofh.Savings,ofh.SavingsPercent
    FROM OfferSuggestionHeader ofh
LEFT JOIN OfferSuggestionDetail osd
    ON ofh.OfferID = osd.OfferID
LEFT JOIN Facilities f
    ON osd.FacilityID = f.id
LEFT JOIN UserFacility uf
    ON f.id = uf.fid
LEFT JOIN Users u
    ON uf.uid = u.uid
LEFT JOIN Projects p
    ON p.uid = u.uid
WHERE p.uid = '1' 
    AND ofh.OfferID <> ANY (SELECT offer_id FROM Projects WHERE uid = '1') 
```

它拉起所有的报价。如果我拿走，`ANY`那么我会收到一条错误消息，指出子查询返回的结果太多。

有6个优惠。三个由用户 1 排队。我不应该看到报价 1、4 或 5。

感谢您的任何指示和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:24:36.053

根据我的评论解释，为什么不试试这个？当您的主查询中已经有 PROJECT 表 JOINED 时，我不确定为什么需要子查询。

```
WHERE p.uid = '1' 
    AND ofh.OfferID NOT IN (1, 4, 5); 
```

# blackberry - 黑莓 java 广播流

> ID：15070902
> 
> 赞同：1
> 
> 时间：2013-02-25T15:53:08.703
> 
> 标签：blackberry, java-me, audio-streaming

我正在用 java 开发一个用于 BB 5.0 的广播应用程序。我找不到从我拥有的 url 流地址播放收音机的方法。我使用多种格式，但没有任何效果（.pls、.aac、.m3u）。`RuntimeException`每次我尝试播放流时都会得到一个。内容还可以，我查过了。

```
InputStream stream = Connector.openInputStream(urlPlay);
StreamConnection streamConnection = (StreamConnection) Connector.open(urlPlay, Connector.READ);
InputStream  readAhead = streamConnection.openDataInputStream();
byte[] audioData = new byte[500];
readAhead.read(audioData,0,audioData.length);
ByteArrayInputStream in2 = new ByteArrayInputStream(audioData);
player = javax.microedition.media.Manager.createPlayer(in2, "audio/aac");

System.out.println("REALIZE");
player.realize();                             
System.out.println("PREFETCH");
player.prefetch();
System.out.println("START");
player.start(); 
```

**编辑：**

当我使用我的 .pls 文件中的 URL 时，我听到了一点流媒体的声音，但它立即停止了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:05:25.170

我怀疑问题是您正在尝试播放播放列表文件而不是实际的流。通常，您需要自己解析这些文件以获取真实的流 URL。

如果您打开该`.m3u`文件，您会看到它只是一个 URL 列表。获取其中一个 URL，然后尝试。此外，请确保您设置了正确的内容类型。您可以使用 cURL 或 VLC 确定该类型。

# java - 调度带有参数的事件，以便在应用程序的其他部分可以捕获

> ID：15070910
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:53:26.767
> 
> 标签：java, events

我有一个大型 Java 应用程序。

每个负责特定任务的人。

我想做的是能够用一个类的参数调度事件，并能够在其他类中捕获它们并根据它们执行函数。

例如。

在其中一个类中，我有一个名为的函数，`userPuchaseGift4Himself`因此我想添加一个名为 USER_PURCHASE_GIFT_FOR_HIMSELF 的事件，该事件将具有 2 个参数，`userid`并且`amount`. 并且我希望代码的任何部分都能够向该事件添加事件侦听器，并在它连接到该事件时执行具有相关参数的代码，这些参数与事件一起分派。

任何人都可以提供一个如何做到这一点的例子吗？那真的很棒。

任何有关该问题的信息将不胜感激。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:57:49.917

检查[Google Guava 中的 EvenBus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)。

> EventBus 允许组件之间的发布-订阅式通信，而无需组件显式地相互注册（从而相互了解）。

# jquery - jQuery show or hide on click scrolls to page top

> ID：15070911
> 
> 赞同：0
> 
> 时间：2013-02-25T15:53:29.530
> 
> 标签：jquery

I have

```
<script>
$(document).ready(function() {
$("#closesrch").click( function (e) {
e.stopPropagation();
$(this).parent().parent().hide();
});

$("#basemaplink").click( function () {
$(".maplist").toggle('fast');
});
});
</script>

<div class="searches">
 <div class="advsearch">
      <a href="#" id="closesrch"><img src="images/icon_close.png" alt="close"></a>
      ADVANCED PROPERTY SEARCH
 </div>
 Contents here...
</div>

<div class="basemapdiv">
 <a href="#" id="basemaplink"><img src="images/btn_basemap.png" alt="basemap" class="basemapbtn"></a>
 <div class="maplist" style="display:none;">
 Contents here...
 </div>
</div> 
```

When the links are clicked it performs the show / hide functions but scrolls to top of the page because of

```
<a href="#"></a> 
```

What should be modified to prevent page scrolling?

Thank you,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:57:47.990

Change the links from

```
<a href="#"></a> 
```

to

```
<a href="javascript:void(0);"></a> 
```

This has the link call a dead end javascript function instead of navigating to the site.com/# url.

* * *

Other common ways to prevent jumping to the top of the page are:

Return false on the javascript handler. This prevents the default behavior of the link.

```
$('#blahblah').on('click', function(){
    // your code
    return false; // prevents the page jump
}); 
```

* * *

or just call preventDefault()

```
<a href="#" id="blahblah"></a>

$('#blahblah').on('click', function(e){
    e.preventDefault();
    // your code
}); 
```

* * *

or this

```
<a href="javascript: false;"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:54:34.070

Instead of `stopPropagation()`, use [`preventDefault()`](http://api.jquery.com/event.preventDefault/).

# php - 带有电子邮件提交的 Javascript 弹出框

> ID：15070912
> 
> 赞同：2
> 
> 时间：2013-02-25T15:53:30.437
> 
> 标签：php, javascript, html, forms

我目前已经设置了一个小问卷，最后会弹出一个框，上面写着“你完成了”。

我如何让这个包含一个额外的框，以便用户可以查看他们的答案，输入他们的电子邮件地址并单击提交，以便创建一封电子邮件并将他们的答案和联系方式发送给我上？

我会从我网站的其他地方复制一个简单的 html 表单，但我认为我无法将 html 输入到外部 .js 脚本中，所以我请专家寻求帮助。

以下代码应该没有任何内容，但这可能会帮助您帮助我。

问卷调查.js：

```
function QuestionnaireViewModel() {
    var self = this;
    var currentQuestionIndex = 0;

    var questions = [
        {
            caption: 'Q1?',
            answers: [
                { caption: 'Q1A1' },
                { caption: 'Q1A2' }
            ]
        },
        {
            caption: 'Q2',
            answers: [
                { caption: 'Q2A1' },
                { caption: 'Q2A2' }
            ]
        }, 
        {
            caption: 'Q3',
            answers: [
                { caption: 'Q3A1' },
                { caption: 'Q3A2' }
            ]
        },
        {
            caption: 'Q4',
            answers: [
                { caption: 'Q4A1' },
                { caption: 'Q4A2' }
            ]
        }
    ];

    self.currentQuestion = new ko.observable(questions[0]);
    self.progress = new ko.observableArray();

    self.selectQuestion = function (answer) {
        self.progress.push({ 
            question: questions[currentQuestionIndex].caption, 
            answer: answer.caption 
        });

        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            self.currentQuestion(questions[currentQuestionIndex]);
        } else {
            alert('Your done');
        }
    };
};

$(document).ready(function () {
    ko.applyBindings(new QuestionnaireViewModel());
}); 
```

表单 handler.php：

```
<?php 
    $errors = '';
    $myemail = 'name@domain.com';
    if(empty($_POST['name'])  || 
       empty($_POST['email']) || 
       empty($_POST['message']))
    {
        $errors .= "\n Error: all fields are required";
    }

    $name = $_POST['name']; 
    $email_address = $_POST['email']; 
    $message = $_POST['message']; 

    if (!preg_match(
    "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i",
    $email_address))
    {
        $errors .= "\n Error: Invalid email address";
    }

    if( empty($errors))
    {
        $to = $myemail; 
        $email_subject = "Contact form submission: $name";
        $email_body = "You have received a new message. "
                    . " Here are the details:\n Name: $name \n "
                    . "Email: $email_address \n Message \n $message"; 

        $headers = "From: $myemail\n"; 
        $headers .= "Reply-To: $email_address";

        mail($to,$email_subject,$email_body,$headers);
        //redirect to the 'thank you' page
        header('Location: thankyou.html');
    } 
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
    <head>
        <title>Contact form handler</title>
    </head>

    <body>
        <!-- This page is displayed only if there is some error -->
        <?php
            echo nl2br($errors);
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:07:48.257

如果您希望他们能够从弹出窗口中更改他们的答案，那么您不能通过警报来做到这一点。如果您只想向他们展示他们的答案，并有一个邮箱地址框，这可能会完成。

如果您只想通过一个输入电子邮件地址的框来显示他们的答案，您可以尝试[弹出提示](http://www.w3schools.com/js/js_popup.asp)。

如果您希望他们能够从弹出框中更改他们的答案，您可能必须自己创建它。像[这样](http://smashingspy.com/32-best-jquery-popup-window-dialog-box-example/)的东西。

# php - 允许一个表单提交 cookie

> ID：15070914
> 
> 赞同：1
> 
> 时间：2013-02-25T15:53:32.397
> 
> 标签：php, forms, cookies, submission

我有一个表单，但我希望每个用户只发送一次，所以我想设置一个 cookie 来做到这一点。如何更改我的脚本？

我的 PHP 脚本：

```
<?php
if (isset($_COOKIE["Form"]) == 1)
{
//Hide form
exit();
}
if ( $_GET['value'] <> "")
{   
$adress = 'Receiver@mysite.com';
$subject = 'SUBJECT';
$text = 'TEXT';
mail($adress,
$subject,   
$text,
'From: someone@mail.here');
  $handle = fopen ( "some-doc.txt", "a" );

  fwrite ( $handle, $_GET['value'] );

fclose ( $handle );

echo "Thanks";
setcookie("Form", 1, time()+3600*24*60); // Line 108
exit;
}
?> 
```

错误信息

```
Warning: Cannot modify header information - headers already sent by (output started at
form.php:6) in 
form.php on line 108 
```

我改变了它，但现在我得到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:56:34.393

将该行`setcookie("Schule", 1, time()+3600*24*60);`放在退出语句之前，并将“Schule”替换为“Form”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:57:52.350

我看到你做了：

```
setcookie("Schule", 1, time()+3600*24*60); 
```

然后使用类似的方法：

```
setcookie("Form", 'yes', time()+3600*24*60); 
```

现在：

```
if (isset($_COOKIE["Form"]) && $_COOKIE["Form"] == 'yes')
{
//Hide form
exit();
} 
```

# view - 使用 cleartool 查找 ClearCase 交付目标视图

> ID：15070918
> 
> 赞同：1
> 
> 时间：2013-02-25T15:54:02.853
> 
> 标签：view, clearcase, target, snapshot

我在 Windows 上使用带有快照视图的 ClearCase。

有没有办法使用 cleartool 确定哪个视图将用于交付？

如果有一种涉及在注册表中挖掘的方法也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:52:57.317

不，您可以在目标流上使用任何视图来交付。

交付完成后，不会记录视图本身。

但是，在交付期间，a`cleartool deliver -status`会告诉您当前用于所述交付的视图。

# ios - 启动远程程序时出错：正在启动或挂起

> ID：15070919
> 
> 赞同：16
> 
> 时间：2013-02-25T15:54:07.297
> 
> 标签：ios, objective-c, xcode, xcode4.6

在实际设备上而不是在模拟器上启动我的应用程序时，我突然收到此错误，它似乎运行良好。

我试过从 iPad 上删除应用程序。我还尝试`~/Library/Developer/Xcode/DerivedData`按照此处问题中的建议清除类似（但不相同）的错误消息。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-25T16:17:45.720

当我有这个通常是因为 iPad 被锁定（而不是因为我的 Mac 上的任何东西）。您是否尝试过按住电源和主页按钮重新启动 iPad？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T04:27:46.780

这可能是因为您中断了正在进行的构建。要修复它，请清理您的项目并重新运行它。如果您的设备仍然卡住，请进行硬重启。

# redis - Servicestack REDIS CacheClient 使用密码失败

> ID：15070921
> 
> 赞同：1
> 
> 时间：2013-02-25T15:54:09.610
> 
> 标签：redis, servicestack

我正在将系统转向生产，其中一部分涉及将用于身份验证缓存的 REDIS 服务器从在开发盒上运行的服务更改为更合适的环境。新盒子是一对（目前）配置为**带有密码的主机和从机**

我连接到 REDIS 的代码遵循标准模式：

```
 container.Register<IRedisClientsManager>(c => new PooledRedisClientManager("localhost:6379"));
  container.Register<ICacheClient>(c => (ICacheClient)c.Resolve<IRedisClientsManager>().GetCacheClient()); 
```

对于新盒子，我已将其修改为：

```
string[] ReadWriteHosts = new[] {
        "XYZ@10.10.10.10:6379"
        };

string[] ReadOnlyHosts = new[] {
        "XYZ@10.10.10.11:6379"
        };

var REDISClientManager = new PooledRedisClientManager(ReadWriteHosts, ReadOnlyHosts);
container.Register<IRedisClientsManager>(REDISClientManager);
container.Register<ICacheClient>(c => (ICacheClient)c.Resolve<IRedisClientsManager>().GetCacheClient()); 
```

当我启动应用程序并尝试登录时，我收到：

```
'base.UserSession' threw an exception of type 'ServiceStack.Redis.RedisResponseException'

"Client sent AUTH, but no password is set, sPort: 0, LastCommand: " 
```

我还没有设法一直遵循它，只是想知道是否有人能看到任何明显错误的东西。

# r - 一种快速计算点到 R 中 y=x 的正交距离的方法

> ID：15070926
> 
> 赞同：3
> 
> 时间：2013-02-25T15:54:33.670
> 
> 标签：r, distance, orthogonal

我周围有一堆点`y=x`（见下面的例子），我希望计算每个点到 this的**正交距离**`y=x`。假设一个点有坐标`(a,b)`，那么很容易在`y=x`有坐标上看到投影点`((a+b)/2, (a+b)/2)`。我使用以下本机代码进行计算，但我认为我需要**一个**没有`for`循环的更快的代码。非常感谢你！

```
set.seed(999)
n=50
typ.ord = seq(-2,3, length=n)   # x-axis
#
good.ord = sort(c(rnorm(n/2, typ.ord[1:n/2]+1,0.1),rnorm(n/2,typ.ord[(n/2+1):n]-0.5,0.1)))
y.min = min(good.ord)
y.max = max(good.ord)
#
plot(typ.ord, good.ord, col="green", ylim=c(y.min, y.max))
abline(0,1, col="blue")
# 
# a = typ.ord
# b = good.ord
cal.orth.dist = function(n, typ.ord, good.ord){
  good.mid.pts = (typ.ord + good.ord)/2
  orth.dist = numeric(n)
  for (i in 1:n){
    num.mat = rbind(rep(good.mid.pts[i],2), c(typ.ord[i], good.ord[i]))
    orth.dist[i] = dist(num.mat)
  }
  return(orth.dist)
}
good.dist = cal.orth.dist(50, typ.ord, good.ord)
sum(good.dist) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:15:27.473

一样容易

```
good.dist <- sqrt((good.ord - typ.ord)^2 / 2) 
```

这一切都归结为计算点和线之间的距离。在 2D 的情况下`y = x`，这变得特别容易（自己尝试一下）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:02:02.230

在更一般的情况下（扩展到可能超过二维空间的其他行），您可以使用以下内容。它的工作原理是从您想要将点投影到的子空间（这里是向量）构造一个[投影矩阵](http://en.wikipedia.org/wiki/Projection_%28linear_algebra%29#Orthogonal_projections) 。从点中减去投影分量会留下正交分量，因此很容易计算距离。`P``A``x`

```
x <- cbind(typ.ord, good.ord)          # Points to be projected
A <- c(1,1)                            # Subspace to project onto
P <- A %*% solve(t(A) %*% A) %*% t(A)  # Projection matrix P_A = A (A^T A)^-1 A^T
dists <- sqrt(rowSums(x - x %*% P)^2)  # Lengths of orthogonal residuals 
```

# web-services - c# 应用程序连接问题

> ID：15070934
> 
> 赞同：0
> 
> 时间：2013-02-25T15:54:51.933
> 
> 标签：web-services, connectivity

我是 C# 新手，如果有人能就以下问题提供一些见解，我将不胜感激：我编写了 ac# 应用程序，它可以获取网站的 html 内容，非常简单地使用 webclient。问题是，如果我为多个网站运行它，我会发现有时我对其中一些网站没有任何结果，就像在那个实例中它从未连接到该网站一样。我最初认为这是我的互联网连接，但当我尝试使用不同的 wifi 时也发生了同样的情况。值得一提的是，当我尝试连接到 Web 服务时，我的另一个应用程序也遇到了同样的问题。我的问题是：有人知道如何解决这个问题吗？它与类似的超时时间有关吗？

非常感谢您提前

这是代码，但这并不是真正的编码问题：

```
var client = new WebClient();
try
{
  var htmlcode = client.DownloadString(site);
  int NumberOfTrues = Regex.Matches(htmlcode.ToLower(), key).Count;
}
catch (Exception)
{
   messagebox.show("could not be loaded");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:31:09.763

这是通过在应用程序配置中定义默认代理服务器来解决的。

# python - 用于 Trac 的 subversion 1.6.x(1.7.x) python 2.6+ 绑定

> ID：15070940
> 
> 赞同：1
> 
> 时间：2013-02-25T15:55:08.373
> 
> 标签：python, svn, swig, trac

我有 Trac 0.12rc1（由某人定制）​​它需要 python 颠覆绑定才能与 svn repos 一起使用。但是我所有编译库的尝试都以：

make 中的最后一个命令：

```
/bin/sh /usr/local/src/subversion-1.6.20/libtool --tag=CC --silent --mode=compile gcc -pthread -fPIC -g -O2   -pthread -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE  -I/usr/local
/src/subversion-1.6.20/subversion -I/usr/local/src/subversion-1.6.20/subversion/include
-I/usr/local/src/subversion-1.6.20/subversion/bindings/swig -I/usr/local/src/subversion-1.6.20/subversion/bindings/swig/include 
-I/usr/local/src/subversion-1.6.20/subversion/bindings/swig/proxy 
-I/usr/local/src/subversion-1.6.20/subversion/bindings/swig/proxy 
-I/usr/include/apr-1  -I/usr/include/apr-1  -I/usr/include/python2.6 
-I/usr/local/src/subversion-1.6.20/subversion/bindings/swig/python/libsvn_swig_py
-prefer-pic -c -o subversion/bindings/swig/python/svn_client.lo subversion/bindings
/swig/python/svn_client.c 
```

它的输出的最后一部分（所有时间看起来都一样）：

```
subversion/bindings/swig/python/svn_client.c:23637: error: expected ‘)’ before ‘*’ token
subversion/bindings/swig/python/svn_client.c: In function ‘init_client’:
subversion/bindings/swig/python/svn_client.c:23690: error: ‘PyObject’ undeclared (first use in this function)
subversion/bindings/swig/python/svn_client.c:23690: error: ‘m’ undeclared (first use in this function)
subversion/bindings/swig/python/svn_client.c:23690: error: ‘d’ undeclared (first use in this function)
subversion/bindings/swig/python/svn_client.c:23693: error: ‘SwigMethods’ undeclared (first use in this function) 
```

我尝试了什么：Python：

*   2.4（工作，但我们的 Trac 不能正常工作）
*   2.6 “make swig-py”失败
*   2.7 “make swig-py”失败

颠覆：

*   1.6.17
*   1.6.20
*   1.7.8

痛饮：

*   2.0.9
*   1.3.29

有没有人成功为 python2.6+ 构建颠覆绑定？有可能吗？是否可以为 RHEL\OEL\CentOS 5.x 找到任何预构建的二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:46:42.400

我已联系 Trac-users 邮件列表，他们提供了解决方案。它是用于 rpm 构建的规范文件的补丁。将补丁应用到包后，一切正常。

[https://groups.google.com/d/topic/trac-users/BVVnh9I17Po/discussion](https://groups.google.com/d/topic/trac-users/BVVnh9I17Po/discussion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:08:12.887

使用这个：[http ://egao1980.blogspot.com/2011/03/installing-trac-and-subversion-with.html](http://egao1980.blogspot.com/2011/03/installing-trac-and-subversion-with.html)

下面从网站复制粘贴：

*   安装 RPMForge 存储库`rpm -ihv http://download.fedora.redhat.com/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm`

*   很高兴拥有 `yum install bash-completion`

*   `[base]`和`[updates]`repos中的黑名单颠覆

`vim /etc/yum.repos.d/CentOS-Base.repo`

```
[base]
exclude=subversion
exclude=subversion-devel
...
[updates]
exclude=subversion
exclude=subversion-devel
... 
```

*   从中获取 1.6.6 Subversion 安装脚本`www.wandisco.com`并按照说明进行安装。

*   安装 MySQL。 `yum install mysql mysql-devel`

*   安装 Python 2.5、Trac 并重建 mod_pythonaccordig 到Installing-python-25-on-centos-5 和Installing-trac-on-centos-5。

*   构建 Subversion 绑定：

**获取 Sqlite：**

```
wget http://www.sqlite.org/sqlite-autoconf-3070500.tar.gz
tar xzvf sqlite-autoconf-3070500.tar.gz && cd sqlite-autoconf-3070500 && make && make install 
```

**获取并构建 SWIG**

```
wget http://downloads.sourceforge.net/project/swig/swig/swig-2.0.2/swig-2.0.2.tar.gz
tar xzvf swig-2.0.2.tar.gz && ./configure --with-python=/usr/bin/python25 --prefix=/usr && make && make install 
```

**构建 Python 2.5 颠覆绑定**

```
wget http://subversion.tigris.org/downloads/subversion-1.6.16.tar.bz2
tar xjvf subversion-1.6.16.tar.bz2 && cd subversion-1.6.16
./configure PYTHON=/usr/bin/python25 --with-sqlite=/usr/local && make && make swig-py && make install-swig-py
echo /usr/local/lib/svn-python > /usr/lib/python2.5/site-packages/svn.pth 
```

此时，您应该将 Subversion 1.6.6、Trac 0.12、MySQLDb 1.2.2 和 mod_python 配置为与 Python 2.5 一起运行。

# android - 通过 findViewById 获取 AlertDialog 标题

> ID：15070944
> 
> 赞同：6
> 
> 时间：2013-02-25T15:55:16.827
> 
> 标签：android, android-alertdialog

我试图通过使用这个函数来改变 AlertDialog 字体

```
private void saveDialog(){

    AlertDialog.Builder builder = new AlertDialog.Builder(this); 
        builder.setTitle(res.getString(R.string.dialog_title))
               .setMessage(res.getString(R.string.dialog_saveconfirm)) 
               .setCancelable(false)
               .setNegativeButton(res.getString(R.string.dialog_cancel), new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                 }
               })
               .setPositiveButton(res.getString(R.string.dialog_ok), new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    //do some thing
            });
        AlertDialog alert = builder.create();
        alert.show();

        TextView tit = (TextView) alert.findViewById(android.R.id.title);
        TextView msg = (TextView) alert.findViewById(android.R.id.message);
        Button btn2 = alert.getButton(DialogInterface.BUTTON_NEGATIVE);
        Button btn1 = alert.getButton(DialogInterface.BUTTON_POSITIVE);
        tit.setTypeface(UtiliShare.getTf());
        msg.setTypeface(UtiliShare.getTf());
        btn1.setTypeface(UtiliShare.getTf());
        btn2.setTypeface(UtiliShare.getTf());

} 
```

当我在 Activity 中调用函数时，我设置`02-25 17:59:04.759: E/AndroidRuntime(1014): java.lang.NullPointerException`了`tit`字体但当我删除`tit`对话框时效果很好。

我认为其中的错误`TextView tit = (TextView) alert.findViewById(android.R.id.title);`是返回null。

我该如何解决这个问题？

* * *

**更新** 此链接包含我的问题答案的[答案](https://stackoverflow.com/a/9183354/2059970)

感谢[山姆](https://stackoverflow.com/users/1267661/sam)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:02:58.383

为了以您想要的方式更改文本视图，我建议对对话框使用自定义布局。看一下

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T15:22:13.673

如果你正在使用`android.support.v7.app.AlertDialog`，你必须使用 `android.support.v7.appcompat.R.id.alertTitle`否则使用`android.R.id.title`

# xpages - 使用预定的 LotusScript 或 Java 代理运行 XAgent

> ID：15070945
> 
> 赞同：2
> 
> 时间：2013-02-25T15:55:22.160
> 
> 标签：xpages

由于没有预定的服务器端javascript 代理，我想使用预定的LotusScript 或Java 代理定期调用XAgent，即调用XAgent 的url。在 LotusScript 中，代理（初始化）的代码如下所示：

```
Dim w As New NotesUIWorkspace
w.Urlopen "http://domain/db.nsf/XAgent.xsp" 
```

当我直接调用 XAgent 的 url（在浏览器中）时，它会成功执行。然而，当我使用上面的代理调用 XAgent 时，它并没有被执行。谁能告诉我我做错了什么和/或提供另一种解决方案，例如 Java 代理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:11:59.487

如果您使用 Java 代理，您始终可以使用 java.net.* 类打开 URL，或使用 Apache HTTP 客户端库。请参阅[http://docs.oracle.com/javase/6/docs/api/java/net/URL.html](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)以供参考。

# php - 将下拉列表值传递给codeigniter中的控制器

> ID：15070947
> 
> 赞同：0
> 
> 时间：2013-02-25T15:55:35.533
> 
> 标签：php, html, codeigniter, drop-down-menu

嗨，我已经能够使用 codeigniter 将图像路径上传到数据库，但我似乎无法将类别选项传递给数据库。我有带有 2 个选项的下拉菜单，然后我想将它传递给控制器​​，以便我可以将其插入数据库。

这是我的代码：

我的观点

```
<html>
<head>
<title>Upload Form</title>
</head>
<body>

<?php echo $error;?>

<?php echo form_open_multipart('upload/do_upload');?>

<input type="file" name="userfile" size="20" />
<br />
<select name="album" id="album"> // my dropdown list
    <option value="staff">Album Staff</option>
    <option value="gallery">Gallery</option>
</select>
<br /><br />

<input type="submit" value="upload" />

</form>

</body>
</html> 
```

这是我的控制器

```
<?php

class Upload extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
    }

    function index()
    {
        $this->load->view('upload_form', array('error' => ' ' ));
    }

    function do_upload()
    {
        $config['upload_path'] = './assets/images';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '1000';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
        $config['overwrite'] = TRUE;
        $config['remove_spaces'] = TRUE;
        $config['encrypt_name'] = FALSE;
        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('upload_form', $error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
            $upload_info=$this->upload->data();
            $insert_data = array(
            'imgfilename' => $upload_info['file_name'],
            'imgfilepath' => $upload_info['file_path'],
            'album' => $this->input->post('album') //trying to get the value from select in view
            );
            $this->db->insert('db_images', $insert_data);

        }
    }
}
?> 
```

应该怎么做？任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:43:35.403

你试过用`mysql_real_escape_string($_POST["album"])`看看它是如何工作的吗？将 global_xss_filter 设置为 true 可以保护/影响一些事情。奇怪的是，你不能总是知道是什么干扰了你的代码。这就是为什么你应该有多个选择。试试上面的行，看看你是否得到结果。如果你这样做，你可以这样做：

```
$album = "";
$albums = array("gallery", "staff"); //restrict types of allowed albums
$str = mysql_real_escape_string($_POST["album"]); //clean up the string

if(in_array($str, $albums)){
$album = $str; //get the album to send to database
} 
```

# java - 从变更集中获取组件名称

> ID：15070959
> 
> 赞同：1
> 
> 时间：2013-02-25T15:56:15.447
> 
> 标签：java, rtc, jazz

我有一个与变更集关联的组件。

现在我需要从变更集中获取组件名称而不是 .getItemId()

我设法获取了 IComponentHandle 对象。我一直在寻找一种从 IComponentHandle 获取组件名称的方法。...你能帮我进去吗！

```
 IComponentHandle component = changeSet.getComponent();
  IConfiguration configuration = workspaceConnection.configuration(component); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:19:25.890

如果你有：

```
IProgressMonitor monitor;
ITeamRepository repository; 
```

您可以使用：

```
IComponentHandle componentHandle= changeSet.getComponent();

IComponent component = (IComponent) repository.itemManager().fetchCompleteItem(componentHandle, IItemManager.DEFAULT, monitor); 
```

要获取组件并使用：

```
component.getName() 
```

# php - 在 codeigniter 的数据库下拉列表中选择一个项目

> ID：15070960
> 
> 赞同：0
> 
> 时间：2013-02-25T15:56:17.983
> 
> 标签：php, codeigniter

我有一个从 codeigniter 中的汽车模型数据库填充的下拉列表。

当用户在下拉列表中选择值（例如雷克萨斯、本田等）时，应加载所选制造商的汽车列表。然而，没有任何效果。这是我当前的代码。

```
//controller
public function carsPage() {
    $this->load->model('model_users');
    $data3['images'] = $this->model_users->getRow();
    $data['tags'] = $this->model_users->get_dropdown_tags();
    $newData = array_merge($data, $data3);
    $this->load->view('cars', $newData);
}

//model
function get_dropdown_tags() {
    //select distinct car_make from cars
    $tags = $this->db->query("SELECT distinct car_make from cars");
    $dropdowns = $tags->result();
    foreach ($dropdowns as $dropdown)
    {
        $dropdownlist[$dropdown->car_make] = $dropdown->car_make;
    }
    $finaldropdown = $dropdownlist;
    return $finaldropdown;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:25:50.230

我有一个关于你想要问/做什么的理论，这可能会奏效。

控制器：

```
public function carsPage() {

$this->load->model('model_users');
$data['images'] = $this->model_users->getRow();
$data['tags'] = $this->model_users->get_dropdown_tags();
$this->load->view('cars', $data);
} 
```

模型：

```
public function get_dropdown_tags($car=NULL){

    $this->db->select('car_make');    
    $this->db->from('cars');
    $this->db->where('car_make', $car);
    return $this->db->get();

} 
```

# c# - 在会话中传递密码

> ID：15070964
> 
> 赞同：0
> 
> 时间：2013-02-25T15:56:21.917
> 
> 标签：c#, asp.net

我正在尝试将密码设置`textbox`回 a `checkbox`is 和 has之前输入的文本`AutuoPostback`。

```
Session["passwordText"] = txt_Password.Text; 
```

这是在我的 pageLoad 上，然后我尝试在我的中添加（下面），`CheckedChanged`但它说 Method`Add`有 2 个参数并用 1 个参数调用？我应该包括什么`passWord`。

```
var passWord = Session["passwordText"].ToString();

txt_Password.Attributes.Add(passWord); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:58:03.177

```
txt_Password.Attributes.Add("value", passWord); 
```

或者为什么不

`txt_Password.Text = passWord;`?

# javascript - 如何从 asp.net mvc 项目中的脚本正确引用图像文件？

> ID：15070969
> 
> 赞同：5
> 
> 时间：2013-02-25T15:56:29.980
> 
> 标签：javascript, html, asp.net-mvc

我在我的网站的子目录（即 www.example.com/go/）上运行了一个 asp.net 应用程序，并且在一个 .js 脚本文件中，我试图引用我项目的 Images 目录中的图像。

当我使用`/Images/add.png`引用图像时，我可以在调试模式下看到图像，但在应用程序发布时看不到（在调试模式下，应用程序只在 logalhost:port# 上运行，而不是在 /go/ url 路径下） . 当我使用`go/Images/add.png`引用图像时，我可以在已发布的 Web 应用程序上看到图像，但在调试模式下测试时看不到。从我的脚本中引用图像资源的正确方法是什么，以便我可以在生产和调试模式下看到它？

**编辑**

由于某种原因，相对路径不起作用。我已经尝试过`./Images/add.png`和`../Images/add.png`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:58:20.590

您可以创建一个指向图像的全局 javascript 变量：

```
<script type="text/javascript">
    var imageUrl = '@Url.Content("~/images/add.png")';
</script> 
```

然后在你的javascript文件中，你可以使用这个全局变量来引用图像位置，而不是硬编码它的值，正如你已经发现的那样，当你在虚拟目录中发布应用程序时，它不起作用。

不用说，这个脚本应该包含在实际使用这个 javascript 变量的脚本**之前的视图中。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:00:12.037

如果您的脚本与您的 MVC 视图不是分开的，那么只需`var image = @Url.Content("~/Images/add.png")`在您的脚本中使用。

否则，请使用相对路径，因为您知道脚本文件的位置以及图像彼此相对的位置：

```
../Images/add.png 
```

或者使用 MVC 获取内容的相对路径并将其添加到您使用脚本读取的元素中：

```
<div id="myDiv" data-image="@Url.Content("~/Images/add.png")"></div>

var imageUrl = document.getElementById('myDiv').attributes["data-image"].value; 
```

示例 - [http://jsfiddle.net/hbBKs/1/](http://jsfiddle.net/hbBKs/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:59:49.030

您需要根据脚本从相对路径中引用图像，以便它可以

```
../images/file.jpg 
```

或者您需要在 Javascript 中包含一些 .Net

```
var image = '@Url.Content("~/uploads/file.jpg")'; 
```

'~' 符号表示从项目的根目录开始（即使是一个子文件夹）

# javascript - Require.js 优化器 - 麻烦开始了

> ID：15070974
> 
> 赞同：1
> 
> 时间：2013-02-25T15:56:39.977
> 
> 标签：javascript, requirejs, r.js

早上好，

今天早上我一直在搞乱 Require.js 优化器，并且在开始时遇到了麻烦。

我正在运行 Windows 8，并创建了一个模块化的backbone.js 应用程序，我现在可以将其打包以进行部署（生产）。我现在想优化这些文件（concat 和最小化），r.js 优化器似乎只是把戏。

我遇到的问题是尝试运行类路径命令时。

```
java -classpath path/to/rhino/js.jar;path/to/closure/compiler.jar org.mozilla.javascript.tools.shell.Main r.js main.js 
```

将抛出错误 - 错误：无法找到或加载主类 org.mozilla.javascript.tools.shell.Main

我很困惑，因为我不确定那个包应该在哪里，它不是已经是优化器/编译器的一部分了吗？

我的目录结构如下

```
build - 
compiler.js
js.jar
r.js

app
js -> backbone and application files here
css
images 
```

我非常感谢任何可以对此有所了解的信息，这是我第一次运行 require.js 优化器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:55:50.013

您使用的命令尝试作为入口点运行`r.js`，`main.js`而不是执行优化（请记住，优化器不是 的主要组件`r.js`）。您可能在[r.js README](https://github.com/jrburke/r.js)中找到了该命令；正确的命令在同一个文件中，在“优化器”部分：

```
java -classpath path/to/rhino/js.jar;path/to/closure/compiler.jar org.mozilla.javascript.tools.shell.Main r.js -o path/to/buildconfig.js 
```

您需要一个构建配置文件，在您的情况下应该相当简单。更多信息直接在[RequireJS 页面上](http://requirejs.org/docs/optimization.html#basics)。

我强烈推荐使用`Node.js`而不是 Rhino，它更快并且节省了设置 Java 依赖项/类路径。

# php - PHP无法上传rar文件

> ID：15070977
> 
> 赞同：-3
> 
> 时间：2013-02-25T15:56:45.610
> 
> 标签：php, file-upload, rar

我需要你的帮助。我正在尝试上传 RAR 存档，但没有任何好的结果，但我可以上传任何其他文件。我以为我的 php 脚本坏了，但是当我尝试最简单的脚本时，比如这个[http://pastebin.com/GEHkgQz2](http://pastebin.com/GEHkgQz2)，它只显示变量 $_FILES，我看到了这个：Array ([filename] => Array ( [name] => test.rar [type] => [tmp_name] => [error] => 1 [size] => 0 ) ) 为什么会出现这个错误？那是什么意思？我必须做什么才能上传这个文件？对不起我的英语 - 我曾经读过，但不会写 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:58:34.487

上传的文件超过了 php.ini 中的 upload_max_filesize 指令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:05:55.700

确认您对上传功能进行了编码以接受 .rar 扩展名...

# css - TR 中的最后一个 TD 和倒数第二个 TD (CSS / LESS)

> ID：15070978
> 
> 赞同：5
> 
> 时间：2013-02-25T15:56:49.767
> 
> 标签：css, css-selectors, less

**在 Google 和 stackoverflow 之后，**我仍然无法解决这个问题：

我有一张大约有十几行的桌子。其中一行如下所示：

```
<tr class="rvw-product-total">
    <td colspan="2"></td>
    <td>Total:</td>
    <td>$180.67</td>
</tr> 
```

此行中的最后两个 TD（总计和 180.67 美元）应该有绿色`background-color`和`bold`文本。

所以我可以像这样在 CSS/LESS 中完成这个：

```
tr[class="rvw-product-total"]:last-child td, tr[class="rvw-product-total"]:nth-child(n+2) td {
    font-weight: bold;
    background-color: #DFF0D8;
} 
```

这使得`background-color`整行的绿色。

然后我尝试将`background-color`第一个 TD 显式设置为白色，如下所示：

```
tr[class="rvw-product-total"]:first-child td {
    background-color: #fff;
} 
```

但是整排仍然是绿色的`background-color`，我只是好奇我在这里做错了什么？

这是关于 jsfiddle 的快速演示：http: [//jsfiddle.net/acegyver/EYVvc/2/](http://jsfiddle.net/acegyver/EYVvc/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:02:27.433

第一个选择器应该是：

`table.prod-rvw-tbl tr[class="rvw-product-total"] td:last-child,`

第二个选择器应该是：

`table.prod-rvw-tbl tr[class="rvw-product-total"] td:nth-child(n + 2)`

[小提琴](http://jsfiddle.net/EYVvc/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:02:20.913

您应该将`:first-child`最后一个选择器移至`td`.

```
table.prod-rvw-tbl tr[class="rvw-product-total"] td:first-child {
    background-color: #fff;
} 
```

顺便说一句，你的选择器太[复杂](http://www.stevesouders.com/blog/2009/06/18/simplifying-css-selectors/)了。降低它对性能更好。如果您只是在`<tr>`此表的 s 上有 .rvw-product-total 类，则放置以下选择器就足够了：

```
.rvw-product-total td:first-child {} 
```

我转动了选择器并覆盖了而`:first-child`不是使用`:last-child`，因为它得到了[更好的支持](http://quirksmode.org/css/selectors/#link6)。我还包括了速记属性`background`而不是`background-color`.

这应该适合你：http: [//jsfiddle.net/acegyver/EYVvc/2/](http://jsfiddle.net/acegyver/EYVvc/2/)

# android - 如何检测设备是否被笔/棍子或其他东西轻敲

> ID：15070979
> 
> 赞同：0
> 
> 时间：2013-02-25T15:56:49.990
> 
> 标签：android, events, android-sensors

嗨，我想知道平板电脑是否被棍子轻轻击中。我想也许实施加速度计应该这样做。但我所看到的人们都在试图用它来寻找震动动作。如果平板电脑被窃听，有什么方法可以找到吗？谢谢。

编辑：通过说点击我的意思是点击平板电脑的顶部。不在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:20:07.907

我想说检测点击的更简单方法是测量 MotionEvent.ACTION_DOWN 和相应的 ACTION_UP 之间的时间 - 如果它小于 350 毫秒，则用户可能正在点击而不是按下或一些另一种手势。

考虑如下内容，其中 TAP_CONSTANT 将是一个用于点击持续时间的整数常量：

```
private class TapListener implements OnTouchListener
{
    long time;

    @Override
    public boolean onTouch(View v, MotionEvent event)
    {

        if (event.getAction() == MotionEvent.ACTION_DOWN)
        {
            time = System.currentTimeMillis();
        }
        else if (event.getAction() == MotionEvent.ACTION_UP)
        {
            if ((System.currentTimeMillis() - time) <= TAP_CONSTANT)
            {
                // We have a tap event, call our tap logic methods!
                return true;
            }
        }
        return false;
    }
} 
```

# mongodb - mongodb是如何做到每个节点42T驱动的

> ID：15070980
> 
> 赞同：0
> 
> 时间：2013-02-25T15:56:50.780
> 
> 标签：mongodb

我们听说 mongodb 有一个每个节点 42T 的客户端，我想知道更多。我知道 cassandra 有 Bloomfilters 可以跳过点击磁盘来找出一行可能在哪个文件中。

1.  mongodb 有类似布隆过滤器的东西吗？
2.  mongodb 是否使用类似于 SSTables 的东西？
3.  我确实读过 mongodb 像 cassandra 一样进行压缩，我认为这将是一个非常长的过程，使用 42T 节点？？？？

我想我在这里研究 mongodb 时不知道要搜索哪些术语（在 cassandra 中它们被称为 SSTables）。

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:41:54.870

MongoDB 不支持在线压缩。事实上，数据碎片化是具有许多文档更新的系统中的当前问题。为了防止数据碎片，MongoDB 尝试计算一个自动填充因子，以最小化数据移动的数量。

compact 命令阻塞整个数据库，直到完成。此外，MongoDB 不支持字典压缩，因此字段名称会占用存储的每个对象的空间。我猜MongoDB使用的布局不是任何花哨的数据结构。它简单地由标头（偏移量、长度...）、bson 数据和填充因子组成。

由于 MongoDB 不是键/值或列式数据库，因此它不使用 SSTables（用于列式布局的高效数据结构）。为数据库创建的每个文件都被命名为“extent”。

AFAIK，MongoDB 不使用布隆过滤器。

# jquery - SlickGrid - 改变输入 Slick.Editors 的样式

> ID：15070984
> 
> 赞同：1
> 
> 时间：2013-02-25T15:57:01.010
> 
> 标签：jquery, css, jquery-plugins, slickgrid

如何更改 Slick.Editor.Text 调用的输入样式？我尝试过：[如何子类化 Slickgrid 的 TextCellEditor？](https://stackoverflow.com/questions/4557659/how-do-i-subclass-the-textcelleditor-of-slickgrid) 但我没有使用制服，它不起作用，表格像错误一样消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:13:51.200

答案在示例中，但课程不在核心上。您必须在您的 CSS 中添加（和/或更改）以下样式：例如，我添加了 size 属性并将其设置为 10px

```
/* Slick.Editors.Text, Slick.Editors.Date */
input.editor-text {
  width: 100%;
  height: 100%;
  border: 0;
  margin: 0;
  background: transparent;
  outline: 0;
  padding: 0;
  size:10px;

} 
```

# visual-studio-2010 - Visual Studio 性能分析：JavaScript

> ID：15070985
> 
> 赞同：1
> 
> 时间：2013-02-25T15:57:01.957
> 
> 标签：visual-studio-2010, performance, profiling

我正在使用 Visual Studio 2010 Ultimate 中的性能向导。我为我的 Web 项目选择了 Instrumentation 和分析 JavaScript 的类型。当我启动向导时，我收到错误：

PRF0005：启动错误无法执行 (iexplore.exe)。任何想法任何人。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T16:06:33.350

在 C# 桌面项目上遇到同样的错误。如果 WebProject 有清单，可能的原因是

```
<requestedExecutionLevel  level="highestAvailable" uiAccess="false" />` 
```

所以解决方案是

```
<requestedExecutionLevel  level="asInvoker" uiAccess="false" />` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:53:57.837

听起来像是防火墙问题，要么禁用它，要么在防火墙中设置例外。如果您有 McAfee，请检查您是否打开了 McAfee Host Intrusion Prevention，检查活动日志以查看是否有与您尝试启动向导的时间相匹配的时间。

# php - 表单字段前缀

> ID：15070986
> 
> 赞同：1
> 
> 时间：2013-02-25T15:57:02.227
> 
> 标签：php, html

我的页面上有一个简单的 html/php 表单，我想知道如何向其中一个字段添加前缀？

示例：如果一个字段充当电子邮件字段，我需要有一个灰色前缀，如“example@example.com”，并在我写电子邮件时消失。

可能吗？

[我的表格](http://www.tranceil.co.il/events/welovetrance/)

我需要前缀的字段：

```
<div class="form-field">
  <div class="form-field-name"><b>Facebook profile</b></div>
        <input type="text" name="fields[Facebook]" class="required size_half"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:59:52.960

假设您实际上是指“占位符”，则可以在`placeholder`现代浏览器中使用该属性。例如：

```
<input placeholder="Facebook name" type="text" name="fields[Facebook]" class="required size_half"/> 
```

有很多 jQuery 插件可以在旧浏览器上解决这个问题，例如：

[http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

# asp.net-mvc-3 - 从缩小中跳过单个文件？

> ID：15070988
> 
> 赞同：9
> 
> 时间：2013-02-25T15:57:10.730
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, bundle, asp.net-optimization, system.web.optimization

我正在尝试使用 ASP.Nets BundleTable 来优化一些 javascript 文件，但遇到了一个问题，即在缩小代码时特定插件（jQuery-Timepicker）无法工作。见[这里](https://github.com/trentrichardson/jQuery-Timepicker-Addon/issues/552)。

捆绑代码目前类似于：

```
// Add our commonBundle
var commonBundle= new Bundle("~/CommonJS" + culture.ToString());

// JQuery and related entries.
commonBundle.Include("~/Scripts/jquery-1.7.2.js");
commonBundle.Include("~/Scripts/jquery-ui-1.8.22.js");
commonBundle.Include("~/Scripts/jquery.cookie.js");
commonBundle.Include("~/Scripts/jquery-ui/jquery-ui-timepicker-addon.js"); // This is the one that does not work when bundled

// JS Transformer
commonBundle.Transforms.Add(new JsMinify());

BundleTable.Bundles.Add(commonBundle); 
```

如果我删除该`jquery-ui-timepicker-addon.js`文件，然后将其单独包含在我的网页中，则它可以正常工作。（否则我得到`Uncaught TypeError: undefined is not a function`错误）。

我想知道我是否可以以某种方式设置我的捆绑代码以跳过缩小这个文件（但它仍然包含在捆绑中）？我一直在环顾四周，但没有提出任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:26:52.093

所以问题是所有文件都捆绑在一起，然后整个捆绑包被最小化。因此，您不会轻易地跳过一个文件的缩小。执行此操作的最佳方法可能是创建一个新的转换，该转换附加了您希望未缩小的该文件的内容。然后你会将此转换附加到你注册的 ScriptBundle 中：

```
commonBundle.Transforms.Add(new AppendFileTransform(""~/Scripts/jquery-ui/jquery-ui-timepicker-addon.js"")); 
```

AppendFileTransform 只是将文件的内容附加到捆绑的响应中。您将不再显式地将时间选择器包含在捆绑包中，而是将其包含在此转换中，这将有效地为您提供您正在寻找的行为，因为 JsMinify 转换将首先运行并缩小捆绑包，然后您将添加最后你想要的文件未缩小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-02T10:38:58.233

这可以从另一个方向更好地解决 - 与其尝试不缩小单个文件，不如为单个项目添加转换。

首先 - 创建一个实现`IItemTransform`并使用相同代码来缩小给定输入的类：

```
public class JsItemMinify : System.Web.Optimization.IItemTransform
{
    public string Process(string includedVirtualPath, string input)
    {
        var min = new Microsoft.Ajax.Utilities.Minifier();
        var result = min.MinifyJavaScript(input);
        if (min.ErrorList.Count > 0)
            return "/*minification failed*/" + input;

        return result;
    }
} 
```

第二 - 将此项目转换添加到单个文件并删除捆绑转换：

```
var commonBundle= new Bundle("~/CommonJS");
// the first two includes will be minified
commonBundle.Include("~/Scripts/jquery-1.7.2.js", new JsItemMinify());
commonBundle.Include("~/Scripts/jquery-ui-1.8.22.js", new JsItemMinify());

// this one will not
commonBundle.Include("~/Scripts/jquery.cookie.js");

// Remove the default JsMinify bundle transform
commonBundle.Transforms.Clear();

BundleTable.Bundles.Add(commonBundle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T22:19:28.790

您不能将 Bundle 设置为跳过缩小某些文件并缩小其余文件。

您可以实现自己的`Bundle`或`Transform`通过覆盖`Bundle.ApplyTransform`或`JsMinify.Process`方法，但您需要注意不要破坏文件的更改跟踪、密钥生成、缓存失效等......（或做一些丑陋的黑客攻击）。这不值得努力。

正如你已经提到的，我会保留单独的 js 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-29T09:42:00.763

这只是基于 Hao Kung 回答的完整示例

```
var myBundle = new ScriptBundle("~/bundles/myBundle").Include(
    "~/Scripts/script1.js",
    "~/Scripts/script2.js",
);
myBundle.Transforms.Add(new AppendFileTransform("~/Scripts/excludedFile.min.js"));
bundles.Add(myBundle); 
```

这是 AppendFileTransform 的示例实现：

```
public class AppendFileTransform : IBundleTransform
{
    private readonly string _filePath;

    public AppendFileTransform(string filePath)
    {
        _filePath = filePath;
    }

    public void Process(BundleContext context, BundleResponse response)
    {
        response.Content += File.ReadAllText(context.HttpContext.Server.MapPath(_filePath));
    }
} 
```

# c# - 发送电子邮件、httpHandler 或 Web 服务的首选方式？

> ID：15070994
> 
> 赞同：-2
> 
> 时间：2013-02-25T15:57:48.737
> 
> 标签：c#, asp.net, asp.net-4.0

我正在使用 ASP NET 4.0 通过`HttpHandler`Or发送电子邮件的首选方式是什么`web service`？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:05:20.113

您应该在服务器端代码上发送电子邮件。如果您通过 HttpHandler 或 Web 服务公开邮件 API，您的系统将被垃圾邮件发送者用作中继服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:26:19.327

是的，正如@peer 所建议的那样，这是一个坏主意。提醒密码（敏感操作）应该被安全地考虑和实施（请注意，我什至没有提到对它们进行散列）

我想您要实现的目标是让用户知道已向他们发送了一封电子邮件，而他们在提交电子邮件后没有刷新页面，对吗？如果是这样，您可以通过网络服务将电子邮件发送到处理您的代码的服务器端代码，并将密码发送到您的电子邮件地址。然后，您可以让该函数返回 true 或 false 以让用户知道“已发送包含您的密码的电子邮件”或“在我们的系统中未找到此类电子邮件”。

## 更新

说你有一个`RemindPassword.aspx`如下；

```
<script>
$(document).ready(function () {
   $.ajax({
 type: "POST",
 data: "{'email':'" + $('#txtEmail').val() + "'}",
 url: 'RemindPassword.aspx/sendEmail',
 contentType: "application/json; charset=utf-8",
 success: function (msg) {
  isok = JSON.parse(msg.d);
      msgelem = $('#results');
      if (isok == true) {
        msgelem.html('your password has been sent to your email.')
      } else {
        msgelem.html('this email address does not exist in our system.')
      }
 }
})
   };
});

</script>

<asp:TextBox ID="txtEmail" runat="server" />
<asp:Button ID="btnSubmit" runat="server" Text="Send password.."/>
<span id="results"></span> 
```

在 RemindPassword.aspx.vb 中：

导入 System.Web.Services

```
<WebMethod()> _
Public Shared Function SendMail(email As String) As Boolean
    ' write code here to check if email exists.
    ' if it does, run code (or another function) to send the password.
    ' then return true
    ' if the email doesnt exist, then return false.
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T16:24:13.077

您可以使用网络服务传输消息，但不会传递任何凭据。您可以从 javascript 调用 websercice。如果您需要代码，我可以提供帮助。

正文、抄送、密件抄送、主题所有这些细节都可以使用 javascript 传递给 webmethod。所有其他凭据都应保存在您的服务器代码中。

```
 function SendMail(txtTo, txtFrom, txtCC, txtBCC, txtSubject, txtMessage)

 {     

     // call server side method

     PageMethods.sendmail(txtTo, txtFrom, txtCC, txtBCC, txtSubject, txtMessage);

 }

 // set the destination textbox value with the ContactName

 function CallSuccess(res)

 {     

         alert(res) ;
 }

 // alert message on some failure

 function CallFailed(res)

 {

     alert(res.get_message());

 } 
```

在服务器上

```
public static void SendMail(string txtTo, string txtFrom, string txtCC, string txtBCC, string txtSubject, string txtMessage)
{
try
    {

        //Creating the Mail Message object.
        MailMessage Email=new MailMessage();
        //Storing the To value in the object reference.
        Email.To=txtTo;                
        //Storing the From value in the object reference.
        Email.From=txtFrom;
        //Storing the CC value in the object reference.
        Email.Cc=txtCC;
        //Storing the BCC value in the object reference.
        Email.Bcc=txtBCC;
        //Storing the Subject value in the object reference.
        Email.Subject=txtSubject;
        //Specifies the email body.
        Email.Body=txtMessage;
        //Setting priority to the mail as high,low,or normal
        Email.Priority=MailPriority.High;
        //Formatting the mail as html or text.
        Email.BodyFormat=MailFormat.Text;
        //Checking whether the attachment is needed or not.
        //if(rbtnAttach)
        //{
        //    //Adding attachment to the mail.
        //    Email.Attachments.Add(
        //        new MailAttachment(FileBrowse));
        //}
        //specifying the real SMTP Mail Server.
        SmtpMail.SmtpServer.Insert(0,"127.0.0.1");
        SmtpMail.Send(Email);//Sending the mail.
        //calling the reset method to erase all the data 
        //after sending the mail.

    }
    //Catching Exception 
    catch(Exception exc)
    { 

    }

} 
```

更多详情，您可以参考：

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=109](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109) [http://www.codeproject.com/KB/aspnet/Techblaster/Techblaster_demo.zip](http://www.codeproject.com/KB/aspnet/Techblaster/Techblaster_demo.zip)