# StackOverflow 问答 15688000-15688999

# meteor - 是否可以在用户访问之间保持数据缓存

> ID：15688001
> 
> 赞同：3
> 
> 时间：2013-03-28T17:10:20.170
> 
> 标签：meteor

我有一个要发送给客户端（应用程序）的 15k+ 个对象（数据库）的集合。这最多可能需要 30 秒才能同步。

我想要一种在用户访问之间保持缓存的方法，所以我只需要同步自上次访问以来的差异。

能够在浏览器选项卡之间共享本地缓存也很好。

从理论上讲，我不明白为什么这样做会很困难，但我不确定如何去做。

*正如@zeroasterisk 所指出的，它是我正在寻找的数据库缓存，而不仅仅是静态文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:14:51.213

你看过智能包“appcache”吗？

*   代码：[https ://github.com/awwx/meteor-appcache](https://github.com/awwx/meteor-appcache)
*   信息：[http ://docs.meteor.com/#appcache](http://docs.meteor.com/#appcache)
*   更多：[https ://github.com/meteor/meteor/wiki/AppCache](https://github.com/meteor/meteor/wiki/AppCache)

appcache 包将 Meteor 应用程序的静态部分（客户端 Javascript、HTML、CSS 和图像）存储在浏览器的应用程序缓存中。要启用缓存，只需将 appcache 包添加到您的项目中。

它目前不支持集合中的数据，这是我认为您要问的问题，但它可能是您可以扩展的东西。如果我误解了这个问题，而您只需要存储静态对象（JS 文件等），这将非常有用。

更多内容：[Meteor 的 Appcache 也可以存储数据库数据吗？](https://stackoverflow.com/questions/15478597/can-meteors-appcache-also-store-database-data)

注意：由于用户提示，它在 FF 中默认禁用...

# node.js - 如何在 Mongoose 中自动生成自定义 ID？

> ID：15688002
> 
> 赞同：1
> 
> 时间：2013-03-28T17:10:24.190
> 
> 标签：node.js, mongodb, mongoose

我想`_id`通过 Mongoose/MongoDB 管理我自己的 - 因为默认的很长并且消耗带宽。

困难在于我需要创建它们（例如，通过增加一个计数器），但我需要在并发环境（Node.JS）中执行此操作。是否有一个我可以遵循的简单示例创建一个模式，该模式具有自定义`_id`和静态方法（或更好的方法）`_id`，每当创建新文档时自动生成下一个 unique ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:18:34.447

正如 Chad 简要介绍的那样，Mongo 为您实现了一个 uuid 系统，其中考虑了时间戳、网络地址和机器名称，以及一个自动递增的 2 位计数器（以防出现多个具有相同时间戳的条目）。此模式用于允许分布式数据库（即，在不同机器上运行不同的数据库实例），同时确保每个条目仍具有唯一标识符（因为机器名称部分将不同）。

尝试使用自己的模式可能会极大地限制 mongo 提供的可伸缩性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:18:55.407

您可以使用 Mongo 的 findAndModify() 来生成顺序值。下面是一个例子：

```
// (assuming db is a reference to a MongoDB database)
var counters = db.collection('counters');
var query = {'name': 'counterName'};
var order = [['_id','asc']];
var inc = {$inc:{'next':1}};
var options = {new: true, upsert: true};
counters.findAndModify(query, order, inc, options, function(err, doc) {

  if(err) {
    callback(err);
    return;
  }      

  var id = doc.next;
  callback(null, id);
}); 
```

尽管在应用程序上生成顺序 ID 看起来很漂亮，但请记住它们有一些缺点（例如，当您需要在地理上拆分数据库时），这就是 Mongo 使用长伪随机键的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T05:49:36.293

这应该工作

```
import { randomString } from '@/helpers'

const taskSchema = new mongoose.Schema({
    _id: {
        type: String,
        unique: true,
        default: randomString
    },
    title: String,
    ...
}) 
```

随机字符串函数

```
// helpers

export const randomString = (length?: number) => {
    let result = ''
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'
    const charactersLength = characters.length
    const n = length || 15
    for (let i = 0; i < n; i++) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength))
    }

    return result
} 
```

测试结果

```
{ "_id": "EIa9W2J5mY2lMDY", ... } 
```

# properties - .aspx 上的受保护属性设置器不起作用

> ID：15688006
> 
> 赞同：1
> 
> 时间：2013-03-28T17:10:39.133
> 
> 标签：properties, user-controls, webforms, protected

任何人都可以解释为什么如果我控制了受保护的属性，它就不能从 .aspx 中设置吗？

控制：

```
public partial class SomeUserControl : UserControl
{
    protected bool SomeProperty
    {
        get { return ViewState["SomeProperty"] != null && (bool) ViewState["SomeProperty"]; }
        set { ViewState["SomeProperty"] = value; }
    }

    ...
} 
```

.aspx 中的声明：

```
<custom:SomeUserControl ID="SomeUserControl1" runat="server" SomeProperty="true"/> 
```

当我尝试调试 setter 时，从未调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:17:34.653

刚刚意识到它在智能感知中是不可见的。并且此属性被识别为 HTML 属性。

# silverlight - silverlight 配置为使用代理服务器

> ID：15688008
> 
> 赞同：0
> 
> 时间：2013-03-28T17:10:41.580
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

如果我在网页上使用 silverlight，是否可以对其进行配置，以便即使 web 浏览器未配置为使用 web 浏览器，silverlight 应用程序中的任何 web 请求都通过代理服务器进行路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:31:25.567

尝试使用客户端网络堆栈。浏览器堆栈使用浏览器代理信息（您不需要它），客户端堆栈使用操作系统代理信息。

此示例告诉 Silverlight，对以“http://”开头的地址的所有调用都应使用客户端堆栈而不是浏览器堆栈。

```
HttpWebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp); 
```

更多信息： http: [//www.wintellect.com/cs/blogs/jprosise/archive/2009/10/14/silverlight-3-s-new-client-networking-stack.aspx](http://www.wintellect.com/cs/blogs/jprosise/archive/2009/10/14/silverlight-3-s-new-client-networking-stack.aspx)

# c# - 为什么我的子窗体没有在任务栏中显示自定义图标？

> ID：15688011
> 
> 赞同：4
> 
> 时间：2013-03-28T17:10:46.830
> 
> 标签：c#, winforms, taskbar

我有一个 Windows 窗体应用程序，它使用自定义窗体在长时间操作期间显示进度条。此表单当前设置为与我程序中的其他窗口一起显示在任务栏上。但是，当我的应用程序的其他窗口显示适当的应用程序图标时，此自定义表单仅显示默认图标：

![任务栏中的默认应用程序图标](../Images/478b4de47148196c3f72d946fb37583e.png)

我将设计器中的图标设置为我所有其他窗口使用的相同图标文件，但只有这个特定的表单有这个问题。该图标也正确显示在表单的标题中。在子窗体的构造函数或使用循环中手动设置图标`form.Icon = Resources.Sample_Icon;`似乎没有效果。

这是重现该问题的代码示例：

```
// Inside Form1.cs on a button click
using (var form = new SampleForm())
{
    form.Show();

    for (int i = 0; i < numberOfIterations; ++i)
    {
        // Do work here in a real program

        // This function just calls progressbar.PerformStep():
        form.UpdateProgress();
    }
} 
```

更改`Show()`to`ShowDialog()` *确实*显示了正确的图标，但 DialogResult 在这种情况下并没有真正的意义。

我怀疑有一些事件或消息设置了永远不会被处理的 Windows 任务栏图标，但是当我扔进 a`form.Refresh()`和 an `Application.DoEvents()`（只是为了看看它是否有所不同）时，我仍然有默认图标。

我错过了什么？而且，为什么 ShowDialog 可以正常工作？

我正在使用 C# 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:15:12.720

表单不会从父表单继承其图标，即使`Show`or`ShowDialog`被调用。您可能应该尝试明确更改其他表单的图标。在当前代码中执行此操作：

```
form.Icon = <your icon>; 
```

或者，在您的其他表单的加载代码中执行此操作，只需参考表单本身。

# ios - iPad 仍以飞行模式连接到 Game Center Sandbox

> ID：15688014
> 
> 赞同：0
> 
> 时间：2013-03-28T17:11:04.873
> 
> 标签：ios, debugging, network-connection

这看起来很奇怪，但我拥有的 iPad*仍然成功连接到游戏中心沙盒，即使飞行模式已打开*。似乎在调试 iPad 时，设备以某种方式通过 USB 连接到互联网（是这种情况吗？）

我只是想测试没有互联网连接的情况，并确保有一个优雅的失败。

无论如何，我该如何禁用 iPad 设备上的互联网连接呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:10:10.040

如果您在**设备上**登录了 Game Center ，那么显然 GC 登录请求**总是会立即生效**，并且会显示`Welcome back, PLAYERNAME *** Sandbox ***`。我认为它一定是在呼应最后一个已知的 GC 服务器 IP。但这并不意味着您可以访问 GC 服务器。

# c - 我的代码中的 \b 不会把光标带回来

> ID：15688017
> 
> 赞同：3
> 
> 时间：2013-03-28T17:11:12.530
> 
> 标签：c, cursor, backspace

```
#include <stdio.h>

int main()
{
    int answer;
    printf("Please insert your desired budget :"); //normal printf functions.
    printf(" $_____\b\b\b\b"); //This should move the curser back 4 spaces.
    //The program outputs the line followed with 4 inverted question marks.
    scanf("%d", &answer);
    printf("So your budget is %d", answer);
    return 0;
} 
```

为什么输出是 4 个倒置问号？我在mac上使用xcode，这可能是问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:19:40.083

您需要在支持`\b`转义序列的终端环境中运行它。Xcode 中的控制台一定不能理解它们。

如果您在终端应用程序中运行它，应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T08:05:18.467

书中有一个例子[C Primer Plus]第6页.91

list3.10 escape.c

```
/* escape.c -- uses escape characters */
#include <stdio.h>

 int main(void)
{
     float salary;
     printf("\aEnter your desired monthly salary:");/* 1 */ 
     printf(" $_______\b\b\b\b\b\b\b"); /* 2 */ 
     scanf("%f", &salary);
     printf("\n\t$%.2f a month is $%.2f a year.", salary,salary * 12.0); /* 3 */        
     return 0; 
} 
```

作者说：

> 实际行为可能会有所不同。例如，XCode 4.6 将 \a、\b 和 \r 字符显示为倒置的问号！

他们显示 Xcode 不支持`\b` ，Apple [Apple 支持社区](https://discussions.apple.com/thread/3992023?tstart=0)也显示了这种情况。

在我的 Xcode 5.0 中，它也有同样的情况。 ![在此处输入图像描述](../Images/cb2d16dd1592cf303583dcdb6e585dd7.png)

# algorithm - 递归与迭代

> ID：15688019
> 
> 赞同：125
> 
> 时间：2013-03-28T17:11:15.493
> 
> 标签：algorithm, recursion, iteration

说在任何地方都使用递归是否`for`可以使用循环？如果递归通常较慢，那么在`for`循环迭代中使用它的技术原因是什么？

如果总是可以将递归转换为`for`循环，是否有经验法则来做到这一点？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-03-28T17:15:59.363

递归通常要慢得多，因为所有函数调用都必须存储在堆栈中以允许返回给调用者函数。在许多情况下，必须分配和复制内存以实现范围隔离。

一些优化，如[尾调用优化](http://c2.com/cgi/wiki?TailCallOptimization)，使递归更快，但并非总是可行，并且并非在所有语言中都实现。

使用递归的主要原因是

*   当它模仿我们解决问题的方法时，它在许多情况下更直观
*   使用递归更容易探索一些数据结构，如树（或者在任何情况下都需要堆栈）

当然，每个递归*都*可以建模为一种循环：这就是 CPU 最终要做的事情。而递归本身，更直接地，意味着将函数调用和作用域放在堆栈中。但是将递归算法更改为循环算法可能需要大量工作并使代码的可维护性降低：对于每次优化，只有在某些分析或证据表明有必要时才应尝试。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-03-28T17:15:03.023

> 说到处都使用递归是否可以使用 for 循环？

是的，因为大多数 CPU 中的递归都是用循环和堆栈数据结构建模的。

> 如果递归通常较慢，那么使用它的技术原因是什么？

它不是“通常较慢”：错误应用的递归更慢。最重要的是，现代编译器擅长将一些递归转换为循环，甚至无需询问。

> 如果总是可以将递归转换为 for 循环，是否有经验法则来做到这一点？

为迭代解释时最容易理解的算法编写迭代程序；为最好用递归方式解释的算法编写递归程序。

例如，搜索二叉树、运行快速排序和解析许多编程语言中的表达式通常是递归解释的。这些最好也是递归编码的。另一方面，计算阶乘和计算斐波那契数在迭代方面更容易解释。对它们使用递归就像用大锤拍苍蝇：这不是一个好主意，即使大锤做得非常好^+。

* * *

^+我从 Dijkstra 的“编程学科”中借用了大锤类比。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-03-28T17:15:38.033

# **问题 ：**

> 如果递归通常较慢，那么在循环迭代中使用它的技术原因是什么？

# **回答 ：**

因为在某些算法中很难迭代地解决它。尝试以递归和迭代的方式解决深度优先搜索。你会明白用迭代来解决 DFS 是很困难的。

*另一个值得尝试的好东西：尝试迭代地编写合并排序。这将花费你相当长的时间。*

# **问题 ：**

> 说到处都使用递归是否可以使用 for 循环？

# **回答 ：**

是的。这个[线程](https://stackoverflow.com/a/933979/1031955)对此有一个很好的答案。

# **问题 ：**

> 如果总是可以将递归转换为 for 循环，是否有经验法则来做到这一点？

# **回答 ：**

相信我。尝试编写自己的版本来迭代地解决深度优先搜索。你会注意到一些问题更容易递归解决。

*提示：当您解决可以通过[分而治](http://en.wikipedia.org/wiki/Divide_and_conquer)之技术解决的问题时，递归是很好的。*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-06T18:15:15.393

除了较慢之外，递归还可能导致堆栈溢出错误，具体取决于它的深度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-18T02:54:39.107

要使用迭代编写等效方法，我们必须显式使用堆栈。迭代版本的解决方案需要一个堆栈这一事实表明该问题足够困难，可以从递归中受益。作为一般规则，递归最适用于无法用固定内存量解决的问题，因此在迭代解决时需要堆栈。话虽如此，递归和迭代可以显示相同的结果，但它们遵循不同的模式。要根据具体情况决定哪种方法效果更好，最佳实践是根据问题遵循的模式进行选择。

例如，要找到三角形序列的第 n 个三角形数： 1 3 6 10 15 ... 使用迭代算法找到第 n 个三角形数的程序：

使用迭代算法：

```
//Triangular.java
import java.util.*;
class Triangular {
   public static int iterativeTriangular(int n) {
      int sum = 0;
      for (int i = 1; i <= n; i ++)
         sum += i;
      return sum;
   }
   public static void main(String args[]) {
      Scanner stdin = new Scanner(System.in);
      System.out.print("Please enter a number: ");
      int n = stdin.nextInt();
      System.out.println("The " + n + "-th triangular number is: " + 
                            iterativeTriangular(n));
   }
}//enter code here 
```

使用递归算法：

```
//Triangular.java
import java.util.*;
class Triangular {
   public static int recursiveTriangular(int n) {
      if (n == 1)
     return 1;  
      return recursiveTriangular(n-1) + n; 
   }

   public static void main(String args[]) {
      Scanner stdin = new Scanner(System.in);
      System.out.print("Please enter a number: ");
      int n = stdin.nextInt();
      System.out.println("The " + n + "-th triangular number is: " + 
                             recursiveTriangular(n)); 
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-06T23:55:57.673

大多数答案似乎都假设`iterative`= `for loop`。如果您的 for 循环不受限制（*如*C，您可以使用循环计数器做任何您想做的事情），那么这是正确的。如果它是一个*真正的* `for`循环（比如在 Python 或大多数无法手动修改循环计数器的函数式语言中），那么它是**不**正确的。

所有（可计算的）函数都可以递归和使用`while`循环（或条件跳转，它们基本上是相同的）来实现。如果你真的把自己限制在`for loops`，你只会得到这些函数的一个子集（原始递归函数，如果你的基本操作是合理的）。诚然，它是一个相当大的子集，恰好包含您在实践中可能遇到的每一个功能。

更重要的是，很多函数很容易递归实现，而迭代实现非常困难（手动管理调用堆栈不算在内）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-15T01:40:20.047

是的，正如Thanakron [Tandavas](/users/1031955/thanakron-tandavas)[所说](/a/15688097)，

> 当您解决可以通过分而治之技术解决的问题时，递归是很好的。

例如：河内塔

1.  N 环尺寸增加
2.  3极
3.  环开始堆叠在 1 号杆上。目标是移动环，使它们堆叠在 3 号杆上......但是
    *   一次只能移动一环。
    *   不能将较大的戒指放在较小的戒指上。
4.  迭代解决方案“强大而丑陋”；递归解决方案是“优雅的”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T17:15:47.113

我似乎记得我的计算机科学教授曾经说过，所有具有递归解决方案的问题也都有迭代解决方案。他说递归解决方案通常速度较慢，但​​是当它们比迭代解决方案更容易推理和编码时，它们经常被使用。

但是，对于更高级的递归解决方案，我不相信它总是能够使用简单的`for`循环来实现它们。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2015-11-13T14:05:04.557

与纯迭代方法相比，递归+记忆可能导致更有效的解决方案，例如检查：http: [//jsperf.com/fibonacci-memoized-vs-iterative-for-large-n](http://jsperf.com/fibonacci-memoized-vs-iterative-for-large-n)

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2013-03-29T04:36:03.357

简短的回答：折衷是递归更快，并且在几乎所有情况下 for 循环占用的内存更少。但是，通常有一些方法可以更改 for 循环或递归以使其运行得更快

# ruby - 使用 watir-webdriver 时如何在 IE 兼容模式下启动 IE？

> ID：15688020
> 
> 赞同：1
> 
> 时间：2013-03-28T17:11:23.967
> 
> 标签：ruby, watir, watir-webdriver, ie8-compatibility-mode

我知道可以通过将选项散列传递给 Google 或 Firefox 或此处的 Internet Explorer 来更改默认下载目录等。

有没有办法默认以兼容模式启动 IE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:36:23.213

如果您使用 watir gem，您会发现它提供了一个[类 Watir::IE](http://wtr.rubyforge.org/rdoc/1.6.2/classes/Watir/IE.html)。

Watir::IE 类提供了一个[set_options(options) 方法](http://wtr.rubyforge.org/rdoc/1.6.2/classes/Watir/IE.html#M000210)，它允许您在创建新的 Watir::IE 实例时指定要使用的选项。

我不知道要通过的确切选项，但我会继续研究。如果我找到它，我会编辑这个答案。如果其他人知道，希望他们会使用详细信息编辑此答案。

# javascript - 在没有克隆的情况下复制跨度？

> ID：15688024
> 
> 赞同：1
> 
> 时间：2013-03-28T17:11:53.393
> 
> 标签：javascript, jquery, html

嗨，我正在创建一个成分应用程序，其表单如下所示：

[http://jsfiddle.net/PZjfT/](http://jsfiddle.net/PZjfT/)

如您所见，有一个`span`包含 2 个文本字段和一个选择。您可以通过单击旁边的 X 删除任何跨度。

我的问题是我使用的是 jQuery 克隆，所以如果你删除所有的跨度，然后单击“添加成分”，没有要克隆的 div，所以它不会添加成分。

我该如何解决这个问题？感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:15:24.390

使用[`.detach()`](http://api.jquery.com/detach/)而不是[`.clone()`](http://api.jquery.com/clone/)你的最后一个 div，这样你就不会丢失它。

[`.detach()`](http://api.jquery.com/detach/)将允许您从 DOM 中删除最后一个 div 并将其保存在变量中，以便您以后可以再次插入它或从中克隆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:15:23.267

轻松修复，克隆文档上准备好的元素，但不要将其放入页面并使用它来克隆。

[jsFiddle](http://jsfiddle.net/6dmaQ/)

```
(function ($) {
    $(document).ready(function () {
        var myClone = $('#ingredientsCOUNT > span:first').clone();

        $('#btnAddIngredients').click(function () {
            var num = $('#ingredientsCOUNT span').length;
            var newNum = new Number(num + 1);
            myClone
                .clone()
                .attr('name', 'ingredient' + newNum)
                .appendTo('#ingredientsCOUNT')
                .fadeIn();
        });
        $('.formelementcontainer').on('click', '.deleteThis', function () {
            var span = $(this).closest('span');
            console.log(span);
            span.fadeOut('slow', function () {
                span.remove();
            });
        });
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:14:28.310

我的方法是不要让用户删除最后一个`div`.

所以你总是从`div`页面上的一种成分开始。让他们通过克隆添加新的。

当用户删除一种成分时，删除`div`并检查剩余多少成分。如果只有一个，删除或隐藏删除按钮，这样他们就无法删除最后一个成分。

# tomcat6 - 登录访问配置

> ID：15688027
> 
> 赞同：0
> 
> 时间：2013-03-28T17:12:01.910
> 
> 标签：tomcat6, logback, maven-tomcat-plugin

我正在尝试为基于 spring 的 tomcat 应用程序配置 logback-access。在我的 pom.xml 文件中添加了以下行：

```
 <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                    <version>${slf4j.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                    <version>${slf4j.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-classic</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-core</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-access</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency> 
```

我还在 pom 文件的 tomcat 插件配置中添加了这个。

```
 <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat6-maven-plugin</artifactId>
            <version>${maven.tomcat.plugin}</version>           
            <configuration>
                <systemProperties>
                    <java.util.logging.manager>org.apache.juli.ClassLoaderLogManager</java.util.logging.manager>
                    <logback.ContextSelector>JNDI</logback.ContextSelector>
                </systemProperties>
            </configuration>                
            <dependencies>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                    <version>${slf4j.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                    <version>${slf4j.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-classic</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-core</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-access</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>   
            </dependencies>
        </plugin> 
```

我已将资源文件放在以下位置： src/main/resources/logback.xml src/main/resources/logback-access.xml

但是当 logback.xml 工作时，tomcat 无法获取 logback-access.xml 文件。如何使用我的 tomcat6 插件附加访问 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:13:35.197

我也在尝试相同的方法，但我发现 tomcat6/7-maven-plugin 没有能力运行这些配置，因为这必须在容器级别进行配置，请参阅[http://logback.qos.ch/access.html #tomcat](http://logback.qos.ch/access.html#tomcat)

您可以使用“cargo-maven2-plugin”在现有容器中运行应用程序并将该容器配置为 logback-access

## 像这样配置货物

```
 <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <version>${cargo.maven.plugin}</version>
            <configuration>
                <container>
                    <containerId>tomcat7x</containerId>
                    <type>installed</type>
                    <home>${tomcat.home}</home>
                    <timeout>1800000</timeout> 
                </container>
                <configuration>
                    <type>existing</type>
                    <home>${tomcat.home}</home>
                </configuration>
                <deployables>
                    <deployable>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>YOUR_WEB_ARTIFICT</artifactId>
                        <type>war</type>
                    </deployable>
                </deployables>
            </configuration>
        </plugin> 
```

* * *

我使用了货物插件版本 1.3.3

然后执行 cargo:deployer-deploy

和货物：运行或货物：开始

# android - 我在按文本过滤时遇到问题

> ID：15688031
> 
> 赞同：3
> 
> 时间：2013-03-28T17:12:09.097
> 
> 标签：android, image, text, filter

我的应用程序没有根据搜索的文本过滤结果。我不知道这里有什么问题。publishResults 方法可以返回过滤结果，但视图没有绘制我需要的内容。

**main_activity_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Meeting name filter -->
<EditText
    android:id="@+id/find_meeting_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/find_meeting_name_hint"
    android:inputType="text" />

<!-- Meeting list -->
<ListView
    android:id="@+id/meeting_name_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

**meeting_list_item.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<!-- Meeting image -->
<ImageView
    android:id="@+id/meeting_image"
    android:layout_width="48dip"
    android:layout_height="48dip"
    android:contentDescription="@string/meeting_image_description" />

<!-- Meeting name -->
<TextView android:id="@+id/meeting_name"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_weight="1.0"
    android:textIsSelectable="true"
    android:textSize="12sp" /> 
```

**MainActivity.java**

```
import java.util.ArrayList;
import java.util.Date;

import android.app.Activity;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.Menu;
import android.widget.EditText;
import android.widget.ListView;

public class MainActivity extends Activity {

    private EditText findMeetingName;
    private MeetingAdapter meetingAdapter;
    private ListView meetingNameList;

    private ArrayList<Meeting> meetings;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity_layout);

        findMeetingName = (EditText) findViewById(R.id.find_meeting_name);
        findMeetingName.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable s) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            @Override
            public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                MainActivity.this.meetingAdapter.getFilter().filter(charSequence);
                meetingAdapter.notifyDataSetChanged();
            }

        });

        meetings = new ArrayList<Meeting>();
        Meeting meeting = null;
        for (int i = 0; i < 5; i++) {
            meeting = new Meeting();
            meeting.setId(i + 1);
            meeting.setName("Cita #" + (i + 1));
            meeting.setDescription("Descripción #" + (i + 1));
            meeting.setImage(BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.icon48x48_1));
            meeting.setInitialDate(new Date());
            meetings.add(meeting);
        }

        meetingAdapter = new MeetingAdapter(this, meetings);
        meetingNameList = (ListView) findViewById(R.id.meeting_name_list);
        meetingNameList.setAdapter(meetingAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

**会议适配器.java**

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.ImageView;
import android.widget.TextView;

public class MeetingAdapter extends BaseAdapter implements Filterable {

    LayoutInflater inflater;
    ArrayList<Meeting> meetings;

    public MeetingAdapter(Activity activity, ArrayList<Meeting> meetings) {
        this.meetings = meetings;
        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return meetings.size();
    }

    @Override
    public Object getItem(int position) {
        return meetings.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup mainViewGroup) {
        View mRow = inflater.inflate(R.layout.meeting_list_item, mainViewGroup, false);

        // Se setean los valores para cada componente de la lista
        TextView meetingName = (TextView) mRow.findViewById(R.id.meeting_name);
        meetingName.setText(meetings.get(position).getName());
        ImageView meetingImage = (ImageView) mRow.findViewById(R.id.meeting_image);
        meetingImage.setImageBitmap(meetings.get(position).getImage());

        return mRow;
    }

    @Override
    public Filter getFilter() {
        MeetingFilter filter = new MeetingFilter(meetings);
        return filter;
    }

} 
```

**会议过滤器.java**

```
import java.util.ArrayList;

import android.widget.Filter;

public class MeetingFilter extends Filter {

    //MeetingAdapter meetingAdapter;
    ArrayList<Meeting> meetings;

    public MeetingFilter(ArrayList<Meeting> meetings){
        //this.meetingAdapter = meetingAdapter;
        this.meetings = meetings;
    }

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults filteredResults = new FilterResults();
        if(constraint.length() == 0) {
            filteredResults.values = meetings;
            filteredResults.count = meetings.size();
            return filteredResults;
        }

        ArrayList<Meeting> filteredMeetings = new ArrayList<Meeting>();
        for (Meeting meeting : meetings) {
            // TODO Revisar problemas de internacionalización
            if(meeting.getName().toLowerCase().contains(constraint.toString().toLowerCase())) {
                filteredMeetings.add(meeting);
            }
        }
        filteredResults.values = filteredMeetings;
        filteredResults.count = filteredMeetings.size();

        return filteredResults;
    }

    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        meetings = (ArrayList<Meeting>) results.values;
        //meetingAdapter.notifyDataSetChanged();
    }

} 
```

**会议.java**

```
import java.util.Date;

import android.graphics.Bitmap;

public class Meeting {

    private int id;

    private String name;

    private String description;

    private Bitmap image;

    private Date initialDate;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Bitmap getImage() {
        return image;
    }

    public void setImage(Bitmap image) {
        this.image = image;
    }

    public Date getInitialDate() {
        return initialDate;
    }

    public void setInitialDate(Date initialDate) {
        this.initialDate = initialDate;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:14:03.290

我通过将 MeetingFilter 类作为内部类移动到 MeetingAdapter 类中解决了我的问题，我添加了

```
notifyDataSetChanged(); 
```

之后的方法

```
meetings = (ArrayList<Meeting>) results.values; 
```

希望对大家有帮助

# java - 无法在原始类型 double 上调用 set Double(Double)

> ID：15688032
> 
> 赞同：1
> 
> 时间：2013-03-28T17:12:09.613
> 
> 标签：java, arrays, double, jlist

好吧，我在 java 方面很糟糕（老实说我讨厌编程，我更喜欢网络）。无论如何，由于这是针对大学的，因此**我实际上无法共享很多代码而不会因学术不端而被完成**，尽管我可以自由地寻求帮助。

我有一个 JList，里面有一堆名字，还有一个数组代表这些名字的值

```
final Double[] filmcost = { 5.00, 5.50, 7.00, 6.00, 5.00 }; 
```

我想要做的是当有人从列表中选择某些东西时，它会将值分配给一个变量（它还将一个文本框设置为另一个数组中的一个字符串，但这很好用）。

所以我有我的变量

```
protected double filmCost; 
```

这是 ListSelectionListener

```
filmList.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent evt) {
                                                    filmCost.setDouble(filmcost[filmList.getSelectedIndex()]);
            }
        }); 
```

但是，它抱怨它“无法在原始类型 double 上调用 set Double(Double)”。我觉得解决方案非常简单，但我已经坚持了一个多小时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:13:43.230

A`double`只是一个没有方法的原始值，只需分配它。

```
filmCost = filmcost[filmList.getSelectedIndex()]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:18:17.540

你需要的是这样写：

```
filmList.addListSelectionListener(new ListSelectionListener() {
       public void valueChanged(ListSelectionEvent evt) {
             filmCost = filmcost[filmList.getSelectedIndex()];
       }
 }); 
```

因为`filmCost`是双重原语，您不能在原语上调用任何方法（它们不是您调用的对象`set`或`get`任何方法）。因此，只需使用`=`.

也是一个建议，更改变量名称`filmCost`，`filmcost`因为它们非常令人困惑（它们看起来相同，至少我第一眼就感到困惑）。

# android - Android 正则表达式 - 信用卡跟踪

> ID：15688033
> 
> 赞同：0
> 
> 时间：2013-03-28T17:12:10.597
> 
> 标签：android, regex

我正在实现一个读卡器，我需要在 android 中使用正则表达式。在维基百科之后，track1 的正则表达式是：

```
^%([A-Z])([0-9]{1,19})\^([^\^]{2,26})\^([0-9]{4}|\^)([0-9]{3}|\^)([^\?]+)\?$ 
```

在这里尝试：[http](http://www.regexplanet.com/advanced/java/index.html) ://www.regexplanet.com/advanced/java/index.html使用以下示例：%B6011898748579348^DOE/JOHN ^37829821000123456789? 它有效，但不适用于我的应用程序。

```
String re = "%([A-Z])([0-9]{1,19})\\^([^\\^]{2,26})\\^([0-9]{4}|\\^)([0-9]{3}|\\^)([^\\?]+)\\?";
Pattern p = Pattern.compile(re);
String teste = "%B6011898748579348^DOE/ JOHN              ^37829821000123456789?";
Matcher m = p.matcher(teste);
    Log.d(TAG,"1111: "+m.groupCount());
int i=0;
for(i=0;i<m.groupCount();i++){
    try{
        Log.d(TAG, "GROUP"+Integer.toString(i)+" - "+m.group(i));
    }catch (IllegalStateException e){
    Log.d(TAG, e.toString());
    }
} 
```

用 ^ 和 $ 和多行测试但没有工作：s 结果总是：

1111：6 java.lang.IllegalStateException：到目前为止没有成功匹配 java.lang.IllegalStateException：没有成功......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:26:32.807

你需要先使用`m.find()`。你也应该迭代包括最后一组。试试这个方法

```
...
if(m.find()){
    Log.d(TAG,"1111: " + m.groupCount());

    //change '<' into '<=' to include group 6
    for(int i=0; i<=m.groupCount(); i++){ 
        try{
            Log.d(TAG, "GROUP"+Integer.toString(i)+" - "+m.group(i));
        }catch (IllegalStateException e){
            Log.d(TAG, e.toString());
        }
    }
} 
```

# jenkins - 为什么詹金斯忘记了我的工作？

> ID：15688039
> 
> 赞同：1
> 
> 时间：2013-03-28T17:12:34.693
> 
> 标签：jenkins, jenkins-plugins

为后代：

升级一些插件后，我的[Jenkins](http://jenkins-ci.org/)工作之一消失了。

我查看了错误日志，发现[Promoted Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)在解析作业配置时失败。

什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:12:34.693

看来，[Promoted Builds Plugin 版本 2.9](https://github.com/jenkinsci/promoted-builds-plugin/tree/promoted-builds-2.9)在我的场景中出现了问题，它指定了一个提升操作来构建参数化作业。我删除了作业 conf 文件中与升级版本有关的部分，重新​​启动了 Jenkins，作业重新出现。然后我重新配置了促销动作，一切似乎都很好。

# video.js - Video.js CSS 样式在 < IE9 中损坏 - [AKA 控件隐藏]

> ID：15688042
> 
> 赞同：3
> 
> 时间：2013-03-28T17:12:41.437
> 
> 标签：video.js

在跨浏览器兼容性方面有点难题，可以使用一些帮助。

我们链接到下面的实时版本似乎在大多数浏览器上都可以正常工作，包括 IE9+，但这些控件似乎隐藏在非模拟的开箱即用版本的 IE8 中：

[http://dig-houston.com/portfolio/inspiron](http://dig-houston.com/portfolio/inspiron)

这是它在 IE8 中的截图： ![IE8 中隐藏的 Video.js 控件](../Images/33a187f77080f6412f70ee0d4f8e9fb5.png)

在某一时刻，我仍然能够稍微看到控件从底部伸出（并单击），这让我相信绝对定位或拒绝更新的 CSS 技术出现了问题。但是随着我的微调和高度的调整，我相信控件在盒子外面被隐藏得更远了。

话虽如此，我认为这只是一个 CSS 问题，但还没有针对正在应用的正确样式。对于其他使用 Video.js 的人

# oracle - 在列中插入数据避免重复

> ID：15688046
> 
> 赞同：1
> 
> 时间：2013-03-28T17:13:01.537
> 
> 标签：oracle, plsql, oracle11g

假设我有一个查询，它在加入多个表后获取 col1。我想将该 col1 的值插入到远程数据库上的表中，即我将使用 dblink 来执行此操作。

现在 col1 将从 4-5 个不同的数据库中获取。从 db1 获取的 value1 也有可能在 db2 中获取 b。我怎样才能避免重复？

在我的远程数据库中，我创建了 col1 一个主键。因此，在插入时，如果存在重复键，则会引发错误，最终导致其余过程失败。我不想。我在考虑两种方法

1.  编写一个 PLSQL 脚本，对于每个值，确定值是否已经存在。如果没有，则插入。
2.  编写一个 PLSQL 脚本并插入并捕获重复键异常。例外将被忽略，它将继续插入（听起来不太好）。

您更喜欢哪种方法？我还能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:30:15.907

我会使用 MERGE 语句和 WHEN NOT MATCHED THEN INSERT。

相同的合并也可以更新，但不必更新，只需将更新部分排除在外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:53:59.193

不同的数据库可以有重复的主键，但这并不意味着记录是重复的。每种情况下的实际数据可能不同。或者记录可能代表相同的现实世界事物但处于不同的状态，不知道，您没有提供足够的解释。

关键是，您需要更多分析为什么会存在重复记录，并且可能需要更复杂的方法来处理冲突。您是否需要获取所有记录（在这种情况下您需要合成密钥）？或者你只取一个实例（那么你如何决定优先级）？可能存在其他情况。

在任何情况下，MERGE 或 PL/SQL 循环都可能是一种过于粗糙的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:29:08.257

首先，我建议您的目标数据库驱动所有这些插入，因为跨数据库链接插入/更新可能会产生一些锁定问题并使事情进一步复杂化，尤其是在多个数据库尝试访问并在同一个表上执行 DML 时。但是，如果这是不可能的，下面的解决方案将起作用。

我会通过在每行的目标表上进行表查找来解决您的主键问题。

```
INSERT INTO customer@dblink.oracle.com cust
(emp_name,
 emp_id)
VALUES
(SELECT 
    cust.employee_name, 
    cust.employee_id --primary_key
FROM
    source_table st
WHERE NOT EXISTS
  (SELECT 1 
   FROM customer@dblink.oracle.com cust
   WHERE cust.employee_id = st.emp_id)); 
```

同样，除非绝对必要，否则我不会推荐跨数据库链接的 DML 事务，因为有时您可能会遇到奇怪的锁定行为。

PL/SQL 过程或匿名 PL/SQL 块可用于创建批量处理解决方案，如下所示：

```
CREATE OR REPLACE PROCEDURE send_unique_data
AS
  TYPE tab_cust IS TABLE OF customer@dblink.oracle.com%ROWTYPE
     INDEX BY PLS_INTEGER;
  t_records   tab_cust;

BEGIN
    SELECT 
      cust.employee_name, 
      cust.employee_id --primary_key
    BULK COLLECT
    INTO t_records
    FROM source_table;

    FORALL i IN t_records.FIRST...t_records.LAST SAVE EXCEPTIONS
        INSERT INTO customer@dblink.oracle.com
        VALUES t_records(i);
END send_unique_data; 
```

您还可以调用系统 SQL%BULKEXCEPTIONS 集合，以防您想对引发异常的记录（例如违反 unique_constraint）做任何事情。请注意，如果尝试插入大量重复数据，此解决方案将导致目标表出现性能问题。

# excel - Excel 宏 VBA 未指示

> ID：15688048
> 
> 赞同：1
> 
> 时间：2013-03-28T17:13:11.633
> 
> 标签：excel, vba

我正在尝试修改我找到的代码。它是一个 VBA 函数，用于搜索单元格值的所有实例，然后将每个实例的单元格值返回到一个单元格中。我试图只返回尚未找到的值，因此最终得到一个不包含重复项的单元格。

原始代码：

```
Function Lookup_concat(Search_string As String, _
Search_in_col As Range, Return_val_col As Range)
Dim i As Long
Dim result As String
For i = 1 To Search_in_col.Count
If Search_in_col.Cells(i, 1) = Search_string Then
result = result & " " & Return_val_col.Cells(i, 1).Value
End If
Next
Lookup_concat = Trim(result)
End Function 
```

我已将代码修改为此，我已缩进编辑而不是将其保留在同一行以使其更易于阅读

```
Function Lookup_concat(Search_string As String, _
Search_in_col As Range, Return_val_col As Range)
Dim i As Long
Dim result As String
For i = 1 To Search_in_col.Count
If Search_in_col.Cells(i, 1) = Search_string 
      And Not (InStr(1, result, Return_val_col.Cells(i, 1).Value)) Then
result = result & " " & Return_val_col.Cells(i, 1).Value
End If
Next
Lookup_concat = Trim(result)
End Function 
```

这个版本最接近 PHP`!strstr`函数（我确实理解），也许试图将 PHP 技术应用于 VBA 是我出错的地方。我的想法是结果字符串实际上是在我的`Instr`命令之后填充的，这就是它不起作用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:19:57.070

是你要找的吗？

```
Function Lookup_concat(Search_string As String, Search_in_col As Range, Return_val_col As Range)
    Dim i As Long
    Dim result As String
    For i = 1 To Search_in_col.Count
        If InStr(1, Search_in_col.Cells(i, 1).Value, Search_string, vbTextCompare) > 0 Then
            result = result & " " & Return_val_col.Cells(i, 1).Value
        End If
    Next
    Lookup_concat = Trim(result)
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:20:43.483

我相信您正在尝试使用两个`If`s。您只想添加基于范围内的字符串，并且仅在尚未添加字符串的情况下添加。

试试这个：

```
Function Lookup_concat(Search_string As String, _
Search_in_col As Range, Return_val_col As Range)
   Dim i As Long
   Dim result As String

   For i = 1 To Search_in_col.Count

      If (Instr(1, Search_in_col.Cells(i, 1), Search_string) > 0 )
          And ( InStr(1, result, Return_val_col.Cells(i, 1).Value) = 0 ) Then

         result = result & " " & Return_val_col.Cells(i, 1).Value

      End If

   Next

   Lookup_concat = Trim(result)

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:05:44.063

不完全确定你在做什么`Search_in_col`，`Return_val_col`但你肯定需要使用`If Instr() > 0`测试。

如果这个结果 > 1，那么你可能不需要做任何事情。如果结果为 0，那么您将需要进行连接。那是我不确定您为什么要`search_in_col.cells(i,1).Value`作为搜索参数传递，然后与 连接的部分`Return_val_col.Cells(i,1).Value`，因此您实际上并没有连接您用作搜索参数的值...

```
'if the cell's value exists in the search_string
If InStr(1, Search_in_col.Cells(i, 1).Value, search_string, vbBinaryCompare) > 0 Then
    'probably you want to do nothing here, since it's already existing
Else:
    'the cell's value does not exist in the search_string, so concatenate it
    result = result & " " & "whatever value you want to append to the result"
End If 
```

# javascript - jQuery，反向 $.each 的各种？

> ID：15688049
> 
> 赞同：2
> 
> 时间：2013-03-28T17:13:16.773
> 
> 标签：javascript, jquery, dom

我正在尝试运行一`UL`组：

```
<ul>
    <li>
        <h2>Header 1</h2>
        <ul class="collapse">
            <li>A</li>
            <li>B</li>
            <li>C</li>
            <li>D</li>
            <li>E</li>
        </ul>
    </li>
    <li>
        <h2>Header 2</h2>
        <ul class="collapse">
            <li>A</li>
            <li>B</li>
            <li>C</li>
            <li>D</li>
            <li>
                <h2>Header 3</h2>
                <ul class="collapse">
                    <li>A</li>
                    <li>B</li>
                    <li>C</li>
                    <li>D</li>
                    <li>
                        <h2>Header 4</h2>
                        <ul class="collapse open">
                            <li>A</li>
                            <li>B</li>
                            <li>C</li>
                            <li>D</li>
                            <li>E</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

如果我发现其中一个具有该班级的孩子，`open`我想删除该班级`collapse`和/或`open`从该班级之前的任何父级别 UL 中找到`open`. 也许我累了，但我有这个严重缺陷的逻辑，在我的脑海里我试图理解它，同时我觉得它不合逻辑，而且肯定会有更简单的方法来做到这一点。（请注意，`$.each()`我目前正在尝试的是有缺陷的并且无论如何都不起作用）。但是如果有人去的话，我可以使用一些想法来解决这个问题。

```
$('ul').each(function()
{
    if($(':not(:first)', this))
    {
        if($(this).hasClass('collapse'))
        {
            alert('collapse found');
            $kid = $(this).child('ul');

            if($kid.hasClass('open'))
            {
                alert('uh')
                $kid.parents('ul').removeClass('collapse');
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:20:24.323

```
$('ul.open:has(li.open)').removeClass('open collapse'); 
```

`UL`在类中查找 all `.open`，并检查它们是否包含`LI`与`.open`类的 a，如果是，则删除两者`open`和`collapse`类（如果存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:19:19.040

如果您在 top 上放置某种标识符或类`ul`，则可以执行以下操作：

```
$('.collapse .open')
    .parentsUntil('#root', 'ul.collapse')
    .removeClass('collapse'); 
```

* * *

编辑：这是一个 jsfiddle 来演示：http: [//jsfiddle.net/vA5Gu/](http://jsfiddle.net/vA5Gu/)

另外，即使问题中没有说明，听起来您可能还想删除带有类`collapse`的元素上的`open`类？如果是这样，您只需要添加`addBack()`命令。例如，

```
$('.collapse .open')
    .parentsUntil('#root', 'ul.collapse')
    .addBack()
    .removeClass('collapse'); 
```

此处演示：http: [//jsfiddle.net/vA5Gu/1/](http://jsfiddle.net/vA5Gu/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:16:59.890

不确定我是否清楚地解决了这个问题，但这会起作用吗？

```
$('.collapse.open').each(function(){
    $(this).closest('ul.collapse').removeClass('collapse');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:17:14.707

```
$('.collapse .open').each(function(){
    $(this).parent().removeClass('collapse');
}); 
```

我认为这会奏效。我需要在小提琴中进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T17:20:09.120

尝试

```
$('.collapse.open').each(function(){
    $(this).parents('ul.collapse, ul.open').removeClass('collapse open');
}); 
```

# jquery - jQuery 移动表单验证没有结果

> ID：15688051
> 
> 赞同：1
> 
> 时间：2013-03-28T17:13:27.133
> 
> 标签：jquery, jquery-mobile, jquery-validate

我正在尝试学习 jQuery Mobile 的 jQuery 表单验证。我不断遇到[本教程](http://www.elijahmanor.com/2011/02/jquery-mobile-form-validation.html)，我正在尝试复制该教程，但资源链接肯定有问题，导致 html 看起来不错。理论上，当用户点击回车并且电子邮件和密码字段为空白时，应该会出现一条消息，告诉用户“此字段是必需的”。

这是整个代码：

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<script type="text/javacsript">
    $( "#frmLogin" ).validate({
        submitHandler: function( form ) {
            alert( "Call Login Action" );
        }
    });

</script>
<style type="text/css">
label.error {
    color: red;
    font-size: 16px;
    font-weight: normal;
    line-height: 1.4;
    margin-top: 0.5em;
    width: 100%;
    float: none;
}

@media screen and (orientation: portrait){
    label.error { margin-left: 0; display: block; }
}

@media screen and (orientation: landscape){
    label.error { display: inline-block; margin-left: 22%; }
}

em { color: red; font-weight: bold; padding-right: .25em; }

</style>

</head>
<body>
<div data-role="page" id="login">

  <div data-role="header">
     <h1>Acme Corporation</h1>
  </div>

  <div data-role="content">

    <form id="frmLogin">
      <div data-role="fieldcontain">
        <label for="email">
          <em>* </em> Email: </label>
          <input type="text" id="email" 
            name="email" class="required email" />
      </div>

      <div data-role="fieldcontain">
        <label for="password"> 
          <em>* </em>Password: </label>
          <input type="password" id="password" 
            name="password" class="required" />
      </div>

      <div class="ui-body ui-body-b">
        <button class="btnLogin" type="submit" 
          data-theme="a">Login</button>
      </div>
    </form>

  </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:35:36.727

通常，您会在 DOM 就绪事件处理程序中初始化任何 jQuery 插件。这确保了在`.validate()`调用和初始化之前构建 HTML。如您所见，您在 HTML 表单存在之前调用了它。将它放在一个就绪事件处理程序中可以防止代码在页面的 HTML 完全构建之前触发。

由于您使用的是 jQuery Mobile（它用于`ajax`加载页面），因此请使用这样的`.on('pageinit')`处理程序...

```
$(document).on('pageinit', function() { // <-- ensures the DOM is ready

    $("#frmLogin").validate({
        // your rules & options
    });

}); 
```

**工作演示：http: [//jsfiddle.net/5p9N5/](http://jsfiddle.net/5p9N5/)**

[在您的浏览器中，执行此页面](http://jsfiddle.net/5p9N5/show/)的“查看源代码”以查看脚本是如何正确包含的。 [http://jsfiddle.net/5p9N5/show/](http://jsfiddle.net/5p9N5/show/) ....

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>jsFiddle demo</title>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css">
        <link rel="stylesheet" type="text/css" href="/css/result-light.css">
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
        <script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>  
        <script type='text/javascript'>
        //<![CDATA[ 
            $(document).on('pageinit', function(){
                $('#myform').validate({ // initialize the plugin
                    // rules & options
                });
            });
        //]]>  
        </script>
    </head>
    <body>
        <form id="myform">
             .....
        </form>
    </body>
</html> 
```

* * *

对于非 jQuery 移动网页，您通常会将 jQuery 代码包含在这样的`.ready()`处理程序中......

```
$(document).ready(function() { // <-- ensures the DOM is ready

    $("#frmLogin").validate({
        // your rules & options
    });

    // any other jQuery

}); 
```

# ios - 添加新叠加层时，MKMapView 叠加重绘（闪烁）。MKPolyLines 是锯齿状的

> ID：15688055
> 
> 赞同：2
> 
> 时间：2013-03-28T17:13:40.083
> 
> 标签：ios, mkmapview, mapkit, mkpolygon

我正在测试 MKMapView 上的一些基本绘图功能，并且发生了一些奇怪的事情。您可以参考下面的保管箱链接。这是在实际设备上运行和测试的 - 而不是模拟器。

您会注意到一些 MKPolyLines 在连接时呈锯齿状，而有些则没有。这是什么原因，可以纠正吗？我没有看到任何设置抗锯齿的选项。我认为最右边的多边形是你能看到的最多的。但总的来说，有些线条似乎比其他线条更平滑。

此屏幕截图未显示的另一件事是，每次我点击视图以添加新的叠加层时，地图上的所有叠加层都会“闪烁”，就好像它们正在重绘或者重绘速度不够快一样。想知道这是什么原因，或者我应该做些什么来防止这种情况发生，我不知道。

还有一个关于代表的问题。如果您的地图上有 100 个不同的叠加层怎么办？您是否应该检查代表中的每个人，以告诉它要执行哪种绘图？就我而言，只有 3 种情况，但我可以想象这种方法可以用我在这里设置的方法变得非常大。我知道这是一个题外话，但我想我会在这里插入它。

[https://www.dropbox.com/s/dbordqnml33urmu/Screenshot%202013.03.28%2011.26.36.png](https://www.dropbox.com/s/dbordqnml33urmu/Screenshot%202013.03.28%2011.26.36.png)

这是相关代码：

```
-(void)addCoordinateToList:(UITapGestureRecognizer*)recognizer{
    CGPoint tappedPoint = [recognizer locationInView:map];
    CLLocationCoordinate2D coord = [map convertPoint:tappedPoint toCoordinateFromView:map];
    NSLog(@"Coordinate Info: Lat %f, Lon %f", coord.latitude, coord.longitude);

    CLLocation *newLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
    //Extension NSValue new for iOS6
    //[path addObject:[NSValue valueWithMKCoordinate:coord]];
    [path addObject:newLocation];

    [self drawPolygon];

    clearPolygonFromMap.enabled = YES;
    clearPolygonFromMap.alpha = 1.0;

    //add annotations
    [self setPolygonAnnotationWithCoordinate:coord andWithTitle:@"default title"];

} 
```

//绘制折线。设置多边形，但在完成绘制形状之前不要添加为叠加层。不包括此代码，因为这里有很多不相关的按钮状态。

```
-(void)drawPolygon{

NSInteger numberOfCoordinates = path.count;
if(coords != NULL)
    free(coords);
coords = malloc(sizeof(CLLocationCoordinate2D) * numberOfCoordinates);

CLLocationCoordinate2D coordinates[numberOfCoordinates];
for(int pathIndex = 0; pathIndex < numberOfCoordinates; pathIndex++){
    CLLocation *location = [path objectAtIndex:pathIndex];
    coords[pathIndex] = location.coordinate;

    coordinates[pathIndex] = coords[pathIndex];
}

  polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfCoordinates];
  polygon = [MKPolygon polygonWithCoordinates:coords count:path.count];
  [map addOverlay:polyLine];
} 
```

//设置圆形覆盖

```
-(void)setPolygonAnnotationWithCoordinate:(CLLocationCoordinate2D)coord andWithTitle:(NSString *)polygonDescription{

    circle = [MKCircle circleWithCenterCoordinate:coord radius:15];
    circle.title = polygonDescription;
    [map addOverlay:circle];
    //[map addAnnotation:circle];
} 
```

//MapView 覆盖委托方法。有没有更好的方法来检查覆盖？如果我有 100 个叠加层怎么办

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay{

    if(overlay == circle){
        pointCircleView = [[MKCircleView alloc]initWithOverlay:overlay];
        pointCircleView.strokeColor = [UIColor greenColor];
        pointCircleView.fillColor = [UIColor redColor];
        //circleView.alpha = 0.5;
        pointCircleView.lineWidth = 4.0;
        return pointCircleView;
    }
    else if(overlay == polyLine){
        borderView = [[MKPolylineView alloc] initWithPolyline:overlay];
        borderView.strokeColor = [UIColor blackColor];
        borderView.lineWidth = 1.0;
        return borderView;
    }
    else if(overlay == polygon){
        polygonView = [[MKPolygonView alloc] initWithPolygon:polygon];
        polygonView.strokeColor = [UIColor blackColor];
        polygonView.lineWidth = 1.0;
        polygonView.fillColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.0 alpha:0.4];
        return polygonView;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:07:25.520

对于闪烁，请参阅这篇[文章](https://stackoverflow.com/questions/15460556/how-to-stop-the-loading-flicker-when-adding-a-large-amount-of-mkoverlays-to-a-ma)- 它可能是覆盖系统中的错误。

对于锯齿状线条，它们在您的屏幕截图中确实看起来是抗锯齿的，但可能已经按比例放大了。从实验中，我相信叠加层被渲染到一个单独的位图以实现离散的缩放级别，然后在地图视图上渲染，放大或缩小以适应当前的缩放级别。因此，您的叠加层在该级别上看起来有点粗糙，但放大或缩小一点会改善它。

关于委托，您可以检查传入的叠加层的类以降低`mapView:viewForOverlay`函数的复杂性，而不是检查特定的叠加层。所以：

```
if ([overlay isKindOfClass:[MKPolyline class]])
{
    borderView = [[MKPolylineView alloc] initWithPolyline:overlay];
    borderView.strokeColor = [UIColor blackColor];
    borderView.lineWidth = 1.0;
    return borderView;
} 
```

# xml - Delphi 类到 XML 表示：

> ID：15688057
> 
> 赞同：5
> 
> 时间：2013-03-28T17:13:40.877
> 
> 标签：xml, delphi, xml-serialization, delphi-xe, xsd.exe

使用德尔福 XE：

XML 数据绑定向导基于 XML/XSD 生成 Delphi 类——效果很好。

**但**我还需要另辟蹊径：将 Delphi 类转换为 XML。我在 XE 中找不到任何支持。*（我知道这用 C#、.NET 很容易完成，但很明显，由于 Delphi 并不真正支持反射，所以它比 C# 困难得多）*

我确实有一个选择是用 SharpDevelop 在 C# 中编写类，并使用 MS 实用程序（我相信它是免费下载的）从 C# 代码生成 XML。我也有支持此功能的 VS 2005，但尚未安装，我不想参与其中）。

任何人都对如何完成这项工作有建议：直接从 Delphi 到 XML/XSD？一个开源工具会很好，或者一些可以做到这一点的好单元。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:52:17.287

NativeXml和[OmniXML](http://www.simdesign.nl/xml.html)[开源](http://code.google.com/p/omnixml/)库可以将 Delphi 对象转换为 XML（不是 XSD）。即使在 2010 年之前的 Delphi 版本中，它们也支持对象序列化和反序列化。

因此，可以在第一步中使用它们来创建一个 XML 文件，然后可以将其传递给数据绑定向导以生成 Delphi 类代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T17:18:52.340

Robert Love 在 2009 年底写了一篇文章，涵盖了该主题：[Xml 序列化 - 基本用法](http://robstechcorner.blogspot.com/2009/10/xml-serialization-basic-usage.html)。它使用自 Delphi 2010 起可用的“新”RTTI。

# html - 如何在服务器上安装引导选择

> ID：15688062
> 
> 赞同：1
> 
> 时间：2013-03-28T17:13:52.917
> 
> 标签：html, css, twitter-bootstrap

我想使用[此处创建](https://github.com/silviomoreto/bootstrap-select)的选择下拉菜单，但我可以使用一些指导来了解如何安装它。

我假设我将 CSS 和 js 文件复制到我自己的 CSS 和 js 文件夹中，但我是否也在它提到的 JavaScript 行中复制，还是可选的？我尝试将它放在标题中的一些脚本标签之间，但这并没有让我的选择框工作。

出于测试目的，我正在使用：

```
<select class="selectpicker">
    <option>Mustard</option>
    <option>Ketchup</option>
    <option>Barbecue</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:29:13.707

只需在您的 HTML 中包含 .js 和 .css 即可调用`$('select').selectpicker();`以初始化 selectpicker。这将修改`select`您页面上的所有标签，如果您只想修改一个，只需更改选择器即可。

我在这里做了一个 jsfiddle：http: [//jsfiddle.net/hh4KP/](http://jsfiddle.net/hh4KP/)但这里的文档和示例： http: [//silviomoreto.github.io/bootstrap-select/](http://silviomoreto.github.io/bootstrap-select/)非常详尽。

# php - 上传索引错误

> ID：15688064
> 
> 赞同：0
> 
> 时间：2013-03-28T17:14:02.633
> 
> 标签：php, upload

我有这个代码，

```
<?php 
include('menu/menu.html');
if (isset ($_POST['submit'])){
?>
<div id="search">
<form action="upload.php" method="post" enctype="multipart/form-data">
<table><tr><td><input type="file" name="filename"/></td>
<td align="right"><input type="submit" name="submit" value="Descargar"></td></tr>      </table>
</form>
</div>
<div id="result">
<div id="nresult">
<?php
if ($_FILES['filename']['type'] != "application/pdf")
  {
  echo "Error " . $_FILES['filename'] . ": el archivo no es pdf.<br>";
  }
else
  { 
```

我有这个错误，

注意：未定义索引：第 27 行 D:\xampp\htdocs\PHPEx\capsordenadores\Main.menu\upload.php 中的文件名

注意：未定义索引：第 29 行 D:\xampp\htdocs\PHPEx\capsordenadores\Main.menu\upload.php 中的文件名

我不明白为什么在定义索引时会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:18:53.330

你还没有定义任何东西。您正在呈现一个表单，然后尝试访问该表单*最终*可能会在后续请求中上传的数据。`filename`在用户点击该表单上的提交按钮之前，该索引不会以任何方式创建或可用。

通常，您会将表单处理逻辑放在顶部，在那里它可以执行并有条件地呈现表单，除非数据被回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:32:57.503

您发布的代码的逻辑不正确。

最初，当您要上传文件时，有两种逻辑：

1- 使用相同的 php 文件来显示表单和处理上传：

将包含文件字段的表单布局放在一个块中，将上传过程放在另一个块中。

我的意思是你必须把你的代码分成两部分：

*   如果第一次访问页面，第一部分将被执行，在这种情况下，页面必须显示向用户询问您要上传的文件的表单

*   第二部分，如果由于回发而访问该页面，它将被执行（用户在指向该页面的表单中按下提交按钮后访问该页面）

并且文件 [upload.php] 的代码必须如下所示：

```
<?php 
include('menu/menu.html');
if (!isset($_POST['submit']))
    {
    ?>
    <div id="search">
        <form action="upload.php" method="post" enctype="multipart/form-data">
            <table>
                <tr>
                    <td><input type="file" name="filename"/></td>
                    <td align="right"><input type="submit" name="submit" value="Descargar"></td>
                </tr>
            </table>
        </form>
    </div>
    <?php
    }
else
    {
        ?>
        <div id="result">
        <div id="nresult">
        <?php
        if ($_FILES['filename']['type'] != "application/pdf")
            {echo "Error " . $_FILES['filename'] . ": el archivo no es pdf.<br>";}
        else
            {\\Procces your upload}
    } 
```

2-第二个逻辑是将表单布局放在一个文件中，将上传过程放在另一个文件中，并将第一页中的表单指向第二页，如下所示：

放入名为 [uploadlayout.php] 的文件

```
<div id="search">
<form name="form1" method="post" action="uploadcode.php" enctype="multipart/form-data">
    <table>
        <tr>
            <td><input type="file" name="filename"/></td>
            <td align="right"><input type="submit" name="submit" value="Descargar"></td>      
        </tr>
    </table>
</form>
</div> 
```

在名为 [uploadecode.php] 的文件中

```
<?php
if ($_FILES['filename']['type'] != "application/pdf")
    {echo "Error " . $_FILES['filename'] . ": el archivo no es pdf.";}
else
    {//Proccess your upload} 
```

?>

现在，每次您访问“uploadlayout.php”页面并浏览到文件然后按提交按钮“Descragar”时，您将选择的文件发布到“uploadcode.php”页面，文件类型的测试将是执行，如果成功，将执行上传过程，如果失败，您将显示错误“el archivo no es pdf”

我希望我已经清楚地解释了这一点，如果您有其他问题或只是您需要任何澄清，请告诉我:)

# c# - 插入大 blob 时 mySQL 断开连接

> ID：15688066
> 
> 赞同：0
> 
> 时间：2013-03-28T17:14:05.723
> 
> 标签：c#, mysql, .net, blob

我正在使用此方法将一个大 blob 插入我的 mySQL 数据库（Blob 大小 ~40MB） 约 15 秒后它会引发异常。这里的整个事情都适用于小于~20MB的blob。

```
protected override int internalExecuteInt(string SQL, byte[] Blob)
{
    using (MySqlCommand cmd = new MySqlCommand(SQL, connection))
    {
        if (Blob != null)
        {
            cmd.CommandTimeout = 600;
            cmd.Parameters.AddWithValue("@blob", Blob);
        }
        return cmd.ExecuteNonQuery();
    }
}

...
internalExecuteInt("INSERT INTO images (image) VALUES (@blob)", myLargeBlob);
... 
```

例外：

> MySqlException：命令执行过程中遇到致命错误。

内部异常：

> SocketException：一个现有的连接被远程主机强行关闭

我已经更改了 net_read_timeout (600)、net_write_timeout (600)、wait_timeout (28800)、slave_net_timeout (3600) 和 interactive_timeout (28800)。

“图像”列是 LONGBLOB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:24:50.177

尝试将列更改为 LONGBLOB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T23:50:51.017

我曾经遇到过类似的问题，增加日志文件有帮助。请参阅 my.ini 中的“innodb_log_file_size”变量 - 它通常需要是 blob 的两倍。虽然仍然在某个时候（比如 200MB+），但它可能仍然无济于事......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T10:06:45.607

我遇到了同样的问题。
设置以下变量对我有帮助。

```
set global bulk_insert_buffer_size=99999744; 
```

# git - 如何仅提交外部文件中列出的文件名

> ID：15688067
> 
> 赞同：1
> 
> 时间：2013-03-28T17:14:07.620
> 
> 标签：git, version-control

我有一个包含大量修改的源代码树。我选择了一大堆文件，然后放入一个文件中。有没有办法只提交这些？

我想要类似的东西：

```
git commit --files "/tmp/files-to-commit.txt" -m "Fixed bug" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:16:22.990

```
git add `cat /tmp/files-to-commit.txt`
git commit -m "Fixed bug" 
```

```做shell扩展。因此，如果您在文件中有文件名，则将它们分类出来会将它们列为 args。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:51:41.150

这些文件已经被标记，因此我不需要使用**git add**添加它们。此外，我不想删除其他一起放置的文件，我只想提交一组特定的文件。

我是通过这种方式得到的：

```
git commit <first-file-of-list> -m "Fixed bug" 
```

然后，从文件列表中删除第*一个*文件列表并使用以下命令提交其他文件：

```
cat /tmp/files-to-commit.txt|while read file; do
    git commit $file --amend --m "Fixed bug"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-15T20:52:52.263

在 6 年后的 Git 2.25（2020 年第一季度）中，一些命令（`git add`, `git-commit`, `git reset`）学会**了从标准输入或命名文件**中获取路径规范，而不是将其作为命令行参数。

请参阅[Alexandr Miloslavskiy ( ) 的](https://github.com/SyntevoAlex)[提交 e440fc5](https://github.com/git/git/commit/e440fc5888bd5faf1775fc61621caa3c5fab96b6)、[提交 66a25a7](https://github.com/git/git/commit/66a25a7242e4e16480eab89da6557f90a2924c12)、[提交 64bac8d](https://github.com/git/git/commit/64bac8df972782b3b3dd2841699f076c7573c1db)、[提交 d137b50](https://github.com/git/git/commit/d137b5075660d633ef93342974350f1d0657a54c)、[提交 24e4750](https://github.com/git/git/commit/24e4750c969b844536af1d286e7d977c74c078a2)（2019 年 11 月 19 日）和[提交 add9770](https://github.com/git/git/commit/add97702ed7cc3aa57b15c50b72606eb2f2f8cf5)（2019 年 11 月 6 日[）](https://github.com/SyntevoAlex)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c58ae96](https://github.com/git/git/commit/c58ae96fc4bb11916b62a96940bb70bb85ea5992))^(中，2019 年 12 月 10 日）)[`SyntevoAlex`](https://github.com/SyntevoAlex)
^([`gitster`](https://github.com/gitster))

例子：

> ## [`commit`](https://github.com/git/git/commit/e440fc5888bd5faf1775fc61621caa3c5fab96b6): 支持`--pathspec-from-file`选项
> 
> ^(签字人：亚历山大·米洛斯拉夫斯基)
> 
> 为简单起见做出的决定：
> 
> 1.  现在，`--pathspec-from-file`被声明为与 不兼容`--interactive/--patch`，即使`<file>`不是`stdin`。
>     这样的用例并不是真正预期的。
>     此外，它还需要对`interactive_add()`.
>     
>     
> 2.  不允许在 args 和 file 中传递 pathspec

[`git commit`手册页](https://github.com/git/git/commit/c58ae96fc4bb11916b62a96940bb70bb85ea5992#diff-48bff4ea1f433db2bf841a615e395d74R281-R294)现在包括：

> ```
> --pathspec-from-file=<file>: 
> ```
> 
> 传入 Pathspec`<file>`而不是命令行参数。
> 如果`<file>`恰好是，`-`则使用标准输入。
> Pathspec 元素由 LF 或 CR/LF 分隔。
> Pathspec 元素可以按照配置变量的说明进行引用`core.quotePath`
> 
> ```
> --pathspec-file-nul: 
> ```
> 
> 只对 有意义`--pathspec-from-file`。
> Pathspec 元素用`NUL`字符分隔，所有其他字符都按字面意思表示（包括换行符和引号）。

* * *

还是Git 2.25（Q1 2020），上面的系列（教“ `--pathspec-from-file`”到“ `git commit`”）忘记让选项与“ `--all`”不兼容，已更正。

请参阅[Alexandr Miloslavskiy ( ) 的](https://github.com/SyntevoAlex)[提交 509efef](https://github.com/git/git/commit/509efef789de51f5d68e5c9799918f9a5ea09670)（2019 年 12 月 16 日[）](https://github.com/SyntevoAlex)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([ff0cb70 提交中](https://github.com/git/git/commit/ff0cb70d456f586c94f15daa67d2ff1bb8e75fb6))^(，2019 年 12 月 25 日）)[`SyntevoAlex`](https://github.com/SyntevoAlex)
^([`gitster`](https://github.com/gitster))

> ## [`commit`](https://github.com/git/git/commit/509efef789de51f5d68e5c9799918f9a5ea09670): 禁止 --pathspec-from-file --all
> 
> ^(报告人：Phillip Wood)
> ^(签字人：Alexandr Miloslavskiy)
> 
> 我在之前的补丁`--pathspec-from-file`中忘记了这一点`git commit`（提交[e440fc58](https://github.com/git/git/commit/e440fc5888bd5faf1775fc61621caa3c5fab96b6)）。
> 当同时指定`--pathspec-from-file`and时，优先并被忽略。 在实施之前，这种情况是通过这个签入来防止的：`--all``--all``--pathspec-from-file`
> `--pathspec-from-file``parse_and_validate_options()`
> 
> ```
> die(_("paths '%s ...' with -a does not make sense"), argv[0]); 
> ```
> 
> 不幸的是，这两个案例是脱节的。
> 这是因为代码在我的补丁之前是如何布局的，`pathspec`在`parse_and_validate_options()`. 这个分支已经满是重构补丁了，我不敢再去找了。
> 
> 也可以通过镜像修复`die()`。`--pathspec-from-file`

# asp.net - 将日期时间从 asp.net 插入到 sql server

> ID：15688068
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:14:08.107
> 
> 标签：asp.net, sql, sql-server, datetime

我有个问题。我需要`DateTime`从 ASP.NET 插入 SQL。我有一个用于插入日期的日历和两个`DropDownlist`. 一个小时，另一个分钟。我不知道如何一次从日历和时间（小时和分钟）中插入日期。此代码仅插入日期。例如`28.3.2013 0:00:00`.

```
cmd.CommandText = "insert into Milniky ( datetime ) values ('" + CalendarDz.SelectedDate + DropDownListHz + DropDownListMz +"')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:25:07.057

您应该考虑在插入时创建`DateTime`对象和参数以防止错误数据。

```
int hour = int.Parse(DropDownListHz.SelectedValue);
int minute = int.Parse(DropDownListMz.SelectedValue);
DateTime dt = CalendarDz.SelectedDate;
dt.AddHours(hour);
dt.AddMinutes(minutes);
cmd.CommandText = "insert into Milniky ( datetime ) values (@dt)";
cmd.Parameters.Add(new SqlParameter("@dt", dt.ToString("yyyy-MM-dd HH:mm:ss"))); 
```

您可能还想使用它`DateTime.TryParse(s)`来提供更好的用户体验

但是，在您的特定命令中，我怀疑您需要在语句中添加一个空格和一个冒号来连接一个日期。

目前，您的命令看起来像是在创建类似的东西，`2013-3-28130`而您想要的是类似`2013-3-28 1:30`.

```
cmd.CommandText = "insert into Milniky ( datetime ) values ('" + CalendarDz.SelectedDate.ToString("MM/dd/yyyy") + " " + DropDownListHz + ":" + DropDownListMz +"')"; 
```

# php - 使用 PHP 将 CSV 转换为 MYsql

> ID：15688069
> 
> 赞同：0
> 
> 时间：2013-03-28T17:14:12.960
> 
> 标签：php, mysql, csv, delimiter

请不要关闭这个问题，我知道已经购买了很多解决方案，它们似乎都不起作用，或者至少对我不起作用。我有来自 google 联盟网络产品提要的 csv 文件，它采用 zip、.txt (csv) 制表符分隔符。到目前为止，我已经解压缩文件并读取文件，但我想做的是将该数据转储到 mysql 数据库，csv 的第一行是标题，我想根据 csv 文件创建字段名称并将数据分别放入数据库中，一些csv 文件中的字段为空。我还希望能够再次运行它（可能我会为此运行 cron 作业）并只在其中插入新数据。我的 csv 文件示例：

```
ProductID   ProductName ProductURL  BuyURL  ImageURL    Category    CategoryID  PFXCategory BriefDesc   ShortDesc   IntermDesc  LongDesc    ProductKeyword  Brand   Manufacturer    ManfID  ManufacturerModel   UPC Platform    MediaTypeDesc   MerchandiseType Price   SalePrice   VariableCommission  SubFeedID   InStock Inventory   RemoveDate  RewPoints   PartnerSpecific ShipAvail   ShipCost    ShippingIsAbsolut   ShippingWeight  ShipNeeds   ShipPromoText   ProductPromoText    DailySpecialsInd    GiftBoxing  GiftWrapping    GiftMessaging   ProductContainerName    CrossSellRef    AltImagePrompt  AltImageURL AgeRangeMin AgeRangeMax ISBN    Title   Publisher   Author  Genre   Media   Material    PermuColor  PermuSize   PermuWeight PermuItemPrice  PermuSalePrice  PermuInventorySta   Permutation PermutationSKU  BaseProductID   Option1 Option2 Option3 Option4 Option5 Option6 Option7 Option8 Option9 Option10    Option11    Option12    Option13    Option14    Option15    Option16    Option17    Option18    Option19    Option20    
4181615950845mkTWIN~TWIN    Brylanehome Jasmine Quilt Set (Sea Green,Twin)  http://gan.doubleclick.net/gan_click?lid=41000613802463546&pid=4181615950845mkTWIN~TWIN&adurl=http%3A%2F%2Fwww.brylanehome.com%2FProduct.aspx%3FPfId%3D20653%26ProductTypeId%3D2%26affiliate_id%3D017%26mr%3AtrackingCode%3D8C875316-BB51-E211-9A4A-90E2BA0278A8%26mr%3AreferralID%3DNA&usg=AFHzDLtiRj_wSyAQFEPxMBFVo4HjTeHMVA&pubid=21000000000568460  http://gan.doubleclick.net/gan_click?lid=41000613802463546&pid=4181615950845mkTWIN~TWIN&adurl=http%3A%2F%2Fwww.brylanehome.com%2FProduct.aspx%3FPfId%3D20653%26ProductTypeId%3D2%26affiliate_id%3D017%26mr%3AtrackingCode%3D8C875316-BB51-E211-9A4A-90E2BA0278A8%26mr%3AreferralID%3DNA&usg=AFHzDLtiRj_wSyAQFEPxMBFVo4HjTeHMVA&pubid=21000000000568460  http://media.redcatsecom.com/brylanehome/mc/1595_41816_mc_0845.jpg?wid=230&hei=331&qlt=95&op_sharpen=1  Bedding > Quilts            Picture perfect on any bed, this pieced and stitched quilt set is the ideal choice for spring bedding. &#160; &#8226; A BrylaneHome&#174; Exclusive!&#160; &#8226; all-over floral print quilt reverses to a stripe &#8226; scalloped edges &#8226; 100% cotton         Picture perfect on any bed, this pieced and stitched quilt set is the ideal choice for spring bedding. &#160; &#8226; A BrylaneHome&#174; Exclusive!&#160; &#8226; all-over floral print quilt reverses to a stripe &#8226; scalloped edges &#8226; 100% cotton face/cotton/poly fill &#8226; available in 3 sizes: Twin 2-Pc. Set 68" x 90", Full/Queen 3-Pc. 86" x 86", and King 3-Pc. 100" x 90" &#8226; machine wash/dry &#8226; imported &#8226; pair this quilt with any of our colorful and elegant sheets to create a dynamic layered look &#8226; and shop our selection of total bed sets to reinvent your d&#233;cor overnight &#160; This vibrant quilt set includes: 1 quilt and 2 standard shams (1 with twin).&#160; &#160; Why Buy?&#160; Our customers agree that our patchwork bedding shows off their vibrant and fun d&#233;cors while offering them incredible comfort at great values.&#160;      BrylaneHome Brylane Home        4181615950845mkTWIN~TWIN                new 114.99  59.99           in stock    47                                                                          adult           Brylanehome Jasmine Quilt Set (Sea Green,Twin)                      SEA GREEN   TWIN                                                                                            Home & Garden > Linens & Bedding > Bedding > Quilts & Quilt Sets    4181615950845mkTWIN~TWIN        1595-41816 
```

我用来解压的脚本：

```
<?php
$zip = new ZipArchive;     
    $res = $zip->open('K9349.zip');
    if ($res === TRUE) {
     $zip->extractTo('extracted/');
     $zip->close();
     echo 'Unzip was successful';
     } else {
     echo 'Unzip was not successful';
}
?> 
```

以下是我尝试过的两个脚本，但没有任何运气。脚本1：

```
<?php
$row = 1;
if (($handle = fopen("extracted/K9349.txt", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

脚本 2：

```
<?php

$host = '****';
$user = '****';
$pass = '****';
$database = '****';

$db = mysql_connect($host, $user, $pass);
mysql_query("use $database", $db);

/********************************************************************************/
// Parameters: filename.csv table_name
$file = 'extracted/K9349.txt';
$argv = $_SERVER[argv];

if($argv[1]) { $file = $argv[1]; }
else {
    echo "Please provide a file name\n"; exit; 
}
if($argv[2]) { $table = $argv[2]; }
else {
    $table = pathinfo($file);
    $table = $table['filename'];
}

/********************************************************************************/
// Get the first row to create the column headings

$fp = fopen($file, 'r');
$frow = fgetcsv($fp);

$ccount = 0;
foreach($frow as $column) {
    $ccount++;
    if($columns) $columns .= ', ';
    $columns .= "$column varchar(250)";
}

$create = "create table if not exists $table ($columns);";
mysql_query($create, $db);

/********************************************************************************/
// Import the data into the newly created table.

$file = $_SERVER['PWD'].'/'.$file;
$q = "load data infile '$file' into table $table fields terminated by ',' ignore 1 lines";
mysql_query($q, $db);

?> 
```

如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:32:39.500

请尝试以下脚本。希望能帮助到你。

```
<?php
ini_set('auto_detect_line_endings', true);
$dbconn = mysqli_connect("host", "username", "password", "database");
$importedCSVFile = "filename.csv";
$row_data = array();
if(($handle = fopen($importedCSVFile, "r")) !== FALSE) {
    $rowCounter = 0;
    while(($row_data = fgetcsv($handle, 0, "\t")) !== FALSE) {
        if(0 == $rowCounter) {
            $create_query = "CREATE TABLE IF NOT EXISTS table_name (";
            foreach($row_data as $column) {
                $create_query .= $column." VARCHAR(250), ";
            }
            $create_query = rtrim($create_query, ",").")";
            mysqli_query($dbconn, $create_query);
        } 
        else {
            $q_string = "";
            foreach($row_data as $key => $value) {
                $q_string = '"'.$value.'",';
            }
            mysqli_query($dbconn, 'INSERT INTO table_name VALUES ('.rtrim($q_string, ",").')');
        }
        $rowCounter++;
    }
    fclose($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T15:13:06.040

您来自 google 联盟网络产品 Feed 的 csv 文件可能始终采用相同的格式。因此手动创建表然后使用 cron 作业导入文件可能会更简单。

# java - 使用 JTextPane 设置代码样式

> ID：15688070
> 
> 赞同：1
> 
> 时间：2013-03-28T17:14:18.947
> 
> 标签：java, swing, selection, jtextpane

我如何使用 JTextPane 将一段文本设置为“CODE”，就像您在论坛上经常看到的那样，或者您在此处看到堆栈溢出？

```
public static main(String[] args) {
    /**
     * Look at this Code Block, ain't it grand?
     * I wish I had something like this in my program.
     */
} 
```

或者我在维基百科上看到的，文字是这样的：http: [//img39.imageshack.us/img39/4516/example.JPG](http://img39.imageshack.us/img39/4516/example.JPG)

谢谢！

**最终更新** Vishal K 的回答正是我所需要的。正如建议的那样，不是重复的。

**更新**
感谢您的回复。我正在寻找的内容与上面建议的可能答案之间的区别在于，我不仅对更改字体感兴趣，而且对添加背景感兴趣（所述背景周围的边框将是一个加号，但不是必需的。我不需要做语法高亮。

我认为 HTML 标签可能是要走的路，如果是这样，那真的是一个问题：如何使用 html 以这种方式格式化代码？我将使用提供的示例在答案中让你知道。

在问这个问题之前，我已经阅读了 Oracle 教程的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:59:47.433

> 我如何使用 JTextPane 将一段文本设置为“CODE”，就像您在论坛上经常看到的那样，或者您在此处看到堆栈溢出？

使用 HTML 标签。但在此之前，您必须将 contentType 设置为 ("text/html")。
这是一个简单的示例：
![在此处输入图像描述](../Images/cb3245a6a3e6400783f07de293dd0114.png)

```
import java.awt.BorderLayout;
import java.awt.Container;

import javax.swing.JTextPane;
import javax.swing.JScrollPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;

public class TextPaneDemo {
  static void addIt(JTabbedPane tabbedPane, String text) {
    JPanel panel = new JPanel();
    JTextPane ta = new JTextPane();
    ta.setContentType("text/html");
    ta.setText("<HTML><BODY><CODE> import java.io.*; <br> public class MyIO{}</CODE><br></BODY></HTML>");
    JScrollPane jsp = new JScrollPane(ta);
    panel.setLayout(new BorderLayout());
    panel.add(jsp);
    tabbedPane.addTab(text, panel);
  }

  public static void main(String args[]) {
    JFrame f = new JFrame("JTabbedPane Sample");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container content = f.getContentPane();
    JTabbedPane tabbedPane = new JTabbedPane();
    addIt(tabbedPane, "Tab One");
    content.add(tabbedPane, BorderLayout.CENTER);
    f.setSize(300, 200);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# java - 我的 android 应用程序中的按钮没有响应

> ID：15688071
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:14:19.400
> 
> 标签：java, android, overriding

我正在尝试实现一个对话框，当用户按下按钮时会弹出一个对话框。这目前有效，但是我在弹出窗口中包含的按钮没有响应。我尝试了以下代码来尝试解决问题。

```
public void showDialog()
{
    final Dialog dialog= new Dialog(context);
    dialog.setContentView(R.layout.dialog_info);

    infoView=(EditText) dialog.findViewById(R.id.infoView);
    infoView.setFocusable(false);
    infoView.setText("");

    dialog.setTitle(aList.get(count).toTitle());
    infoView.append(aList.get(count).toDescription());

    Button back=(Button)findViewById(R.id.back);
    Button reminder=(Button)findViewById(R.id.reminder);

    Log.e(TAG,"Testing click 1.5");

   back.setOnClickListener(new OnClickListener()
    {
       @Override
        public void onClick(View v)
        {
            Log.e(TAG,"Testing click 2");
            dialog.dismiss();
        }
    });
   dialog.show();
} 
```

按下第一个视图中的按钮（返回）后调用 showDialog()

```
 public void onClick(View v) {

    for (count =0;count<aList.size();count++)
        {
        if (v==buttons.get(count))
            {
             Log.e(TAG,"Testing click -1.1");
            showDialog();

            }
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:24:29.797

如果我理解错了，请纠正我，

你的按钮返回和提醒是对话框的一部分，所以你应该得到一个空指针异常。尝试像这样找到你的按钮

```
 Button back=(Button)dialog.findViewById(R.id.back);
 Button reminder=(Button)dialog.findViewById(R.id.reminder); 
```

编辑：通过这样做，您将在对话框中找到按钮。如果您不这样做，android 将尝试在 Activity 本身而不是对话框中找到按钮。

对于覆盖问题，请重新检查您是否完成了正确的导入。（View.onClickListner 有两种导入方式，我现在不记得它们的名称了。）您可以删除与 View.Onclick 关联的导入并尝试重新导入正确的包。

如果不是这种情况，那么我可能误解了你的问题。您可以检查您的 Java 合规性级别，看看它是否在 1.6 上。您可以通过转到 Java 合规级别下的项目属性来检查这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:24:44.017

您使用的是什么版本的 Java？

右键单击您的项目 转到属性 转到 Java 编译器 启用项目特定设置 选择 1.6 作为 Java 合规级别

这将修复@Override 错误。如果你想使用另一个版本，你可以删除所有的 @Override 注释。

# c# - 使用 ASP.NET MVC4 将视图中的 DropDownList 绑定到表中的列

> ID：15688074
> 
> 赞同：4
> 
> 时间：2013-03-28T17:14:28.513
> 
> 标签：c#, asp.net-mvc, razor

我是 ASP.NET MVC 的新手，如果对我的问题有任何帮助，我将不胜感激。我已经对这个主题进行了大量研究（显然还不够）。我需要将下拉列表绑定到表中的特定列，然后在视图中呈现它。我已经有查询来检索控制器中的表：

```
 public ActionResult SelectAccountEmail()
        {
            var queryAccountEmail = (from AccountEmail in db.UserBases select AccountEmail) 
            var selectItems = new SelectList(queryAccountEmail);
            return View(selectItems); 
        } 
```

在将查询绑定到视图中的下拉列表时，我迷失了方向。

```
@model RecordUploaderMVC4.Models.UserBase

@{
    ViewBag.Title = "SelectAccountEmail";
}

<h2>SelectAccountEmail</h2>

@Html.LabelFor(model => model.AccountEmail); 

@Html.DropDownList(Model.AccountEmail);  
@Html.ValidationMessageFor(model => model.AccountEmail); 

<input /type="submit" value="Submit"> 
```

运行时出现此错误：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

The model item passed into the dictionary is of type 'System.Web.Mvc.SelectList', but this dictionary requires a model item of type 'RecordUploaderMVC4.Models.UserBase'. 
```

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:19:51.970

很少有错。首先，更改您的模型以添加以下属性（查看您的视图，它是`RecordUploaderMVC4.Models.UserBase`）：

```
public class UserBase
{
    public string AccountEmail { get; set; }
    public SelectList Emails { get; set; }
    //rest of your model
} 
```

然后，在控制器中正确构建模型：

```
 public ActionResult SelectAccountEmail()
 {
     UserBase model = new UserBase();
     var queryAccountEmail = (from AccountEmail in db.UserBases select AccountEmail) 
     model.Emails = new SelectList(queryAccountEmail);

     return View(model); 
 } 
```

然后在您看来，您可以执行以下操作：

```
@Html.LabelFor(model => model.AccountEmail)

@Html.DropDownListFor(model => model.AccountEmail, Model.Emails)
@Html.ValidationMessageFor(model => model.AccountEmail) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:43:26.860

第 1 步：首先创建一个像这样的模型来保存您的 ListofAccountEmail

```
public class AccountEmailViewModel
    {

        public int AccountEmailId { get; set; }
        public string AccountEmailDescription { get; set; }
    } 
```

第 2 步：创建模型类

```
 public class UserBaseViewModel
    {    

                public IEnumerable<SelectListItem>  AccountEmail { get; set; }
                public string AccountEmail { get; set; }
    } 
```

第 3 步：

在控制器中

```
 [HttppGet]
            public ActionResult SelectAccountEmail()
            {
                var EmailAccounts = (from AccountEmail in db.UserBases select AccountEmail)

               UserBase userbaseViewModel = new UserBase
                {
                    AccountEmail = EmailAccounts.Select(x => new SelectListItem
                  {
                      Text = x.AccountEmailDescription,
                      Value = Convert.ToString(x.AccountEmailId)
                  }).ToList()

                };
                return View(userbaseViewModel);
            } 
```

第 4 步：在视图中

```
 @model RecordUploaderMVC4.Models.UserBase
    @{
       ViewBag.Title = "SelectAccountEmail";
    }
    <h2>SelectAccountEmail</h2>
    @Html.ValidationSummary()
    <h2>SelectAccountEmail</h2>
                            @Html.LabelFor(model => model.AccountEmail )

                                @Html.DropDownListFor(x => x.AccountEmailId, Model.AccountEmail, "Please Select", "")
                            </div>
    <input /type="submit" value="Submit"> 
```

# php - 是否可以为临时表创建索引

> ID：15688075
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:14:30.503
> 
> 标签：php, mysql, indexing

我想在一个临时表上应用索引，该表首先创建然后多次读取。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:19:29.433

当然可以在临时表上创建索引。

# c - 多线程从多个 UDP 客户端接收数据

> ID：15688078
> 
> 赞同：2
> 
> 时间：2013-03-28T17:14:36.467
> 
> 标签：c, linux, sockets, network-programming, udp

我想从不同的客户端接收数据（客户端数量是固定的，比如 10 个），并且每个客户端都在 5 个不同的预定义端口上发送数据，这些端口不会改变。（例如，客户端 1 端口 5000、5001、5002 等）。所有客户端可以同时发送数据。（以上都是固定的）

说在 TCP 中，我可以创建多个线程，一个用于我们接受的每个连接，如下所示。**UDP是无连接的，那么我们如何为每个UDP客户端（UDP端口）创建一个线程来处理并发数据？就像每个线程都有一个receivefrom（）函数来获取数据。**

//UDP服务器

```
#define BUFLEN 512

#define CLIENT1_PORT1 5000
#define CLIENT1_PORT2 5001
#define CLIENT1_PORT3 5002

#define CLIENT2_PORT1 5050
#define CLIENT2_PORT2 5051
#define CLIENT2_PORT3 5052  

#define CLIENT3_PORT1 6000
#define CLIENT3_PORT2 6001
#define CLIENT3_PORT3 6002

void diep(char *s) {
  perror(s);
  exit(1);
}

int main(void) {
  struct sockaddr_in client1_sockaddr_1, client1_sockaddr_2,client2_sockaddr_1,client2_sockaddr_2, si_other;
  int c1_sockfd_1,c1_sockfd_2, c2_sockfd_1,c2_sockfd_2, i, slen = sizeof(si_other);

  char buf[BUFLEN];

  /******for client 1 port1 **********/
  if((c1_sockfd_1 = socket(AF_INET, SOCK_DGRAM, 0)) == -1)
    diep("socket");

  memset((char *) &client1_sockaddr_1, 0, sizeof(client1_sockaddr_1));

  client1_sockaddr_1.sin_family = AF_INET;
  client1_sockaddr_1.sin_port = htons(CLIENT1_PORT1);
  client1_sockaddr_1.sin_addr.s_addr = htonl(INADDR_ANY);

  if(bind(c1_sockfd_1, (struct sockaddr *) &client1_sockaddr_1, sizeof(client1_sockaddr_1)) == -1)
    diep("bind");

  if((c2_sockfd_1 = socket(AF_INET, SOCK_DGRAM, 0)) == -1)
    diep("socket");

  /*******for client 2 port1 *******/
  memset((char *) &client2_sockaddr_1, 0, sizeof(client2_sockaddr_1));

  client2_sockaddr_1.sin_family = AF_INET;
  client2_sockaddr_1.sin_port = htons(CLIENT2_PORT1);
  client2_sockaddr_1.sin_addr.s_addr = htonl(INADDR_ANY);

  if(bind(c1_sockfd_2, (struct sockaddr *) &client2_sockaddr_1, sizeof(client2_sockaddr_1)) == -1)
    diep("bind");

//Receive from clients
while(1) {

  /*How to create threads at this point and have a separate recvfrom for each client port ??*/
  if(recvfrom(c1_sockfd_1, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen) == -1)
      diep("recvfrom()");

    printf("Recieved packet from %s: %d\nData: %s\n\n", inet_ntoa(si_other.sin_addr), ntohs(si_other.sin_port), buf);
  }
  close(c1_sockfd_1);
  return 0;
} 
```

**更新** 我每个客户端有 5 个端口，总共 5 * 10 个套接字，数据将在几毫秒的时间间隔内同时发送。每个端口上接收的数据包大小不同。数据包与 Header 和 CRC 一起发送。使用数据包编号来跟踪和重新请求丢失的数据包是个好主意吗？

（或）使用 UDP 跟踪丢失的数据包并请求它们的不同方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:11:34.463

An alternative to threads is select() function, which provides synchronous I/O multiplexing. You can provide your 5 socket fds to the select() function and wait until one of them is ready with data. Rinse and repeat.

Look at the man page: [http://linux.die.net/man/2/select](http://linux.die.net/man/2/select) or many tutorials on the web.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:45:21.793

如果您想要每个端口的线程解决方案：为每个端口号 p 创建一个线程并将其 p 作为参数传递，那么线程将执行：socket(); 绑定（p），而（1）{recvfrom（）；发送至（）; }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:35:50.693

您不需要多个线程。

如果您的瓶颈是 IO，那么线程将无济于事。

如果您的瓶颈是处理/CPU，请在一个线程中接受它们，然后分派到多个线程。

# php - getimagesize() 警告 - 文件名不能为空

> ID：15688079
> 
> 赞同：1
> 
> 时间：2013-03-28T17:14:42.903
> 
> 标签：php, image, file, upload

我有一个公式，用户应该在其中上传具有特定尺寸和类型的图像。当我选择图像并单击提交按钮时，会出现警告：

> 警告：getimagesize() [function.getimagesize]: 第 5 行 xxx.php 中的文件名不能为空

这个问题不需要检查尺寸和类型的代码。

```
<!-- language: lang-php -->
<?php
    if (isset($_POST["submit"])) {
        list($width, $height, $type, $attr) = getimagesize($_FILES["image"]["name"]);       
    } else { ?>

    <form action="#" method="post" enctype="multipart/form-data">
        <input type="file" name="image" />
        <input type="submit" name="submit" />
    </form>             
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:17:19.353

使用`$_FILES["image"]["tmp_name"]`而不是`$_FILES["image"]["name"]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:16:29.897

您需要将 tmp 文件放在那里，而不是文件名；

```
 list($width, $height, $type, $attr) = getimagesize($_FILES["image"]["tmp_name"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:16:53.397

在下面的块中，您不应该只检查`$_POST`，还要检查`$_FILES`. 您似乎没有成功将文件发送到服务器。

```
if(isset($_POST["submit"])) {

    list($width, $height, $type, $attr) = getimagesize($_FILES["image"]["tmp_name"]);       

} 
```

**编辑**：正如其他答案所指出的，您还应该使用“tmp_name”而不是名称。

# touch - Tooltip.followPointer 在 highcharts 3 中不起作用

> ID：15688081
> 
> 赞同：2
> 
> 时间：2013-03-28T17:14:52.717
> 
> 标签：touch, highcharts, tooltip

使用 HighCharts 3，在触摸设备上，我们不能再让工具提示跟随触摸。

但我已经看到了新选项`Tooltip`。`followPointer`.

目的是通过禁用平移并使工具提示跟随触摸来*恢复Highcharts 2 的行为，例如：*

```
 chart: {
        panning: false,
    },

    tooltip: {
        crosshairs: true,
        followPointer: true
    }, 
```

但它似乎不起作用..

演示：http: [//jsfiddle.net/jpFgq/1/](http://jsfiddle.net/jpFgq/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:09:51.007

现在似乎已修复，创建了一个新参数：' [followTouchMove](http://api.highcharts.com/highstock#plotOptions.spline.tooltip.followTouchMove) '

```
 chart: {
        panning: false,
    },

    tooltip: {
        crosshairs: true,
        followPointer: true,
        followTouchMove: true
    }, 
```

这是[更新的 JSFiddle](http://jsfiddle.net/jpFgq/6/)。在 ipad 上运行良好。

# android - Android -- 为什么我的应用程序使用大约 40MB 的缓存后台进程？

> ID：15688094
> 
> 赞同：10
> 
> 时间：2013-03-28T17:15:26.780
> 
> 标签：android, caching, memory, memory-leaks

我正在使用 minSdkVersion="14" 和 targetSdkVersion="17" 启动一个新应用程序。它包含一个 6 页的浏览器。有 3 个网页视图和 3 个其他视图。

当我通过单击返回或主页按钮将我的应用程序推到后台时，它在“缓存的后台进程”中使用了大约 40MB，我不明白为什么。

这是我的 webview 之一的示例：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.RelativeLayout;

public class Presentation extends Fragment {
    boolean isOption = false;
    RelativeLayout main = null;
    WebView web_main = null;

    public Presentation () {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        main = (RelativeLayout) inflater.inflate(R.layout.webview,  container, false);
        return main;

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        web_main = new WebView(getActivity().getApplicationContext());
        web_main.setWebViewClient(new WebViewClient());
        web_main.getSettings().setAppCacheEnabled(false);
        web_main.loadUrl("file:///android_asset/main.html");
        main.removeAllViews();
        main.addView(web_main);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.i(getClass().getName(), "[OnDestroy]");
        main.removeAllViews();
        web_main.destroy();
        main = null;
        web_main = null;
        System.gc();
    }

} 
```

我遵循了几个教程和答案，但对缓存的后台进程没有影响这是我的主要活动：

```
public class AppTest extends FragmentActivity {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide
 * fragments for each of the sections. We use a
 * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
 * will keep every loaded fragment in memory. If this becomes too memory
 * intensive, it may be best to switch to a
 * {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_content);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
protected void onStop() {
    super.onStop();
    System.gc();
    Log.i(getClass().getName(), "[OnStop]");
    android.os.Debug.stopMethodTracing();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main_content, menu);
    return true;
}

@Override
protected void onDestroy() {
    super.onDestroy();
    mViewPager.removeAllViews();
    Log.i(getClass().getName(), "[OnDestroy]");
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = null;

        switch (position) {
        case 0:
            fragment = new Presentation();
            break;
              /*    case 1:
            fragment = new Edition();
            break;
        case 2:
            fragment = new Programme();
            break;
        case 3:
            fragment = new Twitter();
            break;
        case 4:
            fragment = new Partenaire();
            break;
        case 5:
            fragment = new Information();
            break;*/
        default:
            fragment = new Presentation();
            break;
        }

        return fragment;
    }

    @Override
    public int getCount() {
        // Show 6 total pages.
        return 6;
    }

    @Override
    public CharSequence getPageTitle(int position) {

        switch (position) {
        case 0:
            return "Presentation";
        case 1:
            return "Edition";
        case 2:
            return "Program";
        case 3:
            return "Tweets";
        case 4:
            return "Partners";
        case 5:
            return "Information";
        }
        return null;
    }
}
} 
```

谁能看到有什么问题？

**编辑** 我试图将 webview 放在布局中，但它仍然相同事实上，我想知道当应用程序处于后台状态时缓存中的内容是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T05:35:22.333

“缓存的后台进程”通常是指没有前台活动且没有正在运行的服务的进程。这些进程保存在内存中，因为我们有足够的内存，我们可以让用户快速切换回它们。如果 Android 开始耗尽 RAM，这些进程将首先被销毁以释放 RAM。有时，当同一个应用程序切换到新进程时，可能会保留旧的应用程序进程。

据我所知，“缓存后台进程”状态下占用的空间将取决于您的应用当前使用的任何内容。例如，如果一个应用程序在前台使用 20MB，那么如果 RAM 可用，则将占用相同数量的空间。

如果您的应用有 3 个 ImageView 和 3 个 WebView，它可以很好地占用 40MB 的 RAM 空间，具体取决于这些 ImageView 和 WebView 中存储的内容。您可以使用[Profiling 工具](https://stackoverflow.com/questions/4820353/how-do-i-detect-the-heap-size-usage-of-an-android-application)来查看您的应用程序正在使用多少内存以及它的组件。如果前台使用的内存与后台使用的内存相似，那么一切都应该是这样。

**注意：**制造商可能会弄乱设置应用程序并重新定义“缓存后台进程”的含义。在这种情况下，您必须联系他们以了解他们如何准确定义它以及它是由什么组成的。

# ios - 表视图中的 iOS if 语句：numberOfRowsInSection：不起作用

> ID：15688099
> 
> 赞同：0
> 
> 时间：2013-03-28T17:15:39.950
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我正在尝试使用视图标签来确定当前正在显示什么视图，但是当我使用此代码时

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
if (self.view.tag != 3){
     NSLog(@"view is not 3");
     return 10;
    }
else{
     NSLog(@"view is 3");
     return 20;
    }
} 
```

没有为带有标签的视图设置正确的行数`3`，尽管它确实适用于我的所有其他视图。例如，在我的带有`1`标签的视图中，`view is not 3`将被记录，但在我带有标签的视图中`3`，没有任何记录。有人知道为什么这不能按我的意愿工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:20:55.847

self.view`View`是`ViewController`. 您可能需要做的是获取对 TableView 的引用。

改成：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
if (tableView.tag != 3){
     NSLog(@"view is not 3");
     return 10;
    }
else{
     NSLog(@"view is 3");
     return 20;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:22:18.523

问题是我自己一个粗心的错误，我没有设置我的数据源和委托。

# python - 在 Python 中访问 YAML 数据

> ID：15688100
> 
> 赞同：6
> 
> 时间：2013-03-28T17:15:41.063
> 
> 标签：python, yaml

我有一个解析为对象的 YAML 文件，例如：

```
{'name': [{'proj_directory': '/directory/'},
          {'categories': [{'quick': [{'directory': 'quick'},
                                     {'description': None},
                                     {'table_name': 'quick'}]},
                          {'intermediate': [{'directory': 'intermediate'},
                                            {'description': None},
                                            {'table_name': 'intermediate'}]},
                          {'research': [{'directory': 'research'},
                                        {'description': None},
                                        {'table_name': 'research'}]}]},
          {'nomenclature': [{'extension': 'nc'}
                            {'handler': 'script'},
                            {'filename': [{'id': [{'type': 'VARCHAR'}]},
                                          {'date': [{'type': 'DATE'}]},
                                          {'v': [{'type': 'INT'}]}]},
                            {'data': [{'time': [{'variable_name': 'time'},
                                                {'units': 'minutes since 1-1-1980 00:00 UTC'},

                                      {'latitude': [{'variable_n... 
```

我无法在 python 中访问数据并经常看到错误`TypeError: list indices must be integers, not str`

我希望能够访问对应的所有元素，`'name'`以便检索每个数据字段，我想它看起来像：

```
import yaml
settings_stream = open('file.yaml', 'r')                                                                                       
settingsMap = yaml.safe_load(settings_stream)                                                                                    
yaml_stream = True                                                                                                               

print 'loaded settings for: ',                                                                                                    
for project in settingsMap:                                                                                                       
    print project + ', ' + settingsMap[project]['project_directory'] 
```

我希望每个元素都可以通过类似的方式访问`['name']['categories']['quick']['directory']`

更深一点的就是：

`['name']['nomenclature']['data']['latitude']['variable_name']`

还是我在这里完全错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T17:27:59.767

方括号 ,`[]`表示您有字典列表，而不仅仅是字典。

例如，`settingsMap['name']`是一个字典**列表**。

因此，您需要使用整数索引在列表中选择正确的字典，然后才能选择字典中的键。

因此，给定您当前的数据结构，您需要使用：

```
settingsMap['name'][1]['categories'][0]['quick'][0]['directory'] 
```

或者，修改底层 YAML 数据结构。

* * *

例如，如果数据结构如下所示：

```
settingsMap = {
    'name':
    {'proj_directory': '/directory/',
     'categories': {'quick': {'directory': 'quick',
                              'description': None,
                              'table_name': 'quick'}},
     'intermediate': {'directory': 'intermediate',
                      'description': None,
                      'table_name': 'intermediate'},
     'research': {'directory': 'research',
                  'description': None,
                  'table_name': 'research'},
     'nomenclature': {'extension': 'nc',
                      'handler': 'script',
                      'filename': {'id': {'type': 'VARCHAR'},
                                   'date': {'type': 'DATE'},
                                   'v': {'type': 'INT'}},
                      'data': {'time': {'variable_name': 'time',
                                        'units': 'minutes since 1-1-1980 00:00 UTC'}}}}} 
```

然后你可以访问与上面相同的值

```
settingsMap['name']['categories']['quick']['directory']
# quick 
```

# google-apps-script - Google 脚本：无法检索（第 9 行，文件“代码”）

> ID：15688106
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:06.260
> 
> 标签：google-apps-script

我正在尝试设置我的第一个 Google 脚本。它应该从与我的搜索条件匹配的电子邮件集中删除一个标签，但是当我运行脚本时出现此错误：

```
Cannot retrieve (line 9, file "Code") 
```

我的代码：

```
function ArchiveEmails() {
  var misc_reps = GmailApp.search("from:(reports@example.com) \"Source: misc_reports\" \"The file was successfully processed\"");
  var imp_tms_processing = GmailApp.getUserLabelByName('imp-tms-processing');

  for (var i=0; i<misc_reps.length; i++) {
    var misc_rep = misc_reps[i];
    var id_string = misc_rep.getId(); //use to confirm specific email found in debugging
    misc_rep.removeLabel(imp_tms_processing); // line 9
  }  
} 
```

我不知道从这里去哪里；我找不到有关此问题的任何文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:45:53.220

这意味着 Gmail 找不到标签。您会认为该行会发生错误：

```
var imp_tms_processing = GmailApp.getUserLabelByName('imp-tms-processing'); 
```

但由于某种原因，在您实际尝试对标签执行某些操作之前，它不会引发错误。

登录到 Gmail 帐户并确保您的标签存在。如果您的标签嵌套在父标签下，请使用以下形式：

```
GmailApp.getUserLabelByName("parent/child"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T14:53:59.537

用于替换标签中空格的破折号对于搜索条件是必需的，但对于此函数 getUserLabelByName 则不需要。我刚刚花了几天时间尝试使用这个特定的功能，但没有成功。一旦我删除了破折号并使用了实际的标签名称，它就可以正常工作了。

# css - CSS Card Flip 不显示背面

> ID：15688108
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:12.240
> 
> 标签：css, css-transitions

我设置了卡片翻转功能，用户可以看到卡片的背面，单击并拖动它，然后单击热点（此处为黑条），然后将卡片翻转过来。

除了显示卡片背面的部分外，所有这些都有效。翻转动画发生，它只是空白。

任何帮助将不胜感激！

这就是我所在的地方...

[这是一个关于功能的小提琴。](http://jsfiddle.net/johnlayne/gJaCP/1/)

HTML

```
<div id="flipStage">
    <div class="card" id="bsg">
        <div class="front" id="bsgFront"></div>
        <div class="back" id="bsgBack"></div>
        <div class="flipButton"></div>
        <div class="handle"></div>
    </div>
</div> 
```

CSS

```
.flipStage {
    position: relative;
    float: left;
    width:100%;
    height:100%;
}
.card {
    cursor: pointer;
    height:175px;
    width:125px;
    position:absolute;
    -webkit-transition: -webkit-transform .5s;
    -moz-transition: -moz-transform .5s;
    -o-transition: -o-transform .5s;
    transition: transform .5s;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -o-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-perspective: 300px;
    -moz-perspective: 300px;
    -o-perspective: 300px;
    perspective: 300px;
}
.flipped {
    -webkit-transform:rotateY(180deg);
    -moz-transform:rotateY(180deg);
    -o-transform:rotateY(180deg);
    transform:rotateY(180deg);
}
.card .front, .card .back {
    display: block;
    position:absolute;
    height:100%;
    width:100%;
    -webkit-backface-visibility:hidden;
    -moz-backface-visibility:hidden;
    -o-backface-visibility: hidden;
    backface-visibility:hidden;
}
#bsg {
    top:150px;
    left:150px;
}
#bsgFront {
    background-image:url(http://images.penguinmagic.com/images/products/original/8006b.jpg);
    background-repeat:no-repeat;
    background-size: 100%;
}
#bsgBack {
    background-image:url(http://images2.fanpop.com/image/photos/9400000/Tricia-Helfer-BSG-Promotional-Photography-tricia-helfer-9422601-1089-1450.jpg);
    background-repeat:no-repeat;
    background-size: 100%;
}
.flipButton {
    height: 20px;
    width: 100%;
    position: absolute;
    top:0;
    right:0;
    background-color:black;
}
.handle {
    position:absolute;
    width: 100%;
    height: 100%;
    top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:27:08.067

[http://jsfiddle.net/gJaCP/3/](http://jsfiddle.net/gJaCP/3/)

您需要将 back 的初始状态翻转 180。

```
.back {
    -webkit-transform:rotateY(180deg);
    -moz-transform:rotateY(180deg);
    -o-transform:rotateY(180deg);
    transform:rotateY(180deg);
} 
```

我添加了一些文本，以便您可以看到它在翻转。尝试使用不同的背景图像，因为您正在使用重定向并且我认为它没有加载。在我的链接中，我再次使用了前面。

我将 BG 设置为 50% 只是为了让您知道它确实是背面。

[http://jsfiddle.net/gJaCP/4/](http://jsfiddle.net/gJaCP/4/)

[http://davidwalsh.name/css-flip](http://davidwalsh.name/css-flip)

# compiler-construction - 用于优化目的的简单编译器

> ID：15688113
> 
> 赞同：2
> 
> 时间：2013-03-28T17:16:27.033
> 
> 标签：compiler-construction, compiler-optimization

我想要一个简单编译器的源代码，通过为我的分配交换延迟分支的代码来优化。

我阅读了[针对一个小语言](https://stackoverflow.com/questions/1913621/is-there-a-simple-compiler-for-a-small-language)问题的简单编译器，并找到了几个不错的编译器。

但是几乎所有这些都进行了优化，并且一些链接已经失效。有人可以向我推荐一个简单的编译器，用于一种未实现延迟分支优化的小语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:56:14.187

您可以尝试：[cucu：您可以理解的编译器](http://zserge.com/blog/cucu-part1.html)

它是一个简单的 C 编译器，不到 700 行代码。我发现它写得很好，很容易理解。

# angularjs - 模糊自动保存+“撤消”按钮

> ID：15688115
> 
> 赞同：6
> 
> 时间：2013-03-28T17:16:32.430
> 
> 标签：angularjs, angularjs-directive

我正在写指令，它将像这样：

1.  允许编辑一些文本（使用内容可编辑）
2.  在失去焦点时，它应该将其价值保存到模型（最近观看并保存到数据库）
3.  应该有一个“撤消”按钮可以恢复更改。

我的实现是：[http ://plnkr.co/edit/DsWEYQV4j51i4GO6KjSe?p=preview](http://plnkr.co/edit/DsWEYQV4j51i4GO6KjSe?p=preview)

我唯一的问题是当我按下“撤消”按钮时，DIV 失去焦点（因此触发了“focusout”事件）并且值保存在模型中，因此“撤消”按钮无法恢复其值。

（我单击“撤消”-> 聚焦事件（自动保存）-> 单击事件（？？？无法还原））

我看到的可能的解决方法：

1.  设置模糊超时并在按下“撤消”按钮时取消它。但这很丑，因为用户可以输入值并导航到应用程序的其他部分，因此超时保存不会运行任何 $watch 侦听器。
2.  保存焦点上的值并在保存“撤消”按钮时恢复它。这会导致另一个问题：$watch 侦听器将以更改的值运行，然后以以前的值再次运行（因此将有 2 次写入 DB 而不是 1 次）

有没有人有这种行为的解决方案（模糊+撤消按钮自动保存）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:11:10.340

如何使用 underscore.js debounce 功能或类似功能导致自动保存延迟，它将检查撤消标志并取消？不确定 $watch 听众在做什么。当然，如果用户完全退出应用程序或刷新页面等，它仍然无法正常工作。

# linq - 如何在 lambda 中创建标识列？

> ID：15688116
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:34.367
> 
> 标签：linq, lambda, uniqueidentifier

如何使表达式添加一个计数器 (ID) 为 1,2,3,4 等...？我只想有一些 unqiue 键来识别数据

```
 var query = data.Select(x =>
            new DemoItemV1
            {
                Id = x.Field<double>("ID"),
                AreaId = x.Field<int>("1Area ID"),
                CategoryTitle = x.Field<string>("2Table Title")
            }).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:19:42.607

我认为您不能纯粹在 Linq-to-Sql 或 Linq-to-Entities 查询中做到这一点。但是，由于您已经将其具体化为列表，您可以这样做：

```
var query = data.Select(x =>
        new DemoItemV1
        {
            AreaId = x.Field<int>("1Area ID"),
            CategoryTitle = x.Field<string>("2Table Title")
        })
        .AsEnumerable()
        .Select((x, i) => { x.ID = i + 1; return x })
        .ToList(); 
```

# mysql - 检查日期/时间冲突 MySQL

> ID：15688119
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:47.627
> 
> 标签：mysql

好的...所以我有一个日历，在使用 CodeIgniter 构建的自定义 PHP 应用程序中，它从 MySQL 数据库中提取其条目。在包含条目数据的表中，有 3 个字段控制条目的日期 ( **start_date** )、时间 ( **start_time** ) 和持续时间 ( **duration** )。现在，随着最终用户将条目移动到新的日期和/或时间，系统需要检查这 3 个字段是否存在任何计划冲突。

以下是查询中使用的一些变量：

```
$request_entry_id // the id of the entry being moved
$request_start_date // the requested new date
$request_start_time // the requested new time
$request_duration // the duration of the entry being moved (will remain the same)
$end_time = ($request_start_time + $request_duration); // the new end time of the entry being moved 
```

我用于检查日程冲突的查询是：

```
SELECT t.id
FROM TABLE t
WHERE t.start_date = '$request_start_date'
AND (j.start_time BETWEEN '$request_start_time' AND '$end_time'))
AND t.id <> $request_entry_id 
```

上面的查询将检查与请求在同一日期和时间开始的任何条目。但是，我还想以最有效的方式检查以确保新请求不属于现有条目的持续时间（这是诀窍）。有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:37:15.963

如果您首先考虑没有冲突的条件，则更容易弄清楚逻辑：

> 新事件在现有事件开始**之前**结束，**或者在现有事件结束****之后**开始。

对于有冲突，我们采取上述否定：

> 新事件在现有事件开始**后结束****，在现有事件结束****之前**开始。

在 SQL 中：

```
SELECT t.id
FROM TABLE t
WHERE t.start_date = '$request_start_date'
AND ('$end_time' > t.start_time AND '$request_start_time' < addtime(t.start_time, t.duration))
AND t.id <> $request_entry_id 
```

# ruby - 如何使 pdf 签名可见（以及有效性图标）

> ID：15688120
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:49.990
> 
> 标签：ruby, pdf, digital-signature, visible

最初的问题是关于使用 Ruby 使 pdf 签名可见。我现在可以用下面的代码来做。

我现在唯一的问题是有效性图标。它出现在[FoxIt Reader](http://www.foxitsoftware.com/Secure_PDF_Reader/)上，但不在[Acrobat Reader](http://get.adobe.com/uk/reader/)上（我现在正在使用 XI）

这就是我现在所拥有的

```
require 'openssl'

begin
  require 'origami'
rescue LoadError
  ORIGAMIDIR = "C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\origami-1.2.4\lib"
  $: << ORIGAMIDIR
  require 'origami'
end
include Origami

def draw_signature(name, attr = {})
  load! if @instructions.nil?

  x, y = attr[:x], attr[:y]

  @instructions << PDF::Instruction.new('q')
  @instructions << PDF::Instruction.new('cm', 1, 0, 0, 1, x, y)
  @instructions << PDF::Instruction.new('Do', name)
  @instructions << PDF::Instruction.new('Q')
end

def SignPdf(inputF)

    @inputfile = String.new(inputF)
    outputF = @inputfile.insert(inputF.rindex("."),"_signed8")
    certFile = "cert.pem"
    rsakeyFile = "pk.pem"
    passphrase = "mypass"

    key4pem=File.read rsakeyFile
    key = OpenSSL::PKey::RSA.new key4pem, passphrase
    cert = OpenSSL::X509::Certificate.new(File.read certFile)

    pdf = PDF.read(inputF)
    page = pdf.get_page(1)

#signature image
imageobject = Origami::Graphics::ImageXObject.from_image_file('c:\rails_projects\RecibosOnline\app\assets\images\logo.jpg', 'jpg')
imageobject.Width = 200
imageobject.Height = 141

 #formobject = Origami::Graphics::FormXObject.new
 #formobject.write("Teste")

width = 300
height=141
x=201
y=186

signedby = "My Company"
location = "Portugal"#pdf.signature[pdf.signature.keys[5]]
contact = "mail@mail.com" #pdf.signature[pdf.signature.keys[6]]
reason = "Testing" #pdf.signature[pdf.signature.keys[7]]
date = Time.now

caption="Digitally Signed By: #{signedby}\nContact: #{contact}\nLocation: #{location}\nReason: #{reason}\nDate: #{date} "

n0 = Annotation::AppearanceStream.new
n0.Type=Origami::Name.new("XObject")
n0.BBox = [ 0, 0, 100, 100 ]
n0.Matrix = [ 1, 0, 0, 1, 0, 0 ]
n0.set_indirect(true)
n0.Resources = Resources.new
n0.Resources.ProcSet = [Origami::Name.new("PDF"),Origami::Name.new("Text"),Origami::Name.new("Text"),Origami::Name.new("ImageB"),Origami::Name.new("ImageC"),Origami::Name.new("ImageI")]
n0.draw_stream('% DSBlank')
#n0.write(Origami::Name.new("% DSBlank"))

n2 = Annotation::AppearanceStream.new
n2.Type = Origami::Name.new("XObject")
#n2.Subtype = Origami::Name.new("Form")
n2.Resources = Resources.new
n2.Resources.ProcSet = [Origami::Name.new("Text")]
n2.set_indirect(true)
n2.Matrix = [ 1, 0, 0, 1, 0, 0 ]
n2.BBox = [ 0, 0, width, height ]
n2.write(caption,:x => 40, :y => height-35, :size => 15)
#n2.draw_stream("q 0 0 198 48 re W n BT /Helv 7.645 Tf 0 g 0 40.135 Td (Digitally ) Tj 28.889 0 Td (signed ) Tj 24.652 0 Td (by ) Tj10.198 0 Td (James ) Tj 24.641 0 Td (Pravetz ) Tj-88.38 -9.174 Td (DN: ) Tj 15.29 0 Td (cn=James ) Tj37.18 0 Td (Pravetz, ) Tj 30.165 0 Td (c=CA, ) Tj 23.156 0 Td0 -9.174 Td (Reason: ) Tj 30.599 0 Td (I ) Tj 4.248 0 Td(have ) Tj 18.702 0 Td (reviewed ) Tj 32.719 0 Td(this ) Tj 14.02 0 Td (document ) Tj -100.288 -9.174 Td(Date: ) Tj 20.397 0 Td (2006.06.08 ) Tj 40.386 0 Td(13:39:35 ) Tj 31.883 0 Td (-07'00') Tj ET Q")

#Sets the root dictionary element

frm = Annotation::AppearanceStream.new
frm.set_indirect(true)
#frm.Type = Origami::Name.new("XObject")
#frm.Subtype = Origami::Name.new("Form")
frm.Resources = Resources.new
frm.Resources.ProcSet = [Origami::Name.new("PDF")]
frm.Resources.add_xobject(Origami::Name.new("n0"), n0)
frm.Resources.add_xobject(Origami::Name.new("n2"), n2)
frm.Matrix = [ 1, 0, 0, 1, 0, 0 ]
frm.BBox = [ 0, 0, width, height ]
frm.draw_stream('q 1 0 0 1 0 0 cm /n0 Do Q')
frm.draw_stream('q 1 0 0 1 0 0 cm /n2 Do Q')

xo17 = Annotation::Widget::Signature.new
#xo17 = Annotation::Widget::Signature.new
xo17.Rect = Rectangle[ llx: x, lly: y, urx: x+width, ury: y+height ]
#xo17.Resources = Resources.new
#xo17.Resources.add_xobject(Origami::Name.new("FRM"), frm)
xo17.F = Annotation::Flags::PRINT #sets the print mode on
xo17.H = Annotation::Widget::Highlight::INVERT

streamN = Annotation::AppearanceStream.new #.setFilter(:FlateDecode)
streamN.set_indirect(true)
streamN.BBox = [ 0, 0, width, height ]
streamN.Resources = Resources.new
streamN.Resources.ProcSet = [Origami::Name.new("PDF")]
streamN.Resources.add_xobject(Origami::Name.new("FRM"), frm)
streamN.Subtype = nil
#cs = ContentStream.new('q 1 0 0 1 0 0 cm /FRM Do Q',streamN)
streamN.draw_stream('q 1 0 0 1 0 0 cm /FRM Do Q')
#streamN.draw_image(Origami::Name.new("FRM"),{x:x,y:y})
#streamN.write(caption,:x => 40, :y => height-35, :size => 15)
xo17.set_normal_appearance(streamN)

# page.add_xobject(Origami::Name.new("FRM"),frm)
# page.add_xobject(Origami::Name.new("n0"),n0)
# page.add_xobject(Origami::Name.new("n2"),n2)

page.add_annot(xo17)    

# Sign the PDF with the specified keys
pdf.sign(cert, key, 
  :method => 'adbe.pkcs7.sha1',
  :annotation => xo17, 
  :location => location, 
  :contact => contact, 
  :reason => reason
)

# Save the resulting file
pdf.save(outputF)

end
SignPdf("Sample.pdf") 
```

**编辑 2**

在 mkl 干预之后，我更深入地了解了源代码......

我注意到[xobject.rb](http://code.google.com/p/origami-pdf/source/browse/lib/origami/graphics/xobject.rb)文件，其中包含以下用于绘制图像的代码

```
def draw_image(name, attr = {})
      load! if @instructions.nil?

      x, y = attr[:x], attr[:y]

      @instructions << PDF::Instruction.new('q')
      @instructions << PDF::Instruction.new('cm', 300, 0, 0, 300, x, y)
      @instructions << PDF::Instruction.new('Do', name)
      @instructions << PDF::Instruction.new('Q')
end 
```

然后我在同一个文件上创建了下面的方法

```
def draw_stream(name)
      load! if @instructions.nil?

      @instructions << PDF::Instruction.new(name)
end 
```

这使我可以从其输入中控制流。

我也去了[ISO32000:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，并通过我的代码进行了一点迭代，但没有进一步。

这是我当前生成的[pdf 文件](https://docs.google.com/file/d/0B6SE5r_sflg7RE5OMHlaQ2h3VXM/edit?usp=sharing)，以及与签名相关的部分：

```
16 0 obj
<<
    /Rect [ 201 186 501 327 ]
    /F 4
    /H /I
    /AP <<
        /N 18 0 R
    >>
    /P 1 0 R
    /V 17 0 R
    /T (undef28504)
    /Subtype /Widget
    /FT /Sig
    /DA (/F1 10 Tf 0 g)
>>
endobj
17 0 obj
<<
    /Type /Sig
    /SubFilter /adbe.pkcs7.sha1
    /Reason <54657374696E67>
    /Prop_Build <<
        /Filter <<
            /Name /Adobe.PPKMS
            /R 131101
            /Date (2013-04-03 14:18:41 +0100)
        >>
        /SigQ <<
            /Preview false
            /R 131101
        >>
        /PubSec <<
            /NonEFontNoWarn false
            /Date (2013-04-03 14:18:41 +0100)
            /R 131101
        >>
        /App <<
            /TrustedMode false
            /OS [ /Win ]
            /R 458752
            /Name /Exchange-Pro
        >>
    >>
    /M (D:20130403131841Z00'00)
    /Location <506F72747567616C>
    /Filter /Adobe.PPKMS
    /Contents <308207AE06092A864886F70D010702A082079F3082079B020101310B300906052B0E03021A0500302306092A864886F70D010701A0160414BBA1B7480DDB1B75B136B4DFA2A4C120EC7972DFA0820597308205933082047BA0030201020204426F938C300D06092A864886F70D0101050500303E310B300906035504061302707431153013060355040A130C4D554C5449434552542D4341311830160603550403130F4D554C5449434552542D4341203032301E170D3133303332303137303134375A170D3134303332303136343733365A3081A5310B300906035504061302505431153013060355040A130C4D554C5449434552542D434131163014060355040B130D4345525449504F52202D20524131123010060355040B1309436F72706F726174653120301E060355040B13174553435249544120494E54454C4947454E5445204C444131183016060355040B130F576562204170706C69636174696F6E311730150603550403130E52454349424F53204F4E4C494E4530819F300D06092A864886F70D010101050003818D0030818902818100ACCEA4069031B578896C450D77C83C13DD75C668BF2762368DB0A0B1591B1800E58C1ACDBB25DA15501AF931F9F6BAE0F8F64C481686E959DE005AEC82B33D0D32665037D18BF36BF77C4D56620C42FBBA92D3FF397F9D8377FEABBA93478FCEF009216483D346ACCC76CA10C9B8653B80B8F6EB49BD93897A43DF062D0D9ED30203010001A38202B3308202AF300B0603551D0F0404030203F8303806082B06010505070101042C302A302806082B06010505073001861C687474703A2F2F6F6373702E6D756C7469636572742E636F6D2F63613081E00603551D200481D83081D5304D06092B06010401B03C0A023040303E06082B060105050702011632687474703A2F2F7777772E6D756C7469636572742E636F6D2F6370732F6D756C7469636572742D63612D6370732E68746D6C308183060B2B06010401B03C0A0288063074307206082B0601050507020230661E640068007400740070003A002F002F007700770077002E006D0075006C007400690063006500720074002E0063006F006D002F00630070002F006D0075006C007400690063006500720074002D00630061002D0031003000330030002E00680074006D006C301106096086480186F84201010404030204B030200603551D11041930178115696E666F4072656369626F736F6E6C696E652E7074308201010603551D1F0481F93081F630819AA08197A08194862F687474703A2F2F7777772E6D756C7469636572742E636F6D2F63612F6D756C7469636572742D63612D30322E63726C86616C6461703A2F2F6C6461702E6D756C7469636572742E636F6D2F636E3D4D554C5449434552542D434125323030322C6F3D4D554C5449434552542D43412C633D50543F63657274696669636174655265766F636174696F6E4C6973743F626173653057A055A053A451304F310B300906035504061302707431153013060355040A130C4D554C5449434552542D4341311830160603550403130F4D554C5449434552542D4341203032310F300D0603550403130643524C323935301F0603551D230418301680141DC3B988A518BE60A72CA663CA662AFC0C27C1BD301D0603551D0E0416041406D81F7236619EEB17369C299E2D74FFD038301930090603551D1304023000300D06092A864886F70D0101050500038201010041511FCD5C7561981B0D54326B57F7B87C435AACB7A2962808768313892AB1407237E957577B875414DE810A41323F9E0A768E9AC45C0F66AE093C32C11453C6463F856FEF62E27821134DD09F75208000040E89A814E6309623C5D04163C03CFDE33153908AC3DFCA5B1C66C3DCB89644A3030FE794D50BD255D396535A7AF267C3A538147B9371D05F23D8CA481AEBC7D7A7D97C2E7FB5AB49C4E4554E4800648BC76B1AF5612A1D9361D172084E70690928A911FC209833C506219CF186B6507B599E4C0F42F3BF23C2B8F0A078D01D9BF5FD4746D97253EE4FE8F472489B3DC26F7072C6587218825BB3061074B9C240F8928D36FEFC0F708897752CD946318201C7308201C30201013046303E310B300906035504061302707431153013060355040A130C4D554C5449434552542D4341311830160603550403130F4D554C5449434552542D43412030320204426F938C300906052B0E03021A0500A081D8301806092A864886F70D010903310B06092A864886F70D010701301C06092A864886F70D010905310F170D3133303430333133313834315A302306092A864886F70D010904311604142948A25663C43F9571225B0F12B9097DFE7149DB307906092A864886F70D01090F316C306A300B060960864801650304012A300B0609608648016503040116300B0609608648016503040102300A06082A864886F70D0307300E06082A864886F70D030202020080300D06082A864886F70D0302020140300706052B0E030207300D06082A864886F70D0302020128300D06092A864886F70D010101050004818021F8A3A104E8B6EC1D9026CA9A822C4357EEBAABD5D87422BE6199802F45E83E9D2417711CE26DCB28A8246ACE119B128956394A8FA641346E5F3CBBDD84ED7E36B2F947DD5D92EC1C2C078A1630A729773F17027FC3B64C18844C26F7FA18A7B4FC9DE334741235E178280ED25CD8840A83A91FCE240646EB84117E348BF82E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000>
    /ContactInfo <6D61696C406D61696C2E636F6D>
    /ByteRange [ 0 12880 17078 2366 ]
>>
endobj
18 0 obj
<<
    /BBox [ 0 0 300 141 ]
    /Resources <<
        /ProcSet [ /PDF ]
        /XObject <<
            /FRM 19 0 R
        >>
        /Font <<
            /F1 <<
                /Type /Font
                /Subtype /Type1
                /BaseFont /Helvetica
                /Name /F1
            >>
        >>
    >>
    /Length 27
    /Subtype /Form
>>stream
q 1 0 0 1 0 0 cm /FRM Do Q

endstream
endobj
19 0 obj
<<
    /Resources <<
        /ProcSet [ /PDF ]
        /XObject <<
            /n0 20 0 R
            /n2 21 0 R
        >>
        /Font <<
            /F1 <<
                /Type /Font
                /Subtype /Type1
                /BaseFont /Helvetica
                /Name /F1
            >>
        >>
    >>
    /Matrix [ 1 0 0 1 0 0 ]
    /BBox [ 0 0 300 141 ]
    /Length 52
    /Subtype /Form
>>stream
q 1 0 0 1 0 0 cm /n0 Do Q
q 1 0 0 1 0 0 cm /n2 Do Q

endstream
endobj
20 0 obj
<<
    /Type /XObject
    /BBox [ 0 0 100 100 ]
    /Matrix [ 1 0 0 1 0 0 ]
    /Resources <<
        /ProcSet [ /PDF /Text /Text /ImageB /ImageC /ImageI ]
        /Font <<
            /F1 <<
                /Type /Font
                /Subtype /Type1
                /BaseFont /Helvetica
                /Name /F1
            >>
        >>
    >>
    /Length 10
    /Subtype /Form
>>stream
% DSBlank

endstream
endobj
21 0 obj
<<
    /Type /XObject
    /Resources <<
        /ProcSet [ /Text ]
        /Font <<
            /F1 <<
                /Type /Font
                /Subtype /Type1
                /BaseFont /Helvetica
                /Name /F1
            >>
        >>
    >>
    /Matrix [ 1 0 0 1 0 0 ]
    /BBox [ 0 0 300 141 ]
    /Length 176
    /Subtype /Form
>>stream
BT
/F1 15 Tf
40 106 Td
20 TL
(Digitally Signed By: My Company) Tj
(Contact: mail@mail.com) '
(Location: Portugal) '
(Reason: Testing) '
(Date: 2013-04-03 14:18:41 +0100 ) '
ET

endstream
endobj
22 0 obj
<<
    /Fields [ 16 0 R ]
    /SigFlags 3
>>
endobj 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:53:03.940

有时，一个人只需要知道如何真正理解他一遍又一遍地阅读的内容......

ppkappearances 文件包含所有内容。我什至没有像我预期的那样遵守他们在那里推荐的字典结构。我只需要添加 n1 和 n3 层，流内容甚至可以只是“% DS Blank”。您找到的问号字符串流是我从[iText](http://itextpdf.com/itext.php)`PdfSignatureAppearance.cs`解决方案的文件中获取的。如果我使用那个 Foxit Reader 会出现问号（即使签名有效）。对于 Adob​​e，我使用它或.`DSBlank`

```
require 'openssl'

begin
  require 'origami'
rescue LoadError
  ORIGAMIDIR = "C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\origami-1.2.4\lib"
  $: << ORIGAMIDIR
  require 'origami'
end
include Origami

def draw_signature(name, attr = {})
  load! if @instructions.nil?

  x, y = attr[:x], attr[:y]

  @instructions << PDF::Instruction.new('q')
  @instructions << PDF::Instruction.new('cm', 1, 0, 0, 1, x, y)
  @instructions << PDF::Instruction.new('Do', name)
  @instructions << PDF::Instruction.new('Q')
end

def SignPdf(inputF)

    @inputfile = String.new(inputF)
    outputF = @inputfile.insert(inputF.rindex("."),"_signed8")
    certFile = "cert.pem"
    rsakeyFile = "pk.pem"
    passphrase = "mypass"

    key4pem=File.read rsakeyFile
    key = OpenSSL::PKey::RSA.new key4pem, passphrase
    cert = OpenSSL::X509::Certificate.new(File.read certFile)

    pdf = PDF.read(inputF)
    page = pdf.get_page(1)

#signature image
imageobject = Origami::Graphics::ImageXObject.from_image_file('c:\rails_projects\RecibosOnline\app\assets\images\logo.jpg', 'jpg')
imageobject.Width = 200
imageobject.Height = 141

 #formobject = Origami::Graphics::FormXObject.new
 #formobject.write("Teste")

width = 300
height=141
x=201
y=186

signedby = "My Company"
location = "Portugal"#pdf.signature[pdf.signature.keys[5]]
contact = "mail@mail.com" #pdf.signature[pdf.signature.keys[6]]
reason = "Testing" #pdf.signature[pdf.signature.keys[7]]
date = Time.now

caption="Digitally Signed By: #{signedby}\nContact: #{contact}\nLocation: #{location}\nReason: #{reason}\nDate: #{date} "

    #DSBlankstream= "% DSBLank"

    questionMark = "% DSUnknown\n" +
            "q\n" +
            "1 G\n" +
            "1 g\n" +
            "0.1 0 0 0.1 9 0 cm\n" +
            "0 J 0 j 4 M []0 d\n" +
            "1 i \n" +
            "0 g\n" +
            "313 292 m\n" +
            "313 404 325 453 432 529 c\n" +
            "478 561 504 597 504 645 c\n" +
            "504 736 440 760 391 760 c\n" +
            "286 760 271 681 265 626 c\n" +
            "265 625 l\n" +
            "100 625 l\n" +
            "100 828 253 898 381 898 c\n" +
            "451 898 679 878 679 650 c\n" +
            "679 555 628 499 538 435 c\n" +
            "488 399 467 376 467 292 c\n" +
            "313 292 l\n" +
            "h\n" +
            "308 214 170 -164 re\n" +
            "f\n" +
            "0.44 G\n" +
            "1.2 w\n" +
            "1 1 0.4 rg\n" +
            "287 318 m\n" +
            "287 430 299 479 406 555 c\n" +
            "451 587 478 623 478 671 c\n" +
            "478 762 414 786 365 786 c\n" +
            "260 786 245 707 239 652 c\n" +
            "239 651 l\n" +
            "74 651 l\n" +
            "74 854 227 924 355 924 c\n" +
            "425 924 653 904 653 676 c\n" +
            "653 581 602 525 512 461 c\n" +
            "462 425 441 402 441 318 c\n" +
            "287 318 l\n" +
            "h\n" +
            "282 240 170 -164 re\n" +
            "B\n" +
            "Q\n";

    n0 = Annotation::AppearanceStream.new
    n0.Type=Origami::Name.new("XObject")
    n0.BBox = [ 0, 0, 100, 100 ]
    n0.Matrix = [ 1, 0, 0, 1, 0, 0 ]
    n0.set_indirect(true)
    n0.Resources = Resources.new
    n0.Resources.ProcSet = [Origami::Name.new("PDF"),Origami::Name.new("Text"),Origami::Name.new("Text"),Origami::Name.new("ImageB"),Origami::Name.new("ImageC"),Origami::Name.new("ImageI")]
    n0.draw_stream('% DSBlank')
    #n0.write(Origami::Name.new("% DSBlank"))

    n1 = Annotation::AppearanceStream.new
    n1.Type=Origami::Name.new("XObject")
    n1.BBox = [ 0, 0, 100, 100 ]
    n1.Matrix = [ 1, 0, 0, 1, 0, 0 ]
    n1.set_indirect(true)
    n1.Resources = Resources.new
    n1.Resources.ProcSet = [Origami::Name.new("PDF"),Origami::Name.new("Text"),Origami::Name.new("Text"),Origami::Name.new("ImageB"),Origami::Name.new("ImageC"),Origami::Name.new("ImageI")]
    n1.draw_stream('% DSBlank')

    n3 = Annotation::AppearanceStream.new
    n3.Type=Origami::Name.new("XObject")
    n3.BBox = [ 0, 0, 100, 100 ]
    n3.Matrix = [ 1, 0, 0, 1, 0, 0 ]
    n3.set_indirect(true)
    n3.Resources = Resources.new
    n3.Resources.ProcSet = [Origami::Name.new("PDF"),Origami::Name.new("Text"),Origami::Name.new("Text"),Origami::Name.new("ImageB"),Origami::Name.new("ImageC"),Origami::Name.new("ImageI")]
    n3.draw_stream('% DSBlank')

    n2 = Annotation::AppearanceStream.new
    n2.Type = Origami::Name.new("XObject")
    #n2.Subtype = Origami::Name.new("Form")
    n2.Resources = Resources.new
    n2.Resources.ProcSet = [Origami::Name.new("Text")]
    n2.set_indirect(true)
    n2.Matrix = [ 1, 0, 0, 1, 0, 0 ]
    n2.BBox = [ 0, 0, width, height ]
    n2.write(caption,:x => 40, :y => height-35, :size => 15)
    #n2.draw_stream("q 0 0 198 48 re W n BT /Helv 7.645 Tf 0 g 0 40.135 Td (Digitally ) Tj 28.889 0 Td (signed ) Tj 24.652 0 Td (by ) Tj10.198 0 Td (James ) Tj 24.641 0 Td (Pravetz ) Tj-88.38 -9.174 Td (DN: ) Tj 15.29 0 Td (cn=James ) Tj37.18 0 Td (Pravetz, ) Tj 30.165 0 Td (c=CA, ) Tj 23.156 0 Td0 -9.174 Td (Reason: ) Tj 30.599 0 Td (I ) Tj 4.248 0 Td(have ) Tj 18.702 0 Td (reviewed ) Tj 32.719 0 Td(this ) Tj 14.02 0 Td (document ) Tj -100.288 -9.174 Td(Date: ) Tj 20.397 0 Td (2006.06.08 ) Tj 40.386 0 Td(13:39:35 ) Tj 31.883 0 Td (-07'00') Tj ET Q")

##Sets the root dictionary element

    frm = Annotation::AppearanceStream.new
    frm.set_indirect(true)
    #frm.Type = Origami::Name.new("XObject")
    #frm.Subtype = Origami::Name.new("Form")
    frm.Resources = Resources.new
    frm.Resources.ProcSet = [Origami::Name.new("PDF")]
    frm.Resources.add_xobject(Origami::Name.new("n0"), n0)
    frm.Resources.add_xobject(Origami::Name.new("n1"), n1)
    frm.Resources.add_xobject(Origami::Name.new("n2"), n2)
    frm.Resources.add_xobject(Origami::Name.new("n3"), n3)
    frm.Matrix = [ 1, 0, 0, 1, 0, 0 ]
    frm.BBox = [ 0, 0, width, height ]
    frm.draw_stream('q 1 0 0 1 0 0 cm /n0 Do Q')
    frm.draw_stream('q 1 0 0 1 0 0 cm /n1 Do Q')
    frm.draw_stream('q 1 0 0 1 0 0 cm /n2 Do Q')
    frm.draw_stream('q 1 0 0 1 0 0 cm /n3 Do Q')

    xo17 = Annotation::Widget::Signature.new
    #xo17 = Annotation::Widget::Signature.new
    xo17.Rect = Rectangle[ llx: x, lly: y, urx: x+width, ury: y+height ]
    #xo17.Resources = Resources.new
    #xo17.Resources.add_xobject(Origami::Name.new("FRM"), frm)
    xo17.F = Annotation::Flags::PRINT #sets the print mode on
    xo17.H = Annotation::Widget::Highlight::INVERT

    streamN = Annotation::AppearanceStream.new #.setFilter(:FlateDecode)
    streamN.set_indirect(true)
    streamN.BBox = [ 0, 0, width, height ]
    streamN.Resources = Resources.new
    streamN.Resources.ProcSet = [Origami::Name.new("PDF")]
    streamN.Resources.add_xobject(Origami::Name.new("FRM"), frm)
    streamN.Subtype = nil
    #cs = ContentStream.new('q 1 0 0 1 0 0 cm /FRM Do Q',streamN)
    streamN.draw_stream('q 1 0 0 1 0 0 cm /FRM Do Q')
    #streamN.draw_image(Origami::Name.new("FRM"),{x:x,y:y})
    #streamN.write(caption,:x => 40, :y => height-35, :size => 15)
    xo17.set_normal_appearance(streamN)

    # page.add_xobject(Origami::Name.new("FRM"),frm)
    # page.add_xobject(Origami::Name.new("n0"),n0)
    # page.add_xobject(Origami::Name.new("n2"),n2)

    page.add_annot(xo17)    

    # Sign the PDF with the specified keys
    pdf.sign(cert, key, 
      :method => 'adbe.pkcs7.sha1',
      :annotation => xo17, 
      :location => location, 
      :contact => contact, 
      :reason => reason
    )

    # Save the resulting file
    pdf.save(outputF)

end

SignPdf("Sample.pdf") 
```

什么战斗！

我想说：

最后，获胜者是你会发现站在战场中间的人。悲哀地环顾四周，进入战场，想知道为什么会这样。只有当他们知道如何阅读……那么这一切都不会发生。但与此同时，如果它没有发生，他们就不会知道他们不知道如何以正确的焦点阅读。

# javascript - 从选择框中删除重复项和无效条目，但不刷新整个框

> ID：15688122
> 
> 赞同：0
> 
> 时间：2013-03-28T17:16:57.570
> 
> 标签：javascript, jquery, html

我正在尝试编写一个 Web 表单，该表单将具有基于用户在表单早期输入的可选选项。

我被卡住的地方是；

*   我有一个表房间类型，它只是带有输入标签（类型=文本）的 td 标签。这些是用户填写的，所以我不知道它们是什么..
*   我有一个按钮可以向该表添加额外的行（Jquery 添加另一个 td 标记和输入标记）
*   用户根据需要添加尽可能多的行

表格的下一部分是填写房间，并为每个房间选择类型。表格布局是相同的（除了有两列，而不是一列），额外的行是通过另一个带有 Jquery 的按钮添加的。

我希望能够做的是添加新行以在表格中有两列。一个输入文本字段，另一个是带有上表选项的选择框。

我已经设法使这项工作达到了一定程度。但由于用户可能会从原始（房间类型）表中返回编辑选项，因此我需要选择框根据原始表当前显示的内容调整它们的值。

我可以通过每次访问一个输入字段时清空并重新填充我的选择框来完成这项工作（使用 OnBlur，这可能不是最有效的方法），但是因为它从 bxes 中删除条目，然后重新-填充，任何已填充的选择框都已重置。我只想重置无效选项（即原始表中不存在的值）。

我已经看/玩了很长时间了，但是我的编程能力只是我从这里和谷歌那里学到的，而之前在一些非常小的事情上搞砸了......

我的 HTML 代码（好吧，我的代码的一部分，我已经删除了所有不相关的代码以保持简单）在这里：

```
<div id="rm_types_info">
    <table id="room_types_table">
        <tr>
            <td><input type="text" class="room_types" onblur="edit_rooms_select();" /></td>
        </tr>
    </table>

    <button type="button" onclick="rmtypes('room_types_table');">Add Another Room Type</button>
</div>

<div id="rooms_info">
    <table id="rooms_table">
        <tr>
            <th>Room Number</th>
            <th>Room Type</th>
        </tr>
        <tr>
            <td><input type="text" /></td>
            <td>
                <select class="room_type_select">
                    <option value="Please Choose">Please Choose</option>
                </select>
            </td>
        </tr>
    </table>

    <button type="button" onclick="rooms('rooms_table');">Add Another Room</button>
</div> 
```

我的 JQuery 是；

```
<script>
    var userscounter=2
    var rmtypescounter=1
    var roomscounter=2

    function users(ID){
        document.getElementById(ID).insertRow(userscounter).innerHTML = '<td><input type="text" /></td><td><input type="text" /></td>';
        userscounter++;
    };

    function rmtypes(ID){
        document.getElementById(ID).insertRow(rmtypescounter).innerHTML = '<td><input type="text" class="room_types" onblur="edit_rooms_select();" /></td>';
        rmtypescounter++;
    }

    function rooms(ID){
        document.getElementById(ID).insertRow(roomscounter).innerHTML = '<td><input type="text" /></td><select class="room_type_select"><option value="Please Choose">Please Choose</option></select></td>';
        roomscounter++;
    };

    function edit_rooms_select(){   
        var roomtypelist = $('.room_type_select');
        roomtypelist.empty()
        $('#room_types_table tr td input').each(function(){
            var text = $(this).val();
            roomtypelist.append('<option value='+text+'>'+text+'</option>');
        });
    }
</script> 
```

我已经删除了删除重复项的 Jquery，因为它肯定无法正常工作......

我知道我可能会以完全错误的方式进行此操作，如果使用 td 标签或输入等完全错误，我很乐意更改必要的整个表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:02:08.327

我确信这不是做我需要的最有效的方法，但这就是我设法让它工作的方式......

我的 HTML...

```
<div id="rm_types_info">
    <table id="room_types_table">
        <tr>
            <td><input type="text" name="2" class="room_types" onblur="edit_rooms_select();" /></td>
        </tr>
    </table>

    <button type="button" onclick="rmtypes('room_types_table');">Add Another Room Type</button>
</div>

<div id="rooms_info">
    <table id="rooms_table">
        <tr>
            <th>Room Number</th>
            <th>Room Type</th>
        </tr>
        <tr>
            <td><input type="text" /></td>
            <td>
                <select class="room_type_select" id="room_type_select1" >
                    <option value="1">Please Choose</option>
                </select>
            </td>
        </tr>
    </table>

    <button type="button" onclick="rooms('rooms_table');edit_rooms_select();">Add Another Room</button>
</div> 
```

与 JQuery 脚本相关。特别是，这是最后一个函数“edit_rooms_select()”，特别是我正在努力解决的“为每个选择添加新选项”。

```
<script>
    var rmtypescount=3;
    var room_type_select_count=2;

    function rmtypes(){
        $('#room_types_table tr:last').after('<tr><td><input type="text" name='+rmtypescount+' class="room_types" onblur="edit_rooms_select();" /></td></tr>');
        rmtypescount++;
    };

    function rooms(){
        $('#rooms_table tr:last').after('<tr><td><input type="text" /></td><td><select id="room_type_select'+room_type_select_count+'" class="room_type_select"><option value="1">Please Choose</option></select></td></tr>');
        room_type_select_count++
    };

    function edit_rooms_select(){       
        $('#room_types_table tr td input').each(function(){
            var name = $(this).attr('name');
            var value = $(this).val();
//Add New Options to each select            
            $('#rooms_table select').each(function(){
                var last = $(this).children('option:last').val();
                if (name > last) {
                    $(this).append('<option value="'+name+'">'+value+'</option>');
                };
            });
//Change any room types that have been edited           
            $('.room_type_select option').each(function(){
                var match = $(this).val();
                if(name == match){
                    $(this).text(value)
                };
            });
//Remove Blank Entries
            if(value == ''){
                $('.room_type_select option[value='+name+']').remove();
            };
        });
    };
</script> 
```

我认为 edit_rooms_select 函数比它需要的要贵得多。对于我的要求，这不会成为问题，但我很想看看其他人建议如何按照我的要求编辑列表。-来自 room_types_table 的所有用户输入必须是选择中的选项rooms_table 中的框 - room_types_table 中更改的任何输入必须在选择框中更改其相关选项以匹配 - 从 room_types_table 中留空（或稍后删除）的任何输入必须从选择框中删除 - 任何选择框有一个选择，然后从 room_types_table 中删除，必须重置回原来的“请选择”选项。

如果有人可以提出更好的方法来做到这一点，或者可以以任何方式整理我的代码，我希望看到代码，并对其进行解释，因为我对 Javascript/Jquery 非常缺乏经验。

# jquery - 全日历上的自定义设计界面

> ID：15688123
> 
> 赞同：1
> 
> 时间：2013-03-28T17:16:59.237
> 
> 标签：jquery, html, css, user-interface, fullcalendar

我想通过 jQuery 插件 FullCalendar 设计自定义外观。除了外观之外，关于 FullCalendar 实现的一切都完全符合我的需求。那么我的问题是：有没有人这样做，或者任何人都可以提供这样做的解决方案。

具体来说，我想使用自定义月份标题、具有重复事件的自定义日期标题以及具有 css 后台功能的自定义事件来更改月份视图。我确实相信自定义外观事件记录得很好，所以我想主要了解其他事件。我认为简单地更改 jquery 代码以在 dom 中生成不同的 html 应该可以工作，但它是如此出色的动态，以至于我很难找到呈现我想要更改的部分的脚本，即使使用搜索功能我的编辑。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T14:51:06.253

我最终确实使用 css 和现有的类彻底检查了外观。在需要添加内容的地方，我修改了 .js 以在生成日历的同时生成必要的内容。我发现这是一个非常直观的日历，一旦我深入研究它就可以自定义它。

这实际上只是使用[Chrome 开发人员工具](https://developer.chrome.com/devtools)获取必要的类并创建我自己的自定义样式表的问题。

# actionscript-3 - Actionscript 中矩阵缩放/旋转的奇怪稳定性问题

> ID：15688133
> 
> 赞同：1
> 
> 时间：2013-03-28T17:17:33.167
> 
> 标签：actionscript-3, animation, matrix, image-rotation, image-scaling

我有一个 Flash 应用程序，我在其中执行关于 _background:MovieClip 中心的缩放和旋转操作（代表一本书的一页）。我在这个 MC 的 GESTURE_ROTATE 和 GESTURE_SCALE 事件上有简单的事件监听器，它们更新了一些变量 currentRotation 和 currentScaleX，currentScaleY。然后，我在应用程序的 ENTER_FRAME 事件上触发了以下代码。

我遇到的问题是在将 MC 旋转到大约 60 或 -60 度的限制之外，或者稍微缩放和旋转时，MC 开始振荡并最终疯狂地旋转失控并离开屏幕。我尝试了几件事来调试它，甚至尝试了 Math.flooring currentRotationValue 并将 currentScaleX/Y 的值四舍五入到十分位 (Math.floor(currentScale * 10) / 10)，但这些似乎都没有补救它。我在这一点上有点卡住，并尝试尽可能多地进行研究，但找不到任何东西。有什么建议么？在每一帧上执行此操作是否有问题？

```
private function renderPage(e:Event) {
    var matrix:Matrix = new Matrix();

    // Get dimension of current rectangle.
    var rect:Rectangle = _background.getBounds(_background.parent); 

    // Calculate the center.
    var centerX = rect.left + (rect.width/2);
    var centerY = rect.top + (rect.height/2);

    // Translating to the desired reference point.
    matrix.translate(-centerX, -centerY); 

    matrix.rotate(currentRotation / 180) * Math.PI);
    matrix.scale(currentScaleX, currentScaleY);
    matrix.translate(centerX, centerY); 

    _background.transform.matrix = matrix;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:35:51.417

我不确定您要产生什么行为，但我认为问题在于`centerX`并`centerY`定义`_background`in*`_background.parent`的*坐标空间的中间。然后，您将平移围绕 values 旋转的`matrix`so ，但在's 坐标空间中。`_background``centerX, centerY`*`_background`*

假设您想`_background`围绕屏幕上保持静止的点旋转，您实际需要做的是使用两种不同的`Points`：

```
matrix.translate(-_rotateAroundPoint.x, -_rotateAroundPoint.y); 

matrix.rotate(currentRotation / 180) * Math.PI);
matrix.scale(currentScaleX, currentScaleY);

matrix.translate(_centerOnPoint.x, _centerOnPoint.y); 
```

应该在它*自己的坐标空间*`_rotateAroundPoint`中转动的点在哪里，并且它应该在*其父*坐标空间中转动的点在哪里。`_background`*`_centerOnPoint`*

 **仅当您要平移时才需要重新计算这两个值`_background`，而不是每帧。例如：

```
private var _rotateAroundPoint:Point = new Point(_background.width * 0.5, _background.height * 0.5);
private var _centerOnPoint:Point = new Point(50, 50);

private function renderPage(e:Event) {
    var matrix:Matrix = new Matrix();

    matrix.translate(-_rotateAroundPoint.x, -_rotateAroundPoint.y); 

    matrix.rotate((currentRotation / 180) * Math.PI);
    matrix.scale(currentScaleX, currentScaleY);
    matrix.translate(_centerOnPoint.x, _centerOnPoint.y); 

    _background.transform.matrix = matrix;
} 
```**

# eclipse - 已安装 Eclipse GWT 插件，但没有 Web 应用程序项目

> ID：15688142
> 
> 赞同：4
> 
> 时间：2013-03-28T17:17:55.187
> 
> 标签：eclipse, gwt, google-plugin-eclipse

我在 Windows XP 上安装了 Eclipse IDE for Java EE Developers (3.7) 并安装了 Google 插件和 GWT SDK ，但即使插件显示为已安装，我仍然没有得到应有的选项 File > New > Web Application Project是。并且工具栏上的蓝色圆圈中没有带有“g”的图标。我错过了什么？

谢谢

这是我在 Eclipse 安装详细信息屏幕的“插件”选项卡上看到的内容：

Google App Engine Java SDK 1.7.6 Google Eclipse 3.7 Platform Plugin 3.2.2.v201303261859-r3l-r37 Google Eclipse Platform Plugin 3.2.2.v201303261859-r3l-r37 Google Eclipse Shared Platform Plugin 3.2.2.v201303261859-r3l-r37 Google网络工具包 SDK 2.5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:44:59.493

转到**Eclipse Market Place** --> 搜索**GWT 插件**--> 下载**适用于 Eclipse 3.7 的 Google 插件**

下载和安装所有软件包和插件需要一些时间。但是一旦完成，您将能够在工具栏上看到 google 图标。

还可以通过以下链接。 [https://developers.google.com/web-toolkit/usingeclipse](https://developers.google.com/web-toolkit/usingeclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T12:05:05.853

在遵循 GWT 教程时我遇到了同样的问题，我解决了这个问题。

你可以走了：

Eclipse --> 帮助 --> 安装新软件 --> 使用

然后粘贴这些网址中的任何一个，但为您的 Eclipse IDE 发行版更改 indigo 或 helios

Indigo 更新站点 - [http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/)

[http://download.eclipse.org/webtools/repository/helios](http://download.eclipse.org/webtools/repository/helios)

稍等片刻，Eclipse 将显示所有选项。

检查选项：

Web、XML、Java EE 和 OSGi 企业开发

然后单击 Next、Apply 和 Finish 并重新启动 IDE 以查看更改。

是全部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-01T18:48:49.320

您可能缺少[Java 7 JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)。

从上面的链接下载并安装 JDK，然后[按照这些说明](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2FgettingStarted%2Fqs-with-java7.htm)让 Eclipse 知道在哪里可以找到它。

安装Java 7后，下次启动Eclipse时，GWT插件按钮和菜单终于出现了。

# mysql - 函数内的动态 SQL 过程

> ID：15688143
> 
> 赞同：1
> 
> 时间：2013-03-28T17:17:55.663
> 
> 标签：mysql, stored-procedures, prepared-statement, dynamic-sql, stored-functions

我正在尝试创建一个存储过程，其中包括使用来自其他表的信息更新一个表：

```
UPDATE table1 T1, table2 T2
set T1.rank = T1.rank + T2.rank
T1.tags = merge(T1.tags, T2.tags)
WHERE T1.id = T2.id 
```

tags 是逗号分隔的字符串，merge 是一个函数（不是过程），它将字符串分解为临时表并使用准备好的语句返回具有唯一标签的新字符串。我知道不能在函数内部使用准备好的语句，但使用这些语句的部分是在函数内部调用的过程内部。

所以我得到一个错误，我不能在函数中使用动态 sql 过程，我需要这个函数，所以我可以使用返回值作为更新中的新值。

任何可能的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:24:06.973

您可以使用纯 SQL 在一条语句中执行此操作（使用合并标签进行更新）。诀窍在于使用一个数字（也称为计数表），它可以在几秒钟内创建和填充（也可以使用一条 SQL 语句）。

这是你的`UPDATE`声明

```
UPDATE table1 t1 JOIN table2 t2
    ON t1.id = t2.id JOIN
(
  SELECT id, GROUP_CONCAT(DISTINCT tag ORDER BY tag) tags
    FROM
  (
     SELECT a.id, SUBSTRING_INDEX(SUBSTRING_INDEX(tags, ',', n.id), ',', -1) tag
       FROM
    (
       SELECT t1.id, CONCAT(t1.tags, ',', t2.tags) tags
         FROM table1 t1 JOIN table2 t2
           ON t1.id = t2.id
    ) a CROSS JOIN tally n
     WHERE n.id <= 1 + (LENGTH(tags) - LENGTH(REPLACE(tags, ',', '')))
       AND n.id < 100 -- change that number to accommodate max possible number of tags 
  ) b
   GROUP BY id
) c ON t1.id = c.id
   SET t1.tags = c.tags,
       t1.rank = t1.rank + t2.rank 
```

这是用多达 100k 行填充计数表的模式和语句。

```
CREATE TABLE tally (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY);

INSERT INTO tally 
SELECT NULL
FROM (SELECT 0 n UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) a
      , (SELECT 0 n UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) b
      , (SELECT 0 n UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) c
      , (SELECT 0 n UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) d
      , (SELECT 0 n UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) e
; 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/cefdb/1)**演示

# jquery - 使用jQuery在另一行中基于td单元格隐藏表中的行

> ID：15688147
> 
> 赞同：0
> 
> 时间：2013-03-28T17:18:11.873
> 
> 标签：jquery

这是表格：

```
<tr>
 <td id="test123" align="center" rowspan="6" style="padding-right:50px;padding-left:20px;">test123</td>
 <td rowspan="6">
 <td rowspan="6">
 <td rowspan="6">
 <td rowspan="4" style="display: none;">
 <td colspan="9">
</tr>
<tr> <---- HIDE THIS ROW 
```

我知道如何选择 id=test123 以及如何使用 .parent 和 jQuery 隐藏行，但是如何在正在使用的选择器下方隐藏某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:19:32.517

使用[`.next()`](http://api.jquery.com/next/)方法。

```
$("tr:has('#test123')").next().hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:20:46.330

你可以这样做：

```
$('#test123').parent('tr').next().hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:43:37.143

试试这个：

```
$('#test123').closest('tr').next().hide(); 
```

# math - 使用较小的正方形构建大正方形

> ID：15688161
> 
> 赞同：1
> 
> 时间：2013-03-28T17:18:56.517
> 
> 标签：math, dynamic-programming

我有一个大正方形的边缘`N`。我想计算使用边缘值从`1`到的小方块来构造这个大方块所需的小方块的数量`N-1`。我有无限数量的这种小正方形。唯一的限制是我必须使用`minimum`较小的正方形的数量。例如，如果 N=3，我可以使用 5 个大小的正方形`1`和 1 个大小的正方形来构造这个正方形`2`。对于任何给定的值，我如何解决这个问题`N`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:43:17.753

对于 even `N`，您可以使用 4 个正方形的 side `N/2`，这是可能的最小值。对于奇怪`N`的，它有点复杂。奇数的一种可能解决方案是 1 的3`N`个正方形，大小为 1，但我不完全确定这是最小的...例如，如果，这将给出 12 个正方形，其中存在 9 个 3x3 正方形的更好解决方案. 不过，这可能是 prime 的最佳解决方案。`(N+1)/2``(N-1)/2``N-1``N=9``N`

# django - Django AJAX 循环数据

> ID：15688163
> 
> 赞同：0
> 
> 时间：2013-03-28T17:19:00.323
> 
> 标签：django

在我看来，我正在尝试循环所有页面并使用下面的代码为每个页面提取名称。但它似乎不起作用。

我怎样才能做到这一点？

**视图.py**

```
 json_dict = json.loads(request.POST['site'])

  for item in json_dict['pages']:

            item.json_dict['name'] 
```

**JSON数据**

```
{
    "someitem": "xaAX",
    "pages": [
        {
            "id": "1364484811734",
            "name": "Page Name",
            "type": "basic",
            "components": {
                "img": "",
                "text": ""
            }
        },
        {
            "id": "1364484812918",
            "name": "Contact",
            "type": "contact",
            "components": {
                "text": "Send us an email using the form below.",
                "contact-form": {
                    "contact-name": "zzz",
                    "contact-email": "zz"
                }
            }
        },

    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:27:14.480

这应该有效：

```
json_dict = json.loads(request.POST['site'])

for item in json_dict['pages']:
    print item['name'] 
```

# c# - 转换不同时区的时间，包括夏令时

> ID：15688164
> 
> 赞同：6
> 
> 时间：2013-03-28T17:19:03.387
> 
> 标签：c#, .net, datetime

我有一个过程，它接受带有时区的日期时间值作为字符串（数据来自外部系统）。我需要将此日期时间转换为本地机器时区的时间。

示例代码：

```
string cetId = "Central European Standard Time";
if (timeZone == "CET")
{
    TimeZoneInfo cetZone = TimeZoneInfo.FindSystemTimeZoneById(cetId);
    returnDateTime = TimeZoneInfo.ConvertTime(statusDateTime, cetZone, TimeZoneInfo.Local);
}
else if (timeZone == "CEST")
{
    TimeZoneInfo cestZone = TimeZoneInfo.FindSystemTimeZoneById(cetId);
    returnDateTime = TimeZoneInfo.ConvertTime(statusDateTime, cestZone, TimeZoneInfo.Local);
} 
```

如果时间是 CEST（中欧夏令时间）而不是 CET（中欧时间）或者 .net TimeZoneInfo 对象是否处理这种情况，我是否需要做任何具体的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:25:00.900

你应该没事。

您正在告诉 ConvertTime 两个时区（源和目标）是什么。

您对此有具体问题还是只是要求确认？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:46:45.457

从[TimeZoneInfo.ConvertTime()](http://msdn.microsoft.com/en-us/library/bb382770.aspx "微软")

```
The value of the Kind property of the dateTime parameter must correspond to the sourceTimeZone parameter, as the following table shows. 
```

只想补充一点，您需要注意 StatusDateTime 的“Kind”属性。在您的情况下，它必须是“未指定”。查看“备注”部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:54:37.173

不久前我创建了一个库来封装这些类型的转换：

[https://github.com/b9chris/TimeZoneInfoLib.Net/blob/master/TimeZoneInfoLib/TimeZone/UtcTimeZone.cs](https://github.com/b9chris/TimeZoneInfoLib.Net/blob/master/TimeZoneInfoLib/TimeZone/UtcTimeZone.cs)

可能对您有用，或者您可能只想选择它来仔细检查您的代码。它封装的其中一件事是@Brian 的警告-因此它具有与 .Kind 属性相关的显式方法名称，如果 .Kind 错误，则会引发有用的异常。获得有用的/常见的/日光时间名称和缩写也需要一些繁重的工作：

[https://github.com/b9chris/TimeZoneInfoLib.Net/blob/master/TimeZoneInfoLib/TimeZone/TimeZoneShortNameMap.cs](https://github.com/b9chris/TimeZoneInfoLib.Net/blob/master/TimeZoneInfoLib/TimeZone/TimeZoneShortNameMap.cs)

# javascript - ajax调用后Fancybox没有关闭

> ID：15688176
> 
> 赞同：2
> 
> 时间：2013-03-28T17:19:42.517
> 
> 标签：javascript, jquery, ajax, fancybox

在 ajax 调用之后，在某些情况下我无法关闭我的花哨的盒子。

```
 $(document).ajaxStop(function() {
    function(){$.fancybox.close()};
 });

 $(document).ajaxStart(function() {
    $("a#load_gif").trigger('click');
 }); 
```

这是我处理精美盒子的代码。所以我的问题是，如果 ajax 调用非常简短且快速，则框不会关闭，但是如果调用更长，它会自动关闭。

我找到了一个沿着这条线的修复

```
$(document).ajaxStop(function() {
    setTimeout(function(){$.fancybox.close()},500);
}); 
```

但老实说，这个解决方案并不好看。即使 ajax 调用返回非常快，我该怎么做才能关闭花哨的盒子？ajax 调用的长度是可变的，取决于它必须获取的行数。

任何帮助和/或建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:09:06.333

似乎您有一个竞争条件，并且当您的 AJAX 调用试图触发该关闭函数时，可能尚未完成创建幻想框并且尚未定义它的关闭函数。

我推荐一个触发fancybox关闭的两步过程。创建2个全局变量`ajaxStop = false;`和`fancyboxDone = false;`

创建一个函数，如：

```
function closeFancyBox(){
    if(ajaxStop && fancyboxDone){
        $.fancybox.close();
        ajaxStop = fancyboxDone = false;
    }
} 
```

然后将您的 ajax 停止更改为：

```
 $(document).ajaxStop(function() {
    function(){
      ajaxStop = true;
      closeFancyBox()
    };
 }); 
```

最后向您的fancybox 添加一个onComplete 函数，该函数与ajax Stop 相同，但设置`fancyboxDone = true`而不是`ajaxStop`.

因此，现在无论哪个完成第一和第二，他们都将能够检查彼此的状态并适当地触发关闭。

# updating - “VS2010 and IE10 Attach the Script debugger to process iexplore.exe failed”的解决方案能否破坏Win更新？

> ID：15688179
> 
> 赞同：0
> 
> 时间：2013-03-28T17:19:46.253
> 
> 标签：updating

我运行“VS2010 和 IE10 附加脚本调试器以处理 iexplore.exe 失败”解决方案 [http://goo.gl/S1jXp](http://goo.gl/S1jXp)。

这会导致 Windows 7 64 位无法安装更新吗？[（Windows 更新http://goo.gl/5ttfP](http://goo.gl/5ttfP)中的错误代码 641 ）regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll"

# java - 如何在 ViewText 上添加换行符？

> ID：15688180
> 
> 赞同：0
> 
> 时间：2013-03-28T17:19:50.343
> 
> 标签：java, android, dictionary

我是新手。我正在编辑提供给 SDK 示例的可搜索字典。字典遵循 \res\raw\definitions.txt 上的数据库

当搜索单词时显示结果（定义）如下 -

```
line1 line2 line3 
```

但我想在结果上添加换行符并显示（定义）如下 -

```
line1 
line2 
line3 
```

WordActivity.java 的代码在这里

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.word);

        Uri uri = getIntent().getData();
        Cursor cursor = managedQuery(uri, null, null, null, null);

        if (cursor == null) {
            finish();
        } else {
            cursor.moveToFirst();

            TextView word = (TextView) findViewById(R.id.word);
            TextView definition = (TextView) findViewById(R.id.definition);

            int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
            int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);

            word.setText(cursor.getString(wIndex));
            definition.setText(cursor.getString(dIndex));
        }}   
            public void onBackPressed() {
                onSearchRequested();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.options_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        // TODO Auto-generated method stub
                 case R.id.search:
                onSearchRequested();
                return true;
            case R.id.about:
                setContentView(R.layout.abouttanzil);
                return true;
            case R.id.exit:
                moveTaskToBack(true);
                return true;
            default:
                return false;
        }
    }
} 
```

请让我知道我应该添加什么以及在哪里换行？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:24:00.457

将其显示为 HTML 并使用 \n。

```
yourTextView.setText(Html.fromHtml(someText + "\n" + someOtherText)); 
```

显然有更聪明的方法。只是向您展示 Html.fromHtml() 方法。

# c# - C# ReceiveAsync 响应损坏

> ID：15688184
> 
> 赞同：0
> 
> 时间：2013-03-28T17:20:00.067
> 
> 标签：c#, sockets, asynchronous, response

将随机数据添加到响应中。这发生在所有站点和页面上，并且对于每个特定页面，这些数据都是固定的。例子：

```
Connection: close
X-Powered-By: PHP/5.4.11

1fb4
<!DOCTYPE html.......... 
```

或者

```
<script>
    $('#toggle_debug').cl
134
ick(function () { 
```

代码：

```
if (e.BytesTransferred > 0)
{
    Response.AddRange(e.Buffer);
    if (Response.Count >= MaxContentLength)
    {
        Final();
    }
    else
    {
        e.SetBuffer(0, BufferSize);
        e.AcceptSocket.ReceiveAsync(e);
    }
} 
```

响应 - 包含字节的列表。此外， StringBuilder 和其他有同样的问题。附加符号是固定的，不会改变。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:37:33.807

我想你想要

```
Response.AddRange(new ArraySegment<byte>(e.Buffer, 0, e.BytesTransferred)); 
```

# symfony - 在 Symfony2 的 URL 中使用区域设置（语言+国家）

> ID：15688188
> 
> 赞同：0
> 
> 时间：2013-03-28T17:20:09.687
> 
> 标签：symfony, localization, locale

我正在 Symfony2 中建立一个国际网站。我的网址如下所示：

www.test.com/en_HK

这应该以港币显示英文文本和价格。英文文本部分已经开始工作。是否有 Symfony 函数可用于从语言环境中获取国家代码？

语言环境包含“languagecode_COUNTRYCODE”。或者我应该写几行代码来分散国家代码从语言环境中的注意力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:38:19.737

不，没有函数可以直接执行此操作，因为语言环境可以是 2 个字母：

**前任。**en, fr, de

SonataIntlBundle 提供了一些 ISO 代码扩展，但不是您想要的

[http://sonata-project.org/bundles/intl/master/doc/reference/locale.html](http://sonata-project.org/bundles/intl/master/doc/reference/locale.html)

[Locale](http://symfony.com/doc/master/components/locale.html)组件非常接近，您可以这样做：

```
$countryCodes = Locale::getCountries('en_HK'); 
```

编写一个服务来做到这一点应该是相当简单的：

```
class CountryCodeExtractor
{
    function fromLocale($locale)
    {
        if(strlen($locale) == 4){
            return substr($locale, -2);
        }
        else throw new \Exception("Invalid locale passed");
    } 
```

类似的东西。显然，您需要更好地验证输入语言环境。

# javascript - 许多元素的jQuery动画队列

> ID：15688191
> 
> 赞同：1
> 
> 时间：2013-03-28T17:20:14.743
> 
> 标签：javascript, jquery, animation

我有很多不同的元素`(b,c,d,e,f classes)`，但每个元素都有相同的东西—— `'a class'`。如何制作一些动画`quene`，使它们按`FIFO`顺序（先进先出）一个接一个地制作动画？

回调正在为它疯狂，因为有很多元素，我无法估计什么时候 div 会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:23:31.813

鉴于您的动画都是相同的类型（动画左到 50）但在多个元素上完成，您可以这样做：

```
nextAnim( $('.a') );

function nextAnim(elems) {
    elems.eq(0).animate({'left':50}, function() {
             nextAnim( elems.slice(1) );  // slice off the first element
    });
} 
```

见[**工作小提琴**](http://jsfiddle.net/gnel/E5RXK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:28:26.517

[了解 jQuery Deferred.pipe()](https://stackoverflow.com/questions/5921283/understanding-jquery-deferred-pipe)

如果您想学习新事物并以优雅的方式做事，您可以尝试使用延迟对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:49:42.530

我用过

```
$('.a').filter(function(){ return $(this).is(':animated')}).length 
```

知道是否有任何项目已经动画，并且只有在没有动画的情况下我才会触发动画

# javascript - 如何找到3个或更多连续字符？

> ID：15688193
> 
> 赞同：10
> 
> 时间：2013-03-28T17:20:17.573
> 
> 标签：javascript, jquery

我正在检查密码。这些功能之一是查找输入的密码是否连续重复。我还没有代码，因为我不知道该怎么做。

我发现这个正则[表达式匹配两个或多个相同字符不连续](https://stackoverflow.com/questions/9255840/regex-match-two-or-more-same-character-non-consecutive)，但它只匹配重复的逗号。

**以下是场景：**

5236aaa121 - 重复模式，因为`a`连续重复 3 次

2312aa32aa - 没有重复的字符

111111asd - 重复模式，因为`1`连续重复多次

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T17:29:18.320

使用反向引用：`/(.)\1\1/`

例子：

```
var hasTripple = /(.)\1\1/.test('xyzzzy'); 
```

[JSFiddle 示例](http://jsfiddle.net/t87wB/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T17:33:53.127

下面的那一个呢？

> (.)\1{2,}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T17:30:52.947

试试这个正则表达式： (.)\1\1+

```
/(.)\1\1+/g 
```

点匹配任何字符，然后我们连续查找多个字符。我在[http://regexpal.com/](http://regexpal.com/)上对其进行了测试，我相信它可以满足您的需求

你可以这样使用：

```
str.match(/(.)\1\1+/g).length 
```

只需检查它是否为 0

看看这个在行动...... [http://jsfiddle.net/yentc/2/](http://jsfiddle.net/yentc/2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T17:28:22.640

您只需通过 for 循环迭代字符串并比较一个到下一个，如果两者相同然后增加一个（声明一个变量用于计数）.. 最后检查计数值是否大于 0，然后字符串重复模式...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T17:29:46.517

你可以这样做：

```
var password = '5236aaa121';

for(var i = 0; i< password.length; i++) {
    var numberOfRepeats = CheckForRepeat(i, password, password.charAt(i));
    //do something

}

function CheckForRepeat(startIndex, originalString, charToCheck) {
    var repeatCount = 1;
    for(var i = startIndex+1; i< password.length; i++) {
        if(originalString.charAt(i) == charToCheck) {
            repeatCount++;
        } else {
        return repeatCount;
        }   
    }
    return repeatCount;
} 
```

# c# - 将对象从 T : MyClass 的一个泛型方法传递到另一个 T : DerivedClass 的方法

> ID：15688198
> 
> 赞同：2
> 
> 时间：2013-03-28T17:20:36.083
> 
> 标签：c#, entity-framework, inheritance, polymorphism

我有一个包含此方法的通用存储库：

```
public void Delete<T>(T item) where T : EntityBase 
```

我正在尝试向某些对象添加软删除行为；IE。删除时，它们不会从数据库中删除，而是`bool Deleted`设置为a`false`并且它们停止显示在查询中，除非将特定参数设置为包含它们。一般来说，应用程序的行为就好像它们不存在一样，除了管理视图，这些项目可以通过再次翻转该布尔值来恢复。我的问题是，在将对象传递给此方法时，它被处理为`EntityBase`，它没有这种软删除行为，因为许多类不需要它。`SoftDeleteEntityBase`扩展`EntityBase`类以添加软删除行为，但我找不到一种干净的方法来转换对象，以便我可以得到布尔值。我的第一个想法是这样的：

```
public void Delete<T>(T item) where T : EntityBase
{
    if (item is SoftDeleteEntityBase)
    {
        ((SoftDeleteEntityBase)item).Deleted = true;
        Update<T>(item);
    }
    else
    {
        db.Set<T>().Remove(item);
    }
} 
```

但这给了我错误`"Cannot convert type T to SoftDeleteEntityBase"`。

我如何得到那个布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:23:48.480

这个简短的解决方案怎么样，但考虑更改存储库的设计

```
SoftDeleteEntityBase itemAsSoft = item as SoftDeleteEntityBase;
if (itemAsSoft != null)
{
    itemAsSoft.Deleted = true;
    Update(itemAsSoft);
} 
```

我不知道你的上下文，但是这个带有泛型的解决方案怎么样

```
void Main()
{
    Delete(new Base()); // called with base
    Delete(new Derived()); //called with derived
}
public void Delete(Base item)
{
    Console.WriteLine ("called with base");
    //one logic
    GenericDelete(item);
}

public void Delete(Derived item)
{
    Console.WriteLine ("called with derived");
    //another logic
    GenericDelete(item);
}

public void GenericDelete<T>(T item)
{}

public class Base
{}

public class Derived : Base
{} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:24:46.180

理想情况下，您会利用多态性。类`EntityBase`可以有一个`Delete`方法；它和其他实现可以选择进行硬删除。该类`SoftDeleteEntityBase`可以覆盖该方法，而是选择只设置一个`Deleted`字段而不是硬删除它。那么这里的这个方法就不需要关心派生类型是什么了；它可以调用`Delete`并让班级自己选择。

# jenkins - 如何让所有构建步骤在 Hudson/Jenkins 中执行？

> ID：15688199
> 
> 赞同：4
> 
> 时间：2013-03-28T17:20:36.927
> 
> 标签：jenkins

我正在使用 Jenkins 为我的系统构建多个客户端库，每个库都针对不同的语言。我的配置包括许多不同的构建步骤，每种语言一个，构建和/或测​​试库。

现在，系统中的重大更改将导致第*一个*构建步骤失败，并且不会运行其他构建步骤，这非常不方便。我需要运行所有构建步骤，以便可以看到所有产生的错误。

一种替代方法是存在一个配置，告诉詹金斯如果前面的构建步骤失败，不要中止后面的构建步骤。我没有找到任何这样的东西，但也许有。

我想到的另一种选择是将每种语言作为单独的构建触发，但是我必须将它们全部捆绑起来以进行后期构建步骤，我不知道该怎么做。

而且，当然，我可能缺少一些东西。

以上任何一项都可以解决我的问题。那么，我应该怎么做，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:15:31.037

Multijob插件是您正在寻找的[。](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)我经常使用这个插件。看看他们的截图 - 您可以指定三个选项来将一个阶段（一个阶段可以有多个作业）标记为成功

*   当 Phase Job 的构建成功时
*   即使 Phase Job 的构建不稳定
*   **即使阶段作业的构建失败**-*这就是您需要的*

在您的情况下，您可以创建一个多作业作业，每个“客户端库”都有一个阶段。并将您各自的“客户库”作业添加到他们的短语中。因此，如果您有 10 个“客户端库”作业，那么您最终将在此 MutliJob 中拥有 10 个阶段（每个阶段一个）。并且不要忘记将“**当阶段作业的状态**为“**完成（始终继续）** ”时将阶段标记为成功

我通常不喜欢为此目的使用下游作业，因为 Jenkins 中没有漂亮的 UI 可以在单个页面中查看整个构建流程。当然有这个[Build Pipeline Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin)可以显示每个构建流程状态。您可以根据需要选择合适的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:04:55.687

为了使这项工作在一项工作中发挥作用，我认为您需要使构建步骤不会失败（返回非零退出代码）。然后，如果需要，您需要一个构建后步骤来分析测试结果并标记构建失败或不稳定。

在运行构建/测试操作后，您可能需要编写一个包装器脚本来执行构建，例如简单的 .BAT 或 shell 脚本，`exit 0`最后一行。

执行这种测试结果处理的构建后操作的示例是*Publish JUnit 测试结果报告*。

# list - 在 Scheme 中仅使用 CONS 命令编写列表

> ID：15688200
> 
> 赞同：2
> 
> 时间：2013-03-28T17:20:40.570
> 
> 标签：list, scheme, nested

仅使用 Scheme 编程语言中的 cons 命令，如何编写嵌套列表，例如

'（ab（xy（m）））？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:39:51.640

提示：`car`cons 单元格的 也可以是 cons 单元格。

更具体地说，您拥有的列表以长格式写成：

```
(a . (b . ((x . (y . ((m . ()) . ()))) . ()))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:57:42.707

```
(define a "a")
(define b "b")
(define x "x")
(define y "y")
(define m "m")

(define example (cons a (cons b (cons (cons x (cons y (cons (cons m '()) '()))) '())))) 
```

结果：

```
 example
 '("a" "b" ("x" "y" ("m"))) 
```

# javascript - 浏览器 JavaScript 版本

> ID：15688205
> 
> 赞同：1
> 
> 时间：2013-03-28T17:20:56.123
> 
> 标签：javascript

我怎么知道我的浏览器运行的是哪个版本的 JS？我想要一个简单的脚本。还有 1.6 和 1.7 版本之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:24:09.293

您可以使用[此代码](http://www.docsteve.com/DocSteve/Samples/JS/js_version.html)

```
<script language="javascript">var js_version="1.0"</script>
<script language="javascript1.1">var js_version="1.1"</script>
<script language="javascript1.2">var js_version="1.2"</script>
<script language="javascript1.3">var js_version="1.3"</script>
<script language="javascript1.4">var js_version="1.4"</script>
<script language="javascript1.5">var js_version="1.5"</script>
<script language="javascript1.6">var js_version="1.6"</script> 
```

然后检测版本 -

```
<script language="javascript">
  document.write(js_version); 
</script> 
```

# c# - WPF应用程序中的FolderBrowserDialog抛出应用程序异常而不是绑定异常

> ID：15688206
> 
> 赞同：0
> 
> 时间：2013-03-28T17:21:00.663
> 
> 标签：c#, wpf, folderbrowserdialog, errortemplate

您好，我正在使用`System.Windows.Forms.FolderBrowserDialog`我的`WPF application`来选择用户计算机中的文件夹。所选文件夹显示在 a 中`TextBox`，并在视图模型中进行验证。

我正在尝试在以下情况下显示无效文件夹`Error Template`消息：`TextBox`

1.  如果文件夹不存在且不可访问。
2.  如果用户选择的文件夹是系统文件夹。对于此示例，我将值硬编码为`@"c:\windows\boot"`.

我注意到的是：如果我键入一个不存在的文件夹，我将得到允许我设置错误模板的绑定异常。

但是，如果我选择了一个用户无权访问的驱动器，或者我选择了`@"c:\windows\boot"`我将得到一个异常，该异常要么在`App.xaml`unhandle 异常中被捕获，要么如果你有一个 try catch（设置文件夹的位置），它将在那里被捕获。我怎样才能将其作为绑定异常？在我决定将它作为尝试捕获之前，我想了解是否有任何方法可以将其作为绑定异常（这样可以节省点击！）。

这是代码：

```
public class MainWindowViewModel : INotifyPropertyChanged
    {
        public MainWindowViewModel()
        {
        }

        private string _folderName;
        public string FolderName
        {
            get { return _folderName; }
            set
            {
                _folderName = value;

                if (!string.IsNullOrEmpty(_folderName))
                    InvalidValidFolder();

                if (!string.IsNullOrEmpty(_folderName))
                    ValidateFolder();

                OnPropertyChanged("FolderName");
            }
        }

        private void ValidateFolder()
        {
            if (!Directory.Exists(FolderName))
                throw new Exception("Folder does not exist");
        }

        private void InvalidValidFolder()
        {
            if (FolderName.ToLower() == @"c:\windows\boot")
                throw new Exception("This folder is restricted.");
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

    } 
```

我只有`MainWindow`和`MainWindowViewModel`。

```
<DockPanel>
        <Grid DockPanel.Dock="Top" Width="Auto" Margin="50">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox x:Name="textBox" Text="{Binding FolderName, ValidatesOnExceptions=True, ValidatesOnDataErrors=True}" Margin="0,0,0,5" Grid.Column="0" />
            <Button Grid.Column="1"
                        Margin="5,0,5,0"
                        Width="35"
                        Content="..."
                        Click="LocationChoose_Click"/>
        </Grid>
        <Grid></Grid>
    </DockPanel> 
```

代码隐藏

```
public partial class MainWindow : Window
    {
        public MainWindowViewModel ViewModel {get; set;}
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = ViewModel = new MainWindowViewModel();
        }

        private void LocationChoose_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                FolderBrowserDialog folderDlg = new FolderBrowserDialog();
                folderDlg.ShowDialog();
                ViewModel.FolderName = folderDlg.SelectedPath;

            }
            catch (Exception ex)
            {
                System.Windows.MessageBox.Show(ex.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:20:51.580

如果有人感兴趣，请得到答案。

我将后面的代码更改为：

```
private void LocationChoose_Click(object sender, RoutedEventArgs e)
{
    FolderBrowserDialog folderDlg = new FolderBrowserDialog();
    folderDlg.ShowDialog();
    //ViewModel.FolderName = folderDlg.SelectedPath;
    textBox1.Text = folderDlg.SelectedPath;
    BindingExpression exp = this.textBox1.GetBindingExpression(System.Windows.Controls.TextBox.TextProperty);
    exp.UpdateSource();
} 
```

这将其视为绑定异常。现在我可以应用我的模板了。谢谢你的时间。

# interrupt - 就 CPU 百分比而言，典型的滴答中断持续时间是多少？

> ID：15688210
> 
> 赞同：0
> 
> 时间：2013-03-28T17:21:20.327
> 
> 标签：interrupt, scheduler, duration, rtos

在许多 RTOS 中，滴答中断会激活调度程序，该调度程序会检查更高优先级的任务是否准备好运行，如果是，则执行上下文切换。我想知道就 CPU 百分比而言，滴答中断的典型持续时间是多少？（当没有发生上下文切换时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T21:59:56.017

这实际上取决于滴答周期/频率。如果每 1 毫秒有一个滴答声，那么百分比可能会更高。

此外，它在很大程度上取决于处理器及其时钟速度。在以 128MHz 运行且启用缓存的 MPC5554 上，滴答中断处理（即仅接收中断，查看某些条件返回执行）约为 7 µs。这在 10 ms 周期/周期内给出 0.07%。

这是用于汽车应用吗？

# c++ - 在 Visual Studio 中更改 C++ 版本

> ID：15688212
> 
> 赞同：1
> 
> 时间：2013-03-28T17:21:38.180
> 
> 标签：c++, visual-studio

如何在Visual C++ Express Edition 2010 中查看C++ 的版本并将其更改为C++11？我尝试过使用统一初始化`std::vector<std::string> v{"Hello" , "World"};`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:24:11.183

您无法更改 Visual Studio 2010 使用的 C++ 语言版本。它确实部分支持 C++11，但由于 VS 2010 在 C++11 标准最终确定之前发布，因此某些功能与标准，而且并非所有功能都已实现。

有关各种主要编译器支持的 C++11 功能及其可用版本的列表，请参阅[此图表。](http://wiki.apache.org/stdcxx/C++0xCompilerSupport)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:22:36.477

不幸的是，这还没有在编译器中实现，甚至在 VS 2012 中也没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:24:16.653

Visual C++ 目前不支持统一初始化。[最新](http://www.microsoft.com/en-us/download/details.aspx?id=35515)的编译器 CTP 版本（适用于 Visual Studio 2012，而不是 2010）支持它，但这是一个 alpha 质量的产品。此外，那里还没有标准库支持，所以你仍然不能使用向量的统一初始化。

（无论如何，您如何期望 C++ **2011**在 MSVC++ **2010**上得到支持？）

# regex - 匹配单词后 IP 地址的正则表达式

> ID：15688215
> 
> 赞同：0
> 
> 时间：2013-03-28T17:21:44.317
> 
> 标签：regex, ip

这是在我的 C# 应用程序中存储为字符串的 HTML（实际上是其中的 JS 部分）文本：

```
...
var wanPara = new Array(
    0, "00-1D-0F-EA-9C-91", "86.126.104.62", 3, "255.255.255.255", 0, 0, "86.126.104.62", 0, 1, 0, "213.154.124.1 , 193.231.252.1", "0 day(s) 07:40:24", "Connected", "", 0, 
    0,0 );
... 
```

我想创建一个正则表达式，它会给我文本*86.126.104.62*。IP可能会有所不同，所以这就是我想要得到它的原因。对于这个例子是 86.126.104.62。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:37:15.387

**简单版：**

```
\bwanPara\b(.|\r|\n)*?\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b 
```

**复杂版本：**

```
\bwanPara\b(.|\r|\n)*?\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))\b 
```

然后提取第二组。

**一些有用的注释：**

`\b`- 字边界
`(.|\r|\n)`- 通配符或回车符或换行符
`(.|\r|\n)*?`- 零个或多个通配符或回车符或换行符，非贪婪
`\d`- 数字
`\d{1,3}`- 一位到三位
`\.`- 转义`.`
`[X-Y]`- 从 X 到 Y 的任何单个字符

IP 正则表达式取自[这里](http://www.regular-expressions.info/examples.html)。

# mysql - 无法使用 xe:jdbcRowSet 将数据保存到 MySQL

> ID：15688219
> 
> 赞同：0
> 
> 时间：2013-03-28T17:22:06.553
> 
> 标签：mysql, xpages, xpages-extlib

我正在尝试将数据从我的 XPage 保存到 MySQL 数据库。我已经建立了一个连接并且它可以工作（这可以通过我的动态视图面板能够获取 MySQL 表中的数据这一事实来证明）。但我无法将我的数据提交给 MySQL。我正在关注`XPagesJDBC.nsf`扩展库中的示例数据库。

**MySQL连接文件`mysqlconn.jdbc`：**

```
<jdbc>
    <driver>com.mysql.jdbc.Driver</driver>
    <url>jdbc:mysql://***.***.***.***:3306/project_management</url>
    <user>adminuser</user>
    <password>******</password>
</jdbc> 
```

在我的 XPage 中，我创建了一个数据源`xe:jdbcRowSet`

```
<xp:this.data>
    <xe:jdbcRowSet var="jdbcrsProjectMgmt" connectionName="mysqlconn"
        sqlTable="project_details">
    </xe:jdbcRowSet>
</xp:this.data> 
```

然后在我的`xp:panel`我使用数据源来保存对象。我有两个名称和描述字段映射到 MySQL 数据库表中的相应列。

```
<xp:panel>
    <xp:this.data>
        <xe:objectData var="row"
            saveObject="#{javascript:jdbcrsProjectMgmt.saveRow(row);}">
            <xe:this.createObject><![CDATA[#{javascript:var id = context.getUrlParameter("id");
if (id != null && !id.trim().equals("")) {
    jdbcrsProjectMgmt.getRow(parseInt(id) - 1);
} else {
    jdbcrsProjectMgmt.newRow(0);
}}]]></xe:this.createObject>
        </xe:objectData>
    </xp:this.data>
    <xp:table border="0" cellpadding="5" cellspacing="0">
        <xp:tr>
            <xp:td>Name</xp:td>
            <xp:td>
                <xp:inputText id="txtName" value="#{row.name}"></xp:inputText>
            </xp:td>
        </xp:tr>
        <xp:tr>
            <xp:td>Description</xp:td>
            <xp:td>
                <xp:inputText id="txtDescription"
                    value="#{row.description}">
                </xp:inputText>
            </xp:td>
        </xp:tr>
        <xp:tr>
            <xp:td colspan="2" align="center">
                <xp:button value="Save" id="btnSave">
                    <xp:eventHandler event="onclick" submit="true"
                        refreshMode="complete" immediate="false" save="false">
                        <xp:this.action>
                            <xp:actionGroup>
                                <xp:saveDocument var="row"></xp:saveDocument>
                                <xp:openPage
                                    name="/viewProject.xsp">
                                </xp:openPage>
                            </xp:actionGroup>
                        </xp:this.action>
                    </xp:eventHandler>
                </xp:button>
            </xp:td>
        </xp:tr>
    </xp:table>
</xp:panel> 
```

当我尝试单击保存按钮时，数据未保存且未显示错误。但是，如果我将其更改`Button type`为`Submit`( `<xp:eventHandler ..... save="true">`)，则会出现错误：

```
Error saving data source jdbcrsProjectMgmt
javax.sql.rowset.spi.SyncProviderException: Can't call commit when autocommit=true
Can't call commit when autocommit=true 
```

但这一次奇怪的是数据被保存了。我找不到这个`autocommit`属性，也不知道在哪里设置它。我该如何解决这个问题？这是 XPages 还是 MySQL 的问题？

# java - 保存密码/用户名信息

> ID：15688222
> 
> 赞同：1
> 
> 时间：2013-03-28T17:22:16.707
> 
> 标签：java, save

所以我正在构建一个用于连接 MySQL 数据库的 GUI，并且我有一个用户可以输入的窗口：`Host`、`User`、`Password`和. 我想保存多个 MySQL 数据库连接的连接信息。`Port``Connection Name`

我想`Connection Name`成为一个唯一的名字，当有人打开应用程序的主屏幕时，会有一个以前保存的连接列表。当用户单击其中一个时，`Connection Names`它将连接到数据库。然后他们可以运行查询。

我想知道的是，保存这些连接的最佳方法是什么？

在我看来，保存在平面文件中听起来并不安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:28:59.393

如果您的用户有登录名/密码，您可以使用他们的密码来加密连接数据。

如果他们不（他们应该！）那么您最好的选择取决于操作系统：OSX 中的 Keychain API 或 Windows 中的 DPAPI，我不了解 Linux，但它可能具有等效的 API。

你是对的：将连接信息放在纯文本文件中是一个可怕的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:26:08.247

您可以使用用户密码对数据进行加密。不要忘记在密码更改时重新加密。这不是这里的情况，但如果您有大量数据要加密/解密，您可以拥有数据的状态密钥，但使用用户密码加密密钥。

有很多解决方案可以安全地存储桌面密码，但我不知道它们是否有 java 绑定。

# php - MySQL不要选择一行

> ID：15688224
> 
> 赞同：1
> 
> 时间：2013-03-28T17:22:24.027
> 
> 标签：php, mysql, select, where

我需要获取 3 个最近帖子的标题，但如果它是最近的 3 个帖子之一，则省略一个特定的帖子。

我懂了：

```
SELECT
  postID,
  title
FROM
  posts
WHERE
  categoryID = $categoryID
ORDER BY
  date DESC
LIMIT
  3 
```

这很好用，但我需要告诉是否要省略 "postID = $postID" "$postID" 是不应该显示并且之前定义的帖子的行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:24:08.130

向子句添加另一个条件以`where`过滤特定的`postId`

```
SELECT
  postID,
  title
FROM
  posts
WHERE
  categoryID = $categoryID
AND
  postID <> $postID
ORDER BY
  date DESC
LIMIT
  3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:25:11.050

这应该可以解决问题：

```
 SELECT
      postID,
      title
    FROM
      posts
    WHERE
      categoryID = $categoryID
    AND
      postID != $postID
    ORDER BY
      date DESC
    LIMIT
      3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:26:35.913

我对你的理解正确吗？您只想省略等于 $postID 的 postID？

```
SELECT
  postID,
  title
FROM
  posts
WHERE
  categoryID = $categoryID
AND
  postID <> $postID
ORDER BY
  date DESC
LIMIT
  3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:26:38.587

此查询使用 <> 运算符返回预期结果：

```
SELECT
  postID,
  title
FROM
  posts
WHERE
  categoryID = $categoryID
  AND postID <> $postID
ORDER BY
  date DESC
LIMIT
  3 
```

# ios - UITableView 不会重新加载数据

> ID：15688225
> 
> 赞同：0
> 
> 时间：2013-03-28T17:22:24.933
> 
> 标签：ios, uitableview, core-data

我最近正在开发一个应用程序，它允许用户将项目添加到订单列表中，他们可以按一个按钮来调出一个弹出表视图，我正在使用核心数据来存储数据。

该应用程序有一个主表视图，每一行都会显示另一个表视图，就像 Facebook 应用程序有一个滑动菜单一样。

应用程序的布局如下所示：

```
|---------------------------------------------------------------|
|                                                ______________ |
|                                               |Popover Button||
|                                                -------------- |
|---------------------------------------------------------------|
|-----------------------------|First table item 1               |
|Row to call the First table  |                                 |
|-----------------------------|---------------------------------|
|Row to call the Second table |First table item 2               |
|-----------------------------|                                 |
|Row to call the Third table  |---------------------------------|
|-----------------------------|First table item 3               |
|Row to call the Fourth table |                                 |
|-----------------------------|---------------------------------| 
```

问题出现在以下场景：

1.  启动应用程序。

2.  选择第一个表视图。

3.  按添加按钮将一些项目添加到列表中。

4.  按弹出按钮查看弹出表视图（列表已更新）。

5.  关闭弹出表视图。

6.  进一步在列表中添加更多项目。

7.  按下弹出按钮（列表保持不变，表格视图尚未更新）。

8.  转到另一个表视图（或再次调用相同的表视图）

9.  再次按下弹出按钮（列表已更新）。

谁能帮我整理一下？谢谢！

下面是代码：

订单视图.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    //load lists
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Dish"];
    fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"created" ascending:YES]];

    self.lists = [self.managedObjectContext executeFetchRequest:fetchRequest error:nil];

    [self.tableView reloadData];
}

- (NSManagedObjectContext *)managedObjectContext
{
    return [(AppDelegate *) [[UIApplication sharedApplication] delegate] managedObjectContext];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source

        [self.managedObjectContext deleteObject:[self.lists objectAtIndex:indexPath.row]];
        [self.managedObjectContext save:nil];

        NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Dish"];
        fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"created" ascending:YES]];

        self.lists = [self.managedObjectContext executeFetchRequest:fetchRequest error:nil];

        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
} 
```

细节视图.m

```
- (IBAction)popupAddToOrderButtonPressed:(id)sender
{
    OrderViewController *orderView = [[OrderViewController alloc] initWithNibName:@"OrderViewController" bundle:nil];
    Dish *newList = [NSEntityDescription insertNewObjectForEntityForName:@"Dish" inManagedObjectContext:orderView.managedObjectContext];
    newList.created = [NSDate date];
    newList.title = self.popupTitle.text;
    [orderView.managedObjectContext save:nil];
    orderView.lists = [orderView.lists arrayByAddingObject:newList];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:36:11.153

我使用 NSNotification 来解决这个问题，因为 NSNotification 会遍历整个应用程序，所以我在 popover table view 设置了一个 NSNotification 接收器，当 popover table view 收到通知时，它会执行 fetch 请求来获取数据。

并且当按下添加按钮时，它会发出通知要求弹出视图获取数据。

就这样，问题解决了。

# opengl-es - OpenGL 着色器编译器可以优化制服上的表达式吗？

> ID：15688226
> 
> 赞同：1
> 
> 时间：2013-03-28T17:22:27.147
> 
> 标签：opengl-es, glsl

我有一个 OpenGL ES 着色器，里面有一些制服。我在片段着色器中对制服进行了一些数学运算。着色器编译器通常会优化制服上的这些表达式，以便它们发生一次而不是每个像素吗？或者我应该在着色器之外进行计算并将结果传入？

具体来说，我将三个统一坐标传递给着色器：

```
uniform vec2 u_a;
uniform vec2 u_b;
uniform vec2 u_c; 
```

然后我计算这些点之间的一些向量：

```
vec2 v0 = u_c - u_a;
vec2 v1 = u_b - u_a; 
```

我很好奇着色器编译器是否可以优化这些，使得它们在每次渲染时发生一次，或者我是否应该在着色器之外计算这些并将它们作为额外的制服传递。当然，对于优化，我应该真正测量一些东西以找出我的具体情况的差异（因为 GPU 在每个像素上执行此操作的速度可能比我的 CPU 更快），但我对着色器编译器有多大范围感兴趣通常像这样的优化。

如果您知道 Android/iPhone 设备上的着色器编译器可能会有不同的行为，或者不同的 GLSL 版本会有所不同，则可以加分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:50:13.133

*编译器可以优化吗*？*是的，它可以。*会*吗？可能不会，因为在开始渲染对象时这将需要大量开销（他们必须为着色器预先计算所有可预先计算的东西）。*

# math - 检查平面点的哪一侧

> ID：15688232
> 
> 赞同：22
> 
> 时间：2013-03-28T17:23:03.150
> 
> 标签：math, 3d, pseudocode

我正在尝试获取一组 3D 点和一个平面，并根据它们在平面的哪一侧将这些点分成 2 个数组。在我开始大量调试之前，我想发布我计划做的事情，以确保我对如何做到这一点的理解能够奏效。

基本上我有 3 个点的飞机，我使用（伪代码）：

```
var v1 = new vector(plane.b.x-plane.a.x, plane.b.y-plane.a.y, plane.b.z-plane.a.z);
var v2 = new vector(plane.c.x-plane.a.x, plane.c.y-plane.a.y, plane.c.z-plane.a.z); 
```

我取这两个向量的叉积来得到法线向量。

然后我遍历我的点数组并将它们转换为向量并根据法线计算点积。

然后我使用点积来确定点所在的一侧。

这听起来可行吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-28T20:00:36.350

让`a*x+b*y+c*z+d=0`成为确定您的飞机的方程式。

将点的坐标代`[x,y,z]`入方程的左侧（我的意思是`a*x+b*y+c*z+d`）并查看结果的符号。

具有相同符号的点在平面的同一侧。

老实说，我没有检查你写的细节。我想你同意我的建议更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:14:48.610

你的方法听起来不错。但是，当您说“并将它们转换为向量”时，它可能并不好（取决于您的句子的含义）。

您应该通过计算当前点**与平面中的一个点**（例如，定义平面的三个点之一）之间的坐标差来“将您的点转换为矢量”。在你写的时候，听起来你可能误解了；但除此之外，没关系！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-30T15:03:33.583

按照前面给出的“将点放入平面方程并检查符号”的方法。[使用SymPy](https://docs.sympy.org/latest/modules/geometry/plane.html)可以轻松获得该方程。我用它在点列表中查找点的位置（保存为 numpy 数组）。

```
from sympy import Point3D, Plane
plane=Plane(Point3D(point1), Point3D(point2), Point3D(point3))
for point in pointList:
        if plane.equation(x=point[0], y=point[1],z=point[2]) > 0:
            print "point is on side A"
        else:
            print "point is on side B" 
```

与上面提到的其他方法相比，我没有测试过它的速度，但绝对是最简单的方法。

# java - 当 id 大于 127 时 FacesConverter 失败？

> ID：15688240
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:18.793
> 
> 标签：java, jsf, primefaces, selectonemenu

我有一个 primefaces selectOneMenu，它使用 javax.faces.convert.Converter 来显示设备。

只有当键（设备的 id）不大于 127 时它才能正常工作。当它更大时，单击 commandButton 后，selectOneMenu 的箭头变为红色，并且不会执行 commandButton 的操作。

为什么？有任何想法吗？

```
<p:selectOneMenu id="deviceActionParameter"
    value="#{sm.ruleConfigureBean.deviceActionParameter}"
    style="width:200px;">
    <f:selectItems value="#{sm.ruleConfigureBean.sensors}"
        var="device" itemLabel="#{device.name}" />
    <f:converter converterId="deviceConverter" />
</p:selectOneMenu> 
```

转换器：

```
@FacesConverter(value = "deviceConverter")
public class DeviceConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String key) {
        DeviceDao deviceDao = GuiceSingleton.getInstance().getInstance(
                DeviceDao.class);
        try {
            Device device = deviceDao.getDeviceById(new Long(key)); // this works
            return device;
        } catch (Exception e) {
            return null;
        }
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        if (value != null && value instanceof Device) {
            Device device = (Device) value;
            return "" + device.getIdDevice();
        }
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:39:18.763

我相信这是对 Java Integer[缓存机制](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28int%29)的优化，

```
 Integer int1=128;
        Integer int2=128;

        if(int1==int2)
            System.out.println("yes");
        else
            System.out.println("no"); 
```

将显示`yes`范围内的整数，`[-128, 127]`否则显示`no`。
如果`equals`使用，它将一直使用`yes`。

解决方案：

*   改为`getDeviceById()`使用等于

*   我相信在以后的版本中可以增加这个范围

*   否则坚持 Long

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:38:08.533

问题不在于转换器，而在于 Device 类 - 我将 Longs 与 == 进行比较。

现在好啦：

```
@Override
public boolean equals(Object o) {
    if (o instanceof Device) {
        return idDevice.equals(((Device) o).getIdDevice());
    }
    return false;
} 
```

感谢您的回答:)

# javascript - 在闭包中引用“私有方法”

> ID：15688241
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:18.857
> 
> 标签：javascript

```
var Foo = (function () {

    var foo = function() { };

    var privateMethod = function(){ };

    foo.prototype = {
        init: function() { 
            console.log(this.privateMethod); //undefined
        }
    };

    return foo;

})(); 
```

我知道我可以`privateMethod`不使用`this`指针直接访问。但由于我来自 c# 世界，我想将它用于可读性目的。

有没有办法使用指针引用我的“私有方法”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:25:11.767

`privateMethod`并不特定于 的每个实例`foo`。只需在没有`this.`限定符的情况下引用它——尽管您可能想要记录函数调用的结果，而不是函数本身：

```
console.log(privateMethod()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:25:28.537

你不能。您只能使用`this`来引用“公共”方法。如果你真的想使用`something.method`符号，你可以使用：

```
var Foo = (function () {

    var foo = function() { };

    var private = {
       privateMethod : function(){ };
    }

    foo.prototype = {
        init: function() { 
            console.log(private.privateMethod); 
        }
    };

    return foo;

})(); 
```

# php - 使用 $obj -> get_content 标签出现错误

> ID：15688242
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:18.930
> 
> 标签：php, mysql

使用 PHP 和 MySQL 我正在尝试构建自己的 CMS，但是在按照教程进行操作时，我得到了这段代码

在 cms_class.php 上

```
 <?php
 class modernCMS{ //starts class
  var $host;
 var $username;
 var $password;
 var $db;
 function connect(){
          $con=     mysql_connect(    $this    ->    host, $this->username, $this->password);
    mysql_select_db($this->db, $con) or die (mysql_error()) ;
}// ends function 

function get_content(){
    $query= "SELECT * 
FROM cms_content ORDER BY id DESC";
    $result= mysql_query($$query);

    while($row= mysql_fetch_assoc($res)){
        echo '<h1>' . $row['title'] . '</h1>';
        echo '<p>' . $row['body'] . '</p>';
    }
 }

 } //Ends class

?> 
```

然后在我的索引页面上（首先是 php）

```
 <?php 

include '_class/cms_class.php';

$obj= new modernCMS();

//set up connection variables
$obj->host='localhost';
$obj->username='root';
$obj->password='';
$obj->db='modernCMS';

//Connection to the DB

$obj->connect();

?> 
```

然后从我的 cms_content 表中获取内容的 php 是

```
<?=$obj-> get_content()?> 
```

在我的本地主机服务器上运行时，我收到这些错误....

> 未定义变量 cms_class.php 第 18 行 mysql_fetch_assoc()

modernCMS-> get_content 在我的 index.php 第 34 行

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:28:36.303

在您的`get_content`函数中，您创建变量`$result`，然后将不存在的变量传递`$res`给该变量。你的电话`mysql_fetch_assoc`也有双重要求，我也删除了。`$$``$query``mysql_query`

```
function get_content(){
    $query = "SELECT * FROM cms_content ORDER BY id DESC";
    $result = mysql_query($query);

    while($row= mysql_fetch_assoc($result)){
        echo '<h1>' . $row['title'] . '</h1>';
        echo '<p>' . $row['body'] . '</p>';
    }
 } 
```

# sqlalchemy - Flask SQLAlchemy 直到 App 结束才提交

> ID：15688245
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:23.830
> 
> 标签：sqlalchemy, flask

我已经像这样开始了我的会话：

```
from flask.ext.sqlalchemy import SQLAlchemy
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://mydatabase'
db = SQLAlchemy(app) 
```

我正在向我的数据库中添加条目，如下所示：

```
db.session.add(user(name, password))
db.session.commit() 
```

添加它后，我立即渲染一个新模板。当模板被渲染时，它应该包含我刚刚添加的数据，但它没有。但是，当我用 ctrl-c 结束我的应用程序，然后重新启动它时，我添加的数据现在会显示出来。

使用 GET 提交数据。使用获取参数`flask.request.args.get`并获取名称和密码。然后使用`db.session.add`上面的东西添加数据。

完成后`db.session.add`，从整个数据库中获取数据，如下所示：

```
users = []
for userentry in user.query.all():
    users.append(userentry.name) 
```

在模板中：

```
{% for name in users %}
    <p>{{name}}</p>
{% endfor %} 
```

然后使用以下方法渲染模板：`return render_template('my_page.html', users=users)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:10:21.843

看来我一直在使用我在 Flask Mega 教程中找到的旧设计模式。我通过打开单独的会话来添加数据来解决我的问题。[http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html)

# ios - 试图让 youtube 视频在 iOS 应用程序中播放，但所有 rtsp 链接都不起作用

> ID：15688246
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:23.993
> 
> 标签：ios, youtube-api

所以我想要一个视频的缩略图（该部分有效），当用户点击它时，它会全屏播放视频。我正在尝试将其放入 MPMoviePlayerViewController 中。但是我已经尝试了 h263 和 mpeg4 rtsp 链接，但它们都失败了（这实际上使应用程序崩溃）。但我也在我的 Mac 上快速尝试过它们，但它们无法加载。

秘诀是什么？

以下是一些示例数据：

```
"from_name": "epicmealtime",
"from_id": "epicmealtime",
"from_image_url": "https://i2.ytimg.com/i/Yjk_zY-iYR8YNfJmuzd70A/1.jpg?v=50cba2b0",
"message": "Bacon Beer Can Chicken - Epic Meal Time",
"create_time": 1364281243.0,
"post_id": "7DycWLAAEwY",
"post_type": "YouTube",
"description": "We like our chicks when they're drunk! NEW episodes of EpicMealTime every Tuesday, NEW episodes of Handle It every Saturday!!! Watch Episode 1 of Handle It! ...",
"video_thumbnail_url": "http://i.ytimg.com/vi/7DycWLAAEwY/default.jpg",
"rating": 4.8826127,
"h263_video_url": "rtsp://v7.cache5.c.youtube.com/CkULENy73wIaPAkGEwCwWJw87BMYDSANFEgGUgZ2aWRlb3NyIQGy7tHqcQHgzgWNsIjcB4KCDvPB7EI6RNWvHdRsUJxg5gw=/0/0/0/video.3gp",
"mpeg4_video_url": "rtsp://v7.cache5.c.youtube.com/CkULENy73wIaPAkGEwCwWJw87BMYESARFEgGUgZ2aWRlb3NyIQGy7tHqcQHgzgWNsIjcB4KCDvPB7EI6RNWvHdRsUJxg5gw=/0/0/0/video.3gp" 
```

非常感谢！

# vba - 如果 I 列的值为 2 或 3，则将对应的 B:D 复制到同一行并粘贴到封面上

> ID：15688251
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:43.683
> 
> 标签：vba, excel

我有一个可以更新的工作表。用户输入一个表号进行实时更新，然后宏将查看`Column 9 (I)`并复制`B:D`该行并将其粘贴到前表（封面）的单元格中。这将一直持续到数据表中的所有数据都用完为止。

```
Sub Update_Current()
    Dim Page
    Dim lastrow As Long, i As Long
    Dim ws As Worksheet

    lastrow = ActiveSheet.Range("D1000").End(xlUp).Row + 1

    Page = InputBox("Which week would you like to update?")

    If Page = 1 Then
        Worksheets("Week(1)").Select

        For i = 6 To 100
            If ws.Cells(i, 9) = "2" Or ws.Cells(i, 9) = "3" Then
                Range("i,2:1,4").Copy

                {TORN ON WHAT GOES HERE}

            End If
        Next i
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T06:17:07.803

我知道已经很晚了，但是当我认为我有一个问题时，我不能没有答案就留下一个问题。希望这会对其他人有所帮助。

```
Sub Update_Current()
Dim Page
Dim lastrow As Long, i As Long
Dim ws As Worksheet

Page = InputBox("Which week would you like to update?")

If Page = 1 Then
   Set ws = Worksheets("Week(1)")
   ws.Select
    For i = 2 To 100
        If ws.Cells(i, 9) = "2" Or ws.Cells(i, 9) = "3" Then
            ws.Range("B" & i & ":D" & i).Copy
            ThisWorkbook.Sheets("CoverPage").Select
            lastrow = ThisWorkbook.Sheets("CoverPage").Range("D1000").End(xlUp).Row + 1
            ThisWorkbook.Sheets("CoverPage").Range("B" & lastrow).PasteSpecial xlPasteValues
        End If
    Next i
End If
End Sub 
```

# c# - 数据网格中 wpf 组合框中的数据绑定

> ID：15688252
> 
> 赞同：0
> 
> 时间：2013-03-28T17:23:47.050
> 
> 标签：c#, wpf, binding, datagrid, combobox

我有一个与 of 相关`ComboBox`的问题`DataGrid`。数据正在绑定，但未`ComboBox`在绑定后显示。我的代码如下：

```
<my:DataGridTemplateColumn Header="UsgSrc">
    <my:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox Name="cbUsgSrc"  
                      ItemsSource="{Binding Source={StaticResource UsgSrcUOMS}}" 
                      SelectedValue="{Binding Path=UsgSrc}" 
                      SelectedValuePath="UtType" 
                      DisplayMemberPath="UtType">
            </ComboBox>
        </DataTemplate>
    </my:DataGridTemplateColumn.CellTemplate>
</my:DataGridTemplateColumn> 
```

静态资源代码：

```
UsgSrcUOMS.ObjectDataProvider UsageSrcUOMS = null;
UsageSrcUOMS = (ObjectDataProvider)FindResource("UsgSrcUOMS");
UsageSrcUOMS.ObjectInstance = objUtView;
Microsoft.Windows.Controls.DataGridCell cell = obj.GetCell(dgMtrHdr, J, 11);

if (cell != null)
{
    ContentPresenter panel = cell.Content as ContentPresenter; 
    if (panel != null)
    {
       ComboBox cmbUsUtilit = obj.GetVisualChild<ComboBox>(panel);
       cmbUsUtilit.IsEnabled = true;
       if(objUtView!=null) 
         cmbUsUtilit.ItemsSource = objUtView;cmbUsUtilit.SelectedIndex=2;
    }
} 
```

这是什么原因。请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:37:56.350

您是否尝试过将绑定更改为静态资源，类似的

```
<ComboBox Name="cbUsgSrc"  
          ItemsSource="{StaticResource UsgSrcUOMS}" 
          SelectedValue="{Binding Path=UsgSrc}" 
          SelectedValuePath="UtType" 
          DisplayMemberPath="UtType">
</ComboBox> 
```

# .net - 具有地理空间的 WCF 数据服务

> ID：15688254
> 
> 赞同：1
> 
> 时间：2013-03-28T17:23:54.983
> 
> 标签：.net, c#-4.0, entity-framework-5, wcf-data-services, geospatial

我正在尝试使用基于来自实体框架的模型的 WCF 数据服务。我有 2 个使用地理数据类型的实体，当我尝试访问该服务时，我收到以下错误：

> “StoreLocations”类型的属性“geoPoint”属于“地理”类型，它不是受支持的原始类型。

我在这里看到我过去的 CTP 版本没有任何支持在[数据服务中使用实体空间类型](http://blogs.msdn.com/b/astoriateam/archive/2011/10/17/using-geospatial-data.aspx)

但它似乎已在[当前版本](http://blogs.msdn.com/b/astoriateam/archive/2012/04/09/wcf-data-services-5-0-rtm-release.aspx)中得到纠正。

从我正在阅读的内容来看，WCF Data Services 5.3 和 Entity Framework 5.0 空间数据类型应该是兼容的，那么我错过了什么？我不需要数据服务中的属性，但我在基于相同模型的常规 WCF 服务中使用它们。我想避免为服务维护 2 个不同的模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:53:19.673

我为此写了一个workarround。解决方案是定义为两种类型定义通用数据模型的包装器。[http://www.odata.org/blog/how-to-use-sql-spatial-data-with-wcf-odata-spatial/](http://www.odata.org/blog/how-to-use-sql-spatial-data-with-wcf-odata-spatial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:48:54.143

不幸的是，WCF 数据服务中的空间类型系统和实体框架中的空间类型不兼容。

WCF DS 不支持在基础 EF 模型中使用空间类型。

# plsql - 动态执行字符串时出错

> ID：15688256
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:23:57.330
> 
> 标签：plsql, plsqldeveloper

我有一个 pl sql 代码，其中重复执行具有不同过程的包。当我编译它时，它编译时发出警告，但没有错误。这是代码：

```
for v_col_name in (select col_table_name from tbl_name)
loop    
   v_execute_string := 'package.'||v_col_name (par1 ,par2);
   execute immediate 'begin '|| v_execute_string; 'end;'
end loop 
```

**错误：**

> PROCEDURE abc 已编译警告：执行完成但有警告

检查时，它显示问题出在以下部分：

```
execute immediate 'begin '|| v_execute_string; 'end;' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:06:07.063

你有一个分号，它在 v_execute_string 和 'end;' 之间结束一行。

应该`execute immediate 'begin '|| v_execute_string || ' end;'`

除非 v_col_name 也是一个过程......你可能应该在之前写下一行：

```
v_execute_string := 'package.'||v_col_name||'(par1 ,par2)'; 
```

# android - 为什么作物没有运行？

> ID：15688259
> 
> 赞同：0
> 
> 时间：2013-03-28T17:24:03.003
> 
> 标签：android, crop

为什么相机启动但作物崩溃？我没有收到任何错误消息。我们关注[了 http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

```
package com.example.background;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;
public class MainActivity extends Activity implements OnClickListener   {

    //keep track of camera capture intent
    final int CAMERA_CAPTURE = 1;
    //keep track of cropping intent
    final int PIC_CROP = 2;
    //captured picture 
    private Uri picUri;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
      //retrieve a reference to the UI button
        Button captureBtn = (Button)findViewById(R.id.capture_btn);
        //handle button clicks
        captureBtn.setOnClickListener(this);

    }

    public void onClick(View v) {
        if (v.getId() == R.id.capture_btn) {
            try {
                //use standard intent to capture an image
                Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                //we will handle the returned data in onActivityResult
                startActivityForResult(captureIntent, CAMERA_CAPTURE);
            }catch(ActivityNotFoundException anfe){
                //display an error message
                String errorMessage = "Whoops - your device doesn't support capturing images!";
                Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
                toast.show();
            }

        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            //user is returning from capturing an image using the camera
            if(requestCode == CAMERA_CAPTURE){
                picUri = data.getData();
                performCrop();
            }
            //user is returning from cropping the image
            else if(requestCode == PIC_CROP){
                //get the returned data
                Bundle extras = data.getExtras();
                //get the cropped bitmap
                Bitmap thePic = extras.getParcelable("data");
                //retrieve a reference to the ImageView
                ImageView picView = (ImageView)findViewById(R.id.picture);
                //display the returned cropped image
                picView.setImageBitmap(thePic);
            }
        }
    } 
```

问题在这里吗？

```
 private void performCrop(){
        try {
            //call the standard crop action intent (the user device may not support it)
            Intent cropIntent = new Intent("com.android.camera.action.CROP");
                //indicate image type and Uri
            cropIntent.setDataAndType(picUri, "image/*");
                //set crop properties
            cropIntent.putExtra("crop", "true");
                //indicate aspect of desired crop
            cropIntent.putExtra("aspectX", 1);
            cropIntent.putExtra("aspectY", 1);
                //indicate output X and Y
            cropIntent.putExtra("outputX", 256);
            cropIntent.putExtra("outputY", 256);
                //retrieve data on return
            cropIntent.putExtra("return-data", true);
                //start the activity - we handle returning in onActivityResult
            startActivityForResult(cropIntent, PIC_CROP);
        }
        catch(ActivityNotFoundException anfe){
            //display an error message
            String errorMessage = "Whoops - your device doesn't support the crop action!";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:46:35.343

你的 picUri 变空了。这就是为什么它在裁剪捕获的图像时出错，因此，请参考此[链接](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)来裁剪图像。它对我有用，希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T18:18:37.140

我不知道这就是您所看到的，但不幸的是，此 Intent 转到了 AOSP 相机应用程序。并非所有设备都有它，更糟糕的是，它不再存在于棒棒糖中。

我目前正试图弄清楚谷歌的新图片编辑器应用程序中是否有等价物，或者我是否真的必须开始为此使用外部库......

可惜没有这样的标准功能了。

# c - 指令类型和计数

> ID：15688268
> 
> 赞同：2
> 
> 时间：2013-03-28T17:24:23.177
> 
> 标签：c, memory, count, instructions

1.  我需要找出（动态）（汇编）指令并计算我的 C 程序。我期望的输出类似于以下

    ```
    mov  200

    pop  130

    jne  48 
    ```

    我尝试`valgrind --tool=callgrind --cache-sim=yes --dump-instr=yes <my program name>`使用 Kcahcegrind 查看它。我确实找到了指令类型，但计数信息不存在。我想过滤输出以丢弃由于系统库等而产生的指令。

2.  我需要找出在某些特定功能和程序的某些部分中使用 malloc 分配的内存的地址和大小。我做了一些堆分析，但它给出了整个堆的大小。有什么建议吗？

3.  我想知道我的程序的函数访问了哪些内存位置。换句话说，我需要找出我的程序的内存访问模式。计算负载有帮助吗？如果是，那么我该如何计算负载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:16:34.127

看看objdump：

[http://sourceware.org/binutils/docs/binutils/objdump.html](http://sourceware.org/binutils/docs/binutils/objdump.html)

我会开始`objdump -S myprog`

# iphone - 创建 iOS 应用程序：使用本机邮件应用程序问题

> ID：15688273
> 
> 赞同：0
> 
> 时间：2013-03-28T17:24:36.907
> 
> 标签：iphone, ios

我正在创建一个使用本机 iOS 邮件应用程序的 iPhone 应用程序。是否有可能当用户在邮件应用程序中单击取消或发送时，它可以重定向回应用程序本身而无需重新打开它？

那么当用户访问应用程序的邮件部分时，它是否也可以在我的应用程序中以 webview 类型的方式显示邮件应用程序？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:27:18.233

不，您不能更改其他发布商应用程序的功能，尤其是 Apple 的。但听起来你可以通过使用[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)来完成你想做的事情。它允许您从您的应用程序中发送电子邮件，即无需将其发送到本机邮件客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:40:37.607

如果您正在做的只是发送电子邮件，您可以显示一个`MFMailComposeViewController`以允许用户在不离开应用程序的情况下发送电子邮件。

# android - 数据连接丢失时输出流上没有 IOException

> ID：15688280
> 
> 赞同：1
> 
> 时间：2013-03-28T17:24:47.453
> 
> 标签：android, post, timeout, httpurlconnection, 3g

我正在开发这个 android 应用程序，它基本上将图像上传到 web 服务。我有一个异步任务，我使用以下代码将文件发送到服务器：

```
protected Boolean doInBackground(byte[]... params) {
     HttpURLConnection connection = getConnection();
     BufferedOutputStream out = new BufferedOutputStream(connection.getOutputStream()); 
     Log.d("OutputStream", "stream created, about to write");
     out.write(params[0]);
     Log.d("OutputStream", "all bytes written");
     out.close();
} 
```

当然，这段代码被包装在一个 try catch 中，捕获 IOExceptions 等。问题是当我在看到第一个 logtext**后**中断连接时，永远不会抛出异常，或者只有在很长一段时间后才会抛出异常（大约 20分钟左右），这根本没有任何意义。

HttpURLConnection 设置如下：

```
urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setRequestMethod("POST");         
urlConnection.setRequestProperty("Content-Type", this.contentType);
urlConnection.setRequestProperty("User-Agent", String.format("custom-user-agent/%d", R.integer.version_code));
urlConnection.addRequestProperty("SessionID", this.sessionID);
urlConnection.setDoOutput(true);
urlConnection.setConnectTimeout(30000);
urlConnection.setReadTimeout(30000);
urlConnection.setChunkedStreamingMode(0);
urlConnection.setUseCaches(false);
urlConnection.connect(); 
```

有趣的是，这只发生在中断 EDGE/3G 连接时。当我中断 wifi 连接时，立即抛出异常（当然，这更方便）。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:25:02.543

不久前，我们也遇到过这个问题，但仅限于搭载 Android 2.3.4 的三星 Galaxy SII。所有其他设备都没有这个问题。没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:15:44.693

您不需要使用 urlConnection.connect()：当您执行 .getOutputStream() 时，连接是隐式打开的。此外，如果您制作了 .connect()，则无法在 .getOutputStream() 之前完成。此外，您必须设置 Content-Type 标头：

```
urlConnection.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 
```

# ruby-on-rails-3.1 - Rails - 多路对象创建

> ID：15688285
> 
> 赞同：0
> 
> 时间：2013-03-28T17:25:01.453
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2

问题：

我正在使用活动管理员来允许创建一个对象，让我们称之为@event。事件有很多字段，但不是问题，因为我们在后台。但是前端的用户也可以创建@event，这是应用程序的要求，@event对象以向导的形式逐步创建。

我的问题是，使用 wicked，我如何将字段验证逻辑分隔在向导所需的逻辑和后端所需的逻辑之间。主要区别在于向导需要根据当前向导步骤验证某些字段，而在后台，所有验证都适用于创建/保存。我正在关注[https://github.com/schneems/wicked/wiki/Building-Partial-Objects-Step-by-Step](https://github.com/schneems/wicked/wiki/Building-Partial-Objects-Step-by-Step) 和[http://railscasts.com/episodes/346-wizard-forms-with-wicked？视图=asciicast](http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=asciicast)。

我应该使用具有相同表的不同模型，一个用于后端，一个用于前端吗？在可以一次或逐步构建对象的此类问题中，最好遵循哪种模式或解决方案？

谢谢！

## **编辑**

Active admin controller 负责后台的对象创建，EventsController 和 EventStepsController 负责前台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:01:54.097

您不应为同一模型使用不同的模型，而应使用不同的控制器。

你可以有一个 'backend/event_controller.rb' 和一个 'frontend/event_controller' 作用于同一个对象但以不同的方式......

希望这有助于干杯

# android - 从 adb shell 获取系统属性“java.class.path”

> ID：15688286
> 
> 赞同：2
> 
> 时间：2013-03-28T17:25:01.600
> 
> 标签：android, adb, android-source

有人知道如何在 Android 中使用 adb shell 读取系统属性“java.class.path”吗？

**编辑：** `adb shell getprop java.class.path`什么都不返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:05:55.110

看来这个答案是对的。从文档： http: [//developer.android.com/reference/java/lang/System.html](http://developer.android.com/reference/java/lang/System.html)可以推断出`"java.class.path"`属性等于`"."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T05:24:04.347

使用命令“adb shell getprop”，查看所有可用的属性和值列表。

# paypal-sandbox - 贝宝沙盒挫折

> ID：15688287
> 
> 赞同：2
> 
> 时间：2013-03-28T17:25:04.613
> 
> 标签：paypal-sandbox, express-checkout

是否还有其他人对我对 Paypal 的沙盒系统感到沮丧？

去年，我为想要使用 PayPal 的客户开发了一个网站的一部分，这非常简单，大约是使用 Express Checkout 的 API 65.0 版。

他希望对站点的工作流程进行一些更改，因此我需要将 paypal 端置于测试模式并使用沙盒。

经过 2 周的彻底挫败后，PayPal（非常明显外包）的商家技术服务团队解决了导入旧沙箱帐户和为经典 API 创建凭据的问题。

我现在可以让网站从 SetExpressCheckout 命令获得成功响应，并且继续按钮现在正确转发到[https://api-3t.sandbox.paypal.com](https://api-3t.sandbox.paypal.com)，此时它要求我以沙盒用户身份登录我这样做了，然后我得到了一个令人头疼的屏幕，上面写着：

```
"You must first log in to use Paypal Sandbox features" 
```

然后是死胡同。

我已经在[http://developer.paypal.com](http://developer.paypal.com)网站上以正确的用户 ID 登录，我正在同一浏览器的另一个选项卡中运行我的网站。

我在 Mac OSX Mountain Lion 10.8 上使用 Safari，并且在 10.8 和 PC 上也尝试过 Chrome，没有任何变化。

我与 PayPal 的电话支持人员进行了交谈，他们无法在沙盒方面为您提供帮助，因此他们将您定向到 MTS 页面 ( [http://www.paypal.com/mts](http://www.paypal.com/mts) )，您可以在其中记录问题。我记录了这个问题并没有得到任何回复，还有一个厚颜无耻的调查要求我评论他们的表现。

当您登录 MTS 支持区域时，您会被拒绝，如果您尝试恢复您的用户名或密码，则电子邮件永远不会到达。

如果您尝试注册一个新帐户，表单会发现您的输入有问题，然后当您更正它时，它会告诉您该帐户已经存在。

其他人有同样的麻烦吗？自从他们进行更改后，是否有人设法以沙盒测试买家帐户的身份正确登录。

最后但相关的问题是，当前最新的 API 版本号是多少？很难找到那一点信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:53:48.353

在 paypal 的外包技术支持团队漫长的等待之后，有一个解决方案 - 它绝对不漂亮，但它就在这里。我们假设您已经进入开发人员区域并创建了一个企业帐户和一个买家帐户，并且您已将沙盒 API 凭据复制到您的应用程序中。

**最重要的：清除浏览器的缓存**

1) 通过以下方式登录您的开发者帐户区域：http: [//developer.paypal.com](http://developer.paypal.com)

以您的主要开发者帐户登录 - 现在这意味着您的实际贝宝帐户

2) 然后您可以打开另一个选项卡并登录沙盒站点： [https ://paypalmanager.sandbox.paypal.com/apiAccess.do?subaction=api](https://paypalmanager.sandbox.paypal.com/apiAccess.do?subaction=api)

以您的企业帐户登录

3）打开“另一个”选项卡（呻吟）并运行您的网站并完成付款流程，然后您将进入登录屏幕，然后您可以使用买家帐户登录并购买商品。

这有什么问题：

您必须首先以主要开发者帐户登录 developer.paypal.com，在他们将所有内容合并在一起之后，这可能是很多人的主要实时购买帐户。

这意味着您不能像以前那样轻松地向客户提供测试凭据，您可以创建一个业务和买家帐户并将这些详细信息提供给客户以测试他们的网站，现在这意味着您被迫做一个 join.me 或其他共享屏幕会话来向他们展示它的工作。

我在 2 周前向 PayPal MTS 提出了这个问题，但没有得到回应，它仍被标记为未解决。

我认为，如果有足够多的人将此作为投诉提出来，他们会解决的。如果没有以主要开发者身份登录，您将无法登录沙盒，并且企业帐户已链接到主要开发者帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:12:42.510

您是否尝试过删除/清除 cookie/缓存？这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:42:41.690

是的，很多人似乎都有同样的问题。PayPal 推出了一个新的开发者网站，似乎他们也无意中影响了沙盒环境。[或者也许开发人员站点和沙盒环境并不是真正分开的。]

不幸的是，我没有太多有用的建议。我目前正在测试具有新沙盒帐户的全新开发人员帐户（而不是导入帐户）是否会遇到与您描述的相同的问题。

# java - 每个连接的线程模型

> ID：15688299
> 
> 赞同：1
> 
> 时间：2013-03-28T17:25:37.053
> 
> 标签：java, multithreading, sockets, io, blocking

谈到每个连接的*线程*模型，每个连接都应该有一个线程。该线程用于从流中读取数据。但是，由于我使用的是*阻塞 I/O*，因此在尝试读取某些内容时我无法发送任何内容。

显然 Minecraft 每个连接使用两个线程，一个用于读取，一个用于写入。那是我也应该做的事情还是应该如何实施？

据我所知，发送数据也会阻塞，所以我不能只从tick线程发送，对吧？

所以再一次，我想知道的是：

*   我应该为每个连接设置一个读写线程吗？如果没有，那我应该如何实现呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:30:54.530

在一个简单的乒乓式网络对话框中，运行某种状态机的单个线程就足够了。

但是，如果需要异步发送和/或接收数据，而不是直接响应接收或发送的最后一条数据，则每个*方向*一个线程是明智的，并且无论如何都不是一个糟糕的解决方案。

Java 提供的非阻塞 IO[`NIO`](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/)有利于高性能、高吞吐量的应用程序，例如重负载的 Web 服务器等。在这些应用程序中，不希望每个连接有一个或两个*线程*，这可能总共有数千个线程在运行同时在服务器上。在客户端，使用非阻塞 IO 并没有什么好处，如果您不希望同时维护数百个连接，多线程是可行的方法。

# asp.net - 我可以使用什么功能（如果有）从一个数据库中的一个表中选择信息到另一个数据库中？

> ID：15688300
> 
> 赞同：1
> 
> 时间：2013-03-28T17:25:38.173
> 
> 标签：asp.net, sql, sql-server, sql-server-2008, tsql

好的...这就是我得到的。

表 A - 保存产品信息，最相关的是产品描述，我们称之为 A_DESC - A_DESC 每行包含几个单词，大约有 2500 行信息。

表 B - 目前还没有任何内容，但每行包含与表 A 相关的单个单词。表 B 由 B_ID（唯一主）、B_WORD（来自 A_DESC 的唯一单词）和 B_SEED（次数该词可以在表 A 中找到）。

我正在考虑编写一个 vb 脚本来将表 A 中的信息选择到记录集（或现在称为数据集）中，然后遍历每一行，按空格分割值以单独获取每个单词，然后将该单词插入表 B 仅当该单词尚不存在时，如果确实存在，则将 B_SEED 计数增加 1。

然后我想也许这可以通过管理工作室直接从 SQL Server 实现？在没有 vb 作为中间人的情况下，我是否可以编写一个函数来完成此任务？这个脚本每年只需要运行 2-3 次就可以用表 A 中的任何新词更新表 B。我觉得在 VB 中编写它会使用比我需要的更多的资源......

希望我已经确定了我想要完成的事情。

我会尝试在视觉上解释它......

```
Table A _
A_DESC = "Type 4 felt"
A_DESC = "Type 6 felt"

-->

Table B _
B_ID = 1  |  B_WORD = 'Type'  |  B_SEED = 2
B_ID = 2  |  B_WORD = '4'     |  B_SEED = 1
B_ID = 3  |  B_WORD = 'felt'  |  B_SEED = 2
B_ID = 4  |  B_WORD = '6'     |  B_SEED = 1 
```

哦，是的...*编辑*

我忘了补充，表 A 与表 B 位于不同的数据库中（虽然在同一台服务器上）

**第二次编辑**

尝试了@jhinkley 的答案 - 并收到以下错误：

```
Msg 166, Level 15, State 1, Line 1
'CREATE/ALTER FUNCTION' does not allow specifying the database name as a prefix to the object name.
Msg 137, Level 15, State 2, Line 10
Must declare the scalar variable "@s".
Msg 1087, Level 15, State 2, Line 12
Must declare the table variable "@t". 
```

使用以下代码：

```
CREATE FUNCTION ROOF.[dbo].[Split] (@sep VARCHAR(32), @s VARCHAR(MAX))

RETURNS @t TABLE
    (
        val VARCHAR(MAX)
    )   
AS
    BEGIN
        DECLARE @xml XML
        SET @XML = N'<root><r>' + REPLACE(@s, @sep, '</r><r>') + '</r></root>'

        INSERT INTO @t(val)
        SELECT r.value('.','VARCHAR(5)') as Item
        FROM @xml.nodes('//root/r') AS RECORDS(r)

        RETURN
    END

truncate table website.dbo.TEXT_WORDS

insert into website.dbo.TEXT_WORDS(T_WORD,T_SEED)
select val,count(val)
from ROOF.dbo.IV00101 
        cross apply ROOF.dbo.Split(' ', replace(ROOF.dbo.IV00101.ITEMDESC,'&','&amp;'))
group by val 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:41:42.097

这是一个基于此函数的用于拆分记录[T-SQL 的简短脚本：与字符串连接相反 - 如何将字符串拆分为多个记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco#2837662)

```
CREATE FUNCTION [dbo].[Split] (@sep VARCHAR(32), @s VARCHAR(MAX))

RETURNS @t TABLE
    (
        val VARCHAR(MAX)
    )   
AS
    BEGIN
        DECLARE @xml XML
        SET @XML = N'<root><r>' + REPLACE(@s, @sep, '</r><r>') + '</r></root>'

        INSERT INTO @t(val)
        SELECT r.value('.','VARCHAR(5)') as Item
        FROM @xml.nodes('//root/r') AS RECORDS(r)

        RETURN
    END

truncate table tableB

insert into tableB (B_WORD,B_SEED)
select val,count(val)
from tableA 
        cross apply dbo.Split(' ', replace(A_DESC,'&','&amp;'))
group by val 
```

需要 sql 2005 或更高版本。我假设 B_ID 列没有作为外键的一部分被引用，因此是 truncate table 命令。删除所有记录并再次插入它们比进行更新/合并要容易得多。

# c# - 如何使用 JavaScript 找到预定义的按钮类 Windows 8 应用程序

> ID：15688305
> 
> 赞同：2
> 
> 时间：2013-03-28T17:25:54.393
> 
> 标签：c#, javascript, html, microsoft-metro, windows-store-apps

如何使用 JavaScript 找到预定义的按钮类 Windows 8 应用程序？

例如

```
 <button id="playlistBackButton" class="win-backbutton">Back</button> 
```

“win-backbutton”它是一个预定义的后退按钮类。我需要所有其他预定义的按钮类，例如下一个、播放、上一个按钮。我搜索了整个项目，但找不到课程。有谁知道按钮类在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:56:38.197

`win-backbutton`您将在项目的两个文件中找到 的定义。有浅色和深色主题的样式。

这些文件位于此处：

![在此处输入图像描述](../Images/bafff79779e24327066e301bed8a65d1.png)

```
/References/Windows Library for JavaScript 1.0/css/ui-dark.css
/References/Windows Library for JavaScript 1.0/css/ui-light.css 
```

这些文件似乎没有定义任何类，例如 Next、Play、Previous。

但是，看起来类定义只使用`Segoe UI Symbol`字体中的符号。您应该能够做同样的事情并使用相同的字体定义自己的样式（下一个、播放、上一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:31:26.067

你有没有试过这个字体[IcoMoon.ttf](https://github.com/aozora/bootmetro/blob/master/content/font/IcoMoon.ttf)。在此字体中包含所有 Metro 风格图标并使用您自己的图标

# optimization - 慢函数的高维函数优化

> ID：15688306
> 
> 赞同：2
> 
> 时间：2013-03-28T17:25:54.823
> 
> 标签：optimization, genetic-algorithm, multidimensional-array, evolutionary-algorithm

我不确定这是否是问这个问题的正确地方，但由于它似乎也不适合数学 SX，所以我决定在这里发帖。

我有一个非常高维度（250+）的函数，需要找到最佳值或至少一些近似值。

我知道 PSO、差分进化、模拟退火等方法。在我的具体情况下，问题是计算单个函数值可能需要几个小时。因此，需要一种更智能的方法。

第一个直觉是减少尺寸，这就是我目前正在做的事情。但我想知道是否有一些关于描述工作方法的类似问题的已发表论文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:34:42.220

您可以使用表面响应模型来近似您的函数：

*   您使用函数的首次评估来构建近似模型，
*   然后您使用近似模型作为评估函数，
*   某些评估必须使用真实函数执行，您将使用结果来优化您的模型，等等。

# colors - 设置处理颜色会影响整个窗口颜色

> ID：15688308
> 
> 赞同：0
> 
> 时间：2013-03-28T17:25:55.973
> 
> 标签：colors, processing, hsb

我正在制作一个处理应用程序，其中一些数据被插入到与主线程不同的线程中。在这个新线程中，我有`color aColor = color(255-(255*_hue[0]), 255, 255);`. （配色方案是 HSB）。

这条线导致屏幕闪烁红色。似乎这条线（*从未*`aColor`使用过谁的变量）正在导致应用程序窗口中发生一些严重的颜色变化。没有图像被绘制或任何东西。

 *我想知道这是否是某种处理错误，是否有解决方案，或者是否有解决方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:08:38.970

无论您是否使用该`aColor`变量，您都必须使用循环中`fill()`的某个位置。`draw()`

默认情况下 fill() 全局工作：在 fill() 调用之后绘制的所有后续形状都将具有该颜色。

要隔离 fill() 调用，使其影响局部绘制的形状，而不是全局绘制，您需要在[pushStyle()](http://processing.org/reference/pushStyle_.html) /popStyle() 调用中隔离此类 fill() 调用。

```
fill(192,0,0);//set global fill to red
rect(0,0,50,50);

pushStyle();
fill(0,192,0);//set local fill to green
rect(50,0,50,50);
popStyle();

rect(50,50,50,50);//draw using last global fill: red 
```*

# c# - 将 Kinect 中的多个文本框数据保存到一个文本文件中

> ID：15688309
> 
> 赞同：0
> 
> 时间：2013-03-28T17:26:02.460
> 
> 标签：c#, wpf, kinect

我是 C# 编程新手，已经开始使用 Kinect 构建 WPF 应用程序。我已经设法跟踪骨架并在文本框中显示每个关节 X 和 Y 坐标，但我想将所有数据保存到桌面上的一个文本文件中以供分析。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:34:06.457

[Kinect Toolbox](http://kinecttoolbox.codeplex.com/)提供了一种机制来保存骨架流。

如果你想自己滚动——数据只是一堆对象，包含 3 个点。只需将输入的点存储到 a 中`List`，然后使用[XML Serialization](https://www.google.com/search?q=xml%20serialization%20c#)将数据输出到文件中。

# elasticsearch - 文档版本控制 Elasticsearch：如何比较不同的文档版本？

> ID：15688311
> 
> 赞同：17
> 
> 时间：2013-03-28T17:26:06.367
> 
> 标签：elasticsearch

刚刚发现 Elasticsearch 具有文档版本控制功能。惊人的！真的。

但是，比较文档的不同版本并提取所有差异的正确方法是什么？是否有可用的查询，或者我必须在业务逻辑中这样做吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-28T17:49:50.603

elasticsearch 默认跟踪`_version`字段内索引文档的版本。这意味着第一次索引文档时，它将获得版本 1，并且每次更新它时，它的版本都会递增。

这并不意味着 elasticsearch 保留文档的所有版本。

该版本非常方便，尤其是在您需要执行乐观锁定时。假设您获得了一个文档并且想要更新它，您可以确保您更新的是文档的同一版本，而不是可能由并发更新生成的其他版本（这可能发生在您的获取和更新之间） .

您可以查看[此博客](http://www.elasticsearch.org/2011/02/08/versioning/)以了解更多信息并在实践中看到它。

# javascript - 如何使用 AngularJS 从 JSON 提要中填充选择下拉列表？

> ID：15688313
> 
> 赞同：63
> 
> 时间：2013-03-28T17:26:10.347
> 
> 标签：javascript, angularjs, drop-down-menu

我一直在努力寻找示例，但根本找不到任何东西。我唯一知道的是我可以使用 http 模块来获取我的数据。这是我目前正在做的事情，但它是用 Knockout 编码的。有人可以给我一些关于如何使用 AngularJS 重新编码这个功能的建议吗？

HTML

```
<select id="testAccounts" 
   data-bind="options: testAccounts, optionsValue: 'Id', optionsText: 'Name', optionsCaption: 'Select Account', value: selectedTestAccount">
</select> 
```

Javascript

```
<script type='text/javascript'>
    $(document).ready(function () {

        var townSelect = function () {
        var self = this;
        self.selectedTestAccount = ko.observable();
        self.testAccounts = ko.observableArray();
        var townViewModel = new townSelect();
        ko.applyBindings(townViewModel);

        $.ajax({
            url: '/Admin/GetTestAccounts',
            data: { applicationId: 3 },
            type: 'GET',
            success: function (data) {
                townViewModel.testAccounts(data);
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-03-28T17:35:05.623

正确的方法是使用[`ng-options`指令](https://docs.angularjs.org/api/ng/directive/ngOptions)。HTML 看起来像这样。

```
<select ng-model="selectedTestAccount" 
        ng-options="item.Id as item.Name for item in testAccounts">
    <option value="">Select Account</option>
</select> 
```

JavaScript：

```
angular.module('test', []).controller('DemoCtrl', function ($scope, $http) {
    $scope.selectedTestAccount = null;
    $scope.testAccounts = [];

    $http({
            method: 'GET',
            url: '/Admin/GetTestAccounts',
            data: { applicationId: 3 }
        }).success(function (result) {
        $scope.testAccounts = result;
    });
}); 
```

您还需要确保 Angular 在您的 html 上运行并且您的模块已加载。

```
<html ng-app="test">
    <body ng-controller="DemoCtrl">
    ....
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-28T17:28:34.240

```
<select name="selectedFacilityId" ng-model="selectedFacilityId">
         <option ng-repeat="facility in facilities" value="{{facility.id}}">{{facility.name}}</option>
     </select> 
```

这是一个关于如何使用它的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-24T14:49:08.073

在我的 Angular Bootstrap 下拉菜单中，我使用 ng-init 初始化 JSON 数组 (vm.zoneDropdown)（您也可以在指令模板中使用 ng-init），然后在自定义 src 属性中传递数组

```
<custom-dropdown control-id="zone" label="Zona" model="vm.form.zone" src="vm.zoneDropdown"
                         ng-init="vm.getZoneDropdownSrc()" is-required="true" form="farmaciaForm" css-class="custom-dropdown col-md-3"></custom-dropdown> 
```

控制器内部：

```
vm.zoneDropdown = [];
vm.getZoneDropdownSrc = function () {
    vm.zoneDropdown = $customService.getZone();
} 
```

在 customDropdown 指令模板中（请注意，这只是引导下拉菜单的一部分）：

```
<ul class="uib-dropdown-menu" role="menu" aria-labelledby="btn-append-to-body">
    <li role="menuitem" ng-repeat="dropdownItem in vm.src" ng-click="vm.setValue(dropdownItem)">
        <a ng-click="vm.preventDefault($event)" href="##">{{dropdownItem.text}}</a>
    </li>
</ul> 
```

# concurrency - 如何将列附加到 Cassandra 中的特定行

> ID：15688316
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:26:21.073
> 
> 标签：concurrency, cassandra

似乎每列都需要一个名称，并且将按照您给它的名称所暗示的顺序存储。

如果我不关心名称，只要它附加到现有列（这样它就会出现在插入发生时存在的所有列之后）怎么办？

实际上，我要求一个原子的 auto_increment 列名，这样我可以保证并发尝试追加列不会踩到彼此的脚趾，并且都出现在列列表的末尾附近（所以 UUID 名称不是t真的想要我想要）。

用例实际上是一个日志（对于一个特定的键，所以我希望它保持在一个特定的行中），它​​将相对很少更新，但可以同时完成。如果我只使用时间戳作为列名，那么使用相同时间戳和数据丢失的两个并发编辑的可能性很小，这是我不希望发生的。

在卡桑德拉这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:32:28.980

您应该使用 TimeUUIDType。它是按时间排序的，包括：

*   时间戳（分辨率 100 ns）
*   避免碰撞的随机组件（概率非常高）
*   生成器的 MAC 地址，以避免机器之间的冲突。

如果您想始终获得最新的列，您可以使用 ReversedType 将其包装以提高效率。

# php - PHP move_uploaded_file() 不能与 safari 一起使用？

> ID：15688321
> 
> 赞同：0
> 
> 时间：2013-03-28T17:26:47.430
> 
> 标签：php, safari

我有这段代码：

```
 for($d = 0 ; $d < count($_FILES['uploadedfile']['name']) ; ++$d)
  { $imagenamecount = $d + 1;
    $imagedetails = pathinfo( $_FILES['uploadedfile']['name'][$d]);
    $finalpathfortempimagefile = $pathfortempimagefile."image"."$imagenamecount".".".$imagedetails['extension'];
    if(!move_uploaded_file($_FILES['uploadedfile']['tmp_name'][$d], $finalpathfortempimagefile))
    { 
      header('Location: http://localhost/stuff.php?ue=xx');
    }
  } 
```

它的主要部分围绕使用`move_uploaded_file()`重命名和传输多个上传的图像。我在 Chrome、Firefox 和 Opera 上都没有问题。但是当我在 Safari 上测试它时，它`header('Location: http://localhost/stuff.php?ue=xx');`被激活了。（还没在IE上测试过，打不开。）

我在上面提供的代码之前有处理上传文件（检查扩展名等）的代码，但它没有问题，没有错误或其他任何问题。Safari 的文件上传表单也没有问题：

```
<form enctype="multipart/form-data" action="post.php" method="POST">
<input id="uploadInput" name="uploadedfile[]" type="file" multiple>
<input class="submit_css" type="submit" value="PREVIEW POST">
</form> 
```

所以我认为它确实与 move_uploaded_file() 函数有关。有任何想法吗？

额外的：

用 Safari 再次测试，但这次只有 1 张图片，测试成功，没有错误。

再次测试它，但多次上传（2 和 5），测试不成功，它被重定向。

在其他浏览器上尝试了这两个测试，测试成功。

没有在IE上尝试过，但仍然无法打开它。

* * *

编辑

为了这篇文章的任何未来观众的利益。

这不是 move_uploaded_file() 的 php 问题 - 我刚刚确认这实际上是 html5 多重属性上的 SAFARI v5.1.+ BUG。[这里](https://stackoverflow.com/questions/15766644/any-workarounds-for-the-safari-html5-multiple-file-upload-bug)信息很少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:52:49.570

这行得通吗？

```
<?php

$finalpath = $_SERVER['DOCUMENT_ROOT'].'/image/';

$errors = array();

foreach ($_FILES["uploadedfile"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES["uploadedfile"]["tmp_name"][$key];
        $name = $_FILES["uploadedfile"]["name"][$key];
        if(!move_uploaded_file($tmp_name, "$finalpath.$name")){
          //header('Location: /stuff.php?ue=xx');
          $errors[]="Problem moving file to $finalpath.$name";
        }
    }
}

if(empty($errors)){
  //success
} else {
  print_r($errors);
}
?> 
```

# android - 离开 AsyncTask 后使 ArrayList 可用于其他类/活动

> ID：15688322
> 
> 赞同：0
> 
> 时间：2013-03-28T17:26:47.543
> 
> 标签：android, android-asynctask

我是 Android 开发的新手，在理解如何在 Android 中处理普通的旧 java 对象/变量/容器时遇到了一些麻烦。在完成 AsyncTask 或离开 Activity 后，它们似乎不再可用。

例如：通过 AsyncTask 我获取了一些数据，将其从另一个类推送到 ArrayList 中（工作得很好 - 我可以在我的地图视图上看到结果；-)）并希望它可用于其他类/活动。

我该如何处理这个问题/在 Android 中有什么好的做法？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:31:35.670

有关存储数据的方法，请参见此处 [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

第一个答案显示了如何在活动之间传递数据的示例如何 [在 Android 应用程序中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:32:54.843

> 我该如何处理这个问题/在 Android 中有什么好的做法？

如果你想通过活动传递原始类型和对象，你有几个选择：

*   [`putExtra()`](http://developer.android.com/reference/android/content/Intent.html#putExtra)方法的用法[`Intent`](http://developer.android.com/reference/android/content/Intent.html)- 您也可以传递原始数据类型和对象

*   将原始数据类型和对象包装到[`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)并传递给[`Intent`](http://developer.android.com/reference/android/content/Intent.html)

但是，如果您想通过活动传递对象，则它们必须实现[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)或[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)接口。

> 在完成 AsyncTask 或离开 Activity 后，它们似乎不再可用。

是的。如果您在 Activity 类中定义和初始化了变量、对象，它们将与 Activity 一样存在。因此，如果您想保留一些数据，您还有几个选择：

*   [您可以使用SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)持久化原始类型和引用类型（int、double、String 等），它们作为键值对工作。

*   为了存储对象，您可以创建它们的“副本”，`SQLite`其中对象显示为表，其中对象的属性等于数据库中的列。

*   如果您的对象实现[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)接口，您可以将它们序列化为二进制文件，并在您想要反序列化它们以供使用时。

# joomla1.5 - 如何在 PHP5.4 上运行 Joomla 1.5？

> ID：15688326
> 
> 赞同：2
> 
> 时间：2013-03-28T17:26:59.980
> 
> 标签：joomla1.5

我有几个 J1.5 站点需要很快在 PHP5.4 上运行。（是的，我知道 - 升级到 J2.5），但是鉴于我拥有的时间框架，定制的数量使得它不可能做到这一点。

我意识到升级后我们需要从上到下测试站点，但是 PHP 错误的数量似乎永远不会直接结束。如果不抑制所有错误，可能需要几个月才能让它们运行，哈哈。

有谁知道应该/可以做出任何“一般” php 设置或“全局”Joomla 更改以使这项努力至少有点可以忍受？

本着 stackoverflow 的精神，我应该提到我已经尝试了各种 error_reporting 变体，但发现抑制错误会使其“运行”，但没有任何“工作”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:59:11.330

使用 PHP 5.4 和 MySQL 5 运行低至 1.5.15 的 Joomla 版本似乎没有问题（虽然没有安装花哨的附加组件）。也许您报告的错误主要是由附加组件引起的？您是否尝试停用模块/插件？

运行 Joomla 1.5 的几个遗留项目无需更改配置。到目前为止，我必须管理/迁移。我刚刚切换到 PHP 5.4 作为全局 php 版本（提供程序 1&1）。

如果您在 PHP 4 和 5 并行运行时遇到问题，您可能需要将其添加到您的 htaccess 以确保正在使用 PHP 5：

```
# for PHP 5.2
AddType x-mapp-php5 .php
AddHandler x-mapp-php5 .php 
```

或者专门针对 PHP 5.4：

```
# for PHP 5.4
AddType x-mapp-php6 .php
AddHandler x-mapp-php6 .php 
```

**警告语：** Joomla 1.5*真的*已经过时了。如果 Google Webmasterplan 检测到网站仍在运行 1.5 版，则会向网站所有者发出警告。Youtube 上有/曾经有视频教程展示了如何破解它。所以最好尽快更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T00:09:11.630

我不确定自从这个答案首次被接受以来是否发生了变化，但根据 Joomla.org ，joomla1.5 与 php5.4 不兼容

来源： [http ://docs.joomla.org/Joomla_1.5_won't_work_on_PHP_5.4](http://docs.joomla.org/Joomla_1.5_won%27t_work_on_PHP_5.4)

此页面日期为 2013 年 4 月 29 日

# mysql - >、<、<>、= 内连接条件的运算符

> ID：15688328
> 
> 赞同：4
> 
> 时间：2013-03-28T17:27:07.217
> 
> 标签：mysql, sql, sql-server-2008, subquery, inner-join

我的老板把这段代码扔给我了，我很难理解内部连接的最后一个 ON 语句是如何工作的。我认为他也不完全理解它（但它完成了工作）。真的只是对了解有关 SQL 工作原理的更多信息感兴趣。非常感谢！

这是 On 声明

```
and (A.Submitted_Date > X.Submitted_Date))) 
```

这是查询

```
 SELECT AA.ID, AA.Submitted_Date as Date_Status      
    FROM Report as AA 
    where AA.Submitted_Date in
    --START
       (
        SELECT X.Submitted_Date
        FROM Report as A 
        inner join  
       --Start Find All Dates Submitted
        (
         SELECT [ID],[Submitted_Date]
         FROM Report
          where not(Submitted_Date is null and  Cleared_Date is null)
          group by ID, Submitted_Date) as X 
        --End Find all Dates  Submittd
     --below is the conditions of the join

    ON A.ID = X.ID 
    and A.ID= AA.ID

    --THIS IS THE CONDITION I AM CONFUSED ABOUT!!!!
    and (A.Submitted_Date > X.Submitted_Date)))

    group by X.Submitted_Date)

   and not AA.Submitted_Date is null 
   group by AA.ID, AA.Submitted_Date 
```

这是表 A 中的日期示例

```
2012-11-27 00:00:00.000
2012-11-27 00:00:00.000
2012-11-27 00:00:00.000
2012-12-10 00:00:00.000
2012-11-27 00:00:00.000
2012-11-27 00:00:00.000
2012-11-29 00:00:00.000
2012-12-05 00:00:00.000
2012-12-12 00:00:00.000 
```

这是来自表 X 的日期样本

```
2012-11-27 00:00:00.000
2012-11-29 00:00:00.000
2012-12-05 00:00:00.000
2012-12-10 00:00:00.000
2012-12-12 00:00:00.000 
```

这是最后一个条件之前的结果

```
2012-11-27 00:00:00.000
2012-11-29 00:00:00.000
2012-12-05 00:00:00.000
2012-12-10 00:00:00.000
2012-12-12 00:00:00.000 
```

这是 A.Sub > X.Sub 的结果

```
2012-11-27 00:00:00.000
2012-11-29 00:00:00.000
2012-12-05 00:00:00.000
2012-12-10 00:00:00.000 
```

我很困惑为什么这些日期会出现。A 和 X 之间的比较是什么？A 中的值是否总是与 X 相同，因此没有最终数据？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:00:51.140

加入条件正在做两件事。首先，它确保它`x.Submitted_Date`不为空。这种直接与`whre`上面的陈述相矛盾。在该语句中，`Submitted_Date`如果不为空，则可能为 NULL `Cleared_Date`。

对 not NULL 的检查只是被使用。联接是内部联接，因此仅`x`保留`a`匹配的行。当 时`x.Submitted_Date is null`，比较结果`A.Submitted_Date > X.Submitted_Date`为 FALSE（实际上为 NULL，但在此上下文中 NULL 等效于 FALSE）。

其次，它确保*稍后*对于`Report`给定的`id`. 这是通过相同的比较发生的： `A.Submitted_Date > X.Submitted_Date`表示在`A`than中有一个较晚的记录`X`。条件对 的所有值都为真`Submitted_Date`，最大值除外。

因此，简而言之，条件是采用除最新日期之外的所有提交的日期值。

条件可能等同于：

```
where AA.Submitted_Date <> (select MAX(x.Submitted_Date) from Report where x.id = AA.id) 
```

我说*可能*是因为这`Cleared_Date`让人怀疑。但是，我认为它们是相同的。只要不为 NULL，`where`就会满足原始查询中的子句。`x.Submitted_Date`清除日期可能会带来额外的行，但这些行的提交日期为空。所以，除了最大的提交日期外，它正在拉所有的东西。

我猜这个逻辑再一次复杂了，这是一个“简化”的版本，可以进一步简化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:06:09.333

如果您的数据包含 ID 字段会更好。我假设 ID 不是唯一的。此外，我怀疑您选择的样本对于了解情况并不理想。

考虑到您的问题的这些限制，我认为让您感到困惑的实际上是条件 A.ID = X.ID。这就是让您认为日期相同的原因，因此不应该有数据。

如果您有报告表：

```
1 2012-11-27
1 2012-11-29 
```

然后交叉连接创建：

```
1 2012-11-27 1 2012-11-27
1 2012-11-27 1 2012-11-29
1 2012-11-29 1 2012-11-27
1 2012-11-29 1 2012-11-29 
```

通过条件 A.ID = X.ID 然后 A.date > X.date 将返回

```
1 2012-11-29 1 2012-11-27 
```

编辑：删除“根据样本，记录 2012-11-27 不应该是结果的一部分。” 因为正在获取的日期字段来自 X，而不是来自 A。

# php - “php_connect_nonb() failed: Operation now in progress (115)”间歇性发生

> ID：15688331
> 
> 赞同：17
> 
> 时间：2013-03-28T17:27:08.887
> 
> 标签：php, linux, ftp

我们通过 FTP 使用 PHP cron 作业将一些文件发送给第三方。

但是有时我们会收到以下错误：

```
ErrorException [ 2 ]: ftp_put(): php_connect_nonb() failed: Operation 
now in progress (115) ~ MODPATH/fileop/classes/Drivers/Fileop/Ftp.php [ 37 ] 
```

当我说“有时”时，我的意思正是如此；大多数时候它都很好，但大约五分之一的时候我们会得到这个错误。这与文件本身无关，因为如果我们再试一次，它们会很开心。

我们在网上发现了类似的问题——与带有 NAT 设备[的 PHP 中的错误](http://www.elitehosts.com/blog/php-ftp-passive-ftp-server-behind-nat-nightmare/)或与防火墙配置有关，但再次暗示，如果是这种情况，它将*永远无法*工作。

那么，为什么这有时会起作用，而其他时候却不起作用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2019-12-24T11:59:33.687

```
ftp_set_option($ftpconn, FTP_USEPASVADDRESS, false); 
```

这行代码在设置连接的被动之前`ftp_pasv($ftpconn, true);`

解决了我的问题

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-18T10:06:48.167

[FTP(S) 使用随机端口建立数据连接](http://www.slacksite.com/other/ftp.html)；间歇性成功率表明客户端和/或服务器计算机上的防火墙并非允许所有端口。传入 (PASV) 数据连接的端口范围可以在 FTP 服务器中设置。

[这个页面](http://www.mdjnet.dk/ftp.html)有一个很好的总结：

> 简单的方法是简单地允许 FTP 服务器和客户端无限制地通过防火墙进行访问，但是如果您想限制他们对“已知”端口的访问，您必须了解 4 种不同的情况。
> 
> 1) 应该允许 FTP 服务器接受到端口 21 的 TCP 连接，并允许从端口 20 到任何（远程临时）端口的 TCP 连接。
> 
> 2) 应该允许 FTP 服务器接受到端口 21 的 TCP 连接，并且也接受到任何临时端口的 TCP 连接！
> 
> 3) 应该允许 FTP 客户端与端口 21 建立 TCP 连接，并接受从端口 20 到任何临时端口的 TCP 连接。
> 
> 4) 应该允许 FTP 客户端与端口 21 建立 TCP 连接，以及与任何其他（远程临时）端口建立 TCP 连接！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T15:49:57.120

因此，在对我的 FTP 服务器进行一些调查并阅读您提供的elitehosts.com 链接之后，我正在写这个答案。

我正在使用 FileZilla FTP 服务器，我必须输入一个特定设置才能使其工作。进入服务器设置，有一个名为“被动模式设置”的区域。在该对话框中，有一个名为“IPv4 特定”的区域，在该区域内有一个标记为“被动模式传输的外部服务器 IP 地址：”的设置。这是一个单选按钮选择集，它位于“默认”上，但由于 FTP 服务器是 NAT 的，我将单选选项从“默认”更改为“使用以下 IP：”并输入面向外部的 IP我的 ISP 提供的网关地址。

在我设置之后，它起作用了！不太确定您的 FTP 服务器是否经过 NAT，但我想我会在此线程上提供答案，因为它似乎相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-15T15:16:01.523

除了 Cees 的回答之外，我还在 ec2 上运行 vsftp 并且不得不注释掉 listen_ipv6=YES，listen=YES 然后“service vsftpd restart”。

虽然文档说它也会监听 ipv4，但它不是，这解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-30T22:33:00.043

对我来说，我所要做的就是删除`ftp_pasv( $ftpconn, true );`并且一切正常。我还不确定为什么，但我正在努力找出答案，当我找到背后的原因时，我一定会回来的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-13T11:56:06.673

这应该是 jj_dev2 评论下的评论，但由于声誉问题，我无法添加。但也许它会对某人有所帮助，所以我把它贴在这里。

我们遇到了与原始帖子中描述的相同的问题。在我们的案例中，它与许多客户合作——除了一个。

jj_dev2 评论中的解决方案确实对我们有用。所以我们调查了`ftp_set_option($conn, FTP_USEPASVADDRESS, false)`实际做了什么。并据此我们发现实际上客户的 FTPS 服务器配置错误。

作为对 PASV 命令 ( `ftp_pasv($conn, true)`) 的响应，FTP 服务器返回一个 IP 地址，PHP FTP 客户端随后将使用该地址进行数据传输。在我们的例子中，FTP 服务器返回的是一个内部 IP 地址，而不是我们连接的公共 IP 地址。客户必须修复他们的 FTP 服务器设置，以便 FTP 服务器在 PASV 命令响应中发送外部 IP 地址。

# java - 应该为使用 Hibernate 的主键选择哪种数据类型，Long 或 Integer？

> ID：15688334
> 
> 赞同：1
> 
> 时间：2013-03-28T17:27:16.780
> 
> 标签：java, hibernate, pagination

目前，我正在使用 Spring 3.2.0、Hibernate 4.2.0.CR1 和 Oracle 10g 使用 Web 应用程序。

Oracle 表中的主键是序列生成的，并且它们都已映射`Long`到 Hibernate 实体中的类型。在实践中，几乎不可能有一个没有分页的系统。

我通常使用以下方法从数据库表中的行列表中检索子列表。

```
sessionFactory.getCurrentSession()
              .createQuery("from Entity order by entityId desc")
              .setFirstResult(currentPage)
              .setMaxResults(pageSize)
              .list(); 
```

和方法只接受一个类型作为它们`setFirstResult()`的参数。当然，该类型对于该方法来说已经绰绰有余了，但是如果某人在表中有很多行并且他/她需要检索一个子列表，比如说**从 Beyond 开始**的 50 行，该怎么办？`setMaxResults()``int``int``setMaxResults()`**`Integer.MAX_VALUE`**

 **假设给定表中有多个`2,147,483,647`行。当然，我可以理解给定的值`2,147,483,647`是一个很大的数字，但是`Long`如果`setFirstResult()`方法只接受`int`? 即使使用可以接受以外的标准 API，我也看不到此方法的任何重载版本`int`，同样在现实中很少看到没有分页的系统。**

# jquery - jQuery this() 问题

> ID：15688335
> 
> 赞同：2
> 
> 时间：2013-03-28T17:27:17.807
> 
> 标签：jquery

[小提琴](http://jsfiddle.net/watson/Axsjg/)

我一定是在做一些愚蠢的事情，但我真的想不通，为什么这个脚本不是 console.log(ing)`<p>`标记中的文本？

HTML：

```
<div>
    <label>Display Name:</label>
    <div>
        <p>The room that its in.</p>
        <span class="edit"></span>
    </div>
</div> 
```

jQuery：

```
if ($('span.edit').length > 0) {
    $(this).click(function(){
        var elem = $(this).prev();
        var text = elem.text();
        console.log(text);
        elem.html('<input type="text">' + text + '</input>');
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:29:26.067

JavaScript 不是块作用域；你期望`this`成为什么？

固定的：

```
if ($('span.edit').length > 0) {
    $('span.edit').click(function(){
        var elem = $(this).prev();
        var text = elem.text();
        console.log(text);
        elem.html('<input type="text" value="' + text + '" />');
    });
} 
```

**编辑：**更新`html()`内容以纠正输入错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:30:47.303

我的猜测是`this`应该指的是`span.edit`选择器。

不是这种情况。

您无需检查是否`span.edit`有长度。如果没有匹配项，click 事件将不会绑定到任何元素。

因此，您的代码可以像这样简化：

```
$("span.edit").click(function(){
     var elem = $(this).prev();
     var text = elem.text();
     console.log(text);
     elem.html('<input type="text">' + text + '</input>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:32:17.020

因为这不是指跨度。但是在下面的代码中，它将绑定到跨度：

[**更新的小提琴**](http://jsfiddle.net/Axsjg/2/)

```
$('.edit').click(function(){
    var elem = $(this).prev('p');
    var text = elem.text();
    elem.html('<input type="text">' + text + '</input>');
}); 
```

此外，您不必检查长度，因为跨度始终存在于页面上（至少在小提琴中）。此外，如果它不存在，则该事件将不会被绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:33:48.107

该`if`语句是不必要的——如果没有这样的元素，点击处理程序什么也不做。将处理程序放在内部`if`也不会更改范围`this`以匹配该元素。只需直接针对`<span>`：

```
$('span.edit').click(function(){
    var elem = $(this).prev();
    var text = elem.text();
    console.log(text);
    elem.contents().unwrap().wrap('<input type="text">');
}); 
```

# html - Google Chrome PC 中的表格单元格失去边框

> ID：15688336
> 
> 赞同：5
> 
> 时间：2013-03-28T17:27:17.797
> 
> 标签：html, css, google-chrome

以下代码在所有浏览器中 -*除了 PC 上的 Google Chrome 最新版*- 在 tbody 表格单元格上显示边框，如 CSS 中指定的那样。

Chrome PC，显示 thead 边框，但不显示 TD 边框。为什么？它是 Chrome 中的错误，还是我的 HTML/CSS 中的错误？

这是一个复制它的[jsFiddle](http://jsfiddle.net/EBBdJ/5/)：

```
<table width="505" cellspacing="0" cellpadding="0" border="0">
<tbody>
    <tr>
        <td>Testing</td>
        <td>123</td>
    </tr>
    <tr>
        <td>Testing</td>
        <td>456</td>
    </tr>
</tbody>
<thead>
    <tr>
        <th>foo</th>
        <th>bar</th>
    </tr>
</thead> 
```

```
table {
width:736px;
border-collapse: collapse;
thead {
    border-top: 2px solid #aaaaaa;
    tr {
        th {
            border: 0;
            padding: 12px 5px;
        }
    }
}
tbody {
    border-top:0;
     tr {
         td {
            padding: 10px 5px;
            border-top: 1px solid #aaaaaa;
            border-bottom: 1px solid #aaaaaa;
         }
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:33:40.513

尝试将**tbody放在****thead**之后。

**HTML**

```
<table width="505" cellspacing="0" cellpadding="0" border="0">
    <thead>
        <tr>
            <th>foo</th>
            <th>bar</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Testing</td>
            <td>123</td>
        </tr>
        <tr>
            <td>Testing</td>
            <td>456</td>
        </tr>
    </tbody>
</table> 
```

[JSFiddle](http://jsfiddle.net/EBBdJ/6/)

来自[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/thead)：

> *thead* - 一个表格元素。thead 必须出现在任何标题或 colgroup 元素之后，即使是隐式定义的，但**在**任何 tbody、tfoot 和 tr 元素之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:42:30.390

删除`border-collapse: collapse`并使用`border-top`for`TD`和`border-bottom`for `TABLE`。

[现场演示](http://jsfiddle.net/EBBdJ/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:36:34.957

试试这个。

```
table {
    width:736px;
    border-collapse: collapse;
}
thead {
    border-top: 2px solid #aaaaaa;
}
th {
    border: 0;
    padding: 12px 5px;
}
tbody {
    border-top:0;
}         
td {
    padding: 10px 5px;
    border-top: 1px solid #aaaaaa;
    border-bottom: 1px solid #aaaaaa;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T17:06:56.160

我有一个使用 的表格`-webkit-backface-visibility:hidden;`，它隐藏了边框颜色，所以要修复我使用了`-webkit-backface-visibility:visible;`.

# java - 从 Java 程序运行时，adb 权限被拒绝

> ID：15688341
> 
> 赞同：0
> 
> 时间：2013-03-28T17:27:29.027
> 
> 标签：java, android, linux, adb

我正在尝试[从 Java 代码运行 chimpchat，](http://dtmilano.blogspot.de/2011/11/android-using-monkey-from-java.html)但出现此错误：

> 意外的异常“无法运行程序“/home/asco/adt-bundle-linux-x86_64/sdk/platform-tools”：错误=13，权限被拒绝”，同时尝试从“/home/asco/adt-bundle”获取 adb 版本-linux-x86_64/sdk/平台工具

我可以以普通用户身份从 shell 运行 adb。我已经`chmod 777`编写了 adb 程序。我能做些什么？我运行 Linux Mint 14（64 位）（安装了 ia32-libs）并使用`java7-openjdk-amd64`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T13:45:07.047

当我尝试从 Eclipse 打开 Android SDK 时，我也收到了错误

“......权限被拒绝”，同时试图从“......”获取 adb 版本

最初，我尝试过

> sudo apt-get install ia32-libs

但它并没有解决问题。我已经有了。

解决问题的是

> sudo chmod -R 777 /name-of-root-directory-containing-SDK

推荐！将 SDK、JDK 和所有其他手动安装的非系统资源放在它们自己的根目录中。[ 示例：/resource ] 在此目录上设置的权限不会更改任何关键文件。

警告！在系统目录上错误使用 chmod -R 会导致“必须从头开始重新安装操作系统”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:09:34.310

> 然后它抱怨找不到 adb 程序

你需要安装`ia32-libs`包：

```
sudo apt-get install ia32-libs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:31:04.663

错误是指定包含 adb 的目录，而不是 adb 可执行文件本身。检查目录的权限，并且您的程序正在尝试运行正确的命令（它可能正在尝试运行目录，这显然无法正常工作......）。

# c# - 协助 C# 循环

> ID：15688342
> 
> 赞同：0
> 
> 时间：2013-03-28T17:27:30.197
> 
> 标签：c#, loops

我刚刚完成了这段代码，想把下面的代码改成循环。每个部门都有一个他们应该单击的特定按钮，并且应该只对部门 1、2 或 3 内的人员可见。

有人可以在这里给我一些指导吗？

```
 pchk.Visible = true;

                Int32 count = 0;
         count = chk.GetCount(1);
         // dept 1
                if (count == -1)
                {
                    btnDept1.Visible = false;
                }
                else
                {
                    btnDept1.Text = "Next dep1[" + count.ToString() + "]";
                    if (count == 0)
                        btnDept1.Enabled = false;
                }

                // dept 2
                count = chk.GetCount(2);
                if (count == -1)
                {
                    btnDept2.Visible = false;
                }
                else
                {
                    btnDept2.Text = "Next dep2 [" + count.ToString() + "]";
                    if (count == 0)
                        btnDept02.Enabled = false;
                }
                // dept 3
                count = chk.GetCount(3);
                if (count == -1)
                {
                    btnDept3.Visible = false;
                }
                else
                {
                    btnDept3.Text = "Next dept3 [" + count.ToString() + "]";
                    if (count == 0)
                        btnDept3.Enabled = false;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:33:04.360

将其转换为循环的最大挑战是`btnDept1`根据数值获取值。一种方法是引入一种使用 switch 语句执行此操作的方法

```
Button GetButton(int id) {
  switch (id) {
    case 1: return btnDept1;
    case 2: return btnDept2;
    ...
  }
} 
```

或者另一种方法是将它们保存在数组中并使用索引来访问数组。无论哪种方式，一旦您拥有它，您就可以通过以下方式折叠成一个循环

```
for (int i = 0; i < TheCount; i++) {
  int id = i + 1;
  Button button = GetButton(id);
  int count = chk.GetCount(2);
  if (count == -1) { 
    button.Visible = false;
  } else { 
    button.Text = String.Format("Next dep{0} [{1}]", id, count);
    if (count == 0) {
      button.Enabled = false;
    }
  }                   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:29:07.133

```
 for (int i = 1; i <= 3; i++)
    {
        count = chk.GetCount(i);
        if (count == -1)
        {
            switch (i)
            {
                case 1:
                    btnDept1.Visible = false;
                    break;
                case 2:
                    btnDept2.Visible = false;
                    break;
                case 3:
                    btnDept3.Visible = false;
                    break;
            }
        }
        else
        {
            switch(i)
            {
                case 1:
                    btnDept1.Text = "Next dep1[" + count.ToString() + "]";
                    if (count == 0)
                        btnDept1.Enabled = false;
                    break;
                case 2:
                    btnDept1.Text = "Next dep1[" + count.ToString() + "]";
                    if (count == 0)
                        btnDept1.Enabled = false;
                    break;
                case 3:
                    btnDept1.Text = "Next dep1[" + count.ToString() + "]";
                    if (count == 0)
                        btnDept1.Enabled = false;
                    break;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:33:07.203

尝试这样的事情：

```
private void SetButton(int id, Button btn)
{
    var count = chk.GetCount(id);
    if (count == -1)
    {
        btn.Visible = false;
    }
    else
    {
        btn.Text = String.Format("Next dep{0}[{1}]", id.ToString(), count.ToString());
        if (count == 0)
            btn.Enabled = false;
    }

} 
```

用法可以是这样的：

```
SetButton(1, btnDept1);
SetButton(2, btnDept2);
SetButton(3, btnDept3); 
```

当然，如果您使用按钮数组/列表，它会更容易......

例如

```
Button[] buttons = new Button[] { btnDept1, btnDept2, btnDept3};
for (int i = 0; i < buttons.Length; i++)
   SetButton(i, buttons[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:39:35.620

这是获取所需按钮的更简单方法。`i`只需将值附加到“ `btnDept`”中`ActiveForm.Controls[...]`。检查null，然后去工作......

```
 for (int i = 0; i < deptCount; i++)
    {
        Button b = ActiveForm.Controls["btnDept" + i.ToString()] as Button;

        if (b != null)
        {
            if (count == -1)
            {
                b.Visible = true;
            }
            else
            {
                // etc.
            }
        }
    } 
```

# c++ - 无法在动态链接库中找到过程入口点 __gxx_personality_v0

> ID：15688343
> 
> 赞同：2
> 
> 时间：2013-03-28T17:27:34.580
> 
> 标签：c++, mingw, sfml

我一直在使用带有 C++ 的外部 API (SFML)，这需要我在安装的 MinGW 中添加一些 dll 文件。虽然该程序对我来说编译和运行良好，但它不会在任何其他计算机上运行。尝试在其他计算机上运行时会弹出此错误：

`The proecdure entry point __gxx_personality_v0 could not be located in the dynamic link library`，后跟 *.exe 位置。

我的朋友提到我可以将 MinGW 与我的程序捆绑在一起并编辑用户 PATH，但我没有在网上找到任何有关如何执行此操作的文档。如果有人能指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:30:43.483

您需要将编译器的运行时库与您的可执行文件一起提供，或者将其静态链接到您的程序中。

# excel - 在 Excel 2003 的一个电子表格中对多个列进行排名

> ID：15688344
> 
> 赞同：0
> 
> 时间：2013-03-28T17:27:36.567
> 
> 标签：excel, ms-office, excel-formula, excel-2003

我在 MS Excel 2003 中有一个带有多个两列配对的大型电子表格。Col A 有名称，Col B 有数字。Col C 和 D 为空白。我需要使用 Col C 中的数字 1-10 将 Col B 中的数字从最小到最大排列，而 Col D 保持空白。这种情况在整个电子表格中重复了大约 5 次。因此，我实际上不能交换任何行或列甚至单元格，我只需要在空白单元格中添加简单的数字。我认为这可以在 Excel 2010 中完成，但 Excel 2003 是否有某种解决方法？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:14:22.917

使用 C 列中的 RANK() 函数。

=排名(C2,C$2:C$50)

# ant - 使用 Ant 获取包含修改文件的目录

> ID：15688346
> 
> 赞同：1
> 
> 时间：2013-03-28T17:27:39.253
> 
> 标签：ant

如果目录中至少有一个修改过的文件，我需要处理它。我编写了一个块，将文件集简化为包含这些文件的目录的唯一列表，但我认为如果有办法在没有脚本的情况下执行此操作会更容易。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:37:43.520

用核心 ANT 做到这一点很棘手。

这是一个使用嵌入式[groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)脚本的示例：

```
<project name="demo" default="process-modified-dirs">

    <path id="build.path">
        <pathelement location="/path/to/groovy-all/jar/groovy-all-2.1.1.jar"/>
    </path>

    <fileset id="modifiedfiles" dir="src">
        <modified/>
    </fileset>

    <target name="process-modified-dirs">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>
        <groovy>
            dirs = project.references.modifiedfiles.collect {
                new File(it.toString()).parent
            }

            dirs.unique().each {
                ant.echo("Do something with this dir: ${it}")
            }
        </groovy>
    </target>

</project> 
```

# amazon-web-services - 与多个可用区一起使用时，Auto Scaling 如何“放置”实例？

> ID：15688347
> 
> 赞同：15
> 
> 时间：2013-03-28T17:27:47.530
> 
> 标签：amazon-web-services, amazon-ec2, autoscaling

考虑将 Auto Scaling 组配置为跨多个可用区的情况（例如在[此场景中](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/US_AddAvailabilityZone.html)）。当应根据需求将新的 Amazon EC2 实例添加到扩展组（横向扩展）时，Auto Scaling 如何决定将实例放置在哪个可用区中？实例数量较少的那个？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-04T14:15:46.490

正如您所料，[Auto Scaling](http://aws.amazon.com/autoscaling/)确实会选择*实例数量较少的区域，可用区*[和](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/AS_Concepts.html#arch-AutoScalingMultiAZ)区域内*跨多个区域的实例分布和平衡*部分解释了 Auto Scaling 采用的一般算法：

> **Auto Scaling 尝试在为您的 Auto Scaling 组启用的可用区之间平均分配实例**。Auto Scaling 通过尝试在具有最少实例的可用区中启动新实例来做到这一点。但是，如果尝试失败，Auto Scaling 将尝试在其他区域中启动，直到成功。*[强调我的]*

Auto Scaling 组也可能因各种条件（例如主动终止实例）而*在区域之间变得不平衡*，这可能会触发 Auto Scaling*重新平衡活动*- 请查看上面链接的文档以获取有关此问题的更多详细信息以及如何处理边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:32:25.503

通常，最好以这样一种方式进行扩展，即跨区域的实例分布是均匀的（如果您有 3 个区域，则扩展意味着添加 3 个实例，每个区域 1 个）。添加更多容量并不意味着流量将根据容量进行拆分。它仍将继续循环。

# javascript - 如何在 JavaScript 对象中将图像显示为属性

> ID：15688348
> 
> 赞同：0
> 
> 时间：2013-03-28T17:27:54.323
> 
> 标签：javascript, jquery

```
 //construtor created
   function Blog(text, date, image) {
        this.show_image = function(src, width, height, alt){
                        var img = document.createElement("img");
                            img.src = src;
                            img.width = width;
                            img.height = height;
                            img.alt = alt;
                            document.body.appendChild(img);
                    }

    }
 //instance

    var blog = [new Blog("hello!,Welcome to my blog1.", new Date("10/21/2012"),'show_image("images/overlay.png", 20,30, "Google Logo")'), 
```

嘿，我在上面的实例中调用了一个图像，我已经编写了一个函数 show_image 执行该部分但图像没有显示...请告诉我这里有什么问题...请修改它...我是新来的在javascript编程中..我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:33:18.133

我不知道你为什么要创建构造函数和所有..这可以通过创建一个简单的函数来完成

尝试这个

```
function show_image(src, width, height, alt){
                    var img = document.createElement("img");
                        img.src = src;
                        img.width = width;
                        img.height = height;
                        img.alt = alt;
                        document.body.appendChild(img);
  }

$(document).ready(function(){  //if using jquery
   show_image("images/overlay.png", 20,30, "Google Logo");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:38:48.383

您实际上没有调用 show_images 函数。你只是传递一个字符串，这不会有帮助。

请记住，在找出特定代码块不工作的原因之前，您需要确定该代码块是否被执行。

这是另一种让它发挥作用的方法。

```
function Blog(text, date) {

    this.show_image = function (src, width, height, alt) {

        var img = document.createElement("img");
        img.src = src;
        img.width = width;
        img.height = height;
        img.alt = alt;
        document.body.appendChild(img);
    }

}
//instance

var blog = new Blog("hello!,Welcome to my blog1.", new Date("10/21/2012"));
blog.show_image("images/overlay.png", 20,30, "Google Logo"); 
```

# android - Android Spinner 使用带有 ID 的数组来获取图像资源

> ID：15688352
> 
> 赞同：2
> 
> 时间：2013-03-28T17:28:13.640
> 
> 标签：android, image, spinner, adapter

好的，我正在尝试制作一个自定义微调器，只使用图像。我在 values 文件夹中的 .xml 文件上定义了一个数组，其中有图像项作为资源。我想用这些图像填​​充微调器。这是我到目前为止所做的一切：

在 res/drawable-mdpi

我有以下图片：

remove_minus_circle_black.png
remove_minus_circle_red.png
remove_minus_sign.png
remove_minus_sign2.png
remove_minus_sign3.png

在 res/values/arrays.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="minusIcons">
       <item>@drawable/remove_minus_circle_black</item>
       <item>@drawable/remove_minus_circle_red</item>
       <item>@drawable/remove_minus_sign</item>
       <item>@drawable/remove_minus_sign2</item>
       <item>@drawable/remove_minus_sign3</item>

   </array>

    <array name="directionIcons">

   </array>

</resources> 
```

在 res/layout/row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />
 </LinearLayout> 
```

现在我尝试使用自定义适配器将图像添加到微调器的代码（活动本身）：

```
public class Definicoes extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_definicoes);

        Spinner spinner = (Spinner) findViewById(R.id.minusSpinner);

        int[] array = getResources().getIntArray(R.array.minusIcons);
        String [] objects = new String[array.length];
        for(int i = 0; i != array.length; i++){
            objects[i] = "" + array[i];
        }

        spinner.setAdapter(new MyAdapter(Definicoes.this, R.id.minusSpinner, objects)); 

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.definicoes, menu);
        return true;
    }

    class MyAdapter extends ArrayAdapter<String>{

        String[] objects;
        public MyAdapter(Context context, int textViewResourceId,   String[] objects) {
            super(context, textViewResourceId, objects);
            this.objects = objects;
        }

        @Override
        public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row, parent, false);

            ImageView icon = (ImageView) row.findViewById(R.id.icon);
            icon.setImageResource(Integer.parseInt(objects[position]));

            return row;
         }
     }

} 
```

问题/错误：我打开活动，然后单击微调器，那里什么也没有！非常感谢你们！我想我可能做错了什么，从未使用过自定义适配器...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:52:12.717

使用这个找到了解决方案：

```
ImageView icon = (ImageView) row.findViewById(R.id.icon);

TypedArray imgs = getResources().obtainTypedArray(R.array.minusIcons);
icon.setImageResource(imgs.getResourceId(position, -1)); 
```

并将数组的类型更改为字符串数组，它起作用了：P

# java - 如何使用变量来启动新意图

> ID：15688355
> 
> 赞同：1
> 
> 时间：2013-03-28T17:28:27.043
> 
> 标签：java, android, android-intent

我有一个变量：

```
String MyClass = "MyClass" 
```

我想在这里使用它：

```
Intent intent = new Intent(this, MyClass.class);
startActivity(intent); 
```

或者：

```
Intent intent = new Intent(this, MyClass.ToString().class);
startActivity(intent); 
```

它不起作用......如何将值传递`MyClass`给 Intent 构造函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:35:35.193

首先，Java 命名约定是变量应该以小写字母开头，类以大写字母开头。这会使您的代码混乱，因为看起来您正在指定一个类，但实际上并非如此。

事实上，正确的答案是使用以下方法将您的 String 更改为 Class 对象`Class.forName()`：

```
Class<?> newActivityClass = Class.forName(myPackage + "." + myClass);
startActivity(new Intent (this, newActivityClass)); 
```

您将需要适当地捕获和处理例外情况。

# vba - 为什么我的电子表格函数的行为与从代码调用时不同？

> ID：15688360
> 
> 赞同：5
> 
> 时间：2013-03-28T17:28:33.317
> 
> 标签：vba, spreadsheet, user-defined-functions

当我从 Excel（在单元格中）调用函数时：

```
=allVlookup(O24,A:D,3,"") 
```

与通过 vba 对比

```
MsgBox allVlookup(Range("O24"), Range("A:D"), 3, "") 
```

我得到不同的结果。当从 Excel 调用时，我只得到第一个匹配，但是当从具有相同参数的 vba 测试子调用时（除了添加`Range`到参数以允许子运行），我得到完整的结果（不止一个）。

我正在使用的功能是：

```
Public Function allVlookup(lookupRange As Range, tableRange As Range, colIndex As Integer, Optional delimiter As String = "") As String

    Dim c As Range
    Dim firstAddress As String
    'MsgBox tableRange.Address  ' this is correct
    'With Sheets(4).Range("A1:C12").Columns(1)
    'With Range("A1:C12").Columns(1)

    'this doesn't allow things to work right either (???)
    'Set tableRange = Range("A:D")
    'Set lookupRange = Range("O24")

    'search only the first column for matches
    With tableRange.Columns(1)
        Set c = .Find(what:=lookupRange.Value, LookIn:=xlValues)

        If Not c Is Nothing Then

            firstAddress = c.Address

            Do
                'add the delimiter
                If (allVlookup <> "") Then
                    allVlookup = allVlookup + delimiter
                End If

                'append value to previous value
                allVlookup = allVlookup + c.Offset(0, colIndex).Value

                Set c = .FindNext(c)
                'exit conditions
                'no match found
                If (c Is Nothing) Then
                    Exit Do
                    'we're back to start
                ElseIf (c.Address = firstAddress) Then
                    Exit Do
                End If

            Loop
        End If
    End With

End Function 
```

我不知道为什么会发生这种情况。

我该怎么做才能使输出相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:02:46.427

将行更改`.Find`为：

```
Set c = .Find(what:=lookupRange.Value2, after:=.Cells(1), LookIn:=xlValues, LookAt:=xlWhole) 
```

并另外更改`.FindNext`为：

```
Set c = .Find(what:=lookupRange.Value2, after:=c, LookIn:=xlValues, LookAt:=xlWhole) 
```

还请记住，`tableRange`范围应该有列标题。如果不是，则结果顺序将不符合预期。

最后一句话的附加（编辑）解释。如果您有该类型的表：

```
 |  A  |  B  |  C  |  D  |
  --+-----+-----+-----+-----+
  1 | ABC    1     2     A
  2 | ABC    3     4     B
  3 | ABC    5     6     C 
```

当在 ABC 中搜索`range("A1:D3")`以从 D 列获取数据时，您将得到以下结果：`BCD`. 第一行应该`ABC`有列标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:43:19.527

它只给出第一个匹配的原因是因为一个错误。请参阅底部的此[链接（第 5 节）。](http://www.siddharthrout.com/index.php/2018/01/05/find-and-findnext-in-excel-vba/)

我很久以前就已经将它作为一个错误提交了。如果您阅读了上面的链接，那么我也建议了一个替代代码。

**从该链接中提取，以防链接失效（它不应该）**

.FindNext 不能按预期在用户定义的函数中工作。您可以在正常功能中使用它。

假设我们在 Sheet1 中有这些数据：

```
A1 → Colt
A2 → Holt
A3 → Dolt
A4 → Hello 
```

并且在

```
B1 → olt 
```

现在，如果我们将以下代码粘贴到模块中并运行它，那么我们将得到预期的结果`$A$1:$A$3`

```
Sub Test()
    Sample Sheets("Sheet1").Range("B1"), Sheets("Sheet1").Range("A1:A4")
End Sub

Sub Sample(FirstRange As Range, ListRange As Range)
    Dim aCell As Range, bCell As Range, oRange As Range
    Dim ExitLoop As Boolean
    Set oRange = ListRange.Find(what:=FirstRange.Value, LookIn:=xlValues, _
    lookat:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)
    ExitLoop = False
    If Not oRange Is Nothing Then
        Set bCell = oRange: Set aCell = oRange

        Do While ExitLoop = False
            Set oRange = ListRange.FindNext(After:=oRange)

            If Not oRange Is Nothing Then
                If oRange.Address = bCell.Address Then Exit Do
                Set aCell = Union(aCell, oRange)
            Else
                ExitLoop = True
            End If
        Loop
        MsgBox aCell.Address
    Else
        MsgBox "Not Found"
    End If
End Sub 
```

但是，如果您将此函数粘贴到模块中并从工作表中调用它（例如在单元格 C1 中），它将无法按预期工作`=FindRange(A1,A1:A5)`

该代码只会为您提供找到的值的第一个实例，而忽略其余的

因此，您将得到的结果是 $A$2！！！

```
Function FindRange(FirstRange As Range, ListRange As Range) As String
    Dim aCell As Range, bCell As Range, oRange As Range
    Dim ExitLoop As Boolean
    Set oRange = ListRange.Find(what:=FirstRange.Value, LookIn:=xlValues, _
    lookat:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)
    ExitLoop = False
    If Not oRange Is Nothing Then
        Set bCell = oRange: Set aCell = oRange

        Do While ExitLoop = False
            Set oRange = ListRange.FindNext(After:=oRange)

            If Not oRange Is Nothing Then
                If oRange.Address = bCell.Address Then Exit Do
                Set aCell = Union(aCell, oRange)
            Else
                ExitLoop = True
            End If
        Loop
        FindRange = aCell.Address
    Else
        FindRange = "Not Found"
    End If
End Function 
```

我们需要从不同的角度来看待这个问题。

我们不再使用 .FindNext，而是再次使用 .Find 直到我们得到想要的结果（$A$1:$A$3）。请参阅下面的代码：

```
Function FindRange(FirstRange As Range, ListRange As Range) As String
    Dim aCell As Range, bCell As Range, oRange As Range
    Dim ExitLoop As Boolean
    Set oRange = ListRange.Find(what:=FirstRange.Value, LookIn:=xlValues, _
    lookat:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)
    ExitLoop = False
    If Not oRange Is Nothing Then
        Set bCell = oRange: Set aCell = oRange

        Do While ExitLoop = False
            Set oRange = ListRange.Find(what:=FirstRange.Value, After:=oRange, LookIn:=xlValues, _
            lookat:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)
            If Not oRange Is Nothing Then
                If oRange.Address = bCell.Address Then Exit Do
                Set aCell = Union(aCell, oRange)
            Else
                ExitLoop = True
            End If
        Loop
        FindRange = aCell.Address
    Else
        FindRange = "Not Found"
    End If
End Function 
```

# c# - 我正在创建一个网站，使最终用户能够创建应用程序，我将在其中使用用户输入的值作为数据库名称

> ID：15688365
> 
> 赞同：-3
> 
> 时间：2013-03-28T17:28:39.470
> 
> 标签：c#

我正在从文本框中检索 AppName。

```
string AppName = TextBox1.Text; 
```

现在我想创建一个数据库，其名称将从文本框中检索，即 AppName

```
string Text = "create database AppName";  
MySqlCommand cmd = new MySqlCommand(Text,Connection); 
```

但上面的代码正在创建名为 AppName 的数据库，但不是用户输入的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:41:50.727

您没有在 SQL 查询中使用实际值，而是每次都使用相同的文字字符串：

```
"create database AppName" 
```

相反，您需要合并输入的实际值。我不是 100% 熟悉 MySQL 语法或查询对象，但一般来说它看起来像这样：

```
string appName = TextBox1.Text;
string commandText = "CREATE DATABASE @DBName";
using (MySqlCommand cmd = new MySqlCommand(commandText, connection))
{
    cmd.Parameters.Add("@DBName", System.Data.SqlDbType.NVarChar, 50);
    cmd.Parameters["@DBName"].Value = appName;

    cmd.Connection.Open();
    cmd.ExecuteNonQuery();
} 
```

这是徒手代码，因为我没有可用的相关对象。但想法是，您将在查询 () 中创建一个可变参数`@TableName`，然后在执行查询 () 之前使用所需的运行时值填充该参数`cmd.Parameters["@TableName"].Value = appName;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:30:12.990

string Text = "创建数据库" + AppName;

# javascript - 在 javascript 中识别并行异步调用堆栈

> ID：15688366
> 
> 赞同：0
> 
> 时间：2013-03-28T17:28:39.803
> 
> 标签：javascript, race-condition, callstack

我想知道是否有办法让我在 javascript 中对每个堆栈使用一种“私有领域”或“私有内存”，以帮助我清除竞速条件，尤其是在并行`setTimeout`调用的情况下。

例如，假设我有这个：

```
function foo() { 
    /* some statements */ 
    bar(); 
} 

function bar() { throw new Exception("oooh damn!"); }

setTimeout(function() { foo(); }, 10);
setTimeout(function() { foo(); }, 10); 
```

我将提出 2 个异常，但我不知道它对应于哪个调用。

我*可以*实现一种私有领域的东西，但它确实会使代码复杂化，如果有的话，我宁愿使用本机解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T22:24:30.580

您可以使用 Error 对象的`stack`属性 ( [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error/Stack) )。

我更新了甜淀粉酶的小提琴：http: [//jsfiddle.net/robatwilliams/Am8mf/3/](http://jsfiddle.net/robatwilliams/Am8mf/3/)

两个记录的堆栈跟踪的最后一行将显示哪个`setTimeout`启动了哪个错误：

```
Error: 1
    at bar (http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:28:15)
    at foo (http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:23:5)
    at http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:35:26
Error: 2
    at bar (http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:28:15)
    at foo (http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:23:5)
    at http://fiddle.jshell.net/robatwilliams/Am8mf/3/show/:36:26 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T23:02:07.650

根据您的上下文，许多浏览器中的典型错误对象将具有其他详细信息，以及“堆栈”属性...

例如，V8 Chrome/NodeJS 错误（以及 IE）具有“堆栈”属性，可以为您提供更多环境上下文。

```
try { 
  throw new Error();
} catch(err) { 
  console.dir(err.stack.toString().split('\n'));
}
```

输出（铬）：

```
0: "Error"
1: "    at :3:9"
2: "    at Object.InjectedScript._evaluateOn (:532:39)"
3: "    at Object.InjectedScript._evaluateAndWrap (:491:52)"
4: "    at Object.InjectedScript.evaluate (:410:21)"
```

输出（IE10）：

```
 0 : "Error",
    1 : "   at eval code (eval code:2:3)",
    2 : "   at Global code (Unknown script code:5:1)"
```

输出（火狐）：

```
 0 : "@chrome://firebug/conte...mmandLineExposed.js:192",
    1 : "" 
```

在适当的 JS 文件/模块中，您将获得相关文件和行/列...

不同的浏览器会有自己的实现细节，但这应该会给你你正在寻找的上下文......

您可能还希望用名称来补充您的功能......

```
setTimeout(function IPityTheFoo() { foo(); }, 10);
setTimeout(function DoingMyFooThing1() { foo(); }, 10);
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:47:52.533

您可以将一些标识符传递到您的`foo()`中以进行跟踪。试试这个：

```
setTimeout(function () { foo(1); }, 10);
setTimeout(function () { foo(2); }, 10); 
```

并修改您的`foo()`函数以接受 id 参数并将其传递。

```
function foo(id) {
    /* some statements */
    bar(id);
}

function bar(id) {
    try {
        throw {
            name: "Exception",
            message: "oooh damn!" + id
        }
    } catch (e) {
        console.error(e.name, e.message);
    }
} 
```

请参阅小提琴中的示例：http: [//jsfiddle.net/amyamy86/Am8mf/](http://jsfiddle.net/amyamy86/Am8mf/)

所以，如果我这样做：

```
setTimeout(function () { foo(1); }, 10);
setTimeout(function () { foo(2); }, 10); 
```

然后它又回来了：

```
Exception oooh damn!1
Exception oooh damn!2 
```

或者如果我这样做：

```
setTimeout(function () { foo(1); }, 10);
setTimeout(function () { foo(2); }, 9); 
```

然后它又回来了：

```
Exception oooh damn!2
Exception oooh damn!1 
```

**编辑 #2**不必将*id*作为参数传递：

```
var currentId = null;
function foo() {
    var id = currentId;        // since it's copied over to 'id', we don't care about 'currentId' anymore
    var bar = function() {
        try {
            throw {
                name: "Exception",
                message: "oooh damn!" + id
            }
        } catch (e) {
            console.error(e.name, e.message);
        }
    }
    /* some statements */
    bar();
}

setTimeout(function () {
    currentId = 1;
    foo();
}, 10);
setTimeout(function () {
    currentId = 2;
    foo();
}, 10); 
```

所以`currentId`是一个共享变量，但是在结束的那一刻被设置`setTimeout()`，并执行函数。

这样做：

```
setTimeout(function () {
    currentId = 1;
    foo();
}, 10);
setTimeout(function () {
    currentId = 2;
    foo();
}, 9); 
```

然后它又回来了：

```
Exception oooh damn!2
Exception oooh damn!1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T18:09:03.283

我可能会稍微不同地使用闭包并避免使用全局变量。您可以将 ID 替换为一些允许您计算调用或处理竞争条件的上下文对象。

```
var invokeWithId = function(id, f){
    return function(){               
        f.apply({id:id}, arguments);
    }
}
setTimeout(invokeWithId(1, foo), 10); 
```

[http://jsfiddle.net/j8hgE/](http://jsfiddle.net/j8hgE/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-01T19:29:51.863

您可以修改您的**setTimeout**函数并汇总所有答案的经验。

```
var oldTimeout = window.setTimeout;
window.setTimeout = function(callback, delay){
    if(callback.name == 'Trace'){
        oldTimeout.apply(this,[function(){
            try{
                callback.apply(this,arguments);
            }
            catch(e){                
                e.message += ' ('+e.stack.split('\n').map(function(e){return '['+e.replace(location.href,'plain_script').replace('@',' in ')+']'}).join(' < ')+')';
                throw e;
            }
        }].concat(Array.prototype.slice.call(arguments,1,arguments.length)));
    }
    else{oldTimeout.apply(this,arguments)};
} 
```

[http://jsfiddle.net/RSbtF/1/](http://jsfiddle.net/RSbtF/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-01T20:58:57.657

无需使用 try/catch、堆栈或修改现有代码，您所能做的就是使用更智能的 setTimeout：

```
(function(){
  if(!setTimeout.id){
  var old=setTimeout, hits=0;
  setTimeout=function timeout(code, delay, id){ 
     var count=hits++;
     setTimeout.calls=setTimeout.calls||{};
     setTimeout.calls[id||count]=code;
     return old(function(){ 
           setTimeout.id=id||count; 
           code.call? code() : Function(code)(); 
     }, delay);  
  };
  setTimeout.id=true;
 }//end setTimeout patcher

}());

function foo() {     /* some statements */ 
    bar(); 
} 

function bar() { throw new Error("oooh damn! #"+setTimeout.id+"\t"+setTimeout.calls[setTimeout.id] ); }

setTimeout(function() { foo(); }, 20, "more");
setTimeout(function() { foo(); }, 10, "something");
setTimeout(function() { foo(); }, 20);
setTimeout(function() { foo(); }, 10); 
```

基本上，这使得 setTimeout 的属性 id 可用。因为 JS 是单线程的，所以在你的函数完成之前，这个属性应该不可能被覆盖，所以当超时函数运行时，“最后”设置 setTimeout.id 是“当前”设置。

你可以传递第三个参数（忘记浏览器的怪癖柯里化）来手动指定一个 ID，或者让一个索引分配给它。这意味着每个调用都有一个唯一的标识符，这可能就是您需要调试的全部内容。如果您需要代码本身，我的 setTimeout 提供了一个 .calls 属性，这是一个查找，可让您查看在该 ID 下评估的代码/函数。

# java - 链表之间的区别 清晰和新的 LinkedList 在多线程环境中

> ID：15688367
> 
> 赞同：1
> 
> 时间：2013-03-28T17:28:48.687
> 
> 标签：java, multithreading

为什么会有这段代码：

```
public synchronized void update() {
        for(T event : eventQueue)
        {
            processEvent(event);
        }
        events = eventQueue;
        eventQueue = new LinkedList<T>();
} 
```

运行方式与此代码不同：

```
public synchronized void update() {
            for(T event : eventQueue)
            {
                processEvent(event);
            }
            events = eventQueue;
            eventQueue.clear();
} 
```

第一个版本工作得很好，但第二个版本不行。这`eventQueue.clear();`会导致应用程序不接收任何事件并以`Concurrent Exception`.

我的应用程序有两个线程。UI 线程和 GameLoop 线程。UI线程将事件添加到`eventQueue`这样的：

```
public synchronized void addEvent(T newEvent) {
            eventQueue.add(newEvent);
} 
```

GameLoop 线程调用 update 方法来`events`获取`eventQueue`.

所有代码都可以从这个网站查看：[http ://entropyinteractive.com/2011/02/game-engine-design-input/](http://entropyinteractive.com/2011/02/game-engine-design-input/)

这对我来说似乎有点神秘，因为我认为`eventQueue = new LinkedList<T>();`并且`eventQueue.clear();`都会导致空`LinkedList`？我相信它与建立一个新的参考有关（但为什么？！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:30:45.993

因为在这段代码中：

```
public LinkedList<T> getEvents()
{
    return events;
} 
```

您返回的是原始列表，而不是副本。如果您`clear()`使用该列表，则会导致问题，因为您正在从列表中删除内容（更重要的是，更改列表的大小），而另一个线程正在使用它。

请注意，此函数 is not `synchronized`，因此您甚至无法安全地从中返回副本，因为在您复制它时原始列表可能会发生变化（更改引用是[atomic](https://en.wikipedia.org/wiki/Atomic_operation)`update()` ，因此在您的方法中这样做是安全的） .

您可以从同步方法返回一个副本，如下所示：

```
public synchronized LinkedList<T> getEvents()
{
    return new LinkedList<T>(events);
} 
```

但这引入了不必要的复制和锁定。这是否重要取决于您是否更关心[防御性编码](http://www.javapractices.com/topic/TopicAction.do?Id=15)或性能要求。我认为他们这样做是出于性能原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:35:23.007

这是你的问题

```
 events = eventQueue;
  eventQueue.clear() 
```

分配`events = eventQueue`后，您将通过以下方式逃避对`eventQueue`公众的引用

```
public LinkedList<T> getEvents()
{
    return events;
} 
```

`getEvents()`一个线程可以在实际存在的队列上进行迭代，`eventQueue`而另一个线程可以调用`addEvent`，并且由于`synchronized`in addEvent 不再与您的迭代器匹配，因此`getEvents()`您将获得 comodification。

我的建议是，如果您真的想发布您的活动，请使用新系列。

```
 events = new LinkedList<T>(eventQueue);
  eventQueue.clear() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:36:26.690

如果你不保护*所有*的使用`eventQueue`，比如分发引用`getEvents()`，你应该尝试`ConcurrentLinkedList`。

# css - CSS 中的 '::' 选择器是什么意思

> ID：15688368
> 
> 赞同：1
> 
> 时间：2013-03-28T17:28:53.410
> 
> 标签：css, css-selectors

我遇到了一篇博客文章，`::`在他们的 CSS 代码中使用了。

这是他们的部分代码：

```
::-webkit-scrollbar {
  width: 10px;
} 
```

该代码适用于滚动条，但我找不到此选择器的定义位置。这正式意味着什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:30:57.407

`::`表示[伪元素](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)，而不是[伪类](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-classes) `:`。他们都使用和支持的 Pre-CSS3的语法仍然`:`有点杂乱无章。`::`

**伪类过滤现有元素。**

`a:link`表示所有`<a>`的 s `:link`。

**伪元素是一个新的假元素。** `div::after`创建一个“假”元素，`<div>`但在其内容之后。

## 参考

*   [CSS中的伪类和伪元素有什么区别？](https://stackoverflow.com/a/8069984/1156119)
*   [伪元素标签信息](https://stackoverflow.com/tags/pseudo-element/info)

# java - 将 jsp 元素值分配给 struts2 文本字段

> ID：15688371
> 
> 赞同：1
> 
> 时间：2013-03-28T17:28:58.860
> 
> 标签：java, jsp, struts2

我正在实现更新用户详细信息的逻辑，因此我已经运行休眠查询和所需的类申请人对象现在我想要的是使用类申请人对象并使用属性`getApplicantId()`并在 Struts2 文本字段中使用它

```
<%
String id="12"; // for not using static Id later i'll fetch Id from session.
UserData data=new UserData();
Applicant applicant=(Applicant)data.fetchUserData(id);
%> 
```

现在我想在 struts2 文本字段中使用 JSP 的 ID，例如

```
<s:textfield name="fName" value="<%=applicant.getApplicantId()%>"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:41:35.200

Scriptlet 不能在 Struts2 标记中使用。我强烈建议将其转移到行动中。作为一种解决方法，您可以使用字符串化值

```
<s:textfield name="fName"><%=applicant.getApplicantId()%></s:textfield> 
```

# c# - 为不同的 Web 应用程序共享相同的配置设置

> ID：15688373
> 
> 赞同：1
> 
> 时间：2013-03-28T17:28:59.663
> 
> 标签：c#, asp.net, asp.net-mvc, web-applications, configuration

这是我今天面试时提出的一个问题。

> 如何为在同一 IIS 下运行的不同 Web 应用程序共享相同的配置设置。

我回答了，

> 可以通过将相同内容移动到 CLR 版本下的根级别 web.config/machine.config 文件中来完成，即 Windows/Microsoft VS .Net/Framework/Version/Config/filename
> 
> 在服务器磁盘上有一个 xml 文件或某个文件，并使用 System.IO 读取。
> 
> 较旧的方式，放置一些 .ini 文件并阅读它

**最后他们说一切都错了！想知道这样做的方法是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:41:12.377

One option: You can use the `configSource` attribute on any configuration element to have it pull the configuration from an external file.

**ConnectionStrings.config**

```
<connectionString>
    ...
</connectionStrings> 
```

**Web.config**

```
<connectionStrings configSource="ConnectionStrings.config" /> 
```

Then, you can link ConnectionStrings.config between your projects and you're good to go.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:29:40.513

你不需要做任何事情。默认行为是子文件夹中的所有 Web 应用程序从根文件夹继承配置。您只需覆盖您需要的那个。

**例子：**

*   根文件夹：`C:\inetpub\wwwroot`
*   web app1 根文件夹：`C:\inetpub\wwwroot\webapp1`
*   web app2 根文件夹：`C:\inetpub\wwwroot\webapp2`

**现在如果**

*   根配置位于：`C:\inetpub\wwwroot\web.config`
*   web app1 配置在：`C:\inetpub\wwwroot\webapp1\web.config`
*   web app2 配置在：`C:\inetpub\wwwroot\webapp2\web.config`

两者都`app1`将从`app2`root 继承它们的配置，`web.config`除非在它们自己的`web.config`.

# javascript - 从 v1.3.19 更新到 v1.4.6 后，Colorbox 不起作用

> ID：15688376
> 
> 赞同：5
> 
> 时间：2013-03-28T17:29:06.337
> 
> 标签：javascript, jquery, colorbox

我将 Colorbox.min.js 文件从 v1.3.19 更新到 v1.4.6，但我的一些颜色框不起作用。我在页面和 Chrome 的控制台上没有收到任何错误。

我检查了[更改日志](https://github.com/jackmoore/colorbox/tree/1.x#changelog)，但没有找到分析器。你能帮忙吗？

（我使用 jQuery 1.7.2）

*   这不起作用：

```
<a href="#" onclick="emailDialog()">e-mail</a> 
```

```
function emailDialog(){  
    $.fn.colorbox({  
        width:"700px", height:"550px",  
        iframe:true, href:"/contact",  
        opacity:0.6  
    });  
} 
```

*   这很好用：

```
<a href="http://example.com/1.jpeg" class="colorbox-avatar" title="some title" rel="nofollow" >photo</a> 
```

```
$(document).ready(function() {  
    $(".colorbox-avatar").colorbox({  
        rel:'colorbox-avatar',  
        scrolling: false,  
        current: "",  
        slideshow:true, slideshowAuto:false,  
        opacity:0.6,  
        width:"60%" , height:"60%"  
    });  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:43:05.750

调用它没有`.fn`... 所以`$.colorbox({...})`

（`$.fn`用于[开发 jQuery 插件](http://docs.jquery.com/Plugins/Authoring)，实际上只是[的简写`$.prototype`](https://stackoverflow.com/questions/4083351/what-does-jquery-fn-mean)）。

```
function emailDialog(){
    $.colorbox({
        width:"700px", height:"550px",
        iframe:true, href:"/contact",
        opacity:0.6
    });   
} 
```

[jsfiddle 演示](http://jsfiddle.net/pxfunc/4tkf5/)

# python - Python 相当于 Perl 的 HTTP::Proxy 模块

> ID：15688383
> 
> 赞同：1
> 
> 时间：2013-03-28T17:29:20.117
> 
> 标签：python, perl

我正在移植一个使用 HTTP::Proxy 模块（它本身使用 HTTP::Daemon、HTTP::Proxy::Engine、LWP 和其他几个模块）来实现能够过滤请求的代理服务器的 Perl 项目，管理用户，...我查找了 PyPI，但没有找到类似这个模块的任何东西。你有什么建议吗？

# javascript - js脚本出错

> ID：15688384
> 
> 赞同：0
> 
> 时间：2013-03-28T17:29:20.743
> 
> 标签：javascript, jquery, codecharge

这是一个由 CodeCharge（代码生成器）生成的脚本，作为我的应用程序的一部分（当然，显然也是由 Artisteer 设计的）。我对web开发知之甚少，JS零知识，不得不使用这个代码生成器。脚本不断出现此错误：“Line: 139, Char: 13, Error: Unable to get property 'parent' of undefined or null reference, Code:0, URL: )。就像我说的，我无法控制在生成这个脚本后，我可以去修改它，希望能解决这个问题。下面是完整的脚本。第 139 行是：

```
 var s = c.parent().children('.art-layout-cell:not(.art-content)'); 
```

这是完整的脚本：

```
/* begin Page */
/* Created by Artisteer v3.1.0.55575 */
// css helper
(function($) {
    var data = [
        {str:navigator.userAgent,sub:'Chrome',ver:'Chrome',name:'chrome'},
        {str:navigator.vendor,sub:'Apple',ver:'Version',name:'safari'},
        {prop:window.opera,ver:'Opera',name:'opera'},
        {str:navigator.userAgent,sub:'Firefox',ver:'Firefox',name:'firefox'},
        {str:navigator.userAgent,sub:'MSIE',ver:'MSIE',name:'ie'}];
    for (var n=0;n<data.length;n++) {
        if ((data[n].str && (data[n].str.indexOf(data[n].sub) != -1)) || data[n].prop) {
            var v = function(s){var i=s.indexOf(data[n].ver);return (i!=-1)? parseInt(s.substring(i+data[n].ver.length+1)):'';};
            $('html').addClass(data[n].name+' '+data[n].name+v(navigator.userAgent) || v(navigator.appVersion)); break;         
    }
}
})(jQuery);
/* end Page */

/* begin Menu */
jQuery(function () {
    if (!jQuery.browser.msie || parseInt(jQuery.browser.version) > 7) return;
    jQuery('ul.art-hmenu>li:not(:first-child)').each(function () { jQuery(this).prepend('<span class="art-hmenu-separator"> </span>'); });
    if (!jQuery.browser.msie || parseInt(jQuery.browser.version) > 6) return;
    jQuery('ul.art-hmenu li').each(function () {
        this.j = jQuery(this);
        this.UL = this.j.children('ul:first');
        if (this.UL.length == 0) return;
        this.A = this.j.children('a:first');
        this.onmouseenter = function () {
            this.j.addClass('art-hmenuhover');
            this.UL.addClass('art-hmenuhoverUL');
            this.A.addClass('art-hmenuhoverA');
        };
        this.onmouseleave = function() {
            this.j.removeClass('art-hmenuhover');
            this.UL.removeClass('art-hmenuhoverUL');
            this.A.removeClass('art-hmenuhoverA');
        };
    });
});

jQuery(function() { setHMenuOpenDirection({container: "div.art-sheet-body",         defaultContainer: "#art-main", menuClass: "art-hmenu", leftToRightClass: "art-hmenu-left-to-right", rightToLeftClass: "art-hmenu-right-to-left"}); });

function setHMenuOpenDirection(menuInfo) {
    var defaultContainer = jQuery(menuInfo.defaultContainer);
    defaultContainer = defaultContainer.length > 0 ? defaultContainer = jQuery(defaultContainer[0]) : null;

jQuery("ul." + menuInfo.menuClass + ">li>ul").each(function () {
    var submenu = jQuery(this);
    var submenuWidth = submenu.outerWidth();
    var submenuLeft = submenu.offset().left;

    var mainContainer = submenu.parents(menuInfo.container);
    mainContainer = mainContainer.length > 0 ? mainContainer = jQuery(mainContainer[0]) : null;

    var container = mainContainer || defaultContainer;
    if (container != null) {
        var containerLeft = container.offset().left;
        var containerWidth = container.outerWidth();

        if (submenuLeft + submenuWidth >=
                containerLeft + containerWidth) 
            /* right to left */
            submenu.addClass(menuInfo.rightToLeftClass).find("ul").addClass    (menuInfo.rightToLeftClass);
        if (submenuLeft <= containerLeft)
            /* left to right */
            submenu.addClass(menuInfo.leftToRightClass).find("ul").addClass    (menuInfo.leftToRightClass);
        }
    });
}

jQuery(function ($) {
    $("ul.art-hmenu a:not([href])").attr('href', '#').click(function (e) { e.preventDefault(); });
});
/* end Menu */

/* begin MenuSubItem */
jQuery(function () {
    jQuery("ul.art-hmenu ul li").hover(function () { jQuery(this).prev().children("a").addClass("art-hmenu-before-hovered"); }, 
    function () { jQuery(this).prev().children("a").removeClass("art-hmenu-before-hovered"); });
});

jQuery(function () {
    if (!jQuery.browser.msie) return;
    var ieVersion = parseInt(jQuery.browser.version);
    if (ieVersion > 7) return;

/* Fix width of submenu items.
* The width of submenu item calculated incorrectly in IE6-7\. IE6 has wider items, IE7 display items like stairs.
*/
jQuery.each(jQuery("ul.art-hmenu ul"), function () {
    var maxSubitemWidth = 0;
    var submenu = jQuery(this);
    var subitem = null;
    jQuery.each(submenu.children("li").children("a"), function () {
        subitem = jQuery(this);
        var subitemWidth = subitem.outerWidth();
        if (maxSubitemWidth < subitemWidth)
            maxSubitemWidth = subitemWidth;
    });
    if (subitem != null) {
        var subitemBorderLeft = parseInt(subitem.css("border-left-width"), 10) || 0;
        var subitemBorderRight = parseInt(subitem.css("border-right-width"), 10) || 0;
        var subitemPaddingLeft = parseInt(subitem.css("padding-left"), 10) || 0;
        var subitemPaddingRight = parseInt(subitem.css("padding-right"), 10) || 0;
        maxSubitemWidth -= subitemBorderLeft + subitemBorderRight + subitemPaddingLeft + subitemPaddingRight;
        submenu.children("li").children("a").css("width", maxSubitemWidth + "px");
    }
});

if (ieVersion > 6) return;
jQuery("ul.art-hmenu ul>li:first-child>a").css("border-top-width", "1px");
});
/* end MenuSubItem */

/* begin Layout */
jQuery(function () {
jQuery(window).bind('resize', function () {
    var bh = jQuery('body').height();
    var mh = 0;

    jQuery('#art-main').children().each(function() {
        if (jQuery(this).css('position') != 'absolute')
            mh += jQuery(this).outerHeight(true);
    });

    if (mh < bh)
    {
        var r = bh - mh;
        var c = jQuery('div.art-content');
        c.css('height', (c.outerHeight(true) + r) + 'px');
    }
});

if (jQuery.browser.msie && parseInt(jQuery.browser.version) < 8) {
    jQuery(window).bind('resize', function() {
        var c = $('div.art-content');
        var s = c.parent().children('.art-layout-cell:not(.art-content)');
        var w = 0;
        c.hide();
        s.each(function() { w += this.clientWidth; });
        c.w = c.parent().width(); c.css('width', c.w - w + 'px');
        c.show();
    });
}

jQuery(window).trigger('resize');
});
/* end Layout */

/* begin Button */
function artButtonSetup(className) {
    jQuery.each(jQuery("a." + className + ", button." + className + ", input." + className), function (i, val) {
    var b = jQuery(val);
    if (!b.parent().hasClass('art-button-wrapper')) {
        if (b.is('input')) b.val(b.val().replace(/^\s*/, '')).css('zoom', '1');
        if (!b.hasClass('art-button')) b.addClass('art-button');
        jQuery("<span class='art-button-wrapper'><span class='art-button-l'> </span><span class='art-button-r'> </span></span>").insertBefore(b).append(b);
        if (b.hasClass('active')) b.parent().addClass('active');
    }
    b.mouseover(function () { jQuery(this).parent().addClass("hover"); });
    b.mouseout(function () { var b = jQuery(this); b.parent().removeClass("hover"); if (!b.hasClass('active')) b.parent().removeClass('active'); });
    b.mousedown(function () { var b = jQuery(this); b.parent().removeClass("hover"); if (!b.hasClass('active')) b.parent().addClass('active'); });
    b.mouseup(function () { var b = jQuery(this); if (!b.hasClass('active')) b.parent().removeClass('active'); });
});
}
jQuery(function() { artButtonSetup("art-button"); });

/* end Button */

// adds spans to apply css styles for buttons with class "Button"
jQuery(function() { artButtonSetup("Button"); });

jQuery(function() {
// events for CCS AjaxPanel can be set with help of AjaxPanelEvents
if (typeof window.AjaxPanelEvents == "undefined") window.AjaxPanelEvents = [];
// when CCS AjaxPanel is updated the buttons should be decorated with spans again
window.AjaxPanelEvents.push({
    eventName: "afterUpdate",
    func: function(updatePanel) {
        // adds spans to apply css styles for buttons with class "Button"
        artButtonSetup("Button", updatePanel);
        // adds spans to apply css styles for buttons with class "art-button"
        artButtonSetup("art-button", updatePanel);
        }
    });
}); 
```

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:41:36.570

似乎`c`没有实例化，类似于`c = new` *任何东西*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:22:42.700

看起来你可能`jQuery.noConflit()`在你的项目中使用过，所以`$`不是`jQuery`对象。

所以改变

```
var c = $('div.art-content'); 
```

至

```
var c = jQuery('div.art-content'); 
```

# python - 使用 python-docx 跨越表格中多个列的单元格

> ID：15688389
> 
> 赞同：3
> 
> 时间：2013-03-28T17:30:02.367
> 
> 标签：python, openxml, python-docx

我正在尝试使用[python-docx](https://github.com/mikemaccana/python-docx)模块创建一个看起来像这样的表。

[![我要创建的表的示例](../Images/67a7e27e31320f7ae3f7b940680d25cd.png)](https://imgur.com/TO09jlO)

从 example-makedocument.py 中创建表的示例代码并阅读 docx.py 中的代码，我认为类似的东西会起作用：

```
tbl_rows = [ ['A1'], 
       ['B1', 'B2' ],
       ['C1', 'C2' ] ]
tbl_colw = [ [100],
       [25, 75],
       [25, 75] ]
tbl_cwunit = 'pct'

body.append(table(tbl_rows, colw=tbl_colw, cwunit=tbl_cwunit)) 
```

但是这会破坏 docx 文档，当 Word 恢复文档时，表格显示如下：

[![实际创建的表](../Images/dfc0986678712634f6f268ef7f71cbbc.png)](https://imgur.com/3CJkR6R)

如何使用 python-docx 让一行正确跨越多个列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-04T21:22:25.873

我在 python-docx 的行类中添加了一个 merge_cells() 函数，它可以合并单行上的任何单元格。我希望它会被包含在 python-docx 中。同时，您可以从[我的 github "merge_cells_feature" python-docx 分支](https://github.com/Apteryks/python-docx/tree/merge_cells_feature)中获取它。

我在这里复制我在[拉取请求](https://github.com/python-openxml/python-docx/pull/82)中写的示例以供参考：

```
from docx import Document

doc = Document()
table = doc.add_table(6,6)
header_row = table.rows[0]
header_row.merge_cells()

# args can also be passed to merge_cells(mergeStart, mergeStop) in order to 
# implement any kind of merge on the same row, such as:
table.rows[1].merge_cells(0,3)  # This will merge the cells indexed from 0 to 2. 
```

# c# - [ComVisible] 默认和公共类 COM 暴露是怎么回事？

> ID：15688395
> 
> 赞同：35
> 
> 时间：2013-03-28T17:30:31.617
> 
> 标签：c#, com, comvisible

MSDN 有[这篇关于`[ComVisible]`属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)的文章。我不太明白当一个集合时会发生什么`[ComVisible(true)]`。

MSDN 说

> **默认值为 true**，表示托管类型对 COM 可见。**使公共托管程序集**和**类型可见**，不需要此属性；默认情况下，它们对 COM 可见。只能使公共类型可见。

所以他们说公共类型默认对 COM 可见。但他们也说*只有公共类型可以*通过设置可见`[ComVisible(true)]`。这没有意义：如果公共类型默认可见，那么设置如何`[ComVisible(true)]`使公共类型可见？如果它们已经可见，它们将如何变得更加可见？

也许我的理解不正确。如果有人能对上述陈述有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-29T08:50:31.660

诀窍是您还可以在程序集级别（在 AssemblyInfo.cs 中）添加此属性。如果您指定`[assembly: ComVisible(true)]`（或未在程序集级别指定，因此默认情况下具有相同的效果），则所有公共类和接口及其公共方法默认变为 COM 可见。

您也可以`[assembly: ComVisible(false)]`在程序集级别进行设置，然后默认情况下所有公共实体将具有与它们相同的效果`[ComVisible(false)]`，因此您只能将那些`[ComVisible(true)]`您真正需要的类/接口/方法标记为 COM-visible ( )。

当您有很多公共实体时，这可以帮助您不要暴露太多，就像[这里](https://stackoverflow.com/q/1649752/57428)一样。如果没有这种机制，您将不得不设置`[ComVisible(false)]`您不想暴露的每个类/接口/方法。Using`[assembly: ComVisible(false)]`让你只暴露你需要的东西。

而且您只能`public`向 COM 公开实体（默认或显式） - 具有更严格可见性的实体不能向 COM 公开。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-28T17:40:35.507

> 当公共类型默认可见时，这是没有意义的，那么将 ComVisible 属性设置为 true [ComVisible(true)] 如何使公共类型可见。

它们默认可见，因为 ComVisibleAttribute 的默认值为 true。将属性显式设置为 true 不会改变任何内容，它只会让您的意图更加清晰。这是您找到[的文档](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)的第一行：

> 默认值为**true**，表示托管类型对 COM 可见。使公共托管程序集和类型可见，不需要此属性；默认情况下，它们对 COM 可见。只能使**公共**类型可见。该属性不能用于使其他内部或受保护的类型对 COM 可见或使不可见类型的成员可见。

基本上，你可以把它想象成编译器总是`[ComVisibleAttribute(true)]`默认添加到你的代码中，如果你不自己做的话。

您需要设置此属性的唯一原因是*防止*公共类型对 COM 可见（在这种情况下，您应将其设置为 false）。默认设置已经确保了它们的可见性。

显然，非公共类型（例如私有和受保护）不能也永远不会对 COM 可见。此属性对具有此类可访问性的类型没有影响。

# oauth - 是否有本质上是匿名的 oauth2 提供商（但可能存储信用卡信息）

> ID：15688396
> 
> 赞同：0
> 
> 时间：2013-03-28T17:30:39.023
> 
> 标签：oauth, paypal, oauth-2.0

不知道这是否是正确的地方，但......

标题总结了它 - 我们正在寻找一个没有 Facebook 或 Twitter 包袱但确实提供 oauth2 的 oauth2 提供商。奖金将是信用卡集成的某种形式（尽管是一个遥远的要求） 贝宝或条纹是否提供类似的东西？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:33:53.007

PayPal Access 是您可能正在寻找的[https://www.x.com/developers/paypal/documentation-tools/getting-to-know-paypal-access](https://www.x.com/developers/paypal/documentation-tools/getting-to-know-paypal-access)。你能解释一下信用卡整合部分吗？

# jquery - 无法正确设置多个系列 Flot 图

> ID：15688398
> 
> 赞同：0
> 
> 时间：2013-03-28T17:30:41.760
> 
> 标签：jquery, flot

我无法让这个 jquery FLOT 图与下面的数据集一起正常工作。不知道我做错了什么。JSON数据集和使其工作的javascript写在下面。谁能帮我让它工作。先感谢您。

这是我要使用的数据集。

```
var data = [
{
    "label": "Uncloaked",
    "data": [
            [10:22, 0]
                ,[10:14, 0]
                ,[09:30, 1]
                ,[09:29, 1]
                ,[09:27, 1]
                ,[09:28, 2]
                ,[09:26, 1]
                ,[09:18, 0]
                ,[09:16, 1]
                ,[09:15, 2]
                ,[09:11, 1]
                ,[09:10, 0]
                ,[09:09, 2]
                ,[09:08, 3]
                ,[09:07, 1]
                ,[09:06, 3]
                ,[09:05, 4]
                ,[09:04, 1]
                ,[09:03, 5]
                ,[09:02, 7]
                ,[09:01, 6]
                ,[09:00, 9]
                ,[08:59, 6]
                ,[08:58, 8]
                ,[08:57, 6]
                ,[08:56, 4]
                ,[08:55, 6]
                ,[08:54, 9]
                ,[08:53, 3]
                ,[08:52, 3]
                ,[08:51, 4]
                ,[08:50, 3]
                ,[08:49, 1]
                ,[08:48, 1]
                ,[08:47, 5]
                ,[08:46, 3]
                ,[08:45, 1]
                ,[08:44, 1]
                ,[08:43, 2]
                ,[08:42, 2]
                ,[08:41, 6]
                ,[08:40, 2]
                ,[08:39, 3]
                ,[08:38, 2]
                ,[08:37, 3]
                ,[08:36, 5]
                ,[08:35, 1]
                ,[08:34, 2]
                ,[08:33, 7]
                ,[08:32, 3]
                ,[08:31, 4]
                ,[08:30, 2]
                ,[08:29, 1]
                ,[08:28, 3]
                ,[08:27, 4]
                ,[08:26, 2]
                ,[08:25, 7]
                ,[08:24, 5]
                ,[08:23, 4]
                ,[08:22, 7]
                ,[08:21, 5]
                ,[08:20, 4]
            ]
},
{
    "label": "Cloaked",
    "data": [
            [10:22, 1]
                ,[10:14, 1]
                ,[09:30, 0]
                ,[09:29, 1]
                ,[09:27, 1]
                ,[09:28, 0]
                ,[09:26, 0]
                ,[09:18, 1]
                ,[09:16, 0]
                ,[09:15, 0]
                ,[09:11, 0]
                ,[09:10, 2]
                ,[09:09, 0]
                ,[09:08, 0]
                ,[09:07, 0]
                ,[09:06, 4]
                ,[09:05, 1]
                ,[09:04, 2]
                ,[09:03, 5]
                ,[09:02, 4]
                ,[09:01, 2]
                ,[09:00, 2]
                ,[08:59, 2]
                ,[08:58, 1]
                ,[08:57, 3]
                ,[08:56, 3]
                ,[08:55, 2]
                ,[08:54, 1]
                ,[08:53, 2]
                ,[08:52, 2]
                ,[08:51, 0]
                ,[08:50, 4]
                ,[08:49, 2]
                ,[08:48, 1]
                ,[08:47, 0]
                ,[08:46, 2]
                ,[08:45, 1]
                ,[08:44, 1]
                ,[08:43, 1]
                ,[08:42, 2]
                ,[08:41, 2]
                ,[08:40, 2]
                ,[08:39, 4]
                ,[08:38, 2]
                ,[08:37, 1]
                ,[08:36, 0]
                ,[08:35, 2]
                ,[08:34, 2]
                ,[08:33, 1]
                ,[08:32, 2]
                ,[08:31, 2]
                ,[08:30, 1]
                ,[08:29, 3]
                ,[08:28, 5]
                ,[08:27, 5]
                ,[08:26, 0]
                ,[08:25, 1]
                ,[08:24, 2]
                ,[08:23, 1]
                ,[08:22, 1]
                ,[08:21, 0]
                ,[08:20, 1]
            ]
}
] 
```

下面是我的 JS 代码。

```
$.plot("#site_statistics", data, {
    series: {
        lines: {
            show: true,
            lineWidth: 2,
            fill: true,
            fillColor: {
                colors: [{
                        opacity: 0.05
                    }, {
                        opacity: 0.01
                    }
                ]
            }
        },
        points: {
            show: true
        },
        shadowSize: 2
    },
    grid: {
        hoverable: true,
        clickable: true,
        tickColor: "#eee",
        borderWidth: 0
    },
    colors: ["#d12610", "#37b7f3", "#52e136"],
    xaxis: {
        mode: "categories",
        tickLength: 0
    }
}); 
```

我不知道为什么它不起作用。我一直在挠头来完成这项工作。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:41:01.430

试试这个： $.plot($(

注意 $ 和括号

并记得添加额外的右括号

# php - Wordpress，使用 cookie 进行网站重定向

> ID：15688413
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:31:11.303
> 
> 标签：php, wordpress, cookies

我在下面有这个网站，我正在玩一些 Wordpress 和 php cookie。[http://johnnylai.me/lotus](http://johnnylai.me/lotus)

我想要做的是，当用户第一次进来时，我希望他们在首页的两个链接中选择一个（这是一个单独的 WP 安装）。下次同一用户返回该站点时，我不希望他们再看到首页（b 4 cookie 已删除或过期），我希望他们直接访问两个站点之一 - [http://johnnylai .me/lotus/virksonhed](http://johnnylai.me/lotus/virksonhed)或[http://johnnylai.me/lotus/privat](http://johnnylai.me/lotus/privat) - 取决于第一次点击的内容。

我知道我需要一些 cookie 的东西，但是我不确定将文件放在哪里以及如何正确执行。

[我正在考虑在具有首页（ http://johnnylai.me/lotus](http://johnnylai.me/lotus) ）的 WP 安装中名为 function.php 的文件中的 sulition/php 代码，但不知道这是否是正确的方法它。

一些代码示例会很好:)

有任何帮助，谢谢！

```
<?php
    $expire=time()+60*60*24*30;
    setcookie("cat", "/cat1", $expire); 

    // But this is something with categoies in WP, that's not what i need.
?> 
```

并且

```
<?php
   function has_auth_cookie()
   {
     // See if cookie is set
     if(isset($_COOKIE['lotus'])){
       // Do nothing
       header('Location: johnnylai.me/lotus/???');
     }
       else
     { 
       // Do Something else 
       header('Location: johnnylai.me/lotus/'); 
     }

   }
   add_action('http://johnnylai.me/lotus/????', 'has_auth_cookie');
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:11:42.767

笔记：

1.  当您执行 header() 并将它们保留在现场时，您可以使用本地路径，因此

    header('位置：/lotus/');

2.  因为 $_COOKIE 是一个数组，所以当您检查 $_COOKIE 而不是 isset() 使用

    if(!empty($_COOKIE['cookiename']))

3.  如果出于某种原因您希望某人再次查看主页，则需要取消设置 cookie。

    setcookie ("cookiename", "", time() - 3600);

4.  如果人们不接受 cookie，除非您有其他识别方式，否则他们不会被重定向。

5.  要设置 cookie，您必须先传递它。您不能在设置 cookie 的页面上进行标头重定向，因为标头已经发送。

**PHP代码：**

```
<?php
  if(empty($_COOKIE['TestCookie'])){
    if(!empty($_GET['c'])){
      $cVar = $_GET['c'];
      //time to set some cookies
      switch($cVar){
        case '2':
        setcookie("TestCookie", '2');
        echo "Cookie 2 set. Reload the page.";
        break;

        default:
         //also covers hacking attempts
            setcookie("TestCookie", '1');
            echo "Cookie 1 set. Reload the page.";  
        }

    } else {
    // They're possibly a first time visitor or someone offsite 

    echo '<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Cookie Check</title>
</head>

<body>
<a href="?c=1">Set cookie 1</a>
<a href="?c=2">Set cookie 2</a>
</body>
</html>';

    }

} else {
    switch($_COOKIE['TestCookie']){

    case '2':
    //Send them to location 2
    header('Location: http://www.google.com/');
    break;

    default:
    //Send the to location 1
    header('Location: http://www.yahoo.com/');      
    }
}

?> 
```

# ruby-on-rails - 在 Ruby on Rails 中验证 Django 密码会给出不匹配的密码

> ID：15688414
> 
> 赞同：6
> 
> 时间：2013-03-28T17:31:12.367
> 
> 标签：ruby-on-rails, ruby, django, encryption

我正在用 Ruby on Rails 重写一个 Django 应用程序，并希望为用户保留旧密码。

Django 使用 PBKDF2SHA1 作为加密机制。所以我拥有的一个加密密码是这个

```
pbkdf2_sha256$10000$YsnGfP4rZ1IZ$Tpf4922MoNEjuJQA9EG2Elptyt3dMAyzBPUgmunFOW4= 
```

原来的密码是`2bulls`

在 Ruby 中，我使用 PBKDF256 gem 和 base64 进行检查。

```
Base64.encode64 PBKDF256.dk("2bulls", "YsnGfP4rZ1IZ", 10000, 32) 
```

我期待

```
Tpf4922MoNEjuJQA9EG2Elptyt3dMAyzBPUgmunFOW4= 
```

然而，我得到了

```
YEfK6oUGFHdaKZMDXC0Dz8TpwsJlKfqC5vjCxjo+ldU= 
```

有任何想法吗？

更新

如果对您更有意义，请在 django 源代码中找到代码。

```
class PBKDF2PasswordHasher(BasePasswordHasher):
    """
    Secure password hashing using the PBKDF2 algorithm (recommended)

    Configured to use PBKDF2 + HMAC + SHA256 with 10000 iterations.
    The result is a 64 byte binary string.  Iterations may be changed
    safely but you must rename the algorithm if you change SHA256.
    """
    algorithm = "pbkdf2_sha256"
    iterations = 10000
    digest = hashlib.sha256

    def encode(self, password, salt, iterations=None):
        assert password
        assert salt and '$' not in salt
        if not iterations:
            iterations = self.iterations
        hash = pbkdf2(password, salt, iterations, digest=self.digest)
        hash = base64.b64encode(hash).decode('ascii').strip()
        return "%s$%d$%s$%s" % (self.algorithm, iterations, salt, hash)

    def verify(self, password, encoded):
        algorithm, iterations, salt, hash = encoded.split('$', 3)
        assert algorithm == self.algorithm
        encoded_2 = self.encode(password, salt, int(iterations))
        return constant_time_compare(encoded, encoded_2)

    def safe_summary(self, encoded):
        algorithm, iterations, salt, hash = encoded.split('$', 3)
        assert algorithm == self.algorithm
        return SortedDict([
            (_('algorithm'), algorithm),
            (_('iterations'), iterations),
            (_('salt'), mask_hash(salt)),
            (_('hash'), mask_hash(hash)),
        ]) 
```

结论：

原来只有密码为 2bulls 的账户才有这个问题。其他账号没问题。当我知道 2bulls 密码不一致的确切原因时，我会在这里发布。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T00:50:40.510

如果您`2bulls`使用以下脚本（与 Django 用于哈希密码的逻辑相同）对该密码进行哈希处理，这就是您得到的（在 Django 的 shell 上运行）：

```
>>> import base64, hashlib
>>> hash = pbkdf2("2bulls","YsnGfP4rZ1IZ", 10000, 32, hashlib.sha256)
>>> hash.encode('base64').strip()
'YEfK6oUGFHdaKZMDXC0Dz8TpwsJlKfqC5vjCxjo+ldU=' 
```

请注意我如何使用您在 Ruby 中使用的相同参数：

```
password = "2bulls"
salt = "YsnGfP4rZ1IZ"
iterations = 10000
dklen = 32
digest = hashlib.sha256 
```

您确定您的预期哈希对应于密码`2bulls`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T20:32:23.380

为此，我刚刚发布了一个 gem。我也得到与@Daniel Aronne 相同的结果：

```
require 'pbkdf2_password_hasher'

puts Pbkdf2PasswordHasher::hash_password('2bulls','YsnGfP4rZ1IZ',10000,32)
#=> "YEfK6oUGFHdaKZMDXC0Dz8TpwsJlKfqC5vjCxjo+ldU=" 
```

# c# - 如何从具有 EF 模型的程序集中获取 csdl、ssdl 和 msl 规范

> ID：15688416
> 
> 赞同：2
> 
> 时间：2013-03-28T17:31:30.953
> 
> 标签：c#, .net, entity-framework, reflection

我想从具有 EF 模型的程序集中获取 csdl、ssdl 和 msl 规范。

使用反射：

```
//loading assembly
var assem = Assembly.LoadFile(assemblyWithEF.dll);
//get model
var model = assem.GetExportedTypes().Where(t => t.BaseType.Name == ObjectContext").First();

//get specification
var csdlStream = assem.GetManifestResourceStream("Model1.csdl");
var mslStream = assem.GetManifestResourceStream("Model1.msl");
var ssdlStream = assem.GetManifestResourceStream("Model1.ssdl");

var csdl = XElement.Load(csdlStream);
var msl = XElement.Load(mslStream);
var ssdl = XElement.Load(ssdlStream) 
```

问题是，如何以编程方式获取获取这些规范所需的 EDMX 文件的名称。在这种情况下，“模型 1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:17:19.003

由于 csdl、ssdl 和 msl 文件作为资源嵌入到程序集中，因此可以使用 [Assembly.GetManifestResourceNames 方法访问它们的名称](http://msdn.microsoft.com/library/system.reflection.assembly.getmanifestresourcenames.aspx)

# javascript - 命名 IIFE 和立即调用名称函数之间的区别？

> ID：15688420
> 
> 赞同：4
> 
> 时间：2013-03-28T17:31:40.377
> 
> 标签：javascript

和 IIFE 有什么区别吗

```
(function foo () {
    var var_of_concern;
}()); 
```

和一个简单的功能

```
function foo () {
   var var_of_concern;
}
foo(); 
```

与我有关的警告是，如果我没有从 IIFE 或函数中传递任何内容，IIFE 是否会使记忆保持更长时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:33:13.797

相反，尽管这可能不是一个严重的问题。

两者在语法上并不相同。第二个声明一个函数并将其绑定到本地符号“foo”。该函数将在函数调用后保留。

IIFE 形式在语法上是一个单一的表达式语句。第二种形式涉及*两个*语句，一个函数声明语句和一个表达式语句（函数调用）。

函数调用处理局部变量声明的方式与函数对象如何产生*无关。*如果您的示例中的两个函数相同，那么在函数调用中为局部变量分配空间的方式没有区别。

*编辑*——关键的**语法**区别在于：**新语句开头**`function`的关键字引入了函数声明语句。该句法形式不提供立即调用。也就是说，这个：

 **```
function hello() {
  // some code
}();  // <---- ERROR 
```

是语法错误。

当`function`关键字出现在任何其他上下文（嗯，任何有效的上下文）中时，它就**不是**函数声明——它是函数实例化（或函数定义；我必须检查规范）表达式。这些都是可以成为 JavaScript 表达式的一部分的东西：

```
 5
 "hello"
 false
 (2 + 5)
 (function() { alert("Hi!"); }) 
```

请注意，最后一个示例涉及括号 - 这通常用于“化解”“哦，看看函数声明！” 解析器的行为。左括号意味着`function`关键字不会出现在语句的绝对开头，因此它只是一个函数实例化表达式。**

# html - 我可以在没有 JS 的情况下自动将锚的 href 值放入其内容中吗？

> ID：15688429
> 
> 赞同：1
> 
> 时间：2013-03-28T17:32:30.497
> 
> 标签：html

为了快速编码和减少乏味，我想知道是否可以在**不使用 JavaScript****的情况下自动生成 HTML 锚的内容作为其`href`**值。我将在其中使用它的应用程序具有足够大的页面，以便 JavaScript 解决方案引入显着滞后。

例子：

```
<a href="http://example.com" class="autofill"></a> 
```

这可能吗？是否符合 W3C 标准？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:32:30.497

**是的，在一定程度上。**您可以使用 CSS2`content`属性及其`attr`值来获取锚点`href`属性的值。例如：

```
<style>
.autofill:after {
  content: attr(href);
}
</style>

<a href="http://example.com" class="autofill"></a> 
```

[http://jsfiddle.net/aA4Em/2/](http://jsfiddle.net/aA4Em/2/)

**这*不能*保证跨浏览器工作！**例如，在当前版本的 WebKit（Safari、Chrome、Yandex、Rockmelt、许多移动浏览器等）中，会呈现链接文本，但*无法*单击。也就是说，它可以在当前最常用的 Presto（Opera，即将被 WebKit 取代）、Trident（Internet Explorer）和 Gecko（Firefox、Waterfox 等）版本中正常工作。

请注意，我不知道这是否符合 W3C（我什至不知道空锚是否符合 W3C），所以我的回答肯定是**使用此解决方案，风险自负**。

## 更新

* * *

截至本次编辑 (2013-04-30)，Google 的**Chromium**平台风格的 Webkit（Chrome、Yandex、Rockmelt、许多移动浏览器等）和 Blink（目前只是 Chrome Canary）**现在允许用户单击锚点伪元素**。仍然运行在 Apple 风格的 WebKit 上的 Safari 仍然不允许这样做。

# symfony - 如何阻止 I Symfony 在会话中存储与用户类相关的对象？

> ID：15688431
> 
> 赞同：2
> 
> 时间：2013-03-28T17:32:32.127
> 
> 标签：symfony, doctrine

我有一个 Symfony2 应用程序，当用户登录时，它具有以下过程：

*   用户输入他们的登录详细信息
*   详细信息通过第 3 方 API 进行身份验证
*   如果登录详细信息正确，我们会将来自 API 的信息负载同步到应用程序需要的数据库中
*   所有信息都通过 Doctrine 中设置的关系附加到用户对象

问题是当 PDO 会话处理程序将此信息放入会话时，它似乎正在存储用户对象以及所有关系，从而导致存储大量数据，其中大部分是不需要的，因为 Doctrine 可以延迟加载它们反正。

这也会导致问题，因为数据量有时太大以至于它不适合 session_value 字段，即使它是导致会话损坏的 LONGTEXT 字段。

那么，有没有一种方法可以安全地从学说实体中删除关系数据，然后再将它们放入会话中？我试过使用 __sleep 和 __wake 但它们没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:59:49.403

实现[`Serializable`](http://www.php.net/Serializable)接口并仅序列化您需要的内容。

# ruby-on-rails - 在 ActiveRecord 对象中查找

> ID：15688432
> 
> 赞同：0
> 
> 时间：2013-03-28T17:32:34.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, rails-activerecord

我有一个页面可以显示*所有*客户的详细信息，或者如果在参数中指定，则仅显示*一个*客户的详细信息。

我的控制器看起来像这样。

```
def display_customers
  @all_customers = Customer.all
  if params[:customer_id]
    @customers = Customer.find(:all, conditions: ["id = ?", params[:customer_id]])
  else
    @customers = @all_customers
  end
end 
```

我`@all_customers`用来填充客户的下拉列表。
我曾经通过每个客户`@customers`执行一个`each`循环。
然后，如果`customer_id`指定了参数，`@customers`则将只是单个客户。

这工作得很好，但是`@customers = Customer.find(...)`是一个额外的数据库查询。
我已经拥有了所有的客户，`@all_customers`所以我认为有一种更好的方法可以从那里获取我需要的一条记录——而不是再次回到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:34:28.810

您可以使用[`find`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-find)内置于所有 Enumerables...

```
if params[:customer_id]
  @customer = @all_customers.find { |c| c.id == params[:customer_id] }
else
  #... 
```

...但可能不应该。

根据记录的数量，这可能不会更快，因为您的数据库查询将使用索引，上面的代码在所有返回的记录中使用线性搜索。很有可能第二个数据库查询是要走的路。

您还应该重写您的查询。Rails 足够聪明，您在通过 ID 查找记录时不必传递条件；你只要*找到*它。这些是相同的：

```
# BAD:
@customers = Customer.find(:all, conditions: ["id = ?", params[:customer_id]])

# BETTER:
@customers = Customer.find_by_id(params[:customer_id])

# BEST:
@customer = Customer.find(params[:customer_id]) 
```

如果你真的希望它是一个数组，只需将结果包装在`[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:15:25.753

这个怎么样

```
def display_customers
  @all_customers = []
  if params[:customer_id].empty?
    @all_customers = Customer.all
  else 
    @all_customers << Customer.find(params[customer_id])
  end
  @all_customers
end 
```

这边走

您的 " `select * from customers`" 查询只会在没有`customer_id`参数时执行（并非总是如此）。我相信它更有效，而不是从数据库中选择所有然后过滤

# android - 当我尝试查看多个表数据库中的条目时应用程序崩溃

> ID：15688433
> 
> 赞同：0
> 
> 时间：2013-03-28T17:32:34.717
> 
> 标签：android, android-sqlite

我在我的数据库中`weekone`创建了两个表。`weektwo`他们都成功地上传了数据库中的数据`EditTexts`，但是当我想通过按下`View`按钮查看数据库时，应用程序崩溃了。

这就是我如何将 Editext 中的条目保存在表中的数据库中`weekone`

```
String treadmillTimings = durOnTreadmill.getText().toString();

                DatabaseManager entry = new DatabaseManager(this);
                entry.open();
                entry.createEntry(treadmillTimings);
                entry.close();

                String stepperTimings = durOnStepper.getText().toString();

                DatabaseManager entry1 = new DatabaseManager(this);
                entry1.open();
                entry1.week1createEntry1(stepperTimings);
                entry1.close();

                String stationaryRowingTimings = durOnStationaryRowing.getText().toString();

                DatabaseManager entry2 = new DatabaseManager(this);
                entry2.open();
                entry2.week1createEntry2(stationaryRowingTimings);
                entry2.close();

                String exerciseBikeTimings = durOnExerciseBike.getText().toString();

                DatabaseManager entry3 = new DatabaseManager(this);
                entry3.open();
                entry3.week1createEntry3(exerciseBikeTimings);
                entry3.close();

                String ellipticalTrainerTimings = durOnEllipticalTrainer.getText().toString();

                DatabaseManager entry4 = new DatabaseManager(this);
                entry4.open();
                entry4.week1createEntry4(ellipticalTrainerTimings);
                entry4.close(); 
```

在表中写入条目`weekone`

```
//creating entry in table for treadmill in table week 1 with the help of ContentValues

public long createEntry(String treadmillTimings) 
{
    // TODO Auto-generated method stub

    ContentValues cv = new ContentValues();

    //enterting each exercise name corresponding to their respective edit Texts

    cv.put(KEY_EXERCISENAME, "Treadmill");
    cv.put(KEY_DURATION, treadmillTimings);

    return ourDatabase.insert(DATABASE_TABLE, null,cv);

}

//creating entry in table for stepperTimings in table week 1 with the help of ContentValues

public long week1createEntry1 (String stepperTimings)
{
    ContentValues cv1 = new ContentValues();
    cv1.put(KEY_EXERCISENAME, "Stepper");
    cv1.put(KEY_DURATION, stepperTimings);
    return ourDatabase.insert(DATABASE_TABLE, null,cv1);

}

//creating entry in table for Stationary Rowing in table week 1 with the help of ContentValues

public long week1createEntry2 (String stationaryRowingTimings)
{
    ContentValues cv2 = new ContentValues();
    cv2.put(KEY_EXERCISENAME, "Stationary Rowing");
    cv2.put(KEY_DURATION, stationaryRowingTimings);

    return ourDatabase.insert(DATABASE_TABLE, null,cv2);

}

//creating entry in table for exercise bike in table week 1 with the help of ContentValues

public long week1createEntry3 (String exerciseBikeTimings)
{
    ContentValues cv3 = new ContentValues();
    cv3.put(KEY_EXERCISENAME, "Exercise Bike");
    cv3.put(KEY_DURATION, exerciseBikeTimings);
    return ourDatabase.insert(DATABASE_TABLE, null,cv3);

}

//creating entry in table for elliptical trainer in table week 1 with the help of ContentValues

public long week1createEntry4 (String ellipticalTrainerTimings)
{
    ContentValues cv4 = new ContentValues();
    cv4.put(KEY_EXERCISENAME, "Stationary Rowing");
    cv4.put(KEY_DURATION, ellipticalTrainerTimings);
    return ourDatabase.insert(DATABASE_TABLE, null,cv4);

} 
```

显示数据库中的条目

```
//displaying/reading data in the table using cursor

public String week1getData() 
{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_EXERCISENAME, KEY_DURATION};
    Cursor cur = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    //creating a result(string type variable) to store the text and display it.

    String result = "";

    int iRow = cur.getColumnIndex(KEY_ROWID);
    int iExerciseName = cur.getColumnIndex(KEY_EXERCISENAME);
    int iDuration = cur.getColumnIndex(KEY_DURATION);

    // cursor start from the first position, keeps moving to the next as long as the position in not after that last.

    for(cur.moveToFirst(); !cur.isAfterLast(); cur.moveToNext())
    {
        /*getting the rows, exercise name and duration in the tables of database and setting it to result. 
          .The next time it loops, it will still have the prevoius result*/

        result = result + cur.getString(iRow) + "              " + cur.getString(iExerciseName) + "                            " + cur.getString(iDuration) + "\n";
    }

    return result;
} 
```

表的所​​有代码都是相同的，`weektwo`除了下面的

```
public String week2getData()      <------- ERROR IS IN THIS METHOD, BASED ON LOGCAT
{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_EXERCISENAME, KEY_DURATION};
    Cursor cur = ourDatabase.query(DATABASE_TABLE2, columns, null, null, null, null, null);

    //creating a result(string type variable) to store the text and display it.

    String result = "";

    int iRow = cur.getColumnIndex(KEY_ROWID);
    int iExerciseName = cur.getColumnIndex(KEY_EXERCISENAME);
    int iDuration = cur.getColumnIndex(KEY_DURATION);

    // cursor start from the first position, keeps moving to the next as long as the position in not after that last.

    for(cur.moveToFirst(); !cur.isAfterLast(); cur.moveToNext())
    {
        /*getting the rows, exercise name and duration in the tables of database and setting it to result. 
          .The next time it loops, it will still have the previous result*/

        result = result + cur.getString(iRow) + "              " + cur.getString(iExerciseName) + "                            " + cur.getString(iDuration) + "\n";
    }

    return result;

} 
```

`weektwo`另外，我对我所做的一切都做了同样的事情`weekone`。请告诉我我哪里错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:58:15.547

看到您的 logcat，当您尝试读取数据时，您的数据库似乎已关闭。我想建议不要那么频繁地打开和关闭数据库。这会在代码中造成很多混乱。您可以尝试在父 Activity（您传递的上下文）的 onCreate 处打开数据库，然后仅在 onDestroy() 中将其关闭。

编辑：您可以参考[此](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)设计模式。

编辑2：您可以通过仅打开数据库一次并且从不关闭它以查看问题是否消失来确认这是否是问题。如果确实如此，请参阅先前编辑中的链接文章。

# c++ - 从共享库中删除嵌入的源文件名

> ID：15688434
> 
> 赞同：1
> 
> 时间：2013-03-28T17:32:47.563
> 
> 标签：c++, shared-libraries

当我从源文件“secret.cc”构建共享库“mylib.so”时，生成的共享对象包含源文件名：

... **do_global_ctors_aux^@secret.cc^@__DTOR_END** ...

但我不想将该文件的名称（“secret.cc”）泄露给我图书馆的用户。有没有办法从共享对象中删除文件名信息，或者首先防止它被插入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:01:03.387

这很简单：不要让编译器从一开始就知道源的文件名。代替

```
g++ -std=c++11 -O3 -Wall -c my_source.cc -o my_source.o 
```

做这个：

```
cat my_source.cc | g++ -std=c++11 -O3 -Wall -c -x c++ - -o my_source.o 
```

请注意，您需要`-x c++`明确提供，错误消息显然不再包含文件名，并且还有一个额外的警告：当您的源包含相对包含时，即包含在引号 ( `#include "foo.hpp"`) 而不是尖括号 ( `#include <foo.hpp>`) 中，那些将不会更长的工作时间，因为编译器无法引用文件的目录，它只看到来自管道的字节流。

# sql-server-2008 - 使用加入、分组依据和拥有进行更新

> ID：15688435
> 
> 赞同：2
> 
> 时间：2013-03-28T17:32:54.297
> 
> 标签：sql-server-2008, tsql, sql-update, aggregate-functions

select 语句执行时没有错误或警告。

更新语句引发错误：
关键字“组”附近的语法不正确。

```
select [sSVsys].[textUniqueWordCount], count(*) as [actCount] 
from [docSVsys]  as [sSVsys]with (nolock)
join [FTSindexWordOnce] with (nolock)
  on [sSVsys].[sID] = [FTSindexWordOnce].[sID]
where [sSVsys].[sID] < 500000
group by [sSVsys].[sID], [sSVsys].[textUniqueWordCount] 
having [sSVsys].[textUniqueWordCount] <> count(*)

update [sSVsys]
set [sSVsys].[textUniqueWordCount] = count(*) 
from [docSVsys]  as [sSVsys]with (nolock)
join [FTSindexWordOnce] with (nolock)
  on [sSVsys].[sID] = [FTSindexWordOnce].[sID]
where [sSVsys].[sID] < 500000
group by [sSVsys].[sID], [sSVsys].[textUniqueWordCount] 
having [sSVsys].[textUniqueWordCount] <> count(*) 
```

如果答案是加入派生表，那么我可以弄清楚。
现有更新是否存在语法错误？

这个派生表有效

```
update [docSVsys] 
set [docSVsys].[textUniqueWordCount] = [WordOnce].[actCount]
from [docSVsys]
join 
(   select [FTSindexWordOnce].[sID], count(*) as [actCount]
    from   [FTSindexWordOnce] with (nolock)
    -- where  [FTSindexWordOnce].[sID] < 1500000
    group by [FTSindexWordOnce].[sID]  ) as [WordOnce]
 on [docSVsys].[sID] = [WordOnce].[sID]
and [docSVsys].[textUniqueWordCount] <> [WordOnce].[actCount] 
```

对于更好的方法，我会保留几天的任何评论或答案，然后删除。这种方法在现有的 SO 答案中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:51:04.680

您原来的更新语句有 GROUP BY 和 HAVING，这在 UPDATE 语句语法中是不允许的。这是指向语法图的链接： [UPDATE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177523.aspx)。

您的第二个版本将 GROUP BY 和 HAVING 作为派生表的一部分，这*是*允许的。

所以，是的：你确实有语法错误。

顺便说一句，我同意@bluefeet：CTE 代替派生表将使您的更新更易于阅读和理解。一件小事，但它可以在易于维护方面产生很大的不同。

# iphone - iPhone：单击按钮后重新启动应用程序？

> ID：15688437
> 
> 赞同：2
> 
> 时间：2013-03-28T17:32:55.513
> 
> 标签：iphone, ios, objective-c

我的应用程序有一个注销按钮，当用户点击该按钮时，我需要终止所有现有视图和后台任务（尽管我不想再次看到启动图像）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:39:27.400

我通常处理这个问题的方法是让 LoginViewController 成为带有 NavigationController 的应用程序的 RootViewController。在 LoginController 上，我将 NavigationBar 设置为隐藏。

那么它只是一个简单的。

```
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

并且您的所有视图都已消失/终止（如果您正确构建它们），因此您只需处理终止任何不受视图管理的后台进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:37:07.693

为了杀死视图，只需更改`rootViewController`.`window`

就像是

```
self.window.rootViewController = //The new view controller to be presented here 
```

为了杀死后台任务，它取决于任务的性质。如果您有对它们的引用，则可以在注销时手动杀死它们。

# string - 比较perl中的字符串变量

> ID：15688439
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:33:00.047
> 
> 标签：string, perl

我在 perl 中有一个 if 子句，作为条件，如果它们作为字符串匹配，我需要比较两个变量。但我的代码不起作用，字符串永远不匹配：

```
if(trim($file) eq trim($fields[0])) {
print "OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO";
} 
```

对于我使用的修剪的定义：

```
sub trim($)
{
   my $string = shift;
   $string =~ s/^\s*(.*?)\s*$/$1/;
  return $string;
} 
```

此外，我以前用它来比较变量。

```
my @fields= split(/\;/,$_); 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:33:20.493

你的代码是正确的，所以你的字符串是不同的。

为了找到差异，我推荐使用以下代码，因为它会显示仅通过打印字符串可能不会注意到的差异：

```
use Data::Dumper;
{
   local $Data::Dumper::Useqq=1;
   print Dumper($file, $fields[0]);
} 
```

* * *

顺便说一句，以下更优雅，可能更快：

```
sub trim {
   my $string = shift;
   $string =~ s/^\s+//;
   $string =~ s/\s+\z//;
   return $string;
} 
```

而 IIRC，以下内容甚至更快（因为可读性下降）：

```
sub trim {
   my $string = shift;
   $string =~ s/^\s+|\s++\z//g;
   return $string;
} 
```

# c# - 从我创建的启动快捷方式运行我的应用程序时出错

> ID：15688440
> 
> 赞同：1
> 
> 时间：2013-03-28T17:33:01.570
> 
> 标签：c#, winforms

我有一个表格。打开表单时，它将读取文件夹中的文本文件： (Debug)\Data\text.txt 并显示在文本框上......这真的是一个简单的表单。

在我设置我的表单在启动时运行之后

我使用这种方式在 Startup Folder 中创建我的程序快捷方式。

```
private void creatShortcut()
    {            
        WshShell = new WshShellClass();

        IWshRuntimeLibrary.IWshShortcut MyShortcut;            

        MyShortcut = (IWshRuntimeLibrary.IWshShortcut)WshShell.CreateShortcut(Environment.GetFolderPath(Environment.SpecialFolder.Startup)+"\\FaceLogin.lnk");           

        MyShortcut.TargetPath = Application.ExecutablePath;

        MyShortcut.Description = "Face Login";

         MyShortcut.IconLocation = Application.StartupPath + @"\Data\camera.ico";

        MyShortcut.Save();  
    } 
```

在我运行我的表格之后。它成功地在 Startup 文件夹中创建了一个快捷方式。我重新启动计算机进行测试，但它抛出了这个异常。

> 找不到路径“C:\Users\Key\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\data\face.fac”的一部分。

这是我阅读 face.fac 的代码

```
private void loadDuLieu()
    {
        FileStream fs = null;
        try
        {

            if (!File.Exists(Application.StartupPath + "\\data\\face.fac"))                   
                fs = File.Create(Application.StartupPath + "\\data\\face.fac");
            else                
                fs = File.OpenRead(Application.StartupPath + "\\data\\face.fac");

                BinaryFormatter bf = new BinaryFormatter();

                if (fs != null)                        
                    lstDSMat = (List<Face>)bf.Deserialize(fs);
            }
        }
        catch (Exception ex)
        {
            return;
        }
        finally
        {
            if (fs != null)
                fs.Close();
        }
    } 
```

这意味着我的程序在启动文件夹中找不到“data\face.fac”。我不明白，因为启动文件夹只有我的程序快捷方式，没有别的。

我如何解决这个问题以在 Startup 中运行我的人脸登录程序而不会出现该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:36:17.210

只需`WorkingDirectory`使用此行为您的应用程序设置：

```
MyShortcut.WorkingDirectory = Path.GetDirectoryName(Application.ExecutablePath); 
```

问题是，当**不**设置工作目录时，应用程序会查找快捷方式所在目录中的所有内容。

# c# - TPL 等待好奇心

> ID：15688444
> 
> 赞同：0
> 
> 时间：2013-03-28T17:33:10.337
> 
> 标签：c#, multithreading, task-parallel-library

我在玩**TPL**，发现了一些很奇怪的东西。代码等待任务结束，做这个虚拟测试，发现`Wait`调用后执行了几个任务。我错过了什么，或者这是一个 TPL 问题？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Task tareas = null;

            Console.WriteLine("Start process");
            for (int i = 0; i < 4000; i++)
            {
                var n = i.ToString();
                tareas = Task.Factory.StartNew(() =>
                {
                    var random = new Random();
                    Thread.Sleep(random.Next(200, 500));

                    Console.WriteLine("Task completed: " + n);
                });
            }

            tareas.Wait();

            Console.WriteLine("Process end");

            Console.Read();
        }
    }
} 
```

输出：

```
Start process
Task completed: 4
Task completed: 3

...

End process
Task completed: 3996
Task completed: 3991
Task completed: 3993 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:36:59.933

好吧，`tareas.Wait();`只等待**您创建的最后一个任务完成**。由于您的任务在随机时间内完成，因此一旦您创建的最后一个任务完成，某些任务尚未完成是完全正常的。

以下是可能发生的情况的示例：

```
Task 1 created
Task 2 created
Task 3 created
Task 4 created

Task 1 completed
Task 3 completed

Wait for task 4 completion
Task 4 completed

// task 2 executed during more time than other 
// tasks because of the random value the thread waited
Task 2 completed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:41:06.193

正如其他人所指出的，您只等待一个任务，即最后一个计划的任务。

默认情况下安排的任务使用线程池来执行[此处](http://msdn.microsoft.com/en-us/library/dd997402.aspx)`TaskScheduler`描述的工作项。使用此调度程序，无法保证排序。框架将尝试平衡池中每个线程上运行的队列，但有可能（并且并不罕见）放置最后一个计划任务的队列将在其他队列之前完成其所有任务的运行。

这甚至不考虑`Wait`. 查看我链接的文档中标记为“任务内联”的部分——如果正在等待任务，执行等待的线程可以说‘好吧，在这个任务完成之前我什么都做不了，让我看看我是否可以自己去执行”。在这种情况下，任务会完全从线程池队列中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:39:23.267

taereas 将包含对您最后创建的线程的引用，因此 treas.Wait() 将仅等待最后一个线程完成，因此即使在您的最后一个线程完成后其他线程也可能运行。

# ios - 在模拟器上打开 UIManagedDocument 需要很长时间

> ID：15688446
> 
> 赞同：1
> 
> 时间：2013-03-28T17:33:15.347
> 
> 标签：ios, xcode, uimanageddocument

我正在寻找快速解决 iPhone 模拟器问题的方法。

我用来访问我的数据库的代码是：

```
+ (NSURL*) databaseURL
{
if(!databaseURL){
    databaseURL = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    databaseURL = [databaseURL URLByAppendingPathComponent:databaseNameString];
}
return databaseURL;
}
+ (UIManagedDocument*) managedDocument
{
if(!managedDocument){
    managedDocument = [[UIManagedDocument alloc] initWithFileURL:[FLOWDatabase databaseURL]];
}
return managedDocument;
}

 + (void) initialiseDatabase
 {

if ([[NSFileManager defaultManager] fileExistsAtPath:[[FLOWDatabase databaseURL] path]])
    [managedDocument openWithCompletionHandler:^(BOOL success) {
 //...
    }];
else
    [managedDocument saveToURL:[FLOWDatabase databaseURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success){
 //...
    }];
 } 
```

问题是，它在实际的 iPhone 上完美运行，但在模拟器上却不行。延迟时间（40 秒）用于初始创建以及编辑现有文件。

我已经尝试过“重置内容和设置”，在 xcode 上清理，在模拟器上删除 + 重建应用程序 - 这些都不起作用。

接下来做什么？

维生素B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:43:49.613

我尝试重新安装 Xcode，但它没有工作。

我找到的解决方案是在每次使用后手动删除持久存储文件。

这样就解决了问题。

# javascript - 为什么我的图像不会滚动？

> ID：15688447
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:33:17.630
> 
> 标签：javascript, html, css, slideshow, onmouseover

这是我的网站：

紫罗兰色.com

我想对主页图像进行编程以在滚动时更改。

这是我的javascript：

```
<!-- Photo __________________________________________-->

    <div id="home_photo">

        <img id="home_photo" src="images/photo/1.jpg" />
                <script type="text/javascript">
                var myimages=[
                "images/photo/1.jpg",
                "images/photo/2.jpg",
                "images/photo/3.jpg",
                "images/photo/4.jpg",
                "images/photo/5.jpg",
                "images/photo/6.jpg",
                "images/photo/7.jpg",
                "images/photo/8.jpg",
                "images/photo/9.jpg",
                "images/photo/10.jpg",
                "images/photo/12.jpg",
                "images/photo/13.jpg",
                "images/photo/14.jpg",
                "images/photo/15.jpg",
                "images/photo/16.jpg",
                "images/photo/18.jpg",
                "images/photo/19.jpg",
                "images/photo/20.jpg",
                "images/photo/21.jpg",
                "images/photo/22.jpg",
                "images/photo/23.jpg",
                ]
                var slideshow=document.getElementById("slideshow")
                var nextslideindex=0
                function rotateimage(e){
                var evt=window.event || e
                var delta=evt.detail? evt.detail*(-120) : evt.wheelDelta
                nextslideindex=(delta<=-120)? nextslideindex+1 : nextslideindex-1
                nextslideindex=(nextslideindex<0)? myimages.length-1 : (nextslideindex>myimages.length-1)? 0 : nextslideindex
                slideshow.src=myimages[nextslideindex]
                if (evt.preventDefault)
                evt.preventDefault()
                else
                return false
                }
                var mousewheelevt=(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel"

                if (slideshow.attachEvent)
                slideshow.attachEvent("on"+mousewheelevt, rotateimage)
                else if (slideshow.addEventListener)
                slideshow.addEventListener(mousewheelevt, rotateimage, false)
                </script>
    </div> 
```

如您所见，我有 23 张图像在滚动时应该会发生变化。我找不到问题所在。

也许我的 div 中的某些东西搞砸了？或者我滥用了 id 元素？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:39:30.067

首先，您将幻灯片变量设置为不存在的元素。“幻灯片”元素在哪里？Jan 是对的，ID 必须是唯一的。

如果您还没有[Firebug for FireFox](https://getfirebug.com/downloads) ，我建议您购买它，它对于调试 javascript 非常有用。

# c++ - Debian 的 Makefile - main 中的函数调用

> ID：15688449
> 
> 赞同：0
> 
> 时间：2013-03-28T17:33:19.250
> 
> 标签：c++, function, makefile, debian

所以我有这个结构：

simpleConnect.cpp（包含 main）调用 feature_extract.cpp

feature_extract.cpp（在这里做一些事情，返回simpleConnect）

ThesisHeader.h （有 feature_extract 的声明和所有的包含等...）

现在...这些文件使用一个名为 ARIA 的库（用于移动机器人）和一组头文件 - EIGEN（用于矩阵操作等）

我曾经建议 Aria 的结构如下：

```
SOURCES=simpleConnect
all: $(SOURCES)

CFLAGS=-fPIC -g -Wall
ARIA_INCLUDE =-I/usr/local/Aria/include
ARIA_LINK=-L/usr/local/Aria/lib -lAria -lpthread -ldl -lrt

%: %.cpp
        $(CXX) $(CFLAGS) $(ARIA_INCLUDE) $< -o $@ $(ARIA_LINK) 
```

但是我在调​​用函数 feature_extract 的那一行遇到了这个错误：

未定义对“feature_extract(……)”的引用 collect2: ld reurned 1 exit status

据我所知，这与我没有告诉编译器 feature_extract 存在有关......因为我不知道如何......

我尝试添加我在网上找到的作品，但无济于事，因此我来这里问。

任何人都可以修改makefile以包含该文件以便能够编译吗？

谢谢你的时间，帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:16:20.520

1.  这个应用程序需要 `feature_extract`。
2.  您将“来源”用于来源以外的其他内容。

```
CFLAGS=-fPIC -g -Wall
ARIA_INCLUDE =-I/usr/local/Aria/include
ARIA_LINK=-L/usr/local/Aria/lib -lAria -lpthread -ldl -lrt

app_name: simpleConnect.cpp feature_extract.cpp
    $(CXX) $(CFLAGS) $(ARIA_INCLUDE) $^ -o $@ $(ARIA_LINK) 
```

如果这可行，则可以进行进一步的改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:44:33.830

感谢帮助的人，我设法解决了这个问题。

我最终阅读了 GNU make 手册，它解决了我的问题。

[https://www.gnu.org/software/make/manual/make.pdf](https://www.gnu.org/software/make/manual/make.pdf)

这是最终工作的最终生成文件：

```
 CFLAGS=-fPIC -g -Wall
ARIA_INCLUDE =-I/usr/local/Aria/include
ARIA_LINK=-L/usr/local/Aria/lib -lAria -lpthread -ldl -lrt

edit : simpleConnect.o feature_extract.o
        $(CXX) $(CFLAGS) $(ARIA_INCLUDE) -o edit simpleConnect.o
feature_extract.o $(ARIA_LINK)

simpleConnect.o : simpleConnect.cpp ThesisHeader.h feature_extract.cpp
        $(CXX) $(CFLAGS) $(ARIA_INCLUDE) -c simpleConnect.cpp $(ARIA_LINK)

feature_extract.o : feature_extract.cpp ThesisHeader.h
        $(CXX) $(CFLAGS) $(ARIA_INCLUDE) -c feature_extract.cpp $(ARIA_LINK)

clean :
        rm edit simpleConnect.o feature_extract.o 
```

# c# - datagridview 的自定义查询

> ID：15688450
> 
> 赞同：0
> 
> 时间：2013-03-28T17:33:26.107
> 
> 标签：c#, datagridview

我目前正在用 C# 构建一个应用程序。在这个应用程序中，人们在标签中给出值，这些值将保存在数据库中。这在目前也有效。我想要的是以下内容：

人们可以在 datagridview 中看到他们自己的价值观。如果我使用 datagridview 的向导执行此操作，我将无法选择 label2.Text（这是 customerID）。

我在下面使用的查询如下：

```
SELECT * FROM prestaties WHERE gebruikerid = '" + label1.Text + "'"; 
```

但它不起作用。我在我的数据网格中看不到任何东西。

对不起，我的英语不好。我希望你能理解我。

下面的代码我已经有了，但它不起作用

* * *

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    using System.Data.OleDb;

    namespace Eindopdracht
    {
        public partial class resultaten : Form
        {
            public resultaten()
            {
                InitializeComponent();
                dataGridView1.Show();

                           }

            private string username;

            public void displaydata(String ddata)
            {

                OleDbConnection conn = new OleDbConnection(@"provider= microsoft.jet.oledb.4.0;data source=C:\\Users\\Jeffrey\\Desktop\\Eindopdracht WOE\\Eindopdracht\\sample.mdb");
                string select = "SELECT * FROM prestaties WHERE gebruikerid = '" + label2.Text + "'";

                conn.Open();
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(select, conn);
                DataSet ds = new DataSet();
                dataAdapter.Fill(ds);
                dataGridView1.DataSource = ds.tables[0];
                conn.Close();
            }

              public void setUsername(String name)
            {
                username = name;

                label1.Text = username;
                setID();
            }

            public void setID()
            {
                OleDbConnection vcon = new OleDbConnection(@"provider= microsoft.jet.oledb.4.0;data source=C:\\Users\\Jeffrey\\Desktop\\Eindopdracht WOE\\Eindopdracht\\sample.mdb");
                string selectie = "SELECT id FROM inlog WHERE Username='" + label1.Text + "'";

                OleDbCommand vcom1 = new OleDbCommand(selectie, vcon);
                vcon.Open();
                vcom1.ExecuteNonQuery();

                OleDbDataReader dr = null;
                dr = vcom1.ExecuteReader();
                while (dr.Read())
                {
                    var waarde = dr.GetValue(0);
                    label2.Text = waarde.ToString();

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:42:47.597

我不知道我的代码是否 100% 正确。我自己建造了这个。`displayData`如果我在旁边的开始中使用该类，`InitializeComponent();`我将收到错误消息。

# c++ - C++。模板和运行时用户信息

> ID：15688452
> 
> 赞同：0
> 
> 时间：2013-03-28T17:33:35.010
> 
> 标签：c++, templates, polymorphism, numerical-integration

我一直在尝试更多地了解泛型编程，因为我认为我对此了解的不够多。所以我正在考虑如何实现我的一个程序的模板版本。我尝试使用的程序是一个数值积分器程序，用户在其中选择要使用的积分器（即 Euler、Runge Kutta 等），然后对他们选择的任何函数进行积分。我目前这样做的方法是拥有一个名为 Integrator 的抽象基类，以及几个实现集成方法的派生类。所以代码看起来像这样（还有很多事情要做，但这只是为了展示方法）。请注意，我为此使用 Qt 并声明了一个 Integrator *integrator; 在 MainWindow 类中。

```
void MainWindow::on_integrateButton_clicked() {
string whichIntegrator = getUserChoice();

integrator = getIntegrator( whichIntegrator, whichFunction, order );
integrator->setUp( data ); // things like initial conditions, time, step size, etc...

runIntegratorInNewThread();
} 
```

使用 getIntegrator 本质上使用工厂方法

```
// x being current data, xdot being the results of evaluating derivatives
typedef void (*pFunction)(const double t, const double x[], double *xdot);

Integrator* getIntegrator( const string &whichIntegrator, pFunction whichFunction, int order  ) {
    if (whichIntegrator == "Euler") {
        return new Euler(whichFunction, order);
    } else if (whichIntegrator == "RungeKutta") {
        return new RungeKutta(whichFunction, order);
    }
} 
```

所以这个方法效果很好，积分器程序运行的很好。现在我知道模板函数是在编译时生成的，并且考虑到我正在使用运行时信息，你将如何使用模板来实现它？如果问题不清楚，我要问的是......在运行时给定用户选择，即使用哪个积分器，我如何使用模板方法调用正确的积分函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:44:25.920

模板不是灵丹妙药，虽然你可以用它们做很多事情，但不要低估你当前使用的多态性的力量。

这可以用模板完成吗？答案是肯定的，使用 C++11 和 shared_ptr 看起来像这样：

```
template<class T>
std::shared_ptr<T> getIntegrator(pFunction whichFunction, int order)
{
    return std::make_shared<T>(whichFunction, order);
} 
```

在你的来电者中：

```
std::shared_ptr<Integrator> integrator;
if (whichIntegrator  == "Euler")
{
    integrator = getIntegrator<Euler>(whichFunction, order);
}
else if(whichIntegrator  == "RungeKutta")
{
    integrator = getIntegrator<RungeKutta>(whichFunction, order);
} 
```

另一个注意事项是，你应该非常小心这里的内存泄漏，你正在更新和反对，如果你从不释放它，你就会有泄漏。

**话虽如此，我希望这个答案表明虽然您可以使用模板，但在这种情况下我不会推荐它，多态在这里工作得很好。这个例子只是在一个非常简单和冗余的情况下展示了模板的实际应用**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:13:38.537

假设我想用静态类型的积分器编写整个系统。

我会拿你的`on_integrateButton_clicked`，把它改成这样：

```
void MainWindow::on_integrateButton_clicked() {
  string whichIntegrator = getUserChoice();

  runInNewThread( [whichIntegrator,whichFunction,order]() {
    struct functor {
      FunctionType func;
      OrderType order;
      functor( FunctionType func_in, OrderType order_in):func(std::move(func_in)), order(std::move(order_in)) {}
      template<typename Integrator>
      void operator()( Integrator* integrator ) {
        // code using integrator here, not a virtual interface to it, an actual instance of the final type
      }
    };
    RunWithChosenIntegrator( whichIntegrator, functor(whichFunction,order) );
  } );
} 
```

如您所见，代码似乎有点倒退。

我们尽可能地推迟类型选择，然后我们`functor`用指向积分器的指针调用它。这意味着使用积分器的代码具有积分器的完整类型信息，而不是抽象地处理它。

但是，通常，运行时多态性或类型擦除就足以解决这类问题。

现在，`RunWithChosenIntegrator`是一个有点奇怪的野兽。它会有一个看起来像这样的签名：

```
template<typename Functor>
void RunWithChosenIntegrator( std::string const&whichIntegrator, Functor&& func ) {
  if (whichIntegrator == "bob") {
    BobIntegrator bob;
    func( &bob );
  } else if (whichIntegrator == "alice" ) {
    AliceIntegrator alice;
    func( &alice ):
  }
} 
```

如您所见，我们`func`根据`whichIntegrator`参数调用不同类型的对象。您甚至可以使用元编程生成`if`/`else if`链的有趣方式，但在您对基本模板编程更加熟悉之前，这可能不值得学习。

`Functor` `func`需要能够接受指向我们调用它的任何和所有类型的指针。一个简单的例子可能是`func`只接受一个指向基类的指针，而我上面给出的那个接受一个`T*`模板类型。

只有当运行时多态的开销太高，或者您实际上需要以非统一的方式与不同的集成器类进行交互时，所有这些都是值得做的，而这种方式很难或不可能通过运行时多态来捕获。

我怀疑这里的情况。

# sql - 使用单个映射表将一个表映射到多个表

> ID：15688459
> 
> 赞同：0
> 
> 时间：2013-03-28T17:33:55.067
> 
> 标签：sql, database-design, one-to-many

假设我有一个表 EmailQueue，用于构建要发送给用户的电子邮件，使用几个不相关的进程。电子邮件可以包含越来越多的不同“内容项”，但现在我们只说我们有新闻、事件和优惠。这些“内容项”中的每一个都已填充到各自的表格中，并将有选择地添加到用户的电子邮件中。

现在我要做出设计决定。

**1**
我可以保持标准化模式，并为电子邮件可以包含的每个“内容项”创建一个映射表。

```
|EmailId|NewsId| , |EmailId|OfferId| , ... 
```

我看到这种设计的主要问题是每次将新的“内容类型”集成到电子邮件系统时都会产生大量开销。在数据库和对象映射中。

**或者**

**2**
我可以创建 1 个具有类型引用的映射表。

```
 |EmailId|ContentID|ContentType| 
```

当然，这里最大的问题是没有参照完整性。我觉得对象映射会更容易处理，并且添加一个新对象只需要添加一个新`ContentType`行（当然还有所需的对象映射代码）。

**这些解决方案中的一种是否比另一种更好？或者有没有比我不知道的这两个更好的解决方案？**

我倾向于使用方法2，主要是因为这个项目需要快速开发，但担心我可能会后悔这个决定。

*注意：我们使用亚音速作为我们的数据访问 ORM，它在通过键控关系处理对象图方面做得不错（并不完美）。不过，我仍然可能需要将活动记录“内容”对象映射到域对象。*

# python - 如何使用 Sqlite3 使用列表中的值更新整个列

> ID：15688462
> 
> 赞同：4
> 
> 时间：2013-03-28T17:33:58.227
> 
> 标签：python, sqlite

我有一个本地存储在 sqlite3 数据库中的数据集。我提取了一个列，执行了一些操作，现在想要替换数据库列中的所有值。我怎样才能做到这一点？

列和列表的长度保证是相同的长度。我只是想用新值更新表。有没有一种简单的方法可以一次完成这一切？

使用 python 2.7

编辑添加：

myList 是一个由 dtype 'object' 的 numpy 数组支持的 pandas 系列。表格列 myCol 是文本格式。

```
In [1]: curr.execute('UPDATE test SET myCol= ?', myList)

---------------------------------------------------------------------------
ProgrammingError                          Traceback (most recent call last)
f:\python\<ipython-input-52-ea41c426502a> in <module>()
----> 1 curr.execute('UPDATE test SET myCol = ?', myList)

ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 401125 supplied. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T17:35:11.677

请改用以下[`.executemany()`方法](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.executemany)：

```
curr.executemany('UPDATE test SET myCol= ?', myList) 
```

但是，这里`myList` *必须*是一个元组序列。如果不是，生成器表达式将创建这些元组：

```
curr.executemany('UPDATE test SET myCol= ?', ((val,) for val in myList)) 
```

演示（带插入）：

```
>>> import sqlite3
>>> conn=sqlite3.connect(':memory:')
>>> conn.execute('CREATE TABLE test (myCol)')
<sqlite3.Cursor object at 0x10542f1f0>
>>> conn.commit()
>>> myList = ('foo', 'bar', 'spam')
>>> conn.executemany('INSERT into test values (?)', ((val,) for val in myList))
<sqlite3.Cursor object at 0x10542f180>
>>> list(conn.execute('select * from test'))
[(u'foo',), (u'bar',), (u'spam',)] 
```

请注意，对于`UPDATE`语句，您*必须*有一个`WHERE`语句来标识要更新的*行。*`UPDATE`没有过滤器的将`WHERE`更新*所有*行。

确保您的数据有一个行标识符；在这种情况下，使用命名参数可能更容易：

```
my_data = ({id=1, value='foo'}, {id=2, value='bar'})
cursor.executemany('UPDATE test SET myCol=:value WHERE rowId=:id', my_data) 
```

# c++ - 有什么办法可以缩短这个时间吗？

> ID：15688464
> 
> 赞同：0
> 
> 时间：2013-03-28T17:34:06.747
> 
> 标签：c++

输出应该是这种方式

```
I
IN
IND
INDI
INDIA
INDIA
INDI
IND
IN
I 
```

我想知道是否有办法让我的程序更短。

也许使用 2 个`while`循环或 2 个`for`循环而不是 4 个。

```
#include<iostream>
#include<conio.h>
using namespace std;
void main()
{
    char a[]={'I','N','D','I','A'};
    int r,c;
    for(r=1;r<=5;r++)
    {
        for(c=0;c<r;c++)
            cout<<a[c]<<" ";
        cout<<endl;
    }

    for(r=5;r>=0;r--)
    {
        for(c=0;c<r;c++)
            cout<<a[c]<<" ";
        cout<<endl;
    }
    _getch();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T17:47:20.860

如果你有 C++11，这很好很简短：

```
#include <stdio.h>
#include <initializer_list>
int main() {
    for (int i : {1,3,5,7,9,9,7,5,3,1})
        printf ("%.*s\n", i, "I N D I A") ;
} 
```

我把它放在[这个链接](http://ideone.com/YKfMwa)的ideone上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:04:31.060

“作弊” ;-) 但很短的解决方案是

```
#include <cstdio>
int main() {
    puts("I\nIN\nIND\nINDI\nINDIA\nINDIA\nINDI\nIND\nIN\nI\n");
} 
```

基于**TonyK**的绝妙想法的另一个解决方案（适用于 C 和 C++）：

```
#include <stdio.h>
int main() {
    for (int i = 1; i < 11; ++i)
        printf("%.*s\n", i < 6 ? i : 11 - i, "INDIA") ;
} 
```

**更新：（**在 TonyK 发表评论后）：

如果你想要空格，然后`printf`用这个替换上面的

```
printf("%.*s\n", 2*(i < 6 ? i : 11 - i), "I N D I A "); 
```

**更新：**没有循环的解决方案：

```
#include <stdio.h>
int main(int i, char**) {
    return printf("%.*s\n", i < 6 ? i : 11 - i, "INDIA") - 1 && main(i + 1, 0);
} 
```

以下为初学者的利益的详细解释。

**最重要的一点是，这是一个“学术”练习。代码晦涩难懂，应该避免编写这样的严肃代码。**

该标准没有为 function 修复特定的签名`main`。它只是说它必须返回一个`int`并且编译器必须接受两种特定的形式：

1.  `int main();`
2.  `int main(int argc, char** argv);`

我正在使用第二个。更流行的形式`int main(int argc, char* argv[])`等价于（2）。实际上，通常，用作函数参数*的 T 数组被隐式转换为**指向 T*的指针。在这个例子中，是一个*指向 char*`char* argv[]`的指针数组，它变成了*指向 char*的指针。上面的程序虽然没有使用第二个参数（它要么被忽略，要么被赋予 NULL，即 0 值）。

 **程序不是循环，而是`main`递归调用。实际上，这是**非法**的，但主要编译器对此视而不见（如果您要求它使用选项 -Wpedantic 迂腐，最多 GCC 会发出警告）。**当从没有参数**的命令行调用程序时，操作系统调用`main`传递`1`（即`1`+ 参数的数量）和*指向 char 的指针的指针，如前所述*，该程序将忽略该指针。因此，`i = 1`在第一次通话时。

随后，每次都`main`可能称自己为递增。`i`总而言之，`main`依次调用`i`being `1`, `2`, `3`, `4`, ...

很容易看出，对于 的这个值序列`i`，表达式的计算`i < 6 ? i : 11 - i`结果为`1`, `2`, `3`, `4`, `5`, `5`, `4`, `3`, `2`, `1`, `0`, ...保存一行；-) 这些数字是每次应显示的“印度”字符数`5.5 - abs(5.5 - i)`。`#include <cmath>`

调用`printf("%.s\n", j, "INDIA")`，其中`j = i < 6 ? i : 11 - i`，显示`j`“印度”的第一个字符，后跟一个新行，并返回有效打印的字符数（包括新行），即`j + 1`。带走`1`收益`j`。

`a && b`我们现在回忆一下, 对于整数`a`和的语义的一个重要点`b`。如果`a == 0`，`b` **则不计算**。否则，`b`被评估。对我们来说，`a = printf("%.*s\n", j, "INDIA") - 1`（即`a = j`）和`b = main(i + 1, 0)`。

现在，让我们把这些部分放在一起。

**1.**最初，`i = 1`和`j = 1`。调用`printf`输出 "I\n" 并返回`2`. 带走`1`，给`a = 1 != 0`。因此，`b = main(2, 0)`被评估（`main(2, 0)`即被调用）。

**2.**好吧，对于第二次调用`main`，我们有`i = 2`，`j = 2`，`printf`显示“IN\n”，`a = 2 != 0`并被`b = main(3, 0)`评估。

重复这个论点，每次调用`main`我们都有：

**3.** `i = 3` , `j = 3`, "IND\n" 被打印，`a = 3 != 0`并被`main(4, 0)`调用。

**4.** `i = 4` , `j = 4`, "INDI\n" 被打印，`a = 4 != 0`并被`main(5, 0)`调用。

**5.** `i = 5` , `j = 5`, "INDIA\n" 被打印，`a = 5 != 0`并被`main(6, 0)`调用。

**6.** `i = 6` , `j = 5`, "INDIA\n" 被打印，`a = 5 != 0`并被`main(7, 0)`调用。

**7.** `i = 7` , `j = 4`, "INDI\n" 被打印，`a = 4 != 0`并被`main(8, 0)`调用。

...

**10.** `i = 10` , `j = 1`, "I\n" 被打印，`a = 1 != 0`并被`main(11, 0)`调用。

**11.** `i = 11` , `j = 0`, "\n" 被打印出来, `a = 0`. 现在`main(12, 0)`不执行，`main`返回

请注意，`main`在第 1 步中调用第 2 步，`main`在第 2`main`步中调用`3`，...`main`在第 11 步中调用。因此，`main`在第 11 步中返回到`main`第 10 步，`main`在第 9 步中返回，...，在第 9 步中`main`返回步骤1。最后，`main`在步骤1中返回操作系统。

如果您对更加模糊的代码感兴趣，请查看[IOCCC](http://www.ioccc.org/)的现在和过去的获奖者。享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:51:34.820

更短。

```
#include <iostream>
#include <cmath>

int main()
{
    char a[]={'I','N','D','I','A'};
    for(int r=1;r<=10;r++)
    {
        int c = 5.5 - std::abs(5.5 - r);
        std::cout << std::string(a, 0, c) << std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:41:47.620

你可以使用[substr](http://www.cplusplus.com/reference/string/string/substr/)。

此外，如果您想在字符之间添加空格（因为它现在在您的代码中），您可以对整个单词执行一次，然后处理修改后的字符串：

```
input = "INDIA";
modifiedInput = ...; // Figure out a way to get "I N D I A " here
for (int i = 1; ...)
    cout << substr(modifiedInput, 0, 2 * i) << endl;
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T17:44:17.367

像这样的smth：无论如何，2个循环很难）

```
 int i=1;
bool ind=0;
     for(r=0;r<10;r++)
      {
if (ind == 0){
          for(c=0;c<i;c++)
              cout<<a[c]<<" ";
    i++; }

    if (ind == 1){
          for(c=0;c<i;c++) cout<<a[c]<<" ";
    i--;
        }
    if (i % 5 == 0) ind=1;
        cout<<endl;
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T17:49:10.507

这是一个使用两个循环的示例：

```
#include<iostream>

using namespace std;
int main()
{
  char a[]={'I','N','D','I','A'};
  int arr_length=5;
  bool two_times=false;//if you want to output INDIA twice
  for(int i=2*arr_length-1; i>=1; i--)
  {
      for(int j=0; j<arr_length-abs(arr_length-i); j++)
      {
            cout << a[j];
      }
      if(i==arr_length && !two_times){ two_times=true; i++;}//if you want to output INDIA twice
      cout << endl;
  }
  return 0;
} 
```

输出：

```
I
IN
IND
INDI
INDIA
INDIA
INDI
IND
IN
I 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T18:12:21.303

你可以这样做：

```
void main()
{
  char a[]={'I','N','D','I','A'};
  int r,c;

  int x = 0;  // initially x is 0 
  int l = 5;
  for(r=1;r<= 11 ;r++)  //loop runs for 5*2 + 1 times
  {
     if(r>=6){
       x = l - r % 6;  //set x to remaining length 
       l--;
     }
     for(c=0;c< (r % 6) + x; c++)  // add x 
         cout<<a[c]<<" ";
     cout<<endl;
  }
} 
```

你可以[在这里找到它。](http://codepad.org/kkrVqAJb)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T19:52:40.907

基于 TonyK 的答案的另一种解决方案。您可以输入所需的字符串。

```
#include <stdio.h>
#include <string.h>
int main() {
    char s[100];
    gets(s);
    for (int i = 0; i < strlen(s) * 2; i++)
        printf ("%.*s\n", i < strlen(s) ? i + 1: 2 * strlen(s) - i, s);
} 
```

[http://ideone.com/Zsg5Lu](http://ideone.com/Zsg5Lu)**

# sql - 每天每小时的 SQL 查询

> ID：15688467
> 
> 赞同：1
> 
> 时间：2013-03-28T17:34:15.463
> 
> 标签：sql, sql-server

我有一个似乎很复杂的问题。我需要知道在某一天某个时间的某个会话中会发生什么。

简而言之，我有一张表格，可以显示给定区域的所有会话。这些会话具有开始日期、开始时间和结束时间。

您可以在此表中看到：

```
idArea | idSession |  startDate  |    startTime        |    endTime  
   1   |    1      |  2013-01-01 | 1900-01-01 09:00:00 | 1900-01-01 12:00:00
   1   |    2      |  2013-01-01 | 1900-01-01 14:00:00 | 1900-01-01 15:00:00
   1   |    3      |  2013-01-04 | 1900-01-01 09:00:00 | 1900-01-01 13:00:00
   1   |    4      |  2013-01-07 | 1900-01-01 10:00:00 | 1900-01-01 12:00:00
   1   |    5      |  2013-01-07 | 1900-01-01 13:00:00 | 1900-01-01 18:00:00
   1   |    6      |  2013-01-08 | 1900-01-01 10:00:00 | 1900-01-01 12:00:00 
```

然后我还有一个表格，显示所有时间穿插，即每半小时一次（我故意为此要求创建此表格，如果有人有更好的想法，我可以说我会尝试适应）。

```
idHour |   Hour
   1   |   1900-01-01 00:00:00
   2   |   1900-01-01 00:30:00
   3   |   1900-01-01 01:00:00
  ............................
   4   |   1900-01-01 09:00:00
   5   |   1900-01-01 09:30:00
   6   |   1900-01-01 10:00:00
   7   |   1900-01-01 10:30:00
  ............................ 
```

最后，我想呈现的是这样的：

```
 startDate  |    startTime        |    SessionID
  2013-01-01 | 1900-01-01 09:00:00 |        1
  2013-01-01 | 1900-01-01 09:30:00 |        1
  2013-01-01 | 1900-01-01 10:00:00 |        1
  2013-01-01 | 1900-01-01 10:30:00 |        1
  2013-01-01 | 1900-01-01 11:00:00 |        1
  2013-01-01 | 1900-01-01 11:30:00 |        1
  2013-01-01 | 1900-01-01 11:30:00 |        1
  2013-01-01 | 1900-01-01 14:00:00 |        1
  2013-01-01 | 1900-01-01 14:30:00 |        1
  2013-01-01 | 1900-01-01 15:00:00 |        1 
```

该表仅适用于 idSession=1 我想要的所有会话。如果一天没有会话可以返回 NULL。

这个查询或程序的难点在于，当该区域有会话时，他们必须向我展示一个月中的所有日子。

为此，我已经使用了这个查询：

```
;WITH t1 AS 
(
    SELECT  
        startDate,
        DATEADD(MONTH, DATEDIFF(MONTH, '1900-01-01', startDate), '1900-01-01') firstInMonth,
        DATEADD(DAY, -1, DATEADD(MONTH, DATEDIFF(MONTH, '1900-01-01', startDate) + 1, '1900-01-01')) lastInMonth,
        COUNT(*) cnt
    FROM    
        @SessionsPerArea
    WHERE
        idArea = 1
    GROUP BY
        startDate
), calendar AS
(
    SELECT DISTINCT 
        DATEADD(DAY, c.number, t1.firstInMonth) d
    FROM    
        t1 
    JOIN
        master..spt_values c ON type = 'P'
                             AND DATEADD(DAY, c.number, t1.firstInMonth) BETWEEN t1.firstInMonth AND t1.lastInMonth
)
SELECT  
    d date, 
    cnt Session
FROM
    calendar c
LEFT JOIN 
    t1 ON t1.startDate = c.d 
```

这很复杂，如果有人有简单的方法来做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:01:21.903

如果我理解正确，这只是日历表和@SessionPerArea 之间的连接，条件正确：

```
select spa.StartDate, c.hour as StartTime, spa.idSession as SessionId
from calendar c join
     @SessionsPerArea spa
     on c.hour between spa.startTime and spa.EndTime 
```

连接匹配数据中开始时间和结束时间之间的所有时间，然后返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:44:48.363

我想也许你只需要在日历和@SessionsPerArea 之间进行外部连接......所以无论与@SessionsPerArea 表是否匹配，都会返回日历表中的所有日期？

# java - 如何阻止 JTextArea 被放置在 JTabbedPane 之上？

> ID：15688468
> 
> 赞同：0
> 
> 时间：2013-03-28T17:34:17.370
> 
> 标签：java, swing, jscrollpane, jtabbedpane, border-layout

我正在尝试设计一个布局，在框架顶部使用 JTabbedPane，然后在选项卡式窗格下方使用 jLogArea。

我正在使用这段代码：

```
setLayout(new BorderLayout());

tabbedPane.setSize(WIDTH, HEIGHT);
add(tabbedPane, BorderLayout.PAGE_START);
tabbedPane.add("Tab 0", null);

scrollableTextArea = new JScrollPane(jTextArea);

jTextArea.setEditable(false);
jTextArea.setLineWrap(true);
scrollableTextArea.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
scrollableTextArea.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
add(scrollableTextArea, BorderLayout.PAGE_END); 
```

但是，这样做的结果是文本区域被放置在选项卡式窗格的后面：

![在此处输入图像描述](../Images/a022ff6914ae74f8def6f6fa2480ceb0.png)

有谁知道我做错了什么以及如何解决？谢谢。

**编辑：**为了清楚起见，我正在寻找位于 JTabbedPane 下方的文本区域，而不是在选项卡本身中。

使用`BorderLayout.NORTH`and`BorderLayout.SOUTH`也无济于事。我在选项卡的内容中添加了一个标签，只是为了看看这是否会有所不同，但文本区域仍然落后，这就是它的外观：

![在此处输入图像描述](../Images/30437aa7d6dd93e433f4391c85380809.png)

进一步的代码（类 extends `JFrame`）：

```
public MainGUI() {
    init();
    pack();
    super.setTitle("test");
}

public void init() {
    setLayout(new BorderLayout());
    setPreferredSize(new Dimension(WIDTH, HEIGHT + TEXT_AREA_HEIGHT));
    setMaximumSize(new Dimension(WIDTH, HEIGHT + TEXT_AREA_HEIGHT));
    setMinimumSize(new Dimension(WIDTH, HEIGHT + TEXT_AREA_HEIGHT));

    tabbedPane = new JTabbedPane();
    textArea = new JTextArea(WIDTH, TEXT_AREA_HEIGHT);
    scrollableTextArea = new JScrollPane(textArea);

    JLabel testLabel = new JLabel("Test!");
    tabbedPane.add("Tab 0", testLabel);

    tabbedPane.setBorder(null);
    tabbedPane.setSize(WIDTH, HEIGHT);
    add(tabbedPane, BorderLayout.NORTH);

    textArea.setEditable(false);
    textArea.setLineWrap(true);
    scrollableTextArea.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    scrollableTextArea.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    add(scrollableTextArea, BorderLayout.SOUTH);

    setDefaultCloseOperation(EXIT_ON_CLOSE);

    setResizable(false);
    setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:41:29.760

**更新**
我认为你正在寻找这样的东西：
![在此处输入图像描述](../Images/968197580b74566bcf171e71313d953d.png)

```
import java.awt.BorderLayout;
import java.awt.Container;

import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;

public class TabSample extends JFrame{
  public void createAndShowGUI() {
    JPanel panel = new JPanel();
    JTextArea ta = new JTextArea(100,50);
    JScrollPane jsp = new JScrollPane(ta);
    JTabbedPane tabbedPane = new JTabbedPane();
    panel.setLayout(new BorderLayout());
    tabbedPane.addTab("Tab one", panel);
    JSplitPane vPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT, tabbedPane, jsp);
    getContentPane().add(vPane);
    setSize(400,500);
    vPane.setDividerLocation(getHeight()/2);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
  }

  public static void main(String args[]) 
  {
      javax.swing.SwingUtilities.invokeLater(new Runnable()
      {
          @Override
          public void run()
          {
              TabSample ts = new TabSample();
              ts.createAndShowGUI();
          }
      });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:41:40.967

你的代码应该是这样的：

```
setLayout(new BorderLayout());

tabbedPane.setSize(WIDTH, HEIGHT);
add(tabbedPane, BorderLayout.PAGE_START);

scrollableTextArea = new JScrollPane(jTextArea);

jTextArea.setEditable(false);
jTextArea.setLineWrap(true);
scrollableTextArea.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
scrollableTextArea.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
tabbedPane.addTab("Tab 0", scrollableTextArea); 
```

您的代码中的问题是您`JScrollPane`在添加`JTabbedPane`. 实际上你`JScrollPane`必须是一个标签组件：

```
tabbedPane.addTab("Tab 0", scrollableTextArea); 
```

**编辑：在选项卡式窗格下方有滚动窗格：**

...

```
add(tabbedPane, BorderLayout.NORTH); 
```

...

```
add(scrollableTextArea, BorderLayout.SOUTH); 
```

希望这对你有用。

# java - Apache Camel：为每个用户会话编写单个文件

> ID：15688469
> 
> 赞同：0
> 
> 时间：2013-03-28T17:34:25.290
> 
> 标签：java, apache, apache-camel

我正在编写一个实用程序来记录用户的 HTTP 请求。使用 Camel 的文件组件来实现它。
现在写入，因为覆盖默认值 File 组件正在为每个 HTTPRequest 写入新文件。
我可以将其更改为，`Append`但它不会给我所有用户会话的单个文件吗？我想要每个用户会话的单独文件。但是请求将为同一用户附加。路线是这样的：

```
<route>
            <from uri="seda:saveRequestMessageForTesting"/>
            <log message="Request Message is ${body}"/>
            <to uri="file://src?fileName=req.txt?fileExist=Append"/>
        </route> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:38:15.927

你可以

1) 使用要写入的文件名设置标题，这将优先于您使用 req.txt 配置的文件名。您需要在使用文件之前设置此标头。

例如，我们可以在 bean 上调用一个方法来计算文件名：

```
<setHeader headerName="CamelFileName">
  <method ref="myBean" method="myMethod"/>
</setHeader> 
```

或者使用 Camel 处理器，您可以在其中设置 Exchange IN 消息的标头。

```
<process ref="myProcessor"/> 
```

2) 在动态计算端点的地方使用动态收件人列表 eip。请参阅此常见问题解答：[http ://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html](http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html)

# php - 如何使用 PHP 仅打印 Echo 输出

> ID：15688470
> 
> 赞同：1
> 
> 时间：2013-03-28T17:34:26.737
> 
> 标签：php, printing, echo

我创建了一个由一些 PHP 处理并回显的表单，以便用户可以打印它。我的问题是，当它打印时，它正在打印所有内容。我只想打印文本而不是打印按钮或 url。我将在下面发布 PHP 代码。

```
 <?php

    $beq = $_REQUEST["beq"];
    $blq = $_REQUEST["blq"];
    $bwq = $_REQUEST["bwq"];

    if ($beq>0)
    {
        echo ("Berry (SPR0110) " .$beq);
    }

    if ($blq>0)
    {
        echo ("<br />Black (SPA0212) " .$blq);
    }

    echo '<br /><br /><a href="javascript:window.print()">Print</a>';

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:39:22.190

最快的方法：

```
<style type="text/css">
@media print {
    .hide-on-print { display:none; }
}
</style>

<?
$beq = $_REQUEST["beq"];
$blq = $_REQUEST["blq"];
$bwq = $_REQUEST["bwq"];

    if ($beq>0)
    {
        echo ("Berry (SPR0110) " .$beq);
    }

    if ($blq>0)
    {
        echo ("<br />Black (SPA0212) " .$blq);
    }

    echo '<div class="hide-on-print"><br /><br /><a href="javascript:window.print()">Print</a></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:37:27.007

创建带有屏幕和打印规则的样式表

[设置打印 css 的好规则？](https://stackoverflow.com/questions/401623/good-rules-for-setting-up-print-css)

# mysql - 我有一个错误的 Sql 语句

> ID：15688473
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:34:37.857
> 
> 标签：mysql

下面的语句已经崩溃，我不明白为什么。它在 500 数量上出错，说明我只能引用当前数据集中的字段，（我相信我是）！！！！！！任何人都可以帮忙。

谢谢

```
=IIF(
    ( Fields!Quantity.Value>=500,
      (Fields!QTY500_.Value, "SellingPrice"),
      IIF( 
          Fields!Quantity.Value<=499 AND Fields!Quantity.Value >=100,
          (Fields!QTY100_499.Value, "SellingPrice"),
          IIF(
              Fields!Quantity.Value<=99) AND (Fields!Quantity.Value)>=10,
              (Fields!QTY10_99.Value, "SellingPrice"),
              (Fields!QTY1_9.Value, "SellingPrice")
          )
      )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:40:46.363

IIF(Fields!Quantity.Value)<=99 --> 这里的问题应该是 IIF(Fields!Quantity.Value <=99

# svn - SVN Post 提交挂钩的替代方案

> ID：15688475
> 
> 赞同：1
> 
> 时间：2013-03-28T17:34:43.803
> 
> 标签：svn

要求：每次提交到 SVN 存储库后运行自定义脚本。10人使用的repo。因此，在任何人提交后，都需要运行脚本。

现有解决方案

1.  提交后挂钩 - 没有挂钩文件夹，我无法创建，因为我不是管理员。

2.  哈德森，巡航控制 - 矫枉过正，因为我不想设置持续部署或这样的花哨的东西。

3.  SVNNotify、CommitMonitor - 在提交时不会运行任何脚本，只会在提交时发送电子邮件。

有没有其他解决方案可以满足我的要求？

环境：linux、rhel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:09:44.737

> 哈德森，巡航控制 - 矫枉过正，因为我不想设置持续部署或这样的花哨的东西。

我使用[Jenkins](http://jenkins-ci.org)，它是 Hudson 的一个分支（或者 Hudson 现在可能是 Jenkins 的一个分支，因为创建 Hudson 的 Kohsuke Kawaguchi 现在为 Jenkins 工作）。

Jenkins 可能看起来有点矫枉过正，但它的设置和工作非常简单：

*   安装 Java（首选 JDK 发行版，但仅使用 Java 运行时引擎即可正常运行）。
*   `java -jar jenkins.jar`从命令行运行

而且，差不多就是这样。整个过程不到五分钟。定义一个作业来运行您的脚本将需要另外五分钟。在不到 15 分钟的时间内，您将让一切正常运行。如果您以前从未使用过 Jenkins 或 Hudson，请再给自己 10 分钟时间来弄清楚。不管你做什么，设置都需要更长的时间。

使用 Jenkins 的唯一缺点是，一旦你安装了 Jenkins，你可能会被要求用它做更多的事情，因为你是安装它的人，所以这将是你的工作。

# ruby-on-rails - rails model before_update 无法访问 current_user

> ID：15688479
> 
> 赞同：0
> 
> 时间：2013-03-28T17:34:55.083
> 
> 标签：ruby-on-rails

我想用当前用户的employee_id 更新表Tasks 中的inspector_id。但是，模型不允许我访问 current_user。

这是我试图在任务模型中使用的代码。

```
before_update :update_inspector

protected
 def update_inspector
  self.inspector_id = current_user.employee
 end 
```

我得到：

```
NameError (undefined local variable or method `current_user' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:38:10.517

通常 current_user 在应用程序控制器中定义。这意味着该方法仅在控制器内部可用，而不是模型。您看到的错误与这种情况一致。如果您需要 Task 模型中的 current_user，您必须将它传递到某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:42:44.047

您始终可以访问在模型内部构建 current_user 变量的会话信息。

# bash - 在awk中计算GPA？

> ID：15688488
> 
> 赞同：0
> 
> 时间：2013-03-28T17:35:24.460
> 
> 标签：bash, if-statement, awk

我希望下面的代码做的是解析一个文件，其行类似于

```
CSC3320,SYSTEM LEVEL PROGRAMMING,3,1,A
CSC3210,ASSEMBLY LEVEL PROGRAMMING,3,1,B 
```

并根据等式总和*学分/学分总和计算 GPA。我试图通过分别计算分子和分母然后将两者相除并打印输出来做到这一点。

```
calculate(){
  awk -F, '
    numerator=0;
    denominator=0;
    if($4==1) {
         if($5=="A"){
            numerator+=(4*$3);
            denominator+=$3
         } else if ($5 == "B"){
            numerator+=(3*$3);
            denominator+=$3
         } else if ($5 == "C"){
            numerator+=(2*$3);
            denominator+=$3
         } else {
         }
     }
  GPA = numerator/denominator
  printf "Your GPA is %d\n" GPA
  'my_course.txt 
```

}

我得到的是一条错误消息说

> awk：第 4 行：在或附近出现语法错误 if
> awk：第 18 行：在 printf 或附近出现语法错误

我的书没有详细说明 if else if 语句。那么我输入的方式到底有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:11:12.133

此代码有效。

```
calculate(){
  awk -F, '
  BEGIN{printf "Your GPA is : "}
  numerator = 0.0;
  denominator = 0.0;
  /^CSC/{
    if($4=1) {
         if($5=="A"){
            numerator+=(4.0*$3);
            denominator+=$3;
         } else if ($5 == "B"){
            numerator+=(3.0*$3);
            denominator+=$3;
         } else if ($5 == "C"){
            numerator+=(2.0*$3);
            denominator+=$3;
         } else {
           ; 
        }
     }
   }
   END{printf"%f", (numerator/denominator)}
  ' my_course.txt
} 
```

# php - 使用 PHP 和 MySQL 实现 2-legged OAuth

> ID：15688491
> 
> 赞同：0
> 
> 时间：2013-03-28T17:35:44.563
> 
> 标签：php, mysql, api, oauth

我想为我自己的移动应用程序创建一个 Api 来访问存储在 MySQL 数据库中的数据。但是，我阅读了很多关于 3-legged OAuth 方法的文章，我认为这不是我正在寻找的解决方案。当我正确理解它时，例如，当我创建一个新的 twitter 客户端并想要使用 twitter Api 时，3-legged 方法更有用。

但我的应用程序不是第三方应用程序，我的应用程序和网站包括。数据库来自我。所以我假设，用户启动应用程序输入他的用户 ID 和密码，然后 api 具有检查用户 ID/pw 是否正确并将结果“true”发送回应用程序的功能。然后，该应用程序为用户提供了访问需要登录的功能的可能性。因此，不应将用户重定向到网站并“允许”访问用户 ID/密码。

如果我理解正确的话，两条腿的方法更有可能达到我的目的。但我也对此感到困惑。我假设用户输入了他的 id 和 pw，这些凭据由 Web 服务在数据库中查找，令牌将在数据库中为该用户查找并将发送到应用程序。此外，应用程序令牌从一开始就保存在应用程序中，并且也将与请求一起发送。该应用程序将在内部从数据库中保存此用户令牌，并在用户每次使用 Web 服务时使用此令牌。对于 Web 服务的每个请求，令牌都会发送到服务，并且服务会检查令牌是否有效，否则会向应用程序发送错误。

我查了这个例子： [http ://code.google.com/p/oauth-php/wiki/ConsumerHowTo#Two-legged_OAuth](http://code.google.com/p/oauth-php/wiki/ConsumerHowTo#Two-legged_OAuth)

但是没有提到在数据库中查找用户的用户 ID/密码...

谁能解释我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:23:45.780

双腿 OAuth 类似于客户端-服务器。它是一个客户端应用程序，请求对来自服务器的数据进行完全访问。无论哪个用户正在访问客户端，客户端都可以完全访问其凭据所允许的所有数据

三足 OAuth 是一个用户-客户端-服务器。它是一个请求从服务器访问用户数据的客户端。客户只能访问授权用户的数据（直到用户撤销访问权限）。

# c# - 类型数量有限的字典

> ID：15688493
> 
> 赞同：6
> 
> 时间：2013-03-28T17:35:52.947
> 
> 标签：c#

首先，请原谅我的问题的相当有趣的名字。我不是母语人士，我花了 10 分钟用这几个角色表达我的想法。

我想要做的是在 C# 中创建一个字典，允许值是 a `int`、 a`string`或 a `bool`。我首先想到的是使用泛型，但据我所知，我只能将一种类型定义为可能的值类型，而不是“成为其中之一”。使用`object`也是可能的，但拳击似乎是一个性能杀手。

有没有办法做到这一点？

这是我想到的一个示例：

```
Dictionary<string, (string, int, bool)> foo = new Dictionary<string, (string, int, bool)>();
foo.Add("key1", "Hello, World!"); //Correct - Value is a string
foo.Add("key2", 37); //Correct - Value is an int
foo.Add("key3", true); //Correct - Value is a boolean
foo.Add("key4", new Foobar()); //Compiler error - Value is a Foobar 
```

我的最终目标是为其他开发人员提供一个库。这个特性应该使他们能够在运行时定义“变量”并给他们一个类型。

Edit://Firefox' about:config 页面的内容非常接近我想要实现的目标

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:54:43.587

为什么不创建一个全新的类来实现 IDictionary 并使用 Dictionary 作为私有变量。

然后，在 add 方法中，您可以提供自己的逻辑并相应地失败

**示例代码**

```
public class MyDic : IDictionary<object, object>
{
    private Dictionary<object, object> privateDic= new Dictionary<object,object>();

    public void Add(object key, object value)
    {
        if (value.GetType() == typeof(string))
            throw new ArgumentException();
        privateDic.Add(key, value);
    }
    //Rest of the interface follows
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:42:30.573

我建议：

1.  为您的字典值创建一个基本类型，例如 MyDictionaryBaseType
2.  为您拥有的每个字典值类型扩展此基本类型，例如 StringDictionryType：MyDictionaryBaseType、IntegerDictionryType：MyDictionaryBaseType...等。
3.  使用 MyDictionaryBaseType 创建泛型字典类型并限制类型以扩展此基本类型。

通过这种方式，您可以将字典限制为三种指定类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:59:59.190

您可以将值放入包装类中，如下所示：

```
class Value
{
}

class TypedValue<T> : Value
{
  public T Val;
}

class IntValue : TypedValue<int>
{
}

class StringValue : TypedValue<string>
{
}

class BoolValue : TypedValue<bool>
{
}

Dictionary<string,Value> foo;

foo.Add("key1", new StringValue{Val="Hello World!"}); 
```

另一种可能性是使用 Dictionary 并对添加的正确或错误类型进行运行时检查。我认为没有涉及拳击的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:01:08.783

您要完成的工作不是类型安全的。例如，假设您有这样一本字典：

```
var foo = new Dictionary<string, (string, int, bool)>();
var x = foo["key1"];
// What type is x? How could the compiler know? 
```

一个想法是设计一个容器类，它可以容纳`string`,`int`或`bool`.

```
public class StringIntBool {
   private bool _isSet;
   private bool _isString;
   public bool IsString {
       get { return _isString; }
   }
   // ...

   private string _innerString;
   public string InnerString {
       get {
           return _innerString;
       }
       set {
           if (_isSet) {
               throw new Exception("StringIntBool is already set");
           }
           _isSet = true;
           _isString = true;
           _innerString = value;
       }
   }

   // etc...
} 
```

这很丑陋，并没有真正带来很多好处。

作为替代方案，您实际上可以将所有三个值都存储为`object`s，然后使用诸如[函数式 C#](http://functionalcsharp.codeplex.com/)之类的技术/库来执行模式匹配，就像许多函数式语言一样。

```
object x = "str";
int res = x.Match()
    .With<string>(s => s == "str" ? 10 : 20)
    .With<int>(i => i)
    .With<bool>(b => b ? 50 : 60)
    .Return<int>(); 
```

这种编程模式实际上在某些函数式语言中非常普遍。例如，在 SML 中，您可以定义数据类型，然后根据需要对其进行模式匹配。

```
(* StringIntBool *)
datatype sib = SibString of string | SibInt of int | SibBool of bool

val x = (* some instance of sib *)
val y = case x of
    SibString s => if s = "hello" then 50 else -50
  | SibInt i => i
  | SibBool b => if b then 10 else 20 
```

# java - JFreeChart XYSeries 作为字符串

> ID：15688496
> 
> 赞同：2
> 
> 时间：2013-03-28T17:36:04.050
> 
> 标签：java, jfreechart, series

我正在使用 jfreechart 并尝试制作一个运行良好的 XYLineChart。

我的问题是，y 标签是双值，我需要字符串。

我的代码：

```
DefaultXYDataset result = new DefaultXYDataset();

XYSeries series1 = new XYSeries("Words");
series1.add(0, 0.3);
series1.add(1, 0.5);
series1.add(2, 0.6);
series1.add(3, 0.3);
series1.add(4, 0.2);
series1.add(5, 1);                
result.addSeries(getTitle(), series1.toArray()); 
```

我想要类似的东西：

```
XYSeries series1 = new XYSeries("Words");
series1.add("word 1", 0.3);
series1.add("word 2", 0.5);
... 
```

使用符号轴的更新代码：

```
private void test2() {
    XYDataset dataset = createDataset2();

    JFreeChart chart = createChart2(dataset, "NN");

    ChartPanel chartPanel = new ChartPanel(chart);

    chartPanel.setPreferredSize(new java.awt.Dimension(500, 250));

    panel_visualize.add(chartPanel);   
}

private  DefaultXYDataset createDataset2() 
{
    DefaultXYDataset result = new DefaultXYDataset();

    XYSeries series1 = new XYSeries("Words");    

    series1.add(0.3, 0);
    series1.add(0.5, 1);
    series1.add(0.6, 2);
    series1.add(0.3, 3);
    series1.add(0.2, 4);    

    result.addSeries(getTitle(), series1.toArray());

    return result;  
}

private JFreeChart createChart2(XYDataset dataset, String title) 
{    

    JFreeChart chart = ChartFactory.createXYLineChart(title,          // chart title
        "Words", 
        "Activation", 
        dataset,                // data
        PlotOrientation.HORIZONTAL, 
        true,                   // include legend
        true,
        false);

    XYPlot plot = (XYPlot) chart.getPlot();
    plot.setForegroundAlpha(0.5f);

    String[] grade =  new String[5];
    grade[0] = "Temp 0";
    grade[1] = "Temp 1";
    grade[2] = "Temp 2";
    grade[3] = "Temp 3";
    grade[4] = "Temp 4";
    SymbolAxis rangeAxis = new SymbolAxis("Words", grade);

    rangeAxis.setTickUnit(new NumberTickUnit(1));
    rangeAxis.setRange(0,grade.length);
    plot.setRangeAxis(rangeAxis);

    return chart;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:59:36.767

使用：

```
plot.setDomainAxis(rangeAxis); 
```

解决了我的问题。

感谢垃圾大神的帮助。

# wcf - 类型 'System.Threading.Tasks.Task`1[FundingReportData[]]' 无法序列化

> ID：15688497
> 
> 赞同：1
> 
> 时间：2013-03-28T17:36:08.783
> 
> 标签：wcf, serialization, datacontract

我的服务器（Windows 2008 Framework 4）出现以下错误。

*类型`'System.Threading.Tasks.Task`1[FundingReportData[]]'` 无法序列化。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。*

**几个观察：** * 它在我的本地机器上运行良好（安装了 Windows 7，Framework 4.5）
* 我没有调用异步方法 EX：UnderWritngReportData[] uwData = client.RetriveUnderwritingAuditReport(reportDate);
* Net.TCP 和 basicHttpBindings 有同样的问题
* 查看错误消息 Type 'System.Threading.Tasks.Task`1[FundingReportData[]]' cannot be serialized。 **我调用了三种不同的方法，它们具有三种返回类型。但是这三种方法的错误信息都是一样的**
*我猜这个错误是完全误导的。我正确地提到了 datacontract 和 datamember 属性

资金报告错误：***类型 'System.Threading.Tasks.Task`1[FundingReportData[]]' 无法序列化***。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

Bording 报告错误：***类型 'System.Threading.Tasks.Task`1[FundingReportData[]]' 无法序列化***。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

UW 报告错误：***无法序列化类型“System.Threading.Tasks.Task`1[FundingReportData[]]”***。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

我的 WCF 合同：

```
public interface IReportService {
        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveFundingReport", ReplyAction = "http://tempuri.org/IReportService/RetriveFundingReportResponse")]
        FundingReportData[] RetriveFundingReport(System.DateTime Reportdate);

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveFundingReport", ReplyAction = "http://tempuri.org/IReportService/RetriveFundingReportResponse")]
        System.Threading.Tasks.Task<FundingReportData[]> RetriveFundingReportAsync(System.DateTime Reportdate);

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveBordingReport", ReplyAction = "http://tempuri.org/IReportService/RetriveBordingReportResponse")]
        BordingReportData[] RetriveBordingReport(System.DateTime Reportdate);

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveBordingReport", ReplyAction = "http://tempuri.org/IReportService/RetriveBordingReportResponse")]
        System.Threading.Tasks.Task<BordingReportData[]> RetriveBordingReportAsync(System.DateTime Reportdate);

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveUnderwritingAuditReport", ReplyAction = "http://tempuri.org/IReportService/RetriveUnderwritingAuditReportResponse")]
        UnderWritngReportData[] RetriveUnderwritingAuditReport(System.DateTime Reportdate);

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IReportService/RetriveUnderwritingAuditReport", ReplyAction = "http://tempuri.org/IReportService/RetriveUnderwritingAuditReportResponse")]
        System.Threading.Tasks.Task<UnderWritngReportData[]> RetriveUnderwritingAuditReportAsync(System.DateTime Reportdate);
    } 
```

知道这里出了什么问题吗？！

# wpf - InnoSetup：wpf 应用程序中的静默安装和进度安装值（用于更新）

> ID：15688508
> 
> 赞同：2
> 
> 时间：2013-03-28T17:36:47.770
> 
> 标签：wpf, inno-setup, updates, silent-installer

在我的 wpf 应用程序中，如果有更新，我会要求用户下载更新。该文件是通过我的程序使用以下代码下载的：

```
WebClient wc = new WebClient();
wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
wc.DownloadFileAsync(new Uri(textBox1.Text.Trim()), tempUrl + "Downloaded." + Path.GetExtension(textBox1.Text)); 
```

我想知道是否可以在静默模式下运行安装程序并在我的 wpf 应用程序上进行安装。我想在我的 wpf 应用程序上显示一个进度条。我正在使用 InnoSetup，我知道如何以静默模式启动它，但我不知道如何获取安装进度值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:53:38.030

在静默模式或正常模式下，没有用于从 Inno Setup 获取进度的公共界面。

我想唯一的方法是创建自定义插件，从 Inno 读取进度并将其发送到您的应用程序。

或者您可以修改 Inno 的源代码并在其中添加所需的功能。

# symfony - 尝试运行“assetic:dump”时有关指南针的错误

> ID：15688510
> 
> 赞同：0
> 
> 时间：2013-03-28T17:36:49.343
> 
> 标签：symfony, compass-sass

当我尝试运行时出现以下错误：`php app/console assetic:dump --env=dev --no-debug`。

我不知道这是否相关。

```
[Assetic\Exception\FilterException]                                                                                  
  An error occurred while running:                                                                                     
  '/usr/bin/ruby' '/usr/local/bin/compass' 'compile' '/tmp' '--images-dir' '/home/tirengarfio/workspace/canalones/app  
  /../web/images' '--config' '/tmp/assetic_compassYNg6JH' '--sass-dir' '' '--css-dir' '' '/tmp/assetic_compasssdSsQF.  
  scss'                                                                                                                

  Error Output:                                                                                                        
  /usr/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find compass (>= 0) amongst [sass-3.2.5] (G  
  em::LoadError)                                                                                                       
    from /usr/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'                                                    
    from /usr/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'                                                                  
    from /usr/local/bin/compass:18:in `<main>'                                                                          

  Input:                                                                                                               
  @import "compass/css3";                                                                                              
  @import "compass/utilities";                                                                                         

  $naranja: #FF6600;                                                                                                   
  $blanco: #FFFFFF;                                                                                                    
  $verde_oscuro: #006666;                                                                                              
  $verde_claro: #009900;                                                                                               

  #content_center {                                                                                                    
  position: relative;                                                                                                  
      #bg {                                                                                                            
          /*background: url('/bundles/canalonesfrontend/images/bg_gris_puntos.png');*/                                 
          background: url('/bundles/canalonesfrontend/images/otis_redding.png');                                       
          width: 800px;                                                                                                
          height: 330px;                                                                                               
          position: absolute;                                                                                          
      }                                                                                                                
      .slides_container {                                                                                              
          width:570px;                                                                                                 
          height:270px;                                                                                                
          margin: 0 auto;                                                                                              
          position: absolute;                                                                                          
          z-index: 10;                                                                                                 
          div {                                                                                                        
          margin-top: 25px;                                                                                            
             width:570px;                                                                                              
             height:270px;                                                                                             
             display:block;                                                                                            
         }                                                                                                             
      }                                                                                                                
  }                                                                                                                    

  #container_info                                                                                                      
  {                                                                                                                    
     .item_info {                                                                                                      
         background: $naranja;                                                                                         
         width: 192px;                                                                                                 
         height: 250px;                                                                                                
         float: left;                                                                                                  
         margin: 15px;                                                                                                 
         padding: 10px 19px;                                                                                           
         border: 3px solid orange;                                                                                     
         @include border-radius(14px);                                                                                 
         .title {                                                                                                      
             color: $blanco;                                                                                           
             margin: 9px 0;                                                                                            
         }                                                                                                             
         .content {                                                                                                    
         }                                                                                                             
     }                                                                                                                 
  } 
```

注意：一个人前段时间 [在这里遇到了同样的问题，另一个人回答说他应该让指南针独立工作，但是..知道怎么做吗？](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:50:46.670

只需安装指南针：

```
gem install compass 
```

与其手动安装 Compass，不如考虑使用 Bundler] [1](http://gembundler.com/)来管理项目的依赖项。

## 更新 2013-03-29

> 我安装了指南针，即使我在一个月前安装并使用它，它似乎也没有安装。无论如何，错误与我在问题中提到的相同。当我运行“compass create sass test”时，没有错误。

1) 请检查 Compass 是否在 Symfony 中正确配置。您可以使用这个漂亮的指南作为参考：

[http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)

2）请检查该命令的路径`ruby`和`compass`可执行文件，`which`并将它们与错误输出开头的路径进行比较。

请注意，您应该`which`以运行应用程序的用户身份运行，例如：

```
sudo -iu www-data which ruby
sudo -iu www-data which compass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:52:20.567

您通常可以很容易地单独编译指南针项目。赶紧跑

```
compass compile /path/to/project 
```

确保您已安装 gem。

# reportbuilder - Digital Metaphors Report Builder 11.05：为什么我的 DELPHI 代码崩溃而没有任何错误？

> ID：15688515
> 
> 赞同：1
> 
> 时间：2013-03-28T17:37:10.393
> 
> 标签：reportbuilder

现在我为我们的发票打印机构建一个模板。但我真的不知道，为什么它会崩溃而没有任何错误。

我的目标是在 ';' 处分隔 String ItemName 并将每个部分打印到一个新行到备忘录 1。

```
procedure DetailBeforeGenerate;
var
  s1: String;
  s2: String;
  wordcount: Integer;
  notelength: Integer;

begin
 s1 := plPrintInvLine['ItemName'];
 notelength := Length(s1);
while notelength > 0 do
begin
    notelength := Length(s1);
    wordcount := Pos(';' , s1);
    s2 :=   Copy(s1, 0, wordcount-1);
    Memo1.Lines.Add(s2);
    Delete(s1, 0, wordcount);
end;

end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:32:32.090

请参阅下面有关在字符串中访问 index[0] 的评论，感谢 David Heffernen 和 Ken White。**但是**：

看起来你的代码中有一个无限循环：

```
notelength := Length(s1);
while notelength > 0 do
begin
    notelength := Length(s1);
    wordcount := Pos(';' , s1);
    s2 :=   Copy(s1, 0, wordcount-1);
    Memo1.Lines.Add(s2);
    Delete(s1, 0, wordcount);
end; 
```

***删除（s1，0，字数）；***没有效果！在 Delphi 调试器中试一试。结果？notelength 永远不会递减，因此您将永远循环。'删除(s1, 0, wordcount);' 不会炸毁，但也不会删除。请改用**Delete(s1,1, wordcount)**。

Delphi 字符串中的 Index[0] 不包含您的字符数据 - 如果您尝试编译 myString[0]，根据编译器，它是“不可访问的”；

另外：你的代码的编写方式，你必须以';'结束 或这样的字符串：

**s1 := 'mikey;was;here;a';** 将在 ';' 之后的最后一个字符串上无限循环 （'一种'）

我还使用 ReportBuilder 模板等：在 Delphi 本身中，您将无法编译 MyString[0]，但复制和删除方法不受此错误的影响，（正如 David 解释的那样）但是它出现在我在调试器中看到的内容中'Delete(s1, 0, wordcount)' 不会抛出异常但无法删除。所以我不认为 RBuilder 会更好，甚至可能更糟 - copy() 也可能在 RAP 中的 string[0] 上失败。

RAP**不是**Delphi - 它是基于 Object Pascal 在您的模板中运行的运行时脚本环境，但它并不支持所有内容，您不能总是期望它的行为与 Delphi 完全一样。

顺便说一句 - ReportBuilder 现在升级到 14.0X 版 - 如果可能，您应该升级 - RAP 环境有很多改进。在以后的版本中，您的代码可能可以正常工作，或者您会从 RAP 收到错误消息。

另外：如果您想在 RAP 中进行调试，这并不容易。但是为了给你一个关于错误可能发生在哪里的线索，在你的报告上放一个文本标签，在你的代码的每一行之后添加

```
mylabel.caption:='statementxxx ran'; 
```

或者

```
mylabel.caption:= myVariable.value; 
```

等等，这会给你一个临时的跟踪器——也许会告诉你失败的地方/原因，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:53:16.337

对于所有正在搜索的人：我在这个社区的出色帮助下找到了解决方案！

工作代码如下所示：

```
 procedure DetailBeforeGenerate;
var
  S1: String;
  S2: String;
  wordcount: Integer;
  notelength: Integer;

begin
 S1 := plPrintInvLine['ArtName'];
 notelength := Length(S1);
while (notelength > 0) do
begin
    wordcount := Pos(';',S1);
    S2 :=   Copy(S1, 1, wordcount-1);
    if ( Pos(' ',S2) = 1 ) then Delete(S2, 1, 1);
    Memo1.Lines.Add(S2);
    Delete(S1, 1, wordcount);
    notelength := notelength - wordcount;
end;

end; 
```

# bash - 使用 CTRL-Z 和 bg 将程序移至后台如何安全？

> ID：15688517
> 
> 赞同：1
> 
> 时间：2013-03-28T17:37:15.253
> 
> 标签：bash, process, background-process, foreground

我有一个通过 ssh 传输一些文件的脚本。我通常启动脚本，一旦我确定它运行正常，我会使用 CTRL-Z 停止它，然后使用`bg`.

```
> ./download-script.sh
Downloading...
Got file foobar.txt
Got file baz.txt
Downloading bash.txt (42%)
[2]+  Stopped      download-script.sh
> bg
[1]+ download-script.sh &
> 
```

这怎么安全？似乎发送文件的服务器不知道等待我的进程重新联机，是吗？

如果我等了一个小时然后在后台恢复脚本，它会从中断的地方继续吗？

我的示例使用 ssh 文件传输，但是当我的脚本与大多数任何资源交互时，这也成为我关心的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:52:16.543

I/O 缓冲区将帮助它承受一点延迟（即，如果您最多暂停脚本/命令几秒钟，它不会出错。但超过几秒钟，我认为您可能会遇到其他问题：起点和终点之间的 TCP/UDP 超时？I/O 超时？（例如：输入密码太长等）

如果您只有“本地”的东西，并且您使用的命令没有内置超时：例如，如果您这样做：

```
tar cvf something.tar /path/to/something 
```

然后`ctrl-z`它，然后`bg`（唤醒并发送到后台）或`fg`（唤醒并发送到前台）：即使您等待很长时间，它也会起作用。

然而，与此同时，您有更多机会修改被 tar-ed 的文件之一......

或者你的 shell 可能有一个 TIMEOUT/TMOUT 使它之前停止。

或者（任何其他原因，真的：关闭电源，你的猫踩着 CTRL+d 退出 shell 等等）

iow：你可以，除非某些东西依赖于它“快速”。

# javascript - 使用 jquery 选择器浏览所有图像

> ID：15688520
> 
> 赞同：-2
> 
> 时间：2013-03-28T17:37:17.590
> 
> 标签：javascript, jquery, jquery-selectors, repeat

当 mousemove 事件启动时，我使用此代码显示一个链接

```
$('#articlesdata\\:0\\:article-image').mousemove(function(){
                $('#articlesdata\\:0\\:article-suppr').show();
            }); 
```

我想将此代码应用于所有图像，我的意思是：等等`articlesdata\\:0\\:article-image`： 所有整数`articlesdata\\:1\\:article-image``articlesdata\\:2\\:article-image`

我怎样才能做到这一点

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:08.917

使用[属性选择](http://api.jquery.com/category/selectors/)器`^`

> 这会选择一个值正好以给定字符串开头的 id。

尝试这个

```
$([id^='articlesdata']).mousemove(function(){
   ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:44:01.050

选择它们的最好方法是给它们一个通用的类。

```
<img class="article-image" id="articlesdata:0:article-image" src="foo1.jpg"> 
```

然后按类别选择：

```
$(".article-image").mouseenter(function(){
    $("#" + this.id.replace('image','suppr')).show();
}).mouseleave(function(){
    $("#" + this.id.replace('image','suppr')).hide();
}); 
```

或使用您的原始代码：

```
$(".article-image").mousemove(function(){
    $("#" + this.id.replace('image','suppr')).show();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:44:31.133

`articlesdata\\:0\\:article-image`假设您的图像具有类似or的 id `articlesdata:0:article-image`，您可能会执行以下操作：

```
$('img').mousemove(function(){
     if (/article-image$/.test(this.id)) {
         $(document.getElementById(this.id.replace(/-image$/, '-suppr'))).show();
     }
}); 
```

但是`mousemove`，我建议使用`mouseenter`.

[示范](http://jsbin.com/ajozax/1/edit)

# ios - iPhone 应用程序：获取 shell 命令输出

> ID：15688522
> 
> 赞同：2
> 
> 时间：2013-03-28T17:37:30.163
> 
> 标签：ios, shell, nstask

我正在尝试为 iPhone（或 iPad，就此而言）构建一个应用程序，我想在其中运行一些 shell 命令。我希望它工作的 iPhone*没有*越狱。

该`system()`命令*似乎*在执行 shell 命令时起作用，但输出和输入当然仍然是一个问题。我了解到它`NSTask`可以用于这类事情并且它存在，尽管没有记录。（包括 Mac`NSTask.h`似乎可以完美运行）

现在的问题是执行此代码时：

```
NSTask *task;
task=[[NSTask alloc] init];
task.launchPath=@"/usr/bin/ls";
task.arguments=[NSArray array];
NSPipe *pipe=[NSPipe pipe];
task.standardOutput=pipe;
task.standardError=pipe;
NSFileHandle *output=pipe.fileHandleForReading;
pipe=[NSPipe pipe];
task.standardInput=pipe;
[task launch]; 
```

对于`pipe`未来的 I/O，它会生成错误读数：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'launch path not accessible' 
```

我已经为 unix`bin`目录尝试了很多可能的路径，但要么我找不到它，要么我的应用程序没有列出文件的权限。-.-

**如何在 iPhone 上执行 shell 命令同时控制该命令的输入和输出？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:32:59.673

除非您在越狱手机上运行，​​否则任何在 iOS 中直接创建辅助进程的尝试都将被安全策略拒绝。

# ruby-on-rails - 酿造警告 / pkg-config $PATH

> ID：15688526
> 
> 赞同：0
> 
> 时间：2013-03-28T17:37:46.130
> 
> 标签：ruby-on-rails, ruby, macos, homebrew, pkg-config

我正在尝试按照本指南安装 Ruby（[如何安装...](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)）

但是当我这样做时

```
brew doctor 
```

我明白了

```
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
/opt/sm/pkg/active/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config. 
```

我之前已经通过 RailsInstaller 安装了 Rails（因为我在使用 RVM 时遇到了问题 ->[请参阅我的问题](https://stackoverflow.com/questions/15178155/make-error-installing-rvm-on-snow-leopard)），但后来我将我的 OSx 从 Snow Leopard 升级到了 Mountain Lion，所以我正在遵循本指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:36:41.767

不管`/opt/sm/...`是什么，把它从你的路径中删除。

# php - 使用 PHP 以特定于数据库的用户连接到数据库

> ID：15688529
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:37:52.807
> 
> 标签：php, mysql, xampp, localhost

我以前使用过 CMS（Joomla、Wordpress、Drupal）——我通常这样做的方式是创建数据库，然后我进入数据库并创建一个具有该数据库所有权限的用户（非全局）。然后我可以使用我创建的用户名和密码安装 CMS。所以我知道用户可以连接并做事！

现在我正在尝试一些非 CMS 的东西，我的连接看起来像这样（这是在我使用 XAMPP 的本地机器上）：

```
 $host = "localhost";
  $user = "myDatabase-Specific-User";
  $pass = "myUserPassword";
  $databaseName = "myDatabaseName";
  $tableName = "pre_tableIwant";
  $con = mysql_connect($host,$user,$pass) ;
  $dbs = mysql_select_db($databaseName, $con); 
```

但是我在连接时遇到错误，它不会让我连接。

如果我使用具有相同代码的 GLOBAL 用户（即 root，或我创建的可以访问所有数据库的另一个用户），我可以连接并获取我的信息。但我想限制事情（为了安全），只使用有权访问该特定数据库的用户。

有任何想法吗？我意识到这可能是一个新问题 - 但我有点难过为什么它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:43:20.190

根据 Web 主机，您可能需要将“localhost”更改为实际的数据库主机。我知道如果你使用hosting24或000webhost，就是这样。例如，有时它可以是 msql.xxx.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:44:13.440

确保 mysql 用户可以访问`%`（通配符）和`localhost`连接，它们是不同的。通常如果数据库与网络服务器在同一台机器上，那么你需要`localhost`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T15:39:06.787

我最终使用了 PDO_MySQL 并使用 PDO 让一切正常工作。

# python - 置换字符串以打印所有可能的单词

> ID：15688530
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:37:53.220
> 
> 标签：python, algorithm

我写的代码似乎用运行时间和空间的渐近测量看起来很糟糕我得到 T(N) = T(N-1)*N + O((N-1!)*N) 其中 N 是输入的大小。我需要建议优化它

由于这是一个基于算法的面试问题，我们需要在不使用任何库的情况下以最有效的方式实现逻辑

这是我的代码

```
def str_permutations(str_input,i):
    if len(str_input) == 1:
        return [str_input]
    comb_list = []
    while i < len(str_input):
        key = str_input[i]
        if i+1 != len(str_input):
            remaining_str = "".join((str_input[0:i],str_input[i+1:]))
        else:
            remaining_str = str_input[0:i]
        all_combinations = str_permutations(remaining_str,0)
        for index,value in enumerate(all_combinations):
            all_combinations[index] = "".join((key,value))
        comb_list.extend(all_combinations)
        i = i+1
    return comb_list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:22:36.333

正如我在对该问题的评论中提到的那样，在一般情况下，您不会低于指数复杂度，因为对于`n`不同的字符，输入字符串存在`n!`排列，并且 O(2 ^n ) 是 O(n!) 的子集.

现在以下内容不会提高一般情况下的渐近复杂度，但您可以优化为具有多次出现的某些字符的字符串生成所有排列的蛮力方法。以字符串为例`daedoid`；如果你盲目地产生它的所有排列，你会得到每个排列`6 = 3!`时间，因为你有 3 次出现`d`. 您可以通过首先消除同一个字母的多次出现并记住使用每个字母的频率来避免这种情况。因此，如果有一个字母`c`出现 k [c]，您将保存 k [c]！排列。因此，总的来说，这为您节省了“产品超过 k [c]！对于所有 c”的因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:40:18.833

如果您不需要自己编写，请参阅[`itertools.permutations`](http://docs.python.org/2/library/itertools.html#itertools.permutations)和[`combinations`](http://docs.python.org/2/library/itertools.html#itertools.combinations)。

# php - 如何将php变量传递给jquery AJAX？

> ID：15688531
> 
> 赞同：0
> 
> 时间：2013-03-28T17:37:54.583
> 
> 标签：php, jquery, ajax

我已经开始学习 jquery AJAX。我遇到了一个问题，想知道你们是否可以帮助我。我正在尝试将 php 变量传递回 jquery，但它显示为 [object Object]。我将在下面发布我的代码。

索引.html：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
    $("button").click(function() {
        $("p").text($.get("return.php"));
    });
});
</script>
</head>

<body>
<p>This is a test!</p>
<button>Click Here</button>
</body>
</html> 
```

返回.php：

```
<?php 
    $message = "Another test!";
    echo $message;
?> 
```

那么我需要做什么才能使用 jquery ajax 将 php 变量 $message 传递到段落中？

我知道如果我将 index.html 更改为 index.php，我可以简单地做，但是如果 $message 稍后发生更改，我必须重新加载页面。我正在尝试学习如何制作动态内容而无需重新加载页面。

提前感谢您提供的任何帮助！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:39:10.573

您必须等到数据返回才能使用它：

```
$(document).ready(function(){
    $("button").click(function() {
        $.get("return.php", function(data) {
             $("p").text(data);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:39:23.157

添加回调到`get`.

```
$.get("return.php", function(data) {
    $("p").text(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:51:41.467

[您可以在.get](http://api.jquery.com/jQuery.get/)函数中使用回调函数。

```
$(document).ready(function(){
    $("button").click(function() {
       $.get("return.php",function(data){
           $("p").text(data);
       });
    });
}); 
```

在这里，您还可以传递数据类型以及您希望服务器响应的形式。假设您想从服务器返回任何其他数据类型（即 json），只需像这样使用数据类型：

```
 $(document).ready(function(){
        $("button").click(function() {
           $.get("return.php",function(data){
               $("p").text(data);
           },"json");
        });
    }); 
```

更多详情，请参考：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# c++ - 如何编写具有可变数量参数的 Excel 加载项函数（例如：MAX、MIN...）

> ID：15688533
> 
> 赞同：1
> 
> 时间：2013-03-28T17:38:05.120
> 
> 标签：c++, excel, excel-addins

我正在使用 Microsoft 的开发框架（Excel 2010）在 C++ 中编写一个 Excel 插件。

我想知道是否可以用 C++ 编写一个具有可变数量参数的 Excel 函数，例如 MAX、MIN、AVERAGE ...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:41.730

Excel 加载项是作为 COM 对象构建的，对吗？

您是否尝试过在 COM 接口定义中使用该[`[vararg]`属性？](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367304.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:22:20.307

假设您正在对 XLL 接口进行编码，那么 AFAIK 处理可变数量参数的唯一方法是将每个参数依次声明为您要处理的最大数量（受 Excel 版本限制），然后检查哪些参数缺失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:20:34.877

[这是一个使用http://xll.codeplex.com](http://xll.codeplex.com)处理多达 16 个参数的示例。

```
// 16 LPOPERs
#define XLL_LPOPERSX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX     XLL_LPOPERX XLL_LPOPERX \
                 XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX XLL_LPOPERX
static AddInX xai_functional_args(
    FunctionX(XLL_LPOPERSX, _T("?xll_functional_args"), _T("FUNCTIONAL.ARGS"))
    .Arg(XLL_LPOPERSX, _T("Arg1, ..."), _T("are a numeric arguments or NA() to indicate a missing argument."))
    .Category(CATEGORY)
    .FunctionHelp(_T("Return an array for the second argument to FUNCTIONAL.BIND."))
    .Documentation(
        _T("Non numeric arguments will not be bound.")
    )
);
LPOPER WINAPI
xll_functional_args(LPOPERX px)
{
#pragma XLLEXPORT
    static OPER o;

    o.resize(0,0);

    for (LPOPERX* ppx = &px; (*ppx)->xltype != xltypeMissing && ppx - &px < 16; ++ppx) {
        o.push_back(**ppx);
    }

    o.resize(1, o.size());

    return &o;
} 
```

# jquery - 将数据从列表视图页面传递到 jquery mobile 中的详细视图页面

> ID：15688534
> 
> 赞同：0
> 
> 时间：2013-03-28T17:38:09.630
> 
> 标签：jquery, jquery-mobile, jsonp, jquery-mobile-listview

我正在通过 ajax 生成列表视图。我想要做的是，当用户单击它时，它会通过它的 id 进入详细信息视图。我得到了列表，但没有得到详细信息。我的问题是如何将 id 从页面传递到另一个页面。

```
$(document).ready(function(){
var output = $('#output');
$.ajax({
url: 'http://localhost/Backend/getDinner.php',
dataType: 'jsonp',
jsonp: 'jsoncallback',
timeout: 5000,
success: function(data, status){
$.each(data, function(i,item){ 
    var Menu_Dinner = '<li><a data-transition="slide" href="details.html?ID=' 
    + item.ID + '">' +`'<img src="'+ item.ImageURL + '">' +
    '<h2 class="ui-li-heading">' + item.Title + '</h2 >' + 
    '<h2>' + 'Price: ' + item.Price + '</h2>'+ '</a></li>';
    output.append(Menu_Dinner);
    console.log($("#output").html());`
});
},
error: function(){
  output.text('There was an error loading the data.');
}
});
}); 
```

我使用下面的代码从列表视图中获取 id 并显示该特定列表的详细信息。

```
$('#detailsPage').live('pageshow', function(event) {
var ID = getUrlVars()["ID"];
$.getJSON(serviceURL + 'getDinner.php?ID='+ID, displayItem);
});  
function displayItem(data) {
var item = data.item;
console.log(item);
$('#itemPic').attr('src', '' + item.ImageURL);
$('#fTitle').text(item.Title);
$('#Description').text(item.Description);
$('#Price').text(item.Price);
} 
```

这是显示详细信息的 detail.html 页面。

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
  <div id="detailsPage" data-role="page" >

<div data-role="header">
       <a data-role="button" data-rel="back" data-icon="arrow-l" data-theme="b">Back</a>
    <h1>Details</h1>
</div>

    <div data-role="content"> 

  <img id="itemPic"/>
  <h3 id="Title"></h3>
      <p id="Description"></p>
      <p id="Price"></p>

      <button class="add-to-cart">+ Add to Cart</button>
</div>

  </div>

  </body>

  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:07:13.393

这将对您有所帮助，这是我关于此主题的答案/文章：[jQuery Mobile：将数据从一个页面发送到另一个页面](https://stackoverflow.com/questions/14776387/jquery-mobile-sending-data-from-one-page-to-the-another/14776523#14776523)

在那里你会找到几个解决方案，你只需要选择正确的一个。

还有一件事，如果你想坚持你的解决方案，你需要一种在页面转换期间存储数据的方法，我的另一篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**可以帮助你。只需搜索名为：**页面转换之间的数据/参数操作**的章节。

# java - 递归查找二维数组中的连通性

> ID：15688537
> 
> 赞同：0
> 
> 时间：2013-03-28T17:38:11.820
> 
> 标签：java, swing, recursion, jframe

我有一个游戏，但我在执行分数时遇到了麻烦。教授表示，它必须在没有 for 循环的情况下递归完成。但是我在考虑所使用的算法时遇到了麻烦。这就是游戏。

评分系统工作，因此它从阀门管道 (Pipe.ValvePipe) 开始，然后检查有多少管道连接到它。是否有某种算法/策略来进行这种类型的递归？先感谢您。

pipe.java public class Pipe { private boolean openAtTop; 私有布尔值 openAtRight；私人布尔 openAtBottom; 私有布尔值 openAtLeft; 私有布尔 isValve；

```
private static Pipe     VALVE_PIPE;

public Pipe(boolean t, boolean r, boolean b, boolean l, boolean valve) {
    openAtTop = t; openAtBottom = b; openAtRight = r; openAtLeft = l;
    isValve = valve;
}

public boolean isValve() { return isValve; }
public static Pipe ValvePipe() { return new Pipe(false, false, true, false, true); }

public boolean isValid() { return !(!openAtTop&&!openAtBottom&&!openAtLeft&&!openAtRight); }
public static Pipe RandomPipe() {
    Pipe p;
    do {
        p = new Pipe(Math.random() < 0.5, Math.random() < 0.5,
                    Math.random() < 0.5, Math.random() < 0.5, false);
    } while (!p.isValid());
    return p;
}

public boolean isOpenAtTop() { return openAtTop; }
public boolean isOpenAtBottom() { return openAtBottom; }
public boolean isOpenAtLeft() { return openAtLeft; }
public boolean isOpenAtRight() { return openAtRight; }

public boolean fitsBelow(Pipe p) {
    return (p == null) || (!openAtTop && !p.isOpenAtBottom()) || (openAtTop && p.isOpenAtBottom());
}
public boolean fitsAbove(Pipe p) {
    return (p == null) || (!openAtBottom && !p.isOpenAtTop()) || (openAtBottom && p.isOpenAtTop());
}
public boolean fitsToLeftOf(Pipe p) {
    return (p == null) || (!openAtRight && !p.isOpenAtLeft()) || (openAtRight && p.isOpenAtLeft());
}
public boolean fitsToRightOf(Pipe p) {
    return (p == null) || (!openAtLeft && !p.isOpenAtRight()) || (openAtLeft && p.isOpenAtRight());
}

public String toString() {
    String s = "";
    if (openAtTop) s+="1"; else s+="0";
    if (openAtRight) s+="1"; else s+="0";
    if (openAtBottom) s+="1"; else s+="0";
    if (openAtLeft) s+="1"; else s+="0";
    return s;
}
public int toInt() {
    int s = 0;
    if (openAtTop) s+=8;
    if (openAtRight) s+=4;
    if (openAtBottom) s+=2;
    if (openAtLeft) s+=1;
    return s;
} 
```

}

```
PipeGameView.java
import java.awt.*;
import javax.swing.*;

// Subclass JFrame so you can display a window
public class PipeGameView extends JPanel {
    private PipeGame        game;       // The model

    private BoardPanel      tiles;
    private JButton[][]     buttons;
    private JProgressBar    timeBar;
    private JButton         startStop;
    private JRadioButton    twoMinButton, tenMinButton, noLimitButton;
    private JLabel          statusLabel;

    // This constructor builds the window
    public PipeGameView(PipeGame g) {
        game = g;       // Store the model for access in update()

        // Set up the components
        tiles = new BoardPanel();
        tiles.setLayout(new GridLayout(game.getRows(), game.getRows()));
        buttons = new JButton[game.getRows()][game.getRows()];

        // Add the buttons to the tile panel
        ImageIcon ic = new ImageIcon("Pipes0000.GIF");
        for (int r=0; r<game.getRows(); r++) {
            for (int c=0; c<game.getRows(); c++) {
                buttons[r][c] = new JButton(ic);
                tiles.add(buttons[r][c]);
            }
        }

        // Now layout the components using a gridbag layout
        GridBagLayout layout = new GridBagLayout();
        GridBagConstraints layoutConstraints = new GridBagConstraints();
        this.setLayout(layout);

        // Add the Start/Stop Button
        startStop = new JButton("Start Game");
        layoutConstraints.gridx = 0; layoutConstraints.gridy = 0;
        layoutConstraints.gridwidth = 1; layoutConstraints.gridheight = 1;
        layoutConstraints.fill = GridBagConstraints.BOTH;
        layoutConstraints.insets = new Insets(2, 2, 2, 2);
        layoutConstraints.anchor = GridBagConstraints.NORTHWEST;
        layoutConstraints.weightx = 0.0; layoutConstraints.weighty = 0.0;
        layout.setConstraints(startStop, layoutConstraints);
        this.add(startStop);

        // Add the JRadioButtons
        twoMinButton = new JRadioButton("2 minutes");
        tenMinButton = new JRadioButton("10 minutes");
        noLimitButton = new JRadioButton("No Time Limit");
        ButtonGroup group = new ButtonGroup();
        group.add(twoMinButton); group.add(tenMinButton); group.add(noLimitButton);

        layoutConstraints.gridx = 1;
        layout.setConstraints(twoMinButton, layoutConstraints);
        this.add(twoMinButton);
        layoutConstraints.gridx = 2;
        layout.setConstraints(tenMinButton, layoutConstraints);
        this.add(tenMinButton);
        layoutConstraints.gridx = 3;
        layout.setConstraints(noLimitButton, layoutConstraints);
        this.add(noLimitButton);

        // Add the tiles
        layoutConstraints.gridx = 0; layoutConstraints.gridy = 1;
        layoutConstraints.gridwidth = 4; layoutConstraints.gridheight = 1;
        layoutConstraints.fill = GridBagConstraints.BOTH;
        layoutConstraints.insets = new Insets(2, 2, 2, 2);
        layoutConstraints.anchor = GridBagConstraints.NORTHWEST;
        layoutConstraints.weightx = 0.0; layoutConstraints.weighty = 0.0;
        layout.setConstraints(tiles, layoutConstraints);
        this.add(tiles);

        // Add the label
        statusLabel = new JLabel("Time Left: ");
        statusLabel.setVisible(false);
        layoutConstraints.gridx = 0; layoutConstraints.gridy = 2;
        layoutConstraints.gridwidth = 1; layoutConstraints.gridheight = 1;
        layoutConstraints.fill = GridBagConstraints.NONE;
        layoutConstraints.insets = new Insets(2, 2, 2, 2);
        layoutConstraints.anchor = GridBagConstraints.WEST;
        layoutConstraints.weightx = 0.0; layoutConstraints.weighty = 0.0;
        layout.setConstraints(statusLabel, layoutConstraints);
        this.add(statusLabel);

        timeBar = new JProgressBar(0, 100);
        timeBar.setValue(100);
        timeBar.setVisible(false);
        layoutConstraints.gridx = 1; layoutConstraints.gridy = 2;
        layoutConstraints.gridwidth = 3; layoutConstraints.gridheight = 1;
        layoutConstraints.fill = GridBagConstraints.HORIZONTAL;
        layoutConstraints.insets = new Insets(2, 2, 2, 2);
        layoutConstraints.anchor = GridBagConstraints.EAST;
        layoutConstraints.weightx = 5.0; layoutConstraints.weighty = 0.0;
        layout.setConstraints(timeBar, layoutConstraints);
        this.add(timeBar);
        update();
    }

    // Get methods for the components
    public JButton getButton(int r, int c) { return buttons[r][c]; }
    public JButton getStartStopButton() { return startStop; }
    public JProgressBar getTimeBar() { return timeBar; }
    public JRadioButton getTwoMinButton() { return twoMinButton; }
    public JRadioButton getTenMinButton() { return tenMinButton; }
    public JRadioButton getNoLimitButton() { return noLimitButton; }

    public void setGame(PipeGame g) { game = g; }

    // This is called whenever the model has changed.  Note that this code is not efficient.   All ICONS should really
    // be loaded upon game start and stored into a static array of ImageIcons.   Then, these static icons should be
    // used instead of re-creating icons each time.
    public void update() {
        // Update the look of the buttons
        for (int r=0; r<game.getRows(); r++) {
            for (int c=0; c<game.getRows(); c++) {
                if (game.isOver())
                    buttons[r][c].setEnabled(false);
                else
                    buttons[r][c].setEnabled(true);

                if (game.getPipe(r,c) == null)
                    buttons[r][c].setSelected(false);
                else {
                    // Determine the portion of the icon's filename that matches the pipe
                    String currentPipeCodes = "Start";
                    if (!game.getPipe(r,c).isValve())
                        currentPipeCodes = game.getPipe(r,c).toString();
                    buttons[r][c].setSelectedIcon(new ImageIcon("pipes"+ currentPipeCodes +".GIF"));
                    buttons[r][c].setSelected(true);
                }
            }
        }

        // Update the start/stop button
        if (game.isOver())
            startStop.setText("Start");
        else
            startStop.setText("Stop");

        // Update the radio buttons
        if (game.isOver()) {
            twoMinButton.setEnabled(true);
            tenMinButton.setEnabled(true);
            noLimitButton.setEnabled(true);
        }
        else {
            twoMinButton.setEnabled(false);
            tenMinButton.setEnabled(false);
            noLimitButton.setEnabled(false);
        }

        // Update the status label
        if (game.isOver()) {
            statusLabel.setText("Final Score: " + game.getPlacedPipes());
            statusLabel.setVisible(true);
        }
        else {
            if (game.getStyle() == 2) {
                statusLabel.setVisible(false);
            }
            else {
                statusLabel.setText("Time Left: ");
                statusLabel.setVisible(true);
            }
        }

        // Update the timer bar
        if (game.isOver() || (game.getStyle() == 2)) {
            timeBar.setVisible(false);
        }
        else {
            timeBar.setValue((int)(game.getTimeRemaining() / (float)game.getTimeLimit() * 100));
            timeBar.setVisible(true);
        }

        // Update the cursor
        ImageIcon i;
        if (game.isOver()) {
            tiles.setCursor(Cursor.getDefaultCursor());
        }
        else {
            if (game.getNextPipe().isValve())
                i = new ImageIcon("pipesStart.GIF");
            else
                i = new ImageIcon("pipes"+ game.getNextPipe().toString() +".GIF");
            tiles.setCursor(Toolkit.getDefaultToolkit().createCustomCursor(i.getImage(), new Point(0,0), "pipe"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:43:22.440

我没有浏览你所有的代码，但作为一个提示，函数看起来像这样：

```
getScore( Pipe p ){
  if ( p == null ) return 0;
  int res = 1; // size of this pipe
  res += getScore(leftPipe);
  res += getScore(rightPipe);
  ...
  return res;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:46:30.440

我认为您需要包括 row 和 col 来计算连接到主起始管道的管道

```
public void connectedPipes(int row, int col){
    if(row == null) return 0;
    int res = 1; // size of this pipe
    res += getScore(leftPipe);
    res += getScore(rightPipe);
    return res;
} 
```

# django - Eclipse 调试器不显示整个长字符串的值

> ID：15688538
> 
> 赞同：1
> 
> 时间：2013-03-28T17:38:11.913
> 
> 标签：django, eclipse, debugging, pydev

我正在使用 Eclipse Juno 调试 Django 应用程序。但是，在 PyDev 的调试器中检查变量时，会裁剪一个长字符串：

![在此处输入图像描述](../Images/2a5bb4f4258d2ca6535958bf169c4e4e.png)

变量的内容区域是可滚动的，但值突然停在那里并带有点（见图）。单击变量或*观察*它没有帮助。这不是一个大问题，但是有一个简单的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:18:46.527

[请参阅此处](https://stackoverflow.com/a/3310341/1314763)的讨论和答案。本质上，通过在调试控制台中键入变量名称来解决限制，它将完整打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T07:58:09.720

您可以更改最大长度。它是一个整数。

# single-page-application - 使用 Durandal 模态对话框显示小部件

> ID：15688539
> 
> 赞同：3
> 
> 时间：2013-03-28T17:38:13.800
> 
> 标签：single-page-application, durandal

我最近开始使用 Durandal 库来开发我正在开发的 SPA……感谢作者，它是一个出色的库。

我喜欢小部件的概念，而不是将视图用于无状态屏幕，但我无法在模式对话框中显示小部件，而无需将其附加到视图。有谁知道如何做到这一点？

详细地说，有一个***widget.create***函数允许在 JS 中创建一个小部件，但需要附加一个 DOM 元素。我更愿意做的是创建一个小部件，而不将它附加到 DOM，然后调用类似：

```
app.showModal(theWidget); 
```

作为替代方案，我知道我可以创建一个映射到可交换小部件的“对话框”*视图*，然后将该视图用于对话框，例如该视图将具有：

```
<div data-bind="widget: {kind:widgetId}">/div> 
```

... 接着：

```
app.showModal('viewmodels/dialog'); 
```

其中 'viewmodels/dialog.js' 是***“对话”视图***的视图模型。

参考：

*   模态：http : [//durandaljs.com/documentation/Showing-Message-Boxes-And-Modals/](http://durandaljs.com/documentation/Showing-Message-Boxes-And-Modals/)
*   小部件：[http ://durandaljs.com/documentation/Creating-A-Widget/](http://durandaljs.com/documentation/Creating-A-Widget/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T23:46:49.547

小部件是网页上可重用的控件，这就是它们需要 DOM 元素的原因。我不确定我是否完全理解您要执行的操作，但是您可以定义一个返回其构造函数而不是单例对象的视图。

这是一个返回单例的视图：

```
define([], function() {
  var singleton = {
    title: "I'm Mr. Singleton"
  };

  return singleton;
}); 
```

这是相同的视图，但返回其构造函数：

```
define([], function() {
  var notSingleton = function () {
    this.title = "I'm NOT Mr. Singleton"
  };

  return notSingleton;
}); 
```

然后，您可以在另一个视图模型或模块中使用其中任何一个，如下所示：

```
define(['viewmodels/singleton', 'viewmodels/notSingleton'], 
function(singleton, NotSingleton) {
  ...
  app.showModal(singelton);
  app.showModal(new NotSingleton());
  ...
}); 
```

在后一种情况下，您可以在多个其他视图中创建同一视图模型的多个对话框，但每个对话框都是具有自己属性的自己的实例。如果您想在该视图模型类型的所有实例之间共享数据和/或行为，您可以将它们添加到视图模型的`prototype`.

希望这可以帮助。

# java - WatchService.take() 不会在 Windows-7-x64 上等待，同时观察远程目录中的变化

> ID：15688543
> 
> 赞同：1
> 
> 时间：2013-03-28T17:38:30.427
> 
> 标签：java, directory, windows-7-x64, watchservice

我正在尝试使用 Java SE 7 中提供的 WatchService 观看远程目录（在网络机器上）。当我在 Windows XP 上运行程序时它工作得很好，但在 Windows 7 上 WatchService.take() 不会等待，返回一个无效的密钥。

这是示例代码：

```
import java.io.IOException;
import java.nio.file.FileSystems;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.nio.file.StandardWatchEventKinds;
import java.nio.file.WatchEvent;
import java.nio.file.WatchKey;
import java.nio.file.WatchService;
import java.nio.file.WatchEvent.Kind;

public class MyWatchingService {

public void watchDir(Path path) throws IOException, InterruptedException {

    try (WatchService watchService = FileSystems.getDefault().newWatchService()) {

        path.register(watchService, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE);        

        while (true) {
            // gets a watch key
            final WatchKey key = watchService.take();

            // retrieves pending events for a key.
            for (WatchEvent<?> watchEvent : key.pollEvents()) {

                // retrieves the event type and count.
                // gets the kind of event (create, delete) 
                final Kind<?> kind = watchEvent.kind();

                // handles OVERFLOW event
                if (kind == StandardWatchEventKinds.OVERFLOW) {
                    continue;
                } 

                final WatchEvent<Path> watchEventPath = cast(watchEvent);
                final Path entry = watchEventPath.context();

                // outputs an event type and entry
                System.out.println(kind + " -> " + entry);
            }

            boolean valid = key.reset();

            //exit loop if the key is not valid
            if (!valid) {
                System.out.println("Key is invalid!");
                break;
            }
        }

    }
}

public void writeFile (Path path, String fileName) throws IOException {
    Path target = Paths.get(path.toString(), fileName);
    if (target.toFile().exists()) {
        Files.delete(target);
        System.out.println("file is deleted ok!");
    }
    Path fileTo = Files.createFile(target);
    Files.write(fileTo, String.valueOf(true).getBytes(), StandardOpenOption.WRITE);
    System.out.println("file is written ok!");
}

@SuppressWarnings("unchecked")
private static <T> WatchEvent<T> cast(WatchEvent<?> event) {
    return (WatchEvent<T>)event;
}

/**
 * @param args
 */
public static void main(String[] args) {

    // case 1: network directory mapped to Y volume
    final Path path = Paths.get("Y:/workspace");
    // case 2: local directory: 
//  final Path path = Paths.get("D:/workspace");

    MyWatchingService service = new MyWatchingService();
    try {
        long start = System.currentTimeMillis();
        service.watchDir(path);
        System.out.println("exiting after " + Long.toString(System.currentTimeMillis() - start) + "ms...");
        service.writeFile(path, "test");
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
} 
```

这是输出：

```
Key is invalid!
exiting after 16ms...
file is deleted ok!
file is written ok! 
```

如您所见，我检查了是否可以在此网络目录中写入/删除文件。我也尝试过不映射定义这样的路径：`//server/workspace`也没有运气。如果我为带有本地目录的注释掉的案例 2 运行相同的程序，那么它会进入等待状态，并且没有预期的输出。

我使用 64 位的 jdk1.7.0_17。（我尝试了 32 位的 jre7，但也没有运气）。远程目录位于 Windows Server 2008 R2 Standard 上。

我在 API 中读到了以下句子，这让我怀疑这根本不可能：

> 如果监视的文件不在本地存储设备上，则是否可以检测到对文件的更改是特定于实现的。特别是，不需要检测在远程系统上对文件进行的更改。

这对我来说是个坏消息，因为我使用 WatchService 在这个策略上投入了大量时间。有人有任何想法/经验，为什么它不能在 Windows 7 上运行，或者有什么可能吗？如果不是，那将是一种替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:08:41.453

正如文档所说：我根本不希望“观看”在网络驱动器*上*工作。

它是否工作肯定取决于客户端的操作系统及其配置，*以及*服务器的操作系统及其配置，以及其他一些未知因素；似乎极其脆弱，不值得指望。

[文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)中也提到了一个简单的替代方案：

> [...] 或在本地设施不可用时使用原始机制，例如轮询

轮询方法可以在纯 Java 中实现，而无需使用`NIO`。警告：可能会导致大量资源使用（网络）。

并且，与往常一样，建议您退后一步，重新考虑您是否真的需要在这些文件系统操作上构建您的“网络协议”，或者您是否可以通过其他方式实现您想要/需要的东西。

# ruby-on-rails - 如何设置删除收件箱消息的操作

> ID：15688545
> 
> 赞同：0
> 
> 时间：2013-03-28T17:38:34.267
> 
> 标签：ruby-on-rails

我正在开发自定义收件箱系统。当我去删除消息时，它会闪烁一条消息，该消息已被删除。但是，我仍然可以通过我的收件箱和输入 URL 来查看消息。如何设置操作以使消息实际永久删除或至少放置在删除文件夹中（我尚未创建）？

消息模型：

```
class Message < ActiveRecord::Base
    attr_accessible :subject, :body, :sender_id, :recepient_id, :read_at,:sender_deleted,:recepient_deleted
    validates_presence_of :subject, :message => "Please enter message title"

    belongs_to :sender,
    :class_name => 'User',
    :foreign_key => 'sender_id'
    belongs_to :recepient,
    :class_name => 'User',
    :foreign_key => 'recepient_id'

    # marks a message as deleted by either the sender or the recepient, which ever the user that was passed is.
    # When both sender and recepient marks it deleted, it is destroyed.
    def mark_message_deleted(id,user_id)
        self.sender_deleted = true if self.sender_id == user_id and self.id=id
        self.recepient_deleted = true if self.recepient_id == user_id and self.id=id
        self.sender_deleted && self.recepient_deleted ? self.destroy : save!
    end

    # Read message and if it is read by recepient then mark it is read
    def self.readingmessage(id, reader)
        message = find(id, :conditions => ["sender_id = ? OR recepient_id = ?", reader, reader])
        if message.read_at.nil? && (message.recepient.user_id==reader)
            message.read_at = Time.now
            message.save!
        end
        message
    end

    # Based on if a message has been read by it's recepient returns true or false.
    def read?
        self.read_at.nil? ? false : true
    end

    def self.received_by(user)
       where(:recepient_id => user.id)
     end

     def self.not_recepient_deleted
       where("recepient_deleted = ?", false)
     end

end 
```

消息控制器：

```
class MessagesController < ApplicationController

  before_filter :set_user

  def index
    if params[:mailbox] == "sent"
      @messages = @user.sent_messages
    elsif params[:mailbox] == "inbox"
      @messages = @user.received_messages
    #elsif params[:mailbox] == "archieved"
     # @messages = @user.archived_messages
    end
  end

  def new
    @message = Message.new
    if params[:reply_to]
      @reply_to = User.find_by_user_id(params[:reply_to])
      unless @reply_to.nil?
        @message.recepient_id = @reply_to.user_id
      end
    end
  end

  def create
    @message = Message.new(params[:message])
    @message.sender_id = @user_id
    if @message.save
      flash[:notice] = "Message has been sent"
      redirect_to user_messages_path(current_user, :mailbox=>:inbox)
    else
      render :action => :new
    end
  end

  def show
    @message = Message.find(params[:id])
  end

  def delete_multiple
      if params[:delete]
        params[:delete].each { |id|
          @message = Message.find(id)
          @message.mark_message_deleted(@message.id,@user_id) unless @message.nil?
        }
        flash[:notice] = "Messages deleted"
      end
      redirect_to user_messages_path(@user, @messages)
  end

  private
    def set_user
      @user = current_user
    end
end 
```

收件箱视图：

```
<h2>Your Inbox</h2>
<% if @messages.size == 0 %>
No messages in your Inbox
<% end %>
<% else %>
        <%= form_tag delete_multiple_user_messages_path, :method=>:post do %>
            <table  class="table table-bordered">
                    <tr>
                    <th>Delete?</th>
                    <th>Sent</th>
                    <th>Sender</th>
                    <th>Sent</th>
                </tr>
                    <% for message in @messages %>
                        <tr>
                            <td><%= check_box_tag "delete[]", message.id %></td>
                            <td>
                                <% if message.read? %>
                                  <%= link_to h(message.subject), user_message_path(@user, message) %>
                                <% else %>
                                  <%= link_to "#{h(message.subject)} (unread)", user_message_path(@user, message) %>
                                <% end %>
                            </td>

                            <td><%=h message.created_at.to_s(:long) %></td>
                        </tr>
            <% end %>
            </table>
        <%= submit_tag "Delete selected" %> |
        <% end %>
<%= link_to "Compose New Message", new_user_message_path(@user)%> | 
<%= link_to "View Sent Messages", user_messages_path(current_user, :mailbox => :sent)%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:06:57.867

开始了...

一种方法是从数据库中永久删除消息，这样即使可以点击特定的 url，它们也不会进一步可用。

或者如果您想软删除消息而不是从数据库中永久删除，在这种情况下，您必须在`show`方法中添加一个条件，以便如果消息被软删除，则`index`页面。

所以你的`show`方法可能是

```
定义显示
  @message = Message.where(:id => params[:id], :deleted => false).first
  redirect_to messages_path 除非@message.present？
结尾

```

在上面的查询中，我假设这`deleted`是可以用来告诉天气一个人是否删除的字段。如果只有那`deleted`是假的，上面的查询将返回一条消息。

**更新：**

在模型中检查您的方法`mark_message_deleted`后，修改方法如下

```
def mark_message_deleted(id,user_id)
    self.sender_deleted = true if self.sender_id == user_id
    self.recepient_deleted = true if self.recepient_id == user_id
    (self.sender_deleted && self.recepient_deleted) ? self.destroy : self.save!
end 
```

仅此一项就足够了。

# linux - 如何在 Linux 终端中创建电子邮件帐户/地址？

> ID：15688549
> 
> 赞同：5
> 
> 时间：2013-03-28T17:38:50.417
> 
> 标签：linux, email, terminal

是否可以在终端中**在 Linux* 下创建电子邮件帐户？**我一直在寻找是否可以动态生成电子邮件帐户以用于我的网站的用户注册目的。

我在堆栈溢出和其他地方发现了很多关于发送和接收电子邮件的宝贵资源，但没有关于实际**创建帐户的**资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T17:51:37.130

要回答您的问题，可以通过 Linux/Unix 系统上的命令行创建一个电子邮件帐户/地址。

第一步是在该系统上为相关用户创建一个用户帐户。有不同的方法可以做到这一点。我发现本指南，[在 Linux/Unix 中创建用户的终极指南](http://www.thegeekstuff.com/2009/06/useradd-adduser-newuser-how-to-create-linux-users/)，是更好的概述之一。

下一步需要了解 Linux 系统上的电子邮件通常由两个不同的系统/命令处理。

首先是发送电子邮件。这通常通过 sendmail 完成。如果用户可以执行 sendmail，那么他们就可以通过 smtp 向世界发送邮件。这过度简化了事情，但它足以让你开始。

在系统上接收邮件并将其传递给用户取决于邮件系统和所使用的协议。如果您使用的是 postfix，那么下面的文章将展示如何设置[电子邮件帐户](https://web.archive.org/web/20111023234810/http://www.bestdesigns.co.in:80/blog/create-email-account-postfix-mail-server)。

我的回答假设您没有使用 LDAP 或其他目录服务来维护用户。

这个问题可能属于[serverfault](https://serverfault.com/)。我在那边找不到完全匹配的，所以我在这里回答并标记它要移动。

# java - JTextField 未更新

> ID：15688553
> 
> 赞同：1
> 
> 时间：2013-03-28T17:38:52.733
> 
> 标签：java, swing, jtextfield

我有两个独立的组件，一个是扩展类，`JTable`另一个是扩展类`JPanel`（包含表单）。

运行该应用程序时，两者都显示在同一个视图上，当我单击表格上的一行时，我希望表单上的文本文件会被更新但没有任何反应我使用观察者（表单类是侦听器）模式发送单击包含要更新的表单字段的类/面板的行，接收到值但不更新文本字段。

下面的代码在表单类中，它更新表单字段，表单类作为侦听器添加到表类中，单击表行时会触发下面的方法

```
public void onTableRowClick(CollectedParcelEvent e)
{
     JOptionPane.showMessageDialog(null,"test", "test", 1);

    txtCost.setText(Double.toString(e.getSource().getCost()));
    txtCustomerName.setText(e.getSource().getCustomer().getName());

    txtCost.repaint();
    txtCost.revalidate();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:09.987

```
public void onTableRowClick(CollectedParcelEvent e)
{
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            //JOptionPane.showMessageDialog(null,"test", "test", 1);
            txtCost.setText(Double.toString(e.getSource().getCost()));
            txtCustomerName.setText(e.getSource().getCustomer().getName());
        }
    });
} 
```

事件在单个事件线程上处理。在那里，GUI 对其他事件没有响应，应该稍后使用**invokeLater**推迟执行此类操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:50:25.917

我不明白你为什么打电话`revalidate();`，因为它只是告诉布局管理器根据新添加或删除的组件列表进行重置。

请参阅此链接以获取有关[使用`revalidate();`](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)的更多答案以及[此链接](https://stackoverflow.com/questions/5769813/when-does-one-need-to-call-revalidate-on-a-swing-component-to-make-it-refresh)

也许，`repaint();`应该足以进行所需的更改。

所以检查你的方法，看看它是否真的被解雇了。

# c - 如果将数组作为 C 中函数的参数给出，则数组是否被复制

> ID：15688554
> 
> 赞同：0
> 
> 时间：2013-03-28T17:39:01.667
> 
> 标签：c, arrays, function

我很好奇我是否将 n>1 的 n 维数组作为函数的参数，是整个数组的内容被复制还是只是指向第一个元素的地址的指针。

假设函数签名是这样的：

```
int someFunction(int n, int arr[n][n]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:44:05.537

[*[我昨天刚刚重新学习的地方](https://stackoverflow.com/a/6862954/733077)*]

这是一个鲜为人知的 C99 扩展。数组仍然像往常一样*通过引用*传递，但编译器能够将其解释为类似于它处理可变长度数组的方式的数组。

当然，这不会给你边界检查。C没有那个。

在您的函数签名中，

```
int someFunction(int n, int arr[n][n]); 
```

决赛`n`并没有真正给你买任何东西，它只是被忽略了。不过`int arr[n][]`是*新的*。这是C89所没有的。以前，唯一的选择是手动计算基指针的索引，`arr[n*x+y]`.

在 Ansi-C (C89) 中，您必须将函数声明为，

```
int someFunction(int n, int arr[]); 
```

这相当于

```
int someFunction(int n, int *arr); 
```

并将两个维度计算为单个索引。

新的 C99 魔术，将原来的简化为：

```
int someFunction(int n, int *arr[n]); 
```

我将这个过程更多地描述为数组*采用*，而不是通过。它只是减轻了最初决定将数组作为指针传递所带来的一些损失。

* * *

重要的是要了解后两个示例是某种*内化*的等价物。形象插图。在最后一个中，数组*没有*被转换为指针数组，而是删除了最低维度的边界。也许像这样更好地说明：

```
int someFunction(int n, int arr[n][]); 
```

* * *

将数组*复制*为函数参数的唯一方法是将其包装在结构中。但是你不能有可变的尺寸。

```
struct arr {int n; int arr[n][n];}; //Nope, won't compile!

enum { n = 3 };
struct arr { int arr[n][n]; };

struct arr someFunction( struct arr ); //argument and return value are copied. 
```

自 1989 年以来，这一直是合法的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T17:41:32.137

这是函数的非法签名，因为函数签名中的数组必须具有恒定的维度（最终维度除外）。

数组必须具有恒定大小作为函数参数的*原因*是因为它们实际上并没有在函数调用中被复制——只传递了一个指针。

# visual-c++ - 这里的错误在哪里：'bubbleSort'：本地函数定义是非法的

> ID：15688568
> 
> 赞同：0
> 
> 时间：2013-03-28T17:39:36.733
> 
> 标签：visual-c++

这是我的 Windows 窗体应用程序代码。请帮忙。我的任务是：编写一个从键盘输入 10 个整数的 Windows 窗体应用程序。应用程序应按升序排列和可视化整数。使用数组来创建程序部分。

诠释r[10]；

```
 r[0]=System::Convert::ToInt32(textBox1->Text);
        r[1]=System::Convert::ToInt32(textBox2->Text);
        r[2]=System::Convert::ToInt32(textBox3->Text);
        r[3]=System::Convert::ToInt32(textBox4->Text);
        r[4]=System::Convert::ToInt32(textBox5->Text);
        r[5]=System::Convert::ToInt32(textBox6->Text);
        r[6]=System::Convert::ToInt32(textBox7->Text);
        r[7]=System::Convert::ToInt32(textBox8->Text);
        r[8]=System::Convert::ToInt32(textBox9->Text);
        r[9]=System::Convert::ToInt32(textBox10->Text);

        void bubbleSort(int r[10])
    { 

        int temp; 
        int n=10;
        for(int x=0; x<n; x++)

{

    for(int y=0; y<n-1; y++)

    {

        if(r[y]>r[y+1])

        {

            int temp = r[y+1];

            r[y+1] = r[y];

            r[y] = temp;

        }

    }

} 
```

} label1->Text="按升序排列的数字是："+ r[10];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:41:19.207

在 C++ 中，您不能在另一个函数/方法中定义一个函数。移出`bubbleSort()`周围的方法。

# string - 将 utf-8 编码的字符串从字节转换为字符时，计算机如何知道字符在哪里结束？

> ID：15688569
> 
> 赞同：7
> 
> 时间：2013-03-28T17:39:41.790
> 
> 标签：string, unicode, utf-8, character-encoding

给定一个以 UTF-8 编码的 Unicode 字符串，它只是内存中的字节。

如果一台计算机想要将这些字节转换为其相应的 Unicode 代码点（数字），它如何知道一个字符在哪里结束而另一个字符从哪里开始呢？有些字符用 1 个字节表示，有些则最多用 6 个字节表示。所以如果你有

```
00111101 10111001 
```

这可能代表 2 个字符，或 1。计算机如何决定正确解释它的含义？是否有某种约定，我们可以从第一个字节中知道当前字符使用了多少字节？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T17:41:43.957

多字节序列的第一个字节以前导 1 位的数量编码序列的长度：

*   `0xxxxxxx`本身就是一个角色；
*   `10xxxxxx`是多字节字符的延续；
*   `110xxxxx`是 2 字节字符的第一个字节；
*   `1110xxxx`是 3 字节字符的第一个字节；
*   `11110xxx`是 4 字节字符的第一个字节。

具有超过 4 个前导 1 位的字节不会对 UTF-8 中的有效字符进行编码，因为 4 字节序列已经覆盖了从 U+0000 到 U+10FFFF 的整个 Unicode 范围。

因此，问题中提出的示例具有一个 ASCII 字符和一个不单独编码字符的连续字节。

# c# - bootstrap modal popup c# codebehind

> ID：15688572
> 
> 赞同：6
> 
> 时间：2013-03-28T17:39:53.530
> 
> 标签：c#, javascript, twitter-bootstrap

我在我的 c# asp.net 项目中使用引导程序，我想显示从后面的代码中显示模式弹出窗口。

在我的页眉中，我有一个 javascript 函数，如下所示：

```
function LoginFail() {
        $('#windowTitleDialog').modal('show');
    } 
```

并单击我的按钮，我正在调用 javascript，如下所示

```
ScriptManager.RegisterClientScriptBlock(this, typeof(System.Web.UI.Page), "LoginFail", "LoginFail();", true); 
```

这不显示模式弹出窗口。但是，如果我使用类似的东西`alert('login failed')`，它工作正常。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-22T18:08:41.297

默认情况下，Bootstrap javascript 文件包含在结束 body 标记之前

```
 <script src="vendors/jquery-1.9.1.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="vendors/easypiechart/jquery.easy-pie-chart.js"></script>
    <script src="assets/scripts.js"></script>
 </body> 
```

我将这些 javascript 文件放入 body 标记之前的 head 部分，并编写了一个小函数来调用模态弹出窗口：

```
<script src="vendors/jquery-1.9.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="vendors/easypiechart/jquery.easy-pie-chart.js"></script>
<script src="assets/scripts.js"></script>

<script type="text/javascript">
function openModal() {
    $('#myModal').modal('show');
}
</script>
</head>
<body> 
```

然后我可以使用以下代码从代码隐藏中调用模式弹出窗口：

```
protected void lbEdit_Click(object sender, EventArgs e) {   
  ScriptManager.RegisterStartupScript(this,this.GetType(),"Pop", "openModal();", true);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T06:38:44.647

我就是这样解决的：

脚本功能

```
<script type="text/javascript">
    function LoginFail() {
        $('#windowTitleDialog').modal();
    }        
</script> 
```

按钮声明

```
<asp:Button ID="LaunchModal" runat="server" Text="Launch Modal" CssClass="btn" onclick="LaunchModal_Click"/> 
```

*请注意，未设置属性 data-togle="modal"。*

LaunchModal_Click 事件中的服务器端代码为：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "LaunchServerSide", "$(function() { LoginFail(); });", true); 
```

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:47:22.483

我假设，您正在使用 jQuery 模态插件之一。在这种情况下，我怀疑插件代码在调用时没有初始化（这将在它呈现到页面之后立即进行）。在执行插件代码后，您必须推迟对该函数的调用。您的案例的实施可能如下所示：

```
ScriptManager.RegisterClientScriptBlock(this, typeof(System.Web.UI.Page), "LoginFail", "$(function() { LoginFail(); });", true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:41:28.817

我也遇到了同样的问题，想找网上的解决办法，但是没办法。正如您从后面的代码中所说的那样，我可以调用其他 javascript 函数，但是当我添加模态 js 函数时，模态不会出现。

我的猜测是 modal.('show') 函数没有被调用，因为当我在 crhome 中检查 modal 元素时，该类是 modal hide fade 而不是 modal hide fade IN，其他属性保持不变。

一个可能的解决方案是从后面的代码中更改这些属性，我的意思是你可以从后面的代码中做 js 所做的事情，可能不是最好的解决方案，但我没有别的办法。通过这样做，我让模态显示为背景灰色，但无法使效果起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-15T12:55:24.513

我在 aspx 页面中执行此操作：

```
<asp:Panel ID="MessagePanel" runat="server" CssClass="hide"  EnableViewState="false">
<div class="modal-header">
<asp:Button type="button" ID="btnClose" runat="server" data-dismiss="modal" Text="x" />
</div>
<div class="modal-body">
<h4>What's new in this version</h4>
... rest of bootstrap modal stuff....
</div>
</asp:Panel> 
```

然后在代码隐藏中显示任何事件（例如 page.load 或按钮单击）的模式弹出窗口，我只需更改面板的 CssClass：

```
MessagePanel.CssClass = "modal fade in" 
```

不需要 js 或 ScriptManager。

# https - 具有无效证书颁发机构的 Powershell BitsTransfer (https)

> ID：15688576
> 
> 赞同：2
> 
> 时间：2013-03-28T17:40:09.720
> 
> 标签：https, ssl-certificate, microsoft-bits

我正在尝试使用 ps1 脚本自动从 https 站点每周下载文本文件。我的简单连接尝试如下所示 -

```
Start-BitsTransfer `
-source https://url.com/file `
-destination d:\test.txt 
```

我收到错误“证书颁发机构无效或不正确”。有没有办法覆盖这个 CA 检查？

此 Powershell (3.0) 脚本在 Windows Server 2008R2 上运行，并且[https://url.com/](https://url.com/) SSL 证书由 Entrust CA 颁发。我尝试通过 IE8 将 Entrust 作为“受信任的根证书颁发机构”添加到“证书存储”中。没有喜悦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T03:10:41.690

这真的让我绞尽脑汁很久了。我终于发现你需要输入十进制数字而不是二进制或十六进制。

C:>bitsadmin /SetSecurityFlags myJob 8

8 将使“忽略服务器证书中的无效证书颁发机构：true”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:02:44.943

[http://technet.microsoft.com/en-us/library/cc753211(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753211(v=ws.10).aspx)

```
C:\>bitsadmin /SetSecurityFlags myJob 0x011110 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:36:03.503

我相信我需要使用 MS 安全更新来更新服务器上的根 CA 列表。并且 bitstransfer 不能覆盖 CA 检查。

# c++ - 在 Windows 上构建 PoDoFo - 未解决的外部问题

> ID：15688577
> 
> 赞同：2
> 
> 时间：2013-03-28T17:40:14.503
> 
> 标签：c++, linker-errors, unresolved-external, podofo

我正在尝试构建[PoDoFo](http://sourceforge.net/projects/podofo/)，但与 OpenSSL 相关的链接器错误很少（我认为）。我尝试构建它（OpenSSL），但它太复杂了，所以我从[http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)下载了 Win64 OpenSSL v1.0.1e 。

我用这段代码制作了 Visual Studio 解决方案：

```
del cmakecache.txt
set FTDIR=D:\Iwan\Projekty\PDF_projekt\freetype-2.4.11
set FTLIBDIR=D:\Iwan\Projekty\PDF_projekt\freetype-2.4.11\objs\win32\vc2010
set JPEGDIR=D:\Iwan\Projekty\PDF_projekt\jpeg-9
set ZLIBDIR=D:\Iwan\Projekty\PDF_projekt\zlib127-dll
set LIBCRYPTODIR=C:\OpenSSL-Win64
cmake -G "Visual Studio 10" ..\podofo-0.9.2 -DCMAKE_INCLUDE_PATH="%FTDIR%\include;%JPEGDIR%\include;%JPEGDIR%;%ZLIBDIR%\include;%LIBCRYPTODIR%\include;%LIBCRYPTODIR%\include\openssl" -DCMAKE_LIBRARY_PATH="%FTLIBDIR%;%FTDIR%\lib;%JPEGDIR%\lib;%JPEGDIR%;%ZLIBDIR%\lib;%LIBCRYPTODIR%\lib\VC" -DPODOFO_BUILD_SHARED:BOOL=TRUE -DFREETYPE_LIBRARY_NAMES_DEBUG=freetype2411MT_D -DFREETYPE_LIBRARY_NAMES_RELEASE=freetype2411MT -DLIBCRYPTO_LIBRARY_NAMES_DEBUG=libeay32MDd -DLIBCRYPTO_LIBRARY_NAMES_RELEASE=libeay32MD 
```

我不确定我应该在选项中添加什么库，但我尝试了 libeay32MD、sleay32MD、libeay32MT、ssleay32MT、libeay32 和 ssleay32。

当我尝试编译创建的解决方案时，我得到了这些链接器错误：

```
2>LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library
2>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_CIPHER_CTX_init referenced in function "public: __thiscall PoDoFo::AESCryptoEngine::AESCryptoEngine(void)" (??0AESCryptoEngine@PoDoFo@@QAE@XZ)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_CIPHER_CTX_cleanup referenced in function "public: __thiscall PoDoFo::AESCryptoEngine::~AESCryptoEngine(void)" (??1AESCryptoEngine@PoDoFo@@QAE@XZ)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_EncryptFinal_ex referenced in function "protected: void __thiscall PoDoFo::PdfEncryptRC4Base::RC4(unsigned char const *,int,unsigned char const *,int,unsigned char *,int)" (?RC4@PdfEncryptRC4Base@PoDoFo@@IAEXPBEH0HPAEH@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_EncryptUpdate referenced in function "protected: void __thiscall PoDoFo::PdfEncryptRC4Base::RC4(unsigned char const *,int,unsigned char const *,int,unsigned char *,int)" (?RC4@PdfEncryptRC4Base@PoDoFo@@IAEXPBEH0HPAEH@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_CIPHER_CTX_set_key_length referenced in function "protected: void __thiscall PoDoFo::PdfEncryptRC4Base::RC4(unsigned char const *,int,unsigned char const *,int,unsigned char *,int)" (?RC4@PdfEncryptRC4Base@PoDoFo@@IAEXPBEH0HPAEH@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_EncryptInit_ex referenced in function "protected: void __thiscall PoDoFo::PdfEncryptRC4Base::RC4(unsigned char const *,int,unsigned char const *,int,unsigned char *,int)" (?RC4@PdfEncryptRC4Base@PoDoFo@@IAEXPBEH0HPAEH@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_rc4 referenced in function "protected: void __thiscall PoDoFo::PdfEncryptRC4Base::RC4(unsigned char const *,int,unsigned char const *,int,unsigned char *,int)" (?RC4@PdfEncryptRC4Base@PoDoFo@@IAEXPBEH0HPAEH@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _MD5_Final referenced in function "public: static void __cdecl PoDoFo::PdfEncryptMD5Base::GetMD5Binary(unsigned char const *,int,unsigned char *)" (?GetMD5Binary@PdfEncryptMD5Base@PoDoFo@@SAXPBEHPAE@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _MD5_Update referenced in function "public: static void __cdecl PoDoFo::PdfEncryptMD5Base::GetMD5Binary(unsigned char const *,int,unsigned char *)" (?GetMD5Binary@PdfEncryptMD5Base@PoDoFo@@SAXPBEHPAE@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _MD5_Init referenced in function "public: static void __cdecl PoDoFo::PdfEncryptMD5Base::GetMD5Binary(unsigned char const *,int,unsigned char *)" (?GetMD5Binary@PdfEncryptMD5Base@PoDoFo@@SAXPBEHPAE@Z)
2>PdfEncrypt.obj : error LNK2019: unresolved external symbol _EVP_aes_128_cbc referenced in function "protected: void __thiscall PoDoFo::PdfEncryptAESBase::AES(unsigned char const *,int,unsigned char const *,unsigned char const *,int,unsigned char *,int)" (?AES@PdfEncryptAESBase@PoDoFo@@IAEXPBEH00HPAEH@Z) 
```

我试图编译这个 2 天，但我没有做任何工作，我在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:23:36.980

您需要自己构建 OpenSSL。它并不复杂——这里是相关的命令列表，取自与源代码捆绑在一起的 install.w64 文件：

```
 > perl Configure VC-WIN64A
 > ms\do_win64a
 > nmake -f ms\ntdll.mak
 > cd out32dll
 > ..\ms\test 
```

此处未提及的内容应从 Visual Studio 的命令提示符（工具菜单）中运行。Perl 在那里不可见，所以你应该先运行一个命令：

```
set path=%path;c:\perl\bin 
```

# c# - Metro App 固定/取消固定到“开始”屏幕

> ID：15688587
> 
> 赞同：0
> 
> 时间：2013-03-28T17:40:45.203
> 
> 标签：c#, microsoft-metro, winrt-xaml

如何使用 C# 将应用程序固定/取消固定到 Windows 8 开始屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:02:45.703

[您可以通过RequestCreateAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br242213.aspx)（或其变体之一）将辅助磁贴固定到开始屏幕，但此步骤需要用户批准。

如果您的意思是为所有应用程序中列出的应用程序创建主磁贴，但也许用户之前选择从开始屏幕删除磁贴，AFAIK 没有等效的 API，它只会通过用户选择发生通过开始屏幕 UI 执行此操作。

# c#-4.0 - 如何检索最后一个条目的主键？

> ID：15688590
> 
> 赞同：2
> 
> 时间：2013-03-28T17:40:53.457
> 
> 标签：c#-4.0, ms-access-2007

```
 public int retrieveID()
    {
        int lastEntry = 0;
        try
        {
            queryString = "Select ID  from Database";
            myComm = new OleDbCommand(queryString, myConn);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        return lastEntry;
    } 
```

我想检索访问数据库中使用的最后一个主键，而我将主键设置为自动编号。

阐述更多..

我正在开发一个数据库应用程序并希望使用主键，例如，如果数据库中的最后一个条目是 10，我想检索 10，我尝试了简单的查询，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:12:30.843

如果您使用的是 OLEDB 连接，那么这应该可以工作

`queryString = "SELECT @@IDENTITY";`

请注意，这应该在创建要为其保存 ID 值的记录的 INSERT 之后立即调用。如果您的代码要使用身份（自动编号）字段创建其他记录，则`@@IDENTITY`这些调用将更新（替换）该值。

# php - 正则表达式和重复替换

> ID：15688592
> 
> 赞同：1
> 
> 时间：2013-03-28T17:40:57.990
> 
> 标签：php, regex, preg-replace

考虑以下代码：

```
 echo preg_replace('#(\w) (\w) (\w)#','{\1}<\2>{\3}',$string); 
```

如果`$string= 'a b c';`它会产生`{a}<b>{c}`. 如何修改它`$string='a b b b c'`返回：`{a}<b><b><b><b>{c}`

那这个呢：`a a a b b b c c c`

这只是一个例子。请大体回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:53:07.897

尝试这个

```
$new=preg_replace(array('#(\w) (.*) (\w)#','#(.*?) #'),array('{\1}<\2>{\3}','\1><'),$string); 
```

例如，如果您的字符串首先是`'a b b b c'`具有第一个模式`#(\w) (.*) (\w)#`和第一个替换`'{\1}<\2>{\3}'`过程的 preg_replace，则结果是 `{a}<b b b>{c}`下一个具有第二个模式的 preg_replace`'#(.*?) #'`和第二个替换`'\1><'`过程 `{a}<b b b>{c}`在此过程中替换空间的字符串`><`现在 $new 结果是`{a}<b><b><b>{c}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:42:52.513

这是应该为您工作的代码

```
$str='a a a b b b c c c';
$regex = array('/\b(a)\b\s*/', '/\b(b)\b\s*/', '/\b(c)\b\s*/');
$repl = array('{\1}', '<\1>', '{\1}');

$nstr = preg_replace($regex, $repl, $str);
echo "$nstr\n";
// OUTPUT: {a}{a}{a}<b><b><b>{c}{c}{c} 
```

### 现场演示：http: [//ideone.com/gxa3pg](http://ideone.com/gxa3pg)

# asp.net - 为选中的 CheckBoxField 设置默认布尔值

> ID：15688593
> 
> 赞同：3
> 
> 时间：2013-03-28T17:40:58.227
> 
> 标签：asp.net, .net, gridview

我在 ASP.NET 中有一个 GridView，它带有一个 CheckBoxField 列，该列绑定到数据库中查询的 DataField。如果值为假，我需要能够检查它，如果值为真，则不检查。

这有点不标准，因为它完全倒退了大多数复选框控件的工作方式，但是有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:54:23.850

对此有多种方法。你可以试试这个：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        foreach (Control ctrl in e.Row.Cells[0].Controls)
        {
            if (ctrl.GetType().Name == "CheckBox")
            {
                CheckBox chk = (CheckBox)ctrl;
                chk.Checked = !chk.Checked;
            }
        }
    }
} 
```

请记住在您的复选框字段所在的位置添加正确的单元格。

另一个是添加一个 TemplateField：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:CheckBox ID="CheckBox1" runat="server" 
            Checked='<%# !Convert.ToBoolean(Eval("Status")) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

您还可以在从数据库服务器获取数据源后对其进行修改，因此如果您在其他地方以正常方式使用它，则无需修改查询。假设您有一件`Generic List`物品：

```
myItems.ForEach(item => item.Status = !item.Status); 
```

**额外的 jQuery 版本**：

```
<script>
    $(function () {
        $("#<%=GridView1.ClientID %> input[type='checkbox']").each(function () {
            $(this).prop("checked", !$(this).prop("checked"));
        });
    });
</script> 
```

# assembly - 跳转到父标签时出现程序集运行时错误？

> ID：15688598
> 
> 赞同：0
> 
> 时间：2013-03-28T17:41:05.107
> 
> 标签：assembly, x86, nasm

不久前我涉足了组装（NASM 风格），我正在尝试再次学习它。（我知道我可以先计算字符串长度，但这是一个练习）

无论如何，我编写了这段代码来打印出一个以 null 结尾的字符串来`stdout`使用`sys_write`. （我打算概括一下，我现在只是在测试。）

似乎它会起作用，因为如果我`i`在调用之前增加`sys_write`它会打印`'e'`，但如果我之后增加它，那么它会`'H'`按预期打印。但是，一旦遇到: `jne print_loop`，它就会产生运行时错误，错误代码为`-1`。我尝试了几个跳转指令，它们都崩溃了，但是一旦我删除跳转，程序就会运行而没有任何错误。

[爱迪生](http://ideone.com/4qXx6y#view_edit_box "Ideone 结果")

```
SECTION .data
    hello:
        db "Hello World!/n",0

SECTION .bss
    i: 
        resb 1

SECTION .text
    global _start

    _start:
        mov ecx, hello
        call print

        mov eax, 1
        mov ebx, 0
        int 80h

    print:
        mov eax, 4
        mov ebx, 1
        mov edx, 1

        print_loop:
            push eax
            mov eax, [i]
            lea ecx, [ecx+eax]
            pop eax

            int 80h
            inc dword [i]
            cmp ecx, 0  
            jne print_loop ; if I comment this out, it runs without error.

        ret 
```

这是固定版本：

```
%macro print_ 1
    mov eax, 4
    mov ebx, 1
    mov ecx, %1

    call print
%endmacro

%macro exit_ 1
    mov eax, 1
    mov ebx, %1
    int 80h
%endmacro

SECTION .data
    hello:
        db "Hello World!/n",0

SECTION .bss
    i: 
        resb 1

SECTION .text
    global _start

    _start:
        print_ hello
        exit_ 0

    ;print code called by print_ macro
    print:
        push ecx
        count:
            inc ecx
            cmp byte [ecx], 0
            jne count

        mov edx, ecx
        pop ecx
        sub edx, ecx

        int 80h
    ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:01:49.177

代码有几个问题：

```
i: 
    resb 1 
```

在这里您为一个字节保留空间，但在 print 函数中您将`i`其视为 dword。

```
int 80h 
```

这将丢弃 的旧值`eax`，因为`eax`保存系统调用的返回值。因此，您需要`eax`在每次迭代时重新加载系统调用号 (4)。

```
lea ecx, [ecx+eax] 
```

在这里，您用 覆盖字符串的基地址`&string[i]`，这将导致后续迭代中的地址不正确，因为您不保留原始`ecx`值。

```
cmp ecx, 0 
```

我不确定您为什么希望为 0。加载存储的字节并将*其*与零进行比较（在系统调用之前）`ecx`会更有意义。`[ecx]`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:55:59.453

几个问题。

第一的：

```
 mov eax, [i] 
```

`i`是一个字节变量，但指令从其位置读取 4 个字节。

```
 inc dword [i] 
```

`i`是一个字节变量，但指令在其位置增加一个 4 字节值。

第二（我认为）：

`ecx`在这个指令之后会发生什么

```
 lea ecx, [ecx+eax] 
```

第二次执行？它仍然是指向的有效地址`hello`吗？

顺便说一句，学习使用调试器。是时候了。*

# javascript - javascript 类成员在子类中未定义

> ID：15688601
> 
> 赞同：1
> 
> 时间：2013-03-28T17:41:09.430
> 
> 标签：javascript, class, inheritance

这是我的代码，B类继承A类：

```
function A() {
    this.msg = 'meuahah';
    A.prototype.foo = function() {
        alert(this.msg);
    }
}

function B() {
    A.call(this);
    B.prototype.bar = function() {
        A.prototype.foo();
    }
}

a = new A();
a.foo(); // alerts 'meuahah'
b = new B();
b.bar(); // alerts 'undefined' 
```

为什么 b.bar() 不显示“meuahah”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:44:39.867

因为`this`在这种情况下绑定到全局对象。

你正在调用这个函数

```
function() {
        alert(this.msg);
    } 
```

当它没有绑定到一个对象时。所以`this`将引用全局对象（`window`在浏览器中），由于它没有`msg`属性，它会警告未定义。

当你调用`a = new A()`你创建一个新对象时，添加 msg 作为一个属性，并在它的原型链上设置 foo() 。因此，当您调用`a.foo()`foo 时，它会绑定`a`并`this`引用`a`.

一般来说，您可能想要看起来更像这样的东西。

```
function A() {
    this.msg = 'meuahah';
}

A.prototype.foo = function() {
    alert(this.msg);
}

function B() {
    A.call(this);
}

B.prototype = Object.create(A.prototype);

B.prototype.bar = function() {
    this.foo();
} 
```

[您可以从this question](https://stackoverflow.com/questions/3127429/javascript-this-keyword?lq=1)`this`阅读更多关于javascript如何工作的信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:45:33.143

您的原型继承不太正确。这可能是您想要做的更多：

```
function A() {
    this.msg = 'meuahah';
}

A.prototype.foo = function() {
    alert(this.msg);
}

function B() {
    A.call(this);
}

B.prototype = new A();
B.prototype.bar = function() {
    this.foo();
}

a = new A();
a.foo(); 
b = new B();
b.bar(); 
```

`foo`您可以像这样覆盖`B`：

```
B.prototype.foo = function() {
    // Call the original foo method
    A.prototype.foo.apply(this, arguments);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T17:57:09.147

因为`b.bar`显示的原因`undefined`是因为`this`该`foo`方法是`prototype`，并且`prototype`没有`msg`属性。

你基本上错过了重点，继承。因此，这里重新访问了代码：

```
function A() {
  this.msg = 'meuahah';
}

A.prototype.foo = function() {
  alert(this.msg);
}

function B() {
    A.call(this);
}

// Set the inheritance! Or better, the prototype's chain,
// so that any instance of B will have methods of A too
B.prototype = Object.create(A.prototype);

B.prototype.bar = function() {
  // Because the inheritance, now B has the A's `foo` method too
  this.foo();
}

// But... We can also override it.
B.prototype.foo = function() {
  // do something
  alert("override");
  // then call the original one
  A.prototype.foo.call(this);
} 
```

希望它有助于更​​好地了解对象和构造函数。我建议也对[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)进行调查，这真的很有帮助；和一般的 ES5 方法。

阅读[Working with Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)这也是一个好的开始，即使它有点老了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:45:45.870

你只是被称为 A.prototype.foo 函数，所以`msg`不存在。`console.log(this)`这是您在里面时控制台的输出`A.prototype.foo`

```
A {msg: "meuahah", foo: function}
A {foo: function} 
```

第二个是当你从里面调用它时`B`，你可以看到`msg`它不存在。

# nhibernate - NHibernate 一对一关系

> ID：15688607
> 
> 赞同：2
> 
> 时间：2013-03-28T17:41:35.090
> 
> 标签：nhibernate, fluent-nhibernate

我有以下内容`Domain Model(s)`：

```
public class WriteOffApprovalUser
{
    public virtual string UserName { get; set; }
    public virtual Employee Employee { get; set; }
}

public class Employee
{
    public virtual string EmployeeID { get; set; }
    public virtual string EmployeeStatusCode { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string PreferredName { get; set; }
    public virtual string JobTitle { get; set; }
    public virtual string Division { get; set; }
    public virtual string Department { get; set; }
    public virtual string Location { get; set; }
    public virtual string City { get; set; }
    public virtual string DeskLocation { get; set; }
    public virtual string MailID { get; set; }
    public virtual string Phone { get; set; }
    public virtual string Fax { get; set; }
    public virtual string SecCode { get; set; }
    public virtual string UserId { get; set; }
    public virtual string SupervisorID { get; set; }
} 
```

这些是我的`Fluent Mappings`

```
public class WriteOffApprovalUserMap : ClassMap<WriteOffApprovalUser>
{
    public WriteOffApprovalUserMap()
    {
        //Schema("LEGAL");
        Table("WRITEOFF_APPROVAL_USER");

        Id(x => x.UserName).Column("USER_NAME");

        HasOne(x => x.Employee).PropertyRef("UserId");

    }
}

public class EmployeeMap : ClassMap<Employee>
{
    public EmployeeMap()
    {
        // Table Name
        //Schema("ADP_FEED_OWNER");
        Table("ADP_EMPLOYEE");

        // Primary Key
        Id(x => x.EmployeeID).Column("EMPLID");

        // Mappings
        Map(x => x.UserId).Column("USER_ID");
        Map(x => x.FirstName).Column("FIRST_NAME");
        Map(x => x.LastName).Column("LAST_NAME");
        Map(x => x.PreferredName).Column("PREFERRED_NAME");
    }
} 
```

这是我的查询：

```
var results = new Repository<WriteOffApprovalUser>(session)
                    .Query()
                    .ToList(); 
```

这是它正在生成的 SQL，而我期待的是 JOIN。

```
select writeoffap0_.USER_NAME as USER1_1_ from WRITEOFF_APPROVAL_USER writeoffap0_
SELECT employee0_.EMPLID as EMPLID0_0_, employee0_.USER_ID as USER2_0_0_, employee0_.FIRST_NAME as FIRST3_0_0_, employee0_.LAST_NAME as LAST4_0_0_, employee0_.PREFERRED_NAME as PREFERRED5_0_0_ FROM ADP_EMPLOYEE employee0_ WHERE employee0_.EMPLID=:p0;
SELECT employee0_.EMPLID as EMPLID0_0_, employee0_.USER_ID as USER2_0_0_, employee0_.FIRST_NAME as FIRST3_0_0_, employee0_.LAST_NAME as LAST4_0_0_, employee0_.PREFERRED_NAME as PREFERRED5_0_0_ FROM ADP_EMPLOYEE employee0_ WHERE employee0_.EMPLID=:p0;
SELECT employee0_.EMPLID as EMPLID0_0_, employee0_.USER_ID as USER2_0_0_, employee0_.FIRST_NAME as FIRST3_0_0_, employee0_.LAST_NAME as LAST4_0_0_, employee0_.PREFERRED_NAME as PREFERRED5_0_0_ FROM ADP_EMPLOYEE employee0_ WHERE employee0_.EMPLID=:p0;
SELECT employee0_.EMPLID as EMPLID0_0_, employee0_.USER_ID as USER2_0_0_, employee0_.FIRST_NAME as FIRST3_0_0_, employee0_.LAST_NAME as LAST4_0_0_, employee0_.PREFERRED_NAME as PREFERRED5_0_0_ FROM ADP_EMPLOYEE employee0_ WHERE employee0_.EMPLID=:p0; 
```

现在数据库中有四行，并且正确的数据正在返回，但我不希望有五个单独的 SQL 语句来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:55:00.283

您需要预先加载/获取 Employee 实体以避免您看到的行为，这通常被称为 SELECT N+1 问题。为此，您有两种选择：

**选项 1.**映射含义中的急切加载当您查询 WriteOffApprovalUser 实体时，它将**始终**对 Employee 表执行 JOIN。*注意：这可能听起来像您想要的，但要小心，因为您将迫使所有使用此实体的开发人员坚持此设计决策，直到时间结束。您必须问自己，我是否想要查询 WriteOffApprovalUser 表而**不是**对 Employee 表执行 JOIN。如果答案是肯定的，那么不要在映射文件中强制加载。*

要自动获取 Employee，请将映射中的 HasOne 代码更改为如下所示：

```
HasOne(x => x.Employee).PropertyRef("UserId").Not.LazyLoad().Fetch.Join(); 
```

**选项 2.**在查询中执行预先加载。我注意到您正在使用某种 T 模式的存储库，因此您可能必须对其进行修改以处理急切加载。在 NHibernate.Linq 命名空间中使用 NHibernate 的内置 LINQ`Query<T>`类的典型预加载看起来像这样：

```
var results = new session.Query<WriteOffApprovalUser>()
                    .Fetch( x => x.Employee ) // This will tell NHibernate to perform a JOIN to the Employee table
                    .ToList(); 
```

# graph - 使用 Gephi 进行 Neo4j 配置

> ID：15688612
> 
> 赞同：1
> 
> 时间：2013-03-28T17:41:43.730
> 
> 标签：graph, neo4j, gephi

我想使用 Neo4j 来存储我在 python 中创建的一些图表。我使用 Gephi 进行可视化，我认为导出到 Neo4j 插件将是一种非常简单的获取数据的方法。问题是服务器似乎无法识别 Gephi 生成的 neostore...db 文件。

我猜我配置的东西不正确，但有没有办法解决这个问题？

或者，我也愿意直接导入文件。我有两个文件：一个带有节点标题和属性，另一个带有标题到标题的边缘列表。

我猜我需要将标题转换为ID，对吗？最快的方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:13:09.483

如果您将文件作为制表符分隔的 csv 文件，请随意直接导入它们。有一些选项，请查看此页面： http: [//www.neo4j.org/develop/import](http://www.neo4j.org/develop/import)

特别是 CSV 批量导入器可以帮助您： http: [//maxdemarzi.com/2012/02/28/batch-importer-part-1/](http://maxdemarzi.com/2012/02/28/batch-importer-part-1/)

或者，如果只是一点点数据，请使用电子表格方法：http: [//blog.neo4j.org/2013/03/importing-data-into-neo4j-spreadsheet.html](http://blog.neo4j.org/2013/03/importing-data-into-neo4j-spreadsheet.html)

如果你成功了，请回来报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:12:41.790

我过去使用 Gephi 生成了一个 neo4j 存储文件目录 - 它的工作原理很吸引人……我假设您确实删除了默认的 graph.db 目录并将您的 gephi 生成的目录重命名为 graph.db？这对我有用...

# c# - ASP.NET 网站中的路由

> ID：15688620
> 
> 赞同：1
> 
> 时间：2013-03-28T17:41:52.577
> 
> 标签：c#, asp.net, asp.net-routing

我想知道[路由功能](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.90%29.aspx)是否适用于 ASP.NET 网站。我知道它适用于 Web 应用程序，在**Application_Start**方法中注册我的路由。

```
void Application_Start(object sender, EventArgs e) {
   RegisterRoutes(...)
 } 
```

我正在使用**Visual Web Developer 2008 Exp。埃德。**, **.NET Framework 3.5**和我创建了一个新**网站**：***文件****>**新网站...***

谁能帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:45:13.633

您可以使用允许您访问 Application_Start 事件的 Visual Studio 在 ASP.NET 网站中创建 Global.asax。只需添加新项目并选择全局应用程序类

# visual-studio - IIS 7.5 不在 bin 文件夹中查找 .dll 的

> ID：15688623
> 
> 赞同：1
> 
> 时间：2013-03-28T17:42:03.643
> 
> 标签：visual-studio, iis, bin

我的新 Web 服务器有问题。因为它通过了一个非常慢的 WAN 连接，所以我在服务器上安装了 VS2012 并将源文件夹指向 C:\Src。这样我就不必在 WAN 上发布我所有的 .dll。

它还运行一个活动的 IIS 服务器，它指向 C:\inetpub\wwwroot。

VS2012 真的只有在那里，所以我可以快速获取源文件并构建/发布。那部分工作正常。

但是，似乎 IIS 在我的 C:\Src\xxxx\bin 文件夹下查找 .dll 而不是 c:\inetpub\wwwroot\xxxx\bin。

有什么想法可以告诉 IIS 查看它自己的 bin 文件夹而不是 src 文件夹吗？这会是 web.config 中的设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:12:00.023

如果它指向您的 Src 目录，很可能您在调试时不小心在 IIS 中设置了一个虚拟目录。

进入 IIS 管理器，查看是否有任何虚拟目录指向错误的位置。

# javascript - $http.error() 以字符串形式返回数据

> ID：15688624
> 
> 赞同：0
> 
> 时间：2013-03-28T17:42:03.887
> 
> 标签：javascript, angularjs

这是整个`$http`实现的代码：

```
 $http({
        url: jsurl('profile.login'),
        method: 'POST',
        data: $.param({
            username: $scope.username,
            password: $scope.password,
            csrfmiddlewaretoken: $.cookie('csrftoken')
        }),
        headers: {'Content-Type': 'application/x-www-form-urlencoded'}
    }).
    success(function (data) {
        $scope.success = true;
    }).
    error(function (data) {
        $scope.success = false;
        $scope.errors = data.errors;
    }); 
```

问题是`data`in`$http.error`是一个字符串，尽管返回了以下响应：

```
Content-Type:application/json; charset=UTF-8
Body: {"errors":{"username":{"messages":[["Pleaseenteryourusername."]]},"password":{"messages":[["Pleaseenterpassword."]]}},"success":false} 
```

在 jQuery 中，我通常会使用`$.parseJSON()`，但是我一直听说我不应该在 Angular 代码中使用 jQuery 代码（我还不明白为什么会这样），所以我想知道是否有更 Angular 规范的方法来解析错误响应JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:40:32.853

是的，有`angular.fromJson`实用功能。见[http://docs.angularjs.org/api/angular.fromJson](http://docs.angularjs.org/api/angular.fromJson)

# c++ - 如何将一个类的方法传递给 C++ 中的另一个函数？

> ID：15688626
> 
> 赞同：3
> 
> 时间：2013-03-28T17:42:09.337
> 
> 标签：c++, class, function, methods

假设我有一个类和一个函数

```
class A
{
    int a;
    int b;
    int mul()
    {
        return a+b;
    }
};
...

void func(int af, int bf, int (*fc)())
{
    ...
} 
```

在主函数中，该函数应该使用A类的方法

```
int main
{
    A as;
    ...
    func(as.a, as.b, as.mul);
} 
```

但是，我不能那样做，编译器一直告诉我我正在通过

```
(int&, int&, 'unresolved overloaded function type') 
```

成为候选函数

```
(int, int, void(*)()). 
```

为什么会这样，以及如何将类的方法传递给另一个函数？

哦，我想我应该把问题说清楚一点。`func(...)`实际上是我正在研究的算法中的一个函数。并且`class A`是一个将使用该算法进行模拟的模型。所以我认为我不会在函数 B 中专门使用 A 的实例，而只是将 A 的方法和组件传入并使用它们。

* * *

更新：有些人提到在 A 类中使用静态方法。但是，这仍然是部分解决方案。使用静态方法`mul()`将迫使我声称 a 和 b 都是静态的。如果我必须使用 A 的多个实例，并且在我的主函数中的每个实例中使用不同的方法 a、b，那么使用静态变量将完全失败。

那么，关于如何在不使用静态变量/方法的情况下解决此问题还有其他建议吗？我记得在诸如 python 之类的脚本语言中，传递任何类型的方法基本上都不是问题。为什么我不能在 C++ 中做类似的事情？或者 C++ 中是否有解决方法可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:50:12.547

首先，`mul`is 的*成员函数*，`A`因此您不能像调用全局函数或`static`成员函数一样调用它：它需要一个调用该函数的对象：

```
A::mul(); // ERROR!
A a;
a.mul(); // OK 
```

这就是说，您*可以*更改 的定义`func`以接受指向成员函数的指针：

```
void func(int af, int bf, void (A::*fc)())
//                        ^^^^^^^^^^^^^^^ 
```

*但是，仅*此更改不会使您取得太大进展，因为您仍然没有传递`A`应该在其上调用成员函数的具体实例。换句话说，这将是非法的：

```
fc(); // ERROR! 
```

为了克服这个限制，你可以传递一个引用或一个指向`A`together to实例的指针`func`，并按如下方式调用它：

```
void func(A* pA, int af, int bf, void (A::*fc)())
{
    ...
    (pA->*func)();
} 
```

但是，如果`func()`将调用成员函数的对象作为参数传入，则不清楚`af`and的目的是什么`bf`。

可能，如果您的`mul()`成员函数不需要处理 的任何具体实例`A`，并且仍然希望使其成为 的成员`A`，则可以将其声明为`static`：

```
class A
{
    int a;
    int b;
    static void mul();
//  ^^^^^^
}; 
```

这将使您最初调用`func()`编译。但是，在这种情况下，不清楚这是否有意义，因为不`mul()`接受参数这一事实表明它应该在调用它的对象的`a`和`b`成员上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:49:52.400

您要做的是将成员函数指针 ( `A::mul`) 与实例 ( `a`) 本身一起传递。没有任何额外的代码，这并不容易。

成员函数指针不绑定到实例（它们只表示函数本身，而不是要调用的实例）。它们的类型与类名一起描述。`A`带有您的签名的成员函数指针的类型`func`如下所示：

```
void (A::*)()     // The type only, anonymous
void (A::*fc)()   // An actual function pointer with the name `fc` 
```

要调用这样的函数，您必须使用以下语法，如您所见，必须涉及调用函数的实例：

```
(a->*fc)();       // If a is of type A*
(a.*fc)();        // If a is of type A or A& 
```

把事情放在一起，你基本上有两个选择。

1.  除了成员函数指针之外，还要传递实例（作为指针、引用、const 或可修改）。然后，调用该实例上的成员函数指针。

    您的函数签名和实现将如下所示：

    ```
    void func(int af, int bf, void (A::*fc)(), A *a) {
        // When you want to call the function fc on a:
        (a->*fc)();
    } 
    ```

    要调用`func`，请使用如下代码：

    ```
    func(as.a, as.b, &A::mul, a); 
    ```

2.  将成员函数指针与实例一起转换为可以按原样调用的函子。这最好与 with`std::mem_fn`一起完成`std::bind1st`。

    您的函数签名和实现将如下所示：

    ```
    void func(int af, int bf, std::function<void()> fc) {
        // When you want to call the function fc:
        fc();
    } 
    ```

    要调用`func`，请使用如下代码：

    ```
    func(as.a, as.b, std::bind1st(std::mem_fn(&A::mul), a)); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:52:06.623

是否`mul`注定是一个非静态成员，需要一个类型的对象`A`来调用它？在这种情况下，您需要传递一个指向成员的指针：

```
void func(int af, int bf, void (A::*fc)())
{ //                            ^^^  
    A a = whatever();
    (a.*fc)();
} 
```

如果它打算在没有对象的情况下被调用，那么它需要是`static`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:18:41.987

如果您真的想将`int (*fc)(int,int)`（`void`在另一个示例中给出的 return 和空参数列表）视为常规函数指针（我的意思不是指向类成员函数的函数指针），您可以执行以下操作来使用函数`A`并将其传递给`func`. 关键是声明`mul`为静态成员函数。我假设非常简单的操作，比如乘法。

```
#include <iostream>
class A
{
public: //necessary otherwise not accessible in main
   int a;
   int b;
   A(int p1, int p2):a(p1),b(p2){} //assume you need to somehow pass a,b into mul
   static int mul(int p1, int p2)  {return p1*p2;};  //mul should be static
};

void func(int af, int bf, int (*fc)(int,int))  
//using void still work but you need to change declaration of mul in A
{
  int res = fc(af,bf);  
  cout << res <<endl;
}

int main()
{
  A as(2,4);
  func(as.a, as.b, &A::mul); //call A::mul, use as regular function pointer, output 8
  func(10,10, &A::mul); //will output 100
  return 0;
} 
```

这样，您就可以使用 A 的静态成员函数，该函数可以由常规函数指针指向。`a`它与`b`课堂无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T18:37:28.703

正如 leemes 所说，您也可以这样做，`std::function`这也是我的建议，但请查看您的编译器支持什么，如果支持，您可以使用一次调用`std::bind`并让它工作。下面的示例适用于 Visual Studio 2012（并且应该适用于启用了 C++11 标志的较新版本的 GCC，并且可能适用于也可能不适用于 VS 2010）

```
void func(int af, int bf, std::function<void()> fc)
{
    fc();
} 
```

致电：

```
func(as.a, as.b, std::bind(&as::mul, &A)); 
```

如果它检测到成员函数，则较新的版本会为您`std::bind`完成部分工作。`std::mem_fcn`请参阅此处链接的文档：

[标准::函数](http://en.cppreference.com/w/cpp/utility/functional/function)

[标准::绑定](http://en.cppreference.com/w/cpp/utility/functional/bind)

# php - php - 存储数据的数组或对象 - 什么是更好的解决方案

> ID：15688633
> 
> 赞同：3
> 
> 时间：2013-03-28T17:42:40.217
> 
> 标签：php, arrays, performance, oop

我只是在想什么会给我更好的性能和内存使用。我正在为游戏编写地图。一切都存储在“地图”类中，但地图可能有数千个图块。现在我在想什么是更好的解决方案：

*   将每个图块参数保存在 xy 数组中（图块 x = 10，y = 11 数据存储在数组中，如 map[10][11] = params），如果我想了解有关图块的信息，请使用 xy 参数调用不同的数组
*   将瓦片视为一个对象并制作方法，它可以轻松地返回瓦片的邻居，并且所有数据也作为数组存储在每个对象中的某个位置。

因为我可能有成千上万个类似的图块，第一印象是它最适合 oop 编程，但我担心成千上万个对象图块可能会使用更多的内存并且调用它的方法可能会更慢。你怎么看待这件事？

卡雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:51:13.843

这取决于您使用的 php 版本。如果您使用的版本是 PHP5 或更高版本（您应该作为最新的 php 版本将意味着您的游戏应用程序的性能更高），那么同时使用数组和对象将为您的应用程序提供几乎相同的性能。因此，如果您正在使用/可以使用 PHP 5 或更高版本，那么您可以根据自己的方便使用数组或对象。

检查此数组与 Aron Novak 的对象比较/测试：[http](http://aggregation.novaak.net/?q=node/227) ://aggregation.novaak.net/?q=node/227 。我在下面用 Aron Novaks 的话引用它：

```
I created a small script to find out which data structure has better performance. You can find the script what I used for the test at the attachments.
My test results are:
    data structure          PHP4        PHP5
    object                  61.6224     37.576
    array                   57.6644     37.866

    The results are in milliseconds(ms). It seems that in PHP5 the data structure is totally indifferent, in PHP4 there is approximately 7% performance gain if use arrays instead of objects.
    "This revolution, however, left PHP's object model mostly unchanged from version 3 – it was still very simple. Objects were still very much syntactic sugar for associative arrays, and didn't offer users too many features on top of that." (http://devzone.zend.com/node/view/id/1717)
    So the syntactic sugar is not a bad thing at all :) And it costs almost nothing. This is an explanation why all the parsers' output uses objects. 
```

检查此[http://we-love-php.blogspot.com/2012/06/php-memory-consumption-with-arrays.html以获取有关](http://we-love-php.blogspot.com/2012/06/php-memory-consumption-with-arrays.html)**PHP 数组与对象内存使用和性能**的详细/精彩文章

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:54:36.200

您正在开发一款游戏，绝对不能只使用`array`，或者`objects`您很可能同时使用两者。

我认为您应该首先了解[PHP 数组（和值）到底有多大？（提示：大！）](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)

将您的数组替换为`SplFixedArray` 并将您的对象存储`SplObjectStorage`在您的代码中应该会得到改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:47:47.603

如果你有一个瓦片网格，那么它非常适合存储在一个数组中。

但是，如果这些图块上附加了很多信息，那么它就适用于对象。

我会建议一组对象。**

# php - yii 带参数的路由

> ID：15688636
> 
> 赞同：0
> 
> 时间：2013-03-28T17:42:44.743
> 
> 标签：php, yii, routing

我已经花了很多时间，我开始放弃了，所以......请帮助我理解它

我正在尝试使我的 URL 非常短，它适用于没有参数的 URL，但那些有参数的 URL 不起作用。

在我的路由设置中，我有：

```
'rules'=>array( 
        'kontakt' => 'site/contact',
        'faq' => 'site/page/view/faq',
... 
```

然后，当我在 zii.widgets.CMenu（或 Chtml::link()）中使用链接作为第一个规则的数组时，可以，但第二个则不行。所以更准确地说

**这有效**

```
array('label'=>'Kontakt', 'url'=>array('/site/contact')), 
```

它会生成我所期望的[http://mysite.com/kontakt URL。](http://mysite.com/kontakt)

**但这不起作用**

```
array('label'=>'FAQ', 'url'=>array('/site/page', 'view'=>'faq')), 
```

我生成 mysite.com/site/page/view/faq，我希望它只生成 mysite.com/faq。

我读了很多书，尝试了很多变体，但总是失败……请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:22:14.650

你的规则应该是这样的：

```
 '<view>' => 'site/page', 
```

这意味着如果您生成一个指向具有 view 参数的站点/​​页面的 url，那么它只会去查看。如果您没有视图参数，则将跳过该规则。

# c# - DevExpress XtraGrid - 无法选择主行

> ID：15688638
> 
> 赞同：0
> 
> 时间：2013-03-28T17:42:54.213
> 
> 标签：c#, winforms, devexpress, xtragrid

我有一个 gridView，每个主行都有一个 1to1 的主从关系。当用户单击**详细**视图时，我想确保主行也被激活（在最左边的列中有激活的图标）：

![在此处输入图像描述](../Images/83853df8b8678f159a573054665a985c.png)

如果我用键盘导航主网格和细节网格，这很好用，但不能用鼠标。所以我写了以下代码来尝试解决这个问题，但它不起作用。此代码通过详细视图的点击事件触发：

```
GridView focusedView = gridView3.GridControl.FocusedView as GridView;

// get the currently selected row in the child view
int focusedRowHandle = focusedView.FocusedRowHandle;

// get the parentView's row handle that owns the child view
int sourceRowHandle = focusedView.SourceRowHandle;

GridView parentView = focusedView.ParentView as GridView;
parentView.BeginSelection();
parentView.SelectRow(sourceRowHandle);
parentView.EndSelection(); 
```

谁能让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:11:56.413

您是否使用单行选择模式？如果多选被禁用（该`ColumnViewOptionsSelection.MultiSelect`选项设置为`false`），则[SelectRow](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_SelectRowtopic)方法**不执行任何操作**。

使用[ColumnView.FocusedRowHandle](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_FocusedRowHandletopic)属性选择拥有详细视图的主行。

相关文章：[选择概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument711)

# php - 类扩展或接口如何工作？

> ID：15688642
> 
> 赞同：33
> 
> 时间：2013-03-28T17:43:02.483
> 
> 标签：php, class, opcode

遇到过很多次，不知道为什么，这让我很好奇。一些类在声明之前就可以工作，而另一些则不能；

**示例 1**

```
$test = new TestClass(); // top of class
class TestClass {
    function __construct() {
        var_dump(__METHOD__);
    }
} 
```

输出

```
 string 'TestClass::__construct' (length=22) 
```

**示例 2**

当一个类扩展另一个类或实现任何接口时

```
$test = new TestClass(); // top of class
class TestClass implements JsonSerializable {

    function __construct() {
        var_dump(__METHOD__);
    }

    public function jsonSerialize() {
        return json_encode(rand(1, 10));
    }
} 
```

输出

```
Fatal error: Class 'TestClass' not found 
```

**示例 3**

让我们尝试上面相同的类，但改变位置

```
class TestClass implements JsonSerializable {

    function __construct() {
        var_dump(__METHOD__);
    }

    public function jsonSerialize() {
        return json_encode(rand(1, 10));
    }
}

$test = new TestClass(); // move this from top to bottom 
```

输出

```
 string 'TestClass::__construct' (length=22) 
```

**示例 4（我还使用 class_exists 进行了测试）**

```
var_dump(class_exists("TestClass")); //true
class TestClass {

    function __construct() {
        var_dump(__METHOD__);
    }

    public function jsonSerialize() {
        return null;
    }
}

var_dump(class_exists("TestClass")); //true 
```

一旦实施`JsonSerializable`（或任何其他）

```
var_dump(class_exists("TestClass")); //false
class TestClass implements JsonSerializable {

    function __construct() {
        var_dump(__METHOD__);
    }

    public function jsonSerialize() {
        return null;
    }
}

var_dump(class_exists("TestClass")); //true 
```

**还检查了操作码`without`JsonSerializable**

```
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   3     0  >   SEND_VAL                                                 'TestClass'
         1      DO_FCALL                                      1  $0      'class_exists'
         2      SEND_VAR_NO_REF                               6          $0
         3      DO_FCALL                                      1          'var_dump'
   4     4      NOP                                                      
  14     5    > RETURN                                                   1 
```

**还检查了操作码`with`JsonSerializable**

```
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   3     0  >   SEND_VAL                                                 'TestClass'
         1      DO_FCALL                                      1  $0      'class_exists'
         2      SEND_VAR_NO_REF                               6          $0
         3      DO_FCALL                                      1          'var_dump'
   4     4      ZEND_DECLARE_CLASS                               $2      '%00testclass%2Fin%2FaDRGC0x7f563932f041', 'testclass'
         5      ZEND_ADD_INTERFACE                                       $2, 'JsonSerializable'
  13     6      ZEND_VERIFY_ABSTRACT_CLASS                               $2
  14     7    > RETURN                                                   1 
```

**问题**

*   我知道`Example 3`有效，因为该类是在其启动之前声明的，但为什么首先会`Example 1`起作用？
*   扩展或接口的整个过程如何在 PHP 中工作以使一个有效而另一个无效？
*   示例 4 中到底发生了什么？
*   `Opcodes`应该让事情变得清楚，但只是让它变得更复杂，因为`class_exists`之前被调用过，`TestClass`但情况恰恰相反。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T22:47:31.670

我找不到关于 PHP 类定义的文章；但是，我想它与您的实验表明的[用户定义函数](http://www.php.net/manual/en/functions.user-defined.php)完全相同。

函数在被引用之前不需要定义，***除非***一个函数是有条件地定义的，如下面的两个例子所示。当以条件方式定义函数时；它的定义必须在被调用***之前进行处理。***

```
<?php

$makefoo = true;

/* We can't call foo() from here 
   since it doesn't exist yet,
   but we can call bar() */

bar();

if ($makefoo) {
  function foo()
  {
    echo "I don't exist until program execution reaches me.\n";
  }
}

/* Now we can safely call foo()
   since $makefoo evaluated to true */

if ($makefoo) foo();

function bar() 
{
  echo "I exist immediately upon program start.\n";
}

?> 
```

对于类也是如此：

*   **示例 1**有效，因为该类不以其他任何条件为条件。
*   **示例 2**失败，因为该类是有条件的`JsonSerializable`。
*   **示例 3**有效，因为该类在被调用之前已正确定义。
*   **示例 4**第一次为 false，因为该类是有条件的，但后来成功，因为该类已加载。

通过实现一个接口或从另一个文件扩展另一个类 ( `require`)，该类是有条件的。我称它为有条件的，因为该定义现在依赖于另一个定义。

想象一下，PHP 解释器首先查看了这个文件中的代码。它看到一个非条件类和/或函数，所以它继续并将它们加载到内存中。它看到一些有条件的并跳过它们。

然后解释器开始解析页面以供执行。在示例 4 中，它到达`class_exists("TestClass")`指令，检查内存，然后说不，我没有。如果没有它，因为它是有条件的。它继续执行指令，查看条件类并执行指令以将类实际加载到内存中。

然后它下降到最后`class_exists("TestClass")`并看到该类确实存在于内存中。

在阅读您的操作码时，`TestClass`不会调用 before `class_exist`。您看到的是 SEND_VAL，它发送*值*TestClass 以便它在内存中用于下一行，实际上调用 DO_FCALL on`class_exists`

然后你可以看到它是如何处理类定义本身的：

1.  **ZEND_DECLARE_CLASS** - 这是加载你的类定义
2.  **ZEND_ADD_INTERFACE** - 这会获取 JsonSerializable 并将其添加到您的类定义中
3.  **ZEND_VERIFY_ABSTRACT_CLASS** - 验证一切正常。

正是第二部分**ZEND_ADD_INTERFACE**似乎阻止了 PHP 引擎仅在其初始峰值加载该类。

> 如果您希望更详细地讨论 PHP 解释器如何在这些场景中编译和执行代码，我建议您查看[@StasM](https://stackoverflow.com/users/214196/stasm) [对这个问题](https://stackoverflow.com/a/15843929/660636)的回答，他提供了比这个答案更深入的精彩概述。

我想我们回答了你所有的问题。

**最佳实践：**将每个类放在它自己的文件中，然后根据需要[自动加载](http://php.net/manual/en/language.oop5.autoload.php)它们，正如[@StasM](https://stackoverflow.com/users/214196/stasm)在他的回答中所说，*使用合理的文件命名和自动加载策略 - 例如* [PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md) *或类似的东西*。当你这样做时，你不再需要关心引擎加载它们的顺序，它会自动为你处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T21:29:39.810

基本前提是要使用的类必须被定义，即引擎知道。这永远无法改变——如果您需要某个类的对象，PHP 引擎需要知道该类是什么。

但是，引擎获得此类知识的时刻可能会有所不同。首先，引擎对 PHP 代码的使用包括两个独立的过程——编译和执行。在编译阶段，引擎将您所知道的 PHP 代码转换为一组操作码（您已经熟悉），在第二阶段，引擎通过操作码，因为处理器将通过内存中的指令，并执行它们。

其中一个操作码是定义一个新类的操作码，它通常插入到源中类定义所在的同一位置。

但是，当编译器遇到类定义时，它可能能够在执行任何代码之前将该类输入到引擎已知的类列表中。这称为“早期绑定”。如果编译器确定它已经拥有创建类定义所需的所有信息，并且没有理由将类的创建推迟到实际运行时，就会发生这种情况。目前，引擎仅在以下情况下执行此操作：

1.  没有附加的接口或特征
2.  不是抽象的
3.  要么不扩展任何类，要么只扩展引擎已知的类
4.  被声明为顶级语句（即不在条件、函数等内部）

此行为也可以通过编译器选项进行修改，但这些选项仅适用于 APC 之类的扩展，因此除非您打算开发 APC 或类似的扩展，否则您不必担心太多。

这也意味着这没问题：

```
 class B extends A {}
 class A { } 
```

但这不会是：

```
 class C extends B {}
 class B extends A {}
 class A { } 
```

由于 A 将是早期绑定的，因此可用于 B 的定义，但 B 将仅在第 2 行中定义，因此不适用于第 1 行对 C 的定义。

在您的情况下，当您的类实现接口时，它不是早期绑定的，因此在到达“类”语句时引擎就知道了。当它是没有接口的简单类时，它是早期绑定的，因此一旦文件编译完成就被引擎知道（您可以将这一点视为文件中第一个语句之前的一个）。

为了不打扰引擎的所有这些奇怪的细节，我会支持上一个答案的建议 - 如果您的脚本很小，只需在使用前声明类。如果您有更大的应用程序，请在单独的文件中定义您的类，并有合理的文件命名和自动加载策略 - 例如[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)或类似的东西，适合您的情况。

# image - 图像精灵 - 表单提交按钮

> ID：15688643
> 
> 赞同：1
> 
> 时间：2013-03-28T17:43:02.640
> 
> 标签：image, forms, sprite

我可以为我的表单提交按钮使用图像精灵吗，尝试了一些东西，但似乎没有任何效果。

```
.button, .download, .OK, .file{
background: url(app/sprites.png) no-repeat;
 }

.button{
background-position: -1px -212px ;
width: 170px;
height: 30px;
} 
```

我的表格

```
 <form action="add.php" method="post"  value="Username">
 <div style="float:left; margin-left:15px;"><input type="text" name="fbid" required></div>
<div style="float:left; margin-left:2px;"><input type="submit" value="Submit"></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:51:03.467

现在你在输入上缺少一个类。

```
<input type="submit" class="button" value="Submit"> 
```

有了它就可以了。

我将它放入 jsFiddle 中，使用不同的图像，因为我无法访问您的图像。您可以使用该位置，以 32px 为增量。

[jsfiddle.net/CzWCv](http://jsfiddle.net/CzWCv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:49:51.900

你有没有尝试过

```
<div class="button" style="float:left; margin-left:2px;"><input type="submit"
value="Submit"></form> 
```

??

# ios - 使用redpark电缆逐行读取arduino串行输出？

> ID：15688648
> 
> 赞同：1
> 
> 时间：2013-03-28T17:43:18.937
> 
> 标签：ios, serial-port, arduino, ttl

我正在开发一个通过 redpark 电缆读取 Arduino 串行输出的 IOS 应用程序。在 Arduino 端，它使用 Serial.println() 发送字符串。该字符串的格式为“12.34x334.45x0.34x123x33”。本质上，它是双打的组合，中间有“x”作为特殊的分割字符。我最初的想法是，在应用程序端，它会逐行获取 Arduino 输出，所以我只需使用

```
NSString *testString= @"12.34x334.45x0.34x123x33";
NSArray *array = [testString componentsSeparatedByString:@"x"]; 
```

得到一个 NSArray 包含 12.34 334.45 0.34 123 和 33。

不知何故，在阅读了此处发布的问题和答案后，我发现 redpark sdk 无法逐行处理 Arduino 输出，它始终以 X 字节为基础。

为了正确解析 Arduino 输出字符串，我应该怎么做？将前导和尾随 0 添加到我的双数据以使原始字符串以固定长度发送是个好主意吗？（即“03.45x45.50x02.30”使其成为 17 个字节并尝试使用 redpark sdk 读取 17 个字节的数据？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:29:02.573

Redpark SDK 只抓取传入的串行数据流，但不会（尽管有一些帮助程序）将其解释为数据包。您需要自己编写代码。正如agentatlarge在对您的问题的评论中所建议的那样，将数据读入缓冲区，`readBytesAvailable:numBytes`直到您获得一个换行符（ASCII 13），此时您可以解析字符串并重新开始。

或者，跳过初始字符串：读取传入数据，直到获得“x”（此时您将字符串添加到 an `NSMutableArray`）*或*换行符（此时您处理数组并开始一个新的。

请注意，使用默认设置（可在 中配置`redparkSerial.h`）数据将以限制为 100 毫秒 ( `rxForwardingTimeout`) 或 16 字节 ( `rxForwardCount`) 的块提供给您，以较早者为准。因此，您的系统将需要能够处理多次读取，直到确定它已接收到数据包（打印行）中的所有数据，新行字符的到来证明了这一点。

# excel - VBSscript 运行 Excel 宏不起作用

> ID：15688650
> 
> 赞同：1
> 
> 时间：2013-03-28T17:43:21.450
> 
> 标签：excel, vbscript

我一直在尝试将运行 Excel 宏的 VBSscript 放在一起。我使用了这个论坛上其他线程的几个脚本以及网络上其他地方的脚本。

我发现这个论坛对其他有类似问题的人最有帮助。这里的专家就是：专家。

我是脚本写作的新手。我的经验仅限于在试错过程中剪切和粘贴示例脚本。使用这个特定的脚本，我似乎无法找到从 VBSscript 运行 Excel 宏的正确组合。

这是我当前正在运行的代码：

```
Set xlObj = CreateObject("Excel.application")
xlObj.Workbooks.Open "C:\Documents and settings\user\Desktop\Excel_macro_email.xls"
xlObj.Run "macro_email" 'name of macro
xlObj.ActiveWorkbook.Saved = True
xlObj.ActiveWindow.Close
xlObj.Quit 
```

我正在使用 XLnow OnScript Editor 来编译/调试脚本，并且编辑器没有发现任何问题。当我双击 .vbs 文件时，cmd 窗口会弹出一秒钟，我可以看到那里有一些输出，但由于它关闭得太快而无法读取。（我还研究了如何将结果输出到文件中，但我正在取得进展，可能会解决所有这些问题。

有人愿意帮助纠正这个脚本吗？如果您可以提供帮助并提出一些代码建议，还请包括在脚本中放置代码的位置，或者您可能会将其包含在完整的脚本中。如何处理我在这里找到的建议几乎与使用什么代码一样大。

感谢您提供的任何帮助。我为我缺乏专业知识而道歉。最后，在一点帮助下，我会从经验中学习。

这是脚本的更新，添加了 sub，如下所示：

```
Sub OpenAndRun (Excel_macro_email)

Set xlObj = CreateObject("Excel.Application")
xlObj.Workbooks.Open "C:\Documents and Settings\user\Desktop\Excel_macro_email.xls"
xlObj.Run "Excel_macro_email.xls,macro_email"
xlObj.ActiveWorkbook.Saved = True
xlObj.ActiveWindow.Close
xlObj.Quit

End Sub 
```

我仍然没有让宏运行。cmd 窗口像以前一样短暂打开，但现在我在它闪烁时看不到任何输出。

有什么建议么？

***这是发布此问题的解决方案'***

感谢您的答复。

我已经尝试过这个脚本的 seceral 版本。在最新版本中，我添加了一个“Sub”行和“End Sub”，这可能会有所帮助。最终的解决方案是当我发现 Excel 文件的文件扩展名不是 .xls 而是 .xlsm 时。当我添加“m”（我猜是启用宏）时，最新版本的脚本开始工作。

她是工作版本：

```
Option Explicit

Dim xlApp, xlBook

Set xlApp = CreateObject("Excel.Application")
'~~> Change Path here
Set xlBook = xlApp.Workbooks.Open("C:\Users\Thomas\Desktop\Excel_macro_email.xlsm", 0, True)
xlApp.Run "macro_email"
xlBook.Close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing

WScript.Echo "Finished."
WScript.Quit 
```

我希望这可以帮助其他有同样问题的人。谢谢你的帮助。

# javascript - 当通过jquery将HTML内容附加到它时，如何保持div滚动到底部，但隐藏滚动条？

> ID：15688656
> 
> 赞同：16
> 
> 时间：2013-03-28T17:43:37.297
> 
> 标签：javascript, jquery, scroll, scrollbar

下面我有一个基于 js 的小型模拟器，用于不同的命令工具。用户输入一个命令，如果它是正确的，它会显示在顶部。为了将来的使用，我需要确保它可以在完成模拟之前处理尽可能多的命令。这意味着我不可避免地会有内容溢出。

我现在的解决方案是将 Y 溢出设置为自动，添加滚动条和一个小 jquery 以使客户端始终滚动到输出 div 的底部，因为每次用户输入时，内容都会附加到先前内容的下方正确的命令。

现在这工作正常，除了我想删除滚动条。我希望内容以与溢出自动相同的方式运行，除非没有可见的滚动条。

![在此处输入图像描述](../Images/3ba0bed2e1cd2cd2ade03bbea8d0ea89.png)

有没有办法用 jquery 或 javascript 做到这一点？

我知道我可以做一些 css 技巧在带有 z-index 的滚动条上放置某种黑色，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-28T17:56:07.443

您只需要添加`overflow: hidden`到容器并在加载内容后滚动它：

```
div.scrollTop = div.scrollHeight; 
```

演示[http://jsfiddle.net/nT75k/2/](http://jsfiddle.net/nT75k/2/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T17:48:46.443

是的，您可以添加一个事件侦听器，当该事件发出时，您可以通过检查高度来让它向下滚动到底部，如下所示

```
$container = $('.container');
$container[0].scrollTop = $container[0].scrollHeight;

$('.input').keypress(function (e) {
  if (e.which == 13) {
    $container = $('.container');
    $container.append('<p class="row">' + e.target.value + '</p>');
    $container.animate({ scrollTop: $container[0].scrollHeight }, "slow");
  }
}); 
```

[http://jsfiddle.net/w2qbe/](http://jsfiddle.net/w2qbe/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T17:49:53.737

继续使用 javascript 进行滚动，并将包含模拟器的 div 放在另一个宽度稍小的 div 中，并在外部 div 上隐藏溢出。我已经使用过这种技术几次，而且非常有趣。

唯一需要注意的是滚动条在不同浏览器中的宽度略有不同，所以要小心。

例如：

html:

```
<div id="outside">
    <div id="inside">
        <div>more content 1</div>
        <div>more content 2</div>
        <div>more content 3</div>
        <div>more content 4</div>
        <div>more content 5</div>
        <div>more content 6</div>
        <div>more content 7</div>
        <div>more content 8</div>
        <div>more content 9</div>
        <div>more content 8</div>
        <div>more content 7</div>
        <div>more content 6</div>
        <div>more content 5</div>
        <div>more content 4</div>
        <div>more content 3</div>
        <div>more content 2</div>
        <div>more content 1</div>
    </div>
</div> 
```

CSS：

```
div#outside {
    width: 120px;
    height: 100px;
    overflow: hidden;
}

div#inside {
    width: 135px;
    height: 100px;
    overflow-y: auto;
} 
```

查看这个小提琴 -> [http://jsfiddle.net/5bkz5/1/](http://jsfiddle.net/5bkz5/1/) <- 并向下滚动文本！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-07T23:32:05.610

`div.scrollTop = div.scrollHeight;`

但你不需要`overflow: hidden`。

# android - Android WebView：应该由 XmlHttpRequest 触发 shouldInterceptRequest

> ID：15688659
> 
> 赞同：2
> 
> 时间：2013-03-28T17:44:00.457
> 
> 标签：android, webview, xmlhttprequest

我正在尝试集成一个通过使用*XmlHttpRequest*调用加载一些资源的 javascript 插件。我希望这个脚本在 WebView 的本地加载页面中运行。正如您可能已经猜到的那样，本地资源不允许*XmlHttpRequest调用，所以我立即收到以下错误：*

> XMLHttpRequest 无法加载 file:///android_asset/resources.html。仅 HTTP 支持跨源请求。

此时我认为我可以通过拦截调用然后自己加载文件来模拟Web服务器，例如：

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public WebResourceResponse shouldInterceptRequest(final WebView view, String url) {
        try {
            if (url.contains("resources.html")) { //breakpoint here is not triggering
                return new WebResourceResponse("text/html", "UTF-8", getAssets().open("resources.html"));
            }
        } catch (IOException e) {
            return super.shouldInterceptRequest(view, url);
        }
        return super.shouldInterceptRequest(view, url);
    }
}); 
```

问题是`shouldInterceptRequest`没有被调用。官方[文档](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)很简短，并没有具体说明拦截什么类型的请求。[这篇文章](http://labs.mwrinfosecurity.com/blog/2012/04/23/adventures-with-android-webviews/)有点暗示该方法确实拦截了*XmlHttpRequest*调用，但它似乎不起作用。

有谁知道是否`shouldInterceptRequest`应该在*XmlHttpRequest*之后调用？如果没有，还有其他方法可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T02:31:14.277

在 API 级别 16 WebSettings 添加了方法 setAllowFileAccessFromFileURLs() 和 setAllowUniversalAccessFromFileURLs()。将 webView 设置为 true 可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T09:15:05.017

正如我对此的测试，似乎只有外部请求会被拦截 - 您可以尝试将本地引用修改为外部的“ [http://foo.com/](http://foo.com/) ...”（而不是“file:/// android_asset/...")。

# c# - 为什么我在 Throw 上得到空异常？

> ID：15688671
> 
> 赞同：-2
> 
> 时间：2013-03-28T17:44:32.087
> 
> 标签：c#

代码是：

```
catch (WebException ex)
            {
                failed = true;
                wccfg.failedUrls++;
                return csFiles;
            }
            catch (Exception ex)
            {
                failed = true;
                wccfg.failedUrls++;
                throw;
            } 
```

抛出异常；异常消息是：NullReferenceException：对象引用未设置为对象的实例

```
System.NullReferenceException was unhandled by user code
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=GatherLinks
  StackTrace:
       at GatherLinks.TimeOut.getHtmlDocumentWebClient(String url, Boolean useProxy, String proxyIp, Int32 proxyPort, String usename, String password) in d:\C-Sharp\GatherLinks\GatherLinks-2\GatherLinks\GatherLinks\TimeOut.cs:line 55
       at GatherLinks.WebCrawler.webCrawler(String mainUrl, Int32 levels) in d:\C-Sharp\GatherLinks\GatherLinks-2\GatherLinks\GatherLinks\WebCrawler.cs:line 151
       at GatherLinks.WebCrawler.webCrawler(String mainUrl, Int32 levels) in d:\C-Sharp\GatherLinks\GatherLinks-2\GatherLinks\GatherLinks\WebCrawler.cs:line 151
       at GatherLinks.WebCrawler.webCrawler(String mainUrl, Int32 levels) in d:\C-Sharp\GatherLinks\GatherLinks-2\GatherLinks\GatherLinks\WebCrawler.cs:line 151
       at GatherLinks.BackgroundWebCrawling.secondryBackGroundWorker_DoWork(Object sender, DoWorkEventArgs e) in d:\C-Sharp\GatherLinks\GatherLinks-2\GatherLinks\GatherLinks\BackgroundWebCrawling.cs:line 82
       at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument)
  InnerException: 
```

这是 WebCrawler 函数中的 try 代码：

```
public List<string> webCrawler(string mainUrl, int levels)
        {

            busy.WaitOne();

            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            List<string> csFiles = new List<string>();

            csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
            csFiles.Add("current site name in this level is : " + mainUrl);

            try
            {
                HtmlAgilityPack.HtmlDocument doc = TimeOut.getHtmlDocumentWebClient(mainUrl, false, "", 0, "", "");
                done = true;

                Object[] temp_arr = new Object[8];
                temp_arr[0] = csFiles;
                temp_arr[1] = mainUrl;
                temp_arr[2] = levels;
                temp_arr[3] = currentCrawlingSite;
                temp_arr[4] = sitesToCrawl;
                temp_arr[5] = done;
                temp_arr[6] = wccfg.failedUrls;
                temp_arr[7] = failed;

                OnProgressEvent(temp_arr);

                currentCrawlingSite.Add(mainUrl);
                webSites = getLinks(doc);
                removeDupes(webSites);
                removeDuplicates(webSites, currentCrawlingSite);
                removeDuplicates(webSites, sitesToCrawl);
                if (wccfg.removeext == true)
                {
                    for (int i = 0; i < webSites.Count; i++)
                    {
                        webSites.Remove(removeExternals(webSites,mainUrl,wccfg.localy));
                    }
                }
                if (wccfg.downloadcontent == true)
                {
                     retwebcontent.retrieveImages(mainUrl); 
                }

                if (levels > 0)
                    sitesToCrawl.AddRange(webSites);

                if (levels == 0)
                {
                    return csFiles;
                }
                else
                {

                    for (int i = 0; i < webSites.Count(); i++)
                    {

                        if (wccfg.toCancel == true)
                        {
                            return new List<string>();
                        }
                        string t = webSites[i];
                        if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) 
                        {
                            csFiles.AddRange(webCrawler(t, levels - 1));
                        }

                    }
                    return csFiles;
                }

            }

            catch (WebException ex)
            {
                failed = true;
                wccfg.failedUrls++;
                return csFiles;
            }
            catch (Exception ex)
            {
                failed = true;
                wccfg.failedUrls++;
                throw;
            }
        } 
```

这就是我在班级顶部使用 wccfg 的方式：

```
private System.Threading.ManualResetEvent busy;
        WebcrawlerConfiguration wccfg;
        List<string> currentCrawlingSite;
        List<string> sitesToCrawl;
        RetrieveWebContent retwebcontent;
        public event EventHandler<WebCrawlerProgressEventHandler> ProgressEvent;
        public bool done;
        public bool failed;

        public WebCrawler(WebcrawlerConfiguration webcralwercfg)
        {
            failed = false;
            done = false;
            currentCrawlingSite = new List<string>();
            sitesToCrawl = new List<string>();
            busy = new System.Threading.ManualResetEvent(true);
            wccfg = webcralwercfg; 
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:47:39.033

你得到了`NullReferenceException`因为在你的 try 块中使用它之前你没有初始化一些东西。

然后代码进入你的`catch(Exception ex)`块，增加计数器，设置`failed=true`，然后重新抛出`NullReferenceException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:58:24.840

对此函数调用有些不满意：

```
TimeOut.getHtmlDocumentWebClient(mainUrl, false, "", 0, "", "") 
```

调试器在您的语句上停止的原因`throw`是因为您捕获了原始异常，将其隐藏在调试器中。为“Break on First-Chance Exception”设置调试选项——然后您将看到异常真正来自何处，能够检查您的变量等。

`#if`在调试过程中去掉所有的异常处理程序通常是个好主意，因为它们会吞下很多重要的错误信息。对于您正在做的事情，无论如何使用`try`/可能会更好`finally`。

# symfony-1.4 - 如何在 Mac 10.8.3 /Xampp/ 上设置 Symfony 1.4

> ID：15688672
> 
> 赞同：0
> 
> 时间：2013-03-28T17:44:35.863
> 
> 标签：symfony-1.4

请有人解释如何使用 xampp 在 Mac 10.8.3 上安装 symfony 1.4。我是 Mac 新手，什么都不知道。如果你不介意请一步一步地解释它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:48:52.397

1.  安装 Apache 或任何网络服务器（例如 nginx、lighttpd...等）
2.  安装 php（最低 5.2.4）
3.  安装 MySQL
4.  阅读：[http ://symfony.com/legacy/doc/jobeet?orm=Doctrine](http://symfony.com/legacy/doc/jobeet?orm=Doctrine)

如果您重新开始，您还应该考虑使用 Symfony 2。

# java - 在构造函数上注入 java.util.Random

> ID：15688677
> 
> 赞同：3
> 
> 时间：2013-03-28T17:44:52.273
> 
> 标签：java, spring, code-injection

我有一个带有这个构造函数的类 HiddenNumber：

```
public HiddenNumber(java.util.Random random, int maxNumberOfDigits) {
  /* some code */
} 
```

我正在尝试将 DI 的注释用作：

```
@Autowired
public HiddenNumber(@Value("T(java.util.Random") random, 
    @Value("4")int maxNumberOfDigits) {
  /* some code */
} 
```

但它不起作用。我也试过：

```
@Autowired
public HiddenNumber(@Value("#{T(java.util.Random}") random, 
    @Value("4")int maxNumberOfDigits) {
  /* some code */
} 
```

如果我做：

```
@Autowired
public HiddenNumber(Random random, @Value("4") int maxNumberOfDigits) {
  /* some code */
} 
```

在 app-context.xml 中执行：

```
<bean class="java.util.Random" /> 
```

它工作正常。但当然我更喜欢只做注释。

注入 java.util.Random 的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:53:33.000

你可以这样做：

```
@Autowired
public HiddenNumber(@Value("#{new java.util.Random()}") Random random, @Value("4")int maxNumberOfDigits) {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:56:10.097

您也可以使用 Spring 的`<constructor-arg>`元素。例如，请参阅[使用构造函数参数字段](https://stackoverflow.com/questions/3466437/populating-a-spring-bean-using-a-constructor-arg-field)或[this](http://www.dzone.com/tutorials/java/spring/spring-bean-constructor-injection-1.html)填充 spring bean 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T21:40:40.190

我需要一个非常简单的程序，我使用 SpEL 解决了这个问题。

为了使用 p: 前缀，您必须在 beans 标签中包含此属性： xmlns:p="http://www.springframework.org/schema/p"

# linq - LINQ 组和 SelectMany

> ID：15688678
> 
> 赞同：1
> 
> 时间：2013-03-28T17:45:00.443
> 
> 标签：linq, entity-framework

我有一个很好的`LINQ`声明，Oracle 不喜欢：

```
var result = from r in Context.Accounts
        where Statuses.Contains(r.DEC_CD)
        && r.Deposit.Payments.Where(n => n.CreatedDate >= DateStart).Sum(n => n.Total - n.Fees) > 3000
        select r; 
```

不幸的是，`.Where(...).Sum(...)`使用 Oracle EF 提供程序创建了无效的 SQL。

我试图改用 group 重写它：

```
var result = from g in Context.Payment
        where g.CreatedDate >= DateStart
        group g by g.Total - g.Fees into grp
        where grp.Key >= 3000
        select g; 
```

上面的示例无法编译。

```
var result = from g in Context.Payment
        where g.CreatedDate >= DateStart
        group g by g.Total - g.Fees into grp
        where grp.Key >= 3000
        select new { g }; 
```

也不编译

```
var result = from g in Context.Payment
        where g.CreatedDate >= DateStart
        group g by g.Total - g.Fees into grp
        where grp.Key >= 3000
        select grp.SelectMany(n => n); 
```

看起来它可以从 Intellisense 工作，但我收到一个错误`The type arguments for method SelectMany cannot be inferred from the usage` 我唯一能够选择的只是 grp，如果我选择它，我会得到`Igrouping<decimal, Payment>' which has keys and multiple rows underneath. I just want the rows, hence the`.SelectMany`

知道如何弄平`IEnumerable<Payment>`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:46:24.247

你可能只是想要这个

```
var result = from g in Context.Payment
    where g.CreatedDate >= DateStart
          && (g.Total - g.Fees) >= 3000
    select g; 
```

对？总费用为 gte 3000 和日期标准的所有付款。看来该组不是有意或不需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:00:43.910

您必须添加一个 from 语句才能重新选择该组：

```
var result = from g in Context.Payment
        where g.CreatedDate >= DateStart
        group g by g.Total - g.Fees into grp
        where grp.Key >= 3000
        from i in grp
        select i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:48:20.943

```
var result = 
        from p in Context.Payment
        where p.CreatedDate >= DateStart
        group p by p.Total - p.Fees into g
        where g.Key >= 3000
        select g; // select group here 
```

或者不分组更好：

```
var result = 
        from p in Context.Payment
        where p.CreatedDate >= DateStart &&
              (p.Total - p.Fees) >= 3000
        select p; 
```

# android - Android - 在删除标记之前显示确认对话框

> ID：15688685
> 
> 赞同：0
> 
> 时间：2013-03-28T17:45:57.233
> 
> 标签：android, google-maps, marker

我正在使用 google maps api v2 开发一个应用程序，并且我有一些标记。使用 onInfoWindowClick，我删除了标记，但我想显示一个带有“删除”和“取消”按钮的确认弹出窗口，以便用户可以确认删除。那可能吗？这是我的代码，我的问题是我无法访问“onClick”中的“标记”：

```
public void onInfoWindowClick(Marker marker) {
LayoutInflater li = LayoutInflater.from(context);
final View v = li.inflate(R.layout.deletelayout, null);
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setView(v);
builder.setCancelable(true);
builder.setPositiveButton("Delete", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which){
       //I cannot get access to the marker in here
    }});
builder.setNegativeButton("Cancel", null);
AlertDialog alert = builder.create();
alert.show();

//marker.remove(); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:50:33.687

改变`public void onInfoWindowClick(Marker marker) {`

到 `public void onInfoWindowClick(final Marker marker) {`

您现在应该能够访问您的标记变量`onClick`

# java - Spring中的UnsatisfiedDependencyException：构造函数的非法参数：参数类型不匹配

> ID：15688689
> 
> 赞同：6
> 
> 时间：2013-03-28T17:46:27.313
> 
> 标签：java, spring, jakarta-ee, dependency-injection

**我正在尝试在 DepartmentService 中注入 DepartmentDAO。这出现在我添加 @Transactional 注释之后。所以这是我的部门服务：**

```
@Service
@Transactional
public class DepartmentService extends AbstractCRUDService<DepartmentDTO> {

    private DepartmentDAO departmentDAO;

    public DepartmentService() {
        super();
        this.departmentDAO = null;
    }

    @Inject
    public DepartmentService(DepartmentDAO departmentDAO) {
        super();
        this.departmentDAO = departmentDAO;
    }

    @Override   
    public Long create(DepartmentDTO dDTO) {        
        Department department = new Department();
        department.setDepName(dDTO.getDepName());
        return departmentDAO.create(department);
    }
...............read,update,delete,findAll methods...........................
} 
```

**这是我的 DepartmentDAO：**

```
@Repository
@Transactional(propagation = Propagation.MANDATORY)
public class DepartmentDAO extends AbstractCRUDDao<Department> {

    private final Logger logger = LoggerFactory.getLogger(DepartmentDAO.class);
    protected Class<DepartmentDAO> clazz;

    public DepartmentDAO() {    

    }

    @Override   
    public Long create(Department d) {
    entityManager.persist(d);
    return d.getId();
    }
 ...............read,update,delete,findAll methods...........................
} 
```

**这是一个applicationContext.xml：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    ">

<context:annotation-config />
<context:component-scan base-package="net.sam" />
<context:component-scan base-package="net.sam.servlets" />
<context:component-scan base-package="net.sam.dao.impl" />
<context:component-scan base-package="net.sam.services.impl" />
<context:component-scan base-package="net.sam.model.impl" />

<!-- declare EntityManagerFactory -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="net.sam.jpa" />
    <property name="persistenceProviderClass"    value="org.hibernate.ejb.HibernatePersistence" />
</bean>

<!-- inject into JPATransactionManager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"></property>
</bean>

<!-- enable container managed transactions -->
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

**我的堆栈跟踪：**

```
 мар 29, 2013 4:46:35 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production envi
ronments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\WINDOWS\Sun\Java\
bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/
bin;C:/Program Files/Java/jre7/lib/i386;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\W
INDOWS\system32\WindowsPowerShell\v1.0;C:\Program Files\Mercurial\;C:\Program Files\Microsoft SQL Se
rver\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\TortoiseSV
N\bin;c:\Program Files\apache-maven-3.0.4-bin\apache-maven-3.0.4\bin;C:\Program Files\eclipse;;.
мар 29, 2013 4:46:35 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.e
clipse.jst.jee.server:chardymov-webapp' did not find a matching property.
мар 29, 2013 4:46:35 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
мар 29, 2013 4:46:35 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1710 ms
мар 29, 2013 4:46:35 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
мар 29, 2013 4:46:35 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
мар 29, 2013 4:46:38 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
мар 29, 2013 4:46:38 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
29-03-13 16:46:38,669  INFO [ContextLoader:initWebApplicationContext:272] - Root WebApplicationConte
xt: initialization started
29-03-13 16:46:38,741  INFO [XmlWebApplicationContext:prepareRefresh:503] - Refreshing Root WebAppli
cationContext: startup date [Fri Mar 29 16:46:38 EAT 2013]; root of context hierarchy
29-03-13 16:46:38,797  INFO [XmlBeanDefinitionReader:loadBeanDefinitions:315] - Loading XML bean def
initions from URL [file:/C:/Documents%20and%20Settings/mach/workspace/clean2/.metadata/.plugins/org.
eclipse.wst.server.core/tmp0/wtpwebapps/chardymov-webapp/WEB-INF/classes/applicationContext.xml]    
29-03-13 16:46:39,270  INFO [AutowiredAnnotationBeanPostProcessor:<init>:139] - JSR-330 'javax.injec
t.Inject' annotation found and supported for autowiring
29-03-13 16:46:39,374  INFO [LocalContainerEntityManagerFactoryBean:createNativeEntityManagerFactory
:283] - Building JPA container EntityManagerFactory for persistence unit 'net.sam.jpa'
29-03-13 16:46:39,599  INFO [Version:<clinit>:37] - HCANN000001: Hibernate Commons Annotations {4.0.
1.Final}
29-03-13 16:46:39,599  INFO [Version:logVersion:41] - HHH000412: Hibernate Core {4.1.9.Final}
29-03-13 16:46:39,607  INFO [Environment:<clinit>:239] - HHH000206: hibernate.properties not found
29-03-13 16:46:39,607  INFO [Environment:buildBytecodeProvider:342] - HHH000021: Bytecode provider n
ame : javassist
29-03-13 16:46:39,647  INFO [Ejb3Configuration:configure:527] - HHH000204: Processing PersistenceUni
tInfo [
    name: net.sam.jpa
    ...]
29-03-13 16:46:39,960  INFO [DriverManagerConnectionProviderImpl:configure:96] - HHH000402: Using Hi
bernate built-in connection pool (not for production use!)
29-03-13 16:46:39,960  INFO [DriverManagerConnectionProviderImpl:configure:130] - HHH000115: Hiberna
te connection pool size: 20
29-03-13 16:46:39,960  INFO [DriverManagerConnectionProviderImpl:configure:133] - HHH000006: Autocom
mit mode: true
29-03-13 16:46:39,960  INFO [DriverManagerConnectionProviderImpl:configure:147] - HHH000401: using d
river [org.h2.Driver] at URL [jdbc:h2:tcp://localhost/mem:db1]
29-03-13 16:46:39,960  INFO [DriverManagerConnectionProviderImpl:configure:152] - HHH000046: Connect
ion properties: {autocommit=true, release_mode=auto}
29-03-13 16:46:40,104  INFO [Dialect:<init>:123] - HHH000400: Using dialect: org.hibernate.dialect.H
2Dialect
29-03-13 16:46:40,144  INFO [TransactionFactoryInitiator:initiateService:73] - HHH000268: Transactio
n strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
29-03-13 16:46:40,152  INFO [ASTQueryTranslatorFactory:<init>:48] - HHH000397: Using ASTQueryTransla
torFactory
29-03-13 16:46:40,217  INFO [Version:<clinit>:27] - HV000001: Hibernate Validator 4.3.1.Final
29-03-13 16:46:40,570  INFO [SchemaExport:execute:343] - HHH000227: Running hbm2ddl schema export
Hibernate: alter table EMPLOYEES drop constraint FK4351FF658ECC7308
29-03-13 16:46:40,578 ERROR [SchemaExport:perform:425] - HHH000389: Unsuccessful: alter table EMPLOY
EES drop constraint FK4351FF658ECC7308
29-03-13 16:46:40,578 ERROR [SchemaExport:perform:426] - Table "EMPLOYEES" not found; SQL statement:
alter table EMPLOYEES drop constraint FK4351FF658ECC7308 [42102-170]
Hibernate: alter table EMPLOYEES drop constraint FK4351FF6530EEAB88
29-03-13 16:46:40,578 ERROR [SchemaExport:perform:425] - HHH000389: Unsuccessful: alter table EMPLOY
EES drop constraint FK4351FF6530EEAB88
29-03-13 16:46:40,578 ERROR [SchemaExport:perform:426] - Table "EMPLOYEES" not found; SQL statement:
alter table EMPLOYEES drop constraint FK4351FF6530EEAB88 [42102-170]
Hibernate: drop table DEPARTMENTS if exists
Hibernate: drop table EMPLOYEES if exists
Hibernate: drop table ROLES if exists
Hibernate: create table DEPARTMENTS (id bigint generated by default as identity, depName varchar(20)
 not null unique, primary key (id))
Hibernate: create table EMPLOYEES (id bigint generated by default as identity, name varchar(20) not 
null, surname varchar(255), department_fk bigint not null, role_fk bigint not null, primary key (id)
, unique (name, surname))
Hibernate: create table ROLES (id bigint generated by default as identity, roleName varchar(20) not 
null unique, primary key (id))
Hibernate: alter table EMPLOYEES add constraint FK4351FF658ECC7308 foreign key (department_fk) refer
ences DEPARTMENTS
Hibernate: alter table EMPLOYEES add constraint FK4351FF6530EEAB88 foreign key (role_fk) references 
ROLES
29-03-13 16:46:40,602  INFO [SchemaExport:execute:405] - HHH000230: Schema export complete
29-03-13 16:46:40,674  INFO [DefaultListableBeanFactory:preInstantiateSingletons:577] - Pre-instanti
ating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1d98539: de
fining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.sp
ringframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.an
notation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAn
notationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,comp
osite,departmentDAO,employeeDAO,roleDAO,departmentService,employeeService,roleService,entityManagerF
actory,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframewor
k.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.inte
rceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,o
rg.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of
 factory hierarchy
29-03-13 16:46:40,730  INFO [DefaultListableBeanFactory:destroySingletons:434] - Destroying singleto
ns in org.springframework.beans.factory.support.DefaultListableBeanFactory@1d98539: defining beans [
org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.
context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.inter
nalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProces
sor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,composite,departme
ntDAO,employeeDAO,roleDAO,departmentService,employeeService,roleService,entityManagerFactory,transac
tionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.
annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.Transa
ctionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframe
work.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hiera
rchy
29-03-13 16:46:40,738  INFO [LocalContainerEntityManagerFactoryBean:destroy:441] - Closing JPA Entit
yManagerFactory for persistence unit 'net.sam.jpa'
29-03-13 16:46:40,738  INFO [SchemaExport:execute:343] - HHH000227: Running hbm2ddl schema export
Hibernate: alter table EMPLOYEES drop constraint FK4351FF658ECC7308
Hibernate: alter table EMPLOYEES drop constraint FK4351FF6530EEAB88
Hibernate: drop table DEPARTMENTS if exists
Hibernate: drop table EMPLOYEES if exists
Hibernate: drop table ROLES if exists
29-03-13 16:46:40,746  INFO [SchemaExport:execute:405] - HHH000230: Schema export complete
29-03-13 16:46:40,746  INFO [DriverManagerConnectionProviderImpl:stop:156] - HHH000030: Cleaning up 
connection pool [jdbc:h2:tcp://localhost/mem:db1]
29-03-13 16:46:40,746 ERROR [ContextLoader:initWebApplicationContext:307] - Context initialization f
ailed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com
posite' defined in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugins\org.ecli
pse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\Composite.cla
ss]: Unsatisfied dependency expressed through constructor argument with index 0 of type [net.sam_sol
utions.services.impl.DepartmentService]: : Error creating bean with name 'departmentService' defined
 in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugins\org.eclipse.wst.server.
core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\services\impl\DepartmentServ
ice.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstanti
ationException: Could not instantiate bean class [net.sam.services.impl.DepartmentService]
: Illegal arguments for constructor; nested exception is java.lang.IllegalArgumentException: argumen
t type mismatch; nested exception is org.springframework.beans.factory.BeanCreationException: Error 
creating bean with name 'departmentService' defined in file [C:\Documents and Settings\mach\workspac
e\clean2\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\cla
sses\net\sam\services\impl\DepartmentService.class]: Instantiation of bean failed; nested 
exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class 
[net.sam.services.impl.DepartmentService]: Illegal arguments for constructor; nested excep
tion is java.lang.IllegalArgumentException: argument type mismatch
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorRes
olver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:196)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor
(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(
AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(Abstra
ctAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(Abstract
AutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.ja
va:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingl
etonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java
:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:1
93)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(De
faultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(A
bstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContex
t.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLo
ader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.j
ava:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'd
epartmentService' defined in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugin
s\org.eclipse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\ser
vices\impl\DepartmentService.class]: Instantiation of bean failed; nested exception is org.springfra
mework.beans.BeanInstantiationException: Could not instantiate bean class [net.sam.service
s.impl.DepartmentService]: Illegal arguments for constructor; nested exception is java.lang.IllegalA
rgumentException: argument type mismatch
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor
(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(
AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(Abstra
ctAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(Abstract
AutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.ja
va:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingl
etonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java
:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:1
93)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(Defa
ultListableBeanFactory.java:872)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(Default
ListableBeanFactory.java:814)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultLi
stableBeanFactory.java:731)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(Construct
orResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorRes
olver.java:723)
    ... 25 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [n
et.sam.services.impl.DepartmentService]: Illegal arguments for constructor; nested excepti
on is java.lang.IllegalArgumentException: argument type mismatch
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:158)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstanti
ationStrategy.java:121)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:280)
    ... 38 more
Caused by: java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 40 more
мар 29, 2013 4:46:40 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframewor
k.web.context.ContextLoaderListener
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com
posite' defined in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugins\org.ecli
pse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\Composite.cla
ss]: Unsatisfied dependency expressed through constructor argument with index 0 of type [net.sam_sol
utions.services.impl.DepartmentService]: : Error creating bean with name 'departmentService' defined
 in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugins\org.eclipse.wst.server.
core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\services\impl\DepartmentServ
ice.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstanti
ationException: Could not instantiate bean class [net.sam.services.impl.DepartmentService]
: Illegal arguments for constructor; nested exception is java.lang.IllegalArgumentException: argumen
t type mismatch; nested exception is org.springframework.beans.factory.BeanCreationException: Error 
creating bean with name 'departmentService' defined in file [C:\Documents and Settings\mach\workspac
e\clean2\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\cla
sses\net\sam\services\impl\DepartmentService.class]: Instantiation of bean failed; nested 
exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class 
[net.sam.services.impl.DepartmentService]: Illegal arguments for constructor; nested excep
tion is java.lang.IllegalArgumentException: argument type mismatch
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorRes
olver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:196)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor
(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(
AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(Abstra
ctAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(Abstract
AutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.ja
va:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingl
etonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java
:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:1
93)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(De
faultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(A
bstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContex
t.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLo
ader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.j
ava:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'd
epartmentService' defined in file [C:\Documents and Settings\mach\workspace\clean2\.metadata\.plugin
s\org.eclipse.wst.server.core\tmp0\wtpwebapps\chardymov-webapp\WEB-INF\classes\net\sam\ser
vices\impl\DepartmentService.class]: Instantiation of bean failed; nested exception is org.springfra
mework.beans.BeanInstantiationException: Could not instantiate bean class [net.sam.service
s.impl.DepartmentService]: Illegal arguments for constructor; nested exception is java.lang.IllegalA
rgumentException: argument type mismatch
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor
(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(
AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(Abstra
ctAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(Abstract
AutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.ja
va:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingl
etonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java
:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:1
93)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(Defa
ultListableBeanFactory.java:872)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(Default
ListableBeanFactory.java:814)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultLi
stableBeanFactory.java:731)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(Construct
orResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorRes
olver.java:723)
    ... 25 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [n
et.sam.services.impl.DepartmentService]: Illegal arguments for constructor; nested excepti
on is java.lang.IllegalArgumentException: argument type mismatch
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:158)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstanti
ationStrategy.java:121)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorRes
olver.java:280)
    ... 38 more
Caused by: java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 40 more

мар 29, 2013 4:46:40 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
мар 29, 2013 4:46:40 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/chardymov-webapp] startup failed due to previous errors
мар 29, 2013 4:46:40 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
мар 29, 2013 4:46:40 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/chardymov-webapp] registered the JDBC driver [org.h2.Driver] but faile
d to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver h
as been forcibly unregistered.
мар 29, 2013 4:46:40 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
мар 29, 2013 4:46:40 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 9757 ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:09:07.923

`@Transactional`被实现为代理，恕我直言 Spring 不会将代理类型解析为`DepartmentDAO`. 在这种情况下，您有 2 个解决方案：

*   让你的 DA 实现一个接口并通过这个最后注入它
*   在 Spring 配置中启用 CGLib 代理

# visual-studio - Visual Studio 的内置智能标签列表？

> ID：15688691
> 
> 赞同：1
> 
> 时间：2013-03-28T17:46:34.837
> 
> 标签：visual-studio, mef, smart-tags

当我想生成 using 语句、实现接口方法、生成类等时，我经常使用 Visual Studio 2010 中的 Show Smart Tag 快捷方式（Ctrl + Period）。

我最近向我的同事介绍了这个快捷方式，他们很喜欢。

显然，这个快捷方式有很多上下文用途，我觉得我还没有找到它们。是否有 Visual Studio 2010 内置的所有智能标记的中央列表？或者，有没有办法让我真正查看 Visual Studio 2010 已加载的智能标签列表？

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:51:42.037

Visual Studio UI 中没有任何内容可以显示可能的智能标记集。不过，您在标签中列出了 MEF。如果您使用的是 MEF 组件，则在运行时很容易查询此信息。简单导入属性的所有用途`ISmartTagSourceProvider`和查询`Name`

```
[ImportMany]
public List<ISmartTagSourceProvider> SmartTagProviders;

void GetNames()
{
  foreach (var provider in SmartTagProviders) { 
    var attrib = (NameAttribute)provider.GetType().GetAttribute(typeof(NameAttribute));
    attrib.Name;
  }
} 
```

# django - 基于 Django 动态类的通用视图

> ID：15688694
> 
> 赞同：1
> 
> 时间：2013-03-28T17:46:46.077
> 
> 标签：django, django-class-based-views

我们有很多很多使用简单通用视图的视图，我们曾经在 urls.py 中循环并指向相同的基于函数的通用视图。现在我们正在转向基于类的通用视图，我们需要复制此功能，并且我们被迫将所有逻辑移动到 urls.py 文件中，如下所示：

```
GENERIC_VIEWS_EDIT = ['ModelOne', 'ModelTwo', 'ModelThree', 'ModelFour', 'ModelN',]

for model in GENERIC_VIEWS_EDIT:
    urlpatterns += patterns('',

        url(r'^%s/(?P<pk>\d+)/$' % model.lower(), never_cache(staff_member_required(UpdateView.as_view(
            model=eval(model),
            context_object_name='object',
            form_class=eval('%sForm' % model),
            template_name='edit_form.html',
            success_url='/yay/'
        ))), name='edit-%s' % model.lower()),

    ) 
```

虽然这很好用，但我不屑在 urls.py 文件中包含所有这些“查看代码”。此外，如果我需要为这 N 个模型中的一个或两个覆盖一个方法，那么这个实现就不可能了。

有什么方法可以将模型作为参数传递并将我的通用视图移回views.py，像这样？

```
GENERIC_VIEWS_EDIT = ['ModelOne', 'ModelTwo', 'ModelThree', 'ModelFour', 'ModelN',]

for model in GENERIC_VIEWS_EDIT:
    urlpatterns += patterns('',
        url(r'^%s/(?P<pk>\d+)/$' % model.lower(), UpdateView.as_view(model=model)), name='edit-%s' % model.lower()),
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:49:40.643

你是对的。此逻辑属于您的视图。

由于您使用的是基于类的视图，因此您可以将 UpdateView 子类化并`__init__()`使用自定义逻辑覆盖该函数：

```
class MyUpdateView(UpdateView):
    template_name = 'edit_form.html'
    success_url = '/yay/'
    context_object_name = 'object'

    def __init__(self, *args, **kwargs):
        super(MyUpdateView, self).__init__(*args, **kwargs)
        self.form_class = eval('%sForm' % self.model) 
```

# java - hadoop单节点jar没有运行

> ID：15688695
> 
> 赞同：1
> 
> 时间：2013-03-28T17:46:46.177
> 
> 标签：java, hadoop, mapreduce

我已经在 Windows 中设置了一个`hadoop`节点。

当我执行命令 ./bin/hadoop jar Prefix.jar PrefixJob ip op

工作卡住了。没有例外或任何事情。但它只是卡住了。

如何让它运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:26:22.070

运行 WordCount 示例的正确命令如下，我[昨天](http://cloudcelebrity.wordpress.com/2013/03/28/hdinsight-hadoop-on-azure-demo-submit-mapreduce-job-process-result-from-pig-and-filter-final-results-in-hive/)刚刚测试过（在 HDInsight 上）：

```
hadoop.cmd jar jar_file_name.jar class_name iput_file_or_folder_name output_folder_name

c:\apps\dist\hadoop-1.1.0-SNAPSHOT\bin\hadoop.cmd jar    \  
c:\apps\Jobs\templates\635000448534317551.hadoop-examples.jar wordcount \
/user/admin/DaVinci.txt /user/admin/outcount 
```

您可以做的是查看作业日志以了解正在发生的事情。首先访问您的集群打开 Job Tracker，然后搜索 Job ID 以查看有关提交作业的信息。

# javascript - 如何根据选择框中选择的不同选项显示不同的图片？

> ID：15688697
> 
> 赞同：0
> 
> 时间：2013-03-28T17:46:53.670
> 
> 标签：javascript, html

我有一个带有多个选项的选择框，我正在尝试找出一种方法来为每个选项显示图片，具体取决于所选择的选项。我在这里非常需要帮助，因为我需要尽快完成这项工作。我试图使其自动发生（选择选项时）或使用按钮（取决于选择的选项），但到目前为止，我无法提出任何可行的东西。非常感谢任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:49:04.707

您应该检查 selected 的值`<option>`并将`<img>`src 更改为所需图像的路径。为此，您需要在用户更改`<select>`'s时调用一个函数`<option>`。

这是一个示例：

### HTML

每次选择新的时`onchage="changeImage();`都会`<select>`调用该函数。`changeImage()``<option>`

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>
<body>
    <select id="selectbox" onchange="changeImage();">
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="javascript">JavaScript</option>
    </select>
    <img id="img" src="" />
</body>
</html> 
```

### JavaScript

```
<script type="text/javascript">
    function changeImage(){
        var selectBox = document.getElementById("selectbox");
        var selectedValue = selectBox.options[selectBox.selectedIndex].value;
        document.getElementById("img").src = selectedValue + ".png";
    }
</script> 
```

您也可以检查所选的`<option>`值`selectBox.options[selectBox.selectedIndex].innerHTML`。如果您有很多选项并且不想设置`value`所有内容，那将变得更容易。

如果您服务器上的图像与每个选项的值具有相同的名称，您甚至不需要使用 if 语句。但是，如果图像位于不同的位置或具有不同的名称/扩展名，您可以像这样设置代码：

```
<script type="text/javascript">
    function changeImage(){     
        var selectBox = document.getElementById("selectbox");
        var selectedValue = selectBox.options[selectBox.selectedIndex].value;
        var img = document.getElementById("img");
        if (selectedValue == "html"){
            img.src = "images/html.png";
        } else if (selectedValue == "css"){
            img.src = "images/css.jpeg";
        }
    }
</script> 
```

# ios - 以不同的缩放返回苹果地图

> ID：15688698
> 
> 赞同：0
> 
> 时间：2013-03-28T17:46:54.403
> 
> 标签：ios

我有一张动物园地图，上面有定位动物的别针。放大地图。点击一个图钉，然后点击标注，它会将用户带到带有动物图片和描述/叙述的视图。该视图上的“地图”按钮将用户返回到原始缩放级别的动物园地图。有谁知道在最后一个缩放级别/位置返回地图的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:55:59.053

您可以使用

```
[self.mapView setRegion:adjustedRegion animated:YES]; 
```

功能。因此，您要做的是，在地图视图即将消失时保存“区域”属性，以便在地图视图出现时再次设置它。

# asp.net - asp.net 中继器 - 获取行项_DataBound 的值

> ID：15688704
> 
> 赞同：0
> 
> 时间：2013-03-28T17:47:11.203
> 
> 标签：asp.net, repeater, itemdatabound

如何在转发器 _DataBound 子中获取我想要的每个单元格的值？- 这样我就可以稍微更改值并将更改应用于文字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:58:07.580

您可以在该行中获取文字，但要转换事件 arg：

```
Protected Sub repeater_dataBind(ByVal sender As Object, ByVal e As RepeaterItemEventArgs) Handles myRepeater.ItemDataBound
    If (e.Item.ItemType <> ListItemType.Item And e.Item.ItemType <> ListItemType.AlternatingItem) Then
            Return
    Else
       Dim myLiteral As New Literal
       myLiteral = CType(e.Item.FindControl("IDofLiteral"), Literal)
    End If

end Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:03:35.587

假设这是您的中继器（因为您没有包含任何代码）：

```
<asp:Repeater ID="_r" runat="server">
    <ItemTemplate>
        <asp:Literal ID="_lit" Text='<%# Eval("yourItemName")%>' runat="server"></asp:Literal>
        <br /><br />
    </ItemTemplate>
</asp:Repeater> 
```

并且您制作了一个`ItemDataBound`事件，因为您想在每个文字的末尾添加“meow”（否则只会显示`yourItemName`来自数据源的值）：

```
protected void Page_Load(object sender, EventArgs e)
{
    _r.DataSource = table;
    _r.ItemDataBound += new RepeaterItemEventHandler(RItemDataBound);
    _r.DataBind();
} 

protected void RItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Literal lit = (Literal)e.Item.FindControl("_lit");
        lit.Text += "meow";
    }
} 
```

阅读：[Repeater.ItemDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:07:14.067

您可以使用`FindControl`来获取 a 中单元格的值`repeater`。

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Literal lbl = (Literal)e.Item.FindControl("ltrl");  
        lbl.Text = // will give you the value for each `ItemIndex`

    }
} 
```

# visual-studio-2010 - 在视觉工作室中打开大括号/块缩进线？

> ID：15688705
> 
> 赞同：1
> 
> 时间：2013-03-28T17:47:14.157
> 
> 标签：visual-studio-2010, visual-studio

我知道一些 IDE 支持此功能，但有人知道如何激活大括号线吗？我不知道它们到底叫什么，但它们看起来有点像这样：

```
if(numOfSomething > 8)
{
|   if(blah == true)
|   {
|   |    blah = false;
|   |    //whatever
|   }
{ 
```

任何人都知道视觉工作室是否支持这些以及如何打开它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T15:35:55.640

对于您所说的那种行为，我有“缩进指南”扩展名：http: [//visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30)

# ios - IOS - UIWebView 中不需要的超链接

> ID：15688707
> 
> 赞同：0
> 
> 时间：2013-03-28T17:47:19.780
> 
> 标签：ios, uiwebview

得到了我作为字符串插入到 uiwebview 的这个 html

```
<div style="font-family: sans-serif;">

<p><p><u>George Barret</u>&nbsp;</p>

<p>Irish,
1728/1732-1784&nbsp;</p>

<p><b><i>An Extensive Wooded River Landscape
with Fishermen Hauling in their Nets in the Foreground</i></b><b>, </b></p>

<p><b>1760s</b></p>

<p>Oil on canvas<br><span style="font-size: 13.513513565063477px; line-height: 19.988739013671875px;">137 x 195.5 cm</span></p>

<p>Heritage Gift, IIB Bank, 2005</p>

<p><span>NGI.4750</span></p></p></div> 
```

我在“1728/1732-1784”上有一个蓝色超链接

任何人都知道为什么以及如何禁用此行为？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:46.053

`myWebView.dataDetectorTypes = UIDataDetectorTypeNone;`

这将阻止您`UIWebView`将任何内容（电话号码、链接、电子邮件地址）转换为可点击的链接。该属性`detectorTypes`是一个位掩码，您可以指定以下任何或所有值 OR'd 一起：

```
 enum {
   UIDataDetectorTypePhoneNumber   = 1 << 0,
   UIDataDetectorTypeLink          = 1 << 1,
   UIDataDetectorTypeAddress       = 1 << 2,
   UIDataDetectorTypeCalendarEvent = 1 << 3,
   UIDataDetectorTypeNone          = 0,
   UIDataDetectorTypeAll           = NSUIntegerMax
}; 
```

例如，要将电子邮件地址和电话号码转换为可点击的链接，您可以使用：

```
myWebView.dataDetectorTypes = 
    UIDataDetectorTypePhoneNumber | UIDataDetectorTypeAddress; 
```

# eclipse - 使用 Maven 的 .m2/settings.xml 在 Eclipse m2e 中引发警告

> ID：15688712
> 
> 赞同：1
> 
> 时间：2013-03-28T17:47:26.127
> 
> 标签：eclipse, m2eclipse, eclipse-juno, m2e

我正在使用 Maven 的 settings.xml 来覆盖 log4j.properties 文件的属性值以用于开发目的。但是，在我进行此更改后，我现在在 Eclipse m2e 中收到警告，即使这是一个正常的用例：

> 访问项目基目录之外的“/Users/junger/.m2”目录。(org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)

如何删除此警告？或者，是否有跟踪此问题的错误？我找不到一个。

在我的 pom.xml 中，我有 -

```
<properties>
    <log4j.properties.directory>src/main/java</log4j.properties.directory>
</properties> 
```

在我的 settings.xml 中，我有 -

```
<profiles>
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <log4j.properties.directory>/Users/junger/.m2/</log4j.properties.directory>
        </properties>
    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:59:38.733

查看 m2e 的[代码](http://git.eclipse.org/c/m2e/m2e-core.git/tree/org.eclipse.m2e.core/src/org/eclipse/m2e/core/internal/builder/EclipseBuildContext.java)（`newScanner()`方法），当您的项目引用其基目录之外的文件时，这似乎是一个明确的警告。

对我来说，这个警告是有道理的。当您在项目的 basedir 之外引用资源时，您的构建可能不再可重现。您的项目应该是自包含的，而不依赖于外部文件。

# jquery - jQuery 插件最初只工作

> ID：15688714
> 
> 赞同：0
> 
> 时间：2013-03-28T17:47:28.520
> 
> 标签：jquery, jquery-ui

我在我的页面上使用 jQuery 日历和输入掩码插件，它们工作正常。我有一个添加按钮，它添加一行带有文本框，但插件不适用于新添加的行。我怎样才能解决这个问题？如果在添加按钮单击事件中再次调用插件代码，它们似乎可以工作，但我想知道是否有更好的方法让它工作。谢谢。

```
$(".add-row").on("click", function () {
    // Add row   
    // Call AGAIN to make it work
    $(".time").mask("99:99");
    $(".date").datepicker();
});

$(".time").mask("99:99");

$(".date").datepicker(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:53:28.770

您需要将 on() 绑定到页面上存在的元素，以便从该元素触发单击事件侦听器。

尝试这样的事情：

```
$(".some-other-element").on("click", ".add-row", function(event){
    // Add row   
    // Call AGAIN to make it work
    $(".time").mask("99:99");
    $(".date").datepicker();
}); 
```

将“some-other-element”更改为 init 页面上存在的元素。

这是一个例子：http: [//jsfiddle.net/TheFiddler/bv27J/](http://jsfiddle.net/TheFiddler/bv27J/)

看看“委托事件”的 API：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

```
Event handlers are bound only to the currently selected elements; they must exist on the page at the time your code makes the call to .on(). 

To ensure the elements are present and can be selected, perform event binding inside a document ready handler for elements that are in the HTML markup on the page. 

If new HTML is being injected into the page, select the elements and attach event handlers after the new HTML is placed into the page. Or, use delegated events to attach an event handler, as described next.

Delegated events have the advantage that they can process events from descendant elements that are added to the document at a later time. By picking an element that is guaranteed to be present at the time the delegated event handler is attached, you can use delegated events to avoid the need to frequently attach and remove event handlers. This element could be the container element of a view in a Model-View-Controller design, for example, or document if the event handler wants to monitor all bubbling events in the document. The document element is available in the head of the document before loading any other HTML, so it is safe to attach events there without waiting for the document to be ready. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T17:49:12.323

您必须再次调用它们，但仅限于您正在创建的元素。就像是：

```
$(".add-row").on("click", function () { 
    var scheduleDate = '<input type="text" name="txtScheduleDate" class="date" />'; 
    var row = $("<div><div class='div-table-col'>" + scheduleDate + "</div><div>").addClass("div-table-row"); 
    $(this).closest('h3').next('div').append(row); 

    row.find('input[name=txtScheduleDate]').datepicker();

    return false; 
}); 
```

演示：http: [//jsfiddle.net/Uat4R/](http://jsfiddle.net/Uat4R/)

# ms-access - Microsoft Access 2010 查询不产生任何结果

> ID：15688715
> 
> 赞同：0
> 
> 时间：2013-03-28T17:47:29.360
> 
> 标签：ms-access, zipcode

我正在尝试通过查询按邮政编码（这是我的字段之一）缩小数据集。我已经尝试对范围和包容性邮政编码使用标准语法。例子：

```
Range:
<=05301 AND 05363=> 

Inclusive:
<05301, 05302, 05303, 05304, 05360, 05361, 05362, OR 05363> 
```

尽管这些邮政编码中的每一个都存在于我的数据集中，但这些（我在教学网站上找到的）中的每一个都没有产生任何结果。我该怎么做才能让我的地址列表按此邮政编码范围排序，并显示我的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:59:03.393

如果您的邮政编码以 0 开头，我猜它们不是数字类型，而是文本？如果是这样，请尝试以下条件：

[邮编] in ('05301','05302','05303','05304','05360','05361','05362','05363')

此外，如果它们是带有 Trim([Zip Code]) 的文本，请检查数据中的前导空格

# jquery - jQuery 重复 POST 请求？

> ID：15688717
> 
> 赞同：1
> 
> 时间：2013-03-28T17:47:38.547
> 
> 标签：jquery, ajax, forms, post

我制作了一个通过 jQuery 将数据发送到页面的网页。可以通过单击“新建”来复制表格。由于某种原因，提交功能会运行多次。如果我创建三个表单，然后在第一个表单上单击“提交”，它会为此创建三个条目。然后删除该表格。当我提交第二个表单时，它会生成两个条目，依此类推。

谁能告诉我以下代码有什么问题？

```
function listen() {
$(".addBook").on('click', function() {
    $(this).fadeOut("fast", function() {
        $(this).parent().find(".loadingImg").fadeIn();
    });
    var target = $(this).parent();
    var title = $(target).find(".bookTitle").val();
    var author = $(target).find(".bookAuthor").val();
    var genre = $(target).find(".bookGenre").val();
    var barcode = $(target).find(".bookBarcode").val();
    var img = encodeURIComponent($(target).find(".coverSelect").val());
    var data = 'barcode=' + barcode + '&title=' + title + '&author=' + author + '&genre=' + genre + '&img=' + img;
    $.post('addBook', data, function() { alert(title); });
    $(this).parent().parent().slideUp("med", function() {
        $(this).remove();
    });
});
}

//new form function
function newBook(barcode) {
var data = 'barcode=' + barcode;
$.post('bookInfo', data, function(data) {
    $('.accordion').append(data);  //php script returns html for form
    $('.accordion > dd').hide();
    $("#closeAccordion").show();
    listen();
});
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:18:02.897

相反，您正在绑定重复事件，只需使用事件委托，这样您甚至不需要调用`listen()`.

```
//function listen() {
$(document).on('click', '.addBook', function() {
    $(this).fadeOut("fast", function() {
        $(this).parent().find(".loadingImg").fadeIn();
    });
    var target = $(this).parent();
    var title = $(target).find(".bookTitle").val();
    var author = $(target).find(".bookAuthor").val();
    var genre = $(target).find(".bookGenre").val();
    var barcode = $(target).find(".bookBarcode").val();
    var img = encodeURIComponent($(target).find(".coverSelect").val());
    var data = 'barcode=' + barcode + '&title=' + title + '&author=' + author + '&genre=' + genre + '&img=' + img;
    $.post('addBook', data, function() { alert(title); });
    $(this).parent().parent().slideUp("med", function() {
        $(this).remove();
    });
});
//}

//new form function
function newBook(barcode) {
var data = 'barcode=' + barcode;
$.post('bookInfo', data, function(data) {
    $('.accordion').append(data);  //php script returns html for form
    $('.accordion > dd').hide();
    $("#closeAccordion").show();
    //listen();
});
} 
```

**注意：**
您应该替换`document`为选择要附加表单的任何元素的选择器，例如`.accordion`.

```
$('.accordion').on('click', '.addBook', function() {.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:56:02.983

可能在生成新表单时绑定按钮。
当你这样做时，你会将相同的事件绑定到一个已经附加了点击事件的按钮。
然后，当您单击时，所有事件都会运行。

使用`click`或`on('click', ...`来防止这种行为。

[**演示**](http://jsfiddle.net/PHvU5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:04:34.153

使用最旧的 jquery，您可以使用“live”和“on('click')”解决方案，但在此之前，您还需要使用 die 和 unbind 来“杀死”绑定。

在 1.9+ jquery 版本中，“live(...”语法替换为“on(...”语法。记住升级/更改的东西。

On(.. 语法用法：

```
 $("#myButton").on("click", function(){
    alert("you call me!");
}); 
```

关于旧的绑定方法，您可以在此处找到一些文档[。](http://api.jquery.com/bind/)

# xcode - 使用临时配置从 iTunes 同步 ipad 应用程序有困难

> ID：15688719
> 
> 赞同：0
> 
> 时间：2013-03-28T17:47:40.487
> 
> 标签：xcode, ipad, ios6

我编写了一个应用程序，并通过电子邮件将 .mobileprovision 和 .ipa 发送给我的测试人员多次，完全没有任何问题。然而，我最后一次这样做时，有人告诉我它不会同步。它可以很好地加载到 iTunes 中，但不会同步。同样的 iPad，都包含在配置文件中。

我正在使用 XCode 版本 4.6 (4H127)，并且 ipad 最近已更新到 6.1.3。谁能确认我是否应该能够以这种方式分发，或者我的 XCode 版本和 ipad 是否不再兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:03:30.657

重新发送 .mobileprovision 文件和 .ipa 并重新同步。我的一位测试人员也遇到了这个问题，他们不得不从 iTunes 中删除应用程序，重新添加 .mobileprovision 和 .ipa。这工作得很好。

# javascript - 如何使 $(this) 选择器关注当前元素？

> ID：15688725
> 
> 赞同：0
> 
> 时间：2013-03-28T17:48:04.260
> 
> 标签：javascript, navigation, focus, this, hotkeys

你如何让`$(this)`选择器专注于当前元素？在这个 jsfiddle 中，我已经将它安装在一个指定的元素中，所以你不能按 enter 来激活你“所在”的按钮。[http://jsfiddle.net/mathzarro/gd6Ep/1/](http://jsfiddle.net/mathzarro/gd6Ep/1/)

这是棘手的部分：`$("button:first").trigger('focus');`

附言。我已经说过我作为一种表情安装了！最初的编码员是伊恩，这是链接..谢谢@Ian！ [http://jsfiddle.net/Vtn5Y/](http://jsfiddle.net/Vtn5Y/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:14:44.783

HazMat 提到了真正的问题，你关注的是错误的元素（总是第一个按钮使用`$("button:first").trigger('focus');`.

`liSelected.trigger('focus');`在 keydown 处理程序结束时调用并删除其他调用`$("button:first").trigger('focus');`将解决问题。

你还有另一个问题

```
$("button:eq(1)").click(function () {
    // Why are you calling this? Remove this line
    $("button:eq(0)").trigger('click');     
    update($("span:last"));
}); 
```

[这是一个工作示例](http://jsfiddle.net/gd6Ep/5/)

此外，jsfiddle 很棒，但您也应该在此处发布与代码相关的代码。

[**改进建议**](http://jsfiddle.net/GQv26/4/)

您发布的代码存在[脆弱的查询](https://stackoverflow.com/questions/10743682/how-to-avoid-locking-my-html-structure-when-using-jquery-to-create-rich-client-e/10743766#10743766)，内部耦合，也就是说，更改 HTML 结构不是很灵活。我已经重新编写了您的代码，使其处于更好的状态。以下是主要功能

*   如果您按一下标签，则不会中断
*   适用于您需要的任意数量的按钮
*   第一个或最后一个 div 没有硬编码（智能环绕）
*   输出 div 没有硬编码，全部在一个地方处理，依赖于它是被点击的第 n 个按钮这一事实。
*   上/右前进，下/左后退
*   无需自己跟踪元素，这就是[document.activeElement](https://stackoverflow.com/questions/354718/detect-which-form-input-has-focus-using-javascript-or-jquery/4455401#4455401)的用途
*   每一段代码都是分开的
    *   将类添加到选定按钮（仅限 CSS）（因此不需要向按钮添加“选定”类。
    *   更新输出
    *   将焦点放在下一个按钮上

这是代码

```
var buttons =  $('button');
var spans = $('span');

// Update the span when button is clicked
buttons.click(function(e){
    var span = $(spans[Array.prototype.indexOf.call(buttons, document.activeElement)]);
    span.text(parseInt(span.text(), 10) + 1);
});

// Handle the navigation, set focus on the next element
$(window).keydown(function(e){
    var isLeft = e.which === 38 || e.which === 37, 
        isRight = e.which === 40 || e.which === 39;
    if(isLeft || isRight){
        var currentButtonIndex =  Array.prototype.indexOf.call(buttons, document.activeElement);
        var nextButtonIndex;
        if (currentButtonIndex === -1) {
            nextButtonIndex = 0;
        } else {
            var toAdd = isLeft ? -1 : 1;
            nextButtonIndex = (currentButtonIndex + toAdd + buttons.length) % buttons.length;
        }
        buttons[nextButtonIndex].focus();
    }
}); 
```

# spring - 等效于 \r、\n、\t 等的 Spring 表达式语言

> ID：15688730
> 
> 赞同：0
> 
> 时间：2013-03-28T17:48:35.120
> 
> 标签：spring, router, spring-integration, spring-el, html-escape-characters

我正在使用 Spring 集成。我得到一个字符串（有效负载），如下所示：

```
<Element>
<Sub-Element>5</Sub-Element>
</Element> 
```

我需要测试上面的字符串`<Element><Sub-Element>`是否以实际 开头`<Element>\r\n <Sub-Element>.`

```
<int:recipient-list-router id="customRouter" input-channel="routingChannel">
    <int:recipient channel="channel1" selector-expression="payload.startsWith('&lt;Element&gt;&lt;Sub-Element&gt;')"/>
    <int:recipient channel="channel2" selector-expression="!payload.startsWith('&lt;Element&gt;&lt;Sub-Element&gt;')"/>
</int:recipient-list-router> 
```

理想情况下，第一个路由器应该通过测试，但在这种情况下它失败了。谁能帮我找出 SpEL 等价于 \r \n 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:43:14.070

SpEL 没有转义符，但您可以使用正则表达式进行选择...

```
<recipient selector-expression="payload matches '&lt;Element&gt;\r\n&lt;Sub-Element&gt;.*'" channel="channel1"/>
<recipient selector-expression="!(payload matches '&lt;Element&gt;\r\n&lt;Sub-Element&gt;.*')" channel="channel2"/> 
```

如果你不熟悉正则表达式，`.*`最后的 可以匹配任何东西（因此这个正则表达式等同于startsWith()）。

编辑：

虽然这会起作用，但我觉得我应该指出，依赖 XML 文档中微不足道的空白中的特定值是脆弱的——如果客户端更改为使用，例如`\n`，或者甚至不使用空白，您的应用程序将会中断。您应该考虑使用类似的东西`<int-xml:xpath-router/>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:21:31.840

谢谢加里。所以工作列表收件人路由器看起来像

任何一个

```
<recipient selector-expression="payload matches '(?s)&lt;Element&gt;(\s*)&lt;Sub&gt;(.*)'" channel="channel1"/>
<recipient selector-expression="!(payload matches '(?s)&lt;Element&gt;(\s*)&lt;Sub&gt;(.*)')" channel="channel2"/> 
```

或者

```
<recipient selector-expression="payload matches '(?s)&lt;Element&gt;(.*)&lt;Sub&gt;(.*)'" channel="channel1"/>
    <recipient selector-expression="!(payload matches '(?s)&lt;Element&gt;(.*)&lt;Sub&gt;(.*)')" channel="channel2"/> 
```

可以保留捕获`()`，也可以不保留。两者都有效。

# python - 从位于 python 包中的文件导入特定类

> ID：15688731
> 
> 赞同：0
> 
> 时间：2013-03-28T17:48:37.017
> 
> 标签：python, package

我有一个 python 包`main`，`other_python_files`就像：

```
main/
    __init__.py
    lib.py
    other_python_files/
        __init__.py
        test.py 
```

让我们`lib.py`包含一个名为`MyClass`. 当我这样做`from main import lib.py`并`MyClass`在里面使用时，`test.py`我得到了`MyClass`未定义的错误。

我尝试`from main import MyClass`在目录中的 init 文件中执行操作，`main`但仍然遇到相同的错误。我应该怎么做才能从`lib.py`文件中导入特定的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:52:06.203

您要么必须从以下位置导入该类`lib`：

```
from main.lib import MyClass 
```

或使用`lib.MyClass`代替`MyClass`.

您还可以`MyClass`在 中的`__init__.py`文件中`main`导入，这样您就可以按照最初尝试的方式导入它：

```
__all__ = ['MyClass']

from lib import MyClass 
```

你可以在`__all__`这里阅读：[有人可以用 Python 解释 __all__ 吗？](https://stackoverflow.com/questions/44834/can-someone-explain-all-in-python)

# android - Vertical SeekBar 在线程上启动时行为异常

> ID：15688732
> 
> 赞同：2
> 
> 时间：2013-03-28T17:48:41.177
> 
> 标签：android, multithreading, seekbar

我正在使用一个简单的 Vertical SeekBar，如果我在 onCreate 函数上启动它，它就可以正常工作。但是，如果我在不同的线程上启动 SeekBar，则拇指位置不会按预期工作。

我用来启动 SeekBar 的代码：

```
public class MainActivity extends Activity {
AbsoluteLayout mainLayout;  
VerticalSeekBar seekBar;
Context context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     

    context=this;
    mainLayout=(AbsoluteLayout)findViewById(R.id.main_layout_id);           
    Thread thread1 =new Thread(runnable1);
    thread1.start();            
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
private Runnable runnable1 = new Runnable(){
    @Override
    public void run() {                 
        seekBar=new VerticalSeekBar(context);       
        loadMainScreen.sendEmptyMessage(0);         
    }
};

Handler loadMainScreen = new Handler() {
    @Override       
    public void handleMessage(Message msg) {              
        super.handleMessage(msg);
            AbsoluteLayout.LayoutParams parameters = new AbsoluteLayout.LayoutParams(40,200,150,30);
            mainLayout.addView(seekBar,parameters);             
        }   
};  
  } 
```

我认为问题不在 SeekBar 上，但无论如何我都会显示代码。

```
public class VerticalSeekBar extends SeekBar implements OnSeekBarChangeListener {  

public VerticalSeekBar(Context context) {
    super(context);
    this.setOnSeekBarChangeListener(this);
}

public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VerticalSeekBar(Context context, AttributeSet attrs) {
    super(context, attrs);
}

protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(h, w, oldh, oldw);
}

@Override
protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
}

protected void onDraw(Canvas c) {
    c.rotate(-90);
    c.translate(-getHeight(), 0);

    super.onDraw(c);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_MOVE:
    case MotionEvent.ACTION_UP:
        setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
        onSizeChanged(getWidth(), getHeight(), 0, 0);
        break;

    case MotionEvent.ACTION_CANCEL:
        break;
    }
    return true;
}   

@Override
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {
    // TODO Auto-generated method stub
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
}
 } 
```

我尝试将传递给变量上下文的上下文更改为 getApplicationContext() 和 getBaseContext() 但它不起作用。

如果我将初始化放在 runOnUiThread 上，它会崩溃，因为当我尝试添加到布局时 SeekBar 未初始化。如果我将初始化和 addView 都放在 runOnUiThread 上，它可以工作，但这不是我想要的。

我想知道我是否可以对 Context 做些什么来使其工作。欢迎任何不同的想法。

提前致谢

# linux - 如何删除文件夹的所有文本文件中包含单词的行？

> ID：15688733
> 
> 赞同：2
> 
> 时间：2013-03-28T17:48:44.920
> 
> 标签：linux, bash

所以，在 linux 中，我有一个包含很多大文本文件的文件夹。

我想删除这些文件中包含特定关键字的所有行。有没有简单的方法可以在所有文件中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:37:29.233

已经有很多类似的答案了。我想补充一点，如果你想匹配`this is a line containing a keyword`但不匹配`this is a line containing someoneelseskeyword`，那么你最好在单词周围加上括号：

```
sed -i '/\<keyword\>/d' *.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:55:08.033

我现在无法测试这个，但它应该让你开始

```
find /path/to/folder -type f -exec sed -i '/foo/d' {} ';' 
```

*   在目录中查找文件`/path/to/folder`
*   在这些文件中查找包含`foo`
*   从这些文件中删除这些行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:54:39.753

当然：

```
for x in files*
do
    grep -v your_pattern "$x" > x && mv x "$x"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:59:52.720

sed -i '/keyword/d' *.txt - 在你的目录中运行它。

sed-stream 编辑器，在这里使用它来删除单个文件中的行

-i 选项：在输入文件中进行永久更改

'/keywprd/' : 指定要在文件中搜索的模式或键

选项 d ：通知 sed 需要删除匹配的行。

*.txt ：简单地告诉 sed 使用目录中的所有文本文件作为
处理的输入，您可以像我一样指定一个单独的文件或 *.txt 之类的扩展名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T18:03:20.903

试试这个：

```
find your_path_filename |xargs sed -i '/key_word/d' 
```

# haskell - 尝试在 Haskell 中创建 16 元组时出现奇怪的错误

> ID：15688742
> 
> 赞同：2
> 
> 时间：2013-03-28T17:49:07.313
> 
> 标签：haskell, tuples

为什么我不能在 Haskell 中制作 16 元组，这个错误是什么意思？

```
GHCi, version 7.6.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16)

<interactive>:2:1:
    No instance for (Show
                       (t0,
                        t1,
                        t2,
                        t3,
                        t4,
                        t5,
                        t6,
                        t7,
                        t8,
                        t9,
                        t10,
                        t11,
                        t12,
                        t13,
                        t14,
                        t15))
      arising from a use of `print'
    Possible fix:
      add an instance declaration for
      (Show
         (t0,
          t1,
          t2,
          t3,
          t4,
          t5,
          t6,
          t7,
          t8,
          t9,
          t10,
          t11,
          t12,
          t13,
          t14,
          t15))
    In a stmt of an interactive GHCi command: print it

<interactive>:2:2:
    No instance for (Num t0) arising from the literal `1'
    The type variable `t0' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 1
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:4:
    No instance for (Num t1) arising from the literal `2'
    The type variable `t1' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 2
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:6:
    No instance for (Num t2) arising from the literal `3'
    The type variable `t2' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 3
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:8:
    No instance for (Num t3) arising from the literal `4'
    The type variable `t3' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 4
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:10:
    No instance for (Num t4) arising from the literal `5'
    The type variable `t4' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 5
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:12:
    No instance for (Num t5) arising from the literal `6'
    The type variable `t5' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 6
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:14:
    No instance for (Num t6) arising from the literal `7'
    The type variable `t6' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 7
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:16:
    No instance for (Num t7) arising from the literal `8'
    The type variable `t7' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 8
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:18:
    No instance for (Num t8) arising from the literal `9'
    The type variable `t8' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 9
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:20:
    No instance for (Num t9) arising from the literal `10'
    The type variable `t9' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 10
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:23:
    No instance for (Num t10) arising from the literal `11'
    The type variable `t10' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 11
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:26:
    No instance for (Num t11) arising from the literal `12'
    The type variable `t11' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 12
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:29:
    No instance for (Num t12) arising from the literal `13'
    The type variable `t12' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 13
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:32:
    No instance for (Num t13) arising from the literal `14'
    The type variable `t13' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 14
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:35:
    No instance for (Num t14) arising from the literal `15'
    The type variable `t14' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 15
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)

<interactive>:2:38:
    No instance for (Num t15) arising from the literal `16'
    The type variable `t15' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Num Double -- Defined in `GHC.Float'
      instance Num Float -- Defined in `GHC.Float'
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus three others
    In the expression: 16
    In the expression:
      (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
    In an equation for `it':
        it = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)
Prelude> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T17:54:01.813

基本库仅包含最大为 15 的元组的显示实例。一般来说，使用非常大的元组不是一个好主意。

# python - python：创建原始变量字符串

> ID：15688744
> 
> 赞同：0
> 
> 时间：2013-03-28T17:49:10.467
> 
> 标签：python

我必须阅读我在其中寻找模式的行

```
width:40
height :50
left : 60
right: 70 
```

以下找到了所需的模式

```
line = "width:40"
match = re.search(r'width\s*:\s*\d+', line) 
```

在上面的代码中，我已经硬编码了正则表达式模式`width`

我已将所有四个变量存储在数组中`key_word = ['width', 'height', 'left', 'right']`

我想搜索所有这些变量的模式，比如

```
for key in key_word:
        match = re.search(key, line) 
```

问题是我怎样才能使它成为`key`一个原始字符串，这将是一个模式

```
r'width\s*:\s*\d+'
r'height\s*:\s*\d+'
r'left\s*:\s*\d+'
r'right\s*:\s*\d+' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:54:28.620

我会做类似以下的事情：

```
key_word = ['width', 'height', 'left', 'right']
regex_template = r'{}\s*:\s*\d+'
for key in key_word:
    print re.search(regex_template.format(key), line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:55:44.897

您也可以只使用通用正则表达式：

```
matches = re.findall(r'(.*?)\s*:\s*(\d+)', text) 
```

`matches`将是一个`(key, value)`元组列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:51:36.907

为什么不使用`split`（或`partition`）和`strip`？

```
for line in lines:
    key, sep, value = line.partition(':')
    key = key.strip()
    value = value.strip() 
```

如果你真的需要使用正则表达式，你也可以格式化它们：

```
r'%s\s*:\s*\d+' % 'width' 
```

或者对于每个键：

```
regexes = [r'%s\s*:\s*\d+' % key for key in ['width', 'height', ...]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:00:51.847

此任务不需要正则表达式。查看其他答案。

但是，如果您坚持，您可以使用以下方法动态创建一个[`re.escape`](http://docs.python.org/2/library/re.html#re.escape)：

```
import re

key_word = ['width', 'height', 'left', 'right']

myre = r'({})\s*:\s*(\d+)'.format('|'.join(map(re.escape, key_word))) 
```

# prolog - Prolog的算子在练习中的解读

> ID：15688748
> 
> 赞同：3
> 
> 时间：2013-03-28T17:49:40.153
> 
> 标签：prolog

我在 Prolog 中有以下关于自然语言的练习：

> 实现以下两个运算符**has**和**of**以这样的方式使用短语： **peter has car of john**回答以下问题：**Who has What of X**

现在，我知道在英语中这听起来很糟糕，因为在英语中我们通常说：“peter has john's car”，但我是意大利人，我试图将意大利语的请求翻译成英语。我希望这个概念是清楚的。

所以我找到了以下 Prolog 解决方案，保存在一个文件中：

```
:-op(200,xfx,has).
:-op(100,xfx,of).

peter has car of john. 
```

之后我在 Prolog shell 中查阅这个文件，我可以执行以下操作：

> **?- 彼得有约翰的车。**
> 
> **真的。**

或者：

> **?- X 有 Z 的 Y。**
> 
> **X = 彼得,**
> 
> **Y = 汽车，**
> 
> **Z = 约翰。**

**太好了，它工作，但我不太清楚它是如何工作的，我对操作员优先级**有一些疑问：

**有**运营商有 200 作为**优先级**值。 **of运算符的****优先级**值为100 。

参考这句话：**peter has car of john**所以这意味着Prolog首先评估这部分句子：**car of john**（因为运算符的优先级较低，尊重has运算符），如果是真的，那么它会评估：**pater has （先前评估的结果）。**

几句话，我可以这样解读原文：

**彼得有（约翰的车）**

这是正确的吗？

另一个问题与运营商的类型有关。

在我的解决方案中，我对两个运算符都使用**xfx**类型，因为在这种句子中，我没有与多个运算符具有相同优先级的潜在歧义相关的问题（例如：**a - b - c**其中运算符 - 必须具有形式**yfx** )

我的问题是：**我可以在我的 has 和 of 运算符上以某种方式使用 xfy 和\或 yfx 混合获得相同的结果吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:31:41.610

> 这是正确的吗？是的。

`xfx`意味着运算符“支配”其分支，而`xfy`或`yfx`代表“列表构造”，在某种意义上允许链接*相同*优先级的表达式。

使用您的短语，您正在使用正确的操作声明，但如果您认为有必要，您可以使用其他关联说明符。

我看到 xfy 的可能用法`of`，例如“彼得有玛丽约翰的车”。后

```
:- op(100, xfy, of).
:- op(200, xfx, has). 
```

我明白了

```
?- write_canonical(peter has car of john of mary).
has(peter,of(car,of(john,mary)))
true. 
```

# android - 将数组从 Activity 传递到 View Android

> ID：15688751
> 
> 赞同：2
> 
> 时间：2013-03-28T17:49:46.610
> 
> 标签：android, view, android-activity

我正在为android编写一个应用程序。如何将一个 int 数组从我的活动传递给我的视图类？我已经搜索但没有找到任何似乎可以回答我的问题的东西。我有这堂课：

> 公共类 ConvertToGrid 扩展 Activity{...}

它从主活动的布局中获取用户的输入（使用意图）并将其转换为一个 int 数组：`int[] binary = {...}`它有 64 个值。我如何把它变成这样：

> 公共类 DrawGrid 扩展 View{...}

我天真地尝试了一个意图，但除非我做错了，否则为了一个视图而做的事情似乎是错误的！另外，顺便说一句，我认为我不需要像我做我的活动一样在清单中声明我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:32.987

试试这个

```
public class ConvertToGrid extends Activity{.

Public int[] binary = {...}

public class DrawGrid extends View{...}

..} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:55:32.643

```
public class DrawGrid extends View{
int[] binary;

public void setBinaryData(int[] binary)
{
  this.binary = binary
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:58:20.120

创建一个具有常用参数和 int 数组的构造函数，例如：

```
public class DrawGrid extends View {

    private int[] intArray;

    public DrawGrid(Context context,int[] intArray) {
        super(context);
        // TODO Auto-generated constructor stub
            this.intArray = intArray;
    }

    public DrawGrid(Context context, AttributeSet attrs, int defStyle,int[] intArray) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
            this.intArray = intArray;
    }

    public DrawGrid(Context context, AttributeSet attrs,int[] intArray) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
            this.intArray = intArray;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:00:13.447

只需创建一个具有参数 int[] 的构造函数

```
public DrawGrid(int[] binaries)
{
    // constructor
} 
```

# r - 一篇科学论文的 R“统计”引用

> ID：15688758
> 
> 赞同：42
> 
> 时间：2013-03-28T17:50:05.860
> 
> 标签：r, package, stat, citations

我使用 R 包“stats”（版本 2.15.3）分析了我的数据。一位审阅者问我这个包的正确引用，而不仅仅是常见的

*R 核心团队 (2012)。R：统计计算的语言和环境。R 统计计算基金会，奥地利维也纳。ISBN 3-900051-07-0，网址[http://www.R-project.org/](http://www.R-project.org/)*

有人知道我在哪里可以找到有效的引文插入我的论文吗？谢谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-28T17:52:29.880

审稿人错了：

```
 citation("stats")

The ‘stats’ package is part of R.  To cite R in publications use:

  R Core Team (2013). R: A language and environment for statistical computing. R
  Foundation for Statistical Computing, Vienna, Austria. ISBN 3-900051-07-0, URL
  http://www.R-project.org/.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {R: A Language and Environment for Statistical Computing},
    author = {{R Core Team}},
    organization = {R Foundation for Statistical Computing},
    address = {Vienna, Austria},
    year = {2013},
    note = {{ISBN} 3-900051-07-0},
    url = {http://www.R-project.org/},
  }

We have invested a lot of time and effort in creating R, please cite it when
using it for data analysis. See also ‘citation("pkgname")’ for citing R
packages. 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-05-10T09:06:19.963

正如[hrbrmstr 所](https://stackoverflow.com/users/1457051/hrbrmstr "hrbrmstr")指出的，创建仅*加载*包的引用列表的函数会派上用场。由于他只向我们展示了一个示例而不是函数，因此我自己编写了一个，我经常在科学分析和论文中使用它（有时与 R Markdown 结合使用）。

```
citations <- function(includeURL = TRUE, includeRStudio = TRUE) {
    if(includeRStudio == TRUE) {
        ref.rstudio <- RStudio.Version()$citation
        if(includeURL == FALSE) {
            ref.rstudio$url <- NULL;
        }
        print(ref.rstudio, style = 'text')
        cat('\n')
    }

    cit.list <- c('base', names(sessionInfo()$otherPkgs))
    for(i in 1:length(cit.list)) {
        ref <- citation(cit.list[i])
        if(includeURL == FALSE) {
            ref$url <- NULL;
        }
        print(ref, style = 'text')
        cat('\n')
    }
} 
```

**因此，例如，在运行之后**

```
library(readr)
library(dplyr)
library(ggplot2)
library(knitr) 
```

**该功能** `citations()` **将打印：**

RStudio 团队 (2016)。*RStudio：R 的集成开发环境*。RStudio, Inc.，马萨诸塞州波士顿。 [http://www.rstudio.com](http://www.rstudio.com)。

R 核心团队（2017 年）。*R：统计计算的语言和环境*。R 统计计算基金会，奥地利维也纳。[https://www.R-project.org](https://www.R-project.org)。

谢毅（2016）。*knitr：R 中用于动态报告生成的通用包*。R 包版本 1.15.1，http: [//yihui.name/knitr](http://yihui.name/knitr)。

谢毅（2015）。*带有 R 和 knitr 的动态文档*，第 2 版。佛罗里达州博卡拉顿的查普曼和霍尔/CRC。ISBN 978-1498716963，http: [//yihui.name/knitr](http://yihui.name/knitr)。

谢毅（2014）。“knitr：R 中可重复研究的综合工具。” 在 Stodden V、Leisch F 和 Peng RD (eds.)，*实施可重复计算研究*。查普曼和霍尔/CRC。ISBN 978-1466561595， [http:](http://www.crcpress.com/product/isbn/9781466561595) //www.crcpress.com/product/isbn/9781466561595 。

威克姆 H (2009)。*ggplot2：用于数据分析的优雅图形*。施普林格出版社纽约。ISBN 978-0-387-98140-6，[http](http://ggplot2.org) ://ggplot2.org 。

威克姆 H 和弗朗索瓦 R (2016)。*dplyr：数据操作语法*。R 包版本 0.5.0，[https:](https://CRAN.R-project.org/package=dplyr) //CRAN.R-project.org/package=dplyr 。

威克姆 H、海丝特 J 和弗朗索瓦 R（2016 年）。*readr：读取表格数据*。R 包版本 1.0.0，[https://CRAN.R-project.org/package=readr](https://CRAN.R-project.org/package=readr)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-07T20:44:09.253

在我们最近的[一本书](http://bit.ly/ddsec)中，我和我的合著者做了 R 引用（在 frontmatter 中），但也让出版商让我们也给每个包的信用：

![在此处输入图像描述](../Images/754bd642a0a314e61dcaeb7a692e7a54.png)

我们认为重要的是要确保那些从事这项工作的人一直得到赞誉。

（我只做了一个评论，但不能轻易地以这种方式嵌入 pix 并且 rly 不想在某处托管 img。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-17T02:52:10.293

现在有一个`grateful`可以派上用场的包：

> 感恩的目标是让引用任何报告或出版物中使用的 R 包变得非常容易。通过调用单个函数，它将扫描项目中使用的 R 包，并以所需的输出格式（Word、PDF、HTML、Markdown）生成带有引用的文档。重要的是，这些参考文献可以针对特定期刊进行格式化，以便我们可以将它们直接粘贴到我们的手稿或报告的参考书目列表中。

[https://github.com/Pakillo/grateful](https://github.com/Pakillo/grateful)

如果`stats`加载了包，可以通过运行获取引用：

```
library(grateful)
cite_packages() 
```

—假设`grateful`已经通过运行安装：

```
library(devtools)
install_github("Pakillo/grateful") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T23:50:36.017

我喜欢[MS Berends](https://stackoverflow.com/a/43888025/222515)的解决方案，但想要一个带有类似[这个答案](https://academia.stackexchange.com/a/163351/110890)的版本号的表格。我还想摆脱由产生的降价，`format(citation(pkg), style = 'text')`这样我就可以轻松地复制粘贴到 MS Word 中。

```
require(pacman)
require(gt)
require(stringr)
require(dplyr)
get_package_citation_table <- function(){
  appendix_packages <- data.frame(Package = character(),
                                  Version = character(),
                                  Maintainer = character(),
                                  Citation = character())

  for (pkg in p_loaded()){
    appendix_packages <- appendix_packages %>% add_row(
      Package = pkg,
      Version = as.character(packageVersion(pkg)),
      Maintainer = maintainer(pkg),
      Citation = format(citation(pkg), style = 'text')
    )
  }
  appendix_packages <- appendix_packages %>% 
    add_row(
      Package = "RStudio",
      Version = as.character(RStudio.Version()$version),
      Maintainer = "",
      Citation = format(RStudio.Version()$citation, style = "text") 
    ) %>%
    add_row(
      Package = "R",
      Version = paste(version$major,version$minor, sep="."),
      Maintainer = "",
      Citation = format(citation(), style = "text")
    )

  appendix_packages %>%
    mutate( Citation = Citation %>% # strip out the markdown
              str_replace_all("_","") %>%
              str_replace_all("[*]", "") %>%
              str_replace_all("<URL:", "") %>%
              str_replace_all(">","")) %>% 
    arrange(Package)

}

t<- get_package_citation_table() 
t %>% gt() 
```

# android - 用相机拍照然后裁剪

> ID：15688761
> 
> 赞同：2
> 
> 时间：2013-03-28T17:50:17.980
> 
> 标签：android, android-intent, android-camera

我希望能够用相机拍照。我这样做并且有效：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
 intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
 startActivityForResult(intent, CAMERA_REQUEST); 
```

成功后，我希望用户能够立即查看图像并能够裁剪。

我可以这样做：

```
 Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.setDataAndType(Uri.fromFile(new File(file.toString())), "image/*");
        cropIntent.putExtra("crop", "true");
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        cropIntent.putExtra("return-data", true);
        startActivityForResult(cropIntent, CAMERA_REQUEST); 
```

如何合并这两个任务，使它们一个接一个地发生？我必须有两个`startActivityForResult`吗？应该合并吗？或者裁剪 ginfo 应该在正常范围内吗？

```
 getActivity();
    if (requestCode == CAMERA_REQUEST && resultCode == Activity.RESULT_OK) {

                    // Cropping code here? another intent?

        iPP.setImageBitmap(BitmapFactory.decodeFile(file.toString()));
        imagePath = file.toString();
        scaleImage();
        new UploadImage().execute();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:02:56.670

创建一个名为 CAMERA_CROP 的新常量。

拍照后开始活动时，发送 CAMERA_CROP 请求代码。

```
if (requestCode == CAMERA_REQUEST && resultCode == Activity.RESULT_OK) {
    ...
    startActivityForResult(cropIntent, CAMERA_CROP);
} 
```

当您从 Crop Activity 返回时，处理请求代码。

```
if (requestCode == CAMERA_CROP && resultCode == Activity.RESULT_OK) {
...
} 
```

# matlab - 如何使用matlab对图像应用傅里叶变换

> ID：15688762
> 
> 赞同：1
> 
> 时间：2013-03-28T17:50:23.863
> 
> 标签：matlab, image-processing

我有一个问题，当我运行我的程序时，它是如何在图像上应用傅里叶变换 (ftt) 的（或者如何增强图像使用傅里叶变换）

*   输入是指纹图像
*   输出是白色图像
*   问题是增强后的输出应该是指纹图像，使用傅里叶变换而不是白色图像

* * *

```
F=fft2( I );
factor=abs(F).^F;
block =ifft2(factor); 
R= fftshift(block); 
```

我希望能找到一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:25:38.090

F.^F 的幂似乎是一个很大的数字，所以它在上限值之上，matlab 将其切片为上限值。

```
% Calculating fft2
fft2im = fft2(double(im));
% Taking the spectrum with log scaling
fft2im = log(1+(abs(fft2im)));
% Putting DC in the middle:
spectrum = fftshift(fft2im);
% finding maximum in spectrum:
maximum = max(max(spectrum));
% scaling maximum to 255 and minimum to 0:
spectrum = 255*spectrum/maximum;
% Casting to uint8 to be able to display:
spectrum =  uint8(spectrum);
imshow(spectrum); 
```

# ios - Unity3d - 使用 fmod 找到的 ios 重复方法

> ID：15688763
> 
> 赞同：5
> 
> 时间：2013-03-28T17:50:25.653
> 
> 标签：ios, duplicates, unity3d, static-libraries, native

我正在为 Unity3D 使用 fmod 插件。编译到 Windows 和 OSX 很好，因为我可以动态加载 DLL/dylib。当我为 iOS 编译时，问题就来了。我用

```
[DllImport("__Internal")] 
```

因为 iOS 需要静态链接库。当我编译虽然我得到一个

```
SystemException: Duplicate native method found : FMOD_System_CreateSound. Please check your source carefully. 
```

我很确定我没有复制这个符号。我认为这可能是因为 Unity 自己导入 FMOD 并且两者可能会发生冲突……但如果是这种情况，我很惊讶 FMOD_System_CreateSound 是第一个被抓住的。有没有解决的办法？谢谢！

与往常一样，我很乐意提供任何其他详细信息！

这是一个会导致错误的示例项目： [Sample Unity Project with FMod](http://speedy.sh/V9WGw/FMOD-Unity-Demo.zip)

编辑：冲突是由于 iOS 不允许函数具有相同的名称，即使它们没有相同的签名。删除同名函数后（从而删除了一些我不需要的 FMOD 功能），我可以编译到 iOS，但正如预期的那样，我在初始化时仍然收到错误，因为 FMOD 已经被 Unity 初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:42:21.760

**Unity3d 已经捆绑了 FMOD 的有限版本**，这导致了您所看到的冲突。不幸的是，**目前似乎无法禁用**它，以便您可以使用完整版的 FMOD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:28:11.897

参考您的编辑并查看示例后，您确实不能拥有两个同名的方法，因为编译器将无法识别链接到哪个方法。

简单的解决方法是显然以不同的方式命名它们。

至于初始化，如果您可以访问Unity 3D已经创建的FMOD，那么您不必重新初始化它。

我假设指向该对象的指针足以删除重复的初始化。希望这很清楚。

# jqgrid - jqGrid 动态地从多组变为单组

> ID：15688766
> 
> 赞同：0
> 
> 时间：2013-03-28T17:50:33.703
> 
> 标签：jqgrid, grouping

我正在使用 jqGrid 并遇到了一个我无法确定的问题......

我有一个带有 2 级多分组的网格设置，我还有一个选择列表来动态更改分组。到目前为止，这一切都运行良好，我可以根据所选选项适当地更改分组。例如：

*   项目一
    *   文件 1
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
    *   文件 2
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
    *   文件 3
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
        *   第 1 场、第 2 场、第 3 场
*   项目 2
    *   文件 8
        *   第 1 场、第 2 场、第 3 场
    *   文件 9
        *   第 1 场、第 2 场、第 3 场

在此图中，项目编号是输出组，文件编号是内部组。在每个文件组下是该组中所有行的列表。

问题是我需要一个选项来仅删除内部分组并保持外部分组完整。我已经尝试了下面的代码，但它似乎没有做任何事情：

```
 if (val == "clear")
 {
    failingRulesGrid.jqGrid('setGridParam',
    {
        groupingView:
        {
            groupField: ['ename'],
            groupOrder: ['asc']
        }
    }).trigger('reloadGrid');
} 
```

这是动态更改多分组的代码，它运行良好：

```
if (val != "clear")
{
    failingRulesGrid.jqGrid('setGridParam',
    {
        groupingView:
        {
            groupField: ['ename', val],
            groupColumnShow: [false, false],
            groupOrder: ['asc', 'asc']
        }
    }).trigger('reloadGrid');
} 
```

有人对我如何删除内部组但保留输出组有任何想法吗？作为旁注，外部组将仅基于“ename”列，因此我无需担心更改外部组的构造方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:56:34.860

不知道为什么我以前没有想到这一点，但我有一个可行的解决方案。使用 'groupingGroupBy' 很容易解决这个问题：

```
if (val == "clear")
{
    gridSelector.jqGrid('groupingGroupBy', 'ename',
    {
    groupColumnShow: [false],
    groupCollapse: true
    });
} 
```

# windows-phone-8 - Windows 8 应用程序和 Windows Phone 应用程序提交

> ID：15688769
> 
> 赞同：2
> 
> 时间：2013-03-28T17:50:54.477
> 
> 标签：windows-phone-8

我对 Windows 8（仅在 Windows 8 操作系统上运行？）和 Windows Phone 应用这两个应用程序有点困惑。

根据我听到的有关 Windows 8 的营销，我假设 Windows 8 上可用的应用程序会自动在 Windows Phone 上可用？

我假设在四处搜索后情况并非如此，因为我看到了一个 windows 应用商店（我假设它只包括 windows 8 应用程序）和 windows phone。

假设我的假设是正确的，您是否需要同时购买 Windows 8 应用商店和 Windows Phone 商店的开发者许可证？

是像提交通过 windows phone 创建的 windows 8 应用程序一样简单，还是需要进行额外的配置或开发？假设您不关心分辨率或功能。

感谢您的任何澄清。

*附加问题，

运行 Windows RT 和/或非 RT 的 Windows 平板电脑在哪里落入这一切？他们是我假设的Windows应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T14:32:24.920

希望它可以帮助你。由于商店许可证是统一的（WP8 和 Windows 8），因此开发仍然不同[http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/11/06/unifying-developer-registration-windows-and -windows-phone.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/11/06/unifying-developer-registration-windows-and-windows-phone.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T19:22:26.430

不再需要 Windows 应用商店应用程序和电话的单独开发人员帐户。如果您有 App Store 帐户，您现在应该会看到您最多可以注册 3 部手机，而无需单独的注册过程。

如果您有一个开发者帐户 VS2013 和一个插入 USB 的 Windows 8 手机，一个简单的指导完成该过程的方法是创建一个新项目并选择一个 W8 手机示例。指定您要使用设备（而不是模拟器）进行调试。您将看到一个 Device is not registered for development 对话框，其中包含指向说明的链接。

正如其他帖子中提到的，事情已经过简化，因此 W8 和 W8 手机的 API 大多重叠，您可能可以使用相同的源，但需要构建单独的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T16:13:55.850

是的，你是对的，这两个平台都需要单独的开发人员帐户，一个用于 Windows 应用商店应用程序，一个用于 Windows Phone 应用程序。是的，这两个应用程序都不同，你必须分别开发这两个应用程序并将它们分别提交到各自的市场那么它会在各自的市场上提供吗？

# php - PHP查找两个日期时间之间的差异

> ID：15688775
> 
> 赞同：37
> 
> 时间：2013-03-28T17:51:15.390
> 
> 标签：php, datetime, date-math

我正在尝试获取两个日期时间之间的差异并将其作为`datetime`. 我找到了使用示例，`diff`但似乎无法正确使用。

```
$timein = date("Y-m-d H:i:s");
$timeout = date("Y-m-d 20:00:00");
$totaltime = $timein->diff($timeout); 
```

但是`$totaltime`记录`0000-00-00 00:00:00`到我的数据库。这是因为我没有格式化我的总时间变量吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-28T17:53:30.930

我不确定您在寻找什么格式的差异，但这里是使用 DateTime 的方法

```
$datetime1 = new DateTime();
$datetime2 = new DateTime('2011-01-03 17:13:00');
$interval = $datetime1->diff($datetime2);
$elapsed = $interval->format('%y years %m months %a days %h hours %i minutes %s seconds');
echo $elapsed; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T18:04:00.447

您可以简单地使用日期时间差异和格式来计算差异。

```
<?php
$datetime1 = new DateTime('2009-10-11 12:12:00');
$datetime2 = new DateTime('2009-10-13 10:12:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%Y-%m-%d %H:%i:%s');
?> 
```

有关 DATETIME 格式的更多信息，请参阅：[此处](http://www.php.net/manual/en/dateinterval.format.php)
您可以按照您想要的方式更改间隔格式。

[这](http://codepad.viper-7.com/seWes3)是工作示例

PS 这些功能（[diff()](http://php.net/manual/en/datetime.diff.php)和[format()](http://www.php.net/manual/en/dateinterval.format.php)）仅适用于 >=PHP 5.3.0

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-27T01:57:19.170

John Conde 在他的方法中执行了所有正确的程序，但不满足您问题的最后一步，即根据您的规范格式化结果。

此代码 ( [Demo](http://sandbox.onlinephpfunctions.com/code/a627eb50d9b174fa6a1917b67c97fbbd7a4814b9) ) 将显示原始差异，暴露尝试立即格式化原始差异的麻烦，显示我的准备步骤，并最终呈现正确格式化的结果：

```
$datetime1 = new DateTime('2017-04-26 18:13:06');
$datetime2 = new DateTime('2011-01-17 17:13:00');  // change the millenium to see output difference
$diff = $datetime1->diff($datetime2);

// this will get you very close, but it will not pad the digits to conform with your expected format
echo "Raw Difference: ",$diff->format('%y years %m months %d days %h hours %i minutes %s seconds'),"\n";

// Notice the impact when you change $datetime2's millenium from '1' to '2'
echo "Invalid format: ",$diff->format('%Y-%m-%d %H:%i:%s'),"\n";  // only H does it right

$details=array_intersect_key((array)$diff,array_flip(['y','m','d','h','i','s']));

echo '$detail array: ';
var_export($details);
echo "\n";

array_map(function($v,$k)
    use(&$r)
    {
        $r.=($k=='y'?str_pad($v,4,"0",STR_PAD_LEFT):str_pad($v,2,"0",STR_PAD_LEFT));
        if($k=='y' || $k=='m'){$r.="-";}
        elseif($k=='d'){$r.=" ";}
        elseif($k=='h' || $k=='i'){$r.=":";}
    },$details,array_keys($details)
);
echo "Valid format: ",$r; // now all components of datetime are properly padded 
```

输出：

```
Raw Difference: 6 years 3 months 9 days 1 hours 0 minutes 6 seconds
Invalid format: 06-3-9 01:0:6
$detail array: array (
  'y' => 6,
  'm' => 3,
  'd' => 9,
  'h' => 1,
  'i' => 0,
  's' => 6,
)
Valid format: 0006-03-09 01:00:06 
```

现在解释我的日期时间值准备：

`$details`获取[diff 对象](http://php.net/manual/en/datetime.diff.php)并将其转换为数组。 [array_flip(['y','m','d','h','i','s'])](http://php.net/manual/en/function.array-flip.php)创建一个键数组，用于从`(array)$diff`使用[array_intersect_key()](http://php.net/manual/en/function.array-intersect-key.php)中删除所有不相关的键。

然后使用[array_map()](http://php.net/manual/en/function.array-map.php)我的方法迭代每个值和键，用's`$details`将其左侧填充到适当的长度，并将（结果）字符串与必要的分隔符连接起来以符合请求的日期时间格式。`0``$r`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-14T13:08:02.557

对不起，我之前的回答是错误的。如果您尝试在`Y-m-d H:i:s`格式中获取时间和超时之间的总经过时间，请在使用对象时获取超时和时间之间的差异`DateTime`并将其格式化为`'%y-%m-%d %H:%i:%s'.`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-14T16:53:53.020

下面的代码将仅显示找到值的差异，即，如果 years = 0，则它不会显示年份。

```
 $diffs = [
    'years' => 'y',
    'months' => 'm',
    'days' => 'd',
    'hours' => 'h',
    'minutes' => 'i',
    'seconds' => 's'
];

$interval = $timeout->diff($timein);
$diffArr = [];
foreach ($diffs as $k => $v) {
    $d = $interval->format('%' . $v);
    if ($d > 0) {
        $diffArr[] = $d . ' ' . $k;
    }
}    
$diffStr = implode(', ', $diffArr);
echo 'Difference: ' . ($diffStr == '' ? '0' : $diffStr) . PHP_EOL; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-02-15T13:50:57.747

我收集了许多主题来制作具有许多输出（年、月、日、小时、分钟、秒）的通用函数，使用字符串或解析为 int 和方向 +- 如果您需要知道差异的方向是哪一边。

**使用示例：**

```
 $date1='2016-05-27 02:00:00';
    $format='Y-m-d H:i:s';

    echo timeDifference($date1, $format, '2017-08-30 00:01:59', $format); 
    #1 years 3 months 2 days 22 hours 1 minutes 59 seconds (string)

    echo timeDifference($date1, $format, '2017-08-30 00:01:59', $format,false, '%a days %h hours');
    #459 days 22 hours (string)

    echo timeDifference('2016-05-27 00:00:00', $format, '2017-08-30 00:01:59', $format,true, '%d days -> %H:%I:%S', true);
    #-3 days -> 00:01:59 (string)

    echo timeDifference($date1, $format, '2016-05-27 00:05:51', $format, false, 'seconds');
    #9 (string)

    echo timeDifference($date1, $format, '2016-05-27 07:00:00', $format, false, 'hours');
    #5 (string)

    echo timeDifference($date1, $format, '2016-05-27 07:00:00', $format, true, 'hours');
    #-5 (string)

    echo timeDifference($date1, $format, '2016-05-27 07:00:00', $format, true, 'hours',true);
    #-5 (int) 
```

**功能**

```
 function timeDifference($date1_pm_checked, $date1_format,$date2, $date2_format, $plus_minus=false, $return='all', $parseInt=false)
    {
        $strtotime1=strtotime($date1_pm_checked);
        $strtotime2=strtotime($date2);
        $date1 = new DateTime(date($date1_format, $strtotime1));
        $date2 = new DateTime(date($date2_format, $strtotime2));
        $interval=$date1->diff($date2);

        $plus_minus=(empty($plus_minus)) ? '' : ( ($strtotime1 > $strtotime2) ? '+' : '-'); # +/-/no_sign before value 

        switch($return)
        {
            case 'y';
            case 'year';
            case 'years';
                $elapsed = $interval->format($plus_minus.'%y');
                break;

            case 'm';
            case 'month';
            case 'months';
                $elapsed = $interval->format($plus_minus.'%m');
                break;

            case 'a';
            case 'day';
            case 'days';
                $elapsed = $interval->format($plus_minus.'%a');
                break;

            case 'd';
                $elapsed = $interval->format($plus_minus.'%d');
                break;

            case 'h';       
            case 'hour';        
            case 'hours';       
                $elapsed = $interval->format($plus_minus.'%h');
                break;

            case 'i';
            case 'minute';
            case 'minutes';
                $elapsed = $interval->format($plus_minus.'%i');
                break;

            case 's';
            case 'second';
            case 'seconds';
                $elapsed = $interval->format($plus_minus.'%s');
                break;

            case 'all':
                $parseInt=false;
                $elapsed = $plus_minus.$interval->format('%y years %m months %d days %h hours %i minutes %s seconds');
                break;

            default:
                $parseInt=false;
                $elapsed = $plus_minus.$interval->format($return);
        }

        if($parseInt)
            return (int) $elapsed;
        else
            return $elapsed;

    } 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-02-15T13:56:17.553

这是我的完整帖子主题： [PHP find difference between two datetimes](https://stackoverflow.com/questions/15688775/php-find-difference-between-two-datetimes/54710778#54710778)

**使用示例**

```
 echo timeDifference('2016-05-27 02:00:00', 'Y-m-d H:i:s', '2017-08-30 00:01:59', 'Y-m-d H:i:s', false, '%a days %h hours');
    #459 days 22 hours (string)

    echo timeDifference('2016-05-27 02:00:00', 'Y-m-d H:i:s', '2016-05-27 07:00:00', 'Y-m-d H:i:s', true, 'hours',true);
    #-5 (int) 
```

# asp.net - Kendo UI TabStrip - 通过它的文本选择一个标签

> ID：15688776
> 
> 赞同：6
> 
> 时间：2013-03-28T17:51:26.657
> 
> 标签：asp.net, asp.net-mvc, kendo-ui, kendo-asp.net-mvc

当我只知道标签的**文本**时，我试图在 javascript 中**选择一个**标签

 **我知道要获得 Selected Tab 我这样做：

```
var tabStrip = $("#tabMain").data("kendoTabStrip");
var tab = tabStrip.select(); 
```

如何使选定选项卡成为带有文本“MyTitle”的选项卡

注意：我使用 MVC 4 创建选项卡

```
 @(Html.Kendo().TabStrip()
          .Name("tabMain")
          .Items(items =>
              {
                  items.Add().Text("MyTitle") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T20:49:27.610

基本上，您需要找到 li.k-item 并将其传递给 select 方法。jQuery来了：

```
var ts = $('#tabstrip').data().kendoTabStrip;
var item = ts.tabGroup.find(':contains("What you look for")');
ts.select(item); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T05:19:11.577

```
$(document).ready(function(){
      $j("#tabstrip").kendoTabStrip( {
          animation:    {
              open: {
                  effects: "fadein"
              }
          },
    select: function(element){selecttab(element)}           
      });
function selecttab(element) {
        var tabStrip1 = $('#tabstrip').kendoTabStrip().data("kendoTabStrip");
        tabStrip1.select("li:contains(" + $(element.item).text()+ ")");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-20T13:53:11.290

我试过这个 - 只是普通的 jquery，现在似乎在 chrome 中工作......

var selectedTabName = $("li[aria-selected='true']").text();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:33:44.683

Kendo MVC 服务器包装器在 tabstrip 级别公开 .SelectedIndex(0) 方法，在单个选项卡级别公开 Selected() 方法：

tabstrip.Add().Text("我的标签") **.Selected(someValue = "我的标签")****

# powershell - Powershell 尝试在 If 语句中使用 -and 时出错

> ID：15688779
> 
> 赞同：2
> 
> 时间：2013-03-28T17:51:29.777
> 
> 标签：powershell, if-statement

我收到错误：

```
You must provide a value expression on the right-hand side of the '-and' operator.
At C:\shippinginterface\test.ps1:28 char:39
+     if (($TicketNumber.length -gt 0) -and <<<<  IsNumeric($TicketNumber) -and IsNotVoid($DateOut))
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : ExpectedValueExpression 
```

运行此测试脚本时。

```
function IsNumeric($value) {
   return ($($value.Trim()) -match "^[-]?[0-9.]+$")
}

function IsNotVoid($value) {
    $VoidPattern = [regex]"(?i)void"
    return !$VoidPattern.Match($value).Success
}

############################
# START TEST
############################

$TicketNumber = "12345"
$DateOut = "3/14/2013"

## Verify there is a numeric ticket number, and row is not void for any reason
if (($TicketNumber.length -gt 0) -and IsNumeric($TicketNumber) -and IsNotVoid($DateOut))
{
    write-host $intRow " " $TicketNumber    
} 
```

为什么它不喜欢我的使用`-and`？如果我删除 string.length 的第一个评估，则该语句按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:58:58.763

我不能确切地说为什么它不喜欢你的语法，但这会起作用：

```
if (($TicketNumber.length -gt 0) -and (IsNumeric $TicketNumber) -and (IsNotVoid $DateOut)) 
```

这迫使 PowerShell 使用括号之间的表达式的输出。

我还修复了函数调用。PowerShell 语法规定，调用函数时不带括号，并使用空格分隔参数。

# android - 如何保护通知栏？

> ID：15688780
> 
> 赞同：0
> 
> 时间：2013-03-28T17:51:32.690
> 
> 标签：android, statusbar, motionevent

我想根据状态栏检测动作。其实我想限制这部分的权利。我试过了

```
mGrid.setOnTouchListener(new OnTouchListener(){
               public boolean onTouch(View arg0, MotionEvent arg1){
                    int x = (int) arg1.getX();
                    int y = (int) arg1.getY();
                    Log.d("Screen", String.valueOf(x));
                    Log.d("Screen", String.valueOf(y));
                    switch(arg1.getAction()){
                    case MotionEvent.ACTION_OUTSIDE:
                        Log.d("tototootot", "acces dinied");
                    //case MotionEvent.

                    }

                    return true;
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:13:16.830

您无法真正检测到通知栏上的触摸和事件。

但是，您可以通过使用不允许触摸事件过滤的系统覆盖在通知栏上绘制来完全阻止所有触摸。[这个](https://stackoverflow.com/q/13346111/1069068)SO question 显示了如何绘制叠加层。确保在完成应用程序后将其删除，因为无论哪个应用程序在前台，它都会持续存在。

# java - Joda time：如何找到 2 个 LocalTime 对象之间的毫秒数？

> ID：15688788
> 
> 赞同：3
> 
> 时间：2013-03-28T17:51:43.357
> 
> 标签：java, jodatime

使用 Joda Time 如何找到 2 个 LocalTime 对象之间的毫秒数？

本地时间二 = 新本地时间（2,0）；

LocalTime 六 = 新 LocalTime(6,0)

那么凌晨 2 点到 6 点之间的毫秒数呢？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:53:56.840

```
System.out.println(six.getMillisOfDay() - two.getMillisOfDay()); 
```

# asp.net-mvc-routing - @Url.Action 获得 ?Length=2 附加

> ID：15688789
> 
> 赞同：7
> 
> 时间：2013-03-28T17:51:58.653
> 
> 标签：asp.net-mvc-routing

我在“使用条款”页面的几个翻译的顶部都有这个：

```
<li><a href="@Url.Action("Index", "Terms")">English</a></li>
<li><a href="@Url.Action("Index", "Terms", "de")">Deutsch</a></li>
<li><a href="@Url.Action("Index", "Terms", "fr")">Français</a></li>
<li><a href="@Url.Action("Index", "Terms", "it")">Italiano</a></li>
<li><a href="@Url.Action("Index", "Terms", "nl")">Nederlands</a></li>
<li><a href="@Url.Action("Index", "Terms", "hu")">Maygar</a></li>
<li><a href="@Url.Action("Index", "Terms", "es")">Español</a></li>
<li><a href="@Url.Action("Index", "Terms", "zh")">简体中文&lt;/a></li>
<li><a href="@Url.Action("Index", "Terms", "pt-pt")">European Português</a></li>
<li><a href="@Url.Action("Index", "Terms", "pt")">Português</a></li> 
```

这是应该处理点击的操作：

```
public class TermsController : Controller
{
    public ActionResult Index(string id)
    {
        switch (id)
        {
            case "de":
                return View("de");
            case "fr":
                return View("fr");
            case "it":
                return View("it");
            case "nl":
                return View("nl");
            case "hu":
                return View("hu");
            case "es":
                return View("es");
            case "zh":
                return View("zh");
            case "pt":
                return View("pt");
            case "pt-pt":
                return View("pt-pt");
            default:
                return View();
        }
    } 
```

这些是我的路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Terms",
        "{controller}/{id}",
        new { controller = "Terms", action = "Index" }
        );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = "" }
        );

    routes.MapRoute(
        "ThankYou",
        "{controller}/{action}/{email}/{id}"
        );
} 
```

从主（即英语）条款页面，第一个（即英语）链接看起来是正确的：

```
http://localhost:65391/Terms/ 
```

为什么其他（即外国）生成的 URL 看起来像这样？

```
http://localhost:65391/Terms/?Length=2 
```

另外，奇怪的是，如果我手动输入

```
http://localhost:65391/Terms/de 
```

例如，转到德语的条款页面，那么第一个超链接（即返回到英语条款​​页面）如下所示：

```
http://localhost:65391/Terms/de 
```

去这里查看实际站点：

[http://inrix.com/traffic/terms](http://inrix.com/traffic/terms)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-13T21:02:03.870

您正在使用将第三个参数视为**routeValues**对象的[重载。](http://msdn.microsoft.com/en-us/library/dd460348%28v=vs.108%29.aspx)`Url.Action`

 **来自 MSDN：

> routeValues
> 类型：System.Object
> 一个包含路由参数的对象。通过检查对象的属性通过反射检索参数。对象通常是使用对象初始值设定项语法创建的。

因此，您已将字符串`"de", "fr"`作为第三个参数传递，因此 MVC 获取了它的属性并制作了键值对：这`Length=2`就是即将到来的地方，因为`string`该类有一个属性`Length`，而您的字符串的值为 2。

您可以通过传递包装字符串的匿名对象轻松解决此问题：

```
<li><a href="@Url.Action("Index", "Terms" new { id = "" })">English</a></li>
<li><a href="@Url.Action("Index", "Terms", new { id = "de" })">Deutsch</a></li>
<li><a href="@Url.Action("Index", "Terms", new { id = "fr" })">Français</a></li>
... 
```

笔记：

*   您的匿名对象属性名称`id`应与您的路由段名称`id`和控制器参数名称匹配`id`
*   您需要`new { id = "" }`在默认情况下明确传递，否则 MVC 将使用已经给定的路由值。这是你在`http://localhost:65391/Terms/de`案例中看到的。所以英文链接变成了`http://localhost:65391/Terms/de`因为 MVC 已经`id`在 URL 中找到了该值`de`并自动重用它。
*   [最后注意正确的拼写是 Magyar 而不是 Maygar]**

# ios - 在 NSThread 或 NSOperation 中使用 NSUrlConnection

> ID：15688793
> 
> 赞同：0
> 
> 时间：2013-03-28T17:52:04.910
> 
> 标签：ios, nsurlconnection, nsthread, nsoperation, synchronous

我正在开发一个静态库，它需要在后台做一些事情，而不与主线程交互。为了给您一个想法，请考虑仅记录一些用户事件。库必须继续做这些事情，直到用户退出应用程序或将其发送到后台（按下主页按钮） - 换句话说，它需要在循环中继续做事情。

主应用程序线程和衍生线程之间的唯一交互是，有时主应用程序线程会将一些东西（事件对象）放入衍生线程可以读取/使用的队列中。除此之外，生成的线程只会继续运行，直到应用程序存在或背景。

生成的线程需要做的部分事情（尽管不是全部）涉及将数据发送到 HTTP 服务器。我原以为很容易继承 NSThread，重写它的 main 方法，然后在该连接上使用某种超时对 NSUrlConnection 进行同步调用，这样线程就不会永远挂起。例如，在 Java/Android 中，我们只是子类化 Thread，覆盖 start() 方法并调用同步 HTTP GET 方法（例如来自 Apache 的 HttpClient 类）。这很容易并且工作正常。但是从我在这里和其他地方看到的情况来看，显然在 iOS 上它比这要复杂得多，而且我对实际可行的最佳方法有点困惑。

那么我应该继承 NSThread 并以某种方式使用 NSUrlConnection 吗？似乎异步 NSUrlConnection 在 NSThread 中不起作用，因为没有调用委托方法，但是同步方法呢？我是否需要以某种方式使用和配置 RunLoop 并设置自动释放池？还是我应该使用 NSOperation？在我看来，我正在尝试做的事情很常见 - 有没有人有一个如何正确执行此操作的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:12:43.660

据我了解，要`NSURLConnection`异步使用，您需要一个运行循环。即使你使用 an`NSOperation`你仍然需要一个运行循环。

我见过的所有示例都使用具有运行循环的`Main Thread`to start `NSURLConnection`。使用的示例`NSOperation`已设置，因此操作`Concurrent`告诉`NSOperationQueue`不要提供它自己的线程，然后他们确保`NSURLConnection`在主线程上启动，例如通过调用`performSelectorOnMainThread:`

这是一个例子：

[Pulse Engineering 博客：使用 NSOperationQueues 进行并发下载](http://eng.pulse.me/concurrent-downloads-using-nsoperationqueues/)

`QRunLoopOperation`您还可以在示例中搜索 Apple 文档，`LinkedImageFetcher`这是一个示例类，显示了此类事物的一些来龙去脉。

*（虽然我不确定我是否真的看到了该示例显示如何运行您自己的 runloop 的任何代码，但此示例再次依赖于主线程。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:08:18.147

我使用了大中央调度（GCD）方法来实现这一点。这是一个在一个简单的测试应用程序中对我有用的示例（我不确定它是否适用于静态库，但可能值得一看）。我正在使用ARC。

在示例中，我从 viewDidLoad 方法开始了一些后台工作，但您可以从任何地方开始它。关键是“dispatch_async（dispatch_get_global_queue ...”在后台线程中运行该块。有关该方法的良好解释，请参阅此答案：[https ://stackoverflow.com/a/12693409/215821](https://stackoverflow.com/a/12693409/215821)

这是我的viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), 
        ^(void) {
            [self doStuffInBackground];
        });
} 
```

此时 doStuffInBackground 方法正在后台运行，因此您可以同步使用 NSURLConnection 。在我的示例中，该方法循环进行网络调用，直到可能有其他代码设置 backgroundStuffShouldRun = false。使用 10 秒超时进行网络调用。通话结束后，我正在更新 UI 标签以显示进度。请注意，UI 更新是使用“dispatch_async(dispatch_get_main_queue()...”执行的。这会根据需要在 UI 线程上运行 UI 更新。

此背景工作的一个潜在问题是：无法取消 http 请求本身。但是，如果有 10 秒的超时，那么在外部人员（可能是您的 UI 中的某些事件）设置 backgroundStuffShouldRun = false 之后，您将等待最多 10 秒的时间让线程自行中止。

```
- (void)doStuffInBackground
{
    while (backgroundStuffShouldRun) {
        // prepare for network call...
        NSURL* url = [[NSURL alloc] initWithString:@"http://maps.google.com/maps/geo"];

        // set a 10 second timeout on the request
        NSURLRequest* request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLCacheStorageAllowed timeoutInterval:10];

        NSError* error = nil;
        NSURLResponse *response = nil;

        // make the request
        NSData* data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        // were we asked to stop the background processing?
        if (!backgroundStuffShouldRun) {
            return;
        }

        // process response...

        NSString* status = @"Success";

        if (error) {
            if (error.code == NSURLErrorTimedOut) {
                // handle timeout...
                status = @"Timed out";
            }
            else {
                // handle other errors...
                status = @"Other error";
            }
        }
        else {
            // success, handle the response body
            NSString *dataAsString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
            NSLog(@"%@", dataAsString);
        }

        // update the UI with our status
        dispatch_async(dispatch_get_main_queue(), ^{
            [statusLabel setText:[NSString stringWithFormat:@"completed network call %d, status = %@", callCount, status]];
        });

        callCount++;
        sleep(1); // 1 second breather. not necessary, but good idea for testing
    }

} 
```

# c# - 将十进制 (2.75) 转换为时间 (2:45)

> ID：15688802
> 
> 赞同：22
> 
> 时间：2013-03-28T17:52:30.313
> 
> 标签：c#, .net

如果我有像 2.75 这样的双精度，.Net 中有没有办法将其格式化为“2:45”

例如，如果是 2.75555555555，则应将其四舍五入到最接近的分钟。我不介意自己编码，但我想知道 .Net 是否可以。我检查了 ToString 但没有找到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-28T17:57:30.827

使用 TimeSpan 及其 ToString 格式化程序：

```
TimeSpan timespan = TimeSpan.FromHours(2.75);
string output = timespan.ToString("h\\:mm"); 
```

例如

```
TimeSpan.FromHours(2.75555).ToString("h\\:mm") 
```

输出

2:45

# nginx - 如何使用 php-fpm 和 nginx 为特定 IP 地址设置内存限制和执行超时？

> ID：15688803
> 
> 赞同：2
> 
> 时间：2013-03-28T17:52:31.787
> 
> 标签：nginx, php

我需要为需要在我的数据库中导入产品和价格的第三方服务器设置不同的超时和执行时间。

现在，他们告诉我 php 脚本正在超时。这是由于我在 php.ini 上的配置。我希望能够为每个人保留该配置，因为我认为这是正确的配置。但我也需要他们能够执行脚本。

我想必须有一种方法可以在 nginx 或 php-fpm 配置上执行此操作。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:14:20.413

您需要为特定的第 3 方服务器创建一个新的 php-fpm 配置文件并覆盖 php.ini 设置，即

```
php_admin_value[max_execution_time] = 60
php_admin_value[memory_limit] = 128M 
```

然后在 nginx 中，使用 fastcgi 设置一个新的位置块，指向您的新 php-fpm 配置文件正在侦听的同一端口（或 unix 套接字）。

# php - PHP命名空间自动加载是否必须使用文件夹？

> ID：15688805
> 
> 赞同：5
> 
> 时间：2013-03-28T17:52:43.850
> 
> 标签：php, namespaces, alias, autoload

我对在 php 中实现命名空间感到很困惑，尤其是在涉及别名 - 导入类时。

我已按照本教程中的教程进行操作：

*   [将 PHP V5.3 命名空间用于可读和可维护的代码](http://www.ibm.com/developerworks/opensource/library/os-php-5.3namespaces/)（Don Denoncourt；2011 年 3 月 1 日；为 IBM Developerworks）

但是我不明白-什么时候`__autoload`使用，为什么我**必须**将别名类存储在文件夹中，但是当`__autoload`不使用时，命名空间中的别名就可以了，如下所示**，**

```
<?php
namespace barbarian;
class Conan {
    var $bodyBuild = "extremely muscular";
    var $birthDate = 'before history';
    var $skill = 'fighting';
}
namespace obrien;
class Conan {
    var $bodyBuild = "very skinny";
    var $birthDate = '1963';
    var $skill = 'comedy';
}
use \barbarian\Conan as mother;
$conan = new mother();
var_dump($conan);
var_dump($conan->bodyBuild);

$conan = new \obrien\Conan();
var_dump($conan);
var_dump($conan->birthDate);
?> 
```

虽然这我会得到错误，如果我不存储`Conan.php`在文件夹中`barbarian`

```
<?php
require_once "autoload.php"; 
use \barbarian\Conan as Cimmerian;
$conan = new Cimmerian();
var_dump($conan);
?> 
```

错误信息，

> 警告：需要（野蛮人/柯南.php）：打开流失败：第 12 行的 C:\wamp\www\test\2013\php\namepsace\autoload.php 中没有这样的文件或目录

自动加载.php：

```
<?php
function __autoload($classname) {
  $classname = ltrim($classname, '\\');
  $filename  = '';
  $namespace = '';
  if ($lastnspos = strripos($classname, '\\')) {
    $namespace = substr($classname, 0, $lastnspos);
    $classname = substr($classname, $lastnspos + 1);
    $filename  = str_replace('\\', '/', $namespace) . '/';
  }
  $filename .= str_replace('_', '/', $classname) . '.php';
  require $filename;
}
?> 
```

必须将别名类存储在文件夹中吗**？**是否可以在使用时导入类而不将它们存储在文件夹`autoload`中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T17:57:56.370

使用命名空间自动加载类意味着它必须遵循约定，通常该约定涉及使用文件夹（[与 PSR-0 相比](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)）。

如果您的类*有时*遵循该约定，那么自动加载器如何知道何时使用文件夹？

所以最终，**是**的类应该根据它们的命名空间存储在文件夹中。如果您认为文件夹结构没有意义，那么您应该更改名称空间和文件夹结构以反映您真正想要的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:08:25.417

如果您不想使用目录，则不必使用目录 - 当然，该示例确实如此，但您可以实现任何您希望的加载方式。您可以将所有类放在一个文件夹中，并在表单中使用下划线字符`Classes/Barbarian_Conan.php`。但是，这可能会变得非常混乱，如果您在类或命名空间名称中遇到下划线，您必须弄清楚该怎么做！

综上所述，以这种方式使用目录是个好主意。此外，为了实现与其他 PHP 软件的最大互操作性，遵循[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)是一个好主意。有关此标准组的更多详细信息，请[点击此处](http://www.php-fig.org/)。

正如我从网上发现的，而您从实验中发现的那样，类名和命名空间路径名都不能包含 PHP 保留字。

# .net - 在 log4net 中添加基于登录的自定义列

> ID：15688806
> 
> 赞同：0
> 
> 时间：2013-03-28T17:52:44.760
> 
> 标签：.net, log4net

我有一个用于 log4net 的 ADO.NET Appender，插入了大多数人记录的基本日志信息。我想为“IsCritical”添加一个列，一个指示日志是否为 ERROR 或更高的位/标志。我已经阅读了有关自定义列插入的信息，但在这种情况下，它只是对日志中已经存在的数据进行格式化。这是我目前的 ADONetAppende。我还希望有一列具有表示日志级别字符串的日志级别值（数值）。

```
<appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">
  <bufferSize value="1"/>
  <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=xxx"/>
  <connectionString value="Data Source=localhost\SQLEXPRESS;Initial Catalog=mydb;Integrated Security=True"/>
  <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES&#xD;&#xA;       (@log_date, @thread, @log_level, @logger, @message, @exception)"
                                                                   />
  <parameter>
    <parameterName value="@log_date"/>
    <dbType value="DateTime"/>
    <layout type="log4net.Layout.RawUtcTimeStampLayout"/>
  </parameter>
  <parameter>
    <parameterName value="@thread"/>
    <dbType value="String"/>
    <size value="32"/>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%t"/>
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@log_level"/>
    <dbType value="String"/>
    <size value="512"/>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%p"/>
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@logger"/>
    <dbType value="String"/>
    <size value="512"/>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%c"/>
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@message"/>
    <dbType value="String"/>
    <size value="4000"/>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%m"/>
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@exception"/>
    <dbType value="String"/>
    <size value="2000"/>
    <layout type="log4net.Layout.ExceptionLayout"/>
  </parameter>
  <parameter>
    <parameterName value="@exception"/>
    <dbType value="String"/>
    <size value="2000"/>
    <layout type="log4net.Layout.ExceptionLayout"/>
  </parameter>

</appender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:06:21.627

首先，我创建了一个自定义 AdoNetAppenderParameter：

```
public class IsCriticalAdoNetParameter : AdoNetAppenderParameter
{
    public override void FormatValue(IDbCommand command, LoggingEvent loggingEvent)
    {
        // Lookup the parameter
        IDbDataParameter param = (IDbDataParameter)command.Parameters[ParameterName];

        param.Value = loggingEvent.Level > Level.Warn;
    }
} 
```

接下来，我在 app.config 的 ADO Net Appender 中引用了它。请注意 Insert 语句和添加的`<paramemter>`标记中的更改。参数的 type 属性引用自定义附加程序的程序集/类名称。

```
 <appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">
      <bufferSize value="1"/>
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      <connectionString value="Data Source=localhost\SQLEXPRESS;Initial Catalog=my_db;Integrated Security=True"/>
      <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception],[IsCritical]) VALUES&#xD;&#xA;       (@log_date, @thread, @log_level, @logger, @message, @exception, @is_critical)"
                                                                       />
      <parameter>
        <parameterName value="@log_date"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawUtcTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="@thread"/>
        <dbType value="String"/>
        <size value="32"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%t"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@log_level"/>
        <dbType value="String"/>
        <size value="512"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%p"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@logger"/>
        <dbType value="String"/>
        <size value="512"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%c"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@message"/>
        <dbType value="String"/>
        <size value="4000"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%m"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@exception"/>
        <dbType value="String"/>
        <size value="2000"/>
        <layout type="log4net.Layout.ExceptionLayout"/>
      </parameter>
      <parameter type="MyApp.Logging.IsCriticalAdoNetParameter">
        <parameterName value="@is_critical"/>
        <dbType value="Boolean"/>
        <size value="10"/>
        <layout type="log4net.Layout.PatternLayout" value=""/>
      </parameter>
    </appender> 
```

你可以使用这个概念来创建你自己的 appender 参数。

# android - 从 Gimp 到 Android 资产的脚本？

> ID：15688809
> 
> 赞同：1
> 
> 时间：2013-03-28T17:52:52.820
> 
> 标签：android, eclipse, gimp

我正在寻找一种方法来缩短从 gimp 到纹理资产到 eclipse 的工作流程，同时更新对单个图像的 Java 引用。

理想情况下，我应该能够在 gimp 中编辑某些内容，运行脚本，然后能够作为 android 应用程序运行。

事实上，我没有在两个程序之间使用任何脚本，但是如果有一个现有的解决方案可以自动更新像素参考和导入纹理图集，它将大大加快工作流程。

在 Windows 8 中工作。

# bash - 安全地使用管道传输 FTP 文件

> ID：15688814
> 
> 赞同：3
> 
> 时间：2013-03-28T17:53:10.393
> 
> 标签：bash, ftp, sftp

我有一个文件转发系统，其中一堆文件被下载到一个目录，多路分解并复制到各个机器。当主服务器接收到文件时，它们会被转发。文件通常会以突发形式到达。（通过 ssh 密钥进行身份验证）

此脚本创建 sftp 会话，并使用管道监视 fifo 管道的头部。

```
HOST=$1
pipe=/tmp/pipes/${HOST%%.*}
ps aux | grep -v grep | grep  sftp | grep "user@$HOST" > /dev/null
if [[ $? == 0 ]]; then
    echo "FTP is Running on this Server"
    exit
else
    pid=`ps aux | grep -v grep | grep  tail  | tr -s ' ' | grep $pipe`
    [[ $? == 0 ]] && kill -KILL `echo $pid | cut -f2 -d' '`
fi
if [[ ! -p $pipe ]]; then
    mkfifo $pipe
fi
tail -n +1 -f $pipe | sftp -o 'ServerAliveInterval 60' user@$HOST > /dev/null &
echo cd /tmp/data >>$pipe #Sends Command to Host
echo "Started FTP to $HOST" 
```

更新：我最终将清理代码更改为使用“ps aux”来查看 ftp 会话是否正在运行，以及 tail -f 是否仍在运行。分别按 user@host 和管道名称进行 Grep。这是在调用脚本时完成的，每当我尝试上传文件时都会调用脚本。
IE：

```
FILENAME=`basename $1`
function transfer {
    echo cd /apps/data >> $2 # For Safety
    echo put $1 .$FILENAME >> $2
    echo rename .$FILENAME $FILENAME  >> $2
    echo chmod 0666 $FILENAME  >> $2
}
./ftp.sh host
[ -p  $pipedir/host ] && transfer $1 $pipedir/host 
```

在主服务器上接收到的文件被 Incron 捕获，它将一个 put 命令和可用文件的位置写入 fifo 管道，由 sftp 发送（也执行重命名）。

我的问题是，这安全吗？这会在 ftp 错误/事件上崩溃吗？不太担心登录错误。
目标是减少 ftp 登录次数。单个会话/分钟（或更多）间隔。
并允许在收到文件时转发它们。动态命令。如果可能的话，我更喜欢使用标准的 ubuntu 库。

编辑：在测试和解决一些问题后，服务器只需运行

```
[[ -p $pipe ]] && echo FTP is Running on this Server
ln -s $pipe $lock &> /dev/null || (echo FTP is Running on this Server && exit)
[[ ! -p $pipe ]] && mkfifo $pipe
( tail -n +1 -F $pipe & echo $! > $pipe.pid ) | tee >
        ( sed "/tail:/ q" >/dev/null && kill $(cat $pipe.pid) |& rm -f $pipe >/dev/null; )
        | sftp -i ~/.ssh/$HOST.rsa -oServerAliveInterval=60 user@$HOST &
rm -f $lock 
```

它相当简单，但效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T18:10:42.563

您可能有兴趣建立一个更简单（和强大）的同步基础架构：如果文件到达时未连接给定主机......它永远不会收到它（如果我正确理解您的代码）

我会做类似的事情

```
 rsync -a -e ssh user@host:/apps/data pathToLocalDataStore 
```

在客户端机器上定期或通过事件...rsync 智能地通过时间戳和大小同步文件（-a 包含 -t）

该事件将是一些进程终止，例如：客户端确实（在 ~/.ssh/config 中为主机配置私钥使用）：

```
#!/bin/bash
while :;do
  ssh user@host /srv/bin/sleepListener 600
  rsync -a -e ssh user@host:/apps/data pathToLocalDataStore
done 
```

服务器上 是 接收新文件后`/srv/bin/sleepListener`到服务器的符号链接：`/bin/sleep`

```
killall sleepListener 
```

注意：每 10 分钟执行一次全面检查……如果节点离线/在线，没关系……

# c# - “is”运算符如何处理动态对象？

> ID：15688815
> 
> 赞同：9
> 
> 时间：2013-03-28T17:53:12.430
> 
> 标签：c#, c#-4.0, dynamic, dynamic-language-runtime

运营商如何处理`is`DLR？

为了让我的问题更明确一点，请考虑以下签名：

```
 public bool Is<T>(Func<dynamic> getInstance)
 { 
     return getInstance() is T;
 } 
```

默认情况下，`Is<T>`返回需要什么条件`true`？此外，DLR 是否提供任何机制来自定义此行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:54:43.400

在运行时，`dynamic`被视为与 相同`object`，这意味着`getInstance`委托结果的运行时类型将用于执行此检查。使用`dynamic`这里唯一的区别是不会进行编译时检查，并且在运行时会使用动态绑定对`getInstance`.

> 默认情况下，Is返回true需要什么条件？

传入的委托将需要返回一个在运行时与`T`.

> 此外，DLR 是否提供任何机制来自定义此行为？

不，这将使用 C# 类型的标准规则。任何自定义行为都需要写入逻辑本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:03:31.620

由于`is`已经是运行时测试，因此没有额外的运行时绑定，实际上不会有任何编译后的 IL 差异

```
 public bool Is<T>(Func<object> getInstance)
 { 
     return getInstance() is T;
 } 
```

`Is<T>(Func<object> getInstance)`和的方法体的 IL `Is<T>(Func<dynamic> getInstance)`：

```
 .maxstack 2
    .locals init (
        [0] bool CS$1$0000)
    L_0000: nop 
    L_0001: ldarg.1 
    L_0002: callvirt instance !0 [mscorlib]System.Func`1<object>::Invoke()
    L_0007: isinst !!T
    L_000c: ldnull 
    L_000d: cgt.un 
    L_000f: stloc.0 
    L_0010: br.s L_0012
    L_0012: ldloc.0 
    L_0013: ret 
```

所以答案是`is`关键字不受 DLR 使用的影响，它的工作方式与使用 type 相同`object`。

# sql-server - XQuery 父子节点

> ID：15688819
> 
> 赞同：0
> 
> 时间：2013-03-28T17:53:18.530
> 
> 标签：sql-server, xml, tsql, xquery, sqlxml

例子：

```
DECLARE @XML XML = '
<Items>
    <document id="doc1" value="100">
        <details>
            <detail detailID="1" detailValue="20"/>
            <detail detailID="2" detailValue="80"/>
        </details>
    </document>
    <document id="doc2" value="0">
        <details>
        </details>
    </document>
</Items>
' 
```

我想要这样的结果：

```
id    value    detailID   detailValue
doc1  100      1          20
doc1  100      2          80
doc2  0        NULL       NULL 
```

试过：

```
SELECT document.value('../../@docID', 'VARCHAR(10)') AS 'docID',
       document.value('../../@value', 'INT') AS 'value',
       document.value('@detailID', 'VARCHAR(10)') AS 'detailID',
       document.value('@detailValue', 'INT') AS 'detailValue'
FROM   @XML.nodes('Items/document/details/detail') AS Documents(document) 
```

但是，doc2 没有列出......另外，尝试使用 CROSS JOIN 和 INNER JOIN，但性能非常糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:03:12.403

尝试这个：

```
SELECT document.value('@id', 'VARCHAR(10)') AS docID,
       document.value('@value', 'INT') AS value,
       Detail.value('@detailID', 'INT') as DetailId,
       Detail.value('@detailValue', 'INT') as DetailValue
FROM   @XML.nodes('Items/document') AS Documents(document)
       outer apply Documents.document.nodes('details/detail') as Details(Detail); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T08:46:42.027

只需添加一个细节：

```
@XML.nodes('//whatever_depth') AS Documents(document) 
```

使用 '//' 允许您不直接从 root 查询

问候，丹尼斯

# c - 我怎样才能找到可以适合给定正方形的最小正方形的数量

> ID：15688821
> 
> 赞同：5
> 
> 时间：2013-03-28T17:53:27.793
> 
> 标签：c, algorithm, math

假设我有一个 7x7 的正方形。我可以用其他正方形填充正方形（即尺寸为 1x1,2x2 .....6x6 的正方形）。我怎样才能用尽可能小的正方形填充正方形。请帮助我.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:21:10.580

考虑一个尺寸为 的正方形`s x s`。切出一个较小的正方形尺寸`m x m`将产生一个正方形`m x m`、一个正方形`n x n`和两个尺寸的矩形`m x n`，其中`m + n = s`。

当`s`是偶数时，正方形可以被划分为`m = n`，在这种情况下，矩形也将是正方形，结果为 4。

但是，当`s`为奇数时，必须选择 和 的值，以使生成的矩形可以用尽可能少的正方形填充`m`。`n`似乎没有一种立即显而易见的方法来找出最佳配置，所以我建议提出一种算法来找出可用于填充矩形大小的最小正方形数量`m x n`（这是一个稍微更简单的问题，*我相信*它可以用递归算法来解决）。所需的正方形总数将等于`2 x ([number of squares in m x n rectangle] + 1)`。您可以使用循环来检查 m 和 之间的所有`1`大小`s/2`。

希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:46:41.867

首先检查n是否为偶数。如果 n 是偶数，那么答案是 4，因为没有办法将 3 个正方形或 2 个正方形组合在一起形成另一个正方形，从而解决所有可能情况的一半

## 在您继续之前：这种方法是不完整的，这可能是错误的方法

我只是打算抛出一个开箱即用的想法，只是因为我觉得这可能会有所帮助，并希望能推进这个问题。我觉得这可能与[哥德巴赫的弱猜想](http://en.wikipedia.org/wiki/Goldbach%27s_weak_conjecture)有关。该算法可能太长而无法计算更大的值，而且我不确定正在发生多少优化。

现在我的想法是尝试枚举所有 AND都是素数的三元组（它们 >= 2）`(n1,n2,n3)`AND AND`n1 + n2 + n3 = n``n1, n2, n3``n >= 7``n1 <= n2 <= n3`

现在让我从字面上描述我的算法：

[![我的算法](../Images/60a68ec2860a2bdba2cb995783a1eae9.png)](https://i.stack.imgur.com/ph32J.png)

现在我的想法是找到所有可能的三元组`(n1,n2,n3)`，使其符合上述定义。下一组`n_s = n1 + n2`。IF`n_s > n3`遵循上面的描述，否则翻转`n_s`和`n3`

现在问题是剩下的白色矩形（应该彼此一致）。

让我们`n4 x n3`表示矩形，其中：

```
n4 = n - 2 * n3 \\if following the depicted example 
```

枚举所有可能的三元组`(n41, n42, n43)`（将 n 视为 n = n4，因此 n3 >= 7）和`(n31, n32, n33)`（将 n 视为 n = n3，因此 n3 >= 7）。接下来找到`n_s3 == n_s4`它们可能是最大的值。
例如：

让我们假设`x3 = 17`和`x4 = 13`

```
 Enumeration of x3 = 17:
  2 + 2 + 13
  3 + 3 + 11
  5 + 5 + 7

  Enumeration of x_s3:
  4 = 2 + 2
  6 = 3 + 3
  10 = 5 + 5
  12 = 5 + 7
  14 = 3 + 11
  15 = 2 + 13

  Enumeration of x4 = 13:
  2 + 2 + 7
  3 + 5 + 5

  Enumeration of x_s4:
  4 = 2 + 2
  8 = 3 + 5
  9 = 2 + 7
  10 = 5 + 5 
```

由于`10`是 13 和 17 之间共享的最大值，因此您在（两个矩形）中放置了一个 10 x 10 的正方形，现在您有一个非平行四边形，它变得越来越难以填充，但可能（我觉得）朝向正确的方向。

所有反馈表示赞赏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:55:06.237

考虑一个尺寸为 sx 的正方形。因式分解`s`为素数。然后解决每个素数的问题`sp`。答案与 for`sp x sp`相同`s x s`。最小的素数可能会给出最低的结果。我没有证据证明这一点，但我已经手动检查了 17 x 17。这是 Otaias 的偶数概念的概括，`s`导致答案为 4。

放置算法：

您需要从 n = (s+1)/2（向下舍入）循环到 n = s-1。

将 nxn 方块放在角落里。

设 m = s - n。将 mxm 方块放在相邻的角落并继续放置，直到它们（几乎）到达 nxn 方块的末端。

剩余的空间将是 mxm（如果你幸运的话），或者最多 2m-1 x 2m-1，缺少一个角块。

用类似的算法填充剩余空间。首先在缺少的角块对面的角落放置一个 n2 x n2 正方形。

手工工作我得到了以下结果：

```
s  minimum number of squares:
2   4
3   6
5   8
7   9
11  10
13  11
17  12 
```

# javascript - Google Apps 脚本连接电子表格中 2 列中的 2 个值 - 显示在列表框中

> ID：15688825
> 
> 赞同：2
> 
> 时间：2013-03-28T17:53:31.277
> 
> 标签：javascript, google-apps-script

寻找一点帮助我几乎就在那里，但我知道我只是错过了一件事，我一直在寻找答案。

我有一个电子表格，其中 1 列具有名字，第二列具有姓氏，我正在尝试加入它们并在列表框中以全名显示。现在它按字母水平填充值，第一列值，然后是第二列值。任何帮助，将不胜感激！

```
function studentBox(e) {
  var app = UiApp.getActiveApplication();

  var dateSelect = e.parameter.dateList;

  var ss = SpreadsheetApp.openById('spreadsheetID');
  var sheet = ss.getSheetByName(dateSelect);

  var studentList = app.createListBox().setName('studentList').setId('studentList');
  var cellList = sheet.getLastRow();
  var fName = sheet.getRange(1,1,cellList,1).getValues();
  var lName = sheet.getRange(1,2,cellList,1).getValues();
  var fullName = (fName+ " " +lName);

  //Add items to the list box
  for(var i=0; i<fullName.length; i++){
    studentList.addItem(fullName[i]);
  }

  app.getElementById('grid1').setWidget(1,1,studentList);

  return app;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T18:05:34.317

`fName`并且`lName`是值的矩阵。您不能像这样对它们进行求和/连接。这里的修复：

```
function studentBox(e) {
  var app = UiApp.getActiveApplication();
  var dateSelect = e.parameter.dateList;

  var ss = SpreadsheetApp.openById('spreadsheetID');
  var sheet = ss.getSheetByName(dateSelect);

  var studentList = app.createListBox().setName('studentList').setId('studentList');
  var cellList = sheet.getLastRow();
  var names = sheet.getRange(1,1,cellList,2).getValues(); //getting both first and last names at once

  //Add items to the list box
  for(var i=0; i<names.length; i++){
    studentList.addItem(names[i][0]+' '+names[i][1]);
  }

  app.getElementById('grid1').setWidget(1,1,studentList);
  return app;
} 
```

# ajax - jquery ajax 搜索表单

> ID：15688841
> 
> 赞同：0
> 
> 时间：2013-03-28T17:54:13.837
> 
> 标签：ajax, jquery

我有一个 REST Url `http://localhost/issues`，向我展示了一个用于查询错误跟踪系统问题的搜索表单。搜索表单有一个带有`name="f"`. 形式的作用是`action="/issues"`和`method=GET`。因此，如果我在文本字段中键入“foobar”，我将被重定向到`http://localhost/issues?f=foobar`.

为了防止页面重新加载，我将 AJAX 与 jquery 一起使用。所以我曾经`$(document).on('submit',...)`将一个AJAX查询函数绑定到表单的提交函数上。我使用萤火虫来证明，jquery 发送请求并且没有重新加载页面。我还具有将响应结果填充到浏览器中显示的站点的功能。第一次搜索尝试一切正常。

但是，如果我在文本字段中键入另一个搜索字符串“anotherfoobar”并重新发送请求，请求 URL 是`http://localhost/issues?f=foobar&f=anotherfoobar`，因此搜索参数仅附加到 URL，而不是更新，因为我认为它会发生。

我已经在 stackoverflow 上阅读了有关“散列”URL 参数以防止这种行为的内容，但不完全理解发生这种情况的原因和原因以及“散列”的确切含义。也许这对我来说不是正确的解决方案。所以我恳请有人解释我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:26:34.730

我已经解决了！不要问到底是怎么回事，我做的是以下几点：

AJAX 响应是整个网页，因为我会通过重新加载页面来获得它。使用 jquery 我选择一个包含搜索表单和结果的 div。

我只是为结果定义了一个 div，并且只更新了结果 div 的内容。这样做之后，一切正常，结果 div 会随着多次搜索尝试而更新。

另一个不知道我在做什么的情况，但我做得很好；）

也许有人仍然可以向我解释我的错误，以便智慧上升。

# c - 读取文件并执行进程之间的操作顺序

> ID：15688842
> 
> 赞同：0
> 
> 时间：2013-03-28T17:54:15.383
> 
> 标签：c, file-io, semaphore

我正在尝试遵循一个教程，该教程要求我编辑示例代码以使程序运行两个进程，这两个进程轮流将歌词输出到歌曲中（“[*桶中有一个洞*](http://en.wikipedia.org/wiki/There%27s_a_Hole_in_My_Bucket)”）。

我的问题是文件作为一个整体输出，而不是像它应该看到我正在谈论的屏幕截图那样交替输出：http: [//imgur.com/NusvhVA](http://imgur.com/NusvhVA)

我的代码如下。谢谢。

```
 #include <sys/ipc.h>
    #include <sys/sem.h>
    #include <stdio.h>
    #include <stdlib.h>

    #define KEY 87654 //Unique semaphore key

int main()
{
  int id; /* Number by which the semaphore is known within a program */
  FILE *file;
  file = fopen("207song.txt", "r" );
  int c;

  union semun {
    int val;
    struct semid_ds *buf;
    ushort * array;
  } argument;

  argument.val = 1;

  /* Create the semaphore with external key KEY if it doesn't already
     exists. Give permissions to the world. */
  id = semget(KEY, 1, 0666 | IPC_CREAT);

  /* Always check system returns. */
  if(id < 0) {
      fprintf(stderr, "Unable to obtain semaphore.\n");
      exit(0);
  }

  /* What we actually get is an array of semaphores. The second
     argument to semget() was the array dimension - in our case
     1\. */

  /* Set the value of the number 0 semaphore in semaphore array
     # id to the value 0\. */
  if( semctl(id, 0, SETVAL, argument) < 0) {
      fprintf( stderr, "Cannot set semaphore value.\n");
  } else {
      fprintf(stderr, "Semaphore %d initialized.\n", KEY);
  }

  int pid=fork();

  const int HENRY_DONE = 0;
  const int LIZA_DONE = 1;
  volatile int flag = HENRY_DONE;

  if(pid) {
    struct sembuf operations[1];
    int retval; /* Return value from semop() */

    /* Get the index for the semaphore with external name KEY. */
    id = semget(KEY, 1, 0666);

    if(id < 0){
      /* Semaphore does not exist. */

      fprintf(stderr, "Program sema cannot find semaphore, exiting.\n");
      exit(0);
    }
    operations[0].sem_num = 0;
    /* Which operation? Subtract 1 from semaphore value : */
    operations[0].sem_op = -1;
    /* Set the flag so we will wait : */
    operations[0].sem_flg = 0;

    while(1){
      //Process 1

      //wait
      operations[0].sem_op = -1;
      retval = semop(id, operations, 1);

      //critical section
      printf("Liza's Part: \n");
      fflush(stdout);
      sleep(1);

      while ((c = getc(file)) !=EOF)
                    if (c == "\n") {
                            putchar(c);
                            break;
                            }
                    else
                    putchar(c);
      fflush(stdout);

      operations[0].sem_op = 1;
      //signal
      retval = semop(id, operations, 1);

    }
  }else{
    //Process 2
    struct sembuf operations[1];
    int retval; /* Return value from semop() */
    /* Get the index for the semaphore with external name KEY. */
    id = semget(KEY, 1, 0666);
    if(id < 0){
      /* Semaphore does not exist. */

      fprintf(stderr, "Program sema cannot find semaphore, exiting.\n");
      exit(0);
    }
    operations[0].sem_num = 0;
    /* Which operation? Subtract 1 from semaphore value : */

    operations[0].sem_op = -1;
    /* Set the flag so we will wait : */
    operations[0].sem_flg = 0;

    while(1){

      //wait

      operations[0].sem_op = -1;
      retval = semop(id, operations, 1);

      //critical section

      printf("Henry's Part: \n");
      fflush(stdout);
      sleep(1);

      while ((c = getc(file)) !=EOF)
                    if (c == "\n") {
                            putchar(c);
                            break;
                            }
                    else
                    putchar(c);
      fflush(stdout);

      //signal
      operations[0].sem_op = 1;
      retval = semop(id, operations, 1);

    }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:24:29.533

如果你的 while 循环你有：

```
while ((c = getc(file)) !=EOF)
                if (c == "\n") { 
```

getc 返回一个整数，"\n" 是一个 char* 类型的 c 字符串。该比较将不匹配，导致第一个消费者显示整个文件。

你可能想要

```
c == '\n' 
```

注意单引号'而不是双引号'单引号将是一个字符，它将与一个int进行合理的比较。

# ios - DetailView中的SplitViewController和PopOverController

> ID：15688850
> 
> 赞同：1
> 
> 时间：2013-03-28T17:54:30.837
> 
> 标签：ios, objective-c, ipad, uisplitviewcontroller, uipopovercontroller

我对 iPad 应用程序非常陌生。我创建了一个简单的 iPad 应用程序。带有嵌入在 UINavigationController 中的 TableView 的 MasterViewController。用户点击 tableview 中的一个条目，将他设置为 WebViewController。

但是在我通过告诉它主视图和详细视图在 Storyboard 中实现 SplitViewController 之后，详细视图顶部的导航栏消失了。我还实现了 SplitViewController，它在左侧以纵向和横向显示主视图控制器，但后来将其删除。

**我想要**的是在里面显示带有 tableview 的 masterview，因为它没有 splitviewcontroller，当用户点击其中一个 tableview 条目时，它会转到 WebViewController （这已经发生到这一点）但是当用户到达 WebViewController 时，如果他在横向模式下，tableview 在左侧作为 splitviewcontroller 出现，如果用户处于纵向模式，导航栏上应该有一个按钮来显示具有相同 tableview 条目的 popovercontroller，他可以选择任何其他条目而无需回去。

任何人都可以帮助我如何在 Storyboards 中实现这一点，或者如果我做错了整个事情，可以指导我。提前致谢。

# sql - 如何从执行报告程序中选择特定列

> ID：15688852
> 
> 赞同：0
> 
> 时间：2013-03-28T17:54:31.307
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如何从存储过程中仅选择特定列：

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[PositionsForNAV_PairTrades]
        @ComparePeriod = 'MTD',
        @OverrideCompareDate = '2010-12-31',
        @PortfolioId = '5',
        @OverrideStartDate = NULL,
        @NewPositionsOnly = 0,
        @ReportType = 0,
        @SourceID = 13,
        @SecurityType = 'Bond',
        @LongShort = 1
GO 
```

它给了我很多列，请帮助我如何从结果中仅选择 3-4 个特定列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:08:17.053

您不能为此使用返回值。存储过程有一个返回值，它用于错误代码/状态值，而不是数据。它也仅限于整数。

您需要创建一个`#temp`具有存储过程输出结构的表，然后执行以下操作：

```
INSERT #temp EXEC dbo.StoredProcedureName ...
SELECT col1, col2 FROM #temp; 
```

或者，您可以使用各种其他技巧，例如`OPENQUERY`针对环回提供程序（我什至不打算展示，因为我认为这是一个坏主意）。

有关在过程之间共享数据的更多想法，请参阅：

[http://www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

# c# - 将图像存储在数据库中并在 datagridview 中检索

> ID：15688858
> 
> 赞同：0
> 
> 时间：2013-03-28T17:54:44.763
> 
> 标签：c#, asp.net, sql, gridview, asp.net-mvc-2

我自己在.net中尝试新事物。我想将图像url存储在数据库中并在gridview中动态检索它。我尝试使用blob。但我不想将图像存储在数据库中，而只是urls。一些解决方案我发现我们可以在gridview中使用模板字段并以某种方式使用绑定功能。我还可以将所有图像存储在项目文件夹中并从文件夹中检索图像。单击按钮我想在gridview中显示图像。但我仍然无法继续前进。到目前为止，这是我的代码....

```
<div>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="Model_Id" DataSourceID="SqlDataSource1">
            <Columns>
                <asp:BoundField DataField="Model_Id" HeaderText="Model_Id" 
                    InsertVisible="False" ReadOnly="True" SortExpression="Model_Id" />
                <asp:BoundField DataField="Model_Name" HeaderText="Model_Name" 
                    SortExpression="Model_Name" />
                <asp:BoundField DataField="Max_seats" HeaderText="Max_seats" 
                    SortExpression="Max_seats" />
                <asp:BoundField DataField="Image" HeaderText="Image" SortExpression="Image" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
            SelectCommand="SELECT * FROM [Model]"></asp:SqlDataSource>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:03:27.897

将图像存储在项目的解决方案资源管理器中的文件夹中，如果要将链接保存到数据库，则将列的数据类型设置为 varchar(MAX) 并将图像的链接存储到数据库表，如下所示。

1.如果您的文件夹名称是Image，则将url存储为../Image/picture.jpg

2.进入gridview的快捷任务菜单，点击edit fields，从AVAILABLE FIELDS列表中选择“ImageField”，点击add，图片字段就被添加到SELECTED FIELDS

3.将SELECTED FIELDS中的“ImageField”向上或向下移动到其他列之间

4.单击“ImageField”，ImageField 属性将显示在右侧，GOTO DATA 并在“DataImageUrlField”中选择要从中检索图像的数据库表列名称。

应该可以，ImageField 会自动为您的图像生成 HTML 代码来显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:36:56.197

在你`GridView`添加一个模板字段，即

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="Model_Id" DataSourceID="SqlDataSource1">
    <Columns>
            <asp:TemplateField HeaderText="Photo">
                <ItemTemplate>
                    <img src='<%# Eval("Image") %>' />
                </ItemTemplate>
            </asp:TemplateField>  
            //other bound columns
   </Columns>            
</asp:GridView> 
```

`Image`表中的列在哪里`[Model]`，包含图像 URL。如果图像不显示，请检查相对 url 结构，您可能需要像这样添加前缀/调整它：

`/images/image1.jpg`到`../images/image1.jpg` （取决于包含图像的文件夹的相对位置）

它应该适合你。

# maven - 运行 maven 命令时如何禁用控制台消息？

> ID：15688865
> 
> 赞同：3
> 
> 时间：2013-03-28T17:55:00.543
> 
> 标签：maven, console, cucumber

我正在执行 Maven 命令以在控制台（MacOSX）中运行测试。最近，开发工作在控制台中产生了无关的消息（信息、调试、警告等）。我想知道如何删除这样的消息：

> 信息 ccmscpApplicationProperties - 从以下位置加载应用程序属性：app-config/shiro.properties

我已使用此代码从 dbunit 测试中删除消息：

```
ch.qos.logback.classic.Logger Logger = (ch.qos.logback.classic.Logger)LoggerFactory.getLogger("org.dbunit");
    Logger.setLevel(Level. ERROR); 
```

但是，我不确定如何禁用这些额外的（通常是冗长和令人讨厌的）消息显示在控制台上，以便我可以更轻松地查看输出。附加消息如上所示，这些：

> 调试 ccmscfdao.AbstractDBDAO - 向主搜索查询添加过滤器。
> 
> WARN ccmscpJNDIConfigurationProperties - 找不到名称的 JNDI 值：xxxxx
> 
> INFO ccmatdDatabaseTestFixture - ***执行 sql: xxxxx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-08T14:52:52.517

成功的答案是：

**解决方案**：问题的解决方案是将“logback-test.xml”文件添加到我的测试文件夹的根目录。我使用了默认内容（按照文档的说明 - 感谢@Charlie）。一旦文件存在，固定！

# ruby-on-rails - rspec 测试 json 响应的顺序

> ID：15688867
> 
> 赞同：0
> 
> 时间：2013-03-28T17:55:07.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rspec

所以我的代码是这样返回 json 的：

```
 "offenses": [
    {
    "name": "Speeding",
    "penalties": [
    {
    "name": "Ticket",
    "severity": "Medium"
    }

}
] 
```

我有以下胖女孩：

```
FactoryGirl.define do
  factory :person_offense_penalty do
    person_offense
    name 'Ticket'
    severity 'Medium'
  end
end

FactoryGirl.define do
  factory :person_offense do
    name 'Speeding'
    person
  end
end 
```

这是我对响应的测试，它工作正常

```
 person_offenses = person.person_offenses
  expect(response_body['offenses'].size).to eq(person_offenses.size)

   person_offenses.each_with_index do |offense, offense_index|
        expect(response_body['offenses'][offense_index]['name']).to eq(offense.name)
        offense.person_offense_penaltys.each_with_index do |penalty, penalty_index|
          expect(response_body['offenses'][offense_index]['penaltys'][penalty_index]['name']).to eq(penalty.name)
          expect(response_body['offenses'][offense_index]['penaltys'][penalty_index]['severity']).to eq(penalty.severity)
        end
      end 
```

我需要编写另一个测试来确保攻击名称按升序排序。有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:11:43.657

首先，让我们将您的 JSON 转换为有效字符串：

```
[1] pry(main)> x = "{\"offenses\": [{ \"name\": \"Speeding\", \"penalties\": [ { \"name\": \"Ticket\", \"severity\": \"Medium\" } ] }] }" 
```

现在我们可以解析它[`ActiveSupport::JSON.decode`](http://api.rubyonrails.org/classes/ActiveSupport/JSON.html#method-c-decode)

```
[2] pry(main)> offenses = ActiveSupport::JSON.decode(x)["offenses"]
=> [{"name"=>"Speeding", "penalties"=>[{"name"=>"Ticket", "severity"=>"Medium"}]}] 
```

您可以使用以下命令获取攻击名称列表[`map`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-map)

```
[3] pry(main)> names = offenses.map { |o| o["name"] }
=> ["Speeding"] 
```

现在您可以简单地[`sort`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort)命名并进行比较

```
expect(names).to eq(names.sort) 
```

如果原始 JSON 的每个都按其属性`"offense"`排序，这将通过`"name"`。

# delphi - Delphi动态创建多个编辑组件

> ID：15688871
> 
> 赞同：1
> 
> 时间：2013-03-28T17:55:13.063
> 
> 标签：delphi, delphi-7

我需要创建多个编辑组件，但我遇到了 1 个问题。我需要将宽度和高度设置为一个固定值。问题是我不能改变高度，当我这样做时它根本不会改变。奇怪的是，当我更改宽度时，它可以完美运行（所有编辑都具有我在此函数中设置的宽度值）。

这是我的这个函数的代码：

```
procedure Tform1.editcreate;

var i,j: integer;
    sud: array [1..9,1..9] of TEdit;

begin
for i:=1 to 9 do
 for j:=1 to 9 do begin
  sud[i][j]:=TEdit.Create(form1);
  sud[i][j].Height:=50;
  sud[i][j].Width:=50;
  sud[i][j].top:=50*i;
  sud[i][j].left:=50*j;
  sud[i][j].Parent:=form1;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:04:12.380

默认情况下，单行编辑控件的高度由字体度量自动确定。所以，如果你想让你的编辑更大，要么：

1.  使其字体变大，或
2.  设置`AutoSize`为`False`。

`AutoSize`我认为由于额外未使用的垂直空间，设置为的编辑控件`False`看起来很奇怪。我认为我从未使用过，甚至从未见过如此配置的编辑控件。

# php - 如何在 php 或 javascript 中为数字着色

> ID：15688872
> 
> 赞同：-5
> 
> 时间：2013-03-28T17:55:28.223
> 
> 标签：php, javascript, jquery

我正在开发一个投资组合作为学习 PHP 和 JavaScript 的项目。我每分钟更新一次股票价格，但我想让它变成绿色或红色，这取决于它是上涨还是下跌。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:00:03.843

研究在包含股票价格的元素上应用 CSS。这可以使用 Javascript 动态完成。您可以通过记录最后一个值并将其与新值进行比较来判断它是上升还是下降。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:01:29.487

我会这样做：

1.  将数字放在例如 div 中
2.  通过ajax获取新号码
3.  查看新数字是否比当前数字 < 、 === 或 >
4.  设置 div 样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:07:14.590

这并不复杂，只需一点 CSS 和一些 JavaScript。这是一个基本的例子。这可以通过多种不同的方式来完成。这只是一种方法。

**CSS：**

```
.green {color:green;}
.red {color:red;} 
```

**HTML：**

```
<span class="stock-value green">12</span> 
```

**JavaScript（使用 jQuery）：**

```
if( $('.stock-value').text() > 0) {
   $('stock-value').addClass('green');
}
else if($('.stock-value').text() < 0){
    $('stock-value').addClass('red');
} 
```

**演示：**

[http://jsfiddle.net/XakPM/](http://jsfiddle.net/XakPM/)

# jquery - 计算总 ins JQuery

> ID：15688877
> 
> 赞同：0
> 
> 时间：2013-03-28T17:55:38.127
> 
> 标签：jquery, asp.net, html

我之前发布了这个问题，但它有点不同。我正在采用一种新方法，但它似乎不起作用。我想知道我是否可以得到一些帮助来找出我哪里出错了。这样做的目的是在他们输入值或从文本框

ASP 移开焦点时立即计算：

```
 <asp:TextBox runat="server" ID="txtAmount1" CssClass="narrow"  text="0.00"  ClientIDMode="Static" class="PAmount"  /> 
 <asp:TextBox runat="server" ID="txtAmount2" CssClass="narrow"  text="0.00"  ClientIDMode="Static" class="PAmount"  /> 
 <asp:TextBox runat="server" ID="txtAmount3" CssClass="narrow"  text="0.00"  ClientIDMode="Static" class="PAmount"  /> 
  <asp:Literal ID="ltlGTotal" runat="server" Text="0.00" ></asp:Literal>
  <asp:TextBox runat="server" ID="txtTotalCost" CssClass="narrow"/> 
```

JS：

```
 $('.PAmount').keyup(function () { 
    var total;
    for (var i = 0; i < $(this).length; ++i) {
        total += parseInt($(this)[i].val());
    }
    $('#ltlGTotal').val(total);
    $('#txtTotalCost').val(total);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:30:20.253

这是我要做的：

```
var $amountBoxes = $(":text.PAmount"),
    $grandTotal = $("#ltlGTotal"),
    $totalCost = $("#txtTotalCost");

$amountBoxes.on("keyup change", calculateTotal);

function calculateTotal()
{
    var total = 0;
    $amountBoxes.each(function () 
    {
        total += parseInt($(this).val());
    });
    $grandTotal.text(total.toString());
    $totalCost.val(total.toString());
}; 
```

***[单击此处查看有效的 jsFiddle 演示](http://jsfiddle.net/Xd5wG/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:41:08.543

我不建议将总文本框设为可编辑。

此外，让用户在 Total 中输入值是没有意义的。

例如，1+2+3=8（总数不正确）。

**仅供参考**：你不能同时拥有`CssClass="narrow"`and `class="PAmount"`; 它不是正确的格式。

```
<asp:TextBox runat="server" ID="txtAmount1" CssClass="narrow" 
  Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtAmount2" CssClass="narrow" 
  Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtAmount3" CssClass="narrow" 
  Text="0.00" ClientIDMode="Static"/>
<asp:Label ID="ltlGTotal" runat="server" Text="0.00" ClientIDMode="Static" />
<asp:TextBox runat="server" ID="txtTotalCost" ClientIDMode="Static" />
<asp:DropDownList runat="server" ID="DropDownList1" AutoPostBack="True">
    <asp:ListItem Text="One" Value="1"/>
    <asp:ListItem Text="Two" Value="2"/>
</asp:DropDownList>
<script>
    $(document).ready(function () {
        $('#ltlGTotal').html($('#txtTotalCost').val());

        $('.narrow').keyup(calculate);

        $('.total').keyup(calculate);

        function calculate() {
            var total = 0;
            $('.narrow').each(function () {
                if ($(this).val().length > 0) {
                    total += parseInt($(this).val());
                }
            });
            $('#ltlGTotal').html(total);
            $('#txtTotalCost').val(total);
        }
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T05:33:18.837

试试这个代码

```
$('.PAmount').keyup(function () {
    var total=0;
    $('.PAmount').each(function () {
        total += parseInt($(this).val());
    });     
    $('#ltlGTotal').val(total);
    $('#txtTotalCost').val(total);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:08:56.840

您可以使用“窄”css 类添加更改事件，如下所示：

```
$('.narrow').change(function () {
  var total;
   for (var i = 0; i < $(this).length; ++i) {
      total += parseInt($(this)[i].val());
   }
   $('#ltlGTotal').val(total);
  $('#txtTotalCost').val(total);
}); 
```

希望能帮助到你

# php - 尝试查找ID或使用JOIN哪个更有效

> ID：15688882
> 
> 赞同：0
> 
> 时间：2013-03-28T17:55:50.977
> 
> 标签：php, mysql, join

我做了这个查找用户 ID 的小功能，并且我在整个网站上都可以使用该 ID，因为我之前包含了它`<head>`

```
$result=mysql_query("SELECT ID FROM korisnici WHERE username='".$_COOKIE["user"]."' AND password='".$_COOKIE["pass"]."'");
$get=mysql_fetch_assoc($result);
$ID_KORISNIK=$get["ID"];
if(empty($ID_KORISNIK))
{
    echo '
        <script>window.location="IDerror.php";</script>
        ';
} 
```

所以当我想选择或插入数据库时​​，我可以使用

```
$r=mysql_query("SELECT * FROM uzg WHERE IDkorisnik='$ID_KORISNIK'"); 
```

或使用 JOIN

```
$r=mysql_query("SELECT * FROM uzg JOIN (uzg.IDkorisnik=korisnici.ID) WHERE korisnici.username='$_COOKIE["user"]' AND korisnici.password='$_COOKIE["pass"]'"); 
```

你觉得哪个更好或更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:00:58.137

1.  **不要**将密码存储为 cookie
2.  **永远不要**相信用户输入，您的查询会受到 SQL 注入攻击
3.  **不要**使用`mysql_*`函数，使用 PDO 或`mysqli_*`，并使用准备好的语句来防止 SQL 注入攻击

我建议学习[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi——](http://php.net/mysqli)[这篇文章](http://j.mp/QEx8IB)将帮助你决定哪一个。如果您选择 PDO，[这里有一个很好的教程](http://j.mp/PoWehJ)。

顺便说一句，我认为你的第一个解决方案更好（但你必须纠正很多东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:12:40.913

如果它是大型项目，我很想使用一个用户类，所以我会简单地调用它

$new_user->id;

但如果不是，你的第一种方法要好得多，但你不是先检查你的输入是否是有效的 ID，一旦你确认它是一个有效的 ID [可能是现有的 int] 然后使用你的第一种方法

并存储您的用户密码，即使散列很糟糕，因为散列很容易破解，所以如果您想验证 cookie 窃取，请放置一些其他散列

# operating-system - 当没有用户代码可以运行时，CPU 会发生什么？

> ID：15688887
> 
> 赞同：4
> 
> 时间：2013-03-28T17:56:07.803
> 
> 标签：operating-system, task, cpu, python-idle, rtos

os/rtos 会安排一个“空闲任务”听起来很合理。那样的话，岂不是很耗电？（空闲任务将执行听起来很合理：while (true) {}）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T17:58:46.470

这取决于操作系统和 CPU 架构。在 x86（与 Intel 兼容）上，操作系统可能会执行[HLT](http://en.wikipedia.org/wiki/HLT)指令，使 CPU 等待直到发生一些有趣的事情，例如硬件中断。据说这会消耗很少的电量。操作系统将执行此操作所花费的时间报告为“[空闲](http://en.wikipedia.org/wiki/Idle_%28CPU%29)”，甚至可能将其分配给虚构的“空闲”进程。

因此，当您在 Windows 任务管理器中看到[系统空闲进程](http://en.wikipedia.org/wiki/System_Idle_Process)正在消耗 90% 的 CPU 时，这实际上意味着 CPU 没有实际的程序来运行 90% 的时间。

这是一篇关于这个主题的好文章：[空闲 CPU 做什么？](http://duartes.org/gustavo/blog/post/what-does-an-idle-cpu-do/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T18:12:31.267

从历史上看，它有很多不同的方案，尤其是在降低空闲时的功耗成为问题之前。

通常有一个“空闲”进程/任务以最低优先级运行，因此在无事可做时总是得到控制。许多旧系统只会让这个过程运行一个“永远做”循环，而在循环体中没有任何后果。我听说的一个操作系统会在空闲过程中运行机器诊断。许多早期的 PC 会运行内存刷新例程（因为内存需要定期循环，否则会“蒸发”）。

（这个方案的一个好处是 100% 减去空闲进程使用的 % CPU 为您提供了 % CPU 利用率 - 操作系统设计人员赞赏这一功能。）

但是大多数现代系统的标准是运行“暂停”或“等待”指令，或者在进程控制块中设置一个特殊标志，更直接地告诉处理器停止运行并进入省电模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T17:59:48.003

总是有代码要运行，如果没有别的，空闲任务就是代码。它可能会执行一条特殊的 CPU 指令来关闭 CPU，直到硬件中断到来。在 x86 CPU 上它是`hlt`（停止）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T19:39:24.653

此答案特定于基于 Windows NT 的操作系统。

### 空闲线程功能

任务可能因架构而异，但通常这些是空闲线程执行的任务：

*   启用中断以允许传递挂起的中断
*   禁用中断（使用`STI`或`CLI`指令，[更多关于 wiki](https://en.wikipedia.org/wiki/Interrupt_flag)）
*   在`DEBUG`（或[选中](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff543450%28v=vs.85%29.aspx)的）构建上，查询是否附加了内核调试器并在请求时允许断点
*   处理延迟过程调用
*   检查是否有任何可运行的线程准备好执行。如果有，则使用指向线程的指针更新空闲处理器控制块
*   检查其他处理器的队列，如果可能，调度线程在空闲处理器上等待执行
*   调用电源管理例程，这可能会停止处理器或降低 CPU 滴答率并执行其他类似的节能活动

### 附加信息

当逻辑处理器没有可运行线程时，Windows 会执行内核模式空闲线程。只有 1 个空闲进程具有与逻辑处理器一样多的空闲线程。因此，在具有 4 个逻辑/物理处理器的四核机器上，将有 1 个空闲进程和 4 个空闲线程。

在 Windows 中，空闲进程的 ID = 0，所有空闲线程也是如此。这些对象由标准`EPROCESS/KPROCESS`和`ETHREAD/KTHREAD`数据结构表示。但它们不是执行管理器进程和线程对象。没有用户级地址空间，也没有执行用户级代码。

在设置进程管理器和对象管理器之前，空闲进程在系统启动时被静态分配。空闲线程结构在逻辑处理器启动时动态分配。

空闲线程优先级设置为 0。但是，该值实际上并不重要，因为该线程仅在没有其他线程可运行时才被执行。空闲线程优先级永远不会与任何其他线程的优先级进行比较。

[空闲线程也是抢占](https://en.wikipedia.org/wiki/Preemption_%28computing%29)的特例。空闲线程主例程`KiIdleLoop`（来自[reactos的](http://reactos.org)[实现](http://doxygen.reactos.org/d8/dc0/ntoskrnl_2ke_2amd64_2stubs_8c_ac8f6ede68a6bffcf075696a6c8d36ce9.html#ac8f6ede68a6bffcf075696a6c8d36ce9)）执行几个不会被其他线程中断的任务。当处理器上没有可运行的线程可用时，该处理器在处理器控制块中被标记为空闲。然后，如果一个可运行线程到达调度执行的队列，则该线程的地址指针被存储在空闲处理器控制块的指针中。在空闲线程运行期间，在循环内的每次迭代中都会检查此指针地址。`NextThread``while`

^(资料来源：Windows 内部。M.鲁西诺维奇。第 6 版。第 1 部分，第 453 - 456 页。)

# python - 为什么应用程序会在 sys.exit 命令之后显示？

> ID：15688889
> 
> 赞同：2
> 
> 时间：2013-03-28T17:56:08.610
> 
> 标签：python, ipython

我正在关注本教程：

[http://zetcode.com/tutorials/pyqt4/firstprograms/](http://zetcode.com/tutorials/pyqt4/firstprograms/)

在第一个示例中，我不明白为什么应用程序仅在命令之后显示：

```
sys.exit(app.exec_()) 
```

另外，我稍微修改了代码来测试一下

```
import sys
from PyQt4 import QtGui

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    w = QtGui.QWidget()
    w.resize(250,150)
    w.move(300,300)
    w.setWindowTitle("Title")
    w.show()
    sys.exit(app.exec_()) 
```

如果我在终端中运行它并注释掉最后一行，它只会在运行最后一行后显示窗口。

我不太明白最后一行是做什么的。

编辑：

我也很困惑为什么没有参考，`app`我`w`希望有某种迹象表明它`w`是一个孩子或什么的`app`。

我在 Spyder 和一个 IPython 解释器中运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:58:56.087

相当于

```
status = app.exec_()   # run app, show window, wait for input
sys.exit(status)       # terminate program with a status code returned from app 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:59:00.377

最后一行是两个函数。首先它运行`app.exec_()`（显示应用程序的主窗口），然后当该函数结束时，它将返回值作为参数传递[`sys.exit`](http://docs.python.org/2/library/sys.html#sys.exit)给*nix 系统`echo $?`在程序结束后）。

它没有立即退出的原因是 Python`sys.exit`在知道参数的值之前无法执行，并且在完成之前它不会知道这一点`app.exec_()`。

# c# - 嵌套的用户控件数据上下文

> ID：15688891
> 
> 赞同：2
> 
> 时间：2013-03-28T17:56:13.710
> 
> 标签：c#, wpf

***抽象的：***

我有两个`UserControl`名为`Zone`和`ZoneGroup`。这些控件之一 ( `ZoneGroup`) 包括另一个 ( `Zone`) 的两个实例。他们都`DataContext`将根元素设置为`this`, 在`Loaded`事件处理程序中。

问题是`DataContext`内部控件（`Zone`s）是在加载之前设置的（`DataContextChanged`事件发生在之前`Loaded`），这会导致 UI 出现一些故障。（内部`Zone`控件的初始状态是错误的。）如果我阻止它，一切正常（至少看起来是！）除了我遇到以下错误报告。（在输出窗口中）

```
public partial class Zone : UserControl
{
    ∙∙∙

    private void Zone_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        // Adding this if-clause solve UI problems but makes some binding errors!
        if (this.IsLoaded)
            brdRoot.DataContext = this;
    }
} 
```

System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“ZoneGroup”（名称=“”）上找不到“ZoneBrush”属性。绑定表达式：路径=ZoneBrush；DataItem='ZoneGroup'（名称=''）；目标元素是 'brdRoot' (Name=''); 目标属性是“BorderBrush”（输入“Brush”）

***细节：***

有一个包含几个数据绑定的`UserControl`命名`Zone`，像这样..

```
<UserControl x:Class="MyApp.Zone"
    ∙∙∙&gt;
    <Border x:Name="brdRoot" BorderBrush="{Binding ZoneBrush}" BorderThickness="1">
        ∙∙∙
    </Border>
</UserControl> 
```

所以，我将`brdRoot`数据上下文设置为

```
public partial class Zone : UserControl
{
    public Brush ZoneBrush
    {
        get { return (Brush)GetValue(ZoneBrushProperty); }
        set { SetValue(ZoneBrushProperty, value); }
    }

    ∙∙∙

    public Zone()
    {
        InitializeComponent();
    }

    private void Zone_Loaded(object sender, RoutedEventArgs e)
    {
        brdRoot.DataContext = this;
    }

    ∙∙∙
} 
```

此外，还有一个`UserControl`有两个`ContentPresenter`s 以包含和管理两个`Zone`控件。

```
<UserControl x:Class="MyApp.ZoneGroup"
    ∙∙∙&gt;
    <Border x:Name="brdRoot" BorderBrush="Gray" BorderThickness="1">
        <StackPanel Orientation="Horizontal">
            <ContentPresenter Content="{Binding MainZone}"
                              Margin="{Binding MainZonePadding}"/>
            <ContentPresenter Content="{Binding MemberZone}"/>
        </StackPanel>
    </Border>
</UserControl> 
```

背后的代码是：

```
public partial class ZoneGroup : UserControl
{
    public Thickness MainZonePadding
    {
        get { return (Thickness)GetValue(MainZonePaddingProperty); }
        set { SetValue(MainZonePaddingProperty, value); }
    }

    public Zone MainZone
    {
        get { return (Zone)GetValue(MainZoneProperty); }
        set { SetValue(MainZoneProperty, value); }
    }

    public Zone MemberZone
    {
        get { return (Zone)GetValue(MemberZoneProperty); }
        set { SetValue(MemberZoneProperty, value); }
    }

    public ZoneGroup()
    {
        InitializeComponent();
    }

    private void ZoneGroup_Loaded(object sender, RoutedEventArgs e)
    {
        brdRoot.DataContext = this;
    }

    ∙∙∙
} 
```

* * *

编辑 ►**草图：** ![区域组控件中的两个区域控件。](../Images/557d482efc9c94b8947852c65f8f75d3.png)

我的应用程序按预期工作正常，但报告了一些 BindingExpression 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:27:59.727

*这不是一个直接的答案！*

正如@HighCore 所说，我尝试使用 an而不是在我的用户控件`ItemsControl`中实现两个s。`ContentPresenter`为了清楚起见，我制作了一个新的简单应用程序，以便能够简单地描述它。所以请考虑一些新的假设：

这里又是两个`UserControl`s；`MyItem`如下`MyItemsControl`。

```
<UserControl x:Class="MyApp.MyItem"
             ∙∙∙&gt;
    <Grid x:Name="grdRoot">
        <Border BorderBrush="{Binding ItemBorderBrsuh}" BorderThickness="1">
            <TextBlock x:Name="txtColorIndicator"
                       Text="Item"
                       TextAlignment="Center"
                       Margin="5"/>
        </Border>
    </Grid>
</UserControl> 
```

C#代码隐藏：

```
public partial class MyItem : UserControl
{
    #region ________________________________________  ItemBorderBrsuh

    public Brush ItemBorderBrsuh
    {
        get { return (Brush)GetValue(ItemBorderBrsuhProperty); }
        set { SetValue(ItemBorderBrsuhProperty, value); }
    }

    public static readonly DependencyProperty ItemBorderBrsuhProperty =
        DependencyProperty.Register("ItemBorderBrsuh",
                                    typeof(Brush),
                                    typeof(MyItem),
                                    new FrameworkPropertyMetadata(new SolidColorBrush(Colors.Black), FrameworkPropertyMetadataOptions.None, OnItemBorderBrsuhPropertyChanged));

    private static void OnItemBorderBrsuhPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        MyItem instance = sender as MyItem;

        if (instance != null && e.NewValue is SolidColorBrush)
            instance.txtColorIndicator.Text = (e.NewValue as SolidColorBrush).Color.ToString();
    }

    #endregion

    public MyItem()
    {
        InitializeComponent();

        grdRoot.DataContext = this;
    }
} 
```

这就是 MyItemsControl。

```
<UserControl x:Class="MyApp.MyItemsControl"
    ∙∙∙&gt;
    <StackPanel>
        <TextBlock x:Name="txtHeader" Margin="0,0,0,5" TextAlignment="Center" Text="0 Item(s)"/>
        <Border BorderBrush="Gray" BorderThickness="1" Padding="5">
            <ItemsControl x:Name="itemsControl" ItemsSource="{Binding Items}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <local:MyItem />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>
    </StackPanel>
</UserControl> 
```

C# 代码隐藏：

```
public partial class MyItemsControl : UserControl
{
    private ObservableCollection<MyItem> _Items = new ObservableCollection<MyItem>();
    public ObservableCollection<MyItem> Items
    {
        get
        {
            return _Items;
        }
        set
        {
            _Items = value;
        }
    }

    private void Items_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        txtHeader.Text = Items.Count + " Item(s)";
    }

    public MyItemsControl()
    {
        InitializeComponent();
        Items.CollectionChanged += Items_CollectionChanged;

        this.DataContext = this;
    }
} 
```

以下是如何`MyItem`在`MyItemsControl`.

```
<Grid>
    <local:MyItemsControl HorizontalAlignment="Center" VerticalAlignment="Center" Padding="5" BorderBrush="Black" BorderThickness="1">
        <local:MyItemsControl.Items>
            <local:MyItem ItemBorderBrsuh="Green" Margin="1"/>
            <local:MyItem ItemBorderBrsuh="Red" Margin="1"/>
            <local:MyItem ItemBorderBrsuh="Blue" Margin="1"/>
            <local:MyItem ItemBorderBrsuh="Orange" Margin="1"/>
        </local:MyItemsControl.Items>
    </local:MyItemsControl>
</Grid> 
```

现在，s 没有问题`BindingExpression`，但还有一个重要的问题。如何更换

```
{
    grdRoot.DataContext = this;
} 
```

和

```
{
    this.DataContext = this;
} 
```

用真`ViewModel`？

**截屏：**

![我的项目控件](../Images/38721127b87e581fc2721473b16baf0b.png)

* * *

***编辑：*** 我尝试实现 MVVM 模式，但存在一些问题。[我在这里](https://stackoverflow.com/questions/15741515/nested-usercontrols-in-mvvm-with-different-dps-usage)问了第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:49:21.690

`UserControls`你把所有这些和所有这些都过于复杂化了`DependencyProperties`。查看使用 0 行 C# 代码（仅 XAML）的示例：

```
<Window x:Class="MiscSamples.ItemsControl"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ItemsControl" Height="300" Width="300">
    <Window.Resources> 
```

ItemsControl 的样式：

```
 <Style TargetType="ItemsControl" x:Key="ZoneItemsControlStyle">
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <Border BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}"
                                Padding="5">
                            <DockPanel>
                                <TextBlock HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                           Text="{Binding Items.Count,RelativeSource={RelativeSource TemplatedParent}, StringFormat='{}{0} Item(s)'}"
                                           Foreground="{TemplateBinding Foreground}"
                                           DockPanel.Dock="Top"/>
                                <Border BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        Padding="{TemplateBinding Padding}">
                                    <ItemsPresenter/>
                                </Border>
                            </DockPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" IsItemsHost="True"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

画笔的数据模板：

```
 <DataTemplate DataType="{x:Type Brush}">
            <Border BorderBrush="{Binding}" Margin="1" BorderThickness="1" Padding="2,3,2,3">
                <TextBlock Text="{Binding}" TextAlignment="Center" Foreground="Black"/>
            </Border>
        </DataTemplate>

    </Window.Resources> 
```

现在，它的用法：

```
 <Grid>
        <ItemsControl VerticalAlignment="Center" HorizontalAlignment="Center"
                      Style="{StaticResource ZoneItemsControlStyle}">
            <SolidColorBrush Color="Red"/>
            <SolidColorBrush Color="Green"/>
            <SolidColorBrush Color="Black"/>
            <SolidColorBrush Color="Blue"/>
        </ItemsControl>
    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](../Images/7132adff56a7a59617355b1c54576105.png)

看看我是如何利用`DataTemplates`来显示特定的自定义 UI 的`Data Type`？（在这种情况下，`System.Windows.Media.Brush`类）

我正在“使用画笔作为 ViewModels”。当然，您也可以创建自己的 ViewModel，然后`DataTemplate`为每种 VM 类型创建一个特定的。

另外，请参阅我如何使用`TemplateBinding`MarkupExtension 将内部的几个属性绑定到实例`ControlTemplate`中的相应值。`ItemsControl`

最后，看看你如何实际添加`ANY`kind 到`ItemsControl`.

另外，我必须提到我使用这种`Style`基于方法的方法是为了实现可重用性。您可以`ItemsControl`在应用程序的其他位置放置另一个并设置它`Style="{StaticResource ZoneItemsControlStyle}"`，您就完成了。但是，如果您只打算使用一次，您可以将所有属性硬编码到`ItemsControl.Template`ControlTemplate 中。

# r - 在多行中打印文本作为绘图或轴的标题，文本中存在下标

> ID：15688896
> 
> 赞同：0
> 
> 时间：2013-03-28T17:56:29.663
> 
> 标签：r

我希望在两行中打印标题中的文本，但由于文本中存在下标而无法实现所需的输出。以下是我想要的两行文本的示例。

```
plot(1,main=expression(paste(CO[2]~'Flux (kg C ', m^-2,' ',s^-1,')'))) 
```

但是在以下命令中使用换行符并没有给出将（仅）文本带入新行的预期结果：

```
plot(1,main=expression(paste(CO[2]~'Flux \n(kg C ', m^-2,' ',s^-1,')'))) 
```

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:09:00.980

您可以使用该`atop`功能执行此操作。

```
plot(1,main=expression(atop(CO[2]~'Flux', paste('(kg C ', m^-2,' ',s^-1,')')))) 
```

![在此处输入图像描述](../Images/ef2b8bd8495d272ee0cdbcb87a2beef8.png)

由于`lheight` `par`不影响表达式，如果您想要更紧密的行间距，您可以使用以下内容。

```
plot(1,main=expression(textstyle(atop(CO[2]~'Flux', paste('(kg C ', m^-2,' ',s^-1,')')))), 
     cex.main=2) 
```

![在此处输入图像描述](../Images/12114dabc23aa1df459cd5ca62a6e4f9.png)

# python - 从 heroku 上的 rails 应用程序安装 pip 模块

> ID：15688898
> 
> 赞同：1
> 
> 时间：2013-03-28T17:56:35.117
> 
> 标签：python, heroku, pip

我在heroku 上部署了一个rails 应用程序。这个应用程序依赖于一个 python 模块，[https://github.com/clips/pattern](https://github.com/clips/pattern)。根据 的文档`pattern`，我可以通过两种方式安装：

1：`cd pattern-2.5; python setup.py install`

> 创建 /usr/local/lib/python2.7/site-packages/pattern 错误：无法创建“/usr/local/lib/python2.7/site-packages/pattern”：只读文件系统

2：`pip install pattern`

> bash：pip：找不到命令

请告诉我如何安装模式。我发现了一个类似的问题，[How to install python module on Heroku cedar stack with Rails](https://stackoverflow.com/questions/8591433/how-to-install-python-module-on-heroku-cedar-stack-with-rails)，但它对我不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T18:16:36.300

Buildpacks 是 Heroku 用于构建应用程序的机制，包括安装依赖项。默认情况下不安装 Pip，Python buildpack 本身会引入此依赖项。您可以使用 multi-buildpack，它允许您包含多个 buildpack。

多构建包 - [https://github.com/ddollar/heroku-buildpack-multi](https://github.com/ddollar/heroku-buildpack-multi)

Python buildpack - [https://github.com/heroku/heroku-buildpack-python](https://github.com/heroku/heroku-buildpack-python)

Ruby buildpack - [https://github.com/heroku/heroku-buildpack-ruby](https://github.com/heroku/heroku-buildpack-ruby)

# javascript - 无需重建 jQuery 对象即可遍历 jQuery 集合

> ID：15688899
> 
> 赞同：3
> 
> 时间：2013-03-28T17:56:36.203
> 
> 标签：javascript, jquery, iterator

```
$(".item").each (i, elt) ->
    $(elt).attr("href")
    # ... 
```

这样做`$(elt)`是获取 jquery 对象的必要条件。有没有一种方法可以遍历 jquery 集合，而不必重建 jquery 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:57:41.583

> 执行 $(elt) 是获取 jquery 对象的必要条件。

是的。

> 有没有一种方法可以遍历 jquery 集合，而不必重建 jquery 对象？

不，因为您拥有的 jQuery 对象是所有匹配元素的集合。要在单个元素上使用 jQuery 方法，您需要获取一个 jQuery 对象，该对象仅包含您要操作的单个元素。在一个循环中，这意味着包装您的`elt`(或`this`，因为两者都是相同的 DOM 元素)。

但是，对于很多事情，您*不需要*jQuery 方法。您的示例就是其中之一，只需`elt.href`直接使用：

```
$(".item").each (i, elt) ->
    var someVar = elt.href;
    # ... 
```

DOM2 [HTML 规范](http://www.w3.org/TR/DOM-Level-2-HTML/)和较新的[HTML5 规范](http://www.w3.org/TR/html5/)都列出了许多可以直接使用的反射属性。`id`，例如，是人们经常使用的一种。您会看到`$(this).attr("id")`很多地方`this.id`就足够了（而且效率更高，尽管效率很重要的情况极为罕见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:58:30.793

是的，缓存 jQuery 对象然后按索引选择。

```
var $items = $(".item");

$items.each(function(i) {
    $items.eq(i).doStuff();
}); 
```

# sql - SQL Server 2008 R2 未附加数据库文件

> ID：15688900
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:56:37.460
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server。版本如下：

```
Microsoft SQL Server 2008 R2 (RTM) - 10.50.1600.1 (Intel X86)   Apr  2 2010 15:53:02
Copyright (c) Microsoft Corporation  Enterprise Edition 
on Windows NT 5.2 <X86> (Build 3790: Service Pack 2) 
```

当我尝试附加时`Callbacks.mdf`，出现以下错误：

> 为服务器“LT122580\SQLEXPRESS”附加数据库失败。
> (Microsoft.SqlServer.Smo)
> 无法打开数据库“Egor_Callback”，因为它是版本 661。此服务器支持版本 655 及更早版本。不支持降级路径。
> 无法打开新数据库“Egor_Callback”。CREATE DATABASE 已中止。（Microsoft SQL Server，错误：948）

我没有更多可用的 SQL Server 更新，我不知道是什么原因造成的。是因为我试图将它附加到 SQL Server Express 服务器吗？如果是这样，我怎样才能在不涉及另一台服务器的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:58:37.293

这里最大的问题是 SQL Server 2008 和 SQL Server 2008 R2 是同一个东西的误解。他们不是。2008 R2 不仅仅是 2008 的一个服务包，它是一个完全不同的版本，数据库结构也不同。

您的数据库来自 SQL Server 2008 R2 实例 (661)，但您尝试在 2008 上安装它（最多仅支持 655）。在某些方面，这就像试图从 '67 Corvette 中取出化油器并尝试将其安装在 '64 Corvette 中。它们可能很接近，但并不完全相同。

为了在本地 Express 实例上使用 2008 R2 实例，您需要升级或添加新的 SQL Server Express 2008 R2 实例。您甚至可以安装 SQL Server 2012，它将能够使用 2005、2008、2008 R2 和 2012 的数据库。

[下载 SQL Server 2008 R2 Express](http://www.microsoft.com/en-us/download/details.aspx?id=30438)

[下载 SQL Server 2012 速成版](http://www.microsoft.com/en-us/download/details.aspx?id=35579)

# php - Magento：在 list.phtml 中添加 +/- 数量增量按钮

> ID：15688903
> 
> 赞同：-1
> 
> 时间：2013-03-28T17:56:49.160
> 
> 标签：php, jquery, magento, button, increment

我在我的产品列表视图页面中添加了一些数量增量按钮，我已将代码添加到 list.phtml - +/- 按钮和数量字段显示，但我只需将其与“添加到”链接购物车”按钮，因为此时如果您点击“添加到购物车”，它仍然只会添加 1 个产品。有人可以告诉我如何做到这一点吗？

这是PHP：

```
<div class="quantity">
<input type="text" name="qty" id="qty" maxlength="12" value="<?php echo  $this->getMinimalQty($_product) ?>" title="<?php echo $this->__('Qty') ?>"  class="input-text qty"/>
</div> <!-- /.quantity -->
<p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span>  <span><?php echo $this->__('Add to Cart') ?></span></span>
</button></p> 
```

这是javascript：

```
<script type ="text/javascript">
jQuery("div.quantity").append('<input type="button" value="+" id="add1" class="plus"   />').prepend('<input type="button" value="-" id="minus1" class="minus" />');
    jQuery(".plus").click(function()
    {
        var currentVal = parseInt(jQuery(this).prev(".qty").val());

        if (!currentVal || currentVal=="" || currentVal == "NaN") currentVal = 0;

        jQuery(this).prev(".qty").val(currentVal + 1);
    });

    jQuery(".minus").click(function()
    {
        var currentVal = parseInt(jQuery(this).next(".qty").val());
        if (currentVal == "NaN") currentVal = 0;
        if (currentVal > 0)
        {
            jQuery(this).next(".qty").val(currentVal - 1);
        }
    });
    </script> 
```

我只需要知道如何让脚本和“添加到购物车”按钮相互交谈，这样当您按下数量增加按钮并单击“添加到购物车”时，它将添加数量内指示的产品数量字段到购物车。

[http://www.onlineshopz.co.uk/demo1/index.php/starters/meat.html](http://www.onlineshopz.co.uk/demo1/index.php/starters/meat.html)这是有它的网站，jQuery按钮添加和删除数量框中的产品，但是当你点击'添加到购物车'它仍然只将一种产品添加到购物车中。我需要获取添加到购物车按钮以识别数量框中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:30:11.580

You need to wrap your jQuery in a document ready

```
<script type ="text/javascript">
jQuery(document).ready(function() {
    // js here
});
</script> 
```

# android - 通过kvm可序列化从soap对象中检索数据并存储在数组中

> ID：15688914
> 
> 赞同：0
> 
> 时间：2013-03-28T17:57:36.523
> 
> 标签：android, web-services, serializable, ksoap

我在 php 中有一个 Web 服务，它从数据库中检索数据，我在我的 android 应用程序中使用这个 Web 服务。问题是我需要在另一个 android 活动中检索到的数据，我尝试使用 for 循环从可序列化的 kvm 中检索数据并将其保存在数组中，然后使用意图将数组发送到另一个活动。我遇到以下问题

```
03-28 17:48:37.629: E/AndroidRuntime(956): FATAL EXCEPTION: main
03-28 17:48:37.629: E/AndroidRuntime(956): java.lang.ClassCastException: org.ksoap2.serialization.SoapPrimitive cannot be cast to java.lang.String
03-28 17:48:37.629: E/AndroidRuntime(956):  at com.example.testwebser.MainActivity$1.onClick(MainActivity.java:87)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.view.View.performClick(View.java:4204)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.view.View$PerformClick.run(View.java:17355)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.os.Handler.handleCallback(Handler.java:725)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.os.Looper.loop(Looper.java:137)
03-28 17:48:37.629: E/AndroidRuntime(956):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-28 17:48:37.629: E/AndroidRuntime(956):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 17:48:37.629: E/AndroidRuntime(956):  at java.lang.reflect.Method.invoke(Method.java:511)
03-28 17:48:37.629: E/AndroidRuntime(956):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-28 17:48:37.629: E/AndroidRuntime(956):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-28 17:48:37.629: E/AndroidRuntime(956):  at dalvik.system.NativeStart.main(Native Method) 
```

它在第 87 行给了我错误，即

```
myArr[i]= (String) ks.getProperty(i); 
```

这是我主要活动的一部分尝试{

```
 androidHttpTransport.call(SOAP_ACTION, envelope);
                System.out.println("response: " + androidHttpTransport.responseDump);
                SoapObject result = (SoapObject)envelope.getResponse();

                KvmSerializable ks = (KvmSerializable)envelope.getResponse();
                if(result!=null){

                    String[] myArr=new String[7];
                    for(int i=0;i<ks.getPropertyCount();i++)
                    {

                      myArr[i]= (String) ks.getProperty(i);

                    }
                    Intent intent = new Intent(MainActivity.this, View_menu.class);
                    intent.putExtra("menu", myArr);
                    startActivity(intent);
                } 
```

我不知道如何检索数据。请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:58:26.127

我已经能够通过在我的主要活动中使用下面的代码来解决它

```
Bundle basket = new Bundle();
                basket.putString("mname",mname);
                basket.putString("mdesc", mdesc);
                basket.putString("mprice", mprice);
                basket.putString("mtime", mtime);
                basket.putString("mavail", mavail);
                basket.putString("mpromo", mpromo);
                Intent goToViewMenu = new Intent(MainActivity.this, View_menu.class);
                goToViewMenu.putExtras(basket);
                startActivity(goToViewMenu); 
```

并在显示类中检索

```
if(bundle !=null)
        {

          String strdata = bundle.getString("mname"); 
          String strdata1 = bundle.getString("mdesc");
         txt_name.setText(strdata);

         }
         else
         {

         }
    } 
```

# c# - 在 winform 中使用 COM 组件时出错

> ID：15688919
> 
> 赞同：2
> 
> 时间：2013-03-28T17:57:58.470
> 
> 标签：c#, winforms, .net-4.0, vlc, libvlc

我正在 c# .net 4 上构建一个 Winform 应用程序。我正在尝试使用 VLC 插件作为工具箱 COM 组件。组件已成功添加到工具箱中。但是，当我使用它时，会出现错误：

> 未能创建组件“AxHost”。错误消息如下：'System.Runtime.InteropServices.COMException (0x80029C4A)：加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A（TYPE_E_CANTLOADLIBRARY）

我在 32 位系统上尝试了同样的方法，它工作正常。此错误出现在 64 位系统中。尝试将构建更改为 32 位和 64 位。

我还尝试使用 regserv32 注册 DLL。但我不确定我是否注册了正确的 DLL。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T04:54:35.170

VLC 2.x 版对托管代码不友好，除非它被重新编译为共享并作为可执行服务器运行（以及其他问题）。与其重新构建插件，不如使用稍旧的插件。

1.  在此处下载 V 1.1.9：http: [//download.videolan.org/pub/videolan/vlc/1.1.9/win32/](http://download.videolan.org/pub/videolan/vlc/1.1.9/win32/)
2.  我建议卸载现有的 VLC，然后安装上面的 VLC（使用 activeX 选项）。
3.  使用 CMD 和 Regsvr32 以及 activeX 文件夹注册控件 (AXVLC.DLL)，例如：REGSVR32 C:\WINDOWS\AXVLC.DLL

要记住的一些提示：

1.  如果出现播放错误，您可能无法访问这些库。它们位于插件文件夹中。我相信您可以将文件夹复制到 activeX 文件夹。
2.  我听说您还需要将 libVLC.dll 复制到同一个文件夹中。
3.  您需要先将媒体文件添加到播放列表，然后才能播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T15:26:49.047

发现这个旧线程现在是 2018 年 5 月，我仍然遇到了这个问题。原来，因为我安装了 64 位版本的 VLC，所以它不起作用。需要安装 32 位版本 3.02 和 activex 才能工作。

# php - CSS文件被忽略？

> ID：15688924
> 
> 赞同：0
> 
> 时间：2013-03-28T17:58:08.343
> 
> 标签：php, html, mod-rewrite

我的网站上有一个这样设置的联系页面；

**联系人.php**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="webpage.css">
        <?php include 'header.php'; ?>
    </head>
...rest of content 
```

我最近设置了一个带有一些 mod_rewrite 更改的 htaccess 页面。

所以现在，我有像这样的网址

```
www.example.com/user 
```

和

```
www.example.com/user/contact 
```

当我查看`www.example.com/user/contact`CSS 无法识别并且页面不打印我的任何 div 而只是一些文字内容时。

所以如果我有

```
<div id="userinfo">
    User info
</div> 
```

它只是在页面左侧显示“用户信息”，而不识别 div。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:03:03.277

使用从以下开始的绝对 URL `/`：

```
<link rel="stylesheet" href="/webpage.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:03:57.777

CSS 中的`href`是相对链接。因此，对于 www.example.com/user，浏览器将在 www.example.com/webpage.css 请求 css 文件，但对于 www.example.com/user/contact ，它将请求**www.example.com/user/webpage** .css

这可能会导致您的部分问题，并且可以通过在您的 href 前面加上 / 来解决，因此`href="/webpage.css"`. / 将导致浏览器始终从您的域的根请求，因此无论您在哪个页面上，它都会始终请求 www.example.com/webpage.css。如果您的 css 位于 DocumentRoot 中的某个文件夹中（我假设您在这里使用的是 Apache），您应该从文档根目录的开头提供文件的完整路径，因此可能类似于`href="/css/webpage.css"`

在评论中，迈克尔也是正确的，您可能有重写规则错误，因此请将该信息添加到您的问题中。

# java - 在java中捕获异常以使应用程序继续执行

> ID：15688926
> 
> 赞同：2
> 
> 时间：2013-03-28T17:58:10.933
> 
> 标签：java, exception, try-catch, throwable

这就是我现在拥有的，这个方法打开是与http url的连接，

```
public static void setCameraList(String list) {
        URL calculator;
        try {   
    String url = "http://example.com/index.php?cameraList=" +URLEncoder.encode(list, "ISO-8859-1");
            calculator = new URL(url);
            URLConnection calcConnection = calculator.openConnection();
             BufferedReader streamReader = new BufferedReader(new InputStreamReader(calcConnection.getInputStream()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (Exception e) {
                    e.printStackTrace();
        }
    } 
```

这项工作很好，但有时当 url 无法访问或返回一些错误代码时，这`method`似乎会使整个应用程序崩溃。

我很好奇的是，为什么这种方法无法捕获`Exception`？

另外，如果我添加这个：

```
 catch(Throwable th){

            } 
```

这`method` `catch`是否`error/exception`与我在其中执行的操作有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:01:36.383

我不是 Java 专家，但您应该考虑到异常和错误之间的区别。你看过[这里](https://stackoverflow.com/questions/912334/differences-betweeen-exception-and-error)吗？

你可以发布堆栈跟踪吗？谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:06:28.210

如果你添加这个： 你的方法抛出的`catch(Throwable th){ }`每一个**异常**都将被捕获。为了正确解决您的问题，您必须注意当您描述的问题发生时抛出什么类型的异常！

# objective-c - QuickDialog 代码行/检测值更改

> ID：15688928
> 
> 赞同：1
> 
> 时间：2013-03-28T17:58:11.733
> 
> 标签：objective-c, xcode, quickdialog

我正在使用 QuickDialog OpenSource，但我不确定如何检测每个 QElement 单元（如 QPickerElement）的值何时发生变化。

我查看了这些示例，它们有：

```
__weak QPickerElement *_sysPicker = self.systemPicker;

        _sysPicker.onValueChanged = ^(QRootElement *el){
            NSLog(@"Selected ASSAFindexes: %@", [_sysPicker.selectedIndexes componentsJoinedByString:@","]);
        }; 
```

我不确定为什么它会在 sysPicker 值更改时执行。我将把这行代码放在哪里？有没有其他方法可以检测变化，这看起来很奇怪。

谢谢，艾伦

# iis - 无法从程序集“System.ServiceModel”加载类型“System.ServiceModel.Activation.HttpModule”

> ID：15688930
> 
> 赞同：91
> 
> 时间：2013-03-28T17:58:17.367
> 
> 标签：iis, service, svc

我在 IIS 中运行我的 Web 项目。

它是一个4.0框架的APP。

我有一个 Service.svc，运行应用程序时出现此错误。

> “无法从程序集 'System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 加载类型 'System.ServiceModel.Activation.HttpModule'”

我尝试了这个-> aspnet_regiis.exe -iru，我在很多论坛中都找到了它，但它并没有解决我的问题。

有谁知道另一种方法？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-07-24T07:58:29.133

尝试

```
c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -iru 
```

当 .NET Framework 的多个版本在单台计算机上并行执行时，映射到 ASP.NET 应用程序的 ASP.NET ISAPI 版本决定了该应用程序使用哪个版本的公共语言运行时 (CLR)。

上述命令将安装与 Aspnet_regiis.exe 关联的 ASP.NET 版本，并且只在 IIS 中注册 ASP.NET。

[https://support.microsoft.com/en-us/help/2015129/error-message-after-you-install-the--net-framework-4-0-could-not-load](https://support.microsoft.com/en-us/help/2015129/error-message-after-you-install-the--net-framework-4-0-could-not-load)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-04-30T16:01:11.253

我的机器上安装了 Windows 8，aspnet_regiis.exe 工具也对我不起作用。

对我有用的解决方案发布在此链接上，Neha 的回答：[System.ServiceModel.Activation.HttpModule 错误](https://stackoverflow.com/questions/4374639/system-servicemodel-activation-httpmodule-error/15523900#15523900)

> 到处都提到此解决方案的问题是使用 aspnet_regiis.exe 重新注册 aspNet。但这对我不起作用。
> 
> 虽然这是一个有效的解决方案（如此处精美解释）
> 
> 但它不适用于 Windows 8。
> 
> 对于 Windows 8，您需要 Windows 功能并启用“.Net Framework 3.5”和“.Net Framework 4.5 Advanced Services”下的所有内容。
> 
> 谢谢内哈

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-11-19T15:13:46.397

您好，感谢您的提问；要解决：“无法从程序集 'System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 加载类型 'System.ServiceModel.Activation.HttpModule'”

在 Windows 功能中检查所有 .NET 4 高级服务和 .NET 3.5

![在此处输入图像描述](../Images/44bb79d1fda32a8eb5d3a29c3416d249.png)

就像 Nicolas Gago 我试过 aspnet_regiis.exe -iru 但它没有用。功能开启后，黄屏错误消失了。谢谢;

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-05T09:13:05.677

您可以使用以下命令在带有 powershell 的 windows server 2012 上安装这些功能：

```
Install-WindowsFeature -Name  NET-Framework-Features -IncludeAllSubFeature
Install-WindowsFeature -Name  NET-WCF-HTTP-Activation45 -IncludeAllSubFeature 
```

您可以使用以下命令获取功能列表：

```
Get-WindowsFeature | Format-Table 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-11T12:55:51.340

好的，终于明白了。

更改此行`%windir%\System32\inetsrv\Config\ApplicationHost.config`

```
<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" /> 
```

到

```
<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler,runtimeVersionv2.0" /> 
```

如果这还不够

将以下行添加到 Web.config

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-09T13:31:03.807

从服务器管理器的功能节点中，您还可以删除 .NET Framework 3.5.1 功能下的一些子项，这些子项是通过激活其他一些角色来安装的。

例如，删除 WCF 激活功能如下，我们的网站又回来了：

*   [x] .NET Framework 3.5.1 功能
*   *   [x] .NET 框架 3.5.1
    *   [] WCF 激活
        *   [ ] HTTP 激活
        *   [ ] 非 HTTP 激活

注意：这不需要我们重新启动。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-12T22:01:16.187

在 Windows server 2012 中。转到 ISS -> 模块 -> 删除 ServiceModel3-0。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-20T17:07:46.383

细节

[http://msdn.microsoft.com/en-us/library/hh169179(v=nav.71).aspx](http://msdn.microsoft.com/en-us/library/hh169179%28v=nav.71%29.aspx)

“当运行 IIS 的计算机上有多个版本的 .NET Framework 时，可能会发生此错误...”

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-17T15:17:41.700

在我不小心将一个网站发布到另一个网站的目录后，我收到了这个错误。这两个网站有不同版本的 .net。为我解决的问题是更改应用程序池。为此，在 IIS 管理器中：

单击网站=>高级设置...（右侧）=>单击应用程序池右侧=>应出现带有“...”的按钮=>选择“.NET v4.5 Classic”

如果该应用程序池不起作用，请尝试其他一些。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-04T17:21:50.900

我们在网站旁边使用网络服务，当我们发布网站时，它返回相同的此错误。我们发现，通过进入 IIS 并从 Modules 中删除 ServiceModel 并从 Handler Mappings 中删除 svc-Integrated，错误就消失了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-02T15:15:18.473

我迟到了，希望对某人有所帮助....这是 IIS 8.0 的一个已知问题

> 解决方案是从 IIS 管理器中删除 3.x 模块和处理程序。如果要将它们保留在 applicationHost.config 中，可以在应用程序或站点级别删除它们。但我想从 applicationHost.config 中删除它们。执行以下步骤：
> 
> 在 IIS 管理器中，单击机器名称节点。在“功能视图”中，双击“模块”。找到“ServiceModel”并将其删除。图 1 用于解决 IIS 8 错误：无法加载类型“System.ServiceModel.Activation.HttpModule”</p>
> 
> 回到机器名节点的“Features View”，双击“Handler Mappings”。找到“svc-Integrated”并将其删除。图 2 用于解决 IIS 8 错误：无法加载类型“System.ServiceModel.Activation.HttpModule”</p>

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-15T05:39:55.800

您可能会更改 IIS 功能设置。通过以管理员身份运行（对于 Windows Server 2008）打开命令提示符并运行命令 **C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe 来解决的简单步骤 - iru** 这将设置 ASP.Net 4.0 ，然后通过命令 **iisreset重置 IIS**

参考： https: [//support.plesk.com/hc/en-us/articles/213392249-ASP-website-shows-error-Could-not-load-type-System-ServiceModel-Activation-HttpModule-from-assembly](https://support.plesk.com/hc/en-us/articles/213392249-ASP-website-shows-error-Could-not-load-type-System-ServiceModel-Activation-HttpModule-from-assembly)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-06T11:39:21.210

出现此问题的原因是`Applicationhost.config`Windows Process Activation Service (WAS) 的文件有一些与 .NET Framework 4.0 不兼容的标记。

根据您的环境，您有 4 种解决方法来解决此问题：

*   更新 Applicationhost.config。
*   执行 ASP.NET IIS 注册。
*   打开命名管道激活功能。
*   从 IIS 中删除 ServiceModel 3.0

> **[在解决无法从程序集 System.ServiceModel 加载类型 system.servicemodel.activation.httpmodule 中](https://spgeeks.devoworx.com/could-not-load-type-system-servicemodel/)**检查每个解决方法的详细步骤

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-04T10:12:02.190

删除.Net错误消息中标识的模块，1票反对

在 Windows server 2012 中。转到 ISS -> 模块 -> 删除 ServiceModel3-0。（没有号码为我工作）

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-12-07T02:57:14.943

开始-> 运行-->`c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -iru`

# linux - Linux - 查找字符串并获取下一节

> ID：15688933
> 
> 赞同：0
> 
> 时间：2013-03-28T17:58:26.167
> 
> 标签：linux, sed, awk

如果我有一个像“name”：“tempname”，“department”：“tempdept”这样的字符串，我想搜索“department”的值，即“tempdept”。所以如果“部门”存在，我只需要返回的值。搜索的字符串的长度可能很长。这可以使用 sed/awk，你能帮忙吗？

我尝试了以下方法，但它返回了整个字符串。我在这里寻找部门。

```
echo $data | sed 's/\(\"department\":\)\(.*\"\)/\2/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:00:39.683

一些简单的解决方案：

```
echo "$data" | tr , \\n | awk -F: '$1 ~ /^department$/{ print $2 }' 
```

或者

```
echo "$data" | awk -F: '$1 ~ /^department$/{ print $2 }' RS=, 
```

您的解决方案只需要稍作修改：

```
echo "$data" | tr , \\n | sed -n 's/"department":\(.*\)/\2/p' 
```

或者

```
echo "$data" | tr , \\n | sed -n '/"department":/s///p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:11:39.213

看看这是否适合你：

```
sed -ne '/"department"/{s/^.*"department":"\([^"]*\).*/\1/;p;}' 
```

例子：

```
echo '"name":"tempname","department":"tempdept"' | sed -ne '/"department"/{s/^.*"department":"\([^"]*\).*/\1/;p;}'
tempdept 
```

如果您需要保留双引号，只需在替换期间将它们重新添加：

```
 sed -ne '/"department"/{s/^.*"department":"\([^"]*\).*/"\1"/;p;} 
```

# javascript - jquery点击事件输入

> ID：15688938
> 
> 赞同：4
> 
> 时间：2013-03-28T17:58:47.180
> 
> 标签：javascript, jquery

想象一下：我有多个带有 attr“data-question-id”的 div，在这个 div 中我有一个或多个输入，可能有也可能没有 attr“has-next-question”。请参见下面的示例：

```
<div data-question-id="5">
<input type="radio" has-next-question="true" value="2"> test1
<input type="radio" value="3"> test2
</div>

<div data-question-id="6">
<input type="radio" has-next-question="true" value="5"> test3
<input type="radio" has-next-question="true" value="7"> test4
</div> 
```

正如您在第一个 div 中看到的那样，我有两个输入，但一个没有 attr“has-next-question”。我的问题是，我如何在输入上绑定一个单击事件，该输入具有一个带有 attr“data-question-id”的父 div，并且这个 div 至少有一个带有 attr“has-next-question”的输入。

我已经做到了：

```
$(document).on('click', 'div[data-question-id] input', function(e) {
          alert('click');
}); 
```

有什么帮助吗？多谢你们

编辑：更改了 attr “has-next-question”，因为它是无效的 html 属性。

想象一下：如果我点击“test1”它应该触发事件，但是如果我点击“test2”它也应该触发事件，因为带有 attr “data-question-id”的父 div 至少有一个带有 attr “has -next-question”，对应于“test1”。如果父 div 中没有带有 attr“has-next-question”的输入，则不应触发该事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:02:20.653

你这样做是为了`div`，所以重复它。

```
div[data-question-id] input[has-next-question] 
```

[**演示**](http://jsfiddle.net/Fxs3c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:02:39.607

只需扩展您的选择器：

```
$(document).on('click', "div[data-question-id] input[has-next-question='true']", function(e) {
          alert('click');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:03:04.973

它不正确的html。`has-next-question`不是有效的属性。

但这应该工作，

```
$(document).on('click', 'div[data-question-id] input[has-next-question]', function(e) {
          alert('click');
}); 
```

***编辑：（更改原始问题后），***

不，您不能从中制作选择器。jQuery 使用 CSS 选择器，它们不能从子级到父级。

但是，你可以做这样的事情，

```
$(document).on('click', 'div[data-question-id] input', function(e) {
       if($(this).parent().find('[has-next-question]').length === 0 ) return;

       // Other code which needs to be executed.
}); 
```

即如果父级没有具有`[has-next-question]`属性的子级，则从函数中出来。

# css - 覆盖在 iPad 上显示为链接的非链接电话号码？

> ID：15688949
> 
> 赞同：1
> 
> 时间：2013-03-28T17:59:17.677
> 
> 标签：css, ipad

我得到了一个平板电脑版网站的电话号码，该号码仅在 iPad 中显示为链接。它没有被标记为链接，因为这在平板电脑上会很奇怪，但我猜苹果默认所有电话号码都是链接？

我已经尝试在 CSS 中专门针对这个元素来删除下划线并更改字体颜色，但似乎没有任何效果。

我怎样才能解决这个问题？它看起来超级难看，就像页面上带有蓝色下划线的大电话号码一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:49:28.450

要删除电话号码的自动格式，请将以下标记添加到 HTML 文档的 HEAD：

`<meta name="format-detection" content="telephone=no">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:11:57.300

找到解决方案 - 因为我没有针对我的 CSS 中的任何链接，并且 Apple 设备在电话号码周围添加 < a > 标签，所以我只是在父 div 中添加了一个新的 CSS 属性，以 < a > 标签为目标，因此它们不会显示为链接.

# c# - 如何从 MembershipProvider 类中获取请求的 url？

> ID：15688950
> 
> 赞同：0
> 
> 时间：2013-03-28T17:59:19.150
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-membership

我目前正在尝试实现 MembershipProvider 类，但我的用户存储库对于我在网上找到的大多数示例并不典型。我们不需要检索用户，而是简单地根据请求 URL 的身份验证服务器检查用户的身份：

*   用户尝试“发布”到`ws.example.com/jobA`
*   属性使用身份验证服务器验证用户，以查看他们是否有权访问此操作/url
*   拒绝或接受请求

其他几篇文章为我指出了实现自定义会员提供程序的方向。我想它的方式，为了使这项工作，我需要能够看到请求的 URL 是什么，并且能够查看他们的 cookie。在过滤器中，我可以访问 HttpRequestMessage。在这种情况下，我如何获得我需要的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-09T18:38:47.807

[尽管此线程不是专门关于 SharePoint 成员资格提供程序的，但我将把此解决方案留在这里，因为我在其他任何地方都找不到它，并且在 Google 上寻找解决方案时一直被重定向到此线程。我希望它可以帮助某人]

对于 SharePoint 成员资格提供程序，我们有安全令牌服务，它是一个 WCF 服务。在这种情况下，System.Web.HttpContext.Current 始终为 null，但您可以使用此属性获取实际的请求 URL：

```
 System.ServiceModel.OperationContext.Current.RequestContext 
```

# android - 结合jackson objectmapper和流解析

> ID：15688951
> 
> 赞同：2
> 
> 时间：2013-03-28T17:59:22.267
> 
> 标签：android, performance

我有一个 android 应用程序，其中解析一个 json 块大约需要 250 毫秒。它包含一个数组，我只需要立即可用的前 6-7 个值。我真的需要加快获取这些数据的速度。

我有一个基本上看起来像这样的数据结构：

```
class Data {
    List<Map> data = objectmapper_readvalue_data;

    public HashMap getItem(int i) {
        return data.get(i);
    }
} 
```

我真的希望用 JsonParser 做这样的事情：class Data { List data = new List(); JsonParser p;

```
 public HashMap getItem(int i) {
        while (data.length < i) {
            data.append(p.parseOneBlockOfData());
        }
        return data.get(i);
    }
} 
```

在第一次渲染时只会解析前 5-6 个值，其他的我可以稍后处理。但是，我缺少“parseOneBlockOfData”函数。当然，我可以使用 StringBuilder 来缓冲解析中的每个值，直到找到下一个完整块，然后使用 objectParser 之类的，但我不确定性能会如何。

有没有任何非黑客的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:30:47.653

万一有人用谷歌搜索这个：

```
JsonParser parser = objectMapper.getFactory().createJsonParser(inputStream);

// Keep going until we find filters:
String fieldName = null;
JsonToken token = null;
while (!"filters".equals(fieldName)) {
    token = parser.nextToken();
    while (token != JsonToken.START_ARRAY) {
        token = parser.nextToken();
    }
    fieldName = parser.getCurrentName();
}
// We're at the filters node

while (parser.nextToken() == JsonToken.START_OBJECT) {
    Map x = objectMapper.readValue(parser, Map.class);
} 
```

# php - 缓存 PHP 脚本生成的图像

> ID：15688953
> 
> 赞同：1
> 
> 时间：2013-03-28T17:59:37.317
> 
> 标签：php, image, caching, browser-cache

好吧，如标题所示，我想在用户的浏览器上缓存我的 php 脚本生成的资源。我想这样做是因为我想动态地为来自服务器端的一些图像提供缩略图。我有这个`.htaccess`文件，里面有这些内容。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ index.php?image_id=$1 [QSA,L] 
```

index.php 文件包含这些代码。

```
<?php

      header('Last-Modified: ' .gmdate('D, d M Y H:i:s',time()-3600) . ' GMT');

$image_id=$_GET['image_id'];
$chunk=  explode("/", $image_id);
$destination_height=$chunk[0];
$destination_width=$chunk[1];
$image=$chunk[2];
if(file_exists($image))
{
$extension=explode(".",$image);
$extension=end($extension);
switch ($extension) {
    case "jpg":
        $source_image=  imagecreatefromjpeg($image);
        break;
case "jpeg":
        $source_image=  imagecreatefromjpeg($image);
        break;
    case "gif":
        $source_image=  imagecreatefromgif($image);
        break;
    case "png":
        $source_image=  imagecreatefrompng($image);
        break;    
    default:
        break;
}
        $source_height = imagesy($source_image);
        $source_width = imagesx($source_image);
        if($destination_height=="full")
        {
            $destination_height=$source_height;
        }
        if($destination_width=="full")
        {
            $destination_width=$source_width;
        }
        $destination_image=  imagecreatetruecolor($destination_width, $destination_height);
  $dst_x=0;
     $dst_y=0;
     $src_x=0;
  $src_y=0;
  imagecopyresized($destination_image,$source_image,$dst_x,$dst_y,$src_x,$src_y,$destination_width,$destination_height,$source_width,$source_height);
switch ($extension) {
    case "jpg":
   imagejpeg($destination_image);
   header("content-type:image/jpeg");
        break;
  case "jpeg":
   header("content-type:image/jpeg");
   imagejpeg($destination_image);
        break;
    case "gif":
   header("content-type:image/gif");
   imagegif($destination_image);
        break;
    case "png":
   header("content-type:image/png");
   imagepng($destination_image);
        break;
    default:
    break;
}
}
?> 
```

即使在此之后，当我进入开发者模式并在谷歌浏览器上看到网络选项卡时，状态信息是：200 OK
可以做些什么来缓存此脚本生成的所有图像？因为对于特定的 url，在这个实现中，内容是永远不会改变的，所以我想缓存图像。任何类型的想法都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:02:44.537

用这个

```
file_put_contents($filename, $imagedata); 
```

它会将图像写入服务器，并且由于您的 htaccess 文件只会在文件不存在时运行图像生成，因此它只会写入文件一次，然后从那时起提供缓存的版本。

# python - 在 CPython 扩展模块中清理静态 python 对象引用的正确方法是什么？

> ID：15688954
> 
> 赞同：0
> 
> 时间：2013-03-28T17:59:38.187
> 
> 标签：python, cpython, python-c-extension

CPython 头文件定义了一个宏来声明一个方法，该方法运行以在导入时初始化您的模块：`PyMODINIT_FUNC`

我的初始化程序创建了对其他 python 对象的引用，当我的模块被卸载时，确保这些对象被正确清理/取消引用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:58:41.720

您根本无法卸载 C 扩展模块。没有办法做到这一点，而且我确信如果有的话，大多数标准扩展模块都会像疯了一样泄漏。

# android - 读取电池电量 - Broadcom BLE 堆栈和 HTC 1x+

> ID：15688960
> 
> 赞同：0
> 
> 时间：2013-03-28T17:59:49.940
> 
> 标签：android, battery, broadcom

我让 BleFindMeClient 与 TI Mini Keyfob 一起在 HTC 1X+ 上工作。我正在尝试稍微扩展它以读取电池电量（不注册电池更新）。我可以从 BTool 做到这一点，但我的 Android prog 失败了，我收到了调试消息：

> getCharacteristic - 未找到服务数据

这是什么意思？我在哪里可以找到此错误消息和其他错误消息的含义？

显然我可以写特征，因为我可以设置警报。**但是关于阅读**特性，我没有掌握一些相当基本的东西，但是我找不到示例代码。

有人可以给我一个更好的代码片段，或者在下面发现一些愚蠢的东西吗？

```
public class BatteryProfileClient extends BleClientProfile {

private static String TAG = "BatteryProfileClient";
static public BleGattID myUuid = new BleGattID("0000180f-0000-1000-8000-00805f9b34fb");
private static final BleGattID BATTERY_CHARACTERISTIC = new BleGattID("00002a19-0000-1000-8000-00805f9b34fb");

private BatteryServiceClient mBatteryServiceClient = new BatteryServiceClient();

public BatteryProfileClient(Context context) {
    super(context, myUuid);

    Log.d(TAG, "Instantiated");

    ArrayList<BleClientService> services = new ArrayList<BleClientService>();
    services.add(mBatteryServiceClient);

    init(services, null);
}

public void batt(BluetoothDevice device) {
    BleCharacteristic battLevelCharacteristic = mBatteryServiceClient.getCharacteristic(device, BATTERY_CHARACTERISTIC);
    byte b[] = battLevelCharacteristic.getValue();
    Log.d(TAG, "battery " + b); 
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T23:17:36.417

不知道我是否迟到了，但这应该可以解决您的问题-

```
public int getbattery(BluetoothGatt mBluetoothGatt) {

    BluetoothGattService batteryService = mBluetoothGatt
            .getService(BATTERY_SERVICE_UUID);
    if (batteryService == null) {
        Log.d(TAG, "Battery service not found!");
        return 0;
    }

    BluetoothGattCharacteristic batteryLevel = batteryService
            .getCharacteristic(BATTERY_LEVEL_UUID);
    if (batteryLevel == null) {
        Log.d(TAG, "Battery level not found!");
        return 0;
    }
    mBluetoothGatt.readCharacteristic(batteryLevel);
    return batteryLevel.getIntValue(BluetoothGattCharacteristic.FORMAT_SINT8, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T14:05:06.670

[访问 https://stackoverflow.com/questions/19539535/how-to-get-the-battery-level-after-connect-to-the-ble-device](https://stackoverflow.com/questions/19539535/how-to-get-the-battery-level-after-connect-to-the-ble-device)

同样的问题使用 BluetoothGattCallback 进行回调并读取电池值

# c++ - 错误：在函数“int main()”中请求从“double”转换为非标量类型“Player”；

> ID：15688961
> 
> 赞同：0
> 
> 时间：2013-03-28T17:59:51.977
> 
> 标签：c++, types, double

我不确定为什么会出现错误，因为我在另一个运行良好的程序中有非常相似的代码。这是我第一次在这个论坛上发帖，所以我不确定要包括什么，但这里是我收到错误的代码。

```
int AddPlayers(vector<Player>& players)
{
    string name;
    double wins;
    double losses;
    double draws;
    int x = 0;
    Player findPlayer("null", 0, 0, 0);
    cout << "Name of player you would like to add?" << endl;
    cin >> name;
    for (x = 0; x < players.size(); x++ )
    {
        findPlayer = players[x];
        findPlayer.getName();
        x++;
        if (name == findPlayer.getName())
        {
            cout << "That player is already in the tournament." << endl;
            return 1;
        }
        Player newPlayer = (name, wins, losses, draws);
        players.push_back(newPlayer);
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:00:59.770

```
Player newPlayer = (name, wins, losses, draws); 
```

这是错误的语法。您正在目睹逗号运算符的实际作用，它实际上是`newPlayer`使用`draws`. 由于`draws`是 a `double`，因此初始化会给您该错误。

看来您想要：

```
Player newPlayer(name, wins, losses, draws); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:03:30.783

```
Player newPlayer = (name, wins, losses, draws); 
```

去掉括号后，你剩下

```
Player newPlayer = name, wins, losses, draws; 
```

现在这是逗号运算符：它计算其操作数并返回最后一个，`draw`在这种情况下。`draw`是 a `double`，显然没有构造函数`Player`需要 a `double`，因此出现错误。无论如何，您想从四个变量中构造一个对象：

```
Player newPlayer(name, wins, losses, draws); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:03:44.860

该指令：

```
Player newPlayer = (name, wins, losses, draws); 
```

尝试`Player`从表达式复制初始化对象`(name, wins, losses, draws)`。由于逗号运算符的语义，前三个子表达式的值被丢弃，只有最后一个子表达式决定表达式的值（和类型）。

因此，表达式：

```
(name, wins, losses, draws) 
```

等价于表达式：

```
 (draws) 
```

由于`draws`has type `double`，这实际上是尝试复制初始化`Player`具有 a的类型的对象`double`。由于`Player`显然没有构造函数采用 a `double`，因此编译器会生成错误。

你很可能不想在那里写一个表达式，而是一个构造函数的参数列表`Player`：

```
 Player newPlayer(name, wins, losses, draws); 
```

# ruby - 方法=具有多个参数

> ID：15688965
> 
> 赞同：2
> 
> 时间：2013-03-28T18:00:01.387
> 
> 标签：ruby

如果我有一个末尾带有等号的方法：

```
class A
  def property= name, value
    ...
  end
end 
```

如何调用该方法`property=`并将参数传递给它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:27:18.827

Ruby 已经为键值对提供了一种特殊的 setter 语法。您可以看到它与 Hash 一起使用：

```
phone_numbers = { Bob: "555-555-1234", Francine: "555-555-5678"}
phone_numbers[:Jenny] = "555-867-5309" 
```

要为您自己的课程获取此语法，您只需执行

```
def []=(key, value)
  # set the value however you like
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:36:56.990

这是我最终得到的结果（感谢@LeeJarvis 的评论）：

```
class A
  def property= value
    x, y = value
    p [x, y]
  end
end

A.new.property = 1, 2 
```

# android - 跟踪应用程序启动

> ID：15688966
> 
> 赞同：0
> 
> 时间：2013-03-28T18:00:03.497
> 
> 标签：android, broadcastreceiver, intentfilter

是否可以使用 BroadcastReceiver 检查设备上正在运行的应用程序？阅读不同的来源，它说你不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:07:52.057

在设备上启动应用程序时没有广播。

充其量，您可以继续轮询最近的应用程序以列出用户正在使用的应用程序。在旧版本的 Android 上，您可以尝试从 ActivityManager 解析 Logcat 输出。

# powershell - 为什么我不能从 PSModulePath 中的目录加载我的模块？

> ID：15688968
> 
> 赞同：2
> 
> 时间：2013-03-28T18:00:05.537
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我正在尝试安装一个 PS 模块，以便可以从任何地方导入它。我已将我的安装目录添加到环境变量中，但它不起作用，所以我尝试将我的模块放在 PSCX 目录中，因为我知道它可以工作。下面是演示该问题的命令行历史记录。为什么“import-module foo”在这里不起作用？

```
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> $env:PSModulePath
C:\Users\chris\Documents\WindowsPowerShell\Modules;C:\Program Files (x86)\PowerShell     Community Extensions\Pscx3\;C:\windows\system32\WindowsPowerShell\v1.0\Modules\

# There's my module; foo.psm1
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> dir *.psm1

    Directory: C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx

Mode           LastWriteTime       Length Name
----           -------------       ------ ----
-a---     3/28/2013 10:37 AM           44 foo.psm1
-a---    10/20/2012  8:52 PM        19658 Pscx.psm1

# this works, as expected, so my PSModulePath seems correct.
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> import-module -force pscx

# I expect this to work since the module is in a PSModulePath directory... but it doesn't
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> import-module foo
import-module : The specified module 'foo' was not loaded because no valid module file was found in any module directory.
At line:1 char:1
+ import-module foo
+ ~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ResourceUnavailable: (foo:String) [Import-Module], FileNotFoundException
    + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

# Try again with the extension... nope.
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> import-module foo.psm1
import-module : The specified module 'foo.psm1' was not loaded because no valid module file was found in any module directory.
At line:1 char:1
+ import-module foo.psm1
+ ~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ResourceUnavailable: (foo.psm1:String) [Import-Module], FileNotFoundException
    + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

# I can import the module if I give the path
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\Pscx> import-module ./foo.psm1 -verbose:$true
VERBOSE: Importing function 'fooobar'. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:26:48.313

您需要`foo`在此级别创建文件夹：

```
C:\Program Files (x86)\PowerShell Community Extensions\pscx3\foo 
```

并将您的`foo.ps1`文件放在那里。

然后你可以打电话

```
import-module foo 
```

# itext - itext JavaScript 版本

> ID：15688969
> 
> 赞同：4
> 
> 时间：2013-03-28T18:00:07.157
> 
> 标签：itext

第一次在这里发帖，虽然我从 stackoverflow 上的其他帖子中受益很多。我是[Jmol](http://jmol.sourceforge.net)的主要开发人员，我最近将其移植到[JavaScript/HTML5](http://chemapps.stolaf.edu/jmol/jsmol/jsmol.htm)。Jmol 小程序与另一个小程序[JSpecView](http://chemapps.stolaf.edu/jmol/jspecview/jsvtest.htm)接口，在其当前形式作为 Java 小程序使用 itext.1.4.5.jar 的精简版本来创建光谱的 PDF 文件。

我有兴趣将 iTtext Java 代码转换为 JavaScript，以便 JSpecView 小程序的 JavaScript 版本可以直接创建 PDF 文件。

问：这已经实现了吗？

问：JSpecView 是一个获得 LGPL 许可的开源项目。我们所有的源代码都是可用的。这是一个问题吗？

Bob Hanson 首席开发人员，Jmol/JSmol

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:31:12.230

A：我认为以前没有做过这样的移植。但是你为什么不使用现有的 JavaScript pdf 库呢？或者在服务器端生成 PDF 有什么问题？为什么你会做比必要的更多的工作？我在 JS PDF 库上快速搜索了一下，发现：

[http://jspdf.com/](http://jspdf.com/)

[https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

以及以下stackoverflow问题：

[使用 Javascript 生成 PDF 文件](https://stackoverflow.com/questions/742271/generating-pdf-files-with-javascript)

答：我认为将它移植到 JavaScript 应该没有问题，因为您将移植到相同的许可证（当然，如果您在许可证切换到 AGPL 之前使用的是 iText 版本），但是 IANAL。

# php - 在函数内使用时 CURL 不起作用

> ID：15688973
> 
> 赞同：3
> 
> 时间：2013-03-28T18:00:28.160
> 
> 标签：php, curl

我正在尝试使用以下代码执行 curl。

```
mainFunction{
  .
  .
  $url = strtolower($request->get('url', NULL));
  $html_output= $this->startURLCheck($url);
  .
  .
}

function startURLCheck($url)
{
 $ch = curl_init();
 curl_setopt($ch,CURLOPT_URL,$url);
 curl_setopt($ch, CURLOPT_HEADER, false);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
 curl_setopt($ch, CURLOPT_TIMEOUT, 30);
 $html_output = curl_exec($ch);
} 
```

当我直接给出字符串 URL 时，这工作正常。但是后来我通过一个函数 curl 没有执行字符串数据。curl_error 也没有显示错误。我为字符串尝试了许多编码和解码方法，结果相同。我做错了吗？我在 Windows 上使用 XAMPP 服务器。

在从另一个函数中的 HTML 发布请求获取 URL 后，我将 URL 传递给该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:41:41.583

问题是您的函数 startURLCheck 实际上并没有返回一个值供主程序使用。更改最后一行：

```
function startURLCheck($url)
{
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    return curl_exec($ch);
} 
```

在您的调用代码中，取出“$this->”

```
$html_output = startURLCheck($url); 
```

$html_output 现在包含 curl 调用的结果。

我假设您从某个地方复制并粘贴了此代码，因为您的“mainFunction”声明在语法上不正确，并且您使用了“$this->”而没有指定 startURLCheck 是一个对象的方法。

如果实际上您希望 startURLCheck 成为对象方法，并且希望它在对象上设置 $html_output，请执行以下操作：

```
<?php

class Example {
    private $html_output;

    function mainFunction()
    { 
        $url='http://www.ebay.com/itm/Apple-iPhone-5-16GB-Black-Slate-Cricket-intl-UNLOCKED-pleeze-read-ad-/251252227033';
        $this->startURLCheck($url);
        echo "HTML output: " . $this->html_output;
    }

    function startURLCheck($url)
    {
        $ch = curl_init();
        curl_setopt($ch,CURLOPT_URL,$url);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30);
        $this->html_output = curl_exec($ch);
    }
}

$example = new Example();
$example->mainFunction(); 
```

我已经在命令行（不在网页中）测试了这段代码。如果您将其复制并粘贴到文件中并使用 php -r 运行它，您将看到结果。（请注意，我没有包含结束 ?> 标记。当文件仅包含 PHP 代码而没有 HTML 时，结束标记是可选的。事实上，在这种情况下建议省略结束标记。参见[http:// /php.net/manual/en/language.basic-syntax.instruction-separation.php](http://php.net/manual/en/language.basic-syntax.instruction-separation.php) )

另请注意，在您的 mainFunction 问题代码中，您的 URL 中“pleeeze”之前有非法空格，并且您在 $url 分配末尾缺少分号。

希望这可以帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:23:47.933

这很好用。

```
<?php
function excURL()
{
 $ch = curl_init();
 $url = "http://www.google.com";
 curl_setopt($ch,CURLOPT_URL,$url);
 curl_setopt($ch, CURLOPT_HEADER, false);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
 curl_setopt($ch, CURLOPT_TIMEOUT, 30);
 $html_output = curl_exec($ch);
 echo $html_output;
}

excURL();

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:31:17.963

嘿伙计们，我发现了问题..终于..

当我为 curl 设置 CURLOPT_FOLLOWLOCATION 时，这工作正常......

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

但是仍然不清楚为什么当我在函数内硬编码 URL 时它起作用，而当我将 url 作为变量传递给函数时它不起作用，而没有设置 CURLOPT_FOLLOWLOCATION ...当我设置这个选项时，它在两种方式下都起作用。 .

# java - 在 Camel 路由中访问 HTTPSession

> ID：15688977
> 
> 赞同：2
> 
> 时间：2013-03-28T18:00:37.287
> 
> 标签：java, apache, apache-camel

是否可以在骆驼路线中访问当前的 HTTPSession？
我想访问用户名和会话 ID 等并将其传递给某个队列。
为我的应用程序使用 Tomcat Web 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:34:00.467

是的，这是可能的。

如果你有一个带有 servlet 组件的 Camel 路由，那么你可以访问 HttpSession 实例。

此页面上有一些详细信息： http: [//camel.apache.org/jetty.html](http://camel.apache.org/jetty.html)，在*会话支持*部分。这个例子也应该适用于 servlet 组件。

我们在这里有一个 servlet 示例：http: [//camel.apache.org/servlet-tomcat-example.html](http://camel.apache.org/servlet-tomcat-example.html) 您可以在此处进行访问。

# scala - 如何在 JUNG2 中以 Scala 和 Ints 作为顶点实例化 Transformer？

> ID：15688979
> 
> 赞同：1
> 
> 时间：2013-03-28T18:00:41.770
> 
> 标签：scala, jung

我正在尝试使用[JUNG2](http://jung.sourceforge.net/)`Transformer`在可视化中创建自己的节点形状和大小。

但是，我一直遇到打字问题。我将问题缩小到以下示例。

`PluggableRenderContext` [在 JUNG](http://jung.sourceforge.net/site/jung-visualization/xref/edu/uci/ics/jung/visualization/PluggableRenderContext.html)中对 进行了简单的实例化`ConstantTransformer`，其中 V 是顶点类型：

```
protected Transformer<V,Shape> vertexShapeTransformer = 
    new ConstantTransformer(
    new Ellipse2D.Float(-10,-10,20,20)); 
```

但是，如果我像这样在 Scala 中进行自己的实例化

```
val vertexShapeTransformer: Transformer[Int, Shape] =
  new ConstantTransformer(new Ellipse2D.Float(-10,-10,20,20)); 
```

我收到一个打字错误：

```
type mismatch;
found: org.apache.commons.collections15.functors.ConstantTransformer[java.awt.geom.Ellipse2D.Float]
required: org.apache.commons.collections15.Transformer[Int,java.awt.Shape]" 
```

据我了解，这些类型在概念上是兼容的：`ConstantTransformer`is-a`Transformer[Object, Shape]`和`Ellipse2D`is-a `Shape`。

我认为这归结为 Scala`Int`不是`Object`. 但是，我无法找到解决此问题的方法，但无法想象库的整个部分会因此变得不可用。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:46:50.987

您可能需要在类型方面给 scala 一些帮助。我不确定这是否可行，但您可以尝试输入`ConstantTransformer`：

```
 val vertexShapeTransformer: Transformer[Int, Shape] =
    new ConstantTransformer[Shape](new Ellipse2D.Float(-10,-10,20,20)) 
```

**更新**

这应该可行，您可以传递给 Transformer 的类型是整数（而不是 Int）：

```
 val vertexShapeTransformer: Transformer[_ >: Integer, Shape] =
    new ConstantTransformer(new Ellipse2D.Float(-10,-10,20,20)) 
```

# php - 如何从php中的字符串获取冒号分隔的值

> ID：15688981
> 
> 赞同：0
> 
> 时间：2013-03-28T18:00:46.507
> 
> 标签：php, regex, preg-match-all

我有一个字符串

```
$style = "font-color:#000;font-weight:bold;background-color:#fff"; 
```

我只需要

```
font-color
font-weight
background-color 
```

我试过了

```
preg_match_all('/(?<names>[a-z\-]+:)/', $style, $matches);

var_dump($matches); 
```

它给了我以下输出

```
array
  0 => 
    array
      0 => string 'font-color:' (length=11)
      1 => string 'font-weight:' (length=12)
      2 => string 'background-color:' (length=17)
  'names' => 
    array
      0 => string 'font-color:' (length=11)
      1 => string 'font-weight:' (length=12)
      2 => string 'background-color:' (length=17)
  1 => 
    array
      0 => string 'font-color:' (length=11)
      1 => string 'font-weight:' (length=12)
      2 => string 'background-color:' (length=17) 
```

此输出存在三个问题 1\. 它是二维或三维数组，我需要一维数组。2.重复信息 3.在每个元素的末尾附加“：”。

我需要一个这样的数组

```
array
0 => 'font-color'
1 => 'font-weight'
2 => 'background-color' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:06:47.070

取出结肠：

```
$style = "font-color:#000;font-weight:bold;background-color:#fff";
preg_match_all('/(?<names>[a-z\-]+):/', $style, $matches);

var_dump($matches['names']); 
```

然后使用`$matches['names']`，因为你命名它，所以你没有多余的信息

# vb.net - Excel VSTO 工作簿。仅在先执行另一个操作时才有效

> ID：15688982
> 
> 赞同：0
> 
> 时间：2013-03-28T18:00:47.267
> 
> 标签：vb.net, excel, vsto, add-in, ribbon

我正在开发 VSTO 加载项。我有一个自定义功能区，在该功能区上有一个名为`TemplateCallButton`. 我还有其他几个功能和按钮，其中一个只是打开一个带有模板的文件夹（作为示例包含在内）。如果其他操作之一已完成，`TemplateCallButton`唯一的工作并添加到模板文件中（似乎无关紧要）。在任何其他操作运行后，它会按预期工作。

更令人沮丧的是，这种行为似乎只发生在我部署的机器上，而不是我正在开发的机器上。这是`TemplateCallButton`代码：

```
Public Class InsightLabProcessor
  Dim MainTemplatePath As String = "C:\Insight\Insight.xltm"
  ....
  Private Sub TemplateCallButton_Click(sender As Object, e As RibbonControlEventArgs) Handles TemplateCallButton.Click
    Dim objApp As Excel.Application
    objApp = Marshal.GetActiveObject("Excel.Application")
    objApp.Visible = True
    Dim objWorkbook As Excel.Workbook = objApp.Workbooks.Open(MainTemplatePath)
    objWorkbook.Worksheets(4).Activate()
  End Sub 
```

这是刚刚打开文件夹的按钮的代码：

```
Private Sub PhaseCodeFolderOpenButton_Click(sender As Object, e As RibbonControlEventArgs) Handles PhaseCodeFolderOpenButton.Click
    Process.Start("explorer.exe", "C:\Insight\Phase Codes")
End Sub 
```

或打开控制表单的一个：

```
Private Sub ControlPannel_Click(sender As Object, e As RibbonControlEventArgs) Handles ControlPannel.Click
    Dim controlpanel As New ControlPanel
    controlpanel.Show()
    controlpanel = Nothing
End Sub 
```

我觉得我一定错过了一些简单的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:01:32.000

所以这个问题实际上是这里解决的问题：http: [//support.microsoft.com/kb/238610](http://support.microsoft.com/kb/238610)，作为一个加载项处理它似乎非常恶毒。我找到的最好的解决方案（同样不是很优雅）是打开命令行，写下我们正在等待第一个实例加载，在任何人太好奇之前关闭它。我在 4 台机器上进行了尝试，根据经验发现我需要的最长等待时间是 250 毫秒，所以我将它加倍到 500：

```
 ...
    Shell("C:\Windows\System32\cmd.exe", AppWinStyle.MaximizedFocus)
    System.Threading.Thread.Sleep(10) 'give cmd just a bit to take the line
    SendKeys.Send("Waiting for Excel to register in Running Object Table")
    System.Threading.Thread.Sleep(490)
    Dim Term() As Process = Process.GetProcessesByName("cmd")
    For Each P As Process In Term
        P.Kill() 'user probably doesn't have any other instances of cmd open, if they do they are colaterial damage, may handle that if it becomes an issue
    Next
    Dim objApp As Excel.Application
    objApp = Marshal.GetActiveObject("Excel.Application")
    objApp.Visible = True
    Dim objWorkbook As Excel.Workbook = objApp.Workbooks.Open(MainTemplatePath)
    objWorkbook.Worksheets(4).Activate() 
```

我会再次回来，除了任何更优雅或最终用户可以接受的东西。我真的很想知道是否有办法强制 Excel 注册到 ROT。也许我应该把它变成另一个问题。

# c++ - 错误 C2440：“=”：无法从“int”转换为“char [5]”

> ID：15688985
> 
> 赞同：1
> 
> 时间：2013-03-28T18:00:51.300
> 
> 标签：c++, c, visual-studio-2008

错误 C2440: '=' : 无法从 'int' 转换为 'char [5]' 帮帮我）

```
 char type[5];
    switch (rec[n-1].recptr->qtype)
    {
        case 'p':type='pcs'; break; //here is problem
        case 'm':type='kgs'; break; // and here is too
        default: printf("incorrect code");break;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T18:02:22.247

首先，字符串用双引号`"`，而不是单引号`'`。其次，要分配给`char[]`数组，您必须使用类似[`strcpy()`](http://linux.die.net/man/3/strcpy). 您不能使用 直接分配给数组`=`。

```
case 'p': strcpy(type, "pcs"); break;
case 'm': strcpy(type, "kgs"); break; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T18:02:36.393

首先，`'pcs'`是一个字符常量，而你想要一个字符串。语法是`"pcs"`.

此外，`type`是一个数组，所以当它不与`sizeof`,`_Alignof`或一元运算符一起使用时`&`，它会衰减为指针，并且它**不是**左值。因此，您不能重新分配`type`.

`strcpy`可能是一个解决方案。

```
#include <string.h>

char type[5];

switch (rec[n-1].recptr->qtype)
{
    case 'p':
        strcpy(type,"pcs"); 
        break;
    case 'm':
        strcpy(type,"kgs"); 
        break;
    default: 
        printf("incorrect code");
        break;
} 
```

或者，使用字符串文字（如果您不修改`type`）：

```
const char *type;
switch (rec[n-1].recptr->qtype)
{
    case 'p':
        type="pcs"; 
        break;
    case 'm':
        type="kgs"; 
        break;
    default: 
        printf("incorrect code");
        break;
} 
```

## 参考

> ### C11 (n1570)，第 6.3.2.1 节左值、数组和函数指示符
> 
> 除非它是运算`sizeof`符、运算符`_Alignof` 或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of type'' 的表达式将转换为类型为 '' 的表达式指向类型''的指针，它指向数组对象的初始元素，不是左值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:03:58.290

`'pcs'`是类型的多字符文字`int`。

`type`是一个数组。您不能将任何内容分配给整个数组`=`。

[从技术上讲，该表达式`type`表现为指向数组第一个元素的不可修改指针，但您不能修改不可修改的值。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:03:49.590

使用 strcpy(type, "pcs") 和 strcpy(type, "kgs") 或 std:string，你不能简单地通过赋值来复制数组中的字符！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T20:37:21.230

如果您可以保持 sizeof(int) 个字符或更少，您可以执行以下操作：

```
int type;
switch (rec[n-1].recptr->qtype)
{
    case 'p':type='pcs'; break; //here is problem
    case 'm':type='kgs'; break; // and here is too
    default: printf("incorrect code");break;
} 
```

上面的代码没有测试，虽然我确实测试过：

```
int main( int argc, char **argv)
{
    int t;
    t = 'abcd';
    printf ("t = %x\n", t);
    t = 'dcba';
    printf ("t = %x\n", t);
}

[347] ~/tmp: ./a.out
t = 61626364
t = 64636261 
```

尽管您在这里不使用 > sizeof(int) 字符，但您确实必须在这里小心。我怀疑每个编译器的实际情况可能会有所不同。使用这种方法可以消除其他答案中出现的所有额外字符串问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T18:05:55.943

请使用 strcpy ，您不能使用 = 分配给 char[5]

```
case 'p': strcpy(type, "pcs"); break; 
```

但是如果你想避免 strcpy （即使在理论上安全的情况下）你也可以这样做：

```
 /* partial copy (only 3 chars): */
  strncpy ( type, "pcs", 3 );
  type[4] = '\0';   /* null character manually added */ 
```

# c# - 通过按钮和列表框从通用列表中删除所选项目

> ID：15688988
> 
> 赞同：1
> 
> 时间：2013-03-28T18:00:54.933
> 
> 标签：c#, winforms, listbox, generic-list

如何通过带有列表框中所选项目的按钮从通用列表中删除？

到目前为止，这是我的按钮单击方法中的内容：

```
if (listBox2.SelectedItem != null)
        {
            listBox1.Items.Add(listBox2.SelectedItem);
            listBox2.Items.Remove(listBox2.SelectedItem);
            if (listBox2.Items.Count > 0)
            {
                for (int i = 0; i < listBox2.Items.Count; i++)
                {
                    if (listBox2.GetSelected(i) == true)
                    {
                        Foods m = listBox2.SelectedItem as Foods;
                        list.Remove(m);
                    }
                }
            }
        } 
```

我假设这条线

> list.Remove(m);

会这样做，但它什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:30:15.367

似乎您在`for`循环中找到它之前删除了 SelectedItem。不确定，但这可能会有所帮助：

```
if (listBox2.Items.Count > 0)
{
    for (int i = 0; i < listBox2.Items.Count; i++)
    {
        if (listBox2.GetSelected(i) == true)
        {
            Foods m = chosenBox.SelectedItem as Foods;
            list.Remove(m);
        }
    }
}

listBox1.Items.Add(listBox2.SelectedItem);
listBox2.Items.Remove(listBox2.SelectedItem); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T16:02:57.393

**您好亲爱的使用简单的代码解决您的问题.....**

```
 private void button4_Click(object sender, EventArgs e)

    {
         if (this.listBox1.SelectedIndex >= 0)

        this.listBox1.Items.RemoveAt(this.listBox1.SelectedIndex);

    } 
```

# iphone - 从终端（Bash）将 xcodeproj 应用内购买转换为 pkg 文件或如何将 xcarchive 文件转换为 pkg 文件？

> ID：15688990
> 
> 赞同：4
> 
> 时间：2013-03-28T18:00:58.743
> 
> 标签：iphone, ios, xcode, xcodebuild

我正在尝试创建一个 bash 脚本来自动创建应用内购买 pkg 文件。

我的脚本成功创建了所有应用内购买的 xcodeproj 项目，然后使用此命令将它们存档

```
xcodebuild -scheme $nameOfProject archive 
```

**$nameOfProject**是一个变量，它在循环内保存与应用内购买相对应的 xcodeproj 文件的名称。

完成此操作后，我必须打开 Xcode 的存档部分并手动导出所有存档以创建我需要上传到 iTC 的 pkg 文件。

是否有任何命令可以用来从终端自动执行此操作？

提供相同解决方案的另一件事是：如何将 xcarchive 文件转换为 pkg 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T20:52:01.720

经过谷歌搜索和“应用内购买内容”项目的一些测试，我认为您需要使用的是`productbuild`命令行工具。由于我自己只是 iOS 开发人员，我没有创建安装程序的经验，但我很确定应用内内容的“pkg”文件是使用此命令行工具创建的。

要找到正确的参数，您可以参考 [https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplications/DistributingApplications.html#//apple_ref/doc/uid/TP40011201-CH5- SW1](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplications/DistributingApplications.html#//apple_ref/doc/uid/TP40011201-CH5-SW1)

或`man`。

**编辑：**
为了测试 XCode 的功能，我创建了一个简单的项目
![项目](../Images/1cc79cfa21a5afa152de0554a0c7e335.png)

我存档了它： ![存档内容](../Images/6352c30830aa913de58af632a846e32d.png)

然后我创建了一个简单的程序，我们调用它`ArgumentLogger`，代码是

```
int main(int argc, const char* argv[]) {
    //Open a file for logging 
    FILE* file = fopen("/Users/Sulthan/Desktop/log.txt","a+");

    for (int i = 0; i < argc; i++) {
        //log all parameters
        fprintf(file, "%s\n", argv[i]);
    }

    //end
    fclose(file);
    return 0;
} 
```

让我们举个例子——对于 bash 命令：

```
ArgumentLoggger --arg test1 test2 test3 
```

`log.txt`将包含

```
参数记录器
--arg
测试1
测试2
测试3

```

现在，让我们`/usr/bin/productbuild`用这个程序替换

```
sudo mv /usr/bin/productbuild /usr/bin/productbuild_old
sudo mv ArgumentLogger /usr/bin/productbuild 
```

然后在 XCode 中点击“分发”。 ![分发](../Images/8ac6076442d38b1cf45f0e2466709898.png) 并导出包。

`log.txt`现在包含

```
/usr/bin/productbuild
- 内容
/var/folders/v5/wwrmfpqx2mx1q5sf67_6vgg00000gn/T/FDCEA38E-1EF6-490B-8C30-8B0675C56CC8-47322-00014822C462D3CD/TestContent
/var/folders/v5/wwrmfpqx2mx1q5sf67_6vgg00000gn/T/FDCEA38E-1EF6-490B-8C30-8B0675C56CC8-47322-00014822C462D3CD/TestContent.pkg

```

现在我们确切地看到 XCode 做了什么。

第二个文件是生成的文件，我不确定该文件是否有更多功能，但使用 扩展后，内容似乎与从 XCode 创建`pkgutil`的内容相同。`pkg`

第一个文件是一个似乎直接取自`xcarchive`文件的目录。让我们看看它的内容
![临时目录内容](../Images/211aaad060c64d8a8fea2b6163ae4424.png)

**编辑2：**
总之，`bash`脚本应该是这样的：

```
CONTENTS_DIR = $( find "$nameOfProject.xcarchive" -name "InAppPurchaseContent" -type d )
PKG_FILE = "$nameOfProject.pkg"

productbuild --content "$CONTENTS_DIR" "$PKG_FILE" 
```